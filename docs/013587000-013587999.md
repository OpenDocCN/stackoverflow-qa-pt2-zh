# StackOverflow 问答 13587000-13587999

# macos - 在 Mac OS X Mountain Lion 上编译 apache2 的问题

> ID：13587001
> 
> 赞同：23
> 
> 时间：2012-11-27T15:00:35.050
> 
> 标签：macos, apache

在我的 Mac (10.8) 上尝试编译最新版本的 apache web server(2.4.3) 时遇到了问题。当我运行 ./configure 命令时，我得到以下输出：

```
checking for chosen layout... Apache
checking for working mkdir -p... yes
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking build system type... x86_64-apple-darwin12.0.0
checking host system type... x86_64-apple-darwin12.0.0
checking target system type... x86_64-apple-darwin12.0.0
configure: 
configure: Configuring Apache Portable Runtime library...
configure: 
checking for APR... yes
  setting CC to "/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc"
  setting CPP to "/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -E"
  setting CFLAGS to " "
  setting CPPFLAGS to " -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK"
  setting LDFLAGS to " "
configure: 
configure: Configuring Apache Portable Runtime Utility library...
configure: 
checking for APR-util... yes
checking for gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc
checking whether the C compiler works... no
configure: error: in `/Users/cti/Downloads/Applications/httpd-2.4.3':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

以下是日志文件中的最后几行：

```
## ----------- ##
## Core tests. ##
## ----------- ##

configure:3056: checking for chosen layout
configure:3058: result: Apache
configure:3861: checking for working mkdir -p
configure:3877: result: yes
configure:3886: checking for grep that handles long lines and -e
configure:3944: result: /usr/bin/grep
configure:3949: checking for egrep
configure:4011: result: /usr/bin/grep -E
configure:4027: checking build system type
configure:4041: result: x86_64-apple-darwin12.0.0
configure:4061: checking host system type
configure:4074: result: x86_64-apple-darwin12.0.0
configure:4094: checking target system type
configure:4107: result: x86_64-apple-darwin12.0.0
configure:4137: 
configure:4139: Configuring Apache Portable Runtime library...
configure:4141: 
configure:4182: checking for APR
configure:4327: result: yes
configure:4587: 
configure:4589: Configuring Apache Portable Runtime Utility library...
configure:4591: 
configure:4628: checking for APR-util
configure:4707: result: yes
configure:4968: checking for gcc
configure:4995: result: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc
configure:5224: checking for C compiler version
configure:5233: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc --version >&5
./configure: line 5235: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
configure:5244: $? = 127
configure:5233: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -v >&5
./configure: line 5235: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
configure:5244: $? = 127
configure:5233: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -V >&5
./configure: line 5235: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
configure:5244: $? = 127
configure:5233: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -qversion >&5
./configure: line 5235: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
configure:5244: $? = 127
configure:5264: checking whether the C compiler works
configure:5286: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc    -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK   conftest.c  >&5
./configure: line 5288: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
configure:5290: $? = 127
configure:5328: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:5333: error: in `/Users/cti/Downloads/Applications/httpd-2.4.3':
configure:5335: error: C compiler cannot create executables
See `config.log' for more details 
```

正如您在日志输出中看到的那样，./configure 中的脚本找不到我的 C 编译器的路径，因为它在日志输出中，`/Applications/Xcode.app/Contents/Developer/usr/bin/cc`而不是在`/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc`日志输出中您可能会说解决方案很简单，我只需要做是修改configure脚本吧？？问题是我对 shell 脚本一无所知，这就是为什么我在过去 3 个小时里一直在努力解决它。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-28T00:32:10.057

[在我创建并回答](https://stackoverflow.com/questions/13595730/how-do-i-build-mod-jk-on-mac-os-x-mountain-lion/13595732#13595732)的这篇文章中，我只是在为一个类似的问题而苦苦挣扎，所以我想我会分享我的发现。只需执行以下操作即可创建符号链接：

```
# Create a symlink to default Xcode toolchain for OS X lion
sudo ln -s \
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain \
/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain

# Create a symlink to default Xcode toolchain for OS X maverick
sudo ln -s \
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain \
/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.9.xctoolchain 
```

你至少应该进入下一步。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-12T22:46:27.103

对于 OSX 10.9 Mavericks Apache 已经安装，您可以直接进入终端并输入以下命令

查找 Apache 版本

```
httpd -v 
```

开始 ：

```
sudo apachectl start 
```

停止 ：

```
sudo apachectl stop 
```

重启 ：

```
sudo apachectl restart 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-25T23:42:35.247

我在 OSX Mavericks 上并试图编译 Apache 2.2.24 并遇到了这个错误。我从其他答案中看到问题出在 apxr 上，因此 APR 为 gcc 返回了错误的位置。Apple 提供了这个，而 Apache 配置使用的是 Apple 提供的。

一时兴起，我查看并看到配置脚本有一个选项可以忽略系统提供的 APR 并使用它自己的。

所以我这样做了：

```
./configure --with-included-apr 
```

它通过了配置步骤并且编译没有错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-14T11:29:41.957

```
checking for gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc accepts -g... yes
checking for /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc option to accept ISO C89... none needed
checking how to run the C preprocessor... /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -E
checking for /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc option to accept ISO C99... none needed
checking for pcre-config... false

configure: error: pcre-config for libpcre not found. PCRE is required and available from http://pcre.org/ 
```

====

我已经下载了 pcre-config，运行：`./configure;make;make install`

现在...... Tcharammmm！Httpd apache完全安装：D

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-18T20:08:44.407

`OSX Yosemite (10.10.5)`：

接受的答案对我有用：

```
$ cd /Applications/Xcode.app/Contents/Developer/Toolchains

$ ln -s XcodeDefault.xctoolchain/ OSX10.10.xctoolchain
                   ^                      ^
                   |                      |
             existing dir(or file)     link name 
```

（解释为什么它在下面起作用。）

然后：

```
httpd-2.4.18$ ./configure  (php may require an additional option) 
```

***如果您还要安装 php***，您可能需要在 ./configure 中添加另一个选项。

[在 Unix 上安装 php](http://php.net/manual/en/install.unix.apache2.php)的基本说明也给出了如何安装 apache 的说明：

```
./configure --enable-so
make
make install 
```

Apache 的配置帮助是这样说的：

```
httpd-2.4.18$ ./configure --help 
...
...
--enable-so    DSO capability. This module will be automatically
               enabled unless you build all modules statically. 
```

这似乎表明该`--enable-so`选项可能是默认选项，但 apache 安装说明甚至没有提及`--enable-so`. [在configure](https://httpd.apache.org/docs/2.2/programs/configure.html#configurationoptions)的 apache **2.2**文档中，我发现了这个：

```
Modules, disabled by default
Some modules are compiled by default and have to be enabled explicitly...
...
...
--enable-so
... 
```

[用于配置](https://httpd.apache.org/docs/2.4/programs/configure.html)的 apache **2.4**文档没有提到 --enable-so。相反，他们告诉您查看under的输出，其中列出了 --enable-so。`./configure --help``Optional features`

因此，我认为您应该像这样配置 apache：

```
 httpd-2.4.18$ ./configure --enable-so 
```

========

**安装 PHP**

为了让 mysql 与 php 一起工作，我不得不重新安装 php 并在 php 安装文档中更改以下行：

```
php-7.0.2$ ./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql 
```

到：

```
php-7.0.2$ ./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-pdo-mysql 
```

对于第一个，配置输出说该`--with-mysql`选项不存在 - 否则 php 安装正常，并且 apache`htdocs directory`中的 php 文件由 php.ini 执行。

问题是 php 已经改变了它的 mysql 支持，并且`mysql_connect()`已被弃用（并从 php7 中删除），所以现在你需要`pdo-mysql adapter`，如[php docs](http://php.net/manual/en/ref.pdo-mysql.php)中所述。

重新安装php后，最后几行是`make install`这样说的：

```
You may want to add: /usr/local/lib/php to your php.ini include_path 
```

`php.ini`位于此处：`/usr/local/lib/php.ini`，我进行了更改：

```
include_path = ".:/php/includes:/usr/local/lib/php" 
```

然后我重新启动 apache，确保 mysql 正在运行，并在浏览器中输入以下 url：

```
http://localhost:8080/mysql_test.php 
```

并且我的测试 PDO 脚本有效（位于目录 /usr/local/apache2/htdocs 中）：

```
<?php

$user = 'root';
$password = ’root_password_here’;
$host = 'localhost';
$dbname = 'my_db';

$pdo = new PDO(
    "mysql:host=$host; dbname=$dbname", 
    $user,
    $password
);

$statement = $pdo->query("SELECT 'Hello, dear MySQL user!' AS _message FROM DUAL");
$row = $statement->fetch(PDO::FETCH_ASSOC);
echo htmlentities($row['_message']);

?> 
```

===========

在收到与操作相同的错误消息后，我检查`config.log`了`httpd-2.4.18`目录，其中有一行说：

```
./configure: line 5326: /Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.10.xctoolchain/usr/bin/cc: 
No such file or directory 
```

所以配置脚本正在寻找：

1.  一个名为：

    `/Applications/Xcode.app/Contents/Developer/ Toolchains/OSX10.10.xctoolchain/usr/bin/`

2.  在该目录中命名的文件`cc`。

好的，让我们看看是否`cc`在该目录中：

```
~$ cd/Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.10.xctoolchain/usr/bin/

-bash: cd: /Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.10.xctoolchain/usr/bin/: No such file or directory 
```

这意味着该目录不存在。现在你必须弄清楚那个长路径中的哪个目录是不存在的：

```
~$ cd /Applications/Xcode.app
/Applications/Xcode.app$ cd Contents/Developer
/Applications/Xcode.app/Contents/Developer$ cd Toolchains/OSX10.10.xctoolchain

-bash: cd: Toolchains/OSX10.10.xctoolchain/: No such file or directory

/Applications/Xcode.app/Contents/Developer$ cd Toolchains
/Applications/Xcode.app/Contents/Developer/Toolchains$ ls 

XcodeDefault.xctoolchain 
```

可以看到没有名为`OSX10.10.xctoolchain`的目录——只有一个名为`XcodeDefault.xctoolchain`. 因此，配置脚本无法在用于查找文件`OSX10.10.xctoolchain`的路径中找到`cc`目录。为什么`configure`要找那个目录？因为要么是编写脚本的开发者搞砸了，要么是苹果搞砸了。

的真正目标`configure`不是找到目录，而是找到讨厌的`cc`文件。事实证明，该`cc`文件位于此处：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/
XcodeDefault.xctoolchain/usr/bin$ ls
...
cc
clang       
...
... 
```

对于更好奇的人：

```
/Applications/Xcode.app/Contents/Developer/
Toolchains/XcodeDefault.xctoolchain/usr/bin$ ls -al cc

lrwxr-xr-x  1 7stud  admin  5 Oct 29 15:22 cc -> clang 
```

`cc`只是 Xcode 的 clang 编译器的链接。

接受的答案创建了一个从名称`OSX10.10.xctoolchain`到实际包含`cc`文件的目录的链接（尽管更深的几个目录）`XcodeDefault.xctoolchain`：

```
Applications/
  Xcode.app/
    Contents/
      Developer/
        Toolchains/
          XcodeDefault.xctoolchain/
          OSX10.10.xctoolchain/ -> XcodeDefault.xctoolchain/
            usr/
              bin/
                 cc 
```

换句话说，在创建链接后，两条路径：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/
XcodeDefault.xctoolchain/usr/bin

/Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.10.xctoolchain/usr/bin 
```

将是等效的。名称`XcodeDefault.xctoolchain`和`OSX10.10.xctoolchain`将是同一目录的别名。

====

我不明白`@AlphaZygma's answer`。它建议将以下两个目录添加到您的 PATH（通过 /etc/paths）：

```
/Applications/Xcode.app/Contents/Developer/usr/bin

/Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.8.xctoolchain/usr/bin 
```

1.  在我的系统上，第一个目录不包含`cc`文件，所以我没有理由将该目录添加到我的 PATH 中。

2.  第二个目录是配置说找不到的目录。将不存在的目录添加到 PATH 仍然意味着它不存在。

3.  在任何情况下，配置脚本似乎都没有搜索 PATH 目录，`cc`因为错误消息将不存在的路径列为问题。搜索 PATH 目录会如何导致错误消息列出不存在的路径？配置脚本似乎正在从其他地方获取指示，告诉它在哪里搜索`cc`.

4.  我不确定为什么@AlphaZygma 在`/etc/paths`. 为什么不在现有路径下方添加新路径？

我尝试了这个答案的几个不同版本，但对我没有任何帮助。

====

我查看了以下输出`./configure --help`：

```
Usage: ./configure [OPTION]... [VAR=VALUE]...

To assign environment variables (e.g., CC, CFLAGS...), specify them as
VAR=VALUE.  See below for descriptions of some of the useful variables.

...
...

Some influential environment variables:
  CC          C compiler command
  CFLAGS      C compiler flags
  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
              nonstandard directory <lib dir>
  LIBS        libraries to pass to the linker, e.g. -l<library>
  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
              you have headers in a nonstandard directory <include dir>
  CPP         C preprocessor 
```

嘿，CC 列在那里。咱们试试吧：

```
$ ./configure CC=/Applications/Xcode.app/Contents/Developer/
Toolchains/XcodeDefault.xctoolchain/usr/bin/cc

...
...

checking for APR... yes
  setting CPP to "/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.10.xctoolchain/usr/bin/cc -E"
  setting CFLAGS to " "
  setting CPPFLAGS to " -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -DDARWIN_10"
  setting LDFLAGS to " "
configure: 
...
...
configure: error: C compiler cannot create executables 
```

更仔细地查看输出有这一行：

```
 setting CPP to "/Applications/Xcode.app/Contents/Developer/Toolchains/
OSX10.10.xctoolchain 
```

配置脚本仍然提到与 CPP 一起不存在的路径。再次查看输出`./configure --help`：

```
Usage: ./configure [OPTION]... [VAR=VALUE]...

To assign environment variables (e.g., CC, CFLAGS...), specify them as
VAR=VALUE.  See below for descriptions of some of the useful variables.

...
...

Some influential environment variables:
  CC          C compiler command
  CFLAGS      C compiler flags
  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
              nonstandard directory <lib dir>
  LIBS        libraries to pass to the linker, e.g. -l<library>
  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
              you have headers in a nonstandard directory <include dir>
  CPP         C preprocessor 
```

最后一行列出了错误行中提到的变量 CPP。咱们试试吧：

```
$ ./configure \
> CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc \
> CPP=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc 

...
...

checking how to run the C preprocessor... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
configure: error: in `/Users/7stud/Downloads/httpd-2.4.18':
configure: error: C preprocessor "/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc" fails sanity check
See `config.log' for more details 
```

现在，错误消息中的所有路径都是正确的，但是有些“未通过健全性检查”。我放弃！也许其他人可以从我离开的地方继续。

好的，感谢[这里](https://gcc.gnu.org/ml/gcc-help/2004-06/msg00256.html)的建议，以下工作：

```
$ ./configure \
> CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc \
> CPP='/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -E' 
```

可以缩短为：

```
$ ./configure \
> CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc \
> CPP='cc -E' 
```

但后来`make`失败了：

```
$ make
...
/usr/share/apr-1/build-1/libtool: line 8962: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.10.xctoolchain/usr/bin/cc: No such file or directory 
```

再一次提到了不存在的路径——这次与`libtool`. 这就是我要进入那个兔子洞的地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-14T12:59:21.573

在 Mac OS X 10.9 (Mavericks) 上遇到同样的问题；是的，正如 user3097424 所说，Apache 是为 Mavericks 用户预装的，但对我来说是 2.2 版。因此，需要升级到 2.4，按照 Adrian Rodriguez 的说法，创建一个符号链接，将 '10.8' 替换为 '10.9'：

```
sudo ln -s /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.9.xctoolchain
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-31T05:32:02.600

您可以将路径添加到库路径，而不是创建符号链接，只需将适当的目录用于您的 OSX 版本。

所以，在你的情况下，它可能看起来像

```
[user@host ~]$ sudo vi /etc/paths
/usr/bin
/Applications/Xcode.app/Contents/Developer/usr/bin
/Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin
/bin
... 
```

我认为这种方法更简洁一些，而不必像不同工具所期望的那样在不同的地方添加符号链接。

无论如何，这只是一个替代解决方案。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-14T04:46:15.223

@AlphaZygma 这对我很有用。我在 10.8.5 上，必须将以下内容添加到`/etc/paths`：

```
/Applications/Xcode.app/Contents/Developer/usr/bin
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin 
```

而不是你的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-31T08:41:46.970

让我通过的完整解决方案：

```
checking for gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc
checking whether the C compiler works... no 
```

问题可以在这里找到：http: [//mac-dev-env.patrickbougie.com/apache/](http://mac-dev-env.patrickbougie.com/apache/)

命令是（有些需要 sudo su）：

```
cd /usr/local/src (mkdir /usr/local/srt if /usr/local/src doesnt exist)
curl --remote-name http://mirror.csclub.uwaterloo.ca/apache/httpd/httpd-2.4.9.tar.gz
tar -xzvf httpd-2.4.9.tar.gz
rmhttpd-2.4.9.tar.gz
cd httpd-2.4.9

sudo xcode-select -switch /
mkdir -p /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.9.xctoolchain/usr/bin (this might require sudo su)
ln -s /usr/bin/cc /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.9.xctoolchain/usr/bin/cc (this might require sudo su)

./configure --prefix=/usr/local/apache-2.4.9
make
make install

ln -s apache-2.4.9 /usr/local/apache 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-17T01:06:07.790

我最近刚刚更新到 Mavericks 并且正在重新创建我的 Web 开发环境（包括安装端口）。我在升级端口时遇到了这个问题：

```
checking whether the C compiler works... no 
```

我以为我已经完成了所有设置，包括从 App Store 安装 XCode。但是一直有问题。我能够通过实际运行一次 XCode、接受许可协议并让 XCode 完全启动来修复它。下次我尝试升级端口时，我没有收到上述错误。

# linux - Select() 在使用 eventfd 时行为不正常

> ID：13587003
> 
> 赞同：4
> 
> 时间：2012-11-27T15:00:36.333
> 
> 标签：linux

我想使用 eventfd 作为在内核空间和用户空间之间发出简单事件信号的一种方式。eventfd 将用作一种信号方式，实际数据将使用 ioctl 传输。在继续实现它之前，我编写了一个简单的程序来查看 eventfd 与 select() 的行为。似乎如果您使用 select 等待 eventfd，当您在单独的线程中写入它时它不会返回。在我编写的代码中，写入线程从程序启动开始等待 5 秒，然后再写入 eventfd 两次。我希望 select() 在写入后立即在读取线程中返回，但这不会发生。select() 仅在 10 秒超时后返回并返回零。不管这个返回零，当我在 10 秒后尝试读取 eventfd 时，我得到了正确的值。

我使用 Ubuntu 12.04.1 (3.2.0-29-generic-pae) i386

知道为什么会这样吗？在我看来， select() 没有按应有的方式工作。

PS：这个问题类似于[linux - Can't get eventfd to work with epoll together](https://stackoverflow.com/questions/5355791/linux-cant-get-eventfd-to-work-with-epoll-together)

还有其他人面临类似的问题吗？

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>     //Definition of uint64_t

#include <pthread.h>    //One thread writes to fd, other waits on it and then reads it
#include <time.h>       //Writing thread uses delay before writing
#include <sys/eventfd.h>

int efd; //Event file descriptor

void * writing_thread_func() {
    uint64_t eftd_ctr = 34;
    ssize_t s;

    printf("\n%s: now running...",__func__);

    printf("\n%s: now sleeping for 5 seconds...",__func__);
    fflush(stdout); //must call fflush before sleeping to ensure previous printf() is executed
    sleep(5);

    printf("\n%s: Writing %lld to eventfd...",__func__,eftd_ctr);
    s = write(efd, &eftd_ctr, sizeof(uint64_t));
    if (s != sizeof(uint64_t)) {
        printf("\n%s: eventfd writing error. Exiting...",__func__);
        exit(EXIT_FAILURE);
    }

    eftd_ctr = 99;

    printf("\n%s: Writing %lld to eventfd...",__func__,eftd_ctr);
    s = write(efd, &eftd_ctr, sizeof(uint64_t));
    if (s != sizeof(uint64_t)) {
        printf("\n%s: eventfd writing error. Exiting...",__func__);
        exit(EXIT_FAILURE);
    }

    printf("\n%s: thread exiting...",__func__);
    pthread_exit(0);
}

void * reading_thread_func() {
    ssize_t s;
    uint64_t eftd_ctr;

    int retval;         //for select()
    fd_set rfds;        //for select()
    struct timeval tv;  //for select()

    printf("\n%s: now running...",__func__);

    printf("\n%s: now waiting on select()...",__func__);
    //Watch efd
    FD_ZERO(&rfds);
    FD_SET(efd, &rfds);

    //Wait up to 10 seconds
    tv.tv_sec = 10;
    tv.tv_usec = 0;

    retval = select(1, &rfds, NULL, NULL, &tv);

    if (retval == -1){
        printf("\n%s: select() error. Exiting...",__func__);
        exit(EXIT_FAILURE);
    } else if (retval > 0) {
        printf("\n%s: select() says data is available now. Exiting...",__func__);
        printf("\n%s: returned from select(), now executing read()...",__func__);
        s = read(efd, &eftd_ctr, sizeof(uint64_t));
        if (s != sizeof(uint64_t)){
            printf("\n%s: eventfd read error. Exiting...",__func__);
            exit(EXIT_FAILURE);
        }
        printf("\n%s: Returned from read(), value read = %lld",__func__, eftd_ctr);
    } else if (retval == 0) {
        printf("\n%s: select() says that no data was available even after 10 seconds...",__func__);
        printf("\n%s: but lets try reading efd count anyway...",__func__);
        s = read(efd, &eftd_ctr, sizeof(uint64_t));
        if (s != sizeof(uint64_t)){
            printf("\n%s: eventfd read error. Exiting...",__func__);
            exit(EXIT_FAILURE);
        }
        printf("\n%s: Returned from read(), value read = %lld",__func__, eftd_ctr);
        exit(EXIT_FAILURE);
    }

    printf("\n%s: thread exiting...",__func__);
    pthread_exit(0);
}

int main() {
    pthread_t writing_thread_var, reading_thread_var;

    //Create eventfd
    efd = eventfd(0,0);
    if (efd == -1){
        printf("\n%s: Unable to create eventfd! Exiting...",__func__);
        exit(EXIT_FAILURE);
    }

    printf("\n%s: eventfd created. value = %d. Spawning threads...",__func__,efd);

    //Create threads
    pthread_create(&writing_thread_var, NULL, writing_thread_func, NULL);
    pthread_create(&reading_thread_var, NULL, reading_thread_func, NULL);

    //Wait for threads to terminate
    pthread_join(writing_thread_var, NULL);
    pthread_join(reading_thread_var, NULL);

    printf("\n%s: closing eventfd. Exiting...",__func__);
    close(efd);
    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:42:50.270

所以这是一个愚蠢的错误：

我变了：

```
retval = select(1, &rfds, NULL, NULL, &tv); 
```

到：

```
retval = select(efd+1, &rfds, NULL, NULL, &tv); 
```

它奏效了。

再次感谢@Steve-o

# java - 比较字符串时忽略正则表达式

> ID：13587006
> 
> 赞同：1
> 
> 时间：2012-11-27T15:01:03.260
> 
> 标签：java, android, regex

> **可能重复：**
> [如何在 Java 中为正则表达式转义文本](https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java)

我有一个问题，我的用户有便盆......

详细地说，我的 Android 应用程序使用 Google 语音搜索返回语音结果，如果用户已将设置应用到“阻止冒犯性词语”，它将返回“离开”为“g* a***”

在尝试确定用户所说的内容时，我会经常使用常见的匹配，例如：

```
if(voiceResult.matches(someCommand)) { //do something 
```

如果用户选择说脏话，那么我将收到以下错误：

```
java.util.regex.PatternSyntaxException: Syntax error in regexp pattern near index X 
```

我真的不能要求我的所有用户要么不发誓或关闭过滤器，特别是从我的测试来看，谷歌语音搜索似乎有一个肮脏的头脑，并且经常在最随机的句子中间返回脏话！

所以，我对如何处理这种可能性有点迷茫......我一直在寻找一种在字符串中“忽略正则表达式”的方法，但我画了一个空白，我无法弄清楚我将如何动态地转义字符串中包含的任何 *...

目前，我唯一的选择似乎是检测到“*”，然后很好地要求他们不要发誓或删除过滤器！

欢迎提出建议！除非你认为他们应该因为他们的不礼貌而被逼近……

请注意：“走开”目前没有被过滤 - 这是一个例子......

编辑：我确认重复语音请求的最简单示例正则表达式：

```
String userWords = "g* a***"

if(userWords.matches(userWords)) { // Then go on to compare userWords with other strings 
```

编辑2：

```
 String goAway = "g* a***";

    String goAway1 = Pattern.quote(goAway);
    String goAway2 = Pattern.quote(goAway);

    if (goAway1.matches(goAway2)) { \\ do something 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:13:41.333

您可以使用`Pattern.quote()`为您进行转义，如此[处](https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java)所示。

```
String pattern = Pattern.quote("g* a***"); 
```

将为您提供以下字符串：

```
"g\* a\*\*\*" 
```

请注意，这些反斜杠是字符串中的实际字符。如果你想手动创建这个字符串，你可以使用这个赋值：

```
String pattern = "g\\* a\\*\\*\\*"; 
```

现在您可以将`goAway1`其用作字面上匹配的正则表达式模式`g* away***`（因为每个字符都被视为文字）。因此，例如：

```
String goAway = "g* a***";
String pattern = Pattern.quote("g* a***");
if (goAway.matches(pattern)) { // we know that goAway was "g* a***" 
```

当然，您不能使用该模式来匹配带引号的字符串（就像您在编辑的代码片段中所做的那样）。您尝试做的与应用**正则表达式相同**

```
String pattern = "g\\* a\\*\\*\\*"; 
```

到这个**文字**主题字符串：

```
String subject = "g\\* a\\*\\*\\*"; 
```

发生什么了？`g`在模式中，匹配`g`主题。现在该模式包含一个转义序列`\*`，它将匹配一个文字`*`。但是主题字符串`\`接下来有一个文字。这不匹配。

# python - Python：使用 Input() 方法进行调试

> ID：13587007
> 
> 赞同：0
> 
> 时间：2012-11-27T15:01:03.803
> 
> 标签：python, debugging

**我的应用程序 (C#/WPF)为非**程序员的用户创建 Python 代码- 他们可以选择拖放项目，因此他们创建了一个应用程序转换为 Python 的序列。

话虽如此，他们想添加调试功能 - 在执行期间将输入注入其序列的选项（例如，将`myVar`的值从 1 更改为 2）。据我了解，我应该能够将其翻译成 Python 的`input()`. 我一直试图了解它是如何工作的并得到以下错误（使用`PythonWin`）：

```
>>> a = 1
>>> input('--:)')
--:)>>> a=2
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "<string>", line 1
    a=2
     ^
SyntaxError: invalid syntax 
```

我究竟做错了什么？
（另外，一些 Python 调试功能的教程 - 包括`input()`将不胜感激。）

**编辑** 我们正在使用 Python 2.6.6。不需要`IronPython`- 它在 Python 环境中执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:17:47.877

根据[python 文档](http://docs.python.org/2/library/functions.html#input)，`input()`方法等同于`eval(raw_input(prompt))`并且`eval()`只能用于评估表达式。

因此，例如此代码是有效的：

```
>>> a=1 
>>> input('--:)')
--:) a+1
2 
```

但是`a=2`是一个语句，所以你必须使用`exec()`方法来执行它，这里是一个例子：

```
>>> exec(raw_input())
a=2
>>> a
2 
```

# android - 有什么方法可以在不创建 GeoPoint 的情况下进行投影？

> ID：13587016
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:01:46.177
> 
> 标签：android, performance, overlay, draw

在我的应用程序中，我在地图上有多个叠加层。

在每个叠加层的`draw()`方法中，我使用列表中的点绘制形状。

> ```
>  final int listSize = list.size();
>             for (int i = 0; i < listSize; i++) {
>                 mMapView.getProjection().toPixels(
>                         new GeoPoint((int) (list.get(i).getPNT_LATITUDE() * 1e6), (int) (list.get(i).getPNT_LONGITUDE() * 1e6)), point); 
> ```

如您所见，我必须在`GeoPoint`每个循环中创建对象才能获得像素投影。我不能创建单个对象并每次都使用它，因为`GeoPoint`没有“设置”方法。

有什么方法可以在不创建 GeoPoint 的情况下进行投影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:05:57.793

不，很遗憾没有。我几乎愿意为这个功能买单；）
围绕 GeoPoints 和 Projection 的许多地图东西都非常错误，而且这些类都是最终的，找不到源代码

如果您的坐标以某种方式重复，您可以存储地理点。

# javascript - 如何使我的脚本与数组一起使用？

> ID：13587020
> 
> 赞同：2
> 
> 时间：2012-11-27T15:02:07.503
> 
> 标签：javascript

这个 Javascript 控制一个带有前进和后退按钮的 Monial 内容框来向前或向后移动，但它只适用于 2 个 DIV，我怎样才能使这个脚本与数组一起工作，以便我可以添加更多元素？

例如

**当前脚本图**

![在此处输入图像描述](../Images/a8a4362119807cff5d73ac92a8459bff.png)

**脚本代码**

```
 $(document).ready(function(e) {
   showQuote();
   $(".left").click(function(e) {
      $("#monial_btn_1").trigger("click"); 
   });
   $(".right").click(function(e) {
      $("#monial_btn_2").trigger("click");
   });

   $("#monial_btn_1").click(function(e) {
       $(".monial_content_1").fadeIn("fast");
       $(".monial_content_2").fadeOut("fast");
       var obj=$(this);
       obj.removeClass();
       obj.addClass("monial_btn_selected");

       obj=$("#monial_btn_2");
       obj.removeClass();
       obj.addClass("monial_btn");
   });

   $("#monial_btn_2").click(function(e) {
       $(".monial_content_1").fadeOut("fast");
       $(".monial_content_2").fadeIn("fast");
       var obj=$(this);
       obj.removeClass();
       obj.addClass("monial_btn_selected");

       obj=$("#monial_btn_1");
       obj.removeClass();
       obj.addClass("monial_btn");
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:05:56.497

```
var n = 10
for(i = 1; i < n; i++) {
   $("#monial_btn_" + i).click(function(e) {
       $(".monial_content_" + i).fadeIn("fast");
       $(".monial_content_" + (i + 1)).fadeOut("fast");
       var obj=$(this);
       obj.removeClass();
       obj.addClass("monial_btn_selected");

       obj=$("#monial_btn_" + (i + 1));
       obj.removeClass();
       obj.addClass("monial_btn");
   });
} 
```

# xml - XSLT 在父节点中指定名称空间

> ID：13587022
> 
> 赞同：0
> 
> 时间：2012-11-27T15:02:13.593
> 
> 标签：xml, xslt-1.0, transformation, xml-namespaces, xslt

我是 XSLT 的初学者。我正在使用它将 XML 转换为 XML。

**源 XML：**

```
<Response>
    <Text>Hello</Text>
</Response> 
```

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:a="http://myexample.org/a"
xmlns:b="http://myexample.org/b"
version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Response" namespace="http://myexample.org/a">
        <xsl:element name="Root">
            <xsl:element name="a:Parent">
                <xsl:element name="b:Child">
                    <xsl:value-of select="Text"/>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<Root>
  <a:Parent xmlns:a="http://myexample.org/a">
    <b:Child xmlns:b="http://myexample.org/b">Hello</b:Child>
  </a:Parent>
</Root> 
```

我想使用 XSLT 将 XML 转换为下面的 XML。

**预期输出：**

```
<Root xmlns:a="http://myexample.org/a">
    <a:Parent xmlns:b="http://myexample.org/b">
        <b:Child/>
    </a:Parent>
<Root> 
```

我已经成功创建了 XSLT 来转换数据，但在这里我对命名空间感到困惑。我无法像上面那样生成它。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:31:22.777

使用 XSLT 1.0 在特定位置创建命名空间声明有点尴尬（在具有 的 2.0 中更容易`<xsl:namespace>`），但可以通过从*样式表*文档本身复制命名空间节点的技巧来完成：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:a="http://myexample.org/a"
xmlns:b="http://myexample.org/b"
version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Response">
        <xsl:element name="Root">
            <xsl:copy-of select="document('')/*/namespace::a" />
            <xsl:element name="a:Parent">
                <xsl:copy-of select="document('')/*/namespace::b" />
                <xsl:element name="b:Child">
                    <xsl:value-of select="Text"/>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

解析样式表`document('')`文档并为您提供其根节点，元素`document('')/*`也是如此。`<xsl:stylesheet>`然后我们从该元素中提取绑定到指定前缀的*命名空间节点*并将其复制到输出文档。

或者，从 中取出命名空间声明`<xsl:stylesheet>`并使用文字结果元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Response">
        <Root xmlns:a="http://myexample.org/a">
            <a:Parent xmlns:b="http://myexample.org/b">
                <b:Child>
                    <xsl:value-of select="Text"/>
                </b:Child>
            </a:Parent>
        </Root>
    </xsl:template>
</xsl:stylesheet> 
```

`a`虽然如果您在样式表的其他地方需要and`b`前缀，这将不起作用。

# regex - 捕获重复组的多个子组

> ID：13587023
> 
> 赞同：1
> 
> 时间：2012-11-27T15:02:14.587
> 
> 标签：regex

基本上我想捕获多个子组。我不是[重复捕获组，也不是捕获重复组](http://www.regular-expressions.info/captureall.html)

如果有**aaa**我想得到以下子组：
*$1：a
$2：a
$3：a*

这可以通过**(a)(a)(a)**来实现。

我现在正试图按照**(a){3}**的方式来实现这一点，不幸的是，这只会导致
*$1:a*

编辑：我正在尝试在 Java 中执行此操作。我已经有另一个解决方案，它使用 StringBuilder 通过重复捕获组来生成正确的模式以获取预期的发生次数。
这个问题更多是出于好奇，因为我正在寻找一种更简单的方法来做到这一点。

Some1.Kill.The.DJ 提到的是我尝试在 Java 中做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:07:45.460

实际用例和正则表达式引擎将是真正回答这个问题所必需的，但对于您提供的示例，这可以使用与表达式的全局模式匹配来完成`(a)`。在python中它会这样做......

```
>>> import re
>>> test = "aaa"
>>> re.findall(r'(a)', test)
['a', 'a', 'a'] 
```

在 Perl 中，它会添加 /g 修饰符等。全局模式匹配将尝试在给定字符串中尽可能多地匹配表达式。

# scala - 在 Neo4j 中删除索引节点

> ID：13587025
> 
> 赞同：5
> 
> 时间：2012-11-27T15:02:24.820
> 
> 标签：scala, indexing, neo4j

在 Neo4j 中，如果我删除一个索引节点，我必须先从索引中删除该节点还是会自动更新索引？

这是一个小的（未经测试的）示例：

```
val index = graphDb.index()
val someIdx = index.forNodes("someIdx")
val someNode = graphDb.createNode()
someIdx.add(someNode, "key", "value") 
```

进而：

```
//remove from someIdx???
someNode.delete() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T15:21:34.403

删除节点时，必须先删除索引。如果要从索引中删除节点的所有提及，请参见下文：

```
 IndexManager indexManager = db.index();
    Index<Node> index = indexManager.forNodes("indexName");
    index.remove(node); 
```

# javascript - （又一个）从父级访问 iframe js 函数 - Flowplayer

> ID：13587026
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:02:30.660
> 
> 标签：javascript, iframe, flowplayer

我知道它已经讨论了很多次，但我找不到一种方法来完成这项工作：

我通过模态窗口启动 flowplayer (iframe)。当模态关闭时，仍然可以听到视频的声音。

此模式有一个 onclose 事件。iframe 与父级在同一个域中。

使用以下代码启动播放器：

播放器 = $f("播放器", "flowplayer.swf").ipad();

它是通过变量启动的，因为当时我这样做是使 .ipad() 工作的唯一解决方案。

无论我在 close 函数中写什么，（flowplayer 文档说 $f().stop(); 但它与 player.stop(); 相同）我得到“$f() 未定义”或告诉玩家的消息没有定义。

我真的不知道该怎么做，非常感谢一些帮助。

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:07:33.513

你需要做两件事。

1.  将关闭 iFrame 的代码需要存在于该 iFrame 中。如果您尝试从您的主页执行 $f() 它可能不存在。
2.  在您的父页面上，您从 iFrame 中调用代码并调用停止音频的函数。

[在 iframe 的父窗口中触发事件](https://stackoverflow.com/questions/4601325/trigger-events-in-iframes-parent-window)

这接近你需要的。

# ruby-on-rails - rails：删除记录时也会删除关联记录，看不到原因

> ID：13587034
> 
> 赞同：1
> 
> 时间：2012-11-27T15:03:00.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的问题是，在我的电子商务 rails 3.0.x 应用程序中，我有产品、line_items 和购物车。

line_item 属于购物车和产品。一个产品可以有很多 line_items。如果我删除一个产品，line_items 也应该被删除 (:dependent => :destroy)

现在，奇怪的是，当我从购物车中删除一个 line_item 时，这也会删除我的完整产品记录！

这是必要的代码：

```
#cart_view.erb
<% for line_item in cart.line_items %>

<!-- HTML omitted -->

<!-- This link actually removes not only the line_item from cart, but also deletes the product...? . -->
<%= link_to "remove", line_item, :confirm => 'Remove from cart?', :method => :delete %>

<% end %>

#product.rb
class Product < ActiveRecord::Base
   # for cart
   has_many :line_items, :dependent => :destroy
   has_many :stock_items, :dependent => :destroy
end

#line_item.rb
class LineItem < ActiveRecord::Base

  belongs_to :product

end

# stock_item.rb
class StockItem < ActiveRecord::Base

  belongs_to :product, :dependent => :destroy

  has_many :line_items

end

#line_items_controller.rb

class LineItemsController < ApplicationController

   def destroy
     @line_item = LineItem.find(params[:id])
     @cart = @line_item.cart
     @line_item.destroy
     flash[:notice] = "Removed from cart."
     redirect_to @cart
   end
end 
```

这种行为并不总是这样，至少我不记得了。乍一看，我在这里没有任何问题，因此任何想法都受到高度赞赏。

**编辑**

db 表定义（我使用 mysql2 db 适配器）：

```
| line_items | CREATE TABLE `line_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `unit_price` int(11) NOT NULL DEFAULT '0',
  `product_id` int(11) DEFAULT NULL,
  `cart_id` int(11) DEFAULT NULL,
  `quantity` int(11) DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `stock_item_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `line_items_cart_id_fk` (`cart_id`),
  CONSTRAINT `line_items_cart_id_fk` FOREIGN KEY (`cart_id`) REFERENCES `carts` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 |

| products | CREATE TABLE `products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `description` text,
  `price` int(11) NOT NULL DEFAULT '0',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `subtitle` varchar(255) DEFAULT NULL,
  `currency` varchar(255) DEFAULT 'GBP',
  `legacy` tinyint(1) DEFAULT '0',
  `product_code` varchar(255) DEFAULT NULL,
  `category_id` int(11) DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 | 
```

** 编辑 2 **

`rails s`当我点击 rmove line_item 链接时的日志：

```
Started POST "/line_items/16?locale=en" for 127.0.0.1 at 2012-11-27 16:51:06 +0100
  SQL (1.6ms)  describe `roles_users`
  Processing by LineItemsController#destroy as HTML
  Parameters: {"authenticity_token"=>"sN78OIdiVW5WgSoLA3JR7RFOWIy5B+j1XLqe47vZf3I=", "locale"=>"en", "id"=>"16"}
  LineItem Load (0.4ms)  SELECT `line_items`.* FROM `line_items` WHERE `line_items`.`id` = 16 LIMIT 1
  Cart Load (0.3ms)  SELECT `carts`.* FROM `carts` WHERE `carts`.`id` = 16 LIMIT 1
  SQL (0.1ms)  BEGIN
  AREL (0.2ms)  DELETE FROM `line_items` WHERE `line_items`.`id` = 16
  StockItem Load (0.5ms)  SELECT `stock_items`.* FROM `stock_items` WHERE `stock_items`.`id` = 7 LIMIT 1
  AREL (0.3ms)  DELETE FROM `stock_items` WHERE `stock_items`.`id` = 7
  Product Load (0.7ms)  SELECT `products`.* FROM `products` WHERE `products`.`id` = 7 LIMIT 1
  Product::Translation Load (0.7ms)  SELECT `product_translations`.* FROM `product_translations` WHERE (`product_translations`.product_id = 7)
  AREL (0.3ms)  DELETE FROM `product_translations` WHERE `product_translations`.`id` = 11
  AREL (0.2ms)  DELETE FROM `product_translations` WHERE `product_translations`.`id` = 12
  ProductLike Load (0.4ms)  SELECT `product_likes`.* FROM `product_likes` WHERE (`product_likes`.product_id = 7)
  Asset Load (0.4ms)  SELECT `assets`.* FROM `assets` WHERE (`assets`.product_id = 7)
  AREL (0.3ms)  DELETE FROM `assets` WHERE `assets`.`id` = 6
  SetItem Load (0.4ms)  SELECT `set_items`.* FROM `set_items` WHERE (`set_items`.product_id = 7)
  StockItem Load (0.3ms)  SELECT `stock_items`.* FROM `stock_items` WHERE (`stock_items`.product_id = 7)
  AREL (0.2ms)  DELETE FROM `products` WHERE `products`.`id` = 7
  SQL (0.6ms)  COMMIT
Redirected to http://localhost:3000/carts/16?locale=en
Completed 302 Found in 3093ms
/Users/admin/.rvm/gems/ruby-1.9.2-p136@rails3/gems/activesupport-3.0.17/lib/active_support/core_ext/string/output_safety.rb:23: warning: regexp match /.../n against to UTF-8 string 
```

# jquery - 多个并发的 jQuery 效果

> ID：13587038
> 
> 赞同：1
> 
> 时间：2012-11-27T15:03:15.150
> 
> 标签：jquery, jquery-ui, user-interface

我正在尝试将一些精美的 UI 内容应用到我的 Web 应用程序中，并且我想要一个菜单​​，它可以向下滑动并淡入，或者同时向上滑动和淡出

我试过这个...

```
if($('#Menu').css("display") == "none") {
    $('#Menu').slideDown(250).fadeIn(250);
} else {
    $('#Menu').slideUp(250).fadeOut(250);
} 
```

......它没有工作。只发生一种效果...谁能解释是否可以以这种方式将效果链接在一起，或者提出一种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:09:39.463

要实现这一点，您需要使用 jQuery 的[.animate()](http://api.jquery.com/animate/)函数。像这样的东西；

```
if ($('#Menu').css('opacity') == 1) {
    $('#Menu').animate({
        opacity: 0,
        height: '0'
    }, 500, function() {
        // animation complete
    });
} else {
    $('#Menu').animate({
        opacity: 1,
        height: '200px'
    }, 500, function() {
        // animation complete
    });
}​ 
```

我认为您可以将高度值替换为“切换”以避免输入特定值。但是我没有亲自使用它，所以不能确定。

**编辑：** “切换”似乎工作正常：http: [//jsfiddle.net/RjESG/3/](http://jsfiddle.net/RjESG/3/)

# html - 在设备独立单元中定义 css 宽度/高度？

> ID：13587039
> 
> 赞同：9
> 
> 时间：2012-11-27T15:03:16.367
> 
> 标签：html, css

我有一个 div，我试图弄清楚如何让它占据相同数量的屏幕空间，而不管设备显示密度如何。

例如，假设我有两个 5 英寸宽的设备。第一个显示器的设备像素比=1，第二个显示器的设备像素比=2。

```
Device 1: 5 inches wide, device-pixel-ratio=1
Device 2: 5 inches wide, device-pixel-ratio=2 
```

因此，第二个设备在同一空间中填充了两倍的像素。

我的 div 风格：

```
.myDivStyle {
    width: 100px;
    height: 50px;
} 
```

如果我理解正确，设备 2 似乎将 div 呈现为设备 1 上宽度/高度的一半。

如果是这种情况，有没有办法在与设备无关的单元中定义我们的宽度/高度？或者，在我们检查 device-pixel-ratio 属性之后，我们是否必须在页面加载等时手动缩放所有样式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:32:28.237

使用`em`unit 重新定义你的 css 大小会很好。

本参考资料中有一些很好的链接。请检查这些

1.  [w3.org](http://www.w3.org/WAI/GL/css2em.htm)
2.  [w3.org](http://www.w3.org/TR/WCAG20-TECHS/C14)
3.  [CSS 技巧](http://css-tricks.com/css-font-size/)

以上所有链接都敦促，`em`最适合您希望文档在各种设备上表现良好的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:06:56.077

这听起来更像是您需要使用百分比而不是像素。所以它会使用你屏幕的“百分比”数量

```
.myDivStyle {
    width:  50%;
    height: 25%;
} 
```

它将解决像素数量的问题。如果您使用 Iphone 和 Android 的屏幕，这将解决问题，因为它们使用两种完全不同的分辨率。例如，我相信 Iphone 使用 320 by .. something，而我自己的三星 Galaxy 使用我认为 480 by something。（不知道真实值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:35:04.457

大多数设备将采用以下 3 种分辨率 1) HVGA-VGA 的一半 (320 x 240) 2) WVGA-wide VGA(800x 480) - 几乎是 HVGA 的 1.5 倍 3) HVGA 2x- (640 x 960) - IPHONE 4 使用此分辨率

为上述三种分辨率编写单独的 css 文件

```
@Media screen and (min-width: 320px) and (max-width: 480px){
/* css files here*/
} 
```

或者

```
@Media screen and (min-device-pixel-ratio: 2)
{/* css files here*/

} 
```

对其他分辨率执行相同操作。以 1 分辨率创建的 CSS 类应复制粘贴到所有三种分辨率中以获得完美视图。通过这种方式，您可以展示完美的设备特定风格

# jquery - IE9 使用 jquery 将项目添加到列表框的可见性问题

> ID：13587043
> 
> 赞同：0
> 
> 时间：2012-11-27T15:03:27.397
> 
> 标签：jquery, model-view-controller, internet-explorer-9

我正在从输入文本框向列表框中添加一个项目。在 chrome 和 firefox 中一切正常，但是当我单击按钮将文本添加到 IE9 中的列表框时，该项目被添加但不可见。当我单击保存按钮时，我添加的项目显示在集合中，它只是不在列表框中查看。

下面是我的jQuery：

```
$('#addToListBox1').click(function () {
var textValue = $('input[name=classIdInput]').val();

$('#listbox1').append(
    new Option( 
        textValue,
        textValue
    ));
}); 
```

IE9 的奇怪行为......任何想法为什么添加到列表框的文本有一个位置，虽然你看不到它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:24:32.400

tuens out 我需要在我的 _layout 文件中添加一个元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

# jquery - 带有图像的 Jquery 砌体中心布局不适用于加载

> ID：13587044
> 
> 赞同：2
> 
> 时间：2012-11-27T15:03:31.873
> 
> 标签：jquery, layout

我正在从事一个爱好项目，该项目使用 Jquery 砌体来布置我页面中的项目。我使用中心布局，这样无论我有多少项目，它们总是最终位于我页面的中心。事实上，它有效。问题是页面第一次加载时，布局不是居中，而是在页面的左侧。然后它“跳转”到所需的布局。

这是我的[URL](http://learnviashow.org/shows/)，向您展示我的意思。请注意，突然跳跃后布局不“正确”。我想要的是消除跳转，当布局呈现给用户时使布局居中。

我将 ImageLoaded 插件与砖石一起使用。以下是相关代码：

```
$('#elements').imagesLoaded(function(){
            $('#elements').masonry({
                itemSelector: '.element',
                columnWidth: 245,
                gutterWidth: 6,
                isFitWidth: true,
                isAnimated: true
            });
}); 
```

为了使布局居中，我将以下规则添加到#elements：

```
#elements{
margin: 0 auto;
} 
```

正如此处的砌体文件[所示](http://masonry.desandro.com/demos/centered.html)。

那我的问题是什么？感谢您的任何意见。

**编辑**：

感谢@Bendim，我想出了办法。我已经在下面写了我的答案，但还有一个问题：整个界面需要一段时间才能呈现出来，这并不理想。无论如何，我会为此努力。再次感谢@Bendim。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:50:16.440

我有同样的问题。我的解决方案是`div`用砖石元素隐藏它，并在一切都被引导后将其淡入。没有 javascript 的用户的后备对我来说很重要。

```
<head>
<title>Example</title>
<style type="text/css">
#elements {
    /* hide the elements to avoid jumping */
    display: none;
}
</style>
<!-- fallback for people without javascript -->
<noscript>
<style type="text/css">
#elements {
    /* overriding the css above */
    display: block !important;
}
</style>
</noscript>
</head>
<body>

Your page content…

<!-- load all jquery from google, with fallback to local file -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/jquery-1.7.2.min.js"><\/script>')</script>

<!-- load jQuery plugin that triggers a callback after all images have been loaded -->
<script src="/jquery.imagesloaded.min.js"></script>

<!-- load masonry script -->
<script src="/jquery.masonry.min.js"></script>

<script type="text/javascript">
    var options = {
        itemSelector: '.element',
        columnWidth: 245,
        gutterWidth: 6,
        isFitWidth: true,
        isAnimated: true
    };
    var $container = $('#elements');
    $container.imagesLoaded(function(){
        /* div with content fade in */
        $('#elements').fadeIn(1000);
        /* if all images are loaded it runs the masonry script */
        $container.masonry(options);
    });
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:10:55.867

@Bendim 给了我一个我打算尝试一段时间的想法。但是当我隐藏#elements div 时，我的元素在我让它淡入后重叠。所以我隐藏了.element div，然后淡入它们。这是我所做的：

```
.element {
    display: none;
} 
```

然后在砌体代码之后：

```
$('#elements).mansory(
    ...
);

$('.element').each(function(i){
    $(this).fadeIn('fast');
}); 
```

它工作得很好，根本没有跳跃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T10:50:25.043

如果您将渲染具有固定高度和宽度的图像，它们将不会重叠。我的解决方案是使用php函数`getimagesize($pathToImage)`，如果你有固定宽度（例如260px），你只需要使用这个方法

```
<?php 
$imageInfo = getimagesize($pathToImage);
$originalHeight = $imageInfo[1];
$originalWidth = $imageInfo[0];
$height = (260/$originalWidth) * $originalHeight;
print "<img src='path/to/image.jpg' widht='260px' height='$height'>";
?> 
```

使用此方法打印的图像不会重叠。稍后将使用js加载的图像根本不需要设置高度，因此您只需为该图像设置固定高度，它将由php而不是js呈现。

# javascript - 悬停时的淡入/淡出效果

> ID：13587045
> 
> 赞同：3
> 
> 时间：2012-11-27T15:03:41.547
> 
> 标签：javascript, jquery, layout

我的页面上有几个社交徽标的淡入/淡出效果。

看起来它们工作得很好，但最初的淡入淡出不会工作，直到我将鼠标悬停在它们上面。

加载页面时如何使淡入功能起作用？

```
<script type='text/javascript'>
    $(document).ready(function()
    {
        $("img.a").hover(function() 
        {
            $(this).stop().animate({"opacity": "1"}, "fast");
        },
        function() 
        {
            $(this).stop().animate({"opacity": "0.5"}, "fast");
        });
    });
</script> 
```

这页纸：

> www.tranceil.fm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:06:54.143

我知道您需要一个 jQuery 解决方案，但是如果您可以使用 CSS 来实现它，为什么还要使用它呢？

```
img.class {
   opacity: .5;
   transition: opacity 2s;
   /* Transitions will take care of the smooth effect */
   -moz-transition: opacity 2s; /* Firefox 4 */
   -webkit-transition: opacity 2s; /* Safari and Chrome */
   -o-transition: opacity 2s; /* Opera */
}

img.class:hover {
   opacity: 1;
} 
```

注意：我没有使用`rgba`，因为它只是一个图像

对于 IE 支持，您可以使用[CSS3 Pie](http://css3pie.com/)

如果你仍然想坚持使用 jQuery，我觉得它不是很好，但我想你可以通过简单地在 CSS 中定义它来为你的社交图标设置初始不透明度

```
img.a {
   opacity: .5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:07:57.760

加载文档后，只需设置 CSS。

```
$(document).ready(function(){
    $("img.a").css({"opacity": "0.5"});
    $("img.a").hover(
        function() {
            $(this).stop().animate({"opacity": "1"}, "fast");
        },
        function() {
            $(this).stop().animate({"opacity": "0.5"}, "fast");
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:08:47.370

怎么样

```
<script type='text/javascript'>
$(document).ready(function(){
    $("img.a").hover(
        function() {
            $(this).stop().animate({"opacity": "1"}, "fast");
        },
        function() {
            $(this).stop().animate({"opacity": "0.5"}, "fast");
        }
    ).css('opacity':'0.5');

});
</script> 
```

你也可以用 CSS 来做，但是 jQuery 对浏览器更安全一些。

# java - 如何在 J2SE DeskTop 应用程序中获取 facebook 页面状态

> ID：13587050
> 
> 赞同：0
> 
> 时间：2012-11-27T15:03:53.413
> 
> 标签：java, facebook, web

您好，我已阅读网站的 facebook API。我添加了一个 facebook 插件，它将最新帖子获取到网站的面板中。现在我需要通过网站或直接从 facebook 将这些帖子发送到桌面 J2SE 应用程序。有没有办法将 facebook 页面更新获取到 J2SE 应用程序中？或者有什么方法可以从网站获取 facebook 更新（从 facebook 获取）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T09:04:40.250

Facebook 页面提供了`JSON`提要，我解析了`JSON`该提要。

# vb.net - Linq to Entity Select Distinct

> ID：13587053
> 
> 赞同：3
> 
> 时间：2012-11-27T15:04:09.060
> 
> 标签：vb.net, entity-framework, linq-to-entities, distinct

我不确定我错过了什么，但我整个下午都在纠结这个。

我有一个公司的 Sql Server 视图，如下所示：

```
CompanyId varchar(30) NOT NULL
CompanyName varchar(100) NOT NULL
CompanyPriority int NULL
ConfigItem int NOT NULL 
```

使用看起来有点像这样的数据：

```
00001 | Company One | 99 | 123
00001 | Company One | 99 | 456
00001 | Company One | 99 | 789
00002 | Company Two | 99 | 123
00002 | Company Two | 99 | 456 
```

我正在尝试获得一份不同的公司名单。我要执行的 sql 查询是

```
select distinct CompanyId, CompanyName,CompanyPriority from vwCompany 
```

这给了我我想要的结果

```
00001 | Company One | 99
00002 | Company Two | 99 
```

但是对于我的一生，我找不到导致这个 sql 的 LINQ 查询，或者任何产生相同结果的东西。

我发现的所有问题都使用分组，它在我的单元测试中工作正常，但在针对实际数据库执行时无法返回不同的结果。

编辑：

因此，到目前为止，我已经根据答案尝试了一些事情。

```
Dim data = _miRepository.GetCompanies().
  Select(Function(c) New With {
           .companyId = c.CompanyId,
           .companyName = c.CompanyName,
           .companyPriority = c.CompanyPriority
         }
       ).Distinct().ToList() 
```

生成sql

```
SELECT 
1 AS [C1], 
[Extent1].[CompanyId] AS [CompanyId], 
[Extent1].[CompanyName] AS [CompanyName], 
[Extent1].[CompanyPriority] AS [CompanyPriority]
FROM (SELECT 
      [vwCompany].[CompanyId] AS [CompanyId], 
      [vwCompany].[CompanyName] AS [CompanyName], 
      [vwCompany].[CompanyPriority] AS [CompanyPriority], 
      [vwCompany].[CiId] AS [CiId]
      FROM [dbo].[vwCompany] AS [vwCompany]) AS [Extent1] 
```

它根本没有 distinct 运算符:(

是的，我在 VB.NET 中这样做只是为了更难找到好的示例：\

编辑2：

我试图在 VB 中尽可能接近 Eric Js 的答案。

```
Dim data = (From c In _miRepository.GetCompanies()
            Select New With {.companyId = c.CompanyId,
                             .companyName = c.CompanyName,
                             .companyPriority = c.CompanyPriority
                            }
                          ).Distinct().ToList() 
```

给我

```
SELECT 
1 AS [C1], 
[Extent1].[CompanyId] AS [CompanyId], 
[Extent1].[CompanyName] AS [CompanyName], 
[Extent1].[CompanyPriority] AS [CompanyPriority]
FROM (SELECT 
      [vwCompany].[CompanyId] AS [CompanyId], 
      [vwCompany].[CompanyName] AS [CompanyName], 
      [vwCompany].[CompanyPriority] AS [CompanyPriority], 
      [vwCompany].[CiId] AS [CiId]
      FROM [dbo].[vwCompany] AS [vwCompany]) AS [Extent1] 
```

仍然没有找到不同的关键字:(

也许我错过了 VB.NET 的细微差别。

编辑 3：

为了继续这个应用程序的其余部分，我暂时放弃了，并在问题开始时使用 sql 语句创建了一个新视图 (vwDistinctCompanies)。

如果有人设法让这个在 VB.NET 中针对 Sql 视图工作，请告诉我。很明显为什么这在 LINQ 中会如此困难，我不知道 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:07:22.440

尝试在查询结束时使用 .Distinct() ，例如

```
(from r in ctx.MyTable where SomeCondition select r).Distinct(); 
```

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

如果需要，您还可以提供 IEqualityComparer。但是，要使用 IEqualityComparer，必须首先使用 . [ToEnumerable()](http://msdn.microsoft.com/en-us/library/hh995767%28v=sql.111%29.aspx)。这样做意味着 Distinct() 操作是在客户端而不是数据库服务器上执行的。

[http://msdn.microsoft.com/en-us/library/bb338049.aspx](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

IEqualityComparer 允许您准确控制哪些记录被视为平等，因此与其他记录没有区别。

如果您只想选择表格的一部分列，请更改

```
select r 
```

选择像这样的匿名类型：

```
(from r in ctx.MyTable where SomeCondition
    select new 
    { 
        CompanyId = r.CompanyId, 
        CompanyName = r.CompanyName, 
        CompanyPriority = r.CompanyPriority
    }
).Distinct(); 
```

或者如果你需要一个强类型对象（例如，因为你在 MVC 中使用强类型视图：

```
public class CompanyModel
{
    public int CompanyId { get; set; }
    public string CompanyName { get; set; }
    public int CompanyPriority { get; set; }
}

// Then in the Linq statement

(from r in ctx.MyTable where SomeCondition
    select new CompanyModel()
    {
        CompanyId = r.CompanyId, 
        CompanyName = r.CompanyName, 
        CompanyPriority = r.CompanyPriority
    }
).Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:37:52.877

***-编辑：-***

忽略我之前提到的所有代码（结束编辑部分之后的所有内容）。我尝试了进一步的测试。插入下面的 VB 代码，告诉我你得到了什么结果：

```
(From c In ctx.Companies Select New With { _
    Key .companyId = c.CompanyId, _
    Key .companyName = c.CompanyName, _
    Key .companyPriority = c.CompanyPriority _
}).Distinct() 
```

我使用 LINQPad 对它们进行了测试，得到了以下 SQL：

```
SELECT DISTINCT [t0].[CompanyId] AS [companyId],
                [t0].[CompanyName] AS [companyName],
                [t0].[CompanyPriority] AS [companyPriority]
FROM [Companies] AS [t0] 
```

***-结束编辑-***

几天前我遇到了这个问题。这就是我最终做的。

您正在寻找的内容需要`GroupBy`您在帖子中提到的条款。仅使用`Distinct`不会像您期望的那样工作（据我所知）。下面的 lambda 表达式是我所做的，紧随其后的是通过 lambda 代码生成的 SQL 语句。

拉姆达代码：

```
Companies.GroupBy(c => new {
                           c.CompanyId,
                           c.CompanyName,
                           c.CompanyPriority
                       })
         .Select(p => new {
                          CompanyId = p.Key.CompanyId,
                          CompanyName = p.Key.CompanyName,
                          CompanyPriority = p.Key.CompanyPriority
                      }) 
```

SQL 代码：

```
SELECT [t0].[CompanyId] AS [companyId],
       [t0].[CompanyName] AS [companyName],
       [t0].[CompanyPriority] AS [companyPriority]
FROM [Companies] AS [t0]
GROUP BY [t0].[CompanyId],
         [t0].[CompanyName],
         [t0].[CompanyPriority] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:09:17.057

尝试：

```
var results = (from company in context.Companies
    select new {
        CompanyId = company.CompanyId,
        CompanyName = company.CompanyName,
        CompanyPriority = company.CompanyPriority
    }).Distinct(); 
```

关键是获取可以唯一的查询片段，然后调用`.Distinct()`扩展。如果您将 configID 属性保留在其中，它们都将是唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:09:35.553

```
var query = from c in context.vwCompany
            group c by new { 
                c.CompanyId, 
                c.CompanyName, 
                c.CompanyPriority } into g
            select g.Key; 
```

生成的查询（来自 SQL Server Profiler）将如下所示：

```
SELECT 
1 AS [C1], 
[Distinct1].[CompanyId] AS [CompanyId], 
[Distinct1].[CompanyName] AS [CompanyName]
[Distinct1].[CompanyPriority] AS [CompanyPriority]
FROM ( SELECT DISTINCT 
    [Extent1].[CompanyId] AS [CompanyId], 
    [Extent1].[CompanyName] AS [CompanyName]
    [Extent1].[CompanyPriority] AS [CompanyPriority]
    FROM [dbo].[vwCompany] AS [Extent1]
) AS [Distinct1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T20:14:02.570

不应该是两张桌子吗？一个与

```
00001 | Company One | 99
00002 | Company Two | 99 
```

而另一个与

```
00001 | 123
00001 | 456
00001 | 789
00002 | 123
00002 | 456 
```

哪个更规范化并且会使您的查询变得非常容易？

# php - 如何通过 curl 从表中提取数据？

> ID：13587054
> 
> 赞同：-4
> 
> 时间：2012-11-27T15:04:10.017
> 
> 标签：php, xml, curl

如何用php提取表数据`<table bgcolor="#004e8e" width="100%" align="center" cellpadding="3" cellspacing="0" id="borda_bai">`站点[http://www.orientcinemas.com.br/programacao/cinema.php?cod=5 ？](http://www.orientcinemas.com.br/programacao/cinema.php?cod=5)

还有一个问题是如何将每个数据表放在一个xml中？

例如：同一站点的表

> C1 C2 C3 C4 C5
> L1
> L2
> L4
> L5

并在 xml C1L1 =>

`<C1>`
                 `<L1> </ L1>`
                 `<L2> </ L2>`                
`</ C1>`
促进数据的处理/使用：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:42:13.157

您可以使用[XPathSelector](https://github.com/stil/xpath-selector)：

```
$xs = XPathSelector\Document::loadHTMLFile('http://www.orientcinemas.com.br/programacao/cinema.php?cod=5');
$table = $xs->select('//*[@id="borda_bai"][1]');
$result = array();
$row = 0;
foreach ($table->select('tr[position()>1]') as $tr) {
    $row++;
    $column = 0;
    foreach ($tr->select('td') as $td) {
        $column++;
        $result[$row][$column] = $td->extract();
    }
} 
```

$result 将是

```
Array
(
    [1] => Array
        (
            [1] => 1
            [2] => 243
            [3] => A Saga Crep├║sculo: Amanhecer - Parte 2
            [4] => 12a.
            [5] => Dub. - 13h30, 16h00, 18h30, 21h00
        )
    etc......
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:11:51.547

您可以使用 Matthias Kerstner 的 HTML Table Extractor。

> [http://www.kerstner.at/en/2011/02/html-table-extractor/](http://www.kerstner.at/en/2011/02/html-table-extractor/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:14:52.957

卷曲不会那样做。Curl 用于发出请求。解析您描述的 html 可以使用 DOM、XPath 和 SimpleXML 完成。

# cocoa - 具有渐变背景和阴影的 NSView

> ID：13587058
> 
> 赞同：0
> 
> 时间：2012-11-27T15:04:17.320
> 
> 标签：cocoa, core-animation, nsview

我希望我的 NSView 同时具有渐变背景和阴影，所以我继承`NSView`并覆盖了`- (void)awakeFromNib`这样的方法：

```
[self setWantsLayer:YES]; // view's backing store is using a Core Animation Layer

CAGradientLayer *backgroundGradient = [[CAGradientLayer alloc] init];
backgroundGradient.colors = @[
    (__bridge id)CGColorCreateGenericGray(0.85, 1.0),
    (__bridge id)CGColorCreateGenericGray(0.94, 1.0)
];
backgroundGradient.masksToBounds = NO;

CALayer *shadowLayer = [CALayer layer];
shadowLayer.shadowColor = CGColorCreateGenericGray(0.5, 1.0);
shadowLayer.shadowOffset = NSMakeSize(0, 0.0);
shadowLayer.shadowRadius = 10.0;
shadowLayer.shadowOpacity = 1.0;
shadowLayer.masksToBounds = NO;

[backgroundGradient addSublayer:shadowLayer];

[self setLayer:backgroundGradient]; 
```

但是，只显示了梯度。此外，如果我尝试，`[self setLayer:shadowLayer]`则会显示阴影（但当然，没有渐变）。

如何同时显示渐变和阴影？非常感谢！

# html - 需要制作一个“防弹”的 div

> ID：13587060
> 
> 赞同：1
> 
> 时间：2012-11-27T15:04:22.410
> 
> 标签：html

我如何制作一个不会破坏的 div，即使其中的信息结构制作不当。

IE：

```
<div id="bulletproof_div">
    <div> </div>
    <div> </div>
    <div id="unclosed_div">
</div>

<div id="normally_this_one_would_break">
</div> 
```

编辑：上下文是它是一个邮件系统，我无法控制发送给我的信息，这就是为什么我需要这样做，以使网站不会中断。

我已经成功尝试使用 iframe，但我需要能够修改 div 的内部 html，因此 iframe 并不理想。

感谢您阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:12:38.790

iframe 是唯一能够将内容与周围页面隔离开来的 100% 防弹容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:15:40.807

如果您在将损坏的标记附加到“bulletproof_div”之前可以访问它，则可以使用此功能在附加标记之前“修复”标记

```
function cleanMarkup(markupStr) {
    // temp 'div' only used as a container, it is not returned with output
    var temp = document.createElement("div");
    temp.innerHTML = markupStr;
    return temp.innerHTML;
} 
```

大多数浏览器会尝试修复损坏的标记，因此当您`innerHTML`在设置属性后立即检索该属性时，该值将是一个“固定”标记字符串。

所以给定这个输入

```
cleanMarkup("<div></div> <div id='unclosed'>test!") 
```

该函数应该返回

```
<div></div> <div id="unclosed">test!</div> 
```

# android - android: InterstitialAd : StartUp 必须实现继承的抽象方法

> ID：13587061
> 
> 赞同：0
> 
> 时间：2012-11-27T15:04:22.780
> 
> 标签：android, layout, interstitial

```
import com.google.ads.*;
import com.google.ads.AdListener;
import com.google.ads.AdRequest;
import com.google.ads.InterstitialAd;

public class StartUp extends Activity implements AdListener {

    private InterstitialAd interstitialAd;   
    AdView adView;

       public static final  String MY_PUBLISHER_ID = "abc"; 

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); // call the superclass's method
          setContentView(R.layout.main_first_page); // inflate the GUI

          interstitialAd = new InterstitialAd(this, MY_PUBLISHER_ID); // Create an ad.  
          interstitialAd.setAdListener(this); // Set the AdListener.
          AdRequest adRequest = new AdRequest();
          adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
          interstitialAd.loadAd(adRequest);       
          if (interstitialAd.isReady()) {interstitialAd.show();}

          Button ButtonIQ= (Button) findViewById(R.id.buttonA);    

       } 
```

## 错误：

公共类StartUp出现错误，Eclipse报“类型StartUp必须实现继承的抽象方法AdListener.onPresentScreen(Ad)”。

请问这是什么问题，怎么解决？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:19:27.880

抽象类不能被实例化。您必须创建一个实现抽象类的“具体”或真实类，您已经完成了。

抽象类也可以定义具体类必须提供的抽象方法。在这种情况下，您没有为 onPresentScreen() 提供方法，因此您会看到错误。

[http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

请参阅 AdListener 文档，了解如何实现此方法，该方法在广告全屏显示时调用。

```
 @Override
    public void onPresentScreen() {
         // called when a full screen ad is presented
    } 
```

# javascript - 谷歌地图 - 弹出窗口可以在加载时出现吗？

> ID：13587064
> 
> 赞同：1
> 
> 时间：2012-11-27T15:04:35.213
> 
> 标签：javascript, google-maps

我只是想知道如何让我的自定义谷歌地图的信息弹出窗口出现在加载时，而不是点击时？这样页面加载时它就起来了吗？

我有生成地图和自定义指针的代码，以及带有地址信息的弹出窗口（现在是虚拟文本）。但我希望这个窗口出现 onload，而不是 onclick？

感谢您的帮助-我的代码如下！

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
    function initialize() {
        var latlng = new google.maps.LatLng(55.9724676,-3.1876244);
        var settings = {
            zoom: 15,
            center: latlng,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP};
        var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h1 id="firstHeading" class="firstHeading">Høgenhaug</h1>'+
    '<div id="bodyContent">'+
    '<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var companyLogo = new google.maps.MarkerImage('mapmarker-sm.png',
    new google.maps.Size(128,128),
    new google.maps.Point(0,0),
    new google.maps.Point(50,50)
);
var companyShadow = new google.maps.MarkerImage('images/logo_shadow.png',
    new google.maps.Size(128,128),
    new google.maps.Point(0,0),
    new google.maps.Point(65, 50)
);
var companyPos = new google.maps.LatLng(55.9724676,-3.1876244);
var companyMarker = new google.maps.Marker({
    position: companyPos,
    map: map,
    icon: companyLogo,
    shadow: companyShadow,
    title:"Company Title"
});

    google.maps.event.addListener(companyMarker, 'click', function() {
  infowindow.open(map,companyMarker);
});

};

</script>

</head>

<body onload="initialize()">
  <div id="map_canvas" style="width: 100%; height:500px"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:10:29.697

您可以使用`'idle'`事件：

```
google.maps.event.addListenerOnce(map, 'idle', function() {
   infowindow.open(map,companyMarker);
}); 
```

当地图的所有块将完全加载时，将触发该事件。

# c++ - C++ VCL 查询 .xlsb Excel 数据库

> ID：13587066
> 
> 赞同：1
> 
> 时间：2012-11-27T15:04:46.123
> 
> 标签：c++, database, c++builder, vcl, xlsb

我需要一些帮助来从 VCL C++ 程序中查询 xlsb 数据库（文件）；（使用C++Builder XE2）主要是我想查询里面的数据方便查看（在同一台机器上，不涉及网络），我不需要修改它！所以我想知道：

1.  使用哪个控件连接到 xlsb 数据库（TDatabase、dbExpress？）
2.  如何使用该控件来读取数据，（与 SQL 相同？）
3.  常规 xsl 和 xslb 之间的区别，它们的使用方式是否相同？

在问之前我做了一些研究，但是这方面的信息非常稀缺！（我在 Win 7 64 位）

谢谢你们 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:55:44.983

从来没有用这些文件测试过，但我相信你可以使用 TADOConnection，然后使用 Microsoft OLE DB Provider for ODBC Drivers 作为数据提供者，我知道它可以使用 access 和 excel 文件作为源，我个人只使用过它访问文件，但它可能会做你想做的事。

# android - 使用相机意图后对照片进行地理标记

> ID：13587070
> 
> 赞同：4
> 
> 时间：2012-11-27T15:05:01.537
> 
> 标签：android, geolocation, locationmanager, geotagging

我有一个使用 Android Camera Intent 拍照的应用程序，拍照后我试图将一些 gps 数据添加到图像的 Exif 数据中。但是，我的应用程序在到达时不断崩溃`double longitude = location.getLongitude();`

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) 
            {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

                File folder = new File(Environment.getExternalStorageDirectory() + "/SApp");
                if(folder.exists() == false){
                    folder.mkdirs();
                }         

                setCamera();

            }

    private void setCamera(){
            Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"/SApp/Attachment" + ".jpg")));
            startActivityForResult(cameraIntent, 1001);
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent data){

            if(resultCode == RESULT_OK){

                LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                Location location = (Location) lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

                double longitude = location.getLongitude();
                double latitude = location.getLatitude();
                         File f = new File(Environment.getExternalStorageDirectory(),"/SApp/Attachment" + ".jpg");
                         geoTag(f.getAbsolutePath(),latitude,longitude);

        }
        }

public void geoTag(String filename, double latitude, double longitude){
    ExifInterface exif;

    try {
        exif = new ExifInterface(filename);
        int num1Lat = (int)Math.floor(latitude);
        int num2Lat = (int)Math.floor((latitude - num1Lat) * 60);
        double num3Lat = (latitude - ((double)num1Lat+((double)num2Lat/60))) * 3600000;

        int num1Lon = (int)Math.floor(longitude);
        int num2Lon = (int)Math.floor((longitude - num1Lon) * 60);
        double num3Lon = (longitude - ((double)num1Lon+((double)num2Lon/60))) * 3600000;

        exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE, num1Lat+"/1,"+num2Lat+"/1,"+num3Lat+"/1000");
        exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE, num1Lon+"/1,"+num2Lon+"/1,"+num3Lon+"/1000");

        if (latitude > 0) {
            exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "N"); 
        } else {
            exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "S");
        }

        if (longitude > 0) {
            exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "E");    
        } else {
        exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "W");
        }

        exif.saveAttributes();
    } catch (IOException e) {
        Log.e("PictureActivity", e.getLocalizedMessage());
    } 

    } 
```

错误跟踪：

```
11-27 10:17:25.865: E/AndroidRuntime(27201): FATAL EXCEPTION: main
11-27 10:17:25.865: E/AndroidRuntime(27201): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1001, result=-1, data=null} to activity {serverbased.app/serverbased.app.ServerAppActivity}: java.lang.NullPointerException
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2994)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3037)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread.access$1100(ActivityThread.java:128)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1191)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.os.Looper.loop(Looper.java:137)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at java.lang.reflect.Method.invokeNative(Native Method)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at java.lang.reflect.Method.invoke(Method.java:511)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at dalvik.system.NativeStart.main(Native Method)
11-27 10:17:25.865: E/AndroidRuntime(27201): Caused by: java.lang.NullPointerException
11-27 10:17:25.865: E/AndroidRuntime(27201):    at serverbased.app.ServerAppActivity.onActivityResult(ServerAppActivity.java:139)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.Activity.dispatchActivityResult(Activity.java:4654)
11-27 10:17:25.865: E/AndroidRuntime(27201):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2990)
11-27 10:17:25.865: E/AndroidRuntime(27201):    ... 11 more
11-27 10:17:39.794: I/Process(27201): Sending signal. PID: 27201 SIG: 9 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:10:00.197

您错误地检索了位置。我会好好看看这篇博文：[深入了解位置](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)。它将为您提供许多最佳实践。呼叫`getLastKnownLocation`不会启动位置提供程序。`null`返回值表示没有可用的值。您应该使用 requestLocationUpdates。请参见下面的片段：

```
LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

Criteria fineCriteria.setAccuracy(Criteria.ACCURACY_FINE);
String fineProvider = lm.getBestProvider(fineCriteria, true);

// Start the fine location listener
lm.requestLocationUpdates(fineProvider, 0, 0, locationListenerFine);

private LocationListener locationListenerFine = new LocationListener() {
    public void onLocationChanged(Location location) {

    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:14:03.517

问题是我正在使用`LocationManager.GPS_PROVIDER`更改它来`LocationManager.NETWORK_PROVIDER`解决我的问题

# sql - 在 SQL 查询中添加“上周”和“2 周前”

> ID：13587080
> 
> 赞同：0
> 
> 时间：2012-11-27T15:05:27.443
> 
> 标签：sql, sql-server, sql-server-2008-r2

我创建了下面的代码，它为我提供了按公司细分的唯一用户数。我想添加一个日期修饰符，它有两列，一列用于“上周”，另一列用于“2 周前”。我希望这些列根据字段“users.date”分别显示前一周日期和前一周的活跃用户。任何帮助都会很棒。我正在使用 SQL Server Management Studio 2008 R2。

```
 --Active Users
    SELECT company.companyName as 'Group Name',
    COUNT(distinct users.userid) [Count]
    FROM Users, Company 
    WHERE 
    Jobstate = '6'
    and company.companyID = users.companyid
    and company.companyID in (1,4,31)
    GROUP BY company.companyName 
```

目前我收到这个结果：

```
Group Name | Count     |
------------------------
Company 1  | 104       |
Company 2  | 74        |
Company 3  | 46        | 
```

我希望看到的是：

```
Group Name | Last Week | 2 Weeks Ago |
--------------------------------------
Company 1  | 14        | 16          |
Company 2  | 7         | 12          |
Company 3  | 4         | 8           | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:12:05.727

对于 SQL Server，它看起来像这样。

```
SELECT
  Company.CompanyName AS [Group Name],
  COUNT(DISTINCT Users.UserId) AS [Count],
  SUM (CASE 
         WHEN DATEDIFF(day, Users.Date, GETDATE()) < 7 THEN 1
         ELSE 0
       END
      ) AS [Last Week]
  -- Additional columns for last 2 weeks, etc.
FROM Users, Company 

WHERE 
  Jobstate = '6'
  AND Company.CompanyId = Users.CompanyId
  AND Company.CompanyId in (1, 4, 31)
GROUP BY
  Company.CompanyName 
```

**编辑**：上面的查询计算用户，而不是不同的用户。如果您想要上周的不同用户，可以通过修改原始查询非常简单地完成。

```
SELECT
  Company.CompanyName AS [Group Name],
  COUNT(DISTINCT Users.UserId) AS [Last Week]
FROM Users, Company 

WHERE 
  Jobstate = '6'
  AND Company.CompanyId = Users.CompanyId
  AND Company.CompanyId in (1, 4, 31)
  AND DATEDIFF(day, Users.Date, GETDATE()) < 7
GROUP BY
  Company.CompanyName 
```

如果要将两者结合起来，以便将所有列都放在一个数据集中，可以通过结合以下两种方法来完成：

```
SELECT
  Company.CompanyName AS [Group Name],
  COUNT(DISTINCT Users.UserId) AS [Count],
  COUNT (DISTINCT
           CASE 
             WHEN DATEDIFF(day, Users.Date, GETDATE()) < 7 THEN Users.UserId
             ELSE NULL
           END
        ) AS [Last Week]
  -- Additional columns for last 2 weeks, etc.
FROM Users, Company 

WHERE 
  Jobstate = '6'
  AND Company.CompanyId = Users.CompanyId
  AND Company.CompanyId in (1, 4, 31)
GROUP BY
  Company.CompanyName 
```

[SQLFiddle在这里](http://sqlfiddle.com/#!3/2d24d/1)

# c# - 将大型 SQL 查询移至 Excel

> ID：13587090
> 
> 赞同：2
> 
> 时间：2012-11-27T15:06:12.140
> 
> 标签：c#, sql-server, excel

我当前项目的一部分涉及从包含 120,000 多条记录的大型 SQL 表中填充 Excel 工作表。我目前正在使用带有 while 循环的 SqlDataReader 来直接填充新的 Excel 工作表，但显然这需要不切实际的时间。使用 StringBuilder 构建本地 .CSV 文件，*然后*在 Excel 中打开它似乎是一个更快的选择。是每千行左右将数据转储到文件中，还是一次全部写入？或者有没有更有效的方法来导入我没有考虑的这些数据？

数据集因用户输入而异，因此我不能简单地附加到现有文件。

当前代码：

```
SqlConnection cnnct = new SqlConnection("Data Source=Source;Initial Catalog=Catalog;Integrated Security=True;");
            cnnct.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = cnnct;
            string cmdText = "SELECT * FROM TABLE";
            cmd.CommandText = cmdText;

            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                columnChar = 'A';
                rowCount++;

                cellName = columnChar.ToString() + rowCount.ToString();
                    ws.get_Range(cellName, cellName).Value2 = dr["EXAMPLE_FIELD"].ToString();
                    columnChar++;
                //The above three lines are identical for each field (there are 26)
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:27:24.843

好吧，我会不惜一切代价避免 Excel 互操作。您只编写 .CSV 文件的想法有很多优点。与“最佳”性能一样，它取决于环境，但单元测试总是有帮助的。

`System.IO`非常理想。我只会读取一行`SqlDataReader`并写入 CSV 行。它变成了非常简单的代码，我敢打赌它相当“快”。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:17:35.270

一个大问题是您正在逐个单元格地填充 Excel 工作表，这很慢，因为每次调用`.Value2`setter 时都要进行 COM 互操作调用。

如果您为要放入 excel 的所有数据（M 行乘 N 列）分配一个数组，创建一个范围对象来表示该范围，并使用`.Value2`setter 将该数组复制到该范围，那将会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:09:41.847

在 c# 中使用`DocumentFormat.OpenXml.Spreadsheet`，您可以编写该数据集以`Xlsx`格式化或创建 xml 文件`using System.xml`或使用第三方工具/创建自己的 excel xml，以创建 xls 格式。

# zend-framework2 - ZF2 动态表单过滤器/验证器

> ID：13587093
> 
> 赞同：3
> 
> 时间：2012-11-27T15:06:35.033
> 
> 标签：zend-framework2, zend-form2

我正在设置一个将创建表单的控制器。我不能使用扩展的 Form 类，所以我需要在我的控制器上构建我的表单。

```
$form = new Form('example');
$fieldset = new Fieldset('default');
$fieldset->add(array('name' => 'example_field', 'attributes' => array('type' => 'text', 'id' => 'example_field'), 'options' => array('label' => 'Example Field',),));
$form->add($fieldset); 
```

这里的主要问题是，我如何为每个元素/字段集定义过滤器和验证器，而不需要创建一个实现 InputFilterAwareInterface 的类，这样我就可以从我的控制器中做所有事情？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:31:21.443

您可以通过处理表单的 InputFilter 添加/删除表单验证器，这是我的示例：

```
$form = new \Zend\Form\Form();
$name = array(
        'name' => 'username',
        'options' => array(
            'label' => 'Your name',
        ),
        'attributes' => array(
            'type'  => 'text'
        ),
);
$form->add($name);

$filter = $form->getInputFilter();
$filter->remove('username');
$filter->add(array(
    'name' => 'username',
    'required' => true,
    'validators' => array (
        'stringLength' => array (
            'name' => 'StringLength',
            'options' => array (
                'max' => '3',
            ),
        ),
    ),
));
$form->setInputFilter($filter);

$form->setData(array(
    'username' => 'longtext',
));
$form->prepare();
echo $form->isValid(); //false
print_r($form->getMessages()); //stringLengthTooLong error will show 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:25:18.647

动态添加验证器：

```
$form->getInputFilter()->get('element_name')->getValidatorChain()->attach(new ValidatorClassName()); 
```

动态添加过滤器：

```
$form->getInputFilter()->get('element_name')->getFilterChain()->attach(new FilterClassName()); 
```

# matlab - 如何将变量从 Matlab -workspace 复制到 Simulink？

> ID：13587097
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:06:55.750
> 
> 标签：matlab, simulink

我想将 Matlab 中 C 的值传递给 Simulink，我可以使用 C 来实现，但我想将它作为代码获取，因此不依赖于环境值。那么如何从 Matlab 到 Simulink 获取矩阵 X 呢？

![在此处输入图像描述](../Images/1383b375d25b25910a8d6d7815ac1195.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:29:35.037

如果我正确理解您的需求，最好在文件（.m 或 .mat）中定义您的常量并使用`InitFcn`回调自动调用此文件（请参阅[doc](http://www.mathworks.fr/fr/help/simulink/ug/using-callback-functions.html)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T15:43:09.560

好吧，如果你可以输入 A 和 B，那么输入 C 应该不难。尝试按照以下规则输入值：

*   [ ] 括号打开和关闭
*   , 逗号分隔一行中的元素
*   ; 分号分隔两行

例子

```
C = [ -1/3 0 0 -1/90 0.0037; 6 7 8 9 10; 11 12 13 14 15] 
```

# c# - 验证整数

> ID：13587098
> 
> 赞同：1
> 
> 时间：2012-11-27T15:07:01.470
> 
> 标签：c#, asp.net

最好的解决方案是验证整数数量。

我在想以下几点。

```
double value = Double.Parse(txtCubes.Text);
    double wholeValue = Math.Round(value);
Console.WriteLine("You added " + wholeValue + " blocks of ice"); 
```

是否有更好的原因确保输入整数值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:09:02.073

您可以使用[**比较验证器**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)进行 int 验证

```
<asp:CompareValidator runat="server" Operator="DataTypeCheck" Type="Integer" 
 ControlToValidate="youTextBoxID" ErrorMessage="Value must be a whole number" /> 
```

# php - 在 PHP 中循环发送到 GCM 的注册 ID

> ID：13587099
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:07:07.373
> 
> 标签：php, android, mysql, google-cloud-messaging

我在**PHP**中循环来自 MYSQL 数据库的注册 ID 时遇到问题。这是我实现它的方式，但我确信它出了点问题。

```
$apiKey = array();
    $i = 0;
    if($_POST['course1'] == '1')
    {
        while($row = mysql_fetch_array(mysql_query("SELECT Registration_id FROM students WHERE course1 ='1' ")))
        {

            $apiKey[$i] = $row['Registration_id'];
            $i++;

        }

    } 
```

**但是在这里**它给了我一个像这样的Android LogCat错误：

```
11-27 16:56:25.336: E/JSON(972): Array<br />n<b>Fatal error</b>:  Maximum execution
 time of 30 seconds exceeded in
 <b>/home/Php/send.php</b> on line
 <b>34</b><br />n
11-27 16:56:25.346: E/JSON Parser(972): Error parsing data org.json.JSONException:
Value Array<br of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:48:50.883

您的 PHP 脚本花费了太多时间来完成。这意味着您的循环可能永远运行。

您在每次循环迭代时查询数据库，结果 $row 将始终是查询的第一行。

附带说明一下，您不应该再使用这些`mysql_`函数（它们已被弃用，请参阅 PHP 文档）。

尝试类似：

```
$query_result = mysql_query("SELECT Registration_id FROM students WHERE course1 ='1' ");
while ($row = mysql_fetch_array( $query_result ) ) {
  // ...
} 
```

# z3 - 将理论插件与求解器一起使用

> ID：13587101
> 
> 赞同：3
> 
> 时间：2012-11-27T15:07:10.867
> 
> 标签：z3

[Z3](http://z3.codeplex.com)的最新版本已将`Z3_context`和的概念解耦`Z3_solver`。[API](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html)主要反映了这些变化；例如`push`，在上下文中不推荐使用，并重新指定为将求解器作为额外参数。

但是，理论界面尚未更新。理论仍然是从上下文中创建的，据我所知，从来没有明确地附加到求解器上。

人们可能认为从上下文创建的理论将始终附加到从上下文创建的所有求解器，但根据我们的经验，情况似乎并非如此。相反，用户定义的理论似乎被完全忽略了。

`Z3_solver`s 与s组合的确切状态是`Z3_theory`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T07:36:39.713

理论插件是很久以前推出的（2.8版），从那以后Z3发生了很大的变化。它们在 Z3 4.x 中被视为已弃用。它们仍然可以与旧 API 一起使用，但不能与新功能一起使用，尤其是与 Z3 求解器对象 ( `Z3_solver`) 一起使用。

在当前的 Z3 中，我们有许多不同的求解器。最旧的（在文件夹中实现`src/smt`）称为`smt::context`. 理论插件实际上是这个旧求解器的扩展。我们说它`smt::context`是一个通用求解器，因为它支持许多理论和量词。实际上，在 Z3 4.3.1 中，它是唯一可用的通用求解器。但是，我相信它基于一个过时的架构，不足以满足我们为 Z3 计划的新功能。我的计划是将来用基于[此处](http://research.microsoft.com/en-us/um/people/leonardo/files/mcsat.pdf)描述的架构的求解器来替换它。此外，我们不再真正工作`smt::context`了。我们基本上只是在维护它并修复错误。

在我们发布 Z3 源代码后，我想不再需要理论插件支持，因为用户可以在 Z3 代码库中添加他们的扩展。然而，这种观点过于简单，因为它阻止了用户使用不同的编程语言编写扩展。因此，目前的计划是最终为新求解器提供理论插件，最终将在 Z3 中提供。目标是拥有一个 API，例如：

```
 Z3_solver Z3_mk_mcsat_solver(Z3_context ctx, Z3_mcsat_ext ext); 
```

此 API 将使用给定的扩展创建一个新的求解器对象`ext`。

同时，我们还可以使用以下功能扩展 API：

```
 Z3_solver Z3_mk_smt_solver(Z3_context ctx, Z3_theory t); 
```

这将基于`smt::context`使用给定的理论插件创建一个新的求解器对象。这个解决方案在概念上很简单，但是要实现它需要很多“管道”。我们必须调整`Z3_theory`对象，修复一些限制，以防止理论插件与创建`smt::context`（例如`MBQI`）副本的功能一起使用等。如果有人对这个接口非常感兴趣，我会在它上面投资周期（备注：我们有只有少数用户使用理论插件）。我对此并不感到非常兴奋，因为计划最终将替换`smt::context`.

# c# - 我的应用程序是手动启动的吗？

> ID：13587102
> 
> 赞同：5
> 
> 时间：2012-11-27T15:07:16.793
> 
> 标签：c#, .net, autostart

我正在开发一个表单应用程序，它应该在 Windows 启动时启动（通过在注册表中注册一个键）或由实际用户启动。

如果用户手动启动它（即单击可执行文件），我希望显示表单。如果 Windows 触发了事件，我希望隐藏应用程序（在托盘栏中）。

有没有办法以编程方式确定发生了哪些情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T15:10:01.080

我建议添加一个命令行参数，例如`-minimized`并在启动时传递它。

如果您正在寻找如何阅读参数，请参阅[此线程。](https://stackoverflow.com/questions/1179532/how-do-i-pass-command-line-arguments-to-a-winforms-application)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T15:10:18.600

您可以在 Windows 启动时使用某个参数启动您的应用程序，而用户将在没有此参数的情况下启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:11:29.773

我能想到的最简单的方法是：

当您注册在`Windows`启动时运行时，传递一个`parameter`（一些默认值`parameter`），以防用户运行它，参数将不存在。

通过这种方式，您将能够根据是否存在参数来确定程序的启动选项。

# php - curl_exec 在循环中不起作用

> ID：13587105
> 
> 赞同：2
> 
> 时间：2012-11-27T15:07:25.540
> 
> 标签：php, loops, curl

我有一个具有以下功能的课程。当我直接调用该函数时，它可以工作，但是如果我在循环内调用该函数，则会出现错误：`Cannot connect to host`. 有人可以帮助我吗？：） 提前致谢。

```
public function exportProfile($xml) {

        $_myRequest = curl_init("https://www.example.com/postProfile");

        curl_setopt($_myRequest, CURLOPT_POST, 1);
        curl_setopt($_myRequest, CURLOPT_USERPWD, "testUser:testPassword");
        curl_setopt($_myRequest, CURLOPT_HTTPHEADER, Array("Content-Type: application/xml"));
        curl_setopt($_myRequest, CURLOPT_POSTFIELDS,$xml );
        curl_setopt($_myRequest, CURLOPT_RETURNTRANSFER, 1);

        // do request, the response text is available in $_response
        $_response = curl_exec($_myRequest);

        $err = curl_error($_myRequest) ;

        echo $err;

        $_statusCode = curl_getinfo($_myRequest, CURLINFO_HTTP_CODE);

        // close cURL resource, and free up system resources
        curl_close($_myRequest);

        return simplexml_load_string($_response);       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:18:22.543

我无法用一个简单的例子重现这个问题。您的示例代码似乎有语法错误`CURLOPT_USERPWD`，但我认为这不相关。

听起来很可能您正在查询的站点可能存在速率限制，即当您连续几次点击它们时，它们会将您锁定在外。

也许您可以通过尝试在循环之外多次运行查询来进行调试，即手动调用它 1/2/3 次。

# jquery - 如何暂停自定义函数

> ID：13587106
> 
> 赞同：0
> 
> 时间：2012-11-27T15:07:28.007
> 
> 标签：jquery, wait

我有正在添加和删除的项目（追加和前置），并希望在悬停和单击时暂停。

请查看我在下面构建的自定义函数。我希望能够通过单击具有某个类的按钮来暂停此序列，并使用相同的按钮恢复它（播放/暂停类型的东西。理想情况下，它还会暂停正在添加项目的 div 的悬停/删除。

很高兴为这个特定场景找到一个解决方案，但如果可能的话，还有一个关于暂停/恢复自定义函数的更通用的解决方案，据我所知 .stop 不起作用，除非该函数是一个官方的 jquery 函数

非常感谢任何帮助/指导，我对此很陌生，所以解释越彻底（白痴的指南）越好

谢谢！

```
$(function() {

   var SECONDS_BETWEEN = 5;
        var SLIDE_DURATION  = 1;
        var FADE_DURATION   = 1;

        var items = [];

         $(document).ready(function() {
            $('.item').each(function() {items.push($(this)); $(this).remove()});
            add_item();
        });

        function add_item() {
            var item = items.shift();

             item.removeAttr('style');
            item.find('.contentitem').removeAttr('style');   

            item.hide().prependTo('.innerwrapper')
                .slideDown(
                    SLIDE_DURATION*1000, 
                    function() {           
                        item.find('.contentitem').fadeTo('slow', 1);
                    }
                );

            items.push(item);

            setTimeout(add_item, SECONDS_BETWEEN*1000)

        }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:35:40.447

一个简单的方法是存储一个可由另一个函数访问的标志，例如单击按钮的回调。在您的`add_item()`函数开始时，您应该检查该标志是否已正确设置，以便您继续。

在您的示例中：

```
$(function() {
    var SECONDS_BETWEEN = 5;
    var SLIDE_DURATION  = 1;
    var FADE_DURATION   = 1;

    /* Define a flag to pause the animation */
    var paused = false;
    var items = [];

     $(document).ready(function() {
        $('.item').each(function() {items.push($(this)); $(this).remove()});
        add_item();
     });

     $(".togglebutton").click(function() {
         /* Toggle the animation */
         paused = !paused;
     });

    function add_item() {
        /* Check the flag */
        if(!paused) {
            var item = items.shift();
            item.removeAttr('style');
            item.find('.contentitem').removeAttr('style');   

            item.hide().prependTo('.innerwrapper')
                .slideDown(
                    SLIDE_DURATION*1000, 
                    function() {           
                        item.find('.contentitem').fadeIn('slow');
                    }
                );

            items.push(item);
        }
        setTimeout(add_item, SECONDS_BETWEEN*1000);
    }
});​​​ 
```

你可以[在这里](http://jsfiddle.net/q7EXj/3/ "JsFiddle 示例")查看。

# ios - 当它的父表视图被弹出时，如何从 UITableViewCell 内部判断？

> ID：13587109
> 
> 赞同：1
> 
> 时间：2012-11-27T15:07:40.067
> 
> 标签：ios, core-data, uitableview, uistepper

我有一个包含 UIStepper 的 UITableViewCell 子类。当用户与步进器交互时，我会触发一个 NSTimer，以便步进器将保存其值并在 2 秒内未再次更改该值时写入核心数据。

换一种方式：

UIStepper 包含在 UITableViewCell 中。
用户可以上下改变步进值。
每次触摸都会触发具有 2 秒延迟的计时器。
每次后续触摸都会使计时器无效。
将步进器单独放置 2 秒后，将保存更改。

这非常适合我需要它。问题是，如果我的用户非常快并且他们更改了值，然后弹出视图控制器并去做其他事情，2 秒计时器仍然没有触发，并且数据不是最新的以进行下一个操作。

为了使事情尽可能简单，我需要能够在该表视图单元格中判断（表）视图是否被弹出。然后我可以加快保存过程并确保数据是最新的并在任何其他操作发生之前保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:00:31.017

如果您想知道该表是否已弹出，请将您的清理/保存方法放入`viewWillDisappear`方法中。因为您正在使用计时器，`dealloc`所以您不想这样做，因此您没有任何意外的强参考周期。

从你的问题中不清楚，但我想确保你没有把你的细胞放在`NSTimer`你的`UITableViewCell`细胞上。显然，这是一个*模型*问题，而不是*视图*问题，而且表视图对出列和重用表视图单元格进行了各种优化。

其次，您必须跟踪数据的任何对象类（我`ModelDataItem`称之为我通过一个布尔值`needSave`）。因此，为了支持这一点，在我看来，您`ModelDataItem`可能至少应该具备以下四项：

(a) 引用其自己的计时器；

```
@property (nonatomic, strong) NSTimer *timer; 
```

(b) 指示记录是否有挂起的保存操作的标志

```
@property (nonatomic) BOOL needSave; 
```

(c) 每当对象的值更改（例如，值增加）时调用的方法，以安排在 2 秒内保存：

```
- (void)scheduleSave
{
    self.needSave = YES;

    if (self.timer)
        [self.timer invalidate];

    self.timer = [NSTimer scheduledTimerWithTimeInterval:2.0
                                                  target:self
                                                selector:@selector(save)
                                                userInfo:nil
                                                 repeats:NO];
} 
```

(d) 您需要计时器调用的实际保存记录的方法：

```
- (void)save
{
    // do whatever you need to save the record

    NSLog(@"%s saving value=%@", __FUNCTION__, self.value);

    // now let's clean up the timer

    if (self.timer)
    {
        [self.timer invalidate];
        self.timer = nil;
    }

    self.needSave = NO;
} 
```

然后，在您的表格视图控制器中，您应该：

(a) 当 stepper`UIControlEventValueChanged`被调用时，你显然应该改变你的数据模型，然后调用上述`ModelDataItem`方法`scheduleSave`；

(b) 当表格视图被关闭时，应该立即保存任何未决的内容：

```
for (ModelDataItem *item in allModelDataItems)
{
    if (item.needSave)
        [item save];
} 
```

请注意，在最后一点上，我不依赖于`dealloc`清理和保存需要保存的模型项目，因为计划`NSTimer`保留它`target`，因此`dealloc`不会被调用（或者至少在执行计时器之前不会被调用）。所以，我手动遍历它们并在我关闭视图时处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:24:00.563

您可以让您的自定义单元格侦听表格视图即将消失的通知，然后在`viewWillDisappear`您的视图控制器的方法中发布该通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:24:08.660

当父 TableView 从我假设您正在使用的 NavigationController 中弹出时，TableView 应该被释放。此外，它的每个 TableViewCells 也应该被释放。

您可以使计时器无效并在 TableViewCell 的 dealloc 方法中处理任何挂起的更新。

在不改变设计的情况下，这就是我会尝试的。如果这被证明是有问题的，您还可以尝试在此值更改时设置某种与 TableView 的通信，并让 TableView 负责数据更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T16:59:08.973

从您的描述中很难看出，但我认为您根本不需要使用计时器。您不能将步进器值分配给该类的属性或 ivar，然后在 viewDidDisappear 方法中将该值写入核心数据吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:09:20.073

我发现过去最好的方法是将 UITableViewCell 子类设置为视图控制器的委托......然后在您的视图控制器中 viewDidDisappear 只需调用委托方法。

委托方法将在您的 UITableViewCell 子类中实现，并且只需调用您在两秒计时器完成时执行的相同代码。这类似于 Phillip 建议的通知方法，但如果您习惯于分配代表等，则更简洁一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-10T10:43:27.877

只需覆盖 dealloc 方法并执行此操作。UITableViewCell 在弹出/卸载父视图时被释放。

# php - php exec() 安全

> ID：13587110
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:07:41.550
> 
> 标签：php, python, exec

我正在尝试从 php.ini 执行一个 py 文件。
这是我的代码：

```
//usage python my.py var1 var2
$libre = 'python ../../../../root/py/my.py '.$var1.' '.$var2.'';
$cleanlibre = escapeshellarg($libre);
echo exec($cleanlibre); 
```

怎么了？为什么什么都不返回？

我还需要知道如何很好地保护 exec。谢谢。

- 编辑 -

使用过的通路

```
$libre = 'python ../../../../root/py/mech.py '.$var1.' '.$var2.'';
$cleanlibre = escapeshellarg($libre);
passthru($cleanlibre, $result);
echo $result;
//returned 127 <- i don't know where thats from. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:12:24.797

`escapeshellarg`只能用于转义参数，而不是整个命令。

```
//usage python my.py var1 var2
$libre = 'python ../../../../root/py/my.py '.escapeshellarg($var1).' '.escapeshellarg($var2).'';
echo exec($libre ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:09:42.407

exec 在函数的第二个参数中返回结果，请参见[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# sql - 自动增量始终将 1 添加到前一行，即使前一行已被删除

> ID：13587116
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:07:57.777
> 
> 标签：sql, sql-server-2008, auto-increment, identity-column

> **可能重复：**
> [删除后在 SqlServer 中重置 AutoIncrement](https://stackoverflow.com/questions/510121/reset-autoincrement-in-sqlserver-after-delete)

我在 Sql Server 2008 数据库中的 Identity 自动增量列值存在一个烦人的问题。当我从表中删除一行（或删除所有行）时，当我添加一个新条目时，无论该记录是否仍然存在，它都会从插入到先前记录中的任何值递增。

我想知道是否有人知道如何获取它，以便 IDENTITY 列将从 EXISTS 的先前记录自动递增。

我的代码如下所示：

```
 CREATE TABLE Product
    (
            Product_Barcode INT NOT NULL PRIMARY KEY IDENTITY,
            Product_Description VARCHAR(255),
            Product_Name VARCHAR(255),
            Product_Supplier VARCHAR(255) FOREIGN KEY REFERENCES Supplier(Supplier_Name),
            Product_Size VARCHAR(255),
            Product_Weight FLOAT
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:13:08.210

通常您不希望这样，因为新的和过去的记录可以共享 ID。如果您有引用约束，这可能会导致混淆。

我知道如何做到这一点的唯一方法是使用子查询插入，例如。

```
INSERT INTO Product (Product_Barcode, Product_Description) VALUES (SELECT MAX(Product_Barcode) + 1 FROM Product, "Any description here"); 
```

# android - 识别点击可配置的小部件

> ID：13587118
> 
> 赞同：3
> 
> 时间：2012-11-27T15:08:05.940
> 
> 标签：android

我在我的应用程序中托管小部件，需要知道用户何时单击小部件，或小部件配置意图何时开始（对于具有配置的小部件）

OnUserLeaveHint 不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:56:25.580

我已经实现了您想要实现的目标。解决方案的想法是使用 is_clicked=true 的 bundle 参数将 OnClick 挂起意图设置为小部件。

这是你可以做的：

**1.** 在您使用 RemoteViews 设置小部件布局的同一位置，执行以下操作：

```
/*
 * Create pending intent to configuration activity
 */
Intent intent = new Intent(context, ConfigurationMainActivity.class);

/*
 * Add values with this intent: widget id, and is_clicked = true
 */
Bundle extra = new Bundle();
extra.putInt(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
extra.putBoolean(ConfigurationMainActivity.IS_ON_WIDGET_CLICK_KEY, true);
intent.putExtras(extra);
PendingIntent pendingIntent = PendingIntent.getActivity(context, appWidgetId, intent, PendingIntent.FLAG_UPDATE_CURRENT);

/*
 * Set this intent to one of the views in the widget
 */
remoteViews.setOnClickPendingIntent(R.id.widget_main, pendingIntent); 
```

* * *

**2.** 当用户点击小部件时，`ConfigurationMainActivity`活动被打开。在此活动中进行下一个编码：

```
public static final String IS_ON_WIDGET_CLICK_KEY = "IS_ON_WIDGET_CLICK_KEY";

@Override
protected void onCreate(Bundle savedInstanceState)
{
    // some usual stuff
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_configuration);

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();

    // get the widget id that was transferred from on click event
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);

    // ---> here is what you asking for --->
    // check whereas the widget was clicked by the user or not
    boolean isOnWidgetClick = extras.getBoolean(IS_ON_WIDGET_CLICK_KEY, false);

    if (isOnWidgetClick)
    {
        // ----- Do here whatever you want ------
    }
    else 
    {
        // the code of first time widget configuration 
    }

    ...
    ...
} 
```

**注意**：：

*   IS_ON_WIDGET_CLICK_KEY - 只是一个在多个类中使用的常量。您可以在远程视图设置和此处查看它

希望，我可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:41:16.900

用一些布局包装你的小部件并覆盖 onInterceptTouchEvent 方法。

# objective-c - 强制开发人员遵守目标 C 中的协议是一种好习惯吗？

> ID：13587120
> 
> 赞同：3
> 
> 时间：2012-11-27T15:08:25.043
> 
> 标签：objective-c

我正在开发一组简单的可重用代码。我创建了一个协议来对一组方法进行分组，并在运行时向用户询问数据。

我认为设置代表是强制性的。我可以通过抛出一个断言说明原因来强制开发人员在运行时设置委托吗？

这是通过使用断言来强制使用我的类的用户的好习惯吗？它有设计层面的缺陷吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:14:16.123

首先是“良好做法”问题：

*   除非它们确实是必需的，否则不要使方法成为必需的。
*   如果方法不是可选的，请不要将它们设为可选。

*   不是批评，更多的是意见

    *   `initWithDelegate:`如果需要委托，请**提供**方法
    ***   我经常遇到数据结构，在我调查之前我不知道有委托模式。具体的`init`方法，我早就知道了。**

 **`@required`您可以通过简单地将指标添加到协议中来在编译时引起警告：

```
@protocol SuperAwesomeProtocol <NSObject>

@required
-(void) requiredMethod1;
-(void) requiredMethod2;

@optional
-(void) optionalMethod1;
-(void) optionalMethod2;

@end

//and making your delegate specific:
@property (nonatomic, assign) id<SuperAwesomeProtocol> delegate; 
```

您仍然可以通过以下方式导致运行时断言：

```
if (!delegate || ![delegate respondsToSelector:@selector(requiredMethod1)])
{
    //Assertion failure
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:34:29.560

是的，我认为在应用程序中使用协议是一种很好的做法..

协议声明可以由任何类实现的方法。

以下是使用协议好的情况。

1.  声明其他人应该实现的方法
2.  在隐藏对象的类的同时声明对象的接口
3.  捕获不分层相关的类之间的相似性**

# javascript - jQuery .height() 无法正常运行

> ID：13587123
> 
> 赞同：2
> 
> 时间：2012-11-27T15:08:33.723
> 
> 标签：javascript, jquery

我试图在屏幕上居中一个模态窗口（这工作完全正常），除了当我通过 jQuery 向它添加内容然后让它的宽度和高度居中时，它总是会输出高度`0`而不是它预期高度。这是我的代码：

```
 // Now to use the Data and add it to the Modal Window...
        $('#portfolioModal .inner .data').html('<h1>' + parsedData['name'] + '</h1>\n' + parsedData['desc'] + '');

        var modalWidth = $('#portfolioModal').width(); // Get the Modal Window's Width
        var modalHeight = $('#portfolioModal').height(); // Get the Modal Window's Height

        alert(modalHeight);

        var left = (windowWidth / 2) - (modalWidth / 2); // Calculate the left margin for center alignment
        var top = (windowHeight / 2) - (modalHeight / 2); // And calculate the top margin for center alignment

        $('#portfolioModal').css({ // Append the Left and Top margin to the Modal Window
            'left': left,
            'top': top
        }); 
```

模态 HTML：

```
 <div id="portfolioMask">
                    <div id="portfolioModal">
                                <div class="inner">
                                            <div id="portfolioModalClose">Close</div>
                                            <span class="data"></span>
                                </div>
                    </div>
        </div> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:02:29.953

如果 div`display:none`在您触发 jQuery height() 时被隐藏（） - 它总是返回 0 的高度。我相信这是因为它实际上并没有占用您页面上的空间 - 这意味着它实际上不是它的一部分正在显示。如果您想保持 div 隐藏，但想获得高度，我建议使用以下 CSS：

```
position:absolute;
visibility: hidden; 
```

使用隐藏可见性将使元素占用 dom 中的空间，但使其不可见-因此它将具有高度。使用绝对位置会将其从您的实际页面中弹出，因此它不会强制页面上的内容被其高度/宽度推动。

我个人也喜欢加一个

```
left: -30000px; 
```

我发现一些较旧的 IE 不能很好地解决这个问题，并且将 div 从页面上浮动确保它们不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:10:23.313

试试 $('#portfolioModal').css('height');

## 更新：

```
// Now to use the Data and add it to the Modal Window...
$('#portfolioModal .inner .data').append('<h1>' + parsedData['name'] + '</h1>\n' + parsedData['desc'] + '', function(){
  var modalWidth = $('#portfolioModal').width(); // Get the Modal Window's Width
  var modalHeight = $('#portfolioModal').height(); // Get the Modal Window's Height

  alert(modalHeight);

  var left = (windowWidth / 2) - (modalWidth / 2); // Calculate the left margin for center alignment
  var top = (windowHeight / 2) - (modalHeight / 2); // And calculate the top margin for center alignment

  $('#portfolioModal').css({ // Append the Left and Top margin to the Modal Window
      'left': left,
      'top': top
  });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:11:46.853

您必须在 left 和 top 变量中指定像素。

```
var left = (1024 / 2) - (modalWidth / 2) + "px"; 
var top = (768 / 2) - (modalHeight / 2) + "px"; 

$('#portfolioModal').css({ 
   'margin-left': left,
   'margin-top': top
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:12:41.273

对话框是否在 div 中？如果它是一个跨度，它将始终返回 0。

# git - 应用块/恢复块在 Windows 上的 Qt Creator 上不起作用

> ID：13587125
> 
> 赞同：0
> 
> 时间：2012-11-27T15:08:40.107
> 
> 标签：git, qt-creator, patch

我安装了 git，从 Tools->Git->Diff 中，我可以选择 Apply Chunk 或 Revert Chunk

![在此处输入图像描述](../Images/8266b1e8d33c0a2d466c05b139f952b7.png)

在 Linux 上它可以工作，但在 Windows 上它给了我

```
Unable to launch 'patch': Process failed to start: No such file or directory 
```

我需要在哪里安装这个 patch.exe，我从哪里得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:20:42.563

实际上有 Git 附带的 patch.exe，但它位于“C:\Program Files\git\bin”，并且没有添加到 PATH。我认为那是因为我没有在 Git 安装向导中选择正确的选项。

Qt Creator 允许您指定补丁命令在其设置中的位置（下面屏幕截图中的“补丁命令”）。

![在此处输入图像描述](../Images/d9c9e8708a467ab515cd5972b0b09a41.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T19:02:29.820

你在 Windows 上安装过 Git 吗？

我建议您阅读[Qt Creator：使用版本控制系统](http://doc.qt.digia.com/qtcreator/creator-version-control.html)的“在 Windows 上使用 msysGit”部分。我希望安装`msysGit`能提供缺失的`patch.exe`. 也许您仍然需要更改 Qt Creator 中的任何设置才能告诉它在哪里`patch.exe`。

# java - 我希望使用组合框中的选定单词在包含单词搜索的 Jtable 中突出显示该单词。

> ID：13587126
> 
> 赞同：-3
> 
> 时间：2012-11-27T15:08:44.013
> 
> 标签：java, swing, jtable, jcombobox

我有一个 JTable，其中包含一个 wordsearch 拼图和一个下拉菜单，其中包含拼图中包含的单词列表。我希望找到一种方法，以便当在下拉菜单中选择一个单词时，它会突出显示 JTable 中的字体或更改字体。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:24:44.583

在这个使用 的[示例](https://stackoverflow.com/a/7620726/230513)中`JList`， a`ListSelectionModel.MULTIPLE_INTERVAL_SELECTION`允许不连续的选择。您可以使用突出显示所选单词`addSelectionInterval()`的`ListSelectionModel`字母。您可以在`ListCellRenderer`.

`JTable`使用相同的`ListSelectionModel`; 它使用 a `TableCellRenderer`，而不是 a `ListCellRenderer`，但[概念](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)是相同的。

作为一个单词搜索拼图不需要是可编辑的，`JTable`或者`JList`可能是一个合适的视图。

![图片](../Images/9c7d9c2a23d1e42c8b7eb8b0cede0743.png)

# combobox - 如何禁用 javaFX ComboBox 的某些项目？

> ID：13587134
> 
> 赞同：1
> 
> 时间：2012-11-27T15:09:12.827
> 
> 标签：combobox, javafx-2, javafx

有人可以告诉我如何禁用我的组合框的某些项目（使用 FXML 或 Java 代码）吗？这是我的组合框：

```
<ComboBox fx:id="cBox">
  <items>
    <FXCollections fx:factory="observableArrayList">
      <String fx:value="Easy" />
      <String fx:value="Normal" />
      <String fx:value="Hard" />
    </FXCollections>
  </items>
</ComboBox> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:11:54.353

我没有找到任何可以使[ComboBox](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ComboBox.html)项目无效的方法。你可以试试这个解决方法，下面的代码是动态显示项目的子列表（使用这个想法来解决你的问题）。

```
private final ObservableList<String> allOptions = 
            FXCollections.observableArrayList("Easy","Normal","Hard");

   // method which returns sublist we need
    private ObservableList<String> getSubList(int start,int end) {

    final ObservableList<String> toBeDisplayedList = FXCollections
            .<String> observableArrayList();
    toBeDisplayedList.addAll(allOptions.subList(start, end));
    return toBeDisplayedList;
    }

   // now main logic
 if(displayAll) {
          comboBox.setItems(allOptions);
         }
 if(display only easy and normal) {
      comboBox.setItems(getSublist(0,2));
  } ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T09:18:41.213

我试图实现这一点，我想出了一个自定义组合框，它禁用我不希望用户选择的项目。下面的代码显示了自定义 ComboBox 类以及如何使用它。

```
 public class CustomComboBox<T> extends ComboBox<T> {

    private ArrayList<T> disabledItems = new ArrayList<T>();

    public CustomComboBox() {
        super();
        setup();
    }

    public CustomComboBox(ObservableList<T> list) {
        super(list);
        setup();
    }

    private void setup() {

        SingleSelectionModel<T> model = new SingleSelectionModel<T>() {

            @Override
            public void select(T item) {

                if (disabledItems.contains(item)) {
                    return;
                }

                super.select(item);
            }

            @Override
            public void select(int index) {
                T item = getItems().get(index);

                if (disabledItems.contains(item)) {
                    return;
                }

                super.select(index);
            }

            @Override
            protected int getItemCount() {
                return getItems().size();
            }

            @Override
            protected T getModelItem(int index) {
                return getItems().get(index);
            }

        };

        Callback<ListView<T>, ListCell<T>> callback = new Callback<ListView<T>, ListCell<T>>() {

            @Override
            public ListCell<T> call(ListView<T> param) {
                final ListCell<T> cell = new ListCell<T>() {
                    @Override
                    public void updateItem(T item, boolean empty) {

                        super.updateItem(item, empty);

                        if (item != null) {

                            setText(item.toString());

                            if (disabledItems.contains(item)) {
                                setTextFill(Color.LIGHTGRAY);
                                setDisable(true);
                            }

                        } else {

                            setText(null);

                        }
                    }
                };

                return cell;
            }

        };

        setSelectionModel(model);
        setCellFactory(callback);

    }

    public void setDisabledItems(T... items) {
        for (int i = 0; i < items.length; i++) {
            disabledItems.add(items[i]);
        }
    }

} 
```

然后将要禁用的项目添加到 ComboBox：

```
@FXML private CustomComboBox<String> customComboBox;
...
customComboBox.setDisabledItems("Item 2", "Item 3"); 
```

并更改 fxml 文件中的类：

```
<views.custom.CustomComboBox ... /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-23T13:17:45.460

我遇到了同样的问题，我认为解决这个问题的最佳方法是使用 ComboBox 的 [setCellFactory(Callback,ListCell> value)](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ComboBox.html#setCellFactory-javafx.util.Callback-)方法：

```
 cBox.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
        @Override
        public ListCell<String> call(ListView<String> param)
        {
            return new ListCell<String>() {
                @Override
                protected void updateItem(String item, boolean empty)
                {
                    super.updateItem(item, empty);

                    if (item != null || !empty)
                    {
                        this.setText(item);
                        this.setDisable(true); //or false
                    }
                }
            };
        }
    }); 
```

如果你想要一个自定义 ButtonCel 你需要使用[setButtonCell(ListCell value)](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ComboBox.html#setButtonCell-javafx.scene.control.ListCell-)方法：

```
 cBox.setButtonCell(new ListCell<String>() {
        @Override
        protected void updateItem(Stringitem, boolean empty)
        {
            super.updateItem(item, empty);

            if (item != null || !empty)
            {
                this.setText(item);
                this.setDisable(true); //or false
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-12T16:11:50.880

```
comboBox.setItems(FXCollections.observableArrayList(EnumValues.values()));  
comboTipoOperacoes.getItems().remove(4); // remove the item 4 of Enums. 
```

# python - Numpy 使用 python-dbg 失败（未定义符号：Py_InitModule4_64）

> ID：13587136
> 
> 赞同：12
> 
> 时间：2012-11-27T15:09:21.433
> 
> 标签：python, ubuntu, numpy

在 64 位 Ubuntu 12.04 上使用 Python 2.7.3 和 Numpy 1.6.2。系统上存在其他版本（Python 2.6.4 和 Numpy 1.6.1），但据我所知，这些版本对下面描述的事件没有影响。

我正在开发一个使用 Numpy 的 Python 程序，当我尝试从该程序运行某个命令时出现错误。所以，我决定安装 python2.7-dbg 来运行程序，看看它是否有助于调试。所以我跑

```
$ python-dbg <command> 
```

代替

```
$ python <command> 
```

但是，这会给出与 numpy.xml 相关的“未定义符号：Py_InitModule4_64”错误。我到底想跑什么并不重要。如果使用“常规”python 运行成功的命令也会发生错误。即使我尝试将 numpy 导入空白的 python-dbg 提示符，它也会发生：

```
$ python-dbg
Python 2.7.3 (default, Aug  1 2012, 04:55:00)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/usr/local/lib/python2.7/dist-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/usr/local/lib/python2.7/dist-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/usr/local/lib/python2.7/dist-packages/numpy/core/__init__.py", line 5, in <module>
    import multiarray
ImportError: /usr/local/lib/python2.7/dist-packages/numpy/core/multiarray.so: undefined symbol: Py_InitModule4_64
[134187 refs]
>>> 
```

在纯 python 提示符下导入 numpy 成功。

我没有运气在互联网上找到信息。与我的错误最接近的是[debian 上的这个错误，](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=661053)它是完全相同的情况，但在提供任何进一步信息之前已关闭。我已经从 APT 安装了 python-numpy-dbg 和 python-apt-dbg 软件包；我对机器有 sudo 访问权限，因此我所做的更改在系统范围内有效。据我所知，没有为我尝试运行的任何进程设置 chroot 选项，因此 Debian 错误页面对我没有帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:28:04.533

正如 OP 所确认的那样，这里的线索在回溯中，表明`numpy`您正在导入的是`/usr/local/lib/`. 但是，通过 apt 安装的包会进入，而使用、等安装`/usr/lib/pythonX.Y`的非 Ubuntu Python 包会安装在系统包下并取代系统包。`pip``easy_install``/usr/local/lib/pythonX.Y`

现在，您应该卸载已安装的 Numpy `/usr/local/lib/python2.7/dist-packages`，以便 python-numpy 安装的 Numpy 正常工作。将来你可能能够同时安装并做一些事情`usercustomize.py`来在它们之间切换，但我现在不在 Ubuntu 机器上，所以我无法测试它。

# automatic-ref-counting - 在没有 Obj-C 的 LLVM 中使用 ARC

> ID：13587137
> 
> 赞同：4
> 
> 时间：2012-11-27T15:09:22.330
> 
> 标签：automatic-ref-counting, llvm

是否可以使用 LLVM 的 ARC 功能对我正在实现的自己的语言进行引用计数（不以 Obj-C 作为后端）

这将非常有帮助，因为编写 GC 的工作量将大大减少

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:33:10.767

很快，没有。

ARC 是编译器前端功能，而不是运行时工具。不是 LLVM 后端部分。

从概念上讲，ARC 是由 Objective-C 所有权规则和约定自动生成的手动引用计数代码。实际的 RC 由 objc 运行时管理。

# c# - 控制台应用程序中的命令行当前工作目录

> ID：13587140
> 
> 赞同：7
> 
> 时间：2012-11-27T15:09:32.750
> 
> 标签：c#, windows, console

> **可能重复：**
> [如何使用 C# 找出我的控制台应用程序在哪个目录中运行？](https://stackoverflow.com/questions/97312/how-do-i-find-out-what-directory-my-console-app-is-running-in-with-c)

如何获取运行程序的控制台的当前工作目录，以便我可以解析作为程序参数传递的相对路径？

假设我把我的程序放在这里：`c:\tools\program.exe` 但我从不同的地方调用它。假设我在这里：`C:\Users\Me\Documents\`我运行这个命令`program.exe --src=somefile.txt --dest=subdir\otherfile.txt`

`Environment.CurrentDirectory`并且`System.Reflection.Assembly.GetExecutingAssembly().Location`会返回`c:\tools`，但我希望能够解析`somefile.txt`与.`subdir\oterfile.txt``C:\Users\Me\Documents\`

> ====== 更新 ======
> 
> 谢谢您的帮助。似乎`Environment.CurrentDirectory`按预期工作。事实证明，在我的情况下，问题是由 Xenocode 的 Postbuild 工具（现在称为 Spoon Virtual Application Studio）引起的，我偶尔会使用该工具将所有程序的文件（包括 dll、配置等）“打包”到一个可执行文件中。它非常方便，但在这种情况下，“虚拟化”功能会弄乱我程序的`Environment`变量。我已经设法解决了这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T15:45:00.290

Environment.CurrentDirectory 为您提供当前工作目录

让我举一个简单的例子：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Startup: " + Environment.CurrentDirectory);
        Environment.CurrentDirectory = @"D:\temp";
        Console.WriteLine("After:" + Environment.CurrentDirectory);
    }
} 
```

现在我创建了两个名为的文件夹`D:\temp`，`D:\temp2`
并将可执行文件放入Open a command prompt 并使用 From that directory I run`D:\temp`
设置当前工作目录`cd D:\temp2`
`..\temp\mytestapp.exe`

输出是

```
Startup: D:\temp2
After: D:\temp 
```

出于好奇：

这是Net 1.1中[Environment.CurrentDirectory的文档](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory%28v=vs.71%29.aspx)

> 获取和设置当前目录的全限定路径；也就是这个进程开始的目录。

这是 NET 4.0 中的文档

> 获取或设置当前工作目录的标准路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:19:57.970

使用`Environment`和`Path`类。[http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)

```
var fqn = Path.Combine(Environment.CurrentDirectory, "somefile.txt") 
```

但是要使用您的文档，您需要：

```
var fqn = Path.Combine(
     Environment.GetFolderPath(Environment.SpecialFolder.Person),
     "somefile.txt"); 
```

`fqn' 是完全限定名称的 TLA

# google-maps - Google 地理编码不准确（英国）

> ID：13587145
> 
> 赞同：1
> 
> 时间：2012-11-27T15:09:44.467
> 
> 标签：google-maps, google-maps-api-3, google-geocoder, google-geocoding-api

我最近一直在使用地理编码 API，并且对地理编码请求的准确性有一些疑问。如果我使用 API 对地址进行地理编码，然后对从初始结果生成的坐标进行反向地理编码，则两个街道地址通常不匹配（通常是两个房子左右）。

这是地理编码准确性或反向的问题吗？我能做些什么来解决这个问题，或者这仅仅是 API 中固有的。如果是这样，有什么方法可以在执行这些操作时提供误差范围，即这种不准确性是否记录在任何地方？

显然，可以预期地理编码 API 不能 100% 完全准确，但我希望能够看到有关该主题的一些数字或文档，有人有什么建议吗？

提前致谢，

最好的，

克里斯。

*编辑*我意识到这是一个古老的问题，但它从未得到回答，如果最近再次遇到这个问题，并且之前曾被客户支付过营业执照的费用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T21:23:58.597

Google 拥有/提供的数据的详细程度因地点而异。

您收到的表明地理编码的精确程度[`GeocoderLocationType`](https://developers.google.com/maps/documentation/javascript/reference#GeocoderLocationType)：[`GeocoderGeometry`](https://developers.google.com/maps/documentation/javascript/reference#GeocoderGeometry)

近似

返回的结果是近似的。

GEOMETRIC_CENTER

返回的结果是结果的几何中心，例如一条线（例如街道）或多边形（区域）。

RANGE_INTERPOLATED

返回的结果反映了在两个精确点（例如交叉点）之间插值的近似值（通常在道路上）。当街道地址的屋顶地理编码不可用时，通常会返回插值结果。

屋顶

返回的结果反映了精确的地理编码。

# c# - 对视图模型元素进行排序时，MVC 模型绑定失败

> ID：13587150
> 
> 赞同：0
> 
> 时间：2012-11-27T15:10:00.410
> 
> 标签：c#, asp.net-mvc, model-binding

我有一个工作场景 - 我的视图模型包含一个 Employee 对象列表。

```
List<Employee> Employees; 
```

我通过以下内容填充此列表：

```
Employees = EmployeeService.GetAll().ToList(); 
```

这工作正常。我可以查看员工、更新他们的数据、回发并保存到数据库。

但是，当我尝试在发送到视图之前对视图模型中的员工列表进行排序时，将上面的代码替换为：

```
Employees = EmployeeService.GetAll().OrderBy(e=>e.Name).ToList(); 
```

该视图很好地填充了有序的员工详细信息。不幸的是，当我将此视图模型发回控制器时，viewmodel.Employees 为空/空。

如果有人知道我在这里可能做错了什么，或者为什么只有在我排序时才会发生这种情况，我将不胜感激。

问候

编辑 -

```
public ActionResult Index()
{
    EmployeesViewModel _viewModel = new EmployeesViewModel();
    return View(_viewModel);
}

[HttpPost]
public ActionResult Index(EmployeesViewModel viewModel)
{
    // HERE ** - viewModel.Employees is NULL
    EmployeesService.UpdateAllEmployees(viewModel);
    return View(viewModel);
} 
```

编辑-示例标记-

```
for (int i = 0; i < Model.Employees.Count(); i++)
{
    @Html.HiddenFor(e => e.Employees[i].Id)
    @Html.HiddenFor(e => e.Employees[i].Name)
    <table>
        <tr>
            <td style = "width: 125px">
                @Model.Employees[i].Name
            </td>
            <td style = "width: 125px">
                @Html.CheckBoxFor(e => e.Employees[i].IsActive)
            </td>
        </tr>
    </table>
} 
```

编辑 - 课程详情

```
public class Employee
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string InitialCode { get; set; }
    public bool IsActive { get; set; }

    public Employee()
    {

    }

}

public class EmployeesViewModel
{
    public List<Employee> Employees { get; set; }
    private readonly EmployeesService EmployeesService;

    public EmployeesViewModel()
    {
        Employees = new List<Employee>();
        EmployeesService = new EmployeesService();
        // Employees = EmployeesService.GetAll().ToList(); //THIS WORKS
        Employees = EmployeesService.GetAll().OrderBy(e=>e.Name).ToList();
    }
} 
```

EmployeesService 只需调用 DB 上下文并返回所有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:41:05.143

您的 HTML 表单元素需要以 DefaultModelBinder 可以正确解析出集合的方式呈现。看看这个：[https](https://github.com/danludwig/BeginCollectionItem) ://github.com/danludwig/BeginCollectionItem 。

还阅读[这个](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)和[这个](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。

# c++ - Eclipse 强制将 -k 添加到 C++ 构建命令参数中

> ID：13587151
> 
> 赞同：0
> 
> 时间：2012-11-27T15:10:06.703
> 
> 标签：c++, eclipse, eclipse-cdt

每当我编辑以`-k`从 C++ 项目的构建命令行中删除选项时（项目-> 属性-> C/C++ 构建-> 构建命令），Eclipse 在保存属性时将其添加回来。如何打败这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:59:05.847

**对于通用 C++ 项目，您可以在Properties/C++ Build/Builder 设置**对话框的第二个选项卡 ( **Behavior** )上选中或取消选中“Stop on first build error” 。当复选框关闭时，会自动添加到您在第一个选项卡中拥有的任何命令。**`-k`**

 **请注意，对于 Android NDK 项目，现在有一个新的 ADT 插件，您可以从[http://developer.android.com](http://developer.android.com)以 ADT 包或插件的形式获取它。对于这样的项目，如果您查看**Properties/C++ Build/Builder settings**，您会看到`ndk-build`默认构建命令，并且第二个选项卡上的复选框被禁用，因此`-k`永远不会附加到命令中。

您仍然可以使用 Android 工具链创建**makefile**项目，并将“ndk-build”设置为默认构建命令 make 的覆盖。有了这个，你可以`-k`上车或下车。**

# vhdl - 将无符号（包括元值）与位模式进行比较

> ID：13587156
> 
> 赞同：0
> 
> 时间：2012-11-27T15:10:25.933
> 
> 标签：vhdl

我正在编写一个需要将输入值与零进行比较的 VHDL 过程。输入可能包含元值（“U”、“X”、“L”、“H”等），在这种情况下不应断言零。

不幸的是，ModelSim 在每次比较时都会发出警告：

```
# ** Warning: NUMERIC_STD."=": metavalue detected, returning FALSE
#    Time: 14 ns  Iteration: 1  Instance: /tb/uut 
```

关于如何编写以下代码以避免此类警告的任何想法？全局关闭 numeric_std 警告不是一种选择。

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;
use IEEE.NUMERIC_STD.all;

entity Test is
    port (
        clk               : in std_logic;
        reset             : in std_logic;

        i_in_data         : in unsigned(31 downto 0);

        o_out_zero        : out std_logic
    );
end Test;

architecture rtl of Test is
begin
    process(clk, reset) begin
        if(reset='1') then
            o_out_zero <= '0';
        elsif(rising_edge(clk)) then
            if(i_in_data = (i_in_data'range=>'0')) then
                o_out_zero <= '1';
            else
                o_out_zero <= '0';
            end if;
        end if;
    end process;
end architecture; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:59:48.807

如果`o_out_zero`存在元值的情况下 的输出无关紧要，则`to_01`可以使用 numeric_std 中的有用函数在比较表达式中消除它们。另见 to_01xz 等类似目的...

代替

```
if(i_in_data = (i_in_data'range=>'0')) then 
```

和

```
if to_01(i_in_data) = (i_in_data'range=>'0') then 
```

它应该是好的。

您确实知道 if 语句中布尔表达式周围的括号是不必要的，对吧？VHDL 看起来越不像 C，越好...

# javascript - 关闭所有打开的对话框？(jQuery)

> ID：13587159
> 
> 赞同：16
> 
> 时间：2012-11-27T15:10:31.343
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我怎样才能关闭所有打开`dialog`的盒子`jQuery`？接下来的情况是：我有一个没有对话框的简单页面。它有一些按钮打开它拥有对话框。

当我单击一个按钮时，我需要关闭所有打开的对话框。

这是HTML：

```
<div id="buttons">
    <a href="#" id="btn_1">Button 1</a>
    <a href="#" id="btn_2">Button 2</a>
    <a href="#" id="btn_3">Button 3</a>
</div>
<div id="dialog_1" class="dialogbox">...</div>
<div id="dialog_2" class="dialogbox">...</div>
<div id="dialog_3" class="dialogbox">...</div> 
```

这是jQuery：

```
$(function() {
    $('#buttons').find('a').click(function() {
        // close all dialogs
        $('.dialogbox').dialog("close");

        // find out clicked id and open dialog
        var nr = this.id.split("_")[1];
        $('#dialog_'+nr).dialog();
    });
}); 
```

铬说：`Uncaught Error: cannot call methods on dialog prior initialization; attempted to call method 'close'`。

我试图检查`$('.dialogbox').dialog('isOpen')`，但结果相同。

如何关闭所有对话框？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-27T15:12:23.123

由于它们都继承同一个类，因此这是选择全部并关闭的最佳方法：

`$(".ui-dialog-content").dialog("close");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:13:00.643

您可以简单地尝试一下，因为他们都有`.ui-dialog-content`课程，因此选择并关闭它们，如下所示：-

```
 $(".ui-dialog-content").dialog("close"); 
```

# python - 如何以 SEO 友好的方式将 .aspx 页面重定向到 django 网站上的新页面

> ID：13587164
> 
> 赞同：0
> 
> 时间：2012-11-27T15:10:50.330
> 
> 标签：python, django, url, seo

我正在重新设计一个正在从 ASPX 转换为 django 的网站。我们想像这样重定向旧网址：

/detail.aspx?ID=123

...至...

/文章/123

问题在于 url 模式匹配。我想像这样匹配旧网址的模式：

(r'^detail.aspx?ID=(?P\d+)$', 'mygreatview'),

...并从那里在视图中执行 301 重定向：

```
def mygreatview(request, url_id):
    article = get_object_or_404(Article, url_id=url_id)
    url = '/articles/' + article.url_id
    return HttpResponsePermanentRedirect(url) 
```

问题是 Django 附加了一个斜杠，所以旧的 url 被转换为：

/detail.aspx/?ID=123

...在它被 urls.py 解释之前。

我尝试设置 APPEND_SLASH = False，但这似乎会导致其他 url 出现其他问题（在此处挤压气球）。

我错过了什么？我应该使用 Apache 和 mod_rewrite 来处理这种情况吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:19:25.790

那不是你的问题。您的问题是查询参数 ( `?ID=123`) 不是 URL 的一部分。您应该只匹配`/detail.aspx/`并获取视图中的参数`request.GET['ID']`。

实际上，您根本不应该这样做。您的 Web 服务器配置可以更好地处理这种级别的重定向，例如在 Apache 中使用 mod_rewrite。不需要调用 Django 视图的开销来做这种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:19:09.823

我得到了这个工作，但我仍然对它并不完全满意，因为它是 SEO 机器人的“两步跳跃”。这是我所拥有的：

在 Apache 配置文件中：

```
RedirectMatch 301 ^/detail\.aspx(.*) /article$1 
```

这会将查询字符串作为参数发送到视图：

```
def mygreatview(request):
    ID = request.GET['ID']
    article = get_object_or_404(Article, url_id=ID)
    url = '/articles/' + article.URL
    return HttpResponsePermanentRedirect(url) 
```

希望我能在 1 跳中完成，但我必须使用 ID 来查找 slug。不知道我怎么能绕过那个，但应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:36:47.413

为什么不是以下？（未测试）

```
RewriteCond %{QUERY_STRING} ^ID=(\w+)$
RewriteRule ^/detail.aspx /articles/%1? 
```

有关更多示例，请参见[http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)。

这将获取您的旧 URL 并将它们重定向到您的 django 视图，就像它期望的那样，而无需在您的 django 视图中放置任何 hacky 代码。

# java - 我可以摆脱 JBoss 默认部署目录工件吗？如何摆脱？

> ID：13587169
> 
> 赞同：0
> 
> 时间：2012-11-27T15:11:02.047
> 
> 标签：java, jboss

我刚刚下载了 JBoss 4.0.4.GA，发现它的默认`deploy/`目录中已经有很多 JAR 和 WAR。根据[这个](https://community.jboss.org/wiki/JBossDeployDirectory)页面，这是正常的，但我想知道：*我绝对需要这些东西*吗？如果我只想运行我的应用程序 WAR 而没有其他内容怎么办？摆脱这些其他工件是否安全，或者 JBoss 是否需要它们才能正常启动？

如果可以摆脱它们，那么如何摆脱它们？只需删除它们，还是我需要从管理应用程序或配置文件等中执行某些操作？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:22:34.360

以下是有关调整和修整 JBoss 3 和 4 的信息：[https ://community.jboss.org/wiki/JBossASTuningSlimming](https://community.jboss.org/wiki/JBossASTuningSlimming)

保留你需要的，取出你不需要的...

# web-services - 来自 Flex 的 SOAP 请求出现问题

> ID：13587176
> 
> 赞同：1
> 
> 时间：2012-11-27T15:11:24.920
> 
> 标签：web-services, actionscript-3, apache-flex, soap, namespaces

**SUM：**我最终不得不手动形成 XML。我还必须创建一个操作并使用它的 send(); 方法，而不仅仅是做类似 WebService.MyServiceFunction(); - 不知道为什么会这样。

我发送请求如下：

```
 var xm:XML =
                <SetPropertiesForCurrentUser xmlns="http://asp.net/ApplicationServices/v200">
                    <values xmlns:d4p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                        <d4p1:KeyValueOfstringanyType>
                            <d4p1:Key>{obj.Key}</d4p1:Key>
                            <d4p1:Value xmlns:d6p1="http://www.w3.org/2001/XMLSchema" i:type="d6p1:string">{obj.Value}</d4p1:Value>
                        </d4p1:KeyValueOfstringanyType>
                    </values>
                </SetPropertiesForCurrentUser>;

            var profileService:WebService = new WebService();
            profileService.useProxy = false;
            profileService.loadWSDL(url);

            var o:Operation = profileService.SetPropertiesForCurrentUser;
            o.send(xm); 
```

* * *

这是我的场景：

我有 ASP.NET Web 服务来处理身份验证、用户角色和用户配置文件（准确地说是默认的 ASP.NET AuthenticationService、RoleService 和 ProfileService）。

因此，从我的 Flex Web 应用程序中，我能够成功调用 ASP.NET 服务。例如，这样的事情可以正常工作：

```
var profileService:WebService = new WebService();
profileService.useProxy = false;
profileService.GetAllPropertiesForCurrentUser.addEventListener("result",getAllPropertiesForCurrentUser_EventHandler);
profileService.addEventListener("fault",getAllPropertiesForCurrentUserFault_EventHandler);
profileService.loadWSDL(url);
profileService.GetAllPropertiesForCurrentUser(); 
```

当我需要将 Dictionary 对象传递给服务上的另一个函数 (SetPropertiesForCurrentUser) 时，我遇到了麻烦。.NET 服务要求这种类型的值：

System.Collections.Generic.IDictionary（字符串，对象）

以下是我的 ASP.NET 服务的 web.config 条目中的两个相关条目：

```
 <properties>
        <clear/>
        <add name="coordinateFormat" />
    </properties>
...
    <profileService enabled="true"
      readAccessProperties="coordinateFormat"
      writeAccessProperties="coordinateFormat"/> 
```

因此，在将来自 Silverlight 应用程序的 SOAP 请求（按预期工作）放在一起后，我将其缩小到发送到 SOAP 处理程序的 XML 请求的差异：

来自 Flex：

```
<tns:Value>DMS</tns:Value> 
```

来自银光：

```
<d4p1:Value xmlns:d6p1="http://www.w3.org/2001/XMLSchema" i:type="d6p1:string">DMS</d4p1:Value> 
```

如果我接受 Flex 生成的请求，用 Fiddler 捕获它，修改那一行以包含“type”命名空间——它可以工作。

任何人都知道如何将该名称空间添加到从 Actionscript 传递给 SOAP 处理程序的变量上？这是我发送 SetPropertiesForCurrentUser 函数的代码：

```
var obj:Object = {};
obj["Key"] = "coordinateFormat";
obj["Value"] = DMS;

var profileService:WebService = new WebService();
profileService.useProxy = false;
profileService.SetPropertiesForCurrentUser.addEventListener("result",setPropertiesForCurrentUser_EventHandler);
profileService.addEventListener("fault",setPropertiesForCurrentUserFault_EventHandler);
profileService.loadWSDL(url);
profileService.SetPropertiesForCurrentUser(new ArrayCollection([obj]),false); 
```

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:05:55.680

使用的默认 SOAPEncoder 在其功能上有所限制（例如不包括您上面提到的 type 属性）。幸运的是，有一种方法可以通过编写自己的编码器来控制它。

在 adobe 上查看此链接（阅读有关使用自定义 Web 服务序列化的部分）[Adob​​e 网站上的链接](http://help.adobe.com/en_US/Flex/4.0/AccessingData/WS2db454920e96a9e51e63e3d11c0bf69084-7fdb.html#WS2db454920e96a9e51e63e3d11c0bf66651-7fe5)

# c++ - C++ 使用泛型/模板调整数组大小

> ID：13587183
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:11:43.847
> 
> 标签：c++, arrays, templates, generics, resize

我们刚刚在我的 comp sci 课程中介绍了泛型和模板。我被要求创建一个支持任何数据类型的存储和检索的通用容器类。我的所有功能都可以正常工作，除了调整数组大小时。我在我的插入函数中调用了调整大小：

```
template< typename T >
void Container< T >::insert( T  magic)
{
    if (index == size)
    {
        resize();
    }
    containerPtr[index] = magic;
    index++;
} 
```

size 变量是数组的大小，索引是下一个插入位置。

这是我的调整大小功能：

```
template< typename T >
void Container< T >::resize()
{
    int doubSize = size * 2;
    Container< T > temp(doubSize);
    for (int i = 0; i < size; i++)
    {
        temp[i] = containerPtr[i];      // error 1 here
    }
    *containerPtr = temp;               // error 2 here
    size = doubSize;
} 
```

我的超载=

```
template< typename T >
const T Container< T >::operator=(const T& rhs)
{
    if(this == &rhs)
    {
        return *this;
    }
    return *rhs;
} 
```

尝试编译时收到以下错误：

```
1: error C2676: binary '[': 'Container<T>' does not define this operator or a conversion to a type acceptable to the predefined operator
2: error C2679: binary '=': no operator found which takes a right-hand operand of type 'Container<T>' (or there is no acceptable conversion) 
```

我不确定我在哪里出错了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:30:45.083

这个错误

```
temp[i] = containerPtr[i];      // error 1 here 
```

很可能是因为您没有定义 an`operator[](size_t)`来允许您使用方括号访问容器的元素。您需要像这些 const 和非常量运算符之类的东西：

```
T& operator[](std::size_t index) { return containerPtr[index]; }
const T& operator[](std::size_t index) const { return containerPtr[index]; } 
```

假设`containerPtr`是某种动态大小的数组保存`T`对象。而这一行：

```
*containerPtr = temp;               // error 2 here 
```

是错的。的类型`*containerPtr`是`T`，并且您正在尝试将 a 分配`Container<T>`给 a `T`。这不太可能奏效。

我建议您使用[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)而不是循环分配分配，尽管我意识到这可能违反您分配的精神。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:36:05.637

> 2：错误 C2679：二进制“=”：未找到采用“容器”类型的右侧操作数的运算符（或没有可接受的转换）

是更重要的错误，它表明你相信的类型是什么

> *containerPtr = 温度；

这行代码不正确。不可能将 a 分配给`container<T>`您正在尝试做的 T 值。在将 temp 更改为指向具有正确大小的动态分配的 T 数组的指针后（并删除分配中的指针 deref），其他错误将自行消失。请注意，您还需要修复忘记删除前一个数组的内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:30:43.637

错误 1：很确定您必须`operator[]`为您的 Container 类定义

错误2：重载时应使用以下签名`operator=`：

```
template< typename T >
const T Container<T>::operator=(const Container<T>& rhs)
{ 
   ...
} 
```

# javascript - 获取相对于左上角的图像像素坐标

> ID：13587184
> 
> 赞同：5
> 
> 时间：2012-11-27T15:11:45.387
> 
> 标签：javascript

我需要在点击相对左上角时获取图像坐标。所以图像的左上角是有条件的 0,0，然后是第一个像素 1,0... 2..0 等等。javascript 构造中有什么东西可以用来获取这个逻辑吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T15:17:57.663

你可以尝试这样的事情： -

```
 <img id="board" style="z-index: 0; left: 300;position: absolute; top: 600px" align=baseline     border=0 hspace=0 src="design/board.gif">

  function findPos(obj){
  var curleft = 0;
  var curtop = 0;

  if (obj.offsetParent) {
do {
    curleft += obj.offsetLeft;
    curtop += obj.offsetTop;
   } while (obj = obj.offsetParent);

return {X:curleft,Y:curtop};
 }
}

 findPos(document.getElementById('board'));
 alert(curleft);
 alert(curtop); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T15:20:26.837

这是一个可以帮助您的链接

[http://www.emanueleferonato.com/2006/09/02/click-image-and-get-coordinates-with-javascript/](http://www.emanueleferonato.com/2006/09/02/click-image-and-get-coordinates-with-javascript/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T15:14:57.060

使用 Jquery [$('#id').offset()](http://api.jquery.com/offset/)获取元素相对于窗口的位置，或使用[$('#id').position()](http://api.jquery.com/position/)获取元素顶部，左侧相对于父元素。也看看这个[问题](https://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element)，提供纯（香草）javascript 的答案。这是 jsFiddle[示例](http://jsfiddle.net/JBCH4/3/)

HTML：

```
<div id="xRes">Top:<span></span></div>
<div id="yRes">Left:<span></span></div>

<input type="button" id="getPos" value="Get X,Y"/>

<img src="http://www.katimorton.com/wp-content/uploads/2012/05/mr-happy.jpg" id="myImg"/> 
```

JS：

```
$(document).ready(function () {

    $('#myImg').draggable();

    $('#getPos').on('click', function(){

        var xRes = $('#xRes span'),
            yRes = $('#yRes span'),

            image = $('img#myImg');

        xRes.html(image.offset().top);
        yRes.html(image.offset().left);
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-01T09:29:20.040

offsetLeft 和 offsetTop 返回相对于文档左上角的位置：

```
function getCoordinates(elem) {
    var LeftPos = elem.offsetLeft;
    var TopPos = elem.offsetTop;
    return {X:LeftPos,Y:TopPos};
} 
```

# php - 复选框都打勾，做点什么？

> ID：13587200
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:12:51.877
> 
> 标签：php, jquery, html, sql

我只是在寻找最好的方法来做这件事的一些帮助..

所以我有一个示例 SQL 数据库：

[![示例 SQL 数据库](../Images/467f4e6a90173298e0478385b32834ee.png)](https://i.stack.imgur.com/CQaar.jpg)

现在，从该数据库中，如果相应的复选框字段中有“1”，我有一个 PHP 页面来显示复选框。

[![复选框](../Images/03f42fc05cc9991702be11c0a5fdabff.png)](https://i.stack.imgur.com/EBht6.jpg)

我现在想做的是：

一旦两个复选框都被勾选，我想显示一个 5 秒计时器或一条消息，类似的东西，但是我如何确定这两个框是否都被选中了？

我猜我必须对整个表运行查询并从我返回的变量中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:20:40.893

您可以使用更改事件

```
var i = 1, interval, timeout;
$('input[type=checkbox]').on('change', function(){

   if ($('input[type=checkbox]').length ==   $('input[type=checkbox]:checked').length) {
       $('div').show();
       interval = window.setInterval(
         function() {
           $('div').text(i++);
         },
         1000
       );
       timeout = window.setTimeout(
         function(){
           document.location = 'http://google.com/';
         },
       5000);
   }
  else {
    window.clearTimeout(timeout);
    window.clearInterval(interval);
    $('div').hide().text('0');
    i = 1;
  }
}); 
```

编辑示例[http://jsbin.com/uwofus/11/edit](http://jsbin.com/uwofus/11/edit) 示例测试[http://jsbin.com/uwofus/11](http://jsbin.com/uwofus/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:19:29.000

你用 jQuery 标记了这个，所以我假设你想在浏览器中进行检查，而不是在数据库中。

```
if ($("input[type='checkbox']:checked").size() == 2) {
   //both boxes are checked
   //display message/start timer here
} else {
   //not all boxes are checked
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:21:20.003

你可以给你的复选框一个类，例如`mycb`，然后计算检查的数量：

```
$('.mycb').change(function(){

    if($('.mycb').size() == $('.mydb:checked').size())
    {
        // all checkboxes are checked - do something
    }

}); 
```

# php - CakePHP $actsAs 除了在 AppModel 中没有任何作用？

> ID：13587205
> 
> 赞同：0
> 
> 时间：2012-11-27T15:13:01.550
> 
> 标签：php, cakephp

我正在尝试在 CakePHP 中实现类别树。

如果我**在 AppModel 中添加这一行：**

```
 public $actsAs = array('Tree'); 
```

并从**CategoriesController 输出：**

```
 $behaviors = $this->Category->Behaviors->attached();
    debug($behaviors); die; 
```

结果是：

```
 array(
            (int) 0 => 'Tree'
    ) 
```

但我不希望我所有的模型都表现得像 Tree。因此，如果我在**类别**模型（Category.php）中添加它：

```
 public $actsAs = array('Tree'); 
```

并从**CategoriesController 输出：**

```
 $behaviors = $this->Category->Behaviors->attached();
    debug($behaviors); die; 
```

结果是：

```
 array() 
```

知道为什么吗？这里的食谱：[http](http://book.cakephp.org/2.0/en/models/behaviors.html#using-behaviors) ://book.cakephp.org/2.0/en/models/behaviors.html#using-behaviors 说我可以在需要特定行为的模型中使用 $actsAs。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:35:56.020

在此示例中，我正在从控制器动态更改路径。

代码 ：

在控制器中（您指定数据以更改 $actsAs 变量的值）：

```
$custom_path=’/img/cakephp’;
Configure::write(‘path_var’,$custom_path); 
```

在 Model 中，您将在构造函数中更改值：

```
public function __construct($id = false, $table = null, $ds = null)
{
  $path = Configure::read(‘path_var’);
  // change actsAs’s different value according to your need
  $this->actsAs['Upload.Upload']['photo']['path'] = $path;
  parent::__construct($id, $table, $ds);
} 
```

*   PS：请在创建模型之前编写语句 Configure::write :-P
*   快乐编码

# maven - 什么 maven 3.0.4 pom 会将包含版本的依赖项工件写入 Tanuki Service Wrapper conf 文件

> ID：13587206
> 
> 赞同：2
> 
> 时间：2012-11-27T15:13:02.617
> 
> 标签：maven, pom.xml, java-service-wrapper

有没有办法让 Maven 3.0.4 将依赖项的名称和版本输出到文本资源中？

一个特定的用例是：Tanuki 服务包装器 (wrapper.exe) 支持启动由文本文件 (.conf 文件) 配置的 Java 虚拟机进程 (java.exe)，其中包含如下行

```
wrapper.java.classpath.1=./somejar1
wrapper.java.classpath.2=./somejar2
wrapper.java.classpath.3=./somejar3 
```

我们正在使用 maven-assembly-plugin 为工件 X 创建一个分发 zip，其中将包含一个 Tanuki wrapper.exe .conf 文件。我们需要 .conf 文件的类路径条目来包含 X 的所有依赖项。例如，X 依赖于 log4j。我们希望 Maven 将 .conf 文件更新为类似

```
wrapper.java.classpath.1=./log4j-1.2.17.jar 
```

我找到的最接近的stackoverflow 答案是 [Changing java service wrapper conf file property inside a pom](https://stackoverflow.com/questions/9767522/changing-java-service-wrapper-conf-file-property-inside-a-pom)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:05:37.573

你有没有看过[appassembler-maven-plugin](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)？根据您使用 Tanuku Service Wrapper 的版本？特别是[http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-jsw.html](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-jsw.html)

# java - 级联多对多关系时错误更新

> ID：13587207
> 
> 赞同：4
> 
> 时间：2012-11-27T15:13:02.937
> 
> 标签：java, hibernate, orm, mapping

我在hibernate上定义了一个多对多的关系，如下所示：

*用户*

```
public class User{

private List<UserCustomer> userCustomerList;
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "id.user", cascade=CascadeType.ALL)
    public List<UserCustomer> getUserCustomerList() {
        return userCustomerList;
    }
} 
```

*用户客户*

```
@Entity
@Table(name = "RTDB_USER_CUSTOMER")
@Component("userCustomerEntity")
@AssociationOverrides({
    @AssociationOverride(name = "id.user", 
            joinColumns = @JoinColumn(name = "ID_USER")),
    @AssociationOverride(name = "id.customer", 
            joinColumns = @JoinColumn(name = "ID_CUSTOMER")) })

public class UserCustomer {

    @EmbeddedId
    public UserCustomerId getId() {
        return id;
    }

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumns({ @JoinColumn(name = "ID_ROLE_CUSTOMER", referencedColumnName = "ID") })           public RoleCustomer getRoleCustomer() {
        return roleCustomer;
    }

} 
```

因此，用户有一个 UserCustomer 列表，代表用户对客户的角色。问题是，当我们将角色更改为 customer 并调用时`update()`，我们不是更新了一行，而是使用相同的角色更新了所有行。当我们调用`merge()`它时，它开始执行大量查询，然后给出`stackoverflow`异常¿这可能是映射问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:24:16.307

您可以发布表格和更新代码吗？

我认为您正在直接`UserCustomer`更新应该更新所有角色的角色，据我了解，您不想更新`UserCustomer`，而只想更新`RoleCustomer`. 尝试获取`RoleCustomer`和更新它而不是`UserCustomer`.

# android - 当我尝试打开项目设置时，适用于 Android 的 Eclipse 没有响应

> ID：13587208
> 
> 赞同：1
> 
> 时间：2012-11-27T15:13:05.337
> 
> 标签：android, eclipse, properties

我将 Eclipse 4.2 Juno 与 Android SDK 和 WINdows 7 32 位一起使用。当我尝试更改 android 项目的 API 时，它崩溃了。以下是步骤： 1\. 我右键单击项目并按属性。2.我点击左侧的Android标签。3\. Eclipse 没有响应。

任何想法为什么会发生这种情况，我该如何解决？我用两个、三个项目尝试过，对所有人来说都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:22:06.410

这个问题的重复：[Eclipse freeze access project -> properties -> android tab](https://stackoverflow.com/questions/8059595/eclipse-freeze-accessing-project-properties-android-tab)

它的要点是，在Android之前先选择另一个类别，调整窗口大小，然后选择Android。似乎这是一个常见的错误

# python - PyQt：自定义 QAbstractListModel 数据更改时如何更改 QComboBox 中的 currentIndex

> ID：13587211
> 
> 赞同：4
> 
> 时间：2012-11-27T15:13:12.610
> 
> 标签：python, qt, model-view-controller, pyqt, qcombobox

我已经阅读了一些关于如何为`QComboBox`小部件定义自定义模型的示例。

这是我定义模型的方式：

```
class LevelListModel(QAbstractListModel):
    def __init__(self, parent=None, *args):
        """ datain: a list where each item is a row
        """
        QAbstractListModel.__init__(self, parent, *args)
        self.levelList = []
    def rowCount(self, parent=QModelIndex()):
        return len(self.levelList)

    def data(self, index, role):
        if index.isValid() and role == Qt.DisplayRole:
            return QVariant(index.row())
        else:
            return QVariant()
    def addLevel(self,level):
        self.beginResetModel()
        self.levelList.append(level)
        self.endResetModel() 
```

我将模型设置为我的`QComboBox`：

```
self.levelListModel = LevelListModel()
self.ui.levelComboBox.setModel(self.levelListModel) 
```

我以这种方式将模型添加到我的列表中：

```
newLevel = Level (self.levelListModel.rowCount() + 1)
self.levelListModel.addLevel(newLevel) 
```

该项目已正确添加，我可以在组合框中看到它，但我想将 currentIndex 更改为新项目的索引。

我想`QAbstractListModel`可能会引发某种`QComboBox`可以收听的事件，但我还没有找到如何做到这一点。

我的问题是：

1.  如何通知`QComboBox`模型数据已更改，并监听该事件以相应地修改 currentIndex？
2.  我使用`[begin|end]ResetModel`是因为我的条目应该是一个有序的整数序列。因此，一旦列表中间的项目被删除，我需要完全重建数据列表。我不知道这是否是正确的方法。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:47:56.220

**1**

> 如何通知 QComboBox 模型数据已更改，并监听该事件以相应地修改 currentIndex？

无需从您做事的方式中监听事件。您*知道*模型数据何时更改，因为您自己添加内容。只需`currentIndex`在添加数据后更改。

我可能会修改`addLevel`方法以返回添加项的，`QModelIndex`然后使用它来设置`currentIndex`：`QComboBox`

```
class LevelListModel(QAbstractListModel):
    # [skipped]
    def addLevel(self,level):
        self.beginInsertRows(QModelIndex(), len(self.levelList), len(self.levelList))
        self.levelList.append(level)
        self.endInsertRows()
        return self.index(len(self.levelList)-1) 
```

和

```
newLevel = Level (self.levelListModel.rowCount() + 1)
newIndex = self.levelListModel.addLevel(newLevel)
self.ui.levelComboBox.setCurrentIndex(newIndex) 
```

**2**

> 我使用 [begin|end]ResetModel 因为我的条目应该是一个有序的整数序列。因此，一旦列表中间的项目被删除，我需要完全重建数据列表。我不知道这是否是正确的方法。有更好的解决方案吗？

那要看。`[begin|end]ResetModel`是为了真正剧烈的变化。我看不出保持有序的整数列表会如何导致单项添加/删除的此类更改。根据您的描述，您应该使用`[begin|end]InsertRows`and `[begin|end]RemoveRows`。

# digital-signature - linux上的电子签名和数字证书服务器

> ID：13587214
> 
> 赞同：1
> 
> 时间：2012-11-27T15:13:28.303
> 
> 标签：digital-signature, digital-certificate, electronic-signature

正在寻找能够让我们的 CRM 用户在我们的网站上签署在线文档的解决方案，是否有开源解决方案？

基本上我们将代表客户为供应商签署文件，但当然客户本人将在线签署，所以在这里我们将使用一个证书为不同的客户签名......时间戳和其他合法所需的功能，

如果有开源解决方案或小成本产品之一将涵盖附件 1 和附件 2 所有必需的点 [http://www.berr.gov.uk/files/file49952.pdf](http://www.berr.gov.uk/files/file49952.pdf)

我们发现了这一点，但是这可以在 Linux 服务器[http://www.signfiles.com/digital-certificates/](http://www.signfiles.com/digital-certificates/)和 ItextPDF 上工作，但是对于法律方面的事情来说，这些都可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T00:21:55.057

您可能想查看已经与主要 CRM 集成的 DocuSign 等服务。您在这里的主要问题是证明它确实发生了并且具有法律约束力。做到这一点的最好方法不是拥有一个你可以控制的开源解决方案，而是依赖一个受信任的第三方。

全面披露：我为 DocuSign 工作。

# php - Codeigniter 2.1 - 加入一对多

> ID：13587217
> 
> 赞同：0
> 
> 时间：2012-11-27T15:13:43.937
> 
> 标签：php, codeigniter, codeigniter-2

我必须表：

**画廊**-> **id_gallery，名称，描述，数据**

和：

**图片**-> **gallery_id，名称**

一个画廊可以有许多图像。我需要选择所有画廊和所有图像，并在查看页面上显示所有画廊和包含该画廊的所有图像。怎么能做到这一点？

我现在有这样的代码：

```
$this->db->select('*')->from('image')->join('gallery','id_gallery = gallery_id');
$q = $this->db->get();
return $q = $q->result_array(); 
```

编辑：

```
<?php foreach ($gallery as $gal):  ?>
<figure>
<a href="<?php echo IMG ?>galerija/<?php echo $gal['name'] ?>/<?php echo $gal['path'] ?>" rel="galerija[slike]" class="figure_img">
<img src="<?php echo IMG ?>galerija/<?php echo $gal['naziv'] ?>/thumbs/<?php echo $gal['path'] ?>" >
<figcaption><?php echo $gal['name']; ?></figcaption>
</a>
</figure>
<?php endforeach; ?> 
```

这个 foreach 循环产生 5 个 div 标签而不是一个（例如，如果画廊有 5 个图像）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:21:32.967

如果您想从所有画廊的图像表中选择所有图像............

```
$this->db->select('*');
$this->db->from('images');
$this->db->join('gallery', 'gallery.id_gallery = images.gallery_id');
$query = $this->db->get();
return $q = $query->result_array(); 
```

或以其他方式。编写一个模型函数并在其中

```
public function get_images()

 {
    $res=$this->db->query("select * from images and gallery where gallery.id_gallery = images.gallery_id");
    if($res->num_rows()>0){
        return $res->result("array");
    }

    return array();

} 
```

# android - iOS 视图类似于 Android 上的 Chronometer

> ID：13587220
> 
> 赞同：2
> 
> 时间：2012-11-27T15:13:51.370
> 
> 标签：android, ios, view, chronometer

在 Android 上，这里有一个称为 Chronometer [details](http://developer.android.com/reference/android/widget/Chronometer.html)的标准视图。iOS 是否有类似的视图或执行类似操作的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:15:33.587

无论如何我都没有找到这样做，所以我[在这里](https://gist.github.com/4155970)使用 GPL 许可证创建一个要点，如果有人兴奋地把它变成一个 lib :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-01T14:33:20.853

我会为此使用一个`Timer`。

```
var timer = Timer()
timer = Timer(timeInterval: 0.01, target: self, selector: #selector(update), userInfo: nil, repeats: false)

@IBAction func start(sender: UIButton) {
     timer = Timer.scheduledTimer(timeInterval: 1.0, target: self, selector: #selector(ViewController.update(_:)), userInfo: nil, repeats: true)
     RunLoop.current.add(timer, forMode: RunLoop.Mode.common)
    startTime = Date() // new instance variable that you would need to add.
}

func update() {
    let elapsedTime = Date().timeIntervalSince(startTime)
    let currTime = totalTime - elapsedTime
    //total time is an instance variable that is the total amount of time in seconds that you want
    countDown.text = String(currTime)
    if currTime < 0 {
        timer.invalidate()
        //do other stuff that you need to do when time runs out.
    }
} 
```

如果您想要更小或更大的时间，只需更改`Interval`参数即可。此外，您仍然必须解决创建一些逻辑来分割分钟/秒等。使用`Date`方法并增加一些实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:27:27.247

为什么不在定时器模式下使用[UIDatePicker ？](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)

```
UIDatePicker* datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 0, 320, 206)];
datePicker.datePickerMode = UIDatePickerModeCountDownTimer;
datePicker.countDownDuration = 60*5;
[self.view addSubview:datePicker]; 
```

# c - 如何在运行异步串行通信时等待响应？

> ID：13587222
> 
> 赞同：1
> 
> 时间：2012-11-27T15:13:59.557
> 
> 标签：c, asynchronous

我对这个问题有点不确定，但我经常在我目前的设计中遇到麻烦，如果有人能展示出一种不同的方法，那真的很棒。

我的程序通过 rs232 将异步命令写入设备，同时不断读取接收到的数据并做出反应。

这一切都很好，很整洁，但是在我的初始化阶段，我必须发送一堆命令，这些命令必须等待响应，然后才能让程序开始计数。

现在，这部分我必须用纯 C 语言完成，而我所能想到的就是使用全局变量和 while 循环。但我觉得这真的不漂亮。

以此作为伪代码示例：

```
OnReceive(data){
 switch determineCommand(data)
   case CMD1:
      config.value1 = data.value1             
   case CMD2:
      config.value2 = data.value2
   default:
      print data
}

DoCommandChain(){
  Send(CMD1)
  If("Send(CMD1)" got its response){
    Send(CMD2)
  }
} 
```

现在，问题是“如果 XY 得到它的响应”——因为我不想使用一些变量来检测这一点，而且我不能依赖 Send(CMD1) 的返回值，因为这只是一个指标，即CMD1 已发送 - 没有收到相应的内容。

我在这里问，因为我想知道我可以搜索/阅读什么，以一种很好的方式解决这个烂摊子。

现在，我最好的想法是设置一个计时器保护功能来监控，如果收到特定的响应。然后，根据此响应的状态，转到下一个`Send`或重试上一个。

像这样：

```
Instead of `Send(CMD1)` -> `DoUntilResponse(Send(CMD1),Timeout,NumberOfRetries)`

DoUntilResponse(function,Timeout,NumberOfRetries){
   registerExpectedResponse(CMD1, gotResponse) //awaiting some response for CMD1

   for(i=0 ; i!=Numberofretries; i++){
       if (Send(CMD1) == successfulSend ){
          while(not timeout){
             if gotResponse then break;
             }
          if gotResponse then break;
      }           
   } 
```

}

*编辑：*

澄清一下：我不担心串行连接，也不担心如何触发该`OnReceive`功能 - 这一切都已经开始工作了。我不清楚的是，如何在不使用轮询的情况下解决上述伪代码，最好在纯 C 中解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:24:54.263

假设写入和读取操作在不同的线程中执行，使用以下算法：

```
写线程。
    注册预期响应。
    向设备发送数据包
    等待超时的接收事件。如果设置了事件，请继续。超时 -
    报告错误并退出（或进行额外的尝试）。

阅读线程。
对于每个收到的数据包：
    将其添加到输入缓冲区。
    分析缓冲区。如果它包含有效响应，则设置“Received”事件，
    释放写入线程，清除输入缓冲区，然后继续读取。
    如果输入缓冲区包含无法识别的数据，则报告错误，清除缓冲区
    并继续阅读。
    如果输入缓冲区包含预期响应的开头，
    继续阅读。

```

线程和事件通知是特定于操作系统的。如果您的 C++ 编译器不支持多线程，请使用 Boost 等可移植库，或使用特定于操作系统的 API。请注意，Read 线程实现了流解析逻辑，因为串行通信是面向流的。

编辑。

“注册预期响应”意味着：设置一些程序变量而不是意味着“类型 X 的命令被发送到设备”。根据该变量，Read 线程期望接收数据包，该数据包应由设备根据通信协议（特定于应用程序）发送。另一个接收到的通常有效的数据包应该被视为错误，因为这不是对刚刚发送到设备的命令的响应。

另一种方式：设置预期响应大小。在这种情况下，一旦 Read 线程接收到预期数量的数据，它就会设置 Received 事件，将数据包识别任务留给发送方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:16:33.770

它是特定于操作系统的。在 Linux 或 Unix 上，您应该考虑使用像[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)这样的多路复用系统调用（或者可能是我觉得已经过时的[select(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)，因为它限制了最大文件描述符数，请参阅[C10K](http://www.kegel.com/c10k.html)问题）。

^(C标准不知道串行端口。)

# java - 如何在较旧的 Android 设备（例如 Gingerbread 和 Froyo）上显示首选项屏幕？

> ID：13587224
> 
> 赞同：1
> 
> 时间：2012-11-27T15:14:12.617
> 
> 标签：java, android, android-activity, actionbarsherlock, android-preferences

我需要从我的应用程序中显示首选项屏幕。我已经设法实现了这一点，它适用于 Ice-Cream Sandwich 和更新的设备，但不适用于 Gingebread 和 Froyo 等旧设备。我使用 ActionBarSherlock 作为兼容库来支持旧设备。

这`Activity`是包含首选项屏幕的代码：

```
public class Settings extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new Preferences())
                .commit();
    }

} 
```

这是我的活动中调用首选项屏幕的示例代码：

```
public class Trend extends SherlockActivity {

    @Override
    public boolean onOptionsItemSelected(MenuItem itmMenuitem) {
        if (itmMenuitem.getItemId() == R.id.search) {
            startActivity(new Intent(getBaseContext(), Settings.class));
            return true;
        }
    }

} 
```

当用户尝试在旧设备上打开首选项屏幕时，我收到一个异常，内容如下：

```
java.lang.NoSuchMethodError: com.mridang.stupidapp.Settings.getFragmentManager
at com.mridang.stupidapp.Settings.onCreate(Settings.java:15) 
```

我应该如何修改我的首选项屏幕以使用旧设备，即 API 8？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:41:06.243

ActionBarSherlock 和[Android 支持库](http://developer.android.com/tools/extras/support-library.html)都不提供对 Preference Fragments 的支持。

您需要按照[设置文档](http://developer.android.com/tools/extras/support-library.html)中的说明恢复到 Perference 活动。

有几个老问题讨论了同一主题：

*   [PreferenceActivity Android 4.0 及更早版本](https://stackoverflow.com/questions/10186697/preferenceactivity-android-4-0-and-earlier)
*   [PreferenceFragment 是否有意从兼容性包中排除？](https://stackoverflow.com/questions/5501431/was-preferencefragment-intentionally-excluded-from-the-compatibility-package)

# c++ - glBindMultiTexture 和 glEnableIndexed 的语义？

> ID：13587226
> 
> 赞同：0
> 
> 时间：2012-11-27T15:14:20.133
> 
> 标签：c++, c, opengl

`glBindMultiTexture`和的语义是`glEnableIndexed`什么？

我已经看到它似乎与类似的东西一起`glBindMultiTexture`使用，例如尽管我不确定它是否需要以及是否替换，或者两者都应该使用？DSA[规范](http://www.opengl.org/registry/specs/EXT/direct_state_access.txt)似乎没有在.`glEnableIndexed``glEnable(GL_TEXTURE_2D)``glEnable(GL_TEXTURE_2D)``glEnableIndexed``glBindMultiTextureEXT`

正确的用法是什么？

```
// Init 1

glEnable(GL_TEXTURE_2D);
for(int n = 0; n < 4; ++n)
    glEnableIndexed(GL_TEXTURE_2D, n);

// Init 2

for(int n = 0; n < 4; ++n)
    glEnableIndexed(GL_TEXTURE_2D, n);

// Init 3

glEnable(GL_TEXTURE_2D);

// For each frame 1

for(int n = 0; n < 4; ++n)
    glBindMultiTexture(GL_TEXTURE0 + n, GL_TEXTURE_2D, textureIds[n]);

// For each frame 2

for(int n = 0; n < 4; ++n)
{
    glEnableIndexed(GL_TEXTURE_2D, n);
    glBindMultiTexture(GL_TEXTURE0 + n, GL_TEXTURE_2D, textureIds[n]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:32:55.053

glEnableIndexed 不存在。但是glEnableIndexed **EXT**`glEnablei`和（核心 OpenGL 3.0 等效项）一样。我假设你在谈论他们。glBindMultiTexture **EXT**也是如此。

既然那一点命名法已经不存在了，那么“正确用法”的含义并不完全清楚。

如果“Init”代码的意图是启用`GL_TEXTURE_2D`前四个固定功能纹理单元的固定功能使用，那么 1 和 2 将执行此操作。3 只会为当前纹理单元启用它。请注意，这仅适用于*固定功能*纹理使用。

这就是另一点所在：通常，您不会像在初始化例程中那样简单地全局启用一堆纹理目标。*这只有在您在整个场景中渲染的所有内容*在前四个纹理单元中使用 4 个 2D 纹理时才有意义。一般来说，您可以根据需要为每个对象启用和禁用纹理目标。

所以我想说，在你的初始化中没有使能，在你的渲染调用周围启用（和*禁用）目标是“正确的用法”。*

`glActiveTexture`另外，请注意，这与在这方面直接使用没有什么不同。因此，您使用 DSA 无开关命令这一事实是无关紧要的。

# svn - 如何用旧代码替换中继中的所有代码？

> ID：13587227
> 
> 赞同：5
> 
> 时间：2012-11-27T15:14:19.833
> 
> 标签：svn, merge

一个合作伙伴和我正在使用 svn 为一个类的合作伙伴项目，我们最初在我们的主干代码中走错了方向。我们到了第 129 版，然后才意识到最好从第 113 版重新开始，然后朝着不同的方向前进。

在我自己的计算机上，我检查了修订版 113，进行了更改，并希望提交我拥有的代码。但是，当我尝试提交时，我得到了这个：

```
svn: Commit failed (details follow):
svn: File or directory 'Robot.cpp' is out of date; try updating
svn: resource out of date; try updating 
```

问题是，我不想更新。我不想要我们从修订版 113 到 129 所做的所有更改，并且基本上希望将存储库中的所有代码替换为我在本地拥有的代码。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:28:09.683

作为工作副本的根目录，您可以发出以下命令：

```
svn merge -rHEAD:113 . 
```

这将“*撤消*”您对修订版 113 所做的所有更改，以便您的修订版 130 看起来像修订版 113。

不过不要忘记事后提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T15:32:12.167

*   标记当前主干，以便您有备份
*   将当前副本签出到新文件夹中
*   将所有更改回滚到版本 113：`svn merge -c 113`然后`svn commit -m "rolledback to 113"`.
*   在您当前的工作目录中：`svn update`
*   然后`svn commit`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:25:12.117

您可以标记版本 129，并将 129 的版本下载到本地。使用您的新本地版本创建一个新分支。这样，你就可以保留你所拥有的一切。在一个分支上，您可以修复版本 129 上的问题，在另一个分支上，您可以创建新功能。您还可以将更改从一个分支合并到另一个分支。

# java - Java Hash Map containsKey 在不应该返回 true 时

> ID：13587229
> 
> 赞同：1
> 
> 时间：2012-11-27T15:14:26.857
> 
> 标签：java, hash, map, false-positive, containskey

所以我有这个方法可以将对象添加到显示中。首次打开显示时，所有现有对象都会被 1 个 1 添加到 HashMap 中。之后用户可以添加更多，一次添加 1 个，这会将新对象放入 HashMap。

Key 是 Object，Value 是一个自定义类，其中包含 Object 和一些关于它的其他变量。

这一切都很好，但是当显示器关闭并打开一个新实例时，它应该重新加载所有对象（包括用户在使用期间创建和保存的对象），但出于某种原因，对于任何新创建的对象那些，它在执行 containsKey 时发现不正确的匹配项。

我真的不明白为什么它不应该找到匹配项。当我执行 containsValue 时，它​​没有找到任何不正确的匹配项（它应该正常工作）但它没有帮助，因为当我使用 HashMap.put(K, V) 时，它会覆盖它会为 containsKey 返回误报的匹配项.

代码所做的只是遍历每个对象，检查 HashMap 是否已经包含键，如果包含，则返回键的值，否则根据传递给方法的键创建一个值并将其放入 hashmap 中。

很抱歉，我无法发布代码，所以如果没有它你无法提供帮助，我理解，但它是为了工作，我不确定是否可以发布代码，即使它只是一个片段。

任何帮助或指导将不胜感激，我仍在谷歌上搜索，看看是否能找到任何信息。

编辑：我找到了解决方案。hashcode 函数返回的值本质上是一个索引。问题是它在初始对象之后被重置，因此新添加的对象将从零开始覆盖现有对象。我修改了哈希码及其工作。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:16:47.220

似乎您已经覆盖`equals`了方法，但没有覆盖`hashCode`您类中的方法。

请注意，如果您将`custom class`对象用作 中的键，请`HashMap`确保您的类同时覆盖`equals`和`hashCode`方法，否则您将永远无法在`key`其中找到`HashMap`。

如果你 override `equals`but not `hashCode`，那么你的方法`keys`可能是相等的`equals`，但它`hashCode`会从类方法的方法中生成`hashCode`，它会`Object`为你的实例生成不同的 hashCode。

一般来说，如果你应该重写`both equals and hashCode`方法，或者`override none of them`. 此外，为了计算，您应该只使用那些在方法`hashCodes`中用于比较的属性。`equals`

此外，从其中一条评论中，您应该确保您的评论`Keys`是不可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:19:40.537

我建议您不要使用自定义对象作为 HashMap 的键。

这些物体有一些标识吗？某些属性不会从一个对象重复到另一个对象？将 HashMap 的键更改为该属性。

这样，您可以使用`.containsKey()`传递此属性作为参数。

# knockout.js - 敲除将键值对象绑定到下拉列表

> ID：13587230
> 
> 赞同：9
> 
> 时间：2012-11-27T15:14:28.583
> 
> 标签：knockout.js

我有以下型号：

```
var allCategories = [{
    id: 1,
    name: 'Red'},
{
    id: 5,
    name: 'Blue'}];

function model() {
    self = this;
    self.name = ko.observable("");
    self.categoryId = ko.observable(-1);
    self.categoryName = ko.computed(function() {
        if (self.categoryId() == -1) return "";
        return getCategoryNameById(self.categoryId()).name;
    });
}

function getCategoryNameById(id) {
    return _.find(allCategories, function(cat) {
        return cat.id == id;
    });
} 
```

我想提供一个下拉列表来选择类别，但我不知道如何绑定它。也许我对我的模型使用了错误的方法，但这很可能是我从服务器获取数据的方式，所以我试图将我的 JS 包装在它周围。

我试过这样的事情：

```
<select data-bind="options: categories, optionsText: 'name', value: 'id', optionsCaption: 'Categorie...'"></select> 
```

但我不知道如何将下拉值连接到模型`categoryId`。

这是一个用于 name 属性的工作绑定[的小提琴。](http://jsfiddle.net/kannix/S5Jbt/5/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T16:01:46.940

对于您的列表框，您需要指定：`options`、`optionsText`、`optionsValue`和`value`。 `value`（这是当前选择的值）应该指向你的`model.categoryId()`. 并且`optionsValue`是获取列表值的属性名称：

```
<select data-bind="options: categories, optionsText: 'name', optionsValue: 'id', value: $root.model.categoryId(), optionsCaption: 'Categorie...'"></select> 
```

就是这样。和工作小提琴：http: [//jsfiddle.net/Y7Nrc/](http://jsfiddle.net/Y7Nrc/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-27T17:00:54.030

根据 Max Schmelevs 的回答，这是正确的，当您从下拉列表中更改项目时，此功能不会更改 JSON 对象。

所以这是我对他的代码的更正：

HTML 代码：

```
<div id="container">
  <!-- Here I've added valueUpdate on keydown -->
  <input data-bind="value: model.name, valueUpdate:'afterkeydown'" />
  <!-- NOTE: Here you should call value like $root.model.categoryId -->
  <select data-bind="options: categories, optionsText: 'name', optionsValue: 'id', value: $root.model.categoryId, optionsCaption: 'Categorie...'"></select>
  <span data-bind="text: ko.toJSON($data.model)"></span>
</div> 
```

Javascript代码：

```
var allCategories = [
    {id: 1, name: 'Red'},
    {id: 5, name: 'Blue'}];

function model() {
    self = this;
    self.name = ko.observable("");
    self.categoryId = ko.observable(1);
    self.categoryName = ko.computed(function() {
    //NOTE: Here we should check if categoryId() is defined or not
    if (!self.categoryId()) return "";
        return getCategoryNameById(self.categoryId()).name;
    });
}

function getCategoryNameById(id) {
    return _.find(allCategories, function(cat) {
        return cat.id == id;
    });
}

var viewModel = {};
viewModel.model = new model();
viewModel.categories = allCategories;
ko.applyBindings(viewModel, document.getElementById('container')); 
```

！！！重要的！！！

如果这种方法回答了您的问题，请选择 Max Shmelev 的正确答案，而不是我的，因为我刚刚在他的代码中添加了一些注释。

# javascript - 使用 Jquery 动态上传静态 javascript/ajax 文件

> ID：13587236
> 
> 赞同：1
> 
> 时间：2012-11-27T15:14:53.647
> 
> 标签：javascript, jquery, ajax, file-upload

基本上多年来我一直使用静态文件上传脚本，最初是 ajaxupload。为了满足我们的需要，它经过了轻微的编辑，每页一张图片，效果很好。但是，我现在需要在一个页面上上传多个**单独**的图片，以阻止自己简单地复制大量相同的代码，我希望使当前脚本动态化。

这是Javascript：

```
$(document).ready(function(){

$("#daftform").validationEngine({promptPosition : "topLeft:0,15", scroll: false}); 
                            var btnUpload=$('#upload');
                            var status=$('#swaptd');
                            new AjaxUpload(btnUpload, {
                                            action: 'upload-file-notes.php',
                                            name: 'uploadfile',
                                            onSubmit: function(file, ext){
                                                             if (! (ext && /^(jpg|png|gif|pdf|doc)$/.test(ext))){ 
                // extension is not allowed 
                                                                            status.text('File format not supported!');
                                                                            return false;
                                                            }
                                                            //status.text('Uploading...');
                                                            $('#hidebtn').hide();
                                                            $('#hideimg').show();
                                            },
                                            onComplete: function(file, response){
                                                            //alert(response);
                                                            var mytext = response.split('#');
                                                            //Add uploaded file to list
                                                            if(mytext[0]==="success"){
                                                                            str =mytext[1];
                                                                            newid = str.substring(0, str.length - 5);
                                                                            $('#myfilename').html(mytext[1]);
                                                                            document.daftform.attachments.value = mytext[1];
                                                                            $('#hidebtn').show();
                                                                            $('#hideimg').hide();
                                                            } else{
                                                                $('#myfilename').html('error had occured');
                                                            }
                                            }
                            });

            }); 
```

这与 s 简单的 html 元素有关：

```
<?php if (isset($_GET['change']) && $_GET['change'] == "image1"){?>
                                <tr>
                                    <td align="right">Thumbnail:</td>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>
                                                    <div id="upload" >
                                                        <button id="upload" type="button">Upload</button>
                                                    </div>
                                                </td>
                                                <td id="myfilename">
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <?php } else { ?>
                                <tr>
                                    <td align="right">Banner:</td>
                                    <td align="left">
                                        <img src="../shop/<?php echo $subcatinforow['SubCatBan']; ?>" width="230" border="0">&nbsp;<a href="productupdate.php?change=image1&id=<?php echo $prodID; ?>"><img src="images/1001-cancel16.gif" width="16" height="16" alt="" border="0"></a>
                                        <div id="upload"></div>
                                    </td>
                                </tr>
                                <?php } ?> 
```

正如您所看到的，一旦图像被“取消”，上传按钮将出现在标识为“上传”的 div 中，这就是 javascript 寻找的内容。

我正在寻找一种方法来使这种动态化，这样我就可以拥有多个 html 元素，例如上面的那个，所有元素都具有不同的 id。我知道有一个 Jquery 这个函数，但是任何人都可以建议如何在单击按钮时调用它......或另一种有效的方法来完成这个。

该行基本上是：

```
var btnUpload=$('#upload'); 
```

# 上传需要变成动态变量

希望一切都说得通。

# c++ - 由于 typeid().raw_name()，c++ 代码无法使用 GCC 编译 - 我该如何解决这个问题？

> ID：13587237
> 
> 赞同：1
> 
> 时间：2012-11-27T15:14:54.857
> 
> 标签：c++, visual-c++, gcc

以下代码在 Windows 上使用 Visual Studio 编译良好：

```
class_handle(base *ptr) : ptr_m(ptr), name_m(typeid(base).raw_name()) { signature_m = CLASS_HANDLE_SIGNATURE; } 
```

如果我尝试在 Linux 上编译相同的代码，我会得到：

```
error: ‘const class std::type_info’ has no member named ‘raw_name’ 
```

据我了解，`raw_name`是微软[特定](http://msdn.microsoft.com/en-us/library/70ky2y6k%28v=vs.80%29.aspx)的实现。我必须如何更改我的代码才能在 Windows 和 Linux 系统上编译？

**EDIT1**我宁愿不修改原始代码，我只需要一个解决方法来用 gcc 编译。那可能吗？

**EDIT2**会成功`#define raw_name name`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:28:53.603

写下这些：

```
// for variables:
template<typename T>
char const* GetRawName( T unused ) { ... }
// for types:
template<typename T>
char const* GetRawName() { ... } 
```

在 Windows 和非 Windows 上使用不同的实现，使用`#ifdef`您知道在 microsoft 编译器中定义的令牌上的块，但在您的其他编译器中没有。这将 MS 和非 MS 编译版本之间的预处理差异隔离到一个隔离文件中。

这确实需要对原始代码进行少量更改，但这样做的方式仍然可以在 microsoft 编译器上编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:28:56.950

这样做可能更安全`#define typeid`：

```
class compat_typeinfo {
  const std::type_info &ti;
public:
  explicit compat_typeinfo(const std::type_info &ti): ti(ti) {}
  const char *name() const { return ti.name(); }
  const char *raw_name() const { return ti.name(); }
};
compat_typeinfo compat_typeid(const std::type_info &ti) {
  return compat_typeinfo(ti);
}
#define typeid(x) compat_typeid(typeid(x)) 
```

当然，这在 17.6.4.3.1p2 中是非法的（*翻译单元不得`#define`或`#undef`名称在词法上与关键字 [...] 相同*），但它很有可能起作用，并且在其他地方需要最少的修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T02:44:49.233

GCC 没有定义`raw_name`，但在`cxxabi.h`. 你可以在[这里](https://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)看到一个例子。

```
#include <cxxabi.h>
//...
std::bad_exception  e;
realname = abi::__cxa_demangle(e.what(), 0, 0, &status);
std::cout << e.what() << "\t=> " << realname << "\t: " << status << '\n';
free(realname); 
```

# tsql - 如何更新 SQL Server 2008 R2 中记录的最新条目

> ID：13587241
> 
> 赞同：1
> 
> 时间：2012-11-27T15:15:00.990
> 
> 标签：tsql, sql-server-2008-r2

我有一张表，`SUBSCRIBERS`每个订阅者可以在其中拥有多个条目。

（假设因为它不再是订阅者，现在又变成了客户，所以它具有不同的“身份”但相同的“subno”）

我需要一条`UPDATE`语句来更新一行中的一列（假设他们的地址），但仅适用于该订阅者的最新记录（最新的`EffectiveDate`）。

所以我想出了如何选择这样的一行：

```
SELECT 
    t1.identity, t1.Subno, t1.EffectiveDate
FROM 
    SUBSCRIBERS t1
INNER JOIN 
    (SELECT subno,max(EffectiveDate) as LatestDate 
     FROM SUBSCRIBERS
     GROUP BY Subno) t2 ON t1.Subno = t2.Subno AND t1.EffectiveDate = t2.LatestDate 
```

但我不知道如何更新给定 subno 值的行。好吧，我愿意，但我不想用 17 个嵌套的 select 语句来做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:28:13.047

您可以使用“更新自”：

```
UPDATE SUBSCRIBERS 
SET Address = 'the address' 
FROM SUBSCRIBERS t1
INNER JOIN 
  (SELECT subno,max(EffectiveDate) as LatestDate FROM SUBSCRIBERS
   GROUP BY Subno) t2 
ON t1.Subno = t2.Subno and t1.EffectiveDate = t2.LatestDate 
```

# java - 从 apache HttpResponse 获取响应 Uri 并解析它（java）

> ID：13587243
> 
> 赞同：0
> 
> 时间：2012-11-27T15:15:08.430
> 
> 标签：java, .net, http, httpresponse

我需要从 HttpResponse 获取响应 uri 并将其解析为名称-值对。我需要以下 .NET 片段的模拟：

```
string authorizationRequestParameters = string.Format("client_id={0}&response_type=code&scope={1}&access_type=offline", ClientID, Scope);
Uri authorizationRequestUri = new Uri(OauthHost.AbsoluteUri + "?" + authorizationRequestParameters);
HttpWebResponse authorizationResponse = DoGet(authorizationRequestUri, cookies);
NameValueCollection authorizeResponseParameters = HttpUtility.ParseQueryString(authorizationResponse.ResponseUri.Query);
string callbackCode = authorizeResponseParameters["code"]; 
```

必要条件是，Java 版本中的 DoGet 方法返回 apache HttpResponse。我尝试这样做的方式：

```
HttpResponse resp = hch.doGet("http://...?client_id=...&response_type=...&scope=...&access_type=...");
HttpEntity entity = resp.getEntity();
InputStream instream = entity.getContent();
System.out.print(IOUtils.toString(instream, "UTF-8")); 
```

我可以通过这种方式接收 html 内容，但我只需要响应 Uri，它的一部分，它包含参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:17:47.657

似乎[HttpWebResponse.ResponseUri](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.responseuri%28v=vs.110%29.aspx)属性来自`Content-Location`标头或请求`URI`。所以这样的事情应该有效：

```
final String uri = "http://...?client_id=...&response_type=...&scope=...&access_type=...";
final HttpResponse resp = hch.doGet(uri);
final String contentLocation = resp.getFirstHeader ("Content-Location");
final String responseURI = contentLocation != null ? contentLocation : uri; 
```

# windows-phone-7 - Windows Phone 8 中的 CameraCaptureTask - 自动保存到相机胶卷

> ID：13587244
> 
> 赞同：3
> 
> 时间：2012-11-27T15:15:15.347
> 
> 标签：windows-phone-7, windows-phone-8, cameracapturetask

我有一个为 Windows Phone 7 开发的现有应用程序，它使用 CameraCaptureTask。

捕获的图像返回给应用程序，将进行灰度转换处理。

在 Windows Phone 8 Lumia 920 中测试相同的应用程序（准确地说是相同的二进制文件）时，我发现通过 CameraCaptureTask 捕获的所有图像的副本都保存在“相机胶卷”文件夹中。

这有点烦人，因为我的应用程序的用户并不期望捕获的图像会挤满“相机胶卷”文件夹。我查阅了文档[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394006(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394006(v=vs.105).aspx)并找到了以下引用，

> 在 Windows Phone 8 上，如果用户接受使用相机拍摄任务拍摄的照片，照片会自动保存到手机的相机胶卷中。在以前版本的 Windows Phone 上，照片不会自动保存。

到目前为止，我找不到在 Windows Phone 8 中避免这种情况的方法。

有没有办法在 Windows Phone 8 中调用 CameraCaptureTask 的 Show() 方法之前关闭此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:01:36.857

不，这是在 WP8 上实现的消费者功能请求，对开发人员是透明的。这里的用例是消费者使用 CameraCaptureTask 来排列一个完美的镜头，无论出于何种原因都不会将其用作应用程序，并且以后再也找不到它。

作为旁注，我在使用各种推特和照片编辑应用程序时实际上发生过几次这种情况，这很烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T18:28:11.253

没有意义。创建 CameraCaptureTask 是为了允许应用程序捕获照片以供应用程序使用，而不是让用户将它们推送到相机胶卷中。这就是镜头的用途（自定义代码也可以写入相机胶卷）。

它对开发人员不透明，因为我的一个应用程序刚刚从 WP8 市场中删除。他们说因为会导致“将应用程序照片意外上传到 skydrive”。

贾斯汀你确定这不是一个错误？它会被修复吗？

这迫使我现在将我的开发分为 2 个：WP7 和 WP8。我现在不想那么麻烦...

# facebook - Facebook - OAuth 令牌 - redirect_uri 不是绝对 URL

> ID：13587245
> 
> 赞同：6
> 
> 时间：2012-11-27T15:15:16.640
> 
> 标签：facebook, facebook-graph-api, oauth

... 但它是！

我使用以下链接调用 facebook API 以接收我的访问令牌：

[https://www.facebook.com/dialog/oauth?client_id=myclientid&redirect_uri=http%3A%2F%2Fmydomain.org%3A8080%2FServer%2FFacebookAuthenticationVerificationServlet&scope=manage_notifications,offline_access,read_mailbox,read_stream,publish_stream](https://www.facebook.com/dialog/oauth?client_id=myclientid&redirect_uri=http%3A%2F%2Fmydomain.org%3A8080%2FServer%2FFacebookAuthenticationVerificationServlet&scope=manage_notifications,offline_access,read_mailbox,read_stream,publish_stream)

我究竟做错了什么？

Facebook 回答以下错误：

```
message: redirect_uri isn't an absolute URI. Check RFC 3986.
type: OAuthException
code: 191 
```

它不应该与它有任何关系，但我正在使用 java 的 URLEncode.encode() 将 URL 编码为 UTF-8。我将结果与来自 JavaScript 的 encodeURIComponent() 的结果进行了比较，没有发现任何区别。

**编辑：**我是否必须将域设置到我的配置中？我无法在“应用程序域”上找到它（因为 facebook 不允许我在那里添加带有端口配置的域），但我将域设置为“我的网站的 URL”。

**EDIT2：**未编码的重定向 uri：[http ://mydomain.org:8080/Server/FacebookAuthenticationVerificationServlet](http://mydomain.org:8080/Server/FacebookAuthenticationVerificationServlet)

**EDIT3：**这与：8080 无关。我用 php 脚本（URL 类似于 bla.domain.org/myphp.php）对其进行了测试，并通过 php 脚本将代码发送到了 tomcat 服务器，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T10:52:17.467

好吧，原来我误解了 OAuth 协议。我正在获取然后引导我访问 accessToken 的授权代码。

但我无法具体修复该错误。我刚刚重新开发了该程序并实现了身份验证代码和访问令牌分离，现在它工作正常。

也许取消授权该应用程序并重新授权它@ facebook 确实解决了它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:04:45.647

Error code 191 for Facebook is

> API Error Code: 191
> 
> API Error Description: The specified URL is not owned by the application
> 
> Error Message: redirect_uri is not owned by the application.

Make sure `mydomain.org` is in the App Domains field, and that the Website with Facebook login field is correct.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T09:04:13.063

你不应该编码redirect_uri。`http%3A%2F%2Fmydomain.org`不理解为`http://mydomain.org`

# python - pygtk + webkit：AttributeError：资源实例没有属性'_uri'

> ID：13587251
> 
> 赞同：1
> 
> 时间：2012-11-27T15:15:54.380
> 
> 标签：python, webkit, pygtk

我正在编写一个脚本（无头浏览器）来加载网站并记录需要加载网站资源的时间。

```
#!/usr/bin/env python

import gtk
import time
import webkit
import gobject

class Resource():

    __signals = [
        'content-length-received',
        'load-failed',
        'load-finished',
        'response-received'
        ]

    _start = time.time()
    _durations = {}

    def __init__(self, webkit_resource):
        self._webkit_resource = webkit_resource
        # literally copy the uri
        self._uri = "".join([c for c in self._webkit_resource.get_uri()])
        self._connect_callbacks()

    @property
    def uri(self):
        return self._uri

    def _connect_callbacks(self):
        for s_id in self.__signals:
            self._webkit_resource.connect(s_id, self._on_callback, s_id)

    def _on_callback(self, *args):
        self._durations[args[-1]] = time.time() - self._start
        print "==>", self._uri, "==>", args[-1], "==>", self._durations[args[-1]]

class Browser(webkit.WebView):

    def __init__(self):
        webkit.WebView.__init__(self)
        gobject.threads_init()
        self.connect('resource-request-starting',
                        self._on_resource_request_starting)

    def _on_resource_request_starting(self, view, frame, resource, request, response):
        c_resource = Resource(resource)

if __name__ == "__main__":
    browser = Browser()
    browser.open("http://amazon.com/")
    gtk.main() 
```

代码运行良好，但突然间我得到以下奇怪的 Tracebacks。

```
==> http://amazon.com/ ==> content-length-received ==> 0.98512005806
==> http://www.amazon.com/ ==> content-length-received ==> 0.985180854797
==> http://z-ecx.images-amazon.com/images/G/01/browser-scripts/us-site-wide-css-beacon/site-wide-5659237078._V1_.css ==> content-length-received ==> 0.986252069473
==> http://z-ecx.images-amazon.com/images/G/01/browser-scripts/us-site-wide-css-beacon/site-wide-5659237078._V1_.css ==> content-length-received ==> 0.987208843231
==> http://z-ecx.images-amazon.com/images/G/01/browser-scripts/us-site-wide-css-beacon/site-wide-5659237078._V1_.css ==> load-finished ==> 0.999194860458
==>
Traceback (most recent call last):
  File "test.py", line 37, in _on_callback
    print "==>", self._uri, "==>", args[-1], "==>", self._durations[args[-1]]
AttributeError: Resource instance has no attribute '_uri'
==>
Traceback (most recent call last):
  File "test.py", line 37, in _on_callback
    print "==>", self._uri, "==>", args[-1], "==>", self._durations[args[-1]]
AttributeError: Resource instance has no attribute '_uri'
==> 
```

我确实设置了self._uri。我实际上一个一个地复制每个字符。它是否在某处被删除？

# vb.net - 使用相同的值填充多个组合框

> ID：13587256
> 
> 赞同：2
> 
> 时间：2012-11-27T15:16:12.353
> 
> 标签：vb.net, combobox

我的表单上有 8 个组合框，它们都包含相同的值 - 是和否。

有没有比必须做 combox1.items.add("Yes") 等更快的方法？

我有以下内容，但似乎找不到与添加项目有关的任何内容。

```
 Dim cmb As Control
    For Each cmb In Panel1.Controls
        If TypeOf cmb Is ComboBox Then
'cmb. isnt beinging anything up for adding items?
        End If
Next 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:18:38.493

您可以使用`Enumerable.OfType`：

```
For Each cmb In Panel1.Controls.OfType(Of ComboBox)()
    cmb.Items.Add("Yes")
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:22:12.813

我会创建一个`DataSource`包含`{Yes,No}`值，例如作为 a`List`然后这样做：

```
For Each cmb In Panel1.Controls.OfType(Of ComboBox)()
  cmb.DataSource = myYesNoDataSource
Next 
```

稍后如果您需要接受`Y`and`N`代替`Yes`and `No`，您可以相应地转换为`Dictionary`and 设置`ValueMember`and `DisplayMember`。另外，您的可用值列表仅初始化一次。因此，您的解决方案变得灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T13:41:42.893

如果您不使用面板，此代码将很有用。如果您有 5 个组合框，请给出 1 到 5 的计数以及这些组合框的名称，例如 ComboBox1、ComboBox2、ComboBox3 等。

```
For count = 1 To 5
Dim combobox = DirectCast(Me.Controls("ComboBox" & n & ""), ComboBox)
combobox.Items.Add("Ok")
Next 
```

希望这段代码也能帮助你。

# html - django 从正常形式读取无线电值

> ID：13587262
> 
> 赞同：3
> 
> 时间：2012-11-27T15:16:24.707
> 
> 标签：html, django

我的表单代码是：

```
<td class="desc"><label>Description:<input type="text" name="desc"></label></td>
    <td class="tags"><label>Tags:<input type="text" name="tag"></label></td>
<td><label>Public:<input type="radio" name="pri" value="1"></label>
<label>Private:<input type="radio" name="pri" value="0"></label></td> 
```

在views.py中

```
meta['pri'] = request.POST.get('pri','') 
```

为什么我选择私人按钮，值“pri”始终是“1”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:08:12.600

您正在按名称进行选择，因此选择了名称为“pri”的第一个元素，它将始终是名称为“pri”且值为 1 的标签元素。标签的名称应该与输入元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-03T11:46:45.877

我认为你可以得到这样的结果：

```
meta['pri'] = bool(request.POST.get('pri')=='1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T15:40:06.363

唯一的解决方案是在单选按钮上使用 onclick 事件并使用另一个名称写入隐藏的输入，然后在视图中使用此输入

# python - 检查用户国家

> ID：13587266
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:16:36.203
> 
> 标签：python, python-2.7

我试图弄清楚如何检查用户国家/地区，然后根据我定义的用户国家/地区的结果执行特定代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:27:45.853

你可以这样做：

使用服务获取用户的外部 ip：

```
f = urllib.urlopen("http://www.canyouseeme.org/")
html_doc = f.read()
f.close()
m = re.search('(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)',html_doc)
ip = m.group(0) 
```

然后使用[http://pypi.python.org/pypi/pygeoip/](http://pypi.python.org/pypi/pygeoip/)找出用户国家

```
geoip = pygeoip.GeoIP("GeoIPCountry.dat", pygeoip.STANDARD)
result = geoip.record_by_addr(ip) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:23:27.803

由于您只是在征求意见，因此您可以检查语言和/或时区环境变量。问题是这些都不能保证是准确的——在菲律宾找到一台在美国/纽约设置为 en_US 的计算机也就不足为奇了。

# c# - WPF 中等效的 KeyPress 事件

> ID：13587270
> 
> 赞同：26
> 
> 时间：2012-11-27T15:16:47.337
> 
> 标签：c#, wpf

我在 WPA 中有以下代码，我正在尝试将其转换为 WPF。我尝试了 Keydown 而不是 Keypress 并进行了更改，例如，

```
(e.keyChar == '-') to (e.key == e.Subtract): 
```

1.  它不一样
2.  我在 e.key 中找不到等号

第一个代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        foreach (TextBox tb in this.Controls.OfType<TextBox>())
        {
            tb.Enter += textBox_Enter;
        }
    }

    void textBox_Enter(object sender, EventArgs e)
    {
        focusedTextbox = (TextBox)sender;
    }

private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (e.KeyChar == '+')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 1;
            e.Handled = true;
        }
        else if (e.KeyChar == '-')
        {

            if (focusedTextbox != null)
            {
                if (focusedTextbox.Text == "")
                {
                    e.Handled = false;
                }
                else
                {
                    e.Handled = true;
                    operand1.Real = getOperand.Real;
                    operand1.Imag = getOperand.Imag;
                    flag1 = 2;
                }
            }

        }
        else if (e.KeyChar == '*')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 3;
            e.Handled = true;
        }
        else if (e.KeyChar == '/')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 4;
            e.Handled = true;
        }
        else if (e.KeyChar == '=')
        {
            e.Handled = true;
            operand2.Real = getOperand.Real;
            operand2.Imag = getOperand.Imag;

            switch (flag1)
            {
                case 1:
                    operand1 = operand1 + operand2;
                    break;
                case 2: operand1 = operand1 - operand2;
                    break;
                case 3:
                    operand1 = operand1 * operand2;
                    break;
                case 4:
                    if (operand2.Magnitude == 0)
                    {
                        textBox1.Clear();
                        textBox2.Clear();
                        MessageBox.Show("Cannot divide by a number whose magnitude is zero");
                        operand1 = new Complex();
                        operand2 = new Complex();
                        listBox1.ClearSelected();

                    }
                    else
                    operand1 = operand1 / operand2;
                    break;
            }
            string s = operand1.ToString();
            if (flag == 1)
            {
                string[] s1 = s.Split(' ');

                if (s1[1] == "-")
                {
                    textBox1.Text = s1[0];
                    textBox2.Text = "-" + s1[3];
                }
                else
                {
                    textBox1.Text = s1[0];
                    textBox2.Text = s1[3];
                }
            }
            else if (flag == 2)
            {
                string[] s1 = s.Split('@');
                textBox1.Text = s1[0].Trim();
                textBox2.Text = s1[1].Trim();
            }

            listBox1.Items.Add(operand1);
        }

    } 
```

第二个代码：

```
private void win_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Add)
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 1;
            e.Handled = true;

        }
        else if (e.Key == Key.Subtract)
        {

            if (textBox2.Text == "")
            {
                e.Handled = false;
            }
            else
            {
                e.Handled = true;
                operand1.Real = getOperand.Real;
                operand1.Imag = getOperand.Imag;
                flag1 = 2;
            }

        }
        else if (e.Key == Key.Multiply)
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 3;
            e.Handled = true;
        }
        else if (e.Key == Key.Divide)
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 4;
            e.Handled = true;
        }
        else if (e.Key == Key.Enter)
        {
            e.Handled = true;
            operand2.Real = getOperand.Real;
            operand2.Imag = getOperand.Imag;

            switch (flag1)
            {
                case 1:
                    operand1 = operand1 + operand2;
                    break;
                case 2: operand1 = operand1 - operand2;
                    break;
                case 3:
                    operand1 = operand1 * operand2;
                    break;
                case 4:
                    if (operand2.Magnitude == 0)
                    {
                        textBox1.Clear();
                        textBox2.Clear();
                        MessageBox.Show("Cannot divide by a number whose magnitude is zero");
                        operand1 = new Complex();
                        operand2 = new Complex();
                        listBox1.UnselectAll();
                    }
                    else
                        operand1 = operand1 / operand2;
                    break;
            }
            string s = operand1.ToString();
            if (flag == 1)
            {
                string[] s1 = s.Split(' ');

                if (s1[1] == "-")
                {
                    textBox1.Text = s1[0];
                    textBox2.Text = "-" + s1[3];
                }
                else
                {
                    textBox1.Text = s1[0];
                    textBox2.Text = s1[3];
                }
            }
            else if (flag == 2)
            {
                string[] s1 = s.Split('@');
                textBox1.Text = s1[0].Trim();
                textBox2.Text = s1[1].Trim();
            }

            listBox1.Items.Add(operand1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-27T15:31:19.190

它非常相似 - 但您将 e.Key 与 Key 枚举进行比较。

在某处注册您的事件处理程序（例如构造函数或 window_loaded）：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    this.KeyDown += new KeyEventHandler(MainWindow_KeyDown);
} 
```

然后在事件处理程序中：

```
void MainWindow_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Subtract)
    {
        // Do something
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-01T00:57:40.313

您正在寻找[TextInput](http://msdn.microsoft.com/en-us/library/system.windows.contentelement.textinput.aspx)事件，或者可能是[PreviewTextInput](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewtextinput.aspx)。

EventArgs 类型是[TextCompositionEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.input.textcompositioneventargs.aspx)；我相信你想要`Text`这里的房产，但我完全不确定。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-19T03:03:24.123

```
<TextBox x:Name="txtbx" KeyDown="OnKeyDownHandler" Height="23" Width="250">
</TextBox> 
```

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Return)
    {
        txtbx.Text = "You Entered: " + txtbx.Text;
    }
} 
```

# wpf - 线条和模型的边缘不清晰

> ID：13587272
> 
> 赞同：0
> 
> 时间：2012-11-27T15:16:49.917
> 
> 标签：wpf, 3d, antialiasing

我已在此链接上阅读过它：[如何在 wpf 3d 中使用抗锯齿，](https://stackoverflow.com/questions/5219835/how-to-using-anti-aliasing-in-wpf-3d)但不幸的是，没有答案。

我似乎无法设置视口的 RenderingOptions（使用 helixtool/helixviewport）。

有谁知道如何提高渲染模型的清晰度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:54:48.567

首先，如果您运行的是 Windows XP，则默认情况下多采样是关闭的，有一些 reg 更改可以重新打开它，但超出了这个问题的范围。

WPF 应该默认使用多重采样，你应该确保的一件事是你的显卡满足 WPF [Here](http://msdn.microsoft.com/en-us/library/ms742196.aspx)硬件加速的最低要求，并且它没有在显卡驱动控制面板中被禁用。

使用您问题中链接中的模型我得到了这个，这很难看！ ![在此处输入图像描述](../Images/71c799e314b7a3b4eeb3ae45387b8b55.png)

下面显示了我的 nvidia 显卡上发生这种情况的设置。![在此处输入图像描述](../Images/1cf1ec926c98bce0f8539ad50b439611.png)

一旦我将OFF更改为应用程序控制，WPF就开始使用它的多重采样

![在此处输入图像描述](../Images/9444f403e7bceeb5ea6313d4d7e296d8.png)

# c# - 列出虚拟目录权限

> ID：13587282
> 
> 赞同：1
> 
> 时间：2012-11-27T15:17:21.517
> 
> 标签：c#, visual-studio-2008

因此，我浏览了这篇[文章](http://www.developmentnow.com/blog/2004/12/29/recursively-list-virtual-directories-in-iis-with-c-and-directoryservices/)以列出虚拟目录。这篇文章展示了如何为 DirectoryEntry 指定用户名和密码。但我仍然收到拒绝访问。

关于权限，我仍然没有掌握一些东西。有任何想法吗？

```
class Program
    {
        static void Main(string[] args)
        {
            //http://www.developmentnow.com/blog/2004/12/29/recursively-list-virtual-directories-in-iis-with-c-and-directoryservices/

            // call the function once to kick it off
            WriteVDirs("localhost", 2, "");

        }

        // function that recursively walks through IIS dir & vdirs & lists all the virtual directories
        public static void WriteVDirs(string serverName, int SiteNumber, string path)
        {
            DirectoryEntry de =
              new DirectoryEntry("IIS://" + serverName + "/W3SVC/" +
              SiteNumber.ToString() + "/Root" + path);
            de.Username = "my-machine/administrator";
            de.Password = "admin";
            DirectoryEntries dirs;
            try
            {
                dirs = de.Children;

            foreach (DirectoryEntry d in dirs)
            {
                if (0 == String.Compare(d.SchemaClassName, "IIsWebDirectory"))
                {
                    string fullPath = path + "/" + d.Name;
                    WriteVDirs(serverName, SiteNumber, fullPath);
                }
                else if (0 == String.Compare(d.SchemaClassName, "IIsWebVirtualDir"))
                {
                    string fullPath = path + "/" + d.Name;
                    Console.WriteLine(fullPath + " : " + d.Properties["Path"].Value);
                    WriteVDirs(serverName, SiteNumber, fullPath);
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("ERROR: " + ex.Message);

        }

    }
} 
```

# ajax - Cakephp 2.x 和 Jquery Ajax - Cake 认为请求不是 ajax

> ID：13587283
> 
> 赞同：0
> 
> 时间：2012-11-27T15:17:21.340
> 
> 标签：ajax, jquery, cakephp-2.0, cakephp-2.1

我正在开发一个小 cakePHP 应用程序，并尝试使用 JQuery 对其进行 AJAX 处理，以使其对用户更好地工作。

我刚刚学习了本教程：[Cakephp Jquery AJAX 教程](http://www.jamesfairhurst.co.uk/posts/view/ajax_delete_with_cakephp_and_jquery)，但由于某种原因它不起作用。

本教程的一大优点是，如果请求不是 AJAX 请求，那么功能会退回到正常的 CakePHP，所以我的应用程序仍然可以工作，但它不能以 AJAX 方式工作......

看起来在我的控制器中，请求没有通过测试：

```
if($this->request->is('ajax')) 
```

因此继续`$this->redirect(...)`使用非 AJAX 方式的正常。

这可能与'ajax'的if语句有关吗？在本教程中，作者使用的是 2.0 之前的 cakePHP 版本，因此使用了`$this->RequestHandler->isAjax()`，但自 cakePHP 2.0 起已弃用。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:02:25.427

正如我认为你已经发现的那样，这与 Cake 无关。这是因为在教程中他告诉您创建一个链接，然后您单击该链接以运行该操作。这会导致 AJAX 请求触发，但实际链接也会被跟踪。

您需要`preventDefault()`在 jQuery click 事件中阻止浏览器以正常方式跟踪链接。如果用户没有 JavaScript，这不会影响链接......因为他们不会首先发生点击事件 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:08:11.470

[JsHelper::link](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#other-methods)可能会做你想做的事。

# javascript - 从 extjs 版本 4.0.7 升级到 4.1.1 的问题

> ID：13587292
> 
> 赞同：1
> 
> 时间：2012-11-27T15:17:52.620
> 
> 标签：javascript, extjs, extjs4, extjs4.1

下午好！

我正在尝试从 4.0.7 版升级到 4.1.1 版（作为 45 天免费试用版下载），以便在我们目前正在运行的应用程序中测试 4.1 版，看看我们之前可能需要做多少更改正式升级，我做的唯一步骤是将我的 jsp 文件指向页面头部的新文件，如下所示：

```
<link rel="stylesheet" href="3rdParty/ext-4.1.1a/resources/css/ext-all.css"/>

<script type="text/javascript" charset="utf-8" src="3rdParty/ext-4.1.1a/ext-all-debug.js"></script> 
```

在我的 jsp 页面中，我正在做一些非常简单的事情，只是创建一个按钮，我使用了以下代码：

```
 <body>
            <script type="text/javascript">

                Ext.create('Ext.Button', {
                    text: 'Test window',
                    width: 75,
                    renderTo:  Ext.getBody(),
                    handler: function() {
                        alert("the button worked"");
                    }
                });
    </script> 
    </body> 
```

但是当我运行这个页面时什么都没有显示，当我使用谷歌浏览器的开发工具时，控制台正在向我显示这条消息：

未捕获的类型错误：无法调用未定义的方法“createChild”

当我调试代码时，错误出现在文件 ext-all-debug.js:20687

```
getStyleProxy: function(cls) {
       var result = this.styleProxyEl || (Ext.AbstractComponent.prototype.styleProxyEl = Ext.resetElement.createChild({

               style: {
                   position: 'absolute',
                   top: '-10000px'
               }
           }, null, true));

       result.className = cls;
       return result;
   }, 
```

我错过了什么步骤？，我在 extjs 中很新，据我了解，从 4.0.7 版本升级到 4.1.1 不应该涉及与某些不同的代码编写方式不同的许多步骤，有人可以帮助我请？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:49:38.523

尝试将您的代码放在 onReady 块中：

```
<body>
<script type="text/javascript">

    Ext.onReady( function() {            
        Ext.create('Ext.Button', {
            text: 'Test window',
            width: 75,
            renderTo:  Ext.getBody(),
            handler: function() {
                alert("the button worked");
            }
        });
    });

</script> 
</body> 
```

# hadoop - Cloudera Hadoop 没有运行 hadoop 1.0.4？

> ID：13587294
> 
> 赞同：0
> 
> 时间：2012-11-27T15:17:57.343
> 
> 标签：hadoop, mapreduce, cloudera

我编写了一个 hadoop 1.0.4 应用程序，它在半分布式模式下本地运行良好。我还在集群上安装了 Cloudera Hadoop 4。我认为 CDH4 运行 hadoop 1.0.4，因为它在 hadoop 站点上被列为稳定版本，但情况似乎并非如此。当我在集群上运行应用程序时，出现以下错误：

```
12/11/27 16:14:38 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/11/27 16:14:38 INFO input.FileInputFormat: Total input paths to process : 16
12/11/27 16:14:39 INFO mapred.JobClient: Running job: job_201211271520_0004
12/11/27 16:14:40 INFO mapred.JobClient:  map 0% reduce 0%
12/11/27 16:14:50 INFO mapred.JobClient: Task Id : attempt_201211271520_0004_m_000013_0, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
12/11/27 16:14:50 INFO mapred.JobClient: Task Id : attempt_201211271520_0004_m_000000_0, Status : FAILED
... and so on... 
```

我是否认为这是因为 CHD4 与 hadoop 1.0.4 不兼容？如果是这样，有人知道哪个版本与 hadoop 1.0.4 兼容吗？我宁愿切换 cloudera 软件也不愿重写我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:46:46.633

你是对的; CDH3 使用 0.20.2 版本，CDH4 使用 2.0.0 版本。Hadoop 版本的命名是一团糟，我不会假装理解它。但看起来您*可以根据*[Cloudera 的这篇博](http://blog.cloudera.com/blog/2012/01/an-update-on-apache-hadoop-1-0/)文中所述的以下内容使用 CDH3 ：

`"The CDH3 distribution incorporated the 0.20.2 Apache Hadoop release plus the features of the 0.20.append and 0.20.security branches that collectively are now known as “1.0.” The Apache Hadoop in CDH3 has been the equivalent of the recently announced Apache Hadoop 1.0 for approximately a year now."`

如果是这种情况，我会尝试 CDH3。如果它不起作用，您可能只需要寻找 Cloudera 安装之外的东西。

# c# - XNA 资源错误

> ID：13587296
> 
> 赞同：0
> 
> 时间：2012-11-27T15:17:59.940
> 
> 标签：c#, xna

我试图弄清楚瓷砖碰撞，但我无法让它工作。当我与瓷砖碰撞时，什么也没有发生。

我的碰撞课

```
 public Point WorldToMapCell(Point worldPoint)
    {
        return new Point((int)worldPoint.X, (int)worldPoint.Y);
    }

    public MapCell GetCellAtWorldPoint(Point worldPoint)
    {
        Point mapPoint = WorldToMapCell(worldPoint);
        return Rows[mapPoint.Y].Columns[mapPoint.X];
    }

    public MapCell GetCellAtWorldPoint(Vector2 worldPoint)
    {
        return GetCellAtWorldPoint(new Point((int)worldPoint.X, (int)worldPoint.Y));
    } 
```

我的更新方法

```
 if (myMap.GetCellAtWorldPoint(player.position).Walkable == false)
        {
            player.velocity = Vector2.Zero;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:15:31.670

我真的不知道你在做什么类型的游戏。

但是你真的需要检查地图上的位置吗？或者使用[collision_2d_perpixel 方法](http://xbox.create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel)的解决方案不会更好？

如果碰撞 2D 方法不是好的方法，您能否对您的碰撞类更加期待？你的参考地图在哪里？你什么时候必须说“我正在碰撞”？

您能否查看此链接[dreamincode 用户问题](http://www.dreamincode.net/forums/topic/167529-xna-tile-collision-detection/)并告诉我们这是否不是您要查找的内容？

或者你甚至可以看看[MSDN](http://msdn.microsoft.com/en-us/library/bb203893.aspx)

# asp.net - MS JS 运行时错误....在 Web.Config 中包含 AJAX 库

> ID：13587299
> 
> 赞同：0
> 
> 时间：2012-11-27T15:18:11.053
> 
> 标签：asp.net, visual-studio-2010, visual-studio-2012, asp.net-4.0

这是错误的图像和出错的代码段。 ![在此处输入图像描述](../Images/c332431a2a2cc19a7ecbfa3f5f2d3876.png)

项目最初是在 VS2010 中开发的，但由于客户端具有该开发环境而被“升级”到 VS2012。不确定升级后我是否需要做其他事情来解决这个问题。

此错误仅在我将`Me.MaintainScrollPositionOnPostBack = True`Page_Load、Page Directive 或 Web.Config 放入时发生。我尝试过使用自我参考和`Page`参考以及同样的问题。

如果我`Me.MaintainScrollPositionOnPostBack = True`从 3 个位置中的任何一个位置删除代码行，`WebDev.WebServer####`则应用程序运行良好。

最终目标是我有一个未定义长度的对象被加载到表中。它可以少至表中的 5 个项目，也可以多至 100 个。在这两种情况下，每个项目都有一个与之关联的 RadioButtonList 对象。单击后，每个 RBL 都会将选择的选项提交回 SQL 服务器并最终刷新页面。此设置旨在解决刷新或 PostBack 的问题，将滚动重置回顶部。

在删除`MaintainScrollPositionOnPostBack`属性但添加 AJAX 控件后发现，我收到了类似的错误。

### 问题：

1.  ~~关于解决这个问题的任何建议，所以它不会发生在 VS2010 或 VS2012 中？~~
2.  ~~是否有替代方法，以便我可以维持页面上的滚动位置，同时仍将 RBL 选择的索引更改事件提交给 SQL 服务器？~~
3.  我该如何解决这个问题，以便将 JavaScript 安装在我的计算机上，或者 VS2010/2012 中的 WebServer 实例将使用 Javascript？
4.  似乎这与 Ajax 注册有关，`web.config`即使我已经在项目中注册了它。任何人都知道我在 web.config 中需要什么声明，所以 ajax 从服务器运行并且不需要客户端交互？（仅供参考，.Net 4）

# jvm - 优化 DVD 中的 JRE 和 JVM 加载时间

> ID：13587300
> 
> 赞同：2
> 
> 时间：2012-11-27T15:18:15.583
> 
> 标签：jvm, loading, java, dvd

我将私有 JRE 与 DVD 中的 jar 程序一起发送。如果我直接从 DVD 运行程序，大约需要 3 分钟。由于光盘速度很慢，将 JRE 库加载到主内存可能需要一些时间。但是，当我关闭程序并重新启动时，它会立即启动，就好像 JRE 安装在本地计算机中一样（不是）。我认为即使在我关闭程序之后，JRE 也会保留在内存中。

3 分钟对用户来说是一个很大的等待时间，有什么办法可以优化代码（这是我唯一可以控制的），它只加载几个库来启动并按需加载其他必要的库。现在可能它正在尝试在显示程序窗口之前从 DVD 加载所有内容，如建议的那样

```
$java.exe -verbose -jar myProgram.jar 
```

是否有任何其他解决方案可以在第一次快速启动程序？目前唯一的解决方法是使用[Launch4J .bmp 启动屏幕](https://stackoverflow.com/questions/13372969/distribute-java-jar-application-in-optical-disk)，但它是非常静态的。

注意：我知道在本地机器上安装 JRE 可以解决问题，但该程序不适合技术用户，如果安装在自定义目录中，我的 Launch4J 找不到它。此外，我的 DVD 受版权保护，因此无法分发该程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:46:02.090

将您的应用程序与私有 JRE 一起打包到一个 EXE 中，该 EXE 将自解压到用户的临时目录中并自动运行您的应用程序。启动时间的改进会让你大吃一惊：

[http://www.excelsior-usa.com/blog/excelsior-jet/java-app-as-a-single-exe/](http://www.excelsior-usa.com/blog/excelsior-jet/java-app-as-a-single-exe/)

（下载示例打包应用程序并将它们刻录到 DVD 上以快速验证我的声明。）

让我强调一下，您只能使用*免费工具*来实现结果，并且*可以选择*使用 Excelsior JET 进一步改进它。有关完整说明，请参阅我们的知识库文章（无论您是否使用 Excelsior JET，其中大部分都适用）：

[**HOWTO：从您的 Java 应用程序创建单个 EXE**](http://www.excelsior-usa.com/kb/000035.html)

**免责声明：**您可能已经猜到了，我为 Excelsior 工作。但同样，这一切都适用于私有 JRE，并且在启动时间改进方面，结果几乎一样好。

# asp.net - asp:textbox中的IE9奇怪行

> ID：13587310
> 
> 赞同：0
> 
> 时间：2012-11-27T15:18:54.397
> 
> 标签：asp.net, html, css

所以我有普通的 HTML 表格，里面有文本框。

```
<asp:TextBox runat="server" ID="txt1" CssClass="edit_mode_textbox" /> 
```

当我降低文本框宽度时，这很好，但是还有其他解决方案吗？这仅在 IE9 和 IE8 中。

谢谢！

![奇怪的线](../Images/de3a231919ea49b4ce1b5ad03704f940.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:05:22.767

`asp:textbox`您的or没有任何问题，您在 CSS`Table`中为此设置的背景图像有问题。`asp:textbox`它可能是重复的，或者您在背景中使用了 2 张图像。除非您粘贴 CSS 类，否则我不确定`edit_mode_textbox`。

我希望这将回答您的问题，如果是，请将其标记为“已回答”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:07:04.533

应用 css 删除一些你不需要的样式：

`box-shadow:0;`,`border:none;`和`borde-radius:0;`

# c# - 为扫雷游戏动态创建游戏板

> ID：13587311
> 
> 赞同：3
> 
> 时间：2012-11-27T15:19:04.407
> 
> 标签：c#, xaml, mvvm

为了学习 C#、XAML，尤其是 MVVM，我开始编写扫雷游戏。我制作的第一个版本没有 MVVM 部分，我使用 C# 代码创建并添加了按钮，而不是通过 MVVM 方式在 XAML 中进行。现在我尝试将 MVVM 模式应用到游戏中。

我制作了一个自己的用户控件，其中包含一个代表雷区部分的按钮。这个控件还有一个 ViewModel 和一个 Model Class 来存储一些状态数据和处理一些命令。在一个测试项目中，我创建了 4 个自己的用户控件，并尝试将它们放在一个网格中，其中按钮形成一个 2 x 2 按钮的正方形。在后面的代码中，按钮被放置在 ObservableCollection 对象中。我假设在这个对象中，按钮的列出和索引如下：

```
Button1
Button2
Button3
Button4 
```

但在演示网格中，我希望按钮显示为

```
Button1 | Button2
--------+--------
Button3 | Button4 
```

问题是：我如何动态地做到这一点？因为在我的测试项目中我使用 4 个按钮进行测试，但在我想使用这个的项目中，按钮的数量可能会根据玩家选择的游戏难度而有所不同。

第二个问题是我如何弄清楚按钮的邻居是什么。因此，如果网格是 4 x 5 包含 20 个按钮。例如，我选择按钮 8，它的相邻按钮编号为 2、3、4、7、9、12、13 和 14。当按钮被列出时，我怎样才能到达这些相邻按钮？

我希望我的问题足够清楚。

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:57:54.900

您可以使用设置为 a或的[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)来显示您的集合。我[这里](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)有一些示例可能会对您有所帮助，因为我认为 MDSN 的示例没有多大帮助。`ItemsPanel``Grid``UniformGrid``ItemsControl`

如果`UniformGrid`您可以将您的`Rows`和`Columns`属性绑定到您`ViewModel`的.`Rows``Columns`

```
<ItemsControl ItemsSource="{Binding MyCollection}">
    <!-- ItemsPanelTemplate -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="{Binding ColumnCount}" 
                         Rows="{Binding RowCount}" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

如果这对您不起作用，您可以使用 a作为`Grid`the`ItemsPanel`并在.`Grid.Row``Grid.Column``ItemContainerStyle`

这将要求您在每个单元格对象上都有属性，`ObservableCollection`以说明该单元格所在的行/列，但是我怀疑您无论如何都需要这些属性来确定单击命令中的相邻单元格之类的内容。

此外，没有内置的方法来绑定你的行数/列数`Grid`，所以我倾向于使用一些[自定义附加属性](http://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/)，这些属性将动态构建网格`RowDefinitions`并`ColumnDefinitions`基于绑定值。

因此，如果您使用 Grid，您的最终结果可能如下所示：

```
<ItemsControl ItemsSource="{Binding Cells}">
    <!-- ItemsPanelTemplate -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <!-- This is assuming you use the attached properties linked above -->
            <Grid local:GridHelpers.RowCount="{Binding Height}"
                  local:GridHelpers.ColumnCount="{Binding Width}" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!-- ItemContainerStyle -->
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Grid.Column" 
                    Value="{Binding ColumnIndex}" />
            <Setter Property="Grid.Row" 
                    Value="{Binding RowIndex}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

模型/视图模型看起来像这样

```
public class GameViewModel
{
    // These should be full properties w/ property change notification
    // but leaving that out for simplicity right now
    public int Height;
    public int Width;
    public ObservableCollection<CellModel> Cells;
}

public class CellModel
{
    // Same thing, full properties w/ property change notification
    public int ColumnIndex;
    public int RowIndex;
    public bool IsVisible;
    public bool IsMine;
    public int NumberAdjacentMines;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T17:37:19.683

最近我解决了扫雷游戏逻辑，用于一种软件开发竞赛。我认为他的游戏的主要问题是找到相邻的地雷和物品周围的相邻空单元。在这两种情况下，我们都必须考虑最多每个单元格（项目）可以被八个项目（单元格）包围。如果我们考虑一个 4x4 网格（矩阵）一个由 X,Y 坐标定义的单元 C，它将被以下单元包围：

```
C1 (X-1,Y-1)
C2 (X,Y-1)
C3 (X+1,Y-1)
C4 (X-1,Y)
C5 (X+1,Y)
C6 (X-1,Y+1)
C7 (X,Y+1)
C8 (X+1,Y+1) 
```

换句话说，我们可以通过平移 x 和 y 轴上的一个点来找到一个项目的相邻单元格。我通过将游戏的呈现（前端）与游戏逻辑（后端）分开来开发了一个类集。
通过使用这种策略，您实际上可以在不同的 .Net 环境中使用它：我们不会“锁定”在 UI 元素或组件周围。
你可以在这里下载我的项目：
[https ://github.com/alchimya/csharp-minesweeper-sdk](https://github.com/alchimya/csharp-minesweeper-sdk)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T15:30:58.727

在我的头顶上：

```
List<Button> myButtons = new List<Button>();
Button myFirstButton = new Button(/*make first button*/);
myButtons.Add(myFirstButton);

void addButtonX ()
{//add new button along x axis
    Button tempButt = new Button();        
    Button lastButt = myButtons[myButtons.count - 1];
    tempButt.posX = lastButt.posX + lastButt.sizeX;
    tempButt.posY = lastButt.posY;
    //other code for buttons
    myButtons.Add(tempButt);
}
void addButtonY ()
{//add new button along y axis
    Button tempButt = new Button();
    Button lastButt = myButtons[myButtons.count - 1];
    tempButt.posX = lastButt.posX;
    tempButt.posY = lastButt.posY + lastButt.sizeY;
    //other code for buttons
    myButtons.Add(tempButt);
} 
```

要跟踪周围的按钮，您需要知道网格有多少按钮宽，例如，如果网格有 20 个按钮宽，则按钮将如下所示：

```
[B-20-1][B-20][B-20+1]
[B-1]   [B]   [B+1]
[B+20-1][B+20][B+20+1] 
```

其中 B = 单击按钮。

当然，您必须检查没有值超出网格（例如，B-20-1 不小于 0，B+20+1 不大于按钮的数量。），但这很容易完毕。

# assembly - 在汇编中反转字符串时遇到问题

> ID：13587313
> 
> 赞同：2
> 
> 时间：2012-11-27T15:19:15.490
> 
> 标签：assembly, x86

我正在尝试反转汇编中的字符串。但是我的代码似乎无法正常工作。我添加了一个换行符以提高可读性。

我正在使用 linux 和 nasm 作为编译器。

我认为如果我获取地址指针的值并将它们切换到正确的位置，字符串最终会被反转然后恢复正常。

这是我的代码：

```
section .data
    hello     db 'Hello world!'
    helloLen  equ $-hello
    derp db '=========',10
    derplen equ $-derp

section .text
    global main

main:
    mov eax,0
    mov ecx,helloLen

    reverse:
        ;move pointer
        mov ebx,hello
        add ebx,eax
        push eax

        ;move pointer
        mov eax,hello
        add eax,ecx
        push ecx

        ;switch bytes
        push ebx
        mov ebx,[ebx]
        mov [eax],ebx
        pop ebx
        mov eax,[eax]
        mov [ebx],eax

        ;print text
        mov eax,4
        mov ebx,1
        mov ecx,hello
        mov edx,helloLen
        int 80h

        ;Print newline
        mov eax,4
        mov ebx,1
        mov ecx,derp
        mov edx,derplen
        int 80h

        ;increment and decrement
        pop ecx
        dec ecx
        pop eax
        inc eax

        cmp eax,helloLen
    jne reverse

    end:
        mov eax,1
        mov ebx,0
        int 80h 
```

这是我得到的输出：

```
Hello world!Hell=====
Hello worldellol=====
Hello worlllo ol=====
Hello worlo w ol=====
Hello woo wow ol=====
Hello wooooow ol=====
Hello wooooow ol=====
Helloooooooow ol=====
Helloooooooow ol=====
Helooowooooow ol=====
Heoow wooooow ol=====
How o wooooow ol===== 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T15:41:14.467

通过交换字符来反转字符串的方法是交换第一个和最后一个，然后是第二个和最后一个，等等。在 C 中，你可以这样写：

```
for (i = 0; i < len/2; ++i)
{
    c = s[i];
    s[i] = s[len-i-1];
    s[len-i-1] = c;
} 
```

在汇编语言中，最简单的方法是设置 ESI 和 EDI 寄存器指向字符串的开头和结尾，然后循环。在每次迭代中，您增加 ESI 并减少 EDI。结果如下所示：

```
mov ecx, helloLen
mov eax, hello
mov esi, eax  ; esi points to start of string
add eax, ecx
mov edi, eax
dec edi       ; edi points to end of string
shr ecx, 1    ; ecx is count (length/2)
jz done       ; if string is 0 or 1 characters long, done
reverseLoop:
mov al, [esi] ; load characters
mov bl, [edi]
mov [esi], bl ; and swap
mov [edi], al
inc esi       ; adjust pointers
dec edi
dec ecx       ; and loop
jnz reverseLoop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T13:54:09.870

当我为面试做这个时，我想出了这个......它有点微软特有，但它与@Jim Mischel 写的大致相同，除了它计算字符串的长度而不是传递它等。

这个函数是赤裸裸的，所以由于没有序言或结语，你必须小心你可以使用哪些寄存器。（除非你使用它们时 push 和 pop。在这个例子中，我没有使用任何需要保留的寄存器）

```
#define USE_STRLEN 0                                    ; Use strlen to find string length?

__declspec(naked) uint8_t* string_rev(uint8_t* s)
{
    __asm
    {
              mov    eax, dword ptr[esp + 4]            ; Get the address of string
              test   eax, eax                           ; Been passed a null pointer?
              jz     lp_3
#if (USE_STRLEN)
              push   eax                                ; Push string address onto stack
              call   strlen
              pop    ecx                                ; Pop our string back off the stack
              xchg   ecx, eax                           ; String length in eax
#else
              or     ecx, 0ffffffffh                    ; Start ecx at -1
        lp_1:
              inc    ecx
              test   byte ptr[eax + ecx], 0ffh          ; Test string byte for zero
              jnz    lp_1                               ; ecx = string length

#endif
              lea    edx, dword ptr[eax + ecx - 1]      ; edx = last character in string
              and    ecx, -2                            ; Is string 1 character or less?
              jz     lp_3
        lp_2:
              mov    cl, byte ptr[edx]
              mov    ch, byte ptr[eax]
              mov    byte ptr[eax], cl
              mov    byte ptr[edx], ch
              inc    eax
              dec    edx
              cmp    edx, eax                           ; Loop whilst one pointer is less
              ja     lp_2                               ; than the other (equiv. len/2)
        lp_3:
              ret                                       ; Reversed string in eax
    }
} 
```

# sqlite - SQLite3 导入 CSV 并排除/跳过标题

> ID：13587314
> 
> 赞同：21
> 
> 时间：2012-11-27T15:19:16.053
> 
> 标签：sqlite, csv, import

我正在尝试将我的数据文件（其中有十几个）放入 SQLite 中的表中。每个文件都有一个标题，明年我会收到几次，所以我想：

1.  避免在收到文件时编辑每个文件以删除标题；
2.  避免依靠 shell 脚本或 Python 来执行此操作。

我定义我的表并导入数据......

```
> .separator "\t"
> .headers on
> CREATE TABLE clinical(
       patid      VARCHAR(20),
       eventdate  CHAR(10),
       sysdate    CHAR(10),
       constype   INT,
       consid     INT,
       medcode    INT,
       staffid    VARCHAR(20),
       textid     INT,
       episode    INT,
       enttype    INT,
       adid           INT);
> .import "Sample_Clinical001.txt" clinical
> SELECT * FROM clinical LIMIT 10;
patid   eventdate   sysdate constype    consid  medcode staffid textid  episode enttype adid
patid   eventdate   sysdate constype    consid  medcode staffid textid  episode enttype adid
471001  30/01/1997  09/03/1997  4   68093   180 0   0   0   20  11484
471001  30/01/1997  09/03/1997  2   68093   60  0   0   0   4   11485 
```

我的第一个想法是删除有问题的行，但这并没有按预期工作，而是删除了整个表......

```
> DELETE FROM clinical WHERE patid = "patid";
> SELECT * FROM clinical LIMIT 3;
> 
```

我是否弄错了测试相等性的语法？我不知道; [文档](http://www.sqlite.org/lang_expr.html)似乎没有区分两者。我以为我会再试一次...

```
> .import "Sample_Clinical001.txt" clinical
> SELECT * FROM clinical LIMIT 3;
patid   eventdate   sysdate constype    consid  medcode staffid textid  episode enttype adid
patid   eventdate   sysdate constype    consid  medcode staffid textid  episode enttype adid
471001  30/01/1997  09/03/1997  4   68093   180 0   0   0   20  11484
471001  30/01/1997  09/03/1997  2   68093   60  0   0   0   4   11485
> DELETE FROM clinical WHERE patid == "patid";
> SELECT * FROM clinical LIMIT 3;
> 
```

我在这里甚至在正确的轨道上还是在做一些愚蠢的事情？

我本来希望在调用时有一个简单的选项来跳过标题行，`.import`因为在文本文件中有标题行是一种相当常见的情况。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T15:27:28.157

`patid`是一个列名。
`"patid"`是一个带引号的列名。
`'patid'`是一个字符串。

条件`WHERE patid = "patid"`将`patid`列中的值与其自身进行比较。

（SQLite 允许带有双引号的字符串与 MySQL 兼容，但仅限于字符串不能与表/列名混淆的情况。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-12-14T22:22:14.133

这对我有用：

```
.read schema.sql
.mode csv
.import --skip 1 artist_t.csv artist_t 
```

或者如果你只有一个文件要导入，你可以这样做：

```
.import --csv --skip 1 artist_t.csv artist_t 
```

[https://sqlite.org/cli.html#importing_csv_files](https://sqlite.org/cli.html#importing_csv_files)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-29T06:38:00.940

对@steven-penny 的另一种回应

您还可以在 sqlite 导入期间使用 bash 命令

```
.mode csv
.import '| tail -n +2 artist_t.csv' artist_t 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-01-10T07:27:10.827

将csv导入新表并将新表的数据复制到原始目标表，这行得通吗？

# android-layout - PagerTabStrip Activity 无法实例化 PagerAdapter 类型

> ID：13587316
> 
> 赞同：2
> 
> 时间：2012-11-27T15:19:18.270
> 
> 标签：android-layout, adapter, swipe

拜托，你能帮我解决一个问题吗？

我正在做一个使用 pagerStrips 的应用程序，我在博客中读到了这段代码：

（简而言之，它为每个 使用不同的片段`pageStrip`，在这种情况下它有 3 个不同的条带，因此它具有三种不同的布局）。

```
package com.tabs;

import java.util.List;
import java.util.Vector;

import android.graphics.Color;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.PagerTabStrip;
import android.support.v4.view.PagerTitleStrip;
import android.support.v4.view.ViewPager;
import android.view.View;

public class Testi extends FragmentActivity {

// list contains fragments to instantiate in the viewpager
  List<Fragment> fragments = new Vector<Fragment>();
  List<String> fragmentTitles = new Vector<String>();
  // page adapter between fragment list and view pager
  private PagerAdapter mPagerAdapter;
  // view pager
  private ViewPager mViewPager;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getSupportFragmentManager();
        // creating fragments and adding to list
        fragments.add(Fragment.instantiate(this, Page1Fragment.class.getName()));
        fragmentTitles.add(Page1Fragment.class.getSimpleName());
        fragments.add(Fragment.instantiate(this, Page2Fragment.class.getName()));
        fragmentTitles.add(Page2Fragment.class.getSimpleName());
        fragments.add(Fragment.instantiate(this, Page3Fragment.class.getName()));
        fragmentTitles.add(Page3Fragment.class.getSimpleName());

        this.mPagerAdapter = new PagerAdapter(super.getSupportFragmentManager(),     fragments, fragmentTitles);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        View pagerStrip = findViewById(R.id.pagerTabStrip);
        if (pagerStrip instanceof PagerTabStrip) {
                PagerTabStrip pagerTabStrip = (PagerTabStrip) pagerStrip;
                pagerTabStrip.setDrawFullUnderline(true);
                pagerTabStrip.setTabIndicatorColorResource(android.R.color.black);
                // pagerTabStrip.setTextColor(color.white);
        } else if (pagerStrip instanceof PagerTitleStrip) {
                PagerTitleStrip pagerTitleStrip = (PagerTitleStrip) pagerStrip;
                pagerTitleStrip.setTextColor(getResources().getColor(android.R.color.white));
        }

        mViewPager.setAdapter(this.mPagerAdapter);
        mViewPager.setCurrentItem(0);
   }

} 
```

但我得到错误：“ `Cannot instantiate the type PagerAdapter`”

```
this.mPagerAdapter = new PagerAdapter(super.getSupportFragmentManager(), fragments, fragmentTitles);. 
```

拜托，你能帮帮我吗？

对不起我的英语不好：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-08T15:43:36.027

`PagerAdapter`是一个`abstract class`——你不能实例化它。您必须创建一个`new class that inherits from PagerAdapter`并使用它。

因此，例如 PagerAdapter 可以像

```
 public abstract class PagerAdapter extends FragmentPagerAdapter {

   // fragments to instantiate in the viewpager
   private List<Fragment> fragments;

   // constructor
   public PagerAdapter(FragmentManager fm,List<Fragment> fragments) {
      super(fm);
      this.fragments = fragments;
   }

   // return access to fragment from position, required override
   @Override
   public Fragment getItem(int position) {
      return this.fragments.get(position);
   }

   // number of fragments in list, required override
   @Override
   public int getCount() {
      return this.fragments.size();
   }

} 
```

注意：在导入`PagerAdapter`中应该是你自己的。不是`import android.support.v4.view.PagerAdapter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T18:41:06.520

PagerAdapter 是您必须实现的抽象类。派生类中的 Impelement 抽象方法或使用可用类之一，即 FragmentPagerAdapter 或 FragmentStatePagerAdapter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T19:31:58.637

除了创建 PagerAdapter 的新实现之外，您还可以使用内置的 FragmentPagerAdapter（为此用例构建），如下所示：

```
 final List<Fragment> fragments = new Vector<>();
        fragments.add(Fragment.instantiate(this, FragmentOne.class.getName()));
        fragments.add(Fragment.instantiate(this, FragmentTwo.class.getName()));

        PagerAdapter adapter = new FragmentPagerAdapter(getSupportFragmentManager()) {
            @Override
            public Fragment getItem(int position) {
                return fragments.get(position);
            }

            @Override
            public int getCount() {
                return fragments.size();
            }
        };
        final ViewPager pager = (ViewPager) findViewById(R.id.viewpager);
        pager.setAdapter(adapter); 
```

# ios - 带有 Popovercontroller 的 BarButtonItem？

> ID：13587317
> 
> 赞同：0
> 
> 时间：2012-11-27T15:19:18.750
> 
> 标签：ios, xcode, uipopovercontroller, uibarbuttonitem

我有一个 BarButtonItem 和一个 Popovercontroller。问题是当我点击按钮时我可以弹出一些东西有人可以帮助我吗？我将发布一些代码我在这一刻。

> -(void) showPop:(id)sender{ NSLog(@"test");

```
UIPopoverController *pop = [[UIPopoverController alloc]  initWithContentViewController:popover];
[pop setDelegate:self];
[pop presentPopoverFromBarButtonItem:button permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    //self.title = NSLocalizedString(@"Nieuws", @"Nieuws");
    /*if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }*/

}
 return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

_loading = NO;

self.title = @"Agenda";

if (_refreshHeaderView == nil) {

    EGORefreshTableHeaderView *view = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.tableView.bounds.size.height, self.view.frame.size.width, self.tableView.bounds.size.height)];
    view.delegate = self;
    [self.tableView addSubview:view];
    _refreshHeaderView = view;
}

//  update the last update date

self.navigationController.navigationBar.tintColor = [UIColor darkGrayColor];
if ([self.navigationController.navigationBar respondsToSelector:@selector( setBackgroundImage:forBarMetrics:)]){
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"Bar-bg.png"] forBarMetrics:UIBarMetricsDefault];
}

[_refreshHeaderView refreshLastUpdatedDate];

self.tableView.contentInset = UIEdgeInsetsMake(66.0f, 0.0f, 0.0f, 0.0f);
[_refreshHeaderView egoRefreshScrollViewDidEndDragging: self.tableView];

//[self loadData];

 //[popButton addTarget:self action:@selector(showPop:) forControlEvents:UIControlEventTouchUpInside];

button = [[UIBarButtonItem alloc] initWithTitle:@"Filter" style:UIBarButtonItemStyleBordered target:self action:@selector(showPop)];
self.navigationItem.leftBarButtonItem = button;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:26:52.853

可能只是一个错字，但是当您创建按钮时，选择器应该是 showPop:（带有冒号）而不是 showPop。

# jquery - 添加 CSS 时出现奇怪的效果

> ID：13587318
> 
> 赞同：2
> 
> 时间：2012-11-27T15:19:21.050
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-sortable

我有一个运行良好的网页，直到我在其周围添加了以下 HTML 和 CSS：

**HTML：**

```
<div class="content">
    <div class="inner_content">
        <!-- old HTML within these 2 div tags worked find before adding these 2 new div tags -->
    </div>
</div> 
```

**CSS：**

```
.content
{
    background:#BBBBBB;
}

.inner_content
{
    width:993px;
    margin:auto;
    padding:10px 0px 0px 10px;
    background:#AAAAAA;
} 
```

**奇怪的效果：**

[您可以在这个jsfiddle](http://jsfiddle.net/RrpGr/2/)中看到“奇怪的效果” 。

如果您单击任何包含 a 的 div `(c)`，您会注意到出现了一个小下拉菜单。如果您随后尝试通过拖动小部件的标题来移动小部件，请注意通过单击出现的下拉列表会发生什么情况`(c)`

在我添加上面的 HTML 和 CSS 之前，这并没有发生。

**截图：**

以下是一些显示问题的屏幕截图：

下拉菜单在这里看起来不错： ![在此处输入图像描述](../Images/3147ad7226b75bc22e543985becbe6d6.png) [点击放大。](https://i.stack.imgur.com/AHHa7.png)

使用旧 HTML 启用下拉菜单移动小部件，下拉小部件正确移动： ![在此处输入图像描述](../Images/53c5eea297246affdc10e0fd11a32607.png) [点击放大。](https://i.stack.imgur.com/TGlLq.png)

在添加了新的 div/css 的情况下启用下拉菜单移动小部件，使用小部件时下拉菜单移动不正确： ![在此处输入图像描述](../Images/d132b0252403734aef0bfe942cd5e656.png) [点击放大。](https://i.stack.imgur.com/qXuXk.png)

**问题：**

有没有办法在不丢失 HTML 和 CSS 添加到页面的效果的情况下纠正它，而不会导致下拉菜单做奇怪的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:30:49.560

当您开始拖动 时`.widget`，jQuery-UI 会`position: absolute;`为该`.widget`元素添加一个样式，该样式会在拖动停止时被删除。这就是导致下拉菜单跳转位置的原因。

要解决此问题，请将`position: relative;`(`position: absolute;`也可以) 添加到样式中`.widget`并重新评估您的定位算法。我会建议：

```
$dd.css({
    top: $nav3.outerHeight()+10,
    right: 10
}); 
```

您可能还需要增加`z-index`of `.dropdown`。

[http://jsfiddle.net/mblase75/RrpGr/14/](http://jsfiddle.net/mblase75/RrpGr/14/)

还有许多其他优化可以完成，但这应该足以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:33:12.297

这是因为您给了一个 div 的填充。

您的下拉菜单相对于元素的位置。当您开始拖动它时，下拉菜单相对于另一个元素的位置。

总的来说，我发现您的 HTML 和 CSS 非常混乱，但这里有一个解决方案：http: [//jsfiddle.net/RrpGr/3/](http://jsfiddle.net/RrpGr/3/)

我从 .widget_header 中删除了溢出：隐藏，因为它的唯一目的是包含浮动元素（对吗？），而是添加了一个伪元素来清除浮动。

```
.widget_header:after {
    content: "";
    display: table;
    clear: both;
} 
```

此外，我从您的 Javascript 中删除了很多行。这些仅用于设置 CSS 属性（或计算值）。

我不明白为什么您不能仅相对于 .widget_header 定位下拉列表（这就是我所做的）？

# perl - perl XML::DOM 中的返回值

> ID：13587319
> 
> 赞同：2
> 
> 时间：2012-11-27T15:19:22.953
> 
> 标签：perl, list

我正在使用 XML::DOM 编写 Perl 代码。

我在 Perl help(XML::DOM::Node) 中找到了如下说明。

```
@list = $node->getChildNodes;        # returns a perl list
$nodelist = $node->getChildNodes;    # returns a NodeList (object reference)
for my $kid ($node->getChildNodes)   # iterate over the children of $node 
```

如果我将它传递给我的函数，如下所示。

```
&myfunction($node->getChildNodes) 
```

我没有得到对列表的引用。

有什么方法可以在不声明临时标量变量的情况下获取引用，如下所示。

```
my $tmp=$node->getChildNodes;
&myfunction($tmp) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:46:46.787

```
myfunction([ $node->getChildNodes ])

myfunction(scalar $node->getChildNodes) 
```

第二个避免创建新数组和新引用，但第一个可能更清晰。

* * *

PS——你为什么告诉 Perl 忽略原型`myfunction`？不要使用`&`.

# jquery - jquery插件不起作用？

> ID：13587322
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:19:27.767
> 
> 标签：jquery, jquery-plugins

jquery 函数“.textAnim”什么都不做 textTyping_animation(); 工作正常，但 .textAnim 不起作用。这是插件代码：

```
function textTyping_animation(text,location,speed){
var progress = 0;
var a = setInterval(function(){
    progress++;
    document.getElementById(location).innerHTML = text.substring(0,progress);
    if(progress == text.length){
        clearInterval(a);
    }
},speed);
};
(function($){
$.fn.textAnim = function(text,speed){
    var progress = 0;
    var a = setInterval(function(){
        progress++;
        $(this).html(text.substring(0,progress));
        if(progress == text.length){
            clearInterval(a);
        }
    },speed);
};
})(jQuery); 
```

这是执行：

```
$(document).ready(function(){
starttext = function()
{
    document.getElementById("textbox").style.display = "block";
    //textTyping_animation("Dit is een dummy text!","textbox_inner",70);
        $("#textbox_inner").textAnim("Dit is een dummy text!",70);
}
}); 
```

html加载代码：

```
<script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript" language="javascript" src="js/jqueryplugins.js" ></script>
<script type="text/javascript" language="javascript" src="js/libraries/gamelibrary.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:44:20.350

问题是`this`传递给的回调函数内部`setInterval()`是窗口，而不是您想要的元素。修改您的代码以保存对函数`this`内部的引用`textAnim()`（它确实引用了正确的元素），然后在传递给的回调中使用它`setInterval()`：

```
(function($){
    $.fn.textAnim = function(text,speed){
        var progress = 0,
            element = this; // this will be the element in the jQuery object
        var a = setInterval(function(){
            progress++;
            $(element).html(text.substring(0,progress));
            if(progress == text.length){
                clearInterval(a);
            }
        },speed);
    };
})(jQuery); 
```

这是一个[更新的演示](http://jsfiddle.net/anthonygrist/sQBbD/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:24:34.430

改变

```
$(document).ready(function(){
starttext = function()
{
    document.getElementById("textbox").style.display = "block";
    //textTyping_animation("Dit is een dummy text!","textbox_inner",70);
        $("#textbox_inner").textAnim("Dit is een dummy text!",70);
}
}); 
```

成为

```
$(document).ready(function(){
starttext = function()
{
    document.getElementById("textbox").style.display = "block";
    //textTyping_animation("Dit is een dummy text!","textbox_inner",70);
        $("#textbox_inner").textAnim("Dit is een dummy text!",70);
}
starttext();
}); 
```

它应该可以工作；

# multithreading - perl 中的线程与 pthread

> ID：13587325
> 
> 赞同：9
> 
> 时间：2012-11-27T15:19:29.300
> 
> 标签：multithreading, perl, pthreads, freebsd

我想知道当我从 freebsd 中的端口源编译 perl 5.16（和其他版本）时，选项 'THREADS' 和 'PTHREAD' 之间有什么不同？

PTHREAD 是 posix 线程吗？（因为-pthread）如果是这样，它是否更喜欢“线程”？（因为它似乎是预先选择的）即使在freebsd上？另一方面，什么是“线程”（内核线程？）？优缺点都有什么？

我可以在一个安装中同时使用两者吗？有道理吗？

据我所知，与 perl 结合使用的东西并不多。

非常感谢吉米

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T20:29:15.780

当然，使用线程就像其他人所描述的那样。

与 pthread 的链接意味着您的 perl 是使用 -pthread 标志构建的。这有一个微妙但重要的影响。这意味着当 perl 启动时，为线程维护状态的 libc 数据被初始化。这意味着如果您的 perl 在线程库上调用 dlopen()，它将正常工作，而不是挂起。

PS。我实际上是编写 PTHREAD 选项并将其提交到端口的人。我实际上发现了一些 perl 模块，它们 dlopen()'d 一些线程库并导致 perl 挂起。我花了一段时间才弄清楚为什么。相信我，你想要 PTHREAD 选项。我实际上正在考虑删除将其关闭的选项。有关更多信息，请参阅 FreeBSD PR 163512 和 163878。我们可能应该将此选项推送到上游，以便 perl 在 FreeBSD 上默认使用此选项。任何可能调用 dlopen() 的东西都应该使用 -pthread 构建。

# java - 如何在 jar 中导出项目的库？

> ID：13587327
> 
> 赞同：1
> 
> 时间：2012-11-27T15:19:29.693
> 
> 标签：java, android, eclipse, jar

我正在制作一个 Android 库来实现通用 OAuth 身份验证（1.0a 和 2.0）。我正在使用路标库来签署 Http 请求。现在，当我尝试将我的项目导出为 .jar 文件（使用 Eclipse，右键单击 Project->Export->Java->Jar 文件）时，jar 已成功创建，但尚未导出路标库。

当我打开 .jar 文件时，我发现这些库存在，但它们对我正在导入它的项目不可见。如何从 jar 中公开这些库？

编辑：一旦我将库导入我的测试应用程序并调用函数`OAuthFactory#authorize()`（处理 OAuth 身份验证的自定义类），我会收到以下编译错误：`The type oauth.signpost.exception.OAuthCommunicationException cannot be resolved. It is indirectly referenced from required .class files`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:14:25.533

这个问题也在这里讨论过。

[如何将库与我的 jar 结合起来？](https://stackoverflow.com/questions/2018257/how-to-combine-library-with-my-jar)

当然，您可以提取 library-jars 并将提取的 class-files 添加到您自己的 jar 中，但是这样您会失去对外部 lib 版本的清晰视图。

最适合我的解决方案是将您的 JAR 文件与包含所有外部 JAR 文件的附加文件夹一起发送，然后在 /META-INF/MANIFEST.MF 中引用它们：

```
Class-Path: lib/kxml2-2.3.0.jar lib/log4j-1.2.16.jar 
```

您可以通过这种方式将 JAR 文件保留在外部，而不必破坏您自己的 JAR 文件。

问候

克里斯托弗

# jqplot - JQPlot 条形图重叠和条形图标签

> ID：13587330
> 
> 赞同：1
> 
> 时间：2012-11-27T15:19:53.640
> 
> 标签：jqplot, bar-chart

我创建了一个水平条形图。我已经在后面的代码中从数据库中生成了条形图的数据。

关于条形图，我有两个问题：

1.  条形图正在显示，但很少有重叠。我试过设置“barPadding”和“barMargin”，但这不起作用。

2.  我想在每个条形图上显示标签，说明每个条形代表什么。这些标签在代码后面从数据库中检索并存储在字符串数组中。那是针对条形图中的每个条形图，我想显示“帐户”、“电信”等标签。这些标签位于从数据库中检索到的数组中的代码后面。

对上述查询的任何输入将不胜感激。

以下是 JQPlot 脚本

```
 <script type="text/javascript">
    function RunTest() {
        $.jqplot.config.enablePlugins = true;       

          <% var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();%>
        var industryName = <%= serializer.Serialize(arrIndustryName) %>
        industryPostings = <%= serializer.Serialize(arrIndustryPostings)%>       

        plot = $.jqplot('dispStats', [industryPostings], {
            captureRightClick: true,
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                showAngel: 135,
                rendererOptions: {
                    barDirection: 'horizontal',
                    barMargin: 200,
                    barPadding: 500,
                    barWidth: 10,
                    highlightMouseDown: true
                },
                pointLabels: { show: true, formatString: '%d' }
            },
            legend: {
                show: true,
                location: 'e',
                placement: 'outside'
            },
             axes: {
                yaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer                    
                }
            }
        });
        return false;
    }
</script>

//asp.net button control to invoke code behind code and run the bar chart script
<asp:Button ID="btnTrends" runat="server" Text="Get Data" OnClick="GetPostingStatistics"    
style="margin-right:10px"/>

<asp:Button ID="test" runat="server" Text="Show Trend" OnClientClick="return RunTest()" /> 
```

以下是代码背后的代码

```
 protected void GetPostingStatistics(object sender, EventArgs e)
    {
        string strFromDate = txtFromDate.Text;
        string strToDate = txtToDate.Text;

        switch (ddlTrend.SelectedValue)
        {
            case "Industries":
                {
                    //Code for Sql Connection

                    sql = "select Value from mpats_FieldValue where FieldID =15";
                    cmd = new SqlCommand(sql, conn);
                    adapter = new SqlDataAdapter(cmd);
                    postingRecords = new DataSet();
                    adapter.Fill(postingRecords);
                    List<string> industryNames = new List<string>();

                    // Code for retrieving labels against each bar from database
                    foreach (DataRow name in postingRecords.Tables[0].Rows)
                    {                        
                        industryNames.Add(name.Field<string>("Value"));
                    }                    

                    int[] numberOfPostings = new int[industryNames.Count];

                    for (int i = 0; i < industryNames.Count; i++)
                    {
                        sql = "select count(p.PostingId) as PostingsCount from 
                               mpats_AdvertPosting p left join mpats_Advert a on p.AdvertID = 
                               a.AdvertID " +
                                "where p.PostingStatusID between 400 and 451 " +
                                "and a.Industry = @Industry";
                                cmd = new SqlCommand(sql, conn);
                                cmd.Parameters.Add("@Industry", industryNames[i]);
                                adapter = new SqlDataAdapter(cmd);
                                postingRecords = new DataSet();
                                adapter.Fill(postingRecords);
                                numberOfPostings[i] = Convert.ToInt32(postingRecords.Tables
                                [0].Rows[0]  
                                ["PostingsCount"]);                                           
                    }

                    arrIndustryName = industryNames.ToArray();
                    arrIndustryPostings =  
                    numberOfPostings;                                        

                }
                conn.Close();

                break;
            }
            default:
            {
                break;
            }
    }        
} 
```

谢谢

什维塔

# jquery-mobile - jquery-mobile 创建动态控制组并应用 jquery-ui css

> ID：13587333
> 
> 赞同：7
> 
> 时间：2012-11-27T15:20:05.793
> 
> 标签：jquery-mobile, fieldset, dynamic-html

这是我的代码：http: [//jsfiddle.net/YKvR3/34/](http://jsfiddle.net/YKvR3/34/)

我将使用我的数组（名称）中的值创建一个控制组。问题是，当我单击加载按钮时，值会添加到控件组中，但 jquery-ui 样式并未像图像中那样加载。控制组未使用 jquery-ui 移动 css 进行样式设置。

```
$("#load").click(function(){
var name=["one","two"];
var html='<fieldset id="listPlayers" data-role="controlgroup"><legend><h1>Choose as many players as youd like to remove:</h1></legend>';
for ( var int = 0; int < 2; int++) {
        html+='<input type="checkbox" name="checkbox-'+int+'a" id="checkbox-'+int+'a" class="custom" /><label for="checkbox-'+int+'a">'+name[int]+'</label>';
    }
    alert('<legend><h3>Choose as many players as you would like to remove:</h3></legend>'+html+'</fieldset');
    $("#list").html(html+'</fieldset');       
//$("#list").page();});​ 
```

![在此处输入图像描述](../Images/eef14f98c1c606508b00e69c449f9853.png) 我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T08:16:17.427

```
$("#list").trigger('create'); 
```

来自：[jqm 文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

> 如果您生成新的标记客户端或通过 Ajax 加载内容并将其注入页面，您可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。这可以在任何元素（甚至是页面 div 本身）上触发，从而为您节省手动初始化每个插件（listview 按钮、选择等）的任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-08T14:34:50.610

如果这篇文章太旧并且我的帖子不符合正确的标准，我会申请，因为这是第一次发帖，所以如果它非常糟糕，请纠正我:-]

但万一其他人遇到它，我在动态数据的显示方式上遇到了类似的问题，我使用上面的 jsfiddles 和评论作为帮助，这就是我的工作，离我的解决方案有点接近，我不' t 有一个按钮来加载页面加载时自动加载的数据。

**在我的 .html 文件中**更新：****

 **```
<div id="members"></div>     
<input type="button" id="load" value="test"/> 
```

**在我的 .js 文件中**更新：****

 **```
$("#load").click(function(){

var name = ["NameOne","NameTwo", "NameThree"];
var fset = '<fieldset data-role="controlgroup" id="members-ctrlgroup"><legend>This is a legend:</legend>';
var labels='';

    for ( var i = 0; i < name.length; i++) {

        labels  += '<input type="checkbox" class="checkbox" id="c'
                + i
                + '"><label for="c'
                + i
                + '" data-iconpos="right">'
                + name[i]
                +'</label>';
    }
    $("#members").html(fset+labels+'</fieldset>');       
    $("#members").trigger("create");
}); 
```

我知道我如何划分“字段”看起来有点奇怪，但我发现在这些情况下让整个 html 字符串正确时会更容易一些。

**更新**为了拥有圆角并将其作为一个*控制组*，您必须采用这种方法。就像以前的海报显示的那样。请注意，带有*复选框的**id*和*标签 for=*如果它们不一样，可能会导致输出错误:-]

 **[小提琴](http://jsfiddle.net/YKvR3/34/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:02:47.417

为了替换您应该使用的内容，`.html();`而不是`.append()`在现有内容之后添加新内容。将内容添加到 jQuery Mobile 页面后，您需要增强内容，例如使用`$("input[type='radio']").checkboxradio();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T17:27:16.573

我正在使用

```
for( var i=0 ; i < html.length ; i++ ){

                        var spline = html[i].split("|");

                        inHTML = inHTML +  " <input type=\"checkbox\" name=\"checkbox-"+i+"a\" id=\"checkbox-"+i+"a\" class=\"custom\" /> <label for=\"checkbox-"+i+"a\">"+ spline[0] +" , "+ spline[2] +"</label> ";

                    }

                    jq("fieldset#myFieldSet").empty();
                    jq("fieldset#myFieldSet" )
                    // Append the new rows to the body
                    .append( inHTML )
                    // Call the refresh method
                    .closest( "fieldset#myFieldSet" )

                    // Trigger if the new injected markup contain links or buttons that need to be enhanced
                    .trigger( "create" ); 
```******

# linux - 在带参数的shellscript中使用awk？

> ID：13587335
> 
> 赞同：1
> 
> 时间：2012-11-27T15:20:11.763
> 
> 标签：linux, bash, awk, sh

因为我没有在谷歌或搜索功能上找到解决方案，我会在这里问。

这是我的代码：

```
Send="last -n 1 $1 | awk '{ print $1 " " $2  }'" 
```

我的问题是，我的 shell 脚本正在使用参数。

当我调用我的脚本时：

```
myScript hello world 
```

然后我的 awk-Command 看起来像

```
awk '{ print hello " " world }' 
```

但是我怎么能避免这种情况呢？有办法吗？

因为这是项目的一部分，所以我无法发布更多代码。;/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:32:12.790

1.  首先将外部“”更改为`$()`： `send=$(last -n 1 $1 | awk '{print $1 " " $2}')`

2.  使用`FS`（字段分隔符）变量，该变量默认为 awk 中的空格，而不是“”作为空格，因此：`send=$(last -n 1 $1 | awk '{print $1 FS $2}')`

# asp.net-mvc - 如何根据 MVC 4 中的另一个表显示表中的值？

> ID：13587336
> 
> 赞同：1
> 
> 时间：2012-11-27T15:20:10.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我有 2 个模型一个客户表和一个产品表。我对 MVC 很陌生，我已经创建了一个模型，并且我有自动生成的控制器和视图以获取详细信息、删除、创建......等等......

我的模型是：

```
[Table("Product")]
public class Product
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ProductId { get; set; }
    public decimal Price { get; set; }
    public int CustomerId { get; set; }
}

[Table("Customer")]
public class Customer
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int CustomerId { get; set; }
    public string Name { get; set; }
} 
```

我的问题是，如何根据客户名称显示产品列表。显然它们是由 CustomerId 加入的，但我如何组合控制器。所以我想根据另一个表中的数据显示一些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:28:43.720

您需要向客户添加一个导航属性。

```
[Table("Customer")]
public class Customer
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int CustomerId { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Product> Products { get; set; }
} 
```

然后，您可以使用它来访问客户的产品。

```
public ActionResult ProductsByCustomer(string id)
{
    // Find the customer by name
    var customer = dbContext.Customer.First(c => c.Name == id);

    // Get the customers products
    var customersProducts = customer.Products;

    // Send products to the View to be rendered
    return View(customersProducts);
} 
```

# java - 将全局配置变量封装为静态？

> ID：13587342
> 
> 赞同：0
> 
> 时间：2012-11-27T15:20:42.343
> 
> 标签：java, jakarta-ee, static

我有几个全局变量，主要不会改变。有时（每隔几个月）我想改变它们。

它们保存在数据库中。

问题是：如果我更改静态变量，其他服务仍然使用旧值。我究竟做错了什么？

```
class Config {
    public static Default DEFAULTS = new Default();
    //several other static defaults 

    public static in DIGIT = DEFAULTS.getDigit();
}

class Default() {
    private int digit = 0;
    //get+set
}

class Service() {
    updateDefaults() {
        Config.DEFAULTS.setDigit(2);
        dao.update(Config.DEFAULTS);
    }
} 
```

问题：其他使用的服务`Config.DIGIT;`仍然使用旧的默认值`digit = 0`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:33:13.127

问题是您正在更新默认的 DEFAULTS 实例中的数字值。但是 Config.DIGITS 的值已经设置并且没有重置，即 DIGITS 的分配没有得到更新，因为您更改了 DEFAULTS.digit 的值。

另外，我假设这段代码中有一些拼写错误，因为 Config.DEFAULTS 在这里是私有的，不能直接更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:32:39.747

的值`Config.DIGIT`被设置为 一次`0`，并且永远不会改变。

您可以：

*   更新`Config.DIGIT`in的值`Service.updateDefaults()`
*   在类中添加一个 getter`Config`来检索`DEFAULTS.getDigit()`

# javascript - “添加行”逻辑未按预期工作

> ID：13587345
> 
> 赞同：0
> 
> 时间：2012-11-27T15:20:46.087
> 
> 标签：javascript, jquery, html

我花了好几天才想出以下内容，现在我意识到它仍然不起作用。我的“添加行”按钮无法正常工作。我错过了什么？

```
<table>
    <tr>
        <th>field</th>
        <th>comparison</th>
        <th>value</th>
    </tr>   
    <tr>
        <td>
            <select style="width:5em;" class="field">
                <option>name</option>
                <option>age</option>
                <option>sex</option>
            </select>
        </td>
        <td>
            <select style="width:5em;" class = "comp">
                <option>equals</option>
                <option>starts with</option>
                <option>not equal to</option>
            </select>
        </td>
        <td><input type="text" class = 'value'></td>
        <td><button id="add">Add row</button></td>
    </tr>
</table> 
```

```
$('#tableSearchMainAccount1 tr').each(function() {
    var td = '';
    // used to skip table header (if there is)
    if ($(this).find("td:first").length > 0) {
        $(this).find('option:selected').each(function() {
            td = td + $(this).text() + ',';
        });
        td = td + $(this).find('input').val();
        filt[ctr] = td;
        ctr += 1;
    }
});
//alert(filt); //alert output like  name,equals,ann,age,equals,11

$('#add').live('click', function() {
    var $lastTr = $('table tr:last');
    console.log($lastTr);
    $lastTr.clone().insertAfter($lastTr);
    // Remove the button from the previous tr, otherwise each row will have it.
    $('#add', $lastTr)
        .replaceWith('<button class="remove_row">Remove row</button>');
});

$('.remove_row').live('click', function() {
    $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:45:39.883

从评论中的讨论来看，您似乎没有引用 jQuery。

![在此处输入图像描述](../Images/0cbf12ebaa41dff559107be3a0f8abca.png)

将以下内容添加到您的`<head></head>`部分：

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script> 
```

还有很多其他的 CDN 为您托管 jQuery，或者您可以自己下载。所有这些细节都可以在[http://jquery.com/download/](http://jquery.com/download/)上找到。

所以你的标记看起来像下面这样：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My jQuery Project</title>
        <script src="jquery-1.8.3.min.js"></script>
        <script src="scripts.js"></script>
    </head>
    <body>
        <table>...</table>
    </body>
</html> 
```

请注意，我还引用了另一个名为“scripts.js”的外部文件。这是您可以放置​​所有 JavaScript 和 jQuery 逻辑的地方。

```
$(document).ready(function(){
    /* Wrapping your code with a document-ready
       block will ensure that the DOM will be
       ready before your code runs
    */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:31:23.080

代替

```
<table> 
```

和

```
 <table id="tableSearchMainAccount1"> 
```

将是我 10 岁的首发。

# javascript - Javascript原型类继承

> ID：13587348
> 
> 赞同：1
> 
> 时间：2012-11-27T15:21:01.313
> 
> 标签：javascript, jquery, class, prototype, underscore.js

我做了很多阅读。我写了很多虚拟代码。当我开始一劳永逸地征服 JavaScript 继承时，我仍然和我一样困惑。也许更是如此。

我非常钦佩`Backbone.js`并且喜欢它对收藏的使用。所以我阅读了源代码并受到启发。但是我一直在继承与扩展对象之间绊倒。

这是，尽我所能推断出一个带有继承的Javascript类，出于这个使用目的，我看不到使用扩展的好处：

```
 function Collection(){
        this._models = [];
    }

    Collection.prototype = {

        models: function() {
            return this._models;
        },

        fetch: function() { 
            console.log("TODO Override fetch method"); 
        },

        add: function(model){
            this._models.push(model);
            $(this).triggerHandler("add", model);
        },
    }

    function Employees(){}

    Employees.prototype = new Collection();

    Employees.prototype.fetch = function(){
        this._models = [new Person("Ron", "male"), new Person("Stevie", "female"),  new Person("David Blunkett", "female")];
    } 
```

`Collection`直接在其中访问 super classes( )`_models`属性感觉有点奇怪，`Employees`但它确实有效。这种方法有什么问题吗？有任何问题或注意事项吗？我不想为此构建一个应用程序来找出它有点...... naff。

**编辑** 它可能值得注意的`Person`是一个`Model`太......

```
function Model(){}

Model.prototype = {
    get: function(attr){
        return this.attr;   
    },
    set: function(attr, value){
        return this[attr] = value;
    }
}

function Person(name, gender){
    this.name = name;
    this.gender = gender;
}

Person.prototype = new Model(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:49:21.743

您创建父类的新实例并将其指定为子类的原型的方法是 Douglas Crockford 所说的 JavaScript 中的“伪经典”继承方法。观看[这个深入的视频](http://www.youtube.com/watch?v=DwYPG6vreJg)，他详细介绍了伪经典、原型和寄生继承方法以及几种变体。（伪经典大约 12 分钟）。

您的方法适用于一个（可能很大）限制，因为您不能以这种模式共享构造函数代码（至少在没有一些额外花哨的情况下不会）。所以如果你这样做：

```
var e = new Employees();
console.log(e.constructor); 
```

您将看到该`Collection`功能，而不是更直观的`Employees`功能。再次，观看该视频，它确实非常清楚地涵盖了整个主题。

# java - 如何获取 EAR 存档版本 (WebLogic)

> ID：13587350
> 
> 赞同：1
> 
> 时间：2012-11-27T15:21:10.377
> 
> 标签：java, weblogic, ear

需要从清单中获取耳朵存档版本（请参阅下面的 WebLogic 控制台屏幕截图）。

![在此处输入图像描述](../Images/03ec1de4fcd2c252684642f1ab5ba0af.png)

可能吗？谢谢。

# .net - 通过BAT文件运行EXE

> ID：13587356
> 
> 赞同：1
> 
> 时间：2012-11-27T15:21:26.913
> 
> 标签：.net, batch-file

我写了这样的BAT文件：

```
@echo off
set scriptDir=%~dp0
set synchronizerDir="C:\GPSM\Synchronizer"
rmdir /s /q %synchronizerDir%
xcopy "%scriptDir%Synchronizer" %synchronizerDir% /c /d /i /y /e
start "%synchronizerDir%\Synchronizer.exe" 
```

在最后一个代码行中，我运行我的 EXE 文件（控制台 .NET 应用程序）。但它不起作用。我得到这样的屏幕：

![在此处输入图像描述](../Images/7d1f8a23a75f0ce41d4589f53f2752bc.png)

但是，如果我手动运行我的 EXE - 它可以工作。我的错在哪里？我如何通过 BAT 运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:29:31.930

引号中的第一个 START 参数假定为窗口标题；如果要省略它，请使用空字符串：

```
start "" "%synchronizerDir%\Synchronizer.exe" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:23:40.937

您可以编写这段代码来关闭命令：-

```
 start /d "path" %synchronizerDir%\Synchronizer.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:26:00.640

通常开始喜欢动作的名称：

开始“运行我的文件”“C:\PathTo\My.exe”

# mysql - Mysql 5.5 表分区用户和好友

> ID：13587357
> 
> 赞同：14
> 
> 时间：2012-11-27T15:21:28.847
> 
> 标签：mysql, partitioning, sharding, database-partitioning

我的数据库中有两个表，现在有数百万行，选择和插入越来越慢。

我正在使用 spring+hibernate+mysql 5.5 并阅读了有关分片以及对表进行分区的信息，并且喜欢对表进行分区的想法，

我目前的 Db 结构就像

```
CREATE TABLE `user` (
  `id` BIGINT(20) NOT NULL,
  `name` VARCHAR(255) DEFAULT NULL,
  `email` VARCHAR(255) DEFAULT NULL,
  `location_id` bigint(20) default NULL,
  `updated_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `FK3DC99772C476E06B` (`location_id`),
  CONSTRAINT `FK3DC99772C476E06B` FOREIGN KEY (`location_id`) REFERENCES `places` (`id`) 
) ENGINE=INNODB DEFAULT CHARSET=utf8

CREATE TABLE `friends` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `user_id` BIGINT(20) DEFAULT NULL,
  `friend_id` BIGINT(20) DEFAULT NULL,
  `updated_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `unique_friend` (`user_id`,`friend_id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8 
```

现在我正在测试如何更好地使用分区，对于用户表，我认为根据使用情况会很好。

```
CREATE TABLE `user_partition` (
  `id` BIGINT(20) NOT NULL,
  `name` VARCHAR(255) DEFAULT NULL,
  `email` VARCHAR(255) DEFAULT NULL,
  `location_id` bigint(20) default NULL,
  `updated_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `FK3DC99772C476E06B` (`location_id`) 
) ENGINE=INNODB DEFAULT CHARSET=utf8
PARTITION BY HASH(id DIV 100000)
PARTITIONS 30; 
```

我创建了一个程序来加载两个表中的数据并检查两个表的性能

```
DELIMITER //
CREATE PROCEDURE load_partition_table()
BEGIN
DECLARE v INT DEFAULT 0;
    WHILE v < 1000000
    DO
    INSERT INTO user_partition (id,NAME,email)
    VALUES (v,CONCAT(v,' name'),CONCAT(v,'@yahoo.com')),
    (v+1,CONCAT(v+1,' name'),CONCAT(v+1,'@yahoo.com')),
    (v+2,CONCAT(v+2,' name'),CONCAT(v+2,'@yahoo.com')),
    (v+3,CONCAT(v+3,' name'),CONCAT(v+3,'@yahoo.com')),
    (v+4,CONCAT(v+4,' name'),CONCAT(v+4,'@yahoo.com')),
    (v+5,CONCAT(v+5,' name'),CONCAT(v+5,'@yahoo.com')),
    (v+6,CONCAT(v+6,' name'),CONCAT(v+6,'@yahoo.com')),
    (v+7,CONCAT(v+7,' name'),CONCAT(v+7,'@yahoo.com')),
    (v+8,CONCAT(v+8,' name'),CONCAT(v+8,'@yahoo.com')),
    (v+9,CONCAT(v+9,' name'),CONCAT(v+9,'@yahoo.com'))
    ;
    SET v = v + 10;
    END WHILE;
    END
    //

CREATE PROCEDURE load_table()
BEGIN
DECLARE v INT DEFAULT 0;
    WHILE v < 1000000
    DO
    INSERT INTO user (id,NAME,email)
    VALUES (v,CONCAT(v,' name'),CONCAT(v,'@yahoo.com')),
    (v+1,CONCAT(v+1,' name'),CONCAT(v+1,'@yahoo.com')),
    (v+2,CONCAT(v+2,' name'),CONCAT(v+2,'@yahoo.com')),
    (v+3,CONCAT(v+3,' name'),CONCAT(v+3,'@yahoo.com')),
    (v+4,CONCAT(v+4,' name'),CONCAT(v+4,'@yahoo.com')),
    (v+5,CONCAT(v+5,' name'),CONCAT(v+5,'@yahoo.com')),
    (v+6,CONCAT(v+6,' name'),CONCAT(v+6,'@yahoo.com')),
    (v+7,CONCAT(v+7,' name'),CONCAT(v+7,'@yahoo.com')),
    (v+8,CONCAT(v+8,' name'),CONCAT(v+8,'@yahoo.com')),
    (v+9,CONCAT(v+9,' name'),CONCAT(v+9,'@yahoo.com'))
    ;
    SET v = v + 10;
    END WHILE;
    END
    // 
```

结果令人惊讶，在非分区表中插入/选择提供了更好的结果。

```
mysql> select count(*) from user_partition;
+----------+
| count(*) |
+----------+
|  1000000 |
+----------+
1 row in set (0.40 sec)

mysql> select count(*) from user;
+----------+
| count(*) |
+----------+
|  1000000 |
+----------+
1 row in set (0.00 sec)

mysql> call load_table();
Query OK, 10 rows affected (20.31 sec)

mysql> call load_partition_table();
Query OK, 10 rows affected (21.22 sec)

mysql> select * from user where id = 999999;
+--------+-------------+------------------+---------------------+
| id     | name        | email            | updated_time        |
+--------+-------------+------------------+---------------------+
| 999999 | 999999 name | 999999@yahoo.com | 2012-11-27 08:06:54 |
+--------+-------------+------------------+---------------------+
1 row in set (0.00 sec)

mysql> select * from user_no_part where id = 999999;
+--------+-------------+------------------+---------------------+
| id     | name        | email            | updated_time        |
+--------+-------------+------------------+---------------------+
| 999999 | 999999 name | 999999@yahoo.com | 2012-11-27 08:03:14 |
+--------+-------------+------------------+---------------------+
1 row in set (0.00 sec) 
```

所以两个问题

1）分区表的最佳方法是什么，`user`以便插入和选择也变得快速并且删除 FOREIGN KEY`location_id`是正确的？我知道只有在基于分区键的基础上访问分区才能很好，在我的情况下，我只想通过 id 读取表。为什么在分区表中插入速度较慢？

`friend`2) 什么是分区表的最佳方法，因为我想在基础上对朋友进行分区，因为我想`user_id`将所有用户朋友放在同一个分区中，并始终使用 user_id 访问它。我应该在friend.id上删除主键还是在主键中添加user_id？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:32:32.717

首先，如果可能，我建议您升级到 5.6.5 或更高版本的 Mysql，以确保您能够正确利用分区并获得最佳性能。由于 GA 问题，这并不总是可能的，但我的经验是 5.5 和 5.6 之间的性能存在差异，并且 5.6 提供了一些其他类型的分区。

1）我的经验是，插入和更新在分区集上更快，只要您在查询中包含您正在分区的列，就可以选择。如果我要求计算所有分区中的所有记录，我会看到响应较慢。这是意料之中的，因为分区像单独的表一样运行，所以如果你有 30 个分区，它就像读取 30 个表而不仅仅是一个表。

您必须在主键中包含要分区的值，并且它必须在记录的生命周期内保持稳定。

2) 我会在主键中包含 user_id 和 id - 假设一旦建立记录，您的朋友表 user_id 和 id 就不会更改（即任何更改都将是删除/插入）。就我而言，它是“多余的”，但值得访问。选择 user_id/id 还是 id/user_id 取决于您最频繁的访问。

最后一点。当我第一次开始将数据分成多个分区时，我尝试创建很多分区，发现只有少数几个似乎达到了最佳状态——6-12 个分区似乎最适合我。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:37:08.337

**1.使用此sql查询选择表并排除所有列，除了id：**

我回答你需要什么：

我建议你删除`FOREIGN KEY`和`PRIMARY KEY`

我知道这很疯狂，但他们可以让计算机知道当前 id、最后一个 id、下一个 id 是什么，这比手动创建 id 需要更长的时间。其他方式您可以`int`通过 java 手动创建 id 。

使用此 sql 查询快速插入：

```
INSERT INTO user (id,NAME,email)
VALUES ('CREATE ID WITH JAVA', 'NAME', 'EMAIL@YAHOO.COM') 
```

我无法决定我的查询是否可以更快地工作......

因为一切都取决于您的计算机性能，请确保您在服务器上使用它，因为服务器可以快速完成所有任务。

对于选择，在配置文件信息所在的页面中，您需要为配置文件 ID 中定义的一个用户设置一行。

如果您只需要一个并且需要多个，请使用 mysql limit ......只需为一行更改这样的限制值：

```
select * from user where id = 999999 limit 1; 
```

对于七行：

```
select * from user where id = 999999 limit 7; 
```

我认为这个查询会比没有查询更快`limit` ，记住 limit 也可以`insert`使用

**2.朋友分区：** 答案是drop主键

没有主键的表没问题

再一次，使用 java 创建 id...java 设计为在界面上更快，并且您的代码包含`while` 并且 java 可以做到这一点。例如，您需要检索您所有的朋友数据...使用此查询执行得更快：

```
select fr.friend_id, usr.* from friends as fr INNER JOIN user as usr 
ON dr.friend_id = usr.id
where fr.user_id = 999999 LIMIT 10; 
```

我认为这已经足够对不起我只能解释mysql而不是java。因为，我不是java专家，但我了解它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:37:53.877

1）如果您总是（或大部分）仅使用 id 来选择数据，那么显然使用此字段作为分区条件的基础。由于它是数字，因此不需要散列函数只需使用[范围分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)。您需要自己找到要创建多少个分区（选择哪些数字作为边界），但正如@TJChambers 之前提到的那样，大约 8-10 应该足够有效。

插入速度较慢，因为您测试错误。您只需在没有任何随机性的情况下一个接一个地插入 1000000 行，唯一的区别是分区表 mysql 需要计算哈希，这是额外的时间。但是在您的情况下，id 是分区条件的基础您将永远不会通过插入获得任何东西，因为所有新行都在表的末尾。

例如，如果您有带有 GPS 本地化的表并按 lat 和 lon 对其进行分区，例如，如果每个分区是不同的大陆，您可能会看到插入的差异。如果您有一个包含一些随机（真实）数据的表并且插入一些非线性的随机值，则会看到差异。

您对分区表的选择较慢，因为您再次测试错误。

@TJChambers 在我之前写过，您的查询需要在所有分区上工作（就像处理许多表一样），所以它延长了时间。尝试使用 where to work with 来自一个分区的数据来查看差异。

例如运行：

```
select count(*) from user_partition where id<99999; 
```

和

```
select count(*) from user where id<99999; 
```

你会看到不同。

2）这个很难。如果没有数据冗余，就无法对其进行分区（至少我不知道），但如果访问时间（选择速度）是最重要的，最好的方法可能是以与用户表相同的方式进行分区（范围在其中一个id）并为每个关系插入2行，它是（a，b）和（b，a）。它会使行数增加一倍，但是如果您将其划分为 4 个以上的部分，那么您将在每个查询中处理更少的记录，并且您将只有一个条件来检查是否需要或。

我用这个模式测试了它

```
CREATE TABLE `test`.`friends` (
`a` INT NOT NULL ,
`b` INT NOT NULL ,
INDEX ( `a` ),
INDEX ( `b` )
) ENGINE = InnoDB;

CREATE TABLE `test`.`friends_part` (
`a` INT NOT NULL ,
`b` INT NOT NULL ,
INDEX ( `a` , `b` )
) ENGINE = InnoDB
PARTITION BY RANGE (a) (
    PARTITION p0 VALUES LESS THAN (1000),
    PARTITION p1 VALUES LESS THAN (2000),
    PARTITION p2 VALUES LESS THAN (3000),
    PARTITION p3 VALUES LESS THAN (4000),
    PARTITION p4 VALUES LESS THAN (5000),
    PARTITION p5 VALUES LESS THAN (6000),
    PARTITION p6 VALUES LESS THAN (7000),
    PARTITION p7 VALUES LESS THAN (8000),
    PARTITION p8 VALUES LESS THAN (9000),
    PARTITION p9 VALUES LESS THAN MAXVALUE
);

delimiter //
DROP procedure IF EXISTS fill_friends//
create procedure fill_friends()
begin
    declare i int default 0;
    declare a int;
    declare b int;
    while i<2000000
    do
    set a = rand()*10000;
    set b = rand()*10000;
    insert into friends values(a,b);
    set i = i + 1;
    end while;
end
//
delimiter ;

delimiter //
DROP procedure IF EXISTS fill_friends_part//
create procedure fill_friends_part()
begin
    insert into friends_part (select a,b from friends);
    insert into friends_part (select b as a, a as b from friends);
end
//
delimiter ; 
```

我运行的查询是：

```
select * from friends where a=317 or b=317; 
```

结果集：475 次：1.43、0.02、0.01

```
select * from friends_part where a=317; 
```

结果集：475 次：0.10、0.00、0.00

```
select * from friends where a=4887 or b=4887; 
```

结果集：483 次：1.33、0.01、0.01

```
select * from friends_part where a=4887; 
```

结果集：483次：0.06、0.01、0.00

我不关心数据的唯一性，但在你的例子中你可以使用唯一索引。我也使用了 InnoDB 引擎，但是如果大多数查询都是 select 并且您不会进行很多写入，MyISAM 会更好。第 2 次和第 3 次运行可能因为缓存没有太大区别，但第 1 次运行有明显差异。它更快，因为我们打破了数据库设计的主要规则之一，但最终证明了这种方法的合理性，因此对于真正的大表来说它可能是一个很好的解决方案。如果您将拥有少于 1M 的记录，我认为您可以在不分区的情况下生存。

# c# - 在 ASP.net MVC3 中如何在 WebGrid 中提供链接

> ID：13587358
> 
> 赞同：1
> 
> 时间：2012-11-27T15:21:29.127
> 
> 标签：c#, asp.net-mvc-3, webgrid

在 ASP.NET MVC3 中，我使用 Webgrid 来填充数据。我有一列，我希望该列中的数据具有操作链接。我的表看起来像这样

```
Roll No | StudentName  |  Class |  Course  |         |
======================================================
110     |  XY          |   5    |   Science| ViewDetails 
```

我想为行中的每个 ViewDetails 提供一个链接，以便移动到所需的操作。我还想将 RollNo 的值传递给操作。如何做到这一点。我尝试过这样的事情。

```
var grid = new WebGrid(source: Model, canPage: true, rowsPerPage: 10);
    grid.Pager(WebGridPagerModes.NextPrevious);
    @grid.GetHtml(tableStyle: "grid", 
        htmlAttributes: new { id = "DataTable" }, 
        headerStyle: "grid-header", 
        footerStyle: "grid-header", 
        alternatingRowStyle: "grid-alternating-row", 
        selectedRowStyle: "grid-selected-row", 
        rowStyle: "grid-row-style", 
        columns: grid.Columns(
           grid.Column(columnName: "RollNo", header: "RollNo"), 
           grid.Column(columnName: "StudentName", header: "StudentName"), 
           grid.Column(columnName: "Class", header: "Class"), 
           grid.Column(columnName: "Course", header: "Course"),
           grid.Column(header: "",
                  format:item => 
                    new HtmlString(Html.ActionLink("ViewDetails","Home")))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:28:07.053

用这种蹩脚的语法来做：

```
grid.Column(
    header: "Link", 
    format: @<text>@Html.ActionLink("ViewDetails", "Home")</text>) 
```

在`<text>`块内，您可以使用如下变量访问当前行`item`：

```
format: @<text>@Html.ActionLink(item.Text, "Home")</text> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T20:16:34.727

你可以只使用 HTML.Raw()

```
grid.Column(header: "",
                  format:item => 
                    HTML.Raw(Html.ActionLink("ViewDetails","Home")))); 
```

# sql-server - 使用 XML 列而不是非规范化？

> ID：13587362
> 
> 赞同：2
> 
> 时间：2012-11-27T15:21:46.773
> 
> 标签：sql-server, xml

我们有一个存储约 5m 联系人的数据库，每个联系人都有多个地址。

数据库被规范化，一个单独的地址表，带有 FK 到联系人，正确索引。~10m 地址。

地址再次参考省和国家表。

由于这是一个一次查看一个联系人的平台，并且不需要对地址属性进行搜索（如果 - 我们使用 Lucene.Net）......将地址信息放入 XML 字段是否有意义联系方式？

```
<Addresses>
    <Address Street="" City="" ... />
    <Address Street="" City="" ... />
</Addresses> 
```

它并不是真正的非规范化 - 但仍然摆脱了 3 个连接（地址/国家/省）

或者问另一种方式.... 5mio 记录和 10mio 记录加入是否会对数据库造成任何压力？（例如，大约 50 个请求同时访问数据库？）

做这样的事情会是过早的优化吗？（当我完全确定我永远不会查询地址属性时......）

我们正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T07:41:54.700

如果您将此列用作 nosql - 只是为了存储值并获取整个数据，则可以使用此解决方案。但是有一些限制：

1.  难以搜索此列中的数据（但可能）
2.  难以修改此列中的数据（但可能）
3.  例如，您无法使用 EF 获取此列中的部分数据（仅使用存储过程）
4.  没有外键（你必须自己支持数据一致性）

您将获得以下好处：

1.  简单存储（一张表包含所有数据）
2.  简单查询

很快，是的，您可以使用此解决方案，因为您说您不会查询部分数据或更改它。

# java - （Java Swing GUI）如何让方法等待按钮输入？

> ID：13587365
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:21:53.263
> 
> 标签：java, swing, user-interface, button, wait

编辑：不要介意我说的一切！！！

我刚刚意识到根本不需要使用循环。设置 GUI 的每个方法都在完成后立即结束，然后整个程序“等待”我按下按钮。我只需要设置方法，因此如有必要，它们可以“循环”。

我不确定我的解释是否正确，但我认为它会起作用。无论如何感谢您的帮助！

再问一个问题，为了安全起见：当我在“main()”方法中设置主窗口时，程序只有在达到我设置的某个条件时才会退出（即玩家死亡），并且不会自行“结束”吗？

* * *

好的，这是我的问题：

我正在开发一个非常原始的 RPG，它使用 Swing 作为它的 GUI。因为这意味着我需要大量的方法来让它工作，并且我需要用少量的按钮来控制一切（为了简单起见），我决定只使用一组按钮，并创建几个不同的 ActionListener . 当调用某个方法时，它通过将必要数量的按钮设置为“可见”、设置它们的文本并为它们分配正确的 ActionListener 来设置 GUI。

这是一个示例（玩家与 NPC 战斗）：

```
public int Combat(NPC e){
    game.setButtons(0, true, "Attack", 1);
    game.setButtons(1, true, "Ability", 1);
    game.setButtons(2, false, "", 1);
    game.setButtons(3, false, "", 1);
    game.setButtons(4, false, "", 1);
    game.setButtons(5, true, "Flee", 5);

    while(e.gethp() > 0 && this.hp > 0){
        if (!game.getProceed())
            break;

    }
    if (e.gethp() <= 0)
        return 1;
    else if(hp <= 0)
        return 2;
    else return 3;
    } 
```

（“设置按钮”：）

```
public void setButtons(int b, boolean v, String s, int act){
    button[b].setVisible(v);
    button[b].setText(s);
    switch(act){
        case 1: button[b].addActionListener(comlist[b]); break;
        case 2: button[b].addActionListener(maplist[b]); break;
        case 3: button[b].addActionListener(loclist[b]); break;
        case 4: button[b].addActionListener(invlist[b]); break;
        case 5: button[b].addActionListener(mainlist[b]); break;
        case 6: button[b].addActionListener(playlist[b]); break;
        case 7: button[b].addActionListener(intlist[b]); break;
        case 8: button[b].addActionListener(proc); break;
    }
} 
```

（“战斗监听器”：）

```
class CombatListener implements ActionListener{

    int but_num;

    public CombatListener(int n){
        but_num = n;
    }
    @Override
    public void actionPerformed(ActionEvent arg0) {
        player.CombatAction(but_num);           
    }

} 
```

（我设置的另一个监听器是“Proceed”监听器。这会将游戏中的布尔“proceed”变量设置为 false。这里的想法是这将是我的“返回”按钮，这将允许我从菜单到前一个，或者在这种情况下：逃离战斗。这就是我在那个while循环中设置它的原因，但我不确定这是正确的方法。）

我不确定我应该为此提供多少代码才能有意义（整个事情非常庞大）。如有必要，我会在这里发布所有内容。

我的问题：我如何确保当我的程序进入“Combat”方法时，当我使用按钮发出命令时它能够停留在那里？这里的复杂之处在于，这些按钮通常会使程序进入一个额外的方法，这也可以以不同的方式设置 GUI，当这些方法完成时，需要“重置”GUI 才能使用以前的方法。

我希望所有这些都是有道理的...... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:36:13.373

在 SWING 应用程序中，您无法控制所谓的“主循环”。

因此，在 SWING 应用程序中，您不会执行“等待用户输入、处理、循环”之类的操作。

SWING 应用程序是您喜欢的“事件驱动”或“状态机”。您必须设置事件处理程序来处理用户输入，然后，给定输入 X 或 Y，您的应用程序必须相应地发展它的状态。

例如，假设一个回合制战斗游戏。在玩家移动期间，应用程序处于“玩家移动状态”，在敌人移动期间，应用程序处于“敌人移动状态”。在“玩家移动状态”中，应用程序将提供交互，然后对用户的选择做出反应，然后过渡到“敌人移动状态”，然后发生其他事情等等。进入“玩家移动状态”之后，在用户输入之前没有方法活动，在读取或写入时没有循环阻塞。应用程序处于“空闲”状态，等待某个处理程序变为活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:36:09.957

如果您的方法是通过按下按钮调用的，则将该事件发送到您的 ActionListener，您应该在其中设置条件以在触发该事件时显示所需的按钮。

```
void actionPerformed(ActionEvent e) {
    btn1.setVisible(true);
    btn2.setVisible(true);
    btn3.setVisible(false);
    }
} 
```

# c# - Caliburn Message.Attach() 抛出“找不到方法的目标”

> ID：13587368
> 
> 赞同：9
> 
> 时间：2012-11-27T15:21:57.240
> 
> 标签：c#, wpf, caliburn.micro, wpf-4.0

我有一个列表框，我为其设置 ItemContainer 样式以包含上下文菜单。这是相同的xaml。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
    ...
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu>
                    <MenuItem Header="Remove Group" cal:Message.Attach="DeleteGroup"/>
                </ContextMenu>
            </Setter.Value>
        </Setter>
    </Style> 
```

我已经在 ViewModel 中编写了目标方法，如下所示。

```
public void DeleteGroup() { //ToDo
    ...
} 
```

ViewModel 被设置为包含 ListBox 的 UserControl 的 DataContext。

上面的代码导致**"no target found for method"**。我不确定为什么这不起作用。我也尝试了以下变体

```
<MenuItem Header="Remove Group" cal:Message.Attach="DeleteGroup"
          cal:Action.Target="{Binding ElementName=UCRelayDispositionView, Path=DataContext}"> 
```

其中 UCRelayDispositionView 是 UserControl 的名称。

为什么上面的代码不起作用？

**编辑：1** 还尝试了以下

```
<MenuItem Header="Remove Group" cal:Message.Attach="DeleteGroup"
          cal:Action.TargetWithoutContext="{Binding ElementName=UCRelayDispositionView, Path=DataContext}"> 
```

还有这个

```
<MenuItem Header="Remove Group" cal:Message.Attach="DeleteGroup"
          cal:Action.TargetWithoutContext="{Binding ElementName=UCRelayDispositionView}"> 
```

**编辑：2** 我尝试在 ItemContainer 上以下列方式使用标签，但它也不起作用。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Tag" Value="{Binding Path=DataContext, ElementName=UCRelayDispositionView}"/>
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu>
                    <MenuItem Header="Remove Group" 
                              cal:Message.Attach="DeleteGroup()" 
                              cal:Action.TargetWithoutContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Self}}"/>                                    
                    </ContextMenu>
            </Setter.Value>
    </Style>
</ListBox.ItemContainerStyle> 
```

**编辑 3：绑定错误**

```
System.Windows.Data Error: 40 : BindingExpression path error: 'PlacementTarget' property not found on 'object' ''MenuItem' (Name='')'. BindingExpression:Path=PlacementTarget.Tag; DataItem='MenuItem' (Name=''); target element is 'MenuItem' (Name=''); target property is 'TargetWithoutContext' (type 'Object')
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=UCRelayDispositionView'. BindingExpression:Path=DataContext; DataItem=null; target element is 'ContextMenu' (Name=''); target property is 'Tag' (type 'Object') 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T08:58:54.923

您的问题在于您试图将目标绑定到同一可视树中不存在的元素，例如您有一个`ContextMenu`项目所在的元素。

要正确获取操作目标，您需要使用`ContextMenu`s`PlacementTarget`属性。

查看关于 XAML 的 SO 的以下答案

[Caliburn Micro 中的 WPF 上下文菜单](https://stackoverflow.com/questions/10126797/wpf-context-menus-in-caliburn-micro)

因此，以下 XAML 应该可以工作：

```
<MenuItem Header="Blah" cal:Message.Attach="SomeMethod()" cal:Action.TargetWithoutContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}"> 
```

这应该寻找`PlacementTarget`on`ContextMenu`并将操作的目标设置为`PlacementTarget.Tag`（应该是`ListBoxItem`）的值。

如果您将`ListBoxItem.Tag`（如您已经完成的）设置`DataContext`为父容器（`ListBox`），您应该没问题

所以标签绑定应该是：

```
<Setter Property="Tag" Value="{Binding Path=DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBox}}"/> 
```

例如，整个事情应该是：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Tag" Value="{Binding Path=DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBox}}"/>
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu cal:Action.TargetWithoutContext="{Binding Path=PlacementTarget.Tag, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}">
                    <MenuItem Header="Remove Group" cal:Message.Attach="DeleteGroup()" />
                </ContextMenu>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-17T18:05:31.567

添加到 Charleh 的答案中，如果您要使用与控件相同的数据上下文，那么您可以绑定`DataContext`而不是`Tag`. 也让它更干净一些。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu cal:Action.TargetWithoutContext="{Binding Path=PlacementTarget.DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}" >
                    <MenuItem Header="Remove Group"
                              cal:Message.Attach="DeleteGroup()" />
                </ContextMenu>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

# vb.net - 限制管理员在 VB.net 2010 中停止服务

> ID：13587369
> 
> 赞同：1
> 
> 时间：2012-11-27T15:21:59.550
> 
> 标签：vb.net, service, admin, administrator

我观察到我的安全软件的某些服务即使从管理员帐户也无法停止。这些服务的星/停止选项被禁用。我想在 vb.net 2010 中编写这种类型的服务，这样任何用户（既不是管理员也不是普通用户）可以停止该服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:33:55.373

您应该在 VS 的服务属性中设置[CanStop = True。](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.canstop.aspx)

> 获取或设置一个值，该值指示服务启动后是否可以停止。

# ajax - 更改 URL 在 IE 中不起作用

> ID：13587372
> 
> 赞同：1
> 
> 时间：2012-11-27T15:22:12.497
> 
> 标签：ajax, html, internet-explorer, jquery

每次使用 AJAX 加载新页面时，我都需要更改 URL 中的目录。现在它在 Chrome 和 FF 中工作，但在 IE 中没有。

```
$('a[data-link="inner"]').live('click', function (e) {
    pageToLoad = $(this).attr('href');
    loadContent(pageToLoad);
    window.history.pushState("","" , pageToLoad);
    e.preventDefault();
}

var loadContent = function (url) {
    $('.content').load(url + '.html');      
}; 
```

有谁知道如何让它在 IE 9,8,7 中工作？

# charts - d3.json 将数据传递给 d3.svg.arc()

> ID：13587376
> 
> 赞同：5
> 
> 时间：2012-11-27T15:22:25.710
> 
> 标签：charts, svg, d3.js

我不是强大的 JS 用户，但我想制作这样的“夜莺图表”：[http](http://windhistory.com/station.html?KHKA) ://windhistory.com/station.html?KHKA 我有那个代码：

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="d3.v2.js"></script>
    <style type="text/css">
        .arc{
            fill: pink;
            stroke: red;
        }
    </style>
  </head>
  <body>
    <div id="chart" class="chart"></div>
    <div id="table"></div>
    <script type="text/javascript">
      var svg = d3.select("#chart").append("svg").attr("width", 900).attr("height", 600);
      var pi = Math.PI;

      d3.json(
          'data.json',
          function(data){
            var arc = d3.svg.arc()
                .innerRadius(50)
                .outerRadius(function(d) { 
                    return (50 + d.value); 
                })
                .startAngle(function(d) { return ((d.time - 1) * 30 * pi / 180); })
                .endAngle(function(d) { return (d.time * 30 * pi / 180 ); });

            var chartContainer = svg.append("g")
                .attr('class', 'some_class')
                .attr("transform", "translate(450, 300)");

            chartContainer.append("path")
                .data(data)
                .attr("d", arc)
                .attr("class", "arc");
          }
      );
    </script>
  </body>
</html> 
```

在 jsfinddle 上：http: [//jsfiddle.net/lmasikl/gZ62Z/](http://jsfiddle.net/lmasikl/gZ62Z/)

我的json：

```
[
    {"label": "January", "value": 150, "time": 1},
    {"label": "February", "value": 65, "time": 2},
    {"label": "March", "value": 50, "time": 3},
    {"label": "April", "value": 75, "time": 4},
    {"label": "May", "value": 150, "time": 5},
    {"label": "June", "value": 65, "time": 6},
    {"label": "July", "value": 50, "time": 7},
    {"label": "August", "value": 75, "time": 8},
    {"label": "September", "value": 65, "time": 9},
    {"label": "October", "value": 50, "time": 10},
    {"label": "November", "value": 75, "time": 11},
    {"label": "December", "value": 150, "time": 12}
] 
```

但是我的脚本只画了一条弧线。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:29:45.830

您可能需要阅读[Thinking With Joins](http://bost.ocks.org/mike/join/)。添加数据驱动元素的 D3 模式是使用 创建选择`selectAll`，然后使用 设置数据`data`，*然后*将元素附加到`.enter()`选择。所以

```
chartContainer.append("path")
    .data(data)
    .attr("d", arc)
    .attr("class", "arc"); 
```

需要是

```
chartContainer.selectAll("path")
    .data(data)
  .enter().append("path")
    .attr("d", arc)
    .attr("class", "arc"); 
```

请参阅更新的小提琴：http: [//jsfiddle.net/gZ62Z/1/](http://jsfiddle.net/gZ62Z/1/)

# sql - SQL 使用变量作为表名

> ID：13587379
> 
> 赞同：1
> 
> 时间：2012-11-27T15:22:42.140
> 
> 标签：sql, oracle

我想将表名设置为变量

为什么：我通过数据库链接从 oracle 数据库转到 mysql 数据库，在 mysql 数据库中我有一些表名，其中包括日期示例：`data_20121126`

这是我的声明：

```
DECLARE
   tbname   VARCHAR2 (200);
BEGIN
   SELECT   ab.teste
     INTO   tbname
     FROM   (SELECT   '"data_'
                      || REPLACE (TO_CHAR (SYSDATE - 1, 'yyyy.mm.dd'),
                                  '.',
                                  '')
                      || '"@myDB'
                         AS teste
               FROM   DUAL) ab;
   SELECT   * FROM tbname;
END; 
```

有人可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:35:52.537

使用静态 SQL 是不可能的（我怀疑在 MySQL 数据库中每天创建一个新表是一种明智的设计方法）。

如果你真的需要这样做，你可以

*   使用动态 SQL（立即执行 / 为...打开游标）
*   每天创建一个同义词，指向当前表，并在查询中使用该同义词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:39:05.767

如果不使用动态 SQL，您将无法做到这一点：

```
DECLARE
   tbname   VARCHAR2 (200) := '"data_' 
                              || TO_CHAR (SYSDATE - 1, 'yyyymmdd')
                              || '"@myDB';
   vMyVariable varchar2(10);
BEGIN
   execute immediate "SELECT MyColumn
                      FROM " || tbname into vMyVariable ;
END; 
```

当然，此版本假定您将单个字段中的单个列返回到变量中。很可能，您真的希望将 ref 游标返回给调用应用程序。

# python - 列出网络驱动器上的文件

> ID：13587382
> 
> 赞同：1
> 
> 时间：2012-11-27T15:22:49.860
> 
> 标签：python

我在 ubuntu 中安装了一个名为“EAGLE”的网络驱动器。我正在尝试列出驱动器根目录上的每个文件。我似乎无法获得正确的路径。驱动器不在场外，位于办公室内。

Python

```
for item in glob.glob('\\\\localhost\\EAGLE\\Data\\*'):
  print item 
```

# android - 如何一次加载一张 SD 卡中的图像？

> ID：13587383
> 
> 赞同：1
> 
> 时间：2012-11-27T15:22:50.657
> 
> 标签：android, image, sd-card

好的，我可以将特定图像从我的 SD 卡加载到 ImageView 中……没问题。但我需要更进一步并添加一个按钮加载下一张图片（移动/复制/删除上一张图片）。我可以添加按钮等，但是如何在不知道文件名的情况下检索“下一个”图像？这是到目前为止的代码。我本来想使用画廊，但它已被弃用，我似乎无法做任何其他工作。谢谢你

```
package com.demo.ShowSDImages;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class AndroidBitmap extends Activity 
  {private final String imageInSD = "/sdcard/er.PNG";

     @Override
     public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Bitmap bitmap = BitmapFactory.decodeFile(imageInSD);
       ImageView myImageView = (ImageView)findViewById(R.id.imageview);
       myImageView.setImageBitmap(bitmap);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:26:03.900

我想你可以在这里试试这个样本。[检查这个链接](http://codinglookseasy.blogspot.in/2012/08/image-slide-show.html)

在这里，我认为下面的代码可以帮助您获取图像。

```
int imageCount = sdcardPath.listFiles().length;
  for (int count = 0; count < imageCount - 1; count++) {
     Bitmap bmp = BitmapFactory.decodeFile(sdcardPath.listFiles()[count]
     .getAbsolutePath()); 
```

在示例中，不使用线程或计时器，而是使用与按钮单击事件中的 showNext() 相同的逻辑

试一下。快乐编码

# java - 增强现实 QualComms Vuforia

> ID：13587385
> 
> 赞同：1
> 
> 时间：2012-11-27T15:22:57.240
> 
> 标签：java, android, eclipse, augmented-reality

我打算为安卓设备编写一个增强现实应用程序。来自 QualComm 的“Vuforia”似乎是一个好的开始，但我有一些他们的网站无法回答的问题。由于支持 Android 2.1 及更高版本，这意味着很多设备可能会使用该 SDK。

但是 - 此代码仅在 ARMv6 或更高版本上运行。有没有关于有多少设备（百分比）有哪个 QualComm 处理器的任何信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:39:50.503

我不确定确切的百分比，但 ARMv6 和 ARMv7 包括最流行的手机。[这](http://forum.xda-developers.com/showthread.php?t=1596800)是 ARMv5、6、7 设备的列表，其中包括大多数知名品牌。

# vba - [AWorrkbookName] 是 VBA 的新语法还是旧语法？

> ID：13587387
> 
> 赞同：2
> 
> 时间：2012-11-27T15:23:11.157
> 
> 标签：vba, excel

我正在维护一段代码，并在 VBA 函数中遇到了这个问题：

```
isIn("Fred", [PeopleList]) 
```

其中 PeopleList 是一个名为 range 的工作簿。我以前从未注意到这种语法，只是想知道它是我错过的还是新的？我应该将范围传递给函数还是可以这样使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:33:40.860

此 [PeopleList] 语法是 Application.Evaluate("PeopleList") 的简写，它将尝试将 PeopleList 评估为公式或命名范围，并将结果作为包含数组的变量返回。这种用法没问题，并且自 Excel 版本 5 起已在 VBA 中可用。

# javascript - 鼠标悬停在 html 上更改图像

> ID：13587391
> 
> 赞同：4
> 
> 时间：2012-11-27T15:23:29.860
> 
> 标签：javascript, html, image, mouseover

我试图让图像在鼠标悬停时改变。这段代码适用于 IE，但不适用于 chrome、opera、safari 等其他浏览器。有什么想法吗？

```
<a href="#" onmouseover="document.myimage1.src='img/login_button_22.jpg';"
onmouseout="document.myimage1.src='img/login_button_11.jpg';">    
<img src="img/login_button_11.jpg" name="myimage1" /> </a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T15:25:40.770

您应该使用 ID，而不是 NAME，并使用`document.getElementById`来选择元素。

IMG 元素，不是 FORM 元素，不应该具有 NAME 属性，但微软设法搞砸了。

```
<a href="#" onmouseover="document.getElementById('myimage1').src='img/login_button_22.jpg';"
onmouseout="document.getElementById('myimage1').src='img/login_button_11.jpg';">    
<img src="img/login_button_11.jpg" id="myimage1" /></a> 
```

`:hover`此外，使用 CSS 背景和声明并完全使用 JavaScript 跳过这样做会更容易和更清晰。

**就是这样：**

HTML：

```
<a class="mybutton" href="#"></a> 
```

CSS（相应地调整尺寸）：

```
.myButton {
     width:100px;
     height:50px;
     display:block;
     background-image:url(../img/login_button_11.jpg);

}

.myButton:hover {
     background-image:url(../img/login_button_22.jpg)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T01:46:49.167

```
<a href="" onMouseOver="document.MyImage.src='http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/ask-icon.png';" onMouseOut="document.MyImage.src='http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/arto-icon.png';">
<img src="http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/arto-icon.png" name="MyImage"> 
```

演示 [http://jsfiddle.net/W6zs5/](http://jsfiddle.net/W6zs5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T20:57:42.377

试试这个：

```
<img src='img/login_button_11.jpg' onmouseover="this.src='img/login_button_22.jpg';" onmouseout="this.src='img/login_button_11.jpg';" /> 
```

# php - 欧洲名称的正则表达式

> ID：13587392
> 
> 赞同：2
> 
> 时间：2012-11-27T15:23:39.550
> 
> 标签：php, regex

我正在寻找欧洲名称的正则表达式。我找到了这个，它适用于 javascript：

```
/^([ \u00c0-\u01ffa-zA-Z'\-])+$/ 
```

我将它转换为 PHP，但它不起作用：

```
/^([ \x{00C0}-\x{01FF}a-zA-Z'\-])+$/ 
```

我的正则表达式必须与这样的名称匹配：

> 让-保罗·勒马尔尚
> 
> Jérôme L'activé

所以字符 a-zA-Z，没有像 @#$%^© 等特殊字符，而是所有重音/欧洲字符，如 éèàôç 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:26:06.737

您需要激活 Unicode 模式才能使这些转义序列起作用：

```
/^([ \x{00C0}-\x{01FF}a-zA-Z'\-])+$/u 
```

请注意，括号不是必需的：

```
/^[ \x{00C0}-\x{01FF}a-zA-Z'\-]+$/u 
```

字符类提供了正则表达式的单个“元素”，可以立即用量词重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:26:35.310

确保使用 utf8 编码，然后`u`在正则表达式上添加修饰符：

```
$regex = '/^([ \x{00C0}-\x{01FF}a-zA-Z\'\-])+$/u'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:29:11.310

这个 PHP 正则表达式应该可以工作：

```
$str = "Jérôme L'activé";
if (preg_match("/^[\s\x{00C0}-\x{01FF}a-z'-]+$/iu", $str, $match))
   print_r($match); 
```

**输出：**

```
Array
(
    [0] => Jérôme L'activé
) 
```

**正则表达式标志**

*   u - 在匹配中启用 Unicode
*   i - 忽略大小写比较

**PS：**`-`在方括号内，如果它位于第一个或最后一个位置，则不需要转义连字符。

# c# - 从该gridview中包含的按钮Click获取GridView的ID

> ID：13587401
> 
> 赞同：1
> 
> 时间：2012-11-27T15:24:07.083
> 
> 标签：c#, asp.net, gridview, textbox

我有一种情况，我在页面 GridView1 - GridView4 上有多个 GridView。所有这些 GridView 在单元格中都有文本框，我想仅在被单击的文本框的列和特定的 GridView 上运行计算函数。

示例：用户单击 GridView3 的第 2 列中的 TextBox 并更改数字值，该特定 TextBox 的 OnTextChange 事件应触发以运行计算并汇总页脚标签中 GridView3 Col2 的所有数字。

我搜索了我发现的所有其他建议，假设您只有 1 个网格，并且您知道计算是在 IE 价格列中完成的预设列，但我不知道用户将在我的任何 4 中编辑哪些列信息网格视图。

我放弃并决定只在整个 GridView 上运行计算代码，而不仅仅是编辑的列，但为此我需要获取包含 TextBox 的 Gridview 的 GridView.ID。广泛的 serches 想出了如何获取发件人项目的 ID，而不是包含发件人的 GridView.ID。

如果有人可以帮助解决这两种情况，请这样做，我将非常感激。

根据下面的对话，我编辑了这篇文章以包含 Tim 提供的编辑后的答案，希望其他人可以从这段代码中学习：

```
//This is working code
protected void textBox_TextChanged(Object sender, EventArgs e)
{
    TextBox txt = (TextBox)sender;
    GridViewRow gvRow = (GridViewRow)txt.NamingContainer;
    GridView Grid = (GridView)gvRow.NamingContainer;

    // if you need the index of the column of the TextBox
    int colIndex = 0;
    for (int i = 0; i < gvRow.Cells.Count; i++)
    {
        if (gvRow.Cells[i] == txt.Parent)
        {
            colIndex = i;
            Msg.Text = "Col: "+colIndex.ToString();
            break;
        }
    }

    int gridNum = 0;
    switch (Grid.ID)
    {
        case "GridView1":
            gridNum = 1;
            break;

        case "GridView2":
            gridNum = 2;
            break;

        case "GridView3":
            gridNum = 3;
            break;

        case "GridView4":
            gridNum = 4;
            break;
    }

    Label ColTotal = (Label)Grid.FooterRow.FindControl("G" + gridNum + "TotalPP" + colIndex);

    double total = 0;
    foreach (GridViewRow row in Grid.Rows)
    {
        TextBox tb = (TextBox)row.FindControl(txt.ID);
        double d;
        if (double.TryParse(tb.Text, out d))
            total += d;
    }
    ColTotal.Text = total.ToString(); 
} 
```

可以看到，根据代码设置的方式，colIndex会帮我找到每一列的页脚标签，并把它的总和放进去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:37:34.973

您可以让所有人`TextBoxes`处理相同的`TextChanged`事件并使用此~~（未经测试的）~~代码：

```
protected void textBox_TextChanged(Object sender, EventArgs e)
{
    TextBox txt = (TextBox) sender;
    GridViewRow gvRow = (GridViewRow) txt.NamingContainer;
    GridView gv = (GridView) gvRow.NamingContainer;
    // if you need the index of the column of the TextBox
    // as commented below you're using .NET 2.0
    int colIndex;
    for (int i = 0; i < gvRow.Cells.Count; i++)
    {
        if (gvRow.Cells[i] == txt.Parent)
        {
            colIndex = i;
            break;
        }
    }

    double total = 0;
    foreach (GridViewRow row in gv.Rows)
    {
        TextBox tb = (TextBox)row.FindControl(txt.ID);
        double d;
        if (double.TryParse(tb.Text, out d))
            total += d;
    }
    var tbFooter = (TextBox) gv.FooterRow.FindControl(txt.ID);
    tbFooter.Text = total.ToString();
} 
```

当然假设所有文本框都在`TemplateFields`并且页脚`TextBox`具有相同的 ID。`AutoPostback`如果您想立即回发，请记住设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:32:33.040

当 TextChanged 运行时，sender 是对该文本框的引用。您可以使用 parent 属性来找出该文本框的父级。如果您将父级链接在一起（例如`txt.Parent.Parent`，您最终会找到 GridViewRow 和 GridView 对象。由于要计算列，您必须先找到控件所在的单元格，找到单元格的索引，然后冒泡到网格，遍历该网格中的每一行，并获取匹配索引中的值。我希望你没有启用分页，因为这会扭曲数字（因为它们并不全部存在）。不一项简单的任务，但有可能。

从性能的角度来看，使用 JQuery 或其他方式的客户端解决方案可以获得更好的性能。

# magento - Magento 2 具有不同产品 url 的商店

> ID：13587409
> 
> 赞同：0
> 
> 时间：2012-11-27T15:24:27.213
> 
> 标签：magento, url-rewriting

这是我的情况，我的公司购买没有品牌的产品并以自己的品牌销售。

我们有 2 个网站和 2 个品牌，我们两个品牌中都有一些产品，但名称不同。

示例：品牌 A 的产品 A 命名为 BrandA Product Premium，而另一个站点上的相同产品命名为 BrandB Product Super。

但是在两个网站上，url-key 是相同的（默认视图中的产品名称）所以在 site1 我有：

[http://www.site1.com/brand-a-product-premium.html](http://www.site1.com/brand-a-product-premium.html)非常好。

在 site2 我有[http://www.site2.com/brand-a-product-premium.html](http://www.site2.com/brand-a-product-premium.html)如果您输入正确的网址：[http](http://www.site2.com/brand-b-product-super.html) ://www.site2.com/brand-b-product-super.html您被重定向到错误的 url。

我可以通过创建自定义 url_rewrite 来纠正这个问题，但是在这种情况下有数千种产品，所以我可能做错了什么，应该有更好的解决方案。

我可以帮忙吗？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:07:34.127

如果您在多商店设置中使用 Magento 的一个实例，您可以覆盖每个商店视图的 url 键以及任何其他产品属性。从编辑产品页面左侧的下拉列表中选择站点 2 的商店视图，然后覆盖该商店视图的必填字段。

我有一个多商店网站，我在其中销售一些产品，但不是全部，使用上述方法可以让我完全控制每个商店视图的同一产品的各个方面。例如自定义名称、描述、图像、类别等。为了确保产品不会通过目录或搜索显示在特定站点上，我通过将可见性设置为无来禁用该产品在该商店视图中。

不要使用 URL 重写选项，这会再次困扰您！

# url - url重写或分页

> ID：13587412
> 
> 赞同：0
> 
> 时间：2012-11-27T15:24:42.413
> 
> 标签：url, session, pagination, rewrite

得到了一些带有 url 重写的页面

看起来像这样：

`http://www.xx.com/de/xx/kontakt#.ULTZZuT8JuI`

甚至没有 url 重写

`http://www.xx.com/index.php?page=2#.ULTZu-T8JuI`

这在我看来不像谷歌会话。有人知道最后那是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T19:36:59.253

我不确定我是否可以完全恢复您问题的上下文，但这些 URL 后缀在我看来就像 ajax 缓存控制标签。（好吧，至少如果我认为它们确实不是会话 ID 是理所当然的。但它们也可以是那样；这完全取决于“xx.com”实际上是什么。:)）

[请参阅Yahoo](http://developer.yahoo.com/performance/rules.html)的此（老化）性能研究页面上的“使 Ajax 可缓存”部分。

# d - 对于 D 结构， opAssign 是必要的/有用的，如果是这样，当

> ID：13587413
> 
> 赞同：4
> 
> 时间：2012-11-27T15:24:47.533
> 
> 标签：d

在 TDPL 7.1.5.1 中讨论了将 Widget w2 分配给 w1 并且作者声明“将 w2 分配给 w1 字段将 w2.array 分配给 w1.array - 数组边界的简单分配，而无需实际复制数组内容。这需要修复，因为我们想要在源 Widget 中创建数组的副本并将该副本分配给目标 Widget。” 从我所见，如果你写了一个 postblit，那么默认的 opAssign 会调用你的 postblit。看来这在书中是不正确的，或者至少是可疑的建议。此外，如果您创建了 postblit，似乎不需要创建 opAssign。这是对问题的正确评估吗？

假设编写更少的代码是好的，那么为结构实现 opAssign 的情况是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:05:03.533

首先想到的是将一些东西分配给一个不是结构类型的结构（比如`double`一个`Angle`结构）

同样，当每个结构都需要唯一的外部资源（纯值语义）时，您可以使用 将`opAssign`内容直接复制到旧资源中，而不是在析构函数中丢弃然后在 postblit 中重新分配

仅当资源的释放/分配比深层副本昂贵得多时，最后一次使用才有用（TBH，我现在真的想不出）

# html - 通过 CSS 控制内边框和外边框

> ID：13587416
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:06.260
> 
> 标签：html, css

我有一张桌子，想控制这种风格的内外边框：border: 3px double #000000

css 会做内边界和外边界，我认为通过使用

```
.border {
 border-bottom: 3px double #000000
 border-top: 3px double #000000
 border-left: 3px double #000000
 border-right: 3px double #000000

} 
```

每个 td 单元有点多，必须有不同的方式，而且可能更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:28:00.603

我不明白您所说的内部边界和外部边界是什么意思？你想要表格和 td 的边框不同吗？如果是这样，试试这个

```
table {
  border: 1px solid #ff0000;
}

table td {
  border: 1px solid #00ff00;
} 
```

如果你想要整个`table`包括相同的边框`td`，有点像`border="1"`试试这个

```
table, td {
   border: 1px solid #000000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:48:39.847

只需将 .border 更改为 .td ，它应该可以正常工作

# c# - 在 LINQ to SQL 中动态构造“或”LIKE 查询

> ID：13587417
> 
> 赞同：7
> 
> 时间：2012-11-27T15:25:06.753
> 
> 标签：c#, linq, linq-to-sql, anonymous

我有一个由匿名对象组成的 LINQ 查询。

在给定的点上，我想通过传入的搜索参数来限制结果，但这可以是一个或多个参数，我想使用这些参数执行“LIKE x OR LIKE y OR LIKE z”。

在代码中，它看起来像这样：

```
reservations = reservations.Where(r =>
  r.GuestLastName.Contains(parameter1) || r.GuestFirstName.Contains(parameter1) || 
  r.GuestLastName.Contains(parameter2) || r.GuestFirstName.Contains(parameter2) || 
  // Parameter 3, 4, 5,..
); 
```

我怎么能动态地构造它，知道它`reservations`是 type 的`IQueryable<'a> (anonymous object)`？我环顾了各种资源，似乎只有在我知道类型时才能找到一种方法，而不是在使用匿名类型时。

重要的是要知道它是Linq to SQL，所以它应该被翻译成SQL查询而不是在内存中过滤......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:32:57.243

有两种可能的方式：

1.  `Expression`正如 Coincoin 所指出的，建立一个
2.  将所有参数放入数组并使用`Any`：

    ```
    var parameters = new [] { parameter1, parameter2, /*...*/ }
    reservations = reservations
        .Where(r => 
            parameters.Any(p => r.GuestFirstName.Contains(p)
                                || r.GuestLastName.Contains(p))); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:57:33.843

我会编写自己的通用扩展方法：

```
public static class CollectionHelper
{
    public static IQueryable Filter<T>(this IQueryable source, string[] properties, string[] values)
    {
        var lambda = CombineLambdas<T>(properties, values);
        var result = typeof (Queryable).GetMethods().First(
            method => method.Name == "Where"
                      && method.IsGenericMethodDefinition)
                                       .MakeGenericMethod(typeof (T))
                                       .Invoke(null, new object[] {source, lambda});
        return (IQueryable<T>) result;
    }

    // combine lambda expressions using OR operator
    private static LambdaExpression CombineLambdas<T>(string[] properties, string[] values)
    {
        var param = Expression.Parameter(typeof (T));
        LambdaExpression prev = null;
        foreach (var value in values)
        {
            foreach (var property in properties)
            {
                LambdaExpression current = GetContainsExpression<T>(property, value);
                if (prev != null)
                {
                    Expression body = Expression.Or(Expression.Invoke(prev, param),
                                                    Expression.Invoke(current, param));
                    prev = Expression.Lambda(body, param);
                }
                prev = prev ?? current;
            }
        }
        return prev;
    }

    // construct expression tree to represent String.Contains
    private static Expression<Func<T, bool>> GetContainsExpression<T>(string propertyName, string propertyValue)
    {
        var parameterExp = Expression.Parameter(typeof (T), "type");
        var propertyExp = Expression.Property(parameterExp, propertyName);
        var method = typeof (string).GetMethod("Contains", new[] {typeof (string)});
        var someValue = Expression.Constant(propertyValue, typeof (string));
        var containsMethodExp = Expression.Call(propertyExp, method, someValue);

        return Expression.Lambda<Func<T, bool>>(containsMethodExp, parameterExp);
    }
} 
```

和用法：

```
var reservations = new List<TheType>()  // sample collection
    {
        new TheType {FirstName = "aa", LastName = "bb"},
        new TheType {FirstName = "cc", LastName = "dd"},
        new TheType {FirstName = "ee", LastName = "ff"}
    }.AsQueryable();

var filtered = reservations
    .Filter<TheType>(new[] {"FirstName", "LastName"}, new[] {"d", "e"});
/* returnes 2 elements:
 * {FirstName = "cc", LastName = "dd"} and {FirstName = "ee", LastName = "ff"} */ 
```

我不知道您想要的通用解决方案 - 如果存在的话，但我希望它可以是可接受的替代方案，通过动态构建所需的过滤器来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:36:59.023

经过一些调试，我找到了解决方案，但是我创建了一个带有多个选择器的 WhereFilter，一个用于 FirstName，一个用于 LastName..

这是扩展方法：

```
public static IQueryable<T> WhereFilter<T>(this IQueryable<T> source, string[] possibleValues, params Expression<Func<T, string>>[] selectors)
{
    List<Expression> expressions = new List<Expression>();

    var param = Expression.Parameter(typeof(T), "p");

    var bodies = new List<MemberExpression>();
    foreach (var s in selectors)
    {
        bodies.Add(Expression.Property(param, ((MemberExpression)s.Body).Member.Name));
    }

    foreach (var v in possibleValues)
    {
        foreach(var b in bodies) {
            expressions.Add(Expression.Call(b, "Contains", null, Expression.Constant(v)));
        }
    }

    var finalExpression = expressions.Aggregate((accumulate, equal) => Expression.Or(accumulate, equal));

    return source.Where(Expression.Lambda<Func<T, bool>>(finalExpression, param));
} 
```

它可以这样使用：

```
reservations = reservations.WhereFilter(
    array_of_allowed_values,
    r => r.GuestFirstName,
    r => r.GuestLastName
); 
```

我检查了查询的跟踪字符串，它实际上转换为 SQL，所以过滤是在数据库中执行的。

# regex - 仅当 URL 以某些单词开头时，htaccess 才会替换空格

> ID：13587418
> 
> 赞同：1
> 
> 时间：2012-11-27T15:25:09.000
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我试图用 + 符号替换所有 %20，但只是当 url 以 /some/dir/ 开头时。例如：

```
http://mydomain.com/some/dir/replace%20here 
```

应该重定向到

```
http://mydomain.com/some/dir/replace+here 
```

但

```
http://mydomain.com/test/dir/replace%20here 
```

不应该取代`%20`

到目前为止，我有：

```
RewriteCond %{REQUEST_URI} ^(/some/dir/)
RewriteRule ^([^\s%20]+)(?:\s|%20)+([^\s%20]+)((?:\s|%20)+.*)$ $1$2+$3 [N,DPI]
RewriteRule ^([^\s%20]+)(?:\s|%20)+(.*)$ /$1+$2 [L,R=301,DPI] 
```

但这仍然取代了 /test/dir 中的 %20

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:50:20.187

您的规则不正确，而且`DPI`并非所有 Apache 版本都支持标志。将您的重写规则更改为：

```
RewriteRule ^(some/dir)/([^\s%20]+)(?:\s|%20)+([^\s%20]+)(.*?)/?$ $1/$2+$3$4 [L,NC,R=301]
RewriteRule ^(some/dir)/([^\s%20]+)(?:\s|%20)+ $1/$2 [L,NC,R=301] 
```

# android - Robolectric 自定义 ShadowSQLiteOpenHelper

> ID：13587419
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:10.147
> 
> 标签：android, unit-testing, testing, robolectric

不久前开始使用 Robolectric，我目前在创建自己的阴影对象时遇到了一些问题。我编写了一些代码来测试我的自定义 SQLiteOpenHelper 类的行为，该类基本上只调用我的数据库表的 onCreate 方法。

```
@RunWith(SharedDatabaseHelperTestRunner.class)
public class SharedDatabaseHelperTest {

    private SharedDatabaseHelper helper;

    @Before
    public void setUp() 
            throws Exception {
        helper = new SharedDatabaseHelper(Robolectric.application);

    @Test
    public void shouldCallOnCreateOfDatabaseTables() 
            throws Exception {
        helper.onCreate(null);

        assertTrue(ShadowTweetTable.onCreateCalled);
    }

    @Test 
    public void shouldCallOnUpdateOfDatabaseTables() 
            throws Exception {
        helper.onUpgrade(null, 0, 0);

        assertTrue(ShadowTweetTable.onUpgradeCalled);
    } 
```

数据库表的影子对象也只设置了一些布尔变量，确保调用 onCreate：

```
@Implements(TweetTable.class)

public class ShadowTweetTable {

    public static boolean onCreateCalled = false;
    public static boolean onUpgradeCalled = false;

    @Implementation
    public static void onCreate(SQLiteDatabase database) {
        onCreateCalled = true;
    }

    @Implementation
    public static void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
        onUpgradeCalled = true;
    } 
```

当我运行测试时，RobolectricTestRunner 告诉我 TweetTable 没有影子字段，尽管我的自定义测试运行程序绑定了我的影子类：

公共类 SharedDatabaseHelperTestRunner 扩展 RobolectricTestRunner {

```
public SharedDatabaseHelperTestRunner(Class<?> testClass)
        throws InitializationError {
    super(testClass);
}

@Override
protected void bindShadowClasses() {
    Robolectric.bindShadowClass(ShadowTweetTable.class);
} 
```

}

# java - 仅解析 DateFormat Java 中的年份

> ID：13587426
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:25.117
> 
> 标签：java, android

我得到返回的解析 JSON 结果，其中包含日期形式的字符串值，例如“27-11-2012”，我将其解析为日期对象。我的代码是：

```
public Date stringToDateReport(String s){
        //Log.d(TAG,    "StringToDateReport here is " + s);
        DateFormat format;
        Date date = null;

        //if(s.matches(""))
         format = new SimpleDateFormat("dd-MMM-yyyy");

        try {

            date = (Date)format.parse(s);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return date;
    } 
```

现在我的问题是，已经实现了一个功能，有时 json 只返回像“2012”这样的年份对象，并按预期给我一个“ParseException: Unparseable date”。我正在考虑使用正则表达式来匹配字符串模式并从那里解析，但不知道该怎么做。有什么想法，而且无论如何都要解析 DateFormat 中的年份吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:29:27.377

我会尝试：

```
public Date stringToDateReport(String s){
    DateFormat format;
    Date date = null;

    format = new SimpleDateFormat("dd-MM-yyyy");

    if(s.length()==4) {
        format = new SimpleDateFormat("yyyy");
    }
    try {
        date = (Date)format.parse(s);
    } catch (ParseException e) {
        //you should do a real logging here
        e.printStackTrace();
    }
    return date;
} 
```

背后的逻辑是检查字符串是否只有 4 长，然后应用不同的格式。在这种情况下，这种简单的方法就足够了，但在其他方法中，可能需要使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:30:54.407

试试这个代码

```
public Date stringToDateReport(String s){
    //Log.d(TAG,    "StringToDateReport here is " + s);
    DateFormat format;
    Date date = null;

    if(s.indexOf("-") < 0){
     format = new SimpleDateFormat("yyyy");
    }else{
     format = new SimpleDateFormat("dd-MMM-yyyy");
    }
    try {

        date = (Date)format.parse(s);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return date;
} 
```

是否有可能在中具有另一种格式`String s`？还是只有这两个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:42:11.540

```
public Date stringToDateReport(String strDate){
    DateFormat formatnew SimpleDateFormat("dd-MM-yyyy");
    Date date = null;

    if(strDate.length()==4) {
        format = new SimpleDateFormat("yyyy");
    }
    try {
        date = (Date)format.parse(strDate);
    } catch (ParseException e) {
        //error parsing date
        e.printStackTrace();
    }
    return date;
} 
```

然后这样称呼它：

```
String strDate = yourJson.getString("date");
Date d = stringToDateReport(strDate); 
```

# java - Java 等效于 VB Request.InputStream

> ID：13587427
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:30.753
> 
> 标签：java, vb.net, web-services

我有一个从 VB 重写为 Java servlet 的 Web 服务。在 Web 服务中，我想提取客户端上的 body 实体集，如下所示：

```
StringEntity stringEntity = new StringEntity(xml, HTTP.UTF_8);
stringEntity.setContentType("application/xml");
httppost.setEntity(stringEntity); 
```

在 VB Web 服务中，我使用以下方法获取此数据：

```
Dim objReader As System.IO.StreamReader
objReader = New System.IO.StreamReader(Request.InputStream)
Dim strXML As String = objReader.ReadToEnd 
```

这很好用。但我正在寻找 Java 中的等价物。

我试过这个：

```
ServletInputStream dataStream = req.getInputStream();
byte[] data = new byte[dataStream.toString().length()];
dataStream.read(data); 
```

但它让我得到的只是一个难以理解的字符串：

```
data = [B@68514fec 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:28:40.197

您需要使用 ByteArrayOutputStream，如下所示：

```
ServletInputStream dataStream = req.getInputStream();
ByteArrayOutputStream baos = new ByteArrayOutputStream();

int r;
byte[] buffer = new byte[1024*1024];

while ((r = dataStream.read(data, 0, buffer.length)) != -1) {
   baos.write(buffer, 0, r);
} 

baos.flush();

byte[] data = baos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:36:51.307

您对打印 java 数组感到困惑。当您打印任何 java 对象时，它会通过隐式调用方法转换为其字符串表示形式`toString()`。Array 也是一个对象，它的`toString()`实现对用户不太友好：它创建包含 的字符串`[`，然后是符号类型定义（`B`在`byte`您的情况下，然后是对数组的内部引用。

如果要打印数组内容，请使用`Arrays.toString(yourArray)`. 此静态方法创建用户友好的数组字符串表示。这就是您在这里所需要的。

还有一个注意事项。您没有正确读取数组。请查看@Petter 的回答 (+1) - 您必须实现一个循环来从流中读取所有字节。

# php - 表达式引擎控制面板中的 preg_replace

> ID：13587429
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:34.857
> 
> 标签：php, jquery, codeigniter, expressionengine

我目前在我的 ExpressionEngine 控制面板中开发了一个表单，将数据发布到我的数据库中，我希望复制其中一个字段，删除所有空格并替换为和 _。这与 ExpressionEngine 频道条目复制标题并使用 _ 而不是空格转换为 URL 标题的方式相同，但我似乎无法弄清楚！我一直在挖掘文档。

这是我目前拥有的，如果这是错误的，请告诉我:)

**复制帐户名称字段。**

```
<script type="text/javascript">
  $(document).ready(function() {
  $('#account_name').keyup(function () {
  $('#account_short_name').val(this.value);
});
});
</script> 
```

**两个表单域**

```
<tr>
  <td><?=form_label('Account Name', 'account_name');?></td>
  <td><?=form_input(array('id'=>'account_name','name'=>'account_name'));?></td>
</tr>

<tr>
  <td><?=form_label('Account Short Name', 'account_short_name');?></td>
  <td><?=form_input(array('id'=>'account_short_name','name'=>'account_short_name'));?>       </td>
</tr> 
```

我有 preg_replace 处理标准文本，但我正在努力让它处理 account_short_name 值。每当我尝试将其应用于输入字段时，它都不起作用。

这是我对标准文本的看法。

```
<?php 
$str = 'this is an example';
$str = preg_replace('/\s+/', '_', $str);
echo $str;
?> 
```

非常感谢本

# android - Android ImageDownloader：在 AsyncTask 中下载图像时添加不确定的进度条

> ID：13587433
> 
> 赞同：0
> 
> 时间：2012-11-27T15:25:50.613
> 
> 标签：android, caching, android-asynctask, android-progressbar

我正在使用 Gilles Debunne 在[Multithreading For Performance](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)中描述的 ImageDownloader ，我想做一个简单的扩展。

我想为`ProgressBar`每个尚未下载的列表项添加一个不确定的。我现在主要通过调用：

```
progressBar.setVisibility(View.VISIBLE);    // in the AsyncTask preExecute()
progressBar.setVisibility(View.INVISIBLE);  // in the AsyncTask postExecute() 
```

具体来说，只要在`postExecute()`...中设置了 imageView 的位图，我就会将进度条标记为不可见，如下所示：

```
if (this == bitmapDownloaderTask) {
    imageView.setImageBitmap(bitmap);
    progBar.setVisibility(View.INVISIBLE);
} 
```

但是我一直无法找到正确的测试来最初使进度条在`preExecute()`. 我尝试了以下各种组合：

```
if (imageView == null)
if (imageView.getDrawingCache() == null)
if (downloadedDrawable == null)
if (downloadedDrawable.getColor() == Color.BLACK) 
```

有人对如何使这项工作提出建议吗？那就是：对于这段代码，确定给定位图是否设置的正确测试是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:19:55.117

为什么在 preExecute 中 imageView 会为空，这意味着你为什么需要测试？好的，在您引用的博客中，它使用了对图像视图的弱引用。你测试它是否为空，就像他在 onPostExecute 中所做的那样：

```
 ImageView imageView = imageViewReference.get();
        if (imageView != null) { 
```

发生这种情况的唯一方法是如果 AsyncTask 未启动但包含图像视图的 Activity 已完成并从屏幕上删除，这是可能的，因此最好对其进行测试。如果它为空，那么您应该立即调用取消。

下载的Drawable（例如位图）不会存在于preExecute 中，因为它还没有被下载。

您的测试：

```
if (this == bitmapDownloaderTask) { 
```

似乎是多余的。什么时候不是bitmapDownloaderTask？

[编辑] 但是为什么你需要测试 imageview 来显示进度条呢？为什么不在 onPreExecute 中显示（如果没有取消）并将其隐藏在 onPostExecute 中？

# vba - 填充电子邮件的正文

> ID：13587434
> 
> 赞同：1
> 
> 时间：2012-11-27T15:25:52.457
> 
> 标签：vba, excel

我正在使用下面的宏从 Excel 发送电子邮件。我已经包含了处理电子邮件正文的“Ron De Bruin”方法（Function RangetoHTML(rng As Range)）。然而，在函数结束时，我得到了一个运行时错误（'438'），它把我带到了子（.html = rangeto html（rngtext））中的以下行。我已经检查了代码中的所有内容，并且我相信我拥有所有必需的“Dim”等。任何帮助将不胜感激。

```
Sub Email_set_up()
Dim valdate As String
Dim oOApp As New Outlook.Application
Dim oOmail As Outlook.MailItem
Dim rng As Range, rngText As Range
Dim strbody As String
Dim SigString As String
Dim Signature As String
Set oOApp = CreateObject("Outlook.Application")
Set oOmail = oOApp.CreateItem(olMailItem)
valdate = Format(Sheets("E-Mail").Cells(4, 2), "mm/dd/yyyy")

SigString = Environ("appdata") & _
 "\Microsoft\Signatures\CK_Sign.txt"

If Dir(SigString) <> "" Then
    Signature = GetBoiler(SigString)
Else
    Signature = ""
End If

Set rngText = Sheets("E-Mail").Range("A18:A29")

Sheets("E-Mail").Activate
    With oOmail
        For Each c In Range(Sheets("E-Mail").Range("B6"), Sheets("E-Mail").Range("B9"))
            .Recipients.Add c
        Next
        .CC = Sheets("E-Mail").Range("B11")
        .Subject = Sheets("E-Mail").Range("B16") & valdate
        .HTML = RangetoHTML(rngText)
        .Display
    End With
End Sub

Function GetBoiler(ByVal sFile As String) As String
Dim fso As Object
Dim ts As Object
Set fso = CreateObject("Scripting.FileSystemObject")
Set ts = fso.GetFile(sFile).OpenAsTextStream(1, -2)
GetBoiler = ts.ReadAll
ts.Close
End Function

Function RangetoHTML(rng As Range)
Dim fso As Object
Dim ts As Object
Dim TempFile As String
Dim TempWB As Workbook

TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

rng.Copy
Set TempWB = Workbooks.Add(1)
With TempWB.Sheets(1)
    .Cells(1).PasteSpecial Paste:=8
    .Cells(1).PasteSpecial xlPasteValues, , False, False
    .Cells(1).PasteSpecial xlPasteFormats, , False, False
    .Cells(1).Select
    Application.CutCopyMode = False
    On Error Resume Next
    .DrawingObjects.Visible = True
    .DrawingObjects.Delete
    On Error GoTo 0
End With

With TempWB.PublishObjects.Add( _
     SourceType:=xlSourceRange, _
     Filename:=TempFile, _
     Sheet:=TempWB.Sheets(1).Name, _
     Source:=TempWB.Sheets(1).UsedRange.Address, _
     HtmlType:=xlHtmlStatic)
    .Publish (True)
End With

Set fso = CreateObject("Scripting.FileSystemObject")
Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
RangetoHTML = ts.ReadAll
ts.Close
RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                      "align=left x:publishsource=")

TempWB.Close savechanges:=False

Kill TempFile

Set ts = Nothing
Set fso = Nothing
Set TempWB = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:25:52.970

我想你想要：

```
.HTMLBody = RangetoHTML(rngText) 
```

我不相信`.HTML`是有效的。

# wpf - WPF 绘图在某些机器上的视觉性能

> ID：13587440
> 
> 赞同：4
> 
> 时间：2012-11-27T15:26:18.000
> 
> 标签：wpf, performance, drawingvisual

我正在开发一个应用程序，它需要以网格的形式绘制大约 70k 个矩形（一个网格 40x250 和一个 250x250）。当时并非所有矩形都在屏幕上可见。

阅读[http://msdn.microsoft.com/en-us/magazine/dd483292.aspx](http://msdn.microsoft.com/en-us/magazine/dd483292.aspx)后，我创建了简单的控件（从 FrameworkElement 继承，部分在下面列出），它使用 DrawingVisual descant 创建一列矩形。

```
// Removing items after collection change
private void RemoveItems(IList oldItems) {
    foreach (var oldItem in oldItems) {
        var visualChild = _visuals.FirstOrDefault(v => v.Data == oldItem);
        if (visualChild != null) {
            _visuals.Remove(visualChild);
            RemoveVisualChild(visualChild);
        }

        _translateTransform.X -= 8;
    }
}

// Adding items after collection change
private void AddItems(IList newItems) {
    foreach (var newItem in newItems) {
        var newArray = (byte[]) newItem;
        var visual = CreateVisual(newArray);
        _visuals.Add(visual);
        AddVisualChild(visual);
        _col++;
    }

}

// Creating visual element
private StripeVisual CreateVisual(byte[] data) {
    var result = new StripeVisual {
        Data = data,
        Transform = _translateTransform
    };

    using (var dc = result.RenderOpen()) {
        for (int i = 0; i < data.Length; i++) {
            dc.DrawRectangle(_brushes[data[i]], _strokePen, new Rect(_col * 8, i * 20, 8, 20));
        }
    }

    return result;
} 
```

所有画笔都被冻结（`Brushes`类成员）并被`_strokePen`冻结。每 200 毫秒将新的垂直条纹添加到集合中。

程序已在 3 台计算机上运行：

1.  笔记本电脑：i7-2670QM、GeForce GT 540M/Intel HD Graphics 3000、4GB RAM、Win7 x64、DirectX11、
2.  PC：Core2Duo E7400、Radeon HD 4800、3GB RAM、Win7 x64、DirectX11、
3.  PC：i3 3,07GHz，Inter HD Graphics，3.3GB RAM，Win7 x86，DirectX11。

问题是，在我的第一台计算机上，程序运行平稳，对 CPU 没有太大影响（使用率在 1-10% 之间）。在第二台和第三台计算机上，程序的性能都是不可接受的：大约 30x100 的网格占用了 50% 的处理器，而且一切运行速度都很慢。即使只有一小部分网格可见，程序也会运行缓慢。

看起来程序正在使用软件渲染（渲染线程正在使用 50% 的处理器），但`RenderCapability.Tier >> 16`返回 2，并`RenderOption.ProcessRenderMode`设置为`Default`. 也没有`[HKCU/Software/Microsoft/Avalon.Graphics]`可以禁用硬件加速的键。

是否可以运行此应用程序顺利列出的计算机？我还能做些什么来最大限度地提高该程序的性能？

# 更新

设置`DrawingVisual.CacheMode = new BitmapCache();`帮助很大。这是否意味着 CPU<=>GPU 通信是瓶颈？

# package - 创建源 Debian 软件包的最简单方法是什么？

> ID：13587451
> 
> 赞同：3
> 
> 时间：2012-11-27T15:27:11.543
> 
> 标签：package, deb, checkinstall

假设你有 hello.c

```
int main() { return 0; } 
```

和 Makefile

```
hello: hello.c
        gcc hello.c -o hello

install: hello
        install -m 755 hello /usr/bin/ 
```

获取二进制包的最快和最简单的方法似乎是使用 checkinstall：

```
fakeroot checkinstall --pkgname hello -y -D --install=no --backup --nodoc --fstrans --pkgversion 0.0.1 make install 
```

如何做类似的事情，但对于源包（将其放入某个源存储库或在其上使用“dpkg-buildpackage”）？

[官方文本](http://www.debian.org/doc/manuals/maint-guide/build.en.html)相当长：orig.tar.gz、changelog、控制文件……有没有类似 checkinstall 的东西，但对于源包？如果它也自动（至少部分地）计算出依赖关系，那么额外的好处应该是。

# uml - 为输入电话号码场景绘制用例 - 初学者

> ID：13587452
> 
> 赞同：0
> 
> 时间：2012-11-27T15:27:20.903
> 
> 标签：uml, use-case, rational-rose

我需要绘制一个期望用户输入电话号码的用例。但用户将获得 2 次尝试输入电话号码的机会。如果两次尝试均失败，则将要求他登录系统。我如何绘制这个系统的用例？

![在此处输入图像描述](../Images/c8e9513d20e74cabb164160449ded5a5.png)

我想展示的内容：

1.）我想表明用户只能尝试 2 次尝试`enter the phone number`，如果两次尝试都错误，他将被要求`Login to the system`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:22:02.450

这不是要在用例图上建模的东西。这种解决方案保留给与您的`Login to the system`用例相对应的较低级别的建模，例如序列或活动图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:59:36.057

绝对同意。使用序列图对行为进行建模。用例应该用于展示与系统的高级交互。就您而言，有两个用例：`Login to the system`和`Enter Phone #`

# delphi - 如何调试在我的应用程序初始化时引发的访问冲突？

> ID：13587458
> 
> 赞同：1
> 
> 时间：2012-11-27T15:27:30.467
> 
> 标签：delphi, delphi-xe2

**我的 Delphi 应用程序甚至在运行之前就**引发了访问冲突错误。我在 line 处设置了一个断点`Application.Initialize`，但我的应用程序没有运行，我仍然得到异常。我怎样才能找到问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T15:36:12.867

[单元初始化部分](http://docwiki.embarcadero.com/RADStudio/XE3/en/Programs_and_Units#The_Initialization_Section)是在执行之前运行的代码`Application.Initialize`。这是`initialization`单元底部部分中的代码。

因此，您似乎在该代码中有错误。很可能它会在您自己的单位之一中。要做的是在调试器下运行并查看调试器在哪个单元中断。确保您的 IDE 配置为在发生访问冲突时中断。

![在此处输入图像描述](../Images/73667bcabe64dc67e1fbb3762afeaf0f.png)

我还建议启用调试 DCU，以防 RTL/VCL 单元之一中出现异常。

# c++ - 如何在 C++ WinAPI（没有 MFC）中将图像本地添加到按钮？

> ID：13587459
> 
> 赞同：0
> 
> 时间：2012-11-27T15:27:32.093
> 
> 标签：c++, winapi, mingw, codeblocks, windows-7-x64

好的，我想将图像**连同文本**一起添加到按钮，而不在我的 RC 文件中创建按钮。这甚至可能吗，还是我**需要**使用 RC 文件来使按钮能够在其中放入图像？我的图像在“resource.h”中是`#define`d，图像在“resources.rc”中声明。“main.cpp”和“resources.rc”都包含“resource.h”头文件。我真的不想使用资源制作按钮，但如果这是制作带有图像**和**文本的按钮的唯一方法，那么我会这样做。我只需要知道如何将图像放入 WinAPI 中的按钮中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:49:39.783

**更新：**

1.  将清单文件添加到您的应用程序，清单文件应命名为`YourApp.exe.manifest`

2.  将此添加到您的清单文件中（有关清单文件的更多信息，请参见[http://msdn.microsoft.com/en-us/library/bb773175%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb773175%28VS.85%29.aspx)）：

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <assemblyIdentity
        version="1.0.0.0"
        processorArchitecture="*"
        name="CompanyName.ProductName.YourApplication"
        type="win32"
    />
    <description>Your application description here.</description>
    <dependency>
        <dependentAssembly>
            <assemblyIdentity
                type="win32"
                name="Microsoft.Windows.Common-Controls"
                version="6.0.0.0"
                processorArchitecture="*"
                publicKeyToken="6595b64144ccf1df"
                language="*"
            />
        </dependentAssembly>
    </dependency>
    </assembly> 
    ```

3.  将您的应用程序与`ComCtl32.lib`

4.  将清单添加到您的应用程序资源文件`CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST "YourApp.exe.manifest"`

5.  `InitCommonControls()`在 WinMain 开头调用

**结束更新**

1.  按钮创建的示例代码（IMAGE + TEXT），由于 LoadBitmap，容易发生内存泄漏：

    ```
    HWND hwnd_button = CreateWindowEx(
            0,
            "BUTTON", //ascii
            "Button text",
            WS_VISIBLE | WS_CHILD | BS_PUSHBUTTON,
            10, 
            145,
            50,
            50,
            hwnd_parent,
            NULL,
            //GetModuleHandle(NULL)
            (HINSTANCE)GetWindowLong(hwnd_parent, GWL_HINSTANCE),
            NULL);

    SendMessage((HWND) m_hWndButton,
            (UINT) BM_SETIMAGE,
            (WPARAM) IMAGE_BITMAP,
            (LPARAM) LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_BITMAP1))); 
    ```

# excel - Excel从搜索值在单元格内的范围中查找单元格

> ID：13587464
> 
> 赞同：6
> 
> 时间：2012-11-27T15:27:51.480
> 
> 标签：excel

我再一次努力在谷歌上找到我的答案，但我确信它一定存在。对不起，如果我遇到新手：我似乎是 Excel ！

我想做的是告诉它搜索一个范围，然后在该范围内查找包含我的搜索功能中的文本的单元格。除了 TRUE 或 >1 （如果匹配，显然）之外，我不需要任何类型的结果。

在这种情况下，我正在搜索一个由年份组成的范围，每个单元格中有一年，并尝试从一个单元格中的年份列表中查找该范围内包含年份的单元格。

基本上我想使用类似于我认为的搜索功能的功能。

```
=SEARCH(text to find, find within text) 
```

但是，我希望它做相反的事情并在源单元格中找到包含某些文本的单元格：

```
=SEARCH(find within text, text to find) 
```

或者，更具体地说

```
=SEARCH("2001,2002,2003,2004,2005", "2003") 
```

如果不使用宏，这可能吗？如果可能的话，我宁愿避免它。所有有问题的单元格都被格式化为文本。

我一直在尝试使用 COUNTIF，但它再次与我需要的相反。

对不起，如果这个问题不清楚。希望有人能帮忙，先谢谢了。

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:37:42.727

我确信有更好的方法，但如果我理解正确，您可以尝试`SUM`结合数组公式（使用 输入`Ctrl+Shift+Enter`）：

```
=IF(SUM(IFERROR(FIND(A1:E1,G1),0))>0, "FOUND", "NOT FOUND") 
```

在这里，`A1:E1`包含个别年份和年份`G1`的单个单元格。这`FIND`在范围内的每个单元格上运行，如果在目标单元格中​​找到匹配项，则返回一个位置，如果没有则返回 0（`IFERROR`是 2007 函数 - 如果您没有 Excel 2007，我们可以重写）。然后你对函数的结果求和`FIND`，如果它大于 0，这意味着你在某个地方找到了匹配项。

![在此处输入图像描述](../Images/8c9c06f2f7a584ee61bc90fcfc04be31.png)

# java - 如何使用自定义组件修复 GridBagConstraint 的锚点？

> ID：13587467
> 
> 赞同：0
> 
> 时间：2012-11-27T15:27:56.303
> 
> 标签：java, swing, custom-component, gridbaglayout

我制作了一个自定义组件，以便我可以显示图像等，但它拒绝正确使用锚点并在顶部居中。有没有人有修复？此外，如果有人能指出我更简单的布局，我可能会切换，但我已经使用了很多 GridBag，所以很难。

一般测试的测试类：

```
package com.launcher.test;

import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

import com.launcher.swing.ModViewer;

public class Test extends JFrame implements ActionListener {
private static final long serialVersionUID = 1L;

public GridBagConstraints gbc = new GridBagConstraints();

public static void main(String[] args) {
    new Test();
}

public Test() {
    super("Super Installer");
    JPanel j = new JPanel(new GridBagLayout());
    addObjs(j);
    this.add(j);
    this.setSize(500, 500);
    this.setVisible(true);
}

public void addObjs(JPanel j) {
    setGBC(0, 0);
    gbc.weighty = 1.0;
    gbc.anchor = GridBagConstraints.NORTHWEST;
    gbc.gridwidth = 2;
    gbc.gridheight = 2;
    gbc.ipadx = 50;
    j.add(new ModViewer(), gbc);
    setGBC(2, 0);
    gbc.fill = GridBagConstraints.HORIZONTAL;
    gbc.anchor = GridBagConstraints.NORTHEAST;
    j.add(new JButton("Add Mod"));
}

private void setGBC(int i, int j) {
    gbc.gridx = i;
    gbc.gridy = j;
}

@Override
public void actionPerformed(ActionEvent e) {
}

} 
```

ModViewer 类，本质上是一个盒子：

```
package com.launcher.swing;

import java.awt.Color;
import java.awt.Dimension;

import javax.swing.BorderFactory;
import javax.swing.JPanel;

import com.launcher.Main;

@SuppressWarnings("serial")
public class ModViewer extends JPanel {

public ModViewer() {
    setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(Color.black),
            BorderFactory.createEmptyBorder(0, 0, 250, 250)));
    setPreferredSize(new Dimension(250, 250));
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:23:12.227

要使定位适用于`GridBagConstraints.NORTHWEST`锚点位置，您需要在 X 轴上设置权重：

```
gbc.weightx = 1.0; 
```

# c# - DropdownList 获取 SelectedValue

> ID：13587474
> 
> 赞同：0
> 
> 时间：2012-11-27T15:28:10.037
> 
> 标签：c#, asp.net

如何绑定下拉列表的选定值并将其分配给@TimeZone，因为当我选择它时，@TimeZone 为空。

这是我的代码：

在我的页面加载中，我有以下代码为下拉列表赋值：

```
ddlTimeZone.DataSource = from p in TimeZoneInfo.GetZones()
                         select new { p.Id };
ddlTimeZone.DataTextField = "Id";
ddlTimeZone.DataValueField = "Id";             
ddlTimeZone.DataBind(); 
```

接下来，在我的 .aspx 文件中，我有以下内容：

```
<EditItemTemplate>
    <asp:DropDownList ID="ddlTimeZone" runat="server">
    </asp:DropDownList>
</EditItemTemplate> 
```

…………

```
 InsertCommand="INSERT INTO [Companies] ([TimeZone]) VALUES ( @TimeZone)"

 <InsertParameters>                 
        <asp:Parameter Name="TimeZone" Type="String" />           
 </InsertParameters> 
```

同样，我需要知道的是如何将下拉列表中所选项目的值分配给@TimeZone，因为当我选择它时，@TimeZone 它为空。

我试过

```
 <asp:DropDownList ID="ddlTimeZone" SelectedValue='<%# Bind("TimeZone") %>' runat="server">
 </asp:DropDownList> 
```

但这给出了以下错误消息：

> 'ddlTimeZone' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:32:47.807

返回`<%# Bind("TimeZone") %>`的值在下拉列表的值中不存在，因为您将其与 ID TimeZoneInfo.GetZones() 绑定。给它一些在数据源中存在的 id。

将此语句放在后面的代码中。

```
ddlTimeZone.SelectedValue = "idtthatexists"; 
```

编辑：假设您在 GetZones() 返回的数据源中有 TimeZone

```
ddlTimeZone.DataSource = from p in TimeZoneInfo.GetZones()
                         select new { p.Id, p.TimeZone };
ddlTimeZone.DataTextField = "Id";
ddlTimeZone.DataValueField = "TimeZone";   
ddlTimeZone.DataBind();
ddlTimeZone.Items.FindByText("SomeTextShowInDropDownItems").Selected = true; 
```

# jquery - 仅适用于 chrome 的 ssl 之外的 Facebook 应用程序中的 Div

> ID：13587476
> 
> 赞同：1
> 
> 时间：2012-11-27T15:28:15.400
> 
> 标签：jquery, facebook, ssl

我在 Facebook 应用程序中使用[http://pagescroller.com/代码。](http://pagescroller.com/)它在除 chrome 之外的所有浏览器中都能完美运行，并且仅在 facebook 选项卡上在线时，导航 div（菜单）未显示。我认为这就是为什么生成菜单的 div 是通过 js 文件生成的，而 chrome 认为它在 ssl 之外。

```
<script type="text/javascript">
$(document).ready(function(){
    // initiate page scroller plugin
    $('#wrapper').pageScroller({
        navigationClass: 'iconNav light'
    });         
}); 
</script> 
```

会不会是错误？离线作为 html 它工作完美。作为 facebook 应用程序的一部分上传，facebook 似乎忽略了脚本，但为什么只在 chrome 中？我已经以多种方式对其进行了测试，但仍然相同。

还有其他方法可以传递此代码吗？您是否曾在 chrome 和 facebook 应用程序中遇到过类似的问题？

# android - SDK 管理器无法安装“java.exe”锁定目录

> ID：13587478
> 
> 赞同：13
> 
> 时间：2012-11-27T15:28:22.430
> 
> 标签：android, android-sdk-tools

我在尝试更新`Android SDK Tools`到`revision 21`from时遇到了一个奇怪的错误`revision 20.0.3`。ADT 插件已正确更新，所以现在我处于静止状态，直到解决。

我列出的初始错误`cmd.exe`是`java.exe`锁定目录，我强制关闭`cmd.exe`并得到了这个：

![](../Images/5cb73dc9c1930d8fe9a32e4140f0e2d7.png)

如果我强制关闭`java.exe`，那么显然我的 SDK 管理器会关闭。

SDK 管理器日志：

![](../Images/84a2d59cbce38b9a57314a0c8509f40a.png)

这是我的工作电脑，所以我真的很想避免因重新启动而导致的任何停机时间，只是好奇是否有人遇到过这个问题并能够解决。

我尝试关闭 Eclispe 并从文件目录运行 SDK Manager，同样的问题，我读到有人在打开目录时遇到过这种情况，所以我关闭了，仍然是同样的问题。任何帮助表示赞赏。

* * *

**Eclipse：**
版本：3.7.2
构建 ID：M20120208-0800

* * *

**更新：**

重新启动没有**解决**。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-03T15:27:34.207

我通过复制我的`\tools`文件夹，命名副本解决了这个问题`\toolsCopy`。然后我`android.bat`从`\toolsCopy`具有管理员权限的文件夹中运行。

出于显而易见的原因，从`\tools`锁定目录的重命名运行 SDK 管理器。`\tools`SMH

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-08T12:05:51.273

经过长时间的搜索，它对我有用

1.  关闭 sdk manager 和 eclipse。

2.  转到您存储 adt 的文件夹。

3.  在该 adt 文件夹中，您会找到一个名为 tools 的文件夹。

4.  复制该文件夹的内容并将其粘贴到名为 copytools 的文件夹中。

5.  现在转到命令提示符并转到 copytools 的位置。

6.  然后执行命令 android.bat sdk manager 将启动。

7.  现在更新您想要的所有插件。它将更新您的原始文件夹。

8.  更新后删除副本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-03T16:56:19.103

我通过进入 android-sdk\temp 文件夹并提取`tools_r22.3-windows.zip`并重命名当前`tools`文件夹`tools123`并将提取的工具文件夹移动到`\android-sdk\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-09T18:18:20.270

如果使用安卓捆绑包

关闭 SDK 管理器和 Eclipse。从捆绑包中的 SDK 文件夹转到工具。将 tools 文件夹的所有文件复制到另一个名为 toolscopy 的文件夹中。现在在 cmd 中导航到 SDK 文件夹，然后到 toolscopy 并执行“android.bat”。现在 SDK 管理器将执行，您可以更新所有更新。您可以删除 toolscopy 文件夹，因为 tools 文件夹会自动更新：D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T10:04:31.453

我以一种非常简单的方式解决了它，对我来说效果很好。

1.  关闭eclipse.exe
2.  转到包含 android-sdks 的目录
3.  运行 SDK Manager.exe
4.  安装所需的软件包
5.  关闭 sdk Manager.exe
6.  开始eclipse，你就快到了
7.  通过访问 Eclipse 中的帮助菜单然后检查更新来更新您的 ADT 插件
8.  如果它没有（在我的情况下它没有手动删除旧版本的插件）工作并从[https://dl-ssl.google.com/android/eclipse/再次安装它们](https://dl-ssl.google.com/android/eclipse/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-06T12:26:15.580

我遇到了同样的问题。然后转到临时文件夹提取“tools_r24.0.2-windows.zip”从提取的文件夹中复制“工具”文件夹，然后将其粘贴到“sdk”文件夹中。（或覆盖工具文件夹）:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-11T08:02:02.220

解决该问题的步骤

1.  关闭 Eclipse

2.运行SDK管理器

3.现在更新包

这个对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-06T04:19:05.307

关闭 eclipse 并再次尝试它会工作..（关闭 eclipse Android SDK Manager 窗口后不会关闭）

或者，

只需转到任务管理器并结束eclipse进程并重试它就会工作..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-22T07:59:34.317

*   关闭命令行和资源管理器（阻止 java.exe）
*   从临时文件夹（android-sdk\temp）中剪切所有文件和文件夹
*   将其粘贴到其他文件夹中，例如 (temp_old)
*   运行 cmd.exe（以管理员身份运行）并再次启动该过程。
*   如果仍然不起作用，请手动将工具目录复制到临时文件夹并检查。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-18T14:42:31.550

100% 工作...

1.  关闭eclipse.exe
2.  转到包含 android-sdks 的目录
3.  运行 SDK Manager.exe
4.  安装所需的软件包
5.  关闭 sdk Manager.exe
6.  开始eclipse，你就快到了
7.  通过访问 Eclipse 中的帮助菜单然后检查更新来更新您的 ADT 插件
8.  重启你的电脑。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-10-20T12:57:20.673

如果您在执行时使用 eclipse 安装 SDK，则会发生此错误。为了解决这个问题，您应该停止 eclipse 应用程序。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-04-25T01:50:05.413

我通过emptyloop使用“解锁器”来解锁目录，而无需使用任务管理器杀死java.exe来解决这个问题。

# installshield - 是否可以从 InstallShield Express 自定义操作运行 MSI？

> ID：13587479
> 
> 赞同：0
> 
> 时间：2012-11-27T15:28:23.503
> 
> 标签：installshield, localdb

我正在使用 InstallShield Express Spring 2012 SP1。我想从自定义操作中运行 SQLLocalDb_x64.MSI。

是否可以通过 InstallShield Express 中的自定义操作运行 MSI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:16:12.293

我完全同意波格丹的观点，但有一个窍门。在 InstallFinalize 阶段之后，您可以在安装结束时从自定义操作中运行 msi。您可以使用以下 CA：
`InstallIntStd 226 SystemFolder msiexec.exe /passive /i "[SOURCEDIR]YourSetup.msi"`
其中：
`InstallIntStd`自定义操作的名称；
`226`类型：不等待结果的异步执行EXE；
`SystemFolder`msiexec 所在的目录；
`msiexec.exe /passive /i "[SOURCEDIR]YourSetup.msi"`启动字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:13:50.027

作为一般规则，您不能在另一个主 MSI 包中将 MSI 作为安装执行序列的自定义操作运行。Windows Installer 不允许同时运行两个 MSI 程序包，因此您将收到一条错误消息。

从另一个 MSI 有条件地启动 MSI 的标准方法是将其嵌入为链式包。

不幸的是我不使用InstallShield Express，所以我不知道它是否支持链接包，通常这个功能在商业版中可用。

# android - 应用程序被杀死后重新创建整个活动堆栈

> ID：13587482
> 
> 赞同：1
> 
> 时间：2012-11-27T15:28:29.947
> 
> 标签：android, android-activity, android-lifecycle

在我的应用程序中，我有一堆以下活动：

```
A -> B -> C 
```

每个活动都有一个作为内部类的广播接收器，该接收器`IntentFilter`在其 at注册`onCreate()`，并在 at 注销`onDestroy()`。

这种模式在正常情况下效果很好，但在应用程序被终止时会失败。当应用程序被杀死后重新打开时，只有最后一个活动（`C`在上面的示例中）被重新打开，并且它的广播接收器将是唯一注册的。如果我终止该`C`活动，则该`B`活动将被重新创建（通过它的`onCreate()`），以此类推`A`。

一旦应用程序在被杀死后重新打开，是否可以重新创建整个活动堆栈，而不是最顶层的活动？

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:42:43.223

对此的解决方案可能是扩展应用程序上下文，并在那里注册您的接收器。然后，无论启动哪个活动，您的应用程序都会注册其 IntentFilter。

# git - 发出 git clean -f 时我的所有文件都被删除了吗？

> ID：13587485
> 
> 赞同：1
> 
> 时间：2012-11-27T15:28:40.993
> 
> 标签：git, git-clean

我不小心发出：

```
git clean -f 
```

在我最近初始化的目录上。我注意到该目录中的所有文本文件现在都消失了。

根据研究，我知道这是不可逆转的。真的吗？还是还有希望？

顺便说一句，我使用的是 Mac，你们可能会给我一个关于 Mac 可用的免费数据恢复软件的想法。

这是一个愚蠢的 Git 新手错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:50:57.420

是的，你的数据不见了。

`git clean -f`删除所有未跟踪的文件。由于您刚刚`init`对您的 repo 进行了 ialized，因此您的所有文件都没有被跟踪，所以它们都消失了。这就是他们让你使用`-f`标志的原因：避免意外的数据丢失。

如果您使用的是 Mac，那么也许您已经激活了 Time Machine？那应该对你有帮助。

# razor - 使用多条路线的本地化 ViewEngines

> ID：13587491
> 
> 赞同：0
> 
> 时间：2012-11-27T15:28:56.693
> 
> 标签：razor, localization, asp.net-mvc-4, locale, viewengine

我正在尝试制作一个简单的多语言网站。覆盖 FindView 以根据语言获取文件很容易，我的问题出在路由部分。

我想做的是：（有一个有 2 种语言的网站 - pt-br 和 en-us，让缩写为 onlu pt 和 en - 默认为 PT）

用户类型 www.mysite.com -> 将在用户标头请求中找到语言，如果用户没有任何语言，他将被重定向到默认 PT，因此最终结果将是 www.mysite.com在葡萄牙语。如果他有 en，他将被重定向到 www.mysite.com/en/ ，结果将是英文视图。

如果用户键入 www.mysite.com/pt/ -> 我会检查他是否想要默认值，并会重定向到葡萄牙语的 www.mysite.com。

我做了一个自定义引擎来根据语言获得正确的视图。但由于路由问题，它不能 100% 工作。

就我而言，我正在尝试路由

```
routes.MapRoute(
                "Localization", // Route name
                "{lang}/{controller}/{action}", // URL with parameters
                new { lang = "pt", controller = "Home", action = "Index" } //defaults
); 
```

但是这样，当有人键入 /pt/ 时，将不会重定向到站点的根目录。

路由的另一个问题是我不想让任何人输入控制器名称，我只想要操作，我的网站只有一个 Home 控制器，操作很少。

另一个问题是我想要一个不同的操作名称，例如英语的 CONTACT 和葡萄牙语的 CONTATO，它们应该出现在地址栏上，例如 www.mysite.com/Contato 或 www.mysite.com/en/Contact

Mu Engine 我基于此解决方案[http://www.counity.at/blog/2012/asp-net-mvc3-localization-using-culture-dependent-views/](http://www.counity.at/blog/2012/asp-net-mvc3-localization-using-culture-dependent-views/)由[Guido Breitenhuber](http://www.counity.at/blog/author/breigo/)

这是带有一些调整的代码（它还没有 100% 工作）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Globalization;

namespace Ala.MultiLanguage
{
    public class LocalizedViewLocation : RazorViewEngine
    {
        private static readonly string[] _emptyLocations = new string[0];

        public string[] LocalizedViewLocationFormats { get; set; }

        public string[] LocalizedMasterLocationFormats { get; set; }

        protected string[] LocalizedPartialViewLocationFormats { get; set; }

        public LocalizedViewLocation()
        {
            // Define the localized view locations
            //  0: Language
            //  1: View name
            //  2: Controller name

            LocalizedViewLocationFormats = new[] {
            "~/Views/{0}/{2}/{1}.cshtml",
            "~/Views/Shared/{0}/{1}.cshtml"};

            MasterLocationFormats = new[] {
            "~/Views/{0}/{2}/{1}.cshtml",
            "~/Views/Shared/{0}/{1}.cshtml"};

            LocalizedPartialViewLocationFormats = new[] {
            "~/Views/{0}/{2}/{1}.cshtml",
            "~/Views/Shared/{0}/{1}.cshtml"};
        }

        public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext");

            if (String.IsNullOrEmpty(partialViewName))
                throw new ArgumentException("Parameter partialViewName is null or empty.", "partialViewName");

            string[] searched;

            var controllerName = controllerContext.RouteData.GetRequiredString("controller");

            var partialPath = GetPath(controllerContext, LocalizedPartialViewLocationFormats, partialViewName, controllerName, out searched);

            if (String.IsNullOrEmpty(partialPath))
            {
                var baseRes = base.FindPartialView(controllerContext, partialViewName, useCache);

                if (baseRes.View != null)
                    return baseRes;

                return new ViewEngineResult(searched.Union(baseRes.SearchedLocations));
            }

            return new ViewEngineResult(CreatePartialView(controllerContext, partialPath), this);
        }

        public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext");

            if (String.IsNullOrEmpty(viewName))
                throw new ArgumentException("Parameter viewName is null or empty.", "viewName");

            string[] viewLocationsSearched;

            string[] masterLocationsSearched;

            var controllerName = controllerContext.RouteData.GetRequiredString("controller");

            var viewPath = GetPath(controllerContext, LocalizedViewLocationFormats, viewName, controllerName, out viewLocationsSearched);

            var masterPath = GetPath(controllerContext, LocalizedMasterLocationFormats, masterName, controllerName, out masterLocationsSearched);

            if (String.IsNullOrEmpty(viewPath) || (String.IsNullOrEmpty(masterPath) && !String.IsNullOrEmpty(masterName)))
            {
                var baseRes = base.FindView(controllerContext, viewName, masterName, useCache);

                if (baseRes.View != null)
                    return baseRes;

                return new ViewEngineResult(viewLocationsSearched.Union(masterLocationsSearched).Union(baseRes.SearchedLocations));
            }

            return new ViewEngineResult(CreateView(controllerContext, viewPath, masterPath), this);
        }

        private string GetPath(ControllerContext controllerContext, string[] locations, string name, string controllerName, out string[] searchedLocations)
        {
            searchedLocations = _emptyLocations;

            if (String.IsNullOrEmpty(name))
                return String.Empty;

            if (IsSpecificPath(name))
                return String.Empty;

            return GetPathFromGeneralName(controllerContext, locations, name, controllerName, ref searchedLocations);
        }

        private static bool IsSpecificPath(string name)
        {
            char c = name[0];
            return (c == '~' || c == '/');
        }

        private string GetPathFromGeneralName(ControllerContext controllerContext, string[] locations, string name, string controllerName, ref string[] searchedLocations)
        {
            var result = String.Empty;

            searchedLocations = new string[locations.Length];

            for (int i = 0; i < locations.Length; i++)
            {
                var location = locations[i];

                var virtualPath = string.Format(CultureInfo.InvariantCulture, location, CultureInfo.CurrentUICulture.TwoLetterISOLanguageName, name, controllerName);

                if (FileExists(controllerContext, virtualPath))
                {
                    searchedLocations = _emptyLocations;

                    result = virtualPath;

                    break;
                }

                searchedLocations[i] = virtualPath;
            }

            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:55:31.793

好吧，经过一段时间尝试以最佳方式进行操作后，我发现一种解决方案更容易和更快速地实施。

只需在 global.asax 中一一映射我想要的路线。如果您只有很少的页面和语言，这将起作用并且可以快速实施。

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute("Default-BR", "", new { controller = "Home", action = "Index" });
    routes.MapRoute("Default-EN", "en", new { controller = "Home", action = "IndexEN" });

    routes.MapRoute("HotelBR", "Hotel", new { controller = "Home", action = "Index" });
    routes.MapRoute("HotelEN", "en/Hotel", new { controller = "Home", action = "IndexEN" });

    routes.MapRoute("Apartamento", "Apartamento", new { controller = "Home", action = "Apartamentos" });
    routes.MapRoute("Apartamentos", "Apartamentos", new { controller = "Home", action = "Apartamentos" });
    routes.MapRoute("Apartments", "en/Apartments", new { controller = "Home", action = "ApartamentosEN" });

    routes.MapRoute("Localizacao", "Localizacao", new { controller = "Home", action = "Localizacao" });
    routes.MapRoute("Location", "en/Location", new { controller = "Home", action = "LocalizacaoEN" });

    routes.MapRoute("Tarifa", "Tarifa", new { controller = "Home", action = "Tarifas" });
    routes.MapRoute("Tarifas", "Tarifas", new { controller = "Home", action = "Tarifas" });
    routes.MapRoute("Rates", "en/Rates", new { controller = "Home", action = "TarifasEN" });

    routes.MapRoute("Reserva", "Reserva", new { controller = "Home", action = "Reservas" });
    routes.MapRoute("Reservas", "Reservas", new { controller = "Home", action = "Reservas" });
    routes.MapRoute("Booking", "en/Booking", new { controller = "Home", action = "ReservasEN" });

    routes.MapRoute("Contato", "Contato", new { controller = "Home", action = "Contato" });
    routes.MapRoute("Contact", "en/Contact", new { controller = "Home", action = "ContatoEN" }); 
```

# c# - 为一组字符生成所有可能的模式

> ID：13587494
> 
> 赞同：1
> 
> 时间：2012-11-27T15:29:09.577
> 
> 标签：c#, algorithm

> **可能的重复：**
> [生成所有可能的组合](https://stackoverflow.com/questions/3093622/generating-all-possible-combinations)

我想为一个字符串生成所有可能的唯一模式，该模式将包括其所有字符，包括重复字符（如果有）。

例如：

**字符串**：`abc`
**模式**：`abc acb bca bac cab cba`

**字符串**：`abb`
**模式**：`abb bab bba`

此外，是否有一个公式可以说明可以为字符串创建多少个唯一模式来验证算法的有效性？到目前为止，我尝试了多种方法，但随着字符数量的增加，结果并不可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:31:27.143

你可以尝试这样的事情： -

```
 using System;

  namespace ConsoleApplication3
 {
    class Permute
    {
             private void swap (ref char a, ref char b)
             {
                    if(a==b)return;
                    a^=b;
                    b^=a;
                    a^=b;
              }

              public void setper(char[] list)
              {
                    int x=list.Length-1;
                    go(list,0,x);
              }

              private void go (char[] list, int k, int m)
              {
                    int i;
                    if (k == m)
                       {
                             Console.Write (list);
                             Console.WriteLine (" ");
                        }
                    else
                         for (i = k; i <= m; i++)
                        {
                               swap (ref list[k],ref list[i]);
                               go (list, k+1, m);
                               swap (ref list[k],ref list[i]);
                        }
               }
     }

     class Class1
    {
           static void Main()
           {

                  Permute p = new Permute();
                  string c="sagiv";
                   char []c2=c.ToCharArray ();
                   /*calling the permute*/
                  p.setper(c2);
              }
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:04:30.300

如果您从数据排序开始，您可以使用重复调用 std::next_permutation 来循环遍历所有排列。std::next_permutation 处理重复元素的情况，比如你的 abb 字符串，没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:01:05.667

我的想法与 Rahul Tripathi 的想法相似，但是我做了一件棘手的事情来使它适用于重复的元素。任何时候在我们进行交换操作之前，我们都会回顾一下这个元素之前是否出现过。如果它是重复元素，我们不应该做交换操作。下面的代码用c ++：

```
#include<iostream>

using namespace std;

bool isDupilicate(char input[],int start,int j)
{
     bool ret=false;
     for(int i=start;i<j;++i)
     {
             if(input[i]==input[j])
             {
                ret=true;
                break;
             }
     }
     return ret;
}

void swap(char& a,char &b)
{
     char temp=a;
     a=b;
     b=temp;
}

void permutation(char input[],int start,int length)
{
       if(start==length)
       {
           for(int i=0;i<length;++i)cout<<input[i];
           cout<<endl;
       }
       else 
       {
           for(int i=start;i<length;++i)
           {
                   if(isDupilicate(input,start,i))continue;
                   swap(input[i],input[start]);
                   permutation(input,start+1,length);
                   swap(input[i],input[start]);

           } 
       }          
}

int main()
{
    cout<<"Input for abb"<<endl;
    char input[3]={'a','b','b'};
    permutation(input,0,3);
    cout<<"________________"<<endl;

    cout<<"Input for abc"<<endl;
    input[2]='c';
    permutation(input,0,3);

    getchar();
    getchar();

} 
```

检查此[链接](http://www.talkstats.com/showthread.php/1636-Permutations-with-Duplicates)以确定可以创建多少个独特的模式！希望能帮助到你！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-27T15:38:51.617

要计算唯一排列，它只是单词的长度（例如 3）到可能字符的幂。因此，如果都是小写字符并且单词长度为 3，则它是 3^26=2541865828329（26，因为这是英文字母表中小写字符的数量）组合。

您可以使用递归计算所有可能的组合。

# c++ - c++（构造函数）继承-LNK 2019错误

> ID：13587498
> 
> 赞同：1
> 
> 时间：2012-11-27T15:29:22.110
> 
> 标签：c++, inheritance, compiler-errors, linker-errors, lnk2019

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有一个涉及类 A 及其派生类 B的**LNK 错误。更准确地说，我有这个编译错误**

```
Error   239 error LNK2019: unresolved external symbol "public: virtual __thiscall A::~A(void)" (??1A@@UAE@XZ) referenced in function "public: virtual __thiscall B::~B(void)" (??1B@@UAE@XZ)    D:\Products\path\file.lib(B.obj)
Error   240 error LNK2019: unresolved external symbol "public: __thiscall A::A(void)" (??A@@QAE@XZ) referenced in function "public: __thiscall B::B(void)" (??B@@QAE@XZ)    D:\Products\path\file.lib(B.obj)
Error   241 error LNK2019: unresolved external symbol "public: void __thiscall A::function(float * *,float * *,float * *,float * *,int)" (?function@A@@QAEXPAPAM000H@Z) referenced in function "public: class SomeType* __thiscall B::function_bis(void)" (?function_bis@B@@QAEPAVSomeType@@XZ) D:\Products\path\file.lib(B.obj) 
```

我猜这可能与继承构造函数的调用有关，或者与函数（）或函数_bis（）的某些调用中的签名无关。但是，我找不到这样的错误。

您对可能的解决方法有提示吗？这是（简化的）A和B的代码。

`B.cpp`

```
B::B(void)
{
}

B::B(Type1* d1, Type1* d2, Type1* r):A()
{
    D1= d1;
    D2= d2;
    R= r;
}

B::~B( void )
{
}

SomeType* B::function()
{
     // do things
     function_bis() ;
} 
```

`B.h`

```
class B:
    public A
{
public:

    B(void) ;
    B(Type1* , Type1* , Type1* );
    virtual ~B(void);

    SomeType* function() ;

private:

    Type1* D1;
    Type1* D2;
    Type1* R;

}; 
```

`A.cpp`

```
using namespace std ;

A::A(void){}

A::~A(void){}

void A::function_bis(float** d, float** d2, float** d3, float** d4, int n)
{} 
```

`A.h`

```
class A
{

public:
    A(void);
    virtual ~A(void);

    void function_bis(float** , float** , float** , float** , int );

}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:34:15.067

在您的代码中，一切看起来都是合法的。

我的猜测是你实际上没有编译 A.cpp 或者你没有在链接步骤中包含生成的目标文件（你错过了定义在A.cpp)。

# c# - 带有类型转换器的数据网格的自定义数据源

> ID：13587499
> 
> 赞同：0
> 
> 时间：2012-11-27T15:29:23.720
> 
> 标签：c#, wpf, data-binding, mvvm

这是关于[RichTextBoxes in a grid](https://stackoverflow.com/questions/13415897/wpf-grid-cells-in-c-sharp-no-text)的问题的后续。我已经走了很远，但现在必须将其转换为 MVVM。我的类型转换器没有被调用，所以问题可能出在我的数据绑定中。我使用两个数据网格来更快地测试设置。

View 获得一个包含所有数据的 ViewModel。

```
<Window.Resources>
    <local:DifferenceToTextConverter  x:Key="DifferenceToTextConverter" />
    <DataTemplate x:Key="cellTemplate" DataType="{x:Type Label}">
        <Label Content="{Binding Converter={StaticResource ResourceKey=DifferenceToTextConverter}}" >
        </Label>
    </DataTemplate>
</Window.Resources>

        <DataGrid Name="TestGrid" 
                  ItemsSource="{Binding Source=DifferenceViewModel, Path=DifferenceData, Converter={StaticResource DifferenceToTextConverter}}" 
                  HeadersVisibility="Column"
                  ItemTemplate="{StaticResource cellTemplate}" >
        </DataGrid>
        </DataGrid>
        <DataGrid Name="OhterGrid" DataContext="{Binding ElementName=DifferenceViewModel, Path=DifferenceData}" HeadersVisibility="Column" >
            <DataGrid.ItemTemplate>
                <DataTemplate DataType="{x:Type Label}">
                    <Label Content="{Binding Converter={StaticResource ResourceKey=DifferenceToTextConverter}}" >
                    </Label>
                </DataTemplate>
            </DataGrid.ItemTemplate>
        </DataGrid>

    public DifferenceView(ViewModel.DifferenceViewModel differenceViewModel)
    {
        InitializeComponent();

        this.DifferenceViewModel = differenceViewModel;
    } 
```

ViewModel，DataTable 填充了我的自定义类的对象。我知道这有数据作为填充它的方法被调用。还有我的转换器，它位于项目根命名空间中

```
namespace ViewModel
{
    public class DifferenceViewModel
    {
        private DataTable differenceData;

        /// <summary>
        /// Differences between properties.
        /// </summary>
        public DataTable DifferenceData
        {
            get
            {
                return this.differenceData;
            }
            private set
            {
                this.differenceData = value;
            }
        }
    }
}

class DifferenceToTextConverter : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type sourceType, object parameter, System.Globalization.CultureInfo culture)
    {
        TextBlock cell = new TextBlock();

        // Convert custom data to text representation.

        return cell;
    }
} 
```

约束：

1.  使用 MVVM
2.  尽可能在 xaml 中设置样式。
3.  具有应用于单个字母的样式的文本。
4.  未知的列数和行数。
5.  自定义类型转换器需要构造整个单元格文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:14:21.710

问题是您的绑定，您没有正确设置 DataContext，没有加载数据，因此没有调用您的转换器。

进行2 处更改：首先，将您的视图设置`DataContext`为`DifferenceViewModel`：

```
public DifferenceView(ViewModel.DifferenceViewModel differenceViewModel)
{       
   this.DataContext = differenceViewModel;
   InitializeComponent();
} 
```

然后，更改您的绑定：
*而不是这个：*

```
ItemsSource="{Binding Source=DifferenceViewModel, Path=DifferenceData, Converter={StaticResource DifferenceToTextConverter}}" 
```

**将其更改为：**

```
ItemsSource="{Binding DifferenceData, Converter={StaticResource DifferenceToTextConverter}}" 
```

这基本上意味着：

```
ItemsSource="{Binding Path=DifferenceData, Converter={StaticResource DifferenceToTextConverter}}" 
```

由于您的 DataContext 是 DifferenceViewModel，因此它将直接转到`DifferenceData`属性。您现在可以在转换器中放置断点。

# c# - 为什么在更新我的访问数据库时出现此错误？

> ID：13587500
> 
> 赞同：0
> 
> 时间：2012-11-27T15:29:22.943
> 
> 标签：c#, oledb

这是我的代码：

```
oledbcm = new OleDbCommandBuilder(oleDbDataAdabter);

DataRow dataRow = myDataset.Tables["salam"].NewRow();

dataRow[1] = textBox2.Text;
dataRow[2] = textBox3.Text;
dataRow[3] = textBox4.Text;
dataRow[4] = textBox5.Text;

myDataset.Tables["salam"].Rows.Add(dataRow);

oleDbDataAdabter.Update(myDataset , "salam"); 
```

当我运行它时，它会出现这个错误：

> InvalidOperationException 未处理；
> 
> ConnectionString 属性尚未初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:41:56.840

如果这就是您所拥有的，那么您就忘记了创建和打开`OleDbConnection`. 有关如何使用它的详细信息和示例，请参阅[OleDbConnection 文档页面。](http://msdn.microsoft.com/en-en/library/system.data.oledb.oledbconnection.aspx)

简而言之，您必须通过以下方式使用它：

```
using (OleDbConnection conn = new OleDbConnection(conectionString)) {
    //Your code here.
} 
```

为此，您需要一个有效的连接字符串。这取决于您使用的提供程序，因此，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.connectionstring)以确定您的数据源的有效连接字符串格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:19:57.307

您需要`OleDbConnection`使用连接字符串指定 a 。

```
string connectionString = 
    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\mydatabase.mdb;"
    + "User Id=admin;Password=password;";
using (OleDbConnection connection = new OleDbConnection(connectionString))
{
    OleDbDataAdapter adapter = new OleDbDataAdapter();
    adapter.SelectCommand = new OleDbCommand("SELECT * FROM MyTable", connection);
    OleDbCommandBuilder cb = new OleDbCommandBuilder(adapter);

    connection.Open();

    DataRow dataRow = myDataset.Tables["salam"].NewRow();

    dataRow[1] = textBox2.Text;
    dataRow[2] = textBox3.Text;
    dataRow[3] = textBox4.Text;
    dataRow[4] = textBox5.Text;

    myDataset.Tables["salam"].Rows.Add(dataRow);

    oleDbDataAdabter.Update(myDataset , "salam");
} 
```

# c++ - 从整数到 BCD 的转换

> ID：13587502
> 
> 赞同：0
> 
> 时间：2012-11-27T15:29:33.553
> 
> 标签：c++, bcd

我想将整数（其最大值可以达到 99999999）转换为 BCD 并存储到 4 个字符的数组中。例如：输入为：12345（整数）输出应为 BCD 格式的 =“00012345”，存储在 4 个字符的数组中。这里`0x00 0x01 0x23 0x45`以 BCD 格式存储。我尝试了以下方式但没有奏效

```
int decNum = 12345;
long aux;
aux = (long)decNum;
cout<<" aux = "<<aux<<endl;

char* str = (char*)& aux;
char output[4];
int len = 0;
int i = 3;
while (len < 8)
{
cout <<"str: " << len << " " << (int)str[len] << endl;
unsigned char temp = str[len]%10;
len++;
cout <<"str: " << len << " " << (int)str[len] << endl;
output[i] = ((str[len]) << 4) | temp;
i--;
len++;
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:10:06.713

首先，不要使用 C 风格的强制转换（比如`(long)a`or `(char*)`）。它们是难闻的气味。相反，学习和使用 C++ 风格的强制转换（如`static_cast<long>(a)`），因为它们指出你在哪里做危险的事情，而不是默默地工作并导致未定义的行为。

`char* str = (char*)& aux;`给你一个指向aux*字节*的指针——它实际上是`char* str = reinterpret_cast<char*>(&aux);`. 它不会为您提供包含数字的传统字符串。 `sizeof(char)`是 1，`sizeof(long)`几乎可以肯定是 4，所以`aux`变量中只有 4 个有效字节。你继续尝试阅读其中的 8 个。

我怀疑这是在做你想做的事。如果要将数字打印成字符串，则必须运行实际代码，而不仅仅是重新解释内存中的位。

`std::string s; std::stringstream ss; ss << aux; ss >> s;`将创建一个`std::string`以 10 为基数的数字`aux`。

然后您可以查看其中的字符`s`来构建您的 BCD。

这远非最快的方法，但至少接近您的原始方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:55:47.233

首先对 C 代码感到抱歉，我被骗了，因为这开始是一个 C 问题，移植到 C++ 应该没什么大不了的。

如果您真的希望它位于 char 数组中，我将执行以下代码之类的操作，我发现仍然将结果保留为小端格式很有用，因此我可以将其转换为`int`用于打印输出，但这并不严格必要的：

```
#include <stdio.h>

typedef struct
{
    char value[4];
} BCD_Number;

BCD_Number bin2bcd(int bin_number);

int main(int args, char **argv)
{
    BCD_Number bcd_result;

    bcd_result = bin2bcd(12345678);

    /* Assuming an int is 4 bytes */
    printf("result=0x%08x\n", *((int *)bcd_result.value));

}

BCD_Number bin2bcd(int bin_number)
{
    BCD_Number bcd_number;  

    for(int i = 0; i < sizeof(bcd_number.value); i++)
    {
        bcd_number.value[i] = bin_number % 10;
        bin_number /= 10;
        bcd_number.value[i] |= bin_number % 10 << 4;
        bin_number /= 10;
    }

    return bcd_number;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:46:46.653

`str`实际上指向一个 long （可能是 4 个字节），但迭代访问 8 个字节。该操作`str[len]%10`看起来好像您在期待数字，但只有二进制数据。此外，我怀疑这`i`会变得消极。

# spring - 注入修改后的Spring安全表达式语言实现后“需要调试符号信息(...)”

> ID：13587503
> 
> 赞同：5
> 
> 时间：2012-11-27T15:29:38.737
> 
> 标签：spring, grails, spring-security

我有一个示例类来测试`@PreAuthorize`注释，它看起来或多或少像这样：

```
class BankService {

    @PreAuthorize("hasCustomRole('ROLE_CUSTOM') or hasRole('ROLE_EXAMPLE')")
    Double getAccountBalance(Integer accountNumber) {
        return 1234;
    }

    @PreAuthorize("#accountNumber > 400")
    int getValue(Integer accountNumber) {
        return 1234;
    }
} 
```

您可以在我添加`hasCustomRole(String expression)`的注释中注意到：`@PreAuthorize`

```
public class CustomSecurityExpressionRoot extends SecurityExpressionRoot {

    public CustomSecurityExpressionRoot(Authentication auth) {
        super(auth);
    }

    public boolean hasCustomRole(String expression) {
       return /* some magic */;
    }
} 
```

另外，我正在`DefaultMethodSecurityExpressionHandler`通过以下方式进行扩展：

```
public class CustomMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler {

    public CustomMethodSecurityExpressionHandler() {
        super();
    }

    @Override
    public EvaluationContext createEvaluationContext(Authentication auth, MethodInvocation mi) {
        StandardEvaluationContext ctx = (StandardEvaluationContext) super.createEvaluationContext(auth, mi);
        ctx.setRootObject(new CustomSecurityExpressionRoot(auth));
        return ctx;
    }
} 
```

最后，一切都被包裹在`resources.groovy`：

```
beans = {
  /* ... some stuff ... */

  xmlns security:'http://www.springframework.org/schema/security'

  security.'global-method-security'('pre-post-annotations': 'enabled') {
    security.'expression-handler'(ref: 'expressionHandler')
  }

  expressionHandler(my.package.plugin.security.expression.CustomMethodSecurityExpressionHandler)
} 
```

现在，如果我从中删除安全部分`resources.groovy`，我自然会失去使用该`hasCustomRole()`方法的能力，但以下工作：

```
assert bankService.getValue(500) == 1234 
```

但是如果我注入自己的实现，前面的语句会导致：

```
Access is denied
org.springframework.security.access.AccessDeniedException: Access is denied 
```

经过进一步调查，我发现了这一点：

```
prepost.PrePostAnnotationSecurityMetadataSource Looking for Pre/Post annotations for method 'getValue' on target class 'class my.package.plugin.security.test.BankService'
prepost.PrePostAnnotationSecurityMetadataSource @org.springframework.security.access.prepost.PreAuthorize(value=#accountNumber > 400) found on specific method: public int my.package.plugin.security.test.BankService.getValue(java.lang.Integer)
method.DelegatingMethodSecurityMetadataSource Adding security method [CacheKey[my.package.plugin.security.test.BankService; public int my.package.plugin.security.test.BankService.getValue(java.lang.Integer)]] with attributes [[authorize: '#accountNumber > 400', filter: 'null', filterTarget: 'null']]
aopalliance.MethodSecurityInterceptor Secure object: ReflectiveMethodInvocation: public int my.package.plugin.security.test.BankService.getValue(java.lang.Integer); target is of class [my.package.plugin.security.test.BankService$$EnhancerByCGLIB$$c590f9ac]; Attributes: [[authorize: '#accountNumber > 400', filter: 'null', filterTarget: 'null']]
aopalliance.MethodSecurityInterceptor Previously Authenticated: org.springframework.security.authentication.TestingAuthenticationToken@b35bafc3: Principal: test; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_TELLER
method.MethodSecurityEvaluationContext Unable to resolve method parameter names for method: public final int my.package.plugin.security.test.BankService$$EnhancerByCGLIB$$c590f9ac.getValue(java.lang.Integer). Debug symbol information is required if you are using parameter names in expressions. 
```

有趣的部分是`Debug symbol information is required if you are using parameter names in expressions.`，这表明编译类时没有关于变量名的调试信息。但是，如果我不注入自己的 bean，一切都会正常工作。

缺少调试信息的原因可能是什么，以及如何解决？

这是一个 Grails 插件，为 Grails 2.0.4 开发，使用版本 1.2.7.3 的 spring-security-core 插件、版本 1.1 的 spring-security-acl 插件和 Spring Security 3.0.7.RELEASE。

**编辑：**

为了使问题更有趣，这是我后来发现的：如果您查看`.class`带有`javap`. 所以类被正确编译，但Spring无论如何都会抱怨......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:49:11.467

我解决了这个问题，但是，我不确定为什么我收到的日志中的异常和消息与问题相差甚远。

我犯了一个错误，假设它`grails-app/conf/spring/resources.groovy`可以以与使用 Grails 构建的应用程序类似的方式使用。尽管文档没有明确说明`resources.groovy`在这种情况下配置的 bean 将不起作用，但它指出`resources.groovy`（在其他一些文件中）默认情况下将被排除在打包之外。

它没有解释运行测试时的奇怪行为，但它不是这种配置的好地方。

将 Spring Security 配置从`resources.groovy`插件描述符中移出后，通过以下方式：

```
class MyOwnGrailsPlugin {

  /* ... some stuff ... */

  def doWithSpring = {
    /* ... some spring stuff ... */

    xmlns security:'http://www.springframework.org/schema/security'

    security.'global-method-security'('pre-post-annotations': 'enabled') {
      security.'expression-handler'(ref: 'expressionHandler')
    }

    expressionHandler(my.package.plugin.security.expression.CustomMethodSecurityExpressionHandler)
  }
} 
```

一切正常，测试通过。

# jquery - django jquery 自动完成列表未显示

> ID：13587504
> 
> 赞同：0
> 
> 时间：2012-11-27T15:29:39.467
> 
> 标签：jquery, django, jquery-autocomplete

我处于使用和属性`autocomplete`触发http请求的位置。我设法处理了输入并生成了一个结果列表。`get``q``q`

然后我将列表序列化`json`并发送回，但不知何故我看不到结果。

这是我的视图代码：

```
def autocomplete_company(request):
    if request.is_ajax():
        q = request.GET.get('q', '')
        companies = Company.objects.filter(name__icontains = q ).order_by('name')[:10]
        results = companies.values_list('name', flat=True)
        data = simplejson.dumps([unicode(r) for r in results])
    else:
        data = 'fail'

    return HttpResponse(data, mimetype="application/json") 
```

阿贾克斯：

```
$(function(){
  $("#search_type").autocomplete("/company/autocomplete/",{
    minChars: 2
  });
}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:18:21.753

您忘记在请求中传递查询字符串“q”

```
$(function(){
  $("#search_type").autocomplete("/company/autocomplete/?q='your_search_string'",{
    minChars: 2
  });
});

q = request.GET.get('q', '') 
```

# c# - 图像作为网格视图中每一列的标题

> ID：13587505
> 
> 赞同：2
> 
> 时间：2012-11-27T15:29:41.340
> 
> 标签：c#, asp.net, image, gridview, datatable

我有一个在 ASP.NET 中显示为 gridview 的数据表。它有一列： temperature 。我想放温度计的图片而不是写温度。我想要这张图片只用于这个列，而不是整个网格视图。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:43:01.250

这可以通过使用`HeaderImageUrl`列上的属性在 GridView 中轻松完成。

例如：

```
<asp:GridView ID="GridView1" runat="server">
        <Columns>
            <asp:BoundField HeaderImageUrl="icon.png" />
            <asp:TemplateField HeaderImageUrl="icon.png" />
        </Columns>
</asp:GridView> 
```

# django - 基于类的通用视图和 DRY

> ID：13587506
> 
> 赞同：4
> 
> 时间：2012-11-27T15:29:47.387
> 
> 标签：django, django-views

我在 Django 1.3 中实现基于类的视图，我发现自己在这种情况下，我的 CreateView、UpdateView 和 DeleteView 几乎相同。有没有办法只用一个视图 CreateUpdateView 或类似的东西来实现它，或者这是实现 CBGV 的标准方法？

此外，在 ThingyAdd 中，我没有像在 ThingyEdit 中那样指定模型，但它们都运行良好。我假设模型是由 form_class 的元部分中定义的模型隐含/拾取的，ThingyForm 是一个 ModelForm。这个假设正确吗？

```
class ThingyAdd(AuthMixin, CreateView):
    form_class = ThingyForm
    context_object_name='object'
    template_name='change_form.html'
    success_url='/done/'

class ThingyEdit(AuthMixin, UpdateView):
    model = Thingy
    form_class = ThingyForm
    context_object_name='object'
    template_name='change_form.html'
    success_url='/done/'

class ThingyDelete(AuthMixin, DeleteView):
    model = Thingy
    form_class = ThingyForm
    context_object_name='object'
    template_name='delete_confirmation.html'
    success_url='/done/' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:58:09.967

你可以创建另一个mixin

```
class ThingyMixin(object):
  model=Thingy
  form_class=ThingyForm
  template_name='change_form.html'
  context_object_name='object'
  success_url='/done/' 
```

那么在你看来：

```
class ThingyAdd( AuthMixin, ThingyMixin, CreateView ):
  pass

class ThingyEdit( AuthMixin, ThingyMixin, UpdateView ):
  pass

class ThingyDelete( AuthMixin, ThingyMixin, DeleteView ):
  template_name='delete_confirmation.html' 
```

# windows-phone-8 - 在 windows phone 8 中以编程方式发送短信

> ID：13587507
> 
> 赞同：11
> 
> 时间：2012-11-27T15:29:55.707
> 
> 标签：windows-phone-8

是否可以在 Windows Phone 8 中以编程方式发送 SMS？我环顾四周，令我惊讶的是，没有找到任何东西......：s

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T15:41:11.657

请参阅以下链接中的教程

[http://www.windowsphonegeek.com/tips/How-to-compose-and-send-SMS-from-Windows-Phone-apps](http://www.windowsphonegeek.com/tips/How-to-compose-and-send-SMS-from-Windows-Phone-apps)

这应该会有所帮助。请注意，最终发送 SMS 用户交互是必须的，您不能自动执行该操作。用户必须点击发送短信按钮

完整代码

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Shell;
using PhoneApp1.Resources;
using Microsoft.Phone.Tasks;

namespace PhoneApp1
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();

            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            SmsComposeTask smsComposeTask = new SmsComposeTask();

            smsComposeTask.To = _Number.Text;
            smsComposeTask.Body = _Message.Text;
            smsComposeTask.Show();
        }

        // Sample code for building a localized ApplicationBar
        //private void BuildLocalizedApplicationBar()
        //{
        //    // Set the page's ApplicationBar to a new instance of ApplicationBar.
        //    ApplicationBar = new ApplicationBar();

        //    // Create a new button and set the text value to the localized string from AppResources.
        //    ApplicationBarIconButton appBarButton = new ApplicationBarIconButton(new Uri("/Assets/AppBar/appbar.add.rest.png", UriKind.Relative));
        //    appBarButton.Text = AppResources.AppBarButtonText;
        //    ApplicationBar.Buttons.Add(appBarButton);

        //    // Create a new menu item with the localized string from AppResources.
        //    ApplicationBarMenuItem appBarMenuItem = new ApplicationBarMenuItem(AppResources.AppBarMenuItemText);
        //    ApplicationBar.MenuItems.Add(appBarMenuItem);
        //}
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T20:35:18.860

来自文档：[How to use the SMS compose task for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394005%28v=vs.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T04:17:15.153

要更清楚，请使用此功能

```
//---sends an SMS message to another device---
private void sendSMS(String phoneNumber, String message)
{
    SmsComposeTask smsComposeTask = new SmsComposeTask();
    smsComposeTask.To = phoneNumber;
    smsComposeTask.Body = message;
    smsComposeTask.Show();
} 
```

# windows - Windows 7 上的 Perl 5.16 无法安装模板工具包

> ID：13587509
> 
> 赞同：5
> 
> 时间：2012-11-27T15:30:10.817
> 
> 标签：windows, perl, templates, installation, toolkit

我尝试通过在 cmd 中使用以下命令在 Windows 7 上安装 Perl 5.16 模块“模板工具包”：

> C:>ppm 安装模板工具包
> 
> ppm 安装失败：找不到任何提供 Template-Toolkit 的软件包

我安装的所有其他模块（AppConfig、DBI、DBD-mysql、MailTools、GD、Chart、GDGraph、..）都成功了。

按照[此网页](https://wiki.mozilla.org/Bugzilla%3aWin32Install)作为指南，他们提到（在 ActivateState Perl 部分下）您可能不会将 Perl 安装到包含空格的目录中（例如“C:\Program Files”），因为它会破坏 Template-Toolkit 安装程序。由于我直接将 Perl 安装在 'C:\' -> 'C:\Perl64\' 中，因此不可能如此。

这个问题有解决方案吗？[或者我应该使用这里](http://code.activestate.com/ppm/Template-Toolkit/)提到的旧版本的 Perl吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T16:06:23.827

错误日志中的唯一错误是文档中的错误（小的编码问题）。模块可以安全安装。只是`cpan`用来做。你只需要强制安装。

```
C:\>cpan

cpan> install Template 
```

对我来说，这没有问题。（失败的测试被跳过，因为它们是仅限开发的测试。）如果你失败并且唯一的失败是来自 t/zz-pod-kwalitee.t 的两个错误，你可以安全地跟进

```
cpan> force install Template 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T15:53:12.493

根据[ppm template-toolkit page](http://code.activestate.com/ppm/Template-Toolkit/)，ActiveState 的 Perl 5.16 的构建失败（这就是它不可用的原因）。

您的选择似乎是：

*   修复任何阻止它构建的错误（*看起来*它只是对 POD 的几个测试，所以它可能是一个简单的修复）
*   使用旧版本的 ActiveState Perl
*   为 Windows 使用不同的 Perl 发行版（例如 Strawberry Perl）
*   使用不同的操作系统（例如虚拟机中的 Ubuntu）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T11:32:29.853

在这些命令之后，我收到了警告和错误消息：

```
C:\>cpan
cpan> install Template 
```

请看下面的屏幕截图。

![错误和警告消息的屏幕截图](../Images/09370e15ff0475a998d8564198d1a3d7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T02:48:08.067

我自己没有尝试过，但您可以从 ActiveState PPM 获取 Template::Alloy：[http](http://metacpan.org/pod/Template::Alloy) ://metacpan.org/pod/Template::Alloy，它声称它支持 TT2 语法等。

# android - android确定是活动上下文还是应用程序上下文

> ID：13587512
> 
> 赞同：5
> 
> 时间：2012-11-27T15:30:15.317
> 
> 标签：android

我有一个**异步任务**，可以进行上传并显示一个**进度对话框**。如果它被服务调用，我希望能够不显示对话框，因此无法显示对话框。问题是有没有办法**确定我拥有哪种类型的上下文**（活动或应用程序）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T15:36:05.870

```
 if( context instanceof Activity ) {
    //...
 } else {
    //...
 } 
```

# python - GAE：SimpleAuth 无法在 PROD 中使用 FB ID 设置 set_session()

> ID：13587516
> 
> 赞同：2
> 
> 时间：2012-11-27T15:30:38.507
> 
> 标签：python, google-app-engine, webapp2, federated-identity

我在我的 GAE 应用程序中使用 Alex ( [https://github.com/crhym3/simpleauth/ ) 的 SimpleAuth。](https://github.com/crhym3/simpleauth/)

当我在 localhost 中使用它时，我使用 fb 和 google id 成功登录。

部署到 PROD 后，我仍然可以使用 google id 成功登录，但无法使用 FB ID 登录。

```
 def _on_signin(self, data, auth_info, provider):
"""Callback whenever a new or existing user is logging in.data is a user info dictionary.auth_info contains access token or oauth token and secret.
 """
auth_id = '%s:%s' % (provider, data['id'])
logging.info('Looking for a user with id %s', auth_id)
user = self.auth.store.user_model.get_by_auth_id(auth_id)
_attrs = self._to_user_model_attrs(data, self.USER_ATTRS[provider])
logging.error(_attrs)
logging.error(user)
if user:
    logging.info('Found existing user to log in')
    user.populate(**_attrs)
    user.put()
    logging.error(user.put())
    self.auth.set_session(self.auth.store.user_to_dict(user)) 
```

对于 FB 登录，我可以获取用户的值并将其存储在数据存储中。当我尝试 self.auth.set_session() 以某种方式为 FB 登录设置 _auth cookie 时，它​​无法创建 _auth cookie。

```
self.auth.set_session(self.auth.store.user_to_dict(user)) 
```

我的身份验证类型是（实验）联合登录。

我无法弄清楚为什么 self.auth.set_session() 无法为 FB 登录创建 cookie。

# ruby-on-rails - Rails 应用程序删除列

> ID：13587518
> 
> 赞同：0
> 
> 时间：2012-11-27T15:30:44.097
> 
> 标签：ruby-on-rails, ruby, migration, mongrel

我的 ruby​​ on rails 应用程序做了一些我无法理解的奇怪事情。

我正在通过迁移向当前表添加一列。这是米格：

```
 class AddSomeColumnToSomewhere < ActiveRecord::Migration
  def self.up
   add_column :somehwhere, :mynewcol, :boolean, :default => false
 end

  def self.down
    remove_column :somehwhere, :mynewcol
 end
end 
```

运行此迁移后，我检查了数据库，一切都很好。但是，在我运行应用程序后，该列消失了。

为什么会发生这样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:18:04.587

该应用程序正在故意删除该列。我认为，为了确保完整性。感谢您的回答。

# c# - 从 Winforms 中的 DataGridView 生成 PDF

> ID：13587520
> 
> 赞同：4
> 
> 时间：2012-11-27T15:30:44.180
> 
> 标签：c#, pdf-generation, itextsharp

我正在尝试从从数据库填充的 DataGridView 创建 PDF。

我刚刚开始尝试学习如何使用 iTextSharp 来完成此任务。

我的代码的结果是一个无法打开的 PDF。我收到一条错误消息“无法打开文件”

这是我生成 PDF 的代码

```
void SendToPDF(string heading, string filename)
    {
        try
        {
            Document doc = new Document(PageSize.A4.Rotate(), 30, 30, 20, 20);

            string myDocs = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
            if (!Directory.Exists(myDocs + @"\Production Reports"))
                Directory.CreateDirectory(myDocs + @"\Production Reports");

            PdfWriter.GetInstance(doc, new FileStream(myDocs + @"\Production Reports\" + filename + ".pdf", FileMode.Append, FileAccess.Write));

            iTextSharp.text.Font titleFont = new iTextSharp.text.Font(iTextSharp.text.Font.FontFamily.HELVETICA, 14.0F, iTextSharp.text.Font.BOLD, BaseColor.BLACK);

            iTextSharp.text.Font tableFont = new iTextSharp.text.Font(iTextSharp.text.Font.FontFamily.HELVETICA, 12.0F, iTextSharp.text.Font.NORMAL, BaseColor.BLACK);

            iTextSharp.text.Font headerfont = new iTextSharp.text.Font(iTextSharp.text.Font.FontFamily.HELVETICA, 12.0F, iTextSharp.text.Font.BOLD, BaseColor.BLACK);

            PdfPTable table = new PdfPTable(GridView.Columns.Count);
            //table.TotalWidth = GridView.Width;

            //There are ALWAYS 10 columns

            float[] widths = new float[] { GridView.Columns[0].Width, GridView.Columns[1].Width, GridView.Columns[2].Width, 
                                           GridView.Columns[3].Width, GridView.Columns[4].Width, GridView.Columns[5].Width,
                                           GridView.Columns[6].Width, GridView.Columns[7].Width, GridView.Columns[8].Width,
                                           GridView.Columns[9].Width };
            table.SetWidths(widths);
            table.HorizontalAlignment = 1; // 0 - left, 1 - center, 2 - right;
            table.SpacingBefore = 2.0F;

            PdfPCell cell = null;

            doc.Open();
            Phrase p = new Phrase(new Chunk(heading, titleFont));
            doc.Add(p);

            foreach (DataGridViewColumn c in GridView.Columns)
            {
                cell = new PdfPCell(new Phrase(new Chunk(c.HeaderText, headerfont)));
                cell.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
                cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
                table.AddCell(cell);
            }

            if (GridView.Rows.Count > 0)
            {
                for (int i = 0; i < GridView.Rows.Count - 1; i++)
                {
                    for (int j = 0; j < GridView.Columns.Count - 1; j++)
                    {
                        cell = new PdfPCell(new Phrase(GridView.Rows[i].Cells[j].Value.ToString(), tableFont));
                        cell.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
                        cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
                        table.AddCell(cell);
                    }
                }
            }
            doc.Add(table);
            doc.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + "\r\n" + ex.StackTrace, "Error Generating PDF", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

我猜我的问题与设置列宽有关，但我不确定。一次，只有一次..当我尝试打开 PDF 时看到一个错误，上面写着“非法浮点除以 0”或类似的内容。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:55:04.233

这听起来很明显，但是您的程序没有运行并将 pdf 文件锁定到其进程，从而阻止 adobe pdf reader 读取它是吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-05T12:06:34.120

私人无效jbtnPdf_Click（对象发送者，EventArgs e）{尝试{

```
 SaveFileDialog saveFileDialog = new SaveFileDialog();
            saveFileDialog.Filter = "All Files | *.*  ";
            if (saveFileDialog.ShowDialog() == DialogResult.OK)
            {

                string path = saveFileDialog.FileName;

                Document pdfdoc = new Document(PageSize.A4); // Setting the page size for the PDF

                PdfWriter writer = PdfWriter.GetInstance(pdfdoc, new FileStream(path + ".pdf", FileMode.Create)); //Using the PDF Writer class to generate the PDF
                writer.PageEvent = new PDFFooter();
                 // Opening the PDF to write the data from the textbox

                PdfPTable table = new PdfPTable(jdgvChild.Columns.Count);
                //table.TotalWidth = GridView.Width;

                float[] widths = new float[] { jdgvChild.Columns[0].Width, jdgvChild.Columns[1].Width, jdgvChild.Columns[2].Width, 
                                       jdgvChild.Columns[3].Width, jdgvChild.Columns[4].Width, jdgvChild.Columns[5].Width,
                                       jdgvChild.Columns[6].Width, jdgvChild.Columns[7].Width};
                table.SetWidths(widths);
                table.HorizontalAlignment = 1; // 0 - left, 1 - center, 2 - right;
                table.SpacingBefore = 2.0F;

                PdfPCell cell = null;
                pdfdoc.Open();

                //doc.Open();
             //   Phrase p = new Phrase(new Chunk(heading, titleFont));
               // doc.Add(p);

                foreach (GridViewDataColumn c in jdgvChild.Columns)
                {
                    cell = new PdfPCell(new Phrase(new Chunk(c.HeaderText)));

                    cell.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
                    cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
                    table.AddCell(cell);
                }

                if (jdgvChild.Rows.Count > 0)
                {
                   for (int i = 0; i < jdgvChild.Rows.Count; i++)
                    {

                    PdfPCell[] objcell = new PdfPCell[jdgvChild.Columns.Count];

                        for (int j = 0; j < jdgvChild.Columns.Count-1; j++)
                        {

                            cell = new PdfPCell(new Phrase(jdgvChild.Rows[i].Cells[j].Value.ToString()));
                            cell.HorizontalAlignment = PdfPCell.ALIGN_CENTER;
                            cell.VerticalAlignment = PdfPCell.ALIGN_CENTER;
                           // table.AddCell(cell);
                            //lstCells.Add(cell);
                            objcell[j] = cell;
                        }
                        PdfPRow newrow = new PdfPRow(objcell);
                        table.Rows.Add(newrow);
                    }
                }

                pdfdoc.Add(table);

                MessageBox.Show("Pdf Generation Successfully.");
              pdfdoc.Close();
            }
        }
         catch (Exception ex)
        {
            MessageBox.Show("Error in pdf Generation.");
        }
    } 
```

# c# - 如何在 C# 中解析 Twitter 搜索 JSON 响应？

> ID：13587522
> 
> 赞同：0
> 
> 时间：2012-11-27T15:30:45.367
> 
> 标签：c#, json, twitter

我收到了来自 Twitter 搜索的 JSON 响应，但我如何循环浏览它们？

```
 protected void BtnSearchClick(object sender, EventArgs e)
    {         
        StringBuilder sb = new StringBuilder();
        byte[] buf = new byte[8192];
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://search.twitter.com/search.json?&q=felipe&rpp=40");
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        Stream resStream = response.GetResponseStream();

        string tempString = null;
        int count = 0;
        do
        {
            count = resStream.Read(buf, 0, buf.Length);// fill the buffer with data

            if (count != 0)// make sure we read some data
            {
                tempString = Encoding.ASCII.GetString(buf, 0, count);// translate from bytes to ASCII text

                sb.Append(tempString);// continue building the string
            }
        }
        while (count > 0); // any more data to read?

        //HttpContext.Current.Response.Write(sb.ToString()); //I can see my JSON response here
        //object deserializeObject = Newtonsoft.Json.JsonConvert.SerializeObject(sb.ToString());

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T15:38:33.927

我会使用`dynamic`关键字

```
using (WebClient wc = new WebClient())
{

    var json = wc.DownloadString("http://search.twitter.com/search.json?&q=felipe&rpp=40");
    dynamic obj = JsonConvert.DeserializeObject(json);
    foreach (var result in obj.results)
    {
        Console.WriteLine("{0} - {1}:\n{2}\n\n", result.from_user_name, 
                                                 (DateTime)result.created_at, 
                                                 result.text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:40:20.300

一种强类型的方式..

```
public class MyTwitterClass
{

    public List<CustomObject> data {get; set;}
}

public class CustomObject 
{

    public string id {get; set;}
    public string name {get; set;}
} 
```

然后你应该能够做到：

```
string someJson=
    @"{""data"":[{""id"":""1"",""name"":""name1""}, {""id"":""2"",""name"":""name2""}]}";

MyTwitterClass someTwitterData = new JavaScriptSerializer().Deserialize<MyTwitterClass>(someJson);

foreach(var item in someTwitterData.data)
{
  Console.Write(item.id + " " + item.name);
} 
```

说了这么多，你可能想看看这个

[http://linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T13:23:11.363

下面的示例应该对您有所帮助，其中“结果”是返回的 JSON

```
 dynamic stuff = JsonConvert.DeserializeObject(result);

        foreach (JObject item in stuff)
        {
            foreach (JProperty trend in item["user"])
            {
                if (trend.Name == "name")
                {
                    MessageBox.Show(trend.Value.ToString());

                }
                else if (trend.Name == "followers_count")
                {
                    // GET COUNT
                }
                else if (trend.Name == "profile_image_url")
                {
                    // GET PROFILE URL
                }
            }
        } 
```

# actionscript-3 - 如何从 AS3 中另一个类中的符号引用实例？

> ID：13587527
> 
> 赞同：1
> 
> 时间：2012-11-27T15:30:53.593
> 
> 标签：actionscript-3, class

我有一个名为 character1 的符号（具有自己的类 Character1），其中有一个具有自己的实例名称的符号：charTarget1（要命中的项目的目标）。

在另一个名为 Track1 的类中，我试图在 hitTestObject 循环中引用实例 charTarget1 但每次尝试运行代码时，我都会收到错误消息：

```
1120: Access of undefined property charTarget1. 
```

我试图运行的循环是：

```
private function track1Loop(evt:Event):void{
        if(charTarget1.hitTestObject(game1End)){
            gameWin=true
            stage.removeEventListener(KeyboardEvent.KEY_DOWN, onKeyPressed);
            stage.removeEventListener(KeyboardEvent.KEY_UP, onKeyReleased);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:00:03.663

确保 character1 是公共的并且 charTarget1 是公共 var 并且两者都可用于 Track1 类。您必须包括 MainClass （不知道它的名字）和 Character1 类的实例。这将在下面工作：

```
private function track1Loop(evt:Event):void{
    if(MainClass.character1.charTarget1.hitTestObject(game1End)){
        gameWin=true
        stage.removeEventListener(KeyboardEvent.KEY_DOWN, onKeyPressed);
        stage.removeEventListener(KeyboardEvent.KEY_UP, onKeyReleased);
    }
} 
```

但是，鉴于您可能需要跟踪的东西不止一些，最好设置某种数据类来跟踪所有模型，并可能将其设为公共静态类甚至单例因此您可以在代码中的任何位置访问它们，而无需将它们传递给所有类。

# javascript - 关于客户端不显眼的 JavaScript hack 的反馈

> ID：13587528
> 
> 赞同：0
> 
> 时间：2012-11-27T15:30:55.303
> 
> 标签：javascript, dom, backbone.js, unobtrusive-javascript

我正在开发一个 SPA 应用程序，其中 Backbone.js 是架构的主要部分。

我们也有一些 Twitter Bootstrap 风格，其中有 Button 组[1]。所以 html 有这些按钮作为复选框或单选。

为了通过使用 Backbone.ModelBinder[2] 将 Backbone 模型透明地绑定到包含这些按钮的 Backbone 视图，我修改了以下代码：

```
# Twitter Bootstrap compatibility
addButtonGroupModelBindingSupport = ->
    $(@el).one 'mousedown keydown', '.btn-group[data-toggle="buttons-radio"] button', ->
        $(@).closest('.btn-group').find('button').prop 'type', 'radio'

installTwitterBootstrapModelBindingSupport = ->
    backboneView = Backbone.View
    ButtonGroupModelBinderSupportView = Backbone.View.extend
        constructor: ->
            backboneView.apply @, arguments
            addButtonGroupModelBindingSupport.call @
            return

    Backbone.View = ButtonGroupModelBinderSupportView

installTwitterBootstrapModelBindingSupport() 
```

此代码在导出 ModelBinder 的模块内部，因此只执行一次。我在 Backbone.View 中混合了我需要的行为，因此以一种不显眼的方式注入了似是而非的 JavaScript。

所以我告诉那些按钮它们不再是按钮了。据我所知，Chrome Firefox 和 IE 都可以。

被愚弄了，ModelBinder 将按钮正确地处理为复选框或单选框，并且一切都按需要工作。

如果这个 hack 看起来太棘手，那么听取更有经验的前端开发人员的意见会很棒。

[1] [http://twitter.github.com/bootstrap/components.html#buttonGroups](http://twitter.github.com/bootstrap/components.html#buttonGroups)

[2] [https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:48:57.660

如果它适用于所有目标浏览器/平台，我不能说这是错误的，但它肯定是不寻常的。我看到这种方法有一些缺点：

*   **它不是标准的 html**。`types`对按钮有效的是`submit`,`reset`和`button`。[在此处查看规范](http://www.w3.org/TR/html5/the-button-element.html#the-button-element)
*   由于它并不常见，因此可能会误导您团队中的其他开发人员（假设您不是一个人工作）。
*   即使它适用于这种特殊情况，下次您需要使用不同的插件/组件时，您可能不会那么幸运地找到像这样工作的黑客。
*   在您的情况下，这可能不是问题，但选择器`$('input').something()`不会找到您被黑的按钮

AFAIK，处理这种场景的常用方法（您需要输入元素但希望在视图中有一个更漂亮的 UI 元素）是在页面中**同步两个元素**- 漂亮的 div 和实际输入（不可见）。下面是一些例子：[Select2](http://ivaynberg.github.com/select2/)、[Fancy Checkboxes 和 Radio Buttons](http://webdesign.maratz.com/lab/fancy-checkboxes-and-radio-buttons/demo.html)。由于它更常见，这可能是解决您的问题的更好方法，即使它需要编写更多的 js。

# python - 使用 Jinja2 模板缩小 Flask 应用程序的 HTML 输出

> ID：13587531
> 
> 赞同：24
> 
> 时间：2012-11-27T15:31:00.000
> 
> 标签：python, web-applications, flask, wsgi, jinja2

渲染模板后是否有 Flask 或 Jinja2 配置标志/扩展来自动缩小 HTML 输出？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-10-01T10:53:07.293

找到了一个更好的方法来做到这一点。您可以使用以下方法缩小所有页面：

```
from flask import Flask
from htmlmin.main import minify

app = Flask(__name__)

@app.after_request
def response_minify(response):
    """
    minify html response to decrease site traffic
    """
    if response.content_type == u'text/html; charset=utf-8':
        response.set_data(
            minify(response.get_data(as_text=True))
        )

        return response
    return response 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T15:57:39.077

看看这里[https://github.com/cobrateam/django-htmlmin#using-the-html_minify-function](https://github.com/cobrateam/django-htmlmin#using-the-html_minify-function)

我意识到它主要用于 django，但我认为该示例显示了如何使用此项目代码通过烧瓶视图执行您想要的操作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-23T04:07:16.730

我使用以下装饰器

```
import bs4
import functools
import htmlmin

def prettify(route_function):
    @functools.wraps(route_function)
    def wrapped(*args, **kwargs):
        yielded_html = route_function(*args, **kwargs)
        soup = bs4.BeautifulSoup(yielded_html, 'html.parser')
        return soup.prettify()

    return wrapped

def uglify(route_function):
    @functools.wraps(route_function)
    def wrapped(*args, **kwargs):
        yielded_html = route_function(*args, **kwargs)
        minified_html = htmlmin.minify(yielded_html)
        return minified_html

    return wrapped 
```

并且像这样简单地包装了默认的 render_template 函数

```
if app.debug:
    flask.render_template = prettify(flask.render_template)
else:
    flask.render_template = uglify(flask.render_template) 
```

这具有自动添加到缓存的额外好处，因为我们实际上并没有触及 app.route

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-14T20:11:39.077

我写了一个烧瓶扩展来实现这个目的。您可以使用它来安装它`pip install flask-htmlmin`，源代码可在[https://github.com/hamidfzm/Flask-HTMLmin](https://github.com/hamidfzm/Flask-HTMLmin)获得。希望它会有用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-22T15:33:57.743

使用装饰器。

```
from htmlmin.decorator import htmlmin

@htmlmin
def home():
... 
```

或者你可以只使用：

```
re.sub(r'>\s+<', '><', '<tag>   </tag>') # results '<tag></tag>' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-26T12:20:15.307

为了扩展来自@olly_uk 的答案和@Alexander 的评论的有用性，似乎[django-htmlmin](https://github.com/cobrateam/django-htmlmin)扩展现在被设计为与 Django 以外的框架一起使用。

从[此处](https://github.com/cobrateam/django-htmlmin#using-the-html_minify-function)的文档中，您可以在 Flask 视图中手动使用 html_minify 函数，如下所示：

```
from flask import Flask
from htmlmin.minify import html_minify

app = Flask(__name__)

@app.route('/')
def home():
    rendered_html = render_template('home.html')
    return html_minify(rendered_html) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-21T14:35:19.800

为最新版本的 htmlmin 修改 @Bletch 答案。

```
from flask import Flask
import htmlmin

app = Flask(__name__)

@app.route('/')
def home():
    rendered_html = render_template('home.html')
    return htmlmin.minify(rendered_html) 
```

[https://htmlmin.readthedocs.io/en/latest/quickstart.html](https://htmlmin.readthedocs.io/en/latest/quickstart.html)

缩小的 html 在标签之间仍然会有一些空格。如果我们想删除它，则`remove_empty_space =True`需要在渲染模板时添加属性。

```
return htmlmin.minify(rendered_html, remove_empty_space =True) 
```

[https://htmlmin.readthedocs.io/en/latest/reference.html](https://htmlmin.readthedocs.io/en/latest/reference.html)

# direct2d - 使用 Direct2D/DirectWrite 确定文本边界框

> ID：13587532
> 
> 赞同：3
> 
> 时间：2012-11-27T15:31:03.170
> 
> 标签：direct2d, directwrite

`ID2D1RenderTarget::DrawGlyphRun`采用以下参数：

```
D2D1_POINT_2F baselineOrigin,
__in CONST DWRITE_GLYPH_RUN *glyphRun,
__in ID2D1Brush *foregroundBrush,
DWRITE_MEASURING_MODE measuringMode /*= DWRITE_MEASURING_MODE_NATURAL */ 
```

DWRITE_GLYPH_RUN 在哪里

```
struct DWRITE_GLYPH_RUN
{
    __notnull IDWriteFontFace* fontFace;
    FLOAT fontEmSize;
    UINT32 glyphCount;
    __field_ecount(glyphCount) UINT16 const* glyphIndices;
    __field_ecount_opt(glyphCount) FLOAT const* glyphAdvances;
    __field_ecount_opt(glyphCount) DWRITE_GLYPH_OFFSET const* glyphOffsets;
    BOOL isSideways;
    UINT32 bidiLevel;
}; 
```

我试图找出包含输出字形的最小矩形。

这是我所有的数据。请注意，我有 1 个点，`baselineOrigin`我可以使用`glyphAdvances`和`glyphOffsets`从`DWRITE_GLYPH_RUN`. 问题是如何确定高度？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:37:34.770

我以前使用另一种方法来做到这一点：

1.  创建路径几何
2.  打开路径几何以获取几何汇
3.  调用 GetGlyphRunOutline 将文本转换为几何图形
4.  调用转换后的几何体的 GetBounds 得到边界矩形

将文本转换为几何图形后，您可以翻译/旋转/缩放它，并做几何图形可以做的一切。您也可以在获取边界矩形并使用自己的方法绘制后删除几何图形。

一些代码供您参考

```
// Create path geometry
hr = pD2DFactory->CreatePathGeometry(&pPathGeometry);
if(FAILED(hr))
{
        MessageBox(NULL, L"Create path geometry failed!", L"Error", 0);
        return;
}

// Open sink
hr = pPathGeometry->Open(&pGeometrySink);
if(FAILED(hr))
{
        MessageBox(NULL, L"Open geometry sink failed!", L"Error", 0);
        return;
}

// Get glyph run outline
hr = pFontFace->GetGlyphRunOutline(
        fontSize_,                              // font size
        pGlyphIndices,
        NULL,
        NULL,
        textLength,
        FALSE,
        FALSE,
        pGeometrySink
        );
if(FAILED(hr))
{
        MessageBox(NULL, L"Get glyph run outline failed!", L"Error", 0);
        return;
}

// Close sink
pGeometrySink->Close(); 
```

# java - if 语句无法过滤空名称

> ID：13587533
> 
> 赞同：0
> 
> 时间：2012-11-27T15:31:02.740
> 
> 标签：java, if-statement

> **可能重复：**
> [如果使用 == 的语句给出了意外的结果](https://stackoverflow.com/questions/9870985/if-statement-using-gives-unexpected-result)

您好我正在使用此代码向我的 ComboBox 添加元素，并且我不想添加空元素，这是代码：

```
 public void elrendezesBetoltes(ArrayList<Elrendezes> ElrLista){
    int i;
    Elrendezes tmp;
    model.removeAllElements(); 
    model = new DefaultComboBoxModel(comboBoxItems);
    for(i=0; i<ElrLista.size(); i++){
         tmp = ElrLista.get(i);
         if(tmp.getName()!="")comboBoxItems.add(tmp.getName()); //not working
         addButton2(tmp.getSeatnum(),tmp.getCoord(),tmp.getFoglalt());
    }   
} 
```

我的问题是 if 语句不起作用，它仍然向我的组合框添加空名称。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:32:43.047

始终使用`equals`方法来比较字符串：-

```
if (tmp.getName()!="") 
```

应该： -

```
if (!tmp.getName().equals("")) 
```

**或者干脆使用这个**，如果你想检查`empty string`： -

```
if (!tmp.getName().isEmpty()) {
    comboBoxItems.add(tmp.getName());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:34:07.510

使用`equals`方法比较字符串。通过使用`!=`运算符，您正在比较字符串实例，这总是正确的，因为它们（tmp.getName（）和“”）不是相同的字符串实例。

改变

```
 tmp.getName()!="" 
```

至

```
 !"".equals(tmp.getName()) 
```

**将作为第一个字符串放在`""`比较中也会照顾您的`null`情况，即它不会中断 if `tmp.getName()`is `null`。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:39:14.047

如果不在 Java 6 上并且 isEmpty 不可用，另一种选择是：

```
if (tmp.getName.length()>0) 
```

检查长度应该比使用 .equals 更快，尽管潜在收益非常小，不值得太担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:32:44.410

使用`equals()`：

```
if (!tmp.getName().equals("")) 
```

使用`==`或`!=`比较字符串引用，而不是字符串内容。这几乎不是你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T15:33:02.903

您必须将字符串与“等于”进行比较，然后它将起作用

```
if(!tmp.getName().equals(""))comboBoxItems.add(tmp.getName()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T15:35:06.783

您正在比较身份（==，！=），但每个 String 实例都有自己的身份，即使它们相等。

所以你需要做`!tmp.getName().equals("")`。

通常，最好先从常量字符串开始，因为它永远不会为空：`!"".equals(tmp.getName())`

但是，我建议使用 apache commons lang StringUtils。它有一个`notEmpty()`and`notBlank()`方法来处理空值处理和修剪。

PS：有时身份适用于字符串。但不应该依赖它，因为它是由编译器或 jvm 优化引起的，因为字符串不可变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T15:35:11.590

使用[**字符串#isEmpty()**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#isEmpty%28%29)

```
if(!tmp.getName().isEmpty()) 
```

或者：

```
if(!tmp.getName().equals("")) 
```

始终使用 equals 方法检查字符串是否相等。== 运算符仅检查两个引用是否指向同一个 String 对象。

# cuda - CUDA 扭曲调度：来自当前块的另一个扭曲还是来自另一个块的扭曲？

> ID：13587535
> 
> 赞同：3
> 
> 时间：2012-11-27T15:31:07.743
> 
> 标签：cuda, scheduling

当 SM 上正在运行的 warp 停止时，必须在 SM 上安排另一个 warp 来交换停止的 warp 以覆盖延迟。但是，与停滞的经线来自同一块的替代品还是必须属于另一个块，还是两种情况都可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:51:56.357

该主题是 GPU 架构社区中的一项开放研究。人们在[这里](http://www.cc.gatech.edu/~hyesoon/gputhread.pdf)评估了几种扭曲调度策略。查看以下最近的论文，了解不同调度策略的优缺点：

*   有人建议使用两级 warp 调度来提高能效：[Energy-efficient Mechanisms forManaging Thread Context in Throughput Processors](http://dl.acm.org/authorize?445183)
*   有人建议使用两级warp调度来改善延迟隐藏：[Improving GPU Performance via Large Warp and Two-Level Warp Scheduling](http://www.istc-cc.cmu.edu/publications/papers/2011/improving-GPU.pdf)
*   其他一些人建议按照减少 SM 的 L1 缓存争用的顺序安排扭曲：[Cache-Conscious Wavefront Scheduling](http://www.ece.ubc.ca/~aamodt/papers/tgrogers.micro2012.pdf)
*   最后，[这是 NVIDIA 研究人员提出的一项专利](http://www.google.com/patents/US20120079241)，该专利提出了一种用于改善延迟隐藏和能源效率的调度程序。

在回答您的问题时，这两种策略都可以，并且可以在任何架构中使用。但真正的下属尚未向公众披露。

# c# - 使用 IE 凭据使用 c# 登录

> ID：13587536
> 
> 赞同：0
> 
> 时间：2012-11-27T15:31:08.247
> 
> 标签：c#, webclient, credentials

嗨，我正在编写一个 HTML 解析器来帮助完成一些工作职责，我可以使用 IE 资源管理器进入该站点。但是使用 csharp 代码我得到一个错误

我试过使用

```
client.Credentials = CredentialCache.DefaultNetworkCredentials;
client.Proxy.Credentials = CredentialCache.DefaultCredentials; 
```

我没有得到请求的页面，而是一个错误页面。如果我可以在资源管理器中查看页面，则必须有一种方法可以在 C# 中检索其 html

（请注意，其他浏览器中的同一页面需要身份验证 - 不在 IE 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:06:18.727

你可以试试这个库：[https ://github.com/HtmlUnit/NHtmlUnit](https://github.com/HtmlUnit/NHtmlUnit)

您可以使用 html 单元以编程方式执行 html 操作。更多信息可以在[http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/找到](http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:02:27.513

问题出在请求标头上，C# 没有发送 user-agnet 标头标签，我猜我尝试连接的站点如果遇到没有用户代理的情况下会返回错误。

添加以下行以调整标题到我的 IE 标题：

```
WebClient client = new WebClient();
client.Credentials = CredentialCache.DefaultNetworkCredentials;
client.Proxy.Credentials = CredentialCache.DefaultCredentials;
client.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"); 
```

# html - CSS/HTML 导致段落显示错误

> ID：13587538
> 
> 赞同：0
> 
> 时间：2012-11-27T15:31:11.073
> 
> 标签：html, css

在我的网站[cur-mudg-eon.com](http://cur-mudg-eon.com)上，我无法正确显示段落。如果您访问主页，您会注意到“第 1 段”位于 H2“[ker-muhj-uhn]”的右侧，我希望它在 H1 标题“Cur-mudg-eon”下方左对齐”。

我确定这很简单，但我似乎无法弄清楚我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:37:11.003

您的标题的 css 包含“float:left”，因此它将“浮动”到任何内容的左侧。你必须清除浮动。之后`</h2>`，插入

```
<div style="clear:both"></div> 
```

这意味着该 div 的左侧或右侧不允许浮动元素。在 div 之后，您的段落将正常显示。

正如评论中所建议的那样，您还可以`style="clear:both"`在段落中添加 ，即：

```
<h2> ... headline ... </h2>
<p style="clear: both"> ... </p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:35:02.863

H2 之后的“br”（中断）标签应该有帮助

```
<H2>text </h2><br/>Paragraph 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:36:54.910

在“/h2”之后添加一个中断标记“/br”

它应该会下降

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:40:43.537

给你`p`一个`clear: both;`，这应该可以解决问题。

# asp.net - 用于 jpg 文件的 ASP.net MVC 3 路由

> ID：13587541
> 
> 赞同：7
> 
> 时间：2012-11-27T15:31:20.190
> 
> 标签：asp.net, asp.net-mvc-3, routing, iis-7.5, jpeg

我在 global.asax 中有一个带有这条路线的 MVC 3 应用程序

```
routes.MapRoute(
            "ProfilePictureSmall",                             // Route name
            "small/{PictureID}.jpg",                           // URL with parameters
            new { controller = "Picture", action = "Show", Size = "small", PictureID = Guid.Empty }  // Parameter defaults
        ); 
```

这是我的控制器的动作

```
public ActionResult Show(string Size, Guid PictureID) 
```

这条路线不适用于我的计算机，但它适用于其他本地计算机以及测试服务器和实时服务器。它曾经也可以在我的 PC 上运行，但我最近重新安装了我的系统，所以我认为它与此有关。

有没有人有任何想法？

PS：所有其他路线都可以正常工作。**如果我删除.jpg**，这个也可以

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T20:26:54.733

对我来说，将此行添加到 system.webServer 内的 web.config

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

解决它。

顺便提一句。我正在使用.Net MVC 4.0

[资源](https://stackoverflow.com/a/13951962/973485)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:56:15.657

我终于通过重新安装 IIS 让它工作了。

我不知道我到底做了什么，但这里是我在 Windows 7 控制面板/关闭 Windows 功能/Internet 信息服务上安装 IIS 时检查的功能

这些是我所做的唯一更改（没有代码/配置更改）

![在此处输入图像描述](../Images/edc5d1dbc9272d9b452518694ad9e969.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:47:02.943

由于它是全新安装的 Windows，.NET Framework 可能已在 IIS 之前安装并且可能未正确注册，因此静态文件处理程序可能会尝试提供不存在的 jpg。

尝试运行`aspnet_regiis.exe -i`**

# javascript - Javascript：第一个逗号后的换行符

> ID：13587543
> 
> 赞同：3
> 
> 时间：2012-11-27T15:31:20.623
> 
> 标签：javascript

我有一个从与 Google Map API 交互的数据库中提取的地址。显示结果时，我的地址呈现如下：

456 Here Street, City, AL 36723

之后输入换行符的解决方案是什么

> 465这里街

这样地址将显示为

```
456 Here Street
City, AL 36723 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:35:04.010

```
var address = "456 Here Street, City, AL 36723";

address = address.replace(',', '<br/>'); 
```

[http://jsfiddle.net/BvT9p/](http://jsfiddle.net/BvT9p/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:34:30.980

```
address.replace(",", "\r\n"); 
```

其中地址是您作为字符串的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:34:37.567

尝试

```
"456 Here Street, City, AL 36723".replace(',','\n'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T15:49:22.710

```
var address = '456 Here Street, City, AL 36723'; //however you acquire the address
var addressArray = address.split(',');
var addressNode = document.createElement('address');

addressNode.appendChild(document.createTextNode(addressArray[0]));
addressNode.appendChild(document.createElement('br'));
addressNode.appendChild(document.createTextNode(addressArray[1] + ',' + addressArray[2])); 
```

我会避免使用innerHTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T15:36:05.330

用 br 标签替换第一个逗号：

```
var str = "456 Here Street, City, AL 36723";
str.replace(/,/, '<br />'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T15:34:32.697

你可以尝试这样的事情： -

```
 string.match(/.{,}/g).join("<br/>"); 
```

或试试这个： -

```
 address.replace(",", "\r\n"); 
```

# arrays - 数组公式，只返回 1 个特定值

> ID：13587547
> 
> 赞同：0
> 
> 时间：2012-11-27T15:31:29.257
> 
> 标签：arrays, excel, excel-formula

我对 Excel 的数组公式有疑问。

我有一个返回 10 个不同值的数组公式。如果我只想要第 5 个值，我该怎么做？我相信有一个公式，但我不确定它是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:36:53.763

您可以使用 INDEX 函数：{=INDEX(arrayformula,5,1)} 或 {=INDEX(arrayformula,1,5)}，具体取决于您的数组公式是返回行还是列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:42:59.963

一个非常相似的问题： [Excel。从数组函数访问单个值](https://stackoverflow.com/questions/4178310/excel-access-single-value-from-array-function)

简短的回答：该`=index()`功能是您正在寻找的。

# python - Twisted chainDeferred 没有按预期工作

> ID：13587549
> 
> 赞同：1
> 
> 时间：2012-11-27T15:31:36.097
> 
> 标签：python, exception, twisted, deferred

我在弄清楚一个有点简单的扭曲 python 代码时遇到了问题。根据我在文档中的红色，[这里](http://pastebin.com/iuxVKamg)的代码应该可以在没有未处理错误的情况下工作。

我明白了：

```
HELLO!
HANDLED!
HANDLED 2!
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
  File "package_tester.py", line 31, in <module>
    a().callback(2)
  File "/usr/local/lib/python2.7/dist-packages/twisted/internet/defer.py", line 368, in callback
    self._startRunCallbacks(result)
  File "/usr/local/lib/python2.7/dist-packages/twisted/internet/defer.py", line 464, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/local/lib/python2.7/dist-packages/twisted/internet/defer.py", line 551, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "package_tester.py", line 5, in c
    raise Exception()
exceptions.Exception: 
```

链式延迟的失败不是传递给 end() errback 吗？

*出于某种原因，我无法在 Bula 的帖子下方发表评论，*
我设法通过简单地添加来绕过“unexpected1.py”的行为

```
@defer.inlineCallbacks
def sync_deferred(self, result, deferred):
        """
        Wait for a deferred to end before continuing.
        @param deferred: deferred which will be waited to finish so the chain
        can continue.
        @return: result from the deferred.
        """
        r = yield deferred
        defer.returnValue(r) 
```

每个chainDeferred 之后的sync_deferred，其中需要“等待”子延迟的结果，以便父可以继续此结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:02:40.677

从[以下文档`Deferred.chainDeferred`](http://twistedmatrix.com/documents/current/api/twisted.internet.defer.Deferred.html#chainDeferred)：

```
When you chain a deferred d2 to another deferred d1 with d1.chainDeferred(d2),
you are making d2 participate in the callback chain of d1\. Thus any event that
fires d1 will also fire d2. 
```

您提供给`d1`（`d`在您的示例代码中）的错误将传递给`d2`（`l`在您的示例代码中）。这意味着`d2`/`l`以错误结束，该错误被传递给它的第一个也是唯一一个 errback `new_f`，. `new_f`返回它的参数，留下`d2`/`l`一个错误结果，它没有被处理。

如果你打算`new_f`处理失败，那么你应该让它“不”返回失败。从[howto](http://twistedmatrix.com/documents/current/core/howto/defer.html#auto4)：[_`Deferred`](http://twistedmatrix.com/documents/current/core/howto/defer.html#auto4)

```
If the errback does returns a Failure or raise an exception, then that is passed
to the next errback, and so on. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T22:27:24.963

在[这篇](http://blogs.fluidinfo.com/terry/2010/08/14/twisteds-deferred-class-chaindeferred-method-is-too-simplistic/)出色的文章中，很少有使用`chainDeferred`. 所以在使用这种方法的时候一定要小心。

# amazon-ec2 - Amazon EC2 - 查看实例之间的文件

> ID：13587550
> 
> 赞同：2
> 
> 时间：2012-11-27T15:31:38.390
> 
> 标签：amazon-ec2

我在 EC2 上设置了 2 个 Windows Server 2008 实例。我希望一个充当数据库服务器，另一个充当客户端。要使客户端应用程序正常工作，它需要能够使用以下所有内容连接到服务器实例：

*   数据库实例的IP地址
*   通过给定的 UDP 端口访问
*   服务器名称，例如 \\MyServer
*   通过其数据库的实际物理路径，例如 \\UNC\SharedFolder\MyDatabaseFolder

我是 EC2 的新手。无论如何我可以设置这个吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:14:41.303

四个中的至少三个是完全可能的，并且我使用过类似的设置。也许其他人更了解 UDP 位。

*   数据库实例的IP地址

这是 EC2 的标准。所有实例都有两个网络接口，一个是 EC2 内部接口，一个是外部网络接口。对于实例之间的通信，请使用内部通信。这些接口上的数据流量是免费的。

*   通过给定的 UDP 端口访问

我从未在 EC2 中尝试过 UDP 通信，但如果它有效，您可能应该将其保存在您自己的本地网络中，即[虚拟私有云 (VPC)](http://aws.amazon.com/documentation/vpc/)。

*   服务器名称，例如 \MyServer

这种主机名查找不需要名称服务器，尽管您当然可以运行一个（最好在 VPC 中）。但是，如果您将服务器名称和（内部）IP 放入主机文件（%systemroot%\system32\drivers\etc\hosts），则不需要名称服务器。

*   通过其数据库的实际物理路径，例如 \UNC\SharedFolder\MyDatabaseFolder

文件夹共享应该与任何其他 Windows 机器一样工作，但即使这样也应该保存在 VPC 中。

开始设置 VPC 可能有点陡峭，但文档很好，而且通常不需要硬位（例如 VPN 隧道）。查看[示例场景](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Scenarios.html)并遵循最符合您需求的场景。

# sql - 一系列几何数据类型的最小和最大点

> ID：13587553
> 
> 赞同：2
> 
> 时间：2012-11-27T15:31:59.343
> 
> 标签：sql, sql-server-2008-r2, geometry

在将一系列 Shapefile 引入 SQL Server 2008R2 之后，我们希望获取表格中一系列多边形的最小和最大点。

如果没有 SQL Server 2008R2 中的 STExtent 之类的聚合函数，如何确定最小值和最大值？

这篇博文指出了一系列选项：
[http ://alastaira.wordpress.com/2011/07/26/determining-the-geographic-extent-of-spatial-features-in-a-sql-server-table/](http://alastaira.wordpress.com/2011/07/26/determining-the-geographic-extent-of-spatial-features-in-a-sql-server-table/)

*   选项#1：使用光标
*   选项 #2：CLR 函数
*   选项#3：CTE
*   选项#4：持久信封

一个例子：

```
BEGIN TRAN
  CREATE TABLE #Lines
  (
    ID INT IDENTITY(1,1)
    ,Poly GEOMETRY NULL
  );

  INSERT INTO #Lines
    (Poly)
  VALUES
    (geometry::STGeomFromText('LINESTRING(0 0, 2 3)', 0));

  INSERT INTO #Lines
    (Poly)
  VALUES
    (geometry::STGeomFromText('LINESTRING(1 1, 2 4)',0));

  --How can i get the min and max x and y points?
      --(e.g. for this example Xmin = 0, Xmax = 2, Ymin = 0, Ymax = 4)

  DROP TABLE #Lines 
COMMIT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T07:15:55.993

如果您使用 SQL Server 2008，请使用：

```
select MIN((<geom_col>).STEnvelope().STPointN(1).STX) as xmin,
MAX((<geom_col>).STEnvelope().STPointN(3).STX) as xmax,
MIN((<geom_col>).STEnvelope().STPointN(1).STY) as ymin,
MAX((<geom_col>).STEnvelope().STPointN(3).STY) as ymax from <your table>; 
```

SQL Server 2012 有一个新函数 UnionAggregate。所以另一种选择是：

```
select  geometry::UnionAggregate (<geom_col>).STEnvelope().STPointN(1).STX as xmin,
geometry::UnionAggregate (<geom_col>).STEnvelope().STPointN(3).STX as xmax,
geometry::UnionAggregate (<geom_col>).STEnvelope().STPointN(1).STY as ymin,
geometry::UnionAggregate (<geom_col>).STEnvelope().STPointN(3).STY as ymax from <your table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:42:06.250

我同意上述（和[链接](http://alastaira.wordpress.com/2011/07/26/determining-the-geographic-extent-of-spatial-features-in-a-sql-server-table/)的）博客文章的作者的观点，即持久性信封是一个很好的解决方案，因为数据没有变化。

下面我编辑了示例以回答该实现的问题。

```
BEGIN TRAN
  CREATE TABLE #Lines
  (
    ID INT IDENTITY(1,1)
    ,Poly GEOMETRY NULL
  );

 INSERT INTO #Lines
  (Poly)
 VALUES
  (geometry::STGeomFromText('LINESTRING(0 0, 2 3)', 0));

 INSERT INTO #Lines
  (Poly)
 VALUES
  (geometry::STGeomFromText('LINESTRING(1 1, 2 4)',0));

 --Using option 4 of persisted envelopes

 ALTER TABLE #Lines
   ADD
     MinX AS (CONVERT(int, Poly.STEnvelope().STPointN((1)).STX, 0)) PERSISTED,
     MinY AS (CONVERT(int, Poly.STEnvelope().STPointN((1)).STY, 0)) PERSISTED,
     MaxX AS (CONVERT(int, Poly.STEnvelope().STPointN((3)).STX, 0)) PERSISTED,
     MaxY AS (CONVERT(int, Poly.STEnvelope().STPointN((3)).STY, 0)) PERSISTED;

 SELECT
   MIN(MinX) AS [X Minimum]
   ,MIN(MinY) AS [Y Minimum]
   ,MAX(MaxX) AS [X Maximum]
   ,MAX(MaxY) AS [Y Maximum]    
 FROM #Lines

 DROP TABLE #Lines 
COMMIT 
```

# c - C用值初始化3D数组

> ID：13587563
> 
> 赞同：-5
> 
> 时间：2012-11-27T15:32:38.407
> 
> 标签：c, arrays, 3d

我正在尝试初始化 3D 数组“A”的所有元素。该数组由 3D 数组的 2000x100x4 个整数元素组成，并以行优先顺序存储。“A”中位置 [i,j,k] 处的每个索引必须用值 i*i*i + j*j*j 初始化。如何使用 for 循环来做到这一点？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:38:03.470

```
for(i=0;i<2000;i++)
  for(j=0;j<100;j++)
    for(k=0;k<4;k++)
       A[i][j][k]= (i*i*i) + (j*j*j); 
```

我希望我正确理解了你的问题。还是您在寻找其他东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:36:24.553

这不是一件难事：

```
int A[2000][100][4];
int i,j,k;
for (i=0;<2000;i++)
{
    for (j=0;j<100;j++)
    {
        for (k=0;k<4;k++)
        {
            A[i][j][k] = i*i*i + j*j*j;
        }
    }
} 
```

# assembly - 如何将两个整数相乘，其中一个大于 MIPS 中的 32 位？

> ID：13587568
> 
> 赞同：2
> 
> 时间：2012-11-27T15:32:51.447
> 
> 标签：assembly, mips

我有以下子例程，用于查找 $a0 的 $a1 次方。它适用于小整数，但我希望它适用于 1000^6 之类的东西。我在想，如果我将乘法的 hi 寄存器存储在 $v1 中。

所以我想我的主要问题是，“我如何将两个大于 32 位的整数相乘？”

```
pow:
  li    $v0, 1
pow_loop:
  ble   $a1, $zero, pow_conclude
  mult  $v0, $a0
  mflo  $v0
  addi  $a1, $a1, -1
  j     pow_loop
pow_conclude:
  jr    $ra 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:49:38.063

在阅读了 Ben Jackson 的答案后，我写了这篇文章并用 MARS 进行了检查。

```
pow:
  li    $v0, 1
  li    $v1, 0
pow_loop:
  ble   $a1, $zero, pow_conclude
  mult  $v1, $a0
  mflo  $v1
  mult  $v0, $a0
  mflo  $v0
  mfhi  $t0
  add   $v1, $v1, $t0
  addi  $a1, $a1, -1
  j     pow_loop
pow_conclude:
  jr    $ra 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:37:58.233

记住你在学校里是如何将纸上的数字相乘的。将您的输入分解为 16 位或 32 位组件，并将所有部分乘积相乘，然后将它们相加，注意进位链。

在不知道 MIPS 的情况下，但基于 @russjohnson09 的自我回答：

假设您在这里（从`$a0`和`$v0,v1`）执行 32*64 位，您将得到 96 位结果。像这样的东西：

```
 mult  $v0, $a0
  mflo  $v0
  mfhi  $v2
  mult  $v1, $a0
  mflo  $v1
  add   $v1,$v1,$v2 
```

96 的高 32 位是第二个`add`加号`mfhi`之后的进位`mult`，但我假设你在循环中，这个上半部分将始终为 0。换句话说，连续的 32*64 被截断为 64 位。

# .net - 对于（某些）网络文件，WebBrowser 中的文件显示速度非常慢

> ID：13587571
> 
> 赞同：0
> 
> 时间：2012-11-27T15:32:59.093
> 
> 标签：.net, windows, vb.net, winforms, unc

我有一个包含 WebBrowser 的 Windows 窗体，我用它在我的应用程序中显示 PDF 文档。我有一个带有 FileName 属性的 Document 类，并且 WebBrowser 的源绑定到该属性。

但是，对于某些网络文件，表单可能需要大约 30 秒（有时长达 2 分钟）来显示单个 PDF 文件。网络共享托管在 IBM iSeries 上。

该问题仅在 Windows 7 中发生（在 XP 上，文件立即打开），并且仅发生一次：

*   用户启动工作站
*   启动程序
*   尝试查看 UNC 文件：长时间延迟
*   关闭窗口
*   尝试查看同一文件或任何其他 UNC 文件：立即打开

关于可能导致这种情况的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:50:25.653

尝试在 IE 浏览器中禁用“检测自动设置”。我知道这听起来很奇怪，但是由于此设置，我遇到了客户端通过网络访问文件的问题！

只是一个想法....

# mysql - 我应该使用 double 类型在 mysql DB 中保存坐标吗？

> ID：13587577
> 
> 赞同：0
> 
> 时间：2012-11-27T15:33:16.377
> 
> 标签：mysql, gps, double, coordinates

> **可能重复：**
> [在 MySQL 数据库中存储纬度/经度时使用的理想数据类型是什么？](https://stackoverflow.com/questions/159255/what-is-the-ideal-data-type-to-use-when-storing-latitude-longitudes-in-a-mysql)

我有 GPS 坐标和一些服务提供商转换后的地图坐标以保存到 dababase。我不知道我保存哪种类型的数据是明智的，varchar、float、double？也很容易使用。

我应该根据这些数据进行查询，例如查找“大于”或“小于”特定距离的位置。

“双”似乎没问题。但是当我查看它保存在数据库中的值时。它看起来不好看。它在末尾添加了许多零，因为我必须设置一个小数和长度，这只是基于我拥有的数据的猜测。它有可能改变的风险。事实证明，在其中有数据后，我无法更改小数点。如果我这样做了，我只是清理了所有现有数据。

我不知道哪种方式有效且正确。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:20:34.917

使用浮动而不是双重，除非您是规划三英亩停车场或桥梁的土木工程师。在这种情况下，您已经知道您是使用兰伯特投影还是通用横轴墨卡托投影进行制图工作，以及您的高程基于哪个基准。如果该行话对您来说也可能是古代梵语，那么您只需要浮动，而不是双重。

GPS坐标和用于将它们应用于商店查找器之类的常规haversine算法根本没有比float提供的精度更高。造成这种情况的原因很复杂，但它们与地球不是一个完美的球体这一事实有关。

顺便说一句，-xxx.yyyyy 显示精度对 MySQL 来说还不错。

```
SELECT FORMAT(latitude, 5) AS latitude 
```

做您需要从显示器上去除大量尾随零的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:43:04.203

我使用 MySQL 的`DECIMAL`数据类型，它也处理坐标中的负值。

# java - 如何从 jar 的“内部”访问 jar 中的非类文件

> ID：13587578
> 
> 赞同：2
> 
> 时间：2012-11-27T15:33:17.143
> 
> 标签：java, jar

这应该很简单，但花了我几个小时。我在此站点上找到的所有内容都表明我做得对，但仍然找不到该文件。

在 jar 文件中，我在顶层有两个文件“CDAkeystore.jks”和“CDAtruststore.jks”。然而，当我打电话时， `securityProps.setProperty("javax.net.ssl.keyStore","CDAkeystore.jks");` 我得到一个系统找不到请求的文件错误。调用此方法的类文件在通常的包排列中位于同一个 jar 中。

jar文件如下：

```
com ..... (a lot more class files)
org ..... (lots of class files)
META-INF
CDAtruststore.jks
CDAkeystore.jks 
```

这怎么会这么难？！

---------- 添加信息 ------n

由于使用路径的对象是开源的，我找到了他们用来加载文件的例程。这是：

InputStream keystoreInputStream = preBufferInputStream(new FileInputStream(keyStoreName));

根据 FileInputStream(String name) 的文档是

通过打开与实际文件的连接来创建 FileInputStream，该文件由文件系统中的路径名“name”命名。那么这条路径应该如何表达呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:38:26.593

使用`YourClass.class.getResourceAsStream()`或`this.getClass().getResourceAsStream()`。如果您在多个类加载器环境中，您也可以使用类加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:58:28.797

简而言之，答案是你不能。至少在这种情况下。我坚持将文件路径传递给我无法控制的库实现。因此，库方法在文件以解压缩形式存在于操作系统文件系统中的假设下访问文件。它从 Property.setProperty(stringKey, stringPath) 获取路径所以我发现的唯一解决方案是一个丑陋的黑客。我需要获取 jar 中的资源并将其复制到系统上的文件中。然后我会在上面的 setProperty() 方法中传递该文件的路径。丑陋的黑客实现如下（如果其他人能提出更好的解决方案，我会很高兴）。它确实解决了问题。库例程能够找到我新创建的文件。

```
/* This evil reads a file as a resource inside a jar and dumps the file where ever
 * the loader of this jar/application defines as the current directory. This pain is done
 * so the SecurityDomian class can load the file; it cannot access the file from
 * the jar. This means the 'name' passed in contains the file name inside the jar
 * prefixed with "/" so it is not read with an assumed package extension.
 */
private boolean createFileFromResource(String name)
{
    // Dont bother if the file already exists
    if(new File(name.replace("/", "")).exists())
    { 
        return true;
    }
    byte[] keystoreFile = new byte[2048];
    ByteArrayOutputStream byteArrayOut = new ByteArrayOutputStream(2048);
    // Get the resource
    InputStream inputStream = this.getClass().getResourceAsStream(name);
    try
    {
        int bytesRead = 0;
        while(true)
        {
            // Read the resource into the buffer keystoreFile in 2048 byte chunks
            bytesRead = inputStream.read(keystoreFile);
            if(bytesRead < 0)
            {
                break;
            }
            // Copy and append the chunks to the ByteArrayOutputStream (this class
            // does the auto-extending of the output array as more chunks are 
            // added so you don't have to do it.
            byteArrayOut.write(keystoreFile, 0, bytesRead);
        }
        inputStream.close();
        // Now create a file at the root of where ever the loader happens to think
        // the root is. So remove the "/" in front of the file name
        FileOutputStream outputStream = new FileOutputStream(name.replace("/", ""));
        // Write out the file. Note you will be left with garbage at that location.
        byteArrayOut.writeTo(outputStream);
        outputStream.flush();
        outputStream.close();
    } 
    catch (IOException e)
    {
        e.printStackTrace();
        return false;
    }
    return true;
} 
```

# c# - 调用 CLI exe 的过程不返回输出

> ID：13587580
> 
> 赞同：0
> 
> 时间：2012-11-27T15:33:23.710
> 
> 标签：c#, .net, command-line, process, command-line-interface

我有一个正在做一些视频处理的应用程序。

我需要在处理媒体之前对其进行分析。

ffmpeg 实用程序`ffprobe.exe`提供了我需要的所有信息。

但是，我使用的代码不会返回在`cmd`窗口中运行命令时出现的文本：

```
public static string RunConsoleCommand(string command, string args)
{
    var consoleOut = "";

    using (var process = new Process())
    {
        process.StartInfo = new ProcessStartInfo
        {
            FileName = command,
            Arguments = args,
            UseShellExecute = false,
            CreateNoWindow = true,
            RedirectStandardOutput = true
        };

        process.Start();
        consoleOut = process.StandardOutput.ReadToEnd();
        process.WaitForExit();

        return consoleOut;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:47:50.390

Process 类有一些事件来处理：

```
public static string RunConsoleCommand(string command, string args)
{
    var consoleOut = "";

    using (var process = new Process())
    {
        process.StartInfo = new ProcessStartInfo
        {
            FileName = command,
            Arguments = args,
            UseShellExecute = false,
            CreateNoWindow = true,
            RedirectStandardOutput = true
        };

        // Register for event and do whatever
        process.OutputDataReceived += new DataReceivedEventHandler((snd, e) => { consoleOut += e.Data; });

        process.Start();
        process.WaitForExit();

        return consoleOut;
    }
} 
```

您还有 ErrorDataReceived，它的工作方式相同。

我在一些项目中使用这些事件，它就像一个魅力。希望有帮助。

**编辑**：修复了代码，您需要在开始流程之前附加处理程序。

# actionscript-3 - 捕捉警报

> ID：13587586
> 
> 赞同：0
> 
> 时间：2012-11-27T15:33:48.243
> 
> 标签：actionscript-3, apache-flex, flex3

我希望能够停止显示警报。当调用 Alert.show 时，我希望能够获取消息并阻止 Alert 显示。

如果有人知道如何做到这一点，我真的很感激。

谢谢，戴夫

# css - 如何用一个插件解决所有 IE CSS 问题？

> ID：13587594
> 
> 赞同：0
> 
> 时间：2012-11-27T15:34:02.673
> 
> 标签：css, internet-explorer, plugins

我在 IE 版本上遇到问题。IE问题有不同的js插件。例如：jquery.corner.js 用于角半径。那么，是否有任何插件可以解决所有 IE 问题（IE6、7、8、9）。还是我们必须为每个问题使用不同的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:38:48.617

对于浏览器不一致，没有万能的解决方案。对于网络开发人员来说，这是最糟糕的事情。

不过，有些事情可以让你更轻松。其中之一是从一个好的开始`reset css`。谷歌它有几个选项。

一个开始的地方是[http://html5boilerplate.com/](http://html5boilerplate.com/)，但还有其他一些帮助。

还编写良好的语义 html 并从那里开始工作有助于避免浏览器特定的问题。

# git - Git 分支依赖

> ID：13587596
> 
> 赞同：1
> 
> 时间：2012-11-27T15:34:05.927
> 
> 标签：git, version-control, branch

我正在做一个有许多存储库的大项目，它们位于不同的文件夹中。

1 - 共享库
2 - API（使用库）
3 - 移动应用程序（使用 api）
4 - 带有 CMS 的网站（使用 api 和库）
5 - 客户信息系统（使用api和库）

该库是符号链接的，以防止重复，API 是基于休息的，可以在外部调用......

我遇到了其他开发人员的一些问题，我们在 repo 中开发新功能，需要在库中创建新分支 api，然后说网站。当另一个开发人员开始使用此功能时，一个分支对另一个分支的依赖关系并不明显。有没有办法让分支依赖项跨 repos 链接？因此，如果我在网站上签出 feature-1 分支，git 还会在依赖库和 api repos 上签出相应的功能组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:56:21.740

编辑自[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

在这种情况下会出现一个常见问题：您希望能够将每个项目视为单独的项目，但仍然能够在另一个项目中使用其中一个。包含该库的问题在于，很难以任何方式自定义该库，而且通常更难以部署它，因为您需要确保每个客户端都有该库可用。将代码供应到您自己的项目中的问题是，当上游更改可用时，您所做的任何自定义更改都难以合并。Git 使用子模块解决了这个问题。子模块允许您将 Git 存储库保留为另一个 Git 存储库的子目录。这使您可以将另一个存储库克隆到您的项目中并保持您的提交分开。

您应该做的第一件事是将外部存储库克隆到您的子目录中。您可以使用以下命令将外部项目添加为子模块：

```
git submodule add 
```

您可以进入该子目录、进行更改、添加自己的可写远程存储库以将更改推送到、从原始存储库获取和合并等等。如果您在添加子模块后立即运行 git status，您会看到两件事：

```
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#      new file:   .gitmodules
#      new file:   <name_of_cloned_repo>
# 
```

首先你注意到 .gitmodules 文件。这是一个配置文件，用于存储项目 URL 和您将其拉入的本地子目录之间的映射：

```
$ cat .gitmodules 
[submodule "rack"]
      path = rack
      url = git://github.com/chneukirchen/rack.git 
```

尽管它是您工作目录中的一个子目录，但 Git 将其视为一个子模块，并且当您不在该目录中时，它不会跟踪其内容。相反，Git 将其记录为来自该存储库的特定提交。当您在该子目录中进行更改并提交时，超级项目会注意到那里的 HEAD 已更改并记录您当前正在处理的确切提交；这样，当其他人克隆这个项目时，他们可以准确地重新创建环境。

这是子模块的重要一点：您将它们记录为它们所在的确切提交。您不能在 master 或其他一些符号引用处记录子模块。

您可以将该目录视为一个单独的项目，然后使用指向该子项目中最新提交的指针不时更新您的超级项目。所有 Git 命令在两个目录中独立工作......

# javascript - 如何在 iframe 中使用 window.open

> ID：13587599
> 
> 赞同：1
> 
> 时间：2012-11-27T15:34:13.503
> 
> 标签：javascript, html

我在网页中注入了一个 iframe。在 iframe 中，我添加了一个`window.open()`，如下所示：

```
window.open("mypage.com", "_self"); 
```

但这会使用*mypage.com*刷新 iframe 。要求是在同一个主浏览器中加载此页面。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:42:57.933

`window.open`如果您想*打开一个窗口*，请使用。

如果要将文档加载到当前框架中，请使用`location = "http://example.com";`

如果要将文档加载到顶级框架中，请使用`top.location = "http://example.com";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:42:57.733

尝试这个：

```
window.top.location.href = "http://mypage.com"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:36:03.897

改变

```
window.open("mypage.com", "_self"); 
```

至

```
window.open("mypage.com", "mypopupname"); 
```

# python - Pylint 忽略 disable-msg - 但仅依赖于同一 go 中 linted 的其他模块

> ID：13587600
> 
> 赞同：0
> 
> 时间：2012-11-27T15:34:13.633
> 
> 标签：python, pylint

我对 pylint 有疑问，我怀疑这可能是一个错误，但我很难将其归结为可出票的东西，所以我想知道其他人是否经历过我正在经历的事情，如果是，如何解决.

在我工作的公司，我们已经开始对整个代码库进行 lint，这基本上是通过

```
find my_subdir -iname '*.py' | sort | xargs pylint 
```

在三个模块中，例如 m_a、m_b 和 m_c，存在无法避免的 W0201 违规，我已将违规行标记为

# pylint: disable-msg=W0201

除了遇到的第一个模块 (m_a) 之外，这有效，该指令被忽略。（无论我是否将其移至整个方法、类或模块的范围，它都会被忽略。）对于模块 m_b 和 m_c，该指令生效。

如果我删除 m_a，那么我会在 m_b 上得到“忽略指令”效果（如果我删除它，我会在 m_c 上得到它。）所有三个模块都依赖于第四个模块，比如 m_x，所以我尝试更改命令行到

```
find my_subdir -iname '*.py' | sort | grep -v 'm_x' | xargs pylint 
```

现在棉绒通过了（即“忽略指令”效果不会发生。）

这一切都向我表明，在 Pylint 中，从一个模块的检查到下一个模块存在某种状态，但我找不到任何关于此的文档。它是 Pylint 的已知行为吗？

如果这是一个错误，那么我想帮助解决它。遗憾的是，代码库是机密且庞大的，因此我可能需要自己调试 Pylint 代码库。因此，我希望有人能告诉我应该从哪里开始寻找？

编辑： pylint --version 的输出是： `pylint 0.26.0, astng 0.24.1, common 0.58.3 Python 2.7.3 (default, Aug 1 2012, 05:14:39) [GCC 4.6.3]` 我试图以较小的规模重现该问题，但到目前为止还没有运气。

# python - 观察 Python 中调用了哪个函数

> ID：13587602
> 
> 赞同：2
> 
> 时间：2012-11-27T15:34:19.387
> 
> 标签：python, debugging

在 Python 中记录用于调试的函数调用的最简单方法是什么？我通常对给定类的特定函数或所有函数感兴趣。有时甚至是调用特定对象属性的所有函数。查看调用参数也会很有用。

我可以想象为所有这些编写装饰器，但是我仍然必须在不同的地方修改源代码。编写一个修改所有方法的类装饰器并不是那么简单。

有没有不需要修改源代码的解决方案？理想情况下，不会让 Python 太慢的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:54:38.140

你应该能够实现一些你想要使用的[`sys.setprofile()`](http://docs.python.org/2/library/sys.html#sys.setprofile)东西[`sys.settrace()`](http://docs.python.org/2/library/sys.html#sys.settrace)。它们都允许您定义在发生特定“事件”（如函数调用）时要调用的函数，并将附加信息传递给这些信息，这些信息可用于确定被调用的函数/方法并检查其参数。

如果您环顾四周，可能有示例使用代码可以作为一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:44:08.547

除了装饰器，对于 Python >= 3.0，您可以为类使用新的 __getattribute__ 方法，每次调用对象的任何方法时都会调用该方法。你可以通过 Lutz “Learning Python” 第 31、37 章来了解它。

# google-app-engine - 使用 @Parent 时请求工厂稳定 ID、@ID

> ID：13587625
> 
> 赞同：0
> 
> 时间：2012-11-27T15:35:12.370
> 
> 标签：google-app-engine

我想知道是否有办法在服务器上获取实体的 stableId？或者对我的情况有更好的解决方案吗？

在我的应用程序中，我有两个实体 A 和 B。B 有一个父 A。

```
A Class

      @ID 
      Long id

      String name

B Class

    @Parent A

     @ID 
     Long id

     String value 
```

我有一个广播系统，可以向注册的客户端发送消息，并在这些对象发生更改时通知他们。如果我发送 A 并按 ID 匹配，一切都会好起来的。如果我尝试通过 ID 与 B 匹配，我会遇到问题，因为 id 不会是唯一的。

```
B Message
     Long id 
```

当客户端收到上面的 B 消息并且我尝试比较 id 字段时，多个 B 对象将是相同的。

这种情况如何最好地处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:11:28.577

具有祖先的对象（如 B）有一个键，该键是它自己的 ID 和祖先的 ID 的组合。由于您没有详细显示您的代码，因此我无法直接解决它，但我可以提出两种处理方法。

1.  使用对象 B 的 Key 而不是它的 id。它们的关键包括对 A 的引用。

2.  由于密钥很大，您可能不想使用整个密钥。在这种情况下，您需要同时使用 A 的 id 和 B 的 id 来识别 B。使用这两个 id，您可以获得 B。您可以重建 Key 并通过 key 获取 B，或者使用祖先查询指定 A 作为祖先。

# ruby-on-rails - Ruby 和 Rails 或 Ruby on Rails

> ID：13587631
> 
> 赞同：0
> 
> 时间：2012-11-27T15:35:27.363
> 
> 标签：ruby-on-rails, ruby

我了解 Rails 是一个基于 Ruby 构建的 Web 框架。Ruby 是一种独立于 Rails 使用的语言。我不知道最好单独使用两者还是最好使用 Ruby on Rails。

或者 Ruby on Rails 是一个完全不同的框架，只是使用 Ruby 代码和 Rails 代码？你能同时安装 Ruby 和 Rails 并将它们设置在一起吗？如果上述情况属实，那么 Ruby on Rails 是什么以及与将 Ruby 和 Rails 设置为一体相比，使用它的好处是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:41:07.743

红宝石 => 编程语言

RUBY ON RAILS => 用 ruby​​ 编写的 Web 框架

ROR / RAILS => RUBY ON RAILS 的快捷方式

这仍然令人困惑吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:49:54.977

名称“Ruby on Rails”有时会缩写为“Rails”或“RoR”，它是相同的 - 一个 Web 开发框架。

当然，您可以使用没有*Rails的**Ruby*，因为您可以使用任何其他编程语言来构建不同的程序，而不仅仅是 Web 应用程序。

 *不使用*Ruby*就无法使用*Rails*，因为正如您自己编写的那样，*Rails*是一个用 Ruby 构建的 Web 框架。当您在*Rails中构建 Web 应用程序时，您会使用**Ruby*语言编写代码（还有一些*Rails*的其他重写，例如使用*Groovy的**GRails* ，但这是另一回事）。

 ***如果您按照[入门](http://rubyonrails.org/download)页面上的安装指南，您将看到您首先为您的平台安装*Ruby*，然后安装*RubyGems*（它是用于安装其他 Ruby 库的包管理器），然后使用RubyGems*命令* `gem install rails`安装*Rails*它的依赖关系。所以你可能会说*Rails*是一个*Ruby*库。

这个*Rails*安装提供了一组脚本，包括`rails`命令，它们可以帮助您根据*Rails*采用的一组约定构建 Web 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:41:48.433

从[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)：

> Rails 是一个运行在 Ruby 编程语言上的 Web 应用程序框架。

我强烈建议您阅读本指南。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T16:53:30.263

好吧，似乎很多人不知道 Ruby，但他们知道 Rails。就像我知道如何在不真正理解 JavaScript 的情况下使用 JQuery 一样。所以你问这个问题并没有完全偏离轨道:)

但老实说，在不了解 Ruby 的情况下只使用 Rails 并没有什么乐趣。一旦你了解了 Ruby，你就会发现它不仅仅是 Rails。

我建议您先熟悉 Ruby，然后再看看您是否喜欢这种语言。如果你这样做了，你可以更进一步并尝试 Rails。如果 Ruby 不适合您的语言口味，请尝试使用不同的语言，例如 Java、Erlang 或 Python（无论如何，这并不重要，并且 - 一如既往 - 取决于您要解决的问题）。

如果您喜欢 Ruby，您很快就会了解到还有其他不错的 Web 框架，例如 Sinatra，它们更小，可能更适合您的需求。同样，这取决于您的需求。

阅读一些语言，主要是他们的网站提供了一些关于他们喜欢什么以及他们擅长什么的洞察力。检查[http://ruby-lang.org](http://ruby-lang.org)以获取 Ruby！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T15:40:57.510

Ruby on Rails 是使用 Ruby 构建的 Web 开发框架。所以它借用了语法和一些功能。Ruby 是一种编程语言，它并不特定于领域。Ruby 可以用于多个领域。如果你想开发一个 Web 应用程序，你需要使用 Ruby on Rails。有许多基于 Ruby 构建的 Web 框架。

要了解 Rails，您需要了解 Ruby 的基础知识。所以最好先启动 Ruby。一旦你掌握了基础知识，你就可以同时学习两者。

对于 Ruby，请参阅：[http ://www.ruby-doc.org/docs/ProgrammingRuby/](http://www.ruby-doc.org/docs/ProgrammingRuby/)

对于 RoR，请参阅： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

使用 RVM（Ruby 版本管理器）：安装。链接：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T15:43:22.710

Ruby 是一门语言，Ruby on Rails 是一个网络框架。它更像 C# 和 ASP.NET、Python 和 Django 或 Java 和 Spring。因此，使用 Ruby 实现的一切都可以通过 Rails 实现，反之，在 Rails 中实现的一切都可以在 Ruby 中实现，但它可能比使用 RoR 更难、更长或更不清晰。****

# facebook - 应用请求显示在 Facebook 通知上，但未显示在“Facebook 移动应用”上

> ID：13587634
> 
> 赞同：2
> 
> 时间：2012-11-27T15:35:40.607
> 
> 标签：facebook, mobile, notifications, request, facebook-javascript-sdk

应用请求显示在 Facebook 通知上，但未显示在“Facebook 移动应用”上。

该请求在 facebook.com 网站上显示为应有的样子，单击该请求即可完美运行。

说了这么多 Facebook 移动应用程序，在我们的 android 和 iPhone 上并没有在通知弹出窗口中显示应用程序请求。

我们通过js sdk生成请求，如下：（我已经更改了实际值）

```
FB.ui({method: 'apprequests',
  message: 'This is the request text',
  to: 123123123,1231231231,123123123,
  data: {
    uuid: 420,
  }
  }, function(response) {
}); 
```

# javascript - Internet Explorer IE 10 的 __proto__ 解决方法

> ID：13587635
> 
> 赞同：5
> 
> 时间：2012-11-27T15:35:43.207
> 
> 标签：javascript, html, prototype, prototypal-inheritance

我们在工作中使用了一个自定义 JavaScript 库，我们这样做：

```
DOM.__proto__ = Library.prototype; 
```

快速传输内部函数/属性 DOM 对象，以便可以像 jQuery 那样使用它。

对于一个新项目，我们需要为 Internet Explorer 实现它，但不幸`__proto__`的是 IE 不支持。

对此有什么想法和解决方法吗？要求只有 IE10（但 IE9 也不错）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-21T14:32:38.723

与其`__proto__`在创建`DOM`对象后分配给，不如使用[`Object.create`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)（[MSDN](http://msdn.microsoft.com/en-us/library/ie/ff925952(v=vs.94).aspx)，自 IE9 起支持）*创建*具有正确原型的对象，然后为其分配属性。

```
var DOM = {};
DOM.__proto__ = Library.prototype;
```

```
var DOM = Object.create(Library.prototype);
```

如果您想修改现有（甚至可能是外来）对象的原型，请避免使用它。无论如何，这是一个不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:35:42.453

您可以使用 API 包装它，而不是直接扩展 DOM 元素；

```
// Wrapping Constructor
function Library(element) {
  this.element = element;
}

// Whatever it is your library does
Library.prototype = {
  // some example method
  html: function(markup) {
    // refer to "this.element" instead of "this"
    this.element.innerHTML = markup;
  }
};

// example
var wrappedElement = new Library(document.getElementById('unique'));

// refer to the API rather than the Element directly
wrappedElement.html('<span>Hello World</span>'); 
```

您还可以通过[使用这种技术安全地继承 Array 来](http://dean.edwards.name/weblog/2006/11/hooray/)进一步扩展 Library 。

希望这会有所帮助，谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T14:18:48.150

如何扩展它：

```
$.extend(Element.constructor.prototype, Library.prototype); 
```

编辑：由于*公众的强烈抗议*，我会注意到这`extend`是 2014 年 JS 编程背景下的一个非常熟悉的概念。你可以在网上找到很多关于它是什么以及它是如何工作的例子，而且非常好您在项目中已经使用的至少一个库可能会实现它（jQuery、Lo-Dash/Underscore、AngularJS、Ember.js...）

# vba - 如何获取表单的最后一个记录ID？

> ID：13587638
> 
> 赞同：2
> 
> 时间：2012-11-27T15:35:45.143
> 
> 标签：vba, ms-access

我目前有一个可以访问的表格。

我想要做的是获取添加的最后一条记录的值。

例如，如果我有 10 条记录，我想获取值“10”，因为这是添加的最后一条记录的 id。我正在尝试使用函数 last id insert() 运行查询，但它不起作用。

这是我正在使用的代码：

```
Dim lastID As Integer
Query = "select last_insert_id()"
lastID = Query
MsgBox (lastID) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T21:38:56.097

有一个函数`DMax`可以获取最大的数字。

```
Dim lastID As Integer
lastID = DMax("IDField","YourTable")
' or = DMax("IDField","YourTable","WhenField=Value")
MsgBox lastID 
```

其他*域功能*是：

*   平均
*   DCount
*   第一
*   上一个
*   查找
*   最小
*   DStDev
*   DStDevP
*   总和
*   DVar
*   DVarP

使用您的友好`F1`密钥查看更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T08:54:55.743

继最后的评论之后，这是我最近用来将记录集的最后一个 ID 值转换为变量以在 VBA 中使用的一段代码。但是，这并不是很好，因为我仍然无法弄清楚如何将记录的 ID 字段值直接转换为变量。相反，我使用了将记录集复制到 Excel 工作簿中的不雅解决方案，然后将变量值设置为我刚刚复制到的单元格的值。

编辑：制定了如何将 ID 转换为简单变量：最后的新代码

这都是从单个客户端工作簿运行的：

```
Option Explicit
Public AftUpD As Long
Public BfrUpD As Long

Sub AssignLstRowAftUpD2()

    Dim dbPP As DAO.Database
    Dim ResTemp As DAO.Recordset
    Dim z As Long
    Dim SelectLast As String

    SelectLast = "SELECT Max(Table1.ID) AS MaxOfID FROM Table1"
    'Debug.Print SelectLast

    Set dbPP = OpenDatabase("C:\filepath\Database11.mdb")
    Set ResTemp = dbPP.OpenRecordset(SelectLast)

    If ResTemp.EOF Then
            GoTo EndLoop
        End If

    Worksheets("Diagnostics").Visible = True
    Worksheets("Diagnostics").Range("C4").CopyFromRecordset ResTemp
    z = Sheets("Diagnostics").Range("C4").Value
    Sheets("Diagnostics").Visible = False
    AftUpD = z
    'Debug.Print AftUpD

EndLoop:
        ResTemp.Close
        dbPP.Close

    Set dbPP = Nothing
    Set ResTemp = Nothing
    'Set SelectionLast = Nothing
    'z = Nothing

End Sub 
```

然后我使用这个值作为一个变量来创建一个新的 SQL 查询：

```
Sub Query()
   'This query uses the highest ID value in a companion spreadsheet (the public  
   'variable BfrUpD), which is set in a sub I haven't posted here, to find out 
   'how many records have been added to the database since the last time the
   'spreadsheet was updated, and then copies the new records into the workbook

   'Be warned: If you run this query when BfrUpD is equal to or greater than AftUpD it 
   'will cause a crash. In the end user version of this, I use several If tests,
   'comparing BfrUpD with other public variables, to make sure that this doesn't
   'happen.
    Dim WBout As Excel.Workbook, WSout As Excel.Worksheet
    Dim dbPP1 As DAO.Database
    Dim qryPP1 As DAO.Recordset
    Dim ResTemp1 As DAO.Recordset
    Dim TestValue As String
    Dim strSQL2 As String

    TestValue = BfrUpD
    'Debug.Print TestValue
    strSQL2 = "SELECT * FROM Table1 WHERE (((Table1.ID)>" & TestValue & "))"
    'Debug.Print strSQL2

    Set dbPP1 = OpenDatabase("C:\filepath\Database11.mdb")
    Set qryPP1 = dbPP1.OpenRecordset(strSQL2)

    Set WBout = Workbooks.Open("C:\filepath\h.xlsm")
    Set WSout = WBout.Sheets("sheet1")
    WSout.Range("A1").End(xlDown).Offset(1, 0).CopyFromRecordset qryPP1

    qryPP1.Close
    dbPP1.Close
    WBout.Save
    WBout.Close

    MsgBox "Data copied. Thank you."

Set WBout = Nothing
Set WSout = Nothing
Set dbPP1 = Nothing
Set qryPP1 = Nothing
Set ResTemp1 = Nothing

End Sub 
```

编辑：将字段值直接放入变量的代码

```
 Dim dbPP As DAO.Database
    Dim ResTemp As DAO.Recordset
    Dim z As Long
    Dim SelectLast As String

    SelectLast = "SELECT Max(Table1.ID) AS MaxOfID FROM Table1"
    'Debug.Print SelectLast

    Set dbPP = OpenDatabase("C:\filepath\Database11.mdb")
    Set ResTemp = dbPP.OpenRecordset(SelectLast)
    z = ResTemp(0) 'specifying it's array location (I think) - there is only one
    'item in this result, so it will always be (0)

    AftUpD = z
    'Debug.Print AftUpD
    ResTemp.Close
    dbPP.Close

Set dbPP = Nothing
Set ResTemp = Nothing
'Set SelectionLast = Nothing
'z = Nothing 
```

结束子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:56:36.240

您要做的是设置并保存一个查询，该查询首先为您获取值。称之为 MaxID

例如

```
SELECT Max(ID) as result FROM Your_Table_Name 
```

然后，在您的 VBA 代码中，将您的变量设置为

例如。

```
Dim IDresult As Integer
IDresult = DLookup("[result]", "MaxID")
MsgBox(IDresult) 
```

# jquery - 如何禁用页面内的控件并防止键入文本

> ID：13587639
> 
> 赞同：1
> 
> 时间：2012-11-27T15:35:49.543
> 
> 标签：jquery

我想使用 jQuery 禁用页面中的所有控件：

```
$("form").attr("disabled", "disabled"); 
```

但我仍然可以在每个输入控件上键入文本。

我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:36:46.860

试试这个：

```
$("form *").prop("disabled", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:36:43.287

如果要禁用`all the input types like text, checkbox, radio etc`，可以在表单中使用输入。

```
$("form input").attr("disabled", "disabled"); 
```

# arduino - 如何使用 Arduino 编译草图

> ID：13587640
> 
> 赞同：0
> 
> 时间：2012-11-27T15:35:49.640
> 
> 标签：arduino, atmel

我有一个使用[ATmega168PV](http://www.atmel.com/ja/jp/devices/ATMEGA168P.aspx)的定制板，我有一个 bin 文件，当我使用 Atmel Studio 6.0 时，我可以将它编程到我的板上。

我有二进制的源代码（草图格式），我想更改/编译代码并用它们对电路板进行编程。

我可以在 Arduino IDE 中打开我的 *.ino 文件，它正在验证它并说

```
Binary sketch size: 12,096 bytes (of a 32,256 byte maximum) 
```

但我搜索了文件存在的文件夹，但找不到任何二进制文件。

如何使用 Arduino IDE 编译代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:20:45.083

构建过程

草图由 avr-gcc 编译。

包含路径包括草图的目录、目标目录（/hardware/core//）和 avr 包含目录（/hardware/tools/avr/avr/include/），以及任何库目录（在 /hardware/libraries /) 其中包含一个头文件，该头文件包含在主草图文件中。

当您验证草图时，它会构建在系统临时目录中的一个临时目录中（例如 Mac 上的 /tmp）。当您上传它时，它会构建在草图目录的 applet/ 子目录中（您可以通过“草图”菜单中的“显示草图文件夹”项访问）。

目标的 .c 和 .cpp 文件被编译并以 .o 扩展名输出到该目录，主草图文件和草图中的任何其他 .c 或 .cpp 文件以及任何中的任何 .c 或 .cpp 文件也是如此#include 在草图中的库。

然后将这些 .o 文件链接到一个静态库中，并将主草图文件链接到该库。只有草图所需的库部分包含在最终的 .hex 文件中，从而减小了大多数草图的大小。

.hex 文件是编译的最终输出，然后上传到开发板。在“验证”期间，.hex 文件被写入 /tmp（在 Mac 和 Linux 上）或 \Documents and Settings\\Local Settings\Temp（在 Windows 上）。在上传过程中，它被写入草图目录的小程序子目录（您可以使用草图菜单中的“显示草图文件夹”项打开）。

在您的临时文件夹中搜索 *.cpp.hex

# mysql - MYSQL：如果另一列等于其他列，则计算列

> ID：13587646
> 
> 赞同：3
> 
> 时间：2012-11-27T15:36:03.743
> 
> 标签：mysql, sql

我有下表：

```
----------------------------------------------
|ID|Vote_Item_ID|User_ID|Country_code|   Vote|
|01|   105102151|user1  |          CA|   like|
|02|   105102151|user2  |          CA|dislike|
|03|   105102151|user3  |          UK|dislike|
|04|   105102151|user4  |          UK|   like|
|05|   105102151|user5  |          UK|   like|
---------------------------------------------- 
```

我需要做的是创建一个 SQL 语句，该语句创建一个数组，汇总每个国家的好恶……我使用的脚本有 175 个国家，那么这是一种低效的方法吗？

我不确定如何编写 Select 语句，因为我希望脚本可用于许多不同的“vote_item_id”

顺便说一句，我正在将 PDO 与 MYSQL 数据库一起使用。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T15:38:16.613

```
SELECT  Country_Code,
        SUM(CASE WHEN vote = 'like' THEN 1 ELSE 0 END) `like`,
        SUM(CASE WHEN vote = 'dislike' THEN 1 ELSE 0 END) dislike
FROM tableName
GROUP BY Country_Code 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d483bb/1)

或者如果你愿意`PreparedStatement`（*两者都给出相同的结果*）

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN vote = ''',
      Vote,
      ''' then 1 Else 0 end) AS `',
      Vote, '`'
    )
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  Country_Code, ', @sql, ' 
                   FROM tableName
                   GROUP BY Country_Code');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d483bb/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:01:53.480

如果您显示了预期的输出，那就太好了。以下示例很简单。因此，让我们知道您真正需要什么。很乐意参​​与。:)

参考：[SQLFIDDLE](http://sqlfiddle.com/#!2/03da7/8)

代码：

```
 SELECT t.country_code,
         sum(CASE WHEN t.vote = 'like' 
               THEN 1 ELSE 0 END) AS LIKES,
         sum(CASE WHEN t.vote = 'dislike' 
               THEN 1 ELSE 0 END) AS DISLIKE         
   FROM tbl t
   GROUP BY t.country_code
  ; 
```

结果：

```
COUNTRY_CODE    LIKES   DISLIKE
CA                1     1
UK                2     1 
```

# sql - t-sql 中的光标

> ID：13587650
> 
> 赞同：-5
> 
> 时间：2012-11-27T15:36:05.643
> 
> 标签：sql, sql-server, tsql, cursor

这段代码是什么意思？

```
DECLARE Users CURSOR LOCAL FAST_FORWARD READ_ONLY FOR
SELECT 
    Username,
    Password
FROM View_V_User
WHERE CF = @UserID
AND Scheduling = 'absolute' 
```

特别是第一行代码是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:40:03.457

MSDN 上的光标文档：http: [//msdn.microsoft.com/en-us/library/ms180169 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms180169(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:38:38.090

请阅读文档。它非常清晰简洁，应该可以帮助您：

[MSDN 游标](http://msdn.microsoft.com/en-us/library/ms180169%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T15:38:52.643

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms180169.aspx)：

**当地的**

> 指定游标的范围对于创建游标的批处理、存储过程或触发器是本地的。游标名称仅在此范围内有效。游标可以被批处理、存储过程或触发器中的局部游标变量或存储过程的 OUTPUT 参数引用。OUTPUT 参数用于将本地游标传递回调用批处理、存储过程或触发器，它们可以将参数分配给游标变量以在存储过程终止后引用游标。当批处理、存储过程或触发器终止时，游标被隐式释放，除非游标在 OUTPUT 参数中传回。如果它在 OUTPUT 参数中传回，则当引用它的最后一个变量被释放或超出范围时，游标将被释放。

**FAST_FORWARD**

> 指定启用了性能优化的 FORWARD_ONLY、READ_ONLY 游标。如果同时指定了 SCROLL 或 FOR_UPDATE，则无法指定 FAST_FORWARD。

**只读**

> 防止通过此游标进行更新。不能在 UPDATE 或 DELETE 语句的 WHERE CURRENT OF 子句中引用游标。此选项会覆盖要更新的游标的默认功能。

游标在完成后应该被隐式释放，它针对选择进行了优化，并且不能用游标完成更新。

# nginx - 使用 nginx 进行负载均衡

> ID：13587653
> 
> 赞同：1
> 
> 时间：2012-11-27T15:36:08.467
> 
> 标签：nginx, load-balancing

我有一台机器，只安装了 nginx，没有乘客，它充当负载均衡器，其上游列表中的某些机器的 ips。所有的应用程序机器都有 nginx 和为主要应用程序服务的 phusion 乘客。现在一些应用机器是中型的，而另一些是大型的。据我所知，默认的 nginx 负载平衡方案是轮询。由于负载在大型和中型机器之间平均分配，如果流量大，中型机器就会过载，而当流量较少时，大型机器的资源就会被浪费。现在我使用 newrelic 来监控这些机器上的 cpu 和内存，并使用脚本从 newrelic 中获取数据，那么有没有办法使用这些数据来决定负载均衡器上的流量路由。

我知道的一种方法是监视并标记上游机器好或坏，然后用好的机器替换上游并每次重新加载 nginx.conf 而不完全重启。所以我的第二个问题是正确的方式。换句话说，它有任何缺点还是会导致任何问题？

第三个也是更普遍的问题是否有更好的方法来解决这个负载平衡问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:41:36.657

您可以使用另一种负载均衡算法来更公平地分配负载：http: [//nginx.org/r/least_conn](http://nginx.org/r/least_conn)或/和配置[权重](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#server)。

如果您的目标是更快的请求处理而不是无意义的数字，那么根据当前的 cpu/内存使用情况做出决定并不是一个好主意

# ruby-on-rails - Rails：无法识别 PDF 的新资产路径

> ID：13587660
> 
> 赞同：8
> 
> 时间：2012-11-27T15:36:29.567
> 
> 标签：ruby-on-rails, ruby, hyperlink, assets

我有一个 Rails 应用程序，我在其中添加了一个新资产。我`information`在 assets 文件夹中添加了一个名为 的新文件夹，其中有一个名为`xyz.pdf`.

问题是我正在尝试创建指向该 PDF 的链接，但是应用程序抛出了一个错误：`No route matches [GET] "/assets/information/xyz.pdf"`

我在`config/application.rb`文件中添加了新资产：

> config.assets.paths << "#{Rails.root}/app/assets/information"

这是我正在使用的链接：

> ```
> <%= link_to "Information Pack", "assets/information/xyz.pdf", :class => "links" %> 
> ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T15:41:08.040

使用资产管道时，您应该使用以下方式引用应用程序中的任何资产：

```
<%= link_to "Information Pack", asset_path("information/xyz.pdf"), :class => "links" %> 
```

或者

```
<%= link_to "Information Pack", asset_path("xyz.pdf"), :class => "links" %> 
```

这将根据运行环境和资产版本号生成不同的路径。

# c# - How to remove dashed rectangle when doing drag and drop

> ID：13587661
> 
> 赞同：2
> 
> 时间：2012-11-27T15:36:32.467
> 
> 标签：c#, wpf, drag-and-drop

I'm following Bea Stollnitz's [blog post](http://www.zagstudio.com/blog/488#.ULTb4qzO0kU) on implementing drag and drop on an data bound ItemsControl. It works very nicely, but I have a question for anyone who's experienced something similar...

When I begin dragging the item, there is a small, dashed rectangle at the bottom of the mouse. I cannot figure out at all how to hide that rectangle. Does anyone know how to get rid of this? I would add a screenshot, but when I do a Print Screen, the rectangle doesn't appear.

I think it has something to do with a focus setting on the `AdornerLayer` that the "DraggedAdorner" is added to.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:46:34.797

Try this in the `Style` of the `Visual` that is surrounded by the rectangle:

```
<Setter Property="FocusVisualStyle" Value="{x:Null}"/> 
```

EDIT: The effect that you are seeing is a result of the `DragDropEffects.Move` assignment. You can mitigate this visual by simply changing the following line (Line #168 in the sample):

```
DragDropEffects effects = DragDrop.DoDragDrop((DependencyObject)sender, data, DragDropEffects.Move); 
```

To this:

```
DragDropEffects effects = DragDrop.DoDragDrop((DependencyObject)sender, data, DragDropEffects.None); 
```

Thus setting the DragDropEffect to DragDropEffects.None

NOTE: In the sample, it evaluates the `DragDropEffects` value in the process of performing the drag & drop, so you would need to work around this (Probably a simple `AttachedProperty`, or even casting the `Sender` as a `FrameworkElement` and using the `Tag` property), but this should resolve the ***visual*** issue.

I hope this helps, and if I can help you further feel free to let me know. Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-03T06:45:31.993

The dashed rectangle is actually part of the default cursor used when performing a drag and drop "Move" operation.

This is the default "Move" cursor:
[![move cursor](../Images/a84de590e001e0b91482e13f64482b7e.png)](https://i.stack.imgur.com/3WRG4.png)

And this is the default "Copy" cursor (if you hold CTRL while dragging):
[![copy cursor](../Images/00d42ac3190710e48c2532d64b834e25.png)](https://i.stack.imgur.com/cY5q2.png)

You can get more control over what mouse cursor is shown by overriding `UIElement.OnGiveFeedback`, or subscribing to the `UIElement.GiveFeedback` [Routed Event](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/routed-events-overview).

When handling the event and changing the cursor, make sure to set `e.Handled = true;` to prevent the cursor from flickering.

For example, use this override on the element initiating the Drag operation (see [this walkthrough](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/walkthrough-enabling-drag-and-drop-on-a-user-control) for more info):

```
protected override void OnGiveFeedback(GiveFeedbackEventArgs e)
{
    if (e.Effects.HasFlag(DragDropEffects.Copy))
    {
        Mouse.SetCursor(Cursors.Cross);
    }
    else if (e.Effects.HasFlag(DragDropEffects.Move))
    {
        Mouse.SetCursor(Cursors.Pen);
    }
    else
    {
        Mouse.SetCursor(Cursors.No);
    }

    e.Handled = true;
} 
```

# xcode - Receiver 是转发类，对应的@interface 可能不存在

> ID：13587666
> 
> 赞同：1
> 
> 时间：2012-11-27T15:36:46.907
> 
> 标签：xcode, class, interface, forward

感谢您花时间阅读我的问题并帮助我:)

我正在构建一个 TabView 项目，在应用程序的选项卡 3 上我有一排专辑，在专辑 3 的第 1 页中，nextButton 将用户带到专辑的第 2 页。Page 2 有更多按钮，包括一个 backPage（返回第 1 页）和一个 backButton（返回专辑选择页面）。

错误：

```
A3Page2ViewController.m:92:49: Property 'view' cannot be found in forward class object 'A3Page1ViewController' 
```

警告：

```
A3Page2ViewController.m:91:28: Receiver 'A3Page1ViewController' is a forward class and corresponding @interface may not exist 
```

我已经搜索了这个网站和其他网站，大多数答案都与如何在标题文件中使用 @Class 和 #import ".h" 应该只在 .m 文件中使用有关。我检查了我的代码并且我遵守了规则，为什么它仍然不起作用？

这就是我所做的：这是显然导致错误的函数（在 A3Page2ViewController 中）......

```
-(IBAction)backPage:(id)sender
{
    a3Page1ViewController = [[A3Page1ViewController alloc]initWithNibName:@"A3Page1ViewController"bundle:nil];
    [self.view addSubview:a3Page1ViewController.view];

} 
```

**请注意，当注释掉时，应用程序运行正常，所有视图都已加载，包括 backButton 在内的所有按钮都可以正常工作。当未注释时，它只是拒绝构建，并出现错误。**

下面我列出了 A3Page1ViewController 和 A3Page2ViewController 的 .h 和 .m 文件。

你可以看到我在正确的地方有@class 和#import ".h"。

奇怪！我实际上在第二个选项卡中有完全相同的代码工作，我用它在视图之间切换没有任何问题。那么为什么它在这里不起作用？！？！

**请帮助我卡住 ATM，我不知道为什么：/**

A3Page1ViewController.h

```
#import <UIKit/UIKit.h>

@class A3Page2ViewController;
@class ThirdViewController;
@class A3P1;
@class A3P2;
@class A3P3;

@interface A3Page1ViewController : UIViewController  {

    A3Page2ViewController*a3Page2ViewController;
    ThirdViewController*thirdViewController;

    A3P1*A3P1;
    A3P2*A3P2;
    A3P3*A3P3;

    UIButton *button1;
    UIButton *button2;
    UIButton *button3;

    UIButton *nextButton;
    UIButton *backButton;
}

@property(nonatomic,retain) IBOutlet A3Page2ViewController *a3Page2ViewController;
@property(nonatomic,retain) IBOutlet ThirdViewController *thirdViewController;
@property(nonatomic,retain) IBOutlet A3P1 *a3P1;
@property(nonatomic,retain) IBOutlet A3P2 *a3P2;
@property(nonatomic,retain) IBOutlet A3P3 *a3P3;

@property (nonatomic, retain) IBOutlet UILabel *logoLabel;
@property (nonatomic, retain) IBOutlet UILabel *descriptionLabel;
@property (nonatomic, retain) IBOutlet UILabel *copyrightLabel;

@property(nonatomic,retain) IBOutlet UIButton *button1;
@property(nonatomic,retain) IBOutlet UIButton *button2;
@property(nonatomic,retain) IBOutlet UIButton *button3;

@property(nonatomic,retain) IBOutlet UIButton *nextButton;
@property(nonatomic,retain) IBOutlet UIButton *backButton;

-(IBAction)FirstButton:(id)sender;
-(IBAction)SecondButton:(id)sender;
-(IBAction)ThirdButton:(id)sender;

-(IBAction)nextPage:(id)sender;
-(IBAction)backButton:(id)sender;

@end 
```

A3Page1ViewController.m

```
#import "A3Page1ViewController.h"
#import "FXLabel.h"
#import <QuartzCore/QuartzCore.h>
#import "A3Page2ViewController.h"
#import "ThirdViewController.h"
#import "A3P1.h"
#import "A3P2.h"
#import "A3P3.h"

@implementation A3Page1ViewController

@synthesize  a3Page2ViewController,thirdViewController,a3P1 ,a3P2 ,a3P3 , logoLabel, descriptionLabel, button1,button2,button3,nextButton,backButton, copyrightLabel;

-(UILabel*)createLabelWithFrame:(CGRect)frame andFontSize:(float)fontSize andText:(NSString*)text
{
    UILabel* label = [[UILabel alloc] initWithFrame:frame];
    [label setFont:[UIFont systemFontOfSize:fontSize]];
    [label setTextColor:[UIColor whiteColor]];
    [label setShadowColor:[UIColor blackColor]];
    [label setShadowOffset:CGSizeMake(0, -1)];
    //[label setTextAlignment:UITextAlignmentCenter];
    [label setBackgroundColor:[UIColor clearColor]];
    [label setText:text];
    return label;
}

-(IBAction)FirstButton:(id)sender
{
    a3P1 = [[A3P1 alloc]initWithNibName:@"A3P1"bundle:nil];  
    [self.view addSubview:a3P1.view];
}

-(IBAction)SecondButton:(id)sender
{

    a3P2 = [[A3P2 alloc]initWithNibName:@"A3P2"bundle:nil];  
    [self.view addSubview:a3P2.view];

}

-(IBAction)ThirdButton:(id)sender
{
    a3P3 = [[A3P3 alloc]initWithNibName:@"A3P3"bundle:nil];  
    [self.view addSubview:a3P3.view];   

}

-(IBAction)backButton:(id)sender
{
    thirdViewController = [[ThirdViewController alloc]initWithNibName:@"ThirdView"bundle:nil];  
    [self.view addSubview:thirdViewController.view];
}
-(IBAction)nextPage:(id)sender
{
    a3Page2ViewController = [[A3Page2ViewController alloc]initWithNibName:@"A3Page2ViewController"bundle:nil];  
    [self.view addSubview:a3Page2ViewController.view];
}

- (void)viewDidLoad  
{
    //CGRectMake(x,y,width,height);

    // Do any additional setup after loading the view, typically from a nib.
}

/*
 // The designated initializer. Override to perform setup that is required before the view is loaded.
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
 if (self) {
 // Custom initialization
 }
 return self;
 }
 */

/*
 // Implement loadView to create a view hierarchy programmatically, without using a nib.
 - (void)loadView {
 }
 */

/*
 // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
 - (void)viewDidLoad {
 [super viewDidLoad];
 }
 */

/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

A3Page2ViewController.h

```
@class A3Page1ViewController;
@class ThirdViewController;
@class A3P10;
@class A3P11;
@class A3P12;

@interface A3Page2ViewController : UIViewController  {

    A3Page1ViewController*a3Page1ViewController;
    ThirdViewController*thirdViewController;
    A3P10*a3P10;
    A3P11*a3P11;
    A3P12*a3P12;

    UIButton *button1;
    UIButton *button2;
    UIButton *button3;

    UIButton *backButton;
    UIButton *backPage;

}

@property(nonatomic,retain) IBOutlet A3Page1ViewController *a3Page1ViewController;
@property(nonatomic,retain) IBOutlet ThirdViewController *thirdViewController;

@property(nonatomic,retain) IBOutlet A3P10 *a3P10;
@property(nonatomic,retain) IBOutlet A3P11 *a3P11;
@property(nonatomic,retain) IBOutlet A3P12 *a3P12;

@property(nonatomic,retain) IBOutlet UIButton *button1;
@property(nonatomic,retain) IBOutlet UIButton *button2;
@property(nonatomic,retain) IBOutlet UIButton *button3;

@property(nonatomic,retain) IBOutlet UIButton *backButton;
@property(nonatomic,retain) IBOutlet UIButton *backPage;

-(IBAction)FirstButton:(id)sender;
-(IBAction)SecondButton:(id)sender;
-(IBAction)ThirdButton:(id)sender;

-(IBAction)backButton:(id)sender;
-(IBAction)backPage:(id)sender;

@end 
```

A3Page2ViewController.m

```
#import "A3Page1ViewController.h"
#import "FXLabel.h"
#import <QuartzCore/QuartzCore.h>
#import "A3Page2ViewController.h"
#import "ThirdViewController.h"
#import "A3P10.h"
#import "A3P11.h"
#import "A3P12.h"

@implementation A3Page2ViewController

@synthesize  thirdViewController,a3Page1ViewController,a3P10 ,a3P11 ,a3P12, backButton,backPage, button1,button2,button3;

-(UILabel*)createLabelWithFrame:(CGRect)frame andFontSize:(float)fontSize andText:(NSString*)text
{
    UILabel* label = [[UILabel alloc] initWithFrame:frame];
    [label setFont:[UIFont systemFontOfSize:fontSize]];
    [label setTextColor:[UIColor whiteColor]];
    [label setShadowColor:[UIColor blackColor]];
    [label setShadowOffset:CGSizeMake(0, -1)];
    //  [label setTextAlignment:UITextAlignmentCenter];
    [label setBackgroundColor:[UIColor clearColor]];
    [label setText:text];
    return label;
}

-(IBAction)FirstButton:(id)sender
{
    a3P10 = [[A3P10 alloc]initWithNibName:@"A3P10"bundle:nil];
    [self.view addSubview:a3P10.view];
}

-(IBAction)SecondButton:(id)sender
{

    a3P11 = [[A3P11 alloc]initWithNibName:@"A3P11"bundle:nil];
    [self.view addSubview:a3P11.view];

}

-(IBAction)ThirdButton:(id)sender
{
    a3P12 = [[A3P12 alloc]initWithNibName:@"A3P12"bundle:nil];
    [self.view addSubview:a3P12.view];

}

-(IBAction)backButton:(id)sender
{
    thirdViewController = [[ThirdViewController alloc]initWithNibName:@"ThirdView"bundle:nil];
    [self.view addSubview:thirdViewController.view];

}
-(IBAction)backPage:(id)sender
{
//*****Alleged Error/Warning causing code=[********
    a3Page1ViewController = [[A3Page1ViewController alloc]initWithNibName:@"A3Page1ViewController"bundle:nil];
    [self.view addSubview:a3Page1ViewController.view];

}

- (void)viewDidLoad
{
    //CGRectMake(x,y,width,height);

    // Do any additional setup after loading the view, typically from a nib.
}

/*
 // The designated initializer. Override to perform setup that is required before the view is loaded.
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
 if (self) {
 // Custom initialization
 }
 return self;
 }
 */

/*
 // Implement loadView to create a view hierarchy programmatically, without using a nib.
 - (void)loadView {
 }
 */

/*
 // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
 - (void)viewDidLoad {
 [super viewDidLoad];
 }
 */

/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

# sql-server - 加入链接服务器表时提高查询性能

> ID：13587670
> 
> 赞同：3
> 
> 时间：2012-11-27T15:36:53.490
> 
> 标签：sql-server, linked-server

不幸的是，作为我们修复数据中心时的临时措施，我需要运行以下跨服务器查询，任何人都可以建议我如何提高性能...

因为必须在游标开头运行此语句

```
SELECT t.SearchId, t.VisitSourceId, t.SiteDomainId, t.trpUTMid, t.FlightPlus, t.StartDate,
t.CountryId, t.ProvinceId, t.Locationid, t.PlaceId, t.EstabId, t.CheckInDate, 
t.CheckOutDate, t.Rooms, t.Room1Adults, t.Room1Children, t.Room2Adults, t.Room2Children, 
t.Room3Adults, t.Room3Children, tc.OutcomeDate, tc.OutcomeId, tc.HotelsFound, tc.Notes

FROM [MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl t
INNER JOIN TrackingAcomSearchesOutcome_tbl tc
ON t.trpUTMid = tc.trpUTMid
LEFT JOIN [YAZOO].[MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl tid
ON t.trpUTMid = tid.trpUTMid
WHERE tid.trpUTMid IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:17:31.327

一种可能的选择是将远程表复制到本地服务器。这会将所有表放在同一台服务器上，从而使优化器能够使用统计信息来生成最佳计划。由于您只使用 trpUTMid，您可以只复制该列。

另一种选择是使用临时表。同样的想法，在同一台服务器上获取所有表：

```
SELECT trpUTMid
INTO #Yazoo_TrackingAcomSearches_tbl
FROM [YAZOO].[MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl

SELECT t.SearchId, t.VisitSourceId, t.SiteDomainId, t.trpUTMid, t.FlightPlus, t.StartDate,
t.CountryId, t.ProvinceId, t.Locationid, t.PlaceId, t.EstabId, t.CheckInDate, 
t.CheckOutDate, t.Rooms, t.Room1Adults, t.Room1Children, t.Room2Adults, t.Room2Children, 
t.Room3Adults, t.Room3Children, tc.OutcomeDate, tc.OutcomeId, tc.HotelsFound, tc.Notes

FROM [MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl t
INNER JOIN TrackingAcomSearchesOutcome_tbl tc
ON t.trpUTMid = tc.trpUTMid
LEFT JOIN #Yazoo_TrackingAcomSearches_tbl tid
ON t.trpUTMid = tid.trpUTMid
WHERE tid.trpUTMid IS NULL 
```

您还可以在临时表上创建索引以提高性能。

我还建议检查是否不存在而不是旧的左连接 where null （阅读[此](https://stackoverflow.com/questions/13140520/simple-sql-server-query-across-databases-runs-extremely-slow-r2/13144369#13144369)以获得更多信息）：

```
SELECT trpUTMid
INTO #Yazoo_TrackingAcomSearches_tbl
FROM [YAZOO].[MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl

SELECT t.SearchId, t.VisitSourceId, t.SiteDomainId, t.trpUTMid, t.FlightPlus, t.StartDate,
t.CountryId, t.ProvinceId, t.Locationid, t.PlaceId, t.EstabId, t.CheckInDate, 
t.CheckOutDate, t.Rooms, t.Room1Adults, t.Room1Children, t.Room2Adults, t.Room2Children, 
t.Room3Adults, t.Room3Children, tc.OutcomeDate, tc.OutcomeId, tc.HotelsFound, tc.Notes

FROM [MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl t
INNER JOIN TrackingAcomSearchesOutcome_tbl tc
ON t.trpUTMid = tc.trpUTMid
WHERE NOT EXISTS (
    SELECT NULL 
    FROM #Yazoo_TrackingAcomSearches_tbl
    WHERE trpUTMid = t.trpUTMid
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:02:41.497

试试下面的查询

```
;with cte
    as(
    SELECT tc.OutcomeDate, tc.OutcomeId, tc.HotelsFound, tc.Notes
    GROUP BY [BatchId]  FROM TrackingAcomSearchesOutcome_tbl tc
    )
     SELECT t.SearchId, t.VisitSourceId, t.SiteDomainId, t.trpUTMid, t.FlightPlus, t.StartDate,
    t.CountryId, t.ProvinceId, t.Locationid, t.PlaceId, t.EstabId, t.CheckInDate, 
    t.CheckOutDate, t.Rooms, t.Room1Adults, t.Room1Children, t.Room2Adults, t.Room2Children, 
    t.Room3Adults, t.Room3Children

    FROM [MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl t
    INNER JOIN cte as tbl ON t.trpUTMid = tbl .trpUTMid
    LEFT JOIN [YAZOO].[MLT_VisitTracking].[dbo].TrackingAcomSearches_tbl tid
    ON t.trpUTMid = tbl .trpUTMid
    WHERE tid.trpUTMid IS NULL 
```

# javascript - 如何在 jquery 中解析这个 xml 以获取属性？

> ID：13587672
> 
> 赞同：0
> 
> 时间：2012-11-27T15:36:53.437
> 
> 标签：javascript, jquery, xml, parsing

我需要在 jquery 中解析以下示例 XML，以获取属性“V”

XML 文件：

```
<RES>
<R N="1">
    <MT N="myMeta1" V="myMeta1Value"/>
    <MT N="myMeta2" V="myMeta2Value"/>
    <MT N="myMeta2" V="myMeta2Value"/>
</R>
</RES> 
```

我的javascript如下：

```
function(data){
$(data).find('R').each(function(){
    var $result = $(this);
    $result.find('MT').each(function(_mt) {
            console.log($(_mt).attr("V") );
    });
}); 
```

}

我得到未定义，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T15:38:20.693

callback的第一个参数`.each`是索引，第二个参数是值。您还可以使用`this`：

```
$result.find('MT').each(function() {
        console.log($(this).attr("V") );
}); 
```

或者：

```
$result.find('MT').each(function( index, _mt ) {
        console.log($(_mt).attr("V") );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:39:48.100

你是`using index as an element in each`。由于第一个参数是索引，因此在每个参数中传递两个参数并使用第二个参数来获取元素。

```
function(data){
  $(data).find('R').each(function(){
      var $result = $(this);
      $result.find('MT').each(function(_mt, obj) {
            console.log($(obj).attr("V") );
      });
   });
} 
```

# html - 无法将 Facebook 喜欢的按钮集成到页面

> ID：13587674
> 
> 赞同：0
> 
> 时间：2012-11-27T15:36:59.177
> 
> 标签：html, facebook, twitter, integration, social-networking

这是我的html页面代码

```
 <html>

    <head>
        <title>Big Query & D3.js Mashup</title>
        <meta property="og:title" content="My Site"/>
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http:xample.com" />
        <meta property="og:image" content="" />
        <meta property="og:site_name" content="Data" />
        <meta property="fb:admins" content="1" />
    </head>

    <body>
        <div id="fb-root"></div>
        <script>
            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s);
                js.id = id;
                js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>   <a href="https://twitter.com/share" class="twitter-share-button"
        data-url="http:xample.com" data-via="jmy" data-lang="en">Tweet</a>

        <script>
            ! function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = "https://platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }(document, "script", "twitter-wjs");
        </script>
        <div class="fb-like" data-href="http:xample.com/" data-send="false"
        data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"></div>
    </body>

</html> 
```

**更新代码：**

```
 <html>

<head>
    <title>Big Query & D3.js Mashup</title>
    <meta property="og:title" content="My Site"/>
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http:xample.com" />
    <meta property="og:image" content="" />
    <meta property="og:site_name" content="Data" />
    <meta property="fb:admins" content="1" />
</head>

<body>
    <div id="fb-root"></div>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>   <a href="https://twitter.com/share" class="twitter-share-button"
    data-url="http://xample.com" data-via="jmy" data-lang="en">Tweet</a>

    <script>
        ! function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = "https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
            }
        }(document, "script", "twitter-wjs");
    </script>
    <div class="fb-like" data-href="http://xample.com/" data-send="false"
    data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"></div>
</body>
</html> 
```

Twitter 链接出现，但 facebook 链接没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:01:21.980

url 错误应该是[http://www.example.com](http://www.example.com)而不是 http:xample.com

```
 <div class="fb-like" data-href="http://www.example.com/" data-send="false"
    data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"> 
```

[http://jsfiddle.net/E6xYU/2/](http://jsfiddle.net/E6xYU/2/)

# sharepoint - SharePoint 2010 上的 Windows Server App Fabric 环境设置

> ID：13587676
> 
> 赞同：1
> 
> 时间：2012-11-27T15:37:10.223
> 
> 标签：sharepoint, configuration, environment, appfabric, web-farm

我有一台 SQL 数据库服务器、两台 WFE 和一台 APP 服务器。我计划安装 Windows 应用程序结构服务器用于缓存机制。为我的环境安装应用结构服务器的最佳方法是什么？

它应该安装在所有 WFE 上还是只安装在 APP 服务器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T06:33:19.023

安装 App Fabric Cache 服务器的目的是提高应用程序或服务的性能和响应时间。所以，我建议单独安装它。

# java - libgdx 0.9.7 演员命中不接收演员系统坐标

> ID：13587681
> 
> 赞同：2
> 
> 时间：2012-11-27T15:37:36.730
> 
> 标签：java, android, libgdx, actor, hit

在我的舞台上，我添加了几个演员。我为演员和舞台本身设置了**输入处理器。**

问题是，当我点击演员时，演员的命中方法会收到相当大的 x 和 y 值（我可以在调试时看到这一点），这意味着这些 x 和 y 没有转换为演员坐标系中的适当坐标. 文档说明了副版本。

我错过了那里的东西吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:56:39.467

我的项目和演员的位置有很多问题。

如果您的 Actor 已分组，请尝试使用组的 stageToLocalCoordinates、localToParentCoordinates。

如果它是唯一的 Actor，请尝试覆盖 setX 和 setY 或 setPosition 方法，并将您的坐标放入 Actor 的构造函数中。这对我有用。使用此方法，Actor 将具有与舞台相同的坐标系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:03:59.110

利用

`Vector2 coords = stage.screenToStageCoordinates(new Vector2(Gdx.input.getX(), Gdx.input.getY()));`

然后使用 coords.x 和 coords.y 作为 stage.hit() 函数中的新坐标

# .net - 在代码中编辑 Windows Media Profile (.prx) 文件

> ID：13587683
> 
> 赞同：0
> 
> 时间：2012-11-27T15:37:39.770
> 
> 标签：.net, video-capture

我正在使用第三方控件进行视频捕获，该控件将 .prx 文件用于某些输出属性，即输出大小。我试图将输出高度和宽度设置为尽可能大，同时保持用户实际屏幕尺寸的比例。

我相信 .prx 文件只是一个 XML 文件，但是当我将它作为 XMLDocument 打开然后保存时，我在尝试使用 Windows Media Encoder 打开时收到一条消息，指出“配置文件无效。(0xC00D0BC6)”。在运行代码之前，我能够毫无问题地打开同一个文件。

```
Dim prx As New XmlDocument()
prx.Load(Globals.appPath + prxFileName)
Dim prxWidth As XmlAttribute = prx.SelectSingleNode("/profile/streamconfig/wmmediatype/videoinfoheader/bitmadinfoheader/@biwidth")
Dim prxHeight As XmlAttribute = prx.SelectSingleNode("/profile/streamconfig/wmmediatype/videoinfoheader/bitmadinfoheader/@biheight")
prx.Save(Globals.appPath + prxFileName) 
```

因此，无需对文件进行任何实际编辑，而是将其重新保存为 XMLDocument，配置文件就会变得无效。有没有办法在保持配置文件有效性的同时在代码中编辑 .prx 文件？

作为参考，下面是在文本编辑器中打开的有效 .prx 文件。

```
<profile version="589824" 
         storageformat="1" 
         name="myProfile" 
         description=""> 
               <streamconfig majortype="{73647561-0000-0010-8000-00AA00389B71}" 
               streamnumber="1" 
               streamname="Audio Stream" 
               inputname="Audio409" 
               bitrate="48000" 
               bufferwindow="3000" 
               reliabletransport="0" 
               decodercomplexity="" 
               rfc1766langid="en-us" 
> 
         <wmmediatype subtype="{00000161-0000-0010-8000-00AA00389B71}"  
               bfixedsizesamples="1" 
               btemporalcompression="0" 
               lsamplesize="1152"> 
       <waveformatex wFormatTag="353" 
                     nChannels="2" 
                     nSamplesPerSec="32000" 
                     nAvgBytesPerSec="6000" 
                     nBlockAlign="1152" 
                     wBitsPerSample="16" 
                     codecdata="008800001F0000000000"/> 
        </wmmediatype>
        </streamconfig>
               <streamconfig majortype="{73646976-0000-0010-8000-00AA00389B71}" 
               streamnumber="2" 
               streamname="Video Stream" 
               inputname="Video409" 
               bitrate="400000" 
               bufferwindow="3000" 
               reliabletransport="0" 
               decodercomplexity="AU" 
               rfc1766langid="en-us" 
> 
                 <videomediaprops maxkeyframespacing="80000000" 
                                 quality="100"/> 
         <wmmediatype subtype="{33564D57-0000-0010-8000-00AA00389B71}"  
               bfixedsizesamples="0" 
               btemporalcompression="1" 
               lsamplesize="0"> 
   <videoinfoheader dwbitrate="400000" 
                    dwbiterrorrate="0" 
                    avgtimeperframe="333333"> 
    <rcsource left="0" 
              top="0" 
              right="2000" 
              bottom="562"/> 
    <rctarget left="0" 
              top="0" 
              right="2000" 
              bottom="562"/> 
        <bitmapinfoheader biwidth="2000" 
                          biheight="562" 
                          biplanes="1" 
                          bibitcount="24" 
                          bicompression="WMV3" 
                          bisizeimage="0" 
                          bixpelspermeter="0" 
                          biypelspermeter="0" 
                          biclrused="0" 
                          biclrimportant="0"/> 
   </videoinfoheader>
        </wmmediatype>
        </streamconfig>
</profile> 
```

在这个问题的帮助下，[尽管分辨率发生变化，视频捕获输出始终为 320x240](https://stackoverflow.com/questions/8213574/video-capture-output-always-in-320x240-despite-changing-resolution)，我稍微改变了策略以使用 IWMStreamConfig。

```
 Dim profileData As String
    Using reader As New StreamReader(File.OpenRead(Globals.appPath + prxFileName))
        profileData = reader.ReadToEnd()
    End Using

    Dim profileManager As IWMProfileManager
    Dim wmProfile As IWMProfile = Nothing
    Dim hr As Integer = WMLib.WMCreateProfileManager(profileManager)
    If hr >= 0 Then
        hr = profileManager.LoadProfileByData(profileData, wmProfile)
    End If

    If profileManager IsNot Nothing Then
        System.Runtime.InteropServices.Marshal.ReleaseComObject(profileManager)
        profileManager = Nothing
    End If

    Dim pConfig As IWMStreamConfig
    wmProfile.GetStream("Video Stream", pConfig) 
```

现在我至少将流作为 IWMStreamConfig 对象，我觉得我越来越接近了。但是，如何编辑此 MSDN 文章中的 BITMAPINFOHEADER.biHeight 和 BITMAPINFOHEADER.biWidth？

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd756998(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756998(v=vs.85).aspx)

SetBitRate 和 SetBufferWindow 出现在 InteliSense 中，但我不确定如何访问这些较低级别的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:08:17.710

该文件是 Unicode。具体来说，基于 BOM 代码 0xFFFE 的 little-endian UTF-16。

由于看起来您使用的是 .NET，因此请尝试将 FileStream 包装在 StreamWriter 中：

```
Dim FS As FileStream = New FileStream(prxFile, FileMode.CreateNew)
Dim SW As StreamWriter = New StreamWriter(FS, new UnicodeEncoding(false, true)) 
```

然后您可以将整个字符串写入文件。

XmlDocument 的加载/保存方法采用扩展 TextWriter 的 StreamWriter。只需使用指定的编码以相同的方式创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:57:17.907

在十六进制编辑器中查看文件后，`0x00`每个字符之间都有有效的配置文件，文件以 开头`0xFFFE`，我假设有一些编码。一旦确定了这一点，我就使用流阅读器将文本读入字符串，并通过字符串操作进行更改。

棘手的部分是将所有内容写回文件。出于某种原因，无论我尝试将前两个十六进制字符写入文件的任何方式，它们都会被转换为四个不同的十六进制字符。解决方案是使用 FileStream 逐字节写入。

```
//Read in the initial profile
Dim profileData As String
Using reader As New StreamReader(File.OpenRead(prxFile))
    profileData = reader.ReadToEnd()
End Using

//Make changes to the profile with string manipulation

//Write the changed data back to the file including all the Hex characters
File.Delete(prxFile)
Dim FS As FileStream = New FileStream(prxFile, FileMode.CreateNew)
//Start by writing 0xFFFE
FS.WriteByte(&HFF)
FS.WriteByte(&HFE)
//Then write each character succeeded by 0x00
For Each Character As Char In profileData.ToCharArray
    FS.WriteByte(AscW(Character))
    FS.WriteByte(&H0)
Next
FS.Close() 
```

# testing - 无法从本机黑莓模拟器访问互联网

> ID：13587687
> 
> 赞同：2
> 
> 时间：2012-11-27T15:37:56.153
> 
> 标签：testing, blackberry, blackberry-simulator, blackberry-jde

我收到以下有关从本机黑莓模拟器访问互联网的消息。

> **“无法连接到互联网，请稍后再试。如果问题仍然存在，请联系您的服务提供商。”**

在 9860 的黑莓独立模拟器上遇到此问题。我尚未安装 JDE 或任何其他开发工具。看到很多评论要求在 HTTP HEADER 上添加代理详细信息，但这对我不起作用。我正在尝试在具有代理的企业网络中

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T00:20:20.747

您是否尝试安装和运行 BlackBerry MDS？[https://swdownloads.blackberry.com/Downloads/entry.do?code=F9BE311E65D81A9AD8150A60844BB94C](https://swdownloads.blackberry.com/Downloads/entry.do?code=F9BE311E65D81A9AD8150A60844BB94C)

您必须在运行模拟器之前运行它才能使用互联网连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:11:17.347

你有没有在你的模拟器上试过这个：

1) 转到“管理连接” 2) 单击“设置 Wi-Fi 网络” 3) 如果您在此处看到“默认 WLAN 网络”或使用“手动连接到网络”创建它

希望这可以帮助。

# php - 多语言站点中的菜单 drupal

> ID：13587705
> 
> 赞同：2
> 
> 时间：2012-11-27T15:38:38.653
> 
> 标签：php, drupal, drupal-7, drupal-modules

我在我的 drupal 站点的 EN 版本中看不到任何菜单，菜单中有以下设置：

![环境](../Images/1a12f813d2ea4ed6187dfdfa767c7cb8.png) ![环境](../Images/87b7c9e9dd34cccbfcc85490559f427b.png)

当我选择法语时一切正常，但是当我选择英语时，什么也没有出现（我确实在两个菜单中都有内容）

![菜单的 html 区域](../Images/17bec898061982258dfd69d82139466d.png)

在块部分，我看到两个菜单被禁用。

感谢帮助我:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:14:33.957

我建议使用[菜单块](http://drupal.org/project/menu_block)contrib 模块。

此模块将允许您将菜单视为块。

创建 2 个块（每个菜单 1 个），在块管理页面中，您可以为每个块指定语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:28:55.797

由于通常有几种方法可以使用 drupal 达到目标，因此这里有一个解决方法的建议：

*   创建两个没有语言设置的菜单。
*   尝试将所有菜单项设置为中性语言，以便它们以两种语言显示。（测试一下）
*   将菜单作为块分配给正确的区域。
*   然后使用[i18n 模块](http://drupal.org/project/i18n)在块级别而不是菜单或菜单项级别控制特定于语言的显示。（请注意，您需要 i18n_block 模块来执行 i18n 模块的一部分）
*   如果您需要对块进行额外设置，请参阅前面提到的[菜单块](http://drupal.org/project/menu_block)模块。
*   还要确保检查[国际化文档](http://drupal.org/node/133977)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:47:41.827

我发现对于多语言网站来说，拥有两个菜单总是更容易。我也更喜欢为不同的语言使用不同的视图页面，这样我就不会遇到问题。这样我就可以轻松地将路径添加到相应的菜单。每当我尝试结合多语言视图和菜单时，我都会遇到很多问题。

在您包含的屏幕截图中，我可以看到您有两个菜单。

首先，我发现根据他们的语言命名和命名菜单更容易，因为否则很容易混淆，即主菜单英语 - main_menu_en。

其次，您的法语菜单可能有效，因为它是由您的主题打印的，该主题配置为在特定区域呈现主菜单链接。要使您的英文菜单正常工作，您必须：

**a）**在您的主题中添加所需的代码，或

**b）**删除主题中主菜单的代码，并通过块管理页面使用放置在所需区域的 2 个菜单块。在每个块的块设置中，您可以选择显示它们的语言。

正如其他人所说，你需要：[menu_block](https://drupal.org/project/menu_block)

如果您在从主题中添加或删除菜单方面需要帮助，请告诉我们您使用的是哪个主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:04:40.900

**有七个步骤来实现：**

**第 1 步：**启用所有模块

*   内容翻译（核心模块）
*   语言环境（核心模块）
*   国际化
*   多变的

***选修的：***

*   语言图标
*   翻译概述

**第 2 步：**添加语言

转到配置 > 区域和语言 > 语言

默认语言为英语，您可以使用“<strong>添加语言”链接添加预定义或自定义语言。

**第三步：**检测和选择

在本教程中，我选择使用“<strong>URL Prefix”</strong> 设置。这告诉 Drupal 对西班牙语使用 domain.com/es，对德语使用 domain.com/de。

**第 4 步：**为内容类型启用多语言支持

创建或编辑现有内容类型，然后单击“<strong>发布选项”。在这里，您将看到启用多语言支持的选项。选择“<strong>启用，带翻译。这将允许您将节点翻译成多种语言。

**第 5 步：**创建英文内容

创建节点时，请确保使用正确的语言，而不仅仅是“<strong>中性语言”。这很重要，因为当您创建 URL 别名和菜单链接标题时，它会知道将链接放入哪个菜单。

创建节点后，您应该会看到一个“<strong>translate”选项卡。如果单击此选项卡，您将能够向此节点添加翻译。

请注意，如果您安装了“<strong>翻译概述”模块（我强烈建议您这样做），您会看到一个漂亮的小窗口，告诉您您添加了哪些语言，哪些需要优先级等。

**第 6 步：**创建翻译内容

创建翻译时，给它一个翻译后的菜单链接标题，但给它与原始节点相同的 url 别名。因为您安装了多语言支持，所以使用相同的 URL 别名不会给您任何错误（请记住，它将西班牙节点放在 domain.com/es 上，将德语节点放在 domain.com/de 上）。

**第 7 步：**添加对多语言菜单的支持

转到结构 > 菜单 > 主菜单。编辑菜单并启用“<strong>翻译和本地化”选项。这将根据用户在站点范围内选择的语言来切换您的菜单项。

你会看到你有英文菜单项和西班牙项。您可以像您希望的那样订购这些，但知道只选择西班牙语时，只有西班牙语链接将显示为主菜单（所以您知道的，因为URL会说Domain.com/es）。

**而你的最终产品：**在前端你可以看到它的动作。

您也可以使用**[i18n_menu_navigation_links](http://api.drupalize.me/api/drupal/function/i18n_menu_navigation_links/7)**功能。

# asp.net-mvc - .net mvc 选择列表多个来源

> ID：13587706
> 
> 赞同：0
> 
> 时间：2012-11-27T15:38:47.873
> 
> 标签：asp.net-mvc, active-directory

我有一个从 Active Directory 中检索的用户列表，如下所示

```
PrincipalContext pc = new PrincipalContext(ContextType.Domain, "DOMAIN", "dc=domain,dc=org");
GroupPrincipal group = GroupPrincipal.FindByIdentity(pc, "Advisors");
ViewBag.EmployeeID = new SelectList(group.Members, "EmployeeID", "DisplayName"); 
```

我想在此列表中添加两个附加项目，但不想在 Active Directory 中为它们创建用户帐户，因为它们不是真实用户。

是否可以做类似的事情

```
var items1 = new[] 
{  
    new { EmployeeID = "1", DisplayName = "Independent" },
    new { EmployeeID = "2", DisplayName = "Own" }
};

var items = Concat(group.Members, items1);
{
    ViewBag.EmployeeID = new SelectList(items, "EmployeeID", "DisplayName");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:29:22.000

好吧，您可以拥有这样的[ViewModel](http://en.wikipedia.org/wiki/View_model)：

```
public class EmployeeViewModel
{
    public string EmployeeId { get; set; }
    public string DisplayName { get; set; }
} 
```

并且您可以将 group.Members 投射到您的 ViewModel 列表中，在此列表中添加一些自定义项并将此列表设置为 ViewBag。

```
var members = group.Members.Select(x => new EmployeeViewModel() { EmployeeId = x.EmployeeId, DisplayName = x.DisplayName }).ToList();

members.Add(new EmployeeViewModel() { EmployeeId = "1", DisplayName = "Independent" });
members.Add(new EmployeeViewModel() { EmployeeId = "2", DisplayName = "Own" });

ViewBag.EmployeeID = new SelectList(members, "EmployeeID", "DisplayName"); 
```

# sql - 是否可能，在openrowset 中创建一个临时#table？

> ID：13587709
> 
> 赞同：0
> 
> 时间：2012-11-27T15:38:50.373
> 
> 标签：sql, openrowset, temp-tables

我正在尝试执行此查询，但出现错误：

```
Msg 8180, Level 16, State 1, Line 1
Statement(s) could not be prepared.
Msg 208, Level 16, State 1, Line 11
Invalid object name '#test1'. 
```

我的代码：

```
select * from openrowset ('SQLOLEDB','DRIVER={SQL Server};SERVER=10.12.131.58;UID=sa;PWD=desarrollo','

create table #test1
(
id int,
name1 varchar(50)
)

insert into #test1
select cliente,nomcli from opepte.dbo.clientes

select * from #test1

/*this is a example but in real query i need manipulate this information and return 
a resulset with few rows
*/

') 
```

但这个其他查询工作正常。

```
select * from openrowset ('SQLOLEDB','DRIVER={SQL Server};SERVER=10.12.131.58;UID=sa;PWD=desarrollo','

create table #test1
(
id int,
name1 varchar(50)
)

--insert into #test1
select cliente,nomcli from opepte.dbo.clientes

--select * from #test1

/*this is a example but in real query i need manipulate this information and return 
a resulset with few rows
*/

') 
```

注意：插入 #test1 并从 #test1 中选择 * 是注释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:06:18.560

1.  使用 FMTONLY & NOCOUNT
2.  只是为什么不使用表变量而不是 temp？由于您通过此代码明确返回数据，因此没有人会再次使用您的临时表。
3.  还要考虑更健壮和安全的提供程序和连接字符串：'SQLNCLI', 'Server=localhost;Integrated Security=SSPI;Trusted_Connection=yes;'

    ```
    select * from openrowset ('SQLOLEDB','DRIVER={SQL Server};SERVER=10.12.131.58;UID=sa;PWD=desarrollo', N'

    SET FMTONLY OFF
    SET NOCOUNT ON

    declare @q int = 1

    declare @test1 table
    (
    id int,
    name1 varchar(50)
    )

    insert into @test1
    select 1,''q''

    insert into @test1
    select 1,''q''

    select * from @test1

    /*this is a example but in real query i need manipulate this information and return 
    a resulset with few rows
    */
    ') 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:09:36.550

我不认为你可以，因为 openquery/rowset 接口非常有限。鉴于远程服务器是 SQL 服务器，您可以使用基于表的函数来提供您需要的功能。否则，您可以使用远程执行存储过程或链接服务器来执行此操作。

# java - Android java，获得更多允许的内存使用量

> ID：13587722
> 
> 赞同：4
> 
> 时间：2012-11-27T15:39:41.630
> 
> 标签：java, android, memory, memory-management

我正在为 android 创建这个游戏，我有一些关于内存使用的问题。当我们在无知中进行编码时，我们的应用程序使用了大约 40mb 内存，但这导致测试手机崩溃（Xperia Arc（某事，某事））内存不足。然后我们用内存对其进行了更智能的编码，达到了大约 20 mb。我们用谷歌搜索了很多，我们看到人们发布大多数手机限制为 16 mb 和其他 32 mb。但是，我们还与其他应用程序（如愤怒的小鸟）进行了比较，它们使用了大约 129 内存（在我们的应用程序崩溃超过 32 mb 的 Xperia arc 上运行良好）。

那么我的问题是：我们能否以某种方式使用超过 16 / 32 mb 的内存，或者使用更多的应用程序如何做？

有人说您可以使用其他进程来处理内存并为该进程再获得 16 / 32 mb，如果这是真的。这对普通程序员来说可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-30T13:11:57.503

把它作为应用程序的属性放在你的清单中

```
android:largeHeap="true" 
```

对于像我这样正在寻找快速答案的人

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T16:16:02.383

我知道 G1 只会为应用程序提供 16mb，但它是一个非常旧的应用程序。大多数流行的设备都可以提供 32/64mb。内存量始终取决于屏幕大小。

manifest.xml 中的[android:largeHeap](http://developer.android.com/guide/topics/manifest/application-element.html#largeHeap)正是您想要的，但我从未使用过它。据说这个属性的效果在不同的设备上是不同的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T16:25:54.377

Pre-Honeycomb: Angry Birds 和许多游戏使用 Android NDK 中的原生 C++ 代码进行编程或内存分配。如果您在 JVM 之外分配内存，则它不计入您的堆限制，因此您仅受硬件限制。当然，问题是您全权负责内存管理。

Honeycomb 及更高版本：正如 faylon 所建议的， android:largeHeap 是将您的堆限制扩展到非常大的方法，尽管您仍处于手机制造商的范围内。他们对“largeHeap”的解释可能是 64MB 而不是 32MB，或者理论上他们可能只是不给你。因此，您必须将它与[getLargeMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getLargeMemoryClass%28%29)结合使用，以确保您的内存可用。NDK 选项仍然可用。

# ruby-on-rails - Ruby on Rails 本地 PostgreSQL 一段时间后不返回结果

> ID：13587725
> 
> 赞同：1
> 
> 时间：2012-11-27T15:39:47.107
> 
> 标签：ruby-on-rails, database

我正在开发一个具有基本 pg 全文功能的简单 Rails 应用程序。我的本地 PostgreSQL 全文搜索运行良好，但它突然停止工作（没有生成结果）两次。同时，具有完全相同代码副本的 heroku 应用程序运行良好。我怀疑这是因为我在本地进行了一些迁移和“rake db:reset”。我必须通过运行“rake db:drop;rake db:create;rake db:migrate”来修复“无结果”问题以启动本地数据库清理。

我错过了什么/做错了什么？任何建议都非常感谢！

我正在关注[这里](http://www.scottlowe.eu/blog/2011/04/28/postgresql-full-text-search-is-often-good-enough/)的教程。我只有一个 tsvector。这是添加 tsvector 时我的迁移的样子。

```
class AddTSearchToQuestion < ActiveRecord::Migration
  def self.up
    execute(<<-'eosql'.strip)
    ALTER TABLE questions ADD COLUMN tsv tsvector;

    CREATE FUNCTION questions_generate_tsvector() RETURNS trigger AS $$
      begin
        new.tsv :=
          setweight(to_tsvector('pg_catalog.english', coalesce(new.title,'')), 'A') ||
          setweight(to_tsvector('pg_catalog.english', coalesce(new.details,'')), 'B');
        return new;
      end
    $$ LANGUAGE plpgsql;

    CREATE TRIGGER tsvector_questions_upsert_trigger BEFORE INSERT OR UPDATE
      ON questions
      FOR EACH ROW EXECUTE PROCEDURE questions_generate_tsvector();

    UPDATE questions SET tsv =
      setweight(to_tsvector('pg_catalog.english', coalesce(title,'')), 'A') ||
      setweight(to_tsvector('pg_catalog.english', coalesce(details,'')), 'B');

    CREATE INDEX questions_tsv_idx ON questions USING gin(tsv);
  eosql
end

def self.down
  execute(<<-'eosql'.strip)
    DROP INDEX IF EXISTS questions_tsv_idx;
    DROP TRIGGER IF EXISTS tsvector_questions_upsert_trigger ON questions;
    DROP FUNCTION IF EXISTS questions_generate_tsvector();
    ALTER TABLE questions DROP COLUMN tsv;
  eosql
end
end 
```

# android - 如何强制 android 的 locationlistener 获取提供者位置？

> ID：13587726
> 
> 赞同：-1
> 
> 时间：2012-11-27T15:39:48.977
> 
> 标签：android, geolocation

我编写了一个小应用程序，它使用 locationManager 和 NETWORK_PROVIDER 参数从移动 3g/wifi 接收位置。根据谷歌的 api，它会得到我想要的位置（另一个选项是使用 GPS_PROVIDER）我真正想要的是 WIFI 位置。我想看看它的行为以及手机如何获取它的位置（即使用wireshark）为了做到这一点，我改变了飞行模式并激活了wifi。然后，我启动应用程序并单击启动 NETWORK_PROVIDER 定位服务的按钮，方法是调用 time 参数 = 10 的 requestLocationUpdates 函数。实际发生的是，我设法获得了位置，但在 Wireshark 中根本看不到流量。难道是谷歌给了我大约。提前定位，什么时候连上wifi？（它唯一的解释）如果是这样，

在此先感谢，伊兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:46:52.683

您是否尝试过重新启动手机，以便删除任何可能存储该位置的缓存文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:54:33.640

由于 NETWORK_PROVIDER 使用手机位置、wifi ssid 及其信号强度来获取您的 GPS 坐标。

由于您处于飞行模式，无法获取手机位置，请尝试切换已连接的 wifi ，可能会调用 google 服务以获取新位置。

# java - 在一种情况下返回 @ResponseBody，在另一种情况下返回 ModelAndView

> ID：13587727
> 
> 赞同：4
> 
> 时间：2012-11-27T15:39:54.277
> 
> 标签：java, http, spring-mvc, web-applications

我有一个弹簧控制器方法。它旨在以编程方式注册用户（通过产品内另一个系统的单一登录过程）。它的工作原理是获取用户数据，对其进行验证，如果用户帐户不存在则创建一个用户帐户，将共享令牌传回另一个系统，然后对用户进行身份验证。有一个握手过程正在进行，但要找到问题的根源。如果用户在系统中不存在，我希望相同的方法返回一个字符串，`ModelAndView`如果他们已经注册，则返回一个。

可能的解决方案（但无法执行）：

*   返回的字符串（在第一次用户的情况下）将使用`HttpURLConnection`输入流读取。因此，如果有办法将数据放入 ModelAndView 对象中，然后使用输入流读取它，那么我就设置好了。
*   我可以通过将返回类型设为 来返回字符串并使用输入流读取它`@ResponseBody String`，但是，当它是现有用户时，我无法返回视图。

理想情况下，我会返回一个模型和视图，但另一个系统不是弹簧，所以它不会理解它。

总而言之，一个做两件事的方法，如果用户是第一次使用，它会返回一个带有加密令牌的字符串到另一个系统，另一个系统将在 iframe 中使用它来验证用户。

在一种情况下需要返回一个字符串以使用另一个系统中的输入流阅读器来读取，而在现有用户的情况下，需要返回一个视图以使用 spring 本身来读取。

如果有任何不清楚的地方，请告诉我。

**编辑：**有没有办法返回足够通用的 http 响应（类似于 http servlet 响应），并且可以在 spring 内部和外部工作。这也将解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:49:15.913

一个方法只能有一个返回类型，因此您需要将请求转发到另一个控制器方法。哪种控制器方法可能取决于您的身份验证结果...

```
 @RequestMapping ...
    public String handleRequest() {
        if(valid){
           return "forward:/path_to_my_another_controller";
        }else {
           return "forward:/somewhere_else";
        }
    } 
```

# android - 用于 MS PowerPoint 中的文字艺术的 TTF 文件

> ID：13587731
> 
> 赞同：0
> 
> 时间：2012-11-27T15:40:04.893
> 
> 标签：android, truetype

我正在尝试使用[这些说明](http://codinglookseasy.blogspot.in/2012/08/localization-using-ttf-files.html)来使用本地化的概念和 TTF 文件的使用。

但现在我坚持使用 TTF。

如何使用PowerPoint 中提供的[这些艺术字](http://www.homeandlearn.co.uk/mw/images/wordArtDB.jpg)字体之类的字体？

或者，有没有其他方法来设计这些字体？或者这些字体有 TTF 吗？

# java - Windows 7和gnuplot 4.6下的Javaplot - 消失的结果

> ID：13587736
> 
> 赞同：1
> 
> 时间：2012-11-27T15:40:28.200
> 
> 标签：java, eclipse, windows-7, gnuplot, javaplot

我想回到旧的东西： [JavaPlot和gnuplot](https://stackoverflow.com/questions/9331548/javaplot-and-gnuplot/9356361#9356361)

我使用的是 Windows 7，我遇到了同样的问题，这意味着我的图表在启动我的简单测试程序后立即消失：

```
public static void main(String... args) {
    JavaPlot p = new JavaPlot("F:/Programs/GnuPlot/bin/pgnuplot.exe");

    p.addPlot("sin(x)");
    p.setPersist(true);
    p.plot();
} 
```

而且这条线

```
p.setPersist(true); 
```

不会改变任何东西，我可以使用 true 或 false 并且结果与上面相同。

我正在使用 gnuplot 4.6，并且没有像早期解决方案中那样名为“GnuPlotParameters”的文件。有没有人在 windows 7 和 gnuplot 4.6 下使用 javaplot，并且遇到同样的问题？我创建了新问题，因为旧问题已关闭。

最佳杰努斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T16:34:24.653

这是 Windows 下默认 gnuplot 分发的问题。请参阅此[错误报告](https://sourceforge.net/p/gnuplot/bugs/1308/)。

还有更多信息如何处理它，[在这里](https://stackoverflow.com/a/20373637/2604213)。

**编辑**：有一个新版本的 JavaPlot 应该可以解决这个问题。

# c# - 我应该使用什么方法定义在 IEquatable 上创建扩展方法

> ID：13587737
> 
> 赞同：0
> 
> 时间：2012-11-27T15:40:28.333
> 
> 标签：c#, generics, extension-methods

我打算在 上创建一个`In`扩展方法`int`，当我意识到，如果我使用 IEquatable 我将获得所有原始类型的扩展。这是我目前的实现

```
public static bool In<T>(this T value, params T[] values) where T : IEquatable<T>
{
    return values.Contains(value);
} 
```

它适用`if(i.In(1,3,7))`于整数，但`where T: IEquatable<T>`对我来说只是看起来不对。这是定义泛型方法的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:45:42.757

不要`this T value`用作方法参数，`this IEquatable<T> value`而是使用。那么您不需要对 T 进行任何约束，并且您也只为 IEquatable 定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:47:04.860

你所拥有的对我来说是正确的。您是说该类型必须`IEquatable<T>`为其自己的类型实现。

您还可以将其扩展为您要比较的类型可以是为 实现的不同`IEquatable<T>`类型`value`：

```
public static bool In<T, U>(this T value, params U[] values) where U : IEquatable<T>
{
    bool result = false;
    foreach (U instance in values)
    {
        if (instance.Equals(value))
        {
            result = true;
            break;
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:47:07.637

是的，这是正确的。（不知道还能说什么。我已经定义了相同的方法并且效果很好，尽管我开始相信我不喜欢它的风格。当然，这是主观的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:58:14.237

`where T: IEquatable<T>`是一个[泛型约束](http://msdn.microsoft.com/en-us/library/6b0scde8%28v=vs.80%29.aspx)，所以它非常好，而且，它是限制泛型方法/类/任何具有有限类型集的使用的首选方法。

# symfony - 如果 symfony 上的变量树枝

> ID：13587738
> 
> 赞同：4
> 
> 时间：2012-11-27T15:40:36.983
> 
> 标签：symfony, twig

我想对select标签multiple选择的值做一个测试。我尝试使用此代码，但出现此错误：

> 哈希键必须是带引号的字符串、数字、名称或括在括号中的表达式（在 AdminBlogBu​​ndle:GestionGraph:graphkpi1.html.twig 第 575 行中的值“{”的意外标记“标点符号”

```
{% for liste in Col1_Array %}
    {% if {{liste}} is "Call Drop" %}
     <div id="chartdiv" style="width: 100%; height: 400px;"></div>
    {% else %}
      <div id="chartdiv1" style="width: 100%; height: 400px;"></div>
    {% endif %}
{% endfor %} 
```

请问谁能帮帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T15:44:53.737

你不能像这样嵌套分隔符。

正确的语法是：

```
{% if liste == "Call Drop" %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T15:45:21.280

相当确定你的线路：

```
{% if {{liste}} is "Call Drop" %} 
```

应该：

```
{% if liste is "Call Drop" %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-18T23:09:02.437

尝试

```
{{ dump(liste) }} 
```

找出真正正在评估的内容。

# iphone - vuforia 和 uinavigationcontroller

> ID：13587741
> 
> 赞同：1
> 
> 时间：2012-11-27T15:40:55.547
> 
> 标签：iphone, ios, uinavigationcontroller, ios6, unity3d

我有一个由 Unity3D 生成的 xCode 项目（包括动画），并且我集成了 vuforia SDK 以显示动画（增强现实）

我现在遇到的问题是在相机屏幕和我的应用程序的仪表板之间添加导航。

在`int OpenEAGL_UnityCallback(UIWindow** window, int* screenWidth, int* screenHeight, int* openglesVersion)`方法中，我实用地添加了后退按钮，例如：

```
if (wrapperObj == nil)
{
    wrapperObj = [[WrapperClass alloc] init];
}

[backButton addTarget:wrapperObj action:@selector(goToDashBoard:) forControlEvents:UIControlEventTouchUpInside]; 
```

将其传递给包装类

```
@interface WrapperClass : NSObject

@property (nonatomic, retain) UINavigationController *navigation;

-(void)goToDashBoard:(UIButton*)sender;

@end

void goToPreviousScreen()
{

}

@implementation WrapperClass
@synthesize navigation;

-(void) goToDashBoard:(UIButton*)sender
{
    [[self navigation] popViewControllerAnimated:YES];
    goToPreviousScreen();
}

@end 
```

谁能指出我如何使导航启动并运行的解决方案？

**更新**

尝试以这种方式弹出视图时：

```
AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate.navigationController popToRootViewControllerAnimated:YES]; 
```

我得到这个日志：

```
2012-12-05 16:20:45.502 arapp[5993:907] <HomeViewController: 0x246db00>

StopQCAR

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/ExportGenerated/iPhonePlayer-armv7/UnityEngineDebug.cpp Line: 43)

Could not deactivate dataset.

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/ExportGenerated/iPhonePlayer-armv7/UnityEngineDebug.cpp Line: 43)

Could not destroy dataset.

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/ExportGenerated/iPhonePlayer-armv7/UnityEngineDebug.cpp Line: 43)

Could not deinitialize the tracker.

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/ExportGenerated/iPhonePlayer-armv7/UnityEngineDebug.cpp Line: 43)

Could not deinitialize the tracker. 

(Filename: /Applications/buildAgent/work/14194e8ce88cdf47/Runtime/ExportGenerated/iPhonePlayer-armv7/UnityEngineDebug.cpp Line: 43)

ghashtable.c:294: assertion 'hash != NULL' failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:46:26.330

如果我正确理解您的问题，您正在尝试通过添加文件、视图控制器、代码等来修改 Unity 构建的 Xcode 项目。根据我的经验，这不是一个好主意，您最好尽可能在 Unity 中构建您的应用程序。Vuforia 论坛的版主也强烈反对它。我以这种方式构建了一个 Unity/Vuforia 应用程序，主要是为了避免花时间学习如何在 Unity 中使用 C# 进行操作。我最终遇到了无法追踪的内存泄漏，不得不硬着头皮回到 Unity 并学习 Unity 脚本。当然有很多 iOS 的事情你在 Unity 中是做不到的，我也不知道你的 app 做了什么，但是有很多插件可以帮助你，我结束了学习如何编写自己的插件来获得一些 iOS 功能我需要。

但是，如果您想像我那样在 AR 视图和其他视图控制器之间导航，则可以创建另一个视图控制器，该视图控制器基本上是一个覆盖层，并且只包含导航按钮。然后我对其进行了初始化并将其作为子视图添加到 UnityViewController。然后添加代码以转到所需的任何视图，例如仪表板。

```
// Init Vuforia VC, then add its view as subview  to "view" AR view, line 524
VuforiaViewController *vuforia = [[VuforiaViewController alloc] init];

// Create a full-screen window
_window = [[UIWindow alloc] initWithFrame:rect];
EAGLView* view = [[EAGLView alloc] initWithFrame:rect];
UnityViewController *controller = [[UnityViewController alloc] init];

sGLViewController = controller;
sGLView = view;

controller.view = view;

_splashView = [ [UIImageView alloc] initWithFrame: [[UIScreen mainScreen] bounds] ];
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    _splashView.image = [UIImage imageNamed:SplashViewImage(UIInterfaceOrientationPortrait)];
}
else
{
    _splashView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    _splashView.autoresizesSubviews = YES;
}

[view addSubview:_splashView];
[view addSubview:vuforia.view];     // Overlay view added as subview of AR view 
```

您可能知道，您可以在 AppController 中注释掉 startUnity() 以防止应用程序启动时出现 AR 视图，并在另一个 VC 中调用它以返回 AR 视图。这种方法让我可以在 AR 视图和其他几个 VC 之间导航，但最终该应用程序不稳定，必须用完全内置于 Unity 的应用程序替换。也许您可以找到更好的方法，但您最好还是深入研究 Unity 和插件，这取决于您希望您的应用程序做什么。希望这可以帮助。

# objective-c - NSError 和 __autoreleasing

> ID：13587742
> 
> 赞同：41
> 
> 时间：2012-11-27T15:40:56.703
> 
> 标签：objective-c, automatic-ref-counting

有人可以向我解释`__autoreleasing`在以下示例代码块中的目的吗？

```
- (void)execute:(NSError * __autoreleasing *)error {
    // do stuff, possibly assigning error if something went wrong
} 
```

我删除了`__autoreleasing`，一切似乎仍然编译/运行良好。我开始使用 obj-c post ARC，所以我从来没有真正学习/理解所有那些双下划线 thingamajigs。我已经阅读了[ARC 过渡指南](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，但我并不完全理解他们的 NSError 示例。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-27T18:29:14.953

考虑 ARC 如何处理*变量*- 每个引用变量都有一个模式（隐式或显式）：*strong*、*weak*等。这种模式让 ARC 知道如何处理对该变量的读取和写入；例如，对于*强*变量，读取不需要额外的操作，而写入需要在变量被新引用替换之前释放变量中的现有引用。ARC 需要知道任何变量的模式才能发挥作用。

现在考虑本身通过*引用*传递的变量，例如，对于您，`execute`您将按照以下方式进行调用：

```
NSError *myError = nil;
...
[someObject execute:&myError]; // pass the variable itself by reference, not the variables value 
```

并且正文`execute`将包含一个分配，如下所示：

```
- (void)execute:(NSError * __autoreleasing *)error
{
   ...
   if (error != NULL)
      *error = [NSError ...]; // assign indirectly via the reference to a variable
   ...
} 
```

现在对于间接赋值，ARC 需要知道被引用变量的模式，这样它就知道如何读写。这就是`__autoreleasing`声明中的内容，它告诉 ARC 它已经传递了对模式为*autoreleasing*的变量的引用，并告诉 ARC 如何读取和写入变量的内容。将假定删除`__autoreleasing`和默认模式，在这种情况下，我建议显式肯定是好的。

*自动释放*模式意味着变量包含一个不属于自己的引用，如果需要，读取应该保留*，*而写入可以只写入。它主要用于通过引用传递的变量。

您可能会注意到，在上面的示例中，变量`myError`具有*强模式（隐式），但它作为**自动释放*通过引用传递- 编译器通过引入临时自动释放变量、复制*而不*保留当前引用`myError`并传递作为参数的临时引用`execute:`。调用返回后，编译器会从临时 to 进行正常分配`myError`，这会导致释放任何旧引用并保留返回的引用。

有关更多详细信息，请参阅[Apple 过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

**跟进评论**

问：是`__autoreleasing`隐式设置的吗？

A：[Apple 的](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)文档并不具体，但[Clang 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.inference)说它是隐含的间接参数。如上所述，我建议明确，清晰是一件好事™。

问：位置重要吗？

A：是的，也不是……这是一个 C 声明，是问答题（“以下声明是什么……”）。限定符应该在两个星号之间，因为它是一个*指向 object 的（类型变量）自动释放指针的指针*，但 Apple 声明编译器是“宽容的”，但没有具体说明它宽容的内容。安全起见，把它放在正确的地方。

问：在做间接分配之前，你不应该测试`error`存在吗？`NULL`

A：当然你应该，在你做间接之前的某个地方。显示的代码只是一个大纲，这些细节被`...`'s 省略和覆盖了。然而，由于多年来它已经被提出了几次，也许我省略了太多，所以`if`添加了一个合适的。

# c# - 如何将小端转换为大端并通过 UDP 发送？

> ID：13587752
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:41:13.643
> 
> 标签：c#, arrays, byte, endianness

我需要将浮动的小端转换为大端并通过UDP发送它们。截断的代码接收坐标数据并将其分配给浮点数组，然后转换为字节数据数组，最后应该通过 UDP 连接发送，但它不起作用！

```
public void SendUDP()
    {
        try 
        {
            lockObj.EnterReadLock();
            try
            {   
                foreach(CoordData datam in coordDataList)
                {
                    float[] dfv = {datam.X, datam.Y, datam.Z, datam.Alpha, datam.Theta, datam.Phi};

                    /*
                    data = BitConverter.GetBytes(datam.Y);
                    data = BitConverter.GetBytes(datam.Z);
                    data = BitConverter.GetBytes(datam.Alpha);
                    data = BitConverter.GetBytes(datam.Theta);
                    data = BitConverter.GetBytes(datam.Phi);
                */
                data = BitConverter.GetBytes(dfv);  
                Array.Reverse(data);    

                }
                client.Send(data, data.Length, remoteEndPoint); 

            }
                finally
                {
                lockObj.ExitReadLock();

                }

                }

        catch (Exception err)
        {
            print(err.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:46:46.513

您的问题是您正在反转整个浮点数组。您需要反转每个浮点数的*字节*。

实际上，您在问题中写的内容甚至不会编译，因为没有`BitConverter.GetBytes`需要数组的重载。

你必须做的（除了使用现有的库函数来为你处理）是这样的：

```
List<byte> myData = new List<byte>();

myData.AddRange(Array.Reverse(BitConverter.GetBytes(datam.x));
myData.AddRange(Array.Reverse(BitConverter.GetBytes(datam.y));
//....etc....

byte[] bytesToSend = myData.ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:07:06.183

您应该使用[IPAddress.HostToNetworkOrder()](http://msdn.microsoft.com/en-us/library/653kcke1%28v=vs.100%29.aspx)来确保您的值对于您的环境是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:23:39.323

这是该问题的解决方案：

```
 int width = sizeof(float);

    int nDataIndex = 0;
    byte[] data = new byte[myData.Count * width];

        for (int i = 0; i < myData.Count; ++i)
        {
            byte[] converted = BitConverter.GetBytes(myData[i]);

            if (BitConverter.IsLittleEndian)
            {
                Array.Reverse(converted);
            }

            for (int j = 0; j < width; ++j)
            { 

                data[nDataIndex+j] = converted[j];          
            }
            nDataIndex+=width;
        }

        client.Send(data, data.Length, remoteEndPoint); 
```

# vba - VBA - 删除复制数据中最后一行之后的所有行

> ID：13587753
> 
> 赞同：0
> 
> 时间：2012-11-27T15:41:16.233
> 
> 标签：vba, excel, excel-2007

我试图找出代码来删除我复制的数据的最后一行之后的所有行

我正在将数据从工作表 A 复制到工作表 B。工作表 B 中已经有数据。如果工作表 A 中的行数小于工作表 B，我想从工作表 A 中删除所有未复制到工作表 B 中的行。

例如：工作表 A = 50 行工作表 B = 60 行。我将工作表 A 复制到工作表 B，我想删除不属于工作表 A 的 10 行。

到目前为止，这是我的代码：

```
Dim shCurrentWeek As Worksheet
Dim shPriorWeek As Worksheet
Dim lr3 As Long

Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
Set shPriorWeek = ActiveWorkbook.Sheets("Prior Week")
lr3 = shPriorWeek.Range(Rows.Count, "A").End(xlUp).Row

'Copies necessary rows in CurrentWeek tab to PriorWeek tab
shCurrentWeek.Range("A4:X" & lr).Copy shPriorWeek.Range("A2")
shPriorWeek.Range("A4:X" & lr3 + 1 & ":A" & Rows.Count).EntireRow.Delete 
```

我相对确定我的 lr3 设置错误......不知道如何修复。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:48:13.670

由于您的代码说`shCurrentWeek.Range("A4:X" & lr).Copy shPriorWeek.Range("A2")`（换句话说，您正在从 [starting row 4] 复制到 [starting row 2]），您可以忘记`lr3`并执行以下操作（我相信）：

```
shCurrentWeek.Range("A4:X" & lr).Copy shPriorWeek.Range("A2")
shPriorWeek.Range("A" & lr-2 & ":A10000").EntireRow.Delete 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:45:26.287

你想`lr3`成为最后一行的行号（不是与粘贴数据相比的偏移量：

```
lr3 = shPriorWeek.Rows.Count 
```

然后删除语句应为：

```
shPriorWeek.Range("A4:A" & lr3).EntireRow.Delete 
```

或者，首先清除然后粘贴（如评论中所建议）也是一种好方法，而且非常干净。

# android - 如何通过排序在 ListView 中显示动态数据

> ID：13587756
> 
> 赞同：0
> 
> 时间：2012-11-27T15:41:18.950
> 
> 标签：android, android-listview

我想做的事：

*   显示项目列表
*   实际数据来自外部来源，并且可以更改
*   每个项目可以有几个“列”。例如“类型”、“内容”、“日期”
*   该列表应该例如可以按“类型”和“日期”排序。

我想我可能能够使用 ListView 获得所需的功能（但也许这也是一个非常糟糕的选择？）。我已经阅读了一些关于它们的东西，但仍然有一些问题。我知道 ListView 显示由适配器管理的数据。如果我有一个 ArrayAdapter，Listview 是否总是按照 Adapter 中底层数组的顺序显示项目？所以要实现排序，我必须以某种方式更改适配器中的数组？我读过，您可以使用 SimpleAdapter 连续拥有多个属性，但 SimpleAdapter 使用的数据似乎是静态的。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:48:30.463

创建您自己的适配器，并在`getView()`返回视图中匹配您的位置。例如，如果你得到这样的数据：

```
id  name
0   ccc
1   bbb
2   aaa 
```

然后，当您排序`id`并且 listview 想要位置 1 的行时，您返回`1 bbb`. 但是，如果您按名称升序排序，并且 list 想要第 2 行，那么您将返回`0 ccc`. 当然，您需要维护“映射”，但这相当微不足道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:49:57.083

是的，`ListView`将表示取决于您的`ArrayList`或`Vector`( `[]`) 的排序方式。现在，如果您想为每一行设置多个属性，我建议您创建一个`Object`您选择的属性，例如：`class Person`它包含姓名、年龄、地址等。然后创建一个包含`Person`对象的列表。然后在你将覆盖`getView`的你的中，你可以调用，现在你在那个特定的行（位置）中持有那个对象，并且可以对那个对象做任何你想做的事情。`ArrayAdapter``Person person = getItem(position);``Person`

# git - git 樱桃挑选并合并

> ID：13587758
> 
> 赞同：1
> 
> 时间：2012-11-27T15:41:36.343
> 
> 标签：git, git-merge, git-cherry-pick

我当前的分支是分支-X。我从分支-Z 中挑选一个提交 Y，然后计划将分支-Y 合并到分支-X。合并期间是否会再次应用提交 Y？

马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:44:51.847

不，只要提交未更改，git 就会检测到它已被应用并跳过它。如果提交在其中一个分支中发生了更改，您可能会遇到冲突，该冲突的解决方式与其他冲突相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:45:49.293

不，git 足够聪明，当你合并分支时，它不会重新应用已经应用的补丁。

您可以尝试使用从您选择它的位置（您的分支-Z）到您选择它的分支（分支-X）的提交来重新定位分支。

# objective-c - 在Objective C中格式化设置属性的最佳方法

> ID：13587760
> 
> 赞同：0
> 
> 时间：2012-11-27T15:41:41.977
> 
> 标签：objective-c, shorthand

我已经在目标 c 中编码了一段时间，但有时我仍然想知道是否有最好或最快的方法来做某事。

例如，假设我有一个名为 myLabel 的 UILabel 和一个名为 mainView 的 UIViewController，那么设置它的最快或最佳方法是什么。

方法一

```
mainView.myLabel.text = @"String"; //similar to c/c++ style 
```

方法二

```
[mainView.myLabel setText:@"String"]; //between c/c++ and obj-c style 
```

方法三

```
[[mainView myLabel] setText:@"String"]; //obj-c style 
```

我个人更喜欢方法2，因为方法1不只是一种访问它的速记方法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:45:48.983

您列出的所有 3 个选项都会调用相同的代码（myLabel 和 setText: 方法），因此绝对没有性能差异。

所以最好的方法是选择你最喜欢的任何一个选项，并在整个项目中始终如一地使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:45:57.723

它们编译成完全相同的代码。没有任何效率损失。使用任何你喜欢的。

选项 1 涉及最少的打字。选项 3 最好地描述了实际发生的情况（例如，您不能将属性访问误认为 struct 元素访问）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T16:20:06.233

我添加了另一种方式，仅供参考，所有同行都说，这些都是相似的，没有性能问题....

方法一

```
mainView.myLabel.text = @"String"; //similar to c/c++ style 
```

方法二

```
[mainView.myLabel setText:@"String"]; //between c/c++ and obj-c style 
```

方法三

```
[[mainView myLabel] setText:@"String"]; //obj-c style 
```

# c# - 用 .NET 编写的 Windows 服务可从 VB6 访问

> ID：13587761
> 
> 赞同：2
> 
> 时间：2012-11-27T15:41:42.273
> 
> 标签：c#, .net, vb6, windows-services

我必须在 .NET/C# 中开发 Windows 服务。该服务必须可从 VB6 应用程序访问。

我的第一个想法是在 Windows 服务中托管 WCF 服务，但是 VB6 应用程序需要一个包装器才能使该服务能够使用它。这不是一个选择。

现在我正在考虑使用套接字，但这是最好的方法吗？如果没有，最好的设计是什么？

我想知道我的选择是什么，这些选择的优缺点是什么？

非常感谢任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:06:50.097

您可以[将 WCF 服务托管为 COM+ 应用程序](http://msdn.microsoft.com/en-us/library/bb735856.aspx#_Toc156817373)。

在 COM+ 中托管 WCF 服务后，您可以从 COM+ 应用程序生成类型库，然后在 VB6 代码中引用它。

请注意，您必须在托管 WCF 服务的机器上安装 .NET 运行时（但如果使用分布式调用，则不需要安装在安装 COM+ 代理的机器上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:11:44.713

WCF 服务仍然是一个选项，但您必须确保 WCF 配置的绑定是可互操作的（例如，选择[BasicHttpBinding](http://msdn.microsoft.com/en-us/library/ms731361.aspx)，如下所示：[WCF Bindings In Depth](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx)）。

在 VB6 方面，您可以调用现有的 SOAP 端点，如下所述，例如：[如何在 VB6 中使用 SOAP Web 服务？](https://stackoverflow.com/questions/5104143/how-to-consume-a-soap-web-service-in-vb6)

# svn - 是否可以在普通文件夹中创建一个链接到服务器上的 subversion 存储库？

> ID：13587763
> 
> 赞同：2
> 
> 时间：2012-11-27T15:41:50.243
> 
> 标签：svn, webserver, repository, hyperlink

假设您有一个管理 SVN 存储库的服务器。现在是否可以在服务器上的其他地方创建指向 SVN 存储库目录（存储库的最新修订版）的链接？存储库中的文件如何实际存储在服务器上？

我的目的是在我的存储库中创建一个指向`/var/www/domain`文件夹的符号链接，以便`domain`以一种方便的方式将我设计的网站文件与我在工作机器上所做的更改同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:48:42.577

您可以通过将存储库签出到本地工作副本来同步文件，然后在此工作副本中使用 SVN 更新命令来拉取更新。要将信息发送到存储库，您可以在进行更改的工作副本中使用提交。不要直接在你的 subversion 服务器上直接弄乱 SVN 存储库文件！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:53:57.930

您将无法直接链接到可用作网站的存储库。

很多人使用提交后挂钩来自动部署网站。你会发现大量关于如何做到这一点的文章，例如[这篇](http://brennydoogles.wordpress.com/2011/10/21/using-subversion-to-automatically-publish-your-website/)文章。

**但这**确实是一个坏主意，因为您必须在每次提交时等待部署完成（这可能很长，除非您的部署过程非常非常快）。你最好的选择是使用[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)工具，例如[Jenkins](http://jenkins-ci.org/)。

# java - 在java中使用随机生成器时提供种子？

> ID：13587764
> 
> 赞同：-5
> 
> 时间：2012-11-27T15:41:52.313
> 
> 标签：java, random

你如何为 java 随机生成器提供种子？随机生成器 = new Random(2002334); 每次调用随机生成器时都会产生相同的数字吗？使用什么数字作为种子是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:43:03.880

通过创建[Random](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)类的实例。

```
Random rand = new Random(42);
int x = rand.nextInt(); // will always be the same 
```

您还可以使用[setSeed](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#setSeed%28long%29)方法在已创建的 Random 实例上（重新）设置种子：

```
rand.setSeed(42);
int x = rand.nextInt(); // will be the same again 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:43:32.490

```
Random(long seed) 
```

- 使用单个长种子创建一个新的随机数生成器：

来自：[http ://docs.oracle.com/javase/6/docs/api/java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:44:20.717

有两种方法：

1.  将构造函数用作`Random random = new Random(seedValue);`//<-- 将所需的种子值作为参数传递

2.  实例化后使用`setSeed`as 方法`random.setSeed(seedValue);`设置所需的种子值。

您可以在这里参考文档：[http](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#Random(long) ://docs.oracle.com/javase/7/docs/api/java/util/Random.html#Random(long )

# javascript - 在 BackboneJS 中动态设置 View 的属性

> ID：13587768
> 
> 赞同：3
> 
> 时间：2012-11-27T15:42:12.443
> 
> 标签：javascript, backbone.js

```
App.Views.WidgetAvailable = Backbone.View.extend({
        tagName: 'li',

        className: 'widget',

        template: template('available_template'),

        render: function(){
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }
    }); 
```

所以我得到了两个集合使用的这个视图，问题是这两种情况下只有模板属性不同。因此，我试图弄清楚如何动态设置*模板：*属性。

有谁知道如何做到这一点？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:47:13.893

应该像这样简单：

```
 initialize: function(){
                this.template = options.template;
                return this;
            } 
```

然后当你调用它时：

```
var view = new App.Views.WidgetAvailable( { template : '...' } ); 
```

感谢[mu 太短无法](https://stackoverflow.com/users/479863/mu-is-too-short)更正

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:50:35.430

您可以将参数传递到您的[初始化](http://documentcloud.github.com/backbone/#View-constructor)方法中，因此您应该能够只传递模板。

例如：

```
App.Views.WidgetAvailable = Backbone.View.extend({

   initialize: function (template) {
           this.template = template(template);

    }
      //the rest of your views code
});

var view1 = new App.Views.WidgetAvailable(template1);
var view2 = new App.Views.WidgetAvailable(template2); 
```

# sitecore - 在 Sitecore 中使用 BucketManager

> ID：13587774
> 
> 赞同：1
> 
> 时间：2012-11-27T15:42:28.433
> 
> 标签：sitecore, sitecore6

我的 Web 应用程序有一个简单的核心库，用于测试 Item Bucket API。我有一类属性和方法，例如，我想使用属性和存储模板 ID 的常量类来查询 Sitecore 中的电影项目桶。

我遇到的问题是使用 BucketManager 类调用静态方法**Search()**时，它无法识别第二个参数**模板**：“String”

![BucketManager Sitecore GetAllMovies](../Images/b78cf332c894d4df4f7b2ca8c821343c.png)

以前有人遇到过这个问题吗？我在 Sitecore 中也遇到了 BucketList 问题，其中只有模板的标准值显示 BucketList TemplateFilter 源（如果您对此错误感兴趣，请索取屏幕截图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:55:04.413

**Sitecore 项目存储桶开发人员指南旨在排除一个名为hitCount**的非可选参数，这是一个允许对结果进行分页的属性。没有这个参数，我有一个无效的方法签名，这导致了错误。

这是正确的代码：

```
public List<Item> GetAllMovies() {
            var hc = 0;
            return BucketManager.Search(
                MovieFolder, 
                out hc, 
                templates: Constants.Constants.TemplateIDs.MoviesItemTemplateID
            ).Select(i=> i.GetItem()).Where(i=>i != null).ToList();
        } 
```

此外，不要忘记将 IENumberable 转换为项目列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:43:56.117

尝试添加这样的字符串

```
using Sitecore.ItemBucket.Kernel.ItemExtensions.Axes; 
```

# php - PHP将日期添加到月末

> ID：13587776
> 
> 赞同：-3
> 
> 时间：2012-11-27T15:42:34.783
> 
> 标签：php

> **可能重复：**
> [PHP 本月的最后一天](https://stackoverflow.com/questions/1686724/php-last-day-of-the-month)

我必须为我的申请设置一个到期日。

第一个用户必须选择列表的持续时间，例如它的 1 年和今天是 2012 年 11 月 25 日

然后我们必须将此 1 年添加到当前日期并自动将到期日期设置为其月末。即到期日**为 2013 年 11 月 30 日**

如果当前日期是 2012 年 10 月 4 日并选择 1 年持续时间，则到期日期是 2012 年 10 月 31 日。

我成功地将一/两年/任何年份添加到当前日期，但是如何找出它的月底？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:44:51.777

你可以这样做：

```
echo date("Y-m-t", strtotime("+1 year")); 
```

[请参阅文档`strtotime`](http://php.net/manual/en/function.strtotime.php)

并[使用`t`日期函数获取该月的最后一天](http://us.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:46:52.923

像下面这样的东西应该适合你：

```
echo date("Ymt", strtotime("+1 year"));

```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T15:49:24.167

试试这个代码：

```
echo date(date('t',strtotime($date)) . '-M-Y', strtotime($date . ' +1 year')); 
```

# .net - 单元测试无法访问另一个项目中的设置

> ID：13587778
> 
> 赞同：2
> 
> 时间：2012-11-27T15:42:50.057
> 
> 标签：.net, visual-studio, unit-testing, post-build-event, settings.settings

在 Visual Studio 中，我有一个单元测试，它调用另一个项目中的类的方法 - 我们称之为 MyClass.A()。

在 A() 中，它访问 MyClass 的项目属性中的设置。

当我在正常运行时使用 MyClass.A() 时，它会从设置中获取正确的值。但是，当我从单元测试中执行此操作时，它返回 null。我是否需要单元测试项目中的构建后事件来复制设置？

这是在 MyClass.A() 中访问设置的方式：

```
string connectionString = global::DataAccess.Properties.Settings.Default.ConnectionString; 
```

**解析度**

所以这个问题与我喜欢称之为我的大脑的湿卫生纸堆有关。MyClass 上有一个公共属性，我需要使用连接字符串进行设置。Set 访问器将值分配给适当的 Settings 属性。感谢所有的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:10:39.140

如果您正在访问连接字符串，这实际上看起来不像是单元测试。您最好模拟依赖连接字符串的任何行为，以便隔离您的功能。看看这里的一些[测试框架](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks)（我很喜欢 Moq）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:04:18.793

您实际上有 2 个选项，首先您可以进行设置`Public`而不是`Internal`.

其次，您可以将[InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute%28v=vs.100%29.aspx)添加到指定单元测试程序集的主程序集中。

```
[assembly:InternalsVisibleTo("MyUnitTestLibrary")] 
```

[附带说明一下，您应该使用ConnectionStringsSection](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringssection%28v=vs.100%29.aspx)将连接字符串存储在 app.config 中，并使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings%28v=vs.100%29.aspx)来读取它。

# oracle - oracle中的总和值

> ID：13587786
> 
> 赞同：2
> 
> 时间：2012-11-27T15:43:06.257
> 
> 标签：oracle, select, oracle11g, sum

我正在尝试做一个需要的家庭作业问题。

```
--5\. CALCULATE THE TOTAL QUANTITY ON HAND FOR EACH INVENTORY IT IN THE INVENTORY
--TABLE-IGNORE THIER DIFFERNT SIZES AND COLORS 
```

这是我带来的查询。我看起来不错，除了 qoh 值

```
SELECT DISTINCT(item.item_id),item.item_desc,
(SELECT SUM(inv_qoh) FROM INVENTORY WHERE i.item_id = item.item_id)
FROM ITEM item INNER JOIN INVENTORY i ON i.item_id = item.item_id; 
```

每行返回 3143 而不是该特定 item_id 的值。

```
 5 Children's Beachcomber Sandals                                                         3143 
     7 Girl's Soccer Tee                                                                      3143 
     4 Women's Fleece Pullover                                                                3143 
     6 Boy's Surf Shorts                                                                      3143 
     1 Men's Expedition Parka                                                                 3143 
     3 Women's Hiking Shorts                                                                  3143 
     2 3-Season Tent                                                                          3143 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:46:06.757

看起来你想使用这样的东西。它将`sum()`聚合和 a应用于列表`GROUP BY`中的其余两个字段`SELECT`：

```
SELECT item.item_id, 
    item.item_desc,
    SUM(i.inv_qoh) TotalInventory
FROM ITEM item 
INNER JOIN INVENTORY i 
    ON item.item_id = i.item_id
GROUP BY item.item_id, item.item_desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:46:53.220

您正在以一种迂回的方式执行此操作，但如果您进行以下更正，它应该可以工作：

* * *

看看你的 select 子句中的子查询：

```
SELECT SUM(inv_qoh) FROM INVENTORY WHERE i.item_id = item.item_id 
```

您在 where 子句中使用了别名`i`，`item`但它们都不对应于您从中选择的表。要更正此问题，您需要为该表添加第三个别名并引用它：

```
SELECT SUM(inv_qoh) FROM INVENTORY i2 WHERE i2.item_id = item.item_id 
```

此时您可能会注意到，您实际上并没有使用`inventory`外部 SQL 语句中的任何内容，因此您可以将其全部删除（这也可以让您消除`distinct`.

* * *

也就是说，@bluefeet 的回答应该以更有效的方式为您提供相同的结果。

# github - 从上游获取时，github 上的权限被拒绝（公钥）

> ID：13587787
> 
> 赞同：4
> 
> 时间：2012-11-27T15:43:05.860
> 
> 标签：github, ssh-keys

我似乎无法使用 ssh 密钥身份验证从上游获取更改。

我可以很好地添加回购：

```
$ git remote add upstream git@github.com:user/repo.git 
```

我的 ssh 文件夹的内容似乎没问题：

```
$ ls ~/.ssh
authorized_keys  id_rsa  id_rsa.pub  known_hosts 
```

登录完美：

```
$ ssh -T git@github.com
Hi user/repo! You've successfully authenticated, but GitHub does not provide shell access. 
```

但是从上游获取不起作用：

```
$ git fetch upstream
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T19:49:01.780

如果您不“拥有”遥控器，您应该只使用只读链接

```
git remote add upstream git://github.com/antirez/redis 
```

# c++ - 带有指针向量的 SWIG 和 C++ 内存泄漏

> ID：13587791
> 
> 赞同：23
> 
> 时间：2012-11-27T15:43:18.743
> 
> 标签：c++, python-2.7, swig

我正在使用 SWIG 在 C++ 和 Python 之间进行接口。我创建了一个创建对象指针的 std::vector 的函数。在这种情况下，指向的对象并不重要。

我遇到的问题是，当对象 ( `someObject`) 超出 Python 端的范围时，它无法释放向量内的对象/s 指针指向的内存，从而导致内存泄漏。

## 例子

*   C++ 代码：

    ```
    std::vector < someObject* > createSomeObjectForPython()
    {
       std::vector < someObject* > myVector;
       someObject* instanceOfSomeObject = new someObject();
       myVector.push_back(instanceOfSomeObject);
       return myVector;
    } 
    ```

*   从 Python 解释器：

    ```
    objectVar = createSomeObjectForPython() 
    ```

当我在 Python 中运行它时，我得到了这个错误：

```
swig/python detected a memory leak of type 'std::vector< someObject *,std::allocator<  someObject * > > *', no destructor found. 
```

这个错误是因为当 Python 删除向量时，它只能删除向量内的指针，而不是它们实际指向的指针。

如果我可以为 std::vector 创建一个析构函数，这将是答案，但这是不可能的。

在有人建议将其作为解决方案之前，我确实需要使用与对象向量相反的指针向量，特别是因为对象又大又复杂，而且速度是一个问题。

我在 Windows 上使用 gcc4.4、swigwin 2.0.4 和 Python 2.7。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-27T21:40:59.520

您看到的警告并不直接在于您有一个指针向量这一事实。考虑以下 SWIG 接口文件：

```
%module test

// This just gets passed straight through and not used for wrapping
%{
struct foo {};
%}

struct foo;

%inline %{
  struct foo bar() { struct foo f; return f; }
%} 
```

使用这个接口给出：

```
swig -Wall -python test.i && gcc -Wall -Wextra -std=c99 -shared -o _test.so test_wrap.c -I/usr/include/python2.7 && python2.7
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> test.bar()
<Swig Object of type 'struct foo *' at 0xb7654a70>
>>> 
swig/python detected a memory leak of type 'struct foo *', no destructor found. 
```

问题是 SWIG 只看到了一个声明，而不是`struct foo`. 默认行为是 Python 代理对象在此处释放/删除（视情况而定）底层对象，但它无法仅根据它所看到的前向声明来推断如何执行此操作。

如果我们扩展测试用例以包含`std::vector<foo>`相同的内容，则会观察到：

```
%module test

%{
struct foo {};
%}

struct foo;

%include <std_vector.i>

%inline %{
  foo bar() { return foo(); }
  std::vector<foo> bar2() { 
    return std::vector<foo>(); 
  } 
%} 
```

这再次给出了关于没有析构函数的警告：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> print test.bar2()
<Swig Object of type 'std::vector< foo,std::allocator< foo > > *' at 0xb7671a70>swig/python detected a memory leak of type 'std::vector< foo,std::allocator< foo > > *', no destructor found. 
```

但是，我们可以通过确保类型的*定义*可用来轻松解决此问题。因为`struct foo`这只是让 SWIG 可以看到整个结构体。因为`std::vector<T>`我们需要使用`%template`来做到这一点：

```
%module test

%include <std_vector.i>

%inline %{
  struct foo {};
  foo bar() { return foo(); }
  std::vector<foo> bar2() { 
    return std::vector<foo>(); 
  } 
%}

%template(FooVec) std::vector<foo>; 
```

现在没有警告（或泄漏）：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> print test.bar()
<test.foo; proxy of <Swig Object of type 'foo *' at 0xb76aba70> >
>>> print test.bar2()
<test.FooVec; proxy of <Swig Object of type 'std::vector< foo > *' at 0xb76abab8> >
>>> 
```

复杂之处在于，在您的示例中，您有`std::vector<T*>`，因此我们可以更改我们的测试用例来说明：

```
%module test

%include <std_vector.i>

%inline %{
  struct foo {};
  foo bar() { return foo(); }
  std::vector<foo*> bar2() { 
    return std::vector<foo*>(1, new foo); 
  } 
%}

%template(FooVec) std::vector<foo*>; 
```

然后我们可以运行：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> print test.bar2()
<test.FooVec; proxy of <Swig Object of type 'std::vector< foo * > *' at 0xb7655a70> >
>>> 
```

这*确实会*泄漏，但至关重要的*是没有*显示您注意到的警告，因为就 SWIG 而言，`std::vector`它本身已被正确删除（实际上与 C++ 中的语义完全相同）。

至于如何处理泄漏，这些选项与 C++ 中的通常相同。就个人而言，我会尽量[避免将原始指针放入向量中](https://stackoverflow.com/questions/7217611/should-my-stdvector-contain-pointers-or-structs/7217650#7217650)，除非你真的希望指向的对象比向量长。基本上你可以：

1.  不在结构中存储指针
2.  使用智能指针（`std::shared_ptr`或`std::unique_ptr`或 boost 等价物）。
3.  以某种方式手动管理内存。

我们已经在第二个示例中完成了 1。使用 SWIG 2 也非常简单，而 3 是在您的界面中编写和包装另一个函数的问题。

```
%module test

%include <std_vector.i>
%include <std_shared_ptr.i>

%{
#include <memory>
%}

%inline %{
  struct foo {};
  foo bar() { return foo(); }
  std::vector<std::shared_ptr<foo> > bar2() { 
    return std::vector<std::shared_ptr<foo> >(1, std::make_shared<foo>()); 
  } 
%}

%shared_ptr(Foo);
%template(FooVec) std::vector<std::shared_ptr<foo> >; 
```

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> print test.bar2()
<test.FooVec; proxy of <Swig Object of type 'std::vector< std::shared_ptr< foo >,std::allocator< std::shared_ptr< foo > > > *' at 0xb76f4a70> >
>>> print test.bar2()[0]
<Swig Object of type 'std::vector< std::shared_ptr< foo > >::value_type *' at 0xb76f4a70>
>>> 
```

哪个有效，存储共享指针并且不会泄漏。

如果你真的想做第三种方式（我会不惜一切代价避免它，因为它会让你的界面容易出现人为错误）使用 SWIG 实现它的最简单方法是使用`%extend`，例如：

```
%module test

%include <std_vector.i>

%inline %{
  struct foo {};
  foo bar() { return foo(); }
  std::vector<foo*> bar2() { 
    return std::vector<foo*>(1, new foo); 
  } 
%}

%template(FooVec) std::vector<foo*>;

%extend std::vector<foo*> {
  void empty_and_delete() {
    for (std::vector<foo*>::iterator it = $self->begin(); 
         it != $self->end(); ++it) {
      delete *it;
    }
    $self->clear();
  }
} 
```

我们可以做的：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> x = test.bar2()
>>> print x.size()
1
>>> x.empty_and_delete()
>>> print x.size()
0
>>> 
```

或者您可以[使用`%pythoncode`](https://stackoverflow.com/questions/8837135/add-new-method-to-a-python-swig-template-class/8843942#8843942)修改`__del__`来自动调用该函数，但这不是一个好主意，因为它不会影响 Python 根本看不到的对象，并且在某些情况下可能会导致意外行为。

# ruby-on-rails - 如何在不使用 CSS3 的情况下检查显示器分辨率

> ID：13587793
> 
> 赞同：0
> 
> 时间：2012-11-27T15:43:19.997
> 
> 标签：ruby-on-rails, twitter, twitter-bootstrap, media-queries

我刚刚为我们的网站部署了一个 Rails 3.2.9 应用程序。在主页上，我有旧的 Twitter 小部件，您可以在其中修改比新功能更多的功能。我开发了一个网站，它使用 CSS3 中的媒体查询为桌面和移动设备提供响应式设计。

问题是旧的小部件不允许根据我的经验输入宽度和高度的百分比。当然，这些小部件的帮助不再可用。新的 Twitter 小部件不允许您修改宽度，只能修改高度。我希望能够根据屏幕分辨率为 Twitter 小部件设置不同的宽度。我认为这可能的唯一方法是，如果我能以某种方式检查我的 html/erb 代码中的监视器大小。

我已经进行了搜索，试图找到有关如何在 Rails 和 HTML 中检查这一点的信息。我所发现的一切都需要使用 CSS3 媒体查询来完成。

**我的问题：**有没有办法检查 HTML5 或 Rails 3 中 CSS 媒体查询中使用的媒体参数？

基本上我正在寻找类似的东西或一些 HTML5 等价物。

```
<script src="http://widgets.twimg.com/j/2/widget.js"></script>
<% if some media query parameters for smartphones %>
  <script>Twitter widget</script>
<% elsif some media query parameters for tablets %>
  <script>Twitter widget</script>
<% else %>
  <script>Twitter widget</script>
<% end %> 
```

或者，旧的 Twitter 小部件可能存在帮助，您可以在其中使用百分比而不是像素。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T00:53:51.357

据我所知，媒体查询仅适用于屏幕尺寸定义的像素。

您可以使用 Javascript 来检查屏幕大小，但又为什么不使用媒体查询。我知道你说过你不能使用它们，但这似乎是唯一的选择。

有一种获取网页大小的javascript方式（来源[获取屏幕、当前网页和浏览器窗口的大小](https://stackoverflow.com/questions/3437786/how-to-get-web-page-size-browser-window-size-screen-size-in-a-cross-browser-wa)）

```
 $(window).height();   // returns height of browser viewport
 $(document).height(); // returns height of HTML document
 $(window).width();   // returns width of browser viewport
 $(document).width(); // returns width of HTML document 
```

你可以试试这个 twitter 小部件：[http](http://tweet.seaofclouds.com/) ://tweet.seaofclouds.com/我相信它可以与媒体查询一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:04:45.543

可以查看 JS Breakpoint 库，例如[http://xoxco.com/projects/code/breakpoints/](http://xoxco.com/projects/code/breakpoints/)

# c++ - 为什么 list::push_back 在 VC++ 中比 g++ 慢得多？

> ID：13587799
> 
> 赞同：6
> 
> 时间：2012-11-27T15:43:38.997
> 
> 标签：c++, performance, list, visual-c++, g++

这段代码在我的 VS2012 中大约需要 20 秒，但在 G++ 中只需要 1.x 秒。在 win8 x64 和使用默认选项编译。

```
list<double> items;
for(int i=0;i<10000000;i++){
    items.push_back(rand());
}
cout<<"done"<<endl; 
```

是关于内存分配的吗？在我的机器上用 VC++ 输出后释放内存需要 3~5 秒，在我的朋友（win7 x64）中甚至超过 1 分钟。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T16:00:42.820

嗯...我扩展了您的代码以包括时间：

```
#include <list>
#include <iostream>
#include <time.h>
#include <stdlib.h>

int main() { 
    std::list<double> items;

    clock_t start = clock();

    for(int i=0;i<10000000;i++){
        items.push_back(rand());
    }

    clock_t finish = clock();

    std::cout << "Time: " << double(finish-start)/CLOCKS_PER_SEC << "\n";
    return 0;
} 
```

我使用 VC++ 编译：`cl /O2b2 /GL test_list.cpp`

同样，我用 g++ 编译，使用：`g++ -O3 test_list.cpp`

然后我跑了两个。

使用 VC++ 我得到了：`Time: 1.293`.
使用 g++ 我得到了：`Time: 1.313`.

这是一个足够小的差异，我认为我需要进行更多测试才能完全确定 VC++ 产生了明显*更快*的代码，但我认为这足以支持 VC++*没有*产生明显*更慢*的代码的结论。

您需要打开时序结果的优化才能表示任何含义。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-11-27T16:45:18.650

如果您在 Windows 上并且担心性能，请不要使用 STL 容器。功能等效的 ATL 容器类通常*要*快得多。

在我的笔记本电脑（i5-2410M CPU，Windows 7 64）上，您的示例（在使用 Visual Studio 2010 的 64 位发布版本编译时）在 740 毫秒内执行。当使用功能等效的 ATL 容器[CAtlList<double>](http://msdn.microsoft.com/en-us/library/7kc8a6xw%28v=vs.80%29.aspx)时，执行时间降至 370 毫秒。

与 Microsoft 的高级库相比，使用标准库的性能损失约为 50%。

这是源代码：

```
void list_stl()
{
    std::list<double> items;
    CBenchmarkTimer tt( "10M doubles in std::list" );
    for( int i = 0; i < 10000000; i++ )
        items.push_back( rand() );
    tt.End();
}

void list_atl()
{
    CAtlList<double> items;
    CBenchmarkTimer tt( "10M doubles in CAtlList" );
    for( int i = 0; i < 10000000; i++ )
        items.AddTail( rand() );
    tt.End();
} 
```

CBenchmarkTimer 是我自己的使用高分辨率计时器的类。

# entity - 使用 Spring Data Neo4j 进行审计

> ID：13587800
> 
> 赞同：2
> 
> 时间：2012-11-27T15:43:39.123
> 
> 标签：entity, neo4j, spring-data, spring-data-neo4j

我目前正在开发一个使用 Spring Data Neo4j 的项目。每当创建 NodeEntity 时，我都想创建一个引用的 Audit NodeEntity，其中包含创建日期和用户。

我想出的一个解决方案是编写一个 AOP Aspect，它与我的服务层的 create 方法挂钩。这适用于没有级联的实体，但级联的实体呢？这没有在我的服务层中显式传递，因此我的 AOP 类不会拦截它们。JPA 中是否有类似实体侦听器的概念，或者我如何才能融入这种机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:18:34.833

从 Spring Data Neo4j 2.2 开始，我们可以使用 AuditingEventListener 来审计实体。Spring Data 1.5 提供了[@CreatedDate](http://static.springsource.org/spring-data/commons/docs/current/api/org/springframework/data/annotation/CreatedDate.html)、[@CreatedBy](http://static.springsource.org/spring-data/commons/docs/current/api/org/springframework/data/annotation/CreatedBy.html)、[@LastModifiedDate](http://static.springsource.org/spring-data/commons/docs/current/api/org/springframework/data/annotation/LastModifiedDate.html)和[@LastModifiedBy](http://static.springsource.org/spring-data/commons/docs/current/api/org/springframework/data/annotation/LastModifiedBy.html)注解。您可以按如下方式使用它们：

```
@NodeEntity
public class Entity {

    @GraphId
    private Long id;

    @CreatedDate
    private Long date;

} 
```

确保配置 AuditingEventListener：

```
@Configuration("db")
@EnableNeo4jRepositories(basePackages = { "your.package" })
@EnableTransactionManagement
public class DatabaseSpringConfiguration extends Neo4jConfiguration {

    @Bean(destroyMethod = "shutdown")
    public EmbeddedGraphDatabase graphDatabaseService() {
        return new EmbeddedGraphDatabase("data/neo4j.db");
    }

    @Bean
    public AuditingEventListener auditingEventListener() throws Exception {
        return new AuditingEventListener(new IsNewAwareAuditingHandler<Object>(isNewStrategyFactory()));
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:18:58.413

Spring Data Neo4j (SDN)在 2.1 版本中引入了[生命周期事件的概念。](http://static.springsource.org/spring-data/data-neo4j/docs/2.1.x/reference/html/#d5e1169)这也适用于级联实体。

# sitecore - Sitecore ECM 模块 如何管理时事通讯的本地化

> ID：13587804
> 
> 赞同：1
> 
> 时间：2012-11-27T15:44:16.153
> 
> 标签：sitecore, sitecore6, sitecore-ecm

我正在通过 ECM 模块构建一个时事通讯，它应该以法语或荷兰语发送。

我想了解它对时事通讯的作用。（我找到了很多关于 CMS 网站的信息，但一无所获）

这是我的理解：

编辑将用法语撰写文章。他将为法语创建一个新版本。翻译者必须为荷兰语创建一个新版本并翻译文本。

-> 我们有两个版本。

管理员在构建时事通讯时会不会有任何问题？

当我们发送时事通讯时，它是如何工作的？

语言是否来自属性（用户定义）？法国客户会收到法语版的时事通讯，而荷兰客户会收到荷兰语版的通讯吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:27:34.343

消息是 Sitecore 项目（或项目树）。ECM 用户将创建两个版本（法语和荷兰语）的消息项并填充内容。

开箱即用的 ECM (1.0 - 1.3.3) 只能以一种语言发送消息。ECM 用户在开始调度时选择发送的语言。

同时，可以定制 ECM，为每个接受者选择特定的消息语言。

`subscriber:assigned`当您需要在发送给收件人之前修改消息的内容时，该事件是一个不错的选择。该事件在`Sitecore.EmailCampaign.config`文件中定义。

见代码示例：

```
public void OnSubscriberAssigned(object sender, EventArgs args)
{
  MailMessageItem message = Event.ExtractParameter(args, 0) as MailMessageItem;

  // Contact represents a recipient
  Contact recipient = message.PersonalizationContact;

  message.TargetLanguage = GetLanguageYouWantForRecipient(recipient);
} 
```

# ninject - WebForms 中的 Ninject 3

> ID：13587805
> 
> 赞同：4
> 
> 时间：2012-11-27T15:44:20.053
> 
> 标签：ninject, ninject.web

当我尝试启动安装了 Ninject.Web (v3) 的 WebForms 应用程序时，出现以下错误。

**“静态容器已经有一个与之关联的内核！”**

我在 Global.asax 中实现 Ninject，继承自 NinjectHttpApplication 并覆盖 CreateKernel()，我的模块采用以下形式

```
public class NinjectWebModule: NinjectModule
    {
        public override void Load()
        {
            Bind<IBlah>().To<Blah>();
        }
    } 
```

我基本上遵循了包含[如何在 asp.net Web 表单上实现 Ninject 或 DI 的设置建议？](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms)

疼痛的黄屏说

```
[NotSupportedException: The static container already has a kernel associated with it!]
   Ninject.Web.KernelContainer.set_Kernel(IKernel value) in c:\Projects\Ninject\ninject.web\src\Ninject.Web\KernelContainer.cs:38
   Ninject.Web.NinjectWebHttpApplicationPlugin.Start() in c:\Projects\Ninject\ninject.web\src\Ninject.Web\NinjectWebHttpApplicationPlugin.cs:62
   Ninject.Web.Common.Bootstrapper.<Initialize>b__0(INinjectHttpApplicationPlugin c) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:52
   Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map(IEnumerable`1 series, Action`1 action) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerableOfT.cs:32
   Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:52
   Ninject.Web.Common.NinjectHttpApplication.Application_Start() in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\NinjectHttpApplication.cs:80

[HttpException (0x80004005): The static container already has a kernel associated with it!]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): The static container already has a kernel associated with it!]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T15:59:49.513

嗬！安装 Ninject.Web (v3) 会添加一个带有 NinjectWebCommon.cs 的 App_Start 文件夹

这是您注册绑定的地方，而不是 Global.asax

# java - java线程处理的多个任务正在延迟另一个java线程

> ID：13587814
> 
> 赞同：0
> 
> 时间：2012-11-27T15:44:42.773
> 
> 标签：java, linux, multithreading, concurrency

我正在运行的核心 Java 服务器所做的一件事是处理两种类型的任务（T1 和 T2）。最初这些任务是从同一个队列和线程中处理的。有时队列包含大约 1000 个 T1 任务，这会导致下一个 T2 任务延迟。所以我决定改变架构并在单独的线程和单独的队列中处理每个任务。但看起来 JVM 在切换到另一个线程并处理 T2 任务之前仍会处理约 1000 个 T1 任务（大约 0.6 秒）。

我在运行“Red Hat Enterprise Linux Server release 6.1 (Santiago)”的四核机器上运行。

我假设这两个线程在同一个 CPU 上运行。

有什么方法可以让 OS 或 JVM 更频繁地切换？还有一种方法可以查看哪个处理器正在处理哪个线程？

我已经使用调试器验证了两个线程都作为单独的线程运行。

使用创建一个线程

```
this.executor.Executors.newSingleThreadExecutor(); 
```

任务是使用提交的

```
executor.submit(new Task2(..)); 
```

另一个线程是管理它自己的队列的遗留代码：

```
private final BlockingQueue<...> workQueue = new LinkedBlockingQueue<...>();
....
public void submit(Task1 task) {
    workQueue.add(task);
}

....

    public void run() {
    while (alive){
        try{
            Task1 task = workQueue.take();
                            processwork(task);
                    }
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:50:58.863

我同意建议可能存在阻止并行性的程序问题的评论。但是，如果不是这种情况，您可以做两件事来建议更多的切换：

1.  降低 T1 线程的优先级。
2.  在每个 T1 任务结束时在 T1 线程中插入一个 yield 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:58:43.243

根据您当前的描述，这是正确的答案：您需要调用`thread.start()`而不是`thread.run()`

如果不是，您需要发布代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:50:50.157

经过更多分析，我发现延迟是由两个任务共享的另一个线程导致的（在提交之前）。

# sql - sql查询带有哈希标签拆分字符的字段

> ID：13587822
> 
> 赞同：0
> 
> 时间：2012-11-27T15:44:56.890
> 
> 标签：sql, ssrs-2008

我想查询我的数据库中的一个字段，它与我的软件中的列表视图相对应。多选当然是可能的。对于此示例，列表视图中的选项如下：“opt1”、“opt2”、“opt3”、“opt4”。记录保存在数据库中，如下所示：

对于 1 个列表视图选项：“Opt1”
对于多个选项：“Opt1#Opt3”——或“Opt3#Opt4”——或“Opt1#Opt4#Opt3”——等。你明白了。

*   如果我想计算某个选项的所有出现次数，我该如何查询？
*   如果我想计算 1 个特定选项的出现次数，我该如何查询？

如果我们调用参数，比如 @ListViewSelection ？

选择计数...？我被卡住了，因为 # 拆分字符

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:48:52.140

```
select count(*) from tablename where listview like '%Opt1%' 
```

请务必将模式作为绑定参数传递以避免注入攻击，

```
select count(*) from tablename where listview like ? 
```

# c# - automapper 缺少类型映射配置或不支持的映射。？

> ID：13587824
> 
> 赞同：12
> 
> 时间：2012-11-27T15:45:01.823
> 
> 标签：c#, .net, asp.net-mvc, linq, automapper

错误

```
Missing type map configuration or unsupported mapping.

Mapping types:
Cities_C391BA93C06F35100522AFBFA8F6BF3823972C9E97D5A49783829A4E90A03F00 -> IEnumerable`1
System.Data.Entity.DynamicProxies.Cities_C391BA93C06F35100522AFBFA8F6BF3823972C9E97D5A49783829A4E90A03F00 -> System.Collections.Generic.IEnumerable`1[[OsosPlus2.Core.DataAccess.Cities, OsosPlus2.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]

Destination path:
CustomerViewModel.Cities.Cities

Source value:
System.Data.Entity.DynamicProxies.Cities_C391BA93C06F35100522AFBFA8F6BF3823972C9E97D5A49783829A4E90A03F00 
```

行动方法：

```
public ActionResult _EditCustomer(int CustomerId)
{
    Customers customer = entity.Customers.FirstOrDefault(x => x.sno == CustomerId);
    CustomerViewModel customerViewModel = new CustomerViewModel();
    customerViewModel = AutoMapper.Mapper.Map<Customers, CustomerViewModel>(customer);

    customerViewModel.Sectors = entity.Sectors;
    customerViewModel.Cities = entity.Cities;
    customerViewModel.PowerSuppliers = entity.PowerSuppliers;

    return PartialView(customerViewModel);
} 
```

当我从实体获取客户时，出现上述错误。为什么在获取后只有我得到这个错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-27T16:04:53.233

看起来您想从映射中忽略 Cities、Sectors 和 PowerSuppliers。

```
Mapper.CreateMap<Customers, CustomerViewModel>()
                .ForMember(c => c.Sectors, option => option.Ignore())
                .ForMember(c => c.Cities , option => option.Ignore())
                .ForMember(c => c.PowerSuppliers , option => option.Ignore()); 
```

我做了这个假设，因为您是手动设置它们。当然，您可以为这些创建映射并自动映射它们。

# html - 使 div 居中并使页脚变粘的问题

> ID：13587826
> 
> 赞同：0
> 
> 时间：2012-11-27T15:45:14.297
> 
> 标签：html, css, sticky-footer

我正在尝试制作一个带有居中换行 div 和居中粘性页脚的 HTML5 页面。这是我的 HTML：

```
<body>
  <div id="wrapper">
    wrapper
  </div>
  <footer>
    this is footer
  </footer>
</body> 
```

这是我的 CSS：

```
#wrapper {
width:800px;
height:100%;
padding:5px;
margin:0 auto;
background-color:#fff;
border-radius:10px 10px 0 0;
box-shadow:0 1px 10px 3px #666;
}

footer {
background-color:#060318;
color:#3cc9e7;
width:800px;
padding:5px;
position:fixed;
bottom:0;
} 
```

这是我得到的结果： ![在此处输入图像描述](../Images/190ab97ecfd068fae1f09ae6b46ddf08.png)

如何使它们都居中并使页脚保持粘性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:50:45.027

我不确定这是否是最好的解决方案，但是：您可以`div`在您的内部创建一个`footer`并将此 div 居中：

```
<footer>
    <div>this is footer</div>
</footer> 
```

这是CSS：

```
footer {
    position:fixed;
    bottom:0;
    left: 0;
    right: 0
}

footer div {
    background-color:#060318;
    color:#3cc9e7;
    width:800px;
    padding:5px;
    margin:0 auto;
} 
```

这是一个显示结果的 jsfiddle：http: [//jsfiddle.net/xRzQy/](http://jsfiddle.net/xRzQy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:51:17.580

`position: fixed`很像`position: absolute`。要使其居中，您需要使用 JavaScript 或添加包装器元素：

```
<div id="footerwrapper">
  <footer>
    this is footer
  </footer>
</div>​ 
```

CSS：

```
#footerwrapper {
    width: 100%;
    position: fixed;
    bottom: 0;
}
footer {
    background-color:#060318;
    color:#3cc9e7;
    width:800px;
    padding:5px;
    margin: 0 auto;
}​ 
```

[http://jsfiddle.net/mblase75/JYYX7/](http://jsfiddle.net/mblase75/JYYX7/)

# php - 对用户隐藏原始下载链接

> ID：13587827
> 
> 赞同：1
> 
> 时间：2012-11-27T15:45:15.870
> 
> 标签：php, hyperlink, download

1.  主要链接是：yourname.com/movie/film.mkv

2.  用户下载链接：yourname.com/2012/Esx123Sxzz96/film/

如何在没有用户看到主链接并且它出现在下载管理器中的情况下将链接 2 切换到链接 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:48:32.343

首先，`.htaccess`如果您想保护您的站点不让用户直接访问数据，请使用 a 来防止直接访问 /movie/ 文件夹。

然后，通过 php 传递文件，`header`首先发送适当的文件，有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/531292/how-to-force-download-of-a-file)。

如果您的电影是大文件，请考虑发送文件的其他方法，例如`x-sendfile`我自己从未使用过的方法，请参阅[此答案](https://stackoverflow.com/a/597195/269211)以获取更多信息。

**编辑：**如果您没有用户身份验证，统计跟踪，下载限制等......并且只是想重写您可以使用路径`.htaccess`的`rewrite`路径（尽管您提供的第二种路径，似乎就像您需要逻辑来提取所需的路径）。如果您不关心用户在单击链接后知道“秘密路径”，您可以简单地使用`header('Location: yourname.com/movie/film.mkv");`- 这将允许用户为您的文件设置书签，而不必`yourname.com/2012/Esx123Sxzz96/film/`再次通过您的路径。

**重新编辑**显然，真正的问题是如何创建一个完整的系统，可以在其中存储媒体，然后通过“不同”路径访问，隐藏源。

我要做的是为您要存储的每个媒体建立一个列表或数据库。将项目添加到列表时，请为其指定唯一 ID。为了简单起见，让我们从 0 开始，并为每个文件递增 1。您可以将来自媒体的更多信息存储在列表/数据库中，例如每部电影的长度、文件大小等...

然后，当您想向用户列出这些文件时，您只需`hash`输入 id，您可以使用类似[这样](http://www.hashids.org/php/)的内容，这将创建一个字符串，例如`U6dc`... 现在可以使用：构建链接`<a href="mysite/files/$hashedValue">Link for $filename</a>`。

拦截对`mysite/files/`using a的调用`.htaccess`并将其重定向以说明`files.php`哪个负责将参数`U6dc`转换为列表中的 ID。获得此 ID 后，很容易找到驱动器上的媒体并将其发送给用户，可能使用`x-sendfile`，由您决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:46:41.157

使用 .htaccess，您可以声明自己的条件。

# image - 用matlab显示轴值

> ID：13587831
> 
> 赞同：0
> 
> 时间：2012-11-27T15:45:27.333
> 
> 标签：image, matlab, plot

我正在显示图像：

```
% Load some image:
data = imread(srcPath);

% display the image:
figure;
imshow(data);
axis image; 
```

反正有没有在轴附近获得一些示例值？

忽略消息框：

![](../Images/2e27e7e7be9a6a83b4fa975926fb3ca6.png)

基本上这是使用的输出

```
imagesc(data); 
```

但我不会只使用 imagesc 来显示这样的轴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:56:12.357

你想要的是通过`xtick`水平轴和`ytick`垂直轴的属性来完成的。你必须使用`set(gca, ...)`语法来做到这一点。[文档](http://www.mathworks.com/support/solutions/en/data/1-15HXQ/)中有一些很好的例子。

# jquery-ui - 从 1.9m1 升级到 1.9.2 后，jQuery UI Datepicker 小部件停止工作

> ID：13587835
> 
> 赞同：0
> 
> 时间：2012-11-27T15:45:44.797
> 
> 标签：jquery-ui, jquery-ui-datepicker

我在同一页面上有多个日期选择器链接到没有 ID 的文本输入并标有“日历”类

初始化代码非常简单：

```
$(document).ready(function() {
    $("input.calendar").datepicker({
        firstDay: 1,
        dateFormat: 'd-M-yy'
    });
}); 
```

一切都像一个魅力，但从 jQuery 1.7 + jQueryUI 1.9m1 升级到 jQuery 1.8.3 + jQueryUI 1.9.2 功能被破坏：当输入获得焦点时，不再弹出日期选择器小部件。我可以通过 Chrome 开发工具看到该小部件已初始化，并且所有输入字段都已正确连接，但它只是在单击时保持隐藏状态。

有任何想法吗？

更新：问题已解决 - 这是 jQuery 包之外的代码冲突

# android - 在 Android 中的相对布局上使用单选按钮

> ID：13587836
> 
> 赞同：0
> 
> 时间：2012-11-27T15:45:46.097
> 
> 标签：android, list, layout, button

我目前有一个具有相对布局的 Android 项目。

我想让用户设置一个选项（从一个很长的列表中）。环顾四周后，我注意到使用单选按钮并在对话框中显示它们的可能性，如此处[所述](http://bestsiteinthemultiverse.com/2009/03/android-listactivity-and-selected-state/)。但我在 API 上读到需要在线性布局中使用单选按钮。

是否有另一种方法可以让用户从列表中选择某些内容？例如一种选择列表？

感谢您的任何帮助。我已经添加了我当前的布局以进行澄清。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFCC" >

    <Button
        android:id="@+id/buttonExit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Exit" />

    <Button
        android:id="@+id/buttonStart"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="52dp"
        android:text="Play" />

    <Button
        android:id="@+id/buttonStop"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/buttonStart"
        android:layout_marginTop="21dp"
        android:text="Pause" />

    <Button
        android:id="@+id/Continue"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/buttonStop"
        android:layout_marginTop="16dp"
        android:text="Continue" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Continue"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="36dp"
        android:text="Ready."
        tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:02:38.377

您可以使用 Spinner 或 ListView。

您可以在此处找到信息和示例：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

# php - 现有下拉列表的文本框

> ID：13587842
> 
> 赞同：0
> 
> 时间：2012-11-27T15:46:02.047
> 
> 标签：php, javascript, mysql, drop-down-menu

我正在尝试启用一个可编辑的文本框，在输入前两位数字时，值会被过滤为现有下拉菜单的匹配项，但我似乎对此一无所知。如果有人可以帮我解决这个问题。

```
 <td>
     Part Number
</td>
<td>
    <select class=\"".$klasse_ausw["aggregat_ausw_drpd"]."\" name=\"aggregat_ausw_drpd\"  style=\"width:90pt; size:1;\">
    <option value=></option>";

    $sql_aggregat_ausw3_drpd="SELECT * FROM vers_einl_aggregatnummer ORDER BY  vers_einl_aggregatnummer.aggr_nr ASC";
    $result_aggregat_ausw3_drpd=mysql_query($sql_aggregat_ausw3_drpd);
    while($row_aggregat_ausw3_drpd=mysql_fetch_array($result_aggregat_ausw3_drpd)){
extract($row_aggregat_ausw3_drpd, EXTR_PREFIX_ALL, "ausw3");
echo '                                                  <option value="'.$ausw3_id.'"';
if(($_POST["aggregat_ausw_drpd"]==$ausw3_id) ||               ($_GET["aggregat_ausw_drpd"]==$ausw3_id)){
    echo ' selected';
}
echo '                               >'.$ausw3_aggr_nr.'</option>';
   }
    echo "</select></td></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:07:46.687

如果我理解正确，您正在寻找一种过滤选择框的方法。

有很多方法可以通过 Javascript 实现这一点。

[Select2 jquery 插件非常好。](http://ivaynberg.github.com/select2/)

# android - 保存容器的状态（LinearLayout）

> ID：13587847
> 
> 赞同：0
> 
> 时间：2012-11-27T15:46:06.420
> 
> 标签：android, android-fragments, containers, layout-inflater, savestate

我有两个片段。

在第一个片段中，我有一个用于片段视图的容器静态（LinearLayout）。在这个容器中，我对几个视图进行了膨胀。

我更改为第二个片段，但是当我返回第一个片段时，膨胀的视图消失了。

如何保存容器的状态？有人可以给我一个例子吗？感谢您的帮助和关注

![在此处输入图像描述](../Images/623770c867db69c549c553d67029f43c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:52:50.170

问题在于保存实例。片段保存了属于片段的视图的状态，但膨胀结果的另一个视图消失了。

我不知道如何将状态（片段更改时）保存在容器内，更改多次（动态）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:55:19.743

返回时再次调用 onCreateView 并且正在重新创建您的片段。一种解决方案是将片段状态保存在 onSaveInstanceState 中，然后在 onCreateView 中重新加载：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    ..
    if (savedInstanceState != null) {
       // reload state
    }
    ..
}

public void onSaveInstanceState (Bundle outState) {
    // save dynamic state in outState
} 
```

编辑：

如果您想保留实际视图，我发现这可以工作：

```
private View mLayout;
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {

    if (mLayout == null) {
      // this is the first time onCreateView has been called
      mLayout = inflater.inflate(..);
    } else {
      // remove previous parent
      ViewParent parent = mLayout.getParent();
      if (parent != null)
        ((ViewGroup) parent).removeView(mLayout);
    }
    return mLayout;
} 
```

# javascript - 如何使用数组 jquery 填充复选框

> ID：13587848
> 
> 赞同：0
> 
> 时间：2012-11-27T15:46:05.977
> 
> 标签：javascript, jquery, checkbox

我对如何使用其中的值填充一些复选框有一些问题，`newArray[]`代码如下：
Html：

```
<form id="myForm">
    <div id ="checkboxes">
        <table>
            <tr>
                <td>
                    <label class="checkbox">
                        <input type="checkbox" name="my_opt[]" value="1"> 
                        Total
                    </label>
                </td>
                <td>
                    <label class="checkbox">
                        <input type="checkbox" name="my_opt[]" value="2"> 
                        Male
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="checkbox">
                        <input type="checkbox" name="my_opt[]" value="3"> 
                        Female
                    </label>
                </td>
                <td>
                    <label class="checkbox">
                        <input type="checkbox" name="my_opt[]" value="4">
                        Age
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="checkbox">
                        <input type="checkbox" name="my_opt[]" value="5">
                        Score
                    </label>
                </td>
            </tr>
        </table>
    </div>
    <input id='my_opt' type='hidden' name='my_opt[]' />
</form> 
```

脚本：

```
<script>
    //checkboxes
    var check_box_values = $('#myForm [type="checkbox"]:not(:checked)').map(function () {
        return parseInt(this.value);
    }).get();

    (...)

    j = j + 1;

    //creating new button
    $("#save").append(
        $("<input type=button id=saved"+j+">").click(function() {
        (...)
        }).text("Chart"+j)
    );

    //change the checkboxes to new values from array
    var newArray = [];
    newArray[4] = check_box_values; //i want that to be [4]
    //click on new button
    $('#saved'+j).click(function() {
        $('#checkboxes').val(newArray[4]);
    });
</script> 
```

这不起作用，并且错误似乎在 `$('#checkboxes').val(newArray[4]);`. 我想要的是根据`newArray[4];` 例如数据检查复选框。如果`newArray[4] = [2,3,4]`

我错过了语法：s你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:41:02.557

我认为这就是您要实现的目标。

这是现场[示例](http://plnkr.co/edit/EU4dmA?p=preview)

下面是使用 jQuery 的代码：

```
$(function(){

var $checkboxes = $('#checkboxes').find('input[type=checkbox]'),
    times = 0;

function checkBoxes() {
  var checked = [],
      unchecked = [];

    $checkboxes.each(function (index) {
        if ($(this).is(':checked')) {
          checked.push(index);
        } else {
          unchecked.push(index);
        }
    });

    $('#checkboxes').append('<a href="#" class="btn">Check boxes [' + checked.toString() + ']</a>')
      .find('a.btn:last')
      .data('check', checked)
      .on('click', function () {
          var data = $(this).data('check');
          console.log(data, $(this).index());

          $checkboxes.attr('checked', false);
          $checkboxes.each(function (index) {
            if (data.indexOf(index) >= 0) {
              $(this).attr('checked', true);
            }
          });
    });
}

setInterval(checkBoxes, 3000);
}); 
```

# ios - 如何修改 MFMailComposeViewController 对象的取消按钮的操作表样式

> ID：13587849
> 
> 赞同：1
> 
> 时间：2012-11-27T15:46:08.160
> 
> 标签：ios, cocoa-touch, uiactionsheet, mfmailcomposeviewcontroller

我有一个带有导航栏`UIBarStyleBlack`样式的 MFMailComposeViewController 对象。当在 MFMailComposeViewController 的视图上按下取消按钮时，将显示一个具有默认样式的操作表。我想要的是将其样式更改为`UIActionSheetStyleBlackTranslucent`，例如：

```
[theActionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent]; 
```

但是我怎样才能得到这个行动表并修改它呢？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:21:46.143

来自苹果文档：

> 邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。

操作表的样式是 UI 的一部分，不能修改。也没有解决方法，MFMailComposeViewController 没有任何公共属性/方法可以让你这样做。

# python - 'int' 对象没有属性 'send'

> ID：13587851
> 
> 赞同：0
> 
> 时间：2012-11-27T15:46:20.060
> 
> 标签：python

这里给出了一些建议

[Python Sockets 使用函数而不是全局套接字调用](https://stackoverflow.com/questions/13569044/python-sockets-use-function-instead-of-global-socket-call)

我认为它正在工作，但现在似乎没有关于如何使以下代码工作的任何想法？

```
def testMethod():
    socks = {}
    socks['i'] = createConnection(host, port)
    socks['i'].send("Hello  world")
    print "Sent Hello World" 
```

这是我收到的错误消息

```
'int' object has no attribute 'send' 
```

*干杯

和 ty 寻求任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:07:12.413

问题出在您的 createConnection 函数中。它返回一个 int 而不是一个套接字。你能分享你的createConnection实现吗？

为了使这个答案更像：

在您的情况下， createConnection 返回一个整数，可能是一个套接字句柄，但我猜是因为实现不可用。

该方法应该看起来像

```
import socket
def createConnetion(host, port):
  sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  sock.connect((host, port))
  return sock 
```

# java - Kerberos 协议中的第 7 条消息和票证验证

> ID：13587852
> 
> 赞同：1
> 
> 时间：2012-11-27T15:46:24.057
> 
> 标签：java, kerberos

我正在为一个项目开发一个简单的[Kerberos 协议](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)。但是，我遇到了一些我找不到答案的问题。

协议中的第五条消息。从客户端 C 到服务器 S 的过程如下：

{C, t} [K [CS]] , {C, S, tstart,ten, K [CS] } [K [S]] , {Request, n [3] } [K [CS]]

协议中的第六条消息，从服务器 S 到客户端 C，如下所示：

{回复, n [3] } [K [CS]]

第七条消息是怎样的？或者换句话说，当我想向服务器发出另一个请求时，我是否需要再次包含验证器和票证？如果不是，服务器如何验证票证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:47:42.757

是的，对服务器的每个请求都必须附有服务票证，这是验证该特定请求真实性的唯一方法。额外的*Authenticator*对每个请求都是唯一的，也需要防止重放攻击。

# iphone - 如何使用 ARC 管理内存？

> ID：13587853
> 
> 赞同：3
> 
> 时间：2012-11-27T15:46:25.333
> 
> 标签：iphone, objective-c, memory-management, automatic-ref-counting

我在许多网站上看到，在使用 ARC 时，您仍然需要使数组和一些东西无效，但我认为它是自动的......所以我有几个问题：

*   我什么时候需要关心记忆，我应该怎么做？

*   例如，当我有一个 2 窗口应用程序（主窗口+第二个窗口）并且我调用第二个窗口并填充一个数组时，当它关闭以返回主窗口时，我必须输入 array=nil 吗？还是在窗口关闭时自动生成 ARC？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:55:25.190

通过使数组无效，您是在告诉 ARC 您不再需要该数组，iOS 可以安全地清理它。使数组无效也是一种很好的做法，因为检查 nil 对于许多形式的 iOS 编程都很重要。

是的，您可以让 ARC 处理所有事情，但您也可以让 iOS 在完成后立即清理内存。我还要补充一点，适当的 nil 设置语句可能是一种很好的自我文档形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:17:48.920

ARC 是 Objective-c 开发的一大进步，但你必须非常小心内存管理，即使你使用 ARC。

我建议你观看[关于 ARC 的 WWDC 2011 视频](https://developer.apple.com/videos/wwdc/2011/?id=323)以充分利用此功能，因为你需要观看一些细节才能真正不浪费设备的内存。

要充分利用 ARC，最重要的一点是确保您没有循环引用，例如一个控制器引用另一个控制器，并且两者都有强引用，当您认为您销毁了一个控制器时，另一个将保留它，然后您将不会释放任何内存。

另一个重要的一点是，你需要确保你告诉编译器你不需要更多的对象，这就是你需要将数组设置为 nil 的原因，所以编译器只会添加释放数组的命令，因为 ARC 只是自动引用计数，它是由编译器完成的，而不是在运行时完成的。现在您的编译器向您添加发布调用。

所以回答你的观点：

1 - 你总是需要关心内存，因为 arc 有一些必须遵守的规则，比如设置为 nil 你不再使用的对象。

2 - 在您的示例中，您需要注意一些要点，首先您需要确保您没有对第二个窗口的引用，并且您还需要将您的数组设置为 nil，因为 Objective-c没有垃圾收集器，刚才引用计数不再明确了。

# extjs - 呈现列 DOM 后是否触发了任何列事件？

> ID：13587854
> 
> 赞同：0
> 
> 时间：2012-11-27T15:46:27.270
> 
> 标签：extjs, extjs4

我尝试了类似的事件`render`，但不知何故，`afterrender`它们都在创建 DOM 元素之前拍摄。`renderer()``defaultRenderer()`

```
Ext.define( 'MyApp.column.MyColumn', {
  extend: 'Ext.grid.column.Column',

  constructor: function() {
     this.callParent( arguments );

     this.on( 'afterrender', function() {
        var oDomElement = Ext.get( 'MyColumn.MyApp.model.Record-0-ext-record-22' );

        console.log( 'DOM-Element: ', oDomElement );
     } );
  },

  defaultRenderer: function( d, m, oRecord ) {
     return '<div id="MyColumn.' + oRecord.id + '" />';
  }
} ); 
```

当我之后检查 DOM 时，具有 ID 的元素`MyColumn.MyApp.model.Record-0-ext-record-22`存在，但在触发`oDomElement`时始终为空。`afterrender`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:45:20.780

`afterrender`您获得的事件`Ext.grid.column.Column`将在渲染后发生。但这与说的不一样 - 当您渲染每条记录时，这将触发`defaultRenderer`.

换句话说，首先渲染网格，然后加载存储，每条记录都被“渲染”。

# python - 使用 python 和/或 scrapy 抓取 ajax 网页

> ID：13587855
> 
> 赞同：6
> 
> 时间：2012-11-27T15:46:33.580
> 
> 标签：python, ajax, web-scraping, scrapy

**我想要做**的是从请愿书上的一个或多个请愿书中刮取请愿数据——姓名、城市、州、日期、签名号。

我假设在这一点上 python 是要走的路——可能是 scrapy 库——以及一些处理网站 ajax 方面的函数。这个爬虫的原因是这个请愿数据不向公众提供。

**我是一名自由科技记者**，我希望能够将每个请愿书的数据转储到 CSV 文件中，以便分析每个州签署该州请愿书的人数，并使用来自多个请愿书的数据，找出人数谁签署了多个请愿书等，然后对请愿过程的政治可行性和数据本身做出一些结论。

请愿书.whitehouse.gov 上的请愿功能作为 Drupal 模块运行，白宫开发人员在 github [https://github.com/WhiteHouse/petition/issues/44](https://github.com/WhiteHouse/petition/issues/44)上回复了我的问题请求，他们正在开发一个 API允许从模块访问请愿数据。但是该 API 没有发布日期；这并不能解决目前在请愿书.whitehouse.gov 上的请愿书数据的问题。

**我已经给白宫和白宫开发商发了电子邮件**，说我是一名自由记者，并要求通过某种方式访问​​数据。白宫数字战略办公室告诉我，*“很遗憾，我们目前无法提供数据导出，但我们正在努力通过 API 开放数据。”* 白宫有一项“开放数据”倡议，但显然没有涵盖请愿数据。

**隐私和服务条款：**签署请愿书时几乎没有隐私。并且没有明确的 TOS 可以解决这些数据的网络抓取问题。

**已经做了什么：** UNC 的一些教师已经编写（我假设是）一个 python 脚本来抓取数据，但他们不想将脚本发布给我，说他们仍在研究它。[http://www.unc.edu/~ncaren/secessionists/](http://www.unc.edu/~ncaren/secessionists/)他们确实给我发了一份我特别感兴趣的请愿书的 CSV 数据转储。

**我所做的：**我为此建立了一个 github 项目，因为我希望任何请愿数据抓取工具对每个人都有用——请愿者自己、记者等——他们希望能够获得这些数据。[https://github.com/markratledge/whitehousescraper](https://github.com/markratledge/whitehousescraper)

*我没有使用 python 的经验，也没有使用 shell 脚本的经验，而我目前正在尝试做的事情显然超出了我的经验。*

我运行了一个 GUI 脚本，每五秒左右向网络浏览器发送一个“空格键”，然后通过将浏览器文本剪切并粘贴到文本编辑器中来刮掉大约 10,000 个签名。从那里，我可以用 grep 和 awk 将文本处理成 CSV 格式。当然，这不太好。Chrome 因页面大小而陷入困境，需要数小时才能获得这么多签名。

**到目前为止我发现了什么：**从我可以从其他 SO 问题和答案中收集到的内容，看起来 Python 和 scrapy [http://scrapy.org](http://scrapy.org)是避免浏览器问题的方法。但是该页面使用 ajax 函数来加载下一组签名。看起来这是一个“静态”ajax 请求，因为 URL 没有改变。

在 Firebug 中，JSON 请求标头似乎有一个随机字符串附加到它们前面，并带有一个页码。这是否说明了需要做什么？脚本是否需要模拟并将这些发送到网络服务器？

> 请求网址：https://petitions.whitehouse.gov/signatures/more/50ab2aa8eab72abc4a000020/2/50b32771ee140f072e000001 请求网址：https://petitions.whitehouse.gov/signatures/more/50ab2aa8eab72abc4a000020/3/50b1040f6ce60061c837e0000 请求网址： /petitions.whitehouse.gov/signatures/more/50ab2aa8eab72abc4a000020/4/50afb3d7c988d47504000004

这是在页面上加载签名的 JS 函数：

```
(function ($) {
Drupal.behaviors.morePetitions = {
  attach: function(context) {
    $('.petition-list .show-more-petitions-bar').unbind();
    $(".petition-list .show-more-petitions-bar").bind('click',
      function () {
        $('.show-more-petitions-bar').addClass('display-none');
        $('.loading-more-petitions-bar').removeClass('display-none');

        var petition_sort = retrieveSort();
        var petition_cols = retrieveCols();
        var petition_issues = retrieveIssues();
        var petition_search = retrieveSearch();
        var petition_page = parseInt($('#page-num').html());

        var url = "/petitions/more/"+petition_sort+"/"+(petition_page + 1)+"/"+petition_cols+"/"+petition_issues+"/"+petition_search+"/";
        var params = {};
        $.getJSON(url, params, function(data) {
          $('#petition-bars').remove();
          $('.loading-more-petitions-bar').addClass('display-none');
          $('.show-more-petitions-bar').removeClass('display-none');
          $(".petition-list .petitions").append(data.markup).show();

          if (typeof wh_petition_adjustHeight == 'function') {
            wh_petition_adjustHeight();
          }

          Drupal.attachBehaviors('.petition-list .show-more-petitions-bar');
          if (typeof wh_petition_page_update_links == 'function') {
            wh_petition_page_update_links();
          }
        });

        return false;
      }
    );
  }
} 
```

并且在滚动到浏览器窗口底部时显示此 div 时触发：

```
<a href="/petition/.../l76dWhwN?page=2&amp;last=50b3d98e7043012b24000011" class="load-next no-follow active" rel="509ec31cadfd958d58000005">Load Next 20 Signatures</a>
<div id="last-signature-id" class="display-none">50b3d98e7043012b24000011</div> 
```

**那么，最好的方法是什么？**我该去哪里使用scrapy？还是有另一个更适合这个的python库？

随意发表评论，用代码片段为我指明方向，其他 SO 问题/答案，为 github 做出贡献。在这一点上，我正在尝试做的显然超出了我的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:27:41.627

“随机链接”看起来像以下形式：

[https://petitions.whitehouse.gov/signatures/more/petitionid/pagenum/lastpetition](https://petitions.whitehouse.gov/signatures/more/) 其中*请愿**ID*对于单个*请愿*是静态的，*pagenum**每次*递增，并且每次从请求中返回*lastpetition 。*

 ***我通常的方法是使用 requests 库来模拟 cookie 的会话，然后计算出浏览器发出的请求。

```
import requests
s=requests.session()
url='http://httpbin.org/get'
params = {'cat':'Persian',
          'age':3,
          'name':'Furball'}             
s.get(url, params=params) 
```

我会特别注意以下链接：

`<a href="/petition/shut-down-tar-sands-project-utah-it-begins-and-reject-keystone-xl-pipeline/H1MQJGMW?page=2&amp;last=50b5a1f9ee140f227a00000b" class="load-next no-follow active" rel="50ae9207eab72aed25000003">Load Next 20 Signatures</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:38:22.797

很难用 Python 完全模拟 Jquery/Javascript。 [你可以看看 spidermonkey](http://code.google.com/p/python-spidermonkey/) 或像 Selenium 这样的网络测试自动化工具，它可以完全自动化任何浏览器操作。关于 SO 的上一个问题： [Python 如何与 javascript 一起工作](https://stackoverflow.com/questions/6826627/how-can-python-work-with-javascript)***

# java - 如何从使用 Spring 部署的 JAX-WS Web 服务 WSDL 更改自动生成的 soap:address

> ID：13587869
> 
> 赞同：10
> 
> 时间：2012-11-27T15:47:02.533
> 
> 标签：java, web-services, spring, jax-ws

我有一个使用来自 WSDL 的 wsimport 生成的 web 服务实现。此服务部署在 Spring webapp 中的 Tomcat 服务器中。spring的配置文件（只有webservice部分）是这样的

```
<wss:binding url="/fooService">
    <wss:service>
        <ws:service bean="#fooService">
    </wss:service>
</wss:binding> 
```

当我在 tomcat 中部署这个 webapp 时，如果我去，我可以获得 WSDL

```
http://localhost:8080/foo/fooService?wsdl 
```

wsdl soap:address 属性是这样的：

```
<service name="FooService">
    <port name="FooService" binding="tns:FooServiceBinding">
        <soap:address location="http://localhost:8080/foo/fooService"/>
    </port>
</service> 
```

现在，一切都好。

问题是在生产中，我们有一个 Apache Web 服务器，这个服务器将请求重定向到 Tomcat。它也可以，但是当我们获得 WSDL 时，soap:address 仍然是 localhost:8080，我们需要将它作为 Web 服务的公共 url。

有任何想法吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T16:48:28.677

好吧，我找到了一种解决方案：

似乎 JAX-WS 会自动生成此属性。我发现其他 web 服务框架实现允许用户通过硬编码属性中的 url 来更改它，但似乎 JAX-WS 没有。有人知道有什么办法吗？

无论如何，我找到了一种解决方法：在 tomcat 连接器配置中使用 proxyName 和 proxyPort 属性，您可以告诉 Tomcat 在代理后面（在我们的例子中是 Apache 服务器）并且客户端的“真实”端口是 80。

进行此更改后，自动生成的 soap:address 将包含正确的值。

参考：

*   [http://metro.java.net/2.1.1/guide/HTTP_address_in_soap_address_and_import_locations.html](http://metro.java.net/2.1.1/guide/HTTP_address_in_soap_address_and_import_locations.html)

# objective-c - 从 Document 文件夹将图像添加到 Imageview 未加载

> ID：13587872
> 
> 赞同：1
> 
> 时间：2012-11-27T15:47:06.817
> 
> 标签：objective-c, ios, image, ipad

我正在尝试解决相当简单的问题一段时间，但没有成功。我正在将文件保存到设备上的 Documents 目录中，并稍后尝试使用图像视图加载它。我确认该文件确实存在。为什么我的图片不显示？

在此先感谢您的帮助。

这是我试图将图像加载到 ImageView 中的代码：

```
 -(void)loadFileFromDocumentFolder:(NSString *) filename
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *outputPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithString: filename] ];

    NSLog(@"outputPath: %@", outputPath);
    UIImage *theImage = [UIImage new];
    [UIImage imageWithContentsOfFile:outputPath];

    if (theImage)
    {
        display = [UIImageView new];
        display = [display initWithImage:theImage];

        [self.view addSubview:display];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:57:07.757

你的代码有问题。

```
UIImage *theImage = [UIImage new]; 
```

在这一行中，您创建了一个新`UIImage`对象，但您什么也不做。

```
[UIImage imageWithContentsOfFile:outputPath] 
```

此类方法将返回一个`UIImage`对象，其中包含从文件加载的图像。

你对`UIImageView`.

```
NSString *outputPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithString: filename] ]; 
```

此外，`[NSString stringWithString: filename]`您不需要创建一个不需要的额外字符串，因为`filename`它已经是一个字符串。

您的代码应该像这样工作：

```
 -(void)loadFileFromDocumentFolder:(NSString *) filename {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *outputPath = [documentsDirectory stringByAppendingPathComponent:filename ];

    NSLog(@"outputPath: %@", outputPath);
    UIImage *theImage = [UIImage imageWithContentsOfFile:outputPath];

    if (theImage) {
        display = [[UIImageView alloc] initWithImage:theImage];
        [self.view addSubview:display];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:53:38.307

更改代码：

```
UIImage *theImage = [UIImage imageWithContentsOfFile:outputPath];

if (theImage)
{
    display = [UIImageView alloc]  initWithImage:theImage];
} 
```

# javascript - Javascript，知道某个值是否在数组中的最快方法？

> ID：13587873
> 
> 赞同：9
> 
> 时间：2012-11-27T15:47:11.560
> 
> 标签：javascript, arrays, performance

> **可能重复：**
> [JavaScript 中的 array.contains(obj)](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)

假设我有一个数组 = [0,8,5]

知道 8 是否在这个里面的最快方法是什么。例如：

```
if(array.contain(8)){
 // return true
} 
```

我发现了这个：[检查列表中是否存在值的最快方法](https://stackoverflow.com/questions/7571635/python-fastest-way-to-check-if-a-value-exist-in-a-array)（Python）

这：[检测一个值是否在Javascript中的一组值中的最快方法](https://stackoverflow.com/questions/308191/fastest-way-to-detect-if-a-value-is-in-a-set-of-values-in-javascript)

但这不能回答我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T15:49:47.707

用于`indexOf()`检查值是否存在

```
array.indexOf(8) 
```

示例代码，

```
var arr = [0,8,5];
alert(arr.indexOf(8))​; //returns key 
```

# 更新

**对于 IE 支持**

```
//IE support
if (!Array.prototype.indexOf) { 
    Array.prototype.indexOf = function(obj, start) {
         for (var i = (start || 0), j = this.length; i < j; i++) {
             if (this[i] === obj) { return i; }
         }
         return -1;
    }
}

var arr = [0,8,5];
alert(arr.indexOf(8)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T15:51:05.307

您可以使用 indexOf() 函数

```
var fruits = ["a1", "a2", "a3", "a4"];
var a = fruits.indexOf("a3"); 
```

输出将是：2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:50:29.967

你可以使用`indexOf`或者你可以试试这个：

```
$.inArray(value, array) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:54:00.413

phpjs 有一个不错的 php 的 in_array 函数到 javascript 的端口，你可以使用它

[http://phpjs.org/functions/in_array/](http://phpjs.org/functions/in_array/)

见例子：

```
in_array('van', ['Kevin', 'van', 'Zonneveld']); 
```

# jquery - 边框和边距问题

> ID：13587877
> 
> 赞同：1
> 
> 时间：2012-11-27T15:47:39.430
> 
> 标签：jquery, html, css, margin

没有例子很难解释，所以这里是例子[http://jsfiddle.net/dvXhP/2/](http://jsfiddle.net/dvXhP/2/)

您可以看到，当您单击按钮删除时，会触发此事件 -

```
$('#button #remove').click(function() {
    $('#borderDiv').css('border','0px solid red'); 
}); 
```

这基本上是删除了 div 周围的边框，但看看按钮是如何跳到底部的......

我意识到，如果您删除#borderDiv 中的#text div .. 问题将得到解决（但我需要知道如何在不删除它的情况下解决问题）。

我还意识到按钮跳到底部等于#text div的上边距，这很奇怪......

所以请帮我解决这个问题！
我从事大型项目，jsfiddle中的示例只是为了解释问题..谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T15:49:11.280

```
$(document).ready(function() {
    $('#button #add').click(function() {
        $('#borderDiv').css('border','1px solid red'); 
    });
    $('#button #remove').click(function() {
        $('#borderDiv').css('border','1px solid transparent'); 
    });
});​ 
```

做这个。你可以[在这里测试](http://jsfiddle.net/dvXhP/7/)

# python - 解析 RSS 后在 Python 中编码失败

> ID：13587882
> 
> 赞同：0
> 
> 时间：2012-11-27T15:47:52.097
> 
> 标签：python, encoding, utf-8, rss, feedparser

> **可能重复：**
> [如何在 Windows 控制台中显示 utf-8](https://stackoverflow.com/questions/3578685/how-to-display-utf-8-in-windows-console)

使用 feedparser 包解析 RSS 提要后，尝试打印标题时出现错误：

```
File "C:\Python27\lib\encodings\cp437.py", line 12, in encode
   return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u2013' in position 73: character maps to <undefined> 
```

使用 .encode() 将其编码为 UTF-8 后，我没有收到任何错误，但我确实在输出中得到了奇怪的字符：

> 任何人都可以使用基本信息 ΓÇô 为您的 BT 帐户添加服务，而 BT 不会为 ΓÇÖt 担心

我做错了什么，我必须以不同的方式对其进行编码吗？

# magento - 如何在magento的xml文件中添加phtml文件？

> ID：13587883
> 
> 赞同：0
> 
> 时间：2012-11-27T15:47:51.513
> 
> 标签：magento

我是magento的新学习者，现在，要学习，我想在类别列表页面中添加一些内容，

1，我添加了一个名为 add.phtml 的文件，我在其中输入了`<h1>example test</h1>`.(base\default\template\catalog\product\add.phtml)

2，在`\base\default\layout\catalog.xml`我添加了以下内容

```
 <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                        -->
                    </block>
                    <block type="catalog/product_blog" name="add" template="catalog/product/add.phtml"/> 
```

在下面

```
<!--
Category default layout
--> 
```

部分。

为什么在类别页面上，没有显示示例测试。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:54:40.630

使用下面的代码在类别列表页面中添加您的 phtml 文件。

将其粘贴到 catelog/layer/left.phpml 文件或您想要的任何文件中。

getLayout()->createBlock('core/template')->setTemplate('catalog/product/add.phtml')->toHtml(); ?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:32:14.037

该`type`属性指示它应该使用哪个块（php 类）。在您的情况下，它将在目录/块/产品/blog.php 中搜索。除非您以正确的方式添加了 Blog.php，否则它将在该部分中断，因为这不是默认的 magento。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T06:01:39.177

您好，我认为您可以在自定义布局 xml 中创建自定义模块并覆盖布局 xml，这些提示可能会对您有所帮助

# objective-c - 如何在 NSMutableDictionary 中存储一个符号？

> ID：13587885
> 
> 赞同：0
> 
> 时间：2012-11-27T15:47:56.650
> 
> 标签：objective-c, ios, char, nsmutabledictionary

我想将一个符号“0”存储为 NSMutableDictionary 值。我怎样才能做到这一点？NSString 是不合适的，因为它创建的不是单个字符的字符串，而且据我所知，Objective-C 中没有 char 数据类型的 NSObject 表示。

所以我该如何实现这个问题。如果您建议我为此使用 NSValue，那么我需要一个如何在其中包装“0”的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:51:51.307

使用 setObject:forKey: 并传递一个 NSNumber 作为对象：

```
[myMutableDictionary setObject:[NSNumber numberWithChar:0] forKey:@"someKey"]; 
```

# android - 带有文件的内容观察者？

> ID：13587887
> 
> 赞同：2
> 
> 时间：2012-11-27T15:48:12.377
> 
> 标签：android, file, contentobserver

所以我的问题是知道 ContentObserver 是否可用于监视文件夹并在创建/删除文件时得到通知？

在我的情况下，我想监控相机文件夹并在创建新文件时收到通知（拍照），

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:32:28.437

> 所以我的问题是知道 ContentObserver 是否可用于监视文件夹并在创建/删除文件时得到通知？

不。

> 在我的情况下，我想监控相机文件夹并在创建新文件时得到通知（拍照）

您可以使用`ContentObserver`with`MediaStore`来了解添加或删除任何图像的时间，也可以使用`FileObserver`来监视外部存储上图片的标准路径。

这些都不一定反映“已拍摄照片”，因为相机应用程序不必将其图像存储在该特定文件夹中，也不必将其图像索引为`MediaStore`.

# asp.net-mvc - 将 WHERE 子句添加到每个 LINQ Select 查询

> ID：13587891
> 
> 赞同：1
> 
> 时间：2012-11-27T15:48:19.487
> 
> 标签：asp.net-mvc, linq, azure, ef-code-first

我在 Azure MVC 应用程序中使用 EF4 Code First 从 SQL Azure 数据库中检索数据。

该应用程序总共将有大约 200 名用户，分布在十几个使用相同应用程序的组织中。SQL Azure DB 将主要存储客户联系信息等。

SQL Azure 数据库中的所有表都包含一个名为 OrgansiationId 的字段，它是每个组织唯一的 GUID。保存的所有数据都包括与保存数据的人的组织相对应的 OrganisationId。

重要的是，用户只能从他们自己的组织添加/编辑/查看信息。

所以我的问题是，使用 LINQ 来确保任何 Select 语句只返回用户 OrganisationId 的信息的推荐方法是什么，而不必手动将“WHERE OrganisationId == organizationId”附加到每个 Select 语句，这很容易受到人为错误的影响. （即忘记包含它，以免过滤掉Organsation，噩梦般的场景！）

是否有一种可接受的方式来实现这一点，可能是通过使用额外的 WHERE 语句包装 LINQ 语句，以便对所有 LINQ Select 语句自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:00:04.490

我已经实现了一个非常相似的应用程序。我只是将 DbContext 包装在一个包装的上下文中：

当这是原始上下文时：

```
public class MyContext : DbContext {
    public DbSet<MyTable> MyTable { get; set; }
} 
```

然后包装的上下文如下所示：

```
public class MyWrappedContext {
    protected MyContext InternalContext { get; set; }
    public Guid OrganizationId { get; set; }

    public IQueryable<MyTable> MyTable 
    {
        get 
        { 
            return InternalContext.MyTable
               .Where(t => t.OrganizationId == OrganizationId); 
        } 
    }
} 
```

为了添加、删除和更新实体，我在 WrappedContext 上有以下方法：

```
public void Add<T>(T entity) where T : class
{
    DbEntityEntry<T> dbEntityEntry = InternalContext.Entry(entity);
    dbEntityEntry.State = EntityState.Added;
}

public void Remove<T>(T entity) where T : class
{
    DbEntityEntry<T> dbEntityEntry = InternalContext.Entry(entity);
    dbEntityEntry.State = EntityState.Deleted;
}

public void Update<T>(T entity) where T : class
{
    DbEntityEntry<T> dbEntityEntry = InternalContext.Entry(entity);
    dbEntityEntry.State = EntityState.Modified;
} 
```

# android - listView 和 cursoradapter

> ID：13587898
> 
> 赞同：-2
> 
> 时间：2012-11-27T15:48:36.720
> 
> 标签：android, listview, android-listview, android-cursoradapter

我正在做我的最后一个项目，我遇到了一个问题。我想将数据从我的数据库（DatabaseBon）传递到列表视图。有人可以帮帮我吗？

我的活动看起来像：

```
 public class BlackNumbersBlockDb extends Activity {
        String TAG;
       @Override
   protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.blocknumbersdb);
    @SuppressWarnings("unused")
    Button imBT= (Button)findViewById(R.id.importBL);
    DataBaseBON info= new DataBaseBON(this);
    info.open();
    Cursor cursor=info.getcursor();
    startManagingCursor(cursor);
    ContactCursorAdapter adapter = new ContactCursorAdapter(null, cursor);
    ListView contactLV = (ListView) findViewById(R.id.listviewblDB);
    contactLV.setAdapter(adapter);
    info.close();
        imBT.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i= new Intent ("android.intent.action.IMPORTM");
            startActivity(i);   
        }
    }); 
```

我的光标适配器看起来像：

```
 **import vahid.engineer.com.DataBaseBON** ( is it c orrect??)
     .
     .
     .

    public class ContactCursorAdapter extends CursorAdapter  {
  public ContactCursorAdapter(Context context, Cursor c) {  
    super(context, c);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    TextView name = (TextView)view.findViewById(R.id.blacklistDB1);
    name.setText(cursor.getString(cursor.getColumnIndex(DataBaseBON.N_NAME)));
    TextView phone = (TextView)view.findViewById(R.id.blacklistDB2); 
    phone.setText(cursor.getString(cursor.getColumnIndex(DataBaseBON.KEY_NUMBER)));}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(R.layout.lv, parent, false);
    bindView(v, context, cursor);
    return v; 
```

我的 LV XML 文件看起来像

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

     <TextView
          android:id="@+id/blacklistDB1"
          android:layout_width="33dp"
          android:layout_height="wrap_content"
          android:text="Large Text"
          />
     <TextView
        android:id="@+id/blacklistDB2"
        android:layout_width="19dp"
        android:layout_height="wrap_content"
        android:text="Large Text"
        />
      </LinearLayout> 
```

我的 blockornot XML 文件看起来像

```
 <  LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >
  <ListView
      android:id="@+id/listviewblDB"
      android:layout_width="match_parent"
      android:layout_height="499dp"
      android:layout_weight="0.72" >
    </ListView>
    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="129dp"
    android:gravity="bottom|center_horizontal|fill|top"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/importBL"
        android:layout_width="100dp"
        android:layout_height="90dp"
        android:layout_marginLeft="10sp"
        android:layout_marginTop="20sp"
        android:ems="10"
        android:text="Import"
        android:textSize="20sp"/>
    <Button
        android:id="@+id/deleteBL"
        android:layout_width="126dp"
        android:layout_height="90dp"
        android:layout_marginLeft="10sp"
        android:layout_marginTop="20sp"
        android:ems="10"
        android:text="Delete"
        android:textSize="20sp" />
      </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:gravity="center_horizontal"
    android:orientation="vertical" >
     <TextView
      android:id="@+id/blacklistDB1"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
     />
     <TextView
      android:id="@+id/blacklistDB2"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
     />
      android:layout_width="match_parent"
    android:layout_height="626dp"
    android:gravity="bottom|center_horizontal|fill|top"
   android:orientation="horizontal" />
    <LinearLayout
      android:layout_width="wrap_content"
      android:layout_height="129dp"
      android:gravity="bottom|center_horizontal|fill|top"
      android:orientation="horizontal" >
      <Button
          android:id="@+id/importBT"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Import" android:textSize="30sp"/>
      <Button
          android:id="@+id/deleteBT"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginLeft="20sp"
          android:text="Delete" android:textSize="30sp"/>
       </LinearLayout> 
```

我的错误

```
 java.lang.NullPointerException
  at android.view.LayoutInflater.from(LayoutInflater.java:171)
    at vahid.engineer.com.ContactCursorAdapter.newView(ContactCursorAdapter.java:40)
 at android.widget.CursorAdapter.getView(CursorAdapter.java:182)
     at android.widget.AbsListView.obtainView(AbsListView.java:1315)
 at android.widget.ListView.makeAndAddView(ListView.java:1727) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:00:07.047

尝试：

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# actionscript-3 - 如何在 AS3 中访问 IK 骨骼

> ID：13587907
> 
> 赞同：0
> 
> 时间：2012-11-27T15:49:01.500
> 
> 标签：actionscript-3, flash, actionscript

我创建了一些形状并将它们与骨骼连接起来，这些骨骼有一些名称，IKbone1，IKbone2 ......

所以问题是：如何在 AS3 中按名称访问这些骨骼，因为我已经尝试过，我得到一个错误，即没有对象名称......

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:13:53.143

[一本手册](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/ik/IKManager.html)

IK 结构在 Flash 中似乎相当复杂，您首先需要到达正确的骨架，然后您可以通过`IKArmature.getBoneByName()`. 这些 IK 骨骼中的主要数据集存储在点（关节）中，而不是实际骨骼中。

# php - 如何使用 2 个 SQL 查询检索所有带有所有评论的帖子

> ID：13587910
> 
> 赞同：4
> 
> 时间：2012-11-27T15:49:08.957
> 
> 标签：php, sql

我正在尝试创建一个包含帖子列表的页面，并在每个帖子下方包含属于该帖子的所有评论。最初，我只想使用一个查询来使用 SQL 的 JOIN 检索所有帖子 + 评论，但我发现例如检索具有多个评论的帖子是不可能的。它仅显示每个帖子最多 1 条评论的帖子，或者根据评论数量仅显示帖子多次。

在这个相关问题中，有人谈到了使用 2 个查询： [How to print posts and comments with only a sql query](https://stackoverflow.com/questions/2049573/how-to-print-posts-and-comments-with-only-one-sql-query)

但是我该怎么做呢？

我有帖子的查询和while循环，但我显然不想为该循环内的每个帖子运行评论查询。

```
$getPost = mysql_query('SELECT p.post_id,
                               p.user_id,
                               p.username,
                               p.content
                        FROM post p
                        ORDER BY p.post_id DESC');

while($row = mysql_fetch_array($getPost)) 
{ 
... 
} 
```

表结构（reply为存放评论的表）：

```
POST (post_id (primary key), user_id, username, content, timestamp)
REPLY (reply_id (primary key), post_id, username, reply_content, timestamp) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:16:53.687

您可以在单个查询中执行此操作，如果原始帖子中的数据量**很小**，则可以：

```
$getPost = mysql_query('SELECT
  p.*,
  r.reply_id, r.username r_username, r.reply_content, r.timestamp r_timestamp
  FROM post p
    left join reply r
  ORDER BY p.post_id DESC'
);

$posts = array();
$last_id = 0;
while($row = mysql_fetch_array($getPost)) 
{ 
  if ($last_id != $row['post_id']) {
    $posts[] = array(
      'post_id' => $row['post_id'],
      'user_id' => $row['user_id'],
      'username' => $row['username'],
      'content' => $row['content'],
      'timestamp' => $row['timestamp'],
      'comments' => array()
    );
  }

  $posts[sizeof($posts) - 1]['comments'][] = array(
    'reply_id' => $row['reply_id'],
    'username' => $row['r_username'],
    'reply_content' => $row['reply_content'],
    'timestamp' = $row['r_timestamp']
  );
} 
```

否则，将其分成两个查询，如下所示：

```
$getPost = mysql_query('SELECT
  p.*,
  FROM post p
  ORDER BY p.post_id DESC'
);

$rows = array();
$ids = array();
$index = array();
while($row = mysql_fetch_assoc($getPost)) {
  $row['comments'] = array();
  $rows[] = $row;
  $ids[] = $row['post_id'];
  $index[$row['post_id']] = sizeof($rows) - 1;
}

$getComments = mysql_query('select r.* from replies r where r.post_id in ("'
  . join('","', $ids)
  . '")');
while ($row = mysq_fetch_assoc($getComments)) {
  $rows[$index[$row['post_id']]]['comments'][] = $row;
} 
```

... 或类似的东西。任何一个选项都可以让您在第一个查询中添加 WHERE 子句等等，随心所欲。第二种方法的优点是您不会为每个评论重新传输原始帖子数据！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:00:50.603

为了也获得那些没有评论的帖子，您需要使用`LEFT OUTER JOIN`. 在这种情况下，第一个表中没有第二个表中任何对应行的任何行都将与由空值组成的行配对。

```
SELECT *  FROM posts
LEFT OUTER JOIN comments ON posts~post_id = comments~post_id; 
```

顺便说一句：还有一个`RIGHT OUTER JOIN`。当您使用它时，您将获得所有评论，包括那些父帖子以某种方式丢失的评论，但没有没有评论的帖子。

# c++ - 位图到 Iplimage 转换产生错误的颜色

> ID：13587916
> 
> 赞同：0
> 
> 时间：2012-11-27T15:49:22.483
> 
> 标签：c++, .net, opencv

我正在尝试将位图转换为 opencv 图像我通过发送 Bitmap.Scan0 使用 pinvoke 并且在非托管方面我通过使用字节数组创建 iplimage 解决方案似乎有效但并非总是如此！只有当我使用我的图形设备在我的电脑上创建图像但它在另一个上失败时，图像颜色似乎不正确并且图像被移动我怀疑我应该将位图传输到 DIB 怎么做？

```
IplImage* image= cvCreateImage(cvSize(width,height),depth,3)
memcpy(image->imageData,(uchar*)(bitmap),width*height*3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:55:16.480

`IplImage`**以BGR**顺序存储像素，同时`HBITMAP`期望它们是 RGB。

幸运的是，对你来说，整体`IplImage`可以从 BGR 转换为 RGB：

```
cvCvtColor(image, image, CV_BGR2RGB); 
```

# r - “子集”的奇怪问题

> ID：13587922
> 
> 赞同：3
> 
> 时间：2012-11-27T15:49:46.550
> 
> 标签：r, subset

我有一个奇怪的问题`subset`：它无法识别我的数据框中的变量。

例如，如果我想要`v1`dataframe中变量的摘要`DF`，我会得到：

```
summary(DF$v1)

 Min.    1st Qu. Median  Mean   3rd Qu. Max
-123.00  4.00    14.00   84.62  49.00   13140.00 
```

`DF`现在，这个变量应该总是非负的，所以我想通过将 dataframe 设置为 dataframe来检查负值`PROBS`。但如果我试试这个：

```
PROB <- subset[DF, v1 < 0] 
```

我得到：

```
Error: object "v1" not found 
```

我很肯定我没有拼错这个变量名。我已尝试使用此数据框中的其他变量，但它一直向我抛出此错误。

有没有人知道这种奇怪行为的原因？我从来没有遇到过这个`subset`功能的问题！

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T15:53:30.210

子集是一个函数，所以你应该使用`subset(DF, v1 < 0)`而不是方括号。

方括号用于直接对数据帧或矩阵进行子集化。`subset[DF, v1 < 0]`试图通过在对象范围内`subset`查找变量来对函数进行子集化。对象是函数，所以找不到对象。`v1``subset``subset``v1`

# actionscript-3 - AS3 中的货币舍入不一致

> ID：13587929
> 
> 赞同：1
> 
> 时间：2012-11-27T15:50:04.693
> 
> 标签：actionscript-3, math, rounding

在构建会计系统时，我遇到了一个大问题。假设我开了一张发票，然后，我必须申请与负值相同金额的信用，我有时会遇到 1 美分的舍入问题。

**我的问题仅与负值有关！**

让我们看看这个测试特定正负值的脚本。出于调试目的，我还发送了参数*expectedResult*；

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="creationCompleteHandler()">

    <fx:Script>
        <![CDATA[
            import mx.formatters.CurrencyFormatter;
            import mx.formatters.NumberBaseRoundType;

            private function roundDecimal(num:Number, expectedResult:Number):void
            {
                var rnd:CurrencyFormatter = new CurrencyFormatter();
                rnd.precision = 2;
                rnd.useThousandsSeparator = false;
                rnd.currencySymbol = '';

                if (num >= 0)
                    rnd.rounding = NumberBaseRoundType.NEAREST;
                else
                    rnd.rounding = NumberBaseRoundType.DOWN; // The problem is here, ALWAYS!

                var result:Number = Number(rnd.format(num));

                if (result != expectedResult)
                    trace("Error : " + result + " (Expecting " + expectedResult + ")");
                else
                    trace("OK : " + result);
            }

            protected function creationCompleteHandler():void
            {
                var num:Number;
                var expectedResult:Number;

                // Test number 1
                num = 5.653;
                expectedResult = 5.65;
                roundDecimal(num, expectedResult);
                roundDecimal(-(num), -(expectedResult));

                trace("------------");

                // Test number 2
                num = 5.655;
                expectedResult = 5.66;
                roundDecimal(num, expectedResult);
                roundDecimal(-(num), -(expectedResult));

                trace("------------");

                // Test number 3
                num = 5.657;
                expectedResult = 5.66;
                roundDecimal(num, expectedResult);
                roundDecimal(-(num), -(expectedResult));

            }
        ]]>
    </fx:Script>

</s:WindowedApplication> 
```

当然，我尝试修改负值的舍入类型，但没有成功..

查看不同的舍入类型及其结果：

```
//////////// Test 1 ////////////
if (num >= 0)
    rnd.rounding = NumberBaseRoundType.NEAREST;
else
    rnd.rounding = NumberBaseRoundType.DOWN; // The problem is here, ALWAYS!

OK : 5.65
Error : -5.66 (Expecting -5.65)
------------
OK : 5.66
OK : -5.66
------------
OK : 5.66
OK : -5.66

//////////// Test 2 ////////////
if (num >= 0)
    rnd.rounding = NumberBaseRoundType.NEAREST;
else
    rnd.rounding = NumberBaseRoundType.UP;

OK : 5.65
OK : -5.65
------------
OK : 5.66
Error : -5.65 (Expecting -5.66)
------------
OK : 5.66
Error : -5.65 (Expecting -5.66)

//////////// Test 3 ////////////
if (num >= 0)
    rnd.rounding = NumberBaseRoundType.NEAREST;
else
    rnd.rounding = NumberBaseRoundType.NEAREST; // The problem is here, ALWAYS!

OK : 5.65
OK : -5.65
------------
OK : 5.66
Error : -5.65 (Expecting -5.66)
------------
OK : 5.66
OK : -5.66 
```

我真的被困在这里，希望能得到一些帮助。非常**感谢**！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:36:31.227

Check to see if it's positive or negative and assign a sign to a var (1 or -1), take the absolute value ( Math.abs(value)) and round that. Then multiply it by the sign to get the result.

That way you always get the same result and the whether it is positive or negative doesn't matter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:08:47.277

您实际上期望舍入为负值提供与您想要的正值相反的结果。一个简单的测量方法是将正值舍入向下，负值舍入向上。（或者向上表示正面，向下表示负面，也有效）。诀窍是，如果值正好在两个可能的舍入结果的中间，NEAREST 总是四舍五入，并且您希望它只舍入负数。

# php - PHP OOP：获取扩展了另一个父类的所有声明的类

> ID：13587930
> 
> 赞同：4
> 
> 时间：2012-11-27T15:50:04.447
> 
> 标签：php

我需要获取扩展了另一个父类的所有声明的类。

所以例如...

```
class ParentClass {

}

class ChildOne extends ParentClass {

}

class ChildTwo extends ParentClass {

}

class ChildThree {

} 
```

我需要一个输出这个的数组：

```
array('ChildOne', 'ChildTwo') 
```

我是 PHP OOP 的新手，但基于一些谷歌搜索，我想出了这个解决方案。

```
$classes = array();

foreach( get_declared_classes() as $class ) {
    if ( is_subclass_of($class, 'ParentClass') ){
        array_push($classes, $class);
    }
} 
```

我想问的是，这是否是做我想做的事情的最佳实践，还是有更好的方法？全局范围将包含许多不是`ParentClass`. 循环遍历所有声明的类是最好的方法吗？

**编辑** *（澄清目的）*：

我想要实现的是实例化每个扩展父类的子类。

我想`$childone = new ChildOne; $childtwo = new ChildTwo;`为每个孩子做`ParentClass`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:31:57.453

you can try to log the declaration of a class the first time it is loaded. it suppose you are using autoloading.

# if you do not use composer but a custom loader :

It's the easiest way :

```
$instanciatedChildren = array();//can be a static attribute of the A class 
spl_autoload_register(function($class)use($instanciatedChildren){
   //here the code you use 
   if(is_subclass_of($class,'A')){
       $instanciatedChildren[] = $class;
   }
 } 
```

# if you use composer :

you can, make a class that extends `composer/src/Composer/Autoload/ClassLoader.php` and then override the loadClass method to add the condition given above. and then register your new loader and unregister the old one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:53:45.593

您的解决方案似乎很好，但我不确定您为什么要这样做。php 中没有简单的方法可以说，“给我全局某个父类的所有声明的类”，而不实际检查全局每个声明的类。即使您加载了几百个要循环的类，它也不应该太重，因为它们都在内存中。

如果您只想跟踪特定父类的已加载子类，为什么不创建一个注册表来在它们加载时跟踪它们呢？您可以在用于子类或事件的自动加载器或工厂中进行此跟踪，只需在类定义之前的类文件顶部放置一些内容即可。

# web - Qgis 网络客户端/Openlayers

> ID：13587937
> 
> 赞同：4
> 
> 时间：2012-11-27T15:50:41.437
> 
> 标签：web, client, openlayers, qgis

我需要你的帮助。我使用 Qgis Web 客户端，我想使用这样的代码：

```
map.events.register("click", map , function(e){
var opx = map.getLayerPxFromViewPortPx(e.xy) ;  
...  
... 
```

我尝试将此代码插入到*webclient 文件夹*（*qgis-web-client* / *site / js ）中的**几乎*每个*js 文件*中，但没有成功。

 ***谁能告诉我如何以及在什么 js 文件中（以及在文件的哪个部分）我必须插入这样的代码？例如：我喜欢通过单击地图项来打开一个弹出窗口。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T08:23:12.267

如果您使用最新的 GIT 版本的 Qgis Web Client，您可以使用新文件 Customizations.js 并将其写入函数`customAfterMapInit`中。***

# dll - 从 .Net 1.1 项目访问 .Net 4.0 Com

> ID：13587940
> 
> 赞同：3
> 
> 时间：2012-11-27T15:50:54.007
> 
> 标签：dll, .net-4.0, com-interop, .net-1.1

> **可能重复：**
> [如何将来自更高版本（.net 4）的.net库（.dll）与来自更低版本（.net 2）的二进制文件集成](https://stackoverflow.com/questions/4377219/how-to-integrate-net-library-dll-from-higher-version-net-4-with-binaries)

我有一个旧的 .Net 1.1 dll，我将它转换为 .Net 4.0。旧的 .Net 1.1 代码将使用 CreateObject("dll.className") 来使用它。我使用 regasm 注册了这些类，我可以在注册表中看到这些类。但是 .Net 1.1 程序无法创建该对象。我尝试将消费程序转换为 4.0 并检查它是否可以创建对象。如果两者都是 4.0，它工作正常。我的问题是我需要在 4.0 代码中做些什么，以便 1.1 项目可以看到这些类。

# mysql - MYSQL - 查询期间丢失与 MySQL 服务器的连接

> ID：13587942
> 
> 赞同：2
> 
> 时间：2012-11-27T15:50:57.850
> 
> 标签：mysql, database, phpmyadmin, innodb

今天我试图导入一个数据库（~650MB），但由于我的最大数据包大小太小而失败。在尝试修复此问题时，由于某种原因数据库已损坏。

现在我有以下问题：

在 PhpMyAdmin 中，我尝试删除已损坏的表并返回以下内容：

```
Fout
SQL-query: 

DROP DATABASE  `database_name`

MySQL retourneerde: 

#2013 - Lost connection to MySQL server during query 
```

每个其他数据库都可以正常工作，除了这个。我尝试了几种方法，甚至在 my.cnf 文件中将 innodb_force_recovery 设置为 6。

有人经历过这样的事情吗？

完整的错误输出是：

```
Markering - 27 nov. 2012 16:49:06
121127 16:49:18  InnoDB: Assertion failure in thread 4516245504 in file dict0dict.c line 2643
InnoDB: Failing assertion: for_table || ref_table
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html
InnoDB: about forcing recovery.
15:49:18 UTC - mysqld got signal 6 ;
This could be because you hit a bug. It is also possible that this binary
or one of the libraries it was linked against is corrupt, improperly built,
or misconfigured. This error can also be caused by malfunctioning hardware.
We will try our best to scrape up some info that will hopefully help
diagnose the problem, but since we have already crashed, 
something is definitely wrong and this may fail.

key_buffer_size=16777216
read_buffer_size=262144
max_used_connections=1
max_threads=151
thread_count=1
connection_count=1
It is possible that mysqld could use up to 
key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 134066 K  bytes of memory
Hope that's ok; if not, decrease some variables in the equation.

Thread pointer: 0x1010c9000
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 10d306ed8 thread_stack 0x40000
0   mysqld                              0x000000010027a4fc my_print_stacktrace + 44�
1   mysqld                              0x0000000100021134 handle_fatal_signal + 692�
2   libsystem_c.dylib                   0x00007fff836038ea _sigtramp + 26�
3   mysqld                              0x00000001002efd87 mtr_memo_push + 23�
4   libsystem_c.dylib                   0x00007fff8365adce abort + 143�
5   mysqld                              0x00000001002baf96 dict_foreign_add_to_cache + 998�
6   mysqld                              0x00000001002c09c6 dict_load_foreigns + 1414�
7   mysqld                              0x00000001002c2b5b dict_load_table + 1707�
8   mysqld                              0x00000001003212b1 row_drop_database_for_mysql + 129�
9   mysqld                              0x000000010030b322 _ZL22innobase_drop_databaseP10handlertonPc + 226�
10  mysqld                              0x0000000100022601 _ZL17dropdb_handlertonP3THDP13st_plugin_intPv + 33�
11  mysqld                              0x0000000100178f7d _Z24plugin_foreach_with_maskP3THDPFcS0_P13st_plugin_intPvEijS3_ + 845�
12  mysqld                              0x0000000100140de3 _Z11mysql_rm_dbP3THDPcbb + 1859�
13  mysqld                              0x0000000100167143 _Z21mysql_execute_commandP3THD + 13491�
14  mysqld                              0x000000010016a386 _Z11mysql_parseP3THDPcjP12Parser_state + 294�
15  mysqld                              0x000000010016b49d _Z16dispatch_command19enum_server_commandP3THDPcj + 1709�
16  mysqld                              0x000000010016c387 _Z10do_commandP3THD + 231�
17  mysqld                              0x000000010020b581 _Z24do_handle_one_connectionP3THD + 353�
18  mysqld                              0x000000010020b639 handle_one_connection + 73�
19  libsystem_c.dylib                   0x00007fff83615742 _pthread_start + 327�
20  libsystem_c.dylib                   0x00007fff83602181 thread_start + 13�

Trying to get some variables.
Some pointers may be invalid and cause the dump to abort.
Query (10e002810): is an invalid pointer
Connection ID (thread ID): 9
Status: NOT_KILLED

The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains
information that should help you find out what is causing the crash.
121127 16:49:19 mysqld_safe mysqld restarted
121127 16:49:19 [Warning] Setting lower_case_table_names=2 because file system for /Library/Application Support/appsolute/MAMP PRO/db/mysql/ is case insensitive
121127 16:49:19 [Note] Plugin 'FEDERATED' is disabled.
121127 16:49:19 InnoDB: The InnoDB memory heap is disabled
121127 16:49:19 InnoDB: Mutexes and rw_locks use GCC atomic builtins
121127 16:49:19 InnoDB: Compressed tables use zlib 1.2.3
121127 16:49:19 InnoDB: Initializing buffer pool, size = 128.0M
121127 16:49:19 InnoDB: Completed initialization of buffer pool
121127 16:49:19 InnoDB: highest supported file format is Barracuda.
InnoDB: The user has set SRV_FORCE_NO_LOG_REDO on
InnoDB: Skipping log redo
121127 16:49:19  InnoDB: Waiting for the background threads to start
121127 16:49:20 InnoDB: 1.1.8 started; log sequence number 0
121127 16:49:20 InnoDB: !!! innodb_force_recovery is set to 6 !!!
121127 16:49:20 [Note] Event Scheduler: Loaded 0 events
121127 16:49:20 [Note] /Applications/MAMP/Library/bin/mysqld: ready for connections.
Version: '5.5.25'  socket: '/Applications/MAMP/tmp/mysql/mysql.sock'  port: 0  Source distribution 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:49:15.280

如果您已经尝试过每个 innodb_force_recovery 值（3 停止事务被回滚或转发），那么我只能指出以下内容

切入正题，这个网页上的人最终删除了 innodb 文件。

> 直到最后，我都没有找到解决这个问题的明确方法……但是如果您在测试环境中，您可以删除 ibdata1 和 ib_logfile0、ib_logfile1 并重新启动服务器。这在我的情况下有效。

[http://www.randombugs.com/linux/crash-innodb-table.html](http://www.randombugs.com/linux/crash-innodb-table.html)

显然，如果您有大量其他数据库，这也将涉及备份和恢复这些数据库。如果您找到解决此问题的任何其他方法，我建议您先尝试一下。

Percona 提供了一套数据恢复工具，但在你的情况下数据不是问题

[http://code.google.com/p/innodb-tools/](http://code.google.com/p/innodb-tools/)

[https://launchpad.net/percona-data-recovery-tool-for-innodb](https://launchpad.net/percona-data-recovery-tool-for-innodb)

# ios - ios - 列表项在一定长度后被截断

> ID：13587946
> 
> 赞同：0
> 
> 时间：2012-11-27T15:51:03.437
> 
> 标签：ios, uitableview

我有一个有时有长文本的列表视图。当文本是几段时，它往往会在某些时候被截断。部分奇怪的行为是它并不总是在同一个角色处被切断，而是有点随机。

这是我用来填充列表的代码：

```
// CREATING EACH CELL IN THE LIST
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    //static const NSInteger kLabelTag = 1;
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault)
            reuseIdentifier:@"business"];

    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];
    NSString *first_name = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"first_name")];
    //Boolean *is_private = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"is_private")];

    // Creating a constraint size for the label you are making
    CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f); 

    // Determining the size that you will need for the label based on the comment
    // length and the contraint size
    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

    //  Creating the label and initializing it with the frame that you have
    //  determined by your size calculations above
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, MAX(size.height, 44.0f) + 20.0f)];

    // setting up the label properties
    label.numberOfLines = 0;
    label.lineBreakMode = UILineBreakModeWordWrap;

    standardUserDefaults = [NSUserDefaults standardUserDefaults];
    NSString *is_private = [standardUserDefaults objectForKey:@"is_private"];

    if ( is_private == nil )
    {
        label.text = [first_name stringByAppendingString:[@": "  stringByAppendingString:comment]]; // comment;
    }
    else
    if ( [is_private isEqualToString:@"0"])
    {
        label.text = [first_name stringByAppendingString:[@": "  stringByAppendingString:comment]]; // comment;     
    }
    else 
    {
        label.text = comment;  
    }

    // adding the label view to the cell that you have created
    [cell.contentView addSubview:label];        

    // CLOSE THE SPINNER
    [spinner stopAnimating];

    // return the cell for the table view
    return cell;
}

//This method will determine how tall each row needs to be. Cell size for word wrapping.
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{    
    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];

    // Again you are getting the constraints because you are going to us this size
    // to constrain the height of the cell just like you determined the size for the label.
    CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f);

    // Again, determining the size that we will need for the label, because it will drive
    // the height of the cell
    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

    //  Finally, we can determine the height for the cell!
    CGFloat height = MAX(size.height, 44.0f);

    //  return the height, which is the height of the label plus some extra space to make
    //  it look good.
    return height + (10 * 2);
} 
```

这段代码有什么特别不正确的地方吗？还是问题可能根源于其他地方？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:01:48.627

当你创建标签时，你给它一个最大高度

```
MAX(size.height, 44.0f) 
```

这意味着标签永远不会高于 44 点。如果文本（被包装以适合标签的宽度）高于标签，则位于其下方的线条仍将在标签中，但不可见。

您的选择：

- 使标签字体自动调整大小

- 更改高度，或切换到标签的动态高度

每次更新时都会这样：

```
myLabel.text = @"some text";
CGRect rect = myLabel.frame;
rect.size.height = textView.contentSize.height;// Adding.size Since height is not a member of CGRect
textView.frame = rect; //your label is now as high as its contents (the text) 
```

-修剪进入标签的文本，使其永远不会超过标签的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:45:03.773

除非绝对必要，否则我会摆脱拥有自己的 UILabel 并根据字符串大小动态调整单元格的高度。在下面查看我的示例：

**在加载 tableview 之前创建字符串**

```
-(void)createStrings{

    newArray = [NSMutableArray array];

    for(NSDictionary *dictionary in items_array){
        NSString *comment = [dictionary objectForKey:(@"comment")];
        NSString *first_name = [dictionary objectForKey:(@"first_name")];
        NSString *combinedString = [first_name  stringByAppendingString:[@": "  stringByAppendingString:comment]];
        [newArray addObject:combinedString];
    }

}

#pragma mark - Table View Data Source
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;

    static NSString *CellIdentifier = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17];
    }

    cell.textLabel.text = [newArray objectAtIndex:indexPath.row];

    return cell;
}

#pragma mark - Table View Delegate
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
        UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:17];
        CGSize constraintSize = CGSizeMake(self.tableView.frame.size.width, MAXFLOAT);
        CGSize labelSize = [[newArray objectAtIndex:indexPath.row] sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

        return labelSize.height + 30;
} 
```

# internet-explorer - IE8：让“nth-child”选择器在媒体查询中工作？

> ID：13587947
> 
> 赞同：2
> 
> 时间：2012-11-27T15:51:03.710
> 
> 标签：internet-explorer, css, internet-explorer-8, media-queries

在我的网站项目中，我使用**媒体查询**和**nth-child 选择器**。

IE8 不支持开箱即用，但有一些 polyfill 可以提供帮助：

*   [Respond.js](https://github.com/scottjehl/Respond)、[mediatizr](https://github.com/pyrsmk/mediatizr)或[css3-mediaqueries.js](http://code.google.com/p/css3-mediaqueries-js/)在 IE8 中启用媒体查询；
*   [selectivizr](http://selectivizr.com/)或[ie9.js](http://code.google.com/p/ie7-js/)启用 nth-child 选择器。

我的问题是我需要**在媒体查询中使用 nth-child**。一个综合的例子：

```
@media (min-width: 500px) {
  .foo:nth-child(2n) {
    color: pink;
  }
} 
```

我需要此代码才能在 IE8 中工作。

问题是 selectivizr 和 ie9.js 都不能解析`nth-child`媒体查询，并且支持媒体查询的 polyfill 无济于事，因为它们在一起使用时会干扰`nth-child`polyfill。

请提出一种使该代码在 IE8 中工作的方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:09:38.820

好的，我想通了。

Selectivizr 和 Respond 都被修改为一起工作[（](https://github.com/scottjehl/Respond/issues/36)[1、2](https://github.com/keithclark/selectivizr/issues/23)）。

问题是已对 Selectivizr 版本 1.0.3b 进行了必要的更改。截至 2013 年 3 月，1.0.3b 尚未发布。Selectivizr 的官方网站和 CDN 上都没有它。它只能[从](https://raw.github.com/keithclark/selectivizr/master/selectivizr.js)项目的 repo 中获得，目前只有未压缩的版本可用。

发布时响应更及时，所以最新的官方版本就可以了。

请注意，应首先包含 Selectivizr，然后再包含 Respond。并且不要忘记在 Selectivizr 之前包含[Selectivizr 的要求](http://selectivizr.com/#how)之一！所以正确的顺序是：

1.  NWMatcher（或替代品）
2.  选择性
3.  回应

并且不要使用[IE9.js](https://code.google.com/p/ie7-js/)！它有自己的媒体查询实现，与 Respond 一起将使您的网站在 IE < 9 中无法使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:15:21.393

您的代码在 IE8 中不起作用，因为[IE8 根本不支持媒体查询](http://caniuse.com/#search=media)。如果你想在 IE8 中进行媒体查询，那么你需要找到一个支持它的 polyfill。

您应该能够通过媒体查询和选择器 polyfill 的组合来实现您想要的，您可以在同一页面上使用它们，因为它们通常是为了不相互干扰而编写的。

**编辑**如果polyfills真的不能相互工作，那么我会认真看看为什么你认为你需要IE8的媒体查询支持。机会是，你会很好，有一些调整，只是让 IE8 做自己的事情。IE8 用户很可能不会使用非常大或非常小的屏幕，因为 IE8 仅适用于 Windows XP 和一些 Windows Vista 机器（Win7 附带 IE9），而 Windows Phone 的市场非常小在移动领域分享。机会是，你付出了很多努力，几乎没有回报。

但是，如果您确实发现出于某种原因*需要*对 IE8 的媒体查询类型支持，那么我会研究一个更基本的 JavaScript 选项，它只检测窗口大小并相应地应用一个类（即使在原版中，这也应该非常简单JS，但大多数库使这变得更加微不足道）。您可以将 JavaScript 引用包装在条件注释中，以便从其他所有浏览器对其进行沙箱处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:45:59.443

我目前也遇到了同样的问题，正忙于尝试一些想法来尝试使这项工作发挥作用。

一种似乎有效的*技巧是将 selectivizr.js 中的所有函数拉到全局级别（也需要全局声明变量）。*然后，您可以更改 css-mediaqueries 以在将媒体查询的内容添加到样式之前调用 patchStyleSheet（[以下版本的 css-mediaqueries.js 的](https://github.com/livingston/css3-mediaqueries-js)第 916 行）：

```
styles[styles.length] = cssHelper.addStyle('@media ' + s.join('') + '{' + patchStyleSheet(mql.getCssText()) + '}', false); 
```

所以，我并不是说这是一个理想的解决方案——在全局级别声明 selectivizr 中的所有函数和变量显然不是最好的主意——但是，它似乎确实有效并证明了它是可能的。再花一点时间，也许可以将这两个脚本组合成一个更好的解决方案。

# java - 在 swt 中使用 FormLayout 输入表单

> ID：13587954
> 
> 赞同：0
> 
> 时间：2012-11-27T15:51:18.350
> 
> 标签：java, layout, button, swt, textfield

我是 swt 的新手，我正在尝试在窗口中创建布局。每个 texfield 将在文本字段的左侧有一个标签 - 但是在某些情况下，每个标签可能有两个文本字段，并且可能在以后添加单选按钮。表单布局是最好的方法吗？在我看来，这不必要地过于复杂。我没有 windowbuilder 或可视化设计器实用程序，并且发现 FormAttachment 方法难以处理。任何建议表示赞赏。我附上了我试图创建的基本 gui 设计的屏幕截图。

不幸的是，作为新用户，我暂时不允许上传图片。基本上我的目标是这样的：

```
LABEL TEXTBOX
LABEL TEXTBOX TEXTBOX
LABEL TEXTBOX
LABEL TEXTBOX TEXTBOX
LABEL CALENDAR CONTROL
     OK  |  NOK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:43:16.737

这是一个简单的示例，它应该解释如何跨 a 的多个列跨越一个小部件`GridLayout`：

```
public class StackOverflow2
{
    public static void main(String[] args)
    {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setText("StackOverflow");
        shell.setLayout(new GridLayout(3, false));

        Label firstLabel = new Label(shell, SWT.NONE);
        firstLabel.setText("Label");
        Text firstText   = new Text(shell, SWT.BORDER);
        addSpanData(firstText, 2);

        Label secondLabel = new Label(shell, SWT.NONE);
        secondLabel.setText("Label");
        Text secondText   = new Text(shell, SWT.BORDER);
        addSpanData(secondText, 1);

        Text thirdText    = new Text(shell, SWT.BORDER);
        addSpanData(thirdText, 1);

        Label thirdLabel = new Label(shell, SWT.NONE);
        thirdLabel.setText("Label");

        Text fourthText  = new Text(shell, SWT.BORDER);
        addSpanData(fourthText, 2);

        shell.pack();
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

    private static void addSpanData(Control comp, int span)
    {
        GridData data = new GridData(SWT.FILL, SWT.CENTER, true, false);
        data.horizontalSpan = span;
        comp.setLayoutData(data);
    }
} 
```

这是它的外观：

![在此处输入图像描述](../Images/24aa0702b362289319462c92fd306c9b.png)

# ruby - 如何使用 META PROGRAMMING 记忆类方法？

> ID：13587956
> 
> 赞同：1
> 
> 时间：2012-11-27T15:51:24.997
> 
> 标签：ruby, metaprogramming

编辑：要清楚。这是一个关于如何使用元编程做某事的问题。这不是关于记忆。显然有更好的方法来记忆。相关方法中有“memoize”只是为了说明它们的目的。

* * *

我只是在玩元编程，所以请不要回答使用 `@foo`实例变量。

我有以下尝试通过覆盖运行方法中的方法定义来记忆实例和类方法。

```
class Obj
  class << self

    def meta_me; self; end

    def class_memoize
      puts "hard core calculating ..."
      abc = "huge calculation result"

      raise "broken here with infinite loop"

      define_class_method "class_memoize" do
        puts abc
        abc
      end
      class_memoize
    end

    def define_class_method name, &blk
      meta_me.instance_eval do
        define_method name, &blk
      end
    end
  end

  def instance_memoize
    puts "hard core calculating ..."
    abc = "huge calculation result"

    self.class.meta_me.send :define_method, :instance_memoize do
      puts abc
      abc
    end

    instance_memoize
  end
end

o = Obj.new
o.instance_memoize
# hard core calculating ...
# huge calculation result

o.instance_memoize
# huge calculation result 
```

实例版本有效，但类版本无效。

我已经尝试在类版本中进行参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:18:15.937

除了道德，这比你想象的要容易得多。您的主要问题是您的 meta_me 方法使用了错误的东西。试试这个：

```
class Object
  def metaclass
    class<<self;self;end
  end
end 
```

在 Ruby 中进行元编程时，这是一个相当常见的猴子补丁。现在很容易动态地重新实现一个方法：

```
class Obj
  def self.class_memoize
    puts "calculating..."
    abc = "result"
    metaclass.send(:define_method, :class_memoize) do
      puts abc
      abc
    end
    class_memoize
  end

  def instance_memoize
    puts "calculating..."
    abc = "result"
    metaclass.send(:define_method, :instance_memoize) do
      puts abc
      abc
    end
    instance_memoize
  end
end 
```

如您所见，一旦您有了元类对象，无论是类方法还是实例方法，重新定义方法都一样。请注意，如果您不想使用元类方法玷污整个命名空间，那么`class<<self;self;end`在您想要引用它时使用该惯用语可能会更好。您可以直接在其上调用方法，如下所示：

```
(class<<self;self;end).send(:define_method, :foo){|bar| bar*23} 
```

请注意，括号并不是真正需要的，它只是有助于包含作为裸元类引用的混乱 :) 希望这会有所帮助。

# windows - 在 PowerShell 中格式化文本

> ID：13587957
> 
> 赞同：1
> 
> 时间：2012-11-27T15:51:33.273
> 
> 标签：windows, powershell

我遇到了一个问题......我正在尝试在 powershell 中格式化文本。

这是我正在尝试做的事情：

我有一个纯文本文件，其中包含来自我已经清理过的 ldap 导出的员工 ID 和邮件地址，如下所示：

```
0001  
a@y.com  
0002  
b@y.com  
0003  
c@y.com  
....  
0400
z@y.com 
```

我想将其转换为以下内容：

```
0001,a@y.com  
0002,b@y.com  
0003,c@y.com  
...  
0400,z@y.com 
```

到目前为止，我发现的唯一一件事是我可以创建一个如下所示的输出：

```
0001,a@y.com,0002,b@y.com,0003,c@y.com...0400,z@y.com 
```

有人可以帮我弄这个吗？！？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:57:53.787

尝试：

```
 gc .\listfile.txt -ReadCount 2  | % { $_ -join ',' } | out-file .\newlist.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:58:41.373

首先，您将要存储文件的内容：

```
$c=gc Myfile.txt 
```

然后，您将需要使用循环将每个 i-th 和 i+1-th 行打印到文件中：

```
for($i=0;$i -lt $c.Count;$i+=2){
    "$($c[$i]),$($c[$i+1])" | Out-File -Append MyNewFile.txt
} 
```

# php - 根据 Wordpress 中的类别显示最近的帖子

> ID：13587958
> 
> 赞同：1
> 
> 时间：2012-11-27T15:51:42.493
> 
> 标签：php, wordpress, filter, categories, posts

我使用在 content.php 页面上生成缩略图的模板，如下所示：

```
<article <?php post_class('single-entry clearfix'); ?>>  
<?php
// Test if post has a featured image
if( has_post_thumbnail() ) { 
    // Get resize and show featured image : refer to functions/img_defaults.php for default values
    $wpex_entry_img = aq_resize( wp_get_attachment_url( get_post_thumbnail_id(), 'full' ),  wpex_img( 'blog_entry_width' ), wpex_img( 'blog_entry_height' ), wpex_img( 'blog_entry_crop' ) );
?>
    <div class="single-entry-thumbnail">
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><img src="<?php echo $wpex_entry_img; ?>" alt="<?php echo the_title(); ?>" /></a>
    </div><!-- /single-entry-thumbnail -->
<?php } ?>
<div class="entry-text clearfix">
    <header>
        <h3><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h3>
    </header>
</div><!-- /entry-text --> 
```

我刚开始使用 Wordpress 和 php，我想为此添加一个参数，因此只有类别为“showcase”的帖子才会显示。任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:37:14.217

您可以使用 in_category() 函数来测试该帖子属于它。

```
if ( in_category( 'showcase' ) ) {
    ...
} 
```

in_category() 文档 - [http://codex.wordpress.org/Function_Reference/in_category](http://codex.wordpress.org/Function_Reference/in_category)

# javascript - 关闭模态框架窗口后如何重定向

> ID：13587961
> 
> 赞同：0
> 
> 时间：2012-11-27T15:51:45.887
> 
> 标签：javascript, drupal

我使用这样的命令 Drupal.modalFrameChild.triggerParentEvent('childClose', [args, statusMessages]) 在 javascript 中关闭我的模态框架窗口。但我不知道之后如何将我的浏览器重定向到特定路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:35:08.580

你可以通过`window.location.href = url;`命令。只需使用 url 来定义位置！

# soap - 使用soap over tcp时如何获取wsdl？

> ID：13587966
> 
> 赞同：0
> 
> 时间：2012-11-27T15:51:54.503
> 
> 标签：soap, tcp, wsdl

如前所述，我有主机和服务器......但是如何通过 tcp 发出 wsdl 请求？

也就是说，我想查看返回的 wsdl 文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:58:18.250

这是从服务器获取 wsdl 文件的格式

```
http://url:port/WebServicesName?wsdl 
```

# javascript - 在 OnValueChanged 之后将隐藏字段设置为“未更改”

> ID：13587967
> 
> 赞同：0
> 
> 时间：2012-11-27T15:51:55.653
> 
> 标签：javascript, asp.net, postback, hidden-field

在服务器端，我有以下代码：

```
 protected void DownloadExcel(object sender, EventArgs e)
    {
        byte[] arrayExcel = Convert.FromBase64String(reportBase64.Value);
        HttpContext.Current.Response.ClearContent();
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.AppendHeader("content-length", arrayExcel.Length.ToString());
        HttpContext.Current.Response.AppendHeader("content-disposition", "attachment;filename=excelName.xls");
        HttpContext.Current.Response.ContentType = "application/Excel";
        HttpContext.Current.Response.BinaryWrite(arrayExcel);
        HttpContext.Current.Response.End();
        HttpContext.Current.Response.Close();
        HttpContext.Current.Response.Flush();
    } 
```

此方法绑定到由这个小 js 触发的“OnValueChanged”事件：

```
 self.getExcel = function (stringBase64) {
    $("#hiddenFiedlName").val(stringBase64).change();
    __doPostBack();
} 
```

在第一次触发事件后，它会在每次回发时触发。我认为发生这种奇怪的行为是因为 js 代码修改的“更改触发器”没有被真正的回发清除。

现在，我的假设正确吗？如果是这样，有没有办法以编程方式清除这个“更改”触发器？

谢谢

EDIT1：我写的“每个回发”是由同一页面中的其他按钮触发的其他文件下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:36:55.087

这个问题有点棘手，但我设法解决了它。

事实是：*如果没有执行真正的回*发（不考虑响应文件），该值*仍然被认为是 "changed"*。

解决此问题的唯一方法似乎是手动“重置”隐藏字段的值。

我想出了这个：

```
self.getExcel = function (stringBase64) {
    $("#hiddenFiedlName").val(stringBase64);
    __doPostBack();
    $("#hiddenFieldName").val("");
} 
```

回发后，值恢复为初始值（始终为空字符串）。这样做不会触发“ValueChanged”事件。

正如 jbl 的评论中所述，这`change()`是无用的（请参阅他在问题中的评论）。

# magento - Magento，getPrice和getFinalPrice有什么区别

> ID：13587968
> 
> 赞同：17
> 
> 时间：2012-11-27T15:51:56.447
> 
> 标签：magento

正如标题所解释的那样，在 Magento 中，这两者之间有什么区别：

```
$product->getPrice(); 
```

v

```
$product->getFinalPrice(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T15:53:59.193

获得最终价格包括折扣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:27:02.220

getFinalPrice 检查产品是否有折扣，如​​果此折扣有效，则该方法应用折扣并返回文字“最终价格”，如果您检查 getPrice()，您将获得该产品的简单价格。

# windows-mobile - Windows Mobile 6.1，测试 WI-FI 访问

> ID：13587969
> 
> 赞同：0
> 
> 时间：2012-11-27T15:52:07.113
> 
> 标签：windows-mobile, compact-framework, wifi

我正在为使用一系列不同 PDA:s 的 Windows Mobile 5.0、6.1、6.5 开发软件。但是我还没有找到一种可靠的方法来等待 WI-FI 正确唤醒。有时 WI-FI 设备只是挂起，您需要重新启动 pda，这显然不是您想要的。通常，如果您有足够的耐心并等待 pda 正确唤醒并访问网络，它就不会挂起。

在尝试使用之前，是否有适当的方法来检查 wi-fi 是否可用？最好是适用于一系列制造商（Intermec、Symbol、Datalogic 和 Opticon）的通用方法。

我们今天这样做的方式或多或少是尝试通过 DNS.GetHostName() 解析我们自己的名称并等待 127.0.0.1 响应。

非常感谢任何建议。阻塞或异步调用都是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:30:08.590

如果您使用的是基于 SYMBOL 的设备，那么通过使用**Symbol.WirelessLAN**或**Symbol.Fusion dll** ，您可以检查您的 wifi 是否被唤醒。这些 dll 为您提供 wifi 的信号强度。未连接 wifi 时显示 none 或 0%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:43:20.620

我们所有的无线软件都使用网络服务。我们只是为每个名为 IsConnected 的 Web 服务构建了一个简单的方法，该方法返回 true。如果我们从这里得到异常，我们知道我们的 wifi 有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:24:29.310

由于所有 OEM 都使用不同的自定义 WiFi 驱动程序或安全请求者（如 Odyssey 或其他而不是 MS Security），并且并非所有人都使用 ZeroConfig，因此您需要一种通用方法。

一种选择是使用网络的系统状态通知。但是过去我发现这些都不可靠。使用连接管理器 (CM) 也是如此。CM 有时会报告没有人的工作连接。必须对缓存做一些事情。

可以使用 ping 检查工作连接。ping 验证堆栈是否可用以及主机是否可访问。其他选项，例如检查 WiFi 接入点关联或本地 IP 地址并不意味着您可以访问您需要的主机。

在我的网站上有一个易于使用的后台工作程序类，它实现了一个 ping 作为阻塞功能的示例：[http ://www.hjgode.de/wp/2010/06/01/mobile-development-easy-to-use -background-thread-with-gui-update/](http://www.hjgode.de/wp/2010/06/01/mobile-development-easy-to-use-background-thread-with-gui-update/)

在您的主代码中，您启动后台线程，订阅它的事件，当 ping 完成时，您将触发该事件。然后您可以检查响应（返回的 ping 数）并开始或等待您对主机执行的操作。

请记住包含一些用于暂停/恢复设备的逻辑。WiFi 通常会因暂停而关闭，您需要重新启动逻辑才能访问您的主机。

# python - 如何使用python中的字母列表搜索单词列表

> ID：13587972
> 
> 赞同：-4
> 
> 时间：2012-11-27T15:52:13.383
> 
> 标签：python, list

我有一个大约一百个单词的列表和一个包含八个字母的列表，我如何搜索每个字母以及单词，找出列表中字母最多的单词，然后打印该单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:22:07.497

```
def searchWord(letters, word):
    count = 0
    for l in letters:
        count += word.count(l)

    return count

words = ['hello', 'world'];
letters = ['l', 'o']

currentWord  = None
currentCount = 0

for w in words:
    n = searchWord(letters, w)

    print "word:\t", w, " count:\t", n

    if n > currentCount:
        currentWord = w
        currentCount = n

print "highest word count:", currentWord 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:14:59.153

效率不高，但你可以这样做：

```
def search(test, words):
    return sorted(((sum(1 for c in word if c in test), word) for word in words),
        reverse=True) 
```

这会给你一个排序的单词和计数列表。

# linux - Linux一元运算符检查具有模式名称的文件是否存在

> ID：13587974
> 
> 赞同：1
> 
> 时间：2012-11-27T15:52:28.937
> 
> 标签：linux, file, pattern-matching, unary-operator

我想检查给定路径中是​​否有名称与给定模式匹配的文件。

```
assert=1
myPatternpath=$HOME/folderName/abcMYPATTERN.xml
if [ ! -f $myPatternpath ] 
then assert=0 
fi
echo $assert; 
```

MYPATTERN 应该是任何字符。

编辑：

例如，MYPATTERN 可以是：*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:12:28.993

所以，这不是你想要的正则表达式，而是通配符。在这种情况下，您可以执行以下操作：

```
for file in $HOME/folderName/*.xml; do
    if [ ! -f $file ] then assert=0; fi
done
echo $assert; 
```

但是，当然，因为您正在浏览文件，所以 -f 是隐含的。如果检查它是否是文件夹，可读等，这仍然很有用......

# namespaces - Tcl 错误：命令已存在于命名空间“::”中

> ID：13587975
> 
> 赞同：0
> 
> 时间：2012-11-27T15:52:32.783
> 
> 标签：namespaces, tcl, incr-tcl

这个错误是什么意思？

```
command already exists in namespace "::" 
```

出现此错误时，您能否提供简单的案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T23:03:26.383

这（可能）是 [incr Tcl] 核心抛出的错误，当您尝试执行类似定义与现有命令同名但尚未成为类的命令的 itcl 类的操作时；您遗漏的部分（在引号中，在“<code>command”和“<code>already”之间）是您尝试覆盖的命令的名称。例如（`subst`这里相当随意）：

```
% package require itcl
4.0b7
% itcl::class subst {}
command "subst" already exists in namespace "::" 
```

作为 Tcl 本身的“标准”部分的命令（而不是扩展包或用户代码）不会生成远程关闭的错误。

至于如何修复……不要使用与现有非类相同的名称。不过，这在您的代码上下文中意味着什么，我不知道。你没有透露足够的信息让我找出你可能首先遇到这个问题的更深层次的原因。

# html - 从 Styled Maps Wizard 获取 JSON 代码以集成到 Google Maps API html 中？

> ID：13587977
> 
> 赞同：1
> 
> 时间：2012-11-27T15:52:39.503
> 
> 标签：html, json, api, google-maps

我使用样式地图向导创建了我的谷歌地图的样式版本，但我不确定如何将 JSON 集成到我的 html 中？任何帮助表示赞赏。谢谢！

这是代码的剪辑。

```
{
"featureType": "road.highway.controlled_access",
"stylers": [
  { "color": "#808080" }
]
} 
```

另外，这里是[jsfiddle 的链接](http://jsfiddle.net/caseymmiller/yhexV/)。

这是我当前的所有代码。

```
<!DOCTYPE html>
<html>
  <head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html {
    height: 100%
  }
  body {
    height: 100%;
    margin: 0;
    padding: 0
  }
  #map_canvas {
    height: 100%
  }
</style>
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoiYR3lgzcF8CxuOwe7SYsJAPjZQXOhQQ&sensor=false"></script>
<script type="text/javascript">
  var line;
  var title;
  var map;
  var loc;
  var locations = [];
  var image = new google.maps.MarkerImage('parkingIconRed.png');

  var styles = [
  {
"featureType": "road.highway.controlled_access",
"stylers": [
  { "color": "#808080" }
    ]
  },{
"featureType": "road.local",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#80d9ff" },
  { "weight": 1.6 }
]
  },{
"featureType": "road.arterial",
"elementType": "geometry.fill",
"stylers": [
  { "color": "#d2d3ff" }
]
  },{
"featureType": "road.arterial",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
  },{
"featureType": "landscape.man_made",
"elementType": "geometry.fill",
"stylers": [
  { "weight": 0.1 },
  { "color": "#f3f6f7" }
]
  },{
"featureType": "road.highway",
"stylers": [
  { "color": "#b4b4ff" }
]
  },{
"featureType": "road.highway",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
  },{
"featureType": "road.highway",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#808080" }
]
  },{
"featureType": "poi.school",
"stylers": [
  { "color": "#f1f1f1" }
]
  },{
"featureType": "landscape.man_made",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#808080" },
  { "weight": 3.2 }
]
  },{
"featureType": "administrative",
"stylers": [
  { "color": "#808080" }
]
  },{
  },{
  }
  ]
map.setOptions({styles: styles});

  function initialize() {
    var raleigh = new google.maps.LatLng(35.77425, -78.639248);
    var mapOptions = {
      zoom : 17,
      minZoom : 17,
      center : raleigh,
      mapTypeId : google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    var cityPlaza;

    /*var RLINELayer = new google.maps.KmlLayer('http://caseymmiller.com/j586/MapsTest/RLINE.kml');
     RLINELayer.setMap(map);*/

    var plazaCoords = [
      new google.maps.LatLng(35.773893, -78.63854),
      new google.maps.LatLng(35.772944, -78.638594),
      new google.maps.LatLng(35.772962, -78.639345),
      new google.maps.LatLng(35.773884, -78.63928)
    ];

    cityPlaza = new google.maps.Polygon({
      paths : plazaCoords,
      strokeColor : "#33CCFF",
      strokeOpacity : 0.8,
      strokeWeight : 2,
      fillColor : "#33CCFF",
      fillOpacity : 0.35
    });
    cityPlaza.setMap(map);

    var parking = [
      ['Salisbury Deck', 35.775007, -78.640804],
      ['Cabarrus Deck', 35.774589, -78.640793],
      ['Hannover Deck', 35.774511, -78.640031],
      ['Convention Center Underground Deck', 35.773292, -78.639355],
      ['Performing Arts Deck', 35.772666, -78.641576],
      ['Charter Square Deck', 35.773893, -78.638551],
      ['Blount Street Deck', 35.776226, -78.637499],
      ['McDowell Street Surface Parking', 35.775303, -78.641673],
      ['Salisbury Parking Lot', 35.775442, -78.640814],
      ['Convention Center Parking Lot', 35.772553, -78.639527],
      ['Lenoir Street Parking Lot', 35.773231, -78.638207],
      ['Carrabus street Parking Lot', 35.774032, -78.63824]
    ];

    for (var i = 0; i < parking.length; i++) {
      createMarker(parking[i]);
    }

    var lineCoordinates = [new google.maps.LatLng(35.779742, -78.643389), new google.maps.LatLng(35.77438, -78.643733), new google.maps.LatLng(35.774259, -78.640396), new google.maps.LatLng(35.772953, -78.640482), new google.maps.LatLng(35.772866, -78.638465), new google.maps.LatLng(35.776879, -78.638315), new google.maps.LatLng(35.776766, -78.634989), new google.maps.LatLng(35.778097, -78.634883), new google.maps.LatLng(35.778202, -78.638209), new google.maps.LatLng(35.781178, -78.638059)];

    var lineSymbol = {
      path : google.maps.SymbolPath.CIRCLE,
      scale : 8,
      strokeColor : '#000'
    };

    line = new google.maps.Polyline({
      path : lineCoordinates,
      strokeColor : '#C82536',
      icons : [{
        icon : lineSymbol,
        offset : '100%'
      }],
      map : map
    });
    animateCircle();
  }

  function animateCircle() {
    var count = 0;
    var time = offsetId = window.setInterval(function() {
      count = (count + 1) % 2400;

      var icons = line.get('icons');
      icons[0].offset = (count / 24) + '%';
      line.set('icons', icons);
    }, 20);
  }

  function createMarker(parking) {
    var myLatLng = new google.maps.LatLng(parking[1], parking[2]);
    console.log(myLatLng.toUrlValue());
    var marker = new google.maps.Marker({
      position : myLatLng,
      map : map,
      icon : image, 
      title: parking[0],
    });
    return marker;
  }

</script>
 </head>
 <body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
 </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:12:43.247

您当前正在初始化地图之前设置新样式地图选项，这将不起作用......

因此，要么将 setOptions 行放在“map = ...”行之后，要么将样式包含在现有的 mapOptions 对象中：

```
var mapOptions = {
  zoom : 17,
  styles: styles,
  minZoom : 17,
  center : raleigh,
  mapTypeId : google.maps.MapTypeId.ROADMAP
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:30:43.913

根据[文件](https://developers.google.com/maps/documentation/javascript/styling?hl=en)

```
 <!DOCTYPE html>
<html>
  <head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html {
    height: 100%
  }
  body {
    height: 100%;
    margin: 0;
    padding: 0
  }
  #map_canvas {
    height: 100%
  }
</style>
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoiYR3lgzcF8CxuOwe7SYsJAPjZQXOhQQ&sensor=false"></script>
<script type="text/javascript">
  var line;
  var title;
  var map;
  var loc;
  var locations = [];
  var image = new google.maps.MarkerImage('parkingIconRed.png');

  var styles = [
  {
"featureType": "road.highway.controlled_access",
"stylers": [
  { "color": "#808080" }
    ]
  },{
"featureType": "road.local",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#80d9ff" },
  { "weight": 1.6 }
]
  },{
"featureType": "road.arterial",
"elementType": "geometry.fill",
"stylers": [
  { "color": "#d2d3ff" }
]
  },{
"featureType": "road.arterial",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
  },{
"featureType": "landscape.man_made",
"elementType": "geometry.fill",
"stylers": [
  { "weight": 0.1 },
  { "color": "#f3f6f7" }
]
  },{
"featureType": "road.highway",
"stylers": [
  { "color": "#b4b4ff" }
]
  },{
"featureType": "road.highway",
"elementType": "labels.text.stroke",
"stylers": [
  { "color": "#ffffff" }
]
  },{
"featureType": "road.highway",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#808080" }
]
  },{
"featureType": "poi.school",
"stylers": [
  { "color": "#f1f1f1" }
]
  },{
"featureType": "landscape.man_made",
"elementType": "geometry.stroke",
"stylers": [
  { "color": "#808080" },
  { "weight": 3.2 }
]
  },{
"featureType": "administrative",
"stylers": [
  { "color": "#808080" }
]
  },{
  },{
  }
  ]

  function initialize() {
    var raleigh = new google.maps.LatLng(35.77425, -78.639248);
    var mapOptions = {
      zoom : 17,
      minZoom : 17,
      center : raleigh,
      mapTypeId : google.maps.MapTypeId.ROADMAP,
      styles: styles
    }

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    var cityPlaza;

    /*var RLINELayer = new google.maps.KmlLayer('http://caseymmiller.com/j586/MapsTest/RLINE.kml');
     RLINELayer.setMap(map);*/

    var plazaCoords = [
      new google.maps.LatLng(35.773893, -78.63854),
      new google.maps.LatLng(35.772944, -78.638594),
      new google.maps.LatLng(35.772962, -78.639345),
      new google.maps.LatLng(35.773884, -78.63928)
    ];

    cityPlaza = new google.maps.Polygon({
      paths : plazaCoords,
      strokeColor : "#33CCFF",
      strokeOpacity : 0.8,
      strokeWeight : 2,
      fillColor : "#33CCFF",
      fillOpacity : 0.35
    });
    cityPlaza.setMap(map);

    var parking = [
      ['Salisbury Deck', 35.775007, -78.640804],
      ['Cabarrus Deck', 35.774589, -78.640793],
      ['Hannover Deck', 35.774511, -78.640031],
      ['Convention Center Underground Deck', 35.773292, -78.639355],
      ['Performing Arts Deck', 35.772666, -78.641576],
      ['Charter Square Deck', 35.773893, -78.638551],
      ['Blount Street Deck', 35.776226, -78.637499],
      ['McDowell Street Surface Parking', 35.775303, -78.641673],
      ['Salisbury Parking Lot', 35.775442, -78.640814],
      ['Convention Center Parking Lot', 35.772553, -78.639527],
      ['Lenoir Street Parking Lot', 35.773231, -78.638207],
      ['Carrabus street Parking Lot', 35.774032, -78.63824]
    ];

    for (var i = 0; i < parking.length; i++) {
      createMarker(parking[i]);
    }

    var lineCoordinates = [new google.maps.LatLng(35.779742, -78.643389), new google.maps.LatLng(35.77438, -78.643733), new google.maps.LatLng(35.774259, -78.640396), new google.maps.LatLng(35.772953, -78.640482), new google.maps.LatLng(35.772866, -78.638465), new google.maps.LatLng(35.776879, -78.638315), new google.maps.LatLng(35.776766, -78.634989), new google.maps.LatLng(35.778097, -78.634883), new google.maps.LatLng(35.778202, -78.638209), new google.maps.LatLng(35.781178, -78.638059)];

    var lineSymbol = {
      path : google.maps.SymbolPath.CIRCLE,
      scale : 8,
      strokeColor : '#000'
    };

    line = new google.maps.Polyline({
      path : lineCoordinates,
      strokeColor : '#C82536',
      icons : [{
        icon : lineSymbol,
        offset : '100%'
      }],
      map : map
    });
    animateCircle();
  }

  function animateCircle() {
    var count = 0;
    var time = offsetId = window.setInterval(function() {
      count = (count + 1) % 2400;

      var icons = line.get('icons');
      icons[0].offset = (count / 24) + '%';
      line.set('icons', icons);
    }, 20);
  }

  function createMarker(parking) {
    var myLatLng = new google.maps.LatLng(parking[1], parking[2]);
    console.log(myLatLng.toUrlValue());
    var marker = new google.maps.Marker({
      position : myLatLng,
      map : map,
      icon : image, 
      title: parking[0],
    });
    return marker;
  }

</script>
 </head>
 <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
 </body>
</html> 
```

# php - phpmailer交换服务器认证

> ID：13587983
> 
> 赞同：5
> 
> 时间：2012-11-27T15:53:09.357
> 
> 标签：php, phpmailer, exchange-server

我的邮件发送代码：

```
 $mail = new PHPMailer(true);
    $mail->IsSMTP();

    try {
        $mail->Host = 192.168.205.19;
        $mail->Port = 25;
        $mail->SMTPDebug  = 2;
        $mail->SMTPSecure = "tls";
        $mail->SMTPAuth = true;
        $mail->Username = "mymailadress@mysite.com";
        $mail->Password = "mypassword";

        $mail->From = "mymailaddress@mysite.com";
        $mail->FromName = "My Mail Address";
        $mail->SetFrom("mymailaddress@mysite.cm", "My Mail Address");

        $mail->AddAddress('toaddress@mysite.com');

        $mail->Subject = "Test for subject";
        $mail->MsgHTML("Test my mail body");

        if ($mail->Send()) {
            $result = 1;
        } else {
            $result = "Error: " . $mail->ErrorInfo;
        }
    } catch (phpmailerException $e) {
        $result = $e->errorMessage();
    } catch (Exception $e) {
        $result = $e->getMessage();
    }

    return $result; 
```

结果？

```
SMTP -> FROM SERVER:220 evo.callpex.int Microsoft ESMTP MAIL Service ready at Tue, 27 Nov 2012 17:45:24 +0200 
SMTP -> ERROR: Password not accepted from server: 535 5.7.3 Authentication unsuccessful 
```

我正在使用 PHPMailer 类发送邮件。和 SMTP。我正在连接到 Exchange 邮件服务器。但我有这个错误。

为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T04:45:09.683

可能是您使用的是管理员凭据。不知道为什么，但即使我也无法使用具有管理员凭据的 PHPMailer 发送邮件（可能有一些适用于管理员详细信息的安全措施）。尝试提供任何其他用户凭据，它将起作用。它适用于我的其他用户凭据。

而且，在您的代码中

```
 $mail->From = "mymailaddress@mysite.com";
  $mail->FromName = "My Mail Address";
  $mail->SetFrom("mymailaddress@mysite.cm", "My Mail Address"); 
```

$mail->SetFrom("mailid","name") 本身将设置 From & FromName 值。您无需再次设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-04T18:36:37.103

我认为你的变量`$mail->Host`应该是一个字符串`$mail->Host = '192.168.205.19';`，而不是没有引号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-28T11:15:00.353

我不知道这是否已排序，但交换服务器通常不支持 SMTP。我相信可以启用 SMTP 或创建 SMTP 连接器。

# sql - 如何使用 Oracle 中的 AL32UTF 字符集确定 CLOB 的长度（以字节为单位）？

> ID：13587990
> 
> 赞同：4
> 
> 时间：2012-11-27T15:53:38.510
> 
> 标签：sql, oracle, byte, clob, utf

有没有办法在 Oracle SQL 查询中找出特定字段值（可能超过 4000 个字符也可能不超过 4000 个字符）使用的字节数？

`dbms_lob.getLength()`返回字符数而不是字节数，我不能直接进行乘法运算，因为此字符集中每个字符的字节数是可变的。简要地想知道如何使用`dbms_lob.converttoblob()`，但这似乎需要 PL/SQL，我需要直接在单个查询中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:17:39.653

使用 Oracle 函数`LENGTHB()`得到这个结果。有一种方法可以通过 using`DBMS_LOB.CONVERTTOBLOB`和 use将 CLOB 转换为 BLOB `DBMS_LOB.GETLENGTH()`。这将不返回字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:29:24.603

由于我还没有收到满意的答案，我目前正在求助于使用`dbms_lob.getlength()`来获取字符数，然后乘以 2。这是基于此处关于 AL32UTF8 字符集的评论：

[https://forums.oracle.com/forums/thread.jspa?threadID=2133623](https://forums.oracle.com/forums/thread.jspa?threadID=2133623)

> 几乎所有字符都需要 2 个字节的存储空间，少数特殊字符需要 4 个字节的存储空间。

还没有证实这是多么真实，但这个人听起来好像他们知道他们在说什么，所以目前正在使用它作为“最佳猜测”。

# javascript - jQuery hasClass 返回 true 但 removeClass 不起作用？

> ID：13587991
> 
> 赞同：0
> 
> 时间：2012-11-27T15:53:39.797
> 
> 标签：javascript, jquery

这已得到修复。这是糟糕的编程。我两次调用该函数。因此它正在删除该类，但是当该函数第二次运行时，它正在读取该类。对不起我糟糕的编程，感谢大家的帮助。我喜欢stackoverflow，因为所有乐于助人的人！

好吧，所以我一直在试图弄清楚一些事情，但可能是我的感冒阻止了我解决它。我正在做的是当用户选择它添加一个类的东西时。但如果他们再次选择它，我想删除该课程。因此，我检查了元素 hasClass 是否返回 true，但是当我执行 removeClass 时，它什么也不做......

将 JS 修改为如下所示。为了表明我可以看到 Selectedindex 和 index 确实匹配，并且由于某种原因，“option-select”的 removeClass 被跳过/忽略。我可以将其更改为 removeClass("option") 并且它工作得很好但我不能 removeClass("option-selected")

```
$(obj.find('.option')).each(function(Selectedindex) {
    if ($(this).hasClass('option-selected') && Selectedindex == index) {
        $(this).removeClass('option-selected');
        console.log(Selectedindex+" == "+index);
    }
}); 
```

选择元素时将索引传递给函数。

这是一些 HTML

```
<div id="MultipleSelect-HTML" class="dropdown container" multiple="multiple" style="width: 100%;">
    <ul class="options" style="width: 100%; display: block; position: relative;">
        <li>
            <a class="option option-selected"> 
                <input class="option-value" type="hidden" value="0"> 
                <img class="option-image" src="http://cdn1.iconfinder.com/data/icons/inside/PNG/032x032/icontexto-inside-facebook.png"> 
                <label class="option-text" style="cursor:pointer;">Facebook</label> 
                <small class="option-description desc">Check out my Facebook page!</small>
            </a>
        </li>
        <li>
            <a class="option option-selected"> 
                <input class="option-value" type="hidden" value="1"> 
                <img class="option-image" src="http://cdn1.iconfinder.com/data/icons/inside/PNG/032x032/icontexto-inside-twitter.png"> 
                <label class="option-text" style="cursor:pointer;">Twitter</label> 
                <small class="option-description desc">Check out my Twitter page!</small>
            </a>
        </li>
        <li>
            <a class="option"> 
                <input class="option-value" type="hidden" value="2"> 
                <img class="option-image" src="http://cdn1.iconfinder.com/data/icons/inside/PNG/032x032/icontexto-inside-linkedin.png"> 
                <label class="option-text" style="cursor:pointer;">LinkedIn</label> 
                <small class="option-description desc">Check out my LinkedIn page!</small>
            </a>
        </li>
        <li>
            <a class="option"> <input class="option-value" type="hidden" value="3"> 
                <img class="option-image" src="http://cdn1.iconfinder.com/data/icons/inside/PNG/032x032/icontexto-inside-flickr.png"> 
                <label class="option-text" style="cursor:pointer;">Flickr</label> 
                <small class="option-description desc">I don't have a flicker Page :(</small>
            </a>
        </li>
    </ul>
</div> 
```

请记住，所有这些信息都是使用 javascript 动态生成的

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:54:53.080

你正在做 hasClass for`option-selected`但试图removeClass`dd-option-selected`

假设它是`dd-option-selected`，改变如下，

```
$(obj.find('.option')).each(function(Selectedindex) {
    if ($(this).hasClass('dd-option-selected') && Selectedindex == index)
        $(this).removeClass('dd-option-selected');
}); 
```

> 是的，解决了，谢谢......但它仍然无法正常工作。还有其他想法吗？——罗伯特·E·麦金托什
> 
> 如果这有 dd-option-selected 并且它没有删除类，则 Selectedindex 不等于 index – Vega

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:54:58.497

您正在检查`hasClass option-selected`但是`removing dd-option-selected`, `you should check dd-option-selected`。

你的条件是。

```
if ($(this).hasClass('dd-option-selected') && Selectedindex == index)
        $(this).removeClass('dd-option-selected'); 
```

如果您不确定类名和类名无关紧要，那么您可以使用 removeAttr 删除类

```
$(this).removeAttr('class'); 
```

# asp.net - 在 Trac 中使用没有 mime 类型的 Pygments 词法分析器？

> ID：13587992
> 
> 赞同：0
> 
> 时间：2012-11-27T15:53:44.247
> 
> 标签：asp.net, python, trac, pygments

我想让 Trac 为我的 aspx 文件着色，但我找不到让它工作的方法。我可以轻松地为大多数 Pygments 词法分析器添加 mime 类型/扩展映射，但 CSharpAspxLexer 没有分配的 mime 类型（请参阅[http://pygments.org/docs/lexers/#lexers-for-net-languages](http://pygments.org/docs/lexers/#lexers-for-net-languages)） . 我已经尝试了几件事，但我看不到没有 mime 类型将 [mimeviewers] 部分连接到 Pygments 的方法。CSharpLexer 自动工作并且看起来很棒，但仅适用于 .cs 文件（应该如此）。

我使用 Mercurial 作为存储库，因此无法手动设置 mime 类型；无论如何，这不是一个好的解决方案。我的 Trac 安装在 Windows 中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:32:47.843

我只是将它呈现为 XML，对于典型的 Windows .Net 开发的许多其他类似文件也是如此。我的映射如下所示：

```
[mimeviewer]
mime_map = text/xml:aspx:ascx:master:resx:config:sitemap:wsdl:disco:map:asmx:mxml:csproj, ... 
```

但是，我认为您也可以通过 pygments_modes 设置启用 aspx（并且您需要将其从 mime_map 中删除）：

```
[mimeviewer]
pygments_modes = text/plain:aspx-cs:7 
```

据我所知，它不会处理 ascx 和其他（非常）aspx 的近亲，所以我不使用该设置，因为我发现使用相同的词法分析器渲染所有变体更好。而且，我认为 XML 词法分析器工作得非常好。

# objective-c - 为什么财产会从本质上消失？Obj-C，可可

> ID：13587997
> 
> 赞同：0
> 
> 时间：2012-11-27T15:53:59.723
> 
> 标签：objective-c, cocoa, properties

我很困惑。我有一个带有用于存储项目详细信息的类的应用程序。称为`LEItem`。这些项目存储在带有标签的类的商店中`LEItemStore`。我有一个包含所有项目的表格的视图。这工作正常。如果您点击一行，它会将此消息发送到 LogbookFirstViewController。

```
 LogbookFirstViewController *logController = [[LogbookFirstViewController alloc] initForNewItem:NO];

    NSArray *items = [[LEItemStore sharedStore] allItems];
    LEItem *selectedItem = [items objectAtIndex:[indexPath row]];

    NSString *description = [selectedItem description];
    NSLog(@"%@", description);

    [logController setItem:selectedItem];
    [self dismissViewControllerAnimated:YES completion:nil]; 
```

那是在 TableView 类中。在 LogbookFirstViewController.m 我有

```
-(void)setItem:(LEItem *)i{
    item = i;
    NSString *t = [item description];
    NSLog(@"In LogbookFirstViewController, returning %@", t);
} 
```

这就是奇怪的地方。这样可行。它输出正确的项目，因此我认为一切都会好起来的。但事实并非如此。`item`是一个类级别的属性，所以它应该保留，但它没有。在同一个类中，我已经覆盖了这个方法。

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    //NSString *string = [item description];
    //NSLog(@"Item = %@", string);
    NSLog(@"View did Appear:animated");
    int glucoseValue = [item glucose];

    NSString *glucoseString = [NSString stringWithFormat:@"%d", glucoseValue];
    [glucoseField setText:glucoseString];

    int proteinValue = [item protein];
    NSString *proteinString = [NSString stringWithFormat:@"%d", proteinValue];
    [proteinField setText:proteinString];

    int carbsValuue = [item carbs];
    NSString *carbsString = [NSString stringWithFormat:@"%d", carbsValuue];
    [carbsField setText:carbsString];

    int insulinValue1 = [item insulin];
    NSString *insulin1String = [NSString stringWithFormat:@"%d", insulinValue1];
    [insulinField1 setText:insulin1String];

    int insulinValue2 = [item insulin2];
    NSString *insulinString2 = [NSString stringWithFormat:@"%d", insulinValue2];
    [insulinField2 setText:insulinString2];

    //NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    //[dateFormatter setDateStyle:NSDateFormatterShortStyle];
    //[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    //NSLog(@" The item was created on %@", [dateFormatter stringFromDate:[item dateCreated]]);
    //[dateButton setTitle:[dateFormatter stringFromDate:[item dateCreated]] forState:UIControlStateNormal];
    NSString *t = [item description];
    NSLog(@"Loading view... Returns: %@", t);
} 
```

我知道这不是最干净的代码，但想法是一样的。它使用与 setItem: 方法完全相同的代码。但是，这总是返回 (null)。为什么？该属性在 viewWillAppear 处似乎消失了。

谢谢。

**编辑**

我解决了这个问题。如您所见，下面的检查答案确实给出了正确的想法，这是我为解决它所做的。问题是当我发送 setItem: 我使用这段代码来获取 LogbookFirstViewController

```
 LogbookFirstViewController *logController = [[LogbookFirstViewController alloc] initForNewItem:NO]; 
```

据我所知，这创建了一个新的 LogbookFirstViewController 实例，因此，现有的没有更改它的 Item 属性，因为属性被分配给一个实例。因此，我只是更改了这个“不可见”属性的 Item 值。

要解决这个问题，必须获取 viewController 的现有实例。为此，我执行了以下操作：

在 LogbookFirstViewController.h 我添加了这个属性

```
@property (assign) LogbookFirstViewController *instance; 
```

然后，在您的 .m 中合成实例，并在同一个地方将其添加到 viewDidLoad

```
- (void)viewDidLoad
{
    instance = self;
    ... 
```

然后，在另一个 viewController，entryViewController 中，我也添加了这个 .h

```
@property (nonatomic, strong) LogbookFirstViewController *logController; 
```

合成它。然后，我以同样的方式使用了我的 didSelectRowAtIndexPath，只是使用了现有的 logController

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSArray *items = [[LEItemStore sharedStore] allItems];
    LEItem *selectedItem = [items objectAtIndex:[indexPath row]];

    NSString *description = [selectedItem description];
    NSLog(@"%@", description);
    NSLog(@"Setting controller: %@", logController);
    [logController setItem:selectedItem];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

然后它起作用了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:04:38.887

您在其中创建了一行，`LogbookFirstViewController`但实际上并没有导致它显示任何内容（推送或呈现）。由于它是一个局部变量，看起来该控制器的任何实例正在加载其视图都与您在显示的代码中初始化的那个不同。

您可以通过添加几个 NSLog 行来验证这一点，例如：

```
NSLog(@"Setting controller: %@", logController);  // Insert before existing line
[logController setItem:selectedItem]; 
```

...和...

```
[super viewWillAppear:animated];
NSLog(@"Viewing controller: %@", self);  // Insert after existing line 
```

为了让事情按照你想要的方式工作，那些必须打印相同的地址。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T15:58:10.333

在没有 ARC 的情况下将对象分配给属性时，您应该保留：

```
-(void)setItem:(LEItem *)i{
    _item = [i retain];
    ...
} 
```

如果您将属性与 ARC 一起使用，请编写`_item = i;`：

```
-(void)setItem:(LEItem *)i{
    _item = i;
    ...
} 
```

# opengl - 是否有任何 OpenGL 版本需要支持帧缓冲区对象？

> ID：13587998
> 
> 赞同：2
> 
> 时间：2012-11-27T15:53:59.243
> 
> 标签：opengl, fbo

任何版本的 OpenGL 标准都需要对帧缓冲区对象 (FBO) 的支持吗？或者它是一个纯粹的可选扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T16:00:19.467

[自3.0](http://www.opengl.org/wiki/Framebuffer_Object)以来，FBO 一直处于核心地位。