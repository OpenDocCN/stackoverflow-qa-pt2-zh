# StackOverflow 问答 13776000-13776999

# php - PHP Mysql空白日期字段值提交

> ID：13776002
> 
> 赞同：0
> 
> 时间：2012-12-08T08:59:42.667
> 
> 标签：php, mysql

在我的表单上，我有一个不是必填字段的日期字段。我的问题是，如果用户不填写此字段并且他们在 mysql db 上提交表单，而不是将字段留空，它将保存 1969-12-31 以及在同一天提交的任何后续表单如果该字段再次留空，则日期将从 1969-12-31 开始按升序排列。我要更改什么，以便 mysql 将该字段留空。谢谢阅读。

以下是代码：

```
<input id="nfud" name="nfud" type="date" class="input-small"/> 
```

Mysql提交查询

```
$nfud = date('Y-m-d', strtotime($_POST["nfud".$n.""]));
$query="insert into number_info (phone_number, data_plan, phone_used, fud, dealID) 
values ('".$nphone_number."','".$ndata_plan."','".$nphone_used."','".$nfud."','$dealID')";
        mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:03:41.160

如果您没有从表单中发布日期，只需将该字段留空：

```
if(isset($_POST["nfud$n"]) {
    $nfud = date('Y-m-d', strtotime($_POST["nfud$n"]));
} else {
    $nfud = "";
}
$query="insert into number_info (phone_number, data_plan, phone_used, fud, dealID) 
values ('".$nphone_number."','".$ndata_plan."','".$nphone_used."', '".$nfud."','$dealID')";
        mysql_query($query) or die(mysql_error()); 
```

编辑：试试这个让 MySQL 为你的列设置一个默认值

```
if(isset($_POST["nfud$n"]) {
    $nfud = date('Y-m-d', strtotime($_POST["nfud$n"]));
    $query="insert into number_info (phone_number, data_plan, phone_used, fud, dealID) 
            values ('".$nphone_number."','".$ndata_plan."','".$nphone_used."','".$nfud."','$dealID')";

} else {
    $query="insert into number_info (phone_number, data_plan, phone_used, dealID) 
            values ('".$nphone_number."','".$ndata_plan."','".$nphone_used."','$dealID')";
}

mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:05:21.407

这可以在 mysql 端使用默认设置和其他设置进行控制。

您可以在mysql中运行以下内容并分享结果吗？

```
SHOW CREATE TABLE number_info; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:02:01.050

在mysql中，给日期字段一个默认值0。

# css - html元素的纵横比（img标签内）

> ID：13776008
> 
> 赞同：1
> 
> 时间：2012-12-08T09:00:02.073
> 
> 标签：css, image, html

为什么会这样？以及如何解决？在我看来，IE 和 Opera 在所有情况下都可以正常工作，但在其他浏览器中的“高度”就不那么好了。

HTML：

```
<div class="image">
    <img class="data" src="http://www.jpeg.org//images/blue_large_05.jpg" alt=""/>
</div> 
```

CSS（高度）：

```
.image {
    overflow: hidden;        
    width: -moz-max-content;
    width: intrinsic;
    display: inline-block;

    height: 100px; //Is buggy
}

.data {
    width: 100%;
    height: 100%;
    float: left;
} 
```

CSS（宽度）：

```
.image {
    overflow: hidden;        
    width: -moz-max-content;
    width: intrinsic;
    display: inline-block;

    width: 200px;
}

.data {
    width: 100%;
    height: 100%;
    float: left;
} 
```

属性值*固有*&& *-moz-max-content*用于*display:block*中的正确宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:36:28.223

你应该把 height: **auto** ; 为图像。然后浏览器将计算正确的高度和图像将在正确的比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:04:06.903

我看不出它在做什么有什么意外。当您将 .img 高度设置为 100% 时，它会使其成为*父元素高度*的 100% 。在这种情况下，这将扭曲图像。

# c# - 我应该在哪里存储不同操作系统版本的临时应用程序数据？

> ID：13776013
> 
> 赞同：0
> 
> 时间：2012-12-08T09:01:26.233
> 
> 标签：c#, sql-server-ce, temp

我有一个在不同操作系统版本（如（`win XP,win 7,win 8`））上运行的应用程序。我有一个`.sdf`只读访问的数据库，我用于`Environment.SpecialFolder.Templates`临时路径。

```
Temp Path= Environment.GetFolderPath(Environment.SpecialFolder.Templates) 
```

它在 上工作正常，但在和上`win 7`返回错误（`permission denied`）。`win XP``win 8`

所以我想问“不同操作系统版本的应用程序数据库的推荐位置是什么？” 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:10:34.070

如果数据是用户特定的

```
Environment.SpecialFolder.ApplicationData 
```

否则，如果数据由应用程序的所有用户共享

```
Environment.SpecialFolder.CommonApplicationData 
```

# eclipse-plugin - 将 eclipse 4.2 插件嵌入浏览器（mozilla firefox）

> ID：13776014
> 
> 赞同：1
> 
> 时间：2012-12-08T09:01:34.997
> 
> 标签：eclipse-plugin

我已经使用 eclipse 4.2 制作了一个插件，现在我希望它嵌入浏览器（mozilla firefox）。我尝试了很多东西，但我找不到任何方法来解决这个问题..任何人都可以帮助我..

# c++ - For循环不会增加计数器'i'

> ID：13776015
> 
> 赞同：1
> 
> 时间：2012-12-08T09:01:38.700
> 
> 标签：c++, loops, for-loop, counter, increment

```
double n = 1.3243;
for (int i = 0; long(n*10) % 10 != 0; i++, n *= 10) {

} 
```

我编写这段代码是为了了解一个数字是否有小数部分。

在循环结束时，“i”应该是 4，但由于某种原因，计数器不会增加。

除了您可能不喜欢我的解决方案之外，您有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T09:13:49.680

在循环结束时， i 变量不再存在。您在函数范围内声明它。这导致无法在循环外访问它。如果您执行以下操作：

```
double n = 1.3243;
for (int i = 0; long(n*10) % 10 != 0; i++, n *= 10) {   
}
printf("%d\n", i); 
```

GGC 给了我一个`loop.cpp:10: error: name lookup of ‘i’ changed for new ISO ‘for’ scoping`错误。

以下将解决该问题（请注意，如果 for 循环为空，则它不需要大括号）：

```
double n = 1.3243;
int i;
for (i = 0; long(n*10) % 10 != 0; i++, n *= 10);
printf("%d\n", i); 
```

使用 GCC 4.2.1，这给了我输出`4`

但是在测试十进制数时，您提供的循环有一个不方便的错误。正如[src](https://stackoverflow.com/questions/13776015/for-loop-doesnt-increment-the-counter-i/13776112#comment18941226_13776015)在他的评论中所说，小数点中的零会取消它后面的任何小数点。一旦找到零值，循环就会中断，但后面可能会有更多小数。根据您正在处理的浮动类型，这可能是一个相当大的问题。

**请注意：**最常见的解决方案是以下比较：

```
double n = 1.3243;
if (n == (int)n) {
    // do stuff
} 
```

这修复了 src: `1.01`is said to have decimals 出现的错误，就像它应该的那样。循环解决方案（错误地）`i=0`为此浮点数返回。

`n == (int)n`当您的浮点数没有任何小数部分时，比较返回 true。

正如[H2CO3 所提到](https://stackoverflow.com/questions/13776015/for-loop-doesnt-increment-the-counter-i/13776112#comment18941115_13776015)的，测试浮点数的小数并不是 100% 确定的，因为浮点舍入可能会给您一个与您预期的略有不同的答案。但是，它适用于一般情况，因此您必须自己查看它是否适合您正在解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:16:38.293

你的代码工作正常。i =0 , n = 1.3243 .. i =1 , n = 13.243 .. i =2 , n = 123.43 .. i =3 , n = 1234.3 如果你在 for 循环之外声明“i”然后终止你会得到它。

# java - 默认情况下接口是否扩展对象？

> ID：13776018
> 
> 赞同：19
> 
> 时间：2012-12-08T09:02:12.997
> 
> 标签：java

如果您定义如下所示的接口

```
interface I1{

} 
```

在任何代码部分中，您都可以像这样编写

```
I1 i1;
i1.equals(null); 
```

那么equals方法从何而来，接口是否也扩展了超类Object？如果是这样，接口如何扩展一个类？

假设让接口扩展超类 Object ，那么如果你明白为什么像 Set 这样的集合接口定义了 equals() 和 hashCode() 方法？所有类都扩展了 Object 类，因此如果您在 Object 类中存在的接口中定义任何抽象方法，那么实现该接口的人无需实现这些方法。就像在下面的代码中

```
interface I1{
String toString();
}

class A implements I1{

} 
```

在这里，类 A 不需要实现方法 toString() ，因为它存在于 Object 类中。那么在集合接口中定义这些方法的目的是什么，因为它们不能强制实现类实现这些方法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-08T09:04:54.703

> 那么equals方法从何而来，接口是否也扩展了超类Object？如果是这样，接口如何扩展一个类？

Java 语言规范明确地处理了这个问题。

从[第 9.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2)：

> If an interface has no direct superinterfaces, then the interface implicitly declares a public abstract member method m with signature s, return type r, and throws clause t corresponding to each public instance method m with signature s, return type r, and throws clause t declared in Object, unless a method with the same signature, same return type, and a compatible throws clause is explicitly declared by the interface.

Basically, this is so that you *can* use `equals`, `hashCode` etc - because the way that the Java language is specified means that any concrete implementation of the interface *will* be a class, and that class *must* ultimately be a subclass of `Object`, so the members will definitely be present.

To put it another way, while the interface itself doesn't extend `Object`, it is known that any implementation will.

> Here the class A no need to implements the method toString() as it's present in Object class. Then what is the objective of defining those method in collection interface as they can't force there implementation class to implement those method.

Usually this is just done for clarity, e.g. to document what is expected of an implementation in terms of the members declared in `Object`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T09:05:05.190

Every class implicitly extends `Object` and so inherits every (non-private) method of the Object class.

Every instance has a class and therefore has all of the method of Object.

Whether an instance implements an interface or not is completely irrelevant to this point.

Object is a class, and interfaces can not extend classes, so "no" - the interface doesn't inherit anything from any class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T07:53:41.817

A Java Interface does not extend the `java.lang.Object` class but instances of objects that implement the interface extend the Object class otherwise if Java Interfaces allowed to extend the `java.lang.Object` class then Java would support multiple inheritance of which it does not in its language specification.

Consider the scenario below:

```
interface MyInterface
{ 
   // interface methods here
}
MyClass extend java.lang.Object implements MyInterface
{ 
   // override methods or interface method implementations
} 
```

Now if MyInterface extends `java.lang.Object` class then that would mean the MyClass would also be extending the MyInterface interface by construction creating multiple inheritance. So makes sense that Java interfaces do not extend the `java.lang.Object` class as this would create chaos due to multiple inheritance.

# asp.net - 加载 GIF 图像时出现 Asp.net 错误

> ID：13776021
> 
> 赞同：0
> 
> 时间：2012-12-08T09:02:32.167
> 
> 标签：asp.net, gif

我有一个返回图像响应的 aspx 页面我从查询字符串中读取了所需的图像和大小，然后打开它并重绘到具有新大小的新图像，它适用于 .png .bmp .jpg 但在尝试加载 gif 时图像抛出异常。

```
Image img = System.Drawing.Image.FromFile(imgPath); 
```

结果异常是

```
System.OutOfMemoryException: Out of memory. at System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement) 
```

我试过了

```
Image img = new Bitmap(imgPath); 
```

结果异常是

```
System.ArgumentException: Parameter is not valid. at System.Drawing.Bitmap..ctor(String filename) 
```

这只发生在 gif 图像上，我尝试了许多工作 gif 图像文件，图像没有损坏，它们在 Windows 资源管理器和查看器上工作正常，并使用绘画保存

我也尝试了小 gif 图像（〜= 1k），问题仍然存在

我尝试了一个 Windows 应用程序，没有发现异常，它运行良好，异常只出现在 asp.net 上

问题是什么？

# iphone - 检测滚动视图上的图像

> ID：13776026
> 
> 赞同：1
> 
> 时间：2012-12-08T09:02:50.067
> 
> 标签：iphone, objective-c, ios, xcode

请帮助我，当我滚动它时检测哪个图像在滚动视图上。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
NSArray *colors = [[NSArray alloc] initWithObjects:@"ip1.jpg", @"ip2.jpg", @"ip3.jpg", @"ip4.jpg", @"ip5.jpg", @"ip6.jpg", @"ip7.jpg", @"ip8.jpg", @"ip9.jpg", @"ip10.jpg",@"ip11.jpg",@"ip12.jpg",@"ip13.jpg",@"ip14.jpg",@"ip15.jpg",@"ip16.jpg",@"ip17.jpg",@"ip18.jpg",@"ip19.jpg",@"ip20.jpg",@"ip21.jpg", nil];

    NSMutableArray *imgArray = [[NSMutableArray alloc] init];
    UIImageView *tempImageView;
    for(NSString *name in colors) {
        tempImageView = [[UIImageView alloc] init];
        tempImageView.contentMode = UIViewContentModeScaleAspectFill;
        tempImageView.image = [UIImage imageNamed:name];
        [imgArray addObject:tempImageView];

    }

    CGSize pageSize = scrollView.frame.size; // scrollView is an IBOutlet for our UIScrollView
    NSUInteger page = 0;
    for(prevView in imgArray) {

        [scrollView addSubview:prevView];

        // This is the important line
        prevView.frame = CGRectMake(pageSize.width * page++ + 30, 0, pageSize.width - 60, pageSize.height);
 }   

    scrollView.contentSize = CGSizeMake(pageSize.width * [imgArray count], pageSize.height);

}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    if (!pageControlBeingUsed) {
        // Switch the indicator when more than 50% of the previous/next page is visible
        CGFloat pageWidth = self.scrollView.frame.size.width;
        int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        self.pageControl.currentPage = page;

    }
} 
```

请帮帮我。如果我使用 slog 来显示 CurrentPage，它会向我显示“117892”，我只需要一个 NSLog 来显示我的“颜色”NSArray 中的当前图像。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:11:00.050

试试这个，你可以将“page”变量声明为全局变量，然后按代码所示传递

```
NSLog(@"%@",[colors objectAtIndex:page]); 
```

# python - python在开始运行时真正做了什么？

> ID：13776028
> 
> 赞同：1
> 
> 时间：2012-12-08T09:03:00.293
> 
> 标签：python, syntax-error

我了解到 SyntaxError 是唯一无法捕获的错误。例如：

```
if __name__ == "__main__":
    print "main running"  
    try:
        for i in range(3):
    except SyntaxError,e:
        print "error caught"
    finally:
        print "i am here" 
```

好吧，我希望可以显示打印“主要运行”，那么python不会在运行之前检查所有语法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:04:22.087

Python首先将代码*编译*为字节码。如果失败，`SyntaxError`则引发 a，表示编译失败。

因此，您无法从本身*具有*语法错误`SyntaxError`的模块中捕获异常。由于 Python 会根据需要编译文件，因此您*可以*捕获导入模块的异常。**`SyntaxError`**

 **以下打印`Failed to import test`：

*测试.py*

```
print, 
```

*捕获语法错误.py*

```
try:
    import test
except SyntaxError:
    print 'Failed to import test' 
```

然后运行`python catchsyntaxerror.py`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:12:38.820

在运行时无法检测到`SyntaxError`，因为无效的语法会损害整个模块的有效性，而不仅仅是作者认为犯了错误的特定行。由于解释器不了解作者的意图，因此在未能阅读源代码后唯一能做的就是引发错误。

正如 Martin Pieters 所回答的那样，故障发生在 Python 读取整个模块并在运行之前将其编译到内存的编译步骤。然而，即使没有单独的编译步骤，在运行时捕获内联语法错误的潜在问题仍然存在。

要在同一模块内的运行时捕获语法错误，必须将错误代码与周围代码隔离开来。这可以使用`exec`语句或`eval`函数来完成：

```
>>> try:
...     exec """
... this doesn't work  
... """
... except SyntaxError:
...     print "fail"
... 
fail 
```

要捕获导入模块中的语法错误，只需将`try`/放在语句`except`周围。`import`**

# go - golang - 网络游戏中的主循环

> ID：13776030
> 
> 赞同：1
> 
> 时间：2012-12-08T09:03:12.233
> 
> 标签：go

我现在才开始修补 Go 大约一个星期，并且对它印象深刻。但是，我仍然有一些我无法解决的问题。

现在的主要问题是，虽然我的连接处理代码正常工作，但我想添加一个独立于连接循环的主游戏循环。如何做到这一点？

```
package main

import (
  "fmt"
  "net"
  "strconv"
  "time"
  "galaxy"
)

const PORT = 5555

func main() {
  playerFactory := galaxy.NewPlayerFactory()

  server, err := net.Listen("tcp", ":" + strconv.Itoa(PORT))
  if server == nil {
    panic("listen failed: " + err.Error() + "\n")
  } else {
    defer server.Close()
  }

  // main loop  
  go func() {
    for {   
      // entity updates
      playerFactory.Update()
    }
  }() // adding this just blocks everything after the goroutine

  // connection handling
  for {
    conn, err := server.Accept()
    if err != nil {
      fmt.Printf("client error: %s\n", err.Error())
    } else {
      playerFactory.CreatePlayer(conn)
    }
  }

} 
```

以当前编写的方式运行主循环（这是我要添加的部分），但连接处理代码被忽略。这是使用渠道来传递控制权的地方吗？我确信解决方案对于经验更丰富的 Go 程序员来说是显而易见的，我期待您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:09:51.170

如果`playerFactory.Update()`从不释放 CPU（例如通过阻塞资源），则无法保证其他 goroutine 运行

您可以尝试更改[GOMAXPROCS](http://golang.org/pkg/runtime/#GOMAXPROCS)但这取决于您的 CPU 数量，并且该问题稍后会在其他非阻塞 goroutine 中再次出现。

而且我看不出有任何理由让游戏循环不间断地运行。最常见的情况是您必须定期做某事。

在这种情况下，您的代码将是

```
 // main loop  
  go func() {
     timer := time.Tick(100 * time.Millisecond)
     for now := range timer {   
         // entity updates (you could use now for physic engine calculs)
         // this is called every 100 millisecondes
         playerFactory.Update()
     }
  }() 
```

# html - 垂直对齐到绝对定位的元素

> ID：13776037
> 
> 赞同：1
> 
> 时间：2012-12-08T09:03:58.650
> 
> 标签：html, css

我试图对齐两个相对于容器元素绝对定位的元素，但我不明白为什么在应用相同的顶部值时，其中一个元素（ul）会下降一点。[你可以在这里](http://jsfiddle.net/BbYuM/)看到它

我有以下 HTML：

```
<div id="header">
    <div class="inner">
        <span id="logo_description"> Description comes here </span>
        <ul id="user_menu">
            <strong>name</strong> | 
            <a href="#"> Account </a> |
            Language
            <select> 
                <option> Option1 </option>
                <option> Option2 </option>
            </select>                
        </ul>
    </div>
</div> 
```

以及以下 CSS：

```
#header {
    float: left;
    margin-bottom: 15px;
    padding: 8px 0 13px;
    width: 100%;
    height: 51px;
}

#header .inner {
    margin: 0 auto;
    position: relative;
    width: 1000px;
}

#header .inner #logo_description {
    position:absolute;
    top:20px;
}

#header #user_menu {
    display: inline;
    font-size: 12px;
    position: absolute;
    right: 10px;
    top: 20px;
    text-align: right;
}​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:07:20.337

您的浏览器可能正在向 ul 元素添加额外的填充。Mozilla因此而臭名昭著。

检查元素以检查填充。

例如，这将从 chrome 中删除默认填充。

```
-webkit-padding-start:0px; 
```

# python - python lt方法

> ID：13776039
> 
> 赞同：-4
> 
> 时间：2012-12-08T09:04:14.030
> 
> 标签：python, oop

我对下一个 python 代码有疑问。

```
class A(object):
    id = 1
    def __init__(self):
        self.id = A.id
        A.id += 1
    def getId(self):
        return self.id
    def __lt__(self, other):#This method is interested
        return self.id < other.id
class B(A):
    def __init__(self):
        self.id = 1 
```

然后我测试它

```
a1 = A()
a2 = A()
b1 = B()
b2 = B()
print a1.getId(),
print a2.getId(),
print b1.getId(),
print b2.getId(),
print a1.id == a2.id,b1.id == b2.id 
```

并查看结果“1 2 1 1 False True”如何仅更改`__lt__`A 中 B 实例的 id 不同的 - 方法（即可以看到“False False”而不是“1 2 1 2 False False”）？是否可以？B 必须相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:33:10.320

我要大胆猜测你想做什么。

在我看来，您希望 "==" 测试两个对象是否是相同的对象，而不是测试两个对象具有相同的值。

但你不需要那个。要在 Python 中测试两个对象是否相同，请使用`is`运算符。像这样：

```
>>> class A(object):
...     def __init__(self, id):
...         self.id = id
...     def __eq__(self, o):
...         return self.id = o.id
... 
>>> a = A(1)
>>> b = A(1)
>>> 
>>> a == b
True
>>> a is b
False
>>> a = b
>>> a is b
True 
```

通过这种方式，您可以`==`用来测试值（即本例中的 id）是否相同，同时仍然可以看到它不是同一个对象。

# sql - 如何在表结构中移动列位置。可能吗？

> ID：13776046
> 
> 赞同：-1
> 
> 时间：2012-12-08T09:05:02.300
> 
> 标签：sql, sql-server, ssms

我有一张桌子

> **身份证 | 客户ID | 联系方式 | 标签 | 电子邮件 | 指定**

我想`Designation`移到`ClientID`列旁边。

> **身份证 | 客户ID | 名称 | 联系方式 | 标签 | 电子邮件**

是否有我不知道的 SQL 查询或 SQL Server 存储过程来执行此操作？否则，我计划创建具有所需结构的新表，复制数据（少量记录）并删除原始表。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:07:23.317

我认为你不需要改变列的顺序。其实根本没关系。表只是记录的容器。您需要做的就是按照您想要的顺序选择列，例如

```
SELECT ID, ClientID, Designation, Contact, Tag, Email
FROM tableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:12:57.947

您可以使用视图。视图包含行和列，就像真实的表一样。视图中的字段是来自数据库 ( [w3school](http://www.w3schools.com/sql/sql_view.asp) ) 中一个或多个真实表的字段：

```
CREATE VIEW myOrderedTable
AS
SELECT ID, ClientID, Designation, Contact, Tag, Email
FROM tableName; 
```

# html - HTML：使用 getElementById 更改表格颜色

> ID：13776051
> 
> 赞同：2
> 
> 时间：2012-12-08T09:05:19.013
> 
> 标签：html, getelementbyid

```
<HTML>
<HEAD>
</HEAD>
<BODY>
<div id="outputDiv"></div>
    <script language="JavaScript">
        document.getElementById("outputDiv").innerHTML = "";
        var HTML = "";
        HTML = "<table border=1><tr><td id='1'>1</td><td id='2'>2</td><td id='3'>3</td></tr></tabele>";
        document.getElementById("outputDiv").innerHTML = HTML;

        document.getElementById('2').innerHTML = '<td id=1 bgcolor="red">5</td>';
    </script>
</BODY> 
```

我使用 Javascript 制作表格。我想更改某些单元格的背景颜色，所以我使用 getElementById。我可以更改其文本值，但不能更改单元格的背景颜色。有谁知道这个问题？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-08T09:09:54.853

如果您想在没有 jQuery 的情况下在 Javascript 中执行此操作，只需使用以下命令：

```
document.getElementById('2').style.backgroundColor="red"; 
```

`style`使用返回的对象的属性，`getElementById()`或者`getElementByClass()`您可以更改 CSS 样式。

工作[jsfiddle](http://jsfiddle.net/vbLac/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T09:09:11.763

你想改变一些单元格的背景颜色...？？现在不要让我开始使用您的代码。老好人怎么了

`$('selector').css('backgroundColor','red')`

这里的选择器是指要选择的html元素。在您的情况下，它必须选择表格单元格。

为什么你还在使用 bgcolor？css怎么了？？？拿一些新书。

# android - 简单的字符串比较在 bash 脚本中不起作用

> ID：13776052
> 
> 赞同：1
> 
> 时间：2012-12-08T09:05:32.743
> 
> 标签：android, bash

我有一个简单的 bash 脚本。

```
# Which display is HDMI ?
for i in `seq 0 $displayLoopCounter`
do
    name=$(adb shell cat /sys/devices/platform/omapdss/display$i/name)

    if [ "$name"=="hdmi" ] ; then
        echo "$name"
        hdmiDisplay="display$i"
    fi
done 
```

我的 scipt 的输出：

```
dvi

hdmi 
```

我正在使用**bash myscript.sh运行脚本**

display0 是 dvi

display1是hdmi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:27:04.387

这就是问题所在：`[ "$name"=="hdmi" ]`-- 条件表达式根据它看到的参数数量进行某些测试。当只有一个参数时，如您在此处所使用`[`的，如果字符串非空，则返回 true - 这里，无论 $name 的值如何，表达式`"$name"=="hdmi"`将始终为非空。

你需要

```
if [ "$name" == hdmi ]; then ... 
```

空格在 shell 语言中非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:23:19.307

您的问题在于您的行中没有`==`空格`if`。这使它成为`bash`联机帮助页声明的单参数表达式：

> 1 个参数：当且仅当参数不为空时，表达式才为真。

如果您运行以下脚本（在 周围没有空格`==`）：

```
#!/bin/bash
echo Hello >myfile0
echo fileData >myfile1
counter=1
for i in `seq 0 $counter`
do
    name=$(cat myfile$i)
    if [ "$name"=="fileData" ]; then
        echo $name
    fi
done
rm myfile[01] 
```

你会看到输出有两行，`Hello`和`fileData`. 把空格放进去，你会得到只是`fileData`因为同一个联机帮助页指出：

> 3 个参数：如果第二个参数是上面在条件表达式下列出的二元条件运算符之一，则表达式的结果是使用第一个和第三个参数作为操作数的二元测试的结果。

# ios - IOS SQLite 为特殊字符返回 NULL，例如 ö

> ID：13776056
> 
> 赞同：1
> 
> 时间：2012-12-08T09:06:14.710
> 
> 标签：ios, sqlite

我在从 SQLite 数据库读取数据时遇到问题。问题在于特殊字符，例如“ö”。

要创建我使用的查询语句：

```
// create sql statement 
const char *sqlStatement = [[NSString stringWithFormat:@"select * from Table"] UTF8String];

// to read different rows
if ((char *)sqlite3_column_text(compiledStatement, 0)!=NULL){
string = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement,        0)];} 
```

但是，如果有任何特殊的重音字符 - 这将导致字符串输出为 NULL。数据通过 php 脚本输入到 SQLite 数据库，然后通过 URL 请求上传到应用程序。如果使用没有重音符号的标准字符，它可以正常工作。

建议表示赞赏。

# android - 将arraylist设置为微调器的方法

> ID：13776063
> 
> 赞同：4
> 
> 时间：2012-12-08T09:07:52.443
> 
> 标签：android, arraylist, spinner

下面是我的代码。但它表明这是不可能的。有人可以建议我如何将数组列表设置为微调器，而不是将简单数组设置为微调器。下面是我的代码。

```
ArrayList<String> categoryList = new ArrayList<String>(); 
```

//这里我有代码将字符串值设置为arraylist

//下面是我尝试设置数组列表的代码，但它显示“**构造函数 ArrayAdapter(new Runnable(){}, int, ArrayList) 未定义**”

```
Spinner spinnerCategory = (Spinner)findViewById(R.id.spinnercategory);
                    ArrayAdapter<String> categoriesAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categoryList); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:10:54.967

请使用Activity的Context作为ArrayAdapter的第一个参数，可以使用

`ActivityName.this`而不是`this`，其中 ActivityName 是活动类的名称。看来您正在某个 Runnable 或 Thread 类中运行此代码，所以现在，`this`它是一个`Runnable`对象的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T09:15:03.687

使用以下 -

```
Spinner spinnerCategory = (Spinner)findViewById(R.id.spinnercategory);
                ArrayAdapter<String> categoriesAdapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_item, categoryList); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:13:34.407

使用自定义适配器并根据您的数据实现它。这只是一个不工作的示例代码。

```
 Spinner spinnerCategory = (Spinner)findViewById(R.id.spinnercategory);
          spinnerCategory.setAdapter( new SpinnerAdapter() {

            @Override
            public void unregisterDataSetObserver(DataSetObserver observer) {
                // TODO Auto-generated method stub

            }

            @Override
            public void registerDataSetObserver(DataSetObserver observer) {
                // TODO Auto-generated method stub

            }

            @Override
            public boolean isEmpty() {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public boolean hasStableIds() {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public int getViewTypeCount() {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public int getItemViewType(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public Object getItem(int arg0) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public View getDropDownView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub
                return null;
            }
        }); 
```

# php - 写 if else 语句的更短的方法？

> ID：13776065
> 
> 赞同：0
> 
> 时间：2012-12-08T09:08:07.090
> 
> 标签：php, if-statement

```
<?php
  $typeface = $page->typeface();
    if($typeface == '') {
  } else {
      echo '<li><span>Typeface: </span>'.$typeface.'</li>';
  }
?> 
```

我最初尝试了下面的 PHP 代码，但它仍然会输出 HTML：
`<li><span>Typeface: </span></li>`即使字符串为空。

```
<?php $typeface =  $page->typeface(); 
  if (!empty($typeface)): ?>
    <li><span>Typeface: </span><?php echo $typeface ?></li> 
  <?php endif; ?> 
```

所以我的问题是，我怎样才能以更短的方式在最顶部编写代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:09:42.123

```
$typeface = trim($page->typeface());
if($typeface != '')
    echo '<li><span>Typeface: </span>'.$typeface.'</li>'; 
```

编辑：（删除新行）

```
$typeface = trim(str_replace(array("\r", "\r\n", "\n"), '', $page->typeface()));
if($typeface != '')
    echo '<li><span>Typeface: </span>'.$typeface.'</li>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:16:09.730

试试这个

```
(isset($typeface) && !empty($typeface))?echo "<li><span>Typeface: </span>".$typeface."</li>":""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:19:00.627

```
($typeface=="")?echo "":echo '<li><span>Typeface: </span>'.$typeface.'</li>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T09:22:30.573

根据`$page->typeface()`方法的返回类型和代码的位置（看起来你在模板视图上），我可能会选择：

```
<?php if ($typeface === $page->typeface()): ?>
    <li><span>Typeface: </span><?=$typeface?></li>
<?php endif; ?> 
```

PHP文档在这里：

[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

[请参阅此处](https://stackoverflow.com/a/200666/922323)`<?=...?>`了解使用短标签时应注意的事项。

一个替代方案`<?=...?>`是：`<?php echo $typeface; ?>`.

希望有帮助！

* * *

# 编辑：

实际上，我早些时候对自己进行了第二次猜测（我责怪睡眠不足）。我最初有这个代码（除了`trim()`）：

```
<?php if ($typeface = trim($page->typeface())): ?>
    <li><span>Typeface: </span><?=$typeface?></li>
<?php endif; ?> 
```

我在哪里设置`$typeface`变量`if()`。这种技术应该将您的代码缩短一行。

这是一个使用简单字符串的工作示例：

```
<?php $foo = ""; ?>
...
<?php if ($typeface = trim($foo)): ?>
    <li><span>Typeface: </span><?=$typeface?></li>
<?php endif; ?> 
```

...输出：没有。

```
<?php $foo = 'I\'m a string!'; ?>
...
<?php if ($typeface = trim($foo)): ?>
    <li><span>Typeface: </span><?=$typeface?></li>
<?php endif; ?> 
```

...输出：（`<li><span>Typeface: </span>I'm a string!</li>`显然，缺少开头和结尾`<ul></ul>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T09:37:38.307

试试这个..

```
$typeface = $page->typeface();
echo $res=($typeface != '')?'<li><span>Typeface: </span>'.$typeface.'</li>':''; 
```

# java - 试图从一个用哈希表中的字符串填充的 ArrayList 中找到一个字符串的 indexOf，只返回 -1

> ID：13776066
> 
> 赞同：0
> 
> 时间：2012-12-08T09:08:06.907
> 
> 标签：java

我正在尝试从 ArrayList 中获取特定字符串的 indexOf，但在进行检查时该字符串不匹配。我正在用下面的代码从哈希表中填充 StringList。

```
stringList = new ArrayList<String>

Set st = hashtable.keySet();
Iterator itr = st.iterator();
while(itr.hasNext())
{
  stringList.add(((String)itr.next()).trim());
} 
```

我想从stringList中获取的字符串是用户输入的，字符串一般是“！Xxxx ##:##:## xx”，如果这有什么不同的话。我知道字符串匹配，因为我通过打印出 stringList 来直观地测试它。所以我认为它类似于 == 和 .equals()。

我还通过使用哈希表中的特定字符串填充 stringList 并使用下面的代码进行了测试，它总是返回 false。

```
String keyString = "! Xxxx ##:##:## xx";
if(stringList.get(0).equals(keyString))
   System.out.println("true");
System.out.println("false"); 
```

所以我想弄清楚如何让下面的代码工作

```
stringList.indexOf(keyString) 
```

因为它只返回它应该返回的 -1，因为它没有看到字符串相等。我做错了什么阻止了我正在寻找的输出，这将是我认为它应该返回的正确索引，因为我正在输入 stringList 正在打印的内容。就像我之前说的，我认为这是 .equals() 的问题，但据我所知，indexOf 在查找索引以及查看我自己测试 .equals() 的结果时使用了 .equals()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:12:01.360

> 我知道字符串匹配，因为我通过打印出 stringList 来直观地测试它。

这大概就是问题所在。可能有各种微妙的方式，其中字符串实际上*并不*相等，而随意检查不会显示出来。例如，如果您有尾随的 Unicode NULL 字符 (U+0000)，这些字符可能不会显示，并且还有其他非打印字符。

我建议您迭代`stringList`打印字符串的*长度*以及内容 - 然后`keyString`也打印长度。

另请注意，此代码：

```
String keyString = "! Xxxx ##:##:## xx";
if(stringList.get(0).equals(keyString))
   System.out.println("true");
System.out.println("false"); 
```

... 将*始终*打印`false`（假设没有例外）。当然，它也*可以*打印`true`——但您是在*无条件*打印`false`。写起来会简单得多：

```
String keyString = "! Xxxx ##:##:## xx";
System.out.println(stringList.get(0).equals(keyString)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:19:11.113

正如乔恩所说，两个字符串的实际字符可能存在差异，这在视觉上不会出现。

通过两个应该等于下面方法的String就知道问题出在哪里了：

```
public void dumpString(String s) {
    System.out.println("String: " + s);
    System.out.println("Length: " + s.length());
    System.out.print("Chars: ");
    for (int i = 0; i < s.length(); i++) {
        System.out.print((int) s.charAt(i));
        System.out.print(' ');
    }
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:11:43.397

您添加到 stung 列表中的字符串将被修剪，因此任何尾随或前导空格都将被删除。如果初始字符串有空格，这可能是您的问题。尝试删除 .trim() 看看是否有帮助。

# c - 在我的 DCT / IDCT 代码中找不到错误

> ID：13776068
> 
> 赞同：2
> 
> 时间：2012-12-08T09:08:12.000
> 
> 标签：c, image-processing

我正在对 512 * 512 的原始图像进行 DCT/IDCT，

但是我的程序可以输出只有 PSNR 17.54db 的图像，

我已经检查了几次我的公式，有人可以帮我解决这个问题吗？

[这是原图](http://i.stack.imgur.com/WoCMH.png)

[IDCT后](http://i.stack.imgur.com/hx66I.png)

```
#include <stdio.h>
#include <math.h>
#define N 512

double COS[8][8], C[8];
unsigned char pic[N][N];
double dct[N][N], idct[N][N];

void init() {
  int i, j;
  for (i = 0; i < 8; i++) {
    for (j = 0; j < 8; j++)
      COS[i][j] = cos((2 * i + 1) * j * acos(-1) / 16.0);
    if (i) C[i] = 1;
    else C[i] = 1 / sqrt(2);
  }
}

void DCT() {
  freopen("dct.raw", "wb", stdout);
  int r, c, i, j, x, y;
  for (r = 0; r < 64; r++)
    for (c = 0; c < 64; c++)
      for (i = 0; i < 8; i++)
        for (j = 0; j < 8; j++) {
          double sum = 0;
          for (x = 0; x < 8; x++)
            for (y = 0; y < 8; y++)
              sum += (pic[r * 8 + x][c * 8 + y] - 128) * COS[x][i] * COS[y][j];
          sum *= C[i] * C[j] * 0.25;
          if (sum < 0) sum = 0;
          if (sum > 255) sum = 255;
          dct[r * 8 + i][c * 8 + j] = sum;
      }
  for (r = 0; r < N; r++)
    for (c = 0; c < N; c++)
      putchar(dct[r][c]);
}

void IDCT() {
  freopen("idct.raw", "wb", stdout);
  int r, c, i, j, x, y;
  for (r = 0; r < 64; r++)
    for (c = 0; c < 64; c++)
      for (i = 0; i < 8; i++)
        for (j = 0; j < 8; j++) {
          double sum = 0;
          for (x = 0; x < 8; x++)
            for (y = 0; y < 8; y++)
              sum += C[x] * C[y] * dct[r * 8 + x][c * 8 + y] * COS[i][x] * COS[j][y];
          sum *= 0.25;
          sum += 128;
          if (sum < 0) sum = 0;
          if (sum > 255) sum = 255;
          idct[r * 8 + i][c * 8 + j] = sum;
      }
  for (r = 0; r < N; r++)
    for (c = 0; c < N; c++)
      putchar(idct[r][c]);
}

int main() {
  freopen("Lena.raw", "rb", stdin);
  int r, c;
  for (r = 0; r < N; r++)
    for (c = 0; c < N; c++)
      scanf("%c", &pic[r][c]);
  init();
  DCT();
  IDCT();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:29:32.560

问题是 DCT 代码中的这些行

```
 if (sum < 0) sum = 0;
      if (sum > 255) sum = 255; 
```

您将 DCT 值限制为 0 <= value <= 255

他们可能不是。例如，会有负系数。尝试删除这些行，看看是否有帮助

# c# - ObservableCollection - 绑定到 HierarchicalDataTemplate 显示类型

> ID：13776069
> 
> 赞同：0
> 
> 时间：2012-12-08T09:08:15.550
> 
> 标签：c#, binding, treeview

我正在尝试创建一个具有分层“感觉”的简单日志系统。我希望这个屏幕截图清楚地解释了我的对象：

![在此处输入图像描述](../Images/60cfc3986e3caad6cd20965aa32bbcea.png)

如您所见，我创建了一个 LogDetails 类型的新对象，它仅公开 4 个字段：

```
public string Message;
        public LogStatus Status;
        public string ErrorDetails;

        public enum LogStatus
        {
            Complete, Failed, Error, FatalError, Progress, Started
        } 
```

我有另一个类，它有一个 Title 属性（字符串）和一个 LogDetails 属性。

当我绑定到 XAML 时，我的树视图显示如下：

![在此处输入图像描述](../Images/fcae228b3af60ff6a4b5a19677969071.png)

正如您所看到的，根很好并且是预期/期望的（红色），但每个子类别都没有分解 - 我希望能够绕过一个级别并直接进入错误详细信息、消息和状态。所以，我想创建这个（在 Word 中模拟，但希望你明白）：

![在此处输入图像描述](../Images/e9861f46e7d8d0cd77d662e3a3941357.png)

这是我的 xaml：

```
<Grid>
<TreeView ItemsSource="{Binding}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding LogDetailsList}" >
            <TextBlock Text="{Binding Title}" />
            <HierarchicalDataTemplate.ItemTemplate>

                <DataTemplate>
                    <TextBlock Text="{Binding}" />
                </DataTemplate>

            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>            
    </TreeView.ItemTemplate>
</TreeView>
</Grid> 
```

我的 MainWindow 代码在后面

```
public partial class MainWindow : Window
    {
        static public ObservableCollection<Log> logList;

        public MainWindow(List<Log> logs)
        {
            InitializeComponent();

            logList = new ObservableCollection<Log>();

            foreach (var item in logs)
            {
                logList.Add(item);    
            }

            this.DataContext = logList;
        }
    } 
```

谁能指出我正确的方向，或者至少让我知道我的设计是否有缺陷？

**编辑**
当我尝试添加另一个文本块或 ItemTEmplate 时，我收到错误消息“属性 ItemTemplate 设置不止一次”或“属性 VisualTree 设置不止一次”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:17:47.403

您应该提供绑定表达式的路径。

# javascript - 使用 CSS 类作为状态机的最佳实践？

> ID：13776070
> 
> 赞同：0
> 
> 时间：2012-12-08T09:08:15.130
> 
> 标签：javascript, html, dom, css

我正在开发一个基本上作为状态机编写的 CSS3/Javascript UI，状态（动画）之间的转换完全在 CSS3 动画和转换中完成。

现在，要触发状态更改，我正在执行以下操作：

```
function changeState(oldState, newState) {
     element.classList.remove(getCSSClassName(oldState));
     element.classList.add(getCSSClassName(newState));
} 
```

现在这似乎很好，并且一切似乎都可以在基于 webkit 的浏览器中运行。在运行这两个命令之前，元素的呈现不会更新（在 javascript 执行结束之前可能什么都没有）。但是，我知道某些浏览器（尤其是 firefox）布局/渲染更改可能会在 javascript 执行过程中发生。

这是我应该这样做的吗？或者在交换 CSS 类方面是否有更好的方法来触发“状态更改”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:17:09.523

您可以`.className`在分配之前使用并准备正确的字符串：

```
function changeState(oldState, newState) {
     var str = element.className;
     str = str.replace(getCSSClassName(oldState),"");
     str = str + getCSSClassName(newState);
     element.className = str;
} 
```

这将确保在没有中断的情况下完成分配。注意`classList`IE≤9 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T12:25:41.810

```
class Animator {
  constructor(strClass) {
    this.slide = document.querySelector(strClass)
    this.slideOriginClass = this.slide.className;
  }
  set(num) {
    this.slide.className = this.slideOriginClass + ' state-' + num
  }
  get() {
    console.log(this.slide.classList.length);
  }
};

var animator = new Animator('.slide');
animator.set(4)
setTimeouta( ()=> { animator.set(1) , 1000 }
```

# javascript - emberjs 与哈希绑定

> ID：13776071
> 
> 赞同：2
> 
> 时间：2012-12-08T09:08:15.297
> 
> 标签：javascript, ember.js

任何人都可以帮助我。这就是我所拥有的， [Ember 绑定只有一个哈希](http://jsfiddle.net/ashraf_zmn/DZynj/)

这是模板，

```
<script type="text/x-handlebars">
{{#each Page.PageController.content.tasks}}
{{#view Page.PageView contentBinding="this"}}

{{#unless editing}}
<div>
    <h2>{{title}}</h2> {{view Ember.Checkbox checkedBinding="editing"}}
</div>
{{/unless}}

{{#if editing}}
<div>
    <h2>{{view Ember.TextField valueBinding="title"}}</h2>
    {{view Ember.Checkbox checkedBinding="editing"}}
</div>
{{/if}}

{{/view}}
{{/each}}    
</script>​ 
```

这是js，

```
Page = Ember.Application.create();
Page.PageController = Ember.ObjectController.create({
    content: {
        tasks: [
            {
            title: 'Heading',
            editing: false},
        {
            title: 'Heading',
            editing: false}
        ]
    }
});

Page.PageView = Ember.View.extend({
    edit: function() {
        var content = this.getPath('content');
        content.set("editing", true);
    }
});​ 
```

问题是我可以将普通旧哈希的布尔值与视图 Ember.Checkbox 绑定，但是如何通过链接操作来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:19:42.003

您需要使用`Ember Objects`而不是普通哈希来使绑定正常工作，如上例所示，您需要按如下方式更改代码

```
Page.PageController = Ember.ObjectController.create({
content: Ember.Object.create({
    tasks: [
      Ember.Object.create({
        title: 'Heading',
        editing: false
       }),
      Ember.Object.create({
        title: 'Heading',
        editing: false
      })
    ]
  })
}); 
```

让我知道这是否有帮助...

**更新**
[小提琴](http://jsfiddle.net/DZynj/15/)

# java - 如何使用公共池创建连接池？

> ID：13776072
> 
> 赞同：0
> 
> 时间：2012-12-08T09:08:15.157
> 
> 标签：java, networking, ssl, httpurlconnection, apache-commons

我有这样的代码：

```
URL url = new URL(endPoint);
connection = (HttpURLConnection) url.openConnection(); 
```

在一个方法中。用于更改每个`endPoint`方法调用（毕竟`endPoint`是方法参数）。由于所有这些`endPoint`都启用了 ssl，我觉得做一个`openConnection()`很昂贵。

我想创建一个连接池。我使用了[commons-pool](http://commons.apache.org/pool/index.html) jar。我已经像这样编码到这里：

```
class AuthenticationFactory extends BasePoolableObjectFactory<HttpURLConnection> {

    public HttpURLConnection makeObject() {
        return (HttpURLConnection) new URL("someting").openConnection();
    }

    public void passiveObject(HttpURLConnection conn)
    {
        conn.close();
    }

} 
```

创建`makeObject`新连接并`passiveObject`关闭现有连接。但我对此感到震惊。如何在`makeObject`不知道我的`endPoint`.

我是否错过了连接池的概念？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:04:32.173

我不明白你想做什么。首先，它在`HttpURLConnection`后台使用一个池来重用现有的 TCP 连接，这是您通常想要的。
此外，对于`ssl`连接，甚至重用连接也没有意义，因为每个连接对于每个客户端都是唯一的（因为它是安全的......）

# android - Android：定位服务查询

> ID：13776075
> 
> 赞同：2
> 
> 时间：2012-12-08T09:08:55.620
> 
> 标签：android, android-service, android-location

我目前有一个在应用启动时启动的位置服务。我的 onCreate 方法如下：-

```
public void onCreate() {
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setCostAllowed(false);
    // Get a location manager from the system services
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // if GPS is not enabled. Show alert to user.
    if ( !locationManager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
        showEnableLocationsDialog();
    }

    // Get the location provider that best matches the criteria
    String bestProvider = locationManager.getBestProvider(criteria, false);

    if (bestProvider != null) {
        // Get the user's last known location
        location = locationManager.getLastKnownLocation(bestProvider);

        MyApp myApp = (MyApp) getApplicationContext();
        myApp.setLocation(location);
        if (locationManager.isProviderEnabled(bestProvider)) {
            locationManager.requestLocationUpdates(bestProvider, 0, 0, this);
        }
    }
} 
```

当 GPS 未启用时，我会显示一个对话框，提示用户启用 GPS。我的问题是，如果用户确实选择进入设置页面启用 GPS，当用户再次启动应用程序时，getBestProvider() 和 requestLocationUpdates() 的剩余流程是否会受到影响，因为该服务已经“运行”在背景？（只是一个猜测，因为我是一个整体的 Android 开发新手）。

我班级的完整代码如下：-

```
public class LocationService extends Service implements LocationListener {

private LocationManager locationManager;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setCostAllowed(false);
    // Get a location manager from the system services
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // if GPS is not enabled. Show alert to user.
    if ( !locationManager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
        showEnableLocationsDialog();
    }

    // Get the location provider that best matches the criteria
    String bestProvider = locationManager.getBestProvider(criteria, false);

    if (bestProvider != null) {
        // Get the user's last known location
        location = locationManager.getLastKnownLocation(bestProvider);
        MyApp myApp = (MyApp) getApplicationContext();
        myApp.setLocation(location);
        if (locationManager.isProviderEnabled(bestProvider)) {
            locationManager.requestLocationUpdates(bestProvider, 0, 0, this);
        }
    }
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
}

public void onLocationChanged(Location newLocation) {        
    // if a newer location is available, check if its better than current available one
    MyApp myApp = (MyApp) getApplicationContext();
    Location location = myApp.getLocation();
    boolean isBetterLocation = isBetterLocation(location, newLocation);
    if(isBetterLocation) {
        location = newLocation;
    }
}

public static Location getBestLocation(LocationManager locationManager) {

    Location location_gps = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    Location location_network = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    // If both are available, get the most recent
    if(location_gps!=null && location_network !=null) {
        return (location_gps.getTime() > location_network.getTime())?location_gps:location_network;
    }
    else if(location_gps==null && location_network ==null){
        return null;
    }
    else
        return (location_gps==null)?location_network:location_gps;

}

public void onProviderEnabled(String s){}
public void onProviderDisabled(String s){}
public void onStatusChanged(String s, int i, Bundle b){}

@Override
public void onDestroy() {       
    locationManager.removeUpdates(this);
}

private void showEnableLocationsDialog() {
    AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
    myAlertDialog.setTitle("No location services enabled");
    myAlertDialog.setMessage("To find your location, please enable at least one service in the Settings");
    myAlertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            // show settings screen
            Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(settingsIntent);
        }}
            );
    myAlertDialog.setNegativeButton("Skip", new DialogInterface.OnClickListener() {       
        public void onClick(DialogInterface arg0, int arg1) {
            // do something when the Cancel button is clicked
        }}
            );
    myAlertDialog.show();
}

private static final int TWO_MINUTES = 1000 * 60 * 2;

/** Determines whether one Location reading is better than the current Location fix
 * @param location  The new Location that you want to evaluate
 * @param currentBestLocation  The current Location fix, to which you want to compare the new one
 */
protected boolean isBetterLocation(Location location, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return true;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = location.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved
    if (isSignificantlyNewer) {
        return true;
        // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return false;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(location.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return true;
    } else if (isNewer && !isLessAccurate) {
        return true;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return true;
    }
    return false;
}

/** Checks whether two providers are the same */
private boolean isSameProvider(String provider1, String provider2) {
    if (provider1 == null) {
        return provider2 == null;
    }
    return provider1.equals(provider2);
}
} 
```

此外，我还了解到一直要求更新位置并不是一个好主意，而是应该使用 AlarmManager。对此也有什么建议吗？

# java - 每个按键输入更新一个 jtextarea

> ID：13776078
> 
> 赞同：2
> 
> 时间：2012-12-08T09:09:21.100
> 
> 标签：java, swing, jtextarea

我想要 2 个 JTextAreas。第一个是用户输入的地方，第二个是输入的二进制等效项出现的地方。每次用户输入字符时是否有可能以及如何使第二个文本区域更新？？？顺便说一句，用户将无法编辑第二个文本区域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T09:20:50.513

在第一个第一个文本区域的文档上添加一个更改侦听器。

```
jTextArea1.getDocument().addDocumentListener(new DocumentListener() {
    @Override
    public void changedUpdate(DocumentEvent evt) {
        dumpBinary(evt, jTextArea2);
    }
    @Override
    public void insertUpdate(DocumentEvent evt) {
        dumpBinary(evt, jTextArea2);
    }
    @Override
    public void removeUpdate(DocumentEvent evt) {
        dumpBinary(evt, jTextArea2);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T09:24:22.693

您可以`Document`从第一个获取`JTextArea`并将其设置为第二个。然后使第二个不可编辑。

# html - 所有列的相同表格边框高度

> ID：13776100
> 
> 赞同：0
> 
> 时间：2012-12-08T09:12:18.507
> 
> 标签：html, css, html-table

我连续有 3 列，我当前的输出是![电流输出](../Images/e1b5e821f402538a17f248c71033318d.png)

我需要的输出是 ![需要的输出][2]

![cur o/p][2]

![需要](../Images/fa4247264725d5868a7727f7ad00baf2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:16:02.003

文本之间有 4 个
标签

```
Lorem Ipsum<br><br><br><br> passages, <br><br><br><br>and more recently 
```

删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:14:15.243

使用[colspan](http://msdn.microsoft.com/en-us/library/ie/ms533581%28v=vs.85%29.aspx)属性来指定每列占用多少空间。此外，使用`<style>`标签为元素设置 css，而不是将它们内联，这会使网站变得混乱。

HTML+CSS：

```
<table width="100%" border="1" padding="2" style="font-size:18px;">

<tbody>

<tr height="46" colspan="3">
<td width="30%">&nbsp;Marks and Number of packages</td>
<td width="50%">&nbsp;Proper Description of goods</td>
<td width="20%">&nbsp;Net quantity per &nbsp;package</td>
</tr>

<tr class="tableContent">
<td colspan="1" valign="top">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type </td>
<td colspan="1" valign="top">Lorem Ipsum<br> passages, <br>and more recently</td>
<td colspan="1" valign="top">sit amet,<br> consectetur<br> adipisicing elit, <br>sed do eiusmod tempor</td>
</tr>

<tr>
<td height="50" valign="top" colspan="1">&nbsp;Name and Address of Shipper</td>
<td valign="top" colspan="2">&nbsp;Signature & Date</td>
</tr>

</tbody>

</table>
​
<style type="text/css">
.tableContent td, td{
padding-left:10px;
}
</style>
​ 
```

演示：http: [//jsfiddle.net/Csr6X/](http://jsfiddle.net/Csr6X/)

# android - Http在android中发布高分辨率图像

> ID：13776104
> 
> 赞同：1
> 
> 时间：2012-12-08T09:12:41.380
> 
> 标签：android, bitmap, stream, http-post

我需要从相机中以最大分辨率（例如 12mpx）发布大图像。但是当我解码文件流以获取要发布的 byteArrayInputStream 时，我经常会遇到 OutOfMemoryError。有没有其他方法可以张贴大图？

Ps 我不需要显示或缩放这张照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:16:24.067

是的，您可以通过 MultipartEntity 发布图像/文件，请在下面找到示例片段：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

MultipartEntity entity = new MultipartEntity(
HttpMultipartMode.BROWSER_COMPATIBLE);
File file= new File(filePath);
if(file.exists())
{
    entity.addPart("data", new FileBody(file));
}

httppost.setEntity(entity);
HttpResponse response = httpclient.execute(httppost); 
```

要使用多部分实体，您需要下载 httpmime-4.1.2.jar 并将其添加到项目的构建路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:17:44.427

`android:largeHeap="true"`如果您使用的`API`级别大于或等于，请尝试在应用程序级别的清单中使用此行 `11`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:43:50.390

如果可以以原始图像格式发布，则直接从文件流发送数据：

```
FileInputStream imageIputStream = new FileInputStream(image_file);

HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("POST");

OutputStream out = connection.getOutputStream();

copyStream(imageIputStream, out);

out.close();
imageIputStream.close(); 
```

复制流功能：

```
static int copyStream(InputStream src, OutputStream dst) throws IOException
{
    int read = 0;
    int read_total = 0;
    byte[] buf = new byte[1024 * 2];

    while ((read = src.read(buf)) != -1)
    {
        read_total += read;
        dst.write(buf, 0, read);
    }

    return (read_total);
} 
```

# android - Android 任何适用于 android 2.3 或更高版本的语音转文本 API 可以离线工作吗？

> ID：13776107
> 
> 赞同：1
> 
> 时间：2012-12-08T09:13:12.113
> 
> 标签：android, api, speech-recognition, offline, android-2.3-gingerbread

我需要离线语音识别和语音转文本 API。我找到了 sphinx android 客户端，但是对于具有 API 级别 8 的 android 手机的 RAM 和处理器来说，它的价格非常昂贵。是否有任何图书馆或任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T20:14:22.653

API（应用程序编程接口）通常推断您正在在线连接到服务器。

CMU 的 PocketSphinx 可能是您在 Android 上离线语音转文本的最佳选择，因为它是专门为低功耗设备而设计的。我认为 PocketSphinx 与您引用的 Android 版 Sphinx 客户端不同。

[http://cmusphinx.sourceforge.net/2013/01/pocketsphinx-for-android-in-google-play/](http://cmusphinx.sourceforge.net/2013/01/pocketsphinx-for-android-in-google-play/)

# ruby-on-rails - 存储 Web 服务密码的最佳实践

> ID：13776115
> 
> 赞同：4
> 
> 时间：2012-12-08T09:14:06.543
> 
> 标签：ruby-on-rails, web-services, soap, bcrypt, savon

设想：

*   Web 应用程序（RoR 3.2）需要与远程 Web 服务（SOAP，使用 Savon gem）通信。
*   Web 服务需要用户名和密码。
*   通信是 SOAP，流量是通过 VPN（SOAP 没有 SSL）。
*   我需要存储远程 Web 服务管理员给我的密码。
*   Web 服务管理员要求我以安全的方式存储密码。
*   当我的网络服务器调用网络服务时，我需要清楚地使用原始密码。
*   Bcrypt 是存储密码的最佳方式，但它是“一种方式”。
*   我无法发送加密密码，我需要一种解密方法才能将其发送到 Web 服务。

这似乎是一个“鸡和蛋”的问题。

有没有办法安全地存储密码并能够解密它以用于自动化服务？

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:21:55.150

如果加密信息需要以纯文本形式发送，如何使用强可逆密码，这可能是 Web 服务管理员的意思。

在使用（例如）AES 加密进行加密之前，您可以添加其他信息作为盐（使用您熟知的任何内容，并且可以通过算法应用，例如名称）。
然后，您可以将加密密码存储在您选择的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:36:01.410

我会将此密码存储在环境变量中（纯文本，经过混淆处理，无关紧要），以避免将其放入 VCS。

还阅读[将密码作为环境变量（而不是纯文本）存储在配置文件中是否安全？](https://stackoverflow.com/questions/12461484/is-it-secure-to-store-passwords-as-environment-variables-rather-than-as-plain-t)能够帮助。

# wicket - 如何将脚本添加到正文（类似的功能，如方法 renderHead（组件组件，IHeaderResponse 响应））

> ID：13776116
> 
> 赞同：6
> 
> 时间：2012-12-08T09:14:11.583
> 
> 标签：wicket

使用以下代码，我`page.html`通过覆盖方法将 trackingpixel 添加到某个页面`renderHead(Component component, IHeaderResponse response)`。这工作正常。

page.html 看起来像这样：

```
 <!doctype html>
    <html xmlns:wicket="http://wicket.apache.org/">
    <head>
    ..
    <wicket:container wicket:id="header"></wicket:container>
    </head>
    <body>
      ..
 <script wicket:id="scriptHolder" type="text/javascript" > I would like to add my script here 
</script>
..
    </body>
    </html> 
```

TrackingPixel.java：

```
 public abstract class TrackingPixel extends AbstractDefaultAjaxBehavior {

            protected TrackingPixel(TrackingPixelType type) {
           ..
        }

        @Override
        public void renderHead(Component component, IHeaderResponse response) {
                response.renderOnDomReadyJavaScript("WebtrekkInstance = {
                 ..   
                             'path' : 'anyPath',
                     ...:...
                                  ..
                };
");
        }     
             } 
```

`renderHead-method` 向主页添加一个 trackingpixel。在页面上鼠标右键->源码显示页面中添加了如下脚本：

```
<script type="text/javascript" >

Wicket.Event.add(window, "domready", function(event) {      
            WebtrekkInstance = {
             ..   
                         'path' : 'anyPath',
                 ...:...
                              ..
            };
                        ..            
            ;});
</script> 
```

现在我想将 trackingpixel 添加到弹出窗口中。我的问题是我无法在正文中添加脚本。该方法`renderHead(Component component, IHeaderResponse response)`没有这样做，因为（我猜）弹出窗口在同一页面上弹出，所以只有一个头部并且不会渲染两次。所以我尝试这样做，`WebMarkupContainer`如下所示。

OurServicePopup.java

```
/**
 * Class to display our service as popup
 */
public class OurServicePopupPage<T> extends WebPage {

    public OurServicePopupPage(PageParameters parameters) {
        super(parameters);
    }

    @Override
    protected void onInitialize() {
        add(new OurServicePixel());
        super.onInitialize();
    }      
} 
```

OurServicePixel.java 看起来像这样：

```
 public class OurServicePopupPixel extends TrackingPixel{
                public OurServicePopupPixel() {
                        }

                WebMarkupContainer scriptContainer = new WebMarkupContainer("scriptContainer");
                @Override
                public void renderHead(Component component, IHeaderResponse response) {   
                    scriptContainer.add(new AttributeAppender("type", Model.of("text/javascript")));
                    scriptContainer.add(
                        new AttributeAppender("src","WebtrekkInstance = {
                 ..   
                             'path' : 'anyPath',
                     ...:...
                                  ..
                };
");

          }
              add(scriptContainer); //this shows error
 } 
```

这里的问题是我无法添加 scriptContainer。 `add(scriptContainer);`将不起作用，因为`OurServicePopupPixel`是行为而不是页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T09:48:09.850

也许您可以简单地使用`Label`带有`setEscapeModelStrings(false)`. 但这似乎有点奇怪。

我不完全理解你的 javascript 在做什么，但也许你可以在 DOM 准备好时尝试执行它。使用`renderHead`这样的：

```
public void renderHead(IHeaderResponse response) {
    response.render(OnDomReadyHeaderItem.forScript( ... YOUR SCRIPT HERE ... ));
} 
```

我希望它有所帮助。

# qt - 没有shaodw的Qt菜单？

> ID：13776119
> 
> 赞同：0
> 
> 时间：2012-12-08T09:14:14.670
> 
> 标签：qt, menu

我从其他已问但未回答的问题中复制了下面的问题描述，因为这与我想问的问题完全相同。

我有一个带有半透明背景和圆形边缘（边框半径）的 QMenu。不幸的是，Windows 7 为这个菜单绘制了一个阴影，它不适合圆角。它是为普通矩形菜单绘制的阴影。

有没有一种方法可以完全禁用 QMenu 的绘制阴影，或者有一种方法可以使阴影适合圆形边缘？

这是它发生的简约示例：

```
QPushButton b("press me");
QMenu m;
m.addAction("hello"); m.addAction("world");
m.setWindowFlags(m.windowFlags() | Qt::FramelessWindowHint);
m.setAttribute(Qt::WA_TranslucentBackground);
m.setStyleSheet("background:rgba(255,0,0,50%); border-radius:5px;");
b.setMenu(&m);
b.show(); 
```

现在我必须手动关闭 Windows 控制面板中的菜单阴影才能消除该阴影。实际上我想要存档的是像qt的饼菜单这样的菜单，或者像这样的菜单：http: [//upload.wikimedia.org/wikipedia/commons/8/85/Blender_2.36_Screenshot.jpg](http://upload.wikimedia.org/wikipedia/commons/8/85/Blender_2.36_Screenshot.jpg) 我尝试了弹出窗口小部件，但它得到了上面描述的影子神器。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:28:23.287

在 Windows Vista 和更高版本上，我想要一个带有正常窗口阴影的菜单。所以我必须做两件事：

1.  `CS_DROPSHADOW`从菜单`HWND`中删除`WNDCLASS`Qt 在核心深处添加的内容。
2.  使用 DWM API 添加阴影。

诀窍是捕获`QEvent::WinIdChange`以获取`HWND`菜单窗口的句柄，然后使用`GetClassLong`/`SetClassLong`删除`CS_DROPSHADOW`标志。我只这样做一次（通过使用 a `static bool`），因为`WNDCLASS`所有菜单的 总是相同的。如果您的应用程序的一部分想要显示菜单阴影而其他部分不想要，这可能会导致问题。

我已经子类化了`QMenu`，并且在创建菜单时我总是使用我的覆盖类

```
Menu * my_menu = new Menu(tr("&File"));
mainMenu->addMenu(my_menu); 
```

这是整个代码，享受：

菜单.h

```
#ifndef MENU_H
#define MENU_H

#include <QMenu>

class Menu : public QMenu
{
    Q_OBJECT
public:
    explicit Menu(QWidget *parent = 0);
    explicit Menu(const QString & title);

protected:
    virtual bool event(QEvent *event);

signals:

public slots:

};

#endif // MENU_H 
```

菜单.cpp

```
#include "menu.h"

#pragma comment( lib, "dwmapi.lib" )
#include "dwmapi.h"

Menu::Menu(QWidget *parent) :
    QMenu(parent)
{

}

Menu::Menu(const QString &title) :
    QMenu(title)
{

}

bool Menu::event(QEvent *event)
{
    static bool class_amended = false;
    if (event->type() == QEvent::WinIdChange)
    {
        HWND hwnd = reinterpret_cast<HWND>(winId());
        if (class_amended == false)
        {
            class_amended = true;
            DWORD class_style = ::GetClassLong(hwnd, GCL_STYLE);
            class_style &= ~CS_DROPSHADOW;
            ::SetClassLong(hwnd, GCL_STYLE, class_style);
        }
        DWMNCRENDERINGPOLICY val = DWMNCRP_ENABLED;
        ::DwmSetWindowAttribute(hwnd, DWMWA_NCRENDERING_POLICY, &val, sizeof(DWMNCRENDERINGPOLICY));

        // This will turn OFF the shadow
        // MARGINS m = {0};
        // This will turn ON the shadow
        MARGINS m = {-1};
        HRESULT hr = ::DwmExtendFrameIntoClientArea(hwnd, &m);
        if( SUCCEEDED(hr) )
        {
            //do more things
        }
    }
    return QWidget::event(event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:46:14.977

我只是删除 Qt::popup 标志来摆脱阴影。而且我必须将关闭代码添加到任何其他后台 UI。这些是更多的额外工作，但我得到了我想要的:)

# objective-c - 在 NSTextView 中检测 Enter/Tab/Up/Down 键？

> ID：13776122
> 
> 赞同：6
> 
> 时间：2012-12-08T09:14:46.310
> 
> 标签：objective-c, macos, cocoa, nstextview

可可菜鸟在这里。我想知道如何在用户输入 NSTextView 时捕获`Enter`和键 onKeyDown？`tab`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-06T05:28:14.347

最简单的方法是实现`- (BOOL)textView:(NSTextView *)aTextView doCommandBySelector:(SEL)aSelector`委托方法并查找`insertNewline:`和`insertTab:`选择器。

```
- (BOOL)textView:(NSTextView *)aTextView doCommandBySelector:(SEL)aSelector
{
    if (aSelector == @selector(insertNewline:)) {
        // Handle the Enter key
        return YES;
    } else if (aSelector == @selector(insertTab:)) {
        // Handle the Tab key
        return YES;
    }

    return NO;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:24:21.733

您应该处理`keyDown:(NSEvent*)theEvent`NSTextView 的消息（即编写您自己的后代）。在这种情况下，您将在`[theEvent keyCode]`.

对于 return 有一个常量`kVK_Return`，对于 tab -`kVK_Tab`等。

您应该添加 Carbon 框架（和`#import Carbon/Carbon.h`）来访问这些常量。

# sql - Oracle：在选择查询中查找重复行

> ID：13776123
> 
> 赞同：1
> 
> 时间：2012-12-08T09:14:56.343
> 
> 标签：sql, oracle, count, duplicates

我的 SQL 查询返回 4 列“A”、“B”、“C”、“D”的结果。

假设结果是：

```
A    B    C    D
1    1    1    1
1    1    1    2
2    2    2    1 
```

是否可以获取每行中包含“A”、“B”、“C”列的重复行数。

例如，预期的结果是：

```
A    B    C    D    cnt
1    1    1    1    2
1    1    1    2    2
2    2    2    1    1 
```

我尝试过使用 count(*)。但它返回我查询返回的总行数。另一个信息是，在示例中我只提到了 3 列，我需要根据这些列检查计数。但我的实际查询有这样的 8 列。数据库中的行数很大。所以我认为 group by 在这里不是一个可行的选择。任何提示都是可观的。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T15:07:29.490

也许为时已晚，但可能作为 oracle 中的分析函数（又名窗口函数）的计数对您有所帮助。当我正确理解您的要求时，这应该可以解决您的问题：

```
create table sne_test(a number(1)
                 ,b number(1)
                 ,c number(1)
                 ,d number(1)
                 ,e number(1)
                 ,f number(1));

insert into sne_test values(1,1,1,1,1,1);
insert into sne_test values(1,1,2,1,1,1);
insert into sne_test values(1,1,2,4,1,1);
insert into sne_test values(1,1,2,5,1,1);
insert into sne_test values(1,2,1,1,3,1);
insert into sne_test values(1,2,1,2,1,2);
insert into sne_test values(2,1,1,1,1,1);

commit;

 SELECT a,b,c,d,e,f, 
       count(*) over (PARTITION BY a,b,c)
  FROM sne_test;

 A  B  C  D  E  F AMOUNT
-- -- -- -- -- -- ------
 1  1  1  1  1  1      1
 1  1  2  4  1  1      3
 1  1  2  1  1  1      3
 1  1  2  5  1  1      3
 1  2  1  1  3  1      2
 1  2  1  2  1  2      2
 2  1  1  1  1  1      1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-06T06:35:40.770

**要查找重复项，您必须根据键列对数据进行分组**

```
select 
  count(*)
  ,empno 
from 
  emp
group by
  empno
having
  count(*) > 1; 
```

`empno`即使每个类别（多个）存在多个记录，这也允许您聚合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T09:18:01.430

您必须使用一个子查询来获取按 A、B 和 C 分组的行数。然后将这个子查询再次与您的表（或您的查询）连接，如下所示：

```
select your_table.A, your_table.B, your_table.C, your_table.D, cnt
from
  your_table inner join
  (SELECT A, B, C, count(*) as cnt
   FROM your_table
   GROUP BY A, B, C) t
  on t.A = your_table.A
     and t.B = your_table.B
     and t.C = your_table.C 
```

# git - Git 克隆和获取补丁文件

> ID：13776127
> 
> 赞同：2
> 
> 时间：2012-12-08T09:15:49.823
> 
> 标签：git

我用 git clone 下载了 Android 源代码。我做了一些修改，我想使用下面的命令创建一个补丁文件，

```
diff -Nur sourcefolder changedfolder > changes.patch 
```

但它给出了这样的错误，

```
diff: TI-Android-ICS-4.0.3-DevKit-EVM-SK-3.0.1/abi/cpp/.git/svn: No such file or directory
diff: rowboat/abi/cpp/.git/svn: No such file or directory
diff: TI-Android-ICS-4.0.3-DevKit-EVM-SK-3.0.1/bionic/.git/svn: No such file or directory
diff: rowboat/bionic/.git/svn: No such file or directory 
```

反正有没有得到一个干净的补丁文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:25:23.587

看起来该`diff`命令还检查`.git`文件夹。你应该尝试[`git diff`](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html)创建你的补丁。

类似的东西 `git diff --patch <originalcommit>..<yourcommit> > patch.file` 应该可以工作。但是您的更改必须首先（本地）提交。

# c# - 验证每个传入的请求

> ID：13776136
> 
> 赞同：1
> 
> 时间：2012-12-08T09:16:25.440
> 
> 标签：c#, wcf, architecture

我有两个基类`RequestBase`和`ResponseBase`, 分别用于请求和响应。从这些类派生的所有类型的请求和响应。`RequestBase`包含`ClientKey`和`AccessToken`字段。另外，我有`AuthenticationService`服务。

```
[ServiceContract]
public interface IAuthenticationService
{
   [OperationContract]
   public LoginResponse Login(LoginRequest request);
   ... other methods
} 
```

假设我们有`OrderService`服务。

```
public class OrderService:IOrderService
{       
   public OrderResponse GetOrders(OrderRequest request)
   {
      ...
   }       
} 
```

我需要验证 and 的每个请求`ClientKey`，`AccessToken`还要检查用户是否经过身份验证。我可以执行以下操作：

```
public OrderResponse GetOrders(OrderRequest request)
{
   var response = new OrderResponse(request.RequestId);
   // call helper method for validation
   var validationResult = ValidateRequest.Validate(request, response, ValidateOptions.All)  
   ...
} 
```

但是我不想在每个方法中都写这行代码：

```
var validationResult = Validate.ValidRequest(request, response, ValidateOptions.All) 
```

**做这个的最好方式是什么？**

PS。这是`Validate`方法：

```
public static bool Validate(RequestBase request, ResponseBase response, ValidateOptions validate)
{
   //Validate Client Key. 
   // Hardcoded here.
   if ((Validate.ClientKey & validate) == Validate.ClientKey)
   {
      if (request.ClientKey != "ABC123")
      {
         response.Acknowledge = AcknowledgeType.Failure;
         response.Message = "Unknown Client Key";
         return false;
      }
   }    

   // Validate access token
   if ((Validate.AccessToken & validate) == Validate.AccessToken)
   {
      if (request.AccessToken != _accessToken)
      {
         response.Acknowledge = AcknowledgeType.Failure;
         response.Message = "Invalid or expired AccessToken. Call GetToken()";
         return false;
      }
   }

   // Validate user credentials
   if ((Validate.UserCredentials & validate) == Validate.UserCredentials)
   {
      if (_userName == null) 
      {
         response.Acknowledge = AcknowledgeType.Failure;
         response.Message = "Please login and provide user credentials before accessing these methods.";
         return false;
      }
   }

   return true;
} 
```

还有一个问题：服务器上最好的存储位置在`_accessToken`哪里`_userName`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:37:23.473

在您的情况下，它看起来没有简单的方法来实现您想要的。通常，您可以在传输级别或 WCF 级别执行一些自定义操作，例如安全验证。如果您的服务托管在 IIS 中，您可以实现自定义身份验证模块，但这不是您的情况，因为安全信息位于数据合同中。WCF 也有几个可扩展点，如自定义端点行为、[消息契约](http://msdn.microsoft.com/en-us/library/ms730255.aspx)和 @trydis 消息检查器提到的。但它们都不适合开箱即用，因为它可能需要注意消息序列化和其他自定义事物。
更好的是在你的代码中继续这样做，如果你想优化你的代码，看看[postsharp](http://www.sharpcrafters.com/postsharp/features)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:53:35.660

我将使用自定义验证属性，然后应用企业库中的验证应用程序块。从这里的文档开始：http: [//msdn.microsoft.com/en-us/library/ff650484.aspx](http://msdn.microsoft.com/en-us/library/ff650484.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T17:11:50.297

您想要实现并[插入一个 Message Inspector](http://msdn.microsoft.com/en-us/library/aa717047.aspx)。

有关消息验证的相关用例的扩展列表，[请查看此](http://msdn.microsoft.com/en-us/library/ff649251.aspx)。将来它可能会派上用场。

# syntaxhighlighter - 使用 SyntaxHighlighter 3.0.83，我发现了一些错误

> ID：13776143
> 
> 赞同：0
> 
> 时间：2012-12-08T09:17:26.227
> 
> 标签：syntaxhighlighter

![在此处输入图像描述](../Images/f08b93c313942a308e9125547b96a43b.png)

如图所示，在第 177 行之后，我们找不到第 num 行。为方便起见，[问题](http://shellblog.sinaapp.com/?p=307)就在这里。

# bash - 当字符串包含“/”时，用bash替换文件中的字符串

> ID：13776147
> 
> 赞同：1
> 
> 时间：2012-12-08T09:17:41.207
> 
> 标签：bash, replace

我有一个可执行文件在这里寻找 kanwadict

```
/usr/local/share/kakasi/kanwadict 
```

什么时候应该进去

```
/home/mrhowtos/public_html/share/kakasi/kanwadict 
```

所以我想更换所有

```
"/usr/local/share/kakasi/kanwadict" 
```

在可执行文件中

```
"/home/mrhowtos/public_html/share/kakasi/kanwadict" 
```

另外，我没有权限写它在哪里寻找，所以我不能只是移动它正在寻找的文件。

我找到了要查找和替换的 cmd，但它的分隔符是“/”

```
sed -i 's/old-word/new-word/g' *.txt 
```

所以它对我不起作用，是否有另一个命令可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:28:07.240

使用替代分隔符`#`，如 sed：

```
sed -i.bak 's#old-word#new-word#g' *.txt 
```

对于您的情况，它将是：

```
sed -i.bak 's#/usr/local/share/kakasi/kanwadict#/home/mrhowtos/public_html/share/kakasi/kanwadict#g' *.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:17:12.123

您需要转义`/`字符，例如`\/`;

```
sed -i 's/\/usr\/local\/share\/kakasi\/kanwadict/\/home\/mrhowtos\/public_html\/share\/kakasi\/kanwadict/g' *.txt 
```

# view - 球体内的相机

> ID：13776151
> 
> 赞同：1
> 
> 时间：2012-12-08T09:18:15.197
> 
> 标签：view, camera, three.js

我想创建一个天穹并制作球体，纹理加载也很好，但我无法在球体内移动相机。球体消失。我知道这是一个业余问题，但看不到球体的内部。

是某种切割或 Z 缓冲区问题吗？

我该如何解决？

我的代码：

```
<html>
<head>
    <script src="js/jquery-1.8.3.min.js"></script>  
    <script src="js/three.min.js"></script>
</head>

<body>

    <div id="container">

    </div>

    <script>
        function addSpaceSphere( ){
            // set up the sphere vars
            var radius = 200,
            segments = 16,
            rings = 16;

            var material = new THREE.MeshPhongMaterial({
                color:0xFFFFFF,
                map: THREE.ImageUtils.loadTexture( 'textures/SPACE014SX.png' )
            });

            var sphere = new THREE.Mesh(
                new THREE.SphereGeometry(
                    radius,
                    segments,
                    rings
                ),
                material
            );

            // add the sphere to the scene
            scene.add(sphere);
        }

        function addLights(){
            // create a point light
            var ambient = new THREE.AmbientLight( 0xFFFFFF );
            scene.add( ambient );
        }
        function render() {
            camera.lookAt( focus );
            camera.updateProjectionMatrix();

            renderer.render( scene, camera );
        }
        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function createScene(){
            // add the camera to the scene
            scene.add(camera);

            // the camera starts at 0,0,0
            // so pull it back
            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 300;

            // start the renderer
            renderer.setSize(WIDTH, HEIGHT);

            $container.append(renderer.domElement);

            addSpaceSphere( );

            addLights();

            animate();
        }

        var WIDTH = window.innerWidth;
        var HEIGHT = window.innerHeight;

        var VIEW_ANGLE = 45,
            ASPECT = WIDTH / HEIGHT,
            NEAR = 0.01,
            FAR = 10000;

        var focus = new THREE.Vector3( 0, 0, 0 );

        var isUserInteracting = false,
            onPointerDownPointerX = 0, onPointerDownPointerY = 0,
            lon = 0, onPointerDownLon = 0,
            lat = 0, onPointerDownLat = 0,
            phi = 0, theta = 0;

        var $container = $('#container');

        // create a WebGL renderer, camera
        // and a scene
        //var renderer = new THREE.CanvasRenderer();
        var renderer = new THREE.WebGLRenderer();
        var camera = new THREE.PerspectiveCamera(
            VIEW_ANGLE, ASPECT, NEAR, FAR
        );

        var scene = new THREE.Scene();

        createScene();      

    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T09:26:20.857

使天穹材料双面 - 它正在被剔除。将“side”属性设置为 THREE.DoubleSide

（或者 THREE.BackSide 也应该工作，如果相机只在球体内）

# python - 如何计算这个python列表的频率？

> ID：13776152
> 
> 赞同：0
> 
> 时间：2012-12-08T09:18:34.690
> 
> 标签：python

我有一个这样的python列表列表：

```
base_list (About 3,000,000 sub lists):

[
   ['Hello','World','Lucy','Lily'],
   ['Hello','Smith','Simpson','Bart'],
   ....
] 
```

现在我得到一个小清单：

```
small_list:

['Hello','World'] 
```

现在，我需要找出small_list 在base_list 中出现的次数。

**出现**意味着： [1,3] 出现在 [1,2,3,4,5] 中。

**更新**

我试过这个：

1.将base_list更改为集合列表。

2.然后，把small_list也改成set：

```
def get_original_freq(self, actors):
    count = 0
    s = set(actors)
    for row in self.orignal_rows:
      if s.issubset(row):
        count += 1
    return count 
```

但是代码运行速度很慢，每秒检查了大约 1000 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:28:45.220

我的第一反应是用一个愚蠢的（尽管有效）的答案来回答：

```
def sublistCount(listA, listB):
    if not len(listB):
        return 0
    conditions = ["%s in a" % repr(b) for b in listB]
    comprehension = '[a for a in listA if %s]' % ' and '.join(conditions)
    return len(eval(comprehension)) 
```

其中 listA 是列表列表，而 listB 是子列表。

这实际上非常快，即使在使用字符串列表时也是如此。我在大约 1-2 秒内浏览了 3,000,000 个字符串列表。

我称它为愚蠢，因为它使用 eval() 函数动态创建代码。如果您不确定您的输入是什么，这可能是危险的。这个解决方案是可能解决方案的管弦乐队的巴松管：它很有趣，它有效，但只有一个糟糕的音符或吱吱声就让一切变得糟糕。

但是，我最喜欢的潜在解决方案是：

```
def sublistCount(listA, listB):
    b = set(listB)
    matches = [a for a in listA if b.issubset(a)]
    return len(matches) 
```

这更安全、更清洁，并且性能几乎与第一个解决方案一样好（用于 3,000,000 条记录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:26:42.357

我发现**倒排索引**可以帮助我：

1.使base_list变成倒排索引：

```
{
    'Hello': [1,5,10,8000]
    'World': [1,2,3,5,9]
    ...
} 
```

2.当我需要统计['Hello','World']的出现次数时。我只是找到它们的两个倒排索引并计算它们的共同文档。

# apache - 使用 mod_rewrite 更改 URL

> ID：13776156
> 
> 赞同：0
> 
> 时间：2012-12-08T09:19:07.893
> 
> 标签：apache, .htaccess, mod-rewrite

我添加了一个使用*MobileDetect.php*自动重定向的移动版本。

重定向后的 URL 为：`/index.html?mpage=home.` 例如桌面版 URL 为`/medical-studies`时，移动端为`/index.html?mpage=medical-studies`。

如果可能，我想使用 mod_rewrite 或其他 mod 移动版本将显示相同的桌面 URL；

我的意思是改变

```
/index.html?mpage=X 
```

到

```
/X 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:59:48.143

试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} iPhone [OR]
RewriteCond %{HTTP_USER_AGENT} Android [OR]
RewriteCond %{HTTP_USER_AGENT} Blah...
RewriteRule ^(.*)$ index.html?mpage=$1 [L] 
```

如果`User-Agent`匹配某些移动代理，mod_rewrite会在*内部*重定向对 index.html 的访问并添加原始路径。（用户代理中显示的 URL*没有*改变。）

**笔记**

*   `RewriteCond`应更换为适当的条件。
*   在服务器端程序中，您可能需要引用`REDIRECT_QUERY_STRING`而不是`QUERY_STRING`.

# version-control - 本地网络上的版本控制系统，没有服务器

> ID：13776160
> 
> 赞同：2
> 
> 时间：2012-12-08T09:19:49.387
> 
> 标签：version-control

我已经搜索了标题中提到的内容，并且我已经阅读[了这个](https://stackoverflow.com/questions/1843374/how-can-one-setup-a-version-control-system-on-a-local-network-without-a-server)和[这个](https://stackoverflow.com/questions/1598759/git-and-mercurial-compare-and-contrast/1599930#1599930)以及其他一些我目前找不到的内容。但我以前从未使用过任何形式的版本控制，所以我不太了解这些线程在说什么。

我的问题是——我们有两/三个人在 LAN 连接上开发代码，每周或每两周我们必须四处寻找谁更改了什么，然后在机器上同步所有代码。这显然很荒谬，所以我想知道像 git 或 cvs 这样的系统（我对此一无所知）是否会有所帮助。

我不认为将其中一台机器用作“服务器”是一个好主意，因为它们可能并不总是打开。

什么是一个好的版本控制系统？（最好没有非常陡峭的学习曲线，但任何事情都是好的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:18:56.030

您可以在纯分布式模式（仅限 p2p 数据交换）中选择和使用任何 DVCS（D 表示“分布式”）。

对于混合环境（游戏中的 Windows 主机），我建议忘记前面提到的 Git 并使用 Mercurial（作为[Mercurial](https://www.mercurial-scm.org/downloads)本身或[TortoiseHG](http://tortoisehg.bitbucket.io/)），因为

*   神经病更好
*   Mercurial（与 Git 相反）具有非常简单和轻量级的学习曲线（您可以从[Mercurial Kick Start Exercises 开始](http://mercurial.aragost.com/kick-start/en/)，可能仅在[“Basic Mercurial”](http://mercurial.aragost.com/kick-start/en/basic/)和[“Remote Repositories”](http://mercurial.aragost.com/kick-start/en/remote/)上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:34:33.793

我同意你应该使用分布式版本控制系统。Git 是一个不错的选择。使用分布式版本控制系统，您根本*不需要*服务器。这并不意味着你不能拥有一个。建议使用 github.com 之类的在线网站，以防您无法访问您的计算机或病毒在网络中传播或...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:38:36.157

你可以使用 Git 和 Bananajour。

Git 是一个分布式版本控制系统，你不需要服务器来保存你的提交。[http://git-scm.com/](http://git-scm.com/)

Bananajour 是一个 Web 前端，用于在网络上协作和宣传分支机构。[https://github.com/toolmantim/bananajour#readme](https://github.com/toolmantim/bananajour#readme)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:57:03.000

您应该查看以下任何一项：

*   吉特
*   水银
*   塑料单片机（www.plasticscm.com）-> 这是我工作的公司生产的。

它们中的任何一个都可以让您实现新的工作模式，例如我们的“功能分支”或“每个任务的分支”

我在这里写了几篇关于工作方法的文章：

*   [http://codicesoftware.blogspot.com/2010/08/branch-per-task-workflow-explained.html](http://codicesoftware.blogspot.com/2010/08/branch-per-task-workflow-explained.html)
*   而这个，关于 git 流程和相关模式[http://codicesoftware.blogspot.com/2010/03/branching-strategies.html](http://codicesoftware.blogspot.com/2010/03/branching-strategies.html)

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T09:29:01.607

一种可能性是使用[http://www.java.net/](http://www.java.net/)等网站提供的“在线”版本控制。在那里您可以创建一个项目，然后创建一个您和您的朋友可以使用的存储库。这将允许您始终访问存储库，因为它由 java.net 托管。

# python - 在 Fedora 17 上安装 python-igraph-0.6 模块

> ID：13776162
> 
> 赞同：0
> 
> 时间：2012-12-08T09:19:58.833
> 
> 标签：python, fedora, igraph

我尝试了一段时间为我的 EPD-python 安装 python-igraph-0.6 模块。我构建了 C 核心，并按照我在各个站点上的说明进行操作：

```
/home/joseph/epd/bin/python setup.py build 
```

或者

```
/home/joseph/epd/bin/python setup.py install 
```

它总是产生相同的错误：

```
error: command 'gcc' failed with exit status 1 
```

我必须做出可能的解释：“gcc”工作不正常（但我已经用 ./configure、make、make install 编译了 C 部分）或者某些东西没有以某种方式正确链接。我已经看过类似的帖子并安装了 python-devel 包等等......但没有任何改变。

完整的输出是：

```
[root@joseph python-igraph-0.6]# /home/joseph/epd/bin/python setup.py build
Using default include and library paths for compilation
If the compilation fails, please edit the LIBIGRAPH_FALLBACK_*
variables in setup.py or include_dirs and library_dirs in 
setup.cfg to point to the correct directories and libraries
where the C core of igraph is installed
()
Include path: /usr/include /usr/local/include
Library path: 
running build
running build_py
running build_ext
building 'igraph._igraph' extension
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -O2 -fPIC -I/usr/include     -I/usr        /local    /include -I../../build/include -I../../include -I/usr/local    /include -I/usr/include -I/home/joseph/epd/include/python2.7 -c src/common.c -o     build/temp.linux-x86_64-2.7/src/common.o
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -O2 -fPIC -I/usr/include -I/usr/local/include -I../../build/include -I../../include -I/usr/local/include -I/usr/include -I/home/joseph/epd/include/python2.7 -c src/arpackobject.c -o build/temp.linux-x86_64-2.7/src/arpackobject.o
In file included from src/arpackobject.c:23:0:
src/arpackobject.h:27:27: fatal error: igraph_arpack.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:59:30.513

您收到的错误消息表明编译器找不到绑定到 igraph 的 C 核心所需的标头。特别是它缺少一个名为 的文件`igraph_arpack.h`，但这不是唯一的，在此消息之后还会`gcc`继续编译。

igraph 的 Python 接口的`setup.py`脚本依赖于`pkg-config`找出在哪里可以找到标头，但是在您的系统中这会失败，可能是因为`pkg-config`它本身没有安装。所以，我想解决方案如下：

1.  确保`make install`在编译 C 内核后运行。你声称你这样做了，但为了完整起见，我想我还是会提到它。

2.  `pkg-config`在您的系统上安装。

3.  通过键入来检查是否`pkg-config`了解 igraph 已安装的 C 核心`pkg-config --cflags --libs igraph`。如果您看到一堆编译器选项打印到标准输出中，那就没问题了。

4.  再跑`python setup.py install`。这一次应该调用`pkg-config`成功，获得所需的编译器选项，并成功编译 Python 接口。

如果它仍然不起作用（例如，因为您无法`pkg-config`上班），您可以打开`setup.cfg`并编辑`include_dirs`和`library_dirs`变量；前者应指向要找到 igraph 包含文件的文件夹（通常为`/usr/local/include/igraph`或`/usr/include/igraph`，具体取决于您安装 C 内核的确切位置），后者应指向所在的文件夹`libigraph.so`）。

# php - 从 PHP 连接到 RabbitMQ - Windows

> ID：13776164
> 
> 赞同：1
> 
> 时间：2012-12-08T09:20:11.670
> 
> 标签：php, windows-7, rabbitmq

我在我们的一台服务器上运行 RabbitMQ，并试图通过 PHP 连接到它。我正在 Windows7 机器上开发，我的第一行代码如下： $cnn = new AMQPConnection();

它给了我错误： **致命错误：找不到类'AMQPConnection'**

我知道这是我需要安装的东西，但它是什么？我是 PHP 新手，所以有点帮助会很好。

Ps：我可以通过 RabbitMQ admin web 界面连接到 RMQ 服务器。

谢谢杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T12:43:22.300

**php_amqp 1.4.0（稳定版）安装指南：**

1.  [从https://pecl.php.net/package/amqp/1.4.0/windows](https://pecl.php.net/package/amqp/1.4.0/windows)下载适合您的 php 版本的软件包
2.  将 php_amqp.dll 解压到 X:/php/ext/ 目录
3.  解压rabbitmq.1.dll到X:/Windows/system（不是system32）目录
4.  修改 php.ini 文件并在扩展列表末尾添加“extension=php_amqp.dll”行
5.  通过在命令行中执行命令“X:/php/php.exe -m”来验证模块安装
6.  重启网络服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T19:32:29.763

rabbitmq-c 库现在支持 windows，php_amqp pecl 扩展也在 windows 上构建。文档还没有更新，也没有任何官方的二进制版本。但是，我设法让它们构建并在此处下载了一些 32 位 dll：

[http://www.nathanjohnson.info/?p=77](http://www.nathanjohnson.info/?p=77)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:24:08.443

> 我正在 Windows7 机器上开发

使用该特定代码可能会不走运。该类来自[PECL aqmp 扩展](http://pecl.php.net/package/amqp)。在[安装说明](http://php.net/manual/en/amqp.installation.php)中，它指出：

> Windows 用户注意事项：此扩展目前不支持 Windows，因为[librabbitmq](https://github.com/alanxz/rabbitmq-c)库尚不支持 Windows。

您将希望使用[另一个库](https://stackoverflow.com/q/4405992/168868)来代替您的消息队列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T12:21:29.770

@AMQP[安装 php.net](http://php.net/manual/fa/amqp.installation.php)：

> Windows 用户注意事项：此扩展目前不支持 Windows，因为 librabbitmq 库尚不支持 Windows。

但是[在 RabbitMQ 网站上](https://www.rabbitmq.com/install-windows.html)有一个 Windows 安装程序...

显然这个**php.net**页面已经**过时了**

* * *

## 要安装这样做：

1.  [从此官方 PECL amqp 1.4.0 页面](https://pecl.php.net/package/amqp/1.4.0/windows)为您的 php 下载正确的包
2.  解压
3.  添加`amqp.dll`到您的 php`ext`文件夹
4.  添加`rabbitmq.1.dll`到您的 Windows 系统 32 文件夹。

[根据我在这里](http://www.nathanjohnson.info/?p=77)找到的博客上的帖子，我认为它来自同样在这里发布的@NathanJohnson。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-07T11:02:52.083

我是如何让它工作的：

```
My System Config: Win 7 Pro, (x64) XAMPP running PHP 5.6(x86) 
```

按照此处的说明安装 RabbitMQ：

[https://www.rabbitmq.com/install-windows.html](https://www.rabbitmq.com/install-windows.html)

现在从这里下载兼容的扩展

[https://pecl.php.net/package/amqp/1.4.0/windows](https://pecl.php.net/package/amqp/1.4.0/windows)

就我而言，它是“5.6 线程安全 (TS) x86”

现在从 zip 文件 (php_amqp-1.4.0-5.6-ts-vc11-x86.zip) 下载复制 dll“php_amqp.dll”到您的 php 扩展文件夹，在我的情况下它是“xampp/php/ext”并复制 dll“ rabbitmq.1.dll”到“Windows\system”目录。

现在在 php.ini 文件中将您的 php_amqp dll 注册为“extension=php_amqp.dll”

现在重新启动apache。

完毕。现在你不应该得到 AMQPConnection not found 异常。

# objective-c - 什么 (void(^)(NSString *)) 作为方法参数在 Objective-C 中意味着什么？

> ID：13776167
> 
> 赞同：0
> 
> 时间：2012-12-08T09:20:19.250
> 
> 标签：objective-c, methods, block

我必须使用我雇主的一些私有 API，我有这样的方法：

```
- (void)login:(NSString *)username password:(NSString *)password delegate:(void(^)(NSString *))delegate; 
```

什么`(void(^)(NSString *))delegate`意思？

这是参数，但我不知道这里必须有什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:25:44.163

这是一个块指针。如果您不熟悉块，这基本上可以让您将匿名函数内联分配为参数。这里的签名表示该块将 NSString 作为参数，并且不返回任何内容。你会像这样使用它：

```
- (void)login:(NSString *)username password:(NSString *)password delegate:(void(^)(NSString *))delegate;

[someReceiver login:yourUsername password:yourPassword delegate:^(NSString *aString)
{
     // This is the block (annonymous function).  Do something with the aString paramter
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:24:48.547

它表示一个[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)——它本质上是一个闭包（lambda 函数，不管你怎么称呼它）——Apple 对 C 语言的补充。在这种情况下，它返回`void`并接受一个`NSString`对象作为它的唯一参数。

# performance - numpy lstsq -- 内存和运行时性能

> ID：13776168
> 
> 赞同：1
> 
> 时间：2012-12-08T09:20:30.777
> 
> 标签：performance, memory, numpy, linear-algebra

我需要解决（在最小二乘意义上）一大组（50,000）线性系统。每个这样的“系统”是`Ax=B`一个`A`N×K 矩阵，`x`一个 k×1 向量，而 B（显然）是一个 N×1 向量。（在我的例子中，N 是 50,000，K 是 ~10）。

numpy.linalg.lstsq 似乎是显而易见的选择，但由于文档不包含实现细节，我想知道内存和运行时性能：

lstsq 的运行时性能和内存要求是什么？

1.  它会计算 A，A^T，将它们相乘，然后取逆，还是直接计算 A 的伪逆？
2.  有没有办法直接计算结果的每个 X[i]，从而节省内存？会用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T11:36:18.910

[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html)将结果描述为包括奇异值和等级；强烈暗示它正在使用 SVD。

在我的笔记本电脑上进行的快速测试显示，在分配阵列 A 和 B 后，内存根本没有增加（由系统监视器报告）。

```
In [7]: A = np.random.randn(100000, 10)

In [8]: B = np.random.randn(100000)

In [9]: np.linalg.lstsq(A, B)
Out[9]: 
(array([ 0.00240061,  0.0017896 ,  0.00619928,  0.00010278, -0.00411501,
         0.00028532,  0.0003893 , -0.00042893,  0.00178326, -0.00444068]),
 array([ 99695.18278372]),
 10,
 array([ 318.37776275,  318.16578799,  317.82872616,  317.21981114,
         316.80987468,  315.63798002,  315.46574698,  314.73120345,
         313.99948001,  313.61503118])) 
```

# android - 通过 REST 调用获取图像并在 android 上显示

> ID：13776172
> 
> 赞同：2
> 
> 时间：2012-12-08T09:20:41.260
> 
> 标签：android, rest

这是我进行 REST GET 调用的链接。 [http://adtouch.cloudfoundry.com/rest/ad/barcode/529a927973654526a309a77986062566/image](http://adtouch.cloudfoundry.com/rest/ad/barcode/529a927973654526a309a77986062566/image) 在浏览器中打开它时，它会重定向到其他链接并显示图像。我想在 android 上显示这个图像。我无法确定通过此调用获得的内容是什么以及如何将其转换为要在 android 设备上显示的图像。

这是我打的其余电话：

```
HttpClient httpclient = new DefaultHttpClient();  
String temp = "http://adtouch.cloudfoundry.com/rest/ad/barcode/529a927973654526a309a77986062566/image";
HttpGet request = new HttpGet(temp);
HttpResponse response = httpclient.execute(request);
ResponseHandler<String> handler = new BasicResponseHandler();
String result =  httpclient.execute(request, handler);
System.out.println(result); 
```

其结果是许多字符序列，例如：

```
(^( ?( ;QE??QE??ÊMÔâ1MT ??²¤i­@íù¨ùhÙQ¶ê??m7Í¡?mFÏ@3|µu]¿Þ§+Uò?\°Ñ³Qçý?o?MiUWt?*¯÷?ª9Jæ·û´Ý¿59_åùi¬Õq$jE¨)ÿ??Á@D°?©ËÒªÆß7Þ«?õ   q?/ÉR+Tr%F?¨(·LÙQ­9]¨Ê´í?½;}??5???¨ßE??º?ôúc÷ ?·éGÍíFæZ??M­K·ûÔè÷?Þ©<¥Û@Æ?ýÚ±üÕEJ7l O?Z³YêÄÒï¨ÕhK{}ë¹¾íZ?>U¨c}?RG@QGðüÍM2®>\·û´??í?l¨ÿ??xßÂ«NUþón }Ênÿ??î­9UR???nÖ?Å·ýÚo?¿Ä»¿Þ©( 
```

我知道如何为 ImageView 设置图像，但问题是如何从这个调用中获取图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:33:34.310

查看 Javadoc 的[`BitmapFactory`](http://developer.android.com/reference/android/graphics/BitmapFactory.html). 您必须解码 HTTP 响应实体中的流：

```
InputStream in = client.execute(request).getEntity().getContent();
Bitmap bmp = BitmapFactory.decode(in);
in.close(); 
```

请注意，网络操作不应发生在主线程中。从您的代码中不清楚您是否使用 an [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，但是您应该这样做。更新`onPostExecute()`钩子中的图像。

# google-groups-api - 为服务帐户启用了 Google Group Settings API？

> ID：13776174
> 
> 赞同：1
> 
> 时间：2012-12-08T09:20:50.200
> 
> 标签：google-groups-api, google-admin-settings-api, google-groups-settings

大多数 Google Management API 似乎已为服务帐户启用。例如，我可以像这样检索日历：

```
string scope = Google.Apis.Calendar.v3.CalendarService.Scopes.Calendar.ToString().ToLower();
string scope_url = "https://www.googleapis.com/auth/" + scope;
string client_id = "999...@developer.gserviceaccount.com";
string key_file = @"\path\to\my-privatekey.p12";
string key_pass = "notasecret";

AuthorizationServerDescription desc = GoogleAuthenticationServer.Description;
X509Certificate2 key = new X509Certificate2(key_file, key_pass, X509KeyStorageFlags.Exportable);

AssertionFlowClient client = new AssertionFlowClient(desc, key) { ServiceAccountId = client_id, Scope = scope_url };
OAuth2Authenticator<AssertionFlowClient> auth = new OAuth2Authenticator<AssertionFlowClient>(client, AssertionFlowClient.GetState);

CalendarService service = new CalendarService(auth);
var x = service.Calendars.Get("calendarID@mydomain.com").Fetch(); 
```

但是，GroupssettingsService 上的相同代码返回 503 - 服务器不可用。这是否意味着服务帐户不能与该 API 一起使用？

在一个可能相关的问题中，组设置服务的范围似乎是，`apps.groups.settings`但是如果您致电

```
GroupssettingsService.Scopes.AppsGroupsSettings.ToString().ToLower(); 
```

...你得到`appsgroupssettings`了，没有嵌入的句点。

是否有另一种方法可以为 GroupssettingsService 使用服务帐户？或有关正确范围字符串的任何信息？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:24:17.123

为什么需要为此使用服务帐户？您可以使用常规 OAuth 2.0 授权流程从 Google Apps 超级管理员用户获取授权令牌并使用它：

[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-17T02:36:31.807

一段时间后，我找到了这个线程，以及文档中最重要的部分。发帖以免其他人在未来浪费时间。

`Your application must use OAuth 2.0 to authorize requests. No other authorization protocols are supported. If your application uses Google Sign-In, some aspects of authorization are handled for you.`

[请参阅文档的“关于授权协议”部分](https://developers.google.com/admin-sdk/groups-settings/auth)

# android - 如何通知服务活动已完成

> ID：13776182
> 
> 赞同：0
> 
> 时间：2012-12-08T09:22:24.773
> 
> 标签：android, service, android-activity, activity-finish

我有一项服务，它启动这样的活动：

```
 Intent i = new Intent();
    i.setClass(this, MyActivity.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(i); 
```

如何通知服务，MyActivity 已经完成？

任何提示表示赞赏，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:25:26.987

在活动的 OnDestroy 方法中，您可以调用服务的方法，如果您有服务类对象，如果没有，则使用广播接收器，向服务发送一些消息，并在服务中实现该广播接收器.

# android - 支持 NFC 的手机充当 NFC 标签

> ID：13776184
> 
> 赞同：3
> 
> 时间：2012-12-08T09:22:48.000
> 
> 标签：android, nfc

我看过很多关于 NFC 的问题，我遇到的最接近的问题是[Android NFC 手机可以充当 NFC 标签吗？](https://stackoverflow.com/questions/6138077/can-an-android-nfc-phone-act-as-an-nfc-tag)

然而，这个问题是在一年前提出的，当时甚至还没有宣布 Galaxy Nexus，也没有发布 Android 4.0 +，现在在 2012 年底，我有一个运行 Android 4.2.1 (Stock) 的 Galaxy Nexus。我知道如何读取 NFC 标签并从中获取数据等，但现在是否可以复制标签并使用手机充当标签。

这方面的一个例子如下：

*   我有一张公交卡，它基本上只是一个身份，当我扫描这张卡时，它会支付我的公交车票以及向其中添加现金等。

*   如果我可以将数据复制到我的手机上，那会很方便，然后每当我上公共汽车时，而不是使用标签，只需使用手机并将其写入阅读器即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:28:00.287

4.2.1 以及更早的版本不支持卡仿真或任何类似功能。

# c - 使用 fgets 删除字符串

> ID：13776190
> 
> 赞同：0
> 
> 时间：2012-12-08T09:23:32.367
> 
> 标签：c

我有一个普通的文本文件，如下所示：

```
德比塔
1234567 8
拉贾特
123432 4
考希克
685784 7
djghkvnfj
213122 6

```

我想从此文件中删除一个字符串，例如：下面-

```
德比塔
1234567 8
考希克
685784 7
djghkvnfj
213122 6

```

可以看到 rajat 及其对应的字段被删除了：

我想通过 C 做这个？我可以通过以下代码归档这个字符串并将文件指针放在那里：

```
fseek(fp, 0, SEEK_SET);
while(!feof(fp))
{
    fgets(strFileMem, MAX_PATH, fp);
    fseek(fp, 0, SEEK_CUR);
    if( NULL == strstr(strName, strFileMem) )
    {
        break;
    }
}
int ierr = fputs(" ", fp);
ierr = fputs(" ", fp); 
```

知道在 fputs 中放什么吗？？？

任何其他代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:33:54.533

可能的伪代码解决方案：

```
while(fgets())
{
    if (!is_string_i_want_to_throw_away())
        fputs()
} 
```

你遇到的最大问题是你想写入你读取的同一个文件。这并不容易。在写入临时文件时，从原始文件中读取要容易得多。完成后，将临时文件重命名（或复制）为原始文件。

# delphi - 如何有条件地包含一些单位

> ID：13776195
> 
> 赞同：7
> 
> 时间：2012-12-08T09:24:15.680
> 
> 标签：delphi, delphi-xe3

我有各种定义语句来处理包含文件中的不同 Delphi 版本。该包含文件被“包含”在一个单元中。编译器遵守包含文件中给出的定义，但 IDE 不遵守。这导致向uses 子句添加某些单元，这些单元可能已经存在 - 包含在 DEFINE 编译器指令中。

因此，如果添加了一个在 Delphi XE3 之前不可用的单元，您将遇到一个大问题，因为如果您让 IDE 添加该单元并且无法使用没有该单元的 Delphi XE3 之前的版本编译它。

例如，一个项目有一个单元，上面有一个 TActionList。

1.  `MYINCLUDE.INC`只有一个定义`{$DEFINE DELPHIXE3}`

2.  样本单元可能看起来像

    ```
    unit Unit1;

    {$I MYINCLUDE.INC}                

    uses
       Winapi.Windows, 
       Winapi.Messages, 
       System.SysUtils, 
       System.Variants, 
       System.Classes, 
       Vcl.Graphics,
       Vcl.Controls, 
       Vcl.Forms, 
       Vcl.Dialogs,
       {$IFDEF DELPHIXE3} System.Actions, {$ENDIF}
       Vcl.ActnList;
      ... 
    ```

3.  保存后 IDE 添加`System.Actions`添加使用列表的末尾，这反过来会导致*标识符重新声明*的编译器错误。如果您删除它，IDE 将在下次保存时再次添加它。

我刚刚向[QC #111178](http://qc.embarcadero.com/wc/qcmain.aspx?d=111178)报告了这一点。

该错误是否有解决方法？

基督教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:38:56.083

可能最简单的做法是使用单元别名功能来提供帮助。为了使其工作，您需要针对不同的编译器版本进行不同的项目设置。例如，每个支持的编译器版本都有不同的 .dpr 和 .dproj 文件。

在您的 XE2 项目中，您定义一个单元别名，如下所示：

```
System.Actions=Vcl.ActnList 
```

在 XE3 项目中，您省略了该别名。

然后在您的 .pas 文件中，您可以愉快地使用 System.Actions 在任一版本的 Delphi 中都没有问题。

一个更简单的解决方案是创建一个名为的空单元`System.Actions`，该单元仅包含在 XE2 构建的项目中。

# c# - C# gmail 通知程序中的 COM5 端口访问被拒绝

> ID：13776199
> 
> 赞同：-2
> 
> 时间：2012-12-08T09:24:52.590
> 
> 标签：c#, serial-port

我正在用 C# 和 Arduino 制作一个 Gmail 通知器。
该代码检查它是否收到邮件，如果收到，则将“m”发送到串口。
它似乎工作得很好，但问题是在我收到此消息后，

> 未读邮件：0

此消息不断打印在屏幕上：

> 'COM5' 端口访问被拒绝。
> 'COM5' 端口访问被拒绝。
> ...

这显然意味着在代码第一次试用后拒绝访问 COM5。
我试图添加 port.Close(); 到我的代码，但是在第二次试用后代码不会循环。
有点卡在这里。
我的代码似乎有什么问题？
类似的问题似乎在网络上（[拒绝访问端口'COM5'](https://stackoverflow.com/questions/12657479/access-to-the-port-com5-is-denied)），但我真的不明白如何“包装使用 SerialPort”。
谢谢！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO.Ports;
using System.Threading;
using System.Net;
using System.Xml;

namespace GMailNotifier
{
    class GMail
    {
        public static void Main(string[] args)
        {
            while (true)
            {
                try
                {
                    SerialPort port = new SerialPort("COM5", 9600, Parity.None, 8, StopBits.One);
                    port.Open();

                    string Unreadz = "0";
                    Unreadz = CheckMail();
                    Console.WriteLine("Unread Mails: " + Unreadz);

                    if (!Unreadz.Equals("0")) port.Write("m");
                    else port.Write("n");
                }catch (Exception ee){ Console.WriteLine(ee.Message);
                }finally { System.Threading.Thread.Sleep(1000); }
            }
        }
    private static string CheckMail() {
        string result = "0";

        try {
        var url = @"https://gmail.google.com/gmail/feed/atom";
        var USER = "USER";
        var PASS = "PASS";

        var encoded = TextToBase64( USER + ":" + PASS );

        var myWebRequest = HttpWebRequest.Create( url ); 
        myWebRequest.Method = "POST";
        myWebRequest.ContentLength = 0;
        myWebRequest.Headers.Add( "Authorization", "Basic " + encoded );

        var response = myWebRequest.GetResponse();
        var stream = response.GetResponseStream();

        XmlReader reader = XmlReader.Create( stream );
        while ( reader.Read() )
            if ( reader.NodeType == XmlNodeType.Element )
            if ( reader.Name == "fullcount" ) {
                result = reader.ReadElementContentAsString();
                return result;
            }
        } catch ( Exception ee ) { Console.WriteLine( ee.Message ); }
        return result;
    }
    public static string TextToBase64(string sAscii){
        System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
        byte[] bytes = encoding.GetBytes(sAscii);
        return System.Convert.ToBase64String(bytes, 0, bytes.Length);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:32:57.437

您不应该在`while`. 尝试只打开一次端口（在循环之外）并只关闭一次（完成或抛出异常时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:31:32.650

> 我真的不明白如何“包装 SerialPort 的使用”。

这意味着做这样的事情：

```
using (SerialPort port = new SerialPort("COM5", 9600, Parity.None, 8, StopBits.One))
{
    port.Open();

    string Unreadz = "0";
    Unreadz = CheckMail();
    Console.WriteLine("Unread Mails: " + Unreadz);

    if (!Unreadz.Equals("0")) port.Write("m");
    else port.Write("n");
} 
```

该`using`语句将确保调用 SerialPort.Dispose 方法，以便在您使用完毕后释放端口。如果你第一次之后不释放它，那么硬件仍然很忙，你将无法再次打开它（直到它稍后被垃圾收集）。

# android - 谷歌地图和图像叠加

> ID：13776200
> 
> 赞同：0
> 
> 时间：2012-12-08T09:24:53.477
> 
> 标签：android, google-maps

我正在尝试将 2 个图像放在 2 个不同的 gps 位置。图像未显示在地图上。我究竟做错了什么。

```
for (int i = 0; i < subscribedToJourneys.size(); i++) {
        IJourneyDetails journey = subscribedToJourneys.get(i) ;
        Double lat = journey.getSourceGPSX() ;
        Double lng = journey.getSourceGPSY() ;

        Drawable marker = getResources().getDrawable(R.drawable.pushpin);
        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());
        locationMarker = new LocationMarker(this, subscribedToMap, marker,
                (ImageView) findViewById(R.id.drag));
        subscribedToMap.getOverlays().add(locationMarker);
        locationOverlay = new MyLocationOverlay(this, subscribedToMap);
        subscribedToMap.getOverlays().add(locationOverlay);

        lat = journey.getDestinationGPSX() ;
        lng = journey.getDestinationGPSY() ;
        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());
        locationMarker = new LocationMarker(this, subscribedToMap, marker,
                (ImageView) findViewById(R.id.drag));
        subscribedToMap.getOverlays().add(locationMarker);
        locationOverlay = new MyLocationOverlay(this, subscribedToMap);
        subscribedToMap.getOverlays().add(locationOverlay);
    }

public class LocationMarker extends ItemizedOverlay<OverlayItem> {
......
@Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);
        boundCenterBottom(marker);
    }
 ....
 } 
```

编辑：我尝试了以下方法并且它有效。[从这里](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)

```
final Intent intent = new Intent(Intent.ACTION_VIEW,
Uri.parse(
        "http://maps.google.com/maps?" +                "saddr="+YOUR_START_LONGITUDE+","+YOUR_START_LATITUDE+"&daddr="YOUR_END_LONGITUDE+","+YOUR_END_LATITUDE));
     intent.setClassName(
      "com.google.android.apps.maps",
      "com.google.android.maps.MapsActivity"); 
```

开始活动（意图）；

我现在需要每条路线都有不同的颜色。全蓝色让人难以理解。

# delphi - 一个项目中 TActionManager 组件的数量

> ID：13776213
> 
> 赞同：3
> 
> 时间：2012-12-08T09:27:02.627
> 
> 标签：delphi, tactionmanager

我在许多项目中都使用了 D7 中的 TActionLists，每个项目都使用一个似乎相关的 TForm。现在，在 XE2 上开始一个新项目，用户需要一个功能区，这似乎需要一个 TActionManager。

在线阅读和文档并没有让我清楚地了解如何以开发方式使用 TActionManager。我的问题是：

*   我应该只在 ex 中放一个 TActionManager 吗？TDataModule 还是我应该坚持我通常的程序，并在每个 TForm 上放一个？
*   我应该将它与 TActionLists 一起使用，还是仅用于现有项目，TActionManager 稍后会介绍？
*   在 SDI 或 MDI 应用程序中使用 TActionManager 时需要注意什么？
*   链接到示例等表示赞赏。

谢谢，

/米克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T17:44:07.460

(1) 尽管从概念上讲，最好将表单上的组件限制为可视化组件和与表示非常密切相关的组件，将所有其他组件移至数据模块，TActionLists 和 TActionManagers 出于实际原因是规则的例外。如果您将 actionmanager 放在数据模块上，并在表单上有带有按钮和菜单项的操作栏，这些按钮和菜单项链接到 actionmanager 包含的操作，IDE 有时会破坏您所有的操作栏托管控件。为了避免挫败感，请在每个表单中放置一个操作管理器。

(2) 一旦开始使用Actionmanagers，就没有理由使用ActionLists。actionmanager 就像一个动作列表。虽然你可以混合使用，但在一个项目中只使用一种似乎更简单。将 actionband 主菜单的外观与 XPStyle 风格设置与老式主菜单进行比较。

(3) 据我所知，在 SDI 或 MDI 应用程序中使用 actionmanagers 没有问题。

(4) ActionBands 已有十多年的历史了。以下是两位伟大的 Delphi 杰出人物的一些链接...

*   [http://www.blong.com/Conferences/DCon2001/Actions/Actions.htm](http://www.blong.com/Conferences/DCon2001/Actions/Actions.htm)
*   [http://www.stevetrefethen.com/wiki/Default.aspx?Page=Delphi%20ActionBand%20FAQ](http://www.stevetrefethen.com/wiki/Default.aspx?Page=Delphi%20ActionBand%20FAQ)
*   [http://cc.embarcadero.com/Item/19272](http://cc.embarcadero.com/Item/19272)

# java - 带有 URL 模式的 servlet 映射不起作用，必须使用 URL-servlet/servletclassname 才能使用 servlet

> ID：13776215
> 
> 赞同：1
> 
> 时间：2012-12-08T09:27:18.080
> 
> 标签：java, servlets, web-hosting, web.xml

> 我有一个 java (jsp/servlet) 的网络托管空间，我已经尝试了很多次使用 web.xml 文件中的映射及其 URL 模式的 servlet，当我使用该 URL 时，它显示消息“未找到请求的 URL /myservlet在这台服务器上。” 托管服务提供商默认设置的页面。因此，当我向托管服务提供商询问我无法使用 myservlet 或 web.xml 文件中映射的任何 servlet 时，我回复说“要使用您的 servlet，请遵循 URL-www.yourdomain.com/servlet/myservlet”当我使用这个我没有在我的 web.xml 文件中映射的 URL 时，我有很多次 web.xml 文件没有被服务器使用
> 
> 所以我想问它为什么会发生，我的意思是为什么 web.xml 文件不起作用，为什么我必须使用 /servlet/servletclassname 才能使用 servlet，现在我如何使用动态 URL 的 URL 模式......
> 
> 请哪位朋友帮帮我……！！！

这是 Web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>MyServlet</servlet-name>
        <servlet-class>MyPackage.MyServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/MyServlet</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:02:28.063

您是否使用正确的**上下文** 作为 URL 中路径的第一部分？每当您部署应用程序时，您都需要指定一个标识所有 URL 的上下文。任何 url 模式都将**在**该上下文之后应用。假设您有一个名为“MyShop”的上下文，然后使用您提供的 web.xml，您应该调用 http:// *yourdomain* /MyShop/MyServlet 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:49:18.003

先在家里试试。NetBeans IDE（例如）具有良好的服务器集成。您可以使用打包的 Glassfish（或 Tomcat）下载它并在那里进行实验。

有很多部分要放在一起，所以我建议自己尝试一下。尤其是写出`getServletContextPath`和所有那些部分路径获取器。

签入 web.xml

*   网络应用程序/显示名称
*   web-app / servlet-mapping / url-pattern+

同样通过自动部署，战争名称可能很重要。

# sql - 警告：已编译但在 sql developer 中触发编译错误

> ID：13776218
> 
> 赞同：0
> 
> 时间：2012-12-08T09:27:46.753
> 
> 标签：sql, oracle, syntax, warnings, compiled

```
ALTER TABLE student ADD gpa NUMBER;
CREATE OR REPLACE TRIGGER "USER36401"."GETGPA" AFTER
  DELETE OR
  INSERT OR
  UPDATE ON grade_report FOR EACH row DECLARE totalqp NUMBER :=0;

  totalgpa      NUMBER :=0;
  totalcreds    NUMBER :=0;
  prevqp        NUMBER :=0;
  prevgpa       NUMBER :=0;
  prevcreds     NUMBER :=0;
  incomingqp    NUMBER :=0;
  incominggpa   NUMBER :=0;
  incomingcreds NUMBER :=0;
  temp          NUMBER :=0;
  BEGIN
    CASE
    WHEN updating THEN
      UPDATE student SET student.gpa = NVL(student.gpa,0);
      SELECT student.gpa
      INTO temp
      FROM student
      WHERE student.student_number = :NEW.student_Number;
      IF temp                      <1 THEN
        totalqp                   := temp;
        SELECT DISTINCT DECODE(:NEW.GRADE,'A','4','B','3','C','2','D','1','F','0')
        INTO temp
        FROM student,
          section,
          course
        WHERE :NEW.student_number   = student.student_number
        AND :NEW.section_identifier = section.section_identifier
        AND section.course_number   = course.course_number;
        UPDATE student
        SET student.gpa              = temp
        WHERE student.student_number = :NEW.student_number;
      ELSE
        prevgpa := temp;
        SELECT student.total_credit_hours
        INTO temp
        FROM student
        WHERE student.student_number = :NEW.student_number;

        prevcreds := temp;
        SELECT DISTINCT course.credit_hours
        INTO temp
        FROM course,
          section
        WHERE course.course_number    = section.course_number
        AND section.section_identifier= :NEW.section_identifier;
        --current
        SELECT DISTINCT course.credit_hours
        INTO temp
        FROM course,
          section
        WHERE course.course_number    = section.course_number
        AND section.section_identifier= :NEW.section_identifier;

        incomingcreds := temp;
        prevcreds     := prevcreds - incomingcreds;
        prevqp        := prevgpa   * prevcreds;
        --total quality points before add
        SELECT DECODE(:NEW.GRADE,'A','4','B','3','C','2','D','1','F','0')
        INTO temp
        FROM student,
          section,
          course
        WHERE :NEW.student_number   = student.student_number
        AND :NEW.section_identifier = section.section_identifier
        AND section.course_number   = course.course_number;

        incominggpa := temp;
        --gpa being added before quality points
        SELECT DISTINCT course.credit_hours
        INTO temp
        FROM course,
          section
        WHERE course.course_number    = section.course_number
        AND section.section_identifier= :NEW.section_identifier;

        incomingqp := incominggpa*incomingcreds;
        totalqp    := prevqp     + incomingqp;
        totalcreds := prevcreds  + incomingcreds;
        totalgpa   := totalqp    / totalcreds;
        UPDATE student
        SET gpa                      = totalgpa
        WHERE student.student_number = :NEW.student_number;
      END IF;
    WHEN DELETING then
    Select * from student where student.student_number = :NEW.student_number;
    END CASE;
  END; 
```

目标是让触发器在删除时执行“[尚未实现]”的操作。

当我编译时，它说编译，但有错误警告。决赛周我已经筋疲力尽了，这是最后一个项目。我找不到错误所在，我确定这是我没有发现的语法问题。任何帮助是极大的赞赏。

编辑：另外，我知道这可能是实现我正在尝试做的最无效的方式。但我的代码完全基于教授列出的我们可以在课堂上的幻灯片中使用的内容。坦率地说，这是针对我的次要专业，而且我是一名大四学生，所以我并不在乎。我只需要它工作。

编辑3：

从编译触发脚本：ALTER TABLE student 成功。警告：执行已完成，警告 TRIGGER "USER36401"."GETGPA" 已编译。

```
insert into grade_report values ('17','112','B');
select * from student;
insert into grade_report values ('17','119','C');
select * from student;
insert into grade_report values ('8','85','A');
select * from student;
insert into grade_report values ('8','92','A');
select * from student;
insert into grade_report values ('8','102','B');
select * from student;
insert into grade_report values ('8','135','A'); 
```

返回错误：“从命令中的第 1 行开始的错误：插入到grade_report 值（'17'，'112'，'B'）命令行错误：1 列：12 错误报告：SQL 错误：ORA-04098：触发器' USER36401.GETGPA' 无效并且重新验证失败 04098\. 00000 - “触发器 '%s.%s' 无效并且重新验证失败” *原因：尝试检索触发器以执行并且发现无效. 这也意味着触发器的编译/授权失败。*操作：选项是解决编译/授权错误、禁用触发器或删除触发器。"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:38:45.593

您最后一个选择语句（在案例的“删除”分支中），没有“INTO”子句。此外，您使用`SELECT *`, 而您需要指定要选择到变量中的确切字段。

您在案件的另一个分支中做同样的事情，为什么不看看呢？

# push-notification - GCM空中扩展上的自定义通知声音

> ID：13776221
> 
> 赞同：0
> 
> 时间：2012-12-08T09:28:08.020
> 
> 标签：push-notification, google-cloud-messaging, air-native-extension

我正在构建一个 GCM 扩展，AS3 开发人员可以在 sdcard 上设置 mp3 文件的位置，并且当 GCM 通知运行时，播放自定义声音。一切都好，一切都好。

但是当我关闭我的 air 应用程序并从服务器发送通知时，将播放 android 默认声音。发生这种情况是因为当 air 应用程序关闭时，它的上下文为空，并且扩展程序无法访问应用程序设置的参数，因此它播放默认声音。

我知道我可以在 .ane 中创建资源并将它们用作自定义声音，但我不想这样做。我想让 AS3 开发人员可以自由选择声音文件的位置。

有任何想法吗？谢谢，哈迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:03:21.167

这是一个无耻的自我推销，但我认为告诉正在寻找这个的人在这里检查完成的扩展是很好的：http: [//myappsnippet.com/gcm/](http://myappsnippet.com/gcm/)

空气扩展支持自定义自定义声音和图标！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:33:29.830

您可能必须向应用程序添加一些设置，这些设置存储在原生 Android 范围内的某个位置，并从 GCM 通知接收器中访问它们。

看看 SharedPreferences

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

例如：

```
//
//  Save a shared preference
SharedPreferences sharedPreferences = context.getActivity().getSharedPreferences( "YOUR_PREFERENCES_NAME", Activity.MODE_PRIVATE );
Editor preferencesEditor = sharedPreferences.edit();
preferencesEditor.putString( "customNotificationSound",  soundLocation );
preferencesEditor.commit(); 
```

然后在你的接收器中：

```
SharedPreferences sharedPreferences = context.getActivity().getSharedPreferences( "YOUR_PREFERENCES_NAME", Activity.MODE_PRIVATE );
String soundLocation = sharedPreferences.getBoolean( "customNotificationSound", false ); 
```

# vb.net - VB.NET 键盘钩子和 pinvok

> ID：13776222
> 
> 赞同：-2
> 
> 时间：2012-12-08T09:28:20.687
> 
> 标签：vb.net, keyboard, pinvoke

您好，我有一个 VB NET 程序，它使用以下类（http://sim0n.wordpress.com/2009/03/28/vbnet-keyboard-hook-class/）来挂钩键盘：

```
Imports System.Runtime.InteropServices

Public Class KeyboardHook

    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function SetWindowsHookEx(ByVal idHook As Integer, ByVal HookProc As KBDLLHookProc, ByVal hInstance As IntPtr, ByVal wParam As Integer) As Integer
    End Function
    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function CallNextHookEx(ByVal idHook As Integer, ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
    End Function
    <DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
    Private Overloads Shared Function UnhookWindowsHookEx(ByVal idHook As Integer) As Boolean
    End Function

    <StructLayout(LayoutKind.Sequential)> _
    Private Structure KBDLLHOOKSTRUCT
        Public vkCode As UInt32
        Public scanCode As UInt32
        Public flags As KBDLLHOOKSTRUCTFlags
        Public time As UInt32
        Public dwExtraInfo As UIntPtr
    End Structure

    <Flags()> _
    Private Enum KBDLLHOOKSTRUCTFlags As UInt32
        LLKHF_EXTENDED = &H1
        LLKHF_INJECTED = &H10
        LLKHF_ALTDOWN = &H20
        LLKHF_UP = &H80
    End Enum

    Public Shared Event KeyDown(ByVal Key As Keys)
    Public Shared Event KeyUp(ByVal Key As Keys)

    Private Const WH_KEYBOARD_LL As Integer = 13
    Private Const HC_ACTION As Integer = 0
    Private Const WM_KEYDOWN = &H100
    Private Const WM_KEYUP = &H101
    Private Const WM_SYSKEYDOWN = &H104
    Private Const WM_SYSKEYUP = &H105

    Private Delegate Function KBDLLHookProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer

    Private KBDLLHookProcDelegate As KBDLLHookProc = New KBDLLHookProc(AddressOf KeyboardProc)
    Private HHookID As IntPtr = IntPtr.Zero

    Private Function KeyboardProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
        If (nCode = HC_ACTION) Then
            Dim struct As KBDLLHOOKSTRUCT
            Select Case wParam
                Case WM_KEYDOWN, WM_SYSKEYDOWN
                    RaiseEvent KeyDown(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
                Case WM_KEYUP, WM_SYSKEYUP
                    RaiseEvent KeyUp(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
            End Select
        End If
        Return CallNextHookEx(IntPtr.Zero, nCode, wParam, lParam)
    End Function

    Public Sub New()
        HHookID = SetWindowsHookEx(WH_KEYBOARD_LL, KBDLLHookProcDelegate, System.Runtime.InteropServices.Marshal.GetHINSTANCE(System.Reflection.Assembly.GetExecutingAssembly.GetModules()(0)).ToInt32, 0)
        If HHookID = IntPtr.Zero Then
            Throw New Exception("Could not set keyboard hook")
        End If
    End Sub

    Protected Overrides Sub Finalize()
        If Not HHookID = IntPtr.Zero Then
            UnhookWindowsHookEx(HHookID)
        End If
        MyBase.Finalize()
    End Sub

End Class 
```

在我的程序中，我正在使用这样的类：

```
 Private WithEvents kbHook As New KeyboardHook
    Private Sub kbHook_KeyDown(ByVal Key As System.Windows.Forms.Keys) Handles kbHook.KeyDown 
MessageBox.show(Key.ToString) 
    End Sub Private 
```

我正在寻找的是捕获所有用户输入并将它们与单词列表进行比较，如果这些输入匹配，则会弹出一个消息框，显示“找到匹配”。实际上，每次按下键盘键时，都会显示一个带有键入的键值的消息框。我听说过 pinvoke 的低级钩子，但我不知道它是什么以及如何使用它。这是一个链接，可以更好地描述我想要的东西 (http://www.youtube.com/watch?v=OgoDzkboT0A) 提前感谢您提供任何有用的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:05:58.413

我认为您最好的选择是缓冲所有按键，并在每次输入后检查该值是否是您的关键字之一。您可能希望在按下空格、制表符或回车等键时重置缓冲区。您可能还需要处理退格以删除缓冲区中的最后一个字符。祝你好运！

```
Private Buffer As String
Private Words As String() = New String() {"bank", "rob", "money"}

Private Sub TextBox1_KeyDown(sender As Object, e As KeyEventArgs) Handles TextBox1.KeyDown
    If e.KeyCode = Keys.Space Then
        Buffer = String.Empty
    Else
        Buffer &= Convert.ToChar(e.KeyCode)
    End If

    If Not Array.IndexOf(Words, Buffer.ToLower()) = -1 Then
        MessageBox.Show("Match found!")
    End If
End Sub 
```

# ios - 适用于 iOS 的 Facebook SDK 3.1 使用本机分享对话框作为朋友墙

> ID：13776225
> 
> 赞同：0
> 
> 时间：2012-12-08T09:29:18.300
> 
> 标签：ios, facebook, sdk

有人知道如何使用新的 FB SDK 在朋友墙上发帖吗？我没有在 FB 文档中看到任何内容，也没有在 SDK 本身中找到任何相关内容（目前还没有）。基本上，我正在寻找相当于 ..."%@/feed", fbid..." 的图形请求或来自现已弃用的 facebook 对象（旧 SDK）的“to”参数。

# android - 在 Android 上编译 NEON 代码时出错

> ID：13776228
> 
> 赞同：2
> 
> 时间：2012-12-08T09:30:08.377
> 
> 标签：android, gcc, android-ndk, neon

这是简单的二值化函数

```
void binarize(void *output, const void *input, int begin, int end, uint8_t threshold) {
#ifdef __ARM_NEON__
    uint8x16_t thresholdVector = vdupq_n_u8(threshold);
    uint8x16_t highValueVector = vdupq_n_u8(255);
    uint8x16_t* __restrict inputVector = (uint8x16_t*)input;
    uint8x16_t* __restrict outputVector = (uint8x16_t*)output;
    for ( ; begin < end; begin += 16, ++inputVector, ++outputVector) {
        *outputVector = (*inputVector > thresholdVector) & highValueVector;
    }
#endif
} 
```

它在 iOS 上运行良好。但是，当我为 Android 编译它时，它给了我一个错误：

> 错误：'uint8x16_t {aka __vector(16) __builtin_neon_uqi}'和'uint8x16_t {aka __vector(16) __builtin_neon_uqi}'类型的无效操作数到二进制'operator>'

我在 Android.mk 中使用这个标志来启用 NEON：

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
      LOCAL_ARM_NEON := true
endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:53:16.070

不同之处在于不同的编译器。对于 iOS，您使用 Clang 进行编译，但对于 Android，您使用 GCC 构建代码（除非您覆盖默认值）。

GCC 对向量类型更加愚蠢，不能将它们与诸如`>`or之类的 C/C++ 运算符一起使用`&`。所以你有两个基本的选择：

1.  尝试使用来自最新 Android NDK r8c 的 Clang 进行编译

    把`NDK_TOOLCHAIN_VERSION=clang3.1`它交给你`Application.mk`。

2.  `vld1q_u8`使用for load、`vst1q_u8`for store、`vcgtq_u8`for`operator >`和`vandq_u8`for显式重写代码`operator &`

# c# - Intellisense 未检测到变量

> ID：13776230
> 
> 赞同：0
> 
> 时间：2012-12-08T09:30:44.320
> 
> 标签：c#, visual-studio-2010, intellisense

我遇到了一个奇怪的问题，在过去的几个小时里，我一直在搜索和尝试各种修复方法，但没有任何效果。

问题是当我创建一个项目时，Intellisense 停止识别我添加的所有新类中的局部变量。例如，如果我声明“布尔成功；” 在 Program.cs 中，然后开始输入“成功”，一切正常...

但是当我添加一个新类并在其中声明“布尔成功”时 当我开始输入“成功”时，Intellisense 只是找不到变量，就像它不存在一样。

我已经尝试过的：

1.  删除 .suo 文件
2.  重置 VS 设置
3.  运行“devenv /resetskippkgs”
4.  按 ctrl + alt + 空格

它发生在今天早上，我不知道是怎么回事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:13:59.277

已创建变量的 Intellisense 将在声明的方法中工作，而不是在类中。因为在一个类中你不能为变量赋值，但你可以在方法中为变量赋值。

```
In a class, variables can be declared but cant assign values to them
In a method, variables can be declared and also values can be assigned to them. 
```

因此，Intellisense 在声明后不会在类中显示变量名，因为没有用显示它。

并且如果该`Class`属性将*Build Action*设置为*Content*状态，则智能感知将不起作用。要更正它，只需将*Build Action*设置为*Compile*状态。

# php - PHP printf 在格式化字符串后添加了一些东西

> ID：13776231
> 
> 赞同：-2
> 
> 时间：2012-12-08T09:30:53.040
> 
> 标签：php, printf

当我使用 printf 时，

```
printf("%.2f zł", 20.4); 
```

它返回

```
20.40 zł9 
```

但我想要

```
20.40 zł 
```

我用`sprintf("%.2f zł", 20.4)`的时候没有问题。

`zł`是波兰货币符号。当我用“l”替换“ł”时，我仍然遇到这样的问题，所以看起来这与编码无关。

**如何正确使用 printf 货币？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:39:38.790

您确定 9 不是不同打印的结果，在您的代码中进一步发生吗？尝试注释掉这个 printf 行并查看 9 是否仍然存在。

如果用常规 L 替换波兰字符不能解决问题，则您正确评估它不是编码问题。

`printf()`和我能想到的唯一区别`sprintf()`似乎是它们返回结果的方式：`printf`输出到 HTML 缓冲区，同时`sprintf`返回一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:42:43.193

我得到了它。

我写：

```
echo printf(...); 
```

而不仅仅是：

```
printf(...); 
```

在 printf() 生成的字符串之后，我得到了字符串长度，这是 printf 返回的值（实际上 - 在 123.45 值的情况下添加的数字是 9，在 20.4 的情况下是数字 8）。

# c - 为什么特定函数的 C 名称（链接符号）应以 'pg_finfo_' 开头？

> ID：13776232
> 
> 赞同：2
> 
> 时间：2012-12-08T09:31:05.047
> 
> 标签：c, postgresql

我有一个功能的 DLL

```
#include "postgres.h"
#include <string.h>
#include "fmgr.h"

#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif

PG_FUNCTION_INFO_V1(add_one_float8);

Datum
add_one_float8(PG_FUNCTION_ARGS)
{
    float8 arg = PG_GETARG_FLOAT8(0);
    PG_RETURN_FLOAT8(arg + 1.0);
} 
```

当我尝试创建函数时：

```
 CREATE FUNCTION add_one(double precision) RETURNS double precision
   AS 'DIRECTORY\mylib.dll', 'add_one_float8'
   LANGUAGE C STRICT; 
```

我收到错误“错误：找不到函数“add_one_float8””但使用“pg_finfo_add_one_float8”创建脚本成功结束。

那么在函数名前加上“pg_finfo_”是正常的还是我做错了？

PostgreSQL 版本 9.1

谢谢你。

更新：

生成文件

```
PG_DIR=D:/Programs/PostgreSQL
PG_LIB=$(PG_DIR)/lib/postgres.lib
PG_INCLUDE_SERVER=$(PG_DIR)/include/server
PG_INCLUDE=$(PG_DIR)/include
PG_INCLUDE_PORT_WIN32=$(PG_DIR)/include/server/port/win32
PG_INCLUDE_PORT_WIN32_MSVC=$(PG_DIR)/include/server/port/win32_msvc
MSDK_INCLUDE="D:\Program Files\Microsoft SDKs\Windows\v7.0\Include"
COMPILER_INCLUDES=/I$(PG_INCLUDE) /I$(PG_INCLUDE_SERVER) /I  $(PG_INCLUDE_PORT_WIN32) /I$(PG_INCLUDE_PORT_WIN32_MSVC) /I$(MSDK_INCLUDE) 

LINKER_DLL_FLAGS=/MACHINE:X86
COMPILER_DLL_FLAGS=/c /TC /D "WIN32"

DLL_NAME=mylib
DLL_DEST=D:\lib

OBJS=myfunc.obj

.c.obj:
    cl $(COMPILER_DLL_FLAGS) $(COMPILER_INCLUDES) $*.c  

all:$(OBJS)
    link -out:$(DLL_DEST)\$(DLL_NAME).dll /DLL $(OBJS) $(PG_LIB) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:23:33.963

在 Windows 上构建扩展是一种痛苦。我不确定是否真的有任何标准的推荐方法。

如果您使用`nmake`自定义 makefile 进行编译，则需要提供适当的编译器参数。

这`cl`是在我的 Windows 机器上构建核心代码时调用的内容，使用带有 的 Windows SDK 7.1 `setenv /x86 /release /xp`，全部在一行上：

> `C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /Isrc/include /Isrc/include/port/win32 /Isrc/include/port/win32_msvc
> /I"D:\libs\x86\Release\zlib-1.2.7\include" /Isrc\backend /Zi /nologo /W3 /WX- /Ox /Oy- /D WIN32 /D _WINDOWS /D __WINDOWS__ /D __WIN32__
> /D EXEC_BACKEND /D WIN32_STACK_RLIMIT=4194304 /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D BUILDING_DLL /D _USE_32BIT_TIME_T /D _MBCS /GF /Gm- /EHsc /MD /GS /fp:precise /Zc:wchar_t /Zc:forScope /Gd /TC /wd4018 /wd4244 /wd4273 /wd4102 /wd4090 /wd4267 /analyze- /errorReport:queue`

Contrib 模块可能会得到一些不同的选项；我没有仔细检查。关键是有很多编译器标志 - 主要是定义 - 在构建时传递。

我通常在 Windows 上构建模块的方式是在 contrib/ 目录中使用我的模块构建 PostgreSQL 源代码树的副本，使用正则`build.pl`来编译它。我敢肯定有一个更明智的方法，我不需要做足够的麻烦来寻找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:22:16.297

问题解决了！

此代码工作正常（来源： http: [//www.ics.uci.edu/~jacobson/cs122b/Project/06-CFunctions.html](http://www.ics.uci.edu/~jacobson/cs122b/Project/06-CFunctions.html)）

```
/* Use 32-bit timer (provided header file uses 64-bit timer, not
 * compatible with Windows postgreSQL versions */
#define _USE_32BIT_TIME_T

/* Ensure that Pg_module_function and friends are declared __declspec(dllexport) */
#ifndef BUILDING_MODULE
#define BUILDING_MODULE
#endif

#include "postgres.h"
#include "fmgr.h"

/*--------------- BEGIN REDEFINITION OF PG MACROS -------------------* 
 These rewritten versions of PG_MODULE_MAGIC and PG_FUNCTION_INFO_V1
 * declare the module functions as __declspec(dllexport) when building
 * a module. They also provide PGMODULEEXPORT for exporting functions
 * in user DLLs.
 */
#undef PG_MODULE_MAGIC
#undef PG_FUNCTION_INFO_V1

#define PGMODULEEXPORT __declspec (dllexport)

#define PG_MODULE_MAGIC \
PGMODULEEXPORT const Pg_magic_struct * \
PG_MAGIC_FUNCTION_NAME(void) \
{ \
    static const Pg_magic_struct Pg_magic_data = PG_MODULE_MAGIC_DATA; \
    return &Pg_magic_data; \
} \
extern int no_such_variable

#define PG_FUNCTION_INFO_V1(funcname) \
PGMODULEEXPORT const Pg_finfo_record *  \
CppConcat(pg_finfo_,funcname) (void) \
{ \
    static const Pg_finfo_record my_finfo = { 1 }; \
    return &my_finfo; \
} \
extern int no_such_variable

/*--------------- END REDEFINITION OF PG MACROS -------------------*/

PG_MODULE_MAGIC;

PG_FUNCTION_INFO_V1(add_one_float8);

PGMODULEEXPORT Datum add_one_float8(PG_FUNCTION_ARGS)
{
    float8   arg = PG_GETARG_FLOAT8(0);
    PG_RETURN_FLOAT8(arg + 1.0);
} 
```

您应该只`nmake`在问题中使用上面的 makefile 编译此代码，并通过 CREATE FUNCTION 命令将函数添加到数据库中：

```
CREATE FUNCTION add_one(double precision) RETURNS double precision
AS 'DIRECTORY\mylib.dll', 'add_one_float8'
LANGUAGE C STRICT; 
```

# c - 我正在使用叉子和管道。当父进程突然中止时，子进程不会被杀死（例如分段错误）

> ID：13776244
> 
> 赞同：2
> 
> 时间：2012-12-08T09:33:21.117
> 
> 标签：c

我正在使用 fork 创建子进程和父进程，并使用管道在它们之间发送和接收消息。我正在运行带有一些输入的父进程并调用子进程。如果父进程成功执行，子进程将自动终止但是如果我在父进程运行时按 ctrl+c 或者如果有任何分段错误，则父进程被杀死但子进程没有被杀死。

当父进程突然中断时，任何人都可以向我发布杀死子进程的逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:05:23.100

由于您已经使用管道进行通信，这应该很容易。

管道读取阻塞，直到有数据要读取，如果父进程是写入者并且死了，你会`EOF`立即得到。如果您的父进程永远不会关闭它的写入结束，那么您就有一种可靠的方法来检测死亡。

如果在没有读取器时忽略信号，则管道写入命中`SIGPIPE`并从调用返回。`EPIPE`

在子进程中，在管道的 fd 上选择（如果可以阻止）并在适当的时间终止进程。没有`SIGCHLD`等同于父母死亡。

`man 7 pipe`以获得良好的概述。摘抄：

```
If  all file descriptors referring to the write end of a pipe have been closed, then an attempt to read(2) from
the pipe will see end-of-file (read(2) will return 0).  If all file descriptors referring to the read end of  a
pipe have been closed, then a write(2) will cause a SIGPIPE signal to be generated for the calling process.  If
the calling process is ignoring this signal, then write(2) fails with the error  EPIPE.   An  application  that
uses  pipe(2)  and  fork(2) should use suitable close(2) calls to close unnecessary duplicate file descriptors;
this ensures that end-of-file and SIGPIPE/EPIPE are delivered when appropriate. 
```

# windows-phone-7 - 无法在 Web 浏览器 Windows Phone 7 中“下边距”图像

> ID：13776247
> 
> 赞同：1
> 
> 时间：2012-12-08T09:33:38.543
> 
> 标签：windows-phone-7

我有一个网络浏览器。我加载了一个只有图片的网址。我想隐藏这张图片的底部，但我不能通过“margin-bottom”来做到这一点（在网络环境中我可以通过这种方式），但尝试到 margin-top 并且它可以工作。

```
string html = String.Format("<html><head></head><body><img style='width:100%;margin-bottom:-34px;' src='{0}'/></body></html>", "http://s2.haivl.com/data/photos2/20121208/377fafdde8d74135bb31c7e3d51c3a08/medium-b578f6f064994652b5b78709e4896841-400.jpg");
myBrowserControl.NavigateToString(html); 
```

有谁能够帮我？谢谢

# jquery - 获取空输入的正确标签

> ID：13776250
> 
> 赞同：0
> 
> 时间：2012-12-08T09:33:55.537
> 
> 标签：jquery, validation, input, label

朋友们，

我有如下表格；

```
<form method="post" id="contact_form" action="">
<label for="name">Name</label>
<input type="text" name="name"  id="name" />

<label for="email">Email</label>
<input type="text" name="email" id="email" />

<label for="purpose">Purpose</label>
<input type="text" name="purpose" id="purpose"  />                              

    <input type="submit" value="Submit"/> 
</form> 
```

当我提交表单时，我想识别并添加一个名为“错误”的类，仅用于使用 jQuery 具有空值的输入标签。

请帮我解决这个问题。

谢谢和问候，Rushenn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:46:24.543

```
.homework {
   color: red;
} 
```

```
$('#contact_form').submit(function(){ // listen to the submit event
    var err = 0;  // define a varible with initial value of 0
    $('input[type=text]', this).each(function(){ // iterate through the text inputs
       var val = $.trim(this.value); // trim and store the value
       // if the value is empty add a class to the previous label otherwise remove it(is it has)
       $(this).prev().toggleClass('homework', !val ); 
       if (!val) err++; // if the value is empty add 1 to the err variable  
    })
    return !err; // return false if there is one or more empty field(s)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:02:11.387

试试这个：

```
$('#contact_form').submit(function() {
    $(this).find("input:text").each(function() {
        if ($.trim($(this).val()) == '') {
            $(this).css({ border: "2px red solid" });
            return false;
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:38:17.947

```
$('form#contact_form').submit(function(){
    if($('#name').val() == ''){
        $('label[for="name"]').addClass('error');
        return false;
    } else if($('#email').val() == ''){
        $('label[for="email"]').addClass('error');
        return false;
    } else if($('#purpose').val() == ''){
        $('label[for="purpose"]').addClass('error');
        return false;
    }
    return true;
}); 
```

# java - JComponent 到 JLayeredPane

> ID：13776251
> 
> 赞同：0
> 
> 时间：2012-12-08T09:33:57.143
> 
> 标签：java, swing, layout

我希望有一个`JComponent`放置并与其他组件共享空间，具体取决于我在运行时选择的配置。对于第一个配置，`JComponent`放置在`BorderLayout`东侧或西侧，并与框架中的其他组件共享空间。对于第二种配置，`JComponent`必须将其放在所有其他组件的顶部，将它们重叠并让它们调整大小。
我所做的是创建一个`JPanel`带有 a 的`BorderLayout`并将其全部放置在我`JComponent`的 NORTH、CENTER 和 EAST 侧。这是初始配置。我将它`JPanel`放在`JLayeredPane`DefaultLayer 层中，并将其设置`JLayeredPane`为我的`JFrame`. 我想用它`JLayeredPane`来放置东侧`JComponent`在上层（如果选择了第二个配置）并将其放回 DefaultLayer（如果选择了第一个配置）。

希望我很清楚并提供足够的细节以获得一些帮助。提前致谢。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JToggleButton;

/**
 * @see http://stackoverflow.com/q/13776251/230513
 */
public class NewJavaGUI {

    class Desktop {

        private JPanel desktop;
        private JLayeredPane layeredPane;
        private HidingArea hidingArea;
        private final JToggleButton toggleShowHide;

        public Desktop() {
            desktop = new JPanel(new BorderLayout(5, 5));
            desktop.setBounds(0, 0, 600, 400);
            layeredPane = new JLayeredPane(){

                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(800, 400);
                }

            };
            layeredPane.add(desktop);
            NorthArea northArea = new NorthArea();
            northArea.setLayout(new BoxLayout(northArea, BoxLayout.LINE_AXIS));
            toggleShowHide = new JToggleButton("Show");
            toggleShowHide.addItemListener(new ShowHideItemListener());
            JRadioButton conf1btn = new JRadioButton("In desktop");
            conf1btn.setOpaque(false);
            JRadioButton conf2btn = new JRadioButton("In layered pane");
            conf2btn.setOpaque(false);
            ButtonGroup group = new ButtonGroup();
            group.add(conf1btn);
            group.add(conf2btn);
            northArea.add(conf1btn);
            northArea.add(conf2btn);
            northArea.add(Box.createHorizontalGlue());
            northArea.add(toggleShowHide);
            conf1btn.addActionListener(new SetComponentInDesktopListener());
            conf2btn.addActionListener(new SetComponentInLayeredPaneListener());
            desktop.add(northArea, BorderLayout.PAGE_START);
            desktop.add(new CenterArea(), BorderLayout.CENTER);
            hidingArea = new HidingArea();
            desktop.add(hidingArea, BorderLayout.LINE_END);
            conf1btn.setSelected(true);
        }

        /**
        * The layered pane is added to the contentPane of a JFrame
        */
        JLayeredPane getComponent() {
            return layeredPane;
        }

        private class HidingArea extends JPanel {

            public HidingArea() {
                setBackground(Color.darkGray);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(200, 400);
            }

            @Override
            public Dimension getMinimumSize() {
                return new Dimension(200, 350);
            }
        }

        private class NorthArea extends JPanel {

            public NorthArea() {
                setBackground(Color.gray);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 50);
            }

            @Override
            public Dimension getMinimumSize() {
                return new Dimension(600, 50);
            }
        }

        private class CenterArea extends JPanel {

            public CenterArea() {
                setBackground(Color.white);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 400);
            }

            @Override
            public Dimension getMinimumSize() {
                return new Dimension(400, 400);
            }
        }

        /**
        * Hide or show the area contained in the JLayeredPane.
        */
        private class ShowHideItemListener implements ItemListener {

            @Override
            public void itemStateChanged(ItemEvent e) {
                JToggleButton toggle = (JToggleButton) e.getSource();
                if (e.getStateChange() == ItemEvent.SELECTED) {
                    toggle.setText("Hide");
                    hidingArea.setBounds(
                        getBounds().width - hidingArea.getPreferredSize().width,
                        getBounds().height - hidingArea.getPreferredSize().height,
                        hidingArea.getPreferredSize().width,
                        hidingArea.getPreferredSize().height);
                } else {
                    toggle.setText("Show");
                    hidingArea.setBounds(
                        getBounds().width,
                        getBounds().height - hidingArea.getPreferredSize().height,
                        hidingArea.getPreferredSize().width,
                        hidingArea.getPreferredSize().height);
                }
            }
        }

        /**
        * @return the rectangular dimensions of the desktop.
        */
        private Rectangle getBounds() {
            return desktop.getBounds();
        }

        /**
        * Add Hiding area to desktop.
        */
        private class SetComponentInDesktopListener implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                toggleShowHide.setEnabled(false);
                Component[] components = desktop.getComponents();
                boolean toAdd = true;
                for (Component component : components) {
                    if (component.equals(hidingArea)) {
                        toAdd = false;
                    }
                }
                if (toAdd) {
                    desktop.add(hidingArea, BorderLayout.LINE_END);
                }
            }
        }

        /**
        * Remove Hiding area from desktop and add it to the JLayeredPane.
        */
        private class SetComponentInLayeredPaneListener implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                toggleShowHide.setEnabled(true);
                desktop.remove(hidingArea);
                getComponent().add(hidingArea, (Integer) (JLayeredPane.DEFAULT_LAYER + 50));
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("NewJavaGUI");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Desktop d = new Desktop();
        f.add(d.getComponent());
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new NewJavaGUI().display();
            }
        });
    }
} 
```

# iphone - 如何在iphone中合并两个项目

> ID：13776252
> 
> 赞同：1
> 
> 时间：2012-12-08T09:34:00.977
> 
> 标签：iphone

我是电话编程新手。我想将一个项目添加到另一个项目中。在一个项目中，我使用了根视图控制器，另一个项目是视图控制器。在根视图控制器中，如果我单击单元格将显示私有文档文件夹图像，当我将此项目添加到视图控制器时，它在根视图控制器项目中工作正常我在应用程序委托中进行了一些更改，之后当我运行项目时首先显示视图控制器，如果单击一个按钮表示其显示的表格视图，但如果单击表格视图中的任何单元格意味着它不起作用。该根视图控制器项目是[https://github.com/kirbyt/KTP​​hotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)

在这里，如果单击该单元格，它将在缩略图中显示所有文档图像，它不起作用可以请帮助我现在该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:41:37.407

我已经尝试过了，但还没有成功。我认为这是不可能的。另一种方式是自己将其他项目的方法合并到其他项目中，这样就可以得到其他项目的功能。

# c# - 如何在 asp.net mvc3 中删除子操作

> ID：13776254
> 
> 赞同：0
> 
> 时间：2012-12-08T09:34:15.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何删除 asp.net mvc3 中的子操作。我的意思是我有部分观点和主要观点。在我进入子页面时的 url 栏中，它不应该加载。

假设我的主页是

> 本地主机：5820/首页/索引

然后当我进入

> 本地主机：5820/首页/索引

那么它应该可以工作并且子项是

> 本地主机：5820/首页/关于

然后当我进入

> 本地主机：5820/首页/关于

那么它不应该打开。我怎么能在 asp.net mvc 中做到这一点。我有几个这样的页面，我已经展示了如何纠正这个问题的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:56:27.000

看起来您正在寻找[`ChildActionOnly`](http://msdn.microsoft.com/en-us/library/system.web.mvc.childactiononlyattribute%28v=vs.108%29.aspx)属性：

```
[ChildActionOnly]
public ActionResult About()
{
    return View();
} 
```

它禁用直接调用`localhost:5820/Home/About`- 仅呈现为部分视图可用。

*根据您的需要进行*更新*`ChildActionOnly`- 标记所有应返回带有属性的部分视图的操作：*

 *```
public ActionResult Index()
{
    return View();
}

[ChildActionOnly]
public ActionResult About()
{
    var model = ...
    return PartialView("_About", model);
} 
```

在索引视图中，`Home`通过以下方式调用这些操作（来自控制器和其他控制器）：

```
@Html.Action("About", "Home") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:11:05.103

您的 ABOUT 页​​面是 HOME 页面内的链接这一事实并不意味着它是子操作，实际上，从 MVC 的角度来看，它们处于同一级别，是您作为程序员产生了层次结构的错觉通过提供导航顺序。

现在，您可以做的是：

1.  只需从控制器中删除操作方法，或者

2.  编写一个简单的忽略路由，例如：

    routes.IgnoreRoute("YourRuleToIgnoreActions");

此规则应位于 RegisterRoutes 中 RegisterRoutes 方法的开头，以避免触发其他规则

为了建立你的忽略规则，这里是关于这个主题的一个很好的讨论：http: [//ardalis.com/IgnoreRoute-in-ASP.NET-Routing-is-Order-Dependent](http://ardalis.com/IgnoreRoute-in-ASP.NET-Routing-is-Order-Dependent)

***更新***：可能想太多了，但在我看来，模型可以具有修改视图行为的属性，这是因为从架构的角度来看，当您已经在视图中时，您只关心在表示层上，所以我认为拥有类似的东西是完全有效的：

```
 public class MyReportsModel{
     public bool displaySection1 { get; set;}
    //other data
 } 
```

在您的观点中，您可以通过以下方式更改演示文稿：

```
 @{
   if(@Model.displaySection1){
        //display as normal
    }

} 
```

当然，当您填充模型时，您应该根据需要在每个控制器中设置该属性：

```
 MyReporstModel thisView = new MyReportsModel();
  thisView.displaySection1 = true;
   // set all properties necessary to display

   // if the controller knows that this partial view won't be displayed then 
    thisView.displaySection1 = false; 
```

但这不再是技术问题，而是架构问题。

希望能帮助到你，*

# git - Git 分支和新文件的创建

> ID：13776259
> 
> 赞同：3
> 
> 时间：2012-12-08T09:34:36.940
> 
> 标签：git

我有一个存储库，在其中创建了一个新分支“test”并添加了一些文件，进行了一些修改。但是，我看到当我切换回“master”分支时，我在“test”中创建的文件存在于“master”中。

为什么会这样？

[编辑] 我弄清楚了我困惑的原因。我执行了导致合并的“git pull”。结果，我的“master”中有“test”分支中的文件。我没有意识到 pull 将是一个 fetch 然后是一个 commit。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:39:14.597

如果您不在分支中提交文件，它们将保留在您的工作区中。因此，在您的分支机构中，您应该：

```
git add your_new_files
git commit 
```

当您打开主机时，文件不再存在。

当您在测试分支中时，您会看到您的新文件*未跟踪*，直到您不将它们添加到索引（使用 git add）并且他们提交它们（git commit）。要查看您是否有未跟踪的文件：

```
 git status 
```

# opengl - 如何将 OpenGL 视图的大小调整为大于传递给初始 SDL_SetVideoMode 的大小？

> ID：13776265
> 
> 赞同：0
> 
> 时间：2012-12-08T09:35:45.690
> 
> 标签：opengl, sdl

我将 OpenGL 与 SDL 一起使用，并且我希望在调整窗口大小时将场景调整为窗口。由于未知原因，当窗口变大时，场景以初始窗口大小裁剪。

用于响应 SDL_VIDEORESIZE 调整视图的函数如下，其中 m_scene_{width,height} 是游戏看到的视图大小。

```
void screen::resize_view( width, height )
{
  // t will force the scene to be rendered with the top left corner matching the
  // one of the window.
  int t;

  if ( height < m_size.y )
    t = m_size.y - height;
  else
    t = 0;

  glViewport( 0, t, width, height );
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glOrtho( 0, m_scene_width, 0, m_scene_height, -1, 0 );
  glMatrixMode(GL_MODELVIEW);
} 
```

要初始化窗口，我调用

```
SDL_SetVideoMode( m_scene_width, m_scene_height 32,  SDL_OPENGL | SDL_RESIZABLE );
resize_view( m_scene_width, m_scene_height ); 
```

使用此代码，我有一个初始窗口，其大小与视图的大小相匹配。然后，如果我在一个或两个维度上减小窗口的大小，场景会被有效地拉伸以适应窗口，左上角保持固定。

但是，如果我在一个或两个维度上放大窗口，一旦窗口变得大于传递给 SDL_SetVideoMode() 的初始大小，场景就会在右侧和底部被裁剪。即使场景的内容被有效地拉伸到预期的大小，屏幕的这些部分仍然是黑色的。

请注意，如果我将 glClearColor() 设置为红色，这些部分仍然是黑色的。

我现在唯一的解决方案是在每次调整窗口大小时使用新大小调用 SDL_SetVideoMode()，这是不可接受的，因为它会使 Windows 上的 GL 上下文无效并使所有纹理无效。

**编辑：**经过一些实验，我认为黑色区域是最初创建的 SDL_Surface 的结果，它不遵循窗口的大小。因此，如果我可以在不破坏 GL 上下文的情况下调整这个表面的大小，我想它会解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:06:42.340

这是一个新手错误，很常见，以至于我大约每隔 6 个答案就写一次：您拥有的`resize_view`代码是设置绘图状态的代码，因此属于您将场景绘制为初始绘图设置的显示/绘图功能。用于[`SDL_GetWindowSize`](http://wiki.libsdl.org/moin.cgi/SDL_GetWindowSize?highlight=%28%5CbCategoryVideo%5Cb%29%7C%28CategoryEnum%29%7C%28CategoryStruct%29%7C%28SGFunctions%29)在绘制之前检索窗口大小并设置视口和投影。

请记住，这是*唯一*合理的方法，因为稍后，您很可能想要添加一些 HUD、小地图或一些 UI 控件，当添加这些控件时，您必须重新设置视口和投影在整个渲染单个帧中多次。因此，在某些窗口调整大小处理程序中设置视口和投影的所有教程都有效地设置了某种“心理障碍”，这让人们难以实现这些事情。您的视口不遵循窗口大小的问题是相似的。

# iphone - 如何将 Plist 数据读取到 UITableView

> ID：13776271
> 
> 赞同：0
> 
> 时间：2012-12-08T09:36:55.330
> 
> 标签：iphone, ios, ipad, uitableview, plist

> **可能重复：**
> [如何从 PList 获取数据到 UITableView？](https://stackoverflow.com/questions/8636296/how-to-get-data-from-a-plist-into-uitableview)

我有一个带有字典的 plist 和每个字典的字符串数。显示到下面的 url 中。这个项目列表在 plist 中有数千个。

现在想将这些列表显示到表格视图中

![进入图像](../Images/112df61cf1c3293f0e9b460ce80bd536.png) .

现在我怎么能把它显示`plist`到`UITableView`

我正在尝试的是：

```
- (id)readPlist:(NSString *)fileName 
{

NSString *error;
NSPropertyListFormat format;
id plist;

NSString *localizedPath = [[NSBundle mainBundle] pathForResource:@"A" ofType:@"plist"];

dic =[NSDictionary dictionaryWithContentsOfFile:localizedPath];

plist = [NSPropertyListSerialization propertyListFromData:dic mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];
if (!plist) {
    NSLog(@"Error reading plist from file '%s', error = '%s'", [localizedPath UTF8String], [error UTF8String]);
    [error release];
}

return plist;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

dict =[self readPlist:@"A"];
return dict.allKeys.count;
 }

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {

dict = [self readPlist:@"A"];
 key = [dict.allKeys objectAtIndex:section];
return [[dict valueForKey:key] count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

  cell.textLabel.text = [[dict objectForKey:key] objectAtIndex:indexPath.row];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:51:51.893

将 Plist 数据存储在数组中

```
- (id)readPlist:(NSString *)fileName 
{

NSString *error;
NSPropertyListFormat format;
id plist;

NSString *localizedPath = [[NSBundle mainBundle] pathForResource:@"A" ofType:@"plist"];

// declare your array in .h file
  array = [NSArray arrayWithContentsOfFile:localizedPath];    

plist = [NSPropertyListSerialization propertyListFromData:dic mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];
if (!plist) {
    NSLog(@"Error reading plist from file '%s', error = '%s'", [localizedPath UTF8String], [error UTF8String]);
    [error release];
}

return plist;
} 
```

然后写在表中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

  cell.textLabel.text = [array objectAtIndex:indexPath.row] valueForKey:@"keyname"];;

return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:35:38.197

**更新 2：**您需要在您的or中设置`delegate`and 。`datasource``tableView``xib``ViewController`

在你的`ViewController.h`文件中

```
@interface ViewController:UIViewController <UITableViewDelegate, UITableDataSource> 
```

试试我为你写的这段代码。

```
- (void)viewDidLoad {

    tableView.delegate = self;
    tableView.dataSource = self;

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Filename" ofType:@"plist"];
    NSArray *contentArray = [NSArray arrayWithContentsOfFile:path];
    // Having outlet for tableArray variable.
    tableArray = [[NSMutableArray alloc]initWithArray:contentArray copyItems:YES];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [tableArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
   // In your case dictionary contains strings with keys and values. The below line returns dictionary only. not array..
    NSDictionary *dictionary = [tableArray objectAtIndex:section];
    return dictionary.allKeys.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"MyCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier];
    }
    NSDictionary *dictionary = [tableArray objectAtIndex:indexPath.section];
    NSArray *keysArray = dictionary.allKeys;
    // This below line display the key in textLabel
    cell.textLabel.text = [keysArray objectAtIndex:indexPath.row];
    // Below line will display the value of a key in detailTextLabel.
    cell.detailTextLabel.text = [dictionary valueForKey:[keysArray objectAtIndex:indexPath.row]];
    return cell;
} 
```

**更新 2：**在我的 MAC 中看到您之后`plist`，我发现我们正在使用`array of dictionaries`您的`A.plist`.

![在此处输入图像描述](../Images/3f8504743d3dd7da64624b34dd60b029.png)

所以我发现`bug`我们的代码本身就有一个。不在`plist`文件中，您可以使用您的`8000 data plist too`.. 它也可以工作。我已经彻底检查过了。现在您可以获得上述代码并开始使用。

# neo4j - 在路径上的所有节点上执行 MATCH

> ID：13776273
> 
> 赞同：2
> 
> 时间：2012-12-08T09:37:26.510
> 
> 标签：neo4j, cypher

是否可以在[函数](http://docs.neo4j.org/chunked/1.8/query-function.html#functions-all)`MATCH`内部使用模式（使用 v1.8）？[`ALL`](http://docs.neo4j.org/chunked/1.8/query-function.html#functions-all)

我想要做的是以下几点：我正在寻找`MATCH`一条路径`p = (a)-->(b)-->(c)-->(d)`。但是，这条路径上的所有节点都必须具有`r`来自某个节点的附加传入关系。让我试着用 ASCII 来说明这一点：

```
(a)-->(b)-->(c)-->(d)
       ^     ^     ^
       |r    |r    |r
      ( )   ( )   ( ) 
```

我可以以某种方式使用该`ALL`功能还是必须添加其他`MATCH`模式，如下所示：

```
START ...
MATCH (a)-->(b)-->(c)-->(d)..., ()-[:r]->(b), ()-[:r]->(c), ...
RETURN ... 
```

***更新：***

这是[Neo4j 控制台](http://console.neo4j.org/?id=oo5ikf)中的一个示例：

```
START n=node(0) 
CREATE (a), (b), (c), (d), (e),
n-[:rel1]->a, n-[:rel1]->b, n-[:rel1]->d, n-[:rel1]->e,
a-[:rel2]->b-[:rel3]->d, a-[:rel2]->c-[:rel3]->e

START n=node(0) 
MATCH n -[:rel1]-> x -[:rel2]-> y -[:rel3]-> z, ()-[:rel1]->y, ()-[:rel1]->z 
RETURN z 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T10:39:53.933

您可以使用 WHERE ALL 执行此操作，如下所示：

```
START n=node(0) 
MATCH path = n -[:rel1]-> x -[:rel2]-> y -[:rel3]-> z 
WHERE ALL(n in tail(nodes(path)) WHERE ()-[:rel1]->n) 
RETURN z 
```

tail(nodes(path)) 返回路径中除第一个节点之外的所有节点。在您的示例中，起始节点未与 rel1 关系连接，因此未返回任何内容。如果您想按照文字说明的方式进行操作，只需放下尾部即可。

这是你要找的吗？

# android - Android 应用永远不会启动

> ID：13776274
> 
> 赞同：0
> 
> 时间：2012-12-08T09:37:28.623
> 
> 标签：android

我正在尝试在 mac osx 的“Android 开发人员工具构建：v21.0.0-519525”中运行我的 android 应用程序。模拟器启动正常，但一直看起来像这样：

![在此处输入图像描述](../Images/0939c05171e1325337e4be7c7aa35660.png)

昨天它工作得很好。我试图关闭 ADT 并运行：

```
>adb kill-server
>adb start-server 
```

如此处所述：

[Android应用程序未在模拟器上启动](https://stackoverflow.com/questions/6203581/android-app-not-launching-on-emulator)

是否有需要删除的临时对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:38:57.160

在启动应用程序之前，先从左向右滑动锁，将模拟器从屏幕锁上取下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:43:39.477

您需要通过向右滑动锁来解锁模拟器屏幕。然后你的应用就会出现

# xsd - JBOSS WS 正则表达式 & 符号

> ID：13776284
> 
> 赞同：0
> 
> 时间：2012-12-08T09:38:54.673
> 
> 标签：xsd, jaxb, jbossws

我是 Web 服务的新手，但遇到了问题。在 JBOSS 6 上运行了一个 Web 服务，当我们在客户端使用“&”发送数据时，我们遇到这样的错误“实体名称必须紧跟实体引用中的 '&'”？在网上找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:51:18.493

听起来服务器正在接收 XML 文档；在您发送的字符串中，您（或代表您的某些代理）需要在传输消息之前转义 XML 的分隔符（将“&”替换为“&”，将“<”替换为“<”）。这与 XSD 无关；它是基本的 XML 语法。

# sql - 将从函数返回的值存储到变量中

> ID：13776287
> 
> 赞同：-3
> 
> 时间：2012-12-08T09:39:00.230
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
dbo.UDF_CONVERSION (7.68,1,null,null,25,5) 
```

有公式

```
(7.68/1000.00)/1.0026 
```

并将答案返回为`0.007680000`

```
DECLARE @A nVARCHAR(1000),@i float
SELECT @A= dbo.UDF_CONVERSION (7.68,1,null,null,25,5)
SELECT @A='SELECT '+@A
exec @i=sp_executesql @A
select @i 
```

当我执行上述操作时，我得到的值是`0`
我想要`0.007680000`的，以便我可以使用该值进行进一步处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:55:25.560

尝试一些简单的：

```
DECLARE @i float --If your function returns float...
SELECT @i = dbo.UDF_CONVERSION (7.68,1,null,null,25,5)  

--DEBUG (remove PRINT comment)
--PRINT @i 
```

如果您需要在 sp_executesql 中转换一个值

```
DECLARE @A nVARCHAR(1000),@i float
DECLARE @ParmDefinition nvarchar(500);

SET @A=  dbo.UDF_CONVERSION (7.68,1,null,null,25,5)  
SET @A = N'SELECT @retvalOUT = CONVERT(float, '''+ @A +''')'
SET @ParmDefinition = N'@retvalOUT float OUTPUT';

EXEC sp_executesql @A, @ParmDefinition, @retvalOUT = @i OUTPUT;

SELECT  @i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:03:47.267

写这个我感觉不太好，但是你可以用一个临时表来实现你想要的。

```
DECLARE @A nVARCHAR(1000),@i float, @retVal int
--drop table #tblReturnedVal
create table #tblReturnedVal (val float)
SELECT @A= dbo.UDF_CONVERSION (7.68,1,null,null,25,5)
SELECT @A='insert into #tblReturnedVal SELECT '+@A
exec @retVal = sp_executesql @A
select top 1 @i = val from #tblReturnedVal
select @i
select @retVal -- 0 = sp_executesql ran successfully, 
                -- otherwise something went wrong 
```

编辑：你绝对应该按照@Mate 的建议去做

# ruby-on-rails - 如何使用 rails - 资产管道提供带有静态链接的 .swf flash 文件？使用 mongoid

> ID：13776288
> 
> 赞同：2
> 
> 时间：2012-12-08T09:39:04.267
> 
> 标签：ruby-on-rails, mongoid, flash, asset-pipeline

设想

rails 应用程序正在运行 mongoid。对于以下模型中的每个实例，都有一个需要为 .swf 闪存文件的投资组合字段。

```
 class Person
    include Mongoid::Document
    field :name, type: String
    field :skill, type: String
    field :portfolio, type: String # portfolio will be a flash .swf and needs to have a static live url on the server
 end 
```

如何安排模型以将文件本地保存在服务器上，以便每个文件都有一个唯一的 URL。（不使用载波或回形针）

我应该使用资产管道吗？因为我会将这些文件保存在本地。

我正在寻找的最终结果是这样的：

[http://www.persons.com/persons/portfolios/some_unique_id](http://www.persons.com/persons/portfolios/some_unique_id)

一个人只能有一个投资组合，因此，不使用参考。

# objective-c - NSCalendar 类查找工作日的日期

> ID：13776289
> 
> 赞同：0
> 
> 时间：2012-12-08T09:39:07.817
> 
> 标签：objective-c, nscalendar

我正在为此创建一个基于日历的应用程序，我使用了 NSCalendar 类

现在我想获取特定工作日的日期意味着如果今天的日期是 2012 年 12 月 8 日并且我通过了工作日 2 那么它必须写给我星期一的日期，即 2012 年 12 月 10 日

如何实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:46:06.077

使用`NSDateComponents`和`NSCalendar`。

```
NSDate *date = [NSDate date]; // 2012-12-08 09:46:31 +0000
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:2]; // your example of 2 days
date = [calendar dateByAddingComponents:components
                                 toDate:date options:0];
// 2012-12-10 09:46:31 +0000 
```

# ruby - 在 DataMapper 中有 n 个字符串

> ID：13776302
> 
> 赞同：1
> 
> 时间：2012-12-08T09:40:35.987
> 
> 标签：ruby, gem, datamapper

我正在为 Web 服务编写客户端，他们的模型的一部分是属于用户的字符串列表，其中包含用户以前使用的用户名。我正在尝试将 DataMapper 用于我的客户端 gem，我的第一个想法是使用 DataMapper 的 has n 语法，但我似乎无法将其应用于字符串。有没有更好的方法来做到这一点？

我当前的代码：

```
class User
  include DataMapper::Resource

  # Some Properties here

  has n, :also_known_as, 'String'
end 
```

这产生的错误是这样的：

```
irb(main):001:0> require 'cloudsdale'
NoMethodError: undefined method `relationships' for String:Class
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/associations/one_to_many.rb:109:in `finalize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/model.rb:782:in `block in finalize_relationships'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/model.rb:782:in `finalize_relationships'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/model.rb:137:in `finalize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core.rb:281:in `block in finalize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/descendant_set.rb:64:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `block in each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/subject_set.rb:210:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/support/descendant_set.rb:63:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core.rb:281:in `finalize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/cloudsdale-0.0.1/lib/cloudsdale.rb:19:in `<top (required)>'
    from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from (irb):1
    from C:/Ruby193/bin/irb:12:in `<main>'irb(main):002:0> 
```

产生错误的文件是这样的：

```
# Load in DataMapper
# Change the setup to meet your DB needs
require 'data_mapper'
DataMapper.setup(:default, 'abstract::')

# API objects
require 'cloudsdale/version'
require 'cloudsdale/api/api'
require 'cloudsdale/client'

# Models
require 'cloudsdale/models/user'
require 'cloudsdale/models/cloud'
require 'cloudsdale/models/avatar'
require 'cloudsdale/models/ban'
require 'cloudsdale/models/chat'

# Finalize DataMapper so the models Load
DataMapper.finalize 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:43:12.460

你为什么在`'String'`这里使用？

```
has n, :also_known_as, 'String' 
```

没有意义，删除它：

```
has n, :also_known_as 
```

如果要设置模型，请使用`:model`选项：

```
has n, :also_known_as, :model => ModelName 
```

而且我不确定你想`String`用作模型名称。

很可能您需要一个额外的模型来保留用户以前的名称：

```
class UserAlias
  include DataMapper::Resource

  # ...
end

class User
  include DataMapper::Resource

  # ...

  has n, :also_known_as, :model => UserAlias
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:32:36.333

如果您希望能够通过 datamapper 1.x 查询 DSL 搜索较旧的用户名，您需要定义一个附加模型。

```
class User
  include DataMapper::Resource

  # ...

  has n, :also_known_as, :model => UserNameHistory
end

class UsernameHistory
  include DataMapper::Resource
  property :id, Serial
  property :name
  belongs_to :user
end 
```

如果您不需要通过旧用户名进行查询，您可以使用序列化的大对象。作为建议，您可以像这样使用`DataMapper::Property::YAML`from `dm-types`：

```
class User
  include DataMapper::Resource

  # ...

  property :also_known_as, YAML
end 
```

# javascript - Javascript - 重定向到另一个网站并在该页面加载后调用 Javascript 函数

> ID：13776304
> 
> 赞同：1
> 
> 时间：2012-12-08T09:41:31.647
> 
> 标签：javascript, html, css, redirect, browser

**场景：**您的网页上有一个指向另一个网站（例如 yahoo.com）的链接，并且用户点击了该链接。

即使页面位于完全不同的域中，您能否调用 Javascript 函数并在页面上加载 HTML/CSS？比如，在雅虎上渲染某种侧边栏？

如果不是（我假设是这种情况），还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:49:09.333

简短的回答是**不**，你不能。

你当然可以做一些变通方法，就像 Blender 在他的评论中建议的那样，在网站中嵌入一个 iframe，但是由于[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)，如果 iframe 中加载的内容来自另一个域，你将不被允许对其进行任何访问。这适用于 CSS 和 JavaScript，因此您将无法以任何方式修改内容。

Tha 说，您也许可以将内容加载到 iframe 中，并在您自己的页面上，在 iframe 旁边有一个“侧边栏”。当您单击“侧边栏”中的任何链接时，您会在 iframe 中加载该引用，从而创建侧边栏与 iframe 内容相关的“感觉”。这绝不是一个很好的解决方案，但它是我目前能想到的最接近的解决方案。

**更新**

扩展了@kieran 在他的评论中提供的示例，带有一些链接，所以这里是我上面描述的一个[工作示例。](http://jsfiddle.net/UMw3T/)

您的 DOM 看起来类似于：

```
<div class="sidebar">
    <a href="http://images.yahoo.com/" target="container">Yahoo images</a><br/>
    <a href="http://news.yahoo.com/" target="container">Yahoo news</a>
</div>
<iframe name="container" class="site-container" src="http://www.yahoo.com/" /> 
```

还有一些您可以修改以满足您的需求的 CSS：

```
.sidebar {
    width: 150px;
    float: left;
    background-color: #ccc;
    border-right: 1px solid #888;
}

.site-container {
    border: 0;
}

.sidebar,
.site-container {
    height: 300px;
} 
```

# c# - 如何用c#连接oracle数据库

> ID：13776306
> 
> 赞同：1
> 
> 时间：2012-12-08T09:41:36.017
> 
> 标签：c#, .net, visual-studio-2010, oracle10g

我正在尝试与 Oracle 数据库建立连接，但出现错误，表明未找到数据源！请问有人可以帮忙吗？

```
string ConnectionString= "Data Source=voldemort-pc;User ID=student;Password=***********;Unicode=True";

OdbcConnection conn = new OdbcConnection(ConnectionString);
try
{
    conn.Open();
    MessageBox.Show("success!");

}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

# android - 扫描 NFC 标签时启动特定活动

> ID：13776307
> 
> 赞同：13
> 
> 时间：2012-12-08T09:41:38.950
> 
> 标签：android, nfc

当我的手机扫描 NFC 标签时，我正在尝试启动特定活动。这是我的清单的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.lgandroid.ddcnfc"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.NFC"/>

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.lgandroid.ddcnfc.BluePrintActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data android:mimeType="application/com.lgandroid.ddcnfc"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity>
    <activity
        android:name="com.lgandroid.ddcnfc.LoginActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.lgandroid.ddcnfc.MainActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.lgandroid.ddcnfc.PointDiagnosisActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.lgandroid.ddcnfc.PointControlActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.lgandroid.ddcnfc.SystemDiagnosisActivity"
        android:label="@string/app_name" >
    </activity>

    <activity android:name="com.lgandroid.ddcnfc.SettingsActivity" android:label="@string/app_name"></activity>
</application> 
```

每当我扫描我的标签时，我的主要活动都会启动，但我希望我的 BluePrintActivity 启动。我不确定为什么会这样。这是我写入标签的代码：

```
private boolean writeTag(Tag tag) {
        NdefRecord appRecord = NdefRecord.createApplicationRecord("com.lgandroid.ddcnfc");
        NdefMessage message = new NdefMessage(new NdefRecord[] { appRecord });

        try {
            // see if tag is already NDEF formatted
            Ndef ndef = Ndef.get(tag);
            if (ndef != null) {
                ndef.connect();

                if (!ndef.isWritable()) {
                    nfcTextView.setText("Read-only tag.");
                    return false;
                }

                // work out how much space we need for the data
                int size = message.toByteArray().length;
                if (ndef.getMaxSize() < size) {
                    nfcTextView.setText("Tag doesn't have enough free space.");
                    return false;
                }

                ndef.writeNdefMessage(message);
                nfcTextView.setText("Tag written successfully.");
                return true;
            } else {
                // attempt to format tag
                NdefFormatable format = NdefFormatable.get(tag);
                if (format != null) {
                    try {
                        format.connect();
                        format.format(message);
                        nfcTextView.setText("Tag written successfully!\nClose this app and scan tag.");
                        return true;
                    } catch (IOException e) {
                        nfcTextView.setText("Unable to format tag to NDEF.");
                        return false;
                    }
                } else {
                    nfcTextView.setText("Tag doesn't appear to support NDEF format.");
                    return false;
                }
            }
        } catch (Exception e) {
            nfcTextView.setText("Failed to write tag");
        }

        return false;
    } 
```

编辑：我在上面接受的答案暗示我朝着正确的方向前进，但由于我正在写标签，因此接受答案中的代码并不完全是正确的解决方案。如果您正在写入标签，这就是您需要做的：

```
 NdefRecord appRecord = new NdefRecord(
            NdefRecord.TNF_MIME_MEDIA ,
            "application/com.lgandroid.ddcnfc".getBytes(Charset.forName("US-ASCII")),
            new byte[0], new byte[0]);
    NdefMessage message = new NdefMessage(new NdefRecord[] { appRecord }); 
```

如果要存储有效负载，只需将最后一个参数“new byte[0]”替换为适当的数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T12:11:32.230

您的应用程序启动的原因是您将 Android 应用程序记录写入标签。这会导致启动具有匹配包名称的应用程序而不是过滤的活动。

因为您正在过滤一个 mime 类型，所以您希望创建一个类型为“application/com.lgandroid.ddcnfc”的 Mime 记录，而不是

```
NdefRecord appRecord = NdefRecord.createApplicationRecord("com.lgandroid.ddcnfc"); 
```

你应该使用：

```
NdefRecord appRecord = NdefRecord.createMimeRecord("application/com.lgandroid.ddcnfc", byteArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:32:40.830

只要您只在标签上存储了一个 AAR，您的应用程序就会以其默认活动（或当前活动堆栈，无论它是什么）启动。因此，AAR 应该是存储在标签上的最后一条记录，仅用于识别应用程序。

如果您有与您的一个活动匹配的附加 NDEF 记录，则有可能会打开相应的活动来处理标签。但是，[我的实验](http://code.google.com/p/android/issues/detail?id=41197)和[此处的另一个问题](https://stackoverflow.com/questions/12695967/samsung-nexus-s-vs-htc-nfc-intentfilter-android-aar/13802029)表明，这种机制并不像宣传的那样起作用。

另一种解决方案可能是将 URL 存储为标签上的消息之一，在您控制的服务器上打开网页（或直接访问 Google Play）。

# php - 管理页面列排序

> ID：13776308
> 
> 赞同：5
> 
> 时间：2012-12-08T09:41:49.947
> 
> 标签：php, symfony, pagination, sonata-admin, knpmenubundle

我们将 Sonata 捆绑包用于我们的管理部分。当用户转到管理中的任何部分（例如产品）并尝试按特定列排序时，它不记得下一页中的排序顺序，而且用户只能按一个方向排序。我不知道不知道怎么修？

这是我扩展 Sonata 管理类的代码：

```
namespace Project\AdminBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Doctrine\ORM\EntityManager;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Show\ShowMapper;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Route\RouteCollection;

abstract class AbstractAdmin extends Admin
{
/** @var int */
protected $maxPerPage = 10;

/** @var int */
protected $maxPageLinks = 30;

/** @var \Doctrine\ORM\Mapping\ClassMetadata */
protected $metadata;

/** @var Doctrine\ORM\EntityManager $entityManager */
protected $entityManager;

/** @var array */
protected $forbiddenFormFields = array(
    'id', 'createdAt', 'updatedAt', 'publishedAt', 'notifiedAt'
);

/** @var array */
protected $optionalFormFields = array(
    'slug'
);

/** @var array */
protected $forbiddenShowFields = array(
    'id'
);

/** @var array */
protected $forbiddenDatagridFields = array(
    'createdAt', 'updatedAt', 'publishedAt', 'notifiedAt'
);

/** @var array */
protected $forbiddenDatagridTypes = array(
    'datetime', 'date', 'float', 'decimal'
);

/** @var array */
protected $forbiddenListFields = array();

/** @var array */
protected $listIdentifierFields = array(
    'id', 'name', 'slug', 'symbol'
);

/** @var array */
public $leftMostFields = array(
    'id', 'name', 'slug'
);

/** @var array */
public $rightMostFields = array(
    'notifiedAt', 'createdAt', 'updatedAt', 'publishedAt',
);

/** @var array */
public $fields;

/**
 * Extended constructor with Entity Manager
 *
 * @param string                     $code
 * @param string                     $class
 * @param string                     $baseControllerName
 * @param Doctrine\ORM\EntityManager $entityManager
 */
public function __construct($code, $class, $baseControllerName,
                            $entityManager)
{
    parent::__construct($code, $class, $baseControllerName);
    $this->entityManager = $entityManager;
    $this->metadata      = $entityManager->getClassMetadata($class);
    $fields = array_merge($this->metadata->getAssociationNames(),
        $this->metadata->getFieldNames());
    $this->fields = $this->sortFields($fields);

    // Set default ordering of lists
    if (!$this->hasRequest()) {
        $this->datagridValues = array(
            '_page'       => 1,
            '_sort_order' => 'DESC',
            '_sort_by'    => 'updatedAt'
        );
    }
}

/**
 * @param FormMapper $mapper
 */
protected function configureFormFields(FormMapper $mapper)
{
    parent::configureFormFields($mapper);
    foreach ($this->fields as $field) {
        $options = array();
        $type = $this->metadata->getTypeOfField($field);

        if (in_array($type, array('bool', 'boolean'))) {
            $options['required'] = false;
        }

        if (in_array($field, $this->forbiddenFormFields)) {
            continue;
        }

        if (in_array($field, $this->optionalFormFields)) {
            $options['required'] = false;
        }

        if ($this->metadata->isAssociationWithSingleJoinColumn($field)) {
            $assoc = $this->metadata->getAssociationMapping($field);
            if (@$assoc['joinColumns']['0']['nullable']) {
                $options['required'] = false;
            }
        }

        $associations = $this->metadata->getAssociationMappings();
        if (isset($associations[$field])) {
            $options['attr'] = array('class' => 'chzn-select');
            if ((isset($associations[$field]['joinTable'])) ||
               (!$associations[$field]['isOwningSide'])) {
                $options['required'] = false;
            }
        }

        $mapper->add($field, null, $options);
    }
}

/**
 * @param ShowMapper $mapper
 */
protected function configureShowFields(ShowMapper $mapper)
{
    parent::configureShowFields($mapper);
    foreach ($this->fields as $field) {
        if (in_array($field, $this->forbiddenShowFields)) {
            continue;
        }
        $mapper->add($field);
    }
}

/**
 * @param DatagridMapper $mapper
 *
 * @return void
 */
protected function configureDatagridFilters(DatagridMapper $mapper)
{
    parent::configureDatagridFilters($mapper);
    foreach ($this->fields as $field) {
        $type = $this->metadata->getTypeOfField($field);
        if (in_array($field, $this->forbiddenDatagridFields)) {
            continue;
        }
        if (in_array($type, $this->forbiddenDatagridTypes)) {
            continue;
        }
        $mapper->add($field);
    }
}

/**
 * @param ListMapper $mapper
 */
protected function configureListFields(ListMapper $mapper)
{
    parent::configureListFields($mapper);

    foreach ($this->fields as $field) {
        if (in_array($field, $this->forbiddenListFields)) {
            continue;
        }

        if (in_array($field, $this->listIdentifierFields)) {
            $mapper->addIdentifier($field, null, array('route' => array('name' => 'show')));
        } else {
            $mapper->add($field);
        }
    }
}

/**
 * @throws \Exception
 */
public function sortFields($fields)
{
    $leftMost = $this->leftMostFields;
    $rightMost = $this->rightMostFields;

    usort($fields, function($a, $b) use ($leftMost, $rightMost) {
        if (count(array_intersect($leftMost, $rightMost)) != 0) {
            throw new \Exception('Leftmost and Rightmost must differ');
        }

        $leftPosA = array_search($a, $leftMost);
        $isALeftMost = is_integer($leftPosA);
        $rightPosA = array_search($a, $rightMost);
        $isARightMost = is_integer($rightPosA);

        $leftPosB = array_search($b, $leftMost);
        $isBLeftMost = is_integer($leftPosB);
        $rightPosB = array_search($b, $rightMost);
        $isBRightMost = is_integer($rightPosB);

        if ($isALeftMost && $isBLeftMost) {
            return $leftPosA - $leftPosB;
        }
        if ($isARightMost && $isBRightMost) {
            return $rightPosA - $rightPosB;
        }
        if ($isALeftMost || $isBRightMost){
            return -1;
        }
        if ($isARightMost || $isBLeftMost) {
            return 1;
        }
        return strnatcasecmp($a, $b);
    });

    return $fields;
}
} 
```

当我们在 twig 文件中添加“sort_by”时。当我们转到 1 到 11 或 9 到 10 时，它只工作 1 到 9 页，然后它不记得下一页的排序顺序。

树枝文件：

```
<div class="pagination">
<ul>
                                    {% if admin.datagrid.pager.page != 1  %}
                                        <li><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, 1)) }}" title="{% trans from 'SonataAdminBundle' %}link_first_pager{% endtrans %}">&laquo;</a></li>
                                    {% endif %}

                                    {% if admin.datagrid.pager.page != admin.datagrid.pager.previouspage %}
                                        <li><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, admin.datagrid.pager.previouspage)) }}" title="{% trans from 'SonataAdminBundle' %}link_previous_pager{% endtrans %}">&lsaquo;</a></li>
                                    {% endif %}

                                    {# Set the number of pages to display in the pager #}
                                    {% for page in admin.datagrid.pager.getLinks() %}
                                        {% if page == admin.datagrid.pager.page %}
                                            <li class="active"><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, page)) }}{{sortBy}}">{{ page }}</a></li>
                                        {% else %}
                                            <li><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, page)) }}{{sortBy}}">{{ page }}</a></li>
                                        {% endif %}
                                    {% endfor %}

                                    {% if admin.datagrid.pager.page != admin.datagrid.pager.nextpage %}
                                        <li><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, admin.datagrid.pager.nextpage)) }}" title="{% trans from 'SonataAdminBundle' %}link_next_pager{% endtrans %}">&rsaquo;</a></li>
                                    {% endif %}

                                    {% if admin.datagrid.pager.page != admin.datagrid.pager.lastpage  %}
                                        <li><a href="{{ admin.generateUrl('list', admin.modelmanager.paginationparameters(admin.datagrid, admin.datagrid.pager.lastpage)) }}" title="{% trans from 'SonataAdminBundle' %}link_last_pager{% endtrans %}">&raquo;</a></li>
                                    {% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:12:33.150

这是您的分页问题。你去你的树枝文件，你做分页，并在你传递参数的地方添加“sort_by”。

# c# - C#/XNA 内容创建工具 - 以程序方式添加内容引用

> ID：13776311
> 
> 赞同：1
> 
> 时间：2012-12-08T09:43:10.617
> 
> 标签：c#, xna

我现在正在为一个我是唯一程序员的项目开发游戏引擎。鉴于我的艺术家和设计师对 Visual Studio 或 XNA 的怪癖不是很熟悉，我正在为他们组合一个工具来添加动画、创建关卡等。当然，其中大部分都相当简单。标准代码生成、图像查看等。但是，我不确定如何将新的 Texture2D 添加到项目的内容引用中。

有没有一种我可以调用的方法，它可以获取文件位置并将其引用添加到 XNA 后端？还是我需要手动查看，找到所有各种硬编码的引用，然后自己完成工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:26:57.880

您可以像这样编辑 contentproj 并在正确的*ItemGroup*中添加行

```
<Compile Include="..\Assets\**\*.png"/>
<Compile Include="..\Assets\**\*.jpg"/> 
```

这将在构建时递归地将所有与描述匹配的文件包含到项目中。请注意，您也可以添加特定文件夹以进行查看。例如：

```
<Compile Include="..\Assets\textures\*.png"/> 
```

将包含“..\Assets\textures”目录中的所有 PNG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:37:11.690

没有将资源添加到项目内容引用的方法。如果您愿意，则必须编辑维护附加资源列表的 .csproj 项目文件。然而，这是一个非常丑陋的黑客，所以我不建议你这样做。

最好的办法是在运行时使用 microsoft.xna.framework.content.pipeline 编译您的资源。而不是将它们添加到您的内容项目中。

有关如何使用内容管道在运行时编译资源的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/bb447745%28v=XNAGameStudio.40%29.aspx](http://msdn.microsoft.com/en-us/library/bb447745%28v=XNAGameStudio.40%29.aspx)

此示例显示了如何执行此操作：http: [//xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_2](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_2)

# java - Hibernate StatelessSession，“语句关闭”异常

> ID：13776313
> 
> 赞同：1
> 
> 时间：2012-12-08T09:43:14.003
> 
> 标签：java, hibernate, session, seam

嗨，我正在使用`StatelessSession`接口进行批量插入，但出现异常：“语句已关闭”。

以下是我在代码中使用的详细信息，我通过谷歌获得了这个例外，但没有找到解决方案。

**示例代码：**

```
 @Name("sample")
    @Scope(ScopeType.STATELESS)
    @AutoCreate
    public Sample{  

        @In
        private SessionFactory hibernateSessionFactory;

        @Begin(join=tru)
        public void migrate(){
            StatelessSession session = hibernateSessionFactory.openStatelessSession();
            Transaction tx = session.beginTransaction();
            for(DoTempCustomers tempCust:doTempCustomers){
                  TempCustomers temp=new TempCustomers();
                  BeanUtils.copyProperties(temp, tempCust);
                  session.insert(temp);
            }       
        }

        tx.commit();
        session.close();
     }
  } 
```

**休眠.cfg.xml**

```
<property name="hibernate.format_sql">false</property>
<property name="hibernate.hbm2ddl.auto">update</property>
<property name="hibernate.session_factory_name">java:/mobeeSessionFactory</property>
<property name="hibernate.connection.datasource">mobeeadminDataSource</property>
<property name="hibernate.jdbc.batch_size">1</property>
<property name="hibernate.cache.use_second_level_cache">false</property>
<property name="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.JBossTransactionManagerLookup</property>
<property name="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
<property name="hibernate.transaction.auto_close_session">false</property>
<property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>
<property name="hibernate.transaction.flush_before_completion">true</property>

<!-- Here are the mappings -->
<mapping package="com.manam.mobee.persist.entity"/>
<mapping class="com.manam.mobee.persist.entity.TempCustomers"/> 
```

**例外**

```
Caused by: java.sql.SQLException: The statement is closed.
        at org.jboss.resource.adapter.jdbc.WrappedStatement.checkState(WrappedStatement.java:599)
        at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.setString(WrappedPreparedStatement.java:313)
        at org.hibernate.type.StringType.set(StringType.java:26)
        at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:136)
        at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:107)
        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:1997)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2243)
        ... 96 more
12:16:54,777 INFO  [STDOUT] [Mobee]- INFO 2012-12-08 12:16:54,777 [] StringType - could not bind value 'TIMOTHY NDUNG'U MAINA' to parameter: 1; The statement is closed.
12:16:54,777 INFO  [STDOUT] [Mobee]- WARN 2012-12-08 12:16:54,777 [] JDBCExceptionReporter - SQL Error: 0, SQLState: null
12:16:54,777 INFO  [STDOUT] [Mobee]-ERROR 2012-12-08 12:16:54,777 [] JDBCExceptionReporter - The statement is closed.
12:16:54,778 ERROR [STDERR] org.hibernate.exception.GenericJDBCException: could not insert: [com.manam.mobee.persist.entity.TempCustomers]
        at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntity 
```

你能告诉我如何解决这个异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-02T01:46:16.743

在将 Hibernate 从 3.4 迁移到 5.4.x 版本时，我遇到了 IBM DB2 数据库的类似问题。

在谷歌搜索并查看各种论坛之后，问题在于 DB2 驱动程序的版本。以下线程有更多关于这个问题的细节。

[https://www.ibm.com/support/pages/why-does-isclosed-throw-exception-when-used-resultset](https://www.ibm.com/support/pages/why-does-isclosed-throw-exception-when-used-resultset)

我更新了支持 JAVA8 的 DB2 驱动程序，它解决了问题。

# javascript - 使用 cURL 获取 Javascript 内容

> ID：13776315
> 
> 赞同：0
> 
> 时间：2012-12-08T09:43:45.373
> 
> 标签：javascript, html, parsing, curl, grep

我正在尝试从此[链接](http://www.espncricinfo.com/india-v-england-2012/engine/current/match/565808.html)获取现场比赛评论。我首先使用 cURL 获取 HTML 内容，然后使用 grep 解析出我需要的相关标签/内容。但是在分析了 cURL 返回的 HTML 内容后，我意识到这都是 Javascript，而我需要的内容不在其中。

有什么方法可以在 Javascript 执行后获取原始 HTML 代码？另外，我需要能够从终端/bash 运行这个脚本（因为我正在为 GeekTool 编写这个脚本）？

帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:12:34.660

您可以尝试使用[PhantomJS](http://phantomjs.org/)或[CasperJS](http://kvz.io/blog/2012/11/03/highlevel-testing-with-casperjs/)运行代码，然后获取您想要退出页面的所有内容。告诉我这是不是你正在搜索的内容。

# git - 检查 Git 远程挂钩

> ID：13776316
> 
> 赞同：2
> 
> 时间：2012-12-08T09:44:03.557
> 
> 标签：git, hook, githooks

是否可以选择检查某个远程存储库中是否存在某种（我感兴趣的`post-receive`）钩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:57:38.053

不是远离客户。
你需要：

*   要么可以通过上述钩子访问 git[上游 repo](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)
*   或者知道这个钩子是用来显示一些你可以在推送到上游仓库时解析的消息。

钩子对于回购来说非常*本地化，*[不会被推送/克隆](https://stackoverflow.com/a/3703207/6309)。
因此，它们在下游存储库中不可见。

# javascript - 用 JavaScript 构建 HTML

> ID：13776318
> 
> 赞同：0
> 
> 时间：2012-12-08T09:44:31.007
> 
> 标签：javascript, html

我正在尝试以这种方式在我的 javascript 文件中构建 HTML。我需要在我的类属性中再添加一个类名。但是这个类名是一个 javascript 变量。我不知道如何添加这个变量，以便 javascript 插入它。

```
 function build_html(sku)
  {
     //need to add sku as my classname here
     tmpString += "<a href=\"javascript: void(0)\" class=\"cart sku\">ADD TO CART</a>";
  } 
```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:47:42.687

您可以连接您的 html 部分以在您的 html 中添加类名，

**[现场演示](http://jsfiddle.net/rajaadil/BRxkv/)**

```
tmpString = "";
classVar = "cart sku";
tmpString += "<a href=\"javascript: void(0)\" class=\""+classVar +"\">ADD TO CART</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:48:05.167

只需使用 + 运算符连接字符串：

```
 function build_html(sku)
  {
     //need to add sku as my classname here
     tmpString += "<a href=\"javascript: void(0)\" class=\"cart " + sku + "\">ADD TO CART</a>";
  } 
```

# java - Microsoft Access 和 Java JDBC-ODBC 错误

> ID：13776320
> 
> 赞同：0
> 
> 时间：2012-12-08T09:44:57.013
> 
> 标签：java, jdbc, odbc

尝试使用 java 在 Microsoft 访问数据库中插入一些值。

但是，我可能会出错，

> java.sql.SQLException：[Microsoft][ODBC Driver Manager] 指定的 DSN 包含线程“main”中的驱动程序和应用程序异常之间的体系结构不匹配 java.lang.NullPointerException

使用 SysWoW64 > odbcad32 创建数据源 im 并将它的数据源添加到系统 DNS。我这么说是因为我在其他地方看到了 64 位系统出现问题的地方。但是它仍然对我不起作用。

微软 Office 32 位。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class AuctionHouseJDBC {

    /**
     * @param args
     */
    public static void main(String[] args) {

        String theItem = "Car";
        String theClient="Name";
        String theMessage="1001";

Connection conn =null; // Create connection object

        try{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            System.out.println("Driver Found");
        } catch(Exception e) {
            System.out.println("Driver Not Found");
            System.err.println(e);
        }

        // connecting to database
        try{
            String database ="jdbc:odbc:Driver={Microsoft Access Driver (*.accdb)};DBQ=AuctionHouseDatabase.accdb;";

            conn = DriverManager.getConnection(database,"","");

            System.out.println("Conn Found");
        }
        catch(SQLException se) {
            System.out.println("Conn Not Found");
            System.err.println(se);
        }
        // Create select statement and execute it

        try{        
            /*String insertSQL = "INSERT INTO AuctionHouse VALUES (  "
                    +"'" +theItem+"', "  
                    +"'" +theClient+"', "
                    +"'" +theMessage+"')";  
            */

            Statement stmt = conn.createStatement();
            String insertSQL = "Insert into AuctionHouse VALUES ('Item','Name','Price')";

             stmt.executeUpdate(insertSQL);
            // Retrieve the results

            conn.close();
        } catch(SQLException se) {
            System.out.println("SqlStatment Not Found");
            System.err.println(se);
        }

    }

} 
```

StaceTrace：

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source) 
```

微软办公 64 位

我安装了 64 位版本，现在出现错误 [Microsoft][ODBC 驱动程序管理器] 不是有效的文件名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:07:53.947

首先确保您可以通过 ODBC 访问该数据库。`odbcad32`为 64 位和 32 位系统制作 DSN 。然后作为 JDBC 连接字符串使用：`jdbc:odbc:[CreatedDSN]`. 如果您无法连接到 64 位版本的 Access，请`odbcad32`确保它在 32 位版本中工作，`odbcad32`并确保您使用 32 位版本的 Java。

另请查看其他回复：[Can't connect to MS Access DB with Windows-64bit](https://stackoverflow.com/questions/13782957/cant-connect-to-ms-access-db-with-windows-64bit)

特别有趣的是链接到：[http ://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/](http://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/)

# c - 程序 farenh 的问题 ---> 摄氏度

> ID：13776321
> 
> 赞同：-3
> 
> 时间：2012-12-08T09:45:06.223
> 
> 标签：c

我刚开始学C。

我尝试了书中的代码并将其完全复制到 Eclipse 中。但是，我的提示是不显示的。

```
// The program compute celsius degrees
// from farenheit

#include <stdio.h>

#define CONVERSION (5.0f / 9.0f)
#define FREEZING_POINT 32.0f

int main(void){

    float fahrenheit, celsius;

    printf("Enter fahrenheit temperature: ");
    scanf("%f", &fahrenheit);

    celsius = (fahrenheit - FREEZING_POINT) * CONVERSION; 

    printf("Celsius equivalent: %.1f\n", celsius);

    return 0;
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:58:07.157

基本上写在这里：[https](https://stackoverflow.com/a/1897232/1430586) ://stackoverflow.com/a/1897232/1430586 你需要在printf之后添加这个：

```
fflush(stdout); 
```

这仅对 Eclipse 是必需的，如果您要直接运行可执行文件，它可能会在没有它的情况下工作。

我能想到的另一件事是，如果程序在您运行后立即终止

# c++ - iOS App 拒绝 cocos2d-x 和 libCurl 上的非公共 api（SSL 相关）

> ID：13776322
> 
> 赞同：0
> 
> 时间：2012-12-08T09:45:17.707
> 
> 标签：c++, ios, ssl, libcurl, cocos2d-x

我刚刚提交了审查和基于 cocos2d-x (C++) 和 libcurl 构建的应用程序。

我正在使用支持 SSL 的 libcurl，以便从 Facebook 下载个人资料图片

当我从组织者验证我的应用程序或尝试分发时，我收到以下错误：

您的应用程序包含非公开 API 使用。请检查错误..

该应用程序引用了 Payload/..app/ {appName}:SSLCopyPeerCertificates、{appName}:SSLDisposeContext 等中的非公共符号。

当我在应用程序中搜索此功能时，我没有找到匹配项，但我认为它与 libcurl 有关，因为我在与 libcurl 相关的代码中不使用 SSL 期望

有什么建议么 ？

我发了一条消息要在苹果进行审核，但恐怕这可能会很长。

错误截图：[http ://accessdev.s3.amazonaws.com/apps/ssl_reject.png](http://accessdev.s3.amazonaws.com/apps/ssl_reject.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:35:27.390

我建议使用最新的 libcurl 版本，即撰写本文时的 7.28.1 版本。这包括与 iOS 原生 SSL API 相关的几个修复，请参阅：

*   [http://curl.haxx.se/mail/lib-2012-10/0142.html](http://curl.haxx.se/mail/lib-2012-10/0142.html)
*   [https://github.com/bagder/curl/commit/f1d2e1850819f54d1c950989614da7445bdd457f](https://github.com/bagder/curl/commit/f1d2e1850819f54d1c950989614da7445bdd457f)

我认为这应该解决您的问题与您不应该使用的各种符号（`SSLDisposeContext`等）。

如果我参考 Nick 的[libcurl 7.28.1 iOS 构建](http://seiryu.home.comcast.net/~seiryu/libcurl-ios.html)在 Xcode 警告窗口中列出的非公共符号，则无法找到：

```
$ xcrun -sdk iphoneos nm -j -arch armv7 libcurl-device.a 2>/dev/null | grep SSL
_SSLClose
_SSLCopyPeerTrust
_SSLCreateContext
_SSLGetBufferedReadSize
_SSLGetNegotiatedCipher
_SSLGetNegotiatedProtocolVersion
_SSLGetSessionState
_SSLHandshake
_SSLRead
_SSLSetConnection
_SSLSetIOFuncs
_SSLSetPeerDomainName
_SSLSetProtocolVersionMax
_SSLSetProtocolVersionMin
_SSLSetSessionOption
_SSLWrite 
```

当然，这同样适用于`armv7s`架构。

# makefile - 这如何使语法起作用？

> ID：13776328
> 
> 赞同：1
> 
> 时间：2012-12-08T09:46:51.237
> 
> 标签：makefile, gnu-make

我是makefile的新手。我有一个带有以下语句的makefile：

```
....

all: prepare hreader $(DIRS)
    echo $(DIRS)

.PHONY: prepare hreader $(DIRS)

prepare:                              
    mkdir -p ./lib
    $(MAKE) -C game_proc prepare     #here, why 'prepare'?!

hreader:
    make -C extra/hreader

$(DIRS):
    $(MAKE) -C $@ 
```

在我的 makefile 目录中，我有一个“game_proc”目录。从 GNU make 教程，我知道下面几行

```
prepare:                           
    mkdir -p ./lib
    $(MAKE) -C game_proc 
```

将对“game_proc”进行递归制作。

但为什么“准备”也出现在食谱中？现在我如何解释'$（MAKE）-C game_proc prepare'？它在“game_proc”上进行递归，什么？也是“准备”的递归制作？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:55:19.943

虚假目标只是告诉 make 该规则不会创建该名称的输出文件。

**评论后更新**

好的，重要的是要意识到这里有两个单独的 makefile：

```
./Makefile 
```

和

```
game_proc/Makefile 
```

混淆是由于*两个*s`prepare`中都有一个目标。 *`Makefile`*

 *即，有`game_proc/Makefile`一个目标`prepare`。让我们暂时将该目标重命名为，`prepare2`以便情况变得更加清晰：

`./Makefile:`

```
 .PHONY: prepare hreader $(DIRS)

prepare:                              
    mkdir -p ./lib
    $(MAKE) -C game_proc prepare2 # refers to game_proc/Makefile's prepare2 target 
```

`game_proc/Makefile:`

```
prepare2:
    ... 
```*

# hook - IPB - 连接到 usercpForms_core.php

> ID：13776330
> 
> 赞同：0
> 
> 时间：2012-12-08T09:47:06.523
> 
> 标签：hook, signature, ipb

我正在 Invision Power Board 中创建一个对用户签名有新限制的钩子。我必须将验证代码添加到 usercpForms_core.php 中实现的 saveSignature() 函数中。有没有办法做到这一点？我必须使用哪种钩子类型？我尝试使用 Library Hook 扩展 usercpForms_core 类，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T08:45:30.127

您必须为此类创建库挂钩。例如，这是我 xml 的一部分

```
<hook_file_real>userProfileInfo</hook_file_real>
  <hook_type>libraryHooks</hook_type>
  <hook_classname>userProfileInfo</hook_classname> 
```

```
 public function saveProfileInfo()
            {
                // SOME CODE

                return parent::saveProfileInfo();
            }   
      }]]></hooks_source> 
```

# c# - 当我从数据源拖放表时，如何关闭由 Visual Studio 自动创建的连接

> ID：13776331
> 
> 赞同：0
> 
> 时间：2012-12-08T09:47:04.610
> 
> 标签：c#, sql, visual-studio-2010

我已经`dataGridView`从`form1`我的数据源中删除它会自动将我的表单与我的数据库连接起来，

我关闭了它`form1`，`form2`我想通过使用 IO 复制将我的数据库从一个目录复制到另一个目录作为备份。

当我使用打开文件对话框选择我的 db 文件时，它说文件正在被其他应用程序使用，我给出了 IO 类的复制功能的静态路径，但它再次给出了正在使用文件的异常，

如果我在应用程序启动时直接打开，`form2`我没有使用任何 db 链接`form2`，它将复制 db 文件，但如果我`form1`从中打开一次`form2`，表单将与 db 连接，然后从`form1`我转到`form2`现在它不会打开我的 db 文件或给出异常.

我使用了`form1`dispose 和 GC 中的所有方法来释放我的 db 文件，但使用较少。

告诉我如何释放我`form1`已关闭的 db 文件只与 db 文件链接`form1`，

告诉我 Visual Studio 在拖放案例中在哪里创建连接，以便我可以在表单关闭时关闭连接或

告诉我一些其他方式来释放我的 db 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:14:07.463

从视图菜单中，选择服务器资源管理器。此窗口将显示 Visual Studio 知道并连接到的数据库的任何连接。您应该能够在此窗口中关闭与数据库的 VSs 连接。

# javascript - 如何在大型 SPA 中嵌套基于 knockout.js 的组件？

> ID：13776332
> 
> 赞同：4
> 
> 时间：2012-12-08T09:47:09.163
> 
> 标签：javascript, knockout.js, single-page-application

我目前正在试验 SPA，我的第一个应用程序的结构大致遵循 Mikowski/Powell 即将出版的《[单页 Web 应用程序](http://www.manning.com/mikowski/)》一书中描述的模式：该应用程序由相互嵌套的模块组成。一个根模块有一个或多个子模块，每个子模块可能有一个或多个自己的子模块。为了将子模块添加到 DOM，父模块为子模块提供了一个 (jQuery-) 元素，它附加了自己的标记。除此之外，这些模块或多或少是完全隔离的，它们的功能与 SPA 的其余部分无关。每个模块都驻留在自己的文件中，并且使用 require.js 解决依赖关系（本书手动导入它们）。

现在我想使用 knockout.js 来渲染一些模块，但我对 ko 还比较陌生，所以我想知道：想象一个顶级模块附加了几个子模块。它使用 knockout.js 进行绑定，而其中一个子模块也这样做，但另一个没有。每个课程都有自己的模型数据。

1.  如果我在父项和子项中应用 ko-bindings（仅限于各自的容器元素），当子项的标记实际上被父项的标记包围时，它们会以某种方式干扰吗？
2.  在这种情况下，我将如何实现 require.js 依赖解析？

一个可以很好地说明问题的示例是“选项卡式面板”：父级有多个选项卡并使用剔除来确定当前可见的选项卡。每个选项卡本身就是一个模块，它本身可以具有任意复杂的标记/功能，因此应该封装在自己的文件/模块中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T13:18:43.953

您不会希望先调用`ko.applyBindings`父元素，然后再调用其子元素之一。元素将被绑定两次，尽管在大多数情况下你只会得到错误，因为孩子可能试图绑定不同的上下文。

几个选择：

1-如果元素不重叠，那么您可以调用`ko.applyBindings`并指定第二个参数，该参数是要用作根元素的 DOM 元素。这看起来像：

```
ko.applyBindings(viewModelOne, document.getElementById("one"));
ko.applyBindings(viewModelTwo, document.getElementById("two")); 
```

2-尽管在您的问题中，Knockout 似乎将管理选项卡和每个选项卡的内容，其中各个选项卡可能是子元素。一种选择是创建一个包含子视图模型的整体视图模型，例如：

```
var ViewModel = function() {
   this.tabs = ko.observableArray();
   this.selectedTab = ko.observable();
}; 
```

然后，“选项卡”对象可以包含它们自己的视图模型。它可能是这样的：http: [//jsfiddle.net/rniemeyer/PctJz/](http://jsfiddle.net/rniemeyer/PctJz/)

3-此处描述了另一种替代方法：[http](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html) ://www.knockmeout.net/2012/05/quick-tip-skip-binding.html 。`ko.applyBindings`此技术允许您将视图模型绑定到整个页面，然后使用 DOM 元素作为第二个参数的调用来划分您想要单独绑定的区域。

# linux - linux中usb_storage的源代码在哪里

> ID：13776343
> 
> 赞同：0
> 
> 时间：2012-12-08T09:48:16.873
> 
> 标签：linux, usb

在 linux 中，每当我插入笔式驱动器时，modprobe 实用程序都会自动将所需的模块加载到内核中。但是我想知道这个模块的源代码在哪里（我已经下载了整个 linux 内核源但仍然无法找到它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:24:56.743

它位于驱动程序/usb/storage/ 下：h​​ttps: [//github.com/torvalds/linux/tree/master/drivers/usb/storage](https://github.com/torvalds/linux/tree/master/drivers/usb/storage)

# php - 从 MYSQL 读取数据

> ID：13776345
> 
> 赞同：-1
> 
> 时间：2012-12-08T09:48:27.217
> 
> 标签：php, mysql

这是我的 php 读取数据库文件：

```
 <?php
// read_My_Task.php

/*
 * Following code will get single task details
 * A task_detail is identified by task id (cid)
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["cid"])) {
    $cid = $_GET['cid'];

    // get a task from my-task table
    $result = mysql_query("SELECT *FROM my_task WHERE cid = $cid");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $my_task = array();
            $my_task["cid"] = $result["cid"];
            $my_task["cus_name"] = $result["cus_name"];
            $my_task["contact_number"] = $result["contact_number"];
            $my_task["ticket_no"] = $result["ticket_no"];
            $my_task["task_detail"] = $result["task_detail"];

            // user node
            $response["my_task"] = array();

            array_push($response["my_task"], $my_task);
            // echoing JSON response
            echo json_encode($response);         
             }            

        else {
            // no task found
            $response["success"] = 0;
            $response["message"] = "No task found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no task found
        $response["success"] = 0;
        $response["message"] = "No task found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}

?> 
```

数据库有很多数据，但总是显示结果“{“成功”：0，“消息”：“缺少必填字段”}”

如何显示保存在 MySql 数据库中的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:50:56.767

您的错误消息位于脚本末尾的`else`. 如果您检查相应`if`的是：

```
if (isset($_GET["cid"])) { 
```

这意味着对您而言，此值未设置。您只需要使用 URL 中的参数调用脚本，如下所示：

```
http://yourroot/read_My_Task.php?cid=XXX 
```

# php - PostgreSQL 搜索查询 - 检查空字段

> ID：13776347
> 
> 赞同：0
> 
> 时间：2012-12-08T09:48:50.567
> 
> 标签：php, postgresql

我正在尝试使用多个条件字段创建搜索系统。我的问题是如何处理空标准字段（用户省略）。我需要检查变量是否为空以实现 AND 条件。就我而言，姓氏是必需的，所以我只需要检查 id first name 和 ID 不是空字段：

```
$query ="SELECT first_name, last_name FROM students  WHERE last_name ILIKE '%$last_name%' ";

if(isset($_GET['$first_name']))
$condition[]="first_name ILIKE '%$first_name'";

if(isset($_GET['$ID']))
$condition[]="ID = '$ID'";

if(!empty($condition))
$query .= implode(' AND ',$condition);

$result = pg_query($query); 
```

这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:59:26.327

逻辑应该有效，但您似乎缺乏基本的 PHP 语法和原则。

我猜你有：

```
<input type='text' name='ID' /> 
```

不是

```
<input type='text' name='$ID' /> 
```

因此，您应该使用`$_GET['id']`.

* * *

接下来，您似乎在指望已在新版本的 php.ini 中弃用的已[注册全局变量。](http://php.net/manual/en/security.globals.php)

你应该使用：

```
$condition[]="ID = '" . $_GET['ID'] . "'"; 
```

* * *

[您没有逃避收入价值](http://php.net/manual/en/security.database.sql-injection.php)，请使用[`pg_escape_string()`](http://php.net/manual/en/function.pg-escape-string.php)：

```
$condition[]="ID = '" . pg_escape_string( $connection, $_GET['ID']) . "'"; 
```

* * *

您没有初始化`$conditions`数组，请添加：

```
$conditions = array(); 
```

到脚本的开头

* * *

您`AND`在构建最终查询时丢失了：

```
if( count( $conditions)){
    $query .= ' AND ' . implode( ' AND ', $conditions);
} 
```

或者，您可以添加`last_name`到`$conditions`：

```
$query ="SELECT first_name, last_name FROM students  WHERE ";
$conditions = array(
    "last_name ILIKE '%" . 
         pg_escape_string($connection, $_GET['last_name']) . 
         "%'"
);
// ...
$query .= implode( ' AND ', $conditions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:56:51.380

我想你错过了一个`AND`

```
if(!empty($condition))   
    $query .= ' AND '.implode(' AND ',$condition); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T09:57:40.100

您从 GET 请求的变量可能是错误的，它们`$`在名称后有一个符号。

您还可以在执行之前打印查询以查看其格式是否正确。

试试这个并发布结果。

`$query ="SELECT first_name, last_name FROM students WHERE last_name ILIKE '%$last_name%' ";`

```
if(isset($_GET['$first_name']))
$condition[]="first_name ILIKE '%$first_name'";

if(isset($_GET['$ID']))
$condition[]="ID = '$ID'";

if(!empty($condition))
$query .= implode(' AND ',$condition);
echo $query; exit();
$result = pg_query($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:58:14.763

看看[Pomm 的 Where](https://github.com/chanmix51/Pomm/blob/master/Pomm/Query/Where.php)课程。它允许您轻松创建 AND / OR 标准并将它们与值绑定以转义它们。这样，您可以使用多个选择列表并使用 OR 子句将它们连接起来，并使用 AND 将它们与其他条件连接起来。

# mysql - 搜索并返回具有重复计数的不同行

> ID：13776358
> 
> 赞同：1
> 
> 时间：2012-12-08T09:51:14.280
> 
> 标签：mysql, count, where-clause

我在以下 URL 上创建了我的 SQL Fiddle，用于测试和构建我的查询：

[http://sqlfiddle.com/#!2/5415d/3](http://sqlfiddle.com/#!2/5415d/3)

考虑我的表的以下结构：

```
表格1
+--------------+
| 用户名 | 事件 ID |
+--------------+
| 约翰 | 美国广播公司 |
| 尼克 | 美国广播公司 |
| 母鸡 | 美国广播公司 |
| 约翰 | 防御工事 |
| 约翰 | 美国广播公司 |
+--------------+

```

我正在尝试编写的查询是，当用户想要查看与用户相关的 eventsID 时`Jhon`，您可以看到上表中针对 jhon 有各种类似的 id，而有些则不是这样，查询应该返回类似于以下输出的内容按降序排列`Count (Event_ID)`：

```
+------------------------------------------------+
| 用户名 | 事件 ID | 计数 (Event_ID) |
+------------------------------------------------+
| 约翰 | 美国广播公司 | 3 |
| 约翰 | 防御工事 | 1 |
+------------------------------------------------+

```

请让我知道如何编写这样的查询。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:54:52.537

```
select min(username) as username, 
       eventid, 
       count(eventid) as event_count
from table1
where username = 'Jhon'
group by eventid
order by event_count desc 
```

### [SQLFiddle 演示](http://sqlfiddle.com/#!2/5415d/9)

# objective-c - 如何在Objective C代码中查找目录修改日期的所有内容

> ID：13776359
> 
> 赞同：0
> 
> 时间：2012-12-08T09:51:17.540
> 
> 标签：objective-c, nsfilemanager

此要求对于读取目录内容以及所有子文件和文件夹的修改日期非常具体。在 Windows 中，我们有一些 API，但我在 Mac OS 开发中没有找到类似的功能。我搜索了这个，我发现 NSFileManager 可以用于这个。我找到了一个可以在 Documents 目录下获取路径内容的地方。

这是我拥有的一段代码。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];

NSFileManager *manager = [[NSFileManager alloc] init];
NSDirectoryEnumerator *fileEnumerator = [manager enumeratorAtPath:documentsPath];

for (NSString *filename in fileEnumerator) {
    // Do something with file
    NSLog(@"file name : %@",filename );
} 
```

但我的要求是在机器上的任何路径下找到所有子文件和文件夹修改日期的内容。请指导我。

谢谢，陶西夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:07:44.647

Apple 有一个[代码示例](https://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/AccessingFilesandDirectories/AccessingFilesandDirectories.html#//apple_ref/doc/uid/TP40010672-CH3-SW5)演示如何执行此操作：

```
NSDirectoryEnumerator *directoryEnumerator = [[NSFileManager defaultManager] enumeratorAtPath:directoryPath];

NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow:(-60*60*24)];

for (NSString *path in directoryEnumerator) {

    if ([[path pathExtension] isEqualToString:@"rtfd"]) {
        // Don't enumerate this directory.
        [directoryEnumerator skipDescendents];
    } else {
        NSDictionary *attributes = [directoryEnumerator fileAttributes];
        NSDate *lastModificationDate = [attributes objectForKey:NSFileModificationDate];

        if ([yesterday earlierDate:lastModificationDate] == yesterday) {
            NSLog(@"%@ was modified within the last 24 hours", path);
        }
    }
} 
```

基本上，此代码枚举`directoryPath`并检查文件或目录是否在过去 24 小时内被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T09:14:35.133

你可以用`[NSFilemanager.defaultManager subpathsAtPath:<yourpath> error:nil]`这个。请注意，您可能不需要特殊的 NSFileManager 实例，因此您应该使用`defaultManager`.

```
NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow:(-60*60*24)];

NSFileManager *fm = NSFileManager.defaultManager;
NSArray *subPaths = [fm subpathsAtPath:documentsPath];

for (NSString *path in subPaths) {
    NSDictionary *attributes = [fm fileAttributesAtPath:path traverseLink:YES];
    NSDate *lastModificationDate = [attributes objectForKey:NSFileModificationDate];

    if ([yesterday earlierDate:lastModificationDate] == yesterday) {
        NSLog(@"%@ was modified within the last 24 hours", path);
    }
} 
```

# opencvdotnet - OPENCV haar 训练期间出现此错误的原因是什么？

> ID：13776362
> 
> 赞同：0
> 
> 时间：2012-12-08T09:51:45.007
> 
> 标签：opencvdotnet

```
OpenCV Error: Assertion failed (rect.width >= 0 && rect.height >= 0 && rect.x <
image->width && rect.y < image->height && rect.x + rect.width >= (int)(rect.widt
h > 0) && rect.y + rect.height >= (int)(rect.height > 0)) in unknown function, f
ile c:\Users\vp\work\ocv\opencv\modules\core\src\array.cpp, line 3006 
```

当我对正图像进行采样时出现此错误。我总共有 1200 个阳性样本。在许多地方，它提到传递给 CvSetImageROI() 的尺寸大于允许的最大尺寸。
我正在使用生成尺寸为 640x480 的图像的网络摄像头。

采样代码： `opencv_createsamples.exe -info lent.txt -vec vec\Samples.vec -w 24 -h 24` 我做的另一件事是将样本的尺寸更改为 30x32/30x30/32x32 等等，但错误仍然存​​在。

现在我该怎么做 ？注意：这可能是一个重复的问题，但以前的问题对我没有帮助。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:32:09.693

保存图像的 ROI 时出现一些错误。第一张图片无法满足尺寸，因此引发了错误！

我已经解决了这个错误！

# php - Zend1：重定向到不同模块中的操作

> ID：13776364
> 
> 赞同：0
> 
> 时间：2012-12-08T09:51:54.000
> 
> 标签：php, zend-framework, redirect

我`loginAction`在一个模块`user`中，在控制器中`application/modules/user/controllers/AuthController.php`。我想在成功登录后重定向到`indexAction`in `application/controllers/IndexController.php`。所以我有这个：

```
if ($result->isValid()) {
            $auth->getStorage()->write($adapter->getResultRowObject());

            $this->_helper->redirector('index', 'index');

            return;
} 
```

当我现在登录时，我收到消息`Message: Invalid controller specified (index)`。我想这是因为我的登录名在模块`user`中，而`IndexController`在根应用程序中。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:44:50.167

redirector() 动作助手有几种方法来重定向请求。

试试这个，*应用程序/控制器*的控制器在***“默认”***模块中：

```
if ($result->isValid()) {
    $auth->getStorage()->write($adapter->getResultRowObject());
    //redirector($action, $controller, $module)
    $this->_helper->redirector('index', 'index', 'default');
} 
```

我更喜欢使用这个助手的方式更明确，所以我不必记住默认值：

```
 if ($result->isValid()) {
        $auth->getStorage()->write($adapter->getResultRowObject());
        //gotoSimple($action, $controller, $module, $params = array())
        $this->getHelper(redirector)->gotoSimple('index', 'index', 'default');
        //or use gotoUrl($url)
        $this->getHelper(redirector)->gotoUrl('/index/index');
        //or use gotoRoute()
        $this->getHelper(redirector)->gotoRoute('action'=>'index', 'controller'=>'index', 'module' => 'default');
    } 
```

以及快速而肮脏的实用方法：

```
 if ($result->isValid()) {
        $auth->getStorage()->write($adapter->getResultRowObject());
        //_redirect($url);
        $this->_redirect('/index/index');
    } 
```

希望这可以帮助

# android - AsyncTask #1 bufferingreader

> ID：13776368
> 
> 赞同：0
> 
> 时间：2012-12-08T09:52:22.607
> 
> 标签：android, android-asynctask

我尝试解析 json，但我有问题，当我运行我的应用程序时，我有下一个错误。我尝试打印日志，但没有打印出来。他看不懂我的 rss.json？还是另一个问题？

我收到 FATAL EXCEPTION : AsyncTask #1 这个错误在 log cat 我能够在 AVD 4.1.2 上运行代码

**日志猫**

```
 FATAL EXCEPTION: AsyncTask #1
 java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:299)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    at java.lang.Thread.run(Thread.java:856)
 Caused by: java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:64)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:79)
    at com.gazetaimage.MainActivity$backTask.doInBackground(MainActivity.java:112)
    at com.gazetaimage.MainActivity$backTask.doInBackground(MainActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:287)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    ... 5 more 
```

**异步任务代码**

```
class backTask extends AsyncTask<String, Void, JSONObject>{     
    InputStream ips;
    String jstring = null;
    JSONObject jsonObj = null;
    MainActivity activity;
    @Override
    protected JSONObject doInBackground(String... params) {

        try {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://mysite.com/RSS/gazeta.js");            
        HttpResponse response = client.execute(post);
        HttpEntity entity = response.getEntity();           
        ips = entity.getContent();
        Log.d("Log", ips.toString());
        } catch (ClientProtocolException e) {               
            e.printStackTrace();
        } catch (IOException e) {               
            e.printStackTrace();
        }

        try {
            //MainActivity.java:112 ERROR --->
            BufferedReader bufff = new BufferedReader(new InputStreamReader(ips, "UTF-8"));
            Log.d("Log", bufff.toString());
            StringBuilder sb = new StringBuilder();
            String line = "";

            while ((line = bufff.readLine()) != null){
                sb.append(line + "\n");
            }

            ips.close();
            jstring = sb.toString();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            jsonObj = new JSONObject(jstring);
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return jsonObj;
    }       
    protected void onPostExecute(JSONObject result){
        super.onPostExecute(result);            
    }
    public void link(MainActivity mainActivity) {
        activity = mainActivity;        
    }       
    public void unlink() {
        activity = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:56:50.193

您可能做的最好的事情就是在您的任务上设置一个断点并逐步完成它。在我看来（请注意，您只需看一眼代码即可）到您的第二个 try 块被命中时，您的 ips 变量为空。

如果是这种情况，您可以尝试做的一件事是将 try 块压缩为一个块并组合 catch 语句（因为它们都做同样的事情），看看是否有帮助。

干杯。

# javascript - 使用 select 使用敲除掌握详细信息

> ID：13776374
> 
> 赞同：1
> 
> 时间：2012-12-08T09:53:49.040
> 
> 标签：javascript, wcf, knockout.js

我有下面的代码，它将加载一个列表：

```
<table id ="tblVersion" class="table table-striped table-hover " style="border: none" >
  <thead>
    <tr>
      <th style="display: none">Id</th>
      <th>Version Name</th>
      <th>Version Code </th>
      <th>Module Id</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: versionDataByProduct">
    <tr data-bind="click: $root.EditVersionDetail">
      <td data-bind="text: Id" style="display: none"></td>
      <td data-bind="text: Name"></td>
      <td data-bind="text: Code"></td>
      <td data-bind ="text: $root.editModuleId"></td>
    </tr>
  </tbody>
</table> 
```

这是我单击一行时加载详细信息的代码：

```
<div  id="EditVersionDetail" style="margin-top: 30px;margin-left: 10px">
  <table data-bind ="with: selecteditem">
    <tr>
      <td><strong>Version Name</strong></td>
      <td><input id="txtVersionName" data-bind ="value:  Name" /></td>
    </tr>
    <tr><td>&nbsp;</td></tr>
    <tr>
      <td><strong>Version Code</strong></td>
      <td><input id="txtVersionCode"  data-bind="value: Code" /></td>
    </tr>
    <tr>
      <td><strong>Module</strong></td>
      <td><select id="selModuleType"  data-bind="options: $root.modules,  optionsCaption: 'Please select Module...' , value: $root.editModuleId , optionsText: 'ModuleName'" /></td>
    </tr>
  </table>
</div> 
```

当我单击一行时，数据会在详细信息部分正确加载。但是如果我在细节部分改变了一些数据，列表中的值也会改变，除了`editModuleId`. 如果我在选择列表中选择了某个值，则该值不会反映在列表中。这`editModuleId`有来自不同表的数据，但与可观察数组“versionDataByProduct”有关系。

我应该怎么办？你能给我一个例子，每当有变化时，包括下拉列表在内的细节值都会反映在主控中？

# c# - 正则表达式匹配括号内的所有括号内？

> ID：13776377
> 
> 赞同：0
> 
> 时间：2012-12-08T09:54:11.413
> 
> 标签：c#, .net, regex

我想找到以下值

```
PROCEDURE test {
        test { }
} 
```

从：

```
test {
    PROCEDURE test {
        test { }
    }
} 
```

我目前的正则表达式是：

```
PROCEDURE.*?{.*?(\}){2} 
```

但它不匹配。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:58:37.250

您需要匹配`{`和`}`之间的`first {`和 对`last }`。

你可以试试这个正则表达式： -

```
PROCEDURE[^{]*[{](?:[^{]*[{][^}]*[}])*[^}]*[}] 
```

我在字符类中包含了花括号，这样你就不需要转义它们，同样`[^{]*`，你不需要`reluctant`匹配，因为它会自动停止在第一个`{`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:59:54.600

这个正则表达式怎么样：

```
PROCEDURE\s+\w+\s*\{(?:.*?\{.*?\})*.*?\} 
```

它匹配成对的 {}。

但是，如果该过程包含包含大括号的字符串或注释，它将失败。

# c - fflush 在命名管道中不起作用

> ID：13776383
> 
> 赞同：1
> 
> 时间：2012-12-08T09:54:44.033
> 
> 标签：c

我有这个代码：当第一个孩子向第二个孩子发送数据时程序卡住了，第二个孩子做 fscanf 然后卡住了，因为他看不懂我找不到它的原因。请帮助我了解如何确保 fflush 将传输数据。

```
int main()
{
    pid_t childPid ; //Child's and father process id.
    int i ; //An index to create children in loop.
    unsigned int st_search_prime = 0 ;

    if((mkfifo(FIRST_FIFO, S_IFIFO | 0644) == FAIL && errno != EEXIST) ||
       (mkfifo(SECOND_FIFO, S_IFIFO | 0644) == FAIL && errno != EEXIST))
    {
        perror("Cannot create fifo file") ;
        exit(EXIT_FAILURE) ;
    }
    //create the children
    for(i = 0 ; i < NUM_OF_CHILDS  ; i++)
    {
        childPid = fork() ;
        if(childPid < 0)    //Fork failed.
        {
            perror("Cannot fork()") ;
            exit(EXIT_FAILURE) ;
        }
        else if(childPid == CHILD)  //child process
        {
            if(i == FIRST_SON)  //the 1st child process
                doChild1(st_search_prime) ;
            else        //the 2nd child process.
                doChild2(st_search_prime) ;
        }
    }
    //wait for the children to exit.
    for(i = 0 ; i < NUM_OF_CHILDS ; i++)
        wait(&childPid) ;

    return(EXIT_SUCCESS) ;
}

void doChild1(unsigned int st_search_prime)
{
    int counter = 0 ; //Counter for N successfully raffle .
    FILE* fdw1 ;
    FILE* fdr2 ;

    if((!(fdw1 = fopen(FIRST_FIFO, "w"))))
    {
        perror("Cannot open fifo file for w/r") ;
        exit(EXIT_FAILURE) ;
    }

    if((!(fdr2 = fopen(SECOND_FIFO, "r"))))
    {
        perror("Cannot open fifo file for w/r") ;
        exit(EXIT_FAILURE) ;
    }

    for(; counter < N ; counter++)
    {
        st_search_prime = raffle_prime(st_search_prime) ;
        **fprintf(fdw1, "%u\n", st_search_prime) ;
        fflush(fdw1) ;**
        printf("%u\n", st_search_prime) ;
        fscanf(fdr2, "%u\n", &st_search_prime) ;
    }
    fclose(fdw1) ;
    fclose(fdr2) ;

    exit(EXIT_SUCCESS) ;
}

void doChild2(unsigned int st_search_prime)
{
    int counter = 0 ; //Counter for N successfully raffle .
    FILE* fdw2 ;
    FILE* fdr1 ;

    if((!(fdr1 = fopen(FIRST_FIFO, "r"))))
    {
        perror("Cannot open fifo file for w/r") ;
        exit(EXIT_FAILURE) ;
    }
    if(!(fdw2 = fopen(SECOND_FIFO, "w")))
    {
        perror("Cannot open fifo file for w/r") ;
        exit(EXIT_FAILURE) ;
    }

    for(; counter < N ; counter++)
    {
        **fscanf(fdr1, "%u\n", &st_search_prime);**
        st_search_prime = raffle_prime(st_search_prime) ;
        fprintf(fdw2, "%u\n", st_search_prime) ;
        fflush(fdw2) ;
        printf("%u\n", st_search_prime) ;
    }
    fclose(fdr1) ;
    fclose(fdw2) ;

    exit(EXIT_SUCCESS) ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:00:50.283

尝试添加通话`setlinebuf(fdw1)`- 这应该会有所帮助。

此调用在换行符后强制刷新缓冲区。您也可以使用`setvbuf()`with 参数`_IOLBF`来获得相同的效果或`_IONBF`完全禁用缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T13:55:22.320

我相信的问题是`\n`在你的`fscanf`模式中使用。手册页`fscanf`说：

> 格式字符串由一系列指令组成，这些指令描述了如何处理输入字符序列。如果指令处理失败，则不再读取输入，并且 scanf() 返回。“失败”可以是以下任何一种：输入失败，意味着输入字符不可用，或匹配失败，意味着输入不合适......

此外，根据指令，我们有：

> 一系列空白字符（空格、制表符、换行符等；参见 isspace(3)）。该指令匹配输入中任意数量的空白，包括无空白。

因此，当`doChild2`您使用该`fscanf`模式时，`"%u\n"`该模式由两个输入指令组成，一个`%u`匹配传入的数字，然后`\n`匹配传入的换行符（空白）。此时，`fscanf`将继续寻找更多输入，因为没有更多输入被发送，导致您的程序阻塞。

为什么`fscanf`要回去寻找更多的输入？上面的第一个引用告诉我们终止的两个条件，要么没有更多的输入；要么 那么先进先出仍然是打开的，所以我们不知道没有更多的输入，所以条件不满足，或者，`fscanf`如果指令匹配失败，将返回；但这还没有发生。

就修复而言，`\n`从`fscanf`模式中删除应该就足够了。手册页告诉我们：

> 大多数转换会丢弃初始空白字符...

就是这种情况`%u`，因此如果您使用 的 模式发送`%u\n`但`fscanf`使用 的模式`%u`则将导致指令`\n`匹配失败，从而导致返回。这会将 保留在输入缓冲区中，但是，下一次调用将丢弃初始空白（换行符），一切都应该很好。`%u``fscanf``\n``fscanf`

# multithreading - 线程之间多次切换会影响性能吗？

> ID：13776384
> 
> 赞同：0
> 
> 时间：2012-12-08T09:54:45.310
> 
> 标签：multithreading, performance, windows-phone-7, listbox, switch-statement

我从一篇文章中读到，该文章指出我们[应该批量添加项目](http://blogs.msdn.com/b/rohantha/archive/2010/09/12/silverlight-wp7-list-scroll-with-items-as-image-description-from-web-bing-image-search.aspx)以提高 Listbox 的响应能力。

为此，我们必须**每隔一定时间**（例如 20 毫秒）切换到 UI 线程。这会影响性能吗？

# android - 最后编辑事件？Android 日历提供程序

> ID：13776388
> 
> 赞同：3
> 
> 时间：2012-12-08T09:55:14.793
> 
> 标签：android, android-contentprovider

我有一个日历同步程序，我的主要问题是找到事件的最后编辑。我们有这方面的元数据吗？我需要这个值来同步，我发现它一个星期了，我猜谷歌不完全支持日历 API。有没有人遇到过这个问题？

感谢您的阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:44:26.470

我回来了，经过一周的研究，我找到了一个方法，那就是：A new event create, delete, modified must use`asSyncAdapter`

```
public static Uri asSyncAdapter(Uri uri, String account, String accountType) {
    return uri
            .buildUpon()
            .appendQueryParameter(android.provider.CalendarContract.CALLER_IS_SYNCADAPTER, "true")
            .appendQueryParameter(Calendars.ACCOUNT_NAME, account)
            .appendQueryParameter(Calendars.ACCOUNT_TYPE, accountType)
            .build();
} 
```

//例如：

```
ContentValues values = new ContentValues();
    values.put(Events.CALENDAR_ID, calendar_Id);
    values.put(Events.ORGANIZER, username);
    values.put(Events.TITLE, summary);
    values.put(Events.DESCRIPTION, description);
    values.put(Events.DTSTART, GlobalVar.convertTIMEtomilisecond(dtstart));
    values.put(Events.DTEND, GlobalVar.convertTIMEtomilisecond(dtend));
    values.put(Events.EVENT_TIMEZONE, timeZone);
    values.put(Events.EVENT_LOCATION, event_location);
    values.put(Events._SYNC_ID, uuid);
    values.put(Events.SYNC_DATA1, etag);
    values.put(Events.SYNC_DATA2, calendar.toString());
    Uri syncUri = CalendarProvider.asSyncAdapter(Events.CONTENT_URI, username, context.getResources().getString(R.string.ACCOUNT_TYPE));
    ContentResolver cr = context.getContentResolver();
    cr.insert(syncUri, values); 
```

//在这里获取脏事件

```
cur = cr.query(Uri.parse("content://com.android.calendar/events"), null, Events.DIRTY+" = ?", new String[]{String.valueOf(1)}, null);
    while (cur.moveToNext()) {
        int id = (int) cur.getLong(cur.getColumnIndex(Events._ID)); 
```

//它工作正常：P

# php - 不同页面上的 Wordpress 用户 ID 不同

> ID：13776393
> 
> 赞同：0
> 
> 时间：2012-12-08T09:55:34.560
> 
> 标签：php, wordpress, buddypress, userid

我在 Buddypress / Wordpress 网站上工作，并使用

```
get_queried_object()->ID; 
```

获取用户的 ID，但我在不同的页面上得到不同的结果。我得到了 47、59 和 2。它应该是 1，因为我是管理员。知道为什么它会改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:42:43.040

可能您正在寻找 get_current_user_id() 函数，而不是 get_queried_object() 函数。get_queried_object() 检索当前查询的对象。相反，您应该使用 get_current_user_id( )

```
$user_id = get_current_user_id();
if ($user_id == 0) {
    echo 'You are currently not logged in.';
} else {
    echo 'You are logged in as user '.$user_id;
} 
```

为了获得有关登录用户的信息，请尝试

```
global $current_user;
get_currentuserinfo();

echo 'Username: ' . $current_user->user_login . "\n";
echo 'User email: ' . $current_user->user_email . "\n";
echo 'User first name: ' . $current_user->user_firstname . "\n";
echo 'User last name: ' . $current_user->user_lastname . "\n";
echo 'User display name: ' . $current_user->display_name . "\n";
echo 'User ID: ' . $current_user->ID . "\n"; 
```

# php - 如何获取访问服务器的域名

> ID：13776401
> 
> 赞同：2
> 
> 时间：2012-12-08T09:57:29.490
> 
> 标签：php

我正在创建一个 REST API，所以基本上一个 api 密钥只对一个域有效，

示例：api_key 0kjs9s9s9 仅对 mysite.com 有效

这是出于安全目的，因此只能从 mysite.com 访问 0kjs9s9s9。

那么问题来了，如何获取访问该页面的域名？当我打印时`print_r($_SERVER)`，我只得到一个关于谁在请求页面的信息，'REMOTE_ADDR'，它是一个 IP。从某个地方阅读后，我发现我可以使用`gethostbyaddr($_SERVER['REMOTE_ADDR'])` ，但我不确定这是正确的方式。请任何人给我这个问题的示例代码。

如果 mysite.com 在代理和负载均衡器场下运行，该怎么办？我会得到哪个IP？代理还是域？

有人可以用假域名发送请求吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:21:26.840

远程IP甚至不一定会解析。代理和 NAT 设备可能会显示自己的 IP 地址；发起设备很可能没有公共 IP 地址，如果它自己的话。

# php - 初学者帮助需要简单的 PHP 脚本

> ID：13776404
> 
> 赞同：3
> 
> 时间：2012-12-08T09:57:54.930
> 
> 标签：php

我是一个完整的 php 初学者（以及 SO 上的第一个“海报”），并且似乎在我从教程中做的一个小脚本中遗漏了一些东西。

该脚本的基本假设是从服务器上托管的 txt 文件中获取 Ticker 名称，并输出从 yahoo Finance 获取的历史价格。

一切似乎都工作正常，除了我从 getCSVfile 函数获得的内容不正确（我从雅虎错误页面获得 html）。然而，获取的 URL 是正确的，如果我手动输入目标 URL，一切正常。

这可能是一个基本错误，但似乎无法找到它。似乎与 '' 和 ""s 有关。

非常感谢您的帮助

```
<?php 

include("includes/connect.php");

function createURL($ticker){
    $currentMonth = date('n') - 1;
    $currentDay = date('j');
    $currentYear = date('Y');
    $result = 'http://ichart.finance.yahoo.com/table.csv? s='.$ticker.'&a=07&b=19&c=2012&d=11&e=08&f=2012 &g=d&ignore=.csv';
    return (string)$result;
}

function getCSVFile($url, $outputFile){
    $content = file_get_contents($url);
    $content = str_replace('Date,Open,High,Low,Close,Volume,Adj Close','',$content);
    $content = trim($content);
   echo $content; /debugging
  file_put_contents($outputFile,$content);
}

//test debugging - this is where the problem seems to be happening - 
//the URL output is correct as is the getCSVfile but the combination of the two doesnt  work properly//

$test = createURL('GOOG');
echo $test;
getCSVFile($test, "memory.txt");

/code continues...

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:07:56.520

问题是您的 URL 确实包含一些不属于其中的空格：

```
$result = 'http://ichart.finance.yahoo.com/table.csv? s='.$ticker.'&a=07&b=19&c=2012&d=11&e=08&f=2012 &g=d&ignore=.csv';
                                                     ^                                               ^ 
```

尝试

```
$result = 'http://ichart.finance.yahoo.com/table.csv?s='.$ticker.'&a=07&b=19&c=2012&d=11&e=08&f=2012&g=d&ignore=.csv'; 
```

反而。

要注意这种错误，最好的方法是在浏览器中复制'n'粘贴你的调试输出，而不是输入它——否则你会经常错过这些小而明显的错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T10:03:55.207

在 createURL 函数中返回 URL 之前尝试使用 urlencode。所以那个函数的代码是这样的

```
function createURL($ticker){
$currentMonth = date('n') - 1;
$currentDay = date('j');
$currentYear = date('Y');
$result = 'http://ichart.finance.yahoo.com/table.csv? s='.$ticker.'&a=07&b=19&c=2012&d=11&e=08&f=2012 &g=d&ignore=.csv';
return urlencode($result);
} 
```

# python - 如何通过在python中使用它的id来检索对象

> ID：13776406
> 
> 赞同：0
> 
> 时间：2012-12-08T09:58:05.763
> 
> 标签：python, memory

> **可能重复：**
> [Python：按 id 获取对象](https://stackoverflow.com/questions/1396668/python-get-object-by-id)

我有一个查询，也就是说，如果我们尝试这个，在 python 中

```
>>>a=5

>>>id(a)
>>>746363 
```

那就是我们正在获取id，它相当于地址，我的查询是，有什么方法可以从id中获取值或对象，就像我们从对象中获取id一样

就像下面这样，

```
 >>>object(746363)

 >>>5 
```

我写了上面的一个来清楚地传递我的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:15:35.140

首先，返回内存地址的 id() 是 CPython 的实现细节，Python 不保证它会继续以这种方式工作。所以你应该重新考虑它并寻求更多的pythonic方法。

Python 没有公开任何“好的”API 来执行此操作，但您可以使用 ctypes 模块访问任何内存点。[此页面](http://www.smipple.net/snippet/moriyoshi/Accessing%20Python%20objects%20through%20id%28%29%20and%20ctypes%20module.)的示例：

```
import ctypes

class PyTypeObject(ctypes.Structure):
    _fields_ = ("ob_refcnt", ctypes.c_int), ("ob_type", ctypes.c_void_p), \
               ("ob_size", ctypes.c_int), ("tp_name", ctypes.c_char_p)

class PyObject(ctypes.Structure):
    _fields_ = ("ob_refcnt", ctypes.c_int), ("ob_type", ctypes.POINTER(PyTypeObject))

PyObjectPtr = ctypes.POINTER(PyObject)

print ctypes.cast(id("test"), PyObjectPtr).contents.ob_type.contents.tp_name 
```

# vb.net - vb.net 中的 Outlook 类库 - 使用 Messagebox 时奇怪的冻结

> ID：13776410
> 
> 赞同：1
> 
> 时间：2012-12-08T09:58:51.193
> 
> 标签：vb.net, outlook, messagebox, freeze

我为 Outlook 2003（vb.NET 4.0、WinXP SP3、Visual Studio 2010）编写的插件遇到了相当奇怪的行为。

我正在通过菜单打开一个设置窗口（Windows 窗体）。除了更改用户设置外，还可以单击按钮调用从远程服务器导入 XML 文件的函数。

除了从本地文件夹中删除旧文件并使用 My.Computer.FileSystem 方法从服务器复制新文件之外，此函数并没有做太多其他事情。

现在到了奇怪的部分：当文件被成功复制后，将显示一个消息框来通知用户。从关闭的那一刻起，Outlook 和设置窗口都会冻结，但并非完全冻结，因为您仍然可以使用键盘关闭设置表单。它只是不再对鼠标做出反应。如果我通过键盘关闭设置表单，我还会从调用表单的函数中收到“对象引用未设置为对象的实例”错误（在表单关闭后它立即进入错误处理）。Outlook 保持冻结状态，然后我必须终止该过程。

我注意到的其他事情：

1.) 如果新的 XML 文件没有被复制并且函数被提前终止（即因为当前版本已经存在或者服务器不可用），产生的消息框永远不会冻结程序。

2.) 将有问题的消息框从函数移动到表单的按钮单击事件不会改变任何内容。

3.）删除消息框解决了问题。但是设置表单创建的下一个消息框将导致相同的错误。

4.) 用 WPF System.Windows.MessageBox 替换通常的 System.Windows.Forms.MessageBox 也可以解决问题。但是，MsgBox 函数会导致相同的错误。

5.) 在 Outlook 中，我仍然可以通过鼠标浏览文件夹，但无法访问菜单栏或按钮，也无法使用“X”关闭窗口。

6.) 如果新文件无效，将被删除并重命名旧文件。在这种情况下，将显示两条消息，这一次程序只有在第二次单击该按钮并且在最后一个（第 4 个）消息框关闭之后才会冻结。如果设置表单在两次单击之间关闭并重新打开，则一切正常。此外，在设置表单关闭后，Outlook 本身可以正常使用（它不会冻结菜单/按钮）。

7.) 这发生在调试模式下，但也发生在正常模式下。

有谁知道为什么会这样？

谢谢！

# sql - Orchard：一个属性值不保存在 SQL Server 2012 中

> ID：13776411
> 
> 赞同：2
> 
> 时间：2012-12-08T09:58:56.383
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-4, orchardcms, sql-server-2012

在 Orchard 中，我有一个模型调用`MachineRecord`了一些属性并且一切正常，但现在我添加了一个属性，`DateAdded`当我向数据库添加一些示例数据时，所有值都被发布，除了我后来添加的属性。

*机器记录.cs*

```
 public class MachineRecord
  {
    public virtual int Id { get; set; }
    public virtual GroupRecord GroupRecord { get; set; }
    public virtual int MachineNumber { get; set; }
    public virtual string Title { get; set; }
    public virtual string Description1 { get; set; }
    public virtual string Description2 { get; set; }
    public virtual string Description3 { get; set; }
    public virtual string Description4 { get; set; }
    public virtual string Description5 { get; set; }
    public virtual string Description6 { get; set; }
    public virtual int SerialNumber { get; set; }
    public virtual string PriceType { get; set; }
    public virtual decimal Price { get; set; }
    public virtual int Year { get; set; }
    public virtual DateTime DateAdded { get; set; }
  } 
```

正如我所说，在这里我添加了一些示例数据，在添加该属性之前它一切正常。

```
 public void AddItems()
    {
      GroupRecord groupRecord = new GroupRecord()
      {
        Name = "Grondbewerking"
      };
      groupRepository.Create(groupRecord);

      MachineRecord machineRecord = new MachineRecord()
      {
        GroupRecord = groupRecord,
        Title = "Hassia zaaimachine",
        MachineNumber = 100000,
        Description1 = "25 Pijpen",
        Description2 = "Traploos",
        Description3 = "Mech. markeurs",
        Description4 = "Max. 30 pijpen",
        Description5 = "+ na egje",
        Description6 = "Ongecontroleerd",
        SerialNumber = 100001,
        Price = 1600.00m,
        PriceType = "Marge",
        Year = 2005,
        DateAdded = new DateTime(2012, 11, 9)
      };
      machineRepository.Create(machineRecord);
} 
```

所以我进入了代码，最后我找到了一个出错的方法，正如我们[在这里](http://s14.postimage.org/tc97nc7b5/Date_Added_example.jpg)看到的那样，值和属性实际上是在实体中，所以没关系，但是当我查看其他参数时，`propertyNames`比如您可以[在这里](http://s17.postimage.org/4sql4yfsf/Date_Added_example_2.jpg)看到它包含所有属性名称，例如`DateAdded`！因此，我进一步查看了最后生成的 SQL Query，该属性不在其中，因此数据库单元格中填充了`NULL`.

我确保 db 列的数据类型是`datetime`，并且我删除了 mappings.bin 以便 NHibernate 会再次缓存所有属性，但没有结果。

编辑：

忘记发布我的 migrations.cs。

*迁移.cs*

```
 public class Migrations : DataMigrationImpl
  {
    public int Create()
    {
      SchemaBuilder.CreateTable("MachineRecord", table => table
        .Column<int>("Id", c => c.PrimaryKey().Identity())
        .Column<int>("GroupRecord_Id")
        .Column<int>("MachineNumber", c => c.NotNull())
        .Column<string>("Title", c => c.NotNull().WithLength(40))
        .Column<string>("Description1", c => c.WithLength(70))
        .Column<string>("Description2", c => c.WithLength(70))
        .Column<string>("Description3", c => c.WithLength(70))
        .Column<string>("Description4", c => c.WithLength(70))
        .Column<string>("Description5", c => c.WithLength(70))
        .Column<string>("Description6", c => c.WithLength(70))
        .Column<string>("SerialNumber", c => c.WithLength(6))
        .Column<string>("PriceType", c => c.NotNull())
        .Column<decimal>("Price", c => c.NotNull())
        .Column<int>("Year", c => c.WithLength(4))
        .Column<DateTime>("DateAdded", c => c.WithType(DbType.DateTime))
      );

      SchemaBuilder.CreateTable("GroupRecord", table => table
        .Column<int>("Id", c => c.PrimaryKey().Identity())
        .Column<string>("Name")
      );

      return 1;
    }
  } 
```

有谁知道如何解决这一问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:56:06.023

您是否修改了迁移文件以将`DateAdded`列附加到数据库？如果您不这样做，Orchard 将无法识别它应该映射您的`MachineRecord`财产的内容。

* * *

编辑：

如果您正在修改类结构，则这些更改应该在迁移中的不同函数中，而不是在`Create()`方法中。

在您的情况下，您应该`DateAdded`从方法中删除该列`Create`并添加以下函数：

```
public int UpdateFrom1()
{
    SchemaBuilder.AlterTable("MachineRecord",
            table => table.AddColumn<DateTime>("DateAdded"));

    return 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:15:41.547

好的，它现在可以工作了，但我真的不知道我改变了什么，因为我只是想在等待一些答案的同时继续一些设计任务，我只是移动了一些 div 没什么特别的，然后我检查了我的数据库表，我看到日期在里面！

所以对于那些也来这里的人，我可以提一些我确信我没有做过的事情......

*   我没有再次运行迁移
*   我没有改变我的`AddItems()`方法
*   我没有改变我的`MachineRecord`
*   我没有改变我的数据库表

结论：与插入该值相关的任何内容都没有改变，所以可能是因为我重建了我的解决方案（再次）或者因为我重新启动了 VS ...

对不起，我希望我知道是怎么回事......但它已经解决了。@Ivan Feric 非常感谢您抽出宝贵时间！

# javascript - 在Firefox中捕获页面的x和y坐标

> ID：13776413
> 
> 赞同：0
> 
> 时间：2012-12-08T09:59:16.580
> 
> 标签：javascript, jquery, html, coordinates

我正在使用 jquery 插件来显示页面。我能够在 Chrome 和 IE 中捕获整个页面的坐标，但是当我尝试对 Firefox 执行相同操作时，它会捕获屏幕坐标而不是页面。有人可以帮忙吗。

代码 ：

```
$('.page').bind('click', function(event) {      

    var x;
    var y;

    if (!(event.offsetX || event.offsetY)) {

     x = event.clientX;
         y = event.clientY;

        }
        else {
            x = event.offsetX;
            y = event.offsetY;
        }               

    alert("x :" +x +", y: " +y);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:00:47.067

当您使用 jQuery 时，请使用[jQuery 为您规范化](http://api.jquery.com/category/events/event-object/)的事件对象的`pageX`和属性。从那个链接：`pageY`

> **事件属性**
> 
> jQuery 标准化以下属性以实现跨浏览器的一致性：
> 
> *   目标
> *   相关目标
> *   **第X页**
> *   **第Y页**
> *   哪一个
> *   元密钥

*（我的重点。）*

这些将可靠地与文档相关。如果您尝试获取相对于发生事件的元素的坐标，您可以通过以下方式找到该元素的位置[`offset`](http://api.jquery.com/offset)，然后进行数学运算：

```
$(".page").click(function(event) {
    var pos = $(this).offset();

    console.log("Click relative to document: " + event.pageX + "x" + event.pageY);
    pos.left = event.pageX - pos.left;
    pos.top  = event.pageY - pos.top;
    console.log("Click relative to element:  " + pos.left + "x" + pos.top);
}); 
```

[实例](http://jsbin.com/ejabet/1)| [来源](http://jsbin.com/ejabet/1/edit)

# php - 如何将日期时间拆分为多个部分以用于重复行

> ID：13776420
> 
> 赞同：0
> 
> 时间：2012-12-08T10:00:08.510
> 
> 标签：php, mysql, html

好的...所以我的数据库表（事件）中有一个事件表。在“开始”列中，我插入了一个日期时间。我需要从表中查询所有信息（标题、作者、区域、开始、地址、描述）并将“开始”行作为多个部分取出。原因？因为我的 PHP 文件中的月份、日期和时间都在单独的标签下。所以我有一些看起来像这样的东西：

```
<div class="calndr">
<span class="month backcolr">DEC</span>
<span class="day colr bold">27th</span>
</div> 
```

此代码是我数据库中每个事件的重复区域。我正在使用dreamweaver（我知道我在黑暗的一面），但我可以自学。任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:10:08.490

```
SELECT ... DAY(start) as day, MONTH(start) as month, YEAR(start) as year ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:13:22.003

试试这个查询：

```
SELECT title, 
author, 
area, 
MONTHNAME(start) as month,
DAY(start) as day,
TIME(start) as time, 
address, 
desc FROM events 
```

如果您想格式化月份、日期或时间，您可以在 mysql 文档中查看此功能。这是它的链接：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

祝你好运

# php - 我应该如何将用户喜欢的页面的数据存储到Mysql数据库中

> ID：13776421
> 
> 赞同：0
> 
> 时间：2012-12-08T10:00:17.880
> 
> 标签：php, mysql, facebook

我使用 Facebook PHP SDK 来获取用户喜欢的页面。

```
$liked = $facebook->api('/me/likes'); 
```

解码 JSON 后，我得到如下输出数组：

```
Array ( 
[data] => Array ( 
[0] => Array ( [category] => Book [name] => Steve Jobs by Walter Isaacson [id] => 152707268157952 [created_time] => 2012-12-05T15:10:14+0000 ) 
[1] => Array ( [category] => Internet/software [name] => Evernote [id] => 30670583128 [created_time] => 2012-11-24T04:39:25+0000 ) 
[2] => Array ( [category] => Product/service [name] => HTC [id] => 112176482203770 [created_time] => 2012-11-15T06:36:59+0000 )
....
....
....
) 
```

我想将用户喜欢的每个页面的类别和名称存储到数据库表中。我想以一种可以有效比较两个用户并获得相互喜欢的页面的方式存储它。例如：当一个用户想和另一个用户比较共同的书籍时，用户可以得到相互喜欢的书籍。

我应该如何将数组中的数据存储到表中，以便以后可以使用它进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:07:06.023

`liked_pages`为您希望存储的所有数据创建一个包含列的表 ( )：

*   用户身份
*   类别
*   姓名
*   ID
*   创建时间

将数组中的数据存储在此表中。

然后给定两个 user_ids（在本例中，假设为`1`和`2`），要找到相互喜欢的页面，您可以执行以下操作：

```
SELECT id FROM liked_pages
WHERE user_id IN (1,2)
GROUP BY id
HAVING COUNT(id) = 2 
```

如果您想将其扩展为仅在某个类别中查找相互喜欢的页面（比如说“书籍”），您将添加一个额外的 where 子句`category = 'books'`。

**编辑：**

为了扩展您在评论中提出的问题，最佳做法是在数据库表中每行仅存储一条记录，因为这允许您在检索数据时搜索和排序相关记录，这是数据库引擎优化的。

另一种方法是[序列化](http://php.net/manual/en/function.serialize.php)数组并为每个用户只存储一个条目，然后从数据库中检索数组，对其进行反序列化，然后在[PHP](http://php.net/manual/en/function.unserialize.php)中执行所有搜索/排序，但这会降低效率。

# user-interface - 使用 SIKULI 测试编辑器可扩展性 - 自然输入

> ID：13776423
> 
> 赞同：0
> 
> 时间：2012-12-08T10:00:25.150
> 
> 标签：user-interface, testing, editor, scalability, sikuli

我正在尝试加速大型 fortran 文件的编辑器，并尝试使用 Sikuli 测试我的调整。问题是如果我要输入一个有 20,000 行的文件，编辑器就会变得无响应。但是当我让 Sikuli 输入一个 20,000 行的文件时，编辑器也设法打印出我要求的任何内容（它看起来像是挂起，但在粘贴所有文本之前是不可见的输入）。我曾尝试在单词之间添加等待语句以进行协调，但似乎没有什么能够减慢 sikuli 脚本的速度。因此，这两个测试（一个打开了可扩展性选项，一个没有）显示了相同的结果，但我知道通过手动测试这不是真的。关于如何通过自动化复制人类打字，或者让 Sikuli 在继续打字之前等待文本出现的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:20:25.077

[等待](http://doc.sikuli.org/region.html?highlight=pause#Region.wait)功能应该完全符合您的要求。

您可能需要在字符之间等待 120 毫秒来模拟打字。这将是 100wpm。看看这个[链接](https://answers.launchpad.net/sikuli/+question/133092)，它描述了如何创建一个可以很好地模拟人类打字的随机延迟时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:12:10.953

我已经以与 spearson 上述类似的方式回答了您在启动板/sikuli 上的问题，但现在有了您的补充评论，我终于明白了您的问题。

**Region.onChange()：**
当前版本X-1.0rc3中Java级别的observe()特性不起作用

但是您可以相当简单地构建自己的观察者：

在类型之后，您要等待编辑器窗口更新其内容

1.  捕获编辑器区域
2.  在每 0.x 秒循环检查一次，是否仍然找到该图像
3.  如果不再找到图像，则编辑器窗口已更改

这主要是观察/onChange 内部所做的：标准最小延迟为 0.3 秒（ObserveScanRate），它只是将屏幕/区域与给定的开始图像进行比较。

# apache - 如何在我的 cgi 脚本中获取 VirtualHost Name？

> ID：13776424
> 
> 赞同：1
> 
> 时间：2012-12-08T10:00:29.687
> 
> 标签：apache, nginx, cgi

我使用 Nginx 作为反向代理服务器，并将请求转发到后端上游。
所有的后端上游实际上都是 Apache2 的 NameVirtualHost，并且它们在同一个主机中。
有一个用 Bash 编写的简单 cgi 程序，将由上述虚拟主机运行。我的问题是，这个 cgi 脚本是否可以获取它现在正在运行的 VirtualHost 名称。谢谢！

# c - Xilinx Microblaze 中的 Visual C 项目

> ID：13776427
> 
> 赞同：0
> 
> 时间：2012-12-08T10:00:59.543
> 
> 标签：c, xilinx

我可以将 Visual C 项目中的 C 代码嵌入到 Xilinx Microblaze 中吗？我已经创建了硬件的 EDK 设计，并希望将基于 Visual Studio 的 FIR 滤波器设计导入 Xilinx SDK。我不知道该怎么做。甚至可能吗？有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:24:53.257

最近我在玩 xilinx 的 Spartan06。据我了解，您**无法**将 Visual C 项目导入 Xilinx Microblaze。

这是因为您需要使用交叉编译器来定位 Microblaze 处理器。Xilinx 使用 CodeSourcery 的 gcc 来做到这一点。这就是为什么您需要使用 SDK 为 Microblaze 编译程序的原因。

要在他们的板上正常运行，您需要将正确的值写入正确的寄存器（根据您的设计）；这就是赛灵思 C 库将派上用场的地方。

此外，在 Visual C 中设置 Xilinx C 库也会很麻烦。

希望这会有所帮助，问候

# java - 真值表数组

> ID：13776428
> 
> 赞同：3
> 
> 时间：2012-12-08T10:01:14.690
> 
> 标签：java, truthtable

我被困在如何开始编码这个问题上。我希望能够做到以下几点。这是一个经典的抛硬币问题 如果我抛两次，结果是：
TT
TF
FT
FF
我希望能够创建一个一次只有一个结果的数组。为了更好地说明这一点，它应该类似于（顺便说一下，我使用的是 Java）：
boolean[] case = new boolean[numberOfFlips]

第一次案例将有：T T。
在我用这个结果完成其他计算之后，我想继续前进，现在制作案例：TF 并继续运行其他计算。
有人可以指导我正确的方向吗？我将不胜感激。任何语言的算法都适合我。感谢您的时间！（：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:07:38.057

有很多方法可以在 Java 中存储二进制数据，但不清楚要存储什么。如果你想存储所有可能的`N`翻转组合，那么你需要和数组`new boolean[2^N][N]`

请记住，Java 有另一种提升权力的语法。

**更新**

下面是存储所有`N`翻转组合的代码。

从中您将了解如何生成一个组合：从组合序数的二进制表示。看评论。

```
 // number of flips
    // limit it by 31
    int N = 3;

    // number of combinations
    // using bitshift to power 2
    int NN = 1<<N;

    // array to store combinations
    boolean flips[][] = new boolean[NN][N];

    // generating an array
    // enumerating combinations
    for(int nn=0; nn<NN; ++nn) {

        // enumerating flips
        for( int n=0; n<N; ++n) {

            // using the fact that binary nn number representation
            // is what we need
            // using bitwise functions to get appropriate bit
            // and converting it to boolean with ==
            flips[nn][N-n-1] = (((nn>>n) & 1)==1);

            // this is simpler bu reversed
            //flips[nn][n] = (((nn>>n) & 1)==1);

        }

    }

    // printing an array
    for(int nn=0; nn<NN; ++nn) {

        System.out.print("" + nn + ": ");

        for( int n=0; n<N; ++n) {
            System.out.print(flips[nn][n]?"T ":"F ");
        }
        System.out.println("");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:08:06.833

请注意您所需的输出和整数的二进制表示之间的相似性。这是一个例子：

```
for(int i = 0; i < 4; ++i) {
    boolean first = (i & 1) == 0;
    boolean second = (i & 2) == 0;
    System.out.println(first + "\t" + second);
} 
```

印刷：

```
true    true
false   true
true    false
false   false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T10:09:04.290

这是适用于任意次数翻转的通用解决方案（在合理范围内）：

```
public class Flips {

    static void generate(boolean[] res, int start) {
        if (start == res.length) {
            System.out.println(Arrays.toString(res));
        } else {
            generate(res, start + 1);
            res[start] = true;
            generate(res, start + 1);
            res[start] = false;
        }
    }

    static void generate(int n) {
        boolean res[] = new boolean[n];
        generate(res, 0);
    }

    public static void main(String args[]) {
        generate(4);
    }
} 
```

它以与您的问题不同的顺序生成组合，但如果这很重要，修改以匹配您的顺序是微不足道的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T10:10:51.610

使用递归：

```
public static void main(String args[]) {
int size = 3;
generateTable(0, size, new int[size]);
}

private static void generateTable(int index, int size, int[] current) {
if(index == size) { 
    for(int i = 0; i < size; i++) {
        System.out.print(current[i] + " ");
    }
    System.out.println();
} else {
    for(int i = 0; i < 2; i++) {
        current[index] = i;
        generateTable(index + 1, size, current);
    }
}
} 
```

# python - Python IDLE：自动缩进太大？

> ID：13776431
> 
> 赞同：4
> 
> 时间：2012-12-08T10:01:48.347
> 
> 标签：python, indentation

这与问题 "Changing indentation in Python's IDLE" [1](https://stackoverflow.com/questions/12193991/changing-indentation-in-pythons-idle)不同。在编写代码时，当您键入以冒号结尾的行时，IDLE 应该为用户缩进。但是在当前版本中，我使用的是 2.7.3（不确定其他版本中是否会出现这种情况），它缩进了五个制表位。这非常不和谐，并且基于互联网上的代码示例，我无法想象跳五个标签是公认的标准。我发现的唯一解决方案是通过缩进退格，但 IDLE 似乎更倾向于从第 33 列开始。

这尤其令人恼火，因为我更喜欢同时查看多个较小的窗口，这会将第一个缩进放在第 0 列的一行代码之后，大约在可见区域的一半处。

这有其他人想到的吗？

附录：这是 .py 文件的编辑模式，而不是 shell 本身。

# c# - 在 DataGrid 中显示金额最多保留两位小数而不四舍五入

> ID：13776438
> 
> 赞同：2
> 
> 时间：2012-12-08T10:03:44.690
> 
> 标签：c#, datagrid, floating-point, formatting, double

例如，当我在 Datagrid 中显示它时，我现在有一个大数字 12345678.88

使用

```
 <asp:Label ID="txtlineAmt" runat="server" ReadOnly="true" Text='<%# Eval("DtaLineAmount", "{0:F}") %>'></asp:Label> 
```

此数字显示为 12345680.00 即使数字变为 12345678.88888，我如何将其显示为 12345678.88

我在某处看到了以下代码来解决我的问题，但不知道如何使用它

```
result=string.Format("{0:0.0}",Math.Truncate(value*10)/10); 
```

# facebook - Facebook API & Spring Social——如何发布朋友墙

> ID：13776441
> 
> 赞同：2
> 
> 时间：2012-12-08T10:03:55.457
> 
> 标签：facebook, spring-social

我有一个 facebook 应用程序设置为需要扩展权限“publish_stream”（设置>>权限>>扩展权限：'publish_stream'。

我还有一个名为“scope”的隐藏输入字段，其值包括“publish_stream”。

当我通过发布更新时

```
<Facebook>.feedOperations().post(<friendId>, "<message>") 
```

我得到以下异常：

```
org.springframework.social.OperationNotPermittedException: (#200) Feed story publishing to other users is disabled for this application
    org.springframework.social.facebook.api.impl.FacebookErrorHandler.handleFacebookError(FacebookErrorHandler.java:113)
    org.springframework.social.facebook.api.impl.FacebookErrorHandler.handleError(FacebookErrorHandler.java:60) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:13:37.333

2013 年 2 月将取消通过 API 发布到朋友墙上的可能性 – [https://developers.facebook.com/roadmap/#february-2013](https://developers.facebook.com/roadmap/#february-2013)：

> “我们将取消通过 Graph API 在用户朋友的墙上发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。”</p>

如果您的应用程序已经失败，也许您在设置中启用了相应的迁移？

无论如何，现在开发这样的东西没有多大意义，因为它在几周内将不再起作用。

# mysql - 如何在不创建表的情况下创建mysql索引

> ID：13776442
> 
> 赞同：1
> 
> 时间：2012-12-08T10:03:57.253
> 
> 标签：mysql, indexing

我正在使用图形数据库 neo4j 来存储数据。我需要 Neo4j 中的三个值用于每个节点并索引到 mysql 中。

这三个值将是整数或长类型，这三个数字将有数百万组。据我了解，在mysql中，我们需要创建一个表，然后索引它的列。

这里可以说，我创建了一个表“test”和 int1、int2 和 int3 作为列名，然后我可以索引这些列。

问题是： - 这增加了不必要的内存需求，表和索引都占用了内存。

有没有办法在mysql中创建索引而不创建表？

# wordpress - 在 wordpress 中创建自定义字段并上传图片

> ID：13776444
> 
> 赞同：2
> 
> 时间：2012-12-08T10:04:21.667
> 
> 标签：wordpress, image-upload

我正在尝试学习通过自定义字段上传图像文件的方式，但无法获得最简单的代码来做到这一点。我刚刚在这里做了一点：

```
add_action('admin_init', 'create_image_box');
function create_image_box() {
add_meta_box( 'meta-box-id', 'Image Field', 'display_image_box', 'post', 'normal', 'high' );
}

//Display the image_box
function display_image_box() {
 global $post;
  $image_id = get_post_meta($post->ID,'xxxx_image', true);
 echo 'Upload an image: <input type="file" name="xxxx_image" id="xxxx_image" />';

// Upload done: show it now...(as thmbnail or 60 x 50) 
```

任何人都请带我进入下一步，并展示在博客页面中显示图像的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T11:24:22.967

让我们在这里逐步进行：

1.  创建自定义字段元框，用于在帖子类型 => 帖子中插入图片网址。
2.  在后端更新/保存自定义字段值。
3.  在前端显示自定义字段值。

看到您的代码，您似乎缺少#2。试试下面的代码来保存自定义字段：

```
function save_joe_details($post_id){
  global $post;
  if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
  return $post_id;
  update_post_meta($post->ID, "custom_field_image", $_POST["custom_field_image"] );
}
add_action('save_post', 'save_joe_details'); 
```

显示自定义字段的#3 的代码将是：

```
<?php global $post;
$custom_image = get_post_custom($post->ID); ?>
<img src="<?php echo $custom_image["custom_field_image"][0] ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T06:01:43.330

您可以尝试将其包装在 wp_get_attachment_url 中，如下所示：-

```
wp_get_attachment_url( $custom_image["custom_field_image"][0] ); 
```

# mysql - 需要选择标记为“公开”或标记为“给朋友”的照片

> ID：13776445
> 
> 赞同：0
> 
> 时间：2012-12-08T10:04:25.543
> 
> 标签：mysql

我需要一些解决方案来选择标记为“公开”或标记为“朋友”的照片。我不知道这怎么可能。

选择公开照片是否容易：

```
 $result = mysql_query("SELECT filename, ownerid, etc... FROM photos 
WHERE public='1' order by id DESC limit $start, $step") or die('Error'); 
```

甚至是标有“给朋友”的照片

```
 $result = mysql_query("SELECT filename, ownerid, etc... FROM photos 
WHERE public='1' or for_friends='1' order by id DESC limit $start, $step") or die('Error'); 
```

但是......每张照片属于不同的所有者，在选择它们之前，查询必须知道我是否是这张照片所有者的朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:18:15.253

我猜你有一个关系表，它将用户链接到用户以匹配朋友关系

然后，当您登录时，您将拥有一个用户 ID。检查用户 ID 是否是图片所有者的朋友。如果是，则请求公共图片+朋友图片，否则仅请求公共图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:03:43.273

假设您有一个`friends`将用户与他们的朋友进行映射的表，具有列`user_id`和`friend_user_id`，那么您的查询应该是这样的：

```
SELECT * 
FROM photos p 
WHERE p.owner_id IN (SELECT friend_user_id 
                     FROM friends 
                     WHERE user_id = 1234 ) 
  AND (p.is_public = '1' OR p.for_friends = '1'); 
```

# jquery - Fancybox 图片库

> ID：13776446
> 
> 赞同：1
> 
> 时间：2012-12-08T10:04:42.823
> 
> 标签：jquery, jquery-plugins, fancybox, fancybox-2

我在 iframe 中有下一个代码，并且我实现了它在父级中显示，但现在我不知道如何将图像（如图片库示例中的图片库）分组。

我在一个例子中看到了这一点：

```
 $(document).ready(function() {
$('.imagen').click(function(e){
e.preventDefault();
parent.$.fancybox([
{href:'images/01.jpg', title: '01'},
{href:'images/02.jpg', title: '02'},
{href:'images/03.jpg', title: '03'}
],{
// href: this.href,
helpers: {
overlay: {............... 
```

但我不希望这样，因为链接将是动态的。我想使用类似的东西 `$(".fancybox") .attr('rel', 'gallery')`并使用它

```
 <a class="fancybox" rel="gallery" href="Lector.ashx?ImagenId=0" > 
```

实现使用下一个按钮查看所有 img 作为图片库，但我不需要修改。

我的代码：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('.fancybox').click(function (e) {
            e.preventDefault();
            parent.$.fancybox({
                href: this.href,
                helpers: {
                    title: { type: 'inside' },
                    overlay: {
                        opacity: 0.3
                    } // overlay
                    //, buttons: {}
                } // helpers
            }); // fancybox
        }); // click
    }); 
</script> 
```

身体

```
<a class="fancybox" href="Lector.ashx?ImagenId=14" >
  <img alt="" src="../Resources/background.png" width="100" height="100"/>
</a>
<a class="fancybox" href="Lector.ashx?ImagenId=6">
<img alt="" src="Lector.ashx?ImagenId=6" width="100" height="100"/>
 </a>
 <a class="fancybox" href="Lector.ashx?ImagenId=20">
    <img alt="" src="Lector.ashx?ImagenId=6" width="100" height="100"/>
 </a> 
```

我正在使用 fancybox 2.1.3 请帮助我！！！提前致谢

```
I have to do this?
    $(document).ready(function () {
        $('.fancybox').click(function (e) {
    like i said before at start???
    });//click
    $('.fancybox').attr('rel', 'gallery').fancybox({
         JFK code??
     });
    });// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:37:25.827

如果您有这些链接：

```
<a class="fancybox" href="Lector.ashx?ImagenId=14" >
  <img alt="" src="../Resources/background.png" width="100" height="100"/>
</a>
<a class="fancybox" href="Lector.ashx?ImagenId=6">
  <img alt="" class="fancybox" src="Lector.ashx?ImagenId=6.jpg" width="100" height="100"/>
</a>
<a class="fancybox" href="Lector.ashx?ImagenId=20">
  <img alt="" src="Lector.ashx?ImagenId=6.jpg" width="100" height="100"/>
</a> 
```

...请注意，它们都没有图像扩展名，因此 fancybox 不知道`type`要处理什么内容...您需要使用`type : "image"`API 选项告诉它。检查[Fancybox 文档](http://fancyapps.com/fancybox/#support) **常见问题**选项卡，第 5 号

您的完整代码应如下所示：

```
$(document).ready(function (){
    $('.fancybox').attr('rel', 'gallery').fancybox({
            type : "image", // force type of content to image
            helpers: {
                title: { type: 'inside' },
                overlay: {
                    opacity: 0.3
                } // overlay
            } // helpers
    }); // fancybox
}); // ready 
```

**编辑**：我注意到您还在标签中设置了类`fancybox`（`img`上面代码中的第二个链接），例如：

```
<img alt="" class="fancybox" .... 
```

...这可能会产生意想不到的结果，因此最好将其从那里删除。只有`<a>`标签应该有 class `fancybox`。

# c# - 从 iis 运行 mmc.exe services.msc

> ID：13776449
> 
> 赞同：-1
> 
> 时间：2012-12-08T10:05:35.580
> 
> 标签：c#, asp.net, iis

[http://www.lansweeper.com/](http://www.lansweeper.com/)具有允许用户从 Web 应用程序执行远程计算机管理等操作的功能。我需要将它部署在我的 Asp.Net c# web 应用程序中。当我构建我的项目时，我通过代码来完成它，但是当我尝试从 IIS 运行它时它不起作用，什么也没发生。

请提供任何帮助和想法。没有遇到错误

```
protected void lnkComputermanagement_Click(object sender, EventArgs e)
{
    try
    {
        long InfoID = Convert.ToInt64(txtInfoID.Text);
        IBAPanel.NetworkSupport.WMIInfo WMIInfo = new IBAPanel.NetworkSupport.WMIInfo();
        WMIInfo = WMIInfo.Get(Convert.ToInt32(InfoID));
        string ComName = WMIInfo.ComputerName1;
        string Pass = WMIInfo.Password;

        if (WMIInfo.UserName != "" && WMIInfo.ComputerName1 != "" && WMIInfo.Password != "")
        {
            string Usname = WMIInfo.UserName.Substring(2);

            ProcessStartInfo startInfo = new ProcessStartInfo();
            Process myprocess = new Process();
            myprocess.StartInfo.CreateNoWindow = true;
            myprocess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            myprocess.StartInfo.UseShellExecute = false;
            myprocess.StartInfo.Verb = "runas";
            myprocess.StartInfo.FileName = "cmd.exe";
            myprocess.StartInfo.UserName = Usname;
            myprocess.StartInfo.Password = MakeSecureString(Pass);
            myprocess.StartInfo.Arguments = "/C mmc.exe compmgmt.msc /computer:" + ComName;
            myprocess.Start();
            myprocess.Close();
        }

        Response.Redirect("content.aspx?lan=fa&gid=524&InfoID=" + InfoID);

        ActionJquery();
    }
    catch (Exception ex)
    {
        System.Text.StringBuilder cstext1 = new System.Text.StringBuilder();
        cstext1.Append(" $(document).ready(function () {");
        cstext1.Append("alert(" + ex.Message + ")  ");
        cstext1.Append(" });  ");
        Page.ClientScript.RegisterStartupScript(typeof(Page), "", cstext1.ToString(), true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:25:38.827

您是在网络服务器上启动命令“mmc.exe”，而不是在浏览网站的客户端上。如果您查看网络服务器上的任务管理器，您将看到多个正在运行的 mmc.exe 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T13:24:34.027

要从 Web 管理 Windows 服务，您需要特殊权限，并且您不能通过 Services.msc，您需要使用 WMI（Windows 管理工具）并且您需要为应用程序池提供更高的权限，但最好的方法是模拟您的作品获取服务信息的代码。

一个完全使用 WMI 的优秀开源项目是 Codeplex 上的 Services+：

[CodePlex 上的服务+](https://servicesplus.codeplex.com/)

谢谢

# java - 如何将图像文件保存在数据库中？

> ID：13776451
> 
> 赞同：-3
> 
> 时间：2012-12-08T10:05:37.143
> 
> 标签：java, database, image

我有一个桌面程序，我必须在数据库中保存不同格式和不同大小的图像文件。知道我该怎么做吗？任何人都可以帮助我，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:07:34.290

通常您应该只将图像文件的地址存储在数据库中。

达到同样的目的，数据库不会变得臃肿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:09:57.833

作为 BLOB：[http ://en.wikipedia.org/wiki/Binary_large_object](http://en.wikipedia.org/wiki/Binary_large_object)

确切的实现取决于您的数据库系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:11:26.180

这是新手开发人员最常见的问题。最好的解决方案是......您将图像保存在文件夹中并将文件路径保存在数据库中，然后您可以使用此文件路径访问文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T11:04:51.220

**您可以通过将图像转换为二进制**来将图像保存到数据库中，如下所示：

```
public void saveImage(File file){
        try {
            String img_id=JOptionPane.showInputDialog("Enter Image ID");
            FileInputStream fis=null;
            String query="insert into image(image_id,image) values (?,?)";
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con=DriverManager.getConnection("jdbc:odbc:image");
            PreparedStatement pstm=con.prepareStatement(query);
            fis=new FileInputStream(file);
            pstm.setString(1, img_id);       
            pstm.setBinaryStream(2, (InputStream)fis, (int)file.length());
            pstm.executeUpdate();
            JOptionPane.showMessageDialog(null, "Image Successfully Uploaded to Database");
            pstm.close();
            con.close();

        } catch (Exception ex) {
            System.out.println("Exception Occured: "+ex);
        }
    } 
```

并通过再次从二进制制作图像并将其保存在某个物理位置来检索它：

```
public void getSavedImages(){
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection con = DriverManager.getConnection("jdbc:odbc:image");
            PreparedStatement pstm1 = con.prepareStatement("select * from image");
            ResultSet rs1 = pstm1.executeQuery();
            while(rs1.next()) {
                InputStream fis1;
                FileOutputStream fos;
                String image_id;
                try {
                    fis1 = rs1.getBinaryStream("image");
                    image_id=rs1.getString("image_id");
                    fos = new FileOutputStream(new File(Path to "C:\\" + (image_id) + "Your Extension(.jpg/.gif)"));
                    int c;
                    while ((c = fis1.read()) != -1) {
                        fos.write(c);
                    }
                    fis1.close();
                    fos.close();

                } catch (Exception ex) {
                    System.out.println(ex);
                }
            } 
            pstm1.close();
            con.close();
        } catch (Exception ex) {
            System.out.println("Exception Occured:"+ex);
        }
    } 
```

# android - 如何在 windows-1251 编码中解析 xml？

> ID：13776454
> 
> 赞同：0
> 
> 时间：2012-12-08T10:06:08.703
> 
> 标签：android

我尝试解析以 ni utf 格式提供数据的网络资源，但是当我开始解析时，我得到：

```
12-08 11:30:44.097: E/Reader(670): org.xmlpull.v1.XmlPullParserException: Error parsing document. (position:line -1, column -1) caused by: org.apache.harmony.xml.ExpatParser$ParseException: At line 10, column 15: not well-formed (invalid token)
12-08 11:30:44.097: E/Reader(670):  at org.apache.harmony.xml.ExpatPullParser$ByteDocument.flush(ExpatPullParser.java:958)
12-08 11:30:44.097: E/Reader(670):  at org.apache.harmony.xml.ExpatPullParser$Document.pump(ExpatPullParser.java:769)
12-08 11:30:44.097: E/Reader(670):  at org.apache.harmony.xml.ExpatPullParser$Document.dequeue(ExpatPullParser.java:813)
12-08 11:30:44.097: E/Reader(670):  at org.apache.harmony.xml.ExpatPullParser.next(ExpatPullParser.java:302)
12-08 11:30:44.097: E/Reader(670):  at org.apache.harmony.xml.ExpatPullParser.nextTag(ExpatPullParser.java:338)
12-08 11:30:44.097: E/Reader(670):  at com.home.network.RssParser.parseSax(RssParser.java:78) 
```

我在解析器中设置了 UTF-8 参数，但它没有帮助：

```
 List<Feed> feeds = new ArrayList<Feed>();
try {
    XmlPullParser parser = Xml.newPullParser();
    parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
    parser.setInput(is, "UTF-8");
//          parser.setFeature(XmlPullParser., state)
    parser.nextTag();
    feeds = readFeed(parser);
} catch (XmlPullParserException e) {
    Log.e("Reader", "Parse exception", e);
} catch (IOException e) {
    Log.e("Reader", "Parse exception", e);
} finally { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:15:52.877

尝试将 null 作为第二个参数传输：

```
parser.setInput(is, null); 
```

在这种情况下，解析器将尝试自动检测内容的编码。

# python - 来自 argv 的浮点数问题

> ID：13776456
> 
> 赞同：2
> 
> 时间：2012-12-08T10:06:42.520
> 
> 标签：python, argv

我很难将传入的 argv[1] 转换为浮点数。我一直在尝试基本上传入任何 int 后跟小数，并将其向上/向下舍入到最接近的整数。（基本的入门python项目）我现在一直在尝试使用float，但无法弄清楚。

```
import sys

x = int(sys.argv[1])
num = x + .5
s = str(num())
point = s.find('.')
print s[:point]

if __name__ == "__main__":
    x(int(sys.argv[1])) 
```

编辑（当前代码，咖啡和清理之后）：

```
import sys

def x(argument):
    num = argument + .5
    s = str(num())
    point = s.find('.')
    print s[:point]

if __name__ == "__main__":
    x(int(round(float(sys.argv[1])))) 
```

最终代码（信用归：NPE）

```
import sys

def x(argument):
    print "Passed in value: " + str(argument)
    num = argument + .5
    print "Rounded whole number: " + str(int(num))

if __name__ == "__main__":
    x(float(sys.argv[1])) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:17:00.650

听起来你正在寻找

```
val = round(float(sys.argv[1])) 
```

或者

```
val = int(round(float(sys.argv[1]))) 
```

取决于您期望的类型`val`。

# zend-framework2 - 如何在 Zend Framework 2 中创建自定义表单元素？

> ID：13776458
> 
> 赞同：10
> 
> 时间：2012-12-08T10:06:52.307
> 
> 标签：zend-framework2

如何在 ZF2 中使用自定义验证器创建自定义表单元素？我想创建使用 jQuery 的自定义类别选择器，并且该元素的内容应该从 phtml 脚本呈现。在 ZF1 中这很容易，但在 ZF2 中我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-08T11:01:54.633

表单元素必须实现一个`Zend\Form\ElementInterface`. 默认类是`Zend\Form\Element`您可以用作基本形式的类：

```
<?php
namespace MyModule\Form\Element;

use Zend\Form\Element;

class Foo extends Element
{
} 
```

**自定义验证器**

您可以让元素直接分配自定义验证器。然后你必须实现`Zend\InputFilter\InputProviderInterface`：

```
<?php
namespace MyModule\Form\Element;

use Zend\Form\Element;
use Zend\InputFilter\InputProviderInterface;
use MyModule\InputFilter\Bar as BarValidator;

class Foo extends Element implements InputProviderInterface
{
    protected $validator;

    public function getValidator()
    {
        if (null === $this->validator) {
            $this->validator = new BarValidator;
        }
        return $this->validator;
    }

    public function getInputSpecification()
    {
        return array(
            'name'       => $this->getName(),
            'required'   => true,
            'validators' => array(
                $this->getValidator(),
            ),
        );
    }
} 
```

**自定义渲染**

目前，Zend Framework 如何处理自定义表单元素类型的呈现有点复杂。通常，它只返回普通`<input type="text">`元素。

有一种选择，然后您必须覆盖`Zend\Form\View\Helper\FormElement`助手。它已注册为`formelement`，您必须在自定义模块中覆盖此视图助手：

```
namespace MyModule;

class Module
{
    public function getViewHelperConfig()
    {
        return array(
            'invokables' => array(
                'formelement' => 'MyModule\Form\View\Helper\FormElement',
                'formfoo'     => 'MyModule\Form\View\Helper\FormFoo',
            ),
        );
    }
} 
```

此外，Zend Framework 2 中的每个表单元素都由视图助手呈现。因此，您为自己的元素创建了一个视图助手，它将呈现元素的内容。

然后你必须创建你自己的表单元素助手（`MyModule\Form\View\Helper\FormElement`）：

```
namespace MyModule\Form\View\Helper;

use MyModule\Form\Element;
use Zend\Form\View\Helper\FormElement as BaseFormElement;
use Zend\Form\ElementInterface;

class FormElement extends BaseFormElement
{
    public function render(ElementInterface $element)
    {
        $renderer = $this->getView();
        if (!method_exists($renderer, 'plugin')) {
            // Bail early if renderer is not pluggable
            return '';
        }

        if ($element instanceof Element\Foo) {
            $helper = $renderer->plugin('form_foo');
            return $helper($element);
        }

        return parent::render($element);
    }
} 
```

作为最后一步，创建视图助手来呈现这个特定的表单元素：

```
namespace MyModule\Form\View\Helper;

use Zend\Form\ElementInterface;
use Zend\Form\View\Helper\AbstractHelper;

class Foo extends AbstractHelper
{
    public function __invoke(ElementInterface $element)
    {
        // Render your element here
    }
} 
```

例如，如果要为此表单元素呈现 .phtml 文件，请将其加载到此帮助程序中：

```
namespace MyModule\Form\View\Helper;

use Zend\Form\ElementInterface;
use Zend\Form\View\Helper\AbstractHelper;

class Foo extends AbstractHelper
{
    protected $script = 'my-module/form-element/foo';

    public function render(ElementInterface $element)
    {
        return $this->getView()->render($this->script, array(
            'element' => $element
        ));
    }
} 
```

它将呈现一个`my-module/form-element/foo.phtml`并且在此脚本中您将拥有一个`$element`包含您的特定表单元素的变量。

# c++ - imap 客户端 - 如何撰写正确的请求？

> ID：13776459
> 
> 赞同：1
> 
> 时间：2012-12-08T10:07:03.943
> 
> 标签：c++, sockets, openssl, imap, winsock

我正在尝试使用 winsock/OpenSSL 制作简单的 IMAP 客户端，如果没有其他库，这可能吗？如果是这样，如何发送请求并获得响应？服务器只响应一次，即使没有请求，之后我发送请求和应用程序卡在 SSL_read(..) 函数，而不是超时和 BYE。如何发出正确的请求？ ![在此处输入图像描述](../Images/2554e1c5e4d738bb0a2729162da588ff.png)

```
bool RequestQueue(const char* serverName)
{
    SOCKET      hSocket = INVALID_SOCKET;
    char        receiveBuf[512];
    ZeroMemory(receiveBuf,512); 
    char        requestBuf[512];
    ZeroMemory(requestBuf,512); 
    sockaddr_in sockAddr = {0};
    bool        bSuccess = true;

    //SSL
    SSL* ssl;
    SSL_CTX* ctx;

    try
    {       
        //Look up hostname and fill sockaddr_in structure
        cout<< "Looking up hostname "<<serverName<<"...";
        FillSockAddr(&sockAddr,serverName,IMAP_SERVER_PORT);
        cout<< "found.\n";

        //creating socket
        cout<<"Creating socket..";
        if((hSocket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP)) == INVALID_SOCKET)
            throw exception("could not create socket!");
        cout<<"created.\n";

            //Connect to server
        cout<<"Attempting to connect to "<< inet_ntoa(sockAddr.sin_addr)
            <<":"<<IMAP_SERVER_PORT<<" ...";
        if(connect(hSocket,(sockaddr*)(&sockAddr),sizeof(sockAddr))!= 0)
            throw exception("could not connect!");

        cout<<"connected\n";

        ctx = SSL_CTX_new(SSLv23_client_method());
        if(!ctx)
            throw exception("SSL_CTX_new error");

        ssl = SSL_new(ctx);
        SSL_CTX_free(ctx);
        if(!ssl)
            throw exception("ssl initializing error");

        SSL_set_fd(ssl,hSocket);
        if(SSL_connect(ssl) != 1)
            throw exception("SSL_connect error");

        int reqLen;
        int retLen;
        cout<<"==============\n";
        cout<<"====begin=====\n";
        cout<<"==============\n";

        retLen = SSL_read(ssl,receiveBuf,sizeof(receiveBuf));
        if(retLen<0)
            throw exception("SSL_read error.");
        cout<<"S: "<<receiveBuf;

        strcpy(requestBuf,"a001 CAPABILITY");
        reqLen = strlen(requestBuf);
        SSL_write(ssl,requestBuf,reqLen);
        cout<<"C: "<<requestBuf<<endl;  

        ZeroMemory(receiveBuf,sizeof(receiveBuf));
        retLen = SSL_read(ssl,receiveBuf,sizeof(receiveBuf));
        if(retLen<0)
            throw exception("SSL_read error.");

        cout<<"S: "<<receiveBuf;                    
    }
    catch(exception e)
    {
        cout<<"Error : "<<e.what()<<endl;
    }
    if(hSocket != INVALID_SOCKET)
    {
        SSL_shutdown(ssl);
        closesocket(hSocket);
        SSL_free(ssl);      
    }

    return bSuccess;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:12:45.903

我没有深入分析您的代码，但我可以看到一个明显的问题。根据[RFC 3501](https://www.rfc-editor.org/rfc/rfc3501#section-2.2)：

> 客户端和服务器传输的所有交互都是行的形式，即以 CRLF 结尾的字符串。IMAP4rev1 客户端或服务器的协议接收器正在读取一行，或者正在读取具有已知计数的八位字节序列，后跟一行。

在您的代码中，您没有使用 CRLF 终止命令。尝试更换

```
strcpy(requestBuf,"a001 CAPABILITY"); 
```

和

```
strcpy(requestBuf,"a001 CAPABILITY\r\n"); 
```

此外，您最好先不使用 SSL，然后再添加它——这将大大简化调试（即使用[Wireshark](http://www.wireshark.org/)）。

# android - 难以在我的 listview android 中显示数据

> ID：13776461
> 
> 赞同：0
> 
> 时间：2012-12-08T10:07:13.053
> 
> 标签：android, listview

我在列表视图中显示数据时遇到问题。它没有垂直显示。

这是我的代码：

```
private ListView lv;
private ArrayList<String> results = new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.meal_result);
    BreakFastLog info = new BreakFastLog(this);
    info.open();

    String data1 = info.getMealNameData();
    //String data2 = info.getServingData();

    results.add(data1);
    lv = (ListView) findViewById (R.id.lvBF);   
    lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, results));
    lv.setTextFilterEnabled(true); 

    info.close();
} 
```

和我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <ListView
        android:id="@+id/lvBF"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这有什么问题？请帮我弄清楚是什么使它水平显示。

这是屏幕截图：

![在此处输入图像描述](../Images/1c0e313f5798b06f304dd15a30320c16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:14:38.183

尝试`<RelativeLayout>`使用您的 xml 而不是`<LinearLayout>`. 并将其添加到您的列表视图中

```
 <ListView
         android:id="@id+/yourListViewid"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"  
         android:layout_marginLeft="5dip"
         android:layout_marginRight="5dip"
         android:layout_alignParentTop="true" >
     </ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:26:10.160

看完你的代码后，

您`String data1 = info.getMealNameData();` 的`ArrayList<String> results`. 并将结果添加到您的列表适配器。

所以只有一行显示在您的`ListView`.

因此，您必须`String[]`为所有用户输入而不是您的输入，`String data1`然后将其传递`String[]`给您的列表适配器。

**更新：**

```
String data1 = info.getMealNameData();
String[] inputData = data1.split(" ");
lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, inputData )); 
```

# python - Python 注册到 Windows 文件系统修改

> ID：13776467
> 
> 赞同：0
> 
> 时间：2012-12-08T10:07:37.963
> 
> 标签：python, windows, io, filesystems, listener

> **可能重复：**
> [如何使用 Python 观察文件的更改？](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)

如何将长时间运行的 python 脚本注册到 Windows，以便在文件系统子树中收到修改（文件和文件夹创建/修改/删除）的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:06:32.417

您可以使用 [看门狗](http://pypi.python.org/pypi/watchdog)，它正在为 Windows 招聘 ReadDirectoryChangesW underley

# ruby-on-rails - 使用机架静态页面写入 404 错误页面路由

> ID：13776474
> 
> 赞同：2
> 
> 时间：2012-12-08T10:08:15.440
> 
> 标签：ruby-on-rails, ruby, heroku, rack, middleware

如何在 config.ru 文件 oa 机架静态页面（托管在 heroku 上）中映射 404 错误页面？

到目前为止，我的 config.ru 文件中有这个

```
use Rack::Static, 
  :urls => ["/css", "/images", "/fonts", "/js", "/robots.txt"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

我正在尝试做这样的事情：

```
if env["PATH_INFO"] =~ /^\/poller/
  [200, {"Content-Type" => "text/html"}, ["Hello, World!"]]
else
  [404, {"Content-Type" => "text/html"}, ["Not Found"]]
end 
```

如何使用 Rack 实现这一目标？请分享您拥有的任何链接，我可以用来在 Rack 上学习更多高级内容。我并没有真正发现 gem 中的基本链接有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:37:56.130

你应该使用`Rack::Builder`，它会自动为未映射的 URL 抛出 404：

```
app = Rack::Builder.new do

  map '/poller' do

    use Rack::Static,
      :urls => ["/css", "/images", "/fonts", "/js", "/robots.txt"],
      :root => "public"

    run lambda { |env|
      [
        200, 
        {
          'Content-Type'  => 'text/html', 
          'Cache-Control' => 'public, max-age=86400' 
        },
        File.open('public/index.html', File::RDONLY)
      ]
    }
  end

end.to_app

run app 
```

# iphone - 在特定时间取消所有通知

> ID：13776475
> 
> 赞同：1
> 
> 时间：2012-12-08T10:08:22.887
> 
> 标签：iphone, objective-c, ios, uilocalnotification, nsdatecomponents

对于我的应用程序，我不希望通知在周末关闭。所以我的想法是在星期五的特定时间取消所有通知，我想通过安排任务来做到这一点，就像我安排通知（`UILocalNotifications`）

因此，例如，我的警报有以下代码：

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setHour:8];
    [comps setMinute:25];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *fireDate = [gregorian dateFromComponents:comps];

    UILocalNotification *alarm = [[UILocalNotification alloc] init];

    alarm.fireDate = fireDate;
    alarm.repeatInterval = NSDayCalendarUnit;
    alarm.soundName = @"sound.aiff";
    alarm.alertBody = @"Message..";
    alarm.timeZone = [NSTimeZone defaultTimeZone];
    [[UIApplication sharedApplication] scheduleLocalNotification:alarm]; 
```

有没有办法用相同的方法取消所有通知，或者Apple不允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:21:13.593

您可以通过以下方式取消本地通知：

```
[[UIApplication sharedApplication] cancelLocalNotification:notification]; 
```

您需要遍历所有本地通知并在周末取消它们。通过它们循环：

```
NSArray *notifications = [[UIApplication sharedApplication] scheduledLocalNotifications];
[notifications enumerateObjectsUsingBlock:^(UILocalNotification *notification, NSUInteger idx, BOOL *stop){
    if (/* notification.fireDate is on weekend */) {
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
    }
}]; 
```

但是，您必须确保应用程序在星期五运行才能执行代码以删除周末通知。

但是，为什么不首先安排周末的时间呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:19:07.693

您可以使用该方法取消所有本地通知

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

如果您想浏览它们，并且可能发布最重要的通知，您可以使用`scheduledLocalNotifications`.

# c# - 从基类访问子类成员的首选方式

> ID：13776479
> 
> 赞同：0
> 
> 时间：2012-12-08T10:08:53.900
> 
> 标签：c#, oop, inheritance, polymorphism

在基类中访问子类属性的最佳方法是什么。似乎如果我使用继承，我只需要依赖方法而不是属性[因为单独的类存在单独的属性集]。是否有任何推荐的安全方式从基类访问子类属性。或者这是重构代码的任何首选方式，以便我可以通过基类访问子类成员。我知道虚函数的使用，但我不知道如何使用它来设置子类成员变量的值。

```
class Abc
{
  public int Abc_1 {get;set;}
  private int _abc;

  virtual int DoCalculationonAbc(int a)
  {
    return abc_1 * a;
  }

  virtual void SetValueToPrivate(int a)
  {
    _abc = a;
  }
}

class Def:Abc
{
  private int _def;
  private int _def2;
  public int Def_2{get;set;} // what is the preferred way to set values this property

  override public void SetValueToPrivate(int a)
  {
     _def = a;
     //_def2 = ??
  }
}

Main()
{
  Abc ab = new Def();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:17:24.000

当你想做这样的事情时，你应该提前知道你想让你的超类使用哪些属性。您可以在基类中将它们声明为受保护，以便您的子类可以根据自己的规则设置它们。

如前所述，您不能从基类访问孩子新声明的属性（如`_def2`和`_def`in class ）。`Def`

如果您实例化一个子类型并将其分配给一个超类型，例如`Abc ab = new Def()`，您决定将`ab`其视为`Abc`, 意思是，`Def`当您对`ab`. 确实，它`ab`确实是一个`Def`，但您必须将它作为一个`Abc`.

同样，如果您`Def`在函数中传递 a `someFunction(Abc ab)`，则该函数更好地`ab`视为 a `Abc`。`someFunction(Abc ab)`被创建来处理任何可能的子类型`Abc`，但只能通过它们在`Abc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:57:43.093

子类的成员不能从基类访问，因为它不知道哪个类继承了它。访问子类成员的唯一方法是通过多态性和向下转换来实现。

```
 class Base{
        public Base();
        int a;
    }

    class Derived : Base{
        public Derived();
        public int b;
    }
    Base testBase = new Test;
    Base testDerived = new Derived;
    testBase.a = (Derived)testDerived.b; // Downcasting here. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T15:50:32.330

你可以试试：

```
var testDerived = (Derived)new Derived(); //casting to derived class required to access its members.

testBase.a = testDerived.b; 
```

# c# - 我可以在 Windows XP 上启用/禁用唤醒计时器吗？

> ID：13776481
> 
> 赞同：0
> 
> 时间：2012-12-08T10:09:09.677
> 
> 标签：c#, c++, power-management

我知道可以使用[PowerWriteACValueIndex](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372765%28v=vs.85%29.aspx)或 PowerWriteDCValueIndex API在 Windows Vista 和更高版本的操作系统上启用或禁用唤醒计时器，或者我`GUID_ALLOW_RTC_WAKE`如何 在**Windows XP**中执行相同操作？`{BD3B718A-0680-4D9D-8AB2-E1D2B4AC806D}``GUID_SLEEP_SUBGROUP``{238C9FA8-0AAD-41ED-83F4-97BE242C8F20}`

# php - php正则表达式“和”

> ID：13776482
> 
> 赞同：0
> 
> 时间：2012-12-08T10:09:18.000
> 
> 标签：php, regex, preg-match-all

我必须为我从事的项目创建翻译。最简单的解决方案是将所有 stings 更改为 a`functioncall(string)`以便我每次都可以获得唯一的字符串哈希。

我的代码具有以下不同的`t()`功能用途：

```
<label for="anon"><?php echo t('anonymously? (20% extra)')?></label>

exit(t("Success! You made {amount} oranges out of it!", array('amount' => $oranges)));

echo t('You failed.'); 
```

我目前的正则表达式是：

```
$transMatches = preg_match_all('/[^a-z]t\([^)(]+/m', $contents, $matches); 
```

问题是它在#1 示例中失败，匹配“匿名？”。我真正想要实现的是：“匹配 t( 然后匹配 ' 或 " 然后匹配除匹配 ' 或 " 和 ) 之外的任何内容"

主意：`t\(['|"](.*?)[^'|"]\)?`

我无法使上述正则表达式起作用。

我怎么能在正则表达式中做 AND 以便它匹配 "['|"] AND )" OR "['|"] AND, array"

请帮助我了解正则表达式并解释它为什么有效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:19:48.733

解析函数参数可能[非常复杂](https://stackoverflow.com/questions/13428883/regular-expression-how-to-make-regex-take-second-as-starting-point/13429049#13429049)，但您只需要解析第一个参数（为简单起见）可以假设始终是字符串转义的 with`'`或 with `"`，因此这些正则表达式可能匹配“

```
"[^"\\\\]*(?:\\\\.[^"\\\\]*)*"
\'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*' 
```

因此，您只需要匹配：

```
'~[^\w\d]t\(\s*("[^"\\\\]*(?:\\\\.[^"\\\\]*)*"|\'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*\')~i' 
```

`[^\w\d]`假设 no`test1t`将匹配，`\s*`使您具有空间容忍度...

使用此正则表达式，您将获得如下结果：

```
'anonymously? (20% extra)'
"Success! You made {amount} oranges out of it!" 
```

而且我无法想象你也需要解析数组的情况，你能在评论/问题中描述它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:20:22.573

这是你需要的吗？

在正则表达式中使用反向引用 - [http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)

但是你在做什么看起来很奇怪，为什么？你用一些结果替换函数调用吗？为什么不让它调用函数并从中返回翻译？

# php - 从 PHP 查询 MySQL 数据库表时出错

> ID：13776483
> 
> 赞同：-1
> 
> 时间：2012-12-08T10:09:27.680
> 
> 标签：php, mysql, database

在我的代码中，我尝试使用以下内容查询数据库表：

```
$queryLogItemsStatement = "SELECT FROM transactions WHERE user1ID='". $userID . "' ORDER BY date DESC";
$queryLogItems = mysql_query($queryLogItemsStatement, $connection); 
while ($rowLog = mysql_fetch_array($queryLogItems)){ //line 33
} 
```

但是当我运行它时，我得到了错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /Users/iddogino/Sites/serverFilesPayaway/user/logForUser.php on line 33 
```

现在我知道数据库连接有效，因为我过去成功使用过它......

问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:13:36.853

您没有选择任何列

```
SELECT FROM transactions
      ^----------------------missing here 
```

你可能想要

```
SELECT * FROM transactions 
```

选择所有列。或者您可以像这样命名要选择的列

```
SELECT column_name1, column_name2, column_name3 FROM transactions 
```

# asp.net - 在哪个文件编译asp.net web forms控件

> ID：13776490
> 
> 赞同：0
> 
> 时间：2012-12-08T10:10:16.587
> 
> 标签：asp.net, webforms

我对 Web 应用程序中的一个控制文件进行了一些更改。所以我不想发布所有应用程序，只发布几个文件。我需要在我的服务器版本中替换哪个文件？controls\control.ascx 不包含必要的信息（只有几行）。那么在 asp.net web 表单中构建控件的位置是什么？

# django - 按子级排序 django 模型并在模板中访问不同的子级

> ID：13776492
> 
> 赞同：0
> 
> 时间：2012-12-08T10:10:46.820
> 
> 标签：django, django-templates, django-queryset

假设我有两个课程：

```
class Event:
      name = models.CharField(max_length=60)

class Date:
      start = models.DateField()
      end = models.DateField()
      event = models.ForeignKey("event") 
```

那是具有多个日期的事件日历。现在我想显示按开始日期排序的所有事件：

```
Event.objects.all().order_by('date__start') 
```

这很好用，如果我执行 sql，我会得到我需要的结果。但是，如果我想在我的模板中显示它，我会遇到问题。让我给你举个例子：

日期 a 开始于 24.12 和 31.12 日期 b 开始于 26.12

通过执行上面的查询，我按 a、b、a 的顺序获得了三个 Event 对象。那太棒了。我的问题是两个 a-Events 都包括 Date-children。当然，我只想显示第一个 a 对象的第一个日期和第二个 a 对象的第二个日期。

# jquery - scrollLeft 有效，但 scrollTop 无效

> ID：13776494
> 
> 赞同：1
> 
> 时间：2012-12-08T10:11:02.077
> 
> 标签：jquery, scroll

我有以下带有 CSS`.container { overflow: scroll; }`等的 HTML。

```
<body>
<div class="container">
  <div id="markers"></div>
  <img id="map" src="/img/map.jpg"/>
</div>
</body> 
```

`map.jpg`非常大，我想滚动到这样的固定位置：

```
$(function(){
  console.log($('.container').scrollTop());
  $('.container').scrollTop(1000);
  console.log($('.container').scrollTop());
  console.log($('.container').scrollLeft());
  $('.container').scrollLeft(1750);
  console.log($('.container').scrollLeft());
}); 
```

`scrollLeft`工作正常，但`scrollTop`没有。下面是控制台输出。

```
0
0
0
1750 
```

找了半个小时还是不知道怎么解决

* * *

**更新：**`.container` `#markers`关于和的CSS`#map`

```
.container { overflow: scroll; width: 100%; max-width: 100%; height: 100%; max-height: 100%; margin: 0; padding: 0; }
#map { width: 5000px; max-width: 5000px; height: 2907px; max-height: 2907px; cursor: crosshair; }
#markers { position: relative; top: 0; left: 0; width: 0; height: 0; margin: 0; padding: 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:02:45.973

经过几次试验，我设法通过`position: absolute;`添加`.container`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:44:37.740

检查此代码，您也可以在此处查看实时示例[http://jsfiddle.net/sarfarazdesigner/2uvRe/](http://jsfiddle.net/sarfarazdesigner/2uvRe/)

这是html代码

```
<div class="demo">
    <h1>lalala</h1>
    <p>Hello</p>
</div>​ 
```

这是CSS代码

```
div.demo {
background:#CCCCCC none repeat scroll 0 0;
border:3px solid #666666;
margin:5px;
padding:5px;
position:relative;
width:200px;
height:100px;
overflow:auto;
}
p { margin:10px;padding:5px;border:2px solid #666;width:1000px;height:1000px; }​ 
```

这是javascript代码

```
$("div.demo").scrollTop(300);
    $("div.demo").scrollLeft(300);​ 
```

# ios - 通过应用程序创建新相册

> ID：13776501
> 
> 赞同：2
> 
> 时间：2012-12-08T10:12:15.267
> 
> 标签：ios, facebook, ios6, social-framework

我需要专家在 Facebook 集成方面的帮助。我正在使用 Social.framework 在 Facebook 上发布一个 iOS 6 应用程序。

```
-(IBAction)postToFacebook:(id)sender {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        facebookController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        [facebookController addImage:self.selectedImageView.image];
        [self presentViewController:facebookController animated:YES completion:Nil];
} 
```

}

问题是当我上传照片时，它会进入一个名为 iOS 照片的相册。当我上传照片时，是否可以使用我的应用程序名称自动创建一个新相册，并且所有照片都在那里？

# jsf - 在外部 h:commandButton (JSF2) 中设置 f:param

> ID：13776502
> 
> 赞同：2
> 
> 时间：2012-12-08T10:12:24.810
> 
> 标签：jsf, jsf-2, richfaces, facelets

我真的很喜欢 actionListener 以及将整个对象作为参数传递的可能性，而不是需要将值作为字符串传递或创建（隐藏）表单字段。我正在使用 JSF 2.1 (Mojarra) 和 RichFaces (用于 popupPanel)。

目前我遇到了以下问题：

我创建了一个带有打开弹出窗口的按钮的表格。在该弹出窗口中，用户可以编辑表中当前用户/对象的数据。

**当我单击弹出窗口中的按钮以保存编辑时，如何从弹出窗口提交值并告诉 bean 操作我正在编辑哪个 userObject？**

目前，我的解决方法是在弹出窗口中使用隐藏的 inputText 字段，但我不喜欢这种方式。有替代方案吗？

这是我试图实现的（最小化）：

```
<h:datatable value="#{bean.users}" var="user">
  <h:column>
    Username #{user.name}
  </h:column>
  <h:column>
    <input onclick="showPopup()"/>
  </h:column>
</h:datatable>

<rich:popupPanel>
  <h:inputText value="#{bean.text}" />
  <h:commandButton value="Action" actionListener="#{bean.doSomething}">
    <f:attribute name="selected" value="#{userObjectFromDatatable}" />  <-- HOW? -->
  </h:commandButton>
</rich:popupPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:07:06.020

看起来很简单，您可以将选定的 保存`userObject`在类似对话的范围内，如`@ViewScoped`. 有关. [_](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html?m=1) _ `@ViewScope`例如，将所需类型的变量声明为支持 bean 中的实例变量

```
 UserObject userObject;
  //getters and setters 
```

在您的表中，您现在将有类似以下内容的内容来在您的支持 bean 中设置选定的对象

```
 <h:commandButton value="Action" actionListener="#{bean.doSomething}">
    <f:setPropertyActionListener value="#{user}" target="#{bean.userObject}"/> 
   </h:commandButton> 
```

通过在表中设置支持 bean 中的变量，viewscope 将确保您对该对象执行的任何其他操作都将使用相同的实例，前提是您保持在同一个 JSF 视图上并且**不**离开它。

# python - 参数如何通过 __getattr__ 传递给函数

> ID：13776504
> 
> 赞同：15
> 
> 时间：2012-12-08T10:12:53.627
> 
> 标签：python, function, inheritance, arguments, getattr

考虑以下代码示例（python 2.7）：

```
class Parent:
    def __init__(self, child):
        self.child = child

    def __getattr__(self, attr):
        print("Calling __getattr__: "+attr)
        if hasattr(self.child, attr):
            return getattr(self.child, attr)
        else:
            raise AttributeError(attr)

class Child:
    def make_statement(self, age=10):
        print("I am an instance of Child with age "+str(age))

kid = Child()
person = Parent(kid)

kid.make_statement(5)
person.make_statement(20) 
```

可以看出，函数调用通过's函数`person.make_statement(20)`调用函数。在调用子实例中的相应函数之前，我可以在函数中打印出属性。到目前为止很清楚。`Child.make_statement``Parent``__getattr__``__getattr__`

但是调用的参数是如何`person.make_statement(20)`通过的`__getattr__`呢？如何在我的`__getattr__`函数中打印出数字“20”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-08T10:15:55.487

您没有`20`在您的`__getattr__`功能中打印。该函数在 Child 实例上找到`make_statement` *属性*并将其返回。碰巧的是，该属性是一种方法，因此它是可调用的。因此 Python 调用返回的方法，然后*该*方法打印`20`.

如果您要删除`()`呼叫，它仍然可以工作；我们可以存储该方法并单独调用它以进行`20`打印：

```
>>> person.make_statement
Calling __getattr__: make_statement
<bound method Child.make_statement of <__main__.Child instance at 0x10db5ed88>>
>>> ms = person.make_statement
Calling __getattr__: make_statement
>>> ms()
I am an instance of Child with age 10 
```

如果您*必须*查看参数，则必须返回一个包装函数：

```
def __getattr__(self, attr):
    print("Calling __getattr__: "+attr)
    if hasattr(self.child, attr):
        def wrapper(*args, **kw):
            print('called with %r and %r' % (args, kw))
            return getattr(self.child, attr)(*args, **kw)
        return wrapper
    raise AttributeError(attr) 
```

这现在导致：

```
>>> person.make_statement(20)
Calling __getattr__: make_statement
called with (20,) and {}
I am an instance of Child with age 20 
```

# c++ - 我可以在 C++ 中执行以下操作吗

> ID：13776516
> 
> 赞同：0
> 
> 时间：2012-12-08T10:14:29.870
> 
> 标签：c++

我有两个班级，即 X 和 Y ；

```
 X                                  Y 

    foo ( )                           bar ( ) 
```

Y 只在 X 类中使用 foo 函数。我可以在 c++ 中执行以下操作吗？

```
friend bool Y :: bar ( X & (X :: foo) ) 
```

那就是`Y`只允许**对象**`foo`的功能？`X`

 **编辑：`X & (X :: foo)`使用正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:34:47.393

如果我正确理解你的问题，你想要这样的东西：

```
class X;

class Y {
public:
    void bar(X& x);
    void baz(X& x);
};

class X {
    void foo() { }
    friend void Y::bar(X& x);
};

void Y::bar(X& x)
{
    x.foo();
}

void Y::baz(X&)
{
    // the following would be an error
    // baz wasn't befriended with X
    // x.foo();
}

int main()
{
    X x;
    Y y;
    y.bar(x);
} 
```

`X`注意声明和定义的顺序，你需要这样，这样你就可以用inside做一些有用的东西`Y::bar()`。

但是，如果没有想到这样做是个好主意的情况。如果你跌倒了，你只需要和你的班级的“部分”交朋友，那么你的班级可能有太多的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:44:53.433

我可能会使用 ADL 概念探索中间代理的路线。这当然是展示该概念的部分实现。

```
namespace XNProxy {
    class XNP;
}

namespace XN
{
    using XNProxy::XNP;

    class X {
        friend void f(X *);
    private:
        void foo() { };
    };

    void f(X* p) {
        X x;
        x.foo();
    }
}

namespace XNProxy 
{
    class XNP { };
    using XN::X;
    void f(XNP *) {
        f((XN::X *)nullptr);
    }
};

namespace YN
{
    class Y {
    public:
        void bar() { 
            XNProxy::XNP x;
            f((XNProxy::XNP*)nullptr);
        }
    };
}

int main() {
    YN::Y y;
    y.bar();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:34:46.380

你不能。但您可以执行以下操作：

```
class X_foo_friend;

class X
{
    void foo();
    friend class X_foo_friend;
};

class Y
{
    X x;
public:
    void bar();
};

class X_foo_friend
{
    static void foo(X& x);
    friend void Y::bar();
};

void X::foo() {};
void X_foo_friend::foo(X & x) { x.foo(); }

void Y::bar()
{
    X_foo_friend::foo(x);
} 
```

IMO，这很愚蠢。我的意思是，你是设计 X 和 Y 的人，所以你可以简单地限制你在 X 的 Y 函数中的使用。**

# powershell - 密码所需的转义字符

> ID：13776519
> 
> 赞同：0
> 
> 时间：2012-12-08T10:14:48.950
> 
> 标签：powershell, escaping

该脚本非常适合接受一些读取主机提示并创建一个与应用程序池相关联的网站。密码提示有效，但我们最常用的密码是 !$Pass!123!! 它不允许我接收它作为输入。您如何允许使用这些字符？

```
Import-Module WebAdministration 
```

```
# 获取网站变量
$WebSite = Read-Host - 提示“网站的 DNS 名称”
$AppPoolName = Read-Host -Prompt "应用程序池名称"
[string]$AppPoolUser = Read-Host -Prompt "应用程序池用户名域不需要，例如 PXML.Proxy$"
$Password = Read-Host -Prompt "Application Pool Account Password, try ` before $ in password"
$HostHeader = Read-Host -Prompt "Host Header Name"
# cmd /c C:\scripts\BaseIIS.cmd $WebServer $AppPool $AppPoolUser $Password $HostName
New-Item -path d:\Websites -itemtype 目录
New-Item -path d:\Logs -itemtype 目录
New-Item -path d:\Logs\$WebSite -itemtype 目录
New-Item -path d:\websites\$WebSite -itemtype 目录

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:25:27.150

输入中的问题不是，`dollar sign($)`而是开始`exclamation mark(!)` 你需要用另一个来逃避它。

您的密码需要输入为：!!$Pass!123!!

[阅读此处了解更多信息](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=195045&SiteID=99)

为什么不使用`get-credential`cmdlet：

```
$cred = Get-Credential -Message "Insert Username and Passsword"    
$cred.GetNetworkCredential().UserName
Jacob    
$cred.GetNetworkCredential().Password
!$Pass!123!! 
```

或者您可以使用：

```
$Password = Read-Host -Prompt "Application Pool Account Password" -assecurestring
[String]$Password = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($Password)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:00:18.160

这似乎不是 V3 的问题：

```
PS>$t=Read-Host
!$Pass!123!!
PS>$t
!$Pass!123!! 
```

# javascript - 如何根据用户屏幕输出不同的图像？

> ID：13776520
> 
> 赞同：2
> 
> 时间：2012-12-08T10:14:59.543
> 
> 标签：javascript, html, css

例如，如果我的网站有两组图像，一组是低分辨率的，另一组是高分辨率的，我将低分辨率显示给 1280 宽度用户的屏幕尺寸，而其他是高分辨率图像，如何我这样做？使用 javascript？或任何其他方法？可以在css或html中定义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:16:43.847

您可以为此使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。更多关于媒体查询[的信息在这里](http://css-tricks.com/css-media-queries/)。

例子：

```
/* This block applies to all "screen" devices
*/
@media screen {
    .some-content {
        background-image: url(largeimage.jpg);
    }
}

/* This media query applies only to "screen" devices with
   a maximum width of 1279px (e.g., < 1280)
*/
@media screen and (max-width: 1279px) {
    /* Use `mediumimage.jpg` on these devices instead of the above */
    .some-content {
        background-image: url(mediumimage.jpg);
    }
}

/* This media query applies only to "screen" devices with
   a maximum width of 639px (e.g., < 640)
*/
@media screen and (max-width: 639px) {
    /* Use `smallimage.jpg` on these devices instead of the above */
    .some-content {
        background-image: url(smallimage.jpg);
    }
} 
```

请注意上面的降序：首先我们指定最大的设备，然后是较小的设备，然后是较小的设备，以便后面的查询覆盖前面的查询（因为屏幕为 1024 像素的设备将匹配第一个两条规则）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:21:03.930

你可以用 body {width: 100%; 高度：100%；位置：相对；}

您将面临浏览器兼容性问题。

在你的 css 中定义它，你可以拥有任何你想要的类。我已经为我的网站完成了它，您可以使用相同的图像为您工作。

# jquery - 更新html时jQuery更改事件丢失

> ID：13776524
> 
> 赞同：1
> 
> 时间：2012-12-08T10:15:11.960
> 
> 标签：jquery, ruby-on-rails-3.2, jquery-events

我有一个 Rails 应用程序，它有一个显示的组织领导表，每个表都有一对单选按钮，以指示他们是“活跃”还是“退休”。当按下按钮时，Ajax 用于将状态保存到数据库中，并显示成功消息（或失败消息），然后按程序消失。但是，虽然任何领导者上的第一个按钮更改似乎都有效，但未检测到每个领导者上的后续更改事件。我发现了几个与此类似的问题的帖子，但这些解决方案似乎都没有可靠的工作。我肯定错过了什么。

顶级视图包含下面的行，该行标识`id`特定领导者的表格单元格并从部分呈现单元格。

```
<td id="status_<%= leader.id %>_cell"><%= render(:partial =>
  "connections/edit/leader_status", :locals => {
  :leader => leader, :display_response => "" } ) %>
</td> 
```

以上作为要更新到jQuery的元素`id`传递。`data-update`部分`_leader_status.html.erb`包含：

```
<%= display_response.html_safe -%>

<%= radio_button_tag("status_#{leader.id}", 'Active', (leader.role == 'ActiveLeader'),
  :class => "leader_status", data: { url: url_for(action: :toggle_leader_status,
  id: leader.supporter.id ), update: "status_#{leader.id}_cell"}
) %> Active
<%= radio_button_tag("status_#{leader.id}", 'Retired', (leader.role == 'RetiredLeader'),
  :class => "leader_status", data: { url: url_for(action: :toggle_leader_status,
  id: leader.supporter.id ), update: "status_#{leader.id}_cell"}
) %> Retired 
```

`toggle_leader_status`响应重新渲染状态单元格的控制器代码是：

```
render(:partial => "connections/edit/leader_status", :locals => {
  :leader => @entity.leader,
  :display_response => 
    "<div id='#{id}' class='#{klass}'>#{message}</div>" + 
    "<script type='text/javascript'>$('##{id}').fadeOut(#{duration})</script>"
}) 
```

jQuery代码是：

```
<%# parameterized so only one copy is needed for all radio buttons %>
<script>
  $(function($) {
    $(".leader_status").change(function(){ 
      // get id of element to stuff response into
      var update_id = "#" + this.getAttribute('data-update'); 
      $.ajax(this.getAttribute('data-url'), {dataType: 'text'}).done(
        function(data) { $(update_id).html(data); } // problem part
      );
    })
  });
</script> 
```

我第一次单击更改其状态的单选按钮时，页面的 HTML 会正确更新（通过 FireBug 验证）——通常——并且 display_response 消息会按预期显示并消失。如果我然后单击备用单选按钮，则不会发生任何事情。但是，在某些情况下，当我单击按钮时，一切似乎都发生了，但按钮的显示又变回了之前的状态。如果我更换问题部分：

```
$(update_id).html(data); 
```

和

```
alert("An Event! " + data); 
```

警报每次都会发生。使用问题代码，更新表格单元格会阻止后续更改事件的发生。如果我改变：

```
$(".leader_status").change(function(){ 
```

到

```
 $(".leader_status").live('change', function(){ 
```

这效果更好，但仍然只有 90% 的时间。如果我改用`.on`它，它可能有 10% 的时间起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T13:36:23.473

将事件绑定到元素的不改变的父元素之一。

像这样：

```
$('table').on('change', '.leader_status', function(){

}); 
```

# ios5 - UITabel 查看单元格按钮混淆了

> ID：13776528
> 
> 赞同：0
> 
> 时间：2012-12-08T10:15:41.023
> 
> 标签：ios5

在我的表格查看单元格中，每个单元格都有两个按钮，编辑和取消，同时单击编辑时，取消按钮应该更改。我的问题是当我尝试单击编辑按钮时另一个单元格取消按钮图像已更改，而不是在我单击的那个单元格上？

这是我的代码----

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
    static NSString *simpleTableIdentifier = @"MenuNameCell";
    MenuNameCell *cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        _checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
        [_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
        [_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
        [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];
        //_checkButton.tag = 0;
        [cell.contentView addSubview:_checkButton];

        // Creating Button For CANCEL Order
        _cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
        [_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
        [_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
        [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];
        // _cancelButton.tag = 1;

        _textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
        _textFieldQuantity.userInteractionEnabled = NO;
        [cell addSubview:_cancelButton];
        [cell addSubview:_textFieldQuantity];

    } else {
        cell._nameLabel = (UILabel *)[cell.contentView viewWithTag:0];
        cell._amountMenu = (UILabel *)[cell.contentView viewWithTag:1];
    }
    [_checkButton  setTag:indexPath.row];
    [_cancelButton  setTag:indexPath.row];
    cell._nameLabel.text = [_hotel._orderedMenus objectAtIndex:indexPath.row];
    cell._amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];
    _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];
    return cell;
 } 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:54:49.103

对于每个单元格按钮，给出当前 indexPath.row 的标签，例如：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
    static NSString *simpleTableIdentifier = @"MenuNameCell";
    MenuNameCell *cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        _checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
        [_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
        [_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
        [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];
        _checkButton.tag = [NSString stringWithFormat:@"5%d",indexPath.row];
        [cell.contentView addSubview:_checkButton];

        // Creating Button For CANCEL Order
        _cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
        [_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
        [_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
        [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];
        _cancelButton.tag = [NSString stringWithFormat:@"6%d",indexPath.row];

        _textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
        _textFieldQuantity.userInteractionEnabled = NO;
        [cell addSubview:_cancelButton];
        [cell addSubview:_textFieldQuantity];

    } else {
        cell._nameLabel = (UILabel *)[cell.contentView viewWithTag:[NSString stringWithFormat:@"5%d",indexPath.row]];
        cell._amountMenu = (UILabel *)[cell.contentView viewWithTag:[NSString stringWithFormat:@"6%d",indexPath.row]];
    }
    cell._nameLabel.text = [_hotel._orderedMenus objectAtIndex:indexPath.row];
    cell._amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];
    _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];
    return cell;
 } 
```

# java - 如何重新排序一个元素更新的已排序数组

> ID：13776531
> 
> 赞同：5
> 
> 时间：2012-12-08T10:15:54.987
> 
> 标签：java, algorithm, sorting

我有恒定大小的数组（现实生活中大小 = 20），允许重复例如：

```
1 2 2 3 3 4 5 6 7 8 9 
```

现在正好有一个元素更新：

```
1 5 2 3 3 4 5 6 7 8 9 
```

我需要使用这个数组。我应该只使用冒泡排序吗？

**更新**我不知道如何称呼我写的东西。但我想不可能更快地排序。欢迎评论！

```
 // array is already almost sorted and INCREASING, element at pos need to be inserted to the right place
    private void SortQuotes(List<Quote> quoteList, int pos)
    {
        var quoteToMove = quoteList[pos];
        if (pos == 0 || quoteList[pos - 1].Price < quoteToMove.Price)
        {
            MoveElementsDown(quoteList, pos);
        } else if (pos == quoteList.Count - 1 || quoteList[pos + 1].Price > quoteToMove.Price)
        {
            MoveElementsUp(quoteList, pos);
        }
    }

    private void MoveElementsDown(List<Quote> quoteList, int pos)
    {
        var quoteToInsert = quoteList[pos];
        var price = quoteToInsert.Price;
        for (int i = pos - 1; i >= 0; i--)
        {
            var nextQuote = quoteList[i];
            if (nextQuote.Price > price)
            {
                quoteList[i + 1] = quoteList[i];
                if (i == 0)   // last element
                {
                    quoteList[i] = quoteToInsert;
                }
            }
            else
            {
                quoteList[i + 1] = quoteToInsert;
                break;
            }
        }
    }

    private void MoveElementsUp(List<Quote> quoteList, int pos)
    {
        var quoteToInsert = quoteList[pos];
        var price = quoteToInsert.Price;
        for (int i = pos + 1; i < quoteList.Count; i++)
        {
            var nextQuote = quoteList[i];
            if (nextQuote.Price < price)
            {
                quoteList[i - 1] = quoteList[i];
                if (i == quoteList.Count - 1)   // last element
                {
                    quoteList[i] = quoteToInsert;
                }
            }
            else
            {
                quoteList[i - 1] = quoteToInsert;
                break;
            }
        }
    } 
```

**更新**我确实知道哪个元素是奇怪的，即它的位置是已知的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:49:37.380

此解决方案将每个元素移动一个，直到找到奇数元素的正确位置。由于它已在第一步中被覆盖，因此将其保存在临时变量“h”中，然后写入最终位置。它需要最少的比较和移位操作：

```
 static void MoveOddElementToRightPosition(int[] a, int oddPosition)
 {
   int h = a[oddPosition];
   int i;
   if (h > a[oddPosition + 1])
     for (i = oddPosition; i < a.Count()-1 && a[i+1] <= h; i++)
        a[i] = a[i+1];
   else
     for (i = oddPosition; i > 0 && a[i-1] >= h; i--)
        a[i] = a[i - 1];
   a[i] = h;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:22:12.200

如果最后一个元素需要到达前面，冒泡排序将使用 n^2 次。使用插入排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:49:30.287

由于数组很小，对于小型数组，插入排序大约需要 ~O(n) 时间，如果您只是更新 1 个值，则插入排序应该以最好的方式实现您的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:02:11.953

`It can be done in O(n)`. 如果您不知道该元素，则在 O(n) 中搜索该元素，然后您只需要比较和交换每个元素，这将花费 O(n)。所以总共 2n 这意味着 O(n)。如果您知道已修改的元素，然后比较并交换每个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T12:42:20.957

您无需再次对其进行排序。

只有一个元素发生了变化。因此，您只需要浏览列表并将更改的号码放在适当的位置即可。**这将是 O(n) 复杂度**。

```
int a[] = {1, 5, 2, 3, 3, 4, 5, 6, 7, 8, 9};
int count = 0;

//find the odd element
for(int jj=1; jj< a.length; jj++){
    if(a[jj] < a[count])
        break;
    else count++;
}
System.out.println(" Odd position "  + count);

//put odd element to proper position
for(int k= count+1; k<a.length; k++){
    if(a[count] > a[k]){
        int t = a[count];
        a[count] = a[k];
        a[k] = t;
        count++;
    }
} 
```

以上是针对给定输入测试的工作代码。享受。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T13:30:53.993

*   如果您对快速替换元素感兴趣，那么您还可以使用删除和插入快速的结构，例如 Java 中的[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)。这在理论上意味着 O(log(n))，但如果你只是操作 20 个元素的数组，它可能不值得
*   如果所有不同元素的集合是有限的，例如在您的示例中您只使用 1 到 9 的数字，那么在 O(1) 中就有一个解决方案。您只需保留一个包含元素出现次数的数组，而不是排序列表。
*   如果您仍想将所有内容保存在数组中，那么最快的方法是
    1.  通过 O(log(n)) 中的二等分找到要删除的元素的位置 A。
    2.  找到新元素将以相同方式结束的位置 B。更准确地说，B 是每个 k > B 的 new_element < a[k] 的最小索引
    3.  如果 A < B，将 A + 1 和 B 之间的所有元素向左移动，然后将新元素设置到位置 B。如果 B > A，你做同样的事情，但向右。现在这一步在 O(n) 中，但没有逻辑，它只是移动内存。在 C 语言中，您可以使用 memmove 并对其进行了高度优化，但我不知道任何 Java 等价物。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-08T16:26:42.550

在这种情况下，冒泡排序非常好，最多比较 20 次。

但是通过二分查找找到新位置是 O(log(n))，在这种情况下是 5 次比较。
稍微快一些，如果您需要最后一点奇数的速度，请使用二进制搜索，否则您可以坚持使用冒泡排序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-08T19:08:29.063

这是纯 C 中的一个幼稚实现。删除`fprintf(stderr, ...`后测试。只要有比较功能，ITEM 可以是任何东西。否则：使用指向 ITEM 的指针，（并且可能添加一个额外的 sizeofelem 参数，ala qsort）

```
#include <stdio.h>
#include <string.h>

typedef int ITEM;

int item_cmp(ITEM one, ITEM two);
unsigned one_bubble( ITEM *arr, unsigned cnt, unsigned hot , int (*cmp)(ITEM,ITEM) );

int item_cmp(ITEM one, ITEM two)
{
fprintf(stderr,"Cmp= %u to %u: %d\n", one, two, one-two);
if (one > two) return 1;
else if (one < two) return -1;
else return 0;
}

unsigned one_bubble( ITEM *arr, unsigned cnt, unsigned hot , int (*cmp)(ITEM,ITEM) )
{
unsigned goal = cnt;
int diff;
ITEM temp;

        /* hot element should move to the left */
if (hot > 0 && (diff=cmp( arr[hot-1], arr[hot])) > 0) {
        /* Find place to insert (this could be a binary search) */
        for (goal= hot; goal-- > 0; ) {
                diff=cmp( arr[goal], arr[hot]);
                if (diff <= 0) break;
                }
        goal++;
        fprintf(stderr,"Move %u LEFT to %u\n", hot, goal);
        if (goal==hot) return hot;
        temp = arr[hot];
                /* shift right */
        fprintf(stderr,"memmove(%u,%u,%u)\n", goal+1, goal, (hot-goal) );
        memmove(arr+goal+1, arr+goal, (hot-goal) *sizeof temp);
        arr[goal] = temp;
        return goal; /* new position */
        }
        /* hot element should move to the right */
else if (hot < cnt-1 && (diff=cmp( arr[hot], arr[hot+1])) > 0) {
        /* Find place to insert (this could be a binary search) */
        for (goal= hot+1; goal < cnt; goal++ ) {
                diff=cmp( arr[hot], arr[goal]);
                if (diff <= 0) break;
                }
        goal--;
        fprintf(stderr,"Move %u RIGHT to %u\n", hot, goal);
        if (goal==hot) return hot;
        temp = arr[hot];
                /* shift left */
        fprintf(stderr,"memmove(%u,%u,%u)\n", hot, hot+1, (goal-hot) );
        memmove(arr+hot, arr+hot+1, (goal-hot) *sizeof temp);
        arr[goal] = temp;
        return goal; /* new position */
        }
fprintf(stderr,"Diff=%d Move %u Not to %u\n", diff, hot, goal);
return hot;
}

ITEM array[10] = { 1,10,2,3,4,5,6,7,8,9,};
#define HOT_POS 1
int main(void)
{
unsigned idx;

idx = one_bubble(array, 10, HOT_POS, item_cmp);

printf("%u-> %u\n", HOT_POS, idx );

for (idx = 0; idx < 10; idx++) {
        printf("%u: %u\n", idx, array[idx] );
        }

return 0;
} 
```

# c - GluProject没有在C中显示准确的坐标

> ID：13776537
> 
> 赞同：0
> 
> 时间：2012-12-08T10:17:21.007
> 
> 标签：c, opengl, graphics, glut

我正在尝试从 opengl 坐标中找到屏幕坐标（投影在 3D 空间中）我为此目的使用了 glproject 调用，我在我的代码中使用了旋转和平移

在执行一些转换后的某个时刻，我调用 glproject api 来获取特定投影点 P(x,y,z) 的屏幕坐标

glproject(x,y,z,modelMatrix,projectionmatrix,viewport,*x_s,*y_s,*z_s);

我能够在 x_s 中正确获取 x 屏幕坐标，但 y 坐标不同

y 中唯一不在 x 中的变化是最初我调用 glperspective 来设置 fovy（y 方向上的视场角，以度为单位）。gluPerspective(60.0f, 宽度/高度,0.0001f,1000.0f);

让我重新表述一下我在屏幕上创建了一个 3D 点的问题，现在我通过 GLproject 获得了该点的 2d(x,y) 坐标，它们与鼠标坐标不同 获得正确坐标的可能解决方案是什么。

这是代码片段

```
#include<GL/glut.h>     /* Header File For The GLUT Library */
GLint Window;              /* The number of our GLUT window */
float tmp_x,tmp_y,tmp_z;
GLfloat w = 1200;         /* Window size. Global for use in rotation routine */
GLfloat h = 1200;
GLint prevx, prevy;        /* Remember previous x and y positions */
GLfloat xt=1.0,yt=1.0,zt=1.0;   /* translate */
int width = 1600;
int height = 1200;

//This function will set windowing transformation
void transform(GLfloat Width , GLfloat Height )
{
    glViewport(0,0,  (GLfloat)Width,  (GLfloat)Height);
    glPushMatrix();
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60.0f, Width/Height,0.0001f,1000.0f); 
    glTranslatef(0.0, 0.0, -15.0f);     /* Centre and away the viewer */
    glMatrixMode(GL_MODELVIEW);
    glPopMatrix();
}

GLvoid draw_room() 
{   
int i;
glPushMatrix();
glShadeModel(GL_SMOOTH); 
glLineWidth(1.0);                             
glPointSize(4.0);                             /* Add point size, to make it clear */
glBegin(GL_POINTS);                /* start drawing the cube.*/
glColor3f(0.0f,0.0f,1.0f);            /* Set The Color To Orange*/
glColor3f(1.0f,0.0f,0.0f);            /* Set The Color To Orange*/
glVertex3f(3.1f,2.1f,2.1f); 
glEnd();                              /* Done Drawing The Cube*/
glEnable(GL_DEPTH_TEST); 
}
//OpenGl Display  callback Function It call init room
void DrawGLScene()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
    printf("%f %f %f\n",xt,yt,zt);
    glPushMatrix();
    glMatrixMode(GL_PROJECTION);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(xt,yt, zt);
    draw_room();
    glPopMatrix();
    glutSwapBuffers();               /* Swap buffers */
    glFlush();
}

GLvoid Mouse( int b , int s, int xx, int yy)
{

    double a1,a2,a3;    
    GLint viewport[4];
    GLdouble modelview[16];
    GLdouble projection[16]; 
    glGetIntegerv(GL_VIEWPORT, viewport);  
    glGetDoublev(GL_MODELVIEW_MATRIX, modelview);   
    glGetDoublev(GL_PROJECTION_MATRIX, projection);  
    //gluProject(xt+3.1f,yt+2.1f,zt+2.1f, modelview, projection, viewport, &a1, &a2, &a3);
    gluProject(3.1f,2.1f,2.1f, modelview, projection, viewport, &a1, &a2, &a3);

    printf("Mouse: %d %d\n",xx,yy);                // Both Print are giving different coordinaes.
    printf("Unproject %f %f %f\n",a1,a2,a3);    
    switch (b) {
    case GLUT_LEFT_BUTTON:  /* only stash away for left mouse */
        prevx = xx - w/2;
        prevy = h/2 - yy;
        break;
    case GLUT_MIDDLE_BUTTON:
        break;
    case GLUT_RIGHT_BUTTON:
        break;
    }
} 
```

可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:57:10.400

OpenGL 使用屏幕左下角作为坐标系原点。窗口系统通常使用左上角作为坐标系原点。您需要处理这种差异。例子：

```
printf("Mouse: %d %d\n",xx,yy);                
printf("Unproject %f %f %f\n",a1,viewport[1]-a2,a3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:48:39.413

一个侧面问题：

> gluPerspective(60.0f, 宽度/高度,0.0001f,1000.0f);

您的近平面距离和远平面距离之间的比率非常大。这对深度分辨率非常不利。作为一般规则，您应该在场景允许的情况下尽可能地设置近剪裁平面距离。由 gluPerspective 创建的投影的远裁剪平面应设置为尽可能近（如果投影矩阵的构建略有不同，也可以将远裁剪平面设置为无穷大）。

无论如何，您的低深度分辨率会对您的鼠标指针屏幕位置反向投影产生负面影响。

> 让我重新表述一下我在屏幕上创建了一个 3D 点的问题，现在我通过 GLproject 获得了该点的 2d(x,y) 坐标，它们与鼠标坐标不同 获得正确坐标的可能解决方案是什么。

大多数窗口系统将指针坐标系原点放在左上角。OpenGL 将视口坐标系原点设置在左下方。因此，您必须沿 Y=Up 轴反转窗口中的鼠标位置。

# c# - Jquery、Ajax、C#：将数组数据传递到服务器端

> ID：13776540
> 
> 赞同：1
> 
> 时间：2012-12-08T10:17:37.270
> 
> 标签：c#, jquery, ajax

我正在尝试做某事，但没有成功。1\. 我想通过 jquery 进行 ajax 调用并传递一个数组（我假设它应该在 data 属性上）。2\. 然后，我想在服务器端检索这个数组，但我很迷茫。

谁能解释一下如何轻松做到这一点？我考虑过使用 context.Request.Params 但我猜这不是正确的方法..

```
var array = [];
...

 $.ajax({
      cache: false,
      method: 'json',
      url: 'handler/myhandler.ashx',
      data: array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:24:37.897

编辑：我刚刚意识到您需要“发布”您的数据。你应该在你的ajax调用中添加“type:'POST'”:)

```
 $.ajax({
      type: 'POST',
      cache: false,
      method: 'json',
      url: 'handler/myhandler.ashx',
      data: array 
```

你是对的，你的数组应该被插入到 ajax 调用的“数据”属性中。

您可以通过处理程序中的 HttpContext 访问服务器端的数据。有一个属性叫request。

为了将对象转换为对象，这里有一个反序列化示例。它被反序列化成字典的地方。

```
public void ProcessRequest(HttpContext context)
{
    var data = context.Request;
    var sr = new StreamReader(data.InputStream);
    var stream = sr.ReadToEnd();

    var javaScriptSerializer = new JavaScriptSerializer();

    var arrayOfStrings = javaScriptSerializer.Deserialize<string[]>(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:23:34.420

像这样使用 JSON.stringify() ：

```
 $.ajax({
      cache: false,
      method: 'json',
      url: 'handler/myhandler.ashx',
      data: JSON.stringify(array),
      type: "POST" 
```

数据发送到服务器端后，您现在需要做的就是反序列化对象，这就是您的做法

```
//might be something else other than Forms["json"], use debug mode to figure out the param
    string json = HttpContext.Current.Request.Forms["json"];
    JavaScriptSerializer  serializer= new JavaScriptSerializer();
    var urObj = serializer.Deserialize<Type>(json); 
```

# python - 如何结合两个正则表达式？

> ID：13776544
> 
> 赞同：2
> 
> 时间：2012-12-08T10:18:21.253
> 
> 标签：python, regex

假设我有这两个正则表达式：

1.  `id=123456`
2.  `discography=True`

在事先不知道输入中这些字符串的顺序的情况下，如何检查它们是否都匹配正则表达式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T10:30:46.980

您可以使用两个[前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^(?=.*id=123456)(?=.*discography=True) 
```

从字符串 ( `^`) 的开头，我们首先寻找`id=123456`任何地方（由于`.*`）。但是前瞻实际上并没有消耗任何东西，所以一旦找到模式，引擎就会跳回到它开始的地方（字符串的开头）并从第二个模式开始。

正如 eyquem 所指出的，如果您的字符串中有换行符，`.*`则不能越过它们，除非您使用该选项`re.S`（或者`re.DOTALL`- 这只是一个别名）。

但是，这看起来像您正在尝试解析 URL 的查询字符串。也许你应该看看[`urlparse`](http://docs.python.org/library/urlparse.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:30:01.517

假设 r1 和 r2 是格式良好的正则表达式，您可以这样做：

```
re.compile("(?=%s)%s" % (r1, r2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T10:33:31.857

如果您正在为您的第一个和第二个正则表达式寻找独立检查，它应该通过检查您的正则表达式是否有结果来工作。

```
import re
results1 = re.search("id=([0-9]+)", "id=123456")
results2 = re.search("discography=(True|False)", "discography=True")
if results1 != None and results2 != None:
    print "Both matched" 
```

# android - 带边框的网格布局

> ID：13776547
> 
> 赞同：6
> 
> 时间：2012-12-08T10:18:38.603
> 
> 标签：android, eclipse, user-interface, tablelayout, grid-layout

我是一名新的 Android 开发人员，我只是想通过阅读一些示例来提高我的技能，我想使用 GridLayout 设计一个新界面，我检查了很多示例，但我似乎无法绘制边框GridLayout 单元格之间。我会错过什么？

这是我浏览过的链接，但没有显示边框！

[http://developer.samsung.com/android/technical-docs/GridLayout-in-Android#](http://developer.samsung.com/android/technical-docs/GridLayout-in-Android#)

我提前感谢您的照顾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:33:16.597

Android 布局容器不绘制边框。仍然：

1.  您可以将每个单元格的 View 的背景设置为 xml Drawable 资源，该资源描述了一个带边框的透明矩形。

2.  为 GridView 的父 View 赋予背景颜色，并将每个 GridView 单元格 View 的背景设置为不同的颜色。

这两者也可以作为样式应用。

# matlab - 更改 cellstr 中的类名

> ID：13776550
> 
> 赞同：1
> 
> 时间：2012-12-08T10:19:10.367
> 
> 标签：matlab

例如，类的类型是苹果、橙子和葡萄。现在我在我的matlab代码中使用苹果作为类，如何在cellstr中将类从苹果更改为橙色而不将“苹果”一词一一更改为“橙色”？

```
class=[cellstr('apple');cellstr('apple');cellstr('apple');cellstr('apple')]; 
```

这意味着我只需键入其中一个类，如橙色，它将创建一个新类，如下所示。

```
 class=[cellstr('orange');cellstr('orange');cellstr('orange');cellstr('orange')]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:19:51.977

`class`是函数的名称，请勿将其用作变量的名称。

```
>> c = repmat({'apple'}, 4, 1)

c = 

    'apple'
    'apple'
    'apple'
    'apple'

>> b = strrep(c, 'apple', 'orange')

b = 

    'orange'
    'orange'
    'orange'
    'orange' 
```

# php - 使用 PHP 对远程证书进行 Windows 商店 IAP 签名验证

> ID：13776551
> 
> 赞同：7
> 
> 时间：2012-12-08T10:19:13.897
> 
> 标签：php, windows, openssl

我正在尝试在 PHP 中验证 Windows Store 应用程序的 IAP 收据。基本上，尝试将此示例代码转换为 PHP [http://msdn.microsoft.com/en-us/library/windows/apps/jj649137.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj649137.aspx)。收据看起来像这样

```
<Receipt Version="1.0" ReceiptDate="2012-08-30T23:08:52Z" CertificateId="b809e47cd0110a4db043b3f73e83acd917fe1336" ReceiptDeviceId="4e362949-acc3-fe3a-e71b-89893eb4f528">
    <ProductReceipt Id="6bbf4366-6fb2-8be8-7947-92fd5f683530" ProductId="Product1" PurchaseDate="2012-08-30T23:08:52Z" ExpirationDate="2012-09-02T23:08:49Z" ProductType="Durable" AppId="55428GreenlakeApps.CurrentAppSimulatorEventTest_z7q3q7z11crfr" />
    <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
            <Reference URI="">
                <Transforms>
                    <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                </Transforms>
                <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                <DigestValue>Uvi8jkTYd3HtpMmAMpOm94fLeqmcQ2KCrV1XmSuY1xI=</DigestValue>
            </Reference>
        </SignedInfo>
        <SignatureValue>TT5fDET1X9nBk9/yKEJAjVASKjall3gw8u9N5Uizx4/Le9RtJtv+E9XSMjrOXK/TDicidIPLBjTbcZylYZdGPkMvAIc3/1mdLMZYJc+EXG9IsE9L74LmJ0OqGH5WjGK/UexAXxVBWDtBbDI2JLOaBevYsyy+4hLOcTXDSUA4tXwPa2Bi+BRoUTdYE2mFW7ytOJNEs3jTiHrCK6JRvTyU9lGkNDMNx9loIr+mRks+BSf70KxPtE9XCpCvXyWa/Q1JaIyZI7llCH45Dn4SKFn6L/JBw8G8xSTrZ3sBYBKOnUDbSCfc8ucQX97EyivSPURvTyImmjpsXDm2LBaEgAMADg==</SignatureValue>
    </Signature>
</Receipt> 
```

我已经像这样检索了服务器的证书

```
function getCertificate($certID)
{
    $url  = 'https://lic.apps.microsoft.com/licensing/certificateserver/?cid=' . $certID;
    $path = '/mypath/certs/' . $certID;

    if(!file_exists($path)) {
        $fp = fopen($path, 'w');

        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_FILE, $fp);

        $data = curl_exec($ch);

        curl_close($ch);
        fclose($fp);
    }
    $cert = file_get_contents($path);
    //var_dump(openssl_x509_parse($cert));

    return openssl_x509_read($cert);
} 
```

我假设 SignatureValue 是我的签名。据我所知，我需要的函数是 openssl_verify 但我不确定我应该使用哪些参数，因为验证总是失败。

```
$data     = $receiptXML->Signature->SignatureValue;
$pubkeyid = openssl_get_publickey($cert);
// state whether signature is okay or not
$ok       = openssl_verify($receipt, $data, $pubkeyid, OPENSSL_ALGO_SHA256);
if($ok == 1) {
    echo "good";
} elseif($ok == 0) {
    echo "bad";
} else {
    echo "ugly, error checking signature";
}
// free the key from memory
openssl_free_key($pubkeyid); 
```

有谁知道我在这里哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-02T00:24:04.213

我花了几天时间验证收据，最后让它工作......

```
<?php
/**
 * Date: 01.11.2013
 * Time: 23:09
 * @author: Philipp Serrer
 */

namespace Ephisa\Service\WindowsStore;

require_once subpath . 'vendor/xmlseclibs/xmlseclibs.php';

use Ephisa\Cache;

class Receipt {

    private $doc;
    private $objXMLSecDSig;
    private $objDSig;

    function __construct($xml, $isFile = false)
    {
        if ($isFile) {
            $xml = file_get_contents($xml);
        }

        // strip unwanted chars - IMPORTANT!!!
        $xml = str_replace(array("\n","\t", "\r"), "", $xml);
        //some (probably mostly WP8) receipts have unnecessary spaces instead of tabs
        $xml = preg_replace('/\s+/', " ", $xml);
        $xml = str_replace("> <", "><", $xml);

        $doc = new \DOMDocument();
        $doc->loadXML($xml);

        $objXMLSecDSig = new \XMLSecurityDSig();
        $objDSig = $objXMLSecDSig->locateSignature($doc);

        if (!$objDSig) {
            throw new InvalidSignatureException();
        }

        //canonicalize
        $objXMLSecDSig->canonicalizeSignedInfo();

        $this->objDSig = $objDSig;
        $this->objXMLSecDSig = $objXMLSecDSig;
        $this->doc = $doc;
    }

    /**
     * Returns the key for verification.
     *
     * @return null|\XMLSecurityKey
     */
    function getKey()
    {
        $objKey = $this->objXMLSecDSig->locateKey();
        $keyInfo = \XMLSecEnc::staticLocateKeyInfo($objKey, $this->objDSig);

        if (!$keyInfo->key) {
            $xpath = new \DOMXPath($this->doc);
            $query = 'string(/Receipt/@CertificateId)';
            $id = $xpath->evaluate($query);

            Cache::instance()->setLifetime(60*60*24*7, 'win-store-cert');
            $cert = Cache::instance()->get($id, 'win-store-cert', function() use ($id) {
                return file_get_contents('https://lic.apps.microsoft.com/licensing/certificateserver/?cid=' . $id);
            });

            $objKey->loadKey($cert, false);
        }

        return $objKey;
    }

    /**
     * Verifies the given receipt
     *
     * @return bool Returns TRUE on success
     */
    function verify()
    {
        try {
            if (!$this->objXMLSecDSig->validateReference()) {
                return false;
            }

            return (bool)$this->objXMLSecDSig->verify($this->getKey());
        }
        catch (\Exception $e)
        {
            // failure...
        }

        return false;
    }
} 
```

这段代码是我框架的一部分，因此包含一些框架依赖代码（缓存），但我认为，您了解主要思想及其工作原理。当然，您必须包含[https://github.com/robrichards/xmlseclibs上提供的 php xmlseclibs](https://github.com/robrichards/xmlseclibs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T10:58:16.253

首先，我建议以二进制模式编写证书。它使它更不容易出错。所以我推荐的是

```
if(!file_exists($path)) {
        $fp = fopen($path, 'wb'); 
```

我在这里假设 $CERTID 将具有来自 XML 收据的**CertificateId的值。**请根据您在代码中声明的内容重命名。

```
$cert = getCertificate($CERTID)
if($cert == 0) {
    echo "bad";
} else {
    $data = $receiptXML->Signature->SignatureValue;
    $pubkeyid = openssl_get_publickey($cert);
    // state whether signature is okay or not
    $ok = openssl_verify($receiptXML, $data, $pubkeyid, OPENSSL_ALGO_SHA256);
    if($ok == 1) {
        echo "good";
    } elseif($ok == 0) {
        echo "bad";
    } else {
        echo "ugly, error checking signature";
    }

} 
```

希望这可以帮助 ：）

# c# - 调用 Invoke 挂起程序

> ID：13776552
> 
> 赞同：2
> 
> 时间：2012-12-08T10:19:22.830
> 
> 标签：c#, multithreading, invoke, begininvoke

基本上，这就是发生的事情。我有一个线程（无限循环），在显示表单时作为后台进程运行。该线程检查是否需要添加新的 ToolStripMenuItem。

如果满足条件，我需要使用 Invoke 来创建 UI 对象，对吗？问题在于，当调用 this.Invoke 或 BeginInvoke 时，表单变得无响应，而执行检查的线程仍然运行良好。有任何想法吗？

这是我第一次尝试使用这个多线程的东西。我确定我错过了一些东西。

```
 public void ThreadSetCom()
    {
        while (true)
        {
            string[] tmpStrPort = System.IO.Ports.SerialPort.GetPortNames();
            IEnumerable<string> diff = tmpStrPort.Except(strPort);
            strPort = tmpStrPort;
            System.Console.WriteLine(System.IO.Ports.SerialPort.GetPortNames().Length);
            foreach (string p in diff)
            {
                var cpDropdown = (ToolStripMenuItem)msMenu.Items["connectToolStripMenuItem"];
                cpDropdown = (ToolStripMenuItem)cpDropdown.DropDownItems["connectReaderToolStripMenuItem"];

                ToolStripMenuItem tsmi = new ToolStripMenuItem();
                tsmi.Text = p;
                tsmi.Name = p;
                tsmi.Click += new EventHandler(itm_Click);

                if (this.msMenu.InvokeRequired)
                {
                    GUIUpdate d = new GUIUpdate(ThreadSetCom);
                    this.Invoke(d);
                }
                else
                {
                    cpDropdownList.DropDownItems.Add(tsmi);
                }                
            }                
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:51:55.043

您的`ThreadSetCom`方法永远不会退出：

```
while (true) 
```

...没有`return`或`break`声明。这将永远挂起 UI 线程。

目前尚不清楚您要实现什么，但您绝对不希望在 UI 线程中像这样循环。我认为你不想在任何线程中像这样*紧密地循环，请注意......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:04:24.633

我认为对您来说更好的方法可能是使用`BackgroundWorker`. 我这么说是因为您在 Windows 窗体应用程序中执行多线程时遇到的情况并不少见。此外，`BackgroundWorker`能够正确管理线程切换。让我给你一个带有`BackgroundWorker`.

## 构建私有类变量

```
private BackgroundWorker _worker; 
```

## 添加到 CTOR

```
public {ctor}()
{
    _worker = new BackgroundWorker();
    _worker.WorkerSupportsCancellation = true;
    _worker.WorkerReportsProgress = true;

    _worker.DoWork += new DoWorkEventHandler(BackgroundThreadWork);
    _worker.ProgressChanged += new ProgressChangedEventHandler(BackgroundThreadProgress);
} 
```

## DoWork 处理程序

```
private void BackgroundThreadWork(object sender, DoWorkEventArgs e)
{
    while (!_worker.CancellationPending)
    {
        string[] tmpStrPort = System.IO.Ports.SerialPort.GetPortNames();
        IEnumerable<string> diff = tmpStrPort.Except(strPort);
        strPort = tmpStrPort;
        System.Console.WriteLine(System.IO.Ports.SerialPort.GetPortNames().Length);
        foreach (string p in diff)
        {
            _worker.ReportProgress(1, p);
        }                
    }
} 
```

## 报告进度处理程序

```
private void BackgroundThreadProgress(object sender, ReportProgressEventArgs e)
{
    var cpDropdown = (ToolStripMenuItem)msMenu.Items["connectToolStripMenuItem"];
    cpDropdown = (ToolStripMenuItem)cpDropdown.DropDownItems["connectReaderToolStripMenuItem"];

    ToolStripMenuItem tsmi = new ToolStripMenuItem();
    tsmi.Text = e.UserState as string;
    tsmi.Name = e.UserState as string;
    tsmi.Click += new EventHandler(itm_Click);

    cpDropdownList.DropDownItems.Add(tsmi);
} 
```

# 循环

但是，您必须做的一件事是弄清楚如何摆脱这个循环。什么时候应该退出？无论这意味着什么，您都需要***添加***到我的示例中存在的*if语句，因为否则此循环将永远不会结束。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:12:03.887

这段代码片段的效果是什么：

```
GUIUpdate d = new GUIUpdate(ThreadSetCom);
this.Invoke(d); 
```

是在 UI 线程中将调用方法“ThreadSetCom”。该方法中有一个不定式循环。这就是为什么您的表单变得无响应的原因。

我建议您应该将该`foreach`子句移动到一个单独的方法中，并在满足条件时在 UI 线程中调用此方法，例如 diff.Count>0。

# php - 用户 hasMany Posts - Lithium MongoDB 关系

> ID：13776554
> 
> 赞同：1
> 
> 时间：2012-12-08T10:19:28.430
> 
> 标签：php, mongodb-php, lithium

我只是在尝试用户 hasMany Posts 的 hasMany 关系中最简单的示例。保存帖子以供测试时，user_id 在视图代码中是硬连线的。

问题：

1.  文档数据库/mongodb 的 Lithium 0.11 版本是否支持关系？
2.  控制器应返回属于用户的帖子，但没有返回
3.  假设 $users 从帖子返回连接数据， $user->posts 是访问它的正确方法吗？

    ```
    class PostsController extends \lithium\action\Controller {      
    public function index() {
    $posts = Posts::find('all', array('with' => 'Users'));        
    $users = Users::find('all',array('with' => 'Posts'));        
    return compact('posts','users');      
    }
    public function add() {
        $success = false;
        if ($this->request->data) {
            $post = Posts::create($this->request->data);
            $success = $post->save();
        }
        return compact('success');
    } 
    ```

模型类：

```
 class Posts extends \lithium\data\Model {
    public $belongsTo = array('Users' => array(
                                            'key'=>'user_id'));
}

    class Users extends \lithium\data\Model {
    public $hasMany = array('Posts');

} 
```

索引视图打印出帖子以及拥有属于他们的帖子的用户。

```
<?php foreach($posts as $post): ?>
<article>
    <h1><?=$post->title ?></h1>
    <p><?=$post->body ?></p>
    <p><?=$post->user_id ?></p>
</article>
<?php endforeach; ?>
<hr/> <hr/>
<?php foreach($users as $user): ?>
<article>
    <h1><?=$user->name ?></h1>
    <p><?=$user->_id ?></p>
    <p><?=$user->posts ?></p>
</article>
<?php endforeach; ?> 
```

# javascript - 在地图上画线并使用javascript获取国家线通过

> ID：13776555
> 
> 赞同：2
> 
> 时间：2012-12-08T10:19:29.527
> 
> 标签：javascript, google-maps, maps, openlayers

我正在开发基于地图的应用程序，目前想做以下事情。我有两个坐标，一个起点和一个终点，可以在地图上的这些点之间画一条线。但是，我想要做的是能够在地图上获得该线路通过的所有国家的列表。我想知道这是否可以使用谷歌地图来完成。我已经查看了许多选项，但无法绕过完成这项工作的方法 - 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:55:40.957

您可以在线路的各个点检查它所在的国家/地区：

```
pOfLine.AddressDetails.Country.CountryName 
```

# c# - 如何将 Umbraco CMS 发布到我的本地主机？

> ID：13776556
> 
> 赞同：1
> 
> 时间：2012-12-08T10:19:31.800
> 
> 标签：c#, .net, umbraco, session-state, publishing-site

我在“c:\inetpub\wwwroot\”中发布了我的网站。发布成功。但是当我运行它时，我向 web.config 提出了一个问题

```
<sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424"
    sqlConnectionString="Server=defraz-server;Database=Namaad;user id=sa;
    password=;Trusted_Connection=yes" cookieless="false" timeout="20" /> 
```

![在此处输入图像描述](../Images/bf8d5079fdbf84974484cad5ec860ddb.png) 请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:33:56.953

发生这种情况是因为您似乎已将您的网站发布为本地 IIS 中现有网站的虚拟目录。现有站点已经有一个 web.config 设置`<sessionState />`。

您可以从 web.config 中删除此行，或者最好将 Umbraco 网站设置为 Umbraco 中的新网站/应用程序。

# admob - 在 Android [ActionBarSherlock] 中定位底部操作栏

> ID：13776560
> 
> 赞同：0
> 
> 时间：2012-12-08T10:20:13.767
> 
> 标签：admob, actionbarsherlock

好的，所以我正在我的一个应用程序中实现[ActionBarSherlock](http://actionbarsherlock.com/)，并且我有一个具有拆分操作栏的 Activity（如下所示）。

![在此处输入图像描述](../Images/cfc349055c836d5253c2a31a0f35df87.png)

现在问题是我需要将底栏显示在广告上方而不是下方。

我的页面布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/Fill" >

<LinearLayout
    android:id="@+id/LL_app"
    style="@style/Fill.RL"
    android:layout_above="@+id/adView"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/XXX"
        style="@style/FillWrap.List" />

    <include layout="@layout/network_error" />

    <include layout="@layout/error_no_live" />
</LinearLayout>

<include layout="@layout/ad_layout" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:18:48.870

这是无法做到的。操作栏存在于您的应用程序可用的内容视图之外。您只能将内容放置在顶部栏下方和拆分操作栏上方（如果存在）。

如果你真的需要这个，你最好的选择是在你的布局中创建你自己的拆分操作栏版本，其中包含一个`LinearLayout`和一组`Button`s，它们使用操作栏将使用的正常主题。

# xml - 使用 dom4j 解析 xml

> ID：13776568
> 
> 赞同：2
> 
> 时间：2012-12-08T10:21:20.380
> 
> 标签：xml, dom4j, yahoo-weather-api

我的 XML 结构是这样的：

```
<rss>
     <channel>
         <yweather:location city="Paris" region="" country="France"/>
         <yweather:units temperature="C" distance="km" pressure="mb" speed="km/h"/>
         <yweather:wind chill="-1" direction="40" speed="11.27"/>
         <yweather:atmosphere humidity="87" visibility="9.99" pressure="1015.92" rising="0"/>
         <yweather:astronomy sunrise="8:30 am" sunset="4:54 pm"/>
     </channel>
</rss> 
```

当我尝试使用 dom4j 解析它时

```
 SAXReader xmlReader = createXmlReader();
 Document doc = null;
 doc = xmlReader.read( inputStream );//inputStream is input of function
 log.info(doc.valueOf("/rss/channel/yweather:location/@city"));

 private SAXReader createXmlReader() {
    Map<String,String> uris = new HashMap<String,String>();
    uris.put( "yweather", "http://xml.weather.yahoo.com/ns/rss/1.0" );
    uris.put( "geo", "http://www.w3.org/2003/01/geo/wgs84_pos#" );

    DocumentFactory factory = new DocumentFactory();
    factory.setXPathNamespaceURIs( uris );

    SAXReader xmlReader = new SAXReader();
    xmlReader.setDocumentFactory( factory );
    return xmlReader;
} 
```

但是我在 cmd 中什么也没有，但是当我打印 doc.asXML() 时，我的 XML 结构打印正确！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T19:22:38.660

@D3GAN 你写的一切都很好。代码没有问题。我刚试过。问题是你的代码中没有所有必要的库。

您应该将 jaxen 库添加到您的类路径中，您可能会收到 NoClassdefFoundError。原始[dom4j](http://sourceforge.net/projects/dom4j/files/dom4j/1.6.1/dom4j-1.6.1.zip/download)发行版包含 jaxen.jar（在依赖文件夹中）。

我犯了同样的错误。我刚刚添加了 dom4j 并且代码不起作用。我的文件是空的。但是当我添加 jaxen 依赖时，它开始正常工作。

如果你不知道如何安装 JAR 文件，你可以去这里： http: [//www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:27:24.153

您在 XML 和 XPath 中都有一个未声明的名称空间前缀。

`xmlns:yweather`向您的 XML添加适当的声明，并使用[setNamespaceURIs](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/XPath.html#setNamespaceURIs%28java.util.Map%29)使其可用于您的 XPath。

# ruby-on-rails - 使用 curl 登录并通过设计在 Rails 中发布

> ID：13776571
> 
> 赞同：2
> 
> 时间：2012-12-08T10:21:49.123
> 
> 标签：ruby-on-rails, authentication, curl, devise

我正在尝试使用 curl 创建一个 bash 脚本来登录到一个使用设计并在表单上发布的 Rails 应用程序。

到目前为止，我可以这样做：

```
#!/bin/bash

curl \
  --verbose \
  --request GET \
  -c cookie \
  http://localhost:3000/login > tmpsession

# the ff is a hack to get the authenticity_token from the form
# and join it with the file 'data' for posting with curl
csrf_token=`cat tmpsession|grep 'authenticity_token'|grep -o 'authenticity_token.*' |grep -o 'value=.*' |cut -d ' ' -f1|cut -d \" -f2`
echo "authenticity_token=" > data ; echo $csrf_token >> data; echo "&" >> data; cat samplepost >> data 

curl \
  --verbose \
  -b cookie \
  --request POST \
  --data "user[username=admin&user[password]=xxpasswordxx&authenticity_token=$csrf_token" \
  http://localhost:3000/login 
```

此时，我被重定向到通过`redirect_if_not_admin`before_filter的管理/索引页面

但是，当我尝试这样做时：

```
curl \
  --verbose \
  -b cookie \
  --request POST \
  --data @data
  http://localhost:3000/admin/posts 
```

我`Filter chain halted as :redirect_if_not_admin rendered or redirected`在日志中得到一个告诉我当前没有用户登录的信息。

我在想 curl 将会话存储在 cookie 中，并将其传递给服务器。有没有办法用 curl 保持这样的会话？

# scala - 如何创建一个重用 includeFilter 键的 sbt 插件？

> ID：13776575
> 
> 赞同：3
> 
> 时间：2012-12-08T10:22:18.440
> 
> 标签：scala, plugins, sbt, protocol-buffers

我正在为 Sbt 创建一个[protobuf](https://code.google.com/p/protobuf/)插件。

我创建了一个新的`TaskKey`命名`protoc`来将`.proto`文件转换为`.java`文件。

```
val protoc = TaskKey[Seq[File]]("protoc", "Convert proto to java.") 
```

我还将我的`protoc`任务注入到`sbt.Keys.sourceGenerators`：

```
sourceGenerators <+= protoc 
```

正如[插件最佳实践](http://www.scala-sbt.org/release/docs/Extending/Plugins-Best-Practices.html#reuse-existing-keys)所说，我重用了 SBT 的现有`sbt.Keys.sources`来指示源`.proto`文件。我写了一些与这些等效的代码：

```
// To generate .java from main .proto
protoc in Compile <<= (sources in protoc in Compile, ...) map { (protoSources, ...) =>
  ...
}

// To generate .java from test .proto
protoc in Test <<= (sources in protoc in Test, ...) map { (protoSources, ...) =>
  ...
} 
```

当我试图重用`sbt.Keys.includeFilter`. 我试过这个：

```
// For test protos being compiled
includeFilter in unmanagedSources in protoc in Test := "*.proto"

// For test protos being included
includeFilter in ProtobufKeys.unmanagedInclude in protoc in Test := "*.proto" 
```

它没有用，因为`in protoc`会覆盖`in unmanagedSources`！

如何创建符合“重用现有密钥”规则的代码生成器插件？

# java - 为什么 ArrayList 实现使用 Object[]？

> ID：13776576
> 
> 赞同：12
> 
> 时间：2012-12-08T10:22:29.907
> 
> 标签：java, generics, arraylist

在 Java`ArrayList<E>`实现中基于对象数组。
谁能解释我为什么`ArrayList<E>`使用数组`Object[]`而不是数据存储的实现`E[]`？使用有什么好处`Object[]`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T22:37:58.507

所以首先要意识到数组对象的实际运行时类型必须是`Object[]`. 这是因为数组在运行时知道其组件类型（不同的数组类型在运行时实际上是不同的类型），因此您需要在创建数组时指定组件类型，而`ArrayList`对象在运行时不知道其类型参数。

也就是说，实例变量的编译时类型可以声明为`Object[]`or `E[]`，具有不同的优点和缺点：

如果它被声明为`Object[]`：

```
private Object[] arr;
// to create it:
arr = new Object[3];
// to get an element:
E get(int i) { return (E)arr[i]; } 
```

这样做的缺点是每次从其中取出东西时都必须将其转换`E`为，这意味着您基本上将其用作预泛型容器。

如果它被声明为`E[]`：

```
private E[] arr;
// to create it:
arr = (E[])new Object[3];
// to get an element:
E get(int i) { return arr[i]; } 
```

这样做的好处是，当您从中获取内容时，您不再需要进行强制转换——它提供了对 . 的使用的类型检查`arr`，例如通用容器。缺点是，从逻辑上讲，强制转换是 lie——我们知道我们创建了一个运行时类型为 的对象`Object[]`，因此它不是 的实例`E[]`，除非`E`是`Object`。

但是，这样做不会立即出现问题，因为`E`它会被擦除到`Object`类的实例方法内部。可能发生问题的唯一方法是，如果对象以某种方式暴露于类的外部（例如，在方法中返回，放入公共字段等），其类型使用其类型`E[]`（事实并非如此）：

```
// This would be bad. It would cause a class cast exception at the call site
E[] getArray() { return arr; } 
```

但是`ArrayList`，实际上任何设计合理的容器类，都不会向外部公开诸如其内部数组之类的实现细节。除其他外，它会破坏抽象。所以只要这个类的作者知道永远不会暴露这个数组，这样做就没有问题（可能会让下一个看到代码但不知道它的人感到困惑），并且可以自由使用这种方式带来的增加类型检查的优势。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T10:25:09.287

**在 Java 中，创建泛型类型的数组并不简单。**

简单的方法不编译：

```
public class Container<E> {

    E[] arr = new E[3]; // ERROR: Cannot create a generic array of E

} 
```

替换`E`为`Object`, 一切都很好（以在容器实现的其他地方增加复杂性为代价）。

有替代方法，但它们提出了一组不同的权衡。有关广泛的讨论，请参阅[如何在 Java 中创建泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T10:31:50.483

考虑到[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)（即在编译类型时删除了示例中的泛型类型参数这一事实`E`），我怀疑在这两种情况下生成的字节码会相似。

从维护的角度来看，使用类型参数而不是 Object 会更容易阅读代码（因为它会限制强制转换）。但是由于 API`ArrayList`从不公开那个“原始”`Object`数组，我想它对我们这些单纯的 Java 开发人员没有任何影响 :)

# solr - Solr - 增量查询、更新和删除之间的区别？

> ID：13776578
> 
> 赞同：0
> 
> 时间：2012-12-08T10:22:37.910
> 
> 标签：solr

我想了解 Solr 中的 Delta Update 、 Updation 和 Deletion 之间的区别。

增量查询：如果增量查询期间的唯一 ID 与现有文档的唯一 ID 相同，会发生什么情况？我想知道增量查询是否可用于更新和插入新记录。这种情况下的预期行为是删除旧文档并重新插入具有相同唯一 ID 的更新文档吗？（我的唯一 ID 是由数据库中实体的主键形成的模板）。

更新 - 如果我在没有记录的情况下更新，但只是在语法中提及文档 ID，这是否等同于删除，因为更新是通过删除后跟新插入相同的唯一 ID 进行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:53:18.503

Delta Query 基本上允许您以增量方式索引文档。
在最后一次成功构建时间之后添加的文档是唯一包含在索引中的文档。
如果 Document id 已存在于索引中，Solr 将执行更新。
Solr 不执行实际更新，而是执行文档的删除和插入。
如果 Document 不存在，则它是 Solr 的插入。

如果您仅使用 ID 更新 Document，它将覆盖其他字段。
但是，这并不等同于删除，因为 Document 仍然存在于只有 Id 的索引中。
您应该执行删除以从 Solr 索引中完全删除文档。

# actionscript-3 - 当设备处于横向模式且 aspectRatio 设置为“ANY”时，AIR3.5 AS3 应用程序不会启动

> ID：13776580
> 
> 赞同：1
> 
> 时间：2012-12-08T10:23:11.703
> 
> 标签：actionscript-3, air, screen-orientation, aspect-ratio, device-orientation

我将纵横比设置为 ANY：

```
stage.setAspectRatio(StageAspectRatio.ANY); 
```

如果我在设备旋转到横向时启动我的应用程序，我只会看到黑屏。但是当设备旋转到纵向时，应用程序正常启动，然后我将设备旋转到横向或纵向，应用程序分别重新定位用户界面。我对这个问题有某种解决方案。如果我添加这行代码：

```
stage.setOrientation(StageOrientation.DEFAULT); 
```

当设备处于横向时应用程序以纵向启动，并且它保持纵向直到我将设备旋转到纵向并返回到横向。我希望我的应用程序从面向设备的 UI 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:57:07.243

您还必须编辑 appdescriptor xml ..

```
 <autoOrients>true</autoOrients> 
```

# php - 语法错误意外 T_ELSE

> ID：13776582
> 
> 赞同：0
> 
> 时间：2012-12-08T10:24:02.960
> 
> 标签：php

多年来，我一直在检查此代码，试图找出导致此错误的原因。它说的是意外的 T_ELSE，它指向代码中的最后一个 else。有人可以指出我的错误。非常感谢

```
<?php

    error_reporting(E_ALL);

// AFTER SUCCESSFUL QUERY
if (mysql_num_rows() == 0)
{
    echo '<div class="no-rec">No Record Found !</div>';
}
else
{
    while ($row = mysql_fetch_assoc($rsd))
    {
        $ticket  = $row['ticket_frm'];
        $rowdate = date("d/m/Y",strtotime($row['date_frm']));
        $id      = $row['id_frm'];
        $from    = $row['from_frm'];
        $subject = $row['subject_frm'];
        $message = $row['message_frm'];

        $myString = <<<ENDMYSTRING
          <div class="each_rec">
          <div class="record blue" data-message="$message" data-subject="$subject" data-rowdate="$rowdate" data-from="$from">
          <img src="images/sml_new_mail_icon.gif" class="mailIcon" alt="" /><span class="iconSubject">$subject</span>
          <div class="rowdate">$rowdate</div>
          <span class="mailFrom">$from</span>
          </div>
          <br />
ENDMYSTRING;
          echo $myString;
    }
}

else

{

  echo 'you must enter a ticket#';

    //$sql = "select * from contact_frm";
    //var_dump(mysql_error());
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:25:55.227

```
if (mysql_num_rows() == 0) {

} else {
    ^ maybe here you could put elseif()
} else {
   // or just remove this else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:26:32.113

是的，就在你之前，你已经有一个 else 用于你的 if (mysql_num_rows() == 0) 测试；然后你为“必须提供票”提供另一个

也许你的意思是

```
elseif (mysql_num_rows() >= 1) 
```

在while循环之前

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T10:27:14.137

你有一个看似`if-else-else`声明的东西。我不知道*任何*有效的语言:-)

你需要重新考虑你的逻辑或你对语言元素的使用。

在这里进行一些明智的猜测（我意识到这充满了危险），您正在检查前面返回的行这一事实似乎表明`else`在此之前很久就应该完成一个说明没有输入票号的块。

所以这可能是一个剪切粘贴错误，或者你`if-else`在错误的位置插入了一个，或者你在`if`你拥有的那个之前错过了另一个，而你现在的那个在`true`块中。

我要做的第一件事就是完全摆脱第二部分`else`，然后从那里开始。

然后，如果存在逻辑问题，请在此处发布另一个问题并让我们放松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T10:28:07.197

在这里，您添加了两个 else 子句。

# java - 将多行字符串写入文件

> ID：13776587
> 
> 赞同：0
> 
> 时间：2012-12-08T10:25:00.673
> 
> 标签：java, bufferedwriter

我正在使用 bufferedWriter 写入这样的文件

```
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;

/**
 *
 * @author Jesus With Issues
 */
public class thewrite {

    /**
     * Prints some data to a file using a BufferedWriter
     */
    public void writeToFile(String filename) {

        BufferedWriter bufferedWriter = null;

        try {

            //Construct the BufferedWriter object
            bufferedWriter = new BufferedWriter(new FileWriter(filename));

            //Start writing to the output stream
            bufferedWriter.write("First Line to be written");
            bufferedWriter.newLine();
            bufferedWriter.write("Second Line to be written");

        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        } finally {
            //Close the BufferedWriter
            try {
                if (bufferedWriter != null) {
                    bufferedWriter.flush();
                    bufferedWriter.close();
                }
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new thewrite().writeToFile("filed.txt");
    }
} 
```

然而，而不是一行文本，我想要一个间距很好的字符串，比如这个

```
<article class="hello">
<section>
<header>
<h1>Markdown notes</h1>
<p>Lorem ipsum</p>
</header>
<footer>
<h4>Citations</h4>
<p>Loremed ipsumed</p>
</footer>
</section>
</article> 
```

我想写上面的字符串，一旦写完，我想换一个新行。bufferedWritter中是否有一个准备好的函数来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:27:45.217

当您需要换行时，您可以使用换行序列。

```
 write("This is a line\nAnd this is a second line"); 
```

\n 将创建一个新行。

# c - 访问被本地隐藏的全局变量

> ID：13776588
> 
> 赞同：4
> 
> 时间：2012-12-08T10:25:02.110
> 
> 标签：c

> **可能重复：**
> [如何访问 C 中的阴影全局变量？](https://stackoverflow.com/questions/618769/how-can-i-access-a-shadowed-global-variable-in-c)

**如果有同名的局部变量，如何访问 C 中的全局变量？**

```
 int m=20 ;  
     void main()  
     {  
       int m=30;  
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T10:42:29.077

在 C 中，您可以。当然，这只是琐事，你不应该在现实生活中这样做。

声明某事`extern`可以在任何地方进行，并且总是将声明的变量链接到该名称的全局变量。

```
#include <stdio.h>

int i = 3;

int main( int argc, char **argv ) {
    int i = 6;

    printf( "%d\n", i );
    { // need to introduce a new scope
        extern int i; // shadowing is allowed here.

        printf( "%d\n", i );
    }
    return 0;
} 
```

在 C++ 中，全局始终以`::i`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T10:30:24.807

~~在C中没有办法。~~实际上，引入一个额外的范围并`extern`声明可以，请参阅@Potatoswatter 的答案。

`::`在 C++ 中，您可以使用（如）在全局命名空间中查找标识符，`::m=15`顺便说一下，它与用于访问“常规”命名空间（`std::cout`...）成员的运算符相同。

此外，它是`int main()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T10:28:51.143

在C中你没有。给他们一个不同的名字，无论如何这会令人困惑和不好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T10:31:53.123

无论如何，相同的名称都是不好的做法，直到重新定义 m 您正在以任何方式访问全局变量

```
 int m=20 ;  
 void main()  
 { 
   print m // 20 would be printed here .
  // max you can do 
   int m=30;  
 } 
```

# c# - 具有 CCSID 1208 (UTF-8) 和 oledbtype 问题的 DB2/400 字段

> ID：13776590
> 
> 赞同：1
> 
> 时间：2012-12-08T10:25:30.393
> 
> 标签：c#, .net, unicode, db2, oledbconnection

我在 AS/400 DB2 表中有一个表：

```
SCDSC VARCHAR(120) CCSID 1208 DEFAULT NULL , 
```

CCSID 1208 意味着 UTF-8。

在我的 c# 代码中，这是有效的定义。

```
cmd.Parameters.Add("scdsc", OleDbType.VarChar  , 120); 
```

我也尝试过 VarWChar 类型：

```
cmd.Parameters.Add("scdsc", OleDbType.VarWChar  , 120); 
```

问题是该字段获得的最大值是 60 个字符。我不能让它在字段中使用 60 个字符的长度。

我觉得很奇怪，我需要将字段的真实长度加倍（我对所有字符串字段都这样做了）才能使其正常工作。

**更新：**正确的实现是将DB中的字段定义为nvarchar，将oledbtype定义为varWchar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:40:47.847

您应该将该列定义为 nvarchar。您将其定义为 varchar 120，这意味着它只能容纳 120 个字节，而不是所需的 240 个字节。

varchar 类型用于非 unicode，1byte=1 个字符的字符串。

# java - 将元素插入排序列表

> ID：13776593
> 
> 赞同：4
> 
> 时间：2012-12-08T10:25:45.387
> 
> 标签：java, android, arrays, logic, sorting

好的，我正在使用 getSharedPreferences 来存储我的高分，但在我填满它之前，我想通过和数组将分数按升序排序，但如果它在第一个 pos 中找到小于它的分数，那么它不会检查其余的最小的？

```
 //function to add score to array and sort it
    public void addscoretoarray(int mScore){
    for(int pos = 0; pos< score.length; pos++){
        if(score[pos]  > mScore){
            //do nothing
        }else {
                //Add the score into that  position
                score[pos] = mScore;
                break;
            }
    }
    sortArray(score);
} 
```

我应该在循环之前和之后调用 sortArray() 来解决这个问题，还是有更好的方法来实现相同的结果？

我还应该提到 sortArray(score) 函数只是调用 Arrays.sort(score) 其中 score 是 mScore 的数组

编辑：根据@Vincent Ramdhanie 发布的内容，我修改了帖子：

```
 public void addscoretoarray(int mScore){
    int pos = score.length; 
    //sort the array (in ascending order)
    sortArray(score);

    //go though the array( in descending order) and check for a place that suits the conditions
    while(pos>=0 && score[pos] > mScore){ 
         pos--; //do nothing as score[pos] is larger than mScore
    }
     //so once a pos is found (e.g. broke out of the while loop)
     //check that it is still in the list
    if(pos >= 0){
        //if it is then move everything down 1 position
        for(int i = 0; i < pos; i++){
            score[i] = score[i+1];
        }
        //replace the initial pos with the new score
        score[pos] = mScore;
    }
} 
```

我仍然相信它会在`for(int i = 0; i < pos; i++){`循环中退出列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T13:32:26.007

如果我理解正确，那么我建议这样做

```
 int[] a1 = { 1, 2, 3, 4, 6 };
    int mScore = 5;

    int[] a2 = new int[a1.length + 1];
    Arrays.sort(a1);
    int p = Arrays.binarySearch(a1, mScore);
    if (p < 0) {
        p = -p - 1;
        System.arraycopy(a1, 0, a2, 0, p);
        System.arraycopy(a1, p, a2, p + 1, a1.length - p);
        a2[p] = mScore;
    }
    System.out.println(Arrays.toString(a2)); 
```

输出

`[1, 2, 3, 4, 5, 6]`

请注意，它仅插入唯一值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T10:41:59.797

为什么不保持分数数组排序。因此，您将分数添加到数组将假定数组始终按降序排序。要插入的新分数只会在插入时将最低分数推离数组。然后，您可以使用类似这样的插入算法：

```
 insertScore(int[] scores, int mscore){
        //find insert point
        int i = 0;
        while(i < scores.length && scores[i] > mscore){
            i++;
        }
        if(i < scores.length){
            //you found a place to insert the score
            for(int j = scores.length-1; j > i; j--){
                scores[j] = scores[j - 1];
            }
            scores[i] = mscore;
        }
   } 
```

在这种情况下，无需使用数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T20:34:56.310

请参阅[javadoc 到 binarySearch 的 @return](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch(java.util.List,%20T))：

> 如果包含在列表中，则返回搜索键的索引；**否则，（-（插入点）- 1）。插入点定义为将键插入列表的点：第一个大于键的元素的索引，如果列表中的所有元素都小于指定的键，则为 list.size()**。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T11:01:13.947

```
public void addscoretoarray(int mScore){
    for(int pos = 0; pos< score.length; pos++){
        if(score[pos]  > mScore){
            //do nothing
        }else {
                //Add the score into that  position
                score[pos] = mScore;
                break;
            }
    }
    sortArray(score);
} 
```

代码中有一些主要错误。

1.  `score[pos] = mScore;` 在此语句中，您分配`mScore`的位置`pos`将导致存储的值`pos`丢失。

2.  如果您使用的是数组，那么要存储其间的任何元素，您需要将所有剩余元素向右移动 1 个位置，而您在这里没有这样做。

3.  `score[pos] = mScore; break;`

在将元素存储在 pos 之后，break 将在第一次迭代本身中中断循环。

建议 ：

使用 arraylist 而不是原生数组。修改后的伪代码：

```
public void addscoretoarray(int mScore){
    int index = getFirstIndexOfScoreGreaterThanmScore(); // need to implement it
    if(index == -1){ // no element greater than mscore
    score.add(mScore);
    }else{
    score.add(index,mScore);
}
//   sortArray(score); // no need to call this if the list is initially empty as the insertion will be in sorted order itself
if(score.length == maxSize){
//do whateverwhen the list is full as per your requirements
}
} 
```

# asp.net-mvc - tinymce 文字水印

> ID：13776596
> 
> 赞同：1
> 
> 时间：2012-12-08T10:26:19.427
> 
> 标签：asp.net-mvc, tinymce

我有一个局部视图（asp.net MVC 3.0）将 Tinymce 渲染为 Richeditor，并希望在其上显示文本水印。

```
 @model String
        @using Nop.Web.Framework.UI;
        @{
            Html.AddScriptParts(@Url.Content("~/Content/editors/tinymce/tiny_mce.js"));

            //set useDefaultImagePlugin to 'true' if you want to move back to a standard image plugin           
            bool useDefaultImagePlugin = false;
            var imagePluginName = useDefaultImagePlugin ? "image" : "netadvimage";
        }

     @Html.TextArea(string.Empty, /* Name suffix */
            ViewData.TemplateInfo.FormattedModelValue /* Initial value */
        )
        <script type="text/javascript">

            //Notes: autosave plugin is disabled
            (function () {

                tinyMCE.init({

                    // General options
                    mode: "exact",
                    elements: "@ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty)",
                    theme: "advanced",
                    height: "120px",
                    width: "100%",
                    verify_html: false,
                    plugins: "equation,netadvimage,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist",

                    // Theme options
                    theme_advanced_buttons1: "equation,@imagePluginName,|,justifyleft,justifycenter,justifyright,justifyfull,|,link,unlink,|,pastetext",
                    theme_advanced_buttons2: "",
                    theme_advanced_buttons3: "",
                    theme_advanced_toolbar_location: "top",
                    theme_advanced_toolbar_align: "left",
                    theme_advanced_resizing: false,

                    // Example content CSS (should be your site CSS)
                    //content_css : "css/content.css",
                    convert_urls: false,

                    // Drop lists for link/image/media/template dialogs
                    template_external_list_url: "lists/template_list.js",
                    external_link_list_url: "lists/link_list.js",
                    external_image_list_url: "lists/image_list.js",
                    media_external_list_url: "lists/media_list.js"

                });

tinyMCE.focus(function () {
            if ($(this).getContent() == "Type some text here") {
                tinyMCE.setContent("");
            } else if ($(this).getContent() == "") {
                tinyMCE.setContent("Type some text here");
            }
        })
            })();

        </script> 
```

我试图在上面的脚本中关注[TinyMCE 提示文本](https://stackoverflow.com/questions/3358645/tinymce-hint-text)中的类似帖子，但它从未在 textarea 内容上显示任何内容。

即使使用[http://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)，它也只会闪烁内容并立即变为空白。

谢谢

# php - PHP json_encode 在 json-string 的开头添加了一些数字（十六进制？）

> ID：13776597
> 
> 赞同：0
> 
> 时间：2012-12-08T10:26:19.390
> 
> 标签：php, json, fsockopen

我将 json_encoded 数据从一个 php 脚本回显到另一个（请求由 fsockopen/GET 发出）。

当对一个包含 40 个元素的数组进行编码时，没有问题。当用 41 做同样的事情时，一些数字和 \r\n 被添加到 json 字符串的开头。

这是我回显之前字符串的开头：

```
{"transactions":[{"transaction_id":"03U191739F337671L", 
```

这就是我发送数据的方式：

```
header('Content-Type: text/plain; charset=utf-8');
error_log(json_encode($transaction_list));
echo json_encode($transaction_list); 
```

一旦我收到请求脚本中的数据，我就会再次将其打印到 error_log：

```
27fc\r\n{"transactions":[{"transaction_id":"03U191739F337671L", 
```

如果我检索的数据较少，则“27fc\r\n”不存在。

这就是我处理响应的方式：

```
$response="";
 while (!feof($fp)) {
            $response .= fgets($fp, 128);
 }

 //Seperate header and content
 $separator_position = strpos($response,"\r\n\r\n");      

 $header_text = substr($response,0,$separator_position);      

 $body = substr($response,$separator_position+4);                   
 error_log($body);  

 fclose($fp); 
```

我试过玩弄 fsockopen 请求的时间，没关系。与 php.ini 中的 max_execution_time 和 max_input_time 相同，没关系。我在想，由于超时，内容可能以某种方式被剪掉了……

第 41 个数组的内容格式与前面的没有不同。

发生了什么，我该如何解决？

我正在使用 Linux、Apache (httpd) 和 PHP。

**更新**

数据似乎是分块的。在响应中，包含以下标头：“Transfer-Encoding: chunked”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:01:00.563

基于@Salmans 使用 file_get_contents 的想法，这是可行的解决方案。这使用 POST 发送数据（GET 似乎没有工作，我认为必须自己将该查询字符串附加到 URL）：

```
$postdata = http_build_query(         
   array('customer_id' => $customer_id)
);

$opts = array('http' =>
   array(
    'method'  => 'POST',
    'header'  => 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
   )
);

$context  = stream_context_create($opts);  
$content = file_get_contents($my_url, false, $context);
return $content; 
```

# android-emulator - 安卓模拟器启动失败。emulator64-arm：可执行文件中的错误 CPU 类型

> ID：13776603
> 
> 赞同：8
> 
> 时间：2012-12-08T10:27:10.017
> 
> 标签：android-emulator, launch

昨天我决定开始在我的 mac (Snow Leopard 10.6.8) 32 位上开发 Android。一切都很好，我还导入了我在 Linux 中工作了几个月的工作区。我打开一个项目并完美编译。

当我尝试运行该项目时，它给了我这个错误：
**“...android/sdk/tools/emulator64-arm：BAD CPU Type in executable”**

我正在为移动开发人员使用 eclipse juno，并为 mac 下载了最新的 android sdk

它看起来像一个 32 位 64 位问题。但我还不能解决它。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T09:30:24.587

我已经发现了问题。

在 android-sdk/tools/ 目录下，我删除了所有与 64 位系统相关的可执行文件。这些文件是：

emulator64-arm , emulator64-x86 等

然后重新启动该项目，现在它就像一个魅力一样工作。

希望这对遇到同样问题的人有所帮助。

# objective-c - 更新SplitView的TableView（RootView）

> ID：13776605
> 
> 赞同：0
> 
> 时间：2012-12-08T10:27:16.530
> 
> 标签：objective-c, ios, uitableview, uisplitviewcontroller

在我的 SplitView 应用程序中，我在启动时在 TableView 中有一些常规数据。选择TableView中的数据时，我想首先在其中选择某些东西时显示详细数据，它也应该在DetailView中显示。我的问题涉及第二步：我应该如何更新 TableView 的数据并避免在选择某些内容时这个 TableView 消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:44:13.473

如果您从 Apple 提供的 MasterDetail 应用程序开始，默认情况下它会执行以下操作

1.  创建一个拆分视图控制器。
2.  在左侧它有一个 UINavigationController
3.  在右侧它有 DetailViewController
4.  在 AppDelegate 中，它有一个 UINavigationController，其根控制器为 MasterViewController。（这就是您在左侧看到 MasterViewController 的原因）。
5.  默认情况下，左侧的 MasterViewController 与导航控制器无关。看起来这是您希望能够进一步向下钻取并获得另一个向下钻取视图的地方，依此类推。

您需要采取的步骤

1.  首先创建另一个 DrillDownLevel1ViewController，它是 UITableViewController 的子类。

2.  在该类中，有两个属性，一个用于数据，一个用于引用 DetailViewController。

    ```
    @property(strong,nonatomic)NSArray *drillDownLevel1Data;
    @property(strong,nonatomic)DetailViewController *detailViewController; 
    ```

3.  在 MasterViewController 的 didSelectRowAtIndexPath 中做这样的事情

    ```
     DrillDownLevel1ViewController *drillDownLevel1ViewController = [[DrillDownLevel1ViewController alloc] init];
     drillDownLevel1ViewController.drillDownLevel1Data=[NSArray arrayWithObjects:@"One",@"Two",@"Three", nil];
     drillDownLevel1ViewController.detailViewController=self.detailViewController;

     [self.navigationController pushViewController:drillDownLevel1ViewController animated:YES]; 
    ```

4.  在 DrillDownLevel1ViewController 中，可以正确设置 numberOfSections、numberOfRows 等

5.  在 DrillDownLevel1ViewController 的 cellForRowAtIndexPath 中，设置正确的值

    ```
     static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        if(cell==nil){
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }

        cell.textLabel.text=[drillDownLevel1Data objectAtIndex:indexPath.row];

        return cell; 
    ```

6.  在 DrillDownLevel1ViewController 的 didSelectRowAtIndexPath 中

    ```
    self.detailViewController.detailItem = [drillDownLevel1Data objectAtIndex:indexPath.row];
    [self.detailViewController configureView]; 
    ```

7.  右侧的 DetailViewController 现在应该向您显示数据。如果不是，那么您可以对插座是否连接等进行一些调试。

我有一个我建立的简单项目，如果你愿意，我可以通过电子邮件发送给你。

# google-app-engine - 计算机关闭后本地 GAE 数据存储不保留数据

> ID：13776610
> 
> 赞同：4
> 
> 时间：2012-12-08T10:27:49.303
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

在我的本地机器（即`http://localhost:8080/`）上，我已将某个名为`Article`. 关闭计算机然后第二天重新启动后，我发现数据存储为空：没有实体。将来有没有办法防止这种情况发生？

如何在本地数据存储中制作数据副本？另外，我以后可以将上述数据上传到本地主机和生产环境吗？

我的型号是`ndb`。

如果这些很重要，我正在使用 Max OS X 和 Python 2.7。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T17:12:43.973

我也遇到过同样的问题。在运行 dev_appserver.py 时声明数据存储路径应该可以修复它。这些是我在启动 dev_appserver 时使用的参数

```
python dev_appserver.py --high_replication --use_sqlite --datastore_path=myapp.datastore --blobstore_path=myapp_blobs 
```

这将使用 sqlite 并将数据保存在文件 myapp.datastore 中。如果要将其保存在其他目录中，请使用 --datastore_path=/path/to/myapp/myapp.datastore

我还使用 --blobstore_path 将我的 blob 保存在特定目录中。我发现声明保存我的 blob 的目录更可靠。同样，即 --blobstore_path=/path/to/myapp/blob 或任何您想要的。

由于声明了 blob 和数据存储路径，我没有在本地丢失任何数据。可以在此处的 App Engine 文档中找到更多信息：

[https://developers.google.com/appengine/docs/python/tools/devserver#Using_the_Datastore](https://developers.google.com/appengine/docs/python/tools/devserver#Using_the_Datastore)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:58:05.627

数据存储通常会在您关闭时保存到磁盘。如果您在不关闭服务器的情况下关闭计算机，我可以看到这种情况发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T11:03:56.737

本地数据存储中的数据将被保留，除非您使用 -c 标志启动它以清除它，至少在 PC 上是这样。因此，您可能对临时文件或权限或其他东西有不同的问题。

本地数据使用与实际生产服务器不同的方法存储，因此不确定是否可以直接备份。如果您想将数据上传到本地和部署的服务器，您可以使用上传工具套件： [上传数据](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

> 批量加载器工具可以将数据上传到应用程序的数据存储区或从应用程序的数据存储区下载数据。只需进行一点设置，您就可以从 CSV 和 XML 文件上传新的数据存储实体，并将实体数据下载到 CSV、XML 和文本文件中。大多数电子表格应用程序都可以导出 CSV 文件，使非开发人员和其他应用程序可以轻松生成可以导入到您的应用程序中的数据。您可以自定义上传和下载逻辑以使用不同类型的文件，或进行其他数据处理。

因此，您可以通过将数据下载到文件来“备份”。

要将数据加载/拉入本地开发服务器，只需为其提供本地 URL。

# seo - 关联内容和 SEO，带有外部链接的站点地图，使用 CNAME 将外部链接作为我自己的包含在站点地图中

> ID：13776611
> 
> 赞同：1
> 
> 时间：2012-12-08T10:27:58.773
> 
> 标签：seo, sitemap, cname

是否有任何 HTML 代码或页面参数或元名称可以告诉搜索引擎一个页面的内容与另一个域上的另一个页面密切相关。我保持内容元标记和关键字元标记的更新。我不想向我的访问者显示这些链接。

1）我需要知道是否有专门向爬虫传达相关链接的协议，以提高我的排名

有什么办法可以通过代码告诉爬虫（特别是爬虫，比如 No Follow 是如何针对爬虫的），这`mydomain.com/Porduct.php`与说

```
 http://ebay.com/sameProduct  
 http://wikipedia.com/GenericProduct or
 http://google.com?q=someKeywords 
```

我应该包含外部链接还是`CNAME mapped External links(Read Q3)`内容标签内？那会有什么不同吗

2）我可以在我的站点地图中包含这些链接吗？常识会建议我的站点地图中的链接应该在我的域中悬挂。尽管如此，我还是问了，因为站点地图包含了包括域名在内的完整 URL。

3) 如果一个索引良好的特定页面的内容与我的内容非常相似，我可以将我的页面的 CNAME 映射到该站点并将其包含在站点地图中吗？那算作弊吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:14:14.687

首先，我不确定你想在那里实现什么。一般来说，搜索引擎已经非常擅长识别你的页面是关于什么的。如果您的内容是关于产品 A 的，请写一个关于产品 A 的描述，有关于产品 A 的图片，让您的用户评论或评论产品 A，或者将微数据添加到您的页面（即[http://schema.org/Product](http://schema.org/Product)）。所有这些都将帮助搜索引擎识别您的页面是关于该产品的，就像其他网站上的页面也包含关于同一产品的内容一样。

要回答您的问题：

1) 我不知道有任何类似的标签也会被搜索引擎支持。

2) 在您的站点地图中，您只能包含指向站点地图所在主机名上的某个位置的 URL（有一些例外情况，但现在无关紧要）。有关站点地图的更多信息，请参见[http://www.sitemaps.org/protocol.html 。](http://www.sitemaps.org/protocol.html)

3）CNAME资源记录指定该*域名*是另一个域名的别名，因此不能按照您描述的方式使用。

最后，您正在尝试为爬虫做一些事情，这通常是个坏主意。创建一个很棒的网站，对用户有用的东西，他们会喜欢的东西，如果你关闭商店，他们会想念的东西。只关注用户，其他一切都会到来。

# jquery - jQuery根据内容的高度放置按钮

> ID：13776614
> 
> 赞同：1
> 
> 时间：2012-12-08T10:28:07.040
> 
> 标签：jquery, jquery-ui, css, jquery-selectors

我的工作演示在此[链接](http://jsfiddle.net/kpatel/LpNMG/)中。标记是这样的，但仅适用于第一行。在演示链接中，我给出了所有代码

```
<div id="content">
  <ul class="products">
    <li class="product pro first">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Lorem Ipsum is simply dummy </h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>

    <li class="product pro">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Battle Field</h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>

    <li class="product pro last">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Battle Field</h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>
</div> 
```

在这里您可以看到一行有 3 列，而另一行有 3 列。现在每个内容部分在页面底部都有一个添加到购物车按钮。现在我想让所有的按钮保持在我的内容的底部，它不会介意文本的长度。为此，我只是在这里使用了一些 jQuery 的东西。现在在那个演示中，您可以看到它正在获取一个元素的最大高度并根据它设置 css。但我想在每一行都保留它。您可以看到第一行有 ess 内容，第二行有更多内容。因此，在第二行中，可以将按钮放在底部，并且它会占用该行的最大高度。但首先应该有类似的东西。它应该在那里检查最大高度内容，并根据该内容放置按钮。 **很抱歉告诉你，我无法更改我的标记。它将保持不变**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:33:44.687

行数取决于浏览器窗口的宽度。我的窗口足够宽，所有项目都可以放在一行中。

我正在想办法只针对共享行的元素，而不存在任何实际行。可能有一些方法，但它会非常复杂。恐怕答案是改变标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:17:37.850

在 jQuery 中只使用这个

```
(function($) {
  function normalizeHeight(items) {
    var maxHeight = 0, itemHeight;

    items.each(function() {
      itemHeight = $(this).height();
      if (itemHeight > maxHeight) {
        maxHeight = itemHeight;
      }
    }).height(maxHeight + 'px');
  }

  $(document).load(function(){
    var itemsPerRow = 3,
        items = $('ul.products li'),
        rows = items.length / itemsPerRow, 
        r, min, max;

    if (rows < 1) rows = 1;

    for(r = 0; r < rows; r++) {
      min = itemsPerRow * r,
      max = min + itemsPerRow;
      normalizeHeight(items.slice(min, max));
    }
  });
});</script> 
```

这将使所有 li 的高度相等，它会检查该行中最高的 li 并使该鱼子中的另一个 i 达到该高度。希望它对你有用。

# android - setView 不在对话框中显示内容

> ID：13776619
> 
> 赞同：-1
> 
> 时间：2012-12-08T10:29:21.393
> 
> 标签：android, android-alertdialog

我无法在警报对话框中显示视图。`new AlertDialog.Builder(this) .setTitle("Set preferences for ") .setView(findViewById(R.layout.radiodialog1)) .show();` 而radiodialog1 带来`

```
 <RadioButton
            android:id="@+id/radioNum"
            style="@style/RadioButtonAppTheme"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="btnNumbersClicked"
            android:text="@string/PlayNumbers" />

        <RadioButton
            android:id="@+id/radioFour"
            style="@style/RadioButtonAppTheme"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="btnStart4LetterClicked"
            android:text="@string/btn4LetterText" />

        <RadioButton
            android:id="@+id/radioFive"
            style="@style/RadioButtonAppTheme"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="btnStart5LetterClicked"
            android:text="@string/btn5LetterText" />
    </RadioGroup> 
```

`

该对话框仅显示设置的标题。我尝试将此无线电组放在线性布局中。为活动设置内容视图时工作正常。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:39:28.310

你应该使用任何一个，

```
dialog.setContentView(R.layout.radiodialog1); 
```

或通过 LayoutInflater 创建视图，然后通过 Dialog.setView() 方法从 layoutinflater 服务扩展视图，然后将该视图设置为对话框。

# vb.net - 如何在按文件名降序排列的日期之间获取具有所需扩展名的文件

> ID：13776620
> 
> 赞同：1
> 
> 时间：2012-12-08T10:29:30.427
> 
> 标签：vb.net

我在目录中获取所需扩展名的文件：

```
Dim files As FileInfo()
files = New DirectoryInfo(myPath).GetFiles("*." & dExt).Where(Function(x) _
x.CreationTime >= (st_date) AndAlso x.CreationTime <= (end_date)).ToArray() 
```

这个工作还可以。
但我不知道在这个表达式中加入“OrderByDescending”。

请如果有人可以告诉我如何在显示的代码中添加“OrderByDescending”子句。
其次，我想知道是否可以为两个表达式定义 GetFiles。
例如，在定义的路径中一次获取扩展名为“ *.7z”和“ .arj”的文件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:44:49.377

我为所有可能感兴趣的人找到了解决方案......

```
 Dim files As FileInfo()
    files = New DirectoryInfo(myPath).GetFiles("*." & dExt, SearchOption.TopDirectoryOnly) _
           .OrderByDescending(Function(x) x.FullName) _
           .Where(Function(x) x.CreationTime >= (st_date) AndAlso x.CreationTime <= (end_date)) _
           .ToArray() 
```

此外，还有浏览多个扩展的解决方案，但没有一个像我希望的那样优雅。

# php - PHP 数组元素交叉

> ID：13776621
> 
> 赞同：0
> 
> 时间：2012-12-08T10:29:31.080
> 
> 标签：php

我有一个`array`包含多个团队。我希望每支球队都和其他球队一起比赛。

我曾尝试这样做，`for loop`但没有任何效果。

数组是这样的。

```
Array ( [0] => 2 [1] => 3 [2] => 8 [3] => 9 [4] => 11 [5] => 12 ) 
```

我想这样做。

```
[0] - [1]
[0] - [2]
[0] - [3]
[0] - [4]
[0] - [5]

[1] - [2]
[1] - [3]
[1] - [4]
[1] - [5]

[2] - [3]
[2] - [4]
[2] - [5]

[3] - [4]
[3] - [5]

[4] - [5] 
```

我的代码是这样的

```
 function createMatchesStandings($teams,$homeaway,$round)
    {
        include_once('class_match.php');

        if($homeaway == 0)
        {
            // one way matches
            $numberOfMatches = count($teams) - 1;
            for($i = 0; $i<=$numberOfMatches;$i++)
            {
                $match = new Match();
                $match->standing = $this->id;
                $match->round = $round;
                $match->home_team = $teams[$i];
                $match->away_team = $teams[$i+1];
                $match->week = $i;
                $match->date = '0000-00-00';
                $match->insert();
            }

        }elseif($homeaway == 1)
        {
            // home away matches ($teams * 2) - 2

        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:35:22.073

像下面的代码可以帮助你吗？（我希望我理解这个问题。）

```
$teams=array(1,2,3,4,5);

for($i=0;$i<sizeof($teams);$i++)
  for($j=$i+1;$j<sizeof($teams);$j++)
    echo $teams[$i].' - '.$teams[$j].'<br />'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T10:41:42.900

你的数组名称是什么，我可以说你使用 foreach 循环作为

```
foreach(array["id"] as $key=>$value){
 $team[$id]=$value;// got new aaray as your team
 //now make your code for match between team[id] and array[id] 

   } 
```

# restlet-2.0 - 线程安全和静态子类

> ID：13776622
> 
> 赞同：0
> 
> 时间：2012-12-08T10:29:36.087
> 
> 标签：restlet-2.0

开始：我是开源软件的新手。(Apache-Tomcat / Java / Restletframework)

这是我的问题：我正在使用 Restlet 框架构建一个应用程序。我不知道我的编码/方法是否是线程安全的！？有人可以告诉我我是否以正确的方式编码吗？还是我无可救药地失败了？

构造：

*   CLASS A 将由客户端调用。（REST 请求）
*   CLASS A（路由器）将调用 CLASS B
*   CLASS B 是我的中央请求处理程序，这个 CLASS B 调用另一个 CLASS C
*   CLASS C 是请求的实际服务，在本例中为 login-service -

如您所见，登录子类是静态的。这是一个线程安全的结构吗？

问候

甲级

```
public class MyStartApplication extends Application {

//Creates a root Restlet that will receive all incoming calls.

@Override
//public synchronized Restlet createInboundRoot() {    //synchronized?
public  Restlet createInboundRoot() {

    //Create a router that routes each call to a new instance of a Resource.
    Router router = new Router(getContext());

    // First we use MODE_START_WITH to determine the requested destination
    // A TRAPDOOR for all requests for this TEST
    // We reroute it to THE CENTRAL RESTLET-WRAPPER 
TemplateRoute route = router.attach("/testmywrapper/", RestletWrapper.class);
    route.getTemplate().setMatchingMode(Template.MODE_STARTS_WITH);

    // Return the response to caller 
    return router;

}

} 
```

B类

```
public class RestletWrapper extends ServerResource {

@Get
public JSONObject start()    {

    JSONObject returnObj = null;

    switch(operation){
    case "login":
        returnObj= LoginUser.login(queryparams);
        break;
    }

    Return returnObj
}
} 
```

C级

```
public class LoginUser {

public static JSONObject login(JSONObject queryparams) throws Exception {
    do some stuff
    return object
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:57:43.217

如果多个线程访问某些共享状态，线程安全可能会成为问题。

除非隐藏在“做一些事情”后面的代码使用静态字段或单例，否则应该不存在线程安全问题：所有变量都是登录方法的本地变量，因此不会在线程之间共享。

# php - 有没有什么好的简单的PHP插件来压缩JS？

> ID：13776626
> 
> 赞同：-1
> 
> 时间：2012-12-08T10:30:09.580
> 
> 标签：php, javascript

我想用 PHP 自动压缩我的 JS 文件。我试图在许多搜索引擎和表单中找到最好的插件。每个人都建议使用 Minify 插件。但是这个插件非常大。所以，我想要一个简单可靠的插件来压缩 JS 文件。

请帮我。

我想要一个这样的插件：

```
<?PHP
  include_once "js_compress.php";
  $file = "http://www.example.com/src/page_optimize.js";
  $data = file_get_contents($file);
  echo js_compress($data);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:59:54.370

使用 YUI 压缩器。我已经使用 php 做了类似的事情。但是要这样做，您必须使用 exec 命令创建一个 php 文件，该文件将运行 YUI 的命令。

所以首先从这里下载他们的插件：http: [//developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

然后创建一个php并将jar文件放在放置php时的同一文件夹中。

但首先在 php 中创建一个 exec 字符串，如下所示：

exec("java -jar compiler.jar --compilation_level SIMPLE_OPTIMIZATIONS --js --js_output_file ");

这将执行命令并压缩您的 js。

对于超过 1 个文件，在输入目录上循环相同的 exec 语句并 1 个 1 个地获取 js。

我希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:42:18.143

如果你只是想要基本的最小化，你可以只解析 js 并删除任何换行符。如果你想要完全最小化，我找不到任何库，但我确实找到了使用谷歌闭包 API 的指南[http://www.sitepoint.com/compress-javascript-with-php/](http://www.sitepoint.com/compress-javascript-with-php/)

# c++ - 二进制搜索在什么时候变得比顺序搜索更有效？

> ID：13776629
> 
> 赞同：2
> 
> 时间：2012-12-08T10:30:58.180
> 
> 标签：c++, performance, search

我最近一直在学习很多关于算法的知识，二进制搜索因其在大量**排序**数据中查找项目的效率而受到赞誉。但是，如果数据一开始就没有排序怎么办？二进制搜索在什么时候可以提高顺序搜索的效率，二进制搜索必须先对给定的数组进行排序，然后再进行搜索。如果有人在我希望看到一些结果之前测试过这个，我很想看看二进制搜索在什么时候通过顺序搜索。

给定一个包含 14 个元素的数组 foo[BUFF]

```
1 3 6 3 1 87 56 -2 4 61 4 9 81 7 
```

我会假设顺序排序会更有效地找到给定的数字，比如说...... 3，因为二进制搜索需要首先对数组进行排序，**然后**搜索数字 3。但是：

给定一个包含一千个元素的数组 bar[BUFF]

```
1 2 4 9 -2 3 8 9 4 12 4 56 //continued 
```

如果我没记错的话，理论上调用排序然后二进制搜索应该更有效。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T10:36:40.263

在不知道任何信息的未排序数组中，您将不得不进行线性时间搜索。

线性时间搜索对每个元素检查一次，所以它的复杂度是`O(n)`. 将其与排序进行比较。排序算法必须多次检查每个元素，复杂度为`O(n * log n)`. 因此，即使对其进行排序也比顺序搜索要慢。即使二进制搜索`O(log n)`在您只有任意排序的数据时也毫无用处。

但是，如果您要多次搜索内容，请考虑先进行排序，因为从长远来看，这会提高您的效率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T10:35:51.907

如果您需要进行多次搜索，那么在搜索之前进行排序只会更快。如果您只需要找到一个元素，那么排序会更慢，因为无论如何排序都必须在某个时候检查每个元素。

如果您要进行多次搜索，可能值得先排序，但收支平衡点（在线性搜索和预排序 + 二分搜索之间）将取决于所需的搜索次数、元素数量、排序算法使用，以及正在排序的数据。

# objective-c - 使用 iOS Dropbox SDK 对核心数据进行分块上传

> ID：13776630
> 
> 赞同：7
> 
> 时间：2012-12-08T10:31:06.227
> 
> 标签：objective-c, ios, dropbox

我有一个使用 Core Data 进行持久数据存储的 iOS 应用程序。我将 Dropbox 集成为用户执行持久存储文件 (appname.sqlite) 备份的一种方式。

UIButton 调用一个方法来查看 Dropbox 上是否已经存在文件：

```
 if([[DBSession sharedSession]isLinked])
            {
               NSString *folderName = [[self.dateFormatter stringFromDate:[NSDate date]] stringByReplacingOccurrencesOfString:@"/" withString:@"-"];
               NSString *destinationPath = [NSString stringWithFormat:@"/GradeBook Pro/Backup/%@/",folderName];
               self.metadataIndex = METADATA_REQUEST_BACKUP;
               [self.restClient loadMetadata:destinationPath];
            } 
```

loadMetadata 委托方法使用现有文件的版本号（如果存在）启动上传。

```
-(void) restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata
{
            SAVE_CORE_DATA;
            NSString *folderName = [[self.dateFormatter stringFromDate:[NSDate date]] stringByReplacingOccurrencesOfString:@"/" withString:@"-"];
            NSString *documentsDirectory = DOCUMENTS_DIRECTORY;
            NSString *sourcePath = [NSString stringWithFormat:@"%@/GradeBookPro.sqlite", documentsDirectory];
            NSString *destinationPath = [NSString stringWithFormat:@"/GradeBook Pro/Backup/%@/",folderName];
            [self.restClient uploadFile:@"GradeBookPro.sqlite" toPath:destinationPath withParentRev:[[metadata.contents lastObject]rev] fromPath:sourcePath];               
} 
```

这适用于通过完美网络连接的合理的小文件或大文件，但上传过程中的任何小错误都会取消整个过程。我想切换到使用分块上传方法，但我不知道如何实际执行 .sqlite 文件的“分块”。

我似乎找不到任何使用分块上传的示例应用程序，我可以从中学习，文档只是说要分块提供文件。

所以，我的问题是：

1.  分块上传是解决通过可能不稳定的网络连接上传大文件的用户问题的正确方法吗？

2.  你能指点我“分块”文件的示例代码/应用程序/文档吗？我对 Dropbox SDK 很满意。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-09T18:08:48.567

我将自己回答这个问题，以防其他人有同样的问题。

事实证明，我让这种方式变得比需要的更困难。Dropbox SDK 处理文件分块，因此我只需要启动传输并对委托调用做出反应。使用的方法有：

要发送文件块 - 对于第一个块，使用 nil 作为uploadId，使用 0 作为偏移量：

```
- (void)uploadFileChunk:(NSString *)uploadId offset:(unsigned long long)offset fromPath:(NSString *)localPath; 
```

发送最后一个块后，使用此方法提交上传：

```
- (void)uploadFile:(NSString *)filename toPath:(NSString *)parentFolder withParentRev:(NSString *)parentRev fromUploadId:(NSString *)uploadId; 
```

我处理委托方法如下：

```
 - (void)restClient:(DBRestClient *)client uploadedFileChunk:(NSString *)uploadId newOffset:(unsigned long long)offset fromFile:(NSString *)localPath expires:(NSDate *)expiresDate
    {
        unsigned long long fileSize = [[[NSFileManager defaultManager]attributesOfItemAtPath:[FileHelper localDatabaseFilePath] error:nil]fileSize];

        if (offset >= fileSize)
        {
            //Upload complete, commit the file.
            [self.restClient uploadFile:DATABASE_FILENAME toPath:[FileHelper remoteDatabaseDirectory] withParentRev:self.databaseRemoteRevision fromUploadId:uploadId];
        }
        else
        {
            //Send the next chunk and update the progress HUD.
            self.progressHUD.progress = (float)((float)offset / (float)fileSize);
            [self.restClient uploadFileChunk:uploadId offset:offset fromPath:[FileHelper localDatabaseFilePath]];
        }
    } 
```

由于我试图解决的主要问题是处理不良连接，因此我为失败的块上传实现了委托方法：

```
- (void)restClient:(DBRestClient *)client uploadFileChunkFailedWithError:(NSError *)error
{
    if (error != nil && (self.uploadErrorCount < DROPBOX_MAX_UPLOAD_FAILURES))
    {
        self.uploadErrorCount++;
        NSString* uploadId = [error.userInfo objectForKey:@"upload_id"];
        unsigned long long offset = [[error.userInfo objectForKey:@"offset"]unsignedLongLongValue];
        [self.restClient uploadFileChunk:uploadId offset:offset fromPath:[FileHelper localDatabaseFilePath]];
    }
    else
    {
      //show an error message and cancel the process
    }
} 
```

# java - 在 html 页面上调用加密小程序

> ID：13776632
> 
> 赞同：1
> 
> 时间：2012-12-08T10:31:23.037
> 
> 标签：java, applet, cryptography

我创建了一个小程序来执行加密、解密等加密操作。我需要在 html 页面上调用这个小程序，以便我可以向将访问这个 html 页面的用户提供这个工具。由于小程序与加密操作有关，它将从用户的系统访问用户的私人数据。

所以我需要确切的程序来在 html 页面上调用这样的小程序。在 html 页面上调用此类小程序时，我需要注意哪些事项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:44:48.183

加密小程序与其他小程序没有什么不同。此外，加密并不意味着您访问用户的私人数据。至于调用Applet，看看Oracle的教程就知道了。

要在用户系统上执行加密，您需要确保不使用需要来自 Oracle 的无限强度加密策略文件的密钥大小（除非您想要求每个用户配置他们的系统）。

要访问私有文件，您需要使用 Java 运行时系统信任的密钥对 Applet 进行签名。您可以为此使用预安装的根证书之一或导入您自己的（再次要求用户配置他们的系统）。

就我个人而言，我在公司内部做*任何事情都会*落入这个陷阱。使用功能齐全的 Java WebStart 应用程序会更好。否则，您将不得不处理多种浏览器、HTML、JavaScript 和 Applet。来自自己编写此类 Applets 的人：浏览器中的 Java*失败*了。

# wpf - 程序代码中的绑定

> ID：13776638
> 
> 赞同：0
> 
> 时间：2012-12-08T10:32:10.957
> 
> 标签：wpf, binding, procedural-programming

我正在尝试将以下 xaml 代码转换为过程代码。

```
 <docking:ToolWindow Title="{Binding ElementName=errorListView, Path=Items.Count, StringFormat={}Error List ({0}), FallbackValue=Error List}" >
                    <ListView x:Name="errorListView" BorderThickness="0">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Line" Width="40" DisplayMemberBinding="{Binding Path=PositionRange.StartPosition.DisplayLine}" />
                                <GridViewColumn Header="Char" Width="40" DisplayMemberBinding="{Binding Path=PositionRange.StartPosition.DisplayCharacter}" />
                                <GridViewColumn Header="Description" Width="300" DisplayMemberBinding="{Binding Path=Description}" />
                            </GridView>
                        </ListView.View>
                    </ListView>
                </docking:ToolWindow> 
```

但是我无法为 ToolWindow 的 Title 和 GridViewColumn 的 DisplayMemberBinding 做绑定。我想知道如何访问 PositionRange.StartPosition.DisplayLine 进行绑定。

以下是我的尝试。

```
 var toolWindow = new ToolWindow();

        var errorlistView = new ListView { Name = "errorListView", BorderThickness = new Thickness(0)};

        var gridView = new GridView();
        var gridViewColumnLine = new GridViewColumn();
        gridViewColumnLine.Header = "Line";
        gridViewColumnLine.Width = 40;
        var bindingDisplayLine = new Binding();
        bindingDisplayLine.Path = new PropertyPath("PositionRange.StartPosition.DisplayLine");
     -->BindingOperations.SetBinding(gridViewColumnLine, );
        gridView.Columns.Add(gridViewColumnLine);

        var gridViewColumnChar = new GridViewColumn();
        gridViewColumnChar.Header = "Char";
        gridViewColumnChar.Width = 40;
        var bindingDisplayChar = new Binding();
        bindingDisplayChar.Path = new PropertyPath("PositionRange.StartPosition.DisplayCharacter");
     -->BindingOperations.SetBinding(gridViewColumnChar, );
        gridView.Columns.Add(gridViewColumnChar);

        var gridViewColumnDescription = new GridViewColumn();
        gridViewColumnDescription.Header = "Description";
        gridViewColumnLine.Width = 40;
        var bindingDescription = new Binding();
        bindingDescription.Path = new PropertyPath("Description");
     -->BindingOperations.SetBinding(gridViewColumnDescription, )
        gridView.Columns.Add(gridViewColumnDescription);

        errorlistView.View = gridView;

        var bnd = new Binding();
        bnd.Source = errorlistView;
        bnd.Path = new PropertyPath("Items.Count");
     -->bnd.StringFormat = String.Format("Error List ({0})");
        bnd.FallbackValue = "Error List";
        BindingOperations.SetBinding(toolWindow, ToolWindow.TitleProperty, bnd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:01:57.457

[DisplayMemberBinding](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridviewcolumn.displaymemberbinding.aspx)属性不是依赖属性，因此不能使用 SetBinding。相反，它已经是 BindingBase 类型，因此您可以直接分配绑定对象：

```
gridViewColumnLine.DisplayMemberBinding = bindingDisplayLine; 
```

我想您还必须指定绑定的[源或 GridViewColumn 的](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.source.aspx)[DataContext](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)。

# user-interface - SuperCollider FreqScope：改变频率分辨率

> ID：13776639
> 
> 赞同：1
> 
> 时间：2012-12-08T10:32:40.610
> 
> 标签：user-interface, fft, supercollider

出于某种原因，为 FreqScope 的宽度参数设置非默认值只会使窗口变大，显示频率的宽度保持不变。有人可以帮我吗？我在 Windows 7 上使用 SC 3.5.3。提前致谢！

PS。刚更新到3.6.1，问题依旧没有解决。缓冲区大小可能存在一些问题，但由于 FreqScope.new 会自动分配一个缓冲区，我不知道如何更改它......如果这甚至是问题。

（PPS这个问题是代表别人问的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:32:40.610

是的，构造函数参数只是关于如何调整实际窗口的大小，而不是关于频率分析。FFT 分析几乎被硬编码为 2048 个 bin。

如果您查看源代码，`PlusFreqScope`则有一个名为`initFreqScope`where it sets的方法`bufSize = 2048`。您可能可以编辑它并重新编译，但您可能无法即时更改它，因为该数字用于许多课程的“准备”，例如创建合成器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T19:52:15.223

我在 SC 3.10.2 上，现在看起来这是支持语言方面的一个`bufsize`参数：[http ://doc.sccode.org/Classes/Stethoscope.html](http://doc.sccode.org/Classes/Stethoscope.html)

我正在使用这样的`bufsize`arg：`s.scope(bufsize: 128)`

（默认的 bufsize 太大，无法捕捉到失相的快速打击乐事件。在 beatboxing 时，它在视觉上非常明显，所以我就是这样找到这个问题的。）

# iphone - 添加其他控件后，UIScrollView 无法正确滚动

> ID：13776641
> 
> 赞同：0
> 
> 时间：2012-12-08T10:32:53.510
> 
> 标签：iphone, xcode4, uiscrollview

我正在创建一个 Tabbar 应用程序，在第三个 Tabbar 中，我在 CollectionView 中显示了一些产品，用户将在其中选择一个产品，它将把用户带到一个表单。直到这里它工作完美。因为我的表单字段很多，所以我决定使用 UIScrollView 控件来显示用户填写的所有字段。当我添加任何控件（如 UIImageView 或 Label 或 Button）时，ScrollView 不会滚动。我需要大小`[scroller setContentSize:CGSizeMake(320, 1100)];`，没有任何控制 ScrollView 完全滚动没有任何问题。添加任何控件后，ScrollView 无法正确滚动。我必须做什么，这样在我添加任何控件后，scrollView 将完全滚动。我正在使用 Storyboard 和 UINavigationController 进行导航。

```
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(320, 1100)];
[scroller setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"OrderBackround.png"]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:04:12.507

尝试将`UISCrollView's`属性 设置`setDelaysContentTouches`为 YES。[您将在此处](https://stackoverflow.com/a/658893/1570343)找到更多说明

# c# - Visual Studio 中字符串的快捷方式

> ID：13776647
> 
> 赞同：2
> 
> 时间：2012-12-08T10:33:52.703
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, code-snippets

在使用 Visual Studio 控制台应用程序时，我经常使用以下代码行：

```
Console.WriteLine("press [enter] to exit"); 
```

有没有办法在 Visual Studio 中设置一个快捷键，这样我就不需要每次都输入了？

出于某种原因，我可能经常使用其他代码行，因为快捷功能将是有益的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T10:36:20.940

您可以为自己定义一个[代码片段](http://msdn.microsoft.com/en-us/library/z4c5cc9b%28VS.80%29.aspx)。[使用 Visual Studio 2010 创建我们自己的代码片段](http://www.codeproject.com/Articles/226359/Creating-Our-Own-Snippets-Using-Visual-Studio-2010)是一篇很酷的文章。

对于`Console.Writeline()`方法，写`cw`并按`Tab`两次。

![在此处输入图像描述](../Images/4d8e40098160644557c8bb7144f8f213.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T11:10:22.067

将其保存在（文件名）.snippet

```
<?xml version="1.0" encoding="utf-8"?>
    <CodeSnippets
        xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
      <CodeSnippet Format="1.0.0">
        <Header>
          <Title>cwe</Title>
          <Shortcut>cwe</Shortcut>
        </Header>
        <Snippet>
          <Code Language="CSharp">
            <![CDATA[Console.WriteLine("press [enter] to exit");]]>
          </Code>
        </Snippet>
      </CodeSnippet>
    </CodeSnippets> 
```

接下来选择 tools-> code snippet manager... ，点击 import，选择你的文件并添加。

现在，如果您`cwe`在编码时键入，请单击 Tab。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T10:38:35.877

如果只是经常需要使用`Console.WriteLine()`，可以输入`c`++`w``Tab`

# c# - 在 div 中显示用户名列表

> ID：13776648
> 
> 赞同：3
> 
> 时间：2012-12-08T10:34:10.763
> 
> 标签：c#, javascript, jquery, asp.net, signalr

我是 jQuery 的新手。在我的项目中，我创建了一个类`User`，其中代码如下所示：

```
 static ConcurrentDictionary<string, User> _users = new ConcurrentDictionary<string, User>();
 //
 //  some function to add values to _users list
 //
 public List<User> GetConnectedUsers()
 {
      return _users.Values.ToList();
 } 
```

我想在`div`#showUsernames 中显示这个值列表。如何通过使用 jQuery 来做到这一点？

我尝试了以下没有显示任何内容

```
 /*display your contacts*/
    $('#showUsernames').append(function(){
        chat.server.getConnectedUsers();
    }); 
```

其中`chat.server`（signalr）调用服务器端代码（聊天类）..
我认为解决方案与signalr无关。

如果上面的描述还不够，那么你可以**[在这里查看我的代码](https://github.com/venkateshwar/SignalR-Chat-application/blob/master/file.js)**

编辑： **用户.cs**

```
public class User
{
    public User(string ConnID, string Username)
    {
        Name = Username;
        ConnectionID = ConnID;
    }
    public string Name { get; set; }
    public string ConnectionID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:52:01.490

对服务器的调用是异步的（就像所有 javascript ajax 调用一样）。附加一个 .done 处理程序以获取结果（这都在文档[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)中）。

将您的代码更改为如下所示：

```
chat.server.getConnectedUsers().done(function(users) {
    for(var i = 0; i < users.length; ++i) {
        // Write javascript here to append users to the list
    }
}); 
```

# javascript - jQuery.data() 是否存储 jQuery DOM 对象的引用或深层副本？

> ID：13776653
> 
> 赞同：12
> 
> 时间：2012-12-08T10:34:52.490
> 
> 标签：javascript, jquery

我正在使用 jQuery.data() 来存储 jQuery DOM 对象引用：

```
myObj.data('key', $('#element_id')); 
```

我会经常使用它（通常用于相同的 DOM 对象），所以我不想占用太多内存。jQuery 是存储引用，还是存储 DOM 对象的深层副本？在这种情况下，我认为最好存储元素 id 而不是元素引用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T10:40:49.750

您构建的 jQuery 对象`$('#element_id')`包含

*   对上下文的引用（此处的文档）
*   选择器
*   cached ：找到的 dom 节点的长度（在您的情况下为 0 或 1）和引用
*   指向原型的指针（以便您可以调用方法）

您存储在数据中（在节点中）的是 jQuery 对象。该对象不包含所引用 DOM 节点的任何深层副本，因此您存储的不是深层副本，而是一个主要包含字符串和一些指针的小对象。

并且由于 DOM 节点引用被缓存，它比仅具有 id 更有效（稍微，因为通过 id 查找节点总是很快，但如果您有一个更复杂的选择器，这会有所不同）。

所以在我看来，你所做的事情是好的和有效的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T10:45:21.540

您总是可以直接查看源代码，欢迎开源：）

[data.js 的第 51 和 52 行](https://github.com/jquery/jquery/blob/master/src/data.js#L51-L52)有有用的评论：

> // 可以将对象传递给 jQuery.data，而不是键/值对；这得到
> 
> // 浅拷贝到现有缓存中

所以我猜这是一个浅拷贝！

更新 07/14 - 该链接是 head:master 所以现在完全过时了，这是我所说的规范链接：[截至 16ba6ff](https://github.com/jquery/jquery/blob/c33108cad16ba6ff831d5cbc45b9dfbf12650e0e/src/data.js#L93)

# jsf-2 - 如何自定义 Primefaces 的 Growl 所需的验证消息

> ID：13776654
> 
> 赞同：4
> 
> 时间：2012-12-08T10:34:55.187
> 
> 标签：jsf-2, input, primefaces, messages, requiredfieldvalidator

在 JSF 2.0 中，如何覆盖所需的消息？我正在使用 Primefaces。这是我的代码：

```
<h:body>
    <p:growl id="growl" showDetail="true"/>
    <h:panelGroup layout="block" styleClass="login-div">
        <h:form id="login">
            <p:panel header="Login">
                <h:panelGrid columns="2">
                    <p:outputLabel for="username" value="Username" />
                    <p:inputText id="username" value="#{authController.username}"
                        autocomplete="off" required="true"
                        requiredMessage="Username is required" />
                    <p:outputLabel for="password" value="Password" />
                    <p:password id="password" value="#{authController.password}"
                        autocomplete="off" required="true"
                        requiredMessage="Password is required" />
                </h:panelGrid>
                <p:commandButton id="submit" value="Login"
                    actionListener="#{authController.login}" update=":growl" />
            </p:panel>          
        </h:form>
    </h:panelGroup>
    <p:ajaxStatus styleClass="ajaxLodingStatus">
        <f:facet name="start">
            <p:graphicImage value="/resources/images/loading.gif" />
        </f:facet>
        <f:facet name="complete">
            <p:outputLabel value="" />
        </f:facet>
    </p:ajaxStatus>
</h:body> 
```

现在`Growl`显示：“需要用户名”作为摘要和详细信息`FacesMessage`。密码字段也是如此。

现在从`actionListener`命令按钮中，我以我想要的方式显示登录尝试失败的时间：

```
getFacesContext().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid Credential")); 
```

但我想显示“无效输入”作为摘要和“需要用户名”作为详细信息。

如果我从后端验证这两个输入字段并将其添加`FacesMessage`为：

```
if(username == null || username.trim().length() == 0) {
    getFacesContext().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Invalid input", "Username is required."));
} 
```

它显示了我需要的东西。但是这样就不需要`required="true"`在输入组件中指定属性了。

但我想使用这个`required`属性也想自`FacesMessage`定义`Growl`. 我怎样才能做到这一点？

* * *

更新：

这是我的支持bean：

```
@ManagedBean(name = "authController")
@ViewScoped
public class AuthController extends BaseWebController implements Serializable {

    private static final long serialVersionUID = 2894837128903597901L;

    private String username;
    private String password;

    public AuthController() {
        super();
    }

    public void login(ActionEvent event) {
        getFacesContext().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid Credential"));
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

目前`actionaListener`只有在有一些输入时才会触发。否则，当字段为空白时，将`Growl`显示：

![在此处输入图像描述](../Images/48b66a921beee7f001301809e0b4f8dd.png)

点击登录按钮后：

![在此处输入图像描述](../Images/9065f03ea911b12152e6c07a3d457244.png)

如[展示柜所示](http://www.primefaces.org/showcase/ui/growl.jsf)

我想要的是，当输入用户名无法按要求验证时，`Growl`将显示：

*   摘要：输入无效。
*   详细信息：用户名是必需的。

对于输入密码：

*   摘要：输入无效。
*   详细信息：需要密码。

我怎样才能做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T18:19:38.947

我找到了解决方案：

我需要自定义验证错误消息。

我已经创建了 messages.properties 文件，我在其中写了：

```
javax.faces.component.UIInput.REQUIRED=Invalid input.
javax.faces.component.UIInput.REQUIRED_detail={0} is required. 
```

并在 faces-config 中注册为：

com.edfx.adb.common.properties.messages

我得到了这个：

![在此处输入图像描述](../Images/f98c92170b6e884b3a997e2e150ac448.png)

我还`requiredMessage`从输入组件中删除了该属性。

一些有用的链接：

*   另一个[SO 线程](https://stackoverflow.com/questions/2514175/displaying-custom-error-message-for-a-blank-field-in-a-simple-jsf-application)。
*   [JSF 2 消息属性](http://svn.apache.org/repos/asf/myfaces/core/branches/2.0.x/api/src/main/resources/javax/faces/Messages.properties)
*   [在 JSF 2.0 中自定义验证错误消息](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:38:25.127

`requiredMessage`s 显示在元素`p:message`中。如果您想显示咆哮消息，您已经找到了答案。

要了解如何使用`p:message`，请参阅[PrimeFaces 展示](http://www.primefaces.org/showcase/ui/messages.jsf)

# android - 我在哪里可以找到 android maps.google.com 意图 URI 的文档

> ID：13776655
> 
> 赞同：0
> 
> 时间：2012-12-08T10:34:58.550
> 
> 标签：android, google-maps

我发现了一些有用的 SO 问题，但我需要此 api 及其 url 参数的完整参考指南。

[这个](https://stackoverflow.com/questions/2660201/what-parameters-should-i-use-in-a-google-maps-url-to-go-to-a-lat-lon)

已编辑

```
intent = new Intent(Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?" + "saddr="
                            + journey.getSourceGPSX() + ","
                            + journey.getSourceGPSY() + "&daddr="
                            + journey.getDestinationGPSX() + ","
                            + journey.getDestinationGPSY()));

intent.setClassName("com.google.android.apps.maps",
                    "com.google.android.maps.MapsActivity"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:55:11.627

这里有一个完整的 api 参考：

[https://developers.google.com/maps/](https://developers.google.com/maps/)

安卓在这里：

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

这里还有一堆你可能会发现有用的网络服务：

[https://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:00:11.067

不确定我是否真的将其归类为 API，您只是在引用一个 URI。我认为除了谷歌在任何地方都支持的各种格式的源和目标之外，你不能以查询参数的方式传递给该 URI。例如这篇文章提到了几种不同的格式：

[有没有办法将参数传递给谷歌地图的获取方向功能？](https://stackoverflow.com/questions/3217068/is-there-a-way-to-pass-arguments-to-google-maps-get-directions-functionality)

但除此之外，我认为您不会错过任何“隐藏”的内容。

# c# - 使用 nHibernate 的 CreateSQLQuery 时如何保留列顺序？

> ID：13776666
> 
> 赞同：6
> 
> 时间：2012-12-08T10:36:59.750
> 
> 标签：c#, nhibernate, fluent-nhibernate

**上下文**
我正在创建一个 Web 应用程序，其功能之一是允许通过 UI 进行数据库查询。对于持久性，它使用 nHibernate ORM。下面是处理传入 SQL 查询的存储库方法：

```
public IList ExecuteSqlQuery(string sqlQuery)
{
    var query = Session.CreateSQLQuery(sqlQuery);
    var queryResult = query.SetResultTransformer(Transformers.AliasToEntityMap).List();

    return queryResult;
} 
```

**问题**
上面的方法将返回一个字典列表，每个字典包含具有**Key** = *ColumnName*和**Value** = *ColumnValue的***DictionaryEntry**对象。

 ******这一切都很好，只是列名的顺序与原始 SQL 查询中指定的顺序不同。例如，以下 SQL 查询：

```
select FirstName, LastName, c.Name   
from SoftwareDeveloper sf  
join Certification c on  sf.SoftwareDeveloperId = c.SoftwareDeveloperId 
```

, 为每一行返回类似：

```
["FirstName"] = "John"
["Name"] = "70-515  MCTS, .NET Framework 4, Web Applications"
["LastName"] = "Doe" 
```

请注意，不保留列的顺序。它应该是：

```
["FirstName"] = "John"  
["LastName"] = "Doe"  
["Name"] = "70-515  MCTS, .NET Framework 4, Web Applications" 
```

**更新** 在上面的示例中，字典的键是按名称排序的，但这仅适用于本示例，故意保持简单。对于较大的查询，键（=列）没有排序。

**在此上下文中的问题**
（nHibernate/CreateSQLQuery），如何保留原始查询中指定的列顺序？

**UPDATE#2**
**解决方案**
通过创建 IResultTransformer 的以下自定义实现来解决：

```
public class DictionaryResultTransformer : IResultTransformer
{
    #region IResultTransformer Members
    public IList TransformList(IList collection)
    {
        return collection;
    }

    public object TransformTuple(object[] tuple, string[] aliases)
    {
        var result = new Dictionary<string, object>();
        for (int i = 0; i < aliases.Length; i++)
        {
            result[aliases[i]] = tuple[i];
        }
        return result;
    }
    #endregion
} 
```

在上面的代码中，别名是列名。

资料来源：
[nhibernate 是否可以将查询作为 IDictionary 而不是实体类返回？](https://stackoverflow.com/questions/3638252/is-it-possible-for-nhibernate-to-return-a-query-as-an-idictionary-instead-of-an)
[https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Transform/AliasToEntityMapResultTransformer.cs](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Transform/AliasToEntityMapResultTransformer.cs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:39:36.240

您不能将结果作为字典，因为它们没有定义任何键顺序。因此，您必须将 AliasToEntityMap 的使用替换为构建保留顺序的数据结构（实现 IResultTransformer）的东西。如果您给 SortedDictionary 提供一个在内部从列名映射到列索引的比较器，它可能会起作用。

请注意，如果您直接调用 List() 而不使用结果转换器，您应该得到一个对象数组列表，其中元素的顺序遵循 select 子句中指定的顺序。******

# codeigniter - Codeigniter 购物车：特别优惠，关于购物车内容的自定义价格 - 如何处理？

> ID：13776670
> 
> 赞同：0
> 
> 时间：2012-12-08T10:37:40.490
> 
> 标签：codeigniter, cart

我用购物车成功创建了简单的网络应用程序。

现在我需要实施一些特别优惠。

示例 1：如果客户添加了 2 件某种产品 - 第二件的成本应降低 30%。

示例 2：如果客户添加 product_1 和 product_2 - 那么我必须免费添加产品 3。

实现业务逻辑本身没有问题。

**问题是，我在 Codeigniter 购物车中没有产品详细信息。**

项目对象/数组中有`id`、`name`、`qty`、和字段。`price``subtotal``options`

要在每次购物车更改时不查询数据库的情况下重新计算价格，我需要一些额外的字段，比如组/类别，它告诉我该产品适用什么特别优惠。

此外 - 我需要将基本价格存储在某个地方，因为当客户从购物车中移除一些产品时 - 我需要将旧价格放在那里。

**我应该把这些附加信息放在哪里？**

`options`字段已被使用...

我不想在每次购物车更新时查询数据库（我希望我的 Web 应用程序非常快，并且我想要最小的服务器负载）。

**`rowid`当我更改某些购物车商品的价格时，我会期待这些问题吗？**

我问这个问题，因为购物车唯一的“rowid”是项目`id`和`options`数组的 md5 校验和。我的应用程序将对具有相同选项的相同产品使用不同的价格（例如一件正常价格，另一个 70% 的价格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:27:48.193

Codeigniter 购物车将帮助您入门，但对于任何类型的定制，我建议您自己制作购物车，这会容易得多。请记住，购物车所要做的就是存储产品 ID 和数量。就是这样。其他一切都是为了查看购物车和创建订单。订单总额与购物车是分开的，因为对于大多数订单会有其他费用，如运费/税费。和/或可能会有改变最终价格的促销活动。

因此，您可能决定在购物车中包含产品名称以使其更易于显示。并且存储船舶重量是合理的。但即使将价格存储在购物车中也可能很危险。如果在购物者购物时涨价或降价怎么办？这些可能是边缘情况，但它向您展示了购物车中的信息有多“陈旧”。

您引用的示例很棒，因为您很快就会看到 - 购物车是为一次跟踪一个订单项而构建的。对于任何类型的逻辑，例如 - 如果您购买其中 3 个，您将免费获得第三个 - 您可以将这种逻辑构建到购物车中 - 但它很快就会变成一团糟的意大利面条！

那么该怎么办？获取购物车对象 - 与您的购物车项目 - 并将其传递给促销模型。促销模型循环遍历购物车中的所有商品 - 然后进行调整 - 将其传递给您的订单方法。通过使用促销模型，我们将促销的业务规则与购物车分开。最重要的是

**我们不会改变购物车中的任何东西！**

我们正在将促销应用于购物车中的商品。更加灵活，并且很容易向人们展示他们节省了多少钱，因为您没有尝试重写原始购物车定价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:14:36.943

我意识到，这`options`可以是数组数组，我可以在那里存储任何额外的数据。

我将使用该数组，我认为没有必要扩展标准 Cart 库。

# reportlab - pagesize 在 Reportlab simpledocTemplate 中不起作用

> ID：13776672
> 
> 赞同：2
> 
> 时间：2012-12-08T10:37:59.000
> 
> 标签：reportlab, page-size

我正在使用 ReportLab 生成 PDF 报告。我使用了 SimpleDocTemplate 并设置 pageSize = A5。但是在构建 PDF 之后，当我打开创建的文件时，页面的大小是 A4。

```
doc = SimpleDocTemplate(file_name, pageSize = A5)
doc.build(report) 
```

我尝试了其他页面大小，但创建的文件大小没有改变，仍然是 A4！我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:57:21.790

我的问题解决了！除了页面大小及其工作之外，我刚刚使用了横向或纵向设置！

```
doc = SimpleDocTemplate(file_name)
doc.pagesize = portrait(A5)
doc.build(report) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T22:14:10.373

但是你从哪里导入**Portrait()**方法和**A5**值呢？

# android - 隐藏摄像头api在哪里？

> ID：13776674
> 
> 赞同：0
> 
> 时间：2012-12-08T10:38:38.640
> 
> 标签：android, camera

我正在寻找一种方法来控制相机的快门/曝光时间。不幸的是，这对于公共 API 是不可能的。

我发现 Android [Camera App FV-5](https://play.google.com/store/apps/details?id=com.flavionet.android.camera.pro&hl=de)正是这样做的，它确实适用于 Galaxy S3。

所以我的问题是：如何做不可能的事？:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:10:35.090

至少在 android 中没有这样的隐藏 API。android最多可以列出相机有什么能力，你可以传递这些参数来拍照。这些参数因设备而异。您提到的应用程序只是抓取许多连续的帧并通过代码（堆叠）将它们相加。阅读他们的常见问题解答：http: [//www.camerafv5.com/faq.php#long-exposure-resolution](http://www.camerafv5.com/faq.php#long-exposure-resolution)。

# scala - Scala：递归搜索避免循环

> ID：13776682
> 
> 赞同：1
> 
> 时间：2012-12-08T10:40:16.830
> 
> 标签：scala, search, recursion

如何编写避免循环的递归搜索。

我的课是这样的：

```
class Component(var name: String, var number: Int, var subComponent: Set[Component]) 
```

现在我需要一种方法来检查一个组件是否包含在其子组件内或在其子组件的子组件之间等等。避免由其他组件引起的可能循环。

我的递归搜索方法必须具有以下签名，其中 subC 是 comp 的 Set [component]。

```
def content (comp: Component, subC: Set[Component]) : Boolean = {
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:58:25.620

`visited`一种方法是使用累加器定义内部函数。

```
def content (comp: Component, subC: Set[Component]) : Boolean = {
    def contained(comp: Component, subC: Set[Component], visited: Set[Component]): Boolean = {
        // over time (recursion) add components to visited
        // you can then use 
        //    visited contains comp
        // to check existence and 
        //    visited diff subC
        // to get the unvisited components

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:02:00.423

实现这一点的最简单方法是保留一组已访问的组件。这可以定义为方法中的方法。该方法将执行递归。它将访问集作为一个额外的参数，并以一个空集启动。

# php - 在 whm 中隐藏 mysql 错误

> ID：13776685
> 
> 赞同：0
> 
> 时间：2012-12-08T10:40:39.420
> 
> 标签：php, mysql

我有很少的 sql 查询，当用户登录时它执行得很好，因为那时用户将有一些 id，但是当客人点击这些链接时，我收到错误并且显示完整的 sql 查询，这是一个很大的安全风险。我想禁用错误报告，所以我通过 whm 禁用了 php.ini 中的错误报告

我正在寻找一些方法来禁用完全错误，当我想要时。我知道它可以通过在 mysql 查询的开头添加 @ 来完成，但我不想在所有查询中添加 @ 我正在寻找一个简单的解决方案，通过 whm 只是禁用并启用喜欢。

这是我的错误

```
 QL query error!
Error infomation:
[SQL]
 select * from `blacks` where bid= and uid=21329 

 [Error]
You have an error in your SQL syntax; check the manual that corresponds to your        MySQL      server version for the right syntax to use near 'and uid=21329' at line 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:49:07.133

要禁止错误显示在 PHP 脚本的输出中，请将[display_errors](http://php.net/display-errors)设置为php.ini`off`或`0`在[php.ini](http://php.net/configuration)中。[您可以通过查看phpinfo](http://php.net/phpinfo)找到正在加载的 php.ini 文件。

只需创建一个新的 PHP 脚本并将以下行放入该脚本中，然后运行它，您将看到当前加载的所有 PHP 配置指令的值：

```
<?php phpinfo(); ?> 
```

但是，您真的不想完全禁用[error_reporting](http://php.net/error-reporting)。**在生产中记录错误并保持 display_errors 关闭是很重要的**。[记录错误](http://php.net/error-log)很重要，因为它将帮助您识别何时发生错误。否则，您将永远不知道代码何时出现问题，因此无法修复它。

强烈建议不要使用[错误控制运算符](http://php.net/language.operators.errorcontrol) `@`，因为它在语义上等同于禁用 error_reporting，这意味着您永远不会知道您的脚本是否因致命错误而死。

* * *

还需要注意的是，您必须重新启动 PHP 才能使对 php.ini 所做的更改生效。例如，如果您将 *mod_php* 与*apache httpd*一起使用，则意味着完全重新启动您的 Web 服务器。这可能需要完全停止然后重新启动*httpd*备份（因为在某些设置中使用 restart 命令可能不会这样做）。如果您使用的是 CLI 或 CGI，则应在每次请求时自动重新启动该过程。一些 fcgi/mod_fcgid 设置和 FPM 设置可能需要确保所有 fastcgi 工作人员完全停止并由其父进程重新生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:50:09.810

您可以使用 error_reporting(0) 禁用错误报告；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:52:48.853

您需要在 php.ini 中将 display_errors 指令设置为 off。您的错误应该写入日志，而不是完全关闭错误报告。

# c# - 实体框架代码首先使用 T4 模板

> ID：13776686
> 
> 赞同：6
> 
> 时间：2012-12-08T10:40:40.917
> 
> 标签：c#, .net, visual-studio-2010, entity-framework-4.1, t4

我将使用 T4 模板创建代码优先视图，如下文所述：

[文章在这里](http://blog.3d-logic.com/2012/06/13/entity-framework-codefirst-view-generation-templates-on-visual-studio-code-gallery/)

但这会导致

> *运行时异常*

如下所示。为什么？

我的连接字符串在`App.config`.

我的应用程序是**基于 N 层的**。所以**DbContext 驱动的类在数据层**中。

这是**我的连接字符串**：

```
<add name="PawLoyalty" connectionString="Server=.;database=PawLoyalty;Trusted_connection=true;pooling=true;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

我将 EF 4.1 与 2010 一起使用。

> *运行转换：System.Reflection.TargetInvocationException：调用的目标已引发异常。*
> *---> System.ArgumentException：参数“nameOrConnectionString”不能为空、空或仅包含空格。*
> 
> 在 System.Data.Entity.ModelConfiguration.Utilities.RuntimeFailureMethods.ReportFailure(ContractFailureKind contractFailureKind, String userMessage, String conditionText, Exception innerException)
> 在 System.Data.Entity.DbContext..ctor(String nameOrConnectionString)
> 在 PawLoyalty.Data.DataCatalog.. D:\My Blog\Test Projects\PawLoyalty\PawLoyalty\PawLoyalty.Data\DataCatalog.cs 中的 ctor(Boolean allowLazyLoading)：D:\My Blog\Test Projects\
> 中 PawLoyalty.Data.DataCatalog..ctor() 的第 31 行PawLoyalty\PawLoyalty\PawLoyalty.Data\DataCatalog.cs:line 26
> --- 内部异常堆栈跟踪结束 ---
> 在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）
> 在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean skipCheckThis，Boolean fillCache，StackCrawlMark 和 stackMark）
> 在 System.RuntimeType.CreateInstanceDefaultCtor (Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark & stackMark)
> at System.Activator.CreateInstance(Type type, Boolean nonPublic)
> at System.Activator.CreateInstance(Type type)
> at Microsoft.VisualStudio.TextTemplatingD6E95B37BD0790EBBCC7DB570AD3E2AC.GeneratedTextTransformation.GetEdmx(Type contextType)
> 
> 在 Microsoft.VisualStudio.TextTemplatingD6E95B37BD0790EBBCC7DB570AD3E2AC.GeneratedTextTransformation.TransformText()在 Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation 的 Microsoft.VisualStudio.TextTemplatingD6E95B37BD0790EBBCC7DB570AD3E2AC.GeneratedTextTransformation.GenerateViews(String contextTypeName
> )

**更新**

我的**DbContext 派生类**如下所示。

```
 [Export(typeof(ISecurityDataCatalog))]
    [Export(typeof(IMappingDataCatalog))]
    [Export(typeof(IPawLoyaltyDataCatalog))]
    [PartCreationPolicy(CreationPolicy.NonShared)]
    public class DataCatalog : DbContext, IPawLoyaltyDataCatalog, ISecurityDataCatalog, IMappingDataCatalog
    {

        public static string ConnectionString { get; set; }
        public static string AccountToken { get; set; }

        public DataCatalog()
            : this(false)
        {
        }

        public DataCatalog(bool allowLazyLoading = false)
            : base(ConnectionString)
        {
            Configuration.LazyLoadingEnabled = allowLazyLoading;
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.ComplexType<DiscountValue>().Property(d => d.Fixed).HasPrecision(18, 2);
            modelBuilder.ComplexType<DiscountValue>().Property(d => d.Percentage).HasPrecision(18, 4);
            modelBuilder.Entity<InvoiceFee>().Property(d => d.Fixed).HasPrecision(18, 2);
            modelBuilder.Entity<InvoiceFee>().Property(d => d.Percentage).HasPrecision(18, 4);
            modelBuilder.Entity<InvoiceFee>().Property(d => d.Total).HasPrecision(18, 4);
            modelBuilder.Entity<Invoice>().Property(d => d.Discount).HasPrecision(18, 2);
            modelBuilder.Entity<Invoice>().HasRequired(i => i.Appointment).WithOptional(a => a.Invoice).WillCascadeOnDelete(false);
            modelBuilder.Entity<InvoiceItem>().Property(d => d.Price).HasPrecision(18, 2);
            modelBuilder.Entity<InvoiceItem>().Property(d => d.LatestTotal).HasPrecision(18, 2);
            modelBuilder.Entity<InvoiceItem>().HasRequired(i => i.Allocation).WithOptional(a => a.InvoiceItem).WillCascadeOnDelete(false);
            modelBuilder.Entity<InvoicePayment>().Property(d => d.Amount).HasPrecision(18, 4);
            modelBuilder.Entity<ServicePrice>().Property(d => d.Price).HasPrecision(18, 2);
            modelBuilder.Entity<ServiceBreedPrice>().Property(d => d.Price).HasPrecision(18, 2);
            modelBuilder.Entity<ProviderPolicy>().Property(d => d.SalesTax).HasPrecision(18, 4);
            modelBuilder.Entity<ProviderCredit>().Property(d => d.Balance).HasPrecision(18, 2);
            modelBuilder.Entity<CombinedServiceDiscountDefinition>().HasRequired(c => c.PrimaryService).WithMany().WillCascadeOnDelete(false);
            modelBuilder.Entity<CombinedServiceDiscountDefinition>().HasRequired(c => c.SecondaryService).WithMany().WillCascadeOnDelete(false);

            modelBuilder.Entity<MedicalRecord>().HasRequired(m => m.Pet).WithOptional(p => p.Medical).WillCascadeOnDelete(false);
            modelBuilder.Entity<BehavioralRecord>().HasRequired(b => b.Pet).WithOptional(p => p.Behavioral).WillCascadeOnDelete(false);
            modelBuilder.Entity<DietRecord>().HasRequired(d => d.Pet).WithOptional(p => p.Diet).WillCascadeOnDelete(false);

            modelBuilder.Entity<Provider>().HasOptional(p => p.Profile).WithRequired(p => p.Provider).WillCascadeOnDelete(true);

            modelBuilder.Entity<ProviderProfile>().HasOptional(p => p.Policy).WithRequired(p => p.Profile).WillCascadeOnDelete(true);
            modelBuilder.Entity<ProviderProfile>().HasOptional(p => p.CustomerRequirements).WithRequired(p => p.Profile).WillCascadeOnDelete(true);
            modelBuilder.Entity<ProviderProfile>().HasOptional(p => p.PaymentProfile).WithRequired(p => p.Profile).WillCascadeOnDelete(true);

            modelBuilder.Entity<Resource>().HasMany(r => r.Availability).WithRequired(a => a.Resource).WillCascadeOnDelete(true);

            Database.SetInitializer<DataCatalog>(null);
            base.OnModelCreating(modelBuilder);
        }

        public const string ServiceKey = "PawLoyalty";

        public DbSet<StreetAddress> StreetAddresses { get; set; }
        public DbSet<Appointment> Appointments { get; set; }
        public DbSet<Invoice> Invoices { get; set; }
        public DbSet<InsuranceCarrier> InsuranceCarriers { get; set; }
        public DbSet<PromotionCode> PromotionCodes { get; set; }

        // Provider Classes
        public DbSet<Provider> Providers { get; set; }
        public DbSet<ProviderProfile> ProviderProfiles { get; set; }
        //public DbSet<ProviderResourceItem> ProviderResourceItems { get; set; }
        public DbSet<Allocation> ResourceAllocations { get; set; }
        public DbSet<ResourceAvailability> ResourceAvailabilities { get; set; }
        public DbSet<Resource> Resources { get; set; }

        /// <summary>
        /// Wraps the object context detach method
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="t"></param>
        public void Detach<T>(T t) where T : class
        {
            // TODO: Is this needed? Hidden behind an interface in CTP5 implying infrequent usage.
            ((IObjectContextAdapter)this).ObjectContext.Detach(t);
        }

        // Owner Classes
        public DbSet<MedicalRecordOrder> Orders { get; set; }
        public DbSet<Owner> Owners { get; set; }
        public DbSet<Pet> Pets { get; set; }
        public DbSet<Breed> Breeds { get; set; }
        public DbSet<PetProvider> PetProviders { get; set; }

        // Security Catalog Items
        public DbSet<User> Users { get; set; }

        // Bing Maps Catalog items
        public DbSet<KnownLocation> KnownLocations { get; set; }
        public DbSet<KnownPostalCode> KnownPostalCodes { get; set; }

        public DbSet<QueuedEmail> QueuedEmails { get; set; }
        public DbSet<InvoicePayment> InvoicePayments { get; set; }
        public DbSet<Employee> Employees { get; set; }
        public DbSet<Schedule> Schedules { get; set; }
        public DbSet<Subscription> Subscriptions { get; set; }
        public DbSet<EmailSubscription> EmailSubscriptions { get; set; }

        public DbSet<ResourceAvailabilityUpdate> ResourceAvailabilityUpdates { get; set; }
        public DbSet<EmployeeAvailabilityUpdate> EmployeeAvailabilityUpdates { get; set; }
        public DbSet<InvoiceConfiguration> InvoiceConfigurations { get; set; }

        public DbSet<Vaccine> Vaccines { get; set; }
        public DbSet<TourEmail> TourEmails { get; set; }
        public DbSet<ReservationRequest> ReservationRequest { get; set; }
        //public DbSet<ReservationRequestPets> ReservationRequestPets { get; set; }
        public DbSet<Vaccination> Vaccinations { get; set; }
        public DbSet<SpecialInstruction> SpecialInstructions { get; set; }

        public DbSet<Product> Products { get; set; }
        public DbSet<ProductCategory> ProductCategories { get; set; }
        public DbSet<VendorStock> VendorStocks { get; set; }
        public DbSet<ShoppingCart> ShoppingCarts { get; set; }
        public DbSet<SaleDetail> SaleDetails { get; set; }
        public DbSet<Sale> Sales { get; set; }
        public DbSet<SalePayment> SalePayments { get; set; }

        public DbSet<PetService> PetServices { get; set; }
        public DbSet<PetServicePrice> PetServicePrices { get; set; }

        public DbSet<MiscProperty> MiscProperties { get; set; }
        public DbSet<ProviderMiscProperty> ProviderMiscProperties { get; set; }

        public DbSet<ProviderAuthorizedCreditCard> ProviderAuthorizedCreditCards { get; set; }
        public DbSet<AuthorizedCreditCard> AuthorizedCreditCards { get; set; }
        public DbSet<ProviderPackage> ProviderPackages { get; set; }

        public DbSet<ProviderEmailPreference> ProviderEmailPreferences { get; set; }
        public DbSet<EmailType> EmailTypes { get; set; }

        public DbSet<RetailSaleReturn> RetailSaleReturns { get; set; }
        public DbSet<ServiceRefund> ServiceRefunds { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T18:55:39.783

问题是 DbContext 派生类的 (DataCatalog)**参数少构造函数连接字符串问题。**

**在@Pawel**的支持下，我解决了我的问题。您只需要为无参数构造函数提供连接字符串，如下所示。

```
 public class DataCatalog : DbContext
    {
        public static string ConnectionString { get; set; }

        public DataCatalog() : base(ConnectionString ?? "PawLoyalty")
        {

        }  
    } 
```

**注意 1：**如果您在单独的层（类库项目）中，则必须在**App.Config**文件中提供连接字符串。

**注意 2：**在完成所有更改后，您必须在再次运行 T4 模板之前**编译您的项目**

希望这对将来的某些人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:50:46.473

我写这个只是基于你的错误代码。您的错误代码说：

> 参数“nameOrConnectionString”不能为空、空或仅包含空格。

所以你`connection string`有错误。检查你的连接字符串在你的`web config`. 确保您的连接字符串没有空格。

# ajax - Google AJAX 抓取问题，返回快照 URL 而不是 hashbang URL

> ID：13776689
> 
> 赞同：0
> 
> 时间：2012-12-08T10:40:52.663
> 
> 标签：ajax, apache, seo

我刚刚实现了ajax爬取，我的网址是：[http](http://acs-germany.de/#!en/homepage) ://acs-germany.de/#!en/homepage 该网站刚刚被索引，我在这里查看搜索结果： [https://www .google.at/#hl=en&q=+site:acs-germany.de+acs-germany.de](https://www.google.at/#hl=en&q=+site:acs-germany.de+acs-germany.de)

您会注意到被编入索引的 URL 包含 "fragments" 。这是我系统上存在的一个文件夹，其中包含“ajax”（或更好的 dhtml）内容的 HTML 快照。当跟踪该 URL 时，会提供快照，这反过来又会破坏应用程序，因为应用程序在半生不熟的标记之上被实例化，从而使站点 FUBAR。

我使用的是 apache，我与 URL 重写相关的规则如下：

```
Options -MultiViews
#Rewrite queries from google to the right files
RewriteEngine On

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$
RewriteRule ^(.*) http://acs-germany.de/fragments/%1.html? 
```

直截了当：该站点位于[http://acs-germany.de](http://acs-germany.de)，当 JS 处于活动状态时，它会设置一个 hashbang，将浏览器的位置指向[http://acs-germany.de/#!en/homepage](http://acs-germany.de/#!en/homepage) 。在这个程度上，我期望带有 hashbangs 的 url 是被谷歌索引的，而不是重写的 URL。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T09:50:04.983

我遇到了同样的问题，我修复了它，从 RewriteRule 中删除了 http:// 部分。尝试这个

```
RewriteRule ^(.*) /acs-germany.de/fragments/%1.html? 
```

或者

```
RewriteRule ^(.*) /fragments/%1.html? 
```

拥有 http:// 会导致 Apache “重定向”而不是“重写”URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:31:52.310

您在片段文件夹中的文件是可索引的，因此如果 Google 找到它们，它们将被编入索引。

Google 将检查您的网址的 _escaped_fragment_= 版本以获取内容。您正在 302 将其重定向到片段文件夹版本。

这不是您的 .htaccess 代码所暗示的。有没有你没有告诉我们的[R]？

我怀疑重定向会混淆谷歌的系统，他们最终会索引你的片段文件夹文件。

我建议您简化事情并完全按照 Google 的要求去做。_escaped_fragment_= URL 应该直接返回页面的基本内容。

然后您可能希望将这些片段文件夹文件 301 重定向回 #! 版本以鼓励 Google 索引正确的内容。

老实说，我看不出有任何理由让这个网站基于 AJAX。每次点击似乎都完全重新创建了页面。AJAX 只是更新页面的一部分。

# android - Android：在同一水平线上将一个按钮向左对齐，第二个按钮向右对齐

> ID：13776693
> 
> 赞同：3
> 
> 时间：2012-12-08T10:41:54.133
> 
> 标签：android, xml, android-layout

我想以一种方式显示两个按钮，一个按钮应与屏幕左侧对齐，另一个应在同一水平线上与屏幕右侧对齐。`Settings`按钮已左对齐，但我无法右对齐`About`按钮。这是活动 xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainPageActivity"

 >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="95dp"
    android:layout_marginTop="96dp" >
</RelativeLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/relativeLayout1"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="24dp"
    android:text="@string/welcomeText"
    android:textAppearance="?android:attr/textAppearanceLarge"
    />

<Button android:text="Find out Now!" 
    android:id="@+id/button1" 
    android:background="@drawable/selectbutton" 
    style="@style/FindOutButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="54dp"/>

<Button android:text="Settings" 
    android:id="@+id/button2" 
    android:background="@drawable/selectbutton" 
    style="@style/SettingsButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginTop="204dp"/>

<Button android:text="About" 
    android:id="@+id/button3" 
    android:background="@drawable/selectbutton" 
    style="@style/AboutButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_toRightOf="@+id/button2"
    android:layout_marginTop="204dp"/>

</RelativeLayout> 
```

**`strings.xml:`**

```
<style name="FindOutButtonStyle">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:gravity">center</item>
    <item name="android:layout_margin">3dp</item>
    <item name="android:textSize">30dp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:shadowColor">#000000</item>
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">2</item>
</style>

<style name="SettingsButtonStyle">
    <item name="android:layout_width">60dp</item>
    <item name="android:layout_height">50dp</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:gravity">left</item>
    <item name="android:layout_margin">3dp</item>
    <item name="android:textSize">20dp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:shadowColor">#000000</item>
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">2</item>
</style>

<style name="AboutButtonStyle">
    <item name="android:layout_width">60dp</item>
    <item name="android:layout_height">50dp</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:gravity">right</item>
    <item name="android:layout_margin">3dp</item>
    <item name="android:textSize">20dp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:shadowColor">#000000</item>
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">2</item>
</style> 
```

**选择按钮.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#449def" />
        <stroke
            android:width="1dp"
            android:color="#2f6699" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient
            android:startColor="#449def"
            android:endColor="#2f6699"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#2f6699" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
</selector> 
```

这是上面代码的输出：

![在此处输入图像描述](../Images/527a66b2dd079d76c007b75e2a215e6b.png)

我想将关于按钮放在屏幕右侧。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T10:45:01.250

添加`android:layout_alignParentRight="true"`到关于按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T10:44:29.860

给`About`按钮属性`android:layout_alignParentRight="true"`, 使其在右边距上对齐，并赋予属性`android:layout_alignParentBottom="true"`使其停留在底部，最后删除`android:layout_toRightOf="@id..."`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T05:38:29.627

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:minWidth="25px"
    android:minHeight="25px"
    android:background="@android:color/holo_blue_light">

    <ImageView           
        android:id="@+id/wifiStatusImage"
        android:layout_marginTop ="10dp"     
        android:layout_marginLeft ="10dp"
        android:layout_alignParentLeft="true"
        android:layout_height="60dp"
    android:layout_width="70dp"
    android:src = "@drawable/WifiOn" />

         <ImageView           
        android:id="@+id/SearchP2PDevices"       
        android:layout_marginTop ="0dp" 
        android:layout_marginRight ="10dp"
        android:layout_alignParentRight="true"
        android:layout_height="70dp"
    android:layout_width="70dp"
    android:src = "@drawable/search"
     />
</RelativeLayout> 
```

我有两个图像视图而不是按钮。请注意， android:layout_alignParentRight="true" & android:layout_alignParentLeft="true" 将完成这项工作。

# php - 需要兼容IE的文件类型检查脚本

> ID：13776698
> 
> 赞同：1
> 
> 时间：2012-12-08T10:42:05.397
> 
> 标签：php, file-upload

> **可能重复：**
> [PHP 上传的文件类型检查](https://stackoverflow.com/questions/6755192/uploaded-file-type-check-by-php)

我使用下面的脚本在上传时检查文件类型，以限制文件上传仅 jpg/jpeg，png。但它不适用于 IE（适用于 mozilla）。所以我需要一个适用于所有浏览器的脚本。

```
$destination_path = getcwd().DIRECTORY_SEPARATOR;

$target_path = $destination_path . basename( $_FILES['myfile']['name']);
$types=array('image/png','image/jpeg');

if (in_array($_FILES['myfile']['type'], $types))
{
if(@move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path)) {   
$result = 1;
}
}

else
{
$result = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:46:07.993

IE 为 jpg 设置了不同的文件类型标题，所以添加`image/pjpeg`到您的`$types`.

```
$types=array('image/png','image/jpeg', 'image/pjpeg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:49:41.083

在谷歌上花一点时间，你会发现它适用于所有浏览器

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
$_FILES["file"]["name"]=$_FILES["file"]["name"];
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 50000)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
}
else
{
if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);

  $filename= "upload/" . $_FILES["file"]["name"];
  }
}
 }
else
{
echo "Invalid file";
} 
```

# database - 如何显示当前登录的用户 ID、IP 地址及其操作系统登录？

> ID：13776700
> 
> 赞同：1
> 
> 时间：2012-12-08T10:42:22.323
> 
> 标签：database, oracle

我想显示当前登录的用户 ID、IP 地址及其操作系统登录名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:24:36.633

您可以使用[sys_context](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions150.htm#sthref1809)函数来获取此类信息：

```
SQL> select sys_context('userenv', 'session_user') as curr_user
  2       , sys_context('userenv', 'ip_address')   as ip_address
  3       , sys_context('userenv', 'os_user')      as os_user
  4    from dual
  5  ; 
```

# ruby-on-rails - 不向登录用户显示公开帖子 - Rails

> ID：13776704
> 
> 赞同：0
> 
> 时间：2012-12-08T10:42:56.007
> 
> 标签：ruby-on-rails, ruby

我正在使用[这个应用程序](http://github.com/kburkhardt/rails_url_demo)，我遇到的唯一问题是当用户登录时，他们可以看到公共帖子，即使他们没有创建它。

有没有办法让它不与其他用户的帖子一起显示？

该应用程序的重点是用户可以登录并创建帖子，这些默认情况下是私有的，这意味着只有他们可以看到它，如果用户将帖子公开，我希望它是未登录或登录的用户可以查看但是，这正是我所拥有的，但所有公共帖子都会与其他用户的帖子一起显示。

这是应用程序控制器：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  rescue_from ActiveRecord::RecordNotFound, :with => :handle_not_found

    def handle_not_found
      respond_to do |type|
        type.html { redirect_to root_path, :notice => 'Record not found'}
        type.all  { render :nothing => true, :status => 404 }
      end
      true
    end
end 
```

这是后控制器：

```
class PostsController < ApplicationController

  before_filter :authenticate_user!, :except => [:index, :show]

  # GET /posts
  # GET /posts.json
  def index
    @posts = current_user ? Post.public_or_owned_by(current_user) : nil
    render :template => current_user ? 'posts/index_logged_in' : 'posts/index_not_logged_in'
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = current_user ? Post.public_or_owned_by(current_user).find_by_url_id!(params[:id]) : Post.public.find_by_url_id!(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = current_user.posts.find_by_url_id(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = current_user.posts.build(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = current_user.posts.find_by_url_id(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = current_user.posts.find_by_url_id(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

这是帖子模型：

```
class Post < ActiveRecord::Base
  belongs_to :user
  before_create :generate_url_id

  attr_accessible :title, :body, :is_public

  scope :public, where(:is_public => true)

  def self.public_or_owned_by(user)
    t = Post.arel_table
    Post.where(t[:user_id].eq(user.id).or(t[:is_public].matches(true)))
  end

  def generate_url_id
    self.url_id = SecureRandom.urlsafe_base64
  end

  def to_param
    self.url_id
  end

end 
```

这是用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
  has_many :posts
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:37:04.840

仍然不确定我是否理解你想要什么，但我会使用两条不同的路线：

```
 resources :posts     # see all public posts from everyone
 resources :users do
   resources :posts   # nested route for a user to only see his own posts
 end 
```

所以在你的控制器中，你将拥有：

```
 def index
   if params[:user_id]
     if current_user && current_user.id == params[:user_id].to_i
       # see all posts for a user, even non-public ones
       @posts = Post.where( user_id: params[:user_id] ) 
     else
       # see public posts from a user
       @posts = Post.public.where( user_id: params[:user_id] )
     end
   else
     # see all public posts
     @posts = Post.public 
   end
 end 
```

这不是你能做的最好的，但它是功能性的。更好的方法是使用一些授权机制，例如[CanCan](https://github.com/ryanb/cancan)。

# forms - Symfony2：复选框字段错误总是呈现为 error_bubbling = true

> ID：13776707
> 
> 赞同：0
> 
> 时间：2012-12-08T10:43:06.210
> 
> 标签：forms, symfony, checkbox

我有一个简单的用户注册表单，上面有一个“接受条款”复选框。我已将所有字段设置为 error_bubbling=false，但复选框的错误呈现在 form_errors(form) 部分。

这是我的实体：

```
class User implements UserInterface, \Serializable, EquatableInterface
{
    /**
    * @ORM\Column(type="boolean")
    * @Assert\Type("bool")
    * @Assert\NotBlank(groups={"Registration"})
    */
    private $isAcceptingTOS;
    ....

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'password_required' => true,
            'validation_groups' => array('Registration', 'Default'),
        ));
    }

} 
```

我的表格类型：

```
class RegistrationType extends AbstractType
{
    $builder
    ->add('acceptingTOS', 'checkbox', array(
        'error_bubbling' => false,
    )),
    ....
} 
```

还有我的模板

```
<form action="{{ path('registration_create') }}" method="post" {{ form_enctype(form) }}>

    {{ form_errors(form) }}

    {{ form_widget(form.acceptingTOS) }}
    {{ form_label(form.acceptingTOS) }}
    {{ form_errors(form.acceptingTOS) }}

    {{ form_rest(form) }}

    <input type="submit" />
</form> 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:12:06.047

我发现了错误。

我必须在表单类型和模板中使用 isAcceptingTOS 而不是接受 TOS。

# sql - 损坏的查询 Oracle SQL

> ID：13776708
> 
> 赞同：-4
> 
> 时间：2012-12-08T10:43:11.793
> 
> 标签：sql, oracle

我有这两张桌子

*   **个人详细信息**( `id, name, surname, date_of_birth`)
*   **雇员**( `id, hire_date`)

我需要将`hire_date`桌面`employee`设置为`date_of_birth`+ 10 年。

```
UPDATE employee E
SET E.date_hire = add_months(D.date_of_birth, 120);
FROM employee E, personal_details D
WHERE E.ID = D.ID 
```

太奇怪了，它不起作用，任何人都可以看到那里的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:45:56.710

我想知道哪家公司开始雇用 10 岁的人，但没关系。

```
UPDATE employee E
SET E.date_hire = 
    (SELECT
      add_months(D.date_birth, 120)
    FROM
      personal_details D
    WHERE
      D.ID = E.ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:48:09.753

我会这样写：

```
UPDATE employee E
SET E.date_hire = COALESCE(
    ( SELECT add_months(D.date_of_birth, 120)
      FROM personal_details D
      WHERE E.ID = D.ID
    ), E.date_hire) ; 
```

或者这个 - 我觉得更直观：

```
UPDATE 
  ( SELECT E.date_hire, add_months(D.date_of_birth, 120) AS new_date_hire
    FROM employee E
      JOIN personal_details D
        ON E.ID = D.ID
  )
SET E.date_hire = new_date_hire ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:50:25.067

员工ID， **hire_date**，salary，bonus）

SET E。 **date_hire**

列名不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T10:52:12.443

你说列名是hire_date，然后设置一个名为date_hire的列

```
UPDATE employee E 
SET E.date_hire = add_months(D.date_birth, 120); 
```

您在该语句的末尾有一个分号，这意味着 sql 的其余部分被视为单独的

您需要包含 a`SELECT`才能实际检索数据

当你把那批东西整理好后，你会更接近:-)

（我选择不只是给出sql）

# xml - Flash xml as3 中的 RTL 阿拉伯语支持

> ID：13776721
> 
> 赞同：1
> 
> 时间：2012-12-08T10:45:23.130
> 
> 标签：xml, flash, arabic, right-to-left

我有从 activeden 购买的 flash xml 模板，但我无法从右到左显示阿拉伯文本，经过大量研究后，我发现 textfield 不正确支持 rtl，我需要转换为 TLFTextfield，我的问题是如何转换将经典文本字段转换为 as3 中的 TLFTextField ？请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:29:36.157

从一开始就将文本字段构建为 TLFTextField，如果不包含 TLF，请不要忘记包含 TLF。

# java - 碰撞 2 个矩形不起作用（边界框方法）

> ID：13776727
> 
> 赞同：0
> 
> 时间：2012-12-08T10:46:10.260
> 
> 标签：java, android, collision

大家好，我希望你能帮助我。我尝试编写游戏代码，但在碰撞中失败。我搜索了很多，发现边界框方法（在精灵周围创建一个不可见的矩形）对我来说是最好的解决方案。但是 intersect 方法对我不起作用。我有两个碰撞的位图精灵，但在 LogCat 中没有碰撞......

雪碧 1 级

```
public Sprite(GameView theGameView, Bitmap bmp) {
    this.theGameView = theGameView;
    this.bmp = bmp;
    this.width = bmp.getWidth();
    this.height = bmp.getHeight();
    ySpeed = 0;
    xSpeed = 1;
}

 public Rect bounds() {         
        return (new Rect(x,y,width,height));
    }

public void onDraw(Canvas canvas) {
    canvas.drawBitmap(bmp, x, y, null);
} 
```

雪碧 2 级

```
public FourthSprite(GameView theGameView, Bitmap bmp) {
    this.theGameView = theGameView;
    this.bmp = bmp;
    this.width = bmp.getWidth();
    this.height = bmp.getHeight();
    ySpeed =  0;
    xSpeed = -1;
}

public Rect bounds() {
    // TODO Auto-generated method stub
    return (new Rect(x,y,width,height));
}

public void onDraw(Canvas canvas) {
         canvas.drawBitmap(bmp, x, y, null);
} 
```

}

游戏视图类

公共无效碰撞（）{

```
 Rect r1 = theSprite.bounds();  // Sprite on left side
       Rect r4 = theSprite4.bounds(); // Sprite on right side

  if (r1.intersect(r4)){

       collision = true;
       Log.v("Log Tag", "COLLISION :D :D :D :D :D :D :D");
   }

  else       {
       collision = false;
       Log.v("Log Tag", "NO COLLISION");
  }
    } 
```

如果有帮助，我还可以上传视频。

编辑：http: [//youtu.be/wYxZ7nKsmdw](http://youtu.be/wYxZ7nKsmdw) 我发现，当一个精灵不移动并且x，y坐标为0时，碰撞正在起作用。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:19:20.047

根据您输出到 LogCat 的视频和数据，移动功能似乎有问题（您的问题中没有列出）。

矩形的坐标`left`正在改变，但`right`坐标不变。一段时间后`left`，一个矩形的坐标变得大于`right`坐标，这导致`intersects`函数返回 false。

附带说明一下，您应该考虑以不同的方式构建代码，尝试使用继承而不是许多非常相似的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:20:28.047

我不确定您使用什么库来获取 Rect（标准库有 Rectangle，但没有 Rect）。

我的建议是首先通过在应该发生碰撞时打印出矩形的边界来进行一些错误检查，看看它们是否确实相交。如果这行得通，如果你使用的那个不起作用，也许制作你自己的交集函数是要走的路。这很简单，一个快速的谷歌在 c/javascript 中给了我这个，但在 Java 中很容易重做。

[快速矩形到矩形相交](https://stackoverflow.com/questions/2752349/fast-rectangle-to-rectangle-intersection)

# spring - Spring bean如何处理并发

> ID：13776728
> 
> 赞同：27
> 
> 时间：2012-12-08T10:46:12.827
> 
> 标签：spring, thread-safety, javabeans

我的 Web 应用程序使用 Spring IOC。所以我所有的spring beans默认都是单例的。如果两个请求同时尝试访问单个类的两个不同方法（例如`MySpringBean`，一个有两个方法`searchRecord`和的类`insertRecord`），两个请求将同时访问同一个 spring bean。

同一个 spring bean 如何同时可供两个客户端使用，或者当两个请求都尝试访问两种不同的方法但通过同一个 spring bean 时，这将是并发问题。而且由于 spring bean 是一个单例，所以不能形成新的实例。在这种情况下，这将如何工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T10:50:19.553

您必须首先了解并发性何时会导致问题。如果您的 Spring bean 是无状态的（它没有任何字段，则所有字段都是`final`或所有字段都只分配一次），多个线程可以安全地使用同一个 bean，甚至是同一个方法。

# 也可以看看：

*   [使用 Spring 的线程安全、无状态设计](https://stackoverflow.com/questions/11189907)
*   [spring mvc 声明所有 bean 单例](https://stackoverflow.com/questions/12147314)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T10:50:22.410

如果 bean 是单例，那么 Spring 将在任何线程中为您提供相同的实例。使该 bean 线程安全取决于您。因为它是一个单例，你最好让那个类成为无状态的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-09T03:16:01.363

正如其他人已经建议的那样，在“单例”bean 的情况下，Spring 将为所有线程提供相同的实例。

您需要了解的是，线程通过执行代码来完成系统中的所有工作，而对象提供状态和行为（代码）。因此，多个线程（在您的情况下为请求）确实有可能在单例 bean 中同时运行相同的方法。您可以按照 Tomasz 的建议使此类 bean 无状态，或者使它们成为“线程安全的”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-20T00:49:31.967

在 Spring 中，每个请求都将在单独的线程中创建。例如，它们可以称为“searchRecord”线程和“insertRecord”线程。它们都会在堆中找到相同的对象，但每个线程都会创建自己的执行堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-22T15:30:47.877

Java 单例和 Spring 单例是不同的。Spring 单例范围将在上下文中可用。

Java 单例范围将在 JVM 类加载器中。因此并发请求只能通过 spring 上下文

# android - 文本视图无法正常工作

> ID：13776729
> 
> 赞同：0
> 
> 时间：2012-12-08T10:46:29.947
> 
> 标签：android

我有一个`TextView`很长的文字。在图形布局中，它显示了很好的换行文本，但是当我运行它时，它不会换行。这是我的设计代码

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="15dp"
    android:layout_marginLeft="5dp"
    android:background="#ffffff" >

    <RelativeLayout
        android:id="@+id/layout_title"
        style="@style/dialog_header" >

        <ImageView
            android:id="@+id/image_title"
            style="@style/dialog_header_image"
            android:contentDescription="@string/update_reply"
            android:src="@drawable/compose" />

        <TextView
            android:id="@+id/txt_title"
            style="@style/dialog_header_title"
            android:layout_toRightOf="@+id/image_title" />
    </RelativeLayout>

    <ScrollView
        android:id="@+id/layout_message"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/layout_title"
        android:fadingEdge="none"
        android:fillViewport="true" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"

            android:padding="10dp" >

            <TextView
                android:id="@+id/txt_message"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:minHeight="130dp"
                android:text="Don&apos;t work too hard to give yourself the best of everything, instead make a greater effort to give God the best of yourself." />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/button_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/layout_message" >

        <Button
            android:id="@+id/btn_reply"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/reply" />

        <Button
            android:id="@+id/btn_forward"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/forward" />
    </LinearLayout>
</RelativeLayout> 
```

![在此处输入图像描述](../Images/064b5421a98011c5f73fe4f9915bea77.png)

我想显示这个，但它只显示一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:06:13.683

删除这个

```
android:minHeight="130dp" 
```

并更改 textview 的高度值

```
android:layout_height="XXXdp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:06:42.433

尝试这个

```
android:text="Don&apos;t work too hard to give yourself the\n best of everything, instead     make a greater\n effort to give God the best of yourself." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:11:10.300

要获得文本换行，请设置`android:singleLine=false`.`TextView`

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:singleLine](http://developer.android.com/reference/android/widget/TextView.html#attr_android:singleLine)

# linux - 删除 shell 脚本中的某些字符

> ID：13776730
> 
> 赞同：0
> 
> 时间：2012-12-08T10:46:33.263
> 
> 标签：linux, shell

我在shell脚本中运行了这个命令-

```
echo grep datadir /etc/my.cnf 
```

这是我得到的输出-

```
datadir=/var/lib/mysql 
```

我应该怎么做才能得到输出 -

```
/var/lib/mysql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:49:04.667

怎么样：

```
[cnicutar@fresh ~]$ echo $str
datadir=/var/lib/mysql
[cnicutar@fresh ~]$ echo ${str#*=}
/var/lib/mysql 
```

[在ABS](http://tldp.org/LDP/abs/html/string-manipulation.html)阅读更多关于这些操作的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T10:54:49.780

将 grep 的输出通过管道输出：

```
$ echo 'datadir=/var/lib/mysql' | cut -d '=' -f 2
/var/lib/mysql 
```

如果您的文件中有空格，您可能会遇到问题（请注意输出中的缩进）：

```
$ echo 'datadir =  /var/lib/mysql' | cut -d '=' -f 2
  /var/lib/mysql 
```

您可以使用 awk 来规避此问题：

```
$ echo 'datadir =  /var/lib/mysql' | awk -F '[[:space:]]*=[[:space:]]*' '{print $2}'
/var/lib/mysql 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T10:50:31.503

`cut`与 -d 选项一起使用

```
grep datadir /etc/my.cnf | cut -d = -f 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T10:50:39.193

管它通过`sed 's/^datadir=//'`，这意味着“用任何东西代替前导`datadir=`”。

# regex - 匹配合法移动生成器

> ID：13776731
> 
> 赞同：0
> 
> 时间：2012-12-08T10:46:36.250
> 
> 标签：regex, list, lisp

我有以下问题。我有一个明确的 succesorts 列表。

```
(defparameter *tuples*
 '((isa budgie bird) (color budgie yellow)
   (isa tweetie budgie) (color tweetie green)
   (eats budgie seed) (has bird feathers))) 
```

所以在这里我创建了一组规则：

```
; the explicit successors
(defparameter *tuples2*
 '(((isa ?b bird) => (has ?b feathers))
   ((isa ?b bird) => (has ?b brain))
   ((isa ?b budgie) => (eats ?b seed))
   ((isa ?b budgie) => (color ?b yellow))
   ((isa ?b tweetie) => (color ?b green))
   ((isa ?b tweetie) => (smart ?b small)))) 
```

1.  因此，如果需要 tweetie 和颜色，它应该返回绿色，

2.  但是在 tweetie 和 eats 的情况下，应该返回种子，因为它是从 budgie 继承的

3.  在 tweetie 和 had 的情况下，应该返回羽毛，因为 tweetie 继承自 bird。

例子

```
(inherit tuples 'tweetie 'heart-rate) => nil
(inherit tuples 'tweetie 'color)      => green
(inherit tuples 'tweetie 'eats)       => seeds
(inherit tuples 'tweetie 'has)        => feathers 
```

我不知道如何检索父母的价值观。

我有一个带有 for 循环的辅助函数，它返回鸟/鹦鹉或鸣叫的值。

```
(defun serve-lmg (state)
  (loop for rule in *tuples*
        when (equal (first rule) state)
        collect (third rule))) 
```

所以当我跑步时

```
(serve-lmg '(isa ?b bird)) 
```

我明白了

```
((HAS ?B FEATHERS) (HAS ?B BRAIN)) 
```

这对我来说是**家庭作业**，所以我不指望有人为我解决它。我只是被卡住了一段时间，我没有进展。如果您能提供一些帮助，那就太好了。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T15:45:52.163

好吧，这里有一些可以让你开始的东西：

```
(defun is-a (object kind)
  "Object is a singleton class, it is the symbol, which is
also it's own class"
  (or (eql object kind)
      (let ((super (get object :superclass)))
        (and super (is-a super kind)))))

(defun collect-requirements (kind)
  "Collect all features of this class, and all of its superclasses."
  (let ((super (get kind :superclass))
        (present (get kind :features)))
    (if super
        (append present
               (remove-if
                #'(lambda (x)
                    (some #'(lambda (y)
                              (eql (car y) (car x))) present))
                (collect-requirements super)))
        present)))

(defun could-be (object kind)
  "Try to identify an object based on the features it has,
we could know it already as a subclass of `kind', but if
it is not, then try to see if all the requirements of the
`kind' are met in this object."
  (or (is-a object kind)
      (let ((features (get object :features))
            (requirements (collect-requirements kind)))
        (every #'(lambda (x)
                   (some #'(lambda (y)
                             (eql (car y) (car x))) features))
               requirements))))

(defun is-the-same-as (object kind)
  "Very much like `could-be', except it tests for exact
correspondence."
  (or (is-a object kind)
      (let ((features (get object :features))
            (requirements (collect-requirements kind)))
        (every #'(lambda (x) (member x features :test #'equal))
               requirements))))

(defun get-feature (object feature)
  "Looks up a feature in the prototype chain and returns it
if it is there."
  (loop for (n . v) in (collect-requirements object) do
       (when (eql n feature) (return v))))

(defun parse-tuples (tuples)
  "Parses the list of tuples of the form: (feature object subject)
and infers iheritance chain and features of the objects."
  (loop for (feature object subject) in tuples do
       (import feature)
       (import object)
       (if (eql 'isa feature)
           (setf (get object :superclass) subject)
           (setf (get object :features)
                 (cons (cons feature subject)
                       (get object :features))))))

(parse-tuples
 '((isa budgie bird) 
   (color budgie yellow)
   (isa tweetie budgie)
   (color tweetie green)
   (eats budgie seed)
   (has bird feathers)))

(is-a 'budgie 'bird)
(is-a 'budgie 'crocodile)

(get-feature 'budgie 'color)
(get-feature 'tweetie 'color)

(import 'unknown-animal)
(setf (get 'unknown-animal :features)
      '((color . purple) (eats . potatoes) (has . future)))
(is-a 'unknown-animal 'bird)
(could-be 'unknown-animal 'bird)
(could-be 'unknown-animal 'budgie)
(could-be 'unknown-animal 'tweetie)

(import 'more-or-less-a-tweetie)
(setf (get 'more-or-less-a-tweetie :features)
      '((color . green) (eats . seed) (has . feathers)))

(is-the-same-as 'more-or-less-a-tweetie 'tweetie)
(is-the-same-as 'unknown-animal 'tweetie) 
```

这描述了几种可能从基于特征和直接子类化的关系中构建的类型。它`symbol-plist`用作类描述的存储，它完全基于列表（根据您的要求）。

它没有做什么：当它试图理解使用`is-the-same-as`它的可能性时忽略了一个事实，即该特征是被继承的。也就是说，如果你给它一只新的绿色小鸟，它会尽可能地识别它`tweety`，但不会尽可能地识别它`budgie`，否则，它会使用`could-be`.

# javascript - 滑块不“滑动”和上一个/下一个按钮问题

> ID：13776733
> 
> 赞同：1
> 
> 时间：2012-12-08T10:47:10.367
> 
> 标签：javascript, jquery, html, css, slider

我试图实现的滑块/轮播是这样的：http: [//www.paulwelsh.info/jquery-plugins/hero-carousel/](http://www.paulwelsh.info/jquery-plugins/hero-carousel/)

这是我的 HTML、CSS 和 Javascript。

问题：

1.  图像不会自行滚动（存在的按钮也不起作用，只是一个显示“上一个和下一个”的链接，我什至不想要那里。`I want custom .png's that should be clickable..`

2.  图像不是“滑动”的。

3.  如果您查看 .css 文件，您会看到`I tried to add buttons for next & prev, which failed.`Not sure what to put 因为`.hero-something-next thingy,`我看到了一段我可以自己实现的代码，但它在那个文件中显示 .slideshow-next，我知道我必须拥有一些不同的东西（名字），我只是不知道它应该说什么。

4.  .js 文件的开头还有一行在幻灯片中不断放置“上一个”和“下一个”链接，这是我不想要的。我只希望箭头是切换图像的箭头。

5.  我不确定那个“缓和”部分是什么，也不确定“馅饼”是什么，以及为什么我在我的 css 中有它，如果它甚至有必要的话..（有一个月的网页设计课，没有那么多经验，保持简单！）

它目前的样子的链接：imgur.com/e0lh9

**小提琴**jsfiddle.net/P2YqR/2

**HTML**

```
<div class="hero">
<div class="hero-carousel">

<article>
  <img src="images/deadmau5/slide1.jpg" />

</article>

<article>
  <img src="images/deadmau5/slide2.jpg" />

</article>

<article>
  <img src="images/deadmau5/slide3.jpg" />

</article>
<article>

  <img src="images/deadmau5/slide4.jpg" />

</article>

</div>
</div>
<script>
    $(document).ready(function(){
        $('.hero-carousel').heroCarousel({
            easing: 'easeOutExpo',
            css3pieFix: true
        });
    });
</script> 
```

**CSS**

```
.hero {
width: 1366px;
 height: 340px; position:absolute;top:270px;
overflow: hidden;
margin-bottom: 48px;margin: 0 auto; border-top:9px solid rgba(51, 51, 51, .30);border-bottom: 9px solid rgba(51, 51, 51, .30); padding: 0 0 12px 0; }

.hero-carousel article {
    width: 960px;
    margin: 0 auto;
    height: 470px;
    display: block;
    float: left;
    position: relative;
    }

.hero-carousel-container article {
    float: left;
    }

    .hero-carousel article img{
    border-style:solid;border-width:6px;color:#000; position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        }

    .hero-carousel article .contents {
        position: relative;
        z-index: 2;
        top: 72px;
        left: 48px;
        list-style: none;
        color: #000;
        width: 556px;
        padding: 20px;

        background: rgba(255,255,255,0.8);
        -pie-background: rgba(255,255,255,0.8);

        -moz-border-radius: 20px;
        -webkit-border-radius: 20px;
        border-radius: 20px;

        behavior: url(/assets/PIE.htc);
        }

    .hero-carousel-nav {
        width: 980px;
        position: absolute;
        bottom: 0;
        left: 50%;
        margin-left: -490px;
        z-index: 2;
        }

        .hero-carousel-nav li {
            position: absolute;
            bottom: 48px;
            right: 48px;
            list-style: none;
}

a.hero-carousel_next{ WHAT HERE? <----
background: url('../images/deadmau5/large-arrow-right.png') no-repeat;
display: inline-block;
width: 59px;        /*width of your img*/
height: 59px;      /*height of your img*/
font-size: 0px;    /*this is better than 1px*/
}

.hero-carousel-nav_prev{ SAME HERE <---?
 background: url('../images/deadmau5/large-arrow-left.png') no-repeat;
display: inline-block;
width: 59px;        /*width of your img*/
height: 59px;      /*height of your img*/
font-size: 0px;    /*this is better than 1px*/
} 
```

**Javascript**

```
jQuery.fn.heroCarousel = function (a) {
    a = jQuery.extend({
        animationSpeed: 1000,
        navigation: true,
        easing: "",
        timeout: 5000,
        pause: true,
        pauseOnNavHover: true,
        prevText: "Previous",
        nextText: "Next",
        css3pieFix: false,
        currentClass: "current",
        onLoad: function () {},
        onStart: function () {},
        onComplete: function () {}
    }, a);
    if (jQuery.browser.msie && parseFloat(jQuery.browser.version) < 7) {
        a.animationSpeed = 0
    }
    return this.each(function () {
        var k = jQuery(this),
            b = k.children();
        currentItem = 1;
        childWidth = b.width();
        childHeight = b.height();
        if (b.length > 2) {
            b.each(function (m) {
                if (a.itemClass) {
                    jQuery(this).addClass(a.itemClass)
                }
            });
            b.filter(":first").addClass(a.currentClass).before(b.filter(":last"));
            var d = Math.round(childWidth * k.children().length),
                l = "-" + Math.round(childWidth + Math.round(childWidth / 2)) + "px";
            k.addClass("hero-carousel-container").css({
                position: "relative",
                overflow: "hidden",
                left: "50%",
                top: 0,
                "margin-left": l,
                height: childHeight,
                width: d
            });
            k.before('<ul class="hero-carousel-nav"><li class="prev"><a href="#">' + a.prevText + '</a></li><li class="next"><a href="#">' + a.nextText + "</a></li></ul>");
            var e = k.prev(".hero-carousel-nav"),
                h;
            if (a.timeout > 0) {
                var j = false;
                if (a.pause) {
                    k.hover(function () {
                        j = true
                    }, function () {
                        j = false
                    })
                }
                if (a.pauseOnNavHover) {
                    e.hover(function () {
                        j = true
                    }, function () {
                        j = false
                    })
                }
                function c() {
                    if (!j) {
                        e.find(".next a").trigger("click")
                    }
                }
                h = window.setInterval(c, a.timeout)
            }
            e.find("a").data("disabled", false).click(function (p) {
                p.preventDefault();
                var m = jQuery(this),
                    n = m.parent().hasClass("prev"),
                    o = k.children();
                if (m.data("disabled") === false) {
                    a.onStart(k, e, o.eq(currentItem), a);
                    if (n) {
                        f(o.filter(":last"), "previous")
                    } else {
                        f(o.filter(":first"), "next")
                    }
                    m.data("disabled", true);
                    setTimeout(function () {
                        m.data("disabled", false)
                    }, a.animationSpeed + 200);
                    if (a.timeout > 0) {
                        window.clearInterval(h);
                        h = window.setInterval(c, a.timeout)
                    }
                }
            });

            function f(m, q) {
                var o = parseFloat(k.position().left),
                    n = parseFloat(k.css("margin-left"));
                if (q === "previous") {
                    m.before(m.clone().addClass("carousel-clone"));
                    k.prepend(m);
                    var p = Math.round(n - childWidth);
                    var r = "+="
                } else {
                    m.after(m.clone().addClass("carousel-clone"));
                    k.append(m);
                    var p = l;
                    var r = "-="
                }
                if (a.css3pieFix) {
                    g(jQuery(".carousel-clone"))
                }
                k.css({
                    left: o,
                    width: Math.round(d + childWidth),
                    "margin-left": p
                }).animate({
                    left: r + childWidth
                }, a.animationSpeed, a.easing, function () {
                    k.css({
                        left: "50%",
                        width: d,
                        "margin-left": n
                    });
                    jQuery(".carousel-clone").remove();
                    i()
                })
            }
            function g(n) {
                var m = n.attr("_pieId");
                if (m) {
                    n.attr("_pieId", m + "_cloned")
                }
                n.find("*[_pieId]").each(function (o, p) {
                    var q = $(p).attr("_pieId");
                    $(p).attr("_pieId", q + "_cloned")
                })
            }
            function i() {
                var m = k.children();
                m.removeClass(a.currentClass).eq(currentItem).addClass(a.currentClass);
                a.onComplete(k, k.prev(".hero-carousel-nav"), m.eq(currentItem), a)
            }
            if (jQuery.browser.msie) {
                e.find("a").attr("hideFocus", "true")
            }
            a.onLoad(k, e, k.children().eq(currentItem), a)
        }
    })
}; 
```

请在提供答案时等待几分钟，直到我回复确认它有效！

结果应该类似于：http: [//www.deadmau5.com](http://www.deadmau5.com)

**更新**

```
.hero-carousel-nav li.next a { 
background: url('../images/deadmau5/large-arrow-right.png') no-repeat;
display: inline-block;
width: 100px;        /*width of your img*/
height: 120px;      /*height of your img*/
font-size: 0px; 
right: -15px;  /*this is better than 1px*/
bottom: 90px;
}

.hero-carousel-nav li.prev a { 
 background: url('../images/deadmau5/large-arrow-left.png') no-repeat;
display: inline-block;
width: 100px;        /*width of your img*/
height: 120px;      /*height of your img*/
font-size: 0px;    /*this is better than 1px*/
left: -50px;
bottom: 90px;               
} 
```

**更新 2**

```
 .hero-carousel-nav {
    width: 980px;
    position: absolute;
    bottom: 0;
    left: 50%;
    margin-left: -490px;
    z-index: 2;
    }

    .hero-carousel-nav li {
        position: absolute;
        bottom: 48px;
        right: 48px;
        list-style: none;
}
.hero-carousel-nav li.prev {
left: -50px;
right: auto;
bottom: 100px;
}
.hero-carousel-nav li.next {
right: -30px;
left: auto;
bottom: 100px;
}
.hero-carousel-nav li a {
 background: none repeat scroll 0 0 #D21034;

 color: #FFFFFF;
 display: block;
 float: left;

}

.hero-carousel-nav li.next a { 
background: url('../images/deadmau5/large-arrow-right.png') no-repeat;
display: inline-block;
width: 115px;        /*width of your img*/
height: 100px;      /*height of your img*/
font-size: 0px; 
right: -15px;  /*this is better than 1px*/
bottom: 100px;
overflow:hidden;

}

.hero-carousel-nav li.prev a { 
background: url('../images/deadmau5/large-arrow-left.png') no-repeat;
display: inline-block;
width: 115px;        /*width of your img*/
height: 100px;      /*height of your img*/
font-size: 0px;    /*this is better than 1px*/
left: -50px;
bottom: 100px;
overflow:hidden;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:18:09.823

稍微更新了你的小提琴。在此处查看完整结果[http://jsfiddle.net/johnsmith123/P2YqR/11/](http://jsfiddle.net/johnsmith123/P2YqR/11/)

首先添加 jsfiddle 和 easyng 库（参见小提琴的资源部分）然后移动

```
$(document).ready(function(){
    $('.hero-carousel').heroCarousel({
        easing: 'easeOutExpo',
        css3pieFix: true
    });
}); 
```

到脚本设置。

更新

图片：http: [//jsfiddle.net/johnsmith123/P2YqR/11/](http://jsfiddle.net/johnsmith123/P2YqR/11/)

CSS：

```
.hero-carousel-nav li.prev {
    left: 48px;
    right: auto;
}

.hero-carousel-nav li a {
    background: none repeat scroll 0 0 #D21034;
    border: medium none;
    border-radius: 20px 20px 20px 20px;
    color: #FFFFFF;
    display: block;
    float: left;
    outline: medium none;
    padding: 5px 20px;
}

.hero-carousel-nav li.next a{
background: url('http://www.deadmau5.com/wp-content/themes/deadmau5/css/../images/large-arrow-right.png') no-repeat;
display: inline-block;
width: 59px;        /*width of your img*/
height: 89px;      /*height of your img*/
font-size: 0px;    /*this is better than 1px*/
  }

.hero-carousel-nav li.prev a{
    background: url('http://www.deadmau5.com/wp-content/themes/deadmau5/css/../images/large-arrow-left.png')    no-repeat;
    display: inline-block;
    width: 59px;        /*width of your img*/
    height: 89px;      /*height of your img*/
    font-size: 0px;    /*this is better than 1px*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:37:11.183

```
.hero-carousel-nav {
  width: 980px;
  position: absolute;
  bottom: 0;
  left: 50%;
  margin-left: -490px;
  z-index: 2;
}

.hero-carousel-nav li {
    position: absolute;
    bottom: 48px;
    right: 48px;
    list-style: none;
}

.hero-carousel-nav li a {
   background: none repeat scroll 0 0 #D21034;

   color: #FFFFFF;
   display: block;
   float: left;
 }

.hero-carousel-nav li.next a { 
    background: url('../images/deadmau5/large-arrow-right.png') no-repeat;
    display: inline-block;
    width: 82px;        /*width of your img*/
    height: 82px;      /*height of your img*/
    font-size: 0px; 
    right: -15px;  /*this is better than 1px*/
    bottom: 100px;
    overflow:hidden;
  }

.hero-carousel-nav li.prev a { 
   background: url('../images/deadmau5/large-arrow-left.png') no-repeat;
   display: inline-block;
   width: 82px;        /*width of your img*/
   height: 82px;      /*height of your img*/
   font-size: 0px;    /*this is better than 1px*/
   left: -50px;
   bottom: 100px;
   overflow:hidden;
 } 
```

![在此处输入图像描述](../Images/0e9ff007aff719e7db6dcd107863ba85.png)

# android - Android ViewPagerIndicator 设置标题

> ID：13776737
> 
> 赞同：1
> 
> 时间：2012-12-08T10:48:01.880
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用[http://viewpagerindicator.com/](http://viewpagerindicator.com/)库。我想`TitlePageIndicator`在 Gmail 应用上创建如下图所示：

![在此处输入图像描述](../Images/55165a9565cdfac204f6a89c8391ec5f.png)

我完全想实现相同的效果，其中第一个标题是“较新”，最后一个标题是“较旧”，中心标题是“[总页数]的[页面位置]”。是否可以使用我正在使用的库来实现这一点，或者我应该修改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:02:15.773

我遇到过同样的问题。在 Matthieu 的帮助下解决了这个问题。基于 ViewPagerIndicator 附带的示例。

基本上是在页面更改时监听并更改适配器以根据当前位置给出不同的页面标题。下面给出的代码对我来说很简单。

如果您有这些示例工作并且您只是替换这两个文件，那么试试这个示例

像这样更改了 TestFragmentAdapter 的代码：

```
class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    protected static final String[] CONTENT = new String[] { "This", "Is", "stack", "overflow"  };
    protected static final int[] ICONS = new int[] {
        R.drawable.perm_group_calendar,
        R.drawable.perm_group_camera,
        R.drawable.perm_group_device_alarms,
        R.drawable.perm_group_location
};

private int mCount = CONTENT.length;

// CHANGE START HERE
private int current_position=0;

public void set_current_position(int i) {
    current_position = i;
}
// CHANGE ENDS HERE

public TestFragmentAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {
    return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
}

@Override
public int getCount() {
    return mCount;
}

@Override
public CharSequence getPageTitle(int position) {
    // CHANGE START HERE
    if (position == current_position-1) {
        return "Previous";
    } else if (position == current_position+1) {
        return "Next";
    }
    // CHANGE ENDS HERE
    return TestFragmentAdapter.CONTENT[position % CONTENT.length];
}

@Override
public int getIconResId(int index) {
  return ICONS[index % ICONS.length];
}

public void setCount(int count) {
    if (count > 0 && count <= 10) {
        mCount = count;
        notifyDataSetChanged();
    }
}
} 
```

像这样的 SampleTitlesDefault 代码（添加了 OnPageChangeListener）

```
public class SampleTitlesDefault extends BaseSampleActivity implements ViewPager.OnPageChangeListener {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_titles);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    // CHANGE START HERE
    mIndicator.setOnPageChangeListener(this);
    // CHANGE ENDS HERE
}

// CHANGE START HERE
@Override
public void onPageScrolled(int i, float v, int i1) {
}

@Override
public void onPageSelected(int i) {
    mPager = (ViewPager)findViewById(R.id.pager);
    ((TestFragmentAdapter)mPager.getAdapter()).set_current_position(i);
}

@Override
public void onPageScrollStateChanged(int i) {
}
// CHANGE ENDS HERE
} 
```

# ios6 - 不要更改标签标题

> ID：13776738
> 
> 赞同：0
> 
> 时间：2012-12-08T10:48:07.480
> 
> 标签：ios6, uitabbarcontroller, uitabbaritem

当我更改控制器时`self.title`，选项卡标题也会更改为该字符串。

有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:54:43.967

从以下[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)：`UITabBarController`

> 如果您没有为视图控制器提供自定义选项卡栏项，则视图控制器会创建一个默认项，其中不包含图像和来自视图控制器的标题属性的文本。

因此，您可以实例化自己的`UITabBarItem`并将其分配给视图控制器的`tabBarItem`属性。

或者只是添加一个`UIViewController`可以存储字符串的新属性：

```
@property (nonatomic, copy) NSString *myTitle; 
```

然后改用该属性： `self.myTitle = @"Your title here";`

# android - 倒计时的小工具

> ID：13776741
> 
> 赞同：0
> 
> 时间：2012-12-08T10:48:39.837
> 
> 标签：android

我有一个倒计时到指定日期的小部件。例如：12 月 10 日是 2 天。我想显示还剩多少小时甚至几分钟。怎么做？请帮我。

代码：

```
 @Override
         public void run() {
            Date date1 = new Date();
            Calendar calendar = new GregorianCalendar(2012, 11,11);
            long days = (((calendar.getTimeInMillis()- date1.getTime())/1000))/86400;
                 remoteViews.setTextViewText(R.id.xmas,""+ days);
                 appWidgetManager.updateAppWidget(thisWidget, remoteViews); 
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:13:09.273

您可以通过许多不同的方式来做到这一点。这是1：

```
long theTimeYourCountingTo = 134264575674567;
long currentTime = System.currentTimeMillis();

long timeleft = theTimeYourCountingTo  - currentTime;

String formatteedTimeLeft = formatTime(timeleft);

private String formatTime(long millis) {
          String output = "";
          long seconds = millis / 1000;
          long minutes = seconds / 60;
          long hours = minutes / 60;
          long days = hours / 24;
          seconds = seconds % 60;
          minutes = minutes % 60;
          hours = hours % 24;

          String secondsD = String.valueOf(seconds);
          String minutesD = String.valueOf(minutes);
          String hoursD = String.valueOf(hours);

          if (seconds < 10)
            secondsD = "0" + seconds;
          if (minutes < 10)
            minutesD = "0" + minutes;
          if (hours < 10){
            //hoursD = "0" + hours;
          }

          if( days > 0 ){
              output = days +"d ";
          }
              output += hoursD + "h " + minutesD + "m " + secondsD + "s";

          return output;
    } 
```

# ruby-on-rails-3 - 设计更改密码格式

> ID：13776743
> 
> 赞同：0
> 
> 时间：2012-12-08T10:48:57.733
> 
> 标签：ruby-on-rails-3, devise

有没有办法用设计更改默认密码验证？

我目前正在使用 rails 3.2 并设计 2.1 并在用户模型上使用验证，

```
 validates :password, :format => { :with => /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,
 :message => "Password should contain at least 8 characters, one upper case, one lower case and one numeric." } 
```

但这会导致麻烦，因为密码仅在创建用户或更新密码时存在。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T09:19:05.573

你可以检查 deivse 安全扩展 gem，他有你需要的确切功能。 [https://github.com/phatorx/devise_security_extension](https://github.com/phatworx/devise_security_extension)

# java - Play Framework：如何使用 WS 客户端读取 png 图像？

> ID：13776747
> 
> 赞同：9
> 
> 时间：2012-12-08T10:49:21.190
> 
> 标签：java, image, playframework, png, playframework-2.0

嗨，我想从 Web 服务读取 PNG，然后用 PNG 响应客户端。（想想像一个图像代理）。我在 WS 类中使用 Java 和 Play Framework 2.0。

目前我有：

```
public static Result getimage(){

  WSRequestHolder requestHolder = WS.url("http://someimageserver/myimage.png");
  Promise<WS.Response> getImageResult = requestHolder.get();
  //How do I create an play.mvc.Result from this so I can sent it back to the callee?

} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:04:40.087

在 Play 2.0.4 中，您不能在 Java 中做到这一点。首先，API 中没有二进制文件的方法：[http](http://www.playframework.org/documentation/api/2.0.4/java/play/libs/WS.Response.html) ://www.playframework.org/documentation/api/2.0.4/java/play/libs/WS.Response.html 。我尝试了 WS.Response.getBody() 方法，但字节不正确。

但是 Scala API 在 Play 2.0.4 中支持二进制文件：

```
package controllers

import play.api._
import libs.ws.WS
import play.api.mvc._

object Application extends Controller {

  def getImage = Action {
    Async {
      WS.url("http://someimageserver/myimage.png").get().map { r =>
        Ok(r.getAHCResponse.getResponseBodyAsBytes).as("image/png")
      }
    }
  }

} 
```

从 Play 2.1 开始支持 Java 中的二进制文件：[https ://github.com/playframework/Play20/blob/master/framework/src/play-java/src/main/java/play/libs/WS.java# L565](https://github.com/playframework/Play20/blob/master/framework/src/play-java/src/main/java/play/libs/WS.java#L565)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T12:57:41.583

谢谢，看来我必须耐心等待:)。我找到了一种解决方法（直接使用 ning ）。

```
//imports
import java.util.concurrent.Future;
import com.ning.http.client.AsyncHttpClient;
import com.ning.http.client.AsyncHttpClient.BoundRequestBuilder;
import com.ning.http.client.Response;

//request
AsyncHttpClient asyncHttpClient = new AsyncHttpClient();
BoundRequestBuilder prepareGet = asyncHttpClient.prepareGet(url);
Future<Response> fResponse = prepareGet.execute();
Response r = fResponse.get();
InputStream responseBodyAsStream = r.getResponseBodyAsStream();

return ok(responseBodyAsStream).as('image/png'); 
```

# c++ - 只在向量中制作外向量 > 固定

> ID：13776751
> 
> 赞同：2
> 
> 时间：2012-12-08T10:50:03.477
> 
> 标签：c++

我想创建一个`vector<vector<int>>`外部向量是固定的（始终包含相同的向量），但可以更改内部向量。例如：

```
int n = 2; //decided at runtime
assert(n>0);
vector<vector<int>> outer(n); //outer vector contains n empty vectors

outer.push_back(vector<int>()); //modifying outer vector - this should be error

auto outer_it = outer.begin();
(*outer_it).push_back(3); //modifying inner vector. should work (which it does). 
```

我试着做简单`const vector<vector<int>>`，但这甚至使内部向量`const`。

我是创建自己的自定义`FixedVectors`类的唯一选择，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:59:52.590

根据[定义](http://www.cplusplus.com/reference/vector/vector/)，

> 向量是表示可以改变大小的数组的序列容器。就像数组一样，向量对其元素使用连续的存储位置，这意味着也可以使用指向其元素的常规指针上的偏移量来访问它们的元素，并且与在数组中一样有效。但与数组不同的是，它们的大小可以动态变化，它们的存储由容器自动处理。

如果您不希望拥有一个大小变化的数据结构，那么向量可能不是外层的最佳选择，使用向量数组怎么样。这样，数组的大小是固定的，不能被修改，同时仍然可以自由地在运行时声明其大小。

```
vector<int> *outer;
int VectSize;
cout >> "size of vector array?"
cin >> VectSize;
outer = new vector<int>[VectSize]; //array created with fixed size
outer.push_back() //not happening 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:00:52.217

```
const vector<unique_ptr<vector<int>>> outer = something(n); 
```

对于某事，您可能会编写一个函数，如下所示：

```
vector<unique_ptr<vector<int>>> something(int n)
{
    vector<unique_ptr<vector<int>>> v(n);
    for (auto & p : v)
        p.reset(new vector<int>);
    return v;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T11:42:46.893

将外部向量包装成一个只提供 at、begin、end 和 operator [] 的类。让类只接受一个构造函数占用它的容量。

这很可能是最好的方法。

# haskell - Haskell 搜索列表中的元素

> ID：13776762
> 
> 赞同：1
> 
> 时间：2012-12-08T10:52:19.023
> 
> 标签：haskell

我想要一个在列表列表上更改（1 到 0）的函数，当该行/列中 1 的数量不均匀时。我已经完成了这些功能：

1）查看列表中的行是否偶数：

```
 parityLine :: [[Int]] -> [Bool]
  parityLine [] =[]
  parityLine (x:xs)
                |sum(x) `mod` 2 == 0 = True:(parityLine(xs))
                |otherwise = False:(parityLine(xs)) 
```

2) 对列表列表中的相应元素求和：

```
 sumPositions :: [[Int]] -> [Int]
 sumPositions [] = []
 sumPositions (x:xs) = foldl (zipWith (+)) (repeat 0) (x:xs) 
```

3）查看列表中的列是否偶数：

```
 parityColumn :: [Int] -> [Bool]
 parityColumn [] = []
 parityColumn (x:xs)
    |head(x:xs) `mod` 2 == 0 = True:parityColumn(xs)
    |otherwise = False:parityColumn(xs) 
```

4）是否操作或使用两个布尔列表：

```
 bol :: [Bool] -> [Bool] -> [[Bool]]
 bol  [] _ = []
 bol (x:xs) (y:ys)= (map (||x) (y:ys)):(bol xs (y:ys)) 
```

5) 正确列表：

```
 correct :: [[Int]] -> [[Bool]]
 correct [] = []
 correct (x:xs)=(bol(parityLine (x:xs))(parityColumn(sumPositions(x:xs)))) 
```

所以我想要的是将函数更改`correct`为 [[Int]]->[[Int]] 执行此操作：

```
 My Int list(x:xs)                 With my correct function applied

    [[0,0,1,1],                            [[True,True,True,True],
     [1,0,1,1],                             [True,True,False,True],
     [0,1,0,1],                             [True,True,True,True]
     [1,1,1,1]]                             [True,True,True,True]] 
```

现在我可以在第二行第三列中看到，False，所以我必须更正那个数字 1 以使多个 1 是偶数。如果该列表中有多个 False，我只想更正这些 1 中的一个。

结果，我希望该函数`correct`返回：

```
 [[0,0,1,1],
  [1,0,0,1],
  [0,1,0,1],
  [1,1,1,1]] 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:11:33.750

我会给出一个从你所在的地方开始而不是从头开始的答案，所以我们做的更多是你的方式而不是我的方式。

首先让我们为单个元素执行此操作：

```
leaveIf :: Bool -> Int -> Int
leaveIf yes 0 = if yes then 0 else 1
leaveIf yes 1 = if yes then 1 else 0 
```

（您可以为此使用警卫，但我的手机没有竖线字符！）

接下来我们可以为列表列表执行此操作：

```
edit :: [[Bool]] -> [[Int]] -> [[Int]]
edit boolss intss = zipWith (zipWith leaveIf) boolss intss 
```

* * *

编辑：您只想更改一个，因此我们需要一种将后续`False`s 变为`True`s 的方法：

```
makeTrue :: [Bool] -> [Bool]
makeTrue xs = map (const True) xs 
```

我用过这个功能`const :: a -> b -> a`。例如，`const 5 'c'`只是`5`. 我可以将该定义缩短为`makeTrue = map (const True)`. 一旦你习惯了这样的想法，你会发现更短的版本更清晰。

```
oneFalse :: [[Bool]] -> [[Bool]]
oneFalse [] = []
oneFalse (xs:xss) = let (trues,falses) = break (==False) xs in
     case falses of 
       [] -> trues:oneFalse xss
       (False:others) -> (trues ++ False : makeTrue others) : map makeTrue xss 
```

`(==False)`可以更简单地写成`not`，但可能不太清楚。所以例如

```
> oneFalse [[True,True,True,True],[True,False,True,False],[True,False,False,True]]
[[True,True,True,True],[True,False,True,True],[True,True,True,True]] 
```

所以现在我们可以拥有

```
editOne :: [[Bool]] -> [[Int]] -> [[Int]]
editOne boolss intss = zipWith (zipWith leaveIf) (oneFalse boolss) intss 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:22:18.347

AndrewC 已经给出了一个解决方案，它改变*了所有* `1`对应于`False`s 的 s。如果我们只想更正第一个，我们必须找到一个替代品`zipWith`：

```
leaveIf ok x = if ok then x else 1 -x

-- Varianto of zipWith, which changes at most one element of the list
modFirst :: Eq b => (a -> b -> b) -> [a] -> [b] -> [b]
modFirst _ [] _ = []
modFirst _ _ [] = []
modFirst f (x:xs) (y:ys) = z : if y == z then modFirst f xs ys else ys
  where z = f x y

edit :: [[Bool]] -> [[Int]] -> [[Int]]
edit boolss intss = modFirst (modFirst leaveIf) boolss intss

correct' :: [[Int]] -> [[Int]]
correct' xss = edit (correct' xss) xss 
```

结果不一定是所有行/行都包含偶数个 1 的列表列表：

```
correct' [[0,1,0],[1,1,1],[0,1,0]] = [[1,1,0],[1,1,1],[0,1,0] 
```

您需要对其进行多次迭代，直到所有错误都得到修复（即，计算一个固定点）。

* * *

我想补充一点，您的原始程序可以简化很多（无需更改您的算法）：

```
parityLine :: [[Int]] -> [Bool]
parityLine = map (even . sum)

parityColumn :: [Int] -> [Bool]
parityColumn = map even

sumPositions :: [[Int]] -> [Int]
sumPositions = foldl (zipWith (+)) (repeat 0)

bol :: [Bool] -> [Bool] -> [[Bool]]
bol xs ys = map (\x -> map (||x) ys) xs

correct :: [[Int]] -> [[Bool]]
correct xs = bol (parityLine xs) (parityColumn $ sumPositions xs) 
```

# gmail - 是否有用于邮件的替代谷歌应用程序？

> ID：13776763
> 
> 赞同：37
> 
> 时间：2012-12-08T10:52:42.253
> 
> 标签：gmail, google-apps

Google 停止免费提供 Google Apps。有没有其他方法可以将您自己的域与像 Gmail 这样的优质邮件服务器链接起来？所以用他自己的域注册邮件提供商。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-08T12:54:38.320

我基本上也在寻找替代品，到目前为止我只能推荐 Zoho Mail：

> [http://www.zoho.com/mail/](http://www.zoho.com/mail/)
> 
> [http://www.zoho.com/mail/zohomail-pricing.html](http://www.zoho.com/mail/zohomail-pricing.html)

他们有一个支持 5 个电子邮件帐户的精简版。

**更新**：截至 2014 年 11 月 18 日，Zoho 的精简版现在有 10 个电子邮件帐户，Zoho 有了很大的改进。他们现在拥有访问 Zoho 电子邮件的移动应用程序（对于您的技术有挑战的客户来说非常重要），并且他们的 Web 界面和整体稳定性也得到了改进。我对他们的推荐现在更强了。

您可能还想查看其他不像 Google Apps 那样昂贵的付费服务：

> [http://smallbusiness.yahoo.com/email/compare-plans](http://smallbusiness.yahoo.com/email/compare-plans)
> 
> [http://www.godaddy.com/email/email-hosting.aspx](http://www.godaddy.com/email/email-hosting.aspx)

不幸的是，我认为您不会以更优惠的价格找到像 Google Apps 一样体面和可靠的东西，但是如果您正在寻找功能较少的东西并且您需要为此类服务支付更少的费用，那么以上可能是您的最佳选择。

干杯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T11:02:46.880

取决于你对 MS 的感觉，但[http://domains.live.com](http://domains.live.com)应该做你想做的。虽然对我来说，我可以支付留在 Gmail 和 Hotmail 上的费用，但只是个人喜好:)

# django - 特定日期每小时发生的事件数

> ID：13776769
> 
> 赞同：0
> 
> 时间：2012-12-08T10:53:28.700
> 
> 标签：django, django-models

我有包含“caller_name”和“call_datetime”字段的模型。

我能够获得特定月份每天发生的电话数量：

```
while start_date <= end_date:
    calls = CDR.objects.filter(start_time__year=str(start_date.year), start_time__month=str(start_date.month), 
                                    start_time__day=str(start_date.day))
    print "Number of calls:", len(calls)
    start_date = start_date + datetime.timedelta(days=1) 
```

同样，我试图在特定日期每小时获得电话数量。

```
for i in range(24):
    calls = CDR.objects.filter(start_time__year=str(start_date.year), start_time__month=str(start_date.month),start_time__day=str(start_date.day), start_time__hour=str(i)) 
```

发现“start_time__hour”没有实现，但是以他们的任何方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:51:11.683

试试这个解决方法：

```
day_calls = CDR.objects.filter(start_time__year=str(start_date.year), start_time__month=str(start_date.month),start_time__day=str(start_date.day))

hour_calls = day_calls.extra(select={'hours': 'DATE_FORMAT(start_date, "%%H")'})\
                      .values_list('hours', flat=True)\
                      .distinct()\
                      .order_by('hours') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:49:44.203

您可以使用带有该`.extra()`方法的原始 SQL 或类似的东西：

```
for i in range(24):
    dt1 = start_time.replace(hour=i)
    dt2 = dt1 + datetime.timedelta(hours=1)
    calls = CDR.objects.filter(start_time__gte=dt1, start_time__lt=dt2) 
```

# objective-c - 在objective-c中使用指针调整全局对象

> ID：13776770
> 
> 赞同：0
> 
> 时间：2012-12-08T10:53:33.390
> 
> 标签：objective-c, oop, object, pointers

好的，所以我正在处理两组极其相似的数据，同时，这些数据集都是对象内的全局 NSMutableArrays。

```
data_set_one = [[NSMutableArray alloc] init];
data_set_two = [[NSMutableArray alloc] init]; 
```

加载了两个新的 NSMutableArray，需要将它们添加到旧的现有数据中。这些数组也是全局的。

```
xml_dataset_one = [[NSMutableArray alloc] init];
xml_dataset_two = [[NSMutableArray alloc] init]; 
```

为了减少代码重复（并且因为这些数据集*非常*相似），我在类中编写了一个 void 方法来处理两个数组的数据组合过程：

```
-(void)constructData:(NSMutableArray *)data fromDownloadArray:(NSMutableArray *)down withMatchSelector:(NSString *)sel_str 
```

现在，我对面向对象编程有了不错的理解，所以我在想，如果我要像这样使用数据中的全局数组调用该方法......

```
[self constructData:data_set_one fromDownloadArray:xml_dataset_one withMatchSelector:@"id"]; 
```

然后全局 NSMutableArrays (data_set_one) 将反映方法内“数组”发生的变化。可悲的是，情况并非如此， data_set_one 没有反映方法之外的更改（例如：数组中的新对象）。

这是问题的代码片段

```
// data_set_one is empty
// xml_dataset_one has a few objects

[constructData:(NSMutableArray *)data_set_one fromDownloadArray:(NSMutableArray *)xml_dataset_one withMatchSelector:(NSString *)@"id"];

// data_set_one should now be xml_dataset_one, but when echoed to screen, it appears to remain empty 
```

这里是该方法的代码要点，任何帮助表示赞赏。

```
-(void)constructData:(NSMutableArray *)data fromDownloadArray:(NSMutableArray *)down withMatchSelector:(NSString *)sel_str {
    if ([data count] == 0) {
        data = down;  // set data equal to downloaded data
    } else if ([down count] == 0) {
        // download yields no results, do nothing
    } else { 
        // combine the two arrays here 
    }
} 
```

此项目未启用 ARC。

谢谢你们的帮助！抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:45:46.800

如果我理解您的问题，您正在尝试将您的对象作为引用调用传递，并希望像在 C++/C 中一样工作。但是Obj-C，虽然类似但有一些不同的方式。您必须使用 ** （双指针）取消引用对象，这在 NSError 情况下最为常见，这种情况非常罕见。

第二种方法是：将方法包装为一个块。然后将变量放在与块相同的词法范围内，并用__block存储类型表示。

第三种方法可以通过将其设为 ivar/property 甚至是单例来直接访问您的对象。

# java - 在 Java 中解析 scalaz.Validation

> ID：13776773
> 
> 赞同：3
> 
> 时间：2012-12-08T10:53:48.290
> 
> 标签：java, scala, scalaz

我有一个具有以下签名的 scala 函数：

```
def getValue: Validation[ Throwable, String ] 
```

现在，我想用 Java 处理`res`调用这个函数的结果（比如说）。

我可以打电话`res.isSuccess()`，`res.isFailure()`但我如何提取基础`Throwable`或成功`String`？

我尝试铸造，但`(res instanceof scalaz.Failure)`在 a 中测试结果`scalaz.Failure cannot be resolved to a type`（可见 scala 和 scalaz jars）

有没有一种通用的方法来为`Validation`, `Option`, `Either`, 等等...？

**编辑**我意识到我可能可以使用 a`fold`但这会导致 Java 中出现很多丑陋的样板代码（不需要更多）。有更好看的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:23:16.963

`Success`并且`Failure`都是案例类：

```
final case class Success[E, A](a: A) extends Validation[E, A]
final case class Failure[E, A](e: E) extends Validation[E, A] 
```

因此，您可以编写以下内容，例如：

```
import scalaz.*;

public class Javaz {
  public static void main(String[] args) {
    Validation<Throwable, String> res = new Success<Throwable, String>("test");

    if (res.isSuccess()) {
      System.out.println(((Success) res).a());
    } else {
      System.out.println(((Failure) res).e());
    }
  }
} 
```

For`Option`和`Either`您可以使用该`get`方法（在 的情况下采用`left`or`right`投影后`Either`）。

不过，如果可能的话`fold`，在 Scala 端使用 等进行这种展开可能会更干净。

# c++ - 在多级继承中派生的虚拟基类会发生什么？

> ID：13776780
> 
> 赞同：1
> 
> 时间：2012-12-08T10:54:48.110
> 
> 标签：c++, inheritance, virtual-inheritance, multi-level, memory-layout

在玩继承时，我碰巧尝试了这个：

```
class A
{ int i; };

class B : virtual public A
{ int j; };

class C : public B
{ int k; };

int main()
{
    std::cout<<sizeof(C)/sizeof(int);
    return 0;
} 
```

这给了我输出`6`

虽然以下按预期工作，但给出了输出`3`

```
class A
{ int i; };

class B : public A  // No virtual here
{ int j; };

class C : public B
{ int k; };

int main()
{
    std::cout<<sizeof(C)/sizeof(int);
    return 0;
} 
```

为什么会有这种差异？而且，为什么它是第二种情况的两倍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:59:07.527

这**取决于实现**。

然而，几乎所有的编译器都会使用相同的机制，只要你有一个关键字，编译器就需要通过and`virtual`做一些额外的记录。这种额外的簿记增加了班级规模。`vptr``vtables`

严格来说，您应该依靠尺寸来确定任何具体的尺寸，这就是标准提供`sizeof`获取实际尺寸而不是猜测它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T10:59:17.223

很简单，虚拟继承涉及额外的开销。一个典型的实现至少需要一个额外的指针。

[请参阅虚拟表和虚拟指针中的](https://stackoverflow.com/questions/3324721/virtual-tables-and-virtual-pointers-for-multiple-virtual-inheritance-and-type-ca)问题 4，用于多重虚拟继承和类型转换以及答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T13:33:51.287

```
class A {
    int i;
};

class B : public A {
    int j;
}; 
```

在这个**不**使用虚拟继承的例子中，`B`可以`B`像这样定义一个类型的对象：

```
class B0 {
    int i;
    int j;
}; 
```

一旦引入了虚拟继承，这将不起作用：

```
class C : public virtual A {
    int k;
};

class D : public virtual A {
    int l;
};

class E : public C, public D {
    int m;
}; 
```

类型的对象`C`有两个`int`成员：`k`来自​​ 的定义`C`和`i`来自 的定义`A`。类似地，一个类型的对象`D`有两个`int`成员，`l`和`i`。到目前为止，一切都很好。棘手的部分来自 class `E`：它也有**一个** `int`member `i`，因为 的两个实例`A`都是虚拟基础。所以既不`C`是也`D`不能像`B0`上面那样写，因为那样`E`最终会得到**两个**.`i`

解决方案是添加一个间接层。`C`,`D`和类型的对象`E`看起来像这样（伪代码，不要尝试编译它）：

```
class C0 {
    int *cip = &i;
    int k;
    int i;
};

class D0 {
    int *dip = &i;
    int l;
    int i;
};

class E0 {
// C0 subobect:
    int *cip = &i;
    int k;
// D0 subobject:
    int *dip = &i;
    int l;
// E data:
    int *eip = &i;
    int m;
    int i;
}; 
```

您在大小中看到的是那些额外的指针，它们使得无论在派生类中如何组合和组合`E`都可以拥有一个副本。（实际上，这些指针中的每一个都是指向 的指针，因为肯定可以有多个数据成员，但这在这个简单的伪代码中很难表示）。`i``C``D``A``A`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:17:25.103

这取决于您的编译器的实现。不同的编译器有不同的结果。但一个是肯定的，结果肯定不止三个。

# asp.net - LinkBut ton 中的长查询字符串

> ID：13776781
> 
> 赞同：2
> 
> 时间：2012-12-08T10:54:48.060
> 
> 标签：asp.net, query-string

我正在动态生成一个链接按钮并通过迭代集合来设置它的 postbackurl，当我将鼠标悬停在它上面时，链接按钮会显示正确的 url，但是当我单击链接按钮时，只传递了预期的五个查询字符串参数中的三个。我正在使用 Firefox，这是我的代码

```
 foreach(var item in collection)
{
linkbutton b = new linkbutton();

linkbutton.postbackurl="somepage.aspx?" + "param1="+ item.val1 + "&param2=" + item.val2
                       + "&param3=" + item.val3+ "&param4=" + item.val4+ "&param5="
                       +item.val5;  
PlaceHolder1.Controls.Add(b);
} 
```

但是当我点击链接按钮浏览器打开

```
somepage.aspx?param1=val1&param2=val2&param5=val5 
```

所有值都存在于集合项中，而且浏览器会忽略链接本身中的 param3,4 :< 再次求助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:16:52.343

对于这种情况，您只需要`asp:HyperLink`不需要`asp:LinkButton`. 您的代码中有一些错误。一个更优化/可读的版本将是这个

```
foreach(var item in collection)
{
    var btn = new HyperLink();

    btn.NavigateUrl=String.Format("somepage.aspx?param1={0}&param2={1}&param3={2}&param4={3}&param5={4}",
                item.val1,
                item.val2,
                item.val3,
                item.val4,
                item.val5);  
    PlaceHolder1.Controls.Add(btn);
} 
```

希望这可以帮助。

# jsf - 素面命令链接ajax不起作用

> ID：13776786
> 
> 赞同：1
> 
> 时间：2012-12-08T10:55:28.917
> 
> 标签：jsf, primefaces

我正在尝试使用带有命令链接的 Ajax 来更新对话框。表单没有任何 ID，我也无法运行此页面，它显示未找到/不存在带有“对话框”的组件

```
<h:form>
    <p:tabView id="tabView">
        <p:tab id="tab1" title="Tab 1">
            <h:panelGrid columns="1" cellpadding="10">
                <h:dataTable value="#{testBean.dataList}" var="data">
                    <h:column>
                        <h:outputText value="#{data}" />
                    </h:column>
                    <h:column>
                        <p:commandLink action="#{testBean.loadCommentHistory(data)}"
                            update="dialog" oncomplete="dlg.show()">
                            <h:graphicImage url="resources/theme1/images/comments.gif"
                                styleClass="basicImageStyle" />
                        </p:commandLink>
                    </h:column>
                </h:dataTable>
                <p:dialog id="dialog" header="Dynamic Dialog" widgetVar="dlg">
                    <h:outputText value="#{testBean.commentHistory}" />
                </p:dialog>
            </h:panelGrid>
        </p:tab>
    </p:tabView>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:18:00.890

`p:dataTable`本身就是一个容器。`p:commandLink`正在搜索id 为“dialog”的`p:dataTable`元素。

解决方案：在表单中添加一个 id 并将对话框称为“:formid:dialog”。

编辑：

The`p:tabView`或 the`p:tab`也是一个容器，因此请检查浏览器中对话框的 id 并使用它。;-) 应该注意避免 id's as `jdt_id4`。

# google-analytics - 谷歌分析：如何计算内部搜索列表中每个项目的出现次数

> ID：13776790
> 
> 赞同：1
> 
> 时间：2012-12-08T10:56:07.760
> 
> 标签：google-analytics

在公司中，我正在开发一个展示用户公告的网站。公告可以通过我们的内部搜索引擎进行搜索。到目前为止，我们已经实现了 Googla Analytics API 来向我们的用户展示他们的公告的“pageViews”信息，但他们也想知道他们的公告在搜索列表中显示的频率（可能与综合浏览量进行比较，然后修改一些信息，如标题或获得点击率的公告缩略图）。我们如何收集这些数据？我显然试图谷歌它，但找不到任何信息。

# jsp - 通过 JSP 和 Servlet 创建更改密码页面

> ID：13776794
> 
> 赞同：2
> 
> 时间：2012-12-08T10:57:01.430
> 
> 标签：jsp, servlets

我`Change Password`使用 JSP 创建了一个表单，以及一个 servlet 页面来操作数据并将其输入数据库。这是一个内部网站（内部网），因此数据库已经包含`Email, FName, LName`所有用户的详细信息。只有密码字段为空。我要做的是，在用户填写他们的电子邮件地址、密码、确认并按下提交按钮后，servlet 页面应该更新当前电子邮件的密码字段。不幸的是，在所有情况下，用户似乎都被重定向到`ChangeError.jsp`. 请找到随附的两个文件。（`ChangePassword.JSP` 和`ChangePassword.Servlet`）。任何帮助将非常感激。

```
 //ChangePassword.jsp
    <FORM ACTION="ChangePassword" METHOD="GET">
<div id="login_box">
  <div id="login_header">
        Login
  </div>
  <div id="form_val">
    <div class="label">Email:</div>
    <div class="control"><input type="text" name="Email" id="Email"/></div>

    <div class="label">Password:</div>
    <div class="control"><input type="password" name="Password" id="Password"/></div>

    <div class="label">Confirm Password:</div>
    <div class="control"><input type="password" name="Password" id="Password"/></div>
    <div style="clear:both;height:0px;"></div>

    <div id="msgbox"></div>
  </div>

  <div id="login_footer">
  <!-- <script type="text/javascript">
  function closewindow() {
  window.close()
  }
  </script>-->
     <label>
    <input type="submit" onclick="location.href='http://localhost:8080/IntegrateAll/Index.jsp'" window.close();" name="Submit" id="Submit" value="Submit" class="send_button" />
    </label>
  </div>
</div> 
```

```
 //ChangePassword.servlet        
    import java.io.IOException;
    import javax.servlet.*;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import javax.sql.DataSource;
    import java.sql.Connection;
    import java.sql.ResultSet;
    import java.sql.PreparedStatement;
    import javax.naming.*;
    public class ChangePassword extends HttpServlet {
private static final long serialVersionUID = 1L;
public ChangePassword() {
    super();
}
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    String Email = request.getParameter("Email");
    String Password = request.getParameter("Password");
    String CPassword = request.getParameter("Password");

    Connection con =   GetConnectToDb();
    boolean flag = CheckLogin(Password,CPassword,Email,con);
    if(flag==true){
        gotoPage("/LoginPage.jsp",request,response);
    }
    else{
        gotoPage("/ChangeError.jsp",request,response);
    }
}
public void gotoPage(String address, HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(address);
    dispatcher.forward(request, response);
}
public boolean CheckLogin(String Password, String CPassword,String Email, Connection con) {
    if (Password != null && CPassword != null && Email !=null) {
        try {
            PreparedStatement ps = con.prepareStatement("UPDATE PUBLIC.IAUSERS SET Password = ('"+Password+"') WHERE Email='"+Email+"'");
            ResultSet rs = ps.executeQuery();
        while(rs.next()) {
                return true;
            }
        } catch (Exception e) {
        }
    }
    return false;
}
public Connection GetConnectToDb() {

    try {
        InitialContext ctx = new InitialContext();
        Connection con = null;
        DataSource ds = (DataSource) ctx.lookup("java:/DefaultDS");
        con = ds.getConnection();
        return con;
    } catch (Exception e) {
        return null;
    }
}
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:05:02.420

更新查询必须使用 执行`executeUpdate()`，而不是`executeQuery()`。

您的代码中还有其他问题：

*   您应该使用准备好的语句而不是连接。例如，这将避免 SQL 注入攻击，并避免密码包含单引号时的错误。
*   你永远不应该使用 GET 来发布包含密码的表单。这使密码以明文形式显示在浏览器地址栏中
*   您应该尊重 Java 命名约定：方法和变量以小写字母开头
*   您应该始终在 finally 块中关闭连接。否则，在执行 N 次后，您的连接池将不再有任何可用连接，您必须每分钟重新启动应用程序
*   你永远不应该捕获异常，也永远不要完全忽略异常。
*   `if (flag == true)`很丑。利用`if (flag)`
*   一个给定的 HTML 页面不应该有两个具有相同`id`属性的元素。ID 应该是唯一的。
*   您根本不使用 CPassword 参数。
*   默认情况下，这些方法应该是私有的，除非您有充分的理由将它们公开。

# java - Hadoop Basics 的 MapReduce 程序中的 java.lang.NoClassDefFoundError

> ID：13776795
> 
> 赞同：5
> 
> 时间：2012-12-08T10:57:06.137
> 
> 标签：java, hadoop, mapreduce, runtime-error, noclassdeffounderror

我正在尝试 Hadoop 的基本 MapReduce 程序，其教程位于[http://java.dzone.com/articles/hadoop-basics-creating](http://java.dzone.com/articles/hadoop-basics-creating)

该类的完整代码是（代码在上面的网址上的网上）

```
import java.io.IOException;
import java.util.StringTokenizer;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.KeyValueTextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class Dictionary {
public static class WordMapper extends Mapper<Text, Text, Text, Text> {
    private Text word = new Text();

    public void map(Text key, Text value, Context context) throws IOException, InterruptedException {
        StringTokenizer itr = new StringTokenizer(value.toString(), ",");
        while (itr.hasMoreTokens()) {
            word.set(itr.nextToken());
            context.write(key, word);
        }
    }
}

public static class AllTranslationsReducer extends Reducer<Text, Text, Text, Text> {
    private Text result = new Text();

    public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
        String translations = "";
        for (Text val : values) {
            translations += "|" + val.toString();
        }
        result.set(translations);
        context.write(key, result);
    }
}

public static void main(String[] args) throws Exception {
    System.out.println("welcome to Java 1");
    Configuration conf = new Configuration();
    System.out.println("welcome to Java 2");
    Job job = new Job(conf, "dictionary");
    job.setJarByClass(Dictionary.class);
    job.setMapperClass(WordMapper.class);
    job.setReducerClass(AllTranslationsReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    job.setInputFormatClass(KeyValueTextInputFormat.class);
    FileInputFormat.addInputPath(job, new Path("/tmp/hadoop-cscarioni/dfs/name/file"));
    FileOutputFormat.setOutputPath(job, new Path("output"));
    System.exit(job.waitForCompletion(true) ? 0 : 1);
}
} 
```

但是在eclipse中运行之后；我得到了错误，

```
welcome to Java 1
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:73)
at Dictionary.main(Dictionary.java:43)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 2 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T11:17:41.350

请注意，异常是 NoClassDefFoundError 而不是 ClassNotFoundException。

**注意**：当类在运行时不可见但在编译时可见时抛出 NoClassDefFoundError。这可能是在 JAR 文件的分发或生产中可能发生的事情，其中​​并未包含所有必需的类文件。

**修复**：请检查构建时间和运行时类路径的差异。

NoClassDefFoundError 和 ClassNotFoundException 是不同的。一个是错误，另一个是异常。

**NoClassDefFoundError**：由于 JVM 在查找它期望找到的类时遇到问题。由于找不到类文件，在编译时工作的程序无法运行。

**ClassNotFoundException**：此异常表明在类路径中未找到该类，即我们正在尝试加载类定义并且包含该类的类/jar 不存在于类路径中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T06:26:26.400

当类在运行时不可见但在编译时出现时，会出现 NoClassDefFoundError。这可能与 JAR 文件有关，因为未包含所有必需的类文件。

因此，请尝试添加您可以从[http://commons.apache.org/logging/download_logging.cgi获取的类路径 commons-logging-1.1.1 jar](http://commons.apache.org/logging/download_logging.cgi)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T14:17:05.883

NoClassDefFoundError 发生在命名类*成功*定位到类路径中，但由于某种原因无法加载和验证。最常见的问题是验证命名类所需的另一个类要么丢失，要么版本错误。

一般来说，这个错误意味着“仔细检查你的类路径中是否有所有正确的 JAR 文件（正确的版本）”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T14:12:17.010

当您在本地 IDE (Eclipse) 中运行 Hadoop Map/Reduce 程序时，这是一个非常常见的错误。

您应该已经在构建路径中添加了 hadoop-core.jar，因此在您的程序中没有检测到编译错误。但是当你运行它时你会得到错误，因为 hadoop-core 依赖于 commons-logging.jar （以及其他一些 jars）。您可能需要将 /lib 下的 jar 添加到构建路径中。

我建议你使用 Maven 或其他依赖管理工具来管理依赖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T02:15:04.563

请阅读一篇文章： http: [//kishorer.in/2014/10/22/running-a-wordcount-mapreduce-example-in-hadoop-2-4-1-single-node-cluster-in-ubuntu-14 -04-64 位/](http://kishorer.in/2014/10/22/running-a-wordcount-mapreduce-example-in-hadoop-2-4-1-single-node-cluster-in-ubuntu-14-04-64-bit/) . 它解释了如何在没有 Marven 的情况下在 Eclipse 中引用依赖项。但是，据我了解，Marven 是首选方式。

# php - 在 Zend 中包含模块插件

> ID：13776797
> 
> 赞同：0
> 
> 时间：2012-12-08T10:57:09.793
> 
> 标签：php, zend-framework, plugins

我编写了一个 Auth 插件来检查用户是否已登录。没有登录的用户应该能够访问应用程序中除了登录页面之外的任何内容。

所以我在文件中有这个`application/modules/user/plugins/Auth.php`：

```
class User_Plugin_Auth extends Zend_Controller_Plugin_Abstract {
    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        if (Zend_Auth::getInstance()->hasIdentity() 
               || $this->getRequest()->getActionName() == 'login') return;
        $request->setModuleName('user');
        $request->setControllerName('auth');
        $request->setActionName('login');
    }
} 
```

然后我在`application.ini`：

```
pluginPaths.User_Plugin = APPLICATION_PATH "/modules/user/plugins/"
resources.frontController.plugins[] = "User_Plugin_Auth" 
```

但是，无论我如何移动`Auth.php`文件，无论名称如何，我总是得到`Fatal error: Class 'User_Plugin_Auth' not found`. 请帮助我，我已经浪费了一个多小时，这令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:29:08.490

我认为问题与文件名有关。我会尝试在这些位置创建文件的副本

```
application/modules/user/plugins/User_Plugin_Auth.php

application/modules/user/plugins/User/Plugin/Auth.php 
```

当然，您只需要其中一个，因此一旦找到有效的，请删除其他。

如果这对我的配置中的语法没有帮助（Fam 只是项目的代号）

```
resources.frontController.plugins.layout = "Fam\Controller\Plugin\Layout"
resources.frontController.plugins.route = "Fam\Controller\Plugin\Route" 
```

正如评论中指出的 php 5.3 - 这应该在旧版本中工作，假设包含路径已配置

```
resources.frontController.plugins.layout = "Fam_Controller_Plugin_Layout"
resources.frontController.plugins.route = "Fam_Controller_Plugin_Route" 
```

映射到我的库中的文件，例如

```
APPLICATION_PATH "/../library/Fam/Controller/Plugin/Layout.php" 
```

作为该项目的参考，我的 Zend 文件位于

```
APPLICATION_PATH "/../library/Zend" 
```

所以将文件调整到相对位置应该可以解决问题

你的自动加载器配置了吗？我有 autoloaderNamespaces.0 = "Fam"

你可能需要类似的东西

```
autoloaderNamespaces[] = "User_"
resources.frontController.plugins.UserAuth = "User_Plugin_Auth" 
```

# objective-c - 客观 C 强调属性与自我

> ID：13776800
> 
> 赞同：17
> 
> 时间：2012-12-08T10:57:24.737
> 
> 标签：objective-c

当您在 Xcode 中选择拆分视图应用程序时，我正在使用标准示例拆分视图，添加一些字段后，我需要添加一些字段以在详细视图中显示它们。

在原始示例中发生了一些有趣的事情，主视图在详细视图中设置了“detailItem”属性，详细视图显示它。

```
- (void)setDetailItem:(id) newDetailItem
{
if (_detailItem != newDetailItem) {
    _detailItem = newDetailItem;

    // Update the view.
    [self configureView];
} 
```

我明白那是什么，所以当我在玩它的时候。我认为如果我使用 self.detailItem 而不是 _detailItem 会是一样的，因为它是类的属性。

然而，当我使用

```
self.detailItem != newDetailItem 
```

我实际上陷入了一个不断调用此方法的循环中，而我无法在模拟器中执行任何其他操作。

我的问题是，下划线变量（ivar？）和属性之间的实际区别是什么？我在这里阅读了一些帖子，这似乎只是一些客观的 C 约定，但实际上有所不同。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-08T11:02:08.330

`_property`表示您正在直接访问该属性。

`self.property`表示您正在使用访问器。

在您的情况下，在您调用它的 setter 方法中，创建一个递归调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T11:01:57.287

在您的实验过程中，您设置了一个无限循环，这就是模拟器无响应的原因。

在调用`self.detailItem`范围内递归`setDetailItem:`调用，`setDetailItem:`因为您的类实现了属性的自定义设置方法`detailItem`。

我会向您推荐有关属性、ivars 等独家新闻的[Apple 文档中的声明属性；](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html)但简而言之，声明的属性是为您的类提供访问器方法的一种简化方式。无需编写您自己的访问器方法（就像我们在 Objective-C 2.0 之前必须做的那样），它们现在是通过属性语法为您生成的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-08T11:01:57.617

这些属性基本上是编译器为给定实例变量生成**setter**和**getter的一种方式。**

所以当你使用类似的东西时：

```
id detailItem = self.detailItem; 
```

你在幕后做的是：

```
id detailItem = [self detailItem]; 
```

同样适用于：

```
self.detailItem = otherDetailItem; 
```

将会：

```
[self setDetailItem:otherDetailItem]; 
```

因此，当您自己编写 setter 时，您会陷入无限循环，因为您访问的是方法本身。你可以自由地使用“自我”。你的类中的符号，而不是当你因为我上面描述的机制而覆盖设置器或访问器时。

我使用 . 简单访问 ivar 的符号是当我更改值时，您永远不知道在您的类中更改值时需要发生什么。你有什么关于状态的东西应该通知一些代表状态改变了吗？但是，通常情况并非如此，只需使用 . 表示您确保将来如果您决定在您的 setter 方法中做一些魔术，您将不必重构某些代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T13:02:57.983

我将举一个例子（不启用 ARC）：

```
@property (nonatomic, retain) NSNumber* number; 
```

如果你不合成它，你可以这样访问它：

```
self.number= [NSNumber numberWithBool: YES]; 
```

在这种情况下，数字被保留。如果您合成它并且不使用该属性：

```
@synthesize number; 
```

稍后在文件中：

```
number=[NSNUmber numberWithBool: YES]; 
```

您尚未使用该属性，因此不会保留该数字。这在使用访问器和合成属性之间存在相关差异。

# c - C 程序 - 段错误，原因

> ID：13776802
> 
> 赞同：0
> 
> 时间：2012-12-08T10:57:40.030
> 
> 标签：c, segmentation-fault

当我输入 6 (int) 作为值时，运行它会给我一个 seg 错误（gcc filename.c -lm）。请帮我解决这个问题。预期的功能尚未实现，但我需要知道为什么我已经陷入了段错误。

谢谢！

```
#include<stdio.h>
#include<math.h>
int main (void)
{
  int l = 5;
  int n, i, tmp, index;
  char * s[] = {"Sheldon", "Leonard", "Penny", "Raj", "Howard"};
  scanf("%d", &n);

  //Solve Sigma(Ai*2^(i-1)) = (n - k)/l     

  if (n/l <= 1)
    printf("%s\n", s[n-1]); 
  else
    {
      tmp = n;
      for (i = 1;;)
    {
      tmp = tmp - (l * pow(2,i-1));
      if (tmp <= 5) 
        {
          // printf("Breaking\n");
          break;
        }
      ++i;
    }
      printf("Last index = %d\n", i);   //  ***NOTE***

      //Value lies in next array, therefore
      ++i;

      index = tmp + pow(2, n-1);
      printf("%d\n", index);

    }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:01:35.633

当您为`n`and输入 6 时`s[n-1]`，您正在进行越界访问：

```
printf("%s\n", s[n-1]); 
```

因为数组中只有 5 个指针。所以只有 0-4 是有效的索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T11:06:23.993

您正在使用 pow 功能，效率不高。

这是我在 Python 中的解决方案。

```
from math import ceil

names = ['Sheldon', 'Leonard', 'Penny', 'Rajesh', 'Howard']

n = int(raw_input())

i = 0
j = 1
k = len(names)

while i <= n:
    i += k
    k += k
    j += j

print names[int(ceil((n - (i - k * 0.5)) / (j * 0.5)) - 1)] 
```

我希望这有帮助。

# ipad - 尝试在 iPad 上调试网站，但设备未出现在 Mac 上 Safari 的“开发”菜单下

> ID：13776804
> 
> 赞同：6
> 
> 时间：2012-12-08T10:58:04.583
> 
> 标签：ipad, safari, mobile-safari, remote-debugging

根据 iOS Developer Library [Debugging](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html) guide，应该可以通过通常的 USB 连接从桌面 Safari 远程调试 Mobile Safari（在 iOS 6 上）中的网站。但完成所述步骤后（*我在 iPad 上打开 Web Inspector，通过 USB 将其连接到我的 Mac，从首选项中打开开发菜单*）我仍然在桌面 Safari 的开发菜单下看不到任何设备项。是否有任何其他关键要求才能正常工作？最小的 Mac OS X 版本可能吗？我有 10.6.8。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T18:04:08.753

事实证明，仅在 Safari 6 中添加了对远程调试的支持，由于某些无法解释的原因，它不适用于 Snow Leopard，仅适用于 Lion（有限版本）及更高版本。所以我买了一个升级到山狮，它现在可以正常工作了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-01T15:33:25.157

苹果希望迫使开发人员升级到最新的 OSX（与最新的开发者工具捆绑在一起）。

但是对于使用 OSX 10.6.8 / Windows / 的开发人员来说，有一种调试 iOS6+ Safari 的工作方式：

[温热](http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html)

它像官方方式一样工作得很好。也许 Apple 将这个项目用于调试（只是猜测）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:13:48.100

在 iOS 上 Safari 的首选项中，高级下有一个选项允许切换“Web Inspector”，它可以打开和关闭此功能（至少这是在 iOS 6 上，我没有旧设备来检查这个上）。

还有一个限制是：

> 重要提示：您只能检查已从 Xcode 传输到您的设备的设备上的应用程序。您无法检查从 App Store 下载的应用程序，即使它是您的应用程序。

所以我希望开发者应用程序是您可以以这种方式操作的唯一其他应用程序。

# sencha-touch - 以 MVC 方式从 hasMany 模型生成 Ext.dataview.List 中的项目

> ID：13776806
> 
> 赞同：1
> 
> 时间：2012-12-08T10:58:11.903
> 
> 标签：sencha-touch

我有一个`Blog`hasMany `Posts`（和许多其他领域）的模型。现在我想在这样的`List`视图中列出这些帖子：

*   [我的帖子#1]
*   [我的帖子#2]
*   [我的帖子#3]

就所描述的 API 而言，我可以将存储或数据属性传递给 Ext.dataview.List。但是我不知道如何将 hasMany 记录传递到列表中，因此它将为每个记录显示一个项目。

我真的必须创建另一家商店吗？是否可以将我的数据视图配置为类似`store: 'Blog.posts'`或`data: 'Blog.posts'`什至`records: 'Blog.posts'`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:43:24.743

扩展 dataview.List 以定义 itemtpl 以循环浏览帖子

```
itemTpl: new Ext.XTemplate(
    '<tpl for="**posts**" >',
        '<div>{TheBlogPost}</div>',
            '</tpl>'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T19:25:02.047

如果您知道如何访问它们，Sencha 会从关联中自动生成存储。因此，您只需在加载时将列表的存储切换为自动生成的“子存储”。

这种方法可能存在一些问题，例如在使用列表分页插件时，但它很快。

例子：

**楷模**

```
Ext.define('Conversation', {
extend: 'Ext.data.Model',
config: {
    fields: [

    ],
    associations:
        [
            {
                type: 'hasMany',
                model: "Message",
                name: "messages",
                associationKey: 'messages'
            }
        ]
}
});

Ext.define('Message' ,
{
    extend: "Ext.data.Model",
    config: {
        idProperty: 'id_message',
        fields: [
            { name: 'text', type: 'string' },
            { name: 'date', type: 'string' },
            { name: 'id_message', type: 'int' },
            { name: 'me', type: 'int'} // actually boolean
        ]
    }
}
    ); 
```

**JSON**

```
 [
{
    "messages": [

    {"id_message": 11761, "date": 1378033041, "me": 1, "text": "iiii"},
    {"id_message": 11762, "date": 1378044866, "me": 1, "text": "hallo"}
]}
] 
```

**控制器**

```
 this.getList().getStore().load(
            {
                callback: function(records, operation, success) {

//IMPORTANT LINE HERE:
getList().setStore(Ext.getStore(me.getList().baseStore).getAt(0).messages());

                },
                scope: this
            }

        ); 
```

**列表显示**

```
 {
                                flex: 1,
                                xtype: 'list',
                                itemId: 'ConversationList',
                                data: [],
                                store: 'ConversationStore',
                                baseStore: 'ConversationStore',
                                itemTpl:
                                        '                {[app.util.Helpers.DateFromTimestamp(values.date)]}<br><b>{name}</b>' +
                                        '           {[app.util.Helpers.fixResidualHtml(values.text)]} </div>' +
                            }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:19:28.643

正如@Adam Marshall 所说，这并不像我想象的那么容易。

# c# - 在其他机器上测试 Windows Store 应用程序

> ID：13776812
> 
> 赞同：0
> 
> 时间：2012-12-08T10:58:43.173
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps

我想在我的 MS Surface 或我朋友的 PC 等其他 PC 上测试我的 windows 8 Metro 应用程序。但是当我运行它时，我收到以下错误：

> 此应用程序只能在 AppContainer 的上下文中运行。

我搜索了很多并找到[了这个](https://stackoverflow.com/questions/7451536/how-to-deploy-a-metro-app-to-the-desktop)，但是这个主题是 2011 年和 VS 2011 年的，所以这个解决方案不再起作用了。

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:52:11.573

引用线程的解决方案应该仍然有效，尤其是第 2 点。

右键单击项目并选择“Store”->“Create App Package...”（取消选择上传到商店）将为您的应用程序和依赖项创建一个包含包的文件夹。在同一个文件夹中有一个 PowerShell 脚本。运行时，它可能会在第一次要求您更改 ExecutionPolicy，但随后它会像从商店安装的常规应用程序一样安装应用程序。

# iphone - 来自数组拆分的 Xcode 表视图

> ID：13776815
> 
> 赞同：1
> 
> 时间：2012-12-08T10:59:10.757
> 
> 标签：iphone, xcode, arrays, tableview

我正在尝试从格式为“name1，link1，name2，link2 ...”的字符串开始获取表格视图，所以我实际上在做的是：

- 获取字符串并将链接和名称放入数组中，然后根据对象的位置将数组分成两个较小的数组

```
- (void)viewDidLoad
{
NSString *dataString = @"a,www.google.it,b,www.apple.it,c,www.youtube.it";
dataArray = [dataString componentsSeparatedByString:@","];
for (int i=0; i<[dataArray count]; i++) {
    if (i%2==0) {
        [dataArrayName addObject:[dataArray objectAtIndex:i]];
    }
    else {
        [dataArrayLink addObject:[dataArray objectAtIndex:i]];
    }
}
[super viewDidLoad];
} 
```

- 设置表格视图

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
return [dataArrayName count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *MyIdentifier = @"myCell";

// Try to retrieve from the table view a now-unused cell with the given identifier.
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

// If no cell is available, create a new one using the given identifier.
if (cell == nil) {
    // Use the default cell style.
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"myCell"];
}

// Set up the cell.
NSString *cellName = [dataArrayName objectAtIndex:indexPath.row];
cell.textLabel.text = cellName;

return cell;
} 
```

但是当我运行应用程序时，tableview 的视图很清晰（有空行）有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:36:41.730

您是否初始化了 dataArrayName 和 dataArrayLink （即，在您开始向其中添加对象之前，您是说`dataArrayName = [[NSMutableArray alloc] init]`还是等价的？

# javascript - 前期活动菜单链接

> ID：13776818
> 
> 赞同：0
> 
> 时间：2012-12-08T10:59:28.287
> 
> 标签：javascript, css

我使用 Javascript 来装饰点击后的活动链接。问题是，如何加载已经激活的菜单项之一的页面？

示例： http: [//moschalkx.nl/](http://moschalkx.nl/)

Javascript代码：

```
function hlite_menu(obj) {
    var lnk = document.getElementById('menu').getElementsByTagName('A');
    for (var i in lnk) {
        lnk[i].className = (lnk[i] === obj) ? 'menu_active' : 'menu_idle';
    }
}

function set_menu() {
    var lnk = document.getElementById('menu').getElementsByTagName('A');
    for (var i in lnk) {
        lnk[i].className = 'menu_idle';
        lnk[i].onclick = function () {
            hlite_menu(this);
        }
    }
    if (lnk[i]) { /* ??? how do you know whether this is the link to activeate up front? */
        hlist_menu(lnk[i]);
    }
}
window.onload = set_menu; 
```

CSS：

```
a.menu_idle {color:#333333; text-decoration:none;}
a.menu_active {color:#333333; text-decoration:underline;}
a:visited {color:#333333; text-decoration:none;}
a:hover {color:#333333; text-decoration:underline;} 
```

我需要在里面的某个地方输入逻辑

```
if (lnk[i]) { /* ??? how do you know whether this is the link to activeate up front? */
    hlist_menu(lnk[i]);
} 
```

让脚本知道哪个链接将预先处于活动状态。由于我不熟悉编码，我不知道如何做到这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:04:31.467

在您的标记中设置最初的活动链接：

```
<a target="iframe1" class="menu_active" href="gallery/photo_menu.html">PHOTOGRAPHY</a> 
```

然后在您的`set_menu`函数中，将`iframe`'`src`属性设置`href`为该链接的属性：

```
for (i in lnk) {
    if (lnk.hasOwnProperty(i)) {
        //lnk[i].className = 'menu_idle'; // initial menu states are set in markup. This line is no longer necessary.
        lnk[i].onclick = hlite_menu;
        if (lnk[i].className === 'menu_active') {
            iframe.src = lnk[i].href;
        }
    }
} 
```

我还强烈建议将您的 JavaScript 重写为以下内容：

```
var hlite_menu = function hlite_menu() {
    'use strict';
    var lnk = document.getElementById('menu').getElementsByTagName('a'),
        i = null;
    //set all links to idle
    for (i in lnk) {
        if (lnk.hasOwnProperty(i)) {
            lnk[i].className = 'menu_idle';
        }
    }
    //set this link to active
    this.className = 'menu_active';
},
set_menu = function set_menu() {
    'use strict';
    var lnk = document.getElementById('menu').getElementsByTagName('a'),
        iframe = document.getElementById('iframe1'),
        c = document.getElementById('copyright'),
        i = null;
    // set copyright
    c.innerText = (new Date()).getFullYear();
    // set onclicks and initial iframe src.
    for (i in lnk) {
        if (lnk.hasOwnProperty(i)) {
            //lnk[i].className = 'menu_idle'; // initial menu states are set in markup. This line is no longer necessary.
            lnk[i].onclick = hlite_menu;
            if (lnk[i].className === 'menu_active') {
                iframe.src = lnk[i].href;
            }
        }
    }
};
window.onload = set_menu; 
```

这避免了几个长期问题，例如可读性/维护、[变量提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)和可怕的`document.write`（您用于设置版权日期）。您还需要将版权部分更改为：

```
<div id="footer">
    ALL IMAGES &#169; <span id="copyright"></span>
</div> 
```

您也可以像这样编写导航（避免使用表格进行布局）：

```
<div id="header">
    <div class="logo">
        <span style="">MO SCHALKX</span>
    </div>
    <div id="menu">
        <a target="iframe1" class="menu_active" href="gallery/photo_menu.html">PHOTOGRAPHY</a>
        <a target="iframe1" class="menu_idle" href="gallery/film_menu.html">FILM</a>
        <a target="iframe1" class="menu_idle" href="about.html">ABOUT</a>
        <a target="iframe1" class="menu_idle" href="http://reflecture.tumblr.com">BLOG</a>
    </div>
</div> 
```

并将其添加到您的 CSS 中：

```
#header {
    float: left;
    display: inline-block;
    margin: 1em;
    text-align: center;
}

.logo, #menu {
    background-color: #FFF;
}

.logo {
    font-size: 40px;
    font-weight: 500;
    font-style: inherit;
}

#menu {
    margin-top: 5px;
}

#menu > a {
    padding-left: 0.25em;
}
#menu > a {
    border-left: 1px solid #000;
}

#menu > a:first-child {
    border-left: none;
} 
```

这应该使它看起来一样。您还可以将您的 CSS 规则与`menu_active`and `a:hover`（同样与`menu_idle`and `a:visited`）结合起来，如下所示：

```
a.menu_idle, a:visited {
    color: #333333;
    text-decoration: none;
}

a.menu_active, a:hover {
    color: #333333;
    text-decoration: underline;
} 
```

最后，您已将您的元素包装`iframe`在一个`<form id="form1" runat="server">`元素中。您可以完全删除它。它不会影响您的布局，并且您实际上没有包含任何`input`元素的表单，因此没有必要。此外，`runat="server"`除非您在 ASP.Net 上运行该属性（显然您不是），否则该属性不会做任何事情，因此您可能需要牢记这一点。

总而言之，您应该能够将整个文档源更改为以下内容，而无需进行真正的视觉更改（我认为您会发现在源中查看它要干净得多）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Mo Schalkx Photography</title>
    <script type="text/javascript">
    var hlite_menu = function hlite_menu() {
        'use strict';
        var lnk = document.getElementById('menu').getElementsByTagName('a'),
            i = null;
        //set all links to idle
        for (i in lnk) {
            if (lnk.hasOwnProperty(i)) {
                lnk[i].className = 'menu_idle';
            }
        }
        //set this link to active
        this.className = 'menu_active';
    },
    set_menu = function set_menu() {
        'use strict';
        var lnk = document.getElementById('menu').getElementsByTagName('a'),
            iframe = document.getElementById('iframe1'),
            c = document.getElementById('copyright'),
            i = null;
        // set copyright
        c.innerText = (new Date()).getFullYear();
        // set onclicks and initial iframe src.
        for (i in lnk) {
            if (lnk.hasOwnProperty(i)) {
                //lnk[i].className = 'menu_idle'; // initial menu states are set in markup. This line is no longer necessary.
                lnk[i].onclick = hlite_menu;
                if (lnk[i].className === 'menu_active') {
                    iframe.src = lnk[i].href;
                }
            }
        }
    };
    window.onload = set_menu;
    </script>
    <style type="text/css">
        body {
            margin: 0;
            overflow: hidden;
        }

    #header {
        float: left;
        display: inline-block;
        margin: 1em;
        text-align: center;
    }

        #iframe1 {
            position: absolute;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        #footer {
            font-size: 9px;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            text-align: center;
            position: absolute;
            bottom: 0px;
            left: 0px;
            width: 100%;
            height: 20px;
            visibility: visible;
            display: block;
            color: #000;
            opacity: 0.4;
            filter: alpha(opacity=40);
            text-shadow: 0px 1px 0px rgba(255,255,255,.5); /* 50% white from bottom */;
        }

        .logo, #menu {
            background-color: #FFF;
        }

        .logo {
            font-size: 40px;
            font-weight: 500;
            font-style: inherit;
        }

        #menu {
            margin-top: 5px;
        }

        #menu > a {
            padding-left: 0.25em;
        }
        #menu > a {
            border-left: 1px solid #000;
        }

        #menu > a:first-child {
            border-left: none;
        }

        a.menu_idle, a:visited {
            color: #333333;
            text-decoration: none;
        }

        a.menu_active, a:hover {
            color: #333333;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div id="header">
        <div class="logo">
            <span style="">MO SCHALKX</span>
        </div>
        <div id="menu">
            <a target="iframe1" class="menu_active" href="gallery/photo_menu.html">PHOTOGRAPHY</a>
            <a target="iframe1" class="menu_idle" href="gallery/film_menu.html">FILM</a>
            <a target="iframe1" class="menu_idle" href="about.html">ABOUT</a>
            <a target="iframe1" class="menu_idle" href="http://reflecture.tumblr.com">BLOG</a>
        </div>
    </div>
    <div id="footer">
        ALL IMAGES &#169; <span id="copyright"></span>
    </div>
    <iframe id="iframe1" frameborder="0"></iframe>
</body>
</html> 
```

**UDPATE**

要在[http://moschalkx.nl/gallery/film_menu.html](http://moschalkx.nl/gallery/film_menu.html)上应用它，只需包含相同的 JavaScript 并注释掉涉及设置版权`set_menu`和更新的`id`行`iframe`：

```
var hlite_menu = function hlite_menu() {
    'use strict';
    var lnk = document.getElementById('menu').getElementsByTagName('a'),
        i = null;
    //set all links to idle
    for (i in lnk) {
        if (lnk.hasOwnProperty(i)) {
            lnk[i].className = 'menu_idle';
        }
    }
    //set this link to active
    this.className = 'menu_active';
},
set_menu = function set_menu() {
    'use strict';
    var lnk = document.getElementById('menu').getElementsByTagName('a'),
        iframe = document.getElementById('gallery'),
        //c = document.getElementById('copyright'),
        i = null;
    // set copyright
    //c.innerText = (new Date()).getFullYear();
    // set onclicks and initial iframe src.
    for (i in lnk) {
        if (lnk.hasOwnProperty(i)) {
            //lnk[i].className = 'menu_idle'; // initial menu states are set in markup. This line is no longer necessary.
            lnk[i].onclick = hlite_menu;
            if (lnk[i].className === 'menu_active') {
                iframe.src = lnk[i].href;
            }
        }
    }
};
window.onload = set_menu; 
```

此外，由于您在此页面上包含 jQuery，因此您可以在 jQuery 中将其编写为：

```
$(document).ready(function () {
    $('#menu a').click(function (e) {
        var self = $(this),
            href = self.attr('href');
        $('#menu a').not(self).removeClass('menu_active').addClass('menu_idle');
        self.removeClass('menu_idle').addClass('menu_active');
        $('#gallery').attr('src', href);
    });
}); 
```

# loops - 流星模板重新加载无限

> ID：13776820
> 
> 赞同：6
> 
> 时间：2012-12-08T10:59:51.123
> 
> 标签：loops, meteor, infinity

使用 Meteor 运行时出现问题。

我有一个“问题”页面，我想在渲染时增加计数视图。

所以在我的模板函数中我写

```
Template.questionview.helpers({
    question : function() {
      if(Session.equals('main_template_name', 'question')) {
        console.log(Session.get('question_id'));
        Questions.update({
          _id: Session.get('question_id')
        }, {
           $inc: {
           views: 1
        }
     });
   }
}); 
```

现在问题来了，当我渲染问题视图并更新问题项时，视图再次刷新，因为它是一个反射页面。然后是无限循环。

有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:38:21.667

通常，在这种情况下，模型会出现问题。在这种情况下，我相信这是“计数视图”的想法。有很多方法可以正确地做到这一点。不是在渲染时增加它，因为您正在 UI 代码中进行模型工作（在概念上和实现中被破坏）。

首先，将用户访问过的问题存储在某处。为什么不是`{questionsVisited:[]}`用户的属性？

使用`Meteor.call(...)`方法调用来注册视图：

```
Meteor.methods({
  viewQuestion: function(questionId) {
    // check if the user hasn't visited this question already
    var user = Meteor.users.findOne({_id:this.userId,questionsVisited:{$ne:questionId}});

    if (!user)
         return false;

    // otherwise, increment the question view count and add the question to the user's visited page
    Meteor.users.update({_id:this.userId},{$addToSet:{questionsVisited:questionId}});
    Questions.update({_id:questionId},{$inc:{views:1}});
    return true;
}); 
```

那么如何增加 UI 更改的视图呢？好吧，我们不要专门这样做。*让我们仅*在问题发生变化时增加查看次数。

```
Meteor.autorun(function () {
  var questionId = Session.get("question_id");
  Meteor.call('viewQuestion',questionId,function(e,r) {
    if (r)
      console.log("Question " + questionId + " logged an increment.");
    else 
      console.log("Question " + questionId + " has already been visited by user " + Meteor.userId();
  });
}); 
```

并摆脱所有这些问题助手的东西......

这甚至比你最初想要的还要好。现在，同一用户的观看次数不会计算两次。如果这是所需的行为，请删除`questionsVisited`逻辑。

*仅*`'question_id'`当您实际更改用户正在处理的逻辑问题时才更改会话变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T03:32:06.303

我通过使用[流星收集挂钩解决了这个问题](https://atmospherejs.com/matb33/collection-hooks)

首先安装它

```
>_ meteor add matb33:collection-hooks 
```

然后在你的模型中

```
Questions.after.findOne(function (userId, selector, options, doc){
    Questions.update({_id: doc._id},{$inc:{views:1}});
}); 
```

和**KABOOM**就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:37:47.730

而不是放入一个助手，我会把这个逻辑放入渲染的事件中，即。

```
Template.questionview.rendered ... 
```

请参阅[Meteor 文档](http://docs.meteor.com/#template_rendered)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T23:54:02.383

如果您正在使用发布和订阅（无论如何您都应该这样做），您可以在您的发布方法上执行此操作，例如

```
Meteor.publish('posts', function(id) {
  Posts.update({_id:id},{$inc:{view:1}});
  return Posts.find({_id: id});
}); 
```

或在您的订阅回调中

```
 Meteor.subscribe("posts" , id {
    onReady: function() { Meteor.call("incrementView", id);}}); 
```

这样，每次用户打开浏览器时，您只需增加一次计数。

# c# - C# - 分配 ConsoleKey 然后使用 ConsoleKeyInfo 重新分配

> ID：13776838
> 
> 赞同：3
> 
> 时间：2012-12-08T11:01:47.100
> 
> 标签：c#

我想要完成的是`ConsoleKey`分配给一个变量，然后使用`ConsoleKeyInfo`它来修改变量。

我收到错误说`Cannot convert source type 'System.ConsoleKey' to target type 'System.ConsoleKeyInfo'`。

这背后的原因是我希望用户能够重新编程应用程序中使用的键。

到目前为止我有这个；

```
public static ConsoleKeyInfo keyboardkeynorth;
keyboardkeynorth = Console.ReadKey(); 
```

这有效，但它不允许我以`keyboardkeynorth`已设置为`ConsoleKey.W`.

在程序的其他地方，我会调用`keyboardkeynorth`它作为`ConsoleKey`

这可能很简单，但它似乎在逃避我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-23T23:20:58.030

在您询问之后意识到这是短短的 3 年多...

```
public static ConsoleKeyInfo keyboardkeynorth = 
    new ConsoleKeyInfo('W', ConsoleKey.W, false, false, false); 
```

你不希望“北”最初是“N”吗？;^)

这是一个奇怪的、冗长的构造函数，但可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:21:56.677

这是一个完整且简单的程序，向您展示如何做到这一点。我说简单是因为它没有考虑 CTRL、ALT 或 SHIFT——并且根据我收集自定义键信息的方式，您甚至无法设置这些信息，因为我使用的是`ReadKey`. 但你会明白的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Reflection;

namespace ConsoleApplication23
{
    class Program
    {
        private static ConsoleKeyInfo keyAction1, keyAction2, keyAction3;

        static void Main(string[] args)
        {
            InitializeKeyActions();

            Console.Write("Do you want a new key action for #1? ");
            var result = Console.ReadKey();
            if (result.Key != ConsoleKey.Enter) { UpdateKeyInfo("keyAction1", result); }
        }

        private static void UpdateKeyInfo(string keyName, ConsoleKeyInfo result)
        {
            var propertyInfo = typeof(Program).GetField(keyName, BindingFlags.NonPublic | BindingFlags.Static);
            if (propertyInfo == null) { return; }

            var key = result.KeyChar;
            propertyInfo.SetValue(null, new ConsoleKeyInfo(key, (ConsoleKey)key, false, false, false));

            StringBuilder keyActions = new StringBuilder();

            foreach (var line in File.ReadAllLines("keyactions.ini"))
            {
                var kvp = line.Split(new char[] { ':' }, StringSplitOptions.RemoveEmptyEntries);
                if (kvp[0] != keyName)
                {
                    keyActions.AppendLine(line);
                    continue;
                }

                keyActions.AppendLine(string.Format("{0}: {1}", kvp[0], result.KeyChar));
            }

            File.WriteAllText("keyactions.ini", keyActions.ToString());
        }

        private static void InitializeKeyActions()
        {
            if (!File.Exists("keyactions.ini"))
            {
                StringBuilder keyActions = new StringBuilder();
                keyActions.AppendLine("keyAction1: A");
                keyActions.AppendLine("keyAction2: B");
                keyActions.AppendLine("keyAction3: C");

                File.WriteAllText("keyactions.ini", keyActions.ToString());
            }

            foreach (var line in File.ReadAllLines("keyactions.ini"))
            {
                var kvp = line.Split(new char[] { ':' }, StringSplitOptions.RemoveEmptyEntries);

                var propertyInfo = typeof(Program).GetField(kvp[0], BindingFlags.NonPublic | BindingFlags.Static);
                if (propertyInfo == null) { continue; }

                var key = kvp[1].Trim()[0];
                propertyInfo.SetValue(null, new ConsoleKeyInfo(key, (ConsoleKey)key, false, false, false));
            }
        }
    }
} 
```

# c# - 通过 ParameterizedThreadStart 传递参数

> ID：13776846
> 
> 赞同：49
> 
> 时间：2012-12-08T11:02:18.957
> 
> 标签：c#, multithreading

我正在尝试通过以下方式传递参数：

```
Thread thread = new Thread(new ParameterizedThreadStart(DoMethod)); 
```

知道怎么做吗？我会很感激一些帮助

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-08T11:32:16.713

懒惰的别列佐夫斯基有正确的答案。我想指出，由于变量捕获，从技术上讲，您可以使用 lambda 表达式传递任意数量的参数：

```
var thread = new Thread(
       () => DoMethod(a, b, c));
thread.Start(); 
```

这是一种调用不适合`ThreadStart`or`ParameterizedThreadStart`委托的方法的便捷方式，但请注意，如果在将父线程中的参数传递给子线程的代码后更改它们，则很容易导致数据竞争。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-08T11:04:45.993

使用接受对象的重载[`Thread.Start`](http://msdn.microsoft.com/en-us/library/6x4c42hc.aspx)方法（如果需要多个参数，可以传递自定义类型或数组）：

```
Foo parameter = // get parameter value
Thread thread = new Thread(new ParameterizedThreadStart(DoMethod));
thread.Start(parameter); 
```

并`DoMethod`简单地将参数转换为您的参数类型：

```
private void DoMethod(object obj)
{
    Foo parameter = (Foo)obj;
    // ...    
} 
```

**顺便说一句**，在 .NET 4.0 及更高版本中，您可以使用任务（还要小心竞争条件）：

```
Task.Factory.StartNew(() => DoMethod(a, b, c)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-10T09:37:23.807

您可以使用匿名类型，而不是像@user1958681 那样创建一个传递多个参数的类，然后只需使用动态类型来提取您的参数。

```
class MainClass
{
    int A = 1;
    string B = "Test";

    Thread ActionThread = new Thread(new ParameterizedThreadStart(DoWork));    
    ActionThread.Start(new { A, B});
} 
```

然后在 DoWork

```
private static void DoWork(object parameters)
{
   dynamic d = parameters;

    int a = d.A;
    string b = d.B;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-10T21:27:53.687

另一种归档您想要的内容的方法是在您的函数/方法中返回一个委托。举个例子：

```
class App
{
  public static void Main()
  {
     Thread t = new Thread(DoWork(a, b));
     t.Start();
     if (t.IsAlive)
     {
         t.IsBackground = true;
     }
  }

  private static ThreadStart DoWork(int a, int b)
  {
      return () => { /*DoWork*/ var c = a + b; };
  }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-09T06:23:38.947

```
new Thread(() => { DoMethod(a, b, c); }).Start(); 
```

或者

```
new Thread(() => DoMethod(a, b, c)).Start(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-11T19:47:47.107

```
// Parameters to pass to ParameterizedThreadStart delegate
// - in this example, it's an Int32 and a String:
class MyParams
{
    public int A { get; set; }
    public string B { get; set; }

    // Constructor
    public MyParams(int someInt, string someString)
    {
        A = someInt;
        B = someString;
    }
}

class MainClass
{
    MyParams ap = new MyParams(10, "Hello!");
    Thread t = new Thread(new ParameterizedThreadStart(DoMethod));
    t.Start(ap); // Pass parameters when starting the thread
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-12T11:49:19.497

```
class Program 
{
  public static void Main() 
  {
    MyClass myClass = new MyClass();
    ParameterizedThreadStart pts = myClass.DoMethod;
    Thread thread1 = new Thread(pts);
    thread1.Start(20); // Pass the parameter

    Console.Read();
  }
}

class MyClass 
{
  private int Countdown { get; set; }

  public void DoMethod(object countdown) // Parameter must be an object and method must be void
  {
    Countdown = (int) countdown; 
    for (int i = Countdown; i > 0; i--) 
    {
      Console.WriteLine("{0}", i);
    }

    Console.WriteLine("Finished!");
  }
} 
```

# mysql - 没有为我的 Mysql 查询获得正确的预期输出？

> ID：13776850
> 
> 赞同：0
> 
> 时间：2012-12-08T11:02:55.400
> 
> 标签：mysql, sql, select, join, union

我有 4 个表，如下所示

**医生**

```
id   name
------------
1   Mathew
2   Praveen
3   Rosie
4   Arjun
5   Denis 
```

**医生预约**

```
id  doctors_id    patient_name    contact          date               status
--------------------------------------------------------------------------------------
1   5             Nidhin        9876543210  2012-12-10 15:39:41     Registered
2   5             Sunny         9876543210  2012-12-18 15:39:48     Registered
3   5             Mani          9876543210  2012-12-12 15:39:57     Registered
4   2             John          9876543210  2012-12-24 15:40:09     Registered
5   4             Raj           9876543210  2012-12-05 15:41:57     Registered
6   3             Samuel        9876543210  2012-12-14 15:41:33     Registered
7   2             Louis         9876543210  2012-12-24 15:40:23     Registered
8   1             Federick      9876543210  2012-12-28 15:41:05     Registered
9   2             Sam           9876543210  2012-12-12 15:40:38     Registered
10  4             Sita          9876543210  2012-12-12 15:41:00     Registered 
```

**医生_工作计划**

```
id   doctor_id    weeks             time           no_of_patients
------------------------------------------------------------------
1       1         3,6,7         9:00am-1:00pm          10
2       2         3,4,5         1:00pm-4:00pm          7
3       3         3,6,7         10:00am-2:00pm         10
4       4         3,4,5,6       8:30am-12:30pm         12
5       5         3,4,5,6,7     9:00am-4:00pm          30 
```

**emp_leave**

```
id    empid        leavedate
--------------------------------
1   2   2012-12-05 14:42:36
2   2   2012-12-03 14:42:59
3   3   2012-12-03 14:43:06
4   3   2012-12-06 14:43:14
5   5   2012-12-04 14:43:24 
```

我的任务是找出一个月中除了休假日期外，医生有空的所有日子。

我的查询内容如下：

```
SELECT DATE_ADD( '2012-12-01', INTERVAL
ROW DAY ) AS Date,
ROW +1 AS DayOfMonth
FROM (

SELECT @row := @row +1 AS
ROW FROM (

SELECT 0
UNION ALL SELECT 1
UNION ALL SELECT 3
UNION ALL SELECT 4
UNION ALL SELECT 5
UNION ALL SELECT 6
)t1, (

SELECT 0
UNION ALL SELECT 1
UNION ALL SELECT 3
UNION ALL SELECT 4
UNION ALL SELECT 5
UNION ALL SELECT 6
)t2, (

SELECT @row := -1
)t3
LIMIT 31
)b
WHERE DATE_ADD( '2012-12-01', INTERVAL
ROW DAY )
BETWEEN '2012-12-01'
AND '2012-12-31'
AND DAYOFWEEK( DATE_ADD( '2012-12-01', INTERVAL
ROW DAY ) ) =2
AND DATE_ADD( '2012-12-01', INTERVAL
ROW DAY ) NOT
IN (

SELECT DATE_FORMAT( l.leavedate, '%Y-%m-%d' ) AS date
FROM doctors_dutyplan d
LEFT JOIN emp_leave AS l ON d.doctor_id = l.empid
WHERE doctor_id =2
) 
```

这适用于所有在一个月内某一天休假的医生（在此示例中为 2012 年 12 月）。上述查询的结果如下所示：

```
Date         DayOfMonth
-----------------------
2012-12-10       10
2012-12-17       17
2012-12-24       24
2012-12-31       31 
```

但另一方面，对于没有请假的医生，因为我的查询显示的是空表，例如对于 id 为 1 的医生 Mathew，我的查询返回一个空结果

谁能告诉这个问题的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:12:41.707

您的查询很大，但这部分看起来很可疑：

```
NOT IN (
    SELECT DATE_FORMAT( l.leavedate, '%Y-%m-%d' ) AS date
    FROM doctors_dutyplan d
    LEFT JOIN emp_leave AS l ON d.doctor_id = l.empid
    WHERE doctor_id =2 
```

将为医生 1 返回a的`left join`平均值。现在，它的行为与您预期的不同。它转化为：`null``col1 not in (null)`

```
col1 <> null 
```

这从来都不是真的。您可以通过将 更改为`left join`来解决此问题，因此无需请假就为医生返回`inner join`一个空集而不是。`null`

# asp.net - 如何在 mvc 4 中使用多项选择？

> ID：13776851
> 
> 赞同：18
> 
> 时间：2012-12-08T11:02:58.157
> 
> 标签：asp.net, html, asp.net-mvc, razor

我想在 [Chosen](http://harvesthq.github.com/chosen/)中使用多项选择。我有类似的技能模型，

```
public class Skill 
    {
        public int Id { get; set; }
        public string Name { get; set; }        
    } 
```

这适用于我的应用程序：

```
 <select data-placeholder="Choose a Country..." class="chzn-select" multiple >
           <option value=""></option>
           <option value="United States">United States</option>
           <option value="Albania">Albania</option>
           <option value="Algeria">Algeria</option>
   </select> 
```

我想用我的数据替换国家数据。在控制器中我写：

```
 var list = MyService.LoadAllSkills();
        ViewBag.Skills = new MultiSelectList(list, "Id", "Name"); 
```

鉴于：

```
@Html.ListBox("Name", ViewBag.Skills as MultiSelectList,
              new { @class = "chzn-select" } ) 
```

**@Html.ListBox()**和**@Html.DropDownList()**的查看结果不一样`<select>`

我得到这样的结果：

![在此处输入图像描述](../Images/e86692034fbe432c8471d73875104d29.png)

但是，我想得到结果

![在此处输入图像描述](../Images/94a01d9e7651ad740ef4f933ce5d1f5f.png)

如何更改选择的样本？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T14:49:48.943

我可以看到硬编码示例（您说它正在工作）与您使用 ListBox 帮助程序生成的示例之间的唯一区别是缺少该`data-placeholder`属性。所以：

```
@Html.ListBox(
    "Countries", 
    ViewBag.Skills as MultiSelectList,
    new { @class = "chzn-select", data_placeholder = "Choose a Country..." } 
) 
```

这至少应该生成与您所说的相同的标记。如果它不起作用，那么可能您没有正确设置插件或者您有其他一些 javascript 错误。阅读插件的文档，了解它应该如何设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T20:51:27.133

正如其他人提到的那样，您的问题原因似乎不是服务器端（剃刀），它实际上是客户端（很可能是您的 Jquery 插件初始化）。

可能在调用html DOM的插件初始化还没有生成的时候，把你的插件初始化脚本放在body的末尾或者里面`$(document).ready()`，别忘了看一下控制台看看有没有错误

快乐编码

# c# - 与 jQuery 和 KnockoutJs 配合良好的 Razor 和 WebForms 视图引擎的替代品？

> ID：13776852
> 
> 赞同：1
> 
> 时间：2012-12-08T11:03:04.587
> 
> 标签：c#, asp.net-mvc, razor, nvelocity

我坚持使用 .NET 3.5，因此使用 MVC3 是不可能的。在尝试了 MVC2 之后，我不得不说我更喜欢 Monorail 2.0，尤其是它使用的 nVelocity 视图引擎。但与此同时，我读到了 nVelocity 和 jQuery/KnockoutJs 关键字“$”之间可能存在的冲突，我很好奇 ServiceStack 的 Razor 视图引擎是否适用于 3.5。我在他们的文档中没有找到任何指定这一点的内容。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:04:31.240

你应该看看[ServiceStack](http://www.servicestack.net/)的实现。他们有我们正在使用的 Razor 引擎和 Markdown 视图引擎。它在 Windows 和 Lunix 上完美运行（在 Mono 下），目前他们也有超过 100 个项目的贡献者。我们最近开始将它用于服务和 UI，并放弃了 WCF 和 MVC，转而支持服务堆栈实现。对不起，我应该说它在 3.5 上运行

# c# - 在不同的线程中设置 MdiParent 属性

> ID：13776857
> 
> 赞同：0
> 
> 时间：2012-12-08T11:03:40.390
> 
> 标签：c#, winforms, mdiparent

我怎样才能设置`MdiParent`在不同的表单上运行`Thread`？

```
 Form2 _frmloading;
        private void thread2()
        {
            _frmloading = new Form2();
            _frmloading.TopMost = false;
            _frmloading.ShowInTaskbar = false;
            //Doesn't Work
            //MethodInvoker method = new MethodInvoker(delegate
            //    {
            //        _frmloading.MdiParent = this;
            // });
            // method.Invoke();

            //what do i write here?

            _frmloading.ShowDialog();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            Thread LoadThread = new Thread(new ThreadStart(thread2));
            LoadThread.SetApartmentState(ApartmentState.STA);
            LoadThread.Start();
        } 
```

**这个有可能？**

# android - Android：振动时出现 NullpointerException

> ID：13776864
> 
> 赞同：0
> 
> 时间：2012-12-08T11:04:51.583
> 
> 标签：android

我正在使用以下代码，但它在振动时给出了空指针异常。

```
public Server(DroidGap gap, WebView view)    //constructor
        {
            mAppView = view;
            mGap = gap;
        }

    public Server(Context context)            //constructor
        {
            mcontext=context;

        }

public void run()  //run method

        {

                    try {

                        InetAddress serveradd =  InetAddress.getByName(serveraddress);
                        } 
                     catch (UnknownHostException e1) 
                        {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                        } 

                    DatagramPacket packet=new DatagramPacket(buf,buf.length);

                    try
                        {
                            c.socket.receive(packet);

                            dat=new String(packet.getData());

                            if(dat!=null)
                                {

                                ((Vibrator)mGap.getSystemService(Context.VIBRATOR_SERVICE)).vibrate(800);

                                cordovaExample.activity.sendJavascript("displayreciever('"+dat+"')");

                                }

                            Log.d("UDP", "s: ReceivedJI: '" + new String(packet.getData()) + "'");

                          }                  //end of try block

                     catch (IOException e) 

                           {

                                e.printStackTrace();

                           }       
                                 //end of catch block

                }  //end of run method 
```

我在以下行收到空指针异常

```
((Vibrator)mGap.getSystemService(Context.VIBRATOR_SERVICE)).vibrate(800); 
```

我无法找出原因

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:08:20.130

mGap 似乎为空

您应该使用您的代码初始化此变量，我们无法提供更多帮助...

编辑：

请告诉我的输出：

```
 Log.d("UDP", "Is this null? " + mGap);
 Log.d("UDP", "Is this null? " + mGap.getSystemService(Context.VIBRATOR_SERVICE));
 Log.d("UDP", "Is this null? " + ((Vibrator)mGap.getSystemService(Context.VIBRATOR_SERVICE))); 
```

就在崩溃线之前：

```
((Vibrator)mGap.getSystemService(Context.VIBRATOR_SERVICE)).vibrate(800); 
```

# php - PHP intval() 奇怪的结果

> ID：13776867
> 
> 赞同：1
> 
> 时间：2012-12-08T11:05:06.030
> 
> 标签：php

我遇到了一些奇怪的事情，我不知道为什么会这样！

我有一个像这样的网址：

[http://mysite.com/users/](http://mysite.com/users/)`USER_ID`

此用户 ID 可能是`INT`并且可能是`STRING`，类似于 Facebook 页面地址，如果您使用页面 ID 调用页面，它会加载它，您也可以使用页面名称（例如“my_page_name”）调用它

所以想象一个用户，它的 ID 是`1`，它的地址是`my_name` 在我的 php 页面上我需要查询数据库，但在此之前我需要知道要查看哪一列，`id`或者`page_name`

所以我提出了这个解决方案：

```
<?php
    $id = $_GET['id'];
    $id_inted = intval($_GET['id']);

    if($id == $id_inted){
    // The column which I should look into is id
    $column = 'id';
    }else{
    // The column which I should look into is page_name
    $column = 'page_name';
    }

    $query = mysql_qyery(SELECT * FROM members WHERE $column = '$id');
?> 
```

所以我测试了它，但结果很奇怪，即使我调用了这个 URL：

[http://mysite.com/users/](http://mysite.com/users/)`page_name`

有时候是这样的：`$column = 'id';`

我打开了一个新的测试页面：

```
<?php
$real_string = 'abcdefg';
$string_inted = intval($real_string);
echo "Real String is: " . $real_string . "<br />"; 
echo "The same string as int is: " . $string_inted . "<br />"; 
if($real_string == $string_inted) echo "Weird!"; else echo "Fine...";
?> 
```

结果：

```
Real String is: abcdefg
The same string as int is: 0
Weird! 
```

为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T11:34:23.103

PHP 真正与所谓的类型杂耍“联系在一起”。它是大多数 PHP 脚本中最容易出错的部分。因此，您应该始终保持安全并使用最可靠的检查。例如`intval("twelve")`将返回 0，这是一个有效的整数。但也被认为是“假”：`print if (intval("one")) ? "yup" : "nope"`将打印“nope”。

在这种情况下，使用`intval`, 结合检查整数是否大于零，应该可以解决问题：

```
<?php
$id = intval($_GET['id']);

if($id > 0){
  // The column which I should look into is id
  $column = 'id';
}else{
  // The column which I should look into is page_name
  $column = 'page_name';
}

$query = mysql_qyery(SELECT * FROM members WHERE $column = '$id');
?> 
```

或者，更短：

```
$id = intval($_GET['id']);

$column = ($id > 0) ? "id" : "page_name";
$query = mysql_qyery(SELECT * FROM members WHERE $column = '$id'); 
```

Aso 请注意 $_GET["id"] 可能未设置，这会在您的代码中引发通知。

最后，但同样重要**的是： [SQL 注入](https://xkcd.com/327/)**: `?id=LittleBobby';Drop table users`。

**edit** As commentor points out, there was a logical flaw in my code, stemming form the fact I tested it in *phpsh* only. I refactored it from using `is_int()` to `intval` and `> 0`. In a web-environment, $_GET["id"] is always a string; no matter what. Hence `is_int()` will always return `FALSE`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T11:19:47.717

要检查是否请求了数值，请使用`is_numeric`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T11:13:26.130

来自[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

```
Example       Name        Result

$a == $b      Equal       TRUE if $a is equal to $b after type juggling.

$a === $b     Identical   TRUE if $a is equal to $b,
                          and they are of the same type. 
```

`==`由于运算符和`intval()`字符串返回的类型杂耍，您的字符串被转换为整数`0`

这解释了为什么`$id == $id_inted`在您的代码中计算结果为 true。

如果您使用`===`而不是`==`不使用类型进行测试，则将执行杂耍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T11:14:52.283

PHP 在类型方面有点奇怪。

基本上，您所做的是将字符串解析为数字（因此`'abcdef'`返回 0，因为它根本不是数字），然后将原始字符串与数字进行比较。

现在，我明白为什么你会认为它应该是错误的，但 PHP 试图变得聪明。基本上，`==`将强制类型，并且如果其中一个值是数字，则几乎总是强制为数字。因此，它使用您对字符串所做的相同转换，然后进行比较。

使用`===`which 也检查类型是一个更好的主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-08T11:11:14.170

成功时 var 的整数值，失败时为 0。空数组返回 0，非空数组返回 1。（来自 php.net [intval()](http://php.net/manual/en/function.intval.php)。）

intval('abcdefg') 将触发错误并且函数返回 0。

# apache-pig - Apache Pig 将整个关系加载到 UDF

> ID：13776868
> 
> 赞同：5
> 
> 时间：2012-12-08T11:05:16.157
> 
> 标签：apache-pig

我有一个涉及 2 个 Pig 关系的 pig 脚本，可以说 A 和 B。A 是一个小关系，B 是一个大关系。我的 UDF 应该将所有 A 加载到每台机器上的内存中，然后在处理 B 时使用它。目前我是这样做的。

```
A = foreach smallRelation Generate ...
B = foreach largeRelation Generate propertyOfB;
store A into 'templocation';
C = foreach B Generate CustomUdf(propertyOfB); 
```

然后我从'templocation'加载每台机器来获得A。这有效，但我有两个问题。

1.  我的理解是我应该以某种方式使用 HDFS 缓存，但我不确定如何将关系直接加载到 HDFS 缓存中。
2.  当我在我的 UDF 中重新加载文件时，我必须编写逻辑来解析从 A 输出到文件的输出，而我宁愿直接使用包和元组（是否有内置的 Pig java 函数来将字符串解析回 Bag /元组形式？）。

有谁知道应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:15:15.683

这是一个适合你的技巧。

您首先在 A 上执行 GROUP ALL，将 A 中的所有数据“打包”到一个字段中。然后人为地在 A 和 B 上添加一个公共字段并将它们连接起来。这样，对于增强 B 中的 foreach 元组，您将拥有 A 的完整数据供您的 UDF 使用。

就像这样：

（说原来在A，你有字段fa1，fa2，fa3，在B你有fb1，fb2）

```
-- add an artificial join key with value 'xx'
B_aux = FOREACH B GENERATE 'xx' AS join_key, fb1, fb2;
A_all = GROUP A ALL;
A_aux = FOREACH A GENERATE 'xx' AS join_key, $1;
A_B_JOINED = JOIN B_aux BY join_key, A_aux BY join_key USING 'replicated';

C = FOREACH A_B_JOINED GENERATE CustomUdf(fb1, fb2, A_all); 
```

由于这是复制连接，它也只是地图侧连接。

# ms-access-2007 - 将多行文本添加到 Access 数据库

> ID：13776869
> 
> 赞同：0
> 
> 时间：2012-12-08T11:05:16.520
> 
> 标签：ms-access-2007, oledbconnection

想知道将多行文本添加到访问数据库的字段（超过 255 个文本字符）的最佳选择是什么。例如，文本将是食谱或制作菜肴的方法。例如，是否可以将文本文件添加到访问数据库的字段中？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:55:46.187

您可以使用备注字段类型。它最多可存储 63,999 个字符。

以下是详细信息：http: [//office.microsoft.com/en-au/access-help/field-data-types-available-in-access-mdb-HP005238518.aspx](http://office.microsoft.com/en-au/access-help/field-data-types-available-in-access-mdb-HP005238518.aspx)

OLE 对象还可以让您存储 Word 文档等。因此，如果您仍然缺少 63,999 个字符，您可以尝试使用它。

希望这可以帮助你

# .net - MSIL 或 .NET C# 中创建的 exe 文件的调试器

> ID：13776870
> 
> 赞同：2
> 
> 时间：2012-12-08T11:05:28.453
> 
> 标签：.net, debugging, cil

我需要调试一个用 .NET C# 编写的程序。

具体来说——我只需要查看函数调用后返回的内容。我发现我可以为此目的使用 Microsoft Visual Studio——它理解 IL。我使用 ILDASM 获得了该 exe 文件的源代码。比我获取 pdb 文件并使用 ILASM 从 IL 代码获取 exe 文件。但原始 exe 文件与我在 ILASM 之后获得的 exe 文件不同。

程序启动但我有 AccessViolation ц当我尝试执行该函数时，我需要查看其结果。程序没有被混淆。

我做错了什么或者我需要做什么才能获得成功的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:23:44.700

exe->il->exe 可能无法工作的原因有多种。除了您提到的（混淆的 IL）之外，还有一些是还包含本机代码的可执行文件，或者是（直接或间接）检查其自己的签名的数字签名的可执行文件。

一些调试器可以单步执行 IL，而无需重新构建应用程序。就个人而言，我喜欢为此使用[ILSpy](http://ilspy.net/)。请注意，最新版本的二进制文件不包含调试所需的位，您需要为此从源代码构建它。

一个替代方案应该是 MDbg：Mike Stall 报告[早在 2005 年](https://blogs.msdn.com/b/jmstall/archive/2005/11/15/updated-gui.aspx)就将 IL 步进添加到 GUI 。我没有这方面的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:04:03.843

几年前我使用过 DILE：http: [//sourceforge.net/projects/dile/](http://sourceforge.net/projects/dile/)，它让我在调试器中单步执行 IL 做得非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:50:59.513

[hvd](https://stackoverflow.com/users/743382/hvd)已经解释了执行 exe -> IL -> exe 时可能出现的问题，我不打算详述。但是，我将给您一个提示，如何以非侵入性方式检查函数的返回值。首先，您需要为您的项目启用本机调试器：

C# 应用程序：

![在此处输入图像描述](../Images/e4ec7db6edb393d96879d587fc7923a5.png)

ASP.NET：

![在此处输入图像描述](../Images/4139e992f2b47a43e1d2dbe23a9d7553.png)

然后在方法的最后一行放置一个断点，打开即时窗口并输入（这需要在每个调试会话中执行一次）：

```
.load sos 
```

然后退出函数（Shift+F11）并复制`eax`（或`rax`）注册表的值（Debug->Windows->Registers）。如果您的函数的返回类型是值类型（int、byte 等），则该值就在您的指尖（您可以将其粘贴到 Watch Window 以将其转换为十进制值）。如果它是参考值，则 e(r)ax 包含堆中对象的地址。为了查看它回到立即窗口并输入：

!do [您复制的 e(r)ax 值]

该对象将在即时窗口中显示其所有属性和字段。对于字符串，您也可以使用 Debug->Windows->Memory 窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T06:39:20.713

根据@Jason-Haley 的建议，研究 Dile，我发现它已经过时并且不再构建。

屏幕截图看起来很有希望，所以我恢复了旧的源代码，将其升级到 VS2107、NETFXSDK\4.7.2 和 Windows 10 SDK Kit（该项目目前具有 Windows 依赖项）。

在修复了一些错误并消除了一些编译器错误之后，我设法让它工作并发布了一个新的 GIT 存储库。[https://github.com/alexhiggins732/DILE-MSIL-DEBUGGER](https://github.com/alexhiggins732/DILE-MSIL-DEBUGGER)

# xcode - 错误将 NSString 转移到委托

> ID：13776877
> 
> 赞同：0
> 
> 时间：2012-12-08T11:06:23.917
> 
> 标签：xcode, delegates, nsstring, segue

我有错误：

```
[2194:c07] CoreData: error: Failed to call designated initializer on NSManagedObject class 'Event' 
2012-12-08 12:00:57.505 eventCost[2194:c07] -[Event setType:]: unrecognized selector sent to instance 0x7456dd0
2012-12-08 12:00:57.523 eventCost[2194:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Event setType:]: unrecognized selector 
```

我的 addEventController:@protocol 有协议

```
AddEventControllerDelegate
- (void) addEventControllerDidSave:(NSString *) typeText;
- (void) addEventControllerDidCancel:(Event *) personToDelete;
@end 
```

协议的实现：

```
- (void) addEventControllerDidCancel:(Event *)EventToDelete{

    [[self currentPerson] removeEventsObject:EventToDelete];
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void) addEventControllerDidSave:(NSString *)typeText{

    Event *newEvent = [[Event alloc]init];
    [newEvent setType:typeText];

    [currentPerson addEventsObject:newEvent];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我也有这个添加新事件的segue：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier]isEqualToString:@"addEvent"])
    {
        AddEventController *aec = (AddEventController *) [segue destinationViewController];
        aec.delegate = self;
    }
} 
```

我只是尝试使用 type 属性添加新事件，但我有这个错误，我不明白什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:34:18.033

问题是您正在尝试发送`NSManagedObject`消息`init`。

你需要使用`- (id)initWithEntity: (NSEntityDescription *) entity insertIntoManagedObjectContext: (NSManagedObjectContext *) context`

在此处查看文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)

# java - 春季的弃用警告

> ID：13776878
> 
> 赞同：6
> 
> 时间：2012-12-08T11:06:26.297
> 
> 标签：java, spring, warnings

应用程序启动时，我收到以下警告消息（数十次）：

```
Dec 08, 2012 5:10:41 PM org.springframework.beans.TypeConverterDelegate findDefaultEditor
WARNING: PropertyEditor [sun.beans.editors.EnumEditor] found through deprecated global PropertyEditorManager fallback - consider using a more isolated form of registration, e.g. on the BeanWrapper/BeanFactory! 
```

谷歌显示这是非常常见的消息，但不幸的是没有说明它为什么会发生。我怎样才能避免这些警告？

春季版本 2.5.6。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T07:52:48.030

添加自定义编辑器修复警告：

```
public final class EnumPropertyEditor extends PropertyEditorSupport {

    public EnumPropertyEditor() {
    }

    @Override
    public String getAsText() {
       return (String) getValue();
    }

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
       setValue(text);
   }
} 
```

在配置中：

```
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
    <property name="customEditors">
        <map>
            <entry key="java.lang.Enum">
                <bean class="package.EnumPropertyEditor">
                </bean>
            </entry>
        </map>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T12:07:18.943

它告诉您它正在使用已弃用的回退方法来查找枚举的属性编辑器，而不是使用在 Spring 中注册的属性编辑器，并且您应该考虑为枚举使用专用的属性编辑器并将其注册到 Spring，使用描述的机制在[文档](http://static.springsource.org/spring/docs/2.5.6/reference/validation.html#beans-beans-conversion-customeditor-registration)中。

如果您不这样做，您的代码将无法在 Spring 的未来版本中正常工作，因为 Spring 无法再使用这种回退机制。

也就是说，3.1.x 版本仍然有这个回退机制。

# ruby-on-rails - 排除日期的验证。

> ID：13776883
> 
> 赞同：0
> 
> 时间：2012-12-08T11:07:01.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的代码有效。我在这里遇到的问题是，从 2010 年到 1995 年，每年都会出现 11 月 31 日和 4 月 31 日这样的日期，这意味着我必须输入所有这些日期，例如 [Date.new(2012,09,31),Date.new( 2011,09,31)] 等。我试图让这个验证只在一个月和一天内工作，以避免输入过多或换句话说缩短我的代码，请参阅我的 Model/profile.rb 的描述

```
 validate :excluded_dates

private
def excluded_dates
exclusion_dates = [Date.new(2012,9,31), Date.new(2012,2,1)]
if exclusion_dates.include?(self.next_shoeing)
  self.errors.add(:next_shoeing, "cannot be on a reserved date.")
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:41:55.903

首先做`Date.new(2012,9,31)`会给你一个`ArgumentError: invalid date`. IMO 无需验证这一点，因为没有人能够构建这样的日期（只需在此模型之外处理此异常）。

所以 if`next_shoeing`是`Date`它的一个实例无论如何都不会无效。

# java - 在我的文本框中输入时，我的列表视图过滤得很好。但是，当我删除一些字母（退格）时，列表不会更新

> ID：13776886
> 
> 赞同：0
> 
> 时间：2012-12-08T11:07:24.467
> 
> 标签：java, android, listview

我断断续续地用头撞这个已经两天了。

我尝试使用 getfilter.filter() 但它没有用。所以我创建了这个代码来搜索一个列表。它可以工作，但是当我删除一些字母时，列表会卡在最后一个结果上并且永远不会更新。

例如列表：你好，嗨，汉，独奏

当我输入'h'然后你好，你好，汉出现。

当我添加一个“e”时，这就是它的“他”只有你好显示

当我删除 e 时，han 和 hi 不再出现。

```
private TextWatcher filterTextWatcher = new TextWatcher() {
     final ArrayList<String> finalItems = mItems;
    @Override
    public void afterTextChanged(Editable s) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        ArrayList<String> searchedItems = retainsSearched(mItems, s.toString());
        adapter.clear();
        for (int i = 0; i < searchedItems.size(); i++) {
            adapter.add(searchedItems.get(i));
        }
        adapter.notifyDataSetChanged();
    }

};

public  ArrayList<String> retainsSearched(ArrayList<String> mItems2, String term) {
    ArrayList<String> stations = new ArrayList<String>();
    for (int i = 0; i < mItems2.size(); i++) {
        if (mItems2.get(i).toLowerCase().startsWith(term.toLowerCase())) {
            stations.add(mItems2.get(i));
        }
    }
    return stations;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:16:15.057

> 当我输入'h'然后你好，你好，汉出现。当我添加一个“e”时，它的“he”只有当我删除 e 时才会显示 hello，han 和 hi 不会再次出现。

这很可能会发生，因为`mItems`您在 中使用`TextWatcher`的列表是支持您的适配器的列表，因此通过修改它（在过滤和清除/重新添加适配器中的项目时），您总是会减少适配器中可用的项目数量，每次过滤列表时“看到”的项目。

而是尝试`mItems`在适配器中制作初始项目（列表）的副本，并始终通过测试该副本中的项目来进行过滤（但不要修改它，只需将匹配的项目添加到适配器）。

同样，您应该使用该`getFilter()`方法。

编辑：

```
ArrayList<String> searchedItems = retainsSearched(s.toString()); 
// ...

public  ArrayList<String> retainsSearched(ArrayList<String term) {
    ArrayList<String> stations = new ArrayList<String>();
    for (int i = 0; i < copyList.size(); i++) {
        if (copyList.get(i).toLowerCase().startsWith(term.toLowerCase())) {
            stations.add(copyList.get(i));
        }
    }
} 
```

# php - PHP - 用 URL 中的别名替换从 MySQL 数据库中选择的页面 ID

> ID：13776887
> 
> 赞同：0
> 
> 时间：2012-12-08T11:07:26.710
> 
> 标签：php, mysql, url, alias

不确定标题是否很好地解释了我的问题......

我有一个包含很多页面的网站（我称它们为“部分”）。当用户单击页面链接时，PHP 脚本会从 MySQL 数据库中选择部分内容和信息，并将其显示给用户。为了避免在浏览器地址栏中显示section ID（页面是通过数据库中的section ID知识加载的），每个section关联一个不同的文件。在这些文件中，PHP 代码将 ID 传递给 $_GET 变量，然后脚本加载部分。显示的网址是这样的`http://site_domain/path/to/file_name.php`。

有没有办法避免创建真实文件并显示例如 URL 中的别名？我想在数据库表部分中添加一个新列“别名”以在 URL 中替换它。

希望我的英语和解释清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:19:16.283

我认为您可以创建某种通用控制器，它是一个页面，我们称之为 index.php，在该页面中，您可以通过一些 GET 参数传递有关您网站上该部分的一些信息。

例如：[http ://andreswebsite.com/index.php?section=home](http://andreswebsite.com/index.php?section=home)

然后在您的 index.php 代码中，您可以将用户重定向到该特定部分。您可以在数据库中拥有部分名称，因此无需传递 ID。

您还可以查看 Apache mod_rewrite 模块，我认为它可以帮助您（我不知道您是否使用 Apache 作为您的 Web 服务器）

这是文档：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

我希望这对你有所帮助。

# ruby-on-rails - 单行赋值： if (condition) variable = value1 else value2

> ID：13776888
> 
> 赞同：5
> 
> 时间：2012-12-08T11:07:35.540
> 
> 标签：ruby-on-rails

我该怎么做这样的事情？

```
if params[:property] == nil 
 @item.property = true
else 
 @item.property = false 
```

总是忘记将其写在一行中的正确语法。

在 PHP 中它会是这样的：

```
@item.property=(params[:property]==nil)true:false 
```

在rails中是一样的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T11:35:00.750

使用三元运算符：

```
@item.property = params[:property] ? true : false 
```

或强制进行布尔转换（“非非”操作）：

```
@item.property = !!params[:property] 
```

*注意：在 ruby​​ 中，不*使用真正的布尔值是一个常见的习惯用法，因为除`false`or之外的任何对象都`nil`计算为`true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:30:57.797

m_x 答案是完美的，但您可能有兴趣了解其他方法，在其他情况下可能看起来更好：

```
if params[:property] == nil then @item.property = true else @item.property = false end 
```

或者

```
@item.property = if params[:property] == nil then true else false end 
```

# iphone - UIPageviewController - 从两页模式更改为一页模式而不改变方向

> ID：13776894
> 
> 赞同：3
> 
> 时间：2012-12-08T11:08:31.923
> 
> 标签：iphone, ipad, uipageviewcontroller

我正在使用 UIPageViewController 一次显示两个视图控制器。在显示了几个这样的视图之后，我想在不改变方向的情况下显示单视图控制器，它固定为横向。我在 iPad 上制作。

下面是我为此使用的代码：

```
-(id)initWithViewControllers:(NSMutableArray *)Controllers
{
self = [super initWithNibName:nil bundle:nil];
if(self)
{
    self.VControllers =  Controllers;

    pageController = [[UIPageViewController alloc]initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation: UIPageViewControllerNavigationOrientationHorizontal options:nil];

    self.pageController.view.frame = CGRectMake(12.0f, 10.0f, 748.0f, 985.0f);
    self.pageController.delegate = self;
    self.pageController.dataSource = self;
    [self.pageController setViewControllers:[NSArray arrayWithObject:[VControllers objectAtIndex:0] ] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:^(BOOL finished)
     {
     }];
    [self addChildViewController:self.pageController];
    [self.view addSubview:self.pageController.view];   
}
return self;
}

- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
if(UIInterfaceOrientationIsPortrait(orientation))
{
 //Set the array with only 1 view controller
    UIViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    //Important- Set the doubleSided property to NO.
    self.pageController.doubleSided = NO;
    //Return the spine location
    return UIPageViewControllerSpineLocationMin;

}

else
{
NSArray *viewControllers = nil;

    exampleViewController *currentViewController = [self.pageController.viewControllers objectAtIndex:0];

    NSUInteger currentIndex = [self.VControllers indexOfObject:currentViewController];

    if(currentIndex == 0 || currentIndex %2 == 0)
    {
        UIViewController *nextViewController = [self pageViewController:self.pageController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    else
    {
        UIViewController *previousViewController = [self pageViewController:self.pageController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    }
    //Now, set the viewControllers property of UIPageViewController
    [self.pageController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
}
}

 - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
 {
int index = [self.VControllers indexOfObject:viewController];

//[self checkViewControllers];
if (index - 1 >= 0)
{
    ind = index;
    return [self.VControllers objectAtIndex:index - 1];
}
ind = index;
return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
int index = [self.VControllers indexOfObject:viewController];
//[self checkViewControllers];
if (index + 1 < [self.VControllers count])
{
    ind = index;
    return [self.VControllers objectAtIndex:index + 1];
}
ind = index;

return nil;
} 
```

我需要的是在显示双视图几次后显示单视图控制器。这个功能我还不能激活。任何人都可以为此提供指导。

提前致谢。

# actionscript-3 - 弹性弹出管理器

> ID：13776897
> 
> 赞同：0
> 
> 时间：2012-12-08T11:09:28.167
> 
> 标签：actionscript-3, flash, apache-flex

我想用我的服务器创建一个 pm 系统。我怎样才能让它工作？这是我的概念

```
public function messagePopUp(_userName:String,_target:String,msg:String):void{
//Server sends _userName the person who sent the pm, _target which is you, and a msg (pm)
            if(_target == _username){
//Server checks if you're the _target so popUp will show up
//If it does create the pop up and set window title and the msg in popUp chatTxt text area
                var win:Window = new Window()
                win.title = _userName
                win.chatTxt.text = msg;
                PopUpManager.addPopUp(win,this,false)
                PopUpManager.centerPopUp(win);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:32:28.340

如果我正确理解您的问题：

使用可以绑定到 UI 元素的公共变量创建一个面板（mx:titlewindow 有效）。当你创建它时，用你的值填充它。

示例： [http ://www.riacodes.com/flex/build-a-popup-window-with-flex/](http://www.riacodes.com/flex/build-a-popup-window-with-flex/)

因此，您只需将代码更改为：

> var mywin:MyWindowClass = new MyWindowClass();

# javascript - 如何构造日期范围查询？

> ID：13776898
> 
> 赞同：2
> 
> 时间：2012-12-08T11:09:30.990
> 
> 标签：javascript, mongodb

我的mongo文件如下

```
{{

"startTime" : "2012-12-06T18:30:00.000Z",
"endTime" : "2012-12-07T18:30:00.000Z",
"cost" : "40",
"_id" : ObjectId("50c31b65d2dfa2271b000001")
}
{

"startTime" : "2012-12-07T18:30:00.000Z",
"endTime" : "2012-12-08T18:30:00.000Z",
"cost" : "40",
"_id" : ObjectId("50c31b65d2dfa2271b000001")
}
{

"startTime" : "2012-12-05T18:30:00.000Z",
"endTime" : "2012-12-07T18:30:00.000Z",
"cost" : "40",
"_id" : ObjectId("50c31b65d2dfa2271b000001")
}
} 
```

我曾尝试根据日期范围查询mongo文档，我的查询如下：

```
db.collection.find({"startTime":{"$gte":"2012-12-05T18:30:00.000Z"},"endTime":  {"$lt":"2012-12-12T18:30:00.000Z"}}); 
```

响应为空...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:49:59.343

如下更改您的查询，它将按预期返回结果。

```
db.collection.find({"startTime":{"$gte":ISODate("2012-12-05T18:30:00.000Z")},"endTime":  {"$lt":ISODate("2012-12-12T18:30:00.000Z")}}); 
```

# javascript - 画布鼠标悬停弧

> ID：13776900
> 
> 赞同：1
> 
> 时间：2012-12-08T11:09:41.740
> 
> 标签：javascript, canvas, automatic-ref-counting, mouseevent

我有一个简单的问题 - 是否有检测画布弧上的鼠标悬停事件的选项？我想制作半径为 10 的弧，当鼠标悬停时“做某事”。我试图做这样的事情：

```
context.arc(100,200,10,0,2*Math.PI);
canvas.addEventListener('mouseover', function(e) {
    if(e.clientX == 100 && e.clientY == 200 ){
        alert('omg');
    };
}); 
```

...但它只会在鼠标恰好位于 x=100、y=200 位置时显示（而且我不确定它是否会工作）...我不想使用 KinectJS。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:18:15.820

我不知道你的场景有多复杂。如果您在画布上只有那个弧，您可以`getPixel`在鼠标悬停时使用颜色拾取 ( ) 并将颜色与弧颜色进行比较。

如果场景更复杂，并且您有多个具有相同颜色的形状，您可以维护另一个隐藏的画布，您可以在其中以特定颜色（每个对象使用不同的颜色）绘制形状。然后对该画布执行颜色选择检查。

# sql - 如何转义 Oracle 标识符中的双引号字符？

> ID：13776902
> 
> 赞同：2
> 
> 时间：2012-12-08T11:10:05.547
> 
> 标签：sql, oracle

如何转义 Oracle 标识符中的双引号字符？

这不起作用：

```
CREATE TABLE "foo""bar" ("xxx" CHAR(1)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T11:14:35.117

[这是不可能的](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements008.htm)：

> 带引号的标识符可以包含任何字符和标点符号以及空格。但是，带引号和不带引号的标识符都不能包含双引号或空字符 (\0)。

# c++ - XNAMath SIMD 性能

> ID：13776903
> 
> 赞同：0
> 
> 时间：2012-12-08T11:10:09.783
> 
> 标签：c++, math, directx, simd, directx-11

我测试了 XNAMath 性能，看起来在我的带有 SIMD 内在函数的 pc 版本上的性能低于没有 simd 的性能。

我使用计算点积的函数。我在没有 simd 的情况下测试了这段代码：

```
XMVECTOR4 Result;
Result.m128_f32[0] =
Result.m128_f32[1] =
Result.m128_f32[2] =
Result.m128_f32[3] = V1.m128_f32[0] * V2.m128_f32[0] + V1.m128_f32[1] * V2.m128_f32[1] + V1.m128_f32[2] * V2.m128_f32[2] + V1.m128_f32[3] * V2.m128_f32[3];
return Result; 
```

这与：

```
XMVECTOR4 vTemp2 = V2;
XMVECTOR4 vTemp = _mm_mul_ps(V1,vTemp2);
vTemp2 = _mm_shuffle_ps(vTemp2,vTemp,_MM_SHUFFLE(1,0,0,0)); // Copy X to the Z position and Y to the W position
vTemp2 = _mm_add_ps(vTemp2,vTemp);          // Add Z = X+Z; W = Y+W;
vTemp = _mm_shuffle_ps(vTemp,vTemp2,_MM_SHUFFLE(0,3,0,0));  // Copy W to the Z position
vTemp = _mm_add_ps(vTemp,vTemp2);           // Add Z and W together
return XM_PERMUTE_PS(vTemp,_MM_SHUFFLE(2,2,2,2));    // Splat Z and return 
```

在这个循环中：

```
for (int i = 0; i < 10000000; i++)
{
    volatile XMVECTOR4 d = MVector4Dot(v1, v2);
} 
```

在发布模式下，没有 simd 的版本大约需要 9 毫秒，大约 20 毫秒。

哪些原因可能会影响 SIMD 性能？

谢谢。

**更新：**我用“/arch:SSE2”选项编译程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:46:14.957

SSE 并没有真正为此设置 - 您正在尝试添加不适合 SIMD 的“水平”。您可以搜索（Google 或 SO）array-of-structures 与 structure-of-arrays，以获得更详细的答案。我可以告诉你，如果你的处理器支持 SSE3，你有：

```
/* apologies - this is 'C' ... */

v0 = _mm_mul_ps(V1, V2);
v0 = _mm_hadd_ps(v0, v0);
v0 = _mm_hadd_ps(v0, v0); /* dot product splat across all elements. */ 
```

同样，“haddps”的延迟非常高——指令更少，但可能比没有 SIMD 的代码慢。一旦开始交错操作，就有可能隐藏延迟。如果您的处理器支持 SSE 4.1，您可以使用：

```
v0 = _mm_dp_ps(V1, V2, 0xff); /* dot product splat across all elements. */ 
```

如果您的代码针对更新的处理器，这*可能会*产生更好的性能。

# android - 转移到另一个活动并等待反馈

> ID：13776906
> 
> 赞同：0
> 
> 时间：2012-12-08T11:10:28.197
> 
> 标签：android, android-activity

怎么做：我正在触摸按钮。然后应用程序将我转移到另一个活动。然后我选择一些选项之一，应用程序返回到以前的 Activity 并向那里发送有关我选择的信息。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:28:44.413

使用 startActivityForResult

第一个活动：

```
 Intent intent = new Intent(this, SecondActivity.class);
    startActivityForResult(intent, 1);

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  if(resultCode==RESULT_OK && requestCode==1){
   String msg = data.getStringExtra("result");
   //Your code...
  } 
```

在第二个活动中：

```
Intent intent = getIntent();
String result = "blablabla";
intent.putExtra("result",result);
setResult(RESULT_OK,intent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:28:22.267

我认为 SharedPreference 和 onResume 的组合会起作用。第一次开始第一个 Activity 时，没有保存 SharedPrefrence。onResume 在第一次启动时被调用，但是如果 SharedPreference 为空，你必须进行某种切换，它什么都不做。

然后你去第二个活动。你做了一些改变 SharedPreference 的事情（例如 Button）。保存首选项后，您可以返回到您的第一个活动。

返回时会调用 onResume ，您可以根据自己的选择做任何事情。根据您的问题，这在理论上可行。

# android - 如何更改默认的android通话屏幕（呼出和呼入）

> ID：13776908
> 
> 赞同：1
> 
> 时间：2012-12-08T11:10:50.330
> 
> 标签：android

我想知道如何在当前的 android 调用和接收屏幕中添加额外的字段？像一个地区的区号之类的？我正在寻找仅从何处开始的指针。有人可以帮助我吗？只是为了让人们相信这确实是可能的，执行此操作的应用程序的链接是[https://play.google.com/store/apps/details?id=ardent.androidapps.callerinfo。视图&hl=zh-CN](https://play.google.com/store/apps/details?id=ardent.androidapps.callerinfo.views&hl=en)

![在此处输入图像描述](../Images/e7e88f39d0dda0d8b09862bc216a11cc.png)

# java - android webview在特定区域缩放

> ID：13776909
> 
> 赞同：0
> 
> 时间：2012-12-08T11:10:51.563
> 
> 标签：java, android, webview

是否可以在 webview 中显示网站中的区域。不显示整个页面。

我有这个网站[http://roosters.gepro-osi.nl/roosters/rooster.php?leerling=116277&type=Leerlingrooster&afdeling=12-13_OVERIG&school=905](http://roosters.gepro-osi.nl/roosters/rooster.php?leerling=116277&type=Leerlingrooster&afdeling=12-13_OVERIG&school=905)。

我只想在 webview 中显示表格。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:47:23.003

我认为缩放到正确的区域有点脏。当页面更改布局时，您需要更新您的应用程序。此外，它在您的屏幕上可能看起来不错，但在其他屏幕上可能很难看。

我的想法是在加载页面的上下文中使用 JavaScript 来操作 DOM，以便只显示表格（这是一个简单的`<table>`）。看到这个问题：[在 Android Webview 中，我可以修改网页的 DOM 吗？](https://stackoverflow.com/q/2219074/717341)

如果您可以影响页面上的 HTML，请帮助自己并为所需的表指定一个 id。

# iphone - 0 在货币类型输入中不起作用

> ID：13776912
> 
> 赞同：3
> 
> 时间：2012-12-08T11:11:13.157
> 
> 标签：iphone, objective-c, ios

我以货币形式输入，例如 54 转换为 0.54，但是当我尝试输入 100 时，我只以 0.1 的形式输出。代码不适用于`0`. 您不能将值输入为`100.00`。我使用的代码是

```
 (BOOL)textField:(UITextField *)transactionAmount shouldChangeCharactersInRange:(NSRange)range
replacementString:(NSString *)string
{

    NSString *substring = transactionAmount.text;
    substring = [substring stringByAppendingString:string];
    NSLog(@"Text : %@",substring);

    NSString *cleanCentString = [[transactionAmount.text
                                  componentsSeparatedByCharactersInSet:
                                  [[NSCharacterSet decimalDigitCharacterSet] invertedSet]]
                                 componentsJoinedByString:@""];
    // Parse final integer value
    NSInteger centAmount = cleanCentString.integerValue;
    // Check the user input
    if (string.length > 0)
    {
        // Digit added
        centAmount = centAmount * 10 + string.integerValue;
    }
    else
    {
        // Digit deleted
        centAmount = centAmount / 10;
    }
    // Update call amount value
    NSNumber *amount = [[NSNumber alloc] initWithFloat:(float)centAmount / 100.0f];
    // Write amount with currency symbols to the textfield
    NSNumberFormatter *_currencyFormatter = [[NSNumberFormatter alloc] init];
    // [_currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [_currencyFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [_currencyFormatter setCurrencyCode:@"USD"];
    [_currencyFormatter setNegativeFormat:@"-¤#,##0.00"];
    self.transactionAmount.text = [_currencyFormatter stringFromNumber:amount];
  //  [self SetMainMessage:customTipsValue.text];

    return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:20:59.687

我的理解是

如果输入的值为 0，则需要 0。

如果输入的值介于 1 到 99 之间，则需要 0.01 到 0.99。

如果输入的值是 1 或更大，则同样需要 1.00。

你为什么不直截了当`float requiredCurrency=inputCurrency/100.0f;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:08:57.963

您最初的大多数“字符串清理”都是错误的，并且您的数字格式化程序不正确。它应该是这样的：

```
- (BOOL)textField:(UITextField *)transactionAmount shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *substring = transactionAmount.text;
    substring = [substring stringByReplacingCharactersInRange:range withString:string];
    NSLog(@"New Text : %@",substring);

    NSString *cleanCentString = [[substring
                              componentsSeparatedByCharactersInSet:
                              [[NSCharacterSet decimalDigitCharacterSet] invertedSet]]
                             componentsJoinedByString:@""];

    // Parse final integer value
    NSInteger centAmount = cleanCentString.integerValue;

    // Update call amount value
    NSNumber *amount = [[NSNumber alloc] initWithFloat:centAmount / 100.0f];

    // NOTE: make this an instance variable and set it up just once
    // Write amount with currency symbols to the textfield
    NSNumberFormatter *_currencyFormatter = [[NSNumberFormatter alloc] init];
    [_currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [_currencyFormatter setCurrencyCode:@"USD"];
    [_currencyFormatter setNegativeFormat:@"-¤#,##0.00"];

    self.transactionAmount.text = [_currencyFormatter stringFromNumber:amount];

    return NO;
} 
```

如果出于某种原因，您想使用小数格式而不是货币格式，请确保将最小和最大小数位数（小数位）设置为 2。

你真的想硬编码美元吗？在其他国家使用该应用程序的人呢？

您的原始字符串清理没有正确支持使用剪切、复制或粘贴的用户。它还使用了错误的文本来创建`cleanCentString`.

# android - 如何知道用户是否真的需要使用滚动条？

> ID：13776914
> 
> 赞同：0
> 
> 时间：2012-12-08T11:11:20.737
> 
> 标签：android, android-scrollbar

所以我有这个 android 应用程序，其中的菜单有很多按钮。我已经为屏幕较小的手机设置了滚动条，它们需要向下滚动才能看到所有按钮，但对于屏幕较大的手机，无需滚动，因为所有按钮都可见。

我需要提醒那些需要使用对话框或其他东西向下滚动的用户，但需要为那些不需要滚动的用户做任何事情。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T12:13:38.753

```
scrollView.getViewTreeObserver().addOnGlobalLayoutListener(
                new ViewTreeObserver.OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {  
                    int scrollRange = scrollView
                                .computeVerticalScrollRange();
                    if(scrollRange>screenHeight){
                     //user need to scroll
                     }

                    }
                }); 
```

# android - 跨 Android 的 RSA 解密 - iPhone

> ID：13776916
> 
> 赞同：5
> 
> 时间：2012-12-08T11:11:56.510
> 
> 标签：android, iphone, objective-c, encryption, rsa

我正在尝试实现一个系统，其中 A 生成一个 RSA 密钥对并将公钥发送给 B。B 然后生成一个 AES 密钥并使用公钥对其进行加密，将结果发送回 A。A 然后解密 AES 密钥使用其 RSA 私钥，使用 AES 密钥加密数据并将其发送给 B，然后 B 可以使用 AES 密钥对其进行解密。

我已经在 Android 端完成了这一切，但我无法让 iPhone 端玩球（我是 Objective C 的新手，所以这可能就是原因！）

最初，我在使用 RSA 私钥解密 AES 密钥时收到错误 9809，这无济于事地转化为一般错误。研究错误指向填充（我正在使用 PKCS1 填充）是问题，切换到无填充允许 iPhone 客户端成功解密，但解密的 AES 密钥与 Android 客户端上生成的不同。

Objective C对我来说很新，我确定我只是犯了一个小学生的错误，有人能指出我正确的方向吗？

**iPhone RSA 密钥对生成**

```
static const unsigned char _encodedRSAEncryptionOID[15] = {

    /* Sequence of length 0xd made up of OID followed by NULL */
    0x30, 0x0d, 0x06, 0x09, 0x2a, 0x86, 0x48, 0x86,
    0xf7, 0x0d, 0x01, 0x01, 0x01, 0x05, 0x00

};

NSData * publicTag = [publicKeyIdentifier dataUsingEncoding:NSUTF8StringEncoding];

// Now lets extract the public key - build query to get bits
NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

[queryPublicKey setObject:(__bridge id) kSecClassKey
                   forKey:(__bridge id) kSecClass];
[queryPublicKey setObject:publicTag
                   forKey:(__bridge id) kSecAttrApplicationTag];
[queryPublicKey setObject:(__bridge id) kSecAttrKeyTypeRSA
                   forKey:(__bridge id) kSecAttrKeyType];
[queryPublicKey setObject:[NSNumber numberWithBool:YES]
                   forKey:(__bridge id) kSecReturnData];

CFTypeRef pk;
OSStatus err = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, &pk);

NSData* publicKeyBits = (__bridge_transfer NSData*)pk;

if (err != noErr) {
    return nil;
}

// OK - that gives us the "BITSTRING component of a full DER
// encoded RSA public key - we now need to build the rest

unsigned char builder[15];
NSMutableData * encKey = [[NSMutableData alloc] init];
int bitstringEncLength;

// When we get to the bitstring - how will we encode it?
if  ([publicKeyBits length ] + 1  < 128 )
    bitstringEncLength = 1 ;
else
    bitstringEncLength = (([publicKeyBits length ] +1 ) / 256 ) + 2 ;

// Overall we have a sequence of a certain length
builder[0] = 0x30;    // ASN.1 encoding representing a SEQUENCE
// Build up overall size made up of -
// size of OID + size of bitstring encoding + size of actual key
size_t i = sizeof(_encodedRSAEncryptionOID) + 2 + bitstringEncLength +
[publicKeyBits length];
size_t j = encodeLength(&builder[1], i);
[encKey appendBytes:builder length:j +1];

// First part of the sequence is the OID
[encKey appendBytes:_encodedRSAEncryptionOID
             length:sizeof(_encodedRSAEncryptionOID)];

// Now add the bitstring
builder[0] = 0x03;
j = encodeLength(&builder[1], [publicKeyBits length] + 1);
builder[j+1] = 0x00;
[encKey appendBytes:builder length:j + 2];

// Now the actual key
[encKey appendData:publicKeyBits];

// Now translate the result to a Base64 string
Base64* base64 = [[Base64 alloc] init];
NSString* ret = [base64 encode:encKey];

return ret; 
```

**重新创建公钥，生成 AES 密钥并在 Android 上对其进行加密** （注意`getBytes(...)`，`getString(...)`只需执行一些 base64 编码。解码）

```
KeyGenerator keyGen  = KeyGenerator.getInstance("AES");
keyGen.init(256, new SecureRandom());
SecretKey secretKey = keyGen.generateKey();

byte[] publicKeyBytes = getBytes(publicKey.getKey());
PublicKey rsaKey = KeyFactory.getInstance("RSA")
    .generatePublic(new X509EncodedKeySpec(publicKeyBytes));

Cipher cipher = Cipher.getInstance(RSA);
cipher.init(Cipher.ENCRYPT_MODE, rsaKey);

String keyEncoded = getString(key);

return getString(encryptedKeyBytes)); 
```

**解密 iPhone 上的 AES 密钥**

```
Base64* base64 = [[Base64 alloc] init];
NSData* cipherText = [base64 decode:textBase64];

const uint8_t *cipherBuffer = (const uint8_t*)[cipherText bytes];

size_t cipherBufferSize = strlen((char *) cipherBuffer);

uint8_t *plainBuffer = (uint8_t *)calloc(SecKeyGetBlockSize(publicKey), sizeof(uint8_t));
size_t plainBufferSize = SecKeyGetBlockSize(publicKey);

OSStatus status = SecKeyDecrypt(privateKey,
                       kSecPaddingPKCS1,
                       &cipherBuffer[0],
                       cipherBufferSize,
                       &plainBuffer[0],
                       &plainBufferSize
                       );

NSData* finalData = [[NSData alloc] initWithBytes:plainBuffer length:plainBufferSize];
NSString *result = [base64 encode:finalData];

return result; 
```

编辑：我想我已经缩小了这个范围，下面的代码来自我的代码的解密 AES 密钥部分：

```
NSData* cipherText = [base64 decode:text];
NSLog(@"cipherText %@", cipherText);
const uint8_t *cipherBuffer = (const uint8_t*)[cipherText bytes];
NSLog(@"cipherBuffer %s", cipherBuffer);

size_t cipherBufferSize = strlen((char *) cipherBuffer);
NSLog(@"cipherBufferSize %zd", cipherBufferSize); 
```

在控制台中产生以下输出：

```
cipherText <31226275 cc56069a e96b7f6f 0fbee853 32d07de6 436755c9 e27b88a6 04176947     d57f7108 de68e5b8 49595e9f 09bceb30 1d615927 c205f205 eb644fa7 bff6c02b 885605de eb5bd4ee 473bb4d3 df768017 24552706 ea67f347 2952614e ad63f3c6 eb0022d3 a0513afa 0e59ba63 cb5c9787 a40ecad4 a866fdc7 26b60cc2 088a3499 a84c0595 fb1c2be8 5c85b88d 7856b4bd 655f6fec 905ca221 d6bb03c0 7329410b b235ef8f 1ef97a64 7fabb280 90118ff7 4b1e91f6 162134fc 5cbf962e 813e39e7 993b0fb9 e3c4b30c ef6a7b90 9d64c41a 1211ab34 c2c52235 d2ec3b65 d1314cee 70eafe65 f4a6c5e4 660cf889 4540a784 d14cc5a8 49a12c43 c76f7f03 5fbcd44f>
cipherBuffer 1"buÃVöÈkoæËS2–}ÊCgU…‚{à¶iG’qﬁhÂ∏IY^ü  ºÎ0aY'¬ÚÎdOßøˆ¿+àVﬁÎ[‘ÓG;¥”ﬂvÄ$U'ÍgÛG)RaN≠cÛ∆Î
cipherBufferSize 97 
```

然而，有时它会按预期输出 256 的密码缓冲区大小，并且解密效果很好！我知道我一定遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T11:45:30.020

您的问题在于该`strlen`函数，该函数通常不适用于二进制数据，它仅适用于表示文本的二进制数据，并且以零值字节 ( `\0`) 结束。相反，您应该使用密文的实际大小。

因此，如果密文包含零值字节，或者如果密文后面没有直接跟随零值字节，那么目前您的代码块将失败。

# javascript - 如何使用javascript从数组中减去特定值

> ID：13776919
> 
> 赞同：1
> 
> 时间：2012-12-08T11:12:26.457
> 
> 标签：javascript, javascript-events

我正在使用 javascript 创建一个程序，同时单击按钮它将选择一个座位并将其背景颜色更改为绿色，同时按钮值将被添加到文本字段并相应地切换。

问题：我正在使用数组将所有值添加到文本字段，这很成功，但在切换期间它无法从数组中减去特定的单击按钮值。

在这里我无法使用 jquery，因为此页面来自 ajax 页面加载

这是页面截图[http://i49.tinypic.com/206obo2.png](http://i49.tinypic.com/206obo2.png)

```
// JavaScript Document

var Cur_id;
var Cur_val;

function setId(id, value) {
    Cur_id = id;
    Cur_val = value;
    var SeatVal = document.getElementById(id);
    if (SeatVal.style.backgroundImage == "") {
        SeatVal.style.backgroundImage = "url(\'themes/frontend/images/greenseat.png\')";
        var txbtElementSeat = new Array(document.getElementById("selectedseat").value += Cur_val + ",");
    } else if (SeatVal.style.backgroundImage == 'url("themes/frontend/images/greenseat.png")') {
        SeatVal.style.backgroundImage = "url(\'themes/frontend/images/seat.png\')";
        var txbtElementSeatnbg = document.getElementById("selectedseat").value;
        removeSeat(txbtElementSeatnbg, Cur_val);

        function removeSeat(txbtElementSeatnbg, value) {
            for (var i = 0; i <= txbtElementSeatnbg.length; i++) {
                if (txbtElementSeatnbg[i] == value) {
                    txbtElementSeatnbg.splice(i, 1);
                    break;
                }
            }
        }
    } else if (SeatVal.style.backgroundImage == 'url("themes/frontend/images/seat.png")') {
        SeatVal.style.backgroundImage = "url(\'themes/frontend/images/greenseat.png\')";
        var txbtElementseatnb = document.getElementById("selectedseat").value += Cur_val + ",";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:41:20.217

您的主要问题似乎是您尝试将数组保存到文本字段中。这实际上会起作用，但会将数组转换为字符串表示形式。

`var a = document.getElementById('selectedseat').value;`因此将数组的字符串表示加载到变量“a”中，而不是数组本身！

为什么不在外部上下文中使用变量（而不是 setId() 的局部函数范围！）来保存数组？也许有点像这样：

```
// Create a variable for the array!
var selectedSeats = new Array();

// Build a function that will update the textfield.
// Call this, whenever the array gets changed!
function updateListOfSelectedSeats() {
    document.getElementById('selectedseat').value = selectedSeats.join(',');
}

// Removes a seat from the list of selected seats
function removeSeatFromList(seat) {
    for (var i = 0; i < selectedSeats.length; i++) {
        if (selectedSeats[i] == seat) {
            selectedSeats.splice(i, 1);
            updateListOfSelectedSeats();
            break;
        }
    }
}

// Now the function that reacts to clicks on a seat
function setId(id, value) {
    var Seat = document.getElementById(id);

    switch (Seat.style.backgroundImage) {
        case 'url("themes/frontend/images/greenseat.png")':
            // Seat is already selected and needs to be deselected
            Seat.style.backgroundImage = 'url("themes/frontend/images/seat.png")';
            removeSeatFromList(value);
            break;

        case '':
        case 'url("themes/frontend/images/seat.png")':
            // Seat is empty, select it!
            Seat.style.backgroundImage = 'url("themes/frontend/images/greenseat.png")';
            selectedSeats.push(value);
            updateListOfSelectedSeats();
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T15:07:18.843

要从列表中删除座位，请使用此

```
//remove seat from list
function removeSeat(seatListElm, seatValue) {
    var arr=seatListElm.value.split(',');

     var p=arr.indexOf(seatValue);
     if(p!=-1){
         arr.splice(p, 1);
         seatListElm.value=arr.join(',');
     }
} 
```

seatListElm 将是持有`"b5,c7,d5,c2"`
seatValue 的元素将是这样的`"c7"`

* * *

工作演示代码：[JSFIDDLE](http://jsfiddle.net/Victornpb/7J8vj/)

[![JSFiddle 示例](../Images/c02c989fdbb096ea3c272af02c544bb4.png)](http://jsfiddle.net/Victornpb/7J8vj/)

# gcc - arm thumb模式代码生成——gcc arm linux编译器

> ID：13776920
> 
> 赞同：4
> 
> 时间：2012-12-08T11:12:34.047
> 
> 标签：gcc, arm

我对 ARM 拇指模式有疑问。GCC arm linux 编译器会自己生成拇指模式代码吗？
或者我们必须使用一些编译器指令来告诉编译器生成拇指模式代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:19:17.920

默认情况下在两种模式之间切换，但 -mthumb 会覆盖它。可以在此处找到 ARM 选项列表：

[http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html](http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html)

# django - django模板将对象转换为int

> ID：13776930
> 
> 赞同：1
> 
> 时间：2012-12-08T11:13:43.937
> 
> 标签：django

我正在尝试在我的 django 模板中运行此代码：

```
{% if lawChoice.releveAnnee==law.releveAnnee %} 
```

我收到以下错误：

```
Could not parse the remainder: '==law.releveAnnee' from 'lawChoice.releveAnnee==law.releveAnnee' 
```

我认为 law.releveAnnee 被视为一个对象，而不是一个整数，这就是比较失败的原因！

在此先感谢您的帮助，

罗曼

**编辑**

感谢上面的答案：在==之前和之后需要一个空格：

```
{% if lawChoice.releveAnnee == law.releveAnnee %} 
```

这行得通！解决了 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:18:41.700

可能那是因为您需要在运算符前后添加一个空格`==`。

你最好去[ifequal](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#ifequal)

```
{% ifequal lawChoice.releveAnnee law.releveAnnee %}
    ...
{% endifequal %} 
```

# c# - 返回所有机器网络接口集合

> ID：13776932
> 
> 赞同：1
> 
> 时间：2012-12-08T11:14:28.237
> 
> 标签：c#

这是我的课程，我想返回我的机器网络接口集合。我选择返回 IEnumerable，但我不知道该怎么做（我是新开发人员）。或者也许有击球手的方式来建立我的班级？

```
public class NetworkAdapter
{
    string _name;
    string _id;        
    string _description;
    string _ipAddress;
    string _gatewayIpAddress;
    string _speed;
    string _networkInterfaceType;
    string _macAddress;

    public IEnumerable<NetworkAdapter> getAdapterInfo()
    {
        foreach (var adapter in NetworkInterface.GetAllNetworkInterfaces())
        {
            //fetch network configuration properties
            var properties = adapter.GetIPProperties();
            foreach (var uniCast in properties.UnicastAddresses)
            {
                //ignore loop-back addresses & IPv6 internet protocol family
                if (!IPAddress.IsLoopback(uniCast.Address) 
                    && uniCast.Address.AddressFamily != AddressFamily.InterNetworkV6) 
                {
                    _name = adapter.Name;
                    _id = adapter.Id;
                    _description = adapter.Description;
                    _ipAddress = uniCast.Address.ToString();
                    _networkInterfaceType = adapter.NetworkInterfaceType.ToString();
                    _speed = adapter.Speed.ToString("#,##0");

                    _macAddress = adapter.GetPhysicalAddress().ToString();

                    var gatewayAddresses = adapter.GetIPProperties().GatewayAddresses;
                    foreach (var gatewayAddress in gatewayAddresses)
                    {
                        _gatewayIpAddress = gatewayAddress.Address.ToString();
                    }
                }
            }
        }

        yield return new NetworkAdapter att;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:50:46.603

你可以使用 linq：

```
return from adapter in NetworkInterface.GetAllNetworkInterfaces()
       from uniCast in adapter.GetIPProperties().UnicastAddresses
       where !IPAddress.IsLoopback(uniCast.Address) && uniCast.Address.AddressFamily != AddressFamily.InterNetworkV6
       let lastGatewayAddress = adapter.GetIPProperties().GatewayAddresses.LastOrDefault()
       select new NetworkAdapter
       {
           _name = adapter.Name,
           _id = adapter.Id,
           _description = adapter.Description,
           _ipAddress = uniCast.Address.ToString(),
           _networkInterfaceType = adapter.NetworkInterfaceType.ToString(),
           _speed = adapter.Speed.ToString("#,##0"),
           _macAddress = adapter.GetPhysicalAddress().ToString(),
           _gatewayIpAddress = lastGatewayAddress == null ? null : lastGatewayAddress.Address.ToString()
       }; 
```

目前尚不清楚您要对网关地址做什么。目前看起来您想要最后一个，尽管您可能希望将它们连接成一个字符串。在这种情况下，您可以使用：

```
_gatewayIpAddress = string.Join(" ", adapater.GetIPProperties().GatewayAddresses.Select(a => a.Address)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:18:07.683

您需要创建对象`NetworkAdapter`并使用它`object`作为`yield`回报。我将私有成员更改为公共成员，以使消费者类可以访问它们。

```
public class NetworkAdapter
{
    public string Name {get; set;}
    public string Id  {get; set;}        
    public string Description  {get; set;}
    public string IpAddress  {get; set;}
    public string GatewayIpAddress  {get; set;}
    public string Speed  {get; set;}
    public string NetworkInterfaceType  {get; set;}
    public string MacAddress  {get; set;}

    public IEnumerable<NetworkAdapter> getAdapterInfo()
    {
        NetworkAdapter na = null;
        foreach (NetworkInterface adapter in NetworkInterface.GetAllNetworkInterfaces())
        {
            IPInterfaceProperties properties = adapter.GetIPProperties(); //fetch network configuration properties
            foreach (IPAddressInformation uniCast in properties.UnicastAddresses)
            {
                if (!IPAddress.IsLoopback(uniCast.Address) && uniCast.Address.AddressFamily != AddressFamily.InterNetworkV6) //ignore loop-back addresses & IPv6 internet protocol family
                {
                    na = new NetworkAdapter{ 
                    Name = adapter.Name;
                    Id= adapter.Id;
                    Description= adapter.Description;
                    IpAddress= uniCast.Address.ToString();
                    GatewayIpAddress= adapter.NetworkInterfaceType.ToString();
                    Speed= adapter.Speed.ToString("#,##0");

                    NetworkInterfaceType = adapter.GetPhysicalAddress().ToString();
                    };

                    foreach (GatewayIPAddressInformation gatewayAddress in adapter.GetIPProperties().GatewayAddresses)
                    {
                        na.GatewayIpAddress = gatewayAddress.Address.ToString();
                    }
                }
            }
             yield return na ;
        }
    }
} 
```

# python - nltk pos标签脏话

> ID：13776933
> 
> 赞同：3
> 
> 时间：2012-12-08T11:14:29.183
> 
> 标签：python, tags, nltk, part-of-speech

有没有办法使用**NLTK**显示给定文本中的**填充词**？如果没有，有人知道我在哪里可以得到一个*带有*英文填充词的单词表吗？谢谢你

 *****已解决：**从 nltk.corpus 导入停用词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:28:08.257

NLTK 本身并没有提供这样的列表，尽管在 Web 的其他地方可以找到许多列表。

存在相当多的来源：网络搜索带有“**亵渎**” 、 *“badwords.txt”*或*blacklists.txt*的词表会产生很多来源。

*   [noswearing.com](http://www.noswearing.com/dictionary)是一个起点。
*   像 Netnanny 和其他几个网站使用“**审查列表**”（[这个线程有一个链接](http://www.phorum.org/phorum5/read.php?63,127769)）。下载一个并从那里开始。

在我们公司的案例中，我们最终创建了自己的列表并根据需要添加到其中。根据您的受众，列表必须进行调整和调整。

最后，即使这个[SO 问题](https://stackoverflow.com/questions/273516/how-do-you-implement-a-good-profanity-filter)已关闭（以及关于 php），我发现参考资料和讨论非常有用。

**更新：**您想要的是**STOP WORDS**列表。

1.  试试：[http ://www.ranks.nl/resources/stopwords.html](http://www.ranks.nl/resources/stopwords.html)
2.  [麻省理工学院还维护着一个](http://jmlr.csail.mit.edu/papers/volume5/lewis04a/a11-smart-stop-list/english.stop)停用词列表。

希望有帮助。***

# php - PHP + MySQL - 一次不能更新多个表

> ID：13776936
> 
> 赞同：-1
> 
> 时间：2012-12-08T11:15:44.730
> 
> 标签：php, mysql

我有一个 php 表单来更新 MySQL 表。提取工作完美，但更新不起作用。这是我的表单代码：

```
<?php

$sql= "SELECT client.resID AS resID, client.resName AS resName FROM client WHERE client.resID =".$_GET["resID"];
$rs = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());

$sqlM= "SELECT menu.id AS mid, menu.name AS mname FROM menu WHERE menu.resID =".$_GET["resID"];
$rsM = mysql_query($sqlM) or die($sqlM."<br/><br/>".mysql_error());

$sqlF= "SELECT facilities.id AS fid, facilities.name AS fname FROM facilities WHERE facilities.resID =".$_GET["resID"];
$rsF = mysql_query($sqlF) or die($sqlF."<br/><br/>".mysql_error());

$sqlS= "SELECT services.id AS sid, services.name AS sname FROM services WHERE services.resID =".$_GET["resID"];
$rsS = mysql_query($sqlS) or die($sqlS."<br/><br/>".mysql_error());

// $names array now contains all names

$i = 0;

echo '<table width="50%">';
echo '<tr>';
echo '<td>ID</td>';
echo '<td>Name</td>';
echo '<td>Edit</td>';
echo '</tr>';

echo "<form name='form_update' method='post' action='client_admin_post.php'>\n";

while ($fm = mysql_fetch_array($rsM)) { // loop as long as there are more results
    $mnames[] = $fm['mname'];
    $mid[] = $fm['mid'];  // push to the array

echo '<tr>';
echo "<td>Menu :</td>";
echo "<td><input type='text' size='40' name='mname' value='{$fm['mname']}' /></td>";
echo "<td>{$fm['id']}<input type='hidden' name='mid' value='{$fm['mid']}' /></td>";
echo '</tr>';
++$i;

print_r($mnames);
}

while ($ff = mysql_fetch_array($rsF)) { // loop as long as there are more results
    $fnames[] = $ff['fname'];
    $fid[] = $ff['fid'];  // push to the array

echo '<tr>';
echo "<td>Facilities :</td>";
echo "<td><input type='text' size='40' name='fname' value='{$ff['fname']}' /></td>";
echo "<td>{$ff['id']}<input type='hidden' name='fid' value='{$ff['fid']}' /></td>";
echo '</tr>';
++$i;

}

while ($fs = mysql_fetch_array($rsS)) { // loop as long as there are more results
    $snames[] = $fs['sname'];
    $sid[] = $fs['sid'];  // push to the array

echo '<tr>';
echo "<td>Services :</td>";
echo "<td><input type='text' size='40' name='sname' value='{$fs['sname']}' /></td>";
echo "<td>{$fs['id']}<input type='hidden' name='sid' value='{$fs['sid']}' /></td>";
echo '</tr>';
++$i;

}

echo'<tr>
<td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</form>';

?> 
```

这是我的邮政编码：

```
$size = count($_POST['mname']);

$i = 0;
while ($i < $size) {
$mname= $_POST['mname'][$i];
$mid = $_POST['mid'][$i];

$query = "UPDATE menu SET name = '$mname' WHERE id = '$mid' LIMIT 1";
mysql_query($query) or die ("Error in query: $query");
echo "$mname<br /><br /><em>Updated!</em><br /><br />";
++$i;
}

$size = count($_POST['fname']);

$i = 0;
while ($i < $size) {
$fname= $_POST['fname'][$i];
$fid = $_POST['fid'][$i];

$query1 = "UPDATE facilities SET name = '$fname' WHERE id = '$fid' LIMIT 1";
mysql_query($query1) or die ("Error in query: $query1");
echo "$fname<br /><br /><em>Updated!</em><br /><br />";
++$i;
}

$size = count($_POST['sname']);

$i = 0;
while ($i < $size) {
$sname= $_POST['sname'][$i];
$sid = $_POST['sid'][$i];

$query3 = "UPDATE services SET name = '$sname' WHERE id = '$sid' LIMIT 1";
mysql_query($query3) or die ("Error in query: $query3");
echo "$sname<br /><br /><em>Updated!</em><br /><br />";
++$i;
} 
```

我在帖子页面中获得了“更新”状态，但 MySQL 表中没有任何更新。如何解决这个问题呢？非常感谢您的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:22:36.550

太长的问题，但是如果您通过帖子页面中的更新状态表示它回显了更新，如果我是对的，它将回显更新，因为您正在检查它而条件为真。但是，您是否在帖子页面中回显了发布的值，检查您是否以这种方式获得该值，以在此处询问长问题之前找到您在哪里遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:52:00.587

您正在创建多个具有相同名称的输入，例如“fname”，但您尝试访问它们，就好像它们是一个数组一样。重命名字段，如下所示：

```
echo "<td><input type='text' size='40' name='mname[]' value='name' /></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T11:52:45.997

如果您希望执行所有查询，则可以在 mysql 中使用事务处理，否则不执行。

您的帖子页面显示已更新，因为在查询结束时您只是回显“已更新”，没有条件何时应该打印。

并且您的数据没有更新，因为您没有为 mysql_query("query",$conn) 指定任何连接变量

# django - 处理来自不同视图的表单并通过 django 中的会话传递表单验证

> ID：13776938
> 
> 赞同：1
> 
> 时间：2012-12-08T11:15:44.250
> 
> 标签：django

我需要在我的 django 项目中构建一个类似评论的应用程序，该应用程序有一个视图来接收提交的表单处理它并将错误返回到它来自哪里。我终于设法让它工作，但我怀疑使用它的方式可能是错误的，因为我在会话中传递了整个经过验证的表单。

下面是代码

评论/模板标签/comment.py

```
@register.inclusion_tag('comment/form.html', takes_context=True)
def comment_form(context, model, object_id, next):
    """
    comment_form()
        is responsible for rendering the comment form
    """
    # clear sessions from variable incase it was found

    content_type = ContentType.objects.get_for_model(model)

    try:
        request = context['request']
        if request.session.get('comment_form', False):
            form = CommentForm(request.session['comment_form'])

            form.fields['content_type'].initial = 15
            form.fields['object_id'].initial = 2
            form.fields['next'].initial = next
        else:
            form = CommentForm(initial={
                'content_type'  : content_type.id,
                'object_id'     : object_id,
                'next'          : next
            })

    except Exception as e:
        logging.error(str(e))
        form = None

    return {
        'form' : form
    } 
```

评论/view.py

```
def save_comment(request):
    """
    save_comment:

    """

    if request.method == 'POST':

        # clear sessions from variable incase it was found
        if request.session.get('comment_form', False):
            del request.session['comment_form']

        form = CommentForm(request.POST)
        if form.is_valid():
            obj = form.save(commit=False)
            if request.user.is_authenticated():
                obj.created_by = request.user
            obj.save()
            messages.info(request, _('Your comment has been posted.'))
            return redirect(form.data.get('next'))
        else:

            request.session['comment_form'] = request.POST
            return redirect(form.data.get('next'))

    else:
        raise Http404 
```

用法是通过加载模板标签并触发

```
{% comment_form article article.id article.get_absolute_url %} 
```

我怀疑是否通过将经过验证的表单传递给会话来执行正确的方法。那会是个问题吗？安全风险？性能问题？

请指教

**更新**

回答波尔的问题。我采用这种方法的原因是因为评论表单是在单独的应用程序中处理的。在我的场景中，我渲染了诸如文章之类的对象，我所做的只是调用模板标签来渲染表单。我的情况有什么替代方法？

您还与我分享了 django 评论应用程序，该应用程序知道，但正在使用的客户需要在评论应用程序中完成大量复杂的工作，这就是为什么要开发一个新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T15:46:12.127

我没有看到安全问题，除非您使用 cookie 来存储会话。性能取决于您使用的会话类型。但我找不到重点，你为什么要把事情复杂化！

而且我根本不认为模板标签中的触摸会话是一个好主意。

也许看看 django[评论框架](https://docs.djangoproject.com/en/dev/ref/contrib/comments/)

**更新：**

好的。除了复杂性之外，我看不到这种方法的问题。例如在我的项目中，我使用 ajax 发送数据并在评论视图中正确验证它，因此我不需要重定向到原始页面。另一件事是我在文章视图中传递了初始化的表单，所以我没有使用模板标签。

可以为您提供我的方法，例如：

```
from forms import CommentForm
from models import Comment
from django.http import HttpResponseForbidden, HttpResponse
from django.shortcuts import get_object_or_404, redirect, render
from django.utils import simplejson
from etv_persons.person.models import Person
from django.contrib import messages

def create_comment(request,slug):
    if request.method != 'POST' or not request.POST or request.user.is_anonymous():
        return HttpResponseForbidden('Доступ запрещен')

    person = get_object_or_404(Person,slug=slug)
    form = CommentForm(data=request.POST)
    if form.is_valid():
        Comment.objects.create(user_id=request.user.id, person=person,text=form.cleaned_data['text'])
        if request.is_ajax(): 
            msg={'msg': 'Cement was send',}
        else: 
            messages.info(request, 'COmment was send.')
    else:
        if request.is_ajax(): msg={'msg': 'Error.',}
        else: messages.info(request, 'Error.')
    if request.is_ajax():
        return HttpResponse(simplejson.dumps(msg),content_type='application/json')
    else:  
        return redirect('person_details',**{"slug":slug,"ptype":person.type}) 
```

在文章视图中，我们只是这样做：

```
response['comment_form'] = CommentForm() 
```

是的，我不验证评论表。没有理由。只需一个文本输入。

# c# - Datagridview 组合框仅在某些行中

> ID：13776941
> 
> 赞同：0
> 
> 时间：2012-12-08T11:16:18.167
> 
> 标签：c#, .net, winforms, data-binding, datagridview

在我的 winforms 应用程序中，我有`DataGridView`一行使用 DataGridViewComboBoxColumn 控件，因此它包含此列的组合框。

是否可以以编程方式将该列中的某些组合框替换为其他内容？（例如标签上写着“n/a”）。我只想要某些行中的组合框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:39:31.047

您应该使用`DataGridViewComboBoxCell`属性而不是`DataGridViewComboBoxColumn`属性。如下所示：

```
for(int intCount=0;intCount<dgv.Rows.Count;intCount++)
{
   if(intCount % 2 == 0)  //Your own condition here
   {
      DataGridViewComboBoxCell cmb = new DataGridViewComboBoxCell();
      //cmb.Value   // assign values in the combobox
      dgv[0,intCount] = cmb;
   }
   else
   {
      DataGridViewTextBoxCell txt = new DataGridViewTextBoxCell();
      txt.Value = "n/a";
      dgv[0,intCount] = txt;
   }
} 
```

在上面的示例中，我在第一列中分配了单个单元格属性。

# php - 使用 php 从变量中获取 user_id

> ID：13776943
> 
> 赞同：0
> 
> 时间：2012-12-08T11:16:44.303
> 
> 标签：php, variables, text, joomla2.5

我有这个从数据库中获取的变量`$products`。现在，当我打印其中的内容时，它会显示

```
Array ( [0] => Array ( [quantity] => 1 [product_id] => 5363 [category_id] => 209 [price] => 1 [tax] => 18.00 [tax_id] => 1 [description] => [product_name] => test2 [thumb_image] => [ean] => [attributes] => a:0:{} [attributes_value] => Array ( ) [weight] => 0.0000 [vendor_id] => 0 [files] => a:0:{} [freeattributes] => a:0:{} [dependent_attr_serrialize] => a:0:{} [href] => /kategorii/product/view/209/5363.html [free_attributes_value] => Array ( ) ) ) 
```

所以我的问题是我怎样才能得到 product_id 号码？

我打印这个使用`print_r($products);`但是给了我这个错误

```
Warning: current() [function.current]: Passed variable is not an array or object in ... 
```

这是导致此问题的代码：

```
$cart = JModel::getInstance('cart', 'jshop');
        $cart->load();  
        $products=$cart->products;
        //$productos[0]['product_id'];
        print_r($products); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:18:38.200

假设您执行上述 print_r 的变量已分配给 $products：

```
$products[0]['product_id'] 
```

# ruby-on-rails - 在 Rails 3 上使用 http_accept_language gem

> ID：13776944
> 
> 赞同：0
> 
> 时间：2012-12-08T11:17:02.007
> 
> 标签：ruby-on-rails, gem, http-accept-language

我正在尝试使用这个 gem 来确定用户的首选语言，并遇到了一些麻烦。

```
undefined local variable or method http_accept_language for #<HomeController:0x964f5ec> 
```

我将 gem 包含在 Gemfile 中，运行 bundle install 并多次重新启动服务器。为什么我的应用无法识别 gem？

此外，在我的 ApplicationController 中，我编写了以下方法：

```
def set_i18n_locale
 http_accept_language.user_preferred_languages
 available = %w{en kr}
 params[:locale] = http_accept_language.preferred_language_from(available)
    if params[:locale]
        I18n.locale = params[:locale]
    end
end 
```

我不明白的一件事是第二行， `http_accept_language.user_preferred_languages`

从[https://github.com/iain/http_accept_language](https://github.com/iain/http_accept_language)，这应该返回一个排序数组。我以为我必须将数组存储到某个变量中并使用它，但作者只是抛出了这样的方法。这是如何运作的？我不能只做以下吗？

```
available = %w{en kr}
params[:locale] = http_accept_language.language_region_compatible_from(available) 
```

我只是对作者的解释有点困惑。

谢谢您的帮助。

**更新：** gem，http_accept_language，似乎没有成功安装。它在 gem 列表中，但是当我尝试卸载它时，错误消息显示它没有安装。为什么会这样？

```
max@max-VirtualBox:~/appe$ gem list

*** LOCAL GEMS ***
...
http_accept_language (1.0.2)
...

max@max-VirtualBox:~/app$ sudo gem uninstall http_accept_language
INFO:  gem "http_accept_language" is not installed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:18:27.977

尝试使用`request.user_preferred_languages`而不是`http_accept_language.user_preferred_languages`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T21:14:33.817

在[文档中指出](https://github.com/iain/http_accept_language)，从 2.0 版开始，gem 是一个 Rack 中间件，但问题是2012 年 6 月发布的[唯一 2.0 版本](https://rubygems.org/gems/http_accept_language)[只是一个 pre-release](http://semver.org/)。因此，要获得 2.0 版本，您需要执行以下操作：

```
gem 'http_accept_language', '~> 2.0.0.pre' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T09:57:23.063

我不必使用 gem 来实现我想要的功能。

```
 def set_i18n_locale
    unless params[:locale]
        params[:locale] = extract_locale_from_accept_language_header
    end
    available = ['en', 'kr']
    if available.include? params[:locale]
        I18n.locale = params[:locale]
    end
  end

  def extract_locale_from_accept_language_header
    request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
  end

  def default_url_options
    { :locale => I18n.locale }
  end 
```

[官方指南](http://guides.rubyonrails.org/i18n.html)和[敏捷开发](http://pragprog.com/book/rails2/agile-web-development-with-rails)帮助很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T12:36:58.907

至于我的解决方案是从 github 应用 @DouweM PR。这是 Gemfile 中的一行：

```
gem 'http_accept_language', :git => 'https://github.com/DouweM/http_accept_language', :branch => 'no-middleware-no-crash' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T01:54:31.060

放入您的 Gemfile：

```
gem 'http_accept_language', '~> 2.0.0.pre' 
```

然后在代码中使用 env aka：

```
env.http_accept_language 
```

为我工作。

```
% bundle show|grep acc
    * http_accept_language (2.0.0.pre) 
```

# javascript - Javascript函数破坏了整个程序？

> ID：13776950
> 
> 赞同：2
> 
> 时间：2012-12-08T11:17:20.183
> 
> 标签：javascript, function, while-loop

我编写了一个程序，只要按下按钮，它就会弹出警告框。问题是，我的一个功能表现得很奇怪，我不知道为什么。有时该功能不起作用，有时它会完全阻止程序发送其他功能负责的警报。我尝试使用的语法有问题吗？我尝试了很多变化...

这个简单的事情有效：

```
function popup(){
      alert(5+6);
}; 
```

这不会：

```
function popup(){
            c = 0;
                if(c=0){
                    alert(5+6);
                }
}; 
```

这会阻止整个程序工作：

```
 function popup(){
        x=0
        y=0
        while(x=0;x<array.length;x++)
            if(y>0){
                alert(5+6);
            }
            else(y=0){
                alert(1+2)
                y++
            }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:18:22.210

你大概是说

```
else if (y==0){ 
```

并不是

```
else(y=0){ 
```

`y=0`将 y 设置为 0 并始终返回 0，无论 y 之前的值是多少。

`while`将一条语句作为条件（参见[参考资料](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/while)）。您的 while 循环可能正在检查 x++ 的结果，因此它永远不会结束。

您可能应该有一个 for 循环。

在进入测试值的循环之前将 y 设置为 0 非常奇怪。我想你应该是`array[x]`。

```
function popup(){
    for (x=0; x<array.length; x++) {
        var y = array[x]; // just a guess, but this seems reasonnable
        if (y>0){
            alert(5+6);
        } else if (y==0) {
            alert(1+2);
            y++;
        }
}; 
```

但是`;`正确地添加所有代码并格式化/缩进可能会避免你很多麻烦。

我建议坚持[Google 的 javascript 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T11:24:11.030

我想你想在这里做一个 for 循环。

if (y=0) 进行分配，而不是比较。

else(y=0){ 应该是“否则如果”。"else if" 进行比较，如果之前的 "if" 子句为假，则 as - else 为真。

**好像你的数组没有初始化？- 或者这是否更早初始化？**

我认为这更接近你想要的？：

```
function popup() {
    y = 0;
    for (var x = 0; x < array.length; x++) {
        if (y > 0) {
            alert(5 + 6);
        }
        else if (y == 0)
        {
            alert(1 + 2);
            y++;
        }
    }
} 
```

# vb6 - 在代码中将错误作为“用户定义的类型未定义”

> ID：13776954
> 
> 赞同：3
> 
> 时间：2012-12-08T11:17:42.430
> 
> 标签：vb6

一天的问候，

嗨，我是使用 vb 6.0 的初学者。我正在使用以下代码并获取“未定义用户定义的类型”。代码如下。我得到错误的行被突出显示。请帮助。我应该添加一些引用或组件吗？如果是的话，它会是什么。你及时和善意的帮助对我更有帮助

```
Public Sub LoadDocument() 
    Dim xDoc As MSXML2.DOMDocument
    Set xDoc = New MSXML2.DOMDocument 
    xDoc.async = False 
    xDoc.validateOnParse = False
    If xDoc.Load("C:\Users\284582\Desktop\XML1.xml") Then
            DisplayNode xDoc.ChildNodes, 0 
    End If 
End Sub    

' Error on this line'
Public Sub DisplayNode(ByRef Nodes As MSXML.IXMLDOMNodeList, _
           ByVal Indent As Integer)    

    Dim xNode As MSXML.IXMLDOMNode
    Indent = Indent + 2    
    For Each xNode In Nodes
        If xNode.NodeType = NODE_TEXT Then

            Debug.Print Space$(Indent) & xNode.ParentNode.nodeName & _
                ":" & xNode.NodeValue 
        End If    

        If xNode.HasChildNodes Then   
            DisplayNode xNode.ChildNodes, Indent  
        End If    
    Next xNode   
End sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T15:03:46.550

是`MSXML2.IXMLDOMNodeList`，不是`MSXML.IXMLDOMNodeList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T21:54:11.373

您的参考文献中可能缺少该库。尝试这个。

手动添加 MSXML2

```
1\. Open MS Access.
2\. Database Tools ribbon
3\. Visual Basic  ribbon item (icon)
4\. Double-click on any module to open it.

5\. Tools menu
6\. References…
7\. Find  Microsoft XML, v6.0\. is in the list
    a. If in list but not checked, check it and click [OK].
    b. If not in the list: 
        i. click [Browse…] and add "c:\windows\system32\msxml6.dll"
8\. [OK] your way back to the Visual Basic window.
9\. Close the Visual Basic Window.  You should be good to go. 
```

以编程方式添加 MSXML2 添加以下子和函数。运行子。如有必要，编辑 sub 以包含路径。

检查库中损坏的引用改编自以[编程方式添加引用](https://stackoverflow.com/questions/5593588/add-references-programatically)

```
Sub CheckXmlLibrary()
' This refers to your VBA project.
    Dim chkRef As Reference, RetVal As Integer  ' A reference.
    Dim foundWord As Boolean, foundExcel As Boolean, foundXml As Boolean
    foundWord = False
foundExcel = False
    foundXml = False

' Check through the selected references in the References dialog box.
    For Each chkRef In References
' If the reference is broken, send the name to the Immediate Window.
        If chkRef.IsBroken Then
           Debug.Print chkRef.Name
        End If
'copy and repeat the next 2 if statements as needed for additional libraries.
    If InStr(UCase(chkRef.FullPath), UCase("msxml6.dll")) <> 0 Then
                foundXml = True
            End If
    Next

    If (foundXml = False) Then
            'References.AddFromFile ("C:\Windows\System32\msxml6.dll")  <-- For other than XML, modify this line and comment out line below.
            RetVal = AddMsXmlLibrary
            If RetVal = 0 Then MsgBox "Failed to load XML Library (msxml6.dll).  XML upload/download will not work."
    End If

End Sub 
```

将 XML 引用添加到由 Chris Advena 开发的库。感谢[http://allenbrowne.com/ser-38.html](http://allenbrowne.com/ser-38.html)的洞察力。

```
Public Function AddMsXmlLibrary(Optional PathFileExtStr As String = "C:\Windows\System32\msxml6.dll") As Integer
On Error GoTo FoundError
AddMsXmlLibrary = 1
References.AddFromFile (PathFileExtStr)

AllDone:
    Exit Function
FoundError:
    On Error Resume Next
    AddMsXmlLibrary = 0
    On Error GoTo 0
End Function 
```

# php - 从 mysql 连接迁移到 mysqli

> ID：13776963
> 
> 赞同：21
> 
> 时间：2012-12-08T11:18:24.240
> 
> 标签：php, mysql, connection, mysqli

我有一个用于我的脚本的函数。这些都称为`openDBConn()`函数。如下所示使用`closeDBConn()``mysql_connect()`

```
openDBConn();
$car_model = getCarModel($car_id);
$car_color = getCarColor($car_id);
closeDBConn(); 
```

这样做也可以让我做以下事情

```
openDBConn();
mysqlStartTranscation();

upgradeCarColor($car_id);
addNewWing($car_id);

mysqlCommit();
closeDBConn(); 
```

现在的困境是，如果我移动到 mysqli，我将需要通过连接链接。

我还读到 mysql_* 已被弃用，我的问题是：

1.  在我的大部分功能停止工作之前，我还有多少时间？
2.  是否有任何当前或将来访问当前 mysqli 连接的方法，因为向我的函数添加额外参数会很痛苦？
3.  是否有任何适当的编码方式以程序方式访问当前的 mysqli 连接链接。如果不是在程序上，那么以 OOP 方式最好的是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T11:33:58.547

1.  您拥有世界上所有的时间，因为他们永远不会停止自己的工作！
2.  是的，有几种方法可以做到这一点。
3.  是的，但没有一种万能的解决方案。每种情况都不同，适合您的特定情况可能并不适合每种情况。

首先，旧的 ext/mysql 自 PHP 5.5.0 起已弃用，但它永远不会完全停止工作，因为扩展本身最终将被移动到[PHP PECL 存储库](http://pecl.php.net)中（*当需要删除它时*）。但是，我们还没有到那里，只有当您选择升级到该版本的 PHP 时，您才会受到影响。没有确定移除扩展的确切时间。

其次，您可以使用变量来存储数据库连接，就像旧的 ext/mysql 扩展在幕后为您所做的那样。诀窍是您不知道它在做什么（它使用您在调用 mysql_connect 时创建的最后一个打开的连接，并且每次调用 mysql_query 之类的东西来访问数据库时都使用它）。

您可以使用程序样式在函数中使用静态变量来执行此操作....

```
function openDBConn() {
    static $link;
    if (!isset($link)) {
      $link = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');
    }
    return $link; // returns the link
} 
```

或者您可以使用 OOP 使用类静态变量来执行此操作...

```
Class MyDBConnect {

    public static $link;

    public function openDBConn() {
        if (!isset(static::$link)) {
            static::$link = new mysqli('localhost', 'my_user', 'my_password', 'my_db');
        }
    }

} 
```

我想鼓励您使用更新的 API，并为此赞扬您，但我也想在您继续前进时提醒您。当您开始将函数从旧的 ext/mysql 函数移植到新的 mysqli 扩展时，请注意不要同时移植旧扩展的不良做法（例如使用旧的 SQL 字符串连接和转义技术 ext/ mysql 提供）。而是利用 MySQLi[准备好的语句和参数化查询](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

我想让您注意的是使用较新的 API 与您的 MySQL 数据库（即[PDO 和 MySQLi](http://php.net/manual/en/mysqlinfo.api.choosing.php)）交互的好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T11:31:10.117

首先，我给您的问题 +1，因为您开始迁移是件好事。

# OOP 和参数

关于 OOP 编程和参数传递，这是一个基于单例工厂模式的解决方案：

```
class MysqliConnection{
   private static $connection = null;
   public static function getConnection(){

       if(self::$connection === null){
           //Here get some routine to make your configuration extern
           self::$connection = new Mysqli(/*args*/);
       }
       return self::$connection;
} 
```

当您想发送查询时，可以这样使用它：

```
 function methodWhichSendsAQuery(){
      $mysqli = MysqliConnection::getConnection();
      $query = $mysqli->prepare(/*your query*/);
      /*some param bindings with $query->bindParam()*/
      $query->execute();
      return $query->fetchAll(); //an array with all results
  } 
```

我更喜欢这个解决方案而不是其他解决方案，因为它干净、易读并且不依赖于全局变量。单一责任原则得到尊重，没关系。

# 将 mysql_ 重构为 mysqli

如果您习惯于以旧方式处理 mysql_ ，重构可能会非常困难，我的意思是没有 ressource 参数`mysql_escape_string`等。

Mysql 提供了一个强大的脚本，可以在这里从 mysql_ 迁移到 mysqli [，您可以](http://dev.mysql.com/get/Downloads/Contrib/mysqli_converter/mysqli_converter-1.0.zip/from/pick)[在此处](https://wikis.oracle.com/display/mysql/Converting+to+MySQLi)获取更多信息。

我可以对你说的是，mysqli 带来了一个名为“prepared statement”的功能，它在安全性方面**非常**强大。mysqli 处理准备好的语句的方式不如 PDO 的方式对用户友好，但属性是相同的。

# youtube-api - GDataYoutubeRating 中缺少值

> ID：13776969
> 
> 赞同：0
> 
> 时间：2012-12-08T11:19:17.947
> 
> 标签：youtube-api

我无法获得 youtube 评级的价值。

我使用适用于 iphone 的 GData api 获取数据。我确实成功地下载了提要，甚至是评分统计数字。

GDataYouTubeRating 中的值始终为零，在我进行成功评级后的事件。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:39:00.793

YouTube 已切换为喜欢/不喜欢，数字评分转化为其中之一。4 或 5 = 喜欢，1 或 2 = 不喜欢，3 = 无操作。因此，如果您要添加一堆 3 个数字评级，那将无济于事。

如果您添加的评分不是 3，您是否会在视频的 YouTube 观看页面上看到评分？或者在经过身份验证的用户的用户事件历史记录中？

# java - 是否有可能在调用旁边的语句执行后打印方法调用输出？

> ID：13776970
> 
> 赞同：2
> 
> 时间：2012-12-08T11:19:19.507
> 
> 标签：java, multithreading

在下面的代码中，预测的输出可能是什么？

```
public class Threads2 implements Runnable {
    public void run() 
    {
        System.out.println("run.");
        throw new RuntimeException("Problem");
    }

    public static void main(String[] args) 
    {
        Thread t = new Thread(new Threads2());
        t.start();
        System.out.println("End of method.");
    }
} 
```

作为答案给出的可能结果是：

```
End of method.
run.
java.lang.RuntimeException: Problem 
```

或者

```
run.
java.lang.RuntimeException: Problem 
End of method. 
```

据我所知，只有第二个答案是可能的，请帮助我理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:24:21.140

两种答案都是可能的。由线程调度器决定何时执行并发线程的指令。启动的线程和主线程是“并行”运行的，唯一的保证是每个线程的指令都是按顺序执行的。但是这两个操作序列之间可能有任何交错。

顺便说一句，您还可以拥有以下内容。

```
run
end of method
java.lang.RuntimeException: Problem 
```

打个比方，假设你有一场跨栏比赛，你告诉每个跑步者开始比赛，一次一个。你知道哪个赛跑者会在每个障碍中获得第一名吗？不，你没有。这取决于每个跑步者的速度。如果第一个跑者起步很慢，最后一个跑者可能会在他面前的第一个障碍处出现。线程也是如此。调度程序将每个正在运行的线程分配给一个核心，按照他想要的任何顺序，以及它决定的任何时间。您拥有的唯一保证是每个线程都会执行一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T11:25:31.657

`t.start();`告诉系统启动线程 - 没有说系统必须立即给线程执行时间。

另一种可能是：

```
run.
End of method.
java.lang.RuntimeException: Problem 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T11:28:05.443

执行将产生两个线程，主线程（运行主方法的线程）和在主方法中创建的线程。由于您无法保证线程将运行的顺序，因此代码可以运行多个顺序。

所以让我们调用主线程 Thread1 和创建的线程 Thread2。然后，在 Thread2 启动后，可能性是：

1.  Thread1 首先获取处理器时间。（“方法结束......”首先打印）
2.  Thread2 首先获取处理器时间。（“运行”首先打印）

而且，实际上还有第三种可能性（我认为）：

1.  Thread2 获取处理器时间并打印“运行”。
2.  Thread2 被中断，Thread1 接管。
3.  Thread1 打印“结束...”
4.  Thread2 抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T11:29:22.470

首先，请注意`Exception`的堆栈跟踪通常打印到`stderr`进程的流，而您写入`stdout`. 通常`stderr`被重定向到`stdout`，但这不是必需的。

要考虑的另一件事是文档没有说明任何关于并发访问的内容`PrintStream#println()`，因此当两个线程尝试同时打印时的输出确实是不可预测的。

鉴于在游戏中拥有异常堆栈跟踪没有多大意义（因为它完全是另一个流），所以问题减少到主线程和另一个线程之间先写入。这不仅取决于 JVM 调度程序，而且还考虑到该方法是不同步的，因此它甚至可以打印一个交错的字符串（好吧，我认为这在现实中不会发生，但这就是*可能*发生的情况） .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-08T00:53:51.970

我认为您的问题是“为什么在打印异常后可以打印'run'的输出”。它们在同一个线程中，并且应该按顺序执行，这应该保证`System.out.print("run");`先执行然后再`throw new RuntimeException("Problem");`执行。

这里的问题是这两行代码使用了不同的打印队列。`System.out.print()`使用标准输出，而导致的错误信息`throw new RuntimeException("Problem");`将转到标准错误输出。因此，首先打印哪条消息不仅取决于首先执行哪一行代码，还取决于哪个输出队列首先刷新到屏幕。

如果第二行代码是，`System.out.print("problem");`则“问题”将始终在“运行”之后打印，因为它们使用相同的输出队列

# python - 多个进程读取和删除同一目录中的文件

> ID：13776973
> 
> 赞同：1
> 
> 时间：2012-12-08T11:20:38.903
> 
> 标签：python, bash, shell, race-condition

我有一个包含数千个文件的目录，每个文件都必须处理（通过 python 脚本）并随后删除。

我想编写一个 bash 脚本来读取文件夹中的文件，处理它，删除它并移动到另一个文件 - 顺序并不重要。这个 bash 脚本将有 n 个正在运行的实例（例如 10 个），它们都在同一个目录中运行。当目录中没有更多文件时，它们退出。

我认为这会产生竞争条件。你能给我一个建议（或代码片段）如何确保没有两个 bash 脚本在同一个文件上运行吗？

还是您认为我应该在 Python 中实现多线程（而不是运行 n 个不同的 bash 脚本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:38:32.777

没有两个脚本同时作用于同一个文件的唯一可靠方法是采用某种文件锁定机制。一个简单的方法是在开始工作之前重命名文件，方法是在文件名后面附加一些已知的字符串。然后完成工作并删除文件。每个脚本在做任何事情之前都会测试文件名，如果它是“特殊的”则继续。

更复杂的方法是维护一个临时文件，其中包含“正在处理”的文件的名称。一切完成后，显然需要删除该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T11:51:38.570

您可以使用文件重命名（在同一文件系统上）在 Unix 系统上是原子的这一事实，即文件被重命名或未重命名。为了清楚起见，让我们假设您需要处理的所有文件的名称都以 A 开头（您可以通过为您现在正在处理的文件设置一些单独的文件夹来避免这种情况）。

然后，您的 bash 脚本遍历文件，尝试重命名它们，`process`如果成功则调用 python 脚本（我在这里调用它），否则继续。像这样：

```
#!/bin/bash

for file in A*; do
    pfile=processing.$file
    if mv "$file" "$pfile"; then
       process "$pfile"
       rm "$pfile"
    fi
done 
```

此代码段使用的事实是，`mv`如果它能够移动文件，则返回 0 退出代码，否则返回非零退出代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:00:30.620

我认为您的问题的解决方案是消费者生产者模式。我认为这个解决方案是正确的开始方式：

[python多处理的生产者/消费者问题](https://stackoverflow.com/questions/914821/producer-consumer-problem-with-python-multiprocessing)

# php - 拆分文本，但如果有引号则不拆分

> ID：13776974
> 
> 赞同：1
> 
> 时间：2012-12-08T11:20:54.847
> 
> 标签：php, explode

> **可能重复：**
> [PHP 将术语分解为数组，将引用的文本保留为单个数组项](https://stackoverflow.com/questions/12136277/php-explode-terms-in-to-array-retain-quoted-text-as-single-array-item)

我想转换这个文本

```
Hello this is "a test" 
```

到一个数组，使它看起来像这样：

```
Hello
this
is
"a test" 
```

我用了php函数explode

```
$words = explode(' ', $text); 
```

但问题是它肯定会忽略引号。如何调整爆炸功能，使其以所述方式运行？还是我应该改用正则表达式？

# html - 响应式设计的引导程序 - 嵌套列的堆叠

> ID：13776977
> 
> 赞同：3
> 
> 时间：2012-12-08T11:22:05.800
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我对 Twitter Bootstrap 有疑问：

我正在尝试进行响应式布局，并且我有一个 2 列流体行，每列中有 2 个嵌套列（图像中的第一个示例）。

当我尝试调整浏览器的大小以假装它是一个小屏幕设备时，在某些分辨率下，嵌套列垂直堆叠（图像中的第二个示例），即使这些嵌套列有足够的空间水平放置，而不是垂直（图像中的第三个示例）。

当嵌套列有足够的空间水平放置时，我应该怎么做才能防止嵌套列垂直堆叠？

这是一个[jsfiddle](http://jsfiddle.net/MgcDU/425/)。

图像如下![在此处输入图像描述](../Images/46bd03f909a512c89a3a736ef81bffd9.png)

```
<div class="container">
<div class="row-fluid">
    <div class="span6">
        6
        <ul class="row-fluid">
            <li class="span6">
                3
            </li>
            <li class="span6">
                3
            </li>
        </ul>
    </div>
    <div class="span6">
        6
                    <ul class="row-fluid">
            <li class="span6">
                3
            </li>
            <li class="span6">
                3
            </li>
        </ul>

    </div>
</div> 
```

​</p>

我没有找到任何解决此问题的方法，因此我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:05:59.063

好的，我已经解决了这个问题。对于这些分辨率，我遇到了一个问题，我将 li 更改为 float: left 和 width 为 49%。像这样：

```
ul {
    width: 100%;
}

li {
    width: 49%;
    float: left;
} 
```

可能应该有某种方法可以在不更改引导程序/或硬编码的情况下做到这一点。

总之感谢！

# php - 仅通过页面访问 php 文件

> ID：13776981
> 
> 赞同：0
> 
> 时间：2012-12-08T11:22:55.080
> 
> 标签：php

我通过一个 php 文件（我们称之为serveMedia.php）向我的 index.php 提供图片和视频。我使用 mod_rewrite、php-sessions 和 URL 中包含的令牌从 index.php 调用这些媒体文件，例如`src="media=SOMEFILENAME&type=jpeg&token=2134573946284615492345"` 媒体文件本身位于一个文件夹中，由 .htaccess ( `deny from all`)限制访问

现在我的问题是：有没有可能使这个 URL 只能通过我的 index.php 访问？我试图实现的是，用户只有在通过我的页面传递内容时才能看到内容，而不是在他们访问它的 URL 时。

也许有一些我不知道的高级 .htaccess 或 php-options？我在托管空间，所以这两个可能是我唯一的选择。

这就是我目前正在使用的：

**索引.php**

```
ob_start();

session_start();

if (!isset($_SESSION['token']) || $_COOKIE['PHPSESSID'] !== session_id()){
    $token = md5(uniqid(rand(), true));
    $_SESSION['token'] = $token;
}
else {
    $token = $_SESSION['token'];
}; 
```

**服务媒体.php：**

```
if(isset($_GET['token']) 
    && $_GET['token'] == $_SESSION['token'] 
    && $_COOKIE['PHPSESSID'] == session_id()){

        //streamthisfile!

else {
    header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found', true, 404);
    echo "no file";
    session_regenerate_id(true);
    session_destroy();
    unset($_SESSION);
} 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:35:45.770

加密一个变量（如当前日期）并将其放在“门”链接中。当您到达新页面时，脚本会解密变量，如果它不匹配或什至不存在，脚本将重定向到另一个页面。

就像是：

```
 <a href="restricted.php?pass=eERadWRWE3ad=">Go!</a> 
```

有几个库可以为您完成所有加密/解密。

否则，您必须依赖会话，即您以前的方法，或者您可以使用 HTTP_Refferer（不可靠）

此处： [限制对页面的访问，除非来自特定页面](https://stackoverflow.com/questions/254929/restricting-access-to-page-unless-coming-from-a-specific-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:44:50.487

通常，HTTP 标头`referer`设置为图像请求的源页面，因此您可以使用它来确定您是否提供资源。

```
if($_SERVER['HTTP_REFERER'] == 'my/index.php') {
  //serve page
} 
```

# html - 表单未出现，但其内容出现

> ID：13776986
> 
> 赞同：20
> 
> 时间：2012-12-08T11:23:05.850
> 
> 标签：html, forms, appearance

我有这段代码：

```
<div>
   <form name='profileForm' id='profileForm' action='' method='get'>
      <input type='submit' name='ProfileBtn' id='ProfileBtn' class='buttonC' value='My Profile' />
   </form>
<br />
   <form name='logoutForm' id='logoutForm' action='' method='get'>
      <input type='submit' name='LogOutBtn' id='LogOutBtn' class='buttonC' value='Logout' />
   </form>
</div> 
```

当我呈现上面的“profileForm”时，不会出现（尽管 profileBtn 确实出现了）。第二种形式没有问题，这很奇怪，因为它们都很相似。

这可能是一个简单的问题，但我不知道是什么问题。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-01-28T23:58:46.873

这只是在我使用 Chrome 时发生的 - 这是因为我在**表单中有一个表单**。看起来 Chrome 刚刚去掉了 <form> 打开和关闭标签，因为我的表单在另一个表单中。当我将一个表单移到另一个表单之外时，两个`<form>`标签都按预期呈现在 html 中。
Crackermann 在他的回答中也谈到了这一点。

如果没有看到完整的 html，很难给出直接的解决方案，但我猜这是你的问题 - 你需要确保你的表单不在另一个表单中。非常简单的例子来说明这一点：

**另一个表单中的表单**，请注意您是否在 Chrome 中运行此代码并检查**<form id="form2"> 是否未呈现**：

```
<html>
<head></head>
<body>
	<form id="form1">
		<div>form within a form</div>
		<form id="form2">
			<input type="text" placeholder="name" /><br/>
			<input type="text" placeholder="title" />
		</form>
	</form>
</body>
</html>
```

如果将 form2 移到 form1 之外，请在 Chrome 中运行代码并检查，然后***呈现*****<form id="form2" >***：*

 *```
<html>
<head></head>
<body>
	<form id="form1">
		<div>form2 moved outside of form1</div>
	</form>

	<form id="form2">
		<input type="text" placeholder="name" /><br/>
		<input type="text" placeholder="title" />
	</form>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-10T13:17:48.633

那么不知何故，表单出现了一个奇怪的问题，按钮没有出现，因为当我运行网站时，“profileForm”只是以某种方式消失了（并且没有出现在控制台中）。我所做的是在“profileForm”之前添加第三个表单，它以某种方式解决了这个问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-16T09:30:48.310

在这些行之前，您的代码中有一个未封闭的 HTML TAG，例如 <form>，

```
Find and close that form 
```

或者

只是放在`</form>`你的代码之前。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-07-28T06:40:45.497

只需在表单顶部放置一个空表单即可。然后所有表单都将显示为表单 id

```
<form></form>

<form name='profileForm' id='profileForm' action='' method='get'>
      <input type='submit' name='ProfileBtn' id='ProfileBtn' class='buttonC' value='My Profile' />
</form>

<form name='logoutForm' id='logoutForm' action='' method='get'>
      <input type='submit' name='LogOutBtn' id='LogOutBtn' class='buttonC' value='Logout' />
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-17T09:19:45.313

在打开下一个表单之前检查您是否没有未关闭的表单元素。

如果这样做，浏览器将生成源代码而不显示后续的表单打开和表单关闭对。*

# android - 使用 Google Maps Android API v2 时出错

> ID：13776989
> 
> 赞同：1
> 
> 时间：2012-12-08T11:23:18.470
> 
> 标签：android, google-maps, android-maps

> **可能重复：**
> [除非您更新 Google Play 服务，否则此应用将无法运行。（通过集市）](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar)

我正在尝试在 Google Maps Android API v2 中显示地图。[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)。

当我运行应用程序时，它会在模拟器中显示消息“除非您更新 google play 服务，否则此应用程序将不会运行”。

我还在[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)中查看了 Google Maps V3 ，它说它也可以在移动应用程序中使用。

有人可以帮我解决 v2 中的问题并建议使用 v3 是否更简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:37:08.007

我的理解是 Google Play 服务无法安装在模拟器上，因此 Maps API v2 无法在模拟器上进行测试。谷歌人似乎在以下 Google+ 帖子中证实了这一点

[谷歌加讨论](https://plus.google.com/+AndroidDevelopers/posts/Tyz491d96Ci)

这对我来说是令人失望的消息。

# c# - 如何将类添加到使用 razor html 助手构建的表单中

> ID：13776991
> 
> 赞同：1
> 
> 时间：2012-12-08T11:23:23.837
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, razor

我提到[了这篇](https://stackoverflow.com/questions/8429553/how-to-add-class-to-razor-form-and-give-padding)文章，但仍然无法正常工作。谁能告诉我我错在哪里？我的代码如下：

```
@using (Html.BeginForm("Login", "Account", 
                        FormMethod.Post, new { @class = "form" }))
{
    @Html.ValidationSummary(true, 
          "Log in was unsuccessful. Please correct the errors and try again.")

    <fieldset>
        <legend>Log in Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
            </li>
            <li>
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
            </li>
        </ol>
        <input type="submit" value="Log in" />
    </fieldset>
    <p>
        @Html.ActionLink("Register", "Register") if you don't have an account.
    </p> 
```

我想在这个表单中添加表单类。请帮帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T11:04:17.787

哦。。我太傻了。我的 css 中有一个 id 而不是名为 form 的类。如果您在 css 文件中定义了表单类，则上述代码有效

# codeigniter - Codeigniter 购物车 - 多次添加商品不会增加数量

> ID：13776992
> 
> 赞同：1
> 
> 时间：2012-12-08T11:23:30.847
> 
> 标签：codeigniter, cart

我试图将某些商品多次添加到购物车，但添加的商品不会出现在购物车中，如果它已经在其中的话。

这在 CI 购物车中是正常的，还是我搞砸了什么？

如何解决这个问题？

我想多次添加相同的项目，以更改第二件的价格（特价）。

我的 cart_add 函数看起来像 codeigniter 手册中的示例，我认为不需要包含代码。

我在购物车类代码中发现，购物车行标识符 ( `$rowid`) 是从 和 生成的 md5 校验`id`和`options`。`options`我暂时在数组中添加了这样的东西：

```
'options' => array('rid' => mt_rand(), ...) 
```

但是有更好的方法吗？我觉得我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:10:44.770

据我所知，您不能多次直接添加/更新购物车以增加数量。您需要通过对购物车内容进行循环来更新购物车。这是因为 CI 将始终在插入的产品/项目上创建唯一的 row_id。`The reason a unique ID is created is so that identical products with different options can be managed by the cart`. 更清楚的可以参考这篇**[文章](http://ellislab.com/codeigniter/user-guide/libraries/cart.html)**。

您可以在此处更新您的购物车商品：

```
foreach($this->cart->contents() as $item){
    if($item['id'] == 'your_product_id'){
        $item['qty'] = 3;
        $this->cart->update($item);
    }
} 
```

# bash - 从 svn pecl 获取带有中继 url 的包的命令是什么？

> ID：13776993
> 
> 赞同：0
> 
> 时间：2012-12-08T11:23:32.713
> 
> 标签：bash, pecl

我想拿到这个包裹的后备箱

[http://svn.php.net/viewvc/pecl/kakasi/trunk/](http://svn.php.net/viewvc/pecl/kakasi/trunk/)

所以我可以 phpize configre make make install 等等

所以我尝试了

```
svn checkout http://svn.php.net/viewvc/pecl/kakasi/trunk 
```

但它输出

```
Redirecting to URL 'http://svn.php.net/viewvc/pecl/kakasi/trunk':
Redirecting to URL 'http://svn.php.net/viewvc/pecl/kakasi/trunk':
svn: E195019: Redirect cycle detected for URL 'http://svn.php.net/viewvc/pecl/kakasi/trunk' 
```

它没有得到内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:52:00.740

正如在[另一个问题](https://stackoverflow.com/questions/11001177/svn-checkout-to-viewvc-link-give-back-redirecting-url-error)中所讨论的，`/viewvc/`URL 不是真正的 SVN URL。您需要替换`/viewvc/`为其他内容，具体取决于服务器的配置方式。有些`/svn/`使用`/repository/`. 因此，您想要：

```
svn checkout http://svn.php.net/repository/pecl/kakasi/trunk 
```