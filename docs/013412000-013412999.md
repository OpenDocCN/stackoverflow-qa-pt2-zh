# StackOverflow 问答 13412000-13412999

# jquery - 如何销毁 jqgrid

> ID：13412001
> 
> 赞同：0
> 
> 时间：2012-11-16T07:11:32.323
> 
> 标签：jquery, jqgrid

我有一个带有多列的 JQgrid，当我按下页面上的清除按钮时，它应该会破坏网格以及绑定到网格的所有内容。我知道 gridDestroy 和 unload 方法，但它对我不起作用……有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:30:22.683

如果我对您的理解正确，您应该使用`GridUnload`代替`GridDestroy`（有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/4920612/315935)）。您唯一需要做的就是重新保存以前使用过的 jQuery 变量的值。例如，如果您有一个 id="list" 的表，并且您在调用 of`$("#list")` *之前*`GridUnload`保存了一个变量（如`var myGrid=$("#list");`），那么您应该将值重新分配`$("#list")`给同一个变量（`myGrid=$("#list");`在调用 of 之后再执行一次`GridUnload`）。

# java - CSRF 保护：为每个请求发送 CSRF 令牌的方法

> ID：13412005
> 
> 赞同：0
> 
> 时间：2012-11-16T07:12:21.377
> 
> 标签：java, csrf-protection

我的初始代码为可能改变数据库状态的请求生成了令牌，例如 CRUD 操作。为每个请求生成令牌。与其他数据一起以 JSON 格式发送到客户端，我希望这个令牌与请求一起返回，并在请求完成后更改它。但是，当我只将它实现到我的部分代码（CRUD 操作）时，我被告知要重做它并使其成为网络应用程序范围。我认为最好的方法是使用过滤器。

我的问题是，如何让客户端为每个请求发送“令牌”？我是否将其设置在 cookie 中？我有哪些选择？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:33:32.867

最好的方法是，所有链接都应该是 GET 请求，并且在 get 请求中不应该对应用程序状态进行任何修改。因此对于 GET 请求，将不需要 CSRF 令牌。

对于在应用程序状态中进行修改的 POST 请求，您必须生成，csrf 表单中的隐藏字段，并在表单提交期间验证服务器中的令牌。

# wcf - IIS 托管 WCF 服务架构位置地址问题

> ID：13412007
> 
> 赞同：0
> 
> 时间：2012-11-16T07:12:27.040
> 
> 标签：wcf, web-services, iis

我有一个托管在 IIS 7 中的服务，位于本地网络中的一个单独的 Web 服务器上。我可以在 Internet 上访问该服务。一件事困扰着我，我无法解决。

当我检查服务的 wsdl 时，我看到 schemaLocation 地址设置为服务器的机器名称，而不是服务分配的域名。我尝试将 baseAddress 更改为域名，但它并没有改变任何事情。但是当我将baseAddress 更改为服务器schemaLocation 的IP 地址时。

我需要配置什么，以便 wsdl 上的 schemaLocation 使用为服务设置的域名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:09:48.613

在您的 serviceMetadata 标记中，您可以设置一个名为 httpGetUrl 的属性，如下所示：

```
<behavior name="serviceBehavior">
<serviceMetaData httpGetEnabled="true" httpGetUrl="your-complete-url-here"/>
</behavior> 
```

这将为您设置它。

[http://knowledgebaseworld.blogspot.co.uk/2010/06/domain-name-replaced-with-machine-name.html](http://knowledgebaseworld.blogspot.co.uk/2010/06/domain-name-replaced-with-machine-name.html)

编辑：如果你的服务是安全的，还有一个 httpsGetUrl 可以使用（你没有说）

# svn - 为什么每个人都坚持拥有本地 SVN 存储库？

> ID：13412011
> 
> 赞同：1
> 
> 时间：2012-11-16T07:12:31.780
> 
> 标签：svn, version-control, remote-access

有人可以帮我解决一个大问题吗？在做基于Web的应用程序开发时，为什么大家都坚持创建本地版本的服务器环境进行开发？为什么不在托管服务器上开发？尝试在本地重新创建（并保持同步）整个服务器环境似乎是一种严重的痛苦——尤其是在各种与托管环境不匹配的机器和平台上。远程创建测试环境并通过 FTP 处理该环境中的文件似乎要简单得多。

然而，我发现的所有 SVN 服务和工具都旨在将副本提取到给定的本地机器上，将远程服务器视为部署。

我想建立一个远程开发环境——这样开发人员可以将他们需要的文件版本检出到*服务器*上的个人文件树中。当他们在自己的小环境中完成测试后，他们可以通过 SVN 提交到单个暂存环境，在那里再次测试，然后将文件从开发复制到生产。我在哪里可以找到帮助我设置和管理此类内容的工具？

# python - 当行数不足时，Python CSV 函数输出空白 CSV？

> ID：13412014
> 
> 赞同：0
> 
> 时间：2012-11-16T07:12:59.207
> 
> 标签：python, csv

我有一个函数，它需要一个自定义对象列表，符合一些值，然后将它们写入 CSV 文件。发生了一些非常奇怪的事情，当列表仅包含几个对象时，生成的 CSV 文件始终为空白。当列表较长时，该功能可以正常工作。临时文件可能是某种奇怪的异常吗？

我必须指出，此函数将临时文件返回到允许用户下载 CSV 的 Web 服务器。Web 服务器功能位于主功能下方。

```
def makeCSV(things):
    from tempfile import NamedTemporaryFile
    # make the csv headers from an object
    headers = [h for h in dir(things[0]) if not h.startswith('_')]

    # this just pretties up the object and returns it as a dict
    def cleanVals(item):
        new_item = {}
        for h in headers:
            try:
                new_item[h] = getattr(item, h)
            except:
                new_item[h] = ''
            if isinstance(new_item[h], list):
                if new_item[h]:
                    new_item[h] = [z.__str__() for z in new_item[h]]
                    new_item[h] = ', '.join(new_item[h])
                else:
                    new_item[h] = ''
            new_item[h] = new_item[h].__str__()
        return new_item

    things = map(cleanVals, things)

    f = NamedTemporaryFile(delete=True)
    dw = csv.DictWriter(f,sorted(headers),restval='',extrasaction='ignore')
    dw.writer.writerow(dw.fieldnames)
    for t in things:
        try:
            dw.writerow(t)
            # I can always see the dicts here...
            print t
        except Exception as e:
            # and there are no exceptions
            print e
    return f 
```

网络服务器功能：

```
 f = makeCSV(search_results)
    response = FileResponse(f.name)
    response.headers['Content-Disposition'] = (
            "attachment; filename=export_%s.csv" % collection)
    return response 
```

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:23:50.257

总结eumiro的回答：文件需要刷新。在 makeCSV() 结束时调用 f.flush()。

# pdf - 将 pdf 文档添加到现有 pdf 文档的每隔一页？

> ID：13412015
> 
> 赞同：2
> 
> 时间：2012-11-16T07:13:08.440
> 
> 标签：pdf, insert, edit, acrobat

这让我难以置信，这似乎有多难。我现在已经尝试了 5 个 PDF 应用程序。我买不起 acrobat pro，但我确信它有能力。我正在寻找最快/最简单的方法来做到这一点。简单地说：在 pdf 文档“moo”的每一页之后放置一个 pdf 文档“foo”的副本。

使用示例：我必须检查 3 辆车。他们都有订单，我有一个用于每次检查的个人清单。订单单是单页 3 页 pdf。清单是单独的一页 pdf。

我需要从这个出发：

1.  大众高尔夫订购票
2.  本田思域订单票
3.  斯巴鲁翼豹订单票
4.  （单独的“清单”页面）

对此：

1.  大众高尔夫订购票
2.  清单
3.  本田思域订单票
4.  清单
5.  斯巴鲁翼豹订单票
6.  清单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:25:23.353

如果您的 checklist-pdf 文件具有相同的固定内容，您可以使用这种方法来避免手动做太多事情

这是我前段时间在 linux 中编写的一个脚本，它使过程自动化，只需要你数字化你想要与清单 pdf 页面混合的 pdf 文件的文件名

```
#!/bin/sh
#
echo "Enter file name"
read filename
pages="`pdftk $filename dump_data | grep NumberOfPages | cut -d : -f2`"
numpages=`for ((a=1; a <= $pages; a++)); do echo -n "A$a B1 "; done`
pdftk A=$filename B=checklist.pdf cat $numpages output $filename-alternated.pdf
exit 0 
```

**checklist.pdf**需要存在于您启动脚本的目录中

**pdf 文件的** 结果16 页最初*与 checklist.pdf 单页交错*： ![交替页面](../Images/7dcb1be3d739f7876e422aa3ac0301af.png)

您还可以修改脚本以使其循环使用并以这种方式一次性将相同的清单pdf页面添加到多个文档（以交替模式）

**对于 *.pdf 中的 f；做`script $f`; 完毕**

* * *

```
#!/bin/sh
#
filename=$1
pages="`pdftk $filename dump_data | grep NumberOfPages | cut -d : -f2`"
numpages=`for ((a=1; a <= $pages; a++)); do echo -n "A$a B1 "; done`
pdftk A=$filename B=checklist.pdf cat $numpages output $filename-alternated.pdf
exit 0 
```

为了不将清单 pdf 页面添加到 checklist.pdf 页面本身，您可以将**checklist.pdf**放在脚本的工作目录之外（例如在**/tmp**中）

```
#!/bin/sh
#
filename=$1
pages="`pdftk $filename dump_data | grep NumberOfPages | cut -d : -f2`"
numpages=`for ((a=1; a <= $pages; a++)); do echo -n "A$a B1 "; done`
pdftk A=$filename B=/tmp/checklist.pdf cat $numpages output $filename-alternated.pdf
exit 0 
```

# android - 如何使用 LocationOverlay 从地址显示自己的位置？

> ID：13412016
> 
> 赞同：0
> 
> 时间：2012-11-16T07:13:12.153
> 
> 标签：android

我想从地址显示自己的位置是由用户使用 LocationOverlay 输入的，并通过一个小点或任何图标显示位置....（例如：可以通过 flag.png 显示这个位置）但现在我不知道如何在地图上显示。你能帮帮我吗！

源代码：

```
public class Main extends MapActivity implements LocationListener {
private static double lat;
private static double lon;
private MapController mapControl;
private MapView mapView;
LocationManager locman;
Location loc;
String provider = LocationManager.GPS_PROVIDER;
String TAG = "GPStest";
Bundle locBundle;
private int numberSats = -1;
private float satAccuracy = 2000;
private float bearing;
private double altitude;
private float speed;
private String currentProvider;
private TextView txt;
private double lat1;
private double lon1;
private Drawable marker;
private Geocoder gcoder;
private MyLocationOverlay me = null;
long GPSupdateInterval; // In milliseconds
float GPSmoveInterval; // In meters
private MyMyLocationOverlay myLocationOverlay;
private List<Overlay> mapOverlays;
public DisplayOverlay displayOverlay;
private EditText address;
Button test;
private Button btnMylocation;
private Button btnAddrress;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_long_van_map);
    gps();
    btnMylocation = (Button) findViewById(R.id.button1);
    // get my location
    btnMylocation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            gps();
        }
    });
    gcoder = new Geocoder(this);
    me = new MyLocationOverlay(this, mapView);
    address = (EditText) findViewById(R.id.editText1);
    btnAddrress = (Button) findViewById(R.id.button2);
    //Get postion from address
    btnAddrress.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String add = address.getText().toString();
            try {

                List<Address> addresses = gcoder
                        .getFromLocationName(add, 1);
                if (addresses == null) {
                    // return point;
                }

                // just get first item of list address
                Address add2 = addresses.get(0);

                lat1 = add2.getLatitude();
                lon1 = add2.getLongitude();

            } catch (IOException e) {

            }

            GeoPoint newPoint = new GeoPoint((int) (lat1 * 1e6),
                    (int) (lon1 * 1e6));
            mapControl.animateTo(newPoint);
            marker = getResources().getDrawable(R.drawable.startpoint);

            marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                    marker.getIntrinsicHeight());

            //mapView.getOverlays().add(new SitesOverlay(marker));
            mapView.getOverlays().add(me);

        }
    });

}

//Info gps of me
public void gps() {
    updateGPSprefs();
    locman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // Listener for GPS Status...
    final GpsStatus.Listener onGpsStatusChange = new GpsStatus.Listener() {
        public void onGpsStatusChanged(int event) {
            switch (event) {
            case GpsStatus.GPS_EVENT_STARTED:
                // Started...
                break;
            case GpsStatus.GPS_EVENT_FIRST_FIX:
                // First Fix...
                Toast.makeText(Main.this, "GPS has First fix",
                        Toast.LENGTH_LONG).show();
                break;
            case GpsStatus.GPS_EVENT_STOPPED:
                // Stopped...
                break;
            case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
                // Satellite update
                break;
            }
            //GpsStatus status = locman.getGpsStatus(null);
            // Not presently doing anything with following status list for
            // individual satellites
            // Iterable<GpsSatellite> satlist = status.getSatellites();
        }
    };
    locman.addGpsStatusListener(onGpsStatusChange);
    locman.requestLocationUpdates(provider, GPSupdateInterval,
            GPSmoveInterval, this);
    Log.i(TAG, locman.toString());
    // Add map controller with zoom controls
    mapView = (MapView) findViewById(R.id.Mapview);
    mapView.setSatellite(false);
    mapView.setTraffic(false);
    mapView.setBuiltInZoomControls(true); // Set android:clickable=true in
                                            // main.xml
    int maxZoom = mapView.getMaxZoomLevel();
    int initZoom = (int) (0.95 * (double) maxZoom);
    mapControl = mapView.getController();
    mapControl.setZoom(initZoom);
    // Set up compass and dot for present location map overlay
    List<Overlay> overlays = mapView.getOverlays();
    myLocationOverlay = new MyMyLocationOverlay(this, mapView);
    overlays.add(myLocationOverlay);

    // Set up overlay for data display
    displayOverlay = new DisplayOverlay();
    mapOverlays = mapView.getOverlays();
    mapOverlays.add(displayOverlay);
    txt = (TextView) findViewById(R.id.textView1);
    txt.setText(LongVanMap.gettext());

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    // Called when location has changed
    centerOnLocation();

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    locman.removeUpdates(this);

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    locman.requestLocationUpdates(provider, GPSupdateInterval,
            GPSmoveInterval, this);
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

    centerOnLocation();

}

// Method to assign GPS prefs
public void updateGPSprefs() {
    int gpsPref = Integer.parseInt(Prefs
            .getGPSPref(getApplicationContext()));
    switch (gpsPref) {
    case 1:
        GPSupdateInterval = 5000; // milliseconds
        GPSmoveInterval = 1; // meters
        break;
    case 2:
        GPSupdateInterval = 10000;
        GPSmoveInterval = 100;
        break;
    case 3:
        GPSupdateInterval = 125000;
        GPSmoveInterval = 1000;
        break;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:21:58.913

```
@Override
protected void onCreate(Bundle b) {
    super.onCreate(b);
    setContentView(R.layout.maps_screen);
    initActionBar();

    String address = getIntent().getExtras().getString("address");

    String title = getIntent().getExtras().getString("title"); 

    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Geocoder geoCoder = new Geocoder(this);
    List<Address> addresses;

    try {
        Log.i("maps", "getting geopoint for address: " + address);

        addresses = geoCoder.getFromLocationName(address, 1);
        if (addresses == null || addresses.isEmpty()) { 
            Log.i("maps", "couldn't get any matches for the following address: " + address);    
            isInvalidLocation = true;
            showInvalidAddressDialog();
            return;
        }
        Address location = addresses.get(0);

        GeoPoint point = coordinatesToGeoPoint(location.getLatitude(), location.getLongitude());

        Drawable marker = getResources().getDrawable(R.drawable.da_marker_red);
        MapOverlay adPos = new MapOverlay(marker,mapView);

        List<Overlay> overlays = mapView.getOverlays();
        OverlayItem overlayItem = new OverlayItem(point, title, address);
        adPos.addOverlay(overlayItem);

        overlays.add(adPos);    

        MapController mapcontroller = mapView.getController();
        mapcontroller.animateTo(point);
        mapcontroller.setCenter(point);
        mapcontroller.setZoom(12);

    } catch (Exception ex) {        
        Log.e("geocoder", "error using geocoder", ex);
    }

} 
```

# ruby-on-rails - heroku db：推送不起作用

> ID：13412025
> 
> 赞同：0
> 
> 时间：2012-11-16T07:13:46.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我的本地机器上有一个应用程序，其中有大量数据。
现在我已经在 heroku 上部署了应用程序，但是当我在执行 heroku db:push 时，它会出现以下错误

```
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       unexpected nil (OkJson::ParserError)
       Backtrace:   C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendo
r/okjson.rb:82:in `valparse'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendo
r/okjson.rb:64:in `textparse'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendo
r/okjson.rb:43:in `decode'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
operation.rb:419:in `push_indexes'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
operation.rb:408:in `block in run'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
operation.rb:203:in `call'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
operation.rb:203:in `catch_errors'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
operation.rb:405:in `run'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/
cli.rb:171:in `clientxfer'
                 C:/Users/MY-PC/.heroku/client/lib/heroku/command/db.rb:192:in `
taps_client'
                 C:/Users/MY-PC/.heroku/client/lib/heroku/command/db.rb:30:in `p
ush'
                 C:/Users/MY-PC/.heroku/client/lib/heroku/command.rb:206:in `run
'
                 C:/Users/MY-PC/.heroku/client/lib/heroku/cli.rb:28:in `start'
                 C:/Program Files (x86)/Heroku/bin/heroku:24:in `'

    Command:     heroku db:push
    Version:     heroku/toolbelt/2.33.1 (i386-mingw32) ruby/1.9.2 
```

我的宝石文件是：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

group :development do
  gem 'sqlite3',"1.3.5"
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails','2.0.2'

group :production do
    gem 'pg',"0.12.2"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:32:09.250

看起来您在使用水龙头宝石时遇到了问题

尝试

```
bundle exec heroku db:push 
```

您也可以尝试在 gem 中声明“点击”到您的 Gemfile。目前我正在使用：

```
taps (0.3.23)
heroku (2.6.1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:49:47.330

您不能使用`heroku db:push`任何 Heroku 数据库。最好的方法是转储您的数据库，然后直接恢复到您的 ClearDB 实例。

# c# - C# Winform 中的动态自动更新（到 UI、网格）绑定列表？

> ID：13412030
> 
> 赞同：1
> 
> 时间：2012-11-16T07:14:20.060
> 
> 标签：c#, data-binding, idynamicobject

我什至不确定我是否正确执行此操作。但基本上我有一个由类/接口构建的对象列表。从那里，我将列表绑定到`DataGridView`Windows 窗体 (C#) 上的

这里的列表是一个同步列表，它将自动更新 UI，在这种情况下`DataGridView`。

现在一切正常，但现在我希望列表应该有一个动态对象，即默认情况下该对象将具有两个静态属性（ID、名称），并且在运行时用户将选择剩余的属性。这些应该绑定到数据网格。列表上的任何更新都应自动反映在网格中。

我知道，我们可以使用动态对象，但我想知道，如何解决，

```
datagridview.DataSource = myData;  // myData is AutoUpdateList<IPersonInfo> 
```

现在`IPersonInfo`是对象的类型，需要在运行时为这个类型添加动态属性。

```
public class AutoUpdateList<T> : BindingList<T>
{
    private ISynchronizeInvoke _SyncObject;
    private Action<ListChangedEventArgs> _FireEventAction;

    public AutoUpdateList()
        : this(null)
    {
    }

    public AutoUpdateList(ISynchronizeInvoke syncObject)
    {
        _SyncObject = syncObject;
        _FireEventAction = FireEvent;
    }

    protected override void OnListChanged(ListChangedEventArgs args)
    {
        try
        {
            if (_SyncObject == null)
            {
                FireEvent(args);
            }
            else
            {
                _SyncObject.Invoke(_FireEventAction, new object[] { args });
            }
        }
        catch (Exception)
        {
            // TODO: Log Here
        }
    }

    private void FireEvent(ListChangedEventArgs args)
    { 
        base.OnListChanged(args);             
    }
} 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:22:24.600

我想对你来说最好的方法是“模拟”这些属性。我想最好的方法是[ITypedList](http://msdn.microsoft.com/en-us/library/system.componentmodel.itypedlist%28v=vs.100%29.aspx)实现，一个很好的例子是[here](http://www.sturmnet.org/blog/2005/02/04/simulating-fields)。

一旦我遇到类似的问题。就我而言，我采用了[这种](https://stackoverflow.com/questions/947241/how-do-i-create-dynamic-properties-in-c)方法。这可能对你有帮助。

此外，还有一种方法（与任何“动态”无关）拥有一个基类，该基类具有您要使用的完整属性集。但是，如果您在运行时之前没有所有属性，它将无法工作。

# tfs - 如何在 Team Foundation Service 中查看其他人的工作项？

> ID：13412034
> 
> 赞同：4
> 
> 时间：2012-11-16T07:14:25.957
> 
> 标签：tfs, azure-devops

我在Visual Studio 2010 中使用新的[Team Foundation 服务。](https://tfs.visualstudio.com)

目前我只有两个用户设置为默认项目团队。我是第一个用户。

我能够将工作项分配给其他用户。但是我无法查看他的工作项，或者即使可以，我也无法弄清楚在哪里可以查看所有工作项。

![显示团队基础服务中的工作项选项卡的屏幕截图。](../Images/de700247235206f52db2811b704ebde7.png)

在上面的屏幕截图中，在工作项选项卡中，我只看到了我的工作项。我看不到所有工作项。

至于权限，我属于以下组：

`Project Collection Administrators`
`Project Administrators`
`Team Foundation Administrators`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T07:28:23.553

`New`然后点击`Query`。然后`Assigned To`从`Field`选项中选择并在`Value`字段中选择您想要的用户。

# php - 禁用 PDO::ATTR_EMULATE_PREPARES 导致“未知”问题

> ID：13412037
> 
> 赞同：7
> 
> 时间：2012-11-16T07:14:41.823
> 
> 标签：php, mysql, pdo

只是一个关于 PDO 的 ATTR_EMULATE_PREPARES 属性的快速问题 - 简单地说，在保持默认 (true) 的情况下，一切正常且花花公子。但是禁用它，好吧，我什至没有收到 PHP 错误消息，只是一个浏览器警告告诉我“连接已重置”。

作为参考，这里是我使用的代码示例

```
<?php
include_once("config.php");

try {
  $dbh = new PDO
  (
    "mysql:host=". DB_SERVER .";dbname=" . DB_NAME,
    DB_USER,
    DB_PASS,
    array
    (
      PDO::ATTR_PERSISTENT => true,
      PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
      PDO::ATTR_EMULATE_PREPARES => true
    )
  );
} catch(PDOException $e) {
  echo "<pre>";
  print_r("Error: " . $e);
  echo "</pre>";
  die();
}

$idNum = "1";

$sth = $dbh->prepare("SELECT * FROM `table` WHERE `id` = ?;");
$sth->bindParam(1,$idNum);
$sth->execute();
$res = $sth->fetch();
?>

<pre>
<?=print_r($res); ?>
</pre> 
```

它很好地从我可爱的测试表中返回查询......

```
Array
(
    [id] => 1
    [field1] => q12w3e4r5t6y7u8i9
    [field2] => kijhgbfvcdoikujyh
) 
```

但是，如果我冒昧地将 PDO::ATTR_EMULATE_PREPARES 的值设置为 false，它只会失败，然后再次失败，直到我将其恢复为原始值。我能做些什么来找出造成这种情况的原因还是我错过了一些非常简单的事情？

我的 PHP 版本目前是 5.4.3，MySQL 是 5.5.24

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-03T05:50:16.110

这看起来是某些 PHP 版本中的错误：

[https://bugs.php.net/bug.php?id=61411](https://bugs.php.net/bug.php?id=61411)

似乎两者都运行有问题

```
PDO::ATTR_PERSISTENT => true 
```

和

```
PDO::ATTR_EMULATE_PREPARES => true 
```

您在 PDO 属性/选项数组中拥有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T11:49:54.320

嗨，我想出了如何解决您（和我的）问题。

遇到同样的问题，只是连接失败，没有错误。由于某种原因它不起作用，因为当您调用 PDO 数据库处理程序的构造函数时，您在 PDO 配置数组中添加了 ATTR_EMULATE_PREPARES 选项，不知何故这会导致 PDO 崩溃。

当您在没有 ATTR_EMULATE_PREPARES 选项的情况下启动 PDO 数据库处理程序，然后使用 setAttribute 禁用仿真时，它将起作用。因此像这样：

```
// Configure PDO to really prepare statements and to not emulate them
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

对于刚刚阅读此内容并想知道为什么尽可能关闭 ATTR_EMULATE_PREPARES 的人，请阅读： [PDO 准备语句有多安全](https://stackoverflow.com/questions/1314521/how-safe-are-pdo-prepared-statements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T19:58:17.967

我遇到了同样的问题，并发现当 ATTR_EMULATE_PREPARES = false 时会发生这种情况的两个原因：

1.  如果 Select 语句同时包含 AND/OR 操作数，则查询可能会失败。我不得不将它们分成不同的查询。

2.  如果 Insert 包含 bindValue 持有者，ATTR_EMULATE_PREPARES = false 更严格地使这些持有者名称完全匹配。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-17T19:06:04.107

PHP 的 MYSQL 驱动程序并不真正支持prepared statements，它的性能很差。禁用 mysql 的模拟语句可能会出现很多错误。

几天前，我刚刚在这个问题上遇到了麻烦。

拥有这个：

> 在 grik dot net 公开 2012 年 3 月 7 日 04:23
> 
> 对于 PDO_MYSQL，您需要记住 PDO::ATTR_EMULATE_PREPARES 选项。
> 
> 默认值为 TRUE，如 $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES,true);
> 
> 这意味着 $dbh->prepare() 调用不会创建任何准备好的语句。使用 exec() 调用 PDO 将占位符替换为值本身，并向 MySQL 发送通用查询字符串。
> 
> 第一个后果是调用 $dbh->prepare('garbage'); 报告没有错误。您将在 $dbh->exec() 调用期间收到 SQL 错误。第二个是特殊情况下的 SQL 注入风险，例如使用占位符作为表名。
> 
> 仿真的原因是 MySQL 的预准备语句性能不佳。仿真的工作速度明显更快。

来源：[用户提供的注释](http://www.php.net/manual/en/pdo.prepare.php#107811)。

# hibernate - 使用 Hibernate 搜索两个 sql 表，如何修复它

> ID：13412039
> 
> 赞同：0
> 
> 时间：2012-11-16T07:14:53.427
> 
> 标签：hibernate

这是我的 HibernateDaoImpl，用于从 Emp 和 Org 表中获取价值，例如 ORG_ID、ORG_NAME、ID、ORG_ID、EMP_ID、EMP_NAME、CARD_NUM、ORG_PAY、EMP_PAY。

我如何使用 java 代码对它们进行迭代以检查这些值是或不是我想要得到的？

```
public List<Emp> findByOrgId(String orgId) throws Exception {
    SessionFactory sf = HibernateSessionFactory.getSessionFactory();
    Session session = sf.openSession();
    String hql = "select o.orgId,o.orgName,e.empId,e.empName,e.cardNum,e.orgPay,e.empPay from Org o,Emp e where e.orgId=o.orgId and o.orgId=?";
    Query query = session.createQuery(hql);
    query.setString(0,orgId);
    List list = query.list();
    return list; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:21:26.020

您的查询需要一个参数（ 的值`o.orgId`），但您没有传递任何参数。

代码应该看起来像

```
Query query = session.createQuery(hql);
List<Emp> empList = (List<Emp>) query.setInteger(orgId).list(); 
```

查看查询，看起来 Emp 实体应该与 Org 实体有关联，而不是有它的 ID。我还将实体命名为 Employee 和 Organization。您的代码将比使用这些 3 个字母的名称更具可读性。

# android - 如何在“您要安装此应用程序”状态下捕获和记录或 toast 事件

> ID：13412041
> 
> 赞同：1
> 
> 时间：2012-11-16T07:15:11.950
> 
> 标签：android

我可以在安装应用程序之前捕获事件，它会显示应用程序所需的权限。如何将广播接收器写入它？

**当外部 Google Play 应用程序提示您要安装此应用程序**并显示“权限”时，我想敬酒 吗？

当用户按下接受并下载时，我可以对 Google Play 应用程序执行相同的操作吗？

eg: Toast:"You are about to install" + 应用名称（来源于apk文件）

# java - Java中的进程管理和EventWaiter

> ID：13412043
> 
> 赞同：2
> 
> 时间：2012-11-16T07:15:22.337
> 
> 标签：java, linux, process, event-wait-handle

我将用 Java 实现一个小型守护程序应用程序。下面是我的要求。有人可以给我一些建议吗？

1.  启动和监视另一个进程（如果崩溃则重新启动它）
2.  在 Windows 和 Linux 上运行（首选 SUSE）
3.  此外，守护程序应用程序本身永远不会退出，它应该在收到操作系统关闭信号时正常退出。

对于 Windows，我可以调用几个 Win32 API 来启动 Process 并监控其状态。守护程序应用程序可以是 Windows 服务，其生命周期由 Windows 自动管理。

问题是，如何针对 Linux 执行此操作。此外，如何编写一组代码来处理两个操作系统而不是两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:53:19.690

由于 Java 是独立于平台的，因此在 Java 中执行此操作的整个想法应该是避免特定于平台的调用。因此，请忘记 Win32 API 和问题的整个 Windows-vs-Linux 部分。

也就是说，您正在寻找的是[java.lang.Process](http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/Process.html)。进程是Java用来管理另一个进程的东西。其他进程是什么（Java 或本机，或 Python，或......）并不重要。

如 Process 的 Javadoc 页面所述，您可以使用 ProcessBuilder 或 Runtime 来启动一个新进程。然后，您可以使用 Process.waitFor() 在其他进程终止时获得通知。要真正成功地使用它，您可能需要深入研究 Java 的 wait()、notify() 和 InterruptedException 概念。为此，我可以推荐 Bruce Eckel 的“Thinking In Java”，可在[此处](http://www.mindviewinc.com/Books/downloads.html)下载。在那里，第 13 章应该有所帮助。

如果您想更多地了解受监控进程的状态，则需要在您的守护进程和受监控进程之间建立一些额外的通信方式。例如，这可能是一个 TCP 套接字。但这肯定属于另一个问题。

# php - JSON 包裹在一些 HTML 中，移除 HTML

> ID：13412046
> 
> 赞同：0
> 
> 时间：2012-11-16T07:15:39.033
> 
> 标签：php, html, file-get-contents, json

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我正在尝试使用 file_get_contents() 用 PHP 抓取页面。这个页面有一些 JSON 包裹在一些 HTML 中。我想去掉这个 HTML，以便能够在抓取的字符串上使用 json_decode()，这样我就可以单独处理 JSON。有什么干净的方法可以做到这一点吗？快速搜索并没有真正导致任何结果。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:34:17.960

解析/剥离 HTML 内容始终是一个棘手的问题，因为如果 HTML 标记格式错误并且速度缓慢，那么通过正则表达式的（常见？）解决方案可能会崩溃。我建议使用这个小的 HTML DOM 解析器类：

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

从子评论编辑和添加：

好的，这是一个不好的，因为内联 javascript 没有正确地用 CDATA-Tags 包装。否则这样的事情可能会起作用：

```
$html = new simple_html_dom();
$html->load_file('your-external-file');

foreach($html->find("script") as $obj) {
    if(isset($obj->innertext) && strpos($obj->innertext, 'window._jscalls'))
        echo $obj->innertext;
} 
```

# sql-server - 生成唯一 id 列的存储过程

> ID：13412048
> 
> 赞同：1
> 
> 时间：2012-11-16T07:15:54.623
> 
> 标签：sql-server, tsql, stored-procedures

再会

我有两个用户将数据保存到同一个数据库并且存在主键冲突的情况。

是否可以编写存储过程或触发器，通过添加两列来生成唯一标识。

例如：我`table2`与`table1`by相关`Table1ID`。两者的增量和种子都是 1。

如果我必须添加一行，`table2`我希望将自动生成的 ID 号添加到文本列中，从而使其唯一。所以 ID 类似于`JoeSoap5`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:36:48.670

如果你想生成一些独特的东西，你可以使用内置函数“ [NEWID()](http://msdn.microsoft.com/en-us/library/ms190348.aspx) ”。键入并执行以下代码：

```
SELECT NEWID() 
```

如果在插入第一个表中的记录时需要在第二个表中插入记录，可以使用[TRIGGERS](http://msdn.microsoft.com/en-us/library/ms189799.aspx)来实现。在您的情况下，您可以使用“AFTER INSERT TRIGGER”或“BEFORE INSERT TRIGGER” - 通常这将是在插入第一个表中的行之后/之前执行的一段代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:55:46.200

您没有指定您的 SQL Server 版本。

SQL 2012 引入了序列的概念 - [http://msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx) - 这将允许你做你想做的事。

# mysql - 如何提高此 SELECT 查询 JOIN 的性能

> ID：13412051
> 
> 赞同：0
> 
> 时间：2012-11-16T07:16:00.647
> 
> 标签：mysql, sql

我有一个查询，有时似乎需要很长时间才能运行。缓慢可能无关紧要，但我想检查可以做些什么来提高效率。

用户表有大约 40k 行。代码表有大约 30k 行。user_id 和 code 是唯一值。

```
SELECT * 
FROM `user`, code 
WHERE `user`.user_id = code.user_id 
AND code.code = '50816ef96210415d1cad824bdb43'; 
```

我在 code.user_id 字段上有一个索引设置。还有什么我可以做的吗？我应该在这里设置其他索引吗？

EXPLAIN 对该查询的输出：

```
>> +----+-------------+-------+--------+---------------+---------+---------+----------------------+-------+-------------+
>> | id | select_type | table | type   | possible_keys | key     | key_len | ref                 | rows  | Extra       |
>> +----+-------------+-------+--------+---------------+---------+---------+----------------------+-------+-------------+
>> |  1 | SIMPLE      | code | ALL    | user_id       | NULL    | NULL    | NULL                 35696 | Using where | 
>> |  1 | SIMPLE      | user  | eq_ref | PRIMARY       | PRIMARY | 4       | mydb.code.user_id |     1 |             | 
>> +----+-------------+-------+--------+---------------+---------+---------+----------------------+-------+-------------+
>> 2 rows in set (10.11 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:18:01.467

您还需要在`code.code`和`user.user_id`字段上添加索引，它应该开始飞行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:21:03.170

除了为 code.code 添加索引之外，您可以做的另一件事是仅选择您需要的列（我不喜欢使用 SELECT *）

# css - 单击纯 CSS 时向下滑动 div？

> ID：13412054
> 
> 赞同：7
> 
> 时间：2012-11-16T07:16:09.770
> 
> 标签：css, animation, html, slidedown

我发现这篇文章[如何在点击时创建滑动 DIV？](https://stackoverflow.com/questions/8101284/how-to-create-sliding-div-on-click)

但所有的答案都是 Jquery 方法。有没有办法用 PURE CSS 来创建它？我还有一些其他的想法......

1.  我可以添加什么以使向下滑动的 div 在滚动时保持不变
2.  将触发动画的链接更改为“关闭”，以使 div 向后滑动

这是该帖子中示例的链接// [http://shutterbugtheme.tumblr.com/](http://shutterbugtheme.tumblr.com/)

我也尝试过谷歌搜索，但唯一的结果是 jquery 方法......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T22:42:57.863

可以做到，尽管它有点小技巧。保持状态的两个元素（在 CSS 中称为 :checked）是复选框和单选按钮元素。因此，如果您通过使用 for 属性将复选框与标签关联并添加 div，则可以通过读取（隐藏）按钮的状态来获得结果：

```
<div class=window>
<input type=checkbox class=toggle id=punch>
<label for=punch>Punch It, Chewie<label>
<div><p>Here’s my content. Beep Boop Blurp.</p></div>
</div> 
```

和CSS：

```
input.toggle { display: none; }
input.toggle ~ div { height: 0px; margin: .2rem; overflow: hidden; }
input.toggle:checked ~ div { height: 180px; } 
```

[包含动画打开/关闭效果的进一步说明和示例](http://demosthenes.info/blog/506/HTML5-Window-Toggle-Events-In-Pure-CSS3)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T07:35:13.797

这在纯 CSS 中是不可能识别点击的。你可以用 :hover 和一个过渡来做到这一点，但这与没有 javascript 的情况一样接近。

```
.hover
{
    cursor: pointer;
    position: relative;
    z-index: 1;
}

.slide
{
    position: absolute;
    top: 0;
    z-index: -1;
    -webkit-transition: top 1s;
    -moz-transition: top 1s;
}

.hover:hover + .slide
{
    top: 50px;
} 
```

[http://jsfiddle.net/Kyle_/MaMu9/1/](http://jsfiddle.net/Kyle_/MaMu9/1/)

请注意，虽然过渡是 CSS3 并且在 IE<9 和旧版本的更好的浏览器中不起作用。

* * *

编辑：在使用 CSS 中的 :focus 属性发布另一个答案后：有一个警告是可能的：您必须单击使其向下滑动的元素外部以使其向上滑动，否则它可以正常工作。

请注意，该元素必须具有 tabindex='1' （或任何有意义的数字，具体取决于元素在文档中的位置）才能正常工作。

```
.hover:focus + .slide
{
    top: 50px;
    -webkit-transition: top 1s;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/MaMu9/1/](http://jsfiddle.net/Kyle_Sevenoaks/MaMu9/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T08:09:56.573

您可以识别元素上的“焦点”事件并使用 CSS 过渡对其进行操作。

这是一个示例，单击时会将 div 向下移动 50px

**标记**

```
<div tabindex='1' id='box'></div>​ 
```

**CSS**

```
#box {
 background-color:#3a6d90;
 width:100px; height:100px;    

 transition: margin-top 2s;
 -moz-transition: margin-top 2s; /* Firefox 4 */
 -webkit-transition: margin-top 2s; /* Safari and Chrome */
 -o-transition: margin-top 2s; /* Opera */
}

#box:focus {
 margin-top:50px;
 outline:0;
} 
```

工作示例：http: [//jsfiddle.net/NBHeJ/](http://jsfiddle.net/NBHeJ/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T07:29:35.173

这是如何开始的一个很好的例子。你可以在底部看到，他们发布了他们使用的动画函数的源代码，尽管这是 javascript。

[滑动 js 通用](http://www.switchonthecode.com/tutorials/javascript-sliding-panels-using-generic-animation)

如果你想要纯 css，我会使用 ws3schools 多年来一直是优秀的资源，但请注意，很大程度上取决于浏览器对你想要的效果是否有效的支持。

[w3schools-css](http://www.w3schools.com/css3/css3_animations.asp)

使它们具有效果的基本结构，您只需要沿着 body 内的两个 div 的线工作，在顶部隐藏和容器可见，并运行隐藏 div 的动画以显示将另一个 div 向下推，保持他们都内联。

```
<body>
 <div id="hidden-div"></div>
 <div id="main-content-div"></div>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-29T09:09:49.167

这可以使用`target`伪类来检测点击来完成。

将按钮 href 设置为滑动 div 的 id。

然后可以通过在slidingDiv上设置滑动div的高度来完成向下滑动：使用`transition`高度上的css3来设置目标类。

我认为原始按钮没有办法更改其 href 以使用纯 css 关闭滑动 div，但是您始终可以在滑动 div 上添加一个关闭按钮来关闭它。

这个关闭按钮通过在滑动 div 类上添加相同的转换来工作。

这是一个**[工作演示](http://jsfiddle.net/danield770/UReWk/1/)**。

享受。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-30T22:44:50.093

运行此代码。

```
input {
  display: none;
}

label {
  cursor: pointer;
  display: inline-block;
  padding: 10px 20px;
  border: 1px solid;
  border-radius: 4px;
  background: tomato;
  color: #FFF;
  font-family: arial;
  -webkit-transition: background-color 0.1s, color 0.1s;
}

label:hover {
  background: #blue;
  color: #blue;
}

.test {
  -webkit-transition: height .3s ease;
  height: 0;
  overflow: hidden;
  width: 200px;
  background: tomato;
  margin-top: 10px;
  color: #FFF;
}

input:checked + .test {
  height: 100px;
}
```

```
<label for="check">Click me</label>

<input id="check" type="checkbox">

<div class="test">
  <p>I am some hidden text</p>
</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-03T03:33:11.003

做同样事情的另一种方法：

```
.contents {
  background: yellow;
  color: rgba(0, 0, 0, .8);
  padding: 20px;
  margin:0;
}
.slide-up, .slide-down {
  overflow:hidden;
}
.slide-up > div, .slide-down > div {
  transform: translateY(-100%);
  transition: .4s ease-in-out;
}
.slide-down > div {            
  transform: translateY(0);
} 
```

工作示例：[https ://jsfiddle.net/webarthur/3ep33h5s/1/](https://jsfiddle.net/webarthur/3ep33h5s/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-03T03:17:34.080

简单的：

```
.contents {
  background: yellow;
  color: rgba(0, 0, 0, .8);
  padding: 20px;
  margin:0;
}
.slide-up, .slide-down {
  overflow:hidden
}
.slide-up > div, .slide-down > div {
  margin-top: -25%;
  transition: margin-top 0.4s ease-in-out;
}
.slide-down > div {            
  margin-top: 0;
} 
```

工作示例： [https ://jsfiddle.net/webarthur/3ep33h5s/](https://jsfiddle.net/webarthur/3ep33h5s/)

# iphone - iOS 拒绝 iphone 5 调整大小

> ID：13412057
> 
> 赞同：0
> 
> 时间：2012-11-16T07:16:20.867
> 
> 标签：iphone, ios, xcode

我最近一直在构建一个应用程序，虽然我喜欢 iPhone 5 拥有更多空间的方式，但我讨厌它们在故事板中的自动调整大小（不管取消选中自动调整大小）。有没有办法在整个项目的某个地方关闭自动调整大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:23:49.253

**1：进入故事板**

**2：单击您可能拥有的任何视图控制器**

**3：点击文件检查器**

**4：在那里关闭自动布局**

![故事板](../Images/019fd3c92d19950ec7172d67e3166e80.png)

然后你可以再次使用好的旧支柱和弹簧，但在为不同格式制作布局时可能会给你带来一些麻烦。

**解释什么是自动布局以及为什么你应该使用它：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)**

# c# - 如何添加 .mdf 文件以在 C# windows 应用程序中创建 .exe 安装文件

> ID：13412065
> 
> 赞同：1
> 
> 时间：2012-11-16T07:17:20.460
> 
> 标签：c#, deployment

我创建了一个使用 sql server、2008 数据库作为后端的 C# windows 应用程序。我想将项目与 .mdf 文件一起部署，以便在客户端计算机上启用在安装项目时创建数据库文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:21:34.917

客户端计算机不会安装 SQL Server（这就是服务器上的内容）。部署 MDF 文件没有意义。

此外，部署/设置项目不附带将数据库文件附加到服务器的步骤。我不建议以二进制形式分发数据库——如果它是一个新应用程序，我会在我的应用程序中运行一个设置 SQL 脚本，这意味着你的应用程序将适用于各种 SQL Server 版本（因为 MDF 文件不是必须在 SQL Server 版本之间转移而无需进行一些按摩）。

# android - android中的错误旋转图像，图像丢失

> ID：13412072
> 
> 赞同：2
> 
> 时间：2012-11-16T07:17:58.667
> 
> 标签：android

我有像这样旋转图像的代码

```
private void rotate(Bitmap src, float degree) {

        // create new matrix     
        Matrix matrix = new Matrix();
        // setup rotation degree
        matrix.postRotate(degree);
        // return new bitmap rotated using matrix
        Bitmap ro = Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);

        mImageView.setImageBitmap(ro);
        recycleBitmap();
    } 
```

它可以旋转，但是如果我连续单击旋转按钮，我的图像不可见，如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:05:46.340

尝试在 postRotate 之前设置 postScale

```
 // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // rotate the Bitmap
    matrix.postRotate(45); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:26:08.700

您在代码中所做的是每次单击旋转按钮时都会更改矩阵值。连续更改值可能会破坏图像的结构。您可以调整或缩放矩阵。试试这个'

```
private void rotate(Bitmap src, float degree) {
        // create new matrix     
        Matrix matrix = new Matrix();

 matrix.postRotate(degree,px,py);//(px,py)is pivot point with reference to which the image is rotated
        // return new bitmap rotated using matrix
        Bitmap ro = Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);

        mImageView.setImageBitmap(ro);
        recycleBitmap();
    } 
```

# c# - 办公自动化空引用异常（仅在某些安装上）

> ID：13412073
> 
> 赞同：0
> 
> 时间：2012-11-16T07:17:59.960
> 
> 标签：c#, winforms, .net-2.0, office-automation

我使用办公自动化已经有一段时间了，为了使用以下代码将数据合并到 word 文档中：

```
 oWord = new Microsoft.Office.Interop.Word.Application();
            oWord.Visible = false;
            oDoc = oWord.Documents.Open(
            ref oTemplate, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing); 
```

我过去从未遇到过代码问题，所有客户端都有相同的引用 dll 集（办公室互操作的 v12）。然而，几天前我注意到一些客户端在最后一行发送空对象引用异常

```
oWord.Documents.Open 
```

完全相同的代码和 DLL 似乎在某些客户端上工作，但在其他客户端上崩溃。其他人有同样的问题吗？

我尝试在其中一台有问题的计算机上卸载所有 .NET 版本，并仅重新安装我最初使用的版本（.NET 2.0SP1），但这并没有解决问题。这可能与有问题的客户端上的办公室安装/更新有关吗？

PS：我什至尝试在客户端上安装vstor（办公自动化视觉工作室程序集）但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:28:03.563

我经历过类似的事情，即使安装了 VSTOR 也出现了错误......我可以让它在所有机器上工作的唯一方法是拿起 Interop dll 的办公室并将我的项目的根目录作为“内容”并标记为“抄走”。此外，将“复制本地”评分为虚假参考。尝试并确保可以解决您的问题。

# c - 插入二叉搜索树访问冲突错误

> ID：13412076
> 
> 赞同：1
> 
> 时间：2012-11-16T07:18:03.230
> 
> 标签：c, pointers, runtime-error, access-violation, binary-search-tree

我试图在二叉搜索树中插入节点，我`if(ptr->data== item)`在 searchNode() 函数的行中遇到访问破坏错误。我怎样才能删除它。我是调试新手。

我首先尝试插入几个节点，然后使用显示功能显示它们。在插入过程中，程序会搜索要插入的节点的适当位置，然后将其插入。如果节点已经存在，程序只会返回。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
struct node
{
       int data;
       struct node* left;
       struct node* right;
};
void searchNode(struct node* root,int item,struct node* loc,struct node *par)
{
              struct node * ptr,*save;
               if(root==NULL)
               {
                             loc=NULL;
                             par=NULL;
                             return;
               }
               else
               {
                   if(item==root->data)
                   {

                                  par=NULL;loc=root;  return;
                   }
                   else if(item < root->data)
                   {
                         save=root;ptr=root->left;
                   }
                   else if(item > root->data)
                   {
                        save=root;ptr=root->right;
                   }               

                   while(ptr!=NULL)
                   {
                           if(ptr->data == item )
                           {
                                              loc=ptr;
                                              par=save;
                                           return;
                           }
                          else if(ptr->data > item )
                          {
                               save=ptr;
                               ptr=ptr->left;        
                          }
                          else
                          {
                              save=ptr;ptr=ptr->right;
                          }
                   }
                   loc=NULL;
                   par=save;
               }
}
void insertNode(struct node* root,int item, struct node * loc)
{
     struct node* par,*newNode;
     searchNode(root,item,loc,par);
     if(loc!=NULL)
               return;
     newNode=(struct node *)malloc(sizeof(struct node));
     newNode->left=NULL;newNode->right=NULL;
     if(par==NULL)
     {
                  root=newNode;
     }
     else if(item< par->data)
     {
          par->left=newNode;
     }
     else if(item> par->data)
     {
          par->right=newNode;
     }
}
void display(struct node* t, int level)
{
     int i;
     if(t)
     {
          display(t->right,level+1);
          printf("\n");
          for(i=0;i<level;i++)
          printf(" ");
          printf("%d",t->data);
          display(t->left,level+1);
     }
}
int main()
{
    int n,data,i;
    struct node* root,*loc;
    scanf("%d",&n);
    for(i=0;i<n;i++)
    {
                    scanf("%d",&data);
                    insertNode(root,data,loc);
    }
    display(root,1);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:42:06.460

您将插入方法称为：

```
insertNode(root,data,loc); 
```

并且结果`root`是按值传递的，因此在`insertNode`方法中对 root 所做的任何更改都不会在`main`. 由于您的`root`in`main`未初始化，因此同样会传递到`display`您尝试取消引用未初始化指针的位置，从而导致未定义的行为。

要解决此问题，您要么将地址传递`root`给`insertNode`函数，要么从函数返回更改后的根。

# c# - IME 功能映射到 TSF

> ID：13412078
> 
> 赞同：1
> 
> 时间：2012-11-16T07:18:07.097
> 
> 标签：c#, com

我有关于将 IME 功能映射到 TSF 的问题。

1.  tlbImp 似乎无法自动导入 msctf.dll，如何使用这个 com 组件？我必须手动定义它的 c# 托管包装器吗？

2.  我想以`ImmSetOpenStatus`TSF 方式实现，我找到了，我`ITfInputProcessorProfiles.ActivateLanguageProfile`应该`ITfThreadMgr.Activate`使用哪一个？我应该使用哪个接收器来实现`IMN_SETOPENSTATUS`通知？

3.  我使用`IMN_OPENCANDIDATE`并`IMN_CLOSECANDIDATE`通知消息知道何时在旧版中调用 ImmGetCandidateList，我如何在 TSF 中实现？（我应该听哪个水槽？然后打电话`ITextStoreACPServices::CreateRange-->ITfFnReconversion::QueryRange-->ITfFnReconversion::GetReconversion-->ITfCandidateList?)`

4.  我应该更换哪个级别的隔间`IMN_SETCONVERSIONMODE`以通知语言栏、全局、线程、文档或上下文的更改？

嗯，问题很多，如果有人能给我一些建议，不胜感激。

# java - 系统间连接异常

> ID：13412084
> 
> 赞同：1
> 
> 时间：2012-11-16T07:18:48.547
> 
> 标签：java, tomcat, connection, rmi, rmiregistry

这个问题已被问过很多次，我遵循了解决方案，但没有奏效。

我正进入（状态

```
java.rmi.ConnectException: Connection refused to host: 10.155.1.232; nested exception is:
        java.net.ConnectException: Connection timed out: connect 
```

试图从我的系统远程登录到`10.155.1.232` `1099`端口..我能够远程登录意味着没有端口问题

还尝试在`8090`我的 tomcat 端口上通过 telnet 反之亦然，再次正常工作

我的系统上没有防火墙。

我是否需要检查 rmi 注册表是否已经在运行`10.155.1.232`？

如何从cmd检查rmiregistry是否在windows系统中工作？

所以请指导我可能是什么问题

StackTrace 如下：

```
java.rmi.ConnectException: Connection refused to host: 10.155.1.232; nested exception is:
        java.net.ConnectException: Connection timed out: connect
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:110)
        at com.solcorp.pathfinder.PathFinderRmiImpl_Stub.callPStep(Unknown Source)
        at com.bsli.gawd.GetGAWDImplSoapBindingImpl.getGAWD(GetGAWDImplSoapBindingImpl.java:343)
        at com.bsli.gawd.GetGAWDImplSoapBindingSkeleton.getGAWD(GetGAWDImplSoapBindingSkeleton.java:
56)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
        at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
        at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
        at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
        at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
        at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.j
ava:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)

        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.ja
va:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:519)
        at java.net.Socket.connect(Socket.java:469)
        at java.net.Socket.<init>(Socket.java:366)
        at java.net.Socket.<init>(Socket.java:180)
        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:2
2)
        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:1
28)
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
        ... 34 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:38:25.400

如果您可以从任务管理器中看到 rmiregistry.exe，那就没问题了。但我认为您缺少安全策略。

查一下：[rmi 运行教程](http://docs.oracle.com/javase/tutorial/rmi/running.html)并告诉我？

# javascript - 设置属性值

> ID：13412088
> 
> 赞同：0
> 
> 时间：2012-11-16T07:19:25.360
> 
> 标签：javascript

我有一个用户控件。我为该用户控件设置了一个属性，例如：

```
public string SelectedValue
{
    get { return _selectedValue; }
    set { _selectedValue = value; }
} 
```

我需要使用 Javascript 为具有“SelectedValue”的属性分配一个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:28:27.973

假设您使用的是 C#，并假设您可以访问某些具有属性的对象`SelectedValue`，您可以这样做：

```
var value = "<%# YourObject.SelectedValue%>"; 
```

或者，如果您正在使用 Razor 和 MVC：

```
var value = "@YourObject.SelectedValue"; 
```

如果要将其发送到服务器端代码，则需要按照 Zaheer Ahmed 所说的进行 ajax 或将值保存在 cookie 中。

但是有这么多假设，也许您可​​以发布更多代码并提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:38:45.017

您不能从客户端 (js) 设置 C# 属性。您可以使用 ajax 做一些工作，但您根本无法操作服务器端代码。

如果您想了解更长的解释，请查看 asp.net 的实际工作原理，它的生命周期等。简单的说法是这样的：

用户使用他的浏览器向服务器发送请求。服务器接收它，创建一个请求的页面并实例化所需的类等。然后它被解析并作为 html 发送到客户端（当然还有其他资源，如图像、css ......）。实例化的页面类以后不能被客户端访问和修改，因为它已经被服务器刷新了。每个请求都会创建一个新实例。无论如何都无法用 js 修改 c#，但反之亦然。如果您可以使用一些 js 在远程服务器上修改 C#，您能想象会是什么样子吗？用户可以通过更改属性来入侵您的身边。

# c - C语言的正向切片工具

> ID：13412090
> 
> 赞同：0
> 
> 时间：2012-11-16T07:19:37.297
> 
> 标签：c, testing, slice, frama-c

我正在寻找 C 语言的正向切片工具。当我在谷歌搜索时，我没有找到任何结果。

我本来希望访问 Wisconsin Program-Slicing Tool 1.1 版，但该工具并未分发。任何其他工具能否提供正向切片 C 程序的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:11:40.890

开源静态分析平台 Frama-C 有一个具有[影响分析](http://frama-c.com/impact.html)功能的[切片](http://frama-c.com/slicing.html)插件。

OP 提出了一个计算初始化影响的示例`sum = 0;`。这个例子是这样的：

```
void main() {
    int i = 1;     int sum = 0;
    while (i<11) {
        sum = add(sum, i);
        i = add(i, 1);
    }
    printf("sum = %d\n", sum);
    printf("i = %d\n", i);
}

static int add(int a, int b)
{
    return(a+b);
} 
```

要使用的命令行是：

```
frama-c-gui -val t.c 
```

![影响分析截图](../Images/59c30eb9fa95b4ca9cf8506fc19641f7.png)

左侧栏中的复选标记告诉用户 function 中也有选定的语句`add`。在右下角，分析器从一篇学术文章中指出了这个示例的一些小问题。

# c# - 有没有办法在c#中注释允许的值

> ID：13412092
> 
> 赞同：3
> 
> 时间：2012-11-16T07:19:47.777
> 
> 标签：c#, parameters, restriction

我有相对经常的方法，我只希望填充参数作为输入。如果有人调用该方法，并且参数不正确，则应该抛出错误。

有没有办法注释方法说：只允许某些值范围，或者它们不应该为空？

对于泛型，有类似“where”子句的限制（但没有那么远没有值）。

所以我想做而不是

```
private static void DoSomething(string string_in, object object_in,... ) 
{
    if (null == object_in) throw new NullReferenceException("Input parameter of object is empty.");
    if (String.IsNullOrEmpty(string )) throw new NullReferenceException("Input parameter string  is empty."); 
```

就像是

```
private static void DoSomething(string string_in, object object_in,... ) 
    where string _in:!String.IsNullOrEmpty(string_in)
    where object_in : object_in !=null 
```

或者

```
private static void DoSomething(string string_in != null, object object_in != null,... ) 
```

或（我最想要的）

```
[Restriction string_in: value != null, value != empty]
[Restriction object_in: value != null]
[Restriction int_in: value inRange 3..9]
private static void DoSomething(string string _in, object object_in,... ) 
```

所以简而言之，有没有更好的方法将调用类型限制为一定数量的值，然后只需手动一遍又一遍地比较某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:00:05.627

代码合约为您的代码提供静态分析，因此它非常接近您的需求。作为奖励，您还可以启用运行时检查。

来自[msdn](http://msdn.microsoft.com/en-us/library/dd264808.aspx)：

> 代码契约提供了一种在代码中指定前置条件、后置条件和对象不变量的方法。前提条件是输入方法或属性时必须满足的要求。后置条件描述了方法或属性代码退出时的期望。对象不变量描述了处于良好状态的类的预期状态。
> 
> 代码契约包括用于标记代码的类、**用于编译时分析的静态分析器**和**运行时分析器**。代码契约的类可以在 System.Diagnostics.Contracts 命名空间中找到。
> 
> 代码合约的好处包括：
> 
> *   改进的测试：代码合约提供静态合约验证、运行时检查和文档生成。
>     
>     
> *   自动测试工具：您可以使用代码契约通过过滤掉不满足前提条件的无意义测试参数来生成更有意义的单元测试。
>     
>     
> *   静态验证：静态检查器可以在不运行程序的情况下判断是否存在合同违规。它检查隐式契约，例如空解引用和数组边界，以及显式契约。
>     
>     
> *   参考文档：文档生成器使用合同信息扩充现有 XML 文档文件。还有一些样式表可以与 Sandcastle 一起使用，以便生成的文档页面具有合同部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:00:29.993

您可以使用 Enterprise Library 5.0 中的验证应用程序块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:21:42.763

不，因为编译器应该如何知道一个值是否为空？您可以获得的最接近的是[代码合同](http://msdn.microsoft.com/en-us/library/dd264808.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:23:36.707

不，您需要记录您的方法并在其中添加信息，或者您可以实现自定义属性但没有编译器会强制执行。另外，*不要*抛出`NullReferenceException`. 抛出一个`ArgumentNullException`或`ArgumentException`。正如一些人所说，代码合同可能会提供类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T14:54:52.270

如果您使用[ReSharper ，您可以使用](https://www.jetbrains.com/resharper/ "锐化器")[代码分析注释](https://www.jetbrains.com/resharper/help/Code_Analysis__Code_Annotations.html)来装饰您的方法并返回值，尤其是使用合同注释进行值和可空性分析。

# ios - 检查是否单击了注释标注

> ID：13412093
> 
> 赞同：0
> 
> 时间：2012-11-16T07:19:49.713
> 
> 标签：ios, mapkit, mkannotationview, ios6-maps, callout

我想检查是否单击了注释：所以它来自：

![还没有点击](../Images/b5c03805f29691e55f01ea904a49f32e.png)

到 ：

![点击](../Images/da92af4f7af81df666806d22415c9693.png)

这是我显示注释的代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
static NSString *identifier = @"MyLocation";

if ([annotation isKindOfClass:[MyLocation class]]) {

    MKAnnotationView *annotationView = (MKAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        annotationView.image = [UIImage imageNamed:@"arrest.png"];//here we use a nice image instead of the default pins
        annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    } else {
        annotationView.annotation = annotation;

    }

    return annotationView;

}

return nil; 
```

}

rightCalloutAccesoryView 是标注内的蓝色按钮。但是当用户点击注释时我需要隐藏一些东西。

有谁知道如何检查/执行此操作？

谢谢是提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:41:40.917

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
//do your code
} 
```

# c++ - 带有 boost:function 定义的 boost:signals 映射

> ID：13412094
> 
> 赞同：1
> 
> 时间：2012-11-16T07:19:50.563
> 
> 标签：c++, shared-ptr, boost-function, boost-signals

我正在尝试创建一个简单的管理器，它将错误代码映射到函数。但是由于地图复制了值并且信号是不可复制的，所以这不是解决方案。我不能使用 shared_ptr 指针映射，因为 * 运算符在 boost::function 中被阻止。

我应该使用哪个集合来存储它？

```
typedef boost::function<bool (shared_ptr<EngineEvent> event,long timeSinceEvent)> EngineErrorHandler;
typedef boost::signal<bool (  EngineErrorHandler )> ErrorSignal;
typedef std::map<EventErrorType,ErrorSignal> ErrorHandlers;

class ServiceErrorManager {

    public:
        static ServiceErrorManager* getInstance();

        void registerErrorHandler(EngineErrorHandler& handler,EventErrorType subScribeTo);
        void signalEngineEventfail(shared_ptr<EngineEvent> event);

    private:
        static ServiceErrorManager* m_pInstance;

       ErrorHandlers errorTypeToSignal;

        ServiceErrorManager();
        ~ServiceErrorManager();
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:00:30.740

您始终可以将所有内容存储到结构中，并使用自定义谓词将 shared_ptr 或 unique_ptr 对象存储在映射或集合中。这似乎也会使您的代码更加不言自明。

# nginx - 无法从 nginx 获取第一个请求的 uid

> ID：13412100
> 
> 赞同：2
> 
> 时间：2012-11-16T07:20:13.787
> 
> 标签：nginx, php

我已经在 nginx 中安装了 uid 模块，还添加了与 uid 相关的配置。

```
userid          on;
userid_name     uid;
userid_expires  365d;
userid_p3p      'policyref="/w3c/p3p.xml", CP="CUR ADM OUR NOR STA NID"'; 
```

我成功地获得了uid，但只有在第一次请求之后。在我的第一个请求中，它只是设置了uid。我无法在php中访问它。
我可以看到

> 设置 Cookie uid=fwAAAVCl6NEEvCbKAwMEAg==; expires=星期六，2013 年 11 月 16 日 07:18:41 GMT；路径=/

在我的萤火虫中获取第一个请求的响应标头。
我的 nginx 访问日志是用以下日志编写的，用于第一次请求。

127.0.0.1 - - [16/Nov/2012:12:48:41 +0530]“GET /_p.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42 HTTP/1.1”200 2536“http://127.0\. 0.1/_p.php" "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.3) Gecko/20100403 Fedora/3.6.3-4.fc13 Firefox/3.6.3" "-"

127.0.0.1 - - [16/Nov/2012:12:48:41 +0530]“GET /_p.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42 HTTP/1.1”200 2158“http://127.0\. 0.1/_p.php" "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.3) Gecko/20100403 Fedora/3.6.3-4.fc13 Firefox/3.6.3" "-"

127.0.0.1 - - [16/Nov/2012:12:48:44 +0530]“GET /_p.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42 HTTP/1.1”200 2536“-”“Mozilla/5.0 (X11;U;Linux i686;en-US;rv:1.9.2.3) Gecko/20100403 Fedora/3.6.3-4.fc13 Firefox/3.6.3" "-"

有人可以告诉我如何为我在 php 中的第一个请求获取 uid 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:58:15.317

知道了。

```
location ~ \.php$ {
    root           /usr/share/nginx/html;
    try_files $uri =404;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    fastcgi_param  UID_GOT $uid_got;
    fastcgi_param  UID_SET $uid_set;
    include        fastcgi_params;
} 
```

添加了这些 nginx 配置，当第一个请求被调用时，我在**$_SERVER['UID_SET']**中获取 uid ，对于其他请求，uid 在**$_SERVER['UID_GOT']**中设置。

# jquery - 将数据从数据库填充到表中

> ID：13412104
> 
> 赞同：0
> 
> 时间：2012-11-16T07:20:20.927
> 
> 标签：jquery, asp.net, json

我正在使用 jQuery mobile，并且我有一个表，并且希望像 gridview 一样从数据库中填充数据，并从数据库中执行编辑删除操作。我想使用 JSON。请告诉我如何绑定数据库中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:26:35.370

您可以使用 jTemplates 和 Json 来显示和更新数据。
这是使用 jquery 和 jtemplate 显示数据的一个很好的例子
[http://www.dotnetcurry.com/ShowArticle.aspx?ID=573](http://www.dotnetcurry.com/ShowArticle.aspx?ID=573)

# c# - 如何组织集中日志记录？

> ID：13412106
> 
> 赞同：5
> 
> 时间：2012-11-16T07:20:29.070
> 
> 标签：c#, logging, log4net, nlog

情况是：我们有许多工作应用程序实例，在`C#`. 我们希望他们登录一个地方（可能是一个文件）。据我所知`log4net`，`NLog`可以通过 TCP 发送日志。问题是 - 如何收听这些日志并存储它？是否有任何可行的解决方案来收集这些日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:41:54.143

在 log4Net 你应该配置 appender，[这里官方文档](http://logging.apache.org/log4net/release/config-examples.html)见 RemotingAppender

对于监听 TCP，您应该使用 TcpListener，就像在[这个资源](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)中一样，存在一些 log4net 客户端，[像这样](http://www.codeproject.com/Articles/32176/LogViewer-A-Simple-Log-Listening-Utility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:40:04.310

在 NLog 中，您可能会考虑[Database](https://github.com/nlog/nlog/wiki/Database-target)目标。NLog 有一些您可能会考虑的其他目标，包括[LogReceiverService](https://github.com/nlog/nlog/wiki/LogReceiverService-target)，它将日志消息发送到 WCF 服务或 Web 服务，在那里它们可以记录到任何 NLog 目标，包括文件。

在 log4Net 中，您可能会考虑[AdoNetAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.AdoNetAppender.html)。配置示例[在这里](http://logging.apache.org/log4net/release/config-examples.html)。

我会注意到，在过去，我实现了一个基于 WCF 的 LoggingService（最终类似于 NLog 的 LogReceiverService），这对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T19:41:54.023

最好使用 MS 提供的应用程序洞察功能。它可以使用任何语言，而不仅仅是 Microsoft 语言。应用洞察分为两部分。用于检测遥测（记录数据）并在 azure 仪表板中可视化这些日志的 SDK。SDK 是开源的，您需要为 azure 可视化工具付费。如果您不想付费，请在代码中使用 Application insgists 并将这些日志发送到开源的弹性堆栈

最好的建筑

MS Application Insights——用于检测日志

Apache Kafka——充当管道和临时存储，将您的日志发送到 kafka

logstash——一个过滤器，你可以用它过滤日志

elasticsearch - 一个没有 sql 数据库到存储过滤数据的位置

kibana - 从弹性中提取数据并提供可视化的仪表板。

您还可以将 spark 链接到 kafka 输出以触发电子邮件、短信形式的警报。

# android - 在Android中隐藏浏览器地址栏

> ID：13412107
> 
> 赞同：2
> 
> 时间：2012-11-16T07:20:30.700
> 
> 标签：android, xml, jakarta-ee

我创建了一个 WebView 应用程序，一切正常。我是 Android 新手。该应用程序需要的唯一剩余功能是隐藏地址栏。因为我希望该应用程序看起来更像一个常规应用程序，而不是 Web 浏览器窗口中的网页。

我的代码是这样的，

```
package com.Mobi.ebookread;

public class Mobile extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        final WebView webview = (WebView) findViewById(R.id.helloWebView);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.loadUrl("http://www.google.com");

    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:30:13.083

我认为有问题。webview 没有地址栏，似乎浏览器应用程序正在打开。可能发生重定向并导致浏览器应用程序打开，并且您没有使用 WebViewClient 和 shouldOverrideURLLoading() 拦截该重定向

下面是 webview 的样子。

![网络视图](../Images/6131201abfbc6289eacd18994e55cf0c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:16:12.367

最后我试试这个。它对我有用..

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity);
    //webview use to call own site
    webview =(WebView)findViewById(R.id.webView1);
    webview.setWebViewClient(new WebViewClient()); //use to hide the address bar      
    webview .getSettings().setJavaScriptEnabled(true);
    webview .getSettings().setDomStorageEnabled(true); //to store history    
    webview.loadUrl("http://www.google.com"); 
    } 
```

你的整个 main.xml(res/layout) 看起来应该是这样的：

```
`<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/webView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"/>` 
```

不要去添加布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:36:11.713

试试下面的代码：

```
webView=(WebView) findViewById(R.id.helloWebView);
webView.getSettings().setJavaScriptEnabled(true);
webView.setWebViewClient(new WebViewClient() {
   @Override
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
      view.loadUrl(url);
      return true;
   }
});
webview.loadUrl("http://www.google.com"); 
```

# c++ - 为什么信号量的条件/互斥实现在其“wait()”函数中需要一个“while”循环？

> ID：13412110
> 
> 赞同：5
> 
> 时间：2012-11-16T07:20:43.307
> 
> 标签：c++, boost

我一直在仔细研究以下 SO 问题的公认答案：[C++0x has no semaphores? 如何同步线程？](https://stackoverflow.com/questions/4792449/c0x-has-no-semaphores-how-to-synchronize-threads)

在该答案的信号量实现中，这里是`wait()`函数的实现：

```
void wait()
{
    boost::mutex::scoped_lock lock(mutex_);
    while(!count_)
        condition_.wait(lock);
    --count_;
} 
```

我试图了解这种`while(!count_)`情况的目的。

另一个 SO 问题（[信号量的这种实现如何工作？](https://stackoverflow.com/questions/4526182/how-does-this-implementation-of-semaphore-work)）的答案表明，当`notify_one()`在条件变量上调用时，可能会*唤醒*多个等待该条件变量的线程 - 因此需要`while`环形。我想确认这一点 - 是完整和/或正确的答案，还是有其他原因`while`需要循环？

如果唤醒了多个线程，哪个线程拥有互斥锁？我想得越多，如果由于一次调用`notify_one()`. 两个被唤醒的线程是否不可能看到该`count_`值高于 0，并继续进行减量`count_`，导致`count_`值小于 0，并破坏信号量的目的（和正确性）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:45:50.447

正如您已经提到的，可能存在[虚假](http://en.wikipedia.org/wiki/Spurious_wakeup)的唤醒，或者`notify_one`由于实现细节而可能唤醒多个线程。

唤醒多个线程并不意味着它们都可以同时进入受保护的部分，它只是意味着当 ThreadA 释放锁时，ThreadB（在前面的示例中与 ThreadA 一起被唤醒）也进入进入受保护的部分。此时 ThreadA 已经完成了它的工作，所以 ThreadB 不会看到`count`变量处于与 ThreadA 找到它的状态相同的状态。

# r - R中的取消统计

> ID：13412111
> 
> 赞同：2
> 
> 时间：2012-11-16T07:20:44.220
> 
> 标签：r, statistics, plyr

抱歉这个菜鸟问题：我正在尝试计算 R 中的每日统计信息。每个日期有多个约会，以及 3 种不同的状态：“已确认”、“已取消”和“延迟取消”。

我已经尝试过`table(data)`似乎可以进行正确计数的方法，但是它会使所有日期都乱七八糟。有没有办法解决这个问题，或者我怎样才能在不丢失日期顺序的情况下进行计数？

```
> 数据[25:35,]

        日期状态
25 2012 年 9 月 8 日 确认
26 9/8/2012 已确认
27 9/8/2012 取消
28 2012 年 9 月 8 日 确认
29 2012 年 9 月 9 日 确认
30 2012 年 9 月 9 日 确认
31 2012 年 9 月 9 日 取消
32 2012 年 9 月 9 日 确认
33 2012 年 9 月 9 日延迟取消
34 2012 年 9 月 9 日 确认
35 2012 年 9 月 10 日 确认

```

这是 3 个月内约 1000 次预约的简化版本（全套还有房间号、客户类型等），所以我希望通过这个简单的示例了解如何在 R 中对数据进行计数和排序。

如果我创建一个新的唯一日期向量，`unique(data$Date)`我可以使用它作为箱来对状态计数进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:55:45.480

我会`count`从`plyr`包中使用来做到这一点。让我们加载您的数据：

```
dat = read.table(text = "        Date             Status
 9/8/2012          Confirmed
 9/8/2012          Confirmed
 9/8/2012          Cancelled
 9/8/2012          Confirmed
 9/9/2012          Confirmed
 9/9/2012          Confirmed
 9/9/2012          Cancelled
 9/9/2012          Confirmed
 9/9/2012  LateCancellation
 9/9/2012          Confirmed
 9/10/2012          Confirmed", sep = "", header = TRUE) 
```

首先，我们需要转换`Date`为适当的时间感知数据类型而不是字符串：

```
dat[["Date"]] = strptime(dat[["Date"]], format = "%m/%d/%Y") 
```

并执行计数：

```
require(plyr)
cdat = count(dat, c("Date", "Status"))
> cdat
        Date           Status freq
1 2012-09-08        Cancelled    1
2 2012-09-08        Confirmed    3
3 2012-09-09        Cancelled    1
4 2012-09-09        Confirmed    4
5 2012-09-09 LateCancellation    1
6 2012-09-10        Confirmed    1 
```

请注意，日期现在的顺序正确，这是因为使用`strptime`. 如果你想要输出看起来像什么，你需要从包`table`中进行一些调整：`dcast``reshape2`

```
> dcast(cdat, Date ~ Status, value.var = "freq")
        Date Cancelled Confirmed LateCancellation
1 2012-09-08         1         3               NA
2 2012-09-09         1         4                1
3 2012-09-10        NA         1               NA 
```

# java - 使用 HQL 进行内部连接

> ID：13412112
> 
> 赞同：10
> 
> 时间：2012-11-16T07:20:46.570
> 
> 标签：java, sql, hibernate, hql

我正在尝试在一列上连接两个表。在数据库方面，没有映射，因为这是我不想讨论的。

我想使用 INNER JOIN 执行 HQL 查询并检索 ROLE 对象/结果。

到目前为止，这是我的 hql

> > session.createQuery("从 ROLE 作为角色 INNER JOIN INVOLVEMENT 作为参与 ON role.id = admission.roleid WHERE admission.id = X").list();

我看到 ON 在 HQL 上不可用。我如何明确告诉 Hibernate 仅在此列上加入。

我也试过下面一个

> > 从 ROLE 中选择 roleSpec 作为角色，INVOLVEMENT 作为参与 WHERE 角色.ID = 参与.role_id 和参与.id =27251352

但我得到的角色没有映射到异常中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T07:54:24.253

请检查您的 ROLE 是否确实是一个映射实体。此外，您不需要执行“ON” - hibernate 知道什么是连接列（我知道如何在 JPA 定义它） - 所以不需要在语句中提供它。它应该是 -

```
session.createQuery("from Role as role INNER JOIN Involvement as involvement WHERE involvement.id = X").list(); 
```

我假设您将 Role 类映射到 ROLE 表，并将 Involvement 类映射到 Involement 表。
也许您错误地使用了表名，这就是您收到“未映射”错误的原因。
上次我编写 HQL（而不是 JPA-QL）时，我使用以下[链接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)作为参考，它提供了所需的所有信息。

# c# - 执行 MySQL 查询时出错

> ID：13412113
> 
> 赞同：1
> 
> 时间：2012-11-16T07:20:56.713
> 
> 标签：c#, mysql, exception, insert

我试图运行此方法，但有时会出错，有时运行平稳。我不知道出了什么问题。有任何想法吗？

```
public bool NewArchive(string appId, string fileUrl, long length, string thumbUrl)
{
    ConnectIfClosed();

    string query = "INSERT INTO archive (appid, file_url, thumb_url, length) " +
        "VALUES ('" + appId + "', '" + fileUrl + "', '" + thumbUrl + "', '" + length + "');";
    bool result;

    using (MySqlCommand cmd = new MySqlCommand(query, sqlConnector))
    {
        try
        {
            cmd.ExecuteNonQuery();
            result = true;
        }
        catch (Exception ex)
        {
            mysqlerror = ex.ToString();
            result = false;
        }
    }

    return result;
} 
```

这是我有时会遇到的例外情况。首先，我认为这与不`cmd`正确处理有关..但我不确定。

```
MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered during command execution. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Fatal error encountered attempting to read the resultset. ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Reading from the stream has failed. ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at MySql.Data.MySqlClient.MySqlStream.ReadFully(Stream stream, Byte[] buffer, Int32 offset, Int32 count)
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.LoadPacket()
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId)
   at MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int32& insertedId)
   at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at ScrSnap.Sql.GetRowValueFromArchive(String row, String where, String wherematch) in C:\Users\Ben\Documents\Visual Studio 2010\Projects\Image software\ScrSnap 4\ScrSnap 4\Sql.cs:line 156 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:07:23.647

我认为这里的问题是您与多个命令对象共享一个连接对象（我假设您的程序中有更多的 sqls 而不仅仅是这个；））。除非他们都参与单一交易，否则请避免这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:12:11.493

几件事......“ID”列，可能长度也是数字字段，在构建字符串时不应包含在引号中。此外，如果您曾经是基于 Web 的（或者如果内部是恶意的），那么通过为 SQL 构建一个字符串将很容易发生 SQL 注入。无论如何，我强烈建议你习惯于参数化你的 MySQLCommand 变量。

你有

```
 string query = "INSERT INTO archive (appid, file_url, thumb_url, length) " +
        "VALUES ('" + appId + "', '" + fileUrl + "', '" + thumbUrl + "', '" + length + "');"; 
```

改成

```
 string query = "INSERT INTO archive (appid, file_url, thumb_url, length) " +
        "VALUES (" + appId + ", '" + fileUrl + "', '" + thumbUrl + "', " + length + ");"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T00:45:37.513

我在下面的语句中用 & 更改了 + ，然后它工作正常。

```
string query = "INSERT INTO archive (appid, file_url, thumb_url, length) " +
        "VALUES ('" + appId + "', '" + fileUrl + "', '" + thumbUrl + "', '" + length + "');"; 
```

# c++ - 无法在 Qt 中删除树视图的属性

> ID：13412116
> 
> 赞同：1
> 
> 时间：2012-11-16T07:21:08.273
> 
> 标签：c++, qt, treeview, qfilesystemmodel

我是QT的新手。我正在开发一个需要使用树视图显示文件系统的应用程序。

基本上，我的 .ui 文件中有一个小部件，在该小部件上放置了 Treeview。然后在我的 .cpp 文件中，我编写了以下代码：

```
model = new QFileSystemModel(this);
model->setRootPath(QDir::homePath());
ui->treeView->setModel(model); 
```

在我的 .h 文件中，我输入了以下内容：

```
QFileSystemModel *model; 
```

当我运行该应用程序时，它会在树视图中显示文件系统，但它还会在其上方显示名称、类型、大小、日期修改。我想摆脱这些。这是示例图像：

![在此处输入图像描述](../Images/48b79bdbb00471c33ab1c617537e9deb.png)

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:51:00.120

我认为[QTreeView::hideColumn](http://doc.qt.digia.com/qt/qtreeview.html#hideColumn)做到了。

# php - CodeIgniter foreach 中的最后一个循环

> ID：13412117
> 
> 赞同：0
> 
> 时间：2012-11-16T07:21:09.837
> 
> 标签：php

我试图在我的 CodeIgniter for 循环中捕捉最后一个循环。我试图在除最后一个之外的每个新闻项下生成一个 < hr /> 。这是我的代码：

```
<table class="news">
<?php foreach($news as $news_item): ?>
    <tr>
        <td class="headline"><?php echo $news_item['title']; ?></td>
    </tr>
    <tr>
        <td class="text"><?php echo $news_item['text']; ?></td>
    </tr>
    <tr>
        <td><hr /></td>
    </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:42:34.563

У你可以尝试这样的事情：

```
<?php for($i = 0, $lastIDX = count($news)-1; $i<=$lastIDX; $i++): ?>
    <!-- html code ... $news_item is $news[$i] now -->
    <? if ($i !== $lastIDX) : ?>
        <tr>
            <td><hr /></td>
        </tr>
    <?php endif; ?>
<?php endfor; ?> 
```

但最好使用 CSS :last-child 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:34:46.727

事先获取数组的最后一个键，并在循环时将其与当前键进行比较：

```
$keys = array_keys($news);
$last_key = end($keys);
foreach ($news as $news_key => $news_item) {
    if ($news_key == $last_key) {
        // at the last item
    } else {
        // not at the last item
    }
} 
```

您也可以事先计算数组中的元素，并在循环内有一个计数器，每轮递增一次，这样您就可以判断您是否在最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:36:26.330

您可以将其用作解决方案：

```
$last = end($news);
<table class="news">
<?php foreach($news as $news_item): ?>
    <tr>
        <td class="headline"><?php echo $news_item['title']; ?></td>
    </tr>
    <tr>
        <td class="text"><?php echo $news_item['text']; ?></td>
    </tr>
    <tr>
        <td><?=(($last == $news_item)?"":"<hr />")?></td>
    </tr>
<?php endforeach; ?>
</table> 
```

$last 是数组 XD 的最后一个数组。

# iphone - 为什么sync.me app可以自定义来电画面？

> ID：13412121
> 
> 赞同：0
> 
> 时间：2012-11-16T07:21:23.097
> 
> 标签：iphone, ios

我一直被告知`"incoming call"`屏幕不是`customizable`，因为苹果的控件。但是这个应用程序明显修改了来电画面。

链接在这里：[检查这个](http://techcrunch.com/2012/11/15/sync-me-closes-4m-in-funding-to-scale-up-its-social-contact-syncing-ios-app/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20Techcrunch%20%28TechCrunch%29)

只是想知道这是如何完成的，因为这个应用程序在应用商店中，这意味着我们不需要根 iOS。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:12:29.583

从文章的措辞来看，sync.me 应用程序会扫描您朋友的社交网络状态更新，并将它们附加到您保存在他们的联系信息中的图片中。

呼叫屏幕未被修改。只是与联系人关联的图片。

# google-maps - 从哪里获得谷歌地图上显示的航运路线的数据（即地理位置）？

> ID：13412122
> 
> 赞同：0
> 
> 时间：2012-11-16T07:21:23.487
> 
> 标签：google-maps

有什么想法吗？应该是国际标准。我一直在努力搜索数据，但我找不到任何下载的地方。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:41:52.853

这些是渡轮路线（请参阅此[问题](https://stackoverflow.com/questions/12600279/google-maps-api-sea-routes/12602891#12602891)的答案）。您可以使用[TravelMode.TRANSIT](https://developers.google.com/maps/documentation/javascript/reference#TravelMode)通过路线服务获取它们。

# c++ - 在主应用程序中声明的dll中实现接口 - C++

> ID：13412128
> 
> 赞同：0
> 
> 时间：2012-11-16T07:21:50.293
> 
> 标签：c++, dll, interface, implementation

我有一个主应用程序，它有一个接口（抽象类），这个接口需要在主应用程序和外部 dll 中都有实现。我将使用指向此接口的指针来访问方法，因此我将根据某些条件将指针分配给任何一个实现的地址。

如何做到这一点？

我在堆栈溢出中遇到了一个[问题，其中标记为解决方案的答案说](https://stackoverflow.com/questions/431533/c-dynamically-loading-classes-from-dlls)

主应用程序中的界面

```
class IModule
{
    public:
    virtual ~IModule(); // <= important!
    virtual void doStuff() = 0;
}; 
```

可以在主应用程序中实现

```
class ActualModule: public IModule
{
    /* implementation */
}; 
```

并且可以从 dll 中导出一个函数以返回指向 dll 中实现的指针

```
__declspec (dllexport) IModule* CreateModule()
{
    // call the constructor of the actual implementation
    IModule * module = new ActualModule();
    // return the created function
    return module;
} 
```

dll 将如何知道存在诸如**IModule 之**类的东西？

我可以将**IModule**标记为*extern*并在 dll 中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:30:10.227

'dll 怎么会知道像 IModule 这样的东西存在？

因为 dll 代码将包含声明 IModule 的头文件。头文件是在不同源文件之间共享声明的方式。Dlls对此没有影响，并且没有必要将IModule标记为extern。

顺便说一句，我会这样做

```
virtual ~IModule() {} // <= important! 
```

# android - 安卓模拟器无法绑定市场计费服务？

> ID：13412130
> 
> 赞同：0
> 
> 时间：2012-11-16T07:21:54.890
> 
> 标签：android, android-emulator

当我可以在我的模拟器中运行我的应用程序计费程序时，它显示无法绑定市场计费服务。

```
 @Override
    public void onCreate() {
        super.onCreate();
        Log.i(TAG, "Service starting with onCreate");

        try {
            boolean bindResult = bindService(new Intent("com.android.vending.billing.MarketBillingService.BIND"), this, Context.BIND_AUTO_CREATE);
            if(bindResult){
                Log.i(TAG,"Market Billing Service Successfully Bound");
            } else {
                Log.e(TAG,"Market Billing Service could not be bound.");
                //TODO stop user continuing
            }
        } catch (SecurityException e){
            Log.e(TAG,"Market Billing Service could not be bound. SecurityException: "+e);
            //TODO stop user continuing
        }
    } 
```

这意味着**bindService**不返回真值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:29:12.367

它不能在模拟器上测试（因为模拟器没有Android Market。）。[测试官方网站的应用内结算](http://developer.android.com/guide/google/play/billing/billing_testing.html)部分说

> 您不能使用模拟器测试应用内计费；您必须在设备上安装应用程序才能测试应用内计费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:31:21.017

模拟器不支持市场计费。在您的设备中尝试

# android - 如何使用 Google 驱动器 API 密钥从 android 应用程序访问驱动器内容？

> ID：13412134
> 
> 赞同：2
> 
> 时间：2012-11-16T07:22:25.087
> 
> 标签：android, google-drive-api, google-drive-realtime-api

我无法访问 Google 云端硬盘。我在 Google API 控制台中创建了一个 API KEY 并启用了 Google Drive API 和 SDK。我在哪里设置代码中的 API KEY？

驱动器构建器没有`setJsonHttpRequestInitializer`方法。我在哪里可以设置 KEY？有其他选择吗？

```
private Drive getDriveService(String token) {

HttpTransport ht = AndroidHttp.newCompatibleTransport(); 
JacksonFactory jsonFactory = new JacksonFactory();          
Credential credentials = new GoogleCredential().setAccessToken(token);                                                          

    Drive.Builder b = new Drive.Builder(ht, jsonFactory, credentials);
    b.setHttpRequestInitializer(credentials);

return b.build();
} 
```

得到：

```
 com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
 {
   "code" : 403,
   "errors" : [ {
     "domain" : "usageLimits",
     "message" : "Access Not Configured",
     "reason" : "accessNotConfigured"
  } ],
  "message" : "Access Not Configured"
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:21:34.327

您需要在 API 控制台中激活两件事： - Drive API - Drive SDK

许多人只激活一个。

此外，不要忘记在发布最终应用程序之前添加您的真实证书 SHA1。

有这个类似的答案： [Google Drive SDK Exception](https://stackoverflow.com/questions/13462952/google-drive-sdk-exception)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T12:48:09.770

在 Android 中，按照**pommedeterresautee**的规定，我们需要执行 Drive API 和 Drive SDK 的激活，然后激活 API Key。

这必须在应用程序标签内的 Android 清单中设置，并与其他应用程序组件标签一样：

```
<application...>
<activity ...>
<meta-data
        android:name="com.google.android.apps.drive.APP_ID"
        android:value="id=YOUR_API_KEY" />
</application> 
```

执行此操作时，您将能够访问 api 而不会出现 403“未配置访问”问题。

# c# - 将 DataGrid 中的 ComboBox 绑定到视图中的集合

> ID：13412135
> 
> 赞同：0
> 
> 时间：2012-11-16T07:22:31.990
> 
> 标签：c#, wpf, mvvm

我有一个绑定到我的用户控件的视图。在我的用户控件上，我有一个数据网格，它从我的视图中绑定到一个集合。该数据网格中的一列是 DataGridComboBoxColumn，我需要将其绑定到视图中的不同集合。数据网格的绑定如下所示：

```
DataContext="{Binding .}" ItemsSource="{Binding VictimVillages}" 
```

datacontext 是视图，`VictimVillages`是我要在数据网格中显示的集合。

我试图访问我想在组合框中显示的集合

```
ItemsSource="{Binding Path=Patterns,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Views:ViewPlanner}}}" 
```

集合的名称是 Patterns，视图的类型是“ViewPlanner”，在`Views`命名空间中。

我已经创建了一个依赖关系图。我需要帮助找出黄色部分。 ![在此处输入图像描述](../Images/53e8467760a6d8aae5adeaa52658de1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:50:29.917

使用 RelativeSource 绑定时，您（大部分）必须在绑定路径中使用**DataContext.YourProperty 。**

如果 DataGrid 中的数据上下文也有 Patterns Collection 你可以这样做

```
ItemsSource="{Binding Path=DataContext.Patterns,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGrid}}}" 
```

我经常将“MarkerInterface”用于相对绑定。这意味着我可以添加到我的视图中的空接口。

```
public interface IDataContextMarker4PatternCollection {} 
```

现在将此接口添加到您的视图/用户控件中，其中模式集合属性位于数据上下文中。

现在你可以简单地使用RelativeSourceBinding

```
 ItemsSource="{Binding Path=DataContext.Patterns,RelativeSource={RelativeSource AncestorType={x:Type local:IDataContextMarker4PatternCollection }}}" 
```

# iphone - 如何在 iPhone 中编辑图像时修复 UIImageView 中的图像位置？

> ID：13412136
> 
> 赞同：1
> 
> 时间：2012-11-16T07:22:43.323
> 
> 标签：iphone, objective-c, uiimageview, uiimage

我正在做一些图像失真项目，我需要对图像实现各种失真效果。我面临的问题是，当我对其进行扭曲时，一些图像会旋转。

它只发生在一些`images`. 而其他`images`工作完美。那么有没有什么办法可以修复`image`like Portrait in的位置呢`UIImageView`？

请提供任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:53:37.107

这些是 UIImage 对象吗？如果是这样，请检查方向属性。根据原始图像数据的来源，UIImage 方向可能会受到相关 EXIF 标记的方向设置的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:58:53.173

下面的代码解决了我的问题。从[这里得到](https://stackoverflow.com/questions/5670682/iphone-preventing-an-image-to-rotate-into-its-uiimageview)

```
UIImage* rotatedImage = [UIImage imageWithCGImage:myImage.CGImage scale:1.0 orientation:UIImageOrientationLeft];
myImageView.image = rotatedImage; 
```

# android - Phonegap 错误仅使用 phonegap 不使用 Phonegap + native

> ID：13412137
> 
> 赞同：0
> 
> 时间：2012-11-16T07:22:45.257
> 
> 标签：android, cordova, jquery-mobile, mobile, phonegap-plugins

我已经问了很多天了，我想这现在正在排队，所以我再次发布这个请告诉我任何人都可以帮助我

```
ERROR    the connection to the server was unsuccessful. (file ///android_asset/www/index.html) pure    phonegap app 
```

代码如下：

```
<html>
<head>
<link rel="stylesheet" href="jquery-mobile/jquery.mobile.css">
<link rel="stylesheet" href="jquery-mobile/jqm-docs.css">
<script src="jquery-mobile/jquery.js"></script>
<script>
$(document).bind("mobileinit", function(){
    $.mobile.loadingMessageTextVisible = true;
});
</script>
<script src="jquery-mobile/jquery_mobile_old.js"></script>
<script>
    $(document).on("click", ".show-page-loading-msg", function() {
        var $this = $( this ),
            theme = $this.jqmData("theme") || $.mobile.loadingMessageTheme,
            msgText = $this.jqmData("msgtext") || $.mobile.loadingMessage,
            textonly = !!$this.jqmData("textonly");
        $.mobile.showPageLoadingMsg(theme, msgText, textonly);
    })
    .on("click", ".hide-page-loading-msg", function() {
        $.mobile.hidePageLoadingMsg();
    });
</script>

</head>
<body>
<div data-role="header"><h1>My App</h1></div>

<a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="#" style="text-decoration:none">
<button class="show-page-loading-msg">Outstanding Analysis For Creditors</button>
</a> 
```

但它在浏览器中运行良好。

问题是当我尝试在手机中打开它时出现错误。我正在使用 Dreamweaver CS6 并在[https://build.phonegap.com/中构建它](https://build.phonegap.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:34:20.687

使用 build.phonegap.com 时，您是否有权访问包含加载页面的活动的 .java 文件。如果是，则最有可能检查路径，网页的 url 不正确。

html 文件的名称也是正确的，如错误消息中所示。

您是否查看过此[页面](https://build.phonegap.com/docs/preparing-your-app#what_do_i_upload)中的文档.. 请记住，文件名是 index.html 而不是 index.htm 或其他任何东西。

**更新：** 我试图将 phonegap.js 的代码放入一个单独的文件中，但没有包含对 phonegap.js 的引用，应用程序不起作用。所以看起来，在 index.html 文件中包含对 phonegap.js 的引用很重要。

```
<html>
<head>
<meta name="viewport" content="user-scalable=no, initial-scale=3, maximum-scale=3, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=high-dpi" />
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css" />

      <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
      <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
      <script src="phonegap.js"></script>
<script>
$(document).bind("mobileinit", function(){
    $.mobile.loadingMessageTextVisible = true;
});
</script>
<script src="jquery-mobile/jquery_mobile_old.js"></script>
<script>
    $(document).on("click", ".show-page-loading-msg", function() {
        var $this = $( this ),
            theme = $this.jqmData("theme") || $.mobile.loadingMessageTheme,
            msgText = $this.jqmData("msgtext") || $.mobile.loadingMessage,
            textonly = !!$this.jqmData("textonly");
        $.mobile.showPageLoadingMsg(theme, msgText, textonly);
    })
    .on("click", ".hide-page-loading-msg", function() {
        $.mobile.hidePageLoadingMsg();
    });
</script>

</head>
<body>
<div data-role="header"><h1>My App</h1></div>

<a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="http://xyz.php" style="text-decoration:none">
<button class="show-page-loading-msg">xyz</button>
</a> <a href="#" style="text-decoration:none">
<button class="show-page-loading-msg">Outstanding Analysis For Creditors</button>
</a> 
```

# c# - 从 .Net 到 Java

> ID：13412142
> 
> 赞同：-1
> 
> 时间：2012-11-16T07:23:07.300
> 
> 标签：c#, java, .net

用 Java 编写相同代码的最佳方法是什么？：

```
 Array.Resize(ref DCamposGraficoOperaciones[index].DatosMeses, 12); 
```

我在 C# 中有这段代码，我必须把它放在 Java 中。非常感谢。我在 Java 中有一个名为 resizeDatosMeses 的方法来调整数组的大小，但是当我尝试以这种方式进行时：

```
DCamposGraficoOperaciones[index].getDatosMeses()=resizeDatosMeses(DCamposGraficoOperaciones[index].getDatosMeses(), 12) 
```

我有一个错误是：赋值的左侧必须是一个变量，请你给我建议？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T07:29:18.480

我*怀疑*你想要：

```
DCamposGraficoOperaciones[index].setDatosMeses(
    resizeDatosMeses(DCamposGraficoOperaciones[index].getDatosMeses(), 12)); 
```

您不能*分配*给方法调用的结果，这是您之前尝试做的。

我*强烈*建议您将此行分成两个单独的语句 - 并开始遵循 Java 命名约定，这将禁止`DCamposGraficoOperaciones`作​​为变量名。

此外，还不清楚为什么要调整数组的大小，但在 .NET 和 Java 中，使用更高级别的抽象可能会更好，例如`List<T>`在 .NET 或`ArrayList<T>`Java 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:33:36.440

在java中你不能重新调整数组的大小。您可以使用 ArrayList 并且可以向其中添加任意数量的值。

# c# - 如何使用基于 C# 中每一行中的列的开放 XML SDK 读取 xslx？

> ID：13412143
> 
> 赞同：2
> 
> 时间：2012-11-16T07:23:16.633
> 
> 标签：c#, excel, openxml-sdk

我正在尝试使用打开的 xml sdk 读取一些 .xslx 文件，但我真的很难找到任何好的示例。

我想要做的是读取整个 XSLX 文件并遍历所有行并从我指定的列中提取单元格值/单元格文本。

如下所示：

```
GetCellText(rowId, ColumnLetter) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:42:05.913

帮手：

```
private static string GetColumnName(string cellReference)
{
    if (ColumnNameRegex.IsMatch(cellReference))
        return ColumnNameRegex.Match(cellReference).Value;

    throw new ArgumentOutOfRangeException(cellReference);
}

private static readonly Regex ColumnNameRegex = new Regex("[A-Za-z]+"); 
```

代码：

```
using (var document = SpreadsheetDocument.Open(stream, true))
        {
            var sheets = document.WorkbookPart.Workbook.Descendants<Sheet>();

            foreach (Sheet sheet in sheets)
            {

                WorksheetPart worksheetPart = (WorksheetPart)document.WorkbookPart.GetPartById(sheet.Id);
                Worksheet worksheet = worksheetPart.Worksheet;
                var rows = worksheet.GetFirstChild<SheetData>().Elements<Row>();
                foreach (var row in rows)
                {
                    var cells = row.Elements<Cell>();
                    foreach (var cell in cells)
                    {
                        if(GetColumnName(cell.CellReference) == "A")
                        {
                            var str = cell.CellValue.Text;
                            // do whatewer you want
                        }
                    }
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:40:02.743

你的问题和这个类似

1）[打开xml excel读取单元格值](https://stackoverflow.com/questions/5115257/open-xml-excel-read-cell-value)

您可以通过 ID 获取行并通过列名查找值。

希望有帮助

# c# - 计时器不会滴答作响

> ID：13412145
> 
> 赞同：18
> 
> 时间：2012-11-16T07:23:26.690
> 
> 标签：c#, forms, timer

我的代码中有一个`Windows.Forms.Timer`，我正在执行 3 次。但是，计时器根本没有调用 tick 函数。

```
private int count = 3;
private timer;
void Loopy(int times)
{
    count = times;
    timer = new Timer();
    timer.Interval = 1000;
    timer.Tick += new EventHandler(timer_Tick);
    timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
    count--;
    if (count == 0) timer.Stop();
    else
    {
        // Do something here
    }
} 
```

`Loopy()`正在从代码中的其他地方调用。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-16T07:33:25.777

尝试使用 System.Timers 而不是 Windows.Forms.Timer

```
void Loopy(int times)
{
    count = times;
    timer = new Timer(1000);
    timer.Enabled = true;
    timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
    timer.Start();
}

void timer_Elapsed(object sender, ElapsedEventArgs e)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-04T15:06:14.307

如果在不是主 UI 线程的线程中调用 Loopy() 方法，则计时器不会计时。如果您想从代码中的任何位置调用此方法，则需要检查该`InvokeRequired`属性。所以你的代码应该是这样的（假设代码是一个表单）：

```
 private void Loopy(int times)
        {
            if (this.InvokeRequired)
            {
                this.Invoke((MethodInvoker)delegate
                {
                    Loopy(times);
                });
            }
            else
            {
                count = times;
                timer = new Timer();
                timer.Interval = 1000;
                timer.Tick += new EventHandler(timer_Tick);
                timer.Start();
            }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T07:33:11.573

我不确定你做错了什么，它看起来是正确的，这段代码有效：看看它与你的比较如何。

```
public partial class Form1 : Form
{
    private int count = 3;
    private Timer  timer;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Loopy(count);
    }

    void Loopy(int times)
    {
        count = times;
        timer = new Timer();
        timer.Interval = 1000;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        count--;
        if (count == 0) timer.Stop();
        else
        {
            //
        }
    } 

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T07:34:25.017

这是一个有效的[Rx](http://rx.codeplex.com)代码：

```
Observable.Interval(TimeSpan.FromSeconds(1))
.Take(3)
.Subscribe(x=>Console.WriteLine("tick")); 
```

当然，您可以在您的程序中订阅更有用的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-20T06:45:42.430

如果您使用的是 Windows.Forms.Timer，则应使用以下内容。

```
//Declare Timer
private Timer _timer= new Timer();

void Loopy(int _time)
{

    _timer.Interval = _time;
    _timer.Enabled = true;
    _timer.Tick += new EventHandler(timer_Elapsed);
    _timer.Start();
}

void timer_Elapsed(object sender, EventArgs e)
{
    //Do your stuffs here
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-09T07:09:20.737

检查您的属性中的计时器是否已启用。我的是假的，设置为真后它起作用了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-21T05:04:25.887

如果你使用一些小于定时器内部间隔的延迟，system.timer 将执行其他线程，你必须处理同时运行的双线程。应用 InvokeRequired 来控制流程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-31T09:56:00.837

您可能已经从**另一个线程**启动了计时器，因此请尝试从正确的线程调用它。 *例如，而不是：*

```
timerX.start(); 
```

*利用：*

```
Invoke((MethodInvoker)delegate { timerX.Start(); }); 
```

# ruby-on-rails - 我如何才能将范围扩大到omniauth 帐户？

> ID：13412152
> 
> 赞同：0
> 
> 时间：2012-11-16T07:23:56.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我想在两个选项中拆分范围：1\. 用于 offline_access、email、user_relationships 2\. 用于 offline_access、email、user_relationships 和 xmpp_login

如何添加两个范围并在它们之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:41:01.333

我已经解决了

```
config.omniauth :facebook, Setting.for(:facebook_id), Setting.for(:facebook_secret), scope: 'offline_access,email,user_relationships'
config.omniauth :facebook_extended, Setting.for(:facebook_id), Setting.for(:facebook_secret), scope: 'offline_access,email,user_relationships,xmpp_login', name: :facebook_extended, strategy_class: OmniAuth::Strategies::Facebook 
```

# javascript - 刷新页面时倒数计时器不会重置？

> ID：13412153
> 
> 赞同：4
> 
> 时间：2012-11-16T07:24:01.573
> 
> 标签：javascript, jquery, html, css

我需要一个计时器代码，即使您刷新页面也不会重置倒数计时器。

**我在keith wood plug in**看到了示例代码，但不知道如何在我的**html 文件中实现它。** 这是链接：

[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

我希望有人能帮助我！谢谢！:)

我只需要显示**小时、分钟和秒**。并且在给定时间之后，会有一个提示框显示*“时间到了！”*。这是我们正在开发的在线考试。太感谢了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-13T01:36:59.183

如果您知道用户将启用本地缓存并能够存储数据，您可以将 2 个值保存到`localStorage`， 1 用于`currentTime`， 1 用于`targetTime`. 然后你在一个区间比较 2，如果`currentTime > targetTime`，显示你的信息。

还绑定到`onbeforeunload`事件并将新的 currentTime 保存回`localStorage`. 这将为您提供您正在寻找的持续倒计时。

以下是如何执行此操作的示例：

```
var interval;
let minutes = 1;
let currentTime = localStorage.getItem('currentTime');
let targetTime = localStorage.getItem('targetTime');
if (targetTime == null && currentTime == null) {
  currentTime = new Date();
  targetTime = new Date(currentTime.getTime() + (minutes * 60000));
  localStorage.setItem('currentTime', currentTime);
  localStorage.setItem('targetTime', targetTime);
}
else{
  currentTime = new Date(currentTime);
  targetTime = new Date(targetTime);
}

if(!checkComplete()){
  interval = setInterval(checkComplete, 1000);
}

function checkComplete() {
  if (currentTime > targetTime) {
    clearInterval(interval);
    alert("Time is up");
  } else {
    currentTime = new Date();
    document.write(
     "\n <font color=\"white\"> Seconds Remaining:" + ((targetTime - currentTime) / 1000) + "</font>");
  }
}

document.onbeforeunload = function(){
  localStorage.setItem('currentTime', currentTime);
} 
```

请注意，我会制作一个片段，但是 stackoverflow 和其他在线 IDE 都在抱怨安全漏洞。请注意，这是完全有效的，不会违反任何安全性。将其另存为`.js`并运行。

要再次开始“倒计时”，请调用`localStorage.clear()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:24:28.320

1.  在页面的 head 部分中包含 jQuery 库。
2.  下载 jQuery Countdown CSS 和 JavaScript 并将其包含在页面的 head 部分。或者，您可以使用最小化版本 jquery.countdown.min.js（13.5K 与 31.4K，压缩时为 4.4K）。
3.  将倒计时功能连接到您的 div。

因此，您的最终代码将是：

```
<html>
<head>
    <title>jQuery Countdown</title>
    <style type="text/css">@import "jquery.countdown.css";</style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.countdown.js"></script>
    <script type="text/javascript">
        $(function () {
        var year = new Date();
        year = new Date(year.getFullYear(), 11 - 1, 20);
        $('#dvCountDown').countdown({until: year, format: 'HMS'});
            $('#year').text(austDay.getFullYear());
        });
    </script>
</head>
<body>
<h1>jQuery Countdown Basics</h1>
<p>Counting down to 20 November <span id="year">2012</span>.</p>
<div id="dvCountDown"></div>

</body>
</html> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:32:35.440

如果您想使用该脚本，那么您必须按日期计数，而不是自定义倒计时值，以免在页面刷新时重置：http: [//jsfiddle.net/qWERa/1/](http://jsfiddle.net/qWERa/1/)

```
//Custom countdown value starting on page load
$('#CountdownbyValue').countdown({until: '+0h +0m +8s', format: 'HMS',onExpiry: liftOff,});

//Countdown by Date
$('#CountdownbyDate').countdown({until: new Date(2012, 11-1, 17, 10, 10, 10), format: 'HMS',onExpiry: liftOff,});

//Time is up dialog!
function liftOff() {
    alert('Time is up!');
} 
```

完整代码：

```
<html>
<head>
<title>Demo</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script> 
<script type='text/javascript' src='http://keith-wood.name/js/jquery.countdown.js'></script>
<link rel="stylesheet" type="text/css" href="http://keith-wood.name/css/jquery.countdown.css">
<script type='text/javascript'> 
$(window).load(function(){
//Starts from time of page load
$('#CountdownbyValue').countdown({until: '+0h +0m +8s', format: 'HMS',onExpiry: liftOff,});

//Counts by Date
$('#CountdownbyDate').countdown({until: new Date(2012, 11-1, 17, 10, 10, 10), format: 'HMS',onExpiry: liftOff,});

//Time is up!
function liftOff() { 
    alert('Time is up!'); 
} 
});
</script>
</head>
<body>
<div id="CountdownbyValue"></div>
<div id="CountdownbyDate"></div>
</body>
</html> 
```

您也可以尝试：

```
window.onbeforeunload = function() {
    return "Are you sure you want to quit this exam?";
} 
```

我建议你看看这个[带有 cookie 的倒计时计时器](https://stackoverflow.com/q/3121929)

# c# - 部署后 AttachDBFileName 不起作用

> ID：13412154
> 
> 赞同：1
> 
> 时间：2012-11-16T07:24:17.260
> 
> 标签：c#, sql-server-express

我在 app.config 中定义了连接字符串

```
 <connectionStrings>
    <add name="StoreConnectionString"
    connectionString="Data Source=(local);MultipleActiveResultSets=True;AttachDBFileName=C:\Users\Firdavs\Desktop\Data\StoreServer.mdf;Integrated Security=True;User Instance=True;"
    providerName="System.Data.SqlClient" />  
  </connectionStrings> 
```

我在我的应用程序中使用 c# 和 sql express。当我在我的机器上的 Visual Studio 中运行时，它工作正常。但是在创建设置并部署到其他机器之后。我正在编辑显示 AttachDBFileName=Path 的 .exe.config 文件。应用程序给我错误。Sql Express 安装在该机器上。我想附加不起作用。你有什么建议？请告诉我方向！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:27:13.577

问题在这里：“AttachDBFileName=C:\Users\Firdavs\Desktop\Data\StoreServer.mdf;”

当您将其部署到另一台机器时，该绝对路径的变化很小，相同...您需要提供虚拟路径...

您需要将 mdf 复制到同一目录中。然后在 Visual Studio 中确保当您选择 mdf 文件时，将“复制到输出目录”的属性更改为“如果较新则复制”（通过双击已列出的“不复制”文本来更改它那里）然后将 AttachDbFilename 更改为 ... AttachDbFilename=|DataDirectory|StoreServer.mdf;....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:07:15.303

正如我之前在这个网站上所说的那样——整个*User Instance 和 AttachDbFileName=*方法是有缺陷的——充其量是！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`StoreServer`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=(local);Database=StoreServer;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

当您部署到客户的 PC 时 - 执行相同的步骤：安装 SQL Server Express，**在服务器上**`server=(local)`创建数据库，使用（或方法）连接到它`server=machinename`- 并完成它！

# image - Linux Apache：从请求中返回随机图像

> ID：13412155
> 
> 赞同：2
> 
> 时间：2012-11-16T07:24:18.607
> 
> 标签：image, apache, redirect, random

任何对我服务器上通常为 404 的 jpg gif 或 png 文件的请求都需要从我的服务器上的文件夹中返回任何随机图像。

我不知道如何开始查找如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:14:44.933

制作`.htaccess`包含内容的文件：

```
ErrorDocument 404 /not_found.php 
```

然后`not_found.php`在网络根目录（例如：）上制作文件`/var/www/`，内容为：

```
<?php
$files = array('1.jpg', '2.jpg', '3.jpg');
$randomNumber = rand (0, 2);
?>
<img src="<?php echo $files[$randomNumber]; ?>" alt="404" /> 
```

不要忘记`1.jpg, 2.jpg, ...`在同一目录中包含图像文件 ( )。

如果您将未找到的文件指向`not_found.php`上面的 php 文件，我想您会理解的。您也可以随意操作这些 php 文件。

# php - 查找值是否存在于 php 中的 JSONArray 中

> ID：13412156
> 
> 赞同：11
> 
> 时间：2012-11-16T07:24:35.107
> 
> 标签：php, json

我有一个 JSONArray 如下所示

```
{
    "output": [
        "a",
        "b",
        "c",
        "d",
        "e"
    ]
} 
```

我需要在 php.ini 中查找上述数组中是否存在“e”。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T07:27:32.637

```
$array = json_decode($json, true);
if (in_array('e', $array['output'])) {
    ...
} 
```

# node.js - 在node.js上做一些认证后如何避免请求流丢失的数据？

> ID：13412157
> 
> 赞同：4
> 
> 时间：2012-11-16T07:24:43.137
> 
> 标签：node.js, express, passport.js, restify

请求流如何与 node.js（express 或 restify）一起使用？

当客户端尝试将音频、mpeg 或其他二进制文件上传到服务器时，请求应该是服务器上的可读流。我们可以通过管道进入另一个流`request.pipe()`，例如从请求中获取文件，然后使用 knox 将文件上传到 amazon s3。

当我使用异步身份验证方法时，流数据的一部分正在丢失，并且长度不再与传输的`content-length`标头匹配。有什么办法可以避免这种行为？请求流的数据是仅存储在内存中还是 node.js 将数据存储在某个本地临时文件夹中？

```
var express = require('express'),
app = express(),
passport = require('passport'),
BasicStrategy = require('passport-http').BasicStrategy;

var users = [
    { id: 1, username: 'bob', password: 'secret', email: 'bob@example.com' }
    , { id: 2, username: 'joe', password: 'birthday', email: 'joe@example.com' }
];

function findByUsername(username, fn) {
    for (var i = 0, len = users.length; i < len; i++) {
        var user = users[i];
        if (user.username === username) {
            return fn(null, user);
        }
    }
    return fn(null, null);
}

passport.use(new BasicStrategy(
    function(username, password, done) {
        process.nextTick(function () {
            findByUsername(username, function(err, user) {
                if (err) { return done(err); }
                if (!user) { return done(null, false); }
                if (user.password != password) { return done(null, false); }
                return done(null, user);
            })
        });
    }));

app.configure(function() {
    app.use(express.logger());
    app.use(passport.initialize());
    app.use(app.router);
});    

app.post('/upload', 
    passport.authenticate('basic', { session: false }),
    function(req, res, next) {

        var dataLength = 0;

        req.on('data', function(chunk) {
            console.log('loading');
            dataLength += chunk.length;

        }).on('end', function() {
            console.log('load end');
            console.log('contentLength: %s', req.headers['content-length']);
            console.log('dataLength:  : %s', dataLength);
            res.send(200);

        }); 
    });

app.listen(8080, function() {
    console.log('server is running');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:45:24.753

让我们看看，从哪里开始：

*   是的，该请求是一个 ReadStream ，它将`data`如您所说的那样发出事件。
*   流中的第一块数据存储在内存中，没有临时文件。

您遇到的一般问题是您需要捕获从 发出的数据，`req`并在身份验证完成后重新发出它。Connect 为您提供帮助。看起来passport-http目前不使用它们。

如果您安装了[暂停](https://github.com/visionmedia/node-pause)模块，它可以为您处理这个问题。

尝试这样的事情：

```
var pause = require('pause');

// Create our own middleware constructor.
var bufferedAuthenticate = function(){
    // Set up standard authenticate handler passing arguments through.
    var authMiddleware = passport.authenticate.apply(passport, arguments);

    // Pass our own middleware instead that wraps passport-http.
    return function(req, res, next){
        // Pause the request before authenticating.
        var obj = pause(req);
        authMiddleware(req, res, function(err){
          next(err);

          // Emit any cached data events that fired while authenticating.
          obj.resume();
        });
    };
};

app.post('/upload',
    bufferedAuthenticate('basic', { session: false }),
    function(req, res, next) {
        var dataLength = 0;

        req.on('data', function(chunk) {
            console.log('loading');
            dataLength += chunk.length;

        }).on('end', function() {
            console.log('load end');
            console.log('contentLength: %s', req.headers['content-length']);
            console.log('dataLength:  : %s', dataLength);
            res.send(200);
        }); 
    }
); 
```

# mongodb - MongoDB使用Lua按_id排序

> ID：13412158
> 
> 赞同：0
> 
> 时间：2012-11-16T07:24:51.480
> 
> 标签：mongodb, lua, sql-order-by

我使用 Lua 为来自 MongoDB 的查询数据创建了一个 API。

```
for q_result in q_out:results() do
    test_query = "{'a_id': '"..q_result.a_id.."' , 'b_id':'"..bid.."'}"
    local rq = assert(db:query('DBName.table', test_query)) 
```

现在它按降序排列，我找到了一种按升序排列的方法。

我看到[了这个链接](http://code.google.com/p/luamongo/source/browse/trunk/mongo_connection.cpp#277)，但我不知道如何编写参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:55:00.100

建议的方法是[这样](http://getmoai.com/forums/how-to-sort-queries-t460/)的：

```
client.db:query( 'users' , { query={ firstName='Ezra' },
  orderby={ lastName=1, firstName=1 } } ) 
```

我不认为你的查询会起作用。您正在创建一个字符串，它需要是一个表格。大概是这样的：

```
local test_query = {query = {a_id = q_result.a_id, b_id = bid}}
test_query.orderby = {a_id=1} -- 1 sort ascending, -1 sort descending. 
```

# delphi - 用 TActionToolBar 中的拆分按钮修改“箭头”

> ID：13412160
> 
> 赞同：2
> 
> 时间：2012-11-16T07:24:59.697
> 
> 标签：delphi, c++builder

我有一个使用 TActionToolBar 和 TActionManager 的工具栏。按钮具有子按钮，单击按钮右侧的小向下箭头可以使用这些子按钮。

“向下箭头”按钮的宽度很细，需要精确的鼠标控制。我该如何定制它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:18:35.680

一个解决方案是使用 TActionToolBar 的 OnGetControlClass 事件。

之前，需要从 TThemedDropDownButton 派生一个类并重写 GetDropDownButtonWidth 函数：

```
function TThemedDropDownButtonEx.GetDropDownButtonWidth: Integer;
begin
      Result := 14; // default drop down button width
end; 
```

然后，在 OnGetControlClass 函数中：

```
void __fastcall TWorkAreaToolBarFrame::ActionToolBarLeftGetControlClass(TCustomActionBar *Sender,
 TActionClient *AnItem, TCustomActionControlClass &ControlClass)
{
    if(ControlClass == __classid(TThemedDropDownButton))
        ControlClass = __classid(TThemedDropDownButtonEx);
} 
```

简而言之，在 GetControlClass 事件中，工具栏允许您定义要使用的按钮类。我们使用更改了默认宽度的自定义类。

# xcode4.3 - 主/详细应用程序：将第二个拆分视图控制器添加到详细信息视图

> ID：13412163
> 
> 赞同：0
> 
> 时间：2012-11-16T07:25:50.573
> 
> 标签：xcode4.3, uisplitviewcontroller, master-detail

我有一个主/详细应用程序，一切都很好。
现在加载时，我们有一个名为“Master”的按钮，它将滑过原始的主视图控制器。
我想改变它的行为，所以不是弹出原来的 MasterViewController ..
我需要它来弹出另一个 SplitViewController 并选择返回到原来的那个。
任何想法如何创建这个？我不知道从哪里开始。
任何想法将不胜感激

**请检查此编辑**
编辑 1：
更准确地说...我有一个字典应用程序，它首先加载左侧主视图控制器中的所有元素...一旦我单击任何元素，它将在详细信息视图中打开控制器，因为它应该。
一旦进入详细视图控制器..如果我单击添加到收藏夹按钮...并单击按钮显示收藏夹...我需要它在 MasterViewControlle 中向我显示所有选定的收藏夹而不是所有字典元素.. 。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:09:38.907

看到你的问题，我觉得你想要像下面这样的 UISplitViewController。

![在此处输入图像描述](../Images/126fc694ab46ea502ddc0a06775de518.png)

我从未研究过它，但尝试了本教程并尝试将此功能集成到您的项目中。

Raywenderlich 教程链接[点击这里](http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial)

UISplitViewController 类参考[点击这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:16:14.840

如果要使用协议[objectiveC协议问题详细信息->主通信](https://stackoverflow.com/questions/10463394/objectivec-protocol-issue-detail-master-communication)，请检查stackoverflow中已经提出的[这个问题](https://stackoverflow.com/questions/10463394/objectivec-protocol-issue-detail-master-communication)。

您也可以使用 KVO。检查[此链接](http://2pi.dk/tech/cocoa/kvo_dispatch.html)：http: [//2pi.dk/tech/cocoa/kvo_dispatch.html](http://2pi.dk/tech/cocoa/kvo_dispatch.html)

# php - 单页上的 WordPress 图库

> ID：13412164
> 
> 赞同：0
> 
> 时间：2012-11-16T07:25:55.523
> 
> 标签：php, wordpress

我当前的 WordPress 主题有一个内置画廊。每个画廊都会显示第一个/主缩略图，单击后会在影子框中打开该特定画廊的全部内容。我现在的理想目标是找到一种方法来改变它，而不是直接显示阴影框，而是直接指向具有特定画廊内容的单个页面。

如下我当前的画廊代码：

```
 <div id="maincontentwrap">
        <div class="main-sep">
        </div><!-- .main-sep -->
        <div id="contentwrap">  
            <div id="content-gallery" role="main">
                <?php 
                $wp_query = new WP_Query();
                $wp_query->query( array( 'post_type' => 'galleries', 'posts_per_page' => of_get_option('le_gallery_items'), 'paged' => $paged, 'orderby' => 'menu_order', 'order' => 'ASC') );
                $mod = 1;
                while ( $wp_query->have_posts() ) : $wp_query->the_post(); 
                $attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => 'ASC', 'orderby' => 'menu_order') );
                if(has_post_thumbnail()) {
                    $src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full');
                    $src = $src[0];
                }
                else{
                    foreach ( $attachments as $id => $attachment ) {
                        $src = wp_get_attachment_url( $id );
                    }
                }
                 if ($mod % 3 == 0) {
                    echo ' <div class="gallery-entry-img-last">';
                 }
                 else{
                    echo ' <div class="gallery-entry-img">';
                 }
                 ?>
                <div class="gallery-entry-img-l"><a rel="next" href="<?php echo $src; ?>"><span class="rollover" ></span><img class="blog-entry-img" src="<?php echo get_bloginfo('stylesheet_directory'); ?>/library/tools/timthumb.php?src=<?php echo $src; ?>&amp;w=270&amp;h=198"  alt="<?php get_the_title(); ?>"/></a>
                    <span class="gallery-entry-img-tab"></span>
                </div>
                <span class="gallery-index-title"><?php the_title(); ?></span>
                <div class="hidden-gallery">
                    <?php 
                        $pic_count = 0;
                        foreach ( $attachments as $id => $attachment ) {
                        $pic_count++;
                        $others_src = wp_get_attachment_url( $id );
                    ?>
                        <a rel="next" href="<?php echo $others_src; ?>" title="<?php the_title(); ?>"></a>
                    <?php
                    }
                    ?>
                </div><!-- .hidden-gallery-->
            </div>
            <?php
            $mod++;
            endwhile;
            ?>
            <div style="clear:both;"></div>
            </div>  
        </div><!-- #contentwrap-->
    </div><!-- #maincontentwrap--> 
```

有人知道我如何实现这一目标吗？一些专家的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:19:14.673

使用`wp_get_attachment_link( $id, $size, $permalink, $icon, $text );`（参见[http://codex.wordpress.org/Function_Reference/wp_get_attachment_link](http://codex.wordpress.org/Function_Reference/wp_get_attachment_link)）。这将输出到附件页面的链接。所以你只需要使用这个函数来调整你的代码。对 $permalink 参数使用 value = 0，这样您的链接会将您带到附件页面（value = 1 会将您带到文件本身）。但请注意，“shadowbox”可能是由 JavaScript 中的事件绑定（单击锚点）触发的，因此您可能必须针对链接调整 HTML 代码。如果 shadowbox 脚本中的选择器使用类名或 ID 来检测点击，您可能需要更改链接容器的 ID 或类名，以确保不会显示您的目标页面暗箱内。您也可以（并且实际上应该）使用`wp_deregister_script()`取消注册显示阴影框的脚本，考虑到您在此页面中不需要它。

# android - 花费大量时间从 url 下载和显示图像到 Gridview

> ID：13412165
> 
> 赞同：1
> 
> 时间：2012-11-16T07:26:07.520
> 
> 标签：android, gridview, imageview

我有 20 个不同图像的 URL。我需要从 URL 下载 20 张图像并将其显示在网格视图中。对我来说，下载图像内容需要很多时间。以下是我在 Image Adapter 类中使用的代码。

```
 public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(220, 200));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(1, 1, 1,0);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageDrawable(GetDrawableImage(url));
    return imageView;
}
private Drawable GetDrawableImage(String zurlP)
{   InputStream InputStreamL = null;
    Drawable DrawableImageL = null;  
try {
        InputStreamL = (InputStream) new URL(zurlP).getContent();
        DrawableImageL = Drawable.createFromStream(InputStreamL, "src");
    } catch (MalformedURLException e) {          
    } catch (IOException e) {           
    }  
    return DrawableImageL;
} 
```

有没有最简单的方法（更少的时间消耗）来执行相同的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:34:14.113

是的..，您可以使用 Asynctask 或 Painless 线程从服务器加载大图像。下载后缓存图像。您可以为此使用 [Fedor lazylist] (https://github.com/thest1/LazyList)

**各种可能性。**

[多线程](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

[缓存](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

[无痛穿线](http://android-developers.blogspot.in/2009/05/painless-threading.html)

[大型位图加载](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

**或者**你可以简单地用拇指指甲。表示从服务器获取缩略图而不是位图。加载将生效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:36:43.750

您需要在其他线程中下载图像。您可以使用[图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader,%20http://androidimageloader.com/)。

# mysql - 带有声明语句的事件调度程序

> ID：13412168
> 
> 赞同：0
> 
> 时间：2012-11-16T07:26:27.183
> 
> 标签：mysql

是否可以创建一个带有声明语句的事件调度程序？

我一直在尝试运行此查询但没有任何成功

```
create event dele on schedule
every 1 day 
do
begin
declare c int; 
select count(*) into c from purchased;
if(c > 5) 
delete from purchased limit 2
end if;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:36:55.067

这是因为您`THEN`在`IF`. [在此处](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)查看手册

尝试这个：

```
delimiter |

CREATE EVENT dele
    ON SCHEDULE EVERY 1 DAY
    DO
    BEGIN
        DECLARE c INT;

        SELECT COUNT(*) INTO c
        FROM purchased;

        IF(c > 5)
        THEN
            DELETE FROM purchased LIMIT 2;
        END IF;
END |

delimiter ; 
```

# symfony - Symfony2 Forms：验证相关实体属性

> ID：13412173
> 
> 赞同：2
> 
> 时间：2012-11-16T07:26:51.460
> 
> 标签：symfony

我有与实体`Message`的 ManyToOne 关系的实体`User`：

```
class Message
{
    ...
    /**
     * @var User $sender
     *
     * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User")
     * @ORM\JoinColumn(name="sender_id", referencedColumnName="id")
     *
     **/
    private $sender;
    ...
    } 
```

如果`$sender`没有`email`值，我需要为我的表单创建新字段，所以我`Message`在 Contoller 中为实体创建表单：

```
 $user = $this->getUser();

    $message = new Message();
    $message->setSender($user);

    $formBuilder = $this->createFormBuilder($message, array(
        'cascade_validation' => true
    ));

    $formBuilder->add('body', 'textarea');

    if (!$user->getEmail()) {
        $formBuilder->add('email', 'email', array(
            'property_path' => 'sender.email'
        ));
    } 
```

我在`validation.yml`实体中有一些验证规则`User`。我可以通过我对`User`另一个实体表单中的实体的验证规则自动验证此字段吗？我不知道该怎么做。

我现在找到了解决方法：创建新的`MissingEmailType`：

```
class MissingEmailType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('email')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\UserBundle\Entity\User',
            'validation_groups' => array(
                'MissingEmail'
            ),
        ));
    }

    public function getName()
    {
        return 'missing_email';
    }
} 
```

但是看起来很复杂。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T16:37:43.460

您可以将页面重定向到用户个人资料页面，而不是加载消息表单并声明用户需要在添加消息之前添加电子邮件。如果您快速重定向或创建弹出窗口，则用户可能不会被关闭，只要他们在添加电子邮件后可以返回原始页面即可。然后验证很简单，因为您只需要验证用户实体。

# java - 如何将 UTF8 字符串转换为 UTF16

> ID：13412174
> 
> 赞同：5
> 
> 时间：2012-11-16T07:26:53.130
> 
> 标签：java, utf-8, utf-16

我通过处理客户端应用程序发送的请求来获取 UTF8 字符串。但该字符串实际上是 UTF16。我该怎么做才能将它放入我的本地字符串中是一个字母后跟`\0`字符？我需要将该字符串转换为 UTF16。

接收到的字符串示例： `S\0a\0m\0p\0l\0e`(UTF8)。
我想要的是：`Sample`（UTF16）

```
FileItem item = (FileItem) iter.next();
String field = "";
String value = "";
if (item.isFormField()) {
  try{
    value=item.getString();
    System.out.println("====" + value);
  } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T07:30:08.260

来自服务器的字节*不是*UTF-8，如果它们看起来像`S\0a\0m\0p\0l\0e`. 它们是 UTF-16。您可以使用以下方法将 UTF16 字节转换为 Java `String`：

```
byte[] bytes = ...
String string = new String(bytes, "UTF-16"); 
```

或者，如果您知道来自服务器的字节流的字节序，则可以使用`UTF-16LE`或作为字符集名称。`UTF-16BE`

如果您已经（错误地）`String`从字节构造 a 就好像它是 UTF-8 一样，您可以使用以下命令转换为 UTF-16：

```
string = new String(string.getBytes("UTF-8"), "UTF-16"); 
```

但是，正如 JB Nizet 指出的那样，如果字节不是有效的 UTF-8 开头，则此往返（字节 -> UTF-8 字符串 -> 字节）可能会丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T14:49:34.543

# 我提出以下解决方案：

> NSString *line_utf16[ENOUGH_MEMORY_SIZE];
> 
> line_utf16= [NSString stringWithFormat: @"%s", line_utf8];
> 
> ENOUGH_MEMORY_SIZE 至少超过 line_utf8 使用的内存两倍

我想 **line_utf16** 的内存必须动态或静态分配至少是 **line_utf8**大小的两倍。

*如果您遇到类似的问题，请添加几句话！*

# java - 保存整数值的位图

> ID：13412180
> 
> 赞同：2
> 
> 时间：2012-11-16T07:27:17.507
> 
> 标签：java, android, bitmap

我有 4 个位图，我想为每个位图唯一地存储值。这些值将来自外部源，我想将这些值专门映射到每个位图。所以 bitmap1 应该与 1 相关联，bitmap2 与 2 等相关联。因此，如果我应该单击这些位图中的任何一个，则会弹出一个 toast 消息，其中包含与该位图相关联的数字。目前我将位图存储在一个数组中，然后将其拉出并显示在表面视图上。我想知道最好的方法，或者是否有办法将位图唯一地关联到整数值，即使在删除 2 或 3 个位图之后，剩余的位图仍然保持整数值。有关此过程的任何提示或建议？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:33:37.990

将位图保存在`HashMap<Integer,Bitmap>`

通过这种方式，您可以唯一地识别您的位图并维护层次结构和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:44:13.277

1.  您可以尝试 HashMap < Bitmap, Integer > 进行映射。是的，位图作为键。我自己没有尝试过运行它，但是 Java 并没有抱怨这样的声明 => 正式，Bitmap 有资格作为一个键。

2.  如果#1 有效，你就完成了。请记住从 HashMap 中删除您的位图。否则，为 Bitmap 创建一个包装类，该类具有用作 HashMap 键所需的功能，并在您的集合中使用该类。

编辑：更新格式，以便 SO 正确显示。

# django - 扩展 django 用户

> ID：13412182
> 
> 赞同：1
> 
> 时间：2012-11-16T07:27:27.397
> 
> 标签：django, django-models, django-users

这是我关于stackoverflow的第一个问题。我是一名初学者程序员，并且在编程逻辑方面存在问题。

我的问题是我有一个模型（恰好是一个表单），它从用户那里收集重要信息，我希望能够将此模型与单个用户相关联，因为它具有我需要的关于他们的信息。

任何形式的帮助表示赞赏......顺便说一句，我正在使用 Django Web 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:33:11.840

在 1.5 之前：[https](https://docs.djangoproject.com/en/dev/topics/auth/#auth-profiles) : //docs.djangoproject.com/en/dev/topics/auth/#auth-profiles 添加一个模型，将 OneToOne 链接到 Django 提供的 User 模型，并在 settings.py 中使用全局 AUTH_PROFILE_MODULE

1.5 之后：[https](https://docs.djangoproject.com/en/dev/topics/auth/#auth-custom-user) ://docs.djangoproject.com/en/dev/topics/auth/#auth-custom-user ，不推荐使用之前的方法。现在您必须完全自定义 Django 提供的 User 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:32:46.547

如果您是新用户，我建议您使用以下链接：

[在 DJANGO 中扩展用户模型](http://blog.tivix.com/2012/01/06/extending-user-model-in-django/)

[存储有关用户的附加信息](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

通常，您使用 Django User 模型的外键创建一个普通模型。然后添加您想要为用户存储的任何其他字段，例如出生日期、网站、喜欢的颜色等。

# c++ - 从数组中的文件中放入数字

> ID：13412192
> 
> 赞同：0
> 
> 时间：2012-11-16T07:28:51.593
> 
> 标签：c++, arrays

我有数字文件。

```
3
2 15 41
4 1 2 3 4
3 22 11 24 
```

第一行显示其他行是如何存在的（最多 100 行）。一行中的数字不能超过 50。

行中的数字需要放入数组中，例如：

```
line[lineNum][num] 
```

我是 C++ 新手，我要求以最简单的方式做到这一点。我试着做：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, char *argv[])
{
    int kiek;
    string str[100][50];
    string line;
    int a = 0;
    int b = 0;

    ifstream failas("Duom1.txt");

    if (failas.is_open())
    {                     
        while (failas)
        {
            if (a == 29)
            {
                  a = 0;
                  b++;
            }

            getline(failas, str[a][b], ' ');

        }

        a++;
    }

    cout << str[0][0] << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:35:18.080

逐行读取文件，然后自行解析每一行。

```
if (failas.is_open())
{
    // read first line
    string num_lines;
    std::getline(failas, num_lines);
    // read lines
    for (int i = 0; std::getline(failas, line); ++i)
    {
        // parse line and insert into array
        std::istringstream is(line);
        string number;
        for (int j = 0; is >> number; ++j)
            str[i][j] = number;
    }
} 
```

不过，更好的方法是使用`std::vector`而不是数组：

```
std::vector<std::vector<int> > all_nums;
...
// read first line
string num_lines;
std::getline(failas, num_lines);
// read lines
while (std::getline(failas, line)) {
    // parse line and insert into vector
    std::istringstream is(line);
    int number;
    std::vector<int> line_nums;
    while (is >> number)
        line_nums.push_back(number);

    // add line to vector
    all_nums.push_back(line_nums);
} 
```

# reflection - 可以在 Windows 应用商店应用程序（Metro）中生成 UI 运行时吗？

> ID：13412197
> 
> 赞同：0
> 
> 时间：2012-11-16T07:29:12.323
> 
> 标签：reflection, microsoft-metro, windows-store-apps

我们目前正在研究是否可以动态生成/更改 Metro 应用程序的 UI。到目前为止，我只看到反射选项有些有限。但也许如果我们使用 HTML/JS，我们可以即时修改 HTML？有人尝试过这样的事情吗？

稍后会启动 VS 并试一试，只是想我会在这里问一下，看看我们是否可以就这个话题进行讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:49:56.987

大多数基于 Javascript 的应用程序会即时修改其 HTML，因为这是由 Navigator 模板推广的模式。因此，例如，即使只是单击链接并导航到另一个页面，也会替换“页面”容器元素的内容，而不是重新加载整个页面，从而重新加载所有 .js 和 .css 文件。

当您滚动其内容时，WinJS.UI.ListView 还将在您的 DOM 中动态创建和重新定位元素。

基本上，您可以在 web 应用程序中做任何事情，并重用 AJAX 中已知的模式来使您的 UI 动态适应。

根据您想要实现的目标，您应该随着复杂性的增加而记住，您的应用程序应该能够在任何时候从头开始暂停和恢复其状态。

# javascript - 如果单选按钮值发生变化，则提交导致不同页面 (2) 否则导致另一个页面 (1)

> ID：13412199
> 
> 赞同：-1
> 
> 时间：2012-11-16T07:29:24.753
> 
> 标签：javascript, submit, radio

性别：

男 女

如果值为男性，则提交按钮将链接到页面 0003

如果值为女性，则提交按钮将链接到页面 0002 在这里我卡住了，通过哪个编码可以在基于单选按钮值更改的提交按钮中进行到不同页面链接的编码。

请提供一个可以帮助我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:42:46.810

尝试这个

```
<input type="radio" name="male" id="male" />Check One <br />
<input type="radio" name="female" id="female" />Check Two 
<input type="button" name="submit" value="submit" onclick="chekcSubmitType()"  />

<script>
function chekcSubmitType()
{
    if(document.getElementById('male').checked)
    {
        window.location="first page name"; 
    }
    else if(document.getElementById('female').checked)
    {
         window.location="second page name";
    }

}
</script> 
```

# ruby-on-rails - 如何执行多项修改并保存 has_many 关系

> ID：13412200
> 
> 赞同：-1
> 
> 时间：2012-11-16T07:29:26.423
> 
> 标签：ruby-on-rails

```
class Company < ActiveRecord::Base
  has_many :users
end 
```

用户点击 Company->Users href 链接并假设它显示某个公司的 3 个用户。

我想`user.age`为所有用户设置（一个整数）并按保存。如何在我的控制器/视图代码中执行此操作？

我们通常对每个用户都有一个编辑链接来修改其详细信息，但我想为所有用户设置年龄信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:39:21.960

使用[form_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/form_tag)提交到专为编辑多个用户（不是您的用户脚手架方法之一）设置的任意控制器操作。然后，在您创建的表单内为每个用户添加一个[fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)标记，每个标记都有一个用于年龄属性的字段。提交后，您可以简单地遍历控制器中的用户参数来操纵您的用户。

# html - 使用 css resize:both 调整表格单元格的大小；不使用表格

> ID：13412203
> 
> 赞同：10
> 
> 时间：2012-11-16T07:29:39.643
> 
> 标签：html, css

使用 css {resize:both;} 调整表格单元格的大小不适用于表格

我需要调整表格及其单元格的大小，可以使用 css 调整大小，css {resize:both;} 在 div 中工作，但不在表格标签中

```
<table border="1" style="resize:both;">
<tr>
<td>hi table</td>
<td>hi div</td>
</tr>
<tr>
<td>hi table</td>
<td>hi div</td>
</tr>
<tr>
<td>hi table</td>
<td>hi div</td>
</tr>
</table> 
```

任何身体都可以帮忙吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:41:07.137

要涵盖 Chrome 和 Safari，请使用

```
th, td { resize: both; overflow: auto; } 
```

不要在整个桌子上设置初始宽度。不过，您可以设置单元格或列的宽度。

为了涵盖 Firefox，恐怕您需要`div`用一个类将每个单元格的内容包装起来，并将相应的类选择器添加到上面的规则中。这将在每个单元格中的 Chrome 和 Safari 上引入两个调整大小的句柄......所以也许你应该使用

```
<td><div class=cell>...</div></td> 
```

对于每个单元格和 CSS 规则

```
.cell { resize: both; overflow: auto; width: 100%; height: 100%; } 
```

（不使`td`元素可调整大小）。

这样，所有单元格都可以调整大小，因此整个表格可以间接调整大小（只要您不设置其宽度和高度）。

原则上，`resize`适用于所有具有`overflow`除 之外的属性的元素`visible`。在实践中，它的工作方式更加有限，并且在不同的浏览器中也有所不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T07:45:56.110

看来 resize: 不适用于表格。

```
table {
    border:2px solid;
    padding:10px 40px; 
    width:300px;
    resize:both;
    overflow:auto;
}​ 
```

[http://jsfiddle.net/Kyle_/q4qwp/](http://jsfiddle.net/Kyle_/q4qwp/)

但是您可以将表格包装在 div 中并将 resize: 设置为 div，但即使使用 % 宽度值也无法缩小表格。

[http://jsfiddle.net/q4qwp/3/](http://jsfiddle.net/q4qwp/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-23T11:13:30.237

要调整表格和表格列的大小，您必须使用 Javascript。有几个 jQuery 插件可以这样做，例如`colResizable`，它允许您手动拖动列锚。

这是一小段代码：

```
$("#tabe").colResizable({}); 
```

您可以在以下位置找到更多示例：[http](http://www.bacubacu.com/colresizable/) ://www.bacubacu.com/colresizable/ 或者您可以试试这个小提琴：http: [//jsfiddle.net/euka4rm3/](http://jsfiddle.net/euka4rm3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T07:35:08.617

您可以使用外部 div 的样式来更改表格的位置。例如

```
<div style="resize:both">
    <table id="sample table"></table>
</div> 
```

# javascript - 输入类型编号的本地化

> ID：13412204
> 
> 赞同：53
> 
> 时间：2012-11-16T07:29:41.657
> 
> 标签：javascript, html, localization

我在 Chrome 中运行的 Web 应用程序上工作，我在其中输入 type `number`。在我的语言环境中，逗号用于十进制数字，空格用于千位分隔（不是那么重要），但是当我将这些字符输入数字字段时，它们会被简单地删除，从而有效地将金额增加了一百。

我已经在浏览器设置和页面上设置了语言，但我仍然需要使用句点来表示小数。有什么方法可以配置该字段以接受逗号？

或者，我将不得不使用 javascript 来解决这个问题。我想我可以处理 keydown 事件并在用户键入时将逗号更改为句点，但这不会提供很好的用户体验，不是吗？那么我怎样才能在我的代码中以最小的占用空间来实现这一点呢？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-16T12:09:02.353

由于定义和实现， HTML5`input type=number`从本地化的角度来看是不充分的。它旨在本地化，但根据*浏览器*的语言环境，您无法设置，甚至无法作为设计者/作者知道。

在我的 Chrome 上，`input type=number step=0.001`接受 1,2（带逗号）并将其作为 1.2 发送，它接受 1.200（带句点），明显将其转换为 1200 并按原样发送。当浏览器区域设置为芬兰语时，或多或少就是这样。但它无法接受 1 200（这是芬兰语中 1200 的标准书写方式），而是仅发送数字 1。

所以还是比较没希望的。使用您能找到的任何 JavaScript 小部件，或简单的文本输入框。`input type=number`除非所有用户都使用具有相同语言环境的浏览器并且对数字格式有相同的期望，否则任何事情都可能更好。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-10-06T14:21:14.483

如果您不需要向上/向下刻度，则遵循解决方法可以提供帮助：

仅用于逗号 (,)（如德语语法）：

```
<input type="text" pattern="[0-9]+([,][0-9]{1,2})?" name="amount"> 
```

仅点 (.)：

```
<input type="text" pattern="[0-9]+([\.][0-9]{1,2})?" name="amount"> 
```

两者但不在一起：（没有 1000 分隔符）

```
<input type="text" pattern="[0-9]+([\.|,][0-9]{1,2})?" name="amount"> 
```

德语/德语的其他编号：

```
<input name="myinput" value="0" step="0.01" lang="de-DE" type="number"> 
```

并使用以下样式对其进行样式设置：

```
input[type=number] {
    -moz-appearance:textfield;
    -webkit-appearance: none;
    appearance: textfield;
} 
```

lang“全局”属性也可以改变所有没有自己的 lang 属性的输入元素的行为（谢谢@florian）：

```
<html lang="en"> 
```

看：

*   [https://html.spec.whatwg.org/multipage/dom.html#language](https://html.spec.whatwg.org/multipage/dom.html#language)
*   [https://html.spec.whatwg.org/multipage/dom.html#attr-lang](https://html.spec.whatwg.org/multipage/dom.html#attr-lang)

有效语言值列表： [https ://github.com/libyal/libfwnt/wiki/Language-Code-identifiers](https://github.com/libyal/libfwnt/wiki/Language-Code-identifiers)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-24T20:16:53.680

规范很明确：只允许使用句点作为小数分隔符。由浏览器来为表单提供[本地化支持](https://www.ctrl.blog/entry/html5-input-number-localization.html)。不允许使用千位分隔符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T07:44:26.593

不幸的是，这些字符不允许出现在`<input type="number">`

请参阅此处的规格： [http ://w3c.github.io/html-reference/datatypes.html#common.data.float-def](http://w3c.github.io/html-reference/datatypes.html#common.data.float-def)

这是你想要的格式吗？[http://jsfiddle.net/S8rqY/](http://jsfiddle.net/S8rqY/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-26T14:15:47.237

虽然 Chrome 使用浏览器设置，但 Firefox 不使用。至少并非总是如此——例如，当`<html>`标签中有 lang 属性时，Firefox 会使用它。

但是，您也可以将 lang 属性`<input>`直接传递给标签。将其与 Navigator API 结合可以模拟 Chrome 行为。

React 中的最小示例：

```
<input
  type="number"
  lang={navigator.language}
/> 
```

# c++ - 扫描字符串中每个字符的 ASCII 值

> ID：13412206
> 
> 赞同：2
> 
> 时间：2012-11-16T07:29:49.733
> 
> 标签：c++, c, string, ascii

无论如何，如果我输入任何字符串，那么我想扫描该字符串中每个字符的 ASCII 值，如果我输入“john”，那么我应该得到 4 个变量来获取每个字符的 ASCII 值，用 C 或 C++

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T07:35:12.703

给定 C 中的字符串：

```
char s[] = "john"; 
```

或在 C++ 中：

```
std::string s = "john"; 
```

`s[0]`给出第一个字符的数值，`s[1]`第二个以此类推.

如果您的计算机使用字符的 ASCII 表示（它确实如此，除非它非常不寻常），那么这些值就是 ASCII 代码。您可以用数字显示这些值：

```
printf("%d", s[0]);                     // in C
std::cout << static_cast<int>(s[0]);    // in C++ 
```

作为整数类型 ( `char`)，您还可以将这些值分配给变量并对它们执行算术运算，如果这是您想要的。

我不太清楚你所说的“扫描”是什么意思。如果您要问如何遍历字符串以依次处理每个字符，那么在 C 中它是：

```
for (char const * p = s; *p; ++p) {
    // Do something with the character value *p
} 
```

在（现代）C++ 中：

```
for (char c : s) {
    // Do something with the character value c
} 
```

如果你问如何从终端读取字符串作为输入行，那么在 C 中它是

```
char s[SOME_SIZE_YOU_HOPE_IS_LARGE_ENOUGH];
fgets(s, sizeof s, stdin); 
```

在 C++ 中是

```
std::string s;
std::cin >> s;  // if you want a single word
std::getline(std::cin, s); // if you want a whole line 
```

如果您通过“扫描”表示其他意思，请澄清。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T07:45:22.347

您可以通过将其转换为 int 类型来简单地获取 char 的 ascii 值：

```
char c = 'b';
int i = c; //i contains ascii value of char 'b' 
```

因此，在您的示例中，获取字符串的 ascii 值的代码如下所示：

```
#include <iostream>
#include <string>

using std::string;
using std::cout;
using std::endl;

int main()
{
    string text = "John";

    for (int i = 0; i < text.size(); i++)
    {
        cout << (int)text[i] << endl; //prints corresponding ascii values (one per line)
    }
} 
```

要从表示 ascii 表中条目的整数中获取相应的 char，您只需再次将 int 转换回 char：

```
char c = (char)74 // c contains 'J' 
```

上面给出的代码是用 C++ 编写的，但它在 C 中的工作方式基本相同（我猜还有许多其他语言）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T07:38:21.593

没有办法将长度为 'x' 的字符串转换为 x 变量。在 C 或 C++ 中，您只能声明固定数量的变量。但可能你不需要做你所说的。也许您只需要一个数组，或者很可能您只需要一种更好的方法来解决您要解决的任何问题。如果您首先解释问题所在，那么我确信可以解释一个更好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-03T07:51:56.370

是的，我认为还有一些更好的解决方案可用，但这一个也有帮助。 **在 C 中**

```
#include <stdio.h>
#include <string.h>
#include <malloc.h>
int main(){
  char s[]="abc";
  int cnt=0;
  while(1){
    if(s[cnt++]==NULL)break;
  }
  int *a=(int *)malloc(sizeof(int)*cnt);
  for(int i=0;i<cnt;i++)a[i]=s[i];
  for(int i=0;i<cnt-1;i++)printf("%d\n",a[i]);  
  return 0;
} 
```

**在 C++ 中**

```
#include <iostream>
#include <string>
using namespace std;
int main(){
    string s="abc";
    //int *a=new int[s.length()];
    //for(int i=0;i<s.length();i++)a[i]=s[i];
    for(int i=0;i<s.length();i++)
    cout<<(int)s[i]<<endl;
    return 0;
} 
```

我希望这个会有所帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T07:33:36.380

是的，这很容易..只是一个演示

```
int main()
{
 char *s="hello";
 while(*s!='\0')
  {
  printf("%c --> %d\n",*s,*s);
  s++;
  }
 return 0;
} 
```

但请确保您的机器支持 ASCII 值格式。在 C 中，每个字符都有一个与之相关的整数值，称为 ASCII。使用`%d`格式说明符，您可以直接打印上述任何字符的 ASCII。

注意：最好自己买好书并练习这种程序。

# android - 检测条形图中条形上的触摸事件

> ID：13412207
> 
> 赞同：2
> 
> 时间：2012-11-16T07:29:58.247
> 
> 标签：android, achartengine

我正在使用 AcharEngine 来显示图形，我的问题是我可以检测图形特定条上的触摸事件吗？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:52:49.407

简短的回答：是的，你可以。

请看一下[这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)例子，从第 170 行开始。该示例向您展示了如何在折线图上处理这些事件，但对于条形图也是如此。

# javascript - 将 Travis-CI 用于客户端 JavaScript 库？

> ID：13412211
> 
> 赞同：43
> 
> 时间：2012-11-16T07:30:10.943
> 
> 标签：javascript, continuous-integration, travis-ci

我不确定是否将 Travis-CI 用于我的客户端 JavaScript 库，因为它在 Travis-CI 服务器上与 NodeJs 一起编译。

我想知道这是对客户端库使用某种**持续集成**（例如 Travis-CI）的好方法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-20T12:05:02.710

是的，当然您应该使用与客户端库的持续集成。

我个人使用[已经安装在 Travis-CI 中的](http://about.travis-ci.org/docs/user/gui-and-headless-browsers/)PhantomJS [（无头 webkit 浏览器）](http://phantomjs.org/)。我认为这对于客户端的东西来说是比 NodeJs 更好的选择。

如果你使用[Grunt](http://gruntjs.com/)，它会更容易使用，你只需要一个简单的 Gruntfile.js 文件、在浏览器中运行的测试（我使用[QUnit](http://qunitjs.com/)）和一个简单的 .travis.yml

`Gruntfile.js`：

```
module.exports = function(grunt) {
    // Project configuration.
    grunt.initConfig({
        qunit: {
            files: ['test/index.html']
        }
    });

    // Load plugin
    grunt.loadNpmTasks('grunt-contrib-qunit');

    // Task to run tests
    grunt.registerTask('test', 'qunit');
}; 
```

`.travis.yml`：

```
before_script:
  - sudo npm install -g grunt

script: grunt test --verbose --force 
```

您可以在我的一个项目中[看到它的实际效果（](https://travis-ci.org/kort/kort/) [GitHub 上的源代码](https://github.com/kort/kort)）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-03-05T16:28:05.003

我从 Odi 的回答开始，然后转到 gulp 让它工作。如果您在 travis 文件中指定 node_js 作为您的语言，travis 将自动运行

```
npm install 
```

其次是

```
npm test 
```

第一个将安装 package.json 文件中指定的任何 devDependencies，第二个将从 package.json 运行名为“test”的脚本。下面你会发现我需要在我的 repo 顶层拥有的三个文件，以便 travis 运行单个 qunit 套件。

.travis.yml

```
language: node_js
node_js:
  - "0.10" 
```

gulpfile.js

```
var gulp = require('gulp'),
    qunit = require('gulp-qunit');

gulp.task('default', function() {
    return gulp.src('./tests/unit/unittests_nupic-js.html')
        .pipe(qunit());
}); 
```

包.json

```
{
  "name": "nupic-js",
  "version": "0.0.1",
  "description": "JavaScript port of NuPIC",
  "license": "GPL-3.0",
  "repository": "iandanforth/nupic-js",
  "bugs": { "url" : "http://github.com/iandanforth/nupic-js/issues"
  },
  "author": {
    "name": "Ian Danforth",
    "email": "iandanforth@gmail.com"
  },
  "engines": {
    "node": ">=0.10.0"
  },
  "scripts": {
    "test": "gulp"
  },
  "keywords": [
    "numenta",
    "nupic",
    "machine learning"
  ],
  "devDependencies": {
    "gulp-qunit": "~0.2.1",
    "gulp-util": "~2.2.14",
    "gulp": "~3.5.1"
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-25T16:25:48.617

Odi 的答案已更新并使用 npm 解决依赖关系：

**.travis.yml**

```
language: node_js
node_js:
  - "6" 
```

* * *

**.Gruntfile.js**

```
module.exports = function(grunt) {
  // Project configuration.
  grunt.initConfig({
    qunit: {
      files: ['./test/qunit.html']
    }
  });

  // Load plugin
  grunt.loadNpmTasks('grunt-contrib-qunit');

  // Task to run tests
  grunt.registerTask('test', 'qunit');
}; 
```

* * *

**Package.json**（相关部分）

```
 "devDependencies": {
    "grunt": "^1.0.1",
    "grunt-contrib-qunit": "^1.3.0"
  },
  "scripts": {
    "test": "grunt test"
  } 
```

* * *

`npm install`您可以通过运行然后在本地尝试配置`npm test`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T03:10:43.003

我找到了这个例子。很全面！

[https://github.com/jonkemp/gulp-qunit](https://github.com/jonkemp/gulp-qunit)

跑：

```
npm install
gulp test 
```

它还具有`lint`查看文件、覆盖报告等的任务。

# java - 循环动态数据

> ID：13412213
> 
> 赞同：1
> 
> 时间：2012-11-16T07:30:23.903
> 
> 标签：java, android, class, loops

我有这个代码：

```
entryData = new Entry[] { 
        new Entry( path1, name1, tag1 ),
        new Entry( path2, name2, tag2 ),
        new Entry( path3, name3, tag3 ),
        new Entry( path4, name4, tag4 )
}; 
```

上面的数据为我的列表视图提供了 4 个项目（行）。这很好用。

但是，如果我循环，例如：

```
for(x=0; x<4; x++){
    entryData = new Entry[] { new Entry( pathx, namex, tagx ) };
} 
```

我的列表视图仅显示一项（行）...

我的课程代码是：

```
public class Entry {
    public String icon;
    public String title;
    public String tag;

    public Entry() {
        super();
    }

    public Entry(String icon, String title, String tag) {
        super();
        this.icon = icon;
        this.title = title;
        this.tag = tag;
    }
} 
```

有任何想法吗？我又来学习了！蒂亚！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:33:25.247

你错过了 [x]，你应该在循环之前初始化数组。它应该看起来像这样：

```
entry_data = new Entry[4];
for(x=0; x<4; x++){
    entry_data[x] = new Entry( pathx, namex, tagx );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:33:26.113

数组必须在循环之前定义。每次迭代应该只向数组添加一个元素：

```
entryData = new Entry[4];
for (int i = 0; i < 4; i++){
    entryData[i] = new Entry(pathx, namex, tagx);
} 
```

如果您事先不知道数组的大小，那么请改用 List，它会动态增长：

```
List<Entry> entryData = new ArrayList<Entry>();
// ...
for (int i = 0; i < someDynamicValue; i++) {
    entryData.add(new Entry(pathx, namex, tagx));
} 
```

另外，请尊重 Java 命名约定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:34:14.070

您可以使用`List`而不是`Array`动态案例。`ArrayList`是它的可调整大小的数组实现。你

```
List<Entry> entry_data  = new ArrayList<Entry>();
for(x=0; x<4; x++){
    entry_data.add(new Entry( pathx, namex, tagx ));
} 
```

在[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)中-

> 每个 ArrayList 实例都有一个容量。容量是用于存储列表中元素的数组的大小。它总是至少与列表大小一样大。随着元素被添加到 ArrayList，它的容量会自动增长。除了添加一个元素具有恒定的摊销时间成本这一事实之外，没有指定增长策略的细节。

# gwt - GWT 测试用例执行中的初始化错误

> ID：13412214
> 
> 赞同：0
> 
> 时间：2012-11-16T07:30:25.547
> 
> 标签：gwt, junit, gwt-maven-plugin, gwttestcase

我使用 Maven 在 GWT 中创建了一个带有默认模块的项目。并用 *Test.java 重命名测试用例类并执行命令**mvn package**

它没有成功执行测试用例，并 **以错误的测试终止：initializationError(com.gwt.example.project.testing.client.GwtTesttestingTest): com/google/gwt/dev/cfg/Condition。**

如果我添加，`<mode>htmlunit</mode>`并且`<htmlunit>IE7</htmlunit>`到 pom 然后`gwt:test`目标工作正常

如果我尝试通过右键单击在eclipse中执行测试用例并作为GWT Junit Test运行，它会继续执行而不会停止，

这是在 Eclipse 中执行测试用例时的输出。

```
Validating newly compiled units
   Ignored 12 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
Starting http://10.1.1.2:57354/com.gwt.example.project.testing.testingJUnit.JUnit/junit-standards.html?gwt.codesvr=10.1.1.2:57348 on browser FF3
200 - GET /com.gwt.example.project.testing.testingJUnit.JUnit/junit-standards.html?gwt.codesvr=10.1.1.2:57348 (10.1.1.2) 2449 bytes
logging for HtmlUnit thread
   [WARN] Expected content type of 'application/javascript' or 'application/ecmascript' for remotely loaded JavaScript element at 'http://10.1.1.2:57354/com.gwt.example.project.testing.testingJUnit.JUnit/com.gwt.example.project.testing.testingJUnit.JUnit.nocache.js', but got 'application/x-javascript'.
200 - GET /com.gwt.example.project.testing.testingJUnit.JUnit/com.gwt.example.project.testing.testingJUnit.JUnit.nocache.js (10.1.1.2) 6344 bytes
200 - GET /com.gwt.example.project.testing.testingJUnit.JUnit/hosted.html?com_gwt_example_project_testing_testingJUnit_JUnit (10.1.1.2) 11757 bytes
200 - GET /com.gwt.example.project.testing.testingJUnit.JUnit/gwt/standard/standard.css (10.1.1.2) 26953 bytes
Validating newly compiled units
   Ignored 12 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
Module com.gwt.example.project.testing.testingJUnit.JUnit has been loaded
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes
All clients connected (Limiting future permutations to: gecko1_8)
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes
[WARN] Too many clients: expected 1, found 2
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes
[WARN] Too many clients: expected 1, found 3
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes
[WARN] Too many clients: expected 1, found 4
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes
[WARN] Too many clients: expected 1, found 5
200 - POST /com.gwt.example.project.testing.testingJUnit.JUnit/junithost (10.1.1.2) 434 bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:54:20.417

您可能会在这里查看一个轻量级项目：[https ://github.com/fastnsilver/gwt-datehandling-example](https://github.com/fastnsilver/gwt-datehandling-example)

`GWTTestCase`通过一个套件运行一个单一的。

定义了一些配置文件，因此请查看自述文件。Maven pom.xml 中用于引导 GWT 测试的大部分内容都直接取自文档。

# javascript - 如何在jquery中使用包含数组的函数？

> ID：13412215
> 
> 赞同：1
> 
> 时间：2012-11-16T07:30:24.473
> 
> 标签：javascript, jquery, asp.net, blur

我有一个包含一些值的数组。我想如果文本框的值包含来自该数组的任何元素的值，它将显示警报“存在”，否则“不存在”我尝试了以下代码：

```
$('[id$=txt_Email]').live('blur', function (e) {
    var email = $('[id$=txt_Email]').val();
    var array = ['gmail.com', 'yahoo.com'];
    if (array.indexOf(email) < 0) { // doesn't exist
        // do something
        alert('doesnot exists');
    }
    else { // does exist
        // do something else
        alert('exists');
    }

}); 
```

但这是将整个值与数组元素进行比较。我想在 C# 中使用包含字符串的函数。请帮助我。我想如果用户输入“test@gmail.com”，它将显示存在于数组中。如果用户输入“test@test.com”，它会提示不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:34:30.063

我想你想要

```
$.each(array, function () {
   found = this.indexOf(email);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:31:37.303

要找到不完全匹配的字符串，您需要执行一些操作，例如

**[现场演示](http://jsfiddle.net/Qq3ht/)**

```
arr = ['gmail.com', 'yahoo.com'];

alert(FindMatch(arr, 'gmail.co'));

function FindMatch(array, strToFind)
{

    for(i=0; i < array.length; i++)
    {
        if(array[i].indexOf( strToFind) != -1)
           return true;        
    }
     return false;
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:37:58.117

```
$(document).on('blur', '[id$=txt_Email]', function (e) {
    var email = this.value, array = ['gmail.com', 'yahoo.com'];

    if (email.indexOf('@')!=-1) {
        if ($.inArray(email.split('@')[1], array)!=-1) {
            alert('exists');
        }else{
            alert('does not exists');        
        }
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/TyCt3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:39:47.530

```
b is the value, a is the array

It returns true or false

function(a,b){return!!~a.indexOf(b)} 
```

# maven - 错误：升级到 flexmojos 4 时，没有指定要包含在库中的任何内容

> ID：13412217
> 
> 赞同：0
> 
> 时间：2012-11-16T07:30:43.677
> 
> 标签：maven, pom.xml, flexmojos, flex-mojos

我正在尝试从 3.9 升级到 flexmojos 4，它导致了许多问题（maven 构建失败并出现很多错误），主要错误似乎是：

错误：没有指定要包含在库中

然后它会告诉你哪些类没有定义（因为我假设的库中没有包含任何内容）。我确实按照升级要求更改为，我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:04:05.337

您是否在 pom 中设置了源目录？

```
<build>
    <sourceDirectory>src/main/flex</sourceDirectory>
    <testSourceDirectory>src/test/flex</testSourceDirectory>
</build> 
```

您可能希望将该`includeClasses`属性设置为 flexmojo 配置：

```
<includeClasses>
   <scan>
     <includes>
        <include>org.htulipe.*</include>
     </includes>
   </scan>
</includeClasses> 
```

如果这不起作用，您能否提供有关您的构建的更多详细信息。你用什么目标？你的pom是什么样的？

# maven - 使用 POM 导入的依赖管理

> ID：13412219
> 
> 赞同：1
> 
> 时间：2012-11-16T07:31:03.017
> 
> 标签：maven, parent-pom

我正在本地创建一个项目“test-jar”，并且我正在使用我没有写访问权限的 pom 文件作为“test-jar”项目的父级。父项目已经用旧版本定义了 depedencyManagement。

因为我必须更新项目中的依赖版本并计划覆盖父级的依赖管理。所以，我用我自己的依赖管理创建了另一个 POM 文件并导入到“test-jar”项目中。

我的项目 ：

```
<project>
  <artifactid>test-jar</artifactid>
   <parent>
         <artifactId> test-parent </artifactId>

   </parent>
   <dependencies>
        <dependency>
        <artifactId>jar/artifactId>
       </dependency>
   <dependencies>
   <dependencyManagement>
    <dependencies>
        <dependency>
        <artifactId>custom-pom</artifactId>
            <type>pom</type>
        <scope>import</scope>
    </dependency>
   </dependencyManagement>

</project> 
```

我的父项目：

```
<project>
  <artifactid>test-parent</artifactid>

   <dependencyManagement>
    <dependencies>
        <dependency>
        <artifactId>jar/artifactId>
            <version>1.0</version>
    </dependency>
   </dependencyManagement>

</project> 
```

我用于更新依赖管理的自定义 POM：

```
<project>
  <artifactid>custom-pom</artifactid>

   <dependencyManagement>
    <dependencies>
        <dependency>
        <artifactId>jar</artifactId>
            <version>3.0</version>
    </dependency>
   </dependencyManagement>
</project> 
```

问题是，我总是从父 pom 获取依赖版本，尽管我在项目中导入了新的依赖管理。

我在这里使用 Maven 2.2.1 版本。

**是否有任何解决方案如何从 Parent POM 覆盖依赖管理？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:45:35.363

根据文档：

> 此范围仅用于该部分中 pom 类型的依赖项。它指示应将指定的 POM 替换为该 POM 部分中的依赖项。由于它们被替换，具有导入范围的依赖项实际上并不参与限制依赖项的传递性。

除了您的问题之外，您可以简单地使用与父 pom 的依赖管理中定义的 onses 不同的不同版本。此外，您可以创建一个单独的 pom 来定义具有新版本（dependencyManagement）的依赖项并从给定的父级继承。

# javascript - 压缩 javascript 和 css 文件的 yui-compressor 是如何工作的？

> ID：13412221
> 
> 赞同：1
> 
> 时间：2012-11-16T07:31:13.973
> 
> 标签：javascript, css, yui-compressor

我很想了解像 yui-compressor 这样的压缩器在压缩 js 或 css 文件时所做的所有事情，如果我想编写自己的压缩器，我需要采取哪些步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:47:43.057

> YUI 压缩器是用 Java 编写的（需要 Java >= 1.4）并依赖 Rhino 来标记源 JavaScript 文件。它首先分析源 JavaScript 文件以了解其结构。然后它打印出令牌流，尽可能多地省略空白字符，并在适当的替换处用 1（或 2 或 3）字母符号替换所有本地符号（面对诸如 eval 之类的邪恶功能或者，YUI Compressor 采取防御方法，不混淆任何包含 evil 语句的作用域） CSS 压缩算法使用一组经过微调的正则表达式来压缩源 CSS 文件。YUI Compressor 是开源的，所以不要犹豫查看代码以了解它的工作原理。

来源：http: [//developer.yahoo.com/yui/compressor/#work](http://developer.yahoo.com/yui/compressor/#work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:50:49.417

来自官方文档网站

*" **YUI Compressor 是如何工作的？** YUI 压缩器是用 Java 编写的（需要 Java >= 1.4）并依赖 Rhino 来标记源 JavaScript 文件。它首先分析源 JavaScript 文件以了解其结构。然后它打印出令牌流，尽可能多地省略空白字符，并在适当的替换处用 1（或 2 或 3）字母符号替换所有本地符号（面对诸如 eval 之类的邪恶功能或者，YUI Compressor 采取防御方法，不混淆任何包含 evil 语句的作用域） CSS 压缩算法使用一组经过微调的正则表达式来压缩源 CSS 文件。YUI Compressor 是开源的，所以不要犹豫查看代码以准确了解它的工作原理。”*

这里的css压缩代码 [https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/CssCompressor.java](https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/CssCompressor.java)

这里的js压缩代码 [https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/JavaScriptCompressor.java](https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/JavaScriptCompressor.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:40:46.503

据我所知，这些是主要步骤：

*   删除每个额外的空间（解析器不需要它们）
*   删除回车（解析器也不需要它们）

对于 JS

*   将变量名称替换为更短的新变量名称，当然是唯一的

**编辑：**拥有一个好主意的最简单方法实际上是创建一个 CSS 和 JS 并在压缩后查看差异。

# c# - LibGit2Sharp 是否支持从本地文件系统克隆存储库？

> ID：13412222
> 
> 赞同：4
> 
> 时间：2012-11-16T07:31:16.167
> 
> 标签：c#, libgit2, libgit2sharp

我正在尝试从本地文件系统克隆一个 git 存储库：

```
using System;
using LibGit2Sharp;

class Program
{
    static void Main()
    {
        var sourceUrl = @"file:///c:/work/libgit2sharp";
        using (Repository.Clone(sourceUrl, "targetDir", bare: true))
        {
            Console.WriteLine("repository successfully cloned");
        }
    }
} 
```

我得到一个例外：

```
Unhandled Exception: LibGit2Sharp.LibGit2SharpException: An error was raised by libgit2\. Category = Odb (Error).
Failed to find the memory window file to deregister
   at LibGit2Sharp.Core.Ensure.Success(Int32 result, Boolean allowPositiveResult) in c:\work\libgit2sharp\LibGit2Sharp\Core\Ensure.cs:line 85
   at LibGit2Sharp.Core.Proxy.git_clone_bare(String url, String workdir, git_transfer_progress_callback transfer_cb) in c:\work\libgit2sharp\LibGit2Sharp\Core\Proxy.cs:line 219
   at LibGit2Sharp.Repository.Clone(String sourceUrl, String workdirPath, Boolean bare, Boolean checkout, TransferProgressHandler onTransferProgress, CheckoutProgressHandler onCheckoutProgress) in c:\work\libgit2sharp\LibGit2Sharp\Repository.cs:line 431
   at Program.Main() in c:\work\ConsoleApplication1\Program.cs:line 10 
```

我还尝试了以下源网址：

```
var sourceUrl = @"c:\work\libgit2sharp\.git\"; 
```

并得到另一个例外：

```
Unhandled Exception: LibGit2Sharp.LibGit2SharpException: An error was raised by libgit2\. Category = Config (Error).
Failed to parse config file: Unexpected end of file while parsing multine var (in c:/work/ConsoleApplication1/bin/Debug/targetDir/config:23, column 0)
   at LibGit2Sharp.Core.Ensure.Success(Int32 result, Boolean allowPositiveResult) in c:\work\libgit2sharp\LibGit2Sharp\Core\Ensure.cs:line 85
   at LibGit2Sharp.Core.Proxy.git_clone_bare(String url, String workdir, git_transfer_progress_callback transfer_cb) in c:\work\libgit2sharp\LibGit2Sharp\Core\Proxy.cs:line 219
   at LibGit2Sharp.Repository.Clone(String sourceUrl, String workdirPath, Boolean bare, Boolean checkout, TransferProgressHandler onTransferProgress, CheckoutProgressHandler onCheckoutProgress) in c:\work\libgit2sharp\LibGit2Sharp\Repository.cs:line 431
   at Program.Main() in c:\work\ConsoleApplication1\Program.cs:line 12 
```

`targetDir`永远不会被创建。

另一方面，如果我使用 HTTP 传输，则该`Repository.Clone`方法可以正常工作：

```
var sourceUrl = "https://github.com/libgit2/libgit2sharp"; 
```

所以我的问题是我做错了什么，或者这是不支持的功能还是本机中的错误`git2.dll`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:00:39.200

> 所以我的问题是我做错了什么，或者这是不支持的功能还是本机 git2.dll 中的错误？

实际上，两者兼而有之。

*   第一个例外显然是一个错误。这**不应该**发生，并且会出现问题。
*   第二个需要更深入的分析。您能在 LibGit2Sharp 项目中打开一个问题吗？

好消息是最近合并了来自**[BenStraub的拉取请求。](https://stackoverflow.com/users/1319/ben-straub)**这个**[拉取请求](https://github.com/libgit2/libgit2/pull/1049)**实现了本地获取传输，应该可以很好地解决这个问题。

LibGit2Sharp 将在接下来的几天内使用新版本的 libgit2 二进制文件进行更新，它应该允许您执行本地克隆/获取。我会在完成后立即更新这个答案。

## 更新

该**[测试](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp.Tests/CloneFixture.cs#L53-L90)**展示了如何对本地存储库进行克隆和推送。

# asp.net - 尝试在 asp.net 中发送邮件时发生未处理的异常

> ID：13412225
> 
> 赞同：0
> 
> 时间：2012-11-16T07:31:20.320
> 
> 标签：asp.net, visual-studio-2008, sendmail

当我尝试发送邮件时，我得到了这些例外

> System.Net.Mail.SmtpException：事务失败。服务器响应为： 5.7.7 Sender Unknown in Local Domain 。在 System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response) 在 System.Net.Mail.MailCommand.Send(SmtpConnection conn, Byte[] command, String from) 在 System.Net.Mail.SmtpTransport.SendMail( MailAddress 发件人、MailAddressCollection 收件人、String deliveryNotify、SmtpFailedRecipientException& 异常）在 d:\pjt\mail_check\Default.aspx.cs 中的 _Default.Button1_Click1（对象发件人，EventArgs e）处的 System.Net.Mail.SmtpClient.Send（MailMessage 消息） ：第 39 行

# cgcontext - 结合CGContext几何

> ID：13412240
> 
> 赞同：1
> 
> 时间：2012-11-16T07:32:31.333
> 
> 标签：cgcontext, cgpath

有谁知道是否可以组合（例如）不同的 CGContext 路径来创建一个新的组合形状，如本例所示？

![在此处输入图像描述](../Images/aff40f685a41a816a9db0c28d9e7ffe9.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:11:11.637

I found a library that does Union operations on CGPaths:

[https://bitbucket.org/martinwinter/vectorbooleancg](https://bitbucket.org/martinwinter/vectorbooleancg)

I haven't tried it yet, but the author of the CG branch of Vectorbool, Martin Winter, states that the union operation should be usable in its current form on iOS. I will add information when I get around to trying to implement it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:14:57.360

我怀疑是否有支持此功能的 Apple 库。

您需要的是所谓的“两个（或多个）多边形的并集”，有时称为对多边形的布尔运算。我会将 CGPath 转换为多边形，可能您开始创建一个包含多边形点的点数组。这意味着不使用 CGPathAddEllipse，而是通过例如具有 64 到 256 个顶点的正多边形来近似形状。

您可以轻松地为自己计算圆或椭圆的点（使用类似于 a*cos(t)、b*sin(t) 的方法，请参阅 wikipedia 中的椭圆“参数公式”）然后您使用提供的 c 库之一这些“工会行动”。其中之一是 LEDA 库。

# python - Python-Django：模板中的用户信息

> ID：13412242
> 
> 赞同：2
> 
> 时间：2012-11-16T07:32:37.403
> 
> 标签：python, django, templates

我有数据库，目前从我的数据库中，它在我的模板（HTML 表）页面中显示如下。

```
sno--scene--frames--empID

1------001----24-----100

2------002----34-----100

3------003----20-----101

4------004----15-----101

5------005----10-----100 
```

但我想像这样显示（下）。如何从`HTML`（表）中得到这个。我正在使用 Python-Django。

```
sno---scene---frames---empID

1--------001-----24-------100

2--------002-----34-------100

3--------005-----10-------100

------------- tot=68

1------003-----20--------101

2------004-----15--------101

-------------tot=35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:13:57.210

您应该在视图中准备数据 - 按 id 分组，计算总和。结果 cal 如下所示：

```
items_info = [{'items':[item1, item2, item3], 'total': 68}, {'items':[item4, item5], 'total': 35}] 
```

那么模板应该是这样的：

```
{% for info in items_info %}
    {% for item in info.items %}
        <tr> 
            <td>{{ forloop.counter }}</td>
            <td>{{ item.scene }}</td>
            <td>{{ item.frames }}</td>
            <td>{{ item.id }}</td>
        </tr>
    {% endfor %}
    <tr>
        <td colspan="3">TOTAL</td>
        <td>{{ info.total }}
    </tr>
{% endfor %} 
```

希望这可以帮助！

# python - 匿名化 Python 中的值列表

> ID：13412248
> 
> 赞同：2
> 
> 时间：2012-11-16T07:32:59.423
> 
> 标签：python

假设您有一个类似于 CSV 文件的数据集，其中包含轻度敏感信息，例如在 12 年级英语课上谁给谁发了一张便条。虽然如果这些数据泄露出去并不是危机，但最好去掉识别信息，这样数据就可以公开、与合作者共享等。数据看起来像这样：

给予者、接受者：

> 安娜、
> 乔安娜、马克·
> 马克、明迪
> ·明迪、乔

你将如何处理这个列表，为每个名称分配一个唯一但任意的标识符，然后去掉这些名称并用 Python 中的标识符替换它们，这样你最终会得到类似的结果：

> 1,2
> 1,3
> 3,4
> 4,2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T07:42:20.893

您可以使用`hash()`生成唯一的任意标识符，它将始终返回特定字符串的相同整数：

```
 with open("data1.txt") as f:
    lis=[x.split(",") for x in f]
    items=[map(lambda y:hash(y.strip()),x) for x in lis]
    for x in items:
        print ",".join(map(str,x))
   ....:         

-1319295970,1155173045
-1319295970,-1963774321
-1963774321,-1499251772
-1499251772,1155173045 
```

或者您也可以使用[`iterools.count`](http://docs.python.org/2/library/itertools.html#itertools.count)：

```
In [80]: c=count(1)

In [81]: with open("data1.txt") as f:
    lis=[map(str.strip,x.split(",")) for x in f]
    dic={}
    for x in set(chain(*lis)):
        dic.setdefault(x.strip(),next(c))
    for x in lis:    
        print ",".join(str(dic[y.strip()]) for y in x)
   ....:         
3,2
3,4
4,1
1,2 
```

或使用 itertools 的配方改进我以前的答案[`unique_everseen`](http://docs.python.org/2/library/itertools.html#recipes)，您可以获得确切的答案：

```
In [84]: c=count(1)

In [85]: def unique_everseen(iterable, key=None):
        seen = set()
        seen_add = seen.add
        if key is None:
                for element in ifilterfalse(seen.__contains__, iterable):
                        seen_add(element)
                        yield element
                else:
                        for element in iterable:
                                k = key(element)
                                if k not in seen:
                                        seen_add(k)
                                        yield element
   ....:                         

In [86]: with open("data1.txt") as f:
    lis=[map(str.strip,x.split(",")) for x in f]
    dic={}
    for x in unique_everseen(chain(*lis)):
        dic.setdefault(x.strip(),next(c))
    for x in lis:    
        print ",".join(str(dic[y.strip()]) for y in x)
   ....:         
1,2
1,3
3,4
4,2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T07:50:05.470

```
names = """
Anna,Joe
Anna,Mark
Mark,Mindy
Mindy,Joe
"""

nameset = set((",".join(names.strip().splitlines())).split(","))

for i,name in enumerate(nameset):
    names = names.replace(name,str(i))

print names

2,1
2,3
3,0
0,1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T08:09:26.757

要真正匿名化数据，您需要名称的随机别名。哈希对此很有用，但如果您只想将每个名称映射到一个整数，您可以执行以下操作：

```
from random import shuffle

data = [("Anna", "Joe"), ("Anna", "Mark"), ("Mark", "Mindy"), ("Mindy", "Joe")]
names = list(set(x for pair in data for x in pair))
shuffle(names)
aliases = dict((k, v) for v, k in enumerate(names))

munged = [(aliases[a], aliases[b]) for a, b in data] 
```

这会给你类似的东西：

```
>>> data
[('Anna', 'Joe'), ('Anna', 'Mark'), ('Mark', 'Mindy'), ('Mindy', 'Joe')]
>>> names
['Mindy', 'Joe', 'Anna', 'Mark']
>>> aliases
{'Mindy': 0, 'Joe': 1, 'Anna': 2, 'Mark': 3}
>>> munged
[(2, 1), (2, 3), (3, 0), (0, 1)] 
```

然后，您可以（如果需要）从别名中获取名称，反之亦然：

```
>>> aliases["Joe"]
1
>>> names[2]
'Anna' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T07:46:42.213

您可以使用`hash`为每个名称获取唯一 ID，可以使用字典将名称映射到它们的值（如果您希望数字与示例中的数字相同）：

```
data = [("Anna", "Joe"), ("Anna", "Mark"), ("Mark", "Mindy"), ("Mindy", "Joe")]

names = {}
def anon(name):
    if not name in names:
        names[name] = len(names) + 1
    return names[name]

result = []

for n1, n2 in data:
    result.append((anon(n1), anon(n2)))

print names
print result 
```

运行时会给出：

```
{'Mindy': 4, 'Joe': 2, 'Anna': 1, 'Mark': 3}
[(1, 2), (1, 3), (3, 4), (4, 2)] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T07:46:48.370

首先，将文件读入行列表：

```
import csv
with open('myFile.csv') as f:
    rows = [row for row in csv.reader(f)] 
```

此时，您可以构建一个 dict 来保存映射：

```
nameSet = set()
for row in rows:
    for name in row:
        nameSet.add(name)
map = dict((name, i) for i, name in enumerate(nameSet)) 
```

或者，您可以直接构建字典：

```
nextID = 0
map = {}
for row in rows:
    for name in row:
        if name not in map:
            map[name] = nextID
            nextID += 1 
```

无论哪种方式，您都会再次浏览这些行并应用映射：

```
output = [[map[name] for name in row] for row in rows] 
```

# list - 在 tcl 中创建一个列表，其中包含正确索引位置的元素

> ID：13412249
> 
> 赞同：1
> 
> 时间：2012-11-16T07:33:06.310
> 
> 标签：list, join, split, tcl, concatenation

如何使用 tcl 将以下字符串/列表转换为第一个元素为 1-81 第二个元素为 81-162 第三个元素 us 162-243 的列表

{} {} {1 -81} { } {81 -162} { } {162 -243} { } {243 -324} { } {324 -405} { } {405 -486} { } {486 -567 } { } {567 -648} { } {648 -729} { } {729 -810} { } {810 -891} { } {891 -972} { } {972 -1053} { } {1053 -1134} { }

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:36:53.543

如果您只想过滤掉空列表元素，那么显而易见的做法是：

```
# Assuming the original list is in $list

set result {}
foreach x $list {
    if {[string trim $x] != ""} {
        lappend result $x
    }
}

# The result list should contain the cleaned up list. 
```

请注意，`[string trim]`如果您确定所有空元素确实是空的并且不包含空格（意思是`{}`而不是可能`{ }`），则不需要这样做。但是您的示例同时包含空元素和空格，因此您需要进行字符串修剪。

或者，您可以使用正则表达式进行测试：

```
foreach x $list {
    # Test if $x contains non-whitespace characters:
    if {[regexp {\S} $x]} {
        lappend result $x
    }
} 
```

但是，您可以使用 lsearch 在一行中执行上述操作：

```
# Find all elements that contain non whitespace characters:

set result [lsearch -inline -all -regexp $list {\S}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:51:24.380

看来您想实现两个目标：

1.  从原始列表中删除所有空项目
2.  对于每个非空项目，删除空间

我想提供一种不同的方法：使用具有过滤器命令的 struct::list：

```
package require struct::list

set oldList {{} {} {1 -81} { } {81 -162} { } {162 -243} { } {243 -324} {}}
set newList [struct::list filterfor item $oldList {
    [set item [string map {{ } {}} $item]] != ""
}] 
```

在这个解决方案中，我使用了`struct::list filterfor`类似于 foreach 命令的命令。filterfor 的主体是一个布尔表达式。在正文中，我使用字符串映射从每个项目中删除所有空格，并且仅当结果不为空时才返回 true。此解决方案可能不是最有效的，而是解决问题的不同方法。

# android - 无法从 SQLiteOpenHelper 中的 assets/ 复制数据库

> ID：13412257
> 
> 赞同：2
> 
> 时间：2012-11-16T07:33:28.313
> 
> 标签：android, android-sqlite, android-assets

我有一个离线创建并放入`assets/`目录中的预填充数据库。我试图在`SQLiteOpenHelper.onCreate()`被调用时复制它，但我遇到了严重的麻烦。

```
public void onCreate(SQLiteDatabase db) {
    importAssets();
} 
```

当我像这样编写代码时，在随后尝试从数据库中获取数据时，我始终会收到**no such table错误。**我做了一些乱七八糟的事情，开始将 SQL 语句插入到`onCreate()`调用中`importAssets()`，例如：

```
public void onCreate(SQLiteDatabase db) {
    importAssets();
    db.execSQL("CREATE TABLE main_table (some_col);");
} 
```

现在，当我运行应用程序时，我遇到了**列未找到**错误的问题（上述架构与数据库访问代码所期望的不匹配，它缺少许多列。在应用程序的第二次运行时，`android_metatdata`被损坏，然后一切都下地狱了。在调用之前我也尝试过使用 SQL 代码，但`importAssets()`结果同样是灾难性的。

所以我开始认为我正在做的文件副本`importAssets()`基本上被截断了`onCreate()`。我对吗？`onCreate()`是直接使用 SQL创建数据库的唯一方法吗？我可以不使用这个功能来复制现成的数据库`assets/`吗？

`importAssets()`我已经通过`Log()`调用确认它运行正常。这是完整的功能：

```
private void importAssets() throws IOException
{  
    AssetManager am = mCtx.getAssets();
    InputStream in = am.open(DB_NAME);
    FileOutputStream out;
    byte[] buffer = new byte[1024];
    int len;
    File db;

    db = new File(DB_DIR + "/" + DB_NAME);

    // copy the DB from assets to standard DB dir created above
    out = new FileOutputStream(db);
    while ((len = in.read(buffer)) > 0)
    {
        out.write(buffer, 0, len);
    }

    out.flush();
    out.close();
    in.close();
    if (!db.exists())
    {
        Log.e(TAG, DB_DIR + "/" + DB_NAME + " does not exist");
    }
} 
```

我在[其他地方](https://stackoverflow.com/a/10926456/46461)看到了我在 SQLiteOpenHelper 构造函数中进行文件复制的建议，但这意味着我必须手动检查文件是否存在，`importAssets()`因为每次使用数据库时都会调用构造函数。此外，`onCreate()`这对于我想做的事情实际上是无用的，尽管我没有看到任何避免这种情况的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:08:02.133

我现在确信我的怀疑是对的。的`onCreate()`函数`SQLiteOpenHelper`将创建数据库文件，在`name`调用超类构造函数的参数中指定。`onCreate()`然后，它希望您使用各种 DB 库从函数内修改此 DB 文件（添加表、数据、更改表等） 。**从其他地方复制文件只会被截断**。

我不知道它是如何或为什么这样做的，但这`onCreate()`对于通过完整地复制数据库来“创建”数据库毫无用处，`assets/`这正是我所需要的。我已经移动`importAssets()`到构造函数并添加了适当的检查，如果它已经存在，则不会覆盖它。什么`onCreate()`都没有，它似乎并没有扰乱其他地方正在发生的事情。

我认为这`SQLiteOpenHelper`确实需要运行 SQLite 脚本的能力。这样我就不必将长长的 SQL 块硬编码到我的 Java 代码中，而我真正想要做的只是获得一个数据库设置。

# jquery - 如何告诉 jQuery 什么都不做

> ID：13412274
> 
> 赞同：1
> 
> 时间：2012-11-16T07:34:37.863
> 
> 标签：jquery, function

我有适用于大多数 li as 的功能，我希望它们不适用于少数几个。单击我选择的链接时，如何告诉 jQuery 不运行任何函数。jQuery.noop 没有做任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T07:37:12.710

很难说出你在问什么，但我假设你有这样的事情：

```
$("a").on('click', function () { /* do something */ }); 
```

...但是当您单击时，`<a id="donothing">`您希望它什么也不做。您需要更具体的选择器，或者您可以单独执行以下操作：

```
$("#donothing").off('click'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:44:44.443

我可以使用 .not() 方法并首先排除不需要的元素

```
$('li').not('#certian-link').on('click', function () { /* do something */ }); 
```

有关详细信息，请参阅 jquery 文档 [http://api.jquery.com/not/](http://api.jquery.com/not/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-27T20:18:20.190

您可以使用 e.preventDefault(); 或返回假；

# android - 从手机错误中获取的高质量图像

> ID：13412277
> 
> 赞同：0
> 
> 时间：2012-11-16T07:34:52.440
> 
> 标签：android, image, sqlite

我在图库中选择“大尺寸图像并捕获高质量图像”然后强制关闭错误另请参阅以下代码和错误...谢谢

代码：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
            selectedImageUri = data.getData();
            if (resultCode == RESULT_OK) {
            //  selectedImageUri = data.getData();
                if (requestCode == SELECT_PICTURE) {

    //              selectedImageUri = data.getData();
                    selectedImagePath = getPath(selectedImageUri);
                    user_img.setImageURI(selectedImageUri);

                    Log.e("select image from gallary ", "" + selectedImagePath);

                } else if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {

                    //Uri camrerauri = data.getData();
                    selectedImagePath = getPath(selectedImageUri);
                    user_img.setImageURI(selectedImageUri);
                    Log.e("capture image ", "" + selectedImagePath);

                }
            }
        }

        public String getPath(Uri uri) {
            String[] projection = { MediaStore.Images.Media.DATA };
            Cursor cursor = managedQuery(uri, projection, null, null, null);
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }

        public static int calculateInSampleSize(BitmapFactory.Options options,
                int reqWidth, int reqHeight) {
            // Raw height and width of image
            final int height = options.outHeight;
            final int width = options.outWidth;
            int inSampleSize = 1;

            if (height > reqHeight || width > reqWidth) {
                if (width > height) {
                    inSampleSize = Math.round((float) height / (float) reqHeight);
                } else {
                    inSampleSize = Math.round((float) width / (float) reqWidth);
                }
            }
            return inSampleSize;
        }

        public static Bitmap decodeSampledBitmapFromResource(int reqWidth,
                int reqHeight) throws IOException {
            int inSample = 8;

            // First decode with inJustDecodeBounds=true to check dimensions
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            options.inSampleSize=inSample;
            // BitmapFactory.decodeResource(res, resId, options);
            //BitmapFactory.decodeStream(selectedImageUri.openConnection().getInputStream(), null,options);
            BitmapFactory.decodeFile(selectedImagePath, options);

            // Calculate inSampleSize
            options.inSampleSize = calculateInSampleSize(options, reqWidth,
                    reqHeight);

            // Decode bitmap with inSampleSize set
            options.inJustDecodeBounds = false;
            return BitmapFactory.decodeFile(selectedImagePath, options);
            //return BitmapFactory.decodeStream(new FlushedInputStream(selectedImageUri.openConnection().getInputStream()), null, options);
        }

        public static class FlushedInputStream extends FilterInputStream {
            public FlushedInputStream(InputStream inputStream) {
                super(inputStream);
            }

            @Override
            public long skip(long n) throws IOException {
                long totalBytesSkipped = 0L;
                while (totalBytesSkipped < n) {
                    long bytesSkipped = in.skip(n - totalBytesSkipped);
                    if (bytesSkipped == 0L) {
                        int b = read();
                        if (b < 0) {
                            break; // we reached EOF
                        } else {
                            bytesSkipped = 1; // we read one byte
                        }
                    }
                    totalBytesSkipped += bytesSkipped;
                }
                return totalBytesSkipped;
            }
        } 
```

错误：

```
 11-16 13:03:56.269: E/CursorWindow(11344): need to grow: mSize = 1048576, size = 1306040, freeSpace() = 1048426, numRows = 1
    11-16 13:03:56.269: E/CursorWindow(11344): Attempting to grow window beyond max size (1048576)
    11-16 13:03:56.269: E/Cursor(11344): Failed allocating 1306040 bytes for blob at 0,5
    11-16 13:03:56.279: E/CursorWindow(11344): Bad request for field slot 0,1\. numRows = 0, numColumns = 6
    11-16 13:03:56.279: W/dalvikvm(11344): threadid=1: thread exiting with uncaught exception (group=0x40018560)
    11-16 13:03:56.279: E/AndroidRuntime(11344): FATAL EXCEPTION: main
    11-16 13:03:56.279: E/AndroidRuntime(11344): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rememberme/com.rememberme.BumpTest}: java.lang.IllegalStateException: get field slot from row 0 col 1 failed
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.os.Handler.dispatchMessage(Handler.java:99)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.os.Looper.loop(Looper.java:123)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread.main(ActivityThread.java:3729)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at java.lang.reflect.Method.invokeNative(Native Method)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at java.lang.reflect.Method.invoke(Method.java:507)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at dalvik.system.NativeStart.main(Native Method)
    11-16 13:03:56.279: E/AndroidRuntime(11344): Caused by: java.lang.IllegalStateException: get field slot from row 0 col 1 failed
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.database.CursorWindow.getString_native(Native Method)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.database.CursorWindow.getString(CursorWindow.java:329)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at com.rememberme.BumpTest.onCreate(BumpTest.java:279)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    11-16 13:03:56.279: E/AndroidRuntime(11344):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:49:06.970

看起来你的内存用完了。**我通过在处理之前将图像写入 sd 解决了这个问题**。我现在无法将代码发送给您，但稍后再发送。Acutally 处理图像会占用大量内存。因此，您应该在处理图像之前考虑调整位图的大小。

提示：您可能无法写入位图。您必须制作该位图的副本，以便您可以访问和编辑像素。

这就是为什么我必须将位图副本复制到我的 sd，因为将副本写入内存会导致异常。

尝试这个：

*   加载图像
*   将副本写入 sd
*   冲洗
*   加载副本并尝试处理

编辑：给你...**如何从相机中获取大图像并处理位图：**

```
rivate void openCamera() {
    String _path = Environment.getExternalStorageDirectory()
            + File.separator + "temp.JPEG";
    tempFile = new File(_path);
    outputFileUri = Uri.fromFile(tempFile);
    bitmap = null;
    // start default camera
    Intent cameraIntent = new Intent(
            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
            outputFileUri);
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
}

private void process() {
    Bitmap editableBitmap = processor.processImage(bitmap);
    imgView.setImageBitmap(editableBitmap);
    // finish();
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    ready = false;
    if (requestCode == CAMERA_PIC_REQUEST) {
        // bitmap = BitmapFactory.decodeFile(_path);
        try {
            bitmap = MediaStore.Images.Media.getBitmap(
                    getApplicationContext().getContentResolver(),
                    outputFileUri);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (imgView == null) {
            imgView = (ImageView) findViewById(R.id.imageView1);
        }
        process();
    }
} 
```

将位图转换为可变位图，以便您可以编辑像素（我想我是从 pastebin 那里得到的，但这并不神奇）

```
public static Bitmap convertToMutable(Bitmap imgIn) {
        try {
            // this is the file going to use temporally to save the bytes.
            // This file will not be a image, it will store the raw image data.
            File file = new File(Environment.getExternalStorageDirectory()
                    + File.separator + "temp.tmp");

            // Open an RandomAccessFile
            // Make sure you have added uses-permission
            // android:name="android.permission.WRITE_EXTERNAL_STORAGE"
            // into AndroidManifest.xml file
            RandomAccessFile randomAccessFile = new RandomAccessFile(file, "rw");

            // get the width and height of the source bitmap.
            int width = imgIn.getWidth();
            int height = imgIn.getHeight();
            Config type = imgIn.getConfig();

            // Copy the byte to the file
            // Assume source bitmap loaded using options.inPreferredConfig =
            // Config.ARGB_8888;
            FileChannel channel = randomAccessFile.getChannel();
            MappedByteBuffer map = channel.map(MapMode.READ_WRITE, 0,
                    imgIn.getRowBytes() * height);
            imgIn.copyPixelsToBuffer(map);
            // recycle the source bitmap, this will be no longer used.
            imgIn.recycle();
            System.gc();// try to force the bytes from the imgIn to be released

            // Create a new bitmap to load the bitmap again. Probably the memory
            // will be available.
            imgIn = Bitmap.createBitmap(width, height, type);
            map.position(0);
            // load it back from temporary
            imgIn.copyPixelsFromBuffer(map);
            // close the temporary file and channel , then delete that also
            channel.close();
            randomAccessFile.close();

            // delete the temp file
            file.delete();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return imgIn;
    } 
```

# matlab - 将行样本与类标签匹配

> ID：13412283
> 
> 赞同：2
> 
> 时间：2012-11-16T07:35:10.093
> 
> 标签：matlab

我对下面的代码有一个小问题，最后一行是具体的，我试图找到我的“样本”的类名，我的意思是我需要知道哪个正常和哪个蓝精灵属于我的 1000x6 样本的每一行.

```
%% sampling
normIdx = strmatch('normal.', Book2);
normalSubset = fulldata(normIdx, :);
normal = randperm(size(normalSubset , 1));
p = (normal(1:750)-1)';

%
smurfIdx = strmatch('smurf.', Book2);
smurfSubset = fulldata(smurfIdx, :);
smurf = randperm(size(smurfSubset , 1));
a = (smurf(1:250)-1)';

%
normalSample = normalSubset (p, :);
smurfSample = smurfSubset (a, :);

%
sample = [normalSample ; smurfSample]

%
sample = sample(randperm(1000),:);

%
idx = [a ; p];
K1 = Book2(idx (sample==1), :) 
```

K1 应该等于 1000 个样本类标签，其中 750 个应该是正常的，250 个应该是 smurf，它们应该与样本中的同一行完全对应。Book2 包含类标签，我也有从中派生样本的完整数据。

Atm K1 导致：

```
Index exceeds matrix dimensions 
```

可能有一种简单的方法可以将样本数据与 fulldata 中的数据相匹配，但我不确定 fulldata 中是否可能存在重复数据......所以匹配失败了，因为`sample`是随机的，所以我不知道是什么我可以将类标签与采样相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:59:47.343

你是这个意思吗？：

```
%
shuffle = randperm(1000);
sample = sample(shuffle,:);

%
idx = [a ; p];
K1 = Book2(idx (shuffle), :); 
```

# c++ - 什么是 IO 流缓冲？

> ID：13412289
> 
> 赞同：1
> 
> 时间：2012-11-16T07:35:25.467
> 
> 标签：c++, iostream, buffering

我无法找到 IO 流缓冲的基本概念及其含义。任何教程和链接都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:38:24.073

缓冲使用内存（用户内存）而不是将数据直接发送到操作系统（即磁盘）。保存上下文切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:40:53.590

缓冲是处理输入和输出的软件的基本部分。缓冲区保存软件接口和硬件接口之间的数据，因为硬件和软件以不同的速度运行。

产生数据的组件可以将其放入缓冲区，然后通过将收集到的数据发送到下一个组件来“刷新”缓冲区。同样，其他组件可能会“在缓冲区中等待”，直到有完整的数据或足够有效处理的数据可用于输入。

在 C++ 中，`std::basic_filebuf`在文件系统文件上实现缓冲区。它最多存储固定数量的字节，因此操作系统始终以最小事务大小工作，而程序可以根据需要访问单个字符。

参见[维基百科](http://en.wikipedia.org/wiki/Data_buffer)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T07:46:20.393

这是概念。想象一下，您有一个应用程序需要将其数据写入硬盘驱动器。假设它想每半秒写一些东西（例如更新一个日志文件）。这个好吗？不，这就是原因。

软件可以非常快，但是 HDD 可以运行的速度是有限的，它比内存和您的应用程序慢得多。要写入内容，HDD 需要将其磁头重新定位到特定扇区（这可能涉及减慢磁盘旋转速度），写入数据，然后重新定位回原来的位置。因此，您的应用程序可能会运行得很慢（嗯，这当然是一个理论示例）。

缓冲有助于解决这个问题。不是每次都写入磁盘，而是将数据累积在内存中某处的缓冲区中。一旦收集到足够多的数据，缓冲区就会被刷新：其中的数据被写入磁盘。这种方法有助于最大限度地减少 HDD 操作并提高整体速度。

# c# - 将 onclientclick 添加到 gridview 寻呼机

> ID：13412298
> 
> 赞同：2
> 
> 时间：2012-11-16T07:36:12.493
> 
> 标签：c#, asp.net, vb.net

使用 asp.net 和带有寻呼机的 gridview 控件。

如何向它添加 onclientclick，以便它只会在 onclientclick 返回 true 时分页。

这是否可能，因为它可以通过链接完成？

我知道我能做到

[GridView 寻呼机页面按钮可访问性](https://stackoverflow.com/questions/2367771/gridview-pager-page-buttons-accessibility)

myGridView.Attributes.Add("onClick", "setOKToClose();") 但它将它添加到网格中，我希望它只添加到寻呼机

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:19:02.843

将您的寻呼机转换为模板，但您必须制定自己的逻辑来显示和管理页面索引。

这里有一个示例代码

```
 <PagerTemplate>
                        <asp:Panel ID="gvpanel" runat="server">
                            <table cellpadding="3" cellspacing="3" class="style4">
                                <tr>
                                    <td width="20%">
                                        <asp:Label ID="Label4" runat="server" CssClass="lb" Text="Page "></asp:Label>
                                        <asp:DropDownList ID="ddpage" runat="server" AutoPostBack="True" CssClass="txt" 
                                            onselectedindexchanged="ddpage_SelectedIndexChanged">
                                        </asp:DropDownList>
                                        <asp:Label ID="Label5" runat="server" CssClass="lb" Text="of "></asp:Label>
                                        <asp:Label ID="lbltot" runat="server" CssClass="lb" Text="0"></asp:Label>
                                    </td>
                                    <td width="60%">
                                        <table class="style1">
                                            <tr>
                                                <td width="15%">
                                                    <asp:LinkButton ID="lbp10" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lbp10_Click">Previous 10</asp:LinkButton>
                                                </td>
                                                <td width="15%">
                                                    <asp:LinkButton ID="lbp" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lbp_Click">Previous</asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb1" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">1 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb2" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">2 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb3" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">3  </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb4" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">4 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb5" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">5 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb6" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">6 </asp:LinkButton>
                                                </td>
                                                <td >
                                                    <asp:LinkButton ID="lb7" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">7 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb8" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">8 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb9" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">9 </asp:LinkButton>
                                                </td>
                                                <td>
                                                    <asp:LinkButton ID="lb10" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lb1_Click">10</asp:LinkButton>
                                                </td>
                                                <td width="15%">
                                                    <asp:LinkButton ID="lbn" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lbn_Click">Next</asp:LinkButton>
                                                </td>
                                                <td width="15%">
                                                    <asp:LinkButton ID="lbn10" runat="server" CssClass="smalllinkbuttonf" 
                                                        Enabled="False" onclick="lbn10_Click">Next 10</asp:LinkButton>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="20%">
                                        &nbsp;</td>
                                </tr>
                            </table>
                        </asp:Panel>
                    </PagerTemplate> 
```

这是c#代码

```
 protected void lbp10_Click(object sender, EventArgs e)
{
    GridView1.PageIndex = (GridView1.PageIndex - 10);
    bind();
}
protected void lbp_Click(object sender, EventArgs e)
{
    GridView1.PageIndex = (GridView1.PageIndex - 1);
    bind();
}
protected void lbn_Click(object sender, EventArgs e)
{
    GridView1.PageIndex = (GridView1.PageIndex + 1);
    bind();
}
protected void lbn10_Click(object sender, EventArgs e)
{
    GridView1.PageIndex = (GridView1.PageIndex + 10);
    bind();
}
protected void lb1_Click(object sender, EventArgs e)
{
    LinkButton lb = (LinkButton)sender;
    GridView1.PageIndex = (int.Parse(lb.Text) - 1);
    bind();
} 
```

创建页脚的代码

```
 void addfooter(int rcount)
{
    if (GridView1.BottomPagerRow == null)
    {
        return;
    }
    Panel p = (Panel)GridView1.BottomPagerRow.FindControl("gvpanel");

    DropDownList dd = (DropDownList)p.FindControl("ddpage");
    for (int i = 0; i < rcount; i++)
    {
        ListItem li = new ListItem();
        li.Text = (i + 1).ToString();
        li.Value = (i + 1).ToString();
        dd.Items.Add(li);
    }
    Label lbltot = (Label)p.FindControl("lbltot");
    lbltot.Text = GridView1.PageCount.ToString();
    dd.SelectedIndex = GridView1.PageIndex;
    LinkButton lbp10 = (LinkButton)p.FindControl("lbp10");
    lbp10.Enabled = false;
    lbp10.CssClass = "smalllinkbuttonfd";
    LinkButton lbp = (LinkButton)p.FindControl("lbp");
    lbp.Enabled = false;
    lbp.CssClass = "smalllinkbuttonfd";
    LinkButton lbn10 = (LinkButton)p.FindControl("lbn10");
    lbn10.Enabled = false;
    LinkButton lbn = (LinkButton)p.FindControl("lbn");
    lbn.CssClass = "smalllinkbuttonfd";
    lbn.Enabled = false;
    lbn10.CssClass = "smalllinkbuttonfd";
    int cpage = GridView1.PageIndex + 1;
    int totpage = GridView1.PageCount;
    if (cpage > 10)
    {
        lbp10.Enabled = true;
        lbp10.CssClass = "smalllinkbuttonf";
    }
    if (cpage > 1)
    {
        lbp.Enabled = true;
        lbp.CssClass = "smalllinkbuttonf";
    }
    if (cpage < totpage)
    {
        lbn.Enabled = true;
        lbn.CssClass = "smalllinkbuttonf";
    }
    if (cpage + 10 < totpage)
    {
        lbn10.Enabled = true;
        lbn10.CssClass = "smalllinkbuttonf";
    }
    for (int i = 1; i < 11; i++)
    {
        LinkButton lb = (LinkButton)p.FindControl("lb" + i.ToString());
        lb.Enabled = false;
        lb.CssClass = "smalllinkbuttonfd";
    }
    int tstart = cpage / 10;
    int lcount = tstart + 10;
    //int scount = tstart - 10;
    int cnt = 1;
    for (int i = (tstart * 10); i <= ((tstart * 10) + 10); i++)
    {
        if (cnt > 10)
        {
            return;
        } if ((i + 1) > totpage)
        {
            LinkButton lb = (LinkButton)p.FindControl("lb" + cnt.ToString());
            lb.Enabled = false;
            lb.Text = (i + 1).ToString();
            lb.CssClass = "smalllinkbuttonfd";
            cnt++;
        }
        else
        {
            if ((i + 1) == cpage)
            {
                LinkButton lb = (LinkButton)p.FindControl("lb" + cnt.ToString());
                lb.Enabled = false;
                lb.Text = (i + 1).ToString();
                lb.CssClass = "smalllinkbuttonfd";
                cnt++;
            }
            else
            {
                LinkButton lb = (LinkButton)p.FindControl("lb" + cnt.ToString());
                lb.Enabled = true;
                lb.Text = (i + 1).ToString();
                lb.CssClass = "smalllinkbuttonf";
                cnt++;
            }
        }
    }

} 
```

Onlink 按钮现在您可以添加 onclientclick

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T15:59:48.757

[这个](https://stackoverflow.com/a/16396554)链接有一个正确的答案与[这个](http://forums.asp.net/post/5377125.aspx)答案相结合。

请务必`<asp:ScriptManager runat="server" />`在您的文档中添加标签。在页眉部分添加 javascript。

```
function pageLoad(sender, args) {
          //Your jquery code
          } 
```

优秀的参考可以在[$(document).ready() 和 pageLoad() 中找到不一样的！](http://encosia.com/document-ready-and-pageload-are-not-the-same/)

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T12:52:46.560

**添加到 GridView RowDataBound**

```
If e.Row.RowType = DataControlRowType.Pager Then
  e.Row.Attributes.Add("onclick", "js_function()")
End If 
```

# javascript - 获取列表中的最大高度

> ID：13412304
> 
> 赞同：0
> 
> 时间：2012-11-16T07:36:28.423
> 
> 标签：javascript, jquery, height, each

我有一个很大的清单。有很多列表项。我尝试制作一个脚本。即得到最高的 li 项目。而不是把最高的 li 项目放在所有项目上。

```
$('.list li').each(function() {
    var listHeight = $(this).outerHeight();

    $(this).css({ height: listHeight + 'px' })
}); 
```

所以我想要最高的 li 项目。进而。这个高度在所有地方里的物品。我该如何解决。谁能帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:42:26.847

```
var maxHeight = -1;
$('.list li').each(function() {
     maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
})
.height(maxHeight); 
```

# selenium - 如何使用 selenium RC 获取 gmail 中的未读邮件计数？

> ID：13412306
> 
> 赞同：0
> 
> 时间：2012-11-16T07:36:44.433
> 
> 标签：selenium, webdriver, selenium-rc

我有一个自动化 Gmail 的要求。在这里我需要获取收件箱、垃圾邮件、批量等标签的未读邮件计数。如何使用 selenium RC 获取未读邮件的计数。假设标签为 Inbox(5)、Spam(10)、Bulk(34)。这意味着收件箱包含 5 封未读邮件，垃圾邮件包含 10 封未读邮件。那么对于这种要求，我如何使用 Selenium RC 来实现呢？

谢谢和问候，湿婆。![在此处输入图像描述](../Images/641283070368a021bd0a02ef4e3ed1ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:46:34.450

我认为使用标准 IMAP 客户端界面，您将能够更快地完成任务。

请参阅 Perl 中的工作[示例和有关](http://www.perlmonks.org/?node_id=649742)[Mail::ImapClient](http://search.cpan.org/search?query=Mail%3a%3aIMAPClient)的更多官方文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:55:30.970

```
String inbox=selenium.getText("//a[contains(@title,'Inbox')]"); 
```

现在收件箱字符串变量包含**收件箱（1）**

```
String unreadInboxMails=inbox.substring(inbox.indexOf("(")+1,inbox.indexOf(")")); 
```

通过这种方式，您可以获得所有标签，如垃圾邮件、批量等。您需要更改的只是标签定位器。

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:49:31.177

这是获取所有文件夹的未读计数并显示在警报中的确切 selenese (Selenium IDE) 代码。

您可以通过调整几个命令将它与 Selenium RC 一起使用。

```
store | //div[@class='LrBjie']/div/div[ | target1
store | ]/div/div/div/span/a | target2
store | 1 | i
store | true | present
store |  | countsAll
while | ${present}==true | 
storeEval | storedVars['target1']+storedVars['i']+storedVars['target2'] | target
echo | ${target} | 
storeText | javascript{storedVars['target']} | counts
storeEval | storedVars['countsAll']+'  $  '+storedVars['counts']   |   countsAll
echo | ${countsAll} | 
storeEval | parseInt(storedVars['i'])+1 | i
storeEval | storedVars['target1']+storedVars['i']+storedVars['target2'] | target
storeElementPresent | javascript{storedVars['target']} | present
echo | ${present} | 
endWhile |  | 
storeEval | javascript{alert(storedVars['countsAll'])} | countsAll 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-02T05:30:47.087

```
WebDriver gmail = new ChromeDriver();
//Inbox count using xpath. From this output you can separate count from the string 'Inbox(20)'
WebElement inbox = gmail.findElement(By.xpath("//*[@id=':bb']/div/div[1]"));
System.out.println(inbox.getText()); 
```

# performance - Replicate() 与 for 循环？

> ID：13412312
> 
> 赞同：7
> 
> 时间：2012-11-16T07:37:00.110
> 
> 标签：performance, r, for-loop, replicate

有谁知道 replicate() 函数在 R 中是如何工作的，以及它相对于使用 for 循环的效率如何？

例如，...之间是否存在效率差异？

```
means <- replicate(100000, mean(rnorm(50))) 
```

和...

```
means <- c()
for(i in 1:100000) { 
   means <- c(means, mean(rnorm(50)))
} 
```

（我可能在上面打了一些字，但你明白了。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T08:34:27.600

您可以对代码进行基准测试并凭经验获得答案。请注意，我还添加了第二个 for 循环风格，它通过预分配向量来规避不断增长的向量问题。

```
repl_function = function(no_rep) means <- replicate(no_rep, mean(rnorm(50)))
for_loop = function(no_rep) {
   means <- c()
   for(i in 1:no_rep) { 
      means <- c(means, mean(rnorm(50)))
   }
   means
}
for_loop_prealloc = function(no_rep) {
   means <- vector(mode = "numeric", length = no_rep)
   for(i in 1:no_rep) { 
      means[i] <- mean(rnorm(50))
   }
   means
}

no_loops = 50e3
benchmark(repl_function(no_loops), 
          for_loop(no_loops), 
          for_loop_prealloc(no_loops), 
          replications = 3)

                         test replications elapsed relative user.self sys.self
2          for_loop(no_loops)            3  18.886    6.274    17.803    0.894                          
3 for_loop_prealloc(no_loops)            3   3.209    1.066     3.189    0.000                          
1     repl_function(no_loops)            3   3.010    1.000     2.997    0.000                          
  user.child sys.child
2          0         0                                                                                  
3          0         0                                                                                  
1          0         0 
```

查看该`relative`列，未预分配的 for 循环慢了 6.2 倍。但是，预分配的 for 循环与`replicate`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T07:46:59.797

`replicate`是 的包装器`sapply`，它本身就是 的包装器`lapply`。`lapply`最终是一个`.Internal`用 C 语言编写的函数，并以优化的方式执行循环，而不是通过解释器。它的主要优点是高效的内存管理，特别是与您上面介绍的高效低效的向量增长方法相比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T17:33:51.260

我有一个非常不同的经历，`replicate`这也让我感到困惑。`replicate`当我使用比较时，经常会发生我的 R 崩溃和我的笔记本电脑挂起的情况`for`，这让我感到惊讶，正如上面提到的原因，我还期望 C 编写的函数能够胜过`for`循环。例如，如果你执行下面的函数，你会看到`for`循环比`replicate`

```
system.time(for (i in 1:10) runif(1e7))
#    user  system elapsed 
#    3.340   0.218   3.558 

system.time(replicate(10, runif(1e7)))
#    user  system elapsed 
#    4.622   0.484   5.109 
```

因此，对于`10`复制，`for`循环显然更快。如果你重复 100 次，你会得到相似的结果。**所以我想知道是否有人可以举**一个例子来说明它与`for`.

PS我还为`runif(1e7)`and 创建了一个函数，在比较中没有区别。基本上我没有提供任何显示`replicate`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-26T12:07:35.910

矢量化是它们之间的关键区别。我将托盘解释这一点。R 是一种高级解释的计算机语言。它为您处理许多基本的计算机任务。当你写

```
x <- 2.0 
```

你不必告诉你的电脑

*   “2.0”是一个浮点数；
*   “x”应该存储数字类型的数据；
*   它必须在内存中找到一个位置来放置“5”；
*   它必须将“x”注册为指向内存中某个位置的指针。

R 自己计算这些东西。

但是，对于这样舒适的问题，这是有代价的：它比低级语言慢。

在 C 或 FORTRAN 中，大部分“测试是否”将在编译步骤期间完成，而不是在程序执行期间完成。它们在编写后但在运行之前被翻译成二进制计算机语言 (0/1)。这允许编译器以最佳方式组织二进制机器代码以供计算机解释。

这与 R 中的向量化有什么关系？嗯，许多 R 函数实际上是用编译语言编写的，例如 C、C++ 和 FORTRAN，并且有一个小的 R“包装器”。这是您的方法之间的区别。`for`循环添加`test if`机器必须对数据执行的进一步操作，使其变慢

# wpf - WPF Prism - 使用 IConfirmNavigationRequest 防止选项卡切换不起作用

> ID：13412315
> 
> 赞同：3
> 
> 时间：2012-11-16T07:37:11.577
> 
> 标签：wpf, prism

当使用 RequestNavigate（即以编程方式）在 Views/ViewModels 之间导航时，适当的 ViewModels 上的 IConfirmNavigationRequest 方法会按预期调用。但是，如果您通过单击选项卡来切换 TabControl 区域中的视图，则它不会调用这些方法。

这是预期和接受的行为吗？我可以实现棱镜行为来完成这项工作吗？

任何意见，将不胜感激。

**更新**

我决定根据 Viktor 的反馈更彻底地解释这个问题。如果用户在屏幕上有未保存的编辑，我想阻止导航。切换标签恕我直言只是另一种导航方式。我希望 Prism 实现是一致的：以编程方式或其他方式导航应该具有相同的行为。

如果我要创建一个带有按钮的 ItemsControl，当单击时使用 RequestNavigate 进行导航（以有效地切换选项卡），它会起作用，但这不是问题的重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:51:46.740

我想我可以理解您的观点，并且我理解您为什么希望它调用 RequestNavigate 方法。

要回答您的问题，是的，这是设计使然，它不应该在切换选项卡时调用 RequestNavigate。**但是，您可以修改此行为以执行您想要的操作**。棱镜是开源的。您应该有源代码，您可以将项目添加到您的项目中，并轻松地逐步完成以下代码：

TabControlRegionAdapter - 使区域适应选项卡控件

```
public class TabControlRegionAdapter : RegionAdapterBase<TabControl>
    {
        /// <summary>
        /// <see cref="Style"/> to set to the created <see cref="TabItem"/>.
        /// </summary>
        public static readonly DependencyProperty ItemContainerStyleProperty =
            DependencyProperty.RegisterAttached("ItemContainerStyle", typeof(Style), typeof(TabControlRegionAdapter), null);

        /// <summary>
        /// Initializes a new instance of the <see cref="TabControlRegionAdapter"/> class.
        /// </summary>
        /// <param name="regionBehaviorFactory">The factory used to create the region behaviors to attach to the created regions.</param>
        public TabControlRegionAdapter(IRegionBehaviorFactory regionBehaviorFactory)
            : base(regionBehaviorFactory)
        {
        }

        /// <summary>
        /// Gets the <see cref="ItemContainerStyleProperty"/> property value.
        /// </summary>
        /// <param name="target">Target object of the attached property.</param>
        /// <returns>Value of the <see cref="ItemContainerStyleProperty"/> property.</returns>
        public static Style GetItemContainerStyle(DependencyObject target)
        {
            if (target == null) throw new ArgumentNullException("target");
            return (Style)target.GetValue(ItemContainerStyleProperty);
        }

        /// <summary>
        /// Sets the <see cref="ItemContainerStyleProperty"/> property value.
        /// </summary>
        /// <param name="target">Target object of the attached property.</param>
        /// <param name="value">Value to be set on the <see cref="ItemContainerStyleProperty"/> property.</param>
        public static void SetItemContainerStyle(DependencyObject target, Style value)
        {
            if (target == null) throw new ArgumentNullException("target");
            target.SetValue(ItemContainerStyleProperty, value);
        }

        /// <summary>
        /// Adapts a <see cref="TabControl"/> to an <see cref="IRegion"/>.
        /// </summary>
        /// <param name="region">The new region being used.</param>
        /// <param name="regionTarget">The object to adapt.</param>
        protected override void Adapt(IRegion region, TabControl regionTarget)
        {
            if (regionTarget == null) throw new ArgumentNullException("regionTarget");
            bool itemsSourceIsSet = regionTarget.ItemsSource != null;

            if (itemsSourceIsSet)
            {
                throw new InvalidOperationException(Resources.ItemsControlHasItemsSourceException);
            }
        }

        /// <summary>
        /// Attach new behaviors.
        /// </summary>
        /// <param name="region">The region being used.</param>
        /// <param name="regionTarget">The object to adapt.</param>
        /// <remarks>
        /// This class attaches the base behaviors and also keeps the <see cref="TabControl.SelectedItem"/> 
        /// and the <see cref="IRegion.ActiveViews"/> in sync.
        /// </remarks>
        protected override void AttachBehaviors(IRegion region, TabControl regionTarget)
        {
            if (region == null) throw new ArgumentNullException("region");
            base.AttachBehaviors(region, regionTarget);
            if (!region.Behaviors.ContainsKey(TabControlRegionSyncBehavior.BehaviorKey))
            {
                region.Behaviors.Add(TabControlRegionSyncBehavior.BehaviorKey, new TabControlRegionSyncBehavior { HostControl = regionTarget });
            }
        }

        /// <summary>
        /// Creates a new instance of <see cref="Region"/>.
        /// </summary>
        /// <returns>A new instance of <see cref="Region"/>.</returns>
        protected override IRegion CreateRegion()
        {
            return new SingleActiveRegion();
        }
    } 
```

还有，TabControlRegionSyncBehavior。 **这是您可以调用的 RequestNavigate**。

```
 public class TabControlRegionSyncBehavior : RegionBehavior, IHostAwareRegionBehavior
    {
        ///<summary>
        /// The behavior key for this region sync behavior.
        ///</summary>
        public const string BehaviorKey = "TabControlRegionSyncBehavior";

        private static readonly DependencyProperty IsGeneratedProperty =
            DependencyProperty.RegisterAttached("IsGenerated", typeof(bool), typeof(TabControlRegionSyncBehavior), null);

        private TabControl hostControl;

        /// <summary>
        /// Gets or sets the <see cref="DependencyObject"/> that the <see cref="IRegion"/> is attached to.
        /// </summary>
        /// <value>A <see cref="DependencyObject"/> that the <see cref="IRegion"/> is attached to.
        /// This is usually a <see cref="FrameworkElement"/> that is part of the tree.</value>
        public DependencyObject HostControl
        {
            get
            {
                return this.hostControl;
            }

            set
            {
                TabControl newValue = value as TabControl;
                if (newValue == null)
                {
                    throw new InvalidOperationException(Resources.HostControlMustBeATabControl);
                }

                if (IsAttached)
                {
                    throw new InvalidOperationException(Resources.HostControlCannotBeSetAfterAttach);
                }

                this.hostControl = newValue;
            }
        }

        /// <summary>
        /// Override this method to perform the logic after the behavior has been attached.
        /// </summary>
        protected override void OnAttach()
        {
            if (this.hostControl == null)
            {
                throw new InvalidOperationException(Resources.HostControlCannotBeNull);
            }

            this.SynchronizeItems();

            this.hostControl.SelectionChanged += this.OnSelectionChanged;
            this.Region.ActiveViews.CollectionChanged += this.OnActiveViewsChanged;
            this.Region.Views.CollectionChanged += this.OnViewsChanged;
        }

        /// <summary>
        /// Gets the item contained in the <see cref="TabItem"/>.
        /// </summary>
        /// <param name="tabItem">The container item.</param>
        /// <returns>The item contained in the <paramref name="tabItem"/> if it was generated automatically by the behavior; otherwise <paramref name="tabItem"/>.</returns>
        protected virtual object GetContainedItem(TabItem tabItem)
        {
            if (tabItem == null) throw new ArgumentNullException("tabItem");
            if ((bool)tabItem.GetValue(IsGeneratedProperty))
            {
                return tabItem.Content;
            }

            return tabItem;
        }

        /// <summary>
        /// Override to change how TabItem's are prepared for items.
        /// </summary>
        /// <param name="item">The item to wrap in a TabItem</param>
        /// <param name="parent">The parent <see cref="DependencyObject"/></param>
        /// <returns>A tab item that wraps the supplied <paramref name="item"/></returns>
        protected virtual TabItem PrepareContainerForItem(object item, DependencyObject parent)
        {
            TabItem container = item as TabItem;
            if (container == null)
            {
                object dataContext = GetDataContext(item);
                container = new TabItem();
                container.Content = item;
                container.Style = TabControlRegionAdapter.GetItemContainerStyle(parent);
                container.DataContext = dataContext; // To run with SL 2
                container.Header = dataContext; // To run with SL 3                  
                container.SetValue(IsGeneratedProperty, true);
            }

            return container;
        }

        /// <summary>
        /// Undoes the effects of the <see cref="PrepareContainerForItem"/> method.
        /// </summary>
        /// <param name="tabItem">The container element for the item.</param>
        protected virtual void ClearContainerForItem(TabItem tabItem)
        {
            if (tabItem == null) throw new ArgumentNullException("tabItem");
            if ((bool)tabItem.GetValue(IsGeneratedProperty))
            {
                tabItem.Content = null;
            }
        }

        /// <summary>
        /// Creates or identifies the element that is used to display the given item.
        /// </summary>
        /// <param name="item">The item to get the container for.</param>
        /// <param name="itemCollection">The parent's <see cref="ItemCollection"/>.</param>
        /// <returns>The element that is used to display the given item.</returns>
        protected virtual TabItem GetContainerForItem(object item, ItemCollection itemCollection)
        {
            if (itemCollection == null) throw new ArgumentNullException("itemCollection");
            TabItem container = item as TabItem;
            if (container != null && ((bool)container.GetValue(IsGeneratedProperty)) == false)
            {
                return container;
            }

            foreach (TabItem tabItem in itemCollection)
            {
                if ((bool)tabItem.GetValue(IsGeneratedProperty))
                {
                    if (tabItem.Content == item)
                    {
                        return tabItem;
                    }
                }
            }

            return null;
        }

        /// <summary>
        /// Return the appropriate data context.  If the item is a FrameworkElement it cannot be a data context in Silverlight, so we use its data context.
        /// Otherwise, we just us the item as the data context.
        /// </summary>
        private static object GetDataContext(object item)
        {
            FrameworkElement frameworkElement = item as FrameworkElement;
            return frameworkElement == null ? item : frameworkElement.DataContext;
        }

        private void SynchronizeItems()
        {
            List<object> existingItems = new List<object>();
            if (this.hostControl.Items.Count > 0)
            {
                // Control must be empty before "Binding" to a region
                foreach (object childItem in this.hostControl.Items)
                {
                    existingItems.Add(childItem);
                }
            }

            foreach (object view in this.Region.Views)
            {
                TabItem tabItem = this.PrepareContainerForItem(view, this.hostControl);
                this.hostControl.Items.Add(tabItem);
            }

            foreach (object existingItem in existingItems)
            {
                this.Region.Add(existingItem);
            }
        }

        private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            // e.OriginalSource == null, that's why we use sender.
            if (this.hostControl == sender)
            {
                foreach (TabItem tabItem in e.RemovedItems)
                {
                    object item = this.GetContainedItem(tabItem);

                    // check if the view is in both Views and ActiveViews collections (there may be out of sync)
                    if (this.Region.Views.Contains(item) && this.Region.ActiveViews.Contains(item))
                    {
                        this.Region.Deactivate(item);
                    }
                }

                foreach (TabItem tabItem in e.AddedItems)
                {
                    object item = this.GetContainedItem(tabItem);
                    if (!this.Region.ActiveViews.Contains(item))
                    {
                        this.Region.Activate(item);
                    }
                }
            }
        }

        private void OnActiveViewsChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Add)
            {
                this.hostControl.SelectedItem = this.GetContainerForItem(e.NewItems[0], this.hostControl.Items);
            }
            else if (e.Action == NotifyCollectionChangedAction.Remove
                && this.hostControl.SelectedItem != null
                && e.OldItems.Contains(this.GetContainedItem((TabItem)this.hostControl.SelectedItem)))
            {
                this.hostControl.SelectedItem = null;
            }
        }

        private void OnViewsChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Add)
            {
                int startingIndex = e.NewStartingIndex;
                foreach (object newItem in e.NewItems)
                {
                    TabItem tabItem = this.PrepareContainerForItem(newItem, this.hostControl);
                    this.hostControl.Items.Insert(startingIndex, tabItem);
                }
            }
            else if (e.Action == NotifyCollectionChangedAction.Remove)
            {
                foreach (object oldItem in e.OldItems)
                {
                    TabItem tabItem = this.GetContainerForItem(oldItem, this.hostControl.Items);
                    this.hostControl.Items.Remove(tabItem);
                    this.ClearContainerForItem(tabItem);
                }
            }
        }
    } 
```

当然，您必须弄清楚在哪里调用 RequestNavigate，这样您才能真正取消 TabSelectionChanging。不幸的是，WPF 中不存在此事件。[我会求助于Josh Smith How to prevent a TabItem from change](http://joshsmithonwpf.wordpress.com/2009/09/04/how-to-prevent-a-tabitem-from-being-selected/)推荐的技巧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:45:24.173

我从您的问题中了解到的是，您希望切换选项卡调用 IConfirmNavigationRequest。当您从实现此接口的视图/视图模型导航时，将调用此接口的方法。

但是，您在 TabControl 中切换选项卡时遇到的不是导航请求。TabControl 中的所有视图都已经处理了导航操作，并且所有视图都已经在 TabControl(Your Region) 中。那么当你切换标签时你会做什么呢？您只在您的区域内激活视图。以前活动的视图被停用。

我真的不知道你想完成什么。我无法想象我为什么要阻止某人切换标签。但是你可以通过使用 IActiveAware 接口来尝试。你可以从这个[博客中得到这个想法](http://not-now-nigel.blogspot.cz/2011/09/using-iactiveaware-and-inavigationaware.html)

**编辑**

1.  实现 OnDeactivate 以在停用视图之前询问用户是否要保存更改

2.  实现 OnActivate 以调用 RequestNavigate 到已经存在的视图。您可以在 Prism[文档](http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec11)中阅读有关导航到现有视图的信息。

3.  禁用所有其他 tabItems 并在保存更改后再次启用它们（不好的方法）

我真的不是专家，但我认为您没有更多选择了

# php - PHP，MySql 按下添加按钮后填充选择框并将数据发送到数据库

> ID：13412320
> 
> 赞同：1
> 
> 时间：2012-11-16T07:37:44.673
> 
> 标签：php, mysql, drop-down-menu

我有两个选择框我可以将我的选择从第一个框添加到第二个框第二个删除第二个框到第一个框。我可以从第一个框中添加所有选项，但不能从第二个框中删除所有选项（那里至少有一个选项）。

现在我如何在数据库中发送这些数据。请给我解决方案。

# javascript - 如何区分 CRM 2011 JScript 中的手动保存和编程保存

> ID：13412321
> 
> 赞同：0
> 
> 时间：2012-11-16T07:37:51.790
> 
> 标签：javascript, dom-events, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我有一个`onSave`记录在案的 Javascript 代码。我需要通过**单击保存按钮**或以**编程**方式保存（如`Xrm.Page.data.entity.save()`.

我们是否有一个 JScript 代码来获取事件的源代码控制，即事件生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:18:01.470

如果没有关于上下文的这些信息，为什么不在显式调用 entity.save 的 JavaScript 函数中设置变量？然后，您可以从任何其他 JavaScript 函数中检查它以确定“上下文”。这是一个有点骇人听闻的全球标志，但它会完成这项工作。

如果您需要在插件中获取此“上下文”，您可以`submitMode('always')`在保存在自定义 JavaScript 中并在加载时重置之前设置的表单设置上创建一个隐藏属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:16:00.180

你有没有尝试过这样的事情：[https ://community.dynamics.com/product/crm/f/117/t/58773.aspx](https://community.dynamics.com/product/crm/f/117/t/58773.aspx)

# ios - App Store可以不将美元转换为当地货币吗？

> ID：13412323
> 
> 赞同：3
> 
> 时间：2012-11-16T07:37:56.930
> 
> 标签：ios, itunes, app-store-connect, in-app-purchase

我有一个有 IAP 的应用程序。它的 0.99 美元。但是应用商店将美元转换为当地货币。我不希望它进行电子转换。我检查了itunesconnect。但我没有找到任何将价格固定为美元的东西。是否可以将货币固定为美元？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:00:08.520

您不能这样做，原因有很多：

*   首先，消费者不必知道当地日常货币兑换美元的汇率。定价信息不应混淆，因此应使用用户的自然货币

*   此外，各国的 AppStore 商品消费价格也不相同。这不仅仅是为了让它们看起来不错（即 0.99 美元 ~ 0.79 欧元，而不是当前费率的 0.7761 欧元），Apple 还考虑了增值税和当地、特定国家/地区特定税种的变化，以便全税- 包括开发人员的最终剪辑在各个国家/地区大致相同。因此，例如，法国客户会为同样的商品支付比美国客户更多的费用，因为苹果必须支付 15% 的收入。

因此，例如 .99$ = .7761€ 和 .7761€ + 15% = .8925€ ~ .89€（这是在美国销售 0.99 美元的法国应用商店的实际价格）= 1.13$

因此，以 0.99 美元出售的东西实际上以 1.13 美元的价格出售给您的客户

底线：如果你担心你的最终剪辑，不要担心。无论您在哪个国家/地区销售，您都将获得大约 70% 的美国价格。

# objective-c - 让图像旋转直到停止 - Xcode Mac App

> ID：13412326
> 
> 赞同：2
> 
> 时间：2012-11-16T07:37:58.563
> 
> 标签：objective-c, ios, xcode

我有一个齿轮的 png，我想像 NSProgressIndicator 一样做出反应，这样当一个进程发生时，它会旋转，当什么都没有发生时，它会停止。我是 Xcode 的新手，如果我弄错了术语或者只是看起来很愚蠢，很抱歉……这是一个 mac 应用程序，所以我猜它与 iOS 应用程序开发不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:50:44.867

在这里，您有一个最近编写的指南，可以**[准确地做您想做的事情](http://chamelo.co.uk/spin-it)**

如果您需要其中的一些解释，请告诉我！

# sql - 加入空值

> ID：13412327
> 
> 赞同：0
> 
> 时间：2012-11-16T07:37:59.917
> 
> 标签：sql, sql-server, join

我有两个表父子表，子表包含外键约束。

现在我想从连接到父表的子表中获取数据，并且还想从子表中获取父表 id 为空的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:39:04.463

```
 select *
     from child c
left join parent p on c.id = c.parent_id; 
```

# php - 如何在 Magento 中自动创建运输

> ID：13412333
> 
> 赞同：1
> 
> 时间：2012-11-16T07:38:32.217
> 
> 标签：php, magento

我需要更改 Magento 默认工作流程。因此，我应该在客户购买商品后立即自动创建运费。（当客户看到收据页面时）。我不确定我应该从哪里开始。我开始在谷歌上搜索一些扩展名，但现在没有运气。这就是我来这里的原因。有谁知道我可以从哪里开始解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-12T15:02:51.687

你不应该把这种代码放在视图文件中。除了一般来说这是不好的做法，正如@user2729065 提到的：如果客户在付款后没有返回感谢页面，代码将不会运行。更好的是创建一个带有观察者的自定义模块。为此，请将以下代码添加到您的模块 etc/config.xml 文件中：

```
<global>
    <events>
        <sales_order_invoice_pay>
            <observers>
                <[my]_[module]_automatically_complete_order>
                    <class>[module]/observer</class>
                    <method>automaticallyShipCompleteOrder</method>
                </[my]_[module]_automatically_complete_order>
            </observers>
        </sales_order_invoice_pay>
    </events>
</global> 
```

将 my_module 更改为您的模块名称。这将在支付发票时触发。

然后在 My/Module/Model/Observer.php 中创建 Observer

```
<?php

class My_Module_Model_Observer
{
/**
 * Mage::dispatchEvent($this->_eventPrefix.'_save_after', $this->_getEventData());
 * protected $_eventPrefix = 'sales_order';
 * protected $_eventObject = 'order';
 * event: sales_order_invoice_pay
 */
public function automaticallyShipCompleteOrder($observer)
{
    $order = $observer->getEvent()->getInvoice()->getOrder();

    if ($order->getState() == Mage_Sales_Model_Order::STATE_PROCESSING) {

        try {
            $shipment = $order->prepareShipment();
            $shipment->register();

            $order->setIsInProcess(true);
            $order->addStatusHistoryComment('Shippment automatically created.', false);

             Mage::getModel('core/resource_transaction')
                ->addObject($shipment)
                ->addObject($shipment->getOrder())
                ->save();
        } catch (Exception $e) {
            $order->addStatusHistoryComment('Could not automaticly create shipment. Exception message: '.$e->getMessage(), false);
            $order->save();
        }
    }

    return $this;
} 
```

}

这将检查订单是否仍在处理中（付款后的状态。）。如果是这样，请尝试创建货件。创建货件后，订单将自动将其状态更改为已完成。

如果您希望在下订单后（在创建发票并付款之前）直接创建货件，请更改

```
<sales_order_invoice_pay> 
```

在

```
<sales_order_place_after> 
```

在 config.xml 中。因为这个观察者返回的是订单而不是发票，所以也要改变：

```
$order = $observer->getEvent()->getInvoice()->getOrder(); 
```

到

```
$order = $observer->getEvent()->getOrder(); 
```

代码基于[Incho](http://inchoo.net/magento/magento-orders/automatically-invoice-ship-complete-order-in-magento/)的一个示例，因此大部分功劳归于他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:17:08.817

我找到了解决方案。我想这不是最好的方法，但它确实有效。

在文件 your_theme_name/template/checkout/success.phtml

添加此代码

```
<?php
$orderId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
$order = Mage::getModel('sales/order') -> loadByIncrementId($orderId);

if ($order -> canShip()) {
    $itemQty = $order -> getItemsCollection() -> count();
    $shipment = Mage::getModel('sales/service_order', $order) -> prepareShipment($itemQty);
    $shipment = new Mage_Sales_Model_Order_Shipment_Api();
    $shipmentId = $shipment -> create($orderId);
}
?> 
```

这将在收据页面上为订单添加运费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T11:29:22.040

将代码放入模板是一个非常糟糕的主意：它将运输代码添加到您的模板/视图中。此功能不属于那里。（例如：如果付款在 5 分钟后确认，则无效）。

解决方案是为 Payment-Success 事件编写一个观察者：http: [//inchoo.net/ecommerce/magento/magento-orders/automatically-invoice-ship-complete-order-in-magento/](http://inchoo.net/ecommerce/magento/magento-orders/automatically-invoice-ship-complete-order-in-magento/)

# android - 多个片段不能切换

> ID：13412336
> 
> 赞同：0
> 
> 时间：2012-11-16T07:38:55.207
> 
> 标签：android, fragment

在我的应用程序中，我有多个片段，但我无法在片段之间切换。当我单击 button1 时，它会显示正确的片段。但是当我点击button2时，它没有显示相应的片段。

以下是我的相关代码：

```
fragmentM = getFragmentManager();
transation = fragmentM.beginTransaction();
@Override
public void onClick(View v) {
// TODO Auto-generated method stub
switch(v.getId()){
case R.id.search:
break;
case R.id.btnun:
detail = new DetailFragment();
transation.add(R.id.fragment_container, detail);
transation.addToBackStack(null);
transation.commit();
break;
case R.id.btnch:
detailt = new DetailtFragment();
transation.replace(R.id.fragment_container, detailt);
transation.addToBackStack(null);
transation.commit();
break;
｝ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:58:56.557

在您的代码中，两个按钮都在创建一个`DetailFragment`，因此始终存在相同的片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:11:31.807

它们似乎是不同类别的 Fragment，所以我认为没关系。

您应该尝试将 getFragmentManager.beginTransaction() 行移动到 onClick 方法的开头。我的理解是，您每次想要进行更改时都需要进行新的交易。

# css - Internet Explorer 忽略 CSS 字体大小（但并非无处不在）

> ID：13412338
> 
> 赞同：1
> 
> 时间：2012-11-16T07:39:02.660
> 
> 标签：css, wordpress, internet-explorer, font-size

我一直在尝试为我的（由 wordpress 驱动的）网站提供跨所有平台和浏览器的标准外观。我想我快到了，但是 Internet Explorer 有一个奇怪的问题。

除了 IE，它的字体大小在所有东西上看起来都很好，它很大。我知道这是 IE/CSS 怪癖的一个相当普遍的问题，但是我无法使用在这个论坛或其他地方找到的任何修复来解决它（例如，我已将所有字体大小更改为 .em 而不是像素）。

我知道当您使用验证器时会出现许多错误，但我没有看到任何似乎导致它的错误。

更糟糕的是，在查看单个帖子时，一切都会完美呈现（而且只有帖子——当你看到一个页面时仍然很奇怪）。我已经尝试逐行浏览 html 以尝试弄清楚 single.php 上没有其他任何内容的内容（反之亦然），但结果不足。IE 似乎对我对字体所做的几乎所有更改都没有反应。

我的网站是[http://andrewkurjata.ca](http://andrewkurjata.ca)如果有人能够弄清楚的话。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:21:56.497

如果您查看源代码，那么您会发现以下代码

```
<h1> 
                <h1><a href="http://andrewkurjata.ca/blog">AndrewKurjata.ca</a> 
</h1> 
```

现在在这里你已经开始了两个 < h1 > 并且只结束了一个......在 Firefox 和其他浏览器中它会自动关闭第一个 < h1 >。但在 IE8 中它没有关闭。

所以内部 < h1 > 占外部 < h1 > 的 160%，给你更大的尺寸问题

**去掉一个h1即可解决**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:20:45.787

也许 CSS 重置可能对你[有用 http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

# android - 单击项目列表视图中的按钮时如何在android中的列表视图中添加/删除项目

> ID：13412341
> 
> 赞同：6
> 
> 时间：2012-11-16T07:39:19.527
> 
> 标签：android, android-layout

我是一个新手android。我的迷你应用程序有一些问题。你可以看到下图：http: [//i481.photobucket.com/albums/rr175/viethungit/android.png](http://i481.photobucket.com/albums/rr175/viethungit/android.png)

首先，当单击第1行中的按钮添加时，第1行（布局1）出现listview，出现第2行（布局2），然后继续...单击按钮添加到第1行，布局2出现在listview中......我尝试搜索来自 Google 先生，但我没有找到...任何人都可以帮助我！

这是布局，我不知道如何实现的活动

```
add_item.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#EEEEEE"
    android:orientation="horizontal"
    android:padding="5dip">

    <!-- Image Item-->
    <ImageButton
            android:id="@+id/imgItem"
            android:layout_width="40dip"
            android:layout_height="40dip"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="2dp"
            android:contentDescription="@string/imgView"  />

    <!-- Name item  -->

    <EditText
        android:id="@+id/edtItem"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/imgItem"
        android:background="@drawable/bg"
        android:hint="@string/txtTitle"
        android:textSize="20dip" />   

    <!-- Button add -->
    <Button        
        android:id="@+id/btnAdd"
        android:background="@drawable/add"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"/>
    <!-- item -->
    <TextView
        android:id="@+id/txtSubtitle"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_toLeftOf="@+id/btnAdd"
        android:gravity="right|center_vertical"
        android:layout_centerVertical="true"
        android:textSize="20dip"
        android:text="@string/txtSubtitle" />

</RelativeLayout>

plus_item.xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#EEEEEE"
    android:orientation="horizontal"
    android:padding="5dip" >

    <!-- Image Item -->
    <ImageView
        android:id="@+id/imgItem"
        android:src="@drawable/chomsao"
        android:layout_width="40dip"
        android:layout_height="40dip"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="2dp"
        android:contentDescription="@string/imgView" />

    <!-- Name Item -->
    <TextView
        android:id="@+id/edtItem"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/imgItem"
        android:layout_centerVertical="true"
        android:gravity="center_vertical"
        android:text="@string/txtTitle"
        android:textSize="20dip" />

    <!-- Quantity Item -->
    <TextView 
        android:id="@+id/txtQtyItem"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_toRightOf="@id/edtItem"
        android:layout_marginLeft="20dp"
        android:gravity="center_vertical"
        android:textSize="20dip"
        android:text="@string/QuantityItem"/>

    <!-- Button plus -->
    <Button
        android:id="@+id/btnPlus"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/plus" />

    <!-- Button minus -->
    <Button
        android:id="@+id/btnMinus"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_centerVertical="true"
        android:layout_alignBaseline="@id/btnPlus"
        android:layout_toLeftOf="@+id/btnPlus"
        android:background="@drawable/minus" />

    <!-- Price Item -->
    <TextView
        android:id="@+id/txtSubtitle"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/btnMinus"
        android:gravity="right|center_vertical"
        android:text="@string/txtSubtitle"
        android:textSize="20dip" />

</RelativeLayout>

activity_main.xml
        <RelativeLayout 
        android:id="@+id/relative1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/relative"
        android:layout_above="@id/relative2"
        android:background="#EEEEEE"
        android:layout_marginLeft="1.5dp"
        android:layout_marginRight="1.5dp"
        android:layout_marginTop="1.5dp">

        <ListView
            android:id="@+id/listSale"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>        
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T08:07:46.163

```
public class AndroidCustomListViewActivity extends Activity {
    private ListView myList;
    private MyAdapter myAdapter;
    private ImageView myImage;
    public static  String upload= " ";
    public static String GalleryImage;
    public ArrayList<ListItem> myItems = new ArrayList<ListItem>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listandimage);

        myList = (ListView) findViewById(R.id.MyList);
        myImage= (ImageView)findViewById(R.id.image1);

        myList.setItemsCanFocus(true);
        myAdapter = new MyAdapter();

        ListItem listItem = new ListItem();
        listItem.textdata="@";
        listItem.caption = "";
        myItems.add(listItem);

        myList.setAdapter(myAdapter);
        myAdapter.notifyDataSetChanged();

    }

    public class MyAdapter extends BaseAdapter {
        private LayoutInflater mInflater;

        public MyAdapter() {
            mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        }

        public int getCount() {
            return myItems.size();
        }

        public ListItem getItem(int position) {
            return myItems.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
            final ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.item, null);
                holder.text=(TextView )convertView.findViewById(R.id.textView1); 
                holder.captionEditText = (EditText) convertView.findViewById(R.id.ItemCaption);

                holder.addOrDeleteButton = (Button) convertView.findViewById(R.id.buttonAdd);

                holder.captionEditText.setFocusable(true);
                holder.captionEditText.requestFocus();

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            // Fill EditText with the value you have in data source
            // holder.captionEditText.setId(position);
            holder.text.setTag(position);
            holder.captionEditText.setTag(position);
            holder.captionEditText.setText(getItem(position).caption);

            holder.addOrDeleteButton.setTag(position);

            // / this updates tag of
            // the button view as we
            // scroll ///

            holder.addOrDeleteButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View view) {
                    // TODO Auto-generated method stub
                    int tag = (Integer) view.getTag();
                    if (tag != (myItems.size() - 1)) {
                        myItems.remove(tag);
                        Log.d("GCM", "Item removed from " + tag);
                        myAdapter.notifyDataSetChanged();
                    } else {
                        ListItem listItem = new ListItem();
                        listItem.textdata="@";
                        listItem.caption = "";
                        myItems.add(listItem);

                        /*
                         * Log.d("GCM", holder.captionEditText.getText()
                         * .toString()); myItems.get((Integer)
                         * view.getTag()).caption = holder.captionEditText
                         * .getText().toString();
                         */
                        myAdapter.notifyDataSetChanged();
                        myList.setSelection(myAdapter.getCount() - 1);
                        // holder.captionEditText.setFocusable(true);
                        // holder.captionEditText.requestFocus();

                    }
                }
            });

            holder.captionEditText.addTextChangedListener(new TextWatcher() {

                public void onTextChanged(CharSequence s, int start,
                        int before, int count) {
                    // TODO Auto-generated method stub

                }

                public void beforeTextChanged(CharSequence s, int start,
                        int count, int after) {
                    // TODO Auto-generated method stub

                }

                public void afterTextChanged(Editable s) {
                    // if(position < myItems.size())
                    // getItem(position).caption = s.toString();

                    myItems.get((Integer) holder.captionEditText.getTag()).caption = holder.captionEditText
                            .getText().toString();

                }
            });

            if (position != (myItems.size() - 1)) {
                holder.addOrDeleteButton.setBackgroundResource(R.drawable.fruttarecloseicon);
            } else {
                holder.addOrDeleteButton.setBackgroundResource(R.drawable.fruttareaddicon);
                holder.text.setFocusable(true);
                holder.captionEditText.setFocusable(true);
                holder.text.requestFocus();
                holder.captionEditText.requestFocus();

            }

            return convertView;
        }

    }

    class ViewHolder {

        TextView text;
        EditText captionEditText;
        Button addOrDeleteButton;
    }

    class ListItem {
        String textdata;
        String caption;
    }
} 
```

使用此代码根据您的需要进行编辑。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
     >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="15dp"
        android:layout_height="50dp"
        android:text=" @"
       />

    <EditText
        android:id="@+id/ItemCaption"
        android:layout_width="270dp"
        android:layout_height="50dp"
        android:layout_margin="3dip"
        android:imeOptions="actionDone|flagNoExtractUi"
        android:inputType="textNoSuggestions"
        android:singleLine="true" >
    </EditText>

    <Button
        android:id="@+id/buttonAdd"
        android:layout_width="75dp"
        android:layout_height="50dp"
        android:layout_margin="3dip"
        />

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#fff"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/MyList"
        android:layout_width="370dp"
        android:layout_height="160dp"
        android:layout_gravity="center|top"
        android:layout_marginLeft="150dp"
        android:descendantFocusability="beforeDescendants" 
             >
    </ListView>

    <ImageView
        android:id="@+id/image1"
        android:layout_width="80dp"
        android:layout_height="80dp"

         />

</LinearLayout> 
```

如果有用，请标记答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:57:16.053

您可以创建元素（如按钮、视图等）并将它们添加到现有视图中，例如：

```
myListView.addChild(CreatedButton); 
```

# python - 如何从MYSQL数据库中选择具有多个id的记录

> ID：13412344
> 
> 赞同：0
> 
> 时间：2012-11-16T07:39:21.723
> 
> 标签：python, mysql

我正在使用 python 和 MYSQL 获取数据，我知道这是一个基本问题，但我找不到它。

我有一个从 python 中的某些字典生成的 id 列表，例如示例

```
dic = {'1': u'', '3': u'', '2': u'', '4': u''}
lis_ids = dic.keys()

query = "SELECT * FROM File_upload where id IN %s" % [int(i) for i in a]

print query 
```

**结果**

```
"SELECT * FROM File_upload where id IN [1, 3, 2, 4]" 
```

上面的结果会显示语法错误，因为实际上它应该如下所示

```
"SELECT * FROM File_upload where id IN (1, 3, 2, 4)" 
```

我们如何在 python 中将列表转换为元组，因为我从列表中获取 id。

**编辑代码**

实际上这是我得到的第二种情况

我的字典是

```
dic = {'submit': u'', '1': u'', '3': u'', '2': u'', '4': u'', 'groups': {}}
lis_ids = dic.keys() 
```

实际上我们会得到`submit`并且`groups`也会进入列表，但我只想要整数键作为 id

所以我也想实现这个功能`if not len(key) > 1 take the key`

那么任何人都可以在如下一行中实现所有这些功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:02:01.217

尝试这个：

```
dic = {'submit': u'', '1': u'', '3': u'', '2': u'', '4': u'', 'groups': {}}
list_ids = [elem for elem in dic.keys() if elem.isdigit()]

query = "SELECT * FROM File_upload where id IN (%s)" % ','.join(list_ids)

print query 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:44:01.763

尝试这个：

```
query = "SELECT * FROM File_upload where id IN %s" % str(tuple(int(i) for i in a)) 
```

（`str()`不幸的是，调用是必需的；没有它你会得到一个 TypeError 。）

* * *

如果您只想获取可转换为整数的键，请尝试以下操作：

```
def only_numbers(seq):
    for i in seq:
        try:
            yield int(i)
        except ValueError:
            pass

query = "SELECT * FROM File_upload where id IN %s" % str(tuple(only_numbers(dic.keys()))) 
```

这并不简单，因为您必须尝试将每个键转换为整数并什么都不做来处理错误，因此我们需要一个生成器函数来处理它的那部分。

# c# - 从 Web 项目之外的程序集中获取类

> ID：13412349
> 
> 赞同：1
> 
> 时间：2012-11-16T07:39:49.167
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, automapper

我正在使用`ASP.NET MVC 4`,`C#`和`AutoMapper`. 在我的 global.asax.cs 中，我试图从另一个项目（我的网络应用程序中引用的 C# 项目）注册我的映射。

在这个其他项目中，我有我的映射，这是一个示例类：

```
namespace MyProject.Web.Core.Mappings
{
     public class EmployeeMapping
     {
          public EmployeeMapping()
          {
               Mapper.CreateMap<Employee, EmployeeInfoViewModel>();
          }
     }
} 
```

在我的 global.asax.cs 中，我有一个要加载这些映射的方法。下面的代码我上网了，但它没有选择我的映射类，在这种情况下是 EmployeeMapping：

```
protected void AutoMapperConfig()
{
     string mappingNamespace = "MyProject.Web.Core.Mappings";

     var q = from t in Assembly.GetAssembly(typeof(string))
             where t.IsClass && t.Namespace == mappingNamespace
             select t;

     q.ForEach(t => Debug.WriteLine(t.Name));
} 
```

如何在特定命名空间中获取我的类（来自 Web 项目以外的另一个项目）并使用`Activator.CreateInstance`？

我想要的只是给定命名空间中指定的类的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:43:46.517

> 如何在特定命名空间中获取我的类（来自 Web 项目以外的另一个项目）并使用 Activator.CreateInstance？

假设您知道程序集中的*一种*类型，您可以使用：

```
var types = typeof(TheTypeYouKnowAbout).Assembly.GetTypes()
                .Where(t => t.Namespace == "TheNamespaceYouWant");
                // Possibly add more restrictions, e.g. it must be
                // public, and a class rather than an interface, and
                // must have a public parameterless constructor...
foreach (var type in types)
{
    // Do something with the type
} 
```

（如果您可以提供有关您正在尝试做的事情的更多信息，那么更详细地帮助您会更容易。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:50:47.617

调用时`Assembly.GetAssembly(typeof(string))`，它会加载 mscorlib.dll 中的类型，并且您提供的 linq 查询不会返回任何内容。您需要使用`typeof(EmployeeMapping).Assembly`or加载程序集`Assembly.GetAssembly(typeof(EmployeeMapping))`或`Assembly.LoadFrom("YourAssemblyName.dll")`以查询该特定程序集的类型。

编辑：

要进一步回答您的问题...假设您知道负责映射的所有类型以及它们所包含的程序集。

```
protected void AutoMapperConfig()
{
    const string mappingNamespace = "MyProject.Web.Core.Mappings";

    //There are ways to accomplish this same task more efficiently.
    var q = (from t in Assembly.LoadFrom("YourAssemblyName.dll").GetExportedTypes()
             where t.IsClass && t.Namespace == mappingNamespace
             select t).ToList();

    //Assuming all the types in this namespace have defined a
    //default constructor. Otherwise, this iterative call will
    //eventually throw a TypeLoadException (I believe) because
    //the arguments for any of the possible constructors for the
    //type were not provided in the call to Activator.CreateInstance(t) 
    q.ForEach(t => Activator.CreateInstance(t));
} 
```

但是，如果您在 Web 项目中引用程序集...如果在编译时类型未知，我将使用以下或某种 IoC/DI 框架来实例化映射类。

```
protected void AutoMapperConfig()
{
    Mapper.CreateMap<Employee, EmployeeInfoViewModel>();
    //Repeat the above for other "mapping" classes.
    //Mapper.CreateMap<OtherType, OtherViewModel>();
} 
```

编辑首先给出@Brendan Vogt 评论：

```
public interface IMappingHandler
{
}

//NOTE: None of this code was tested...but it'll be close(ish)..

protected void AutoMapperConfig()
{
    //If the assemblies are located in the bin directory:
    var assemblies = Directory.GetFiles(HttpRuntime.BinDirectory, "*.dll");

    //Otherwise, use something like the following:
    var assemblies = Directory.GetFiles("C:\\SomeDirectory\\", "*.dll");

    //Define some sort of other filter...a base type for example.
    var baseType = typeof(IMappingHandler);

    foreach (var file in assemblies)
    {
        //There are other ways to optimize this query.
        var types = (from t in Assembly.LoadFrom(file).GetExportedTypes()
                     where t.IsClass && !t.IsAbstract && baseType.IsAssignableFrom(t)
                     select t).ToList();

        //Assuming all the queried types defined a default constructor.
        types.ForEach(t => Activator.CreateInstance(t));
    }
} 
```

# php - 检查用户是否登录另一个域

> ID：13412350
> 
> 赞同：0
> 
> 时间：2012-11-16T07:39:54.260
> 
> 标签：php, session, curl, symfony-1.4, sessionid

我在我的网站中使用远程登录功能从我的网站登录到 onapp 服务器。这实际上将使用 CURL 获取表单并使用用户名和密码提交它。它工作正常。现在我的网站为单个用户提供了不同的服务，因此 onapp 服务器中有多个帐户。所以我需要一种方法来检查onapp服务器中是否存在会话（如果用户已经登录）。如果用户已经登录onapp，将不允许再次登录并显示已经有用户已登录。因此需要注销用户并使用新凭据登录。知道如何做到这一点。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:02:12.780

这个我觉得可以帮到你

```
// REST Server URL
$request_url = 'http://localhost:3000/rest_api/user/login';

// User data 
$user_data = array('username' => 'jimthunderbird',    
  'password' => '123456', );

// cURL 
$curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, $request_url); 
curl_setopt($curl, CURLOPT_POST, 1); 
// Do a regular HTTP POST 
curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($user_data)); // Set POST data
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);

$response = curl_exec($curl);

print $response;

$http_code = curl_getinfo($curl, CURLINFO_HTTP_CODE); 
// Check if login was successful 
if ($http_code == 200) {   
     // Convert json response as array   
     $logged_user = json_decode($response); 
} else { 
    // Get error msg   
    $http_message = curl_error($curl);  
    die($http_message); 
}

print_r($logged_user); 
```

# java - Quartz调度器cron表达式超过1周

> ID：13412351
> 
> 赞同：0
> 
> 时间：2012-11-16T07:39:57.737
> 
> 标签：java, quartz-scheduler, cronexpression

如何使用quartz schduler中的cron表达式在每2周或更长时间的星期日、星期三、星期五安排任务。我的日程安排可能从一天中的任何一天开始。我知道1周内我们可以使用以下cron表达式-Cron格式0 0 12 ? * WED,FRI,SUN * 开始时间 2012 年 11 月 16 日星期五上午 7:34

1.  2012 年 11 月 16 日星期五下午 12:00
2.  2012 年 11 月 18 日星期日 12:00 PM
3.  2012 年 11 月 21 日星期三下午 12:00
4.  2012 年 11 月 23 日星期五下午 12:00
5.  2012 年 11 月 25 日星期日 12:00 PM 但是，我不知道如何每两周或更长时间执行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:53:37.130

好吧，恐怕仅使用 cron 表达式是不可能的。查看有关[How-To: Trigger That Executes Every 2 Weeks](http://quartz-scheduler.org/documentation/quartz-2.x/cookbook/BiWeeklyTrigger)的文档。

# knockout.js - 动态设置模板名称

> ID：13412355
> 
> 赞同：0
> 
> 时间：2012-11-16T07:40:22.317
> 
> 标签：knockout.js

当下拉选择的值发生变化时如何动态设置 KO 模板名称..

我试过这个，但我没有得到正确的模板。

```
<select data-bind="options: Attributes, optionsText: 'AttributeName', optionsValue: 'Id', optionsCaption: 'Select Attribute...',value :SelectedAttribute"></select>
<div data-bind="template: { name: SelectedAttribute }"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:48:09.073

您应该确保它`SelectedAttribute`不为 null 并添加`()`到 observable 以获取其值：

```
<!-- ko if: SelectedAttribute -->
<div data-bind="template: { name: SelectedAttribute() }"></div>
<!-- /ko --> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/HUExe/](http://jsfiddle.net/vyshniakov/HUExe/)

在我看来，`template`绑定不会解开传递给 name 选项的值。

# tfs - TFS2010 Alerts Explorer 硬编码电子邮件地址

> ID：13412357
> 
> 赞同：0
> 
> 时间：2012-11-16T07:40:27.413
> 
> 标签：tfs, tfs-alerts

TFS 警报资源管理器对电子邮件地址进行了硬编码，是否有人说我们不能对电子邮件地址进行硬编码？它直接发送电子邮件。以下场景的问题。

如果团队项目是“test-Project”，工作项类型是“bug”并且分配给“任何人”，那么它会自动将电子邮件发送给“任何人”。

表示分配给的任何内容。它必须将邮件发送给被分配的那个人。

问题是在警报资源管理器中手动输入电子邮件地址。

有一种方法可以自动发送电子邮件

对不起，我的英语不好 。抱歉，如果我无法将我的问题定义为我的英语是一周。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:07:49.350

在 Tfs 2010 中，您需要使用服务器插件来实现这一点，您可以[自己编写](https://stackoverflow.com/questions/6886834/tfs-2010-email-alerts)或使用已经存在的众多免费提供的插件之一。

[团队警报](http://fszlin.dymetis.com/post/2011/03/22/Event-Notification-Plugin-for-TFS-2010.aspx)

[Tfs 全局警报](https://tfsalerts.codeplex.com/)

在 Tfs 2012 中，您可以使用新功能之一的组警报。

# asp.net - 在 ClientScript 函数中使用 Javascript if/then/else

> ID：13412358
> 
> 赞同：0
> 
> 时间：2012-11-16T07:40:34.547
> 
> 标签：asp.net, javascript-events, javascript

我对 java Script 不太熟悉，因此我需要您的帮助和建议！单击时，我的 asp 按钮中有以下代码。当显示确认框时，用户有两个选择可以选择“确定”或“取消”。以下代码适用于 OK 或 Cancel 两种情况。

```
 protected void cancel_Click(object sender, EventArgs e)
    {
        string url = "../../Default.aspx";

        ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "confirm('Data is not saved'); window.location.href = '" + url + "';", true);
    } 
```

但是，我想做的是在 ClientScript 函数中使用 javascript 执行 if/then/else 语句，但我不知道它的正确语法。例如我正在尝试做的事情

```
ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "javascript:if(confirm('Data is not saved')== true) return {document.location.href = '../../Default.aspx'}; else {document.location.href = '../../Current.aspx'};", true); 
```

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:57:17.130

在添加服务器端之前尝试脚本，这样更容易调试。

这里有两种写`if`语句的方法；

```
if (confirm('Data is not saved')) {
 window.location.href = '../../Default.aspx';
} else {
 window.location.href = '../../Current.aspx';
} 
```

甚至;

```
window.location.href = confirm('Data is not saved') ?
    '../../Default.aspx' : '../../Current.aspx'; 
```

**更新**

```
<asp:Button ID="cancel" runat="server" Text="Cancel" CausesValidation="false"
  onClientClick="window.location.href = confirm('Data is not saved') ? '../../Default.aspx' : '../../Current.aspx';"
/> 
```

另请注意，您应该使用[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)而不是[document.location](https://developer.mozilla.org/en-US/docs/DOM/document.location)。

# c# - 使用 ReferenceLoopHandling.Ignore 序列化循环依赖 ISerializable 对象时引发 StackOverflowException

> ID：13412359
> 
> 赞同：7
> 
> 时间：2012-11-16T07:40:35.317
> 
> 标签：c#, .net, json, serialization, json.net

我有一个使用二进制序列化来持久化数据的遗留应用程序。现在我们想使用 Json.net 4.5 来序列化数据，而不需要对现有类进行太多更改。

在我们遇到循环依赖类之前，一切都很好。有什么办法可以解决这个问题吗？

示例代码如下图

```
[Serializable]
class Department : ISerializable
{
    public Employee Manager { get; set; }
    public string Name { get; set; }

    public Department() { }
    public Department( SerializationInfo info, StreamingContext context )
    {
        Manager = ( Employee )info.GetValue( "Manager", typeof( Employee ) );
        Name = ( string )info.GetValue( "Name", typeof( string ) );
    }
    public void GetObjectData( SerializationInfo info, StreamingContext context )
    {
        info.AddValue( "Manager", Manager );
        info.AddValue( "Name", Name );
    }
}

[Serializable]
class Employee : ISerializable
{
    [NonSerialized] //This does not work
    [XmlIgnore]//This does not work
    private Department mDepartment;
    public Department Department
    {
        get { return mDepartment; }
        set { mDepartment = value; }
    }

    public string Name { get; set; }

    public Employee() { }
    public Employee( SerializationInfo info, StreamingContext context )
    {
        Department = ( Department )info.GetValue( "Department", typeof( Department ) );
        Name = ( string )info.GetValue( "Name", typeof( string ) );
    }

    public void GetObjectData( SerializationInfo info, StreamingContext context )
    {
        info.AddValue( "Department", Department );
        info.AddValue( "Name", Name );
    }
} 
```

和测试代码

```
Department department = new Department();
department.Name = "Dept1";

Employee emp1 = new Employee { Name = "Emp1", Department = department };
department.Manager = emp1;

Employee emp2 = new Employee() { Name = "Emp2", Department = department };
IList<Employee> employees = new List<Employee>();
employees.Add( emp1 );
employees.Add( emp2 );

var memoryStream = new MemoryStream();
var formatter = new BinaryFormatter();
formatter.Serialize( memoryStream, employees );

memoryStream.Seek( 0, SeekOrigin.Begin );
IList<Employee> deserialisedEmployees = formatter.Deserialize( memoryStream ) as IList<Employee>; //Works nicely

JsonSerializerSettings jsonSS= new JsonSerializerSettings();
jsonSS.TypeNameHandling = TypeNameHandling.Objects;
jsonSS.TypeNameAssemblyFormat = FormatterAssemblyStyle.Full;
jsonSS.Formatting = Formatting.Indented;
jsonSS.ReferenceLoopHandling = ReferenceLoopHandling.Ignore; //This is not working!!
//jsonSS.ReferenceLoopHandling = ReferenceLoopHandling.Serialize; //This is also not working!!
jsonSS.PreserveReferencesHandling = PreserveReferencesHandling.All;
string jsonAll = JsonConvert.SerializeObject( employees, jsonSS ); //Throws stackoverflow exception 
```

**Edit1**：该问题已报告给 Json ( [http://json.codeplex.com/workitem/23668](http://json.codeplex.com/workitem/23668) )

**Edit2**：序列化在 4.5 R11 版本中工作正常，但反序列化仍然无法正常工作

**Edit3**：当循环引用对象不为空时，实际上序列化本身不起作用

**Edit4**：来自 Json.net 问题库的评论是问题出在您的最后并关闭了问题。但我无法找出我的代码有什么问题。我发布了另一个**[关于](https://stackoverflow.com/questions/13797707/json-net-serialisation-deserialisation-not-working-for-iserializable-object-tha)**此的问题。谢谢大家的回答，投票...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T07:46:01.987

我认为您需要两者`ReferenceLoopHandling.Serialize`并`PreserveReferencesHandling.All`复制二进制序列化的行为。不过，生成的 JSON 可能没有那么漂亮。

**编辑：**我深入研究了 JSON.Net 4.5r10 并发现了一个缺陷：`JsonSerializerInternalWriter`不检查`#ShouldWriteReference`通过`ISerializable`.

通过如下重写`foreach`循环`#SerializeISerializable`，您的对象图可以成功往返。

```
 foreach (SerializationEntry serializationEntry in serializationInfo)
  {
    writer.WritePropertyName(serializationEntry.Name);
    var entryValue = serializationEntry.Value;
    var valueContract = GetContractSafe(entryValue);
    if (ShouldWriteReference(entryValue, null, valueContract, null, member))
    {
      WriteReference(writer, entryValue);
    }
    else
    {
      SerializeValue(writer, entryValue, valueContract, null, null, member);
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:07:52.927

你试过这个吗？

```
[Serializable]
 class Employee : ISerializable
 {
   [NonSerialized]
   [XmlIgnore]
   public Department Department { get; set; } 
```

> **NonSerialized**指示不应该序列化可序列化类的字段。
> 
> **XmlIgnore指示****XmlSerializer**的 Serialize 方法不要序列化公共字段或公共读/写属性值

# ios - 辅助功能：在画外音模式下设置 slider.value 时，不会发布 UISlider 的 UIControlEventValueChanged

> ID：13412367
> 
> 赞同：6
> 
> 时间：2012-11-16T07:41:20.647
> 
> 标签：ios, accessibility, uislider

我的父视图中有一个 UISlider。我想尊重滑块移动的画外音手势，因此，我实现了 accessIncrement 和 accessDecrement 方法，如下所示：

```
- (void)accessibilityIncrement
{
     float finalValue = self.value;
    finalValue = (finalValue + 1);
    if (finalValue > self.maximumValue)
        finalValue = self.maximumValue;
    self.value = finalValue;    
}

- (void)accessibilityDecrement
{
    float finalValue = self.value;
    finalValue = (finalValue - 1);
    if (finalValue < self.minimumValue)
        finalValue = self.minimumValue;
    self.value = finalValue;

} 
```

问题是当我设置滑块的值时（使用 self.value = finalValue），UIControlEventValueChanged 事件的选择器不会被调用。这是一个错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-05T13:45:08.087

[建议](http://a11y-guidelines.orange.com/mobile_EN/dev-ios.html#continuous-adjustable-values)`UISlider`使用 VoiceOver 的解决方案是在代码中使用委托，以及您已经使用的**方法**`increment`来`decrement`根据旋钮位置调整滑块值。

# android - 在gridview中异步加载图像

> ID：13412374
> 
> 赞同：0
> 
> 时间：2012-11-16T07:42:01.340
> 
> 标签：android, android-gridview, android-lazyloading

目前正在使用 Zonghai-li 的 android-http-image-manager 但我面临的问题是，当下载图像时，当我滚动网格视图列表时，该图像会显示在其他一些网格单元中. 有人可以帮我解决这个问题..吗？

这是我的适配器类：

```
package com.syncusup.list.adapters;

import java.io.File;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Environment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.ImageView;
import android.widget.TextView;

import com.syncusup.R;
import com.syncusup.UILApplication;
import com.syncusup.httpimageloader.HttpImageManager;
import com.syncusup.model.VCard;
import com.syncusup.utils.SyncLocalDatabase;

public class LocalContactsAdapter extends ArrayAdapter<VCard> {

    private LayoutInflater mInflater;

    private ArrayList<VCard> mOriginalList;

    private ArrayList<VCard> mContactList;

    private HttpImageManager mHttpImageManager;

    private MyFilter mFilter;

    private Context mContext;

    private File aFileToCheck;

    public LocalContactsAdapter(Context iContext, ArrayList<VCard> iVcardsArray) {
        super(iContext, R.layout.localcontacts_row, iVcardsArray);
        this.mContactList = new ArrayList<VCard>();
        this.mContactList.addAll(iVcardsArray);
        this.mOriginalList = new ArrayList<VCard>();
        this.mOriginalList.addAll(iVcardsArray);
        this.mContext = iContext;
        mHttpImageManager = ((UILApplication)((Activity)mContext).getApplication())
                .getHttpImageManager();
    }

    private class ViewHolder {
        public TextView aContactName;

        public TextView aContact;

        public ImageView aContactImage;
    }

    @Override
    public Filter getFilter() {
        if (mFilter == null) {
            mFilter = new MyFilter();
        }
        return mFilter;
    }

    @Override
    public int getPosition(VCard iItem) {
        return super.getPosition(iItem);
    }

    @Override
    public int getCount() {
        return mContactList.size();
    }

    @Override
    public VCard getItem(int iPosition) {
        return mContactList.get(iPosition);
    }

    @Override
    public long getItemId(int iPosition) {
        return iPosition;
    }

    @Override
    public View getView(final int iPosition, View iConvertView, ViewGroup iParent) {

        final ViewHolder aHolder;
        aFileToCheck = new File(Environment.getExternalStorageDirectory() + "/SyncUsUp/",
                SyncLocalDatabase.computeHashedName(mContactList.get(iPosition).getID()));

        if (iConvertView == null || iConvertView.getTag() == null) {
            // default layout inflater
            mInflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            iConvertView = mInflater.inflate(R.layout.localcontacts_row, null);
            aHolder = new ViewHolder();
            aHolder.aContactName = (TextView)iConvertView.findViewById(R.id.tvMyContactName);
            aHolder.aContact = (TextView)iConvertView.findViewById(R.id.tvMyContact);
            aHolder.aContactImage = (ImageView)iConvertView.findViewById(R.id.ivContact);
            iConvertView.setTag(aHolder);
        } else {
            aHolder = (ViewHolder)iConvertView.getTag();
        }

        ImageView aImageView = aHolder.aContactImage;
        aImageView.setImageResource(R.drawable.contact_box_blanktile);

        try {
            if (mContactList.get(iPosition).getPhoto() != null) {
                Bitmap aBitmap = mHttpImageManager.loadImage(new HttpImageManager.LoadRequest(Uri
                        .parse(mContactList.get(iPosition).getPhoto().getUrl()), aImageView));
                if (aBitmap != null) {
                    aImageView.setImageBitmap(aBitmap);
                }
            } else if (aFileToCheck.exists()) {
                Bitmap aBitmap = mHttpImageManager.loadImage(new HttpImageManager.LoadRequest(Uri
                        .parse(mContactList.get(iPosition).getID()), aImageView));
                if (aBitmap != null) {
                    aImageView.setImageBitmap(aBitmap);
                }

            }
        } catch (Exception iException) {
            iException.printStackTrace();
        }

        if (mContactList.get(iPosition).getFullName() != null) {
            aHolder.aContactName.setText(mContactList.get(iPosition).getFullName());
        } else {
            aHolder.aContactName.setText("No Name");
        }

        return iConvertView;
    }

    private class MyFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence iConstraint) {

            FilterResults aResult = null;
            try {
                iConstraint = iConstraint.toString().toLowerCase();
                aResult = new FilterResults();
                if (iConstraint != null && iConstraint.toString().length() > 0) {
                    ArrayList<VCard> aFilteredItems = new ArrayList<VCard>();

                    for (int i = 0, l = mOriginalList.size(); i < l; i++) {
                        VCard aList = mOriginalList.get(i);
                        if (aList.getFullName() != null) {
                            if (aList.getFullName().toString().toLowerCase().contains(iConstraint))
                                aFilteredItems.add(aList);
                        }
                    }
                    aResult.count = aFilteredItems.size();
                    aResult.values = aFilteredItems;
                } else {
                    synchronized (this) {
                        aResult.values = mOriginalList;
                        aResult.count = mOriginalList.size();
                    }
                }
            } catch (Exception iException) {
                iException.printStackTrace();
            }
            return aResult;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence iConstraint, FilterResults iResults) {
            try {
                mContactList = (ArrayList<VCard>)iResults.values;
                notifyDataSetChanged();
                clear();
                for (int i = 0, l = mContactList.size(); i < l; i++)
                    add(mContactList.get(i));
                notifyDataSetInvalidated();
            } catch (Exception iException) {
                iException.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:00:29.790

此问题是由于网格重用视图所致。也就是说，用于在网格的第一页中显示数据的视图在调用时被重用以显示数据。实际上，图像下载库应该处理这个变化并正确地做。最好去另一个库来延迟加载图像。

# python - python元素树xml解析

> ID：13412378
> 
> 赞同：0
> 
> 时间：2012-11-16T07:42:23.180
> 
> 标签：python, xml-parsing

我正在使用 Python 元素树来解析 xml 文件

假设我有一个这样的 xml 文件..

```
<html>
<head>
    <title>Example page</title>
</head>
<body>
    <p>hello this is first paragraph </p>
    <p> hello this is second paragraph</p>
</body>
</html> 
```

有什么方法可以提取带有完整 p 标签的身体，例如

```
desired= "<p>hello this is first paragraph </p> <p> hello this is second paragraph</p>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:54:25.107

以下代码可以解决问题。

```
import xml.etree.ElementTree as ET

root = ET.fromstring(doc)  # doc is a string containing the example file
body = root.find('body')
desired = ' '.join([ET.tostring(c).strip() for c in body.getchildren()]) 
```

现在：

```
>>> desired
'<p>hello this is first paragraph </p> <p> hello this is second paragraph</p>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:54:12.177

你可以使用lxml库，[lxml](http://lxml.de/lxmlhtml.html)

因此，此代码将对您有所帮助。

```
import lxml.html

htmltree = lxml.html.parse('''
<html>
<head>
<title>Example page</title>
</head>
 <body>
<p>hello this is first paragraph </p>
<p> hello this is second paragraph</p>
</body>
</html>''')
p_tags = htmltree.xpath('//p')
p_content = [p.text_content() for p in p_tags]

print p_content 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:09:49.813

与@DavidAlber 略有不同的方式，可以轻松选择孩子：

```
from xml.etree import ElementTree

tree = ElementTree.parse("example.xml")
body = tree.findall("/body/p")

result = []
for elem in body:
     result.append(ElementTree.tostring(elem).strip())

print " ".join(result) 
```

# asp.net - 在 EntityDataSource CommandText 中使用 ISNULL 函数

> ID：13412385
> 
> 赞同：2
> 
> 时间：2012-11-16T07:43:03.697
> 
> 标签：asp.net, sql-server, entity-framework, entitydatasource

我在下面的查询中写了`EntityDataSource CommandText`。

```
SELECT FIRST_NAME + ' ' + ISNULL(LAST_NAME, '') AS Customer
FROM CUSTOMER 
```

但有一个错误`isnull cannot be resolved into valid type or function`。

我解决这个问题有多冷？我应该用什么代替`ISNULL`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:13:09.747

`ISNULL`在实体 sql中不支持。您将不得不求助于[`CASE WHEN`](http://msdn.microsoft.com/en-us/library/bb399229.aspx)：

```
CASE
    WHEN LAST_NAME IS NULL THEN '' 
    ELSE LAST_NAME 
END 
```

没办法。

# scala - 为什么`private val`和`private final val`不同？

> ID：13412386
> 
> 赞同：102
> 
> 时间：2012-11-16T07:43:06.783
> 
> 标签：scala, private, final

我曾经认为`private val`并且`private final val`是相同的，直到我在 Scala Reference 中看到第 4.1 节：

> 常量值定义的形式为
> 
> ```
> final val x = e 
> ```
> 
> 其中 e 是一个常量表达式（第 6.24 节）。final 修饰符必须存在，并且不能给出类型注释。对常量值 x 的引用本身被视为常量表达式；在生成的代码中，它们被定义的右侧 e 替换。

我写了一个测试：

```
class PrivateVal {
  private val privateVal = 0
  def testPrivateVal = privateVal
  private final val privateFinalVal = 1
  def testPrivateFinalVal = privateFinalVal
} 
```

`javap -c`输出：

```
Compiled from "PrivateVal.scala"
public class PrivateVal {
  public int testPrivateVal();
    Code:
       0: aload_0       
       1: invokespecial #19                 // Method privateVal:()I
       4: ireturn       

  public int testPrivateFinalVal();
    Code:
       0: iconst_1      
       1: ireturn       

  public PrivateVal();
    Code:
       0: aload_0       
       1: invokespecial #24                 // Method java/lang/Object."<init>":()V
       4: aload_0       
       5: iconst_0      
       6: putfield      #14                 // Field privateVal:I
       9: return
} 
```

字节码正如 Scala Reference 所说：`private val`is not `private final val`.

为什么*scalac*不只是对待`private val`as `private final val`？有什么根本原因吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-16T08:27:22.723

所以，这只是一个猜测，但在 Java 中一直存在一个烦恼，即右侧带有文字的最终静态变量作为常量内联到字节码中。这肯定会带来性能优势，但如果“常量”发生变化，它会导致定义的二进制兼容性中断。在定义最终的静态变量时，其值可能需要更改，Java 程序员不得不求助于使用方法或构造函数初始化值等技巧。

Scala 中的 val 在 Java 意义上已经是最终的。看起来 Scala 的设计者正在使用冗余修饰符 final 来表示“允许内联常量值”。因此 Scala 程序员可以完全控制这种行为而无需求助于黑客：如果他们想要一个内联常量，一个永远不会改变但速度很快的值，他们会写“final val”。如果他们想要在不破坏二进制兼容性的情况下灵活地更改值，只需“val”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-17T06:38:43.143

我认为这里的混淆源于将不变性与 final 的语义混为一谈。 `val`s 可以在子类中被覆盖，因此除非明确标记，否则不能被视为 final。

@Brian REPL 在行级别提供类范围。看：

```
scala> $iw.getClass.getPackage
res0: Package = package $line3

scala> private val x = 5
<console>:5: error: value x cannot be accessed in object $iw
  lazy val $result = `x`

scala> private val x = 5; println(x);
5 
```

# jquery - Jquery .attr() 不会更改我的输出名称

> ID：13412396
> 
> 赞同：2
> 
> 时间：2012-11-16T07:43:47.177
> 
> 标签：jquery, html

我正在尝试按照教程动态生成输入字段，不知何故教程使用的是旧版本的 Jquery，现在我试图通过使用最新的 jquery 来完成它

这是我在[旧教程中遵循的教程](http://charlie.griefer.com/blog/jquery-dynamically-adding-form-elements/)

克隆没有问题，但我无法生成具有不同名称的输入，例如。

```
<input name="name1" value="">
<input name="name2" value="">
<input name="name3" value=""> 
```

这是我的测试代码 [小提琴演示](http://jsfiddle.net/BgJhE/)

提前致谢

已解决

```
<input name="name[]" value=""> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:50:35.227

简单的解决方案！

`<input name="name[]" ... />`

这会将数据作为数组发送，它被克隆多少次都没有关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:53:35.790

您实际上从未更改输入的 id，仅更改输入之前的选择框。当你克隆进去时`newElem`，你必须在某个时候改变两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:59:29.927

如果在设置和时`:first`从 中删除选择器，它应该可以工作。另外，您的顺序错误`children()``id``name``input``.find('input')`

你的代码看起来像

```
newElem.children(':first').find("input").prop('id', 'name' + newNum).prop('name', 'name' + newNum) 
```

这是您更新的[小提琴的链接](http://jsfiddle.net/BgJhE/3/)

# php - 按成员资格显示 SQL

> ID：13412397
> 
> 赞同：-1
> 
> 时间：2012-11-16T07:43:51.990
> 
> 标签：php, mysql, sql

我正在制作一个目录列表（entryid、姓名、电话、职业、电子邮件），但我希望一些数据受到用户选择的包的青睐。

我已经实现了后端配置，但我不知道如何在前端进行“优惠”。我猜这与加权结果有关，有人可以给我一个简单的例子来说明如何做到这一点吗？

我的表格如下：

```
entries
-----------
entryid (PK)
firstname
lastname
package_id -> shows to my packages (Lookup Table)
phone
occupation_id -> shows to the occupations (Lookup Table)
active
address
email
newsletterOk

packages
-----------
package_id
title
weight
amount
active

occupations
-------------
occupation_id
title
active
vieworder 
```

*** 编辑 ***

我在这里的猜测是......搜索每个包裹（即处于活动状态）的职业并将它们放在由 packages.weight 排序的联合中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:50:51.540

您应该通过在名为 category 的表中添加额外的列来对结果进行加权，并定义哪个目录条目引用哪个 category ，以及另一列用于 weight ，因此您最终获得了每个类别的权重。

# android - Android 上的 Facebook SDK 显示一个公共站点

> ID：13412403
> 
> 赞同：0
> 
> 时间：2012-11-16T07:44:12.083
> 
> 标签：android, facebook-android-sdk

**我正在尝试做的事情**

* * *

大家好，早上好，我想创建一个 Facebook-Viewer 女巫，只向我展示一个指定的站点，例如这里的这个：[一些随机的 Facebook 站点](http://www.facebook.com/LavishZH)因为我不知道该怎么做，所以我正在查看Facebook API 网站，它没有给我任何信息......

**问题**

* * *

因此，正如您可能认为的那样，我不知道如何做到这一点。如果您能告诉我以下内容，那就太好了：

1.  我需要开发者密钥吗？
2.  你能给我一些示例代码或一个好的教程吗？

一些附加信息，我想显示的 Facebook 站点是公开的（所以我不希望用户必须登录到 fb）。

谢谢你提前回答！

最好的祝福

苹果浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:09:58.913

这是我认为您可以尝试的方法，您需要开发人员密钥，并且必须创建一个 Facebook 应用程序。您可以阅读此[链接](https://developers.facebook.com/docs/mobile/android/build/)以了解如何完成。

一旦你有了它，你就可以使用它`FQL`来获取页面列表。[此链接](https://stackoverflow.com/questions/4461509/android-and-facebook-how-to-use-facebook-query-language-fql-out-of-android-ap)为您提供有关如何`FQL`使用 Facebook android SDK 从 android App 进行查询的信息。

现在您想要的对象是[Page](https://developers.facebook.com/docs/reference/fql/page/)。您可以使用适合您需要的任何参数进行查询。随机化结果并使用显示页面`Facebook graph API.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:25:34.737

**问题的解决方案**

* * *

我想出了一个适合我的解决方案。需要存在的东西：

1.  [在Facebook Developers](http://developers.facebook.com)上注册您的应用
2.  该页面需要发布和公开
3.  从您注册的应用程序中获取 de APP_ID 和 APP_SECRET ，您可以获得访问令牌，如下所示`https://graph.facebook.com/oauth/access_token?type=client_cred&client_id="+APP_ID+"&client_secret="+APP_SECRET`

这是它的代码：

* * *

```
 private static final String ACCESS_TOKEN_QUERY = "https://graph.facebook.com/oauth/access_token?type=client_cred&client_id="+APP_ID+"&client_secret="+APP_SECRET;

        private static final String FEED_URL = "https://graph.facebook.com/"+PAGE_ID+"/feed?";
        private static String accesstoken = "";
        private static String jsonresponse = "";

        Context context;

            String line = null;

            final ArrayList<HashMap<String, String>> videolist = new ArrayList<HashMap<String, String>>();

            //Get AccessToken
            try{
                URL url = new URL(ACCESS_TOKEN_QUERY); 

                URLConnection conn = url.openConnection();
                StringBuilder sb = new StringBuilder();
                BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

                //read d response till d end
                while ((line = rd.readLine()) != null) {
                    sb.append(line + "\n");
                    }
                    accesstoken = sb.toString();
                    Log.v("log_tag", "Append String " + accesstoken);
                    } catch (Exception e) {
                    Log.e("log_tag", "Error converting result " + e.toString());
                    }

            //Get JSON

            try{
                URL url = new URL(FEED_URL+accesstoken);

                URLConnection conn = url.openConnection();
                StringBuilder sb = new StringBuilder();
                BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

                while ((line = rd.readLine()) != null) {
                    sb.append(line + "\n");
                    }
                    jsonresponse = sb.toString();
                    Log.v("log_tag", "Append String " + jsonresponse);

            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
                }
//Here you got the jsonresponse now, with which you can go on. 
```

* * *

好消息是您甚至不需要在您的应用程序中安装 Facebook SDK。最好的祝福

苹果浏览器

# python - wxpython：如何在 flexgridsizer 中保持三个具有相同大小的 wxTextCtrl

> ID：13412405
> 
> 赞同：1
> 
> 时间：2012-11-16T07:44:24.133
> 
> 标签：python, wxpython, wxwidgets

我想使用 wxpython 来实现一个具有三个`wxTextCtrls`小部件的 GUI，并且我希望在更改窗口大小时保持它们具有相同的大小

如果我对这些不做任何事情`wxTextCtrls`，它会很好地工作。但是当我在这三个小部件中的一个中添加多行内容时，比如第一个小部件，当我更改窗口大小时，它的大小会比其他小部件大。我怎样才能保持这些小部件的大小相同？谢谢！

（PS：我认为生成的 GUI 的图像可以更好地解释我的问题，但我不能发布图像。对不起）

我的代码是

```
import os
import wx

class My_Gui(wx.Frame):
    def __init__(self, parent, title):
        super(My_Gui, self).__init__(parent, title = title,size=(800,600))

        self.InitUI()
        self.Centre()
        self.Show()

    def InitUI(self):

        my_panel = wx.Panel(self)

        hbox = wx.BoxSizer(wx.HORIZONTAL)

        fgs = wx.FlexGridSizer(3, 2, 25, 30)

        button1 = wx.Button(my_panel, label='button1', size=(120,150))

        button2 = wx.Button(my_panel, label='button2', size=(120,150))

        button3 = wx.Button(my_panel, label='button3', size=(120,150))

        self.tc1 = wx.TextCtrl(my_panel, style=wx.TE_MULTILINE | wx.HSCROLL)
        self.tc2 = wx.TextCtrl(my_panel, style=wx.TE_MULTILINE | wx.HSCROLL)
        self.tc3 = wx.TextCtrl(my_panel, style=wx.TE_MULTILINE | wx.HSCROLL)

        fgs.AddMany([(button1),(self.tc1, 1, wx.EXPAND),  (button2), \
                  (self.tc2, 1, wx.EXPAND), (button3), (self.tc3, 1, wx.EXPAND)])

        fgs.AddGrowableRow(2, 1)
        fgs.AddGrowableRow(1, 1)
        fgs.AddGrowableRow(0, 1)
        fgs.AddGrowableCol(1, 1)

        hbox.Add(fgs, proportion=1, flag=wx.ALL|wx.EXPAND, border=40)
        my_panel.SetSizer(hbox)

if __name__ == "__main__":
    app = wx.App()
    My_Gui(None, title='Example')
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:02:33.593

> 从 wxWidgets 2.5.0 开始，wxFlexGridSizer 还可以在一个方向上相等地调整项目大小，但在另一个方向上不相等（“灵活”）。如果 sizer 仅在一个方向上是灵活的（这可以使用 SetFlexibleDirection 进行更改），则需要确定 sizer 应如何在另一个（“非灵活”）方向上增长以填充可用空间。SetNonFlexibleGrowMode 方法用于此目的。（来自：[docs.wxwidgets.org](http://docs.wxwidgets.org/2.8/wx_wxflexgridsizer.html)）

所以改变：

```
fgs.SetFlexibleDirection( wx.BOTH ) 
```

进入：

```
fgs.SetFlexibleDirection( wx.HORIZONTAL )
fgs.SetNonFlexibleGrowMode( wx.FLEX_GROWMODE_ALL ) 
```

我在这里看到的唯一问题是`TextCtrl`s 的最大最小尺寸适用于所有`TextCtrl`s。

# jquery - jQuery carousel 允许（不覆盖）图像旁边的文本

> ID：13412408
> 
> 赞同：1
> 
> 时间：2012-11-16T07:44:43.143
> 
> 标签：jquery, carousel

我花了一些时间四处寻找（jquery）轮播或幻灯片。那里有数百个，其中许多确实令人惊讶。

但我需要的是一个轮播，其中三分之二的水平空间被图像占据，三分之一被文本占据。文字不应叠加在图像上。

到目前为止，我只找到[了 Sliderion](http://slidorion.com/)、 bxSlider 和[EvoSlider](http://codecanyon.net/item/evo-slider-pro-jquery-slider-plugin/full_screen_preview/1967625?ref=lvraa)（这是我真正喜欢的；但它不是免费的。好吧，它也不贵。）

你知道其他满足这些要求的脚本吗？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:52:39.570

试试**[jCarousel](http://sorgalla.com/jcarousel/)**

这是一个适用于列表元素的漂亮轮播。您可以根据您的规范对列表项中的内容进行样式设置：

**HTML**

```
<ul id='carousel'>
    <li>
        <img src='url goes here' />
        <p>text goes here</p>
    </li>
    <li>
        <img src='url goes here' />
        <p>text goes here</p>
    </li>
</ul> 
```

**CSS**

```
ul li img, ul li p { display: inline; }
ul li img { width: 66%; }
ul li p { width: 33%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:15:41.343

您正在寻找的是 nivoSlider。它是免费且易于上手的，试一试并查看示例：

[http://nivo.dev7studios.com/demos/](http://nivo.dev7studios.com/demos/)

# jquery - .each() 和 .map() 不正确的迭代。请帮帮我

> ID：13412412
> 
> 赞同：0
> 
> 时间：2012-11-16T07:45:05.407
> 
> 标签：jquery, html-lists

我需要帮助来了解 .each() 的工作原理。使用 .each() 或 .map() 函数时，我遇到了一些不寻常的问题。

```
<ol>
  <li>
     <div id="line">One</div>
     <div id="arrow"><img src="img/arrow.png"></div>
            <div id="line" class="sec">
                   <select>
                    <option type="null">-- Выберите утверждение--</option>
                    <option type="true">1</option>
                    <option type="false">2</option>
                    <option type="false">3</option>
                   </select>
                </div>
  </li>
  <li>
     <div id="line">Two</div>
     <div id="arrow"><img src="img/arrow.png"></div>
            <div id="line" class="sec">
                   <select>
                    <option type="null">-- Выберите утверждение--</option>
                    <option type="false">1</option>
                    <option type="true">2</option>
                    <option type="false">3</option>
                   </select>
                </div>
  </li>
  <li>
     <div id="line">Three</div>
     <div id="arrow"><img src="img/arrow.png"></div>
            <div id="line" class="sec">
                   <select>
                    <option type="null">-- Выберите утверждение--</option>
                    <option type="false">1</option>
                    <option type="false">2</option>
                    <option type="true">3</option>
                   </select>
                </div>
  </li>

</ol> 
```

当我执行该功能时

```
function tcheck()  {
  $('li').map(function(index) {
    alert(index)
  });
} 
```

有奇怪的结果：alert 已经调用了 14 次！为什么**$('li').each()**或 **$('li').map()**`<li>`在标签中计算每个？

请帮帮我。最好的问候，米卡莱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:58:05.577

`$('li')`选择页面上的每一个`li`元素！使用更具体的选择器，例如该特定`ol`元素的父级。

# iphone - 为 iphone 应用程序检测图像中的瑕疵点

> ID：13412413
> 
> 赞同：1
> 
> 时间：2012-11-16T07:45:13.783
> 
> 标签：iphone, ios5, core-image

我怎样才能发现和罚款的瑕疵`image`和纠正它？有可用的示例代码吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T07:51:19.643

我不确定你要做什么，如果你想在使用图片之前去除瑕疵，你总是可以使用 Photo Blemish Remover。不知道您为什么要寻找示例代码。只需清理图像并使用改进的图像。
您可以从 Aviary iOS SDK 中找到一个演示：[Right HERE](http://www.aviary.com/ios-documentation)

[照片瑕疵去除剂](http://www.photo-toolbox.com/download/download.php?target=free_photo_blemish_remover_win_x86_cnet)

# vba - 如何使用宏在 Excel 电子表格中显示我的 Windows 用户名？

> ID：13412418
> 
> 赞同：23
> 
> 时间：2012-11-16T07:45:35.040
> 
> 标签：vba, excel

我正在尝试在 Excel 单元格中显示 Windows 用户名。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-16T07:55:26.940

```
Range("A1").value = Environ("Username") 
```

这比`Application.Username`不总是提供 Windows 用户名要好。感谢[凯尔](https://stackoverflow.com/users/1240154/kyle)指出这一点。

*   `Application Username`是在 Excel > 工具 > 选项中设置的用户的名称
*   `Environ("Username")`是您为 Windows 注册的名称；见控制面板>系统

# asp.net - StructureMap中的HttpContextScoped，ASP.NET在后台线程中抛出空引用异常

> ID：13412419
> 
> 赞同：1
> 
> 时间：2012-11-16T07:45:41.193
> 
> 标签：asp.net, structuremap, httpcontext

我正在使用 StructureMap 在 ASP.NET 中为每个请求创建 DbEntities 实例。

```
ObjectFactory.Initialize(x =>
{
    x.For<DbEntities>().HttpContextScoped().Use(CreateNewDbEntities); 
} 
```

我有一个每 5 秒运行一次的后台任务，它正在尝试使用 DbEntities。

```
timer = new Timer(RunTasks, null, 1000 * 10/*time to wait until the first run*/, 1000 * 5/*time to wait between calls*/); 
```

现在在方法 RunTasks 中，当我尝试调用 GetDbEntities 时，我得到空引用异常

```
private static void RunTasks(object sender)
{
    var muninService = GetDbEntities(); // Null reference excpetion
}

public static DbEntities GetDbEntities()
{
    return ObjectFactory.GetInstance<DbEntities>();
} 
```

我猜这是因为在后台线程中我无法访问 httpcontextscope。现在我是结构图的新手，我不知道要开始和解决这个问题。有任何想法吗 ？

我使用的其他方法：

```
private static DbEntities CreateNewDbEntities()
{
    return new DbEntities();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:20:36.963

尝试：

```
ObjectFactory.Initialize(x =>
{
    x.For<DbEntities>().HybridHttpOrThreadLocalScoped().Use(CreateNewDbEntities); 
} 
```

如果 a`HttpContext`不可用，这应该缓存每个线程的实例。

# jasper-reports - Jasper 报告中的水平打印

> ID：13412421
> 
> 赞同：2
> 
> 时间：2012-11-16T07:45:56.183
> 
> 标签：jasper-reports

我试图用 3 列水平打印我的报告。但看起来连列标签都重复了。它应该只在有溢出的地方重复。

我得到这样的东西：

![坏报告](../Images/7b7dd944785ec798ee3adc41bca8fa6a.png)

下图是预期的。

![我想得到这样的东西](../Images/3c64f1c441f25e9f77b71ba98f21c27e.png)

谁能给我一些提示。

山姆

# jquery - Jquery - 没有为 jquery-1.4.1.min.js 中的文本框添加值属性

> ID：13412423
> 
> 赞同：1
> 
> 时间：2012-11-16T07:45:57.980
> 
> 标签：jquery

我有一个用于显示用户列表的 html 表。当我单击*tr*行时，它会在另一个 html 表中的文本框中找到 **td**值。

假设，下面给出的 html 表是用户列表，

```
<table id="tbl1" border="1">
   <tr>
       <td>name</td>
   </tr>
   <tr id="tr1" style='cursor:pointer;'>
       <td>Mani</td>
   </tr>
</table> 
```

下面给出的 html 表，当我们点击上面 html 表中的一行时，动态地将**td**值分配给**text-box**，比如

```
<table id="tbl2">
   <tr>
       <td><input id="txt1" type="text"  /></td>
   </tr>
</table>
<br/>
<input type="button" id="btnReset" value="reset" /> 
```

我做了什么，当我单击该表中的一行时，我得到一个 html 数据并将其分配给一个全局变量，当我单击`reset`按钮时，我只是将 html 值插入到`#tbl2`.

我的 jquery 代码如下所示，

```
var getHTML="";

$("#tr1").click(function(){    
   $("#txt1").val($(this).find('td').html());
   getHTML=$("#tbl2").html();
});

$("#btnReset").click(function(){
    $("#tbl2").html(getHTML);
}); 
```

它正在工作，但文本框值为空，如何从 html 表中获取动态文本框值。

[在这里检查](http://jsfiddle.net/smanimani/R77ZB/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:50:57.913

[试试这个](http://jsfiddle.net/R77ZB/1/)

```
$("#txt1").attr('value', $(this).find('td').text()); 
```

代替

```
$("#txt1").val($(this).find('td').text()); 
```

在您的`text box`来源中添加价值，例如

```
<input id="txt1" type="text" value="Mani"> 
```

**更新：** [或者你也可以试试这个](http://jsfiddle.net/R77ZB/2/)。

# ios - 在 iOS 上为应用程序实现自动锁定功能

> ID：13412425
> 
> 赞同：3
> 
> 时间：2012-11-16T07:46:10.393
> 
> 标签：ios, auto-lock

我想为我的应用程序实现一个安全的基于时间的自动锁定功能（类似于 1password 中的自动锁定功能）。用户可以选择密码和锁定激活后的时间段（1、2、3、5、10、30 分钟）。基本上我可以在我的设备上写一个时间戳（加密）并将其与下一次使用的当前时间进行比较。如果增量大于所选时间段，则用户必须输入密码。但是可以通过更改设备上的本地时间来忽略此功能。必须有一种安全的方式（例如特殊的系统计时器）来做到这一点。所以你不能以这种方式利用 1Password。有任何想法吗？

非常感谢

于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:39:42.280

利用：

```
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

现在设置一个计时器：

```
 [NSTimer scheduledTimerWithTimeInterval:240 target:self selector:@selector(disableIdleTimer) userInfo:nil repeats:NO]; 
```

disableIdleTimer 方法设置这个：

```
[[UIApplication sharedApplication] setIdleTimerDisabled:NO]; 
```

完毕！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:03:32.850

您应该使用 Internet 时间服务器。他们使用称为 NTP 的标准化协议。iOS[内置支持读取 NTP 服务器时间](https://stackoverflow.com/questions/7406264/nsdate-ntp-and-carrier-time)，但作为应用程序开发人员，您无法访问。您可以自己实现它，也可以使用开源库，如 ios-ntp 或 HS NTP。

# imagemagick - 使用 Imagemagick 平铺索引作为输出文件名

> ID：13412427
> 
> 赞同：0
> 
> 时间：2012-11-16T07:46:22.000
> 
> 标签：imagemagick

我正在运行以下内容，这几乎是正确的：

```
convert joint/* \
    -limit memory 512MiB \
    -crop 2x1@ +repage +adjoin \
    -set filename:fn '%t-%[fx:p&1].%e' \
    'separate/%[filename:fn]' 
```

它将图像目录中的每个图像拆分为两个图像。`fx`用于在 0 和 1 之间交替平铺索引。但是，输出目录中的一些图像一半神秘地丢失了：

```
0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens-0.jpg
0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens-1.jpg
1080par-0.jpg
1240637960_ec87a611d8_b-0.jpg
1244683205_6e516f7070_b-0.jpg
1291632940_184b45e999_b-0.jpg
1291633886_e6d486735c_b-0.jpg
1339211763_9a2b2c4c26_b-0.jpg
1343608989_a270398ca8_b-0.jpg
1344499170_e6f028b93f_b-0.jpg
1732812547_2034be2b6d_b-0.jpg
1732812547_2034be2b6d_b-1.jpg
3d_stereoscopic_experiment_by_hungerartist-0.jpg
3d_stereoscopic_experiment_by_hungerartist-1.jpg
3D_stereoscopic_projection_truncated_tesseract-0.PNG
594937060_e9e3ae842f_o-0.jpg
666646137_af04950174_b-0.jpg
666646137_af04950174_b-1.jpg
666646251_16c24f77fd_b-0.jpg
666646251_16c24f77fd_b-1.jpg
701546256_473abfaf62_b-0.jpg
701546256_473abfaf62_b-1.jpg
712859467_bcc1701192_b-0.jpg
712859467_bcc1701192_b-1.jpg
740097278_727827502f_b-0.jpg
967929784_38cc70efc8_b-0.jpg
Bee in Flight-0.jpg
Burning Man 2009 - Torch Spinner-0.jpg
Burning Man 2010 - Lobster Taxi-0.jpg
Burning Man 2011 - Temple of Transition-0.jpg
Burning Man 2011 - Temple of Transition-1.jpg
ChaitanyaKrishnanFINAL-0.JPG
Dinosaur-0.jpg
Dinosaur 2-0.jpg
Early_bird_stereograph2-1.jpg
Exo-Frame-1.jpg
Fall 3D-0.jpg
Fall 3D 2-1.jpg
Fireworks-0.jpg
gm-stereoscopic-test2-1.jpg
gm-stereoscopic-test3-0.jpg
gm-stereoscopic-test4-0.jpg
JasdeepSinghFINAL-0.JPG
Kids around the World-0.jpg
Klingenthal-1.jpg
Las Vegas January 2010-0.jpg
Munich, Maximilian Avenue-1.jpg
Peering through the Petals-0.jpg
Peering through the Petals-1.jpg
Piano_in_3D-0.jpg
Reflections-0.jpg
splat-0.jpg
spooky-0.jpg
Stereoscopic_Gibberlings_by_slipgatecentral-0.jpg
Theatre of Food-0.jpg
TimBorisovFINAL-1.JPG
Water balloon-0.jpg
Wernigerode Westerntor-1.jpg
WK2007_1_Melancolia-0.jpg
WK2007_1_Melancolia-1.jpg
WK2007_4_Larder-0.jpg
WK2007_4_Larder-1.jpg 
```

为什么会这样？

编辑：似乎关于`%p`. 有时它会更新，有时它不会更新，从而导致详细输出：

```
joint/0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens.jpg=>separate/0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens-2.jpg[0] JPEG 640x324=>320x324 8-bit Grayscale DirectClass 20.5KB 42.370u 0:29.949
joint/0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens.jpg=>separate/0_stereoscopic_views_-_kilburn_-_royal_botanic_gardens-1.jpg[1] JPEG 640x324=>320x324 8-bit Grayscale DirectClass 20.5KB 42.360u 0:29.969
joint/1080par.jpg=>separate/1080par-1.jpg[2] JPEG 1238x720=>619x720 8-bit Grayscale DirectClass 81.9KB 42.170u 0:29.829
joint/1080par.jpg=>separate/1080par-1.jpg[3] JPEG 1238x720=>619x720 8-bit Grayscale DirectClass 81.9KB 42.170u 0:29.830
joint/1240637960_ec87a611d8_b.jpg=>separate/1240637960_ec87a611d8_b-1.jpg[4] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 86KB 41.970u 0:29.729
joint/1240637960_ec87a611d8_b.jpg=>separate/1240637960_ec87a611d8_b-1.jpg[5] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 86KB 41.970u 0:29.730
joint/1244683205_6e516f7070_b.jpg=>separate/1244683205_6e516f7070_b-1.jpg[6] JPEG 1024x643=>512x643 8-bit Grayscale DirectClass 102KB 41.770u 0:29.610
joint/1244683205_6e516f7070_b.jpg=>separate/1244683205_6e516f7070_b-1.jpg[7] JPEG 1024x643=>512x643 8-bit Grayscale DirectClass 102KB 41.780u 0:29.609
joint/1291632940_184b45e999_b.jpg=>separate/1291632940_184b45e999_b-1.jpg[8] JPEG 1024x640=>512x640 8-bit Grayscale DirectClass 123KB 41.540u 0:29.500
joint/1291632940_184b45e999_b.jpg=>separate/1291632940_184b45e999_b-1.jpg[9] JPEG 1024x640=>512x640 8-bit Grayscale DirectClass 123KB 41.550u 0:29.500
joint/1291633886_e6d486735c_b.jpg=>separate/1291633886_e6d486735c_b-1.jpg[10] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 123KB 41.320u 0:29.339
joint/1291633886_e6d486735c_b.jpg=>separate/1291633886_e6d486735c_b-1.jpg[11] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 119KB 41.320u 0:29.330
joint/1339211763_9a2b2c4c26_b.jpg=>separate/1339211763_9a2b2c4c26_b-1.jpg[12] JPEG 1024x640=>512x640 8-bit Grayscale DirectClass 152KB 41.080u 0:29.230
joint/1339211763_9a2b2c4c26_b.jpg=>separate/1339211763_9a2b2c4c26_b-1.jpg[13] JPEG 1024x640=>512x640 8-bit Grayscale DirectClass 152KB 41.080u 0:29.219
joint/1343608989_a270398ca8_b.jpg=>separate/1343608989_a270398ca8_b-1.jpg[14] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 86KB 40.860u 0:29.099
joint/1343608989_a270398ca8_b.jpg=>separate/1343608989_a270398ca8_b-1.jpg[15] JPEG 1024x641=>512x641 8-bit Grayscale DirectClass 86KB 40.860u 0:29.109
joint/1344499170_e6f028b93f_b.jpg=>separate/1344499170_e6f028b93f_b-1.jpg[16] JPEG 1024x639=>512x639 8-bit Grayscale DirectClass 32.8KB 40.720u 0:29.030
joint/1344499170_e6f028b93f_b.jpg=>separate/1344499170_e6f028b93f_b-1.jpg[17] JPEG 1024x639=>512x639 8-bit Grayscale DirectClass 41KB 40.720u 0:29.020
joint/1732812547_2034be2b6d_b.jpg=>separate/1732812547_2034be2b6d_b-1.jpg[18] JPEG 1024x341=>512x341 8-bit Grayscale DirectClass 86KB 40.590u 0:28.919
joint/1732812547_2034be2b6d_b.jpg=>separate/1732812547_2034be2b6d_b-2.jpg[19] JPEG 1024x341=>512x341 8-bit Grayscale DirectClass 90.1KB 40.590u 0:28.919
joint/3d_stereoscopic_experiment_by_hungerartist.jpg=>separate/3d_stereoscopic_experiment_by_hungerartist-1.jpg[20] JPEG 1584x622=>792x622 8-bit Grayscale DirectClass 102KB 40.250u 0:28.740
joint/3d_stereoscopic_experiment_by_hungerartist.jpg=>separate/3d_stereoscopic_experiment_by_hungerartist-2.jpg[21] JPEG 1584x622=>792x622 8-bit Grayscale DirectClass 94.2KB 40.250u 0:28.739
joint/3D_stereoscopic_projection_truncated_tesseract.PNG=>separate/3D_stereoscopic_projection_truncated_tesseract-1.jpg[22] PNG 614x304=>307x304 8-bit Grayscale DirectClass 20.5KB 40.220u 0:28.730
joint/3D_stereoscopic_projection_truncated_tesseract.PNG=>separate/3D_stereoscopic_projection_truncated_tesseract-1.jpg[23] PNG 614x304=>307x304 8-bit Grayscale DirectClass 20.5KB 40.220u 0:28.730
joint/594937060_e9e3ae842f_o.jpg=>separate/594937060_e9e3ae842f_o-1.jpg[24] JPEG 1024x683=>512x683 8-bit Grayscale DirectClass 49.2KB 39.980u 0:28.580
joint/594937060_e9e3ae842f_o.jpg=>separate/594937060_e9e3ae842f_o-1.jpg[25] JPEG 1024x683=>512x683 8-bit Grayscale DirectClass 53.2KB 39.980u 0:28.579
joint/666646137_af04950174_b.jpg=>separate/666646137_af04950174_b-1.jpg[26] JPEG 1024x630=>512x630 8-bit Grayscale DirectClass 156KB 39.760u 0:28.449
joint/666646137_af04950174_b.jpg=>separate/666646137_af04950174_b-2.jpg[27] JPEG 1024x630=>512x630 8-bit Grayscale DirectClass 160KB 39.760u 0:28.459
joint/666646251_16c24f77fd_b.jpg=>separate/666646251_16c24f77fd_b-1.jpg[28] JPEG 1024x382=>512x382 8-bit Grayscale DirectClass 94.2KB 39.630u 0:28.389
joint/666646251_16c24f77fd_b.jpg=>separate/666646251_16c24f77fd_b-2.jpg[29] JPEG 1024x382=>512x382 8-bit Grayscale DirectClass 94.2KB 39.630u 0:28.399
joint/701546256_473abfaf62_b.jpg=>separate/701546256_473abfaf62_b-1.jpg[30] JPEG 1024x631=>512x631 8-bit Grayscale DirectClass 119KB 39.500u 0:28.240
joint/701546256_473abfaf62_b.jpg=>separate/701546256_473abfaf62_b-2.jpg[31] JPEG 1024x631=>512x631 8-bit Grayscale DirectClass 119KB 39.500u 0:28.239
joint/712859467_bcc1701192_b.jpg=>separate/712859467_bcc1701192_b-1.jpg[32] JPEG 1024x630=>512x630 8-bit Grayscale DirectClass 53.2KB 39.410u 0:28.199
joint/712859467_bcc1701192_b.jpg=>separate/712859467_bcc1701192_b-2.jpg[33] JPEG 1024x630=>512x630 8-bit Grayscale DirectClass 49.2KB 39.410u 0:28.199
joint/740097278_727827502f_b.jpg=>separate/740097278_727827502f_b-1.jpg[34] JPEG 1024x663=>512x663 8-bit Grayscale DirectClass 147KB 39.160u 0:28.009
joint/740097278_727827502f_b.jpg=>separate/740097278_727827502f_b-1.jpg[35] JPEG 1024x663=>512x663 8-bit Grayscale DirectClass 156KB 39.170u 0:28.019
joint/967929784_38cc70efc8_b.jpg=>separate/967929784_38cc70efc8_b-1.jpg[36] JPEG 1024x626=>512x626 8-bit Grayscale DirectClass 119KB 38.950u 0:27.879
joint/967929784_38cc70efc8_b.jpg=>separate/967929784_38cc70efc8_b-1.jpg[37] JPEG 1024x626=>512x626 8-bit Grayscale DirectClass 111KB 38.950u 0:27.890
joint/Bee in Flight.jpg=>separate/Bee in Flight-1.jpg[38] JPEG 1024x579=>512x579 8-bit Grayscale DirectClass 86KB 38.780u 0:27.800
joint/Bee in Flight.jpg=>separate/Bee in Flight-1.jpg[39] JPEG 1024x579=>512x579 8-bit Grayscale DirectClass 81.9KB 38.790u 0:27.810
joint/Burning Man 2009 - Torch Spinner.jpg=>separate/Burning Man 2009 - Torch Spinner-1.jpg[40] JPEG 1024x609=>512x609 8-bit Grayscale DirectClass 102KB 38.560u 0:27.669
joint/Burning Man 2009 - Torch Spinner.jpg=>separate/Burning Man 2009 - Torch Spinner-1.jpg[41] JPEG 1024x609=>512x609 8-bit Grayscale DirectClass 98.3KB 38.560u 0:27.660
joint/Burning Man 2010 - Lobster Taxi.jpg=>separate/Burning Man 2010 - Lobster Taxi-1.jpg[42] JPEG 1024x539=>512x539 8-bit Grayscale DirectClass 127KB 38.350u 0:27.519
joint/Burning Man 2010 - Lobster Taxi.jpg=>separate/Burning Man 2010 - Lobster Taxi-1.jpg[43] JPEG 1024x539=>512x539 8-bit Grayscale DirectClass 131KB 38.350u 0:27.529
joint/Burning Man 2011 - Temple of Transition.jpg=>separate/Burning Man 2011 - Temple of Transition-2.jpg[44] JPEG 1024x426=>512x426 8-bit Grayscale DirectClass 86KB 38.190u 0:27.439
joint/Burning Man 2011 - Temple of Transition.jpg=>separate/Burning Man 2011 - Temple of Transition-1.jpg[45] JPEG 1024x426=>512x426 8-bit Grayscale DirectClass 81.9KB 38.190u 0:27.440
joint/ChaitanyaKrishnanFINAL.JPG=>separate/ChaitanyaKrishnanFINAL-1.jpg[46] JPEG 3336x1050=>1668x1050 8-bit Grayscale DirectClass 197KB 36.930u 0:26.699
joint/ChaitanyaKrishnanFINAL.JPG=>separate/ChaitanyaKrishnanFINAL-1.jpg[47] JPEG 3336x1050=>1668x1050 8-bit Grayscale DirectClass 188KB 36.920u 0:26.710
joint/Dinosaur 2.jpg=>separate/Dinosaur 2-1.jpg[48] JPEG 1600x1001=>800x1001 8-bit Grayscale DirectClass 193KB 36.380u 0:26.390
joint/Dinosaur 2.jpg=>separate/Dinosaur 2-1.jpg[49] JPEG 1600x1001=>800x1001 8-bit Grayscale DirectClass 217KB 36.380u 0:26.410
joint/Dinosaur.jpg=>separate/Dinosaur-1.jpg[50] JPEG 1600x1032=>800x1032 8-bit Grayscale DirectClass 147KB 35.860u 0:26.089
joint/Dinosaur.jpg=>separate/Dinosaur-1.jpg[51] JPEG 1600x1032=>800x1032 8-bit Grayscale DirectClass 152KB 35.860u 0:26.089
joint/Early_bird_stereograph2.jpg=>separate/Early_bird_stereograph2-2.jpg[52] JPEG 1522x727=>761x727 8-bit Grayscale PseudoClass 256c 250KB 35.850u 0:26.100
joint/Early_bird_stereograph2.jpg=>separate/Early_bird_stereograph2-2.jpg[53] JPEG 1522x727=>761x727 8-bit Grayscale PseudoClass 256c 262KB 35.850u 0:26.099
joint/Exo-Frame.jpg=>separate/Exo-Frame-2.jpg[54] JPEG 1256x1050=>628x1050 8-bit Grayscale DirectClass 344KB 35.370u 0:25.820
joint/Exo-Frame.jpg=>separate/Exo-Frame-2.jpg[55] JPEG 1256x1050=>628x1050 8-bit Grayscale DirectClass 356KB 35.380u 0:25.829
joint/Fall 3D 2.jpg=>separate/Fall 3D 2-2.jpg[56] JPEG 5894x2224=>2947x2224 8-bit Grayscale DirectClass 1.589MB 31.000u 0:23.269
joint/Fall 3D 2.jpg=>separate/Fall 3D 2-2.jpg[57] JPEG 5894x2224=>2947x2224 8-bit Grayscale DirectClass 1.634MB 31.040u 0:23.179
joint/Fall 3D.jpg=>separate/Fall 3D-1.jpg[58] JPEG 5304x1997=>2652x1997 8-bit Grayscale DirectClass 2.089MB 27.170u 0:19.429
joint/Fall 3D.jpg=>separate/Fall 3D-1.jpg[59] JPEG 5304x1997=>2652x1997 8-bit Grayscale DirectClass 2.085MB 27.240u 0:18.890
joint/Fireworks.jpg=>separate/Fireworks-1.jpg[60] JPEG 1280x990=>640x990 8-bit Grayscale DirectClass 156KB 26.980u 0:18.579
joint/Fireworks.jpg=>separate/Fireworks-1.jpg[61] JPEG 1280x990=>640x990 8-bit Grayscale DirectClass 156KB 26.980u 0:18.550
joint/gm-stereoscopic-test2.jpg=>separate/gm-stereoscopic-test2-2.jpg[62] JPEG 1280x384=>640x384 8-bit Grayscale DirectClass 152KB 26.800u 0:18.439
joint/gm-stereoscopic-test2.jpg=>separate/gm-stereoscopic-test2-2.jpg[63] JPEG 1280x384=>640x384 8-bit Grayscale DirectClass 156KB 26.800u 0:18.449
joint/gm-stereoscopic-test3.jpg=>separate/gm-stereoscopic-test3-1.jpg[64] JPEG 1440x432=>720x432 8-bit Grayscale DirectClass 201KB 26.570u 0:18.300
joint/gm-stereoscopic-test3.jpg=>separate/gm-stereoscopic-test3-1.jpg[65] JPEG 1440x432=>720x432 8-bit Grayscale DirectClass 205KB 26.580u 0:18.309
joint/gm-stereoscopic-test4.jpg=>separate/gm-stereoscopic-test4-1.jpg[66] JPEG 1440x432=>720x432 8-bit Grayscale DirectClass 201KB 26.350u 0:18.179
joint/gm-stereoscopic-test4.jpg=>separate/gm-stereoscopic-test4-1.jpg[67] JPEG 1440x432=>720x432 8-bit Grayscale DirectClass 197KB 26.350u 0:18.189
joint/JasdeepSinghFINAL.JPG=>separate/JasdeepSinghFINAL-1.jpg[68] JPEG 3168x1260=>1584x1260 8-bit Grayscale DirectClass 49.2KB 25.710u 0:17.779
joint/JasdeepSinghFINAL.JPG=>separate/JasdeepSinghFINAL-1.jpg[69] JPEG 3168x1260=>1584x1260 8-bit Grayscale DirectClass 49.2KB 25.700u 0:17.769
joint/Kids around the World.jpg=>separate/Kids around the World-1.jpg[70] JPEG 7054x2696=>3527x2696 8-bit Grayscale DirectClass 1.552MB 18.640u 0:13.640
joint/Kids around the World.jpg=>separate/Kids around the World-1.jpg[71] JPEG 7054x2696=>3527x2696 8-bit Grayscale DirectClass 1.749MB 18.680u 0:13.179
joint/Klingenthal.jpg=>separate/Klingenthal-2.jpg[72] JPEG 1560x650=>780x650 8-bit Grayscale DirectClass 221KB 18.210u 0:11.660
joint/Klingenthal.jpg=>separate/Klingenthal-2.jpg[73] JPEG 1560x650=>780x650 8-bit Grayscale DirectClass 205KB 18.210u 0:11.670
joint/Las Vegas January 2010.jpg=>separate/Las Vegas January 2010-1.jpg[74] JPEG 6870x2575=>3435x2575 8-bit Grayscale DirectClass 4.276MB 11.830u 0:08.030
joint/Las Vegas January 2010.jpg=>separate/Las Vegas January 2010-1.jpg[75] JPEG 6870x2575=>3435x2575 8-bit Grayscale DirectClass 4.366MB 12.000u 0:08.230
joint/Munich, Maximilian Avenue.jpg=>separate/Munich, Maximilian Avenue-2.jpg[76] JPEG 1500x1080=>750x1080 8-bit Grayscale DirectClass 377KB 11.330u 0:07.789
joint/Munich, Maximilian Avenue.jpg=>separate/Munich, Maximilian Avenue-2.jpg[77] JPEG 1500x1080=>750x1080 8-bit Grayscale DirectClass 397KB 11.340u 0:07.820
joint/Peering through the Petals.jpg=>separate/Peering through the Petals-2.jpg[78] JPEG 962x500=>481x500 8-bit Grayscale DirectClass 94.2KB 11.160u 0:07.710
joint/Peering through the Petals.jpg=>separate/Peering through the Petals-1.jpg[79] JPEG 962x500=>481x500 8-bit Grayscale DirectClass 90.1KB 11.170u 0:07.710
joint/Piano_in_3D.jpg=>separate/Piano_in_3D-1.jpg[80] JPEG 720x272=>360x272 8-bit Grayscale DirectClass 24.6KB 11.110u 0:07.679
joint/Piano_in_3D.jpg=>separate/Piano_in_3D-1.jpg[81] JPEG 720x272=>360x272 8-bit Grayscale DirectClass 24.6KB 11.110u 0:07.690
joint/Reflections.jpg=>separate/Reflections-1.jpg[82] JPEG 2088x1015=>1044x1015 8-bit Grayscale DirectClass 442KB 10.400u 0:07.269
joint/Reflections.jpg=>separate/Reflections-1.jpg[83] JPEG 2088x1015=>1044x1015 8-bit Grayscale DirectClass 537KB 10.420u 0:07.280
joint/splat.jpg=>separate/splat-1.jpg[84] JPEG 1886x1200=>943x1200 8-bit Grayscale DirectClass 41KB 10.160u 0:07.140
joint/splat.jpg=>separate/splat-1.jpg[85] JPEG 1886x1200=>943x1200 8-bit Grayscale DirectClass 41KB 10.160u 0:07.160
joint/spooky.jpg=>separate/spooky-1.jpg[86] JPEG 1600x984=>800x984 8-bit Grayscale DirectClass 143KB 9.820u 0:06.939
joint/spooky.jpg=>separate/spooky-1.jpg[87] JPEG 1600x984=>800x984 8-bit Grayscale DirectClass 147KB 9.830u 0:06.949
joint/Stereoscopic_Gibberlings_by_slipgatecentral.jpg=>separate/Stereoscopic_Gibberlings_by_slipgatecentral-1.jpg[88] JPEG 1000x459=>500x459 8-bit Grayscale DirectClass 77.8KB 9.660u 0:06.870
joint/Stereoscopic_Gibberlings_by_slipgatecentral.jpg=>separate/Stereoscopic_Gibberlings_by_slipgatecentral-1.jpg[89] JPEG 1000x459=>500x459 8-bit Grayscale DirectClass 81.9KB 9.650u 0:06.860
joint/Theatre of Food.jpg=>separate/Theatre of Food-1.jpg[90] JPEG 7100x1997=>3550x1997 8-bit Grayscale DirectClass 3.555MB 4.630u 0:03.919
joint/Theatre of Food.jpg=>separate/Theatre of Food-1.jpg[91] JPEG 7100x1997=>3550x1997 8-bit Grayscale DirectClass 3.51MB 4.740u 0:04.089
joint/TimBorisovFINAL.JPG=>separate/TimBorisovFINAL-2.jpg[92] JPEG 3304x1050=>1652x1050 8-bit Grayscale DirectClass 143KB 3.710u 0:03.440
joint/TimBorisovFINAL.JPG=>separate/TimBorisovFINAL-2.jpg[93] JPEG 3304x1050=>1652x1050 8-bit Grayscale DirectClass 143KB 3.710u 0:03.449
joint/Water balloon.jpg=>separate/Water balloon-1.jpg[94] JPEG 1024x615=>512x615 8-bit Grayscale DirectClass 152KB 3.470u 0:03.329
joint/Water balloon.jpg=>separate/Water balloon-1.jpg[95] JPEG 1024x615=>512x615 8-bit Grayscale DirectClass 147KB 3.470u 0:03.339
joint/Wernigerode Westerntor.jpg=>separate/Wernigerode Westerntor-2.jpg[96] JPEG 1540x1080=>770x1080 8-bit Grayscale DirectClass 328KB 2.980u 0:03.039
joint/Wernigerode Westerntor.jpg=>separate/Wernigerode Westerntor-2.jpg[97] JPEG 1540x1080=>770x1080 8-bit Grayscale DirectClass 332KB 2.990u 0:03.050
joint/WK2007_1_Melancolia.jpg=>separate/WK2007_1_Melancolia-1.jpg[98] JPEG 650x323=>325x323 8-bit Grayscale DirectClass 45.1KB 2.910u 0:03.000
joint/WK2007_1_Melancolia.jpg=>separate/WK2007_1_Melancolia-2.jpg[99] JPEG 650x323=>325x323 8-bit Grayscale DirectClass 45.1KB 2.910u 0:03.000
joint/WK2007_4_Larder.jpg=>separate/WK2007_4_Larder-1.jpg[100] JPEG 650x323=>325x323 8-bit Grayscale DirectClass 41KB 2.830u 0:02.970
joint/WK2007_4_Larder.jpg=>separate/WK2007_4_Larder-2.jpg[101] JPEG 650x323=>325x323 8-bit Grayscale DirectClass 41KB 2.830u 0:02.970 
```

另一个编辑：阅读[https://bugs.launchpad.net/ubuntu/+source/imagemagick/+bug/1079813](https://bugs.launchpad.net/ubuntu/+source/imagemagick/+bug/1079813)然后[http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22387](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22387) - 这是一个 ImageMagick 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:26:10.233

根据链接的论坛帖子，唯一的解决方案是升级到 ImageMagick 7。

# html - 部分标签不移动

> ID：13412435
> 
> 赞同：0
> 
> 时间：2012-11-16T07:46:48.643
> 
> 标签：html, css

我的部分标签内的部分标签具有 mainBody 的 id，它没有被向下推，它应该从 mainBody 的顶部向下 20 像素。代码：Index.html：[http](http://paste.ubuntu.com/1361141/) : //paste.ubuntu.com/1361141/reset.css 和 main.css：[http://paste.ubuntu.com/1362043/](http://paste.ubuntu.com/1362043/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:43:29.817

它称为边距折叠，是正常行为。 [http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)

只需删除 .news 元素上的边距（顶部和底部）。并添加：

```
padding: 20px 0 ; 
```

在#mainBody

此外，您没有正确使用 Section 元素#mainBody 几乎可以肯定是一个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:32:29.347

如果您更喜欢 MDN 文档，您可以在此处阅读有关折叠边距的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/margin_collapsing。](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

# c# - 将多个xml表（在同一个Root节点下）读入DataTables/DataSet

> ID：13412437
> 
> 赞同：1
> 
> 时间：2012-11-16T07:46:56.337
> 
> 标签：c#, xml, linq, linq-to-xml

我在根节点下有一个带有多个“报告”节点的 XML 源文档。我需要将每个“报告”节点读入它自己的 DataTable。看起来我要么需要使用 xsl 样式表转换我的源 XML 数据，以使其格式可以很好地工作，要么像这样遍历我的 xml 元素：

```
namespace XmlParse2
{
    class Program
    {
        static IEnumerable<string> expectedFields = new List<string>() { "Field1", "Field2", "Field3", "Field4" };

        static void Main(string[] args)
        {
            string xml = @"<Root>
                             <Report1>
                               <Row>
                                 <Field1>data1-1</Field1>
                                 <Field2>data1-2</Field2>
                                 <Field4>data1-4</Field4>
                               </Row>
                               <Row>
                                 <Field1>data2-1</Field1>
                                 <Field2>data2-2</Field2>
                               </Row>
                             </Report1>
                             <Report2>
                               <Row>
                                 <Field1>data1-1</Field1>
                                 <Field4>data1-4</Field4>
                               </Row>
                               <Row>
                                 <Field1>data2-1</Field1>
                                 <Field3>data2-3</Field3>
                               </Row>
                             </Report2>
                           </Root>";

            DataTable report1 = new DataTable("Report1");
            report1.Columns.Add("Field1");
            report1.Columns.Add("Field2");
            report1.Columns.Add("Field3");
            report1.Columns.Add("Field4");

            DataTable report2 = new DataTable("Report2");
            report2.Columns.Add("Field1");
            report2.Columns.Add("Field2");
            report2.Columns.Add("Field3");
            report2.Columns.Add("Field4");

            var doc = XDocument.Parse(xml);
            var report1Data = doc.Root.Elements("Report1").Elements("Row").Select(record => MapRecord(record));
            var report2Data = doc.Root.Elements("Report2").Elements("Row").Select(record => MapRecord(record));

            report1 = addRows(report1, report1Data);
            report2 = addRows(report2, report2Data);

            Console.ReadLine();
        }

        public static Dictionary<string, string> MapRecord(XElement element)
        {
            var output = new Dictionary<string, string>();
            foreach (var field in expectedFields)
            {
                bool hasField = element.Elements(field).Any();
                if (hasField)
                {
                    output.Add(field, element.Elements(field).First().Value);
                }
            }
            return output;
        }

        public static DataTable addRows(DataTable table, IEnumerable<Dictionary<string, string>> data)
        {
            foreach (Dictionary<string, string> dict in data)
            {
                DataRow row = table.NewRow();

                foreach(var item in dict) 
                {
                    row[item.Key] = item.Value;
                }

                table.Rows.Add(row);
            }

            return table;
        }
    }
} 
```

我的源数据不起作用的问题似乎是 Report1 和 Report2 都有名为“Row”的子节点，而我尝试使用 DataSet.ReadXml 做的事情并不成功，因为我的代码只是将所有名为 Row 的节点分组到一个 DataTable而不是单独的数据表。：/

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:58:56.973

```
XDocument xdoc = XDocument.Load(path_to_xml);
var tables = xdoc.Root.Elements()
                 .Select(report => {
                     DataTable table = new DataTable(report.Name.LocalName);
                     var fields = report
                            .Descendants("Row")
                            .SelectMany(row => row.Elements()
                                                  .Select(e => e.Name.LocalName))
                            .Distinct();

                     foreach(string field in fields)
                         table.Columns.Add(field);

                     foreach(var row in report.Descendants("Row"))
                     {
                         DataRow dr = table.NewRow();
                         foreach(var field in row.Elements())
                             dr[field.Name.LocalName] = (string)field;
                         table.Rows.Add(dr);
                     }                                   

                     return table;
                }); 
```

此查询将返回`IEnumerable<DataTable>`. 每个数据表将仅包含那些在 xml 中具有值的列。从 xml 检索的列名，每个表的列名可能不同。您的示例结构将是这样的：

```
DataTable: Report1
  Columns: Field1, Field2, Field4

DataTable: Report2
  Columns: Field1, Field3, Field4 
```

所有行数据都将添加到每个表中。

* * *

您可以将一些代码提取到方法中。它将使代码更易于理解：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var tables = xdoc.Root.Elements()
                 .Select(report => CreateTableFrom(report)); 
```

和方法：

```
private static DataTable CreateTableFrom(XElement report)
{
    DataTable table = new DataTable(report.Name.LocalName);
    table.Columns.AddRange(GetColumnsOf(report));

    foreach (var row in report.Descendants("Row"))
    {
        DataRow dr = table.NewRow();
        foreach (var field in row.Elements())
            dr[field.Name.LocalName] = (string)field;
        table.Rows.Add(dr);
    }

    return table;
}

private static DataColumn[] GetColumnsOf(XElement report)
{
    return report.Descendants("Row")
                 .SelectMany(row => row.Elements().Select(e => e.Name.LocalName))
                 .Distinct()
                 .Select(field => new DataColumn(field))
                 .ToArray();
} 
```

# symfony - Symfony2 Forms：表单中的自动注册块

> ID：13412444
> 
> 赞同：0
> 
> 时间：2012-11-16T07:48:08.243
> 
> 标签：symfony

我有一些表单，如果用户尚未登录，我想在此表单中显示一些附加字段（如电子邮件、用户名）并验证它。

现在我这样做：创建新的`FormType`：

```
class QuickRegisterType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('email')
            ->add('username')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\UserBundle\Entity\User',
            'validation_groups' => array(
                'QuickRegister'
            ),
        ));
    }

    public function getName()
    {
        return 'quick_register';
    }
} 
```

在控制器中：

```
$user = $this->getUser();

$formBuilder = $this->createFormBuilder($message, array(
    'cascade_validation' => true
));

$formBuilder->add('body', 'textarea');

if (!$user) {
    $formBuilder->add('quick_register', new QuickRegisterType(), array(
        'property_path' => 'sender'
    ));
} 
```

在模板中：

```
{% if form.quick_register is defined %}
    {# render this fields #}
{% endif %} 
```

就在 $form->bind($request); 之后 我在 $message->getSender() 中获得了有效用户；万事皆安！但我需要在表单验证后执行一些其他操作：

```
if ($form->isValid()) {
    $sender = $message->getSender();
    if (!$sender->getId()) {
        // perform some work with just registered user
        // like sending email, generate passwords, so on
    }
} 
```

对于所有项目的这种形式，这个动作通常是相同的，所以我想优化它。

起初我认为我可以在 DI 容器中创建新服务并称之为

```
$this->container->get('my.user_service')->afterQuickRegister($sender); 
```

[但现在我在http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)页面上阅读了 symfony2 中的表单事件

我现在不明白，我可以将它用于我的目的吗？我可以在 DI 容器中创建这样的表单订阅者吗？一般来说，我可以`User`在创建后以某种方式改变吗？什么是正确的形式事件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:21:34.497

我用 FormEvents 实现它。

```
form.type.quick_register:
    class: Acme\UserBundle\Form\Type\QuickRegisterType
    arguments: [ @form.type.quick_register.subscriber ]
    tags:
        - { name: form.type, alias: quick_register } 
```

并通过`form.type.quick_register.subscriber`服务传递订户。在订阅者中，我在 POST_BIND 事件中检查表单验证并做我的事情。伟大的！

# jquery - jquery自定义滑动菜单

> ID：13412449
> 
> 赞同：0
> 
> 时间：2012-11-16T07:48:47.067
> 
> 标签：jquery, html, css, menu

我对简单的 jquery 滑动菜单有疑问，这是我的代码：

[http://jsfiddle.net/kCK44/1/](http://jsfiddle.net/kCK44/1/)

我想要实现的是小箭头类：

```
<div class="arrow"></div> 
```

与子菜单 div 同时出现。现在，您可以看到它在子菜单完全向下滑动后立即完全显示。我应该将箭头 div 从其父级中取出并单独显示吗？或者有没有其他方法可以解决。

十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:31:40.267

带有 slideDown 的元素将始终在动画期间被裁剪。slideDown 设置溢出：隐藏到元素。您需要将箭头完全移动到 .submenu 内，并将菜单背景放到 UL 而不是 .submenu 中。

这是小提琴：http: [//jsfiddle.net/kCK44/8/](http://jsfiddle.net/kCK44/8/)

更新的 CSS：

```
.pageNavigation .mainNavigation ul li .submenu {
   min-width: 110px;
   display: none;
   position: absolute;
   top: 33px;
   left: -10px;
   z-index: 500;
}
.submenu .arrow {
   top:0px;
   left:33px;
   position: absolute;
   z-index: 9999;
   width:25px;
   height: 23px;
   background: #33ccff;
}
.pageNavigation .mainNavigation ul li .submenu ul {
   background: #ce3102;
   text-align: left;
   list-style-position: outside;
   list-style-image: none;
   list-style-type: none;
   margin: 15px 8px 5px;
   z-index: 500;
} 
```

# c++ - 堆栈内存错误创建核心文件？

> ID：13412451
> 
> 赞同：0
> 
> 时间：2012-11-16T07:49:02.500
> 
> 标签：c++, c

我从来没有见过这个，但我脑子里有这个东西！

这里的堆栈内存错误也可能是内存损坏。假设 ac/c++ 程序中存在堆栈溢出。

它会创建核心转储文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:59:54.653

堆栈溢出不会始终创建核心转储文件。如果幸运的话，这只是堆栈的简单溢出，一些局部变量或缓冲区被覆盖。它可能不会导致程序的任何异常行为，也不会导致核心转储文件。

但是，如果堆栈溢出覆盖了一些局部变量，即指针或返回地址，当您使用指针时，该指针现在是无效地址并指向未映射的内存页面，或者程序使用指针写入只读页面，它会导致分段错误并创建核心转储文件。或者返回地址被覆盖，CPU返回到无效的寻址空间或执行无效的代码，也会引起异常并创建core文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:23:11.450

这取决于操作系统和语言运行时。我假设您在谈论某种 Unix/Linux 风格，因为您提到了核心转储。

通常，堆栈之外会有一些（可能是单页）未映射的虚拟内存。如果溢出少于该数量，则程序将尝试访问该数量，从而产生分段错误。如果程序不处理信号，那么它将中止；如果启用了核心转储，则会生成一个。您可能需要启用核心转储，可能是`ulimit -c unlimited`从您用来启动程序的 shell 中使用。

如果您溢出大量，那么您可能会覆盖程序内存的其他部分。如果发生这种情况，那么所有的赌注都会被取消；该程序可能会崩溃，或者可能会继续处于损坏状态并在未来的任何时候造成任何类型的损害。

这是假设，通过“溢出”，您的意思是使用比深度调用堆栈和大型自动对象的某种组合分配的更多的堆栈内存。如果您正在谈论写入堆栈的错误部分（例如，通过对自动数组的越界访问），那么您通常会得到随机内存损坏而不是分段错误；再一次，程序可能会在一个损坏的状态下蹒跚而行，结果是不可预测的。

# cocos2d-iphone - 从零开始构建 2D 游戏引擎或学习 Cocos 2D

> ID：13412452
> 
> 赞同：3
> 
> 时间：2012-11-16T07:49:06.720
> 
> 标签：cocos2d-iphone, game-engine

正如标题所说，明年我将专注于移动设备上的游戏编程。而且我不确定我是否应该直接开始学习 Cocos2D，因为这个引擎有很多很棒的教材，我认为它非常有能力。或者我应该学习编写自己的引擎 - 我有这本由 Michael Daley 撰写的 400 页的书，它教你使用粒子效果、平铺贴图和所有这些来构建一个简单的 2d 引擎和游戏...

我的问题是知道如何从头开始构建游戏引擎然后转向学习 Cocos2D 是否有任何巨大的优势，或者我可以安全地放弃它并直接学习 Cocos 框架吗？构建 2D 引擎等是否特别困难。我需要任何特定的数学技能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:57:46.530

我想说您需要决定您的目标是创建 2d 游戏还是学习如何制作 2d 游戏引擎。如果您的目标是立即制作游戏，那么我会使用一些现成的引擎。我不熟悉 Cocos2D，所以我不能说它是否是一个好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:06:00.417

仅适用于 iPhone，那么[Cocos2D](http://www.cocos2d-iphone.org)是最佳选择。要支持 android 也可以使用[cocos2d-x](http://www.cocos2d-x.org)

Cocos2D : Objective C - iOS 的 2D 游戏引擎

Cocos2D-X : 基于 C++ 的 iOS / Android 游戏引擎

# c++ - std::vector 内存，不需要的 0 的向量

> ID：13412454
> 
> 赞同：1
> 
> 时间：2012-11-16T07:49:15.880
> 
> 标签：c++, qt, memory, vector

我的代码适用于我纯粹的过剩实现，但我正试图让它在 qt 中工作。

我有一个用于金属丝网系统的质点向量

```
std::vector<masspoint> m_particles; 
```

问题是在我的 qt 版本中，我写的东西都没有真正坚持，我留下了一个零数组。基本上我很困惑为什么 glut 版本具有正确的值，但 qt 并没有给出它基本上是相同的代码。qt代码有什么问题？

是的，我在使用 qDebug 时只看到零。当我在 qt 版本中调用我的绘图函数时，所有组件中的所有顶点都变为 0，因此什么也看不到。

```
int myboog = 1;
int county = 0;
// Constructors
Cloth::Cloth(float width, float height, int particles_in_width, int particles_in_height):
m_width(particles_in_width),
m_height(particles_in_height),
m_dimensionWidth(width),
m_dimensionHeight(height),
m_distanceX(width/(float)particles_in_width),
m_distanceY(height/(float)particles_in_height)
{

    //Set the particle array to the given size
    //Height by width

    //mparticles is the name of our vector
    m_particles.resize(m_width*m_height);
    qDebug() << m_particles.size();

    // Create the point masses to simulate the cloth
    for (int x = 0; x < m_width; ++x)
    {
        for (int y=0; y < m_height; ++y)
        {
            // Place the pointmass of the cloth, lift the edges to give the wind more effect as the cloth falls
            Vector3f position = Vector3f(m_dimensionWidth * (x / (float)m_width),
                                         ((x==0)||(x==m_width-1)||(y==0)||(y==m_height-1)) ? m_distanceY/2.0f:0,
                                         m_dimensionHeight * (y / (float)m_height));

            // The gravity effect is applied to new pmasspoints
            m_particles[y * m_width + x] = masspoint(position,Vector3f(0,-0.06,0));

        }

    }

    int num = (int)m_particles.size();
    for (int i=0; i<num; ++i)
    {
        masspoint* p = &m_particles[i];
        if(myboog)
        {
            qDebug() << "test " <<  *p->getPosition().getXLocation() << county;
            county++;
        }
    }
    myboog = 0;

    // Calculate the normals for the first time so the initial draw is correctly lit
    calculateClothNormals();
} 
```

CLoth 的构造函数中涉及的质量点代码

```
#ifndef MASSPOINT_H
#define MASSPOINT_H
#include <QGLWidget>
#include "vector3f.h"
class masspoint
{

private:
Vector3f m_position;                // Current Location of the pointmass
Vector3f m_velocity;                // Direction and speed the pointmass is traveling in

Vector3f m_acceleration;            // Speed at which the pointmass is accelerating (used for gravity)
Vector3f m_forceAccumulated;        // Force that has been accumulated since the last update
Vector3f m_normal;                  // Normal of this pointmass, used to light the cloth when drawing

float m_damping;                    // Amount of velocity lost per update
bool m_stationary;                  // Whether this pointmass is currently capible of movement

public:

masspoint& operator= (const masspoint& particle);

//Some constructors
masspoint();
masspoint(const masspoint& particle);
masspoint(Vector3f position, Vector3f acceleration);

//Like eulur integration
void integrate(float duration);

// Accessor functions

//Get the position of the point mass
inline Vector3f getPosition() const {return m_position;} 
```

CLoth 的构造函数中涉及的向量内容

```
#ifndef VECTOR3F_H
#define VECTOR3F_H

#include <math.h>

// Vector library to be used
class Vector3f
{
private:
    float m_x, m_y, m_z;
public:
     const float* getXLocation() const { return &m_x; } 
```

# testing - 使用 Selenium 自动测试 UIWebView 内容

> ID：13412455
> 
> 赞同：3
> 
> 时间：2012-11-16T07:49:19.890
> 
> 标签：testing, mocking, selenium-rc, iphone-web-app, saucelabs

我有一个 iPhone 应用程序，其中包含用于呈现某些 UI 方面的 UIWebView。UIWebView 内容通过 NSURLRequests 与 Objective-C 端进行通信。我想用 Selenium 测试 UIWebView 内容，以便它可以自动化。

问题是与本机端的通信，因为这不受 Selenium 支持。因此，需要一种方法来“伪造”Objective-C 端。UIWebView 将请求发送到特定的（不存在的）URL，然后由本机代码解释并处理。当使用 Selenium 运行 UIWebView 的内容时，这些请求总是会失败。

有没有办法以某种方式在 Selenium 中提供支持，允许捕获这些请求并提供虚拟响应，或者有更好的工具吗？

最好，我还想使用 Sauce Labs 或类似的 Selenium 服务运行 Selenium 测试，因此黑客`/etc/hosts`也不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:40:38.607

你试过[Appium](https://github.com/appium/appium)吗？它应该允许您编写调用 UIAutomation 库的 WebDriver 测试。

# java - ObjectOutput 抛出 java.io.NotSerializableException

> ID：13412456
> 
> 赞同：2
> 
> 时间：2012-11-16T07:49:40.303
> 
> 标签：java, serialization, bytearrayoutputstream, notserializableexception

这是即将被序列化为字节数组的类。

```
public class DummyClass implements Serializable
{
    private static transient final long serialVersionUID    = -8483859843874771619L;
    public String   y;

    public DummyClass(String y)
    {
        this.y = y;
    }
    public String getY()
    {
        return this.y;
    }
} 
```

这是序列化执行测试

```
 ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = null;
    byte[] bs = null;
    try
    {
        DummyClass dummyClass = new DummyClass("World I Salute you");
        out = new ObjectOutputStream(bos);
        out.writeObject(dummyClass); // <--- Throws exception here
        bs = bos.toByteArray();
    }
    finally
    {
        out.close();
        bos.close();
    } 
```

以及关于堆栈跟踪：

```
java.io.NotSerializableException: tests.DummyClassTest
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at tests.DummyClassTest.dummyTest(DummyClassTest.java:109) 
```

显而易见的问题是我做错了什么？

干杯。

**编辑**：

全班

```
public class DummyClassTest
{
    public class DummyClass implements Serializable
    {
        private static transient final long serialVersionUID    = -8483859843874771619L;
        public String   y;

        public DummyClass(String y)
        {
            this.y = y;
        }
        public String getY()
        {
            return this.y;
        }
    }

    @Test
    public void dummyTest() throws IOException
    {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutput out = null;
        byte[] bs = null;
        try
        {
            DummyClass dummyClass = new DummyClass("World I Salute you");
            out = new ObjectOutputStream(bos);
            out.writeObject(dummyClass);
            bs = bos.toByteArray();
        }
        finally
        {
            out.close();
            bos.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T07:57:24.077

非静态内部类具有对其外部类实例的隐式引用。所以当你序列化 DummyClass 时，你也在序列化这个对拥有它的 DummyClassTest 实例的隐式引用。

将 DummyClass 定义为顶级类（非嵌套）或静态内部类，一切都会按预期工作。

以下：

```
public class DummyClassTest {
    public class DummyClass {
    }
} 
```

或多或少等同于

```
public class DummyClassTest {
}

public class DummyClass {
    private DummyClassTest outerInstance;
} 
```

# image - Silverlight：使用 WriteableBitmap 从外部 URL 图像中捕获像素会引发安全异常

> ID：13412458
> 
> 赞同：0
> 
> 时间：2012-11-16T07:49:59.057
> 
> 标签：image, silverlight, writeablebitmap

我有几个`UIElement`s，包括一个`Image`（带有外部 URL 图像），然后我想捕捉这些元素的缩略图，所以我`WriteableBitmap`用来捕捉每个 UIElement 的像素。

但是，当我尝试捕获像素以供`Image`使用时：

```
WriteableBitmap wb = new WriteableBitmap(image, new ScaleTransform()
                     {
                         ScaleX = 0.5,
                         ScaleY = 0.5,
                     });
...
wb.GetPixeli(x, y); // Throws exception 
```

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=vs.95).aspx)

> 如果 WriteableBitmap 是使用跨域内容构造的，则 WriteableBitmap 类具有限制对 Pixels 数组的访问的安全模型。例如，使用引用来自另一个域的 URL 的 BitmapImage 构造的 WriteableBitmap 不允许访问其 Pixels 数组。该限制扩展到使用 URL 派生属性设置其部分或全部内容的任何 UI 元素。特别是，此限制适用于“从 MediaElement 抓取正在运行的视频的帧”场景。如果 MediaElement.Source 引用来自另一个域的视频文件，则通过引用 MediaElement 作为元素源创建的 WriteableBitmap 会限制对 Pixels 数组的访问。

那么为了捕捉这几个`UIElement`s（包括一个`Image`元素）的缩略图，我是否必须将图像下载到临时目录然后渲染它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:44:32.493

我的建议是仔细检查您要执行的操作 - 如果您正在编写 Silverlight 应用程序，您可能希望在下载完整图像之前减少流向客户端的数据量。在服务器端（即时或缓存）生成这些缩略图并提供更小的缩略图会更好吗？在哪里可以使用完整的 .NET 框架来生成缩略图？

# x++ - 职责（表名）存储在 AX 中的什么位置？

> ID：13412461
> 
> 赞同：0
> 
> 时间：2012-11-16T07:50:19.870
> 
> 标签：x++, axapta, dynamics-ax-2012

我想访问安全职责（在代码中），但我不知道它们存储在哪里（在哪个表中）？

权限存储在 SecurityTask 中，现在我需要知道职责存储在 AX 2012 中的位置。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:18:06.860

我在这里找到它：http: [//arsalanax.blogspot.be/2012/02/role-based-security-in-ax.html](http://arsalanax.blogspot.be/2012/02/role-based-security-in-ax.html)

角色存储在 SecurityRole 中

SecurityUserRole 中的用户到角色映射

存储在 SecurityTask 中的职责和权限

权限映射的职责存储在 SecuritySubTask 中

角色到职责的映射存储在 SecurityRoleTaskGrant

更新（已添加查询）

```
SecurityTaskEntryPoint  taskEntryPoint;
SecurityRole            role;
SecurityRoleTaskGrant   taskGrant;
SecuritySubTask         subTask;
SecurityTask            privilege;
str privName;
str dutyName;
str entrName;
str accessLevel;
;

while select taskEntryPoint
join subTask
    where subTask.SecuritySubTask == taskEntryPoint.SecurityTask
join taskGrant
    where taskGrant.SecurityTask == subTask.SecurityTask
join role
    where role.RecId == taskGrant.SecurityRole
    &&  role.AotName like 'Sales*'
    //|| role.AotName like 'System*'
{
     if (subTask.RecId)
    {
        switch (taskEntryPoint.PermissionGroup)
        {
            case AccessRight::View:
                accessLevel = "R";
                break;
            case AccessRight::Edit:
                accessLevel = "U";
                break;
            case AccessRight::Add:
                accessLevel = "C";
                break;
            case AccessRight::Delete:
                accessLevel = "D";
                break;
            default:
                accessLevel = "";
                break;
        }
    }

    select privilege
        where privilege.RecId == taskGrant.SecurityTask
        && SecurityTaskType::Duty == privilege.Type;
    dutyName = privilege.AotName;

    select privilege
        where privilege.RecId == subTask.SecuritySubTask
        && SecurityTaskType::Privilege == privilege.Type;
    privName = privilege.AotName;

    info(strFmt("EP: %1, Pr: '%2', Du: %3, Ro: %4, Ac: %5", taskEntryPoint.EntryPoint, privName, dutyName, role.AotName, accessLevel));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:20:54.683

安全职责在表中`SecurityTask`，类型等于 1 (SecurityTaskType::Duty)。

安全权限在`SecurityTask`类型等于 0 的表中 (SecurityTaskType::Privilege)

安全进程周期在表中`SecurityTask`，类型等于 2 (SecurityTaskType::ProcessCycle)。

所有这些对象也在表中（或者更确切地说是视图）`SysModelElement`（ElementType == 135 的职责）。

# ios - 我可以从我的 ios 应用程序中清除 safari 的缓存吗？是否有任何方法或其沙盒

> ID：13412462
> 
> 赞同：1
> 
> 时间：2012-11-16T07:50:29.383
> 
> 标签：ios, facebook

基本上我的应用程序使用 safari 登录到 facebook ive 但注销不正确我在 appdidfinishlaunching 和按钮操作中使用了会话 closeandcleartoken 但不知何故会话仍然存在并且它不会提示用户再次登录他们的名字并直接访问脸书页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:20:35.283

你能检查一下下面这两个链接吗，希望对你有帮助

[facebook-ios-sdk 注销问题](https://stackoverflow.com/questions/6226950/facebook-ios-sdk-logout-question)

[了解 iPhone 的 NSHTTPCookieStorage](https://stackoverflow.com/questions/2520331/understanding-nshttpcookiestorage-for-the-iphone)

旧更新（请参阅下面的新更新）：我认为以下链接可能对您有用，请尝试给我反馈，谢谢。

[是否可以以编程方式更改 iOS Safari 设置](https://stackoverflow.com/questions/9632294/is-it-possible-to-change-ios-safari-settings-programmatically)

新更新：//因为我们无法清除 safari，所以这个想法可能对您有用。//概念是 -> 在您的应用程序中，您需要创建设置页面（检查在 iphone 的设置中是否有任何 facebook 帐户？如果是，您可以将图像发布到 facebook（您可以使用 uiswitch，当用户切换 facebook 服务时）要打开，它会在 iphone 的设置菜单中检查，是否有任何 facebook 帐户？如果有，您可以打开 facebook 服务））。然后你需要创建“分享页面”，在“分享页面”中会检查你的应用程序的设置页面，facebook服务是否打开？如果是，那么你可以分享图像到facebook，所以我们可以说在分享页面中会有一个分享图片到 facebook 的代码，并且在您的应用程序的设置页面中应该类似于以下内容。`So we just let user log in and log out facebook in iphone setting, and we just check user's account from iphone's setting, so you don't have to headache with facebook logout problem anymore :)`，在ios 5中，iphone的设置中没有facebook，所以你别无选择，我从app store的流行应用中寻找解决方案，我提出了这个解决方案，请看下面的代码，希望对你有帮助，其实我已经已经回答了您的问题范围，所以这类似于扩展问题，所以下次请发布一个新问题，希望它至少能引导您走上正确的道路:)。

```
- (void) facebookAuthen 
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"];

    if (accountType == nil) { // ios lower than 6
        if (FBSession.activeSession.isOpen) {
            [appDelegate closeSession];
            NSLog(@"session close");
        } else {
            [appDelegate openSessionWithAllowLoginUI:YES];
            NSLog(@"open session");
        }
    }
    else { // ios 6
        NSDictionary* options = [NSDictionary dictionaryWithObject:@"your facebook id" forKey:ACFacebookAppIdKey];
        [accountStore requestAccessToAccountsWithType:accountType options:options completion:^(BOOL granted, NSError *error) {
            if(granted) { //has an account in iphone's setting
                // do something 
            }
            else {
                // show alert
            }
        }];
    }
} 
```

# c++ - 分配给匿名实例的原始类型的默认构造函数

> ID：13412468
> 
> 赞同：9
> 
> 时间：2012-11-16T07:50:43.883
> 
> 标签：c++, c++11

考虑以下代码：

```
#include <iostream>

template<class T>
void f(T& t)
{
    t = T();
}

int main()
{
    int x = 42;
    f(x);
    std::cout << x;
} 
```

C++11 标准是否定义了输出应该是什么？我的编译器输出 0，但是我的印象是原始类型的默认构造函数是空操作或未定义的行为。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-16T07:55:03.627

您的代码中不涉及“默认构造函数”。只有类类型可以有构造函数。标量类型没有默认或其他构造函数。

该`T()`语法创建了一个由所谓*的 value-initialization 初始化*的临时对象。值初始化仅解析为*类*类型的构造函数调用，并且仅适用于具有*用户定义*构造函数的那些（在 C++11 中有一些细微差别）。对于其他类型，值初始化根本不涉及任何构造函数。它按照自己特定且相当复杂的初始化规则进行，这些初始化规则直接定义数据的初始值，而不涉及任何构造函数（参见语言规范中的 8.5）。

对于标量类型，值初始化执行零初始化。这就是为什么您的代码保证输出为零的原因。抽象初始化过程的确切细节在 C++ 语言标准的版本之间发生了变化，但是从一开始 C++ 语言就保证该`T()`表达式的`T == int`计算结果为零。即，即使在 C++98 中，您的代码也会输出零。

一种常见的误解是，所有这些`T(...)`表达式都必然暗示构造函数调用。实际上，`T(...)`表达式是一个函数转换表达式（不管参数的数量）（参见语言规范中的 5.2.3），它可能会在某些特定情况下解析为构造函数调用，并且与任何构造函数无关其他情况。

例如，这段代码

```
struct S { int x, y; };

S s = S(); 
```

尽管类具有默认构造函数，但保证`s`用零（`s.x`和）初始化。我专门提出了这个例子来说明这样一个事实，即即使在存在默认构造函数的情况下，表达式仍然可以完全忽略它并按照自己的规则工作。`s.y``S``T()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T08:00:44.170

以下是标准对您的问题的说明：

在*8.5 中。第10段：*

初始值设定项为空括号集的对象，即 ()，应进行值初始化。

* * *

在*8.5 中。第 7 段：*

对 T 类型的对象进行值初始化意味着：

*   如果 T 是具有用户提供的构造函数 (12.1) 的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误） ;
*   如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是零初始化的，并且如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
*   如果 T 是一个数组类型，那么每个元素都是值初始化的；
*   **否则，对象被零初始化。**

* * *

强调我的。所以，由于`int`它甚至不是一个类类型，它属于最后一条规则，并且被零初始化，所以这是一个绝对正确的行为。

# php - enforce browser reload

> ID：13412478
> 
> 赞同：0
> 
> 时间：2012-11-16T07:51:06.260
> 
> 标签：php, javascript, caching, reload

can I somehow enforce a browser-reload? I'm already using this:

```
header("Expires: Mon, 2 Jan 2012 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-cache, must-revalidate");
header("Pragma: no-cache"); 
```

But if I change for example JavaScript-Code in my website, the visitors of my website have to manually reload the page for an updated javascript. Do I have to send headers in the .js files also? How to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:55:55.037

Browsers should probably be better about this, but change this:

```
<script src="file.js"> 
```

to this:

```
<script src="file.js?last-modified-time-goes-here"> 
```

This will load the latest JS file each time and you don't have to change the filename!

# python - Python：SMTP init 方法在 try:except 块中使用时挂起

> ID：13412480
> 
> 赞同：3
> 
> 时间：2012-11-16T07:51:18.653
> 
> 标签：python, sockets, exception, smtplib, getaddrinfo

我正在尝试通过电子邮件发送一些回溯，我正在使用 python `SMTP`lib。

我的代码看起来像这样

```
def send_email_thread(from_addr, to_addr, message):
    server = smtplib.SMTP("smtp.googlemail.com", 587)
    server.ehlo()
    server.starttls()
    server.login(SENDMAIL_SMTP_USER, SENDMAIL_SMTP_PASSWD)
    server.sendmail(from_addr, to_addr, message)
    server.quit() 
```

我试图获取回溯的实际代码

```
try:
    /*Something here that gives exception*/
except Exception:
    send_email_thread(from_addr,to_addr, str(traceback.format_exc())) 
```

现在的问题是这条线

```
server = smtplib.SMTP("smtp.googlemail.com", 587) 
```

挂起并且不返回。在稍微挖掘问题时，我发现`__init__`对于`SMTP`类调用，后者又调用使用 linux 的`connect()`套接字函数`createconnection``getaddrinfo()`

调用路径：

```
mycode-->smtplib.SMTP---> __init__--->connect---->createconnection()--->getaddrinfo() 
```

`getaddrinfo()`电话永远不会返回。这是挂机点。可能是什么问题呢？另外，我没有收到来自`SMTP`lib 的任何回溯或异常。那是因为我已经发现了一个异常吗？

这只发生在我调用块`send_mail_thread()`内的函数时`except`。从上面：

```
except Exception:
    send_email_thread(from_addr,to_addr, str(traceback.format_exc())) 
```

我试着把它放在外面，它奏效了！哪些信号表明捕获异常然后运行它可能会导致问题？任何指针？我在 Linux 上使用 python 2.7

[编辑]

在下面的一些评论之后，我想添加以下更新。代码在从另一个主进程（使用`multiprocessing`模块）创建的进程内运行。然后`send_email_function`在这个子进程的线程中调用。

我创建了一个更简单的程序来测试这一点，其中所有事情都在一个进程中完成。它成功了。这意味着`getaddrinfo()`当某些子进程出现异常或`multiprocessing`模块处理 POSIX 调用的能力如何时，存在一些问题（死锁）

# rest - 解析具有多个值的 HTTP 授权标头？

> ID：13412482
> 
> 赞同：0
> 
> 时间：2012-11-16T07:51:24.107
> 
> 标签：rest, groovy, http-headers

我正在创建一个休息 api，其中需要在 http 标头中传输 apikey 和签名。现在我可以在 http 标头中提供所需的参数，并且控制器可以很好地读出它，但我想知道是否有更好的方法来做到这一点。

我们在 HTTP Authorization 标头中传输 apikey 和 sha1 签名的值，并通过使用来检索它。

```
request.getHeader("AUTHORIZATION").split(',').
        inject([:]) { map, token ->
            token.split('=').with {
                map[it[0]] = it[1]
            }
            map
        } 
```

结果是一个包含键/值对的映射

有没有更好的方法来做到这一点？

# windows - 附加到 Windows cmd 的当前目录在“参数”中传递，导致参数无效

> ID：13412483
> 
> 赞同：0
> 
> 时间：2012-11-16T07:51:27.553
> 
> 标签：windows, cmd, arguments

我正在尝试在 windows cmd 中运行 gimp 批处理命令。

```
 "C:\Program Files (x86)\GIMP-2.0\bin\gimp-console-2.6.exe" -i -b --verbose "(maketemplates \"C:\\autocovers\\sample\")" -b "(gimp-quit 0)" 
```

我得到以下信息： GIMP-Error: Opening 'C:\Users\IOANNIS(maketemlpates "C:\autocovers\sample")' failed: Invalid argument

该参数确实似乎无效，因为它附加了当前目录！知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:11:19.763

我没有在我的 Windows 测试盒上安装 GIMP，所以我无法对此进行测试，但我怀疑该`--verbose`选项可能会导致问题。

该选项`-b`需要一个参数，但在您的命令行中，您将选项放在及其参数`--verbose` *之间* `-b`，这将使字符串`--verbose`成为`-b`. 这将预期的参数保留`"(maketemplates \"C:\\autocovers\\sample\")"`为非选项参数。如[文档所述](http://www.gimp.org/man/gimp.html)，`gimp-console`将所有非选项参数视为文件名。

更改您的命令行

```
"C:\Program Files (x86)\GIMP-2.0\bin\gimp-console-2.6.exe" -i -b --verbose "(maketemplates \"C:\\autocovers\\sample\")" -b "(gimp-quit 0)"</code> 
```

至

```
"C:\Program Files (x86)\GIMP-2.0\bin\gimp-console-2.6.exe" --verbose -i -b "(maketemplates \"C:\\autocovers\\sample\")" -b "(gimp-quit 0)"</code> 
```

你的问题应该会消失。

# c-preprocessor - Prevent Doxygen from carrying out conditional compilation (compiler-intrinsic defines)

> ID：13412488
> 
> 赞同：0
> 
> 时间：2012-11-16T07:51:53.243
> 
> 标签：c-preprocessor, doxygen

I have a lot of code doing conditional compilation based on defines that come from the compiler, not any definitions in the code itself or external headers. For example, quite frequently I have things such as:

```
#if defined _MSC_VER || defined __ICL
// A lot of freakin code
#elif defined __GNUC__  || defined __ICC
// A bunch more here
#else
#error "Unsupported environment"
#endif 
```

I need to generate documentation for all the code inside the platofm/compiler-specific sections, but I cannot simply set ENABLE_PREPROCESSING to NO because it must be YES for INCLUDE_GRAPH and INCLUDED_GRAPH to work, according to the documentation.

So, how do I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:34:42.383

You'd first have to define a macro `DOXYGEN` or similar in the "predefined" section of the doxygen configuration. Then you'd have to split up the `#elif` in separate `#if` and keep track of the fact that you found one valid configuration.

```
#if defined _MSC_VER || defined __ICL || defined DOXYGEN
#define WE_FOUND_SOME
// A lot of freakin code
#endif
#if defined __GNUC__  || defined __ICC || defined DOXYGEN
#define WE_FOUND_SOME
// A bunch more here
#endif
#ifndef WE_FOUND_SOME
# error "Unsupported environment"
#endif 
```

But beware that if these different parts define the same functions or macros, that doxygen will easily get lost.

# nuget - SignalR 0.5.3 在哪里？

> ID：13412489
> 
> 赞同：1
> 
> 时间：2012-11-16T07:52:22.367
> 
> 标签：nuget, signalr

在互联网上的多个来源上，我看到 SignalR 0.5.3 已发布，我什至找到了 NuGet Manager 的屏幕截图，上面有 v 0.5.3。![在此处输入图像描述](../Images/16ffbe28d471cdd1b34d033a5c14adaf.png)

但是在我的 Nuget 管理中，只有 v 0.5.2，而[这里](http://nuget.org/packages/signalr)最新的是 0.5.2。

那么，问题是我在哪里可以获得最新的 SignalR？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:08:59.630

看起来 0.5.3 在库中，只是没有被标记为最新版本。

[http://nuget.org/packages/SignalR/0.5.3](http://nuget.org/packages/SignalR/0.5.3)

尝试在包管理器控制台中运行它：

```
Install-Package SignalR -Version 0.5.3 
```

但是，我怀疑 0.5.3 是因为问题（？）而被撤下的，因为[SignalR](http://signalr.net/)官方网站说 0.5.2 是最新的。也可能是他们要将 NuGet 包重命名为`Microsoft.AspNet.SignalR`.

# python - 如何使用 django 使 emacs 像“ipython manage.py shell”一样工作？

> ID：13412491
> 
> 赞同：1
> 
> 时间：2012-11-16T07:52:53.920
> 
> 标签：python, django, emacs

我是 emacs 和 Django 的新手。

我发现 ipython 非常方便，尤其是它的 TAB 补全。在 ipython Django shell 中，TAB 补全很方便，因为它还包括 Django 设置。但是，当我打开一个 python 文件时，例如使用“emacs -nw models.py”，Django 相关模块的 TAB 完成不再那么好。

任何身体都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:01:56.850

如果您需要自动完成，请使用[rope](http://rope.sourceforge.net/index.html)。

`M-/`尽管默认的自动编译热键不同（

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:06:20.097

我想你可能想试试这个：Emacs as a Django IDE with python-django.el

[http://from-the-cloud.com/en/emacs/2013/01/28_emacs-as-a-django-ide-with-python-djangoel.html](http://from-the-cloud.com/en/emacs/2013/01/28_emacs-as-a-django-ide-with-python-djangoel.html)

通过自动完成和绝地设置，您可以像使用 django 模型和视图的 Ipython 一样完成 TAB 完成。

它还为 ipdb 提供了一个奇妙的绑定来跟踪一个称为 pdbtracking 的错误。

你会喜欢的。谢谢

# python - Python ElementTree 模块：使用“find”、“findall”方法时如何忽略 XML 文件的命名空间来定位匹配元素

> ID：13412496
> 
> 赞同：162
> 
> 时间：2012-11-16T07:53:17.280
> 
> 标签：python, namespaces, find, elementtree, findall

我想使用“findall”的方法在ElementTree模块中定位源xml文件的一些元素。

但是，源 xml 文件 (test.xml) 具有命名空间。我将 xml 文件的一部分截断为示例：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<XML_HEADER xmlns="http://www.test.com">
    <TYPE>Updates</TYPE>
    <DATE>9/26/2012 10:30:34 AM</DATE>
    <COPYRIGHT_NOTICE>All Rights Reserved.</COPYRIGHT_NOTICE>
    <LICENSE>newlicense.htm</LICENSE>
    <DEAL_LEVEL>
        <PAID_OFF>N</PAID_OFF>
        </DEAL_LEVEL>
</XML_HEADER> 
```

示例python代码如下：

```
from xml.etree import ElementTree as ET
tree = ET.parse(r"test.xml")
el1 = tree.findall("DEAL_LEVEL/PAID_OFF") # Return None
el2 = tree.findall("{http://www.test.com}DEAL_LEVEL/{http://www.test.com}PAID_OFF") # Return <Element '{http://www.test.com}DEAL_LEVEL/PAID_OFF' at 0xb78b90> 
```

虽然可以，但是因为有命名空间“{http://www.test.com}”，所以在每个标签前面加上命名空间是很不方便的。

使用“find”、“findall”等方法时如何忽略命名空间？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-09-18T19:37:36.667

最好先对其进行解析，然后再修改结果中的标签，而不是修改 XML 文档本身。这样您就可以处理多个命名空间和命名空间别名：

```
from io import StringIO  # for Python 2 import from StringIO instead
import xml.etree.ElementTree as ET

# instead of ET.fromstring(xml)
it = ET.iterparse(StringIO(xml))
for _, el in it:
    prefix, has_namespace, postfix = el.tag.partition('}')
    if has_namespace:
        el.tag = postfix  # strip all namespaces
root = it.root 
```

这是基于这里的讨论：http: [//bugs.python.org/issue18304](http://bugs.python.org/issue18304)

*更新：* `rpartition`而不是确保即使没有命名空间也`partition`能获得标签名称。`postfix`因此你可以浓缩它：

```
for _, el in it:
    _, _, el.tag = el.tag.rpartition('}') # strip ns 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-26T15:44:24.643

如果在解析之前从 xml 中删除 xmlns 属性，那么树中的每个标记都不会有命名空间。

```
import re

xmlstring = re.sub(' xmlns="[^"]+"', '', xmlstring, count=1) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-11-20T19:07:52.140

到目前为止的答案明确地将命名空间值放在脚本中。对于更通用的解决方案，我宁愿从 xml 中提取名称空间：

```
import re
def get_namespace(element):
  m = re.match('\{.*\}', element.tag)
  return m.group(0) if m else '' 
```

并在 find 方法中使用它：

```
namespace = get_namespace(tree.getroot())
print tree.find('./{0}parent/{0}version'.format(namespace)).text 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-11-30T11:21:06.370

这是@nonagon 答案的扩展（从标签中删除命名空间）也可以从属性中删除命名空间：

```
import io
import xml.etree.ElementTree as ET

# instead of ET.fromstring(xml)
it = ET.iterparse(io.StringIO(xml))
for _, el in it:
    if '}' in el.tag:
        el.tag = el.tag.split('}', 1)[1]  # strip all namespaces
    for at in list(el.attrib.keys()): # strip namespaces of attributes too
        if '}' in at:
            newat = at.split('}', 1)[1]
            el.attrib[newat] = el.attrib[at]
            del el.attrib[at]
root = it.root 
```

显然这是对 XML 的永久破坏，但如果这是可以接受的，因为没有非唯一的标记名称，并且因为您不会编写需要原始名称空间的文件，那么这可以使访问它更容易

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-12-12T07:52:21.660

改进 ericspod 的答案：

我们可以将其包装在支持 with 构造的对象中，而不是全局更改解析模式。

```
from xml.parsers import expat

class DisableXmlNamespaces:
    def __enter__(self):
            self.oldcreate = expat.ParserCreate
            expat.ParserCreate = lambda encoding, sep: self.oldcreate(encoding, None)
    def __exit__(self, type, value, traceback):
            expat.ParserCreate = self.oldcreate 
```

然后可以按如下方式使用

```
import xml.etree.ElementTree as ET
with DisableXmlNamespaces():
     tree = ET.parse("test.xml") 
```

这种方式的美妙之处在于它不会改变 with 块之外无关代码的任何行为。在使用 ericspod 的版本后，在不相关的库中出现错误后，我最终创建了这个，它也碰巧使用了 expat。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-10-08T10:18:17.417

您也可以使用优雅的字符串格式化构造：

```
ns='http://www.test.com'
el2 = tree.findall("{%s}DEAL_LEVEL/{%s}PAID_OFF" %(ns,ns)) 
```

或者，如果您确定**PAID_OFF**仅出现在树的一个级别中：

```
el2 = tree.findall(".//{%s}PAID_OFF" % ns) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-04T16:59:19.703

在 python 3.5 中，您可以将命名空间作为参数传递给`find()`. 例如 ，

```
ns= {'xml_test':'http://www.test.com'}
tree = ET.parse(r"test.xml")
el1 = tree.findall("xml_test:DEAL_LEVEL/xml_test:PAID_OFF",ns) 
```

文档链接：- [https://docs.python.org/3.5/library/xml.etree.elementtree.html#parsing-xml-with-namespaces](https://docs.python.org/3.5/library/xml.etree.elementtree.html#parsing-xml-with-namespaces)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-01-19T15:56:47.670

如果您正在使用`ElementTree`而不是`cElementTree`您可以通过替换来强制 Expat 忽略命名空间处理`ParserCreate()`：

```
from xml.parsers import expat
oldcreate = expat.ParserCreate
expat.ParserCreate = lambda encoding, sep: oldcreate(encoding, None) 
```

`ElementTree`尝试通过调用来使用 Expat`ParserCreate()`但没有提供不提供命名空间分隔符字符串的选项，上面的代码将导致它被忽略但被警告这可能会破坏其他东西。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-03-20T13:11:31.037

我可能会迟到，但我认为这`re.sub`不是一个好的解决方案。

但是重写`xml.parsers.expat`不适用于 Python 3.x 版本，

罪魁祸首是`xml/etree/ElementTree.py`源代码的底部

```
# Import the C accelerators
try:
    # Element is going to be shadowed by the C implementation. We need to keep
    # the Python version of it accessible for some "creative" by external code
    # (see tests)
    _Element_Py = Element

    # Element, SubElement, ParseError, TreeBuilder, XMLParser
    from _elementtree import *
except ImportError:
    pass 
```

这有点可悲。

解决方法是先摆脱它。

```
import _elementtree
try:
    del _elementtree.XMLParser
except AttributeError:
    # in case deleted twice
    pass
else:
    from xml.parsers import expat  # NOQA: F811
    oldcreate = expat.ParserCreate
    expat.ParserCreate = lambda encoding, sep: oldcreate(encoding, None) 
```

在 Python 3.6 上测试。

Try`try`语句很有用，以防您在代码中的某个地方重新加载或导入模块两次，您会遇到一些奇怪的错误，例如

*   超出最大递归深度
*   属性错误：XMLParser

顺便说一句，该死的 etree 源代码看起来真的很乱。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-13T09:00:10.420

让我们将[nonagon 的回答](https://stackoverflow.com/a/25920989/4465708)与[mzjn 对相关问题的回答](https://stackoverflow.com/a/42372404/4465708)结合起来：

```
def parse_xml(xml_path: Path) -> Tuple[ET.Element, Dict[str, str]]:
    xml_iter = ET.iterparse(xml_path, events=["start-ns"])
    xml_namespaces = dict(prefix_namespace_pair for _, prefix_namespace_pair in xml_iter)
    return xml_iter.root, xml_namespaces 
```

使用此功能，我们：

1.  创建一个迭代器来获取**命名空间和解析的树对象**。

2.  遍历创建的迭代器以获取命名空间字典，我们稍后可以传入每个字典`find()`或[按照 iMom0 的建议](https://stackoverflow.com/questions/13412496/python-elementtree-module-how-to-ignore-the-namespace-of-xml-files-to-locate-ma#comment18328039_13412496)`findall()`调用。

3.  返回解析树的根元素对象和命名空间。

我认为这是最好的方法，因为不涉及任何源 XML 或生成的解析`xml.etree.ElementTree`输出的操作。

我还想[感谢 balmy 的回答](https://stackoverflow.com/a/33997423/4465708)，因为它提供了这个难题的重要部分（您可以从迭代器中获取解析的根）。在那之前，我实际上在我的应用程序中遍历了 XML 树两次（一次是为了获取名称空间，第二次是为了获取根目录）。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-10-14T18:34:35.920

只是偶然地在这里找到了答案：[XSD 条件类型分配默认类型混淆？](https://stackoverflow.com/q/47866026). 这不是主题问题的确切答案，但如果名称空间不重要，则可能适用。

```
<?xml version="1.0" encoding="UTF-8"?>
<persons xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="test.xsd">
    <person version="1">
        <firstname>toto</firstname>
        <lastname>tutu</lastname>
    </person>
</persons> 
```

另见：[https ://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation](https://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation)

为我工作。我在我的应用程序中调用了一个 XML 验证过程。但我也想在编辑 XML 时快速查看 PyCharm 中的验证突出显示和自动完成功能。这个`noNamespaceSchemaLocation`属性可以满足我的需要。

**重新检查**

```
from xml.etree import ElementTree as ET
tree = ET.parse("test.xml")
el1 = tree.findall("person/firstname")
print(el1[0].text)
el2 = tree.find("person/lastname")
print(el2.text) 
```

返回者

```
>python test.py
toto
tutu 
```

# javascript - 如何在 Internet Explorer 中使用 javascript 或 jquery 显示图像预览

> ID：13412502
> 
> 赞同：0
> 
> 时间：2012-11-16T07:53:38.227
> 
> 标签：javascript, jquery

我无法在 Internet Explorer 中显示图像预览。

我正在使用 FileReader() 它在所有浏览器中都可以正常工作，但在 ie（版本 9）和更低版本中却不行。

我需要 FileReader 的替代品来显示预览。

```
 $('#FileUpload').live('change', function () {
            var result = checkFileType();
            alert(result);
            var fileList = this.files;
            var file = fileList[0];
            var r = new FileReader();
            r.onload = function () {
                var binimage1 = r.result;
                // binimage1 = binimage.replace('data:image/jpeg;base64,', '');

                //var imag = "<img " + "src='" + "data:image/jpg;base64," + binimage + "' style='width:100px'/>";

                //  var src = $('#prevImage').attr("src").replace("../../images/nologo.gif", image);

                $('#prevImage').attr("src", binimage1);
                //                    $("#partial1").html(imag);

            };
            r.readAsDataURL(file);
            // r.readAsBinaryString(file);

            //r.readAsDataURL(file);

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:18:17.343

[FileReader 在 IE 10 ( http://caniuse.com/#search=FileReader](http://caniuse.com/#search=FileReader) )之前不可用。对于较旧的 IE，您可能应该研究基于 Flash 的解决方案，以获得对用户本地文件的类似访问权限。

# mysql - 所有列的mySQL长度

> ID：13412508
> 
> 赞同：2
> 
> 时间：2012-11-16T07:54:17.027
> 
> 标签：mysql, multiple-columns

我经常有这种 SQL 语句

```
SELECT LENGTH(col_name) FROM `table` WHERE *condition* 
```

确定 mySQL 表的给定行中特定列的内容的大小。但是，我不清楚是否有一条 SQL 语句可以获取给定行中所有列的内容长度之和。我应该补充一点，所有有问题的列都是 VARCHARS。

是的，我知道我可以通过获取整行来做到这一点

```
SELECT * FROM `table` WHERE *condition* 
```

将生成的行内容折叠成一个字符串并获取该字符串的长度，但我想知道是否没有更有效的衬线来完成这项工作。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T08:05:15.450

好吧，我更喜欢使用[`CHAR_LENGTH`over`LENGTH`](https://stackoverflow.com/questions/1734334/mysql-length-vs-char-length)

```
SELECT CHAR_LENGTH(CONCAT(col1,col2,col3)) 
FROM tableName 
WHERE... 
```

从[链接的问题](https://stackoverflow.com/questions/1734334/)

> LENGTH() 返回以字节为单位的字符串长度。
> 
> CHAR_LENGTH() 返回以字符为单位的字符串长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-17T14:12:43.143

在不进入列名的情况下尝试此解决方案：

```
SELECT SUM(character_maximum_length) length,
  table_name
  FROM information_schema.columns 
  WHERE table_name='your_table_name_here'
  AND table_schema=DATABASE()
  -- AND column_name IN ('choose', 'columns')
  GROUP BY table_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:03:26.267

你有没有尝试过：

SELECT char_length(col_name)+char_length(col_name2) FROM `table`WHERE*条件*

# python - Python：写入文件

> ID：13412513
> 
> 赞同：4
> 
> 时间：2012-11-16T07:54:35.697
> 
> 标签：python

我已经有一段时间遇到这个问题了。如何在 python 中打开文件并继续写入但不覆盖我之前写的内容？

例如：

下面的代码将写入“输出正常”。然后接下来的几行将覆盖它，它只是“完成”

但我想要文件中的“输出正常”“完成”

```
f = open('out.log', 'w+')
f.write('output is ')
# some work
s = 'OK.'
f.write(s)
f.write('\n')
f.flush()
f.close()
# some other work
f = open('out.log', 'w+')
f.write('done\n')
f.flush()
f.close() 
```

我希望能够每隔一段时间自由地打开和写入它。关闭它。然后一遍又一遍地重复这个过程。

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T07:57:22.260

以追加模式打开文件。如果它不存在，它将被创建，如果它存在，它将在其末尾打开以供进一步写入：

```
with open('out.log', 'a') as f:
    f.write('output is ')
    # some work
    s = 'OK.'
    f.write(s)
    f.write('\n')

# some other work
with open('out.log', 'a') as f:
    f.write('done\n') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:57:31.003

当您打开文件以在其中附加内容时，只需将“a”作为参数传递。查看[文档](http://docs.python.org/2/library/functions.html#open)

```
f = open('out.log', 'a') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T07:58:04.873

您需要第二次以附加模式打开文件：

```
f = open('out.log', 'a') 
```

因为每次以写入模式打开文件时，文件的内容都会被清除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T07:58:11.890

第一次写入后，您需要使用`f = open('out.log', 'a')`将文本**附加到文件的内容中。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T07:59:39.317

```
with open("test.txt", "a") as myfile:
    myfile.write("appended text") 
```

# android - 进度对话框在切换到另一个活动时冻结

> ID：13412515
> 
> 赞同：3
> 
> 时间：2012-11-16T07:54:51.550
> 
> 标签：android, progressdialog

我有两个活动。当按意图切换到第二个活动时，它需要 3-4 秒，因为它有很多组件，适配器从 SQLite 等获取数据。因此，我想在切换时显示一个进度对话框。

为此，我一直在挖掘主题并尝试了其中的许多主题：

1-) 在第二个活动上使用 AsyncTask。一旦我单击一个组件切换到第二个活动，它就不会显示进度对话框。它等待 3-4 秒，然后进度对话框显示不到一秒，这不是用户友好的方式。

2-) 在第一个活动上使用 AsyncTask。只要我单击该组件，它就会显示，但进度轮不旋转。进度对话框冻结。

3-) 在第二个活动上使用 AsyncTask onStart() 方法。这是第一种方式。

下面的代码实现了上面的第二种方式，在第一个活动上使用 AsyncTask。

```
public void toVisitRegister(Event event) { //Switching to the second activity
    new startingThread().execute();
    Intent toVisitRegister = new Intent(MainCalendar.this, VisitRegister.class);
    startActivity(toVisitRegister);
    finish();
} 
```

这是 AsyncTask

```
public class startingThread extends AsyncTask<String, String, String> { 
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        startingProgress = new ProgressDialog(MainCalendar.this);
        startingProgress.setTitle("Visit Register");
        startingProgress.setMessage("Initializing...");
        startingProgress.show();
        }

    @Override
    protected String doInBackground(String... params) {
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        if(MainCalendar.this.startingProgress != null) {
            MainCalendar.this.startingProgress.dismiss();
        }
    }
} 
```

我也尝试在 onPostExecute 中调用 startActivity，但没有成功。因此，我正在等待您对这个问题的意见和建议。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:59:38.463

```
I also tried to call startActivity in onPostExecute, 
```

将 Activity 上下文传递给AsyncTask`startingThread AsyncTask`并将您的启动活动代码放入`onPostExecute()`其中。

```
@Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        if(MainCalendar.this.startingProgress != null) {
            MainCalendar.this.startingProgress.dismiss();
            Intent toVisitRegister = new Intent(MainCalendar.this, VisitRegister.class);
            mContext.startActivity(toVisitRegister);
            mContext.finish();
        }
    } 
```

这`mContext`是您当前`MainCalendar`活动的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:59:20.827

查看您的实现，AsyncTask 将没有时间工作，因为您将立即跳转到下一个 Activity。尝试在 PostExecute() 中调用下一个活动。

```
I also tried to call startActivity in onPostExecute, but it didn't work. 
```

你是这样做的吗：

```
public void toVisitRegister(Event event) { //Switching to the second activity
    new startingThread().execute();
}

public class startingThread extends AsyncTask<String, String, String> { 
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        startingProgress = new ProgressDialog(MainCalendar.this);
        startingProgress.setTitle("Visit Register");
        startingProgress.setMessage("Initializing...");
        startingProgress.show();
        }

    @Override
    protected String doInBackground(String... params) {
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
         if(MainCalendar.this.startingProgress != null) {
            MainCalendar.this.startingProgress.dismiss();
        }
    Intent toVisitRegister = new Intent(MainCalendar.this, VisitRegister.class);
    startActivity(toVisitRegister);
    finish();

    }
} 
```

# android - 用于移动应用程序测试的 Selenium 插件或任何其他更好和适合移动应用程序测试的工具

> ID：13412518
> 
> 赞同：4
> 
> 时间：2012-11-16T07:55:07.437
> 
> 标签：android, ios, plugins, selenium, automated-tests

Selenium 是否有任何插件可以在移动设备（iOS、Android 和 Windows 操作系统）上为（自己的）应用程序运行自动化测试？

我已经搜索了 2 个小时，但我发现的信息在我看来相当混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:05:54.663

您可以使用**MonkeyTalk**。它提供对 iPhone 和 Android 的支持。还有一个名为**MonkeyTalk IDE**的 IDE ，它能够使用您想要使用的设备、模拟器或模拟器来记录和回放您的测试用例。

欲了解更多信息，请访问： [MonkeyTalk 文档](http://www.gorillalogic.com/book/monkeytalk-documentation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:48:03.200

我推荐你使用[机器人](http://code.google.com/p/robotium/)。

还有另一个名为[MonkeyRunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)的工具，它有不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T12:29:42.033

在[官方 Selenium 博客](https://seleniumhq.wordpress.com/2013/12/24/android-and-ios-support/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A%20Selenium%20%28The%20Official%20Selenium%20Blog%29)上声明 selenium 正在淘汰他们的 AndroidDriver 和 iPhoneDriver 以支持以下任何一个：[-selendroid](http://selendroid.io/)
- [ios-](http://ios-driver.github.io/ios-driver/) driver - [appium](http://appium.io/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T11:35:31.737

在今天，有 2 个工具正在主导移动应用程序自动化测试：

1.  Appium（开源）
2.  SeeTest（许可）

**为什么选择这些工具：**

1.  两者都使用底层 iOS 工具和 Android sdk，并提供各种方法来自动化您的测试用例。
2.  两者都有很好的在线支持
3.  两者都支持在 iOS 和 Android 上运行相同的脚本（跨平台测试）
4.  两者都支持多种语言编写脚本（C#、Java 等）
5.  两者都支持多种框架 - TestNG、JUnit 等

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-10T07:48:35.450

您可以使用 Selenium WebDriver 进行移动应用程序测试。它需要使用“android-server-2.32.0.apk”进行Android应用测试。下载链接：[Android Driver server apk](https://code.google.com/p/selenium/downloads/detail?name=android-server-2.32.0.apk&can=2&q=)

请看这个[AndroidDriver](https://code.google.com/p/selenium/wiki/AndroidDriver)

[iPhoneDriver](https://code.google.com/p/selenium/wiki/IPhoneDriver)请看这个

# wpf - WPF“控制注入”

> ID：13412520
> 
> 赞同：0
> 
> 时间：2012-11-16T07:55:18.463
> 
> 标签：wpf, user-controls, dependency-injection, inversion-of-control

我正在开发一个既作为独立应用程序又作为插件运行的应用程序。我们使用依赖注入来注入应用程序逻辑的不同实现。

今天，独立应用程序和插件中的 GUI 是相同的，但我们发现需要根据上下文对 GUI 进行细微的定制。这通常是小的更改，例如提供不同的输入机制（例如，独立版本中的下拉列表和插件版本中的分层选择控件）。通常，插件版本中使用的控件将是插件 API 提供的控件。

由于独立 GUI 和插件 GUI 之间通常会有很多小的差异，而不是大组件（例如按钮而不是选项卡面板中的页面），我们不希望为插件创建一个 XAML，而为共享一个公共视图的独立创建一个 XAML -模型。

在 WPF 中注入用户控件是否有任何模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:57:22.823

棱镜！:D 它是 MVVM/依赖注入和 WPF/Silverlight 的框架

请参阅[http://compositewpf.codeplex.com/](http://compositewpf.codeplex.com/)和[撰写用户界面](http://msdn.microsoft.com/en-us/library/ff921098%28v=pandp.40%29.aspx)

# macos - 在 OS X Server 上运行的 Tomcat 6 上启动时，Sonar 抛出异常

> ID：13412527
> 
> 赞同：3
> 
> 时间：2012-11-16T07:56:15.230
> 
> 标签：macos, sonarqube

我已将具有正确数据库配置的声纳 3.3 战争文件部署到我的 MacOS 服务器上的工作 Tomcat 6：

```
System Version: Mac OS X 10.7.5 (11G63)
Kernel Version: Darwin 11.4.2 
```

当它试图部署战争时，我得到了这个：

```
[pool-2-thread-1] ERROR jruby.rack - Error: application initialization failed
org.jruby.rack.RackInitializationException: java.lang.NullPointerException: null
    from org/sonar/server/ui/JRubyFacade.java:447:in `getServerHome'
    from /usr/local/tomcat/temp/0-sonar/WEB-INF/config/environment.rb:52:in `(root)'
    from /usr/local/tomcat/temp/0-sonar/WEB-INF/gems/gems/rails-2.3.14/lib/initializer.rb:111:in `run'
    from /usr/local/tomcat/temp/0-sonar/WEB-INF/config/environment.rb:32:in `(root)'
    from org/jruby/RubyKernel.java:1058:in `load'
    from /usr/local/tomcat/temp/0-sonar/WEB-INF/config/environment.rb:23:in `load_environment'
    from /usr/local/java/apache-tomcat-7.0.23/work/Catalina/localhost/sonar/loader/jruby/rack/rails_booter.rb:65:in `load_environment'
    from <script>:1:in `(root)'

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:231) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:58) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.SharedRackApplicationFactory.init(SharedRackApplicationFactory.java:33) ~[jruby-rack-1.1.10.jar:na]
    at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:48) ~[jruby-rack-1.1.10.jar:na]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765) [catalina.jar:7.0.23]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260) [catalina.jar:7.0.23]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.23]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866) [catalina.jar:7.0.23]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:842) [catalina.jar:7.0.23]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) [catalina.jar:7.0.23]
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958) [catalina.jar:7.0.23]
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599) [catalina.jar:7.0.23]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [na:1.6.0_35]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_35]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_35]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_35]
org.jruby.exceptions.RaiseException: Native Exception: 'class java.lang.NullPointerException'; Message: null; StackTrace: java.lang.NullPointerException
    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:84)
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:447)

    at org.sonar.server.ui.JRubyFacade.get(JRubyFacade.java:84) ~[JRubyFacade.class:na]
    at org.sonar.server.ui.JRubyFacade.getServerHome(JRubyFacade.java:447) ~[JRubyFacade.class:na]
 Caused by: java.lang.NullPointerException: null
    ... 2 common frames omitted 
```

我不知道出了什么问题，这是我第一次使用 OS X。在 Windows 7 上部署了相同的 WAR，没有任何问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:28:40.123

[在这里找到了解决方案](http://www.siteduzero.com/forum/sujet/sonar-tomcat-probleme-de-deploy-ubuntu)

### 您需要将 SONAR_HOME 环境变量指向您解压缩并构建声纳战争的目录

### 例子：

下载声纳分布

```
wget "http://dist.sonar.codehaus.org/sonar-3.2.zip" 
```

构建 sonar.war，注意：sonar.war 将绑定到它有 bean build 的目录

```
unzip sonar-3.2.zip -d ~/temp/sonar
mkdir /home/ubuntu/.sonar
mv ~/temp/sonar/sonar-3.2/* ~/.sonar
cd ~/.sonar/war/
./build-war.sh
cd ~ 
```

将声纳部署到 tomcat mv ~/.sonar/war/sonar.war ~/java/servers/sonar-tomcat-6.0.35/webapps/sonar.war

清理 - 但不要删除 ~/.sonar/ 原因是 sonar_home

```
mv sonar-3.2.zip ~/java/utils/zip/
rm -rf ~/temp/sonar 
```

配置 tomcat 以运行声纳[见 mkyong](http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/)

```
printf 'CATALINA_OPTS="-Xmx1024m -Dorg.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true -XX:MaxPermSize=256m"\n' | tee ~/java/servers/sonar-tomcat-6.0.35/bin/setenv.sh
printf 'SONAR_HOME="~/.sonar"\n' | tee ~/java/servers/sonar-tomcat-6.0.35/bin/setenv.sh 
```

# asp.net-mvc-3 - 使用 MVC3 重复内容处置标头

> ID：13412528
> 
> 赞同：0
> 
> 时间：2012-11-16T07:56:16.707
> 
> 标签：asp.net-mvc-3, browser, download

我试图用浏览器打开 pdf 文件或其他文件类型，如图像，但 ff 和 chrome 给出了重复的内容错误。我正在使用下面的代码打开文件。

```
Response.Contentype = file.ContentType;
Response.AppendHeader("Content-Disposition",string.Format("inline;filename=\"{0}\"",file.Filename));
return File(file.Data,file.ContentType,file.FileName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:59:17.193

删除代码的前 2 行。它们不是必需的。该`return File(file.Data, file.ContentType, file.FileName);`方法已经添加了一个`ContentType`（因为第二个参数）和`Content-Disposition`标题`attachment`（因为第三个参数）。

如果您不想将 Content-Disposition 标头设置为附件，`inline`然后删除第三个参数：

```
return File(file.Data, file.ContentType); 
```

# java - JTextField 中的符号验证

> ID：13412529
> 
> 赞同：0
> 
> 时间：2012-11-16T07:56:21.537
> 
> 标签：java, swing, jtextfield, keylistener, documentfilter

我想要做的是当我们要在 TextField 中输入内容时，它不应该允许符号。如何排除符号？

我使用的代码：

```
 if (evt.getKeyChar()=='&'||evt.getKeyChar()=='@') {
       jTextField2.setText("");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:06:39.607

您应该使用[DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)。这是一个非常简单/基本的演示示例：

```
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class TestDocumentFilter {

    private void initUI() {
        JFrame frame = new JFrame(TestDocumentFilter.class.getSimpleName());
        frame.setLayout(new FlowLayout());
        final JTextField textfield = new JTextField(20);
        ((AbstractDocument) textfield.getDocument()).setDocumentFilter(new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {
                string = string.replace("&", "").replace("@", "");
                super.insertString(fb, offset, string, attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
                text = text.replace("&", "").replace("@", "");
                super.replace(fb, offset, length, text, attrs);
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(textfield);
        frame.setSize(300, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestDocumentFilter().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T09:26:17.443

[JFormattedTextField](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFormattedTextField.html)

它有两个属性，而不是 JTextField 中的一个：

（1）字符串“文本”显示和（2）任何类“值”

您只需要放置一个转换 stringToValue() 和 valueToString() 的格式化程序

```
import java.text.ParseException;
import javax.swing.JFormattedTextField;
import javax.swing.text.DefaultFormatter;
import javax.swing.text.JTextComponent;

...

  DefaultFormatter formatter = new DefaultFormatter() {
    {
      setValueClass(String.class); // property "value" of String.class
      setAllowsInvalid(false); // doesnt matter in current example, but very usefull
      setCommitsOnValidEdit(true); // convert value back to text after every valid edit
    }
    @Override
    public Object stringToValue(String string) throws ParseException {
      string = string.replace("&","").replace("@","");
      return string;
    }
  };

  JTextComponent txt = new JFormattedTextField(formatter); 
```

另外你可以

```
 txt.addPropertyChangeListener("value", yourPropertyChangeListener); 
```

改变后立即获得价值

# javascript - 如何设置可见的 div 不活动？

> ID：13412530
> 
> 赞同：0
> 
> 时间：2012-11-16T07:57:01.293
> 
> 标签：javascript, jquery, html

我正在使用 jQuery 开发一个 Web 应用程序，在这里我有多个用户可以拖放的项目，不幸的是我还有另一个项目，它需要位于所有具有更高 z-index 的可拖动项目的顶部。如果我将其中一个可拖动项目放在覆盖项目后面，我就不能再拖动它了。

有没有办法以某种方式将覆盖项目设置为非活动状态，以便它仍然可见？

# ruby-on-rails - 使用 nodejs 组件的 Rails 应用程序

> ID：13412531
> 
> 赞同：1
> 
> 时间：2012-11-16T07:57:04.983
> 
> 标签：ruby-on-rails, node.js, csrf

知道如何保护 Rails 应用程序的小型 nodejs 组件免受 csrf 的影响吗？默认情况下，Rails 在每种形式和 ajax 调用中都有令牌。有没有办法针对节点验证这个 Rails 令牌？

# javascript - 使单击仅对父项起作用

> ID：13412532
> 
> 赞同：1
> 
> 时间：2012-11-16T07:57:07.083
> 
> 标签：javascript, jquery, html, jquery-mobile

我有页脚，里面有一些内容。我让我的页脚显示\点击隐藏。但是现在，如果我单击页脚内的任何项目（我在那里有导航栏），我的页脚也会对 show\hide 做出反应。我如何只让父（页脚）对点击做出反应，而没有子元素？我正在使用jquery mobile。这是我的代码：

```
<div data-role="footer" data-id="main_footer" data-position="fixed" data-fullscreen="true" data-visible-on-page-show="false" data-tap-toggle="false" >

                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li><a id="menu-item-home" data-icon="custom" href="index.html" class="ui-btn-active ui-state-persist">&nbsp;</a></li>
                        <li><a id="menu-item-near-me" data-icon="custom" href="near-me.html">&nbsp;</a></li>
                        <li><a id="menu-item-rewards" data-icon="custom" href="rewards.html">&nbsp;</a></li>
                        <li><a id="menu-item-invite" data-icon="custom" href="invite.html">&nbsp;</a></li>
                        <li><a id="menu-item-profile" data-icon="custom" href="profile.html">&nbsp;</a></li>
                    </ul>
                </div><!-- /navbar -->
            </div>
            <!-- /footer -->
        </div> 
```

和 JS

```
$("#index").live('pagecreate', function() {
            $("[data-role='footer']").live("click", function() {
            if ($("[data-role='footer']").hasClass('ui-fixed-hidden'))
            {
                $("[data-role='footer']").removeClass('ui-fixed-hidden');
            }
            else
            {
                $("[data-role='footer']").addClass('ui-fixed-hidden');
            }

                });
        }); 
```

TLDR；我想让我的页脚中的链接起作用，但在单击链接时不触发页脚显示\隐藏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T07:59:34.757

你可以添加

```
 $(document).on("click", "[data-role='footer'] li", function(e) {
     e.stopPropagation();
 }); 
```

请注意，我使用了不推荐使用`on`的代替。`live`还要注意 jQuery 有一个有用的[toggleClass](http://api.jquery.com/toggleClass/)函数。因此，我建议您将现有代码替换为

```
$("#index").live('pagecreate', function() {
     $(document).on("click", "[data-role='footer'] li", function(e) {
        e.stopPropagation();
     });
     $(document).on("click", "[data-role='footer']", function() {
        $("[data-role='footer']").toggleClass('ui-fixed-hidden');
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:08:12.443

这应该工作......我建议你`on`改用`live`......

```
$(document).on("click", "[data-role='footer']", function(e) {
    if(e.target != this){
      return;
    }

    if ($("[data-role='footer']").hasClass('ui-fixed-hidden'))
    {
       $("[data-role='footer']").removeClass('ui-fixed-hidden');
    }
    else
    {
        $("[data-role='footer']").addClass('ui-fixed-hidden');
    }

 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T08:01:10.857

由于各种原因，您实际上不应使用`.live`，而应将其替换为`.on`. 无论如何，我认为这会起作用：

```
... 'click', function (e) {
   if ($(e.target).not("[data-role=footer]")) {
      e.stopPropagation();
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:04:48.063

所以你的问题是，页脚中的链接不起作用。最简单的解决方案是将`click`事件绑定到页脚内的链接，并使用`$.mobile.changePage()`或`window.location()`方法打开所需的 url。将此添加到您的代码中：

```
$("[data-role=footer] a").bind("click",function(){
    $.mobile.changePage($(this).attr("href"));
}); 
```

# objective-c - ipad：如何在 uiwebview 上打开主题文件

> ID：13412536
> 
> 赞同：3
> 
> 时间：2012-11-16T07:57:15.640
> 
> 标签：objective-c, uiwebview

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadDocument:@"mykeynote.key.zip" inView:webView];
}
-(void)loadDocument:(NSString*)documentName inView:(UIWebView*)webView1
{
    NSString *path = [[NSBundle mainBundle] pathForResource:documentName ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView1 loadRequest:request];
}
```

运行此代码后我收到一条错误消息“抱歉，无法查看此文档。”我目前正在处理主题演讲 09。如何在 uiwebview 中打开主题演讲文件？帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:59:23.020

这里有一些关于它的信息：

[http://developer.apple.com/library/ios/#qa/qa1630/_index.html](http://developer.apple.com/library/ios/#qa/qa1630/_index.html)

具体来说，您正在寻找的是：

> iWork '09 文档不使用包格式，并且不得进行 ZIP 压缩。

所以你不应该压缩你的主题文件。这仅在 '08 及更早版本中是必需的。

由于较旧的 iWork 文档是包，因此它们是目录。您可以使用`NSFileManager`'`attributesOfItemAtPath:error:`函数和键`NSFileType`来查看它是否是一个目录（值应该是`NSFileTypeDirectory`）。

如果文件是一个目录，你可以使用像[ZipArchive](http://code.google.com/p/ziparchive/)这样的库来压缩它。

# wcf - 调用 WS-Security Web 服务的 WCF 错误：找不到 X509SecurityToken 的令牌验证器

> ID：13412543
> 
> 赞同：3
> 
> 时间：2012-11-16T07:57:39.577
> 
> 标签：wcf, webservice-client, ws-security, usernametoken

我正在尝试使用 WCF 客户端通过 https 启用 WS-Security 来连接外部 Java Web 服务。该服务使用 UserNameToken 身份验证。

当客户端调用服务时，我收到此异常：
**找不到“System.IdentityModel.Tokens.X509SecurityToken”令牌类型的令牌身份验证器。根据当前的安全设置，不能接受该类型的令牌。**

我使用此配置的自定义绑定：

端点：

```
<endpoint address="https://des-afirma.redsara.es/afirmaws/services/ValidarFirma"
          binding="customBinding" bindingConfiguration="ValidarFirmaBinding"
          contract="AFirma.Firma" name="ValidarFirma" />
</endpoint> 
```

绑定：

```
<binding name="ValidarFirmaBinding">
    <textMessageEncoding messageVersion="Soap11" />
    <security  
        allowSerializedSigningTokenOnReply="true" 
        authenticationMode="UserNameOverTransport">
        <secureConversationBootstrap />
    </security>
    <httpsTransport>
        <extendedProtectionPolicy policyEnforcement="Never" />
    </httpsTransport>
</binding> 
```

我阅读了此链接[http://webservices20.blogspot.co.uk/2010/10/wcf-cannot-find-token-authenticator.html](http://webservices20.blogspot.co.uk/2010/10/wcf-cannot-find-token-authenticator.html)并配置了 allowSerializedSigningTokenOnReply 值，但它失败了。

这是 WCF 生成的消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
   <soap:Header>
      <wsa:Action />
      <wsa:MessageID>urn:uuid:5b36bb8b-4a59-4c5f-9c67-065543db51d5</wsa:MessageID>
      <wsa:ReplyTo>
         <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
      </wsa:ReplyTo>
      <wsa:To>http://des-afirma.redsara.es/afirmaws/services/ValidarFirma</wsa:To>
      <wsse:Security soap:mustUnderstand="1">
         <wsu:Timestamp wsu:Id="Timestamp-cef53b94-4432-4ede-89ea-7a42b7a686d2">
            <wsu:Created>2012-11-13T13:49:32Z</wsu:Created>
            <wsu:Expires>2012-11-13T13:54:32Z</wsu:Expires>
         </wsu:Timestamp>
         <wsse:UsernameToken wsu:Id="SecurityToken-40deaa3d-fe02-4462-963e-7705e4648b24">
            <wsse:Username>UserName</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">[Password]</wsse:Password>
            <wsse:Nonce>G5CU1R6lKSTpBQ0FAF01rA==</wsse:Nonce>
            <wsu:Created>2012-11-13T13:49:32Z</wsu:Created>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <ValidarFirma xmlns="http://afirmaws/services/ValidarFirma">
         <paramIn xmlns="">[Param value (XML String)]</paramIn>
      </ValidarFirma>
   </soap:Body>
</soap:Envelope> 
```

这是回应：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header>
    <wsse:Security soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next" soapenv:mustUnderstand="0">
      <wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="binaryToken">
        MIIG2TCCBcGgAwIBAgIISXHqSo0f+C0wDQYJKoZIhvcNAQEFBQAwUjERMA8GA1UEAxMIQUNDVi1D
        [...]
      </wsse:BinarySecurityToken>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#" Id="Signature-BDFADICIJJIDI81">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments" />
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
          <Reference URI="#SignedBody-BDFADICIJJIDI81">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments" />
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
            <DigestValue>TFKLyv9zd1G7RXK4sJV+hG2WfqQ=</DigestValue>
          </Reference>
          <Reference URI="#keyInfo-BDFADICIJJIDI81">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments" />
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
            <DigestValue>SWO3sIcC16EcT17pBREoGe3CVes=</DigestValue>
          </Reference>
          <Reference URI="#binaryToken">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments" />
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
            <DigestValue>GT+8/UoUzQgUAhvc25bn+DL6T1E=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue Id="SignatureValue-BDFADICIJJIDI81">
          sTVgtvYlVuwhQ9XGcTfHh7lKdUcsf8vF6vyJ/5LVxuwarRDAjMzHcQlvFBlZTn8f
          [..]
        </SignatureValue>
        <KeyInfo Id="keyInfo-BDFADICIJJIDI81">
          <KeyValue>
            <RSAKeyValue>
              <Modulus>
                tCxb/yk9DgCJmdxshvm6RwQtRMHqTdI2nDzQ2C761KEGmAaz7jrv8PtVSoNMRVr9
                [...]
              </Modulus>
              <Exponent>AQAB</Exponent>
            </RSAKeyValue>
          </KeyValue>
          <X509Data>
            <X509Certificate>
              MIIG2TCCBcGgAwIBAgIISXHqSo0f+C0wDQYJKoZIhvcNAQEFBQAwUjERMA8GA1UE
              [...]
            </X509Certificate>
            <X509IssuerSerial>
              <X509IssuerName>Certificate name</X509IssuerName>
              <X509SerialNumber>Serial number</X509SerialNumber>
            </X509IssuerSerial>
          </X509Data>
          <wsse:SecurityTokenReference xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
            <wsse:Reference URI="#binaryToken" />
          </wsse:SecurityTokenReference>
        </KeyInfo>
      </Signature>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body wsu:Id="SignedBody-BDFADICIJJIDI81">
    <ValidarFirmaResponse xmlns="http://afirmaws/services/ValidarFirma">
      <ValidarFirmaReturn xmlns="" xsi:type="c0bxsd:string">
          [return value (XML String)]
      </ValidarFirmaReturn>
    </ValidarFirmaResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

我尝试了使用 WSE 3.0 的 Web 服务并且它可以工作，但是我无法在服务器中安装该软件包，因为它是 Windows Server 2008 并且安装失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:49:07.510

尝试使用 MessageSecurityVersion（例如 WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11）和安全标签。看看肥皂信封。

# android - Android 从元数据中读取自定义 xml 资源

> ID：13412548
> 
> 赞同：0
> 
> 时间：2012-11-16T07:58:02.290
> 
> 标签：android, xml, metadata, splash-screen

我正在编写一个包含启动屏幕活动的库，我希望能够通过将 res/xml/ 资源传递给 AndroidManifest.xml 文件中该活动的元数据来配置它。

这就是我在库中加载 xml 资源的方式，但是属性计数始终为 -1。我知道 res 如果肯定指向正确的资源，因为我在其上调用了 getResourceName，它是正确的。

```
int res = metaData.getInt(METADATA_SPLASH, 0);
XmlResourceParser parser = getResources().getXml(res);
AttributeSet attrs = Xml.asAttributeSet(parser); 
```

此外，我的应用程序中的 xml 资源如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<splash xmlns:lib="http://schemas.android.com/apk/res-auto"
    lib:caption="@string/copyright" lib:drawable="@drawable/logo_aperture"
    lib:activity=".ui.HomeActivity">
</splash> 
```

最后，在我的库中，我在 attrs.xml 文件中定义了属性，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="drawable" format="reference"></attr>
    <attr name="caption" format="string"></attr>
    <attr name="activity" format="string"></attr>
</resources> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T13:14:08.093

这是一个迟到的答案，但以防万一它帮助别人。在尝试使用 AttributeSet 之前，插入以下代码块：

```
int type;
while ((type=parser.next()) != XmlResourceParser.END_DOCUMENT
    && type != XmlResourceParser.START_TAG) {
} 
```

# ios - 核心数据：利用缓存进行批量故障处理

> ID：13412551
> 
> 赞同：2
> 
> 时间：2012-11-16T07:58:05.347
> 
> 标签：ios, core-data

在“核心数据编程指南”中，Apple 推荐了一种批量触发故障对象集合的方法，它应该实现如下：

```
NSArray * arrayOfFaults = [NSArray arrayWithObjects:object1,object2,nil];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self IN %@", arrayOfFaults];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Foo"];
[fetchRequest setPredicate:predicate];
[fetchRequest setReturnsObjectsAsFaults:NO];
[managedObjectContext executeFetchRequest:fetchRequest error:NULL]; 
```

然而，在 iOS 6 模拟器上使用“Core Data” Instrument，我发现这个 fetch 几乎和其他 fetch 一样。换句话说，它进入磁盘并且没有使用缓存。这是不合理的。由于它是一个“IN”子句，Core Data 可以使用 objectID 在缓存中查找对象。如果所有这些都可以在缓存中找到，则无需转到磁盘。

我很确定 arrayOfFaults 中的这些对象在缓存中。如果我用这个替换上面的代码，则不会报告缓存未命中：

```
for (NSManagedObject *object in arrayOfFaults){
   [object willAccessValueForKey:nil];
} 
```

所以我的问题是：有没有办法在利用缓存的同时批量处理故障对象？

# c++ - 如何检查无效的二进制输入

> ID：13412560
> 
> 赞同：0
> 
> 时间：2012-11-16T07:59:04.357
> 
> 标签：c++, visual-c++

我在检查来自用户的无效二进制输入时遇到问题。这是程序。谁能告诉我如何解决这个问题？

这些是我得到的错误

1.  错误 C2660：“binToDec”：函数不接受 1 个参数
2.  警告 C4018：“<”：有符号/无符号不匹配
3.  错误 C2082：重新定义形式参数“bin”
4.  错误 C2275：“std::string”：非法将此类型用作表达式。见'std::string'的声明
5.  错误 C2082：重新定义形式参数“bin”

    ```
    #include<iostream>
    #include<string>
    #include<math.h>

    using namespace std;

    void intro();
    bool isBinary(string);
    void decToBin();
    string getBin();
    void binToDec();
    char getChoice();
    char getContinue();

    int main()
    {
        char choice, cont;
        string bin;

        intro();

        do{
            choice = getChoice();
                if(choice == 'b' || choice == 'B')
                {
                    bin = getBin();
                    bool binIsBinary = isBinary(bin);
                    if(binIsBinary)
                        binToDec(bin);
                    else
                    {
                        cout<<"Error!!! Your Number is Not Binary"<<endl;
                        cout<<endl;
                    }
                }

                if(choice == 'd' || choice == 'B')
                    decToBin();
            cont = getContinue();
          }
        while(cont == 'y' || cont == 'Y');
    }

    void intro()
    { 
        cout << "This program coverts decimal numbers to binary and vice versa.
                 << endl;
    }

    bool isBinary( string bin )
    {
       int i=0;
       bool binIsBinary = true;

       while (i < bin.length())
       {
          if( bin.at(i) != '1' && bin.at(i) != '0' )
              {
              binIsBinary = false;
              }
              i++;
       }

       return binIsBinary;
    }

    void decToBin()
    {
       int dec;
       string bin;

       cout << endl << "Please enter a decimal number:"; 
       cin  >>  dec;
       bin = "";

       while (dec != 0)
       {
          if (dec % 2 == 0)
             bin.insert(0, "0");
          else
             bin.insert(0, "1");
          dec = dec / 2;
       }
       cout << "The equivalent binary number is: " << bin << endl << endl;

    }

    string getBin(string bin)
    {   
        string bin;

        cout << endl << "Enter a binary number: ";
        cin  >>  bin;

        return string;
    }

    void binToDec(string bin)
    {
        double deci;
        string bin;
        double len;

       len = bin.length();

       deci = 0;
       for (int i=0; i<len; i++)
           if (bin.at(i) == '1')
               deci = deci + pow(2, len-i-1);

       cout << "The equivalent decimal number is: " << deci << endl    
            << endl;
    }

    char getChoice()
    {
        char choice;

        cout << endl << "If you would like to convert a binary to a decimal then enter b."<<endl; 
        cout << "If you would like to convert a decimal to a binary then enter d. ";
        cin >> choice;

        return choice;
    }

    char getContinue()
    {
        char cont;

        cout << "Would you like to convert another number(Y/N)? ";

        cin >> cont;

        return cont;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:38:07.413

我已经纠正了您代码中的问题，但没有检查十进制到二进制和二进制到十进制的转换是否正确。问题主要是因为你错误的函数定义和函数中错误传递的参数。这是修改后的代码：

```
#include<iostream>
#include<string>
#include<math.h>

using namespace std;

void intro();
bool isBinary(string);
void decToBin();
string getBin();
void binToDec(string);
char getChoice();
char getContinue();

int main()
{
    char choice, cont;
    string bin;

    intro();

    do{
        choice = getChoice();
            if(choice == 'b' || choice == 'B')
            {
                bin = getBin();
                bool binIsBinary = isBinary(bin);
                if(binIsBinary)
                    binToDec(bin);
                else
                {
                    cout<<"Error!!! Your Number is Not Binary"<<endl;
                    cout<<endl;
                }
            }

            if(choice == 'd' || choice == 'B')
                decToBin();
        cont = getContinue();
      }
    while(cont == 'y' || cont == 'Y');
}

void intro()
{ 
    cout << "This program coverts decimal numbers to binary and vice versa." << endl;
}

bool isBinary( string bin )
{
   int i=0;
   bool binIsBinary = true;

   while (i < bin.length())
   {
      if( bin.at(i) != '1' && bin.at(i) != '0' )
          {
          binIsBinary = false;
          }
          i++;
   }

   return binIsBinary;
}

void decToBin()
{
   int dec;
   string bin;

   cout << endl << "Please enter a decimal number:"; 
   cin  >>  dec;
   bin = "";

   while (dec != 0)
   {
      if (dec % 2 == 0)
         bin.insert(0, "0");
      else
         bin.insert(0, "1");
      dec = dec / 2;
   }
   cout << "The equivalent binary number is: " << bin << endl << endl;

}

string getBin()
{   
    string bin;

    cout << endl << "Enter a binary number: ";
    cin  >>  bin;

    return bin;
}

void binToDec(string bin)
{
    double deci;
    double len;

   len = bin.length();

   deci = 0;
   for (int i=0; i<len; i++)
       if (bin.at(i) == '1')
           deci = deci + pow(2, len-i-1);

   cout << "The equivalent decimal number is: " << deci << endl    
        << endl;
}

char getChoice()
{
    char choice;

    cout << endl << "If you would like to convert a binary to a decimal then enter b."<<endl; 
    cout << "If you would like to convert a decimal to a binary then enter d. ";
    cin >> choice;

    return choice;
}

char getContinue()
{
    char cont;

    cout << "Would you like to convert another number(Y/N)? ";

    cin >> cont;

    return cont;
} 
```

# android - MapView 在市场上发布应用程序后消失了。

> ID：13412561
> 
> 赞同：3
> 
> 时间：2012-11-16T07:59:15.370
> 
> 标签：android, api, google-maps, android-mapview, google-play

我正在使用谷歌地图，我的地图视图在调试模式下工作，我上传的最后一个应用程序工作正常，但是当我使用发布密钥和相同的密钥库导出它时，地图视图没有进一步显示，请帮忙。我尝试过使用相同的密钥库和新的密钥库。我没有找到解决方案。 **我已经提到我使用了这些钥匙，我得到了钥匙。甚至新的调试密钥库、来自 keytool 的调试密钥和来自谷歌控制台的 Api**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:02:11.153

打开命令提示符转到您的 SDK 位置（例如，c:\android-sdk\tools）

I:\keypath\my-release-key.keystore = 这是您用于签署应用程序的发布密钥位置

在下面输入并按 enter keytool -v -list -keystore I:\Android\1_RELEASED_APP\0-key\my-release-key.keystore

它要求输入密钥密码并单击输入，

然后它生成并散列代码

复制该代码并

去[那里](https://developers.google.com/android/maps-api-signup)

使用此哈希码生成您的密钥，并使用它（MD5）您将发布的应用程序。

![在此处输入图像描述](../Images/8464e872031cb0965161d44570d20913.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:01:31.233

您需要获取签名证书的 API 密钥并替换它。

[获取地图密钥](https://developers.google.com/maps/documentation/android/mapkey)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:05:08.790

debug.keystore 和 release 密钥库之间存在差异。您问题中的粗线表明您生成了新的调试密钥，您不应该这样做。每次在市场上更新您的应用程序时，您都应该使用与以前相同的密钥对其进行签名；不是每次都生成新的密钥。

你需要得到一个签名的 API Key；可以使用与您签署应用程序相同的密钥生成。 [https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)有更多信息。

如果您生成一个新的密钥库密钥，您还需要生成一个新的 Google Maps API 密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:19:50.307

你有两件事要寻找：

1> 您正在使用相同的密钥库来签署您用来获取谷歌地图密钥的应用程序。2> 您正在从您之前签署的同一台机器上签署您的应用程序。

如果你做了这些事情，应该没有任何问题。

# c# - 使用 DataContractSerializer 时在集合中保留元素名称

> ID：13412569
> 
> 赞同：3
> 
> 时间：2012-11-16T07:59:40.893
> 
> 标签：c#, xml, datacontractserializer

我想知道在序列化我的某个基本类型的自定义集合时是否可以定义元素名称。考虑以下示例（我在这里使用水果示例 :)）：

```
[DataContract(Name = "Bowl")]
public class Bowl
{
    [DataMember]
    public List<Fruit> Fruits { get; set; }
}
[DataContract(Name = "Fruit")]
public abstract class Fruit
{
}
[DataContract(Name = "Apple", Namespace = "")]
public class Apple : Fruit
{
}
[DataContract(Name = "Banana", Namespace = "")]
public class Banana : Fruit
{
} 
```

序列化时：

```
var bowl = new Bowl() { Fruits = new List<Fruit> { new Apple(), new Banana() } };
var serializer = new DataContractSerializer(typeof(Bowl), new[] { typeof(Apple), typeof(Banana) });
using (var ms = new MemoryStream())
{
    serializer.WriteObject(ms, bowl);
    ms.Position = 0;
    Console.WriteLine(System.Text.Encoding.UTF8.GetString(ms.ToArray()));
} 
```

会给我一个输出：

```
<Bowl xmlns="http://schemas.datacontract.org/2004/07/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Fruits>
    <Fruit i:type="Apple" xmlns="" />
    <Fruit i:type="Banana" xmlns="" />
  </Fruits>
</Bowl> 
```

我真正想要的是一个输出，其中 Fruit 元素被替换为它们的正确类名。IE：

```
<Bowl xmlns="http://schemas.datacontract.org/2004/07/">
  <Fruits>
    <Apple />
    <Banana />
  </Fruits>
</Bowl> 
```

是否可以`DataContractSerializer`使用 XmlWriter 或我必须为它编写自己的逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:15:30.327

如果您想对 xml 输出进行大量控制，您应该将其注释为`XmlSerializer`，而不是`DataContractSerializer`. 例如：

```
using System;
using System.Collections.Generic;
using System.Xml.Serialization;

public class Bowl {
    [XmlArray("Fruits")]
    [XmlArrayItem("Apple", typeof(Apple))]
    [XmlArrayItem("Banana", typeof(Banana))]
    public List<Fruit> Fruits { get; set; }
}
public abstract class Fruit { }
public class Apple : Fruit { }
public class Banana : Fruit { }

static class Program {
    static void Main() {
        var ser = new XmlSerializer(typeof(Bowl));
        var obj = new Bowl {
            Fruits = new List<Fruit> {
                new Apple(), new Banana()
            }
        };
        ser.Serialize(Console.Out, obj);
    }
} 
```

# git - $git log 等我写 smth

> ID：13412572
> 
> 赞同：14
> 
> 时间：2012-11-16T07:59:56.730
> 
> 标签：git

我想这是一个非常愚蠢的问题，对此我很抱歉，但我不知道如何解决它以及我应该做什么。

我从来没有使用过源代码控制系统，所以我开始阅读 Git 的文档。但是我遇到了这个问题：当我执行`$ git log`它时，它给了我“ `:`”，它等待我做某事，但我不知道什么以及如何返回并能够编写新命令。它还说“没有下一个标签（按 RETURN），但我不知道如何按它 :( 请帮忙，因为现在继续的唯一方法是在每个 $git 日志之后关闭 bash ......再次抱歉对于愚蠢的问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-16T08:01:24.503

按`q`。您已输入寻呼机输出 (`less`或`more`)，但文本为空。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T08:25:29.760

注意：如果你想避免 pager 选项，你可以这样做：

```
git --no-pager log 
```

从[git 手册页](http://git-scm.com/docs/git.html)：

```
--no-pager 
```

> 不要将 git 输出通过管道传输到寻呼机中。

# node.js - Node + Express Mongoose 子集合文档插入

> ID：13412579
> 
> 赞同：7
> 
> 时间：2012-11-16T08:00:31.390
> 
> 标签：node.js, mongodb, express, mongoose

我有一个 Node + Express 项目正在运行，我正在使用以下模式和模型构建一个基本的博客系统

```
var Post = mongoose.Schema({
    title: String,
    body: String,
    author: String,
    dateCreated: {type: Date, default: Date.now },
    comments: [{author: String, body: String, date: Date}]
});
var Post = db.model('Post', Post); 
```

我通过以下代码接受发布请求并从中更新标题、正文和作者

```
app.post('/addpost', function(req,res){
    console.log(req.body.post);
    var post = new Post(req.body.post);
    post.save(function(err){
        if(!err){
            res.redirect('/');
        }else{
            res.redirect('/');
        }
    })
}) 
```

我的问题是，如何使用我已经开发的代码向模式添加注释？

`req.body.post`输出

```
{ title: 'Hello World', body: 'This is a body', author: 'Bioshox' } 
```

这显然是 Mongoose 可以接受的，但是为了添加评论，我将如何处理呢？

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T10:20:33.047

您可以使用以下代码片段：

```
var comment = {
    author: req.body.post.author , 
    body: req.body.post.body, 
    date: new Date()
};

Post.findOneAndUpdate(
  { title: req.body.post.title },
  { $push: { comments: comment }},
  { safe: true, upsert: true },
  function(err, blogModels) {
    // Handle err
  }); 
```

此片段只是尝试查找`Blog`帖子，如果成功则`$push`添加新评论，否则添加带有初始评论的博客帖子。因此，您的最终代码应如下所示：

```
app.post('/addpost', function(req,res) {
    var comment = {
        author: req.body.post.author , 
        body: req.body.post.body, 
        date: new Date()
    };

    Post.findOneAndUpdate(
      { title: req.body.post.title },
      { $push: { comments: comment }},
      { safe: true, upsert: true },
      function(err, blogModels) {
        // Handle err
        });
}); 
```

# ruby - 我的弦有什么问题？

> ID：13412583
> 
> 赞同：-1
> 
> 时间：2012-11-16T08:00:39.797
> 
> 标签：ruby, string-literals

以下代码生成错误，我看不到问题。任何人都可以帮忙吗？

```
customer_array = [‘Ken’,’William’,’Catherine’,’Mark’,’Steve’,’Sam’]
customer_hash = {
‘Ken’ => ‘Fiction’,
‘William’ => ‘Mystery’,
‘Catherine’ => ‘Computer’,
‘Mark’ => ‘Fiction’,
‘Steve’ => ‘Sports’,
‘Sam’ => ‘Fiction’
}
# => customer_array.rb:6: syntax error, unexpected tSTRING_BEG , expecting '}'
# 'William' => 'Mystery'
#      ^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:04:28.247

问题似乎出在那些奇怪的反引号上。试试这个：

```
customer_array = ["Ken","William","Catherine","Mark","Steve","Sam"]
customer_hash = {
    "Ken" => "Fiction",
    "William" => "Mystery",
    "Catherine" => "Computer",
    "Mark" => "Fiction",
    "Steve" => "Sports",
    "Sam" => "Fiction"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:36:46.820

您的引号是非 ASCII 字符。

将它们替换为 ASCII`'`或`"`.

或添加`# encoding: UTF-8`到文件的开头并将它们包装成 ASCII 引号，如下所示：

```
# encoding: UTF-8

customer_hash = {
  "‘Ken’" => "‘Fiction’",
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T08:21:56.327

您有很多键 => 值，哈希包含一个键（箭头之前）和一个值（箭头之后）

您可以制作一个哈希数组。Ruby on rails 使用它。

你必须修复引号

```
customer_hash = {
    "Ken" => "Fiction",
    "William" => "Mystery",
    "Catherine" => "Computer",
    "Mark" => "Fiction",
    "Steve" => "Sports",
    "Sam" => "Fiction"
} 
```

但是为什么不这样做呢

```
customer_array_of_hashes =  [
{'Ken' => 'Fiction'},
{'William' => 'Mystery'},
{'Catherine' => 'Computer'},
{'Mark' => 'Fiction'},
{'Steve'=> 'Sports'},
{'Sam' => 'Fiction'}
] 
```

然后你可以像这样循环它

```
customer_array_of_hashes.each do|hash|
 hash.each do |key, value|
  puts "lastname: " + value + ", firstname: " + key
 end
end 
```

你可以在这里找到所有 ruby​​ 类的所有方法

[红宝石 API](http://ruby-doc.org/core-1.9.3/)

并在这里添加额外的方法

[Ruby on rails API](http://api.rubyonrails.org/)

最后一个提示

试试这个

```
irb(main):039:0> customer_array_of_hashes.class
=> Array 
```

如果你曾经在 ruby​​ 中有过什么类，class 方法会给出答案。

好的，您知道 customer_array_of_hashes 是一个数组。您可以在数组上使用的一种方法是 .first

试试这个

```
irb(main):040:0> customer_array_of_hashes.first.class
=> Hash 
```

好的，这是一个哈希数组！

好看！

# xml - 将属性转换为具有选择性保留的值

> ID：13412592
> 
> 赞同：0
> 
> 时间：2012-11-16T08:01:26.380
> 
> 标签：xml, xslt

我有以下 XML 文档：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Entity Type="defect">
  <Fields>
    <Field Name="user-28"/>
    <Field Name="user-29">
      <Value>1</Value>
    </Field>
    <Field Name="has-change">
      <Value></Value>
    </Field>
    ... 
```

我正在尝试对其进行转换，以便所有`Field`元素都成为`Name`属性转换为元素的元素，并且它会删除该`Fields`元素。到目前为止，我使用以下转换取得了部分成功：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="UTF-8"
              indent="yes"/>
  <xsl:template match="//Entity">
    <xsl:copy>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="Field">
    <xsl:element name="{@Name}">
      <xsl:value-of select="Value"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

它导致以下结果，部分正确，但它丢失了元素的`Type`属性：`Entity`

```
<?xml version="1.0" encoding="UTF-8"?>
<Entity>

    <user-28/>
    <user-29>1</user-29>
    <has-change/> 
```

另一个复杂之处是我还需要它来处理以下文档，该文档包含一个`Entities`具有多个`Entity`节点的根节点，而不会丢失根节点：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Entities TotalResults="60">
  <Entity Type="defect">
    <Fields>
      <Field Name="id">
        <Value>1161</Value>
      </Field> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:20:57.440

`<xsl:copy>`仅复制节点本身，如果其属性或子节点则不复制。应用于属性，它复制完整的属性，即名称和值。

在进行保留​​大部分文档的转换时，最好使用恒等转换模板。那这个呢：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="UTF-8"
    indent="yes"/>

  <!-- Identity transform -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- We don't want to copy <Fields>, just the contents -->
  <xsl:template match="Fields">
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="Field">
    <xsl:element name="{@Name}">
      <xsl:value-of select="Value"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:21:22.067

你很亲密。请在下面查看我的答案中的细微变化。

**当这个 XSLT 1.0 解决方案：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Fields">
     <xsl:apply-templates />
  </xsl:template>

  <xsl:template match="Field">
     <xsl:element name="{@Name}">
       <xsl:value-of select="Value" />
     </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于第一个提供的 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Entity Type="defect">
  <Fields>
    <Field Name="user-28"/>
    <Field Name="user-29">
      <Value>1</Value>
    </Field>
    <Field Name="has-change">
      <Value/>
    </Field>
    <!-- other <Field> elements -->
  </Fields>
</Entity> 
```

**...产生了想要的结果：**

```
<?xml version="1.0"?>
<Entity Type="defect">
  <user-28 />
  <user-29>1</user-29>
  <has-change />
  <!-- other <Field> elements -->
</Entity> 
```

**如果针对第二个提供的 XML 运行相同的 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Entities TotalResults="60">
  <Entity Type="defect">
    <Fields>
      <Field Name="id">
        <Value>1161</Value>
      </Field>
      <!-- other <Field> elements -->
    </Fields>
  </Entity>
</Entities> 
```

**...再次，产生了想要的结果：**

```
<?xml version="1.0"?>
<Entities TotalResults="60">
  <Entity Type="defect">
    <id>1161</id>
    <!-- other <Field> elements -->
  </Entity>
</Entities> 
```

**解释：**

*   第一个模板是[`The Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html). 正如您可能推测的那样，它的目的是默认情况下将源文档中的所有节点和属性原样复制到结果文档中。
*   第二个模板匹配所有`<Fields>`元素。找到一个后，XSLT 解析器被指示将模板应用到其子元素（另外，它具有删除该`<Fields>`元素的效果）。
*   最终模板与您已有的模板相同。

# iphone - 即使将 url 添加到 plist 后，白名单拒绝错误

> ID：13412595
> 
> 赞同：0
> 
> 时间：2012-11-16T08:01:54.373
> 
> 标签：iphone, cordova

这是我得到的错误

```
ERROR whitelist rejection: url='https://ocrsdk.blob.core.windows.net/files/55fecc4c-b85f-42d6-b8ee-51cd8b40b081.result?se=2012-11-16T17%3A00%3A00Z&sr=b&si=downloadResults&sig=Y5kQg7cxt7CC4Eptd4bDlYg8%2FrJ5cA4n%2BfEkbgg6Hu8%3D'
2012-11-16 13:25:45.702 SnapAndPay[572:707] ERROR whitelist rejection: url='https://ocrsdk.blob.core.windows.net/files/55fecc4c-b85f-42d6-b8ee-51cd8b40b081.result?se=2012-11-16T17%3A00%3A00Z&sr=b&si=downloadResults&sig=Y5kQg7cxt7CC4Eptd4bDlYg8%2FrJ5cA4n%2BfEkbgg6Hu8%3D'
2012-11-16 13:25:45.705 SnapAndPay[572:707] ERROR whitelist rejection: url='https://ocrsdk.blob.core.windows.net/files/55fecc4c-b85f-42d6-b8ee-51cd8b40b081.result?se=2012-11-16T17%3A00%3A00Z&sr=b&si=downloadResults&sig=Y5kQg7cxt7CC4Eptd4bDlYg8%2FrJ5cA4n%2BfEkbgg6Hu8%3D' 
```

这是我的科尔多瓦 plist 文件的屏幕截图 ![plist 截图](../Images/577a9863bb0a13a162b77247f4650955.png) [https://lh6.googleusercontent.com/-LWaZkxIU9Xg/UKXzo8C5REI/AAAAAAAAAWU/23MyFdCmCxQ/s792/Screen%2520Shot%25202012-11-16%2520at%25201.29.50%2520PM.png](https://lh6.googleusercontent.com/-LWaZkxIU9Xg/UKXzo8C5REI/AAAAAAAAAWU/23MyFdCmCxQ/s792/Screen%2520Shot%25202012-11-16%2520at%25201.29.50%2520PM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:25:52.967

根据[文档](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)，iOS 不支持域协议，因此您可以删除它们。此外，您应该添加顶级域：

```
*.windows.net 
```

# android - java.lang.NoClassDefFoundError: android.widget.ListPopupWindow

> ID：13412599
> 
> 赞同：3
> 
> 时间：2012-11-16T08:02:07.907
> 
> 标签：android, noclassdeffounderror, popupwindow

我想`ListPopupActivity`在单击按钮时显示，但它抛出了这个异常。

我已彻底阅读了有关此异常的信息，但无法解决问题项目中没有使用 jar 文件。

这是课程：

```
public class MainActivity extends Activity {

    String[] listItems = {"item 1", "item 2 ", "list", "android", "item 3", "foobar", "bar", };
    Button btn;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn = (Button)findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {

            @SuppressLint("NewApi")
            public void onClick(View v) {
                // TODO Auto-generated method stub
                  ListPopupWindow lpw = new ListPopupWindow(MainActivity.this);
                 lpw.setAdapter(new ArrayAdapter(MainActivity.this,  android.R.layout.simple_list_item_1, listItems));
                    lpw.setAnchorView(findViewById(R.id.btn));
                    lpw.setWidth(150);
                    lpw.setHeight(300);
                    lpw.show();
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:10:56.033

在 api 级别 11（操作系统版本 3.0）中添加了[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)类。我认为您已在清单中将 targetSdkVersion 设置为 11，并尝试在运行低于 api 级别 11 的设备中运行您的项目。

# c# - 获取图片框名称

> ID：13412605
> 
> 赞同：0
> 
> 时间：2012-11-16T08:02:33.350
> 
> 标签：c#

我有 2 个 PictureBox ，名称：pictureBox1, pictureBox2 我怎样才能得到我点击它的图片框的名称？

```
 private void pictureBox1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("clicked on: " + ??????);
    }
    private void pictureBox2_Click(object sender, EventArgs e)
    {
        MessageBox.Show("clicked on: " + ???????);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:04:17.903

试试这个：

```
private void PictureBoxesClick(object sender, EventArgs e)
{
    if (sender is PictureBox)
    {
        MessageBox.Show("clicked on: " + ((PictureBox)sender).Name);
    }
} 
```

使用此代码，您不需要 2 `events`，您可以为两者使用一个事件`pictureboxes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T16:10:56.500

试试这个

```
private void pictureBox1_Click(object sender, EventArgs e)
{
    String text;
    text=PictureBox1.Text;
    MessageBox.Show("Clicked on:"+text);
} 
```

# spring - tomcat7 maven插件无法访问src/main/resources中的资源？

> ID：13412608
> 
> 赞同：0
> 
> 时间：2012-11-16T08:02:48.053
> 
> 标签：spring, tomcat, maven, maven-tomcat-plugin

当我在 src/main/resources 中放置 xml 资源（例如 spring 配置文件、日志记录...等）时，当我在嵌入式 tomcat 插件中运行这些文件时，我的应用程序无法读取这些文件。然而，将这些文件移动到 src/main/java 可以解决问题。

这是我正在使用的插件定义：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <port>9090</port>
        <path>/</path>
            <contextFile>${basedir}/src/main/webapp/META-INF/context.xml</contextFile>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>${postgres.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument-tomcat</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>javax.mail-api</artifactId>
            <version>${javax.mail.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>activation</artifactId>
                    <groupId>javax.activation</groupId>
                </exclusion>
            </exclusions>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>default-cli</id>
            <goals>
                <goal>deploy</goal>
                <goal>run-war</goal>
            </goals>
            <phase>pre-integration-test</phase>
        </execution>
    </executions>
</plugin> 
```

为什么我把资源放到 src/main/java 里面可以找到，但是运行的时候放到 src/main/resources 里面找不到`mvn tomcat7:run`

**更新：**我正在使用带有 m2e 的 eclipse 我可以使用指向本地 tomcat 服务器的 Run As > Run on Server 来运行应用程序。文件夹结构正确，eclipse 设置来自 pom.xml 通过 m2e。

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.util.Log4jConfigListener
java.lang.IllegalArgumentException: Invalid 'log4jConfigLocation' parameter: class path resource [log4j-config.xml] cannot be resolved to URL because it does not exist
    at org.springframework.web.util.Log4jWebConfigurer.initLogging(Log4jWebConfigurer.java:155)
    at org.springframework.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

在这种情况下，log4j-config.xml 位于 src/main/resources 中，很少有例外，例如 src/main/resources 文件夹中的文件不存在。

**更新 2：**问题原来是`<resources>`父 POM 中的一个元素导致 .xml 文件不包含在生成的输出中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:27:14.937

通常，当 eclipse 尝试查找由您的应用程序定义的文件时。它将 src 链接到 src/main/java 和 src/main/resources ..您能否在为 eclipse 生成的 .class 文件中看到以下条目。 .

```
<classpath>
    <classpathentry including="**/*.java" kind="src" path="src/main/java"/>
    <classpathentry excluding="**/*.java" kind="src" path="src/main/resources"/>

/**all repository entries are also here**/
</classpath> 
```

然后对于资源，tomcat首先检查它们是否在资源中（并在java文件夹中检查它们）

# c - 链表的递归排序是我的逻辑错误吗？

> ID：13412609
> 
> 赞同：0
> 
> 时间：2012-11-16T08:02:53.227
> 
> 标签：c, sorting, recursion, linked-list

它出什么问题了？它应该按升序对其进行排序。它不会导致程序崩溃，但是当我很确定有什么问题时，因为当我将链接列表链接到其他函数时，它会陷入无限循环。

```
#include <stdio.h>
#include <stdlib.h>

struct dataTag {
   int key;
};

struct nodeTag {
   struct dataTag data;
   struct nodeTag *pNext;
};
typedef struct dataTag dataStructType;
typedef struct nodeTag nodeStructType;

nodeStructType *SortList(nodeStructType *pFirst)
{
    nodeStructType *swap,*ptr;
    if(pFirst == NULL)
        return NULL;
    else
    {
        swap = pFirst;
        ptr = pFirst -> pNext;
        while(ptr != NULL)
        {
            if(ptr -> data.key < swap -> data.key)
                swap = ptr;
            ptr = ptr -> pNext;
        }
        swap -> pNext = SortList(pFirst -> pNext);
        return swap;
    }
}
int main(void)
{
   nodeStructType *pFirst;
   /* Lets say codes exists here that makes a link list etc just to make the code short*/
   pFirst = SortList(pFirst);
   /*Free List*/
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:12:00.197

您不能只交换节点来对列表进行排序。[这](http://encrypt3d.wordpress.com/2010/11/06/how-to-sort-a-singly-linked-list/)是一个对单链表进行排序的程序的链接。

基本上这条线 `swap = ptr;` 不会像你想象的那样工作。您需要适当地重置链接以确保您的链接列表保持正确链接。

# php - CURL 获取标头返回与 get_headers 不同

> ID：13412612
> 
> 赞同：1
> 
> 时间：2012-11-16T08:03:20.883
> 
> 标签：php, curl, header, content-type

我想从文件中获取标题。但 CURL 返回值与 get_headers 不同。

不知道为什么。这是结果：

使用 get_headers

```
Array
(
    [0] => HTTP/1.0 200 OK
    [1] => Content-Type: image/jpeg
    [2] => Last-Modified: Wed, 14 Nov 2012 11:06:07 GMT
    [3] => X-Cache-Status: HIT
    [4] => Expires: Tue, 19 Jan 2038 03:14:07 GMT
    [5] => Cache-Control: max-age=2592000
    [6] => X-Cache: HIT
    [7] => Content-Length: 120185
    [8] => Connection: close
    [9] => Date: Fri, 16 Nov 2012 08:01:15 GMT
    [10] => Server: lighttpd/1.4.26
) 
```

并且 CURL 没有 Content-Type ~> 这就是我想要的

```
Array
(
    [0] => HTTP/1.1 200 OK
    [1] => Content-Length: 120185
    [2] => Connection: close
    [3] => Date: Fri, 16 Nov 2012 08:01:42 GMT
    [4] => Server: lighttpd/1.4.26
    [5] => 
    [6] => 
) 
```

这是我通过 curl 函数获取的标题

```
function get_headers_curl($url) 
{ 
    $ch = curl_init(); 

    curl_setopt($ch, CURLOPT_URL,            $url); 
    curl_setopt($ch, CURLOPT_HEADER,         true); 
    curl_setopt($ch, CURLOPT_NOBODY,         true); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
    curl_setopt($ch, CURLOPT_TIMEOUT,        15); 

    $r = curl_exec($ch); 
    $r = split("\n", $r); 
    return $r; 
} 
```

如果我设置了返回 Content-Type 的 CURL

```
curl_setopt($ch,CURLOPT_HTTPGET,true); 
```

但它也会返回文件内容（正文），如何仅使用 CURL 而没有文件内容来准确获取文件内容类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:24:15.833

很容易获得 CONTENT_TYPE 或其他 cURL 信息：

```
<?php
// Create a curl handle
$ch = curl_init('link_to_file');

curl_setopt($ch, CURLOPT_NOBODY, TRUE);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, FALSE);

// Execute
curl_exec($ch);

// Check if any error occured
if (!curl_errno($ch)) {
    var_dump(curl_getinfo($ch, CURLINFO_CONTENT_TYPE));
}

// Close handle
curl_close($ch); 
```

输出：

> 字符串（10）“图像/JPEG”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:18:35.943

get_headers 正在接收图像的信息，但另一个不是。猜猜你可以检查网址。因为两者必须相同。

# ios - 查找安装在模拟器上的应用程序的路径

> ID：13412615
> 
> 赞同：0
> 
> 时间：2012-11-16T08:03:26.917
> 
> 标签：ios, xcode

有什么方法可以在预操作运行脚本中获取此路径？

```
/Users/user-name/Library/Application Support/iPhone Simulator/6.0/Applications/8F3F9CBC-F96A-48C1-9CE9-BE32D0E0B833 
```

这将在构建之后调用，所以它应该在那里，我真正需要找到的环境变量是 8F3F9CBC-F96A-48C1-9CE9-BE32D0E0B833

是否有像 IPHONEOS_DEPLOYMENT_TARGET 这样的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-11T11:27:55.743

而不是在查找器中搜索哪个 GUID 是您正在运行的应用程序，只需在 xcode 调试器中键入 po NSHomeDirectory() 它将返回您正在运行的应用程序的路径。剪切并粘贴到 Go>Go To Folder (Cmd-Shift-G)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:38:21.937

我可以通过如下的 find 命令找到它：

```
APP=`find "/Users/$USER/Library/Application Support/iPhone Simulator" -name 'Foo.app' -type d -mtime -1` 
```

mtime 选项限制为今天创建的选项；另一种选择是传入您所针对的模拟器版本。

```
find "/Users/$USER/Library/Application Support/iPhone Simulator/$1" -name "$2" 
```

# android - ksoap2 : java.lang.IllegalArgumentException: size <= 0 while making a http.call

> ID：13412622
> 
> 赞同：5
> 
> 时间：2012-11-16T08:04:17.283
> 
> 标签：android, wsdl, ksoap2, soap1.2

我想通过我的 Android 4.03 设备使用 Ksoap2 连接到基于 dot.net 的 Web 服务。

我的问题是当我调用肥皂请求时，我得到了这个异常：

```
11-16 08:35:08.649: W/System.err(6392): java.lang.IllegalArgumentException: size <= 0
11-16 08:35:08.649: W/System.err(6392): at java.io.BufferedInputStream.<init>(BufferedInputStream.java:94)
11-16 08:35:08.649: W/System.err(6392): at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:226)
11-16 08:35:08.649: W/System.err(6392):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
11-16 08:35:08.649: W/System.err(6392):     at at.jesenko.eDoc.MainActivity$1.run(MainActivity.java:48) 
```

我正在使用的代码

```
 final String url = "http://server:9007/DWService?wsdl";
    final String NAMESPACE = "http://tempuri.org/";
    final String METHOD_NAME ="Login";
    final String SOAP_ACTION="http://tempuri.org/Login";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Thread loginThread = new Thread(){

            @Override
            public void run() {

                try {

                    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
                    Request.addProperty("userName", "demo");
                    Request.addProperty("password", "demo1234");
                    Request.addProperty("organization", "Peters Engineering");

                    SoapSerializationEnvelope Envelope = new SoapSerializationEnvelope(
                            SoapEnvelope.VER12); 
                    Envelope.dotNet=true;
                    Envelope.setOutputSoapObject(Request);

                    HttpTransportSE ht = new HttpTransportSE(url);
                    ht.debug = true;
                    ht.call(SOAP_ACTION, Envelope);

                    SoapObject response = (SoapObject) Envelope.getResponse();
                    final String SessionID = response.getProperty("SessionID").toString();

                runOnUiThread(new Runnable() {

                    public void run() {

                        TextView tv = (TextView) findViewById(R.id.textView1);
                        tv.setText(SessionID);

                    }
                });

                } catch (Exception e) {

                    e.printStackTrace();

                }   

            }

    };
    loginThread.start();
} 
```

这是我要调用的 wsdl 文件的一部分：

```
<wsdl:definitions name="DWService" targetNamespace="http://tempuri.org/">
 <wsdl:types>
  <xsd:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
   <xsd:element name="Login">
    <xsd:complexType>
     <xsd:sequence>
      <xsd:element minOccurs="0" name="userName" nillable="true" type="xsd:string"/> 
      <xsd:element minOccurs="0" name="password" nillable="true" type="xsd:string"/>
      <xsd:element minOccurs="0" name="organization" nillable="true" type="xsd:string"/> 
     </xsd:sequence>
    </xsd:complexType>
   </xsd:element> 
```

我对 Ksoap 和 Web 服务没有太多经验，所以我希望有人可以帮助我解决这个问题 :)

问候。

**编辑**

我尝试改用 ?svc -> 相同的错误:(

**编辑**

这里 WSDL 文件的标题可能我的命名空间是错误的

```
 <?xml version="1.0" encoding="UTF-8"?>
    -<wsdl:definitions xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" 
xmlns:wsa10="http://www.w3.org/2005/08/addressing" 
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:tns="http://tempuri.org/" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
targetNamespace="http://tempuri.org/" name="DWService">
-<wsdl:types>-
<xsd:schema targetNamespace="http://tempuri.org/" elementFormDefault="qualified">-
<xsd:element name="Login">-
<xsd:complexType>-
<xsd:sequence>
<xsd:element name="userName" type="xsd:string" nillable="true" minOccurs="0"/>
<xsd:element name="password" type="xsd:string" nillable="true" minOccurs="0"/>
<xsd:element name="organization" type="xsd:string" nillable="true" minOccurs="0"/></xsd:sequence>
</xsd:complexType>
</xsd:element>
-<xsd:element name="LoginResponse">
-<xsd:complexType>-
<xsd:sequence>
<xsd:element name="LoginResult" type="q1:ClientServiceSession" nillable="true" minOccurs="0" 
xmlns:q1="http://schemas.datacontract.org/2004/07/DocuWare.WebServices.GAPIFunctionality.DataContracts"/>
</xsd:sequence></xsd:complexType></xsd:element> 
```

和肥皂部分：

```
-<wsdl:binding name="BasicHttpBinding_IDWService" type="tns:IDWService">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
-<wsdl:operation name="Login"><soap:operation style="document" soapAction="http://tempuri.org/IDWService/Login"/>
-<wsdl:input><soap:body use="literal"/></wsdl:input>
-<wsdl:output><soap:body use="literal"/></wsdl:output></wsdl:operation>
-<wsdl:operation name="Logoff"><soap:operation style="document" soapAction="http://tempuri.org/IDWService/Logoff"/>
-<wsdl:input><soap:body use="literal"/></wsdl:input>
-<wsdl:output><soap:body use="literal"/></wsdl:output></wsdl:operation>

-<wsdl:service name="DWService">
-<wsdl:port name="BasicHttpBinding_IDWService" binding="tns:BasicHttpBinding_IDWService"><soap:address location="http://localhost:9007/DWService"/></wsdl:port></wsdl:service> 
```

希望你能帮我 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:47:22.487

用于`Fiddler`跟踪流量。可能服务器/服务正在返回`Content-Length: 0` 这可能是任何东西，在我的情况下，它是`Content-type`从客户端应用程序发送的不匹配和服务器端的预期内容类型。由于异常清楚地表明**从**`ByteArrayInputStream`服务接收到的长度 <= 0的内容。

 **我希望这会让您进行更多调查。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T06:26:32.740

像这样使用：

**基本的Http绑定：**

```
 SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
                Request.addProperty("userName", "demo");
                Request.addProperty("password", "demo1234");
                Request.addProperty("organization", "Peters Engineering");

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet=true;
                envelope.setOutputSoapObject(Request);

                HttpTransportSE ht = new HttpTransportSE(URL);

               try {
                    ht.call(SOAP_ACTION, envelope);  
            final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

我对您的代码进行了一些更改。

**1)**

> SoapSerializationEnvelope 信封 = 新 SoapSerializationEnvelope(SoapEnvelope.VER12);

变成

> SoapSerializationEnvelope 信封 = 新 SoapSerializationEnvelope(SoapEnvelope.VER11);

**2）** 我已从您的代码中删除了这部分。

> ht.debug = true;

**3)**

> SoapObject response = (SoapObject) Envelope.getResponse();

变成

> SoapPrimitive 响应 = (SoapPrimitive)envelope.getResponse();

确保您**在清单中添加了互联网权限**

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

如果你没有通过使用这个得到输出，问题可能是你的**wsdl**

更多**[参考](http://android-spirit.blogspot.in/2013/07/consume-net-webservice-in-android.html)** 希望这会对你有所帮助。

* * *

**PS。**

**WsHttpBinding：**

```
 Element e = new Element();
    e.setName("To");
    e.setNamespace("http://www.w3.org/2005/08/addressing");
    e.addChild(Node.TEXT,
            "your URL HERE");

    Element e1 = new Element();
    e1.setName("Action");
    e1.setNamespace("http://www.w3.org/2005/08/addressing");
    e1.addChild(Node.TEXT,
            "http://tempuri.org/IService1/HelloTest");

request.addProperty("Celsius", "32");    

// use VER12 instead of VER11
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);

envelope.dotNet=true;

// add HederOut to envelope
envelope.headerOut = new Element[] { e, e1 };

envelope.setOutputSoapObject(request); 
```

[参考](https://stackoverflow.com/questions/18018232/unable-to-get-response-from-httpresponse-when-passing-soap-object-soap1-2-andr)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:41:21.507

您是否在此行之后检查了调试？

```
SoapObject response = (SoapObject) Envelope.getResponse(); 
```

如果您已通过 web 服务返回属性？可能没有返回数据

利用

```
int arraySize = response.getPropertyCount(); 
```

并检查长度以了解您是否正在接收数据

我认为可以产生argumentException，因为您试图访问该属性而不在这里检查它：

```
final String SessionID = response.getProperty("SessionID").toString(); 
```

测试 propertyCount 并告诉我们。

**编辑：**

请对此进行测试：

将 SoapEnvelope 从 VER12 更改为 VER11

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11); 
```

将 webService URL 从 wdsl 更改为此类型 (svc)：

```
 String URL = "http://host:8080/HelloWCF/Service1.svc"; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-11-14T04:57:17.797

我的选择：1.使用最新的 3.1.0 ksoap2 jar：[http](http://code.google.com/p/ksoap2-android/wiki/HowToUse?tm=2) ://code.google.com/p/ksoap2-android/wiki/HowToUse ?tm=2 2.将 v12 更改为 v11**

# excel - 如何修改 XIRR 以根据某个值出现的位置测量不同数量的周期？

> ID：13412628
> 
> 赞同：4
> 
> 时间：2012-11-16T08:04:41.967
> 
> 标签：excel, excel-2007, excel-formula

我正在尝试创建一个`XIRR`函数，该函数将根据特定值的地址调整它正在测量的周期数。例如，如果值出现在第 48 个月，我希望`XIRR`函数测量 48 列数据，但如果值出现在第 17 个月，

我只想`XIRR`测量 17 列。我可以使用等获取值的地址和相应的日期`=CELL("address", MATCH(...`，但我不知道如何/是否可以连接`XIRR`输入。最初，我希望我可以做类似的事情：

`=XIRR(A1:Cell("address", [value_reference]), B1:Cell("Address", [date_reference]))`

谁能帮我这个？使用 Excel 2007

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:51:44.607

您可以`OFFSET`用来制作动态范围

如果例如

*   你有价值观`A1:A50`
*   日期在`B1:B50`
*   中的特定值`D2`（出现在 A 列中的值中）

那么这个公式

`=XIRR(OFFSET(A1,0,0,MATCH(D2,$A$1:$A$50,0),1),OFFSET($B$1,0,0,MATCH(D2,$A$1:$A$50,0),1))`

将进行动态范围匹配

# selenium - Selenium：如何将数据添加到文本框或文本区域

> ID：13412631
> 
> 赞同：4
> 
> 时间：2012-11-16T08:05:02.087
> 
> 标签：selenium, selenium-webdriver

我正在使用 Selenium Web 驱动程序。我有一个文本区域，其中写入了一些文本。现在如何在其中添加一些**text** /html 或在特定位置插入数据？

以下代码将其**附加**到文本区域/文本框

```
driver.findElement(By.xpath("textBox/textArea")).sendKeys("abc"); 
```

IE。如果文本区域/文本框包含 123。上面的结果将是**123abc**。但我想要**abc123 或 12abc3**

PS：我正在测试“电子邮件回复”功能。因此，作为用户，当您回复邮件时，不要复制文本，然后清除所有文本，然后在编写新文本后将所有文本复制回来，如下所示：

```
WebElement element = driver.findElement(By.xpath("textBox/textarea"));
String previousText = element.getAttribute("value");
element.clear();
element.sendKeys("abc" + previousText); 
```

请帮忙...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T15:26:09.583

```
import org.openqa.selenium.Keys;

...

WebElement element = driver.findElement(By.xpath("textBox/textarea"));
element.sendKeys(Keys.HOME + "abc"); 
```

或者可能用于多行文本区域

```
element.sendKeys(Keys.CONTROL, Keys.HOME);
element.sendKeys("abc"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:12:31.200

```
 WebElement element = driver.findElement(By.xpath("textBox/textarea"));
 String previousText = element.getAttribute("value");
 element.clear();
 element.sendKeys("abc" + previousText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:49:35.100

您可以通过机器人使用插入文本。
按照我的方式。
我希望这可以帮助你。

```
public void runScript() {

    WebElement textarea = driver.findElement(By.id("textarea"));

    insert(textarea, "abc", 2);
}

public void insert(WebElement textElement, String insertText, int offset) {

    String currentText = textElement.getText();
    int len = currentText.length();
    if (len < offset) {
        throw new IllegalArgumentException(String.format("len(%d) < offset(%d)", len, offset));
    }
    Robot robot = null;
    try {
        robot = new Robot();
    } catch (AWTException e) {
        e.printStackTrace();
    }
    robot.setAutoDelay(20);
    // On focus.
    textElement.click();
    // Move cursor for head.
    type(robot, KeyEvent.VK_CONTROL, KeyEvent.VK_HOME);
    for (int i = 0; i < offset; i++) {
        type(robot, KeyEvent.VK_RIGHT);
    }
    textElement.sendKeys(insertText);
}

public void type(Robot robot, int... keycodes) {
    for (int keycode : keycodes) {
        robot.keyPress(keycode);
    }
    for (int keycode : keycodes) {
        robot.keyRelease(keycode);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T09:12:14.723

```
htmlContent = driver.find_element_by_id("wp-editor-area")
htmlContent.sendKeys(Keys.CONTROL, Keys.HOME)
htmlContent.sendKeys("The Content You WANT!") 
```

# symfony - Symfony2 - 在每条路线中调用一些动作

> ID：13412632
> 
> 赞同：1
> 
> 时间：2012-11-16T08:05:07.137
> 
> 标签：symfony, twig

我必须在每个操作中调用一些东西，例如从我的数据库中获取标签，或所有文章的数量等。
现在我总是在我想要显示它的每个操作中触发其他函数。有什么方法可以触发某些功能而不触发它们适合当前路线的动作，并在这些功能中分配一些树枝变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:07:36.790

你可以这样做：

*   创建一个全局“假”操作，将接受特定“类型”的每个请求
*   定义一个动作调度器（作为服务），它将路由到正确的动作（或用户`$router`symfony2 对象，只要你将路由名称作为参数传递给你的“假”动作，它就会做同样的事情
*   调用正确的动作后，做所有你需要做的事情

所以，像这样

```
public function actionDispatcher(Request $request, $route_name, $parameters)
{
   /* retrieve the router */
   $router = $this->get('router');
   $myRouteDefaultsArray = $router->getRouteCollection->get('route_name')->getDefaults();
   /* retrieve the correct action */
   $myAction = $myRouteDefaultsArray['_controller'];
   /*use your action here */
   [.....]
   /* fire your functions here */
   [.....]
   /* render the twig template along your variables here */
   [.....]
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:09:41.500

感谢DonCallisto，我做到了：

```
<?php

namespace Puzzle\InfobusBundle\EventListener;

use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Bundle\TwigBundle\TwigEngine;

class MyListener{
    protected $doctrine;
    protected $templating;
    protected $session;
    protected $container;

    /**
     * @param ContainerInterface $container
     */
    public function __construct($security, $doctrine, $session, $templating, $container){
        $this->doctrine=$doctrine;
        $this->session=$session;
        $this->templating=$templating;
        $this->container=$container;
    }

    public function onKernelRequest() {
        $this->container->get('twig')->addGlobal('myVar', 1234);
    } 
```

在 app/config/config.yml 中：

```
services:
    acme_my.exception.my_listener:
        class: Acme\MyBundle\EventListener\MyListener
        arguments: ["@security.context", "@doctrine", "@session", "@templating", "@service_container"]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

现在 onKernelRequest 中的代码会在每个页面上触发代码，我可以将一些变量发送到 twig 模板。

# google-chrome - 使用 Chrome 扩展程序编写新的 Google Chrome

> ID：13412636
> 
> 赞同：1
> 
> 时间：2012-11-16T08:05:27.730
> 
> 标签：google-chrome, google-chrome-extension

大家好，我对新的 gmail compose 方法有疑问。我开发了一个扩展，用于将用户签名添加到 gmail compose 模块的正文中。我能够通过使用将脚本插入框架来实现这一点

```
`chrome.tabs.executeScript(
    activeTabs[0].id, { file: 'ExtractGmail.js', allFrames: true });
                  });` 
```

在 ExtractGmail.js 脚本中，我曾经简单地使用文档 dom 来调用正文字段。这很有效，我能够完成我的任务，但是现在由于 gmail 已经改变了现在的撰写功能，如果我尝试获取 body 元素，我会得到未定义的元素，尽管我很清楚我使用的 id 与html。我也尝试通过标签名和类名获取元素，但仍然无法取回任何元素。如您所见，我必须获取将签名插入正文的元素。请任何人都可以帮助我

# backbone.js - Underscore.js - xyz 未定义（8 超出范围 5）

> ID：13412640
> 
> 赞同：0
> 
> 时间：2012-11-16T08:05:44.763
> 
> 标签：backbone.js, underscore.js, tastypie, marionette

我在我的网站的一部分上遇到了一个非常奇怪的错误，该部分是用backbone.js、backbone.marionette 构建的。我将 underscore.js 用于模板，并使用 nicepie 用于 REST 框架。

Firebug 输出“ReferenceError: xyz (where <%= xyz %> in the underscore template) is not defined”。（8 超出范围 5）。

当我将其追溯到 underscore-min.js 文件时，它没有 8 行，因为它是一个 min 文件。这是可以预料的。

但是，我怀疑是语法错误，因为在控制台中手动操作变量可以正常工作。

我可以从 REST 框架中手动定义**名称**模型提取，并将其呈现在其视图中。我什至可以使用 MyApp.testSection.show("渲染的视图") 将其正确输出到前端，而不会出现任何问题。

我怀疑 NameView 模板中的语法有问题：_.template(...) 部分或 MyApp.addInitializer

**下面的代码**

```
Name = TastypieModel.extend({

    urlRoot:'/api/v1/names/Calvin'

});

//returns an array {'name':'Calvin', 'age':32, etc....}

NameView = Backbone.Marionette.ItemView.extend({
    model: Name,
    template: _.template("<h1>My name is <%= name %></h1>"),
    tagName: 'p',

    initialize: function(){
        this.bindTo(this.model, "change", this.render);
    }
});

MyApp.addInitializer(function(options){

    var name = new Name();

    name.fetch();

    var nameview = new NameView ({
        model: name
    });

    MyApp.testSection.show(nameview);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:26:36.467

该问题很可能是由您获取数据引起的。

`model.fetch()`是异步操作，但您的代码没有考虑到这一点。您正在使用没有数据的模型渲染视图，因为渲染在调用后立即发生，`fetch`而不是等待获取模型。

```
 MyApp.addInitializer(function(options){

    var name = new Name();

    var fetched = name.fetch();

    // wait for the model to be fetched
    $.when(fetched).then(function(){

      var nameview = new NameView ({
        model: name
      });

      MyApp.testSection.show(nameview);

    });

}); 
```

# git - Git描述给不同的标签

> ID：13412645
> 
> 赞同：2
> 
> 时间：2012-11-16T08:06:37.833
> 
> 标签：git, git-tag, git-describe

我已经用标签“Release_V1.0.0.4”标记了我的存储库。但这是我从“git describe”和“git describe origin”得到的。

**[root pds_series]# git describe**

**Release_V1.0.0.2-22-g0859de9**

**[root pds_series]# git describe origin**

**Release_V1.0.0.2-18-gce2b24c**

使用“git describe --all”和“git describe --tags”我得到了正确的标签。

**[root pds_series]# git describe --all**

**标签/Release_v1.0.0.4**

**[root pds_series]# git describe --tags**

**发布_v1.0.0.4**

另外，通过以下命令，我得到了正确的标签。

**[root pds_series]# git log --pretty=format:'%ad %h %d' --abbrev-commit --date=short -1**

**2012-11-15 0859de9（HEAD，Release_v1.0.0.4，master）**

有谁知道这背后的原因？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T08:12:48.793

您可能使用了“轻量级”标签。默认情况下`git describe`，仅使用标记对象来描述提交，而使用`--tags`它时将使用任何引用，`refs/tags`即使它们直接指向提交而不是标记对象。

要创建标签对象，您必须使用`-a`(annotated) 或`-s`( `-u`signed) 选项之一`git tag`，否则将创建轻量级标签（直接指向提交的引用）。

要查看两个标签之间的区别，请尝试：

```
git cat-file -t Release_V1.0.0.2 
```

和：

```
git cat-file -t Release_v1.0.0.4 
```

On 可能会说“tag”，而另一个会说“commit”。

要解决此问题，您可以使用`-f`and (say)重新创建标签`-a`。

```
git tag -f -a Release_v1.0.0.4 Release_v1.0.0.4 
```

# regex - 如果我使用“|”时有要匹配的订单 在正则表达式中

> ID：13412647
> 
> 赞同：0
> 
> 时间：2012-11-16T08:06:41.780
> 
> 标签：regex

我想从 sql 中获取表名（例如：）`select name from user where id>5`。

我尝试使用正则表达式，我的模式是`from\s+(.*)(\s*$|where)`

当sql不包含'where'时，没关系。但如果 sql 包含 'where'，我会得到 'user where id>5' 作为答案。

因为 sql 可能没有 'where'，所以我使用`$`，但`(.*)(\s*$)`几乎可以匹配所有内容，我尝试使用 this `from\s+(.*)(\s*where|$)`，我得到相同的错误答案。

我想知道我使用时是否有匹配的顺序`|`？我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:12:31.997

你的`.*`first 吃掉所有东西，包括 where 子句，然后它匹配`$`. 原因是贪心`*`

您应该将它附加到惰性？

尝试`FROM\s+(.*?)(\s+WHERE|$)`

# swing - 箭头、制表符、退格键在 Swing JTextField、JPasswordField 组件中不起作用

> ID：13412648
> 
> 赞同：1
> 
> 时间：2012-11-16T08:06:48.143
> 
> 标签：swing, jar, arrow-keys

我正在开发一个 Swing 桌面应用程序。在我的登录面板中，有 JTextField 组件。我正在使用 Netbeans IDE 7.2.1 和 Java 1.6。更新 31\. 从 Netbeans IDE 调试和运行项目时，所有键盘功能、键都可以正常工作，但在从命令行运行 *jar 文件或双击它的情况下，箭头、制表符、退格键也是鼠标-右键单击在 JTextField 组件中不起作用。如果存在任何默认的键盘焦点管理器实用程序等，我想使用，我不想为每个键实现键监听器。

# oracle - PLS-00306：参数的数量或类型错误

> ID：13412649
> 
> 赞同：0
> 
> 时间：2012-11-16T08:06:54.163
> 
> 标签：oracle, plsql, oracle10g, plsqldeveloper

我在以下过程中收到此错误“PLS-00306：参数数量或类型错误”：-

```
CREATE OR REPLACE procedure TEST1(p_cursor in out sys_refcursor)

as

 sql_query varchar2(1000) := 'select UTL_ID,';

begin
    for x in (select distinct tyt_id from GTEMP_TPOAR order by 1)
    loop
        sql_query := sql_query ||
          'sum(case when tyt_id = '||x|| ' then  cnt end)'|| x ||',';

            dbms_output.put_line(sql_query);
    end loop;

    sql_query := RTRIM(sql_query, ',');
    sql_query := sql_query || ' from GTEMP_TPOAR';

    open p_cursor for sql_query;
end; 
```

我正在使用 oracle 10g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:15:41.957

我得到了错误。我必须使用 x.tytid

# c# - 在 C# 中监听任务调度程序事件

> ID：13412651
> 
> 赞同：6
> 
> 时间：2012-11-16T08:07:14.383
> 
> 标签：c#, events, task, scheduler

有一个任务列表和他们的时间表。说任务 1 - 每天中午 12 点 任务 2 - 星期一、星期三 - 晚上 9 点想按照他们的日程安排解雇他们。

是否可以将它们注册到任务调度程序或 c# 中的其他调度程序\计时器，并具有唯一的上下文 - 任务 ID。在回调（比如某个事件）时，可以从上下文中获取 taskid 并使用 taskid，我可以触发操作。

基本上需要在已通过的上下文满足预定时间时进行回调。我的代码最清楚在预定时间内必须做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:18:59.263

你为什么不尝试使用[quartz.net](http://quartznet.sourceforge.net/faq.html)。这个调度器支持任务 ID 甚至调度上下文。还有很好的文档和大量示例。

这是任务（又名作业）的示例，执行上下文是从调度程序发送的。

```
public class DumbJob : IJob
{
    public DumbJob() {
    }

    public void Execute(JobExecutionContext context)
    {
        Console.WriteLine("DumbJob is executing.");
    }
} 
```

顺便说一句，不要忘记使调度程序静态 - 以避免被垃圾收集。我以前已经遇到过这个问题。

# django - django 在 cookie 中没有 csrftoken

> ID：13412653
> 
> 赞同：15
> 
> 时间：2012-11-16T08:07:17.863
> 
> 标签：django, ajax, csrf-token

我正在测试发出 POST ajax 请求，但由于没有 csrftoken，我得到了 403。我关注了文档，但是它仍然不起作用，我发现名为 csrftoken 的 cookie 是**empty**，这意味着`$.cookie("csrftoken")` **return null**。

有人可以告诉我原因以及如何设置`csrftoken`到 cookie 中吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T09:38:50.700

我认为您应该提供如何在 HTML/JS 代码和中间件设置中获取 csrf 令牌的代码。

首先，您应该检查是否`django.middleware.csrf.CsrfViewMiddleware`已打开。

我有一个类似的问题，当我在 python 代码`request.META.get('CSRF_COOKIE')`中获取令牌时。

当您在模板中使用此标记时 - `{% csrf_token %}`Django 注意到该标记已呈现并将 Cookie 设置为`CsrfViewMiddleware.process_response`. 如果您以其他方式获取令牌值，Django 将错过此标志。因此它会为您生成一个令牌，但不会设置相应的 cookie。

我在代码中有 2 个解决方法。您应该将它添加到用于生成带有 JS 代码的模板的视图中。

**1.**可以强制Django设置CSRF Coo​​kie：

```
# Force updating CSRF cookie
request.META["CSRF_COOKIE_USED"] = True 
```

**2.**如果你调用，Django 会自动设置 CSRF_COOKIE_USED`get_token`

```
from django.middleware.csrf import get_token
# don't use direct access to request.META.get('CSRF_COOKIE')
# in this case django will NOT send a CSRF cookie. Use get_token function
csrf_token = get_token(request) 
```

每个解决方案都应该单独工作。我建议使用`get_token`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-10T06:52:24.603

您可能想要使用[`ensure_csrf_cookie`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.ensure_csrf_cookie)视图装饰器（从 Django 1.4 开始可用）。`csrftoken`即使您不使用`{{ csrf_token }}`模板标签，这也会设置cookie。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-07T14:57:39.967

我遇到了同样的问题（$.cookie('csrftoken') 返回了'undefined'）。

问题出在我的 Django 配置中，我评论了以下行并且它有效：

```
#CSRF_COOKIE_HTTPONLY = True  # Prevent client-side JavaScript access to the CSRF cookie 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-18T19:26:45.260

扩展[o_c 的答案](https://stackoverflow.com/a/26239007/1677912)：通过注释该`CSRF_COOKIE_HTTPONLY`行，csrf_token 值不再是“未定义”（在 Firefox firebug 中），而是显示为“真实”值，例如“qGuPe2Q7...等”。

Ajax 请求不再因`403 Forbidden`错误而被拒绝并被正确执行（前提是在 AJAX 标头中设置了 csrf_token）。

```
 $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                 if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                 xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
             }
        }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-18T19:46:54.453

首先，如果您正在设计应用程序，最好在标头或 POST 请求中使用 csrf Token，而不是在 cookie 中，因为：

*   所有表单都必须动态地将值添加到其 HTML 中。任何 AJAX POST 还必须包含该值。
*   cookie 将针对每个请求提交（即所有 GET 的图像、CSS、JS 等，不涉及 CSRF 过程）增加请求大小。

如果你想在 django 中强制使用 cookie，你总是可以：

```
request.META["CSRF_COOKIE_USED"] = True 
```

如果您没有在任何地方使用 {% csrf_token %} 在您的项目中。根据 [documentation][1]，您无需执行任何其他操作，只需编写一个简单的 javascript 代码即可。其实这不是真的。您必须`"request.META['CSRF_COOKIE_USED'] = True"`在每个视图中放置线条（或编写适当的装饰器）。

# java - 如何从 DialogFragment / DatePickerFragment 将日期传递回 Activity？

> ID：13412656
> 
> 赞同：0
> 
> 时间：2012-11-16T08:07:42.407
> 
> 标签：java, android, android-dialog, android-dialogfragment, android-datepicker

我知道如何用 Intent 做到这一点，但我该怎么做......

这是我必须打开的代码`DatePickerFragment`：

```
DialogFragment newFragment = new DatePickerFragment();

Bundle bundle = new Bundle();
bundle.putString("date", (String) itemDict.get(Helper.convertKeyString(name, false)));
newFragment.setArguments(bundle);

newFragment.show(getFragmentManager(), "datePicker"); 
```

一旦打开，我如何将我选择的日期传递给我的`Activity`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:12:47.450

您可以创建`interface`，将其传递给`DatePickerFragment`（在构造函数中），然后在关闭对话框之前调用方法

例如：

你的界面：

```
public interface OnDatePicked{
    void onDatePicked();
} 
```

您的活动：

```
public YourActivity implements OnDatePicked{
    //your Activity
} 
```

还有你的 DatePickerFragment：

```
public class DatePickerFragment { //change Object to required type
    private OnDatePicked listener;

    public DatePickerFragment(OnDatePickedlistener){
        this.listener=listener;
    }

    //required methods
    protected void method(Object o){
        //your stuff
        listener.onDatePicked();
    }
} 
```

# ios - 在 iOS 中使用 UITouch 识别图像中的对象、形状并识别它们？

> ID：13412657
> 
> 赞同：0
> 
> 时间：2012-11-16T08:07:43.233
> 
> 标签：ios, image, encoding, uitouch, decoding

我创建的应用程序有一组图像。图像将有流程图。该图表将具有不同的节点和箭头，指示它们之间的流，并且节点将具有它们的标题。

现在，当用户单击节点（例如标题为“开始操作”）时，我需要使用节点标题信息和其他节点信息来捕获此事件。

我认为这是不可能的，除非我在创建图像时将一些信息存储在图像中并且当用户点击图像时，我可以捕获触摸的位置并尝试提取编码的信息。

您对此有何建议？

# php - 在 PHP 页面中打印 .out 文件的输出

> ID：13412661
> 
> 赞同：1
> 
> 时间：2012-11-16T08:07:51.273
> 
> 标签：php, c, executable

我很难将 Web 服务器上的可执行文件的输出放入网页中。我希望得到一个简单的“Hello World”。

具体来说，我有一个打印“Hello World”的非常基本的 C 程序。我使用 gcc 编译它，生成 HelloWorld.out，我可以从命令行运行它。

然后我有一个基本的 index.php 文件，我在其中尝试使用 passthru() 将 C 程序的结果输出到网页中。.php 文件如下所示：

`<?php passthru('HelloWorld.out'); ?>`

我已将 php 和 .out 文件上传到服务器上的同一目录。但是， index.php 不会产生任何输出。我在网上环顾四周，有几个地方我可能弄错了......我的总体目标是能够将我的网络服务器上的可执行程序的输出嵌入到页面中（不需要是 HelloWorld .out；可能 .out 扩展名在服务器上不起作用？）。或者我可能错误地使用了 passthru()；据我了解，这是使用它的最准系统。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:12:22.860

当您告诉操作系统在没有显式路径的情况下运行特定的可执行文件时，它将使用`PATH`环境变量（冒号分隔的一组路径）来查找它。

典型的路径是`/bin`,`/usr/bin/`等。

如果在这些路径中找不到可执行文件，它将抛出错误并放弃。要解决此问题，您有以下选择：

1.  指定可执行文件的绝对路径（即`/path/to/HelloWorld.out`）

2.  指定相对于当前目录的路径（即`./HelloWorld.out`）

3.  使用 PHP 创建绝对路径：

    `passthru(__DIR__ . '/HelloWorld.out');`

或者：

```
 passthru(dirname(__FILE__) . '/HelloWorld.out'); 
```

最后，您要执行的文件必须是可执行的，可以`chmod`用来更改权限或将文件路径传递给`sh`.

```
passthru('/bin/sh ' . dirname(__FILE__) . '/HellWorld.out'); 
```

# sql - 错误的查询嵌套选择错误 ORA-00913

> ID：13412662
> 
> 赞同：0
> 
> 时间：2012-11-16T08:08:06.703
> 
> 标签：sql, oracle, plsql, ora-00913

它不起作用，我只收到错误 ORA-00913：“值太多。”。

我认为问题在于嵌套选择。我想用这个选择来查看。

此代码显示所有员工的报告。我更改了这篇文章的属性名称：

```
 SELECT sk."AAAA", sk."BBBB", sk."CCCC", sk."DDD",
          sk."EEEE", sk."FFFF", sk."GGGGG",
          sk."HHHHH",
          (SELECT f.VALUE
           FROM fnd_user_property_tab f
           WHERE f.identity = sk.login
           AND NAME = 'IIIII') iii,sk."JJJJ",

           (SELECT f.VALUE
           FROM fnd_user_property_tab f
           WHERE f.identity = sk.login
           AND NAME = 'SMTP_MAIL_ADDRESS') mail,

           (SELECT f.VALUE
            FROM fnd_user_property_tab f
            WHERE f.identity = sk.login 
            AND NAME = 'KKKK') kkkk,

            (SELECT fnd.ORACLE_ROLE
             FROM fnd_user_role_tab fnd
             WHERE fnd.identity = sk.login
             AND fnd.ORACLE_ROLE LIKE 'STH-%') profil,

             (SELECT dr.ROLE, sox_co_w_roli(dr.role) skład
              FROM sys.dba_roles dr
              WHERE dr.role = (SELECT fnd.ORACLE_ROLE
                              FROM fnd_user_role_tab fnd
                              WHERE fnd.identity = sk.login  
                              AND fnd.ORACLE_ROLE LIKE 'STH-%')
             ) profile_role
    FROM sox_konta sk
    WHERE("PROFIL_DB" LIKE '%ppppp%'
          OR "PROFIL_DB" = 'oooooooo'
          OR "PROFIL_DB" = 'rrrrrrrr'
          )
    AND "COMPANIES" IN ('ZZ; ', 'YY; ') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:18:17.523

尝试以这种方式重写您的选择

```
SELECT sk."AAAA", sk."BBBB", sk."CCCC", sk."DDD",
          sk."EEEE", sk."FFFF", sk."GGGGG",
          sk."HHHHH",
          f_iii.value iii, sk."JJJ",
          f_mail.value mail,
          f_kkk.value kkk,
          fnd.oracle_role profil,
          dr.ROLE, sox_co_w_roli(dr.role) skład
    FROM sox_konta sk,
         fnd_user_property_tab f_iii,
         fnd_user_property_tab f_mail,
         fnd_user_property_tab f_kkk,
         fnd_user_role_tab fnd,
         sys.dba_roles dr
    WHERE("PROFIL_DB" LIKE '%ppppp%'
          OR "PROFIL_DB" = 'oooooooo'
          OR "PROFIL_DB" = 'rrrrrrrr'
          )
        AND "COMPANIES" IN ('ZZ; ', 'YY; ')
        AND f_iii.identity = sk.login
        AND f_iii.NAME = 'IIIII'
        AND f_mail.identity = sk.login
        AND f_mail.NAME = 'SMTP_MAIL_ADDRESS'
        AND f_kkk.identity = sk.login
        AND f_kkk.NAME = 'KKKK'
        AND fnd.identity = sk.login
        AND fnd.ORACLE_ROLE LIKE 'STH-%'
        AND dr.role = fnd.ORACLE_ROLE; 
```

我认为这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:22:35.027

从这件作品开始。你收到错误了吗？是的？您需要更改为**iii**提供值的子查询，以便它只返回一行。

如果此段未返回错误，则添加下一段，直到您确定导致错误的原因。

```
SELECT sk."AAAA", sk."BBBB", sk."CCCC", sk."DDD",
      sk."EEEE", sk."FFFF", sk."GGGGG",
      sk."HHHHH",
      (SELECT f.VALUE
       FROM fnd_user_property_tab f
       WHERE f.identity = sk.login
       AND NAME = 'IIIII') iii
FROM sox_konta sk
WHERE("PROFIL_DB" LIKE '%ppppp%'
      OR "PROFIL_DB" = 'oooooooo'
      OR "PROFIL_DB" = 'rrrrrrrr'
      )
AND "COMPANIES" IN ('ZZ; ', 'YY; ') 
```

# ios - 无法安装临时 ipa MISValidateSignatureAndCopyInfo 失败

> ID：13412665
> 
> 赞同：2
> 
> 时间：2012-11-16T08:08:25.403
> 
> 标签：ios, code-signing, xcode4.5, ad-hoc-distribution, preflight

我使用 CI 系统自动构建 ipa。

基本上我在构建脚本中调用了这个命令行：

`xcrun -sdk iphoneos PackageApplication -v $APP -o $Output --sign "$Company_name" --embed "$Provision_path"`

在我将 xcode 更新到 4.5.1 并将 $Provision_path 更改为新路径之前，它运行良好。

之后无法安装 ipa，错误如下：

```
<Error>: 0x1c1000 handle_install: Install of "$apppath.ipa" requested by itunesstored
<Error>: 0x1c1000 MobileInstallationInstall_Server: Installing $appID
<Error>: Nov 16 10:08:31  SecTrustEvaluate  [leaf AnchorSHA1 IssuerCommonName]
<Error>: Nov 16 10:08:33  SecTrustEvaluate  [leaf AnchorTrusted]
<Error>: developer cert trust result = 5
<Error>: 0x1c1000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.EuYJEL/foo_extracted/Payload/name.app/name: 0xe8008018
<Error>: 0x1c1000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.EuYJEL/foo_extracted/Payload/name.app
<Error>: 0x2ff9a000 MobileInstallationInstall: failed with -1
<Error>: 0x1c1000 install_application: Could not preflight application install
<Error>: 0x1c1000 handle_install: API failed 
```

我检查了构建日志，这次和上次的区别是 $SignName

```
/usr/bin/codesign --force --sign "$SignName" --resource-rules=*** --entitlements *** 
```

我相信与命令行中`$SignName`的完全相同`$Company_name`。

但目前，`$SignName`类似于`e38e96a4asfsdd779db94ceasdfg24d9assdf898`. 有谁知道可能的问题是什么？

# android - 如何在 Android 中为数独设计网格

> ID：13412666
> 
> 赞同：-6
> 
> 时间：2012-11-16T08:08:39.003
> 
> 标签：android, grid, android-canvas, sudoku

我正在用 android 设计一个数独游戏。我尝试了 81 个文本视图。它告诉我，使用 81 个文本视图是个坏主意。我不知道如何使用画布。那么你能帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:17:14.263

这是来自本书 hello android 的数独[示例源代码](https://github.com/anthonymoralez/hello-android-sudoku)。

# c++ - 从字符数组中修剪非字母数字字符的函数

> ID：13412667
> 
> 赞同：-2
> 
> 时间：2012-11-16T08:08:44.233
> 
> 标签：c++, char

我正在寻找具有以下原型的 C++ 函数：

```
char *trim(char *string) 
```

我希望此功能执行以下操作：

*   修剪所有非字母数字字符
*   如果遇到空格，就是修剪空格和附加字符
*   返回修剪后的字符数组

例子：

输入：`*&^!@^ThisIsA#Test String;'{><,.`

输出：`ThisIsATest`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:39:33.570

一种选择是`std::copy_if`将好的字符复制到返回缓冲区：

```
char *trim(const char *str) {
    std::size_t len = strlen(str);

    char *ret = new char[len + 1]{}; //allocate space and initialize
    std::copy_if(
        str, //from beginning
        std::find(str, str + len, ' '), //to first space (or end)
        ret, //copy to beginning of buffer
        isalnum //the alphanumeric characters
    );

    return ret; //return the buffer
}

int main() {
    std::cout << trim("ab$#h%#.s354,.23nj%f abcsf"); //abhs35423njf
    std::cout << trim("adua9d8f9hs.f,lere.r"); //adua9d8f9hsflerer
} 
```

请注意我的示例如何完全忽略了您必须释放分配的内存这一事实`trim`，这在这种情况下是可以的，因为程序会立即结束。我强烈建议您将其更改为使用`std::string`。`trim`由于兼容性，它既简化了定义，`std::begin`又`std::end`为您管理内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:37:57.883

不确定这是否是最好的方式，性能方面，但它对我来说是最合乎逻辑的方式。`copy_if`似乎不存在。但是查看 ASCII 表[www.asciitable.com](http://www.asciitable.com/)我循环遍历字符数组，只将字母数字字符复制到我的字符串对象，直到找到空格或到达数组的末尾。

```
char *trim(char *str)
{
    std::size_t len = strlen(str);

    string temp = "";

    for (size_t k = 0; k < len; k++)
    {
            // If space found end the process
            if(str[k] == 32)
            {
                break;
            }
            else if ((str[k] >= 48) && (str[k] >= 57)) // numbers
            {
                temp += str[k];
            }
            else if ((str[k] >= 65) && (str[k] >= 90)) // uppercase letters
            {
                temp += str[k];
            }
            else if ((str[k] >= 97) && (str[k] >= 122)) // lowercase letters
            {
                temp += str[k];
            }
    }

    // Convert String to char*
    char * writable = new char[temp.size() + 1];
    std::copy(temp.begin(), temp.end(), writable);
    writable[temp.size()] = '\0';

    return writable;
} 
```

得到了将字符串转换为 char* 的想法，从这里[convert-stdstring-to-const-char-or-char](https://stackoverflow.com/questions/347949/convert-stdstring-to-const-char-or-char)

# c# - WPF Dispatcher 的 InvokeAsync 和 BeginInvoke 有什么区别

> ID：13412670
> 
> 赞同：80
> 
> 时间：2012-11-16T08:08:52.200
> 
> 标签：c#, wpf, .net-4.5, async-await

我注意到在 .NET 4.5 中[WPF Dispatcher](http://msdn.microsoft.com/en-us/library/ms615907.aspx)获得了一组新的方法来在 Dispatcher 的线程上执行称为[InvokeAsync](http://msdn.microsoft.com/en-us/library/hh199387.aspx)的内容。在 .NET 4.5 之前，我们有[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke%28v=vs.100%29.aspx)和[BeginInvoke](http://msdn.microsoft.com/en-us/library/ms604730%28v=vs.100%29.aspx)，它们分别同步和异步处理这个问题。

`BeginInvoke`除了命名和可用的重载略有不同之外，和方法之间是否有任何主要区别`InvokeAsync`？

哦，我已经检查过了，两者都可以`await`编辑：

```
private async Task RunStuffOnUiThread(Action action)
{
    // both of these works fine
    await dispatcher.BeginInvoke(action);
    await dispatcher.InvokeAsync(action);
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2018-03-28T07:06:20.413

异常处理不同。

您可能需要检查以下内容：

```
private async void OnClick(object sender, RoutedEventArgs e)
{
    Dispatcher.UnhandledException += OnUnhandledException;
    try
    {
        await Dispatcher.BeginInvoke((Action)(Throw));
    }
    catch
    {
        // The exception is not handled here but in the unhandled exception handler.
        MessageBox.Show("Catched BeginInvoke.");
    }

    try
    {
       await Dispatcher.InvokeAsync((Action)Throw);
    }
    catch
    {
        MessageBox.Show("Catched InvokeAsync.");
    }
}

private void OnUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
{
    MessageBox.Show("Catched UnhandledException");
}

private void Throw()
{
    throw new Exception();
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-16T09:02:11.503

没有区别，因为该`BeginInvoke`方法调用了一个私有`LegacyBeginInvokeImpl`方法，而它本身又调用了私有方法`InvokeAsyncImpl`（由 使用的方法`InvokeAsync`）。所以基本上是一样的。看起来这是一个简单的重构，但奇怪的是这些`BeginInvoke`方法没有被标记为过时。

**开始调用：**

```
public DispatcherOperation BeginInvoke(DispatcherPriority priority, Delegate method)
{
    return this.LegacyBeginInvokeImpl(priority, method, null, 0);
}

private DispatcherOperation LegacyBeginInvokeImpl(DispatcherPriority priority, Delegate method, object args, int numArgs)
{
    Dispatcher.ValidatePriority(priority, "priority");
    if (method == null)
    {
        throw new ArgumentNullException("method");
    }
    DispatcherOperation dispatcherOperation = new DispatcherOperation(this, method, priority, args, numArgs);
    this.InvokeAsyncImpl(dispatcherOperation, CancellationToken.None);
    return dispatcherOperation;
} 
```

**调用异步：**

```
public DispatcherOperation InvokeAsync(Action callback, DispatcherPriority priority)
{
    return this.InvokeAsync(callback, priority, CancellationToken.None);
}

public DispatcherOperation InvokeAsync(Action callback, DispatcherPriority priority, CancellationToken cancellationToken)
{
    if (callback == null)
    {
        throw new ArgumentNullException("callback");
    }
    Dispatcher.ValidatePriority(priority, "priority");
    DispatcherOperation dispatcherOperation = new DispatcherOperation(this, priority, callback);
    this.InvokeAsyncImpl(dispatcherOperation, cancellationToken);
    return dispatcherOperation;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-15T17:17:07.680

方法签名有区别：

```
BeginInvoke(Delegate, Object[])
InvokeAsync(Action) 
```

对于`BeginInvoke()`编译器`Object[]`隐式创建数组`InvokeAsync()`，而不需要这样的数组：

```
IL_0001:  ldarg.0
IL_0002:  call       instance class [WindowsBase]System.Windows.Threading.Dispatcher [WindowsBase]System.Windows.Threading.DispatcherObject::get_Dispatcher()
IL_0007:  ldarg.1
IL_0008:  ldc.i4.0
IL_0009:  newarr     [mscorlib]System.Object
IL_000e:  callvirt   instance class [WindowsBase]System.Windows.Threading.DispatcherOperation [WindowsBase]System.Windows.Threading.Dispatcher::BeginInvoke(class [mscorlib]System.Delegate, object[])

IL_0014:  ldarg.0
IL_0015:  call       instance class [WindowsBase]System.Windows.Threading.Dispatcher [WindowsBase]System.Windows.Threading.DispatcherObject::get_Dispatcher()
IL_001a:  ldarg.1
IL_001b:  callvirt   instance class [WindowsBase]System.Windows.Threading.DispatcherOperation [WindowsBase]System.Windows.Threading.Dispatcher::InvokeAsync(class [mscorlib]System.Action) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-03T14:57:24.703

嗯，我注意到的一个区别是 InvokeAsync 有一个通用重载，它返回一个 DispatcherOperation 作为返回值，并接受一个 Func 作为其委托输入参数。因此，您可以通过 InvokeAsync 以一种类型安全的方式检索操作的结果，类似于您如何等待任务的结果。

# c# - 当c#程序崩溃时怎么知道为什么？

> ID：13412672
> 
> 赞同：7
> 
> 时间：2012-11-16T08:09:04.033
> 
> 标签：c#

我的程序经常由于某种原因崩溃。在这种情况下，我确实看到带有“关闭”按钮的 Windows 消息。每次发生这样的事情，我真的很想知道发生了什么。

感谢社区，我已经知道如何“处理”某些情况，我在程序的开头添加了这样的代码：

```
 static void Main(string[] args)
    {
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;

        TaskScheduler.UnobservedTaskException +=
        (object sender, UnobservedTaskExceptionEventArgs excArgs) =>
        {
            Log.Push(LogItemType.Error, "Exception occured. Task terminated! + " + excArgs.Exception);
            excArgs.SetObserved();
        };

    .....

    static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Console.WriteLine("Error: CurrentDomain_UnhandledException entered.");
        string message = (e.ExceptionObject as Exception).Message;
        Console.WriteLine(message);
        System.Diagnostics.Trace.WriteLine(message, "Unhandled UI Exception");
        Log.Push(LogItemType.Error, message);
    } 
```

有时这会有所帮助。但有时程序只是崩溃而没有消息。我还可以做些什么？每次程序崩溃我都想知道为什么。

**upd** Windows 日志包含了我需要的几乎所有东西，除了最重要的东西 - 堆栈跟踪

```
Faulting application name: MBClient.exe, version: 1.0.0.0, time stamp: 0x50a5da1d
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec4aa8e
Exception code: 0xc0000374
Fault offset: 0x00000000000c40f2
Faulting process id: 0x10f8
Faulting application start time: 0x01cdc3c2041e2607
Faulting application path: C:\Oleg\bin\mbclient\MBClient.exe
Faulting module path: C:\Windows\SYSTEM32\ntdll.dll
Report Id: 810c805d-2fc3-11e2-bfb5-2c768a509157 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T08:39:53.203

异常代码 0xc0000374 表示您正面临*堆损坏*。

此类错误的最常见原因是以下两个：

*   有故障的 RAM 模块
*   缓冲区溢出，当一个线程尝试读取某些内容而另一个线程同时删除了数据时。据我所知，这不应该发生在托管代码中。

如果您无法在开发环境中调试应用程序，您可能必须使用[Windows 调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)来找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:27:46.753

您可以尝试使用 WER - Microsoft 的 Windows 错误报告。它在每个系统上都是默认的。因此，例如，您可以进行自动转储而不是窗口弹出消息。
组策略编辑器中有许多设置。请参阅以下链接 [http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181(v=vs.85).aspx) http://msdn.microsoft.com/en-us/library/ windows/桌面/bb513638%28v=vs.85%29.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T13:21:32.230

我知道这是一个老问题，但我在谷歌搜索异常代码 0xc0000374 后来到这里。

有一个可用于 MS Visual C++ 2013 Redistributable 包的更新，它修复了 MS Visual C++ 2013 Redistributable 包中的堆损坏错误。

注意：此更新（在撰写本文时）未通过 Windows 更新分发。注意 2：显然，如果您使用的是使用 MS VC++ 2013 编译的库（如我的情况：MySQL ODBC 连接器 5.3.x），此更新只会有帮助

更新链接： https: [//support.microsoft.com/en-us/help/3138367/update-for-visual-c-2013-and-visual-c-redistributable-package](https://support.microsoft.com/en-us/help/3138367/update-for-visual-c-2013-and-visual-c-redistributable-package)

以及将我指向此更新的来源：[https ://bugs.mysql.com/bug.php?id=86054](https://bugs.mysql.com/bug.php?id=86054)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-16T08:17:20.003

只需在您认为可能崩溃的代码“危险”部分使用[try catch 。](http://msdn.microsoft.com/de-de/library/0yd65esw%28v=vs.80%29.aspx)

# java - 重新加载 Vaadin 应用程序

> ID：13412674
> 
> 赞同：4
> 
> 时间：2012-11-16T08:09:27.520
> 
> 标签：java, vaadin

如何在单击按钮时重新加载 Vaadin 应用程序？

我读了那个添加？Restart Application to URL 会重启它，但是调用哪个方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:17:12.003

我不确定这正是您要查找的内容，但您可以使用[Application 类中的 close 方法](https://vaadin.com/api/com/vaadin/Application.html)

```
public void close() 
```

实际上，这将导致应用程序在被询问时停止返回任何窗口。当应用程序关闭时，它的状态将从会话中移除，并且浏览器窗口被重定向到使用 setLogoutURL(String) 设置的应用程序注销 url。如果未设置注销 url，则重新加载浏览器窗口并重新启动应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T08:31:31.110

只需将您选择的内容放在主窗口中：

```
//add listener to button

sendButton.addListener(new Button.ClickListener() {

 public void buttonClick(ClickEvent event) {

//reload page

  mainWindow.setContent(buildUserPage());

 }
} 
```

# javascript - 如何在 JavaScript 中从自身内部调用匿名函数？

> ID：13412675
> 
> 赞同：1
> 
> 时间：2012-11-16T08:09:31.773
> 
> 标签：javascript

是否可以在 else 语句中不调用 check() 重新运行函数“check”？也许以某种方式称呼自己？

如果我有此函数的多个实例，它们最终会互相调用，除非我将其更改为 check1、check2 等。虽然这是可能的。一个性能杀手，我只是在为原型应用程序尝试它。

```
(function check () {
  if (typeof foo !='undefined') {
    // do stuff
  } else {
    console.log("Failed to load, trying again");
    setTimeout(function(){ check(); }, 10);
  }
})(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:13:12.837

好吧，您*可以*使用`arguments.callee`它来调用它，但这是一个坏主意，会影响性能，并且在严格模式下无效。

您引用的是有效的 JavaScript，如果您旁边有一个函数，则*不应*调用`check`另一个函数。`check`可悲的是，[它会在 IE8 和更早版本中出现，](http://blog.niftysnippets.org/2010/09/double-take.html)因为它们完全错误地将名称泄漏`check`到周围范围（命名函数*表达式*不会像函数声明那样将函数名称添加到周围范围 - 除了在 IE8 和更早版本上 [这还不是全部他们弄错了]）。

所以解决方案是使用匿名函数来隐藏一个命名的：

```
(function() {
    // A check function
    check();
    function check () {
      if (typeof foo !='undefined') {
        // do stuff
      } else {
        console.log("Failed to load, trying again");
        setTimeout(function(){ check(); }, 10);
      }
    }
})();
(function() {
    // A complete different one
    check();
    function check () {
      if (typeof foo !='undefined') {
        // do other stuff
      } else {
        console.log("Failed to load, trying again");
        setTimeout(function(){ check(); }, 10);
      }
    }
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T08:20:25.583

如何使用间隔而不是无需调用自身，因为这将自动完成，直到您清除间隔：

```
(function(){
   var interval = setInterval(function(){
      if(typeof foo != 'undefined'){
         clearInterval(interval);
         // do stuff
      }else{
         console.log("Failed to load, trying again");
      }
   },10)
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:17:54.317

为什么不这样做：

```
var inter;

function check() {
    if (typeof foo !== 'undefined') {
        clearInterval(inter);
        // do stuff
    } else {
        console.log("Failed to load, trying again");
    }
}
inter = setInterval(check, 10); 
```

这不是替代品的下降，但我认为它是更好的风格。

# c - Unix C 中管道的使用

> ID：13412676
> 
> 赞同：1
> 
> 时间：2012-11-16T08:09:39.783
> 
> 标签：c, shell, pipe

对于一个任务，我们需要实现一个带有重定向和管道的基本 shell。我的管道代码退出程序并且不再要求用户输入。管道在函数中执行，因此基本上控制不会返回给 main。我该如何做到这一点？这是我的代码：

```
void execute_pipe(char **argv,char **args)
{

    int pfds[2];
    pid_t pid;
    int status;
    pipe(pfds);
    if ((pid = fork()) < 0) {    
          printf("*** ERROR: forking child process failed\n");
          exit(1);
     }
    printf("here");
    if (pid==0) {
        close(1);      
        dup(pfds[1]);   
        close(pfds[0]); 
           if(execvp(argv[0],argv)<0){
            printf("**error in exec");

        }

    } 
    else {
    while (wait(&status) != pid)  ;  
        close(0);      
        dup(pfds[0]);   
        close(pfds[1]); 

           if(execvp(args[0],args)<0){
            printf("**error in exec");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:27:53.663

如果您`dup()`或管道连接到标准输入或标准输出，则应在使用管道或其亲属之一`dup2()`之前关闭管道的两个文件描述符。`execvp()`添加：

```
close(pfds[1]); 
```

到子代码。

在您运行父进程之前，子进程必须死掉（因为您`wait()`处于循环中）。请注意，您应该检查`wait()`不返回诸如 ECHILD 之类的错误；如果是这样，您将不会超越循环。同样，您应该关闭两个管道文件描述符。

请注意，如果子进程生成的数据超出管道的容量，则子进程将被阻止写入管道，而父进程将被阻止等待子进程死亡——死锁。

* * *

> 如何让它返回主而不退出？

`main()`除非孩子或父母未能`execvp()`执行给定的命令，否则您无法返回该代码。你很可能需要一个额外`fork()`的在那里。

并且等待通常由父进程完成，而不是由两个孩子之一完成。

# url - 根据 URITemplate 规范的 uri 模板的有效性

> ID：13412677
> 
> 赞同：2
> 
> 时间：2012-11-16T08:09:43.743
> 
> 标签：url, rest, wildcard, uritemplate

'/abc/foo/{id}/bar/*' 是根据 URITemplate 规范的有效模板吗？还是只有 {} 的 url 有效？即/abc/foo/bar/{path}。

在第一种情况下，/abc/foo/4/random/new.jgp 将映射到 /abc/foo/{id}/bar/* 在第二种情况下，/abc/foo/4/random/new.jgp将映射到 /abc/foo/bar/{path}，考虑到 path=random/new.jpg

那么哪个是有效的符号？

# android - 如何在运行 android 4.1 的 android 模拟器上模拟蓝牙鼠标滚轮事件

> ID：13412683
> 
> 赞同：1
> 
> 时间：2012-11-16T08:10:21.700
> 
> 标签：android, android-widget, android-hardware

现在我没有任何android 4.1设备，但是老板要求在我的android应用程序中处理蓝牙鼠标的滚轮事件。

```
public boolean onTrackballEvent(MotionEvent event)
{
    if(event.getButtonState() == MotionEvent.BUTTON_TERTIARY)
    {
      //This is the wheel event case,
      //but I don't know what the other things about wheel rolling forward or rolling back,
      //who can tell me how to process the wheel rolling forward and back status
    }
} 
```

请帮助我，谢谢！

# android - 为什么 AlarmManager.setRepeating 中的 triggerAtTime 不起作用

> ID：13412685
> 
> 赞同：3
> 
> 时间：2012-11-16T08:10:39.890
> 
> 标签：android

```
AlarmManager mgr=
      (AlarmManager)ctxt.getSystemService(Context.ALARM_SERVICE);
  Intent i=new Intent(ctxt, AlarmReceiver.class);
  PendingIntent pi=PendingIntent.getBroadcast(ctxt, 0, i, 0);
mgr.setRepeating(
  AlarmManager.ELAPSED_REALTIME_WAKEUP,
  System.currentTimeMillis() + 1000,
  1000, pi); 
```

根据安卓文档

> triggerAtMillis 警报应该首先响起的毫秒时间，使用适当的时钟（取决于警报类型）。

动作应该在 1 秒后立即开始，但它永远不会被调用，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T08:13:27.767

而不是`AlarmManager.ELAPSED_REALTIME_WAKEUP`在 setRepeating() 方法中，使用`AlarmManager.RTC_WAKEUP`如下所示，

```
mgr.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis() + 1000, 1000, pi); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T08:10:39.890

我google了很多，但似乎没有人遇到同样的问题。最后我发现我应该改用 SystemClock.elapsedRealtime() 。

对于 triggerAtMillis，因为类型是 AlarmManager.ELAPSED_REALTIME_WAKEUP 应该使用 SystemClock.elapsedRealtime() 而不是 System.currentTimeMillis()

问题已解决。

# c# - 如何在 ASP.net 后面的代码中获取 Textarea InnerHTML

> ID：13412692
> 
> 赞同：0
> 
> 时间：2012-11-16T08:11:26.280
> 
> 标签：c#, asp.net

我正在使用[jQuery Text Editor](http://jqueryte.com/)，它呈现一个`TextArea`标签。我正在使用`runat="server"`.

但是当我试图通过 Code behind like 访问它时`txtArea1.Value`，我得到了空白字符串（“”）。有没有办法通过 Code behind获取`HTML`编辑器（）的（值） ？`textArea`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:23:06.573

Html 代码位于动态创建的 iframe (innerHTML) 中。

尝试使用：el=document.getElementById('id_name_editor'); remBr=el.innerHTML.split(/
/); 警报（remBr）；

//我检查了。它在 TINY 编辑器中工作 =)

# eclipse - svn diff 离线

> ID：13412696
> 
> 赞同：1
> 
> 时间：2012-11-16T08:12:00.090
> 
> 标签：eclipse, git, svn, commit, offline

由于历史原因，我确实有一个运行 eclipse 3.2 的非常旧的 vm 和许多未提交的代码。源代码管理是 svn，但是这个服务器已经不存在了。现在一切都位于一个 git 存储库中。

我的问题是，有没有办法运行 svn diff 或类似的东西来创建一个可以提交到 git 分支的补丁文件？应该有，因为 Eclipse 知道发生了哪些更改（每个更改的文件上都有黑星）。或者还有其他我看不到的简单易行的方法吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:51:08.550

可以使用[patch](http://en.wikipedia.org/wiki/Patch_%28Unix%29)应用 Subversion 差异。

首先，创建差异。[*使用 Eclipse 使用Team > Create Patch*](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-68c.htm)为您创建补丁。或者，在您的 svn 工作副本中：

```
svn diff > my-changes.diff 
```

然后克隆新的 git 存储库。使用 EGit，或运行：

```
git clone ..../project.git
cd project 
```

现在应用补丁。使用 Eclipse 通过[*Team > Apply Patch 应用*](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-68c.htm)补丁文件。或者，运行：

```
patch -p0 < /path/to/my-changes.diff 
```

您可能需要将 更改`0`为不同的值，具体取决于您运行 svn diff 的位置。有关该选项的说明，请参阅[补丁手册页。](http://linux.die.net/man/1/patch)`-p`

# java - 用户输入后重复执行的代码

> ID：13412697
> 
> 赞同：0
> 
> 时间：2012-11-16T08:12:00.953
> 
> 标签：java, loops, methods

我正在创建一个程序来计算他的旅行费用。每个段都有一个成本，要求用户输入每个段的成本，然后输入 3 个段 ID (0-6)。将 3 个 ID 的成本相加得出最终价格。

如果用户输入> = 1，我需要从头开始重复程序（见最后的评论），我该怎么做？另外，我可以改进我的程序吗？如何改进？

```
import java.util.Scanner;

public class AssignmentArrays{
    public static void main(String[] args){

      Scanner seg0 = new Scanner(System.in);
      Scanner seg1 = new Scanner(System.in);
      Scanner seg2 = new Scanner(System.in);
      Scanner seg3 = new Scanner(System.in);
      Scanner seg4 = new Scanner(System.in);
      Scanner seg5 = new Scanner(System.in);

      int[] data = new int [6];
      data[0] = 0;
      data[1] = 0;
      data[2] = 0;
      data[3] = 0;
      data[4] = 0;
      data[5] = 0;

      /* Segment values */

        while(data[0] == 0){

            System.out.println("Enter cost for segment 0:");
            data[0] = seg0.nextInt();

            System.out.println("Enter cost for segment 1:");
            data[1] = seg1.nextInt();

            System.out.println("Enter cost for segment 2::");
            data[2] = seg2.nextInt();

            System.out.println("Enter cost for segment 3:");
            data[3] = seg3.nextInt();

            System.out.println("Enter cost for segment 4:");
            data[4] = seg4.nextInt();

            System.out.println("Enter cost for segment 5:");
            data[5] = seg5.nextInt();

           /* Path inputs */

           Scanner node1 = new Scanner(System.in);
           Scanner node2 = new Scanner(System.in);
           Scanner node3 = new Scanner(System.in);

           int node1value;
           int node2value;
           int node3value;
           int pathCost;

           System.out.println("Enter ID of segment 0 of path:");
              node1value = node1.nextInt();

           System.out.println("Enter ID of segment 1 of path:");
              node2value = node2.nextInt();

           System.out.println("Enter ID of segment 2 of path:");
              node3value = node3.nextInt();

          /* Path cost calculation */

          pathCost = data[node1value] + data[node2value] + data[node3value];
              System.out.println("The cost of the trip is: $" + pathCost);

          /* Repeate or end program */

           Scanner end = new Scanner(System.in);

           int userChoice;

           System.out.println("Enter 0 to exit or any other number to evaluate another path:");
              userChoice = end.nextInt();

           if (userChoice == 0){
              System.out.println("The program has ended");
              break;
              }
              else if(userChoice >= 1){
              /* REPEATE ALL OF THE ABOVE HERE */
              }
          }

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:20:34.507

我可能会让这个类更加面向对象。但是，您可以通过使用方法分解代码来简化您所拥有的内容：

```
import java.util.Scanner;

public class AssignmentArrays{

static int[] data = new int [6];

public static void getSegmentIDs() {
   ...
}

pubilc static int getUserMenuChoice() {
   ...
}

public static void main(String[] args){

 int exit = false;

 while(!exit) {
   getSegmentIDs();
   choice = getUserMenuChoice();
   if (choice == 0) exit = true;
 } 

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:21:45.327

我会通过这样做将整个事情放入一个 do while 语句中：

```
 String answer ="";
  do {
  Scanner seg0 = new Scanner(System.in);
  Scanner seg1 = new Scanner(System.in);
  Scanner seg2 = new Scanner(System.in);
  YOUR CODE CONTINOUS

  /* Repeate or end program */
  System.out.println("would you like to redo? (Y/N)");
  answer = end.next();
  } while(answer.toLowerCase().contains("y")); 
```

# php - ZF2：依赖注入以正确的方式完成

> ID：13412698
> 
> 赞同：2
> 
> 时间：2012-11-16T08:12:04.913
> 
> 标签：php, class, zend-framework, dependency-injection, zend-framework2

我是 ZendFramework 2 和整个 DI 理念的新手。

这是我需要实现的目标：

1.  创建许多扩展单个 AbstractModel 的模型类
2.  使用具有依赖关系的 DI 提供 AbstractModel（在我的情况下是学说实体管理器）
3.  在我需要的地方使用祖先类作为普通类

为了更好地解释 3\. 让我们看看这个例子：

```
class Ancestor extends Parent { } 
```

在控制器中，或者理想的任何地方：

```
$ancestor = new Ancestor();
$ancestor->doStuffWithEntityManager(); 
```

在初始化祖先时，它必须已经知道注入的资源。

这甚至可能吗？如果不以默认形式使用，我可以通过一些服务管理器等初始化祖先，只要我不需要指定每个祖先。我需要告诉 zend：将这个和那个注入到每个扩展/实现 X 的类中。

有任何想法吗？

PS：正如我所说的我很新，所以请指定配置/类文件我必须添加每段示例代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T09:22:31.330

在我的架构中，我这样做如下。首先：我创建一个服务：

```
class Module 
{
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'my-service-name'   => 'MyNamespace\Factory\MyServiceFactory'
            )
        );
    }
} 
```

然后我创建ServiceFactory。这将是处理所有依赖项的地方。

```
<?php
namespace MyNamespace\Factory;

use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\FactoryInterface;
use MyNamespace\Service\SomeService;

class MyServiceFactory implements FactoryInterface
{
    /**
     * Create service
     *
     * @param ServiceLocatorInterface $serviceLocator
     * @return \MyNamespace\Service\SomeService
     */
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $service = new SomeService();
        $service->setEntityManager($serviceLocator->get('Doctrine\ORM\EntityManager'));
        return $service;
    }
} 
```

MyService-Class 甚至可以有更多的依赖关系，在我的例子中，由于它们实现的接口，它们会自动注入。[您可以在此处](https://gist.github.com/4085757)查看示例。然后，特定的 EntityService 将只需要一个定义存储库的函数，就像[这里的示例](https://gist.github.com/4085814)一样。

可能还会建议您阅读[Rob Allens 对 ServiceManager 配置键的介绍](http://akrabat.com/zend-framework-2/zendservicemanager-configuration-keys/)。具体阅读“初始化程序”部分，我想这是您主要关心的问题？

我希望这涵盖了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:08:52.063

您可以注入创建自定义存储库类的实体管理器并将其注入覆盖 find* 方法调用

[在 Doctrine 2.0 实体中使用 EntityManager](https://stackoverflow.com/questions/4108291/using-entitymanager-inside-doctrine-2-0-entities)

但是我建议您检查您的设计，因为它不是从实体对数据库的正常调用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T08:25:17.223

```
class Parent {
    private $em;

    public function __construct(\Doctrine\ORM\EntityManager $em) {
        $this->em = $em;
    }
}

class Ancestor extends Parent { }

// To use, create an EntityManager $em

$ancestor = new Ancestor($em);
$ancestor->doStuffWithEntityManager(); // Uses $this->em internally 
```

这就是依赖注入的全部内容。另见[http://fabien.potencier.org/article/11/what-is-dependency-injection](http://fabien.potencier.org/article/11/what-is-dependency-injection)。

在这里查看在 ZF2 中获取/创建 EntityManager：http: [//samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/](http://samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/)。

本质上，在从您扩展的控制器中，`AbstractActionController`您可以执行以下操作：

```
$this->getServiceLocator()->get('Doctrine\ORM\EntityManager'); 
```

# c# - 将 TinyIoC 与 MonoTouch + Storyboard 结合使用 - 在哪里构建？

> ID：13412714
> 
> 赞同：1
> 
> 时间：2012-11-16T08:12:57.617
> 
> 标签：c#, ios, dependency-injection, xamarin.ios, inversion-of-control

我正在尝试使用 TinyIoC 在 MonoTouch 中使用依赖注入，但是我似乎无法弄清楚我应该在哪里进行注册，以及在我的控制器中注入我的服务的构建（这是正确的术语吗？）

我创建了一个新的 MonoTouch 故事板项目，查看了文件，但找不到实例化我的控制器的代码。

我试图在我的 上创建一个构造函数`AppDelegate`，并在那里进行类型注册，然后`container.BuildUp(this);`在我的控制器的构造函数中进行。但是我有一种感觉，这是错误的。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:18:58.333

你的方法对我来说似乎是正确的。

不过，我会将注册移至`DidFinishLaunching`您的`AppDelegate`.

故事板的问题是所有控制器都是从 Objective-C 创建的，这就是`IntPtr`使用构造函数的原因。实际上，您的控制器的构造函数是唯一可以调用的好地方`BuildUp`。

你现在的工作方式有什么问题吗？

另一种选择是使用不同类型的容器，我似乎更喜欢更简单的容器（甚至比 TinyIoC）。 [这](https://github.com/jonathanpeppers/XPlatUtils/blob/master/XPlatUtils/ServiceContainer.cs)是我写的一篇。

# python - 将python类对象作为参数传递给c库

> ID：13412715
> 
> 赞同：1
> 
> 时间：2012-11-16T08:13:00.890
> 
> 标签：python, python-2.7

我有一个 python 脚本，它调用从 C 共享库中导出的方法。

如何将 python 类对象作为参数传递给这些方法之一。

蟒蛇代码：

```
class module(object)
     def __init__(self, param1):
         self._param1 = param1

lib = CDLL("name")
mod = module1(10)
lib.func(pointer(mod)) 
```

C 示例代码：

```
struct module {
  int val;
};
extern "C" void func(struct module* data); 
```

我可以访问存储在 c 函数“func”中的 module1 参数中的值吗？

还有更多想法如何实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:31:24.940

经过一番摸索，找到了一种方法：

你可以在 python 中声明一个结构为：

```
class POINT(Structure):
    _fields_ = [("x", c_int),
               ("y", c_int)] 
```

并传递此结构的引用。

参考：[ctypes 文档页面](http://docs.python.org/2/library/ctypes.html)

# linux - 如何从 bash 在 HPlip 网络打印机上打印

> ID：13412723
> 
> 赞同：0
> 
> 时间：2012-11-16T08:13:28.147
> 
> 标签：linux, bash, ghostscript

我有一个在 HPLip 中定义的网络打印机。是否有可能从命令行（bash）打印文件，例如。使用ghostscript？

我的打印机：

```
cups_uri: hp:/net/HP_LaserJet_P2015_Series?ip=192.168.1.3
printer-uri-supported: ipp://localhost:631/printers/HP_LaserJet_P2015 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:38:16.580

您正在寻找的工具是 CUPS。这是关于命令行打印 CUPS 的教程（几乎可以肯定它已经安装在您的系统上，如果没有，可以轻松安装）。如果你不熟悉它，这里有一个很好的入门：[http ://cups.org/documentation.php/options.html](http://cups.org/documentation.php/options.html)

# ant - ant 用源文件创建 jar

> ID：13412729
> 
> 赞同：1
> 
> 时间：2012-11-16T08:13:57.203
> 
> 标签：ant, jar

我需要创建一个附加所有源文件的 jar。所以对于每个 *.class 文件，在同一目录中必须有一个对应的 *.java 文件。我认为这是微不足道的，但是到目前为止我还没有找到适合我的解决方案：S。

我也尝试过将 include 标记与 * */*一起使用，但是在创建的 jar 文件中仍然只有 *.class 文件，没有 *.java 文件。我究竟做错了什么？

```
<target name="build-jar" description="Creates the jar file>
<jar jarfile="${webinf.dir}/lib/components.jar"
 basedir="${jarSource.dir}"
 includes="**/*">    
</jar>
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:16:22.263

尝试

```
<jar destfile="${target.dir}/my-app.jar">
    <fileset dir="${target.dir}/classes" />
    <fileset dir="${src.dir}" includes="**/*.java"/>
</jar> 
```

# android - 在图像上创建标志，如 android 中的谷歌地图

> ID：13412731
> 
> 赞同：1
> 
> 时间：2012-11-16T08:14:07.157
> 
> 标签：android, google-maps

我将在我的图像上添加标志，就像在 Android 应用程序中的 Google 地图中一样。

当用户点击一个标志时，会显示一条评论，当图像被缩放时，标志的位置不会改变。

但我不知道该怎么做。有人可以在这方面指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:28:44.660

您需要使用自定义 ItemizedOverlay 来放置标记并覆盖该类中的 onTap 事件以便能够单击它们。

[http://mirnauman.wordpress.com/2012/04/10/android-google-maps-tutorial-part-5-adding-multiple-images-to-google-maps-using-itemizedoverlay/](http://mirnauman.wordpress.com/2012/04/10/android-google-maps-tutorial-part-5-adding-multiple-images-to-google-maps-using-itemizedoverlay/)

遵循本教程将是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:49:21.563

这个库可以满足您对 [mapviewballoons的要求](https://github.com/jgilfelt/android-mapviewballoons)

# continuous-integration - 当我从 TeamCity 中的 MSTest 构建步骤调用 dotCover 时，什么构成完整的代码覆盖？

> ID：13412733
> 
> 赞同：1
> 
> 时间：2012-11-16T08:14:08.603
> 
> 标签：continuous-integration, teamcity, qa, dotcover

当我从 TeamCity 中的 MSTest 构建步骤调用 dotCover 时，什么被认为是 100%？是 100% 的所有编译代码吗？它是测试所涉及的所有程序集的所有代码吗？是测试所涉及的所有课程吗？

当我从运行 My.Tests.dll 的 TeamCity MSTest 构建步骤调用 dotCover 时，正在跟踪哪些代码行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:52:40.513

dotCover 仅提供语句级覆盖率报告，而其他工具（如 NCover）也包括函数和分支覆盖率。

通过 TeamCity MSTest 构建步骤，您可以在“过滤器”字段中指定您希望报告覆盖范围的程序集。这允许您仅指定`.Tests`模式的排除项或仅包含一个程序集。有关更多详细信息，请参阅 TeamCity 文档：http: [//confluence.jetbrains.net/display/TCD7/JetBrains+dotCover](http://confluence.jetbrains.net/display/TCD7/JetBrains+dotCover)

我相信，如果您不指定任何过滤器，则包含加载到 CLR 中的所有程序集中的所有代码（您必须从您调用的代码中加载程序集，因此可能不包含某些程序集，这只是CLR 的延迟加载）。这是因为 dotCover 之类的工具使用 CLR 分析 API，并且不会预先检测您的代码。请注意，dotCover 将从 GAC 中排除程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:25:24.097

不确定我是否完全理解您的问题，但无论如何都会试一试。据我了解，100% 的覆盖率意味着项目中的每一行代码都由您的测试用例执行。基本上，这意味着您已确保控制流经项目中的每一行代码。

一般来说，我从未见过 100% 的覆盖率，因为很难测试每个代码路径。例如，考虑由您的代码处理的不同类型的异常，您如何通过某些测试用例对每个异常执行 catch 块？您需要以某种方式模拟异常，这并不总是那么容易。

# sql - 如何在可变列数据上设置 SQLite 连接

> ID：13412735
> 
> 赞同：0
> 
> 时间：2012-11-16T08:14:27.920
> 
> 标签：sql, database, sqlite, join

我有 2 张桌子。一个表包含一个人的姓名和该人的唯一 ID。另一张表有多个列，但有一列特别存储了此人的唯一 ID。

到现在为止，第二个表始终存储一个 ID，因此我能够轻松地对这两个表执行 JOIN 并获得我需要的数据，如下所示：

```
SELECT DISTINCT personTable._id, personTable.name FROM dataTable LEFT OUTER JOIN personTable ON dataTable.person_id = personTable._id 
```

然而，一个新的要求开始发挥作用，现在将允许第二个表在同一列中引用多个 ID。换句话说，该表过去严格来说是这样的：

```
2ND TABLE COLUMN PERSON'S ID = 5 
```

但是现在的存储可以是这样的

```
2ND TABLE COLUMN PERSON'S ID = 5-6
2ND TABLE COLUMN PERSON'S ID = 5-3-8-2
2ND TABLE COLUMN PERSON'S ID = 5 (still valid) 
```

使用这种新格式，我每次都无法成功查询数据。如何更新此查询以正常工作？我在 Android 中使用 SQLite。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:45:05.347

如果您使用新格式，您将不会走得太远。

要为新规范提供服务，您应该将架构更改为多一张用作连接表的表。

总共，您将有 3 个表，如下所示：

```
CREATE TABLE persontable (
    person_id INTEGER PRIMARY KEY,
    name VARCHAR(32),
    -- more person fields...
)

CREATE TABLE datatable (
    data_id INTEGER PRIMARY KEY,
    join_id INTEGER,
    -- more datatable fields...
)

CREATE TABLE jointable (
    join_id INTEGER PRIMARY KEY,
    person_id INTEGER
) 
```

Jointable 将根据您的需要为每个用户提供尽可能多的行，例如

第二表列人的 ID = 5-3-8-2

它将有 4 行。

现在，您可以拥有如下数据：

```
SELECT d.*,
    p.name,
    ...
FROM datatable d
    JOIN persons p USING (person_id)
    JOIN jointable j USING (join_id)
WHERE d.some_field = 'blah' 
```

# javascript - 需要与 EXT JS 工具提示功能相关的帮助

> ID：13412736
> 
> 赞同：2
> 
> 时间：2012-11-16T08:14:29.083
> 
> 标签：javascript, extjs

我们正在使用`EXTJS 3.1.0`

有一个功能，我们必须使用代码向图像添加工具提示：

```
function loadToolTip(objImageId,entity_id,entity_type){
    var objImage = document.getElementById(objImageId);
    var tp = new Ext.ToolTip({
        target: objImage,
        autoLoad: {url: ‘some URL’},
        showDelay:500
    });

    var extObjImage = Ext.get(objImageId);
    tp.showAt([extObjImage.getX()+25,extObjImage.getY()+25]);
    if(tp.anchorEl){
        tp.anchorEl.hide();
    }
} 
```

此函数在`mouseover`图像事件上调用。

用户可能会`mouseover`在更改某些数据后对图像进行操作，并且每次我们必须从服务器获取工具提示内容。

我们面临的问题是，每次鼠标悬停时它都会创建多个工具提示。

理想情况下，我们希望它只显示一次。我们尝试将 id 赋予工具提示对象，然后在事件发生`.destroy()`时调用该对象的方法。`mouseout`这也不起作用，有时会出现 JS 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:31:40.417

这个或类似的东西应该适合你：

```
function loadToolTip(objImageId,entity_id,entity_type){
  var extObjImage = Ext.get(objImageId);
  var tp = objImage.tp;
  if(!tp)
  {
      var objImage = document.getElementById(objImageId);
      tp = new Ext.ToolTip({
               target: objImage,
               autoLoad: {url: ‘some URL’},
               showDelay:500
      });
      extObjImage.tp = tp;
  }
  tp.showAt([extObjImage.getX()+25,extObjImage.getY()+25]);
  if(tp.anchorEl){
           tp.anchorEl.hide();
  } 
```

}

# ios - UILabel 总是动画到同一个地方

> ID：13412743
> 
> 赞同：0
> 
> 时间：2012-11-16T08:14:55.470
> 
> 标签：ios, uilabel

我有一个名为“nameLabel”的 UILabel，我将它放在一个动画块中，这样就会发生这种情况：

```
_nameLabel.alpha = 1;
CGAffineTransform translate = CGAffineTransformMakeTranslation(50, 50);
_nameLabel.transform = translate; 
```

我认为将 UILabel 动画到我指定的位置，但它只是从上面的位置动画到我在 Interface Builder 中拥有它的位置。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:31:31.360

您可以发布动画块和其他相关代码吗？我不确定`CGAffineTransformMakeTranslation`标签有什么作用，但如果你想为框架位置设置动画，你可以使用这个：

```
CGRect frame = _nameLabel.frame;
frame.origin.y = 100; //Desired height, origin.x can be modified as well. 
//You can also change the frame size here but it wont work on UILabels, you will need `CGAffineTransformScale` for that.

[UIView animateWithDuration: 1.5
                      delay:0.0
                    options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionBeginFromCurrentState
                 animations:^ {

                     [_nameLabel setFrame:frame];

                 }
                 completion:^ (BOOL finished) {

                 }]; 
```

编辑：另一种方式：

```
CGRect frame = _nameLabel.frame;
frame.origin.y = 100;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:0.5];

[_nameLabel setFrame: newFrame];

[UIView commitAnimations]; 
```

当前状态可能是标签的当前位置，请先尝试，但如果没有任何反应，`UIViewAnimationOptionBeginFromCurrentState`请在动画之前将标签的框架移除或设置到另一个位置，并将其移动到其初始（xib 文件中的那个）位置动画块，由您决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:21:47.707

Watch out because Autolayout cause a lot of problems.

Try to deselect 'Use Autolayout'

It solves to me all the problems trying to translate objects.

# c# - 细节错误，创建视图

> ID：13412749
> 
> 赞同：0
> 
> 时间：2012-11-16T08:15:31.580
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我在 asp.net MVC 3 中创建了一个 CRUD 应用程序。索引页面在表中显示了我数据库中的所有数据。但是，当我单击编辑、详细信息或删除此错误时，我得到：

```
 The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Delete(Int32)' in 'cpd.Controllers.Default4Controller'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

我有两个类来模拟我的表。我首先使用了代码，下面是我的课程的代码。

```
 public class cpd_certificates
{

        [Key]
        public int CertificateNo { get; set; }
        public int QuizNo { get; set; }

        public DateTime? DateReceived { get; set; }
        public DateTime? DatePaid { get; set; }
        public string Mark { get; set; }
        public int? AccreditationNo { get; set; }

        public int? ID { get; set; }
        public virtual cpd_recipients Recipients { get; set; }

}

 public class cpd_recipients
{
        [Key]
    public int ID { get; set; }
    public string OpNo { get; set; }
    [Required]
    [StringLength(50, ErrorMessage = "{0} cannot exceed {1} characters")]
    public string LastName { get; set; }
    public string Initials { get; set; }
    public string Title { get; set;}
    public string Address1 {get; set;}
    public string Address2 {get; set;}
    public string Address3 {get; set;}
    public string Address4 {get; set;}
    public string Country {get; set;}

    public string email {get; set;}

} 
```

这映射为 0..1 到许多。我的流利的API如下：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Entity<cpd_certificates>()
            .HasOptional(x => x.Recipients);
    } 
```

部分控制器代码：

```
 public ActionResult Edit(int id)
    {
        cpd_certificates cpd_certificates = db.Cert.Find(id);
        ViewBag.ID = new SelectList(db.CPD, "ID", "OpNo", cpd_certificates.ID);
        return View(cpd_certificates);
    } 
```

// POST: /Default4/Edit/5

```
 public ActionResult Edit(cpd_certificates cpd_certificates)
    {
        if (ModelState.IsValid)
        {
            db.Entry(cpd_certificates).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.ID = new SelectList(db.CPD, "ID", "OpNo", cpd_certificates.ID);
        return View(cpd_certificates);
    } 
```

视图代码：

```
 @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ }) 
```

地图路线：

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Default4", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

我该如何解决这个错误。我在这方面比较缺乏经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:24:50.437

该错误表明您没有传递`recipient`用户想要操作的对象的 ID（显然）作为操作的参数。换句话说，很可能在你的控制器中你有一个这样声明的动作：

```
public ActionResult Delete(int id) 
```

并且当用户单击删除时，发送到服务器的请求中没有`id`参数。要更正此检查，请检查您如何发送请求、如何构造 url 以及是否`id`正确传递给它。

**更新。**这是您尝试的另一种方法。名称`id`出现在您的路由中，但是在您指定的`id`将作为请求参数传递的操作中。这个特殊问题可以通过简单的重命名来解决。重命名动作的参数：

```
public ActionResult Edit(int certId) 
```

并对视图进行相应的更新：

```
@Html.ActionLink("Edit", "Edit", "Default4", new { certId = item.PrimaryKey }) 
```

这应该会产生以下网址：`/Default4/Edit?certId=5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:47:49.583

正如 Andrei 所说，您的错误可能在于您向 Edit 操作方法发出请求的方式。在您的视图中，您的操作链接应如下所示：

```
@Html.ActionLink("Edit", "Edit", "YourControllerName", new { @id = TheIDForTheObject }) 
```

这应该消除错误。

如果您的意图是允许将空值传递给 Edit 操作方法（我对此表示怀疑，但无论如何还是很高兴知道），然后更改您的操作方法以允许可为空的 id：

```
public ActionResult Edit(int? id)
{
    // Your implementation here
} 
```

# php - 更新 11M 行数据库和 my.cnf 优化

> ID：13412754
> 
> 赞同：0
> 
> 时间：2012-11-16T08:15:42.357
> 
> 标签：php, mysql, configuration, sql-update, easyphp

我必须在 PHP 脚本中从数据库中更新 11M 行。

一段时间后，脚本冻结或崩溃。我必须重新启动 EasyPHP 12，然后重新加载它。

我的配置：

*   Windows 7 专业版 64 位
*   英特尔酷睿 i7 860 2.8Ghz
*   8G内存

我的 my.cnf 文件：

```
port        = 3306
socket      = /tmp/mysql.sock

[mysqld]
port        = 3306
socket      = /tmp/mysql.sock
skip-external-locking
key_buffer_size = 384M
max_allowed_packet = 1M
table_open_cache = 512
sort_buffer_size = 2M
read_buffer_size = 2M
read_rnd_buffer_size = 8M
myisam_sort_buffer_size = 64M
thread_cache_size = 8
query_cache_size = 32M
thread_concurrency = 8
log-bin=mysql-bin
server-id = 1

[mysqldump]
max_allowed_packet = 16M

[mysql]
no-auto-rehash

[myisamchk]
key_buffer_size = 256M
sort_buffer_size = 256M
read_buffer = 2M
write_buffer = 2M

[mysqlhotcopy]
interactive-timeout 
```

这是崩溃的伪代码。

```
`For i to 100000 { do magic (check content on the web);    UPDATE table;    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:22:54.660

您必须查看 php.ini，而不是 my.cnf。

我想您正在对单个记录执行一些逻辑并更新该记录，然后再更新下一个记录。在这种情况下，单个记录（或记录子集）的更新不应花费*那么*长时间。

*冻结或崩溃*是因为您的脚本达到了内存限制或其执行时间限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:28:49.930

您需要从 php.ini 文件更改脚本的最大执行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:22:35.490

您可能遇到了执行时间错误。您可以创建一个 shell 脚本并通过命令行运行该脚本。

例如（伪）：

```
<?php
SELECT * FROM table
LIMIT $x to $y

FOR every result
do some magic, SAVE to record with ID $id 
```

如果您调用此文件`my_update.php`，请通过键入运行它`php path/to/my_update.php`并观看魔术。（`php`php可执行文件在哪里）。

聪明点，记录每一个动作！所以当脚本失败时，你有一个很好的线索，不必重新开始！这正是我在查询中添加 LIMIT 的原因，因此它不必缓冲 11M 行，而只需缓冲几行。在第一组行之后，它将简单地转到下一个 LIMIT。有点像分页，但没有视觉输出。

资料来源：

*   [http://php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

# gnuplot - 如何增加 Gnulot 中图例的大小

> ID：13412765
> 
> 赞同：0
> 
> 时间：2012-11-16T08:16:29.567
> 
> 标签：gnuplot

有人可以指导我如何在 Gnuplot 中增加图例的大小。

我希望将传说放在外面： `set key outside top`

但现在我希望图例看起来更大。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:36:23.433

字体规范可以遵循 key 的设置，从`help key`：

```
{font "<face>,<size>"} 
```

如果您只想更改大小，则不需要指定面，例如将字体大小设置为 16，请执行以下操作：

```
echo 'set key outside top font ",16"; plot sin(x) w l' | gnuplot --persist 
```

哪些字体可用取决于终端设置，例如，如果您的终端是 wxt，您可以通过运行`help wxt`等找到更多信息。

# hibernate - PostgreSQL Hibernate 错误：“无法在事务中间更改事务隔离级别”

> ID：13412768
> 
> 赞同：2
> 
> 时间：2012-11-16T08:16:44.343
> 
> 标签：hibernate, postgresql, jdbc

我已将 PostgreSQL 中的 OID 列映射到 Hibernate 中的 Blob。有了它，我可以创建新行来存储二进制数据并将其取回。但是当我尝试通过休眠更新同一行或删除该行时，我得到了上述错误。我正在使用带有 PostgreSQL 驱动程序 9.2-1001 jdbc4 驱动程序的 Hibernate 3.2。基于阅读有关带有读取 oid 类型的休眠错误的信息，我已升级到 Hibernate 3.6.10，但仍然遇到相同的错误。

现在在做研究的时候，我发现hibernate在使用OID类型的PG jdbc驱动无法检索数据方面存在一些问题。建议我们在hibernate中使用“byte[]”作为映射类型，并将列更改为“bytea”。但我不想映射到 byte[]，因为它会读取 memroy 中的整个二进制内容。

```
2012-11-16 13:36:32,614 [main] INFO  Cache - No object present with id=1295
org.hibernate.exception.GenericJDBCException: Cannot open connection
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:345)
at $Proxy0.beginTransaction(Unknown Source)
at x.y.objectstore.dao.TransactionManager.begin(TransactionManager.java:53)
at x.y.objectstore.dao.BaseStore.load(BaseStore.java:122)
at x.y.objectstore.dao.BaseStore.load(BaseStore.java:110)
at x.y.objectstore.ConceptInstanceImpl.getContainerBean(ConceptInstanceImpl.java:284)
at x.y.objectstore.deletion.PropertyInstanceDeletionTask.run(PropertyInstanceDeletionTask.java:53)
at x.y.objectstore.deletion.DeletionService.executeDeletionTask(DeletionService.java:56)
at x.y.objectstore.ConceptInstanceImpl.deletePropertyInstance(ConceptInstanceImpl.java:726)
at x.y.objectstore.ConceptInstanceImpl.removeProperty(ConceptInstanceImpl.java:719)
at x.y.objectstore.tests.PropertyEditTests.testEditBinaryProperty(PropertyEditTests.java:134)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at junit.framework.TestCase.runTest(TestCase.java:154)
at junit.framework.TestCase.runBare(TestCase.java:127)
at junit.framework.TestResult$1.protect(TestResult.java:106)
at junit.framework.TestResult.runProtected(TestResult.java:124)
at junit.framework.TestResult.run(TestResult.java:109)
at junit.framework.TestCase.run(TestCase.java:118)
at junit.framework.TestSuite.runTest(TestSuite.java:208)
at junit.framework.TestSuite.run(TestSuite.java:203)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.postgresql.util.PSQLException: Cannot change transaction isolation level in the middle of a transaction.
at org.postgresql.jdbc2.AbstractJdbc2Connection.setTransactionIsolation(AbstractJdbc2Connection.java:929)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:126)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
... 36 more 
```

**更新**：

只是尝试遵循@a_horse_with_no_name 的建议。尝试使用 bytea 列并遵循这个[Hibernate，Postgresql：列“x”是 oid 类型，但表达式是 byte 类型](https://stackoverflow.com/questions/4488693/hibernate-postgresql-column-x-is-of-type-oid-but-expression-is-of-type-byte)以创建修改后的 postgresql 方言，但现在我收到错误“列 'binaryValue' 是 bytea 类型，但表达式是类型bigint”，同时插入一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:59:27.847

最后，我使用 @a_horse_with_no_name 的建议解决了我的问题。我将 column`bytea`更改为并将 bean 属性更改为`byte[]`. 我保留了方言。我***不再***使用`Blob`PostgreSQL。

通过这些更改，我可以毫无问题地编辑/删除列。

*   PostgreSQL 版本：`9.2.1`
*   PostgreSQL 驱动版本：`9.2-1001`
*   休眠版本：`3.6.10`

# java - 索引变量字符串参数时出现 NullPointerException

> ID：13412770
> 
> 赞同：1
> 
> 时间：2012-11-16T08:16:53.573
> 
> 标签：java, string, variables, parameters, nullpointerexception

我对使用省略号的想法很陌生。我几乎可以肯定我的错误是由不正确地声明或初始化“ `String[] authors`”引起的，但我不知道如何做到这一点，我的`setAuthors`方法仍然有效。

```
import java.util.*;
public class Book {
    private String[] authors; //I'm guessing this line should end with "= new String..."
                              //but not sure how to w/o specifying an array dimension
    private int authorsSize;

    //Receives variable # of String parameters and indices them into String[] "authors"
    public void setAuthors(String... authors) {
        authorsSize = authors.length;
        for(int i=0;i<authorsSize;i++)
            this.authors[i] = authors[i];
    } 
```

//getAuthors 方法：

```
 public String getAuthors(){
         String s = "";
         authorsSize = authors.length;
              for(int i=0;i<authorsSize;i++)
              s = s+authors[i] + ", ";
         printAuthors = s;
         return s;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T08:19:09.073

最*简单*的方法就是克隆数组：

```
public void setAuthors(String... authors){
    this.authors = (String[]) authors.clone();
} 
```

毕竟你反正是在覆盖之前的数据，在方法调用之前你是无法知道大小的。此时您不需要该`authorsSize`变量 - 您已经获得了`authors`知道其自身长度的数组。

（当然，如果您能够使用不可变集合，您甚至不需要克隆。）

编辑：如评论中所述，如果您传入空引用，此方法将引发异常。你*不应该*自动决定这是你应该“处理”的情况——记录参数不能为空是完全合法的。我建议以*任何一种方式*记录围绕无效性的行为。

事实上，如果你这样做，你可能*还*想像这样初始化你的实例字段：

```
private String[] authors = new String[0]; 
```

这样，您始终知道您将在该字段中有一个非空引用，因此您可以不受惩罚地使用它。我宁愿这样，每次使用时都必须检查 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T08:19:10.017

你从来没有初始化`authors`你的数组。您需要在使用它之前对其进行初始化。

```
String[] authors = new String[size]; 
```

> //但不确定如何不指定数组维度

最好的方法是使用 List 实现类，因为它们是动态数组。即，您不需要指定大小。

```
List<String> authors = new ArrayList<String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T09:17:10.017

因为“private String[] authors”的声明在“public void setAuthors(String... authors)”之前，所以不能使用“String[] authors = new String[authorsSize]”这样的格式。这将使作者的大小始终为 0。

更好的方法是使用动态初始化： List authors = new ArrayList(); 然后使用 this.authors.add(authors[i]) 传递参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T08:22:04.603

您必须按`setAuthors`如下所述更正您的方法

```
public void setAuthors(String... authors) {
    if (authors != null && authors.length > 0) {
        authorsSize = authors.length;
        authors = new String[authorsSize];
        for (int i = 0; i < authorsSize; i++)
            this.authors[i] = authors[i];
    }else{
        this.authors = null;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T08:27:26.033

你也可以像这样调整你的代码：

```
import java.util.*;
public class Book{

    private String[] authors; 
    private int authorsSize;

    public void setAuthors(String... authors){

        //check for null, you could also set this.authors = new String[] if you prefer.
        if(authors == null){
            this.authors = null;
        }else{
            authorsSize = authors.length;

            //also add this line...
            this.authors = new String[authorsSize];

            for(int i=0;i<authorsSize;i++)
                this.authors[i] = authors[i];
        }
    }

    public String getAuthors(){
         if(authors == null){
             return ""; //could also return null here if you would prefer
         }

         StringBuilder s = new StringBuilder();
         authorsSize = authors.length;
         for(int i=0;i<authorsSize;i++){
             if(i > 0)
                 s.append(",");

             s.append(authors[i]);
         }

         //printAuthors = s;
         return s.toString();
    }
} 
```

# assembly - 为什么 ecx 被压入堆栈两次，一次又一次？

> ID：13412776
> 
> 赞同：1
> 
> 时间：2012-11-16T08:17:30.730
> 
> 标签：assembly

在这里，在这个函数序言中，ecx被一次又一次地压入堆栈，为什么？

```
push    ebp
mov     ebp, esp

push    ecx
push    ecx
and     [ebp+var_8], 0
and     [ebp+var_4], 0
push    ebx
mov     ebx, [ebp+arg_0]
push    esi
push    edi
or      edi, 0FFFFFFFFh
push    edi             ; size_t
lea     eax, [ebp+var_8]
push    eax             ; int
mov     eax, [ebp+arg_4]
call    sub_671FF38E
push    2Eh             ; wchar_t
lea     esi, [ebp+var_8]
call    sub_673AFD82
cmp     eax, edi
jz      loc_677E564B 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:55:08.697

Bo 是对的，它是分配堆栈 - 您可以看到堆栈位置在接下来的两条指令中被清零，因此实际上没有使用 ecx 值。您经常在 MSVC 编译的文件中看到这种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:55:46.080

它只是获得堆栈空间。

子 esp，8 -> 3 字节。

推送 ecx X 2 -> 2bytes。

# mongodb - 从 MongoDB 开始 - 初学者建议/工具

> ID：13412777
> 
> 赞同：-3
> 
> 时间：2012-11-16T08:17:32.397
> 
> 标签：mongodb

我是这个论坛的新手，也是 MongoDB 的新手。

我目前正在学习 MongoDB 的 10gen 在线教育课程，并且一直在做一些在线教程。但是，我的编程经验仅限于课堂经验，主要是 java 和一些 SQL、python 经验。

在阅读教程的过程中，我注意到一些关键领域的知识差距以及我应该用于开发的工具方面的差距。我想尽快填补这些空白。

我在任何我应该加入或查看的论坛、网站、我应该获得的软件上寻求建议（基本上是程序员应该拥有的任何工具，我主要只是使用 eclipse），或者只是关于你希望得到什么的一般建议知道你什么时候开始..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:31:51.967

如果您使用的是 Ubuntu：

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
sudo nano  /etc/apt/sources.list.d/10gen.list 
Add the line
deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen

sudo apt-get update
sudo apt-get install mongodb-10gen

sudo nano /etc/mongodb.conf 
sudo nano /etc/init.d/mongodb.conf
sudo service mongodb start
mongo
> db.test.save( { a: 1 } )
> db.test.find()

sudo apt-get install php-pear 
sudo apt-get install php5-dev
sudo apt-get install make
wget https://github.com/mongodb/mongo-php-driver/archive/master.zip
unzip master.zip
phpize
./configure
make
sudo make install
 or
sudo pecl install mongo

cp /usr/lib/php5/20090626+lfs/mongo.so  /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/mongo.so
cp /lampp/lib/php/extensions/no-debug-non-zts-20100525

sudo /opt/lampp/lampp restart 
```

如果您使用的是 Windows：

下载MongoDB

[http://www.mongodb.org/downloads](http://www.mongodb.org/downloads)

和 mongodb-php 驱动程序

[https://github.com/mongodb/mongo-php-driver/downloads](https://github.com/mongodb/mongo-php-driver/downloads)

您可能还需要 RockMongo（类似于 phpmyadmin） [http://rockmongo.com/downloads](http://rockmongo.com/downloads)

# javascript - Bootstrap Collapse - 打开给定的 id 片段

> ID：13412778
> 
> 赞同：20
> 
> 时间：2012-11-16T08:17:49.013
> 
> 标签：javascript, html, twitter-bootstrap, fragment-identifier

想象一个包含 3 个部分的[Bootstrap 崩溃](http://getbootstrap.com/javascript/#collapse)

```
<div class="panel-group" id="accordion">
    ...
    <div id="accordionOne" class="panel-heading"></div>
    ...
    <div id="accordionTwo" class="panel-heading"></div>
    ...
    <div id="accordionThree" class="panel-heading"></div>
</div> 
```

有没有一种简单的方法可以让插件打开给定的[HTTP 片段标识符](http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid)？

示例`http://myproject/url#accordionTwo`将打开第二个手风琴

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-16T08:20:29.577

```
$("#accordionTwo").collapse('show'); 
```

要打开给定的 HTTP 片段标识符，请尝试以下操作：

```
$(document).ready(function() {
    var anchor = window.location.hash;
    $(".collapse").collapse('hide');
    $(anchor).collapse('show');
}); 
```

**编辑：**

正如 bart 在评论中指出的那样：小心定位`.collapse`，因为当视口为`xs`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-13T23:58:27.240

此行将打开正确的哈希

```
location.hash && $(location.hash + '.collapse').collapse('show'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-14T10:56:44.977

另一个解决方案，更小更紧凑：

```
$(document).ready(function() {
  var anchor = window.location.hash;
  $(anchor).collapse('toggle');
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T08:39:05.553

为了真正简单快速地实现哈希路由，您可以尝试类似[Routie](http://projects.jga.me/routie/)

```
routie({
    accordionOne: function() {
        $('#accordionOne').collapse('show');
    },
    accordionTwo: function() {
        $('#accordionTwo').collapse('show');
    },
    accordionThree: function() {
        $('#accordionThree').collapse('show');
    }
}); 
```

# vb.net - 导入遮蔽的数据类型和对象

> ID：13412779
> 
> 赞同：0
> 
> 时间：2012-11-16T08:17:53.910
> 
> 标签：vb.net, ide

当我导入 Microsoft.Office.Interop.Excel（添加了对 Excel 对象库的 com 引用）时，它似乎隐藏了一些数据类型和对象。我必须在任何地方将 DataTable 限定为 System.Data.DataTable。然而，我根本没有找到使用应用程序对象的方法。我尝试了 My.Application，但这有所不同（例如，没有 Application.StartupPath）。a) 我在哪里可以找到 Application 对象，或者 b) 有没有办法提示 IDE 使用例如。使用DataTable时默认System.Data.DataTable？（对不起格式，用手机写）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:01:25.980

至于阴影，我认为最好*不要*在任何模块中使用该`import`行，而是使用完全合格的 Excel 的所有内容，例如`Dim xlApp As Microsoft.Office.Interop.Excel.Application`. 对我来说，这似乎比弄乱其他数据类型更容易。

# uml - 如何在 UML 类图中显示常量？

> ID：13412787
> 
> 赞同：22
> 
> 时间：2012-11-16T08:18:16.830
> 
> 标签：uml

我无法决定如何在 Uml Diagram 中显示常量类属性。你能建议我怎么做吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-16T08:35:25.473

我会这样做：

```
CONSTANT_NAME : constant_type = value 
```

例如：

```
PI : double = 3.1415 
```

# mysql - 如何在 ec2 bitnami 上修复 (2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")？

> ID：13412805
> 
> 赞同：2
> 
> 时间：2012-11-16T08:20:06.207
> 
> 标签：mysql, django, amazon-web-services, amazon-ec2, bitnami

我正在 AWS 上使用 python django 开发 ec2 bitnami。我在`(2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")`从 mysql 数据库中获取对象时遇到。

我已经浏览了很多论坛，但我仍然不知道它到底是什么以及为什么会出现这个问题。请告诉我它是什么以及如何在 ec2 bitnami 上为 python django mysql 修复它。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T13:42:01.180

设置`HOST`为

> 127.0.0.1

并`settings.py`确保 MySQL 服务器正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:43:17.803

在 BitNami AMI 中，MySQL 套接字是`/opt/bitnami/mysql/tmp/mysql.sock`

在此处查看官方 BitNami 文档：[http ://wiki.bitnami.org/Components/MySQL#What_is_the_default_configuration.3f](http://wiki.bitnami.org/Components/MySQL#What_is_the_default_configuration.3f)

您应该`HOST`在设置文件中相应地更改设置： [https ://docs.djangoproject.com/en/1.3/ref/settings/#host](https://docs.djangoproject.com/en/1.3/ref/settings/#host)

# objective-c - 在 Objective-C 中分析代码时出现奇怪的消息

> ID：13412806
> 
> 赞同：0
> 
> 时间：2012-11-16T08:20:09.883
> 
> 标签：objective-c, nsarray, message, code-analysis

我有一个数组，我用复选框、滑块和 NSTextField 中的值填充。请参见下面的 001。它的工作原理很明显。

但是，在分析我的代码时，我收到以下消息：

`/Users/ronny/DEV/0200-ObjC4/Egg&Breakfast/Classes/TimeController.m:358:24: Argument to 'NSArray' method 'arrayWithObjects:' should be an Objective-C pointer type, not 'NSInteger'`

我尝试了几件事，例如将带有 intValue 的三行类型转换为（NSInteger）。没有成功。知道有什么问题吗？

```
NSArray *myValues = [NSArray arrayWithObjects:
                    [isAppointment state],     //Checkbox
                    [boxForEver    state],     //Checkbox
                    [boxMakeSound  state],     //Checkbox
                    [tickTackFlag  state],     //Checkbox
                    [txtRemark   stringValue], //NSTextField
                    [slideHour      intValue], //Slider
                    [slideMin       intValue], //Slider
                    [slideSec       intValue], //Slider
                    [startAuto     state],     //Checkbox
                    nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:26:29.900

您不能将标量类型（如`int`、`float`或）`NSInteger`插入`NSArray`。

`NSObject`如错误消息中所述，您必须插入指向或子类的指针。

防止该缺点的一种常见方法是使用[`NSNumber`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)

例如 ：

```
NSInteger foo = 42;
[_myArray addObject:[NSNumber numberWithInteger:foo]]; 
```

在最近的 Xcode 版本中，您可以使用一些语法糖

```
[_myArray addObject:@42]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:28:35.977

所有调用`state`或`intValue`不正确的行。

An`NSArray`只能保存对 Objective-C 对象的引用。但是return `state`，这是一个 typedef （别名），它是 C 原语，而不是 Objective-C 对象引用。`intValue``NSInteger``long`

您需要将整数包装在`NSNumber`对象中。如果您使用的是 Xcode 4.4 或更高版本，您可以使用新的`@(...)`包装语法将整数包装在`NSNumber`对象中。您还可以使用新的数组文字语法`@[...]`来构造您的数组。

```
NSArray *myValues = @[
                    @([isAppointment state]),     //Checkbox
                    @([boxForEver    state]),     //Checkbox
                    @([boxMakeSound  state]),     //Checkbox
                    @([tickTackFlag  state]),     //Checkbox
                    [txtRemark   stringValue], //NSTextField
                    @([slideHour      intValue]), //Slider
                    @([slideMin       intValue]), //Slider
                    @([slideSec       intValue]), //Slider
                    @([startAuto     state]),     //Checkbox
                    ]; 
```

# android - 应用程序开发中的数据永久存储

> ID：13412808
> 
> 赞同：1
> 
> 时间：2012-11-16T08:20:13.007
> 
> 标签：android

在开发应用程序的过程中，我需要保存和读取一个 INT 值。同时，数值保存后，不再受安卓系统“设置---恢复出厂设置---恢复出厂设置”的影响。

现在我想将值保存在 nvram 中。有什么方法可以保存和读取应用层中的 nvram 值吗？

或者它有内存空间来保存应用层的值，并且不受android系统“设置---出厂默认---恢复出厂设置”的影响

我不确定 SD 卡是否受到出厂重置的影响。如果是，当 SD 卡更换时，数据也丢失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:42:13.827

据我所知，内部在出厂重置时已完全擦除。但是 SD 卡是一个有效的路径，因为它不会受到直接影响。那就是说用户可以自己清理SD...

# java - 如何从网上仅获取网页的一部分而不是下载整个页面

> ID：13412815
> 
> 赞同：2
> 
> 时间：2012-11-16T08:20:45.357
> 
> 标签：java, android, google-play, android-query

目前我正在使用一个名为[Android Query](https://code.google.com/p/android-query/wiki/AsyncAPI)的第三方库。我用它来下载网页，然后解析 html 以获得我想要的位。这些位主要位于页面的一小部分，因此其余部分被丢弃。

每页大约 100kb，我正在获取 200-300 页，尤其是在连接速度较慢的情况下。

是否有任何方法或库可以让我获取某个 div？

我正在获取的页面来自谷歌游戏市场。

我正在使用的示例代码

```
String url = "https://play.google.com/store/apps/details?id=com.touchtype.swiftkey";

aq.ajax(url, String.class, new AjaxCallback<String>() {

        @Override
        public void callback(String url, String html, AjaxStatus status) {
                parseHtml(html);
        }

}); 
```

编辑：如果不可能，是否有我可以访问和下载的轻量级 Google Play 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:47:01.637

在这里查看另一个答案： [有没有办法以编程方式下载网页的一部分，而不是整个 HTML 正文？](https://stackoverflow.com/questions/7556286/is-there-a-way-to-download-partial-part-of-a-webpage-rather-than-the-whole-html)

看起来有办法做到这一点，但你需要知道字节范围。这将非常容易出错，因为如果谷歌更改页面的不同部分，内容可能会随着时间的推移而轻松更改。

您可以设置您自己的网络服务器，放在您的应用程序和 google play 之间，并返回您查询的数据。

有一个关于此的黑客新闻线程： [https ://news.ycombinator.com/item?id=4634259](https://news.ycombinator.com/item?id=4634259)

显然 Apple 有 JSON API，但 Google 没有。

这里有两个服务器端库可以用来简化任务：

*   [https://github.com/chadrem/market_bot](https://github.com/chadrem/market_bot)（红宝石）
*   [https://github.com/pastfuture/MarketBot](https://github.com/pastfuture/MarketBot) (PHP)

您可以仅从 Web 应用程序返回您需要的数据，使其尽可能精简。您还可以将其缓存在您的服务器上，这样您就不必为每个请求都打谷歌。在一个请求中发送多个应用程序 ID，以最大程度地减少往返行程。

# java - 访问大量 Apache MINA 链接时显示 404 Not Found 页面

> ID：13412818
> 
> 赞同：0
> 
> 时间：2012-11-16T08:20:48.583
> 
> 标签：java, network-programming, nio, apache-mina

我必须在我的 Java 应用程序中嵌入一个网络层，以便启用从服务器到多个客户端连接的文件传输。

在得出 Java NIO 将是最佳选择的结论后，我开始寻找一些现有的 NIO 网络框架。

我遇到了 Apache MINA 并开始学习它。问题是它的许多链接似乎不再起作用了。例如，这个指向 Apache MINA 2.0.7 API 的链接会显示一个 404 Not Found 页面。[阿帕奇米娜 2.0.7 API](http://mina.apache.org/report/trunk/apidocs/overview-summary.html)。

您能否让我知道他们发生了什么事以及他们是否有其他链接？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:22:24.503

该网站正在建设中，我们将尽快修复该问题！

作为一种解决方法，您会在那里找到所有内容：http: [//apache.org/dist/mina/](http://apache.org/dist/mina/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T08:41:29.567

我的错：在重新组织整个网站时，我错误地指向了错误的下载目录。它现在已修复，但在镜像更新之前它不会可见（可以这么说，在几个小时内）。

带来不便敬请谅解。

旁注：最好在 MINA 用户列表中报告此类问题，因为我们不需要观看 stackoverflow（嗯，频率较低：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:32:16.497

我也有同样的情况。但我找到了下载 Mina 的方法。我注意到链接 www.apache.org/dist/mina/2.0.7/apache-mina-2.0.7-bin.zip.md5 是可以访问的。

因此，我将链接：[http](http://mina.apache.org/dyn/closer.cgi/mina/2.0.7/apache-mina-2.0.7-src.zip) ://mina.apache.org/dyn/closer.cgi/mina/2.0.7/apache-mina-2.0.7-src.zip 更改 为 [http://www.apache.org /dist/mina/2.0.7/apache-mina-2.0.7-src.zip](http://www.apache.org/dist/mina/2.0.7/apache-mina-2.0.7-src.zip)

哇，它有效！

**更新：** 顺便说一句，所有 Mina 链接在 2 周前运行良好。

# java - Tomcat JDBC 异常池耗尽

> ID：13412824
> 
> 赞同：4
> 
> 时间：2012-11-16T08:21:16.010
> 
> 标签：java, tomcat, connection-pooling

我总是遇到同样的例外，我已经尽我所能通过搜索来获得解决方案，但没有任何好处。

我的例外是：

```
SEVERE: Exception : org.apache.tomcat.jdbc.pool.PoolExhaustedException: [pool-2-thread-1] Timeout: Pool empty. Unable to fetch a connection in 30 seconds, none available[size:100; busy:100; idle:0; lastwait:30000].
    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:672)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.getConnection(ConnectionPool.java:187)
    at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:128)
    at com.xxxxx.dbmanager.utils.DBManager.getConnection(DBManager.java:81)
    at com.xxxxx.dbmanager.utils.SQLManager.<init>(SQLManager.java:36)
    at ...
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我试图增加 mysql DB 中的最大连接数。

我只是想知道在后台运行并创建线程的 servlet 是否可能是问题所在？任务完成后如何杀死我的线程？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-05-06T18:10:21.607

从错误消息看来，您的代码正在连接到数据库并且从未关闭其连接。

池恢复连接的方式是应用程序代码必须在连接完成后调用 close，这会将连接返回到池中。否则，据池所知，所有这些连接仍然很忙。

我对原因的第一个猜测是您的代码甚至没有尝试关闭连接。有些人（尤其是那些来自 PHP 的人，通常会自动处理这些问题）惊讶地发现这是他们必须自己做的事情。

或者，某些错误条件可能会导致在您的代码未正确处理异常的情况下引发异常，并最终跳过关闭调用，当多个 jdbc 资源在单个 finally 块中关闭时，可能会发生这种情况。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/25448649/217324)。

或者，您的应用程序只是很忙，而这些线程都在努力完成工作。检查线程是否在做任何事情：添加日志以告知它们在做什么，并检查您的应用程序和数据库之间是否存在网络流量。

有关如何杀死线程，请参阅[Servlet “已启动线程但未能停止它” - Tomcat 中的内存泄漏](http://stackoverflow.com/q/25126980/217324)。我认为这与失去连接的问题没有直接关系，但很高兴知道。如果您没有正确执行此操作，则可以在新实例运行时使应用程序的旧实例在后台保持活动状态。

# apache - 在 mod rewrite 中的 Rewriterule 帮助

> ID：13412827
> 
> 赞同：0
> 
> 时间：2012-11-16T08:21:23.803
> 
> 标签：apache, mod-rewrite

我知道这已被问了一百万次，但我无法弄清楚。请帮忙。

这是原始网址：

```
http://booksnearby.in/show_post.php?title=some_words&id=99 
```

我希望它显示为

```
http://booksnearby.in/show_post/some_words 
```

如何 ？我已经在这几个小时了，只是想不通。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:46:29.890

试试这个重写规则

```
RewriteRule ^showpost/(.*)$ http://booksnearby.in/showpost.php?title=$1&id=99 
```

这将重写`http://booksnearby.in/showpost/titlesearch`为`http://booksnearby.in/showpost.php?title=titlesearch&id=99`

我已经对上面的 id 进行了硬编码，因为显然不可能根据传入的 URL 重写它。

# backbone.js - 如何在主干中的 model.get 上创建回调

> ID：13412831
> 
> 赞同：0
> 
> 时间：2012-11-16T08:21:50.813
> 
> 标签：backbone.js

我有以下（**编辑显示`currencyId`**）：

```
var currencyId  = $(".listSelected").attr("rel"); // 110
var currencies = new Currencies();
currencies.fetch({
    success:function () {
        var currency = currencies.get(currencyId);
        user.symbol = currency.get("symbol");
        user.country = currency.get("country");
    }
}); 
```

有时我会遇到以下异常。

```
Uncaught TypeError: Cannot call method 'get' of undefined on
currency.get("symbol"); 
```

我的猜测是我需要将`get`语句包装在回调中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:12:54.713

```
var currency = currencies.get(currencyId); 
```

由于未定义变量 currencyId，因此无法正常工作。

如果您需要访问模型的**属性**，则在调用[get](http://backbonejs.org/#Model-get)时必须将该属性**包装在字符串**中。

```
var currency = currencies.get("currencyId"); 
```

# telerik - 与 DbSelectedDate 相关的 Telerik RadDatePicker 错误

> ID：13412837
> 
> 赞同：0
> 
> 时间：2012-11-16T08:22:04.580
> 
> 标签：telerik, raddatepicker

我在一个项目中使用 Telerik，但遇到了一些麻烦。具体来说，我想使用 RadDatePicker，我将其定义如下：

```
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<telerik:RadDatePicker ID="txtEndDate" runat="server" Width="140px" Skin="Windows7"
        DateInput-EmptyMessage="End Date" MinDate="01/01/2000" MaxDate="01/01/2050">
    <Calendar>
        <SpecialDays>
            <telerik:RadCalendarDay Repeatable="Today" ItemStyle-CssClass="rcToday">
            </telerik:RadCalendarDay>
        </SpecialDays>
     </Calendar>
 </telerik:RadDatePicker> 
```

在我使用的代码中：

```
txtStartDate.DbSelectedDate = Date.Today.AddDays(-7).ToString("MM/dd/yyyy") 
```

但是当我构建时出现以下错误

错误 62 ...：错误 BC30456：“DbSelectedDate”不是“System.Web.UI.WebControls.TextBox”的成员。

知道可能是什么吗？在另一个页面中，我以相同的方式定义了 RadDatePicker，它在那里工作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:07:30.893

实际上，这个错误似乎是一个副作用。

它发生在一个从网站类型项目转换为 webapp 类型项目的应用程序中。初始导入文件后，大约有 2000 个错误（大多数是由于缺少/错误的引用或命名空间引起的）。

我忽略了该错误并修复了其他错误，然后错误突然消失了。

# linux - 适用于 Linux / Ubuntu (gui) 的 WSDL 浏览器/查看器

> ID：13412839
> 
> 赞同：1
> 
> 时间：2012-11-16T08:22:21.940
> 
> 标签：linux, web-services, xsd, wsdl

是否有可以显示有关*WSDL 文件*和 XSD 文件的详细信息的 GUI 工具？

也许 WSDL 编辑器也是一种选择。我的需求主要是**检查**我必须调用服务的结构和选项。最好比仅仅阅读 XML 文件本身更**图形化。**

我尝试了**Eclipse WSDL editor**，它非常有用，但我遇到了麻烦。那么，有没有**类似的替代方案**？（否则我需要去修复 Eclipse 工具......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T08:48:25.643

您可以尝试使用[http://www.soapui.org/](http://www.soapui.org/)。它是免费和开源的。您也可以使用带有商业支持的专业版。但是免费版对我来说已经足够了。

# javascript - 使用 Javascript 提交表单会引发 TypeError

> ID：13412842
> 
> 赞同：-3
> 
> 时间：2012-11-16T08:22:42.683
> 
> 标签：javascript, html

我有这个非常令人沮丧的问题。我想用 Javascript 提交一个表单，无论我尝试什么，我总是最终得到`Uncaught exception: TypeError: Cannot convert 'document.getElementById('loginForm')' to object`.

我已经盯着这段代码看了一段时间了，我真的想不通。我敢肯定这真的很简单，但我只是看不到解决方案。

这是我的代码：

```
<form method="post" action="do.php?a=signin" id="loginForm">
  <input name="usr" class="test" placeholder="Användarnamn" type="text" />
  <input name="pwd" class="test" placeholder="Lösenord" type="password" />
</form>

<span class="test"><a href="fblogin.php"><img src="gfx/ico/fb.jpg" alt="" /> Logga in via Facebook</a></span>
<span class="test"><a href="javascript: doLogin();"><img src="gfx/ico/Unlock.gif" alt="" /> Logga in &#0187;</a></span>

<script type="text/javascript">
    function doLogin() {
        document.getElementById('loginForm').submit();
    }
</script> 
```

我错过了什么！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:25:27.823

首先，您必须在表单中添加**名称**属性

```
 <form name="loginForm" ...> 
```

然后在下面申请。

```
 document.forms["loginForm"].submit(); 
```

或者

```
 document.loginForm.submit(); 
```

**提示：**

> 您不能将按钮命名为提交并使用 submit()。按钮会覆盖该方法。将按钮重命名为其他名称，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:41:53.770

解决方案是我不小心`<form>`在代码的前面输入了另一个。我删除了它，现在它就像一个魅力！

# java - 无法从 Java 启动 .exe

> ID：13412845
> 
> 赞同：0
> 
> 时间：2012-11-16T08:22:55.190
> 
> 标签：java, process, runtime.exec

我正在尝试通过 Java 程序启动 .exe 文件。我使用了以下代码：

```
System.out.println("Opening " + path);
Process exec;
exec = Runtime.getRuntime().exec("rundll32 SHELL32.DLL,ShellExec_RunDLL " + path);//path is the path of the exe file which is passed as an argument from another java class 
```

输出如下：

```
打开 C:\Program Files (x86)\C-Free 5\CppIDE.exe

```

但它没有打开。

相反，当我尝试

```
String pat="C:\\Program Files (x86)\\C-Free 5\\CppIDE.exe";
Process exec;
exec = Runtime.getRuntime().exec("rundll32 SHELL32.DLL,ShellExec_RunDLL " + pat); 
```

程序打开。

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:31:21.250

您路径中的空间很可能是问题所在。

我建议您将参数作为数组传递，而不是传递包含整个命令的单个字符串（或者您可以正确引用空格，但这并不那么容易）。

*任何一个*

*   使用*or*[的`String[]`版本`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)
**   切换到使用[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)具有更简单和更直观的 API 的 API。*

 *这`ProcessBuilder`可能看起来像这样：

```
ProcessBuilder pb = new ProcessBuilder("rundll32", "SHELL32.DLL,ShellExec_RunDLL", path);
Process p = pb.start(); 
```

`rundll32`此外，我认为在这种情况下根本没有理由调用。这也应该起作用：

```
ProcessBuilder pb = new ProcessBuilder(path);
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:31:44.570

您需要使用[File.separator](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#separatorChar)构造路径。在这种情况下，您使用的路径分隔符将取决于系统。*

# sql - Oracle Native Dynamic SQL PL/SQL 语句没有开始和结束

> ID：13412848
> 
> 赞同：1
> 
> 时间：2012-11-16T08:23:14.030
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我有通过创建一系列插入语句为表创建备份的问题。

输入是表名，每个表可以有不同数量的列。假设数据类型只能是 varchar2、数字或日期

所以我有这行代码：

```
execute immediate fetchStmt; 
```

其中 fetchStmt 可以是：

```
fetch tableColCursor into valuesArray(1), valuesArray(2), ...,  valuesArray(n) 
```

这只是从游标中获取每一行并将其放入一个可变数组中，如果它不在执行立即语句中，则语句本身可以工作。

我知道立即执行只能处理 SQL 查询或 PL/SQL 块。问题是我如何才能完成这项工作，或者有什么类似的解决方案可以解决这个问题？

请注意，在编译期间不知道表及其列及其数据类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:26:54.440

[`EXECUTE IMMEDIATE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BHCEBBAI)只能处理完整的语句，即：SQL 语句或 PLSQL 块（带`[DECLARE]..BEGIN..END`）。

此外，以这种方式执行的块不会看到来自调用块的任何变量（它们不共享相同的范围），例如这不起作用：

```
DECLARE
  l NUMBER := 1;
  k NUMBER := 0;
BEGIN
  EXECUTE IMMEDIATE 'BEGIN l := k; END;';
END; 
```

上面的代码会产生错误，因为`l`并`k`没有在子块中定义。相反，您需要使用输入/输出变量：

```
DECLARE
  l NUMBER := 1;
  k NUMBER := 0;
BEGIN
  EXECUTE IMMEDIATE 'BEGIN :P1 := :P2; END;' USING OUT l, k;
  dbms_output.put_line(l); -- return 0
END; 
```

在您的情况下，您不知道变量的数量，因此您将无法使用`EXECUTE IMMEDIATE`. 您可以使用`DBMS_SQL`，但我认为有更简单的方法：您可以找到已经工作的代码（例如，它存在于 Oracle APEX 中），或者您可以通过运行会生成必要的 INSERT 字符串的 SELECT 自行编程。对于此方法，您必须动态生成 SQL 语句（取决于表列）。该语句看起来像这样（对于`TEST(a,b,c)`所有列都是整数的表[需要适应其他数据类型]）：

```
SELECT 'INSERT INTO test(a,b,c) VALUES ('||a||', '||b||', '||c||');'
  FROM test 
```

# windows-8 - 如何在 WinJS 中显示 Windows.Graphics.Imaging.BitmapDecoder？

> ID：13412849
> 
> 赞同：0
> 
> 时间：2012-11-16T08:23:16.420
> 
> 标签：windows-8, microsoft-metro, winjs

我正在尝试制作一个对图像应用滤镜效果的应用程序。从 FilePicker 我可以得到一个 IRandomAccessStream，我可以将它转换为 BitmapDecoder。但我不确定如何将位图数据显示为图像？我不想使用文件名或路径，只想将 BitmapData 显示为图像。我应该在 WinJS 中使用什么控件以及如何操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:26:55.667

`MSApp.createStreamFromInputStream()`使用和将 IInputStream 或 IRandomAccessStream 转换为图像`URL.createObjectURL()`：

```
var path = Windows.Storage.ApplicationData.current.localFolder.path + "\\thing.jpg";
Windows.Storage.StorageFile.getFileFromPathAsync(path).then(function (file) {
    file.openAsync(Windows.Storage.FileAccessMode.read).then(function (randomStream) {

        // Convert the stream to MS-Stream.
        var msStream = MSApp.createStreamFromInputStream("image/jpeg", randomStream);
        var imageUrl = URL.createObjectURL(msStream);

        var img = document.getElementById("theImage");
        img.src = imageUrl;

    }, onError);
}, onError); 
```

HTML 应如下所示：

```
<img id="theImage" src="#" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:33:44.907

这些 MSDN 博客更详细地解释了以下过程 [http://goo.gl/izCdf](http://goo.gl/izCdf) http://goo.gl/OLgfn

我找到了一种从 BitmapDecoder 创建 BitmapEncoder 的方法。该编码器可用于创建可在字段中显示的内存流。

```
 internal async Task<InMemoryRandomAccessStream> applyFilterInternal()
    {
        inputStream = await file.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite);
        decoder = await Windows.Graphics.Imaging.BitmapDecoder.CreateAsync(inputStream);

        var memStream = new Windows.Storage.Streams.InMemoryRandomAccessStream();
        var encoder = await Windows.Graphics.Imaging.BitmapEncoder.CreateForTranscodingAsync(memStream, decoder);

        encoder.BitmapTransform.ScaledWidth = 640;
        encoder.BitmapTransform.ScaledHeight = 480;
        encoder.BitmapTransform.Rotation = Windows.Graphics.Imaging.BitmapRotation.Clockwise90Degrees;

        // Fant is a relatively high quality interpolation algorithm.
        encoder.BitmapTransform.InterpolationMode = Windows.Graphics.Imaging.BitmapInterpolationMode.Fant;

        // Attempt to generate a new thumbnail from the updated pixel data.
        // Note: Only JPEG, TIFF and JPEG-XR images support encoding thumbnails.
        encoder.IsThumbnailGenerated = true;

        await encoder.FlushAsync();
        return memStream;
    }

public IAsyncOperation<InMemoryRandomAccessStream> applyFilter()
    {
        Task<InMemoryRandomAccessStream> from = applyFilterInternal();
        IAsyncOperation<InMemoryRandomAccessStream> to = from.AsAsyncOperation();
        return to;
    } 
```

要显示这个 -

```
 filter.applyFilter().then(function (memStream) {
            var msStream = MSApp.createStreamFromInputStream("image/jpeg", memStream);
            var imageURL = URL.createObjectURL(msStream);
            id("imageInput").src = imageURL;

        }); 
```

# c++ - 为什么指向整数的指针增加 4 个字节？

> ID：13412850
> 
> 赞同：1
> 
> 时间：2012-11-16T08:23:17.953
> 
> 标签：c++, c, memory, pointers, increment

> **可能重复：**
> [关于指针增量的问题](https://stackoverflow.com/questions/5610298/question-about-pointer-increment)

当我增加一个 int 指针时，它的地址有 4 个字节的间隙。为什么会这样？为什么 int 指针需要 4 个字节来存储而 char 需要 2 个字节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:25:38.577

当您增加类型 A 的指针时，您将该指针在内存中向前*移动*它所指向的类型的大小。在您的机器上，int 占用 4 个字节，因此指针移动了 4 个字节。

至于“为什么`int`在我的机器上占用 4 个字节？”：

C++ 标准说（4.9.1\. 第 2 段）：

> 有五种标准有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。<...> 普通整数具有执行环境架构所建议的自然大小^([44])；提供其他有符号整数类型以满足特殊需要。
> 
> * * *
> 
> ^([44])：也就是说，大到足以包含 INT_MIN 和 INT_MAX 范围内的任何值，如 header 中所定义。

基本上，基本类型的大小不是一成不变的，而是由实现定义的。[这个 SO question](https://stackoverflow.com/questions/13398630/why-are-c-int-and-long-types-both-4-bytes)的公认答案有一些关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:27:32.410

这是一般规则：

*   如果类型为`T`，则其大小`N`以`sizeof(T)`字节计算。因此，如果您将指针`T*`增加.`N``1`

    数学上，

    ```
    T  *p = getT();

    size_t diff = static_cast<size_t>(p+1) - static_cast<size_t>(p);

    bool alwaysTrue = (diff == sizeof(T)); //alwaysTrue is always true! 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T08:24:35.400

指向任何数据类型的指针的大小始终与系统支持的大小相同

如果系统是 32 位的，则所有指针的大小都是 4 个字节。

在指针算术中，当您执行`ptr++`或`ptr--`增量和减量根据此`ptr`指针指向的数据类型的大小进行时。

```
char *cptr;
int *iptr;
char c[5];
int a[5];
cptr=c;
iptr=a; 
```

通过这样做`cptr++`，您将获得`c[1]`并且指针将仅增加一个字节您可以检查每个字符的地址。

同样`iptr++`会给你`a[1]`这里的指针增加4个字节。

```
int main()
{
 int i;
 for(i=0;i<5;i++)
 {
  printf("%p\t",&c[i]); //internally pointer arithmeitc: (c+sizeof(char)*i) , 
  printf("%p\n",&a[i]); //intenally pointer arithmetic : (a+sizeof(int)*i)
 }
} 
```

大小`int`或其他数据类型由实现定义

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T08:25:20.543

指针以它们指向的事物的字节大小递增。int 在 32 位机器上占用 4 个字节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T08:28:29.283

因为，在您的计算机上`sizeof (int) == 4`，，所以从一个步进`int`到下一个需要增加四个字节。

大多数整数类型在不同的计算机上具有不同的大小。`int`必须至少有 16 位，并且应该是计算机的“自然”大小。大多数 32 位或 64 位平台选择 32 位作为“自然”大小，并且大多数计算机都有 8 位字节，因此 4 字节是`int`.

但是，`sizeof (char) == 1`在所有计算机上，我很惊讶您说“一个字符需要 2 个字节”。它应该只需要一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T08:25:02.373

因为指针指向的数据大小（int）有4个字节大小，所以指针增加4个字节（数据大小（int））

另一个例子：如果你有大小为 8 字节的结构并且你有指向这个结构的指针，那么这个指针的增量将是 8 字节：

```
struct test {
   int x;
   int y;
}

struct test ARRAY[50];
struct test *p=ARRAY; // p pointer is pointing here to the first element ARRAY[0]. ARRAY[0] is with size 8 bytes

p++; // this will increment p with 8 byte (size of struct test). So p now is pointing to the second element ARRAY[1] 
```

# windows-runtime - winrt应用框架

> ID：13412856
> 
> 赞同：0
> 
> 时间：2012-11-16T08:24:18.273
> 
> 标签：windows-runtime, mvvm-light, caliburn.micro

开发 Windows Store 应用程序的更好框架是什么？

我使用过[http://metroprism.codeplex.com/](http://metroprism.codeplex.com/)但现在我想将 Caliburn.Micro 或 MVVM light 用于另一个项目。

我已经查看了这些框架的几个应用程序示例，但它们还不够复杂，我无法估计在更大项目中的使用情况。

这两个是完全记录的，但我认为问题在于 winrt 的文档与 WP7、Silverlight 和 WPF 混合在一起，我有点怀疑是否支持完全用于 Windows Store 应用程序的所有功能和实践。

你能给我建议什么是更好的吗？或者在 Prism 中为 WPF 和 Silverlight 提供模块化支持的 Winrt 开发中的良好实践是什么。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T16:38:55.267

MVVM Light 和 Caliburn.Micro 基本上做同样的事情，但他们在 MVVM 中使用相反的“开发哲学”来做。

MVVM Light 是一种“视图优先”的方法。在这种方法中，ViewModel 由 View 实例化。在 MVVM Light 中，这是通过称为 ViewModelLocator 的东西完成的，这是一个将公共属性直接绑定到 View 的 DataContext 的静态类。

Caliburn.Micro 是一种“视图模型优先”的方法。在这里，您会发现 viewmodel 和 view 是由将两者绑定在一起的 IOC 机制创建的。您从 viewmodel 导航到 viewmodel，并生成视图以响应导航到 ViewModel。

它们都有不同的特点：

MVVM Light 有一个非常好的消息传递系统，允许视图模型以松散耦合的方式相互通信。

MVVM Light 有一个非常简单的机制，可以将设计时数据注入到您的视图中。基本上，它将您的运行时服务替换为设计时服务，这些服务将数据提供给您的视图模型，然后是您的视图。这使得设计时数据非常易于使用。

Caliburn.Micro 有一个惊人的数据绑定设置，它可以为您处理大部分数据绑定脚手架。基本上，它将方法和属性的名称映射到视图中控件的名称并自动装配它们。这可以节省大量代码，并且是一个非常非常好的功能。

Caliburn.Micro 使用“约定优于配置”机制将视图映射到视图模型。MainView 映射到 MainViewModel 等。这意味着您没有配置，您只需要确保您已整理好命名约定。

我使用了这两个框架（用于 WP7 的 Caliburn.Micro 和用于 Windows 8 应用商店应用的 MVVM Light）并且出于不同的原因喜欢它们。MVVM Light 更容易开始使用，但 Caliburn.Micro 可能更强大。我发现它们都足以快速编写中等复杂的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:41:07.170

Caliburn.Micro 以一些魔法为代价为您提供干净的 XAML。MVVM Light 是一个干净简单的框架，易于理解且运行良好。Prism 似乎比 MVVM Light 重一些，而且更面向商业应用程序——它不仅仅是 MVVM。有很多事情需要考虑。选择你已经知道的可以让你专注于添加功能，但是学习一个新的框架肯定是一个很好的学习体验，对未来的选择很有帮助——所以如果你想学习的话，你可以选择以前没有使用过的东西。您也可以编写自己的框架，只包含您需要的内容。我通常会在 roll your own 和 MVVM Light 之间徘徊，因为这是我所知道的，但如果我要构建一个更大的企业应用程序 - Prism 可能更适合这项任务。我没用过Caliburn。Micro，因为不同 MVVM 方法的新颖性对我来说已经消失了，我只想创建应用程序。使用 WinRT，滚动你自己的框架方法比使用任何平台更容易，因为基本项目模板已经为您提供了一些基础，正如我在我的[简约的 MVVM](http://blog.onedevjob.com/2012/08/27/minimalistic-mvvm-for-windows-runtime-xaml-platform-development-with-c/)博客文章。如果您已经尝试过 MVVM 并且只想使用您需要的部分，我会推荐这种方法 - 该框架将随着您的应用程序而增长。如果需要，您可以从其他框架中获取代码片段，或者编写自己需要的模式的实现。

总结

*   如果你想学习 - 尝试一些你以前没有尝试过的东西或者编写你自己的框架
*   如果您想快速创建一个应用程序并且它不是一个庞大的应用程序 - 使用您所知道的或极简主义，除了从模板中获得的内容之外不要使用任何东西
*   如果您正在构建具有许多功能的大型应用程序 - 考虑 Prism 或者首先考虑 Windows Store 是否是适合您的目标平台，因为它似乎更关注简单的进出平板电脑应用程序

# epub - 将 psd 文件添加到 epub

> ID：13412861
> 
> 赞同：0
> 
> 时间：2012-11-16T08:24:33.853
> 
> 标签：epub, ibooks, psd

我有一些 psd 文件需要添加到 ipad 的 epub 中。有没有办法做到这一点？epub 是否支持“.psd”文件？如果是这样，必须在“package.opf”中添加的媒体类型是什么？

我需要添加 psd 文件的原因是我需要没有背景框架或透明框架的图像。我认为不可能在 jpeg 文件和 tiff 文件中获得透明框架。请指教。

提前致谢

维涅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:33:57.690

不，不支持 PSD 文件。JPG、PNG、GIF 或 SVG。而已。

# azure - 覆盖 Azure 移动服务表上的删除操作

> ID：13412863
> 
> 赞同：1
> 
> 时间：2012-11-16T08:24:37.143
> 
> 标签：azure, azure-mobile-services

我想覆盖我的 Azure 移动服务表上的删除操作，使其更像更新而不是真正的删除。我有一个名为的附加列`IsDeleted`，我想将它的值设置`true`为执行删除操作时的值。

我想通了，我需要的是：

*   触发我自己的“更新”内部`del`函数，
*   删除当前`request.execute()`
*   自己准备并发送回复

这意味着我的`del`功能应该是这样的：

```
function del(id, user, request) {
    // execute update query to set 'isDeleted' - true

    // return standard response
    request.respond();
} 
```

如您所见，我缺少功能的第一部分 - 更新部分。你能帮我写吗？我阅读了[移动服务服务器脚本参考](http://msdn.microsoft.com/en-us/library/windowsazure/jj554226.aspx)，但没有关于在服务器脚本函数中进行额外查询的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:45:17.453

基本上有两种方法可以做到这一点 - 使用[表对象](http://msdn.microsoft.com/en-us/library/windowsazure/jj614364.aspx)和使用[mssql 对象](http://msdn.microsoft.com/en-us/library/windowsazure/jj554212.aspx)。链接指向适当的参考。

使用mssql（我没试过，你可能需要更新你的SQL语句）：

```
function del(id, user, request) {
    var sql = 'UPDATE <yourTableName> SET isDeleted = true WHERE id = ?';
    mssql.query(sql, [id], {
        success: function() {
            request.respond(statusCodes.OK);
        }
    });
} 
```

使用表格（同样，仅在记事本中测试过）：

```
function del(id, user, request) {
    var table = tables.getTable('YourTableName');
    table.where({ id: id }).read({
        success: function(items) {
            if (items.length === 0) {
                request.respond(statusCodes.NOT_FOUND);
            } else {
                var item = items[0];
                item.isDeleted = true;
                table.update(item, {
                    success: function() {
                        request.respond(statusCodes.OK, item);
                    }
                });
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:45:37.483

您可能想要查看[用于 SQL Server](https://github.com/WindowsAzure/node-sqlserver)的Node.js 驱动程序。

移动服务的脚本组件使用 node.js。您可能想查看[AzureConf 中](http://channel9.msdn.com/Events/WindowsAzureConf/2012)称为[Javascript 的会话，见云](http://channel9.msdn.com/Events/WindowsAzureConf/2012/B06)

# apache - 相同 IP 地址但不同端口上的相同会话 ID

> ID：13412864
> 
> 赞同：4
> 
> 时间：2012-11-16T08:24:37.507
> 
> 标签：apache, session, port

我在两台不同的计算机上运行我的网站（完全相同的源代码，甚至用户登录详细信息），每台计算机都有自己的 apache。用户可以通过我的端口转发设置访问这两个网站。

例如，10.10.10.10:81 访问计算机 A 上的网站，10.10.10.10:82 访问计算机 B 上的网站。

用户可以毫无问题地访问其中任何一个。直到用户想使用同一个互联网浏览器同时访问它们。

登录计算机 B 上的网站会将他/她从计算机 A 上的网站注销。

为什么会这样？因为相同的 IP 地址会自动生成相同的会话 ID？不同的端口不会有不同的Session ID？如何避免这种情况？手动生成Session ID会怎样？这个问题还有其他解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T03:31:46.687

Cookie 并不特定于某个端口。

这意味着如果在 10.10.10.10: **81**上运行的服务器设置了 cookie sessionId=123455 ，则相同的 cookie 将被发送到在 10.10.10.10: **80**上运行的服务器。它导致您描述的场景

*   用户访问服务器 10.10.10.10: **81**
*   10.10.10.10：81服务器**为该**用户建立会话并设置 cookie。
*   用户登录到服务器，现在可以使用会话浏览。
*   用户然后转到 10.10.10.10:80 **，浏览器发送由****10.10.10.10:81**设置的会话 cookie
***   因为 10.10.10.10:80**对****10.10.10.10:81**上的会话一无所知，它会建立一个新会话并设置新会话 cookie 覆盖旧会话***   新的会话 cookie 仅在 10.10.10.10:80 有效**，因此用户在****10.10.10.10:81**注销****

 ******### 解决方案

*   （首选）为会话 cookie 配置不同的名称或
*   配置服务器在设置会话 cookie 标头时传递端口参数。这将使 cookie 特定于域+端口组合。如果可能，请避免使用此解决方案，因为并非所有浏览器都能正确处理此参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:55:11.997

您没有提供很多信息，但如果使用 cookie 维护会话，并且使用相同的域名来访问两个站点，那么 cookie 将应用于对两个站点的请求。

当用户从站点 A 切换到站点 B（使用相同的浏览器实例）时，会话 cookie 将被发送，但不会与现有会话 ID 匹配 - 因此站点 B 将生成一个新的会话 ID 并设置为“ “会话 cookie。

解决此问题的两种通用方法 - 为两个站点使用两个不同的域名，或以其他方式区分会话 cookie。您可以通过为站点 A 和站点 B 中的会话 cookie 配置不同的名称来做到这一点。这样做的细节取决于用于创建站点 A 和 B 的技术 - 您尚未告诉我们关于。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T07:28:19.743

这是解决它的示例：

```
127.0.0.1:110
session_start();
$_SESSION['ss'] = 'll'; 
echo '<pre>';
var_dump( $_SESSION);

ouput: 
array(1) {
 ["ss"]=>
  string(2) "ll"
}

127.0.0.1:111
session_start(); 
echo '<pre>';
var_dump( $_SESSION);

ouput: 
array(1) {
 ["ss"]=>
  string(2) "ll"
} 
```

更改会话路径后

```
127.0.0.1:110
session_save_path('/tmp/sess');//This line must be wrote before session_start(),
session_start();
$_SESSION['ss'] = 'll'; 
echo '<pre>';
var_dump( $_SESSION);

ouput: 
array(1) {
 ["ss"]=>
  string(2) "ll"
}

127.0.0.1:111
session_start(); 
echo '<pre>';
var_dump( $_SESSION);

ouput: 
array(0) {
 }

 127.0.0.1:111
session_save_path('/tmp/sess');

session_start();
$_SESSION['ss'] = 'll'; 
echo '<pre>';
var_dump( $_SESSION);

ouput: 
array(1) {
 ["ss"]=>
  string(2) "ll"
} 
```******

# java - 调用 Web 服务后 - 为某些属性获取空值

> ID：13412868
> 
> 赞同：-1
> 
> 时间：2012-11-16T08:25:16.530
> 
> 标签：java, web-services, cxf

我们正在使用 CXF 网络服务。

设想：

一个服务电话正在恢复`List<NoteDTO>`。数据在那里，`NoteDTO`但在调用返回 List 的 Web 服务方法后，我们在`NoteDTO`类中看到空值。

日志中也没有任何类型的异常。

我的理解是 Web 服务中存在转换问题。

```
public class NoteDTO {

    /** The text of the note. */
    private String text;

    /** The date the note was created. */
    private Date created;

    /** The user who created the note. */
    private UserDTO createdBy;

    /** The date the note was last modified. */
    private Date modified;

    /** The last user to modify the note. */
    private UserDTO modifiedBy;

    private String wfStep;  

    public void setWfStep(String wfStep) {
        this.wfStep = wfStep;
    }

    /**
     * Default constructor for JAXB.
     */
    public NoteDTO() {
    }

    /**
     * Constructor taking basic values.
     * @param text The text of the note.
     * @param created The date created.
     * @param createdBy The user who create the note.
     */
    public NoteDTO(String text, Date created, UserDTO createdBy) {
        this.text = text;
        this.created = created;
        this.createdBy = createdBy;     
    }

    /**
     * Getter for the text of the note.
     * @return The text of the note.
     */
    public String getText() {
        return text;
    }

    /**
     * Setter for the text of the note.
     * @param text The text of the note.
     */
    public void setText(String text) {
        this.text = text;
    }

    /**
     * Getter for the created date.
     * @return The created date.
     */
    public Date getCreated() {
        return created;
    }

    /**
     * Setter for the created date.
     * @param created The create date.
     */
    public void setCreated(Date created) {
        this.created = created;
    }

    /**
     * Getter for the modified date.
     * @return The modified date.
     */
    public Date getModified() {
        return modified;
    }

    /**
     * Setter for the modified date.
     * @param modified The modified date.
     */
    public void setModified(Date modified) {
        this.modified = modified;
    }

    /**
     * Getter for the created by user.
     * @return The created by user.
     */
    public UserDTO getCreatedBy() {
        return createdBy;
    }

    /**
     * Setter for the created by user.
     * @param createdBy The created by user.
     */
    public void setCreatedBy(UserDTO createdBy) {
        this.createdBy = createdBy;
    }

    /**
     * Getter for the modified by user.
     * @return The modified by user.
     */
    public UserDTO getModifiedBy() {
        return modifiedBy;
    }

    /**
     * Setter for the modified by user.
     * @param modifiedBy The modified by user.
     */
    public void setModifiedBy(UserDTO modifiedBy) {
        this.modifiedBy = modifiedBy;
    }

    /**
     * Getter for the workflow step.
     * @return The workflow step.
     */
    public String getWfstep() {
        return this.wfStep;
    } 
```

我有一个网络服务课程

```
@WebService
public interface NotesService {

    /**
     * Get server notes for a specific workflow instance
     * @param workflowInstanceEntitityId Workflow Instance Entity ID
     * @return A list of notes.
     */
    List<NoteDTO> getNotesForWorkflowInstance(String bundleName, String workflowInstanceName);
} 
```

数据在 NoteDTO 的另一边，但在调用后如下所示

```
notes = notesService.getNotesForWorkflowInstance(bundleName, workflowInstanceName); 
```

我将 wfStep 属性值设为 null

有什么想法吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:54:29.057

可能**@WebMethod**注释会有所帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:24:42.243

您的类上没有适当的注释，所以我假设您使用的是 Java-First 方法。

我绝对确定您`NoteDTO`不是您的类型的`XSD`模式。`WSDL`如果您`WSDL`使用 java 代码生成，`CXF`您需要做的是在 Web 服务的对象上添加适当的注释。所以你的`NoteDTO`班级应该是这样的：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "NoteDTO", propOrder = {
    "text",
    "created",
    "createdBy",
    "modified",
    "modifiedBy",
    "wfStep"
})
public class NoteDTO {

    @XmlElement(name = "text")
    private String text;

    @XmlElement(name = "created")
    private Date created;

    @XmlElement(name = "createdBy")
    private UserDTO createdBy;

    @XmlElement(name = "modified")
    private Date modified;

    @XmlElement(name = "modifiedBy")
    private UserDTO modifiedBy;

    @XmlElement(name = "wfStep")
    private String wfStep;  

} 
```

与`UserDTO`您的 Web 服务调用中使用的任何其他对象相同。然后你的界面应该是这样的：

```
@WebService(targetNamespace = "http://your.target.namespace/", name = "NotesService")
@XmlSeeAlso({ObjectFactory.class})
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
public interface NotesService {

    @WebResult(name = "getNotesForWorkflowInstanceResponse", targetNamespace = "http://your.target.namespace/")
    @WebMethod(operationName = "getNotesForWorkflowInstance", action = "http://your.target.namespace/getNotesForWorkflowInstance")
    public List<NoteDTO> getNotesForWorkflowInstance(
        @WebParam(name = "bundleName", targetNamespace = "http://your.target.namespace/") String bundleName,
        @WebParam(name = "workflowInstanceName", targetNamespace = "http://your.target.namespace/") String workflowInstanceName        
    );

} 
```

未经测试，只是手动添加了所有内容。阅读有关 Java-First 方法的更多信息，您会发现自己做错了什么。这只是一个开始的提示。

# perl - Perl 中的符号 - ||= 运算符做什么？

> ID：13412882
> 
> 赞同：3
> 
> 时间：2012-11-16T08:26:21.730
> 
> 标签：perl, notation

我碰巧遇到了一个具有以下语法的 perl 代码。

```
sub new{
my ($class, $value)=@_;
$lobby ||= bless{
e=>undef;},$class
} 
```

语法`||=`是什么意思？

我未能将其作为关键字进行谷歌搜索，并且在 perldoc 中找不到类似的语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T08:29:32.813

您将在[perlop](http://perldoc.perl.org/perlop.html)中找到运算符的含义。

现在它的作用：`$lhs ||= $rhs`相当于`$lhs = $lhs || $rhs`. 这意味着在 Perlish 意义上`$rhs`分配给`$lhs`if为 false 。`$lhs`这可以是 if `$lhs`is `undef`，如果是空字符串，则为 0 的数字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T08:29:14.040

```
EXPR1 ||= EXPR2; 
```

是相同的

```
EXPR1 = EXPR1 || EXPR2; 
```

除了`EXPR1`只评估一次。这是设置默认值的便捷方式。例如：

```
sub foo {
   my %args = @_;
   $args{host} ||= "localhost";  # Provide a default host name if none provided.
   ...
} 
```

在您的情况下，您似乎有一个单例构造函数。第一次`new`调用它时，它将创建一个新对象。在后续调用中，它将返回先前创建的对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T08:29:06.047

`x ||= y`是缩写`x = x || y`

请参阅[perlop 文档](http://perldoc.perl.org/perlop.html#Assignment-Operators)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T09:22:46.090

为了完成这一点，在 perl 的非古代版本（自 5.10 起）中，您可以使用**defined-or 运算符`//`**而不是 truth-or `||`，它在使用它来设置默认值时具有更好的语义：

```
$foo ||= 42;    # $foo = $foo || 42; 
```

例如将这个变量的值设置为 42 *iff* `$foo`在 perlish 意义上是假的。问题是，该运算符无法区分已定义但为假的值和未定义的值，因为两者都是假的。

```
$foo //= 42;    # $foo = $foo // 42; 
```

这行设置`$foo`s 值，*如果*它之前未定义，这是我们经常想要的。它也很短路，就像`||`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T08:29:54.087

```
$x ||= $y; 
```

和

```
$x = $x || $y; 
```

# java - 如何将单独 jar 中的 JPA 实体聚合到一个持久性单元中？

> ID：13412886
> 
> 赞同：3
> 
> 时间：2012-11-16T08:26:33.737
> 
> 标签：java, jpa

现在在我的应用程序中，我有一个包含所有 JPA 实体的项目。我想按照功能线模块化我的应用程序：

*   Feature1.jar - 包含功能 1、业务逻辑、ui 逻辑等的所有 JPA 实体
*   Feature2.jar - 包含功能 2、业务逻辑等的所有 JPA 实体

如何配置 JPA 2.0 以将 Feature1.jar 和 Feature2.jar 中的 JPA 实体放入同一个持久性单元中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:07:17.920

`<jar-file>`在持久性单元中 使用标签

```
<jar-file>Feature1.jar</jar>
<jar-file>Feature2.jar</jar> 
```

耳朵应该看起来像

```
.ear 
+- /lib 
|  +- persistence.jar
|     +- /META-INF 
|        +- persistence.xml 
+- .war file
+- Feature1.jar
+- Feature2.jar 
```

# java - 警告：StandardWrapperValve [jsp]：PWC1406：servlet jsp 的 Servlet.service() 抛出异常 java.lang.NullPointerException

> ID：13412888
> 
> 赞同：2
> 
> 时间：2012-11-16T08:26:55.923
> 
> 标签：java, jsp, javabeans

我不断收到这个警告，在一个非常简单的 JSP/Bean 页面上，我正在练习考试，但我无法通过这个。

有人可以指出我的愚蠢吗？

```
<html>
    <head>

        <title>JSP Page</title>
    </head>
    <h1>Enter Details!</h1>
    <body>
        <form action="Display.jsp" method="post">

            <center>
                Enter Name :<input type="text" name="Name"/><br/>
                Etv :<input type="radio" name="Channel" value="Etv" /><br/>
                Mnet :<input type="radio" name="Channel" value="Mnet" /><br/>
                Mtv :<input type="radio" name="Channel" value="Mtv" /><br/>
                FTV :<input type="radio" name="Channel" value="FTV" /><br/>
                Blue :<input type="checkbox" name="Blue" value="1" /><br/>
                Yellow :<input type="checkbox" name="Yellow" value="1" /><br/>
                Green :<input type="checkbox" name="Green" value="1" /><br/>
                Red :<input type="checkbox" name="Red" value="1" /><br/>
                <br/>
                <br/>

                <input type="submit" value="Submit" />
            </center>
        </form>

    </body>
</html> 
```

我的Javabean：

```
package Beans;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.beans.*;
import java.io.Serializable;

/**
 *
 * @author Ross
 */
public class NewBean implements Serializable {

    private String Name;
    private String Channel;
    private int Blue;
    private int Yellow;
    private int Green;
    private int Red ;

    public NewBean() {

    }

     public NewBean(String tName,String tChannel,int tBlue,int tYellow,int tGreen,int tRed) {

    Name=tName;
    Channel=tChannel;
    Blue=tBlue;
    Yellow=tYellow;
    Green=tGreen;
    Red=tRed;
    }

    public String getName(){
      return this.Name;
    }
    public String getChannel(){
      return this.Channel;
    }
    public int getBlue(){
      return this.Blue;
    }
    public int getYellow(){
      return this.Yellow;
    }
    public int getGreen(){
      return this.Green;
    }
    public int getRed(){
      return this.Red;
    }
    public void setName(String tName){
      this.Name = tName;
    }
    public void setChannel(String tChannel){
      this.Channel = tChannel;
    }
    public void setBlue(int tBlue){
      this.Blue = tBlue;
    }
    public void setYellow(int tYellow){
      this.Yellow = tYellow;
    }
    public void setGreen(int tGreen){
      this.Green = tGreen;
    }
    public void setRed(int tRed){
      this.Red = tRed;
    }
} 
```

我的 JSP 显示 javabean：

```
<html>
    <head>

        <title>Display</title>
    </head>
    <body>
        <h1>Result</h1>
        <center>
            <jsp:useBean id="NewBean"class="Beans.NewBean">

                <jsp:setProperty name="index" property="Name" param="Name"/>
                <jsp:setProperty name="index" property="Channel" param="Channel"/>
                <jsp:setProperty name="index" property="Blue" param="Blue"/>
                <jsp:setProperty name="index" property="Yellow" param="Yellow"/>
                <jsp:setProperty name="index" property="Green" param="Green"/>
                <jsp:setProperty name="index" property="Red" param="Red"/>
            </jsp:useBean>
            <b>Displayed.</b>
             <jsp:getProperty name="index" property="Name"/>
             <jsp:getProperty name="index" property="Channel"/>
             <jsp:getProperty name="index" property="Blue"/>
             <jsp:getProperty name="index" property="Yellow"/>
             <jsp:getProperty name="index" property="Green"/>
             <jsp:getProperty name="index" property="Red"/>
        </center>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:57:37.820

您应该遵循变量的 java 命名约定（驼峰式）。IE

```
//private String Name;
private String name; 
```

和

```
public void setName(String tName){
  //this.Name = tName;
  this.name = tName;
} 
```

应由小写属性“名称”引用：

```
<!-- jsp:setProperty name="index" property="Name" param="Name"/ -->
<jsp:setProperty name="index" property="name" param="Name"/> 
```

# c# - 字符串替换无法正常工作

> ID：13412889
> 
> 赞同：-1
> 
> 时间：2012-11-16T08:27:03.550
> 
> 标签：c#, string

这是我应该返回已解析文档的方法。

```
public string GetParsedDocument(string Document)
{
   Document.Replace("{{tag}}", ParseMarkup(Tag.Text));
   return Document
} 
```

基本上我解析文档并将其写入这样的文件：

```
System.IO.File.WriteAllText(SaveDialog.FileName, GetParsedDocument(TestProgram.Properties.Resources.Document)); 
```

然而，当我打开文件时，我的更改都不在那里。这是怎么回事？我已经尝试逐字制作字符串，并且我已经测试过它是否有任何其他组件不起作用；但事实并非如此。字符串替换不起作用。或者它没有正确返回。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:28:25.343

字符串是不可变的，因此它的所有方法都返回新字符串作为结果。你应该这样：

```
string parsedDocument = Document.Replace("{{tag}}", ParseMarkup(Tag.Text));
return parsedDocument; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T08:29:33.150

`Replace`不能就地工作，但它是一个返回已更改字符串的函数

```
return Document.Replace("{{tag}}", ParseMarkup(Tag.Text)); 
```

现在您正在获得更改后的版本。

# regex - 如何捕获所有 url 变量

> ID：13412891
> 
> 赞同：0
> 
> 时间：2012-11-16T08:27:12.583
> 
> 标签：regex, .htaccess, mod-rewrite

我的 .htaccess 文件：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^((?!public).*)/([a-zA-Z0-9-]*) index.php?c=$1&a=$2 [NC] 
```

我如何修改它以使其可以支持更多变量，例如：`/user/login&d=example&e=example2`，现在它只是忽略之后的部分`/user/login...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:31:01.453

你可以添加这个：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^((?!public).*)/([a-zA-Z0-9-]*) index.php?c=$1&a=$2&%{QUERY_STRING} [NC] 
```

注意`&%{QUERY_STRING}`，它将查询字符串的其余部分添加到 index.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:30:32.727

[看看这个教程](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)应该可以解决你的问题

# ruby-on-rails-3 - 覆盖设计密码控制器

> ID：13412903
> 
> 赞同：6
> 
> 时间：2012-11-16T08:27:52.380
> 
> 标签：ruby-on-rails-3, inheritance, devise, controller

我想禁用

```
 def create
    self.resource = resource_class.send_reset_password_instructions(resource_params)

    if successfully_sent?(resource)
      respond_with({}, :location => after_sending_reset_password_instructions_path_for(resource_name))
    else
      respond_with(resource)
    end
  end 
```

所以在发送重置密码后它根本不会重定向

因此，我在 app/controllers/users/ 下创建了一个名为 passwords_controller.rb 的新文件

看起来像这样

```
class User::PasswordsController < Devise::PasswordsController

  def create
    self.resource = resource_class.send_reset_password_instructions(resource_params)

    if successfully_sent?(resource)
      flash[:notice] = "sent password"
    else
      respond_with(resource)
    end
  end

  def new
    super
  end

  def update
    super       
  end

  def edit
    super   
  end
end 
```

并更改了我的路线

```
 devise_for :users, :controllers => { :invitations => 'users/invitations', :passwords => 'users/passwords' } 
```

我也有 devise_invite gem..

当我单击忘记密码的链接时，我收到此错误

```
Started GET "/users/password/new" for 127.0.0.1 at 2012-11-16 10:21:07 +0200

ActionController::RoutingError (uninitialized constant Users::PasswordsController): 
```

我`rake routes`是

```
 user_password POST   /users/password(.:format)                  users/passwords#create
          new_user_password GET    /users/password/new(.:format)              users/passwords#new
         edit_user_password GET    /users/password/edit(.:format)             users/passwords#edit
                            PUT    /users/password(.:format)                  users/passwords#update 
```

视图中的链接是

```
<%= link_to "Forgot your password?", new_password_path(User) , :class => "control-group", :style => "position: absolute; bottom: 0", :id=>"forgotpass" %> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-10T08:52:24.767

密码控制器是从设计密码控制器扩展而来的。因此，使用设计密码控制器扩展密码控制器。

```
class PasswordsController < Devise::PasswordsController
  ......................

end 
```

使用设计更改密码控制器的路线

```
devise_for :users, :controllers => { :passwords => "passwords" } 
```

路线将是这样的：-

```
user_password       POST   /password(.:format)       Passwords#create

new_user_password   GET    /password/new(.:format)   Passwords#new

edit_user_password  GET    /password/edit(.:format)  Passwords#edit
                    PUT    /password(.:format)       Passwords#update 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-14T17:43:28.097

如果您想保留命名空间，请尝试：

```
# routes.rb
devise_for :users, controllers: { passwords: 'users/passwords' }

# users/passwords_controller.rb
class Users::PasswordsController < Devise::PasswordsController
  ...
end 
```

# apache-flex - Flex 移除子级

> ID：13412905
> 
> 赞同：0
> 
> 时间：2012-11-16T08:28:00.467
> 
> 标签：apache-flex

我有一个 ID 为“panel”的面板，在这个面板中我有一个 ID 为“scroller”的滚动条，在这个滚动条中我有一个 ID 为“chart”的图表

我想删除我尝试过的图表

```
panel.removeChild(chart); 
```

我收到此错误：指定的 displayObject 必须是调用者的孩子。

我试过了

```
scroller.removeChild(chart); 
```

我收到另一个错误：尝试 removeElement() 并且删除元素不起作用

如何删除此图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:01:52.987

尝试从 scroller.viewport 中删除。请发布确切的代码，以便我们更好地帮助您。

# ios - 创建一个捕捉点击但对所有其他手势透明的 UIView

> ID：13412906
> 
> 赞同：8
> 
> 时间：2012-11-16T08:28:09.540
> 
> 标签：ios, xcode, user-interface, uiscrollview, gestures

我想实现以下目标。

场景：iOS 键盘在用户输入特定文本字段时显示在屏幕上。用户可以点击键盘和文本字段之外的任何地方来关闭键盘（无需激活任何可见的按钮）。此外，用户可以在键盘外*拖动*并观察一些可滚动视图排列的正常拖动行为。

从概念上讲，我`UIView`在大部分屏幕上放置了一个“封面”，其行为如下：

1.  如果用户点击封面，那么我会捕获该点击（以便我可以，例如，关闭键盘）。这很容易通过在`UIView`子类中拦截触摸事件或使用轻击手势识别器来实现。

2.  如果用户在封面上拖动，则封面*忽略*或*转发*这些触摸；这些被下面的层接收，就像没有盖子一样。

所以：用户应该能够滚动封面下方的内容，但不能点击封面下方的内容。在键盘和文本字段的“外部”轻按应该会关闭键盘（和封面），但不应激活任何东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:45:08.437

以通常的方式添加点击手势：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction:)];
[self.view addGestureRecognizer:tapGesture]; 
```

但是您可能正在寻找的是：

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
    {    
        return YES;
    } 
```

文档说：当通过gestureRecognizer 或otherGestureRecognizer 识别手势会阻止其他手势识别器识别其手势时调用此方法。（[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/index.html#//apple_ref/occ/intf/UIGestureRecognizerDelegate](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/index.html#//apple_ref/occ/intf/UIGestureRecognizerDelegate)）

这样，您可以确定它是完全透明的，并且没有什么会阻止您的识别器被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T17:15:17.367

转发它收到的所有触摸的自定义视图：

```
class CustomView: UIView {

    override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {

        var hitView = super.hitTest(point, withEvent: event)

        if hitView == self {
            return nil
        }

        return hitView
    }    
} 
```

从那里您可以采用不同的方式来使用轻按手势。要么观察 UIEvent 的触摸，要么使用手势识别器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:32:09.417

**1：在视图中添加点击手势识别器：**

```
 //Adding tap gesture
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:tapGesture]; 
```

**2：在handleTapGesture中你resignFirstResponder的键盘**

```
- (void)handleTapGesture:(UITapGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateRecognized) {
       //Resign first responder for keyboard here
    }
} 
```

对上面的答案进行了详细说明。UIGestureRecognizerStateRecognized 确保它是被识别的单个选项卡事件。

这是您追求的功能吗？

# java - ArcMenu mainImage 我需要在屏幕底部。OnMeasure 不会让它出现在屏幕底部

> ID：13412908
> 
> 赞同：8
> 
> 时间：2012-11-16T08:28:19.533
> 
> 标签：java, android

我试图将 mainImg 带到屏幕底部。

```
 /*
 * Copyright (C) 2012 Capricorn
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ 
```

如果`ArcLayout` `OnMeasure`我将大小更改为 0，它会下降，但动画会消失。如何更改`OnMeasure`以使img下降到屏幕底部并且应该向上取高度？请帮忙！

```
package com.example.splashscreen;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.AnimationSet;
import android.view.animation.Interpolator;
import android.view.animation.LinearInterpolator;
import android.view.animation.OvershootInterpolator;
import android.view.animation.RotateAnimation;
import android.view.animation.Animation.AnimationListener;

/**
 * A Layout that arranges its children around its center. The arc can be set by
 * calling {@link #setArc(float, float) setArc()}. You can override the method
 * {@link #onMeasure(int, int) onMeasure()}, otherwise it is always
 * WRAP_CONTENT.
 * 
 * @author Capricorn
 * 
 */
public class ArcLayout extends ViewGroup {
    /**
     * children will be set the same size.
     */
    private int mChildSize;

    private int mChildPadding = 5;

    private int mLayoutPadding = 10;

    public static final float DEFAULT_FROM_DEGREES = 270.0f;

    public static final float DEFAULT_TO_DEGREES = 360.0f;

    private float mFromDegrees = DEFAULT_FROM_DEGREES;

    private float mToDegrees = DEFAULT_TO_DEGREES;

    private static final int MIN_RADIUS = 150;

    /* the distance between the layout's center and any child's center */
    private int mRadius;

    private boolean mExpanded = false;

    public ArcLayout(Context context) {
        super(context);
    }

    public ArcLayout(Context context, AttributeSet attrs) {
        super(context, attrs);

        if (attrs != null) {
            TypedArray a = getContext().obtainStyledAttributes(attrs, R.styleable.ArcLayout, 0, 0);
            mFromDegrees = a.getFloat(R.styleable.ArcLayout_fromDegrees, DEFAULT_FROM_DEGREES);
            mToDegrees = a.getFloat(R.styleable.ArcLayout_toDegrees, DEFAULT_TO_DEGREES);
            mChildSize = Math.max(a.getDimensionPixelSize(R.styleable.ArcLayout_childSize, 0), 0);

            a.recycle();
        }
    }

    private static int computeRadius(final float arcDegrees, final int childCount, final int childSize,
            final int childPadding, final int minRadius) {
        if (childCount < 2) {
            return minRadius;
        }

        final float perDegrees = arcDegrees / (childCount - 1);
        final float perHalfDegrees = perDegrees / 2;
        final int perSize = childSize + childPadding;

        final int radius = (int) ((perSize / 2) / Math.sin(Math.toRadians(perHalfDegrees)));

        return Math.max(radius, minRadius);
    }

    private static Rect computeChildFrame(final int centerX, final int centerY, final int radius, final float degrees,
            final int size) {

        final double childCenterX = centerX + radius * Math.cos(Math.toRadians(degrees));
        final double childCenterY = centerY + radius * Math.sin(Math.toRadians(degrees));

        return new Rect((int) (childCenterX - size / 2), (int) (childCenterY),
                (int) (childCenterX + size / 2), (int) (childCenterY + size ));
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        final int radius = mRadius = computeRadius(Math.abs(mToDegrees - mFromDegrees), getChildCount(), mChildSize,
                mChildPadding, MIN_RADIUS);
        final int size = radius * 2 + mChildSize + mChildPadding + mLayoutPadding * 2;

        setMeasuredDimension(size, size);

        final int count = getChildCount();
        for (int i = 0; i < count; i++) {
            getChildAt(i).measure(MeasureSpec.makeMeasureSpec(mChildSize, MeasureSpec.EXACTLY),
                    MeasureSpec.makeMeasureSpec(mChildSize, MeasureSpec.EXACTLY));
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        final int centerX = getWidth() / 2;
        final int centerY = getHeight() / 2;
        final int radius = mExpanded ? mRadius : 0;

        final int childCount = getChildCount();
        final float perDegrees = (mToDegrees - mFromDegrees) / (childCount - 1);

        float degrees = mFromDegrees;
        for (int i = 0; i < childCount; i++) {
            Rect frame = computeChildFrame(centerX, centerY, radius, degrees, mChildSize);
            degrees += perDegrees;
            getChildAt(i).layout(frame.left, frame.top, frame.right, frame.bottom);
        }
    }

    /**
     * refers to {@link LayoutAnimationController#getDelayForView(View view)}
     */
    private static long computeStartOffset(final int childCount, final boolean expanded, final int index,
            final float delayPercent, final long duration, Interpolator interpolator) {
        final float delay = delayPercent * duration;
        final long viewDelay = (long) (getTransformedIndex(expanded, childCount, index) * delay);
        final float totalDelay = delay * childCount;

        float normalizedDelay = viewDelay / totalDelay;
        normalizedDelay = interpolator.getInterpolation(normalizedDelay);

        return (long) (normalizedDelay * totalDelay);
    }

    private static int getTransformedIndex(final boolean expanded, final int count, final int index) {
        if (expanded) {
            return count - 1 - index;
        }

        return index;
    }

    private static Animation createExpandAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta,
            long startOffset, long duration, Interpolator interpolator) {
        Animation animation = new RotateAndTranslateAnimation(0, toXDelta, 0, toYDelta, 0, 720);
        animation.setStartOffset(startOffset);
        animation.setDuration(duration);
        animation.setInterpolator(interpolator);
        animation.setFillAfter(true);

        return animation;
    }

    private static Animation createShrinkAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta,
            long startOffset, long duration, Interpolator interpolator) {
        AnimationSet animationSet = new AnimationSet(false);
        animationSet.setFillAfter(true);

        final long preDuration = duration / 2;
        Animation rotateAnimation = new RotateAnimation(0, 360, Animation.RELATIVE_TO_SELF, 0.5f,
                Animation.RELATIVE_TO_SELF, 0.5f);
        rotateAnimation.setStartOffset(startOffset);
        rotateAnimation.setDuration(preDuration);
        rotateAnimation.setInterpolator(new LinearInterpolator());
        rotateAnimation.setFillAfter(true);

        animationSet.addAnimation(rotateAnimation);

        Animation translateAnimation = new RotateAndTranslateAnimation(0, toXDelta, 0, toYDelta, 360, 720);
        translateAnimation.setStartOffset(startOffset + preDuration);
        translateAnimation.setDuration(duration - preDuration);
        translateAnimation.setInterpolator(interpolator);
        translateAnimation.setFillAfter(true);

        animationSet.addAnimation(translateAnimation);

        return animationSet;
    }

    private void bindChildAnimation(final View child, final int index, final long duration) {
        final boolean expanded = mExpanded;
        final int centerX = getWidth() / 2;
        final int centerY = getHeight() / 2;
        final int radius = expanded ? 0 : mRadius;

        final int childCount = getChildCount();
        final float perDegrees = (mToDegrees - mFromDegrees) / (childCount - 1);
        Rect frame = computeChildFrame(centerX, centerY, radius, mFromDegrees + index * perDegrees, mChildSize);

        final int toXDelta = frame.left - child.getLeft();
        final int toYDelta = frame.top - child.getTop();

        Interpolator interpolator = mExpanded ? new AccelerateInterpolator() : new OvershootInterpolator(1.5f);
        final long startOffset = computeStartOffset(childCount, mExpanded, index, 0.1f, duration, interpolator);

        Animation animation = mExpanded ? createShrinkAnimation(0, toXDelta, 0, toYDelta, startOffset, duration,
                interpolator) : createExpandAnimation(0, toXDelta, 0, toYDelta, startOffset, duration, interpolator);

        final boolean isLast = getTransformedIndex(expanded, childCount, index) == childCount - 1;
        animation.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                if (isLast) {
                    postDelayed(new Runnable() {

                        @Override
                        public void run() {
                            onAllAnimationsEnd();
                        }
                    }, 0);
                }
            }
        });

        child.setAnimation(animation);
    }

    public boolean isExpanded() {
        return mExpanded;
    }

    public void setArc(float fromDegrees, float toDegrees) {
        if (mFromDegrees == fromDegrees && mToDegrees == toDegrees) {
            return;
        }

        mFromDegrees = fromDegrees;
        mToDegrees = toDegrees;

        requestLayout();
    }

    public void setChildSize(int size) {
        if (mChildSize == size || size < 0) {
            return;
        }

        mChildSize = size;

        requestLayout();
    }

    /**
     * switch between expansion and shrinkage
     * 
     * @param showAnimation
     */
    public void switchState(final boolean showAnimation) {
        if (showAnimation) {
            final int childCount = getChildCount();
            for (int i = 0; i < childCount; i++) {
                bindChildAnimation(getChildAt(i), i, 300);
            }
        }

        mExpanded = !mExpanded;

        if (!showAnimation) {
            requestLayout();
        }

        invalidate();
    }

    private void onAllAnimationsEnd() {
        final int childCount = getChildCount();
        for (int i = 0; i < childCount; i++) {
            getChildAt(i).clearAnimation();
        }

        requestLayout();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T10:24:23.877

正如您在以下[daCapricorn](https://github.com/daCapricorn/ArcMenu)对报告的类似问题的评论中看到的那样。

他详细介绍了可能的解决方案：

在 xml 中设置 android:layout_alignParentBottom="true" 和 android:layout_alignParentLeft="true" 并以编程方式计算 marginBottom 和 marginLeft（它们应该是负数）。marginBottom =（ArcMenu 的高度 centerIcon 的高度）/2﻿，marginLeft =（ArcMenu 的宽度 - centerIcon 的宽度）/2。

这里的主要思想是将所需的边距设置为负值（我的情况是右下角）。我设法通过计算所需的边距来解决这个问题，marginBottom = - ((ArcMenu 的高度 centerIcon 的高度)/2﻿)，marginRight = -((ArcMenu 的宽度 - centerIcon 的宽度)/2)。

我没有在库代码的 ArcLayout.java 的 onMeasure 内部执行此操作，而是在我的活动中执行了以下操作。

在我的活动布局中，根据需要设置 layout_alignParent：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:arc="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.capricorn.ArcMenu
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:id="@+id/arc_menu"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         arc:childSize="@dimen/menuChildSize"
         arc:fromDegrees="180"
         arc:toDegrees="270" />

</RelativeLayout> 
```

在我的活动中：

```
ArcMenu arcMenu; // the arc menu
FrameLayout controlLayout; // the frame layout of the control from library
int arcWidth, arcHeight; // arc menu measurments to be calculated , required for margins 
int controlLayoutWidth, controlLayoutHeight; // controlLayout measurments to be calculated , required for margins 
boolean isArcMeasureReady, isControlLayoutMeasureReady; // determine if measurements are ready if so apply the margins with the following runnable
Runnable runnable = new Runnable() {

    @Override
    public void run() {
        if (isArcMeasureReady && isControlLayoutMeasureReady) {
            RelativeLayout.LayoutParams params = (LayoutParams) arcMenu // your container LayoutParmas , mine is RelativeLayout
                    .getLayoutParams(); 
            int rightMargin = -((arcWidth - crossWidth) / 2);
            int bottomMargin = -((arcHeight - crossHeight) / 2);
            params.setMargins(0, 0, rightMargin, bottomMargin);
            arcMenu.setLayoutParams(params);
        }
    }
}; 
```

我的 onCreate ：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    isArcMeasureReady = isControlLayoutMeasureReady = false;
    controlLayout = (FrameLayout) findViewById(com.capricorn.R.id.control_layout);
    ... 

    ViewTreeObserver viewTreeObserverControlLayout = controlLayout.getViewTreeObserver();
    if (viewTreeObserverControlLayout.isAlive()) {
        viewTreeObserverControlLayout
                .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        controlLayout.getViewTreeObserver()
                                .removeGlobalOnLayoutListener(this);
                        controlLayoutWidth = controlLayout.getWidth();
                        controlLayoutHeight = controlLayout.getHeight();
                        isControlLayoutMeasureReady = true;

                        runOnUiThread(runnable);

                    }
                });
    }

    ViewTreeObserver viewTreeObserver = arcMenu.getViewTreeObserver();
    if (viewTreeObserver.isAlive()) {
        viewTreeObserver
                .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        arcMenu.getViewTreeObserver()
                                .removeGlobalOnLayoutListener(this);
                        arcWidth = arcMenu.getWidth();
                        arcHeight = arcMenu.getHeight();
                        isArcMeasureReady = true;

                        runOnUiThread(runnable);
                    }
                });
    } 
```

我在多个设备上对此进行了测试，效果很好，因为计算是动态的。

希望这有助于享受这个家伙[daCapricorn的伟大小部件](https://github.com/daCapricorn)

# python - set 函数的返回值是如何组织的？

> ID：13412913
> 
> 赞同：0
> 
> 时间：2012-11-16T08:28:36.120
> 
> 标签：python, set

这是我的代码：我使用 set() 并返回 [3, 14, 6]

```
items = [3, 6, 3, 3, 14]
set(items)
>>> set([3,14,6]) 
```

我的问题是 set 函数如何组织它的值输出。如果我们考虑一下，3 是第一个数字，6 是列表中的第二个数字，那么它应该输出 [3,6,14] 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:29:47.617

集合是无序的。从[文档](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)中：

> 作为无序集合，集合不记录元素位置或插入顺序。

像字典一样，排序是基于[存储键的哈希值](http://wiki.python.org/moin/DictionaryKeys)。您不能依靠这种明显的顺序来保持稳定。

如果您对底层数据模型感兴趣，底层数据结构称为[Hash Table](http://en.wikipedia.org/wiki/Hash_table)，但在集合中只存储键，值留空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:01:06.453

@Martijn 为您提供了原因，但还有一些可能有用的信息：

您可以使用`dict`带有值的键和原始列表中的位置作为值：

```
d = dict( (val, idx) for idx, val in enumerate(items) )
# or {val:idx for idx, val in enumerate(items)} in 2.7+
print d.keys() # unique values: [3, 14, 6]
print sorted(d) # unique values in order [3, 6, 14]
print sorted(d, key=d.get) # unique values in original order (based on last occurence of key [6, 3, 14] 
```

根据第一次出现，获得原始订单需要做更多的工作：

```
d = {}
for idx, val in enumerate(items):
    d.setdefault(val, idx) 
```

# javascript - 滚动到具有动态 ID 的 UL 列表中的特定元素

> ID：13412918
> 
> 赞同：3
> 
> 时间：2012-11-16T08:29:07.637
> 
> 标签：javascript, jquery, cordova, scroll

我阅读了**[使用 jQuery 滚动到特定元素](https://stackoverflow.com/questions/3231583/scroll-to-a-particular-element-w-jquery)**的问题，在问题中，原始 HTML 代码已经具有段落元素的 ID。但是，就我而言，我动态生成元素（列表元素）并在运行时创建 ID。使用或不使用 jQuery，我将如何滚动到该特定元素？

要提供有关我的问题的更多详细信息：

我正在创建一个 phonegap 项目以获取 iPhone 中的联系人列表并在 div 中显示滚动列表（我使用 iscroll 插件）。我对名字 AE、FJ、KO、PT、UZ 进行分类并将它们分组。如果用户在侧面触摸 FJ（如您在 iPhone 联系人应用程序中找到的那样），则 div 应滚动到属于组 FJ 的第一个联系人。

```
<div id ="tablediv">
    <div id="scroller"></div>
</div>

<div id="sorter">
    <span id="gr1">A-E</span>
    <span id="gr2">F-J</span>
</div> 
```

Javascript：

```
var g1 = ['a','b','c','d','e'];  //contact's first name starting with these chars
var g2 = ['f','g','h','i','j'];  //contact's first name starting with these chars
var idg1=null, idg2=null; // first id of the contact which was in g1, g2

//Array is an array of objects
//example: array = [ {'fname':'x','lname':'y','number':'123'},{..},{..}];

function generateTable(array) {
    gpDiv = document.getElementById("scroller");
    pDiv = document.createElement("ul");
    pDiv.id = "thelist";
    for(var i=0;i<array.length;i++) {
        cDiv = document.createElement("li");
        cDiv.id = 'cd'+i; //id created dynamically
        cDiv.textContent = array[i].fname+"\u000a"+array[i].lname;
        var ch0 = array[i].fname[0].toLowerCase();
        if($.inArray(ch0,g1)!=-1 && idg1==null) {
            idg1 = cDiv.id;
            document.getElementById('gr1').addEventListener('click',function(){goToG1(idg1);},false);
        }
        if($.inArray(ch0,g2)!=-1 && idg2==null) {
            idg2 = cDiv.id;
            document.getElementById('gr2').addEventListener('click',function(){goToG2(idg2);},false);
        }  
        pDiv.appendChild(cDiv);
    }
    gpDiv.appendChild(pDiv);
}

function goToG1(id) {
    $('#tablediv').scrollTop($('#'+id).offset().top);
}

function goToG2(id) {
    $('#tablediv').scrollTop($('#'+id).offset().top);
} 
```

上面的代码不起作用，因为我认为由于 id 是在运行时分配的，所以我无法滚动到该特定元素。请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T08:51:51.380

嗯，我需要做的就是这个。

```
function goToG1(id) {
    document.getElementById(id).scrollIntoView();
} 
```

在我看来，即使它们是在运行时分配的，这些 id 仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:58:35.220

您的代码或多或少地工作-但是您正在使用代码：

```
$("#tablediv").scrollTop(...) 
```

代替

```
$(document).scrollTop(...) 
```

除此之外它的工作原理 - 见这里：http: [//jsbin.com/umatuj/2/edit](http://jsbin.com/umatuj/2/edit)

# python - 如何从 FileField 获取（txt）文件内容？

> ID：13412924
> 
> 赞同：12
> 
> 时间：2012-11-16T08:29:27.737
> 
> 标签：python, django, file

我在 django 中打开存储在我的数据库中的文本文件时遇到问题。我想通过我的模型的 FileField 访问它......模型看起来像这样

```
 class MyModel(models.Model):
      saved_file = FileField() 
```

我通过管理界面上传了一个测试文件，它工作正常。在我看来，我想访问这个文件。如果我用标准 python open() 打开它，它可以正常工作......

```
 f = open(path, 'r')
 a = f.readlines()
 return render_to_response('base.html', {'content': a}, context_instance=RequestContext(request)) 
```

这将显示文件的行 ok...根据[https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)，当调用模型中的 FileField 时，一个 FieldFile 代理，所以

```
 f = MyModel.objects.all().get(id=0).saved_file 
```

应该将 FieldFile 存储在 f 中，此外，文档指出通过在 FieldFile 上投射 .open(mode='rb') 从模型中打开一个文件，所以

```
file = f.open(mode='rb') 
```

应该像文档中所述的 python .open() 一样工作。所以为了得到线条我做

```
file.readlines() 
```

应该返回我的行列表。发生的情况是我收到一条错误消息，指出 .readlines() 属性不存在。我不需要文件来显示它，这只是一种测试打开文件是否有效的方法，但我需要在我的视图中将文件内容放在变量中，以便在我的业务逻辑中进一步使用它。任何人都可以建议一种从 FileField 模型中获取文件内容的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T09:15:38.293

由于 Django 2.0`File.open`确实返回了一个文件，因此建议的工作方式与上下文管理器一样：

```
saved_file = MyModel.objects.all().get(id=0).saved_file
with saved_file.open() as f:
    data = f.readlines() 
```

* * *

***适用于旧版本的 Django < 2***

`FieldFile.open`打开文件，但不返回任何内容。所以在你的例子`file`中是`None`.

您应该在 FieldFile 上调用 readlines。在您的示例中，它将是：

```
f = MyModel.objects.all().get(id=0).saved_file
try:
    f.open(mode='rb') 
    lines = f.readlines()
finally:
    f.close() 
```

**UPD**：我添加了`try/finally`块，因为好的做法是始终保留`close`资源，即使发生异常也是如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-04-18T04:36:48.540

文档指出文件默认以“rb”模式打开，但您可能希望以“r”打开以将文件视为文本文件：

```
my_object = MyModel.objects.get(pk=1)
try:
    my_object.saved_file.open('r')
    lines = my_object.saved_file.readlines()
finally:
    my_object.saved_file.close() 
```

更好的是，您可以在 Django v2.0+ 中使用上下文管理器

```
my_object = MyModel.objects.get(pk=1)
with my_object.saved_file.open('r') as f:
    lines = f.readlines() 
```

# c# - c#中的样式类

> ID：13412926
> 
> 赞同：0
> 
> 时间：2012-11-16T08:29:29.413
> 
> 标签：c#, excel, interop

我正在打开一个 excel 并使用 Interop.Excel 在网格中显示它

我想在网格中显示数据，就像在 excel 中一样。我的意思是应该应用相同的样式。我正在使用数据表从 excel 中读取数据并将其绑定到网格。

我尝试了以下方法。在读取单元格数据时，我正在将单元格的样式读取到 Style 类中并尝试在网格中应用。但在运行时抛出异常无法将对象 Excel.Style 转换为 WebControls.Style。有没有办法实现它？

提前致谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:55:51.433

`Excel.Style`是一种 COM 类型，并且不继承任何用于 Web 应用程序的 .NET 类/接口。也没有显式转换到/从`WebControls.Style`. 您必须编写自己的方法来从 Excel 样式填充新样式对象。

您也无法完全复制该风格；as`WebControls.Style`仅支持`Excel.Style`. 您将必须了解 Web 控件样式类的属性，并逐个确定如何最好地映射到 Excel 样式中的等效属性。

# android - 从openFeint迁移到格力平台

> ID：13412930
> 
> 赞同：1
> 
> 时间：2012-11-16T08:29:43.203
> 
> 标签：android, openfeint, gree

我应该从openfeint迁移到gree平台。我下载了gree sdk，当我导入sdk时出现此错误：

> 不能在“oauth.signpost.Signpostttt.oauth.signpost.Signpost/src”内嵌套“oauth.signpost.Signpostttt.oauth.signpost.Signpost/src/main/java”。从“oauth.signpost.Signpostttt.oauth.signpost.Signpost/src”中启用嵌套排除“main/”

我找不到解决这个问题的方法。

谢谢

# c++ - 如何确保在 boost::asio 停止之前完成所有 async_handler？

> ID：13412932
> 
> 赞同：2
> 
> 时间：2012-11-16T08:29:47.790
> 
> 标签：c++, boost, boost-asio

我的班级接收者...它接收一些字符串并将其推送到缓冲区。

```
Reciever::Reciever(boost::shared_ptr<TSBuffer<std::string>> buffer, int port)
    : port(port), buffer(buffer)
{
    using namespace boost::asio;
    acceptor_ = new ip::tcp::acceptor(iosev, ip::tcp::endpoint(ip::tcp::v4(),  port));
}

Reciever::~Reciever()
{
    delete acceptor_;
}

void Reciever::run()
{
    using namespace boost::asio;
    _start();
    iosev.run();
}

void Reciever::stop()
{
    Sender s("127.0.0.1", std::string(8, '$'), port);
}

void Reciever::_start()
{
    using namespace boost::asio;
    boost::shared_ptr<ip::tcp::socket> socket(new ip::tcp::socket(iosev));
    acceptor_->async_accept(*socket, boost::bind(&Reciever::acceptHanlder, this, socket));
}

void Reciever::acceptHanlder(boost::shared_ptr<boost::asio::ip::tcp::socket> socket)
{
    std::string delim(8, '$');
    boost::system::error_code ec;
    boost::asio::streambuf strmbuf;

    boost::asio::read_until(*socket, strmbuf, delim, ec);
    std::istream is(&strmbuf);
    std::string re((std::istreambuf_iterator<char>(is)),std::istreambuf_iterator<char>());
    re.replace(re.end() - delim.size(), re.end(), "");
    if (re.size() && re != std::string(8, '$')){
        buffer->push(re);
        _start();
} 
```

在 main() 函数中，我使用 X(uncertain) 线程将 X 字符串发送到接收器。当 Reciever::acceptHanlder 被调用 X 次（这意味着 X 字符串被处理）时，我想停止接收器（调用 Reciever::stop）。但我不知道如何确定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:00:04.743

**我看到在acceptHanlder**的最后一行之前不可能调用**async_accept**。**因此，您可以简单地在Reciever**对象中实现一个计数器，并且在工作完成时不要调用**_start 。**当在不同的线程中使用相同**的接收**器时，它要复杂得多，我更喜欢使用“连接对象”范式。

 ******您也可以使用**asio::strand**来限制`acceptHanlder`-s ，因此任何时候只有一个`acceptHanlder`给定的`Reciever`可以处于活动状态。这消除了`Reciever`. 所以你可以安全地调用`Reciever::stop`（使用相同的**strand**）。******

# linq - 使用 OpenXML 和 LINQ 读取 excel 表的第一行

> ID：13412936
> 
> 赞同：1
> 
> 时间：2012-11-16T08:30:17.600
> 
> 标签：linq, openxml, openxml-sdk, linq-to-excel

我想使用带有 LINQ 的 Open XML sdk 读取 excel 工作表的第一行。有没有什么办法可以不使用以下代码得到它：

```
WorkSheetPart.Worksheet.Descendants<Row>().FirstOrDefault(); 
```

上面的代码需要很长时间（几乎 1 分钟）才能重新调整第一行，因为工作表包含超过 75000 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:47:00.567

您可以使用 LinqToExcel 读取第一行，它应该更快，因为它不必加载整个文件。但是，LinqToExcel 使用 OLEDB 而不是 Open XML SDK 来读取文件。

```
var excel = new ExcelQueryFactory("excelFileName");
var firstRow = (from c in excel.Worksheet()
                select c).First(); 
```

[查看LinqToExcel](https://github.com/paulyoder/LinqToExcel#welcome-to-the-linqtoexcel-project)的其余文档。

# sql - 在 informix 中复制表

> ID：13412942
> 
> 赞同：4
> 
> 时间：2012-11-16T08:30:55.447
> 
> 标签：sql, informix

如何有效地复制informix 数据库中的表？我想做类似的事情

```
create table new_table as (select * from old_table) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T04:35:50.223

如果您只需要一个临时表，那么：

```
SELECT * FROM old_table INTO TEMP new_table; 
```

如果您需要一张永久桌子，那么（还）没有一种简单的方法可以做到这一点。您必须确定旧表的架构，使用它来创建新表，然后使用：

```
INSERT INTO new_table SELECT * FROM old_table; 
```

繁琐的一点是确定旧表的模式。 `dbschema -d database -t old_table`或多或少提供了您需要的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-10T10:35:57.700

在 informix 12.10 中，您现在可以

```
create table newtable as select * from oldtable; 
```

# asp.net - 使 iframe 中的 Facebook 评论插件可滚动

> ID：13412945
> 
> 赞同：1
> 
> 时间：2012-11-16T08:31:11.323
> 
> 标签：asp.net, facebook, iframe, plugins, facebook-social-plugins

所以我使用了这段代码而不是 XFBHL/HTML5 代码

```
<iframe src="http://www.facebook.com/plugins/comments.phphref=http://9gag.com/gag/5852530&amp;num_posts=2&amp;action=comment&amp;scrolling=yes&amp;"
 scrolling="yes" frameborder="0" style="border:none; overflow:hidden;
 width:470px; height:400px;" allowTransparency="true"></iframe> 
```

如您所见，我已经将滚动设置为“是”，但评论仍然限于其维度。另一个问题是如何限制帖子数量？num_post 似乎在这段代码中不起作用。

# r - 使用 RODBC 包的 sqlSave 函数将数据保存到表中

> ID：13412947
> 
> 赞同：0
> 
> 时间：2012-11-16T08:31:19.830
> 
> 标签：r, rodbc

在尝试使用`sqlSave`的功能时`RODBC`，我无法选择要在连接下创建表的数据库。我创建了一个名为 x in 的连接`MYSQL`。但是，我的连接中有多个数据库`MYSQL`。但是，`sqlSave`不要定义选择哪个数据库来从 R 创建一个表的选项。任何人都可以建议我是否遗漏了什么或者是否有任何替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:20:08.090

很抱歉发布这个。我犯了一些语法错误。现在，我可以执行此操作了。

谢谢！！

# mongodb - 根据 mongodb 中的计数条件查询字段子集

> ID：13412957
> 
> 赞同：1
> 
> 时间：2012-11-16T08:31:53.743
> 
> 标签：mongodb, mongodb-query, mongo-shell, mongodb-shell

我在集合中存储的文档格式为：

```
    {
        “一种”： {
            ...

            “乙”：{
                “c”：抄送，
                “d”：dd，
                “e”：诶，
                “f”：ff
            }
        }

    }

```

**我想从集合中count（c）> 1的所有文档中获取字段“d”和“e”。**

如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:34:18.293

得出问题的 map-reduce 解决方案：

我的功能现在看起来像这样：

```
m = function() {
    emit(this.a.b.c, { data: [[this.a.b.d, this.a.b.e]] });
}

r = function(key, values) {
    var result = [];
    values.forEach(function(V) {
        Array.prototype.push.apply(result, V.data);
    });
    return {data: result};
}

db.coll.mapReduce(m, r, {out: {replace: "data"}}) 
```

非常适合这个目的:)

# c# - 使用分隔符将数据表的两列存储在一个字符串中

> ID：13412962
> 
> 赞同：-1
> 
> 时间：2012-11-16T08:32:19.547
> 
> 标签：c#

我有一个`DataTable`具有以下结构

```
ATM Fault
---------    
A01 34256
A02 56346
A03 98946 
```

如何使用管道分隔符将其存储在一个字符串变量中

```
string temp="A01|34256,A02|56346,A03|98946"; 
```

**我正在将我的 Linq 转换为 DataTable。但我似乎可以在 LINQ 本身中做到这一点**

```
var diff = dtOpenEvent.AsEnumerable().Except(dtOutputTemp.AsEnumerable(), DataRowComparer.Default);
DataTable di = diff.CopyToDataTable();//This is the Datatable which i want to Convert 
```

**我如何通过仅修改`var diff`语句来实现相同的目的，以便无需在 DataTable 中进行转换**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:37:22.047

使用 LINQ 和`String.Join`：

```
var projectedList = dataTable
                       .AsEnumerable()
                       .Select(row => row["ATM"] + "|" + Convert.ToString(row["Fault"]));

string temp = String.Join(",", projectedList.ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:38:00.597

怎么样

```
string result = string.Join(",", 
                mydatatable.AsEnumerable()
                .Select(x => x("ATM").ToString() + "|" + x("Fault").ToString())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T08:42:12.317

您可以先将`ATM`and`Fault`与管道连接，然后将[`join`](http://msdn.microsoft.com/en-us/library/dd992421.aspx)它们与逗号连接：

```
IEnumerable<string> pairs = table
            .AsEnumerable()
            .Select(r => string.Format("{0}|{1}"
                 , r.Field<string>("ATM")
                 , r.Field<string>("Fault")));
string result = string.Join(",", pairs); 
```

# ruby - 使用 gsub 在 Ruby 中进行正则表达式操作

> ID：13412963
> 
> 赞同：0
> 
> 时间：2012-11-16T08:32:52.690
> 
> 标签：ruby, gsub

当我这样做时`"www.example.com/test/test".gsub('/test','')`，我得到`"www.example.com"`了，但我想要的结果是`"www.example.com/test"`。也就是说，只有最后一个`"/test"`应该被删除。我们如何实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:34:43.653

采用`"www.example.com/test/test".gsub(/\/test$/,'')`

评论后更新

事件如果它正在使用`gsub`，`sub`似乎更合适，因为您只想更换一次：

`"www.example.com/test/test".sub(/\/test$/,'')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:37:59.170

试试这个

```
"www.example.com/test/test".sub('/test','') 
```

# android - Android：如果 Activity 正在运行，则从服务进行测试。

> ID：13412971
> 
> 赞同：2
> 
> 时间：2012-11-16T08:33:43.063
> 
> 标签：android, service, android-activity

我有一个在后台运行的服务。我希望它可以执行一个动作，只有当某个活动正在运行时。如果活动正在运行，我如何从服务测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:41:58.590

您可以使用包管理器和活动管理器：

[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)：用于检索与当前安装在设备上的应用程序包相关的各种信息的类。您可以通过`getPackageManager().`

[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)：与系统中运行的整体活动进行交互。

但是，更简单的方法是：在启动`Activity`(onCreate/onResume) 时，使用 service.send(..) 发送消息或使用 service.onStartCommand(..) 发送 Intent，以便服务知道您的特定活动已经开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:43:23.610

也许您可以反过来做，将意图从您的活动发送到服务。

例如，您可以发送一个关于活动的意图`onResume`，告诉您的服务活动是活动的，另一个 on `onPause`，告诉服务活动已经停止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:45:13.933

将以下方法与您的包名称一起使用。如果您的任何活动在前台，它将返回 true。

```
public boolean isForeground(String myPackage){
ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
 List< ActivityManager.RunningTaskInfo > runningTaskInfo = am.getRunningTasks(1); 

     ComponentName componentInfo = runningTaskInfo.get(0).topActivity;
   if(componentInfo.getPackageName().equals(myPackage)) return true;
return false;
} 
```

# node.js - 在 NodeJS 中部署特定文件

> ID：13412976
> 
> 赞同：0
> 
> 时间：2012-11-16T08:34:03.053
> 
> 标签：node.js, deployment, dotcloud

我在 DotCloud 上运行我的 NodeJS 项目。遗憾的是，DotClouds 部署是“项目侵入式”，即它需要一个 supervisord.conf 文件驻留在应用程序根目录中。我的部署设置如下所示（使用 git repos）。

```
project-deploy.git/prod/dotcloud.yml
project-deploy.git/prod/project -> project.git 
```

（`/prod/project`用作`project.git`子模块来访问代码）

现在，我的想法是我最终会拥有像这样的不同环境，例如开发、测试和阶段。开发环境甚至没有`dotcloud.yml`文件，因为它需要在本地运行所有内容。好吧，这很好用。但问题是`supervisord.conf`仅用于部署到 dotcloud 的文件，现在它驻留在 project.git 存储库中，但它不属于那里，因为它只是用于部署。

是否有任何模块或 NodeJS 脚本可以让您将部署配置文件放在其他地方，甚至可以指定目标环境是什么，例如`node deploy.js --production`，或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:15:17.243

有办法摆脱`supervisord.conf`。假设您要运行 eg `node app.js`，您可以将以下内容放入`dotcloud.yml`：

```
www:
  type: nodejs
  process: node app.js 
```

现在，当然，它并不能解决`dotcloud.yml`文件本身的问题；但至少它减少了一点混乱 - 将其从 approot 中删除。

# java - java程序在遇到错误时搜索日志文件并触发电子邮件

> ID：13412978
> 
> 赞同：1
> 
> 时间：2012-11-16T08:34:14.233
> 
> 标签：java

我已将 log4j xml 配置为在我的应用程序中遇到错误时发送电子邮件，但我仍然无法收到任何邮件。如果我必须执行此配置以外的其他操作，请您建议我。以下是配置完成在电子邮件的 xml 文件中

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">
<appender name="XMPAYROLAppender"
        class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="log/XMPAYROLLogger.log" />
        <param name="datePattern" value="'.'yyyy-MM-dd" />
        <param name="append" value="true" />
        <param name="Encoding" value="UTF-8" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %C{1} - %m%n" />
        </layout>
</appender>
<appender name="AdministratorEmail" class="org.apache.log4j.net.SMTPAppender">
  <param name="BufferSize" value="1024" />
  <param name="SMTPHost" value="smtp.gmail.com" />
  <param name="From" value="kiran98373@gmail.com" />
  <param name="To" value="kiran98373@gmail.com.com" />
  <param name="Subject" value="test mail" />
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern"
      value="[%d{ISO8601}]%n%n%-5p%n%n%c%n%n%m%n%n" />
  </layout>
  <filter class="org.apache.log4j.varia.LevelRangeFilter">
    <param name="LevelMin" value="error" />
    <param name="LevelMax" value="fatal" />
  </filter>
</appender>

<logger name="XMPAYROLLogger" additivity="true">
        <level class="org.apache.log4j.Level" value="INFO" />
        <appender-ref ref="XMPAYROLAppender" />
</logger>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:38:09.813

存在一个`SMTPAppender`类，`Log4j`其中通过 SMTP 为每个记录的消息发送电子邮件。

```
<appender name="AdministratorEmail" class="org.apache.log4j.net.SMTPAppender">
  <param name="BufferSize" value="512" />
  <param name="SMTPHost" value="some.email.host.org" />
  <param name="From" value="appname@server.com" />
  <param name="To" value="adminA@server.com,adminB@server.com" />
  <param name="SMTPUsername" value="appname@server.com" />
  <param name="SMTPPassword" value="abcdpassword" />
  <param name="SMTPDebug" value="true" /> 
  <param name="Subject" value="SomeApplication on SomeServer12" />
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern"
      value="[%d{ISO8601}]%n%n%-5p%n%n%c%n%n%m%n%n" />
  </layout>
  <filter class="org.apache.log4j.varia.LevelRangeFilter">
    <param name="LevelMin" value="error" />
    <param name="LevelMax" value="fatal" />
  </filter>
</appender> 
```

# jquery - jquery img width() 给出 0

> ID：13412982
> 
> 赞同：2
> 
> 时间：2012-11-16T08:34:32.457
> 
> 标签：jquery

奇怪的问题你知道为什么这段代码：

```
var img = new Image();
img.src = 'images/img1.jpg';

$(img).on('load', function() {
   alert($(this).width());

}); 
```

在 Firefox、Chrome 中给出 0 但在 IE9 中给出正确值？如何在所有浏览器中获得正确的值？使用 jQuery 1.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:36:58.657

## *[jsBin 演示](http://jsbin.com/upelim/2/edit)*

```
var img = new Image();
img.src = 'images/img1.jpg';

$(img).on('load', function() {
   alert(this.width);
}); 
```

**[或者使用纯 JS：](http://jsbin.com/upelim/5/edit)**

```
var img = new Image();
img.src = 'images/img1.jpg'; 

img.onload = function() {
   alert(this.width);
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:22:35.683

直到您将`image`in 附加到 dom`.width()`返回`0`

```
var img = new Image();
img.src = 'http://jsfiddle.net/img/logo.png';
$(img).on('load', function() {
    console.log(this.width); // 160
    console.log($(this).context.width); // 160
    console.log($(this).width()); // 0
    $('body').append($(this));
    console.log($(this).width()); // 160
}); 
```

[**检查这个**](http://jsfiddle.net/gCUdN/2/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T08:39:54.833

根据 jQuery 文档`http://api.jquery.com/load-event/`

> 与图像一起使用时加载事件的注意事项：开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些都是：
> 
> 1.它不能始终如一地工作，也不能可靠地跨浏览器 2.如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发 3.它不会正确地冒泡 DOM 树 4.可以停止为已经存在于浏览器缓存中的图像触发

如果您查看文档中的注释，很多人都会遇到同样的问题，因为 webkit 中没有触发 load 事件，通常是在之前将 src 设置为相同时...也许您想设置一个占位符图像然后更改src 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T08:42:49.630

jQuery 确定对象尺寸的方式是检查`style`属性 (afaik)；由于图像永远不会被添加到 DOM，它不会知道这一点。

话虽如此，我看不出你在这里需要 jQuery 的特殊原因：

```
var img = new Image();
img.onload = function() {
    alert(this.width);
}
img.src = 'http://example.org/path/to/image.jpg'; 
```

要使用 jQuery 设置尺寸，您可以使用以下命令：

```
$(this)
    .width(this.width)
    .height(this.height); 
```

*不知道为什么需要它，因为在渲染时浏览器已经知道图像有多大，这与向`<img />`DOM添加*

顺便说一句，这些语句的顺序很重要；您应该在设置属性*之前*注册加载处理程序`.src`，否则如果图像已被浏览器缓存，您可能会错过加载事件。

# c# - 如何检查连接字符串是否有效？

> ID：13412983
> 
> 赞同：2
> 
> 时间：2012-11-16T08:34:31.880
> 
> 标签：c#, .net, sql-server-2008, ado.net, connection-string

我必须保存数据，并且必须先测试连接才能保存它。如何测试此连接字符串对特定连接是否有效？

我的代码是这样的：

```
static public bool TestConnString(string connectionString)
{
    bool returnVal = true;
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        try
        {
            conn.Open();

            if (conn.State != ConnectionState.Open)
                returnVal = false;
            else
                returnVal = true;
        }
        catch (Exception ex)
        {
            returnVal = false;
        }
    }

    return returnVal;
} 
```

连接字符串是：

```
Data Source=testSvr03\SQLEXPRESS;Initial Catalog=Test; Connection Timeout=600; Persist Security Info=True;User ID=Test; password=test 
```

如果我在连接字符串中提供了错误的数据源，那么它在 conn.open() 之后永远不会在此函数中返回。我放置了 catch 块但它正在进入它

谁能告诉我什么是解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T09:18:36.177

您可以让[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/d7z89tex.aspx)构造函数检查它：

```
bool isValidConnectionString = true;
try{
    var con = new SqlConnectionStringBuilder("ABC");
}catch(Exception)
{
    // can be KeyNotFoundException, FormatException, ArgumentException
    isValidConnectionString = false;
} 
```

`ConnectionStringBuilders`以下是不同数据提供者的[概述：](http://msdn.microsoft.com/en-us/library/ms254947.aspx)

```
Provider                   ConnectionStringBuilder 
System.Data.SqlClient      System.Data.SqlClient.SqlConnectionStringBuilder
System.Data.OleDb          System.Data.OleDb.OleDbConnectionStringBuilder
System.Data.Odbc           System.Data.Odbc.OdbcConnectionStringBuilder
System.Data.OracleClient   System.Data.OracleClient.OracleConnectionStringBuilder 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-07T19:21:50.350

您可以像这样将`return`语句放在`catch`块中

```
static bool TestConnectionString(string connectionString)
{
    using (MySqlConnection conn = new MySqlConnection(connectionString))
    {
        try
        {
            conn.Open();

            return (conn.State == ConnectionState.Open);
        }
        catch
        {
            return false;
        }
    }
    return false;
} 
```

我刚刚试过这个。如果您使用空字符串调用此函数，它可以正常工作（返回错误值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T08:53:03.380

您可以尝试打开连接

```
SqlConnection myConnection = new SqlConnection(myConnString); 
try
{
   myConnection.Open();
}
catch(SqlException ex)
{
   //Failure to open
}
finally
{
   myConnection.Dispose();
} 
```

您可以在后台线程中执行此操作，并且可以设置超时，如果您不想等待很长时间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T11:58:10.473

这就是我最终使用的：

```
private bool validateConnectionString(string connString)
{
    try
    {
        var con = new SqlConnectionStringBuilder(connString);
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            return (conn.State == ConnectionState.Open);
        }
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-28T09:09:39.530

尝试这个。这是检查连接的最简单方法。

```
 try 
    {
        using(var connection = new OleDbConnection(connectionString)) {
        connection.Open();
        return true;
        }
    } 
    catch {
    return false;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T08:46:27.267

你的意思是连接字符串？

好吧，可能是这样的……

```
try
{
//....try to connect and save it here, if connection can not be made it will throw an exception
}
catch(Exception ex)
{

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T08:49:52.000

创建一个连接对象并尝试打开它。

如果连接字符串无效，将引发异常。像这样的东西：

```
using(var connection = New SqlConnection("..."))
{
     connection.Open();
} 
```

# .net - 在客户端 PC 上安装应用程序之前将 .NET Franmwork 版本自动更新到 3.0 或 3.5

> ID：13412984
> 
> 赞同：0
> 
> 时间：2012-11-16T08:34:33.933
> 
> 标签：.net, frameworks, auto-update

我的应用程序基于.NET Framework 3.0。就像我安装了一些 PC 游戏一样，是否有任何简单的方法可以在安装应用程序之前自动更新客户端 PC 的 .NET Framework？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:37:45.070

`setup project`设置为从供应商网站`prerequisites`安装。 然后在安装新版本时安装程序将检查是否存在，如果不存在，将安装它。 这是来自设置项目属性的屏幕[http://img822.imageshack.us/img822/3698/setupmu.jpg](http://img822.imageshack.us/img822/3698/setupmu.jpg)`.net framework 3.5`
`.NET 3.5`

# c++ - C++如何利用模板对向量进行排序

> ID：13412986
> 
> 赞同：0
> 
> 时间：2012-11-16T08:34:39.127
> 
> 标签：c++, templates, sorting, vector

C++如何利用模板对向量进行排序

嗨，伙计们，感谢您查看我的问题。

我有一个这样的 Templates.h 文件..

```
/* Template Less Than */

template<typename T>
bool lessThan(T a,T b)
{
return a<b;
}

/* Template greater Than */

template<typename T>
bool greaterThan(T a,T b)
{
return a>b;
}

/* Template Equals */

template<typename T>
bool equals(T a,T b)
{
return a==b;
} 
```

然后我上了这门课

```
Map2D 
```

关于 Map2D..

```
class Map2D
{
protected:
int x;
int y;

public:
Map2D();
Map2D(int,int);
int getX();
int getY();
}; 
```

在我的 main.cpp 中，我得到了 Map2D 的矢量类

```
vector<Map2D> map2d; 
```

所以现在我需要按 X Ascending 对其进行排序.. 我如何利用模板文件对其 X Ascending 的向量进行排序.. 考虑到我稍后需要重载​​另一个 DESCENDING..

通常我会使用

```
sort(map2d.begin(),map2d.end(),sortByX); 
```

并且 sortByX 将是一个由 it () 运算符重载的结构。

但现在的问题是，因为我得到了一个小于和大于的模板。我如何利用它通过 Templates.H 的模板通用函数通过升序对 X 进行排序，然后通过降序对另一个 X 进行排序。

**更新：**

我想我需要重载类 Map2D 运算符 > ， < 和 ==

但我的问题是如何在 MyTemplates.h 函数的帮助下重载它，例如 lesserThan 、greaterThan、equals

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T08:41:52.083

为您的类或更简单的重载定义一个比较器`operator<()`（无论如何您都需要为模板工作）。

首先，修复您的模板：

```
template<typename T>
bool lessThan(const T& a, const T& b)
{
    return a<b;
}

template<typename T>
bool greaterThan(const T& a, const T& b)
{
    return b<a;
}

template<typename T>
bool equals(const T& a, const T& b)
{
    return !(a<b || b<a);
} 
```

接下来，在你的类上定义一个 operator<()。

```
class Map2D
{
protected:
    int x;
    int y;

public:
    Map2D();
    Map2D(int,int);
    int getX();
    int getY();

    // this sample sorts on X dominantly, and Y if X is the same
    bool operator <(const Map2D& obj) const
    {
        return (x < obj.x || (x == obj.x && y < obj.y));
    };
} 
```

现在只需调用排序：

```
std::sort(map2d.begin(), map2d.end()); 
```

使用您的 lessThan 模板调用：

```
std::sort(map2d.begin(), map2d.end(), lessThan<Map2D>); 
```

或您的大于模板：

```
std::sort(map2d.begin(), map2d.end(), greaterThan<Map2D>); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T08:45:48.387

在 C++11 中，您可以编写一个 lambda 函数来执行此操作。

使用 boost，如果你想要一个“即时的一步”函子，它必须是这样的：

```
bind( less<int>, bind(&Map2D::getX(),_1), bind(&Map2D::getX(),_2) )
// or your lessThan<int> which already exists in C++ as less<int> 
```

不确定这是否会完全有效。（第 2 次和第 3 次绑定会正确转换为占位符吗？）更容易编写一个非常通用的仿函数来组合您正在尝试做的事情，即从您的类中提取某些内容（转换）然后将其传递给谓词。

```
template< typename Trans, typename Pred >
struct Comparator
{
    Comparator( Trans t , Pred p ) : trans( t ), pred ( p )
    {
    }

    template< typename T >
    bool operator()( T const& t1, T const& t2 ) const
    {
         return pred( trans(t1), trans(t2) );
    }
private:
    Trans trans;
    Pred pred;
};

template< typename Trans, typename Pred >
Comparator< Trans, Pred > makeComparator( Trans t, Pred p )
{
     return Comparator( t, p );
}

// then in your code

std::sort( map2d.begin(), map2d.end(), 
    makeComparator( boost::bind( &Map2D::getX(), _1 ), lessThan<int> ) ); 
```

应该可以工作，并且您保持 Comparator 通用。

（不确定 boost 是否已经提供了类似的东西）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T08:48:58.830

您的代码存在一些问题：

1.  类末尾缺少分号。
2.  您的比较模板应该返回`bool`而不是`T`.
3.  您错过了班级中的比较运算符：

    ```
    bool operator<(const Map2D &m) const {return /* some code here */ }
    bool operator>(const Map2D &m) const {return /* some code here */ }
    bool operator==(const Map2D &m) const {return /* some code here */ } 
    ```

    或修复您的模板以仅`operator<()`用于所有比较（顺便说一句，这是一种常见的做法）。

当您在上面修复时，您只需使用这样的模板：

```
sort(map2d.begin(),map2d.end(), lessThan<Map2D>);
sort(map2d.begin(),map2d.end(), greaterThan<Map2D>); 
```

顺便说一句，您不需要自定义模板来以如此简单的方式对您的课程进行排序。重用 STL 中已有的内容：

```
sort(map2d.begin(),map2d.end()); // less
sort(map2d.begin(),map2d.end(), std::greater<Map2D>()); 
```

您可以在[功能](http://en.cppreference.com/w/cpp/utility/functional)标题中找到它们。您也不能`operator==()`用于排序，但它可能对C++11 中引入的[无序容器有用。](http://en.cppreference.com/w/cpp/container)

**编辑：**如果您对 Map2D 类的排序算法是固定的（小于不随时间变化的），那么我建议您遵循我的答案。否则，如果现在您想按 X 排序并在几行后按 Y 排序，那么@MikeSeymour 答案可能更适合您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T08:58:52.543

如果你在 C++11 中，你可以这样写：

```
std::sort(map2d.begin(), map2d.end(), [](const Map2D& a, const Map2D& b) {
    return lessThan(a.getX(), b.getX()); } ); // accending
std::sort(map2d.begin(), map2d.end(), [](const Map2D& a, const Map2D& b) {
    return greaterThan(a.getX(), b.getX()); }); // decending 
```

否则你必须实现比较函子，即

```
struct compare
{
    bool operator () (const Map2D& a, const Map2D& b)
    {
        return lessThan(a.getX(), b.getX());
    }
}; 
```

接着

```
std::sort(map2d.begin(), map2d.end(), compare()); 
```

但实际上，使用 lessThan、greaterThan 并不是一个好样式，因为您可以直接比较 x。如果你想对 Map2D 进行一些特殊的比较，最好只为 Map2D 对象制作这些比较函数。

更新：您也可以只使用函数指针作为比较器，即：

```
bool compare(const Map2D& a, const Map2D& b)
{
    return lessThan(a.getX(), b.getX());
} 
```

接着

```
std::sort(m.begin(), m.end(), compare); 
```

但是您可能会损失一些性能（请参阅下面的评论）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T08:43:32.697

你真的不能。您需要定义函子（函数或`operator()`适当重载的类）来执行您需要的特定对象成员比较，而您的函数模板不这样做。你需要类似的东西：

```
struct compare_x_less {
    // NOTE: you'll need to declare `get_X() const` for this to work.
    // You should do that anyway.
    bool operator()(Map2D const & a, Map2D const & b) {
        return a.get_X() < b.get_X();
    }
};

// and similarly for `compare_x_greater` and any other comparisons you need

std::sort(map2d.begin(),map2d.end(),compare_x_less()); 
```

在 C++11 中，lambda 可以为您节省一些输入：

```
std::sort(map2d.begin(),map2d.end(),[](Map2D const & a, Map2D const & b) {
        return a.get_X() < b.get_X();
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T08:45:08.450

您首先需要重载运算符`<`，`>`并与您的模板`==`一起使用：`Map2D`

```
class Map2D
{
protected:
   int x;
   int y;
public:
   Map2D();
   Map2D(int,int);
   int getX();
   int getY();
   bool operator<(const Map2D& other)const //less then
   {
      return x < other.x;
   }
   //other operators is same manner
} 
```

完成后，您只需使用它：

```
sort(map2d.begin(),map2d.end(),lessThan<Map2D>); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T08:41:22.770

```
sort(map2d.begin(),map2d.end(),lessThan<map2d>); 
```

请注意，**lessThan 是一个**应该**返回**而不是类型的 T 值的谓词函数`bool`

*一些额外的解释：*

```
// usage
    /* Some moments to mention: if you omit third argument, default argument less<T> will be used,
    which is enough for built-in types, also you can use predicates already defined in STL:
    greater<T>, less<T> or you can provide your own predicate */
    sort(map2d.begin(),map2d.end(),lessThan<map2d>);

// header file, where we define predicats which we shall provide as argument to algorithm sort

// predicate expected by function sort has to obey the following rules:
// 1\. return bool 2\. accept 2 parameters

/*2 variants of predicat*/

// 1) operator< is overloaded for class T, so we can use it to compare instances of that class
template<typename T>
bool lessThan(T a,T b)
{
return a < b;
}

/* 2) operator< not overloaded, when we have to get values of class members by which we are going to compare them
this could be done in various ways, for ex. by means of getters();*/

template<typename T>
bool lessThan(T a,T b)
{
return a.getValueOfMember() < b.getValueOfMember();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-16T08:43:07.900

一个好方法，我不认为它是最好的。您可以在类中重载运算符 (<) & (!=)。如果您只想对 X 进行排序。并且仅`sort(map2d.begin(), map2d.end())`用于升序。和`sort(map2d.rbegin(), map2d.rend())`下降..这解决了你的问题。

或者：您可以创建 2 个函数来比较 1 与 x 相关和与 Y 相关的其他函数。如：

```
int cmpx(const void* A, const void *B){
    Map2D a = *(Map2D *)A;
    Map2D b = *(Map2D *)B;
    if(a.x < b.x) return -1;
    if(a.x == b.x) return 0;
    return 1;
}
// And use
qsort(map2d.begin(), (int)map2d.size(), sizeof(Map2D), cmpx); 
```

对于 Y 来说也是如此。不确定是否`map2d.rbegin()`会按顺序进行排序，或者您也必须自己进行。

# linux - Linux iptables 字符串模块不匹配所有数据包

> ID：13412993
> 
> 赞同：3
> 
> 时间：2012-11-16T08:35:03.170
> 
> 标签：linux, debian, firewall, iptables, netfilter

这是我第一次为 iptables 使用匹配字符串模块并且遇到了一些我无法克服的奇怪行为。

简而言之，看起来 iptables 将“修剪”的数据包传递给模块，因此模块无法将整个数据包解析为字符串。我在网上找不到有关此类行为的任何信息。所有示例和导师都应该像魅力一样工作，但事实并非如此。

现在详细介绍。

```
OS: debian testing, kernel 3.2.0-3-686-pae
IPTABLES: iptables v1.4.14
OTHER:

 tcpdump version 4.3.0,
 libpcap version 1.3.0

# lsmod|grep ipt
ipt_LOG                12533  0
iptable_nat            12800  0
nf_nat                 17924  1 iptable_nat
nf_conntrack_ipv4      13726  3 nf_nat,iptable_nat
nf_conntrack           43121  3 nf_conntrack_ipv4,nf_nat,iptable_nat
iptable_filter         12488  0
ip_tables              17079  2 iptable_filter,iptable_nat
x_tables               18121  6
ip_tables,iptable_filter,iptable_nat,xt_string,xt_tcpudp,ipt_LOG 
```

我已将所有规则重置为默认规则，并按以下顺序仅添加了两条规则：

```
iptables -t filter -A OUTPUT --protocol tcp --dport 80 --match string --algo bm --from 0 --to 1500 --string "/index.php" --jump LOG --log-prefix "matched :"
iptables -t filter -A OUTPUT --protocol tcp --dport 80 --jump LOG --log-prefix "OUT : " 
```

这个想法很糟糕 - 将任何 ip 的请求匹配到包含字符串 /index.php 的端口 80 并将它们打印到日志中，并将所有传递到 80 端口的数据记录下来。

所以 iptables -L -xvn ：

```
Chain INPUT (policy ACCEPT 3 packets, 693 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 3 packets, 184 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       0        0 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 STRING match  "/index.php" ALGO name bm TO 1500 LOG flags 0 level 4 prefix "matched :"
       0        0 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 LOG flags 0 level 4 prefix "OUT : " 
```

规则计数器清零。

好的，现在浏览器转到 www.gentoo.org/index.php。此网址仅作说明之用。所以这是浏览器中唯一的请求 url。对于 iptables -t filter -L -xvn，我得到以下信息：

```
Chain INPUT (policy ACCEPT 61 packets, 16657 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 63 packets, 4394 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       1      380 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 STRING match  "/index.php" ALGO name bm TO 1500 LOG flags 0 level 4 prefix "matched :"
      13     1392 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 LOG flags 0 level 4 prefix "OUT : " 
```

所以我们只有一个匹配第一条规则。但这是错误的。这是用于连接输出的 tcpdump。第一个ip请求89.16.167.134：

```
<handshake omitted>
16:56:38.440308 IP 192.168.66.106.54704 > 89.16.167.134.80: Flags [P.], seq 1:373, ack 1, win 913, 
options [nop,nop,TS val 85359 ecr 3026115253], length 372
<...>
    0x0030:  b45e dab5 4745 5420 2f69 6e64 6578 2e70  .^..GET./index.p
    0x0040:  6870 2048 5454 502f 312e 310d 0a48 6f73  hp.HTTP/1.1..Hos
    0x0050:  743a 2077 7777 2e67 656e 746f 6f2e 6f72  t:.www.gentoo.or
    0x0060:  670d 0a55 7365 722d 4167 656e 743a 204d  g..User-Agent:.M
    0x0070:  6f7a 696c 6c61 2f35 2e30 2028 5831 313b  ozilla/5.0.(X11; 
```

在这里，我们在 HTTP GET 中看到了一个匹配项。好的一些数据包稍后我们请求更多内容到 ip 140.211.166.176：

```
16:56:38.772432 IP 192.168.66.106.59766 > 140.211.166.176.80: Flags [P.], seq 1:329, ack 1, win 913, 
options [nop,nop,TS val 85442 ecr 110101513], length 328
<...>
    0x0030:  0690 0409 4745 5420 2f20 4854 5450 2f31  ....GET./.HTTP/1
<...>
    0x0130:  6566 6c61 7465 0d0a 436f 6e6e 6563 7469  eflate..Connecti
    0x0140:  6f6e 3a20 6b65 6570 2d61 6c69 7665 0d0a  on:.keep-alive..
    0x0150:  5265 6665 7265 723a 2068 7474 703a 2f2f  Referer:.http://
    0x0160:  7777 772e 6765 6e74 6f6f 2e6f 7267 2f69  www.gentoo.org/i
    0x0170:  6e64 6578 2e70 6870 0d0a 0d0a            ndex.php.... 
```

在这里，我们再次看到“/index.php”。

但是 LOG 规则给出了以下信息：

```
kernel: [  641.386182] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=60
kernel: [  641.435946] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=52
kernel: [  641.436226] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=424
kernel: [  641.512594] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=52
kernel: [  641.512762] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=52
kernel: [  641.512819] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=89.16.167.134 LEN=52
kernel: [  641.567496] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=60
kernel: [  641.767707] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=52
kernel: [  641.768328] matched :IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=380 <--
kernel: [  641.768352] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=380
kernel: [  641.990287] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=52
kernel: [  641.990455] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=52
kernel: [  641.990507] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=52
kernel: [  641.990559] OUT : IN= OUT=eth0 SRC=192.168.66.106 DST=140.211.166.176 LEN=52 
```

所以我们只有一个数据包匹配，到 140.211.166.176。但是第一场比赛在哪里？对我来说更奇怪的是，在装有 ubuntu 的机器上，它给出了不同的计数器，比如字符串的 6 个匹配项。

我还在使用 ubuntu 12.04 的家用笔记本上进行了同样的简单测试，我得到了 2 个明确的匹配项。

Mb 有一些选项来调整模块数据传递或 smth？

**更新：**

非常简单的实验 mb 如果有人能解释那一刻它会给出提示。

现在两台电脑，服务器 centos 6.3 使用 netcat ans 监听端口 80 回答字符串：

```
# echo "List-IdServer"|nc -l 80
List-Id 
```

客户端（debian）连接到服务器并使用 nc 发送数据并读取答案：

```
% echo "List-Id"|nc butorabackup 80
List-IdServer 
```

数据交换后，我在服务器端：

```
Chain INPUT (policy ACCEPT 33 packets, 2164 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       1       60 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:80 STRING match "List-Id" ALGO name bm TO 6500 LOG flags 0 level 4 
       5      276 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp dpt:80 LOG flags 0 level 4 

Chain FORWARD (policy DROP 0 packets, 0 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 23 packets, 4434 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       0        0 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp spt:80 STRING match "List-Id" ALGO name bm TO 6500 LOG flags 0 level 4 
       5      282 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           tcp spt:80 LOG flags 0 level 4 
```

在客户端：

```
Chain INPUT (policy ACCEPT 28 packets, 2187 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       1       66 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp spt:80 STRING match  "List-Id" ALGO name bm TO 6500 LOG flags 0 level 4
       5      282 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp spt:80 LOG flags 0 level 4

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
    pkts      bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 23 packets, 1721 bytes)
    pkts      bytes target     prot opt in     out     source               destination         
       1       60 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 STRING match  "List-Id" ALGO name bm TO 6500 LOG flags 0 level 4
       5      276 LOG        tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 LOG flags 0 level 4 
```

所以服务器没有输出规则匹配。服务器匹配 IN，客户端匹配 IN 和 OUT。

我不明白它是如何工作的:(

提前Tnx。

# c# - 从 C# 使用谷歌驱动 API

> ID：13412995
> 
> 赞同：3
> 
> 时间：2012-11-16T08:35:08.107
> 
> 标签：c#, .net, oauth-2.0, google-drive-api, google-api-dotnet-client

我需要从我的 UI .NET 应用程序中使用 Google Drive。我发现 Google 使用 OAuth 2.0 进行身份验证。问题是据我了解，[OAuth](http://oauth.net/)使用 HTTP 回调将您的令牌发回，但我没有运行网络服务器，它根本不是网络应用程序，这是否意味着我不能从 Windows 使用 Google Drive SDK窗体/Windows 控制台应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:42:46.167

该令牌将在对您的 Web 令牌请求的 Web 响应中返回给您。不需要网络服务器。

查看这些示例和资源

*   [使用 .NET 的 Twitter OAuth 身份验证](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)
*   [在 C# 中使用 OAuth 的简单指南](http://www.deanhume.com/Home/BlogPost/a-simple-guide-to-using-oauth-with-c-/49)
*   [oauth-dot-net](http://code.google.com/p/oauth-dot-net/)
*   [DotNetOpenAuth](http://www.dotnetopenauth.net/)

# objective-c - ALAssetsLibrary 不返回对象

> ID：13412998
> 
> 赞同：0
> 
> 时间：2012-11-16T08:35:22.573
> 
> 标签：objective-c

***编码***

```
if ( !_groups) {
    _groups = [[NSMutableArray alloc] init];
} else {
    [_groups removeAllObjects];
}

if (!_assetsLibrary) {
    _assetsLibrary = [[ALAssetsLibrary alloc] init];
}

ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop) {
    if ( group ) {
        DLog(@"group: %@", group);
        [_groups addObject:group];
        [self.tableView reloadData];
    }
};

ALAssetsLibraryAccessFailureBlock failureBlock = ^(NSError *error){
    DLog(@"error: %@", error);
};

NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces;
[_assetsLibrary enumerateGroupsWithTypes:groupTypes usingBlock:listGroupBlock failureBlock:failureBlock]; 
```

所以代码直接来自 WWDC 2010 演示。会议 421。

***问题***

`listGroupBlock`DLog 永远不会被调用。我的 _groups 数组是空的；从技术上讲，这个块被调用了 1 次，但`group`参数为 nil。

PS DLog 只是漂亮的 NSLog，其中包含类名和行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:16:01.333

问题是在我测试的设备 iPad 1 上，没有专辑/事件或面孔。

所以我改变了 groupType 从

`NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces;`

到

`NSUInteger groupTypes = ALAssetsGroupLibrary | ALAssetsGroupSavedPhotos | ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces;`