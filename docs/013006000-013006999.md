# StackOverflow 问答 13006000-13006999

# c# - 使用 LINQ 查询加密值

> ID：13006002
> 
> 赞同：4
> 
> 时间：2012-10-22T06:28:46.057
> 
> 标签：c#, linq, nhibernate, fluent-nhibernate

我有一个用户类，它的用户名需要加密保存在数据库中

```
public abstract class User
{
    public virtual int Id { get; protected set; }
    public virtual string Username
    {
        get
        {
            return _encryptionProvider.Decrypt(SecuredUsername);
        }
        protected set
        {
            SecuredUsername = _encryptionProvider.Encrypt(value);
        }
    }
    [Obsolete("Use the 'Username' property -- this property is only to be used by NHibernate")]
    protected virtual string SecuredUsername { get; set; }
} 
```

我将用户实体映射如下：

```
public class UserMapping : ClassMap<User>
{
    public UserBaseMapping()
    {
        Id(user => user.Id).GeneratedBy.HiLo("100");
        Map(Reveal.Member<UserBase>("SecuredUsername")).Unique();
    }
} 
```

在我不得不编写一些 LINQ 语句之前，它工作得很好。

```
User user = _session.QueryOver<User>().Where(x => x.Username == "Hamza").SingleOrDefault(); 
```

这里的问题是，当 LINQ 将上述语句转换为 SQL 时，它会变成这样： Select * from [dbo].[User] Where Username like 'Hamza'

正如您可能注意到的那样，表中没有名为用户名的列，而是securedusername，它包含加密值谁能帮我解决这个问题，我需要能够使用LINQ进行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:11:11.443

您可以使用自定义类型来加密您的用户名（而不是在 User 类中进行加密，而是在自定义类型中进行加密）参见[http://nhforge.org/blogs/nhibernate/archive/2009/02/22/加密密码或其他字符串在 nhibernate.aspx](http://nhforge.org/blogs/nhibernate/archive/2009/02/22/encrypting-password-or-other-strings-in-nhibernate.aspx)

当您查询时，您将只能查询完全匹配，但您将能够执行如下查询：

```
User user = _session.QueryOver<User>()
    .Where(x => x.Username == "Hamza")
    .SingleOrDefault(); 
```

如果要不区分大小写匹配，可以在自定义类型中将值转换为大写/小写。

如果您想做 LIKE 搜索，那么您将需要查看其他类型的索引 - 例如。Lucene.NET 和 NHibernate.Search

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:51:39.773

这个怎么样：

```
User user = _session.QueryOver<User>().Where(x => x.securedusername == _encryptionProvider("Hamza")).SingleOrDefault(); 
```

已编辑：您的查询有我在上面的评论中提到的问题。一种选择是，（这只能在用户名唯一的情况下完成，否则可能会发生冲突） 1\. 你必须想出一个对每个字符串值都是唯一的索引。对于 EX：

```
SAM = xyz(110111101)
SAMI = xyzk(110111101001) 
```

必须为数据库中的每个客户插入此索引。

然后你可以去喜欢：

```
`User user = _session.QueryOver<User>().Where(x => x.Index.Contains(IndexGenerator("Hamza"))).SingleOrDefault();//I do not know weather this Contains method exist in nhibernate`. But there should be. so find that :) 
```

但是这个查询会给出**一些不必要的值**，但是可以在编码中解密后使用实际用户名进一步过滤。这样就可以得到准确的搜索结果。

如果它是神秘的，你可以使用它`IndexGenerator`作为你的。`_encryptionProvider`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:20:07.060

我从未使用过NHibernate，但问题是Username 的定义是在模型中而不是在数据库中。

基本上你有两种选择（请记住，我从未真正使用过 NHibernate，而是其他实体框架/ORM），可能还有第三种选择，取决于 NHibernate 的 IQueryable 实现。

将整个表加载到内存中（如果它很小并且您经常执行此查询，这可能很有用，因为我猜 NHibernate 有一些智能缓存？）：

```
User user = _session.QueryOver<User>().ToList().FirstOrDefault(x => x.Username == "Hamza"); 
```

第二个是检查@Diode 提供的加密字符串：

```
// Resolve string, since we are using LINQ2SQSL in some form
var encName = _encryptionProvider.Encrypt("Hamza"); 
User user = _session.QueryOver<User>().FirstOrDefault(x => x.SecuredUsername == encName); 
```

如果您可以使用 IQueryable 的特定实例进行包装，那将是一种解决方案。查看[http://msdn.microsoft.com/en-us/library/bb351562.aspx](http://msdn.microsoft.com/en-us/library/bb351562.aspx)了解 IQueryable 的描述。

但基本上，加密必须发生在服务器上，即不在数据库中，这有点限制了您的选择。

**编辑：** 搜索匹配“Hamz *”的所有用户，我们必须加载到内存并在那里检查：

```
var users = _session.QueryOver<User>().ToList().Where(x => x.Username.StartsWith("Hamz")); 
```

# c++ - g ++抱怨对'_register_callback'的未定义引用

> ID：13006004
> 
> 赞同：0
> 
> 时间：2012-10-22T06:29:03.667
> 
> 标签：c++, c, linker, cygwin

我尝试使用 foo.def 文件通过 dlltool 创建的“.a 文件”在 Cygwin 下编译 dll。在 .def 文件中，我可以看到`register_callback`存在：

```
EXPORTS
    ...
    register_callback @7569
    ... 
```

.a 文件是使用`dlltool --def foo.def --output-lib libfoo.a`.

但是，当链接 main.o 文件时，g++ 抱怨 _register_callback 未定义。 `main.o:main.cpp:(.text+0x6e): undefined reference to '_register_callback'`

`g++ -shared -lfoo -o plugin.dll main.o`

`nm libfoo.a | grep 'register_callback'`显示：

```
00000000 b .bss$lazy_iregister_callback
00000000 r .rdata$lazy_iregister_callback
00000000 b __imp__register_callback
00000000 T _register_callback
00000000 b .bss$lazy_iunregister_callback
00000000 r .rdata$lazy_iunregister_callback
00000000 b __imp__unregister_callback
00000000 T _unregister_callback 
```

看起来有或没有 -lfoo 都没有区别。

任何解决此问题的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:34:00.110

```
g++ -shared -lfoo -o plugin.dll main.o 
```

应该

```
g++ -shared -o plugin.dll main.o -lfoo 
```

即将指定库的链接器标志移动**到命令行调用的末尾。**这对于较新版本的 GCC（而不是 GNU 工具链）是必需的，因为`ld`现在希望以符号相互依赖的相同顺序指定文件。

# javascript - JSON 中的函数

> ID：13006005
> 
> 赞同：3
> 
> 时间：2012-10-22T06:29:03.640
> 
> 标签：javascript, json

我有包含函数名称的 JSON：

```
{
 "login": "do_login",
 "logout": "do_logout"
} 
```

解析该 JSON 后是否可以调用函数`do_login`和`do_logout`？

我的意思是：

```
var obj = JSON.parse({"login": "do_login","logout": "do_logout"});
obj.login(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T06:30:39.907

我不确定我是否理解正确，但试试这个

```
window[obj.login](); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:38:42.083

您可能对 JSON 是什么感到困惑。JSON 是一个表示对象的字符串。您上面所拥有的称为对象文字。

JSON 字符串看起来像这样 "{\"login\":\"do_login\",\"logout\":\"do_logout\"}"

这是一个常见的错误，因为两者都有相似的布局。这绝非偶然。当 Crawford 提出 JSON 时，他以 javascript 对象文字为模型。

函数不会转换为 JSON 字符串，JSON.stringify 将忽略它们。

例子：

```
var foo = {
    bar: function() {
        console.log('bar');
    },
    something: 'something'

}

JSON.stringify(foo) // "{\"something\":\"something\"}" 
```

我可以在我的代码中运行 foo.bar() ，但这不是 JSON，它是一个 JS 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:37:33.260

你可以这样做：

```
var obj = function(){};
obj.login = function(){
 //login code
};

obj["login"]();//call login function 
```

这是一个措辞更好的例子：

```
var Functions = function(){};
Functions.do_login = function(){
 //login code
};
var callbacks = JSON.parse('{"login":"do_login","logout":"do_logout"}');
Functions[callbacks["login"]](); 
```

查看一个工作小提琴以查看它的实际效果：http: [//jsfiddle.net/hvx7m/2/](http://jsfiddle.net/hvx7m/2/)

# sitecore - 如何在 Sitecore 的发布工作流程之上执行工作单元模式？

> ID：13006009
> 
> 赞同：1
> 
> 时间：2012-10-22T06:29:20.720
> 
> 标签：sitecore, sitecore6

我想知道是否有人需要在 Sitecore 的发布工作流程之上实施工作单元模式？我们需要对具有多个链接的“子文章”的“文章”进行工作流，所有这些文章都在一个块中进行编辑，并且需要通过贡献、审查和签核状​​态进行工作流。有任何想法吗？

根据 Kevin Obee 评论更新 24.10.2012：

是的，这看起来很有趣！在此基础上，我们提出了一些类似的想法。与其为每个内容项创建一个临时工作流，不如创建一个临时的“捆绑项”——内容项包含对必须在“更改集”中的所有项的引用。因此，我们通过“更改设置工作流程”移动这个“捆绑项目”，当这种移动状态时，将更新其“内容项目工作流程”中包含的内容项目的状态。示例： 1\. 创建/编辑新内容项 -> 它创建一个新版本并显示自定义窗口以将其分配给“捆绑项”（该窗口将具有创建新“捆绑项”然后将内容项分配给它的功能) 2\. 一个“捆绑项目”可以包含对定义我们“更改集”的许多内容项目的引用。3.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:26:05.380

[早在 2011 年 10 月， Alex Shyba](http://sitecoreblog.alexshyba.com/)就向 Sitecore 虚拟用户组展示了一个工作流捆绑解决方案。

他的演示文稿是[来自 Sitecore 美国实验室的最新酷原型](http://sitecoreug.org/events/Latest%20Prototypes%20from%20Sitecore%20US)，您会在视频中的 50:35 处找到工作流捆绑说明。

### 更新：

据报道，截至 2012 年 10 月 23 日，工作流捆绑包仍然仅作为原型存在。也许亚历克斯可以被说服，需要一个看起来很棒的想法。

### 项目项目共享源模块发布

[John Penfold](http://profile.sitecore.net/Profile.aspx?userId=go4D6PznpsSdA3DgBP0qX7qZMfaDlVKY4w3AhA6qaAk=)在 Sitecore 市场中发布了他的[项目项目模块。](http://marketplace.sitecore.net/en/Modules/Project_Items.aspx)该模块将多个内容和媒体项目作为单个项目进行管理，确保在项目发布时自动发布它们。我上周在伦敦的 Sitecore 用户组看到 John 演示了该模块，它看起来很好地满足了您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:55:04.637

我将从每个项目保存事件的工作流管道开始。找到已更新的项目，如果它属于某个工作流，则拉取它的子文章并将它们附加到同一工作流（如果还没有）。当项目被批准时，您可能希望将其推送到队列（另一个数据库），直到其所有相关项目都被批准。一旦满足条件，运行批处理作业以最终发布队列中的所有项目。

# ios - [self.view addSubview:myView.view]; 奇怪的行为

> ID：13006012
> 
> 赞同：1
> 
> 时间：2012-10-22T06:29:49.300
> 
> 标签：ios

根据更新到 ios6 和 xcode 4.5 的要求，我开始使用 ios 5 和 xcode 4.3 进行项目。在此之后，我使用 .h、.m、.xib 文件创建了新的视图控制器，并尝试通过这些步骤将现有视图添加为子视图

*   #导入类
*   用 (strong, nonatomic) 创建了它的属性
*   @合成它
*   myView = [[MYView alloc]init]
*   最后 [self.view addSubview:myView.view]

包括这个在内的所有项目在 ios 6 中都可以正常工作，但只有我试图添加为子视图的这个新视图在 ios 5 中出现问题并出现此错误`Thread 1: signal SIGTRAP`。我尝试逐步调试，但随着 addsubview 执行应用程序崩溃。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:55:03.043

它应该是 [self.view addSubview:myView];

而且，您为查看创建了一个属性，您不需要进行分配。myView = [[MYView alloc]init]

内存分配会使您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:06:03.787

实际上是导致问题的自动布局

# opengl - 如何在 OpenGL 中动态启用/禁用纹理 mip-maps？

> ID：13006027
> 
> 赞同：4
> 
> 时间：2012-10-22T06:31:14.557
> 
> 标签：opengl, mipmaps

所以，**glGenerateMipMap**很棒。我想知道几件事：

*   假设纹理图像通过**glTexSubImage2D**更改，对 glGenerateMipMap 的另一个调用是 - 足够/需要/不必要？
*   假设最终用户应该能够即时“启用/禁用 mip-map”，当然 GL_TEXTURE_MIN_FILTER 必须相应地设置为 mipmap 与否。但是，之前生成的 mip-map 仍保留在 GPU VRAM 中，对吗？- 可以“提示”驱动程序删除这些吗？我是否必须重新上传原始纹理图像（但现在不再将 min-filtering 设置为 mipmap）以清除包含先前生成且现在不需要的 mip-map 的内存？

背景——在其他也需要对上述问题有更多见解的用例中，我还想“跟踪应用程序消耗的大约 GPU VRAM”（出于各种原因，例如可扩展的任意纹理/顶点流) --- 通过跟踪应用程序填充的 GL 缓冲区以及上传的纹理（确保它只是一个近似值但足够好）。跟踪它们的 mip-maps 也是必要的，因此知道如何清除它们或它们何时被当前 GL 实现清除将非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:09:44.637

> 假设纹理图像通过 glTexSubImage2D 更改，对 glGenerateMipMap 的另一个调用是 - 足够/需要/不必要？

如果您希望 mipmap 正确反映上传的基础级别，可以。`glGenerateMipmaps`是一次性操作，而不是您在纹理上翻转的开关。

> 但是，之前生成的 mip-map 仍保留在 GPU VRAM 中，对吗？- 可以“提示”驱动程序删除这些吗？

不要打扰。像这样告诉驱动程序取消分配内存总是一个坏主意。事实上，为同一个 mipmap 级别多次调用 glTexImage*（除非您正在上传立方体贴图面）是一个坏主意。

为了更清楚地解释这是为什么，请考虑相对较新的 OpenGL 函数[`glTexStorage2D`](http://www.opengl.org/wiki/GLAPI/glTexStorage2D)。这个函数的使用使得纹理的存储*不可变*。它*永远*有你说的那样的 mipmap 数量（当然直到你删除它）。

为什么？好吧，来自 ARB_texture_storage 扩展：

> 4：使用这些入口点是否应该使元数据（格式和维度）不可变？
> 
> 已解决：是的。
> 
> 讨论：知道元数据不能改变的好处可能会超过在每个纹理规范调用上检查 TEXTURE_IMMUTABLE_FORMAT 标志的额外成本。

ARB 看到了这方面的好处。事实上，没有它， [ARB_texture_view](http://www.opengl.org/registry/specs/ARB/texture_view.txt)可能是不可能的（或者至少效率很低）。很明显，这就是他们希望人们使用的东西。

如果您希望用户能够翻转该开关并实际重新获得一些内存，那么请正确执行：创建一个与*旧*纹理对象具有相同内容的新纹理对象。

无论如何，无论如何都无所谓，因为OpenGL没有办法释放mipmap层。

# git - 在不同的地理区域设置 Git

> ID：13006028
> 
> 赞同：1
> 
> 时间：2012-10-22T06:31:16.540
> 
> 标签：git

我们想在一个国家/地区的主 Git 服务器上设置，并在另一个国家/地区拥有一个缓存/代理服务器。我们处理巨大的文件大小，以便减少签入和签出的时间，我们希望采用这种方法。

我们如何设置缓存/代理 Git 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:18:25.483

这听起来像是镜像的想法，就像在这篇文章“[在 GitHub 上设置备份（镜像）存储库](https://wincent.com/wiki/Setting_up_backup_%28mirror%29_repositories_on_GitHub)”中一样。

在你的情况下，你不会使用 GitHub 作为你的镜像，但你会设置一个 cron 作业，以确保你的辅助服务器 git repo 与你的第一台服务器同步，为你的所有 repos 执行 do_push 。

```
do_push()
{
  for REPO in $1/*.git; do
    (cd $REPO && git push github)
  done
} 
```

# javascript - 这个语法是什么意思：？event.charCode : event.keyCode;

> ID：13006029
> 
> 赞同：2
> 
> 时间：2012-10-22T06:31:20.033
> 
> 标签：javascript

我对 JavaScript 还是很陌生，所以我仍然会遇到一些我不太了解并且在我搜索它们时似乎没有出现的小东西。请有人指出我是什么？: 语法在下面做。

```
var chCode = ('charCode' in event) ? event.charCode : event.keyCode; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T06:33:29.380

这称为[三元运算符](http://en.wikipedia.org/wiki/%3F:)。这是一个简短的`if...else`声明。

基本上，您的代码可以扩展到此。

```
var chCode;

if ('charCode' in event) {
    chCode = event.charCode;
} else {
    chCode = event.keyCode;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:33:27.710

它是三元运算符

> ?: 运算符可用作 if...else 语句的快捷方式。它通常用作较大表达式的一部分，其中 if...else 语句会很尴尬。

```
var chCode = ('charCode' in event) ? event.charCode : event.keyCode; 
```

如同

```
var chCode;

if ('charCode' in event) {
    chCode = event.charCode;
} else {
    chCode = event.keyCode;
}

test ? expression1 : expression2 
```

> expression1 = 如果测试为真则返回
> 表达式 expression2 = 如果为假

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:33:39.657

是[三元运算符](http://msdn.microsoft.com/en-us/library/be21c7hw%28v=vs.94%29.aspx)。

你的代码`?`应该看起来像

```
var chCode = ('charCode' in event) ? event.charCode : event.keyCode;

if('charCode' in event){
 chCode = event.charCode;
} else {
 chCode = event.keyCode;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T06:34:17.520

正如其他人所说，它是三元组。

你可以让它更简洁...

```
var chCode = event.charCode || event.keyCode; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T06:33:38.283

翻译：

```
var chCode;
if ('charCode' in event) chCode = event.charCode
else chCode = event.keyCode; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T06:35:07.537

**event.keyCode：**返回按键事件中的非字符键或任何其他类型的键盘事件中的任何键的 Unicode 值。

**event.charCode：**返回在按键事件期间按下的字符键的 Unicode 值。

--

[event.KeyCode 的链接](http://www.asquare.net/javascript/tests/KeyCode.html)

# json - 调用 json webservice 时的 Sencha 触摸问题

> ID：13006033
> 
> 赞同：0
> 
> 时间：2012-10-22T06:31:54.917
> 
> 标签：json, sencha-touch, extjs, sencha-touch-2, sencha-architect

我正在尝试从 sencha touch 调用部署在 localhost(Tomcat) 中的 json Web 服务，但是我收到了错误的请求响应，并且当我删除内容类型时，我收到了不受支持的类型。请帮我提供使用 sencha touch 的 json 服务的确切代码。

这是代码，

```
 Ext.Ajax.request({
        url:'../service/login.json',
        headers: {
        "Content-Type": "application/json"
    },
        method:'POST',
        params:{email:Ext.getCmp('login_field').getItems().items[0].getValue(),password:Ext.getCmp('login_field').getItems().items[1].getValue()},
        success:function(res,req){
            alert(res.reponseText);
            var data  = Ext.decode(res.responseText);
            if(data.responseMessage){
                Ext.getCmp('login_field').getItems().items[0].reset();
                Ext.getCmp('login_field').getItems().items[1].reset();
                if(!Ext.getCmp('MainPanel')){
                    Ext.Viewport.add({xtype: 'MainPanel'});
                }
                Ext.getCmp('MainPanel').show({type:'slideIn',direction:'left'});
                Ext.getCmp('LoginPanel').hide();

            }
    else{

            Ext.Msg.alert('Health Track','Invalid Login');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:43:47.497

这取决于您的服务消费和生产什么。如果要达到正确的端点（接受 json），则必须指定 'Content-Type': 'application/json'。如果您想获得 JSOn 响应，您还必须发送“Accept”标头，否则您将获得默认类型（在大多数情况下为 xml）。或者，您可以使用诸如在 url 中传递“_type=json”或在 url 中附加“.json”之类的技巧来获取 json 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:11:24.457

这是我在我的应用程序中使用的代码。请务必在您的浏览器或选择的工具中使用网络检查器来查看呼叫是否正在处理中。

```
Ext.Ajax.request({
    url: http://www.example.com,
    withCredentials: false,
    useDefaultXhrHeader: false,
    params: {
        login: foo@bar.baz,
        password: *******
    },

    callback: this.handleLoginCallback,
    scope:this
}); 
```

# django - 从 django admin 导入 csv 文件数据

> ID：13006034
> 
> 赞同：0
> 
> 时间：2012-10-22T06:31:54.777
> 
> 标签：django, import

我想创建将 csv 数据导入数据库。我在我的应用程序上添加了导入按钮。覆盖 app/change_list。按钮将被正确添加。我想添加单击“导入”按钮文件的操作将上传到同一模板页面。并且数据将被保存。我参考链接

[通过管理界面将数据从 CSV 导入 django](https://stackoverflow.com/questions/11519721/importing-data-into-django-from-csv-via-admin-interface?lq=1#comment15224902_11519795)

[扩展 Django Admin 以进行数据导入](https://stackoverflow.com/questions/7583177/extending-django-admin-for-data-import)

但我不明白管理过程。我想在弹出窗口中打开文件上传选项，如 image_file 上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:20:42.747

我编写并使用了以下代码：

```
import csv
def importcsv(request):
     if request.method == "POST":
        form = DataInput(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('Url/')
     else:
        form = DataInput()
        context = {"form": form}
        return render_to_response("imported.html", context,context_instance=RequestContext(request)) 
```

并在创建的 import.html 文件中具有以下形式

```
<form enctype="multipart/form-data" action="" method="post" id="importform"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-20T21:12:02.830

在 admin cookbook 网站上有一个非常好的上传 CSV 示例：

[https://books.agiliq.com/projects/django-admin-cookbook/en/latest/import.html](https://books.agiliq.com/projects/django-admin-cookbook/en/latest/import.html)

代码如下：

```
class CsvImportForm(forms.Form):
csv_file = forms.FileField()

@admin.register(Hero)
class HeroAdmin(admin.ModelAdmin, ExportCsvMixin):
...
change_list_template = "entities/heroes_changelist.html"

def get_urls(self):
    urls = super().get_urls()
    my_urls = [
        ...
        path('import-csv/', self.import_csv),
    ]
    return my_urls + urls

def import_csv(self, request):
    if request.method == "POST":
        csv_file = request.FILES["csv_file"]
        reader = csv.reader(csv_file)
        # Create Hero objects from passed in data
        # ...
        self.message_user(request, "Your csv file has been imported")
        return redirect("..")
    form = CsvImportForm()
    payload = {"form": form}
    return render(
        request, "admin/csv_form.html", payload
    ) 
```

# c# - 用户控件 C# 向导创建中的错误

> ID：13006035
> 
> 赞同：0
> 
> 时间：2012-10-22T06:32:01.983
> 
> 标签：c#, winforms, visual-studio

> Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Wizard
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e)
        {
            this.CurrentPage = page11;
            this.btnCancel.Enabled = false;
            this.btnFinish.Enabled = false;

            base.OnLoad(e);
        }

        private IPagePanel _currentPage;

        public IPagePanel CurrentPage
        {
            get
            {
                return _currentPage;
            }
            set
            {
                _currentPage = value;
            }
        }

        private void page11_Load(object sender, EventArgs e)
        {

        }

        private void btnNext_Click(object sender, EventArgs e)
        {
            if (this.CurrentPage == page11)
            {
                this.CurrentPage = (IPagePanel)page21;
                page21.Visible = false;
                page21.Visible = true;
                btnCancel.Enabled = true;
            }
            //else
            //{
            //    this.CurrentPage = _thirdPageWizardPanel;
            //    _secondPageWizardPanel.Visible = false;
            //    _thirdPageWizardPanel.Visible = true;
            //    _cmdNext.Enabled = false;
            //    _cmdFinish.Enabled = true;
            //}
        }
    }
} 
```

上面显示的代码是我想要创建的向导。Page1 和 Page2 是我使用的用户控制页面。

> IPagePanel.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Wizard
{
    public interface IPagePanel
    {
    }
} 
```

用户控件 Page1 和 Page2 位于 2 个单独的命名空间中。

```
namespace Page1
{
    partial class Page1
    {
        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary> 
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Component Designer generated code

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.lblDescription = new System.Windows.Forms.Label();
            this.SuspendLayout();
            // 
            // lblDescription
            // 
            this.lblDescription.AutoSize = true;
            this.lblDescription.Font = new System.Drawing.Font("Microsoft Sans Serif", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.lblDescription.Location = new System.Drawing.Point(228, 114);
            this.lblDescription.Name = "lblDescription";
            this.lblDescription.Size = new System.Drawing.Size(65, 20);
            this.lblDescription.TabIndex = 0;
            this.lblDescription.Text = "Page 1";
            // 
            // Page1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.Controls.Add(this.lblDescription);
            this.Name = "Page1";
            this.Size = new System.Drawing.Size(547, 278);
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.Label lblDescription;
    }
} 
```

错误信息：

> 错误 1 ​​无法将类型“Page1.Page1”隐式转换为“Wizard.IPagePanel”。存在显式转换（您是否缺少演员表？） 21 32 向导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:35:25.680

实施和`IPagePanel`_`Page1``Page2`

Page1.cs

```
public partial class Page1 : IPagePanel
{
    //Your implementation here
    ...
} 
```

Page2.cs

```
public partial class Page2 : IPagePanel
{
    //Your implementation here
    ...
} 
```

# asp.net - 在不影响性能的情况下广泛记录传入的 API 请求

> ID：13006044
> 
> 赞同：0
> 
> 时间：2012-10-22T06:33:18.627
> 
> 标签：asp.net, asp.net-mvc, api, rest, iis

我正在开发一个基于休息的 API。对于对 API 的每个请求，我都想记录有关该特定请求的大量信息——比如谁提出了请求，他要求了什么资源，跟踪这个客户要求这个资源的次数，他是什么信息感兴趣等等。

如何在不影响每个请求的响应时间的情况下做到这一点？我的想法是将所有这些日志信息写入缓存并将缓存过期时间设置为 5 分钟。然后，这 5 分钟内的所有传入请求都将写入同一个缓存对象。当缓存过期时（当它发生时可能会得到回调）我会将它写入数据库。

你看到这种方法有什么缺点吗？你有更好的建议吗？

PS！使用内置的 IIS 日志记录功能不是一种选择，因为它不够具体。

**更新：** 我在这里实际上要问的是，在 CacheItemRemoved 回调中进行数据库访问是否存在任何众所周知的问题？这是个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:55:42.720

异步编写绝对是要走的路。您提出的解决方案很复杂，而且效率不高。如果您不关心按顺序写入日志，最简单的方法是启动一个日志记录任务，例如：

```
Task.Run(() => logger.Log("stuff")); 
```

如果顺序很重要，您也可以考虑使用 ActionBlock。请参阅相关 SO 问题中的[Stephen Cleary 的示例。](https://stackoverflow.com/a/12121278/607701)

# c - 在 linux 中实现 ls -R 命令

> ID：13006045
> 
> 赞同：1
> 
> 时间：2012-10-22T06:33:23.867
> 
> 标签：c, linux, recursion

我想知道如何`ls -R`用 C 语言实现。它使用递归算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:36:57.020

这是相关的代码块

```
<includes...>
int f_recursive;        /* ls subdirectories also */
while ((ch = getopt(argc, argv, "1ABCFLRSTWabcdfghiklmnopqrstuwx")) != -1) {
    switch (ch) {
.
.
.
.
case 'R':
    f_recursive = 1;
    break; 
```

稍后，由于上面的**int**标志，目录列表是递归完成的。

**[在此处查看源代码。](http://cvsweb.netbsd.org/bsdweb.cgi/src/bin/ls/ls.c?rev=1.67&content-type=text/x-cvsweb-markup)**

**如果**您不跳过目录`.`和`..`.

不过，似乎没有在内部完成任何递归`ls.c`。它使用**[fts-functions](http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html)**，如 fts_children 来遍历层次结构。你可以使用相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:42:06.383

为了完整起见，ls 是 GNU coreutils 的一部分：www.gnu.org/software/coreutils/。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:46:27.413

“ls”（至少我知道的实现）使用`fts_open`, `fts_read`... 来遍历文件层次结构。这些是“非递归”方法，它们在内部维护访问目录的列表。

使用“man fts_read”或[http://linux.die.net/man/3/fts_read](http://linux.die.net/man/3/fts_read)获取有关这些函数的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-23T16:30:05.650

这是 C 语言中的一个简单的 linux`ls -R`实现。它提供类似于以下的彩色输出`ls`

```
#include <stdio.h>
#include <dirent.h>
#include <string.h>
#define GREEN   "\x1b[32m"
#define BLUE    "\x1b[34m"
#define WHITE   "\x1b[37m"

void Usage() {
    fprintf(stderr, "\nUsage: exec [OPTION]... [DIR]...\n");
    fprintf(stderr, "List DIR's (directory) contents\n");
    fprintf(stderr, "\nOptions\n-R\tlist subdirectories recursively\n");
    return;
}

void RecDir(char *path, int flag) {
    DIR *dp = opendir(path);
    if(!dp) {
        perror(path);
        return;
    }
    struct dirent *ep;
    char newdir[512];
    printf(BLUE "\n%s :\n" WHITE, path);
    while((ep = readdir(dp)))
        if(strncmp(ep->d_name, ".", 1))
            printf(GREEN "\t%s\n" WHITE, ep->d_name);
    closedir(dp);
    dp = opendir(path);
    while((ep = readdir(dp))) if(strncmp(ep->d_name, ".", 1)) {
        if(flag && ep->d_type == 4) {
            sprintf(newdir, "%s/%s", path, ep->d_name);
            RecDir(newdir, 1);
        }
    }
    closedir(dp);
}

int main(int argc, char **argv)
{
    switch(argc) {
    case 2:
        if(strcmp(argv[1], "-R") == 0) Usage();
        else RecDir(argv[1], 0);
        break;
    case 3:
        if(strcmp(argv[1], "-R") == 0) RecDir(argv[2], 1);
        else Usage();
        break;
    default: Usage();
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T06:45:39.643

我想这会对你有所帮助。

```
 void listDir(char *dirName)
 {
     DIR* dir;
     struct dirent *dirEntry;
     struct stat inode;
     char name[1000];
     dir = opendir(dirName);
     if (dir == 0) {
        perror ("Eroare deschidere fisier");
        exit(1);
     }
     while ((dirEntry=readdir(dir)) != 0) {
        sprintf(name,"%s/%s",dirName,dirEntry->d_name); 
        lstat (name, &inode);

        // test the type of file
        if (S_ISDIR(inode.st_mode))
           printf("dir ");
        else if (S_ISREG(inode.st_mode))
           printf ("fis ");
        else
          if (S_ISLNK(inode.st_mode))
            printf ("lnk ");
        else;
          printf(" %s\n", dirEntry->d_name);
  } 
```

# android - 如何获得Android传感器采样频率？

> ID：13006046
> 
> 赞同：0
> 
> 时间：2012-10-22T06:33:24.647
> 
> 标签：android, sensors

对于android设备，我只知道我们可以定义SensorManager的参数来调整传感器的采样率。但是有没有办法准确测量传感器的采样率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:04:36.903

GPS 以 1 Hz 的频率工作，您无法更改。如果您询问内部采样率，您必须检查设备中的 GPS 芯片并查看其规格。

您可以通过时间戳来测量其他传感器。但我看到设备的范围从每次加速调用 10 毫秒到 30 毫秒甚至更多（以最快的速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-31T10:06:25.370

您可以执行以下操作：

```
private float calculateSensorFrequency() {
    if (startTime == 0) {
        startTime = System.nanoTime();
    }
    long timestamp = System.nanoTime();
    return (count++ / ((timestamp - startTime) / 1000000000.0f));
} 
```

然后，以加速度计传感器为例，调用如下所示的*calculateSensorFrequency方法。*

```
@Override
public void onSensorChanged(SensorEvent sensorEvent) {
    int sensorType = sensorEvent.sensor.getType();
    switch (sensorType) {
    case Sensor.TYPE_ACCELEROMETER:
        System.out.println("Frequency: " + calculateSensorFrequency());
        break;
    default:
        throw new IllegalStateException("Unexpected value: " + sensorType);
    }
} 
```

计算出的频率显然取决于您设置的传感器延迟。

# android - 如何在 Android 上使用 SQLite 存储某个类的 ArrayList？

> ID：13006052
> 
> 赞同：1
> 
> 时间：2012-10-22T06:33:47.193
> 
> 标签：android, json, sqlite, arraylist, hashtable

我做了一些包含一些成员变量的类。

我应该像这样将这个类与其他类联系起来：

```
Hashtable<Class1 , ArrayList<Class2>> 
```

我想将此哈希表存储在 Android 上的 SQLite 中。我考虑序列化，字节流，但不确定我自己的类是否可行。有人说使用 JSON 对象。JSON 或 XML 创建是唯一的解决方案吗？

提前致谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:20:46.433

您可以使用 JSON 或 XML，但如果您想在数据库上运行查询，创建表会更好。如果 Class1 和 Class2 项目存储在表中，则哈希表对应于具有 Class1_ID 和 Class2_ID 等列的联结表。

# php - 调整与宽度和高度成比例的图像大小

> ID：13006057
> 
> 赞同：-3
> 
> 时间：2012-10-22T06:34:26.197
> 
> 标签：php, css

> **可能重复：**
> [如何创建比例图像高度/宽度](https://stackoverflow.com/questions/3380252/how-to-create-proportional-image-height-width)

高度应按比例调整，以使生成的缩略图不失真。但据我所知，没有像这样的属性

```
<IMG SRC=...... WIDTH=70 HEIGHT="Adjust proportional to Width"> 
```

PHP或css ..任何一个请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:41:19.160

您可以`width`改为在 CSS 中添加属性...
示例：http: [//jsfiddle.net/NbzDK/](http://jsfiddle.net/NbzDK/)

html

```
<img src="whatever.jpg" class="scaled" /> 
```

css

```
.scaled{
    width: 300px;
    /* height will adjust automatically to fit */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:55:47.867

哟也可以使用这种语法。

```
<IMG SRC=...... style="width:70px; height:auto;"> 
```

# objective-c - 编译器找不到我的框架头文件

> ID：13006065
> 
> 赞同：0
> 
> 时间：2012-10-22T06:34:53.900
> 
> 标签：objective-c, ios, xcode4.5

我创建了自己的 .framework，它有一个 .h 文件。当我使用这个框架时，我可以访问这个框架中的所有方法。这意味着它工作正常。但是当我尝试访问文件 .h （这是我的要求）时，我的应用程序无法找到标题。

我应该在用户标题搜索路径中进行任何其他设置吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:45:56.733

在您的框架中，将“安装目录”设置为@executable_path/../Frameworks。

此外，在您的目标下的应用程序项目中 -> 构建阶段 -> 添加“复制文件” -> 框架 -> 并删除您的框架。这应该可以解决问题。

[创建一个 Cocoa 框架](https://stackoverflow.com/questions/2945394/creating-a-cocoa-framework)

# java - 如何跟踪或至少检测无效的电子邮件地址

> ID：13006066
> 
> 赞同：2
> 
> 时间：2012-10-22T06:34:57.053
> 
> 标签：java, php, ruby, django, email

我正在使用 django。我只是想知道是否可以检查一封电子邮件是否正确，以便它一定会送达（99.99%）？如果用户输入了类似 的电子邮件`klsdfksdajkfdn@skjdnf.com`，从技术上讲，它是有效的电子邮件，但实际上并不存在。我可以检测到此类电子邮件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:42:12.490

我认为实现这一目标的唯一方法是提供一种机制，让您向其发送电子邮件的用户收到请求确认的链接。就像您订阅了许多网站一样。通过这个用户确认它是一个有效的电子邮件，然后你可以“信任”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:47:14.830

您无法在发送之前或之后检查电子邮件。但是你可以做*一些*可能覆盖 80% 的事情。

1.  您可以检查域。例如，如果用户给出的电子邮件是`foo@gmail.com`first ping `gmail.com`。如果它不存在，则可能是电子邮件错误的第一个危险信号。但要小心：可能该域的 ICMP 已被阻止。
2.  您可以收听自动回复消息，并尝试区分那些告诉您电子邮件不存在的消息。这是为了在域名正确时检测错误的用户名。但要小心：可能存在误报（如果您将外出回复识别为电子邮件不存在）或误报（如果您错过自动回复，因为它不包含预期的单词或用意想不到的语言写的）
3.  `IOException`如果您因为或类似的东西被抛出而无法发送电子邮件。但同样要小心：这可能意味着来自另一端的邮件服务器暂时不可用，或者您的计算机存在连接问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:44:47.980

如果您的意思是电子邮件**未**送达报告或“退回邮件”，那么跟踪它们并不是 Django 的权限范围。消息本身就是电子邮件，由邮件守护进程存放在您的邮箱中，因此您需要正确配置您的邮件服务器并处理通过除 Django 之外的某个系统传入的邮件。

如果您的意思是跟踪电子邮件的实际发送，则没有好的选择。“已读回执”仅由某些电子邮件客户端以不兼容的方式处理，所有这些都可能是基于电子邮件的，因此不会访问网络服务器。您可以嵌入具有唯一 URL 的图像（跟踪图像）并使用 Django 跟踪谁访问它，但是因为这有点侵犯隐私，一些电子邮件客户端（如 gmail）会阻止这些图像的加载（实际上，所有图像） 默认。

检查电子邮件是否正确同样复杂。您可以通过尝试直接查询该域的邮件服务器轻松确定地址的域部分是否真实，但只有一些邮件服务器会报告名称是否有效，而有些则不会。

到目前为止，最好的方法是简单地*发送一封确认电子邮件*并要求用户通过单击一个独特的链接来回复它，这会导致一个 Django 页面，该页面标记该电子邮件绝对正确。事实上，大多数使用电子邮件通信的网站都是这样做的。如果您只想要此功能而不需要其他与​​电子邮件/帐户相关的功能，请查看[http://code.google.com/p/django-email-confirmation/](http://code.google.com/p/django-email-confirmation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:32:36.643

我认为使用当前一代的电子邮件传输协议（即 SMTP）不可能有可靠的解决方案。几乎任何你能想到的尝试都被复杂性和“失败”案例所困扰，这些案例会给你带来误报或误报。

即使您甚至（似乎）将电子邮件发送到目标邮件服务器，您也无法知道它是否会发送给任何人......更不用说合适的人了。您甚至不能依赖目标服务器告诉您它无法交付。

实际上，您可能最好对电子邮件地址进行语法检查，并且（也许）查看电子邮件地址的域部分是否存在 DNS 条目。

* * *

请注意，在邮件传递中发生的许多混淆都是为了阻止垃圾邮件发送者。

# javascript - 变量的范围不会延伸到另一个文件

> ID：13006067
> 
> 赞同：0
> 
> 时间：2012-10-22T06:35:03.107
> 
> 标签：javascript, var

我有两个 html 文件：**log_in.html**和**edit_story_name.html**以及两个 javascript 文件**log_in.js**和**edit_story_name.js**。

我在 log_in.js 中初始化了一个对象变量。

**登录.js**

```
var User_Name= {value: "default_value"};    
var  Login_Password;

$(document).ready( function(){
$(' #public_User ').click( function(){

    $(' #log_in_account_txt ').val('publicUser');           
    $(' #log_in_psw ').val('publicUser');
    User_Name.value= "publicUser";

    alert("User_Name.value is"+ User_Name.value);
    window.open('edit_story_name.html','newwindow');        
});
}); 
```

当用户按下按钮“public_User”时，它会将对象变量的值分配为“pulicUser”。
然后将打开窗口“edit_story_name.html”。

**编辑故事名称.html：**

```
<!DOCTYPE>
<html>
<head>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.2.js"></s   ript>        

<script type="text/javascript" src="log_in.js"></script> 
<script type="text/javascript" src="edit_story_name.js"></script>
<link  type="text/css" href="edit_story_name.css" rel="Stylesheet"/>
</head>
<body>
<input id="input_story_name" type="text" value="">
</body>
</html> 
```

**编辑故事名称.js：**

```
window.addEventListener( "load",function(){
alert("User_Name.value is"+ User_Name.value);

if(User_Name.value == "publicUser"){
Story_Name="_story";
}else {                 

Story_Name= User_Name.value +"_story";
}

$(' #input_story_name').val(Story_Name);
}); 
```

基本上，在我按下 log_in.js 中的“public_User”按钮后，User_Name 的值应该更改为“publicUser”。但无论我多么努力，该值仍然是：“default_value”。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T06:39:06.767

Javascript 变量仅在单个网页的生命周期内持续存在。此外，每个浏览器窗口都有自己独立的状态。当您在同一窗口中转到另一个网页时，您的 javascript 脚本会从头开始重新初始化，并且不包含前一页中的任何值。

从一个页面保存某些状态以供其他页面使用的常用方法是：

1.  将值存储在 cookie 中
2.  将值存储在本地存储中（仅限现代浏览器）
3.  将值存储在网页可以检索它的服务器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:40:04.380

edit_story_name.html 在新窗口中打开，旧窗口中的所有变量都将丢失，因为 DOM 在新窗口中重新加载。

# nsis - 如何检查 nsis 中 installdir 上的可用空间？

> ID：13006071
> 
> 赞同：2
> 
> 时间：2012-10-22T06:35:33.387
> 
> 标签：nsis

我需要将一个 zip 文件捆绑到我的安装程序中。我需要 nsis 代码，以便它检查 installdir 上的可用空间并将其复制到变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:25:58.603

NSIS 有一个部分属性可以帮助您执行此操作：[AddSize](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#saddsize)。

如果您确实需要变量中的金额，则必须使用系统插件：

```
System::Call 'kernel32::GetDiskFreeSpaceEx(t"$instdir",*l.r1,*l,*l)'
DetailPrint $1 
```

或者如果您需要 Win9x/NT4 支持：

```
!include LogicLib.nsh

Function GetDiskFree
Exch $0
Push $1
System::Call 'kernel32::GetDiskFreeSpaceEx(tr0,*l0s,*l,*l)i.r1'
${If} $1 < 1
    Exch $2 ;Throw away result from Ex
    System::Call 'kernel32::SetCurrentDirectory(tr0)'
    System::Call 'kernel32::GetDiskFreeSpace(i0,*i0r1,*i0r0,*i0r2,*i)'
    System::Call 'kernel32::SetCurrentDirectory(to)'
    IntOp $1 $1 * $0
    System::Int64Op $1 * $2
    Exch
    Pop $2
${EndIf}
Exch 2
Pop $0
Pop $1
FunctionEnd

Section
Push $instdir
Call GetDiskFree
Pop $0
System::Int64Op $0 / 1024 ;to kb
Pop $1
DetailPrint "$1 KiB ($0)"
SectionEnd 
```

# c# - C# 中的正则表达式 - 如何在匹配中仅替换一个特定组？

> ID：13006076
> 
> 赞同：9
> 
> 时间：2012-10-22T06:35:46.770
> 
> 标签：c#, regex

我正在使用 C# 正则表达式解析文本。我只想为每场比赛替换一个特定的组。我是这样做的：

```
void Replace(){
  string newText = Regex.Replace(File.ReadAllText(sourceFile), myRegex, Matcher, RegexOptions.Singleline);
  //.......   
}

void string Matcher(Match m){
  // how do I replace m.Groups[2] with "replacedText"?
  return ""; // I want to return m.Value with replaced m.Group[2]
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T07:28:49.260

这应该这样做：

```
string Matcher(Match m)
{
    if (m.Groups.Count < 3)
    {
        return m.Value;
    }

    return string.Join("",  m.Groups
                             .OfType<Group>() //for LINQ
                             .Select((g, i) => i == 2 ? "replacedText" : g.Value)
                             .Skip(1) //for Groups[0]
                             .ToArray());
} 
```

示例：[http ://rextester.com/DLGVPA38953](http://rextester.com/DLGVPA38953)

**编辑：**尽管以上是您所写问题的答案，但您可能会发现零宽度环视对于您的实际情况更简单：

```
Regex.Replace(input, @"(?<=e)l+(?=o)", replacement) 
```

示例：[http ://rextester.com/SOWWS24307](http://rextester.com/SOWWS24307)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T06:51:32.887

你可以使用`MatchEvaluator`：试试这个。

```
var replaced = Regex.Replace(text, pattern, m => m.Groups[1] + "AA" + m.Groups[3]); 
```

我在 stackoverflow 中找到了一篇与此相关的帖子：观看[此](https://stackoverflow.com/questions/6005609/replace-some-groups-with-regex-but-maintain-the-entire-text)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T06:55:39.750

这个怎么样？

```
 static string Matcher(Match m)
    {
        var group = m.Groups[2];
        var startIndex = group.Index - m.Index;
        var length = group.Length;
        var original = m.Value;
        var prior = original.Substring(0, startIndex);
        var trailing = original.Substring(startIndex + length);
        return string.Concat(prior, "replacedText", trailing);
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T06:57:30.377

`Regex.Replace`将始终替换提供的正则表达式**匹配**的所有内容。

你有两种可能：

1.  仅匹配您要替换的内容

    或者

2.  使用捕获组将已匹配但应保留的原始字符串部分插入替换字符串。

您提供的信息不足，无法更具体地回答您的问题。例如，你真的需要一个`MatchEvaluator`吗？仅当您想为每个匹配项提供单独的替换字符串时，才需要这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-26T19:15:18.857

```
 private string ReplaceText(string originalText)
    {
        string replacedText = null;

        Regex regEx = new Regex("[your expression here]");

        Match match = regEx.Match(originalText);

        if (match.Success)
        {
            Group matchGroup = match.Groups[2];

            //[first part of original string] + [replaced text] + [last part of original string]
            replacedText =
                $"{originalText.Substring(0, matchGroup.Index)}[Your replaced string here]{originalText.Substring(matchGroup.Index + matchGroup.Length)}";

        }
        else
            replacedText = originalText;

        return replacedText;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T00:03:13.927

下面的代码将根据 groupValues 集合进行匹配并构造替换字符串。此集合指定组索引和替换它的值的文本。

与其他解决方案不同，它不需要将整个匹配包含在组中，只需要包含您希望包含在组中的匹配部分。

```
public static string ReplaceGroups(Match match, Dictionary<int, string> groupValues)
{
    StringBuilder result = new StringBuilder();

    int currentIndex = 0;
    int offset = 0;

    foreach (KeyValuePair<int, string> replaceGroup in groupValues.OrderBy(x => x.Key))
    {
        Group group = match.Groups[replaceGroup.Key];

        if (currentIndex < group.Index)
        {
            result.Append(match.Value.Substring(currentIndex, group.Index - match.Index - currentIndex));
        }

        result.Append(replaceGroup.Value);

        offset += replaceGroup.Value.Length - group.Length;
        currentIndex = group.Index - match.Index + group.Length;
    }

    return result.ToString();
} 
```

# biztalk - BizTalk 2010 和 ESB 2.1

> ID：13006079
> 
> 赞同：1
> 
> 时间：2012-10-22T06:36:15.930
> 
> 标签：biztalk, esb-toolkit-2.1

我是 ESB 2.1 的新手，我正在将 ESB 1.1 项目迁移到 ESB 2.1 和 BizTalk 2010。我已经开发了使用行程文件并将数据推送到 SQL 服务器的应用程序。我没有行程项目 我有行程 xml 文件（行程以 xml 格式导出。）

现在，当我收到的端口获取任何记录时，它会在 C:\Projects\Microsoft.Practices.ESB\Source\Samples\Exception Handling\Test\Filedrop\All_Exceptions\Exceptions_{B240CD10-240B-4CF9-8E58-C231036748F3} 中创建 xml 文件。 xml 包含以下 msg 的 xml。

```
<Application>MOMIntegration</Application> 
  <Description>Object reference not set to an instance of an object.</Description> 
  <ErrorType>NullReferenceException</ErrorType> 
  <FailureCategory>Routing Failure</FailureCategory> 
  <FaultCode>2111</FaultCode> 
  <FaultDescription>Exception while attempting to work with Itinerary Step</FaultDescription> 
  <FaultSeverity>4</FaultSeverity> 
  <Scope>Construct Routing and Resolutoin Fault Message</Scope> 
  <ServiceInstanceID>3f5e22bc-2402-4f91-8996-22dcec3d4691</ServiceInstanceID> 
  <ServiceName>RGICLMOMIntegrationv2.MOMProcessor</ServiceName> 
  <FaultGenerator>Orchestration</FaultGenerator> 
  <MachineName>WIN-D3LS3QFCT5S</MachineName> 
  <DateTime>2012-10-22T06:00:52.209Z</DateTime> 
  <ControlBit>1</ControlBit> 
  <MessageID>b240cd10-240b-4cf9-8e58-c231036748f3</MessageID> 
  <ActivityIdentity /> 
  <NACK>false</NACK> 
  </Header>
- <ExceptionObject>
  <Message>Object reference not set to an instance of an object.</Message> 
  <Type>System.NullReferenceException</Type> 
  <Source>RGICLMOMIntegrationv2</Source> 
  <TargetSite>Microsoft.XLANGs.Core.StopConditions segment2(Microsoft.XLANGs.Core.StopConditions)</TargetSite> 
  <StackTrace>at RGICLMOMIntegrationv2.MOMProcessor.segment2(StopConditions stopOn) at Microsoft.XLANGs.Core.SegmentScheduler.RunASegment(Segment s, StopConditions stopCond, Exception& exp)</StackTrace> 
  <InnerExceptionMessage /> 
  </ExceptionObject> 
```

请让我知道我哪里出错了。提前致谢。

# iphone - 如何在 iphone 的 url 中发布和检索数据

> ID：13006084
> 
> 赞同：0
> 
> 时间：2012-10-22T06:36:35.833
> 
> 标签：iphone, ios, url

我想将输入数据发布到特定的 URL 并接收它的响应并在视图中显示响应数据，谁能建议我如何使用示例代码来实现它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:41:47.007

您可以使用以下方法通过 url 检索数据：

```
NSData* data = [NSData dataWithContentsOfURL: 
          yourURL]; 
```

这`yourURL`是 NSURL 类型。它可以形成如下：

```
NSString *urlString = @"http://www.example.com";
NSURL *yourURL = [NSURL URLWithString:urlString]; 
```

这是一种同步方法，因此它会阻塞 UI，因此您需要在另一个中调用它`thread`或使用`dispatch_async`

此[链接](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)可以帮助您：

# sql-server - 我需要将子查询中的多行组合成一个用空格分隔的字符串

> ID：13006091
> 
> 赞同：1
> 
> 时间：2012-10-22T06:37:16.023
> 
> 标签：sql-server, sql-server-2008, tsql

我正在创建一个带有相册的图片库。图库所有者可以先创建一个或多个相册，然后创建图像以添加到这些相册。我不得不使用多个视图模板来实现这一点。无论如何，这就是让我感到困惑的原因。这是我的存储过程的核心：

```
DECLARE @MyString VARCHAR(MAX)

SELECT @MyString = ISNULL(@MyString + ' ', ' ') + CAST(AlbumID AS VARCHAR(10)) + ' '
FROM BD_AlbumGallery
WHERE ImageID = PROBLEM HERE... Dont know what to do <---
ORDER BY AlbumID

SELECT a.[ImageID]
      ,a.ImageFile
      ,a.[ImageTitle]
      ,a.[ImageCaption]
      ,a.[Description]
      ,a.[Active]
      ,b.[AlbumID]
      ,b.[ImageID]
      ,c.[ListingID]
      ,c.[Active]
      ,c.[LevelID]
      ,c.[Title]

      ,@MyString AS AlbumClass

FROM BD_Gallery A
JOIN BD_AlbumGallery B
ON a.ImageID = b.ImageID
JOIN BD_Listing C
ON a.ListingID = c.ListingID
WHERE a.ListingID = @passedListingID
  AND a.Active = 1
  AND c.Active = 1
  AND c.LevelID > 5 
```

所以问题是，数据是在一个 LI 中检索的，当然一次一个……猜这是显而易见的……在我的画廊模板中正确显示。

我遇到的唯一问题是我需要将 @MyString AS AlbumClass 绑定到 a.ImageID 或 b.ImageID，因为它们是相同的。

原因是，模板中的相册是由一个类定义的。

```
<li class="12 24 15 17">Rest of my code for a single image result</li> 
```

因此，AlbumID 被用作类名允许我将它们分配给 jQuery 下拉类别/专辑列表，该列表位于此之前的模板中。我在想一个子查询。最终，我需要将结果（出于其他原因）显示在一个结果集中。

请帮助.. 仍然试图通过学习曲线推动我的方式。

谢谢！

*   帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:43:12.137

```
select
    a.[ImageID], 
    a.ImageFile,
    a.[ImageTitle],
    a.[ImageCaption],
    a.[Description],
    a.[Active],
    c.[ListingID],
    c.[Active],
    c.[LevelID],
    c.[Title],
    stuff
    (
        (
        select ' ' + CAST(TT.AlbumID AS VARCHAR(10))
        from BD_AlbumGallery as TT
        where TT.[ImageID] = A.[ImageID]
        for xml path(''), type
        ).value('data(.)', 'nvarchar(max)')
    , 1, 1, '') as Listings
from BD_Gallery as A
    left outer join BD_Listing as C on a.ListingID = c.ListingID
where
    a.ListingID = @passedListingID and
    a.Active = 1 and c.Active = 1 and
    c.LevelID > 5 
```

# selenium - Selenium 核心，htmlsuite 不为 firefox 生成

> ID：13006096
> 
> 赞同：0
> 
> 时间：2012-10-22T06:38:04.977
> 
> 标签：selenium

result.html 是为 * chrome 和 * safariProxy 生成的。因为 Firefox 是空的。问题是什么？

跑：

```
java -jar selenium-server-standalone-2.25.0.jar -singleWindow -htmlSuite "*firefox" "http://www.site.cz" "/Volumes/HTDOCS/temp/side/site.html" "/Volumes/HTDOCS/temp/side/results.html" -p 51013 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:27:23.613

尝试删除浏览器名称中的引号

# ios - ios：区分程序调用未接和拒绝接听

> ID：13006098
> 
> 赞同：0
> 
> 时间：2012-10-22T06:38:35.893
> 
> 标签：ios, core-telephony

我需要制作一个 iphone 应用程序，它以编程方式拨打一个手机号码，当没有应答时拨打另一个号码。我使用核心电话框架来了解拨号或连接的呼叫状态。但是在这两种情况下，我都将通话状态设为已断开：如果被叫方未接听电话，并且他拒绝通过断开连接来接听电话。有没有办法区分我的应用程序的呼叫是被被叫方断开还是由于未接听而自动断开？这是我的代码

```
CTCallCenter *callCenter = [[CTCallCenter alloc] init];

callCenter.callEventHandler=^(CTCall* call)
{
    if (call.callState == CTCallStateDisconnected)
    { 
        NSLog(@"Call has been disconnected");            
    }
    else if (call.callState == CTCallStateConnected) 
    {
        NSLog(@"Call has just been connected");
    }
    else if(call.callState == CTCallStateDialing)
    {
        NSLog(@"Call is dialing");
    }
    else
    {
        NSLog(@"None of the conditions");
    }

}; 
```

对于我的问题，我将不胜感激任何想法或解决方案。

# android - 适用于 Android 的 SetOnClickListener Mono

> ID：13006104
> 
> 赞同：0
> 
> 时间：2012-10-22T06:39:30.860
> 
> 标签：android

我正在关注如何使用 Mono For Android 创建登录和注册过程的示例代码。该示例是用 java 开发的，我一直坚持如何在 Mono For Android 中实现 setOnClickListener。

请找到以下代码。

```
public class LoginActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setting default screen to login.xml
        setContentView(R.layout.login);

        TextView registerScreen = (TextView) findViewById(R.id.link_to_register);

        // Listening to register new account link
        registerScreen.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // Switching to Register screen
                Intent i = new Intent(getApplicationContext(), RegisterActivity.class);
                startActivity(i);
            }
        });
    }
} 
```

有人可以指导我如何做到这一点。

- 编辑

```
public class LoginActivity : Activity
{
    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);
        SetContentView(Resource.Layout.LoginLayout);
        TextView registerScreen = (TextView)FindViewById(Resource.Id.link_to_register);
        registerScreen.Click += (sender, e) => 
        {
            Intent i = new Intent(this, typeof(RegisterActivity));
            this.StartActivity(i);
        };
    }
} 
```

谢谢和问候，克莱泽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T15:08:18.867

试试这个以获得更短的代码

```
TextView tV = (TextView)app.FindViewById(Resource.Id.mytextview);
tV.Click += (s, e) => 
{ 
   StartActivity(typeof(RegisterActivity));

   //this is what you currently have
   //var registerActivity = new Intent (this, typeof(RegisterActivity));
   //StartActivity(registerActivity);  
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:58:38.033

你把这个添加到你的`AndroidManifest.xml`?

```
<activity
    android:name=".RegisterActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.REGISTERACTIVITY" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:11:22.820

在setonclicklistener之前写下下面的代码，它会解决你的问题。

```
registerScreen.setText(Html.fromHtml("<font color='#007FFF'><u>Click to Open Next Activity</u></font>"));
registerScreen.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# php - cURL 错误：[60] 用于使用 Paypal 的 IPN 的 php

> ID：13006107
> 
> 赞同：2
> 
> 时间：2012-10-22T06:39:36.477
> 
> 标签：php, curl, certificate, paypal-ipn

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我正在使用 cpanel 来管理网站。我已经设置了一个 ipn.php 文件和一个 ipnlistener.php 文件来从我的站点收听来自 Paypal 的 IPN。我还设置了一个 ipn_errors.log 文件来记录错误。错误日志显示以下错误：cURL error: [60] error setting certificate verify locations: CAfile: /home/wwwplrma/public_html/cert/api_cert_chain.crt CApath: none

我在 public_html 目录中看不到任何此类证书。文件的权限是否有任何问题，或者此错误是否与其他问题有关？ipn.php 和 ipnlistener.php 的权限设置为 644，ipn_errors.log 的权限设置为 775 提前谢谢！

我的代码如下：

ipn_errors.log：

> [22-Oct-2012 00:32:49] cURL 错误：[60] 错误设置证书验证位置：CAfile：/home/wwwplrma/public_html/cert/api_cert_chain.crt CApath：无
> 
> [2012 年 10 月 22 日 00:42:57] cURL 错误：[60] 错误设置证书验证位置：CAfile：/home/wwwplrma/public_html/cert/api_cert_chain.crt CApath：无

ipn.php：

```
<?php
/*
ipn.php - example code used for the tutorial:

PayPal IPN with PHP
How To Implement an Instant Payment Notification listener script in PHP
http://www.micahcarrick.com/paypal-ipn-with-php.html

(c) 2011 - Micah Carrick
*/

// tell PHP to log errors to ipn_errors.log in this directory
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

// intantiate the IPN listener
include('ipnlistener.php');
$listener = new IpnListener();

// tell the IPN listener to use the PayPal test sandbox
$listener->use_sandbox = true;

// try to process the IPN POST
try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

if ($verified) {

    $errmsg = '';   // stores errors from fraud checks

    //Check if received verified. Delete later.
    error_log("Post Method Verified");

    // 1\. Make sure the payment status is "Completed" 
    if ($_POST['payment_status'] != 'Completed') { 
        // simply ignore any IPN that is not completed
        exit(0); 
    }

    // 2\. Make sure seller email matches your primary account email.
    if ($_POST['receiver_email'] != 'support@****.com') {
        $errmsg .= "'receiver_email' does not match: ";
        $errmsg .= $_POST['receiver_email']."\n";
    }

    // 3\. Make sure the amount(s) paid match
    if ($_POST['mc_gross'] != '7.00') {
        $errmsg .= "'mc_gross' does not match: ";
        $errmsg .= $_POST['mc_gross']."\n";
    }

    // 4\. Make sure the currency code matches

    if ($_POST['mc_currency'] != 'USD') {
        $errmsg .= "'mc_currency' does not match: ";
        $errmsg .= $_POST['mc_currency']."\n";
    }

    // 5\. Ensure the transaction is not a duplicate.
    /*
    mysql_connect('localhost', 'DB_USER', 'DB_PW') or exit(0);
    mysql_select_db('DB_NAME') or exit(0);

    $txn_id = mysql_real_escape_string($_POST['txn_id']);
    $sql = "SELECT COUNT(*) FROM orders WHERE txn_id = '$txn_id'";
    $r = mysql_query($sql);

    if (!$r) {
      error_log(mysql_error());
       exit(0);
    }

    $exists = mysql_result($r, 0);
    mysql_free_result($r);

    if ($exists) {
        $errmsg .= "'txn_id' has already been processed: ".$_POST['txn_id']."\n";
    }
    */
    if (!empty($errmsg)) {

        // manually investigate errors from the fraud checking
        $body = "IPN failed fraud checks: \n$errmsg\n\n";
        $body .= $listener->getTextReport();
        mail('****@gmail.com', 'IPN Fraud Warning', $body);

    } else {

    //Test email for successful transaction IPN
    mail('****@gmail.com', 'Valid IPN with successful transaction', $listener->getTextReport());
    //error_log($listener->getTextReport());
    /*
        // add this order to a table of completed orders
        $payer_email = mysql_real_escape_string($_POST['payer_email']);
        $mc_gross = mysql_real_escape_string($_POST['mc_gross']);
        $sql = "INSERT INTO orders VALUES 
                (NULL, '$txn_id', '$payer_email', $mc_gross)";

        if (!mysql_query($sql)) {
            error_log(mysql_error());
            exit(0);
        }

        // send user an email with a link to their digital download
        $to = filter_var($_POST['payer_email'], FILTER_SANITIZE_EMAIL);
        $subject = "Your digital download is ready";
        mail($to, "Thank you for your order", "Download URL: ...");
        */

    }

} else {
    //Check if received. Delete later
     error_log("Post Method Unverified");
    // manually investigate the invalid IPN
    mail('****@gmail.com', 'Invalid IPN', $listener->getTextReport());
}

?> 
```

ipnlistener.php：

```
<?php
/**
 *  PayPal IPN Listener
 *
 *  A class to listen for and handle Instant Payment Notifications (IPN) from 
 *  the PayPal server.
 *
 *  https://github.com/Quixotix/PHP-PayPal-IPN
 *
 *  @package    PHP-PayPal-IPN
 *  @author     Micah Carrick
 *  @copyright  (c) 2012 - Micah Carrick
 *  @version    2.1.0
 */
class IpnListener {

    /**
     *  If true, the recommended cURL PHP library is used to send the post back 
     *  to PayPal. If flase then fsockopen() is used. Default true.
     *
     *  @var boolean
     */
    public $use_curl = true;     

    /**
     *  If true, explicitly sets cURL to use SSL version 3\. Use this if cURL
     *  is compiled with GnuTLS SSL.
     *
     *  @var boolean
     */
    public $force_ssl_v3 = true;     

    /**
     *  If true, cURL will use the CURLOPT_FOLLOWLOCATION to follow any 
     *  "Location: ..." headers in the response.
     *
     *  @var boolean
     */
    public $follow_location = false;     

    /**
     *  If true, an SSL secure connection (port 443) is used for the post back 
     *  as recommended by PayPal. If false, a standard HTTP (port 80) connection
     *  is used. Default true.
     *
     *  @var boolean
     */
    public $use_ssl = true;      

    /**
     *  If true, the paypal sandbox URI www.sandbox.paypal.com is used for the
     *  post back. If false, the live URI www.paypal.com is used. Default false.
     *
     *  @var boolean
     */
    public $use_sandbox = false; 
    /**
     *  The amount of time, in seconds, to wait for the PayPal server to respond
     *  before timing out. Default 30 seconds.
     *
     *  @var int
     */
    public $timeout = 30;       

    private $post_data = array();
    private $post_uri = '';     
    private $response_status = '';
    private $response = '';

    const PAYPAL_HOST = 'www.paypal.com';
    const SANDBOX_HOST = 'www.sandbox.paypal.com';

    /**
     *  Post Back Using cURL
     *
     *  Sends the post back to PayPal using the cURL library. Called by
     *  the processIpn() method if the use_curl property is true. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function curlPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'https://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        } else {
            $uri = 'http://'.$this->getPaypalHost().'/cgi-bin/webscr';
            $this->post_uri = $uri;
        }

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
        curl_setopt($ch, CURLOPT_CAINFO, 
                    dirname(__FILE__)."/cert/api_cert_chain.crt");
        curl_setopt($ch, CURLOPT_URL, $uri);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded_data);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $this->follow_location);
        curl_setopt($ch, CURLOPT_TIMEOUT, $this->timeout);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, true);

        if ($this->force_ssl_v3) {
            curl_setopt($ch, CURLOPT_SSLVERSION, 3);
        }

        $this->response = curl_exec($ch);
        $this->response_status = strval(curl_getinfo($ch, CURLINFO_HTTP_CODE));

        if ($this->response === false || $this->response_status == '0') {
            $errno = curl_errno($ch);
            $errstr = curl_error($ch);
            throw new Exception("cURL error: [$errno] $errstr");
        }
    }

    /**
     *  Post Back Using fsockopen()
     *
     *  Sends the post back to PayPal using the fsockopen() function. Called by
     *  the processIpn() method if the use_curl property is false. Throws an
     *  exception if the post fails. Populates the response, response_status,
     *  and post_uri properties on success.
     *
     *  @param  string  The post data as a URL encoded string
     */
    protected function fsockPost($encoded_data) {

        if ($this->use_ssl) {
            $uri = 'ssl://'.$this->getPaypalHost();
            $port = '443';
            $this->post_uri = $uri.'/cgi-bin/webscr';
        } else {
            $uri = $this->getPaypalHost(); // no "http://" in call to fsockopen()
            $port = '80';
            $this->post_uri = 'http://'.$uri.'/cgi-bin/webscr';
        }

        $fp = fsockopen($uri, $port, $errno, $errstr, $this->timeout);

        if (!$fp) { 
            // fsockopen error
            throw new Exception("fsockopen error: [$errno] $errstr");
        } 

        $header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
        $header .= "Host: ".$this->getPaypalHost()."\r\n";
        $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $header .= "Content-Length: ".strlen($encoded_data)."\r\n";
        $header .= "Connection: Close\r\n\r\n";

        fputs($fp, $header.$encoded_data."\r\n\r\n");

        while(!feof($fp)) { 
            if (empty($this->response)) {
                // extract HTTP status from first line
                $this->response .= $status = fgets($fp, 1024); 
                $this->response_status = trim(substr($status, 9, 4));
            } else {
                $this->response .= fgets($fp, 1024); 
            }
        } 

        fclose($fp);
    }

    private function getPaypalHost() {
        if ($this->use_sandbox) return self::SANDBOX_HOST;
        else return self::PAYPAL_HOST;
    }

    /**
     *  Get POST URI
     *
     *  Returns the URI that was used to send the post back to PayPal. This can
     *  be useful for troubleshooting connection problems. The default URI
     *  would be "ssl://www.sandbox.paypal.com:443/cgi-bin/webscr"
     *
     *  @return string
     */
    public function getPostUri() {
        return $this->post_uri;
    }

    /**
     *  Get Response
     *
     *  Returns the entire response from PayPal as a string including all the
     *  HTTP headers.
     *
     *  @return string
     */
    public function getResponse() {
        return $this->response;
    }

    /**
     *  Get Response Status
     *
     *  Returns the HTTP response status code from PayPal. This should be "200"
     *  if the post back was successful. 
     *
     *  @return string
     */
    public function getResponseStatus() {
        return $this->response_status;
    }

    /**
     *  Get Text Report
     *
     *  Returns a report of the IPN transaction in plain text format. This is
     *  useful in emails to order processors and system administrators. Override
     *  this method in your own class to customize the report.
     *
     *  @return string
     */
    public function getTextReport() {

        $r = '';

        // date and POST url
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n[".date('m/d/Y g:i A').'] - '.$this->getPostUri();
        if ($this->use_curl) $r .= " (curl)\n";
        else $r .= " (fsockopen)\n";

        // HTTP Response
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n{$this->getResponse()}\n";

        // POST vars
        for ($i=0; $i<80; $i++) { $r .= '-'; }
        $r .= "\n";

        foreach ($this->post_data as $key => $value) {
            $r .= str_pad($key, 25)."$value\n";
        }
        $r .= "\n\n";

        return $r;
    }

    /**
     *  Process IPN
     *
     *  Handles the IPN post back to PayPal and parsing the response. Call this
     *  method from your IPN listener script. Returns true if the response came
     *  back as "VERIFIED", false if the response came back "INVALID", and 
     *  throws an exception if there is an error.
     *
     *  @param array
     *
     *  @return boolean
     */    
    public function processIpn($post_data=null) {

        $encoded_data = 'cmd=_notify-validate';

        if ($post_data === null) { 
            // use raw POST data 
            if (!empty($_POST)) {
                $this->post_data = $_POST;
                $encoded_data .= '&'.file_get_contents('php://input');
            } else {
                throw new Exception("No POST data found.");
            }
        } else { 
            // use provided data array
            $this->post_data = $post_data;

            foreach ($this->post_data as $key => $value) {
                $encoded_data .= "&$key=".urlencode($value);
            }
        }

        if ($this->use_curl) $this->curlPost($encoded_data); 
        else $this->fsockPost($encoded_data);

        if (strpos($this->response_status, '200') === false) {
            throw new Exception("Invalid response status: ".$this->response_status);
        }

        if (strpos($this->response, "VERIFIED") !== false) {
            return true;
        } elseif (strpos($this->response, "INVALID") !== false) {
            return false;
        } else {
            throw new Exception("Unexpected response from PayPal.");
        }
    }

    /**
     *  Require Post Method
     *
     *  Throws an exception and sets a HTTP 405 response header if the request
     *  method was not POST. 
     */    
    public function requirePostMethod() {
        // require POST requests
        if ($_SERVER['REQUEST_METHOD'] && $_SERVER['REQUEST_METHOD'] != 'POST') {
            header('Allow: POST', true, 405);
            throw new Exception("Invalid HTTP request method.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:59:20.250

由于这对您有所帮助，因此我将其添加为答案；希望它也会对其他人有所帮助，但我以某种方式怀疑它:)

中的代码`ipnlistener.php`用于`CURLOPT_CAINFO`指定证书链的路径，因此必须存在于服务器上：

```
/home/wwwplrma/public_html/cert/api_cert_chain.crt 
```

# asp.net - 在服务器离线的情况下如何处理 LdapConnection 超时

> ID：13006111
> 
> 赞同：0
> 
> 时间：2012-10-22T06:39:53.673
> 
> 标签：asp.net, c#-4.0, openldap

我正在与活动目录交互并执行某些用户操作的网站上工作。我想在服务器离线的情况下处理超时情况。我正在这样编码

```
LdapConnection connection = new LdapConnection(new LdapDirectoryIdentifier(this._domain,    Convert.ToInt32(this._port)));
connection.SessionOptions.VerifyServerCertificate = new  VerifyServerCertificateCallback((con, cer) => true);
connection.SessionOptions.ProtocolVersion = 3; 
connection.AuthType = AuthType.Basic; 
connection.SessionOptions.SecureSocketLayer = true;
connection.Timeout = new TimeSpan(0, 0, 10); 
```

# php - 如何删除默认值Zend FormErrors 中的标签

> ID：13006113
> 
> 赞同：0
> 
> 时间：2012-10-22T06:40:03.513
> 
> 标签：php, zend-framework, zend-form, zend-decorators

我是相当新的 Zend 框架，我被卡住了。

以下代码是我遇到问题的表单装饰器设置的片段：

```
// prepend errors to top
$this->setDecorators(
    array(
        'FormElements',
        'Form',
        array(
            'FormErrors',
             array(
                'placement' => Zend_Form_Decorator_Abstract::PREPEND
             )
         )
    )
); 
```

在视图上呈现错误时，我得到以下信息：

```
 <ul class="form-errors">
       <li>
          <b>First Name: </b>
          <ul class="errors">
             <li>You forgot to enter your First Name.</li>
          </ul>
       </li>
    </ul> 
```

你如何删除所有的 html 包括标签`<b>First Name: </b>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:45:59.667

只需创建自定义装饰器，尝试这样的事情

```
protected $_errorDecorator = array(
    'markupElementLabelEnd'   => '',
    'markupElementLabelStart' => '',
    'placement'=>Zend_Form_Decorator_Abstract::PREPEND
);

$this->setDecorators(array('FormElements','Form',
    array('FormErrors',
    $_errorDecorator))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T21:03:24.053

我意识到我参加聚会有点晚了，但由于这是 Google 的前 5 名结果，但仍未得到答复，我想我会做出贡献。

最好的方法是扩展 Zend 装饰器，重载`renderLabel`方法，添加`renderLabels`配置选项，然后检查它是否已设置。如果是这样，请不要调用呈现标签的父函数。

```
$form->setDecorators(
    array(
        'FormElements',
        'Form',
        array(
            'FormErrors',
             array(
                'placement' => 'prepend',
                'renderLabels' => false
             )
         )
    )
);

class My_Form_Decorator_FormErrors extends Zend_Form_Decorator_FormErrors
{
    /**
     * @see Zend_Form_Decorator_FormErrors::renderLabel()
     */
    public function renderLabel(Zend_Form_Element $element, Zend_View_Interface $view)
    {
        if ($this->getOption('renderLabels') === false) {
            return;
        }

        return parent::renderLabel($element, $view);
    }
} 
```

# javascript - 如何与画布一起打印 HTML 页面？

> ID：13006116
> 
> 赞同：2
> 
> 时间：2012-10-22T06:40:10.687
> 
> 标签：javascript, html, canvas

我正在开发一个 HTML5 项目。我有一个容器（div）和一些在容器上绘制的形状（画布）。如何打印整个文档（div + canvas）？

# java - 使用 Java 删除 CSS 注释

> ID：13006119
> 
> 赞同：0
> 
> 时间：2012-10-22T06:40:20.837
> 
> 标签：java, netbeans, compiler-construction, jlist, jfilechooser

我正在尝试用Java制作一个小程序，我需要它从CSS文件中删除所有注释并将它们放在jList中，最后将没有注释的CSS文件放在jTextArea中。它有点工作，例如：

```
/* this is a comment */ and this is not 
```

作品：![在此处输入图像描述](../Images/824f384a6374b37667fdb47c6ecdaff4.png)

另一个例子：

```
/*
This is a comment
*/
this is not 
```

那个也有效：![在此处输入图像描述](../Images/19da0f3c12b10133cc5914ba91b43251.png)

但是，最后一个：

```
/*
w
w
*/ 
```

不会工作：![在此处输入图像描述](../Images/7e20169aeb921fa936163eb0ddb96688.png)

将评论放在 jList 中的部分工作正常，但在 jTextArea 上显示完整的文件/源......

我不知道该怎么办，这有点令人沮丧，我希望你们能帮我一把！

如果您不知道程序中的某些单词，这里有一个简短的翻译列表：

*   档案 > 文件
*   Abrir > 打开
*   塞拉尔 > 关闭
*   编译 > 编译
*   编辑器 > 编辑器
*   词汇 > 词汇
*   语法 > 语法
*   语义 > 语义
*   评论 > 评论
*   Fuente sincommentarios > 没有评论的来源
*   Espacios en blanco > 白色空间

这是源文件[https://gist.github.com/3929988（CompiladorGUI.java](https://gist.github.com/3929988 "这是源文件")和 regex.java）。

我真的很感激任何帮助！提前致谢。

PS：对不起我的英语。如您所见，西班牙语是我的主要语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:51:06.450

不要尝试自己解析 CSS。有现成的 CSS 解析器。看看这个讨论开始：[寻找Java中的CSS解析器](https://stackoverflow.com/questions/1513587/looking-for-a-css-parser-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:55:47.357

您的正则表达式与多行不匹配。将属性的值更改`patron`为

```
private String patron = "/\\*((.|[\\n\\r])+)?\\*/"; 
```

# python - Ajax 发布数据格式错误。姜戈

> ID：13006124
> 
> 赞同：1
> 
> 时间：2012-10-22T06:40:39.470
> 
> 标签：python, jquery, post

我正在使用脚本向我的 Django 后端发出简单的发布请求。我希望数据采用 Json 格式。

```
<input id ="my" type="submit" onclick="me()"/>

<script>
function me()
{
      var data2 =JSON.stringify ({
                      "crave": "romana",
                      "uid": "100",
                      "access_token": "AAA"                     
                  });
    alert(data2);
     $.ajax({
                      url: "http://localhost:8000/trial/",
                      type: 'POST',
                      contentType: "application/x-www-form-urlencoded",
                      data: data2,
                      dataType: 'json',
                      processData: false
                  });

}
</script> 
```

在我打印 request.POST 时的视图中，它显示以下内容

```
 {u'{"crave":"romana","uid":"100","access_token":"AAA"}': [u'']}
enter code here 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:56:33.047

尝试以下操作：

```
$.ajax({
  type: 'POST',
  url: 'http://localhost:8000/trial/',
  data: data2, // without stringifying
  success: function(res) { }
}); 
```

或作为捷径：

```
data2 = {crave: "romana", uid: "100", access_token: "AAA"}
$.post('http://localhost:8000/trial/', data2, function(res) { }); 
```

# svn - 如何在客户端 svn commit 上执行一个脚本？

> ID：13006129
> 
> 赞同：1
> 
> 时间：2012-10-22T06:40:57.233
> 
> 标签：svn

我是 SVN 的新手。我想在客户端提交一些代码时执行一个脚本。现在我想将所有更新的代码从 svn 服务器复制到另一台服务器，那么如何做任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:49:31.790

在服务器上，是的，请参阅[post-commit hook](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.post-commit.html)。

在命令行的客户端上没有，但您可以创建一个包装器来处理它。对于 Tortoise-SVN 是；在“设置”中有一个“挂钩脚本”选项卡。对于其他客户，这取决于。

# java - Java - 使用文本区域将 JTable 设置为不可编辑

> ID：13006134
> 
> 赞同：0
> 
> 时间：2012-10-22T06:40:59.830
> 
> 标签：java, swing, model, jtable, jtextarea

我读过我可以使用文本区域，我将把我的表格放在它上面，然后将文本区域设置为不可编辑，这将使表格不可编辑。

但是当我这样做时，文本区域不会显示它包含的表格，而是只显示文本区域本身。

这就是我的做法..

```
 JTable cart;
    DefaultTableModel model;
    JTextArea tArea = new JTextArea(); 
```

..

```
 model = new DefaultTableModel(data,columnName);
    cart = new JTable(model);
    tArea.add(cart);
    tArea.setEditable(false);
    scroll = new JScrollPane(tArea);
    scroll.setBounds(10,130, 700, 400);
    .
    .
    add(scroll); 
```

知道我哪里弄错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:08:41.733

正如 Guillaume Polet 已经指出的那样，我同意使用 JTextArea 来设置/更改 JTable 中的状态是不方便的。

根据您的要求，我会考虑以下选项：

当您不希望表格可编辑时，您可以覆盖表格 isCellEditable 方法：

```
JTable table = new JTable( model )
{
  @Override
  public boolean isCellEditable( int row, int column )
  {
    return false;
  }
}; 
```

或为某种 NonEditableTable 子类化 JTable。这样做的好处是，无论模型添加到此表中，您的表都将永远不可编辑。确切地说，这也可能是一个缺点，因为如果您的可编辑状态取决于它显示的数据，您将无法再更改表的状态。

在这种情况下，无论是扩展 DefaultTableModel 还是 AbstractTableModel 并覆盖该类中的方法以控制那里的行为，实现您自己类型的 TableModel 可能会更好（正如 Guillaume Polet 已经提到的）。

```
class MyTableModel extends AbstractTableModel
{
  @Override
  public boolean isCellEditable( int rowIndex, int columnIndex )
  {
    if ( /*FILL IN YOUR REQUIREMENTS TO BE EDITABLE*/ )
     return true;

    return false
  }
} 
```

# git - 将最后一次提交从 master 复制到分支

> ID：13006135
> 
> 赞同：8
> 
> 时间：2012-10-22T06:41:04.517
> 
> 标签：git

图片中的现状。绿枝是高手。如何将最后 3 个提交从 master 复制到粉色分支，但不接触 master？

![在此处输入图像描述](../Images/972386ef9054d66a2ed51d2c70ebef16.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T06:42:20.183

```
git checkout <name of pink branch>
git merge master 
```

将完全按照您的意愿行事（将 3 个提交合并`master`到粉红色分支中，但将`master`自己留在原处）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T06:47:20.787

如果你的意思是你希望你已经等待分支（这是一个个人项目分支），你可以（从分支“粉红色”）使用`git rebase master`. 这将弹出粉色提交，`pink`前进到 29934b6，然后重新应用补丁。

否则，Amber's`git merge`可能是最好的答案。

`git cherry-pick 9a51fd2; ...`对于这些变化中的每一个，另一种可能性是（同样，来自“粉红色”） 。这将使个别新的提交变成粉红色。您还可以将分支命名为`master`和。`master^``master^^`

# android - 在android中自定义微调器

> ID：13006136
> 
> 赞同：0
> 
> 时间：2012-10-22T06:41:05.383
> 
> 标签：android, android-spinner, baseadapter

喂。我是android平台的新手。我有个问题。

我正在使用微调器。我想定制这个微调器。我已经完成了。我在这里面临一个小问题。

在下图中，您可以看到微调器和该微调器中的文本。现在这里的文本长度并不多，因此它非常适合。但是当文本长度更长时，它会与下拉箭头重叠。![在此处输入图像描述](../Images/e8aa4cd780b6b62ef9c8a2db20093675.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:55:49.537

您可以尝试使用 LinearLayout，为箭头留出空间并使用 layout_weight 为文本留出剩余空间。如果内容可以超过一行，您还可以考虑在 TextView 上使用省略号。

布局 XML 看起来像这样（我还没有测试）

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
    >
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right">
</LinearLayout> 
```

# wsdl - 动态客户端 WSDL

> ID：13006139
> 
> 赞同：1
> 
> 时间：2012-10-22T06:41:17.153
> 
> 标签：wsdl, uddi

我是网络服务的新手。我的要求是一个 WSDL 链接

1.  我想动态查找所有支持的操作（WSDL 发布的方法）
2.  迭代列出的不同操作
3.  动态获取每个操作的参数列表和返回值
4.  获取到Operation Name、Param的详细信息后动态消费一个Service并返回

我能够编写一个动态客户端应用程序（Axis 2，WSDL4J），它将使用 WSDL 并给出方法名称、为方法定义的参数、数据类型等。我创建了一个应用程序，它采用 WSDL 并给我WSDL 中存在的所有方法。

```
Definition def = reader.readWSDL(null, wsdlURI);
Map services = def.getServices();
// Services when Iterated will give all the Method Names 
// .......
Operation operation = boperation.getOperation();
String OperationName = operation.getName();
System.out.println("OperationName :" + OperationName.toString()); 
```

除此之外，我不确定如何动态获取给定方法的参数名称。非常感谢任何示例代码/教程

附上客户端的完整代码。

```
 public class DynamicInvoke {

    public static void main(String[] args) throws WSDLException {

        String wsdlURI = "WORKING_WSDL_LINK";
        DynamicInvoke di = new DynamicInvoke();
        List wsdlList = new ArrayList();

        wsdlList = di.buildComponents(wsdlURI);

    }

    public List buildComponents(String wsdlURI) throws WSDLException {
        // The list of components that will be returned
        List serviceList = Collections.synchronizedList(new ArrayList());

        // Create the WSDL Reader object
        WSDLFactory factory = WSDLFactory.newInstance();
        WSDLReader reader = factory.newWSDLReader();

        try {
            // Read the WSDL and get the top-level Definition object
            Definition def = reader.readWSDL(null, wsdlURI);

            java.util.Map<QName, Service> services = null;
            // Get the services defined in the document
            try {
                services = def.getServices();
            } catch (Exception e) {
                System.out.println("Cast Exception " + e.getMessage());
            }

            if (services != null) {
                // Create a component for each service defined
                Iterator serviceIter = (services).values().iterator();

                for (int i = 0; serviceIter.hasNext(); i++) {
                    // Create a new ServiceInfo component for each service found
                    ServiceInfo serviceInfo = new ServiceInfo();

                    // Populate the new component from the WSDL Definition read
                    populateComponent(serviceInfo, (Service) serviceIter.next());

                    // Add the new component to the List to be returned
                    serviceList.add(serviceInfo);
                }
            }
        }

        catch (Throwable t) {
            // Process the error/exception
            System.err.println(t.getMessage());
        }

        // return the List of services we created
        return serviceList;
    }

    private ServiceInfo populateComponent(ServiceInfo component, Service service)
            throws WSDLException {
        // Get the qualified service name information
        QName qName = service.getQName();

        // Get the service's namespace URI
        String namespace = qName.getNamespaceURI();

        // Use the local part of the qualified name for the component's name
        String name = qName.getLocalPart();

        // Get the defined ports for this service
        Map ports = service.getPorts();

        // Use the Ports to create methods for all request/response messages
        // defined
        Iterator portIter = ports.values().iterator();

        while (portIter.hasNext()) {
            // Get the next defined port
            Port port = (Port) portIter.next();

            // Get the Port's Binding
            javax.wsdl.Binding binding = port.getBinding();

            // Now we will create operations from the Binding information
            List operations = buildOperations(binding);

            // Process methods built from the binding information
            Iterator operIter = operations.iterator();

            while (operIter.hasNext()) {
                BindingOperation boperation = (BindingOperation) operIter.next();
                Operation operation = boperation.getOperation();

                // Get all the QName,Port Name,Name Space, WebService Name...
                System.out.println("Port Name =" + port.getName());
                System.out.println("QName = " + qName.toString());
                System.out.println("Namespace = " + namespace.toString());
                System.out.println("WebService Name = " + name.toString());

                // Get All the Method Name...
                String OperationName = operation.getName();
                System.out.println("OperationName :" + OperationName.toString());

                Input inDef = operation.getInput();
                String ParamName = inDef.getName();
                System.out.println("inDef--->" + ParamName);
                Message inMessage = inDef.getMessage();
                Map parts = inMessage.getParts();

                System.out.print("\nAxis parameters gathered:\nTargetNamespace = " +"\n"+
                        "Service Name = "+namespace.toString() +"\n"+
                        "Port Name = "+port.getName() +"\n"+
                        "Operation Name = "+operation.getName()+"\n"+
                        "Input Parameters = ");

            }
        }

        return component;
    }

    private List buildOperations(Binding binding) {
        // TODO Auto-generated method stub

        List list = binding.getBindingOperations();

        System.out.println("Bindings :" + list);
        return list;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:49:17.710

您需要使用 wsdl2java-tool（它与 axis2-zip 一起打包）从给定的 WSDL 编译存根代码。然后你会发现你的 web 服务相关的类，包括所有的方法，为你准备好的参数。

例如，请参阅 [此处的第 5 步](http://people.apache.org/~ruchithf/hw-axis2/)

# java - Java I/O 到管道

> ID：13006142
> 
> 赞同：1
> 
> 时间：2012-10-22T06:41:26.047
> 
> 标签：java, io, pipe

由于某种原因，此代码仅在我关闭输出流时才有效。我怎样才能让它工作而不必关闭它？

我想让它保持打开状态，这样我就可以继续向进程发送数据而无需重新启动它。

```
ProcessBuilder pbuilder = new ProcessBuilder(procCmds);
            pbuilder.directory(new File(workingDir));
            Process p = pbuilder.start();

    BufferedWriter outputStream = new BufferedWriter(new OutputStreamWriter(p.getOutputStream()));
    String str = "hello world heard from java\n";
    outputStream.write(str, 0, str.length());
    outputStream.flush();
    System.out.println("wrote " + str);
    BufferedReader errorStream = new BufferedReader(new InputStreamReader(p.getErrorStream()));
    BufferedReader inputStream = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = null;
    while((line=errorStream.readLine())!=null)
        System.out.println(line);
    while((line=inputStream.readLine())!=null)
        System.out.println(line);

    //p.waitFor();
    outputStream.close();
    errorStream.close();
    inputStream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:51:11.420

您需要合并错误和输入流，或者在单独的线程中读取其中一个。目前您正在尝试将错误流读取到 EOS，这仅在进程退出时发生，因此您根本无法读取输入流。在进程退出之前，您也不会在输入流上获得 EOS，因此如果您要提供进一步的输出，将其读取到 EOS 也没有任何意义。可能您应该在单独的线程中读取两个流。

# python - 如何推迟 Celery 任务的执行？

> ID：13006151
> 
> 赞同：18
> 
> 时间：2012-10-22T06:42:18.417
> 
> 标签：python, django, celery, django-celery

我有一个将任务排入队列以进行处理的小脚本。此脚本进行大量数据库查询以获取应排队的项目。我面临的问题是芹菜工人一旦被脚本排队就开始接受任务。这是正确的，这是芹菜应该工作的方式，但这经常导致我的脚本和芹菜工人之间的僵局。

有没有一种方法可以将我的所有任务从脚本中排入队列但延迟执行直到脚本完成或直到一个固定的时间延迟？

我在 celery 或 django-celery 的文档中找不到这个。这可能吗？

目前，作为一种快速修复，我考虑将所有要处理的项目添加到一个列表中，当我的脚本执行完所有查询后，我可以简单地遍历列表并将任务排入队列。也许这可以解决问题，但是当您有数千个项目要排队时，这可能是个坏主意。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-22T17:58:29.730

eta/countdown 选项可以延迟任务执行：

[http://docs.celeryproject.org/en/master/userguide/calling.html#eta-and-countdown](http://docs.celeryproject.org/en/master/userguide/calling.html#eta-and-countdown)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-22T07:45:22.793

我认为您正在尝试避免自己脚本的竞争条件，而不是要求延迟任务运行的方法。

然后您可以创建一个任务，并在该任务中，使用 .apply() 调用您的每个任务，而不是 .apply_async() 或 .delay()。使这些任务按顺序运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-22T11:29:13.050

要定义任务执行的延迟，请使用`apply_async()`以下格式的倒计时选项：

```
from datetime import timedelta
#Delay for 10 seconds
T.apply_async(args=[arg1, arg2], countdown = 10)
#Delay for 10 days 
T.apply_async(args=[arg1, arg2], countdown = timedelta(days=10)) 
```

By using `timedelta` it is possible to define more complicated delays for task execution. Note that `delay()` is another calling API but does not support countdown for delay.

# vb.net - 检查具有字符串值的文本框

> ID：13006153
> 
> 赞同：0
> 
> 时间：2012-10-22T06:42:31.110
> 
> 标签：vb.net, textbox, foreach, msgbox

我要做的就是检查带有字符串值的文本框，如果是，那么消息框将显示（使用编号）。

```
 For Each t In Me.Controls
        If TextBox1.Text = (String) Then
            MsgBox("Please Use Number")
            Exit Sub
            Exit For
        End If
    Next 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:56:10.283

从您的错误消息中，我假设您要验证用户输入的数值。然后您可以使用[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx#Y0)或[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/8w0x0ctx.aspx)简单地枚举所有字符并检查它们是否是数字：

```
For Each txt In Me.Controls.OfType(Of textBox)()
    Dim allDigit = txt.Text.Trim.Length <> 0 AndAlso _
            txt.Text.All(Function(chr) Char.IsDigit(chr))
    If Not allDigit Then
        MsgBox("Please Use Number")
        Exit Sub
    End If
Next 
```

与`Int32.TryParse`：

```
Dim intVal As Int32
Dim isInteger As Boolean = Int32.TryParse(txt.Text, intVal) 
```

（还假设您要验证表单上的所有文本框）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:58:35.787

干得好：

```
For Each c As Control In Me.Controls
    If TypeOf (c) Is TextBox Then
        If Not IsNumeric(c.Text) Then
            MessageBox.Show("Not a number")
            Exit Sub
        End If
    End If
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:49:17.707

使用正则表达式验证文本框是否包含数字。

例如。

```
Dim regNumber As New Regex("^\d{1,10}$")
regNumber.IsMatch(TextBox1.Text) 
```

# python - Python列表到字典（不管长度）

> ID：13006154
> 
> 赞同：0
> 
> 时间：2012-10-22T06:42:31.933
> 
> 标签：python, list, dictionary, matrix

我有一个列表，我想将其编入字典。

```
list_x = ['a', 'ada', 'aadsad', ......, 'sd'] 
```

无论此列表中的内容有多长（现在说 13 个）都可以成为字典，以便列表的第二项应该是键，其他所有内容，包括位置 0 都是值。

我已经尝试过其他示例中的 dict() 函数，但它并没有达到我想要的效果。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:44:49.743

这对你不起作用吗？

```
d = {}
d[list_x.pop(1)] = list_x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:47:32.823

如果您不想修改您的`list`：

```
In [13]: list_x = ['a', 'ada', 'aadsad','sd']

In [14]: d={list_x[1]:list_x[0:1]+list_x[2:]}

In [15]: d
Out[15]: {'ada': ['a', 'aadsad', 'sd']} 
```

编辑：

如果您要遍历多个列表：

```
In [72]: dic={}

In [73]: for x in multiple_lists:
   ....:     dic[x[1]]=x[0:1]+x[2:]
   ....:     
   ....: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:46:14.070

一个奇怪的要求，但没关系。

`dict_x = {list_x.pop(1): list_x}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T06:48:02.073

还有另一种没有切片的方法：

```
dict.fromkeys( (list_x.pop(1),), list_x) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T06:50:56.083

现在一个*不会*改变原始列表并且不添加切片的答案：

```
>>> r = range(len(list_x))
>>> del r[1]
>>> {list_x[1]: operator.itemgetter(*r)(list_x)}
{'ada': ('a', 'aadsad', ......, 'sd')} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T07:13:16.847

不改变原来的

```
tmp = list_x[:]
{tmp.pop(1): tmp} 
```

# python - 如何发送带有 Python 附件的 zip 文件的电子邮件？

> ID：13006156
> 
> 赞同：1
> 
> 时间：2012-10-22T06:42:42.713
> 
> 标签：python, email, zip

我的目录中有一个名为 zip 的文件夹`csv`：

*   /home/local/user/project/zip_module/csv

我想用这个 zip 文件夹作为附件发送一封电子邮件。

到目前为止，我已经使用该`smtplib` 模块从 Python 发送电子邮件，但我不知道如何发送带有 zip 文件夹作为附件的电子邮件。

我在 Google 上搜索过，但我找到的代码是用于压缩和发送电子邮件，而不是附加 zip 文件到电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:42:03.777

假设您要附加的 zip 文件是`'/home/local/user/project/zip_module/csv.zip'`、 、`to`、`sender`，`subject`并`text`分别包含您的收件人地址、发件人地址、主题和邮件文本。

然后，

```
import smtplib, MimeWriter, mimetools, base64

message = StringIO.StringIO()
email_msg = MimeWriter.MimeWriter(message)
email_msg.addheader('To', to)
email_msg.addheader('From', sender)
email_msg.addheader('Subject', subject)
email_msg.addheader('MIME-Version', '1.0')

email_msg.startmultipartbody('mixed')

part = email_msg.nextpart()
body = part.startbody('text/plain')
part.flushheaders()
body.write(text)

file_to_attach = '/home/local/user/project/zip_module/csv.zip'
filename = os.path.basename(file_to_attach)
ftype, encoding = 'application/zip', None

part = email_msg.nextpart()
part.addheader('Content-Transfer-Encoding', encoding)
body = part.startbody("%s; name=%s" % (ftype, filename))
mimetools.encode(open(file_to_attach, 'rb'), body, encoding)

email_msg.lastpart()

email_text = message.getvalue() 
```

现在像使用一样发送电子邮件`smtplib`，使用`email_text`as`msg`

例如

```
smtp = smtplib.SMTP(SERVER, PORT)
smtp.login(USER, PASSWORD)
smtp.sendmail(sender, to, email_text)
smtp.quit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:50:40.467

试试标准库中的[`email`包](http://docs.python.org/library/email.mime.html)。它允许您构建多部分 MIME 消息，其中可以包含`text/plain`一部分（用于您要发送的文本）和`application/zip`ZIP 文件的一部分。然后，您可以将消息序列化为字符串并使用`smtplib`.

# android - 单击图像时动画不重复

> ID：13006157
> 
> 赞同：1
> 
> 时间：2012-10-22T06:42:53.293
> 
> 标签：android, android-animation

单击`Textview`我正在使用以下代码进行帧动画

```
imgclickanimation.setBackgroundResource(R.anim.clickframeanimation);
ribinclickanimation= (AnimationDrawable) imgclickanimation.getBackground(); 
```

并单击`TextView`我正在使用的开始动画 `ribinclickanimation.start();`

`clickframeanimation`是动画文件。并且`ribinclickanimation`是它的对象，`AnimationDrawable` 当我第一次单击时它可以正常工作，但是当我第二次单击时，没有任何反应，任何人都可以建议我任何帮助。

**代码： **

```
package com.example.tryfinal;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.ScrollView;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener 
{
    TextView imgclickanimation;
    AnimationDrawable ribinclickanimation;//,ribinanimation;
    int duration=200;
    ScrollView scroll;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        imgclickanimation= (TextView) findViewById(R.id.imgclickanimation);

        imgclickanimation.setOnClickListener(this);
        imgclickanimation.setBackgroundResource(R.anim.clickframeanimation);
        ribinclickanimation= (AnimationDrawable) imgclickanimation.getBackground();
    }
    public void onClick(View arg0) 
    {
        if(arg0.getId()==imgclickanimation.getId())
        {
            imgclickanimation.setBackgroundResource(R.anim.clickframeanimation);
            ribinclickanimation.start();

        }
    }
} 
```

我的 clickframeanimation.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="true">
    <item android:drawable="@drawable/ribin3" android:duration="200" />
    <item android:drawable="@drawable/ribin4" android:duration="200" />
    <item android:drawable="@drawable/ribin3" android:duration="200" />
</animation-list> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:04:18.843

这是更新代码

```
package com.example.tryfinal;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ScrollView;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

 TextView imgclickanimation;
    AnimationDrawable ribinclickanimation;//,ribinanimation;
    int duration=200;
    ScrollView scroll;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imgclickanimation= (TextView) findViewById(R.id.imgclickanimation);
        imgclickanimation.setOnClickListener(this);
        imgclickanimation.setBackgroundResource(R.anim.clickframeanimation);
        ribinclickanimation= (AnimationDrawable) imgclickanimation.getBackground();
    }
    public void onClick(View arg0) 
    {
        ribinclickanimation.stop();
        if(arg0.getId()==imgclickanimation.getId())
        {
            imgclickanimation.setBackgroundResource(R.anim.clickframeanimation);//It will still work without this line. There is no need to set the resource again.

            ribinclickanimation.start();

        }
    }

} 
```

# zk - 使用 zkoss，为什么我的 Spring DAO 仍然为空，即使我已经在 Spring config XML 中设置了它？

> ID：13006164
> 
> 赞同：2
> 
> 时间：2012-10-22T06:43:42.557
> 
> 标签：zk

我正在使用 ZK 尝试从现有的 spring JAR 项目中调用 Spring Manager/DAO。我已经在 zul 文件中使用了这个变量解析器：

```
<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>
<zk>
<window border="normal" width="400px" style="padding-top:20px;padding-left:20px;" title="Species Editor" apply="org.openforis.specieseditor.NewSpecies"> 
```

并且能够以`NewSpecies.java`这种方式调用 Java 类：

```
 SpeciesManager speciesManager = (SpeciesManager) SpringUtil.getBean("speciesManager");      
    List<TaxonOccurrence> speciesList = speciesManager.findByScientificName(taxonomy, species, 1); 
```

问题是，在这`SpeciesManager.java`里面有一个对其他 DAO 的调用，例如`taxonDao`，它创建了一个`Null Pointer Exception`. 我真的不知道这个异常是如何发生的。有什么帮助吗？`taxonDao`我也已经在我的 spring config xml中添加了这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:08:31.073

您拥有`apply="org.openforis.specieseditor.NewSpecies"`根组件，这意味着 ZK 将实例化您的 composer 实例，然后 Spring 没有机会注入依赖项，因为 composer 不是 Spring 托管的 bean。您可以通过从 SelectorComposer 和 VariableResolver 注释扩展来在您的作曲家中注入 Spring 依赖项，如下所示

```
@VariableResolver(org.zkoss.zkplus.spring.DelegatingVariableResolver.class)
public class RegistrationSpringComposer extends SelectorComposer<Component> {

    @WireVariable
    private RegistrationDao registrationDao;

    @Listen("onClick = #submitButton")
    public void submit(){
        // omit irrelevant code for brevity
        registrationDao.add(newUser);
    }
} 
```

或者您可以将您的 current`NewSpecies`变成 Spring 托管 bean 并使用 EL 表达式`apply="${newSpecies}"`让 Spring 处理 NewSpecies bean 的生命周期（注意：确保 NewSpecies 具有原型范围）

# c# - 将文档从 WCF 服务下载到网页

> ID：13006166
> 
> 赞同：1
> 
> 时间：2012-10-22T06:43:58.863
> 
> 标签：c#, javascript, wcf, html, datajs

我是 Web 开发的新手，我正在寻找一些关于这种情况的最佳解决方案的建议。

我有一个 WCF 服务，以及一个使用 HTML5、javascript（敲除 j 和 dataJ）编写的页面

我使用 DataJS 访问我的 WCF 服务。这非常适合从我的网页接收和发送数据。

但现在我必须能够从服务器上传和下载文件。

我看到人们推荐与 WCF 服务之间进行流式传输，但我不确定如何在客户端（javascript/datajs）处理此流，或者它是否是最佳解决方案？

我也遇到过 XMLHttpRequest，但我再次不确定这是否是最好的方法。

欢迎任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:16:34.937

我不熟悉 WCF，但通常使用 PHP 来完成这项任务。这似乎是一个很棒的教程：[http ://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)

# android - 如何使用 JNI for android 调用类的 C++ 静态函数

> ID：13006173
> 
> 赞同：2
> 
> 时间：2012-10-22T06:44:57.553
> 
> 标签：android, c++, android-ndk, java-native-interface

我正在做一个将使用 C++ 库的 android 应用程序。出于这个原因，我需要使用 Android-NDK 构建 C++ 项目。但我现在面临的问题是如何使用 JNI 调用 C++ 静态函数。

在我的 C++ 代码中，我有一个单例类。众所周知，要实现一个单例类，我们需要引入负责创建此类实例的静态函数。现在我需要使用 JNI 调用静态函数来创建一个可以在我的 android 应用程序中使用的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:56:36.940

你可以在 JNI 端做：

```
long Java_mypackage_com_createSingleton(JNIEnv* env)
{
     return MySingleton::getInstance();
}

bool Java_mypackage_com_useSingletonSomehow(long singleton) 
{
      return (MySingleton*)singleton->someFunc();
} 
```

在单例类中：

```
 MySingleton* getInstance() 
    {
      if(instance_ == NULL)
      {
          instance_ = new MySingleton();
      }
      return instance_;

    } 
```

在 Java 方面：

```
package mypackage.com;

class SingletonUser
{
private long mSingletonInstance;

public SingletonUser() {
   mSingleton = createSingleton();
}

public boolean someFunc() {
   return useSingletonSomehow(mSingletonInstance);
}

private native boolean useSingletonSomehow(long instance);
private native long createSingleton(); 
```

}

# grep - 如何删除尾部 grep 匹配项？

> ID：13006175
> 
> 赞同：0
> 
> 时间：2012-10-22T06:45:03.043
> 
> 标签：grep, tail

我查看了以前的帖子，但找不到任何对我有用的东西。我有一个日志文件，由于我对脚本所做的更改而导致的一些反复出现的错误变得很大。我想删除包含此错误消息的所有行。

当我跑

```
sudo tail -1000000 /var/log/kannel/MT.usage.log|grep 'utf-8' 
```

我从日志文件中显示所有看起来像的条目

```
...[22297] [3] ERROR: Failed to convert string from <utf-8> to <UTF-16BE>, errno was <84> 
```

有超过 100 万行。我想从日志文件中删除所有这些条目。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:47:37.350

尝试这样做：

```
sed -i '/ERROR: Failed to convert string from to/d' filename.log 
```

# sql-server - 在 SQL Server 中搜索扩展 ascii

ID：13006180

赞同：0

时间：2012-10-22T06:45:21.833

标签：sql-server, asciiencoding

# nokia - Can not access fm radio in nokia s40 c3-00

> ID：13006181
> 
> 赞同：2
> 
> 时间：2012-10-22T06:45:21.827
> 
> 标签：nokia, radio, series-40

I am trying to access the ondevice fm radio through jsr 234 in c3-00 . Everything seems to work fine but the radio can not be accessed. I have also checked supported JRSs for nokia c3 which is a s40 v6 device which shows that it supports jsr 234\. I have used the following simple code to do this:

```
player = Manager.createPlayer("capture://radio");
player.realize();
// declared and configured a tuner object.
player.start(); 
```

I have also searched a lot but didn't found anything about it.

# objective-c - 在将 VC 添加为 UINav rootVC 时不为 IVR 分配内存

> ID：13006185
> 
> 赞同：1
> 
> 时间：2012-10-22T06:45:44.683
> 
> 标签：objective-c, ios, memory-management

**已编辑**

这是我在编码过程中遇到的一个非常常见的问题，请看一下。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

// Adding Landing screen landscape on mainwindow
self.landingViewController = [[LandingViewController alloc] initWithNibName:@"LandingViewController" bundle:nil];
[self.window addSubview:self.landingViewController.view];
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

}

```
#import <UIKit/UIKit.h>

@class RecentPlanViewController;
@class ChevronViewController;

@interface LandingViewController : UIViewController
{
 UINavigationController *navigationController;

    // custom view controllers
RecentPlanViewController *recentPlanViewController;
ChevronViewController *chevronViewController;

}

- (void)popView:(NSNotification *)notification;

@property (nonatomic,retain) UINavigationController *navigationController;
@property (nonatomic,retain) RecentPlanViewController *recentPlanViewController;
@property (nonatomic,retain) ChevronViewController *chevronViewController;
@end

self.recentPlanViewController = [[RecentPlanViewController alloc] initWithNibName:@"RecentPlanViewController" bundle:nil];

[self.recentPlanViewController loadView];   // if I skip this : Memory to recentPlanViewController's IVs not allocated.

self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.recentPlanViewController ];

#import <UIKit/UIKit.h>
@class RecentPlanCell;

@interface RecentPlanViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{
IBOutlet UITableView *recentPlanTableView; // Main recent TableView
RecentPlanCell *recentPlanCell;
IBOutlet UIButton *createPlanButton;
IBOutlet UIButton *viewAllPlanButton;
BOOL isViewingAllPlans;   // Yes if view all plan pressed
}

@property (nonatomic,retain) RecentPlanCell *recentPlanCell;
@property (nonatomic,retain) IBOutlet UIButton *createPlanButton;
@property (nonatomic,retain) IBOutlet UIButton *viewAllPlanButton;

@end 
```

以上编写的代码有两个结论。

1.如果我使用 loadView 方法。它调用视图控制器的视图并将内存分配给 IBOutlets，而不用于其他`self.recentPlanViewController`实例变量。

2.如果我跳过第二行代码，即使将其用作rootVC，它也不会为任何IVR分配内存。

请指导我，我违反的内存管理概念是什么！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:36:09.327

有几个问题：

*   你`loadView`直接打电话
*   你没有显示视图控制器的视图

# `loadView`

[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)说：

> 如果您无法在情节提要或 nib 文件中定义视图，请覆盖 loadView 方法以手动实例化视图层次结构并将其分配给视图属性。

和：

> 你不应该直接调用这个方法 [loadView]。视图控制器在其视图属性被请求但当前为 nil 时调用此方法。此方法加载或创建视图并将其分配给视图属性。

## 这是什么意思？

有三种方法可以为视图控制器提供视图：

*   使用故事板
*   使用笔尖
*   以编程方式

所以，既然你在谈论`IBOutlet`s，第三种方式必须被排除在外。

## 什么时候`IBOutlet`“准备好”？

输入`viewDidLoad`：

> 在视图控制器将其视图层次结构加载到内存后调用此方法。无论视图层次结构是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法。

调用此方法后，您`IBOutlet`的 s 已准备就绪，您可以安全地访问它们。

# 显示视图

我不知道您的视图控制器层次结构是什么，但您可能正在重新分配`navigationController`而不是重用它。

如果该视图控制器是从另一个视图控制器推送的，您应该这样做：

```
[self.navigationController pushViewController:self.recentPlanViewController animated:YES]; 
```

为了重用`navigationController`管理层次结构的那个（而不是重新分配它）。

所以，问题是：你是如何展示的`LandingViewController`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:51:52.480

问题是，`loadView`它是自动调用的，你不应该自己调用它。要调用它，您`UIViewController`必须出现在屏幕上。您现在拥有的是指向您的指针，仅`recentPlanViewController`此而已。为了调用`loadView`, `viewDidLoad`,`viewWillAppear`你需要类似：

```
[self pushViewController:self.recentPlanViewController]; 
```

在实际出现在屏幕上`IBOutlets`之前，您不应该依赖您的。`UIViewController`如果您希望`IBOutlets`在开始时有一些默认值，您应该将它们传递给`init`方法，将它们保存为 ivars，然后将它们设置`viewDidLoad`为 .

**编辑：**

这可能有问题：

```
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.recentPlanViewController ]; 
```

因为你正在重新初始化你自己的 navigationController。

**编辑2：**

如果你只是想展示你的新`UIViewController`假设你已经有一个 working `UINavigationController`，你可以这样做：

```
 [self.navigationController pushViewController:self.recentPlanViewController animated:YES]; 
```

如果你没有，`self.navigationController`你可以这样做：

```
[self presentViewController:self.recentPlanViewController animated:YES completion:^{

}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:09:00.583

**解决方法是：** 在视图控制器本身中关联或使用 iVar。

# wordpress - 根据 WebMasterTools 的 Wordpress 重复页面

> ID：13006186
> 
> 赞同：0
> 
> 时间：2012-10-22T06:45:53.230
> 
> 标签：wordpress, seo, google-search-console

我在 Google 的网站管理员工具上检查了我的博客的性能，在“重复的元描述”下，我得到了很多具有以下格式的结果：

`/momart_blog/2012/09/25/5-odlicnih-primera-cenovnika-za-usluge-pricing-tables-design/`

`/momart_blog/2012/09/5-odlicnih-primera-cenovnika-za-usluge-pricing-tables-design/`

我的永久链接设置为显示格式`/%year%/%monthnum%/%postname%/`，所以我不知道这`/25/`是从哪里来的，它代表着文章的撰写日期。此外，为什么谷歌索引 2 篇文章，我该如何解决这个问题？我有大约 760 篇关于这个问题的文章，我担心谷歌会惩罚我的网站。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:04:28.080

您可以使用[规范的元标记](http://en.wikipedia.org/wiki/Canonical_link_element)来避免混淆。

```
<link rel="canonical" href="http://www.example.com/momart_blog/2012/09/5-odlicnih-primera-cenovnika-za-usluge-pricing-tables-design/" /> 
```

您最近是否更新了永久链接结构？可能是谷歌索引中的旧页面。

...或者您使用 XML 站点地图？如果是这样，请检查其中提供的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:24:47.313

我会说你的结构包括前一天。你可以从谷歌看到什么时候从缓存中被索引，你就会明白为什么。

从 google tools for webmasters 你可以删除一个特定的 URL，我会建议删除这个页面，看看将来是否会再次被索引。（但我不这么认为）

我希望它会有所帮助。

# php - Cakephp中的分页顺序

> ID：13006187
> 
> 赞同：1
> 
> 时间：2012-10-22T06:45:53.930
> 
> 标签：php

如何通过 cakephp 中的问题修复分页顺序。我的代码在这里..

```
$testarray = array(010,011,012,013,014,015,001,002,003,004,005,006,007,008,009);

$this->paginate = array(
    'conditions' => $testarray,
    'fields' => array('Test.id'),
    'limit' => 10,
    'page' => 1
);

$testpaginate = $this->paginate('Test'); 
```

我希望输出类似于 $testarray，但我得到以下信息：

```
array(001,002,003,004,005,006,007,008,009,010) 
```

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:25:10.393

试一试：

```
$this->paginate = array(
  'conditions' => $testarray,
  'fields' => array('Test.id'),
  'limit' => 10,
  'page' => 1,
  'order' => '',
); 
```

您可能不得不求助于 CakePHP 内置方法之外的选项。

# windows - Makefile/Shell：将文本附加到名称并将该名称用作变量

> ID：13006192
> 
> 赞同：1
> 
> 时间：2012-10-22T06:46:14.087
> 
> 标签：windows, shell, makefile, windows-shell

## 我想要的是：

给定一个名称数组，例如dependency1、dependency2、..、dependencyN：

1.  将“_DEP_DIR”附加到每个名称，以形成例如dependency1_DEP_DIR、..、dependencyN_DEP_DIR。（XXX_DEP_DIR 预定义为一个变量，指向每个依赖项的本地磁盘路径。）

2.  调用每个依赖项的特定批处理文件（setup.bat）。

## 我尝试的是：

```
DEP_NAMES=dependency1 dependency2 dependency3 dependency4 dependency5 dependency6
DEP_DIRS=$(foreach name,$(DEP_NAMES),$(name)_DEP_DIR)

for dependency in $(DEP_DIRS); do \
    ECHO Copy $$dependency ; \
    ECHO $($$dependency)/installers/windows ; \
    "$($$dependency)/installers/windows/setup.bat" ; \
done 
```

## 问题

第一个回显可以成功显示附加名称，例如“ `dependency1_DEP_DIR`”。但是，`$($$dependency)`没有按预期工作，“ `/installers/windows`”被打印出来，更不用说对批处理文件的以下调用。

## 故障排除

我想问题是我的循环计数器（`$$dependency`）的值恰好是我需要使用的变量的名称（`$(..)`）。并且 form( `$($$dependency)`) 不正确（甚至不支持？）

有人知道吗？

另外，如果你们能想出其他方法来满足我绕过这个问题的要求，很高兴知道；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:17:08.683

我基本上看到了两种可能性：要么在 Makefile 中做所有事情，要么将所需的变量导出到 shell 并在那里展开它们。第一种情况依赖于`foreach`（顺便说一句，定义`DEP_DIRS`可能更简单：），`DEP_DIRS=$(DEP_NAMES:=_DEP_DIR)`类似于

```
$(foreach 依赖,$(DEP_DIRS),\
      echo "复制$(依赖)"; \
      echo "dir 是 $($(dependency))"; \
 )

```

对于第二种情况，您必须告诉 make 它必须将相关变量导出到 shell ( [http://www.gnu.org/software/make/manual/html_node/Environment.html](http://www.gnu.org/software/make/manual/html_node/Environment.html) )：

```
导出依赖1_DEP_DIR=...
导出依赖 2_DEP_DIR=...
...

```

然后你可以使用一个`for`循环，但是获取最终变量的值可能有点棘手（在严格的 POSIX 环境中，间接扩展并不容易，请参见例如[Lookup shell variables by name,indirectly](https://stackoverflow.com/questions/1694196/lookup-shell-variables-by-name-indirectly)）

```
$(DEP_DIRS) 中的依赖项；做 \
  echo "复制$$依赖"; \
  echo "dir 是 `eval echo \\$$$$dependency`"; \
完毕

```

# java - 权限管理的设计模式

> ID：13006196
> 
> 赞同：0
> 
> 时间：2012-10-22T06:46:36.460
> 
> 标签：java, desktop-application

这是我的问题：我正在开发用户拥有某些权限的应用程序。根据这些权利，他们可以访问某些功能。

我的问题是，如果用户是否拥有权限并启用它，我将不得不测试每个案例。对于一个大应用程序来说，这个任务是相当累人的。我想问是否有设计模式或库可以简化管理。我的目标是在用户没有适当权限时禁用按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:04:14.667

这种解决方案需要考虑多种因素

在一个想法场景中，我将有以下处理这个问题的方法。

1.  我将拥有属于 USergroup 的用户，并将角色分配给某个数据库中的每个用户组。

2.  当用户登录到应用程序时，您可以从数据库中获取用户组和关联的用户角色。

3.  使用角色，您可以创建一个映射来存储具有访​​问权限的函数名称/字段名称。
4.  在会话范围内传递此映射并使用其值，启用/禁用字段和按钮。
5.  最好的方法是为要在 jsp 中使用的字段和按钮实现自定义标签，然后将地图对象传递给此类标签，这些标签将验证地图并相应地显示或隐藏该字段。

只是想保持简短和简单。

# visual-studio-lightswitch - LightSwitch - 在搜索屏幕中获取更新的行

> ID：13006198
> 
> 赞同：0
> 
> 时间：2012-10-22T06:46:47.347
> 
> 标签：visual-studio-lightswitch

我有一个列出所有客户的搜索屏幕。用户可以编辑一些字段（电话号码、地址等）。

在保存该“特定”记录（仅更改的记录）时，我想更新`ModifiedBy`and`ModifiedOn`字段。我怎样才能在代码中这样做？

我正在尝试在`_Saving`搜索屏幕的情况下处理此问题，但如何获取更改的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:44:53.753

进入表的实体设计器并单击编写代码旁边的箭头。您需要编辑两种方法，`_Updating`并且`_Inserting`. 与此类似：

**C＃：**

```
partial void TableName_Updating(TableName entity)
{
    entity.ModifiedBy = this.Application.User.FullName;
    entity.ModifiedOn = DateTime.Now;
}

partial void TableName_Inserting(TableName entity)
{
    entity.ModifiedBy = this.Application.User.FullName;
    entity.ModifiedOn = DateTime.Now;
} 
```

**VB.NET：**

```
Private Partial Sub TableName_Updating(entity As TableName)
    entity.ModifiedBy = Me.Application.User.FullName
    entity.ModifiedOn = DateTime.Now
End Sub

Private Partial Sub TableName_Inserting(entity As TableName)
    entity.ModifiedBy = Me.Application.User.FullName
    entity.ModifiedOn = DateTime.Now
End Sub 
```

# css - textarea中不可见的小写'o'

> ID：13006200
> 
> 赞同：3
> 
> 时间：2012-10-22T06:46:59.110
> 
> 标签：css, textarea, font-awesome

无论出于何种原因，小写的“o”在我的文本区域中是不可见的。其他所有字母都可以正常工作。如果我突出显示它，它仍然是不可见的。

```
 ______________             ______________ 
|              |           |              |
| hello world! | shows as  | hell  w rld! |
|______________|           |______________| 
```

当我实际发布表单或从中复制并粘贴时，'o's 确实存在。

我将列出对这个文本区域有贡献的所有内容，希望你们能提出可能出错的地方。我很困惑。

*   Firefox 和 Chrome
*   [推特引导](http://twitter.github.com/bootstrap/base-css.html#forms)
*   [字体真棒](http://fortawesome.github.com/Font-Awesome/)
*   [按照本教程](http://www.alistapart.com/articles/expanding-text-areas-made-elegant/)自动调整文本区域的大小
*   下面的样式（它的[SASS](http://sass-lang.com/)）

Border-radius 和 box-sizing 符合预期，并在整个站点中使用，没有问题。

```
textarea {
  width: 100%;
  height: 50px; // this is overwritten with javascript
  color: white;
  text-shadow: black 0.05em 0.05em 0.08em;
  background: none;
  border: 1px solid #ddd;
  @include border-radius(0); // to override bootstrap
  @include box-sizing;
  resize: none;

  &:focus {
    background: rgba(250, 250, 250, 0.2);
  }
} 
```

我只是想重申*一下，我键盘上的每个其他字符都显示得很好*。什么可能导致这些问题-'o's（对不起）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T06:59:05.653

这仅影响小写“o”将表明这是用于在 textarea 中呈现文本的字体中的特定字形的问题。您是否尝试过使用不同的字体？

见： [https ://github.com/FortAwesome/Font-Awesome/issues/417](https://github.com/FortAwesome/Font-Awesome/issues/417)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:57:57.457

谢谢@jurgemaister。果然，换`font-family arial;`工作了。由于某种原因，Font Awesome 无法与 textarea 相处融洽。

# ruby - 在 Rails 中管理不断变化的文本文件

> ID：13006202
> 
> 赞同：0
> 
> 时间：2012-10-22T06:47:13.963
> 
> 标签：ruby, ruby-on-rails-3, parsing, yaml

我希望能够拥有一个文本文件（不受开发人员对内容的控制），并让我的代码从该文件中选择条目并将它们显示在网络应用程序中（或对它们执行其他操作）

例如，此文本文件可以是人员列表，或按顺序或随机显示在屏幕上的名言。

我的问题是实现这一点的最简单方法是什么？我应该把它放在 XML 中并解析它吗？把它放在 YAML 中？我在哪里进行解析？在控制器或初始化程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:02:14.507

如果您能够在内容更改时重新部署您的应用程序，请将其放入 YAML 文件中。YAML 已经在 Rails 代码中的多个地方使用。无需添加额外的宝石。您也可以使用 JSON。取决于你发现什么更具可读性。

如果您想在不重新部署的情况下更改内容，请将数据放入数据存储中并构建用于更改它的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:19:41.573

对于非技术人员来说，没有什么比纯文本文件更好的了。强制一些简单的结构，例如

*   每个条目一行，或
*   条目之间的空白行，或
*   以您认识的某个标记开头的标题（例如 ==）

读取纯文本文件的示例：

```
data = File.read('/path/to/file.txt')
data.lines.each do |line|
  puts "Read line: #{line}"
end

# or split by an empty line (btw, non-technical users can insert spaces in blank lines)
# also, remove leading and trailing whitespace from entries (i.e the newlines)
entries = data.split(/^\s*$/).map(&:strip) 
```

另一种选择是使用一些降价并将解析的文本用于您的内容，尽管这会为您的项目引入新的宝石，例如[RedCarpet](https://github.com/vmg/redcarpet)。

# android - Android - 选择 Spinner 时如何更新 ListView

> ID：13006210
> 
> 赞同：1
> 
> 时间：2012-10-22T06:47:51.187
> 
> 标签：android, database, listview, spinner

I'm trying to update listview when an item in spinner is selected,but it's not working fine.

*这是我的微调器：*

```
Spinner spnTypeSchool = (Spinner)findViewById(R.id.spnType);
spnTypeSchool.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,strarray));
spnTypeSchool.setOnItemSelectedListener(new OnItemSelectedListener() 
    {
     public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
     {
          spnItemClick = arg0.getItemIdAtPosition(arg2)+1;
          myDbHelper.open(); // my databaseHelper
         Cursor spnSelectSchoolType = myDbHelper.getSchoolTypeList(spnItemClick);
        if(spnSelectSchoolType != null && spnSelectSchoolType.moveToFirst())
        {
          do
          {        
              schoolTypeSelectedForSpinner.add(spnSelectSchoolType.getString(0).toString());
          }
          while(spnSelectSchoolType.moveToNext());
        }
        String[] strSchoolByTypeSelected = new String[schoolTypeSelectedForSpinner.size()];
        schoolTypeSelectedForSpinner.toArray(strSchoolByTypeSelected);
        myDbHelper.close();
    }
                        public void onNothingSelected(AdapterView<?> arg0) {/* TODO Auto-generated method stub*/}
   }); 
```

*这是我的 ListView ：*

```
final ListView result = (ListView)findViewById(R.id.resultListView);
result.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,schoolTypeSelectedForSpinner)); 
```

*这是我的数据库查询*

```
public Cursor getSchoolTypeList(long sType)
    {
       return db.rawQuery("select school_name from tbl_school where s_type =\""+sType+"\"", null);
    } 
```

我面临的问题是，当我选择项目时，列表视图没有正确更新。微调器上的第一个选择和第二个选择组合并返回不正确的值。

在此先感谢您的帮助....

# ruby - Ruby & Activerecord - 处理查询结果

> ID：13006213
> 
> 赞同：1
> 
> 时间：2012-10-22T06:48:08.270
> 
> 标签：ruby, arrays, activerecord

我需要帮助。我正在优化 Ruby 项目。有很多单个查询，所以我用 id 数组一次读取它们，例如：

```
projects = Project.find_by_id(array_of_ids) 
```

而且我的速度有了显着提高。但问题是当我想在这样的结果中搜索时，我该如何处理这样的结果？

```
p = projects .find{ |project| project.id==pr.id } # doesn't work 
```

我可以将“项目”转换为数组或进一步使用活动记录方法吗？我可以使用 Activerecord 获得按某些参数分组的“项目”的二维数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:08:25.583

如果要返回 ActiveRecord::Relation 对象（您可以对其进行进一步的 SQL 查询）而不是数组，则需要使用该`scoped_by_*`方法。`find_by_*`

`scoped_by_*`可以在这里找到解释：http: [//api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

如果您使用`scoped_by_*`.

```
projects = Project.scoped_by_id(array_of_ids)
p = projects.find(pr.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:07:30.510

您在这里缺少几件事

```
a) projects = Project.find_by_id(array_of_ids) 
```

只会给出一个结果

要获取和数组，您需要像这样触发查询

```
a) projects = Project.find_all_by_id(array_of_ids) 
```

如果 Rails 3+ 可以通过 arel 轻松完成，那么您使用的是哪个版本的 Rails

```
 b) projects = Project.where("id in (?)",array_of_ids) 
```

现在这会给你一个关系对象，你可以在它上面链接你的进一步查询

如果您使用的是 Rails 2.3+，最好使用**named_scope**或**lambda**

希望这有帮助

# c++ - 是否可以包含标准库 libstdc++，所以我不需要在我的目标上安装它？

> ID：13006214
> 
> 赞同：1
> 
> 时间：2012-10-22T06:48:12.027
> 
> 标签：c++, standard-library, libstdc++

> **可能重复：**
> [如何静态链接 libstdc++](https://stackoverflow.com/questions/6917413/how-to-statically-link-libstdc)

我想确保在我的目标平台上使用相同版本的标准库。那么有没有办法用我的程序编译它？

# c# - WCF - 接收 HTTP 响应时发生错误

> ID：13006216
> 
> 赞同：0
> 
> 时间：2012-10-22T06:48:25.210
> 
> 标签：c#, wcf, entity-framework

我尝试从这样的服务中获取列表：

```
 static void Main(string[] args)
    {
      MyClient proxy = new MyClient();
      List<X> l = proxy.Func(1).ToList();
    } 
```

X 是实体框架项目的 DLL 中的类。

我的服务功能如下所示：

```
 public List<X> Func(int NUM)
    {                      
        ProjectContext MyContext = new ProjectContext();
        s = MyContext.X.ToList();
        return s;

    } 
```

我的上下文定义如下：

```
public class ProjectContext : DbContext
{

    public ProjectContext ()
        : base("name=ApplicationServices")
    {
        this.Configuration.ProxyCreationEnabled=false;
        this.Configuration.LazyLoadingEnabled = false;
    }

    public DbSet<XX> X{ get; set; }

} 
```

我得到错误：

接收对 XXX 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:35:43.570

异常可能是由于循环引用。用属性标记实体中的导航属性，`IgnoreDataMember`这样它们就不会参与序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:00:46.160

我以前和你一样，遇到过同样的错误。我已经通过创建一个数据契约来像这样声明类 X 来解决这个问题。

```
[DataContract]
public class StudentX
{       [DataMember]
        public string studentId;
        [DataMember]
        public string studentName;
        [DataMember]
        public string studentBirthday;

        public Studentx(string Id, string Name, string Birthday)
        {
            // TODO: Complete member initialization
            studentId= Id;
            studentName = Name;
            studentBirthday= Birthday;               
        }
 } 
```

我认为你得到这个错误的原因是因为客户端不理解对象 X，列表也是如此。

问候

# ruby-on-rails - Ruby/C逻辑来识别excel之类的单元格位置是否重叠

> ID：13006217
> 
> 赞同：0
> 
> 时间：2012-10-22T06:48:27.490
> 
> 标签：ruby-on-rails, c, ruby, logic

我正在 Rails 应用程序中使用它编写一个 ruby​​ 代码，我必须从用户那里接受类似 excel 单元格的结构，并且我必须验证这些单元格结构。

例如：

用户应能够通过用冒号分隔来指定单元格块，例如 A1:B2 应覆盖表格中的 A1、A2、B1、B2 单元格。

同样，用户可以输入许多位置，例如

A1:B1 A2:C2 A1:F1

但是当用户输入重叠位置时问题就来了，例如：

A1:D5 和 A2:C3 还有 D1:E1 和 A1:F2。

在这种情况下，A2:C3 位于 A1:D5 块内，因此用户应该收到一些错误消息（验证错误），说明这些是重叠位置。

我正在考虑的一个逻辑是将每个位置转换为一个唯一的整数值并使用它来区分，但到目前为止我还没有得到任何逻辑来跟踪这种情况。

让我知道是否有人对如何解决这个问题有任何想法。

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:58:08.583

您要做的是简单的框或矩形碰撞检测——这是游戏和图形编程中广为人知且长期解决的问题。

例如，请参阅此博客文章：

[http://www.owenpellegrin.com/articles/vb-net/simple-collision-detection/](http://www.owenpellegrin.com/articles/vb-net/simple-collision-detection/)

您需要将字母数字单元格名称（列 + 行）转换为整数 (x,y) 坐标，以便于计算。

因此，从`A1:D5`，`A2:C3`它们变成坐标：`(1,1):(4,5)`，`(1,2):(3,3)`。

然后，一个简单的框碰撞检测算法将能够确定两个点`(1,2)`都`(3,3)`位于矩形内`(1,1):(4,5)`，因此第二个矩形完全包含在第一个矩形内 - 即，您有重叠。

在您的情况下，您还需要确保您的算法将“边缘”碰撞视为重叠。也就是说，`A1:B2`技术上重叠，`B1:C2`因为它们共享相同的“边缘”（即两个单元格`B1:B2`）。

**注意：**将每个矩形与其他矩形进行检查以查看它们是否相交的“朴素”算法具有 O(n^2) 复杂度。如果你只处理几十个矩形，那么你应该没问题。但是，如果您需要检查数千个矩形，那么您可能应该考虑动态构建两个区间树，每个轴一个。

# android - 如果Android手机SD卡上存在文件夹，如何重定向到html文件？

> ID：13006219
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:48:31.483
> 
> 标签：android, cordova, android-sdcard

如果 sd 卡中存在文件夹（例如：sdcard/download 文件夹），我想将用户重定向到 html 文件或网站或路径

我使用了 response.redirect(); 但它根本不起作用。顺便说一句，我想使用Java。或者如果有另一种方式，比如使用 javascript-并将其连接到 java.. 也可以。任何想法表示赞赏。谢谢你！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:22:58.837

使用 WebView ( [http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html) )。根据事件从您的布局中加载 webview，并使用它来加载您需要的 url。

# backbone.js - TypeScript 被覆盖的成员不是原始成员的子类型

> ID：13006222
> 
> 赞同：6
> 
> 时间：2012-10-22T06:48:41.027
> 
> 标签：backbone.js, typescript

我正在使用 TypeScript 和 BackboneJS 开发一个测试应用程序。它主要是一个员工目录。尝试定义 Collection 时，出现以下错误。

```
Type of overridden member 'url' is not subtype of original member defined by type 'Collection' 
```

这是我的模型和集合定义。

```
class Employee extends Backbone.Model {
    reports: EmployeeCollection;

    constructor (options? ) {
        super(options);
        this.reports = new EmployeeCollection();
        this.reports.url = '../api/employees/' + this.id + '/reports';
    }
}

class EmployeeCollection extends Backbone.Collection {
    url: string = "../api/employees";
    model = Employee;
    findByName(key) {}
} 
```

我还使用了一些定义来连接 Backbone 和 TypeScript，这是我正在使用的文件。

```
export class Model {

    static extend(properties: any, classProperties?: any): any; // do not use, prefer TypeScript's extend functionality

    constructor (attributes?: any, options?: any);

    get(attributeName: string): any;
    set(attributeName: string, value: any): void;
    set(obj: any): void;

    escape(attribute);
    has(attribute);
    unset(attribute, options? );
    clear(options? );

    id: any;
    idAttribute: any;
    cid;
    attributes;
    changed;

    bind(ev: string, f: Function, ctx?: any): void;  /// ????

    // defaults; defaults();
    toJSON(): string;
    fetch(options? );
    save(attributes? , options? ): void;
    destroy(options? ): void;
    validate(attributes);
    isValid();
    url();
    urlRoot();
    parse(response);
    clone();
    isNew();
    change();
    hasChanged(attribute? );
    changedAttributes(attributes? );
    previous(attribute);
    previousAttributes();
}

export class Collection {

    static extend(properties: any, classProperties?: any): any; // do not use, prefer TypeScript's extend functionality

    model;

    constructor (models? , options? );

    models;
    toJSON(): any;

    ///// start UNDERSCORE 28:
    bind(ev: string, f: Function, ctx?: any): void;
    collection: Model;
    create(attrs, opts? ): Collection;
    each(f: (elem: any) => void ): void;
    last(): any;
    last(n: number): any[];
    filter(f: (elem: any) => any): Collection;
    without(...values: any[]): Collection;

    // Underscore bindings

    each(object: any, iterator: (value, key, list? ) => void , context?: any): any[];
    forEach(object: any, iterator: (value, key, list? ) => void , context?: any): any[];
    map(object: any, iterator: (value, key, list? ) => void , context?: any): any[];
    reduce(list: any[], iterator: any, memo: (memo: any, element: any, index: number, list: any[]) => any, context?: any): any[];
    reduceRight(list: any[], iterator: (memo: any, element: any, index: number, list: any[]) => any, memo: any, context?: any): any[];
    find(list: any[], iterator: any, context?: any): any; // ???
    detect(list: any[], iterator: any, context?: any): any; // ???
    filter(list: any[], iterator: any, context?: any): any[];
    select(list: any[], iterator: any, context?: any): any[];
    reject(list: any[], iterator: any, context?: any): any[];
    every(list: any[], iterator: any, context?: any): bool;
    all(list: any[], iterator: any, context?: any): bool;
    any(list: any[], iterator?: any, context?: any): bool;
    some(list: any[], iterator?: any, context?: any): bool;
    contains(list: any, value: any): bool;
    contains(list: any[], value: any): bool;
    include(list: any, value: any): bool;
    include(list: any[], value: any): bool;
    invoke(list: any[], methodName: string, arguments: any[]): any;
    invoke(object: any, methodName: string, ...arguments: any[]): any;
    max(list: any[], iterator?: any, context?: any): any;
    min(list: any[], iterator?: any, context?: any): any;
    sortBy(list: any[], iterator?: any, context?: any): any;
    sortedIndex(list: any[], valueL: any, iterator?: any): number;
    toArray(list: any): any[];
    size(list: any): number;
    first(array: any[], n?: number): any;
    initial(array: any[], n?: number): any[];
    rest(array: any[], n?: number): any[];
    last(array: any[], n?: number): any;
    without(array: any[], ...values: any[]): any[];
    indexOf(array: any[], value: any, isSorted?: bool): number;
    shuffle(list: any[]): any[];
    lastIndexOf(array: any[], value: any, fromIndex?: number): number;
    isEmpty(object: any): bool;
    groupBy(list: any[], iterator: any): any;

    add(models, options? );
    remove(models, options? );
    get(id);
    getByCid(cid);
    at(index: number);
    push(model, options? );
    pop(options? );
    unshift(model, options? );
    shift(options? );
    length: number;
    //comparator;
    sort(options? );
    pluck(attribute);
    where(attributes);
    url();
    parse(response);
    fetch(options?: any): void;
    reset(models, options? );
    create(attributes, options? );
}

export class Router {

    static extend(properties: any, classProperties?: any): any; // do not use, prefer TypeScript's extend functionality

    routes;
    constructor (options? );
    route(route, name, callback? );
    navigate(fragment, options? );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:47:28.513

'url' 字段被声明为方法，但它可以是方法或属性。

改变它从

```
url(); 
```

到

```
url; 
```

或者从这里下载定义（我刚刚更新）： [https ://github.com/borisyankov/DefinitelyTyped/blob/master/Definitions/backbone-0.9.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/Definitions/backbone-0.9.d.ts)

# .net - 调用 window.close() 是否也会终止来自 IIS 的会话？

> ID：13006225
> 
> 赞同：0
> 
> 时间：2012-10-22T06:49:05.147
> 
> 标签：.net, vbscript

我想知道，当我们打电话时`window.close`，这是否也会终止 IIS 上的会话？

我正在编写下面的代码，并且试图从 IIS 终止用户的会话。

```
 Sub OnClickLogout() 
      dim Answer, msg
      Msg = "This will terminate the session and close the browser. Do you want to continue?"
      Answer = MsgBox(Msg, vbYesNo + vbCritical, "Error")
      if Answer = vbYes then
          window.close() ' Does this terminate the sesion of the user also?
      else
         'Return to the previous page             
      End if
  End Sub 
```

如果没有那么请告诉我我该如何完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:59:34.140

关闭浏览器不会终止会话。您可以通过将 Global.asax 文件添加到您的项目并掌握会话结束事件来检查这一点。

```
 void Session_End(object sender, EventArgs e)
   {
   } 
```

可以在此处找到有关会话事件的更多信息：

[http://msdn.microsoft.com/en-us/library/ms178583(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178583(v=vs.100).aspx)

要终止会话，您应该调用：

```
 Page.Session.Clear();
        Page.Session.Abandon(); 
```

# android - 在 Android 2.3 上，如何确保在放大 3D 对象时不影响其纹理的定义？

> ID：13006227
> 
> 赞同：1
> 
> 时间：2012-10-22T06:49:15.857
> 
> 标签：android, opengl-es, textures, scale

现在我正在使用 opengl-es 2.0 开发一个基于 Android 的 3D 应用程序，我使用了一个包含 3D 模型和纹理图像的 OBJ 文件（如下所示）：

![在此处输入图像描述](../Images/64d056e2bbde36474baab28a138dcdbf.png)

目前，苹果可以在我的三星 Galaxy II 上自由旋转，没有任何问题。接下来，我想在保持其纹理定义的同时放大苹果，但我没有做到（见下文）。我需要帮助来实现这一目标。任何建议或指点将不胜感激。提前致谢。

![在此处输入图像描述](../Images/7cb794fda6a2744ffdd9bff6a4c17250.png)

# javascript - 将变量从服务器 (Node.JS) 传递到客户端

> ID：13006232
> 
> 赞同：1
> 
> 时间：2012-10-22T06:49:48.830
> 
> 标签：javascript, node.js

如何在 Node.JS 中将变量从服务器端发送到客户端？

我有一个 app.js 文件和一个包含 index.html 模板的公共目录。

app.js 使用基本服务器和`readFile`打开和显示 HTML 模板的功能。

问题是我想在 index.html 的客户端显示一个 MongoDB 查询结果

如果不使用 Express 等框架，这怎么可能，因为我试图避免这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:45:49.210

您可以自己替换字符串，也可以使用针对此操作进行了优化的模板引擎。

模板引擎：[https ://github.com/joyent/node/wiki/Modules#wiki-templating](https://github.com/joyent/node/wiki/Modules#wiki-templating)

# jquery - .click 函数 jQuery 后获取值 jQuery 与内容动态

> ID：13006237
> 
> 赞同：1
> 
> 时间：2012-10-22T06:50:34.663
> 
> 标签：jquery, html

我有下一个代码

HTML

```
<section class="listjobs" style="display: block;">
<div class="jobgroup GigaLab">GigaLab</div>
<div class="jobgroup CraftedContours">CraftedContours</div>
<div class="jobgroup FunPuntos">FunPuntos</div>
<div class="jobgroup Lexplique,LLC">Lexplique,LLC</div>
<div class="jobgroup Arriendas.cl">Arriendas.cl</div>
<div class="jobgroup Scholaroo.com">Scholaroo.com</div>
<div class="jobgroup OctaneNation">OctaneNation</div>
<div class="jobgroup Loogares.com">Loogares.com</div>
<div class="jobgroup AgentPiggy">AgentPiggy</div>
<div class="jobgroup AgentPiggy">AgentPiggy</div>
</section> 
```

这是我的 jQuery。

```
 (function($){

    $('#searchjob').keypress(function(e){
        var search = $.trim($(this).val());

        if (e.which == "13") {

            $.ajax({
                beforeSend: function(){
                    //$('#loading').html(<img src="rutagif" alt="loading" />);
                },
                url:"../wp-admin/admin-ajax.php",
                data:{ action: 'searching_job',data : search },
                //dataType: "json",
                type: "POST",
                success: function(data){
                    var jsonresult = JSON.parse(data);
                    var jobs = $('.listjobs');
                    var startups = [];

                    $.each(jsonresult, function(i, item){
                        startups.push(jsonresult[i].meta_value);
                    });

                    startups = $.unique(startups);

                    //console.log(startups);

                    jobs.hide().empty();

                    $.each(startups, function(i, item){
                        var startup = startups[i].replace(" ","");
                        jobs.append("<div id='"+startup+"'class='jobgroup'><h2>"+startups[i]+"</h2><p></p></div>").slideDown();
                    });

                }

            });

            e.preventDefault();

        };

    }); 
```

未找到此代码

```
 $(this).click(function(e){
        console.log($(this).text());
    }); 
```

还可以尝试使用 $('.lisjobs')，这会显示警报但无法获取数据，还可以尝试使用 $('section.listjobs .jobgroup')、$('.jobgroup') 并且未找到。还有其他想法吗？

```
 })(jQuery); 
```

但没有找到：/。如何使用“jobgroup”类获取 div 的值？任何例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:53:17.190

如果你想获得点击的价值，`jobgroup`你会做

```
$('section.listjobs .jobgroup').click(function(e){
    var name = $(this).text();
    /* Do something with "name" here */
}); 
```

但这只是用文本设置了一个变量，它没有做任何事情。

**编辑：**看起来您通过 AJAX 加载此内容，在这种情况下，您无法在运行时绑定它们，但需要使用`on()`. 此代码假设`section.listjobs`未通过 AJAX 加载。

```
$('section.listjobs').on('click', '.jobgroup', function(e){
    var name = $(this).text();
    /* Do something with "name" here */
}); 
```

[演示](http://jsfiddle.net/bjLxS/1/)

您也可以使用第一种方法绑定它们，但是您需要在将元素添加到 DOM 之后（即在 ajax`success`函数的末尾）运行该脚本。我还是会去的`on()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:57:03.450

该功能似乎正在工作。您将全文转储到变量“名称”中 - 您可能希望将其输出到某个地方以便您可以看到结果（可能使用*console.log()*）。

您可能还想更改单击的字段 - 目前您已将其设置为“listjobs”部分 - 如果您想输出它，可以将其链接到特定的工作组。

示例代码：

```
$('section.listjobs .jobgroup').click(function(e){
    console.log($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:57:37.580

您使用了错误的上下文。`this`是事件，而不是`div`。您需要选择 by `this.id`，这是触发事件的控件的 ID。

所以，你可以这样做：

```
var name = $('#' + this.id).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:14:33.860

尝试

```
$('.jobgroup').click(function(){
var tmpHtml = $(this).html();
alert(tmpHtml);
}); 
```

# email - Jenkins 向所有 SVN 用户发送电子邮件通知

> ID：13006244
> 
> 赞同：1
> 
> 时间：2012-10-22T06:50:58.683
> 
> 标签：email, jenkins

我有一个构建工作来清理、构建和测试我们的项目。我已经设置 Jenkins 向我 + 破坏构建的开发人员发送电子邮件。然后，我们让一位开发人员中断了测试，导致测试无法编译。Jenkins 向所有注册到 SVN 的人发送了一封电子邮件通知。

我们都在同一个分支上工作，但詹金斯不应该只通知我+破坏构建的一位开发人员吗？我知道所有在构建失败后接触过代码的开发人员也应该得到通知，但根据 SVN 日志，只有一个人在提交。Jenkins 在提交后立即轮询 SVN，因此没有后续提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:01:08.277

您是否使用“可编辑电子邮件通知”构建后操作？
如果您没有看到该选项，您可能需要下载“email-ext”插件
[https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

在构建后部分中选择插件后，您将拥有一个“高级”按钮。单击它，您将看到“添加触发器”选项。您有以下触发器：
- “成功”（成功构建）或
- “失败”（失败构建）。
- 还有一个“不稳定”构建的触发器。如果您正在运行 Maven，失败的测试通常会将构建标记为不稳定，或者您可以通过其他方式手动根据条件将构建标记为不稳定。

无论哪种方式，对于每个触发器，您都可以指定向谁发送电子邮件（并且您可以配置多个触发器）。

收件人列表 - 预定义列表，全局或每个触发器
提交者 - 对此结帐进行 SVN 更改的
人 罪魁祸首 - 自上次成功构建以来进行 SVN 更改的人
请求者 - 触发构建的用户

# java - 与任务调度程序一起使用时，jFileChooser 不起作用

> ID：13006245
> 
> 赞同：1
> 
> 时间：2012-10-22T06:50:59.660
> 
> 标签：java, nullpointerexception, scheduled-tasks, jfilechooser, event-dispatch-thread

我有一个程序可以向用户发送带有附件的电子邮件。该程序应该按照预定的时间运行，因此我使用任务调度程序为我做这件事。我做了所有必要的步骤来实现这一点。（创建 .bat 文件以激活/运行 jar 文件，然后任务调度程序将触发 .bat 文件，如果它达到规定的时间表。）现在的问题是，当程序运行或由任务调度程序触发时，它会发出这个错误：

```
java.lang.NullPointerException
at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source)
at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at sun.awt.shell.Win32ShellFolderManager2$ComInvoker$3.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我尝试使用 .bat 文件手动运行它，它运行良好，没有错误或任何错误。我怀疑它与 jFileChooser() 有关，因为它不会检索默认目录中的附件，但我不确定，可能还有其他原因。这是在默认目录中检索附件的函数：

```
 public String getMyDocument(String filename)
 {
     JFileChooser fr = new JFileChooser();
     FileSystemView fw = fr.getFileSystemView();
     return fw.getDefaultDirectory().toString()+"\\"+filename+".xls";
 } 
```

PS。

所有必需的附件都存在于默认目录中，没有拼写错误的单词或错位的字符。我也做了一些研究，但到目前为止我还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:39:51.123

终于发现问题了。我删除了 jfileChooser()，而是使用了 getAbsolutePath()。

```
public String getMyDocument(String filename)
 {
 String fileName = filename+'.xls';
 File attachmentFile = new File(fileName);
 String filePath = attachmentFile.getAbsolutePath().toString();
 return filePath();
 } 
```

# actionscript-3 - 将数据作为“xml”传递而不是作为对象传递

> ID：13006246
> 
> 赞同：1
> 
> 时间：2012-10-22T06:51:01.870
> 
> 标签：actionscript-3

我试图在“xml”数据传递或“对象”数据传递之间进行选择。（当与 customevents 一起传递数据时说）。什么是高效的？

五。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:20:35.930

***除非真的*必须，否则不要使用 XML ！**

在向/从 Flash 应用程序传输数据时最好使用 XML，但在内部使用它非常慢：

就个人而言，我总是使用向量、字典或结构类型的类在内部传递数据，而不是 XML！

[http://jacksondunstan.com/articles/1187](http://jacksondunstan.com/articles/1187) （根据这个网站，慢了几百倍！）

字典不能像 Objects 那样被声明为内联，但是使用对象作为键和值的能力真的很有用（更不用说弱引用了）——可能需要一段时间才能看到原因，或者什么时候需要它，但是一旦你这样做，你就会明白为什么它如此方便！

注意：有时 XML 可能有用 - 我在具有“撤消/保存”功能的应用程序中使用它，作为描述其状态或从 XML 描述配置自身所需的程序的一部分（有时是整个程序） . 在这种情况下它很有用：

a) 数据被间歇性地发送到服务器，或从中读取。由于数据已经是 XML 格式，因此不需要转换。

b）它更具可读性，因为调试也需要保存输出，因此值得牺牲一点速度。

c) 用户只会不频繁地撤消/重做操作。几分之一秒的轻微拖拽无关紧要，但如果你想优化你的代码，你不应该使用它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:20:50.417

当您需要在两种不同的技术之间传输数据时，XML 是一个不错的选择，这些技术本身不支持相同的数据类型，因此您可以使用 XML 为每种技术“统一”数据。然后双方可以解析 XML 并从中生成本机数据类型，以便处理（如果需要）。

确实，flash 对 XML（动态 XML 和 XMLList 类）具有非常原生的支持，它甚至支持 XML 文字。

我认为您应该从以下条件中进行选择：

*   如果您最初知道您的数据将包含哪些字段，例如 `red, green`字段，并且您知道这些字段不会更改。

您最好使用预定义的类结构。

*   如果您的数据会动态更改它的字段，例如有时它只有`red, green`字段，在某些情况下 `red, green, blue`。

*   如果您计划进一步将您的闪存应用程序与其他
    技术/服务一起使用。

使用 XML。

# c++ - 将动态数组传递给其他函数的正确方法

> ID：13006250
> 
> 赞同：9
> 
> 时间：2012-10-22T06:51:21.857
> 
> 标签：c++, arrays, dynamic

将动态大小的数组传递给另一个函数的最“正确”方法是什么？

```
bool *used = new bool[length](); 
```

我想出了几种编译方法，但我不太确定正确的方法是什么。

例如

这些会通过价值吗？

```
static void test(bool arr[])

static void test(bool *arr) 
```

这个会通过引用传递吗？

```
static void test(bool *&arr) 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T06:59:45.490

实际上，第一个想法通过**地址传递数组**，第三个想法通过**引用**传递数组。您可以设计一个小测试来检查这一点：

```
void test1(int* a) {
    a[0] = 1;
}

void test2(int a[]) {
    a[1] = 2;
}

void test3(int *&a) {
    a[2] = 3;
}

int main() {
    int *a = new int[3]();
    a[0] = 0;
    a[1] = 0;
    a[2] = 0;

    test1(a);
    test2(a);
    test3(a);

    cout << a[0] << endl;
    cout << a[1] << endl;
    cout << a[2] << endl;
} 
```

这个测试的输出是

```
1
2
3 
```

如果参数是**按值**传递的，则不能在函数内部对其进行修改，因为修改将保留在函数的范围内。在 C++ 中，数组不能按值传递，所以如果你想模仿这种行为，你必须传递 a`const int*`或 a`const int[]`作为参数。这样，即使数组是通过引用传递的，它也不会因为`const`属性而在函数内部被修改。

要回答您的问题，首选方法是使用 a `std::vector`，但如果您绝对想使用数组，则应该使用`int*`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T06:53:13.397

你是对的。前两个是等价的，通过值传递一个指针。从风格上讲，第二个是首选，因为它准确地描述了情况，即您正在传递一个指向您的函数的指针。对于那些不太相信你不能在 C++ 中传递数组的人来说，第一个是一种宿醉。在 C++ 中无法按值传递数组。第三个通过引用传递一个指针。

这里有一个混淆，在所有情况下，指针都“引用”你的数组。因此，在谈论按值传递或按引用传递时，您应该清楚您是在谈论指针还是它所引用的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:54:33.213

```
static void test(bool arr[])
static void test(bool *arr, size_t size) 
```

对于静态/动态数组，如果您不想更改此指针的位置。

示例： http: [//liveworkspace.org/code/c5e379ebe2a051c15261db05de0fc0a9](http://liveworkspace.org/code/c5e379ebe2a051c15261db05de0fc0a9)

```
static void test(bool *&arr) 
```

如果要更改位置，则为动态。

示例： http: [//liveworkspace.org/code/bd03b214cdbe7c86c4c387da78770bcd](http://liveworkspace.org/code/bd03b214cdbe7c86c4c387da78770bcd)

但是，由于您使用 C++ 编写 - 使用向量，而不是原始动态数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T06:55:55.427

用这个：

```
void myFuncThatAcceptsDynamicArrays(bool* array, int size) {
   // Do something (using the size as the size of the array)
} 
```

由函数的用户提供有效的大小（这可能非常危险）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:31:37.757

我总是将向量用于动态大小的数组。在所有情况下，C++ 中的数组都是通过引用传递的，因为它们的指针地址只被传递。在数组的情况下，没有原始的方法可以按值传递。

# hibernate - 新实体上的休眠二级集合缓存

> ID：13006251
> 
> 赞同：0
> 
> 时间：2012-10-22T06:51:25.173
> 
> 标签：hibernate, caching, collections, ehcache

这是我的场景：

我有一个跨越 2 个 spring 事务的流程（P=Required，I=Default）。

在 T1 上，我实例化了一个实体 A，它有一个空的 B 集合。

A 和 B 实体以及 oneToMany 关系都标有 @Cache 注释。我已经尝试过 CacheConcurrencyStrategy.READ_WRITE 和 CacheConcurrencyStrategy.NONSTRICT_READ_WRITE。

我使用 ehcache 作为缓存提供程序。

在 T1 上，我合并了 A 实体。

在 T2 上，我再次合并它。

问题是，每当 A 实体在 T2 上合并时，hibernate 都会查询 B 的集合，因为他无法在二级缓存中找到它。

一旦集合被加载，缓存就会被使用（如果我对新事务 T3 进行了相同的合并，它会从缓存中获取集合）。

如何避免执行此查询？IE：如何在加载之前使新创建的集合休眠二级缓存？

另外，我考虑过使用第一级缓存，以某种方式设法使一个休眠会话成为线程绑定的，跨 T1 和 T2（但我不确定它是否也适用于集合......）它是否可以接受程序？如何做到这一点？

TKS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:44:02.097

对于您指定的这个问题，即“问题是，每当 A 实体在 T2 上合并时，hibernate 都会查询 B 的集合，因为他在二级缓存中找不到它。” 你必须检查`inverse property`休眠状态。只是设置`inverse=true`值，它不会再次获取 B 的集合。[您可以在链接](https://stackoverflow.com/questions/6423889/hibernate-inverse-attribute)中找到反向属性的详细说明。

我希望这将帮助您理解与逆属性相关的其他问题。

# javascript - 更改类上的元素内部html？

> ID：13006252
> 
> 赞同：2
> 
> 时间：2012-10-22T06:51:27.753
> 
> 标签：javascript, onclick, this

这里我有代码：

```
<div class="starright"><img src="images/stars1.png" width="30" height="30" /></div>
<div class="starright"><img src="images/stars1.png" width="30" height="30" /></div>
<div class="starright"><img src="images/stars1.png" width="30" height="30" /></div>
<div class="starright"><img src="images/stars1.png" width="30" height="30" /></div> 
```

我想更改内部的 onClick 图像，但只是在单击的对象上？一点也不？我有问题，因为这是 css 中的类而不是 ID，这可能吗，也许像 onClick This？

已编辑。这很好用：

```
function change(element){
element.innerHTML = "[new inner HMTL]";
} 
```

但是第二次点击时如何在第一张图片上恢复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:54:43.230

在 jquery 中试试这个代码：

```
$('.starright').click(function(){
   var path1 = "insert a path";
   var path2 = "insert another path";
   var src =   $(this).find ('img').attr('src');
   if (src==path1){
      $(this).find ('img').attr('src',path2);
   }
   else{
      $(this).find ('img').attr('src',path1);
   }
}); 
```

是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:54:49.487

是的。你可以这样做：

Javascript：

```
function change(element){
 element.innerHTML = "[new inner HMTL]";
} 
```

HTML：

```
<div class="starright" onclick="change(this);"><img src="images/stars1.png" width="30" height="30" /></div> 
```

# asp.net - 在asp.net VB的确认框中单击确定后重定向到页面

> ID：13006259
> 
> 赞同：2
> 
> 时间：2012-10-22T06:51:44.777
> 
> 标签：asp.net, redirect, response

我在重定向到另一个页面的按钮上有一个 if 条件。如果条件为真，我希望弹出一个确认框。如果用户在框上单击“确定”，他应该重定向到页面，否则不会。我不太擅长 Java 脚本。我只是尝试在以下几行中开发一些东西，但似乎没有任何效果。在这方面的任何帮助将不胜感激。我在客户端的 Asp.net 和 VB 中工作

```
Dim sb As New System.Text.StringBuilder()

        sb.Append("<script type = 'text/javascript'>")
        sb.Append("window.onload=function(){")
        sb.Append("if (confirm('")
        sb.Append(message)
        sb.Append("'))};")
        sb.Append(Response.redirect)
        sb.Append("</script>")
        ClientScript.RegisterClientScriptBlock(Me.GetType(), "confirm", sb.ToString()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:00:12.883

代替：

```
sb.Append("'))};")
sb.Append(Response.redirect)
sb.Append("</script>") 
```

和：

```
sb.Append("')){")
sb.Append("window.location = 'http://domain/page.aspx';")
sb.Append("}};</script>") 
```

# iphone - 从 iDevice 上传视频到 FTP

> ID：13006261
> 
> 赞同：3
> 
> 时间：2012-10-22T06:51:52.390
> 
> 标签：iphone, objective-c, ipad, ftp, nsinputstream

我正在开发一个 APP 供用户将视频上传到我们的 FTP 服务器

到目前为止，一切都差不多完成了，但我遇到一个问题是用户上传视频（.MOV）后，我无法打开和播放文件。

quicktime播放器返回的错误信息是“无法打开，因为无法识别电影的文件格式”

在我的代码中，我让用户使用 ALAssetsLibrady 选择视频

然后将视频加载到 ALAsset 对象中，在开始上传之前，将视频从 ALAsset 加载到 NSInputStream 对象中，这里是代码。

```
ALAssetRepresentation *rep = [currentAsset defaultRepresentation];
Byte *buffer = (Byte*)malloc(rep.size);
NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];

iStream = [NSInputStream inputStreamWithData:data];
[iStream open]; 
```

下一步是设置一个 NSOutputStream 并打开它，通过以下代码处理上传操作。

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
switch (eventCode) {
    case NSStreamEventNone:
    {
        break;
    }
    case NSStreamEventOpenCompleted:
    {
        //opened connection
        NSLog(@"opened connection");
        break;
    }
    case NSStreamEventHasBytesAvailable:
    {
        // should never happen for the output stream
        [self stopSendWithStatus:@"should never happen for the output stream"];
        break;
    }
    case NSStreamEventHasSpaceAvailable:
    {
        // If we don't have any data buffered, go read the next chunk of data.
        NSInteger bufferSize = 65535;
        uint8_t *buffer = malloc(bufferSize);

        if (bufferOffset == bufferLimit) {
            NSInteger bytesRead = [iStream read:buffer maxLength:bufferSize];

            if (bytesRead == -1) {
                [self stopSendWithStatus:@"file read error"];
            } else if (bytesRead == 0) {
                [self stopSendWithStatus:nil];
            } else {
                bufferOffset = 0;
                bufferLimit  = bytesRead;
            }
        }

        // If we're not out of data completely, send the next chunk.

        if (bufferOffset != bufferLimit) {
            NSInteger bytesWritten = [oStream write:&buffer[bufferOffset] maxLength:bufferLimit - bufferOffset];
            if (bytesWritten == -1) {
                [self stopSendWithStatus:@"file write error"];
            } else {
                bufferOffset += bytesWritten;
            }
        }

        //NSLog(@"available");
        break;
    }
    case NSStreamEventErrorOccurred:
    {
        //stream open error
        [self stopSendWithStatus:[[aStream streamError] description]];
        break;
    }
    case NSStreamEventEndEncountered:   //ignore
        NSLog(@"end");
        break;
}
} 
```

没有任何错误发生，视频文件确实以正确的文件大小和名称上传到 FTP，但无法打开它。

有人知道任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T09:48:32.963

我已经为流 ALAsset 对象制作了 NSInputStream 实现 - [POSInputStreamLibrary](https://github.com/pavelosipov/POSInputStreamLibrary)。它不会将整个 1GB 视频读入内存作为您的解决方案，而是读取带有块的电影。当然这不是 POSBlobInputStream 的唯一特性。更多信息在我的 GitHub 存储库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:56:16.183

我知道这可能不是您正在寻找的答案，但您不应该使用通过 FTP 的直接连接来允许用户将文件上传到您的网络服务器。与 REST 相比，它不安全且速度慢。

相反，为什么不编写一点 php 来处理上传，并通过 REST 从应用程序发布文件？这里：

```
$uploaddir = 'uploads/';
$file = basename($_FILES['file']['name']);
$uploadfile = $uploaddir . $file; 
```

我还建议使用 AFNetworking 来处理 POST 请求[http://afnetworking.com/](http://afnetworking.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T02:11:02.777

首先，我想您的意思是通过转换`ALAsset`为`NSInputStream`其他方式来减少内存容量`NSData`。但是您`NSData`先将其转换为，然后再转换`NSData`为`NSInputStream`，这没有意义，也不会减少内存容量，因为您已经将视频放入内存与`NSData`。

因此，如果您想通过传输视频`Stream`以减少内存压力（或者您别无选择，因为您的视频高达 2GB 或更多），您应该使用`CFStreamCreateBoundPair`逐块上传文件，请参阅下面编写的[Apple iOS 开发人员库](https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WorkingWithHTTPAndHTTPSRequests/WorkingWithHTTPAndHTTPSRequests.html#//apple_ref/doc/uid/TP40010220-CH8-SW3).

> 对于构造数据的大块，调用 CFStreamCreateBoundPair 创建一对流，然后调用 setHTTPBodyStream: 方法告诉 NSMutableURLRequest 使用其中一个流作为其正文内容的源。通过写入另一个流，您可以一次发送一个数据。

我在[github](https://github.com/luowenxing/ALAssetToNSInputStream)`ALAsset`上有一个转换为`NSInputStream`via的 swift 版本。关键点就像编写的文档一样。另一个参考是[这个问题](https://stackoverflow.com/questions/18348863/ios-how-to-upload-a-large-asset-file-into-sever-by-streaming)。`CFStreamCreateBoundPair`

希望对您有所帮助。

# matlab - 用于运行 MATLAB 的滑动窗口函数的嵌套 forloops

> ID：13006262
> 
> 赞同：1
> 
> 时间：2012-10-22T06:51:56.910
> 
> 标签：matlab, nested-loops

我正在尝试编写一个简单的代码，它将生成一个大窗口的总和并除以小运行窗口的总和以获得能量比。

我的代码在 MATLAB 中看起来像这样

```
S           = data1;
[nt,ntraces] = size(S);

!Create sliding windows for First Break Picking:

!define a window length
!for large Window
nl = 300            
!for small running Window
ns = 50 
! tolerance/Fudge Factor
beta = 0.0000

for i_slide = 1:nt-nl
for i_large = i_slide:(i_slide+nl)
    large_window(i_large) = sum(S(i_large).^2)';

    for i_small = i_slide+ns:i_slide+nl
        small_window(i_small) = sum(S(i_small).^2)';
    end

end

ER(i_slide) = small_window/(large_window + beta);
end 
```

我遇到的问题是我的小运行窗口没有正确索引，也没有在最大滑动处沿整个大窗口长度运行总和。

有什么想法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:59:40.727

一般来说，您真正要解决的问题似乎是一般的二维（或一维？）卷积。您可以使用 MATLAB 的 conv 或 conv2 函数（或 filter 或 imfilter，如果您有图像处理工具箱）来执行此操作。如果您*需要*编写一个二维卷积函数，我不会尝试编写一个执行两个卷积并取比率的函数。而是编写一个简单的卷积函数： my_conv 并运行两次，然后取比率。例如，您正在尝试编写：

```
output = my_double_conv(data,smallFilt,bigFilt); %this does ratios 
```

总的来说，我认为这不是一个好主意。不要那样做。做

```
output = my_conv(data,smallFilt) ./ my_conv(data,bigFilt); 
```

您*可能会*看到不必在 my_double_conv 中对所有内容进行两次索引会带来一些速度优势，但如果计算问题是您的问题，那么您首先不应该编写自己的卷积；相反，您应该使用 FFT 卷积或积分图像卷积（例如，[http](http://hebb.mit.edu/courses/9.29/2004/readings/c13-1.pdf) ://hebb.mit.edu/courses/9.29/2004/readings/c13-1.pdf或[http://en.wikipedia.org/ wiki/Summed_area_table](http://en.wikipedia.org/wiki/Summed_area_table) )

也就是说，您的代码有几个问题。您是否尝试过使用 MATLAB 调试器进行调试？

例如，这显然是错误的，因为 i_small 是一个标量索引：

```
for i_small = i_slide+ns:i_slide+nl
    small_window(i_small) = sum(S(i_small).^2)';
end 
```

这个总和不会对任何东西“求和”，因为 i_small 将是一个标量......

你想要：

```
small_window= S(i_slide+ns:i_slide+nl);
small_window_sum = sum(small_window.^2); 
```

另请注意，对于逐元素矩阵运算，例如：

小窗口/（大窗口 + 测试版）；

如果 small_window 和 large_window 是标量，您需要：

small_window./(large_window + beta); %注意“。”

# ios - 当我隐藏 UINavigation 栏时，UITableView 无法工作。帮助~

> ID：13006264
> 
> 赞同：0
> 
> 时间：2012-10-22T06:52:06.787
> 
> 标签：ios, uitableview, uinavigationcontroller, uinavigationbar

只是一个简单的应用程序

我创建了两个`UIViewController`，分别命名为 A 和 B。
appDelegate 中的代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    A * a = [[A alloc] initWithNibName:@"A" bundle:nil];
    UINavigationController * nav = [[UINavigationController alloc] initWithRootViewController:a];

    [self.window setRootViewController:nav];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

ViewController A 中的代码

```
- (void)goB {
    B * b = [[B alloc] initWithNibName:@"B" bundle:nil];
    [[self navigationController] pushViewController:b animated:YES];
}

- (void)viewDidLoad {
    [super viewDidLoad];

//    [[[self navigationController] navigationBar] setHidden:YES]; // i guess this line make a problem
    [[self navigationController] setNavigationBarHidden:YES];

    UISwipeGestureRecognizer * s = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(goB)];
    [s setDirection:UISwipeGestureRecognizerDirectionLeft];
    [[self view] addGestureRecognizer:s];
} 
```

ViewController B 中没有代码，但我将 a`UITableView`放入 B.xib。
然后，如果我写

```
[[[self navigationController] navigationBar] setHidden:YES]. 
```

B 中的 tableView 不能工作，我不能滚动它。
但是如果我删除这一行，它就可以工作。
还有一个问题。当我添加`UITableView`数据源和委托时。
`@interface D : NSObject <UITableViewDataSource, UITableViewDelegate>`

```
@implementation D

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 4;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell * cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

    [[cell textLabel] setText:@"123"];
    return cell;
} 
```

我有另一个错误。

```
libobjc.A.dylib`objc_msgSend:
0x37dd3fac:  teq.w  r0, #0
0x37dd3fb0:  beq    0x37dd3fee                ; objc_msgSend + 66
0x37dd3fb2:  push.w {r3, r4}
0x37dd3fb6:  ldr    r4, [r0]
0x37dd3fb8:  lsr.w  r9, r1, #2
0x37dd3fbc:  ldr    r3, [r4, #8]
0x37dd3fbe:  add.w  r3, r3, #8
0x37dd3fc2:  ldr    r12, [r3, #-8]
0x37dd3fc6:  and.w  r9, r9, r12
0x37dd3fca:  ldr.w  r4, [r3, r9, lsl #2]
0x37dd3fce:  teq.w  r4, #0
0x37dd3fd2:  add.w  r9, r9, #1
0x37dd3fd6:  beq    0x37dd3fea                ; objc_msgSend + 62
0x37dd3fd8:  ldr.w  r12, [r4]
0x37dd3fdc:  teq.w  r1, r12
0x37dd3fe0:  bne    0x37dd3fc2                ; objc_msgSend + 22
0x37dd3fe2:  ldr.w  r12, [r4, #8]
0x37dd3fe6:  pop    {r3, r4}
0x37dd3fe8:  bx     r12
0x37dd3fea:  pop    {r3, r4}
0x37dd3fec:  b      0x37dd3ff4                ; objc_msgSend_uncached
0x37dd3fee:  mov.w  r1, #0
0x37dd3ff2:  bx     lr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:21:03.883

you can also try to use

```
[[[self navigationController] topViewController] setNavigationBarHidden:YES] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:17:15.153

用这个

```
 [self.navigationController setNavigationBarHidden:YES]; 
```

代替

```
 [[[self navigationController] navigationBar] setHidden:YES]. 
```

# web-services - UPS“访问许可证号”

> ID：13006266
> 
> 赞同：0
> 
> 时间：2012-10-22T06:52:56.397
> 
> 标签：web-services, api, licensing, ups

这个问题与 Stackoverflow Question -> [Access license number for UPS 有关](https://stackoverflow.com/questions/3684087/access-licence-number-for-ups)

当我注册开发者 API 时，我获得了一个由 4 部分组成的凭据：用户 ID、密码、访问密钥和发件人编号。我使用这个和 CIE URL 来获取费率、打印运输标签等。到目前为止一切都很好。一切正常。我已经能够构建和测试使用 UPS API 的桌面和 Web GUI。

现在我明白了我需要实现 UPS Registration API 和 Licensing API 来申请认证。我为此向 UPS 申请并收到了 API 包。再说一次，到目前为止一切都很好。现在，我有两个问题：

1- 我了解我们可以使用注册 API 来验证现有 UPS 帐户，以便最终用户访问我的应用程序。我们还可以使用它来允许最终用户创建一个或多个新的 UPS 帐户以用于该应用程序。如果注册 API 负责这个，那么 Licensing API 有什么用？UPS 文档并不广泛可用，API 工具包附带的文档非常少。

2- 我的应用程序将使用最终用户的 UPS 帐号进行运输，但它应该使用哪个访问密钥？它应该使用每个最终用户的访问密钥，还是我的每个人的访问密钥？如果是前者，那么是否应该使用 Licensing API 获取此最终用户访问密钥？这是 Licensign API 的目的吗？

本质上，我认为这两个问题是相同的，但是您可以看到我对实现注册和许可 API 的要求是多么困惑！

您专家的任何见解都会非常棒！

更新：只是想添加另一个问题：

3- 我正在为所有 UPS 功能使用 UPS Web 服务。包含 Licensing API 和 Registration API 的包有一个“Reference.cs”，用于注册 API，但没有用于 Licensing API（只有该文件夹中的 XSD）。Licensing API 是否不能作为 Web 服务使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:03:40.140

有关许可 API 的问题应咨询 UPS Ready 的人员。这不是适当的论坛。

# coffeescript - casperjs抓取给出空网页响应

> ID：13006267
> 
> 赞同：2
> 
> 时间：2012-10-22T06:53:07.180
> 
> 标签：coffeescript, casperjs

我为 CasperJS 编写了一个脚本，该脚本应该读取一个 json 文件，该文件包含一个站点列表，其中包含有关如何登录的详细信息，并为每个关键字运行搜索页面。

我已经用一个可以工作的站点测试了我的代码，但是对于第二个站点，它会登录，但是当它尝试转到搜索页面时，它会返回一个空页面。

这是我的 casper 设置：

```
casper = require('casper').create(
  clientScripts: [
    'jquery.min.js'
  ]
  verbose: true
  logLevel: "debug"
) 
```

这是循环代码：

```
casper.start().each sites, (self, site)->
  search_results[site.title] = {}
  self.thenOpen site.login.path, 
    method: "get"
    data: site.login.getdata
  , ->
    @echo "Visiting Login Page: #{site.login.path}"
  self.then ->
  self.then ->
    @evaluate (ufield,user,pfield,pass)->
      jQuery(ufield).val(user)
      jQuery(pfield).val(pass)
    ,
      ufield: site.login.form.username.element
      user: site.login.form.username.value
      pfield: site.login.form.password.element
      pass: site.login.form.password.value
  self.then ->
    @echo "Added formdata" 
  self.then ->
    @click "#{site.login.form.element} #{site.login.form.submit}"
  self.then ->
    @echo "Submitted form" 
  self.then ->  
    @waitUntilVisible site.login.form.wait.element, ->
      @echo 'Page Loaded'
    , ->
      @echo "Login Failed"
      @exit 1
    , max_timeout
  self.each keys, (self, skey)->
    self.thenOpen site.search.path, 
      method: "get"
      data: site.login.getdata
    , ->
      @echo "Visiting Search Page: #{site.search.path}, for #{skey}"
    self.then ->
      @echo @page.content
      @waitUntilVisible "#{site.search.form.element} #{site.search.form.query.element}"
      , ->
        @echo "Search Form Visible"
      , ->
        @echo "Search Visit Failed"
        @exit 1
      , max_timeout
    self.then ->
      @evaluate (key, feild)->
        jQuery(feild).val(key)
      ,
        key: skey
        feild: site.search.form.query.element
    self.then ->
      @echo "Added searchdata"
    self.then ->
      @click "#{site.search.form.element} #{site.search.form.submit}"
    self.then ->
      @echo "Submited Search"
    self.then ->
      @waitUntilVisible site.search.form.wait.element
      , ->
        @echo "Search Results Visible"
      , ->
        @echo "Search Failed"
        @exit 1
      , max_timeout
    self.then ->
      result_links = @evaluate (linktag)->
        res = []
        res_els = __utils__.findAll(linktag)
        Array.prototype.forEach.call res_els, (e)->
          href = e.getAttribute("href")
          label = jQuery(e).text()
          res.push {href: href, label: label} if href?
        res
      ,
        linktag: "#{site.search.threads.element} #{site.search.threads.link.element}"
    self.then ->
      utils.dump result_links
      search_results[site.title][skey] = result_links 
```

与失败有关的控制台输出如下：

```
[debug] [phantom] opening url: http://www.cyclingforums.com, HTTP GET
[debug] [phantom] Navigation requested: url=http://www.cyclingforums.com/, type=Other, lock=true, isMainFrame=true
[debug] [phantom] url changed to "http://www.cyclingforums.com/"
[debug] [phantom] Automatically injected jquery.min.js client side
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 50/68 http://www.cyclingforums.com/ (HTTP 200)
Visiting Search Page: http://www.cyclingforums.com, for track
[info] [phantom] Step 50/68: done in 63268ms.
[info] [phantom] Step 51/68 http://www.cyclingforums.com/ (HTTP 200)
<html><head></head><body></body></html>
[info] [phantom] Step 51/68: done in 63352ms.
[info] [phantom] Step 52/69 http://www.cyclingforums.com/ (HTTP 200)
[info] [phantom] Step 52/69: done in 63452ms.
[warning] [phantom] Casper.waitFor() timeout
Search Visit Failed 
```

为什么页面响应为空页面？

编辑：通过与其他站点的测试，似乎基本代码有效，但是这个站点似乎引起了问题。

# python - 使用列表理解

> ID：13006271
> 
> 赞同：2
> 
> 时间：2012-10-22T06:53:18.097
> 
> 标签：python, string, list, dictionary, tuples

我有一个字符串，字典形式为：

```
('(Laughter flower)',
 {'laughter': (8.5, 0.9313),
  'flower': (7.88, 1.1718),
  'the': (4.98, 0.9145),
  'puppy': (7.58, 1.4581),
  'died': (1.56, 1.198),
  'laugh': (9.5, 0.1),
  'flow': (2.3, 0.51)
 }
) 
```

每个括号是对应于（分数，标准差）的元组。我只取每个元组中第一个整数的平均值。我试过这个：

```
def score(string, d):
    if len(string) == 0:
        return 0
    string = string.lower()
    included = [d[word][0]for word in d if word in string]
    return sum(included) / len(included) 
```

当我运行时：

```
print score ('(Laughter flower)', {'laughter': (8.5, 0.9313), 'flower': 
(7.88, 1.1718), 'the':(4.98, 0.9145), 'puppy':(7.58, 1.4581), 
'died':(1.56, 1.198),'laugh': (9.5, 0.1),'flow': (2.3, 0.51)}) 
```

我应该只得到`'laughter'`and `'flower'`:`8.5 + 7.88 / 2`但这个运行函数还包括`'laugh'`and `'flow'`:的平均值`8.5 + 7.88 + 9.5 + 2.3 /4`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:12:45.130

@Ignaco 关于你为什么要包括“流”和“笑”是正确的......

您可以编写如下代码：

```
data = ('(Laughter flower)', {'laughter': (8.5, 0.9313), 'flower': (7.88, 1.1718), 
'the':(4.98, 0.9145), 'puppy':(7.58, 1.4581), 'died':(1.56, 1.198), 'laugh': 
(9.5, 0.1),'flow': (2.3, 0.51)})

# Unpack for naming
keys, vals = data
# Assume () and first and last
look_for = keys[1:-1].lower().split()
# Get relevant numbers
nums = [vals[k][0] for k in look_for]
# Print average
print sum(nums) / len(nums) 
```

* * *

因此，您将函数概括为仅平均相关键的第一个元素：

```
def somefunc(keys, dct):
    vals = [dct[k][0] for k in keys]
    return sum(vals) / float(len(vals)) 
```

而且您必须以某种方式预处理一些字符串，以便它是一系列有效键：

```
some_string = '(laughter flower)'
keys = some_string[1:-1].lower().split()
print somefunc(keys, some_dict) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:03:41.710

像这样的东西：

```
In [65]: lis=('(Laughter flower)', {'laughter': (8.5, 0.9313), 'flower': (7.88, 1.1718), 
'the':(4.98, 0.9145), 'puppy':(7.58, 1.4581), 'died':(1.56, 1.198), 'laugh': 
(9.5, 0.1),'flow': (2.3, 0.51)})

In [68]: strs=lis[0].strip('()').split() # returns ['Laughter', 'flower']

In [69]: lis1=[lis[1][x][0] for x in lis[1] if x in map(str.lower,strs)]

In [70]: sum(lis1)/float(len(lis1))
Out[70]: 8.1899999999999995 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T04:45:48.510

```
def score(string,d):
    if string=="":
        return 0
    string=string.lower().split()
    included=[d[word][0] for word in d if word in string]
    return(sum(included)/len(included)) 
```

# 你的字符串='（笑花）'

它是一个字符串而不是两个不同的单词，因此当您将 [d[word][0] for word in d ***if word in string]***应用时，它没有得到该单词。因此，如果您不在字符串周围使用 () 括号，这将很容易。而是使用“笑花”。但它仍然是一个字符串而不是两个单词，所以你必须拆分它***string.split()***它将创建一个包含两个单词的列表，然后你的函数将起作用。

# jquery - 用 $.each 创建数组对象不起作用

> ID：13006272
> 
> 赞同：0
> 
> 时间：2012-10-22T06:53:21.930
> 
> 标签：jquery, jqgrid, arrayobject

我正在尝试使用 JQGrid 创建本地表，在我更改数组之前一切正常，这是**工作**代码：

**HTML 代码：**

```
<div id=main style="width: 350px; height:200px;background-color:orange;">
<table id="grid"></table>
</div> 
```

**JS代码**

```
$(document).ready(
    function()
    {        
        jQuery("#grid").jqGrid({
         datatype: 'local',
         colNames:["User Name","Meet","Time"],
         height:"100%",
         autowidth: true,
         colModel :[
                    {name:"name",index:"name"},
                    {name:"to_meet",index:"to_meet"},
                    {name:"time",index:"time"}
                    ],
                    gridview: true,
                    viewrecords: true    });

    });

var mydata = [
              {name:"test",to_meet:"111",time:"0500"},
              {name:"test2",to_meet:"112",time:"0530"},
              {name:"test3",to_meet:"113",time:"0600"},
              {name:"test4",to_meet:"114",time:"0630"},
              {name:"test5",to_meet:"115",time:"0700"},
              {name:"test6",to_meet:"116",time:"0730"},
              {name:"test7",to_meet:"117",time:"0800"},
              {name:"test8",to_meet:"118",time:"0830"},
              {name:"test9",to_meet:"119",time:"0900"},
              {name:"test10",to_meet:"120",time:"0930"},
              {name:"test11",to_meet:"121",time:"1000"},
              {name:"test12",to_meet:"122",time:"1030"},
              {name:"test13",to_meet:"123",time:"1100"},
              {name:"test14",to_meet:"124",time:"1130"},
              {name:"test15",to_meet:"125",time:"1200"},
              {name:"test16",to_meet:"126",time:"1230"}
    ];
    console.log(mydata.length)
    for(var i=0; i<mydata.length;i++)
{

  alert(mydata);
        jQuery("#grid").jqGrid('addRowData',i+1,mydata[i]); ;

} 
```

你也可以从这里运行它：http: [//jsfiddle.net/bYQn6/2/](http://jsfiddle.net/bYQn6/2/)

现在，当我将 Obj 数组更改为：

```
$.each(myarray, function(i, val){
gridi.push('{name:"' + val.Name + '",to_meet:"' + val.meet + '",time:"' + val.time + '"}');
    });

var mydata = [gridi.toString()]; 
```

打印这个“mydata”看起来和上面的“mydata”一模一样，但它不起作用:(

我究竟做错了什么？？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:08:16.800

你为什么要创建字符串并推入gridi？

您可以创建新对象，例如：

```
$.each(myarray, function(i, val){  
    gridi.push({'name': val.name, 'to_meet': val.meet, 'time':val.time});  
}  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:12:31.790

将一个数组转换为另一个数组的正确方法是使用[`$.map`](http://api.jquery.com/jQuery.map/)：

```
var mydata = $.map(myarray, function(val) {
    return {
        name: val.Name,
        to_meet: val.meet,
        time: val.time
    };
}); 
```

回调函数依次被赋予原始数组的每个元素，并将函数的返回值累加到一个新的数组中。

# java - 如何获取一个数组来引用一个类

> ID：13006273
> 
> 赞同：0
> 
> 时间：2012-10-22T06:53:20.810
> 
> 标签：java, arrays, class

我希望尝试让一个数组引用一个类，但想不出一种方法来做到这一点。我有我的主要班级、客户和另一个叫做组织。

我基本上制作了一个小型数据库，用户可以在其中添加组织并编辑组织中的信息。信息包括，ID#，姓名，地址等

我想知道如何获得一个数组来基本上存储新的组织类，这样当我想添加一个组织时，它会运行一个新的组织类并将该版本的类存储在数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:11:20.683

您可能最好使用`List`，除非您可以确定可以与客户端关联的最大组织数。数组的大小在创建时是固定的，这可能不适合您的用例。

例如：

```
public class Client {
  private final List<Organisation> organisations = new ArrayList<Organisation>();

  void addOrganisation() {
    // dummy/example method
    organisations.add(new Organisation("Foo", new Address("blah")));
  }
}

public class Organisation {
  private final String name;
  private final Address address;

  public Organisation(String name, Address address) {
    this.name = name;
    this.address = address;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:17:01.760

`ArrayList<Organisation>`

是我认为的最佳选择。阅读[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)以熟悉它。它安静得心应手。

# dart - 在 Dart 中加载结构化文本资源文件的最佳方法是什么

> ID：13006274
> 
> 赞同：0
> 
> 时间：2012-10-22T06:53:22.870
> 
> 标签：dart

我有一个结构化数据文件。我创建了文件，因此格式可以灵活。目前它是一种自定义文本格式，但也可以是 xml 或 Json。我的意图是将其全部加载到客户端，然后将其放入内部存储器结构中。从服务器获取资源文件并在 Dart 中解析的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:28:57.670

你考虑过只使用 JSON 吗？

在服务器上执行此操作：

```
import 'dart:json';

var obj = {'foo': 'bar'};
var output = JSON.stringify(obj); // Send the output to the client. 
```

然后在你做的客户端上：

```
import 'dart:json';

var obj = JSON.parse(jsonedObject); // obj now holds a {'foo': 'bar'} 
```

还是我理解错了问题？

# asp.net - 如何使用 ajax 日历扩展器在 C# 中添加或减去日期？

> ID：13006280
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:53:49.070
> 
> 标签：asp.net, .net, c#-3.0

我有两个使用 ajax 日历扩展器的文本框。当我从一个文本框中选择一个日期时，它应该通过添加一些天或月来自动填充另一个文本框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:23:49.407

请按照此示例修改您的代码。希望能帮助到你。

```
<asp:UpdatePanel id="UpdatePanel1" runat="server">
<contenttemplate>
<cc2:CalendarPopup id="CalendarExtender1" runat="server" Width="71px" OnDateChanged="CalendarPopup1_DateChanged" AutoPostBack="True"></cc2:CalendarPopup>
<cc2:CalendarPopup id="CalendarExtender2" runat="server" Width="71px"></cc2:CalendarPopup>
</contenttemplate>
</asp:UpdatePanel>        

**Code behind:**

 protected void CalendarPopup1_DateChanged(object sender, EventArgs e)
    {
        CalendarPopup2.SelectedDate = CalendarPopup1.SelectedDate.AddDays(1); // you can add the number of days you want
    } 
```

此外，以下链接可能会让您更好地了解该主题：

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=149](http://www.dotnetcurry.com/ShowArticle.aspx?ID=149)

# python - Tastypie GET manyTomany 错误

> ID：13006281
> 
> 赞同：1
> 
> 时间：2012-10-22T06:53:53.563
> 
> 标签：python, django, tastypie

我在使用具有非常正常的 m2m 关系的 Tastypie 时遇到问题。在我的（简化）模型中：

```
class Promos(models.Model):
    promo_id = UUIDField(auto=True, unique=True, primary_key=True, null = False)
    title = models.CharField(max_length=400, default='title', null = False)
    text = models.TextField(max_length = 10000, null = False, default='text')
    category = models.ManyToManyField(CatPromos, null=True)
    active = models.BooleanField(null = False, default=False)

class CatPromos(models.Model):
    description = models.CharField(max_length = 10, unique=True, default='NoCat') 
```

在我的资源中：

```
class PromosResource(ModelResource):
    category =  fields.ForeignKey(CatPromosResource, 'category', full=True, null=True)
    class Meta:
        object_class = Promos
        queryset = Promos.objects.all()
        allowed_methods = ['get']
        include_resource_uri = True
        authentication = Authentication()
        authorization = Authorization()
        always_return_data = False
        filtering = {"category":ALL_WITH_RELATIONS}

    def get_object_list(self, request, *args, **kwargs):
        return Promos.objects.filter(active=True)   

class CatPromosResource(ModelResource):
    class Meta:
        object_class = CatPromos
        queryset = CatPromos.objects.all()
        allowed_methods = ['get']
        include_resource_uri = True
        authentication = Authentication()
        authorization = Authorization()
        always_return_data = False
        filtering = {"description":ALL}
        detail_uri_name = "_pk_val" 
```

我想要的是获取促销列表，按描述过滤，例如 www.server.com/api/v1/promos?format=json&category__description=XXX

首先，请注意 CatPromosResource 的 Meta 类中的“detail_uri_name”。Tastypie（最新版本）由于 detail_uri_name 的一些问题而不断崩溃。默认为“pk”，但使用它的对象需要“_pk_val”。这一点，我经过一些调试才意识到。但是现在的问题是，每当我使用上面的 uri 调用 GET 时，服务器就会崩溃并显示以下消息：

```
"invalid literal for int() with base 10: ''", 
"traceback": "Traceback (most recent call last): 
File \"...python2.7/site-packages/tastypie/resources.py\", line 202, in wrapper
    response = callback(request, *args, **kwargs) 
File \"...python2.7/site-packages/tastypie/resources.py\", line 441, in dispatch_list
    return self.dispatch('list', request, **kwargs)
File \"...python2.7/site-packages/tastypie/resources.py\", line 474, in dispatch
    response = method(request, **kwargs)
File \".../python2.7/site-packages/tastypie/resources.py\", line 1135, in get_list       to_be_serialized[self._meta.collection_name] = [self.full_dehydrate(bundle) for bundle in bundles]
File \".../python2.7/site-packages/tastypie/resources.py\", line 739, in full_dehydrate
    bundle.data[field_name] = field_object.dehydrate(bundle)\  
File \".../python2.7/site-packages/tastypie/fields.py\", line 653, in dehydrate   
    return self.dehydrate_related(fk_bundle, self.fk_resource) 
File \".../python2.7/site-packages/tastypie/fields.py\", line 520, in dehydrate_related
    return related_resource.full_dehydrate(bundle) 
File \".../python2.7/site-packages/tastypie/resources.py\", line 739, in full_dehydrate
    bundle.data[field_name] = field_object.dehydrate(bundle)  
File \".../python2.7/site-packages/tastypie/fields.py\", line 121, in dehydrate    
    return self.convert(current_object)  
File \".../lib/python2.7/site-packages/tastypie/fields.py\", line 220, in convert    
    return int(value)\n\nValueError: invalid literal for int() with base 10: ''\n"} 
```

我在这里迷路了。我不知道该怎么办。我已经通过代码跟踪了呼叫，但我不知道如何解决它。如果有人知道如何面对这个问题，或者用 m2m 相关关系实现 GET 调用的正确方法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:48:03.030

尝试使用：

```
category =  fields.ToManyField(CatPromosResource, 'category', null=True) 
```

反而：

```
category =  fields.ForeignKey(CatPromosResource, 'category', full=True, null=True) 
```

此外，这可以帮助您：

[http://eugene-yeo.me/2012/12/4/django-tastypie-manytomany-through-part-2/](http://eugene-yeo.me/2012/12/4/django-tastypie-manytomany-through-part-2/)

# ruby - 如果method_one返回值返回值，否则在ruby中尝试method_two

> ID：13006282
> 
> 赞同：0
> 
> 时间：2012-10-22T06:53:53.787
> 
> 标签：ruby

我怎么说如果`method_one`返回一个值，然后中断，否则尝试`method_two`？

```
def ai_second_move(board)
  p "2nd move called"
  # TODO - how to say if method_one gives me a value, break, else method_two
  method_one(board)
  method_two(board) 
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T07:03:30.187

大多数 Ruby 的写法是：

```
method_one(board) || method_two(board) 
```

`||`Ruby仅在左侧评估为 false（意味着它返回`nil`or ）时才执行右侧`false`，然后此表达式的结果将是`method_two`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:59:28.097

你需要使用`return`. `break`是for循环。

```
def ai_second_move(board)
  p "2nd move called"
  return if !!method_one(board)

  method_two(board) 
end 
```

另一种有趣的方式是

```
def ai_second_move(board)
  p "2nd move called"
  !!method_one(board) || method_two(board) 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:00:08.877

使用如果 -

```
method_two(board) if method_one(board).nil? 
```

使用除非 -

```
method_two(board) unless !method_one(board).nil? 
```

使用三元 -

```
# This evaluates if (method_one(board) returns nil) condition. If its true then next statement is method_two(board) else return is executed next.
method_one(board).nil? ? method_two(board) : return 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:17:23.617

这也可以：

```
method_one(board) and return 
```

`return`仅当`method_one(board)`返回真值时才执行该语句。

# tfsbuild - 在 TFS 构建代理上引用第 3 方库和标头

> ID：13006286
> 
> 赞同：2
> 
> 时间：2012-10-22T06:54:20.490
> 
> 标签：tfsbuild

到目前为止，我们的团队一直在使用 VSS，我们正处于迁移到 TFS2010 和 VS2010 的过程中。我们的大部分代码是 C++，我们使用了很多 3rd 方库，例如 Boost、OpenCV、OpenSSL 等。根据我阅读的最佳实践，我正在考虑在我们的多个解决方案和项目中处理 3rd 方标头和库的一些选项。

1.  我为所有 3rd 方库创建了一个独立的 TFS 项目，并在每个库和每个版本中存储源/包含/输出。例如：

    ```
    Dependencies\
      -> Boost\
             ->boost_ver1\*
             ->boost_ver2\*
      -> OpenSSL\
             ->openssl-ver1\*
             ->openssl-ver2\** 
    ```

2.  我的 TFS 源代码树如下所示：

    ```
    $\
        -> Dependencies\
        -> TeamProject1\
        -> TeamProject2\
        -> TeamProject3\ 
    ```

3.  我们的 TeamProject(s) 可能包含文件夹树中不同级别的多个解决方案。

4.  我为`dependencies.props`每个团队项目准备一个文件，给定团队项目的所有项目都导入到该文件中。该 .props 文件将相关的 3rd 方包添加到`$(IncludePath)`和`$(LibraryPath)`. 为了做到这一点，我假设 Dependencies 项目被映射到由每个用户每台机器的全局环境变量定义的文件夹。

我对这种方法有几个问题：

1.  我不知道如何使它在构建代理上工作，因为我无法在构建定义的工作区映射选项卡中指定环境变量。我了解每次构建都会更改 BuildDirectory var 和 SourceDir var。

2.  如何确保在开始构建任何 TeamProject 解决方案之前获得最新的相关第三方依赖项。

3.  这是一个“好”的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T18:43:35.020

1：如果您希望您的构建确定构建定义本身所需的一组依赖项，您可以使用 msbuild 参数或 powershell 参数将参数传递给您的流程模板。只要通用依赖项和该文件包含在您的工作区中，您还可以让您的逻辑从您的 props 文件中提取信息。

2：只要包含依赖项的源代码控制路径映射到构建定义中，它就会在构建您的解决方案之前从源代码控制同步最新版本，并在构建解决方案之前拥有它们。

3：不是特别适合你的情况。我建议不要使用通用依赖项区域，因为如果您执行门控构建之类的操作，您将在门控签入窗口中弹出所有 3 个构建。此外，对一种解决方案的更改可能会无意中影响所有三种解决方案。您是否考虑过使用nuget？这可能是使您的 3 个解决方案分开并且还具有可供部分或全部使用的依赖项的最佳实践。例如，大多数编码工作的最常见依赖项都有可下载的 nuget 包，这些包将在构建期间下载，甚至无需签入。

# javascript - gmaps4rails 可以返回类似图像的地图吗？

> ID：13006287
> 
> 赞同：0
> 
> 时间：2012-10-22T06:54:21.823
> 
> 标签：javascript, css, ruby-on-rails, coffeescript, gmaps4rails

我目前正在使用 gmaps4ails 并返回了交互式地图。有没有办法获得更静态的图像？

我尝试修改以下代码，但由于某种原因在手机上捏和缩放不起作用

```
if MODETECT.device.phone
      @map_options =
        disableDefaultUI:       true #false has the street view capability
        disableDoubleClickZoom: false
        type:                   "ROADMAP" # HYBRID, ROADMAP, SATELLITE, TERRAIN
        draggable:              false # don't allow to drag map
        scrollwheel:            true
        zoomControl:            true

    else
      @map_options =
        disableDefaultUI:       true #false has the street view capability
        disableDoubleClickZoom: false
        type:                   "ROADMAP" # HYBRID, ROADMAP, SATELLITE, TERRAIN
        draggable:              true # don't allow to drag map
        scrollwheel:            false #can't use the scroll whell to zoom
        zoomControl:            true #widget that allows control zoom without pinch 
```

...

```
createMap : ->
    defaultOptions =
      maxZoom:                @map_options.maxZoom
      minZoom:                @map_options.minZoom
      zoom:                   @map_options.zoom
      center:                 @createLatLng(@map_options.center_latitude, @map_options.center_longitude)
      mapTypeId:              google.maps.MapTypeId[@map_options.type]
      mapTypeControl:         @map_options.mapTypeControl
      disableDefaultUI:       @map_options.disableDefaultUI
      disableDoubleClickZoom: @map_options.disableDoubleClickZoom
      draggable:              @map_options.draggable
      scrollwheel:            @map_options.scrollwheel
      zoomControl:            @map_options.zoomControl 
```

它似乎在可拖动的意义上起作用，但手机上的滚轮和 zoomControl 不起作用。

# java - JPA - 从数据库表中检索数据 wrt 外键 -

> ID：13006291
> 
> 赞同：0
> 
> 时间：2012-10-22T06:54:35.850
> 
> 标签：java, database, list, jpa

我正在尝试从具有外键“reg_no”的表中检索数据。而且外键不是唯一的，可以重复。

现在我想使用这个外键从这个表中检索数据。我将提供一个“reg_no”，Java Persistence API 将从表 wrt 检索结果集列表到提供的“reg_no”。

请赐教我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:02:25.697

```
EntityManager entityManager = entityManagerFactory.createEntityManager();
List results = em.createQuery("SELECT c FROM Vehicle v WHERE reg_no = :reg_no").setParameter("reg_no", new String("0000")).getResultList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:59:44.277

您可以使用 JPQL 执行以下操作：

```
String queryString = "SELECT t FROM YourTable t " +
                     "WHERE reg_no = :regNo";
Query query = getEntityManager().createQuery(queryString); 
query.setParameter("regNo", regNoValue);
return query.getResultList(); 
```

# javascript - 选择选项后触发“点击”？

> ID：13006293
> 
> 赞同：1
> 
> 时间：2012-10-22T06:54:38.347
> 
> 标签：javascript, jquery

我有通过 ajax 加载地址的选择框。所以用户可以选择以前保存的地址。在地址表格中，另一个列出“州”的选择框。运费是根据“州”选择框的变化计算的。

我想在加载地址后触发更改。我用了这段代码

```
$('select#addressed').change(function() {      
  $('select#states').trigger('change');
}); 
```

但这会在新地址加载之前触发更改。加载地址后有什么方法可以触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:01:33.073

`success`触发Ajax 调用部分中的更改。这样在数据返回之前它不会触发。您也可以使用 $.when/.done 。

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:01:02.730

您可以通过将“点击”触发器放在完整功能中来解决此问题。我从您的语法和标签中假设您正在使用 jQuery。在“完成”下查看[此链接。](http://api.jquery.com/jQuery.ajax/)

# c - 如何写一个字节来注册特定的内存地址？

> ID：13006296
> 
> 赞同：2
> 
> 时间：2012-10-22T06:54:45.487
> 
> 标签：c, memory, byte, cpu-registers, memory-address

我想写一个字节来注册特定的内存地址（0x1228A432）

但是，该寄存器具有以下结构：

```
 Bits  |   Access   |   Name   | Reset  | Description |
[31:8] | Read only  | -------- | ------ |  Reserved   |
[7:0]  | Read-write | REG[7:0] | 0xXX   | ----------- | 
```

请告诉我，如何在不“触及”保留位的情况下向该寄存器写入一个字节？

EDIT1：我的目标是 Cortex A9。我可以使用 256 位值（例如 0xFF）成功读取/写入板载 DDR2 内存

EDIT2：我曾经通过以下方式使用 DDR2 内存：

```
// First stage
static unsigned char *p = 0;
char * argv1="0x60000000";
unsigned long address=strtoul(argv1, 0, 0);
p = (unsigned char *) argv1;

// Second stage
char * argv4="FF";
int value=strtol(argv4,0,16);

// Third stage
int offset = 9;
p[offset]=value; 
```

EDIT3：我发现了以下信息：

所有寄存器均为 32 位宽，不支持字节写入。写操作必须是字宽的，并且必须使用 read-modify-write 保留标记为保留的位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:41:19.417

在汇编指令手册中查找 8 位写入指令（不确定是否存在）。如果是这样，请使用 uint8_t 分配给该内存位置 ( `uint8_t volatile * const reg = (uint8_t volatile * const) 0x1228a432;`)。

否则按照 Omkant 所说的去做。覆盖具有相同数字的位不应产生任何不需要的结果，因为它们在被覆盖之前没有“归零”。

他的 C 代码（这是为了更好的可读性的详细版本）：

```
uint8_t your_8_bit_value = 0x42;
uint32_t volatile * const mem_map_register = (uint32_t volatile *) 0x1228a432;
*mem_map_register = (*mem_map_register & 0xFFFFFF00) | your_8_bit_value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:17:21.530

假设 32 位宽访问，保留位 [31:8] 的一种方法是读取值，将位 [7:0] 清零，按位或使用所需的值，然后将其写回寄存器.

类似的东西（从 RedX 窃取一点；））：

```
uint8_t your_8_bit_value = 0x42;
uint32_t volatile * const mem_map_register = (uint32_t volatile *) 0x1228a432;
*mem_map_register = (*mem_map_register & 0xFFFFFF00) | your_8_bit_value; 
```

然而，我认为应该有更多关于您的硬件的信息。我看过几个数据表说，例如，您必须将所有 1 写入保留位（这意味着保留位保留以供将来使用，而 1 是安全默认值）等。因此，保留保留位并不总是很明显不受影响是正确的做法。

您应该找到有关您的硬件的更多详细信息 - 是否支持字节范围的写入，是否可能忽略对保留位的写入，或者应该全部为 0/1，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:22:51.073

```
[register value] = ([register value] | [00 00 00 FF]) & [FF FF FF XX] 
```

在这里，xx 是从给定地址读取的一个字节，然后设置 24 位掩码。并对上面显示的值执行按位 & 我认为这应该有效

# touch - jqplot 工具提示在触摸时显示，而不是 jqplotDataHighlight 或 higlightMouseOver 或 highlightMouseDown

> ID：13006298
> 
> 赞同：2
> 
> 时间：2012-10-22T06:54:54.247
> 
> 标签：touch, tooltip, highlight, jqplot, touchstart

我正在使用 jqplotDataHighlight 选项在 MouseOver 上的图表上显示工具提示。

```
$("#"+sTargetId).bind('jqplotcustomDataHighlight', 
                       function (ev, seriesIndex, pointIndex, data) {    
                         var chart_left = $("#"+sTargetId).offset().left,
                         chart_right = ($(window).width() - ($("#"+sTargetId).offset().left + $("#"+sTargetId).outerWidth())),
                         chart_top = $("#"+sTargetId).offset().top,
                           x = oPlot.axes.xaxis.u2p(data[0]),  // convert x axis units to pixels
                           y = oPlot.axes.yaxis.u2p(data[1]);;
                           var tooltipData = data[1]*scale;
                          $('#tooltip').css({left:chart_left+x, top:chart_top+y, marginRight:chart_right});
                          $('#tooltip').html('<span style="font-family: Arial;font-size:'+sTooltip+';font:bold;color:#000000;">' +sXDisplay+': '+ tooltipData + '</span>');
                         $('#tooltip').show();
                       });

            $("#"+sTargetId).bind('jqplotcustomDataUnhighlight', 
                     function (ev, seriesIndex, pointIndex, data) {
                         $('#tooltip').empty();
                         $('#tooltip').hide();
                     }); 
```

它工作正常。在 iPad 上，我希望在某些触摸事件上显示工具提示。我该如何实现它？

```
 // prop: highlightMouseOver
        // True to highlight slice when moused over.
        // This must be false to enable highlightMouseDown to highlight when clicking on a slice.
this.highlightMouseOver = true;
        // prop: highlightMouseDown
        // True to highlight when a mouse button is pressed over a slice.
        // This will be disabled if highlightMouseOver is true.
this.highlightMouseDown = false; 
```

我观察到只有上述两个选项可用。如何在 touchstart 上实现它？在双击或任何其他事件上显示工具提示也会有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:46:06.673

也许你已经想通了。这对我有用。我正在使用`jquerymobile`，在[jquery.jqplot.js 版本 0.9.7r635](https://bitbucket.org/cleonello/jqplot/downloads/jquery.jqplot.0.9.7r635.zip)行号：2290 更改`mousemove`为`vmousemove`. 如果您正在使用`cursor: {followMouse: true}`，那么事情应该开箱即用，我的工具提示有一个固定位置，但是在 mousemove 上，顶部和左侧的值没有被应用，所以我硬编码顶部和左侧，以便工具提示 div`.jqplot-cursor-tooltip`出现在与点击时相同的位置。虽然它不是一个很好的解决方案，但到目前为止我还没有看到奇怪的行为。希望这可以帮助 ！

# multithreading - J2ME 线程编程

> ID：13006300
> 
> 赞同：1
> 
> 时间：2012-10-22T06:55:13.733
> 
> 标签：multithreading, java-me, midp, lcdui

我正在创建一个与服务器上的数据库交互的 j2me 应用程序。因此我启动了一个线程来连接到服务器。我在一个单独的类中处理我的所有命令操作，该类实现`CommandListener`.

当我尝试获取服务器返回的响应时，我得到一个空字符串。我曾尝试等待连接到服务器的线程返回，但这会使应用程序无响应。

下面是我正在使用的代码。

```
//my network worker class.
public class NetworkConnector implements Runnable {
    //constructor
    public NetworkConnector(String url){
       //url =>server url to connect to.
       Thread thread = new Thread(this);
       thread.start();
    }

    private String serverReply="";
    private String url="

    //method to connect to the server and return the 
    //response from the server.
    public String sendData(String serverUrl) {

      //open streams to connect to the Server.
      httpConn = (HttpConnection)  
      Connector.open(serverUrl,Connector.READ_WRITE, true);
      httpConn.setRequestMethod(HttpConnection.GET);

      inStream = httpConn.openInputStream();
      int read;
      while ((read = inStream.read()) != -1) {
        sb.append((char) read);
      }

      return sb.toString();
   }

   public String getServerReply() {
     //serverReply is a class variable.
     return serverReply;
   }

   public void run(){
      //call the send method that connects to the server.
       serverResponse = sendData(Url);
   }

} //end of connector class.

// this class is where all my Command Actions are
//implemented. 
public class CommandActionController implements
CommandListener, DataReceiver {

public void commandAction(Command cmd, Displayable d) {
   //networkMgr => is the worker class that makes
   //connection to the server.
   networkMgr = new NetworkConnector("http://localhost
   /JsonPhp/login.php?uname=" + loginUserInfo.userName +
   "&passwd=" + loginUserInfo.password);

   //here am getting the response from the server.
   String serverResponse = networkMgr.getServerReply();

   //at this point the ServerReponse String is Empty =>
   //yet the server is supposed to return some String.
   System.out.println("xxxxxxxxxxxxxxxxxx
   ServerResponse =" + serverResponse);
   }

   }//end of CommandListener class. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:53:34.663

你对`serverResponse`价值的期望是错误的；当您尝试`commandAction`使用问题中的代码片段获取它时，它可能是空的。

为了获得非空值，您需要重新设计方法`NetworkConnector.getServerReply()`以使其正确等待线程完成并确实获得服务器响应。

但是，如果您这样做，您还必须重新设计`CommandActionController`以保持用户界面响应 - 您的*“等待连接到服务器的线程”*的测试表明了这一点。

重新设计的代码应该只是启动服务器连接线程并`commandAction`尽快退出（可能更改为一些“等待屏幕”让用户看到发生了什么）。只有在获得服务器响应后才能触发下一次屏幕更新。

考虑学习专门针对解释如何正确设计此类应用程序的教程 -[网络、用户体验和线程](http://www.oracle.com/technetwork/systems/threading-155506.html)：

> 本文解释了 MIDlet 如何在不影响用户界面的情况下建立网络连接。它包括六个迭代示例，说明多线程网络和等待屏幕的使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:58:22.617

如果没有 java.util.concurrent，我会这样做：

```
Result handleRequest(){
    final String url = // get url
    Work work = new Work(url):
    Thread t = new Thread(work);
    t.start();
    // do other stuff
    if(t.isAlive()){
        // still running
    }
    // this waits until the work is done
    // and it will be safe to access work.result after
    // this call has returned.
    t.join(); 
    return work.result;
} 
```

进而

```
class Work implements Runnable{
    final String url;
    Result result;
    public void run(){
        this.result = // do your network stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T10:50:39.413

您不应该在构造函数中启动线程。此外，runnable 旨在传递给线程。最简单（也是“正确”）的方法如下：

1.  实施 a`Callable`而不是 a `Runnable`。
2.  使用 a`ExecutorService`而不是 a`Thread`
3.  使用`Future`对象进行异步处理/响应用户

这是一个简单的例子。

```
class Stuff {
    final ExecutorService exec = 
                 Executors.newCachedExecutorService(// please see doc);
    Result process(String url){
        Future<Result> future = exec.submit(new Work(url));
        // do some other stuff
        if(future.isDone()){
            // return result?
        }
        return future.get(); // this call will wait until result is available
    }
} 
```

进而

```
class Work implements Callable<Result> {
    final String url;
    Result call() throws Exception {
        // do your network stuff here
        return result;
    }
} 
```

`java.util.concurrent.ExecutorService.submit()`有关详细信息，请参阅`java.util.concurrent.Future`和的文档`java.util.concurrent.Callable`。

# sql-server-2005 - SQL Server Management Studio 以静默方式终止

> ID：13006301
> 
> 赞同：3
> 
> 时间：2012-10-22T06:55:15.230
> 
> 标签：sql-server-2005, ssms

我面临的问题是，当消息面板中的文本太大（例如几百万行）时，SQL Server Management Studio 显然会静默终止。

有解决方案吗？

我们也可以在存储过程执行时清除此消息面板吗？我正在使用 print 语句来查看执行状态。仅供参考，我有 3+ 百万行的数据要处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:51:07.480

客户端工具在显示行数时超出内存使用量时崩溃。我只是用

“设置编号”

“设置NOCOUNT OFF”

我在以下帖子中找到了解决方案：

[如何停止 SQLServer 编写无关的东西，例如（1 行受影响）](https://stackoverflow.com/questions/1377067/how-to-stop-sqlserver-writing-extraneous-stuff-eg-1-rows-affected)

# java - 如何使用 Java 在 WebDriver 中获取按钮的标题/文本

> ID：13006311
> 
> 赞同：0
> 
> 时间：2012-10-22T06:56:02.873
> 
> 标签：java, selenium-webdriver, caption

我有“保存”按钮的以下 HTML 代码：

```
<input type="submit" onclick="return confirm('Sure to change global settings?')" value="Save" name="submit"> 
```

我想检索按钮的标题。我使用以下代码来做到这一点：

```
String actualButtonCaption = driver.findElement(By.xpath("//input[@value='Save']")).getText(); 
```

我还使用了绝对 xpath，如下所示：

```
String actualButtonCaption = driver.findElement(By.xpath("//html/body/form/div[3]/div[2]/input")).getText(); 
```

但不幸的是，没有检索到任何文本。找到空白/空文本。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T08:01:22.473

`getAttribute`方法可用于检索属性值。

在这种情况下，以下将返回标题：

`driver.findElement(By.XPath("//input[@name='submit']")).getAttribute("value");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:00:43.523

尝试将 an`ID`与输入相关联，然后按 ID 查找元素。如果出现文本，则说明xpath有问题，您可以使用Firefox的插件分析确切的运行时间xpath。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T08:45:12.540

这应该工作 -

```
String actualButtonCaption = driver.findElement(By.name("Submit")).getAttribute("value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:41:27.110

我已经通过使用 JavaScript 得到了解决方案。代码如下：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor) driver;
String ss = (String)jse.executeScript("var x=document.getElementsByName('submit')[0].value; return x");
System.out.println("Caption of Save button: " + ss); 
```

它工作正常。按钮的标题打印为“保存”

# jquery - jquery隐藏和显示按钮

> ID：13006313
> 
> 赞同：0
> 
> 时间：2012-10-22T06:56:09.173
> 
> 标签：jquery, html

我在循环中有选择和输入按钮控件。最初输入按钮是用css属性隐藏的 display:none; 我想在jQuery的帮助下选择“选择值”更改时显示输入按钮。只有相应的输入应该是可见的，而不是全部。请帮帮我

```
<td>                              
    <select id="isactive" class="select_<?php echo($i++);?>">
        <option  value="single" <?php if($currentStatus == "S") echo("selected=\"true\""); ?> >Single</option>
        <option value="double" <?php if($currentStatus == "D") echo("selected=\"true\""); ?>>Double</option>
        <option value="no" <?php if($currentStatus == "N") echo("selected=\"true\""); ?>>No</option>                          
    </select>
    <input type="button" class="updatebtn" id="updateoptinbtn_<?php echo($j++);?>" value="Update" />                                  
</td> 
```

jQuery

```
$(".select").change(function(){
    $("#updateoptinbtn").show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:11:37.250

尝试`.closest()`并`.find()`

```
$('select').on('change' , function(){
     $(this).closest('td').find('input[type="button"]').show();
                           //OR
    $(this).closest('td').find('.updatebtn').show();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:59:39.733

您的类和 id 是使用 php 动态创建的，`updateoptinbtn_<?php echo($j++);?>"`因此您使用的 css 选择器不是正确的选择器。请使用以下代码：

```
 $('select').change(function(){
     $(this).next('input[type="button"]').show();
 }) 
```

# android - 如何访问 Android 设备中的数据/数据文件夹？

> ID：13006315
> 
> 赞同：373
> 
> 时间：2012-10-22T06:56:26.757
> 
> 标签：android, android-emulator, android-sqlite, adb

我正在开发一个应用程序，我知道我的数据库`*.db`将出现在`data/data/com.****.***`

我可以在 sqlite manager 的帮助下从 Eclipse 中的 AVD 访问这个文件

但我无法在我的 Android 手机中访问此文件。
我用谷歌搜索它，它说我需要root我的手机才能做到这一点，但我不想这样做。

如何`data/data/.....`在我的 Android 手机中访问我的目录“**无需生根**”？

我可以在`data/data.....`不生根的情况下更改目录的用户权限吗？

* * *

## 回答 #1

> 赞同：430
> 
> 时间：2013-07-26T08:38:41.073

直接在手机上访问文件很困难，但您可以将它们复制到您的计算机上，在那里您可以做任何您想做的事情。如果不生根，您有两种选择：

1.  如果应用程序是可调试的，您可以`run-as`在 adb shell 中使用该命令

    ```
    adb shell
    run-as com.your.packagename 
    cp /data/data/com.your.packagename/ 
    ```

2.  或者，您可以使用 Android 的备份功能。

    ```
    adb backup -noapk com.your.packagename 
    ```

    现在将提示您“解锁您的设备并确认备份操作”。最好不要提供密码，否则读取数据变得更加困难。只需单击“备份我的数据”。您计算机上生成的“backup.ab”文件包含 android 备份格式的所有应用程序数据。基本上它是一个压缩的 tar 文件。[本页](http://nelenkov.blogspot.jp/2012/06/unpacking-android-backups.html)解释了如何使用 OpenSSL 的 zlib 命令解压缩它。您可以使用该 `adb restore backup.db`命令恢复备份。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2017-05-20T18:24:29.577

如果您使用的是 Android Studio 3.0 或更高版本，请按照以下步骤操作。

1.  单击**视图**>**工具窗口**>**设备文件资源管理器**。
2.  展开**/data/data/[package-name]**节点。

您只能扩展在非 root 设备上以调试模式运行的包。

[![Android Studio 3.0 中遵循的步骤](../Images/a6b216dd2ab08e7fdf7899a771ae3c10.png)](https://i.stack.imgur.com/OMdpq.jpg)

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-10-22T07:17:58.373

您也可以尝试使用根资源管理器应用程序获取数据库。如果这不起作用，那么你可以试试这个：

1.  打开命令
2.  更改您的目录并进入“平台工具”
3.  键入“ `adb shell`”
4.  `su`
5.  在设备上按“允许”
6.  `chmod 777 /data /data/data /data/data/com.application.package /data/data/com.application.package/*`
7.  在 Eclipse 中打开 DDMS 视图，然后从那里打开“FileExplorer”以获取您想要的文件

在此之后，您应该能够浏览根设备上的文件。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-10-22T07:03:47.160

要执行上述任何操作（即从手机本身访问受保护的文件夹），您仍然需要 root。（这包括更改 /data 文件夹的挂载权限并访问它）

如果没有 root，则无法通过代码**从**`/data`应用程序中直接访问以进行读取。因此，您可以尝试将该文件复制到 sdcard 或可访问的地方，然后，您应该能够正常访问它。

 **如果您拥有开发人员设备，则生根不会使您的保修失效。对不起，AFAIK 没有其他方法。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-09-11T10:44:43.360

1.  打开你的命令提示符
2.  将目录更改为 E:\Android\adt-bundle-windows-x86_64-20140702\adt-bundle-windows-x86_64-20140702\sdk\platform-tools
3.  输入以下命令
4.  `adb -d shell`
5.  `run-as com.your.packagename cat databases/database.db > /sdcard/database.db`
6.  将目录更改为`cd /sdcard`以确保`database.db`存在。
7.  `adb pull /sdcard/database.db`或者只是你可以从 device 复制 database.db 。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-08-07T15:07:34.017

`/data/data/package.name/databases/file`在无根的 Android 5.0+ 设备上从可调试的应用程序文件夹（比如说）中提取文件的最简单方法（只需一个简单步骤）是使用以下命令：

```
adb exec-out run-as package.name cat databases/file > file 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-10-22T07:05:21.233

在 Eclipse 中使用文件资源管理器。选择 Windows => 显示视图 => 其他 ... => 文件资源管理器。

另一种方法是通过 adb 拉取文件：

```
adb pull /system/data/data/<yourpackagename>/databases/<databasename> /sdcard 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-01-04T19:44:16.163

## 从 Android 备份到桌面

打开命令行 cmd 并运行： adb backup -f C:\Intel\xxx.ab -noapk **your.app.package**。不要输入密码，然后单击备份我的数据。确保不要保存在驱动器 C 根目录上。你可能会被拒绝。这就是我保存在 C:\Intel 上的原因。

## 提取 *.ab 文件

1.  去这里下载：[https ://sourceforge.net/projects/adbextractor/](https://sourceforge.net/projects/adbextractor/)
2.  提取下载的文件并导航到您提取的文件夹。
3.  使用您自己的文件名运行它：**java -jar abe.jar unpack c:\Intel\xxx.ab c:\Intel\xxx.tar**

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-07-11T13:02:56.777

可能是要访问这个文件夹你需要管理权限。

所以你有两个选择： -

1.  根您的设备，然后尝试访问此文件夹
2.  使用模拟器

ps：如果您使用以上两个选项中的任何一个，您可以按照以下步骤访问此文件夹

> 打开 DDMS 透视图 -> 您的设备 ->（从右侧窗口选项中选择文件资源管理器）选择包 -> 数据 -> 数据 -> 包名称 -> 文件

从那里你可以提取你的文件

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-08-10T06:11:10.873

您可以像这样下载一个文件：

`adb exec-out run-as debuggable.app.package.name cat files/file.mp4 > file.mp4`

在下载之前，您可能不想查看 App-Directory 中的文件结构。为此，请执行`THelper`上面提到的以下步骤：

```
adb shell
run-as com.your.packagename 
cd files
ls -als . 
```

提到的**Android-Studio**方式（ [https://stackoverflow.com/a/44089388/1256697](https://stackoverflow.com/a/44089388/1256697)）也有效。对于那些在菜单中看不到选项的人：请务必在 Android Studio 中打开 /android-Directory。例如，react-native 用户*在*他们的*项目文件夹*中与 /ios 目录处于同一级别。`Shahidul``DeviceFile Explorer`

 *** * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-08-23T18:30:00.047

我曾经也遇到过同样的问题。除了 adb shell 或 root 设备外，无法直接访问 android 设备中的文件。

旁边还有 02 个选项：

1)

```
 public void exportDatabse(String databaseName)
   {
     try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

        if (sd.canWrite()) {
            String currentDBPath = "//data//"+getPackageName()+"//databases//"+databaseName+"";
            String backupDBPath = "backupname.db";
            File currentDB = new File(data, currentDBPath);
            File backupDB = new File(sd, backupDBPath);

            if (currentDB.exists()) {
                FileChannel src = new FileInputStream(currentDB).getChannel();
                FileChannel dst = new FileOutputStream(backupDB).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();
            }
        }
    } catch (Exception e) {

    }
} 
```

2）试试这个：[https ://github.com/sanathp/DatabaseManager_For_Android](https://github.com/sanathp/DatabaseManager_For_Android)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-10-24T23:54:07.427

在有**根**设备上，正确的解决方案是：

```
Open cmd
Change your directory and go into 'Platform tools'
Type 'adb shell'
su
Press 'Allow' on device
chmod 777 /data /data/data /data/data/*
Open DDMS view in Eclipse/IntelliJ and from there open 'FileExplorer' to get your desired file 
```

原始解决方案有效，但 chmod 将返回未知目录。将 chmod 命令更改为 /data/data/* 可以从 Intellij 中的 DDMS 访问数据目录中的所有子文件夹。我假设 Eclipse DDMS 也有同样的解决方案。

**更新** 所以，我发现很奇怪。我在 IntelliJ（Android 设备监视器）中使用 DDMS 运行 Nexus 6。我已经构建了一个小的入门应用程序。所述应用程序将数据保存到 data/data/com.example.myapp/files 中的 .csv 文件

当我第一次开始尝试在我的 Nexus 6 上访问这个文件时，我发现我必须 root 设备.. 我可以看到数据文件夹，但尝试打开它是行不通的。正如其他地方在网上提到的那样，expand + 会消失，然后很快就会重新出现（注意，网上有一些解决方案声称允许在不生根的情况下访问这些文件夹，我直到为时已晚才找到它们，我不确定我是否不想root（（我宁愿能够手动完成，而不是依靠应用程序或命令提示符来给我我的解决方案）））。我植根了我的 6 并再次尝试了 DDMS。

此时，它向我显示了数据文件夹，我可以展开文件夹并查看 com. 目录，但我无法打开其中任何一个。那是我发现上述解决方案的时候。初始说明不适用于这部分：

```
chmod 777 /data /data/data /data/data/com.application.pacakage /data/data/com.application.pacakage/* 
```

那是我尝试发布的解决方案时：

```
chmod 777 /data /data/data /data/data/* 
```

该解决方案似乎有效，但仅适用于某些文件夹。我现在可以展开 myapp 文件夹，但无法展开其中的 files 目录。

在这一点上，我玩了一会儿，然后想为什么不在我需要的目录上尝试它而不是尝试这些通配符条目。

```
chmod 777 /data /data/data /data/data/com.example.myapp/* 
```

其次是：

```
chmod 777 /data /data/data /data/data/com.example.myapp/files 
```

这些命令允许我展开并查看我的应用程序目录中的文件，以确认 .csv 已正确保存。

希望这可以帮助某人。我为此挣扎了好几个小时！

（更进一步，奇怪的是，权限没有传递给传递给文件目录的.csv文件。我的文件目录权限读取drwxrwxrwx和我的log.csv文件权限读取-rw-rw--- - .. 仅供参考）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-06-05T23:54:54.917

`adb backup`对我不起作用，所以这就是我所做的（小米红米 Note 4X，Android 6.0）：
1\. 转到**设置 > 其他设置 > 备份和重置 > 本地备份**。
2\. 点击屏幕底部的“备份”。
3\. 取消选中“系统”和“应用程序”复选标记。
4\. 点击“应用程序”单元右侧的详细信息披露按钮以导航到应用程序选择屏幕。
5\. 选择所需的应用程序并点击确定。
6.备份完成后，实际文件需要以某种方式定位。我的可以在**/MIUI/backup/AllBackup/_FOLDER_NAMED_AFTER_BACKUP_CREATION_DATE_ 找到**。
7\. 然后我按照[RonTLV](https://stackoverflow.com/users/5646176/rontlv)[这个答案](https://stackoverflow.com/a/41472043/471673)的步骤将备份文件（在我的情况下为 .bak）实际转换为 tar（从原始答案复制）：
“
a）转到此处下载：[https](https://sourceforge.net/projects/adbextractor/)
://sourceforge.net/projects/adbextractor/ b）提取下载的文件并导航到您提取的文件夹
。c) 使用您自己的文件名运行它： java -jar abe.jar unpack c:\Intel\xxx.ab c:\Intel\xxx.tar
"

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-10-22T07:14:56.220

一种简单的方法是在 SD 卡上创建数据库。因为您无法访问手机内部存储器中的数据文件夹，除非您对手机进行 root。那么为什么不简单地在 SD 卡上创建您的数据库。

此外，如果您愿意，您可以编写一些文件复制代码来将现有的数据库文件（从内部存储器）复制到外部存储器，而无需任何根。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-07-11T08:36:06.010

您可以将此 db 文件复制到 eclipse explorer 中的某个位置（例如：sdcard 或 PC），您可以使用 sqlite 访问和更新此 db 文件。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-12T20:20:44.463

SQLlite 数据库存储在用户的手机上，它隐藏在路径下：

```
/Data/Data/com.companyname.AppName/File/ 
```

你有两个选择：

1.  你可以root你的手机，这样你就可以查看你隐藏的db3文件
2.  这不是解决方案，而是解决方法。为什么不使用“选择”语句创建显示数据库表的测试页面。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-12-18T20:51:56.057

您也可以尝试将文件复制到 SD 卡文件夹，这是一个公共文件夹，然后您可以将文件复制到您的 PC，您可以使用 sqlite 访问它。

以下是一些可用于将文件从 data/data 复制到公共存储文件夹的代码：

```
private void copyFile(final Context context) {
    try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

        if (sd.canWrite()) {
            String currentDBPath =
                    context.getDatabasePath(DATABASE_NAME).getAbsolutePath();

            String backupDBPath = "data.db";

            File currentDB = new File(currentDBPath);
            File backupDB = new File(sd, backupDBPath);

            if (currentDB.exists()) {
                FileChannel src = new FileInputStream(currentDB).getChannel();
                FileChannel dst = new FileOutputStream(backupDB).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

显现：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_INTERNAL_STORAGE" /> 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-03-16T05:39:34.363

问题是：如何在 Android 设备中访问数据数据文件夹？

* * *

如果 android-device 是 Bluestacks * Root Browser APK 显示 data/data/..

* * *

尝试从 [https://apkpure.com/root-browser/com.jrummy.root.browserfree下载根浏览器](https://apkpure.com/root-browser/com.jrummy.root.browserfree)

* * *

如果文件是文本文件，您需要点击“打开为”、“文本文件”、“打开为”、“RB 文本编辑器”****

# ios - handleInviteFromGameCenter 处理回合制游戏 (iOS6)

> ID：13006321
> 
> 赞同：2
> 
> 时间：2012-10-22T06:56:48.533
> 
> 标签：ios, ios6, game-center, invitation

标准的 handleInviteFromGameCenter 事件处理（当邀请 GC 应用程序中的某人进行回合制比赛时）在 iOS6 下表现得很奇怪：当我将 playerToInvite 数组提供给 GKMatchRequest 并打开 GC 回合制比赛控制器时，它显示“Waiting...”在那个受邀的玩家之下（恕我直言，它不应该用于回合制游戏）。它永远不会停止。当我手动添加另一个玩家并按“播放”时，它只是从我和那个新添加的玩家开始，忽略从 playerToInvite 数组传递的那个。关于这种行为的任何见解？

谢谢，习惯性

# java - JSF: p:dataTable with f:attribute 导致“参数类型不匹配”错误

> ID：13006322
> 
> 赞同：1
> 
> 时间：2012-10-22T06:56:57.350
> 
> 标签：java, jsf, jsf-2, primefaces

我想有条件地添加一些参数到[Conditionally render element's attribute in a composite component 中](https://stackoverflow.com/questions/12897202/conditionally-render-elements-attribute-in-a-composite-component)`p:dataTable`描述的类似。但即使没有我得到一个（[Pastebin 上](http://pastebin.com/SQxNAg6v)的 Stacktrace ）。`c:if``java.lang.IllegalArgumentException: argument type mismatch`

```
...
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
...

<p:dataTable var="r" value="#{myBean.values}" >
  <f:attribute name="paginator" value="true" />
</p:dataTable> 
```

如果我直接添加属性，则不会发生错误（并且分页器可用）`<p:dataTable ... paginator="true">`。我的环境是 Primefaces 3.4.1 和 JBoss 7.1.1-Final。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:36:48.920

尝试将其作为 EL 对象传递：

```
<f:attribute name="paginator" value="#{true}" /> 
```

# javascript - 如何通过 MVC portlet 中的 JavaScript 重定向到另一个 JSP 页面？

> ID：13006323
> 
> 赞同：1
> 
> 时间：2012-10-22T06:56:59.643
> 
> 标签：javascript, jsp, liferay, portlet, liferay-6

我试图打开我的表单，点击 HTML 表上的编辑按钮填写每个文本框，我的所有数据都存储在列表中，每一行都有编辑按钮。当我单击编辑时，它将从 restaurant.jsp 页面重定向到 edit_restaurant.jsp 页面。

我的 restuarant.jsp 页面有一个 HTML 表格列表，其中每一行都有编辑按钮，我希望单击该编辑按钮时，我将重定向到 edit_restaurant.jsp 页面，所有数据都可以用绑定的 id 键填充到我的编辑按钮。

我想要的是在另一个jsp按钮中获取按钮的ID。我正在使用liferay自定义mvc portlet，所以任何人都可以指导我如何使它成为可能。

这是我尝试过的代码片段。

以下是我的编辑按钮栏：

```
<td><input type="submit" id=<%=temprest.getPrimaryKey()s%> onclick="return getbuttonId('<%=temprest.getPrimaryKey() %>')" value="edit" /></td> 
```

...并单击该按钮将调用以下 Javascript：

```
 <script type="text/javascript">
 function getbuttonId(sid){                 

        // document.editform.action=url;
        // document.editform.submit();
        var url="<%= editURL.toString()%>";
        window.location.href = url+"?sid="+sid;

        return false ;
  }

  </script> 
```

我的 portlet 操作 url 如下：

```
<portlet:actionURL name="editRestaurant" var="editURL">

</portlet:actionURL> 
```

...我通过 portlet 操作 url 调用的方法在我的操作类中：

```
public void editRestaurant(ActionRequest reqeust,ActionResponse response) throws Exception
{
  String str=  reqeust.getParameter("sid");
  long l=Long.valueOf(str);

  //Retriev table data using Primary key

  restaurant rest=restaurantLocalServiceUtil.getrestaurant(l);

  //Set Attribute which has all values of specified pk.
  reqeust.setAttribute("edit",rest );

  // Redirect to Jsp page which has Update form. 
  response.setRenderParameter("jspPage","/jsps/edit_restaurant.jsp");

} 
```

单击编辑功能时出现这样的错误

```
 java.lang.NoSuchMethodException: emenu.advertise.portlet.RestaurantPortlet.editRestaurant?sid=5(javax.portlet.ActionRequest, javax.portlet.ActionResponse) 
```

有人可以指导我解决这个问题吗？

@

在这里我希望分配给我的按钮 id 的 sid 值应该在页面重定向之前转移到这个字符串值

```
<%      
 String restId=request.getParameter("sid");
//can i call sid value of javascript function getbuttonId() here
 %>
                             <portlet:actionURL name="editRestaurant" var="editURL">
      <portlet:param name="key" value="<%=restId %>"/>
       </portlet:actionURL> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:18:08.037

无论如何，使用以下代码解决了我的问题：

函数getbuttonId（sid）{

```
alert("Are You Sure You want to Edit");
// document.editform.action=url;
// document.editform.submit();
var textbox = document.getElementById('hiddenkey'); 

textbox.value=sid; 

document.editform.action = "<%=editURL.toString() %>";
document.editform.submit();

return false ; 
```

}

和 onclick 按钮我正在调用上面的 javascript 方法。所以效果很好。

实际上我想要的是被点击的特定按钮的 id，所以我将该 id 存储在隐藏键中，在 java 脚本中的表单提交操作之后，我重定向到我想要的页面，然后我可以从request.getattribute(hiddenkey 字段名)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:09:26.643

请阅读这个：

[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

查询不是必需的，window.location.replace(...) 将最好地模拟 HTTP 重定向。

它比使用 window.location.href = 更好，因为 replace() 不会将原始页面放入会话历史记录中，这意味着用户不会陷入无休止的后退按钮惨败中。如果要模拟某人单击链接，请使用 location.href。如果要模拟 HTTP 重定向，请使用 location.replace。

**例如：**

```
// similar behavior as an HTTP redirect
window.location.replace("http://stackoverflow.com");

// similar behavior as clicking on a link
window.location.href = "http://stackoverflow.com"; 
```

# java - 相机拍摄的图像不想在 ImageView 中显示

> ID：13006326
> 
> 赞同：1
> 
> 时间：2012-10-22T06:57:13.423
> 
> 标签：java, android, bitmap, android-camera, android-imageview

我有一个 ImageView，我希望能够从中加载图像：

1.  画廊 - 工作得很好

2.  相机 - 不加载任何东西

使用这两个不同动作的日志非常相似，除了相机动作显示到最后：

*   10-21 23:24:18.304: D/android.widget.GridLayout(4447): 水平约束: x6 - x0 > 720, x5 - x0 > 720, x5 - x4 < 20, x4 - x3 < 142, x3 - x2 < 70, x2 - x1 < 32, x1 - x0 < 138 不一致；永久移除：x5 - x4 < 20。
*   10-21 23:24:18.324: D/android.widget.GridLayout(4447): 垂直约束: y1 - y0 > 468, y2 - y1 > 30, y3 - y2 > 120, y3 - y0 > 1140, y4 - y3 > 612, y4 - y0 < 1140, y3 - y2 < 120, y2 - y1 < 30 不一致；永久删除：y4 - y0 < 1140, y3 - y2 < 120。

我有一种感觉，这是为什么图像没有显示的解释。该应用程序没有段错误或任何东西，从 UI 角度来看没有任何反应。

代码（由相机动作和画廊动作共享）是：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
if(resultCode == Activity.RESULT_OK) {
    Uri uri = data.getData();

    if ((requestCode == SELECT_PICTURE) || (requestCode == PICTURE_RESULT)) {
        Uri selectedImageUri = data.getData();
        selectedImagePath = getRealPathFromURI(selectedImageUri);
        mImageView = (ImageView) findViewById(R.id.imageView1);
        int x = mImageView.getWidth();
        int y = mImageView.getHeight();
        if (x == 0 || y == 0) {
            Display d = getWindowManager().getDefaultDisplay();
            x = d.getWidth();
            y = d.getHeight();
        }
        try {
            BitmapFactory.Options opts = new BitmapFactory.Options(); 
            opts.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(selectedImagePath, opts);
            // Calculate inSampleSize
            opts.inSampleSize = calculateInSampleSize(opts, x, y);                  
            // Decode bitmap with inSampleSize set
            opts.inJustDecodeBounds = false;
            mPicture = BitmapFactory.decodeFile(selectedImagePath, opts);
            mPicture.recycle(); //otherwise multiple calls segfault
            // create a matrix object
            Matrix matrix = new Matrix();
            matrix.postRotate(90); // clockwise by 90 degrees
            // create a new bitmap from the original using the matrix to transform the result
            Bitmap rotatedBitmap = Bitmap.createBitmap(mPicture, 0, 0, mPicture.getWidth(), mPicture.getHeight(), matrix, true);

            //set image view
            mImageView.setImageBitmap(rotatedBitmap);
        } catch (Exception e) {                 
            System.out.println("Bitmap could not be decoded." + e.getMessage());
        }
    } 
```

路径是正确的，位图不为空，一切看起来都很好，但没有显示图像。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:23:23.323

我认为错误在于文件创建

下面的代码对我有用

```
File photofile = new File(Environment
                    .getExternalStorageDirectory(),"sample"
                    + System.currentTimeMillis() + ".jpg");
            photFileUri = Uri.fromFile(photofile);
            photoPath = photofile.getAbsolutePath();
            Log.v("camera photo path is    ","          "+photoPath);
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, photFileUri);
            cameraIntent.putExtra("return-data", true);
            startActivityForResult(cameraIntent,1); 
```

在**OnActivityForResult()**方法中，您将获得路径

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
    case 1:
                //here u can use **photoPath** to display image
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:05:56.647

试试这个 ： -

```
 Handler handler = new Handler();
 handler.posDelayed(new Runnable){
  @Override
public void run() {
 //Your ImageView Code & setImageBitmap
}

  }, 20); 
```

# c - 砸栈example3.c混乱

> ID：13006327
> 
> 赞同：9
> 
> 时间：2012-10-22T06:25:27.593
> 
> 标签：c, stack-overflow, buffer-overflow, disassembly

文章可以在[这里](http://insecure.org/stf/smashstack.html)找到。

我正在阅读有关粉碎堆栈的内容，并发现自己被困在 example3.c 上。

```
0x80004a3 <main+19>:    call   0x8000470 <function>
0x80004a8 <main+24>:    addl   $0xc,%esp
0x80004ab <main+27>:    movl   $0x1,0xfffffffc(%ebp)
0x80004b2 <main+34>:    movl   0xfffffffc(%ebp),%eax 
```

作者表示我们要从`0x80004a8`到`0x80004b2`跳转，这个跳转是8个字节；作者如何确定这是 8 个字节？我重新创建了代码并将其发送过去`objdump`，发现它不是 8 个字节（我在 64 位机器上，但我确保使用 32 位进行编译）：

```
8048452:    e8 b5 ff ff ff          call   804840c <function>
8048457:    c7 44 24 1c 01 00 00    movl   $0x1,0x1c(%esp)
804845e:    00 
804845f:    8b 44 24 1c             mov    0x1c(%esp),%eax
8048463:    89 44 24 04             mov    %eax,0x4(%esp)
8048467:    c7 04 24 18 85 04 08    movl   $0x8048518,(%esp) 
```

作者还说“*我们怎么知道返回地址要加8？我们先用了一个测试值（比如1）* ”他在哪里使用这个测试值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:24:06.403

我不是这样解释这篇文章的。我理解它的方式是他想修改返回地址以便`x = 1;`跳过分配，即他想`function`返回到`printf`将执行的位置。

正如您在反汇编中看到的那样，分配是 8 个字节 ( `c7 44 24 1c 01 00 00 00`)，因此将返回地址向前移动 8 个字节会将其移过该指令。至于“我们首先使用了测试值”评论..也许他只是意味着他查看了反汇编程序中的代码以找出长度，或者他尝试了不同的偏移量（？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:59:11.057

文章中的位移是错误的，应该是`10`字节。当调用函数（或执行跳转）时，返回地址设置为等于指令指针 + 当前指令大小：

```
ret = IP + Curr_Inst_size 
```

所以当函数调用返回时，指令指针应该等于`0x80004a8`（`0x80004a3`+调用指令大小）：

```
 0x80004a3 <main+19>:    call   0x8000470 <function>
--> 0x80004a8 <main+24>:    addl   $0xc,%esp            
    0x80004ab <main+27>:    movl   $0x1,0xfffffffc(%ebp)
    0x80004b2 <main+34>:    movl   0xfffffffc(%ebp),%eax 
```

但是，您想将指令指针设置为`0x80004b2`，*以跳过赋值*，您也不可避免地必须跳过另一条指令`(addl $0xc,%esp)`才能到达那里，或者换句话说，您需要向`(0x80004b2-0x80004a8)`指令指针添加字节或 10 个字节跳过这两个指令：

```
 0x80004a3 <main+19>:    call   0x8000470 <function>
    0x80004a8 <main+24>:    addl   $0xc,%esp            
    0x80004ab <main+27>:    movl   $0x1,0xfffffffc(%ebp)
--> 0x80004b2 <main+34>:    movl   0xfffffffc(%ebp),%eax 
```

实际指令大小取决于操作数、机器类型等。但在此示例中，`addl`是 3 个字节长，而`movl`是 7 个字节长。您可以查看[x86 指令集参考](http://www.cs.cmu.edu/~410/doc/intel-isr.pdf)以了解确切的指令大小，或者您可以编译和反汇编此代码，您将看到这两条指令有 10 个字节长：

```
int main()
{
    asm("addl  $0xc,%esp\n\
         movl  $0x1,0xfffffffc(%ebp)");

} 
```

数据库：

```
0x08048397 <+3>: 83 c4 0c               add    $0xc,%esp
0x0804839a <+6>: c7 45 fc 01 00 00 00   movl   $0x1,-0x4(%ebp) 
```

[在示例 3 中，这里](http://seclists.org/basics/2005/Oct/87)和[这里](http://seclists.org/pen-test/2002/Jul/146)也有关于这个完全相同的问题的讨论。

# javascript - DJANGO HTML 模板：如何知道下拉列表中的选定项目并在 html 页面中显示而无需任何操作

> ID：13006337
> 
> 赞同：0
> 
> 时间：2012-10-22T06:57:48.547
> 
> 标签：javascript, html, django, django-templates

我想显示从下拉列表中选择的选定项目信息，相同的 html 页面没有任何操作。如何知道选择了哪个项目以及如何在 html 中的变量中分配该选定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:01:47.257

您可以使用 jQuery 的 onchange 事件处理程序来检测选择何时更改并获取值。[`.change()`](http://api.jquery.com/change/)api页面上有很好的例子。

# forms - 如何创建锂 - 形式 - >从控制器输出中选择

> ID：13006341
> 
> 赞同：0
> 
> 时间：2012-10-22T06:57:57.923
> 
> 标签：forms, mongodb, lithium

我想在我的 MongoDB 集合中为来自 MongoDB 的类型集合创建一个下拉列表：

部分具有类型和控制器代码以及视图代码。我想`form->select`从控制器的输出中创建一个。

```
 types
    {
      "_id": ObjectId("5082c6109d5d0c640c000000"),
      "name": "JACKET CLUSTER FRONT"
    }
    {
      "_id": ObjectId("5082c62b9d5d0c440c00006e"),
      "name": "JACKET CLUSTER FRONT"
    }
    {
      "_id": ObjectId("5082c62b9d5d0c440c00006f"),
      "name": "TITLE WITHOUT SYMBOL"
    }
    {
      "_id": ObjectId("5082c62b9d5d0c440c000070"),
      "name": "FRONTISPIECE"
    }
*/

// in my controller
// -----------
    $types = Types::all(array('order'=>'_id'));
    $vtype = array($types)
    return compact('vtypes');

// in my view
// ------------------
    echo $this->form->select('types',$vtypes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:48:35.977

`find('list')`返回一个键/值数组，可用于任何需要列表的用途，例如填充输入选择框。

```
$types = Types::find('list')

//returns
Array
(
[5082c6109d5d0c640c000000] => 'JACKET CLUSTER FRONT',
[5082c62b9d5d0c440c00006e] => 'JACKET CLUSTER FRONT',
[5082c62b9d5d0c440c00006f] => 'TITLE WITHOUT SYMBOL',
...
) 
```

此查找器查找您的模型，如果此字段可用，`$_meta['title']`则默认为该模型，如果您的架构正确，则该查找器应为您的情况`name``$_meta['key']``id``_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:22:35.623

最后，我用它来实现结果。

```
Types::meta('key', '_id');
Types::meta('title', 'filename');

$types = Types::find('list',array(
'fields'=>array('id','filename'),
'order'=>'id')); 
```

# makefile - gnu make 将包含路径放入 make 文件中

> ID：13006344
> 
> 赞同：3
> 
> 时间：2012-10-22T06:58:09.423
> 
> 标签：makefile, gnu-make

我的包含文件使用以下内容引用了许多其他 make 文件：

> `include Enablers/MSRP/Android.mk`

问题是引用所有其他 makefile 的 make 文件位于子文件夹的深处，或者换句话说，正确的路径类似于：

> `include ../../../../../Enablers/MSRP/Android.mk`

为了让我构建我的 makefile，我必须添加 ../../../../.. 来创建搜索路径：

> `ndk-build -I../../../../.. -j8 other params...`

（ndk-build 是 android buildsystem 上 gnu make 的封装，相当于 make build-local.mk 其他参数）

那么，我该怎么做才能避免添加`../../../../..`to make 搜索路径？我可以去makefile并更新所有makefile包含语句，但我正在寻找在我的makefile顶部添加额外包含路径的方法。就像是：

```
makeincludepaht += include Enablers/MSRP/Android.mk
include Enablers/MSRP/Android.mk
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:13:18.223

将新的包含路径附加到标准搜索路径：

```
.INCLUDE_DIRS += ../../.. 
```

[查看特殊变量部分的末尾的`.INCLUDE_DIRS`特殊变量。](http://www.gnu.org/software/make/manual/make.html#Special-Variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:17:20.683

我不熟悉 ndk-build，但我有类似的设置。我只是在 make 中设置了一个包含此路径的变量，然后在我的所有包含中使用该变量。
makefile： 您也可以在 include.mk 中为所有路径使用 INCLUDE_TOP。通常最好通过有条件地设置使其默认为某个值。 包括.mk：
`INCLUDE_TOP=../../../../..
include $(INCLUDE_TOP)/someDir/includes.mk`

`# will only set if not already set
INCLUDE_TOP ?= ./
HEADERS=$(INCLUDE_TOP)/headers`

# command-line - 在命令行 .bat 批处理中将 unix 升级到 Windows

> ID：13006350
> 
> 赞同：0
> 
> 时间：2012-10-22T06:58:46.770
> 
> 标签：command-line, batch-file, converter, eol

我正在尝试使用命令行（批处理文件）将文本文件 eol 从 windows xp 机器上的 unix 转换为 windows 格式。我怎么做？那命令是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:54:06.627

这个简单的脚本速度很快，效果很好，除了它将每个 TAB 字符转换为 8 个空格。可以使用 MORE /T 选项修改空格数，但无法保留 TAB 字符。将文件名（可选地与路径）作为唯一的参数传递。

```
@echo off
more %1 >%1.new
move /y %1.new %1 >nul 
```

所需要的只是读取和回显每一行。FOR /F 命令是完美的，除了它忽略空行。在这里，我使用 FINDSTR 为每一行添加行号前缀，后跟 a `:`，从而保留空行。然后我使用搜索和替换来删除号码前缀。我必须在循环中打开和关闭延迟扩展以保留`!`可能出现的任何内容。此脚本保留 TAB，但限制为每行约 8191 个字节。它也相对较慢。对于非常大的文件，它会变得非常慢。

```
@echo off
setlocal disableDelayedExpansion
>%1.new (
  for /f "delims=" %%A in ('findstr /n "^" %1') do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    echo(!ln:*:=!
    endlocal
  )
)
move /y %1.new %1 >nul 
```

最后，这是一个非常快的混合批处理/JScript 解决方案，并且没有我所知道的任何限制。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Batch portion ***********
@echo off
<%1 cscript //E:JScript //nologo "%~f0" >%1.new
move /y %1.new %1 >nul
exit /b

************* JScript portion **********/
while (!WScript.StdIn.AtEndOfStream) {
  WScript.Stdout.WriteLine(WScript.StdIn.ReadLine());
} 
```

# jquery - 从 HTML iFrame 或任何 HTML 页面从 HTML/jQuery 页面回调

> ID：13006353
> 
> 赞同：0
> 
> 时间：2012-10-22T06:58:55.150
> 
> 标签：jquery, html, iframe, callback

所以我有一个 HTML iFrame，它调用服务器上的一个页面，它是 HTML/jQuery，服务器上的这个页面运行大约 30 秒。服务器上的页面中有一些计时器是用 jQuery 编写的。计时器完成后，我需要通知客户端代码，这是一个 iFrame（如果需要，可以更改），也可以将一些数据传回。这可以做到吗？如果是，如何？

我的HTML代码如下

```
<iframe id="ifrm" name="ifrm" src="http://somefile.html" scrolling="no" width="100%" height="20%"         align="bottom" frameborder="0" 
    style="position:absolute;Left:15;bottom:-10"> 
```

somefile.html 有一个 jQuery 脚本文件 code.js，它是页面加载时的一些计时器代码

```
$(document).ready(function () {
  registerImpression();
  setTimeout(
   function(){
        Animate2id('#c2','easeOutQuint');
   },
   10000
); 
```

在这 10 秒超时完成后，我想回调调用 iframe（也许我需要在这里使用某种 js 来监听调用），然后在 10 秒后执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:12:36.983

如果页面与您的域不同，则您无法访问 iframe 页面

# c# - 将日期作为外语时，sql中的日期时间插入显示错误

> ID：13006355
> 
> 赞同：0
> 
> 时间：2012-10-22T06:59:03.087
> 
> 标签：c#, sql-server, vb.net, datepicker

我制作了一个小型应用程序，用于保存学生数据。我把它安装在我的电脑上，它工作得很好。

我把它给了我的一个朋友在他的系统上安装它，但是他的窗口是德语的，他完美地安装了软件，但是当他试图存储数据时，他得到了日期字段的错误。

他在电话里向我解释说这是一个语言错误，因为当我将数据存储在我的电脑上时，日期时间是这样的：

![在此处输入图像描述](../Images/e496882ee7e5015155dfe93aea863854.png)

现在，当他在他的计算机上安装我的应用程序时，该`Date of birth`字段是德语，因此在 mssql 插入查询时出现错误。

我的问题是如何强制应用程序仅使用英语的日期时间作为系统时间而不是客户端语言的日期时间？

我正在使用 sqlServerCe

**编辑**

```
QueryGrid("INSERT INTO students (p_num, p_name, p_fname, p_dob, p_street, p_zip, p_phone, p_email, p_sex, p_comment, p_fax, p_pic, p_regdate, p_idc) VALUES('" + p_num.Text + "', '" + p_name.Text + "', '" + p_fname.Text + "', '" + p_dob.Value + "', '" + p_street.Text + "', '" + p_zip.Text + "', '" + p_pno.Text + "', '" + p_email.Text + "', '" + gender + "', '" + comment_box.Text + "', '" + p_fno.Text + "', '" + p_num.Text + "', '" + DateTime.Now + "', '" + p_idc.Text + "')")
MessageBox.Show("Student successfully added in database.") 
```

现在在上面的代码`p_dob.Value`中是我的日期值。当我在我的电脑上使用它时，它会将上面的内容转换`Monday, October 22, 2012`为`10/22/2012 11:31 AM`并保存到数据库中，现在在我的朋友系统上它是德语，所以它无法转换和保存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:15:50.557

正如我在我的评论中所说，您永远不应该编写连接字符串的查询：使用带参数的查询。例子：

```
string query = "INSERT INTO mytable (p_num, p_date) SELECT @num,@dt";
using (SqlConnection conn = new SqlConnection("....."))
{
    conn.Open();
    using (SqlCommand cmd = new SqlCommand(query, conn))
    {
        cmd.Parameters.AddWithValue("num", 1);
        cmd.Parameters.AddWithValue("dt", DateTime.Today);

        cmd.ExecuteNonQuery();
    }
    conn.Close();
} 
```

当然这只是代码的一部分，但应该给你一个想法。
连接字符串会给你带来很多麻烦，不仅是日期，还有双打。

一般来说：使用参数编写查询以避免本地化（和其他）问题。

# performance - 省略帧指针真的对性能有正面影响，对调试能力有负面影响吗？

> ID：13006371
> 
> 赞同：30
> 
> 时间：2012-10-22T07:00:08.053
> 
> 标签：performance, visual-studio-2010, visual-c++, x86, stack-frame

正如很久以前所建议的那样，我总是在没有帧指针的情况下构建我的发布可执行文件（如果使用 /Ox 编译，这是默认设置）。

但是，现在我在论文[http://research.microsoft.com/apps/pubs/default.aspx?id=81176](http://research.microsoft.com/apps/pubs/default.aspx?id=81176)中读到，帧指针对性能没有太大影响。因此，完全优化它（使用 /Ox）或使用帧指针完全优化它（使用 /Ox /Oy-）对性能并没有真正的影响。

微软似乎表示添加帧指针 (/Oy-) 会使调试更容易，但真的是这样吗？

我做了一些实验并注意到：

*   在一个简单的 32 位测试可执行文件（使用 /Ox /Ob0 编译）中，省略帧指针确实提高了性能（大约 10%）。但是这个测试可执行文件只执行一些函数调用，没有别的。
*   在我自己的应用程序中，添加/删除帧指针似乎没有很大的影响。添加帧指针似乎可以使应用程序快 5%，但这可能在误差范围内。

关于帧指针的一般建议是什么？

*   是否应该在发布可执行文件中省略它们（/Ox），因为它们确实对性能有积极影响？
*   是否应该在发布可执行文件中添加（/Ox /Oy-），因为它们提高了调试能力（使用故障转储文件进行调试时）？

使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-22T08:06:19.073

**简短回答：**通过省略帧指针，

您需要使用堆栈指针来访问局部变量和参数。编译器不介意，但是如果您使用汇编进行编码，这会使您的生活变得更加艰难。如果你不使用宏，那就更难了。

每个函数调用可以节省四个字节（32 位架构）的堆栈空间。除非您使用深度递归，否则这不是胜利。

您将内存写入保存到缓存内存（堆栈），并且（理论上）在函数进入/退出时节省了一些时钟滴答，但您可以增加代码大小。除非您的函数很少经常执行（在这种情况下应该内联），否则这不应该引起注意。

您释放了一个通用寄存器。如果编译器可以使用该寄存器，它将生成更小且可能更快的代码。但是，如果大部分 CPU 时间都花在与主内存（甚至硬盘驱动器）进行通信上，那么省略帧指针并不能让您摆脱困境。

调试器将失去生成堆栈跟踪的简单方法。调试器可能仍然能够从不同的源（例如[PDB 文件](http://en.wikipedia.org/wiki/Program_database)）生成堆栈跟踪。

* * *

**长答案：**

典型的函数入口和出口是：

```
PUSH SP   ;push the frame pointer
MOV FP,SP ;store the stack pointer in the frame pointer
SUB SP,xx ;allocate space for local variables et al.
...
LEAVE     ;restore the stack pointer and pop the old frame pointer
RET       ;return from the function 
```

没有堆栈指针的进入和退出可能如下所示：

```
SUB SP,xx ;allocate space for local variables et al.
...
ADD SP,xx ;de-allocate space for local variables et al.
RET       ;return from the function. 
```

您将保存两条指令，但您也复制了一个文字值，因此代码不会变短（恰恰相反），但您可能已经保存了几个时钟周期（或者没有，如果它导致指令缓存中的缓存未命中） . 不过，您确实在堆栈上节省了一些空间。

* * *

您确实释放了一个通用寄存器。这只有好处。

在 regcall/fastcall 中，这是一个额外的寄存器，您可以在其中存储函数的参数。因此，如果您的函数需要七个（在 x86 上；在大多数其他架构上更多）或更多参数（包括`this`），则第七个参数仍然适合寄存器。更重要的是，同样适用于局部变量。数组和大对象不适合寄存器（但指向它们的指针），但如果您的函数使用七个不同的局部变量（包括计算复杂表达式所需的临时变量），编译器可能会生成更小的代码. 更小的代码意味着更低的指令缓存占用空间，这意味着更低的未命中率，因此内存访问更少（但[英特尔凌动有 32K 指令缓存](http://www.cpu-world.com/CPUs/Atom/)，这意味着您的代码可能无论如何都适合）。

x86 体系结构具有`[BX/BP/SI/DI]`和`[BX/BP + SI/DI]`寻址模式。这使得 BP 寄存器成为缩放数组索引非常有用的地方，尤其是当数组指针驻留在 SI 或 DI 寄存器中时。两个偏移寄存器比一个好。

使用寄存器可以避免内存访问，但如果一个变量值得存储在寄存器中，那么它很可能在 L1 缓存中同样有效（尤其是因为它将在堆栈上）。移入/移出缓存仍有成本，但由于现代 CPU 做了很多移动优化和并行化，L1 访问可能与寄存器访问一样快。因此，不移动数据带来的速度优势仍然存在，但没有那么大。我可以很容易地想象 CPU 完全避免了数据缓存，至少就读取而言（并且写入缓存可以并行完成）。

使用的寄存器是需要保存的寄存器。如果您在再次使用它之前无论如何都要把它推入堆栈，那么在寄存器中存储太多是不值得的。在按调用者保留的调用约定（例如上面的约定）中，这意味着寄存器作为持久存储在大量调用其他函数的函数中没有那么有用。

另请注意，x86 为浮点寄存器提供了单独的寄存器空间，这意味着无论如何，如果没有额外的数据移动指令，浮点数就无法使用 BP 寄存器。只有整数和内存指针可以。

* * *

省略帧指针会失去可调试性。[这个答案](https://stackoverflow.com/a/5019590/499214)说明了原因：

如果代码崩溃，调试器需要做的就是生成堆栈跟踪：

```
 PUSH FP      ; log the current frame pointer as well
$1: CALL log_FP  ; log the frame pointer currently on stack
    LEAVE        ; pop the frame pointer to get the next one
    CMP [FP+4],0
    JNZ $1       ; until the stack cannot be popped (the return address is some specific value) 
```

如果代码在没有帧指针的情况下崩溃，调试器可能无法生成堆栈跟踪，因为它可能不知道（即，它需要定位函数入口/出口点）需要从堆栈指针中减去多少。如果调试器不知道没有使用帧指针，它甚至可能会崩溃。

# windows - 在 const 引用上调用属性

> ID：13006374
> 
> 赞同：1
> 
> 时间：2012-10-22T07:00:14.777
> 
> 标签：windows, c++-cli

我有定义属性的 C++/CLI 类：

```
public ref class AbstractOffer 
{
  public:
    AbstractOffer();

    property String^ Body;
}; 
```

在某些函数中，`AbstractOffer`类由 const ref 传递

```
foo(const AbstractOffer^ ao)
{
  ao->Body;
} 
```

当我调用该属性时，方法编译器会给出以下错误：-

> 错误 C2662：“ivrworx::interop::AbstractOffer::Body::get”：无法将“this”指针从“const ivrworx::interop::AbstractOffer”转换为“ivrworx::interop::AbstractOffer %”1> 转换输掉预选赛

它似乎以某种方式与 const 相关联。`Body`如果对象引用由 const 传递，如何调用对象的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:44:54.420

const 限定符是 C++/CLI 中的一个问题。它只有在可以检查时才有意义，而这在 .NET 中通常是不可能的。当您只有一种编译器并且该编译器遵循严格的语言规则时，这当然不是问题。就像 C++ 一样。但是 .NET 支持*多种语言*，例如，您的方法可以很容易地从 Cobol.NET 程序中调用。将 const 正确性添加到 Cobol 语言的几率为零。

编译器*确实*使用 const 限定符编译代码，*并*努力检查何时可以。这就是你得到诊断的原因。当声明存在于另一个程序集中时，这甚至可以工作，只要它是使用 C++/CLI 编译的，编译器就会在元数据中发出 modopt 注释。

但这也有局限性。属性就是其中之一，你不能将 const 限定符添加到 getter 或一般的成员函数，你会被 C3842 拍打。

最好的办法是使用 C++/CLI 来做它擅长的事情，它是一种互操作语言。并且 const 限定符在互操作场景中不能很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:38:45.193

我知道解决这个问题的唯一方法是抛弃 const-ness。只要不修改对象，应该没问题。（如果你修改它，我不知道结果会是什么）。
即改变你的功能是

```
void foo(const AbstractOffer^ ao)
{
  const_cast<AbstractOffer^>(ao)->Body;
} 
```

# objective-c - data 需要 10 分钟才能将数据加载到核心数据库中

> ID：13006383
> 
> 赞同：0
> 
> 时间：2012-10-22T07:00:50.113
> 
> 标签：objective-c, ios, database, core-data

我正在使用核心数据库将我从网络服务返回的数据保存到我的应用程序中。但这非常非常慢。知道这是怎么来的吗？我要做的是以下。我有一个从 web 服务获取数据的类。就像你在这里看到的那样。

```
 GenkData.h 

            + (NSArray *)getNews;
     GenkData.m
+ (NSDictionary *)executeGenkFetch:(NSString *)query
{
    query = [NSString stringWithFormat:@"%@", query];
    query = [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    // NSLog(@"[%@ %@] sent %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), query);
    NSData *jsonData = [[NSString stringWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    NSDictionary *results = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&error] : nil;
    if (error) NSLog(@"[%@ %@] JSON error: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), error.localizedDescription);
    // NSLog(@"[%@ %@] received %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), results);
    return results;
}

+ (NSArray *)getNews
{
    NSString *request = [NSString stringWithFormat:@"http://www.krcgenk.be/mobile/json/request/news/type/ipad"];
    return [[self executeGenkFetch:request] valueForKey:@"news"];
} 
```

然后在我出现的第一个视图控制器中，我有一个方法可以在我的核心数据库中获取我的数据。

```
- (void)fetchGenkDataIntoDocument:(UIManagedDocument *)document
{
    NSLog(@"Fetch data");
    dispatch_queue_t fetchQ = dispatch_queue_create("Genk fetcher", NULL);
    dispatch_async(fetchQ, ^{

        NSArray *news           = [GenkData getNews];

        [document.managedObjectContext performBlock:^{ // perform in the NSMOC's safe thread (main thread)

            int newsId          = 0;
            //int trainingIndex   = -1;
            for (NSDictionary *genkInfo in news) {
                NSLog(@"Begint met nieuwsitem");
                newsId++;
               [News newsWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withNewsId:newsId];
                NSLog(@"Einde met nieuwsitem");
            }
 }];
    });
    NSLog(@"einde fethdata");
} 
```

接下来我有一个新闻的 NSManagerd 对象子类的类别，我在其中执行以下操作。

```
+ (News *)newsWithGenkInfo:(NSDictionary *)genkInfo
    inManagedObjectContext:(NSManagedObjectContext *)context
                withNewsId:(int)newsId
{
    News *news = nil;

    news = [NSEntityDescription insertNewObjectForEntityForName:@"News"
                                                     inManagedObjectContext:context];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd/MM/yyyy"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]];
        NSDate *date = [dateFormatter dateFromString:[genkInfo objectForKey:NEWS_DATE]];
        news.title              = [genkInfo objectForKey:NEWS_TITLE];
        news.date               = date;
        news.genk_description   = [genkInfo objectForKey:NEWS_DESCRIPTION];
        news.imgurl             = [genkInfo objectForKey:NEWS_IMGURL];
        news.shortdescription   = [genkInfo objectForKey:NEWS_SHORTDESCRIPTION];
        news.url                = [genkInfo objectForKey:NEWS_URL];
        news.imagecopyright     = [genkInfo objectForKey:NEWS_IMAGECOPYRIGHT];
        news.news_id            = [NSNumber numberWithInt:newsId];

    return news;

} 
```

我正在为 10 个不同的实体执行以下过程，例如 10 次。所有这些属性大多是字符串。仍然需要 10 分钟才能加载所有数据。有人可以帮助我吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:51:10.353

Dima 对探查器进行检查的回答帮助我解决了这个问题并解决了我的问题

# java - 如何使用哈希图或任何列表而不是以下格式的可观 察列表填充 javafx 表视图

> ID：13006386
> 
> 赞同：2
> 
> 时间：2012-10-22T07:00:57.830
> 
> 标签：java, list, tableview, javafx-2, javafx

我怎样才能只使用`List`,`ArrayList`或`HashMap`在它使用的可观察列表中`<Person>`以及每次新的`Person()`初始化和表列相同`PropertyValueFactory`。

我怎样才能使用：

```
 private final ObservableList<Person> data =
    FXCollections.observableArrayList( MyList/HashMap/ArrayList Here); 
```

我很难弄清楚我在哪里犯了错误。

[Oracle 文档在这里](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)举了一个例子

```
private TableView<Person> table = new TableView<Person>();
    private final ObservableList<Person> data =
        FXCollections.observableArrayList(
        new Person("Jacob", "Smith", "jacob.smith@example.com"),
        new Person("Isabella", "Johnson", "isabella.johnson@example.com"),
        new Person("Ethan", "Williams", "ethan.williams@example.com"),
        new Person("Emma", "Jones", "emma.jones@example.com"),
        new Person("Michael", "Brown", "michael.brown@example.com"));

TableColumn emailCol = new TableColumn("Email");
    emailCol.setMinWidth(200);
    emailCol.setCellValueFactory(
        new PropertyValueFactory<Person, String>("email"));

    table.setItems(data); 
```

这是我的代码：

```
 @FXML
      private TableView<ObservableList> tableViewCOA = new TableView<ObservableList>();

      @FXML
      private TableColumn superTypeNameCol = new TableColumn();

      @FXML
      private TableColumn catagoryNameCol = new TableColumn();

      @FXML
      private TableColumn accountNameCol = new TableColumn();
      @FXML
      private TableColumn accountIDCol = new TableColumn();

  final ObservableList<ObservableList> data = FXCollections.observableArrayList(

        getAllCOA() //<-- myObservableListHere (refer to last method of jdbc)

          );

          superTypeNameCol.setCellValueFactory(
          new PropertyValueFactory<COA,String>("superNameCol")
              );

          catagoryNameCol.setCellValueFactory(
          new PropertyValueFactory<COA,String>("catagoryNameCol")
              );
          accountIDCol.setCellValueFactory(
          new PropertyValueFactory<COA,String>("accountIDCol")
              );
          accountNameCol.setCellValueFactory(
          new PropertyValueFactory<COA,String>("accountNameCol")
              );

          tableViewCOA.setItems(data);

  /*
  * To change this template, choose Tools | Templates
  * and open the template in the editor.
  */
  package accountsMain;

  import javafx.beans.property.SimpleStringProperty;

  /**
  *
  * @author u1
  */
  public class COA{

      private final SimpleStringProperty superNameCol;
      private final SimpleStringProperty catagoryNameCol;
      private final SimpleStringProperty accountNameCol;
      private final SimpleStringProperty accountIDCol;

      public COA(String superName,
          String catagoryName,
        String accountName,
        String accountID

          ){

      this.superNameCol   = new SimpleStringProperty(superName);
      this.catagoryNameCol  = new SimpleStringProperty(catagoryName);
      this.accountIDCol  = new SimpleStringProperty(accountID);
      this.accountNameCol   = new SimpleStringProperty(accountName);

      }

      public String getSuperNameCol() {
        return superNameCol.get();
      }
      public void setSuperNameCol(String superName) {
      superNameCol.set(superName);
      }

      public String getCatagoryNameCol() {
        return catagoryNameCol.get();
      }
      public void setCatagoryNameCol(String catagoryName) {
      catagoryNameCol.set(catagoryName);
      }

      public String getAccountIDCol() {
        return accountIDCol.get();
      }
      public void setAccountIDCol(String accountID) {
      accountIDCol.set(accountID);
      }

      public String getAccountNameCol() {
        return accountNameCol.get();
      }
      public void setAccountNameCol(String accountName) {
      accountNameCol.set(accountName);
      }
      }

  ///////////////////////////// this is what returns -----myObservableList-------///////////////////////////////

  public static ObservableList<ObservableList> getAllCOA() {

          Connection con = null;

      //    HashMap rows = new HashMap();
          ObservableList<ObservableList> rows = FXCollections.observableArrayList();

      try {
          Class.forName("com.mysql.jdbc.Driver");
          con = DriverManager.getConnection(
              "jdbc:mysql://"+host+":3306/"+DBname, user, password);

          PreparedStatement pStmt = con.prepareStatement(
        "select "
              + "supercoa.superTypeName,"
              + "catagorycoa.catagoryName,"
              + "accountscoa.accountName,"
              + "accountscoa.account_id"
              + " FROM"
              + " supercoa,catagorycoa,accountscoa"
              + " WHERE"
              + " accountscoa.catagory_id = catagorycoa.catagory_id"
              + " group by accountscoa.accountName");

          ResultSet rs = null;
          rs = pStmt.executeQuery();
          int i = 1;
          while (rs.next()) {

        //  List singleRow = new ArrayList();
          ObservableList<String> singleRow = FXCollections.observableArrayList();
          String supertypeName = rs.getString("supertypeName");  singleRow.add(supertypeName);
          String catagoryName = rs.getString("catagoryName");  singleRow.add(catagoryName);
          String accountName = rs.getString("accountName");  singleRow.add(accountName);
          String account_id = rs.getString("account_id");  singleRow.add(account_id);

          //rows.put(i,singleRow);
          //i++;
          rows.add(singleRow);
          }

          pStmt.close();
          con.close();

          } catch (ClassNotFoundException | SQLException e) {
          main.ErrorLogging.errorLog(e.toString());

          } 
        return rows;
      } 
```

数据未出现，但表格显示为空白列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:16:05.823

要从 HashMap 填充 TableView，请参阅 TableView 教程部分[将数据映射添加到表](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)中。

* * *

对于您在问题中提供的示例，最好将`getAllCOA()`方法的签名更改为：

```
public static ObservableList<COA> getAllCOA() 
```

此外，当您使用该`getAllCOA()`方法时，请改为：

```
final ObservableList<COA> data = getAllCOA(); 
```

当您定义表格时，请改用：

```
private TableView<COA> tableViewCOA = new TableView<COA>(); 
```

通过这种方式，您将使用 COA 对象列表，而不仅仅是列表列表。这将允许您创建的单元格值工厂工作。您的单元格值工厂当前无法正常工作，因为它们是为了内省 COA 对象的属性而构建的，并且您没有将 COA 对象放置在表数据中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:34:54.260

尝试进行类型转换

```
private final ObservableList<Person> data = (ObservableList<Person>)
    FXCollections.observableArrayList( MyList/HashMap/ArrayList Here); 
```

# c# - 单选按钮 Windows Phone 内的 TextBlock 对齐

> ID：13006388
> 
> 赞同：0
> 
> 时间：2012-10-22T07:01:01.577
> 
> 标签：c#, windows-phone-7, radio-button, textblock

我想在 Windows Phone 7 的单选按钮内创建一个文本框，以显示多行文本。

```
 RadioButton rb = new RadioButton();
            rb.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            rb.VerticalAlignment = System.Windows.VerticalAlignment.Center;
            rb.Height = 104;
            rb.Width = 396;

            TextBlock txt = new TextBlock();
            txt.TextWrapping = TextWrapping.Wrap;
            txt.Height = 72;
            txt.FontSize = 22;
            txt.Width = 300;
            txt.VerticalAlignment = System.Windows.VerticalAlignment.Center;
            txt.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            txt.Text = "Some Text";
            rb.Content = txt; 
```

问题是文本块中的文本可以长也可以短。如果它很长，那很好。但如果它很短，它会与文本块的顶部边框对齐，看起来很丑。但是我不能降低文本块的高度，因为如果有 2 或 3 行文本，空间将不够。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:17:10.603

您可以在代码`Height`中将文本框设置为.`double.NaN``txt.Height = double.NaN;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:04:37.320

你可以设置最大高度

make layout 通过设置右对齐值来适应文本块的实际高度

# c# - 从表中选择最后一条记录

> ID：13006392
> 
> 赞同：0
> 
> 时间：2012-10-22T07:01:21.650
> 
> 标签：c#, sql, database, oledb

我正在开发使用 oledb 连接的 ac# 应用程序。

我的桌子在下面

支付

```
Id   RemFee
1     2000
2     2500
1     1500
3     8000
3     5000
2      500
3        0 
```

我只想选择并检查每个 Id 的最后一条记录，并将 Remfee 与 0 进行比较。如果大于 0，则打印该记录。即我的预期结果是：

```
Id  
1    
2 
```

在此检查中使用 RemFee 1500 对 Id 1 进行检查（因为它是 Id1 的最后一条记录）。它大于 0，因此打印记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:13:36.987

猜测您正在使用 MSQ SQL Server 并且没有行知道您最后插入的行。试试这个代码：

```
SELECT Id, Min(RemFee) AS RemFee
  FROM payment
 WHERE RemFee > 0
 GROUP BY ID 
```

这是一个**[SQL Fiddle 工作](http://sqlfiddle.com/#!3/a6fab/5)**代码示例

**编辑**

如果你只想要这里的 ID 字段是一个选项，连同**[SQL Fiddle 代码](http://sqlfiddle.com/#!3/a6fab/11)**

```
SELECT myTable.Id
  FROM (SELECT Id as ID, Min(RemFee) AS Remfee
          FROM payment
         WHERE RemFee > 0
         GROUP BY ID
        ) myTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:05:13.090

```
SELECT ID,MIN(REMFEE) FROM payment WHERE ID NOT IN (SELECT ID FROM  payment  WHERE REMFEE  = 0) GROUP BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:10:42.353

```
Select 
   id, Min(RemFee) 
from payment 
where RemFee > 0 
group by id 
```

# java - java加密还原

> ID：13006394
> 
> 赞同：0
> 
> 时间：2012-10-22T07:01:32.123
> 
> 标签：java, char

我的 Java 初学者技能，不知道如何加密文本。是的，我确实知道有很多库和 APIS，但这次我想以任何方式这样做，所以我完全理解一切。

所以我的想法和问题是如何为字符分配值并稍后使用它们（加密和解密）。例如 A = 12；B = 13; C = 14; D = 15。所以 DBAC 将是 15131214

到目前为止，我制作的这个程序只是将字符加一，但我不知道如何分配不同的值。

```
package javaapplication2;

public class JavaApplication2 {
public static void main(String[] args) {
    int b;
    String text = "criptable text";
    char[] textArray = text.toCharArray();

    for(int index=0; index < textArray.length;index++){
        textArray[index]++;

    }

    String done = new String (textArray);
    System.out.println(done);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:04:30.247

一个非常简单的方法可能是有一个`hashmap`键值对，键是字母，值是您要分配的任何数字。

然后在函数中，从数组中获取字符，并通过查找为它分配一个值`hashmap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:05:18.940

为了获得不同的值（而不仅仅是增量），您需要一个包含每个字母值信息的字典。

顺便说一句，您正在尝试做一些类似于凯撒密码（[http://en.wikipedia.org/wiki/Caesar_cipher](http://en.wikipedia.org/wiki/Caesar_cipher)）的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:35:48.800

你可能正在寻找这样的东西？

```
public class TestType {

public static void main(String[] args) {

    /*
     * Create a Map of replacements
     */
    Map<Character, String> keyMap = new HashMap<Character, String>();
    keyMap.put('a', "12");  keyMap.put('b', "13");
    keyMap.put('c', "14");  keyMap.put('d', "15");
    keyMap.put('e', "16");  keyMap.put('f', "17");
    keyMap.put('g', "18");  keyMap.put('h', "19");
    //Add more key-values for all letter support

    String plainText = "abcdefgh";
    StringBuffer encrypted = new StringBuffer();

    for (char ch : plainText.toCharArray()) {
        /* Form the encrypted string */
        encrypted.append(keyMap.get(ch));

    }

    System.out.println("Encrypted: " + encrypted.toString());

} 
```

}

# java - 无法使用 JpaTransactionManager 在春季测试中持久化实体

> ID：13006398
> 
> 赞同：2
> 
> 时间：2012-10-22T07:02:06.133
> 
> 标签：java, spring, hibernate, jpa

我正在尝试使用一个实体来坚持。当我自己处理交易时，我的测试用例有效（数据保存在数据库中）。

```
public User saveUser(User user) {
    getEm().getTransaction().begin();
    getEm().persist(user);
    getEm().getTransaction().commit();      
    return user;
} 
```

（实体管理器来自我的 DAO 类扩展的模板类）

当我配置 spring 来处理事务时，它会停止持久化数据。

测试上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
    http://www.springframework.org/schema/jdbc 
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd 
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="domainPU" />
        <property name="loadTimeWeaver">
            <bean
                class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
        </property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://192.168.5.111/testdb" />
        <property name="username" value="sdgdsgs" />
        <property name="password" value="sdfgdsg" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory">
            <ref local="entityManagerFactory" />
        </property>
    </bean>

</beans> 
```

用户存储库测试：

```
@ContextConfiguration(locations = { "classpath:test-context.xml", "classpath:module-context.xml" })
@TransactionConfiguration(defaultRollback=false)
public class UsersRepositoryTest extends AbstractTransactionalTestNGSpringContextTests {

    @Autowired
    private UsersRepository usersRepository;

    @Test(dependsOnMethods = {"findUserByLogin"})
    public void registerUser() throws DataAccessException {
        User myUser = getUserHomer();
        usersRepository.saveUser(myUser);

        User returnedUser = usersRepository.getUserByLogin(myUser.getLogin());

        assertNotNull(returnedUser);
                ...
    }
} 
```

堆栈跟踪：

```
2012-10-22 08:26:26 org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean createNativeEntityManagerFactory
INFO: Building JPA container EntityManagerFactory for persistence unit 'domainPU'
2012-10-22 08:26:26 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
2012-10-22 08:26:26 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.6.Final}
2012-10-22 08:26:26 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
2012-10-22 08:26:26 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
2012-10-22 08:26:26 org.hibernate.ejb.Ejb3Configuration configure
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: domainPU
    ...]
2012-10-22 08:26:26 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
2012-10-22 08:26:27 org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2012-10-22 08:26:27 org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
2012-10-22 08:26:27 org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
2012-10-22 08:26:27 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
2012-10-22 08:26:27 org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'entityManagerFactory' of type [class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2012-10-22 08:26:27 org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'hibernateTranslator' of type [class org.springframework.orm.hibernate4.HibernateExceptionTranslator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2012-10-22 08:26:27 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5c28305d: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,entityManagerFactory,dataSource,transactionManager,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,hibernateTranslator,usersDao,zoneDao,usersRepository,zoneRepository,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener startNewTransaction
INFO: Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3341b736]; rollback [false]
Hibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?
Hibernate: select phone0_.id as id2_0_, phone0_.phone_number as phone2_2_0_, phone0_.user_id as user3_2_0_ from phone phone0_ where phone0_.id=?
Hibernate: select address0_.ID as ID6_0_, address0_.apartment_number as apartment2_6_0_, address0_.city as city6_0_, address0_.country as country6_0_, address0_.house_number as house5_6_0_, address0_.post_code as post6_6_0_, address0_.street as street6_0_ from address address0_ where address0_.ID=?
Hibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?
2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener endTransaction
INFO: Committed transaction after test execution for test context [[TestContext@63edf84f testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@7e3bc473, testMethod = findUserByLogin@UsersRepositoryTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1c493dca testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener startNewTransaction
INFO: Began transaction (2): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@3341b736]; rollback [false]
Hibernate: select user0_.id as id0_, user0_.active as active0_, user0_.creation_date as creation3_0_, user0_.email as email0_, user0_.last_login_date as last5_0_, user0_.login as login0_, user0_.password as password0_, user0_1_.AVATAR as AVATAR1_, user0_1_.FIRST_NAME as FIRST2_1_, user0_1_.ID as ID1_, user0_1_.LAST_NAME as LAST4_1_, case when user0_1_.id is not null then 1 when user0_.id is not null then 0 end as clazz_ from user user0_ left outer join client user0_1_ on user0_.id=user0_1_.id where user0_.login=?
2012-10-22 08:26:27 org.springframework.test.context.transaction.TransactionalTestExecutionListener endTransaction
INFO: Committed transaction after test execution for test context [[TestContext@63edf84f testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@7e3bc473, testMethod = registerUser@UsersRepositoryTest, testException = java.lang.AssertionError: expected object to not be null, mergedContextConfiguration = [MergedContextConfiguration@1c493dca testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
PASSED: findUserByLogin
FAILED: registerUser
java.lang.AssertionError: expected object to not be null
    at org.testng.Assert.fail(Assert.java:94)
        ... 
```

从stacktrace可以看出，transaction好像已经启动完成了，但是没有产生sql插入，也没有数据插入db（数据回滚设置为false）

我尝试在persist() 之后强制刷新数据，但spring 托管事务似乎到那时已经完成。

我在论坛上寻找过类似的问题，但没有一个有效。如有必要，我可以提供更多代码。

我正在使用 Spring 3.1.2 和 Hibernate 4.1.6.Final

**更新：**

DAO：（@Transactional 注解暂时放在服务层上）

```
@Repository
public class JpaUsersDAO extends JpaDAOTemplate<User> implements UsersDAO {

public JpaUsersDAO(EntityManagerFactory factory) {
    super(factory.createEntityManager(), User.class);
}

    @Transactional
    public User saveUser(User user) {
        getEm().persist(user);  
        return user;
    }
} 
```

DAO模板：

```
public abstract class JpaDAOTemplate<T extends Serializable> {

    private EntityManager em;

    private Class<T> clazz;

    public JpaDAOTemplate(EntityManager em, final Class<T> clazz) {
        this.em = em;
        this.clazz = clazz;
    }

    public EntityManager getEm() {
        return em;
    }

    public T getById(Integer id) {...}
    ...
} 
```

豆定义：

```
<bean id="usersDao"
    class="pl.package.user.dao.impl.JpaUsersDAO">
    <constructor-arg ref="entityManagerFactory" />
</bean> 
```

似乎事务在选择之后和调用 getEm().persist() 之前的某处丢失 -调用 persist() 时**org.hibernate.ejb.TransactionImpl#tx 为空**，但它是**org.hibernate.engine.transaction.internal。调用前的jdbc.JDBCTransaction**（当进行 sql 选择语句调用时）

**更新 2** 调试级别堆栈跟踪：

```
[2012-10-23 11:15:14,546]DEBUG 38629[main] - org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:365) - Creating new transaction with name [registerUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
[2012-10-23 11:15:33,252]DEBUG 57335[main] - org.hibernate.internal.SessionImpl.<init>(SessionImpl.java:316) - Opened session at timestamp: 13509837332
[2012-10-23 11:15:33,252]DEBUG 57335[main] - org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:368) - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@18025c5c] for JPA transaction
[2012-10-23 11:15:40,085]DEBUG 64168[main] - org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:158) - begin
[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:295) - Obtaining JDBC connection
[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:301) - Obtained JDBC connection
[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:69) - initial autocommit status: true
[2012-10-23 11:15:40,101]DEBUG 64184[main] - org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:71) - disabling autocommit
[2012-10-23 11:16:06,934]DEBUG 91017[main] - org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:407) - Not exposing JPA transaction [org.hibernate.ejb.EntityManagerImpl@18025c5c] as JDBC transaction because JpaDialect [org.springframework.orm.jpa.DefaultJpaDialect@5f343722] does not support JDBC Connection retrieval
[2012-10-23 11:16:06,934]DEBUG 91017[main] - org.springframework.test.context.transaction.TransactionalTestExecutionListener.isRollback(TransactionalTestExecutionListener.java:357) - No method-level @Rollback override: using default rollback [false] for test context [[TestContext@5809fdee testClass = UsersRepositoryTest, testInstance = pl.eports.zonen.user.repository.UsersRepositoryTest@3fde891b, testMethod = registerUser@UsersRepositoryTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@77fe4169 testClass = UsersRepositoryTest, locations = '{classpath:test-context.xml, classpath:module-context.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
[2012-10-23 11:16:06,934] INFO 91017[main] - org.springframework.test.context.transaction.TransactionalTestExecutionListener.startNewTransaction(TransactionalTestExecutionListener.java:275) - Began transaction (1): transaction manager [org.springframework.orm.jpa.JpaTransactionManager@37977909]; rollback [false]
[2012-10-23 11:17:08,103]DEBUG152186[main] - org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
[2012-10-23 11:17:08,118]DEBUG152201[main] - org.springframework.transaction.interceptor.AbstractFallbackTransactionAttributeSource.getTransactionAttribute(AbstractFallbackTransactionAttributeSource.java:106) - Adding transactional method 'saveUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
[2012-10-23 11:17:08,118]DEBUG152201[main] - org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'txManager'
[2012-10-23 11:17:27,073]DEBUG171156[main] - org.springframework.orm.jpa.JpaTransactionManager.doGetTransaction(JpaTransactionManager.java:331) - Found thread-bound EntityManager [org.hibernate.ejb.EntityManagerImpl@18025c5c] for JPA transaction
[2012-10-23 11:18:04,031]DEBUG208114[main] - org.springframework.transaction.support.AbstractPlatformTransactionManager.handleExistingTransaction(AbstractPlatformTransactionManager.java:470) - Participating in existing transaction 
```

**最终更新：**

问题在于我将 EntityManagerFactory 注入我的 DAO 的方式。我使用 applicationContext.xml 配置文件来注入它（这种方式 EMF 不参与事务）。为了让它工作，我将我的 DAO 类更改为：

```
@Repository
public class JpaUsersDAO extends JpaDAOTemplate<User> implements UsersDAO {

    @PersistenceContext
    private EntityManager em;
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:01:30.537

您正在使用`Spring 3.0`. 我不清楚你的编码`public User saveUser(User user)`方法。即使您使用`Spring 3.0`，您也可以自己处理交易（`Bean Management Transaction`）。它只需要使用`@Transactional(propagation = Propagation.REQUIRED)`注释。`propagation`根据您的流程更改类型。

**示例 DAO：**

GroupDAO.java

```
@Repository("GroupDAO")
public class GroupDAO {
    @PersistenceContext
    protected EntityManager em;

    @Transactional(propagation = Propagation.REQUIRED)
    public void insert(Group group) {
        try {
            em.persist(group);
            em.flush();
        } catch (PersistenceException pe) {
        }
    }
} 
```

spring-bean.xml 带有`EclipseLink JPA`<-- 仅供参考。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:faces="http://www.springframework.org/schema/faces"
       xmlns:int-security="http://www.springframework.org/schema/integration/security"
       xmlns:tx="http://www.springframework.org/schema/tx" xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/integration/security http://www.springframework.org/schema/integration/security/spring-integration-security-2.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/faces http://www.springframework.org/schema/faces/spring-faces-2.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <context:annotation-config/>    
    <context:component-scan base-package="your-package"/>
    <tx:annotation-driven transaction-manager="transactionManager" />
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://192.168.5.111/testdb"/>
        <property name="username" value="your-username"/>
        <property name="password" value="your-password"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
<!--        <property name="dataSource" ref="dataSource"/>-->
        <property name="persistenceUnitName" value="domainPU"/>
        <property name="jpaVendorAdapter" ref="jpaVendorAdapter"/>
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect"/>
        </property>
        <property name="jpaPropertyMap">
            <props>
                <prop key="eclipselink.weaving">false</prop>
            </props>
        </property>

        <property name="loadTimeWeaver">
            <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver">
            </bean>
        </property>
    </bean>

    <bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        <property name="databasePlatform" value="org.eclipse.persistence.platform.database.MySQLPlatform"/>
<!--        <property name="databasePlatform" value="org.eclipse.persistence.platform.database.OraclePlatform" />-->
        <property name="generateDdl" value="false"/>
        <property name="showSql" value="true"/>
    </bean>
</beans> 
```

# sql-server-2008 - SQL Server 2008 触发器错误删除

> ID：13006399
> 
> 赞同：0
> 
> 时间：2012-10-22T07:02:07.020
> 
> 标签：sql-server-2008

我在 SQL Server 2008 中创建了一个触发器

```
CREATE TRIGGER [dbo].[ITEM_UOM_DELETE] ON
   [dbo].[ITEM_UOM] INSTEAD OF DELETE
   AS
      declare @rowc int
      set @rowc = (select count(*) from stock, deleted where 
      item = deleted.itemcode and uom = DELETED.MAINUNIT AND DOCTYPE <> 'OP')
         if @rowc > 0
         begin
           raiserror('Unit is in Use Cannot Delete', 16, 1)
           rollback transaction
         end 
```

在执行此触发器时，它会给出错误输出

> Msg 50000, Level 16, State 1, Procedure ITEM_UOM_DELETE, Line 11
> Unit is in Use Cannot Delete
> Msg 3609, Level 16, State 1, Line 1
> 事务在触发器中结束。该批次已中止。

我只想要定义的错误

> *单位正在使用中无法删除*

如何删除错误“事务在触发器中结束。批次已中止。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:07:40.790

```
CREATE TRIGGER [dbo].[ITEM_UOM_DELETE] ON
[dbo].[ITEM_UOM] INSTEAD OF DELETE
AS
BEGIN

declare @rowc int
select @rowc=count(*) from stock

if @rowc <= 0
begin
deleted uom from [ITEM_UOM] uom inner join deleted on uom.item = deleted.itemcode 
and uom.MAINUNIT = DELETED.MAINUNIT where uom.DOCTYPE <> 'OP'
end
else
begin
raiserror('Unit is in Use Cannot Delete', 16, 1)
end

end 
```

# c# - Gridview：同一行单元格中的许多控件

> ID：13006402
> 
> 赞同：0
> 
> 时间：2012-10-22T07:02:16.757
> 
> 标签：c#, gridview

我在同一个 gridview 单元格中有很多控件。我正在使用以下代码。但我希望它们垂直显示而不是水平显示，因为使用以下代码将它们分配在同一行中。有什么帮助吗？

```
RadioButton rd1 = new RadioButton();
rd1.Text = "Test1";
RadioButton rd2 = new RadioButton();
rd2.Text = "Test2";
grdRSM.Rows[0].Cells[2].Controls.Add(rd1);
grdRSM.Rows[0].Cells[2].Controls.Add(rd2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:08:45.147

你可以做两件事

**第一的**

使用`RadioButtonList`而不是单个`RadioButton`并设置它`RepeatDirection="Vertical"`

**第二**

用来`HtmlGenericControl`渲染这样的`BR`东西

```
RadioButton rd1 = new RadioButton();
rd1.Text = "Test1";
RadioButton rd2 = new RadioButton();
rd2.Text = "Test2";

HtmlGenericControl br = new HtmlGenericControl("BR");

grdRSM.Rows[0].Cells[2].Controls.Add(rd1);
grdRSM.Rows[0].Cells[2].Controls.Add(br);
grdRSM.Rows[0].Cells[2].Controls.Add(rd2); 
```

它会使那些`RadioButtons`被垂直渲染

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:08:02.907

从不同的行，你的意思是不同的行？？。然后请通过替换您的最后一行代码来尝试此操作。

```
 grdRSM.Rows[1].Cells[2].Controls.Add(rd2); 
```

# java - 使数据库确定性失败以进行测试

> ID：13006408
> 
> 赞同：5
> 
> 时间：2012-10-22T07:02:50.857
> 
> 标签：java, testing

我有一个使用大量`java.sql.Connection`数据库的 Java 应用程序。

我想测试一下，如果数据库不可用，我的服务会返回适当的错误代码（区分临时问题和永久问题，例如 HTTP 500 和 503）。

为了测试，我的应用程序连接到一个嵌入式、本地、内存中的 h2 数据库；应用程序不知道这一点，只有我的集成测试是。

我怎样才能使对数据库的写入确定性失败，例如挂钩提交并让它们抛出自定义`SQLException`？我希望测试代码中有一个全局“数据库不可用”布尔值，它会影响所有连接并使我的应用程序执行其重新连接逻辑。

^(（我已经开始代理`Connection`并放入一个`if(failFlag) throw new MySimulateFailureException()`；`commit()`但这并没有抓住`PreparedStatement.executeUpdate()`；在我开始代理之前`PreparedStatement`- 它有很多方法！ - 我想被教一个更好的方法......）)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:31:19.390

我认为这是使用[方面](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的好选择。与例如。[Spring](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)非常容易切入整个包或只是某些您希望失败的方法 - 特别是您可以有一个`before`建议总是抛出一个`ConnectException`或使用建议做一些更高级的事情`around`。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:47:08.930

我最终制作了自己的拦截`Connection.commit`和`PreparedStatement.execute...`方法的 Java 反射包装器。

我在“DBFactory”类中的最终代码：

```
@SuppressWarnings("serial")
public class MockFailureException extends SQLException {
    private MockFailureException() {
        super("The database has been deliberately faulted as part of a test-case");
    }
}

private class MockFailureWrapper implements InvocationHandler {

    final Object obj;

    private MockFailureWrapper(Object obj) {
        this.obj = obj;
    }

    @Override public Object invoke(Object proxy, Method m, Object[] args) throws Throwable {
        if(dbFailure && ("commit".equals(m.getName()) || m.getName().startsWith("execute")))
            throw new MockFailureException();
        Object result;
        try {
            result = m.invoke(obj, args);
            if(result instanceof PreparedStatement)
                result = java.lang.reflect.Proxy.newProxyInstance(
                        result.getClass().getClassLoader(),
                        result.getClass().getInterfaces(),
                        new MockFailureWrapper(result));
        } catch (InvocationTargetException e) {
            throw e.getTargetException();
        } catch (Exception e) {
            throw new RuntimeException("unexpected invocation exception: " + e.getMessage());
        }
        return result;
    }

}

public Connection newConnection() throws SQLException {
    Connection connection = DriverManager.getConnection("jdbc:h2:mem:"+uuid+";CREATE=TRUE;DB_CLOSE_ON_EXIT=FALSE");
    return (Connection)java.lang.reflect.Proxy.newProxyInstance(
            connection.getClass().getClassLoader(),
            connection.getClass().getInterfaces(),
            new MockFailureWrapper(connection));
} 
```

# r - ggplot2 - 在堆积条形图中翻转级别的顺序

> ID：13006409
> 
> 赞同：2
> 
> 时间：2012-10-22T07:03:12.153
> 
> 标签：r, ggplot2

这段代码相当少，应该能够调整为解决方案。

```
blah <- data.frame(X1=c("Decrease Risk","Don't Know","Increase Risk","No Effect","Decrease Risk","Don't Know","Increase Risk","No Effect"),
                   X2=c("Red Meat","Red Meat","Red Meat","Red Meat","Red Meat","Red Meat","Red Meat","Red Meat"),
                   value=c(1.98,31.19,64.38,2.43,4.65,24.55,35.88,34.90),
                   status=c("Case","Case","Case","Case","Control","Control","Control","Control")
                   )

ggplot(blah, aes(X2, value, fill=X1)) + geom_bar() + coord_flip() + facet_wrap(~status) + 
    labs(x="Perceived Risk Factors", y="Percentage (%)", tilte="Some Title", fill="Responses") 
```

![在此处输入图像描述](../Images/d3991de584707ff9d8513b4a7dbe3649.png)

我想要的是右侧的“控件”将“响应”级别的顺序颠倒过来。关键是，对于控件，紫色在里面，然后是蓝色的，然后是绿色的，外面是粉红色的。在这样的情节中这样做是半常见的，我可以想办法做到这一点，包括一些相当肮脏的变量重复和有序因子水平的改变，但认为有人可能有一个优雅的解决方案/想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:32:57.987

这是一种使用顺序美学的略微微妙的方法。

```
ggplot(blah, aes(X2, value, fill = X1, 
  order = (3-as.numeric(status)*2) * as.numeric(X1))) + 
geom_bar() + coord_flip() + facet_wrap(~status) + 
labs(x="Perceived Risk Factors", y="Percentage (%)", title="Some Title", 
  fill="Responses") 
```

![在此处输入图像描述](../Images/d4cc302b523427d86d1acdf17d4e5389.png)

这并不理想，因为当有两个以上的方面时，它不会那么容易地概括所有方面。

# c# - 将常量字符串连接到列表中的每个项目 使用 LINQ

> ID：13006411
> 
> 赞同：9
> 
> 时间：2012-10-22T07:03:21.310
> 
> 标签：c#, linq, string-concatenation

我正在使用 C# 和 .Net 4.0。

我有`List<string>`一些值，比如 x1、x2、x3。对于 中的每个值`List<string>`，我需要连接一个常量值，比如“y”并取回`List<string>`x1y、x2y 和 x3y。

有没有一种 Linq 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T07:06:53.913

```
List<string> yourList = new List<string>() { "X1", "Y1", "X2", "Y2" };
yourList = yourList.Select(r => string.Concat(r, 'y')).ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T07:04:51.747

```
list = list.Select(s => s + "y").ToList(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T07:08:38.440

另一种方法，使用`ConvertAll`：

```
List<string> l = new List<string>(new [] {"x1", "x2", "x3"} );
List<string> l2 = l.ConvertAll(x => x + "y"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:04:44.380

你可以使用`Select`它

```
var list = new List<string>(){ "x1", "x2" };

list = list.Select(s =>  s + "y").ToList(); 
```

# ios - 在 dealloc 中释放 NSMutableArray 会导致应用崩溃

> ID：13006412
> 
> 赞同：0
> 
> 时间：2012-10-22T07:03:23.933
> 
> 标签：ios, memory-management, memory-leaks, nsmutablearray

我有一个`UIView`包含一个`UITableView`. 此表由`NSMutableArray`.

`initWithFrame:`我在 UIView 的方法中初始化了数组和表。

```
- (id)initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self)
  {
    bookTable = [[UITableView alloc]initWithFrame:CGRectMake(100, 108, 260, 535)];
    bookArray = [[NSMutableArray alloc]init]; //this array will be populated later

    //other codes
  }
  return self;
} 
```

我将它们发布在`dealloc`：

```
- (void)dealloc
{
   [bookTable release];      
   [bookArray release];

   [super dealloc];
} 
```

问题是当应用程序在`dealloc`. 它产生错误：`[CALayer release]: message sent to deallocated instance 0x82db660`

我在我的代码中到处查看，我确信我没有过度发布任何东西。我决定删除`[bookArray release]`in `dealloc`，它停止崩溃。我跑了`Analyze`，它没有给我任何潜在的泄漏。

谁能向我解释为什么在 dealloc 中释放数组会导致崩溃？

**注意：** 表和数组都是视图的实例变量。

**编辑：** 填充数组的代码：

```
NSString *sql = [NSString stringWithFormat:@"SELECT BookName FROM books WHERE UserID=%d", userId];
booksArray = [sqlite executeQuery:sql]; 
```

请注意，我使用的是 sql 包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:41:08.413

1.  更改`executeQuery`方法的返回语句，例如`[array autorelease]`
2.  替换`booksArray = [sqlite executeQuery:sql];`为`booksArray = [[sqlite executeQuery:sql] retain];`

如果您写`property`了`booksArray`类似的东西，`@property(nonatomic, retain) NSMutableArray *bookArray;`那么您可以将**步骤 2**替换为`self.bookArray = [sqlite executeQuery:sql];`

您的问题是您正在从该`executeQuery`方法返回一个已发布的对象（您在评论中提到了它）。这就是你收到错误的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:33:45.113

我想问题只在这里。

```
booksArray = [sqlite executeQuery:sql]; 
```

该`executeQuery`方法可能返回一个自动释放的 NSMutableArray 或者类似的东西可能写在里面`executeQuery`

```
NSMutableArray* tempArray = [NSMutableArray arrayWithCapacity:0]; 
```

如果是这样，它应该已经处于自动释放模式，因此没有`release`方法`dealloc`。

**更新**

此外，为数组分配 0sign 属性。

```
@property (nonatomic, retain) NSMutableArray* booksArray; 
```

然后，无论您在哪里使用它，都将其用作`self.booksArray`

```
self.booksArray = [sqlite executeQuery:sql]; 
```

这样，将是适当的内存管理，然后在 dealloc 中释放数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:33:48.990

这就是问题所在

```
booksArray = [sqlite executeQuery:sql]; 
```

返回的数组`sqlite`是一个自动释放的对象。您必须保留它或从“dealloc”中删除释放。

```
booksArray = [[sqlite executeQuery:sql] retain]; 
```

由于它是自动释放的对象，当系统也尝试释放它时，在 dealloc 中释放它会导致崩溃`release`。

并删除`init`方法中的数组初始化，这是多余的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:57:15.477

我建议像这样为 booksArray 创建一个属性：

```
@property (nonatomic, retain) NSMutableArray *bookArray; 
```

当您填充它时，请尝试以下代码：

```
self.bookArray = [NSMutableArray arrayWithArray:[sqlite executeQuery:sql]]; 
```

这将创建返回数组的自动释放副本，然后由属性“自动”保留。

当然，您应该确保 [sqlite executeQuery:sql] 返回的数组是自动释放的。

# php - MySQL（phpmyadmin）时区问题

> ID：13006415
> 
> 赞同：0
> 
> 时间：2012-10-22T07:03:31.337
> 
> 标签：php, mysql, sql, timezone

我有一个网站存储在共享服务器上，时区是根据服务器的操作系统设置的，比服务器的操作系统提前两个小时。

我改变了我的 php.ini 并尝试了：

```
SET time_zone='-7:00'
SET time_zone='Canada/Mountain' 
```

在 MySQL 但它不起作用。有没有解决的办法？覆盖或设置时区？

我的托管公司支持人员说我应该在每个 mysql 会话开始时运行“SET time_zone”，但我不明白他们的意思，他们对此非常模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:28:14.800

您需要在连接数据库后立即执行此操作。

对于 EX（这只是一个示例，如果您使用的是 PDO，您可以相应地更改它）：

```
 mysql_query("SET time_zone='-7:00'"); 
```

我还想在这里提到 +/- 符号是必不可少的——即使是零。

也来自[Mysql 文档](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)：

“当前会话时区设置会影响对区域敏感的时间值的显示和存储。这包括由 NOW() 或 CURTIME() 等函数显示的值，以及存储在 TIMESTAMP 列中和从中检索的值。

当前时区设置不会影响 UTC_TIMESTAMP() 等函数显示的值或 DATE、TIME 或 DATETIME 列中的值。"

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:13:14.760

当我从 php4 迁移到 php5 时，我在时间和日期方面遇到了类似的问题，我所有的时间函数都停止工作。解决方案是把 date_default_timezone_set('America/Los_Angeles'); 在第一行代码中。

# c# - C# 中的消息框有时会出现，否则会出现在任务栏中

> ID：13006416
> 
> 赞同：0
> 
> 时间：2012-10-22T07:03:34.320
> 
> 标签：c#

目前在我的应用程序中，有时可以正确看到消息框，在某些情况下，在任务栏中看到不应该发生。

```
if (!flag)
{
   MessageBox.Show("Fileds Cannot be empty. Please follow the format", "Message");

   return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:53:44.407

听起来您可能需要设置 MessageBox 的 owner 属性，@Charlie 在这篇文章[C# / .NET messagebox is not modal中回答](https://stackoverflow.com/questions/1154181/c-net-messagebox-is-not-modal)

为此，请使用 MessageBox.Show(IWin32Window, String, String) 方法，详情请点击此处[http://msdn.microsoft.com/en-us/library/4y3c0fky.aspx](http://msdn.microsoft.com/en-us/library/4y3c0fky.aspx)

# eclipse - 玩 2 个 Java、play-authenticate 和 Eclipse JUnit 测试

> ID：13006419
> 
> 赞同：0
> 
> 时间：2012-10-22T07:03:43.367
> 
> 标签：eclipse, junit, playframework-2.0, play-authenticate

我有一个带有 play-authenticate 的新 Play 2 项目。我为 REST API 编写了一些简单的测试用例。测试在控制台上通过，但我不能让其中一些在 Eclipse 中通过。

```
@Test
public void testWithoutAuth() {
  running(testServer(3333), new Runnable() {
    @Override
    public void run() {
        Response response = WS.url("http://localhost:3333/secretarea").get().get();
        assertThat(response.getStatus()).isEqualTo(FORBIDDEN);
    }
  });
} 
```

此示例在控制台上通过，但在 Eclipse 中失败，响应错误代码为 500。看起来应用程序设置不正确（例如，我自己的 AuthProvider 未找到）。有没有人设法让这样的测试在 Eclipse 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:50:40.680

终于解决了这个问题。诀窍是使用自定义配置创建 FakeApplicatio。在我的情况下，设置是这样的：

```
@Test
public void testWithoutAuth() {
    List<String> plugins = new ArrayList<String>();
    plugins.add("be.objectify.deadbolt.DeadboltPlugin");
    plugins.add("service.MyUserServicePlugin");
    plugins.add("providers.MyUsernamePasswordAuthProvider");

    FakeApplication fa = fakeApplication(new HashMap<String,String>(), plugins);

    running(testServer(3333, fa), new Runnable() {
        @Override
        public void run() {
            Response response = WS.url("http://localhost:3333/secretarea").get().get();
            assertThat(response.getStatus()).isEqualTo(FORBIDDEN);
        }
    });
} 
```

# android - 广播接收器在索尼 xperia 4.0.4 的来电屏幕的后台显示活动

> ID：13006421
> 
> 赞同：0
> 
> 时间：2012-10-22T07:03:52.090
> 
> 标签：android, broadcastreceiver, call

我的`Broadcast`接收器通过接听来电打开活动，在*三星手机*上没问题，但在*索尼 xperia 4.0.4*上，活动就像启动屏幕一样，当我断开通话时，我的活动再次出现很长时间后，系统来电屏幕出现在我的活动中。

我该如何解决这个问题？

我已经开始`Activity`使用以下标志。

```
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    //i.addFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
    i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:11:29.957

来电时。呼叫屏幕活动开始并进入前台。所以请使用线程睡眠 2 到 3 秒并开始您的活动。

它将显示调用屏幕的前景。

# php - 文件处理程序 cron 作业需要睡眠才能无错误运行

> ID：13006431
> 
> 赞同：4
> 
> 时间：2012-10-22T07:04:48.900
> 
> 标签：php, file-io, fopen

以下代码每 36 小时随机中断一次。info.txt 的正确性是有保证的。一个简单的`print 'test';`或`sleep(1);`介于`$handle`和之间的`while`问题解决了这个问题，但为什么呢？

```
$handle = fopen("http://www.domain.do/info.txt", "r");
while (!feof($handle)) {
  // [do stuff]
}
fclose ($handle); 
```

代码由 cron 作业运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:40:19.700

添加 sleep() 或一些延迟将使 fopen 有时间从该位置检索文件......我假设“随机”效应可能是网络上的流量导致检索比平时稍长。

您可以尝试使用 cURL 来检索数据：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.domain.do/info.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch); 
```

`$output`将包含文件的内容，因此您需要将字符串拆分为一个数组，可能使用换行符作为分隔符......只是猜测不知道文件的内容:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:29:57.663

非常感谢。这项工作在短期内使用 curl 无错误。我也会长期检查它。7天后我会给你反馈。

# javascript - 在目标c中执行js

> ID：13006433
> 
> 赞同：1
> 
> 时间：2012-10-22T07:04:51.897
> 
> 标签：javascript, objective-c, uiwebview

我需要与代码[http://code.kwint.in/emoji/source/](http://code.kwint.in/emoji/source/)进行交流。我已经编写了代码来让 iPhone 表情符号进入网络视图（编辑器），但它不显示表情符号，除了带有问号的方框，表示没有图像。所以我找到了上面的链接。我如何与这个沟通。我有我的 js 文件。

```
 -(void)imageToTextViewForHome:(id)sender
{
UIButton *refrenceButtonForHome;
refrenceButtonForHome = sender;
int tag  = refrenceButtonForHome.tag;
NSLog(@"tag...%d",tag);
NSString *imageNameToPass = [NSString stringWithFormat:@"%@",[emoticonsArrayForHomeEmoji 
objectAtIndex:tag]];
NSString *path =[[NSBundle mainBundle] pathForResource:imageNameToPass ofType:@"png"];
NSLog(@"pathForImage..%@",path);
[webViewForEditing stringByEvaluatingJavaScriptFromString:[NSString 
stringWithFormat:@"document.execCommand('insertImage', false, '%@')", path]];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:35:01.960

一个 webview 可以运行 javascript，但我猜你不能直接返回一些东西。

看看下面的例子：

[http://will.thimbleby.net/script/](http://will.thimbleby.net/script/)

# windows - 找不到对象

> ID：13006434
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:05:03.057
> 
> 标签：windows, xampp

当我打开地址“http://localhost/phpmyadmin/”时出现此错误

> 找不到对象！
> 
> 在此服务器上找不到请求的 URL。引用页面上的链接似乎是错误的或过时的。请将该错误通知该页面的作者。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 错误 404 localhost Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7

我怎样才能解决这个问题？
我正在使用 Windows 7 home basic 和 xampp for Windows 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:49:22.113

您必须先安装 phpMyAdmin。请参阅[phpMyAdmin 网站](http://www.phpmyadmin.net/home_page/index.php)。

# ios - UILongPressGestureRecognizer 和 UIPanGestureRecognizer 组合

> ID：13006438
> 
> 赞同：0
> 
> 时间：2012-10-22T07:05:13.383
> 
> 标签：ios, touch, uigesturerecognizer, uipangesturerecognizer, uilongpressgesturerecogni

我正在`UILongPressGestureRecognizer`实施`UIPanGestureRecognizer`

`UIPanGestureRecognizer`应该从拖动开始，应该`UILongPressGestureRecognizer`从长按开始

不幸的是，当`UIPanGestureRecognizer`被拖动时也`UILongPressGestureRecognizer`被调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:11:32.933

这个 UIGestureRecognizerDelegate 方法完全符合我的要求：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

请参阅：[将 UILongPressGestureRecognizer 与 UIPanGestureRecognizer 结合使用](https://stackoverflow.com/questions/3492200/combining-a-uilongpressgesturerecognizer-with-a-uipangesturerecognizer)

# c# - 如何在正则表达式中设置 char '+' && '-'？

> ID：13006442
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:05:21.713
> 
> 标签：c#, .net

我有一个文本框。

我想在其中设置允许特殊字符。

例如，我想在索引 0 处插入一个 '+'|'-' 然后是多个数字

+12 , -324

我将此代码设置为数字

```
 Regex regex = new Regex("[^0-9]+"); 
```

如何只设置一个字符'+' || '-' 在它之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:16:07.143

如果您希望在框的末尾恰好有一个`+`或`-`，而不是其他任何地方，那么您的输入字符串必须与以下表达式*匹配。*

```
Regex regex = new Regex("^[0-9]+[+-]$"); 
```

同样，您的字符串必须与此*匹配*才能*有效*- 对于您的原始表达式，如果匹配，则字符串*无效。*

如果你想在盒子里放一个`+`或`-` *任何地方*，你可以使用以下内容：

```
Regex r = new Regex("^[0-9]+[+-][0-9]+$"); //requires digits before/after sign
Regex r = new Regex("^[0-9]+[+-][0-9]*$"); //requires digits before sign
Regex r = new Regex("^[0-9]*[+-][0-9]+$"); //requires digits after sign
Regex r = new Regex("^[0-9]*[+-][0-9]*$"); //doesn't require digits 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:07:27.557

比你想象的更简单：

```
Regex regex = new Regex("^[0-9+-]+$"); 
```

`-`如果您希望按字面意思理解，请确保它位于字符类的最后。

编辑：如果你想在开头允许一个 + 或 - ，而不是其他地方，试试这个：

```
Regex regex = new Regex("^[+-][0-9]+$"); 
```

# c# - 如何在 C# 中获取利率和银行同业拆借利率？

> ID：13006444
> 
> 赞同：9
> 
> 时间：2012-10-22T07:05:29.690
> 
> 标签：c#, csv, yahoo, finance, rates

有一个不错的[Yahoo-Managed](http://code.google.com/p/yahoo-finance-managed/)开源项目，允许从 Yahoo 获取股票价格、汇率、技术图表等。

不幸的是，雅虎不提供利率和银行同业拆借利率，例如 EURIBOR。

我找到了一个链接，允许将[EURIBOR](http://www.banque-france.fr/en/economics-statistics/rates/main-euro-area-interbank-market-rates.html)获取为 .csv（法国银行）。在美联储[网站上](http://www.federalreserve.gov/datadownload/Choose.aspx?rel=h15)，有一种方法可以获取他们的利率。

问题是：是否有任何 API 允许从一个地方获取利率（或包含从不同来源获取利率的过程的项目）？

**编辑：** 在谷歌上搜索此事后，我发现至少有 4 个或多或少符合要求的数据源。我希望这对其他人有帮助。

1.  [FRED](http://research.stlouisfed.org/fred2/) - 美联储经济数据。提供包含财务数据的数据系列的综合列表。收集来自不同来源（Eurostat、IMF 等）的数据。他们还有一个 运行良好的[API 。](http://api.stlouisfed.org/docs/fred/?utm_source=research&utm_medium=website&utm_campaign=data-tools)
2.  [欧盟统计局](http://epp.eurostat.ec.europa.eu/portal/page/portal/eurostat/home)- 提供健康、教育、财务和其他统计数据。它们没有 API，但是有一个[批量下载概念](http://epp.eurostat.ec.europa.eu/portal/page/portal/statistics/bulk_download)，让您能够以编程方式获取数据。该方案的顶部是包含所有可用数据表[的目录，其中包含对真实数据的引用。](http://epp.eurostat.ec.europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&file=table_of_contents.xml)
3.  [ECB](http://www.ecb.int/stats/services/sdw/html/index.en.html) - 另一个数据源，您可以在其中找到有趣的金融统计数据。他们提供基于 SDMX 的服务以编程方式获取数据。有一个很好的[指南](http://stats.ecb.int/stats/sdw/docu/sdw_webservices_publicversion.pdf)可以发现这些服务。
4.  [世界银行](http://data.worldbank.org/)- 提供健康、环境、金融和其他统计数据。有一个[API](http://data.worldbank.org/developers)来获取这些数据。

使用这些数据源，我能够创建一个通用接口来获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T09:11:53.160

[贸易通](http://tradelink.org)项目与各种数据源挂钩。

对于历史数据，您可以尝试[Quandl](http://www.quandl.com/ "匡德尔")。

# io - 在 Windows 商店应用程序中显示下载的图像时出现异常

> ID：13006449
> 
> 赞同：0
> 
> 时间：2012-10-22T07:06:07.047
> 
> 标签：io, stream, windows-runtime, windows-store-apps, winrt-async

嗨，我正在从以下代码下载图像

```
 HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, imageUri);
            HttpResponseMessage response = await http.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);
            var imageFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
            var fs = await imageFile.OpenAsync(FileAccessMode.ReadWrite);
            DataWriter writer = new DataWriter(fs.GetOutputStreamAt(0));
            writer.WriteBytes(await response.Content.ReadAsByteArrayAsync());
            await writer.StoreAsync();
            writer.DetachStream();
            await fs.FlushAsync();
            fs.Dispose(); 
```

但是当我尝试在运行下载代码后立即打开它时..借助以下代码并尝试将其设置为图像控件的源

```
 var imageFile = await ApplicationData.Current.LocalFolder.GetFileAsync(imageName);
            IRandomAccessStream stream = await imageFile.OpenAsync(FileAccessMode.Read);
            imageControl.SetSource(stream); 
```

它抛出以下异常

**访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）**

内部例外是：

**空值**

请让我知道我在什么时候做错了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:34:57.573

[在这里得到答案..](https://stackoverflow.com/questions/11168143/unauthorizedaccessexception-in-storagefile-openasync)只需要再添加一行..现在下载代码是

```
 HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, imageUri);
            HttpResponseMessage response = await http.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);
            var imageFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
            using (var fs = await imageFile.OpenAsync(FileAccessMode.ReadWrite))
            {
                var outStream = fs.GetOutputStreamAt(0);
                DataWriter writer = new DataWriter(outStream);
                writer.WriteBytes(await response.Content.ReadAsByteArrayAsync());
                await writer.StoreAsync();
                writer.DetachStream();
                await fs.FlushAsync();
                outStream.Dispose();
                fs.Dispose();
            } 
```

# android - 为什么 XML 不是用于 Android 编程中的 UI 的 HTML？

> ID：13006450
> 
> 赞同：6
> 
> 时间：2012-10-22T07:06:08.500
> 
> 标签：android, user-interface

为什么在 Android 编程中不能使用 HTML 来构建界面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T07:16:33.067

XML 使我们能够创建自定义标签。考虑到我们创建了一个自定义视图，我们可以从 xml 本身引用它们。所以 UI 与逻辑分离的想法保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:35:01.363

HTML 是一种旨在显示网页的标准。android XML 布局文件是旨在由 dalvik VM 解析的自定义配置文件。两个独立的世界。这里有一些不使用 HTML 来定义配置的好理由。

1.  HTML 格式不正确。解析是一种痛苦。没有模式检查。
2.  你将如何设计元素？CSS？
3.  让 CSS 跨多个浏览器工作已经够难的了。
4.  您将如何在 HTML 配置中引入自定义元素？

我可以继续。使用 HTML 配置本机 UI 是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:18:07.583

**可扩展**标记语言，可扩展部分使其更加通用。HTML 基本上是专门用于 Web 浏览器的 XML 一般概念的实现。

此外，对于创建布局的简单任务，它过于臃肿，因为它包含许多定义元素行为的标签和属性（即`method`，`onclick`等），而不仅仅是它们的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:28:12.417

我认为他们有几个原因：

*   当您分别拥有**布局**和**源代码**时，您可以分离您的应用程序逻辑。因此，许多 XML 文件可以与一段源代码绑定，并且平台（Android、Windows Phone 等）将根据例如：**屏幕密度**、**屏幕方向**等 自动选择适当的 XML 布局。
*   接下来是回答你的问题：为什么不是 html。**在我看来**，原因很少。最重要的是 XML 具有**严格的格式良好的结构，并且可以使用****XML Schema**来限制XML 。事实上，拥有 XML Schema 非常棒，因为它不仅限制了您的文档，而且还提供了一种XML 内部文件的**文档**。读到这里的人可能会想：HTML 也可以像 XHTML 规范一样具有严格的结构。是的，但 XML 就是为此而设计的。
*   下一个方面是 XML 在配置/布局（Java EE、XAML、Android XML 等）中作为 HTML 更受欢迎。这就像一个很好的练习。
*   事实上，您几乎可以用 HTML/JavaScript 构建您的应用程序，但您需要使用一些特定的框架来包装您的平台应用程序并将其转换为 Platfrom 独立 Web 应用程序（例如 Sencha 框架）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:17:02.183

我认为选择xml是因为xml标签是在android中根据UI框架类定义的，属性是对应UI框架中类的成员变量定义的。html 无法进行此映射。

# php - 检查null并在php中分配

> ID：13006453
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:06:28.773
> 
> 标签：php, ternary-operator

> **可能重复：**
> [我在哪里可以阅读有关使用 完成的条件？和 ：](https://stackoverflow.com/questions/4055355/where-can-i-read-about-conditionals-done-with-and)

我想在不使用 if else 或三元运算符的情况下执行以下操作：

if`$_GET['a']`不为 null 然后设置`$a= $_GET['a']`else 将其值设置为`"default"`。

我试过了`$a= $_GET['a'] || "default"`。但它不起作用。我记得在代码示例中看到过类似的东西，但我现在想不起来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:17:13.520

我认为三元 if*是*你最好的选择。

在这种情况下，我将使用[isset](http://php.net/manual/en/function.isset.php) check - 来确定密钥是否已设置且不为空：

```
$a = isset($_GET['a']) ? $_GET['a'] : "default" 
```

or 运算符`||`不能像 PHP 中那样进行空合并，但您可能已经在 J​​avaScript 中看到它，它可用于为第一个非 false 结果设置值：

例如

```
var a = get['a'] || 'default'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:14:10.250

[请参阅http://davidwalsh.name/php-ternary-examples](http://davidwalsh.name/php-ternary-examples)中的此 PHP 速记 if/else（三元）信息

并且

[http://davidwalsh.name/learning-ternary-operators-tips-tricks](http://davidwalsh.name/learning-ternary-operators-tips-tricks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:26:23.180

好吧，这里的人似乎没有费心阅读整个问题。

您编写的该语法适用于其他一些语言，但显然不适用于 php。如果您要在页面上大量使用这种验证，我认为您应该坚持使用三元运算符或为此编写一个函数作为快捷方式。

```
function GET($v, $default)
{
    return !isset($_GET[$v]) || empty($_GET[$v]) ? $default : $_GET[$v];
}

$a = GET("a", "default"); 
```

# cordova - 使用 PhoneGap 检查 GPS 是否启用

> ID：13006454
> 
> 赞同：20
> 
> 时间：2012-10-22T07:06:34.907
> 
> 标签：cordova, mobile

我正在使用 PhoneGap 构建一个应用程序。在使用 phonegap 的 Geolocation API 时，我意识到 API 超时有两个原因并抛出相同的错误： 1\. 如果用户设备上未启用 GPS 2\. 如果 GPS 已启用但无法获取位置用户（可能是多种原因，GPS 故障，天气不明等）

我在区分原因时遇到问题？关于如何做的任何想法？

我想知道是否有任何方法，我可以使用 Phonegap 检查用户设备上的 GPS 是否处于活动状态，以便我可以单独检查并将用户引导到通常放置 GEO 设置的设置窗口。不知道该怎么做？一个自定义的phonegap插件可能是？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-22T07:21:29.950

您可以在调用[getCurrentPosition时检查](http://docs.phonegap.com/en/2.1.0/cordova_geolocation_geolocation.md.html#geolocation.getCurrentPosition)[geolocationError的](http://docs.phonegap.com/en/2.1.0/cordova_geolocation_geolocation.md.html#geolocationError)[PositionError](http://docs.phonegap.com/en/2.1.0/cordova_geolocation_geolocation.md.html#PositionError)参数中的错误代码。我猜当 gps 未启用时它将是 PositionError.PERMISSION_DENIED，而当 gps 启用时它将是 PositionError.POSITION_UNAVAILABLE 或 PositionError.TIMEOUT 但还有其他问题。

请注意，这取决于平台。您可能不得不编写一条人为的错误消息，上面写着“无法获取当前位置。GPS 信号较弱或 GPS 已关闭”。

您可以尝试的一件事是调用 getCurrentPosition 时的超时非常小，比如 1 毫秒。如果它说权限被拒绝，您可以断定 gps 已禁用，如果超时，您可以假定 gps 已启用。我没有时间对此进行测试，您可以根据测试结果编辑此答案。

您可以尝试的另一件事是使用[android 的诊断 phonegap 插件](http://plugins.cordova.io/#/package/cordova.plugins.diagnostic)。您必须确保您也使用其他平台的插件，但它们也大多都在那里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-16T10:42:26.407

为了最优雅地处理这种情况，您可以使用[`cordova.plugins.diagnostic`](https://www.npmjs.com/package/cordova.plugins.diagnostic)检查 GPS 设置是否启用并（在 Android 6+ 上）检查应用程序是否具有运行时授权，以及（如果未启用）使用[`cordova-plugin-request-location-accuracy`](https://github.com/dpa99c/cordova-plugin-request-location-accuracy)通过本机自动打开 GPS对话框，而不需要用户通过设置页面手动打开它。但是，由于后者依赖于设备上最新的 Google Play 服务库，因此如果自动切换失败，最好回退到手动切换。

[![示例应用演示](../Images/b4d36899271b9559f34b48301afd9f61.png)](https://www.youtube.com/watch?v=pbNdnMDRstg)

首先将所需的插件添加到您的项目中：

```
cordova plugin add cordova.plugins.diagnostic --save
cordova plugin cordova-plugin-request-location-accuracy --save 
```

然后你会这样做：

```
function checkAvailability(){
    cordova.plugins.diagnostic.isGpsLocationAvailable(function(available){
        console.log("GPS location is " + (available ? "available" : "not available"));
        if(!available){
           checkAuthorization();
        }else{
            console.log("GPS location is ready to use");
        }
    }, function(error){
        console.error("The following error occurred: "+error);
    });
}

function checkAuthorization(){
    cordova.plugins.diagnostic.isLocationAuthorized(function(authorized){
        console.log("Location is " + (authorized ? "authorized" : "unauthorized"));
        if(authorized){
            checkDeviceSetting();
        }else{
            cordova.plugins.diagnostic.requestLocationAuthorization(function(status){
                switch(status){
                    case cordova.plugins.diagnostic.permissionStatus.GRANTED:
                        console.log("Permission granted");
                        checkDeviceSetting();
                        break;
                    case cordova.plugins.diagnostic.permissionStatus.DENIED:
                        console.log("Permission denied");
                        // User denied permission
                        break;
                    case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:
                        console.log("Permission permanently denied");
                        // User denied permission permanently
                        break;
                }
            }, function(error){
                console.error(error);
            });
        }
    }, function(error){
        console.error("The following error occurred: "+error);
    });
}

function checkDeviceSetting(){
    cordova.plugins.diagnostic.isGpsLocationEnabled(function(enabled){
        console.log("GPS location setting is " + (enabled ? "enabled" : "disabled"));
        if(!enabled){
            cordova.plugins.locationAccuracy.request(function (success){
                console.log("Successfully requested high accuracy location mode: "+success.message);
            }, function onRequestFailure(error){
                console.error("Accuracy request failed: error code="+error.code+"; error message="+error.message);
                if(error.code !== cordova.plugins.locationAccuracy.ERROR_USER_DISAGREED){
                    if(confirm("Failed to automatically set Location Mode to 'High Accuracy'. Would you like to switch to the Location Settings page and do this manually?")){
                        cordova.plugins.diagnostic.switchToLocationSettings();
                    }
                }
            }, cordova.plugins.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY);
        }
    }, function(error){
        console.error("The following error occurred: "+error);
    });
}

checkAvailability(); // start the check 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-28T16:54:49.827

我在某些设备上遇到了类似的问题。设法用下面的代码解决它：

```
var options = {maximumAge: 0, timeout: 10000, enableHighAccuracy:true};
navigator.geolocation.getCurrentPosition(onSuccess, onError, options); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-10T02:56:34.303

我在上面尝试了 DaveAlden 的解决方案，但它不起作用，部分原因是他调用的第一个函数是每个[插件文档](https://www.npmjs.com/package/cordova.plugins.diagnostic)`cordova.plugins.diagnostic.isGpsLocationAvailable()`的 Android-only 。

正如他所说，首先添加两个插件：

```
cordova plugin add cordova.plugins.diagnostic --save
cordova plugin cordova-plugin-request-location-accuracy --save 
```

然后添加以下函数：

```
// Checks to see if GPS is enabled AND if the app is authorized
checkEnabled(){
    cordova.plugins.diagnostic.isLocationAvailable(
      (available) => { onSuccess(available); },
      (error) => { goToSettings(error); }
    );
}

onSuccess(available) {
  if(available) { // do something };
  else goToSettings(available);
}

// Output error to console
// Prompt user to enable GPS, on OK switch to phone settings
goToSettings(error) {
  console.log("error: ", error);
  if(window.confirm("You need to enable location settings to use the geolocation feature.")) {
    cordova.plugins.diagnostic.switchToSettings();
  }
}

checkEnabled(); // Run check 
```

希望这可以帮助其他提出这个答案的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-21T15:34:50.257

使用 apache cordova 3 安卓平台

在 geoBroker.java 文件中的 execute 方法中，在 locationManager 实例化后添加以下操作。

```
if(action.equals("isGPSEnabled")){
            PluginResult result;
            if ( locationManager.isProviderEnabled( LocationManager.GPS_PROVIDER )){
                result = new PluginResult(PluginResult.Status.OK);
            }else{
                result = new PluginResult(PluginResult.Status.ERROR);
            }
            callbackContext.sendPluginResult(result);
        } 
```

然后在资产的 plugins 文件夹中的 geolocation.js 文件中添加公开新功能

```
 /**
     * Asynchronously checks if gps is enabled.
     *
     * @param {Function} successCallback    The function to call when gps is enabled.
     * @param {Function} errorCallback      The function to call when gps is not enabled. (OPTIONAL)
     */
    isGPSEnabled:function(successCallback, errorCallback){
        exec(successCallback, errorCallback, "Geolocation", "isGPSEnabled", []);
    } 
```

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-02T05:39:15.997

仅针对此处重定向的新用户，有一个名为[Cordova 诊断插件](https://www.npmjs.com/package/cordova.plugins.diagnostic#isgpslocationavailable)的插件（大约在 2014 年年中开始） ：

> 这个适用于 iOS、Android 和 Windows 10 Mobile 的 Cordova/Phonegap 插件用于管理设备设置，例如位置、蓝牙和 WiFi。它可以管理运行时权限、设备硬件和核心操作系统功能。[`ref`](https://www.npmjs.com/package/cordova.plugins.diagnostic#overview)

# php - 没有http或www的php中的URl模式匹配

> ID：13006460
> 
> 赞同：0
> 
> 时间：2012-10-22T07:07:21.450
> 
> 标签：php, regex, url

我有一个 html 文件，其中包含一些链接，例如

```
<a href="clash/football/a-vs-b">

<a href="clash/football/dsfdsfds-vs-erer"> 
```

我用这个`$regex_pattern = "/^[^.]+((\.[^.\/]{1,3}\b){1,2}).*$/";`

模式来查找这种类型的 URL。但不能得到这个。请有人帮助我。我需要匹配总标签`"<a href="clash/football/a-vs-b">"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:31:35.550

正则表达式描述对正则语言的操作，`html`不是正则语言！[使用DomDocument](http://php.net/manual/en/class.domdocument.php)会更好。

然后，您可以查看`getElementsByTagName`以获取所有`<a href>`标签。

# android - Android：如何使用 contentResolver 只更新多条记录的一列

> ID：13006463
> 
> 赞同：6
> 
> 时间：2012-10-22T07:07:31.310
> 
> 标签：android, android-contentresolver

如何使用内容解析器仅更新多条记录的一个特定列？

```
update(Uri uri, ContentValues values, String where, String[] selectionArgs) 
```

上述功能是否需要我重写 contentValues 对象中每条记录的所有值？当我使用这个函数时只有一个值，比如：

```
ContentValues value = new ContentValues();      
value.put (Voicemails.IS_READ, 1 );//mark as read

int iRowsUpdated=contentResolver.update(uri, value, null, null); 
```

然后我得到异常“无法更新URI：内容：//com.android.voicemail/voicemail？...不支持批量更新”，这可能是因为“where”设置为null；

一个教程提到“要将一组记录批量更新到内容提供程序，请调用 ContentResolver.update() 方法并更改要更改的列和值。”

但我无法做到这一点....我仍然不知道如何只更新所有记录的一列，基本上我需要将已读语音邮件标记为已读。

# iphone - 如何解决 iPhone 中的“Command /bin/sh failed with exit code 1”问题

> ID：13006464
> 
> 赞同：94
> 
> 时间：2012-10-22T07:07:36.663
> 
> 标签：iphone, shell, ios6, xcode4.5, build-error

我在我的应用程序中使用了一个可可静态库。当我编译我的库时，出现以下错误：

```
Shell Script invocation error:can't open input file:
/Users/sijuthomas/Library/Developer/Xcode/DerivedData/SCXML2-
    bbttehupryhijphhjdiemcytkvgy/Build/Products/Debug-iphonesimulator/
    libSCXMLParser.a (No such file or directory)
Command /bin/sh failed with exit code 1 
```

[![错误截图](../Images/2432b77d212a59c8d2533c4797028cd8.png)](https://i.stack.imgur.com/xAKI7.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2015-03-23T13:10:16.533

![目标 -> 构建阶段 -> 更新示例  ](../Images/4ac943f1b4da0a15eb73c744e7d409d2.png)

如果未选中，请单击 On Run 复选框。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2017-12-28T13:28:38.930

我遇到了这个问题，因为我拒绝了钥匙串访问，为了解决它，你需要打开钥匙串，然后点击屏幕右上角的锁再次锁定它，之后你可以存档，它会起作用

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-08-25T20:17:17.723

删除“派生数据”对我有用。

在 Xcode 中，转到 File > Workspace Settings > 单击 Derived Data 文件路径旁边的箭头 > 将“Derived Data”文件夹移动到垃圾箱。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-10-22T07:22:00.373

似乎您正在运行一个 shell 脚本，但它找不到您的特定文件。看看`Target -> Build-Phases -> RunScript`你是否正在运行脚本。

您可以检查脚本是否在构建输出中运行（在导航器面板中）。如果您的脚本做错了什么，构建阶段将停止。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-07-23T12:21:06.257

我有同样的问题解决了。使用以下步骤解决*Xcode 6.4 中的问题。*

1.  单击在导航*器窗口中**显示项目导航器*
**   现在*选择*导航器窗口下方的项目*   选择*目标**   选择*构建阶段*选项卡*   打开*运行脚本*下拉选项*   选择*仅在安装时运行脚本*复选框*

 *[![步骤截图](../Images/1982a93765a48fe514e7419b2bde3de7.png)](https://i.stack.imgur.com/y19I6.png)

现在，清理您的项目*（cmd+shift+k）*并构建您的项目。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-06-07T22:54:43.457

清理构建文件夹（Cmd + Shift + Alt + K）对我有用

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-27T08:49:17.477

1) 删除 pod 文件夹和 .xcworkspace 文件 2) 在终端中打开文件夹 3) 键入“pod install”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-22T07:14:13.370

您是否将 .a 库添加到 xcode projet ？（项目->构建阶段->将二进制文件与库链接->单击“+”->单击“添加其他”->选择您的库）

也许该库与模拟器不兼容，您是否尝试为 iDevice（不是模拟器）编译？

（我已经解决了第二个问题，我得到了一个无法与模拟器一起使用但使用真实设备编译的库......）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-28T09:24:16.790

在我的情况下，路径中有空间使脚本失败。如果您使用变量`$PROJECT_DIR`或`$TARGET_BUILD_DIR`然后替换它们`"$PROJECT_DIR"`或`"$TARGET_BUILD_DIR"`分别。添加引号后，我的脚本成功运行。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-25T19:08:16.373

对我来说，我的证书已过期。我创建了一个新证书。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-10T10:21:17.737

我尝试重新启动 Xcode (7)，但什么也没有（*您是否尝试过为我关闭并再次打开*iOS 开发 :-)）。然后我尝试重新启动我的盒子，并且成功了。

在我的情况下，将文件从一个位置复制到另一个位置时脚本失败。我认为这可能与 Finder 对某些文件夹的写入权限搞砸有关。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-20T07:22:24.233

对我来说，发生此错误是因为我在从源代码树中提取代码时将版本号从 1 更改为 1.0，并将内部版本号从 6 更改为 1.1。我只是将其改回并将内部版本号从 6 更改为 7，它工作正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-09T10:21:25.557

只需将您的脚本放在一个文件中，然后在命令行末尾使用**2>/dev/null运行该文件！**

这样，如果该命令有任何问题，它都不会停止您的 xcode 构建

在我的情况下，我只是运行一个命令来从连接的 iphone 上卸载我以前的应用程序副本，因此如果 iphone 不存在，它可能会出错。要解决它：

$`mobiledevice uninstall_app com.my.app 2>/dev/null`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-09T15:55:20.280

唯一对我有用的东西：

1) 使用 CleanMyMac 删除派生数据：System Junk -> Xcode Junk -> Xcode Derived Data

[使用 CleanMyMac 删除派生数据](https://i.stack.imgur.com/hybPP.png)

2）然后在Xcode中：产品->清洁

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-04T17:55:48.040

我做了以上所有事情，并在这个问题上花了一个小时。

尝试了上述所有方法并重新启动了 Xcode。

最后，重新启动计算机，一切正常！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-12T20:53:12.493

我将列出我所做的*对我不起作用的事情*，最后列出*了什么*

首先，仅在安装时运行脚本的接受答案不起作用。

删除派生数据不起作用。

什么工作：

1.  我在 Build Phases 添加了一个新的构建阶段

2.  新复制文件阶段

3.  将所选框架拖放到放置目标中

4.  将“目标”设置为框架

归功于[Kevin Le 的 Medium 帖子](https://medium.com/@kevinle/step-by-step-guide-on-using-carthage-dependency-manager-a29c15f9a1ac)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-02T07:13:25.750

对于那些不想取消选中该选项的人（例如使用 cocoapods），问题可能出在证书/密钥上。

Xcode（或您使用的任何工具，如命令行工具）需要能够使用钥匙串中的证书/密钥。为此打开钥匙串，找到要使用的证书（通常在`login`钥匙串上`My Certificates`），右键单击密钥，选择`Get Info`，单击`Access Control`选项卡并将应用程序添加到列表中。

如果这不起作用，请尝试解锁钥匙串。

另一个选项可以选择*允许所有应用程序访问此项目*而不是特定应用程序和/或将证书/密钥移动到`System`在该 Mac 上的所有用户帐户之间共享的钥匙串。

还要检查证书是否未过期。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-31T19:24:55.420

1）选项：[![请检查仅在安装时运行脚本......这个问题的答案是正确的](../Images/7b9af0fb6035237197a6f42f2da75c8f.png)](https://i.stack.imgur.com/WDNab.png)

2) 选项：pod 更新，清理派生数据，

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-24T14:17:53.227

就我而言，其中一个脚本（与 相关`SwiftGen`）在编译期间失败。

我通过删除`Pods`然后再次更新它们来解决问题。

1.  删除目录下有问题的pod`Pods`或使用`pod deintegrate`
2.  `pod install`使用或安装/更新 pod`pod update`

PS 有可能你的依赖是全局的并且不在 pod 中。在这种情况下，您也可以尝试重新安装该依赖项。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-07-22T15:54:06.940

如果您使用 Crashlytics 并遇到此问题，请阅读此内容...

`Command /bin/sh failed with exit code 1`我更具体地遇到了与上述相同的问题`[31merror: Could not fetch upload-symbols settings: An unknown error occurred fetching settings.[0m`

第一个解决方案（仅在安装时启用运行脚本）允许我在模拟器中构建我的目标，但我无法存档我的构建。

我通过在 firebase 上启用 Crashlytics 解决了这个存档问题。我仍然习惯于自动启用 Crashlytics 的 Fabric。一旦我在 firebase 控制台中为相应的 GoogleService-Info.plist 启用了 Crashlytics，我就能够存档而不会出现此错误。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-12-13T11:18:02.060

删除所有 pod 并重新安装。

脚步：

1.  评论所有 pod 并运行`pod install`
2.  取消注释所有 pod 并运行`pod install`*

# iphone - UIMenuController 未显示 UIPasteBoard 已清除 iPhone 应用程序？

> ID：13006467
> 
> 赞同：3
> 
> 时间：2012-10-22T07:07:48.283
> 
> 标签：iphone, ios, uilabel, uitextview, uimenucontroller

我在基于消息的 iPhone 应用程序中工作。在我的应用程序中看起来像 iMessage 原生 iOS 应用程序。`I made Bubbles with used UIImageView and UILabel. I made UILabel as clickable and showing Copy option. It is working fine when the message input UITextView is not in active.`

```
1\. I can show the "Copy" option when we clicking UILabel and the UITextView is not becomeFirstResponder.

2\. When the user clicking the MessageTextView (UITextView) from the bottom of the screen the UITextView becoming first responder and keyboard is showing now. In this scenario if the user clicking the messabe bubble (UILabel) the UIMenuItem showing "Paste" on the bubble instead of "Copy".

3\. If i click "Paste" from the bubble UIMenuItem already copied text will be pasting in UITextView. So the control fully in UITextView UIMenuController not activated in UILabel. So i cleared the text from UIPateBoard when the user clicking the Bubble (UILabel).

4\. Now the UIMenuController not showing up even [self becomeFirstResponder]; not becoming in UILabel class. 
```

原因是当 UITextView 处于 becomeFirstResponder 中时，控件完全在其中。不来 UILabel。你能帮我解决这个问题吗？

`How to show UIMenuItem "Copy" when the user clicking UILabel if the keyboard is in visible the control is in UITextView?`你能帮我解决这个问题吗？我在这个问题上花了两天时间。提前致谢。

![在此处输入图像描述](../Images/8d472f4b8158a34dacb33f6fbce71015.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:44:58.083

**可能是我错了。将此答案视为评论。**

我试图达到你想要做的事情。那也不行。我发现我无法同时访问`two views`。尤其是当我有任何看法`becomeFirstResponder`和`you cannot access menu items of other view`.

但是如果你这样尝试，你的代码可能会成功。

1）在`touchesBegan:`方法中，找到用户在你的UILabel中触摸。

2）如果发生这种情况，则显示带有类似按钮的自定义视图`copy,paste and select`。

# iis - 为什么在 IIS 中创建应用程序池时会创建新的 Windows 用户配置文件

> ID：13006470
> 
> 赞同：11
> 
> 时间：2012-10-22T07:07:54.653
> 
> 标签：iis, iis-7.5

我最近正在清理我的文件系统，并观察到在 c:\users* 目录中几乎没有我从未直接创建的用户。这应该具有在本地计算机上创建/登录的所有用户。我观察到这些用户名与我在 IIS 中创建的应用程序池的名称相同。

为了确认我在 IIS 中创建了一个新的应用程序池，然后观察了这个目录。它仍然不存在。后来我创建了一个新网站，分配了这个应用程序池并从浏览器访问了该网站，然后我看到一个新的用户配置文件，其中包含新应用程序池的名称。

问题是 - 为什么它为每个 IIS 应用程序池创建一个用户配置文件？是否绝对有必要，并且可以将其配置为不创建吗？会有什么坏处吗？我不记得在早期的 IIS 即 6.0 中见过这种情况。

我的环境 - Windows 7 64 位，IIS 7.5

我试图谷歌，但大多数链接告诉我如何使用应用程序池和东西配置用户/身份，但没有具体说明这些问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T02:08:55.820

这种行为是因为从 IIS 7 开始的新安全模型。

### 应用程序池标识从 IIS 7 开始

> 应用程序池标识允许您在唯一帐户下运行应用程序池，而无需创建和管理域或本地帐户。应用程序池帐户的名称对应于应用程序池的名称。

-[应用程序池标识 (2009)](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

主要原因是安全性，每个应用程序池都是相互隔离的。

### LoadUserProfile=true 创建用户配置文件文件夹

通过在我的机器上进行试验，我相信此设置负责创建文件夹。

将 LoadUserProfile 设置为**true**意味着 IIS 将为应用程序池标识加载用户配置文件。当应用程序实际启动时会发生这种情况，您可以通过创建一个新的应用程序池来测试它，如果设置为**false**，当您第一次访问该网站时，不应在 C:\Users 下创建新文件夹。

- [IIS 文档](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/processmodel)

根据文档 LoadUserProfile 默认情况下应该是**false**，尽管我注意到在 Win 7 机器上它可能被设置为**true**。您可以通过 IIS gui 更改此默认值：

![在此处输入图像描述](../Images/ba12a6845c37fa4fe5ddec001ccf524d.png)

# core-data - 在 CoreData 对象的 NSTableView 中拖放重新排序不起作用

> ID：13006475
> 
> 赞同：0
> 
> 时间：2012-10-22T07:08:22.147
> 
> 标签：core-data, drag-and-drop, nstableview

我正在尝试实现一个简单的表，我可以在其中将对象父对象放入用户可定义的顺序中。我将 parentTableView 绑定到 parentArrayController 并将 sortDescriptor 设置为键“order”，该表按“order”键的顺序显示父实体，一切正常。如果我尝试将一行拖放到新位置，则会在该行发生崩溃，将拖动的对象插入或添加到新位置：

```
[self.parentArrayController insertObjects:draggedObjects atArrangedObjectIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(row, [draggedObjects count])]]; 
```

或 [self.parentArrayController addObjects:draggedObjects];

我究竟做错了什么？

下面是 tableviewdelegate 的代码：

```
@implementation parentTableViewDelegate

@synthesize parentTableView;
@synthesize parentArrayController;

-(id)init{
    if (self = [super init]) {
        self.parentSortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES]];
    }
    return self;
}
- (void)awakeFromNib {
    [super awakeFromNib];
    // user interface preparation code

    [parentTableView registerForDraggedTypes:[NSArray arrayWithObject:[self.parentArrayController entityName]]];
    [parentTableView setDraggingSourceOperationMask:NSDragOperationMove forLocal:YES];
}

#pragma mark -
#pragma mark NSTableViewDataSource

- (BOOL)tableView:(NSTableView *)tv writeRowsWithIndexes:(NSIndexSet *)rowIndexes toPasteboard:(NSPasteboard*)pasteboard {
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:rowIndexes];
    [pasteboard declareTypes:[NSArray arrayWithObject:[self.parentArrayController entityName]] owner:self];
    [pasteboard setData:data forType:[self.parentArrayController entityName]];
    return YES;
}

- (NSDragOperation)tableView:(NSTableView*)tv validateDrop:(id <NSDraggingInfo>)info proposedRow:(int)row proposedDropOperation:(NSTableViewDropOperation)op {
    if ([info draggingSource] == parentTableView) {
        if (op == NSTableViewDropOn)
            [tv setDropRow:row dropOperation:NSTableViewDropAbove];
            return NSDragOperationMove;
    } else {
        return NSDragOperationNone;
    }
}

- (BOOL)tableView:(NSTableView *)aTableView
   acceptDrop:(id <NSDraggingInfo>)info
          row:(int)row
dropOperation:(NSTableViewDropOperation)operation {

    // Get object indexes from paste board
    NSData *data = [[info draggingPasteboard] dataForType:[self.parentArrayController entityName]];
    NSIndexSet *rowIndexes = [NSKeyedUnarchiver unarchiveObjectWithData:data];

    if (!rowIndexes) return NO;

    if (aTableView == self.parentTableView) {
        if ([info draggingSource] == self.parentTableView) {

            NSMutableArray *draggedObjects = [NSMutableArray array];
            [draggedObjects addObject:[[self.parentArrayController arrangedObjects] objectsAtIndexes:rowIndexes]];

            [self.parentArrayController  removeObjectsAtArrangedObjectIndexes:rowIndexes];

            // Insert dragged objects at row
            if (row < [[self.parentArrayController arrangedObjects]count]) {
                [self.parentArrayController insertObjects:draggedObjects atArrangedObjectIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(row, [draggedObjects count])]];
            }
            else {
                [self.parentArrayController addObjects:draggedObjects];
            }

            // Re-order objects
             int    i;
             for (i = 0; i < [[self.parentArrayController arrangedObjects] count]; i++) {
                 [[[self.parentArrayController arrangedObjects] objectAtIndex:i] setValue:[NSNumber numberWithInt:i] forKey:@"order"];
         }

            [self.parentArrayController rearrangeObjects];
            return YES;
        }
    }
    return NO;
}

@end 
```

这是崩溃：

```
[<__NSArrayI 0x101b197b0> addObserver:forKeyPath:options:context:] is not supported. Key path: order
2012-10-22 08:52:40.630 OrderedSetTest[29950:303] (
0   CoreFoundation                      0x00007fff89e570a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff8dfa33f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff89e56e7c +[NSException raise:format:] + 204
3   Foundation                          0x00007fff8f0f7287 -[NSArray(NSKeyValueObserverRegistration) addObserver:forKeyPath:options:context:] + 76
4   AppKit                              0x00007fff8c622eea -[_NSModelObservingTracker _registerOrUnregister:observerNotificationsForModelObject:] + 200
5   AppKit                              0x00007fff8c622c18 -[_NSModelObservingTracker startObservingModelObjectAtReferenceIndex:] + 177
6   AppKit                              0x00007fff8c70df7d -[NSArrayController _insertObject:atArrangedObjectIndex:objectHandler:] + 593
7   OrderedSetTest                      0x0000000100004bbf -[parentTableViewDelegate tableView:acceptDrop:row:dropOperation:] + 1263
8   AppKit                              0x00007fff8c9baa0e -[NSTableView performDragOperation:] + 215
9   AppKit                              0x00007fff8c8079bf NSCoreDragReceiveMessageProc + 1651
10  HIServices                          0x00007fff8b82046a DoMultipartDropMessage + 301
11  HIServices                          0x00007fff8b820135 DoDropMessage + 49
12  HIServices                          0x00007fff8b8200d7 SendDropMessage + 41
13  HIServices                          0x00007fff8b8237c8 DragInApplication + 654
14  HIServices                          0x00007fff8b822c69 CoreDragStartDragging + 519
15  AppKit                              0x00007fff8c808190 -[NSCoreDragManager _dragUntilMouseUp:accepted:] + 881
16  AppKit                              0x00007fff8c8094ba -[NSCoreDragManager dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:] + 1455
17  AppKit                              0x00007fff8cab9040 -[NSWindow(NSDrag) dragImage:at:offset:event:pasteboard:source:slideBack:] + 133
18  AppKit                              0x00007fff8c9b91e0 -[NSTableView _doImageDragUsingRowsWithIndexes:event:pasteboard:source:slideBack:startRow:] + 570
19  AppKit                              0x00007fff8c9ba11d -[NSTableView _performClassicDragOfIndexes:hitRow:event:] + 358
20  AppKit                              0x00007fff8c9ba391 -[NSTableView _performDragFromMouseDown:] + 509
21  AppKit                              0x00007fff8c9ac4b2 -[NSTableView mouseDown:] + 707
22  AppKit                              0x00007fff8c59b60e -[NSWindow sendEvent:] + 6853
23  AppKit                              0x00007fff8c597744 -[NSApplication sendEvent:] + 5761
24  AppKit                              0x00007fff8c4ad2fa -[NSApplication run] + 636
25  AppKit                              0x00007fff8c451cb6 NSApplicationMain + 869
26  OrderedSetTest                      0x0000000100001da2 main + 34
27  OrderedSetTest                      0x0000000100001d74 start + 52 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:36:29.810

问题是，arrayController 的排列对象是代理对象，我必须从上下文中检索托管对象

工作代码如下：

```
#import "GFParentTableViewDelegate.h"

@implementation GFParentTableViewDelegate

-(id)init{
    if (self = [super init]) {
        self.parentSortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES]];
    }
    return self;
}

- (void)awakeFromNib {
    [super awakeFromNib];

    [self.parentTableView registerForDraggedTypes:[NSArray arrayWithObject:[self.parentArrayController entityName]]];
    [self.parentTableView setDraggingSourceOperationMask:NSDragOperationMove forLocal:YES];
}

#pragma mark -
#pragma mark NSTableViewDataSource

- (BOOL)tableView:(NSTableView *)tableView writeRowsWithIndexes:(NSIndexSet *)rowIndexes toPasteboard:(NSPasteboard *)pboard{
    // Get array controller
    NSDictionary *bindingInfo = [tableView infoForBinding:NSContentBinding];
    NSArrayController *arrayController = [bindingInfo valueForKey:NSObservedObjectKey];

    if (!arrayController) {
        return NO;
    }
    [pboard declareTypes:[NSArray arrayWithObject:[arrayController entityName]] owner:self];

    // Collect URI representation of managed objects
    NSMutableArray *objectURIs = [NSMutableArray array];
    for (id objProxy in [[arrayController arrangedObjects] objectsAtIndexes:rowIndexes]) {
        [objectURIs addObject:[[objProxy objectID] URIRepresentation]];
    }

    // Set them to paste board
    [pboard setData:[NSArchiver archivedDataWithRootObject:objectURIs] forType:[arrayController entityName]];
     NSLog(@"Wrote %ld objects of type: %@ to Pasteboard",[objectURIs count],[arrayController entityName]);
     return YES;
}

- (NSDragOperation)tableView:(NSTableView*)tableView
                validateDrop:(id <NSDraggingInfo>)info
                 proposedRow:(NSInteger)row
       proposedDropOperation:(NSTableViewDropOperation)dropOperation {

    if ([info draggingSource] == self.parentTableView) {
        if (dropOperation == NSTableViewDropOn){
            [tableView setDropRow:row dropOperation:NSTableViewDropAbove];
        }
        return NSDragOperationMove;
    } else {
        return NSDragOperationNone;
    }
}

- (BOOL)tableView:(NSTableView *)tableView
       acceptDrop:(id <NSDraggingInfo>)info
              row:(NSInteger)row
    dropOperation:(NSTableViewDropOperation)operation {

    // Get array controller
    NSDictionary *bindingInfo = [tableView infoForBinding:@"content"];
    NSArrayController *arrayController = [bindingInfo valueForKey:NSObservedObjectKey];

    // Get object URIs from paste board
    NSData *data = [[info draggingPasteboard] dataForType:[arrayController entityName]];
    NSArray *objectURIs = [NSUnarchiver unarchiveObjectWithData:data];

    if (!objectURIs) return NO;

    // Get managed object context and persistent store coordinator
    NSManagedObjectContext *context = [[NSApp delegate] managedObjectContext];
    NSPersistentStoreCoordinator *coordinator = [context persistentStoreCoordinator];

    // Collect manged objects with URIs
    NSMutableArray *draggedObjects = [NSMutableArray array];

    for (NSURL* objectURI in objectURIs) {
        // Get managed object
        NSManagedObjectID*  objectID;
        NSManagedObject*    object;
        objectID = [coordinator managedObjectIDForURIRepresentation:objectURI];
        object = [context objectWithID:objectID];
        if (!object) continue;

        [draggedObjects addObject:object];
    }

    // Get managed objects
    NSMutableArray *allObjects = [NSMutableArray arrayWithArray:[arrayController arrangedObjects]];;

    if (!allObjects || [allObjects count] == 0) return NO;

    // Replace dragged objects with null objects as placeholder to prevent old order
    for (NSManagedObject *obj in draggedObjects) {
        NSUInteger index = [allOobjects indexOfObject:obj];
        if (index == NSNotFound) {
            continue;
        }
        [allObjects replaceObjectAtIndex:index withObject:[NSNull null]];
    }

    // Insert dragged objects at row
    if (row < [allObjects count]) {
        [allObjects insertObjects:draggedObjects atIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(row, [draggedObjects count])]];
    }
    else {
        [allObjects addObjectsFromArray:draggedObjects];
    }

    // Remove old null objects
    [allObjects removeObject:[NSNull null]];

    // Re-order objects
     int    i;
     for (i = 0; i < [allObjects count]; i++) {
         NSManagedObject *object = [allObjects objectAtIndex:i];
         [object setValue:[NSNumber numberWithInt:i] forKey:@"order"];
     }

    // Reload data
    [arrayController rearrangeObjects];
    return YES;
}

@end 
```

# linux - weblogic server 11g 内存不足问题

> ID：13006476
> 
> 赞同：3
> 
> 时间：2012-10-22T07:08:23.683
> 
> 标签：linux, weblogic, oracle-adf, weblogic11g

我正在使用安装了 JRockit 的 weblogic 10.3.6。我正在使用 64 位系统和 Linux 作为操作系统。我在其中安装了一个 adf 应用程序。只有几个用户使用该应用程序。但是安装 WLS 的服务器机器每周都会出现故障，导致内存不足。所以我们必须每周重新启动它。当我浏览时，我发现通过调整堆大小和其他内存参数可以使 WebLogic 更加稳定。

示例：--Xms256m --Xmx512m MaxPermsize 为 128m

我的问题是

1.  这些论据是什么？

2.  这些论点如何相互关联？

3.  如何确定这些参数的值？

4.  内存不足问题的其他原因是什么？

谢谢，

拉克什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:35:02.833

Xms 和 Xmx 是 Java 程序可以使用的最小和最大堆（主要是存储对象的位置）大小。

在您的情况下，java 程序是部署应用程序的 WebLogic 服务器。默认情况下，WebLogic 服务器设置的 Xms 和 Xmx 值为：256m 和 512m。

看起来您的应用程序需要超过 512MB 的堆内存。所以你需要增加最大堆大小（Xmx）来避免频繁的 OutOfMemory 错误。

Xmx 的新值可以是 1024m 或更大。您（或性能团队，如果有的话）必须对您的应用程序和不同的 Xmx 值进行严格的性能、可扩展性、可靠性测试，以确定最适合应用程序的方法。

可以在脚本级别设置内存参数（即 Xms、Xmx）（如果您使用 startWebLogic.sh/startManagedWebLogic.sh 脚本来启动服务器）。

脚本级别更改：

*   打开 setDomainEnv.sh 并搜索“IF USER_MEM_ARGS 环境变量已设置”并在下一行插入`USER_MEM_ARGS="-Xms256m -Xmx1024m"`
*   您甚至可以通过使用`SERVER_NAME`保存正在启动的服务器的变量来在服务器之间更改此设置。例如，要将此设置仅用于非管理服务器，请插入`[ "${SERVER_NAME}" != "AdminServer" ] && USER_MEM_ARGS="-Xms256m -Xmx1024m"`

控制台更改（仅当您使用管理控制台启动托管服务器时）：

*   登录到AdminConsole–>Environments—>Servers—>—>Configuration—>ServerStart—>Arguments:(TextArea)。
*   输入：`-Xms256m -Xmx1024m`并保存。

哦，顺便说一句，JRockit[没有](http://middlewaremagic.com/weblogic/?p=2908)任何 PermSize 的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:01:08.667

获得[JVM 参数](http://javarevisited.blogspot.de/2011/11/hotspot-jvm-options-java-examples.html)的基本知识。

简单地将几个 JVM 内存参数设置为更高的值无济于事，只会将错误转移到未来。您必须分析应用程序才能找出真正的问题。JRockit 带有一个非常好的内存分析工具[Mission Control](http://www.oracle.com/technetwork/middleware/jrockit/mission-control/index.html)。观看[演示](http://download.oracle.com/otndocs/products/jrockit/missioncontrol/demos/jrmc_basics/JRockitMissionControlBasics.html)，这将有助于找出应用程序的哪个部分导致内存不足错误。

# powershell - Powershell 中的性能计数器 API 调用错误

> ID：13006479
> 
> 赞同：3
> 
> 时间：2012-10-22T07:08:30.660
> 
> 标签：powershell, counter, performance-monitor

我想通过 Powershell 从 Perfmon 获取有关性能的特定信息，并使用另一个服务运行的脚本将其写入 .csv 文件。我知道 Powershell 可以给出一些有趣的错误信息，因此我想听听你们中是否有人能弄清楚我到底做错了什么。

我试图使工作的代码看起来像这样：

```
$date = (Get-Date).ToShortDateString()
Get-Counter
    $gc = @("\Memory\% Committed Bytes In Use",
            "\Memory\Available MBytes",
            "\Network Interface(*)\Current Bandwith",
            "\Network Interface(*)\Packets Recieved/sec",
            "\Network Interface(*)\Packets Sent/sec",
            "PhysicalDisk(_Total)\Disk Write Bytes/sec",
            "PhysicalDisk(_Total)\Disk Read Bytes/sec",
            "Processor(_Total)\% Processor Time",
            "Processor(_Total)\% Idle Time")
Get-Counter -counter $gc -SampleInterval 2 -MaxSamples 8 | export-counter -path C:\PerfMon2-$date.csv -FileFormat csv 
```

出现这样的错误：

```
Get-Counter : Internal performance counter API call failed. Error: c0000bb9.
At C:\Users\jenstmar\Desktop\Nuværende Projekter\Perfmon.ps1:13 char:12
+ Get-Counter <<<<  -counter $gc -SampleInterval 2 -MaxSamples 1 | export-counter -path C:\PerfMon2-$date.csv -FileFormat cs
v
    + CategoryInfo          : InvalidResult: (:) [Get-Counter], Exception
    + FullyQualifiedErrorId : CounterApiError,Microsoft.PowerShell.Commands.GetCounterCommand 
```

然而，如果我选择性能计数器类别而不是细节，它会起作用。一个例子是这样的：

```
$date = (Get-Date).ToShortDateString()
    Get-counter 
        $gc = (Get-Counter -listset "Network Interface").paths 
        $gc += (Get-Counter -listset "Processor").paths 
        $gc += (Get-Counter -ListSet "Processor Information").paths
        $gc += (Get-Counter -listSet "memory").paths
        $gc += (Get-Counter -listSet "PhysicalDisk").paths
    get-counter -counter $gc -SampleInterval 2 -MaxSamples 8 | export-counter -path C:\PerfMon-$date.csv -FileFormat csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:58:05.060

这是有效的代码：

```
Get-Counter
$gc =   '\Memory\% Committed Bytes In Use',
        '\Memory\Available MBytes',
        '\Network Interface(`*)\Current Bandwith',
        '\Network Interface(`*)\Packets Recieved/sec',
        '\Network Interface(`*)\Packets Sent/sec',
        "\PhysicalDisk(_Total)\Disk Write Bytes/sec"
  "\PhysicalDisk(_Total)\Disk Read Bytes/sec",
        "\Processor(_Total)\% Processor Time",
        "\Processor(_Total)\% Idle Time"
Get-Counter -counter $gc -SampleInterval 2 -MaxSamples 8 
```

我不得不逃避`*`符号

# iphone - 局部变量和成员变量在 Objective C 中的行为 - IOS

> ID：13006483
> 
> 赞同：1
> 
> 时间：2012-10-22T07:08:41.183
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我不清楚Objective C如何处理局部变量和成员变量，因为我是新手。考虑我在这样的函数中创建一个视图......

```
fun () {
   new_class *var = [new_class alloc] init]

   // some code to push the view here...
} 
```

这里一切正常，现在我的问题是 var 是一个局部变量，当函数范围结束时，它会死吗？如果当我在其中执行某些操作时视图如何正常工作...

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:09:55.717

*指针* 将`var`超出范围并被“删除”，但它指向的*对象*在稍后释放（手动或通过 ARC，如果启用）之前不会被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:12:33.257

如果没有其他对象指向它，则 var 应该是释放的。事情是：

```
if it dies how the view is working properly when I am doing some action in it 
```

例如，如果您的“var”是一个`UIView`，而您`[self.view addSubview:var]`，现在您有两个对象指向它：`*var`和您的`self.view`，这就是一切正常的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:12:21.280

不，它不会死。该变量的作用域是函数的本地变量，因此编译器不会让您访问`var`fun() 方法之外的内容，但是您会出现内存泄漏（假设没有 ARC）

您已经分配了内存，但还没有释放它。

您可以手动释放它，或者使用 AutoReleasePool 并在池耗尽时释放它。

在较新版本的 IOS 中，Apple 增加了对自动引用计数 (ARC) 的支持，编译器将为`[obj release];`您添加语句。

从评论：

如果您有一个放置在堆栈上的对象，并且您稍后想要释放它。当您弹出 UIView 时，将返回指向该视图的指针。如果将其分配给某个局部变量，则可以在准备好时释放它：

```
UIView * myView = [someViewHandler popView]; 
[myView release]; myView = nil; 
```

# directx - HLSL 从纹理位置获取值

> ID：13006486
> 
> 赞同：3
> 
> 时间：2012-10-22T07:08:49.843
> 
> 标签：directx, hlsl, directx-9

我已经将一些值映射到我的 alpha 通道上的纹理中。实际上我使用我的纹理作为 2Darray。我需要的是一种读取地图位置的alpha值的方法，例如[4] [5]（代表x和y）

我需要像素着色器中可用的返回值。有没有办法做到这一点？

我用的是DX9。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:25:31.370

您想为整个像素着色器使用 [4][5] (x,y) 处的纹素吗？如果这是您的问题，您可以预先计算顶点着色器上的坐标并将其传递给每个顶点，然后使用该 uv 线进行采样。这样它就不会被插值。（或者它会，但它只有一个值可以插值）

除此之外，您可能必须更多地说明您要达到的目标。你用它做什么？什么时候会出现，你用它做什么网格？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:27:52.357

Texture2DArray 是着色器模型 4 的东西。我不相信你在 dx9 上使用它。

如果您使用的是着色器模型 4，则只需使用函数 Load(4, 5)。

否则，对于 sm1,2,3，您可以将所需的数字（例如 4.0f 和 5.0）作为正常的 texcoord 数据放入您的顶点。然后让像素着色器按纹理大小对其进行缩放。

```
struct VertexInput {
    float4 pos : POSITION;
    float2 uv : TEXCOORD0; //0.0, 1.0, 2.0, 3.0, 4.0 etc
};

struct PixelInput {
    float4  position : POSITION;
    float2  uv : TEXCOORD0;
};

PixelInput vsTex(VertexInput vtx) 
{
    PixelInput output;
    float4 pos = vtx.pos;
    output.position = mul(pos, MatWorld);
    output.position = mul(output.position, MatView);
    output.position = mul(output.position, MatProj);

    output.uv = vtx.uv;

    return output;
}

float4 PixelShader(PixelInput input) : SV_Target
{
    float coords = pix.uv / float2(TEX_WIDTH, TEX_HEIGHT);
    return tex = tex2D(mySampler, coords);
} 
```

其中 TEX_WIDTH、TEX_HEIGHT 是通过 D3DXCompileShader 的 'defines' 参数传入的。和

或者：只需在软件中执行 4.0f/tex_width 和 5.0/tex_height 并将该数字（将在 [0.0f,1.0f] 之间传递给像素着色器）

# extjs4 - Ext JS 4.1 - 隐藏后不显示窗口

> ID：13006487
> 
> 赞同：0
> 
> 时间：2012-10-22T07:08:52.947
> 
> 标签：extjs4, extjs4.1, extjs-mvc

隐藏后，我无法显示定义类级别的窗口。我需要在必要时使用显示和隐藏它。

这是我到目前为止所尝试的：

* * *

**isCapsLock**实用程序功能，用于大写锁定开/关处理：

```
function(e) {

    e = (e) ? e : window.event;

    var charCode = false;
    if (e.which) {
        charCode = e.which;
    } else if (e.keyCode) {
        charCode = e.keyCode;
    }

    var shifton = false;
    if (e.shiftKey) {
        shifton = e.shiftKey;
    } else if (e.modifiers) {
        shifton = !!(e.modifiers & 4);
    }

    if (charCode >= 97 && charCode <= 122 && shifton) {
        return true;
    }

    if (charCode >= 65 && charCode <= 90 && !shifton) {
        return true;
    }

    return false;

}

Ext.define('MyApp.controller.LoginController', {
    extend      : 'Ext.app.Controller',
    views       : [ 'notification.CapsLockNotification' ],
    refs            : [{
       ref      : 'capsLockNotification',
       selector: 'capslocknotification'
    }],
    init        : function() {
             this.capsLockNotification = Ext.widget('capslocknotification');
             this.control({
                  'loginform #password' : {
                      keypress    : this.handleCapsLock
                   }
                 // control logic goes here
             });
    },
    handleCapsLock : function(field, eOpts) {
        var win = this.getCapsLockNotification();
        if(ExtUtil.isCapsLock(eOpts)) {
            win.show();
        } else {
            win.hide();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:26:26.247

检查选择器是否返回正确的组件。使 var win 全局化： handleCapsLock : function(field, eOpts) { win = this.getCapsLockNotification(); if(ExtUtil.isCapsLock(eOpts)) { win.show(); } 其他 { win.hide(); 并在 firefox 上打开 firebug 控制台或在 Chrome 上打开开发者工具控制台（均使用 CTRL + SHIFT + J）在控制台中写入：console.info(win); console.info(win.$className); 检查 arenot *undefined*或*null*以及类名是否正确

# apache-flex - 将文本字段值从一个 mxml 文件传递 到另一个

> ID：13006492
> 
> 赞同：0
> 
> 时间：2012-10-22T07:09:13.820
> 
> 标签：apache-flex

我有以下代码将数据从 mxml 文件传递​​到 servlet，效果很好
我创建了 mxml 文件，其最重要的代码如下：-
`<fx:Script>`
`<![CDATA[`
`public function abc():void`
`{`
`var request:URLRequest = new URLRequest("Srvlt");`
`var variables:URLVariables = new URLVariables();`
`variables.fn = fn.text;`
`variables.ln = ln.text;`
`variables.ea = ea.text;`
`variables.pw = pw.text;`
`request.data = variables;`
`request.method = "POST";`
`navigateToURL(request,'_self');`
`}`
`]]>`
`</fx:Script>`
这是文件的脚本代码，主要代码如下：-
`<s:layout>`
`<s:VerticalLayout/>`
`</s:layout>`
`<s:Form>`
`<s:layout>`
`<s:FormLayout gap="5"/>`
`</s:layout>`
`<s:FormItem label="First Name : ">`
`<s:TextInput id="fn" />`
`</s:FormItem>`
`<s:FormItem label="Last Name : ">`
`<s:TextInput id="ln" />`
`</s:FormItem>`
`<s:FormItem label="Email Address :">`
`<s:TextInput id="ea"/>`
`</s:FormItem>`
`<s:FormItem label="Password :">`
`<s:TextInput id="pw" displayAsPassword="true" />`
`</s:FormItem>`
`<s:FormItem>`
我是非常能够将这些文本字段的数据从 mxml 文件接收到 servlet，但不知道将它们传递给另一个 mxml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:51:30.887

1.  最优雅的方式。使用任何 MVC 框架，例如 Robotlegs。

2.  使用自定义事件调度。

3.  （快速但不是“应该如何”）数据绑定。这是示例：

`<s:TextInput id="sourceInput />`

`<s:TextInput text="{sourceInput.text} />`

# java - 在 Mule 表达式语言中使用导入的 Java 类

> ID：13006497
> 
> 赞同：1
> 
> 时间：2012-10-22T07:09:30.280
> 
> 标签：java, expression, mule

我正在尝试使用通过 Mule 的表达式语言 (MEL) 导入的 Java.lang.string 中的 .length 来查找长度并在选择运算符中使用它。我认为的问题是类型不匹配，但不知道如何隐藏我所拥有的，所以我能够找到长度。

我正在公开一个 Web 服务并尝试在选择的端点上使用 POJO 中的 ID。基本我想要 payload.bookID.length > 10。所以如果 ID 大于 10，我可以路由到一项服务（谷歌），否则路由到 UPC

目前我得到

> 执行表达式“payload.bookid.length > 10”失败。（org.mule.api.expression.ExpressionRuntimeException）。消息负载类型：BookLookupService$Book
> 原因：[错误：无法访问：长度；在课堂上：java.lang.String] [Near : {... Unknown ....}]

包括配置文件的第一部分和相关的 java 文件。我对流程有进一步的疑问，但不知道如何发布数据映射器以便人们可以使用它们。如果有人对此也有提示。

谢谢！

```
 <?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:data-mapper="http://www.mulesoft.org/schema/mule/ee/data-mapper"
    xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml"
    xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns:jersey="http://www.mulesoft.org/schema/mule/jersey"
    xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.3.1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/ee/data-mapper http://www.mulesoft.org/schema/mule/ee/data-mapper/current/mule-data-mapper.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd ">
    <mulexml:namespace-manager
        includeConfigNamespaces="true">
        <mulexml:namespace prefix="soapenv" uri="http://schemas.xmlsoap.org/soap/envelope/"/>
        <mulexml:namespace prefix="cas" uri="http://case2.com/"/>
        <mulexml:namespace prefix="cas1" uri="http://case2.com/"/>
    </mulexml:namespace-manager>
    <data-mapper:config name="json_to_pojo"
        transformationGraphPath="json_to_pojo.grf" doc:name="DataMapper" />
    <data-mapper:config name="google_out_to_pojo" transformationGraphPath="google_out_to_pojo.grf" doc:name="google_out_to_pojo"/>
    <data-mapper:config name="google_out" transformationGraphPath="google_out.grf" doc:name="google_out"/>

    <flow name="case2Flow1" doc:name="case2Flow1">
        <http:inbound-endpoint exchange-pattern="request-response"
            address="http://localhost:8081/Case2" doc:name="HTTP"></http:inbound-endpoint>
        <cxf:simple-service serviceClass="com.case2.BookLookupService"
            doc:name="SOAP" />
        <component class="com.case2.BookLookupServiceImpl" doc:name="Java" />
        <logger
            message="Incoming payload is: #[payload]
Book ID is : #[payload.bookid]"
            level="INFO" doc:name="Logger" />
        <choice doc:name="Choice">
            <when expression="payload.bookid.length > 10">
                <flow-ref name="googleISBNFlow2" doc:name="Google" />
            </when>
        </choice>
    </flow>

</mule> 
```

爪哇

```
package com.case2;

public interface BookLookupService
{
public static class BookLookup
{
    private String bookid;

    public String getBookid()
    {
        return bookid;
    }

    public void setBookid(final String bookid)
    {
        this.bookid = bookid;
    }
}

public static class Book
{
    private String bookid, name, imageurl;

    public String getBookid()
    {
        return bookid;
    }

    public void setBookid(final String bookid)
    {
        this.bookid = bookid;
    }

    public String getName()
    {
        return name;
    }

    public void setName(final String name)
    {
        this.name = name;
    }

    public String getImageURL()
    {
        return imageurl;
    }

    public void setImageURL(final String imageurl)
    {
        this.imageurl = imageurl;
    }

}

Book lookup(final BookLookup bookLookup);
}

package com.case2;

public class BookLookupServiceImpl implements BookLookupService
{
    public Book lookup(final BookLookup bookLookup)
    {
        final Book book = new Book();
        book.setName("LOTR");
        book.setBookid(bookLookup.getBookid());
        return book;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:08:58.787

genjosanzo 在这两个方面都是正确的（错误的访问`getBookid()`和 DataMapper EE 支持），除了正确的 MEL 表达式是：

```
<when expression="#[message.payload.bookid.length() > 10]"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:59:18.953

您遇到的问题似乎与您编写 when 表达式的方式有关。

它应该如下所示：

```
<when expression="#[payload.bookid.length() > 10]"> 
```

根据作为 EE 功能的数据映射器问题，我建议您直接联系 MuleSoft

# c# - 测量 ASP.NET 网站服务器端执行时间

> ID：13006499
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:09:33.617
> 
> 标签：c#, asp.net, performance, iis, iis-7.5

我在托管 IIS 7.5 的 Windows 上托管了一个网站。如何测量服务器端 (C#) 执行时间？.. 是否可以在没有 IIS 的情况下获得它？

我需要一些工具、软件或在线工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:13:20.137

[是的，您可以通过Stopwatch](http://code.google.com/p/nprof/)类测量服务器端的执行时间。

> 秒表测量经过的时间。它对于代码优化中的微基准测试很有用。它可以执行例行和持续的性能监控。System.Diagnostics 中的 Stopwatch 类型在许多情况下都很有用。

您还可以[在此处找到其用法的一些示例](http://chimpswithkeyboards.com/projects/nprofiler/)

它使用比`DateTime.Now`.

您还可以查看这些相关链接：

[Environment.TickCount 与 DateTime.Now](https://stackoverflow.com/questions/243351/environment-tickcount-vs-datetime-now)

[DateTime.Now 是衡量函数性能的最佳方法吗？](https://stackoverflow.com/questions/28637/is-datetime-now-the-best-way-to-measure-a-functions-performance)

`DateTime`可能足以精确到第二个，但我会推荐除此之外的任何东西`StopWatch`。

如果您正在寻找 Profilers，有一些不错的开源分析器，例如：

*   [教授](http://code.google.com/p/nprof/)
*   [用于 C# 的 Prof-It](http://dotnet.jku.at/projects/Prof-It/)
*   [NProfiler](http://chimpswithkeyboards.com/projects/nprofiler/)
*   [简介Sharp](http://www.softprodigy.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:13:33.837

这可能是它。据我所知，MVC 和 WebFormas 的探查器： [http ://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:15:11.760

您可以使用 Page 的 Trace 指令。

```
<%@ Page Trace="true" %> 
```

[http://msdn.microsoft.com/en-us/library/94c55d08(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/94c55d08(v=vs.71).aspx)

# macos - 以编程方式启用对辅助设备的访问

> ID：13006500
> 
> 赞同：0
> 
> 时间：2012-10-22T07:09:39.507
> 
> 标签：macos, cocoa, accessibility, accessibility-api

我想以编程方式启用对辅助设备的访问。

有另一种不使用的方法来做到这一点

```
NSURL *prefPaneURL = [NSURL fileURLWithPath:[[paths objectAtIndex:0] stringByAppendingPathComponent:@"UniversalAccessPref.prefPane"]];
            [[NSWorkspace sharedWorkspace] openURL:prefPaneURL]; 
```

打开系统偏好设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:53:06.323

你可以使用苹果脚本

```
tell application "System Events" to if not UI elements enabled then
    set UI elements enabled to true
end if 
```

# php - jquery阴影框冲突

> ID：13006501
> 
> 赞同：2
> 
> 时间：2012-10-22T07:09:39.577
> 
> 标签：php, javascript, jquery, html, joomla1.5

```
<script type="text/javascript">
function Start(){
   Shadowbox.init({skipSetup: true});
   Shadowbox.open({
      content:    '/luckycement/flashxml/LuckyCement.swf',
      player:      'swf',
      title:      "",
      width:      800,
      height:      600
   })
}
//window.onload=Start;
</script>

<script src="<?php echo $this->baseurl ?>/templates/rhuk_milkyway/SpryAssets/SpryCollapsiblePanel.js" type="text/javascript"></script>

<script src="<?php echo $this->baseurl ?>/templates/rhuk_milkyway/SpryAssets/jquery-1.3.1.min.js" type="text/javascript"></script>

<script type="text/javascript" src="/luckycement/plugins/content/arisexylightboxlite/js/jquery.min.js"></script>

  <script type="text/javascript" src="/luckycement/plugins/content/arisexylightboxlite/js/jquery.noconflict.js"></script>

  <script type="text/javascript" src="/luckycement/plugins/content/arisexylightboxlite/js/jquery.easing.js"></script>

  <script type="text/javascript" src="/luckycement/plugins/content/arisexylightboxlite/js/jquery.sexylightbox.min.js"></script>

  <script type="text/javascript">
jQuery(document).ready(function(){ SexyLightbox.initialize({"dir":"\/luckycement\/plugins\/content\/arisexylightboxlite\/js\/sexyimages"}); });
  </script>

    <!--script type="text/javascript" src="js/jquery-1.3.1.min.js"></script-->
<script type="text/javascript">

$(document).ready(function() {      
//alert('nida');    
    //Execute the slideShow
    slideShow();
    slideshowimg();
    $("#accordion").accordion();
    //alert($("#tabarea_r").attr('id'));

});

function slideShow() {
    //alert($('#gallery').attr('id'));
    //Set the opacity of all images to 0
    $('#gallery a').css({opacity: 0.0});

    //Get the first image and display it (set it to full opacity)
    $('#gallery a:first').css({opacity: 1.0});

    //Call the gallery function to run the slideshow, 6000 = change to next image after 6 seconds
    setInterval('gallery()',5000);

}

function gallery() {

    //if no IMGs have the show class, grab the first image
    var current = ($('#gallery a.show')?  $('#gallery a.show') : $('#gallery a:first'));

    //Get next image, if it reached the end of the slideshow, rotate it back to the first image
    var next = ((current.next().length) ? ((current.next().hasClass('caption'))? $('#gallery a:first') :current.next()) : $('#gallery a:first'));   

    //Get next image caption
    var caption = next.find('img').attr('rel'); 

    //Set the fade in effect for the next image, show class has higher z-index
    next.css({opacity: 0.0})
    .addClass('show')
    .animate({opacity: 1.0}, 1000);

    //Hide the current image
    current.animate({opacity: 0.0}, 1000)
    .removeClass('show');

    //Set the opacity to 0 and height to 1px
    $('#gallery .caption').animate({opacity: 0.0}, { queue:false, duration:0 }).animate({height: '1px'}, { queue:true, duration:300 }); 

    //Animate the caption, opacity to 0.7 and heigth to 100px, a slide up effect
    $('#gallery .caption').animate({opacity: 0.7},100 ).animate({height: '100px'},500 );

    //Display the content
    $('#gallery .content').html(caption);

}
</script> 
```

谁能帮我解决这个问题？我`shadowbox.js`用于在 shadowbox 中显示画廊图像，但它与我的画廊冲突。我正在使用`start()`调用索引页面加载并在 shadowbox 中运行 flash 文件的函数。但是对于显示图像，它不会显示 shadowbox 与我的 javascript 文件冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:12:27.440

它们是冲突的，因为您使用的是两个不同的 jQuery 版本。仅对sexylightbox 和shadowbox 使用最新的jQuery 版本。

# php - 如何从二进制文件生成 pdf 文件？

> ID：13006505
> 
> 赞同：9
> 
> 时间：2012-10-22T07:10:00.617
> 
> 标签：php, pdf-generation, binaryfiles

如何从 php5 中的数据库检索的二进制文件生成 pdf 文件？它是base64编码的，我只是解码它，但不知道下一步该怎么做......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-22T10:29:58.190

二进制数据只是*实际的文件*，或者更确切地说是该文件的重要内容，只是没有文件名。

```
$base64 = /* some base64 encoded data fetched from somewhere */;
$binary = base64_decode($base64); 
```

在那里你有变量中文件的*文件数据/内容。*`$binary`从这里开始，这取决于你想做什么。您可以将数据写入文件，并获得“实际”PDF 文件：

```
file_put_contents('my.pdf', $binary); 
```

您可以使用适当的标题将数据吐出到浏览器，用户将收到看起来像 PDF 文件的内容：

```
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="my.pdf"');
echo $binary; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T07:17:04.580

我在重复你的最后一句话。:) 我不知道是什么问题！:)。如果要将文件推送到浏览器，可以设置标题并流式传输解码的内容。或者，如果您希望文件保持原样，请写入文件系统并使用它。请更清楚你的问题！

谢谢！！

# vb.net - 找不到VB图片

> ID：13006507
> 
> 赞同：0
> 
> 时间：2012-10-22T07:10:12.097
> 
> 标签：vb.net, path, image, locate

我一直在修改一张图片，即使我已经删除了vb项目中的所有图片，旧图片仍然可以使用。项目中是否还有参考图片的地方？如果有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:17:59.907

转到解决方案资源管理器，单击 Form1.vb 旁边的向下箭头，然后双击 Form1.resx 这应该会将您带到项目中的任何图像，您可以通过右键单击并选择导出到文件轻松地将其保存到磁盘。图像位于 .resx 文件中。

# c# - 每次访问成员时都会执行以下代码吗？

> ID：13006508
> 
> 赞同：2
> 
> 时间：2012-10-22T07:10:12.207
> 
> 标签：c#, singleton, mef

我在类库中有以下代码：

```
public class Manager
{
    private static readonly Manager instance = new Manager();

    public static IHelper Helper { get { return Manager.instance.helper; } }

    [Import(typeof(IHelper))]
    internal IHelper helper { get; set; }

    private Manager()
    {
        using (DirectoryCatalog catalog =new DirectoryCatalog(@"c:\Dev\Plugins"))
        {
            CompositionContainer container = new CompositionContainer(catalog);
            container.ComposeParts(this);
        }
    }
} 
```

我正在使用上面的类在运行时设置自定义用户界面设置，构造函数会在我每次访问成员时运行（它会扫描目录）吗？

一个示例调用可能是`lblMask.Text = Helper.SearchMask;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:13:05.787

目录扫描只发生在实例构造函数中。实例构造函数只在`new Manager()`使用时发生（假设没有人用反射作弊），它只发生一次，在静态字段初始化器中。

所以不行。它应该只发生一次 - 每个应用程序域的第一次。

但是，您可以坚持一个断点/某种输出，然后找出...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:13:36.013

当您**第一次**`Manager`访问该类（它的实例或其静态方法和字段）时，静态构造函数将运行并初始化该字段。 所以下次访问该字段时，它会被初始化并且不会运行。**`Manager``instance`
`instance``new Manager()`**

 **事实上，C# 编译器会自动将字段初始化移动到类构造函数中。以下代码

```
private static readonly Manager instance = new Manager(); 
```

将转换为：

```
private static readonly Manager instance;
static Manager()
{
    instance = new Manager();
} 
```**

# android - 在android上访问资产文件夹中的PDF文件

> ID：13006511
> 
> 赞同：1
> 
> 时间：2012-10-22T07:10:27.080
> 
> 标签：android, pdf, itext

我已经看到很多关于访问资产文件夹中文件的问题，但似乎无法得到一个可靠的答案。我正在开发一个从 PDF 文件中提取文本的应用程序，因此我使用 iText 库来执行此操作，但我的问题是 PDF 的文件路径。

我试过使用**assetManager**，assetManager会打开那个文件，但我认为iText需要文件路径，所以它可以自己打开文件，我不确定，但这是我的理论。

```
PdfReader reader = new PdfReader(<String PDF-file>); 
```

那么**如何使用 iText 访问 assets 文件夹下的文件？**如果不可能，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-30T15:22:36.607

这是获取文件资产目录并将其用于 pdfreader 的示例代码。

**代码：**

```
File f = FileUtils.fileFromAsset(this, "filename.pdf");

PdfReader pdfReader = new PdfReader(f.getPath()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:50:01.880

你可以像这样得到一个 InputStream 对象

```
AssetManager am = activity.getAssets();
InputStream is = am.open("test.txt"); 
```

然后使用这个构造函数

```
public PdfReader(InputStream is)
          throws IOException 
```

[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html#PdfReader(java.io.InputStream](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html#PdfReader(java.io.InputStream) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:24:22.320

我已经用这个解决了我的问题：

`reader = new PdfReader(getResources().openRawResource(R.raw.resume));`

# ios - 检查用户是否不允许访问位置服务

> ID：13006513
> 
> 赞同：1
> 
> 时间：2012-10-22T07:10:32.810
> 
> 标签：ios, core-location

我有一个使用 CoreLocation API 的应用程序。如果位置服务已关闭，当我启动应用程序时，它会显示一条警报，提示“打开位置服务”并带有“设置”和“取消”按钮。当用户点击 Cancel 时，应用程序应该弹出当前的 ViewController。当用户点击“取消”时，有什么方法可以处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T02:05:56.003

打电话`+[CLLocationManager authorizationStatus]`。它返回[此处](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)描述的值（在 下`CLAuthorizationStatus`）。此外，检查`+[CLLocationManager locationServicesEnabled]`，如果启用了位置服务，则返回 YES。

您应该在调用任何方法**之前**`CoreLocation`使用这些方法。相应地提示用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:59:28.663

您需要相应地分配`CLLocationManager`和处理`+(CLAuthorizationStatus)authorizationStatus`。

您可以从 AppDelegate 或您的 ViewController 调用它。

# xslt - 如何使用 Diazo 保留 HTML 实体？

> ID：13006514
> 
> 赞同：0
> 
> 时间：2012-10-22T07:10:40.853
> 
> 标签：xslt, html-entities, diazo

我有以下简单的重氮规则文件：

```
<rules
  xmlns="http://namespaces.plone.org/diazo"
  xmlns:css="http://namespaces.plone.org/diazo/css"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <theme href="theme/theme.html" />

  <replace css:theme-children="#content" css:content-children=".content" />

</rules> 
```

和主题：

```
<html>
  <body>
    <div id="content">
        Lorem ipsum ...
    </div>
  </body>
</html> 
```

我要转换的来源是：

```
<html>
  <body>
    <div class="content">
        <a href="&#0109;&#0097;&#0105;lt&#0111;&#0058;info&#0064;example&#46;org">info</a>
    </div>
  </body>
</html> 
```

我得到的是

```
... <a href="mailto:info@example.org">info</a> ... 
```

但我想保持 href 属性的 HTML 实体完整。我怎么能用重氮做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:00:30.853

请注意，数字字符引用不是实体引用，因此您的标题有点误导（保留或不保留实体引用的答案，例如“& nbsp;”非常不同）

我不知道重氮但在 XSLT 如果你添加

```
 <xsl:output encoding="US-ASCII"/> 
```

到您的文档，然后将使用数字引用输出任何非 ascii 字符。

但是在您的示例中，它们实际上是被引用的 ascii 字符，例如“。” 作为 ”。” 在 xslt 1 中没有任何标准方法可以做到这一点（如果文档将由符合标准的 html 或 xml 系统处理，则不应该有任何理由这样做）。任何此类系统都会在处理开始之前将这些引用扩展到其字符。（这就是 XSLT 无法保留它们的原因：在 XSLT 看到输入数据之前，它们已被 xml 解析器删除。）

# android - 我可以阅读其他语言并用 TTS 说话，例如“孟加拉语”、“印地语”

> ID：13006516
> 
> 赞同：1
> 
> 时间：2012-10-22T07:10:41.790
> 
> 标签：android, text-to-speech

Android 提供了一个很酷的功能（从 Android 1.6 开始），称为文本到语音 (TTS)，它可以用不同的语言朗读文本。我在 TTS 上写了一个代码。它工作正常。但现在我想将 TTS 的语言设置为“孟加拉语”。但 TTS 目前不支持“孟加拉语”。有什么方法可以将 TTS 的语言设置为 "Bengali" 。

```
 tts = new TextToSpeech(TextToSpeechSultan.this,new TextToSpeech.OnInitListener() {

            public void onInit(int status)
            {
                if(status != TextToSpeech.ERROR)
                {
                    tts.setLanguage(Locale.US);

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:13:38.173

不，很遗憾，Android 不支持*孟加拉语*或*印地语。*请参阅下面支持的语言环境列表

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)

它的外观也不支持许多其他语言。

# gridview - 如何使用单选按钮创建网格

> ID：13006519
> 
> 赞同：0
> 
> 时间：2012-10-22T07:10:44.333
> 
> 标签：gridview, drop-down-menu, yii

在我的 Yii 应用程序中，我想创建一个带有“用户级别”和“问题复杂性”字段的网格视图。

> 水平 | 复杂
> 
> * * *
> 
> 1.  初学者 |
> 2.  中级 |
> 3.  容易 |

在复杂性部分，我想为每个级别创建一个包含三个字段的下拉框 - hard、medium、easy - 以便用户从下拉框中选择复杂性。所以你能建议我如何在 Yii 中创建它吗？我是 Yii 新手，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:44:13.567

一种方法是在您的 CGridView 小部件中，在列下调用如下方法：

```
'columns'=>array(
    array(
        'name'          =>  'field_name',
        'value'         =>  'Model::model()->methodName()',
        'type'          =>  'text',         
    ),
    ... 
```

因此，如果属性（表中的字段）名称，例如 id、user_id 等，则 field_name 值...

Model:: 位是您将在其中拥有方法的模型名称，methodName() 位是您正在调用的方法（函数）的名称。

不，您可以简单地编写一个方法来呈现我们的 HTML 以创建单选按钮（或下拉列表，您的问题标题和内容没有意义）。因此，您可能可以使用您的用户模型，并创建一个名为 renderRadiobuttons() 的方法，该方法的调用如上所示。

如果您需要更具体的帮助，请发布一些代码片段

# php - php中的站点根相对路径混淆

> ID：13006520
> 
> 赞同：1
> 
> 时间：2012-10-22T07:10:46.533
> 
> 标签：php, directory, relative-path

我正在尝试将图像上传到服务器，从上传的图像创建缩略图，并将相对路径保存到 mysql database 。. . . 图片路径是

```
 /mysite/images/ 
```

从我的站点根目录（在我的本地测试环境中是 wamp/www/mysite/images）

现在，我正在执行目录检查

```
 if(!is_dir($path) && !is_writable($path)){
    throw new Exception ("$path is not valid .. ");
    } 
```

其中路径是 /mysite/images/ ，认为初始的 '/' 将表示根。

但是，脚本抛出了一个异常，说路径名无效，而我的

```
 move_uploaded_file($tmp_name, $path.$filename) 
```

也没有工作。

**PS：**路径mysite/images/也报错文件没有移动

现在，我已经通过手动将文档根目录附加到目录检查和移动文件的路径名来解决，现在看起来像

```
 if(!is_dir($_SERVER['DOCUMENT_ROOT'].$path) && !is_writable($_SERVER['DOCUMENT_ROOT'].$path)){
    throw new Exception ("$path is not valid .. ");
    }

      move_uploaded_file($tmp_name, $_SERVER['DOCUMENT_ROOT'].$path.$filename) 
```

我也改变了路径

```
 mysite/images/ 
```

删除用于站点根目录的初始斜线。这是**完美的工作**。

但是，我不明白为什么目录检查和移动上传的文件片段没有获取站点根目录的相对链接。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:35:29.523

您的网站路径不是`wamp/www/mysite/images`.

您正在使用 Web 服务器，您无法访问驱动器，例如：c:/wamp ....

在线后，您将如何访问您的文件？Linux 没有 c:/ ...

您的网站路径是：`http://localhost/mysite/`

您的图像路径是：`http://localhost/mysite/images`或者`./images`您的代码是否正确编写。

所以，这样做：

```
define('ROOT', $_SERVER['DOCUMENT_ROOT']);

include_once(ROOT."/mycfgfile.php"); 
```

或者

```
include_once(ROOT."/includes/mycfgfile.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:40:27.483

问题在于路径表示。

在 linux /mysite 将尝试访问文件系统根级别的目录。Windows 这可能不会产生错误。对于 is_file() 类型的 API，它应该是绝对路径而不是相对路径。

# java - 具有多个具有不同签名的实现类的java接口

> ID：13006521
> 
> 赞同：1
> 
> 时间：2012-10-22T07:11:07.393
> 
> 标签：java, interface, implements

我正在创建一个界面说“汽车”

```
public interface Car {
    public void drive(int Speed, int Gear ); // for cars which have gears
    public void drive(int Speed); // for cars which do not have gears
} 
```

现在我正在创建我的实施类说 SimpleCar 和 AdvanceCar 在哪里

*   SimpleCar 没有齿轮
*   AdvanceCar 有齿轮

现在，当我编写实现类时，我被迫为这两种方法编写代码，即使我不希望它们出现在我的实现类中

```
public class SimpleCar implements Car {
    public void drive(int Speed, int Gear ){ ... }; // dont want this method in SimpleCar
    public void drive(int Speed ){ ... };
} 
```

有人可以帮我设计一个有方法但实现类有不同签名的接口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:22:44.787

```
public interface Car {

    public void drive(int Speed, int Gear); // for cars which have gears

    public void drive(int Speed); // for cars which do not have gears
}

public class CarAdapter implements Car {

    @Override
    public void drive(int Speed, int Gear) {
        // TODO Auto-generated method stub

    }

    @Override
    public void drive(int Speed) {
        // TODO Auto-generated method stub

    }

}

public class AdvancedCar extends CarAdapter {

    @Override
    public void drive(int Speed) {
        // TODO Auto-generated method stub
        super.drive(Speed);
    }

    @Override
    public void drive(int Speed, int Gear) {
        // TODO Auto-generated method stub
        super.drive(Speed, Gear);
    }

}

public class SimpleCar extends CarAdapter {

    @Override
    public void drive(int Speed) {
        // TODO Auto-generated method stub
        super.drive(Speed);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:20:48.253

请参阅以下设计。根据您的要求，我已从`gear`界面`Car`原因中删除它不适用于所有汽车，因此不能成为界面的一部分。

```
public interface Car 
{     
    // public void drive(int Speed, int Gear ); // for cars which have gears     
    public void drive(int Speed); // for cars which do not have gears 
}

public abstract class SimpleCar implements Car
{
    public void drive(int speed) { ... }
    public abstract void accelerate(); // you can move it to interface also
}

public abstract class AdvancedCar implements Car
{
    protected int CURRENT_GEAR = 1;
    public void drive(int speed) { ... }
    public void changeGear(int gear) { ... }
    public abstract void accelerate();
}

public class Reva extends SimpleCar
{
    // provide implementation for accelerate
}

public class Ferrari extends AdvancedCar
{
    // provide implementation for accelerate
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T07:18:10.530

您应该有一个`Car`接口和另一个`GearCar`扩展接口的命名`Car`接口。

这样您就可以实现`GearCar or Car`接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:15:49.953

编写一个`CarAdapter`提供接口中所有方法的空实现。然后让你的`SimpleCar`扩展`CarAdapter`（默认实现`Car`）

这在 Swing 应用程序中很常见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:20:17.363

```
public interface Vehicle {
    public void drive(int Speed);
}

public interface Car extends Vehicle{
    public void drive(int Speed, int Gear ); 
}

public class SimpleCar implements Vehicle {
    public void drive(int Speed ){ ... };
}

public class AdvancedCar implements Car {
    public void drive(int Speed, int Gear ){ ... };
    public void drive(int Speed ){ ... };
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T07:13:43.600

只需删除需要的方法声明，`Gear`因为在您的类中，您需要实现在您正在实现的接口中声明的每个方法，除非您的类本身是抽象的。

如果你不想实现接口的任何方法，你也应该有你的`SimpleCar`和作为抽象类。`AdvancedCar`

# iphone - [__NSArrayI count]：消息发送到已释放实例 0x6dbfd10

> ID：13006526
> 
> 赞同：1
> 
> 时间：2012-10-22T07:11:36.100
> 
> 标签：iphone, objective-c, ios, core-plot

我正在使用 Coreplot API 创建条形图。当我尝试将相同的代码作为单个项目运行时，它工作正常，但是当我将它集成到我的项目内部`UINavigationController`时，它给了我一个错误。

`GraphView.h`

```
 @interface GraphView : CPTGraphHostingView <CPTPlotDataSource, CPTPlotSpaceDelegate>
   {
    CPTXYGraph *graph;
    NSArray *dates; 
   } 
  @property(nonatomic, retain) NSArray *dates; 
```

`GraphView.m`

```
dates = [NSArray arrayWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03", 
             @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", @"2012-05-08", @"2012-05-09",@"2012-05-10",@"2012-05-11",@"2012-05-12",@"2012-05-13",@"2012-05-14",@"2012-05-15",@"2012-05-16",@"2012-05-17",@"2012-05-18",@"2012-05-19",@"2012-05-20",nil];

 - (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return dates.count;
} 
```

在返回 dates.count 它给了我错误。

> [__NSArrayI count]：消息发送到已释放实例 0x6dbfd10

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T07:13:28.657

您正在创建一个自动释放对象。将内存分配给日期数组。

```
dates =    [[NSArray alloc]initWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03", 
                 @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", @"2012-05-08", @"2012-05-09",@"2012-05-10",@"2012-05-11",@"2012-05-12",@"2012-05-13",@"2012-05-14",@"2012-05-15",@"2012-05-16",@"2012-05-17",@"2012-05-18",@"2012-05-19",@"2012-05-20",nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:18:37.730

删除 NSArray *dates 实例变量 - 这就是您拥有该属性的原因，它为您提供。

然后使用属性设置器：

```
self.dates = [NSArray arrayWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03", 
             @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", @"2012-05-08", @"2012-05-09",@"2012-05-10",@"2012-05-11",@"2012-05-12",@"2012-05-13",@"2012-05-14",@"2012-05-15",@"2012-05-16",@"2012-05-17",@"2012-05-18",@"2012-05-19",@"2012-05-20",nil]; 
```

# pdf - 声纳 PDF 插件不起作用

> ID：13006528
> 
> 赞同：1
> 
> 时间：2012-10-22T07:11:49.390
> 
> 标签：pdf, sonarqube

我已下载 Sonar PDF 报告插件并将小部件添加到仪表板。我已经重新启动了声纳服务器。我已经通过Ant执行了Sonar分析器，但是无法下载PDF报告（Widget为空，看不到）。声纳日志没有给出 PDF 生成的指示。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:37:04.370

ANT 构建的已知问题，请参阅[SONAPLUGINS-2314](http://jira.codehaus.org/browse/SONARPLUGINS-2314)

而且看起来没有立竿见影的解决方案，他们建议使用商业支持的插件.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T13:44:55.000

[https://github.com/NithinManmohan/PDFQube](https://github.com/NithinManmohan/PDFQube)

仍处于起步阶段，处于 alpha 阶段。

# c# - 如何检查 iis 上的 webrequest 连接？

> ID：13006532
> 
> 赞同：0
> 
> 时间：2012-10-22T07:11:58.687
> 
> 标签：c#, asp.net, httpwebrequest

我的网站上的网络请求有问题。我认为问题在于我没有关闭响应。有没有办法检查我在给定时间与我试图访问的服务器有多少打开的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:15:28.500

我建议使用来自 sysinternals 的 TCPView

[http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)

[![](../Images/38976d873ec7cbc6aa9a42ecc8a1ec57.png)](https://i.stack.imgur.com/McJgj.jpg)

# iphone - iOS 中 iPhone 的 SAX XML 解析器示例

> ID：13006536
> 
> 赞同：0
> 
> 时间：2012-10-22T07:12:09.237
> 
> 标签：iphone, ios, xml, xcode, ios6

有人可以在 XCode 中发布 SAX XML 解析器示例的链接，而不是来自 developer.apple.com。我需要解析这个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<userfood_overview xmlns="http://www.wikifood.lu"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.wikifood.lu userfood.xsd">
<hits>1</hits>
<startAt>0</startAt>
<userfood>
<id>770</id>
<ean>4016249502058 </ean>
<name><![CDATA[Amaranth-Früchte-Müsli / Großpackung]]></name>
<modification>2012-10-09</modification>
<info1><![CDATA[Amaranth - Müsli mit Früchten]]></info1>
<origin id="55">Germany</origin>
<brand>
<id>155</id>
<name><![CDATA[Allos]]></name>
</brand>
<contents><![CDATA[1,5]]></contents>
<unit id="8">Kilogram</unit>
<nutrition_facts>
<nutrition_fact id="Per_100_g_ml">
<name>per 100</name>
<value>g</value>
<unit/>
</nutrition_fact>
<nutrition_fact id="EnergyKcal">
<name>Energy kcal</name>
<value>377</value>
<unit>kcal</unit>
</nutrition_fact>
<nutrition_fact id="EnergyKjoule">
<name>Energy kj</name>
<value>1580</value>
<unit>kj</unit>
</nutrition_fact>
</nutrition_facts>
<allergens>
<allergen id="774"><![CDATA[Nuts]]></allergen>
<allergen id="773"><![CDATA[Milk (including lactose)]]></allergen>
<allergen id="777"><![CDATA[Sesame seeds]]></allergen>
<allergen id="782"><![CDATA[Gluten]]></allergen>
<allergen id="772"><![CDATA[Soy]]></allergen>
</allergens>
<food_notes/>
<category id="0602003" delimiter=":"><![CDATA[Muesli]]></category>
<insertion>2007-01-16</insertion>
<editable>false</editable>
</userfood>
</userfood_overview> 
```

，但从[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html#//apple_ref/doc/uid/20002264-BCIIJEEH](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html#//apple_ref/doc/uid/20002264-BCIIJEEH)上的文档对我来说还不清楚. 这就是我所拥有的：

```
#pragma mark *** NSXMLParserDelegate ***

- (void)parserDidStartDocument:(NSXMLParser *)parser
{
    // do preparation for loading data from XML
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
    [parser release];
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    //analyze parseError
    [parser release];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"elementName %@", elementName); // current parsing element
    // specify type of data to be saved in method below
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"value of element %@", string); // value for current parsing element
    // save data to some ivar for future use (displaying)
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:28:53.333

您可能想通过以下链接获取。 [http://homepages.ius.edu/RWISMAN/C490/html/nsxmlparser.htm](http://homepages.ius.edu/RWISMAN/C490/html/nsxmlparser.htm) 它甚至在页面下方有一个示例。上面的解析应该足够简单了。更深入地了解您的问题究竟是什么将有所帮助。

# c - 遍历C中的已知结构

> ID：13006538
> 
> 赞同：0
> 
> 时间：2012-10-22T07:12:19.860
> 
> 标签：c, traversal

我几乎完成了剩下的任务，现在只需要一个打印方法来打印获得的结构。

我想知道如何编写一个循环来遍历这样的结构：

```
[""][ ][ ]-->  [""][ ][/]
     |              |              
   ["A"][/][/]     [""][ ][ ]-->  [""][ ][/]     
                        |              |                 
                      ["B"][/][/]    ["C"][/][/] 
```

这是以下结构：

```
(a (b c)) 
```

或者

```
[""][ ][ ]-->  [""][ ][ ]--> [""][ ][/]
     |              |             |  
   ["A"][/][/]    ["B"][/][/]   ["C"][/][/] 
```

这是为了：

> （美国广播公司）

它的代码是：

```
struct conscell {
char symbol;
struct conscell *first;
struct conscell *rest;

}; 
```

所以，你看到的第一个空格是符号字符，下一个是 conscell 指针“first”，最后一个是 conscell 指针“rest”。

想象一下，该结构是内部构建的（到目前为止已完成分配）。

所以现在，在遍历结构之后，我应该打印出适当的列表，带括号。对于上面的示例，它将是

> (a (bc))

**我完成了这个方法：用当前节点数据（符号）、左节点（第一个）和右节点（休息）进行树遍历。只需要找到放置括号的位置即可获得正确的输出。现在我得到：**

> 美国广播公司

打印方法：

```
// List is a pointer to struct conscell 
// myList will be the pointer referring to our first conscell structure  
void printList(List myList){
List current, pre;

if (myList == NULL)
    return;

current = myList;

while (current != NULL) {

    if (current->first == NULL) {
        printf("%c", current->symbol);
        current = current->rest;
    }
    else {
        /* Find the inorder predecessor of current */
        pre = current->first;
        while (pre->rest != NULL && pre->rest != current)
            pre = pre->rest;

        /* Make current as right child of its inorder predecessor */
        if (pre->rest == NULL) {
            pre->rest = current;
            current = current->first;
        }
            /* Revert the changes made in if part to restore the original 
              tree i.e., fix the right child of predecssor */
        else {
            pre->rest = NULL;
            printf("%c ", current->symbol);
            current = current->rest;
        } /* End of if condition pre->right == NULL */
    } /* End of if condition current->left == NULL*/

} /* End of while */
} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:26:04.833

只需递归执行即可。

访问第一个`concsell`，如果`first != nullptr`访问第一个元素。会员也是一样`rest`。而且由于您的所有元素都具有相同的结构，因此您就完成了。

您只应该注意，如果您有很多元素，您的堆栈可能会溢出。

# javascript - jquery parseInt 没有给出正确的结果

> ID：13006540
> 
> 赞同：0
> 
> 时间：2012-10-22T07:12:22.090
> 
> 标签：javascript, jquery

我正在读取一个值

```
 var result = $("#Time", $(this)).val(); 
```

如果我输入 "Hours" 而不是 number 并且我输入了`0<parseInt(result, 10)<24)`，那么当我期望它为 false 时，结果为 true。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:13:46.627

您的第一次比较`0 < NaN`将产生`false`，这是一种 0，因此`0 < 24`，这是真的。

```
var result = parseInt($('#Time', $(this)).val(), 10);
var between0and24 = 0 < result && result < 24 
```

我还注意到您似乎错误地传递了上下文。jQuery 的 context 参数应该是一个 DOM 节点，而不是 jQuery 对象，所以使用`$('#Time', this)`. 请注意，此代码中的该参数没有用处，因为通过 ID 访问确实很快，而且您没有将`Time`id 用于文档中的多个元素，对吧？好吧，你不应该。

# perl - 如何在 ubuntu 12.10 上获得 p5-Switch

> ID：13006541
> 
> 赞同：0
> 
> 时间：2012-10-22T07:12:28.453
> 
> 标签：perl, ubuntu, webkit

在 12.10 发布之前，我一直在使用 ubuntu 12.04。我使用 ubuntu 进行软件开发，安装 12.10 后，我注意到 12.10 附带的 perl 版本（5.14）不包括构建 WebKiT-GTK 所需的 Switch.pm 模块。

在互联网上环顾四周，我发现很少有建议表明我应该从一个叫做端口的东西上安装一个叫做 p5-switch 的东西。我环顾四周，无法完成这项工作。我不是 perl 人，也不知道在哪里可以买到这个包。

有人可以帮助我 1\. 在哪里下载 ubuntu 12.10 的软件包 2\. 如果它不是 .deb，我该如何安装它。或 1\. 至少能够将 perl 安装降级到低于 5.14 的版本

谢谢和问候~Sameer

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:49:27.543

```
sudo apt-get install libswitch-perl 
```

将为您安装它。

"ports" 是一种 *BSD 打包系统，不是您应该寻找的。

您可以通过转到 packages.ubuntu.com 找到具有特定 perl 模块的包，在“搜索包的内容”表单中输入 Module/Name.pm（在本例中为 Switch.pm）并检查“包含名称以关键字结尾的文件”并选择所需的发行版，然后确保忽略结果中的错误命中，例如 CGI/Switch.pm。Debian 在 packages.debian.org 对其软件包进行相同的搜索。

（请注意，Switch.pm 有严重的限制，从未真正打算在生产中使用，当然也不应该在新代码中使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:32:25.113

请确保您已正确检查没有可通过 apt 使用的 Switch 模块。如果它可用，那就是你想要的。

不，那么您有两种选择，一种是较长的正确方法，另一种是较短的不太干净的方法。

**1.更长**

用 apt 安装 cpanm 和 perlbrew。perlbrew 工具允许您在单独的目录中从头开始安装 Perl 的完整版本。为您的 webkit 构建设置一个用户，以该用户身份运行 perlbrew，安装您的 perl。然后，使用 cpanm 安装所需的模块，您就完成了。一些谷歌搜索将为您提供如何使用这些工具的分步示例。如果出现任何严重错误，您可以删除该用户主目录中的所有文件并重新开始 - 您所浪费的只是一点时间。

有经验的 Perl 人喜欢这个的原因是，它将 webkit-gtk 所需的 perl 与您的系统 perl 分开，ubuntu 的软件包期望与他们发布的软件包保持不变。

**2\. 更短**

用 apt 安装 cpanm。以 root 身份运行“cpanm Switch”，它将安装 Switch.pm 包和任何依赖项。它还将升级它认为需要的任何已安装的软件包。最后一步就是为什么这个选项不理想。在（罕见的）情况下，当更新与系统上的其他内容不兼容时，卸载是繁琐的。

# java - SQL 查询保证返回 Empty

> ID：13006545
> 
> 赞同：0
> 
> 时间：2012-10-22T07:12:33.243
> 
> 标签：java, mysql, swing

我对 SQL 很陌生。我正在尝试创建一个最初不显示任何结果的 JTable，但在执行某些 SQL 查询后会显示它们。我如何实现这一目标？有什么方法可以编写一个保证返回空的查询吗？

我试过了

```
SELECT 1 FROM dual WHERE false 
```

但这给了我一个包含一列的结果集 - 我想要一个与我的基础表中的列数相同但没有行的结果集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:14:51.777

要从表中获取列，请尝试以下操作：

```
SELECT * FROM <table_name> LIMIT 0 
```

其中 table_name 是您尝试从中获取列的表的名称。此查询表示您尝试从表中获取所有列，同时尝试将行限制为 0

# php - 如何问一个人是否想关窗？

> ID：13006547
> 
> 赞同：2
> 
> 时间：2012-10-22T07:12:39.123
> 
> 标签：php, javascript, html, popup

> **可能重复：**
> [关闭浏览器窗口时获取警报的 Javascript](https://stackoverflow.com/questions/333665/javascript-to-get-an-alert-when-closing-the-browser-window)

我有正当理由问这个问题，我有一个管理大型数据库的 Web 应用程序，并且用于修改查找表的页面会在单独的窗口中弹出。我希望能够提醒用户他们对表单所做的更改尚未保存到数据库中，并为他们提供这样做的选项，即使他们单击“X”关闭窗口也是如此。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:17:57.123

这就是我所做的

```
window.onbeforeunload = function (e) {
  var e = e || window.event;
  if (allowNavigationsAwayFromPage != true)
      {
      // For IE and Firefox
      if (e) {
        e.returnValue = 'Are You Sure? Some operation is still going on';
      }

      // For Safari
      return 'Are You Sure? Some operation is still going on';

      }
}; 
```

`allowNavigationsAwayFromPage`现在是一个变量。但我通常有一个功能来检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:51:08.600

最简单的方法是：

```
window.onbeforeunload = function(e)
{
    e = e || window.event;
    if (confirm('Are you sure?\nNot everything has been saved yet'))
    {
        return e;//return event object, unaltered... page will unload
    }
    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
    }
    else
    {
        e.returnValue = false;
        e.cancelBubble = true;
    }
    return false;
}; 
```

# razor - 如何防止 ServiceStack Razor 对我的 HTML 进行编码？

> ID：13006548
> 
> 赞同：2
> 
> 时间：2012-10-22T07:12:39.013
> 
> 标签：razor, servicestack

在我的视图页面中，我有以下行：

```
@Model.RenderedMarkdown 
```

RenderedMarkdown 使用以下内容生成：

```
var renderer = new MarkdownSharp.Markdown();
return renderer.Transform(Markdown); 
```

现在对于这个例子，假设 Markdown 是这样的：

```
###test 
```

这将变为：

```
<h3>test</h3> 
```

但是，在我的页面上呈现的是这样的：

```
&lt;h3&gt;test&lt;/h3&gt; 
```

是否有设置关闭此自动编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:24:10.780

试试这个：

```
@Html.Raw("<h3>test</h3>") 
```

把你的变量交给`Raw`助手。

像这样的东西：

```
@Html.Raw(Model) 
```

**添加：**

感谢**神话**和他的评论：

`There is also an T.AsRaw() extension method. Which basically just wraps the string into a MvcHtmlString which doesn't get escaped.`

# vb.net - VB.NET：清除图片框

> ID：13006549
> 
> 赞同：1
> 
> 时间：2012-10-22T07:12:40.560
> 
> 标签：vb.net, picturebox

到目前为止，我所看到的清​​除图片框的代码都没有达到我所需要的。我想清除一个图片框，以便我可以在“空白”背景上绘制新的东西。

这是我的代码：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    PictureBoxClear(Me.PictureBox1)

    m_i = m_i + 1
    Dim nPT As New Point(0, 0)
    Me.ImageList1.Draw(Me.PictureBox1.CreateGraphics, nPT, m_i)

End Sub
Public Sub PictureBoxClear(ByRef pb As PictureBox)

    pb.Image = Nothing

End Sub 
```

说

```
 .Image = Nothing 
```

似乎完全删除了图像，这样我之后就不能真正在它上面画一些东西了。我只是想清除我的图片框，以便它可以再次获得一些绘图。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:24:57.273

您可以尝试将其替换为全新的图像：

```
pb.Image =  New Bitmap(pb.ClientSize.Width, pb.ClientSize.Height) 
```

# javascript - 检查两个字符串是否在 JavaScript 中共享一个公共子字符串

> ID：13006556
> 
> 赞同：7
> 
> 时间：2012-10-22T07:13:14.240
> 
> 标签：javascript

JavaScript中是否有任何快速方法可以找出2个字符串是否包含相同的子字符串？例如，我有这两个字符串：“audi is a car”和“audiA8”。

如您所见，“audi”一词在两个字符串中都有，但我们无法用简单的`indexOf`或正则表达式找到它，因为两个字符串中都有其他字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T07:50:55.103

在生物信息学中做这类事情的标准工具是[BLAST](http://en.wikipedia.org/wiki/BLAST)程序。它用于比较两个分子片段（如 DNA 或蛋白质）以找到它们彼此对齐的位置 - 基本上是两个字符串（有时大小为数 GB）共享公共子字符串的地方。

基本算法很简单，只需系统地将其中一个字符串分成几部分，然后将这些部分与另一个字符串进行比较。一个简单的实现类似于：

```
// Note: not fully tested, there may be bugs:

function subCompare (needle, haystack, min_substring_length) {

    // Min substring length is optional, if not given or is 0 default to 1:
    min_substring_length = min_substring_length || 1;

    // Search possible substrings from largest to smallest:
    for (var i=needle.length; i>=min_substring_length; i--) {
        for (j=0; j <= (needle.length - i); j++) {
            var substring = needle.substr(j,i);
            var k = haystack.indexOf(substring);
            if (k != -1) {
                return {
                    found : 1,
                    substring : substring,
                    needleIndex : j,
                    haystackIndex : k
                }
            }
        }
    }
    return {
        found : 0
    }
} 
```

您可以修改此算法以进行更多花哨的搜索，例如忽略大小写、模糊匹配子字符串、查找多个子字符串等。这只是基本思想。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T07:18:43.290

不知道任何更简单的方法，但这应该有效：

```
if(a.indexOf(substring) != -1 && b.indexOf(substring) != -1) { ... } 
```

`a`你的`b`字符串在哪里？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T08:13:26.043

看看[这里](https://web.archive.org/web/20160301070226/http://phpjs.org/functions/similar_text/)类似的文本函数实现。它返回两个字符串中匹配字符的数量。

对于您的示例，它将是：

```
similar_text("audi is a car", "audiA8") // -> 4 
```

这意味着字符串具有 4 个字符的公共子字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:34:39.027

```
var a = "audi is a car";
var b = "audiA8";

var chunks = a.split(" ");
var commonsFound = 0;

for (var i = 0; i < chunks.length; i++) {
    if(b.indexOf(chunks[i]) != -1) commonsFound++;
}

alert(commonsFound + " common substrings found."); 
```

# c++ - 在 Windows 7 SP1 上卸下和连接 USB 音频 Jabra 耳机可能会导致网络出现问题。如何调查？

> ID：13006570
> 
> 赞同：0
> 
> 时间：2012-10-22T07:13:40.440
> 
> 标签：c++, windows, audio, rtp, directsound

我从事专门的 voip 应用程序。它使用 TLS 作为信令通道，使用 (S)RTP 作为呼叫中的媒体通道。

编写了一个使用 DirectSound 播放和捕获的音频输出模块。音频模块可防止音频错误。如果它检测到错误 - 1) 关闭问题音频设备 2) 通知主应用程序有关问题 3) 客户可以选择另一个音频设备。大多数时候效果很好。

但有时“移除 / 等待 10-20 秒 / 插入 USB Jabra 耳机”的顺序会引起兴趣。没有更多传入的 RTP 数据包或它们已损坏。操作系统甚至可以向远程对等方发送有关不可用端口的 ICMP 报告。

我检查了 DevPartner 和 DrMemory 错误检查器 - 但他们的报告中没有提示。

我认为这可能是驱动程序或Windows问题。它有时可以在其他系统上重现。

问题 - 我该如何调查这个问题？也许有一些工具可以显示 Windows 中的音频驱动程序活动？

谢谢 ：）

# php - wordpress 中基于角色的注册

> ID：13006571
> 
> 赞同：2
> 
> 时间：2012-10-22T07:13:41.650
> 
> 标签：php, wordpress, plugins, registration

我需要注册两个不同类别的用户，例如雇主和求职者。所以我需要为两种类型的用户提供两个单独的注册页面。我找不到任何合适的插件。每个用户将根据页面提交获得他们的角色。如果雇主已登录，他们必须发布他们的工作和信息，可以根据他们发布的工作查看申请，如果求职者登录，他们有权查看工作，申请工作，可以阅读有关的评论他们的应用程序等。我是 wordpress 的新手。我需要这方面的指导。

# android - 将视图添加到现有表格行

> ID：13006576
> 
> 赞同：0
> 
> 时间：2012-10-22T07:14:08.373
> 
> 标签：android

我正在尝试将图像添加到 xml 布局中的现有表格行中。但是有什么问题，有 NullPointerException。你能告诉我如何将任何视图添加到 xml 中的现有行吗？谢谢

```
 TableLayout tbl= (TableLayout)findViewById(R.id.tableLayout1);
    TableRow row= (TableRow)findViewById(R.id.tblHips);
    ImageView image=(ImageView) findViewById(R.drawable.ic_launcher);
    //image.setImageResource()
    row.addView(image);
    tbl.addView(row); 
```

这是我的布局-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top|center" >

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/TextView02"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="Waist"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <EditText
                android:id="@+id/EditText02"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tblHips"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="OK" />

        </TableRow>

    </TableLayout>

</RelativeLayout> 
```

为了简单起见，我删除了其他一些具有相同类型视图的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:16:06.423

试试这个

```
 TableRow row = (TableRow) findViewById(R.id.tblHips);
        ImageView imageView = new ImageView(this);
        imageView.setImageResource(R.drawable.ic_launcher);
        row.addView(imageView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:35:23.667

我还没有尝试过，但它应该可以工作

```
TableLayout tbl= (TableLayout)findViewById(R.id.tableLayout1);
TableRow row= new  TableRow(getApplicationContext());

LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View inflated = inflater.inflate(R.layout.main, row);

ImageView image=(ImageView) findViewById(R.drawable.ic_launcher);
row.addView(image);

tbl.addView(row); 
```

# popupwindow - 通过弹出窗口下载 .xlsm excel 工作表时出错

> ID：13006578
> 
> 赞同：2
> 
> 时间：2012-10-22T07:14:10.403
> 
> 标签：popupwindow, xlsm

我们必须通过创建弹出窗口来为 .xlsm（启用宏）excel 表提供下载选项。下载 excel 表时，出现以下错误。

> Excel 无法打开文件“null.xlsm”，因为文件格式或文件扩展名无效。验证文件未损坏且文件扩展名与文件格式匹配

在代码中，我们在插件中提供了一个链接并将 2 个参数传递给该链接。单击它后会调用一个 JSP 文件，该文件又会调用一个 java 类文件并传递这两个参数。我们将数据插入到 Java 类文件中的宏 Excel 工作表中，并通过 JSP 页面调用该类文件。

正文中的JSP代码如下：

```
<%
    String projectName = request.getParameter("ProjectName");
    String fixVersion= request.getParameter("FixVersion");
    FinalExtraction fe = new FinalExtraction();
    fe.getIssuesFromProject(projectName,fixVersion);
%> 
```

# c# - 错误：在 C# 中调用 C++ dll 函数

> ID：13006580
> 
> 赞同：3
> 
> 时间：2012-10-22T07:14:13.667
> 
> 标签：c#, c++, marshalling, dllexport

我正在尝试使用 C# 中的 C++ dll 中的函数，但出现错误：“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”

任何人都知道如何解决？

这是 C++ 函数：

```
typedef void *DGNHandle;

 __declspec(dllexport) DGNHandle CPL_DLL    DGNOpen( const char *, int );
 __declspec(dllexport) DGNElemCore CPL_DLL *DGNReadElement( DGNHandle ) 
```

这是 C++ 中的结构：

```
typedef struct {
    int         offset;
    int         size;

    int         element_id;     /*!< Element number (zero based) */
    int         stype;          /*!< Structure type: (DGNST_*) */
    int         level;          /*!< Element Level: 0-63 */
    int         type;           /*!< Element type (DGNT_) */
    int         complex;        /*!< Is element complex? */
    int         deleted;        /*!< Is element deleted? */

    int         graphic_group;  /*!< Graphic group number */
    int         properties;     /*!< Properties: ORing of DGNPF_ flags */
    int         color;          /*!< Color index (0-255) */
    int         weight;         /*!< Line Weight (0-31) */
    int         style;          /*!< Line Style: One of DGNS_* values */

    int         attr_bytes;     /*!< Bytes of attribute data, usually zero. */
    unsigned char *attr_data;   /*!< Raw attribute data */

    int         raw_bytes;      /*!< Bytes of raw data, usually zero. */
    unsigned char *raw_data;    /*!< All raw element data including header. */
} DGNElemCore; 
```

以下转换后的代码在 C# 中：

```
[StructLayout(LayoutKind.Sequential )]
    public class DGNElemCore
    {
        public int attr_bytes;
        public byte[] attr_data;
        public int color;
        public int complex;
        public int deleted;
        public int element_id;
        public int graphic_group;
        public int level;
        public int offset;
        public int properties;
        public int raw_bytes;
        public byte[] raw_data;
        public int size;
        public int style;
        public int stype;
        public int type;
        public int weight;

    }

[DllImport("DgnLib.dll", EntryPoint = "DGNOpen")]
        public static extern IntPtr  DGNOpen(string fileName, int bUpdate);
[DllImport("DgnLib.dll", EntryPoint = "DGNReadElement")]
        public static extern DGNElemCore DGNReadElement(IntPtr DGNHandle) 
```

测试代码：

```
DGNElemCore element = new DGNElemCore();
element = DgnFile.DGNReadElement(dgnFile.oDgnFile) **//Throw error** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:00:12.160

您`DGNElemCore`在 C# 代码中的声明是错误的 - 它需要与您的 C 结构（尤其是大小）完全匹配，否则编组代码将尝试错误地编组内存。一个有效的示例定义（如在编组期间不会引起问题）将如下

```
[StructLayout(LayoutKind.Sequential )]
public class DGNElemCore
{
    int offset;
    int size;
    int element_id;
    int stype;
    int level;
    int type;
    int complex;
    int deleted;

    int graphic_group;
    int properties;
    int color;
    int weight;
    int style;

    int attr_bytes;
    IntPtr attr_data;

    int raw_bytes;
    IntPtr raw_data;
} 
```

特别注意

*   C# 类中的成员顺序与 C 结构中的成员顺序相匹配（尽管这在调用函数时不会导致错误，但在访问编组结构的成员时会给出不正确的值）
*   这些`char*`字段被编组为`IntPtr`s - 尝试编组指向数组的指针，因为数组默认情况下将不起作用，因为数组大于指针，导致编组器尝试编组比可用内存更多的内存。

* * *

我还注意到您的 P/Invoke 方法声明是错误的。该`DGNOpen`函数返回结构本身（不是指针），因此应该看起来更像以下内容。

```
public static extern DGNElemCore DGNOpen(string fileName, int bUpdate); 
```

该`DGNReadElement`函数接受一个结构（不是指针）并返回一个指向该结构（不是结构）的指针，因此应该看起来更像这样

```
public static extern IntPtr DGNReadElement(DGNHandle handle); 
```

Attributes can be used to change the way that the marshaller works, which can in turn be used to alter the signature of these methods, however if you do this you need to be careful to ensure that the marshalling will still match up to your C++ function declarations.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:36:52.820

问题是#include 标头可能包含可能被 C++/CLI 编译器误解的声明。例如 C 函数声明。最好的办法是明确地告诉编译器。

```
#pragma managed(push, off)
#include "c_include.h"
#pragma managed(pop) 
```

然后，您可以在 C++/CLI 应用程序中使用 C++ 库，就像使用 C++ 应用程序一样。我总是尝试做的唯一一件事是将第三个库包装在代理或外观设计模式之后，以便客户端始终使用托管类。如果您的 C++/CLI 应用程序是其他 .NET 应用程序使用的库，这一点尤其重要。

此外，通常应使用以下构造公开 DLL 的公共 API 类（或函数）：

```
#ifdef YOUR_DLL_EXPORTS
#define YOUR_API __declspec(dllexport)
#else
#define YOUR_API __declspec(dllimport)
#endif 

class YOUR_API ClassToExpose {}; 
```

希望这有帮助

# asp.net-mvc - 将 ViewModel 与 LLBLGen 一起使用

> ID：13006581
> 
> 赞同：1
> 
> 时间：2012-10-22T07:14:20.453
> 
> 标签：asp.net-mvc, vb.net, llblgenpro

我正在使用 MVC 3 和 LLBLGen。我对填充具有来自多个表的数据的 ViewModel 的方法感到困惑。我将如何显示外键名称而不仅仅是 ID？我没有像实体框架这样的虚拟关键字。我应该求助于使用 SQL 视图，然后通过它们填充视图模型吗？只是为了详细说明，假设我想一次显示 100 多个结果，并且每个结果都有多个关联的外键，那么我将如何显示它们的相关名称而不仅仅是 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:33:55.487

恕我直言，您的选择是：

1.  [映射到相关字段的字段](http://llblgen.com/documentation/3.5/Designer/hh_goto.htm#Functionality%20Reference/EntityEditor_FieldsTab.htm)。这样做的好处是您仍在使用普通实体。
2.  类型化列表。这就像视图，但构建块是实体关系和实体字段。
3.  使用 TypedViews，实际上是 DB 视图。
4.  使用您自己的类型，例如 DTO 或 JSON 投影。毕竟，您正在您的业务外观对象和您用于在 UI 中显示的对象之间进行一种映射。

# uitableview - self.quickDialogTableView reloadData 不重新加载数据

> ID：13006582
> 
> 赞同：1
> 
> 时间：2012-10-22T07:14:39.590
> 
> 标签：uitableview, reloaddata, quickdialog

我有一个简单但自定义的部分标题，其中我在标签中显示动态内容。但是，当我弹出一个 VC 并在活动 VC 中运行 viewWillAppear 中的 [self.quickDialogTableView reloadData] 时，数据没有更新为正确的“self.sectionHeaderTitle。知道我做错了什么吗？

```
(void)sectionHeaderWillAppearForSection:(QSection *)section atIndex:(NSInteger)indexPath {
  if (indexPath == 0) {
  UIView *header = [[UIView alloc] initWithFrame:CGRectMake(0, 5, 320, 110)];
  header.backgroundColor = [UIColor clearColor];

  UIView *header_background = [[UIView alloc] initWithFrame:CGRectMake(25, 10, 270, 100)];
  header_background.backgroundColor = [UIColor whiteColor];

  UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(15, 0, 255, 25)];
  title.text = @"A sample static title";

  UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(55, 40, 200, 40)];
  label.text = self.sectionHeaderTitle;

  [header addSubview:header_background];
  [header_background addSubview:title];
  [header_background addSubview:label];
  [section setHeaderView:header];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T15:31:27.140

尝试重新加载该部分，如下所示：

```
 [self.quickDialogTableView reloadSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationBottom]; 
```

# .net - 将 Windows Phone 8 应用程序移植到 Windows 8

> ID：13006583
> 
> 赞同：2
> 
> 时间：2012-10-22T07:14:44.477
> 
> 标签：.net, windows-8, windows-phone, windows-phone-8

要将应用程序从 Windows Phone 8 移植到 Windows 8，需要付出多少努力？

理想情况下，我想开发一个可以部署到 Windows 8 和 Windows Phone 8 的应用程序。这似乎[不太可能](https://stackoverflow.com/questions/11609058/can-application-written-for-windows-8-run-on-windows-phone-8)，所以我想要下一个最好的东西：

一种开发 Windows Phone 8 应用程序的方法，可以尽可能轻松地将应用程序移植到 Windows 8。

也许我可以避免某些命名空间，在某些部分周围设置某些编译条件等。 - 我希望有人有洞察力列出必要的事情，以便完全轻松地将 Windows Phone 8 应用程序移植到 Windows 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:13:42.933

这取决于您为 Windows Phone 8 创建的应用程序类型。Phone 包含一个非常精简的 WinRT 版本，它带有 XAML，类似于 Silverlight，而不是 WinRT。制作一个应用程序并在任何地方运行是不可能的。

您可以采取的最佳行动计划是尽可能抽象为可移植类库。由于语法冲突，计划至少对 XAML 代码进行大量重复工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:22:45.627

你问的是一个非常广泛的问题。如果不考虑什么类型的应用程序、什么架构、有什么外部障碍（数据库、服务等），那么在不给出一般建议的情况下回答这个问题也将非常困难，因为您可能已经意识到。

Windows Phone 8 仍然主要基于 Silverlight，而不是 WinRT，除了一些关键组件，例如音频路由或文件系统处理（在 WP8 上可用时）。

想要直接在 Win8 上部署 WP8 应用程序也没什么意义，因为应用程序的设计方式大不相同，以支持许多不同的平台。像 WP8 Panorama 这样的控件在 Win8 中没有等价物，WP8 LongListSelector 你可能想为手机调整布局，但为桌面调整不同的布局。

我能给出的唯一建议是坚持严格的 MVVM，在服务中抽象出所有手机/平板电脑特定的 API 调用，并尽可能使用 XAML 主题/模板/资源字典来抽象出任何 UI 配置。

如果您这样做，您将能够非常轻松地移植您的 C#、C++ 和 XAML。也就是说，假设您不是在编写 VoIP 应用程序，或者任何特定于电话的东西 ;-)

# java - 从 HTML 调用本地 Java 库

> ID：13006589
> 
> 赞同：0
> 
> 时间：2012-10-22T07:15:01.467
> 
> 标签：java, html, web-applications

我有一个java安装包（本地系统中带有必要支持文件的jar），是否可以从html调用一个函数（在java安装包中）？或任何其他支持技术

例如：在我的本地系统中，我将拥有 (C:\myapp\lib\test.jar)，我需要从 html 调用 jar 中的方法。可以使用哪种技术来实现这一点。

将使用 Web 应用程序（servlet 容器）来生成 html 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:20:18.970

问：您想运行 .jar 客户端（作为 applet）还是服务器端（作为 servlet）？

听起来您想在客户端的 PC 上执行一个 Applet。听起来您还想读取和写入用户的文件系统，这需要特殊权限。

这是一篇关于创建“受信任的小程序”的好文章：

*   [http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm](http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)

也可以看看：

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/security/spec/security-spec.doc1.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/spec/security-spec.doc1.html)

*   [http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html)

# c# - 将焦点从画布内的其他用户控件设置为文本框？

> ID：13006594
> 
> 赞同：0
> 
> 时间：2012-10-22T07:15:30.947
> 
> 标签：c#, .net, wpf, c#-4.0, caliburn.micro

我在 Window 中使用 Canvas，使其类似于 MDI 应用程序。

画布将包含多个用户控件，它们是子窗口。

我可以在某个文本框的 GotFocus 事件上的 Canvas 内打开一个新的 UserControl。

但是当我单击 Enter 或关闭新窗口时，我想将焦点设置回旧 UserControl 的下一个 TextBox？这是我无法实现的。

我正在将 WPF 与 Caliburn Micro 一起使用？当前使用 EventAggreagator 在 TextBox 的 GotFocus 事件上打开新的 UserControl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:11:02.273

我最近做了类似的事情，我唯一能想到的就是使用`IEventAggregator`发布 UserControl 已关闭的通知，即

```
public class ControlClosedEvent
{
    public ControlClosedEvent()
    {
        // can be an empty event for all intents and purposes
    }
} 
```

每当 UserControl 关闭时，发布事件：

```
 _events.Publish( new ControlClosedEvent() ); 
```

和消费者：

```
public partial class SomeView : UserControl, IHandle<ControlClosedEvent>
{
    public void Handle( ControlClosedEvent message )
    {
        // ugly way of setting the text box as focused
        SomeTextBox.Focus();
    }
} 
```

# mysql - MySQL - 选择带有子查询的查询给出错误

> ID：13006595
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:15:35.253
> 
> 标签：mysql

当我尝试使用子查询创建视图时，mysql 出现问题

这是我想要制作视图的 SQL 脚本。

```
select 
          LOG_ID
          ,REF_ID
          ,TRX_ID
          ,TIME_EXEC
          ,STATUS
          ,RESULT_CODE
          ,ACCOUNT_NO
          ,AMOUNT
          ,REF_NO
          ,TASK_TYPE
          ,NAME_E
          ,NAME_I         
        from (
        select
          LT.LOG_ID
          ,LT.REF_ID
          ,LT.TRX_ID
          ,LT.TIME_EXEC
          ,LT.STATUS
          ,LT.RESULT_CODE
          ,TK.ACCOUNT_NO
          ,TK.AMOUNT
          ,TK.REF_NO
          ,TK.TASK_TYPE
          ,TT.NAME_E
          ,TT.NAME_I
        from
          IB_LOG_TRANSACTIONS LT, IB_TASKS TK, IB_TASK_TYPES TT
        where
          LT.TRX_ID is null
          and LT.REF_ID = TK.REF_ID
          and TK.TASK_TYPE = TT.TASK_TYPE
        union (
        select
          LT.LOG_ID
          ,LT.REF_ID
          ,LT.TRX_ID
          ,LT.TIME_EXEC
          ,LT.STATUS
          ,LT.RESULT_CODE
          ,T.ACCOUNT_NO
          ,T.AMOUNT
          ,TK.REF_NO
          ,TK.TASK_TYPE
          ,TT.NAME_E
          ,TT.NAME_I
        from
          IB_LOG_TRANSACTIONS LT, IB_TRANSFERS T, IB_TASKS TK, IB_TASK_TYPES TT
        where
          LT.TRX_ID = T.TRX_ID
          and LT.REF_ID = T.REF_ID
          and LT.REF_ID = TK.REF_ID
          and TK.TASK_TYPE = TT.TASK_TYPE
        ) union (
        select
          LT.LOG_ID
          ,LT.REF_ID
          ,LT.TRX_ID
          ,LT.TIME_EXEC
          ,LT.STATUS
          ,LT.RESULT_CODE
          ,TD.ACCOUNT_NO
          ,TD.AMOUNT
          ,TK.REF_NO
          ,TK.TASK_TYPE
          ,TT.NAME_E
          ,TT.NAME_I
        from
          IB_LOG_TRANSACTIONS LT, IB_TRANSFERS_DOM TD, IB_TASKS TK, IB_TASK_TYPES TT
        where
          LT.TRX_ID = TD.TRX_ID
          and LT.REF_ID = TD.REF_ID
          and LT.REF_ID = TK.REF_ID
          and TK.TASK_TYPE = TT.TASK_TYPE
        ) union (
        select
          LT.LOG_ID
          ,LT.REF_ID
          ,LT.TRX_ID
          ,LT.TIME_EXEC
          ,LT.STATUS
          ,LT.RESULT_CODE
          ,TF.ACCOUNT_NO
          ,TF.AMOUNT
          ,TK.REF_NO
          ,TK.TASK_TYPE
          ,TT.NAME_E
          ,TT.NAME_I
        from
          IB_LOG_TRANSACTIONS LT, IB_TRANSFERS_FGN TF, IB_TASKS TK, IB_TASK_TYPES TT
        where
          LT.TRX_ID = TF.TRX_ID
          and LT.REF_ID = TF.REF_ID
          and LT.REF_ID = TK.REF_ID
          and TK.TASK_TYPE = TT.TASK_TYPE
        ) union (
        select
          LT.LOG_ID
          ,LT.REF_ID
          ,LT.TRX_ID
          ,LT.TIME_EXEC
          ,LT.STATUS
          ,LT.RESULT_CODE
          ,P.ACCOUNT_NO
          ,P.AMOUNT
          ,TK.REF_NO
          ,TK.TASK_TYPE
          ,TT.NAME_E
          ,TT.NAME_I
        from
          IB_LOG_TRANSACTIONS LT, IB_PAYMENTS P, IB_TASKS TK, IB_TASK_TYPES TT
        where
          LT.TRX_ID = P.TRX_ID
          and LT.REF_ID = P.REF_ID
          and LT.REF_ID = TK.REF_ID
          and TK.TASK_TYPE = TT.TASK_TYPE
        )) 
```

我需要一个很大的帮助，这是我的 MYSQL 脚本，我对 MySQL 不是很熟悉。谢谢你帮助我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:23:40.510

[视图限制](http://dev.mysql.com/doc/refman/5.5/en/view-restrictions.html)。

您不能在视图的 SELECT 查询中使用子查询，这是 MySQL 的限制。试试这个查询 -

```
SELECT LT.LOG_ID
     , LT.REF_ID
     , LT.TRX_ID
     , LT.TIME_EXEC
     , LT.STATUS
     , LT.RESULT_CODE
     , TK.ACCOUNT_NO
     , TK.AMOUNT
     , TK.REF_NO
     , TK.TASK_TYPE
     , TT.NAME_E
     , TT.NAME_I
FROM
  IB_LOG_TRANSACTIONS LT, IB_TASKS TK, IB_TASK_TYPES TT
WHERE
  LT.TRX_ID IS NULL
  AND LT.REF_ID = TK.REF_ID
  AND TK.TASK_TYPE = TT.TASK_TYPE
UNION
SELECT LT.LOG_ID
     , LT.REF_ID
     , LT.TRX_ID
     , LT.TIME_EXEC
     , LT.STATUS
     , LT.RESULT_CODE
     , T.ACCOUNT_NO
     , T.AMOUNT
     , TK.REF_NO
     , TK.TASK_TYPE
     , TT.NAME_E
     , TT.NAME_I
FROM
  IB_LOG_TRANSACTIONS LT, IB_TRANSFERS T, IB_TASKS TK, IB_TASK_TYPES TT
WHERE
  LT.TRX_ID = T.TRX_ID
  AND LT.REF_ID = T.REF_ID
  AND LT.REF_ID = TK.REF_ID
  AND TK.TASK_TYPE = TT.TASK_TYPE
UNION
SELECT LT.LOG_ID
     , LT.REF_ID
     , LT.TRX_ID
     , LT.TIME_EXEC
     , LT.STATUS
     , LT.RESULT_CODE
     , TD.ACCOUNT_NO
     , TD.AMOUNT
     , TK.REF_NO
     , TK.TASK_TYPE
     , TT.NAME_E
     , TT.NAME_I
FROM
  IB_LOG_TRANSACTIONS LT, IB_TRANSFERS_DOM TD, IB_TASKS TK, IB_TASK_TYPES TT
WHERE
  LT.TRX_ID = TD.TRX_ID
  AND LT.REF_ID = TD.REF_ID
  AND LT.REF_ID = TK.REF_ID
  AND TK.TASK_TYPE = TT.TASK_TYPE
UNION
SELECT LT.LOG_ID
     , LT.REF_ID
     , LT.TRX_ID
     , LT.TIME_EXEC
     , LT.STATUS
     , LT.RESULT_CODE
     , TF.ACCOUNT_NO
     , TF.AMOUNT
     , TK.REF_NO
     , TK.TASK_TYPE
     , TT.NAME_E
     , TT.NAME_I
FROM
  IB_LOG_TRANSACTIONS LT, IB_TRANSFERS_FGN TF, IB_TASKS TK, IB_TASK_TYPES TT
WHERE
  LT.TRX_ID = TF.TRX_ID
  AND LT.REF_ID = TF.REF_ID
  AND LT.REF_ID = TK.REF_ID
  AND TK.TASK_TYPE = TT.TASK_TYPE
UNION
SELECT LT.LOG_ID
     , LT.REF_ID
     , LT.TRX_ID
     , LT.TIME_EXEC
     , LT.STATUS
     , LT.RESULT_CODE
     , P.ACCOUNT_NO
     , P.AMOUNT
     , TK.REF_NO
     , TK.TASK_TYPE
     , TT.NAME_E
     , TT.NAME_I
FROM
  IB_LOG_TRANSACTIONS LT, IB_PAYMENTS P, IB_TASKS TK, IB_TASK_TYPES TT
WHERE
  LT.TRX_ID = P.TRX_ID
  AND LT.REF_ID = P.REF_ID
  AND LT.REF_ID = TK.REF_ID
  AND TK.TASK_TYPE = TT.TASK_TYPE 
```

# c# - 在 Linq 中按两个属性分组

> ID：13006600
> 
> 赞同：3
> 
> 时间：2012-10-22T07:15:53.383
> 
> 标签：c#, linq

我有以下课程

```
public class Booking
{
    public string Group { get; set; }
    public BookingType Type { get; set; }
    public BookingStatus Status { get; set; }
    public InvoiceFreq { get; set; }
    public InvoiceLevel { get; set; }
} 
```

我需要按 Linq 中的所有属性对它们进行分组，以便最后两个属性在分组结果中形成一个新字段。像这样：

```
 Group   Type    Status      InvoiceType          
        -------------------------------------------
        Group1  Online  New         Daily-Single
        Group2  Phone   Accepted    Daily-Single
        Group3  Store   Accepted    Weekly-Single
        Group3  Store   Accepted    Weekly-Bulk 
```

这里的 InvoiceFreq 将是 Daily / Weekly 并且 InvoiceLevel = Single 或 Bulk。

到目前为止我的查询是这样的：

```
 var query = from b in Bookings
                        group b by new
                        {
                            b.Group, 
                            b.Type, 
                            b.Status,
                            b.InvoicingFrequency,
                            b.InvoicingLevel
                        } into bookingGroup
                        select new BookingSummaryLine()
                        {
                            Group = bookingGroup.Key.UserGroup,
                            Type = bookingGroup.Key.UserGroup,
                            Status = bookingGroup.Key.FinancialStatus,
                            InvType = String.Format({0}-{1},bookingGroup.Key.InvoicingFrequency, bookingGroup.Key.InvoicingLevel
                        }; 
```

这当然不会给出预期的结果，因为这两个属性分别位于匿名类型中。

有没有办法在 Linq 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:32:04.110

这应该有效：

```
var query = from b in Bookings
    group b by new
    {
        b.Group, 
        b.Type, 
        b.Status,
        InvType = String.Format({0}-{1},b.InvoicingFrequency, b.InvoicingLevel)
    } into bookingGroup
    select new BookingSummaryLine()
    {
        Group = bookingGroup.Key.UserGroup,
        Type = bookingGroup.Key.UserGroup,
        Status = bookingGroup.Key.FinancialStatus,
        InvType = bookingGroup.Key.InvType
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:48:46.307

我不太确定 linq 的语法，但对于 lambda，我会使用它。如果您尝试对所有列进行分组，则基本上使用 distinct 。

```
Context.Booking.Distinct().Select(z=> new BookingSummaryLine { Group = z.Group, Type =        z.Type, Status = z.Status, InvType = (z.InvoiceFrequency + "-" + z.InvoiceLevel }); 
```

# python - 在 svg 中设置默认单位（Python svgwrite）

> ID：13006601
> 
> 赞同：6
> 
> 时间：2012-10-22T07:15:55.397
> 
> 标签：python, svg, cad

我正在使用 python 的 svgwrite 生成 SVG 绘图。每次我想画东西的时候，我都会发现自己在做这个丑陋的尴尬事情：

```
line = drawing.line(start = "%dmm" % start, end = "%dmm" % end) 
```

我希望我能做到：

```
line = drawing.line(start = start, end = end) 
```

有没有办法将整个 svg 绘图的默认单位设置为“mm”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T09:42:16.697

一种可能的方法是设置 viewBox 属性以及文档大小，

```
dwg = svgwrite.Drawing('myDrawing.svg', size=('170mm', '130mm'), viewBox=('0 0 170 130'))

dwg.add(dwg.line(start=(30, 30), end=(50,50)))

dwg.save() 
```

为我生产，

```
<?xml version="1.0" encoding="utf-8" ?>

<svg baseProfile="full" height="130mm" version="1.1" viewBox="0 0 170 130" width="170mm"
xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><line x1="30" x2="50" y1="30" y2="50" />     </svg> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T12:43:52.257

我刚刚发现你可以这样做：

```
from svgwrite import cm, mm
dwg = svgwrite.Drawing('my_drawing.svg', height='10cm', width='10cm')
dwg.add(dwg.line((0*cm, 0*cm), (10*cm, 10*cm))
dwg.save() 
```

# linux - 无法获取 munin 中 IO 服务时间的图表

> ID：13006602
> 
> 赞同：0
> 
> 时间：2012-10-22T07:15:56.283
> 
> 标签：linux, ubuntu, monitoring, munin

我在我的 ec2 ubuntu 10.04 实例上实现 munin 我无法获取 IO 统计信息的图表，但我发现了问题并且 IO 统计信息工作正常。但是我仍然无法获取 IO 服务时间的图表，这是非常重要的参数之一。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:32:44.423

这可能由于几个原因而发生。[munin 文档](http://munin-monitoring.org/wiki/Debugging_Munin_plugins)中列出了调试插件的基本步骤：

*   重启munin节点
*   尝试通过运行插件`munin-run`
*   尝试通过调用插件`munin-node`
*   观察 munin 日志文件

# oracle - JBOSSAS 7.1.1，jdbc6，提取数据库元数据时出错；嵌套异常是 java.sql.SQLException: Closed Connection

> ID：13006603
> 
> 赞同：0
> 
> 时间：2012-10-22T07:16:00.370
> 
> 标签：oracle

```
Error while extracting database product name - falling back to empty error codes: org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is java.sql.SQLException: Closed Connection
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:296) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:214) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:141) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.<init>(SQLErrorCodeSQLExceptionTranslator.java:104) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.mybatis.spring.MyBatisExceptionTranslator.initExceptionTranslator(MyBatisExceptionTranslator.java:84) [mybatis-spring-1.1.1.jar:1.1.1]
    at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:70) [mybatis-spring-1.1.1.jar:1.1.1]
    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:365) [mybatis-spring-1.1.1.jar:1.1.1]
    at $Proxy181.selectOne(Unknown Source)  at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) [mybatis-spring-1.1.1.jar:1.1.1]
    at com.orchestrall.domains.security.repository.mybatis.AccountRepositoryMyBatis.userAuthenticate(AccountRepositoryMyBatis.java:31) [classes:]
    at com.orchestrall.domains.security.impl.SecurityServiceImpl.userAuthenticate(SecurityServiceImpl.java:56) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_35]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_35]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_35]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_35]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [org.springframework.transaction-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at $Proxy187.userAuthenticate(Unknown Source)   at com.orchestrall.web.security.UserSecurityController.userAuthenticate(UserSecurityController.java:52) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_35]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_35]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_35]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_35]
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_35]
Caused by: java.sql.SQLException: Closed Connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - "10.2.0.2.0"]
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - "10.2.0.2.0"]
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - "10.2.0.2.0"]
    at oracle.jdbc.driver.PhysicalConnection.getMetaData(PhysicalConnection.java:1517) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - "10.2.0.2.0"]
    at org.apache.commons.dbcp.DelegatingConnection.getMetaData(DelegatingConnection.java:345) [commons-dbcp-1.4.jar:1.4]
    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.getMetaData(PoolingDataSource.java:245) [commons-dbcp-1.4.jar:1.4]
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:285) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    ... 53 more 
```

# cassandra - Cassandra：创建 CompositeType 列

> ID：13006604
> 
> 赞同：2
> 
> 时间：2012-10-22T07:16:00.590
> 
> 标签：cassandra, composite, cql

我是 cassandra 的新手，我试图创建一个模式，让我有一行

```
users: {
    name: <value>,
    ...
    phone_numbers:1: <value>,
    phone_numbers:2: <value>,
    ...
    phone_numbers: <value>
 } 
```

我一直在阅读有关复合列的内容，并且只能找到主键是复合列的示例。那么是否有可能在一个 CF 中包含上述内容？

我的尝试是：-

```
create column family users with comparator=AsciiType
and key_validation_class=AsciiType
and column_metadata=[
{column_name: name, validation_class: AsciiType, index_type: KEYS},
{column_name: phone_numbers, validation_class: CompositeType(AsciiType, IntegerType), index_type: KEYS}]; 
```

以上失败。任何帮助表示赞赏干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:10:40.437

cassandra 中的 CompositeType 可以用作`comparator`[列名称的类型] 或`key_validation_class`[行键的类型]，但不能用作`default_validation_class`[列值的类型]

```
create column family users with 
comparator='CompositeType(UTF8Type, IntegerType)' 
and key_validation_class='UTF8Type' 
```

应该为你工作。我分享了一篇关于cassandra 中的复合类型的详细[帖子](http://itsallabtamil.blogspot.in/2012/10/cassandra-compositetype-overview-cql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:48:56.463

在 cql 3 中，您可以将其声明为：（为简单起见，使用 ascii 类型）

> 创建具有紧凑存储的表用户（用户 ascii，phoneid ascii，phonenumber ascii，主键（user，phonenumber））；

填写为

> 插入用户（用户、电话号码、电话号码值（'john smith'、'home'、'555-121345'）
> 
> 插入用户（用户、电话号码、电话号码值（'john smith'、'office'、'555-121346'）

并将其检索为

> 从 user = 'john smith' 的用户中选择 *
> 
> 用户，电话号码，电话号码
> 
> '约翰史密斯'，'家'，'555-121345'
> 
> '约翰史密斯'，'办公室'，'555-121346'

希望能帮助到你

# applescript - 如何在 Mac 上的 Safari、Firefox 等浏览器中以编程方式检查下载文件夹的位置？

> ID：13006607
> 
> 赞同：0
> 
> 时间：2012-10-22T07:16:07.327
> 
> 标签：applescript

我是自动化测试的一员，我正在 Mac 上使用 Selenium 和 Applescript 以编程方式下载和安装文件。他们有什么方法可以以编程方式检查浏览器上下载文件夹的位置吗？如果是这样，请建议以及更改 Java 或 Applescript 中下载文件夹位置的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:36:55.027

也许你可以在 Firefox 上这样尝试：

profile = Selenium::WebDriver::Firefox::Profile.new

profile['browser.download.dir'] = "/tmp/webdriver-downloads"

profile['browser.download.folderList'] = 2

profile['browser.helperApps.neverAsk.saveToDisk'] = "应用程序/pdf"

b = Watir::Browser.new :firefox, :profile => profile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:19:30.093

Safari 在 ~/Library/Preferences/com.apple.Safari.plist 中有它的偏好：

```
defaults read com.apple.Safari DownloadsPath 
```

您也可以通过修改属性列表来更改它，但在重新打开 Safari 之前不会应用更改。

```
defaults write com.apple.Safari DownloadsPath "~/Desktop" 
```

# c# - response.writefile 后页面处理停止

> ID：13006609
> 
> 赞同：2
> 
> 时间：2012-10-22T07:16:16.347
> 
> 标签：c#, asp.net, response, export-to-excel

这个问题已被问过很多次，但我仍然无法找到合适的解决方案。我有两个问题。

我正在创建一个 excel 文件，将数据写入其中，然后将其呈现给用户以供下载。我也使用过 microsoft.interop。

第一个问题是：我正在尝试使用消息框（javascript）来显示用户下载 excel 后在 excel 文件中生成了多少行。此消息框从不显示，但代码已执行。我怎样才能做到这一点？

其次：创建 excel 后，即使我手动清理了引用，excel.exe 进程也会在任务管理器中继续运行。

呈现文件后不会显示此警告框。

```
flag = WriteDatasetToExcel(ds);
            if (flag)
            {

                ClientScript.RegisterClientScriptBlock(GetType(), "Javascript", "<script>alert('Number of rows generated : " + ds.Tables[0].Rows.Count + "')</script>");
            } 
```

给出了相关代码

```
excelApp = new Excel.Application();
        excelwrkbook = excelApp.Workbooks.Add(1);
        excelwrksheet = (Excel.Worksheet)excelwrkbook.Sheets[1];
        excelwrksheet.Name = "Application Data"; 
```

写入数据后，保存和渲染是这样完成的：

```
excelwrkbook.SaveAs(filepath, Excel.XlFileFormat.xlWorkbookNormal, Missing.Value, Missing.Value, false, true, Excel.XlSaveAsAccessMode.xlNoChange, Excel.XlSaveConflictResolution.xlLocalSessionChanges, false, Missing.Value, Missing.Value, true);
        excelwrkbook.Close(0, 0, 0);
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.Buffer = true;
        HttpContext.Current.Response.Charset = "";
        HttpContext.Current.Response.AddHeader("content-disposition", "attachment; filename=" + filename);
        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
        HttpContext.Current.Response.WriteFile(filepath);
        excelApp.Quit();
        flag = true; 
```

现在终于清理代码：

```
ReleaseObjects(excelrange);
        ReleaseObjects(excelwrksheet);
        ReleaseObjects(excelwrkbook);
        ReleaseObjects(excelApp); 
```

releaseobjects函数如下：

```
private void ReleaseObjects(Object obj)
{
    if (obj != null && Marshal.IsComObject(obj))
    {
        while (System.Runtime.InteropServices.Marshal.ReleaseComObject(obj) != 0) { }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:28:58.903

首先让我告诉您，在基于 Web 的环境中使用 Microsoft Excel 互操作不是很有效。

我通常使用 openXML 方法来满足此需求。[这里](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/11/19/7813.aspx)

对于您的第一个问题：您的响应内容类型是 application/vnd.ms-excel 因此浏览器不会从该内容执行任何 java 脚本。您必须确定 excel 已下载或事先调用以获取行并以 java 脚本或任何其他可接受的内容类型返回结果。

对于你的第二个问题：不要将它用于不是为它设计的网络环境。

# php - 用户未登录时如何在用户墙上（offline_access）发布消息

> ID：13006613
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:16:34.790
> 
> 标签：php, facebook, facebook-php-sdk

我收到一个错误：

> 致命错误：未捕获的 OAuthException：验证访问令牌时出错：这可能是因为用户已注销，也可能是由于系统错误。在第 1106 行的 /var/www/html/kimunita/dev/include/base_facebook.php 中抛出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:25:07.983

`offline_access`已被脸书删除。现在您可以获得有效期为 60 天的访问令牌。看一看。[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# swing - 使 JTable 单元格准备好被覆盖

> ID：13006614
> 
> 赞同：0
> 
> 时间：2012-10-22T07:16:43.223
> 
> 标签：swing, jtable

我有一个按钮，可以将单列行插入到 JTable 中，其文本为：“新注释：”。我希望一旦用户开始在此单元格上输入（按下按钮后），该文本就可以被覆盖。如何使 JTable 的单元格准备好被覆盖？如何才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:16:21.473

您将需要使用 custom `TableCellEditor`，当`getTableCellEditorComponent`被调用时，如果`value`is `null`，您将使用您的提示播种编辑器并调用该`selectAll`方法（假设您正在为编辑器使用某种类型`JTextComponent`）。

这可能需要您在通话`selectAll`中进行`SwingUtilities.invokeLater`通话。

或者，您可以查看此[提示](http://code.google.com/p/xswingx/)API

# c# - 使用存储过程的 ASP Gridview 中的自定义分页

> ID：13006615
> 
> 赞同：1
> 
> 时间：2012-10-22T07:16:47.987
> 
> 标签：c#, asp.net, gridview, custompaging

我正在尝试使用自定义分页创建 GridView。我有非常大的数据，所以为了提高十个速度，我正在尝试进行自定义分页。

我编写了一个 SQL Server 存储过程，它接受输入参数`SelectedPageNumber`，`SelectedPageSize`并`DataTable`用属于特定页面的结果行填充。存储过程还有一个`MaxPageNumber`as 输出参数。

我能够将页面的数据绑定到 GridView，但我无法弄清楚如何将页码显示`MaxPageNumber`为存储过程的值。

我正在使用 .Net Framework 4.0

它可能是重复的，但我找不到解决方案。

你能帮我吗 ？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:36:54.040

您可以使用控件创建寻呼机`Repeater`，像这样

```
// These are your outputs from that SP
int MaxPageNumber = 10,
    CurrentPageNumber = 4;

void BindPager()
{
    DataTable PagerData = new DataTable();
    PagerData.Columns.Add("pageNo");
    for (int i = 1; i < MaxPageNumber; i++)
      PagerData.Rows.Add(i);
    pager.DataSource = PagerData;
    pager.DataBind();
}

<asp:Repeater runat="server" ID="pager" onitemcommand="pager_ItemCommand" 
        onitemdatabound="pager_ItemDataBound">
   <ItemTemplate>
       <asp:Button runat="server" ID="pageNo" 
                   Text='<%# Eval("pageNo") %>' 
                   CommandArgument='<%# Eval("pageNo") %>'
                   CommandName="DoPaging" />
   </ItemTemplate>
</asp:Repeater>

protected void pager_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
  // Code to highlight current page
  if (e.Item.ItemType == ListItemType.Item || 
      e.Item.ItemType == ListItemType.AlternatingItem)
  {
     Button pageNo = e.Item.FindControl("pageNo") as Button;
     if (pageNo == null) return;
     if (pageNo.Text == CurrentPageNumber.ToString())
        pageNo.BackColor = Color.Blue;
     else
        pageNo.BackColor = Color.Gray;
  }
}

protected void pager_ItemCommand(object source, RepeaterCommandEventArgs e)
{
  // perform your paging here according to page number
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:30:43.973

要显示页码，您可以创建一个从 MinPageNumber 到 MaxPageNumber 的整数列表，将该列表绑定到作为 DataSource 的 Repeater-Control 并让 Repeater 显示每个页码。根据当前页码，您可能需要重新创建该列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:31:02.277

如果您使用自定义分页，那么您必须创建一个自定义页面控件来显示页码。您可以将自定义寻呼机放在网格视图下方，并在页码上的单击事件重新绑定网格。

# perl - Perl 语法错误：在操作员预期的位置找到了裸字

> ID：13006624
> 
> 赞同：0
> 
> 时间：2012-10-22T07:17:21.227
> 
> 标签：perl, sql-server-2008, config

这是我的 perl 脚本代码。在这我收到错误，例如“在 $cmd 操作员预期的位置找到裸字”

```
my $path = $folder."/".$host."_".$database_name.".bak";
$cmd .= "-U $user_name -P $password -S $host -d master -Q "BACKUP DATABASE [$database_name] TO DISK = N'$path'" "; 
```

有人帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:39:06.140

当字符串中包含双引号时，您需要使用`\`.

```
$cmd .= "-U $user_name -P $password -S $host -d master -Q \"BACKUP DATABASE [$database_name] TO DISK = N'$path'\" "; 
```

此外，Perl 允许您使用其他字符作为引号分隔符。`qq`后跟几乎任何字符都与双引号相同。所以你可以做这样的事情来避免反斜杠的需要：

```
$cmd .= qq(-U $user_name -P $password -S $host -d master -Q "BACKUP DATABASE [$database_name] TO DISK = N'$path'" );

$cmd .= qq|-U $user_name -P $password -S $host -d master -Q "BACKUP DATABASE [$database_name] TO DISK = N'$path'" |; 
```

等等...

**更新：**如何在 Perl 中执行系统命令。有以下三种基本方式：

```
system($cmd);  #Goes through the shell if shell metacharacters are detected.
system(@command_and_args);  #first element is the command, the rest are arguments 
```

[`system`](http://perldoc.perl.org/functions/system.html) executes a command and waits for it to return. The return value is the exit status of the program.

```
my @results = `$cmd`;  #Always goes through shell. 
```

[Backticks](http://perldoc.perl.org/perlop.html) execute a command and return its output. You should only use this if you actually need the output; otherwise, it is better to go with `system`.

```
exec $cmd;
exec @command_and_args; 
```

[`exec`](http://perldoc.perl.org/functions/exec.html) is exactly like system, except that it never returns. It effectively ends your program by calling another program.

Use the one that is most appropriate to your situation. Or in this case, since you are executing SQL, consider using the [DBI](http://dbi.perl.org/) module. It's definitely a better approach for anything more than a couple of simple commands.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:25:15.053

看起来你的`"`角色放错了地方。我不确定他们应该在哪里。

在第二行中，字符串文字：

```
"-U $user_name -P $password -S $host -d master -Q " 
```

紧随其后的是裸词

```
BACKUP 
```

# java - 使用 servlet 在 String[] 数组中获取和发送数据

> ID：13006626
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:17:24.990
> 
> 标签：java, jsp, servlets

```
 int i = 0;
 String[] pnumbers = new String[3];
 String[] pqtys = new String[3];

 protected void doPost(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException {

 String pnumber = request.getParameter("pnumber");
 DAO dao = new DAO();
 Product p = dao.checkProduct(pnumber);
 String qunty = request.getParameter("pqty");

  while (i < 3) {
  pnumbers[i] = p.getNumber();
  pqtys[i] = p.getQty();
  i++;
  }
request.setAttribute("pnum" pnumbers);
} 
```

我需要将来自网页的 3 个项目添加到此数组中。但是您可以添加一项

```
<td>
<input type="text" name="pnumber" value="" />
</td>
<td>
<input type="text" name="pqty" value="" />
</td> 
```

在添加这 3 个项目后，我只需要将 3 个项目添加到数组中，我需要再次将该值获取到同一页面，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:43:05.847

一旦你像你所做的那样在你的 Servlet 中设置属性。

```
request.setAttribute("pnum" pnumbers); 
```

将控制从 Servlet 转发到所需的 JSP，您可以在 JSP 中使用

`request.getAttribute(paramName)`

暗示：

```
if(request.getAttribute("pnum")!=null){
    String []strArray = (String []) request.getAttribute("pnum");
    for(int i=0;i<strArray.length;i++){
         out.println(strArray[i]);
    }
} 
```

在所需点打印值。

# jquery - ajax 请求正在信息亭浏览器上缓存

> ID：13006630
> 
> 赞同：2
> 
> 时间：2012-10-22T07:17:42.600
> 
> 标签：jquery, asp.net-mvc-3

我有一个 mvc 3 razor 项目，在 pc 上运行得很好 Ipad 上有一个问题我有一个 artikel 列表和一个添加的测试按钮然后我按下添加的按钮它现在返回日期时间然后我按下添加的按钮它是返回一个日期时间，然后我第二次按下它是返回相同的日期时间，我在 Ipad 上的项目是从缓存中获取值我想，每个人都可以帮助我吗？？？这个jQuery代码：

```
$(document).ready(function (){        
    $(".AddButton").live("click", function(){                
        var buttonId = $(this).attr("id");                
        var id = buttonId.substr(buttonId.indexOf("_"));
        $.ajax({                
            type:'POST',
            dataType:'json',                
            url: "@Url.Action("AddCommandArtikelJson","Home")",
            data: {id:$("#Id"+id).val(), id_priceOnPad: $(this).attr("name")},
            cache: false,
            success: function(result){            
                $("#commandsCount").text(result);
            }
        });

    });
}); 
```

这个控制器功能：

```
 [HttpPost]
    public JsonResult AddCommandArtikelJson(int id, int id_priceOnPad)
    {//my code
         return Json(DateTime.Now);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:40:48.607

在这种情况下，一个常见的技巧是在查询字符串中传递一个随机字符串，这会欺骗浏览器认为请求是不同的，因此您绕过缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T07:48:28.060

当我工作的 .NET 站点缓存 Web 服务请求到影响我的站点功能的程度时，我遇到了同样的问题。这似乎是 iOS6 中的一个共同特征。

这篇 StackOverflow 帖子应该对您有所帮助：[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/q/12506897/1300806)

我已经写了一些关于我在这个问题上的经验的简介：[http ://www.isurinder.com/blog/post/2012/09/24/iOS-Safari-Browser-Has-A-Massive-Caching-Issue!.aspx](http://www.isurinder.com/blog/post/2012/09/24/iOS-Safari-Browser-Has-A-Massive-Caching-Issue!.aspx)

通过将完整的时间戳传递给您的服务应该可以解决您的问题。

# c# - DateTime 1 天长

> ID：13006631
> 
> 赞同：0
> 
> 时间：2012-10-22T07:17:45.037
> 
> 标签：c#, sql, datetime

我想在几天之间创建一个报告，我选择每天生成报告。当我将时间间隔指定为 24:00:00.000 时，它会给出错误：日历 System.Globalization.GregorianCalendar 不支持字符串表示的 DateTime。

23:59:59 导致我的报告延迟。

日期时间格式的 1 天的长度是多少？

这是我在 MSSQL Server 中的程序

```
PROCEDURE [dbo].[Procedure1] 

    @Start datetime, 
    @Finish datetime,
    @TimeRange time
AS
BEGIN

    SET NOCOUNT ON;

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, @Start + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime < @Finish )
  select StartTime, EndTime, Count( Test.ScenarioID ) as TotalPeaks
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime and Test.SessionCloseTime < TR.EndTime
    group by TR.StartTime, TR.EndTime   
END 
```

并调用此程序是here

```
private DataSet GetStoredProcedure1(DateTime StartTime, DateTime FinishTime, DateTime TimeRange)
        {
            DataSet ds = new DataSet();
            SqlCommand cmd = new SqlCommand("Procedure1", connection);
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.AddWithValue("@Start", SqlDbType.DateTime).Value = StartTime;
            cmd.Parameters.AddWithValue("@Finish", SqlDbType.DateTime).Value = FinishTime;
            cmd.Parameters.AddWithValue("@TimeRange", SqlDbType.DateTime).Value = TimeRange;

            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            da.Fill(ds);
            return ds;
        } 
```

当我给出时间范围 00:05:00.00 5 分钟 01:00:00.000 1 小时时，我的代码没有任何问题，但是当我想要每日报告时 24:00:00.00 不起作用。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:29:49.380

数据类型的[范围`time`是 00:00:00 到 23:59:59.999](http://msdn.microsoft.com/en-us/library/bb677243.aspx) ...。因此，即使您让 C# 为您创建正确的 DateTime 对象，您也无法使用您在存储过程中选择的数据类型做您想做的事情。

由于 SQL Server 没有像 .NET 这样的 TimeSpan 数据类型（这将是正确的选择），一个简单的替代方法是传递`@TimeRange`一个用于指定秒/分钟/小时数的整数（取决于您想要的粒度提供）。在 T-SQL 中，将值添加到`@Start`使用[`DATEADD`函数](http://msdn.microsoft.com/en-us/library/ms186819.aspx).

# c - 如何计算 udp 数据包大小 libpcap

> ID：13006634
> 
> 赞同：0
> 
> 时间：2012-10-22T07:17:49.277
> 
> 标签：c, libpcap, packet-sniffers

从 linux 操作系统，我试图用 C 或 python 编写我自己的数据使用监视器。我已经搜索和研究了几天。目前我正在尝试调整[sniffex.c](http://www.tcpdump.org/sniffex.c)以满足我的需求。我已经成功验证了在几个 ftp 会话期间发送和接收的总字节数。

在 sniffex.c 中计算 tcp 数据包大小。我的问题是如何计算 UDP 数据包大小？我已经搜索过这个主题，但没有找到任何东西。这个问题有意义吗？

**更新：**

计算数据包大小的函数如下所示：

```
got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{
...
int size_payload;
...
case IPPROTO_UDP:
    printf("   Protocol: UDP\n");
    size_payload = header->len;
...
} 
```

我还需要加 4`size_payload`吗？

此函数的回调如下所示：

```
/* now we can set our callback function */
pcap_loop(handle, num_packets, got_packet, NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:41:31.637

如果你有一个 UDP 数据报，你可以从它的报头中得到它的大小。

例如，如果你有一个指向UDP 数据报头的指针**char *hdr ，你可以通过这样的结构得到它的长度**

```
int length = *(int *)(hdr + 4); 
```

更多关于 UDP [http://en.wikipedia.org/wiki/User_Datagram_Protocol](http://en.wikipedia.org/wiki/User_Datagram_Protocol)

# json - 如何使用@PathParam？

> ID：13006640
> 
> 赞同：0
> 
> 时间：2012-10-22T07:18:12.363
> 
> 标签：json, jakarta-ee, jax-rs

我正在按照教程的简单步骤进行操作，直到现在我无法弄清楚它为什么会显示错误。

我正在尝试使用简单的 JAX-RS 应用程序返回简单的 JSON。以下是我的代码和`web.xml`设置：

```
package ws;

import javax.ws.rs.core.Context;
import javax.ws.rs.core.UriInfo;
import javax.ws.rs.PathParam;
import javax.ws.rs.Consumes;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.GET;
import javax.ws.rs.Produces;

@Path("/employee/{empno}")
public class EmployeeResource {

    @Context
    private UriInfo context;

    public EmployeeResource() {
    }

    @GET
    @Produces("application/json")
    public String getJson( @PathParam("empno") int empno) {
      switch(empno) {
          case 1 :
              return "{'name':'George Koch', 'age':58}";
          case 2:
              return "{'name':'Peter Norton', 'age':50}";
          default:
              return "{'name':'unknown', 'age':-1}";
      }
    }

    @PUT
    @Consumes("application/json")
    public void putJson(String content) {
    }
} 
```

`web.xml`如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"  
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
           http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <servlet>
      <servlet-name>Jersey REST Service</servlet-name>
      <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
      <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>ws</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
      <servlet-name>Jersey REST Service</servlet-name>
      <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

    <session-config>
      <session-timeout>30</session-timeout>
    </session-config>
  </web-app> 
```

然后我使用地址：

```
localhost:8084/restdemo/resources/employee/empno=1 
```

但它显示404错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:57:17.763

称呼

```
localhost:8084/restdemo/resources/employee/1 
```

A`@PathParam`不是`@QueryParam`. 它的名字来源于它在查询路径中的位置，而不是像`empno=1`. 既然你`@Path`是

```
@Path("/employee/{empno}") 
```

您的 URL 路径中位于 位置的元素`{empno}`会自动分配给您的`@PathParam` `empno`.

**编辑：**

如果你想调用一个 URL，比如

```
localhost:8084/restdemo/resources/employee?empno=1 
```

你必须使用

```
@Path("/employee")
public String getJson(@QueryParam("empno") int empno) 
```

请注意，`?`这是它左侧的 URL 路径和右侧的查询之间的边界。

**暗示：**

您的 JSON 无效。您必须使用双引号`"`而不是单引号`'`：

```
return "{\"name\":\"George Koch\", \"age\":58}"; 
```

# uibutton - UIButton - UIImage 反弹

> ID：13006646
> 
> 赞同：0
> 
> 时间：2012-10-22T07:18:53.570
> 
> 标签：uibutton, ios6

你知道如何让这个按钮弹跳吗？

[http://www.youtube.com/watch?v=Ku1lB9etiN8](http://www.youtube.com/watch?v=Ku1lB9etiN8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:56:52.147

They used some of the [UIView animateWithDuration](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/clm/UIView/animateWithDuration%3adelay%3aoptions%3aanimations%3acompletion%3a) methods. My guess is that that started the buttons behind the large green button, animated them to spin, then animated their position. This is a custom thing they built, and you'll have to build it from scratch as well.

# c# - 如何使用 ajax 日历扩展器在 asp 中为选定日期添加天数？

> ID：13006648
> 
> 赞同：-4
> 
> 时间：2012-10-22T07:19:03.317
> 
> 标签：c#, asp.net

> **可能重复：**
> [如何使用 ajax 日历扩展器在 C# 中添加或减去日期？](https://stackoverflow.com/questions/13006280/how-to-add-or-subtract-dates-in-c-sharp-using-ajax-calendar-extender)

我有两个文本框，我在其中使用了 ajax 日历扩展器。当我从一个文本框中选择一个日期时，我希望在另一个文本框中填充一个日期，该日期是通过添加几天或几个月来选择的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:21:31.650

尝试这个

```
DateTime? SelDate = myCalendarExtender.SelectedDate;

if (SelDate != null)
{
    DateTime SelectedDate = SelDate .Value;
}

DateTime Selected_Date= SelectedDate ;

DateTime result= Selected_Date.AddDays(30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:47:56.517

我假设您希望在`TextBox`用户选择第一个日历日期后更改第二个日期`TextBox`。您需要拦截事件（在客户端）（在 javascript 中）并编写一个处理程序（在 javascript 中），它将根据第一个选择的`OnClientDateSelectionChanged`值更新第二个的值`TextBox`

基本上给出了这个：

```
<asp:TextBox ID="tbFirst" runat="server"></asp:TextBox>
<asp:TextBox ID="tbSecond" runat="server"></asp:TextBox>
<cc1:CalendarExtender ID="CalendarExtender7" 
runat="server" OnClientDateSelectionChanged="DateSelected" TargetControlID="tbFirst" /> 
```

然后在 javascript 中阻止您：

```
function DateSelected(sender,args)
{
     alert('You have selected : ' + sender._selectedDate);
     //TODO: Select the second box and set it's value to whatever is needed 

} 
```

# c# - 在 WinRT WebView 控件中显示图像

> ID：13006650
> 
> 赞同：1
> 
> 时间：2012-10-22T07:19:12.633
> 
> 标签：c#, webview, windows-8, httpwebrequest, microsoft-metro

假设我的`WebView`页面中有一个，其内容由`WebView.NavigateToString(string html)`. 现在的问题是 html 字符串包含一些`<img>`标签，例如

```
<img src="http://www.remotefakesite.com/1.jpg" /> 
```

但是，除非请求具有特殊的 cookie，否则无法正确下载图像。但是请求是由控件*发送*的，我不知道如何修改请求（向其中添加cookie）。我试过设置`HttpRequest.DefaultWebProxy`，但它不适用于内置控件发送的请求。

另一种解决方案是通过我自己的 HttpWebRequest（使用正确的 cookie）将图像下载到本地文件夹，然后将 html 字符串中的 img 标签修改为

```
<img src="files:///xxxxx" /> 
```

但显然`files:///`该方案违反了 Metro 应用程序的安全策略。也不行`ms-appx`，`ms-appdata`因为下载的图像不是我项目的一部分。

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:40:32.607

我在这里做了一些测试，如果您可以将图像下载到项目文件夹中的示例。示例在“媒体”文件夹中，然后您可以使用以下代码打开图像：

```
<img src="ms-appx-web:///Media/10.jpg" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T04:21:05.830

如果图像大小不是问题，您可以尝试使用带有所需 cookie 的自定义 HTTP 请求下载它，对其进行 base64 编码，并将其插入到 src 属性中：

```
<img src="data:image/png;base64,iVBOR8Q..." /> 
```

并使用 NavigateToString 方法将其与 html 的其余部分一起传递给 WebView。

这可能不是世界上*最好*的解决方案，但与其他选项相比，它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:24:21.073

您可以启用应用程序的图片库功能，并使用图片库位置来下载图像。[这是访问图片库的指南](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465191.aspx)。

**更新：**

然后从图片库中的图像对象创建图像。一个例子是：

```
async private void LoadImage()
{
    try
    {
        IReadOnlyList<Windows.Storage.StorageFile> resultsLibrary =
            await Windows.Storage.KnownFolders.PicturesLibrary.GetFilesAsync();
        MessageBlock.Text += "Show image: " + resultsLibrary[0].Name + "\n";
        Windows.Storage.Streams.IRandomAccessStream imageStream =
            await resultsLibrary[0].OpenAsync(Windows.Storage.FileAccessMode.Read);
        Windows.UI.Xaml.Media.Imaging.BitmapImage imageBitmap =
            new Windows.UI.Xaml.Media.Imaging.BitmapImage();
        imageBitmap.SetSource(imageStream);
        ImagePlayer.Source = imageBitmap;
    }
    catch (Exception ex)
    {
        MessageBlock.Text += "Exception encountered: " + ex.Message + "\n";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:43:07.177

您可以更好地使用它，就像 HTML 一样编写：

```
this.InitializeComponent();

string htmContent = @" <html>
<head></head>
<body>
<img src="http://www.remotefakesite.com/1.jpg" />
</body>
</html>";

preview.NavigateToString(htmContent); 
```

只有你需要一个 webview 元素（这里称为“预览”）

# android - 在android中更改语音调制

> ID：13006651
> 
> 赞同：0
> 
> 时间：2012-10-22T07:19:19.603
> 
> 标签：android

我需要更改音频文件的语音调制，用 SoundPool 尝试了一整天，但它只会改变音频的播放速度。我想改变调制。需要你的建议，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:58:33.177

有关您需要做什么的简要说明，请参阅[Python Audio Frame Pitch Change的公认答案。](https://stackoverflow.com/questions/6326822/python-audio-frame-pitch-change)对于允许您进行 FFT / 逆 FFT 的 Java 库，请参阅例如[FFTW](http://www.fftw.org/download.html)（我自己没有使用过它，所以我无法为该部分提供任何帮助）。

# c# - 在 DateTimePicker 中显示数据库中的时间

> ID：13006653
> 
> 赞同：1
> 
> 时间：2012-10-22T07:19:28.217
> 
> 标签：c#, sql-server, datetimepicker

我的 SQL Server 数据库中有一个列（数据类型为`time(7)`）来存储时间。当我尝试从数据库中检索该值并以`DateTimePicker`（格式设置为仅显示时间）显示时，它会引发`InvalidCastException`错误。

这是铸造发生的线。

```
r = com.ExecuteReader();
dtpOutTime.Value = (DateTime)r["OutTime"]; 
```

我可以理解为什么会抛出错误，但我无法找到纠正它的方法。

如何仅显示数据库中的时间`DateTimePicker`？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:22:56.253

为`System.Data.DbType.Time`您使用 .NET Framework 类型`System.TimeSpan`。

例如：

```
dtpOutTime.Value = DateTime.Today + (TimeSpan)r["OutTime"]; 
```

（如果您想将 TimeSpan 添加到`Today`午夜并且时间跨度为 6 小时，则结果为`10/22/2012 6:00:00 AM`）

# ssrs-2008 - 如果在 SSRS 报告中有条件地隐藏行，则动态调整大小

> ID：13006655
> 
> 赞同：0
> 
> 时间：2012-10-22T07:19:32.163
> 
> 标签：ssrs-2008, reporting-services

我正在编写一份报告，该报告显示产品的配置，这取决于所选的产品具有特定的属性。我认为在左侧（tblDetailsB）和报告右侧（tblDetailsA）有一个带有表格的矩形会很方便（不要介意A和B的顺序......）。

在矩形下方，我有另一个表格，其中显示了抽屉列表（如果它们是配置的一部分），该列表来自另一个数据集。

[![ssrs 截图](../Images/56070399852d3d5a75164f0cca78fff7.png)](https://i.stack.imgur.com/OULL5.jpg)

我的问题是保存 tblDetailA 和 tlbDetailB 的矩形的大小是固定的（这通常是为什么选择一个矩形来保存..），而我的 tlbLade 抽屉子报告在很多空白下..

我可以为 tblDetailsA 和 tblDetailsB 使用子报表，但我不想拥有太多的子报表。我让自己陷入了这个混乱，也许有人知道解决这个问题的更好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:15:21.953

感谢[http://www.sqldev.org/sql-server-reporting-services/hidden-rows-still-displayed-9660.shtml](http://www.sqldev.org/sql-server-reporting-services/hidden-rows-still-displayed-9660.shtml) 我发现我必须在详细信息下抑制/隐藏静态行组中的行组（先切换到高级模式..）。当我这样做时，当隐藏的行时，矩形（容器）的大小被忽略了:) ![问题解决了](../Images/9d0322d4e5f141ffd0061f6c23e6ed0e.png)

问候，

麦克风

# r - 使用相互转换为无向图后的 igraph 非互易边

> ID：13006656
> 
> 赞同：1
> 
> 时间：2012-10-22T07:19:37.780
> 
> 标签：r, igraph

我正在为 R 处理 igraph 中的有向图。我正在尝试将其转换为无向图，其中前者的倒数边仍然存在。应该很容易，但我得到了奇怪的结果。

首先我是这样做的

```
 library(igraph)
    load("dmNet.Rdata")
    #http://www.unet.univie.ac.at/~a0406222/dmNet.Rdata

    recNet <- as.undirected(net, mode = "mutual",edge.attr.comb="sum") 
```

当我检查 E(recNet)$weight 时，有很多权重为 1 的边，这应该是不可能的，因为两个倒数边的总和必须至少为 2。然后我就这样做了

```
 recNet <- as.undirected(net, mode = "mutual",edge.attr.comb="c") 
```

现在我可以看到实际上有一些边只包含一个值。我的新图 recNet 似乎包含网络的非互易边。我做错了什么，还是我误解了“共同选择”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:18:53.837

发生这种情况是因为图中的某些边是自环。所有最终权重为 1 的边都是自环：

```
all(which(E(recNet)$weight == 1) %in% which(is.loop(recNet)))
# [1] TRUE 
```

显然，自环被认为是有向图中的相互边。如果您想将自循环视为非相互的，那么您可以将它们从图中删除。不过要小心，因为某些顶点有多个自环，您可能不想删除这些。

# javascript - 检测到 Node JS 可能的 EventEmitter 内存泄漏

> ID：13006659
> 
> 赞同：1
> 
> 时间：2012-10-22T07:20:05.583
> 
> 标签：javascript, node.js

我已经阅读了[这个问题](https://stackoverflow.com/questions/9768444/possible-eventemitter-memory-leak-detected)的答案，并尝试了很多方法来解决我的问题，但无法解决 - 因此从我这边发布了这个查询。

基本上我有一个数组中的服务列表 - 在我的 NodeJS 应用程序运行的不同盒子上运行的数字约为 1500。根据我的代码，我 ssh 到 /a 框并**通过期望脚本**，然后 cd 到特定目录以获取每个服务版本/构建 ID，该 ID 存储在每个服务的特定单独路径的特定文件中。对于某些服务，相同的文件（具有版本/构建信息）可能存储在框中的不同位置。所以我在应用程序中有一个算法，如果尝试获取第一个路径的详细信息失败，我将使用其他脚本在不同的路径中查找信息：

主要代码块：

```
exports.getservicedetails = function(box,res) {
        var job = [];
        for (i = 0; i < services.length; i++ )
        {
                var children = new Object();
                children.server = services[i];
                children.box = box;
                children.process = spawn('./scripts/info.sh', [children.server , children.box , getStageURL(children.box)]);
                children.runstate = 1;
                job.push(children);
                createChildEvents(job, i, res);
        }
} 
```

现在我为每个生成的任务设置所有事件：

```
function createChildEvents(child, id, res){
        (child[id]).process.stderr.on('data', function (data) {
                (child[id]).runstate = 0;
        });
        (child[i]).process.on('exit', function (code) {
                (child[id]).runstate = 0;
                checkstate(child, res); // function to check if all spawned tasks has exited
        });
        (child[id]).process.stdout.on('data', function (data) {
                var result = data.toString().split("\r\n"); // split the stdout outputted lines
                for (var i = 0; i < result.length; i++)
                {
                       console.log('Server : ' +  (child[id]).server + " PID : " + (child[id]).process.pid + ' ' + (child[id]).box);
                        if ((child[id]).box.length > 0 && result[i].match(/No such file or directory/gi) != null) {
                                (child[id]).process = spawn('./scripts/info2.sh ',[(child[id]).server, (child[id]).box, getStageURL((child[id]).box)]);
                                (child[id]).box = '';
                                (child[id]).runstate = 1;
                                createChildEvents(child, id, res);
                                break;
                        }
                        if(result[i].match(/release_version*/) != null || result[i].match(/app.version*/) != null)
                                (child[id]).serversion = (result[i].split('='))[1];
                        if(result[i].match(/release_number*/) != null || result[i].match(/app.id*/) != null)
                                (child[id]).serproduct = (result[i].split('='))[1];
                }
        });
} 
```

问题是，在获得如下所述的第 11 个控制台日志后，我看到了错误：

```
Server : a PID : 27200 myboxname
Server : b PID : 31650 myboxname
Server : d PID : 31644 myboxname
Server : e PID : 31664 myboxname
Server : f PID : 28946 myboxname
Server : g PID : 32507 myboxname
Server : h PID : 29329 myboxname
Server : i PID : 29905 myboxname
Server : j PID : 29883 myboxname
Server : k PID : 481 myboxname
Server : l PID : 777 myboxname
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at EventEmitter.addListener (events.js:168:15)
    at EventEmitter.once (events.js:189:8)
    at Transport.logException (src/node_modules/winston/lib/winston/transports/transport.js:118:8)
    at logAndWait (src/node_modules/winston/lib/winston/logger.js:613:15)
    at async.forEach (src/node_modules/winston/node_modules/async/lib/async.js:86:13)
    at Array.forEach (native)
    at _forEach (src/node_modules/winston/node_modules/async/lib/async.js:26:24)
    at Object.async.forEach (src/node_modules/winston/node_modules/async/lib/async.js:85:9)
    at Logger._uncaughtException (src/node_modules/winston/lib/winston/logger.js:636:9)
    at process.EventEmitter.emit (events.js:115:20)
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at EventEmitter.addListener (events.js:168:15)
    at EventEmitter.once (events.js:189:8)
    at Transport.logException (src/node_modules/winston/lib/winston/transports/transport.js:117:8)
    at logAndWait (src/node_modules/winston/lib/winston/logger.js:613:15)
    at async.forEach (src/node_modules/winston/node_modules/async/lib/async.js:86:13)
    at Array.forEach (native)
    at _forEach (src/node_modules/winston/node_modules/async/lib/async.js:26:24)
    at Object.async.forEach (src/node_modules/winston/node_modules/async/lib/async.js:85:9)
    at Logger._uncaughtException (src/node_modules/winston/lib/winston/logger.js:636:9)
    at process.EventEmitter.emit (events.js:115:20) 
```

我尝试添加 'process.setMaxListeners(0);' 在我的代码中的很多地方，但我仍然看到这个错误？

知道如何解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:38:03.763

你有一个错字。`child[i]`代替`child[id]`

因此，您在每次`createChildEvents`调用中为同一个发射器设置了一个侦听器。

# range - 如何形成字段必须以某些字母开头的 Endeca 查询

> ID：13006661
> 
> 赞同：2
> 
> 时间：2012-10-22T07:20:09.943
> 
> 标签：range, startswith, endeca

是否可以形成一个 Endeca 查询来检索必须以某些字母开头的字段？比如说让所有用户的第一个字母是`A`？我检查了范围过滤器，但它只支持数字字段以及通配符搜索。但到目前为止，没有什么效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:01:23.677

[正如Paul Lemke](https://stackoverflow.com/users/44336/paul-lemke)所提到的，创建维度是解决问题的一种方法。通配符不是一种选择，因为性能开销以及不相关的记录。但是我们使用其他几个替代方案解决了这个问题。

1.  为对象创建一个名为“StartWith”的新属性，存储对象的第一个字母并使其可搜索。我们发现它比创建维度更容易。

有一个问题，像“A”这样的字母在 Endeca 中通常是停用词。我们可以做一些工作来解决这个问题。

1.  获取第一个字母的 ASCII 值并将数值存储到该属性中。这种方法的另一个优点是我们可以使用范围过滤器。但是您不能搜索“AB”类型的要求。
2.  预先添加一些字符，例如 ^^^My name 并搜索 ^^^M。这种方法的优点是您可以搜索以 AB 开头的字母等条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:26:29.303

Endeca 当前版本 (6.1) 没有像其他编程语言中的“startswith”功能一样工作的搜索过滤器。

我确实有两个可能会让你接近的选择：

1.  如果您真的只是在寻找第一个字母，您可以为字母表的每个字母（A、B、C ...）设置一个维度值。然后，您可以细化每个字母并仅查看以字母 A、B、C 等开头的值。唯一的缺点是您只能根据设置的维度值进行过滤。因此，如果您添加了“A”，则无法过滤以“AB”开头的任何内容。您可以继续添加“AB”、“BA”、“CA”等等，但这会很快变得笨拙。

2.  如果您想要更接近“startswith”功能的东西，唯一的其他选择是使用通配符搜索。基本上你会像这样进行属性搜索：`N=0&Ntk=Username&Ntt=ab*`

    通配符搜索的诀窍是它会在该属性中的多个单词中执行此操作。因此，假设您有这些值的数据集：

    *   史密瑟斯史密斯
    *   拉里·史密斯
    *   珍娜-史密斯

    搜索`sm*`实际上会返回所有 3 个结果，因为“sm”在他们的姓中。即使是带有破折号的那个也会像 Endeca 认为的那样返回，这是一个单独的词。（虽然不确定，但可能会关闭它）。

    所以基本上它归结为：在属性中添加一个单词，将该属性设置为允许通配符搜索，然后对该属性执行“blah*”，您应该会得到您正在寻找的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:20:30.110

您是否尝试过第一个相关性排名模块，该模块应该根据与字段开头的接近程度进行排名？

这听起来与您正在寻找的内容相似，并且与通配符一起可能会产生您想要的结果。

# visual-c++ - 为什么 Visual C++ 版本号中有逗号而不是点

> ID：13006663
> 
> 赞同：6
> 
> 时间：2012-10-22T07:20:14.133
> 
> 标签：visual-c++, versioning, version-numbering

我已经看到我的 Visual C++ 项目有以下使用 COMMAS 而不是 DOTS 版本的声明：

```
#define FILEVER        11,0,2,0
#define PRODUCTVER     11,0,2,0
#define STRFILEVER     "11, 0, 2, 0\0"
#define STRPRODUCTVER  "11, 0, 2, 0\0" 
```

这里的[MS文章](https://docs.microsoft.com/en-us/windows/desktop/menurc/versioninfo-resource)也有逗号的相同值（实际上上面的声明是基于那篇文章）。为什么我们在这里使用 COMMAS？当我打开编译的文件属性时，我看到 FileVersion 为 11.0.2.0 但 ProductVersion 为 11,0,2,0 - 我的 QA 朋友说这是一个错误:)。我是否缺少某些标准或某些内部机制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T07:48:02.247

在前两个定义中，因为 Microsoft 资源文件语法要求逗号。对于后两个定义，Microsoft 约定也坚持使用逗号。微软可能想要与众不同。

文件版本取自非字符串变体，并在文件资源管理器中用点打印。产品版本取自字符串。您可能可以自己编写带点的字符串。这是一个字符串，应该没关系。但是您必须`.rc`手动编辑该文件——Visual Studio 将编写逗号。

至于前两个定义，我可以看到在一般 C++ 中选择逗号的原因。如果你有`11.0.2.0`，这将是任何上下文中的语法错误，你唯一能做的就是使用`#`运算符将​​其转换为字符串。但是使用逗号，您可以将其扩展为数组或结构的定义。喜欢`int version[] = { 11,0,2,0 };`。如果您想在代码中检查版本，这很有用。

# asp.net - 在 Asp.net 中离开页面之前生成 pdf

> ID：13006668
> 
> 赞同：0
> 
> 时间：2012-10-22T07:20:39.567
> 
> 标签：asp.net

提交表单后和重定向页面之前需要生成一个pdf，要求用户保存文件，然后重定向页面。

下面是我的代码

```
 DataSet objData = objInsert.Execute();

  DocLib dl = new DocLib();

  System.IO.MemoryStream ms = dl.GenerateForm(objData.Tables[0].Rows[0]);

  Response.AddHeader("content-disposition", "attachment;filename=" +OrderNo + ".pdf");
  Response.OutputStream.Write(ms.GetBuffer(), 0, ms.GetBuffer().Length);
  Response.OutputStream.Flush();
  Response.OutputStream.Close();

  Response.Redirect("OrderList.aspx"); 
```

但是目前，一旦出现保存对话框，页面就会停止导航并保持在同一页面中。如何重定向到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:26:19.583

我看不出影响 Redirect 工作的理由。作为另一种解决方案，您可以试试这个。

```
Page.ClientScript.RegisterStartupScript(typeof(Page),"navigation",
         "<script>window.location.href='OrderList.aspx'</script>") 
```

# maple - 如何通过具有第一个数字和这两个数字之间的距离来找到第二个数字

> ID：13006670
> 
> 赞同：0
> 
> 时间：2012-10-22T07:20:41.460
> 
> 标签：maple

我对枫树很陌生，我不知道该怎么做！我有 10 个数字，为​​了找到最接近这个数字的 k 个数字，我需要保持所有数字之间的距离并对它们进行排序，根据这些距离我可以得到哪个 x 是最接近当前数字的 x，所以：

```
for i from 1 to 10 do
  for j from 1 to 10 do
    dist[j]     := abs(x[i]-x[j]);
    result[i,j] := abs(x[i]-x[j]);
  end do; 
end do;

for h from 1 to 10 do
  for k from 1 to 10 do 
    arr[k] := result[h,k];   
  end do;

  distances := (quicksort(arr,1,10));
  for t from 1 to 10 do
    sortedMatrix[h,t] := distances[t];
  end do; 
end do;

print(sortedMatrix); 
```

现在我有了距离和一个数字，但我不知道另一个数字是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:35:35.253

如果我理解正确，您从一个包含 N 个元素的数组开始，并且对于这些 N 个元素中的每一个，您都想要该数组中最近的邻居。我的方法是先对数组进行排序，然后对其进行循环，将每个元素的最近邻居设置为排序数组中的邻居。

示例：假设您有数组 [5,1,86,54,23,46]。如果你对它进行排序，你会得到 [1,5,23,46,54,86]。要找到最近的邻居，您需要遍历数组并查看相邻的两个元素。例如，46 有 23 和 54 作为排序数组中的相邻元素。45 最接近 54，所以这是他的邻居。

不需要计算元素之间的所有距离（n*n 差异），您只需要排序数组中相邻节点之间的距离（2*n 差异）。

您可以通过查看排序数组中的 k 个最近邻居（2*k*n 差异）来扩展 k 最近邻居。

# c - 我收到了这个警告：数组函数参数上的 sizeof 将返回 'const char *' 而不是 'const char []' 的大小

> ID：13006672
> 
> 赞同：5
> 
> 时间：2012-10-22T07:20:58.653
> 
> 标签：c

> **可能重复：**
> [为什么 sizeof(param_array) 是指针的大小？](https://stackoverflow.com/questions/11622146/why-sizeofparam-array-is-the-size-of-pointer)

我是 C 新手，`clang`编译代码时收到警告：

```
#include<stdio.h>

char *strcpy (char destination[],const char source[]);
int main(void) {
    char str1[] = "this is a very long string";
    char str2[] = "this is a short string";
    strcpy(str2, str1);
    puts(str2);
    return 0;
}
char *strcpy (char destination[], const char source[]) {
    int size_of_array = sizeof source / sizeof source[0];
    for (int i = 0; i < size_of_array; i++) {
        destination[i] = source[i];
    }
    return destination;
} 
```

我不知道以下警告是什么意思：

```
string_copy_withou_pointer.c:12:29: warning: sizeof on array function parameter
      will return size of 'const char *' instead of 'const char []'
      [-Wsizeof-array-argument]
        int size_of_array = sizeof source / sizeof source[0];
                                   ^
string_copy_withou_pointer.c:11:46: note: declared here
char *strcpy (char destination[], const char source[]) { 
```

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T07:24:49.250

这个警告告诉你，如果你打电话`sizeof(char[])`，你不会得到数组的大小，而是`char*`指针的大小。

这意味着您的变量`size_of_array`将是错误的，因为它不会代表真实数组的大小。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T07:23:57.603

那是因为`const char source[]`in argument position 只是`const char *source`. 例如，参见[Steven Summit 的 C 笔记](http://www.eskimo.com/~scs/cclass/notes/sx10f.html)。

在这种特殊情况下，您需要调用`strlen`. 当不处理字符串时，将数组的大小作为单独的参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:23:38.117

[我想你正在寻找这个。](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:25:25.840

将数组传递给函数时，数组的大小不会跟随。实际上它是作为指针传递的，这就是警告消息提到的原因

> 将返回 'const char *' 的大小

# ruby - Ruby 中的二十一点模拟会产生奇怪的概率

> ID：13006684
> 
> 赞同：0
> 
> 时间：2012-10-22T07:21:53.160
> 
> 标签：ruby, probability, montecarlo, blackjack

下面是模拟一个简单的二十一点游戏的代码。玩家和庄家（房子）抽两张牌。玩家然后击牌直到他达到 17。庄家（房子）然后击球直到他与玩家平局或破产。考虑到玩家先玩，他获胜的几率对于任何策略都应该低于 50%。然而，由于某种原因，当我重复模拟时，玩家似乎赢得了超过 50% 的时间。我的代码中一定有一些错误给了我这个结果。

```
one_suit = [2,3,4,5,6,7,8,9,10,10,10,10,11]; #the value of the cards for blackjack
$full_deck = one_suit*4; #clubs, diamonds, hearts and spades
$deck = $full_deck.dup; #start off the game with a full deck

class Player
  attr_accessor :ace_count
  attr_accessor :hand_value

  def initialize(ace_count,hand_value)
    @ace_count  = ace_count;
    @hand_value = hand_value;
  end

  def hit #instance method, vs. self.hit = class method
    choice_of_card = rand($deck.length); #choose a random card out of the deck
    drawn_card = $deck[choice_of_card]; #draw that random card from the deck
    $deck.delete_at(choice_of_card); #remove that card from the array
    if drawn_card == 11 #if you draw an ace
     self.ace_count += 1;
    end 
    self.hand_value += drawn_card;
  end

  def flip_aces
    while self.hand_value > 21 && self.ace_count > 0 #repeat until hand is below 21 or aces are all flipped
     self.ace_count -= 1 #ace gets flipped to a 1
     self.hand_value -= 10 #ace goes from 11 to 1
    end
  end

end

def oneplayergame
 $deck = $full_deck.dup; #start a new game with a full deck 
 #generate the house and the player 
 house = Player.new(0,0);
 player1 = Player.new(0,0);
 #both the house and the player draw two cards
 house.hit; house.hit; player1.hit; player1.hit;
 while player1.hand_value <= 17 #PLAYER STRATEGY: ON WHAT CARD DOES THE PLAYER STAND
  player1.hit;
  player1.flip_aces; 
 end
 while house.hand_value < player1.hand_value && player1.hand_value <=21 #HOUSE DRAWS CARDS IF UNDER PLAYER VALUE AND PLAYER IS NOT BUST
  house.hit;
  house.flip_aces; 
 end
 #outcome

 if player1.hand_value < house.hand_value && house.hand_value <= 21
  return -1;
 elsif player1.hand_value > house.hand_value && player1.hand_value <= 21
  return 1;
 elsif player1.hand_value < house.hand_value && house.hand_value > 21
  return 1;
 elsif player1.hand_value > house.hand_value && player1.hand_value > 21
  return -1;
 else return 0;
 end
end

#the simulation
wins = 0;
losses = 0;
rounds=10000;

for i in 1..rounds
 oneplayergame;
 if oneplayergame >0 
  wins +=1;
 elsif oneplayergame <0
  losses +=1
 end
end

print wins/(wins+losses).round(3)*100; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:30:43.820

这段代码

```
for i in 1..rounds
 oneplayergame;
 if oneplayergame >0 
   wins +=1;
 elsif oneplayergame <0
   losses +=1
end 
```

错了：那是跟注`oneplayergame`三次：只有当玩家输掉第二次和第三次跟注时才算输，这会扭曲结果。您应该只调用`oneplayergame`一次，将结果分配给局部变量

# objective-c - 有没有办法将 ObjectiveC 块包装到函数指针中？

> ID：13006685
> 
> 赞同：9
> 
> 时间：2012-10-22T07:21:55.827
> 
> 标签：objective-c, ios, c, callback, objective-c-blocks

我必须为 iOS 应用程序中的特定 C 库提供 C 风格的回调。回调没有`void *userData`或类似的东西。所以我无法在上下文中循环。我想避免引入全局上下文来解决这个问题。一个理想的解决方案是 Objective-C 块。

我的问题：有没有办法将块“转换”到函数指针或以某种方式包装/隐藏它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:34:13.367

从技术上讲，您可以访问块的函数指针。但是这样做是完全不安全的，所以我当然不推荐它。要了解如何操作，请考虑以下示例：

```
#import <Foundation/Foundation.h>

struct Block_layout {
    void *isa;
    int flags;
    int reserved; 
    void (*invoke)(void *, ...);
    struct Block_descriptor *descriptor;
};

int main(int argc, char *argv[]) {
    @autoreleasepool {
        // Block that doesn't take or return anything
        void(^block)() = ^{
            NSLog(@"Howdy %i", argc);
        };

        // Cast to a struct with the same memory layout
        struct Block_layout *blockStr = (struct Block_layout *)(__bridge void *)block;

        // Now do same as `block()':
        blockStr->invoke(blockStr);

        // Block that takes an int and returns an int
        int(^returnBlock)(int) = ^int(int a){
            return a;
        };

        // Cast to a struct with the same memory layout
        struct Block_layout *blockStr2 = (struct Block_layout *)(__bridge void *)returnBlock;

        // Now do same as `returnBlock(argc)':
        int ret = ((int(*)(void*, int a, ...))(blockStr2->invoke))(blockStr2, argc);
        NSLog(@"ret = %i", ret);
    }
} 
```

运行产生：

```
Howdy 1
ret = 1 
```

这是我们对直接使用`block()`. 因此，您可以将`invoke`其用作函数指针。

**但正如我所说，这是完全不安全的。实际上不要使用这个！**

如果您想查看有关执行您所要求的方法的文章，请查看： http: [//www.mikeash.com/pyblog/friday-qa-2010-02-12-trampolining-blocks -with-mutable-code.html](http://www.mikeash.com/pyblog/friday-qa-2010-02-12-trampolining-blocks-with-mutable-code.html)

这只是一篇很棒的文章，描述了你需要做什么才能让它发挥作用。可悲的是，它永远不会在 iOS 上运行（因为您需要将页面标记为可执行，而您不允许在应用程序的沙箱中执行此操作）。但无论如何，一篇很棒的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T07:31:09.607

如果您的块需要上下文信息，而回调不提供任何上下文，恐怕答案是明确的不。块必须在某处存储上下文信息，因此您将永远无法将这样的块转换为无参数函数指针。

在这种情况下，精心设计的全局变量方法可能是最好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-14T02:16:24.130

[MABlockClosure](https://github.com/mikeash/MABlockClosure)可以做到这一点。但这对于您需要的任何东西都可能是矫枉过正的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-19T16:06:06.727

我知道这已经解决了，但是对于感兴趣的各方，我有另一个解决方案。

将整个函数重新映射到新的地址空间。新的结果地址可用作所需数据的键。

```
#import <mach/mach_init.h>
#import <mach/vm_map.h>

void *remap_address(void* address, int page_count)
{
    vm_address_t source_address = (vm_address_t) address;
    vm_address_t source_page = source_address & ~PAGE_MASK;

    vm_address_t destination_page = 0;
    vm_prot_t cur_prot;
    vm_prot_t max_prot;
    kern_return_t status = vm_remap(mach_task_self(),
                                &destination_page,
                                PAGE_SIZE*(page_count ? page_count : 4),
                                0,
                                VM_FLAGS_ANYWHERE,
                                mach_task_self(),
                                source_page,
                                FALSE,
                                &cur_prot,
                                &max_prot,
                                VM_INHERIT_NONE);

    if (status != KERN_SUCCESS)
    {
        return NULL;
    }

    vm_address_t destination_address = destination_page | (source_address & PAGE_MASK);

    return (void*) destination_address;
} 
```

请记住处理不再需要的页面，并注意每次调用需要比[MABlockClosure](https://github.com/mikeash/MABlockClosure)更多的内存。

（在 iOS 上测试）

# wpf - 将 WPF 应用程序模块集成到基于窗口窗体的应用程序中

> ID：13006688
> 
> 赞同：0
> 
> 时间：2012-10-22T07:22:36.253
> 
> 标签：wpf, winforms

我创建了一个 wpf 应用程序，它有一个 mainwindow.xaml 和两个用户控件 usercontrol.xaml 和 usercontrol2.xaml。

现在我希望这个 WPF 应用程序在窗口窗体平台下运行。这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:42:33.490

您可以使用表单上的[ElementHost控件来执行此操作。](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)

[这里有一个很好的关于这个主题的](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms)教程。

# android - 调试android程序的最佳方法是什么？

> ID：13006689
> 
> 赞同：0
> 
> 时间：2012-10-22T07:22:39.107
> 
> 标签：android, debugging

好吧，我希望调试器在产生错误的行号上指出我？如果我在运行时得到空值，或者我的服务 url 路径没有退出，它不会将我指向特定的行。

有没有最好的方法来调试 android 中的程序，而不仅仅是用 log cat 跟踪值？

我正在使用 Eclipse IDE 进行 android 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:27:16.360

如果您使用的是 eclipse，则可以使用其内置的调试器。

[http://developer.android.com/tools/debugging/debugging-projects.html](http://developer.android.com/tools/debugging/debugging-projects.html)

在你的代码中设置一些断点，然后跟随它直到它抛出一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:01:27.560

如果可能，logcat 错误堆栈跟踪应该为您提供错误发生的行。

如果您不知道，如果您双击 eclipse logcat 中的堆栈跟踪，它会显示文件中的行。

如果您不想一直连接设备，您还可以查看[ACRA](http://acra.ch/)和[BugSense 。](http://www.bugsense.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:28:45.043

Eclipse 和 IntelliJ 等流行的 JAVA 和 Android IDE 都带有内置调试工具。两者都应该足以满足您的需要

# javascript - 如何在Javascript中检查对象实例的实例

> ID：13006690
> 
> 赞同：1
> 
> 时间：2012-10-22T07:22:41.643
> 
> 标签：javascript, instanceof

我正在研究 JavaScript，但我遇到了一些验证：

我想检查作为参数给出的变量是否是对象实例的实例。为了更清楚，这里有一个例子：

```
var Example = function () {
    console.log ('Meta constructor');
    return function () {
        console.log ('Instance of the instance !');
    };
};

var inst = new Example();
assertTrue(inst instanceof Example.constructor); // ok

var subInst = new inst();
assertTrue(subInst instanceof Example.constructor); // FAIL
assertTrue(subinst instanceof inst.constructor); // FAIL 
```

我如何检查这`subInst`是一个实例`Example.{new}`？还是`inst.constructor`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:52:21.727

首先，您不要检查`.constructor`，而是检查构造函数，即`Example`. 每当您测试`.constructor`属性时，这将是在实例上找到的属性（如果您将其设置在构造函数的原型上）。

所以

```
(new Example) instanceof Example; // true 
```

其次，如果你的`Example`函数返回一个函数，那么`Example`它实际上不是构造函数，因此你不能对它进行任何类型的原型继承检查。构造函数将始终返回一个对象，该对象将是构造函数的一个实例。

相反，您拥有的是一个工厂函数，它创建*可用作*构造函数的函数。函数只会通过和的`instanceof`检查。`Function``Object`

```
var Ctor = example(); // PascalCase constructor, camelCase factory
var inst = new Ctor();
inst instanceof Ctor; // true 
```

但是请查看@franky 发布的链接，它应该让您对需要做什么有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:55:41.740

```
subInst.__proto__ == inst.prototype 
```

# javascript - 如何使用 JavaScript 创建此 API 并分解方法

> ID：13006694
> 
> 赞同：3
> 
> 时间：2012-10-22T07:22:52.200
> 
> 标签：javascript, design-patterns, api-design

假设我想要这个 API 作为一个例子来做应用程序：

```
var db = new Database('db-name'); // DB connection
var todo = new Todo(db); // New "Todo" and pass it the DB ref
// I want this API:
todo.model.create('do this', function (data) {
  console.log(data);
}); 
```

我目前的设置如下：

```
function Todo (storage) {
  this.storage = storage;
};

Todo.prototype.model = {
  create: function (task, callback) {
    // The problem is "this" is Todo.model
    // I want the "super", or Todo so I can do:
    this.storage.save(task, callback);
  }
} 
```

所以，如果你看到评论，问题是`this`里面的“”`model.create`显然是在引用`Todo.model`，但我需要它来抓住“ `super`”。

我能想到的最好的是：

```
Todo.prototype.model = function () {
  var self = this;
  return {
    create: function (task, callback) {
      // The problem is "this" is Todo.model
      // I want the "super", or Todo so I can do:
      self.storage.save(task, callback);
    }
  }
} 
```

但这两个都不是很好。最大的问题是我不想将所有方法都放在`model`单个对象（第一个示例）或函数（第二个）内部。我希望能够将它们从模型 def 内部取出。其次，我想要`todo.model.create`API。

有没有设计模式来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:30:00.253

你不能`todo.model`像你写的那样使用原型模式，因为*它*`model`是.*`todo`*

 *我认为你需要：

1.  一个新`Model`对象，您*可以*在其上使用原型模型。

2.  在`Todo`构造函数中，创建一个`Model`对象。理想情况下，使用只读“getter”函数来允许访问该模型对象，但不会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:02:02.157

使用`bind`，您可以执行以下操作：

```
function Todo (storage) {
  this.storage = storage;
  this.model = {};

  var methodNames = Object.keys(TodoModel);

  for(var i = 0; i < methodNames.length; ++i) {
    var methodName = methodNames[i];
    var method = TodoModel[methodNames];

    model[methodName] = method.bind(this);
  }
};

var TodoModel = {
  create: function(task, callback) {
    // Note that when this method is called using Todo.model.create,
    // 'this' will point to the Todo instance.
    this.storage.save(task, callback);
  }
};

function test(storage) {
  var todo = new Todo(storage);
  var task = {};

  todo.model.create(task, function(err, savedTask) {
    // ...
  });
} 
```

基本上是一张地图，因此您可以将其`TodoModel`替换为地图集合，您将不再需要调用`Object.keys`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:32:35.940

您可以`model`在构造函数中设置，如下例所示：

```
function Todo (storage) {
  var self = this;

  this.storage = storage;

  this.model = {
    create: function(task, callback) {
      self.storage.save(task, callback);
    }
  };
}; 
```

或者，您可以使用[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，但我认为这会使事情变得不必要地复杂化，因为您必须找到一个适用于旧浏览器的实现，并且它与支持 EcmaScript 5 的新浏览器中的本机实现不冲突。*

# objective-c - 如何从ios图像库的图像中获取数据？

> ID：13006700
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:23:17.697
> 
> 标签：objective-c, ios

我的项目有问题。我需要获取图像库的一张图像的数据。我曾使用 uiimagepickerView 但无法从图像中获取数据。任何人请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:08:13.653

我认为您的问题是将图像转换为 NSData。如果我是正确的，那么您可以使用以下代表将选择的图像`UIImagePicker`转换`NSData`为`UIImagePicker`：

```
- (void) imagePickerController:(UIImagePickerController *)picker
         didFinishPickingImage:(UIImage *)image
         editingInfo:(NSDictionary *)editingInfo
{
   NSData* pictureData = UIImagePNGRepresentation(image);
} 
```

# android - 发送短信时出现异常

> ID：13006702
> 
> 赞同：0
> 
> 时间：2012-10-22T07:23:20.490
> 
> 标签：android, sms

我想制作一个用于发送短信的应用程序。我为此目的使用以下代码。但我收到了一些 BroadCastReceiver 异常。这是代码：

```
 public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sendsmslayout);        
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
        txtMessage = (EditText) findViewById(R.id.txtMessage);

        /*
        Intent sendIntent = new Intent(Intent.ACTION_VIEW);
        sendIntent.putExtra("sms_body", "Content of the SMS goes here..."); 
        sendIntent.setType("vnd.android-dir/mms-sms");
        startActivity(sendIntent);
        */

        btnSendSMS.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
                String phoneNo = txtPhoneNo.getText().toString();
                String message = txtMessage.getText().toString();               
                if (phoneNo.length()>0 && message.length()>0)                
                    sendSMS(phoneNo, message);                
                else
                    Toast.makeText(getBaseContext(), 
                        "Please enter both phone number and message.", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    //---sends a SMS message to another device---
    private void sendSMS(String phoneNumber, String message)
    {      
        /*
        PendingIntent pi = PendingIntent.getActivity(this, 0,
                new Intent(this, test.class), 0);                
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, pi, null);        
        */

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                      
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
    } 
```

这是一个例外：

```
10-22 12:38:37.461: E/ActivityThread(1219): Activity org.secure.sms.SendSMS has leaked IntentReceiver org.secure.sms.SendSMS$3@44e98630 that was originally registered here. Are you missing a call to unregisterReceiver()?
10-22 12:38:37.461: E/ActivityThread(1219): android.app.IntentReceiverLeaked: Activity org.secure.sms.SendSMS has leaked IntentReceiver org.secure.sms.SendSMS$3@44e98630 that was originally registered here. Are you missing a call to unregisterReceiver()?
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher.<init>(ActivityThread.java:797)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ActivityThread$PackageInfo.getReceiverDispatcher(ActivityThread.java:608)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ApplicationContext.registerReceiverInternal(ApplicationContext.java:724)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ApplicationContext.registerReceiver(ApplicationContext.java:711)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ApplicationContext.registerReceiver(ApplicationContext.java:705)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:308)
10-22 12:38:37.461: E/ActivityThread(1219):     at org.secure.sms.SendSMS.sendSMS(SendSMS.java:105)
10-22 12:38:37.461: E/ActivityThread(1219):     at org.secure.sms.SendSMS.access$0(SendSMS.java:56)
10-22 12:38:37.461: E/ActivityThread(1219):     at org.secure.sms.SendSMS$1.onClick(SendSMS.java:46)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.View.performClick(View.java:2364)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.View.onTouchEvent(View.java:4179)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.widget.TextView.onTouchEvent(TextView.java:6540)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.View.dispatchTouchEvent(View.java:3709)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
10-22 12:38:37.461: E/ActivityThread(1219):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
10-22 12:38:37.461: E/ActivityThread(1219):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
10-22 12:38:37.461: E/ActivityThread(1219):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.os.Looper.loop(Looper.java:123)
10-22 12:38:37.461: E/ActivityThread(1219):     at android.app.ActivityThread.main(ActivityThread.java:4363)
10-22 12:38:37.461: E/ActivityThread(1219):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 12:38:37.461: E/ActivityThread(1219):     at java.lang.reflect.Method.invoke(Method.java:521)
10-22 12:38:37.461: E/ActivityThread(1219):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-22 12:38:37.461: E/ActivityThread(1219):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-22 12:38:37.461: E/ActivityThread(1219):     at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:28:27.047

**在sendSMS**`BroadcastReceiver`方法之外定义（作为全局对象）。然后在Activity 的**onPause**中，调用**unregisterReceiver 取消**注册监听器。

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:28:02.290

[你可以在这里](https://stackoverflow.com/questions/9078390/intentrecieverleakedexception-are-you-missing-a-call-to-unregisterreceiver)和[这里](https://stackoverflow.com/questions/9781769/activity-has-leaked-intentreceiver)找到你的答案。下一次，请谷歌为`Exception`你得到。******

# d3.js - d3.js 桑基图：矩形填充颜色

> ID：13006712
> 
> 赞同：6
> 
> 时间：2012-10-22T07:23:54.787
> 
> 标签：d3.js, sankey-diagram

所以我在玩 d3.js 桑基图。

![在此处输入图像描述](../Images/81fda02a5077b8ab39474efd91554ae2.png)

在[此示例](http://bost.ocks.org/mike/sankey)中（如上图所示），颜色是使用定义的

```
var color = d3.scale.category20(); 
```

对于每个节点，都有一个矩形，并且通过改变样式来填充该矩形：

```
.style("fill", function(d) {
    return d.color = color(d.name.replace(/ .*/, ""));
}) 
```

我正在寻找有关使用自定义颜色的建议。如果我只想使用 6 种颜色，但根据 .json 文件中的值选择节点矩形颜色。

例如，假设我想展示 NFL 球队的蛇形图表。每种颜色代表球队所在的分区。因此，如果他们移动到不同的分区，颜色会发生变化。并且为每个季节创建节点。类似的东西。

那么是否可以运行

```
node.append("rect")
    .attr("height", function(d) { return d.dy; })
    .attr("width", sankey.nodeWidth())
    .style("fill", function(d) {
        return d.color = color(d.name.replace(/ .*/, ""));
    })
    .style("stroke", function(d) {
        return d3.rgb(d.color).darker(2);
    })
   .append("title")
    .text(function(d) { return d.name + "\n" + format(d.value); }); 
```

基于 json 文件中的值的颜色？我只是在想一个 if 语句，但有没有更简单的方法？我可以在 json 中包含十六进制颜色代码吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T14:05:53.260

[或者，您可以使用文档](https://github.com/mbostock/d3/wiki/Ordinal-Scales)中提到的 d3 序数比例将颜色显式映射到分区。请参阅底部的 Colorbrewer。

```
var color = d3.scale.ordinal()
    .domain(["foo", "bar", "baz"])
    .range(["#fff","#000","#333"]); 
```

进而

```
.attr("fill", function(d) { return color(d.division); }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T09:27:55.227

在这种情况下，听起来您想在 JSON 中包含颜色。您可以以浏览器识别的任何方式包含它，例如作为名称（“white”）或十六进制（“#fff”）。有关支持的颜色规范的完整列表，请参阅[SVG 规范](http://www.w3.org/TR/SVG/types.html#DataTypeColor)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-23T14:44:22.107

替换`const color = d3.scaleOrdinal(d3.schemeCategory20);`为：

```
const color = d3.scaleOrdinal() 
.domain(["Crude oil","Natural gas",...])
.range(["#FD3E35","#FFCB06",...]); 
```

并留在：

```
.style('fill', (d,i) => {
  d.color = color(d.name.replace(/ .*/, ''));
  return d.color;}) 
```

# java - JEdi torPane 中开括号的不正确呈现

> ID：13006717
> 
> 赞同：0
> 
> 时间：2012-10-22T07:24:12.997
> 
> 标签：java, macos, swing, jeditorpane

我有一个带有 groovy 编辑器的 NetBeans 平台应用程序，创建如下

```
JEditorPane editorPane = new JEditorPane();
EditorKit kit = CloneableEditorSupport.getEditorKit("text/x-groovy");
editorPane.setEditorKit(kit); 
```

客户端记录了一个错误（匿名），即编辑器中的某些字符在 OS X 10.7.5 (Lion) 中未正确呈现，并提供了屏幕截图。

看起来只有 '(' 和 '{' 字符的左半部分被渲染，而不是右半部分，但其余字符（在屏幕截图中）渲染得很好。

下面给出了显示一堆打开和关闭圆括号的屏幕截图片段。

![在此处输入图像描述](../Images/1b27981106cd6c64903ec668d83a126f.png)

到目前为止，我一直无法重现该问题。我希望有人能指出我正确的方向。

有没有其他人见过类似的东西？

# jquery - 从 jQuery 1.4.2 升级到 1.8.2 后选择器不工作

> ID：13006720
> 
> 赞同：0
> 
> 时间：2012-10-22T07:24:46.330
> 
> 标签：jquery, jquery-selectors

DOM：

```
$(".feed > div:not([feedtype=top]):[isforward]"); // working in 1.4.2
$(".feed > div:not([feedtype=top]):[isforward]"); // not working in 1.8.2 
```

我想选择 的子级`.feed`，它没有属性`feedtype`等于`top`但有`isforward`属性。

有谁知道原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:32:27.453

只是链接属性选择器应该可以工作：

```
$(".feed > div[feedtype!=top][isforward]"); 
```

选择器中的第二个冒号对我来说看起来很奇怪。冒号用于 CSS 伪选择器或 jQuery 选择器扩展。在你拥有它的位置没有意义。

# java - 自动化 gdb - gdb 的管道标准输入和标准输出

> ID：13006724
> 
> 赞同：1
> 
> 时间：2012-10-22T07:24:57.207
> 
> 标签：java, automation, gdb

我需要从程序开始到结束跟踪给定应用程序中某些变量集的更改。我想到了使用gdb。

高层是如何计划的，启动 gdb，为我的所有变量设置观察点（它们现在都是全局的），并执行“运行”命令，一旦有任何更改，gdb 将记录并停止位置，我会执行“继续”。连续执行此操作，直到应用程序退出。因此，我应该拥有所有必需变量的详细日志。

为了自动化这个过程，我编写了一个 java 代码，在其中我将 gdb 作为子进程打开，并尝试使用子进程的标准输入和标准输出的句柄与它进行交互。我正在使用 processbuilder 类在 Java 中创建子流程，并写入创建的子流程的标准输入和标准输出。但它似乎并没有像我想象的那样工作。基本上通过阅读标准输出，我可以看到 gdb 正在启动并加载所需的目标应用程序，但由于某种原因，我无法通过写入其标准输入来与 GDB 交互。

这是我为自动化 gdb 而编写的测试代码

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.util.ArrayList;

public class GDBTest {
    private InputStream outStr = null;
    private OutputStream inpStr = null;
    private boolean state = false;

    public static void main(String[] args) {
        GDBTest gdb = new GDBTest();
        gdb.test(null);
    }

    public void test(String[] args) {
        ArrayList<String> cmd = new ArrayList<String>();
        cmd.add("gdb");
        cmd.add("testApp");
        ProcessBuilder pb = new ProcessBuilder(cmd);
        try { 
            Process p = pb.start();
            inpStr = p.getOutputStream();   /* Handle to the stdin of process */
            outStr = p.getInputStream();    /* Handle to the stdout of process */
            BufferedReader br = new BufferedReader(new InputStreamReader(outStr));

            while(true) {
                System.out.println(br.readLine());
                state = br.ready();
                if(state == false) {
                    break;
                }
            }

            inpStr.write("watch c88\n".getBytes());
            while(br.ready()) {
                System.out.println(br.readLine());
            }

            inpStr.write("run\n".getBytes());
            while(br.ready()) {
                System.out.println(br.readLine());
            }

        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

我不确定这有什么问题！有人可以建议如何以这种方式自动化 GDB。

谢谢，

微内核

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:57:41.107

哦，想通了，我错过了 inpStr.flush() ......它修复了一切！

# iphone - iPhone - iPhone5 对现有应用程序的支持？

> ID：13006728
> 
> 赞同：0
> 
> 时间：2012-10-22T07:25:15.910
> 
> 标签：iphone, ios, ios5, ios6, iphone-5

我是否必须为 iPhone5 放置一个单独的 xib Like 1 为 iPhone4 和更少的 1 这样做似乎是非常糟糕的做法。任何人都可以对此有所了解吗？iPhone5也使用自动布局？我不明白自动布局是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:14:25.903

观看有关该主题的 WWDC 2012 视频。三个 1 小时的视频教会了我将应用程序迁移到自动布局所需的所有知识。

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:18:54.603

如果您的主要问题是新的屏幕尺寸，请确保添加 Default-568h@2x.png。您的应用程序需要这个 640 × 1136 的图像才能利用 iPhone 5 的全屏。

也使用

`[[UIScreen mainScreen] applicationFrame]`

获取当前屏幕的宽度和高度。不要硬编码 320 宽 480 高。

`CGRect aFrame = [[UIScreen mainScreen] applicationFrame];` `width=aFrame.size.width; height=aFrame.size.height;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:27:23.397

单独的 xib 文件：是的，是可能的方法之一。

自动布局：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

（谷歌第一击）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T07:03:34.610

我发现并将帮助其他人： [https ://github.com/mindsnacks/UIImage-MSImageNamed568hSupport](https://github.com/mindsnacks/UIImage-MSImageNamed568hSupport)

使用这个我们可以为 iPhone5 加载 568h 大小的图像，如果存在 ow 加载正常图像很有帮助...

例子：

```
#import "UIImage+MSImageNamed568hSupport.h"
.
.
IBimgViewBG.image=[UIImage ms_imageNamed568hSupport:[NSString stringWithFormat:@"sample.png"]];
.
. 
```

注意：在您的项目中包含此图像

```
sample.png      // for earlier versions
sample-568h.png // for iphone5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:45:41.993

我修改了我的应用程序以包含自动布局。老实说，如果我更主动一些，我会在设计它们时考虑到新的屏幕尺寸——我不会再犯这个错误了！

您如何处理它实际上取决于您如何设计原始应用程序。

# java - 读取空格分隔的值

> ID：13006729
> 
> 赞同：2
> 
> 时间：2012-10-22T07:25:20.270
> 
> 标签：java, file-io, io

我正在尝试从配置文件中读取空格分隔值。我正在阅读一个 PostgreSQL 配置文件`pg_hba.conf`文件，下面是该文件的数据：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# IPv4 local connections:

host    all         all         127.0.0.1/32          md5 
```

我必须获取上述值 host, all, all, 127.0.0.1/32, md5 并修改并将修改后的值写回同一个文件。

下面是我用来读取文件的代码：

```
BufferedReader in = new BufferedReader(new FileReader("pg_hba.conf"));
String str;
str = in.readLine();
while ((str = in.readLine()) != null) {
    System.out.println(str);
}
in.close(); 
```

我怎样才能得到那些空格分隔的值？是否可以用相同的格式再次写入它，即用相同的空间量回到这个文件？

我们可以使用这个`Property`类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:31:29.570

例如，您可以使用从标准 Java 类[String中](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)[拆分](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)出来的方法。

```
str.split("\\s+"); 
```

另一种可能性是使用更“高级”的库，如[Google Guava](https://code.google.com/p/guava-libraries/)，它提供了很好的实用程序类，例如[`Splitter`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)用于此类任务：

```
Splitter.on(' ').split("foo bar") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:31:18.420

您可以使用 String.split() 方法。

```
 String[] sa= str.split(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:35:07.330

您应该使用带有自定义分隔符的 csv 阅读框架。这样你会更快，并且需要维护的代码更少。

[Open CSV](http://opencsv.sourceforge.net/#custom-sepators)看起来最成熟，但你也应该看看[apache commons csv](http://commons.apache.org/csv/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:53:56.413

根据您的问题，我假设输入字符串的格式不会改变。基于此，提供了代码片段。

> 我怎样才能得到那些空格分隔的值？

```
String values[] = new String[9];
bool addingSpace = false;
String value = "";
int ind = 0;
for(int i=0; i<str.length; i++)
{
    char indexValue = str.charAt(i);
    if(Character.isWhitespace(indexValue))
    {
        if(!addingSpace)
        {
            values[ind++] = value;
            value = "";
        }
        addingSpace = true;
    } 
    else if(Character.isLetter(indexValue))
    {
        if(addingSpace)
        {
            values[ind++] = value;
            value = "";
        }
        addingSpace = false;
    }

    value += indexValue;
} 
```

> 是否可以用相同的格式再次写入它，即用相同的空间量回到这个文件？

```
String values[] = new String[9]; 
```

该数组具有确切编号的所有数据。之间的空间。当你想写到文件时，你可以使用相同的数组。

# c# - Asp.net饼图如何在图例和yvaluemember中显示不同的值

> ID：13006730
> 
> 赞同：2
> 
> 时间：2012-10-22T07:25:23.210
> 
> 标签：c#, asp.net, charts, pie-chart

以下是代码： **ASPX**代码

```
<asp:Chart ID="Chart1" runat="server" Width="414px" Height="396px" BackColor="Transparent"
            Palette="SeaGreen">
            <Series>
                <asp:Series Name="Education" XValueMember="State" YValueMembers="Education" IsVisibleInLegend="true"
                    ChartType="Pie" Color="255, 255, 128">
                </asp:Series>
            </Series>
            <ChartAreas>
                <asp:ChartArea Name="ChartArea1" Area3DStyle-Enable3D="true">
                    <AxisX LineColor="DarkGray">
                        <MajorGrid LineColor="LightGray" />
                    </AxisX>
                    <AxisY LineColor="DarkGray">
                        <MajorGrid LineColor="LightGray" />
                    </AxisY>
                    <Area3DStyle Enable3D="True" WallWidth="5" LightStyle="Realistic"></Area3DStyle>
                </asp:ChartArea>
            </ChartAreas>
            <Legends>
                <asp:Legend>
                </asp:Legend>
            </Legends>
        </asp:Chart> 
```

**客户服务**代码

```
var table = new DataTable();

table.Columns.Add("State", typeof(string));
table.Columns.Add("Education", typeof(long));

table.Columns.Add("Lbl");
var row = table.NewRow();
row["State"] = "Gujarat";
row["Education"] = 791;

table.Rows.Add(row);
row = table.NewRow();
row["State"] = "Delhi";
row["Education"] = 978;
table.Rows.Add(row);

row = table.NewRow();
row["State"] = "Panjab";
row["Education"] = 1650;
table.Rows.Add(row);

Chart1.DataSource = table;
Chart1.DataBind(); 
```

我的问题是我想在图例中显示不同的值，而在实际的饼图区域标签中显示不同的值。我该怎么做？

我尝试了各种组合，但没有通过我想要的是图例应该包含来自一列的值和来自另一列的饼图值。这是我想要的图片 ![在此处输入图像描述](../Images/b083560dffc9c5cf1a418b00af369689.png)

列`Education`包含我想在图表区域中显示的整数值。

请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:50:30.450

将`Series`属性设置为`IsValueShownAsLabel="true"`

# ios - 当我在 xcode 中构建我的项目时，我得到了一个错误，比如 clang error:input files not found

> ID：13006732
> 
> 赞同：0
> 
> 时间：2012-10-22T07:25:26.037
> 
> 标签：ios, objective-c, clang

我正在尝试使用objective c在xcode中开发一个应用程序。当我构建我的项目时出现类似的错误

```
clang error:no input files found
command/users/chairman/Desktop/xcode.app/contents/Developer/ToolChains/XcodeDefault.xctoolchains/usr/bin/clang failed with exit code1 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:51:16.347

我相信您没有复制整个错误消息。无论如何，你应该看到[这个链接](https://stackoverflow.com/questions/10619865/clang-error-no-such-file-or-directory-users-waterskiingmithrill-development)或[这个](https://stackoverflow.com/questions/11517926/learning-objective-c-command-developer-usr-bin-clang-failed-with-exit-code-1)。

# c# - 如何将参数值放入 SQL 的前缀搜索中

> ID：13006735
> 
> 赞同：2
> 
> 时间：2012-10-22T07:25:34.677
> 
> 标签：c#, sql

我正在我的 ASP.NET 应用程序中执行 SQL 前缀搜索。为此，我编写了一个存储过程，其中我正在编写以下查询：

```
SELECT Description, ProductDescriptionID
FROM Production.ProductDescription
WHERE CONTAINS (Description, ' "top*" ' ); 
```

我`@pvchProductName`在我的程序中有参数。如何在上述查询中用参数值替换**顶部**单词？我面临单引号和双引号的语法问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:27:42.180

```
DECLARE @searchTerm nvarchar(60) = N' "' + @pvchProductName + N'*" ';
// where the "60" above should be adjusted to account for the length
// of pvchProductName, plus 5\. So if pvchProductName is [n]varchar(30),
// then nvarchar(35) would be fine.

SELECT Description, ProductDescriptionID
FROM Production.ProductDescription
WHERE CONTAINS (Description, @searchTerm); 
```

?

但是，尚不清楚您希望在过滤条件中包含多少引号/星号/空格 - 您可能需要检查一下。

# php - Apache Solr 转义查询

> ID：13006736
> 
> 赞同：2
> 
> 时间：2012-10-22T07:25:45.443
> 
> 标签：php, solr, search-engine, solarium

我正在使用 Apache Solr 和用于 PHP 的[Solarium](http://www.solarium-project.org/)客户端库。

问题是特殊字符，破折号（`-`）。

当我的搜索查询中有破折号时，我没有得到任何匹配项。

我试图通过使用来解决这个问题`Solarium_Query_Helper::escapeTerm()`。但我再也没有得到任何匹配。破折号用反斜杠转义`\`。

这个问题的解决方案是什么？

我正在考虑在索引时转义所有字段，但这听起来不是一个好主意。

这是我的部分`schema.xml`：

```
 <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>
...
<fields>
...
  <field name="myfield" type="text_general" indexed="true" stored="true" />
</fields>
...
<defaultSearchField>text</defaultSearchField>
<copyField source="myfield" dest="text" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:27:00.383

这些是您需要转义的一些特殊字符。它们在[这里](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html#Escaping%20Special%20Characters)列出：

```
+ - && || ! ( ) { } [ ] ^ " ~ * ? : \ 
```

You can escape them using the backslash `\`. I'm not a Solarium expert but the function you're using seems to do what needs to be done. Probably there is another reason why you don't get the expected matches back.

# database-design - 用于跟踪库存数据的相互依赖或集成表

> ID：13006737
> 
> 赞同：1
> 
> 时间：2012-10-22T07:25:50.517
> 
> 标签：database-design, data-structures

我是一名初级程序员，尤其是数据库设计的新手。

不久前，我在业余时间创建了一个程序来跟踪和绘制 java 中的股价变化。当时我懒得为它安装一个数据库，所以它只是使用一堆 CSV 文件来存储数据，每个股票都被跟踪（例如 GOOG.csv、BHP.csv）。

我决定更新它以使用数据库作为学习活动，但在我的设计中我遇到了障碍。我应该继续我之前为每只股票设计的单独数据堆还是整合它们。也就是说，我应该为每个跟踪的股票创建一个表格，并为每天的数据创建一条新记录，还是应该有一个带有股票标识符的通用“股票数据”表。

第一个似乎更直接，获取所有记录就像

```
SELECT * 
FROM GOOG 
```

第二个在哪里

```
SELECT *
FROM stock_data
WHERE stock_name="GOOG" 
```

就像我说的，我是一个完全的数据库新手。对我来说，第一个似乎会更快，但总体而言是一个糟糕且难以管理的设计，无法很好地扩展。如果第一个很好，第二个似乎可能会不必要地慢。

我意识到，由于我的项目规模，任何一个都可能工作得很好，但作为这类问题的规则，哪一个是正确的设计选择？

欢迎任何 sage DB 设计建议。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:18:18.780

一次偶然的机会，我也写了一个类似的程序来跟踪我自己的投资。一个合适的模式是

```
STOCKS
id or stock tracker or something unique
name

PRICES
stock (foreign key to stocks)
curdate
price 
```

价格表的主键是 stock + curdate。

如果您想跟踪采购、销售、股息和成本，那么您至少需要一张桌子（如果不是两张）。我的大部分投资都是在具有复杂赎回计划的债券上，所以我也为它们准备了一些特殊的表格。

# jquery - 将 css 添加到 :last-child 但前提是它不是 :odd

> ID：13006739
> 
> 赞同：2
> 
> 时间：2012-10-22T07:25:55.223
> 
> 标签：jquery

我有一个动态生成的 div 列表，我有这个脚本来制作交替的背景颜色——为了 IE。

```
<style type="text/css">
.box { height:30px; width:100px; background-color:#fff; }
</style>

<script type="text/javascript">
    $(document).ready(function () {
    $(".box:odd").css("background-color", "#f1f1f1");
    });
</script> 
```

我的html：

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
... 
```

我想对 :last-child 应用特殊的 css 样式，但前提是 :last-child 不是 :odd - 仅意味着它具有白色背景。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:28:26.750

```
 $(".box:last").not(':odd').css("background-color", "#f1f1f1"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-10T12:24:05.583

仅 CSS：

```
.box:last-child:nth-child(even) { /* Special CSS here */ } 
```

它比使用 jquery 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:06:21.367

你可以试试这个：

```
$(document).ready(function () {
    if($('.box').length-1%2!=0){
        $(".box:odd").filter(":last").css({"background":"red"});            
    }
}); 
```

这是小提琴：http: [//jsfiddle.net/jYxeA/](http://jsfiddle.net/jYxeA/)

# jquery - Shadowbox + jScrollpane 不起作用？

> ID：13006749
> 
> 赞同：0
> 
> 时间：2012-10-22T07:26:27.087
> 
> 标签：jquery, shadowbox, jquery-jscrollpane

试图让 jScrollpane 与 shadowbox 一起工作。没那么顺利。使用 Shadowbox 的 iframe 选项，它显示正确的动画和全部，但没有应用滚动。在我的 iframe 中，我有一个用 class="scroll-pane" 包围内容的 div。下面的代码在 iframe 内。

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="/scripts/scrollpane/jquery.mousewheel.js"> </script>
        <script type="text/javascript" src="/scripts/scrollpane/jquery.jscrollpane.min.js"></script>
        <link type="text/css" href="/scripts/scrollpane/jquery.jscrollpane.css" rel="stylesheet" media="all" />

        <script type="text/javascript">
           jQuery(document).ready(function () {

           $(function () {
               $('.scroll-pane').jScrollPane();
           });
                });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:02:00.183

这是 jquery 1.8.2 的错误，而 1.8.1 和 1.8.0
使用 1.7.2 jscrollPane 可以正常工作

# jquery - 使用 reg exp 如何单独替换文件名？

> ID：13006750
> 
> 赞同：0
> 
> 时间：2012-10-22T07:26:34.133
> 
> 标签：jquery, regex

我的来源：

```
Video/webm/Task_2.4a_Host_treated.webm

Video/ogv/Task_2.4a_Host_treated.theora.ogv

Video/MP4/Task_2.4a_Host_treated.mp4 
```

我需要单独更换（Task_2.4a_Host_treatment.theora 或 Task_2.4a_Host_treatment ）区域吗？如何使用 reg.exp 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:34:17.007

[工作演示。](http://jsfiddle.net/Hat2k/)

这个正则表达式将匹配最后一个正斜杠之后的所有内容，在它自己的组中捕获扩展名，因此当我们进行替换时可以将其放回原处：

```
var regex = /\/[^/]*?(\.[^/.]*)?$/mg; 
```

`$1`现在您可以使用（其中指的是捕获的组，即文件扩展名）进行替换：

```
str = str.replace(regex, '/whatyouwanttohaveinstead$1'); 
```

请注意，我使用`m`修饰符来打开多行模式。由于这`$`匹配每一行的结尾（除了字符串的结尾）。

正则表达式各部分的一些解释：

```
\/         # matches a literal slash
[^/]*      # matches arbitrarily many non-slash characters
?          # makes the previous repetition ungreedy, so it does not consume the
           # file extension if there is one
(          # starts a capturing group, which can be accessed later with $1
\.         # matches a literal period
[^/.]*     # matches as many non-period/non-slash characters as possible
)          # closes the capturing group
?          # makes the file extension optional
$          # matches the end of the string, and due to the "m" modifier later
           # the end of every line 
```

由于这些字符都不能是 a`/`并且我们用 将匹配锚定到字符串的末尾，所以`$`这只会是最后一个斜杠之后的所有内容。请注意，我也包含`/`在文件扩展名的否定字符类中。否则，您可能会遇到包含句点的目录和没有文件扩展名的文件的问题（`test/directory.containing.dots/file`因为您将匹配**第一个**斜杠之后的所有内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:54:27.607

我对你的问题有点困惑，所以我不确定你想做什么。如果要替换文件名，请使用以下命令：

```
var newpath = filepath.replace(/[^/]*(?=\.\w+$)/, 'replacement'); 
```

如果您想提取文件名并删除其他所有内容，请尝试以下操作：

```
var filename = filepath.replace(/.*\/|\.\w+$/g, ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:41:15.220

试试这个：**工作演示** [http://jsfiddle.net/Xnzmd/](http://jsfiddle.net/Xnzmd/) **或** [http://jsfiddle.net/Etbyg/1/](http://jsfiddle.net/Etbyg/1/)

希望它适合原因`:)`

**代码**

```
var file = "Video/ogv/Task_2.4a_Host_treated.theora.ogv";

extension = file.match(/\.[^.]+$/);
filename = file.match(/(.*)\.[^.]+$/);
alert('extention =  '+extension);
alert('Filename = ' + filename[1])​ 
```

# android - 我如何通过互联网控制我的 android 应用程序

> ID：13006752
> 
> 赞同：1
> 
> 时间：2012-10-22T07:26:45.847
> 
> 标签：android

我正在开发`Android`家庭自动化系统的应用程序，其中一个功能是通过互联网（网页）控制灯光和风扇。

由于我是新手，如果有人能告诉我如何继续或从哪里开始，那将非常有帮助。

我应该在我的安卓手机上使用网络服务器并从网络触发一些脚本还是有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:41:04.740

您正在寻找的正是[GCM。](http://developer.android.com/guide/google/gcm/gs.html)使用 GMC，您可以向您的 android 手机发送消息，并根据消息重定向手机以执行某些操作。

看看[DEMO](http://developer.android.com/guide/google/gcm/demo.html)应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:31:52.867

您应该了解广播接收器。在这里阅读更多[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# matplotlib - PolyCollection 不起作用

> ID：13006757
> 
> 赞同：1
> 
> 时间：2012-10-22T07:27:16.050
> 
> 标签：matplotlib

当我使用 python 2.5 时，我遇到了 PolyCollection matplotlib 的问题。在随机模式下，它向我显示以下错误：数组维度必须一致，但 d_0 除外（file:collection.py - xy = np.concatenate([xy, np.zeros((1,2))])）。这是我的代码：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.collections import PolyCollection
from matplotlib.colors import colorConverter
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.font_manager as fm
from matplotlib.patches import Rectangle
import matplotlib.cm as cm

colors = ['#be1e2d',
        '#666699',
        '#92d5ea',
        '#ee8310',
        '#8d10ee',
        '#5a3b16',
        '#26a4ed',
        '#f45a90',
        '#e9e744']

row_names = ['2005','2006','2007']
data = [[1,1,1,1,1,1],[2,2,2,2,2,2],[4,4,4,4,4,4],[5,5,5,5,5,5],[7,7,7,7,7,7],[8,8,8,8,8,8]]
column_names = ['Ri','Pe']

#0 to start and end list
i=0
for i in range(len(data)):
    data[i].append(0)

for i in range(len(data)):
    data[i].insert(0,0)

dpi = 50.0
width = 460
height = 440
fig = plt.figure(1, figsize=(width/dpi,height/dpi),facecolor='w')
ax = fig.gca(projection='3d')#,azim=40, elev=0)
#Build axes
size = len(row_names) * len(data[0])
zs = np.arange(len(data))
# Setto le properties dei font
fp = fm.FontProperties()
fp.set_size('xx-small')
#Build Graph
verts = []
step = 1.0/len(data[0])
vertsColor = []
#Verify Single series or not
if len(column_names) > 1:
    idx = 0
    xs = np.arange(0, size, step)
    change_color = len(column_names) - 1
    for z in zs:
        verts.append(zip(xs, data[z]))
        vertsColor.append(colors[idx])
        if idx == change_color:
            idx = 0
        else:
            idx = idx + 1
    ################################################
    # I THINK THE PROBLEM IS HERE
    poly = PolyCollection(verts,facecolors=vertsColor)
    ax.add_collection3d(poly, zs=zs, zdir='y')
    ################################################
    ax.set_ylim3d(0, len(row_names)*len(column_names))
    zs = np.arange(0,len(row_names) * len(column_names), len(column_names))
    ax.set_yticks(zs)
    lim = ((size*step)-step) - (len(row_names) - 1) 
    ax.set_xlim3d(0, lim)
    rect = []
    serie = []
    #Build legend
    for i in range(len(column_names)):
        rect.insert(i,Rectangle((0,0), 1,1, facecolor=colors[i]))
        serie.insert(i,column_names[i])
    ax.legend((rect), (serie),   loc=3, ncol=3,  prop=fp)
else:
    xs = np.arange(0, size, step)
    for z in zs:
        verts.append(zip(xs, data[z]))
    poly = PolyCollection(verts,facecolors=colors)  #[:len(data)])
    poly.set_alpha(0.6)
    ax.add_collection3d(poly, zs=zs, zdir='y')
    ax.set_xlabel('Rec')
    lim = ((size*step)-step) - (len(row_names) - 1) 
    ax.set_xlim3d(0, lim)
    ax.set_yticks(zs)
    ax.set_ylim3d(0, len(row_names))

#Find Max Value
max_value = 0
i=0
for i in data:
    mass = max(i)
    if mass > max_value:
        max_value = mass

#Font Label X,Y,Z
for label in ax.get_xticklabels():
    label.set_fontproperties(fp)
for label in ax.get_yticklabels():
    label.set_fontproperties(fp)
for label in ax.get_zticklabels():
    label.set_fontproperties(fp)

ax.set_xticklabels('')
ax.set_ylabel('Years')
ax.set_yticklabels(row_names, fontproperties = fp)
ax.set_zlabel('Values')
ax.set_zlim3d(0, max_value)
ax.set_title('Test',x=0.5, y=1)
plt.show() 
```

谢谢。

# wpf - 滚动条在网格的 ItemsCotrol 上出现错误

> ID：13006761
> 
> 赞同：0
> 
> 时间：2012-10-22T07:27:36.567
> 
> 标签：wpf, xaml, scrollbar, itemscontrol

我在网格的第三列中有 Itemscontrol，它显示了一组动态加载的按钮。我希望这些内容（即按钮）占据网格的最大宽度。当内容超过网格大小时，将显示垂直滚动条。

我将滚动条样式应用于 ItemsControl，如下所示：

```
<Style x:Key="ItemControlStyle" TargetType="{x:Type ItemsControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ItemsControl}">
                        <Border>
                            <ScrollViewer HorizontalContentAlignment="Stretch"
                                          CanContentScroll="True"
                                          HorizontalScrollBarVisibility="Disabled"
                                          Uid="ScrollViewer_9"
                                          VerticalScrollBarVisibility="Auto">
                                <ItemsPresenter Margin="{TemplateBinding Padding}"
                                                KeyboardNavigation.DirectionalNavigation="Cycle"
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                Uid="ItemsPresenter_5" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

我还为 ItemsControl 及其父级（即 Grid）应用了 Horizo​​ntalAlignment 和 VerticalAllignMent 作为“**拉伸**” **。**

**我想要的输出视图是（网格的第三列）** ![在此处输入图像描述](../Images/bca8d6c050b3a69b68ea9530cdd3f940.png)

**我得到的输出是：** ![在此处输入图像描述](../Images/c4911a0c146f98bef35f89f8c37ec6e5.png)

尺寸超过后应该出现滚动条如何将这些内容水平调整到网格的最大宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:37:08.367

这只是添加**`HorizontalAlignment=Stretch`**到的情况`ScrollViewer`吗？

IE：

```
<Style x:Key="ItemControlStyle" TargetType="{x:Type ItemsControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ItemsControl}">
                <Border>
                    <ScrollViewer  HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Stretch"
                                   CanContentScroll="True"
                                   HorizontalScrollBarVisibility="Disabled"
                                   Uid="ScrollViewer_9"
                                   VerticalScrollBarVisibility="Auto">
                         <ItemsPresenter Margin="{TemplateBinding Padding}"
                                         KeyboardNavigation.DirectionalNavigation="Cycle"
                                         SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                         Uid="ItemsPresenter_5" />
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# iphone - 如何停止当前正在运行的线程

> ID：13006764
> 
> 赞同：0
> 
> 时间：2012-10-22T07:27:45.440
> 
> 标签：iphone, nsthread

我正在单击一个按钮上创建新线程 单击另一个按钮上我想停止该线程 如何实现它...

我用过

```
[NSThread exit]; 
```

但它冻结了我的用户界面.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:21:02.063

采用 `-[NSThread cancel]`

**- （无效）取消**

```
 Changes the cancelled state of the receiver to indicate that it should exit. 
```

检查取消通过`-[NSThread isCancelled]`

或者

**出口**

终止当前线程。

```
+ (void)exit 
```

该方法使用 currentThread 类方法来访问当前线程。在退出线程之前，该方法**会将 NSThreadWillExitNotification**与正在退出的线程一起发布到默认通知中心。因为通知是同步传递的，所以**NSThreadWillExitNotification**的所有观察者都可以保证在线程退出之前收到通知。

应避免调用此方法，因为它不会让您的线程有机会清理它在执行期间分配的任何资源。

# web - 网店设计 javascript/php

> ID：13006765
> 
> 赞同：0
> 
> 时间：2012-10-22T07:27:49.313
> 
> 标签：web, webshop

我有一个关于网络购物流程设计的简单问题。我想实现一个网站，您可以首先通过不同的步骤根据模板设计自己的产品。您在标题中有用于此目的的面包屑。应该如何实施这些步骤？我应该只创建一个网站，例如 prototyp.php 并为每一步动态更改那一侧的 ui 元素吗？或者我应该为设计过程的每个步骤实施一个站点，并始终将数据提供给后续站点？

问候米贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:14:41.590

它以两种方式工作。我决定只建立一个 php 站点，并通过 javascript 从 stept 到 step 动态更改它。

# php - 排除 if 语句？

> ID：13006766
> 
> 赞同：3
> 
> 时间：2012-10-22T07:27:53.303
> 
> 标签：php, if-statement, include, require

是否有可能将 if 语句排除到两个不同的文件中？当我编写类似以下代码的内容时，它会给出一个解析错误：`syntax error, unexpected end of file`. 显然，我总是必须关闭同一个包含文件中的 if 语句。有没有办法完成我想要的？

索引.php：

```
<?php
require "top.inc.php"; // opening the if statement
  some code to execute if statement in top.inc.php is true
require "bottom.inc.php"; // closing the if statement
?> 
```

顶部.inc.php：

```
<?php if (1 == 1) { ?> 
```

底部.inc.php：

```
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:32:20.910

不，这是不可能的。每个 .php 文件都需要具有完整、有效的语法。`include`ing 文件与复制和粘贴其内容并不完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:32:14.723

你不能那样做。你可以做的是以下

在你的`top.php`

```
<?php if($condition) { 
           include "bottom.inc.php";    
?>

<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:33:58.483

每个文件都需要有正确的语法。最简单的方法是定义一个变量来保存一个值，如果语句为真，则为 1。

就像是：

顶部.php

```
if (1 == 1) $value = 1; 
```

索引.php

```
if ($value == 1) // do something 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-22T07:31:44.347

```
<?
file_put_contents("temp.php",file_get_contents("top.inc.php"));
$Middle_Code = <<<HEREDOC
/*
Other code to be put inside this heredoc,
but, of course, outside this comment block!
*/
HEREDOC;
file_put_contents("temp.php",$Middle_Code,FILE_APPEND);
file_put_contents("temp.php",file_get_contents("bottom.inc.php"),FILE_APPEND);
require("temp.php"); 
```

# android - 如何重定向logcat输出？

> ID：13006767
> 
> 赞同：7
> 
> 时间：2012-10-22T07:28:00.047
> 
> 标签：android, logcat

有没有办法将 logcat 的输出重定向到 InputStream 或类似的东西？我正在考虑如何在 C 中重定向 stderr。我想这样做，以便在我的应用程序启动时重定向它，并且所有发生的事情都被转储到文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T07:51:04.237

如果你可以连接设备进行调试，你可以从命令行

```
$ adb logcat > textfile.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T07:44:23.923

我发现最简单的方法是使用`System.setErr`. 我允许您轻松地将错误输出重定向到文件。

例子：

```
System.setErr(new PrintStream(new File("<file_path>")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:36:36.877

LogCat 输出的唯一重定向可能性是 documentend [here](http://developer.android.com/tools/help/logcat.html)和[here](https://stackoverflow.com/questions/5715492/android-how-to-capture-or-redirect-the-logs-from-logcat-to-a-file-using-eclipse)。

无法在您的应用程序本身中重用 LogCat 输出。但是，您可以按照您的要求[将其导出到文件中。](https://stackoverflow.com/questions/3359692/how-to-redirect-my-log-output-from-logcat-to-the-sd-card-on-an-android-device)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T13:36:36.587

仅从您的应用程序中过滤 logcat 试试这个：

```
 int pid = android.os.Process.myPid();
        File outputFile = new File(Environment.getExternalStorageDirectory() + "/logcat.txt");
        Log.d("zzz","outputFile: " + outputFile);
        try {
            String command = "logcat | grep " + pid + " > " + outputFile.getAbsolutePath();
            Log.d("zzz","command: " + command);
            Process p =  Runtime.getRuntime().exec("su");
            OutputStream os = p.getOutputStream();
            os.write((command + "\n").getBytes("ASCII"));
        } catch (IOException e) {

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-28T17:39:39.017

在 Kotlin 中，这是我使用的，它似乎创建并记录到 logcat.txt 文件（位于 app 目录中），无论是调试应用程序还是直接从平板电脑运行。（旁注：由于某种原因，在我停止应用程序并重新连接设备之前，该目录不会刷新或显示在文件资源管理器中。）（感谢之前贡献者的帮助）

```
 located in utilities...
     val publicDirectory = globalContext.getExternalFilesDir(null)
                publicDirectoryName = publicDirectory?.toString() + "/"

        fun redirectLogcatToFile() {
        try {
            val filename =
                File(Utilities.publicDirectoryName + "logcat.txt")
            filename.createNewFile()
            val cmd = "logcat -v time -f " + filename.getAbsolutePath() +" -s " + logcatTag
            Runtime.getRuntime().exec(cmd)
        } catch (ex: Exception ) {
            Utilities.toastOnAnyThread("Utilities.redirectLogcatToFile: " + ex.message)
        }
    }

    fun Log( message : String ){
        Log.i(logcatTag, message )
    } 
```

# python - 是否可以在没有 redirect_uri 或不设置复杂服务器的情况下使用 OAuth 2.0？

> ID：13006770
> 
> 赞同：3
> 
> 时间：2012-10-22T07:28:12.323
> 
> 标签：python, web-applications, oauth, oauth-2.0, rauth

我必须将一些文件传输到远程服务器，为此我必须执行 OAuth2.0 以获取访问令牌，然后只需执行 POST 请求来上传文件。

现在我懒得在云上设置一个 Django 项目，然后在没有“太好”的库的情况下执行 OAuth2。

所以，我正在考虑使用[rauth](https://github.com/litl/rauth) lib 作为一个简单的 python 脚本来执行 OAuth2，而不需要真正设置一个接受请求和所有的服务器。

但是，在远程服务器配置文件中，我需要提供一个 redirect_url，当然还需要在 rauth 客户端库中提供。

是否有任何可能的方法可以在没有真正在云上设置项目的情况下进行此授权。我正在寻找一个简单的 python 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T04:13:05.387

我是 rauth 的作者和维护者。

Rauth 不再强制执行 a `redirect_uri`，因此如果您的提供商允许，那么您可以放弃使用它。但是，如果您的最终目标不是设置服务器，即使提供`redirect_uri`者要求，这也应该是可行的。例如，您可以重定向到本地主机，您可以在其中使用 Flask 设置最小服务器，或者如果提供商允许它，则可以使用其他一些任意 URL，例如 Facebook 提供[https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)用于这个目的。您使用的提供商可能有类似的方案。[这是一个](https://github.com/litl/rauth/tree/master/examples/facebook-cli.py)关于 rauth 的例子。

另一种选择是将 Bearer Auth 与 grant_type=password 一起使用。所有 OAuth 2.0 提供者都*应该*支持 Bearer Auth，但可能不实现密码 grant_type。这不需要 a `redirect_uri`，而是您最终将您的用户凭据传递给服务器，它应该向您返回一个访问令牌。如果您的提供商允许使用 grant_type 密码进行 Bearer Auth，这可能是您的理想选择。Rauth 0.5.3 默认尝试使用 Bearer Auth，因此您所要做的就是传入 grant_type。在尝试之前一定要更新。

这是一个简单的例子：

```
# assume you have constructed an OAuth2Service object and bound it to `serv`

params = {'grant_type': 'password',
          'username': 'foo',
          'password': 'hunter2'}

s = service.get_auth_session(params=params)
r = s.get('https://example.com/api/some/endpoint') 
```

根据提供者和您想要做什么，可能需要进行更多调查。但是，希望这能给您一些帮助。

**编辑**

我认为我对密码 grant_type 的评论有点令人困惑：我似乎暗示你必须将它与 Bearer Auth 一起使用（这里的 Bearer Auth 我的意思是在 Bearer 格式的 Authorization 标头中附加访问令牌），但实际上你没有不。在实体方法 [1] 中发送凭据是可以接受的，尽管不鼓励。如果您使用 rauth 并发现身份验证未按预期工作，您可能需要像这样禁用 Bearer Auth：

```
s = service.get_auth_session('/some/resource',
                             data={'code': code},
                             bearer_auth=False) 
```

从规范：

[1] “客户端应该使用带有承载 HTTP 授权方案的授权请求标头字段使用承载令牌发出经过身份验证的请求。资源服务器必须支持此方法。”

# android - 以编程方式刷新android中的活动时遇到问题

> ID：13006783
> 
> 赞同：0
> 
> 时间：2012-10-22T07:29:11.393
> 
> 标签：android, android-activity, page-refresh

我有两个`Buttons`在我的`Activity`. 当我单击每个按钮时，我必须刷新页面并调用一个方法。该方法有助于显示从`database`.

当我单击第一个`button`时，我能够获得正确的输出，但页面突然刷新了。我需要显示输出，直到`button`单击另一个。

请帮我。提前致谢

代码：

```
case R.id.button1:
    View view = null;
    refresh(view);
    set_day="Monday";//Monday  
    viewgroups_ineditgroup(set_day);s        
    break; 
case R.id.button2:
    View view1 = null;
    refresh(view1);
    set_day="Tuesday"; 
    viewgroups_ineditgroup(set_day);
    break; 

public void refresh(View view){        
    onRestart();    
}

@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    Intent i = new Intent(CurrentActivity.this, CurrentActivity);
    i.putExtra("group_name", intentData); 
    startActivity(i);
    finish();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:44:42.623

```
void refresh(View view) {
    /*
    1\. open the db here
    2\. fetch the data
    3\. assign the data to your views
    4\. close the db
    */
} 
```

我不知道你为什么将 null 作为参数传递..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T07:54:27.940

```
Intent intent1 = getIntent();
overridePendingTransition(0, 0);
intent1.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();
overridePendingTransition(0, 0);
startActivity(intent1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:05:16.473

问题是您是否真的需要刷新活动？页面本身可以在没有它的情况下更改。您可以像这样运行对 UI 线程的更改

```
runOnUiThread(new Runnable() {
    public void run() {
        //TODO add ui code here
    }
}); 
```

# c# - Java Socket服务器和客户端Socket c#问题

> ID：13006786
> 
> 赞同：0
> 
> 时间：2012-10-22T07:29:33.960
> 
> 标签：c#, java, sockets, bitstream

我的客户端 c# 套接字与 java 服务器套接字通信时遇到问题。当我尝试阅读响应时，问题就出现了。我的代码是这样的：

```
IPHostEntry IPHost = Dns.Resolve("IP_ADDRESS");
Console.WriteLine(IPHost.HostName);
string []aliases = IPHost.Aliases; 
IPAddress[] addr = IPHost.AddressList;
Console.WriteLine(addr[0]);
EndPoint ep = new IPEndPoint(addr[0],1024); 
Socket sock =
   new Socket(AddressFamily.InterNetwork,SocketType.Stream,ProtocolType.Tcp);
sock.Connect(ep);
if(sock.Connected)
   Console.WriteLine("OK");
Encoding ASCII = Encoding.ASCII;
string Get = "A";
Byte[] ByteGet = ASCII.GetBytes(Get);
Byte[] RecvBytes = new Byte[256];
sock.Send(ByteGet, ByteGet.Length, 0);
Int32 bytes = sock.Receive(RecvBytes, RecvBytes.Length, 0);
Console.WriteLine(bytes);
String strRetPage = null;
strRetPage = strRetPage + ASCII.GetString(RecvBytes, 0, bytes);
while( bytes > 0 ) {
   bytes = sock.Receive(RecvBytes, RecvBytes.Length, 0);
   strRetPage = strRetPage + ASCII.GetString(RecvBytes, 0, bytes);
   Console.WriteLine(strRetPage );
}
sock.Close(); 
```

在代码行

```
Int32 bytes = sock.Receive(RecvBytes, RecvBytes.Length, 0); 
```

我的客户挂起。我必须停止应用程序。似乎不响应套接字服务器。套接字服务器的具体做法是发送和接收 BitStream。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:56:26.140

如果没有服务器的 Java 代码，很难判断，但您的服务器似乎很可能没有发送预期的 256 字节。由于默认情况下 Socket.Receive 是阻塞的，因此客户端会一直等待数据。

# java - 如何对用户的兴趣列表进行排名

> ID：13006792
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:29:58.853
> 
> 标签：java, mongodb, machine-learning

我有一个标有数字的用户兴趣列表。

每个用户都有几个兴趣。如何组成一个代表用户兴趣的数字，以便能够在简单的 MongoDB 查询中找到具有相似或密切兴趣的其他用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:31:49.870

当有*n 个*不同的兴趣时，每个用户都可以表示为一个长度为*n*的布尔向量，其中如果用户列出了兴趣*i ，则第**i*个元素为真。两个这样的向量可以用余弦相似度、[Jaccard 相似度](https://en.wikipedia.org/wiki/Jaccard_index)、L1 距离、L2 距离等进行比较。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:12:07.410

不知道如何直接使用 MongoDB，但如果你有“biginteger”数据类型，那么将兴趣减少到一个位域。然后您不能删除兴趣（无需为每个人重新计算位域），​​但您可以添加兴趣，因为选择它们只会向大整数添加更多位。然后比较人 A 和 B 的兴趣，你有操作，在 C/C++ 类似的语法：

*   `common=bitCount(A&B)`A和B有多少共同利益
*   `onlyA=bitCount(A^(A&B))`A有多少兴趣，B没有
*   `onlyB=bitCount(B^(A&B))`B有多少兴趣，A没有
*   `different=bitCount(A^B)`A 和 B 总共有多少不同的兴趣（与 onlyA+onlyB 相同）
*   `total=bitCount(A|B)`A和B总共有多少不同的兴趣（相同+不同）

从这些数字中，您可以评估兴趣匹配的紧密程度，确切的公式取决于您希望如何强调相同的兴趣与不同的兴趣以及您想要拥有的规模。

至少 Java 的 BigInteger 类具有开箱即用的位计数方法，否则可以使用 &1 和 >>1 操作通过蛮力循环来完成。不知道 MongoDB 是否支持这样的构造或具有用于大 int 数据的位数的运算符/函数，或者即使 MongoDB 具有大 int 数据类型......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:43:51.493

我可能会尝试通过以下方式做到这一点

1.  我将拥有数据库列的所有兴趣部分。
2.  对于每个用户，每一列的值都是 0 或 1。
3.  要查找是否有 2 个用户有密切的兴趣，我将从 DB 中检索兴趣值并将其存储在 domainObject 中（每个兴趣（列）都有字段。然后我将实现一个比较器，它将根据数量更新一个 int 字段匹配的列。
4.  根据这个数字，我可以决定一个逻辑，例如，如果总兴趣是 10 并且匹配 > 7，那么它是接近的，否则不接近等。*

# c# - 如何访问网格

> ID：13006795
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:30:11.263
> 
> 标签：c#, razor, telerik, asp.net-mvc-4

```
@(Html.Telerik().Grid<Test.Model>()
        .Name("TestGrid") 
```

如何访问网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:37:02.083

也许这可以帮助你：

```
@(Html.Telerik().Grid<Test.Model>()
    .Name("TestGrid")
    .DataBinding(db => db.Ajax()
    .Select("action1", "controller1", new { ld, _fr, gridId = "testGrid"  }) 
```

您的操作方法将自动拥有它：

```
public ActionResult action1(string testid)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:55:48.310

[这可能会有所帮助](http://www.telerik.com/community/code-library/aspnet-mvc/grid/exporting-grid-data-to-excel.aspx)。在此解决方案中，您只需将网格的当前参数（页码、过滤器等）发送到控制器，并使用此参数从 bll 获取数据。

无论如何，我认为你不能将整个网格发送到控制器，除非你序列化网格对象，制作它的服务器端表示，并让模型绑定器从传入参数初始化对象。或者你也可以编写一个自定义模型绑定器:)

# sql - PLS-00103：从 ant build 执行时遇到符号 /

> ID：13006796
> 
> 赞同：1
> 
> 时间：2012-10-22T07:30:19.780
> 
> 标签：sql, oracle, ant, plsql, oracle10g

我有一个包含包规范和正文的 sql 脚本，它们中的每一个都由`forward slash /`sql plus 或 Sql Developer 运行时执行得很好。

当我从 ant build 执行时，sql 脚本执行良好并且构建成功。但是包有错误`PLS-00103: Encountered the symbol /`。我的 ant 为 sql 构建脚本如下

```
<target name="sql">        
      <sql driver="${sql.driver}" url="${sql.url.test}" 
      userid="${sql.user}" password="${databasepassword}" 
      classpathref="antclasspath" keepformat="true" 
      delimitertype="row">
      <transaction src="create.sql"/>          
      </sql>
   </target> 
```

如何解决此错误？任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:49:40.290

尝试将分隔符设置为“/”。你必须改变你的脚本以“/”结束所有命令，不仅是 PL/SQL，而且它应该可以工作。

# javascript - jQuery遍历数组并添加到ajax方法

> ID：13006798
> 
> 赞同：2
> 
> 时间：2012-10-22T07:30:23.920
> 
> 标签：javascript, jquery, arrays, json, ajax

我有一个 jQuery`$.ajax()`帖子，需要向数组中每个项目的请求添加一个对象（它是一个对象吗？字符串？）。我不知道这样做的最佳方法。我想最好首先将数据属性中的项目作为变量分离出来，以便在请求之前计算它......但我不确定如何构建每个元素。所以这里有一些虚构的东西来说明我的观点。

```
var items   = for (var i = 0; i < $orderItems.length; i++){
                  'item': {
                      'photo': $orderItems[0].photo,
                      'option': $orderItems[0].option,
                      'cost': $orderItems[0].cost
                  }
              },
    request = $.ajax ({
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        'firstName': $firstNameVal,
                        'lastName': $lastNameVal,
                        'email': $emailVal,
                        'phone': $numberVal,
                        'address': {
                            'street': $streetVal,
                            'city': $cityVal,
                            'state': $stateVal,
                            'zip': $zipVal
                        },
                        'price': $orderTotal,
                        'items': items
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:37:11.767

您可以使用 jQuery.map 函数来获取项目数组：

```
var items = $.map($orderItems, function (item) {
     return {
          photo: item.photo,
          option: item.option,
          cost: item.cost
     };
}); 
```

# youtube - RTSP 流在诺基亚 40 系列手机中不起作用

> ID：13006803
> 
> 赞同：1
> 
> 时间：2012-10-22T07:30:43.833
> 
> 标签：youtube, nokia, rtsp, series-40, live-video

我是为 40 系列手机创建诺基亚应用程序的新手。

我正在尝试为我的应用程序使用 YouTube 频道视频，但在模拟器上出现错误：

`"The RTSP streaming feature is currently not supported in the Web Apps Simulator. Please test the streaming feature on one of the supported devices."`

我使用诺基亚部署方法在受支持的设备上进行了测试，但它仍然无法正常工作，所以请谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:30:29.047

我相信在诺基亚 S40 系列手机上，实时视频流是不可能的。可能是由于一些技术限制[或说设计限制]。

但是，当您打开流式传输视频的网络链接时，[有时和某些设备] 它会在您的媒体播放器中打开并开始流式传输。但由于 S40 系列 [显然是入门级手机] 用于互联网的低质量天线，互联网速度会降低，并且似乎无法进行视频缓冲或视频流。

可能是您使用的设备模拟器不支持实时视频流。如果您的互联网连接正确[并且速度也很快]，那么这就是根本原因。

# python - 多语言项目的 Django 数据模型

> ID：13006804
> 
> 赞同：3
> 
> 时间：2012-10-22T07:30:47.300
> 
> 标签：python, django, model, multilingual

我正在建立一个非常小而简单的 django 项目，其中基本上包括翻译的客户/项目的概述。因此，该网站显然应该以翻译者翻译的语言为特色。这意味着将来不会添加新的语言。我是否应该在一个类中定义所有内容，如下所示：

```
class project(models.Model):
    project = models.ForeignKey(client)
    title_eng = models.CharField(max_length=50)
    title_pt = models.CharField(max_length=50)
    #...
    body_eng = models.CharField(max_length=250)
    body_pt = models.CharField(max_length=250)
    #...
    time_stamp= models.DateField() 
```

我最好使用[transmeta](http://code.google.com/p/django-transmeta/)，它基本上是一样的吗？优点缺点？非常感谢您提供简短的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:04:34.703

如果您想将您的网站内容存储在数据库中，您显然还必须存储翻译。基本上以各种语言复制文本字段（就像您所做的那样）。Django-transmeta 为您做同样的事情，它的主要优点是您可以为所有模型添加例如一种新语言（或添加对新字段的支持）修改一行代码（实际上是从和你一样），并同步数据库。我认为这是一个不错的选择。

其余的我使用 Django i18n 功能，看看[这个](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)，它是您网站硬编码内容的不错选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T21:35:12.287

这个问题已经很老了，但对于那些可能正在寻找的人，请务必检查 django-modeltranslation。它的模型翻译非常简单，并且维护得非常积极。文档[在这里](https://django-modeltranslation.readthedocs.org/)

# asp.net-mvc - 将数据发布到 Web api 方法时，日期格式更改为“mm/dd/yyyy”

> ID：13006807
> 
> 赞同：1
> 
> 时间：2012-10-22T07:30:57.430
> 
> 标签：asp.net-mvc, datetime, post, asp.net-mvc-4, asp.net-web-api

我正在使用带有 Web API 的 ASP.NET MVC 4。

我希望能够通过单击按钮下载 csv 文件。

下面是我对 api 'exportfruit' 的 jquery 调用

```
function downloadFile(){
var data = {
    StartDate: this.model.get('StartDate'),
    Name: this.model.get('Name')
};

var form = document.createElement('form');
form.action = 'api/fruitapi/exportFruit';
form.method = 'POST';
form.style.display = 'none';
for (i in data) {
    if (data[i] != "") {
        var inputElement = document.createElement('textarea');
        inputElement.name = i;
        inputElement.value = data[i];
        form.appendChild(inputElement);
    }
}
document.body.appendChild(form);
form.submit();
} 
```

我的 web api 操作如下

```
[ActionName("ExportFruit")]
public HttpResponseMessage PostExportFruit(SomeModel model)
{
    // for now i am just testing the value returned from model.
    string csv = "some data from db";
    HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
    result.Content = new StringContent(csv);
    //a text file is actually an octet-stream (pdf, etc)
    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
    //we used attachment to force download
    result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
    result.Content.Headers.ContentDisposition.FileName = "testfile.csv";
    return result;    
} 
```

现在我面临的问题是我将日期传递为 'dd/mm/yyyy' 但在 web api 操作中它将日期转换为 'mm/dd/yyyy'

例如，

如果我有一个像这样的约会

*   2012 年 1 月 2 日，这将转换为 2012 年 2 月 1 日
*   如果 22/10/2012（今天的日期）转换为 01/01/0001

我该如何解决 ？

我在传递我使用[这个](http://forums.asp.net/post/5136406.aspx)修复的json数据时遇到了类似的问题，但我不知道如何处理这个问题。

请帮助我，因为互联网上几乎没有任何可用的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:38:10.013

您可以将 StartDate 的类型 Datetime 更改为 String。

然后，发布到操作，ParseExact 字符串到日期时间

```
DateTime startDate = DateTime.ParseExact(model.StartDate, "dd/MM/yyyy", null);
DateTime endDate = DateTime.ParseExact(model.EndDate, "dd/MM/yyyy", null); 
```

# gdb - GDB 核心转储具有损坏的堆栈，显示“堆栈帧无法访问地址 0x12 处的内存”

> ID：13006810
> 
> 赞同：1
> 
> 时间：2012-10-22T07:31:01.907
> 
> 标签：gdb, core

我的应用程序中有一个核心转储，当我尝试分析时，它似乎有损坏堆栈。谁能帮助我如何找到问题的根源。

```
Program terminated with signal 11, Segmentation fault.
#0  0x40173f54 in nanosleep () from /lib/libc.so.6
(gdb) bt
#0  0x40173f54 in nanosleep () from /lib/libc.so.6
#1  0x401b2a1c in __libc_enable_asynccancel () from /lib/libc.so.6
#2  0x0000cdb8 in ?? ()
Cannot access memory at address 0x12

(gdb) info frame
Stack level 0, frame at 0xbeaedbc0:
 pc = 0x40173f54 in nanosleep; saved pc 0x401b2a1c
 called by frame at 0xbeaedbd8
 Arglist at 0xbeaedbc0, args:
 Locals at 0xbeaedbc0, Previous frame's sp is 0xbeaedbc0
(gdb) info frame 1
Stack frame at 0xbeaedbd8:
 pc = 0x401b2a1c in __libc_enable_asynccancel; saved pc 0xcdb8
 called by frame at Cannot access memory at address 0x12
(gdb) info frame 2
Stack frame at Cannot access memory at address 0x12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:06:01.550

此堆栈可能已损坏，也可能未损坏，这也可能发生在`-fomit-frame-pointer`.

对于它的价值，这是我目前的策略。我并不认为这是一个最佳策略，只是目前对我有用的策略：

1.  获取符号。您拥有的关于代码的信息越多，您自己重新创建该信息的痛苦就越少。

2.  我手动重新构建堆栈。为此，我通常开始将堆栈中的指针对齐值提供给“信息符号”，以查看是否可以获得任何有用的信息。在缺少符号的情况下，解码在可能由值指向的内存位置找到的“指令”也很有用，如果将其作为指针，将在已知代码位置附近。这可以产生对具有符号的位置的调用。

3.  当我的堆栈变小时（就像这里的情况），我发现查看哪些候选函数调用了最后一个看起来有效的函数会很有用。

4.  我尝试重现该问题。如果我能让事情在现场失败，那么一切都会变得容易几个数量级。

5.  然后我查看堆栈并尝试确定损坏开始的偏移量。

6.  我通过函数候选的程序集来获得关于哪些数据结构存在于哪些偏移量的提示。

7.  最后，有可能某些东西随机撞到了一块内存（例如，另一个线程从它自己的堆栈中溢出，错过了可能的保护页并撞到了你的堆栈。）如果你还没有任何线索，是时候扫描内存了获取指向堆栈损坏部分的指针，然后对您找到的数据结构进行逆向工程。

# shell - gdb的heredoc脚本问题

> ID：13006813
> 
> 赞同：0
> 
> 时间：2012-10-22T07:31:09.483
> 
> 标签：shell, gdb, heredoc

我想写一个shell脚本来帮助我启动gdb并输入一些我不想自己输入的命令，我该怎么做？

我尝试了下面的heredoc，但它不起作用，我做错了什么？

```
#! /bin/sh -
gdb ./myexe << MYHEREDOC
b xxx.c:1234
commands 1
printf "xxxxxxxx"
continue
end
MYHEREDOC 
```

提前感谢您的热心帮助~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:20:18.057

它确实应该有效（请参阅[文档](http://sourceware.org/gdb/onlinedocs/gdb/Command-Files.html)）。也许如果您使用命令文件，您可以不必使用heredoc：

*命令.gdb*：

```
file ./myexe
b xxx.c:1234
commands 1
printf "xxxxxxxx"
continue
end
run

$ gdb -x commands.gdb 
```

# node.js - 使用和运算符进行弹性搜索通配符搜索

> ID：13006816
> 
> 赞同：0
> 
> 时间：2012-10-22T07:31:21.953
> 
> 标签：node.js, wildcard, elasticsearch

我正在开发一个使用弹性搜索的应用程序，在某些情况下，我想根据术语和语言环境进行搜索。我正在本地主机上测试这个

```
http://localhost:9200/index/type/_search 
```

和参数

```
query : {
                        wildcard : { "term" : "myterm*" }
                    },
                    filter : {
                        and : [
                            {
                                term : { "lang" : "en" }
                            },
                            {
                                term : { "translations.lang" : "tr" } //this is subdocument search
                            },
                        ]
                    } 
```

这是一个示例文档：

```
{
    "_index": "twitter",
    "_type": "tweet",
    "_id": "5084151d2c6e5d5b11000008",
    "_score": null,
    "_source": {
      "lang": "en",
      "term": "photograph",
      "translations": [
        {
          "_id": "5084151d2c6e5d5b11000009",
          "lang": "tr",
          "translation": "fotoğraf",
          "score": "0",
          "createDate": "2012-10-21T15:30:37.994Z",
          "author": "anonymous"
        },
        {
          "_id": "50850346532b865c2000000a",
          "lang": "tr",
          "translation": "resim",
          "score": "0",
          "createDate": "2012-10-22T08:26:46.670Z",
          "author": "anonymous"
        }
      ],
      "author": "anonymous",
      "createDate": "2012-10-21T15:30:37.994Z"
    }
  } 
```

我正在尝试使用通配符（用于自动完成）输入语言“en”和输出语言“tr”来获取术语。它正在获取具有“myterm”但不适用的条款，并对此进行操作。任何建议将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:50:09.653

我猜这个`translations`元素有`nested`类型。如果是这种情况，您应该使用[嵌套](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)查询：

```
curl -XPOST "http://localhost:9200/twitter/tweet/_search" -d '{
    query: {
        wildcard: {
            "term": "term*"
        }
    },
    filter: {
        and: [{
            term: {
                "lang": "en"
            }
        }, {
            "nested": {
                "path": "translations",
                "query": {
                    "term" : { "translations.lang" : "tr" }
                }
            }
        }]
    }
}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:12:18.717

我已经设法通过以下查询解决了我的问题；

```
query : {
   wildcard : { "term" : "myterm*" }
},
filter : {
   and : [
      {
         term : { "lang" : "en" }
      },
      {
         term : { "translations.lang" : "tr" } //this is subdocument search
      }
   ]
},
sort : {
   {"term" : "desc"}
} 
```

这里重要的一点是，您需要将排序字段设置为 not_analyzed。因为，您无法对已分析的字段进行排序。

# iphone - 在 iPhone 中隐藏/显示搜索栏

> ID：13006820
> 
> 赞同：0
> 
> 时间：2012-10-22T07:31:32.567
> 
> 标签：iphone, uisearchbar

在我的应用程序中，底部工具栏中有一个按钮，当我单击它时，搜索栏应显示在工具栏的顶部。

如何实施？

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:07:39.613

在 viewDidLoad 中创建一个 searchBar，`searchBar.hidden=YES;`然后在 button action set 中设置`searchbar.hidden=NO;`。这样您就可以在单击特定按钮时显示 searchBar....

# django - Django 管理员更改列表优化查询：选择 field1，field2 而不是 select *

> ID：13006823
> 
> 赞同：4
> 
> 时间：2012-10-22T07:31:38.493
> 
> 标签：django, django-admin, django-select-related

我有一个很大的水平表（30 个字段），有很多外键（每个平均最多 10 个字段）。在 Django admin 中显示表格时，我使用 select related 来优化和避免多次查询。我正在寻找的是确保只检索我的 list_display 条目，而不是所有 30 个字段 +（外键 X 10）字段。目前，表上的 select * + 所有连接字段上的 select * 都运行。基本上，一种在 Django 管理员级别获取“值”的方法。谢谢。

编辑：下面的一个例子：

```
class X(models.Model):
    x1 = models.IntegerField  # needed for admin display
    x2 = models.TextField     # needed for admin display
    x3 = models.ForeignKey(Y) 
    x4 = models.ForeignKey(Z)
    ...                       # X5 to x30 are not needed for admin display
    X30 = models.Integerfield

    @property
    def y1(self) :
        return self.x3.y1

    @property
    def y2(self):
        return self.x4.z1

class Y(models.Model):
    y1 = models.IntegerField  # needed for admin display
    ...
    y10 = models.IntegerField

class Z(models.Model):
    z1 = models.IntegerField  # needed for admin display
    ...                       # z2 to z10 are not needed for admin display
    z10 = models.IntegerField

**admin.py**
list_display = ['x1', 'x2', 'y1', 'z1'] 
```

我的问题是，当我查看生成的查询以显示此内容时，它在 X(x1 到 x30) 上执行 select *，并使用 select_related，它提取 y1 到 y10 和 z1 到 z10，即使我不需要所有字段。

该表被大量用作 CRM，并且由于生成的查询速度较慢，因此目前它是一个热门话题。还有blob和巨大的varchars，它们不用于显示，仍在查询中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T13:26:55.370

请记住，在您的`list_display`块中，您始终可以替换`x3`为`x3_id`使用您手头已有的 FK 值，而根本不进行任何额外的查找（完全放弃`select_related`）。

然后，您可以将其与[此处](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)`list_display`概述的自定义函数结合起来，以将那些原始 FK 整数替换为指向它们自己的管理页面的超链接？

# c# - Amazon Simple Notification Service AWSSDK C# - SOS

> ID：13006828
> 
> 赞同：23
> 
> 时间：2012-10-22T07:31:51.140
> 
> 标签：c#, sdk, amazon-web-services

我正在尝试使用 Amazon 的 AWSSDK for C# 和简单通知服务进行发布。

SDK 没有附带任何示例，在谷歌搜索 2 小时后，我在网络上的任何地方都找不到示例。我想出了这个，但它抛出了一个异常，它产生的信息不超过单个字符串“TopicARN”——没有内部异常——nuffin！
如果有人使用**AWSSDK**`SNS`通过 C#成功发送消息，我希望看到即使是最基本的工作示例。我正在使用最新的 SDK 1.5x

 **这是代码：

```
string resourceName = "arn:aws:sns:us-east-1:xxxxxxxxxxxx:StackOverFlowStub";
AmazonSimpleNotificationServiceClient snsclient = new AmazonSimpleNotificationServiceClient(accesskey,secretkey);
AddPermissionRequest permissionRequest = new AddPermissionRequest()
                .WithActionNames("Publish")
                .WithActionNames(accesskey)
                .WithActionNames("PrincipleAllowControl")
                .WithActionNames(resourceName);
snsclient.AddPermission(permissionRequest);

PublishRequest pr = new PublishRequest();
pr.WithMessage("Test Msg");
pr.WithTopicArn(resourceName);
pr.WithSubject("Test Subject");
snsclient.Publish(pr); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-22T17:43:12.727

这是一个创建主题、设置主题显示名称、订阅主题的电子邮件地址、发送消息和删除主题的示例。请注意，在继续之前，您应该在两个地方等待/检查您的电子邮件。`Client`是客户端实例，`topicName`是任意主题名称。

```
// Create topic
string topicArn = client.CreateTopic(new CreateTopicRequest
{
    Name = topicName
}).CreateTopicResult.TopicArn;

// Set display name to a friendly value
client.SetTopicAttributes(new SetTopicAttributesRequest
{
    TopicArn = topicArn,
    AttributeName = "DisplayName",
    AttributeValue = "StackOverflow Sample Notifications"
});

// Subscribe an endpoint - in this case, an email address
client.Subscribe(new SubscribeRequest
{
    TopicArn = topicArn,
    Protocol = "email",
    Endpoint = "sample@example.com"
});

// When using email, recipient must confirm subscription
Console.WriteLine("Please check your email and press enter when you are subscribed...");
Console.ReadLine();

// Publish message
client.Publish(new PublishRequest
{
    Subject = "Test",
    Message = "Testing testing 1 2 3",
    TopicArn = topicArn
});

// Verify email receieved
Console.WriteLine("Please check your email and press enter when you receive the message...");
Console.ReadLine();

// Delete topic
client.DeleteTopic(new DeleteTopicRequest
{
    TopicArn = topicArn
}); 
```**

# jquery - 选中时如何从单选按钮获取值？

> ID：13006835
> 
> 赞同：0
> 
> 时间：2012-10-22T07:32:18.913
> 
> 标签：jquery

我有超过 2 个单选按钮，并且希望在选中单选按钮时填充“showtype_cost”的值。并在检查另一个值时更改值

```
<body>
   <input name="showtype" type="radio" id="basic" value="basic" />Basic Slideshow<br />

   <input name="showtype" type="radio" id="lovestory" value="lovestory" /> Love Story <br />

   <input name="showtype_cost" type="text" id="text" value="">
   <p></p>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:33:30.300

您可以使用此方法，它可能会对您有所帮助。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$("#basic").click(function(){
$("#text").attr("value","150");
});
});
$(document).ready(function(){
$("#lovestory").click(function(){
$("#text").attr("value","500");
});
});
</script>
</head>
<body>
<input name="showtype" type="radio" id="basic" value="basic" />Basic Slideshow<br />

<input name="showtype" type="radio" id="lovestory" value="lovestory" /> Love Story <br />

<input name="showtype_cost" type="text" id="text" value="100">
<p></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:37:58.630

```
$('input:radio[name="showtype"]').change(function(){
    $('input:text[name="showtype_cost"]').val($('input:radio[name="showtype"]:checked').val());
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T07:38:35.300

```
$(document).ready(function(){ 
   $('*[name=showtype]').click(function(){
        $("#text").val($(this).val());
        });
    });
}); 
```

# jquery - Jquery 数据表：动态操作 aoColumns 属性

> ID：13006845
> 
> 赞同：4
> 
> 时间：2012-10-22T07:33:00.323
> 
> 标签：jquery, datatables

我有一个要求，我需要根据单选按钮选择更改数据表数据和标题。响应由 AJAX 请求提供。我们可以使用 API 函数轻松更改数据。但是我需要更改列属性（特别是 sTitle、mData），因为我的响应对于每个单选按钮选择都有不同的键。

对于第一个单选按钮，我的回答是：

```
 {"id" :101, "label" : "Ragesh"}; headers - Id, Label , 
```

第二个单选按钮响应：

```
 {"type" :2 , "name" :"Ravi"} ; headers - Type, Name 
```

请告诉我如何在不重新创建数据表的情况下完成此操作

如果需要任何澄清，我可以提供更多细节

任何形式的帮助都非常感谢！

~拉吉什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:15:15.190

有一个基于隐藏列的非常棘手的解决方法。

执行以下步骤来初始化表。首先定义“aoColumns”：有四列：

```
"aoColumns": [
    { "sTitle": "Id",   "mData": "id" },
    { "sTitle": "Label" "mData": "label" },
    { "sTitle": "Type", "mData": "type" },
    { "sTitle": "Name" ,"mData": "name" }] 
```

然后定义 ajax 源，例如，为第一个单选按钮案例：

```
"sAjaxSource" : "/getFirstAjaxSource"; 
```

表初始化后，使用 jQuery 将第 3 列和第 4 列（在您的情况下为 "Type" 和 "Name" ）设置为不可见，因此您只会看到第一列和第二列：

```
 $(function(){
  oTable.fnSetColumnVis( 2, false);
  oTable.fnSetColumnVis( 3, false );
}) 
```

然后在点击处理函数中使用以下逻辑。

第一个按钮：

```
jQuery('#first').live('click',function () {     
  oTable.fnSettings().sAjaxSource  = "/getFirstAjaxSource";      
  oTable.fnSetColumnVis( 0, true);
  oTable.fnSetColumnVis( 1, true );
  oTable.fnSetColumnVis( 2, false);
  oTable.fnSetColumnVis( 3, false );
}); 
```

第二个按钮：

```
jQuery('#second').live('click',function () {     
  oTable.fnSettings().sAjaxSource  = "/getSecondAjaxSource";      
  oTable.fnSetColumnVis( 0, false);
  oTable.fnSetColumnVis( 1, false );
  oTable.fnSetColumnVis( 2, true);
  oTable.fnSetColumnVis( 3, true );
}); 
```

不要忘记为ajax源中的隐藏列添加假值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:48:22.200

最后我设法找到了解决方案。我用前两列初始化表，为每一列指定一个类，为 ,say(Id, Label) 指定一个“sClass”属性，并基于单选按钮选择，首先我相应地更改了两列的标题文本。对于数据，我所做的是解析响应并为这两种情况创建了独特的格式。

让我更清楚地说明：

**数据表初始化：**

```
$('#myTable').dataTable({
"aoColumns": [  {"sTitle": "Label", "mData": "column1_data","sClass" : "header1"},
        {"sTitle": "Type", "mData": "column2_data","sClass" : "header2"},
                        {"bVisible" : false, "mData" : "id"}],
        "sScrollY": "150px",
        "aaData": [],
        "sPaginationType": "full_numbers",
        "bfilter": false,
        "bDestroy": true,
        "bAutoWidth":true,
        "sDom": 'T<"clear">lfrtip',
        "oTableTools": {
            "sRowSelect": "multi",
            "aButtons": []
        }       

    }); 
```

然后我解析了响应并为这两种情况制作了一个独特的数据结构，如下所示：

**为两种情况返回唯一响应的函数：**

```
function getData(aaData){ // aaData -> data obtained from server
var returnData = new Array();   
$.each(aaData, function(index,rowData){

    var row = new Object();
    if(firstRadioBtn){
        row['column1_data'] = rowData['label'];
            row['column2_data'] = rowData['type'];
    }else{
        row['column1_data'] = rowData['sourceLabel'];
        row['column2_data'] = rowData['targetLabel'];
    }
    row['id'] = rowData['id'];
    returnData.push(row);
    }); 
    return returnData;

} 
```

这就是我解决它的方法..我想知道这是否好...

建议总是受欢迎的！

~拉吉什

# python - 使用 QWebView 请求的 POST 请求

> ID：13006846
> 
> 赞同：1
> 
> 时间：2012-10-22T07:33:04.957
> 
> 标签：python, pyqt, pyside, qwebview, qwebkit

嗨，我正在使用 pyqt4，我想做的是通过使用我的 QWebPage/QWebView 的 QtWebKit 请求来制作任意 POST 请求。通过广泛地查看我的理解是，我必须通过覆盖该`createRequest()`方法来继承 networkaccessmanager。

我看到了一个示例，它允许使用 createRequest 的第四个参数来提取正在发送的 POST 请求的数据（请参见下面的代码），但我的问题是如何设置 createRequest 的相同数据变量来发送自定义 POST 数据，像“查询=我的价值”？

显然 data 是一个`QIODevice`变量：我尝试了很多不同的方法来设置它，但无法让它工作，并且总是以 python 抱怨它是一个意外的值而告终。我在这里错过了什么吗？有人愿意分享一个工作代码示例吗？

```
import sys  
from PySide.QtCore import *  
from PySide.QtGui import QApplication  
from PySide.QtWebKit import QWebView, QWebPage 
from PySide.QtNetwork import QNetworkAccessManager

html = '''  <html>  <body> 
    <form action="http://www.google.com" method="post"><input type="text" name="test" /><input type="submit" value="submit"/></form>
</body>  </html>  ''' 

class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()
        self.network_manager.createRequest = self._create_request

        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)

        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)

        self.html_data = None

    def _create_request(self, operation, request, data):
        # data contains all the post data that is being added to the request
        # so you can look into it here
        print data.readAll()
        reply = QNetworkAccessManager.createRequest(self.network_manager,
                                                    operation,
                                                    request,
                                                    data)
        return reply

if __name__ == '__main__': 
    app = QApplication(sys.argv) 
    browser = Browser() 
    frame = browser.web_page.mainFrame() 
    browser.web_view.setHtml(html) 
    browser.web_view.show() 
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:04:26.480

您发布的代码来自我的一个答案，所以我也有义务回答这个问题:)

```
from PySide.QtCore import QByteArray, QUrl
from PySide.QtGui import QApplication  
from PySide.QtWebKit import QWebView, QWebPage 
from PySide.QtNetwork import QNetworkAccessManager, QNetworkRequest, QNetworkReply

class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()
        self.network_manager.createRequest = self._create_request
        self.network_manager.finished.connect(self._request_finished)

        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)

        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)

    def _create_request(self, operation, request, data):
        print data.readAll()
        reply = QNetworkAccessManager.createRequest(self.network_manager,
                                                    operation,
                                                    request,
                                                    data)
        return reply

    def _request_finished(self, reply):
        if not reply.error() == QNetworkReply.NoError:
            # request probably failed
            print reply.error()
            print reply.errorString()

    def _make_request(self, url):
        request = QNetworkRequest()
        request.setUrl(QUrl(url))
        return request

    def _urlencode_post_data(self, post_data):
        post_params = QUrl()
        for (key, value) in post_data.items():
            post_params.addQueryItem(key, unicode(value))

        return post_params.encodedQuery()

    def perform(self, url, method='GET', post_data=dict()):
        request = self._make_request(url)

        if method == 'GET':
            self.web_view.load(request)
        else:
            encoded_data = self._urlencode_post_data(post_data)
            request.setRawHeader('Content-Type',
                                 QByteArray('application/x-www-form-urlencoded'))
            self.web_view.load(request,
                               QNetworkAccessManager.PostOperation,
                               encoded_data)

if __name__ == '__main__':
    app = QApplication([])
    browser = Browser()
    browser.perform('http://www.python.org', 'POST', {'test': 'value', 'anothername': 'gfdgfd'})
    app.exec_() 
```

# git - GitHub 和分叉

> ID：13006848
> 
> 赞同：1
> 
> 时间：2012-10-22T07:33:20.620
> 
> 标签：git, github, open-source, branching-and-merging

我需要分叉一个特定项目的分支。我已经分叉了主分支，但现在mantainer 已经为“开发”添加了一个新分支，我需要下载代码并修改一些内容，然后发送拉取请求。

我怎样才能分叉一个分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:34:46.693

您可以重用现有的 fork，只需在本地 repo 中获取新分支，然后将该分支推送到您的 fork。

您的本地存储库具有远程“起源”您的分叉，但您可以添加另一个引用 mantainer 存储库的远程“上游”。
你可以：

*   `git fetch upstream`,
*   `git checkout -b Development upstream/Development`
*   `git push -u origin Development`

（如“ [Github：将上游分支导入 fork](https://stackoverflow.com/questions/4410091/github-import-upstream-branch-into-fork) ”）

# java - 在 ArrayList 中添加重复元素的值

> ID：13006850
> 
> 赞同：1
> 
> 时间：2012-10-22T07:33:30.533
> 
> 标签：java, android

我有一个`Arraylist`记录。

```
package com.demo.myproject;

public class Records 
{
    String countryName;
    long numberOfDays;

    public String getCountryName() {
        return countryName;
    }
    public void setCountryName(String countryName) {
        this.countryName = countryName;
    }
    public long getNumberOfDays() {
        return numberOfDays;
    }
    public void setNumberOfDays(long numberOfDays) {
        this.numberOfDays = numberOfDays;
    }

    Records(long days,String cName)
    {
        numberOfDays=days;
        countryName=cName;
    }
} 
```

我`Arraylist<Records>`的包含值

```
 Singapore     12 
 Canada         3
 United Sates  12
 Singapore     21 
```

我需要修改它，以便我的输出是

```
Canada         3
Singapore     33
United States 12 
```

请帮助我解决方案，方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:36:06.500

您可以将记录存储在地图中，其中关键是国家/地区。

当您收到一条新记录时，检查该国家是否已经在地图中，如果是，则添加天数，如果没有则创建它。

```
Map<String, Record> map = new HashMap<String, Record> ();

addRecord(map, someRecord);

private void addRecord(Map<String, Record> map, Record record) {
    Record inMap = map.get(record.getCountryName());
    if (inMap == null) {
        inMap = record;
    } else {
        inMap.setNumberOfDays(inMap.getNumberOfDays() + record.getNumberOfDays());
    }
    map.put(record.getCountryName(), inMap);
} 
```

笔记：

*   我假设修改记录是可以的 - 如果不只是使用天数总和创建一个新记录。
*   您仍然可以通过调用`map.values();`和迭代它们来获取记录的集合
*   ArrayList 不太适合您的用例。如果您确实需要坚持使用 ArrayList，对于每条新记录，您需要遍历列表，检查列表中的一条记录是否与新记录具有相同的国家，如果找到则更新该记录，或者如果没有，请添加新记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:10:09.843

```
public class RecordsMain {

    static ArrayList<Records> al = new ArrayList<Records>();
    static boolean flag = false;

    public static void main(String[] args) {
        Records rec1 = new Records(12,"Singapore");
        Records rec2 = new Records(3,"Canada");
        Records rec3 = new Records(12,"United States");
        Records rec4 = new Records(21,"Singapore");

        addToList(rec1);
        addToList(rec2);
        addToList(rec3);
        addToList(rec4);

        for (int i = 0; i < al.size(); i++) {     
            System.out.println(al.get(i).getCountryName() + " :: " + al.get(i).getNumberOfDays());
        }
    }

    public static void addToList(Records records) {
        for (int i = 0; i < al.size(); i++) {     
            if(al.get(i).getCountryName().equals(records.getCountryName())) {
                al.get(i).setNumberOfDays(al.get(i).getNumberOfDays()+records.getNumberOfDays());
                flag=true;
            }
        }
        if (flag == false)
            al.add(records);
    }
} 
```

笔记：

*   该函数`addToList`添加记录，并在添加自身时检查是否`CountryNames`重复，如果重复，则添加天数并且不将任何新条目标记到`ArrayList`.
*   我不确定你是否也在寻找排序`List`，因此没有尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:50:00.660

我想您自己创建这些记录。如果您不需要任何特定的元素顺序，您应该使用 HashMap 并且正如 assylias 所说 - 仅在它们不存在时创建国家元素。当您需要保持元素的顺序（或稍后按名称等对其进行排序）时，您仍然可以使用 ArrayList 和“indexOf()”方法轻松找到它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:55:02.457

我不知道你究竟想在那里做什么，但如果你想用特定的标准对其进行排序，那么你可以使用可比较或比较器接口使用 ArrayList 中的标准对记录进行排序，并使用 collections.sort() 方法对其进行排序。

# sql - 创建视图并在单个 SQL 脚本中使用它

> ID：13006857
> 
> 赞同：0
> 
> 时间：2012-10-22T07:34:05.493
> 
> 标签：sql, sql-server-2005, ssms

简单的事情......我想。创建一个视图并稍后在同一个 SQL 脚本中使用它。假设我们有一个脚本如下：

```
CREATE VIEW someView AS (...)
DROP VIEW someView 
```

如果我尝试解析它的 SQL 管理投诉，则会出现 DROP 错误。如果我分别执行它们（先创建，然后删除），它们都可以正常工作。有什么方法可以创建视图并在单个 SQL 脚本中使用它？我可以将进一步的语句包装在字符串中，然后执行它，但这有点不方便。

**代码示例已修复（缺少 VIEW）**

更有意义的例子：

```
create view TEST as (select name from spt_values where number=1);
drop view TEST 
```

是否可以一次执行？我得到了错误：

```
Msg 156, Level 15, State 1, Procedure TEST, Line 2
Incorrect syntax near the keyword 'drop'. 
```

单独运行 create 语句然后删除视图效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:49:46.833

`GO`将您的查询与下面的查询之类的关键字分开：

```
CREATE VIEW someView AS ()
GO

DROP VIEW someView
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:37:29.060

无论您使用哪个特定的 DBMS，您都应该创建一个脚本，用“;”分隔您的 SQL 语句。

例如

```
CREATE VIEW someView as (...);

<<some other sql statements>>

DROP VIEW someView; 
```

# hibernate - 休眠行映射器

> ID：13006866
> 
> 赞同：0
> 
> 时间：2012-10-22T07:34:54.870
> 
> 标签：hibernate, hql

我的对象数组中有我的 LogEventType。有没有办法使用它的构造函数创建一个新的 LogEventType ？这是可能的，我 LogEventType 是一个映射实体，但它不是。使用 sql 和常规插入创建表 logeventtype。在这种情况下返回

```
new LogEventType(obj[0],obj[1]); 
```

会很好，但我需要稍后获取一个列表。

```
Session session = sessionFactory.getCurrentSession();
String queryString = "select type.eventid, type.value from logeventtype type where type.eventid = :eventid";
Query query = session.createSQLQuery(queryString).setParameter("eventid", enventId);
Object[] obj = (Object[]) query.uniqueResult(); 
```

编辑：这是我一直在尝试的

```
Session session = sessionFactory.getCurrentSession();
String queryString = "select new com.company.Test(type.value) from logeventtype type where type.eventid = :eventid";
Query query = session.createQuery(queryString).setParameter("eventid", 1l);
Object[] obj = (Object[]) query.uniqueResult(); 
```

我得到 logeventtype 没有映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:29:55.933

我可以这样做

```
 Query query = sessionFactory.getCurrentSession().createSQLQuery("select * from logeventtype ").addScalar("eventId", StandardBasicTypes.LONG)
            .addScalar("value", StandardBasicTypes.STRING).setResultTransformer(Transformers.aliasToBean(LogEventType.class)); 
```

# wxpython - 菜单栏中的 wx.TextCtrl 字段

> ID：13006869
> 
> 赞同：1
> 
> 时间：2012-10-22T07:35:01.570
> 
> 标签：wxpython, menubar, wx.textctrl

在以下示例中，我为带有恢复选项的菜单列表编码了一个过滤器。它被放置在面板中。

我的问题是是否可以在菜单栏中放置 wx.TextCtrl 字段？

这是近似代码。也许有更好的解决方案？我想制作一个用户友好且直观的小部件。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import wx

mlst=["LT1","LT2","LT3","RT1","RT2","RT3","LF1","LF2","LF3","RF1","RF2","RF3"]

class MainWidget(wx.Frame):

    def __init__(self, parent, title):
        super(MainWidget, self).__init__(parent, title=title)

        panel = wx.Panel(self)
        vbox = wx.BoxSizer(wx.VERTICAL)
        hbox=wx.BoxSizer(wx.HORIZONTAL)
        st = wx.StaticText(panel, label='Button filter')
        self.tc=wx.TextCtrl(panel,size=(40,-1))
        hbox.Add(st, flag=wx.RIGHT, border=10)
        hbox.Add(self.tc, proportion=.1)
        vbox.Add(hbox, flag=wx.EXPAND|wx.LEFT|wx.RIGHT|wx.TOP, border=10)
        panel.SetSizer(vbox)    

        menubar = wx.MenuBar()
        self.mButton=wx.Menu()
        mr=self.mButton.Append(wx.NewId(),'&Restore')
        self.Bind(wx.EVT_MENU, self.OnRestore,mr)

        for i,item in enumerate(mlst):
            self.mButton.Append(wx.NewId(),item,item)

        self.Bind(wx.EVT_TEXT, self.OnText,self.tc)

        menubar.Append(self.mButton, '&Button')
        self.SetMenuBar(menubar)

        #mtitle="{} {}".format(len(mlst),self.mButton.GetLabel()  )

    def OnRestore(self,event):
        itemnames=[ x.GetText() for x in self.mButton.GetMenuItems() ]
        for item in mlst:
            if item not in itemnames:
                self.mButton.Append(wx.NewId(),item,item)
        self.tc.ChangeValue('')

    def OnText(self, event):
        text = self.tc.GetValue()
        items=self.mButton.GetMenuItems()

        for i,item in enumerate(items):
            if i>0:
                if text not in item.GetText():
                    print 'deleting: ',item.GetText()
                    self.mButton.RemoveItem(item)

        print [ x.GetText() for x in self.mButton.GetMenuItems() ]

if __name__ == '__main__':
    app = wx.App(redirect=False)
    frame = MainWidget(None, "Menu items filter")
    frame.Show(True)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:32:28.223

我不相信普通的菜单小部件可以做到这一点，因为它们包装了原生小部件，而且我以前从未在原生菜单中看到过这种情况。您可能可以使用 FlatMenu 来完成，因为它是纯 Python。至少，您应该能够破解 FlatMenu 代码以允许它。否则，您将需要自己滚动。

不过，您可以将 TextCtrl 放在工具栏中（以及在 FlatMenu 工具栏实现中）。

# web-services - wsimport - 两个声明导致 ObjectFactory 类中的冲突

> ID：13006876
> 
> 赞同：1
> 
> 时间：2012-10-22T07:35:39.123
> 
> 标签：web-services

尝试使用 wsimport 为 SOAP 端点生成客户端。wsdl 是由我们的一位客户发布的。当我使用 wsimport 或 cxf 时出现以下错误，如果我使用的是 Axis2，则绑定会正确生成。

任何人都可以就如何让它发挥作用提供任何建议吗？

**使用的命令：**

wsimport -s src -d bin wsdlurl

**错误：**

解析 WSDL... [错误] 两个声明导致 ObjectFactory 类中的冲突。wsdlurl?xsd=xsd4 的第 1 行

[wsimport] [WARNING] 未知的可扩展性元素或属性“EndpointReference”（在命名空间“http://www.w3.org/2005/08/addressing”中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:10:37.983

**该错误是由于 wsdl 中的 xsd 格式不正确造成的。**

我已经使用 NetBeans 来生成 Webservice 客户端。

当我们尝试生成客户端绑定时会报错，我们需要更改

位于 NetBeans 项目中的 xsd 文件

`\NetBeansProject\src\META-INF\wsdl\packgestructure\wcflib-tc`

并将它们复制到 xmlresources 路径

`\NetBeansProject\xml-resources\web-service-references\service\wsdl\packagestructure\wcflib-tc\`将生成项目 NetBeans 客户端绑定中的文件夹和刷新服务。

# mysql - 定义日期属性

> ID：13006884
> 
> 赞同：0
> 
> 时间：2012-10-22T07:36:24.950
> 
> 标签：mysql

在我的`MySql`数据库中，我没有一个`date`属性`timestamp`，但我不知道如何编写结构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:45:32.197

查看有关日期格式的 mysql 文档：

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

> DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

您的默认值 0000-00-00 不在支持范围内！

# c# - GC前后进程内存消耗

> ID：13006885
> 
> 赞同：1
> 
> 时间：2012-10-22T07:36:29.393
> 
> 标签：c#, memory-leaks

我正在为我的托管应用程序编写验收测试，以确保它在加载和卸载数据时不会泄漏内存。这是我正在做的示例代码：

```
System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess();
long memoryBefore = process.PrivateMemorySize64;
// Keep creating new projects.
for (int i = 0; i < 100; i++){
   MyApplication.CreateObject();
   MyApplication.UnlaodLastCreatedObject();

   System.GC.Collect();
   System.GC.WaitForPendingFinalizers();
   System.GC.WaitForFullGCComplete();
} 
```

为了测试我的进程是否具有相同的内存消耗 (+1MB)，我执行以下操作：

```
// Refresh the memory statistics
process.Refresh();
Assert.Less((decimal)process.PrivateMemorySize64,(decimal)(memoryBefore + (1024 * 1024))); 
```

该测试似乎根本不可靠，因为它不时随机失败。我上面的代码有什么问题吗？是否有不同的方法来测试我的进程是否没有泄漏内存？

**编辑** 失败是随机的，下面是我的构建服务器输出的屏幕截图，您可以清楚地看到测试不时失败。

![在此处输入图像描述](../Images/60164d89ac34752296e6ac2641654bbc.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:12:12.487

有两件事可能对您有所帮助。首先，看看msdn上的`GC.WaitForFullGCComplete`方法

[http://msdn.microsoft.com/pl-pl/library/cc647068.aspx](http://msdn.microsoft.com/pl-pl/library/cc647068.aspx)

它说，那

> 此方法调用之前应调用 WaitForFullGCApproach 方法，以确保您已进行完整的垃圾回收。单独调用此方法会产生不确定的结果。

第二件事是，如果您有任何实现 Finalize 方法的对象，它们将不会在第一次垃圾回收中被收集（您可以阅读一些关于 freachable 队列的内容，以了解更多关于具有 Finalize 方法的对象如何工作的概述）。

# wcf - 在生产环境中为 IIS 中托管的 WCF 服务使用自签名证书？

> ID：13006889
> 
> 赞同：1
> 
> 时间：2012-10-22T07:36:43.710
> 
> 标签：wcf, security, certificate

我有一个由网站（ASP.NET WebForms）和桌面应用程序（WinForms + WPF）组成的项目。现在我正在设计一个托管在 IIS 中的 WCF 服务，这些应用程序将使用该服务。服务由 Active Directory 进行身份验证。不幸的是，在 WCF 中，所有与安全相关的东西都需要证书才能工作。

在开发机器上，我知道我可以使用临时证书，但问题在于生产。客户端服务器只能从 Intranet 访问，因此没有配置 SSL 和证书（也不是购买的选项）。

*我的问题是：我可以在生产中使用 IIS 自签名证书吗？*这样做的缺点是什么？到目前为止，我只将 WCF 用于简单的 AJAX 调用，并且没有使用过安全性内容和证书。

# objective-c - 发送记录音频 POST

> ID：13006897
> 
> 赞同：1
> 
> 时间：2012-10-22T07:37:16.127
> 
> 标签：objective-c, ios, avaudiorecorder

我用 AVAudioRecorder 录制音频：

```
 audioRecorder = nil;

//Initialize audio session
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryRecord error:nil];

[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];

//Override record to mix with other app audio, background audio not silenced on record
OSStatus propertySetError = 0;
UInt32 allowMixing = true;
propertySetError = AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixing), &allowMixing);

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

NSLog(@"Mixing: %lx", propertySetError); // This should be 0 or there was an issue somewhere

[[AVAudioSession sharedInstance] setActive:YES error:nil];

NSMutableDictionary *recordSetting = [[NSMutableDictionary alloc] initWithCapacity:0];

if (recordEncoding == ENC_PCM) {
    [recordSetting setValue:[NSNumber numberWithInt:kAudioFormatLinearPCM]  forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0]              forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt:2]                      forKey:AVNumberOfChannelsKey];

    [recordSetting setValue:[NSNumber numberWithInt:16]                     forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO]                    forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO]                    forKey:AVLinearPCMIsFloatKey];
} else {

    NSNumber *formatObject;

    switch (recordEncoding) {
        case ENC_AAC:
            formatObject = [NSNumber numberWithInt:kAudioFormatMPEG4AAC];
            break;

        case ENC_ALAC:
            formatObject = [NSNumber numberWithInt:kAudioFormatAppleLossless];
            break;

        case ENC_IMA4:
            formatObject = [NSNumber numberWithInt:kAudioFormatAppleIMA4];
            break;

        case ENC_ILBC:
            formatObject = [NSNumber numberWithInt:kAudioFormatiLBC];
            break;

        case ENC_ULAW:
            formatObject = [NSNumber numberWithInt:kAudioFormatULaw];
            break;

        default:
            formatObject = [NSNumber numberWithInt:kAudioFormatAppleIMA4];
            break;
    }

    [recordSetting setValue:formatObject                                forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0]          forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt:2]                  forKey:AVNumberOfChannelsKey];
    [recordSetting setValue:[NSNumber numberWithInt:12800]              forKey:AVEncoderBitRateKey];

    [recordSetting setValue:[NSNumber numberWithInt:16]                 forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue:[NSNumber numberWithInt:AVAudioQualityHigh] forKey:AVEncoderAudioQualityKey];

}

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *recDir = [paths objectAtIndex:0];
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/recordTest.caf", recDir]];

NSError *error = nil;
audioRecorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&error];

if (!audioRecorder) {
    NSLog(@"audioRecorder: %@ %d %@", [error domain], [error code], [[error userInfo] description]);
    return;
}

//    audioRecorder.meteringEnabled = YES;
//
BOOL audioHWAvailable = audioSession.inputAvailable;
if (! audioHWAvailable) {
    UIAlertView *cantRecordAlert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: @"Audio input hardware not available"
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [cantRecordAlert show];
    return;
}

if ([audioRecorder prepareToRecord]) {
    [audioRecorder record];
    NSLog(@"recording");
} else {
    //        int errorCode = CFSwapInt32HostToBig ([error code]);
    //        NSLog(@"Error: %@ [%4.4s])" , [error localizedDescription], (char*)&errorCode);
    NSLog(@"recorder: %@ %d %@", [error domain], [error code], [[error userInfo] description]);
} 
```

我想在`POST`标题中发送它。我怎样才能正确地做到这一点？我猜我应该有`NSData`然后将其转换为`NSString`. 我对吗？如果为真，我如何将`AVAudioRecorder`输出转换为`NSData`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:37:03.997

这是我为了解音频文件上传所做的示例应用程序。您可以使用以下方法通过 POST 发送录制的音频：

```
- (IBAction) pushLoader
  {
    NSURL *pathURL = urlOfAudioFile; //File Url of the recorded audio
    NSData *voiceData = [[NSData alloc]initWithContentsOfURL:pathURL];
    NSString *urlString = @"http://iroboticshowoff.com/img2/upload.php"; // You can give your url here for uploading
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc]init]autorelease];

    @try
    {
        [request setURL:[NSURL URLWithString:urlString]];
        [request setHTTPMethod:@"POST"];
        NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
        [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

        NSMutableData *body = [NSMutableData data];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\".caf\"\r\n"]dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"]dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithData:voiceData]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary]dataUsingEncoding:NSUTF8StringEncoding]];

        [request setHTTPBody:body];

        NSError *error = nil;
        NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&error];
        NSString *returnString = [[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding];
        UIAlertView *alert = nil;
        if(error)
            {
            alert = [[UIAlertView alloc]initWithTitle:@"Message" message:@"Error in Uploading the File" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        }
        else
            {
            NSLog(@"Success %@",returnString);
            alert = [[UIAlertView alloc]initWithTitle:@"Message" message:@"File get uploaded" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        }
        [alert show];
        [alert release];
        alert = nil;
        [returnString release];
        returnString = nil;
        boundary = nil;
        contentType = nil;
        body = nil;     
    }
    @catch (NSException * exception)
     {
        NSLog(@"pushLoader in ViewController :Caught %@ : %@",[exception name],[exception reason]);
    }
    @finally
    {
        [voiceData release];
        voiceData = nil;
        pathURL = nil;
        urlString = nil;
    }
} 
```

# database - 如何更新 Access MDB 文件 - InstallShield？

> ID：13006898
> 
> 赞同：1
> 
> 时间：2012-10-22T07:37:25.257
> 
> 标签：database, windows-installer, ms-access-2007, installshield, installshield-2012

我想在安装期间使用 InstallSheild 2012 安装程序向 Access MDB 文件中的一个表添加一个条目。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:51:59.637

InstallShield 原生假设 MSSQL、Oracle 和 MySQL 数据库连接/脚本执行。您必须编写自定义操作来连接到 MDB。

我同意这最好在安装程序之外完成。如果有人曾经恢复过 MDB 的旧副本（毕竟它只是一个文件副本），那么更改将会丢失。最好在应用程序运行时处理它。

# django - TastyPie obj create 方法未被调用

> ID：13006901
> 
> 赞同：0
> 
> 时间：2012-10-22T07:37:33.287
> 
> 标签：django, tastypie

我是 TastyPie 的新手。我有一个非常简单的资源，并以以下方式覆盖 obj_create 方法。

阿贾克斯调用：-

```
 var data2 ={
                  "crave": data1,
                  "uid": "100",
                  "access_token": "AAA"                     
              };                                                   
              $.ajax({
                  url: "http://localhost:8000/restapi/v1/icrave/",
                  type: 'POST',                     
                  data: data2,
                  contentType: 'application/json',
                  dataType: 'json',
                  success: function (res) {
                      console.log(res);
                  },
              }); 
```

在资源中

```
class IcravesResource(ModelResource): 
person = fields.ForeignKey(UserResource, 'person')
class Meta:

    queryset = Icrave.objects.filter(anonymous_or_not = False,is_active = True).order_by('-datetime')
    resource_name = "icrave" 
    allowed_methods = ['get','post']
    authentication =  GetAuthentication()     
    authorization = GetAuthorization()      

def obj_create(self,bundle,request=None, **kwargs):                
        print "Check if code reached here !!!"

        return super( IcravesResource, self ).obj_create( self, bundle, request, **kwargs ) 
```

代码没有到达这里。我究竟做错了什么 ？我已经检查了它们都返回 true 的授权和身份验证。我该如何调试这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:14:13.590

您可以使用 Python 调试器。（[http://docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)）

找到你的tastepie副本（可能在你的virtualenv中），打开文件*resources.py*并找到方法*post_list*。这是当对列表资源 URL 的 POST 请求发送到 Django 时调用的方法。

您会在该方法的某处找到对 *obj_create* 的调用。现在您可以通过添加以下行来设置断点：

```
import pdb
pdb.set_trace() 
```

在那个方法中。也许作为第一个声明。

现在，当您启动 devserver 并发出 ajax-call 时，执行应该在 set_trace() 处停止，并且您应该在 shell 中看到一个 python 提示符，您确实启动了 devserver。

现在您可以探索请求的运行时环境。例如，您可以通过在提示符下输入局部变量来检查它们。
你可以通过输入' **l '（小L）来查看你所在方法的列表，用'** **n** '执行下一行，用' **s** '进入一个函数。

这应该可以帮助您了解正在发生的事情。花一些时间学习如何使用 pdb，这是非常值得的。

有关 pdb 和 django 的更多信息，请参阅：

[http://ericholscher.com/blog/2008/aug/31/using-pdb-python-debugger-django-debugging-series-/](http://ericholscher.com/blog/2008/aug/31/using-pdb-python-debugger-django-debugging-series-/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:29:29.273

您能否根据服务器日志验证服务器是否确实收到了 POST 请求？

如果是这样，您还可以尝试指定允许的方法列表，方法是：

```
list_allowed_methods = ['post', 'get'] 
```

而不是一般`allowed_methods`的。

这是一个代码片段，对我有用：

```
class EntryDetailsResource(CommonResource):

    class Meta:
        queryset = Entry.objects.all()
        detail_allowed_methods = ['put','get','delete']
        list_allowed_methods = ['post', 'get']
        authorization = DjangoAuthorization()
        validation = EntryDetailsValidation()

    def obj_create(self, bundle, request=None, **kwargs):
        import sys
        print sys.stderr, 'aa'
        return super(CommonResource, self).obj_create(bundle, request, user=request.user) 
```

# jquery - jQuery 数据类型

> ID：13006903
> 
> 赞同：-3
> 
> 时间：2012-10-22T07:37:55.600
> 
> 标签：jquery, json

超时工作！但是当超时我想运行一个函数。你有什么想法？

```
$.ajax({ 
type: "GET", 
url: "xajax.php", 
timeout: 100, 
data: "name=John&location=Boston", 
success: function(msg){ alert( "Data Saved: " + msg ); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:49:52.397

可能您的 json 对象响应不正确，例如检查它： - [http://jsonlint.com/](http://jsonlint.com/)

您也可以在浏览器控制台/网络规范中检查它，看看它是在客户端还是服务器端。

您可以显示您从服务器发送的内容（在创建 json 对象之后），以查看您是否正确发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:25:53.177

```
$.ajax({ 
type: "GET", 
url: "xajax.php", 
timeout: 100, 
data: "name=John&location=Boston", 
success: function(msg)
    { 
    $("#result").html("here is result: "+msg);
    }
complete: function(jqXHR, textStatus)
    { 
    if (textStatus == "timeout")
        {
        $("#result").html("TIMEOUT!");
        }
    }
 }); 
```

# spring - session.isOpen() 与 session.isConnected()

> ID：13006908
> 
> 赞同：3
> 
> 时间：2012-10-22T07:38:17.810
> 
> 标签：spring, hibernate

我正在使用 Spring 3.1 研究 Hibernate4 的示例。

在我的示例中，当我`sessionFactory.getCurrentSession().isOpen()`在控制台上打印时，它会打印

> 真的

但我面临一个例外

```
sessionFactory.getCurrentSession().isConnected() 
```

例外是：

```
org.hibernate.HibernateException: isConnected is not valid without active transaction 
```

**编辑：**我搜索了更多并找到了以下解决方案

`sessionFactory.getCurrentSession().beginTransaction(); sessionFactory.getCurrentSession().isConnected()`

但是我不想每次使用会话方法（如`isConnected`, `get`,`find`等）操作时都写开始事务`save`。

1.  上述异常的其他可能解决方案是什么？
2.  如果我`@Transactional`放在我的 dao 类方法上怎么办？

问候，

阿伦·库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:51:13.360

isConnected 很少使用，对于普通的 DAO 方法，它是不需要的。如果需要，Get/Find/Save 将在后台打开连接和事务，您无需手动处理任何事情。

# r - 将矩阵列表很好地导出到 Excel 中的同一个工作表

> ID：13006909
> 
> 赞同：0
> 
> 时间：2012-10-22T07:38:21.260
> 
> 标签：r, xlconnect

我有一个包含 4 个矩阵的列表。其中前两个：

```
$`1857-1903`
                      Bank.o.kassa Obligationer       Lån    Aktier Placeringar.andra.ftg Fodringar Reala.tillgångar Övriga.tillgångar
Bank.o.kassa             1.0000000    0.8014382 0.8079718 0.4421687                    NA 0.8395201        0.9144023         0.7995480
Obligationer             0.8014382    1.0000000 0.8422192 0.4590398                    NA 0.7871074        0.8815054         0.7003110
Lån                      0.8079718    0.8422192 1.0000000 0.5476716                    NA 0.8932723        0.9295665         0.7846206
Aktier                   0.4421687    0.4590398 0.5476716 1.0000000                    NA 0.7203681        0.4221815         0.6281095
Placeringar.andra.ftg           NA           NA        NA        NA                     1        NA               NA                NA
Fodringar                0.8395201    0.7871074 0.8932723 0.7203681                    NA 1.0000000        0.8869905         0.9395209
Reala.tillgångar         0.9144023    0.8815054 0.9295665 0.4221815                    NA 0.8869905        1.0000000         0.8158413
Övriga.tillgångar        0.7995480    0.7003110 0.7846206 0.6281095                    NA 0.9395209        0.8158413         1.0000000
Kapitalinkomster         0.9163688    0.8960790 0.9318508 0.4985449                    NA 0.9277740        0.9821501         0.8755644
                      Kapitalinkomster
Bank.o.kassa                 0.9163688
Obligationer                 0.8960790
Lån                          0.9318508
Aktier                       0.4985449
Placeringar.andra.ftg               NA
Fodringar                    0.9277740
Reala.tillgångar             0.9821501
Övriga.tillgångar            0.8755644
Kapitalinkomster             1.0000000

$`1904-1948`
                      Bank.o.kassa Obligationer         Lån       Aktier Placeringar.andra.ftg   Fodringar Reala.tillgångar Övriga.tillgångar
Bank.o.kassa             1.0000000   -0.5636371  0.12902979 -0.658883574          -0.202688601  0.76474140       0.81544129         0.4642105
Obligationer            -0.5636371    1.0000000  0.23820065  0.369712399           0.649156560 -0.69097442      -0.67090178        -0.3108845
Lån                      0.1290298    0.2382006  1.00000000 -0.301682319           0.663984986 -0.07873989       0.00901089         0.2894697
Aktier                  -0.6588836    0.3697124 -0.30168232  1.000000000          -0.005049947 -0.69634496      -0.77966741        -0.7496402
Placeringar.andra.ftg   -0.2026886    0.6491566  0.66398499 -0.005049947           1.000000000 -0.44833419      -0.31431360         0.1089602
Fodringar                0.7647414   -0.6909744 -0.07873989 -0.696344963          -0.448334185  1.00000000       0.84590718         0.5765548
Reala.tillgångar         0.8154413   -0.6709018  0.00901089 -0.779667406          -0.314313596  0.84590718       1.00000000         0.5367746
Övriga.tillgångar        0.4642105   -0.3108845  0.28946968 -0.749640198           0.108960190  0.57655477       0.53677459         1.0000000
Kapitalinkomster        -0.1114329    0.3693150  0.38160001 -0.125296598           0.720230427 -0.17280772      -0.13946215         0.3720201
                      Kapitalinkomster
Bank.o.kassa                -0.1114329
Obligationer                 0.3693150
Lån                          0.3816000
Aktier                      -0.1252966
Placeringar.andra.ftg        0.7202304
Fodringar                   -0.1728077
Reala.tillgångar            -0.1394622
Övriga.tillgångar            0.3720201
Kapitalinkomster             1.0000000 
```

我想将它们导出到Excel中的**同一个工作表。**问题是，例如，如果我 `write.csv2(my.list,file="my.list.csv2")` 不分开矩阵，那么它们之间就没有间距。另一方面，我知道如何使用 XLConnect 将我的列表导出到具有多张工作表的工作簿（在本例中为 4 张）。但我希望我的矩阵在**同一个工作表**中，由一些间距分隔，并`1857-1903`存在列表名称（即 $ ）。如果出现rownames也会很好......这可能吗？找不到任何答案。最好的祝福！

**编辑：**

我接受了@January 的回答。谢谢！但是，如果我使用`write.csv2`而不是`write.table`（为了获得所需的输出）我会收到一条警告消息：

`In write.csv2(export, file = "funkcorr.csv", quote = F, sep = ",") : attempt to set 'sep' ignored`. 然后，Excel 中的数字与 . 代替 ，。所以，我需要手动转换 . 到，在 Excel 中。知道为什么`sep`会被忽略吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T08:30:54.357

进一步研究这个问题，我仍然认为你可以得到一些可行的东西`sink()`，但我不确定是否有更好的选择。这是一个基本示例：

### 示例数据

```
set.seed(1)
myList <- list(matrixA = matrix(sample(300, 60), nrow = 10,
                                dimnames = list(LETTERS[1:10], 
                                                paste0("V", 1:6))),
               matrixB = matrix(sample(300, 50), nrow = 10,
                                dimnames = list(LETTERS[1:10], 
                                                paste0("V", 1:5)))) 
```

### 使用`sink()`和`lapply()`

```
sink("something.else.csv", type="output")
invisible(lapply(names(myList), 
                 function(x) { print(x)
                               dput(write.csv(myList[[x]])) } ))
sink() 
```

生成的 CSV 文件如下所示：

```
[1] "matrixA"
"","V1","V2","V3","V4","V5","V6"
"A",80,296,262,131,214,120
"B",112,52,290,162,168,215
"C",171,198,182,133,202,109
"D",270,111,35,50,143,61
"E",60,221,74,286,136,291
"F",266,142,107,178,258,25
"G",278,204,4,210,6,78
"H",194,281,105,29,121,127
"I",184,108,237,190,185,161
"J",18,219,93,282,174,99
NULL
[1] "matrixB"
"","V1","V2","V3","V4","V5"
"A",274,297,122,65,171
"B",88,243,199,16,92
"C",137,100,112,173,70
"D",99,96,91,234,256
"E",193,298,209,208,163
"F",77,291,56,212,55
"G",141,246,195,121,33
"H",225,111,34,108,264
"I",25,220,67,213,233
"J",255,270,39,158,151
NULL 
```

这在任何电子表格程序中都可以很好地打开，您可以轻松搜索“ `NULL`”的所有实例并将其替换为空，以便在每个矩阵之间有一个空白行。当然，如果您需要`write.csv2()`的话，您也可以使用而不是。`write.csv()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:12:58.157

假设所有矩阵具有相同的列数，并且该列表称为 matrices.l：

```
export <- NULL
nc <- ncol( matrices.l[[1]] )

for( n in names( matrices.l ) ) 
  export <- rbind( export, c( n, rep( "", nc - 1 ) ), matrices.l[[n]], "" )

write.table( export, file= ...,  quote= F, sep= ",", ... ) 
```

这并不优雅，并且使在 for 循环中创建 R 对象的主要罪过，但是 for 四个矩阵就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T18:44:37.320

以下是基于 XLConnect 的解决方案：

```
# Preparation of dummy data
data = rep(list(WorldPhones), 5)
names(data) = LETTERS[1:5]

require(XLConnect)
wb = loadWorkbook("matrix.xlsx", create = TRUE)
# Create a new sheet
createSheet(wb, name = "mysheet")
# cumulative length (rows) of matrices
# +2 = 1 for list names, 1 for header row
cumlen = cumsum(c(1, head(sapply(data, nrow), n = -1) + 2))
# Write data rows (implicitly vectorized!)
writeWorksheet(wb, data = data, sheet = "mysheet", startRow = cumlen + 1, header = TRUE)
# Write list names
writeWorksheet(wb, data = as.list(names(data)), sheet = "mysheet", startRow = cumlen, header = FALSE)
saveWorkbook(wb) 
```

# asp.net - 验证范围内的时间

> ID：13006915
> 
> 赞同：0
> 
> 时间：2012-10-22T07:38:53.397
> 
> 标签：asp.net, validation, ajaxcontroltoolkit

我有一个 TextBox 和 AjaxControlToolkit MaskedEditExtender 供用户输入时间。该控件绑定到代码中的时间跨度属性（以及 SQL Server 中的 time(7) 列）。要求是确保所有时间都在 1800h 和 0000h 之间（用于蝙蝠记录）。谁能建议如何使用 MaskedEditValidator 来确保输入的时间在这个范围内？

到目前为止我的代码：

```
<asp:TextBox ID="txtEmergenceTime" runat="server"  CssClass="formInput"
    Text='<%# Eval("EmergenceTime", "{0:hh\:mm}") %>' />
<asp:MaskedEditExtender ID="meeEmergenceTime" runat="server"
    TargetControlID="txtEmergenceTime" Mask="99:99" MaskType="Time"
    AutoComplete="false" AutoCompleteValue="0"/>
<asp:MaskedEditValidator ID="valEmergenceTime" runat="server"
    ErrorMessage="Emergence time must be between 18:00 and 00:00"
    CssClass="error" ControlToValidate="txtEmergenceTime"
    ValidationGroup="roostCount">*</asp:MaskedEditValidator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:51:05.247

您可以设置从 18:00 到 23:59 的时间间隔，并利用 MaskedEditValidato 的`MinimumValue`和`MaximumValue`属性。或者您可以`ClientValidationFunction`为验证器扩展器定义属性并使用自定义验证

# mysql - 具有内部依赖关系的 MySQL 查询

> ID：13006925
> 
> 赞同：0
> 
> 时间：2012-10-22T07:39:55.163
> 
> 标签：mysql

假设我有一个包含三列的表：user_to、user_from、counter。我正在尝试做一个查询，检查是否从同一个表中进行交叉引用检查。也许这将有助于理解：

```
SELECT user_to AS user_to1
    , user_from AS user_to2
FROM tbl
WHERE counter > 10
    AND NOT EXISTS (
        SELECT *
        FROM tbl
        WHERE user_to = user_from1
            AND user_from = user_to1
        ) 
```

我假设我试图做错了，但查询有助于理解我想要完成的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:42:13.287

你可以`ALIAS`在上面添加一个，

```
SELECT user_to AS user_to1
    , user_from AS user_to2
FROM tbl a
WHERE counter > 10
    AND NOT EXISTS (
        SELECT *
        FROM tbl b
        WHERE b.user_to = a.user_to
            AND b.user_from = a.user_from
        ) 
```

# python - Python中的伪随机二进制序列（prbs）

> ID：13006929
> 
> 赞同：1
> 
> 时间：2012-10-22T07:40:05.317
> 
> 标签：python, random, signals

如何通过 Python 制作*伪随机二进制序列*(prbs) 信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-09T17:40:39.817

请看下面的代码。这有点粗略，但您可以了解如何使用 NumPy创建***随机信号***和***PRBS 。***

```
import numpy as np
import matplotlib.pyplot as plt

nstep = 300

# random signal generation

a_range = [0,2]
a = np.random.rand(nstep) * (a_range[1]-a_range[0]) + a_range[0] # range for amplitude

b_range = [2, 10]
b = np.random.rand(nstep) *(b_range[1]-b_range[0]) + b_range[0] # range for frequency
b = np.round(b)
b = b.astype(int)

b[0] = 0

for i in range(1,np.size(b)):
    b[i] = b[i-1]+b[i]

# Random Signal
i=0
random_signal = np.zeros(nstep)
while b[i]<np.size(random_signal):
    k = b[i]
    random_signal[k:] = a[i]
    i=i+1

# PRBS
a = np.zeros(nstep)
j = 0
while j < nstep:
    a[j] = 5
    a[j+1] = -5
    j = j+2

i=0
prbs = np.zeros(nstep)
while b[i]<np.size(prbs):
    k = b[i]
    prbs[k:] = a[i]
    i=i+1

plt.figure(0) 
plt.subplot(2,1,1)
plt.plot(random_signal, drawstyle='steps',label='Random Signal')
plt.legend()
plt.subplot(2,1,2)
plt.plot(prbs, drawstyle='steps', label='PRBS')
plt.legend()
plt.show() 
```

[![在此处输入图像描述](../Images/8d49702fd808d4a4ca3723f9b60d56af.png)](https://i.stack.imgur.com/KAkqI.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T22:35:50.600

这是具有一元多项式的 prbs31 的基本实现：x ^(31) + x ^(28) + 1

```
def prbs31(code):
    for i in range(32):
        next_bit = ~((code>>30) ^ (code>>27))&0x01
        code = ((code<<1) | next_bit) & 0xFFFFFFFF
    return code 
```

给定一个整数，该函数将一次生成一个 PRBS 序列，并返回一个包含该序列接下来 32 位的整数。请注意，x ^(31)以上的输入整数位与输出无关。

XOR 和否定用于执行按位（模 2）加法。这可能不会提高上述代码的性能，但您可以使用位算术一次计算代码以获得更快的性能。例如：

```
def prbs31_fast(code):
    next_code = (~((code<<1)^(code<<4)) & 0xFFFFFFF0)
    next_code |= (~(( (code<<1 & 0x0E) | (next_code>>31 & 0x01)) ^ (next_code>>28)) & 0x0000000F)
    return next_code 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-22T08:40:28.547

```
>>> from random import choice
>>> def prbs():
...     while True:
...         yield choice([False, True]) 
```

# c# - C#：带换行符的 WriteFile

> ID：13006931
> 
> 赞同：0
> 
> 时间：2012-10-22T07:40:06.487
> 
> 标签：c#, file, save

我有几个必须系统编辑的网站文件。因此，我编写了一个更改某些行的小程序。我阅读了内容

```
List<string> list = new List<string>(
                        File.ReadAllLines(fileName,
                                          Encoding.GetEncoding(1252))
                                    ); 
```

进行更改，并保存内容

```
System.IO.StreamWriter file = new System.IO.StreamWriter(fileName, false, Encoding.GetEncoding(1252));
file.WriteLine(content); 
```

可悲的是，这将内容保存在一行中而没有换行符。您能否告诉我我必须使用哪些其他功能或者我必须如何调整代码以使原始换行符在编写文件的过程中不会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:42:15.253

尝试改用[File.WriteAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.writealllines.aspx)方法：

根据 MSDN：

> 创建一个新文件，将一个或多个字符串写入文件，然后关闭文件。

代码：

```
List<string> list = new List<string>(
                    File.ReadAllLines(fileName,
                                      Encoding.GetEncoding(1252))
                                );
// ... do something (editing) ... 
File.WriteAllLines(fileName, list); 
```

# forms - 使用 form_errors(form) plus 显示 symfony2 中每个字段的所有错误

> ID：13006932
> 
> 赞同：10
> 
> 时间：2012-10-22T07:40:12.777
> 
> 标签：forms, symfony, error-handling

我需要在表单上方显示所有错误，并为每个字段显示一个单独的错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T11:12:14.843

您需要更具体，但希望以下内容可以帮助您。

让我们假设您有一个名为`form`.

`{{ form_errors(form) }}`显示不特定于一个字段的全局错误

`{{ form_errors(form.email) }}`显示特定于字段的错误

`{{ form_row(form.email) }}`显示字段的 form_widget form_label 和 form_errors

[http://symfony.com/doc/2.0/cookbook/form/form_customization.html](http://symfony.com/doc/2.0/cookbook/form/form_customization.html)

**编辑：**

因此，如果您希望将全局错误和字段错误显示在同一位置，您可以执行以下操作：

```
{{ form_errors(form) }}
{{ form_errors(form.field1) }}
{{ form_errors(form.field2) }}
... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-16T14:20:54.520

```
{% spaceless %}
    {% if not form.vars.valid %}
            <div class="alert alert-error">
                {{ form_errors(form) }}

        {% for children in form.children %}
            {% if not children.vars.valid %}
                {{ form_errors(children) }}

                {# or with field label
                <ul>
                    {% for error in children.vars.errors %}
                        <li><b>{{ children.vars.label }}</b>: {{ error.message }}</li>
                    {% endfor %}
                </ul>
                #}
            {% endif %}
        {% endfor %}
            </div>
    {% endif %}
{% endspaceless %} 
```

在 sf 2.3 中为我工作

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-24T11:04:57.077

我在我的包中覆盖了 form_div_layout.html.twig：

```
{% block form_errors %}
    {% spaceless %}
        {% set a = false %}
        {% for child in form.children  %}
            {% if child.get("errors") %}
                {% set a = 'true' %}
            {% endif %}
        {% endfor %}
        {% if a == true %}
            <div class="alert">
                {% for children in form.children %}
                    {{  form_errors(children) }}
                {% endfor %}
            </div>
        {% endif %}
        {% if errors|length > 0 %}
            <ul>
                {% for error in errors %}
                    {{
                    error.messagePluralization is null
                    ? error.messageTemplate|trans(error.messageParameters, 'validators')
                    : error.messageTemplate|transchoice(error.messagePluralization, error.messageParameters, 'validators')
                    }}
                {% endfor %}
            </ul>
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %} 
```

现在，如果写入`form_errors(form)`它会在表单中显示所有错误，并且每个字段上的错误也会指示。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-08-10T09:19:00.473

在 Symfony 3.2 中，要获取模板中的所有表单错误，您可以使用有点 hacky，但简单且有效的解决方案`form.vars.errors.form.getErrors(true)`：

```
<ul>
    {% for error in formView.vars.errors.form.getErrors(true) %}
    <li>{{ error.message }}</li>
    {% endfor %}
</ul> 
```

诀窍是：

1.  `formView.vars.errors.form`通过错误迭代器（ ）的原始表单对象，
2.  为`form.getErrors(true)`您提供了一个遍历所有表单错误的递归迭代器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:48:45.150

您的表单以及您的字段都有单独的错误字段开始。您能否更具体地说明您要做什么以及问题出在哪里？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-02T13:56:14.080

我修改了@korvinko 的脚本，这适用于 Symfony 2.6.11 `

```
{% block form_errors %}
    {% spaceless %}
        <ul>
            {% for children in form.children %}
                {% if not children.vars.valid %}
                   {% for error in children.vars.errors %}
                        <li>{{ children.vars.label ~ ' ' ~
                        error.messagePluralization is null
                        ? error.messageTemplate|trans(error.messageParameters, 'validators')
                        : error.messageTemplate|transchoice(error.messagePluralization, error.messageParameters, 'validators')
                        }}</li>
                    {% endfor %}
                {% endif %}
            {% endfor %}
        </ul>

        {% if errors|length > 0 %}
            <ul>
                {% for error in errors %}
                    <li>{{
                    error.messagePluralization is null
                    ? error.messageTemplate|trans(error.messageParameters, 'validators')
                    : error.messageTemplate|transchoice(error.messagePluralization, error.messageParameters, 'validators')
                    }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %} 
```

`

# c# - 在 asp.net mvc3 中获取下拉列表的枚举

> ID：13006935
> 
> 赞同：0
> 
> 时间：2012-10-22T07:40:27.047
> 
> 标签：c#, asp.net-mvc-3, enums

这是我的枚举

```
public class Woodshape
    {
        public enum eWoodShape
        {
            Round = 10, 
            Oval = 20, 
            Plain = 30
        }
    } 
```

现在我想将其添加为我的控制器中的下拉列表

```
public ActionResult Create()
        {
            List<string> li = new List<string>();
            FieldInfo[] myEnumFields = typeof(Woodshape.eWoodShape).GetFields();
            foreach (FieldInfo myField in myEnumFields)
            {
                if (!myField.IsSpecialName && myField.Name.ToLower() != "notset")
                {
                    int myValue = (int)myField.GetValue(0);
                    li.Add(myField.Name);
                }
            }
            ViewBag.ddlEnumshape = new SelectList(myEnumFields, "myValue", "Name");

            return View();
        } 
```

在我看来，将其绑定为..

```
<div>
@Html.DropDownList("ddlEnumshape", "-Select shape-")
/<div> 
```

但是，它显示错误

```
System.Reflection.RtFieldInfo' does not contain a property with the name 'myValue'. 
```

谁能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:00:50.460

```
public static IEnumerable<SelectListItem> GetListEnumWrap<TEnum>()
        {
            var items = new List<SelectListItem>();
            if (typeof(TEnum).IsEnum)
            {
                foreach (var value in Enum.GetValues(typeof(TEnum)).Cast<int>())
                {
                    var name = Enum.GetName(typeof(TEnum), value);
                    name = string.Format("{0}", name);
                    items.Add(new SelectListItem() { Value = value.ToString(), Text = name });
                }
            }
            return items;
        } 
```

利用：

```
@Html.DropDownListFor(m => m.Type, EnumExtensions.GetListEnumWrap<Types>()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:56:09.397

我使用这种方法：

```
public static Dictionary<int, string> EnumToDictionary<T>()
    {
        return Enum.GetValues(typeof (T)).Cast<T>().ToDictionary(x => Convert.ToInt32(x), x => x.ToString());
    }

ViewBag.ddlEnumshape = new SelectList(EnumToDictionary<Woodshape.eWoodShape>, "Key", "Value"); 
```

# css - 使用 Twitter 引导程序 - 我可以更改行和列的顺序吗？

> ID：13006937
> 
> 赞同：7
> 
> 时间：2012-10-22T07:40:34.617
> 
> 标签：css, twitter-bootstrap

我有两行，每行三列。第一行包含图像，第二行包含文本区域。在桌面浏览器中 - 三列水平对齐 - 每个图像都在相应文本区域的顶部对齐。但是在移动设备上，当然，所有列都堆叠在彼此下方。这使得第一行中的所有图像都显示在彼此下方。然后文本区域以相同的方式跟随。

是否有一种 css 方式来重新排列我的列？我想将图像及其相应的文本区域堆叠在一起，如下所示：

```
image1
textArea1
image2
textArea2
image3
textArea3 
```

我有一个[jsfiddle](http://jsfiddle.net/Xsdcg/2/)设置。

```
<div class="row">
<div class="span4"> <div class="span4"> <div class="span4">
<div class="row">
<div class="span4"> <div class="span4"> <div class="span4"> 
```

没有图像，但你得到了一般的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-19T17:00:38.527

我假设您使用的是引导程序 3.0。

这是一种非常常见的布局情况。你有几个选择。

如果您将所有列放在同一个容器中并在各种视图上相应地处理它们，您可以使用内置的引导列重新排序和偏移量。然而，这主要与重新排列内容显示的顺序有关，对于这种特殊情况并不是最佳的，但请看看它是如何工作的，因为它将在未来的各种场景中派上用场。

[Bootstrap 3.0 偏移量](http://getbootstrap.com/css/#grid-offsetting)

但是在您的情况下以及我在这种情况下广泛使用的最合适的解决方案是将图像和文本放在相同的列上，如下所示：

```
<div class="row">
    <div class="col-md-3">
        <img class="img-responsive" src="..."/>
        <p>...image text here...</p>
    </div>
    <div class="col-md-3">
        <img class="img-responsive" src="..."/>
        <p>...image text here...</p>
    </div>
    <div class="col-md-3">
        <img class="img-responsive" src="..."/>
        <p>...image text here...</p>
    </div>
</div> 
```

这样，您就有了在所有视图上正确显示的列。

请记住，bootstrap 3 是移动优先的，开发应该从最理想的视图开始，从最小的视图到最大的视图。始终尝试将相关的 dom 元素放在一起，以便它们在不同大小的布局上具有理想的行为。

您只需要确保您的图像等于或大于较大的列空间宽度，并且您在图像上使用*img-responsive*类，以使其正确缩放。

还有其他方法可以实现这一点，但它们破坏了使用引导程序进行响应式布局的目的，并且会因为没有充分的理由和类似的结果而变得更加复杂。

尝试在引导程序中保持标记尽可能简单和优雅，以便更好地维护，否则事情很容易在类的代码汤中丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:49:52.863

您可以使用 twitter bootstrap 的缩略图，例如[http://twitter.github.com/bootstrap/components.html](http://twitter.github.com/bootstrap/components.html) ，而不是使用行来显示下面的图像和相关信息， 这是示例

```
 <ul class="thumbnails">
<li class="span4">
<div class="thumbnail">
<img src="http://placehold.it/300x200" alt="">
<h3>Thumbnail label</h3>
<p>Thumbnail caption...</p>
</div>
</li>
...
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T09:53:26.553

```
<div class="row">
<div class="col-sm-4">
    <div class="row">
        image1
    </div>
    <div class="row">
        textArea1
    </div>
</div>
<div class="col-sm-4">
    <div class="row">
        image2
    </div>
    <div class="row">
        textArea2
    </div>
</div>
<div class="col-sm-4">
    <div class="row">
        image3
    </div>
    <div class="row">
        textArea3
    </div>
</div> 
```

我希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T05:38:47.740

我建议在行之后放一些。我想你可以把它写成这样的结构

```
<div class = "container">
 <div class = "row">
  <div class = "col-md-12">
   <div class = "box-container">
    <div class = "image">
     <img href="path/to/image.jpg"/>
    </div>
    <div class = "paragraph">
     <p>Lorem Ipsum dolor set amit...</p>
    </div>
   </div><!-- end of box container-->
   <div class = "box-container">
    <div class = "image">
     <img href="path/to/image.jpg"/>
    </div>
    <div class = "paragraph">
     <p>Lorem Ipsum dolor set amit...</p>
    </div>
   </div><!-- end of box container-->
  </div>
 </div>
</div> 
```

然后为您的盒子容器和段落容器设置一些宽度。

你也可以用不同的方式来做。当您在移动设备上查看时，这将自动堆叠。

```
<div class = "container">
     <div class = "row">
      <div class = "col-md-4">
       <div class = "box-container">
        <div class = "image">
         <img href="path/to/image.jpg"/>
        </div>
        <div class = "paragraph">
         <p>Lorem Ipsum dolor set amit...</p>
        </div>
       </div><!-- end of box container-->
      </div><!-- 1st box-->
      <div class = "col-md-4">
       <div class = "box-container">
        <div class = "image">
         <img href="path/to/image.jpg"/>
        </div>
        <div class = "paragraph">
         <p>Lorem Ipsum dolor set amit...</p>
        </div>
       </div><!-- end of box container-->
      </div><!-- 2nd box-->
      <div class = "col-md-4">
       <div class = "box-container">
        <div class = "image">
         <img href="path/to/image.jpg"/>
        </div>
        <div class = "paragraph">
         <p>Lorem Ipsum dolor set amit...</p>
        </div>
       </div><!-- end of box container-->
      </div><!-- 3rd box-->

     </div>
    </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:53:43.550

你可以在这里找到一个例子：

[http://fittopage.org/2012/09/11/vertical-reordering-in-css/](http://fittopage.org/2012/09/11/vertical-reordering-in-css/)

CSS3 中还有一个指令，但据我所知尚未推出。

**更新：**在 css3 中它被称为 flexbox，但目前只有 chrome 支持它的一些功能。更多信息[在这里](http://benfrain.com/understanding-the-css3-flexbox-flexible-box-layout-module/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T07:47:14.813

您是否尝试过将行放入您的跨度中？

喜欢

```
<div class="row">
   <div class="span4">
       <div class="row">
          <div class="spanX">...</div>
       </div>
       <div class="row">
           <div class="spanX">...</div>
       </div>
   </div>
 <div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T10:01:33.317

我最终只是将每个图像和相应的文本放在同一行和同一列中。图片下方的文字。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-28T22:49:58.030

您使用的是引导程序 3x 吗？

新的网格系统允许您为不同的屏幕尺寸设置自己的跨度尺寸，这样您就可以确保所有行都按照您想要的方式排列。

例子：

```
<div class="col-lg-2 col-md-1 col-xs-1"></div> 
```

查看[http://getbootstrap.com/css/#grid](http://getbootstrap.com/css/#grid)

# php - 为什么 var_dump 显示为数组的字符串？

> ID：13006938
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:40:38.373
> 
> 标签：php, mysql

我不明白为什么`var_dump()`将数组视为字符串。请检查下面的代码出了什么问题：

```
<div id="chooseForm">
  <input type="checkbox" name="forms[]" id="forms" value="ArticlesOrderForm"> <b>Articles Order Form </b><br>
  <input type="checkbox" name="forms[]" id="forms" value="PressReleasesForm"> <b> Press Releases Form </b><br>
</div> 
```

```
if(isset($_POST['forms']) && $_POST['forms']!=''){
        $table = $wpdb->prefix . "eshop_orders";            
        $forms=$_POST['forms'];

        var_dump($forms);

    } 
```

我得到`var_dump($forms)`as 的输出： **`string(5) "Array"`**

为什么它不考虑作为一个数组？如果有人能解决这个问题，我会很高兴..

**编辑：**

```
// Add an additional field to the checkout within a new fieldset
add_filter('eshopaddtocheckout','eshop_extras_checkout');

function eshop_extras_checkout($echo){

$echo .= '  <script>
        jQuery(function($) {
            $(".formGroup").hide();
            $("#chooseForm input:checkbox").on("change", function() {
                if($(this).is(":checked")) {
                    $("#" + $(this).val()).show();
                }
                else {
                    $("#" + $(this).val()).hide();
                }
            });
        });

    </script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= '<legend>Select the Approriate Form</legend>' . "\n";

    $echo .= ' <div id="chooseForm">
        <input type="checkbox" name="forms[]"  value="ArticlesOrderForm"> <b>Articles Order Form </b><br>
        <input type="checkbox" name="forms[]"  value="PressReleasesForm"> <b> Press Releases Form </b><br>
    </div>

    <div id="ArticlesOrderForm" class="formGroup">
        <legend>Articles Order Form</legend>
        <label for="kwd1">Art-Keywords1</label><input class="short" type="text" name="kwd1" value="" id="kwd1" maxlength="20" size="20" > <br>

    </div>

    <div id="PressReleasesForm" class="formGroup">
        <legend>Press Releases Form</legend>
        <label for="kwd2">PRKeywords2</label><input class="short" type="text" name="kwd2" value="" id="kwd2" maxlength="20" size="20"> <br>
    </div>';

 $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= '<legend>Extras</legend>' . "\n";
    $echo .= '<label for="eshop_extra">'.__('Extra Field','eshop').' <span class="reqd">*</span><br />
          <input class="short" type="text" name="eshop_extra" value="" id="eshop_extra" maxlength="20" size="20" /></label><br />';
    $echo .= '</fieldset>' . "\n";

    return $echo;
} 
```

```
// Saves extra field data in db
add_action('eshoporderhandle','eshop_extras_orderhandle',1,2);
function eshop_extras_orderhandle($_POST,$checkid){
    //we need to save the data
    global $wpdb;
    if(isset($_POST['eshop_extra']) && $_POST['eshop_extra']!=''){
        $table = $wpdb->prefix . "eshop_orders";
        $eshop_extra=$wpdb->escape($_POST['eshop_extra']);
        $query1=$wpdb->query("UPDATE $table SET eshop_extra='$eshop_extra' where checkid='$checkid' limit 1");
    }

    if(isset($_POST['kwd1']) && $_POST['kwd1']!=''){
        $table = $wpdb->prefix . "eshop_orders";
        $kwd1=$wpdb->escape($_POST['kwd1']);
        $query1=$wpdb->query("UPDATE $table SET kwd1='$kwd1' where checkid='$checkid' limit 1");
    }

    if(isset($_POST['kwd2']) && $_POST['kwd2']!=''){
        $table = $wpdb->prefix . "eshop_orders";
        $kwd2=$wpdb->escape($_POST['kwd2']);
        $query1=$wpdb->query("UPDATE $table SET kwd2='$kwd2' where checkid='$checkid' limit 1");
    }

    if(isset($_POST['forms']) && $_POST['forms']!=''){
        $table = $wpdb->prefix . "eshop_orders";            
        $forms=$_POST['forms'];

        var_dump($_POST);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:49:59.027

这对我来说很好：

```
<?php

if(isset($_POST['forms'])){
  $forms=$_POST['forms'];
  var_dump($forms);
}

?>

<form method="post" name="test" action="">
  <input type="checkbox" name="forms[]" id="forms" value="ArticlesOrderForm"> <b>Articles Order Form </b><br>
  <input type="checkbox" name="forms[]" id="forms" value="PressReleasesForm"> <b> Press Releases Form </b><br>
  <input type="submit" name="test" value="go"/>
</form> 
```

输出

```
array(2) { [0]=> string(17) "ArticlesOrderForm" [1]=> string(17) "PressReleasesForm" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:01:25.683

尝试改用 $_REQUEST 资源。很明显，有些东西正在破坏您的 $_POST，但我无法在您提供的代码中发现它。此外，当它是一个超全局变量时，我看不到将 $_POST 数组作为参数传递给函数的目的。

# jquery-ui - 如何自定义jquery ui对话框标题颜色和字体大小？

> ID：13006941
> 
> 赞同：5
> 
> 时间：2012-10-22T07:40:50.297
> 
> 标签：jquery-ui, javascript

如何更改 jquery ui 对话框标题的颜色和其他属性

```
HTML :
<div id="dialog" title=""
style="display: none; font-size: 15px; width: 500; height: 300"></div>

javascript :
 $( "#dialog" ).dialog( "option", "title",title ); 
```

请给我一些想法来自定义jquery对话框的标题。谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T07:48:48.737

这些类塑造了对话框标题的容器

```
ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix 
```

此类塑造文本

```
ui-dialog-title 
```

您可以在 jquery ui 样式的 css 文件中编辑这些类。或者您可以在自己的 css 文件中覆盖这些内容。

```
.ui-dialog-title{
    font-size: 110% !important;
    color: #FFFFFF !important;
    background: #000000 !important;
} 
```

“！important”可能不是必需的。

您可以使用开发人员工具自行查找。

# networking - 数据链路层和链路层有什么区别？

> ID：13006949
> 
> 赞同：6
> 
> 时间：2012-10-22T07:41:23.663
> 
> 标签：networking, protocols, data-link-layer

数据链路层和链路层有什么区别？他们的意思是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:47:34.517

在 TCP/IP（[Internet 协议套件](http://en.wikipedia.org/wiki/Internet_protocol_suite)）模型的框架中，OSI 的[数据链路层](http://en.wikipedia.org/wiki/Data_link_layer)除了其他组件外，还包含在 TCP/IP 的最低层[链路层](http://en.wikipedia.org/wiki/Link_layer)中。Internet 协议的链路层只关心硬件问题，以获取用于在物理网络链路上定位主机并将数据帧传输到链路上的硬件地址。因此，链路层的范围更广，并包含影响本地链路的所有方法，本地链路是范围受限于本地接入网络上其他节点的一组连接。

链路层是 Internet 协议的最低组件层，因为 TCP/IP 设计为独立于硬件。而数据链路层是 OSI 模型的第二层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:54:58.230

**数据链路层：** 数据链路层处理同一本地网络上系统之间的通信。

**链路层：** 链路层是物理网络和逻辑网络之间的链路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:56:03.860

尽管 TCP/IP 和 OSI 中的分层语义不同，**但链路层通常被描述为开放系统互连 (OSI) 协议栈中的数据链路层和物理层的组合。**

TCP/IP 模型的链路层通常与开放系统互连 (OSI) 协议栈中的数据链路层和物理层的结合直接进行比较。尽管它们在协议的技术覆盖范围上在某种程度上是一致的，**但它们并不完全相同**。TCP/IP 中的链路层范围更广，原则上是不同的概念和分类术语。

资料来源：[维基百科](https://en.wikipedia.org/wiki/Link_layer)

# c# - 如何使用图像索引将图像添加到 imageList

> ID：13006964
> 
> 赞同：0
> 
> 时间：2012-10-22T07:42:40.587
> 
> 标签：c#, .net, imagelist

我是 C# 的初学者。这是一个小问题。我想使用图像索引将图像添加到图像列表中。

```
 ilsLargeFlags  --> ImageList
  strFlagPath --> full file path
  strPetPath  --> only file name (gif image) 
```

我尝试了以下代码：（*不工作*）

```
 ilsLargeFlags.Images.Add(Image.FromFile(strFlagPath));
 ilsLargeFlags.Images.SetKeyName(8, strPetPath); 
```

我在上面的代码中做错了什么？

imageList 中已经有 8 张图像。通过简单的用户界面添加（我不知道它是什么）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T07:59:06.967

你最好打电话[`ImageList.ImageCollection.Add(String, Image)`](http://msdn.microsoft.com/en-us/library/1h1kxkbx.aspx)。在这种情况下，您可以一步提供密钥名称：

```
ilsLargeFlags.Images.Add(strPetPath, Image.FromFile(strFlagPath)); 
```

### 更新

通过使用`ImageList`及其内部`ImageListCollection`，您将无法设置特定的数字索引（因此它不支持[`IndexOf()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.imagecollection.indexof.aspx)方法。相反，您使用某种自定义字符串键。如果您确实需要图像上的当前索引，则应该使用[`IndexOfKey()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.imagecollection.indexofkey.aspx)所需键将其添加到列表后使用该方法：

```
ilsLargeFlags.Images.Add(strPetPath, Image.FromFile(strFlagPath));
var index = ilsLargeFlags.Images.IndexOfKey(strPetPath); 
```

现在可以通过使用该`SetKeyName()`方法和检索到的索引来更改键名，但是如果有人要从列表中删除图像，然后您会添加另一个图像，这可能会导致键名加倍。所以最好坚持一些键*名*，并在你需要的时候通过调用来获取相应的索引`IndexOfKey()`。

# ios - 在 UICollectionView 中创建缓慢滚动到 indexPath

> ID：13006972
> 
> 赞同：22
> 
> 时间：2012-10-22T07:43:26.423
> 
> 标签：ios, scroll, uiviewanimation, nsindexpath, uicollectionview

我正在做一个项目，我正在使用 UICollectionView 创建一个“图像代码”，我在其中宣传一系列徽标。collectionView 是一个项目高和十二个项目长，一次显示两到三个项目（取决于可见徽标的大小）。

我想做一个从第一项到最后一项的缓慢自动滚动动画，然后重复。

有没有人能够完成这项工作？我可以使用滚动工作

```
[myCollection scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:(myImages.count -1) inSection:0] atScrollPosition:UICollectionViewScrollPositionRight animated:YES]; 
```

但这太快了！

```
[UIView animateWithDuration:10 delay:2 options:(UIViewAnimationOptionAutoreverse + UIViewAnimationOptionRepeat) animations:^{
    [myCollection scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:(myImages.count -1) inSection:0] atScrollPosition:UICollectionViewScrollPositionRight animated:NO];
} completion:nil]; 
```

这会产生所需的滚动速度，但在系列中只有最后几个单元格可见。我怀疑它们（甚至是起始可见单元格）正在立即出队。

有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-29T20:52:37.543

您可以尝试这种方法：

```
@property (nonatomic, assign) CGPoint scrollingPoint, endPoint;
@property (nonatomic, strong) NSTimer *scrollingTimer;
@synthesize scrollingPoint, endPoint;
@synthesize scrollingTimer;

- (void)scrollSlowly {
    // Set the point where the scrolling stops.
    self.endPoint = CGPointMake(0, 300);
    // Assuming that you are starting at {0, 0} and scrolling along the x-axis.
    self.scrollingPoint = CGPointMake(0, 0);
    // Change the timer interval for speed regulation. 
    self.scrollingTimer = [NSTimer scheduledTimerWithTimeInterval:0.015 target:self selector:@selector(scrollSlowlyToPoint) userInfo:nil repeats:YES];
}

- (void)scrollSlowlyToPoint {
    self.collectionView.contentOffset = self.scrollingPoint;
    // Here you have to respond to user interactions or else the scrolling will not stop until it reaches the endPoint.
    if (CGPointEqualToPoint(self.scrollingPoint, self.endPoint)) {
        [self.scrollingTimer invalidate];
    }
    // Going one pixel to the right.
    self.scrollingPoint = CGPointMake(self.scrollingPoint.x, self.scrollingPoint.y+1);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-09T17:43:46.247

我使用**“1 像素偏移”**技巧。以编程方式滚动时，只需将 end 设置为`contentOffset.x`比应有的多/少 1 个像素。这应该是不明显的。并在完成块中将其设置为实际值。这样您就可以避免过早的单元格出列问题并获得平滑的滚动动画；）

这是滚动到右侧页面的示例（例如从第 1 页到第 2 页）。请注意，在`animations:`块中，我实际上滚动了一个像素（`pageWidth * nextPage - 1`）。`completion:`然后我在块中恢复正确的值。

```
CGFloat pageWidth = self.collectionView.frame.size.width;
int currentPage = self.collectionView.contentOffset.x / pageWidth;
int nextPage = currentPage + 1;

[UIView animateWithDuration:1
                      delay:0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     [self.collectionView setContentOffset:CGPointMake(pageWidth * nextPage - 1, 0)];
                 } completion:^(BOOL finished) {
                     [self.collectionView setContentOffset:CGPointMake(pageWidth * nextPage, 0)];
                 }]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-09T08:06:32.437

您也可以“缓慢”滚动到您的末尾，`UICollectionView`而不必从 indexpath 到 indexpath。我为应用程序上的集合视图快速创建了这个`TVOS`：

```
func autoScroll () {
    let co = collectionView.contentOffset.x
    let no = co + 1

    UIView.animateWithDuration(0.001, delay: 0, options: .CurveEaseInOut, animations: { [weak self]() -> Void in
        self?.collectionView.contentOffset = CGPoint(x: no, y: 0)
        }) { [weak self](finished) -> Void in
            self?.autoScroll()
    }
} 
```

我只是调用`autoScroll()`in the `viewDidLoad()`，其余的会自己处理。滚动的速度由动画时间决定`UIView`。您可以（我没有尝试过）添加一个带有`0`秒数的 NSTimer，这样您就可以在用户滚动时使其无效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-12T12:23:40.510

对于发现这一点的其他人，我已经更新了 Masa 的建议以在 Swift 上工作，并且我在最后引入了一些缓和，因此它更像原始的 scrollItemsToIndexPath 动画调用。在我看来，我有数百个项目，所以稳定的步伐对我来说不是一个选择。

```
var scrollPoint: CGPoint?
var endPoint: CGPoint?
var scrollTimer: NSTimer?
var scrollingUp = false

func scrollToIndexPath(path: NSIndexPath) {
    let atts = self.collectionView!.layoutAttributesForItemAtIndexPath(path)
    self.endPoint = CGPointMake(0, atts!.frame.origin.y - self.collectionView!.contentInset.top)
    self.scrollPoint = self.collectionView!.contentOffset
    self.scrollingUp = self.collectionView!.contentOffset.y > self.endPoint!.y

    self.scrollTimer?.invalidate()
    self.scrollTimer = NSTimer.scheduledTimerWithTimeInterval(0.01, target: self, selector: "scrollTimerTriggered:", userInfo: nil, repeats: true)
}

func scrollTimerTriggered(timer: NSTimer) {
    let dif = fabs(self.scrollPoint!.y - self.endPoint!.y) / 1000.0
    let modifier: CGFloat = self.scrollingUp ? -30 : 30

    self.scrollPoint = CGPointMake(self.scrollPoint!.x, self.scrollPoint!.y + (modifier * dif))
    self.collectionView?.contentOffset = self.scrollPoint!

    if self.scrollingUp && self.collectionView!.contentOffset.y <= self.endPoint!.y {
        self.collectionView!.contentOffset = self.endPoint!
        timer.invalidate()
    } else if !self.scrollingUp && self.collectionView!.contentOffset.y >= self.endPoint!.y {
        self.collectionView!.contentOffset = self.endPoint!
        timer.invalidate()
    }
} 
```

在大多数情况下，调整差异和修饰符的值可以调整持续时间/轻松程度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T12:32:23.060

在 .h 文件中，声明此计时器，

```
NSTimer *Timer; 
```

放置此计时器代码，

```
 [CollectionView reloadData];
  Timer = [NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(AutoScroll) userInfo:nil repeats:YES]; 
```

然后，

```
#pragma mark- Auto scroll image collectionview
-(void)AutoScroll
{
    if (i<[Array count])
    {
        NSIndexPath *IndexPath = [NSIndexPath indexPathForRow:i inSection:0];
        [self.ImageCollectionView scrollToItemAtIndexPath:IndexPath
            atScrollPosition:UICollectionViewScrollPositionRight animated:NO];
        i++;
        if (i==[Array count])
        {
            i=0;
        }
    }
} 
```

希望它会有用。

# list - 将 List[Tuple2[A,B]] 转换为 Tuple2[Seq[A],Seq[B]]

> ID：13006973
> 
> 赞同：2
> 
> 时间：2012-10-22T07:43:27.077
> 
> 标签：list, scala, transform, tuples, seq

卡在这里，尝试将案例类元组列表转换为序列元组并多分配结果。

```
val items = repo.foo.list // gives me a List[(A,B)] 
```

我可以像这样完成多项任务：

```
val(a,b) = (items.map(_._1).toSeq, items.map(_._2).toSeq) 
```

但按照以下方式分步执行会更好：

```
val(a,b) = repo.foo.list.map{case(a,b) => (a,b)} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T07:47:31.087

我不确定我是否正确理解了这个问题。也许`unzip`适用于你想要的？

这是一些示例的链接：http: [//daily-scala.blogspot.de/2010/03/unzip.html](http://daily-scala.blogspot.de/2010/03/unzip.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T18:12:45.530

对于更一般的情况，您可以查看[product-collections](https://github.com/marklister/product-collections)。A`CollSeqN`既是a`Seq[TupleN[A1..An]]`又是a`TupleN[Seq[A1..An]]`

在您的示例中，您可以像这样提取 Seq：

```
items._1
items._2
... 
```

# php - 在 php 中使用独白

> ID：13006975
> 
> 赞同：2
> 
> 时间：2012-10-22T07:43:40.137
> 
> 标签：php, logging, monolog

我有这段代码要在本地主机上执行，我正在使用 wamp 服务器用于 php5.3 x64 位，我无法执行这段代码，我对 php 很陌生。此代码是否有任何代码更改或任何添加？我的文件名为 monolog_usage_1.php，我在[https://github.com/Seldaek/monolog](https://github.com/Seldaek/monolog)的 src 中复制了 monolog 文件，下载了一个到同一目录。

```
use \Monolog\Logger;
use \Monolog\Handler\StreamHandler;
include '\Monolog\Logger.php';  

// create a log channel
$log = new Logger('name');
$log->pushHandler(new StreamHandler('D:\addlog.log', Logger::WARNING));

// add records to the log 
```

我作为名称传递给记录器（'name'），是任何方法名称，如错误，警报......提前谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:41:17.747

错误是明确的 `Class 'Monolog\Logger' not found in C:\wamp\www\test\monolog\monolog usage.php`使用 Monolog 时，您需要包含所有需要的类和完整路径

```
include_once __DIR__ . '/Monolog/Logger.php';
include_once __DIR__ . '/Monolog/Handler/HandlerInterface.php';
include_once __DIR__ . '/Monolog/Handler/AbstractHandler.php';
include_once __DIR__ . '/Monolog/Handler/AbstractProcessingHandler.php';
include_once __DIR__ . '/Monolog/Handler/StreamHandler.php';

include_once __DIR__ . '/Monolog/Formatter/FormatterInterface.php';
include_once __DIR__ . '/Monolog/Formatter/NormalizerFormatter.php';
include_once __DIR__ . '/Monolog/Formatter/LineFormatter.php';

use Monolog\Logger;
use Monolog\Handler\StreamHandler;

// create a log channel
$log = new Logger('name');
$log->pushHandler(new StreamHandler(__DIR__ . '/test/data.log', Logger::WARNING));

// add records to the log
$log->addWarning('Foo');
$log->addError('Bar'); 
```

# ruby-on-rails - 如果使用omniauth进行身份验证，如何在facebook上共享固定数据

> ID：13006978
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:43:55.317
> 
> 标签：ruby-on-rails, facebook, omniauth, facebook-sharer

我使用omniauth 对rails 中的用户进行身份验证。我只想在我的网站上创建一个按钮，单击该按钮时应将某些固定数据发布到登录用户的 Facebook 个人资料。我试过 facebook_share gem 但无法指定预定义文本。请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:50:48.273

代替 facebook_share 更好的方法是使用 facebook api。链接解释了所有

[https://github.com/aayushkhandelwal11/training-assignment/blob/master/facebookshare.txt](https://github.com/aayushkhandelwal11/training-assignment/blob/master/facebookshare.txt)

# entity-framework - 实体框架和 windows.winmd

> ID：13006980
> 
> 赞同：0
> 
> 时间：2012-10-22T07:44:10.713
> 
> 标签：entity-framework, windows-8

我正在使用 .Net 4 和 EF 开发 Windows 8 应用程序（不是 Windows 商店应用程序）。一切正常，直到我想添加 Windows.winmd 引用。我得到以下异常：

```
System.Data.DataException occurred
  HResult=-2146233087
  Message=An exception occurred while initializing the database. See the InnerException for details.
  Source=EntityFramework
  StackTrace:
       at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
       at System.Linq.Queryable.OrderBy[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
       at Yawd.Dal.Dal.getIncludeFolders() in c:\Users\Jeff\Documents\Visual Studio 2010\Projects\Yawd.old\Yawd\Dal\Dal.cs:line 170
  InnerException: System.Data.EntityCommandCompilationException
       HResult=-2146232005
       Message=An error occurred while preparing the command definition. See the inner exception for details.
       Source=System.Data.Entity
       StackTrace:
            at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
            at System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
            at System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
            at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
            at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters, AliasGenerator aliasGenerator)
            at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
            at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
            at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
            at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
            at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1[TResult](IEnumerable`1 sequence)
            at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
            at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
            at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
            at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
            at System.Data.Entity.Internal.EdmMetadataRepository.QueryForModelHash(Func`2 createContext)
            at System.Data.Entity.Internal.InternalContext.QueryForModelHash()
            at System.Data.Entity.Internal.ModelCompatibilityChecker.CompatibleWithModel(InternalContext internalContext, ModelHashCalculator modelHashCalculator, Boolean throwIfNoMetadata)
            at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata)
            at System.Data.Entity.Database.CompatibleWithModel(Boolean throwIfNoMetadata)
            at System.Data.Entity.CreateDatabaseIfNotExists`1.InitializeDatabase(TContext context)
            at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6()
            at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       InnerException: System.IO.FileLoadException
            HResult=-2146233067
            Message=Could not load file or assembly 'Windows, Version=255.255.255.255, Culture=neutral, PublicKeyToken=null, ContentType=WindowsRuntime' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515)
            Source=mscorlib
            FileName=Windows, Version=255.255.255.255, Culture=neutral, PublicKeyToken=null, ContentType=WindowsRuntime
            FusionLog=""
            StackTrace:
                 at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
                 at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
                 at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
                 at System.Reflection.Assembly.Load(AssemblyName assemblyRef)
                 at System.Data.Metadata.Edm.MetadataAssemblyHelper.SafeLoadReferencedAssembly(AssemblyName assemblyName)
                 at System.Data.Metadata.Edm.MetadataAssemblyHelper.<GetNonSystemReferencedAssemblies>d__0.MoveNext()
                 at System.Data.Metadata.Edm.ObjectItemCollection.ImplicitLoadViewsFromAllReferencedAssemblies(Assembly assembly)
                 at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedCollectViewsFromReferencedAssemblies(MetadataWorkspace workspace, Dictionary`2 extentMappingViews)
                 at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGetGeneratedViews(EntityContainer container)
                 at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0()
                 at System.Data.Common.Utils.Memoizer`2.Result.GetValue()
                 at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg)
                 at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.GetGeneratedView(EntitySetBase extent, MetadataWorkspace workspace, StorageMappingItemCollection storageMappingItemCollection)
                 at System.Data.Metadata.Edm.MetadataWorkspace.GetGeneratedView(EntitySetBase extent)
                 at System.Data.Query.PlanCompiler.PreProcessor.ExpandView(Node node, ScanTableOp scanTableOp, IsOfOp& typeFilter)
                 at System.Data.Query.PlanCompiler.PreProcessor.ProcessScanTable(Node scanTableNode, ScanTableOp scanTableOp, IsOfOp& typeFilter)
                 at System.Data.Query.PlanCompiler.PreProcessor.Visit(ScanTableOp op, Node n)
                 at System.Data.Query.InternalTrees.ScanTableOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
                 at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n)
                 at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitRelOpDefault(RelOp op, Node n)
                 at System.Data.Query.PlanCompiler.PreProcessor.Visit(ProjectOp op, Node n)
                 at System.Data.Query.InternalTrees.ProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
                 at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n)
                 at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitRelOpDefault(RelOp op, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitSortOp(SortBaseOp op, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.Visit(ConstrainedSortOp op, Node n)
                 at System.Data.Query.InternalTrees.ConstrainedSortOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
                 at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitDefault(Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitPhysicalOpDefault(PhysicalOp op, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.Visit(PhysicalProjectOp op, Node n)
                 at System.Data.Query.InternalTrees.PhysicalProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
                 at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
                 at System.Data.Query.PlanCompiler.PreProcessor.Process(Dictionary`2& tvfResultKeys)
                 at System.Data.Query.PlanCompiler.PreProcessor.Process(PlanCompiler planCompilerState, StructuredTypeInfo& typeInfo, Dictionary`2& tvfResultKeys)
                 at System.Data.Query.PlanCompiler.PlanCompiler.Compile(List`1& providerCommands, ColumnMap& resultColumnMap, Int32& columnCount, Set`1& entitySets)
                 at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
            InnerException: 
```

如果我删除参考一切工作正常。如果我不使用 EF 但只有 Windows.winmd 一切正常，但我不能在同一个应用程序中同时使用两者。

对此有任何线索吗？

谢谢你的时间。

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:01:14.387

Entity Framework 正在尝试加载所有引用的程序集以检查它们是否包含视图。winmd 程序集不是 .NET 程序集（如此处所述[无法从 .winmd 文件中获取类型](https://stackoverflow.com/questions/9136683/cannot-get-types-from-winmd-file)），因此无法加载。话虽如此 - 如果遇到这样的程序集，EF 不应该失败 - 这是一个错误。

我为此[http://entityframework.codeplex.com/workitem/609提交了一个错误](http://entityframework.codeplex.com/workitem/609)

这已为 EF6 修复

# excel - 需要 Excel VBA Workbook_open 事件处理程序

> ID：13006982
> 
> 赞同：1
> 
> 时间：2012-10-22T07:44:16.563
> 
> 标签：excel, vba

我的*.*`WorkBook` _ 我有一张空白纸 - *Sheet1* - 我需要从我的数据库中填写。

我想使用 Excel VBA根据*Sheet2*中 A 和 B 列中的数据填充*Sheet1*。

 *我使用参考数据。

*   我从 DB填充*Sheet1*的 A 列中的值。
*   我检查存储在工作表 1、A 列中的值是否存在于*Sheet2* A 列中，
*   如果是这样，我将填充到工作表 1 列 B 中，即我在工作表 2 列 B 中找到的相应*数据*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:35:41.097

*   打开[excel](/questions/tagged/excel "显示标记为“excel”的问题")，按 alt + F11 打开 IDE。
*   在右侧窗口中应该看到 vba 项目，括号中是您打开的 Excel 书的名称。
*   在工作表列表的底部是一个名为 的对象`ThisWorkbook`，右键单击它，然后选择*View Code*。
*   在顶部应该看到两个组合框，右手边应该说*一般*点击它并`Workbook`从列表中选择。

这应该给你以下

```
 Private Sub Workbook_Open()

 End Sub 
```

这是每次打开工作簿时触发的事件。现在您需要添加代码以引用工作簿中的工作表。

以下是如何在 vba [Reference sheet](http://www.techrepublic.com/blog/10things/10-ways-to-reference-excel-workbooks-and-sheets-using-vba/967)中引用工作表的一些方法。下一步将参考工作表中的单元格，请参阅 -> [excel 范围](http://spreadsheetpage.com/index.php/tip/referring_to_ranges_in_your_vba_code/)作为示例。*

# java - 在 XSOM 中检索 XSComponent 的父组件

> ID：13006983
> 
> 赞同：1
> 
> 时间：2012-10-22T07:44:17.220
> 
> 标签：java, xsd, xsom

我正在使用 XSOM 框架解析一批 XSD 文件，然后将它们写入图形数据库。

对于每个 XSDeclaration，都有可能检查它们是本地的还是全局的。换句话说，组件是否在 XSD 文件的根中声明，或者它是否是匿名类型的一部分。

我希望能够检索全局父级，其中本地组件是其中的一部分，但我在 java 文档中的任何地方都找不到这样的方法。

例如：

```
<xs:group name="group">
    <xs:sequence>
        <xs:element name="grEl1" type="xs:string" />
        <xs:element name="grEl2" type="xs:string" />
        <xs:element name="grEl3" type="xs:string" />
    </xs:sequence>
</xs:group> 
```

当我拥有名为 grEl1 的 XSElementDecl 时，我检查它是否是本地的，这将返回 true。然后我希望能够以某种方式询问 XSElementDecl，给我它的父级，即具有名称组的 XSModelGroupDecl。

提前致谢 ：）

# xml - 将 .properties 文件中的值设置为 web.xml

> ID：13006984
> 
> 赞同：0
> 
> 时间：2012-10-22T07:44:19.680
> 
> 标签：xml, tomcat, ant, gradle, properties-file

我有一个 web.xml 文件，我想将属性文件中的多个值读入 web.xml。这可能吗？. 如果是，如何？我可以在 java 类本身中访问这个属性文件吗？我专门使用 ant 来构建我的项目。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:49:33.170

您可以使用占位符来做到这一点。例如（使用 Gradle）：

gradle.properties：

```
myProp1=abc
myProp2=def 
```

构建.gradle：

```
war {
    eachFile {
        if (it.name == 'web.xml') {
            it.filter {String line -> line.replaceAll('\\$\\{textToReplace1\\}', myProp1) }
            it.filter {String line -> line.replaceAll('\\$\\{textToReplace2\\}', myProp2) }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:21:05.427

```
 properties.load(Connector.class.getResourceAsStream("path/to/properties/file"));

        this.DRIVER_CLASS = properties.getProperty("attribute/mentioned/in/the/property/file");
        this.DATABASE_URL = properties.getProperty("another/attribute/mentioned/in/the/property/file");
        this.databaseName = properties.getProperty("other/attribute/mentioned/in/the/property/file");
        this.username = properties.getProperty("other/attribute/mentioned/in/the/property");

    And so on... 
```

属性文件的格式与上面“Cengiz”所示的格式相同。这里 this.variables 是我的私有变量，可以是任何东西。属性文件也需要在类的层次结构的顶层。

这解决了我的疑问。感谢您的帮助。

# iphone - 需要释放 IBOutlet 对象吗？

> ID：13006985
> 
> 赞同：4
> 
> 时间：2012-10-22T07:44:21.430
> 
> 标签：iphone, objective-c, ios, memory-management

我对内存释放 IBOutlet 对象感到两难。有没有人建议当我们创建没有属性的 IBOutlet 对象时该怎么办，需要释放它吗？如果需要发布...我们为什么要发布它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T07:56:01.523

答案是肯定的。

运行时将对象连接到`IBOutlet`using `[setValue:ForKey:]`。此函数将找到私有实例变量，保留目标并将其设置为实例变量。请访问此处[iOS 开发人员库](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/SearchImplementation.html)以了解更多信息。

我强烈建议您阅读这篇文章，因为许多 iOS 框架通过键值合规（`[setValue:ForKey:]`或`[valueForKey:]`）访问属性，而不是直接调用 getters/setters/instance 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:46:39.493

`IBOutlet`不会改变属性的所有权语义。如果您不使用 ARC，则必须像使用任何其他属性一样释放保留的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:48:54.707

只需将其设置为默认值，即“弱”。那么你对ARC没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T08:04:03.590

为什么不只拥有一个私有 IBOutlet 属性，以使事情更清晰、更明确。我总是亲自这样做：

```
MyClassName.m

@interface MyClassName ()
@property (nonatomic, weak) IBOutlet NSObject *myPropertyNameForAnOutlet;
@end

@implementation MyClassName 
...
@end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T08:22:44.857

答案是YES...

我也对此感到困惑，但试试这个：

打开一个xib文件

onen 助手编辑器窗口并在您的 XIB IB 文件附近获取 .h 文件代码

在 IB 文件中选择了一个对象（一个没有引用任何 var 的对象）

ctrl 点击它并选择：“新参考插座”按钮

将该行拖到您的 .h 代码文件的 @interface{ } 部分

为您的新变量命名（“aaa”）

（请注意，没有创建属性“aaa”）

现在 Xcode 已经为你完成了所有的魔法，并且......

在 .m 文件中，您可以在 dealloc 方法中找到：

```
- (void) dealloc {   
    [aaa release];
    [super dealloc];
} 
```

所以......如果苹果发布它，似乎通过XIB文件加载的默认IBOutlet vars被保留......

**编辑：**

这是[苹果文档中的重点](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW35)：

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T08:34:21.410

您不是该对象的所有者。所以不需要释放 IBOutlet 对象。如果您在 IBoutlet 对象上使用@property（非原子，保留），那么您必须在 dealloc 中释放该对象。

看看[Advanced Memory Management Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)
**你不能放弃你不拥有的对象的所有权**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T08:38:48.837

您不是对象的所有者，因此您不释放它。

您通过保留、复制或创建（init/alloc）对象成为所有者。只有这样，您才是对象的（其中一个）所有者，并且在您使用完对象后需要释放它。更多信息检查 [Cocoa 核心能力 - 内存管理](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)

我希望这可以解释为什么您不必释放该对象。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-22T08:13:57.300

即使您没有将其设置为属性，该属性也是指 setter 和 getter 方法。当你使用一个对象时，你应该永远记得释放它。该属性与内存问题无关。

# python - Python - 创建模式列表

> ID：13006986
> 
> 赞同：3
> 
> 时间：2012-10-22T07:44:21.867
> 
> 标签：python, matplotlib, mayavi

在我当前的 Python 项目中，我需要创建一些很长的整数列表以供以后在绘图中使用。目前我正在通过以下方式对此进行攻击：

```
volume_axis = []

for values in stripped_header: 
    for doses in range(100):  
        volume_axis.append(int(values)) 
```

此代码将附加到我的空白列表中，给我剥离标题中的第一个值 100 次，然后给我剥离标题中的下一个值 100 次等。

有没有更优雅和pythonesque的方式来完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:50:17.923

```
for values in stripped_header: 
    volume_axis += [int(values)] * 100 
```

或使用 itertools （可能更有效）

```
from itertools import repeat
for values in stripped_header:
    volume_axis += repeat(int(values), 100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:05:30.150

这个问题有很多很好的 Pythonic 答案，但如果你乐于使用 numpy （无论如何这是 matplotlib 的依赖项），那么这是一个单行：

```
>>> import numpy
>>> stripped_header = [1, 2, 4]
>>>
>>> numpy.repeat(stripped_header, 3)
array([1, 1, 1, 2, 2, 2, 4, 4, 4]) 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:54:07.653

考虑`sh`代表 stripped_header

```
In [1]: sh = [1,2,3,4]

In [2]: [x for x in sh for y in [sh]*5]
Out[2]: [1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4] 
```

或者您也可以使用以方便理解

```
In [3]: [x for x in sh for y in range(5)]
Out[3]: [1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:58:12.337

使用`itertools`：

```
from itertools import chain, repeat
list(chain.from_iterable(repeat(int(n), 100) for n in sh)) 
```

# c# - sql语句没有将任何数据保存到表中

> ID：13006989
> 
> 赞同：3
> 
> 时间：2012-10-22T07:44:33.257
> 
> 标签：c#, sql, parameters, insert-into

每当我执行我的 C# 代码时，一切都很顺利，没有编译器错误，什么都没有。但是当我在服务器资源管理器中查看我的表时，没有插入任何内容。重新启动Visual Studio，仍然没有。

我去调试了，我在`cmd`执行之前查看了字符串，`ExecuteNonQuery()`字符串仍然是`@itmId,...`等等。不确定这是否会影响它。有什么帮助吗？

```
try
{
    Item workingItem = mItemList.Items[itemCombo.SelectedIndex - 1] as Item;
    SqlCeConnection sc = new SqlCeConnection(SalesTracker.Properties.Settings.Default.salesTrackerConnectionString);
    SqlCeCommand cmd = new SqlCeCommand("INSERT INTO Sales VALUES(@itmId, @itmNm,@fstNm, @date,@prft, @commision)", sc);
    cmd.Parameters.AddWithValue("@itmId", workingItem.ItemId);
    cmd.Parameters.AddWithValue("@itmNm", workingItem.ItemName);
    cmd.Parameters.AddWithValue("@fstNm", logedSalesmen.ID);
    cmd.Parameters.AddWithValue("@date", DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss"));
    cmd.Parameters.AddWithValue("@prft", workingItem.Profit);
    cmd.Parameters.AddWithValue("@commision", workingItem.Commision);
    sc.Open();
    cmd.ExecuteNonQuery();
    sc.Close();
    MessageBox.Show("Save successfull");
    this.Close();
} 
catch (Exception exc)
{
    MessageBox.Show(exc.Message);
} 
```

编辑：所以这是使用临时调试数据库的问题，我使用 select count(0) 来解决这个问题。但我不确定我应该在连接字符串中使用什么来修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:20:01.593

这里最常见的错误实际上是*部署*问题 - 即有 2 个不同的数据库文件在运行。特别是，通常您正在调试（等）的数据库文件通常是“bin/debug”或类似文件中的文件，并且每次构建时都会被覆盖。但是人们经常查看更改的文件是他们项目树中的文件。

确保您正在查看正确的文件。

代码看起来不错；参数仍然是参数的事实完全可以预料并且是正确的。如果您想要一种简单的方法来验证插入，那么只需检查

```
SELECT COUNT(1) FROM Sales 
```

插入之前和之后；我预计它会增加。

还要检查您是否正在关闭并干净地处理连接（如果这只是一个在进程终止之前没有写入的缓冲更改）。两者`sc`和`cmd`are `IDisposable`，所以你应该`using`真正使用：

```
using(SqlCeConnection sc = new SqlCeConnection(
    SalesTracker.Properties.Settings.Default.salesTrackerConnectionString))
using(SqlCeCommand cmd = new SqlCeCommand(
    "INSERT INTO Sales VALUES(@itmId, @itmNm,@fstNm, @date,@prft, @commision)",
    sc))
{
    cmd.Parameters.AddWithValue("@itmId", workingItem.ItemId);
    cmd.Parameters.AddWithValue("@itmNm", workingItem.ItemName);
    cmd.Parameters.AddWithValue("@fstNm", logedSalesmen.ID);
    cmd.Parameters.AddWithValue("@date",
        DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss"));
    cmd.Parameters.AddWithValue("@prft", workingItem.Profit);
    cmd.Parameters.AddWithValue("@commision", workingItem.Commision);
    sc.Open();
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:07:58.130

您不应该转换`DateTime.Now`为字符串 - 传递它就像`DateTime.Now`

您应该在插入语句中指定列：即：

```
INSERT INTO Sales (ItemID,ItemName...) VALUES (@itmID) 
```

您可以使用 SQL Profiler 检查正在传递给数据库的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:31:02.313

Visual Studio 有时可以在您不希望复制 SQLCE 数据库时，在您构建 C# 项目时。因此，在解决方案资源管理器中单击 sdf 文件，然后选择 Copy if newer。

# asp.net - 如果文本框为空，则在数据库中写入 Null

> ID：13006995
> 
> 赞同：1
> 
> 时间：2012-10-22T07:45:18.477
> 
> 标签：asp.net, sql-server, vb.net, ado.net, dbnull

我要做的就是在文本框为空时将 Null 插入数据库。

```
 --ACCOUNT

 AS
 BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
SET IDENTITY_INSERT account ON

  INSERT INTO dbo.account
      ( 
        AccntID                   ,
        managedby                 ,
        AccountHolder             ,
        Description               ,
        AccountType               ,
        ContactPerson             ,
        ContactNumber             ,
        EmailAddress              ,
        Address                   ,
        ClientTYpe                ,
        SchemeType                ,
        SalesManager              ,
        DateCreated               ,
        Login                     ,
        Password                  ,
        Balance                   ,
        FilterOption              ,
        Enable22                  ,
        AllowExtendedConfig                  
      ) 
-- Insert statements for procedure here

 VALUES (@AccntID, @managedby, @AccountHolder, @Description, @AccountType, @ContactPerson, @ContactNumber, @EmailAddress, @Address, @ClientType, @SchemeType, @SalesManager, @DateCreated, @Login, @Password, @Balance, @FilterOption, @Enable22, @AllowExtendedConfig)
SET IDENTITY_INSERT account OFF

END 
```

当我的文本框为空时，向数据库添加 NULL 值的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:18:10.200

设置辅助函数，例如：

```
Public Function DbNullOrStringValue(ByVal value As String) As Object
    If String.IsNullOrEmpty(value) Then
        Return DBNull.Value
    Else
        Return value
    End If
End Function 
```

所以第一个代码块可以通过这样调用来简化：

```
Cmd.Parameters.AddWithValue("@AccntID", DbNullOrStringValue(TextBox1.Text)) 
Cmd.Parameters.AddWithValue("@managedby", DbNullOrStringValue(TextBox2.Text)) 
Cmd.Parameters.AddWithValue("@AccountHolder", DbNullOrStringValue(TextBox3.Text)) 
Cmd.Parameters.AddWithValue("@Description", DbNullOrStringValue(TextBox4.Text)) 
Cmd.Parameters.AddWithValue("@AccountType", DbNullOrStringValue(TextBox5.Text)) 
```

`Cmd`是你的`SqlCommanad`对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:36:39.570

考虑比新方法更轻的东西：

```
 Cmd.Parameters.AddWithValue("@AccntID", IIF(String.IsNullOrEmpty(TextBox1.Text),  DBNull.Value, TextBox1.Text)) 
```

但对于其余部分，请`SqlDataAdapter`按照之前的建议使用 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:20:18.587

最好的方法是继承文本框并为其添加附加功能

```
Public Class MyText
    Inherits TextBox

    'Either change default text property (but this will bug you while comparing text property)
    Public Overrides Property Text() As String
        Get
            Return MyBase.Text
        End Get
        Set(ByVal value As String)
            MyBase.Text = value
        End Set
    End Property

    'Best way will be to write new property to use in sql query
    Public ReadOnly Property TextSQL() As String
        Get
            If Me.Text = String.Empty Then
                Return "NULL"
            Else
                Return Me.Text
                'Return "'" & Me.Text & "'" 'or this
            End If
        End Get
    End Property
End Class 
```

现在在您的应用程序中使用此文本框

```
cmd.Parameters.AddWithValue("@accountholder", txt_accHolder.TextSQL) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T10:59:06.873

在存储过程中，您可以使用以下内容：

假设：参数名称为@TextData

```
 NULLIF(LTRIM(RTRIM(@TextData)),'') 
```

如果@TextData = ''，它将返回 NULL。

# php - 在不同页面上分隔数组的项目

> ID：13006997
> 
> 赞同：0
> 
> 时间：2012-10-22T07:45:31.990
> 
> 标签：php, mysql

> **可能重复：**
> [用于分页的 php 示例脚本](https://stackoverflow.com/questions/3615515/php-sample-script-for-pagination)

假设在一个进程之后，My MySQL Table 将一个数组返回到某个变量中。该数组包含各种帖子/文章的标题和内容。

我想在主页上只显示该数组的 5 个项目。用户必须单击下一页或第 2 页才能访问接下来的 5 个项目。

我如何在 PHP 中做这种事情？

我的每个帖子在数据库中都有一个 ID 列，它使用 Auto_increment。因此，最新的帖子将具有最大的 ID 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:51:44.907

```
SELECT id FROM table 
ORDER BY id DESC
LIMIT 5 OFFSET 0 
```

您也可以通过 ASC 更改顺序，同时单击下一步，将偏移值传递为 5，然后每次单击添加偏移量 + 5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:55:23.797

如果我没有错，你想实现分页之类的东西。只需查看 stackoverflow 是如何实现的，每当您单击链接以查看更多消息时，它们会像 [https://stackoverflow.com/questions?page=2&sort=newest](https://stackoverflow.com/questions?page=2&sort=newest)这样的查询传递查询 页面的值在哪里指定请求的页面。现在假设您希望每页仅显示 10 个项目，那么您可以进行如下查询

```
SELECT * FROM TABLE WHERE SOME_CONDITION LIMIT (pageNo-1)*NoOfRecordsPerPage,NoOfRecordsPerPage 
```

# javascript - chech/unchek 所有复选框（动态生成）

> ID：13006998
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:45:35.753
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个带有复选框的视图，动态生成的，以及一个用于检查/取消所有复选框的按钮。我尝试下面的代码，但是，复选框未选中 ob 按钮单击事件。请帮忙。谢谢你。

用复选框查看：

```
 <button id="selectinvert" name="selectinvert" class="clear-selection ui-btn-hidden" aria-disabled="false" > Select / Deselect All</button>
    @for (int i = 0; i < @Model.workDaysList.Count; i++)
        {
              <div class="framed">
                 <div data-role="collapsible" data-collapsed="true" class="ui-btn-inner ui-corner-top ui-corner-bottom">
                   <h3>
                            <div class="ui-checkbox" id="checkbox">
                                <input type="checkbox" id="@Model.workDaysList[i][0]" />
                                <span class="ui-btn-text">
                                    <label for="@Model.workDaysList[i][0]" data-theme="c">
                                        @Model.workDaysList[i][1].Substring(6, 2)/@Model.workDaysList[i][1].Substring(4, 2)/@Model.workDaysList[i][1].Substring(0, 4)
                                    </label>
                                </span>
                                </div>
                            </h3>
                            @Model.detailDaysList[i][0] / @Model.detailDaysList[i][1]
                            <br />
                            @Model.detailDaysList[i][2] / @Model.detailDaysList[i][3]
                            <br />
                            @Model.detailDaysList[i][4] h
                        </div>
                    </div>
                </div>
           } 
```

jQuery代码：

```
<script type="text/javascript">
     $(document).ready(function () {
       $("#selectinvert").click(function () {
       $("INPUT[type='checkbox']").each(function () {
                    if (this.checked == false) {
                        this.checked = true;
                    } else {
                        this.checked = false;
                    }
                });
          });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:10:50.023

**试试这个：**

```
<script lang='javascript'>
 $(document).ready(function(){
     $('#selectinvert').click(function(){
         $("input[type='checkbox']").each(function (){
             if($(this).is(':checked')){
                 $(this).prop('checked', false);
             }else{
                 $(this).prop('checked', true);
             }
        });
     })
 });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:49:22.160

有关闭 }) 丢失..

顺便说一句：切换可以这样写：

```
this.checked = !this.checked 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T08:15:26.580

尝试从基本的 HTML 代码开始并以此为基础！您的模型代码可能会影响您的 HTML。[你可以在这里](http://jsfiddle.net/xf4tH/)找到工作原型！

```
<button id="selectinvert" name="selectinvert" class="clear-selection ui-btn-hidden" aria-disabled="false" > Select / Deselect All</button>
<div class="framed">
    <div class="ui-checkbox" id="checkbox">
        <input type="checkbox" id="@Model.workDaysList[i][0]" />
        <span class="ui-btn-text">First</span>
    </div>
    <div class="ui-checkbox" id="checkbox">
        <input type="checkbox" id="@Model.workDaysList[i][0]" />
        <span class="ui-btn-text">Second</span>
    </div>
</div> 
```

* * *

```
$("#selectinvert").click(function() {

    $("INPUT[type='checkbox']").each(function() {
        if (this.checked == false) {
            this.checked = true;
        } else {
            this.checked = false;
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:54:20.493

正如其他人所建议的那样，您缺少右括号。

您还可以稍微缩短代码：

```
$("#selectinvert").click(function() {
    $("input[type='checkbox']").each(function() {
        this.checked = !this.checked;
    });
}); 
```

另请注意，您的问题与 ASP.NET 或 jQuery UI 无关。​</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T07:55:08.027

尝试

```
 $("#selectinvert").click(function () {
 $("INPUT[type='checkbox']").each(function () {
                if (!$(this).is(":checked")) {
                    $(this).attr('checked','checked');
                } else {
                    $(this).removeAttr('checked','checked');
                }
                })
            }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T08:01:12.910

我认为您编写的代码仅在选中或未选中所有复选框时才有效。 `What happens when some of them are checked..`您的代码只会切换那些..

您的逻辑应该取决于按钮而不是复选框..

```
$(document).ready(function() {
    var isChecked = false;
    $("#selectinvert").click(function() {
        var $checkboxes = $("INPUT[type='checkbox']") ;
        if(isChecked){
            isChecked = false;
        }
        else{
            isChecked = true;
        }
        $checkboxes.prop('checked' , isChecked);
    });
});​ 
```