# StackOverflow 问答 14481000-14481999

# android - Android 设备移动速度

> ID：14481005
> 
> 赞同：2
> 
> 时间：2013-01-23T13:34:41.927
> 
> 标签：android, google-maps

我需要计算每次位置更新的移动速度。

我正在使用以下代码进行位置更新。

```
public class FlirtLocationListener implements LocationListener
{
    @Override
    public void onLocationChanged(Location location) 
    {

                // My Code on the location update
    }
    @Override
    public void onProviderDisabled(String provider) 
    {
        Log.i("OnProviderDisabled", "OnProviderDisabled");
    }
    @Override
    public void onProviderEnabled(String provider) 
    {

        Log.i("onProviderEnabled", "onProviderEnabled");
    }
    @Override
    public void onStatusChanged(String provider, int status,
            Bundle extras) 
    {
        Log.i("onStatusChanged", "onStatusChanged");
    }
} 
```

如何获得移动速度？我应该计算两次更新之间的时间以及第一个位置和下一个位置之间的距离吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:11:42.790

正如@jsmith 所说`getSpeed()`，`Location.class`.

```
public class LocationListener implements LocationListener
    {
        @Override
        public void onLocationChanged(Location location) 
        {
               float speed = location.getSpeed();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T13:53:49.310

但是， location.getSpeed() 给出空值。您必须指定 setSpeed() 以获取可能不准确的位置。因此，可以使用简单的数学公式计算速度。速度=距离/时间。

# wordpress - 下载管理器 Wordpress

> ID：14481006
> 
> 赞同：0
> 
> 时间：2013-01-23T13:34:43.033
> 
> 标签：wordpress

我正在运行一个艺术网站，设计师可以在其中找到免费的设计材料，我想跟踪我在另一台服务器上上传的下载。

例如

`www.abc.com`是我的网站和文件托管在`files.abc.com`

我正在使用 wordpress 并为它找到了许多插件，最好的插件是 Wp 下载管理器。但它不是免费的。有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:53:12.100

为此使用数据库。创建 download.php 文件并将数据插入数据库并将访问者重定向到 files.abc.com

您的下载链接将类似于 www.abc.com/download.php?id=10

# c# - 推特 sdk wp8

> ID：14481008
> 
> 赞同：0
> 
> 时间：2013-01-23T13:34:52.523
> 
> 标签：c#, windows-phone-8

我正在寻找适用于 windows phone 8 的 twitter sdk。我已经尝试过 twitterrt。它适用于 Metro 应用程序，但不适用于 Windows Phone 8。我一直在寻找重写 sdk，但 wp8 中没有`WebAuthenticationBroker`,`CryptographicBuffer`等。

所以我的问题是：是否有适用于 windows phone 8 的 twitter sdk 或者我应该重写 sdk 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:24:20.153

TweetSharp 是 Windows Phone 上最流行的 Twitter SDK，似乎在 WP8 上运行良好。查看项目网站@https [://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)

以下是从 NuGet 安装[TweetSharp 的](http://nuget.org/packages/TweetSharp)方法：

> 安装包 TweetSharp

这是一个简单的 WP8 hello world 代码示例：

```
TwitterService service = new TwitterService("<my app key>", "<my app secret>");
service.GetTweet(294183806548733952, 
    (tweet, response) => Dispatcher.BeginInvoke(() => 
            MessageBox.Show(tweet.Text, tweet.Author.ScreenName, MessageBoxButton.OK))); 
```

在 WP8 模拟器上运行此代码片段时，我们可以看到以下内容：

![WP8 模拟器显示 TweetSharp hello world 消息框](../Images/90d6f9793d86fa8c279858a206dd34fd.png)

# arrays - 对先增后减的数组进行排序

> ID：14481010
> 
> 赞同：3
> 
> 时间：2013-01-23T13:34:55.067
> 
> 标签：arrays, algorithm, sorting

给定一个数组，该数组的元素按递增顺序排列，直到最大值，然后按递减顺序排列。

```
Eg. int a[] = { 10, 12, 14, 16, 15, 13, 11}. 
```

如何有效地对这个数组进行排序？

数组需要就地排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T13:38:11.303

找到最大值，然后将数组反转到该值。然后对两个子数组应用合并 - 第一个包含最大值，然后是其余数组。这将具有线性计算复杂性并且需要线性附加内存。

在你的情况下：

`a[] = { 10, 12, 14, 16, 15, 13, 11}`=>`{10,12,14,16}, {15,13,11}`

=> 反向（线性，就地）=>

`{16,14,12,10}, {15,13,11}`

=> 合并（线性，额外的线性内存） =>

`{16,15,14,13,12,11,10}`

编辑：关于如何在没有额外内存的情况下合并两个数组，看看[这个答案](https://stackoverflow.com/a/2571104/812912)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T13:45:07.617

我的解决方案：

1.  取 2 个指针**start of array**和**end of array**。

2.  将两个指针的最小值（或最大值，如果需要降序排序）写入结果数组，并将指针移到 1 个位置（开始指针 +1 位置和结束指针 -1 位置

3.  重复直到开始指针将放置在结束指针之后。

解决方案的复杂度为 O(N)。所需内存为 O(N)

**伪代码：**

```
function Sort(a)
{
  startPointer = 0;
  endPointer = a.length-1;
  result = new Array of size a.length
  while (startPointer <= endPointer)
  {
    var newValue;
    if (a[startPointer] < a[endPointer])
    {
      newValue = a[startPointer];
      startPointer +1
    }
    else
    {
      newValue = a[endPointer];
      endPointer -1
    }
    result[a.length - startPointer - endPointer] = newValue;
  }

  return result;
} 
```

**更新问题的解决方案：**

作为解决方案，使用数组第一部分的部分排序。

(10 和 11) {10, 12, 14, 16, 15, 13, 11} 上的指针

(12 和 11) 上的指针交换 12 和 11 {10, 11, 14, 16, 15, 13, 12}

(14 和 12) 上的指针交换 14 和 12 {10, 11, 12, 16, 15, 13, 14} // 将指针从 14 移到 13 小一点。

现在我们已经对 {10, 11, 12} 和 {16, 15, 13, 14} 的子问题进行了排序（子问题的 N 减少了两倍）

**该算法的复杂度为：O(N) + (N/2) + O(N/4) + ... 完全是 O(N)**

图像更好地说明：

![在此处输入图像描述](../Images/008051dd53794f0206a8326da294260a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:57:32.420

使用问题的属性。

您无需对已排序的数组进行排序。找到`slope`变化的点然后使用一个合适`algorithm`的来得到一个完整的排序数组。

您可以考虑实现一个有效使用此属性的[双音分拣机。](http://en.wikipedia.org/wiki/Bitonic_sorter)

# javascript - 如何给 JavaScript 模块有条件的 AMD 支持？

> ID：14481027
> 
> 赞同：1
> 
> 时间：2013-01-23T13:35:52.337
> 
> 标签：javascript, testing, module, dependency-management, amd

我正在构建一个模块，我想为使用 AMD 的人和不使用 AMD 的人提供它。例如，我想让它与 RequireJS 一起工作：

```
require(['Module'], function (Module) {
  // do stuff with module
}); 
```

但我也希望它通过手动插入所有依赖项来工作（考虑到它们也可以在没有 AMD 的情况下工作）。

我如何测试这种行为是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:37:50.773

我发现的一种工作方法是在我的脚本文件中使用模块模式，这样就不会泄露依赖项。之后，我构建了一个内部函数，它接收我的依赖项作为参数并返回代表我要导出的模块的对象。

然后，我检查是否有`define`可用的功能以及是否`amd`设置了属性。如果是，那么我使用定义注册模块，否则我将其导出为全局。

这是此代码的框架。我们假设该模块已命名`Module`并且它有两个依赖项，`dep1`并且`dep2`：

```
(function (exports) {
  "use strict";
  var createModule = function (dep1, dep2) {
    var Module;
    // initialize the module
    return Module;
  }
  if (typeof define === 'function' && define.amd) {
    define(['dep1', 'dep2'], function (dep1, dep2) {
      return createModule(dep1, dep2);
    });
  } else {
    exports.Module = createModule(dep1, dep2);
  }
})(this); 
```

* * *

关于测试，我目前正在使用 yeoman`mocha`和`PhantomJS`. 以下是使用 require 进行测试的方法。我用来测试这两种情况（有和没有 AMD）的方法是有两个单独的 html 测试。首先，您需要在 Gruntfile 中添加第二页：

```
// headless testing through PhantomJS
mocha: {
  all: ['http://localhost:3501/index.html', 'http://localhost:3501/no-amd.html']
}, 
```

在第一种情况下，有正常的基于需求的模板：

```
<script src="lib/mocha/mocha.js"></script>
<!-- assertion framework -->
<script src="lib/chai.js"></script>

<!-- here, main includes all required source dependencies, 
    including our module under test -->
<script data-main="scripts/main" src="scripts/vendor/require.js"></script>

<script>
  mocha.setup({ui: 'bdd', ignoreLeaks: true});
  expect = chai.expect;
  should = chai.should();
  require(['../spec/module.spec'], function () {
    setTimeout(function () {
      require(['../runner/mocha']);
    }, 100);
  });
</script> 
```

为了测试非 amd，我们需要显式地包含模块和所有依赖项。毕竟页面中存在，我们包括跑步者。

```
<script src="lib/mocha/mocha.js"></script>
<!-- assertion framework -->
<script src="lib/chai.js"></script>

<!-- include source files here... -->
<script src="scripts/vendor/dep1.js"></script>
<script src="scripts/vendor/dep2.js"></script>
<script src="scripts/Module.js"></script>

<script>
  mocha.setup({ui: 'bdd', ignoreLeaks: true});
  expect = chai.expect;
  should = chai.should();
</script> 
<script src="spec/romania.spec.js"></script>
<script src="runner/mocha.js"></script> 
```

拥有两个不同的规范没有任何意义，但规范也应该适用于 AMD 和没有它。该解决方案类似于我们用于该模块的解决方案。

```
(function () {
  "use strict";
  var testSuite = function (Module) {
    // break the module into pieces :)
  };
  if (typeof require === 'function') {
    require(['Module'], function (Module) {
      testSuite(Module);
    });
  } else {
    // if AMD is not available, assume globals
    testSuite(Module);
  }
})(); 
```

如果您有不同或更优雅的方法来做到这一点，请将它们作为答案发布在这里。我很乐意接受更好的答案。:)

# javascript - 如何停止 qUnit 中的全局故障？

> ID：14481029
> 
> 赞同：12
> 
> 时间：2013-01-23T13:35:54.203
> 
> 标签：javascript, jquery, qunit

我是 qunit 的新手，正在尝试将其与现有环境集成。

我在使用 jQuery 的页面上遇到的问题之一是：

```
global failure (1, 0, 1)Rerun6 ms
Uncaught ReferenceError: $ is not defined 
```

我认为这是因为我没有在 qunit HTML 中调用 jquery 库。是否可以设置一个参数来忽略这样的全局变量？我试图使 HTML 尽可能灵活，并且尽可能多的编辑器具有不同的依赖项，我只希望 qunit 测试我专门给它测试的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-26T11:35:21.123

我被同样的错误难住了，但是没有使用 jQuery。QUnit 中负责传播错误的部分是`window.onerror`回调函数，其中包括检查是否`QUnit.config.current.ignoreGlobalErrors`设置了配置值。

QUnit 配置值在[QUnit.config 文档](http://api.qunitjs.com/QUnit.config/)中描述。可惜没有描述object的`current`属性`config`，但是从源码来看，`ignoreGlobalErrors`配置属性定义了是否报全局错误。注释掉以下行的测试运行正常：

```
QUnit.test( "global failure", extend( function() {
    QUnit.pushFailure( error, filePath + ":" + linerNr );
}, { validTest: validTest } ) ); 
```

我意识到这只是一个 hack，但是如果您正在寻找一种快速不脏的方法来使 QUnit 静音，这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-13T09:40:47.300

**在*Qunit 测试用例***代码之前，添加以下内容：

```
window.onerror = function (msg, url, lineNo, columnNo, error) {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T04:01:20.460

我在使用 Chrome 时遇到了这个问题，发现它是我的 chrome 扩展之一，它引发了错误并导致 QUnit 出现问题。尝试禁用扩展并重新启动浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-25T01:25:30.490

从[Qunit 2.x 升级指南](http://qunitjs.com/upgrade-guide-2.x/)我可以读到使用 Qunit 对象发生了变化，当使用 1.x 时，它的工作方式如下：

```
test( "global failure", extend( function() {
    QUnit.pushFailure( error, filePath + ":" + linerNr );
    }, { validTest: validTest } ) ); 
```

另一方面，当使用 2.x 时：

```
Qunit.test( "global failure", extend( function() {
    QUnit.pushFailure( error, filePath + ":" + linerNr );
    }, { validTest: validTest } ) ); 
```

应该改为工作。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-15T17:47:43.357

对我来说，这只是一个 QUnit 问题。只是更改了 qunit 的低版本，没有错误..

# ruby - 如何从 JSON 响应中打印特定值？

> ID：14481030
> 
> 赞同：0
> 
> 时间：2013-01-23T13:35:57.527
> 
> 标签：ruby, ruby-on-rails-3, httparty

我正在尝试使用 forvo.com 的 API。

我在控制台中运行了这个：

```
response = HTTParty.get('http://apifree.forvo.com/key/XXXXXXXXXXXXXXX/format/json/action/standard-pronunciation/word/%E4%BD%A0%E5%A5%BD/language/zh') 
```

这是回应：

```
{
    "items" => [
        [0] {
                            "id" => 436,
                       "addtime" => "2008-03-16 10:40:22",
                          "hits" => 4322,
                      "username" => "geneboy",
                           "sex" => "m",
                       "country" => "China",
                          "code" => "zh",
                      "langname" => "Mandarin Chinese",
                       "pathmp3" => "http://apifree.forvo.com/audio/1k1i1b2a3i3a3g38231k3d1m222f2n3c1m1i1i1n1b2e2g2f1f2o3n3p3f2d1n32221j26213q2k341b3k2m2m2a1j281l243m1b271o36293m2l2i252q1b2a233k32_2o341g392o343a3j2i3n2e292o2b1o35221m1i2h3b3n1t1t",
                       "pathogg" => "http://apifree.forvo.com/audio/3d3e3839371h2o242e1p31363g382e3o2f3c351g282m323q2l1j291o2a352h3m1k1m3h3n1i2l1k23273f3n1h3l1m371b3i3k2j312e1m2q2n291m1j3h33273738_2d2k3q1h3e2d2j213p2m2d2m1o3h392h3q2a1g2d3p3n1t1t",
                          "rate" => 5,
                     "num_votes" => 5,
            "num_positive_votes" => 5
        }
    ]
} 
```

如何打印`pathmp3`数据？

我尝试了很多事情，包括`p response.pathmp3`无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:21:08.770

如果我定义：

```
response = {
    "items" => [
        {
                            "id" => 436,
                    "addtime" => "2008-03-16 10:40:22",
                        "hits" => 4322,
                    "username" => "geneboy",
                        "sex" => "m",
                    "country" => "China",
                        "code" => "zh",
                    "langname" => "Mandarin Chinese",
                    "pathmp3" => "http://apifree.forvo.com/audio/1k1i1b2a3i3a3g38231k3d1m222f2n3c1m1i1i1n1b2e2g2f1f2o3n3p3f2d1n32221j26213q2k341b3k2m2m2a1j281l243m1b271o36293m2l2i252q1b2a233k32_2o341g392o343a3j2i3n2e292o2b1o35221m1i2h3b3n1t1t",
                    "pathogg" => "http://apifree.forvo.com/audio/3d3e3839371h2o242e1p31363g382e3o2f3c351g282m323q2l1j291o2a352h3m1k1m3h3n1i2l1k23273f3n1h3l1m371b3i3k2j312e1m2q2n291m1j3h33273738_2d2k3q1h3e2d2j213p2m2d2m1o3h392h3q2a1g2d3p3n1t1t",
                        "rate" => 5,
                    "num_votes" => 5,
            "num_positive_votes" => 5
        }
    ]
} 
```

我会使用：

```
response['items'].first['pathmp3']
=> "http://apifree.forvo.com/audio/1k1i1b2a3i3a3g38231k3d1m222f2n3c1m1i1i1n1b2e2g2f1f2o3n3p3f2d1n32221j26213q2k341b3k2m2m2a1j281l243m1b271o36293m2l2i252q1b2a233k32_2o341g392o343a3j2i3n2e292o2b1o35221m1i2h3b3n1t1t" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T13:41:26.180

试试这个：[链接](https://stackoverflow.com/questions/6783988/encode-a-ruby-string-to-a-json-string)

我认为它会帮助你做你想做的事。但是你必须做类似的事情

```
require 'json'
response = JSON.encode(response)
puts response.items.first.pathmp3 
```

# linux - 硬件定时器中断在哪里？

> ID：14481032
> 
> 赞同：14
> 
> 时间：2013-01-23T13:36:00.897
> 
> 标签：linux, operating-system, kernel, interrupt

这是“英特尔架构软件开发人员手册”中的异常和中断表（我理解为 IDT）

![异常和中断](../Images/cbc8cb0eaa34bacf478d20059a87c42b.png)

使上下文切换成为可能的定时器中断在哪里？（用于多任务）

如果这是一个愚蠢的问题，请修正我的理解。先感谢您

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T14:16:54.250

嗯，是的，如果我们谈论的是传统的 8254 PIT 定时器，它位于 IRQ0，也就是向量 32。但在现代机器上的 Linux 操作系统中，它通常不用作定时器。[请注意，32 的向量分配确实非常随意。它是在对 8259 (PIC) 或 APIC 进行编程时设置的——但这不是一个糟糕的选择，因为 32 是保留向量之后的第一个向量。这肯定比将硬件中断与异常向量混合更好，因为 DOS 会这样做 - 因此无法从 INTR 5（也是向量 13，因为 INT0 已映射）告诉通用保护故障（上表中的向量 13）到向量 8，并且 5 + 8 = 13)。从记忆中看，INTR5 的使用并不是特别好——比如 LPT2：（第二个并行端口）。但是不要重叠它们仍然是一个好主意...... Henc the "reserved"

实际控制系统时序的 IRQ 很可能是 Local APIC 定时器，它的向量不像原始 PC 那样固定在硬件中。

此外，随着“消息信号中断”的出现，完全有可能拥有（远）超过 256 个中断向量。

我不同意“向量 0-19 是不可屏蔽的中断”的说法。除了 NMI（向量 2）之外，它们都是异常（又名 TRAPS 或 FAULTS）——即由系统中的某些错误条件驱动的事件——向量零是整数除以零的结果，向量 1 是“单步”指令中断[和一些其他“调试”陷阱，例如“写入与启用的调试寄存器匹配的任何地址”]，向量 3 是“int3”指令（操作码 0xcc）的结果，向量 4 是执行“INTO”的结果（即溢出时的“o”，而不是`0`如零）。当访问一块未标记为存在于页表中的内存时，使用向量 14。它们确实是“不可屏蔽的”，但除了少数例外，它们是当时执行的指令的直接后果 - 因此它们与程序本身同步。

例外是“双重故障”例外和“机器检查故障”。

双重错误是指处理器在处理另一个异常期间检测到错误 - 通常是因为操作系统做了一些愚蠢的事情，例如将堆栈设置为无效的地方，因此出现页面错误，试图使用堆栈来存储页面错误返回地址，并且由于堆栈不可访问而失败。因此，双重故障处理程序往往被设置为“任务切换中断”，并加载一个新堆栈以确保双重故障可以继续。如果双重故障处理程序不能正确运行，处理器将“三重故障”。这通常意味着在 PC 平台上“重新启动”。双重错误通常是不可恢复的 - 处理程序将（尝试）提供一些关于发生了什么以及它如何进入此状态的信息，但一旦完成，

机器检查故障是处理器检测到不可恢复的错误 - 例如不可恢复的内存错误或高速缓存奇偶校验错误等。这些通常也是不可恢复的，但不直接与正在执行的指令耦合，而是更多不同的组合事件（内存内容变坏的地址的内存读取，或类似的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:40:47.187

硬件定时器中断的中断向量是 IRQ 0 = INT 32，因为它是一个外部中断。

0-19 是不可屏蔽中断，20-31 应该由 Intel 保留，32-127 是外部中断（IRQ）。硬件时间需要连接为IRQ 0，所以这里的向量号应该是32。

# jquery - 使用相同的 jQuery 对象设置不同的 html 节点时遇到问题

> ID：14481034
> 
> 赞同：4
> 
> 时间：2013-01-23T13:36:03.930
> 
> 标签：jquery

我正在使用`jQuery 1.9.0`，我的 html 是：

```
<div id='div1'>    
</div>
<div id='div2'>
</div> 
```

我的js：

```
var input = $("<input type='text'>");
$('#div1').html(input);
$('#div2').html(input); 
```

我对这段代码的理解是

> input 是一个 jQuery 对象，我可以用它分别设置 div1 和 div2 ，就像我可以将一个变量的值分配给编程语言中的许多其他变量一样。

基于这种理解，我期望的是：

```
<div id='div1'>
    <input type="text">
</div>
<div id='div2'>
    <input type="text">
</div> 
```

但我得到：

```
<div id='div1'>
</div>
<div id='div2'>
    <input type="text">
</div> 
```

如果我只是打电话`$('#div1').html(input);`，`div1`就会有`input`元素。为什么调用后`div1`的`input`元素会消失`$('#div2').html(input);`？

我知道如何绕过这个问题，但我很想知道这种行为的原因。

提前致谢！

**更新：**

我感谢所有真诚回答这个问题的人，我对每一个答案都投了赞成票。我现在对这个问题有了一个线索，但我仍然想知道为什么不同的节点（`div1`和`div2`）不能引用同一个对象。在`C`语言中，不同的变量可以引用同一个内存地址。这两者有什么区别`reference`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:37:21.383

克隆它，以解决引用问题（在下面添加了更多详细信息）:)

```
var input = $("<input type='text'>");
$('#div1').html(input.clone());
$('#div2').html(input.clone()); 
```

发生这种情况的原因是因为 input 是一个 jQuery 对象。将其视为参考。第一次使用输入时，`#div1`会使用它，但是引用仍在内存中，当您将其添加到`#div2`它时会重新使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:40:25.263

尝试这个。`input`可能仅在 DOM 中属于特定节点。同一节点不能同时具有父节点`div1`和父节点。而是`div2` 创建一个副本`input`以将其附加到其他节点

```
var input = $("<input type='text'>");

$(input).clone().appendTo('#div1');
$(input).clone().appendTo('#div2'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:42:52.657

最重要的是，当您将元素附加到页面的某个位置时，DOM 不会自动克隆您的元素。这不是 jQuery 特定的。

因为`input`一直引用同一个元素，`input`稍后附加到另一个元素会将其与之前的位置分离，因此`input`会在 DOM 中不断移动。

这就是为什么你必须在附加元素之前克隆它:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:21:51.643

为什么不看看这个页面？[http://javascript.info/tutorial/memory-leaks](http://javascript.info/tutorial/memory-leaks)

我想这与 JS 的垃圾收集器机制有关。

# c# - 找不到类型或命名空间名称“SqlBulkCopy”

> ID：14481047
> 
> 赞同：1
> 
> 时间：2013-01-23T13:36:33.070
> 
> 标签：c#, excel, namespaces, sqlbulkcopy

有人可以帮我解决这个错误。这是我的代码：

```
using System;
using System.Drawing;
using System.Collections;
using System.ComponentModel;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Data.OleDb;
using System.Data;
using Microsoft.ApplicationBlocks.Data;
using System.Configuration;

OleDbConnection ExcelCon = new OleDbConnection();
ExcelCon.ConnectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=C:\\Users\\pc\\Documents\\ExcellTest.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes\"";
SqlConnection SqlCon = new SqlConnection();
SqlCon.ConnectionString = @"workstation id = PC-PC; user id=sa;Password=sapassword; data source=pc-pc; persist security info=True; initial catalog=CleanPayrollTest2";
string sSQLTable = "TestExcell";
string sClearSQL = "DELETE FROM " + sSQLTable;
SqlCommand SqlCmd = new SqlCommand(sClearSQL, SqlCon);
SqlCon.Open();
SqlCmd.ExecuteNonQuery();
SqlCon.Close(); 
DataTable dtSchema;
dtSchema = ExcelCon.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
OleDbCommand Command = new OleDbCommand ("select * FROM [" + dtSchema.Rows[0]["TABLE_NAME"].ToString() + "]", ExcelCon);
OleDbDataAdapter da = new OleDbDataAdapter(Command);
DataSet ds = new DataSet ();
da.Fill(ds);
dataGrid1.DataSource = ds.Tables[0];
    OleDbDataReader dr = Command.ExecuteReader();
SqlBulkCopy bulkCopy = new SqlBulkCopy(sSqlConnectionString); 
bulkCopy.DestinationTableName = sSQLTable; 
while (dr.Read())
{
    bulkCopy.WriteToServer(dr);
} 
```

错误：

- 找不到类型或命名空间名称“bulkCopy”（您是否缺少 using 指令或程序集引用？）

- 找不到类型或命名空间名称“SqlBulkCopy”（您是否缺少 using 指令或程序集引用？）

- 找不到类型或命名空间名称“OleDbConn”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:37:49.987

[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类属于[`System.Data.SqlClient`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.aspx)命名空间。将您的代码添加为它喜欢的名称空间；

```
using System.Data.SqlClient; 
```

这个命名空间包含在`System.Data.dll`

要在 Visual Studio 中添加引用，您可以`Reference`在解决方案资源管理器中右键单击“”，然后单击`Add Reference`。

![在此处输入图像描述](../Images/702aa198f9025b036e70e48b1f0c8e3c.png)

在搜索`System.Data`框中搜索，并将顶部结果`System.Data`dll 添加到您的解决方案中。

![在此处输入图像描述](../Images/8c02a2624329120be4401fc3ada4393a.png)

查看有关如何：使用*MSDN*[中的添加引用对话框添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.110%29.aspx)的更多信息。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:38:14.540

您的项目中是否有参考，您的文件中`System.Data.dll`是否有`using System.Data.SqlClient`声明？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-16T14:48:26.650

安装 NuGet 包：System.Data.SqlClient

[![在此处输入图像描述](../Images/cd300f0e0de23c5795351aa16bcc7f90.png)](https://i.stack.imgur.com/92Bnb.png)*

# javascript - javascript如何知道浏览器使用的是哪个版本的javascript？

> ID：14481049
> 
> 赞同：0
> 
> 时间：2013-01-23T13:36:40.803
> 
> 标签：javascript

是否可以检测浏览器当前使用的 javascript 版本。

我想知道它是否是 Ecmascript 4/5/6

是否可以通过使用控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:44:47.270

您可以使用语言属性来检测 JavaScript 的版本。

```
<SCRIPT LANGUAGE="JavaScript1.1">
// do something on with browsers that use Javascript 1.1
</SCRIPT> 
```

但是，为了检测可用的功能，您最好检测可用的单个功能，因为浏览器并不总是在 ECMAScript 版本中实现所有功能。

[Modenizer](http://modernizr.com/)是一个很好用的库。

# struts2 - 在另一个网格的行单击时重新加载 struts2 Jquery Grid

> ID：14481050
> 
> 赞同：1
> 
> 时间：2013-01-23T13:36:41.120
> 
> 标签：struts2, struts2-jquery, struts2-jquery-grid

我的页面中有两个 struts2 jQuery 网格。我必须在第一个网格的行单击时加载第二个网格。我`rowselect`在第一个网格中添加了一个事件侦听器，并在该方法中尝试重新加载网格。

```
$("#dgJobsDetailMain").jqGrid().trigger("reloadGrid"); 
```

我还尝试触发 Ajax 请求

```
function populateJobRunDetails(jobName,dbSid)
{
    $.ajax({
        url: "ecmComparisonJobDetailDataAction?jobId="+jobName+"&selectedDbSid="+selectedDbSid+"&date="+new Date().getTime()+"&rowClicked=true",
        type: "GET",
        dataType: "json",
        success: function(data,textStatus,jqXHR)
        {
            //$("#dgJobsDetailMain").jqGrid().trigger("reloadGrid");
        },
        error:function(jqXHR, textStatus, errorThrown)
        {
            alert('error');
        }   
      }); 
} 
```

我的问题是

1.  Action 的 execute 方法会为每个 action 获取多次。当我在调试模式下运行应用程序时，我发现动作类执行方法被调用了 3 次。其中，从 jsp 页面中选择的值被绑定到 action classes 变量两次，第三次为空。
2.  当我触发`success`ajax 函数的重新加载网格事件时，动作类参数设置为 null，因此我无法继续进行数据获取。

第一个网格

```
<sjg:grid viewrecords="true" formIds="ecmComparisonMainForm" reloadTopics="reloadDataGrid" pagerPosition="center" onSelectRowTopics="rowselect" id="dgJobsMain" caption="Job List" dataType="json"  href="%{ecmComparisonDataActionUrl}" pager="true"  
            gridModel="gridModel"  rowList="4,6,8" rowNum="5"  rownumbers="true" height="150" width="1200">        
             <sjg:gridColumn name="jobId" index="jobId"  title="Job ID" hidden="true" />
             <sjg:gridColumn name="jobName" index="jobName"  title="Job" sortable="true" />
             <sjg:gridColumn name="jobDescription" index="jobDescription" title="Job Description"  sortable="true"/> 
             <sjg:gridColumn name="database" index="database" title="Database" sortable="false" /> 
             <sjg:gridColumn name="sourceSchema" index="sourceSchema" title="Source Schema" sortable="false"/> 
             <sjg:gridColumn name="targetSchema" index="targetSchema" title="Target Schema" sortable="true"/>
             <sjg:gridColumn name="prDescription" index="prDescription" title="PR Description" hidden="true" sortable="false"/>
             <sjg:gridColumn name="createdDate" index="createdDate" title="Created Date" sortable="false"/>
             <sjg:gridColumn name="createdBy" index="createdBy" title="Created By" sortable="false"/>
</sjg:grid> 
```

行选择功能

```
$.subscribe('rowselect', function(event, data) 
{
    rowClicked = true;
    var grid = event.originalEvent.grid; 
    var sel_id = grid.jqGrid('getGridParam', 'selrow'); 
    var jobName = grid.jqGrid('getCell', sel_id, 'jobName');

    var dbSid = document.getElementById('schemaDbSid');
    $("#dgJobsDetailMain").jqGrid().trigger("reloadGrid");
    //populateJobRunDetails(jobName,dbSid.value);
}
); 
```

第二网格

```
<sjg:grid pagerPosition="center" id="dgJobsDetailMain" caption="Job Details List" dataType="json"  href="%{ecmJobRunDetailsActionUrl}" pager="true"  
            gridModel="jobsDetailGridModel"  rowList="4,6,8" rowNum="5"  rownumbers="true" height="150" width="1200">        
             <sjg:gridColumn name="runId" index="runId"  title="Run" sortable="true" />
             <sjg:gridColumn name="startDate" index="startDate" title="Start Time"  sortable="true"/> 
             <sjg:gridColumn name="endDate" index="endDate" title="End Time" sortable="false" /> 
             <sjg:gridColumn name="status" index="status" title="Run Status" sortable="false"/> 
             <sjg:gridColumn name="statusMsg" index="statusMsg" title="Status Details" sortable="true"/>
</sjg:grid> 
```

动作类：

```
//Form variables/getter setters

public String execute()
{
// code to database
}

public String getJSON()
{
return execute();
} 
```

请让我知道缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:54:11.990

```
$("#dgJobsDetailMain").jqGrid('setGridParam',{url:'/context/action_name?param1='+value1+"&param2="+value2}).trigger("reloadGrid"); 
```

这解决了我的问题。奇怪，因为我用`s:url and s:param`. 它不起作用。

-卡西克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:42:03.217

阅读您的代码后，我想您应该像这样重新加载网格。

```
var grid = jQuery("#yourGridId");
grid.trigger("reloadGrid"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:29:54.667

将属性 reloadTopics 添加到您的 Grid 并在需要时发布它。这有一些好处，再次简单触发 reloadGrid。例如，formIds 属性也受到尊重。

```
<sjg:grid id="myGrid" reloadTopics="reloadMyGridTopic" ... />

<script>
$.publish("reloadMyGridTopic");
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T17:04:20.703

尝试这个：

```
 $.ajax({
            url: "myAction.action", cache: false, dataType: 'json', data: "Id=" +
                    Id,
            success: function (data) {
                var jsonData = JSON.stringify(data.jsonResponse);
                var parsedData = JSON.parse(jsonData);
                if (parsedData.hasResults) {
                    var myData = parsedData.jsonResults;
                    $(document).ready(function () {
                        var allParameters = $("#gridModel").jqGrid("getGridParam");
                        allParameters.data = myData;
                        $("#gridModel").trigger('reloadGrid');

                    });
                }
            } }); 
```

在您的动作类中，将网格列表设置为 json 响应：

jsonResponse = JsonResponses.collectionResponse(list);

# c# - 有没有办法判断小数是否在 C# 中终止或重复？

> ID：14481054
> 
> 赞同：0
> 
> 时间：2013-01-23T13:37:05.593
> 
> 标签：c#, math

> **可能重复：**
> [如何知道分数中的重复小数？](https://stackoverflow.com/questions/8946310/how-to-know-the-repeating-decimal-in-a-fraction)

有没有办法判断小数是终止还是重复？

示例：我有分数：1/3，它是重复小数 - 0.33333333333333333333 我有小数 1/2，它是终止小数 - 0.5

我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:12:35.730

根据[Wikipedia](http://en.wikipedia.org/wiki/Repeating_decimal)，如果分数可以以 的形式表示，则它是终止的`k/(2^n * 5^m)`，其中 k、n 和 m 是整数。

```
#assumes that the fraction is already fully reduced
#e.g. numerator and denominator are coprime
function isTerminating(numerator, denominator):
    while denominator % 2 == 0:
        denominator /= 2
    while denominator % 5 == 0:
        denominator /= 5
    return denominator == 1 
```

如果您在 IEEE 浮点数中有分数，那么它总是会终止，只要它不是 NaN 或 +/- 无穷大。浮点数中的有限数表示为`c * b^q`。这些术语可能会重新排列为`c / (b^-q)`。b 始终为 2 或 10，因此数字符合`k/(2^n * 5^m)`格式，因此是终止分数。

# javascript - ExtjS如何销毁控制器

> ID：14481063
> 
> 赞同：0
> 
> 时间：2013-01-23T13:37:22.780
> 
> 标签：javascript, model-view-controller, extjs

我的情况是这样的，我有一个有视图对话框的控制器，对话框没有定义为那个控制器视图，只有我创建的窗口对象。当我关闭并销毁对话框的 DOM 时，第一个事件工作正常，之后这个过程工作了两次。因此我得出结论，我的控制器仍然存在，它正在调用等于 null 的对话框。我如何销毁该控制器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:26:36.767

使用**销毁**功能

```
dialogName.destroy; 
```

# javascript - 用javascript解析json结构

> ID：14481076
> 
> 赞同：0
> 
> 时间：2013-01-23T13:38:06.297
> 
> 标签：javascript, json, parsing

我使用 ajax 来查询 json api。它给了我一个树状结构，我想将其可视化。示例响应看起来像

```
{
  "nicos": {
    "_lastconfig_": {
      "poller": {
        "alwayspoll": [], 
        "blacklist": [], 
        "neverpoll": [
          "detector"
        ]
      }
    }, 
    "poller": {
      "alwayspoll": [], 
      "autosetup": true, 
      "blacklist": [], 
      "description": "", 
      "loglevel": "info", 
      "lowlevel": false, 
      "neverpoll": [
        "detector"
      ], 
      "poll": []
    }
  }
} 
```

现在我想动态解析它并将其可视化为表格。一个可能的输出可能是

```
<h1>nicos</h1>
<h2>_last_config_</h2>
<table>
  <tr><td>alwayspoll</td><td>[]</td></tr>
  <tr><td>blacklist</td><td>[]</td></tr>
  <tr><td>neverpoll</td><td>[detector]</td></tr>
</table>
<h2>poller</h2>
<table>
  <tr><td>alwayspoll</td><td>[]</td></tr>
  <tr><td>autosetup</td><td>true</td></tr>
  <tr><td>blacklist</td><td>[]</td></tr>
  <tr><td>description</td><td></td></tr>
  <tr><td>loglevel</td><td>info</td></tr>
  <tr><td>lowlevel</td><td>false</td></tr>
  <tr><td>neverpoll</td><td>[detector]</td></tr>
  <tr><td>poll</td><td>[]</td></tr>
</table> 
```

由于我是 javascript 的完全新手，因此我正在寻求一些关于如何实现这一目标的建议。ajax 部分不是问题，但解析困扰着我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:53:44.920

**[试试这个代码](http://jsbin.com/ixojow/3/edit)：**

```
function parse(obj){
    var s = '<table>';
    for(var k in obj){
        if(typeof obj[k] === 'object'){
            s += '<tr><td>'+k+'</td><td>'+parse(obj[k])+'</td></tr>\n';
        }else{
            s += '<tr><td>'+k+'</td><td>'+obj[k]+'</td></tr>\n';
        }
    }
    return s + '</table>\n';
}
parse(myJson); 
```

输出：

```
 <table>
    <tr><td>nicos</td><td>
        <table>
            <tr><td>_lastconfig_</td><td>
                <table>
                    <tr><td>poller</td><td>
                        <table>
                            <tr><td>alwayspoll</td><td>
                                <table>
                                    <tr><td>0</td><td>1</td></tr>
                                    <tr><td>1</td><td>2</td></tr>
                                    <tr><td>2</td><td>3</td></tr>
                                </table>
                            </td></tr>
                            <tr><td>blacklist</td><td>
                                <table>
                                    <tr><td>0</td><td>X</td></tr>
                                    <tr><td>1</td><td>Y</td></tr>
                                    <tr><td>2</td><td>Z</td></tr>
                                </table>
                            </td></tr>
                            <tr><td>neverpoll</td><td>
                                <table>
                                    <tr><td>0</td><td>detector</td></tr>
                                </table>
                            </td></tr>
                        </table>
                    </td></tr>
                </table>
            </td></tr>
            <tr><td>poller</td><td>
                <table>
                    <tr><td>alwayspoll</td><td>
                        <table>
                        </table>
                    </td></tr>
                    <tr><td>autosetup</td><td>true</td></tr>
                    <tr><td>blacklist</td><td>
                        <table>
                        </table>
                    </td></tr>
                    <tr><td>description</td><td></td></tr>
                    <tr><td>loglevel</td><td>info</td></tr>
                    <tr><td>lowlevel</td><td>false</td></tr>
                    <tr><td>neverpoll</td><td>
                        <table>
                            <tr><td>0</td><td>detector</td></tr>
                        </table>
                    </td></tr>
                    <tr><td>poll</td><td>
                        <table>
                        </table>
                    </td></tr>
                </table>
            </td></tr>
        </table>
    </td></tr>
</table> 
```

（我在数组中添加了一些变量以表明这些变量也有效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:34:05.690

将 Object 解析为[定义列表](http://www.w3.org/TR/html401/struct/lists.html#h-10.3)( [`<dl>`](https://developer.mozilla.org/en-US/docs/HTML/Element/dl)) 可以使用这样的代码来实现（[**例如 fiddle**](http://jsfiddle.net/D8zWg/)）。

```
function objToDefnList(obj) { // returns a `<dl>` node (not appended to DOM Tree)
    var dl = document.createElement('dl'),
        dt, dd, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) {
            // title
            dt = document.createElement('dt');
            dt.appendChild(document.createTextNode(key));
            dl.appendChild(dt);
            // defn.
            dd = document.createElement('dd');
            if (typeof obj[key] !== 'object') {
                dd.appendChild(document.createTextNode(obj[key].toString()));
            } else {
                dd.appendChild(objToDefnList(obj[key])); // recurse
            }
            dl.appendChild(dd);
        }
    }
    return dl; // done, return
} 
```

它可以很容易地修改为使用您想要的任何类型的列表（例如`<ul>`，`<ol>`）或显示更多信息（例如`typeof obj[key]`）。您可能需要对元素进行样式设置，请参阅 fiddle 以获取示例。

感谢[epascarello](https://stackoverflow.com/users/14104/epascarello)的[建议](https://stackoverflow.com/questions/14481076/parse-json-structure-with-javascript/14482177#comment-20177325) 。`<dl>`_`<ul>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:58:01.650

JSON 到 HTML 表几乎可以肯定是一个已经发明的轮子：

[https://github.com/afshinm/Json-to-HTML-Table](https://github.com/afshinm/Json-to-HTML-Table)

# macos - 可可：以编程方式在视图中居中对齐子视图（NSButton）

> ID：14481080
> 
> 赞同：2
> 
> 时间：2013-01-23T13:38:11.147
> 
> 标签：macos, cocoa, desktop

我想水平居中对齐父视图中的子视图（NSButton）。我想以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:43:22.060

假设这`myButton`是一个`NSButton *`，那么：

```
- (void)setFrame:(NSRect)frameRect
{
    [super setFrame:frameRect];

    NSRect buttonRect = [myButton frame];
    buttonRect.origin.x = (NSWidth(frameRect) / 2.0) - (NSWidth(buttonRect) / 2.0);
    [myButton setFrame:buttonRect];
} 
```

# cluster-computing - 如何使用 qsub 在 sun 网格系统中获取 job_id

> ID：14481082
> 
> 赞同：0
> 
> 时间：2013-01-23T13:38:15.470
> 
> 标签：cluster-computing, sungridengine

考虑一个脚本，“run.sh”，通过 qsub 发送到集群作业队列，

```
qsub ./run.sh 
```

我的问题是如何在脚本 run.sh 中获取进程的编号——在文件 *.o${PID} 和 *.e${PID} 上显示为 ${PID} 的那个？

qsub 会导出吗？在哪个名字上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:13:02.403

好吧，显然 qsub 手册页没有，但是[这个页面](http://www.csp.uga.edu/resources/csp-queue-how-to)说变量 $JOB_ID 是使用我要求的 PID 创建的。

# c# - DataGrid.Measure() 操作列宽

> ID：14481083
> 
> 赞同：0
> 
> 时间：2013-01-23T13:38:23.250
> 
> 标签：c#, wpf, datagrid, measure

我遇到了`Measure()`WPF DataGrid 的功能问题。如果我将`DataGridLength`on 列`DataGrid`设置为`DataGridLengthUnitType.Star`，则每次调用该`Measure()`函数时，`DataGrid`DataGrid 的所有列的宽度都设置为 30px 左右。有人知道为什么测量功能会这样做吗？毕竟它为什么要操纵我的列？它不应该只测量我的 DataGrid 的大小吗？

编辑：设置`CanContentScroll`属性 auf my`ScrollContentPresenter`后，`false`它工作正常，但这极大地减慢了我的`datagrid`速度。一些建议？:)

edit2：我的列是通过`DataGridColumnHeadersPresenter`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:54:23.230

UIElement.Measure() 方法根据*availableSize*参数的值更新控件的 DesiredSize 属性。您设置的值可能比您希望的要小。我会尝试设置一个很大的值来看看会发生什么。

# sql - 带有 JOIN 和 WHERE 子句的 SELECT 语句不返回任何数据

> ID：14481084
> 
> 赞同：1
> 
> 时间：2013-01-23T13:38:23.440
> 
> 标签：sql, winforms, datagridview

我对需要在 datagridview 上查看的数据有疑问。贝娄是我的代码：

```
 Public Class Form3

    Private Sub Form3_Load(sender As Object, e As EventArgs) Handles MyBase.Load

Dim CONNECT_STRING As String = (...)

Dim cnn As New OleDbConnection(CONNECT_STRING)

        cnn.Open()

        MsgBox(status_narocila.value)

        Dim sql As String = "SELECT artikel.st_artikla, artikel.naziv_artikla, narocilo.kolicina, narocilo.barva_tiska, narocilo.izvedba, narocilo.opombe, narocilo.datum_narocila, narocilo.rok_izdelave, narocilo.status, narocilo.ID FROM (narocilo INNER JOIN artikel ON narocilo.id_artkla = artikel.ID) WHERE(narocilo.ID = '" & status_narocila.value & "')"

        Dim cmd As New OleDbCommand(sql, cnn)

        Dim da As New OleDbDataAdapter(cmd)

        Dim ds As New DataSet

        da.Fill(ds, "artikel")

        cnn.Close()

        DataGridView1.DataSource = ds.Tables("artikel")

    End Sub
End Class 
```

值`status.narocila.value`是整数，我已经对其进行了测试并从中获得了正确的值。代码在没有`WHERE`子句的情况下工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:44:07.277

```
= '" & status_narocila.value & "')" 
```

应该

```
= " & status_narocila.value & ")" 
```

no ' 在数字数据类型上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:45:57.587

如果`narocilo.ID`也是一个整数，那么问题是您在整数字段上使用文本限定符。

尝试将您的 WHERE 子句更改为：

`WHERE(narocilo.ID = " & status_narocila.value & ")"`

# svn - SVN：如何将头版本中的特定文件与其他旧版本进行比较？

> ID：14481091
> 
> 赞同：0
> 
> 时间：2013-01-23T13:38:36.960
> 
> 标签：svn

我有这个文件`js/xyz.js`。目前它是一个`head`修订版（比如 r7700）。

我想将此文件与`js/xyz.js`旧版本（例如 r7600）中的（相同文件）进行比较

有什么办法吗？

**我想知道，怎么做`CLI ( Command line interface )`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:40:10.953

是的：`svn diff -r7600 js/xyz.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:41:16.197

要将当前版本与修订版 7600 进行比较，请使用：

```
svn diff -r 7600 js/xyz.js 
```

你也可以使用

```
svn diff -r 7600:7700 js/xyz.js 
```

明确比较修订版 7600 和 7700

# vbscript - Reg - 错误输入超过文件结尾 - VbScript

> ID：14481096
> 
> 赞同：0
> 
> 时间：2013-01-23T13:38:52.380
> 
> 标签：vbscript

我编写了一个简单的程序来使用 写入和读取文本文件中的数据`FileSystemObject`，但它不起作用并给我一个运行时错误：

> 输入文件末尾。

请让我知道我在这里犯的错误。

```
'Here is the Program - 

Dim Fso    'Reference obect to File system
Dim TxtObj 'Reference to Text stream object
Dim Txt    'Reference to Text stream object to open file
Dim i      'To Read Text in file

Set Fso = CreateObject("Scripting.FileSystemObject")

Set Txtobj = Fso.CreateTextFile("C:\Users\ACER\Desktop\Project Folder\NewText_3.txt")

Txtobj.Write("Hello")

Txtobj.Close

Set Txt = Fso.OpenTextFile("C:\Users\ACER\Desktop\Project Folder\NewText_3.txt",1)

Do while Txt.AtEndOfStream<>1
  i = Txt.Read(1)
Loop

Msgbox i

Txt.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:36:55.990

```
Option Explicit ' safety belt

Const FSpec = "14481096.txt" ' dry the file name

Dim Fso 'Reference object to File system
Set Fso = CreateObject("Scripting.FileSystemObject")

Dim TxtObj 'Reference to Text stream object (used for rwrite and read)
Set Txtobj = Fso.CreateTextFile(FSpec)

Txtobj.WriteLine "Hello"
Txtobj.Close

Dim Letter 'To Read Text in file (each letter)
Set Txtobj = Fso.OpenTextFile(FSpec)  ' ForReading is the default, no need for magic number 1)
Do Until Txtobj.AtEndOfStream ' never compare boolean values against boolean literals
                              ' or - worse - values of other types you *hope* VBScript
                              ' will convert correctly
   Letter = Txtobj.Read(1) ' letter
   WScript.Echo "got", Letter
Loop
Txtobj.Close 
```

输出：

```
cscript 14481096.vbs
got H
got e
got l
got l
got o
got     <-- aka cr
got     <-- aka lf (in case you are wondering) 
```

额外提示：

```
>> WScript.Echo CInt(True), CInt(False)
>>
-1 0
>> 
```

# java - Neo4j 使用自定义评估器获取节点检索的深度

> ID：14481098
> 
> 赞同：2
> 
> 时间：2013-01-23T13:39:08.647
> 
> 标签：java, api, neo4j, evaluator

我正在使用最新版本的 Neo4j 来构建节点图和与 Java API 的关系图。

我的问题是我需要将节点遍历到一定深度。数据库中相同深度的两个节点之间可能存在关系，但我不想在遍历中返回该关系。

我试图通过实现 Evaluator 接口来制作自定义 Evaluator，但它覆盖的唯一方法是`Evaluation evaluate(Path path)`. 它似乎没有与之相关的深度概念。

我真的很感激一些关于如何将节点与其深度相关联（从特定节点遍历时）或修剪两个节点处于同一级别的关系的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:35:16.410

您是否为此尝试过[Cypher](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)，例如

```
start n = node(1) match p=n-[*4]->(x) return x, length(p) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:09:01.813

您可以使用[Evaluators.atDepth()](http://api.neo4j.org/current/org/neo4j/graphdb/traversal/Evaluators.html#atDepth%28int%29)来获得一个预定义的 Evaluator，它只包含具有一定深度的路径。

在您的自定义评估器中，您可以简单地检查传递的路径参数的长度，以决定是否要包含此路径，例如：

```
Evaluation evaluate(Path path) {
    return path.length() == 4 ? Evaluation.INCLUDE_AND_PRUNE : Evaluation.EXCLUDE_AND_CONTINUE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T20:39:29.463

路径有一个length()，即深度。长度等于路径中的关系数，即节点数 - 1。

# java - 在哪里可以找到易于理解的如何在 Eclipse 中为 Java 建模的资源？

> ID：14481099
> 
> 赞同：0
> 
> 时间：2013-01-23T13:39:11.200
> 
> 标签：java, eclipse, uml, emf, eclipse-gmf

我过去曾使用 eclipse 来处理 C++，而且我是 Java 新手，而且我大部分时间都掌握了基础知识。

至于Java，我一直在看所有这些教程和关于UML对面向对象设计有多么有用的东西，以及你应该如何事先为你的应用程序建模等等……

好的，所以我寻找一些建模工具，你知道，所以，如果我在 Eclipse 中对它进行建模，根据我的阅读，它甚至会为你将其转换为 Java，听起来不错。然后，如果我改变一些对象，它会更新代码。（至少，为了安排事情，我知道随着事情变得复杂，这在有用性方面会失效。）

好吧，所以我去寻找....和悲伤！ `EMF` `XMI` `Acceleo` `EIB` `RDB` `GMF` `XML` `UML`...哇！，哇！，等等，如果它有意义，我可以想出一些东西，但这感觉就像一个政府雇员抓住它，到处都是首字母缩略词！

我尝试了从谷歌上找到的教程，但是当教程说：“哦，这里使用我们难以理解的示例（（因为我们把它从头开始变得太复杂））时，它并没有帮助，你就会知道所有你需要知道”的东西没有帮助。

无论如何，是否有一套简单的英语教程和/或书籍可以帮助我将这种混乱翻译成我可以用来建模我的 Java 的东西，而无需 2 年的 Java 学位 l33t 说话？

我认为建模应该是快速和简单的，在你开始填充细节之前让你的对象总体布局，到目前为止，这不是我所看到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:41:31.867

我放弃了，这个烂摊子是胡言乱语。

也许它在特定情况下有用，但它只是开销无意义。如果真的需要它，它就不会那么学术了。

我用各种工具转来转去，我所期待的是，能够绘制出对象，列出它们的属性和方法，并以图形形式勾勒出来，然后让应用程序生成代码框架我刚刚开始填充这些对象的肉。如果我在代码中添加或更改内容，我的图形大纲会保持最新。

看来我要求太多了，尤其是来自 Eclipse。它要么太复杂而无用，要么不完整，要么过时，无法正常运行。

我明白了UML设计的必要性，至少，我认为我做到了。我来自一个经典的 C/Perl/Assembler 函数驱动的世界，我理解对更复杂项目的流程图和图表的需求，在我看来，因为 Java 是一种不同风格的不同编程语言，（对象面向，而不是面向功能），设计阶段应该反映这种思想的变化。UML 似乎并不难掌握，描述对象及其属性和行为方式的框，以及显示事物如何交互的这些交互图表。好吧，显然这个领域的最新技术并没有我希望的那么先进。

所以，我对这个问题的回答是，没有什么可以为 Eclipse 做这件事的，至少，Java 世界的新人在没有大量其他事情需要首先了解的情况下，没有任何东西可以开箱即用地抓住和使用。这堵墙太高了，我现在爬不上去，我还有太多其他事情要做。我想那里有人有机会。

# esb - 如何使用 WSO2 ESB 将传入的 SOAP 响应转换为 JSON 文档

> ID：14481103
> 
> 赞同：0
> 
> 时间：2013-01-23T13:39:15.137
> 
> 标签：esb

我想使用 ESB4.10 将 json 转换为 xml。并且需要了解并了解 JBoss ESB 如何支持 JSON http 请求？如果这必须使用 HTTP 请求来完成，请共享一些我可以用来实现它的线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T23:51:48.133

在您的代理或 REST API 元素中，如果您愿意将给定的响应 (SOAP) 转换回 JSON，只需在输出序列中包含以下属性：

```
<xslt key="ns-remove"/>   
<property name="messageType" value="application/json" scope="axis2"/> 
```

* * *

**将此部分包含在注册表中，通常我们需要删除任何可用的命名空间。**

```
<localEntry key="ns-remove">
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
        <xsl:output method="xml"/>
        <xsl:template match="*">
            <xsl:element name="{local-name()}">
                <xsl:apply-templates select="@*"/>
                <xsl:apply-templates select="node()"/>
            </xsl:element>
        </xsl:template>
        <xsl:template match="@*">
            <xsl:attribute name="{local-name()}">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </xsl:template>
        <xsl:template match="/">
            <xsl:copy>
                <xsl:apply-templates/>
            </xsl:copy>
        </xsl:template>
        <xsl:template match="comment() | processing-instruction() | text()">
            <xsl:copy/>
        </xsl:template>
    </xsl:stylesheet>
</localEntry> 
```

# php - PHP - 通过 Foreach 返回多维数组

> ID：14481104
> 
> 赞同：1
> 
> 时间：2013-01-23T13:39:20.743
> 
> 标签：php, arrays, foreach

我试图从多维数组中返回一个值，但它似乎不起作用。

**数组**-

```
[players] => Array
    (
        [0] => Array
            (
                [player] => Necro
                [score] => 0
                [deaths] => 0
                [gq_name] => 
                [gq_kills] => 
                [gq_deaths] => 0
                [gq_score] => 0
                [gq_ping] => 
            )

    ) 
```

**PHP Foreach**

```
<?php  
$dayzplayers = $results["dayz"]["players"];
          foreach($dayzplayers as $k => $v) {
                  echo ' <b>'.$v["player"].'</b>';
              } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:52:09.537

['player'] 索引在键 SOH（标题开始）中似乎有一个不可见的控制字符

尝试`echo ' <b>'.$v[chr(1) . "player"].'</b>';`代替`echo ' <b>'.$v["player"].'</b>';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:48:44.310

如果数据是您在第一个清单中发布的数据，则应该可以：

```
foreach($dayzplayers as $player) {
    echo $player[chr(1).'player'];
} 
```

根据[http://codepad.org/kUYueGVh](http://codepad.org/kUYueGVh)

# javascript - Javascript /Extjs 4 字符串比较

> ID：14481105
> 
> 赞同：1
> 
> 时间：2013-01-23T13:39:21.863
> 
> 标签：javascript, extjs4

我想在javascript中比较两个字符串，并且需要找到与其他字符串不同的确切位置。

例如

```
StingA= "a;b;c;"
StringB="a;bc;" 
```

现在从上面的 StringB 不同于 StringA 在位置 3 .. 即“;” 在位置 3 处丢失 [如果我们开始计算 a=0,;=1,b=2];

我不能逐个字符比较，因为可能有很大的字符串，即 StringA="a;b;c;d;e;f;g; ....."

你能给我解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:00:38.820

除非您已经对算法进行了概要分析并确定它太慢，否则不要担心优化性能。首先获得一个可行的算法，然后在需要时对其进行分析。

```
// Returns the index of the first difference between strings a and b,
// or -1 if the strings are equal. Case-sensitive.
function indexOfDiff(a, b) {
    if(a === b) {
        return -1;
    }

    var len = Math.min(a.length, b.length);
    for(var i = 0; i < len; i++) {
        if(a.charAt(i) !== b.charAt(i)) {
            return i;
        }
    }

    return len;
} 
```

如果您绝对需要性能，您可以尝试基于“;”的已知位置的启发式方法 （如在您的示例中，如果您知道它交替使用字母和分号，则可以检查所有其他字符）。

或者对于非常大的字符串，您可以尝试递归二进制搜索。将一个字符串分成两半，并检查与另一个字符串的等效子字符串是否相等。如果相等，检查另一半。如果不相等，则将该字符串分成两半并重复该过程，直到您缩小了要检查的合理大小的子字符串。这种方法会更加复杂且容易出错，因此请先尝试更简单的方法。

# jquery - 将标注添加到浮动

> ID：14481106
> 
> 赞同：0
> 
> 时间：2013-01-23T13:39:23.063
> 
> 标签：jquery, graph, flot

有没有办法在 flot 中添加标注？我正在使用 flot 来绘制油箱液位以及显示油箱何时变空的估计值的计算线。我想添加一个标注，指向水箱为空的日期。见附图。即使您在浮动中缩放/平移，标注也应指向给定日期。即“标注箭头”的角度随着您平移而变化。

![标注的插图](../Images/ef9448cfd08b35fc9cef07b812daab9d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:03:21.327

您不会在 flot API 中找到这种特定需求。如果我是你，我会自己在画布上画出来。 这是我放在一起[的一个简单示例：](http://jsfiddle.net/GjwkW/)

![在此处输入图像描述](../Images/b4d2b5444ea069992d6d4536444b1c8a.png)

绘图代码：

```
somePlot = $.plot($("#placeholder"), [ d1, d2, d3 ]);

canvas = somePlot.getCanvas();
context = canvas.getContext("2d");

var w = 100;
var h = 30;
var radius = 5;
var width = context.canvas.clientWidth;
var height = context.canvas.clientHeight;    

var x = (width - (width * .25));
var y = (height - (height * .3));
var r = x + w;
var b = y + h;
context.beginPath();
context.strokeStyle="green";
context.lineWidth="4";
context.moveTo(x+radius, y);
context.lineTo(r-radius, y);
context.quadraticCurveTo(r, y, r, y+radius);
context.lineTo(r, y+h-radius);
context.lineTo(width, somePlot.getAxes().xaxis.box.top);
context.lineTo(x+radius, b);
context.quadraticCurveTo(x, b, x, b-radius);
context.lineTo(x, y+radius);
context.quadraticCurveTo(x, y, x+radius, y);
context.stroke();

context.textAlign = "center";
context.textBaseline = "middle";
context.font = "bold 15px 'Times New Roman', Times, serif";
context.fillText("SomeText", x + w/2, y + h/2); 
```

# javascript - （TypeError）：无法调用未定义的方法“setBadgeText”

> ID：14481107
> 
> 赞同：4
> 
> 时间：2013-01-23T13:39:29.443
> 
> 标签：javascript, gwt, google-chrome-extension

我正在使用 GWT 实现 chrome 扩展。我在 manifest.json 中创建了映射并编写了外部 java 脚本文件。在 background.js 脚本中，我编写了函数，在该设置的徽章文本中，即 chrome.browserAction.setBadgeText(count );.我使用 gwt+jsni 方法从 gwt 类传递字符串值。gwt 代码中的方法是

```
 public static native void passValue(String updateCount) /*-{
        $wnd.realTimeUpdateCount(updateCount);
    }-*/;    
The Methods in the java script :  
        function realTimeUpdateCount(count) {

      localStorage.unreadCount =  count;
      updateCount();
        }

       function updateCount() {
         if (!localStorage.hasOwnProperty('unreadCount')) {
          chrome.browserAction.setIcon({path:"images/favIcon.ico"});
          chrome.browserAction.setBadgeBackgroundColor({color:[190, 190, 190, 230]});
          chrome.browserAction.setBadgeText({text:"0"});
      } else {
           chrome.browserAction.setBadgeText(localStorage.unreadCount);
      }
       } 
```

这是我的 manifest.json 文件：-

```
{
  "name": "A browser action with no icon that makes the page red",
  "version": "1.0",
  "background": { "scripts": ["background.js"] },
  "permissions": [
     "tabs",
    "webNavigation", 
    "http://127.0.0.1:8888/Engile.html?gwt.codesvr=127.0.0.1"
  ],
  "web_accessible_resources": [
    "4D1B5509A17D34BAE8DB33C353725838.cache.html"
  ],  
  "browser_action": {
    "name": "Make this page red",
    "default_icon": "images/favIcon.ico"

  },
  "manifest_version": 2
} 
```

这是我的背景.js：-

```
function realTimeUpdateCount(count) {

    localStorage.unreadCount =  count;
    updateIcon();

}

if (chrome.runtime && chrome.runtime.onStartup) {
      chrome.runtime.onStartup.addListener(function() {
        console.log('Starting browser... updating icon.');
        updateIcon();
      });
    } else {

      chrome.windows.onCreated.addListener(function() {
        console.log('Window created... updating icon.');
        updateIcon();
      });
    }
function updateIcon() {

    if (!localStorage.hasOwnProperty('unreadCount')) {
        chrome.browserAction.setIcon({path:"images/favIcon.ico"});
        chrome.browserAction.setBadgeBackgroundColor({color:[190, 190, 190, 230]});
        chrome.browserAction.setBadgeText({text:"?"});
      } else {

        chrome.browserAction.setBadgeText({
          text: localStorage.unreadCount
        });
      }

    }

function goToApp() {
    chrome.browserAction.setBadgeBackgroundColor({color:[0, 200, 0, 100]});
      console.log('Going to app...');
      chrome.tabs.getAllInWindow(undefined, function(tabs) {

        console.log('Opening the application ...');
        chrome.tabs.create({url: 'http://server.ensarm.com:8082/EngileLive/Engile.html'});
      });
    }
chrome.browserAction.onClicked.addListener(goToApp); 
```

加载浏览器时，默认值 0 会在 Icon 上正确显示。实时值在 updateCount() 方法中正确显示。但是控制来自这个 chrome.browserAction.setBadgeText(count); 行，它抛出以下异常：

```
com.google.gwt.core.client.JavaScriptException: (TypeError): Cannot call method 'setBadgeText' of undefined
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor30.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

有人可以帮忙吗？代码中有什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T04:46:27.473

您只能从后台脚本文件中调用 chrome.browserAction 调用（我遇到了同样的问题）

看：

[Chrome 扩展：在运行时更改地址栏按钮背景颜色](https://stackoverflow.com/questions/13564277/chrome-extension-change-address-bar-button-background-color-at-runtime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:46:17.370

利用

```
else {
           chrome.browserAction.setBadgeText({text:localStorage.unreadCount});
      } 
```

代替

```
else {
           chrome.browserAction.setBadgeText(localStorage.unreadCount);
      } 
```

`browserAction.setBadgeText`将 json 对象作为输入。

# 参考

*   [chrome.browserAction.setBadgeText](http://developer.chrome.com/extensions/browserAction.html#method-setBadgeText)

# extjs - EXTJS - 如何将 form.Panel 的保存点击绑定到我的模型

> ID：14481110
> 
> 赞同：2
> 
> 时间：2013-01-23T13:39:38.217
> 
> 标签：extjs, model

```
Ext.define("Imobfusion.data.User",{
    extend: "Ext.data.Model",
    fields:[
        {name: "name",type: "string"},
        {name: "email",type: "email"},
        {name: "password",type: "password"}
    ],
    proxy: {
        type: 'ajax',
        api: {
            read: '/user/read',
            create: '/user/create',
            update: '/user/update',
            destroy: '/user/destroy'
        },
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json'
        }        
    }
}); 
```

有一种简单的方法将模型与这样的形式绑定吗？：

```
Ext.define('Imobfusion.window.UserForm', {
        extend: 'Ext.form.Panel',
        model: 'Imobfusion.data.User' //This is my need (XD)
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:47:32.457

您可以通过调用记录数据来使用[`loadRecord()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-loadRecord)方法将其加载`Ext.data.Model`到此表单中，`setValues`并在保存使用[`updateRecord()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-updateRecord)时将此表单中的值保存到 beginEdit/endEdit 块中传递的 Ext.data.Model 对象中。如果未指定记录，它将尝试更新（如果存在）提供给 loadRecord 的记录。或者只是使用[`getRecord()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-getRecord)and[`getValues()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-getValues)来更新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:51:14.443

您可以将记录加载到表单中。编辑 (record.set()) 后，记录数据被发送到服务器。你需要一个例子吗？

# java - 实例方法 public int manhattanDistance(Point other) 不编译

> ID：14481112
> 
> 赞同：-5
> 
> 时间：2013-01-23T13:39:39.053
> 
> 标签：java, return-value

将以下方法添加到 Point 类：

```
public int manhattanDistance(Point other) 
```

返回当前 Point 对象和给定的其他 Point 对象之间的“曼哈顿距离”。曼哈顿距离是指两个地方之间的距离，如果一个人只能通过水平或垂直移动在它们之间移动，就像在曼哈顿的街道上行驶一样。在我们的例子中，曼哈顿距离是它们坐标差的绝对值之和；换句话说，点之间的差异`x`加上 `y`点之间的差异。

```
public class Point {
 private int x;
 private int y;

 // constructs a new point at the origin, (0, 0)
 public Point() {
 this(0, 0); // calls Point(int, int) constructor
 }

 // constructs a new point with the given (x, y) location
 public Point(int x, int y) {
 setLocation(x, y);
 }

 // returns the distance between this Point and (0, 0)
 public double distanceFromOrigin() {
 return Math.sqrt(x * x + y * y);
 }

 // returns the x-coordinate of this point
 public int getX() {
 return x;
 }

 // returns the y-coordinate of this point
 public int getY() {
 return y;
 }

 // sets this point's (x, y) location to the given values
 public void setLocation(int x, int y) {
 this.x = x;
 this.y = y;
 }

 // returns a String representation of this point
 public String toString() {
 return "(" + x + ", " + y + ")";
 }

 // shifts this point's location by the given amount
 public void translate(int dx, int dy) {
 setLocation(x + dx, y + dy);
 }

 public int manhattanDistance(Point other){
/// int distance = Math.abs(x-other) + Math.abs(y-other);

 return Math.abs(x - other)+ Math.abs(y - other) ;
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:43:19.057

`other.getX()`而不是`other`, 与 y 相同。Other 是 Point 类的一个实例。你想通过这个值的 getter 来访问 other 的 x 值，getX。读这个：

[http://docs.oracle.com/javase/tutorial/java/concepts/index.html](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:45:26.513

```
return Math.abs(x - other)+ Math.abs(y - other); 
```

上面的行应该是：

```
return Math.abs(x - other.getX())+ Math.abs(y - other.getY()); 
```

为什么？

因为目前您正试图直接从整数中获取点对象，这是没有意义的。即使在逻辑上，你也不能明智地从一个整数中减去二维空间中的一个点。您需要从整数中获取特定值（`other`对象中的 x 和 y，通过调用适当的方法获得。）

与问题无关，但您也可以正确格式化您的代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:44:28.520

这一行是错误的： Math.abs(x - other)+ Math.abs(y - other)

另一个是 Point 对象。您必须获取该 Point 对象的 x 和 y，然后进行减法运算

而是试试这个： return Math.abs(x - other.getX())+ Math.abs(y - othe.getY()) ;

# xml - 如何使用动态元素为 XML 创建验证文件？

> ID：14481113
> 
> 赞同：0
> 
> 时间：2013-01-23T13:39:41.267
> 
> 标签：xml, dtd

我需要为以下 XML 创建验证文件（DTD 或 Schema 或其他）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Result>
  <StatusCode>1</StatusCode>
  <StatusMessage>
     <SSPReturnMessage>
       <S>false</S>
       <Date>23-Jan-2013 14:33</Date>
       <EL>
         <E EC="473">
            <ES><![CDATA[Error message]]></ES>
         </E>
       </EL>
     </SSPReturnMessage>
  </StatusMessage>
  <Data>
    <LocalPort>-1</LocalPort>
    <TunnelID></TunnelID>
  </Data>
</Result> 
```

Data 标签是可选的，里面的标签可以是任何东西（任何标签名称）。
问题是如何做到这一点以及使用哪种技术？DTD 还是模式？甚至是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:00:49.997

你不能用 DTD 做到这一点。您*可以*声明`Data`为：

```
<!ELEMENT Data ANY> 
```

`Data`但是仍然需要声明的任何子级（您不能这样做，因为您不知道这些元素将是什么）。

我认为您是正确的，并且需要`xs:any`在 XSD 中使用。

# iphone - 通过默认相机调整拍照大小

> ID：14481116
> 
> 赞同：0
> 
> 时间：2013-01-23T13:39:50.370
> 
> 标签：iphone, xcode, uiimagepickercontroller

我正在使用 UIImagePickerViewController 从我的应用程序中的 iPhone 默认相机拍摄照片并将其存储在 Document 目录中。完成这个过程需要很长时间，而且它在 tableview 上的显示速度也很慢。调整图像大小在这里有帮助吗？

```
-(IBAction)takePhoto:(id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
        imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self presentModalViewController:imgPicker animated:YES];
    }
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
       UIImage *pickedImage = [info objectForKey:UIImagePickerControllerOriginalImage];    
    [self dismissModalViewControllerAnimated:YES];

    NSData *imageData = UIImagePNGRepresentation(pickedImage);

    NSString *path = [SAVEDIMAGE_DIR stringByAppendingPathComponent:@"image.png"];

    [imageData writeToFile:path atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:46:52.807

当然！

我在我的应用程序中执行以下操作：

*   将图像存储在后台线程中的图像存储中
*   创建缩略图（也在后台线程中），将此缩略图存储在核心数据表中；在 ID 类型的字段中

所以我得到了一个流畅的用户界面，用户可以每 2 秒拍一张照片。

表格视图的流畅度也没有问题。虽然我也从后台线程填充 TableViewCells ImageViews（当然，在后台准备图像，分配给主线程中的 UIImageView）。

我希望，这对你有帮助。欢迎进一步提问。

为了您的方便，一些代码：

作为 Imagestore，我使用这些：[https ://github.com/snowdon/Homepwner/blob/master/Homepwner/ImageStore.m](https://github.com/snowdon/Homepwner/blob/master/Homepwner/ImageStore.m)

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self performSelectorInBackground:@selector(saveFoto:) withObject:info];
    // you should add some code for indicating the save process

}

// saves the photo in background-thread 
-(void)saveFoto:(NSDictionary*)info {
    // the following is some stuff that I do in my app - you will probably do some other things
    UIImage *image = [ImageHelper normalizeImageRotation: [info objectForKey:UIImagePickerControllerOriginalImage]];
    UIImage *thumb = [ImageHelper image:image fitInSize:CGSizeMake(imgWidth, imgWidth) trimmed:YES];
    NSString *myGUID = myGUIDCreator();
    [[ImageStore defaultImageStore] setImage:image forKey:myGUID];
    myCoreDataManagedObject.thumb = thumb;
    [self performSelectorOnMainThread:@selector(showYourResultsInTheUI:) withObject:thumb waitUntilDone:NO];  // every UI-Update has to be done in the mainthread!
} 
```

# silverlight-4.0 - 开发安装了 SL5 运行时的 Silverlight 4 应用程序

> ID：14481119
> 
> 赞同：1
> 
> 时间：2013-01-23T13:40:00.583
> 
> 标签：silverlight-4.0, silverlight-5.0

我们正在为 Silverlight 4 开发一个应用程序作为目标系统。目前所有开发机器都安装了 SL5 运行时。在过去，这工作得很好。但是现在我们偶然发现了一些问题。（例如：在 SL5 中支持样式设置器的绑定，但在 SL4 中不支持。但是，如果您将这样的绑定放在 XAML 中，编译器不会抱怨，并且它会在开发机器（安装了 SL5）上运行。但在生产机器上使用 SL4，您会收到运行时错误....)

有没有办法确保我们所做的一切都是符合 SL4 的，而无需卸载 SL5 并安装 SL4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:38:00.257

我在这里可能错了，但我们的开发环境和你的完全一样。我们没有遇到问题。当您将系统定位为 SL4 时，即使您放置了 SL5 标签，编译器也应该有抱怨，因为它是针对 SL4 而不是您的默认设置进行编译的。我们从来不需要在我们的开发环境中卸载 SL5。

# mongodb - 我将如何从 mongodb 中获取随机对

> ID：14481120
> 
> 赞同：1
> 
> 时间：2013-01-23T13:40:00.807
> 
> 标签：mongodb, random, random-sample

所以我有一个有趣的用例，我一直试图找到一个有效的 mongo 查询。

首先，我有 12,000 个类别和 100,000 个帖子。我需要从随机类别中随机选择 100 对帖子。这些对是从类别中随机选择的，但每对必须有两个帖子属于同一类别。

用户查看每一对以进行评分，一旦他们完成查看 100 个，他们会获取另外 100 个随机帖子（最好不是他们已经看过的任何相同对）。

所以要求是：

*   从一组随机类别中随机获取 100 对帖子

可选要求：

*   不退回他们已经评价过的相同配对

蒙戈系列

*   用户
*   类别
*   帖子
    *   类别 ID
    *   评分（帖子中的嵌入集合）

我将如何在 Mongo 中执行此操作...如果更容易，我应该将其中一些数据从 mongo 移到另一个数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:31:08.687

我认为您可以通过两个查询来实现这一点。首先，您需要使用聚合框架并对 Posts 集合进行 map reduce 操作。在 map 阶段使用类别 id 作为键并将 post id 发送到 reducer。

在 reduce 阶段，从每个类别中选择两个随机 id。在 map reduce 的末尾，您将获得一个`Post`id 列表。`Posts`然后从集合中检索这些帖子。

在文档中添加一个`ratedBy`字段`Post`，当用户对帖子进行评分时，将他或她的用户名添加到 ratingBy 字段。然后首先将该字段用作 map reduce 命令的过滤器，这样您就不会将已评级的文档带给用户。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:45:38.590

是的。非常有趣的问题。我的建议是`randomVal`在您的邮寄文件上放置一个字段。然后就可以排序了`{CategoryId: 1, randomVal: 1}`。结果将是一个游标，该游标将所有帖子分组，`CategoryId`但在该分组内随机分组。如果您从概念上将其视为一个数组，您可以选择所有偶数索引的帖子，并将它们与奇数邻居配对，以获得类别内的唯一随机对。

我认为如何从这个列表中选择随机对需要一些实验，但我的直觉是，最好的方法是有一个单独的进程，定期缓存一组对，这些对由单独的`randomVal2`. 面向用户的查询将一次仅通过此对集合 100 递增。

# javascript - 需要一个关于 Cometd 2 + Dojo 1.8 + Chat 的工作示例

> ID：14481121
> 
> 赞同：0
> 
> 时间：2013-01-23T13:40:04.040
> 
> 标签：javascript, dojo, chat, cometd

我正在寻找关于 Cometd 2 和 Dojo 1.8 聊天的示例，

任何人都可以帮助我吗？

我参考了cometd.org网站，我理解了cometd的概念。但是，我无法实际应用它。

我只是困惑何时创建频道，如何将消息从 javascript 发布到 java？

我正在使用 Eclipse Indigo IDE、Jboss 7.x 服务器

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T14:31:04.513

我建议您先阅读[CometD 概念](http://docs.cometd.org/reference/#concepts)，然后阅读和学习[CometD 教程](http://docs.cometd.org/tutorials/)。

完成这两个之后，您可以阅读和研究使用 Dojo 编写的聊天应用程序，该应用程序包含在 CometD 发行版中，其代码在[此处](https://github.com/cometd/cometd/tree/2.5.x/cometd-javascript/examples-dojo)。

# mysql - MySQL 给出错误 1436，后跟 1062

> ID：14481130
> 
> 赞同：0
> 
> 时间：2013-01-23T13:40:19.117
> 
> 标签：mysql, sql, import

我正在尝试导入数据库并且遇到了一些我无法解决的错误。

首先我运行以下命令：

```
/my/location/mysql/bin/mysql -u root -p < my-db-schema.sql 
```

然后当我运行时：

```
/my/location/mysql/bin/mysql -u root -p < my-db-data.sql 
```

但是在给出我的密码后，我得到：

```
ERROR 1436 (HY000) at line 80: Thread stack overrun: 5850 bytes used of a 142083 byte stack, and 127888 bytes needed. Use 'mysqld -O thread_stack=#' to specify a bigger stack. 
```

我尝试再次运行它，现在我得到：

```
ERROR 1062 (23000) at line 25: Duplicate entry '1' for key 'PRIMARY' 
```

如果有人能解释为什么会发生这种情况，或者如何解决，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:41:09.007

所以第一个错误与 MySQL 的 thread_stack 值有关。它需要在**/etc/my.cnf**的配置文件中增加。

请务必在增加 MySQL 实例后重新启动它。

第二个错误与第一个错误有关，因为它似乎是由于您第一次运行命令时系统已经有要导入的数据。摆脱重复键错误的最简单方法是删除您导入的所有数据，然后重试。

希望有帮助

# html - 流体内容下推固定的右侧边栏

> ID：14481132
> 
> 赞同：0
> 
> 时间：2013-01-23T13:40:33.183
> 
> 标签：html, css

看看这个网址： http: [//kraken.ikas.sk/](http://kraken.ikas.sk/)

并比较： http: [//kraken.ikas.sk/autorizo​​vany -servis](http://kraken.ikas.sk/autorizovany-servis)

为什么我的固定右侧边栏在内容下方？CSS似乎完全一样。我需要固定的侧边栏（180 像素）和流畅的内容。如果右侧没有侧边栏，则内容必须向右拉伸到全宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:06:47.620

这应该有助于：

```
#main_content {
    float: left;
    max-width: 550px; // change this line
    overflow: hidden;
    padding: 0 10px;
    width: auto;
} 
```

# jquery - 来自 AJAX JQUERY 调用 XML 文件的“未定义”错误响应

> ID：14481134
> 
> 赞同：1
> 
> 时间：2013-01-23T13:40:41.693
> 
> 标签：jquery, ajax

我正在做一个原型，它将从 Web 资源位置获取各种 XML，然后将它们显示在 DOM 上。

这是功能

```
 function readXML()
{
    $.ajax({
        type: "GET",
        url: "https://collaboratewiki.com/wikiattachments/61736956/engineer.xml",
        dataType: "xml",
        success: function(xml) 
        {
            window.alert("success")
        },
        error: function(xhr,err)
        {
            alert("readyState: "+err.readyState+"\nstatus: "+err.status);
            alert("responseText: "+err.responseText);
        }
});

} 
```

当我调用此函数时，它会出现错误情况，但我在消息输出中得到“未定义”。

![在此处输入图像描述](../Images/76f468cf9f53b7d9f84b13cc56e571cd.png)

我需要找出为什么我无法获取我的 XML，但是这个输出根本没有帮助。

如何获取 AJAX 调用发生的错误的所有详细信息？

我试过代替 "err.responseText" ， "xhr.responseText" 但我仍然得到未定义的。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T13:43:38.323

从[文档](http://api.jquery.com/jQuery.ajax/)中：

> 错误
> 
> 类型：函数（jqXHR jqXHR，字符串 textStatus，字符串 errorThrown ）

第二个和第三个参数是字符串，而不是对象，所以它们不会有额外的属性。您尝试获取的某些内容（例如`readyState`）将可从`xhr`代码中的对象获得，而不是从`err`（这只是一个字符串）获得。

您可能想尝试这样的事情：

```
error: function(xhr,textStatus,err)
{
    console.log("readyState: " + xhr.readyState);
    console.log("responseText: "+ xhr.responseText);
    console.log("status: " + xhr.status);
    console.log("text status: " + textStatus);
    console.log("error: " + err);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T09:24:52.640

```
 $("#box #tozihat .x1").click(
                function()
                {
                    var id=0
                    var length='';
                    id=$(this).attr('id');
                    length=$("#bordersabad #"+id+"").length;

                    $.ajax({
                        type:'post',
                        url:"sabad.php",
                        data:{idmahsool:id}
                        })
                        .done(function(){

                            if(length==1){
                                var tedad=0;
                                tedad=$("#bordersabad #"+id+"#tedad").html();
                                alert(tedad);
                            }
                            else
                            {
                            }

                        })

                }) 
```

# android - 将屏幕内容移到屏幕android之外的左侧

> ID：14481142
> 
> 赞同：1
> 
> 时间：2013-01-23T13:41:02.110
> 
> 标签：android, layout

有没有办法将整个屏幕内容移动到屏幕边界之外，例如左侧的标题栏和所有内容，我试过了

```
content = ((LinearLayout) act.findViewById(android.R.id.content)
                .getParent()); 
```

获取屏幕内容并为其添加边距

```
FrameLayout.LayoutParams pr = (android.widget.FrameLayout.LayoutParams) content
                    .getLayoutParams();
            pr.rightMargin = xOffset;
            content.setLayoutParams(pr); 
```

但它不起作用，边距出现但内容没有移动，只是调整大小以适应屏幕，有人知道如何简单地做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:43:37.980

您可以将边距设置为负 (-) 值。例如，如果您希望布局向上移动，请使用：

```
android:marginTop = "-50dip or more u can put" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:43:08.583

您是否要在视图之间切换？例如，将该布局移出屏幕以显示另一个？如果是这样，您应该考虑使用一个名为的小部件`ViewFlipper`，它将完全按照您的需要进行。它也可以是动画等。

[http://developer.android.com/reference/android/widget/ViewFlipper.html](http://developer.android.com/reference/android/widget/ViewFlipper.html)

# c# - Asp.NET 没有应用我的 CSS 文件

> ID：14481147
> 
> 赞同：4
> 
> 时间：2013-01-23T13:41:17.910
> 
> 标签：c#, asp.net, .net, css

我的网站位于文件夹**/website**

在浏览器中它通过 url 打开`http://localhost:52912/website/`

我的默认页面和母版页都位于根目录中

在 Default.aspx 我包括我的母版页，如：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default"  MasterPageFile="WTF.master" %> 
```

在我的 WTF.mater 中，我包含 css 文件：

```
<link href="~/css/reset.css" runat="server" rel="stylesheet" type="text/css" media="screen" /> 
```

当我运行该站点并在 mozilla 中查看他的源代码时，我看到 css 文件链接为：

```
<link href="css/reset.css" rel="stylesheet" type="text/css" media="screen" /> 
```

所以，完整的网址将`http://localhost:52912/website/css/reset.css`是正确的

-css 文件存在

-萤火虫中没有错误，例如“404 not found - reset.css”

- 调试项目时没有错误

我什至无法通过浏览器 ( `http://localhost:52912/website/css/reset.css`) 中的直接链接或 mozilla 源代码查看器中的链接打开此文件

它返回`http://localhost:52912/website/default.aspx?ReturnUrl=%2fcss%2freset.css` 并且我保持在同一页面上

我尝试了一大堆来自谷歌的各种组合和建议 - 没有任何帮助

什么..？？？

**已解决：** 通过添加

```
<location path="css">
        <system.web>
            <authorization>
                <allow users="*" />
            </authorization>
        </system.web>
    </location> 
```

在 web.config 中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T13:45:32.310

那是因为您打开了表单身份验证，并且您没有允许该`css`文件夹公开访问。尝试将此添加到 web.config：

```
<location path="css">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:45:10.070

看来您有身份验证问题。你能检查或发布你的 web.config 文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:44:18.280

从链接 href 中删除波浪号 (~)。它应该只是

```
<link href="/css/reset.css" runat="server" rel="stylesheet" type="text/css" media="screen" /> 
```

# php - 使用 php-sdk graph api 将视频上传到 facebook

> ID：14481148
> 
> 赞同：0
> 
> 时间：2013-01-23T13:41:18.973
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我在 facebook 文档中看到了一个示例。

```
$post_url = "https://graph-video.facebook.com/me/videos?"
. "title=" . $video_title. "&description=" . $video_desc 
. "&". $access_token; 
```

但我想在 facebook php-sdk 中执行此操作。

```
$facebook->api('/me/videos/'); 
```

但似乎视频服务器是[https://graph-video.facebook.com](https://graph-video.facebook.com)。那么我如何使用 php-sdk 在图形 api 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:29:30.427

through graph its much more simple

To a group you can do this:

```
<?php
$app_id = "YOUR_APP_ID";
$app_secret = "YOUR_APP_SECRET";
$my_url = "YOUR_POST_LOGIN_URL";
$video_title = "TITLE FOR THE VIDEO";
$video_desc = "DESCRIPTION FOR THE VIDEO";
$group_id = "YOUR_GROUP_ID";

$code = $_REQUEST["code"];

echo '<html><body>';

if(empty($code)) {
   $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
     . $app_id . "&redirect_uri=" . urlencode($my_url)
     . "&scope=publish_stream";
    echo('<script>top.location.href="' . $dialog_url . '";</script>');
}

$token_url = "https://graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&client_secret=" . $app_secret
    . "&code=" . $code;
$access_token = file_get_contents($token_url);

$post_url = "https://graph-video.facebook.com/" . $group_id . "/videos?"
    . "title=" . $video_title. "&description=" . $video_desc
    . "&". $access_token;

echo '<form enctype="multipart/form-data" action=" '.$post_url.' "  
     method="POST">';
echo 'Please choose a file:';
echo '<input name="file" type="file">';
echo '<input type="submit" value="Upload" />';
echo '</form>';

echo '</body></html>';
?> 
```

to a page you can do this

```
<?php
$app_id = "YOUR_APP_ID";
$app_secret = "YOUR_APP_SECRET";
$my_url = "YOUR_POST_LOGIN_URL";
$video_title = "TITLE FOR THE VIDEO";
$video_desc = "DESCRIPTION FOR THE VIDEO";
$page_id = "YOUR_PAGE_ID"; // Set this to your APP_ID for Applications

$code = $_REQUEST["code"];

echo '<html><body>';

if(empty($code)) {
  // Get permission from the user to publish to their page. 
  $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&scope=publish_stream,manage_pages";
  echo('<script>top.location.href="' . $dialog_url . '";</script>');
} else {

  // Get access token for the user, so we can GET /me/accounts
  $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
      . $app_id . "&redirect_uri=" . urlencode($my_url)
      . "&client_secret=" . $app_secret
      . "&code=" . $code;
  $access_token = file_get_contents($token_url);

  $accounts_url = "https://graph.facebook.com/me/accounts?" . $access_token;
  $response = file_get_contents($accounts_url);

  // Parse the return value and get the array of accounts we have
  // access to. This is returned in the data[] array. 
  $resp_obj = json_decode($response,true);
  $accounts = $resp_obj['data'];

  // Find the access token for the page to which we want to post the video.
  foreach($accounts as $account) {
       if($account['id'] == $page_id) {
         $access_token = $account['access_token'];
         break;
       }
  }

  // Using the page access token from above, create the POST action
  // that our form will use to upload the video.
  $post_url = "https://graph-video.facebook.com/" . $page_id . "/videos?"
      . "title=" . $video_title. "&description=" . $video_desc
      . "&access_token=". $access_token;

  // Create a simple form 
  echo '<form enctype="multipart/form-data" action=" '.$post_url.' "  
       method="POST">';
  echo 'Please choose a file:';
  echo '<input name="file" type="file">';
  echo '<input type="submit" value="Upload" />';
  echo '</form>';
}

echo '</body></html>';
?> 
```

# wpf - 标签不改变内容

> ID：14481159
> 
> 赞同：0
> 
> 时间：2013-01-23T13:41:46.313
> 
> 标签：wpf, label

我有带有标签 MainWindow.xaml 的 WPF 应用程序：

```
<Label Grid.Row="1" Margin="0,17,0,16" Name="lblLoadDriver" VerticalAlignment="Center"  HorizontalAlignment="Left" Height="10" Width="10"></Label> 
```

在 MainWindow.xaml.cs 中有代码，单击按钮后：

```
lblLoadDriver.Content = ""+DriverInstance.GetType().ToString(); 
```

当我调试时，我将鼠标放在“base”部分下的 lblLoadDriver 浏览值上，看到内容是 AS-I-NEED .. 我看到文本没问题，但它没有改变 GUI 上的文本。
为什么是这样 ？我需要刷新gui还是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:46:20.103

也许是因为`Width="10"`？

也是`Height="10"`一个奇怪的想法。

# java - 如何确定在java中启动应用程序的文件的路径

> ID：14481160
> 
> 赞同：0
> 
> 时间：2013-01-23T13:41:46.540
> 
> 标签：java, filepath

我想问你是否找到文件路径...

我有，或者我会有与我的应用程序关联的文件，但我不知道如何找出初始化打开我的应用程序的文件路径。

例如：如果我在 excel 文件“file.xlx”上单击 windows 环境，windows 将使用此文件“file.xls”打开 excel 应用程序，我想要完全相同。在我的应用程序打开后，我想知道初始化我的应用程序以启动的文件路径...

我希望我的问题是可以理解的，我为我糟糕的英语道歉.. :)

编辑：

我尝试添加另一个示例...

我尝试描述一些逻辑操作......

1 - 没有运行，只有 Windows - 我希望 :)

2 - 用户单击硬盘中某处的某个文件（该文件可以有不同的名称和不同的位置）

3 - 这个带有一些扩展名的文件与我的应用程序相关联

4 - 应用程序自动找出用户点击的文件（谁调用了我的应用程序的启动）并在其他工作中使用此文件路径......

我认为这应该像我启动控制台应用程序时那样。有一些论点....但是这个论点我必须从某个窗口位置获得。就像我点击file.txt，windows会打开notepad，notepad会自动打开这个file.txt，或者我点击file.dbf，windows会用这个文件打开foxpro

我想点击file.xxx，我的应用程序将自动打开并使用这个文件，所以我认为必须有某种方法来获取我点击的这个文件位置......

我希望这有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:49:41.497

查看java系统属性[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)，你可能想要user.dir

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:04:01.960

我认为您可以在安装应用程序时设置操作系统，如注册表。

```
String osName = System.getProperty("os.name") ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:11:28.227

我认为您需要的是这样的程序，这将计算您的文件在给定目录中的存在

```
package fileSearch;
import java.io.File;
import java.io.FilenameFilter;
public class fileSearch {

    /**
     * @param args
     */
    public static void main(String[] args) {
        fileSearch obj = new fileSearch();
        obj.finder("program.txt");
        for(int i=0;i<obj.finder("C:/Users/hussain.a/Desktop").length;i++)
        {
            System.out.println(obj.finder("C:/Users/hussain.a/Desktop")[i].getName());
        }
    }
    public File[] finder( String dirName){
        File dir = new File(dirName);

        return dir.listFiles(new FilenameFilter() { 
                 public boolean accept(File dir, String filename)
                      { return filename.endsWith(".txt"); }
        } );

    }

} 
```

现在由你来申请你想要的目录，如果你想让它和windows程序完全一样，那么你每次都必须使用根目录并将文件名作为参数传递给这个程序中的“.txt”

希望它有用，其余的取决于你来实现它

# xsd - XML 是否有可能具有有效的模式但没有 XML 文档？

> ID：14481166
> 
> 赞同：2
> 
> 时间：2013-01-23T13:41:58.833
> 
> 标签：xsd, dtd, relaxng, schematron

我怀疑是否有一些模式具有有效模式但没有一些 XML 文档？如果有，你能给我举一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:12:44.707

是的，可以定义有效文档集为空集的模式——至少在我所知道的每种模式语言中，并给出“有效文档”的合理定义。

在 XSD、RNG 和 DTD 中，可能最简单的这种模式是不声明任何元素的模式。在 XSD 中，这可以这样表达：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"/> 
```

通过声明具有不可满足类型的元素，一个简单的非空模式可能是不可满足的：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="unsatisfiable">
    <xs:complexType>
      <xs:choice/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

由于 xs:choice 要求至少有一个选择的孩子与输入匹配，因此没有孩子的选择是不可满足的。如果需要选择，就像这里一样，那么整个类型是无法满足的。

空选项也可以在 Relax NG 中使用，但不能在 DTD 中使用。

在 Relax NG 中，还可以在没有有效实例的模式中声明可满足元素，只要根元素或根元素的至少一个必需的后代是不可满足的。相比之下，在 XSD 中，一旦有了任何可满足的元素声明或类型定义，您就不再有空语言：XSD 无法在模式中说明验证时最外层元素必须是什么。

在 XSD、RNG 和 DTD 中，还可以通过要求元素包含未声明的元素来使元素无法满足。在 DTD 表示法中：

```
<!ELEMENT unsatisfiable (undeclared) > 
```

此外，在任何这些语言中，都可以定义只能由无限文档满足的模式：

```
<!ELEMENT e (e) > 
```

在 XSD 中（以及在使用 XSD 数据类型的 Relax NG 中）也可以定义空的简单类型：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="unsatisfiable">
    <xs:simpleType>
      <xs:restriction base="xs:integer">
        <xs:minExclusive value="0"/>
        <xs:maxExclusive value="1"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:element>
</xs:schema> 
```

XSD 禁止定义空类型的某些方法：例如，将最小和最大排他值设置为相同的值，将引发 XSD 错误。（这里的理由是，WG 中的大多数人认为空类型*没有意义*，并且还误以为它们可以有效地阻止空类型的定义，至少在不涉及正则表达式模式的情况下。作为示例显示，他们错了。）在 XSD 1.1 中，定义不可满足的简单类型的最简洁和最明显的方法可能是定义一个空联合类型，但更简单的方法是使用预定义`xs:error`类型（它本身已定义作为一个空联合）。这在 XSD 1.0 中是不可能的，它要求联合至少有两种成员类型。

# sql-server - Asp.NET MVC 4 项目中的 Sql Server LocalDB 问题

> ID：14481169
> 
> 赞同：2
> 
> 时间：2013-01-23T13:42:01.377
> 
> 标签：sql-server, entity-framework, asp.net-mvc-4, localdb

每当我尝试打开 db_name.mdf 文件时，都会出现以下错误：

```
The database '{path}\db_name.MDF' cannot be opened because it is version 706\. This server supports version 662 and earlier. A downgrade path is not supported. Could not open new database 'db_name.MDF'. CREATE DATABASE is aborted. An attempt to attach an auto-named database for file {$path}\db_name.mdf failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share. 
```

连接字符串如下：

```
<add name="PasswordDBContext" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\db_name.mdf;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

我正在 Visual Studio 中开发一个 asp.net mvc 4 项目。

非常感谢任何有助于解决问题的帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:02:38.833

LocalDB 是[SQL 2012 Express 中引入的一项新功能](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)-如果您需要以这种方式使用 MDF，则需要[安装 SQL 2012 Express LocalDb 。](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)

[Krzysztof Kozielczyk在](https://stackoverflow.com/users/260391/krzysztof-kozielczyk)[这里](http://blogs.msdn.com/b/sqlexpress/)在 LocalDB 上发表了几篇博客文章- 特别注意在“完整 IIS”下运行时的问题。

IMO 使用 LocalDb 和 ASP.NET 仅适用于开发人员机器配置 - 即，当您准备好将（代码优先？）MVC 4 应用程序部署到测试或生产环境时，您应该考虑`ASPNETDB.MDF`更永久地附加到 SQL 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-30T16:49:44.913

您不能在 SQL Server 2012 Management Studio 中附加 MVC 4 localDB。您需要直接连接。

打开 SQL Server 2012 管理工作室。您可以在此处下载免费的快速版本：

[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

在安装过程中，请确保检查要安装的 localDB 组件。

安装后，打开 Management Studio 并出现“连接到服务器”对话框。

在服务器名称文本框中输入 (LocalDb)\v11.0。使用 Windows 身份验证并单击连接。

您的 asp 数据库将显示在管理器中。然后，您可以将其编写为您想要的任何内容并编辑数据库并对您的网络配置中的连接字符串进行适当的更改。

请记住，如果您使用的是 VS 2013 的 MVC Internet 模板中使用的 Code First，您需要检查应用程序启动文件夹中的数据库创建代码。

创建 LocalDB 是为了让您可以创建数据驱动的 Web 应用程序，而无需在开发机器上运行完整版本的 SQL Server 的开销。部署到生产服务器时，请迁移到完整的 SQL Server 实例。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:47:15.717

将您的数据库**连接字符串**设置为本地安装的数据库，如下所示。

网络配置：

```
<add name="ContextName" connectionString="Data Source=ServerName;Initial Catalog=DBCatalogName;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework"
       providerName="System.Data.SqlClient" /> 
```

# jquery - 使 jQuery mobile 仅适用于菜单而不是整个网站

> ID：14481174
> 
> 赞同：1
> 
> 时间：2013-01-23T13:42:08.333
> 
> 标签：jquery, css, jquery-mobile, master-pages, media-queries

我正在使用媒体查询创建响应式网页设计。对于移动版本，我使用 jquery mobile 的下拉菜单。

我已经包含了所需的 CDN 链接，包括 jquery-mobile.css。问题是这个 CSS 会自动应用于我整个网站的所有标签。

菜单栏位于母版页中，因此 .js 和 .css 源文件链接也在该页中。

**我希望 jquery mobile css 仅应用于菜单栏而不是整个网站**

我对此做了很多研究，但没有运气。从过去的三天开始，我一直被困在这里。有人可以帮帮我吗？

**编辑：**

```
 <head id="Head1" runat="server">

          <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="-1" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no,width=device-width,height=device-height" />
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
                <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script type="text/javascript">
    $(document).bind('mobileinit',function(){
            $.mobile.page.prototype.options.keepNative = "select, input, a, div, p";
    });    
</script>
<script src="../Scripts/jquery.mobile-1.2.0.js"></script>
        <link rel="stylesheet" href="../Styles/WebStyles.css" type="text/css" />

        <title>Management Software, Space Rental process for Antique Malls, POS Software</title>
        <asp:ContentPlaceHolder ID="head" runat="server">
        </asp:ContentPlaceHolder>
</head> 
```

这是在 Gajotres 建议后 head 标签中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:50:22.053

这可能是个问题，因为您找不到防弹解决方案。

1.  告诉 jQuery Mobile 不要对选定元素应用样式：

    ```
    $(document).bind('mobileinit',function(){
            $.mobile.page.prototype.options.keepNative = "select, a, input";
    }); 
    ```

    示例：http: [//jsfiddle.net/Gajotres/jjETe/](http://jsfiddle.net/Gajotres/jjETe/)

    注意：**mobileinit**必须在 jQuery Mobile 库初始化之前在 HEAD 中初始化，如下所示：

    ```
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script>
        $(document).bind('mobileinit',function(){
                $.mobile.page.prototype.options.keepNative = "select, input";
        });    
    </script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
    ```

2.  另一种解决方案是在您希望保持原生状态的所有元素上使用 data-role="none" 属性。在这里您可以找到有关此解决方案的更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/forms/docs-forms.html](http://jquerymobile.com/demos/1.2.0/docs/forms/docs-forms.html)

3.  还有第三种解决方案，但我从未设法使其工作。自定义 jQuery Mobile 框架并仅使用您想要使用的小部件：http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)。只需选择您想要的。

所以最好的解决方案是使用组合点 1\. 和 2。防止所有非下拉元素的样式，并在应该看起来原生的下拉元素上使用 data-role="none"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:51:17.830

在我的情况下，经过大量研究，**我发现解决我的问题的最佳方法是使用 firebug 找出影响哪个元素的样式，然后在 jQuery-mobile.css 文件中删除它（你必须下载它而不是访问托管文件）。**我花了一段时间才做到这一点。

此外，IMHP 最好使用单个框架来执行所有花哨的 jQuery 工作，而不是使用多个框架，因为找到冲突的根源非常耗时且累人。

我正在将我所有的 jquery 插件转换为在 jQuery mobile 上工作，到目前为止一切顺利。虽然这需要时间，但 jQuery mobile 很棒，我觉得值得转换。UI 非常适合我目前正在开发的网站。

最后，吸取教训。未雨绸缪。

# vim - Vundle 和 NeoBundle 有什么区别？

> ID：14481177
> 
> 赞同：66
> 
> 时间：2013-01-23T13:42:15.197
> 
> 标签：vim

我想有一种管理vim插件的好方法。我找到[了 NeoBundle](https://github.com/Shougo/neobundle.vim)和[Vundle](https://github.com/gmarik/vundle)。它们之间的主要区别是什么？我知道 NeoBundle 是 Vundle 的一个分支，但是是什么让它与众不同呢？

你用什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-24T02:39:37.733

[这](http://vim-jp.org/vim-users-jp/2011/10/25/Hack-238.html)是`NeoBundle`Shougo 的作者写的一篇文章（日文），关于他为什么写`NeoBundle`以及`NeoBundle`与`Vundle`.

实际上，`NeoBundle`是`Vundle`. Shougo 在 fork 的一个 fork 中添加了一些功能，`Vundle`但最近发现他无法跟上上游`Vundle`的开发，因此他将 fork 到了一个新的插件，现在称为`NeoBundle`.

差异总结如下：

1.  将命令从 重命名`Vundle`，替换`Bundle`为`NeoBundle`。（例如：`BundelInstall`到`NeoBundleInstall`）。
2.  添加对[vital.vim的支持，这是一个由](https://github.com/vim-jp/vital.vim)[thinca](https://github.com/thinca)编写的vim 实用程序库。
3.  `Neobundle`即使您设置`shellslash`了默认值以外的选项，也可以使用。
4.  添加对 vimproc 的支持，这是[Shougo](https://github.com/Shougo/vimproc)编写的启动器插件。
5.  [为Shougo](https://github.com/Shougo/unite.vim)编写的 unite.vim添加一个接口，他还指出这是编写的主要动机`NeoBundle`。
6.  添加对作为 Subversion/Mercurial 存储库托管的插件的支持，但它现在仍然是一个实验性功能。
7.  （**更新**）现在添加了一个没有`NeoBundle`的延迟加载功能。`Vundle`它允许您在某个用户定义的时间点加载插件，而不仅仅是在`.vimrc`加载的 vim 初始化期间。

我使用`vundle`它是因为它满足了我的需要（我以前使用过病原体）。不过你可以试试看`NeoBundle`。

* * *

( **UPDATE** )`NeoBundle`现在已经停止了积极的开发，将被[dein.vim](https://github.com/Shougo/dein.vim)取代，这是 Shougo 的另一个全新的插件管理器。作为旁注，您还可以查看我当前正在使用的[vim-plug 。](https://github.com/junegunn/vim-plug)

# c - 如何在 C++ 中向 system() 函数添加路径参数

> ID：14481179
> 
> 赞同：0
> 
> 时间：2013-01-23T13:42:24.870
> 
> 标签：c, firewall

我想添加新的规则windows防火墙，我`system()`在c中使用这个功能

通常 cmd 命令是

```
netsh advfirewall firewall add rule name="myp" dir=in action=allow 
program="C:\test\Project1.exe" 
```

所以我想知道如何将它插入到`system();` 功能中我尝试了但没有成功，我的意思是双引号不起作用

`system("netsh advfirewall firewall add rule name="myp" dir=in action=allow program="C:\\test\\Project1.exe"");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:43:30.687

您只需要转义双引号 -`\"`在字符串中使用它。

有关其他转义序列的列表，请参见[此处](http://en.cppreference.com/w/cpp/language/escape)。

你的命令就会变成

```
system("netsh advfirewall firewall add rule name=\"myp\" dir=in action=allow program=\"C:\\test\\Project1.exe\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:43:54.897

用于`\`转义引号。

```
system("netsh advfirewall firewall add rule name=\"myp\" dir=in action=allow program=\"C:\\test\\Project1.exe\""); 
```

# c++ - 其他对象中的对象真的共享相同的地址吗？

> ID：14481180
> 
> 赞同：5
> 
> 时间：2013-01-23T13:42:25.837
> 
> 标签：c++, object, memory

我最近在做一个项目时遇到了这个问题，这让我有点困惑。所以我决定写一个测试程序来得到一个确定的答案：

```
#include <iostream>

using namespace std;

class layer3{
public:
    layer3(){}
    ~layer3(){}     
private:

};

class layer2{
public:
    layer2(){}
    ~layer2(){}

    layer3* GetBAddress(){return &b;}
private:
    layer3 b;
};

class layer1{
public:
    layer1(){}
    ~layer1(){}

    //returns the address of a, which is a 'layer2' object
    layer2* GetaAddress(){return &a;}
    //returns the address of b, which is is a layer 3 object
    layer3* GetDeepBAddress(){return a.GetBAddress();}
private:
    layer2 a;

};

int main(){

    layer1 t;
    cout << &t << "  : layer 1's address" << endl;
    cout << t.GetaAddress() <<  "  : layer 2's address" <<endl;
    cout << t.GetDeepTLAddress() <<  "  : layer 3's address" <<endl;

} 
```

该程序创建 3 个对象。layer2 在 layer1 内部创建，layer3 在 layer2 内部创建。然后我调用来获取 layer1、layer2 和 layer3 的地址，就像之前发生的那样，这是输出：

```
$ ./a.exe
0x28ac4f  : layer 1's address
0x28ac4f  : layer 2's address
0x28ac4f  : layer 3's address 
```

这三个对象如何共享内存中的同一个位置？如果我将这个程序扩展为 50 层（对象）会怎样？还是一万？我不太确定这怎么可能。有人可以让我代替我解释这里发生了什么吗？

**编辑：**也许是因为我在私有而不是在对象的构造函数中实例化了对象？呸，我不知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T13:47:39.940

最明确的答案是 C++ 标准给出的答案：

> 如果一个对象是另一个的子对象，或者如果至少一个是大小为零的基类子对象并且它们属于不同类型，则两个不是位域的对象可能具有相同的地址；否则，它们应具有不同的地址。

也就是说，如果一个对象是另一个对象，它们可能具有相同的地址。

在 C++11 中，*标准布局结构*（尽管它的名称也可能是`class`）对象的第一个成员保证与对象本身具有相同的地址：

> 指向标准布局结构对象的指针，使用 a 进行适当转换`reinterpret_cast`，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。

由于您的类都是标准布局，因此您观察到的行为由 C++11 保证。

在 C++03 中，规则类似，但适用于*POD 结构*类型，而不是*标准布局结构*类型。但是，您的类不是*POD 结构*类型，因为它们具有用户定义的析构函数。因此，您在此处看到的行为*不受*C++03 的保证。

那么为什么会发生这种情况呢？好吧，一个类实际上是一种将一些数据组合在一起并提供对该数据的操作的方法。考虑一个只包含这样的`int`类：

```
class A
{
  int x;
}; 
```

所有这个类是由那个组成的`int`。当你创建一个 type 的对象时`A`，你真正要做的就是为其内部分配足够的空间并初始化它们（或者在这种情况下，不初始化它们）。假设我们创建了两个实例`A`：

```
A a1;
A a2; 
```

我们的记忆中有什么？你可以想象它看起来像这样：

```
 a1     a2
┌──────┬──────┐┄┄
│  A   │  A   │
└──────┴──────┘┄┄
Memory -------> 
```

如果我们知道`A`它只包含一个`int`- 也就是说，一个`A`对象实际上*只不过*是一个`int`（可能除了一些填充） - 那么我们知道如果我们进一步分解它，内存实际上看起来像这样：

```
 a1     a2
┌──────┬──────┐┄┄
│ int  │ int  │
└──────┴──────┘┄┄
Memory -------> 
```

您可以在这里看到`A`和`int`都具有相同的地址，因为`int`是类型对象的子对象`A`。如果`A`同时包含 an`int`和 a `char`，它可能看起来像这样：

```
 a1            a2
┌──────┬──────┬──────┬──────┐┄┄
│ int  │ char │ int  │ char │
└──────┴──────┴──────┴──────┘┄┄
Memory -------> 
```

我们知道这`char`将有一个更高的地址，`int`因为标准再次这样说：

> 分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。

请注意，子对象*不一定*与包含在其中的对象共享其地址，即使它是第一个。这完全取决于编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:47:48.307

在内存中，一个类的实例（通常）占用其数据成员的空间（加上一个虚拟表指针或其他实现定义的位）。

从纯粹的数据成员的角度来看，一个实例`layer1`只包含一个实例`layer2`，因此存储在其中的第一个元素（与实例本身`layer1`具有相同地址的元素）自然是实例。相同的推理适用于和。`layer1``layer2``layer2``layer3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:46:59.603

我没有发现你所观察到的任何奇怪之处。一个对象是由其成员在内存中一个接一个地写入的，因此一个对象的地址和它的第一个成员的地址是相同的。不管你有多少层，都会这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:47:05.943

这就是对象在内存中的存储方式。C++ 只对成员对象的排序方式做出一些保证——很多东西取决于编译器——对齐、切换成员（受限制）。为什么不需要添加内存或偏移成员？如果地址不同，您将拥有未使用内存的对象。

作为测试，您可以添加一个`virtual`函数`layer2`并查看会发生什么。

# c++ - Boost 序列化 IO 错误

> ID：14481187
> 
> 赞同：0
> 
> 时间：2013-01-23T13:42:51.717
> 
> 标签：c++, serialization, boost

在下面的代码中，我尝试将两个对象写入一个没有扩展名的文件。问题最初出现在写入阶段，因为实际上没有任何内容写入文件。然后是第二部分；阅读阶段，当使用以下行打开文件时会导致异常：

boost::archive::text_iarchive ia(ifs);

我从 boost 示例 1 中获取了这个。我还尝试在此页面[Boost Serialization multiple objects上遵循此问题的第三个答案](https://stackoverflow.com/questions/4973473/boost-serialization-multiple-objects)

```
 #include <fstream>

// include headers that implement a archive in simple text format
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
/////////////////////////////////////////////////////////////
// gps coordinate
//
// illustrates serialization for a simple type
//
class gps_position
{
    private:
        friend class boost::serialization::access;
    // When the class Archive corresponds to an output archive, the
    // & operator is defined similar to <<.  Likewise, when the class Archive
    // is a type of input archive the & operator is defined similar to >>.
        template<class Archive>
        void serialize(Archive & ar, const unsigned int version)
        {
            ar & degrees;
            ar & minutes;
            ar & seconds;
        }
        int degrees;
        int minutes;
        float seconds;
    public:
        gps_position(){};
        gps_position(int d, int m, float s) :
        degrees(d), minutes(m), seconds(s)
    {}
};
int main()
{
    // create and open a character archive for output
    std::ofstream ofs("filename",std::ios::app);

    // create class instance

    gps_position g0(35, 59, 24.567f);
    gps_position g1(35, 59, 88.567f);
    // save data to archive
    //{
        boost::archive::text_oarchive oa(ofs);
        // write class instance to archive
        size_t number_of_objects = 2;
        oa << number_of_objects;
        oa << g0;
        oa << g1;
        // archive and stream closed when destructors are called
   // }

    // ... some time later restore the class instance to its orginal state

    gps_position newg0;
    gps_position newg1;
   // {
        // create and open an archive for input
        std::ifstream ifs("filename");
        boost::archive::text_iarchive ia(ifs);
        // read class state from archive

        ia >> number_of_objects;
        ia >> newg0;
        ia >> newg1;
        // archive and stream closed when destructors are called
    //}

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:20:57.643

取消注释围绕写作阶段的大括号；否则，`std::ofstream`在尝试阅读之前，档案和档案都不会关闭。

正如评论中的几个人所提到的，需要刷新和关闭流，这是在销毁您的实例时自动完成的`std::ofstream`；在这种情况下，当遇到写作阶段的右大括号时。

# log4j - 分离 Tomcat 和应用程序日志文件

> ID：14481190
> 
> 赞同：1
> 
> 时间：2013-01-23T13:42:54.963
> 
> 标签：log4j

我正在尝试将 Tomcat 和应用程序日志分开。我希望将 Tomcat 日志写入`catalina.out`，并将应用程序日志写入`app.log`文件。但是，我的应用程序日志同时写入 catalina.out 和 app.log 文件中。

如何指示 Tomcat 将日志写入单独的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:22:03.117

您可以在 log4j.xml 或 log4j.properties 文件中指定应用程序的包，以将日志消息写入单独的文件。您可以看到一个示例 log4j.xml，它根据包将日志消息写入文件附加程序`com.urpackage`。您可以将其替换为您的应用程序特定包。

[您可以在此处](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)了解更多信息

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<appender name="FileAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="log_file.log" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{DATE} %-5p %-15c{1}: %m%n" />
    </layout>
</appender>

<logger name="com.urpackage" additivity="false">
    <appender-ref ref="FileAppender" />
</logger>

<root>
    <level value="debug" />
</root> 
```

# sql - 在跨越闰年的期间分组跨多年的选择语句

> ID：14481192
> 
> 赞同：2
> 
> 时间：2013-01-23T13:43:00.970
> 
> 标签：sql, sql-server, tsql, leap-year

我有这个查询，它选择跨越 iMAXYears 直到 2012 年 11 月 30 日的所有记录：

```
 SELECT sum([AllocatedAmount]) as total, 
 datediff(day,transactiondate,'30 Nov 2012') / DaysInyear AS YearDiff 
 FROM tblGroups 
 AND datediff(day,transactiondate, '30 Nov 2012') / DaysInyear < iMaxYears
 AND not transactiondate > '30 Nov 2012'  
 GROUP BY g.groupdescription, nominal, 
 datediff(day,transactiondate, '30 Nov 2012') / DaysInyear 
```

就这个问题而言，2012 年 11 月 30 日是硬编码的（变量名 = lMaxDate），iMaxYears 是 3

我的问题是 DaysInYear 通常具有 365 的值，但在闰年将具有 366 的值。

在像 2012 年这样的闰年，由于 2012 年 2 月 29 日，上述语句不会出现在 2011 年 12 月 1 日。

我知道

```
DaysInYear=(CASE WHEN (year % 4 = 0 AND year % 100 <> 0) 
OR year % 400 = 0 then 366 else 365)

Currently DaysInYear = 365. 
```

我应该创建一个函数

```
DaysInYear(lYear) where you pass in a year (lYear) 
and it returns 365 or 366? 
```

问题是我不能通过 Year(transactiondate)，因为这一年总是跨越 2 年的一部分，而 iMaxYears 意味着我们可以在结果集中有 4 个年度期间。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:38:51.113

如果您从 transactionDate 中删除 29 天和 10 个月，您可以将截止点移至 1 月 1 日。这样，DATEADD 会为您计算要减去的正确天数。

```
CREATE FUNCTION yearDiff(@maxDate DATE, @transactionDate DATE)
RETURNS INT AS
BEGIN
  DECLARE @dayDiff INT
  DECLARE @monthDiff INT

  -- Determine how many months and days @maxDate is from the first of january
  SET @monthDiff = 1 - DATEPART(MONTH, @maxDate)
  SET @dayDiff = 1 - DATEPART(DAY, @maxDate)

  -- Determine how many years away from @maxDate the transaction is
  RETURN DATEDIFF(YEAR,
                  DATEADD(MONTH,
                          @monthDiff,
                          DATEADD(DAY,
                                  @dayDiff,
                                  @transactionDate)
                          ),
                  @maxDate
                  )
END 
```

我认为您的选择将如下所示：

```
SELECT
  sum(amount) [total],
  dbo.yearDiff(@maxDate, transactionDate) [yearDiff]
FROM tblGroups
WHERE  transactionDate <= @maxDate
AND dbo.yearDiff(@maxDate, transactionDate) <= @iMaxYears
GROUP BY dbo.yearDiff(@maxDate, transactionDate) 
```

[http://sqlfiddle.com/#!6/54c2d/2](http://sqlfiddle.com/#!6/54c2d/2)

优点是它很好读，而且你没有神奇的数字。它不是特别有效，如果确实有很多事务，您将需要内联函数调用或者可能为 yearDiff 添加一个计算列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:01:22.060

如果您只是使用该 case 语句代替 DaysInYear 变量会怎样？

```
 SELECT sum([AllocatedAmount]) as total, 
 datediff(day,transactiondate,'30 Nov 2012') / CASE WHEN (year % 4 = 0 AND year % 100 <> 0) 
OR year % 400 = 0 then 366 else 365 end AS YearDiff 
 FROM tblGroups 
 AND datediff(day,transactiondate, '30 Nov 2012') / CASE WHEN (year % 4 = 0 AND year % 100 <> 0) 
OR year % 400 = 0 then 366 else 365 end < iMaxYears
 AND not transactiondate > '30 Nov 2012'  
 GROUP BY g.groupdescription, nominal, 
 datediff(day,transactiondate, '30 Nov 2012') / CASE WHEN (year % 4 = 0 AND year % 100 <> 0) 
OR year % 400 = 0 then 366 else 365 end 
```

只要 Year 中的天数基于相关交易日期，您就应该清楚。

# c# - 原型模式在这里合适吗？

> ID：14481194
> 
> 赞同：0
> 
> 时间：2013-01-23T13:43:07.440
> 
> 标签：c#, oop, design-patterns, prototype-pattern

我有一个 type 数组`Cell`。这是一个二维数组。根据某些条件，我可能必须调整此数组的大小并将`Cell`对象向下/向右/向左移动一行或一列。

我正在考虑使用原型模式将原始数组复制到另一个更大的数组中。

与简单地调整数组大小相比，这是否提供更多好处？

编辑：我意识到我没有提到我的意图。我真的不需要另一个对象。我只想要一个基于某些条件的更大的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:49:43.150

这可能会有所帮助的唯一原因是如果您正在制作*浅*拷贝：复制将节省您创建新对象的成本。它的另一面是`Cell`数组内的所有对象都将在多个二维数组之间共享；如果这出现问题，您应该从头开始创建数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:10:31.543

简短的回答没有。

有一种替代解决方案可以在不需要原型的情况下解决您的问题。

不要将单元格存储在数组中。单元格不知道它们的行号和列号，而是询问行/列。这允许重新排列列，而不必更新每个项目。

有一个表示数组的容器对象，并且可以返回给定 (x,y) 坐标处的单元格。如果数组是稀疏的（或者如果它具有合理的默认值），则将丢失的单元格视为默认值。这将大大降低存储成本。列和行属于容器。添加空行或空列现在变成插入行或列对象的情况。

# vba - vba/catvba 类实例化

> ID：14481197
> 
> 赞同：1
> 
> 时间：2013-01-23T13:43:10.200
> 
> 标签：vba, catia

我想在全球范围内声明类是我的例子：

我想使用看起来完全像这样的类 clsIEError：

```
Option Explicit

Public Sub m(msg As String, Optional title As String = "Title:")

    'Attribute Value.VB_UserMemId = 0

    'this method will be used as defualt method
    'and here are attributes msg and title used to create some inteface
End Sub 
```

这就是它的工作原理示例1：

```
Sub CATMain()

     Dim ie As clsIEError
     Set ie = New clsIEError

     ie "test", "title"

     Set ie = Nothing
End Sub 
```

但我的问题是我想在全球范围内拥有它示例2：

```
Option Explicit

Public ie As clsIEError

Private Function Init()
    Set ie = New clsIEError
End Function

Sub CATMain()
    Call Init

'   and to use it same as in example 1    
    ie "test", "title" 

'   but i am able to use it only like:
'   ie.m "test", "title" 'works as expected 

    Set ie = Nothing
End Sub 
```

为什么使用公共默认方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:28:43.383

我可以确认这不像你描述的那样工作。我在运行时得到“预期的过程，而不是变量”，但没有编译错误。这一定是 VB 解析器中的错误，但这是我能想到的唯一解释。

我一直认为属性必须与元素名称匹配。你在哪里

```
Attribute Value.VB_UserMemId = 0 
```

我以为你应该有

```
Attribute m.VB_UserMemId = 0 
```

但无论哪种方式，它似乎都有效（使用本地声明的变量）。这是一个糟糕的答案，但答案是显式调用该方法。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:03:03.767

我不确定它是否会明确回答您的问题，但是，就我而言，我想创建一个可以在整个项目中访问的类的实例。基本上我需要创建静态类或单例。我发现这篇[文章](https://stackoverflow.com/a/4196960/1866635)非常有用。

# javascript - 即使在点击处理程序上，Html5 音频也不会加载/播放

> ID：14481198
> 
> 赞同：1
> 
> 时间：2013-01-23T13:43:17.283
> 
> 标签：javascript, html, ios5, html5-audio, soundmanager2

我正在使用以下代码在 iPad Safari 上加载声音。

```
 var EI={sound:{}};
    EI.sound.load = function(){
        var preferFlash = true;
        if (Ext.os.is('iOS') && Ext.browser.is('WebKit'))
            preferFlash = false;
        // Load sound modules
        soundManager.setup({
            debugMode: true,
            preferFlash: false,
            onready: function(){
                var s = EI.sound; 
                s.audio = soundManager.createSound({
                    id: 'audio',
                    url: 'sound/sprite.mp3'
                });
                var opt = s.opt.online, f = opt.start+opt.duration, t=f+1500;
                if (s.enabled)  s.audio.play({from:opt.start, to:opt.start+opt.duration});
            }
        });
    } 
```

opt定义为

```
EI.sound.opt = {
    "msg":{start: 53, duration: 701},
    "offline":{start: 1904, duration: 487},
    "online":{start: 3548, duration: 2476},
} 
```

按钮`click`事件处理程序如下所示，

```
handler: function(btn){
    EI.sound.load();
} 
```

问题是单击按钮时声音不播放。我知道 Mobile Safari 对 html5 音频有限制。这些是我为克服它而采取的步骤。

1.  只能加载一个文件。所以我制作了一个音频精灵并只播放其中的一部分。
2.  声音只能在 click 或 touchstart 甚至处理程序上加载。所以我正在加载点击事件处理程序。

但是还是没有声音。当我按下那个按钮时，我希望听到声音。它是一个启动图像类型按钮。它是用户必须按下才能使用应用程序的第一个按钮。

如何使音频播放成功？

这里有一些资源

1.  [http://www.ibm.com/developerworks/library/wa-ioshtml5/index.html](http://www.ibm.com/developerworks/library/wa-ioshtml5/index.html)
2.  [iPhone 上的 SoundManager2 - 在 jQuery Load 上没有播放声音](https://stackoverflow.com/questions/11791949/soundmanager2-on-iphone-sound-not-playing-on-jquery-load)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T12:53:21.160

您正在使用“EI.sound.load()”，而您必须在声音管理器设置中使用“EI.sound.play()”或 autplay: true。

# python - 在 Django 中捕获 TemplateDoesNotExist

> ID：14481205
> 
> 赞同：6
> 
> 时间：2013-01-23T13:43:32.623
> 
> 标签：python, django

我正在尝试在使用 Django 1.4.3（使用 Python 2.7.2）的项目中使用 SO 答案中描述的模板标签： [https ://stackoverflow.com/a/6217194/493211。](https://stackoverflow.com/a/6217194/493211)

我是这样改编的：

```
from django import template

register = template.Library()

@register.filter
def template_exists(template_name):
    try:
        template.loader.get_template(template_name)
        return True
    except template.TemplateDoesNotExist:
        return False 
```

这样我就可以在另一个模板中像这样使用它：

```
{% if 'profile/header.html'|template_exists %}        
  {% include 'profile/header.html' %}
{% else %}
  {% include 'common/header.html' %}
{% endif %} 
```

这样，我可以避免使用诸如更改 INSTALLED_APPS 中的应用程序顺序之类的解决方案。

但是，它不起作用。如果模板**不**存在，则在堆栈/控制台中引发异常，但不会传播到`get_template(..)`（从该[语句](https://github.com/django/django/blob/1.4.3/django/template/loader.py#L140)内部），因此不会传播到我*愚蠢*的API。因此，在渲染过程中，这在我的脸上爆炸了。我将堆栈跟踪上传到[pastebin](http://pastebin.com/3Yfzkmyj)

这是 Django 想要的行为吗？

我最终停止做愚蠢的事情。但我的问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:57:59.627

自定义标签呢？这没有提供完整的功能，`include`但似乎满足了问题中的需求。：

```
@register.simple_tag(takes_context=True)
def include_fallback(context, *template_choices):
    t = django.template.loader.select_template(template_choices)
    return t.render(context) 
```

然后在您的模板中：

```
{% include_fallback "profile/header.html" "common/header.html" %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:31:55.880

我找到了对我的问题的某种答案，因此我将其发布在这里以供将来参考。

如果我像这样使用我的 template_exists 过滤器

```
{% if 'profile/header.html'|template_exists %}        
  {% include 'profile/header.html' %}
{% else %}
  {% include 'common/header.html' %}
{% endif %} 
```

如果`profile/header.html`不存在，则 TemplateDoesNotExist 在页面加载时会奇怪地传播，并且我收到服务器错误。但是，如果相反，我在模板中使用它：

```
{% with 'profile/header.html' as var_templ %}
  {% if var_templ|template_exists %}
    {% include var_templ %}
  {% else %}
    {% include 'common/header.html' %}
  {% endif %}
{% endwith %} 
```

然后，它就像一个魅力！

显然，我可以使用

```
django.template.loader.select_template(['profile/header.html','common/header.html']) 
```

在视图中（来自this [SO answer](https://stackoverflow.com/a/10882049/493211)）。但是我正在使用一个 CBV，我想保持它相当通用，它是从主模板中调用的。而且我认为如果这个应用程序由于某种原因出现故障，让我的网站正常运行会很好。如果这对您来说似乎很愚蠢，请发表评论（或更好的答案）。

# sql - SQL - 如何将我的总和结果替换为一个数字

> ID：14481209
> 
> 赞同：0
> 
> 时间：2013-01-23T13:43:40.127
> 
> 标签：sql

我有一个汇总一些列的查询

```
SELECT P, sum (K)
FROM table
GROUP BY P 
```

我希望如果总和大于 1，我的结果将是 1。含义而不是：

```
P K
1 2
3 4
23 0 
```

我会有：

```
P K
1 1
3 1
23 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:45:22.630

利用`CASE`

```
SELECT P, 
       (CASE WHEN sum(K) > 0 THEN 1 ELSE 0 END) AS Result
FROM   tableName
GROUP  BY P 
```

**更新**

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/11c56/1)

感[谢卢夫](https://stackoverflow.com/users/1841054/luv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:50:34.960

```
SELECT P, LEAST(1, sum (K))
FROM table
GROUP BY P 
```

听起来有 2 个条件 sum(K) > 1 然后你想要， sum(K) < 1 的唯一选项是 0。所以这会给你。

# c# - 在 C# 中继承类

> ID：14481213
> 
> 赞同：0
> 
> 时间：2013-01-23T13:43:51.770
> 
> 标签：c#, inheritance

我有一个抽象类和两个派生自这个主体类的类：

```
abstract class MainClass
{
    public void DoSomething() {
        if(isEdit())
            Edit();
        else if(isNew())
            New();
        else if(isDelete())
            Delete();
        else if(isSearch())
            Search();
        else if(isExit())
            Exit();
    }

    public abstract void Edit();
    public abstract void New();
    public abstract void Delete();
    public abstract void Search();
    public abstract void Exit();
}

abstract class FirstClass : MainClass
{
    public abstract void Edit();
    public abstract void New();
    public abstract void Delete();
}

abstract class SecondClass : MainClass
{
    public abstract void Search();
    public abstract void Exit();
} 
```

当您需要从 FirstClass 扩展`Edit()`，`New()`并且`Delete()`必须声明时，方法`Search()`和`Exit()`可以声明但不应该是强制性的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:47:23.467

> 当您需要从 FirstClass Edit() 扩展时，必须声明 New() 和 Delete()，并且可以声明方法 Search() 和 Exit()，但不应该是强制性的。

这是可能的：

```
abstract class FirstClass : MainClass
{
    //public abstract void Edit();
    //public abstract void New();
    //public abstract void Delete();

    public override void Search()  { }
    public override void Exit()    { }
} 
```

Edit()、New() 和 Delete() 已经在 MainClass 中声明为抽象（必须覆盖），因此 FirstClass 应该不理会它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:46:15.640

将可选方法实现为[`override`](http://msdn.microsoft.com/en-us/library/ebca9ah3.aspx)s：

```
abstract class FirstClass : MainClass
{
    public override void Search(){}
    public override void Exit(){}
} 
```

由于它们是在 中*实现*的`MainClass`，因此您不需要在任何继承类中实现，但如果您*愿意*，您可以使用[`override`](http://msdn.microsoft.com/en-us/library/ebca9ah3.aspx)它们。

请注意，您不需要重新声明`Edit`,`New`并且`Delete`再次 - 它们已经被继承，`FirstClass`并且需要由它的任何非抽象继承者实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:46:47.050

您可以覆盖已声明的非强制性方法，`MainClass`其中是 的基类`FirstClass`，并为其提供默认功能：

```
abstract class FirstClass : MainClass
{            
    public override  void Search(){}
    public override  void Exit() {}
} 
```

强制方法不应在 中声明`FirstClass`，因为它们已在`MainClass`. 它们仍然是抽象的`FirstClass`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:47:01.013

覆盖可以选择在子类中声明的方法（其他方法将从继承`MainClass`并保持抽象）：

```
abstract class FirstClass : MainClass
{  
    public override void Search() { /* default implementation */ }
    public override void Exit() { /* default implementation */  }
} 
```

然后

```
class ThirdClass : FirstClass
{ 
    // Must implement abstract methods
    public override void Edit() { }
    public override void New() { }
    public override void Delete() { }

    // Optionally override 
    public override void Exit() { /* custom implementation */  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T13:48:25.823

abstract 关键字表示方法必须由继承类实现。virtual 关键字表示它可以被实现。

将 Save() 和 Exit() 标记为虚拟并提供它们的默认（可能为空）实现。

# android - 如何在搜索模式下避免不同的字母大小写（á、é、í、ó、ú） - Android

> ID：14481218
> 
> 赞同：0
> 
> 时间：2013-01-23T13:43:56.687
> 
> 标签：android, sqlite, searchbar

我正在构建一个应该替换默认联系人电话簿的应用程序，并且我想添加一个搜索栏来搜索联系人的姓名。

现在，我在自己的数据库中拥有所有联系人和一个 TextWatcher，用于持续跟踪 editText 中的任何更改 - 然后使用用户输入的 char 序列构建一个查询。这很好用，我正在获取用户搜索的所有联系人，就像所有联系人都以“a”开头一样。现在我想添加一个新功能来忽略特殊字母，例如：á、é、í、ó、ú。

我希望用户可以输入 a 并仍然获得所有以 á 开头的联系人，对于 e 和所有其他字母。

有没有办法在查询本身中做到这一点，或者 Java/Android 给我们的东西可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:53:18.833

您可以使用`java.text.Normalizer`去除重音。

```
String strippedAccent = Normalizer.normalize(someText, Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", ""); 
```

如果您想在查询中使用它，您可能应该在数据库中添加一个字段，其中包含可搜索文本的精简版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:08:56.870

[这种变化](http://code.google.com/p/nubdial/source/diff?spec=svn16&r=16&format=side&path=/trunk/src/com/wysie/wydialer/PhoneSpellDialer.java)对 nubdial 来说效果很好。它也相当快。

# javascript - 在 JSON 文件中使用正则表达式查找和替换引号内的引号

> ID：14481219
> 
> 赞同：0
> 
> 时间：2013-01-23T13:43:59.083
> 
> 标签：javascript, json

我有一个非常大的 JSON 文件，其中包含近 30000 条记录。一条记录如下所示：

```
{
  "adlibJSON": {
    "recordList": {
      "record": [
        {
          "@attributes": {
            "priref": "4372",
            "created": "2011-12-09T23:09:57",
            "modification": "2012-08-11T17:07:51",
            "selected": "False"
          },
          "acquisition.date": [
            "1954"
          ],
          "documentation.title": [
            "A lot of text with a lot of extra double quotes like "this" and "this""
          ] ... ... 
```

问题是其中有很多带有额外双引号的值。这可以是 1 个双引号，也可以是 2 或 3 个额外的双引号。请参阅`"documentation.title"`我的示例中的值。

我如何找到所有这些引号并用正则表达式替换它们。我使用 sublime text 2 来做我的正则表达式，但我不知道如何解决这个具体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:32:11.443

这里有两个例子：

这些有以下要求：

*   值不以逗号、冒号、右大括号或空格开头。

否则你必须改进它。第二个甚至允许值以空格开头，但也可能有一些其他副作用......

示例 1：

```
\"[A-Za-z0-9][^"]+\"\s*[^,:}\s] 
```

示例 2：

```
\"([A-Za-z0-9\s][^"]+\"\s*[^,:\]}\s]){2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:19:22.260

如果您有机会使用 PHP，并且您可以确保 JSON 文件将提供 PRETTY_PRINT（如示例输出中的行分隔）......您可以创建一个 PHP 文件，您将向该文件发送文件名并获得更正输出。这是一个例子。

```
header('Content-Type: application/json');

$file = @trim($_GET['file']);
if (empty($file) || ($contents = @file_get_contents($file)) === FALSE) {
    // handle errors here
    echo json_encode(array('error'=>'Invalid file!'));
    exit;
}
function escapeQuotes($m) {
    return $m[1].$m[2].preg_replace('~(?<!\\\\)(?<!^)"(?!$)~','\\"',$m[3]).$m[4];
}
$res = preg_replace_callback(
    '~^(\s*)("[^"\s]+"\s*:\s*)?(".*")(,?\s*)$~m',
    'escapeQuotes',$contents
);
echo json_encode(json_decode($res,true)); 
```

# ruby-on-rails - Rails 获取 url_for 在模型内部工作

> ID：14481221
> 
> 赞同：3
> 
> 时间：2013-01-23T13:44:01.490
> 
> 标签：ruby-on-rails, model-view-controller, url

标题说明了一切。使用控制器很容易 - 只需使用“view_context”。但它不适用于模型。

例如`ApplicationController.new.view_context.url_for`：“nil:NilClass 的未定义方法‘host’”

`ActionView::Base.new(Rails.configuration.paths["app/views"].first).url_for`也不行。

这可以做到没有那么多痛苦吗？

PS我的虾宝石需要它！我想从模型生成 PDF。除了在其中生成链接之外 - 它非常成功！

希望得到您的帮助！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-10-30T11:24:00.983

导轨 5

```
include Rails.application.routes.url_helpers

url_for(myModelObject) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:47:50.720

它可能取决于 Rails 版本，但通常这种方法现在定义在`Rails.application.routes`. 它希望您提供带有 url_options 的哈希，`:host`以及其他密钥。

# java - 媒体播放器淡入淡出

> ID：14481222
> 
> 赞同：2
> 
> 时间：2013-01-23T13:44:06.133
> 
> 标签：java, android

在我的应用程序中，我有一个声音实例，我喜欢添加淡入淡出。我尝试使用此代码，但音频始终为最大音量。

```
float volume = 1;
float speed = 0.05f;

}
public void FadeIn(float deltaTime)
{
    MediaPlayer.setVolume(volume, volume);
    volume += speed * deltaTime

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:54:51.777

尝试将媒体音量设置为 0。

# python - 当信号处理程序中遇到异常时，如何使 Django 信号处理程序不会静默失败？

> ID：14481225
> 
> 赞同：20
> 
> 时间：2013-01-23T13:44:15.587
> 
> 标签：python, django, error-handling

**当处理程序中遇到异常时，**如何使 Django 信号处理程序不会静默失败？****

 **使用**开发服务器**时是否有**记录所有这些错误的地方**？

 **为什么 django 信号处理程序无论如何都会默默地失败？这不是与*Python Zen 中*的一条线相悖吗？

> ***Python之禅****明确指出......*
> 
> 错误永远不应该悄无声息地过去。

这使它们成为调试的噩梦。你所看到的只是信号没有被触发......

我发现[了这个](https://stackoverflow.com/questions/9511297/django-signals-fail-silently-any-better-way-of-debugging-mistakes)问题，但答案对我来说没用，因为它对问题非常具体（答案建议使用 pyflakes，我已经使用了 pydev，它可以进行令人满意的静态分析）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-24T12:29:10.707

# 是的，错误永远不应该默默地失败

是的，我和你一样想：错误永远不应该默默地失败

# 内置信号不会静默失败

Django 的内置信号不会静默失败，因为它们使用`send()`

# 只`send_robust()`忽略异常

来自[send_robust()的文档](https://docs.djangoproject.com/en/dev/topics/signals/#django.dispatch.Signal.send_robust)

> send_robust() 捕获从 Python 的 Exception 类派生的所有错误，并确保所有接收者都收到信号通知。如果发生错误，则在引发错误的接收者的元组对中返回错误实例。

# 结论

由于 django 不使用`send_robust()`，请调查它被调用的位置。我猜它在您的源代码中，或者在第三方应用程序的代码中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T14:55:39.477

使用`manage.py shell`时，从您的示例手动创建 FollowTable 时出现未捕获的异常。但是，请求期间未捕获的异常不会显示在终端中（除了显示返回 500），而是显示在浏览器中。如果您使用 JavaScript 发出请求，您可能需要查看 firebug/chrome 开发人员工具，看看它是否返回了回溯。

看起来其他人已经回答了如何在控制台中显示回溯： [https ://stackoverflow.com/a/5886462/725359](https://stackoverflow.com/a/5886462/725359)

似乎为我工作。我做了以下事情：

1.  将课程添加`ExceptionLoggingMiddleware`到`my_app/__init__.py`
2.  添加`'my_app.ExceptionLoggingMiddleware'`到`MIDDLEWARE_CLASSES`_`settings.py`
3.  重启开发服务器****

# c# - WPF 文本框的验证规则

> ID：14481240
> 
> 赞同：9
> 
> 时间：2013-01-23T13:44:57.200
> 
> 标签：c#, wpf, textbox, validationrule

我是 WPF 的新手。在我的 UserControl 中，我有 8 个标签及其各自的 8 个文本框，如下所示：

```
1.Label : abc   2.Label : def
  TextBox1 :        TextBox2 :

3.Label :xyz    4\. Label : ghi
  Textbox3 :        TextBox4 : 
```

这些文本框文本属性中的每一个都应包含以其各自标签名称结尾的文本，例如`TextBox1.text`应该是`xxxx.abc`，`TextBox2.text`应该是 xxxx.def 等等。如果不是，文本框应该有红色边框。

希望我对细节很清楚。所以我需要`ValidationRule`为每个文本框写不同的内容吗？

你有输入吗？？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-23T13:52:06.270

为什么不使用一个`ValidationRule`实现，其属性公开字段应以什么结尾，例如：

```
public class EndsWithValidationRule : ValidationRule
{
    public string MustEndWith { get; set; }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        var str = value as string;
        if(str == null)
        {
            return new ValidationResult(false, "Please enter some text");
        }
        if(!str.EndsWith(MustEndWith))
        {
            return new ValidationResult(false, String.Format("Text must end with '{0}'", MustEndWith));
        }
        return new ValidationResult(true, null);

    }
} 
```

然后你可以像这样使用它：

```
<TextBox x:Name="TextBox1">
    <TextBox.Text>
        <Binding Path="BoundProperty1" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:EndsWithValidationRule MustEndWith=".def" />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox>

<TextBox x:Name="TextBox2">
    <TextBox.Text>
        <Binding Path="BoundProperty2" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:EndsWithValidationRule MustEndWith=".abc" />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

# asp.net - 防止 ASP .NET 中的 sql 注入

> ID：14481254
> 
> 赞同：0
> 
> 时间：2013-01-23T13:45:32.110
> 
> 标签：asp.net, sql, sql-server, regex

我是编码界的新手，

我建立了一个带有几个文本框的大型网站，所以现在我发现我一直在使用一种危险的方法在 SQL 服务器中插入数据，如下所示：

```
execSQL("insert into Dossier(ID_Dossier,Nom_Giac) values(" & id_dossier.text & "," Nom_gaic.text & "')")

 Public Function execSQL(ByVal req As String, Optional ByVal type As String = "r")
        cmd = New SqlCommand
        cmd.CommandText = req
        cmd.Connection = con
        openCon()
        If type = "r" Then
            Return cmd.ExecuteReader(CommandBehavior.CloseConnection)
        Else
            Return cmd.ExecuteNonQuery
        End If
        closeCon()
    End Function 
```

我只想知道在我的整个网站中是否有任何快速的方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:46:44.923

我赞赏您希望从您的站点中删除任何 SQL 注入的可能性。

也就是说，没有快速、神奇的“查找并替换我的易受攻击代码”功能；您需要进入系统并使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)更新任何类似的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:48:23.683

需要参数化查询来防止 SQL 注入。下面是一个示例，取自这个问题：[如何创建参数化 SQL 查询？我为什么要？](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i)

```
Public Function GetBarFooByBaz(ByVal Baz As String) As String
    Dim sql As String = "SELECT foo FROM bar WHERE baz= @Baz"

    Using cn As New SqlConnection("Your connection string here"), _
        cmd As New SqlCommand(sql, cn)

        cmd.Parameters.Add("@Baz", SqlDbTypes.VarChar, 50).Value = Baz
        Return cmd.ExecuteScalar().ToString()
    End Using
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:49:42.550

使用 LINQ to SQL 可以通过为您进行参数化来帮助防止 SQL 注入攻击：

> LINQ to SQL 通过 SQL 参数将所有数据传递到数据库。因此，尽管 SQL 查询是动态组合的，但值是通过参数替换服务器端的，以防止 SQL 注入攻击的最常见原因。

[在此处](https://stackoverflow.com/questions/473173/will-using-linq-to-sql-help-prevent-sql-injection)阅读更多相关信息。

# java - OpenJPA插入不使用外键

> ID：14481260
> 
> 赞同：0
> 
> 时间：2013-01-23T13:45:45.960
> 
> 标签：java, mysql, sql, jpa, openjpa

我正在尝试围绕链接到 Mysql 数据库的 EJB / JPA 创建一个小项目。我有两个表 FctData 和 RefKpiDataQuery 由外键链接。

数据：

```
public class FctData implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "DATA_ID")
    private Long dataId;

    ...

    @JoinColumn(name = "DATA_QUERY_REF", referencedColumnName = "KPI_DATA_QUERY_ID")
    @ManyToOne(cascade = CascadeType.ALL)
    private RefKpiDataQuery dataQueryRef; 
```

RefKpiDataQuery ：

```
public class RefKpiDataQuery implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "KPI_DATA_QUERY_ID")
    private Long kpiDataQueryId;

    ...

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "dataQueryRef")
    private Set<FctData> fctDataSet; 
```

我有一个客户端，它只是试图在数据库中插入一个 FctData

```
RefKpiDataQuery refKpiDataQuery = new RefKpiDataQuery();
refKpiDataQuery.setKpiDataQueryId((long) 2);

FctData fctData = new FctData();
fctData.setDataQueryRef(refKpiDataQuery);

fctDataFacade.insert(fctData); 
```

Facade 是一种 DAO。这对没有 FK 的对象非常有效。

这是我在日志中得到的错误：

```
Field 'DATA_QUERY_REF' doesn't have a default value {prepstmnt 7235700 INSERT INTO FCT_DATA(DATA_DATE, DATA_TIME, DATA_VALIDITY, DATA_VALUE, ISACTIVE, UPDATE_OWNER, UPDATE_TS) VALUES (?, ?, ?, ?, ?, ?, ?) 
```

正如我们在我的插入中看到的那样，它从不谈论数据查询。有人可以解释一下我错过了什么吗？我找不到我的错误。

谢谢你的时间。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:49:14.040

我终于通过删除所有

```
@Basic(optional = false) 
```

也不需要添加 cascade = CascadeType.ALL

# c# - 使用 Autofac 返回不同范围内的不同组件

> ID：14481262
> 
> 赞同：8
> 
> 时间：2013-01-23T13:45:50.327
> 
> 标签：c#, autofac

我有两个范围，一个嵌套在另一个内部。当我解析特定服务时，我希望在一个根范围内解析一个组件，在子范围内解析另一个组件。有没有一种简单的方法可以做到这一点？

我已经设法使用工厂类来确定当前范围是什么，然后返回适当的实例：

```
IContainer BuildContainer()
{
    var builder = new ContainerBuilder();

    // ...
    builder.RegisterType<FooInParentScope>().AsSelf();
    builder.RegisterType<FooInChildScope>().AsSelf();
    builder.RegisterType<FooFactory>().AsImplementedInterfaces();
    builder.Register<IFoo>(c => c.Resolve<IFooFactory>().GetFoo()).InstancePerLifetimeScope();
    // ...
}

class FooFactory : IFooFactory
{
    private readonly ILifetimeScope m_scope;

    public FooFactory(ILifetimeScope scope)
    {
        m_scope = scope;
    }

    public IFoo GetFoo()
    {
        if (m_scope.Tag == "ParentScope")
            return m_scope.Resolve<FooInParentScope>();
        else
            return m_scope.Resolve<FooInChildScope>();
    }
}

class FooInParentScope : IFoo
{
}

class FooInChildScope : IFoo
{
} 
```

这种方法存在许多问题：

1.  我必须添加一个额外的类（或 2 个 - 不确定 IFooFactory 是否真的有必要）
2.  上面的代码不处理嵌套在 ParentScope 中的其他范围。我可以通过将范围投射到属性`Autofac.Core.Lifetime.LifetimeScope`并检查`ParentLifetimeScope`属性来解决这个问题，但这可能不是一件特别安全的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T05:00:05.040

您可以在根容器中将 FooInParentScope 注册为 SingleInstance。并且在创建内部生命周期范围时，将 FooInChildScope 的注册添加为 SingleInstance（覆盖注册）。

```
builder.RegisterType<FooInParentScope>().As<IFoo>.SingleInstance();
var container = builder.Build();

var childScope = container.BeginLifetimeScope(innerBuilder =>
    {
        // override registration for IFoo in child lifetime scope:
        innerBuilder.RegisterType<FooInChildScope>().As<IFoo>().SingleInstance();
    });

FooInParentScope fooInParentScope = (FooInParentScope) container.Resolve<IFoo>();
FooInChildScope fooInChildScope = (FooInChildScope) childScope.Resolve<IFoo>(); 
```

# asp.net - Application_Start 中的会话状态提供程序如何设置

> ID：14481264
> 
> 赞同：3
> 
> 时间：2013-01-23T13:46:07.770
> 
> 标签：asp.net, session-state, session-state-provider

我需要在代码而不是 web.config 中设置会话状态提供程序的能力。我尝试在 Application_Start 中添加代码

```
 System.Configuration.Configuration _configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~/");

 var sessionStateSection =
                (System.Web.Configuration.SessionStateSection)_configuration.GetSection("system.web/sessionState");
            sessionStateSection.Providers.Clear();
            var customSessionStateProvider = new ProviderSettings(DEFAULT_SESSION_PROVIDER, DEFAULT_MEMBERSHIP_PROVIDER);
            customSessionStateProvider.Parameters.Add(CONNECTION_STRING_NAME, DEFAULT_CONNECTION);
            sessionStateSection.Providers.Add(customSessionStateProvider);
            sessionStateSection.Mode = System.Web.SessionState.SessionStateMode.Custom;
            sessionStateSection.Timeout = new TimeSpan(0, 20, 0);
            sessionStateSection.CustomProvider = DEFAULT_SESSION_PROVIDER; 
```

但问题是会话正在恢复到 InProc 模式而不是自定义。有没有办法在代码中声明提供者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:17:47.437

正如上面提到的布赖恩韦伯斯特（Brian Webster），我在此页面上找到的唯一内容是在[此页面上](http://abhijitjana.net/2011/01/15/programmatically-changing-session-state-behavior-in-asp-net-4-0/)。

# javascript - 更新对话框中的按钮后对话框未关闭

> ID：14481271
> 
> 赞同：0
> 
> 时间：2013-01-23T13:46:23.043
> 
> 标签：javascript, jquery

我在更新对话框中的按钮后尝试自动关闭对话框，但它不会自动关闭，是否有任何适当的解决方案来解决此问题？这是我的代码。

```
<script>
jQuery(function () {
    var jQuerydialog = jQuery("#view_dialog").dialog({
        autoOpen: false,
        title: 'Schedule',
        height: 200,
        width: 350,
        resizable: true,
        modal: true,
    });
    jQuery(".view_dialog").click(function () {
        jQuerydialog.load(jQuery(this).attr('href'),

        function () {
            jQuerydialog.dialog('open');
        });
        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:27:21.653

`$('#view_dialog').dialog('close');`应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:09:55.070

更改代码将起作用。:)

```
 function dialogOpen(param){

        //Getting Html For View
     var result = jQuery.ajax({
            type: "POST",
            url: FULL_BASE_URL+"url"+param,
            async: false
          });
     createDialogBoxById('view_dialog','title','350','200',result.responseText);
 } 
```

# javascript - 丹麦电话号码需要正则表达式

> ID：14481288
> 
> 赞同：0
> 
> 时间：2013-01-23T13:47:02.840
> 
> 标签：javascript, regex

我需要一个正则表达式从字符串中提取丹麦电话号码。我懂了

```
var phrase = "Text text text 11 22 33 44 text text.";
phrase = phrase.replace(/^((\(?\+45\)?)?)(\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2})$/, "replace phone number");
alert(phrase); 
```

我找到了这个链接，但它不起作用： [http ://www.dbsoftlab.com/etl-tools/regular-expressions/is-danish-phone-number.html](http://www.dbsoftlab.com/etl-tools/regular-expressions/is-danish-phone-number.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:55:50.433

在您尝试使用的表达式中，仅当电话号码是字符串中唯一的内容时才会匹配，因为 ^ 匹配字符串的开头而 $ 匹配结尾。

我相信这是一个更简单的正则表达式，它可以工作：

```
/([0-9]{2} ){3}[0-9]{2}/ 
```

因此，您可以说 textStr.replace(/([0-9]{2} ){3}[0-9]{2}/g,'new string')。

在这里检查：[http ://refiddle.com/gk8](http://refiddle.com/gk8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:55:23.577

问题是`^`和`$`，它们分别匹配字符串的开头和结尾。由于数字在字符串的中间，因此它们不匹配。删除它们，它可以工作：

```
> var phrase = "Text text text 11 22 33 44 text text.";
undefined
> phrase = phrase.replace(/((\(?\+45\)?)?)(\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2})/, " replace phone number");
'Text text text replace phone number text text.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:00:31.983

我会去：

```
/(?:45\s)?(?:\d{2}\s){3}\d{2}/ 
```

这维护了先前正则表达式具有的可选国家/地区代码。我在这里使用非捕获组来提高效率。

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Special_Characters](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Special_Characters)

# mysql - 用sql获取最后一个数据库条目很慢

> ID：14481293
> 
> 赞同：1
> 
> 时间：2013-01-23T13:47:17.427
> 
> 标签：mysql, sql

我的数据库有两列：时间和工作。它非常非常大并且还在增长。

我想选择最后一个条目：

```
$sql = "SELECT time, work FROM device ORDER BY time DESC LIMIT 1" 
```

响应时间为 1.5 秒。**我怎样才能加快这个速度？**因为我重复了20次。

我等不及 20 秒。

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:48:05.307

采用`MAX`

```
SELECT  *
FROM    tableName
WHERE   time = (SELECT MAX(time) FROM device) 
```

还添加一个`Index`on 列`time`

* * *

*我想知道你为什么要重复这 20 次。如果您正在处理应用程序 lebel，也许您可​​以将结果添加到变量中，这样您就不会再次执行它。*

# javascript - 在 JQuery 中创建一个列表

> ID：14481298
> 
> 赞同：0
> 
> 时间：2013-01-23T13:47:33.640
> 
> 标签：javascript, oop

我正在尝试在 jquery 中创建一个列表对象，我正在使用以下代码，但它不起作用，我找到了这个[示例](http://jsfiddle.net/AeFMF/)，所以我写了一个类似的东西。

```
function Node(left, right, content)
{
    this.left = left;
    this.right = right;
    this.content = content;
}

var n1 = new Node('', n2, 'content content content');    
var n2 = new Node(n1, n2, 'content content content');
var n3 = new Node(n2, '', 'content content content');

console.log(box2); 
```

现在，如果我称之为`n1.right`返回未定义。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:52:18.767

不要使用`left`并`right`链接到其他节点，而是将所有节点包含在另一个节点中，该节点将充当列表的容器。

您可以从外部节点访问元素。

例如：

```
function Node(content) {
  this.nodes = [];
  this.content = content;
  this.addNode = function(node) {
    this.nodes.push(node);
  };
  this.changeContent = function(newContent) {
    this.content = newContent;
  };
}

var container = new Node();
container.addNode(new Node("Node 1"));
container.addNode(new Node("Node 2"));
container.addNode(new Node("Node 3"));

console.log(container); 
```

**[正如在 Codepen 上看到的](http://codepen.io/MadaraUchiha/pen/BhElK)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:57:26.423

你在它有值之前传递`n2`给它，因此它是. 在节点存在之前，您不能将其传递给另一个节点。`new Node``undefined`

一个简单的解决方法是在创建节点后“链接”节点：

```
function Node(content, left, right)
{
    this.left = left;
    this.right = right;
    this.content = content;
}

var n1 = new Node('content content content');    
var n2 = new Node('content content content');
var n3 = new Node('content content content');

n1.right = n2;
n2.left = n1;
n2.right = n3;
n3.left = n2; 
```

尽管您可能需要一些 getter 和 setter 方法来正确处理将新节点插入到列表中。

了解有关对象如何工作的更多信息：[MDN - Woking with objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

不过，这可能是一个 XY 问题，在这种情况下，您必须解释您实际尝试解决的问题。如果您只想创建对象列表，可以使用[数组*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Predefined_Core_Objects#Array_Object)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:54:18.933

看看你的代码：

```
var n1 = new Node('', n2, 'content content content');    
var n2 = new Node(n1, n2, 'content content content');
var n3 = new Node(n2, '', 'content content content'); 
```

创建`n1`时没有`n2`对象，因此插入`undefined`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:54:31.843

首先，您在这里省略了一些有用的代码。例如 box2 对象是什么。

无论如何，您尝试将 n2 添加到 n1 但它尚不存在：

```
var n1 = new Node('', n2, 'content content content'); // n2 does not yet exist   
var n2 = new Node(n1, n2, 'content content content'); // n2 can't reference itself yet
var n3 = new Node(n2, '', 'content content content'); 
```

您应该首先创建一个根节点或创建一个更复杂的对象模式，您可以在创建节点后将连接添加到这些节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T13:56:43.507

```
function Node(left, right, content)
{
    this.left = left;
    this.right = right;
    this.content = content;
}

var n1 = new Node('', null, 'content content content');    
var n2 = new Node(n1, n2, 'content content content');

n1.right=n2;

var n3 = new Node(n2, '', 'content content content');

console.log(n1.right); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T14:00:24.037

您可以让 Node 构造函数更新左/右节点。因此，如果当前节点的左侧为 n2，则 n2 的右侧应为当前节点：

```
function Node(left, right, content)
{
    this.left = left;  
    this.right = right;
    this.content = content;
    if(left) {
       left.right = this;
    }
    if(right) {
       right.left = this;
    }
}

var n1 = new Node(null, null, 'content content content');    
var n2 = new Node(n1, null, 'content content content');
var n3 = new Node(n2, null, 'content content content');

console.log(n1.right.content); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T14:03:28.913

就像其他人说的那样，在创建之前您不能分配价值。你可以做一些延迟加载，但这听起来会让你的事情变得复杂。试试这个：

```
function Node(content, prev, next) {
    var setPrev = function(node){
        var oldPrev = this.prev;
        this.prev = node;
        node.next = this;
        node.prev = oldPrev;
    }
    ,setNext = function(node){
        var oldNext = this.next;
        this.next = node;
        node.next = oldNext;
        node.prev = this;
    }
    return {
        'content': content,
        'prev': prev,
        'next': next,
        'setPrev': setPrev,
        'setNext': setNext
    }
}
n1 = new Node('content content content');    
n2 = new Node('content content content', n1);
n3 = new Node('content content content', n2);
n1.setNext(n2);
n2.setNext(n3); 
```

将它封装到某种可以处理诸如`appendNode`, `prependNode`, `insertAfter`,`insertBefore`等的 List 对象中也是一个好主意。

# java - 禁用任务管理器时如何隐藏任务管理器的错误消息对话框

> ID：14481299
> 
> 赞同：0
> 
> 时间：2013-01-23T13:47:34.937
> 
> 标签：java, dialog, taskmanager

嗨，我尝试用 java 制作一个程序，它必须是全屏的，并且总是在顶部。但是，当我按 CTRL + ALT + DEL 时，任务管理器出现了。我通过编辑 regedit 值阻止了任务管理器，但现在出现错误消息对话框“任务管理器已被管理员禁用”

我怎样才能隐藏那个对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:14:27.027

我认为这在 Java 中是不可能的，实际上我不知道您是否可以（或想要）这样做。Windows 上的“始终位于顶层”层包含一堆窗口，就像“用户”层一样，您通常不（也不应该）控制其他程序。如果任何一个程序可以接管整个机器并阻止任何东西，甚至操作系统，出现在用户面前，那将是令人不安的......

# java - 面向对象编程/在java中获取最小值/最大值......我是新手

> ID：14481306
> 
> 赞同：-6
> 
> 时间：2013-01-23T13:47:50.613
> 
> 标签：java

我已经得到了平均值，并且我的程序已经从用户那里读取了三个整数，我的问题是我不知道如何获得程序的最大和最小数字:(

-我是编程新手 :(

这是我的程序：

主类：

```
import java.util.Scanner;
public class TestNumbers {

    public static void main (String[]args){    

    int n1, n2, n3;
    System.out.println("Enter three integer numbers ");

          Scanner in = new Scanner(System.in);

          n1 = in.nextInt();
          n2 = in.nextInt();
          n3 = in.nextInt();      

    Numbers num=new Numbers();
    num.setNum(n1, n2, n3);

    System.out.println("The Maximum of : "+n1+ " , " +n2+ " , " +n3+ " is ");
    System.out.println("The Minimum of : "+n1+ " , " +n2+ " , " +n3+ " is ");
    System.out.println("The Average of : "+n1+ " , " +n2+ " , " +n3+ " is "+num.getAve());
    System.out.println("Press any key to continue...");      
    }
} 
```

基类：

```
public class Numbers {
    private int n1;
    private int n2;
    private int n3;
    private int ave;

    public void setNum(int n1, int n2, int n3){
        this.n1=n1;
        this.n2=n2;
        this.n3=n3;
    }

    public double getAve(){
        ave=(n1+n2+n3)/3;
        return ave;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T13:49:42.060

我会给你一个简单的算法。比较您的第一个数字和第二个数字。找到最多两个并将其与第三个数字进行比较。现在你可以做编码了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:56:23.660

(n1+n2+n3)/3.0

```
public double getAve(){
   ave=(n1+n2+n3)/3;
   return ave;
} 
```

这个函数让我担心，因为 ave 是一个整数并且该函数应该返回一个双精度数。您将失去用于计算的整数的精度。考虑铸造。

```
public double getAve(){
   double result = (double)(n1+n2+n3)/3.0
   return result;
} 
```

# python - python中的错误处理问题

> ID：14481310
> 
> 赞同：0
> 
> 时间：2013-01-23T13:48:17.097
> 
> 标签：python, error-handling, python-2.7, beautifulsoup, mechanize

我试图绕过这个错误：`ItemNotFoundError: insufficient items with name u'No_Thanks'`使用 try..except 语句出错。但是，我收到另一个错误消息：`NameError: name 'ItemNotFoundError' is not defined`. 我不确定为什么会这样。谢谢。这是我正在使用的代码

```
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1;Trident/5.0)')]
urls = "http://shop.o2.co.uk/mobile_phone/pay_monthly/init/Samsung/Galaxy_Ace_Purple"
r = br.open(urls)
page_child = br.response().read()
soup_child = BeautifulSoup(page_child)
contracts = [tag_c['value']for tag_c in soup_child.findAll('input', {"name": "tariff-duration"})]
data_usage = [tag_c['value']for tag_c in soup_child.findAll('input', {"name": "allowance"})]

for contract in contracts:
    if contract <>"Pay_and_Go":
        for data in data_usage:
            br.select_form('formDuration')
            br.form['tariff-duration']=[contract,]
            try:
                br.form['allowance']=[data,]
            except ItemNotFoundError:
                continue
            br.submit()
            page_child_child = br.response().read()
            soup_child_child = BeautifulSoup(page_child_child)
            items = soup_child_child.findAll('div', {"class": "n-pay-today"}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:55:22.923

我猜异常是由`mechanize`. 尝试：`except mechanize.ItemNotFoundError`

* * *

安装 mechanize 后看来这是正确的：

```
>>> import mechanize
>>> print mechanize.ItemNotFoundError
<class 'mechanize._form.ItemNotFoundError'>
>>> print mechanize.__version__
(0, 2, 5, None, None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:55:46.727

如果您在没有 try..except 的情况下运行代码，您可能会得到：

```
ClientForm.ItemNotFoundError: insufficient items with name u'No_Thanks' 
```

所以错误是在`ClientForm`模块中定义的。所以你可以抓住它

```
import ClientForm
....
        try:
            br.form['allowance']=[data,]
        except ClientForm.ItemNotFoundError:
            continue 
```

* * *

如果你想捕捉一个更普遍的错误，你也可以用 捕捉它`ValueError`，因为它`ClientForm.ItemNotFoundError`是 的子类`ValueError`：

```
In [10]: import ClientForm
In [15]: ClientForm.ItemNotFoundError.mro()
Out[15]: 
[<class 'ClientForm.ItemNotFoundError'>,
 <class 'ClientForm.LocateError'>,
 <type 'exceptions.ValueError'>,
 <type 'exceptions.StandardError'>,
 <type 'exceptions.Exception'>,
 <type 'exceptions.BaseException'>,
 <type 'object'>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:56:13.383

您需要导入 ItemNotFoundError 的模块或类定义。这不是标准的 Python 异常，我猜它是 Beautifulsoup 实现中某处定义的异常，但我不确定。

```
from some.module import ItemNotFoundError
....
except ItemNotFoundError:
    continue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-11T11:11:41.877

我需要升级机械化（python-mechanize）

> > > 印刷机械化。**版本** (0, 2, 5, None, None) 导入工作现在

让我们导入一些稍后需要捕获的异常::

```
>>> from mechanize import LinkNotFoundError
>>> from mechanize import ItemNotFoundError 
```

# windows-store-apps - 在 Windows 应用商店应用中捕获无声视频

> ID：14481312
> 
> 赞同：4
> 
> 时间：2013-01-23T13:48:21.420
> 
> 标签：windows-store-apps, video-capture, capability

我想编写一个可以捕获视频（没有任何声音）和拍照的 Windows 应用商店应用程序。想象一下数码相机：您可以在按下拍照按钮之前在设备屏幕上预览图片。

我现在面临的问题是，`Windows.Media.Capture`命名空间只有用于捕获带有声音的视频的对象的类 ( `CameraCaptureUI`, `MediaCapture`)。我对对象的功能并不感到困扰，但事实上我必须在应用程序的清单中包含麦克风功能，并且应用程序使用它没有意义。我需要一个只使用网络摄像头功能的类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:21:28.427

我找到了答案，我想我应该分享它。很抱歉回答我自己的问题，但这里是：

可以在 MediaCapture 对象的设置中指定，在初始化它时，它将仅使用 Video 部分：

```
var mediaCaptureMgr = new MediaCapture();
var captureSettings = new MediaCaptureInitializationSettings();
captureSettings.StreamingCaptureMode = StreamingCaptureMode.Video;
await mediaCaptureMgr.InitializeAsync(captureSettings); 
```

实时调频！

# ios - 具有本地化字符串的核心数据排序描述符

> ID：14481317
> 
> 赞同：1
> 
> 时间：2013-01-23T13:48:27.270
> 
> 标签：ios, objective-c, cocoa, core-data

我需要一些建议。我对核心数据比较陌生。

我有一个原则上运行良好的核心数据模型。它有一个实体“RoomType”。该实体只有一个 String 类型的属性和一个与实体“Room”的关系（多）（其中逆是单关系）。关系无所谓。让我抓狂的是字符串和 sortDescriptor。

数据库内容为英文。该表是一些设置表，在安装应用程序时动态填充，用户永远不会更改。对于任何德语和第三语言，我都需要翻译这些数据。我为此目的使用 NSLocalizedString 宏并且它运行良好 - 除了按其翻译值对数据进行排序。

（对于未来的版本，我将允许用户添加记录。但那些手动添加的记录不需要翻译。）

这是自动生成的 RoomType.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Room;

@interface RoomType : NSManagedObject

@property (nonatomic, retain) NSString * typeName;
@property (nonatomic, retain) NSSet *rooms;
@end

@interface RoomType (CoreDataGeneratedAccessors)

- (void)addRoomsObject:(Room *)value;
- (void)removeRoomsObject:(Room *)value;
- (void)addRooms:(NSSet *)values;
- (void)removeRooms:(NSSet *)values;

@end 
```

没什么不寻常的，我会说。

这是我的视图控制器中的 fetchedResultsController getter 方法：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.

    self.managedObjectContext = [(AppDelegate*) [[UIApplication sharedApplication] delegate] managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"RoomType" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"typeName" ascending:YES];
    [fetchRequest setSortDescriptors: @[sortDescriptor]];

    // Set the predicate // No predicate because we want to fetch all items
    //NSPredicate *predicate =
    //[NSPredicate predicateWithFormat:@"suite == %@", self.detailItem];
    //[fetchRequest setPredicate:predicate];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Suite"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

数据被送入选择器：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

    int anzahl = [[self.fetchedResultsController fetchedObjects] count];
    return anzahl;
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    NSManagedObject *object = [[self.fetchedResultsController fetchedObjects] objectAtIndex:row];

    RoomType    *roomType   = (RoomType*) object;
    NSLog(@"%@ - %@", roomType.typeName, NSLocalizedString(roomType.typeName, @"Room-Type"));

    return NSLocalizedString(roomType.typeName, @"Room-Type");  // <-- HERE COMES THE TRANSLATION!
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    Room *theRoom = (Room*) [self detailItem];

    //Ignore the component cause there is only one.
    theRoom.roomType = [[self.fetchedResultsController fetchedObjects] objectAtIndex:row];

} 
```

请记下数据库内容本地化的 NSLocalzedString。这是 NSLogs 的输出：

```
2013-01-23 14:38:38.179 Wohnungsprotokoll[1311:c07] attic - Dachboden
2013-01-23 14:38:38.184 Wohnungsprotokoll[1311:c07] balcony - Balkon
2013-01-23 14:38:38.187 Wohnungsprotokoll[1311:c07] bath room - Badezimmer
2013-01-23 14:38:39.659 Wohnungsprotokoll[1311:c07] bed room - Schlafzimmer
2013-01-23 14:38:39.831 Wohnungsprotokoll[1311:c07] cellar - Keller
2013-01-23 14:38:40.789 Wohnungsprotokoll[1311:c07] children room - Kinderzimmer
2013-01-23 14:38:41.043 Wohnungsprotokoll[1311:c07] closet - Kammer
[...] 
```

如您所见，英语中的原始数据已正确排序，但德语翻译（在“-”之后）未正确排序。

到目前为止很明显。但是我该如何解决呢？

有没有什么聪明的方法可以按数据库内容的本地化值进行排序？我的意思是另一种方法，而不是将数据复制到数组中并随后对该数组进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:21:09.627

Core Data 获取请求（对于基于 SQLite 的存储）只能对持久属性进行排序，并且也不能使用基于 Objective-C 的排序描述符。所以（据我所知）没有办法让获取的结果控制器返回根据函数排序的对象，例如`NSLocalizedString`. （唯一的方法是将翻译后的字符串作为附加属性存储在核心数据实体中。）

但是，如果数据是完全静态的（如您所说），您实际上并不需要获取结果控制器。您可以使用 获取对象，`executeFetchRequest`然后根据需要对结果数组进行排序：

```
NSArray *unsortedRooms = [self.managedObjectContext executeFetchRequest:fetchRequest error:NULL];
NSArray *sortedRooms = [unsortedRooms sortedArrayUsingComparator:
           ^NSComparisonResult(RoomType *rt1, RoomType *rt2) {
               NSString *name1 = NSLocalizedString(rt1.typeName, @"Room-Type");
               NSString *name2 = NSLocalizedString(rt2.typeName, @"Room-Type");
               return [name1 compare:name2];
           }
]; 
```

（获取结果控制器的优点是它监视其关联的托管对象上下文中对象的更改，并将结果集的更改报告给其委托，通常是表视图。但在您的情况下，对象不会更改。）

# powershell - PowerShell 2.0 磁盘空间检查

> ID：14481318
> 
> 赞同：0
> 
> 时间：2013-01-23T13:48:27.587
> 
> 标签：powershell

下面是检查磁盘空间的代码：

```
$disks = Get-WmiObject -ComputerName WDSMS01 -Namespace root\cimv2 -Query "Select * from Win32_LogicalDisk where DriveType=3"

$disks.DeviceID
$dsql01 = @()

foreach($db in $disks)
{
    $dsql = New-Object PSObject
    $dsql | Add-Member -MemberType NoteProperty -Name "Drive Name" -value $db.DeviceID
    $dsql | Add-Member -MemberType NoteProperty -Name "Total Space(GB)" -value ($db.Size/1GB)
    $dsql | Add-Member -MemberType NoteProperty -Name "Free Space(GB)" -value ($db.FreeSpace/1GB)
    $dsql01 += $dsql
}

$dsql01 
```

是否可以将小数限制为 2 位？此外，添加另一个以 % 格式计算可用空间的列。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:57:39.517

这在一定程度上取决于您到底需要什么。您可以使用`[Math]::Round`在两位数后四舍五入：

```
[Math]::Round($db.Size/1GB, 2) 
```

但是如果数字后面跟着零，那可能会给您留下少于两位数的数字，例如`14.6`在表格中看起来不太好。

另一种选择是格式化数字：

```
($db.Size/1GB).ToString('0.00') 
```

这将始终使用相同数量的十进制数字，*但*会产生一个字符串，因此执行进一步的计算可能会受到阻碍。

至于你的第二个问题，这实际上是微不足道的，只需添加另一个`Add-Member`调用：

```
$dsql | Add-Member NoteProperty 'Free Space (%)' (100*$db.FreeSpace/$db.Size) 
```

您也可以（在 PowerShell v2 中）将所有这些放在一个`New-Object`调用中：

```
$dsql = New-Object PSObject -Property @{
    'Drive Name' = $db.DeviceID
    'Total Space (GB)' = $db.Size / 1GB
    'Free Space (GB)' = $db.FreeSpace / 1GB
    'Free Space (%)' = 100 * $db.FreeSpace / $db.Size
} 
```

当我们这样做时，`foreach`循环不是 PowerShell-y。让我们用管道重写它：

```
$disks = Get-WmiObject -ComputerName WDSMS01 -Namespace root\cimv2 -Query "Select * from Win32_LogicalDisk where DriveType=3"
$disks.DeviceID
$dsql01 = $disks | ForEach-Object {
    New-Object PSObject -Property @{
        'Drive Name' = $_.DeviceID
        'Total Space (GB)' = $_.Size / 1GB
        'Free Space (GB)' = $_.FreeSpace / 1GB
        'Free Space (%)' = 100 * $_.FreeSpace / $_.Size
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:54:14.223

使用格式化程序示例：

```
PS>"{0:N2}" -f (11531055554 /1GB)
10,74 
```

获得百分比：

```
 $pfree=$dsql.free *100 /$dsql.total
 $dsql| Add-Member -MemberType NoteProperty -Name "pFree" -value $pfree 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:04:55.537

试试这个：

`-value ("{0:0.00}" -f ($db.Size/1GB))`

`-value ("{0:0.00}" -f ($db.FreeSpace/1GB))`

# entity-framework - 使用实体框架搜索数据 库。LIKE 运算符

> ID：14481319
> 
> 赞同：0
> 
> 时间：2013-01-23T13:48:34.667
> 
> 标签：entity-framework, tsql, search

我想使用 Entity Framework 5 搜索我的一张表。我不知道查询中有多少单词，但我想匹配所有单词。

查询=*你好*

```
SELECT * FROM [table] WHERE [column] LIKE '%hello%' 
```

查询=*你好世界*

```
SELECT * FROM [table] WHERE [column] LIKE '%hello%' AND [column] LIKE '%world%' 
```

我知道功能[PATINDEX](http://msdn.microsoft.com/en-us/library/ms188395.aspx)，但它不够好。为什么？我会给你看：

```
SELECT * FROM person WHERE PATINDEX('%test%.com%', email)>0 
```

将匹配“test@email.com”，但如果搜索词以其他方式排序，则找不到此人：

```
SELECT * FROM person WHERE PATINDEX('%.com%test%', email)>0 
```

使用 EF 创建此查询的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:56:17.680

使用 linq to entity 你可以使用 .Contains 在 SQL 中做等价

```
 table(x => x.column).Where(y => y.ColumnName).Contains("hello"); 
```

抱歉忘记了应该起作用的 where 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:46:08.583

`foreach`您可以在循环中构建查询：

```
var words = new[] {"com", "test"};
var table = <your initial DbSet or ObjectSet>

foreach (var word in words)
{
    string word1 = word; // prevent modified closure.
    table = table.Where(x => x.column.Contains(word1));
}

var result = table.ToList(); // Enumerate the composed linq query. 
```

该`Contains`函数转换为`LIKE`包含在`%`字符中的搜索词。

# c++ - HoughCircle 函数是如何工作的？我无法让它正常工作

> ID：14481321
> 
> 赞同：0
> 
> 时间：2013-01-23T13:48:38.190
> 
> 标签：c++, opencv

我正在尝试从摄像机中找到橙色球。

我将每一帧转换为 HSV，将其模糊，并使用 inRange 过滤橙色。然后我应用 HoughCircles 函数，但找不到正确的参数。

当它工作时，它不是很稳定：并不总是检测到圆圈。

这是屏幕截图和设置代码：

[截屏](http://i.imgur.com/QbZ9Eac)

```
#include <cv.h> 
#include <highgui.h> 
#include <stdio.h>  
#include <vector>

using namespace cv;

int hmin[2] = {2,0}, smin[2] = {163,104}, vmin[2] = {16,29};
int hmax[2] = {16,25}, smax[2] = {255, 255}, vmax[2] = {212,255};

int p1 = 6, p2 = 12;
int f1 = 9, f2 = 3;
int main() {
     VideoCapture cap(0);
     if(!cap.isOpened()) {
          fprintf( stderr, "ERROR: capture is NULL \n" );
          return -1;
     }

     namedWindow( "couleur", CV_WINDOW_AUTOSIZE );

     namedWindow( "filtre1", CV_WINDOW_AUTOSIZE );
     createTrackbar("hmin[0]", "filtre1", &hmin[0], 180, NULL);
     createTrackbar("smin[0]", "filtre1", &smin[0], 255, NULL);
     createTrackbar("vmin[0]", "filtre1", &vmin[0], 255, NULL);
     createTrackbar("hmax[0]", "filtre1", &hmax[0], 180, NULL);
     createTrackbar("smax[0]", "filtre1", &smax[0], 255, NULL);
     createTrackbar("vmax[0]", "filtre1", &vmax[0], 255, NULL);

     namedWindow( "hough", CV_WINDOW_AUTOSIZE );
     createTrackbar("p1", "hough", &p1, 500, NULL);
     createTrackbar("p2", "hough", &p2, 500, NULL);

     createTrackbar("f1", "hough", &f1, 30, NULL);
     createTrackbar("f2", "hough", &f2, 30, NULL);
     std::vector<Vec3f> cercle;

     while ( 1 ) {
          Mat frame, hsv, orange;
          cap >> frame;

          f1 = f1%2?f1:f1+1;

          cvtColor(frame, hsv, CV_BGR2HSV);
          GaussianBlur(hsv, hsv, Size(f1, f1), f2, f2 );
          inRange(hsv, Scalar(hmin[0],smin[0],vmin[0]), Scalar(hmax[0],smax[0],vmax[0]), orange);

          if(p1 <= 0)
               p1 = 1;

          if(p2 <= 0)
               p2 = 1;

          HoughCircles(orange, cercle, CV_HOUGH_GRADIENT, 2, orange.rows/4, p1, p2, 0, 30);

          for(uint i = 0; i < cercle.size(); i++) {
               Point c(cvRound(cercle[i][0]), cvRound(cercle[i][1]));
               int r = cvRound(cercle[i][2]);
               circle(frame, c, 3, Scalar(0,255,0), -1, 8, 0);
               circle(frame, c, r, Scalar(255,0,0), 3, 8, 0);
               printf("%d) %d %d %d\n", i, c.x, c.y, r);
          }
          printf("---\n");
          cercle.clear();

          imshow("couleur", frame );
          imshow("filtre1", orange );

          if ( (waitKey(10) & 255) == 27 ) break;
     }
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:47:39.770

以下是一些有效的参数。

![在此处输入图像描述](../Images/6dd747005c1f6084dad02a2ad34a5f19.png) ![在此处输入图像描述](../Images/8dba941b00d8ac0dce74d76bcc1ef9c3.png)

param1（内部 Canny 边缘检测器的上限阈值）固定为 100

在将图像传递给 HoughCircles() 之前，图像被转换为​​灰度并应用 ksize 5 的中值模糊。

虽然这适用于这个静止帧，但我确信一系列视频帧会显示出相当多的变化和不稳定性。例如，要找到这个图像的设置来挑选两个球但不选择盒子上的白色标签是非常棘手的。

# c# - 是否可以在一个 Excel 实例中使用多核？

> ID：14481324
> 
> 赞同：3
> 
> 时间：2013-01-23T13:48:53.590
> 
> 标签：c#, excel, multicore

我必须对 10,000 多个 Excel 文件应用简单的格式。我已经有一个多核程序正在运行。它为每个 Excel 文件打开一个新的 Excel 实例。如果重要，此代码当前位于我的表单代码中。

我希望将一个 Excel 实例与许多工作簿一起使用。如果我只使用一个 Excel 实例，是否可以使用多核功能？如何？

- 如果上述答案是否定的，一个更复杂的问题可能是：我应该生成多少个 Excel 实例，以及如何在每个实例之间拆分工作簿？

当前代码在这里：

```
private void SelectFilesButtonClick(object sender, EventArgs e)
{
   var listOfExcelFiles = OpenExcel.FileNames.ToList();
   Parallel.ForEach(listOfExcelFiles, TrivialExcelEditFunction);
}

private void TrivialExcelEditFunction(string file)
{
   //Open instance of Excel
   //Do processing
   //Close instance of Excel
} 
```

更新了下面的代码，但仍不限于适当的内核数量。不知道为什么。

```
private void SelectFilesButtonClick(object sender, EventArgs e)
{
   var listOfExcelFiles = OpenExcel.FileNames.ToList();
   int cores = Environment.ProcessorCount;

   //Split one list into list of lists. Number of lists based on number of cpu cores
   List<List<object>> listOfLists = Split(listOfExcelFiles, cores);

   //Limits number of threads to number of cores
   Parallel.ForEach(listOfLists, new ParallelOptions { MaxDegreeOfParallelism = cores }, EditExcel);
}

private void TrivialExcelEditFunction(string file)
{
   //Open instance of Excel

   foreach (string file in files)
   {
       //Do processing
   }
   //Close instance of Excel
} 
```

假设我有 4 个核心。我的想法是将文件列表分成 4 个相等的列表，将线程限制为 4 个，然后我就可以在 4 个 Excel 实例中处理文件。我*认为*这意味着 TrivialExcelEditFunction 只会运行 4 次。相反，这个函数运行了 14 到 27 次。请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:10:51.233

正如@Servy 指出的那样，您可以创建多个线程，每个线程一个 Excel 实例。

确保每个线程都创建它正在使用的 Excel 对象。

期待诡异。拥有 10,000 多个文件，您可能至少会遇到一些小问题。如果隐藏的 Excel 实例试图提示用户，它可能会显示为冻结状态。

Word 在使用一些调用单线程 COM 对象的函数时会出现一些问题，我怀疑 Excel 可能也有一些问题。在 Word 中，这些以各种方式表现出来，包括实例冻结或关闭。

如果格式非常简单并且您的文件是 xmlx，那么编写一些代码以通过 OOXML SDK 应用更改可能是可行的，这不需要实际的 Excel 实例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:03:26.417

创建 N 个任务/线程来执行处理，其中“N”是您机器上的内核数。给每个任务/线程一个`Excel`.

您将无法从多个线程控制单个实例（至少不能有效；它一次只能处理一个线程的任务），并且创建如此多的 Excel 实例效率非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:52:55.177

我认为这就是@Servy 上面所指的。我现在每天都在我正在使用的一段代码中使用它，它确实可以处理 Excel，而且肯定还没有失败。还要确保正确编组 COM 对象。还有一点额外的信息，Excel 2010 在内部使用多核，注意性能（尤其是大文件）。

```
var tasks = new Task[Environment.ProcessorCount];

for (int i = 0; i< Environment.ProcessorCount; i++)
{
    tasks [i] = Task.Factory.StartNew(() =>
    {
        // your Excel code here.                 
    });
}

Task.WaitAll(tasks); 
```

# java - 删除 Derby 条目

> ID：14481326
> 
> 赞同：1
> 
> 时间：2013-01-23T13:48:58.020
> 
> 标签：java, jpa, eclipselink, derby

我使用 JPA 通过 eclipse 链接将数据添加到 Derby DB，并且当 ID 重复时。

**我收到错误，在运行时**（使用代码）有一种方法可以简单地删除所有表条目。

每次调用程序时，我都不需要旧条目，只需要新条目。

我试过了

```
factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
EntityManager entityManager = factory.createEntityManager();

entityManager.getTransaction().begin();

Query query = entityManager.createQuery("SELECT p FROM Job p ");

List resultList = query.getResultList();

for (Object result : resultList) {
    entityManager.remove(result);
}

entityManager.getTransaction().commit();
entityManager.close(); 
```

但在这里我以前使用查询，我不想这样做，我想删除**所有条目**，我不在乎之前有什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:51:10.990

每次应用程序启动时，您都可以在运行时使用 SQL DELETE 查询。如果您不发布一些代码，我们将无能为力。

**编辑 ：**

您可以在某个较早的事务或查询之前的同一事务中执行如下查询：

```
int deletedCount = entityManager.createQuery("DELETE FROM Job").executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:29:53.390

您可以执行删除查询，或者配置持久性单元以在部署持久性单元时重新创建表。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_ddl_generation.htm#BABHEJJI](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_ddl_generation.htm#BABHEJJI)

# sql - SQL 查询：包括来自同一个表的基于不同条件的两个总和

> ID：14481328
> 
> 赞同：2
> 
> 时间：2013-01-23T13:49:08.803
> 
> 标签：sql

我目前有以下 sql 查询

```
SELECT [Date], DATENAME(dw,[Date]) AS Day, SUM(Units) AS TotalUnits
FROM tblTimesheetEntries 
WHERE UserID = 'PJW' 
AND Date >= '2013-01-01' 
GROUP BY [Date] 
ORDER BY [Date] DESC; 
```

它返回给定用户和日期的总 [单位]。

但是，我想根据新标准生成两个单独的总单位，即 [Units] 是否“收费或不收费”。tblTimeSheets 中有一个名为 Chargeable 的字段，它是一个布尔值（true 表示可收费，false 表示不收费）。我如何合并它来为每种类型的单位显示两个总和？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:52:19.810

您可以使用 a`CASE`来`SUM()`计算单独的总数：

```
SELECT [Date], 
    DATENAME(dw,[Date]) AS Day, 
    sum(case when Chargeable = 1 then Units else 0 end) ChargeableTotal,
    sum(case when Chargeable = 0 then Units else 0 end) NotChargeableTotal,
    sum(Units) AS TotalUnits
FROM tblTimesheetEntries 
WHERE UserID = 'PJW' 
    AND Date >= '2013-01-01' 
GROUP BY [Date] 
ORDER BY [Date] DESC; 
```

# c# - 如何更改资源文件夹中的图像

> ID：14481330
> 
> 赞同：0
> 
> 时间：2013-01-23T13:49:13.010
> 
> 标签：c#, winforms, openfiledialog

我是一名学习 c# 并致力于`winform`.

我有一个 winform，它有一个`splashForm`从资源文件夹加载其背景图像的文件。在*启动画面*之后，`mainForm`有一个选项可以使用`openFileDialog`.

我想根据选定的*资源*文件夹*图像**`splashimage.jpg`*替换图像（ ） 。我想将用户选择的图像复制到资源文件夹并删除以前的图像并将新复制的图像的图像重命名为（）。***`splashimage.jpg`***

 **我有这段代码，但它不适用于根据所选图像替换*资源*`openFileDialog`文件夹中的图像。

```
 var FD = new System.Windows.Forms.OpenFileDialog();
                FD.Filter = "jpeg files|*.jpg";
                if (FD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
                {
                   System.IO.File.Copy(FD.FileName,Application.StartupPath
+ "\\" + splashimage.jpg", true);           
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:31:07.237

这是对的：

```
this.BackgroundImage = Image.FromFile(Application.StartupPath
+ "\\" + splashimage.jpg") 
```

这是错误的：

```
this.BackgroundImage = Image.FromFile("Application.StartupPath"
+ "\\" + splashimage.jpg") 
```**

# c# - 为什么将子级添加到复合服务器控件会放大视图状态？

> ID：14481332
> 
> 赞同：0
> 
> 时间：2013-01-23T13:49:23.350
> 
> 标签：c#, asp.net, viewstate, servercontrols

我有复合网络服务器控件，目前不执行任何操作。我的目标是在其中放置以复选框开头的子控件。我尝试通过以下方式做到这一点：

```
[DefaultProperty("Text")]
[ToolboxData("<{0}:SubmitImageControl runat=\"server\"></{0}:SubmitImageControl>")]
public class SubmitImageControl : CompositeControl
{
    private CheckBox _checkBox;

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
    }

    protected override void CreateChildControls()
    {
        _checkBox = new CheckBox();
        Controls.Add(_checkBox);
        base.CreateChildControls();
    }
    protected override void RenderContents(HtmlTextWriter output)
    {
        _checkBox.RenderControl(output);
    }
} 
```

注册并在页面上放置：

```
<%@ Register TagPrefix="uc" Namespace="PostBackHandlerApp.Controls" Assembly="PostBackHandlerApp" %>
<uc:SubmitImageControl runat="server" /> 
```

复选框出现在页面上，一切看起来都很好，直到我们查看视图状态。它的值为

```
/wEPDwULLTExMTg2MzM0NjJkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBR1jdGwwMCRNYWluQ29udGVudCRjdGwwMCRjdGwwMD+PWeqrbtVyQSNMxvfjcmJkKAwpIuEPWJd+m5W6eJtQ 
```

然后，如果我们简单地删除代码**Controls.Add(_checkBox);** ，视图状态大小大大减小：

```
/wEPDwULLTExMTg2MzM0NjJkZLrri0oSGPS9ZiOTsRtSageoskXzCME4KCdRZxOiJyR9 
```

如果我移动子初始化代码并添加到我的控件的 OnInit 方法（据我所知，视图状态跟踪仍然被禁用），结果保持不变。此外，[这篇](http://msdn.microsoft.com/en-us/library/3257x3ea.aspx)MSDN 文章建议仅在 CreateChildControls 方法中执行初始化：

> 您应该在 CreateChildControls 方法中创建子控件，而不是在 OnInit 或其他生命周期阶段。无论何时需要 Controls 集合，例如在数据绑定期间（如果适用），服务器控件体系结构都依赖于对 CreateChildControls 的调用。

谁能解释一下为什么视图状态会变大？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:08:20.490

您是否尝试过禁用控件中复选框的视图状态。除非您另有说明，否则我认为视图状态必须考虑此控制？如果您想在生命周期内轻松使用此控件，尽管您希望启用视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:06:14.330

填充视图状态的原因是通过大部分数据控件实现*IPostBackDataHandler接口，包括复选框。*在 LoadViewState 事件和视图状态从发布的数据中填充后，接口的方法 LoadPostData 会自动调用。 [这](http://www.codeproject.com/Articles/154354/Why-textbox-persists-data-during-postback-even-if)是关于它的好文章。

# php - OpenGraph 设置自定义 PLAY 动作

> ID：14481333
> 
> 赞同：0
> 
> 时间：2013-01-23T13:49:24.257
> 
> 标签：php, facebook-graph-api, facebook-opengraph

嗨，我已成功在 openGraph 上提交了我的 PLAY 操作，

就一个问题 ：

要提交样本，我使用它：

$facebook = 新的 Facebook($config);

```
$user_id = $facebook->getUser();

if($user_id) {

 try {
    $ret_obj = $facebook->api('/me/mupizfb:play', 'POST',
        array(
            'song' => "http://www.mupiz.com/profil.php?id1=1"
        ));
    echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';

  } catch(FacebookApiException $e) {
        error_log($e->getType());
        error_log($e->getMessage());

  }   
} else echo"not connected with FB"; 
```

我没有收到任何错误.. 但是 Facebook 上没有发布任何想法？

谢谢！

# html - 如何使从任何图像精灵而不是单个图像中获取的图像看起来更小？

> ID：14481340
> 
> 赞同：0
> 
> 时间：2013-01-23T13:49:47.410
> 
> 标签：html, css, css-sprites

我有一个图像精灵，我希望它的某些部分使用 css 看起来更小？你有什么建议吗..??? 感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:56:56.937

没办法使用 CSS2。但是，使用 CSS3，您可以使用*backgound-size*属性来做到这一点，以防您的精灵被设置为元素的背景。

在这个问题中查看如何执行此操作的示例：[set size on background image with css](https://stackoverflow.com/questions/1341358/set-size-on-background-image-with-css)

# php - 使用 php 对从图库中获取图像进行排序的简单方法？

> ID：14481341
> 
> 赞同：0
> 
> 时间：2013-01-23T13:49:50.947
> 
> 标签：php, image, file, readdir, opendir

你好，stackoverflow的好人。

我有这段代码，基本上可以获取我放置在名为“图片”的文件夹中的任何照片，并将它们显示在我的页面上。这一切都很好，它也适用于灯箱。

我的主要问题是，有没有一种简单的方法可以以某种顺序显示照片？即第一张最新照片？

```
<?php $handle = opendir(dirname(realpath(__FILE__)).'/pictures/');
while($file = readdir($handle)){if($file !== '.' && $file !== '..'){
echo '<a href="pictures/'.$file.'" rel="lightbox"><img src="pictures/'.$file.'" border="0" /></a>';}}?> 
```

我知道代码非常粗俗和古老，但它仅用于示例页面，因此不需要很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:57:10.623

您可以使用 php 的 filemtime() 来订购它们：http: [//php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)

```
<?php 
   $path = dirname(realpath(__FILE__)).'/pictures/';
   $handle = opendir($path);
   $arrFiles = array();

   while($file = readdir($handle))
   {
      if($file !== '.' && $file !== '..')
      {
          $arrFiles[filemtime($path.$file)] = '<a href="pictures/'.$file.'" rel="lightbox"><img src="pictures/'.$file.'" border="0" /></a>';
      }
   }
   arsort($arrFiles);
   foreach ($arrFiles as $file)
   {
       echo $file;
   }
?> 
```

# c# - 格式化 TimeSpan 字符串

> ID：14481342
> 
> 赞同：1
> 
> 时间：2013-01-23T13:49:52.230
> 
> 标签：c#, visual-studio-2010, timespan, monthcalendar

我有一个带有日历和 7 个标签的小型 C# 程序。当我选择一个日期时，标签会显示该周的日期和日期。

使用`TimeSpan`字符串填充标签我想要做的是格式化这个字符串，以便它只显示没有时间的日期和日期。

这是我到目前为止的代码：

```
 private void monthCalendar1_DateSelected(object sender, DateRangeEventArgs e)
        {
            DateTime dTime = new DateTime();
            dTime = monthCalendar1.SelectionStart;
            dTime -= new TimeSpan((int)dTime.DayOfWeek, 0, 0, 0 );

            for (int i = 1; i < 8; i++)
            {
                var dt = dTime.AddDays(i);
                lb[i].Text = dt.DayOfWeek + " : " + dt.Date;                         
            }           
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:50:58.080

你可以打电话`dt.Date.ToShortDateString()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:51:29.553

用方法试试[`DateTime.ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)；

> 将当前 DateTime 对象的值转换为其等效的短日期字符串表示形式。

```
DateTime dt = DateTime.Now;
label8.Text = dt.Date.ToShortDateString()); 
```

您可以从中了解更多详细信息[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:55:29.003

您有多种选择。

您可以使用类型`ToShortDateString()`的方法`DateTime`

```
lb[i].Text = dt.DayOfWeek + " : " + dt.Date.ToShortDateString() 
```

或者您可以为该`ToString("format")`方法提供一种格式，以准确指定您希望它的外观。

```
lb[i].Text = dt.DayOfWeek + " : " + dt.Date.ToString("MM/dd/yyyy"); 
```

# iphone - 任何来自 Open Soucre ios 代码的好网站都具有最新的开源 iOS 代码？

> ID：14481343
> 
> 赞同：-3
> 
> 时间：2013-01-23T13:49:53.710
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我想从具有最新开源 iOS 代码的开源 ios 代码中了解任何好的网站？这样我们就可以更新和学习新事物。

我知道 github，但是在 github 中我们搜索我们想要的东西，我想知道这种类型的网站或博客向我介绍了我不知道的新事物。

我是新手，这就是为什么我需要这种类型的网站链接。

欢迎专家提供任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:51:33.460

看看这里： http: [//www.cocoacontrols.com/](http://www.cocoacontrols.com/)，你会玩得很开心。

洛里斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:51:47.930

这是适用于 iOS 的所有开源代码的好链接

[http://maniacdev.com/2010/06/35-open-source-iphone-app-store-apps-updated-with-10-new-apps/](http://maniacdev.com/2010/06/35-open-source-iphone-app-store-apps-updated-with-10-new-apps/)

还，

在[https://github.com/search](https://github.com/search)可以搜索，`Objective-C`可以找到很多项目

希望对你有帮助。。

# c++ - 如何让 minixml 数据的呈现更具可读性？

> ID：14481349
> 
> 赞同：2
> 
> 时间：2013-01-23T13:50:10.017
> 
> 标签：c++, c, xml, mini-xml

我在我的 C 程序中使用 minixml。当我将 minixml 树保存到具有该`mxmlSaveFile(bkp_tree, fp, MXML_NO_CALLBACK);`功能的文件中时，我将整个 xml 数据放在一个 bloc 中。在文件中显示 xml 结构时没有组织（新行，缩进...）。

xml数据就是这样保存的

```
<B1><BB1>BBB1</BB1></B1><B2><BB2>BBB2</BB2></B2><B3><BB3>BBB3</BB3></B3> 
```

如何使 minixml 以下列方式保存 xml 数据？

```
<B1>
    <BB1>BBB1</BB1>
</B1>
<B2>
    <BB2>BBB2</BB2>
</B2>
<B3>
    <BB3>BBB3</BB3>
</B3> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:13:28.863

从[minixml 文档](http://www.minixml.org/documentation.php/advanced.html)复制：

对于每个元素节点，您的回调函数最多会被调用四次，并带有一个指向该节点的指针和一个“where”值`MXML_WS_BEFORE_OPEN`、`MXML_WS_AFTER_OPEN`、`MXML_WS_BEFORE_CLOSE`或`MXML_WS_AFTER_CLOSE`。如果不应添加空格，则回调函数应返回，否则应返回`NULL`要插入的字符串（空格、制表符、回车和换行符）。

以下空白回调可用于向 XHTML 输出添加空白，使其在标准文本编辑器中更具可读性：

```
const char *
whitespace_cb(mxml_node_t *node,
              int where)
{
  const char *name;

 /*
  * We can conditionally break to a new line
  * before or after any element. These are
  * just common HTML elements...
  */

  name = mxmlGetElement(node);

  if (!strcmp(name, "html") ||
      !strcmp(name, "head") ||
      !strcmp(name, "body") ||
  !strcmp(name, "pre") ||
      !strcmp(name, "p") ||
  !strcmp(name, "h1") ||
      !strcmp(name, "h2") ||
      !strcmp(name, "h3") ||
  !strcmp(name, "h4") ||
      !strcmp(name, "h5") ||
      !strcmp(name, "h6"))
  {
   /*
* Newlines before open and after
    * close...
*/

if (where == MXML_WS_BEFORE_OPEN ||
        where == MXML_WS_AFTER_CLOSE)
  return ("\n");
  }
  else if (!strcmp(name, "dl") ||
           !strcmp(name, "ol") ||
           !strcmp(name, "ul"))
  {
   /*
* Put a newline before and after list
    * elements...
*/

return ("\n");
  }
  else if (!strcmp(name, "dd") ||
           !strcmp(name, "dt") ||
           !strcmp(name, "li"))
  {
   /*
* Put a tab before <li>'s, * <dd>'s,
    * and <dt>'s, and a newline after them...
*/

if (where == MXML_WS_BEFORE_OPEN)
  return ("\t");
else if (where == MXML_WS_AFTER_CLOSE)
  return ("\n");
  }

 /*
  * Return NULL for no added whitespace...
  */

  return (NULL);
} 
```

要使用此回调函数，只需在调用任何保存函数时使用名称：

```
FILE *fp;
mxml_node_t *tree;

fp = fopen("filename.xml", "w");
mxmlSaveFile(tree, fp, whitespace_cb);
fclose(fp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:56:30.417

除了给`MXML_NO_CALLBACK`，你可以给一个回调，它返回每个元素之前和之后应该打印的空白。请参阅 的文档[`mxmlSaveFile`](http://www.minixml.org/documentation.php/reference.html#mxmlSaveFile)。

回调基本上接收的是即将打印的每个节点，其中包含四个可能值之一中的附加参数`MXML_WS_BEFORE/AFTER_OPEN/CLOSE`。在任何一种情况下，您都应该决定这个打开或关闭节点之前或之后的空白应该如何。

（我希望）输出您想要的示例如下：

```
static const char *_xml_whitespace_callback(mxml_node_t *node, int where)
{
    const char *name = node->value.element.name;

    if (node->type != MXML_ELEMENT)
        return NULL;
    if (name == NULL)
        return NULL;

    switch (where)
    {
    case MXML_WS_BEFORE_OPEN:
        if (strcmp(name, "B1") == 0
                || strcmp(name, "B2") == 0)
                || strcmp(name, "B3") == 0))
            return NULL;
        if (strcmp(name, "BB1") == 0
                || strcmp(name, "BB2") == 0)
                || strcmp(name, "BB3") == 0))
            return "\t";
        return NULL;
    case MXML_WS_AFTER_OPEN:
        if (strcmp(name, "B1") == 0
                || strcmp(name, "B2") == 0)
                || strcmp(name, "B3") == 0))
            return "\n";
        if (strcmp(name, "BB1") == 0
                || strcmp(name, "BB2") == 0)
                || strcmp(name, "BB3") == 0))
            return NULL;
        return NULL;
    case MXML_WS_BEFORE_CLOSE:
        return NULL;
    case MXML_WS_AFTER_CLOSE:
        return "\n";
    default:
        return NULL;
    }
} 
```

# android - 无法在android中创建表

> ID：14481356
> 
> 赞同：0
> 
> 时间：2013-01-23T13:50:31.863
> 
> 标签：android, android-sqlite

我的应用程序无法创建简单表。请看下面的代码，

数据库处理程序.java

```
public class DatabaseHandler extends SQLiteOpenHelper {

private static final int DB_VERSION = 1;
private static final String DB_NAME = "PASSENGER_INFO_DB";
private static final String TABLE_NAME = "PASSENGER_INFO";
private static final String TABLE_COLUMN_SEAT_NO = "SEAT_NO";
private static final String TABLE_COLUMN_NAME = "NAME";
private static final String TABLE_COLUMN_AGE = "AGE";
private static final String TABLE_COLUMN_GENDER = "GENDER";
private static final String TABLE_COLUMN_FOOD_PREF = "FOOD_PREF";

private static final String CREATE_PASSENGER_INFO_TABLE = "CREATE TABLE IF NOT EXISTS "
        + TABLE_NAME + " ( " + TABLE_COLUMN_SEAT_NO
        + " TEXT PRIMARY KEY, " + TABLE_COLUMN_NAME + " TEXT, "
        + TABLE_COLUMN_AGE + " INTEGER, " + TABLE_COLUMN_GENDER
        + " INTEGER, " + TABLE_COLUMN_FOOD_PREF + " TEXT" + ")";

public DatabaseHandler(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_PASSENGER_INFO_TABLE);
}
public void addPassengerInfo(PassengerInfo passInfo) {
    SQLiteDatabase addPass = this.getWritableDatabase();

    ContentValues values = new ContentValues();

    values.put(TABLE_COLUMN_SEAT_NO, passInfo.getM_seatNo());
    values.put(TABLE_COLUMN_NAME, passInfo.getM_name());
    values.put(TABLE_COLUMN_AGE, passInfo.getM_age());
    values.put(TABLE_COLUMN_GENDER, passInfo.getM_gender());
    values.put(TABLE_COLUMN_FOOD_PREF, passInfo.getM_foodPref());

    addPass.insert(TABLE_NAME, null, values);
    addPass.close();
} 
```

在 MainActivity.java

```
DatabaseHandler dbhandler = new DatabaseHandler(this);
addSeat = "1A";
passName = "NA";
passAge = 0;
passGender = -1;
passFoodPref = "NA";
dbhandler.addPassengerInfo(new PassengerInfo(addSeat, passName, passAge, passGender, passFoodPref)); 
```

（PassengerInfo.class 具有字段的 getter 和 setter 方法）

当我运行它时，我在 logcat 中收到以下错误，

```
01-23 19:09:18.311: I/Database(1303): sqlite returned: error code = 1, msg = table PASSENGER_INFO has no column named SEAT_NO
01-23 19:09:18.370: E/Database(1303): Error inserting FOOD_PREF=NA NAME=NA AGE=0 GENDER=-1 SEAT_NO=1A 
```

我还通过 adb shell 检查了在数据库中创建的表，没有名称为 PASSENGER_INFO 的表。请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:55:00.723

您最后在创建表中缺少一个分号

```
+ " TEXT" + ");"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:06:57.580

“);”后面的分号 缺少查询的和。Ps 不鼓励您将数据插入数据库的方式，您应该使用**Contentvalues**

```
 ContentValues row = new ContentValues();
     row.put("SEAT_NO",tid);
     row.put("NAME", sid);
     row.put("AGE", rsubject);
     row.put("GENDER",rdescr);
     row.put("FOOD_PREF", day);

     long chk = db.insert("PASSENGER_INFO",null, row); 
```

此外，一个适当的查询就像

```
 db.execSQL(" CREATE TABLE " + DATABASE_MARKSTABLE + " (" +
                "SEAT_NO" + " TEXT PRIMARY KEY, " +
                "NAME" + " TEXT NOT NULL, " +
                "AGE" + " INTEGER NOT NULL, " +
                "GENDER" + " INTEGER NOT NULL, " +
                "FOOD_PREF" + " TEXT);"
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:58:03.637

您是否尝试过增加数据库编号？另外，尝试更改此行

```
+ TABLE_COLUMN_SEAT_NO
    + " TEXT PRIMARY KEY, " 
```

至

```
+ TABLE_COLUMN_SEAT_NO
    + " TEXT, " 
```

添加一个单独的列来表示 rowId，更新您的数据库版本号并重新运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T17:52:31.150

我*假设*您创建了表 ( `PASSENGER_INFO`)，但没有`SEAT_NO`稍后添加它的列。您需要做的是增加`DB_VERSION`并重新运行应用程序。什么会导致 DatabaseHandler`onUpdate()`运行。您没有显示该代码，但希望它删除表，然后调用`onCreate()`以重新创建表（现在使用`SEAT_NO`列）。

旁注：我会将该表的主键更改`_id`为您拥有它的方式，您将只能存储一个航班的座位价值......当然设计取决于您。

# c++ - 无法在 gdb 中设置断点

> ID：14481362
> 
> 赞同：1
> 
> 时间：2013-01-23T13:50:46.520
> 
> 标签：c++, gdb, opensuse

我使用 openSUSE 作为我的操作系统和 gdb 7.5。我想用 gdb 和断点调试我的程序。但是当我下一个断点，然后运行我的程序时，gdb 会通知我如下：

```
Error in re-setting breakpoint 1: malformed linespec error: unexpected string, ".cpp" 
```

在我所有的程序中都是一样的。此外，当运行到断点时，程序根本不会停止。谁能告诉我出了什么问题？

我下载了最新的gdb并安装它，以前的消息消失了，但是当运行gdb时它告诉我：

```
warning: Could not load shared library symbols for linux-gate.so.1\. Do you need "set solib-search-path" or "set sysroot"? 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:02:25.027

> 我使用“b + linenumber”

**这定义了一个相对于当前行**的断点，参见 als [Specifying a Location](http://sourceware.org/gdb/current/onlinedocs/gdb/Specify-Location.html)。使用下面您评论中的代码，以下内容将起作用：

```
$ gdb ./main
(gdb) b +5
Breakpoint 1 at 0x40139c: file main.cpp, line 6.
(gdb) run
[New Thread 1528.0x1930]

Breakpoint 1, main () at main.cpp:5
5           while(scanf("%d%d",&a,&b)!=EOF) 
```

除非有充分的理由指定相对行号，否则我建议您使用绝对行号或函数名称：

```
(gdb) b main
Breakpoint 1 at 0x401395: file main.cpp, line 3. 
```

```
(gdb) b main.cpp:6
Breakpoint 1 at 0x40139c: file main.cpp, line 6. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:10:45.450

gdb 7.5 中有一个已知错误，当​​源文件名以十进制数字开头时，调试器无法解析 linespec。有关详细信息，请参阅[此消息](http://sourceware.org/ml/gdb-patches/2012-07/msg00420.html)。

尝试重命名文件并从您的分发存储库更新 gdb。如果错误仍然存​​在，请向您的发行版维护人员提交错误。

查看提交给 bugzilla的[错误报告](http://sourceware.org/bugzilla/show_bug.cgi?id=14381)中的示例会话。`gdb`

```
(gdb) b 3
Breakpoint 1 at 0x4004c3: file 2.c, line 3.
(gdb) r
Starting program: /home/teawater/tmp/a.out 
Error in re-setting breakpoint 1: malformed linespec error: unexpected string, ".c"
Error in re-setting breakpoint 1: malformed linespec error: unexpected string, ".c"
Error in re-setting breakpoint 1: malformed linespec error: unexpected string, ".c"
Error in re-setting breakpoint 1: malformed linespec error: unexpected string, ".c" 
```

# android - 如何在android中实现中介广告

> ID：14481380
> 
> 赞同：5
> 
> 时间：2013-01-23T13:51:36.947
> 
> 标签：android, admob

我在 android 中实现了中介广告，但它没有显示我目前在广告网络中介中使用 AdMob House Ads 和 Hunt Mobile Ads。

我实现了 xml 和 java 编码方式，但都不适合我。

我的xml代码

```
 <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="6cd435789dcc43c0"
        ads:loadAdOnCreate="true" /> 
```

并且日志猫错误是

```
01-23 19:13:10.079: E/Ads(1771): Cannot find adapter class 'com.huntmads.admobadaptor.HuntMadsAdapter'. Did you link the ad network's mediation adapter? Skipping ad network.
01-23 19:13:10.079: E/Ads(1771): java.lang.ClassNotFoundException: com.huntmads.admobadaptor.HuntMadsAdapter
01-23 19:13:10.079: E/Ads(1771):    at java.lang.Class.classForName(Native Method)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.Class.forName(Class.java:217)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.Class.forName(Class.java:172)
01-23 19:13:10.079: E/Ads(1771):    at com.google.ads.g.a(SourceFile:133)
01-23 19:13:10.079: E/Ads(1771):    at com.google.ads.i.run(SourceFile:116)
01-23 19:13:10.079: E/Ads(1771):    at android.os.Handler.handleCallback(Handler.java:605)
01-23 19:13:10.079: E/Ads(1771):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-23 19:13:10.079: E/Ads(1771):    at android.os.Looper.loop(Looper.java:137)
01-23 19:13:10.079: E/Ads(1771):    at android.app.ActivityThread.main(ActivityThread.java:4424)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.reflect.Method.invokeNative(Native Method)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.reflect.Method.invoke(Method.java:511)
01-23 19:13:10.079: E/Ads(1771):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-23 19:13:10.079: E/Ads(1771):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-23 19:13:10.079: E/Ads(1771):    at dalvik.system.NativeStart.main(Native Method)
01-23 19:13:10.079: E/Ads(1771): Caused by: java.lang.NoClassDefFoundError: com/huntmads/admobadaptor/HuntMadsAdapter
01-23 19:13:10.079: E/Ads(1771):    ... 14 more
01-23 19:13:10.079: E/Ads(1771): Caused by: java.lang.ClassNotFoundException: com.huntmads.admobadaptor.HuntMadsAdapter
01-23 19:13:10.079: E/Ads(1771):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-23 19:13:10.079: E/Ads(1771):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-23 19:13:10.079: E/Ads(1771):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:04:44.603

听起来您已经下载了 Admob 包，但您还需要下载其他类型广告的 .jar 文件。Google 提供了所有中介广告的[说明，以及](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)[Huntmads jar](http://sharing.huntmads.com/SDK/admob/Android/huntmadsadaptor.zip)的特定下载链接。

# javascript - 如何将所有 javascript 警告和错误捕获到输出 div？

> ID：14481381
> 
> 赞同：2
> 
> 时间：2013-01-23T13:51:40.177
> 
> 标签：javascript, debugging, warnings

我正在使用 try、catch 进行调试，但警告不会创建异常。如何获取所有 javascript 警告和错误以输出 div？

**更新：** 如果浏览器支持 Afaik 日志记录，如何将该日志转换为字符串或输出 div？

**更新：** 我找到了如何做到这一点的方法：我可以将 console.log 函数重新加载到我的自定义函数中，并调用本机 console.log 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:00:06.920

首先，摆脱try catch。调试时不要使用 try catch。

其次，您不想将错误输出到 div，为此使用 firebug 或检查器 - console.log();

第三，如果你真的想这样做：你可以使用 try catch 和在 catch 中，使用类似的东西

```
$('body').append($('div').html('variable for error message goes here')); 
```

如果您使用的是 jquery

或者

```
document.getElementByTagName("body").appendChild( document.createTextNode("variable for error message goes here") ); 
```

如果你有普通的 javascript

编辑：尝试查找[即调试栏](https://www.google.ro/search?q=ie%20debugbar&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)，[即 webDeveloper](http://www.ieinspector.com/dominspector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-24T18:39:17.073

我理解自己为什么有人可能希望在文档中出现错误时*实际发生某些事情。*上面的答案只是说您会使用开发人员工具，但我需要实际发生的事情，经过一番搜索，这就是我发现的......

如果您希望捕获所有出现的*错误*，您可以将以下代码放入您的文件中，最好放在顶部：

```
window.onerror = function(errorMsg, url, lineNumber){
    // any action you want goes here
    // errorMsg is the error message itself.
    // url should be the file presenting the error, though i have
    //    found that it only presents to me the address of the site.
    // lineNumber is the line number the error occoured on.
    // here is an example of what you could do with it:
    alert("Error in " + url + " at " + lineNumber + ":\n" + errorMsg);
} 
```

我自己喜欢将错误输出到包含所有错误的 div，尽管您可以对这些信息执行任何操作，就像您可以对传递给函数的任何其他字符串执行的操作一样。

下面是一个示例，如果您使用上面的代码对按钮抛出错误，可能会发生什么：

> your.site.here 中的错误 1：
> 
> 未捕获的 ReferenceError：未定义 foo

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T14:14:40.690

对于 IE javascript 调试，您可以按照以下指南进行操作：

[http://msdn.microsoft.com/en-au/library/ie/gg699336(v=vs.85).aspx](http://msdn.microsoft.com/en-au/library/ie/gg699336(v=vs.85).aspx)

请记住，开发人员工具窗口必须在加载页面之前打开，这样警告和错误才会出现在控制台中。

对于 webkit，(chrome, safari) 开发者控制台 - 这是一个指南：

[https://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

...Firefox 也有一个控制台

# javascript - 是什么导致这个范围 polyfill 出现这种奇怪的行为？

> ID：14481393
> 
> 赞同：0
> 
> 时间：2013-01-23T13:52:17.577
> 
> 标签：javascript, jquery, html, coffeescript

我正在尝试将 HTML5 范围输入转换为一组单选框。每个单选框对应于原始范围内的一个值。每个单选框旁边都有显示其值的文本。

由于某种原因，应该显示最后一个单选框的值的最后一位文本没有出现。这张图片的最右边应该有一个 10。

![在此处输入图像描述](../Images/1c8768b9feb377cbc07bc338ffefd3fc.png)

[这是一个演示](http://codepen.io/anon/pen/nFAjw)。

HTML

```
<div class='range_container'>
    1<input type="range" name="points" min="1" max="10" value='5'>10
    <div class='range_value_display'>5</div>
</div> 
```

咖啡脚本

```
($ "input[type='range']").each (i) ->
    initial_value = ($ this).val()
    radio_name = Math.random().toString(36).substr(2, 5)
    start_value = parseInt(($ this).attr('min'))
    end_value = parseInt(($ this).attr('max'))
    for option_number in [start_value..end_value]
        opts = "#{if opts then opts else ''}<input type='radio' name='#{radio_name}' value='#{option_number}'#{if option_number is parseInt(initial_value) then ' checked' else ''}>#{option_number}"
    ($ this).closest('.range_container').replaceWith ($ opts) 
```

JavaScript

```
($("input[type='range']")).each(function(i) {
    var end_value, initial_value, option_number, opts, radio_name, start_value, _i;
    initial_value = ($(this)).val();
    radio_name = Math.random().toString(36).substr(2, 5);
    start_value = parseInt(($(this)).attr('min'));
    end_value = parseInt(($(this)).attr('max'));
    for (option_number = _i = start_value; start_value <= end_value ? _i <= end_value : _i >= end_value; option_number = start_value <= end_value ? ++_i : --_i) {
        opts = "" + (opts ? opts : '') + "<input type='radio' name='" + radio_name + "' value='" + option_number + "'" + (option_number === parseInt(initial_value) ? ' checked' : '') + ">" + option_number;
    }
    return ($(this)).closest('.range_container').replaceWith($(opts));
}); 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:11:57.147

该`$ opts`部分因缺少外部元素而感到困惑，并且只是删除了文本的尾随位。在你的 JS 控制台中试试这个：

```
$("<span/>5"); 
```

请注意，生成的 jquery 对象中没有 5。奥托：

```
$("<div><span/>5</div>"); 
```

工作正常。因此，您需要将整个东西包装在某种容器中。

一般来说，您的方法也有点令人困惑（逐步替换相同的 DOM 位）。我还发现它很难阅读，因为在输入创建行中塞满了太多东西。这是我要做的：

```
($ "input[type='range']").each (i) ->
  $this = $ this
  initial_value = parseInt($this.val())
  max = parseInt($this.attr 'max')
  min = parseInt($this.attr 'min')
  radio_name = Math.random().toString(36).substr(2, 5)
  $opts = $ '<span>'

  for option_number in [min..max]        
    input = $('<input>')
      .attr('type', 'radio')
      .attr('name', radio_name)
      .val(option_number)
    $opts
      .append(input)
      .append(option_number)
    input.attr("checked", true) if initial_value is option_number

  $this.closest('.range_container').replaceWith $opts 
```

这对我来说更具可读性。也使“10”出现。

# properties - 模式名称/约定 -> 合并来自其他类的不同属性的类

> ID：14481397
> 
> 赞同：0
> 
> 时间：2013-01-23T13:52:23.443
> 
> 标签：properties, merge, design-patterns, convention

我想知道以下场景是否存在已知模式或约定：

我有两个类： MAT (name:String, address:String) & MATversion(type:String, version:int)

现在我有一个 DataGrid (DataTable)，它将为列映射和数据填充获取一个通用的对象列表。

列应该是名称、类型、版本。（在MAT和MAT版本中分布）

所以我创建了一个类来完成这项工作。该类将合并每个类（MAT、MATversion）所需的属性。

-> MAT_MATversion（名称：字符串，类型：字符串，版本：int）。

像 MAT_MATversion 这样的类是否存在命名约定？任何反映这一点的模式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:34:57.950

合并结果必须是唯一类有什么具体原因吗？

我假设每个 MAT 对象都有一个 MATversion 您可以添加几个自定义属性，这些属性将返回底层 MATversion 对象的类型和版本在 C# 中，这将导致类似这样的结果

```
public class MAT{
  public String name{ get;set;};
  public String adress{ get;set;};
  public MATversion myVersion;
  public String type {
    get{
      return myVersion.type;
    }
    set{
      myVersion.type = value;
    }
  }
  public int version {
    get{
      return myVersion.version;
    }
    set{
      myVersion.version = value;
    }
  }
} 
```

我知道这并不能回答有关设计模式的问题，但我不能在评论中询问/建议另一种方法，因为我还没有这个权利。

# iphone - 将此 Flash 应用程序转换为与 iphone 兼容的最佳方法？

> ID：14481401
> 
> 赞同：0
> 
> 时间：2013-01-23T13:52:47.390
> 
> 标签：iphone, ios, html, flash, canvas

我有一个交互式 Flash 动画，我需要能够在 iPhone 上使用，嵌入在 iPhone 应用程序中。

我无法在此处链接动画，但可以在此处找到界面的屏幕截图（非常不言自明） - [http://imgur.com/i4bUgTB](http://imgur.com/i4bUgTB)

这是一个非常简单的交互，只需将答案拖入框中并检查答案是否正确。我的问题是将其转换为可在 iPhone 上使用的东西的最简单/最佳方法是什么？

我最初的想法是使用 Canvas，但我没有深入研究它可以做什么，所以我希望有人能指出我正确的方向。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:05:58.277

Flash 通过脚本将逻辑嵌入其中。您所指的不是“动画”，而是一个工作应用程序。

如果您使用 Actionscript 3，您应该检查此[链接](http://www.adobe.com/devnet/logged_in/abansod_iphone.html)，我自己从未这样做过。如果应用程序的场景如您所描述，那么在您的 iOS 应用程序中使用您的 Flash 源应该不会太难实现恕我直言。

# jqgrid - 在jqgrid中获取单选按钮值

> ID：14481403
> 
> 赞同：0
> 
> 时间：2013-01-23T13:52:48.420
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter, jqgrid-inlinenav

我是 jqGrid 的初学者，我想实现内联编辑并编写以下代码：

```
var gridDocument = jQuery("#listDocument");
            gridDocument.jqGrid({
                url: 'jQGridHandler.ashx',
                postData: { ActionPage: 'ClearanceRequestDocument', Action: 'Fill', RequestId: '3' },
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",
                datatype: 'json',
                height: '490',
                colNames: ['DocumentNO', 'Documentname', 'OrginalCertificate', ' CopyCertificate', 'Remark'],
                colModel: [
                        { name: 'DOCUMENT_ID', width: 200, sortable: true, hidden: true },
                        { name: 'DOCUMENT_NAME', width: 200, sortable: true, editable: false },
                    {
                        name: 'Orignal', width: 80, fixed: true, align: 'center', resizable: false, sortable: false,
                        formatter: function (cellValue, option, rowObject) {
                            return '<input id="t2" type="radio" name="radio_' + rowObject + '" />';
                        }
                    },
                      {
                          name: 'Copy', width: 80, fixed: true, align: 'center', resizable: false, sortable: false,
                          formatter: function (cellValue, option, rowObject) {
                              return '<input id="t1" type="radio" name="radio_' + rowObject + '" />';
                          }
                      },
                     //  { name: 'is_ORGINAL', width: 80, sortable: true, editable: true, formatter: 'checkbox', edittype: 'checkbox', editoptions: { value: 'Yes:No', defaultValue: 'Yes'} },
                       //{ name: 'is_copy', width: 80, sortable: true, editable: true, formatter: 'checkbox', edittype: 'checkbox', editoptions: { value: 'Yes:No', defaultValue: 'Yes'} },
                        { name: 'REMARK', width: 200, sortable: true, editable: false }
                ],

                sortname: 'DOCUMENT_ID',
                viewrecords: true,
                rownumbers: true,
                sortorder: "desc",
                editurl: 'clientArray',
                altRows: true,
                altclass: 'ui-priority-secondary',
                onSelectRow: function (id) {
                    if (id && id !== lastSel) {
                        gridDocument.saveRow(lastSel, true, 'clientArray');
                        gridDocument.jqGrid('restoreRow', lastSel);
                        gridDocument.jqGrid('editRow', id, true, null, null, 'clientArray');
                        lastSel = id;
                        intArray[index] = id;
                        index += 1;
                    }
                },
                pager: '#pagerDocument',
                rowNum: 30,
                rowList: [30, 60, 90],

                loadComplete: function () {
                    var $this = $(this), ids = $this.jqGrid('getDataIDs'), i, l = ids.length;
                    for (i = 0; i < l; i++) {
                        $this.jqGrid('editRow', ids[i], true);
                    }
                }
            }).jqGrid('navGrid', '#pagerDocument', { edit: false, add: false, del: false, search: false, refresh: false }); 
```

我这个网格我有 2 个单选按钮列。我希望用户确定此证书提供的证据是原始的还是复制的，我尝试通过此代码获取值单选按钮（选中或未选中）

```
for (var i = 0; i < $("#listDocument").getGridParam("reccount") ; i++) {
                                           var row = $("#listDocument").jqGrid('getRowData', i + 1);
                    alert($(row.Orignal).is(":checked") + "|" + row.Copy);

                } 
```

此代码总是警告错误值，请帮助我编写此代码，谢谢所有专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:37:23.153

如果要根据 Original 的值检查单选按钮（真或假）

将格式化程序功能从

```
 formatter: function (cellValue, option, rowObject) {
                        return '<input id="t2" type="radio" name="radio_' + rowObject + '" />';
                    } 
```

至

```
 formatter: function (cellValue, option, rowObject) {
                        return '<input id="t2" type="radio" name="radio_' + rowObject["DOCUMENT_ID"] + '" checked="'+cellvalue+'"/>';
                    } 
```

我不明白你为什么将 rowobject 附加到 name

更新 ：

我以为你想在加载时检查单选按钮。如果要确保在内联编辑时仅选中一个单选按钮，您可以使用自定义验证。

使用自定义函数验证原始和副本（对两列使用相同的函数）

```
use editrules:{custom: true, custom_func: validateOriginalOrCopy} 
```

在 custom_func 中有 2 个参数传递 value 和 colname 你可以使用这些参数来验证

# c# - 如何实现 odbc 驱动程序与 ado 提供程序与 ole db 提供程序？

> ID：14481405
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:53:00.877
> 
> 标签：c#, odbc, oledb, ado

哪种方式最容易学习/实现，以便为使用 ADO 到 SOAP 服务的 vb6 遗留应用程序提供访问。目前我知道的替代方案是 ODBC、OLE DB 或 ADO 提供程序（这甚至不是 OLE DB 提供程序吗？）。我基本上不知道实施任何类型的此类提供程序。我通常在编程 C#。我有基本的 C/C++ 知识，但如果我可以在 C# 中实现提供程序，那就太好了。

所以我的问题：

1.  有没有其他方法可以将 SOAP 服务中的数据提供给我的 vb6 应用程序，而无需对其进行太多修改。也许已经存在某种 ODBC SOAP 驱动程序？
2.  我查找了一些有关如何实现 ODBC 驱动程序的基本信息。据我了解，唯一的方法是 C/C++ DLL。如果我想使用 C#，我将不得不转发来自驱动程序 dll 的调用，因为 C# 无法像本机 dll 一样导出符号；它是否正确？
3.  ODBC 和 OLE DB 都没有轻量级的方式来实现驱动程序/提供程序。我看到 OLE DB 存在一些简化。我认为它被称为 OLS 或 OSL 之类的东西，但该页面声明支持将在未来版本的 windows 中结束。任何线索可能与这相关或相关程度如何？
4.  在这种情况下，我应该更喜欢 ODBC 而不是 OLE DB，反之亦然。我知道 OLE DB 似乎有点像 ODBC 的继承者，实现提供者似乎相当复杂。
5.  是否存在类似 ADO 提供程序的东西？我怎么能实现这个？或者这只是 OLE DB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:00:47.687

显而易见的答案是升级您的 Visual Basic 6 应用程序，但我知道这并不总是可行的。如果您正在寻求快速而肮脏的解决方案，那么您仍在使用 VB6 的事实表明您可能是这样，那么您可以横向思考。

完成工作的一种快速、肮脏但简单的方法是让您在 C# 中编写一个 Windows 服务或类似的服务，从您的 SOAP 源中提取数据并将其插入到中间数据库中。然后，就 Visual Basic 应用程序而言，它只是像往常一样访问数据库，通过 ODBC 或任何其他方式。

不是最优雅的解决方案，而是一个很好的现实世界解决方案？

# spring - 春季创建 bean 失败

> ID：14481410
> 
> 赞同：0
> 
> 时间：2013-01-23T13:53:20.230
> 
> 标签：spring, weblogic, spring-webflow, spring-ioc

这是日志

这是我的 xml 文件中的条目..

```
 <bean class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
    <constructor-arg ref="marshaller"/>
    <constructor-arg ref="marshaller"/>
  </bean>

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter#0' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter]: Constructor threw exception; nested exception is java.lang.LinkageError: loader constraint violation: when resolving method "org.springframework.ws.server.endpoint.adapter.MarshallingMethodEndpointAdapter.<init>(Lorg/springframework/oxm/Marshaller;Lorg/springframework/oxm/Unmarshaller;)V" the class loader (instance of weblogic/utils/classloaders/ChangeAwareClassLoader) of the current class, org/springframework/ws/server/endpoint/adapter/GenericMarshallingMethodEndpointAdapter, and the class loader (instance of java/net/URLClassLoader) for resolved class, org/springframework/ws/server/endpoint/adapter/MarshallingMethodEndpointAdapter, have different Class objects for the type org/springframework/oxm/Marshaller used in the signature
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:254)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:925)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:835)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:440)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused By: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter]: Constructor threw exception; nested exception is java.lang.LinkageError: loader constraint violation: when resolving method "org.springframework.ws.server.endpoint.adapter.MarshallingMethodEndpointAdapter.<init>(Lorg/springframework/oxm/Marshaller;Lorg/springframework/oxm/Unmarshaller;)V" the class loader (instance of weblogic/utils/classloaders/ChangeAwareClassLoader) of the current class, org/springframework/ws/server/endpoint/adapter/GenericMarshallingMethodEndpointAdapter, and the class loader (instance of java/net/URLClassLoader) for resolved class, org/springframework/ws/server/endpoint/adapter/MarshallingMethodEndpointAdapter, have different Class objects for the type org/springframework/oxm/Marshaller used in the signature 
```

帮我解决问题提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:02:31.007

从错误消息来看，它看起来像一个“传递依赖”问题。用简单的英语来说，我们将库称为依赖项。传递依赖是库用来完成其工作的库。

当两个库期望某个公共库的不同版本时，可能会出现问题。

此外，它可能是提供此库并使其对主类加载器可见的应用程序服务器。在这种情况下，您可能能够找到有问题的 jar，将其取出并使用应用服务器版本。尝试取出 spring-oxm jar 并查看所需的类是否由服务器提供。

让图书馆管理员为您设置所有罐子会有所帮助。

# java - docx 生成：将元素放入 ffData (CTFFData)

> ID：14481414
> 
> 赞同：1
> 
> 时间：2013-01-23T13:53:38.927
> 
> 标签：java, xml, jaxb, docx, docx4j

我正在使用 docx4j 库来生成一个 docx 文件。我需要在`w:ffData`标签中添加几个其他元素，最终创建一个这样的结构：

```
<w:ffData>
  <w:name w:val="Some value"/>
  <w:enabled/>
  <w:calcOnExit w:val="0"/>
  <w:checkBox>
    <w:sizeAuto/>
    <w:default w:val="0"/>
    <w:checked/>
  </w:checkBox>
</w:ffData> 
```

我可以使用成功创建`w:ffData`元素

```
CTFFData  ffData =  factory.createCTFFData(); 
```

现在，作为一个完整的 docx4j 新手，我希望有一个`getContent`方法，例如可用于`R`该类（生成`w:r`元素）。

没有这样的方法可供我使用，我正在寻找解决这个问题的其他方法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:55:19.450

**披露：我是 docx4j 项目负责人 **

getContent 方法是一个合理的期望，但对于 CTFFData，只有一个名称不雅但在其他方面等效的方法：

```
public List<JAXBElement<?>> getNameOrEnabledOrCalcOnExit() 
```

# asp.net - IE 中的 JQuery AJAX 问题

> ID：14481417
> 
> 赞同：1
> 
> 时间：2013-01-23T13:53:48.913
> 
> 标签：asp.net, jquery

我在 AJAX 中遇到问题，称其在 Firefox 和 chrome 中工作正常，但在 IE 中却没有，并且不断出现错误功能：

```
 $.ajax({
                type: 'post',
                url: requestUrl,
                data: {
                    presentation_id: id_here,
                    application_ids: selectedAppIDs.join(',')
                },
                dataType: 'json',
                success: function (data) {

                },
                error: function (er) {

                },
                complete: function () {

                }
            }); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:10:10.483

检查您的页面是否也有任何`un-closed div`或那种任何语法问题。如果存在，请先解决这些问题。

试试下面一个。我已经添加了`contentType.`

```
 $.ajax({
                type: 'post',
                url: requestUrl,
                data: {
                    presentation_id: id_here,
                    application_ids: selectedAppIDs.join(',')
                },
                dataType: 'json',
                contentType: "application/json",
                success: function (data) {

                },
                error: function (er) {

                },
                complete: function () {

                }
            }); 
```

有关更多信息，请查看[**jQuery.ajax()**](http://api.jquery.com/jQuery.ajax/)和

[**jQuery $.ajax 在 IE8 中不工作，但在 FireFox 和 Chrome 上工作**](https://stackoverflow.com/questions/2721970/jquery-ajax-not-working-in-ie8-but-it-works-on-firefox-chrome)

# silverlight - SL 媒体元素在第一次后不会播放我的波形文件

> ID：14481418
> 
> 赞同：3
> 
> 时间：2013-01-23T13:53:49.263
> 
> 标签：silverlight, wav, mediaelement, wavmss

我使用[WaveMediaStreamSource (WAVmss)](http://archive.msdn.microsoft.com/wavmss)库在 silverlight 媒体元素上播放波形文件。
它在我第一次将文件加载到元素中时播放，但是当我第二次尝试播放时它不会播放。
我使用了[这里](http://blogs.msdn.com/b/gillesk/archive/2009/03/23/playing-back-wave-files-in-silverlight.aspx)的示例。

也许我遗漏了一些东西，这是我第一次打开波形文件并成功播放的代码，这是我的媒体元素中读取和设置为源的文件：

```
OpenFileDialog openFileDialog = new OpenFileDialog();    
MemoryStream audioSource = new MemoryStream();

if (openFileDialog.ShowDialog() == true)    
{    
   using (FileStream fileStream = openFileDialog.File.OpenRead())    
   {    
       audioSource.SetLength(fileStream.Length);    
       fileStream.Read(audioSource.GetBuffer(), 0, (int)fileStream.Length);    
   }    
}

WaveMSS.WaveMediaStreamSource audioStreamSource = 
                 new WaveMSS.WaveMediaStreamSource(audioSource);

mediaElement1.SetSource(audioStreamSource); 
```

当第一次播放结束时（我知道因为我得到了`_MediaEnded`事件）我不能再播放这个视频了。

我尝试设置 MediaElement 的位置，但无法再次播放：

```
mediaElement1.Position = TimeSpan.FromSeconds(0);
mediaElement1.Play(); 
```

我对其进行了调试，并且 Position 属性确实设置为零，但是当我尝试再次单击播放时，位置属性移动到末尾并且`_MediaEnded`事件再次弹出。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:24:19.300

感谢 Gilles Khouzam的[快速响应](http://blogs.msdn.com/b/gillesk/archive/2009/03/23/playing-back-wave-files-in-silverlight.aspx#10388916)，问题已得到解决。

> 好的，我发现了问题。SeekAsync 的实现，流中的位置已更改，但块中的剩余计数未更改。在 WaveMediaStreamSource.cs 中，查找 SeekAsync 方法并将代码更改为此（添加 MoveToChunkOffest 行）：

```
this.currentPosition = this.wavParser.WaveFormatEx.BufferSizeFromAudioDuration( seekToTime ) + this.startPosition;
this.wavParser.MoveToChunkOffset( ( uint ) this.wavParser.WaveFormatEx.BufferSizeFromAudioDuration( seekToTime ) );
this.currentTimeStamp = seekToTime;
ReportSeekCompleted( seekToTime ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:46:27.710

在 MediaEnded 事件中，将“sender”强制转换为 MediaElement 并调用 Stop()。这将重置对象，以便您可以再次播放它。

# c# - 将文本附加到文本视图

> ID：14481425
> 
> 赞同：1
> 
> 时间：2013-01-23T13:54:07.403
> 
> 标签：c#, macos, mono

我正在使用 mono c# 创建一个 mac osx 应用程序，我在将文本附加到文本视图时遇到了一些问题，该文本视图来自 xcode 设计器，是 NSScrollView 中的 NSTextView。我努力了

```
chat.InsertText(new NSString(str)); 
```

但这什么也没做，我做错了什么？

# windows-phone-7 - 如何检查是否为“。” 已输入到文本框？

> ID：14481447
> 
> 赞同：1
> 
> 时间：2013-01-23T13:55:16.817
> 
> 标签：windows-phone-7

如何检查是否为“。” 已输入到文本框？

是这样的吗：

```
if (TextBox1.Text == ".")
{
    //Do something...
} 
```

因为当我这样做时，它似乎没有检查 TextBox1 中的内容，而是继续执行下一行代码

这是我的代码：

```
private void btnContinue1_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrEmpty(HouseholdNoTextBox.Text))
        {
            textBlockError2.Visibility = Visibility.Collapsed;
            textBlockError1.Visibility = Visibility.Visible;                
        }
        if (HouseholdNoTextBox.Text.Length >= 3)
        {//checking to see if it has a length greater than 2
            textBlockError1.Visibility = Visibility.Collapsed; // collapse the first error box if it is visible
            textBlockError2.Visibility = Visibility.Visible; // and make visible the second
        }
        if (HouseholdNoTextBox.Text == ".")
        {
            textBlockError1.Visibility = Visibility.Visible;  
        }
        if (HouseholdNoTextBox.Text.Length <= 2 && HouseholdNoTextBox.Text.Length > 0)
        {
            textBlockError1.Visibility = Visibility.Collapsed;
            textBlockError2.Visibility = Visibility.Collapsed;
            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        } 
```

我也试过：

```
if (HouseholdNoTextBox.Text.Contains("."))
        {
            textBlockError1.Visibility = Visibility.Visible;  
        } 
```

我也试过：

```
private void btnContinue1_Click(object sender, RoutedEventArgs e)
    {
        string houseHoldNo = HouseholdNoTextBox.Text.ToString();

        if (string.IsNullOrEmpty(HouseholdNoTextBox.Text) || houseHoldNo.Contains(".")) // adding it here along with the first if statement
        {
            textBlockError2.Visibility = Visibility.Collapsed;
            textBlockError1.Visibility = Visibility.Visible;                
        }
    } 
```

我也试过：

private void btnContinue1_Click(object sender, RoutedEventArgs e) { string houseHoldNo = HouseholdNoTextBox.Text.ToString();

```
 if (string.IsNullOrEmpty(HouseholdNoTextBox.Text))
        {
            textBlockError2.Visibility = Visibility.Collapsed;
            textBlockError1.Visibility = Visibility.Visible;                
        }
        if (houseHoldNo.Contains("."))
        {
            textBlockError1.Visibility = Visibility.Visible;
        }
    } 
```

上面的代码与其他代码的作用相同。它跳到最后一个 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:25:12.003

您可以通过检查“。”来做到这一点。

`if(TextBox1.Text.Contains("."))`
`{`
`//Do Something`
`}`

然后处理事件`TextBox.TextChanged`并将上面的代码放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:16:51.577

我会尝试`this.Focus`在按钮事件下键入作为您的第一个操作（这将隐藏键盘）。然后在下一行创建变量 like `string tbContent = HouseholdNoTextBox.Text`，最后在所有 'if' 语句中使用这个变量而不是`HouseholdNoTextBox.Text`. 第一次尝试在第一个'if'上设置断点并检查你的字符串是否有值（'.'或其他）。如果是，则两种比较方法（==，包含（））都应该在 imo 中工作。

# for-loop - smarty for循环无法识别的标签

> ID：14481448
> 
> 赞同：9
> 
> 时间：2013-01-23T13:55:18.800
> 
> 标签：for-loop, smarty

我今天才开始使用 Smarty，所​​以我可能完全错了，但我似乎无法找到解决问题的方法。我试图让一个 for 循环迭代 4 次，每次迭代增加 $i 。很标准的东西。

根据 Smarty 文档，for 循环应采用以下形式：

```
{for $var=$start to $end} 
```

我当前的循环语句如下：

```
{for $i=0 to 3} 
```

但我在运行时收到以下错误：

> 致命错误：Smarty 错误：[在 ..views/landing/index.tpl 第 69 行]：语法错误：在 ../library/1.11/Smarty/Smarty 中无法识别标签“for”（Smarty_Compiler.class.php，第 590 行） .class.php 在第 1093 行

循环在第 69 行，这是编译器失败的行。我还缩短了该错误消息中的 URL，以便于阅读。

我不确定我在这里做错了什么。我试过用谷歌搜索错误消息的各个部分，但无济于事。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T16:23:57.800

道歉。刚刚意识到我们的服务器正在运行 Smarty V2。直到 V3 才引入 for 循环。如果其他人遇到此问题并且像我一样无法升级，请查看[{Section}](http://www.smarty.net/docsv2/en/language.function.section.tpl)和[{foreach}](http://www.smarty.net/docsv2/en/language.function.foreach)标签。它们在 V2 中可用，并且可能能够执行您需要的操作。

# android - android没有清除sharedpreference

> ID：14481453
> 
> 赞同：4
> 
> 时间：2013-01-23T13:55:24.293
> 
> 标签：android, android-preferences

我想清除我在第一个活动中放置的所有 sharedpref 并在第二个活动中删除它。但是清除功能不起作用..这是我的代码

```
public class MyActivity extends Activity implements View.OnClickListener {
    /**
     * Called when the activity is first created.
     */

    public static final String PREFS_NAME = "ResumePrefs";

    SharedPreferences settings;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ((Button)findViewById(R.id.button)).setOnClickListener(this);

    }

    @Override
    protected void onResume() {
        try{
            Toast. makeText(this,settings.getString("answer_id",""),Toast.LENGTH_LONG).show();
        }catch (Exception e){
            Toast.makeText(this,e.toString(),Toast.LENGTH_LONG).show();
        }
        super.onResume();
    }

    @Override
    public void onClick(View view) {
        switch (view.getId()){
            case R.id.button:
                 settings = getSharedPreferences(PREFS_NAME, 1);
                SharedPreferences.Editor editor = settings.edit();
                editor.putString("answer_id", "This is a test");
                editor.commit();
                     Intent intent = new Intent(this,destroyPref.class);
                startActivity(intent);
                break;
        }
    }
} 
```

和我的第二个活动：

```
public class destroyPref extends Activity {
    public static final String PREFS_NAME = "ResumePrefs";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.destroy);

    }

    @Override
    public void onBackPressed() {
        SharedPreferences settings = this.getSharedPreferences(PREFS_NAME,1);
        settings.edit().clear();
        settings.edit().commit();
        super.onBackPressed();
    }

    @Override
    protected void onResume() {
        SharedPreferences settings = this.getSharedPreferences(PREFS_NAME,1);
        settings.edit().clear();
        settings.edit().commit();
        super.onResume();
    }
} 
```

一旦我按下后退按钮，我将返回主要活动并期望清除偏好值，除非我再次按下按钮。我尝试了 bot backpress 和 resume，但 sharedpref 值仍然存在。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:04:41.733

试试这个：

```
SharedPreferences.Editor editor = settings.edit();
editor.clear();
editor.commit(); 
```

谢谢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T14:10:16.527

您在这里面临的问题是代码：

```
 SharedPreferences settings = this.getSharedPreferences(PREFS_NAME,1);
   settings.edit().clear();
   settings.edit().commit(); 
```

您正在创建两个编辑器。一个设置为清除，但您从不提交它，因此它不清除。其他提交，但您从未将其设置为执行任何操作。

```
 SharedPreferences settings = this.getSharedPreferences(PREFS_NAME,1);
   settings.edit().clear().commit(); 
```

这将创建一个编辑器，将其设置为清除，然后提交更改。我*很*确定当您返回时这些值将被清空。不过，我真的不知道，所以请发布结果，我会编辑这个答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T14:06:04.747

settings.edit() 创建一个新的编辑器。commit() 是在不同的编辑器上完成的，然后是 clear()。你需要：

```
SharedPreferences.Editor editor = settings.edit();
editor.clear();
editor.commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:03:29.453

`settings`当您恢复您的第一个活动时，您不会刷新。因此它没有读入新值。

# php - 通过操纵get parms php重定向

> ID：14481455
> 
> 赞同：0
> 
> 时间：2013-01-23T13:55:32.643
> 
> 标签：php

处理请求并重定向它的最佳实践是什么？

例子 -

用户去`www.mysite.com?s=1&b=2`

我想重定向到

```
www.mysite.com?s=1&b=2&c=3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:58:33.957

只需将变量添加到已经通过的变量`$_GET`，然后执行重定向：

```
$params = $_GET;
$params['c'] = 3;

header('Location: http://www.mysite.com?' . http_build_query($params)); 
```

您可以通过使用来缩短表达式，`$_GET + array('c' => 3)`但您明白了:)

# python - 是否可以停止 sqlite 将双引号标识符视为字符串？

> ID：14481456
> 
> 赞同：4
> 
> 时间：2013-01-23T13:55:37.430
> 
> 标签：python, sql, sqlite

根据：[http ://www.sqlite.org/draft/lang_keywords.html](http://www.sqlite.org/draft/lang_keywords.html)

如果你这样做，SQLite3 会做你所期望的：

```
select "foo" from bar; 
```

但是，如果标识符不存在：

```
select "non-existant" from bar; 
```

它回退（我猜是为了与旧版本兼容）将引用的文本视为字符串。

这给我带来了问题，因为我正在使用这样的带引号的列动态创建查询，而后一种行为会返回无意义的结果而不是引发错误。

我正在编写 python 代码，并使用一个包含 PEP-249 Python Database API Specification v2.0 模块的模块，因此我可以在必要时放入特定于数据库的 hack。

我们的后端数据库可能会改变（事实上，在某些时候本地测试和生产可能会有所不同），所以我想尽可能保持 SQL 本身的标准。

有什么办法可以：

*   停止/关闭此行为
*   轻松/可靠地检测到这已经发生（并提出我自己的异常，比如说）
*   以某种方式解决这个问题（我不认为用非标准等价物替换 sql 中的 " 很容易以安全的方式以编程方式完成）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:02:15.260

如果列名以表名或别名为前缀，则不会被误解：

```
SELECT bar."foo", a."baz" FROM bar, blah AS a 
```

当您处理多个表时，很可能无论如何都需要使用它来避免列名冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:00:14.760

不要使用引号，使用`[`and`]`

```
sqlite> create table blah (name text);
sqlite> select "something" from blah;
sqlite> select "name" from blah;
sqlite> insert into blah values ('hello');
sqlite> select "something" from blah;
something
sqlite> select "name" from blah;
hello
sqlite> select [something] from blah;
Error: no such column: something
sqlite> select [name] from blah;
hello
sqlite> 
```

尝试以编程方式拼凑：

```
import re
from itertools import cycle

s = 'select "something" from blah;'
sel, cols, rest = re.match(r'(select)\s+(.*?)\s+(from\s+.*)', s).groups()
cols = re.sub('"', lambda g, I=cycle('[]'): next(I), cols)
print ' '.join( (sel, cols, rest) )
# select [something] from blah; 
```

# jsf - 将 login.xhtml 设置为我的主页时，它不起作用

> ID：14481457
> 
> 赞同：0
> 
> 时间：2013-01-23T13:55:37.963
> 
> 标签：jsf

当我将 login.xhtml 页面设置为 web.xml 作为欢迎文件时，它不起作用，我的意思是它显示页面很好但是当我按下登录时没有任何反应，但是当我手动转到日志时在页面中`http://localhost:8080/fileuploadWithPreview/login.xhtml`它完美地工作，任何想法为什么会这样？

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>Upload Filter</filter-name>
        <filter-class>richard.fileupload.UploadFilter</filter-class>
        <init-param>
            <param-name>sizeThreshold</param-name>
            <param-value>1024</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>Upload Filter</filter-name>
        <url-pattern>/faces/upload/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>/index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.LIBRARIES</param-name>
        <param-value>/WEB-INF/corejsf.taglib.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>

    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>LDAP</realm-name>
        <form-login-config>
            <form-login-page>/login.xhtml</form-login-page>
            <form-error-page>/login-failed.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <role-name>user</role-name>
    </security-role>
    <security-constraint>     
        <!-- web resources that are protected -->
        <web-resource-collection>
            <web-resource-name>All Resources</web-resource-name>
            <url-pattern>/*</url-pattern>
            <!-- this is currently causing a 404 -->
            <http-method>GETLIB</http-method>
            <http-method>COPY</http-method>
            <http-method>MOVE</http-method>
            <http-method>DELETE</http-method>
            <http-method>PROPFIND</http-method>
            <http-method>GET</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>MKCOL</http-method>
            <http-method>PROPPATCH</http-method>
            <http-method>LOCK</http-method>
            <http-method>UNLOCK</http-method>
            <http-method>VERSION-CONTROL</http-method>
            <http-method>CHECKIN</http-method>
            <http-method>CHECKOUT</http-method>
            <http-method>UNCHECKOUT</http-method>
            <http-method>REPORT</http-method>
            <http-method>UPDATE</http-method>
            <http-method>CANCELUPLOAD</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>*</role-name>
        </auth-constraint>
    </security-constraint>
</web-app> 
```

好的，它正在工作，就在我按下登录按钮时，它会将我带回登录页面，但它已经对用户进行了身份验证，我如何在登录按钮上获取它以在通过身份验证后转到 index.html 页面？

登录页面：

```
<div id="site_content">
    <div id="content">
        <h:body>
            <form method="post" action="j_security_check">
                <p>You need to log in to access protected information.</p>
                <table>
                    <tr>
                        <td>User name:</td>
                        <td><input type="text" name="j_username" /></td>
                    </tr>
                    <tr>
                        <td>Password:</td>
                        <td><input type="password" name="j_password" /></td>
                    </tr>
                </table>
                <p><input type="submit" value="Login" />

                    <!--<h:commandButton value="This will reset all the data " type="button" > </h:commandButton> -->
                    <input type="reset" name="Login-reset" value="Reset" onclick="alert('This will reset all the data');" />
                </p>
            </form>
        </h:body>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:38:40.580

替换`<url-pattern>/faces/*</url-pattern>`并`<url-pattern>*.xhtml</url-pattern>`删除`/faces/`所有 URL 中的所有路径。这样，一切都应该按预期工作。

说明：`<welcome-file>`期望当前请求的文件夹（！）中有一个物理存在的文件，它应该是`index.xhtml`or`login.xhtml`并且`<form-login-page>`期望一个完整的 URI 应该是`/faces/login.xhtml`。当您为 JSF 使用文件夹映射时，这并不能很好地混合。因此，只需将其映射`*.xhtml`，您就无需担心虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504)

# ruby-on-rails - 无法以活动管理嵌套形式更新回形针图像

> ID：14481458
> 
> 赞同：4
> 
> 时间：2013-01-23T13:55:39.507
> 
> 标签：ruby-on-rails, paperclip, activeadmin

我有模型产品和产品图片。Product_images 是一个回形针模型。产品有很多 product_images。我正在制作一个 Active Admin 表单，它上传多个图像并将这些图像显示到产品视图页面。

但是，当我保存产品时。product 表已更新，但 product_image 表未更新。图片附加正常，但我无法更新已上传图片的字段。

```
class Product < ActiveRecord::Base
    attr_accessible :name, :product_images_attributes 
      has_many :product_images, :dependent => :destroy
      accepts_nested_attributes_for :product_images, :reject_if => lambda { |t| t['product_image'].nil? }, :allow_destroy => true
end

class ProductImage < ActiveRecord::Base
    attr_accessible :name, :style
    attr_accessible :image 
    belongs_to :product
    has_attached_file :image, :styles => { :small => "150x150>", :large => "320x240>" }
    validates_attachment_presence :image
end

ActiveAdmin.register Product do
form :html => { :multipart => true } do |f|
    f.inputs "Admin Details" do
      f.input :name
    end
    f.inputs "Product images" do        
        f.has_many :product_images do |p|
            p.input :style, :as => :select, :collection => Image::STYLES, :include_blank => false
            p.input :image, :as => :file, :label => "Image",:hint => p.object.image.nil? ? p.template.content_tag(:span, "No Image Yet") : p.template.image_tag(p.object.image.url(:small))
            p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image'
        end 
    end
    f.buttons
end 
```

**更新**

在我做的产品模型中：

```
 after_update :check

  def check
    if ProductImage.find_by_product_id(self.id).changed?
      raise "image"
    else
      raise "fail"
    end   
  end 
```

它总是引发“失败”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-27T16:57:01.460

我在使用 rails 4.1 时遇到了同样的错误。刚刚解决了这个。我注意到输出中的警告：

```
Unpermitted parameters: _destroy, id
Unpermitted parameters: _destroy, id
Unpermitted parameters: _destroy, id 
```

所以我只是将它们传递给 permit_params：

`permit_params assets_attributes: [:image, :image_file_name, :image_content_type, :image_file_size, :image_updated_at, :_destroy, :id]`

到 AA 的资源页面。它奏效了。我希望它会有所帮助。如果没有 - 这是我的清单。

```
ActiveAdmin.register Product do

  permit_params :name, :description, :price, :brand_id, :category_id, assets_attributes: [:image, :image_file_name, :image_content_type, :image_file_size, :image_updated_at, :_destroy, :id]

  form multipart: true do |f|

      f.inputs "Детали" do
        f.input :category_id, as: :select, collection: Category.all, include_blank: false
        f.input :brand_id, as: :select, collection: Brand.all, include_blank: false

        f.input :name
        f.input :description
        f.input :price
      end

      f.inputs 'Фотографии' do
        f.has_many :assets, allow_destroy: true, heading: 'Фото', new_record: false do |fasset|
          fasset.input :image, as: :file, hint: fasset.template.image_tag(fasset.object.image.url(:thumb))
        end
      end
      f.actions
  end

end

class Product < ActiveRecord::Base
  belongs_to :category
  belongs_to :brand
  has_many :assets, dependent: :destroy, autosave: true
  accepts_nested_attributes_for :assets, allow_destroy: true,
                                :reject_if => lambda { |attributes| attributes[:image].blank? }

  validate :name, presence: true
  validate :description, presence: true
  validate :price, presence: true

end

class Asset < ActiveRecord::Base
  belongs_to :product
  has_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"

  validates_attachment_content_type :image, :content_type => /\Aimage\/.*\Z/
  validates_with AttachmentPresenceValidator, :attributes => :image

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:09:23.330

您可以通过在声明关联时`ActiveRecord`添加选项来配置级联保存对模型集合中项目的更改。`:autosave => true`

尝试：

```
 has_many :product_images, :dependent => :destroy, :autosave => true 
```

`after_save`此外，您可以在回调中保存关联的表数据，如下所示：

```
class Product < ActiveRecord::Base
    attr_accessible :name, :product_images_attributes 
      has_many :product_images, :dependent => :destroy
      accepts_nested_attributes_for :product_images, :reject_if => lambda { |t| t['product_image'].nil? }, :allow_destroy => true

       after_save :do_product_image_update

private
    def do_product_image_update
       self.product_images.save
    end

end 
```

# php - 更改会话值

> ID：14481459
> 
> 赞同：0
> 
> 时间：2013-01-23T13:55:39.437
> 
> 标签：php, mysql, session

我正在制作一个允许用户更改密码的页面。但密码是我会话的一部分。

这是我的会议：

```
$_SESSION['myid'] = $myid;
$_SESSION['myusername'] = $myusername;
$_SESSION['mypassword'] = $mypassword; 
```

我将用户名、密码和用户 ID 保存到我的会话中。我检查了每个页面，检查会话是否为真：

```
require ('../handlers/loginhandler.php');

session_start();

    if (!isset($_SESSION['myid'])){  //in this part I skipped the username and password

    header("a page");

    }

    else {

    my page 

    } 
```

现在，当我想更改密码时，我的登录处理程序似乎不正确。所以我需要重新启动会话并将新密码值放入会话中。但我似乎无法让它工作。

我是否可以仅将 user_id 放入会话中，以便无论我更改什么值，我的日志处理程序都将保持不变？因为现在我首先必须注销并再次登录才能获得正确的值。还是有重启码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:30:06.190

Just updating the session with a new value for `$_SESSION['password']` should work (assuming you have `session_start()`'ed the session before you attempt to make a change.

Having said that, it's generally a bad idea to store the user's password in the session anyway, so this is a good opportunity to remove it. On the other hand, storing the user name is fine and could possibly prevent an unnecessary database lookup.

# c++ - 如何从向量转换为常量数组

> ID：14481461
> 
> 赞同：1
> 
> 时间：2013-01-23T13:55:49.623
> 
> 标签：c++, pointers, vector, constants

我有一个函数的 API，比如：

```
void func (const char** s,const size_t* ss); 
```

即该函数获取空终止字符串[ `s`] 及其大小[ `ss`] 的const 数组。我在运行时得到字符串并且不知道它们的数量。我想做的是定义`vector<char*> vS`- 将字符串插入它并定义`vector<size_t> vSS`- 将字符串大小插入它。最终我应该转移`vector<char*> vS`到`const char**` 和。我知道存在一个技巧/ 。问题是上面分别生成和。**但**我错过了**const**。如何解决问题？`vector<size_t> vSS``const size_t*``&vS[0]``&vSS[0]``char**``size_t* ss`

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:09:00.570

如果您能够修复 API 以使其 const 正确，则将其更改为：

```
void func (const char* const* s,const size_t* ss); 
```

否则，如果您不需要通过向量修改字符串内容，则将向量更改为：

```
vector<const char*> vS; 
```

否则，您需要执行`const_cast`并相信 API 不会修改任何内容：

```
func(const_cast<const char**>(&vS[0]), &vSS[0]); 
```

（如果您有兴趣，传递`char**`给函数的问题`const char**`在于该函数可以修改其中一个指针以指向 a `const char`。然后调用者将拥有一个指向该`const`对象的非常量指针，没有什么可以阻止他尝试修改它。繁荣！未定义的行为。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:03:49.683

只需声明`vS`为

```
vector<const char*> vS; 
```

然后`&vS[0]`是`const char**`。并且`size_t*`可以隐式转换为`const size_t*`.

（顺便说一句，`func`可能应该是

```
void func(const char* const* s, const size_t* ss); 
```

但以上任何一种方式都可以。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:08:53.147

如果您将参数传递给函数（而不是尝试将结果传递回参数），那么非常量不是问题：您可以在需要的`char *`任何地方`cont char *`使用。

但是双指针 -`const char **`等存在问题。它们不会隐式转换，因为它可能导致 const 违规。您可以阅读[C++ FAQ Light](http://www.parashift.com/c++-faq-lite/constptrptr-conversion.html)中的说明。

在您的情况下，您可以`vector<const char*>`像@aschepler 所说的那样创建一个。

顺便说一句，`const char**`不是“指向 char 的指针的 const 指针”，而是“指向指向 char 的 const 指针的指针”，`const`如果要确保函数不会更改外部指针内容，则必须添加另一个。`const char * const *`或`char const * const *`, 相同 - 指向 const 的指针 指向 const 字符的指针。

（顺便说一句，在处理多个 const 时，从右到左阅读 relly 会有所帮助：尝试使用上一段中的最后一个表达式。是的，您可以`const`在此表达式的末尾添加另一个以获取“指向 const 指针的 const 指针”常量字符")。****

# c# - Active Directory 历史成员资格

> ID：14481463
> 
> 赞同：0
> 
> 时间：2013-01-23T13:55:55.847
> 
> 标签：c#, .net, active-directory, active-directory-group, activedirectorymembership

是否可以判断用户在过去的给定日期是否*是*某个组的成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:20:51.917

AFAIK，仅根据存储在 Active Directory 中的数据，无法判断用户在给定日期是否是给定组的成员，因为 Active Directory 只存储当前内容，而不是历史内容。

我想如果您有某种第 3 方解决方案，定期拍摄 Active Directory 的快照，然后将它们存档，您可能有机会获得这个答案。

# c# - Visual Studio - 带有 Razor 的 c# - 第一步

> ID：14481464
> 
> 赞同：2
> 
> 时间：2013-01-23T13:55:56.603
> 
> 标签：c#, asp.net-mvc, razor

我想知道需要将哪些文件添加到空白的 .NET c# Razor 项目中才能加载我的第一页。

我创建了一个名为 Index.cshtml 的视图，其中包含：

```
@{
    ViewBag.Title = "Index"; 
}

<h2>@ViewBag.Title</h2> 
```

我创建了一个名为 HomeController.cs 的控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace My_Website.Models
{
    public class HomeController : Controller
    {
        //
        // GET: /Default1/

        public ActionResult Index()
        {
            return View();
        }

    }
} 
```

当我运行此应用程序时，我收到以下错误：

```
The view 'Index' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/Home/Index.aspx
~/Views/Home/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/Home/Index.cshtml
~/Views/Home/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml 
```

有没有办法将脚本重定向到直接在 View 文件夹中指向 Index.cshtml 而不必放入主目录以满足默认布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:59:53.577

您的视图**必须**位于 Views 文件夹中，然后是相应 Controller 的子文件夹**或**Views 下名为 Shared 的文件夹。尝试：

`Views -> Shared -> Index.cshtml` **不是个好主意**

`Views -> Home -> Index.cshtml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:02:49.650

您可以在操作方法中指定视图文件路径：

```
return View("~/Views/Index.cshtml"); 
```

# php - 一个 SQL 行到一个 UILabel

> ID：14481467
> 
> 赞同：0
> 
> 时间：2013-01-23T13:56:08.227
> 
> 标签：php, ios, sql, xcode, uilabel

我几乎完成了围绕社交网络的 iPhone 应用程序。我遇到了一个问题...打印的每个值、朋友、朋友请求等都从 SQL 数据库打印到网站上，然后 iPhone 读取它并将其呈现为 UILabel（通过 echo）。我遇到的问题是 Jim 可以将 Bob、Josh 和 John 作为一个标签列在他的朋友中，但是当我想通过单击他的名字来查看 Johns 的个人资料时，我不能使用 UILabels 值，因为是鲍勃、乔什和约翰！无论如何基本上可以将每一行打印到单独的 UILabel 中。我尝试在网页上进行一些验证，例如 bob!validate!josh!validate!john!validate! 但我不知道如何让 iPhone 检测到！验证！并将中间的值打印到单个标签上。我希望我说得通！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:13:01.797

1.  获取一些代码，将 NSString 转换为 NSArray，其中 NSStrings 基于分隔符（像[这样](https://stackoverflow.com/questions/6304450/split-nsstring-into-nsarray)）；
2.  然后将 NSArray 的每个元素放入一个 UILabel 中（在 text 属性中）。

# c++ - 在哪里使用联合、类和结构？

> ID：14481469
> 
> 赞同：2
> 
> 时间：2013-01-23T13:56:13.177
> 
> 标签：c++, class, struct, unions

类和结构之间有一个区别（据我所知），`struct`默认为. 然后我才知道有一种类似的数据类型也以类似的方式使用，即. 不能用作继承的基础（我不知道这意味着什么，但我仍然接受它）。`public``class``private``union``union``class`

我想知道是否有一些特定的实例，在哪里`struct`/ `union`/ `class`，或者它们可以互换使用（除了我入伍的情况）？如果我在某个地方错了，请告诉我。问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:49:44.880

我对`class`,`struct`的使用`union`如下：

*   `class`对于有行为的对象。
*   `struct`对于被动数据。
*   `union`对于需要以不同类型访问不同数据的非常特殊的情况。

我很久以前在[Google C++ Style guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Structs_vs._Classes)中读过这个（除了`union`要点），从那时起我就一直在关注它。

使用`struct`s 携带被动数据（对象没有附加行为的对象）具有成员默认公开的优点，因此可以在没有 Getter 和 Setter 的情况下访问它们。如果在分配之前需要检查/修改某些成员数据，或者在获取之前需要计算/修改某些成员数据，恕我直言，他们需要一个 Setter/Getter 对，并且对象是 a`class`而不是 a `struct`。

对于`union`类型，我发现它对于需要对成员进行一些*奇怪*访问或需要在某些上下文中将某些成员视为另一种类型的某种数据结构很有用。例如 3D 矢量或 IP 地址：

```
union 3DVector
{
    double x, y, z;
    double vector[3];
} v;

// Acess members with name
v.x = 6.0; v.y = 7.0; v.z = 8.0;
// Acess members as a vector
Normalize(v.vector);

union IPAddress
{
    int binary;
    char octet[4];
} ip;

// Acess the binary address
std::cout << std::hex << ip.binary << '\n';
// Print in a human-readable form
std::cout << static_cast<int>(ip.octet[0]) << '.'
          << static_cast<int>(ip.octet[1]) << '.'
          << static_cast<int>(ip.octet[2]) << '.' 
          << static_cast<int>(ip.octet[3]) << '\n'; 
```

上述功能可以通过重载运算符和转换运算符来实现，但这种`union`方法对我来说看起来很简洁。

s 也可以是模板化的`union`，并且可以具有构造函数/析构函数，这对于序列化目的可能很有用（不适用于所有类型的对象）：

```
template <typename T> union Serializer
{
    Serializer(const T &o) : object(o) {}
    T object;
    char binary[sizeof(T)];
};

SomePODObject obj; // Only POD objects please!
Serializer s(obj);
SendBuffer(s.binary); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:00:11.837

联合和类或结构是完全不同的。联合同时是几件事情，比如说它既可以是字符数组也可以是整数，而类或结构是封装一些逻辑连接信息以及可选的一些操作逻辑的唯一一件事情。联合和其他两个的用例完全不同。

当我只存储一些数据时，我通常使用一个结构，而如果我还需要一些与之关联的逻辑（即我需要添加方法），我会使用一个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:09:47.807

我从不使用联合。如果你最终看到这个，你最好试试 boost 变体。我们可以使用它的唯一可接受的情况是当我们确实需要对内容进行深入控制时，例如自定义序列化。但在很多情况下我会用完这个。

此外，结构仅用于存储数据。如果您需要添加任何函数/方法，请将其转换为类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T00:39:56.070

通常，当访问寄存器时，结构和联合在 C 中一起使用。结构可以定义每个位并允许单独设置寄存器中的每个位。联合将允许同时更改或访问所有位。

即使在 C++ 中，也需要一种方法来设置硬件并写入芯片的寄存器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:43:57.023

在某些领域我可以使用 a `struct`over a `class`：

*   如果我想定义一个只包含纯虚方法的*接口类型。*这与`struct`默认为`public`.
*   纯数据类型，其中没有附加到该类型的行为。
*   策略或特征类型，作为个人喜好。

`union`既不是 a 也不是`class`a `struct`。在内存非常宝贵的时候，我只在 C 中使用它们来创建区分类型或变体类型。在 C++ 中，我认为在典型应用程序中没有太大优势，但仍可用于嵌入式或低内存应用程序。

# c# - 无法从远程机器测试 asp.net Web 服务

> ID：14481472
> 
> 赞同：0
> 
> 时间：2013-01-23T13:56:23.373
> 
> 标签：c#, asp.net, json, web-services, remote-access

我们已经构建了一个我们在本地机器上测试的 asp.net Web 服务应用程序。

我们已经将它部署在客户端的服务器上并在那里进行了测试。

Web 服务返回 JSON 数据，而不是 xml。

但是当我们尝试从远程机器访问该 URL 时，我们看不到用于获取参数的输入字段。它显示了 Web 服务中的方法列表，但是当我们单击它们时，没有用于输入的文本字段。

我们想远程访问 Web 服务并对其进行测试。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:08:46.580

您需要确保配置文件中有以下内容。

```
<configuration>
<system.web>
<webServices>
    <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
    </protocols>
</webServices>
</system.web> 
```

确实，尽管您可能应该使用诸如[SoapUI](http://www.soapui.org/)之类的东西来测试服务，因为测试是可重新运行的等。

# java - 混合 Scala 和 Java：如何正确获取泛型类型的构造函数参数？

> ID：14481474
> 
> 赞同：6
> 
> 时间：2013-01-23T13:56:26.173
> 
> 标签：java, scala, generics, types, scala-java-interop

**我有一些遗留的 Java 代码在我无法控制的某个地方**定义了一个通用`payload`变量（即我无法更改它的类型）：

 **```
// Java code
Wrapper<? extends SomeBaseType> payload = ... 
```

我在我的代码中**接收**到这样一个`payload`值作为方法参数，并希望将其传递给 Scala `case class` （用作演员系统的消息），但没有正确定义，以至于我至少没有收到编译器警告.

```
// still Java code
ScalaMessage msg = new ScalaMessage(payload); 
```

这给出了编译器警告“类型安全：构造函数......属于原始类型......”

Scala`case class`定义为：

```
// Scala code
case class ScalaMessage[T <: SomeBaseType](payload: Wrapper[T]) 
```

如何定义案例类以使代码编译干净？（遗憾的是，更改 Java`Wrapper`类的代码或`payload`参数的类型不是一种选择）

**更新**以阐明有效载荷**参数的来源**

**添加**为了比较，在Java中我可以定义一个参数，就像`payload`定义变量一样：

```
// Java code
void doSomethingWith(Wrapper<? extends SomeBaseType> payload) {} 
```

并相应地调用它

```
// Java code
doSomethingWith(payload) 
```

但是我不能在没有得到“原始类型”警告的情况下直接实例化一个 Wrapper 对象。在这里，我需要使用一个`static`辅助方法：

```
static <T> Wrapper<T> of(T value) {
   return new Wrapper<T>(value);
} 
```

并使用这个静态助手来实例化一个`Wrapper`对象：

```
// Java code
MyDerivedType value = ... // constructed elsewhere, actual type is not known!
Wrapper<? extends SomeBaseType> payload = Wrapper.of(value); 
```

**解决方案**

我可以向 Scala 伴生对象添加一个类似的辅助方法：

```
// Scala code
object ScalaMessageHelper {
    def apply[T <: SomeBaseType](payload: Wrapper[T]) = 
        new ScalaMessage(payload)
}
object ScalaMessageHelper2 {
    def apply[T <: SomeBaseType](payload: Wrapper[T]) = 
        ScalaMessage(payload) // uses implicit apply() method of case class
} 
```

并从 Java 中使用它来实例化没有`ScalaMessage`问题的类：

```
// Java code
ScalaMessage msg = ScalaMessageHelper.apply(payload); 
```

除非有人想出一个更优雅的解决方案，否则我会提取这个作为答案......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:21:47.567

我认为问题在于在 Java 中，如果您执行以下操作：

```
ScalaMessage msg = new ScalaMessage(payload); 
```

`ScalaMessage`然后您将使用其*原始类型*进行实例化。或者换句话说，您将`ScalaMessage`其用作非泛型类型（当 Java 引入泛型时，它们保留了将泛型类视为非泛型类的能力，主要是为了向后兼容）。

您应该在实例化时简单地指定类型参数`ScalaMessage`：

```
// (here T = MyDerivedType, where MyDerivedType must extend SomeBaseType
ScalaMessage<MyDerivedType> msg = new ScalaMessage<>(payload); 
```

**更新**：看到您的评论后，我实际上在一个虚拟项目中尝试过，实际上我得到了一个错误：

```
[error] C:\Code\sandbox\src\main\java\bla\Test.java:8: cannot find symbol
[error] symbol  : constructor ScalaMessage(bla.Wrapper<capture#64 of ? extends bla.SomeBaseType>)
[error] location: class test.ScalaMessage<bla.SomeBaseType>
[error]     ScalaMessage<SomeBaseType> msg = new ScalaMessage<SomeBaseType>(payload); 
```

java泛型（我们可以通过scala中的exitsentials模拟）和scala泛型之间似乎不匹配。您可以通过将类型参数放入`ScalaMessage`并使用存在来解决此问题：

```
case class ScalaMessage(payload: Wrapper[_ <: SomeBaseType]) 
```

然后像这样在java中实例化它：

```
new ScalaMessage(payload) 
```

这行得通。但是， now`ScalaMessage`不再是通用的，如果您想将它与更精细的有效载荷一起使用（比如 a `Wrapper<? extends MyDerivedType>`），这可能是个问题。

为了解决这个问题，让我们再做一个小改动`ScalaMessage`：

```
case class ScalaMessage[T<:SomeBaseType](payload: Wrapper[_ <: T]) 
```

然后在java中：

```
ScalaMessage<SomeBaseType> msg = new ScalaMessage<SomeBaseType>(payload); 
```

问题解决了 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:05:01.413

您所遇到的是 Java 泛型实现不佳的事实。您无法在 Java 中正确实现协变和逆变，您必须使用通配符。

```
case class ScalaMessage[T <: SomeBaseType](payload: Wrapper[T]) 
```

如果您提供 a `Wrapper[T]`，这将正常工作，您将创建 a 的实例`ScalaMessage[T]`

您想要做的是能够`ScalaMessage[T]`从未知的`Wrapper[K]`地方创建一个。`K<:T`然而，这只有在

```
Wrapper[K]<:Wrapper[T] for K<:T 
```

这正是方差的定义。由于 Java 中的泛型是不变的，因此该操作是非法的。您唯一的解决方案是更改构造函数的签名

```
class ScalaMessage[T](wrapper:Wrapper[_<:T]) 
```

但是，如果 Wrapper 在 Scala 中使用类型变化正确实现

```
class Wrapper[+T]
class ScalaMessage[+T](wrapper:Wrapper[T])

object ScalaMessage {
  class A
  class B extends A

  val myVal:Wrapper[_<:A] = new Wrapper[B]()

  val message:ScalaMessage[A] = new ScalaMessage[A](myVal)
} 
```

一切都会顺利而优雅地编译:)**

# java - 迭代 Amazon S3 存储桶中的文件夹

> ID：14481475
> 
> 赞同：0
> 
> 时间：2013-01-23T13:56:27.953
> 
> 标签：java, amazon-s3

我的桶中有以下结构

```
testing -- 存储桶名称
测试/订单/text1.txt
测试/订单/text2.txt
测试/order2/abc.txt
测试/order3/abc.txt

```

我想像这样迭代它

```
测试

     测试

      -命令

            text1.txt
            text2.txt

     -order2
            abc.txt

     -order3
            abc.txt

```

当我使用`listObjectSummary`时，它给了我文件详细信息而不是文件夹详细信息，所以任何人都可以帮助我如何在存储桶中获取文件夹详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:04:30.907

*亚马逊本身*没有文件夹，它只是一种格式化密钥的便捷方式（请注意，我没有说“文件名”）。

这意味着您必须自己分解密钥，以模拟文件夹结构。在 Java 中执行此操作的最简单方法可能是使用层次结构的地图树：`TreeMap<String,Map<?>>`.

# batch-file - 批处理文件在文件夹中搜索所有 .txt 文件以查找字符串，然后将第一个实例复制到输出 file.txt

> ID：14481478
> 
> 赞同：2
> 
> 时间：2013-01-23T13:56:31.820
> 
> 标签：batch-file, copy, findstr

我在一个文件夹中有大约 100 个长文件名的 .txt 文件，我需要在文件中搜索字符串“4096”的第一个实例，然后从每个文件中返回整行并将其复制到输出 .txt 文件中.

我是批处理语法的新手，所以一个完整的解决方案会很棒，

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:00:17.250

干得好：

```
@echo off
setlocal enabledelayedexpansion
for %%a in (*.txt) do (
   set found=false
   for /f "skip=2 tokens=*" %%b in ('find "4096" "%%a"') do (
      if "!found!"=="false" (
         echo %%b >>output.txt
         set found=true
      )
   )
) 
```

# docpad - Docpad 运行、错误和警告

> ID：14481482
> 
> 赞同：1
> 
> 时间：2013-01-23T13:56:49.830
> 
> 标签：docpad

Node.js 和 Docpad 通过以下方式安装：http: [//docpad.org/docs/install](http://docpad.org/docs/install)

`npm install -fg docpad@6.21`

docpad 运行方式：[http ://docpad.org/docs/start](http://docpad.org/docs/start)

`mkdir my-website cd my-website docpad run`

选定`6.) Hogan`（骷髅）

得到了这个：

```
info: Installed the skeleton succesfully
info: DocPad listening to http://localhost:9778/ on directory c:\Users\DM\My Doc
uments\MDM\Web Projects\Client Projects\Web-Mart\Development\Website\out
info: LiveReload listening to new socket on channel /docpad-livereload with log
level 1
info: Generating...
warning:
  Rendering the extension "eco" to "html" on "index.html.eco" didn't do anything
.
  Explanation here: http://docpad.org/extension-not-rendering
warning:
  Rendering the extension "eco" to "html" on "footer.html.eco" didn't do anythin
g.
  Explanation here: http://docpad.org/extension-not-rendering
warning: Something went wrong while rendering: c:\Users\DM\My Documents\MDM\Web
Projects\Client Projects\Web-Mart\Development\Website\src\layouts\default.html.e
co
warning: Something went wrong while rendering: c:\Users\DM\My Documents\MDM\Web
Projects\Client Projects\Web-Mart\Development\Website\src\layouts\primary.html.e
co
warning: Something went wrong while rendering: c:\Users\DM\My Documents\MDM\Web
Projects\Client Projects\Web-Mart\Development\Website\src\documents\index.html.e
co
error: Something went wrong with the action
error: An error occured:
TypeError: Object #<Object> has no method 'getFileUrl'
    at Object.eval (eval at <anonymous> (C:\Users\DM\Documents\MDM\Web Projects\
Client Projects\Web-Mart\Development\Website\node_modules\docpad-plugin-eco\node
_modules\eco\lib\compiler.js:19:12))
    at Object.eval (eval at <anonymous> (C:\Users\DM\Documents\MDM\Web Projects\
Client Projects\Web-Mart\Development\Website\node_modules\docpad-plugin-eco\node
_modules\eco\lib\compiler.js:19:12))
    at eval (eval at <anonymous> (C:\Users\DM\Documents\MDM\Web Projects\Client
Projects\Web-Mart\Development\Website\node_modules\docpad-plugin-eco\node_module
s\eco\lib\compiler.js:19:12))
    at Function.eco.render (C:\Users\DM\Documents\MDM\Web Projects\Client Projec
ts\Web-Mart\Development\Website\node_modules\docpad-plugin-eco\node_modules\eco\
lib\index.js:26:25)
    at EcoPlugin.module.exports.EcoPlugin.render (C:\Users\DM\Documents\MDM\Web
Projects\Client Projects\Web-Mart\Development\Website\node_modules\docpad-plugin
-eco\out\eco.plugin.js:23:37)
    at Object.balUtilFlow.fireWithOptionalCallback (c:\Users\DM\AppData\Roaming\
npm\node_modules\docpad\node_modules\bal-util\out\lib\flow.js:39:27)
    at BasePlugin.bindEvents (c:\Users\DM\AppData\Roaming\npm\node_modules\docpa
d\out\lib\plugin.js:57:26)
    at Object.balUtilFlow.fireWithOptionalCallback (c:\Users\DM\AppData\Roaming\
npm\node_modules\docpad\node_modules\bal-util\out\lib\flow.js:32:27)
    at Object.EventEmitterEnhanced.emitSync (c:\Users\DM\AppData\Roaming\npm\nod
e_modules\docpad\node_modules\bal-util\out\lib\events.js:49:30)
    at Object.balUtilFlow.fireWithOptionalCallback (c:\Users\DM\AppData\Roaming\
npm\node_modules\docpad\node_modules\bal-util\out\lib\flow.js:32:27) 
```

我从来没有克服过这些警告和错误，能够使用 docpad 会非常好，所以我很感激任何关于如何摆脱我看似 Docpad 诅咒的想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:47:40.200

是的，骨架坏了，我不知道是谁在维护它。就像我在 IRC 中提到的那样，对于其他可能阅读/需要的人，我也会在这里发布......

您可以使用空文件夹并从 shell 执行此操作，也可以只使用空模板：

```
cd $(mktemp -d) && npm i docpad docpad-plugin-hogan && \
mkdir -p src/{documents,files,layouts} && \
curl https://raw.github.com/docpad/docpad-plugin-hogan/master/test/src/documents/hogan.html.hogan \
> src/documents/index.html.hogan && docpad run 
```

应该可以证明 hogan 插件和 docpad 本身可以正常工作。就我个人而言，我总是从 package.json 开始，但这就是我喜欢做的方式，在那里定义你需要的插件，但你也可以手动完成......或者使用基本的 HTML5 样板插件，然后添加docpad-plugin-hogan 等

*或者，如果您必须*拥有那个骨架，请等到它修好...

# c# - Schedulercontrol 隐藏 ContextMenu

> ID：14481485
> 
> 赞同：3
> 
> 时间：2013-01-23T13:57:03.740
> 
> 标签：c#, .net, winforms, devexpress

如何隐藏 devexpress schedulercontrol 的上下文菜单？有两个上下文菜单，第一个是时间单元中右键单击的那个。那是我可以在 PopupMenuShowing 事件中成功隐藏的那个。但第二个是右键单击约会的那个。而这个我无法隐藏。在这种情况下有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:29:48.920

以下处理[ShedullerControl.PopupMenuShowing](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerSchedulerControl_PopupMenuShowingtopic)事件的方法应该有助于隐藏 SchedulerControl 的任何元素（例如约会）的上下文菜单：

```
void schedulerControl1_PopupMenuShowing(object sender, PopupMenuShowingEventArgs e)
{
    e.Menu.Items.Clear();
} 
```

PS 这个问题已经在下面的[DevExpress 支持中心](http://www.devexpress.com/Support/Center)线程中讨论过：[如何禁用 Appointments 的右键菜单](http://www.devexpress.com/Support/Center/p/Q427580.aspx)。
PPS：您可以通过`e.Menu.Id`事件处理程序参数检查确切的菜单类型（对于约会菜单，它等于`SchedulerMenuItemId.AppointmentMenu`）。[DevExpress.XtraScheduler.SchedulerMenuItemId](http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraSchedulerSchedulerMenuItemIdEnumtopic)枚举中列出了所有可能的弹出菜单项的类型。

# php - Sugarcrm 6.4.4 邮件客户端 - 潜在客户历史记录 - 缺少详细信息

> ID：14481489
> 
> 赞同：1
> 
> 时间：2013-01-23T13:57:22.100
> 
> 标签：php, email, crm, sugarcrm

1.  我使用的是 sugarcrm 6.4.4 并使用 IMAP 配置了我的邮件 ID。
2.  此外，我对基于 Web 的邮件 (gmail) 使用相同的 ID。
3.  当我尝试查看潜在客户的历史记录时，它仅显示通过 Sugarcrm 发送的历史记录，我也想在潜在客户部分查看基于网络的发送历史记录。

注意：当我尝试将来自 Sugarcrm 的邮件转发给其他人时，附件丢失了。我正在使用托管在 hostgator 中的共享服务器，错误日志显示

2013 年 2 月 4 日星期一 01:33:25 [30702][1][错误] 转换：2013-02-04 从 Ymd H:i:s 到 h:ia 的转换失败 2013 年 2 月 4 日星期一 01:33:43 [31332 ][-none-][FATAL] 配置变量 date.timezone 未设置，猜测时区 America/Chicago。请在 php.ini 中设置 date.timezone="America/Chicago"！Mon Feb 4 01:33:48 2013 [31634][-none-][FATAL] 配置变量 date.timezone 未设置，猜测时区 America/Chicago。请在 php.ini 中设置 date.timezone="America/Chicago"！2013 年 2 月 4 日星期一 01:34:16 [32557][-none-][FATAL] 配置变量 date.timezone 未设置，猜测时区美国/芝加哥。请在 php.ini 中设置 date.timezone="America/Chicago"！

任何帮助将不胜感激。

亲切的问候，

BCRajkumar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:29:36.433

您需要使用电子邮件存档解决方案，例如 Sugar Pro 及更高版本随附的解决方案...

[http://www.sugarcrm.com/feature/email-integration#email](http://www.sugarcrm.com/feature/email-integration#email)

# ruby - Ruby 没有从 stdlib 加载 CSV

> ID：14481490
> 
> 赞同：5
> 
> 时间：2013-01-23T13:57:26.367
> 
> 标签：ruby

我不太确定为什么这不起作用，我一直在寻找解决方案。很简单，我正在运行一个小脚本，`require 'CSV'`它在我的 1.9.3-p327 的 Mac 上运行良好，但在 p374 上的服务器上没有运行。

我得到的错误是

> /home/deployer/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- CSV (LoadError)<br> from /home/deployer/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in`require'

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-23T14:03:37.030

案子很重要。`CSV`还没有定义`csv`应该是。

```
require 'csv' 
```

我手头没有 Mac，但它可能有效，因为您的 FS (HSF+) 不区分大小写，而服务器区分大小写。

# android - NDK 调试失败并出现 gdbserver 错误：“Function 没有定义的”

> ID：14481496
> 
> 赞同：1
> 
> 时间：2013-01-23T13:57:40.103
> 
> 标签：android, windows, android-ndk, gdk

Windows 上的 NDK 调试失败。我使用 Cygwin 和 gdb 来调试本机代码。

我可以将调试器附加到应用程序进程，但随后收到错误消息：

```
gdbserver: symbol is not loaded 
```

以及带有以下消息的对话框：`"Error stopping at Java_***_*** Reason: Target request failed: Function <foo_ber> not defined".` 您有什么想法吗？谢谢。

# php - PHP 5.3.5 PDO FETCH_OBJ 内存泄漏？

> ID：14481499
> 
> 赞同：4
> 
> 时间：2013-01-23T13:57:48.170
> 
> 标签：php, memory, pdo, memory-leaks

我目前正在开发一个使用 PDO 的 PHP 应用程序。我正在编写一个导入，它读取 CSV 文件，检查数据库中的记录，以及更新、删除等......

我注意到这个脚本使用的内存似乎非常高，这似乎与我执行查询的方式有关。请参阅下面的示例查询，该查询针对 CSV 中的每一行执行：

```
$qry = "SELECT * FROM company WHERE id = 1";
$sth = $this->prepare($qry);
$sth->execute();
$sth->setFetchMode(PDO::FETCH_INTO, new Company());
$sth->fetch(); 
```

对于上述 memory_get_peak_usage() = 6291456

使用以下内容时：

```
$qry = "SELECT * FROM company WHERE id = 1";
$sth = $this->prepare($qry);
$sth->execute();
$sth->setFetchMode(PDO::FETCH_CLASS, "Company");
$sth->fetch(); 
```

对于上述 memory_get_peak_usage() = 524288

如您所见，差异相当大。

我想我有3个问题..

1.  在 PHP 5.3.5 中使用 PDO::FETCH_OBJ 时是否存在内存泄漏？
2.  使用 FETCH_CLASS 和 FETCH_OBJ 有什么区别吗？
3.  有没有其他人遇到过同样的问题？

公司类很简单：

```
class Company {
    function __construct(){}
    /**classvars**/
    public $_tablename = 'company';
    public $transient;
    public $id;
    public $name;
    /**endclassvars**/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:53:21.323

查看[PHP 更改日志](http://uk.php.net/ChangeLog-5.php#5.3.4)，在 5.3.4 中似乎有一个相关的修复，其中[PDO 中修复了内存泄漏`FETCH_INTO`](https://bugs.php.net/bug.php?id=52487)。

从你所说的，我怀疑是的，这是你看到的错误。当然，解决方案是升级——坚持旧的补丁版本确实没有意义。

即使这不是您看到的错误，在 5.3.3 和现在之间的版本中也有大量的 PDO 修复；我敢肯定，至少其中一些与您相关的可能性很大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:06:20.207

**注意**：原始答案是在 OP 更改`PDO::FETCH_OBJ`为之前给出的`PDO::FETCH_INTO`

在那次更新之后，我尝试使用`PHP 5.3.10-1ubuntu3.4`. 两种获取模式之间的内存消耗没有显着差异。我已经使用大型 MySQL 表和大型 SQLite 数据库进行了测试。

正如@SDC 提到的，该错误是已知的，并在 5.3.5 之后修复。（至少在我所见的 5.3.10 中）。

结论：您必须**升级**您的 PHP 版本。

* * *

虽然这种行为很有趣并且应该调查你`PDO::setFetchMode()`以错误的方式使用。当 $mode - 第一个参数 - 是 PDO::FETCH_OBJ 时，**不需要**第二个参数。如果您使用第二个参数，调用`setFetchMode()`将失败（返回 false），并且将使用默认获取模式`FETCH_BOTH`。

启用时您会看到此错误`PDO::ERRMODE_EXCEPTION`：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $db->query('....');

// the following line will trigger an exception
$stmt->setFetchMode(PDO::FETCH_OBJ, new Company()); 
```

> 致命错误：未捕获的异常 'PDOException' 带有消息'SQLSTATE [HY000]：一般错误：获取模式不允许任何额外的参数'

当您期望结果行应该是特定类的对象时，那`PDO::FETCH_CLASS`就是工作尝试。`PDO::FETCH_OBJ`将从类型返回对象`StdClass`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:42:11.943

FETCH_INTO：表示提取到现有对象（使用新创建的例如）

FETCH_CLASS：表示获取一个新对象（每行调用构造函数）

请注意，如果您的 Company 类中的构造函数具有依赖项，则它们会为每一行调用。因此，构造函数不应包含执行 DB 连接的函数或类，例如仅简单的初始化......

您的公司课程是什么样的？

# list - SharePoint 列表下拉/选择（颜色）

> ID：14481501
> 
> 赞同：1
> 
> 时间：2013-01-23T13:57:50.250
> 
> 标签：list, sharepoint-2010, choicefield

我想知道是否可以在 SharePoint 列表中有一个下拉字段/列，而不是选择文本选项，而是图形/图像（绿色、红色、琥珀色）。或者如何选择三个 div，每个 div 都将具有所需的颜色。

这有可能吗？

任何建议将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:51:48.380

我认为您不能直接为选项提供颜色编码

但是有一种方法可以做类似的事情。

请看这个链接

[http://www.vishalseth.com/post/2008/11/02/Adding-Color-Columns-to-Sharepoint-lists.aspx](http://www.vishalseth.com/post/2008/11/02/Adding-Color-Columns-to-Sharepoint-lists.aspx)

在此它将通过使用计算的字段值来获取颜色。您可以根据您的要求自定义它

让我知道结果，因为我也很想知道这个谢谢

# vb.net - 删除用户：目录服务只能对叶子对象执行请求的操作

> ID：14481503
> 
> 赞同：0
> 
> 时间：2013-01-23T13:57:51.663
> 
> 标签：vb.net, active-directory, ldap, directoryservices

我有一个 vb 页面来搜索 Active Directory 中的指定用户并删除它。该脚本一直运行良好。但现在我收到一些用户的错误：

```
The directory service can perform the requested operation only on a leaf object 
```

我发现这只发生在其 AD 帐户下具有*ExchangeActiveSyncDevices*属性的用户身上。没有该属性的用户仍然被成功删除。此属性是为 iphone 同步添加的。有没有办法强制删除并忽略子对象？或者我怎样才能删除这个帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:48:11.043

要删除一个对象和所有从属对象，请使用子树删除控件（如果 LDAP 目录服务器支持）。请参阅此[博客条目](http://ff1959.wordpress.com/2011/07/28/ldap-subtree-delete-control/)。

# c# - 使用 ELMAH 配置自定义授权

> ID：14481506
> 
> 赞同：4
> 
> 时间：2013-01-23T13:58:14.143
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, elmah

在没有默认 ASP.NET 授权角色管理器的情况下，如何将 ELMAH 配置为仅显示给某些人？

我（以及我认为的许多其他人）使用我自己的授权逻辑并从零开始构建我的项目，而不使用提供的模板。我想记录错误，但似乎不可能配置 ELMAH（以某种方式覆盖功能）使其与其他授权一起使用，甚至使其仅适用于特定 IP 地址。

由于我将有权访问，因此`web.config`我尝试更改这些值以默认不显示 elmah。

```
<add key="elmah.mvc.disableHandler" value="false" />
<add key="elmah.mvc.disableHandleErrorFilter" value="false" />
<add key="elmah.mvc.requiresAuthentication" value="false" /> 
```

当我想查看错误时，将它们从`true`to切换`false`并查看错误，然后再切换回来。但似乎当我更改这些值时，所有日志都被删除了。

我能做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T14:18:28.723

我认为最简单的方法是对您的自定义授权进行一些小改动，以便 ELMAH 授权有效。

**选项 1：**在登录时设置 FormsAuthentication cookie。这样，在 web.config 中`allow users="username"`应该可以工作。成功登录后，您可以使用 [FormsAuthentication.SetAuthCookie(theUsername, true)](http://msdn.microsoft.com/en-us/library/twk5762b.aspx)设置 cookie 。

ELMAH 授权类似于：

```
<location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
       <authorization>   
         <allow users="theUserName" />
         <deny users="*" />
       </authorization>
    </system.web>
  ...other config settings
</location> 
```

**选项 2：**如果您正在使用将用户放入角色，您可以覆盖默认角色提供程序以使用您创建的功能来获取角色。这种方式涉及更多一点，但可以让您在 web.config 中利用基于角色的身份验证，这对于保护静态文件（.pdf 等）传递等内容非常有用。如果有兴趣，我可以为此添加代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-26T03:13:30.357

我使用的是 ASP.NET Identity Framework，所以这个答案是关于那个设置的。我还在 NuGet 中使用了 Elmah.MVC 包。我在 web.config 中编辑了以下几行。（您需要在`allowedUser`设置中提供您自己的用户名）

```
<add key="elmah.mvc.requiresAuthentication" value="true" />
<add key="elmah.mvc.allowedRoles" value="*" />
<add key="elmah.mvc.allowedUsers" value="your_user_name" /> 
```

似乎 ELMAH 确实从当前线程主体获取了身份验证信息，ASP.NET 身份框架将在登录时代表您建立这些信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T15:30:33.243

在这种情况下，系统如何获取用户名或角色并不重要。无论是来自内置提供程序、您自己实现的提供程序，还是在您的自定义身份验证期间您自己填充此信息。所需要的只是在`Application_PostAuthenticationRequest`活动期间手动设置主体。这应该给你它的要点。

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs e)
{
    //Obtain username and roles from application datastore and use them in the next line
    Thread.CurrentPrincipal = new GenericPrincipal(
        new GenericIdentity("userNameHere"),
        new string[] { "Admin", "CanDeleteStuff", "CanEditStuff", "OtherRole" }
    );
} 
```

这将让你在你的`web.config`

```
<location path="elmah.axd" inheritInChildApplications="false">
  <system.web>
    <authorization>
      <allow roles="Elmah"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

更不用说能够`User.IsInRole("CanEditStuff")`在您的代码中使用了。

# javascript - 如何测试 Javascript 是否提交了表单？

> ID：14481509
> 
> 赞同：3
> 
> 时间：2013-01-23T13:58:22.087
> 
> 标签：javascript, jquery, jasmine

我正在尝试用 Jasmine 测试我的一些 javascript。

我是 Jasmine 的新手，我对 Javascript 的了解充其量只是基础知识。我想要做的是确保表单已提交。我无法弄清楚测试的语法应该是什么样子。我想我需要使用 spyOn，但我不太确定如何使用。如果有人能指出我正确的方向，我会很高兴。

```
function submitform(array) {
    var token = array[0].replace("access_token=", "");
    if ((token !== "")) {
        $('input[name=Token]').val(token);
        var frm = document.getElementById("tokenform");
        frm.submit();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:46:58.040

要测试它`frm.submit()`，你必须模拟它。有两种方法。第一种方法可以通过监视而无需更改代码，这将在您的示例中起作用，因为您只使用一次，如果更频繁`document.getElementById`地使用它会更难。`document.getElementById`

```
var submit;
beforeEach(){
  // when your code calls document.getElementById it return an object 
  // with just one property where you can spy on that it was called
  submit = jasmine.createSpy();
  spyOn(document 'getElementById').andReturn({submit:submit})
}

it ("should submit", function(){
  submitform([somedata]);
  expect(submit).toHaveBeenCalled();
}) 
```

更好的方法是重写代码以获得更好的可测试性。因此，不要通过调用 DOM 函数来获取表单，而是将表单作为参数注入到您的函数中。现在您可以将 mock 传递给您的函数而不是 mocking `document.getElementById`。这种模式也称为[依赖注入](http://martinfowler.com/articles/injection.html)

```
function submitform(array, frm) {
    var token = array[0].replace("access_token=", "");
    if ((token !== "")) {
        $('input[name=Token]').val(token);
        frm.submit();
    }
}

it ("should submit", function(){
  var submit = jasmine.createSpy();
  var form = {submit: submit}
  submitform([somedata],form);
  expect(submit).toHaveBeenCalled();
}) 
```

# regex - 如果没有关键字，则正则表达式返回成功

> ID：14481511
> 
> 赞同：0
> 
> 时间：2013-01-23T13:58:37.017
> 
> 标签：regex

我有三个文本文件

文件 1：AAA BBB CCC DDD EEEE

文件 2：AAA BBB CCC DDD FFFF

文件 3：AAA BBB CCC DDD

我正在搜索一个在“文件 3”上返回成功的正则表达式，因为它不包含“EEEE”和“FFFF”

我尝试这种（没有成功），如果后缀“EEEE”或“FFFF”不存在则匹配

```
(?!EEEE|FFFF) 
```

我搜索更多，我找到了匹配的确切正则表达式，我想反转这个正则表达式：

```
(.*?EEEE.*?|.*?FFFF.*?) 
```

有什么建议么 ？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:07:54.940

我不确定您的所有数据是什么样的，但请尝试 ^((?!EEEE|FFFF).)*$

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:24:47.123

我找到了激活多行选项的部分解决方案

```
^(?!.*EEEE.*|.*FFFF.*).*?$ 
```

解释 ：

> **^** : 开始字符串
> 
> **(?!)** : 如果没有后缀则匹配
> 
> **.*EEEE.*|.*FFFF.***：排除的后缀是从 2 个备选方案中选择的，*任何字符 EEEE 或 FFFF 后跟任何字符*
> 
> **.*?** : 任何字符，尽可能少的重复
> 
> **$** : 结束行或字符串

# jenkins - Jenkins 类 TransientBuildActionFactory 怎么用？

> ID：14481513
> 
> 赞同：3
> 
> 时间：2013-01-23T13:58:47.150
> 
> 标签：jenkins, jenkins-plugins

我在编写 jenkins 插件时遇到了一个问题。我想使用 TransientBuildActionFactory 将我的插件操作添加到作业的构建中，但我找不到任何演示代码来使用此类。谁能告诉我如何使用它的例子？

我从这里学习 TransientBuildActionFactory 信息：[jenkins wiki 关于它](https://wiki.jenkins-ci.org/display/JENKINS/Action+and+its+family+of+subtypes)

> 最近，我们正在引入一系列 Transient***ActionFactory，例如 TransientViewActionFactory，这样可以在不实现另一个有状态的扩展点（如 Builder）的情况下贡献瞬态动作。我们希望为更多的主机类型添加这样的扩展点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T23:30:03.913

`TransientBuildActionFactory`[如javadoc](http://javadoc.jenkins-ci.org/hudson/model/TransientBuildActionFactory.html)中所述，已被弃用。它被替换为`TransientActionFactory`。

该示例可以在[JobConfigHistoryActionFactory.java中找到](https://github.com/jenkinsci/jobConfigHistory-plugin/blob/jobConfigHistory-2.10/src/main/java/hudson/plugins/jobConfigHistory/JobConfigHistoryActionFactory.java)

# javascript - 在NodeJS中获取Mongo数据库中插入文档的_id

> ID：14481521
> 
> 赞同：111
> 
> 时间：2013-01-23T13:59:08.790
> 
> 标签：javascript, node.js, mongodb

我使用 NodeJS 在 MongoDB 中插入文档。使用`collection.insert`我可以像以下代码一样将文档插入数据库：

```
// ...
collection.insert(objectToInsert, function(err){
   if (err) return;
   // Object inserted successfully.
   var objectId; // = ???
});
// ... 
```

我怎样才能得到`_id`插入的对象？

有没有办法在`_id`不插入最新对象的情况下获得`_id`？

假设同时有很多人访问数据库，我不能确定最新的 id 是插入对象的 id。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-23T14:29:18.627

比使用第二个参数进行回调更短的方法`collection.insert`是使用`objectToInsert._id`返回`_id`（在回调函数内部，假设它是一个成功的操作）。

NodeJS 的 Mongo 驱动程序将该`_id`字段附加到原始对象引用，因此使用原始对象很容易获取插入的 id：

```
collection.insert(objectToInsert, function(err){
   if (err) return;
   // Object inserted successfully.
   var objectId = objectToInsert._id; // this will return the id of object inserted
}); 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-01-23T14:13:26.930

回调的第二个参数`collection.insert`将返回一个或多个插入的文档，它应该有 _ids。

尝试：

```
collection.insert(objectToInsert, function(err,docsInserted){
    console.log(docsInserted);
}); 
```

并检查控制台以了解我的意思。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-02-24T21:45:58.510

正如 ktretyak 所说，要获得插入文档的 ID，最好的方法是在结果对象上使用 insertId 属性。在我的情况下 result._id 没有工作，所以我不得不使用以下内容：

```
db.collection("collection-name")
  .insertOne(document)
  .then(result => {
    console.log(result.insertedId);
  })
  .catch(err => {
    // handle error
  }); 
```

如果你使用回调也是一样的。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-06-19T00:19:04.713

我实际上为插入回调函数中的第二个参数做了一个console.log()。除了插入的对象本身之外，实际上还返回了很多信息。所以下面的代码解释了如何访问它的 id。

```
collection.insert(objToInsert, function (err, result){
    if(err)console.log(err);
    else {
        console.log(result["ops"][0]["_id"]);
        // The above statement will output the id of the 
        // inserted object
       }
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-01-15T18:27:36.223

如果您想使用“_id”，请使用 simpley

```
result.insertedId.toString() 
```

// toString 将从十六进制转换

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-02T05:25:01.933

Mongo 将完整的文档作为回调对象发送，因此您只能从那里简单地获取它。

例如

```
collection.save(function(err,room){
  var newRoomId = room._id;
  }); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-07-28T08:34:22.877

现在你可以使用[insertOne](http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne)方法和 promise 的 result.insertedId

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-11-04T09:45:29.377

您可以使用**异步函数**自动获取 _id 字段，而无需操作数据对象：

```
async function save() {
  const data = {
    name: "John"
  }

  await db.collection('users').insertOne(data)

  return data
} 
```

返回数据：

```
{
  _id: '5dbff150b407cc129ab571ca',
  name: 'John'
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-16T08:05:44.137

@JSideris，获取insertedId 的示例代码。

```
db.collection(COLLECTION).insertOne(data, (err, result) => {
    if (err) 
      return err;
    else 
      return result.insertedId;
  }); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-03T18:01:25.623

与其他响应类似，您可以使用 async await、es6+ 功能获取变量。

```
const insertData = async (data) => {

  const { ops } = await db.collection('collection').insertOne(data)
  console.log(ops[0]._id)

}
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-22T14:18:58.560

在异步函数中执行此操作的另一种方法：

```
const express = require('express')
const path = require('path')
const db = require(path.join(__dirname, '../database/config')).db;
const router = express.Router()

// Create.R.U.D
router.post('/new-order', async function (req, res, next) {

    // security check
    if (Object.keys(req.body).length === 0) {
        res.status(404).send({
            msg: "Error",
            code: 404
        });
        return;
    }

    try {

        // operations
        let orderNumber = await db.collection('orders').countDocuments()
        let number = orderNumber + 1
        let order = {
            number: number,
            customer: req.body.customer,
            products: req.body.products,
            totalProducts: req.body.totalProducts,
            totalCost: req.body.totalCost,
            type: req.body.type,
            time: req.body.time,
            date: req.body.date,
            timeStamp: Date.now(),

        }

        if (req.body.direction) {
            order.direction = req.body.direction
        }

        if (req.body.specialRequests) {
            order.specialRequests = req.body.specialRequests
        }

        // Here newOrder will store some informations in result of this process.
        // You can find the inserted id and some informations there too.

        let newOrder = await db.collection('orders').insertOne({...order})

        if (newOrder) {

            // MARK: Server response
            res.status(201).send({
                msg: `Order N°${number} created : id[${newOrder.insertedId}]`,
                code: 201
            });

        } else {

            // MARK: Server response
            res.status(404).send({
                msg: `Order N°${number} not created`,
                code: 404
            });

        }

    } catch (e) {
        print(e)
        return
    }

})

// C.Read.U.D

// C.R.Update.D

// C.R.U.Delete

module.exports = router; 
```

# java - UML。如何说明外部库的使用？

> ID：14481525
> 
> 赞同：3
> 
> 时间：2013-01-23T13:59:22.773
> 
> 标签：java, uml

如何在 UML 中说明对外部库（如 Hibernate、Apache POI 等）的依赖？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:45:27.500

您通常会在显示模块（组件）结构的实现图中表示这一点。只需将外部库放在图表上并适当地构造它们以明确它们是外部依赖项。然后使用“使用”依赖关系来指示依赖它们的系统部分。

例如，使用一个非常简单的案例......

![在此处输入图像描述](../Images/dcbd675084e5f58503e432b3ad68f2b8.png)

这显示了两个系统模块（JAR 文件），其中一个依赖于另一个，其中一个依赖于外部 JAR 文件。用于明确模块性质的原型是我为这个模型创建的自定义原型（因为 UML 在其元模型中没有这种特定的原型）。

# zend-framework2 - Zend2：如何将包含在布局中的视图渲染为变量？

> ID：14481527
> 
> 赞同：0
> 
> 时间：2013-01-23T13:59:35.373
> 
> 标签：zend-framework2

我需要将所有渲染的内容（布局+视图）保存在一个变量中以使用 Zend_Cache 保存它，*我不能使用 Varnish、nginx 或其他软件来这样做*。目前我正在这样做：

```
$view->setTemplate('application/index/index');
$viewContent = $renderer->render($view);
$view = $this->getEvent()->getViewModel();
$view->content = $viewContent;
$content = $renderer->render($view); 
```

谁能建议我更优雅的解决方案？Mb 使用 EventManager 捕获本机**渲染**事件还是使用 Response 对象或**调度**事件的一些技巧？想听听所有的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:52:51.980

`Module`向您的班级添加两个听众。一个侦听器会尽早检查，就在`route`匹配是缓存的匹配之后。第二个侦听器等待`render`并抓取输出以将其存储在缓存中：

```
namespace MyModule;

use Zend\Mvc\MvcEvent;

class Module
{
    public function onBootstrap(MvcEvent $e)
    {
        // A list of routes to be cached
        $routes = array('foo/bar', 'foo/baz');

        $app = $e->getApplication();
        $em  = $app->getEventManager();
        $sm  = $app->getServiceManager();

        $em->attach(MvcEvent::EVENT_ROUTE, function($e) use ($sm) {
            $route = $e->getRouteMatch()->getMatchedRouteName();
            $cache = $sm->get('cache-service');
            $key   = 'route-cache-' . $route;

            if ($cache->hasItem($key)) {
                // Handle response
                $content  = $cache->getItem($key);

                $response = $e->getResponse();
                $response->setContent($content);

                return $response;
            }
        }, -1000); // Low, then routing has happened

        $em->attach(MvcEvent::EVENT_RENDER, function($e) use ($sm, $routes) {
            $route = $e->getRouteMatch()->getMatchedRouteName();
            if (!in_array($route, $routes)) {
                return;
            }

            $response = $e->getResponse();
            $content  = $response->getContent();

            $cache = $sm->get('cache-service');
            $key   = 'route-cache-' . $route;
            $cache->setItem($key, $content);
        }, -1000); // Late, then rendering has happened
    }
} 
```

只需确保您`cache-service`在服务管理器中注册了一个缓存实例。您可以更新上面的示例以在渲染事件期间检查路由是否在`$routes`数组中。现在您只需检查缓存是否有密钥，这可能比在事件`in_array($route, $routes)`期间执行的操作要慢。`render`

# javascript - 如何序列化来自非表单元素的数据并使其可从 params[:model] 访问

> ID：14481528
> 
> 赞同：2
> 
> 时间：2013-01-23T13:59:36.227
> 
> 标签：javascript, jquery, html, sinatra

我有一个 Sinatra 应用程序，它从外部 API 加载信息并将其显示在页面上。这是在 Sinatra 中完成的，它获取信息并将其放置为临时模型实例（未保存），因此更容易在视图中访问其所有属性。

现在，当用户单击链接时，我希望将模型实例保存到数据库中，我认为这只能通过 AJAX 等来完成，因为最后一个请求已经完成，并且没有一个实例仍然存在。我以为我需要提取相应 HTML 元素的所有信息，然后将 AJAX-Post 发送到另一条路线。

我现在的问题是，我希望能够使用`@model = Model.create(params[:model])`. 使用表单可以很清楚地做什么，但这不是一个选项，因为所有数据都显示在一个表中，并且每个表行都是模型的一个实例。

如何序列化单击链接所在的表行中的数据，以便可以如上所述使用它？

**更新**

*   我正在使用对象类的*多个*实例，每个实例都在一个表行中！
*   我正在使用DataMapper，只有临时对象没有存储！
*   我**不想**弄乱我的整个设置！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:18:33.563

你考虑[过 ActiveResource](http://api.rubyonrails.org/classes/ActiveResource/Base.html)吗？您可以使用 ActiveResource 来维护对象状态。如果您的 REST API 遵循约定，那么映射资源将非常容易。

关于后半部分将数据发送回您的控制器，您可以存储在隐藏变量中，并且在发布后应该很容易构造回对象并将其持久化到数据库中。

就像是

```
#model
class MyModel < ActiveResource::Base
  # set configs here
end

# To fetch record from REST API in controller or whatever
MyModel.find(1)

#in controller on form submit or AJAX
post "/path" do
  MyModel.new(params[:myModel])
end 
```

**更新** 以保持对象的状态而不使用隐藏形式

在javascript中你可以有类似的东西

```
var myModel = #{myModel.to_json}; #Ruby interpolation in HAML it will depend on templating language 
```

在某些操作上，您可以更新 JSON 对象

并使用 AJAX 发布

```
$.post("post/path", myModel); 
```

**更多更新**

在外部 JS

```
function my_js_function(obj) {
/* do something useful here like setting up object hash etc
*/
} 
```

在 Ruby 模板中

```
<script>
  var myObj = #{myObj.json}
  my_js_function(myObj);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:06:20.990

我找到了一个非常简单的解决方案。只不过是从 DOM 中获取所有需要的值并将它们放入一个数组中！

**应用程序.js：**

```
$(".enable").click(function() {
    var table_row = $(this).closest("tr");
    var model_array = new Array;
    var elements_with_information = jRow.find("[name]");

    elements_with_information.each(function() {
            // Doing some checking on which kind of element 
            // it actually is and then basically doing:
            model_array.push($(this).text());
    });

    // Constructing nested array to use `params[:model]`
    var data = { "model" : {
        "property1": model_array[0],
        "property2": model_array[1]
    }};

    // Now doing the AJAX request
    $.ajax({
        url: "/model/doshit",
        type: "POST",
        data: data
    });
}); 
```

# c - OpenCV - 从滑块更新视频播放位置

> ID：14481529
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:59:38.650
> 
> 标签：c, video, opencv

[我的问题与此答案](https://stackoverflow.com/a/9163048/1958219)中提供的解决方案有关。

当我更新滑块位置时，视频总是从零帧开始，而滑块从移动位置继续向前。我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:18:07.160

确保您了解用于[创建 trackbar](https://stackoverflow.com/a/6815657/176769)的所有参数。其中之一名为`count`，它定义了滑块的最大位置（最小值为 0）。

您需要做的就是检索视频文件中的总帧数（在开始读取视频的帧之前）并将此值作为`count`参数传递，因此滑块的最大位置是视频的总帧数.

**提示**：[`cvGetCaptureProperty()`和`CV_CAP_PROP_FRAME_COUNT`](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-get)。

然后要更新滑块，只需检索当前帧的编号（查看`CV_CAP_PROP_POS_FRAMES`）并确保您的回调类型`CvTrackbarCallback`在轨迹栏上设置此信息以正确更新其位置。

# websphere - 您如何在 WebSphere Commerce 开发人员之间共享使用 Management Center 所做的更改？

> ID：14481531
> 
> 赞同：0
> 
> 时间：2013-01-23T13:59:48.040
> 
> 标签：websphere, websphere-commerce

示例：我在某个 JSP 页面上添加了新的营销点。我需要更改 JSP 并在管理中心创建这个点。JSP 中的更改通过 CVS 共享，但 Marketing Spot 呢？它存储在数据库中的某个位置，但我找不到使用 WCBD 工具或手动正确导出此内容的解决方案。在这种情况下你会怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:50:00.597

你有三个选择：

1.  在另一个数据库中手动重新创建必需的点配置。
2.  为开发团队使用共享数据库。它并不像听起来那么糟糕，我让我的团队过去使用过它。
3.  使用导出/导入功能。不建议这样做，因为您将花费时间尝试分析所有表和依赖项可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:19:15.437

您是否尝试跨开发实例共享？如上所述，共享开发实例是一个不错的选择。也利用 stageprop 和 staging copy 可能是一个很好的答案。快速访问信息中心显示：

[http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/refs/rsscopy.htm](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/refs/rsscopy.htm)

如果您使用商家表选项，它会将更改复制到商店。使用此实用程序可能需要在 staglog 表中打开阶段日志记录。

更多关于这里：

[http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/concepts/csstagingserver.htm](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.admin.doc/concepts/csstagingserver.htm)

# php - 使用 GROUP BY 获取最新条目

> ID：14481534
> 
> 赞同：7
> 
> 时间：2013-01-23T13:59:54.627
> 
> 标签：php, mysql, sql, codeigniter

我正在从我的数据库中提取一些对话。它们按**user_from**列分组。

截至目前，它输出最旧的消息。我希望它显示*最新*消息。

最简单的方法是什么？

```
SELECT *
FROM (`mail`)
JOIN `users` ON `users`.`id` = `mail`.`user_from`
JOIN `users_info` ON `users_info`.`user_id` = `mail`.`user_from`
WHERE `user_to` =  '1'
GROUP BY `user_from`
ORDER BY `mail`.`date` desc 
```

邮件表

![在此处输入图像描述](../Images/896e46aa042573a4fb509c12199c4bc2.png)

用户表（片段）

![在此处输入图像描述](../Images/0e8aa64e917dfdf37f3b206a3f54d72a.png)

这是当前的工作代码。*SecretAgent*从该机构发送的消息比*Mail***更新**，而是应该显示 该消息*![在此处输入图像描述](../Images/1725079fb662690e39c6a72f8b91067a.png)*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:19:21.010

不幸的是，MySQL 对`GROUP BY`子句的内容非常宽松，这会产生不可靠的结果，除非您将所有列包含在`GROUP BY`. 从不建议`SELECT *`在连接查询中使用它，但我们暂时将其保留。您需要做的是执行子查询连接，按日期获取用户的最新消息，并与其余列连接。

```
SELECT 
  /* Don't actually do this. Be explicit about columns and assign aliases where their names collide */
  users.*,
  users_info.*,
  mail.*
FROM
  `users`
  JOIN `mail` ON `users`.`id` = `mail`.`user_from`
  JOIN `users_info` ON `users_info`.`user_id` = `mail`.`user_from`
  /* Joined subquery gets most recent message from each user */
  JOIN (
    SELECT  user_from, MAX(date) AS date
    FROM mail
    WHERE user_to = '1'
    GROUP BY user_from
    /* Joined back to the main mail table on user_from and date */
  ) most_recent ON mail.user_from = most_recent.user_from AND mail.date = most_recent.date
  WHERE `user_to` =  '1' 
```

**编辑**更新以显示所有最近的发件人，而不仅仅是一个。*

# c - 如何在 C 中编写 getline 函数？

> ID：14481536
> 
> 赞同：0
> 
> 时间：2013-01-23T13:59:57.623
> 
> 标签：c, getline

我知道 getline 是 C++ 标准，但我需要读取一行数字：

> 123856

并将其保存到数组中。但是如何在给定（作为输入）数字之间没有空格的情况下做到这一点？我希望用户输入是：

123856（没有空格），然后将其保存到一个数组（n 元素数组）中，之后，我希望我的数组看起来像这样：

```
array[0] = 1;
array[1] = 2;
array[2] = 3;
array[3] = 8;
array[4] = 5;
array[5] = 6; 
```

但是如何在C中制作它，没有`getline`？

**这不是我想要的：**

```
#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <stdbool.h>

int main(int argc, char **argv)
{
    int t[4];
    int i;

    for(i=0; i<4; i++)
        scanf("%d", &t[i]);
    for(i=0; i<4; i++)
        printf("%d\n", t[i]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:04:51.217

如果我理解你是正确的，下面应该这样做：

1.  阅读整行
2.  只要你得到数字或字符串结束就循环遍历字符串
3.  对于每个数字，将它的值放在数组中并将索引增加 1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:04:58.383

```
while( ( c = getchar()) != EOF  &&  c != '\n' &&  i < max ) {
    /* If desired, add check for value outside of 0-9 */
    array[ i++ ] = c - '0';
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:05:58.437

```
char arr[] = "1234567";
int intarr[10];

int count = 0;
for (char* ptr = arr; *ptr; ptr++) {
  intarr[count] = *ptr - '0';
  count++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:31:49.060

好的，不使用任何字符串。

```
int digits = 123856;
int numofdigits = 1 + floor(log10(digits));

int digits_arr[numofdigits];
int i;
for(i = numofdigits-1; i >= 0; i--) {
    digits_arr[i] = (int)floor(digits / pow(10, i)) % 10;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T14:09:03.110

尝试这个

```
#include <stdio.h>
#include <string.h>

 main (int argc, char *argv[])
{

    FILE *f;

    int i=0;
    int j=0;
    char output[100];
    char* output1[100];
    char string[100];
    char delims1[] = " ";
    char delims2[] = "*";
    char* result = NULL;
    char* result3 = NULL;
    int num;

//for (j=0; j<2; j++)
//{
    //printf("%s",delims9[6]);
//}

f = fopen("text.txt","r");
   //
    while( fgets(string,sizeof(string),f) )
    {

        result = strtok( string, delims1 );

        while( result != NULL )
        {
            output1[i]=result;
          printf("%s\n",output1[i]);
          result = strtok( NULL, delims1 );
            i++;

        }

    for (num = 0; num < 100; i++ )      //
    {                                   // Error On this array
        printf("%s\n", output1[i]);     //
    }                                   //

    }
printf("\n%d",i/3+1);

    return 0 ;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-23T14:14:12.237

试试下面的链接......这里问了同样的问题并得到解决方案......

[将整数转换为数组](https://stackoverflow.com/questions/515612/convert-an-integer-number-into-an-array)

```
char * convertNumberIntoArray(unsigned int number) {
    unsigned int length = (int)(log10((float)number)) + 1;
    char * arr = (char *) malloc(length * sizeof(char)), * curr = arr;
    do {
        *curr++ = number % 10;
        number /= 10;
    } while (number != 0);
    return arr;
} 
```

# c# - BindingExpression 路径错误

> ID：14481538
> 
> 赞同：2
> 
> 时间：2013-01-23T13:59:59.730
> 
> 标签：c#, wpf, binding

有很多类似的问题，我已经尝试了这些问题的许多答案，但到目前为止没有任何帮助。我不明白错误消息的实际含义。错误信息是；

```
System.Windows.Data Error: 40 : BindingExpression path error: 'CategoryModel' 
property not found on 'object' ''String' (HashCode=-57655201)'.
BindingExpression:Path=CategoryModel.CategoryList; DataItem='String'
(HashCode=-57655201); target element is 'TextBlock' (Name=''); target property is
'Text' (type 'String') 
```

CategoryList 包含一个完整的类别的字符串列表（从调试中检查）。我的xaml在下面，

```
<ListView x:Name="categoryListView" HorizontalAlignment="Left" Width="56" Height="156" 
              ItemsSource="{Binding Path=CategoryModel.CategoryList}" 
              DisplayMemberPath="CategoryModel.CategoryList" 
              SelectedValue="{Binding Path=CategoryModel.SelectedCategory}"
              VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5">
</ListView> 
```

xaml 设计看起来不错，应用程序运行良好，但没有填充。categoryList 应该在初始化时填充。它实际上已填充，但 listView 没有显示任何内容。

编辑：

类别模型；

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace RecorderApp.Model
{
public class CategoryModel : INotifyPropertyChanged
{
    private String _selectedCategory;
    private String _recordTitle;
    private String _systemInfoLabel;

    private ObservableCollection<String> _categoryList;

    public ObservableCollection<String> CategoryList
    {
        get { return _categoryList; }

        set
        {
            if (_categoryList != value)
            {
                _categoryList = value;
                OnPropertyChanged("CategoryList");
            }
        }
    }

    public String SystemInfoLabel
    {
        get { return _systemInfoLabel; }

        set
        {
            if (_systemInfoLabel != value)
            {
                _systemInfoLabel = value;
                OnPropertyChanged("SystemInfoLabel");
            }
        }
    }

    public String SelectedCategory
    {
        get { return _selectedCategory; }

        set
        {
            if (_selectedCategory != value)
            {
                _selectedCategory = value;
                OnPropertyChanged("SelectedCategory");
            }
        }
    }

    public string RecordTitle
    {
        get { return _recordTitle; }
        set
        {
            _recordTitle = value;
            OnPropertyChanged("RecordTitle");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T14:25:11.260

您的`DisplayMemberPath`绑定导致错误，在您的情况下应该完全删除，因为它不需要。

要使用`DisplayMemberPath`，您需要能够引用该属性，例如`ListView.ItemsSource[X].SomeProperty`，`SomeProperty`您的属性在哪里？`DisplayMemberPath`

您收到此错误是因为您`ItemsSource`是`List<String>`, 并且`String`不包含名为 的属性`CategoryModel`。

要解释您遇到的确切绑定错误：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“字符串”（HashCode=-57655201）上找不到“CategoryModel”属性。BindingExpression:Path=CategoryModel.CategoryList；DataItem='String' (HashCode=-57655201); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”）

*   此行表示找不到`CategoryModel`对象上的属性`String`

    > BindingExpression 路径错误：在 'object' ''String' 上找不到 'CategoryModel' 属性（HashCode=-57655201）'

*   此行包含`Path`引发错误的绑定表达式的属性

    > BindingExpression:Path=CategoryModel.CategoryList；

*   此行告诉您引发错误的绑定的 Source 对象（通常是`DataContext`）

    > DataItem='String' (HashCode=-57655201);

*   这行意味着它无法将属性绑定到`Text`a `TextBox`(`DisplayMemberPath`是制作 a 的快捷方式`ItemTemplate`，`TextBlock`它已`Text`绑定到`DisplayMemberPath`属性)

    > 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”）

因此，总而言之，它告诉您它正在尝试绑定`TextBox.Text`到`{Binding Path=CategoryModel.CategoryList}`，但是`DataContext`后面的`TextBox`是 type `String`，并且`String`没有名为`CategoryModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:02:47.513

下面的静态绑定也可以帮助你。

```
<Window.Resources>
  <local:CategoryModel x:Key="objCategory" />
</Window.Resources>
<Grid>
  <ListView x:Name="categoryListView" 
            HorizontalAlignment="Left" 
            Width="56" Height="156" 
            ItemsSource="{Binding Source={StaticResource objCategory}, Path=CategoryList}"        
            VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" />
</Grid> 
```

# c# - 将用户控件添加到 TreeView 树节点

> ID：14481547
> 
> 赞同：0
> 
> 时间：2013-01-23T14:00:39.853
> 
> 标签：c#, asp.net, treeview

我试图找到一个如何将`UserControl`s 添加到 custom的示例`TreeNode`。我发现的唯一示例显示了一小段代码，并且只是将属性添加到扩展`TreeNode`，而不是`Control`s。如果有人有任何信息，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:13:25.970

类似这样的代码：

```
<TreeView>
        <TreeView.Items>
            <TreeViewItem>
                <Button Width="100" Height="20">test</Button>
            </TreeViewItem>
            <TreeViewItem>
                <Button Width="100" Height="20">test1</Button>
            </TreeViewItem>
            <TreeViewItem>
                <Button Width="100" Height="20">test2</Button>
            </TreeViewItem>

        </TreeView.Items>
    </TreeView> 
```

但是您需要将按钮替换为您的控件

# dart - 在 Dart 中使用 HttpRequest 检索数据时使用 Future

> ID：14481548
> 
> 赞同：0
> 
> 时间：2013-01-23T14:00:42.483
> 
> 标签：dart

目前我正在使用一个简单的 HttpRequest 来检索 JSON 文件：

```
void getConfigData(String url) {
  var request = new HttpRequest.get(url, this.onSuccess);
}

void onSuccess(HttpRequest req) {
  JsonObject conf = new JsonObject.fromJsonString(req.responseText);
  MenuItemCollection top_bar = new MenuItemCollection();
  // and parse the JSON data ...
} 
```

我想知道的是我是否应该使用 Futures 而不是回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:38:02.550

您实际上无法在[Future](http://api.dartlang.org/docs/releases/latest/dart_async/Future.html)或回调之间进行选择，这个选择是由您正在使用的 API 做出的。有时你必须像[HttpRequest.get](http://api.dartlang.org/docs/releases/latest/dart_html/HttpRequest.html#HttpRequest.get)一样提供回调，有时你会得到像[File.create](http://api.dartlang.org/docs/releases/latest/dart_io/File.html#create)这样的 Future 。

# .net - 我应该在 Task.Run 中使用 async/await

> ID：14481552
> 
> 赞同：0
> 
> 时间：2013-01-23T14:00:55.627
> 
> 标签：.net, asynchronous

在我的表单加载事件中，我从数据库中加载了一些东西，并向数据库和其他服务发送了一些更新。随着即将发布的更新，我一直在使用 Task.Run(() => ) 来异步运行这些更新。在我看来，我只想在仍然异步执行更新同时仍按顺序通过表单的加载事件时使用 async/await。在下面的示例中，我不关心 setupDBUpdate 或 sendServiceCall 在我点击 doOtherWork 之前完成。

```
void MainForm_Load(object sender, EventArgs e)
{
    loadData();
    setupDBUpdate();
    sendServiceCall();
    doOtherWork();
}

private void setupDBUpdate()
{
    var timer = new Timer();
    timer.Interval = 60000;
    timer.Tick += timer_Tick;
    timer.Start();
}

void timer_Tick(object sender, EventArgs e)
{
  Task.Run(() =>
  {
    // do database update
  });
}

void sendServiceCall()
{
  Task.Run(() =>
  {
    // connect to service and send an update.
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:49:55.260

只要您在尝试处理数据之前有一些路线来确保您的任务已完成，一切都应该没问题。

# c# - 创建一个随机循环，直到语句为真

> ID：14481553
> 
> 赞同：0
> 
> 时间：2013-01-23T14:00:58.443
> 
> 标签：c#, winforms, visual-studio-2012, random-sample

如果我想让程序生成一个随机数，我该怎么办`re-read/loop`，`else if statement`直到找到一个类似的语句 if `(button1.Text == "")`，随机数只需要到 9。

这是我的代码，

```
 private void button1_Click(object sender, EventArgs e)
    {
          var rc = new Random();
          storeRI = rc.Next(1, 9);

            if (storeRI == 1)
            {
                if (button1.Text == "")
                {
                    button1.Text = "X";
                }
                else
                {
                   //Need to generate another random number
                    //And read the else if statement again... how?
                }

            }

            else if (storeRI == 2)
            {
                if (button1.Text == "")
                {
                    button1.Text = "X";
                }
                else
                {
                   //Need to generate another random number
                    //And read the else if statement again... how?
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:06:34.647

```
private void button1_Click(object sender, EventArgs e)
{
      var rc = new Random();
      do
      {
        storeRI = rc.Next(1, 9);

        if (storeRI == 1)
        {
            if (button1.Text == "")
            {
                button1.Text = "X";
            }
        }

        else if (storeRI == 2)
        {
            if (button1.Text == "")
            {
                button1.Text = "X";
            }
        }
      } while (button1.Text == "");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:08:32.123

将`if`语句放在一个`while()`循环中。然后有一个执行`break;`语句以终止循环的条件：

```
while(button1.Text == "")
{
    if (storeRI == 1)
    {
        if (button1.Text == "")
        {
            button1.Text = "X";
        }
        else
        {
             //Need to generate another random number
             storeRI = rc.Next(1, 9);
        }

    }

    else if (storeRI == 2)
    {
     ...
    }
    else
        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:09:23.030

```
var rc = new Random();
int[] numbers = { 1, 2 }; // numbers from your if..else blocks

do {
  storeRI = rc.Next(1, 9);

  if (!numbers.Contains(storeRI))
      break; // not matched any if..else block

  if (button1.Text == "")
  {
      button1.Text = "X";
      break; // set text and break loop
  }

} while(true); // generate new number and do check again 
```

# sh - 薛定谔的档案

> ID：14481554
> 
> 赞同：4
> 
> 时间：2013-01-23T14:01:09.243
> 
> 标签：sh, archlinux, ext4

我对以下命令序列感到困惑。

```
sh-4.2$ pwd
/home/willard
sh-4.2$ ls -l f
-rwxr-xr-x 1 willard users 59116 Jan 23 14:54 f
sh-4.2$ file f
f: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, BuildID[sha1]=0xea0e08ff2b5a062698d45b78177acdd6bf140d1f, stripped
sh-4.2$ ./f
sh: ./f: No such file or directory
sh-4.2$ strace ./f
execve("./f", ["./f"], [/* 32 vars */]) = -1 ENOENT (No such file or directory)
write(2, "strace: exec: No such file or di"..., 40strace: exec: No such file or directory
) = 40
exit_group(1)                           = ?
+++ exited with 1 +++
sh-4.2$ ls -l f
-rwxr-xr-x 1 willard users 59116 Jan 23 14:54 f
sh-4.2$ uname -a
Linux xdat10 3.6.2-1-ARCH #1 SMP PREEMPT Fri Oct 12 23:58:58 CEST 2012 x86_64 GNU/Linux 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:39:00.297

我发现有人有同样的问题（有相关解释）

[在 64 位系统上运行 32 位二进制文​​件](https://unix.stackexchange.com/questions/13391/getting-not-found-message-when-running-a-32-bit-binary-on-a-64-bit-system/13409#13409)

引用最重要的句子：

> 当您尝试为正确的系统（或系统系列）和超架构运行二进制文件但错误的子架构时，通常会出现这种情况。在这里，您在需要 ELF 二进制文件的系统上有 ELF 二进制文件，因此内核可以很好地加载它们。它们是在 x86_64 处理器上运行的 i386 二进制文件，因此这些指令是有意义的，并且可以使程序达到可以查找其加载程序的程度。但是该程序是一个 32 位程序（如文件输出所示），正在寻找 32 位加载程序 /lib/ld-linux.so.2，而您可能只安装了 64 位加载程序 /lib64/ ld-linux-x86-64.so.2 在 chroot 中。
> 
> 您需要在 chroot 中安装 32 位运行时系统：加载程序，以及程序所需的所有库。在 Debian amd64 上，32 位加载程序位于 libc6-i386 软件包中。您可以通过安装 ia32-libs 来安装一组更大的 32 位库。

我敢打赌有更好的方法来验证这一点，但我会尝试执行

```
ldd ./f 
```

并在输出中搜索需要哪个加载器来执行它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:29:21.087

人 2 执行：

```
ENOENT The file filename or a  script  or  ELF  interpreter  does  not
       exist,  or a shared library needed for file or interpreter can‐
       not be found. 
```

您可以`ldd`针对此二进制文件运行以查找无法映射的库并从`multilib`.

# database - 如何防止用户看到我正在使用的数据库文件？

> ID：14481557
> 
> 赞同：1
> 
> 时间：2013-01-23T14:01:24.393
> 
> 标签：database, visual-studio-2010, security, password-protection

我正在编写一个依赖于 MS Access *.accdb**数据库**的 VB.NET 桌面应用程序。当我的应用程序安装在最终用户计算机上时，数据库文件必须与程序集位于同一目录中。

我担心的是我希望对数据**保密**，并且访问数据库的密码保护很容易被破坏。

我该如何保护这些数据？

我曾考虑将数据库嵌入到我的程序集中，但看起来它（或曾经）[不可能](http://www.codeproject.com/Messages/2684948/Re-Connection-String-to-an-Embedded-MS-Access-Data.aspx)。尽管如此，我还是尝试[嵌入](http://support.microsoft.com/kb/319291/en-us)它，但我不知道如何修改我的连接字符串。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:13:41.313

Access 不是机密数据的合适存储介质。正如您所说，密码机制很容易被破坏。

您可以将所有机密数据以加密形式存储在数据库中，但您仍需要将加密密钥存储在同一系统上，以便您的应用程序读取数据。您的应用程序需要进行加密/解密。至少在打开文件并猜到密码时，内容仍然难以阅读。任何对 .NET 和安全性有足够了解的人都可以解密数据，因为您必须将加密密钥存储在应用程序可以检索它的地方，以便加密/解密数据。

嵌入数据库也无济于事，因为嵌入的资源无法在运行时更新，而且它们可以很容易地从程序集中提取，除非您也加密整个程序集（有工具可以做到这一点）。

**底线：**当机密性是关键时，不要将一个人看不到/可能看不到的数据存储在他/她的系统上。或者不要将加密密钥存储在那个人的系统上。

# php - 无法以西里尔文发送表单数据

> ID：14481558
> 
> 赞同：1
> 
> 时间：2013-01-23T14:01:25.467
> 
> 标签：php, jquery, ajax, character-encoding

我有一个简单的联系表格（姓名、电子邮件、主题、消息），可以将消息发送到电子邮件。我已经使用 jQuery 设置了客户端验证，使用 PHP 脚本设置了服务器端验证。我已经将它们与 Ajax 联系起来。它有效，但只有当我以拉丁字符插入数据时。

当我在 Cyrillic 中插入数据时，相同的表单不起作用。它不发送任何消息。我在网上搜索了类似的主题，并在 YT 上搜索了一些教程，但 4-5 天后我仍然一无所获。也许这就像将一些代码放在 .htaccess 文件中，但我真的不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:03:13.557

这是一个基本的编码问题。确保您的表单设置为 POST 为 UTF-8：

```
<form method="post" action="/your/url/" accept-charset="UTF-8">
</form> 
```

还要确保使用正确的标题传递您的页面：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

然后确保您发送的电子邮件带有正确的 UT8 标头。我找到了这段代码：

```
function mail_utf8($to, $subject = '(No subject)', $message = '', $header = '') {
  $header_ = 'MIME-Version: 1.0' . "\r\n" . 'Content-type: text/plain; charset=UTF-8' . "\r\n";
  mail($to, '=?UTF-8?B?'.base64_encode($subject).'?=', $message, $header_ . $header);
} 
```

来源：[http ://bitprison.net/php_mail_utf-8_subject_and_message](http://bitprison.net/php_mail_utf-8_subject_and_message)

# eclipse - ILaunchConfigurationMigrationDelegate 的使用

> ID：14481567
> 
> 赞同：2
> 
> 时间：2013-01-23T14:02:11.520
> 
> 标签：eclipse, eclipse-plugin

我不明白 Eclipse Launch Configrations ( `ILaunchConfiguration`) 的迁移是如何工作的。在我的梦想中，我很想拥有以下东西：

1.  我的插件 1.0 版用于创建启动配置引用文件`something_1.0/foo`
2.  插件升级到 2.0 版本，这也删除了插件的所有旧启动配置中仍然引用的文件
3.  旧的启动配置会自动升级，以便`something_2.0/foo`引用而不是不存在的`something_1.0/foo`

遗憾的是，第 3 步是行不通的，尽管我编写并连接了`ILaunchConfigurationMigrationDelegate`. 似乎代码永远不会执行。

什么时候迁移配置？根据代码，有一个`Migrate button`，我找不到。根据文档配置可能会自动迁移。这是如何触发的？

谢谢，卡斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:23:17.477

这个[接口的这个实现](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/debug/core/ILaunchConfigurationMigrationDelegate.html)应该在扩展点中声明。

可以参考 JDT 本身的实现**org.eclipse.jdt.internal.launching.JavaMigrationDelegate**。

请注意启动快捷方式将配置类型指定为通过扩展定义的配置类型。

```
 <extension
     point="org.eclipse.debug.ui.launchShortcuts">
  <shortcut
        class="org.eclipse.jdt.debug.ui.launchConfigurations.JavaApplicationLaunchShortcut"
        description="%JavaLaunchShortcut.description"
        helpContextId="org.eclipse.jdt.debug.ui.shortcut_local_java_application"
        icon="$nl$/icons/full/etool16/java_app.gif"
        id="org.eclipse.jdt.debug.ui.localJavaShortcut"
        label="%JavaApplicationShortcut.label"
        modes="run, debug">
     <contextualLaunch>
       <enablement>
         <with variable="selection">
           <count value="1"/>
            <iterate>
             <and>
              <adapt type="org.eclipse.jdt.core.IJavaElement">
                <test property="org.eclipse.jdt.core.isInJavaProject"/>
              </adapt>
              <or>
                <test property="org.eclipse.jdt.launching.hasMain"/>
                <test property="org.eclipse.jdt.launching.isContainer"/>
                <test property="org.eclipse.jdt.launching.isPackageFragment"/>
                <test property="org.eclipse.jdt.launching.isPackageFragmentRoot"/>
              </or>
             </and>
            </iterate>
           </with>
       </enablement>
     </contextualLaunch>
     <configurationType
           id="org.eclipse.jdt.launching.localJavaApplication">
     </configurationType>
     <description
           description="%RunJavaLaunchShortcut.description"
           mode="run">
     </description>
     <description
           description="%DebugJavaLaunchShortcut.description"
           mode="debug">
     </description>
  </shortcut> 
```

# android - 从内部存储中打开图像

> ID：14481569
> 
> 赞同：5
> 
> 时间：2013-01-23T14:02:14.773
> 
> 标签：android

我想在 Nexus 7 平板电脑上使用 android 默认图像查看器从内部文件夹打开图像。我使用以下代码，但由于某种原因图像未显示。我做错了什么？该文件的路径是：

```
file:///data/data/com.example.denandroidapp/files/Attachments/photoTemp/photo.jpg 
```

（这是 Uri.parse("file://" + file) 返回的内容）。

```
ArticlePhoto photo =  new ArticlePhoto(soapObject);
File f = new File(context.getFilesDir() + "/Attachments/photoTemp");

if(!f.exists())
    f.mkdirs();

if (photo.ArtPhoto != null) {
    Bitmap articlePhoto = BitmapFactory.decodeByteArray(photo.ArtPhoto, 0, photo.ArtPhoto.length);                      
    ByteArrayOutputStream  bytesFile  =  new ByteArrayOutputStream();
    articlePhoto.compress(Bitmap.CompressFormat.JPEG, 100, bytesFile);

    File file = new File(f + "/photo.jpeg");

    try {
        if(!file.exists())
            file.createNewFile();

        FileOutputStream outStream =  new FileOutputStream(file);

        outStream.write(bytesFile.toByteArray());                  
        outStream.close();

        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.parse("file://" + file),"image/jpeg"); 
        startActivity(intent);

    } catch(Exception ex) {
        AlertDialog alert =  new  AlertDialog.Builder(context).create();
        alert.setTitle("Warning!");
        alert.setMessage(ex.getMessage());
        alert.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T17:10:59.780

试试这个：

```
 Intent intent = new Intent();  
    intent.setAction(android.content.Intent.ACTION_VIEW);
    Uri uri = Uri.parse("file://" + file.getAbsolutePath());                 
    intent.setDataAndType(uri,"image/*");
    startActivity(intent); 
```

谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-05T06:13:13.147

问题是图像在您的应用程序内部！因此，外部应用程序（图像查看器）无法访问应用程序内部的数据。

您可能需要做的是创建一个 Content Provider 。 [http://web.archive.org/web/20111020204554/http://www.marcofaion.it/?p=7](http://web.archive.org/web/20111020204554/http://www.marcofaion.it/?p=7)

**安卓清单.xml**

```
<provider android:authorities="com.example.denandroidapp" android:enabled="true" android:exported="true" android:name=<fully classified name of provider class>>
</provider> 
```

**创建意图**

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);

Uri uri = Uri.parse("content://com.example.denandroidapp/" + filename);
intent.setDataAndType(uri, "image/jpeg"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-02T16:35:16.197

如果某个文件与您的应用关联（存储在您应用空间的内部存储中），则其他应用无法直接访问您的文件，只要提供有效的文件路径。相反，您必须创建一个文件提供程序并生成一个内容 uri。

首先，在您的 AndroidManifest.xml 中添加文件提供程序

```
<provider
        android:name="android.support.v4.content.FileProvider"
        android:authorities="com.mydomain.fileprovider"
        android:exported="false"
        android:grantUriPermissions="true">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/file_paths" />
</provider> 
```

然后需要在 xml/file_paths.xml 中创建一个名为 file_paths 的文件（默认不创建目录 xml，所以创建它）。

file_paths.xml 看起来像

```
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <files-path name="myFiles" path="./"/>
</paths> 
```

添加尽可能多的路径，您希望您的提供者在 .

最后你需要创建你的意图

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
File imagePath = new File(context.getFilesDir(), "fileName");
Uri contentUri = FileProvider.getUriForFile(context, "com.mydomain.fileprovider", imagePath);
intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
intent.setDataAndType(contentUri,"image/*");
context.startActivity(intent); 
```

注意：确保 file_paths.xml 中指定的文件路径与 new File(context.getFilesDir(),"fileName") 匹配。getFilesDir() 将为您提供应用程序的根目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:07:28.933

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
 intent.setDataAndType(Uri.fromFile(new File(outputFileName)),"image/jpeg");
 startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-13T09:19:12.767

您可以使用扩展 ContentProvider 的 FileProvider

检查链接 -

[https://developer.android.com/reference/android/support/v4/content/FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider)

要指定 FileProvider 组件本身，请将“provider”元素添加到您的应用清单中。

```
<provider
android:name="android.support.v4.content.FileProvider"
android:authorities="com.mydomain.fileprovider"
android:exported="false"
android:grantUriPermissions="true">
<meta-data
    android:name="android.support.FILE_PROVIDER_PATHS"
    android:resource="@xml/file_paths" />
</provider> 
```

您必须为每个包含您想要内容 URI 的文件的目录指定“路径”的子元素。例如，这些 XML 元素指定了两个目录

```
<paths xmlns:android="http://schemas.android.com/apk/res/android">
  <files-path name="my_images" path="images/"/>
  <files-path name="my_docs" path="docs/"/>
</paths> 
```

在此之后，您需要为文件生成内容 URI，然后调用意图，请参阅以下链接

[https://developer.android.com/reference/android/support/v4/content/FileProvider#GetUri](https://developer.android.com/reference/android/support/v4/content/FileProvider#GetUri)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-25T18:35:25.490

检查这个：[https](https://stackoverflow.com/a/11088980/1038442) ://stackoverflow.com/a/11088980/1038442 ；

```
File file = new File(filePath);
MimeTypeMap map = MimeTypeMap.getSingleton();
String ext = MimeTypeMap.getFileExtensionFromUrl(file.getName());
String type = map.getMimeTypeFromExtension(ext);
if (type == null)
    type = "*/*";

Intent intent = new Intent(Intent.ACTION_VIEW);
Uri data = Uri.fromFile(file);
intent.setDataAndType(data, type);
startActivity(intent); 
```

PS：如果您尝试打开 .jpg 文件，请尝试 **Replace** String ext = MimeTypeMap.getFileExtensionFromUrl(file.getName()); **With** String ext = MimeTypeMap.getFileExtensionFromUrl(".jpg");

祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-28T10:35:31.860

在我的情况下，画廊启动但没有显示任何图像并直接进入主页。我的情况与 OP 面临的情况完全不同，但我认为这里值得一提，因为问题是关于图像不是通过隐含意图显示的。

我的问题来自下面的代码。

```
val intent = context.packageManager.getLaunchIntentForPackage(packageName ?: "") 
```

上面的代码告诉`PackageManager`启动应用程序的入口点，而不是显示图像的活动。

[![在此处输入图像描述](../Images/d68688b4934cf043e1bbc53cf018b763.png)](https://i.stack.imgur.com/YfNKZ.jpg)

如果你看上面的Logcat，你可以发现用启动的intent`cat=[android.intent.category.Launcher]`会去`SplashActivity`. 发生这种情况是因为我创建了意图`getLaunchIntentForPackage()`

另一种方法是使用`Intent`下面`setPackage()`的代码

```
val intent = Intent()
val uri = Uri.fromFile(file) // You should probably replace with ContentProvider's uri
intent.apply {
    flags = Intent.FLAG_GRANT_READ_URI_PERMISSION
    action = Intent.ACTION_VIEW
    setPackage(packageName)
    setDataAndType(uri, "image/*")
}
context.startActivity(intent) 
```

# python - 用于内化和翻译的通用 python 库

> ID：14481570
> 
> 赞同：1
> 
> 时间：2013-01-23T14:02:19.750
> 
> 标签：python, internationalization

我需要国际化和翻译 python 应用程序。我期待一些字典集合驻留在其他资源文件中，这些资源文件可以在运行时切换并在 python 代码中顺利使用。

我在 stackoverflow.com 上搜索过类似的工具，但只找到特定于平台的库，例如 pylons、django 等。

有没有通用的现成库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:04:41.960

Python 的标准`gettext`模块提供了这一点。[在此处](http://docs.python.org/2/library/gettext.html)查看 Python 文档。

> gettext 模块为您的 Python 模块和应用程序提供国际化 (I18N) 和本地化 (L10N) 服务。它支持 GNU gettext 消息目录 API 和可能更适合 Python 文件的更高级别、基于类的 API。下面描述的界面允许您用一种自然语言编写模块和应用程序消息，并提供翻译消息目录以在不同的自然语言下运行。

一个简单的例子：

```
import gettext
gettext.bindtextdomain('myapplication', '/path/to/my/language/directory')
gettext.textdomain('myapplication')
_ = gettext.gettext
# ...
print _('This is a translatable string.') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:03:53.030

[Babel](http://babel.edgewall.org/)提供了这样的工具：

> ### 一组用于国际化 Python 应用程序的工具
> 
> **Babel**由两个主要部分组成：
> 
> *   用于构建和使用 gettext 消息目录的工具
> *   CLDR（通用区域设置数据存储库）的 Python 接口，提供对各种区域设置显示名称、本地化数字和日期格式等的访问。

因此，它可以帮助您翻译字符串并根据当前语言环境提供本地化的浮点数、货币、日期和其他信息：

```
>>> locale = Locale('es')
>>> month_names = locale.months['format']['wide'].items()
>>> month_names.sort()
>>> for idx, name in month_names:
...     print name
enero
febrero
marzo
abril
mayo
junio
julio
agosto
septiembre
octubre
noviembre
diciembre
>>> format_decimal(1.2345, locale='en_US')
u'1.234'
>>> format_decimal(1.2345, locale='sv_SE')
u'1,234'
>>> format_decimal(12345, locale='de_DE')
u'12.345' 
```

它建立在默认库之上`gettext`进行翻译，为您提供从各种源文件（python、模板等）中提取消息的工具，包括为其他包提供额外提取器的插件系统。

# perl - 在 csv 文件中搜索一些文本

> ID：14481573
> 
> 赞同：-3
> 
> 时间：2013-01-23T14:02:35.057
> 
> 标签：perl, unix

> **可能重复：**
> [在 CSV 中搜索值](https://stackoverflow.com/questions/14474483/search-a-value-in-csv)

我创建了一个 perl 脚本。假设我想在包含 äbcd 的 CSV 文件中搜索“abc”。我编写的脚本将 abcd 显示为实际上我不想要的输出，任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:07:12.550

问题是在 unicode 文件中搜索 ANSI 字符串。我认为您可以通过查看此正则表达式教程来最好地回答您的问题，该教程指出了一个类似于您的示例。

[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:13:44.757

我猜你需要在 perl 中匹配确切的单词：

在 perl 中使用以下正则表达式：

```
(/\b"your_word"\b/ 
```

测试：

**没有 \b**

```
> echo 'abcd'|perl -lne 'if(/abc/){print}'
abcd 
```

**与 \b**

```
> echo 'abcd' | perl -lne 'if(/\babc\b/){print}'
> 
> echo 'abc' | perl -lne 'if(/\babc\b/){print}'
abc 
```

通过查看您的代码，您正在执行此操作：

```
(grep /$curr/, @nodes) 
```

所以将其更改为 : `(grep /\b$curr\b/, @nodes)` 应该可以

# objective-c-blocks - 在 Parse.com 的 PFQuery 中检索嵌套数组的更好方法？

> ID：14481580
> 
> 赞同：0
> 
> 时间：2013-01-23T14:03:02.780
> 
> 标签：objective-c-blocks, nested-loops, parse-platform

我正在使用 Parse.com 存储 iOS 应用程序的数据。下面的代码成功地检索了属于 PFObject“游戏”的嵌套数组中的所有值。但是，如果我需要查询另一个数组（与“获胜者”（例如“失败者”）处于同一级别），我无法让它工作，并且并非数组失败者中的所有值都被填充。我想我可以做到全部在主线程上，而不是尝试嵌套提取（嵌套块），但我想知道是否：

1) 我存储数据的方式是否会阻止我正确使用 Parse 的内置查询/获取功能？数据存储为：

```
PFObject * newGame = [PFObject objectWithClassName:@"Game"];
NSArray * winner = [NSArray arrayWithObjects:[_allPlayersPFDictionary objectForKey:[playerData objectAtIndex:0]], [playerData objectAtIndex:1], nil];
[_gamePF addObject:winner forKey:@"winners"]; 
```

2) 是否有更好、更简洁的方法来进行查询并获取查询中所有嵌套数据数组的所有值？同样，winners 不是 PFObject，而是 2 种不同类型的 PFObject 数组的数组（`[PFObject fetchAll:(NSArray *)winnersArray]`不起作用，因为 Array 中的所有对象都必须具有相同的 PFObject '类型'）。我以这种方式存储它是因为每个获胜玩家都有另一个 PFObject（1 到多个）与之关联的“权力”。

这是有效的查询，但我不知道如何向其中添加“失败者”并在后台正确填充所有数据。

```
PFQuery * gamesQuery = [PFQuery queryWithClassName:@"Game"];
[gamesQuery orderByDescending:@"createdAt"];
gamesQuery.limit = 30;
[gamesQuery findObjectsInBackgroundWithBlock:^(NSArray * theGames, NSError * error) {
    if (error) {
        NSLog(@"ERROR: There was an error with the Query to get Games!");
    } else {
        for (PFObject * aGame in theGames) {
            for (NSArray * aWinner in [aGame objectForKey:@"winners"]) {
                [[aWinner objectAtIndex:0] fetchIfNeededInBackgroundWithBlock:^(PFObject *object, NSError *error) {
                    if (error) {
                        NSLog(@"ERROR: There was an error with the Query to get Player in winnersArray!");
                    } else {
                        [PFObject fetchAllIfNeededInBackground:[aWinner objectAtIndex:1] block:^(NSArray *objects, NSError *error) {
                            if (error) {
                                NSLog(@"ERROR: There was an error with the Query to get Powers in winnersArray!");
                            } else {
                             [_gamesPF addObject:aGame];
                                NSLog(@"Games from viewDidLoad %@", _gamesPF);
                                [_tableView reloadData];
                            }
                        }];
                    }
                }];
            }
        }
    }
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:00:08.580

嗯……我觉得有点傻。对于数据模型，以面向对象的方式使用 Parse 绝对容易得多。能够通过将数据重塑为：

游戏（PFObject *）有：

```
--> winners { (PFObject *), (PFObject *), ..., nil }
--> losers  { (PFObject *), (PFObject *), ..., nil } 
```

获胜者的创建方式为：

```
[testWinner1 addObject:power1 forKey:@"power"];
[testWinner1 addObject:power2 forKey:@"power"];
[testWinner1 addObject:[_playerPFDictionary objectForKey:@"Tom"] forKey:@"player"]; 
```

然后使查询变得更加容易，并且只涉及一个背景块，如下所示：

```
PFQuery * gameQuery = [PFQuery queryWithClassName:@"TestGame"];
[gameQuery includeKey:@"winners.player"];
[gameQuery includeKey:@"winners.power"];
[gameQuery includeKey:@"losers.player"];
[gameQuery includeKey:@"losers.power"];
[gameQuery findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
    if (error) {
        NSLog(@"failed");
    } else {
        NSLog(@"testGame: %@", [objects objectAtIndex:0]);
    }
}]; 
```

# javascript - reveal.js 如何调整元素大小？

> ID：14481582
> 
> 赞同：13
> 
> 时间：2013-01-23T14:03:03.680
> 
> 标签：javascript, html, css, reveal.js

我试图了解如何[`reveal.js`](https://revealjs.com/)动态调整元素的大小。

要查看这一点，请调整页面的高度并查看元素（在一定程度上）如何随着页面的缩小而缩小。

但是，使用 chrome 检查器，我无法看到这种缩小实际上是如何发生的，无论是在 CSS 还是 Javascript 中。

（我的兴趣来自于想要改进它，如果可能的话，但我很惊讶要弄清楚它是如何工作的。）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-24T14:16:43.943

演示文稿配置有“正常”分辨率，即最初创作演示文稿时使用的分辨率。目前默认设置为 960x700。

基于该分辨率和从中派生的宽高比，框架将应用 CSS 2D 转换以适应任何屏幕尺寸内的内容。有一些配置值可以控制所有这些，包括限制框架将扩展您的内容的程度。

```
Reveal.initialize({

    ...

    // The "normal" size of the presentation, aspect ratio will be preserved
    // when the presentation is scaled to fit different resolutions. Can be
    // specified using percentage units.
    width: 960,
    height: 700,

    // Factor of the display size that should remain empty around the content
    margin: 0.1,

    // Bounds for smallest/largest possible scale to apply to content
    minScale: 0.2,
    maxScale: 1.0

}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T14:14:13.617

你听说过媒体查询吗？这是一种通过 CSS 部署的技术，允许您根据窗口的宽度和高度影响元素的样式。以下是它用于reveal.js的方式[https://github.com/hakimel/reveal.js/blob/master/css/reveal.css](https://github.com/hakimel/reveal.js/blob/master/css/reveal.css)

```
@media screen and (max-width: 900px), (max-height: 600px) {
    .reveal .slides {
        font-size: 0.82em;
    }
}

@media screen and (max-width: 700px), (max-height: 400px) {
    .reveal .slides {
        font-size: 0.66em;
    }
} 
```

继续阅读：[MDN CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

Mini Tut：[CSS 媒体查询和使用可用空间 | CSS 技巧](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T14:07:33.470

如果您查看托管在 github [https://github.com/hakimel/reveal.js/blob/master/js/reveal.js](https://github.com/hakimel/reveal.js/blob/master/js/reveal.js)上的源代码，您可以确切地看到它在做什么。

它检查浏览器 CSS 功能，如 2d 和 3d 转换

```
 // Detect support for CSS 3D transforms
supports3DTransforms = 'WebkitPerspective' in document.body.style ||
'MozPerspective' in document.body.style ||
'msPerspective' in document.body.style ||
'OPerspective' in document.body.style ||
'perspective' in document.body.style 
```

它使用基本的事件监听器

```
 // Force a layout when the whole page, incl fonts, has loaded
window.addEventListener( 'load', layout, false );
...
/**
* Binds all event listeners.
*/
function addEventListeners() {

window.addEventListener( 'hashchange', onWindowHashChange, false );
window.addEventListener( 'resize', onWindowResize, false );
... 
```

源代码实际上有不错的注释，所以你应该能够学到很多东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-16T10:09:57.130

Reveal.js 还使用该`zoom`属性来控制在小宽度上调整完整幻灯片的大小。如果您不断调整窗口大小，它会动态更改`zoom`您可以注意到的属性值。

# wpf - 如何在 Datagrid 中定义依赖项绑定

> ID：14481585
> 
> 赞同：0
> 
> 时间：2013-01-23T14:03:09.313
> 
> 标签：wpf, xaml

我已经定义了以下 XAML。绑定填充了 DataGridComboBoxColumn，如果我同时在组合框中选择 PartNumber，则需要在 DataGridTextColumn 中绑定另一个属性 (PartName) 值。我怎么能在 DataGridTextColumn 中进行绑定？

```
<Window.Resources>
  <ObjectDataProvider x:Key="RecordValues"
                      ObjectType="{x:Type local:RecordTemp}"
                      MethodName="GetPersonList">
  </ObjectDataProvider>
</Window.Resources>
<Grid>
  <Grid>
    <DataGrid AutoGenerateColumns="False"
              ItemsSource="{Binding}"
              Margin="10"
              Name="dataGrid1">
      <DataGrid.Columns>
        <DataGridComboBoxColumn Header="Combo"
                                Width="300"
                                SelectedItemBinding="{Binding Values}"
                                DisplayMemberPath="PartNumber"
                                ItemsSource="{Binding Source={StaticResource RecordValues}}" />
        <DataGridTextColumn Header="Order Name"
                            Binding="" />
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</Grid> 
```

在下面代码定义的 C# 中，

```
 ObservableCollection<RecordTemp> RecordsTemp = new ObservableCollection<RecordTemp>();

    RecordsTemp.Add(new RecordTemp());
    RecordsTemp.Add(new RecordTemp());
    dataGrid1.DataContext = RecordsTemp;  

   public class RecordTemp
    {
    List<PartsList> _value = new List<PartsList>();

       public RecordTemp()
    {
        _value.Add(new PartsList() { PartName = "One", PartNumber = "1", PartQuantity = 20 });
        _value.Add(new PartsList() { PartName = "Two", PartNumber = "2", PartQuantity = 10 });
    }

    public List<PartsList> value
    {
        get { return _value; }
        set { _value = value; }
    }

    public List<PartsList> GetPersonList()
    {
        return _value;
    }
    }

public class PartsList
    {
        public string PartName { get; set; }
        public double PartQuantity { get; set; }
        public string PartNumber { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:24:06.530

实现此目的的一种方法是

1.  在 RecordTemp 类中添加一个新属性（比如属性名称是 SelectedPart），它将存储选定的 PartList obj。

2.  将 SelectedPart 属性绑定到 ComboBox 的 SelectedValue 属性。

3.  将 SelectedPart 绑定到文本框。

4.  现在，RecordTemp 类应该实现 INotifyPropertyChanged 接口，以便在用户更改 ComboBox 值时更新 UI。

这是我对您的代码所做的修改。

```
<DataGrid AutoGenerateColumns="False"
          ItemsSource="{Binding}"
          Margin="10"
          Name="dataGrid1"
          CanUserAddRows="False">
  <DataGrid.Columns>
    <DataGridTemplateColumn Header="Combo">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <ComboBox SelectedValue="{Binding SelectedPart, UpdateSourceTrigger=PropertyChanged}"
                    DisplayMemberPath="PartNumber"
                    ItemsSource="{Binding Source={StaticResource RecordValues}}" />
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
    <DataGridTextColumn Header="Order Name"
                        Binding="{Binding SelectedPart.PartName}" />
  </DataGrid.Columns>
</DataGrid> 
```

代码隐藏文件。您可能必须更改命名空间。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            ObservableCollection<RecordTemp> RecordsTemp = new ObservableCollection<RecordTemp>();

            RecordsTemp.Add(new RecordTemp());
            RecordsTemp.Add(new RecordTemp());
            dataGrid1.DataContext = RecordsTemp;
        }
    }

    public class RecordTemp : INotifyPropertyChanged
    {
        List<PartsList> _value = new List<PartsList>();

        public RecordTemp()
        {
            _value.Add(new PartsList() { PartName = "One", PartNumber = "1", PartQuantity = 20 });
            _value.Add(new PartsList() { PartName = "Two", PartNumber = "2", PartQuantity = 10 });
        }

        public List<PartsList> value
        {
            get { return _value; }
            set { _value = value; }
        }

        private PartsList _SelectedPart;

        public PartsList SelectedPart
        {
            get { return _SelectedPart; }
            set
            {
                _SelectedPart = value;
                OnPropertyChanged("SelectedPart");
            }
        }

        public List<PartsList> GetPersonList()
        {
            return _value;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }

    public class PartsList
    {
        public string PartName { get; set; }
        public double PartQuantity { get; set; }
        public string PartNumber { get; set; }
    }
} 
```

# c# - 当项目中有 2 个单独的 dll 时，VSTO 模板 UI 不会出现

> ID：14481587
> 
> 赞同：0
> 
> 时间：2013-01-23T14:03:16.520
> 
> 标签：c#, user-interface, vsto

我一直在尝试获取要安装的 Excel 的 VSTO 模板，但是在安装后打开模板时看不到 VSTO 功能区按钮或任务窗格。起初我根本不认为它正在安装。该项目在视觉工作室中运行良好。

我按照这里的文章[http://msdn.microsoft.com/en-us/library/ff937654.aspx](http://msdn.microsoft.com/en-us/library/ff937654.aspx) & 如上 UI 元素不可见。然后我按照同一篇文章进行了一个非常基本的模板项目，它运行良好。

我从模板项目的 UI 中删除了所有代码，重新创建了安装包并安装了它，我可以看到 UI。我取消注释代码，直到找到阻止我看到 UI 的行。模板使用了 2 个单独的 Dll，它们都在模板项目的引用中，并且它们都显示为安装项目中检测到的依赖项，并且它们都放置在模板的安装目录中。问题是如果我在模板代码中使用 dll，UI 不会出现。我只需要尝试创建 2 个 dll 类之一的实例，UI 就会停止出现。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:07:09.617

可能您没有包括以下内容 -

```
using System.Runtime.InteropServices 
```

# php - php 从数组中获取特定的查询信息

> ID：14481589
> 
> 赞同：0
> 
> 时间：2013-01-23T14:03:21.013
> 
> 标签：php, sql-server, arrays, loops, foreach

```
 <?php

echo "Connecting Database <br>";
$server = 'UKVDEMO03'; //Here you're server
$database = 'smtpFetch';//here the database you want to connect to
$user = 'shoaibsg';//here te user WHO HAS THE RIGHT PERMISSIONS AT THE DATABASE
$pass = '1111111';//and here the user's password
$dsn = "Driver={SQL Server};Server=$server;Database=$database;";
$connect = odbc_connect($dsn, $user, $pass); 
echo "Successfully connected....";

//getting subscribe user detail
$subQuery="select emailAddress, dataSet from userDetail";
$subRes=odbc_exec($connect, $subQuery);
$ix=odbc_num_rows($subRes);
//$newArray[]=$newArray array;
$row[]=array();
$newArrayD[]=$row;
$i=0;
$xc=0;
if($ix>0)
{

    while($row=odbc_fetch_array($subRes))
    {
            $newArrayD[$row['emailAddress']] =$row['emailAddress'];
            $newArrayD[$row['dataSet']] =$row['dataSet'];
    }

}
foreach($newArrayD as $arrayD)
{ $i++; 
echo "<br> -" . $arrayD;
echo "-i increment -" . $i;
}

?> 
```

上面显示下面的输出

-阵列 -shoaib@xyz.com -SSCRUS_CS2002 -nick@xyz.com -SSCE_CS2002

现在的问题：如果我只需要在 foreach 循环中只显示 emailAddress 它只显示第一个字符（我在下面的 foreach 循环中使用）

```
echo "<br> -" . $arrayD['emailAddress']; 
```

如上面的输出显示为 - -s -S -n -S

我很困惑，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:34:14.927

您生成数组的代码已关闭。尝试这个：

```
while ($row=odbc_fetch_array($subRes))
{
    $newArrayD[$row['dataSet']] = $row['emailAddress'];
    // This would generate for example $newArrayD['SSCRUS_CS2002'] = 'shoaib@xyz.com'
} 
```

然后，为了显示它们，遍历数组：

```
foreach ($newArrayD as $dataset=>$emailaddress)
{
    echo "- $emailaddress<br />";
} 
```

**编辑 - 将两者保存在单独的数组中：**

```
$newArrayD = array('dataset' => array(), 'emails' => array());

while ($row=odbc_fetch_array($subRes))
{
    $newArrayD['dataset'][] = $row['dataSet'];
    $newArrayD['emails'][] = $row['emailAddress'];
} 
```

遍历电子邮件：

```
foreach ($newArrayD['emails'] as $emailaddress)
{
    // Code you wish to execute
} 
```

要遍历数据集：

```
foreach ($newArrayD['dataset'] as $dataset)
{
    // Code you wish to execute
} 
```

使用此方法，`$newArrayD['dataset'][0]`将是链接到`$newArrayD['emails'][0]`等的数据集。

# asp.net - WebAPI 在控制器上未找到任何操作

> ID：14481592
> 
> 赞同：64
> 
> 时间：2013-01-23T14:03:29.687
> 
> 标签：asp.net, asp.net-web-api

我收到一个错误 - 在控制器“操作”上找不到与请求匹配的操作。

网址是`http://localhost:37331/api/action/FindByModule/1`。

我使用的路由是

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

控制器：

```
public class ActionController : ApiController
{
    private IActionRepository repository = null;

    [HttpGet]
    [ActionName("All")]
    public IEnumerable<JsonAction> All()
    {
        return from action in this.repository.Get()
               select new JsonAction
               {
                   ID = action.ID,
                   Text = action.Text.Trim(),
                   Description = action.Description.Trim(),
               };
    }

    [HttpGet]
    [ActionName("FindByModule")]
    public IEnumerable<JsonAction> FindByModule(Int64 moduleId)
    {
        return from action in this.repository.FindByModule(moduleId)
               select new JsonAction
               {
                   ID = action.ID,
                   Text = action.Text.Trim(),
                   Description = action.Description.Trim(),
               };
    }
} 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-01-23T14:50:01.450

这是因为参数名称不匹配。从您的路线中，值**1**被分配给参数 named`id`并且您的操作正在寻找参数 named `moduleId`。

第一个选择是像这样改变你的路线：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{moduleId}",
    defaults: new { moduleId = RouteParameter.Optional }
); 
```

其次是像这样更改您的网址：

```
http://localhost:37331/api/action/FindByModule?moduleId=1 
```

所以参数名称匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-24T07:31:35.470

我的 api 有太多参数，我得到了一个错误。我用Route解决了这个问题。

```
[Route("addressverification/{id}/{no}/{day}/{month}/{year}")]
public AdressVerificationResult  Get(long? id, long? no ,long? day, long? month, long? year)
        {

        return new AdressVerificationResult  
            {
                Aciklama = "19........4 kimlik numaralı kişinin 18.......1 adres numarasında 'YerlesimYeri' adres tipi için geçerli bir yurtiçi adres beyanı mevcuttur.",
                DurumKod = true
            };

         } 
```

# c# - NAudio中的WaveStream到字节数组？

> ID：14481593
> 
> 赞同：2
> 
> 时间：2013-01-23T14:03:36.567
> 
> 标签：c#, naudio

如何使用 NAudio 将 WaveStream 转换为字节数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:11:26.977

```
public static class StreamExtension
{
    public static byte[] ToArray(this Stream stream)
    {
        byte[] buffer = new byte[4096];
        int reader = 0;
        MemoryStream memoryStream = new MemoryStream();
        while ((reader = stream.Read(buffer, 0, buffer.Length)) != 0)
            memoryStream.Write(buffer, 0, reader);
        return memoryStream.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:25:29.997

你可以试试这个愿景，应该为你工作，试试看

```
 MemoryStream memoryStr = new MemoryStream();
            while ((read = stream.Read(buffer, 0, buffer.Length)) != 0)
                memoryStr.Write(buffer, 0, read ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:07:10.567

你像使用它一样使用它`System.IO.Stream`。使用读取方法。但要记住。如果您将整个流转换为 ONE `Bytearray`，它可能会导致和`OutOfMemoryException`. 这取决于流有多大。但是你可以使用这样的东西：

```
byte[] buffer = new byte[stream.Length];
int read = stream.Read(buffer, 0, buffer.Length); 
```

# android - 在android模拟器上运行应用程序时出错

> ID：14481595
> 
> 赞同：1
> 
> 时间：2013-01-23T14:03:36.020
> 
> 标签：android, android-emulator

我用 XML 编写了一个应用程序，但我仍然没有用 java 代码编写类。但是模拟器可以按名称显示我的应用程序，然后显示“不幸的是，应用程序已停止”。我必须为这个问题做些什么？？！

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<Textview
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello"/>
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/TextView2"/>
<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/Button"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:07:05.860

您的应用程序中**必须**至少有一个活动（Java 类），以便 manifest.xml 可以识别并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:07:33.723

您必须使用活动来显示此 xml：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

如您所见，您的 xml 由 setContentView 方法调用。

此活动必须在您的 AndroidManifest.xml 中声明

```
<activity
        android:name="YOURPACKAGE.ACTIVITY_NAME"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# html - 可以在 a 中添加 css 标签？

> ID：14481597
> 
> 赞同：2
> 
> 时间：2013-01-23T14:03:48.213
> 
> 标签：html, css, grails

我的意思是：我有一个上传表格：

```
<g:form method="post" enctype="multipart/form-data">
<input type="file" name="cv" id="cv" style=" max-width:120px"/>
<g:actionSubmit action="upload" name="upload" value="Upload" /> 
```

在最后一页中呈现标签后，我有

```
<input type="submit" value="Upload" name="_action_upload"> 
```

也就是“上传”按钮。但是，在名为“cv”的输入中，如您所见，我有 som css 来保持文本框增长太多。（最大宽度：120 像素）

我的问题是，“上传”按钮现在安装在写入要上传的文件的名称和路径的文本框上，一旦选择。而且我不知道如何管理它，如何移动那个按钮并且只移动那个按钮。这可能吗？

我尝试将 css 添加到 actionSubmit 标记本身，但它会移动整个表单。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:59:46.277

使提交按钮独立于另一个按钮移动的方式取决于您需要如何定位它。您可以`<br/>`在它之前添加一个；或者将表单内容包装成 a`<table>`并使两个按钮位于两个不同`<td>`的 s 中。或`"vertical-align: top;"`用于表单元素：

```
form * {
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:02:50.783

浮动离开您的输入文件。输入是内联块。这就是为什么它会导致整行与按钮一起下降。浮动它会将其更改为阻塞。

```
<input id="cv" type="file" style=" max-width:120px; float:left;" name="cv"> 
```

# android - 我的 android 应用程序只显示网格而不是地图

> ID：14481603
> 
> 赞同：1
> 
> 时间：2013-01-23T14:04:13.363
> 
> 标签：android, google-maps

我是安卓新手。很多天以来，我一直在尝试制作非常基本的谷歌地图应用程序，但还无法完成......代码中没有错误，模拟器从终端运行良好，地图键也很好，但我仍然看不到地图。当我运行我的应用程序时，只出现网格并且不显示地图。这是代码，任何人都可以帮助我。我正在使用 eclipse juno 4.2.1 api level 17，我想使用 google map api v2 显示地图我的代码在这里

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.googlemap"
  android:versionCode="1"
  android:versionName="2.0" >
  <uses-feature
  android:glEsVersion="0x00020000"
 android:required="true"/> 

  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
  <permission
      android:name="com.example.googlemap.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
  <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>

 <uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
 <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
   <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

   <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
   <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="[API_KEY]"/>

       <!-- <activity
        android:name="com.example.googlemap.MainActivity"
        android:label="@string/app_name">-->
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     <!--       </activity> -->
     <!--<uses-library android:name="com.google.android.maps" />-->
     </application>

    </manifest> 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

MainActivity.java

```
 package com.example.googlemap;

  import android.app.Activity;
  import android.os.Bundle;

  public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    }
protected boolean isRouteDisplayed() {

         return false;

        }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:10:07.360

您的清单文件正在使用 Maps V2，而布局和活动正在使用 Maps V1。您正在使用 Maps V2 api 密钥生成过程生成 Maps API 密钥并将其设置为 Maps V1 MapView。所以它不会显示，因为它处理了错误的 API 密钥。

您要么在 V1 密钥生成过程中生成 API 密钥，要么使用`google-play-services_lib`项目并更改 MapView 和其他类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T19:48:45.200

我也有类似的问题。这对我有用！

1.  转到生成 API 密钥的 Google API 控制台。
2.  单击服务（出现在左侧的选项中）。
3.  悬停并搜索 Google Maps Android API v2。
4.  启用它（最初它是关闭的，因此只出现了灰色瓷砖）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:41:31.870

**首先，**在您的**清单**文件中，将此部分修改为以下内容。

```
<activity
        android:name="com.example.googlemap.MainActivity"
        android:label="@string/app_name">-->
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
 </activity>
<uses-library android:name="com.google.android.maps" /> 
```

你为什么屏蔽这部分？请立即激活此部分。

@@@

**其次**，请将您的**main.xml**修改为以下内容；您必须指定布局文件名是“main.xml”还是“activity_main.xml”。

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

您必须使用上面的代码。因为您在清单文件中设置了 [android:minSdkVersion="8"]。您的 main.xml 仅用于在面向 Android API 12 或更高版本的应用程序中测试您的设置。

@@@

**第三**，请将您的**MainActivity,java**修改为下面的这个；

```
public class MianActivity extends android.support.v4.app.FragmentActivity {

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setUpMapIfNeeded();

    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        if (mMap == null) {
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }
} 
```

在 Eclipse 中，按键盘上的**Ctrl + Shift + O（字母）**并执行“组织导入”，然后将自动导入几个类。

上面 #1 到 #3 的这段代码是标准的基本代码格式，可以使用新的 Google Maps API 版本 2 在您的真实手机上查看 Google Maps。此代码将向您显示地图和地图上的标记。

@@@

**四**。最重要的是在您的项目中添加两个库：一个是**Google Play 服务库**，另一个是**Android-support-v4**。

如何将这两个库添加到您的项目中，请参阅[此文档：单击此处](https://developers.google.com/maps/documentation/android/intro)。

如果你不能设置两个图书馆，**你就不能在你的手机上看到地图**。

@@@

**五**，尝试**只在你的真实设备（手机）上**运行你的项目，而不是在Eclipse**中的模拟器上。**因为我们无法在模拟器上使用 Google Play 服务支持的新 Google Maps API v2 看到地图，这是[Google 的官方文档：点击这里](http://developer.android.com/intl/ko/google/play-services/setup.html)。

@@@

我希望你能在你的手机上看到谷歌地图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-28T05:26:21.487

确保你有这个设置：

```
map.setMapType(GoogleMap.MAP_TYPE_TERRAIN); 
```

或者你想要的任何类型....

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T10:01:46.323

> 代码中没有错误，模拟器从终端运行良好

伟大的 ！但是 Window > Show View > Other > Android > Logcat ！

应用程序可能不会崩溃，但 Map API 会告诉您为什么地图无法在日志中显示。

为了确保你做得很好：

*   为了实施新的 Google Map API，Google 发布了一份不完整的指南。你可以在[这里](https://developers.google.com/maps/documentation/android/start)找到它。
*   我说不完整是因为他们没有清楚地解释 Google Play 服务的设置，但他们在[这里](https://developers.google.com/maps/documentation/android/intro#sample_code)做了。

# ios - 调度队列和异步 RNCryptor

> ID：14481605
> 
> 赞同：7
> 
> 时间：2013-01-23T14:04:22.017
> 
> 标签：ios, objective-c, grand-central-dispatch, rncryptor

这是[在 iOS 上使用 RNCryptor 异步解密大文件的后续内容](https://stackoverflow.com/questions/14382969/asynchronously-decrypt-a-large-file-with-rncryptor-on-ios)

我已经设法使用本文中描述的方法异步解密了一个大型下载文件（60Mb），Calman 在他的回答中进行了更正。

它基本上是这样的：

```
int blockSize = 32 * 1024;
NSInputStream *cryptedStream = [NSInputStream inputStreamWithFileAtPath:...];
NSOutputStream *decryptedStream = [NSOutputStream output...];

[cryptedStream open];
[decryptedStream open];

RNDecryptor *decryptor = [[RNDecryptor alloc] initWithPassword:@"blah" handler:^(RNCryptor *cryptor, NSData *data) {
    NSLog("Decryptor recevied %d bytes", data.length);
    [decryptedStream write:data.bytes maxLength:data.length];
    if (cryptor.isFinished) {
        [decryptedStream close];
        // call my delegate that I'm finished with decrypting
    }
}];

while (cryptedStream.hasBytesAvailable) {
    uint8_t buf[blockSize];
    NSUInteger bytesRead = [cryptedStream read:buf maxLength:blockSize];
    NSData *data = [NSData dataWithBytes:buf length:bytesRead];

    [decryptor addData:data];
    NSLog("Sent %d bytes to decryptor", bytesRead);
}

[cryptedStream close];
[decryptor finish]; 
```

但是，我仍然面临一个问题：整个数据在被解密之前被加载到内存中。我可以看到一堆“向解密器发送 X 字节”，然后在控制台中看到同一束“解密器收到 X 字节”，当我想看到“发送，接收，发送，接收，.. ."。

这对于小（2Mb）文件或模拟器上的大（60Mb）文件来说很好；但是在真正的 iPad1 上，由于内存限制，它会崩溃，所以显然我不能为我的生产应用程序保留这个过程。

我觉得我需要通过使用`dispatch_async`而不是在`while`循环中盲目地发送数据来将数据发送到解密器，但是我完全迷路了。我试过了：

*   在 ,之前创建我自己的队列`while`并使用`dispatch_async(myQueue, ^{ [decryptor addData:data]; });`
*   `while`相同，但在循环内调度整个代码
*   相同，但调度整个`while`循环
*   使用`RNCryptor`-provided`responseQueue`而不是我自己的队列

这 4 个变体中没有任何作用。

我还没有完全理解调度队列；我觉得问题出在这里。如果有人能对此有所了解，我会很高兴。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T15:21:02.097

如果您只想一次处理一个块，则仅在第一个块回调您时处理一个块。您不需要信号量来执行此操作，您只需要在回调中执行下一次读取。你可能想要一个`@autoreleasepool`块在里面`readStreamBlock`，但我认为你不需要它。

当我有时间时，我可能会将它直接包装到 RNCryptor 中。我为它打开了[第 47](https://github.com/rnapier/RNCryptor/issues/47)期。我愿意接受请求。

```
// Make sure that this number is larger than the header + 1 block.
// 33+16 bytes = 49 bytes. So it shouldn't be a problem.
int blockSize = 32 * 1024;

NSInputStream *cryptedStream = [NSInputStream inputStreamWithFileAtPath:@"C++ Spec.pdf"];
NSOutputStream *decryptedStream = [NSOutputStream outputStreamToFileAtPath:@"/tmp/C++.crypt" append:NO];

[cryptedStream open];
[decryptedStream open];

// We don't need to keep making new NSData objects. We can just use one repeatedly.
__block NSMutableData *data = [NSMutableData dataWithLength:blockSize];
__block RNEncryptor *decryptor = nil;

dispatch_block_t readStreamBlock = ^{
  [data setLength:blockSize];
  NSInteger bytesRead = [cryptedStream read:[data mutableBytes] maxLength:blockSize];
  if (bytesRead < 0) {
    // Throw an error
  }
  else if (bytesRead == 0) {
    [decryptor finish];
  }
  else {
    [data setLength:bytesRead];
    [decryptor addData:data];
    NSLog(@"Sent %ld bytes to decryptor", (unsigned long)bytesRead);
  }
};

decryptor = [[RNEncryptor alloc] initWithSettings:kRNCryptorAES256Settings
                                         password:@"blah"
                                          handler:^(RNCryptor *cryptor, NSData *data) {
                                            NSLog(@"Decryptor recevied %ld bytes", (unsigned long)data.length);
                                            [decryptedStream write:data.bytes maxLength:data.length];
                                            if (cryptor.isFinished) {
                                              [decryptedStream close];
                                              // call my delegate that I'm finished with decrypting
                                            }
                                            else {
                                              // Might want to put this in a dispatch_async(), but I don't think you need it.
                                              readStreamBlock();
                                            }
                                          }];

// Read the first block to kick things off    
readStreamBlock(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T21:47:31.520

西里尔，

由于内存限制，您的应用程序崩溃的原因是 RNCryptor 缓冲区的增长超出了设备的能力。

基本上，您读取文件内容的速度比 RNCryptor 处理它的速度要快得多。由于它不能足够快地解密，它会缓冲传入的流，直到它可以处理它。

我还没有时间深入研究 RNCryptor 代码并弄清楚它是如何使用 GCD 来管理所有内容的，但是您可以使用信号量来强制读取等到前一个块被解密。

下面的代码可以在 iPad 1 上成功解密一个 225MB 的文件而不会崩溃。

它有一些我不太满意的问题，但它应该给你一个不错的起点。

需要注意的一些事项：

*   我将 while 循环的内部封装在 @autoreleasepool 块中以强制释放数据。没有它，直到 while 循环结束才会释放。（Matt Galloway 有一篇很棒的帖子在这里解释它：[A Look under ARC's hood](http://www.galloway.me.uk/2012/02/a-look-under-arcs-hood-episode-3/)
*   对 dispatch_semaphore_wait 的调用会阻塞执行，直到收到 dispatch_semaphore_signal。这意味着没有 UI 更新，并且如果您发送太多，应用程序可能会冻结（因此检查 bytesRead > 0）。

我个人觉得这个问题一定有更好的解决方案，但是我还没有时间去研究它。

我希望这有帮助。

```
- (IBAction)decryptWithSemaphore:(id)sender {
    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);

    __block int total = 0;
    int blockSize = 32 * 1024;

    NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *input = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:@"zhuge.rncryptor"];
    NSString *output = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:@"zhuge.decrypted.pdf"];

    NSInputStream *cryptedStream = [NSInputStream inputStreamWithFileAtPath:input];
    __block NSOutputStream *decryptedStream = [NSOutputStream outputStreamToFileAtPath:output append:NO];
    __block NSError *decryptionError = nil;

    [cryptedStream open];
    [decryptedStream open];

    RNDecryptor *decryptor = [[RNDecryptor alloc] initWithPassword:@"12345678901234567890123456789012" handler:^(RNCryptor *cryptor, NSData *data) {
        @autoreleasepool {
            NSLog(@"Decryptor recevied %d bytes", data.length);
            [decryptedStream write:data.bytes maxLength:data.length];
            dispatch_semaphore_signal(semaphore);

            data = nil;
            if (cryptor.isFinished) {
                [decryptedStream close];
                decryptionError = cryptor.error;
                // call my delegate that I'm finished with decrypting
            }
        }
    }];

    while (cryptedStream.hasBytesAvailable) {
        @autoreleasepool {
            uint8_t buf[blockSize];
            NSUInteger bytesRead = [cryptedStream read:buf maxLength:blockSize];
            if (bytesRead > 0) {
                NSData *data = [NSData dataWithBytes:buf length:bytesRead];

                total = total + bytesRead;
                [decryptor addData:data];
                NSLog(@"New bytes to decryptor: %d Total: %d", bytesRead, total);

                dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
            }
        }
    }

    [cryptedStream close];
    [decryptor finish];

    dispatch_release(semaphore);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T02:00:28.797

在花了最后 2 天试图让我的 MBProgress hud 用 Calman 的代码更新其进度之后，我想出了以下内容。使用的内存仍然很低，并且 UI 更新

```
- (IBAction)decryptWithSemaphore:(id)sender {

__block int total = 0;
int blockSize = 32 * 1024;

NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *input = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:@"zhuge.rncryptor"];
NSString *output = [[docPaths objectAtIndex:0] stringByAppendingPathComponent:@"zhuge.decrypted.pdf"];

NSInputStream *cryptedStream = [NSInputStream inputStreamWithFileAtPath:input];
__block NSOutputStream *decryptedStream = [NSOutputStream outputStreamToFileAtPath:output append:NO];
__block NSError *decryptionError = nil;
__block RNDecryptor *encryptor=nil;
NSDictionary *attributes = [[NSFileManager defaultManager] attributesOfItemAtPath:input error:NULL];
__block long long fileSize = [attributes fileSize];
[cryptedStream open];
[decryptedStream open];
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
dispatch_async(queue, ^{
    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);

encryptor = [[RNDecryptor alloc] initWithPassword:@"12345678901234567890123456789012" handler:^(RNCryptor *cryptor, NSData *data) {
    @autoreleasepool {
        NSLog(@"Decryptor recevied %d bytes", data.length);
        [decryptedStream write:data.bytes maxLength:data.length];
        dispatch_semaphore_signal(semaphore);

        data = nil;
        if (cryptor.isFinished) {
            [decryptedStream close];
            decryptionError = cryptor.error;
            [cryptedStream close];
            [encryptor finish];
            // call my delegate that I'm finished with decrypting
        }
    }
}];

while (cryptedStream.hasBytesAvailable) {
    @autoreleasepool {
        uint8_t buf[blockSize];
        NSUInteger bytesRead = [cryptedStream read:buf maxLength:blockSize];
        if (bytesRead > 0) {
            NSData *data = [NSData dataWithBytes:buf length:bytesRead];

            total = total + bytesRead;
            [encryptor addData:data];
            NSLog(@"New bytes to decryptor: %d Total: %d", bytesRead, total);

            dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
            dispatch_async(dispatch_get_main_queue(), ^{
                HUD.progress = (float)total/fileSize;
            });

                           }
                           }
}
    }); 
```

}

# powershell - 在 Powershell 中设置除标准颜色之外的背景颜色

> ID：14481606
> 
> 赞同：5
> 
> 时间：2013-01-23T14:04:24.220
> 
> 标签：powershell

我可以通过脚本更改控制台背景颜色：

```
$host.UI.RawUI.BackgroundColor = "Black" 
```

但在这种情况下，我仅限于预设数量的定义颜色，不幸的是我正在寻找的颜色不在这里。有从控制台 GUI 中选择颜色的选项（右键单击顶部的 Windows PowerShell 栏->属性->颜色）。不幸的是（再次）只有 BackGroundColor 和 ForeGroundColor 可以在那里更改，没有办法在那里更改 $host.privatedata 颜色之一。

是否有可能通过脚本以某种方式放置十六进制编码颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:26:22.347

这里有一个注册表黑客：http: [//stackingcode.com/blog/2011/11/14/zenburn-powershell](http://stackingcode.com/blog/2011/11/14/zenburn-powershell)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T14:50:54.373

在我看来，Powershell 应该允许您将颜色设置为 rgb 十六进制值，而不是预定义的一组颜色。但抛开设计问题不谈，我解决这个问题的方法是创建一个 .reg 文件来重新定义 Powershell 使用的“颜色桶”（他们称之为 ColorTables）。下面的代码包含说明 Powershell 中特定 ColorTable 控件的注释。

笔记：

1.  要先保存当前颜色，请打开 regedit 并导出 HKCU\Console。
2.  将下面的代码保存到一个文件（例如colors.reg），然后运行它。
3.  创建一个指向 powershell 的快捷方式。运行。它应该有新的颜色。
4.  要修改颜色，请将相应的 ColorTableXX dword 设置为十六进制值，但请注意，RGB 值实际上是 BGR，需要在数字前填充 00。所以蓝色 #4286f4 的双字为 00f48642。

**颜色.reg：**

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Console]
; BACKGROUND
"ColorTable07"=dword:00efefef

; ERROR BACKGROUND
"ColorTable00"=dword:00efefef

;ERROR
"ColorTable12"=dword:00255ffc

; STATIC TEXT (PROMPT and OUTPUT) AND COMMAND ARGUMENT
"ColorTable01"=dword:00472713

; COMMAND TEXT
"ColorTable14"=dword:00c56e36

; COMMAND TEXT SELECTED
"ColorTable09"=dword:00ef47d3

; COMMAND FLAG
"ColorTable08"=dword:00a53733

; COMMAND FLAG SELECTED
"ColorTable15"=dword:00ef47d3

; COMMMAND ARGUMENT SELECTED
"ColorTable06"=dword:00ef47d3

; COMMAND VARIABLE (e.g. $profile)
"ColorTable10"=dword:00a53733

; COMMAND VARIABLE SELECTED
"ColorTable13"=dword:00ef47d3

; deep purple -- not sure what this is
"ColorTable04"=dword:00660566

; brown -- not sure what this is
"ColorTable05"=dword:00336699

; purple -- not sure what this is
"ColorTable11"=dword:00845f84

; green -- not sure what this is
"ColorTable02"=dword:00339933

; pastel lavendar -- not sure what this is
"ColorTable03"=dword:00FF9999 
```

# windows - 我无法在 Visual c express ediion 2008 中组装 movd (MMX) 指令

> ID：14481607
> 
> 赞同：0
> 
> 时间：2013-01-23T14:04:28.987
> 
> 标签：windows, assembly, x86, masm, mmx

当我尝试编译`movd`指令时，它显示错误为

```
error A2085:instruction or register not accepted in current CPU mode 
```

我的代码如下：

```
.386                
.model flat, c                                           
.code

add_func_asm PROC                                                 
movd     eax, ebx
ret    
add_func_asm endp

END 
```

这是文件，我从文件中`.asm`调用了这个函数`C`

我使用下面的代码修复了它

```
.586    
.mmx            
.model flat, c                                           
.code                          
add_func_asm PROC                                                 
movd     mm1, ebx
ret    
add_func_asm endp

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:35:26.593

```
.386 
```

那行不通，386处理器没有这条指令。您必须以 .586（奔腾及更高版本）为目标并明确声明您要使用 MMX 指令集。使固定：

```
.586
.mmx 
```

这将使汇编程序接受 MOVD 指令。接下来你必须做的是修复操作数。从 ebx 移动到 eax 无效且毫无意义，您必须指定一个 MMx 寄存器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:08:16.343

MOVD 和 MOVQ 是 MMX 指令，因此您需要使用 .MMX（或 .XMM）指令来启用指令集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:29:15.140

改为尝试`mov eax, ebx`移动 32 位。

# javascript - 两种方式绑定在具有嵌入范围的指令中不起作用

> ID：14481610
> 
> 赞同：58
> 
> 时间：2013-01-23T14:04:36.433
> 
> 标签：javascript, angularjs

我在绑定到模型的控制器中有一个文本框`name`。控制器中有一个指令，指令中有另一个文本框，它绑定到同一个模型`name`：

```
<div class="border" ng-controller="editCtrl">
   Controller: editCtrl <br/>
   <input type="text" ng-model="name" />
   <br/>
   <tabs>
      Directive: tabs <br/>
      <input type="text" ng-model="name"/>
   </tabs>
</div> 
```

```
mod.directive('tabs', function() {
  return {
    restrict: 'E',
    transclude: true, 
    template:
      '<div class="border" ng-transclude></div>',
  };
}); 
```

当您在外部文本框中输入内容时，它会反映在内部文本框中，但如果您在内部文本框中输入内容，它将停止工作，即两个文本框不再反映相同的值。

参见示例：http: [//jsfiddle.net/uzairfarooq/MNBLd/](http://jsfiddle.net/uzairfarooq/MNBLd/)

我也尝试过使用两种方式绑定 attr ( `scope: {name: '='}`) 但它给出了语法错误。使用`scope: {name: '@'}`具有相同的效果。

任何帮助将不胜感激。

**除了公认的答案，[这篇文章](https://github.com/angular/angular.js/wiki/Understanding-Scopes#wiki-ngController)确实帮助我理解了子 scpoes 中的原型继承。我强烈建议任何对范围有问题的人彻底阅读它。**

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-01-23T16:46:54.110

一个指令`transclude: true`会导致指令创建一个新的（转入的）子范围。这个新的作用域原型继承自父作用域。在您的情况下，父范围是与 editCtrl 控制器关联的范围。

在子作用域（即 ng-model）中使用双向数据绑定来绑定到包含原始值（例如`name`）的父作用域属性总是会导致问题——好吧，我应该说它没有按预期工作. 当子级的范围属性发生变化时（例如，您在第二个文本框中键入），子级会创建一个新的范围属性来隐藏/隐藏同名的父级范围属性。*如果父属性包含原始值，则在创建子属性时该*值（本质上）被复制到子属性。子范围（例如，第二个文本框）的未来更改仅影响子属性。

在输入第二个文本框之前（即，在子属性中更改之前），子/嵌入`name`范围通过原型继承在父范围中找到属性（下图中的虚线）。这就是两个文本框最初保持同步的原因。下面，如果您在第一个文本框中键入“标记”，则范围如下所示：

![嵌入范围遵循继承链](../Images/4f7d53711a718138293e8eb8ac2807d8.png)

我创建了一个[小提琴](http://jsfiddle.net/mrajcok/V5cyH/)，您可以在其中检查两个范围。在输入第二个文本框之前，单击第二个文本框旁边的“显示范围”链接。这将允许您查看嵌入的子范围。您会注意到此时它没有`name`属性。清除控制台，在第二个文本框中键入，然后再次单击该链接。您会注意到子范围现在有一个`name`属性，初始值是父属性的值（“Mark”）。如果您在第二个文本框中键入“likes Angular”，则范围如下所示：

![嵌入原语隐藏父属性](../Images/ca906e347304d9a3822e3c2cb0013c3d.png)

有两种解决方案：

1.  做@pgreen2 建议的事情（这是“最佳实践”解决方案）——使用对象而不是原语。使用对象时，子/嵌入范围不会获得新属性。这里只有原型继承在起作用。在下图中，假设 editCtrl 的 $scope 定义了这个对象
    `$scope.myObject = { name: "Mark", anotherProp: ... }`：
    ![父对象](../Images/8e4c75f41ffef18fcdb46e207fbd2064.png)
2.  在子范围内使用 $parent （这是一个脆弱的解决方案，不推荐，因为它对 HTML 结构做出假设）：`ng-model="$parent.name"`在 <tabs> 元素内的 <input> 内使用。上面的第一张图片显示了它是如何工作的。

使用时会出现语法错误，`scope: {name: '='}`因为在使用双向数据绑定时（即使用'=' 时），不允许插值- 即不能使用{{}}。而不是`<tabs name="{{name}}">`使用`<tabs name="name">`.

使用 '@' 与 transclude 情况相同，因为 ng-transclude 使用的是 transcluded 范围，而不是使用创建的隔离范围`scope: { ... }`。

有关范围（包括图片）的（大量）更多信息，请参阅
[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T14:16:06.673

我相信这个问题与范围界定有关。最初内部文本框没有`name`设置，因此它是从外部范围继承的。这就是为什么在外框中输入会反映在内框中的原因。但是，一旦在内部框中键入内容，内部范围现在包含`name`，这意味着它不再绑定到外部`name`，因此外部文本框不会同步。

修复的适当方法是仅将模型存储在范围内，而不是您的值。我在[http://jsfiddle.net/pdgreen/5RVza/](http://jsfiddle.net/pdgreen/5RVza/)中修复了它， 诀窍是创建一个模型对象 ( `data`) 并在其上引用值。

不正确的代码会修改指令中的范围，正确的代码会修改指令范围内的模型。这种细微的差别使作用域继承能够正常工作。

我相信 Miško Hevery 的表述方式是，范围在控制器中应该是*只写的*，而在指令 中应该是*只读的。*

更新：参考：[https ://www.youtube.com/watch?v=ZhfUv0spHCY#t=29m19s](https://www.youtube.com/watch?v=ZhfUv0spHCY#t=29m19s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:11:48.117

语法错误意味着你写错了一些东西。它与特定的框架/库无关。您可能忘记添加“，”或关闭括号。再次检查

# javascript - Javascript Regex Replace - 不替换所有必需的字符串

> ID：14481612
> 
> 赞同：0
> 
> 时间：2013-01-23T14:04:38.640
> 
> 标签：javascript, regex

我不知道这里发生了什么..

```
model.attributes.data.Path.replace('/\\/g',""), @options.path.replace('/\\/g',"") 
```

做的时候：

```
console.log model.attributes.data.Path.replace('/\\/g',""), 
@options.path.replace('/\\/g',"") 
```

数据是：

> T2/T2_2、T2/T2_2

它返回这个：

> T2T2_2、T2/T2_2

所以只有第一条路径被替换，而不是第二条路径？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:10:04.420

除了匹配反斜杠 ( `\\`= `\`) 而不是正斜杠 ( `\/`= `/`) 之外，不要将正则表达式作为字符串放入替换函数中。

利用：

```
.replace(/\//g,""); 
```

代替

```
.replace('/\//g',""); 
```

然后它会工作得很好：

```
"T2/T2_2 , T2/T2_2".replace(/\//g,"");
// returns: "T2T2_2 , T2T2_2" 
```

否则，它只会尝试从字面上找到*string* `'/\//g'`。

此外，要替换 1 个正则表达式中的正斜杠和反斜杠，请尝试以下操作：

```
"T2/T2_2 , T2\T2_2".replace(/\/|\\/g,"");
// returns: "T2T2_2 , T2T2_2"

# \/|\\ Matches:
# \/  - Forward slash
# |   - Or
# \\  - Backslash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:08:37.913

尝试：

```
model.attributes.data.Path.replace(/\//g,"")
@options.path.replace(/\//g,"") 
```

`/\\/g`匹配反斜杠并`/\//g`匹配正斜杠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:09:20.783

尝试`.replace(/\//g,"")`代替`.replace('/\\/g',"")`, （正则表达式不是字符串）。

# android - Android：屏幕截图完成时收到通知

> ID：14481622
> 
> 赞同：2
> 
> 时间：2013-01-23T14:05:03.327
> 
> 标签：android, screenshot, capture

当使用软键或android上的设备硬键执行屏幕捕获时，有什么方法可以得到通知？任何适用于 2.3 及更高版本的方式都会有很大帮助。

**用例：**

我已经使用`FLAG_SECURE`. 我想在`Custom Dialog`执行此操作时向用户显示。Android 提供的机制各不相同。有时会看到通知，而在其他情况下，会在没有用户反馈的情况下捕获空白屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:16:43.940

> 当使用软键或android上的设备硬键执行屏幕捕获时，有什么方法可以得到通知？

不，对不起。

# java - log4j.xml 中基于时间和大小轮换日志的配置是什么

> ID：14481623
> 
> 赞同：2
> 
> 时间：2013-01-23T14:05:02.817
> 
> 标签：java, log4j

如果有办法根据时间和大小轮换日志文件，请告诉我。

当基于时间发生翻转时，日志文件的格式必须为 logfilename.log.date。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:24:50.293

如果您想根据时间进行轮换，[DailyRollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html)可能是最佳实践。根据您的配置，您可以拥有每年、每月、每小时等日志。

如果您想要基于大小的旋转[RollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html)可能非常有用。

此外，如果您想同时使用时间和大小，我建议您看一下[TimeAndSizeRollingAppender](http://www.simonsite.org.uk/)，它在 Apache 2.0 许可下免费，它声称提供 DailyRollingFileAppender 和 RollingFileAppender 的全部功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:23:05.113

看看 DailyRollingFileAppender 和 RollingFileAppender。

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html)

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html)

# r - 在 R 中以 0.1 的概率重新连接晶格

> ID：14481627
> 
> 赞同：0
> 
> 时间：2013-01-23T14:05:12.850
> 
> 标签：r, igraph

我有一个具有 100 个节点和 10 个邻居的格子，其构造方式如下：

```
d <- as.directed(graph.lattice(100, 0, nei=10, directed=FALSE, circular=TRUE)) 
```

现在我想以 0.1 的概率重新连接它

如果我使用 rewire() 它需要我设置“niter”而不是概率。

如何选择 niter 的值以使其对应于 0.1 的概率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:56:30.493

正如@Gabor 在评论中指出的那样，使用以下`rewire.edges`功能：

```
d <- as.directed(graph.lattice(100, 0, nei=10, directed=FALSE, circular=TRUE))

d2 <- rewire.edges(d, 0.1) 
```

# jquery - JQuery Ajax + Windows 身份验证 = 401 未经授权

> ID：14481628
> 
> 赞同：4
> 
> 时间：2013-01-23T14:05:12.783
> 
> 标签：jquery, asp.net, ajax, authentication, iis

我正在处理的应用程序面临 Ajax 问题。Web 应用程序是用 ASP.NET 4.5 编写的，它更具体地派生自 Visual Studio 2012 中的默认 MVC 示例应用程序。该应用程序托管在本地 IIS 服务器上（不是快速版本），并且需要 Windows 身份验证（当前为 NTLM）出于安全原因冒充客户。

我这里有 2 个问题。

1.  该网站在浏览时正确地对客户端进行身份验证，但由于某种模糊的原因，每个 Ajax 调用都会在 401 Unauthorized 错误中失败（它在使用匿名身份验证时工作，所以我猜凭据没有封装在请求中？！）。我还没有时间调查他们之间的交流，但我相信这里的一位大师能够提供帮助。

2.  最后，Windows 身份验证提供程序将移至 kerberos。关于这个 Ajax 问题有什么特别要注意的吗？

如果您需要任何其他信息，请告诉我。

**编辑 1**

我觉得很愚蠢......重新启动IIS解决了这个问题。有时它是一种乐趣......

感谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:52:46.937

下面的答案是基于我对 NTLM/Kerberos 的理解以及对 XmlHttpRequest 如何重用浏览器已知信息的一些推测。但是，我实际上并没有尝试重现您的场景，因此很可能我错了。

好的，到此为止。NTLM 会话是一个面向连接的协议。这意味着如果您的服务器不断返回“Keep-alive”并且客户端重复使用相同的连接，则无需再次进行身份验证握手。但是，就像连接关闭并再次打开一样，需要进行新的握手。只要这是请求服务器的浏览器，新的握手就会使用缓存在浏览器内存中的凭据自动完成，即您在初始握手时提供的确切凭据。

这就是为什么我认为您的 ajax 调用不起作用的原因——它可能只是打开了一个新连接并需要一个新的握手（而且似乎由于某种原因它没有重用缓存在浏览器内存中的凭据）。

但是，如果您切换到 Kerberos，这应该会改变。Kerberos 基于质询-响应模式，其中浏览器和服务器直接联系身份验证机构。然后，kerberos 将您的身份验证保存在带有票证的 http 标头上。有可能标头会自动附加到您的 AJAX 请求中。

请注意，与 NTLM 相反，Kerberos 仅在浏览器和服务器都可以联系身份验证机构时才有效。这就是为什么通常在 IIS 中将“协商”设置为身份验证方案 - 如果身份验证权限不能直接用于浏览器，这会首先尝试 Kerberos，然后切换回 NTLM。

# jquery-animate - 如何扩展 jQuery 的 animate-step 功能

> ID：14481631
> 
> 赞同：6
> 
> 时间：2013-01-23T14:05:21.113
> 
> 标签：jquery-animate, jquery, jquery-callback, custom-events

任何想法如何`step`在 jQuery 1.6+ 中扩展 -function？

我制作了一个特殊事件来触发`custom-event`每个动画步骤。然而，由于 jQuery 的动画方法已更改，或者更确切地说 step 函数不再可扩展（`$.fx.step`导致为空`object`），因此无法用您自己的东西扩展它。

```
(function($){
    var oldStep = $.fx.step._default;
    $.event.special.animating = { };
    $.fx.step._default = function( fx ) {
        $(fx.elem).trigger('animating', fx);
        oldStep.apply( this, arguments );
    };
}(jQuery));

$('#foo').animate({width: 200});
$('#foo').bind('animating', function(e, fx){
    console.log(fx);
}); 
```

任何想法如何让它与较新的 jQuery 版本一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T23:00:15.137

知道了，在 jQuery 的[更新博客](http://jquery.org/updates/page/9/)中，这已经被标记为要评论了。

# java - 日期格式 Java 十进制天到天和小时

> ID：14481634
> 
> 赞同：-2
> 
> 时间：2013-01-23T14:05:45.303
> 
> 标签：java

我有十进制格式的天，例如 22.5 天我想使用 java 将其转换为 22 天 12 小时

在上述问题中需要帮助。先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:09:52.750

您可以使用 SimpleDateFormat 但简单的数学可能更简单。

```
double days = 22.5;
long hours = Math.round(days * 24);
String text = hours/24 + " days, " + hours % 24 +" hours."; 
```

添加分钟和秒你可以做到。

```
double days = 22.5;
long seconds = Math.round(days * 86400);
String text = seconds/86400 + " days, "
           + seconds / 3600 % 24 + " hours, "
           + seconds / 60 % 60   + " minutes, "
           + seconds % 60        + " second."; 
```

使用 SimpleDateFormat

```
SimpleDateFormat SDF = new SimpleDateFormat("dd' days, 'hh' hours'");
SDF.setTimeZone(TimeZone.getTimeZone("GMT"));
String text = SDF.format(new Date(Math.round(days * 86400000))); 
```

注意：SimpleDateFormat 最多只能使用 31 天。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:15:22.723

这是一个模糊的答案，但只是为了向您展示它非常简单：

```
int a=22.5,hr,days;
int days=22.5;
float t1=22.5;
(t1-days)*24=... 
```

:)

# templates - 可以先运行导入的根模板吗？

> ID：14481636
> 
> 赞同：1
> 
> 时间：2013-01-23T14:05:55.860
> 
> 标签：templates, xslt, import, document-root

假设你有这两个 xsl 文件：

*牛包装器.xsl*

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:element name="cow">
            <next-match />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

*测试.xsl*

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import href="cow-wrapper.xsl" />

    <xsl:template match="/">
        <!-- regular stuff to do -->
    </xsl:template>

</xsl:stylesheet> 
```

在这种情况下，根本不调用 cow-wrapper.xsl 中的根匹配项。有没有办法让 cow-wrapper.xsl 中的根模板匹配优先于 test.xsl 中的根模板？

我所追求的是一种简单地导入文件并让它包装常规输出的方法。例如在肥皂信封中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:22:33.353

如果我希望首先“执行”导入模板中的模板，我要么在导入样式表中没有具有相同匹配模式的模板，要么我会这样写：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import href="cow-wrapper.xsl" />

    <xsl:template match="/">
        <xsl:next-match/>
        <!-- regular stuff to do -->
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:26:06.670

从[XSLT 规范](http://www.w3.org/TR/xslt20/#conflict)看来，导入模板的优先级总是低于具有更高导入优先级的冲突模板（主 XSLT 将具有最高导入优先级），但也许这是一个合适的解决方法？：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:element name="cow">
            <apply-templates select="." mode="regular">
        </xsl:element>
    </xsl:template>
</xsl:stylesheet>

<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import href="cow-wrapper.xsl" />

    <xsl:template match="/" mode="regular">
        <!-- regular stuff to do -->
    </xsl:template>

</xsl:stylesheet> 
```

# php - MySQLi准备好的语句错误

> ID：14481643
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:06:27.680
> 
> 标签：php, mysqli, prepared-statement

我有以下查询：

```
$query = "SELECT * FROM PAS WHERE KLANT_NR = (SELECT KLANT_NR FROM klanten WHERE VOORNAAM = ? AND ACHTERNAAM = ?)";

$stmt = $mysqli->prepare($query)){
        $stmt->bind_param("ss", $klantVoornaam, $klantAchternaam); 
```

然而，这会产生以下错误：

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '? AND ACHTERNAAM = ?)' at line 1 
```

这两个变量是 $_POST 字符串..

奇怪的是，如果我在普通查询中添加两个字符串而不是“？”，则查询工作正常。我不明白为什么准备好的语句不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:38:31.560

我自己找到了遮阳篷，它与我放在下面的另一个 $query 有关..

愚蠢的错误，尽管感谢您的帮助。

# jquery - 将科尔多瓦升级到 2.3.0 后，sqlite 不起作用

> ID：14481645
> 
> 赞同：1
> 
> 时间：2013-01-23T14:06:40.230
> 
> 标签：jquery, sqlite, cordova

将 cordova 版本升级到 2.3.0 后，我的 sqlite 插件不起作用。我没有改变实现。config.xml 文件中的引用也存在。

有新的 sqlite 插件版本吗？

# javascript - 更改样式表在 IE 中不起作用

> ID：14481647
> 
> 赞同：0
> 
> 时间：2013-01-23T14:06:43.377
> 
> 标签：javascript

我有一个带有 javascript 的样式表更改器，但它在 IE 中不起作用，而在 Firefox 和 Chrome 中运行良好。我正在使用的 HTML 代码是这样的：

```
<head>

<link href="defualt.css" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="alternate stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="alternate stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="alternate stylesheet" type="text/css"  />

<script type="text/javascript" src="javascript.js"></script>

</head>
<body>

<form>
    <select id="myList" >
        <option value="default">Default</option>
        <option value="theme1">Theme 1</option>
        <option value="theme2">Theme 2</option>  
        <option value="theme3">Theme 3</option>
    </select>
</form>

</body> 
```

和javascript：

```
function setActiveStyleSheet(title) {
    var i, a, main;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
            a.disabled = true;
            if (a.getAttribute("title") == title) a.disabled = false;
        }
    }
    createCookie("style", title, 7);
}

function getActiveStyleSheet() {
    var i, a;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
    }
}

function getPreferredStyleSheet() {
    var i, a;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1
           && a.getAttribute("rel").indexOf("alt") == -1
           && a.getAttribute("title")
           ) return a.getAttribute("title");
    }
}

function getTheme() {
    var storedThemeVal = readCookie('selectedTheme');
    if (storedThemeVal != null && storedThemeVal != "") {
        for (var i = 0; i < selectBox.options.length; i++) {
            if (selectBox.options[i].value == storedThemeVal) {
                selectBox.selectedIndex = i;
            }
        }
    }
}

function setTheme() {
    var selectedThemeVal = selectBox.options[selectBox.selectedIndex].value;
    createCookie('selectedTheme', selectedThemeVal);
}

function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    }
    else expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

function initiate()
{

    window.selectBox = document.getElementById("myList");
    var cookie = readCookie("style");
    var title = cookie ? cookie : getPreferredStyleSheet();
    setActiveStyleSheet(title);
    getTheme();
    selectBox.onchange = function () {
        setActiveStyleSheet(this.value);
        setTheme();
    };

}

window.onload = initiate; 
```

我不明白为什么这在 IE 中不起作用，因为它在其他浏览器中运行良好。而且我更喜欢将我所有的 javascript 保存在我的单独文档 javascript.js 中，并且我不想使用库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:20:09.183

我不知道您的代码是否还有其他错误。但我知道 IE9 不支持 getElementsByClassName()，并且在 ie 中，事件绑定方法是 attachEvent()。我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:11:46.033

可能是因为 IE 无法从元素中获取非标准属性。

此外，您可能想尝试以下操作而不是“getElementsByClassName()”（不支持）

```
i = 0;
a = document.getElementsByTagName("a");
while (element = a[i++]) {
  if (element.className == "sidemenu-maincat") {
    // blah blah...
  }
} 
```

# c# - 如何使用 Revit API 获取 Revit 文件版本？

> ID：14481652
> 
> 赞同：2
> 
> 时间：2013-01-23T14:06:49.100
> 
> 标签：c#, revit, revit-api

在 Revit API 中，我知道我可以获得当前正在运行的 Revit 实例的版本 ( `ControlledApplication.VersionBuild`, `ControlledApplication.VersionName`, `ControlledApplication.VersionNumber`)。但是，我想在打开 Revit 文件之前获取它本身的版本。这样，当用户在较新版本的 Revit 中打开较旧的 Revit 文件时，我可以停止自动升级对话框。我正在使用 Revit 2013 并期待 2011、2012 和 2013 的文件。

[类似的 Autodesk 讨论组问题](http://www.revitforum.org/architecture-general-revit-questions/6853-there-tool-determine-what-version-revit.html)
[构建编码器](http://thebuildingcoder.typepad.com/blog/2008/10/rvt-file-version.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T03:30:15.957

正如您所说，Revit 文件格式是结构化存储文档，您需要的信息存储在*BasicFileInfo*流中。

[这](http://pastebin.com/FUBcmSRx)是演示如何提取 BasicFileInfo 数据的完整控制台应用程序

不幸的是，我不知道 BasicFileInfoStream 的格式。但是，如果您将其作为字符串读取，则可以获得创建文件的版本。

读取唯一的 BasicFileInfo 比读取整个文件要好得多。想象一下，如果 Revit 项目超过 500 MB 或更多。你打电话时

```
string fileContents = streamReader.ReadToEnd(); 
```

您将整个文件写入内存。

此外，大文件上的正则表达式工作缓慢。

我认为你应该使用

```
var rawString = System.Text.Encoding.Unicode.GetString(rawData); 
```

从我的示例中并在 rawString 中使用 Regex 而不是整个文件。

希望能帮助到你。

**更新：** 我完全忘记了。在 Revit 2013 中，您可以使用类`SavedInCurrentVersion`的属性`BasicFileInfo`来确定文件是否保存在当前 Revit 版本中。如果您想获取保存文件的版本（如您的问题标题中所示），您可以使用`SavedInVersion`同一类的属性。您可以使用该`BasicFileInfo.Extract`方法获取`BasicFileInfo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:32:11.020

我仔细查看了我的问题中[发布的讨论组](http://www.revitforum.org/architecture-general-revit-questions/6853-there-tool-determine-what-version-revit.html)，发现版本信息在文件的其他乱码中实际上是人类可读的。“.rvt”文件以 OLE 格式存储，因此如果使用[结构化存储查看器](http://www.mitec.cz/ssv.html)等工具，您可以查看内容。它将位于*BasicFileInfo*下。

如果您愿意，那么您可能可以使用[.NET 的 OLE 库](https://stackoverflow.com/questions/2897328/is-there-any-library-to-access-ole-structured-storage-from-c)来读取数据，但我使用 a`StreamReader`和 a`Regex`代替。

这是正则表达式：

**Revit\sArchitecture\s(?<Year>\d{4})\s(Build:\s(?<Build>\w*)\((?<Processor>\w{3})\)\)**

这是代码：

```
private void ControlledApplication_DocumentOpening (object sender,
  DocumentOpeningEventArgs e)
{
  FileInfo revitFileToUpgrade = new FileInfo(e.PathName);
  Regex buildInfoRegex = new Regex(
    @"Revit\sArchitecture\s(?<Year>\d{4})\s\(Build:\s(?<Build>\w*)\((<Processor>\w{3})\)\)");

  using(StreamReader streamReader = 
    new StreamReader(e.PathName, Encoding.Unicode))
  {
    string fileContents = streamReader.ReadToEnd();

    Match buildInfo = buildInfoRegex.Match(fileContents);
    string year = buildInfo.Groups["Year"].Value;
    string build = buildInfo.Groups["Build"].Value;
    string processor = buildInfo.Groups["Processor"].Value;
  }
} 
```

这将允许您获取年份、内部版本号和处理器类型。但是请注意，我的版本专门针对*Architecture*进行检查，因此您需要针对 MEP 或 Structural 进行修改。

**更新**：

*   如果您使用的是**Revit 2013 或更高版本**，请参阅[我的其他答案](https://stackoverflow.com/questions/14481652/how-can-i-get-the-revit-file-version-using-the-revit-api/14503497#14503497)。
*   如果您使用的是**Revit 2012 或更早版本**，请将上面的 Regex 与[Victor 的答案](https://stackoverflow.com/questions/14481652/how-can-i-get-the-revit-file-version-using-the-revit-api/14493458#14493458)结合起来，以便更好地阅读 BasicFileInfo（而不是全部内容）。

# android - Android 私钥问题。

> ID：14481655
> 
> 赞同：1
> 
> 时间：2013-01-23T14:06:53.223
> 
> 标签：android, private-key

我在 android 中开发了一个应用程序并发布了第一个版本。但现在我丢失了我以前的（私钥）debug.keystore。现在我要发布带有不同私钥的第二个版本。但是第二个版本没有安装在手机中。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:11:49.690

您必须卸载旧版本，然后安装新版本，因为如果更新具有不同的签名，Android 不允许安装更新。

此外，您的所有用户都必须这样做，并且 Google Play 等应用商店不允许您使用使用不同密钥签名的更新。您将不得不以不同的包名称再次发布您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:11:33.350

只需更改您的`Package Name`并更改`androidManifest`文件中的内容并使用 new 上传`KeyStore`。别无退路。因为谷歌不允许你上传另一个具有相同`Package name`.

# akka - 优雅地重启整个 Akka Actor 系统

> ID：14481656
> 
> 赞同：7
> 
> 时间：2013-01-23T14:06:56.103
> 
> 标签：akka

如何优雅地重启整个演员系统？换句话说，停止系统中的所有参与者`gracefulStop`（或至少是重要的参与者！）

实际上，我想在测试期间重新启动应用程序，而无需每次启动新的单独 JVM 的开销。

我正在使用 Akka 2.0.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T13:28:32.103

Whenever you have implemented an actor system and it is lacking one function, don’t hesitate to add one more actor to take care of that: in this case create one actor whose job is it to send graceful stop requests to your important actors and await their termination. That actor can then shut down the actor system, while from the outside you `awaitTermination`. If you created that actor with `system.actorOf(Props[Terminator], "terminator")`, then you can shut it down with

```
system.actorFor("/user/terminator") ! MakeItStop // or whatever message you choose
try system.awaitTermination(1.minute) // or however long it may take
catch {
  case _: TimeoutException => system.shutdown() // as a last resort
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:12:32.683

如果是用于单元测试，您可以停止 ActorSystem 并启动一个新的。

```
val system1 = ActorSystem("system1")
system1.shutdown() // This is async and will return before the system actually stops.

val system2 = ActorSystem("system2") 
```

我不确定如何重新启动系统（实际上，我不确定上述方法是否可行，但我认为没有理由不这样做）。

# ios - setRootViewController: 在 setViewControllers: 被调用后不能按预期工作

> ID：14481659
> 
> 赞同：1
> 
> 时间：2013-01-23T14:07:04.170
> 
> 标签：ios, objective-c, uiviewcontroller

我以编程方式创建了一个视图控制器并将其设置为根控制器。一切都如预期的那样完美：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];   
CustomViewController *vc = [[CustomViewController alloc] init];
[[self window] setRootViewController:vc];    
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

然后我添加了一个UITabBarViewController，将它的'viewControllers'属性设置为指向（一个数组）主viewController'vc'。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];   
CustomViewController *vc = [[CustomViewController alloc] init];

UITabBarController *tbc = [[UITabBarController alloc] init];
NSArray *controllers = @[vc];
[tbc setViewControllers:controllers];

[[self window] setRootViewController:vc];    
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

并且视图在启动时停止显示在屏幕上，还有关于未设置根视图控制器的警告。添加字符串后，'vc'控制器的视图下方终于加载完成了，但是屏幕底部有一个空行，好像UIBarController修改了[[UIMainScreen bounds]。

```
[[self window] addSubview:vc.view]; 
```

我是iOS开发的新手，我有点困惑。似乎我不了解有关视图控制器层次结构的一些非常基本的东西，但是在阅读了 Apple 的“视图控制器编程指南”之后，我仍然不明白我错在哪里。

setRootViewController: 方法应该自动将参数视图控制器的 _view 分配为窗口的默认视图，但如果命名的视图控制器先前已经被 UITabBarViewController 的 viewControllers 属性指向，则不会发生这种情况。虽然我检查了调试器并发现在 setViewControllers: 方法被调用后 'vc' 对象没有改变。

您能否解释一下发生了什么或指向我应该阅读的文档？

更新：我不会将“vc”控制器插入“tbc”控制器。我想要的是全屏显示“vc”视图，因为它通常会显示没有关于“tbc”的代码。从我的角度来看，添加另一个视图（在我的情况下为 tbc）不应该影响这种行为。

当然，从实际的角度来看，这毫无用处，但我想知道引擎盖下发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:00:18.213

当您将 vc 添加到选项卡栏控制器时，它会成为该控制器的子级。窗口的根视图控制器不能是孩子，这就是您收到该错误的原因。如果你想让vc全屏，那么不要把它放在标签栏控制器中，然后在某个时候，你将窗口的根视图控制器切换为标签栏控制器（如果这是你想要的）。

你还没有说你想用vc做什么。根据其用途，更好的方法可能是从标签栏控制器的第一个标签中的任何控制器以模态方式呈现它（因此它占据整个屏幕）。从 viewDidAppear 执行此操作，这将是用户在应用启动时首先看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:16:20.447

你应该设置`tbc`为`rootViewController`.

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];   
CustomViewController *vc = [[CustomViewController alloc] init];

UITabBarController *tbc = [[UITabBarController alloc] init];
NSArray *controllers = @[vc];
[tbc setViewControllers:controllers];

[[self window] setRootViewController:tbc];   
[[self window] addSubview:tbc.view]; 
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

# gnuplot - 为行堆叠直方图条设置标签

> ID：14481663
> 
> 赞同：0
> 
> 时间：2013-01-23T14:07:12.503
> 
> 标签：gnuplot

谁能告诉我如何为gnuplot rowstacked histogram 添加标签？我想为一个特定的阅读列添加标签。

数据如下所示：

```
Date, Online_Percent, Offline_percent, Maintance_percent
01.01.2013, 96.000, 2.000, 2,000 
```

我想用“offline_time”添加另一列并用它标记栏（在栏的顶部或右侧，我不在乎）

希望有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:59:04.297

感谢您尝试帮助我，但在亚洲网站上找到了解决方案。

解决方案 ：

```
'' using 0:($2+50):3 with labels notitle 

#Explanation:
0=x-index 
($2+50)=y-index 
3=Value from data to be used as label.... 
```

您还可以像这样应用样式设置：

```
'' using 0:(\$2-10):2 with labels notitle "'font "1" rotate by -90' 
```

希望它能帮助其他有这个问题的人。

# c# - 使用 AutoResetEvent 同步两个线程

> ID：14481664
> 
> 赞同：10
> 
> 时间：2013-01-23T14:07:22.320
> 
> 标签：c#, multithreading, autoresetevent

我正在尝试实施`AutoResetEvent`. 为此，我使用了一个非常简单的类：

```
public class MyThreadTest
{
    static readonly AutoResetEvent thread1Step = new AutoResetEvent(false);
    static readonly AutoResetEvent thread2Step = new AutoResetEvent(false);

    void DisplayThread1()
    {
        while (true)
        {
            Console.WriteLine("Display Thread 1");

            Thread.Sleep(1000);
            thread1Step.Set();
            thread2Step.WaitOne();
        }
    }

    void DisplayThread2()
    {
        while (true)
        {
            Console.WriteLine("Display Thread 2");
            Thread.Sleep(1000);
            thread2Step.Set();
            thread1Step.WaitOne();
        }
    }

    void CreateThreads()
    {
        // construct two threads for our demonstration;
        Thread thread1 = new Thread(new ThreadStart(DisplayThread1));
        Thread thread2 = new Thread(new ThreadStart(DisplayThread2));

        // start them
        thread1.Start();
        thread2.Start();
    }

    public static void Main()
    {
        MyThreadTest StartMultiThreads = new MyThreadTest();
        StartMultiThreads.CreateThreads();
    }
} 
```

但这不起作用。用法似乎非常简单，所以如果有人能够告诉我哪里出了问题以及我在这里实现的逻辑问题出在哪里，我将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-23T14:27:14.787

这个问题不是很清楚，但我猜你希望它显示 1,2,1,2 ...

然后试试这个：

```
public class MyThreadTest
{
    static readonly AutoResetEvent thread1Step = new AutoResetEvent(false);
    static readonly AutoResetEvent thread2Step = new AutoResetEvent(true);

    void DisplayThread1()
    {
        while (true)
        {
            thread2Step.WaitOne(); 
            Console.WriteLine("Display Thread 1");
            Thread.Sleep(1000);
            thread1Step.Set();
        }
    }

    void DisplayThread2()
    {
        while (true)
        {
            thread1Step.WaitOne(); 
            Console.WriteLine("Display Thread 2");
            Thread.Sleep(1000);
            thread2Step.Set();
        }
    }

    void CreateThreads()
    {
        // construct two threads for our demonstration;
        Thread thread1 = new Thread(new ThreadStart(DisplayThread1));
        Thread thread2 = new Thread(new ThreadStart(DisplayThread2));

        // start them
        thread1.Start();
        thread2.Start();
    }

    public static void Main()
    {
        MyThreadTest StartMultiThreads = new MyThreadTest();
        StartMultiThreads.CreateThreads();
    }
} 
```

# ios - 核心数据 - 找出两个对象之间是否存在关系

> ID：14481665
> 
> 赞同：0
> 
> 时间：2013-01-23T14:07:21.990
> 
> 标签：ios, core-data, nspredicate, relationship, nsmanagedobject

我正在制作一个带有调查问卷的应用程序，并且我正在使用 Core Data 来保存它的所有数据。

共有三个实体：Person（接受调查问卷的人）、Question（问题）、QuestionResult（问题的结果）

Person 与 QuestionResult 相关联，而 QuestionResult 则通过关系链接到 Question。

给定一个 Person 和 Question 实体，我希望能够找到两者之间是否存在关联的 QuestionResult 对象。这可以使用 NSPredicate 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:55:20.117

设置：

```
Person <<------->> Question
Person <-------->> Answer
Question <------>> Answer 
```

解决方案：

```
NSSet *filtered = [person.answers filteredSetUsingPredicate:
   [NSPredicate predicateWithFormat:@"question == %@", questionObject]];
BOOL thereIsAnAnswer = filtered.count != 0; 
```

或者，如果您不需要向某人分配问题，除非有答案，您可以简化模型：

```
Person <---------->> Answer <<----------> Question; 
```

谓词将完全相同。

# traversal - 将 Gremlin 与 Java API 一起用于 OrientDB

> ID：14481666
> 
> 赞同：4
> 
> 时间：2013-01-23T14:07:27.090
> 
> 标签：traversal, gremlin, orientdb

我正在使用 Gremlin 遍历 OrientDB，但我不太了解这里的演示代码[OrientDB Gremlin Wiki](https://github.com/nuvolabase/orientdb/wiki/Gremlin)
这是我的代码，这段代码有什么问题？

```
 // create sample node and edge
        graph = new OrientGraph("local:C:/temp/graph/db");
        Vertex v1 = graph.addVertex(null);
        v1.setProperty("name", "A");
        Vertex v2 = graph.addVertex(null);
        v2.setProperty("name", "B");
        Vertex v3 = graph.addVertex(null);
        v3.setProperty("name", "C");
        graph.addEdge(null, v1, v2, "KNOWS");
        graph.addEdge(null, v1, v3, "KNOWS");

        OGremlinHelper.global().create();
        OCommandGremlin command = new OCommandGremlin("g.v('#8:0').out('KNOWS').aggregate(x).has('name',name)");
        Map<String, Object> params = new HashMap<String, Object>();
        List agg = new ArrayList();
        params.put("x", agg);
        params.put("name", "B");            
        Vertex vertex = graph.getRawGraph().command(command).execute(params);
        System.out.println(vertex);
        System.out.println(agg); 
```

我可以得到脚本的最终结果，但为什么我不能得到“聚合”结果？我怎么才能得到它？

我真的很陌生。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:55:02.133

[https://github.com/nuvolabase/orientdb/wiki/Gremlin](https://github.com/nuvolabase/orientdb/wiki/Gremlin)这里说输出只能用传递给ScriptEngine的参数来声明，输出必须是HashMap。希望 OrientDB 团队将在下一个版本中增强这一点。

# javascript - 使用 jQuery 按顺序添加和删除类

> ID：14481672
> 
> 赞同：2
> 
> 时间：2013-01-23T14:07:37.323
> 
> 标签：javascript, jquery

我想说的是，如果我的 div 没有活动的类，请添加它。如果它确实激活了该类，请将其删除。

我有以下内容，只有我的代码添加了类，然后继续查询并在最后删除它，最好的解决方案是什么，2个单独的点击功能？

```
$('.work-showcase').click(function(){
    if ( !$(this).hasClass('active') ){
        $(this).addClass('active');
    } else {
        $(this).removeClass('active');
    };
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:08:33.997

使用[`toggleClass`](http://api.jquery.com/toggleClass/)方法：

```
$(".work-showcase").click(function() {
    $(this).toggleClass("active");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:58:51.840

$("#YourID").removeClass('ClassName'); $("#YourID").addClass('ClassName');

# php - PHP：获取前半小时标记

> ID：14481676
> 
> 赞同：0
> 
> 时间：2013-01-23T14:07:58.163
> 
> 标签：php, date, hour

如何使用 PHP 日期/时间获取上一个/上一个半小时标记。

因此，从 15:31 一直到 16:29 的时间应该是 15:30，因为那是最后半小时。

我希望能够动态更改分钟。因此，如果我将分钟设置为 15，它将获得最后/上一个：15 分钟标记所以 15:16 到 16:14 将返回 15:15

这就是我所拥有的，但我无法让它工作......

```
function newtime($time, $offset) {
                                $prev = $time - $offset;
                                $newtime = ($offset > 900) ? ($prev - 1800) : ($prev);
                                return $newtime;
                            }

                            $hours = date("H", time());
                            $minutes = date("m", time());               
                            echo 'Current date: ' . date("Y-m-d H:i:s", time()) . '<br/>';
                            $time = strtotime("2013-01-23 15:35:00");
                            echo 'time: ' . date("Y-m-d H:i:s", $time) . '<br/>';
                            $offset = ($time % 1800);
                            echo 'prev: ' . $offset . '<br/>';
                            $newtime = newtime($time, $offset);
                            echo date("Y-m-d H:i:s", $newtime) . '<br/><br/>'; 
```

这真的很难，我就是无法绕过它。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:24:48.910

尝试这样的事情：

```
<?
function newtime($time,$minute=30){
    $time=strtotime($time);
    $m=date("i",$time)*1;
    $h=date("H",$time)*1;
    if($m<$minute){
        $h=$h-1;
    }
    return date("H:i",strtotime($h.":".$minute));
}

print newtime("15:31");
//OUTPUT: 15:30
print newtime("16:29");
//OUTPUT: 15:30

print newtime("15:16",15);
//OUTPUT: 15:15
print newtime("16:14",15);
//OUTPUT: 15:15
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:25:08.753

```
function newtime ($time, $offset)
{
    // First, calculate the offset in seconds:
    $offset_sec = $offset * 60;

    // Next, fetch unix timestamp from $time
    $unix_time = strtotime($time);

    // Then calculate the modulo
    $modulo = $unix_time % $offset_sec;

    // Calculate latest timestamp
    $last_time = $unix_time - $modulo;

    // Display latest timestamp
    return date('H:i',$last_time);
} 
```

# php - PHPQuery WebBrowser 插件 - 使用 cookie

> ID：14481677
> 
> 赞同：6
> 
> 时间：2013-01-23T14:07:59.880
> 
> 标签：php, browser, web-scraping, phpquery

我正在尝试使用 PHPQuery 的 WebBrowser 插件登录网站。我能够成功登录，但我不确定如何重用上一次调用中的 cookie 到下一次。

```
$client = phpQuery::browserGet('https://website.com/login', 'success1');

function success1($browser) {
  $handle = $browser
    ->WebBrowser('success2');
  $handle 
    ->find('input[name=name]')
      ->val('username');
  $handle 
    ->find('input[name=pass]')
      ->val('password')
      ->parents('form')
        ->submit();
}

function success2($browser) {
    print $browser; // prints page showing I'm logged in

    // make authenticated requests here
} 
```

如何使用会话/登录 cookie 发出其他请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T08:03:00.397

我查看了源代码来帮助您解决这个问题。我的第一印象是代码写得很糟糕。调试代码被注释掉，错别字到处都是，一英里长的函数等等。从长远来看，你真的可能想考虑切换到不同的解决方案，因为如果作者在这段代码中更改了一些东西，你最终可能会拥有自己的代码因升级而损坏。

话虽如此，WebBrowser 插件让您可以访问浏览器对象本身，其中包含一个名为 getLastResponse() 的函数。这将返回一个`Zend_Http_Response`对象，**理论上**您可以使用它来获取 cookie。

问题是您无法设置这些 cookie。您必须在第 102 行附近的某处修补 Web 浏览器插件，以将您自己的 HTTP 请求对象（用于 的参数 2 `phpQuery::ajax()`）与您的 cookie 集一起包含在此处：

```
$xhr = phpQuery::ajax(array(
    'type' => 'GET',
    'url' => $url,
    'dataType' => 'html',
)); 
```

或者，您也可以修补`phpQuery.php`第 691 行以包含一个全局 cookie jar，您可以将其定义为单例左右。（就在它说的地方`$client->setCookieJar();`）。

同样，这段代码写得非常糟糕，即使它缺少一些功能，使用[raw curl calls可能会更好。](http://php.net/curl)

# sql - SQL 插入... ( SELECT *, SCOPE_IDENTITY() FROM ... )

> ID：14481679
> 
> 赞同：3
> 
> 时间：2013-01-23T14:08:02.563
> 
> 标签：sql, sql-server, stored-procedures

我创建了一个应该在一个中执行 2 次插入的存储过程

第一步我想为每个插入创建一个新条目。

第二步，我将从这个条目中捕获创建的 Id

第三步我想从一个表中复制每个选择的多个条目，并将这些条目插入到同一个带有 Id 的表中

```
Create PROCEDURE dbo.Rolle_Copie
    @Id as int,
    @newId as int = 0,
    @Name AS nvarchar(50)
AS
    INSERT INTO Rollen (RolleName) 
    VALUES (@Name)

    @newId = SCOPE_IDENTITY()

    INSERT INTO Berechtigung_Rolle (RefRolleId,RefBerechtigungId)
        SELECT   
           RefBerechtigungId, @newId 
        FROM     
           Berechtigung_Rolle 
        WHERE    
           RefRolleId = @Id

    RETURN 
```

但我得到一个错误

> *@newId 旁边的语法错误*

有人可以告诉我有什么问题吗？

任何意见是极大的赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:08:46.060

不要忘记使用`SET`

```
SET @newId = SCOPE_IDENTITY() 
```

# javascript - javascript中的JSTL（获取jbean列表）

> ID：14481683
> 
> 赞同：0
> 
> 时间：2013-01-23T14:08:17.370
> 
> 标签：javascript, jsp, jstl

我正在开发一个缩短的 url 项目。我会使用 javascript 函数来显示饼图。我想知道是否可以将 Javabean（jst，jsp）列表传递给 javascript 函数（array，table..）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:49:07.090

实现此目的的一种有效方法是在服务器端创建[JSON](http://json.org/)结构并将其传递给客户端。我想您的图表数据将采用数组或表格格式。

有各种可用的 JSON 库，例如 Jackson。[参考杰克逊的例子。](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)

一旦您在服务器端构造了适当的 JSON 对象，您就可以通过在一行调用中分配值来在 JSP 上引用它。

```
<script type="text/javascript">
var jsonObj = '<c:out value="${jsonObject}"/>';
// you can refer to jsonObj in rest of the script 
// including external JavaScript file
</script> 
```

在上面的示例中，jsonObject 是在 Servlet 或控制器等的服务器端构造的。

# mysql - #1005 - 无法创建表错误号：150 Magento

> ID：14481684
> 
> 赞同：1
> 
> 时间：2013-01-23T14:08:18.663
> 
> 标签：mysql, sql, magento

我正在尝试为 magento 创建一个新表，并且我正在尝试引用现有的 magento 表。从我搜索的内容来看，我遇到的问题可能是 2 个问题之一。

1.  FK 必须有一个索引
2.  PK 必须存在，FK 才能引用

在这两种情况下，我相信我都做对了。下面是现有的表模式

# 已经存在的表被引用

```
CREATE TABLE IF NOT EXISTS `core_store` (
  `store_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `code` varchar(32) NOT NULL DEFAULT '',
  `website_id` smallint(5) unsigned DEFAULT '0',
  `group_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) NOT NULL,
  `sort_order` smallint(5) unsigned NOT NULL DEFAULT '0',
  `is_active` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`store_id`),
  UNIQUE KEY `code` (`code`),
  KEY `FK_STORE_WEBSITE` (`website_id`),
  KEY `is_active` (`is_active`,`sort_order`),
  KEY `FK_STORE_GROUP` (`group_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Stores' AUTO_INCREMENT=9 ;

CREATE TABLE IF NOT EXISTS `admin_user` (
  `user_id` mediumint(9) unsigned NOT NULL AUTO_INCREMENT,
  `firstname` varchar(32) NOT NULL DEFAULT '',
  `lastname` varchar(32) NOT NULL DEFAULT '',
  `email` varchar(128) NOT NULL DEFAULT '',
  `username` varchar(40) NOT NULL DEFAULT '',
  `password` varchar(100) NOT NULL DEFAULT '',
  `created` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `modified` datetime DEFAULT NULL,
  `logdate` datetime DEFAULT NULL,
  `lognum` smallint(5) unsigned NOT NULL DEFAULT '0',
  `reload_acl_flag` tinyint(1) NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `extra` text,
  `failures_num` smallint(6) NOT NULL DEFAULT '0',
  `first_failure` datetime DEFAULT NULL,
  `lock_expires` datetime DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `UNQ_ADMIN_USER_USERNAME` (`username`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Users' AUTO_INCREMENT=25 ; 
```

# 我正在尝试创建的表

```
CREATE TABLE `oro_dashboard` 
( `id` int unsigned NOT NULL, 
`name` varchar(255) NOT NULL default '', 
`description` varchar(64) NOT NULL default '', 
`created_by` int unsigned NOT NULL default '0', 
`created_at` date, 
`layout` varchar(255) NOT NULL default '', 
`default_store_id` int, 
PRIMARY KEY (`id`), 
KEY `IDX_ORO_DASHBOARD_CREATED_BY` (`created_by`), 
CONSTRAINT `FK_ORO_DASHBOARD_CREATED_BY_ADMIN_USER_USER_ID` FOREIGN KEY (`created_by`) REFERENCES `admin_user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, 
CONSTRAINT `FK_ORO_DASHBOARD_DEFAULT_STORE_ID_CORE_STORE_STORE_ID` FOREIGN KEY (`default_store_id`) REFERENCES `core_store` (`store_id`) ON DELETE SET NULL ON UPDATE CASCADE ) 
ENGINE=INNODB charset=utf8 COLLATE=utf8_unicode_ci 
```

在 magento 中，我发现确实有一个名为 admin_user 的表，其中有一个名为 user_id 的列。有一个 core_store 表确实有一个名为 store_id 的列。我的两个专栏都有索引。

有谁知道这个问题可能是什么？以下是我的错误信息

```
#1005 - Can't create table 'db.oro_dashboard' (errno: 150) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:20:45.570

定义外键时，数据类型必须相同。

您正在定义`core_store.store_id`为`smallint(5) unsigned`，因此引用列必须相同：`oro_dashboard.default_store_id`。

也做`oro_dashboard.created_by`

最后`oro_dashboard`的 CREATE TABLE 查询，

```
CREATE TABLE `oro_dashboard` 
( `id` int unsigned NOT NULL, 
`name` varchar(255) NOT NULL default '', 
`description` varchar(64) NOT NULL default '', 
`created_by` mediumint(9) unsigned NOT NULL default '0', 
`created_at` date, 
`layout` varchar(255) NOT NULL default '', 
`default_store_id` smallint(5) unsigned,
 PRIMARY KEY (`id`),
 KEY `IDX_ORO_DASHBOARD_CREATED_BY` (`created_by`) ,
 CONSTRAINT `FK_ORO_DASHBOARD_CREATED_BY_ADMIN_USER_USER_ID` 
     FOREIGN KEY (`created_by`) 
     REFERENCES `admin_user` (`user_id`) 
     ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `FK_ORO_DASHBOARD_DEFAULT_STORE_ID_CORE_STORE_STORE_ID` 
     FOREIGN KEY (`default_store_id`) 
     REFERENCES `core_store` (`store_id`) 
     ON DELETE SET NULL ON UPDATE CASCADE 
) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f9819)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:17:34.777

外键与其对应的父键的数据类型必须相同。数据类型与表中的外键及其引用父键不同，这就是它给出错误的原因。

`created by`是 int 无符号，而`userid`在父表中是中等 int

同样是第二个外键的问题

参考[http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T14:19:33.903

似乎列定义`default_store_id`不匹配`core_store.store_id`。它应该`smallint(5) unsigned`在你的桌子上。`created_by`有同样的问题，虽然它没有阻止创建表

# c - 冗余分配消除是相当典型的优化吗？

> ID：14481688
> 
> 赞同：0
> 
> 时间：2013-01-23T14:08:23.037
> 
> 标签：c, compiler-construction, compiler-optimization

鉴于以下情况：

```
len = strlen(str);
/* code that does not read from len */
len = new_len; 
```

我可以依靠编译器删除第一行吗？

我正在编写代码生成脚本。第一行在一个地方生成，而后面的所有内容都在其他地方生成（通过后代类中的虚函数）。大多数时候，不需要 len。但有时，确实如此。我想知道我是否可以在所有情况下都设置它，如果不需要，让编译器摆脱这条线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:10:25.653

不，您当然不能“依赖”编译器所做的优化选择。

它们可以根据用户的心血来潮（编译器命令行选项）或使用不同的编译器版本进行更改。

由于语言标准不需要您描述的行为，因此您不能依赖编译器来实现它。

另一方面，您当然可以对其进行测试，并尝试通过（再次）要求您的编译器进行尽可能多的优化来“哄骗”它进行优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:24:14.713

编译器非常聪明。但是依靠编译器删除“未使用”的函数调用可能不是一个好主意。一方面，编译器需要了解您正在调用的函数（所以 strlen 是一个很好的例子，因为大多数编译器都了解 strlen 的作用以及它如何影响其他事情） - 如果该函数不是编译器“理解的” "，那么它就无法优化它了。

如果你这样做了：

```
 x = printf("Hello, World!\n");

 x = printf("World, Hello!\n"); 
```

你认为他们的编译器通过删除第一个 printf 做了正确的事情吗？可能不会......因此，对于任何函数，编译器都无法确定“没有副作用”，编译器必须调用该函数，即使结果未被使用。无副作用意味着在正常情况下 - 例如，使用无效指针调用 strlen() 会产生副作用 - 你的代码可能会崩溃 - 但这不是“正常情况” - 你会很愚蠢地使用 strlen( ) 只是为了检查您的指针是否有效，对吗？

因此，换句话说，您可能希望在调用 strlen 之前确保确实需要调用 strlen() - 或者接受编译器可能会生成不必要的 strlen 调用的事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T17:54:49.523

现代编译器似乎在消除冗余分配方面做得非常出色。我通过 VS 2008 和 gcc 4.6 运行了以下代码段，实际上删除了对 strlen 的调用（而是内联代码）。两个编译器都设法看到了两者`something()`并且`something_else()`没有产生副作用。对这些的调用也被删除。

这发生在 VC 中的 /O1 和 gcc 中的 /O1 处。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int something(int len)  {
    if(len != len) {
        printf("%d\n", len);
    }
    return 0;
}

int something_else(int len) {
    return len * len;
}

int main(void) {
    char *s = malloc(1000);
    size_t len;
    strcpy(s, "Hello world");
    len = strlen(s);
    something(len);
    printf("%s\n", s);
    len += 8;
    something_else(len);
    len = 5;
    printf("%d\n", len);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:11:04.007

这取决于您指定的编译器和优化级别。

在这里，它最初是从函数调用中分配的。如果该功能有副作用怎么办？
所以你不能只假设编译器会为你优化它。

如果初始赋值语句没有任何副作用并且您指定的优化级别足够好（例如，在 gcc 的情况下为 -O3），它可能会为您优化它。

# python - “不等于”或“大于”更快？

> ID：14481691
> 
> 赞同：1
> 
> 时间：2013-01-23T14:08:32.470
> 
> 标签：python, python-3.x, python-2.7

我想知道以下哪一项对于元组（也对于列表或 int）执行得更快：

```
a_tuple = ('a', 'b',) 
```

1.  `if (len(a_tuple) != 0): pass`

2.  `if (len(a_tuple) > 0): pass`

我做了一些 timeit 实验，结果非常相似（每次运行 timeit 100000 次迭代时都会有所不同）。我只是想知道是否有时间优势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:12:06.340

使用`not a_tuple`( `True`if empty) 或`tuple`( `True`if not empty) 而不是测试长度：

```
if a_tuple:
    pass 
```

或者，作为一个示范胜于雄辩：

```
>>> if not ():
...     print('empty!')
...
empty!
>>> if (1, 0):
...     print('not empty!')
...
not empty! 
```

除了这是一个微优化之外，空元组的虚假性测试也更快。如果对速度有疑问，请使用该`timeit`模块：

```
>>> import timeit
>>> a_tuple = (1,0)
>>> def ft_bool():
...     if a_tuple:
...         pass
... 
>>> def ft_len_gt():
...     if len(a_tuple) > 0:
...         pass
... 
>>> def ft_len_ne():
...     if len(a_tuple) != 0:
...         pass
... 
>>> timeit.timeit('ft()', 'from __main__ import ft_bool as ft')
0.17232918739318848
>>> timeit.timeit('ft()', 'from __main__ import ft_len_gt as ft')
0.2506139278411865
>>> timeit.timeit('ft()', 'from __main__ import ft_len_ne as ft')
0.23904109001159668 
```

# winforms - C#checkedlistbox 通过代码和鼠标单击区分 ItemCheck

> ID：14481696
> 
> 赞同：1
> 
> 时间：2013-01-23T14:08:39.303
> 
> 标签：winforms, checkedlistbox

我正在使用 C# VS2008，WinForm 应用程序我的表单上有一个checkedlistbox 控件（win-form 应用程序） 在代码中，我使用SetItemChecked(index, false) 方法检查checkedlistbox 中的一些项目，并引发事件ItemCheck。我还允许用户检查该选中列表框中的项目，并且当用户选中或取消选中某个项目时，它还会引发事件 ItemCheck。如何在 ItemCheck 事件中找到此事件是如何发生的（通过代码或通过用户键盘/鼠标输入）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:32:35.467

我认为没有一种**简单的方法**可以使用代码来区分情况。
唯一想到的是通过使用全局表单变量：

```
public class Form1:Form
{
    bool _isCodeClick = false;

    .....

    // Somewhere in your code
    _isCodeClick = true;
    checkedListBox1.SetItemChecked(index, true);
    _isCodeClick = false;

    ..... 

    private void CheckedListBox1_ItemCheck(Object sender, ItemCheckEventArgs e) 
    {
        if(_isCodeClick == true)
        {
            // Do processing for click by code
        }
        else
        {
            // Do processing for click by user
        }
    }
} 
```

如果您选择此解决方案，请记住采取额外步骤来正确捕获可能绕过将全局变量重置为 false 状态的异常。

可能使用键盘和鼠标事件的高级操作，您可以找到一种合理的方法来确定导致 ItemCheck 事件的原因，但有时某些解决方案过于复杂且不值得。

编辑：回顾我的回答，我觉得有必要添加一些更改以减少此响应所暗示的维护问题。
设置布尔变量并调用 SetItemChecked 的代码应该封装在这样的单独函数中

```
private void SetItemCheckedFromCode(int index, bool toSet)
{
     try
     {
         _isCodeClick = true;
         checkedListBox1.SetItemChecked(index, true);
     }
     finally
     {
         _isCodeClick = false;
     }
} 
```

# android - android中聊天框的先决条件

> ID：14481698
> 
> 赞同：2
> 
> 时间：2013-01-23T14:08:46.340
> 
> 标签：android

我想做一个可以创建动态聊天框和群聊的应用程序。聊天框应该由创建聊天框的人删除，并且服务器上可以同时运行多个聊天框。

如果有人能指导我从哪里开始以及使用哪个平台，erlag 语言是我计划使用的组件之一。

# java - 为什么我的第二个 JButton 上没有输出？

> ID：14481701
> 
> 赞同：1
> 
> 时间：2013-01-23T14:08:53.733
> 
> 标签：java, swing, while-loop, jpanel, jbutton

所以我希望我的第二个 JButton 打印第一个的反面。1-10 和 10-1。但我无法弄清楚我的第二个按钮中缺少什么。另外，我如何设置按钮的值，以便您可以多次按下它们？

```
package testgui1;
    import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

    public class Testgui1 extends JFrame implements ActionListener //Alist visar vad
    //som görs när man utför ett klick
    {
        int i = 1;
        int two = 11;
        JLabel myLabel = new JLabel();//Ny panelen
        JPanel mypanel = new JPanel();
        JButton mybutton = new JButton("1-10");
        JButton mybutton2 = new JButton("10-1");
        Testgui1()
        {
            super("Meny");
            setSize(200,200);//Storlek på frame
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//stänger ner rutan vid X
            Container con = this.getContentPane();//ärver mainframe
            con.add(mypanel); 
            mybutton.addActionListener(this);
            mybutton2.addActionListener(this);
            mypanel.add(myLabel); 
            mypanel.add(mybutton);
            mypanel.add(mybutton2);
            setVisible(true);
        }
        public void actionPerformed(ActionEvent event)
        {  
           Object source = event.getSource();
            if (source == mybutton)
           {
            StringBuilder usual = new StringBuilder();
            while(i < 11) {
            usual.append(" ").append(i);
                i++;
    }
            JOptionPane.showMessageDialog(null, usual, "1-10", 
                 JOptionPane.PLAIN_MESSAGE);
                     setVisible(true);
         {
         if (source == mybutton2)
            {
        StringBuilder reverse = new StringBuilder(); 
            while (two > 0) {
            reverse.append("").append(two);
            two--;
    }
            JOptionPane.showMessageDialog(null,usual,"10-1",
                    JOptionPane.PLAIN_MESSAGE);
                    setVisible(true);
    }}}}
      public static void main(String[] args) {new Testgui1();}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:32:00.543

有两个问题：

1）对于`mybutton2`您使用的`usual`应该是`reverse`.

2）即使在那之后，后面的大括号：

```
 if (source == mybutton)
       { 
```

没有正确匹配，所以，`mybutton2`点击时没有显示任何内容。

更正的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Testgui1 extends JFrame implements ActionListener //Alist visar vad
//som görs när man utför ett klick
{
    int i = 1;
    int two = 11;
    JLabel myLabel = new JLabel();//Ny panelen
    JPanel mypanel = new JPanel();
    JButton mybutton = new JButton("1-10");
    JButton mybutton2 = new JButton("10-1");
    Testgui1()
    {
        super("Meny");
        setSize(200,200);//Storlek på frame
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//stänger ner rutan vid X
        Container con = this.getContentPane();//ärver mainframe
        con.add(mypanel);
        mybutton.addActionListener(this);
        mybutton2.addActionListener(this);
        mypanel.add(myLabel);
        mypanel.add(mybutton);
        mypanel.add(mybutton2);
        setVisible(true);
    }
    public void actionPerformed(ActionEvent event)
    {
       Object source = event.getSource();
        if (source == mybutton)
       {
        StringBuilder usual = new StringBuilder();
        while(i < 11) {
        usual.append(" ").append(i);
            i++;
                     }
        JOptionPane.showMessageDialog(null, usual, "1-10",
             JOptionPane.PLAIN_MESSAGE);
                 setVisible(true);}
     {
     if (source == mybutton2)
        {
    StringBuilder reverse = new StringBuilder();
        while (two > 0) {
        reverse.append(" ").append(two);
        two--;
}
        JOptionPane.showMessageDialog(null,reverse,"10-1",
                JOptionPane.PLAIN_MESSAGE);
                setVisible(true);
}}}
  public static void main(String[] args) {new Testgui1();}
} 
```

**更新：**根据要求改进给定的代码块：

只需在每次单击按钮后创建变量`i`并初始化：`two`

```
 if (source == mybutton)
       {
        StringBuilder usual = new StringBuilder();
        while(i < 11) {
        usual.append(" ").append(i);
            i++;
                     }
        JOptionPane.showMessageDialog(null, usual, "1-10",
             JOptionPane.PLAIN_MESSAGE);
                 setVisible(true);
        i=1;//////////////////MAKE i=1 EVERYTIME////////////////
        }
     {
     if (source == mybutton2)
        {
    StringBuilder reverse = new StringBuilder();
        while (two > 0) {
        reverse.append(" ").append(two);
        two--;
   }
        JOptionPane.showMessageDialog(null,reverse,"10-1",
                JOptionPane.PLAIN_MESSAGE);
                setVisible(true);two=11;/////////////////MAKE two=11 EVERYTIME////
   }

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:21:03.297

这是因为您使用了两个不同的 StringBuilder，但在这两种情况下您只显示`usual`.

```
JOptionPane.showMessageDialog(null,usual, ... 
```

在第二次调用中，使用`reverse`.

# android - 通知或通知声音的广播接收器

> ID：14481703
> 
> 赞同：2
> 
> 时间：2013-01-23T14:08:58.070
> 
> 标签：android, notifications, broadcastreceiver, audio

我想知道它是否有如何捕捉事件，例如：我有一个服务，这个有一个监听器（捕捉通知或捕捉声音通知），我需要拦截默认声音并在运行时将其更改为另一个。我为这个广播接收器搜索了很多次，但我找不到它。如果有人可以帮助我，我很感激。谢谢！

# java-me - 使用带有 BorderLayout.CENTRE 定位的 Dialog.showPacked() 时出现奇怪的 LWUIT 对话框行为

> ID：14481706
> 
> 赞同：5
> 
> 时间：2013-01-23T14:09:07.183
> 
> 标签：java-me, lwuit, lwuit-dialog

我正在为系列 40 使用 LWUIT 来制作我的 J2ME 应用程序，我注意到在使用 showPacked() 方法时 LWUIT-Dialog 的一个奇怪行为，该对话框使用 BorderLayout.CENTER 定位。

这尤其发生在触摸电话中。

我附上了一张图片来描述我的情况。

![图片链接](../Images/acdf784b2f59352bb35f9d0cc969a621.png)

最初对话框出现在图像的第一部分中。但是，它会在接下来的几秒钟内扩展，变得像图像的第二部分中所示的那样。

未来使用 showPacked 显示对话框的调用看起来像第三个。我不知道为什么会发生这种情况。我希望我的对话框一直看起来像图像前半部分中显示的那样。我哪里出错了?

注意：对话框的内容是一个动画标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:51:53.413

我不知道这些人在那里做了什么，但我猜他们重排 UI 太激进了。尝试设置`Dialog.setAutoAdjustDialogSize(false)`，看看它是否能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:02:00.007

您可以删除标题和背景等。使用下面的代码，它只会让您的动画 GIF 显示带有暗色对话框背景：

```
setTitle(" ");
setUIID("Null");
setDialogUIID("Null");
getStyle().setBgTransparency(0);
getSelectedStyle().setBgTransparency(0);
getUnselectedStyle().setBgTransparency(0);
getPressedStyle().setBgTransparency(0);
getDialogStyle().setBgTransparency(0); 
```

# php - PHP Parse 错误：语法错误，第 26 行 C:\Domains\xyz.com\wwwroot\123\index.php 中的意外 T_OBJECT_OPERATOR

> ID：14481707
> 
> 赞同：0
> 
> 时间：2013-01-23T14:09:10.657
> 
> 标签：php

我是 PHP 和 MySQL 的新手。当我在本地主机上运行我的文件时，一切都运行得非常完美！但是当我将所有文件上传到实时真实域时，我得到了这个：

> PHP Parse 错误：语法错误，第 26 行 C:\Domains\xyz.com\wwwroot\123\index.php 中的意外 T_OBJECT_OPERATOR

这是 index.php 中的第 26 行：

```
GetApplication()->GetUserAuthorizationStrategy()->ApplyIdentityToConnectionOptions($result); 
```

我的网络托管服务提供商有 PHP 和 MySQL。

非常感谢任何帮助。

就是这个：

```
function GetConnectionOptions()
{
    $result = GetGlobalConnectionOptions();
    $result['client_encoding'] = 'utf8';
    GetApplication()->GetUserAuthorizationStrategy()->ApplyIdentityToConnectionOptions($result);
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:49:36.430

这是在 PHP 5 中引入的。您要部署到的任何地方都需要更新，因为它运行的是 PHP 4。

测试用例：

```
<?php
class TestingClass
{
    function test()
    {
        return $this;
    }
}
function test()
{
    return new TestingClass();
}

test()->test(); 
```

PHP Lint v5.0.0：

```
C:\PHP500>php -l E:\testcase.php
No syntax errors detected in E:\testcase.php
C:\PHP500>php -v
PHP 5.0.0 (cgi-fcgi) (built: Jul 13 2004 21:39:41) 
```

PHP Lint v4.4.9：

```
C:\PHP449>php -l E:\testcase.php
<br />
<b>Parse error</b>:  syntax error, unexpected T_OBJECT_OPERATOR in <b>E:\testcase.php</b> on line <b>16</b><br />
Errors parsing E:\testcase.php
C:\PHP449>php -v
PHP 4.4.9 (cgi-fcgi) (built: Aug  7 2008 15:04:24) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:18:51.483

- 和 > 之间有一个空格

```
GetApplication()->GetUserAuthorizationStrategy()- >ApplyIdentityToConnectionOptions($result); 
```

这意味着“减去大于”。删除空间。

第二次尝试：`GetApplication`真的是一个函数吗？

# java - mac os x 上的 eclipse JNI_CreateJavaVM 错误

> ID：14481709
> 
> 赞同：4
> 
> 时间：2013-01-23T14:09:17.993
> 
> 标签：java, eclipse, macos

我正在使用 mac os x 10.8.2。我已经安装了 java 1.7 然后收回，因为我无法通过 xcode 发送 iphone 应用程序。现在安装了java 1.6。

ysnky@ ~$ java -version java version "1.6.0_37" Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909) Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434) , 混合模式) ysnky@ ~$

但现在我无法运行 Eclipse。它没有打开，它发出此警报并关闭。

JVM 共享库“/System/Library/Frameworks/JavaVM.framework”不包含 JNI_CreateJavaVM 符号。

我真的很困惑，找不到解决方案。我只想运行eclipse，仅此而已:(谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-08T22:17:49.947

> 您可以从苹果网站下载和安装。它非常适合我

[http://support.apple.com/kb/DL1572?viewlocale=en_US](http://support.apple.com/kb/DL1572?viewlocale=en_US)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T03:59:34.897

更新您的 Mac。Apple 提供了新的 Java 更新来解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T13:52:30.410

如果您没有该文件，请`/System/Library/Frameworks/JavaVM.framework/Versions/Current`执行以下命令

`cd /System/Library/Frameworks/JavaVM.framework/Versions sudo ln -s /System/Library/Frameworks/JavaVM.framework/Versions/A Current`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-08T04:25:11.643

我能够通过首先删除任何以前安装的 Oracle Java jdk 版本来解决这个问题。说明在这里：

[http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html#uninstall](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html#uninstall)

然后安装苹果官方的Java JDK。出于某种原因[，support.apple.com 上的 Java 下载页面对](http://support.apple.com/kb/DL1572)我来说是空白的，但是通过 Google 的页面缓存副本，我找到了下载的直接链接，这最终为我解决了这个问题：

[http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg](http://support.apple.com/downloads/DL1572/en_US/JavaForOSX2014-001.dmg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T06:57:58.247

您可以从苹果网站下载和安装。它在 mac 10.9.5 上非常适合我

[http://support.apple.com/kb/DL1572?viewlocale=en_US](http://support.apple.com/kb/DL1572?viewlocale=en_US)

# android - Gson - 在每个转换的对象中存储源 JSON

> ID：14481710
> 
> 赞同：2
> 
> 时间：2013-01-23T14:09:20.127
> 
> 标签：android, json, gson

假设我有这样的 JSON：

```
{
  a: 1,
  b: 2
} 
```

和 POJO 是这样的：

```
class MyClass extends Base{
  int a;
}

class Base 
{
  JsonElement originalElement; // or String originalJson;
} 
```

我想将原始 JSON 保存到扩展“Base”的每个类中，因此转换后我可以获得原始源，即使我的 Java 类没有所有 JSON 字段。我知道我每次都可以使用'setJson'，但我想知道是否有可能自动使用 JsonDeserializer 或任何其他库的元素。

编辑：我想避免这样的代码

```
MyClass object= gson.fromJson(json, MyClass.class);
object.setJson(json);
// if class has nested classes which extends Base: 
object.getNestedObject().setJson(json.get("nested")); 
```

# php - php 3 数组循环从第一个数组发送单个电子邮件

> ID：14481712
> 
> 赞同：0
> 
> 时间：2013-01-23T14:09:21.987
> 
> 标签：php, arrays, email, loops

我有三个数组。它们都是基于索引的数组 [0]、[1]... 它们是：

```
$array_userinfo[login][email]
$array_userallmeetingfoldersco[login,folder-id]
$array_expiredmeetingscos[sco-id,folder-id,name,date-modified,date-end 
```

$array_userinfo 的第一个元素（登录名）匹配 $array_userallmeetingfoldersco 的第一个元素（登录名）。反过来， $array_expiredmeetingssco 的第二个元素（文件夹 ID）。

我需要实现的是，如果在 $array_userallmeetingfoldersco 的“登录”中找到了 IF array_userinfo 的“登录”，然后在 $array_userallmeetingfoldersco 和 $array_expiredmeetingscos 之间找到任何匹配的“文件夹 ID”，如果找到，只向“电子邮件”地址发送一次电子邮件$array_userinfo; 理想情况下，电子邮件包含来自 $array_expiredmeetingscos 数组的“名称”、“修改日期”、“日期结束”字段。

**更新：添加了循环代码**

```
foreach($array_userinfo as $userInfo) {//user logins; make this into easy to search
 $checkAgainstLogins[$userInfo[0]] = $userInfo[1];//0 is login, 1 is email
}

foreach($array_expiredmeetingscos as $expiredMeetings) {//expired meetings. make this into easy to search
$checkAgainstExpiredMeetings[$expiredMeetings[1]] = $expiredMeetings[2];//1 is folder-id, 2 is name
}

//loops for email follow
foreach($array_userallmeetingfoldersco as $matchingLogins) {
  if(isset($checkAgainstLogins[$matchingLogins])) {//login matched. Now find matching 'folder-id'
   foreach($array_expiredmeetingscos as $matchingFolderID) {
     if(isset($checkAgainstExpiredMeetings[$matchingFolderID])) {//folder-id matched
     //add to some array of expired Meetings? then email?
     }
   }
} 
```

}

所以在循环中循环，但复杂的因素是只发送一次电子邮件。有什么代码可以分享吗？谢谢！

# responsive-design - Opera Mini 中的桌面网页版和移动网页版

> ID：14481717
> 
> 赞同：2
> 
> 时间：2013-01-23T14:09:40.567
> 
> 标签：responsive-design, mobile-website, wap, opera-mini

所以我有一个网站，我的意思是制作它的 2 个版本，桌面版（具有完整功能）和移动版（桌面版的简化）。我在 CSS 中使用媒体查询来调整样式。它在本机浏览器中运行良好。当我使用本机浏览器打开我的网站时，它将显示移动版本样式。但不知何故，当我使用 Opera Mini 打开我的网站时，它一直显示桌面版本。

我用谷歌搜索并没有找到任何线索。知道它是如何发生的吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:04:58.063

我终于发现了它的问题所在。原来我只是愚蠢地使用`@media screen`它，而 Opera Mini 似乎并不能很好地处理它。我已经用谷歌搜索了几个小时。有人说实际上 Opera Mini 支持`@media screen`，但其他人说 Opera Mini 正确的媒体属性是`@media handheld.`好吧，我尝试通过简单地将其更改为`@media all`. 它有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T17:34:30.243

Opera Mini 显示该站点的桌面版本的原因有很多。最有可能的是您的网站没有正确地将 Opera Mini 检测为移动网站，并且没有返回正确的内容。如果您使用的某些插件或其他软件会自动为您处理桌面与移动设备的路由，那可能是罪魁祸首。此外，由于 Opera Mini 的工作方式，这可能是设计使然。

[Opera Mini](http://en.wikipedia.org/wiki/Opera_Mini)通过 Opera 自己的代理服务器运行 Web 内容，并在将内容交付给用户之前尝试“优化”内容。也就是说，内容首先在代理服务器上呈现，然后传送到设备。这当然会给那些试图为用户提供一致的移动网络体验的人带来各种复杂的情况。幸运的是，Opera 提供了一个[开发指南](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/)，帮助您更好地了解正在发生的事情以及如何应对它。

以我的经验，Opera Mini 是一款很难使用的浏览器。在 Wikimedia Foundation，当我们检测到有人在使用 Opera Mini 时，我们会提供非常有限的 Wikipedia（和兄弟项目）体验。

您绝对应该通读[opera mini 开发指南](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#media-queries)，并确保您所做的任何设备检测都正确地将opera mini 识别为移动浏览器。如果您只是使用媒体查询，您可能需要重新考虑一种更强大的移动检测方法，或者相应地调整您的设计以适用于 opera mini。祝你好运！

# smtp - SMTP 和多个接收者与单个接收者

> ID：14481724
> 
> 赞同：0
> 
> 时间：2013-01-23T14:09:53.423
> 
> 标签：smtp, message

SMTP 在向每个人发送一条消息与向每个用户发送一条消息时使用的命令是什么。即，您一次向联系人列表中的每个人发送一条消息，而不是同时向您的联系人列表中的每个人发送相同的消息。我对 SMTP 的工作原理有点困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:38:54.537

无论您是一次向五十人发送一条消息，还是一次向五十人发送一条消息，命令都是相同的。唯一的区别是您是与 SMTP 服务器通话一次，向 50 个收件人发送一封邮件，还是您与 SMTP 服务器通话 50 次，每次都向一个收件人发送一封邮件。如果您向五十个收件人发送一次消息，您将在单个消息的传输期间发送“RCPT TO：”命令五十次，如果您要发送五十个消息，那么对于这五十个消息中的每一个，你只会说一次“RCPT TO：”。（你也会说“HELO”（或 EHLO）五十次，说“MAIL FROM：”五十次，说“DATA”五十次，

# c# - 接受 DataGridView 中的新行而不手动更改其值

> ID：14481725
> 
> 赞同：0
> 
> 时间：2013-01-23T14:09:54.747
> 
> 标签：c#, datagridview

我有一个. 要插入我处理的新行。*`databound`* `DataGridView``DefaultValuesNeeded`

新行与我分配的值一起显示。到这里它工作正常。

此时该行尚未附加到底层证券`DataTable`。*没关系*。

接受新行的唯一方法是将任何单元格设置为编辑模式，更改
值并关闭编辑器。
现在新行被添加到`DataTable`.

我的问题是我想以最少的用户输入添加行。
如果用户认为这些值没问题，他/她应该能够在
不更改某些单元格值的情况下进行确认（并将它们设置回原始值）

有没有办法实现这一点，例如通过按*enter*，捕获命令并强制
执行`DataGridView`与单元格值更改相同的操作？

我已经尝试过更改值`dgv_KeyDown()`但没有成功。
有什么建议么？

```
private void dgv_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        if (dgv.CurrentCell != null && dgv.CurrentCell.OwningRow.DataBoundItem == null)
        {
            //ToDo: Accept the new row

            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:03:51.167

我找到了解决方案。
我必须将单元格状态设置为脏并进入编辑模式。否则在选择另一行时内部状态将被破坏

```
private void dgv_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        if (dgv.CurrentCell != null && dgv.CurrentCell.OwningRow.DataBoundItem == null)
        {
            dgv.NotifyCurrentCellDirty(true);
            dgv.BeginEdit(true);
            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:31:57.000

我的建议是，您可以使用[CellValidating](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating%28v=vs.80%29.aspx) Event和[RowValidating Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)来完成此任务。

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dataGridView1.IsCurrentCellDirty) //or IsCurrentRowDirty
        {
            if (e.ColumnIndex == 1)
            {
                if (MessageBox.Show("You're about to change the value. Do you want to continue?\n\nPress ESC to cancel change.",
                                    "Confirmation", MessageBoxButtons.OK, MessageBoxIcon.Information) != System.Windows.Forms.DialogResult.OK)
                {
                    e.Cancel = true;
                }
            }
        }
    } 
```

# java - 如何检查ArrayList > 包含某个ArrayList

> ID：14481726
> 
> 赞同：2
> 
> 时间：2013-01-23T14:09:58.583
> 
> 标签：java, arraylist, equals

标题很好地说明了我遇到的麻烦，这是我的代码：

```
// fields required for traversal
private Queue<ArrayList<String>> q;
private ArrayList<ArrayList<String>> r;

Set<String> stringList = getMeStrings();
for(String s : stringList)
{
    ArrayList<String> stringsRoute = new ArrayList<String>();
    stringsRoute.add(getSomeString());
    stringsRoute.add(s);
    if(!r.contains(stringList))
    {
        if(!q.contains(stringList))
        {
            q.add(stringList);                          
        }
        r.add(stringList);
    }
} 
```

我的 For 循环中的 If 语句总是失败，我认为原因是因为我正在创建一个新的 ArrayList 对象（不同的引用），而我的 If 语句没有检查 [ r ] 中每个 ArrayLists 的内容以相同的顺序包含相同的元素..等

我知道需要使用 .equals 来确定两个 ArrayList 是否相似，但我有一个包含许多其他 ArrayList 的 ArrayList。

如何检查父 ArrayList 是否包含等同于我正在创建的新 ArrayList 的 ArrayList？

我希望很清楚我想要达到的目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:15:22.273

您需要遍历整体`ArrayList`，然后将每个元素`ArrayList`与ArrayList 类的`StringsRoute`using方法进行比较。`equals`要实现 foreach 循环，您可以考虑获取`ArrayList`. 如果我们有`ArrayList ar=new ArrayList();`，我们可以用户`ar.size()`返回大小，然后简单地运行一个 for 循环`ar.size()`时间来迭代对应的每个元素`ArrayList`。希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T14:38:46.943

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29)

对于要包含在 "r" 中的 "StringsRoute" ， "r" 中必须有一个具有相同元素且顺序相同的列表。

```
Arrays.asList("1","2") .equals(Arrays.asList("2","1")) == false

Arrays.asList("1","2") .equals(Arrays.asList("1","2")) == true

Arrays.asList(Arrays.asList("1","2")).contains(Arrays.asList("1","2")) == true

Arrays.asList(Arrays.asList("1","2")).contains(Arrays.asList("2","1")) == false 
```

可能是您想使用集合列表来避免与顺序斗争。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractSet.html#equals%28java.lang.Object%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractSet.html#equals%28java.lang.Object%29)

```
List< Set< String > > r; 
```

自从：

```
new HashSet(Arrays.asList("1","2")).equals(new HashSet(Arrays.asList("2","1"))) == true 
```

# javascript - 如何验证电子邮件到标题？

> ID：14481727
> 
> 赞同：0
> 
> 时间：2013-01-23T14:09:59.507
> 
> 标签：javascript, email-validation

我需要验证用户输入。用户可以为电子邮件输入完整的标题，因此它可能如下所示：

```
user@example.com
<user@example.com>
User <user@example.com>
"User" <user@example.com>
user@example.com, User2 <user2@example.com> 
```

..ETC。以上所有内容都是有效的 To 字段。

但是，当用户输入是这样的：

```
user@example.com, not_an_email, User <user.example.com> 
```

然后我想回复最后两封电子邮件的错误。

检查一个普通的电子邮件地址的有效性对我来说不是问题，但是额外的字符串和大括号 <> 我现在有点一无所知。

# javascript - JavaScript 类变量赋值 - 出了什么问题？

> ID：14481730
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:04.763
> 
> 标签：javascript, oop, class

这个作业有什么问题？

```
base = {};
base.util = {
   varA : 3,
   varB : this.varA,
   show : function(){
      console.log(this.varB);
   }
}; 
```

我得到 this.varB 是未定义的。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:12:58.020

当使用简写创建对象时，`this`is 在全局范围内，因此指的是`window`. 尝试在创建对象后检查是否定义`window.varA`或刚刚定义。`varA`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:28:13.677

当你声明字面量时，`this`只有在方法中的值才会是你的对象。否则，它的值将取决于声明文字的上下文。

为了完成你想要的，你必须这样编码：

```
base = {};
base.util = {
   varA : 3,
   show : function(){
      // here, this refers to base.util
      console.log(this.varB);
   }
};
base.util.varB = base.util.varA;
base.util.show(); 
```

# windows - 我如何在 Windows 8 商店应用程序中使用backbonejs？

> ID：14481734
> 
> 赞同：1
> 
> 时间：2013-01-23T14:10:13.850
> 
> 标签：windows, backbone.js, microsoft-metro

我想用`Backbone.js`在`Windows 8 JavaScript Store App`有可能吗？如果可能的话，请告诉我如何使用？我该如何管理`restful API`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:04:47.940

不错的文章在这里 - [http://jrtipton.tumblr.com/post/28131822076/using-backbone-js-with-win8-metro-winjs](http://jrtipton.tumblr.com/post/28131822076/using-backbone-js-with-win8-metro-winjs)。

# sql - 在 PostgreSQL 中查找最大/最小对

> ID：14481736
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:19.490
> 
> 标签：sql, postgresql

我在 Postgres 数据库的表中有两列 x,y 坐标。

我可以使用以下方法找到 x 和 y 的极值：

```
select min(x), max(x), min(y), max(y)
from coords 
```

如何将这些分配给这样的变量：

```
select min(x) as xmin, max(x) as xmax, min(y) as ymin, max(y) as ymax
from coords 
```

达到

```
select y
from coords
where x = xmin 
```

等等...获取5亿行数据集中的四个极值点？（练习的重点）

所需的选择语句有效，但我不能使用“where”子句，因为它说 xmin 不是列。什么是正确的方法，或者万一我使用了正确的方法，正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:12:43.753

一种方法是使用连接和子查询：

```
select c.*
from coords c join
     (select min(x) as xmin, max(x) as xmax, min(y) as ymin, max(y) as ymax
      from coords
     ) clim
     on c.x in (clim.xmin, clim.xmax) or c.y in (clim.ymin, clim.ymax) 
```

另一种方法是使用窗口函数：

```
select c.*
from (select c.*,
             least(row_number() over (order by x),
                   row_number() over (order by x desc),
                   row_number() over (order by y),
                   row_number() over (order by y desc)
                  ) as seqnum
      from coords c
     ) c
where seqnum = 1 
```

另一种方式，如果你真的只想要 4 分是：

```
select * from coords order by x limit 1 union all
select * from coords order by x desc limit 1 union all
select * from coords order by y limit 1 union all
select * from coords order by y desc limit 1 
```

对于如此多的行，如果您在 x 和 y 上有索引，这些都会运行得更快。在这种情况下，最后一个可能是最快的。

# javascript - 是什么导致原型变量在使用“for in”时出现？

> ID：14481737
> 
> 赞同：1
> 
> 时间：2013-01-23T14:10:23.263
> 
> 标签：javascript

我知道你[应该避免它](https://rads.stackoverflow.com/amzn/click/com/0596517742)，因此虽然很烦人，但我总是保护自己免受它的侵害。

但是当使用“for in”时，究竟是什么导致原型的扩展出现呢？有时使用“for in”是（或似乎是）安全的，有时则不是。

# IE：

我在谈论例如：

```
Array.prototype.last = function(){ return this[this.length-1]; } 
```

显示为：

```
for(var k in someArray){
    console.log("%o %o", k, someArray[k]); // eventually outputs "last 'function(){ return this[this.length-1]; }'
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:12:24.737

此行为是设计使然。

`for in`循环所有可枚举的属性，包括那些从原型继承的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:18:17.980

正如 SLaks 所说，这是设计使然。决定一个属性（继承与否）是否会在`for..in`循环中显示的是它的 [[Enumerable]] 内部属性。如果为真，则该属性将显示，否则不会。

每个属性都有这样的属性（以及其他一些属性）。可以使用[`Object.getOwnPropertyDescriptor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor). 例如，考虑您的`Array.prototype.last`方法：

```
var descriptor = Object.getOwnPropertyDescriptor(Array.prototype, "last"); 
```

它将返回一个像这样的对象：

```
{
configurable: true,
enumerable: true,
value: function (){ return this[this.length-1]; },
writable: true
} 
```

您可以更改 [[Enumerable]] 的值[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)以将其从`for..in`循环中隐藏：

```
descriptor.enumerable = false;
Object.defineProperty(Array.prototype, "last", descriptor); 
```

# java - 发送winmail格式到Outlook并触发Confirmitaion（email和ics不要分开）

> ID：14481740
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:31.230
> 
> 标签：java, outlook, icalendar

我想知道是什么让 Outlook 以下列方式响应从另一个 Outlook 发送的邀请：

![约会从 Outlook 发送](../Images/3475e05796f1ef286ae519f50c102a9a.png)

如果从屏幕截图中看不清楚，在这种情况下，Outlook 会要求我确认我的出席。

我有一个发送 ICAL 文件的程序。ICAL 文件作为附件正确发送。该文件如下所示：

我有一个发送 ICAL 文件的程序。ICAL 文件作为附件正确发送。

```
BEGIN:VCALENDAR
PRODID:TODO
VERSION:2.0
METHOD:PUBLISH
BEGIN:VEVENT
CLASS:PUBLIC
DESCRIPTION:Parameter: Value\nAuftrags-Nr.: \nVorschrift: 12\nZyklus: 12\nKommentar_1: \nKommentar_2: \nKommentar_3: 12\nPr?fstand: TODO\nV-Nr.: \nSMKL: 2\nDatum-Startzeit: TODO\nModel-Typschluessel: TODO\nCoastDowm: TODO\nBerechnen:
+TODO\nKommentar_4: TODO\nKommentar_5: TODO\nSchaltpunkttabelle: TODO\nAdd Test: TODO\nAdd Messtechnik: TODO\nKonfiguration MT: TODO\nAnwesenheit SB: TODO\n
ATTENDEE;CN=Pr?fstand; RSVP=TRUE:oz@domain.com
DTSTART:20130123T131951Z
DTEND:20130123T151951Z
DTSTAMP:20130123T131956Z
LOCATION:12
ORGANIZER;CN=wurst:MAILTO:wurst@wurstkeuche.de
PRIORITY:5
SEQUENCE:0
SUMMARY;LANGUAGE=de:Abgastest
TRANSP:OPAQUE
UID:ac4fc017-0944-4f9f-bfd1-3ffc07b486a9
X-MICROSOFT-CDO-BUSYSTATUS:FREE
X-MICROSOFT-CDO-IMPORTANCE:1
X-MICROSOFT-DISALLOW-COUNTER:TRUE
X-MS-OLK-ALLOWEXTERNCHECK:TRUE
X-MS-OLK-AUTOFILLLOCATION:FALSE
X-MS-OLK-CONFTYPE:0
BEGIN:VALARM
TRIGGER:-PT15
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR 
```

在 Outlook 中收到时，它被视为附件：

![预约](../Images/403b30032420ec00c6ced4796d083420.png)

我查看了电子邮件属性并设法找到以下差异： Outlooks 在一些二进制文件中发送约会：

```
Content-Type: application/ms-tnef; name="winmail.dat" 
Content-Transfer-Encoding: binary 
```

我的程序发送：

```
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable 
```

当我将“正确”的约会电子邮件（类型为“winmail.dat”）从 Outlook 转发给自己并用 mutt 打开时，我看到以下内容，该电子邮件由几部分组成：

```
 I     1 <no description>              [multipa/alternativ, 7bit, 8.1K]
  I     2 ├─><no description>           [text/plain, base64, utf-8, 1.4K]
  I     3 ├─><no description>           [text/html, base64, utf-8, 2.8K]
  I     4 └─><no description>           [text/calendar, base64, utf-8, 3.3K] 
```

如果我将相同的邮件转发给 mutt，然后再转发回 Outlook，它看起来像这样：

![backFromMutt](../Images/987607c808b7a87bdf05da677bf3211b.png)

邮件内容为：

```
Content-Type: multipart/mixed; boundary="bKyqfOwhbdpXa4YI"
Content-Disposition: inline 
```

因此，我怀疑我想要实现的行为是在 ICS 文件中进行控制，`winmail.dat`而不是使用 ICS 文件中的参数。

我还必须补充一点，我的代码是用 JAVA 编写的，在阅读[winmail.dat](http://en.wikipedia.org/wiki/Transport_Neutral_Encapsulation_Format)时我发现了一个[JAVA 库，它可以创建`winmail.dat`](http://www.freeutils.net/source/jtnef/). 但我不知道二进制格式中的什么属性会触发这种行为。

我的第一个问题是：

*   我可以只使用文本邮件来模拟这种行为吗？

第二个问题是：

*   如果您不能用纯文本模拟这种行为（可能不是），有人知道以二进制格式设置的正确属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:15:32.163

如果您将邀请作为内容类型为“文本/日历；方法=请求”的 MIME 消息发送，Outlook 将非常高兴。
没有理由使用 winmail.dat。

# google-maps - 如何使用 google/bing/etc 在 long/lat 中使用 bbox……使用 mapserver‏

> ID：14481745
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:41.283
> 
> 标签：google-maps, openlayers, postgis, mapserver, epsg

OpenLayers.Control.GetFeature 的 bbox 在基础层为 900913 时在 utm 中工作，即。google / bing / etc）和long / lat，当baselayer为4326（即我的postgis层由mapserver提供服务）时，无论它们覆盖什么。这就是 openlayers 所说的。

那么，例如，当我在谷歌上使用我的一层时，如何强制 bbox 处于长/纬度？我确实希望 bbox 处于 long/lat 而不是 900913 （即使用基础层投影）。我已经阅读了很多关于此的网站，但是对于 geoserver，一些关于 mapserver 的帖子说 EPSG:900913 和 EPSG:4326 都必须在 METADATA 中设置，我更改了它并分配了“srs”和“projection”（使用适当的表达式）在我的层（和协议）中，但在 bbox 中根本没有效果。我还能尝试什么？

任何想法将不胜感激，在此先感谢，

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:23:40.953

要解决这个问题，必须使用带有 OpenLayers.Control.GetFeature 的原型，然后使用带有 epsg4326 和 epsg900913 的 .transform，有关此处的更多信息：[OpenLayers.Class with OpenLayers.Control.GetFeature](https://stackoverflow.com/questions/14609174/openlayers-class-with-openlayers-control-getfeature)

# java - 为什么Java JDK文件夹中有java.exe？

> ID：14481746
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:41.580
> 
> 标签：java

`java.exe`用于运行类文件。据我了解，它不用于编译 Java 代码。`java.exe`那么在我的系统上这个位置有什么用处：`C:\Program Files\Java\jdk1.6.0\bin\java.exe`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:13:55.957

就像你说的，它是运行编译后的 Java 代码。它就在那里，以便您可以轻松地将其包含在 CLASS-PATH 变量中（在 Windows 中，它将帮助您从命令行运行 java）。

```
java myNewProg 
```

JDK 包含了 JRE——即，如果您获得了 JDK，您还将获得所有 JRE 的东西。但如果你只下载 JRE，你将不会拥有一切

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:19:20.820

*   `C:\Program Files\Java\jdk1.6.0\jre`是运行环境的位置；您可以使用它与您的应用程序一起重新分发，因此包含`java`能够运行它；
*   `C:\Program Files\Java\jdk1.6.0`是开发环境的位置。它在其`bin`文件夹中包含`javac`（用于编译您的代码）和`java`（用于运行您的代码）——可以说您可能想要运行您正在开发的代码。该`java`可执行文件确实与`jre`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:18:38.460

JDK 代表 Java DEVELOPER Kit，因此它包括编译和测试程序的所有工具，就像您在第一行中所说的那样。

# r - 枚举因子水平的实例

> ID：14481747
> 
> 赞同：4
> 
> 时间：2013-01-23T14:10:44.997
> 
> 标签：r, plyr, reshape2

我有一个包含 150000 行的长格式数据框，其中多次出现相同的 id 变量。我正在使用 reshape（来自 stat，而不是 package=reshape(2)）将其转换为宽格式。我正在生成一个变量来计算给定级别 id 的每次出现以用作索引。

我已经使用 plyr 处理了一个小型数据框，但是对于我的完整 df 来说太慢了。我可以更有效地编程吗？

因为我有大约 30 个其他变量，所以我一直在努力使用 reshape 包来做到这一点。对于每个单独的分析，最好只重塑我正在查看的内容（而不是整个 df）。

```
> # u=id variable with three value variables 
> u<-c(rep("a",4), rep("b", 3),rep("c", 6), rep("d", 5))
> u<-factor(u)
> v<-1:18
> w<-20:37
> x<-40:57
> df<-data.frame(u,v,w,x)
> df
   u  v  w  x
1  a  1 20 40
2  a  2 21 41
3  a  3 22 42
4  a  4 23 43
5  b  5 24 44
6  b  6 25 45
7  b  7 26 46
8  c  8 27 47
9  c  9 28 48
10 c 10 29 49
11 c 11 30 50
12 c 12 31 51
13 c 13 32 52
14 d 14 33 53
15 d 15 34 54
16 d 16 35 55
17 d 17 36 56
18 d 18 37 57
> 
> library(plyr)
> df2<-ddply(df, .(u), transform, count=rank(u, ties.method="first")) 
> df2
   u  v  w  x count
1  a  1 20 40     1
2  a  2 21 41     2
3  a  3 22 42     3
4  a  4 23 43     4
5  b  5 24 44     1
6  b  6 25 45     2
7  b  7 26 46     3
8  c  8 27 47     1
9  c  9 28 48     2
10 c 10 29 49     3
11 c 11 30 50     4
12 c 12 31 51     5
13 c 13 32 52     6
14 d 14 33 53     1
15 d 15 34 54     2
16 d 16 35 55     3
17 d 17 36 56     4
18 d 18 37 57     5
> reshape(df2, idvar="u", timevar="count", direction="wide")
   u v.1 w.1 x.1 v.2 w.2 x.2 v.3 w.3 x.3 v.4 w.4 x.4 v.5 w.5 x.5 v.6 w.6 x.6
1  a   1  20  40   2  21  41   3  22  42   4  23  43  NA  NA  NA  NA  NA  NA
5  b   5  24  44   6  25  45   7  26  46  NA  NA  NA  NA  NA  NA  NA  NA  NA
8  c   8  27  47   9  28  48  10  29  49  11  30  50  12  31  51  13  32  52
14 d  14  33  53  15  34  54  16  35  55  17  36  56  18  37  57  NA  NA  NA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:10:46.753

我仍然无法完全弄清楚为什么您最终要将数据集从宽转换为长，因为对我来说，这似乎是一个非常难以处理的数据集。

如果您希望加快因子水平的枚举，您可以考虑`ave()`在基础 R 中使用，或`.N`从“data.table”包中使用。考虑到您正在处理很多行，您可能需要考虑后者。

首先，让我们整理一些数据：

```
set.seed(1)
df <- data.frame(u = sample(letters[1:6], 150000, replace = TRUE),
                 v = runif(150000, 0, 10),
                 w = runif(150000, 0, 100),
                 x = runif(150000, 0, 1000))
list(head(df), tail(df))
# [[1]]
#   u        v        w        x
# 1 b 6.368412 10.52822 223.6556
# 2 c 6.579344 75.28534 450.7643
# 3 d 6.573822 36.87630 283.3083
# 4 f 9.711164 66.99525 681.0157
# 5 b 5.337487 54.30291 137.0383
# 6 f 9.587560 44.81581 831.4087
# 
# [[2]]
#        u        v        w        x
# 149995 b 4.614894 52.77121 509.0054
# 149996 f 5.104273 87.43799 391.6819
# 149997 f 2.425936 60.06982 160.2324
# 149998 a 1.592130 66.76113 118.4327
# 149999 b 5.157081 36.90400 511.6446
# 150000 a 3.565323 92.33530 252.4982
table(df$u)
# 
#     a     b     c     d     e     f 
# 25332 24691 24993 24975 25114 24895 
```

加载我们需要的包：

```
library(plyr)
library(data.table) 
```

创建我们数据集的“data.table”版本

```
DT <- data.table(df, key = "u")
DT # Notice that the data are now automatically sorted
#         u         v         w        x
#      1: a 6.2378578 96.098294 643.2433
#      2: a 5.0322400 46.806132 544.6883
#      3: a 9.6289786 87.915303 334.6726
#      4: a 4.3393403  1.994383 753.0628
#      5: a 6.2300123 72.810359 579.7548
#     ---                               
# 149996: f 0.6268414 15.608049 669.3838
# 149997: f 2.3588955 40.380824 658.8667
# 149998: f 1.6383619 77.210309 250.7117
# 149999: f 5.1042725 87.437989 391.6819
# 150000: f 2.4259363 60.069820 160.2324
DT[, .N, by = key(DT)] # Like "table"
#    u     N
# 1: a 25332
# 2: b 24691
# 3: c 24993
# 4: d 24975
# 5: e 25114
# 6: f 24895 
```

现在让我们运行一些基本测试。来自的结果`ave()`没有排序，但它们在“data.table”和“plyr”中，所以我们还应该测试使用时排序的时间`ave()`。

```
system.time(AVE <- within(df, {
  count <- ave(as.numeric(u), u, FUN = seq_along)
}))
#    user  system elapsed 
#   0.024   0.000   0.027 

# Now time the sorting
system.time(AVE2 <- AVE[order(AVE$u, AVE$count), ])
#    user  system elapsed 
#   0.264   0.000   0.262 

system.time(DDPLY <- ddply(df, .(u), transform, 
                           count=rank(u, ties.method="first")))
#    user  system elapsed 
#   0.944   0.000   0.984 

system.time(DT[, count := 1:.N, by = key(DT)])
#    user  system elapsed 
#   0.008   0.000   0.004 

all(DDPLY == AVE2)
# [1] TRUE
all(data.frame(DT) == AVE2)
# [1] TRUE 
```

“data.table”的语法确实很紧凑，而且它的速度非常快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:06:35.897

Using base R to create an empty matrix and then fill it in appropriately can often be significantly faster. In the code below I suspect the slow part would be converting the data frame to a matrix and transposing, as in the first two lines; if so, that could perhaps be avoided if it could be stored differently to start with.

```
g <- df$a
x <- t(as.matrix(df[,-1]))

k <- split(seq_along(g), g)
n <- max(sapply(k, length))
out <- matrix(ncol=n*nrow(x), nrow=length(k))
for(idx in seq_along(k)) {
  out[idx, seq_len(length(k[[idx]])*nrow(x))] <- x[,k[[idx]]]
}
rownames(out) <- names(k)
colnames(out) <- paste(rep(rownames(x), n), rep(seq_len(n), each=nrow(x)), sep=".")
out
#   b.1 c.1 d.1 b.2 c.2 d.2 b.3 c.3 d.3 b.4 c.4 d.4 b.5 c.5 d.5 b.6 c.6 d.6
# a   1  20  40   2  21  41   3  22  42   4  23  43  NA  NA  NA  NA  NA  NA
# b   5  24  44   6  25  45   7  26  46  NA  NA  NA  NA  NA  NA  NA  NA  NA
# c   8  27  47   9  28  48  10  29  49  11  30  50  12  31  51  13  32  52
# d  14  33  53  15  34  54  16  35  55  17  36  56  18  37  57  NA  NA  NA 
```

# java - HTTP Post 方法，我们可以提交的最大字节数/数据？

> ID：14481748
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:48.007
> 
> 标签：java, http, post, httpconnection

我正在尝试使用 HTTP Post 调用 URL，我想知道我可以通过 post 方法写入的字节数限制。您可以通过 HTTP Post 方法发送的数据是否有限制？

我正在使用`HTTPUrlConnection`api java 发布数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:17:53.607

客户端通常没有限制，限制是在服务器端设置的。例如 Apache Tomcat 使用 maxPostSize，默认为 2M。

# cron - Cron 作业命令不起作用

> ID：14481749
> 
> 赞同：0
> 
> 时间：2013-01-23T14:10:49.257
> 
> 标签：cron, crontab

我是 cron 作业的新手，并且在 Plesk 中设置了一个以每分钟执行一次，但是由于它不起作用，我不确定该命令是否正确。

```
 curl http://www.yourdomain.com/twitter_cron.php 
```

我在 Centos VPS 上运行 - 问题是我不确定是否需要特定的根来卷曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:13:33.043

```
sgeorge-mn:~ sgeorge$ which curl
/usr/bin/curl 
```

您需要在`cron`for中使用完整路径`curl`；否则你需要`PATH`在 crontab 中指定适当的变量

例如：

```
* * * * * /usr/bin/curl http://www.yourdomain.com/twitter_cron.php 
```

# asp.net - 如何在 Asp.net 的 Jqgrid 中计算列的总和并显示在 FooterRow 上

> ID：14481751
> 
> 赞同：6
> 
> 时间：2013-01-23T14:11:01.307
> 
> 标签：asp.net, jqgrid

嗨伙计们！我在jqgrid中显示数据并在jqgrid中启用'footerrow：true'现在根据我的需要，我想在页脚行上显示特定列的总和......请帮助我，因为我第一次使用Jqgrid......

提前致谢....

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T14:45:00.467

如果要对 jqGrid 中的值求和，可以在 JavaScript 中进行（最好在`gridComplete`事件中）：

```
$('#gridId').jqGrid({
    ...
    footerrow: true,
    gridComplete: function() {
        var $grid = $('#gridId');
        var colSum = $grid.jqGrid('getCol', '<Your column name>', false, 'sum');
        $grid.jqGrid('footerData', 'set', { 'Your column name>: colSum });
    }
}); 
```

如果需要在服务器端计算总和，则必须先启用`userDataOnFooter`选项：

```
$('#gridId').jqGrid({
    ...
    footerrow : true,
    userDataOnFooter : true
}); 
```

然后在您的服务器响应中包含总和。例如，在 JSON 的情况下，它应该如下所示：

```
{
    total: x,
    page: y,
    records: z,
    rows : [
        ...
    ],
    userdata: { <Your column name>: <sum counted on server side> }
} 
```

您还可以查看[jqGrid Demos](http://trirand.com/blog/jqgrid/jqgrid.html)页面上提供的实时示例（您应该选择“New in Version 3.5”，然后选择“Summary Footer Row”）。

# security - 'cat data |curl -d @- http://host:8080/webapp`: 我可以将流通过管道传输到 servlet 中吗？

> ID：14481758
> 
> 赞同：0
> 
> 时间：2013-01-23T14:11:30.323
> 
> 标签：security, servlets, stream

我编写了以下 servlet，它将输入转换为大写：

```
 public class TestServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        InputStream in=req.getInputStream();
        OutputStream out=resp.getOutputStream();
        byte array[]=new byte[1024];
        int nReads;
        while((nReads=in.read(array))!=-1)
            {
            for(int i=0;i<nReads;++i)
                {
                array[i]=(byte)Character.toUpperCase(array[i]);
                }
            out.write(array, 0, nReads);
            }
        out.flush();
        out.close();
        }
    } 
```

它工作正常：

```
echo "aaaaaaaaaaaaaaaaaaaaaaaaaaa" |\
curl -d @- "http://localhost:8080/app/test"
AAAAAAAAAAAAAAAAAAAAAAAAAAAl 
```

部署这样的 servlet 是否安全？这种 servlet 的缺陷是什么？例如，如何防止用户永远阻止我的 servlet 实例：

```
 cat  | curl -d @- "http://localhost:8080/app/test/x" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:17:54.827

不，您不能通过管道将*流传输*到 servlet。HTTP 并没有真正提供输入流。

您的命令有效，因为`cat`一旦完成输出数据就会返回。`curl`然后抓取所有数据并将其发送。但是，`curl`在完成获取数据之前不会发送任何内容。

当然，这样做的好处是它不会阻塞 servlet 的实例，因为阻塞发生在 curl 上，而不是 servlet 上。

# hibernate - Hibernate @ManyToOne 与 @JoinTable 和继承的关系

> ID：14481762
> 
> 赞同：2
> 
> 时间：2013-01-23T14:11:39.557
> 
> 标签：hibernate, inheritance, jointable

[Hibernate - 4.1.9.Final] [MySQL 驱动程序]

嗨，我有以下实体。

**动物 ：**

```
@Entity
@Table( name = "ANIMAL" )
@Inheritance( strategy = InheritanceType.TABLE_PER_CLASS )
public abstract class Animal implements Serializable
{
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue( strategy = GenerationType.TABLE )
@Column( name = "ANIMAL_ID" )
public Long id;

@Column( name = "ANIMAL_NAME" )
public String name;

} 
```

**狗 ：**

```
@Entity
@Table( name = "DOG" )
public class Dog extends Animal implements Cloneable, Serializable
{
private static final long serialVersionUID = 1L;

@ManyToOne
@JoinTable( name = "DOG_OTHER_DOG" )
public Dog dog;

} 
```

在 Dog 实体上具有循环关系。

```
 @ManyToOne
 @JoinTable( name = "DOG_OTHER_DOG" )
 public Dog dog; 
```

接下来，我正在尝试使用 Hibernate Session API 来持久化一只新狗。

```
 @Transactional
 public void testAnimalJoinTable()
 {
      Dog dogFirst = new Dog();
      dogFirst.name = "FirstDog";

      Session session = sessionFactory.getCurrentSession();
      session.save( dogFirst );

      Dog dogSecond = new Dog();
      dogSecond.dog = dogFirst;
      dogSecond.name = "SecondDog";

      session.save( dogSecond );
 } 
```

架构创建良好

> Hibernate: 创建表 DOG (ANIMAL_ID bigint not null, ANIMAL_NAME varchar(255), primary key (ANIMAL_ID)) ENGINE=InnoDB
> Hibernate: create table DOG_OTHER_DOG (dog_ANIMAL_ID bigint, ANIMAL_ID bigint not null, primary key (ANIMAL_ID)) ENGINE=InnoDB

但最后，Hibernate 总是在 save 方法上失败并抛出异常。

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“字段列表”中的未知列“dog_ANIMAL_ID”

事实上，Hibernate 不使用连接表来拯救狗。

> Hibernate：从 hibernate_sequences 中选择 sequence_next_hi_value，其中 sequence_name = 'ANIMAL' 进行更新
> Hibernate：插入 hibernate_sequences(sequence_name, sequence_next_hi_value) values('ANIMAL', ?)
> Hibernate: update hibernate_sequences set sequence_next_hi_value = ? 其中 sequence_next_hi_value = ？和 sequence_name = 'ANIMAL'
> Hibernate: 插入 DOG (ANIMAL_NAME, dog_ANIMAL_ID, ANIMAL_ID) 值 (?, ?, ?)

好吧，我的问题是（：

*   为什么 Hibernate 不使用连接表？**（如果我删除动物继承一切正常）**
*   就我而言，我该如何解决这个问题？

提前致谢 ！

* * *

PS：我不能使用@MappedSuperclass 来解决这个问题..

# wicket - 检票口 6.2.0 中的检票口自动完成

> ID：14481767
> 
> 赞同：2
> 
> 时间：2013-01-23T14:11:53.277
> 
> 标签：wicket

我一直在尝试使用以下链接中出现的示例： [http ://www.mysticcoders.com/blog/autocomplete-with-an-object/](http://www.mysticcoders.com/blog/autocomplete-with-an-object/)

问题是什么都没有发生……当开始在文本字段中输入内容时，什么也没有发生。我进行了调试，似乎没有触发构建器和渲染器。

有人可以告诉我为什么什么都没发生吗？

我正在使用 Wicket 6.2.0 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:49:22.500

Wicket 自 6.0 版以来捆绑了它自己的 jQuery 版本（从 Wicket 6.5.0 开始的 jQuery v1.8.3）。

确保你没有加载你自己的 jQuery。

以前我在使用 Wicket 1.5.9 时加载了我们自己的 jQuery（使用 RequireJS）。突然升级到 Wicket 6.5.0（实际上是 Pax Wicket 2.1.0）自动完成（除其他外）停止工作。

我的解决方案是使用捆绑的 jQuery 并避免加载我们自己的 jQuery。

如果您像我们一样使用 RequireJS 加载 jQuery，您将希望用一个虚拟模块“替换” jQuery 模块，如下所示：

```
define([], function() {
    return jQuery;
}); 
```

所以其他使用 RequireJS 加载 jQuery 的模块将继续工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:18:49.930

您应该研究 Igor Vaynberg 的[Wicket-Select2](http://ivaynberg.github.com/select2/)项目，该项目为自动完成、多选等提供了非常好的功能。特别是当您提到在 Gmail 中添加收件人到新邮件时，您应该考虑使用基于[此示例](http://ivaynberg.github.com/select2/#multi)的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:52:49.023

你能提供你的代码吗？

您是否使用了[AutoCompleteTextField](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/extensions/ajax/markup/html/autocomplete/AutoCompleteTextField.html)？在这种情况下，您必须在样式表中添加一些定义自动完成列表的 CSS 类。

为了测试这个类，我会选择[DefaultCssAutoCompleteTextField](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/extensions/ajax/markup/html/autocomplete/AutoCompleteTextField.html)。这是开箱即用的。您只需要实现 getChoices 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T23:05:16.930

正如@Rudi Wijava 所说，这可能是jQuery 版本问题。

在我的项目中，我遇到了同样的问题，但我不能使用比 Wicket 提供的更高要求的 jQuery couse 皮肤捆绑版本。但这是一个简单的解决方案。在您的应用程序设置中，您可以将 jQuery 引用设置为您自己的，如下所示：

```
 jQueryLibrarySettings.setJQueryReference(new UrlResourceReference(Url.parse(contextPath
        + "/static/js/libs/jquery-2.0.2.min.js"))); 
```

您可以在扩展 WebApplication 类 [http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/protocol/http/WebApplication.html的类中执行此操作](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/protocol/http/WebApplication.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-17T12:48:21.667

```
You can use following link to do Autocomplete textbox which is easy to use :
http://www.7thweb.net/wicket-jquery-ui/autocomplete/DefaultAutoCompletePage;jsessionid=ACC1524F61A303942AEE7C28D096DF7D?0

For Example:

package com.googlecode.wicket.jquery.ui.samples.pages.autocomplete;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.apache.wicket.ajax.AjaxRequestTarget;
import org.apache.wicket.markup.html.form.Form;
import org.apache.wicket.markup.html.panel.FeedbackPanel;
import org.apache.wicket.model.Model;

import com.googlecode.wicket.jquery.ui.form.autocomplete.AutoCompleteTextField;
import com.googlecode.wicket.jquery.ui.panel.JQueryFeedbackPanel;

public class DefaultAutoCompletePage extends AbstractAutoCompletePage
{
    private static final long serialVersionUID = 1L;
    private static final List<String> CHOICES = Arrays.asList("Acid rock", "Alternative metal", "Alternative rock", "Anarcho punk", "Art punk", "Art rock", "Beat music", "Black metal", "Blues-rock", "Britpop", "Canterbury scene",
            "Chinese rock", "Christian metal", "Crossover Thrash Metal", "Crust punk", "Crustgrind", "Dark cabaret", "Death metal", "Deathcore", "Deathrock", "Desert rock", "Djent", "Doom metal", "Dream pop", "Drone metal",
            "Dunedin Sound", "Electronic rock", "Emo", "Experimental rock", "Folk metal", "Folk rock", "Freakbeat", "Funk metal", "Garage punk", "Garage rock", "Glam metal", "Glam rock", "Goregrind", "Gothic metal", "Gothic rock",
            "Grindcore", "Groove metal", "Grunge", "Hard rock", "Hardcore punk", "Heavy metal", "Indie pop", "Indie rock", "Industrial metal", "Industrial rock", "J-Rock", "Jazz-Rock", "Krautrock", "Math rock", "Mathcore",
            "Melodic Death Metal", "Melodic metalcore", "Metalcore", "Neo-psychedelia", "New Prog", "New Wave", "No Wave", "Noise pop", "Noise rock", "Noisegrind", "Nu metal", "Paisley Underground", "Pop punk", "Pop rock", "Pornogrind",
            "Post-Britpop", "Post-grunge", "Post-hardcore", "Post-metal", "Post-punk", "Post-punk revival", "Post-rock", "Power metal", "Power pop", "Progressive metal", "Progressive rock", "Psychedelic rock", "Psychobilly", "Punk rock",
            "Raga rock", "Rap metal", "Rap rock", "Rapcore", "Riot grrrl", "Rock and roll", "Rock en Español", "Rock in Opposition", "Sadcore", "Screamo", "Shoegazer", "Slowcore", "Sludge metal", "Soft rock", "Southern rock", "Space Rock",
            "Speed metal", "Stoner rock", "Sufi rock", "Surf rock", "Symphonic metal", "Technical Death Metal", "Thrash metal", "Thrashcore", "Twee Pop", "Unblack metal", "World Fusion");

    public DefaultAutoCompletePage()
    {
        // Form //
        final Form<Void> form = new Form<Void>("form");
        this.add(form);

        // FeedbackPanel //
        final FeedbackPanel feedback = new JQueryFeedbackPanel("feedback");
        form.add(feedback.setOutputMarkupId(true));

        // Auto-complete //
        form.add(new AutoCompleteTextField<String>("autocomplete", new Model<String>()) {

            private static final long serialVersionUID = 1L;

            @Override
            protected List<String> getChoices(String input)
            {
                List<String> choices = new ArrayList<String>();
                String inputLowerCase = input.toLowerCase();

                int count = 0;
                for (String choice : CHOICES)
                {
                    if (choice.toLowerCase().startsWith(inputLowerCase))
                    {
                        choices.add(choice);

                        // limits the number of results
                        if (++count == 20)
                        {
                            break;
                        }
                    }
                }

                return choices;

                //
                // Equivalent to:
                // return ListUtils.startsWith(input, CHOICES);
                //
            }

            @Override
            protected void onSelected(AjaxRequestTarget target)
            {
                info("Your favorite rock genre is: " + this.getModelObject());
                target.add(feedback);
            }
        });
    }
}

HTML:

<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
<head>
<wicket:head>
    <title>Wicket - jQuery UI: auto-complete</title>
    <style type="text/css">
        .ui-autocomplete {
            max-height: 200px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 20px;
        }   
    </style>
</wicket:head>
</head>
<body>
<wicket:extend>
    <div id="wrapper-panel-frame" class="ui-corner-all">
        <form wicket:id="form">
            <div>Choose your favorite rock genre: (that starts with your criteria)</div>
            <br/>
            <input wicket:id="autocomplete" type="text" size="30" title="enter your criteria here"></input><br/>
            <br/>
            <div wicket:id="feedback" style="width: 360px;"></div>
        </form>
    </div>
</wicket:extend>
</body>
</html> 
```

# string - Ash 脚本 - 检测变量是否等于“？”

> ID：14481770
> 
> 赞同：0
> 
> 时间：2013-01-23T14:12:09.563
> 
> 标签：string, shell, switch-statement, ash

我正在编写一个 Ash 脚本并尝试检测输入变量是否等于“？” 或不。我发现最好使用它`case`来执行此操作，但我无法使其正常工作。我的代码是：

```
case $@ in
*?*) usage
    operationSucceeded
    exit;;
  *) echo "Unknown argument: $@"
    usage
    operationFailed
    exit $E_OPTERROR;;   # DEFAULT\
esac 
```

第一个选项总是被触发，而我希望它仅在`?`变量时触发，而其他选项则为其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:03:19.437

改成

```
 case $@ in
     *[\?]* ) usage 
    .....
  easc 
```

您可能不需要 '\' ，但它不会受到伤害。

在更一般的意义上，`[ABC]`称为字符类，将匹配其中列出的任何单个字符`[ ]`。所以在 中`*[\?]*`，我们说的是“任意数量的字符（包括零个字符），然后是 Char 类`[\?]`（在这种情况下，只有 '?' 字符），然后是零个或多个字符”。

IHTH

# ruby-on-rails - 设计验证第一次尝试失败，之后成功

> ID：14481771
> 
> 赞同：0
> 
> 时间：2013-01-23T14:12:19.517
> 
> 标签：ruby-on-rails, devise

我正在使用 Devise (2.1.2) 和 Rails (3.2.9)，并且启用了基本身份验证（用于测试）。我正在使用 CURL 发布 JSON POST 请求，但我看到了奇怪的行为。身份验证在我第一次发送请求时失败（服务器重新启动后），但在第二次发送完全相同的请求后成功。

调试时，第一次尝试时winning_strategies 似乎为零，但第二次尝试时填充了三个策略。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:53:08.397

尝试：

**认证：**

```
curl -H 'Content-Type: application/json' \
  -H 'Accept: application/json' \
  -X POST http://localhost:3000/users/sign_in \
  -d "{'user' : { 'email' : 'test@example.com', 'password' : 'password'}}" \
  -c cookie 
```

**节目：**

```
curl -H 'Content-Type: application/json' \
  -H 'Accept: application/json' \
  -X GET http://localhost:3000/pages/1.xml \
  -b cookie 
```

对于`post`请求 -

Rails 3 中的非 GET 请求需要**CSRF 令牌。**

这是因为 Rails 默认为表单添加了一个**真实性令牌**，以防止恶意伪造提交的参数。由于您没有在请求中提供此令牌，因此 rails 不接受它。你可以绕过这个

```
skip_before_filter :verify_authenticity_token 
```

# java - 在 ubuntu 终端中运行在 eclipse 包结构中创建的 java 应用程序

> ID：14481777
> 
> 赞同：1
> 
> 时间：2013-01-23T14:12:30.773
> 
> 标签：java, eclipse, ubuntu, terminal

我确信这是一个非常新手的问题，但多年后编写 Java 应用程序。我写了一个简单的java代码来打印“HelloWorld”

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println(" inside MAIN !!!");
} 
```

现在我在 eclipse 中创建了我的项目，结构是“/home/workspace/HelloWorld/src/com/android/test/helloworld/HelloWorld.java”& eclipse 在“/home/workspace/HelloWorld/bin”创建了.class /com/android/test/helloworld/HelloWorld.class”。这在 Eclipse 控制台中成功运行。现在我想通过我的 Ubuntu 11.04 终端运行它。如果我`cd`到 .class 父文件夹并使用`java .HelloWorld`，它会抛出 ClassNotFoundException

```
Exception in thread "main" java.lang.NoClassDefFoundError: /HelloWorld 
```

引起：java.lang.ClassNotFoundException: .HelloWorld

如果我用同一个默认包中生成的源文件和类文件编写相同的 prog，我可以通过终端运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:16:51.647

`cd /home/workspace/HelloWorld/bin/`并运行

```
java com.android.test.helloworld.HelloWorld 
```

您必须始终使用具有完整限定名的类（包 + 类名）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:52:40.673

还要注意这里的答案： [Eclipse 生成的可运行 jar 文件不会执行？](https://stackoverflow.com/questions/4881136/runnable-jar-file-generated-by-eclipse-wont-execute)

基本上，如果您让 Eclipse 将您的项目导出为“可运行的 jar”，您可以使用以下命令运行它：

`java -jar YOURJAR.jar`

# java - 正则表达式使用 java/tukey URL 重写器从 URL 中转义问号

> ID：14481778
> 
> 赞同：2
> 
> 时间：2013-01-23T14:12:30.790
> 
> 标签：java, mod-rewrite, url-rewriting

我正在尝试使用 tukey URL rewriter 和 java 来重定向具有特定请求参数的所有 URL。因此，例如，我想转换以下所有内容：

[http://xxx.com/?refcode=1234](http://xxx.com/?refcode=1234)

只需[http://xxx.com/](http://xxx.com/)

首先是 tukey url 重写最好的方法吗？使用 tukey，我已经成功地匹配了诸如 ...co/refcode=1234 （没有？）之类的 URL，使用如下内容：

```
<rule>
    <note>Remove agent ID from URL without query parameters</note>
    <from>^/.*refcode=.*$</from>
    <to type="redirect">/redirect.do</to>
</rule> 
```

但我似乎无法编写一个匹配的正则表达式？也是。我试过逃避 ? （使用 \?），我也尝试使用带有 [?] 的正则表达式，但没有运气。所以沿着这些路线的东西似乎不起作用：

```
 <rule>
    <note>Remove agent ID from URL without query parameters</note>
    <from>^/[?]agentId=.*$</from>
    <to type="redirect">/bank.do</to>
</rule> 
```

或者

```
<rule>
    <note>Remove agent ID from URL without query parameters</note>
    <from>^/\?agentId=.*$</from>
    <to type="redirect">/bank.do</to>
</rule> 
```

如果有人能让我知道如何编写正确的正则表达式以匹配此 URL，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:38:35.557

\? 是逃避？的正确方法，我会避免在最后使用 $ 。

```
<from>^/\?refcode=(\d+)</from> 
```

您也可以使用 CONDITION 标签

```
<condition type="query-string">refcode=(\d+)</condition>
<from>/</from> 
```

# windows - 在 Windows 上侦听信标帧

> ID：14481785
> 
> 赞同：0
> 
> 时间：2013-01-23T14:12:46.643
> 
> 标签：windows, winapi, network-programming

首先：此线程与[this](https://stackoverflow.com/questions/10381193/how-to-capture-a-beacon-frame-from-wlan-in-windows)没有重复。现在我的问题。我正在寻找某种提供对网卡（OSI-Layer 2）上的帧的低级访问的winapi。我需要获取我的网卡捕获的信标帧的原始数据。下一步是我应该能够发送原始帧。但我实际上什么都找不到。你知道一些可以访问原始信标帧的东西吗？

# python - 如何通过终端获取mac os的语言

> ID：14481792
> 
> 赞同：2
> 
> 时间：2013-01-23T14:13:03.207
> 
> 标签：python, macos, terminal

我知道可以通过鼠标拖动在语言和文本窗口中更改语言设置。但是我可以通过终端、Python 脚本或其他一些脚本获取语言信息吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T14:46:07.737

打开终端（位于 /Applications/Utilities/）。在终端中键入或粘贴此命令：sudo languagesetup 按回车键。当提示输入密码时，输入您的帐户密码并再次按 Return。如果您的用户没有密码（空白密码）并且您使用的是 Mac OS X v10.5 或更高版本，请参阅 sudo 命令需要非空白管理员密码。将显示可用语言列表。键入要使用的语言旁边显示的数字，然后按下 Return 键。退出终端。

[http://support.apple.com/kb/HT4102](http://support.apple.com/kb/HT4102)

先谷歌。总是！

# ruby - ruby 有 getlocale 方法吗？

> ID：14481793
> 
> 赞同：7
> 
> 时间：2013-01-23T14:13:08.803
> 
> 标签：ruby

我需要在没有安装任何 ruby​​gems 的情况下检测 Ruby 中的语言。Python 和 Perl 都将语言环境实用程序作为核心 API 的一部分。我想要类似的东西

```
# LC_ALL=cs_CZ ruby test.rb
Your language is: cs_CZ
Your currency is: CZK 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T18:35:57.620

Rails 国际[化 http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

```
I18n.locale 
```

此外，如果您想像这样设置默认值，请检查您的 application.rb 文件：

```
I18n.default_locale = [:en]
I18n.available_locales = [:en, :fr] 
```

如果您无法访问任何 gem，包括 Rails，请查看 svenfuchs 是如何实现它的：[https ://github.com/svenfuchs/i18n](https://github.com/svenfuchs/i18n)

快速提问：您知道您可以出售宝石并在不访问 ruby​​gems 的情况下使用它们，对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:56:38.030

Does `ENV["LANG"]` work for you?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-28T11:03:02.643

由于这个问题是关于 Ruby 而不是关于 Ruby on Rails，所以我也需要，这是 Rails 之外的一些东西：

安装 ruby​​gem 'locale'（[在此处](https://github.com/mutoh/locale)记录）：

```
$ gem install locale 
```

使用它：

```
require 'rubygems'
require 'locale'

Locale.current = 'whateverlocaleyouwant' 
```

核心 Ruby 中似乎没有这样的功能。

# sql - 如何将记录从本地数据库复制到主远程数据库

> ID：14481794
> 
> 赞同：0
> 
> 时间：2013-01-23T14:13:13.880
> 
> 标签：sql, sql-server-express

我正在使用本地 sql server express 2012 数据库来临时存储来自 pc 应用程序的数据。每天一次，我想获取所有新记录并将它们从本地数据库复制到位于远程系统上的主数据库。我见过的大多数工具都旨在复制完整的表格，而不仅仅是新数据。这个过程常用的工具有哪些？

# php - php mysql在数组中使用数据库行名而不是 数字

> ID：14481797
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:13:26.550
> 
> 标签：php, mysql

我有以下函数将整行拉入数组但我想做的是在数组中使用 en,de,es,fr,it 的行标题，就像我在底部的示例一样

```
function translateWord($word,$lang){
    $result = mysql_query("SELECT * FROM tbl_translate WHERE en = '$word'");
    if (!$result) {
        echo 'Could not run query: ' . mysql_error();
        exit;
    }
    $row = mysql_fetch_row($result);
    print_r($row);
}
translateWord('hi','fr'); 
```

**回复**

> 1 [1] => hi [2] => 你好 [3] => 你好 [4] => bonjour [5] => ciao )

需要是

> 1 [en] => hi [de] => hallo [es] => hola [fr] => bonjour [it] => ciao )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:14:38.600

采用[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)

```
$row = mysql_fetch_assoc($result);
print_r($row);

[en] => hi [de] => hallo [es] => hola [fr] => bonjour [it] => ciao ) 
```

# java - 在 Vaadin 7 中让 Horizo ntalSplitPanel 将其宽度调整为 content-

> ID：14481799
> 
> 赞同：0
> 
> 时间：2013-01-23T14:13:27.293
> 
> 标签：java, user-interface, vaadin

我正在使用`Vaadin 7`rc1。

`HorizontalSplitPanel`如果左侧比给定宽度宽，我想创建一个调整其宽度的。默认行为是，如果内容比给定大小宽，屏幕底部会出现滚动条。但是我想让左侧变宽。

我是 Vaadin 的新手，这本书没有像这样详细介绍。这怎么可能`Vaadin 7`？任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:21:22.130

尝试在 Horizo​​ntalSplitPanel 上调用方法[setSizeFull()](https://vaadin.com/api/com/vaadin/ui/AbstractComponent.html#setSizeFull%28%29)。

然后在例如 Chrome 中打开应用程序并检查拆分面板元素。查看已更改的内容并尝试在检查器中使用宽度/高度值。这可能会给你一个线索，什么是错的。也许您还需要在拆分面板中包含的组件上调用 setSizeFull() ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T12:51:59.257

这是 Horizo​​ntalSplitPanel 中的一个函数，它完全符合您的要求：

```
panel.setSplitPosition(float f, Unit unit); 
```

你可以使用

> 单位.PERCENTAGE

或者

> 单位.PX

...有很多可能性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-26T12:53:38.567

我已经设法用其他布局结构解决了这种情况。

# asp.net-mvc - ASP.NET MVC HtmlDecode WebGrid 列

> ID：14481801
> 
> 赞同：0
> 
> 时间：2013-01-23T14:13:28.453
> 
> 标签：asp.net-mvc, webgrid

我想将 System.Web.HttpUtility.HtmlDecode 与 WebGrid 一起使用，但它不起作用我的代码是：

```
grid.GetHtml(tableStyle: "webGrid",
             htmlAttributes: new { id = "DataTable" },
             headerStyle: "header",
             alternatingRowStyle: "alt",
             columns: grid.Columns(
                 grid.Column("ArtId"),
                 grid.Column(columnName: "ArtDescription",
                                         format: item => System.Web.HttpUtility.HtmlDecode(item.ArtDescription))
             )
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:18:38.123

您应该使用[Html.Raw](http://msdn.microsoft.com/en-us/library/gg568896%28v=vs.111%29.aspx)：

```
format: item => Html.Raw(item.ArtDescription) 
```

# php - 通过数据库和目录删除图像

> ID：14481807
> 
> 赞同：0
> 
> 时间：2013-01-23T14:13:51.517
> 
> 标签：php, html, mysql

有人可以帮助我的代码。我可以删除数据库中的图像，但不能删除目录中的图像。我尝试了很长时间，但它似乎根本不起作用。有人可以帮帮我吗？这是我的代码：这是图像所在的代码

```
<?
//this is were images displayed
                    $query = "SELECT * FROM images WHERE category='home'";
                    $result = mysql_query($query) or die(mysql_error());
                    while($row = mysql_fetch_array($result)){
                    ?>
                    <a href="edithomephotos.php?delete=<?=$row['imageID']?>" onclick = "return confirm('Are you sure you want to delete?')"><img src="images/template/delete.png" id="AEDbutton"></a>

                    echo "<img border=\"0\" src=\"".$row['image']."\" width=\"200\"  height=\"100\">";
                    echo "<br>";                }   

?> 
```

，？

```
include('global.php');

//this is were image were deleted

if($delete != "") 

    {

        $query = "DELETE FROM images WHERE imageID='".$delete."'";
        ExecuteQuery($query);   

}

//but in here , it cannot delete image through directory
           $query = "SELECT * FROM images WHERE imageID='".$delete."'";

                $result = mysql_query($query);

while ($delete = mysql_fetch_array($result)) {
                $image = $delete['image'];

                 $file= '/.directory/'.$image;

                        unlink($file);

    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:17:08.463

您已经删除了表中的图像条目，之后您尝试在数据库中获取相同的条目。所以，首先你可以从文件夹中删除图像，然后你可以在表格中删除。

```
<?php
    include('global.php');

    if($delete != "") {
        $query = "SELECT * FROM images WHERE imageID='".$delete."'";
        $result = mysql_query($query);

        while ($delete = mysql_fetch_array($result)) {
            $image = $delete['image'];
            $file= '/.directory/'.$image;
            unlink($file);
        }

        $query = "DELETE FROM images WHERE imageID='".$delete."'";
        ExecuteQuery($query);   
    }
?> 
```

**注意：** 确保您的路径`$file= '/.directory/'.$image;`正确，我认为它是指根目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:19:38.333

有趣的。那是因为您首先从数据库中删除图像 ID，然后您尝试获取先前删除的图像（不再存在）的 ID 并删除与其关联的文件。像这样切换代码。

```
include('global.php');

if($delete != "") 
{
//first delete the file
$query = "SELECT * FROM images WHERE imageID='".$delete."'";

$result = mysql_query($query);

while ($delete = mysql_fetch_array($result))
{
    try
    {
        $image = $delete['image'];
        $file= '/images/'.$image;
        unlink($file);
    } catch (Exception $e) {

    }
}

// after that delete the id from the db of that image associated with the deleted file
$query = "DELETE FROM images WHERE imageID='".$delete."'";
ExecuteQuery($query);   
} 
```

更新：我添加了一个尝试捕获

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T12:51:50.600

如果要删除图像，首先需要删除图像，然后在数据库中删除

# ms-access - LIKE 在查询条件中具有（小于大于）的表单上的控件

> ID：14481808
> 
> 赞同：0
> 
> 时间：2013-01-23T14:13:54.183
> 
> 标签：ms-access

我或多或少需要将此添加为计算字段的过滤器选项。它位于具有运行查询的搜索功能的表单上。我正在尝试将前一个创建者的所有查询合并到一个查询中。这是我唯一缺少的步骤。

如果我将该控件设为组合框并作为行源

```
<5;<15;<30 
```

理想情况下，我希望它小于 5；15>x>5; 30>x>15 但我不知道如何在查询可以看到它是否像那个控件的地方编写它。

```
Criteria Like "*" & [Forms]![FRM_SearchMulti]![txtClosing] & "*" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:01:26.813

我认为您可以在 VBA 中构建字符串以提高速度，或者如果您不关心相关查询失败或速度，则可以使用 UDF。

```
 Dim qdf As queryDef
 Set qdf = CurrentDB.QueryDefs("TempQuery") ''TempQuery must exist
 sSQL = "SELECT * FROM Table WHERE ANumber " & Me.MyCombo 
 qdf.SQL = sSQL

 DoCmd.OpenQuery qdf.Name 
```

或者那里。

# javascript - 如何将 xpath 值列表传递给函数 - 数组或对象？

> ID：14481810
> 
> 赞同：1
> 
> 时间：2013-01-23T14:13:55.073
> 
> 标签：javascript, xml, function, xml-parsing, argument-passing

我有一个关于将 XML xpath 值列表传递给函数的最佳实践的问题。

我只是一个初学者程序员，正在学习javascript。

我想要做的是定义一个带有条件的对象（这样做没问题），以及我想从查询中返回的结果列表，这两者都可以传递给一个函数。

以下是有效的，但我认为可能将 xpath 作为对象中的键发送可能不是最好的主意，使用 null 值。我用我发送的键和值从函数中取回一个对象。

```
 var myCriteria = { prospect_id : 98888158, type : 13};
    var myResults = { 'total_results':null , 'visitor_activity/id':null };
    myResults = pardotQuery(authentication, 'visitorActivity', myCriteria, myResults); 
```

我考虑将它作为一个数组传入，然后将其转换为一个对象，该对象通过键和值返回。

请建议什么是最好的。

谢谢。

# java - 如何以可视方式使用扩展 NetBeans 中的组件的类？

> ID：14481813
> 
> 赞同：0
> 
> 时间：2013-01-23T14:14:03.840
> 
> 标签：java, swing, netbeans, jpanel

我有一个扩展类`JPanel`。我需要一种方法来在视觉上使用它，就像`JPanel`在 NetBeans 中一样。我的意思是 NetBeans 为此提供了设计选项卡。我应该怎么办？

编辑：当您想向项目添加新文件时，您可以看到 JPanel Form 选项，**我应该怎么做才能让我的类扩展组件（例如`JPanel`）在那里列出**，以便我可以选择它并使用它视觉上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:20:49.940

如果您正在谈论将新类添加到 NetBeans GUI 构建器，[NetBeans wiki](http://wiki.netbeans.org/FaqFormUsingCustomComponent)上有关于如何执行此操作的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:17:45.433

如果您只想创建一个独立的 JPanel 表单：导航到*Projects Explorer*中的一个包，右键单击它并选择`New > JPanel Form`。如果弹出窗口中不存在，请在出现的对话框中选择`New > Other...`并导航到`Swing GUI Forms`类别。它应该列在`File Types`.

您无法直观地设计不是以这种方式创建的 JPanel。它必须是 JPanel 表单，以便 Netbeans 将其识别为可以可视化设计的实体。[但是，您可以将其视为原子组件，并按照此答案](https://stackoverflow.com/questions/13565313/add-jtree-checkboxtree-to-jdialog/13567816#13567816)中的步骤将其添加到 Netbeans 。

# wpf - wpf 应用程序可以使用存储在 asp.net Web 服务器中的缓存吗？

> ID：14481816
> 
> 赞同：0
> 
> 时间：2013-01-23T14:14:10.477
> 
> 标签：wpf, asp.net-mvc, caching, iis

我们有用 WPF 编写的客户端应用程序，每次都向服务器端 MVC Web 应用程序发出请求。

因为他们有时会使用相同的参数进行请求。我们希望服务器端缓存结果。

如果一个客户端请求一次，另一个客户端将使用服务器中的缓存数据。但似乎客户端应用程序没有使用缓存数据。第二个客户端应用程序仍将调用服务器中的函数。

我们如何让客户端在服务器端使用缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:34:31.380

.Net 4 可以使用 MemoryCache。[这篇文章](http://www.codeproject.com/Articles/290935/Using-MemoryCache-in-Net-4-0)应该让你开始。

# asp.net-mvc-4 - ViewBag 选择列表日期时间到日期

> ID：14481819
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:14:15.323
> 
> 标签：asp.net-mvc-4, selectlist, viewbag

在我的控制器中 -

```
ViewBag.DatesEnum = new SelectList(_db.blah.Where(w => w.Active == true).AsEnumerable(), "ID", "Date"); 
```

鉴于——

```
@Html.DropDownListFor(m => m.blahDate, (SelectList)ViewBag.DatesEnum) 
```

Ofc 这是一个传入的日期时间值，我想知道如何最好地将其转换为 ToShortDateString。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:26:54.740

```
ViewBag.DatesEnum = _db.blah.Where(w => w.Active == true)
                            .AsEnumerable()
                            .Select(i => new SelectListItem
                                        {
                                            Value = i.ID,
                                            Text = i.Date.ToShortDateString()
                                        }); 
```

然后您可以在视图中显示下拉菜单。

```
@Html.DropDownListFor(m => m.blahDate, 
                           (IEnumerable<SelectListItem>)ViewBag.DatesEnum) 
```

如果您将下拉数据添加到模型并跳过使用 ViewBag 会更好。

# android - 如何避免Android中的ProgressDialog

> ID：14481820
> 
> 赞同：7
> 
> 时间：2013-01-23T14:14:24.263
> 
> 标签：android

[Dialogs @ Android Developer](http://developer.android.com/guide/topics/ui/dialogs.html)说要避免 ProgressDialog 指示加载，而是在布局中放置一个活动指示器。

[Progress & Activity @Android Developer](http://developer.android.com/design/building-blocks/progress.html)讨论了活动指标，但没有命名使用的类。我在搜索名称为 ActivityBar、ActivityCircle 或 ActivityIndi​​cator 的 Android 类时运气不佳。

我在哪里可以找到关于 Android 支持在我的布局中包含活动指示器的文档（教程、示例或 API 文档），避免使用 ProgressDialog？

**更新：** full.stack.ex 为我指出了正确的答案。

*首先，在调用 setContentView() 之前*，在 Activity 的 onCreate() 方法中包含以下代码：

 *```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

接下来，在加载之前（例如启动 AsyncTaskLoader），使用此调用使微调器出现：

```
setProgressBarIndeterminateVisibility(true); 
```

最后，加载完成后，再次隐藏微调器：

```
MainActivity.this.setProgressBarIndeterminateVisibility(false); 
```

答对了！不需要 ProgressDialog。使微调器可见似乎会大大减慢模拟器中的加载速度（它需要几分钟而不是几秒钟），但在我的实际手机上却没有。我不确定是否有任何方法可以使微调器使用更少的 CPU 周期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:07:45.097

从文档中看，有一个窗口功能并不是很明显。

这是一个内置的进度指示器：

```
Activity.requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

[developer.android.com/reference/android/app/Activity.html#requestWindowFeature(int)](http://developer.android.com/reference/android/app/Activity.html#requestWindowFeature%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:22:54.513

我过去倾向于使用动画 gif 图像。生成它们的好网站是

[http://www.ajaxload.info/](http://www.ajaxload.info/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:19:00.190

你说的是 ProgressBar 类（我猜）：http: [//developer.android.com/reference/android/widget/ProgressBar.html](http://developer.android.com/reference/android/widget/ProgressBar.html)*

# html - Html5 画布和笔记本电脑性能

> ID：14481821
> 
> 赞同：0
> 
> 时间：2013-01-23T14:14:26.063
> 
> 标签：html, canvas

我的画布开发游戏有一些问题。

我的网站非常滞后，特别是在 chrome 和 safari 上用于新笔记本电脑。在我的旧笔记本电脑（2006 年）中，所有 borwsers 都很迟钝

谷歌开发者工具告诉我，我的 javascript 开发并没有真正使用 cpu！仅使用 3%。97% 免费使用

所以我想知道我必须在哪里寻找来解决这个问题。显卡性能，Canvas动画可以吗？如果是这样，我该如何解决？

我的画布动画不是很大：200px X 1000px，但是当我缩小它（200px X 100px）时，动画看起来更平滑？当我也显示所有背景图像时...

所以我很困惑。在画布上使用一些复杂的动画可以是显卡的最低要求吗？

我真的不知道在哪里看。

提前致谢

# image-processing - 裁剪图像时出现错误opencv和openframework

> ID：14481827
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:14:49.067
> 
> 标签：image-processing, opencv, openframeworks

我有以下代码：

```
IplImage* f( IplImage* src )
{
   // Must have dimensions of output image
   IplImage* cropped = cvCreateImage( cvSize(1280,500), src->depth, src->nChannels );

   // Say what the source region is
   cvSetImageROI( src,  cvRect( 0,0, 1280,500 ) );

   // Do the copy
   cvCopy( src, cropped );
   cvResetImageROI( src );

   return cropped;
}

void testApp::setup(){
    img.loadImage("test.jpg");
    finder.setup("haarcascade_frontalface_default.xml");
    finder.findHaarObjects(img);
}

//--------------------------------------------------------------
void testApp::update(){

}

//--------------------------------------------------------------
ofRectangle cur;
void testApp::draw(){

    img = f(img);

    img.draw(0, 0);
    ofNoFill();
    for(int i = 0; i < finder.blobs.size(); i++) {
        cur = finder.blobs[i].boundingRect;
        ofRect(cur.x-20, cur.y-20, cur.width+50, cur.height+50);
    }
} 
```

它会产生错误。我认为这是因为我没有转换`IplImage`为`ofImage`. 有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:27:47.157

我想你的 img 实例，你传递给 f() 的实例是 ofxCVImage 或类似的实例。据我所知，ofx 存储了一个受保护的 iplimage 变量，因此您不能将 ofxCVImage 转换为 iplimage。

你可以试试

```
img = f(img.getCvImage()) // ofxCvImage::getCvImage() returns IplImage 
```

# java - 以编程方式在Android中注销Facebook

> ID：14481830
> 
> 赞同：0
> 
> 时间：2013-01-23T14:14:56.343
> 
> 标签：java, android, facebook

我正在使用旧的 facebook sdk、fbconnect，并且`Facebook.FORCE_DIALOG_AUTH`即使我有 facebook 应用程序，我也会强制应用程序使用 webui via 登录到 facebook 以启动 webview，所以我的问题是，我尝试通过调用注销用户

```
facebook.setAccessToken(""); 
facebook.setAccessExpires(100); 
```

但问题是我的用户仍然没有注销，所以我像这样删除数据库

```
deleteDatabase("webview.db");
deleteDatabase("webview.db-journal");
deleteDatabase("webviewCache.db"); 
```

但仍未登出，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:27:22.063

尝试这个

```
facebook.logout(yourMainActivity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:18:41.473

您更改代码如下，以便它以编程方式注销 facebook。

```
facebook.setAccessToken(null); 
facebook.setAccessExpires(0); 
```

它对我有用，我希望它也对你有用。

# javascript - 带有 addClass/removeClass 的 jquery on()

> ID：14481831
> 
> 赞同：2
> 
> 时间：2013-01-23T14:15:04.987
> 
> 标签：javascript, jquery, ios, ipad

我有这个需要在 ipad 上运行的脚本。它正在使用 live 处理 chrome，但是，将其移至 on 会使其无响应。

任何想法，我将不胜感激！

```
$("#clickAll").on("click", function () {
    $(".welcome1poi").show();
    $(this).addClass("active");
});
$("#clickAll.active").on("click", function () {
    $(this).removeClass("active");
    $(".welcome1poi").hide();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:17:19.347

试试这个

```
$("#clickAll").on("click", function(){
    $(".welcome1poi").toggle();
    $(this).toggleClass("active");
}); 
```

**更新**

**按照建议**

```
$(document).on('click',"#clickAll", function(){
    $(".welcome1poi").toggle();
    $(this).toggleClass("active");
}); 
```

因为它与 live() 一起工作，所以我假设您的 id 元素`clickAll`是动态添加的，所以试试这个

```
$(document).on("click","#clickAll", function () {
   $(".welcome1poi").show();
   $(this).addClass("active");
});
$(document).on("click","#clickAll.active", function () {
  $(this).removeClass("active");
   $(".welcome1poi").hide();
}); 
```

您可以用`$(document)`最接近元素的`#clickAll`元素替换选择器，这将更有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:18:10.867

这会将事件委托给 ，`body`当它冒泡 DOM 时将被捕获。

```
$('body').on("click", "#clickAll", function(){
    $(".welcome1poi").show();
    $(this).addClass("active");
});
$('body').on("click", "#clickAll.active", function(){
    $(this).removeClass("active");
    $(".welcome1poi").hide();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T14:23:49.470

您是否添加和删除“活动”类以创建切换效果？如果是这样，请尝试 .toggle()，如下所示：

```
$('#clickAll).toggle(
    function() { $('.welcome1poi').show(); }, 
    function() { $('.welcome1poi').hide(); }); 
```

# android - 禁用 seekBar 而不会变暗

> ID：14481832
> 
> 赞同：7
> 
> 时间：2013-01-23T14:15:18.783
> 
> 标签：android, seekbar

在特殊情况下，我需要防止用户输入搜索栏。如果我使用`setEnabled(false)`它会变成灰色而不是白色。

是否有任何方法可以禁用 seekbar 而不会变暗或在禁用的 seekbar 中设置另一个可绘制的进度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-07T23:22:44.403

是的。有可能的！但是你需要重写 SeekBar 的 drawableStateChanged 函数，如下所示：

```
@Override
protected void drawableStateChanged() {
    super.drawableStateChanged();
    final Drawable progressDrawable = getProgressDrawable();
    if(isEnabled() == false && progressDrawable != null) progressDrawable.setAlpha(255);
} 
```

实际上，当我在 AbsSeekBar 中看到硬编码的 alpha 值时，我很生气：

```
mDisabledAlpha = a.getFloat(com.android.internal.R.styleable.Theme_disabledAlpha, 0.5f); 
```

因为没有函数会关闭，甚至改变 SeekBar 的禁用 alpha 值。看看 drawableStateChanged 函数中的那些代码行：

```
if (progressDrawable != null) {
    progressDrawable.setAlpha(isEnabled() ? NO_ALPHA : (int) (NO_ALPHA * mDisabledAlpha));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:30:58.790

我不确定您为什么要更改此设置，而且我不认为为禁用某些功能的用户覆盖视觉队列是一种好习惯。如果它看起来很活跃，但没有交互，我会为你的应用生气。

无论如何，要回答您的问题，您应该查看[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)这个[问题](https://stackoverflow.com/questions/12598638/changing-progress-drawable-of-seekbar-programatically)专门针对搜索栏概述了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-13T08:06:36.810

更好的解决方案在这里......

```
seekBar.setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return true;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-04T12:18:38.053

您可以使用`setEnabled(false)`并将`Theme_disabledAlpha`属性设置为上面提到的@Ilya Pikin，如下所示：

```
<item name="android:disabledAlpha">1.0</item> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-19T10:56:03.923

Android 在禁用状态下将颜色的 alpha 值从 255 更改为 127。只要确保在禁用搜索栏后将其设置回 255。

```
seekBar.post(new Runnable(){
    @Override
    public void run()
    {
        seekBar.getProgressDrawable().setAlpha(255);
    }
}); 
```

view.post 仅在您不确定是否已呈现 seekbar 时才需要，否则只需

```
seekBar.getProgressDrawable().setAlpha(255); 
```

足够。

# php - 使用 PHP ob_start() 缓冲输出时，最小高度 CSS 属性不起作用

> ID：14481836
> 
> 赞同：0
> 
> 时间：2013-01-23T14:15:25.737
> 
> 标签：php, css, ob-start

我实际上正在使用 MVC 结构开发一个 PHP 项目，包括在使用 ob°start() 进行输出缓冲期间通过单个文件的 DOCTYPE 和 HEAD 标记。

当我想为可能的页面容器声明一个 min-height 属性时，问题就来了，以便将页脚粘贴在页面的底部。ob_start() -- ob_get_clean() 的使用似乎禁止浏览器及时访问这些属性，因此它们无法评估高度值。

这是我的 index.php 文件：

```
<?php
include_once('global/init.php');
ob_start();
if(isset($_GET['module'])){
    $module = dirname(__FILE__).'/modules/'.htmlspecialchars($_GET['module']).'/';
    $action = (isset($_GET['action'])) ? htmlspecialchars($_GET['action']).'.php' : 'index.php';
    if(!file_exists($module.$action)){
        include('global/home.php');
    }else{
        include($module.$action);
    }
}else{
    include('global/home.php');
}
$content = ob_get_clean();
include_once('global/header.php');
echo $content;
include_once('global/footer.php'); 
```

header.php 文件包含 doctype 和 html 的第一个基础知识：

```
<html>
<head>
    <meta charset='UTF-8' />
    <title><?php echo "LiveSession".' '.DOMAIN_INFOS;?></title>
    <meta name='description' content='<?php echo $_SESSION['currentDesc'];?>' />
    <meta name='keywords' content='<?php echo $_SESSION['currentKWds'];?>' />
    <link rel='stylesheet' media='screen and (max-width:480px)' href='css/smartphones.css' />
    <!-- TABLETS -->
    <script type='text/javascript' src='scripts/jquery.1.7.js'></script>
    <script type='text/javascript' src='scripts/poll_edit.js'></script>
    <script type='text/javascript' src='scripts/smartphones.js'></script>
</head>
<body>
    <div id='page'>
        <div id='header'>
            <h1><a href='index.php'>InteractivePollSession</a></h1>
            <?php
                if(is_connected_user()){
                    echo "<span id='disconnector'><a href='index.php?module=members&amp;action=dscnx' title='disconnect'>Disconnect</a></span>";
                }
            ?>
        </div>
        <div id='contentWrap'> 
```

页脚：

```
 </div>
        <div id='footer'>
            <span id='central-footer'>&copy; <a href='http://www.jsteitgen.com'>JSTeitgen</a></span>
        </div>
    </div>
</body> 
```

还有一个基本的 CSS 示例：

```
body{height:100%;}
#page{min-height:100%; position:relative;}
#footer{position:absolute; bottom:0; width:100%;} 
```

有谁知道如何使用 ob_start() 解决这个问题？当然，除此之外，所有其他 CSS 规则都可以正常工作...

谢谢

JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:24:49.297

我认为问题出在css上；您将`body`元素的高度设置为其父元素的 100%，该`html`元素不一定具有 100% 的高度。

您应该能够使用以下方法解决您的问题：

```
html, body {
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:19:04.853

这`ob_start()`不是问题。问题只是一个 html/css 问题。如果元素的父元素具有固定高度，则只能使用百分比高度。

在您的情况下，`#page`parent 是`body`并且`body`的高度是`100%`，因此您不能使用百分比的高度`#page`。但是你可以试试这个，例如：

```
body{height: 1000px;}
#page{min-height:100%; position:relative;}
#footer{position:absolute; bottom:0; width:100%;} 
```

# android - android：每个资源我需要不同密度的副本吗？

> ID：14481839
> 
> 赞同：0
> 
> 时间：2013-01-23T14:15:42.460
> 
> 标签：android

> **可能重复：**
> [为什么要为不同的密度提供多个可绘制对象？](https://stackoverflow.com/questions/14214843/why-provide-multiple-drawables-for-various-densities)

假设我有一个启动画面，它的缩放方式总是适合全屏。打包同一图像的 4 个不同密度版本是否有意义？为什么不让android处理缩小？

另一个例子是按钮图标。为什么不只打包`xhdpi`，让安卓来做呢？是内存问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:21:51.567

> 打包同一图像的 4 个不同密度版本是否有意义？为什么不让 android 处理缩减？

这取决于您是否喜欢缩小比例的结果。如果你这样做，请使用它。如果您不这样做，请为需要的密度提供其他艺术品。

> 是内存问题吗？

部分原因是速度问题，因为下采样需要 CPU 时间（因此需要更多电池）。

部分原因是质量问题，因为 Android 的下采样意味着您无法最终控制图像的外观。您可能会对图像的下采样感到满意；其他开发人员可能对他们图像的下采样不满意。

例如，Nexus 7 是一个`-tvdpi`设备。然而，*谷歌*并不关心`-tvdpi`图像——他们让安卓对`-xhdpi`图像进行下采样。这些图像对我来说似乎是完全合理的，显然对谷歌也是如此。OTOH，Google 确实提供`-mdpi`图像，不仅用于`-mdpi`设备，而且作为`-ldpi`.

# php - 在 Cloudflare 后面获取代理背后的真实 IP？

> ID：14481840
> 
> 赞同：1
> 
> 时间：2013-01-23T14:15:42.757
> 
> 标签：php, proxy, ip, cloudflare

如果我的服务器使用 Cloudflare，我如何获取使用代理的访问者的真实 IP？

到目前为止，如果访问者在不使用代理的情况下打开我的服务器（使用 cloudflare），则此方法有效

```
isset($_SERVER["HTTP_CF_CONNECTING_IP"]) ? $_SERVER["HTTP_CF_CONNECTING_IP"] : $_SERVER["REMOTE_ADDR"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:24:10.447

你检查过 HTTP_X_FORWARDED_FOR 吗？

您可以在这里看到它的实际效果：http: [//canhazip.com/more.php](http://canhazip.com/more.php) ，它正在通过 CloudFlare。如果您也想使用代理进行测试，您可以使用该页面。

ps 免责声明：我在 CloudFlare 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T13:28:33.700

或者您可以为 Apache 安装 mod_cloudflare。

[https://www.cloudflare.com/resources-downloads#mod_cloudflare](https://www.cloudflare.com/resources-downloads#mod_cloudflare) [https://github.com/cloudflare/mod_cloudflare](https://github.com/cloudflare/mod_cloudflare)

# java - 如何在 SQLite 中使用动态表名创建表并在我的 ListView 中显示？

> ID：14481843
> 
> 赞同：0
> 
> 时间：2013-01-23T14:15:57.020
> 
> 标签：java, android, sqlite, listview

我的 android 应用程序有问题。对于我的程序：我有一个包含许多活动的应用程序，我使用 ListView 和 SQLite 数据库。如果我单击 ListView 中的一个值，我将使用该值启动另一个 Activity。如果下一个活动开始，我会收到错误消息。

LogCat 说：找不到源

这是我的代码：

```
public class ShowDayActivity extends ListActivity {

    private SQLiteDatabase mDatenbank;
    private DatenbankManager mHelper; //My Helpclass

    private static String KLASSEN_SELECT_ROW;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_show_day);

        Intent intent = getIntent();

        ((TextView)(findViewById(R.id.schultag))).setText(intent.getStringExtra("iteid")); 

        String Tablename = ((TextView)findViewById(R.id.schultag)).getText().toString();

        mHelper = new DatenbankManager(this);

        mHelper.SQL_SELECT = "SELECT name FROM "+Tablename+"";

        mHelper.SQL_CREATE = "CREATE TABLE "+Tablename+"(" +
        "_id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "name TEXT NOT NULL, " +
        "info TEXT)";
    }

    @Override
    protected void onPause() {
        super.onPause();

        mDatenbank.close();

        Toast.makeText(this, 
                getResources().getString(R.string.db_close),
                Toast.LENGTH_SHORT).show(); 
    }

    @Override
    protected void onResume() {

        super.onResume();

        mDatenbank = mHelper.getReadableDatabase(); 

        Toast.makeText(this, 
                getResources().getString(R.string.db_open),
                Toast.LENGTH_SHORT).show(); 

        ladeDaten();
    }

    public void addNew(View view)
    {
        EditText et = (EditText)findViewById(R.id.fach_name);

        ContentValues werte = new ContentValues();
        werte.put("name",et.getText().toString());

        String tbname = mHelper.TBNAME;

        mDatenbank.insert(tbname, null, werte);

        Toast.makeText(this, 
                getResources().getString(R.string.add),
                Toast.LENGTH_SHORT).show(); 

        ladeDaten();
        et.setText("");

    }

    private void ladeDaten() {
String tbname = mHelper.TBNAME;

        KLASSEN_SELECT_ROW = "SELECT name FROM "+tbname+"";

        Cursor KlassenCursor = mDatenbank.rawQuery(KLASSEN_SELECT_ROW, null); 
        startManagingCursor(KlassenCursor);

        android.widget.SimpleCursorAdapter KlassenAdapter = new android.widget.SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1, 
                KlassenCursor, 
                new String[] {"name"},
                new int[] {
                android.R.id.text1
                });

        setListAdapter(KlassenAdapter);
    } 
```

我对此活动的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#111111"
    android:baselineAligned="false"
    android:orientation="vertical" >

     <TextView
        android:id="@+id/schultag"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="10dp"
        android:text="@string/schultag_titel"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#E1E1E1" />

        <EditText
            android:id="@+id/fach_name"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="0dp"
            android:ems="10"
            android:hint="Bitte Fach eingeben" >

            <requestFocus />
        </EditText>

        <Button
            android:layout_width="80dp"
            android:layout_height="40dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/btn_default_normal_holo_light"
            android:drawableLeft="@drawable/icon_ok"
            android:text="@string/plus"
            android:onClick="addNew"
            ></Button>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:text="Tag"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#19630F"
        android:textSize="22sp" />

    <ListView
        android:id="@android:id/android:list"
        android:layout_width="250dp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:layout_height="wrap_content"
        android:textColor="#19630F"
        android:layout_gravity="center" >

    </ListView>

</LinearLayout> 
```

# ajax - 如何使用 Razor 和 Ajax 使用下拉列表

> ID：14481845
> 
> 赞同：0
> 
> 时间：2013-01-23T14:16:01.360
> 
> 标签：ajax, asp.net-mvc-3, razor, asp.net-ajax

我有一个可以正常工作的 ajax 函数

```
$.ajax({
              type: "POST",
              url: urlemp,
              success: function (returndata) {
                  if (returndata.ok) {
                    //  var data = eval("" + returndata.data + "");
                      select.empty();
                      $.each(returndata.data, function (rec) {

                          select.append($('<option>' + returndata.data[rec].Name + '</option>'));
                      });
                      select.show('slow');
                      select.change();
                  }
                  else {
                      window.alert(' error : ' + returndata.message);
                  }

              }
          }
          ); 
```

在视图中我使用这个选择器代码

```
<select id="cmbDept" onload="javascript:cascadingdropdown()"> 
        </select> 
```

现在我想将此选择器的代码更改为 Razor 类型，例如 @Html.xxxx 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:35:44.230

尝试这样的事情：

```
 public class NamesViewModel
  {
    public string SelectedName { get; set; }
    public IEnumerable<SelectListItem> Name { get; set; }
   } 
```

控制器：

```
 public class HomeController : Controller
  {
     public ActionResult Index()
     {
      var model = new NamesViewModel();
       // TODO: obviously those will come from your database
      model.Names = new[]
      {
        new SelectListItem { Value = "1", Text = "Mary" },
        new SelectListItem { Value = "2", Text = "Joan" },
        new SelectListItem { Value = "3", Text = "Lisa" },
      };

      // Preselect the option with Value = "Mary"
      // Make sure you have such option in the NAmes list
       model.SelectedName = "Mary";
       return View(model);
      }
      }

     View (~/Views/Home/Index.cshtml):

     @model NamesViewModel

    @Html.DropDownListFor(
        x => x.SelectedName,
       Model.Name, 
       "Select Name"
     ) 
```

# extjs - 基于项目数的sencha touch中数据视图列表的高度

> ID：14481847
> 
> 赞同：1
> 
> 时间：2013-01-23T14:16:13.420
> 
> 标签：extjs, sencha-touch-2

我需要根据项目数调整 sencha touch 中数据视图列表的高度。到目前为止我所做的只是该列表中的这些配置

```
 config: {
        fullscreen: true,
         height:'100%'
   store: 'CategoryListStoresecond',
        loadingText: "Loading ...",
        emptyText: "<div>No items found.</div>",
        onItemDisclosure: true,
        grouped: false,
        itemTpl : '<div id="{Name}"> <img src="{Image}" /> <!--<h2>{Name}</h2>--!><p>{Name}</p></div>',
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T02:57:37.147

我想你可以这样做

```
var store = list.getStore();

store.load( { callback: function(records, operation, success) {
    list.setHeight({items.height} * records.length);
}); 
```

我做到了，它有效。但我认为你必须确保没有太多记录。并且列表不可滚动。

无需在您的情况下设置全屏和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:00:01.453

如果您想要[http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-cfg-maxHeight ，可以尝试使用 maxHeight 和 minHeight](http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-cfg-maxHeight)

此外，如果它覆盖内部`vbox`布局，您可以使用它`flex`来控制高度。

# html - JSTL 迭代地图

> ID：14481848
> 
> 赞同：1
> 
> 时间：2013-01-23T14:16:14.370
> 
> 标签：html, map, jstl, iteration, custom-tags

我正在使用 JSTL 从 bean 类中获取值。从 bean 类获得的值将是**java.util.Map**。通过以下代码成功获取值：

```
<c:forEach items="${bean.map}" var="item">  
  <c:out value="${item.key}"/> = <c:out value="${item.value}"/><br/>  
</c:forEach> 
```

获得键值对后，我需要创建一个 4 行 7 列的表。地图 ：

```
map.put(2, true);
map.put(18, true); 
```

地图中的键将是 1-28，值将是 TRUE 或 FALSE 。

如果键为 2 且值为 TRUE ，则​​需要在表的 (1,2) 中打勾，即：第 1 行第 2 列。

同样，如果key是18，需要在表的(3,4)处打勾。

```
 <table border="1" width="100%">
         <tr>
         <th>1</th>
         <th>2</th>
         <th>3</th>
         <th>4</th>
         <th>5</th>
         <th>6</th>
         <th>7</th>
        </tr>
        <c:forEach items="${bean.map}" var="item" >
        <tr>
       <td><c:out value="${item.value}"/></td>
        </tr>
        </c:forEach>
        </table> 
```

我不知道如何进一步进行，因为我仅限于使用 JSTL 并且是 JSTL 的新手。不允许使用 javascript 或 jquery，这让生活变得轻松。

请给我一些建议以进一步进行。任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:30:58.570

使用 Java 代码在控制器中将条目拆分为行，而不是希望在视图中使用 JSTL。这是可能的，但在 Java 中做这一切都会变得更容易。

并且使用映射来包含从 1 到 28 的键有点奇怪。为什么不只使用 28 个布尔值的列表？

```
/**
 * Returns a list of 4 lists of booleans (assuming the map contains 28 entries going 
 * from 1 to 28). Each of the 4 lists contaisn 7 booleans.
 */
public List<List<Boolean>> partition(Map<Integer, Boolean> map) {
    List<List<Boolean>> result = new ArrayList<List<Boolean>>(4);
    List<Boolean> currentList = null;
    for (int i = 1; i <= 28; i++) {
        if ((i - 1) % 7 == 0) {
            currentList = new ArrayList<Boolean>(7);
            result.add(currentList);
        }
        currentList.add(map.get(i));
    }
    return result;
} 
```

在您的 JSP 中：

```
<table border="1" width="100%">
    <tr>
         <th>1</th>
         <th>2</th>
         <th>3</th>
         <th>4</th>
         <th>5</th>
         <th>6</th>
         <th>7</th>
    </tr>
    <c:forEach items="${rows}" var="row">
        <tr>
            <c:forEach items="row" var="value">            
                <td><c:out value="${value}"/></td>
            </c:forEach>
        </tr>
    </c:forEach>
</table> 
```

# curl - 如何从命令行发送 HTTP OPTIONS 请求？

> ID：14481850
> 
> 赞同：104
> 
> 时间：2013-01-23T14:16:24.103
> 
> 标签：curl, wget

我尝试使用 cURL，但默认情况下（Debian）似乎没有使用 HTTPS 支持编译，我不想自己构建它。

`wget`似乎有 SSL 支持，但我没有找到有关如何使用 wget 生成 OPTIONS HTTP 请求的信息。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-01-23T21:23:45.790

很久以前，Debian 中默认安装的 curl 支持 HTTPS。（很久以前有两个单独的包，一个有 SSL，一个没有 SSL，但现在已经不是这样了）

## 选项/路径

您可以像这样使用 curl 发送 OPTIONS 请求：

```
curl -i -X OPTIONS http://example.org/path 
```

您也可以使用`-v`而不是`-i`查看更多输出。

## 选项 *

要使用 OPTIONS 方法发送纯 * （而不是路径，请参阅[RFC 7231](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.7)），您需要 curl 7.55.0 或更高版本，因为您可以运行如下命令行：

```
curl -i --request-target "*" -X OPTIONS http://example.org 
```

# java - 我们能找到带有对象引用的 Unix Pid 吗？

> ID：14481852
> 
> 赞同：0
> 
> 时间：2013-01-23T14:16:27.367
> 
> 标签：java, unix, object, implicit-conversion

我遇到过需要从对象描述中找出 Unix 进程 pid 的情况。

例如：-我有一个在 unix 中从创建新进程的 java 代码运行的脚本。

当这是从java代码打印出来时，我得到类似的东西

```
java.lang.UNIXProcess@87cbde 
```

从上面可以很明显地看出，该对象是指一个 UNIXProcess。

是否可以借助此对象描述在 UNIX 中找到此进程的 PID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:38:19.607

> 是否可以借助此对象描述在 UNIX 中找到此进程的 PID？

简单的答案是否定的。没有办法。

首先，那个“描述符”只是默认实现的输出`toString()`。它由对象的类名和它的“身份哈希码”组成。它不编码对象的状态。

身份哈希码是一个值，*通常*根据第一次调用该方法时对象的地址计算得出。然而：

*   它是一个 32 位（最大值）值，不能在 64 位 JVM 上编码完整的 64 位地址，

*   该对象可能不再位于计算身份哈希码时的相同地址，并且

*   您不能在纯 Java 中将机器地址转换为 Java 引用（反之亦然）。（如果你弄错了，即使使用非纯 Java 技巧也可能会给你带来 JVM 稳定性问题。）

但是，如果您有对象的对象引用`UnixProcess`，则应该可以使用反射在其私有字段中四处寻找并挖掘出 UNIX pid 值。

# php - 通过 access_token 在 Github 上的 Private Repo 中读取文件的原始内容

> ID：14481853
> 
> 赞同：2
> 
> 时间：2013-01-23T14:16:28.977
> 
> 标签：php, github, repository, github-api

我正在尝试检索 Github 上私有存储库的 README.rm 文件的原始内容。

我非常接近，目前唯一的问题是我正在取回 401 未经授权的结果。

目前，我正在尝试使用以下方法检索文件：

```
 $query = $this->config['raw_url']  . '/README.md?login=chriscct7&token='.$this->config['access_token'] ;
        //$query = add_query_arg( array( 'access_token' => $this->config['access_token'] ), $query );
        $query = $query.'&token_type=bearer';
        $raw_response = wp_remote_get( $query, array( 'sslverify' => $this->config['sslverify'] ) );
        var_dump($query, $raw_response); 
```

这使得 url 类似于 `https://raw.github.com/chriscct7/Testplugin/master/README.md?login=chriscct7&token=e590999c1680dba1bcd5488658fa570eb6cbf53e&token_type=bearer`

随着回邮：

```
array (size=5)
  'headers' => 
    array (size=16)
      'date' => string 'Wed, 23 Jan 2013 13:58:50 GMT' (length=29)
      'server' => string 'GitHub.com' (length=10)
      'content-type' => string 'text/html; charset=utf-8' (length=24)
      'status' => string '401 Unauthorized' (length=16)
      'x-ratelimit-remaining' => string '100' (length=3)
      'x-runtime' => string '12' (length=2)
      'x-ratelimit-limit' => string '100' (length=3)
      'content-length' => string '1' (length=1)
      'accept-ranges' => string 'bytes' (length=5)
      'age' => string '0' (length=1)
      'via' => string '1.1 varnish' (length=11)
      'x-served-by' => string 'cache-c32-CHI' (length=13)
      'x-cache' => string 'MISS' (length=4)
      'x-cache-hits' => string '0' (length=1)
      'cache-control' => string 'no-cache' (length=8)
      'connection' => string 'close' (length=5)
  'body' => string ' ' (length=1)
  'response' => 
    array (size=2)
      'code' => string '401' (length=3)
      'message' => string 'Unauthorized' (length=12)
  'cookies' => 
    array (size=0)
      empty
  'filename' => null 
```

访问令牌是使用[提供的 OAuth](http://developer.github.com/v3/oauth/)示例生成的。我已经检查过了，我在 Github 上的应用确实可以访问我的私人存储库。

现在，我知道我的方法有效，因为如果我使用我的个人登录令牌：

```
$query = 'https://raw.github.com/chriscct7/Testplugin/master/README.md?login=chriscct7&token=e4d293652a9081d79e582984a3f32dc7';
$raw_response = wp_remote_get( $query, array( 'sslverify' => $this->config['sslverify'] ) ); 
```

这有效，并且可以很好地返回文件的内容。请注意，出于安全原因，我没有在上面的代码中使用我的真实令牌。

但是，我需要使用应用程序的 access_token 来完成这项工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T14:42:33.173

这需要使用GitHub 提供的[Repo 内容 API来处理。](http://developer.github.com/v3/repos/contents)文件内容将采用 base64 格式，并带有 API 的响应。

# smtp - IIS 6 smtp 消息卡在 inetpub/mailroot/queue

> ID：14481867
> 
> 赞同：1
> 
> 时间：2013-01-23T14:17:24.040
> 
> 标签：smtp, iis-6

当我尝试向 yahoo.com、msn.com 等域发送电子邮件时，我看到这些消息存储在 inetpub/mailroot/queue 中，并且没有转发到相应的地址。

我设置了不需要身份验证，并在中继选项卡中选择了允许成功通过身份验证的计算机中继...

我的问题是：为什么将消息保留在 ../queue 中？我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:33:41.613

这几天我一直在处理类似的问题，最后我停止了 smtp，清除了队列，然后重新启动了 smtp。现在看来它正在工作。

# actionscript-3 - 更改圆的颜色

> ID：14481869
> 
> 赞同：0
> 
> 时间：2013-01-23T14:17:27.297
> 
> 标签：actionscript-3, apache-flex, flex4

我有以下课程，代表一个红色圆圈：

```
public class AElement extends UIComponent {

    public var radius:int;

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
        graphics.beginFill(0xFF0000);
        graphics.drawCircle(x, y, radius);
        graphics.endFill();
    }

} 
```

我想添加一个改变圆圈颜色的方法，所以我想出了这个解决方案：

```
 public function updateColor(color:uint):void {
        graphics.beginFill(color);
        graphics.drawCircle(x, y, radius);
        graphics.endFill();
    } 
```

它有效，但我相信这只会在第一个圆圈之上绘制另一个圆圈。

有没有办法改变第一个圆圈的颜色而不是画另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:22:02.977

在开始绘图之前调用[**.clear()**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#clear%28%29)

```
public function updateColor(color:uint):void {
    graphics.clear();
    graphics.beginFill(color);
    graphics.drawCircle(x, y, radius);
    graphics.endFill();
} 
```

然后你可以用新的颜色重新绘制。

编辑：

要更改对象的颜色，您可以使用[ColorTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html)：

```
myDisplayObject.transform.colorTransform = new ColorTransform(0, 0, 0, 0, r, g, b, a); 
```

其中 r,g 和 b 是颜色的红色、绿色和蓝色部分，a 是 alpha 值（都在 0-255 之间）。例如：

```
public function updateColor(color:uint):void {
    var a:int = (color&0xFF000000)>>24;
    var r:int = (color&0x00FF0000)>>16;
    var g:int = (color&0x0000FF00)>>8;
    var b:int = (color&0x000000FF);
    this.transform.colorTransform = new ColorTransform(0, 0, 0, 0, r, g, b, a);
} 
```

或者对于没有 alpha 的颜色：

```
public function updateColor(color:uint):void {
    var r:int = (color&0xFF0000)>>16;
    var g:int = (color&0x00FF00)>>8;
    var b:int = (color&0x0000FF);
    this.transform.colorTransform = new ColorTransform(0, 0, 0, 0, r, g, b, 255);
} 
```

但是，这会影响整个显示对象和任何子对象——而不仅仅是绘制到图形上的任何内容。因此，假设您的类包含其他视觉对象，您最好坚持使用 clear() 选项（恕我直言）。

# ios - 广告布局错误地从模态打开

> ID：14481872
> 
> 赞同：0
> 
> 时间：2013-01-23T14:17:36.263
> 
> 标签：ios, ipad, modal-dialog, admob

我已经接管了 iPad 应用程序的开发并将 AdMob 添加到其中，除了广告打开时的一个布局问题之外，这一切都正常工作，我相信这可能与它从模式窗口打开有关。

广告打开前一个窗口中的一些内容，它覆盖状态栏，并在底部留下一个与状态栏高度相同的空间。我以与其他人相同的方式添加此广告，其工作方式...

```
GADAdSize customAdSize = GADAdSizeFromCGSize(CGSizeMake(300, 50));
adView = [[DFPBannerView alloc] initWithAdSize:customAdSize];
adView.adUnitID = @"xxxxxxxxxxxx";
adView.rootViewController = self;
[self.view addSubview:adView];
[adView setDelegate: self]; 
```

有什么想法可以解决这个问题，而不需要重组应用程序，所以前一个不是模式窗口？ ![这是广告打开时的样子](../Images/f8a74bc7c47ec7c8fbd8d3901671184b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:29:14.703

在显示初始模式视图之前是否隐藏状态栏？我知道如果您这样做，AdMob 的点击模式通常会变得不合适。

确保在显示第一个模态时，您也没有在定位方面做任何其他奇怪的事情。

# android - Android 地图 - 限制在 180 度

> ID：14481875
> 
> 赞同：6
> 
> 时间：2013-01-23T14:17:43.183
> 
> 标签：android, google-maps, android-mapview

我可以将 Google Maps V2 (Android) 限制在 180° / -180° 经度（如 iOS MapKit）吗？我不希望它环绕，因为我正在尝试实现一个 clusterin 算法，而 180 / -180 度的分割会使它变得困难。

我希望将平移限制在红线：

![在此处输入图像描述](../Images/a7e04df5e194a659a7e6157063df51b5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:53:49.927

所以我创建了一个应该没问题的解决方案。如果用户将地图平移到 -180 / 180 边界，则地图将翻转到另一侧。所以包裹地图仍然是可能的，但永远不会显示“危险”区域。

我必须创建一个自定义 MapView：

```
public class CustomMapView extends MapView {

    private double prevLongitude;

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        boolean retVal = correctCamera();
        prevLongitude = getMap().getCameraPosition().target.longitude;
        return retVal;
    }

    public boolean correctCamera() {    
        if (getMap().getProjection().getVisibleRegion().latLngBounds.northeast.longitude < getMap().getProjection().getVisibleRegion().latLngBounds.southwest.longitude) {
            double diff = getMap().getProjection().getVisibleRegion().latLngBounds.southwest.longitude - getMap().getProjection().getVisibleRegion().latLngBounds.northeast.longitude;
            double longitudeSW;
            double longitudeNE;

            double longitudeDiff = (360-diff) / 25; 

            // use > 0 if you want the map to jump to the other side
            // <= 0 will cause the map to flip back
            if (prevLongitude > 0) {
                longitudeSW = -180 + longitudeDiff;
                longitudeNE = -180 + longitudeDiff - diff;
            } else {
                longitudeSW = 180 - longitudeDiff + diff;
                longitudeNE = 180 - longitudeDiff;
            }
            LatLngBounds bounds = new LatLngBounds(
                                        new LatLng(getMap().getCameraPosition().target.latitude, longitudeSW), 
                                        new LatLng(getMap().getCameraPosition().target.latitude, longitudeNE)
                                  );
            getMap().animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 0));

            return true;
        }

        return false;
    }
} 
```

和xml：

```
<com.ieffects.clustermap.CustomMapView
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

对于 GoogleMap (mapView.getMap())：

```
map.setOnCameraChangeListener(new OnCameraChangeListener() {
    @Override
    public void onCameraChange(CameraPosition position) {
        mapView.correctCamera();
    }
}); 
```

如果用户让地图“飞”到危险区域，则需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:00:58.073

请参阅本教程`v2`：[http](http://econym.org.uk/gmap/range.htm) ://econym.org.uk/gmap/range.htm - 基本上，您为移动事件添加一个侦听器，如果超出范围则中止移动。这也应该适用于`v3`。

# php - 如何使用 php 或 Javascript 嵌入网页

> ID：14481876
> 
> 赞同：0
> 
> 时间：2013-01-23T14:17:49.773
> 
> 标签：php, javascript

我有一个网页，我想在另一台服务器上嵌入一个外部网页，但我不想要任何框架栏，并希望使用 Php 或 Javascript 来做到这一点。我正在构建的网站是使用 php 构建的。

我试过了

```
<?php
$remote = fopen("http://www.myotherwepage.com/apage", "r");
fpassthru($remote);
?> 
```

但无法正确加载，不会加载图像，也不会加载样式。

这是我要嵌入的页面

[http://brands.datahc.com/?languageCode=EN](http://brands.datahc.com/?languageCode=EN)

我在上面有自己的（包括）导航，在下面有（包括）页脚。它需要为用户扩展和重新占用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:24:44.307

只需添加一个`iframe`元素，然后使用 CSS 对其进行样式设置。您可以使用 jQuery 或 vanilla JS 来操纵它的大小。

这样，您无需担心修复任何损坏或相关的链接。例如，以下代码将关闭滚动条`iframe`：

```
<iframe src="http://brands.datahc.com/?languageCode=EN" srcolling="no"></iframe> 
```

您可以反过来实现以下一些功能 > [http://css-tricks.com/cross-domain-iframe-resizing/](http://css-tricks.com/cross-domain-iframe-resizing/)。这也将确保 iframe 根据其内容调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:25:45.790

问题是网站上的所有图像都嵌入了相对路径。

当您嵌入网站示例时。**com**引用图像[http://example.com/image.jpg](http://example.com/image.jpg)，其源代码仅读取`src="image.jpg"`. 然后，当您将该网站的源代码集成到示例中时。**org**，图像将在[http://example.org/image.jpg](http://example.org/image.jpg)上搜索它不存在的地方。

作为解决方案，您可以

*   使用 HTML 解析器重写所有相关链接和图像路径，或
*   使用您网站中[的 HTML`<base>`元素](https://developer.mozilla.org/en/docs/HTML/Element/base)`<head>`并将其设置为您要嵌入的页面的 url。这样，用户的网络浏览器会将所有相对 URL 解释为相对于嵌入页面，而不是您自己页面的 url。

# batch-file - 使用“mstsc /admin”和密码登录到远程

> ID：14481882
> 
> 赞同：18
> 
> 时间：2013-01-23T14:17:58.537
> 
> 标签：batch-file, remote-desktop, mstsc

我想用`mstsc /admin`静默方式登录服务器。我的批处理文件将代码读取为

```
mstsc /v:xxx.xxx.xxx.xxx /admin 
```

但它要求我输入密码。谁能帮我跳过这一步？

我去了谷歌，找到[了这个网站](http://www.poshpete.com/powershell/passing-username-and-passwords-to-remote-desktop-rdp-automatically)。但我对这些东西（脚本）很陌生，无法理解如何处理给定的代码。是`vbscript`文件吗？我可以用批处理文件做同样的事情吗？请详细说明，我请您用勺子喂食。这不是我的竞技场，但我仍然被迫在没有武器的情况下战斗。

我的基本需求是从远程桌面启动除我之外的所有用户以执行一些可维护的工作。谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-12-05T03:35:29.873

重新发布为答案：找到替代方案（在 Win8 中测试）：

```
cmdkey /generic:"<server>" /user:"<user>" /pass:"<pass>" 
```

运行它，如果你运行：

```
mstsc /v:<server> 
```

您不应收到身份验证提示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-22T19:16:04.903

Milad 和 Sandy 发布的命令不适用于 mstsc。我不得不将 TERMSRV 添加到 /generic 开关。我在这里找到了这些信息：[https ://gist.github.com/jdforsythe/48a022ee22c8ec912b7e](https://gist.github.com/jdforsythe/48a022ee22c8ec912b7e)

`cmdkey /generic:TERMSRV/<server> /user:<username> /pass:<password>`

然后我可以在`mstsc /v:<server>`不提示登录的情况下使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-29T04:41:32.550

为了安全起见，您应该执行 3 个命令：

```
cmdkey /generic:"server-address" /user:"username" /pass:"password"
mstsc /v:server-address
cmdkey /delete:server-address 
```

保存凭证的第一个命令

打开远程桌面的第二个命令

以及出于安全原因删除凭据的第三条命令

所有这些命令都可以保存在批处理文件（bat）中。（如果将这些命令保存在批处理文件中，则在关闭远程桌面之前不会执行第三个命令）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-07T06:50:13.507

同样的问题，但@Angelo 的答案对我不起作用，因为我使用的是具有不同凭据的同一服务器。我使用下面的方法并在 Windows 10 上对其进行了测试。

`cmdkey /add:server01 /user:<username> /pass:<password>`

然后用来`mstsc /v:server01`连接服务器。

关键是使用名称而不是 IP 地址来避免凭据之间的冲突。如果您没有本地可访问的 DNS 服务器尝试`c:\windows\system32\drivers\etc\hosts`文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-07T06:55:32.950

这成了一个热门问题，我收到了通知。对不起，我忘了回答之前我应该​​做的。我很久以前就解决了。

```
net use \\10.100.110.120\C$ MyPassword /user:domain\username /persistent:Yes 
```

在批处理文件中运行它，你应该得到你正在寻找的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T14:23:05.557

将您的用户名、密码和服务器名称保存在 RDP 文件中，然后从您的脚本运行 RDP 文件

# macos - OSX Snow leopard 上的 Laravel htaccess 问题

> ID：14481886
> 
> 赞同：0
> 
> 时间：2013-01-23T14:18:15.497
> 
> 标签：macos, .htaccess, laravel

我在我的 OSX 设置中遇到了 Laravel 的 htaccess 文件的问题。我一直在 WAMP 上完美地运行应用程序，但是当我转移到我的 Mac 时，我开始遇到问题。

htaccess 是默认的

```
 # Apache configuration file
    # http://httpd.apache.org/docs/2.2/mod/quickreference.html

    # Note: ".htaccess" files are an overhead for each request. This logic should
    # be placed in your Apache config whenever possible.
    # http://httpd.apache.org/docs/2.2/howto/htaccess.html

    # Turning on the rewrite engine is necessary for the following rules and
    # features. "+FollowSymLinks" must be enabled for this to work symbolically.

     <IfModule mod_rewrite.c>
        Options +FollowSymLinks
        RewriteEngine On
     </IfModule>

    # For all files not found in the file system, reroute the request to the
    # "index.php" front controller, keeping the query string intact

     <IfModule mod_rewrite.c>
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php/$1 [L]
     </IfModule> 
```

我正在使用 V-Hosts 来获得 XXXXXXX.laravel URL。

我已将 URL 添加到我的配置文件中，并将索引留空。

每次我访问主页 XXXXXXX.laravel 我都会得到主页，但是当我导航到 XXXXXXX.laravel/test 时，我会得到 404。

如果我尝试 XXXXXXX.laravel/index.php/test 它工作正常。

如果我将 index.php 添加到配置文件中的索引，它只是将 index.php 附加到我的链接中。

有任何想法吗？？谢谢亚当，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:56:35.657

打开 Apache **httpd.conf**并检查你是否打开了**mod_rewrite**

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

并没有像这样关闭

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T14:43:14.750

我有同样的问题，并通过将 rewrite conf 放在`<Directory />`虚拟主机的 apache conf 文件块中来解决它。我正在使用 Laravel 4。

# sql - SQL 查询：无法对子查询执行聚合函数

> ID：14481887
> 
> 赞同：0
> 
> 时间：2013-01-23T14:18:16.153
> 
> 标签：sql

我有以下 SQL 查询

```
SELECT
   [Date], 
   DATENAME(dw,[Date]) AS Day, 
   SUM(CASE WHEN ChargeCode IN (SELECT ChargeCode FROM tblChargeCodes WHERE Chargeable = 1) THEN Units ELSE 0 END) ChargeableTotal,
   SUM(CASE WHEN ChargeCode IN (SELECT ChargeCode FROM tblChargeCodes WHERE Chargeable = 0) THEN Units ELSE 0 END) NotChargeableTotal,
   SUM(Units) AS TotalUnits
FROM 
   tblTimesheetEntries 
WHERE 
   UserID = 'PJW' 
   AND Date >= '2013-01-01' 
GROUP BY 
   [Date] 
ORDER BY 
   [Date] DESC; 
```

但我收到错误消息：

> *无法对包含聚合或子查询的表达式执行聚合函数。*

因为我在 Case Else Summation 中使用子查询。

如何修改我的查询以获得 [Units] 的 2 个总和，一个用于 Chargeable = true，一个用于 Chargeable = false，即使 Chargeable 字段与所有其他信息位于不同的表中。这两个表由出现在 tblTimesheetEntries 和 tblChargeCodes 中的 ChargeCode 链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:22:05.817

您是否尝试过加入以下表格`chargeCode`：

```
SELECT e.[Date], 
  DATENAME(dw,e.[Date]) AS Day, 
  SUM(CASE WHEN c.Chargeable = 1 THEN e.Units ELSE 0 END) ChargeableTotal,
  SUM(CASE WHEN c.Chargeable = 0 THEN e.Units ELSE 0 END) NotChargeableTotal,
  SUM(e.Units) AS TotalUnits
FROM tblTimesheetEntries e
LEFT JOIN tblChargeCodes c
  on e.ChargeCode = c.ChargeCode
WHERE e.UserID = 'PJW' 
  AND e.Date >= '2013-01-01' 
GROUP BY e.[Date] 
ORDER BY e.[Date] DESC; 
```

# php - 不能将类对象与其他类一起使用

> ID：14481888
> 
> 赞同：0
> 
> 时间：2013-01-23T14:18:16.170
> 
> 标签：php, oop, class, static-methods

我有 2 个 PHP 类，我想相互使用，但是 2 个不同的 PHP 脚本中的类，比如clothing_product.php 和 database.php。如下所示：

数据库.php：

```
require_once('config.php');

class MySqlDatabase
{
    private $connection;
    private $last_query;
    private $magic_quotes_active;
    private $real_escape_string_exist;

        function __construct(){
            $this->open_connection();
            $this->magic_quotes_active = get_magic_quotes_gpc();
            $this->real_escape_string_exist = function_exists("mysql_real_escape_string");

        }

        private function open_connection()
        {

            $this->connection = mysql_connect(DB_SERVER,DB_USER,DB_PASS);
            if (!$this->connection){
                die("Connection failed!". mysql_error());
            }
            else{
                $db_select = mysql_select_db(DB_NAME);
                if(!$db_select){
                    die("Select database failed". mysql_error());
                }
            }

        }

        public function query($sql){

            $this->last_query = $sql;
            $result = mysql_query($sql,$this->connection);

            $this->confirm_query($result);
            return $result;

        }

        public function confirm_query($result){
            if(!$result){
                $output = "Database query failed: " . mysql_error()."<br /><br />";
                $output.= "Last query that fail is:" . $this->last_query;
                die($output);
            }
        }

        private function escape_value($value) {

            if ($this->real_escape_string_exist) {
                if($this->magic_quotes_active) {$value = stripslashes($value);}
                $value = mysql_real_escape_string($value);
            }
            else {
                if (!$this->magic_quotes_active) {$value = addslashes($value);}
            }
            return $value;
        }

        public function fect_array($result){
            return mysql_fetch_array($result);
        }

        public function num_rows($result){
            return mysql_num_rows($result);
        }

        public function last_id(){
            return mysql_insert_id($this->connection);
        }

        public function affected_rows(){
            return mysql_affected_rows($this->connection);
        }

        public function close_connection(){
            if(isset($this->connection)){
                mysql_close($this->connection);
                unset($this->connection);
            }
        }

}

//$db = new MySqlDatabase(); 
```

服装产品.php：

包括（'../database.php'）；

```
class Clothing_Product {

    public $db = new MySqlDatabase();

        public static function test(){
            echo "Static call successfull";
            return "Static call successfull";
        }

    } 
```

问题是当我尝试使用'Public $db = new MySqlDatabase();' 在类clothing_product 我得到错误。我认为问题可能是我打错电话了。请帮助我，因为我是菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:21:53.477

您不能将成员变量初始化为非静态的任何内容，并且您正在尝试在此处创建一个对象：

```
public $db = new MySqlDatabase(); 
```

从[手册](http://www.php.net/manual/en/language.oop5.properties.php)：

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

解决方法是在构造函数中设置变量：

```
public $db;
public function __construct() { 
    $this->db = new MySqlDatabase();
} 
```

# iphone - 在 Titanium iOS 模块中添加子视图

> ID：14481895
> 
> 赞同：0
> 
> 时间：2013-01-23T14:18:36.520
> 
> 标签：iphone, ios, titanium, titanium-modules

我在 Titanium 中创建了 iOS 模块。这个模块包括我自己用原生目标 c 编写的框架。一切看起来都很好，但有一个问题。我通过模块从我的框架移植的方法之一，采用 UIView 并将另一个 uiview 作为子视图添加到它。这个子视图包含一个带有 UIButton 的 UIView。问题是有时子视图出现在屏幕上但按钮上没有标签，我必须单击按钮，然后出现标签。但在某些情况下（这取决于我何时从 javascript 中的模块调用此方法），子视图根本没有出现，但它实际上存在，因为当我点击它应该在的位置时，按钮的单击事件处理程序正在叫。我不知道出了什么问题（也许有层）。当我在本机 ios 应用程序中使用我的框架时，一切正常。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:14:37.843

必须在主线程上添加子视图，所以我使用了一种方法：

```
[self performSelectorOnMainThread: withObject: waitUntilDone:]; 
```

现在一切看起来都很完美。

# c# - 如何从 PDF 文件中获取“目录”并将其保存到树结构中？

> ID：14481897
> 
> 赞同：-6
> 
> 时间：2013-01-23T14:18:39.730
> 
> 标签：c#, asp.net, pdf, aspose, tableofcontents

![我的意思是这是目录](../Images/63cba8893ceefb95ff2c558315e87e2c.png)

我真的需要从 pdf 文件中获取目录。在 C# asp.net 中使用 Aspose.pdf.dll

我的问题是：

1.  它是什么页面（每个项目）？
2.  目录中每个项目的每个页面的文本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:06:06.540

Aspose.Pdf.Generator 命名空间仅支持在生成新 PDF 时创建 TOC 的功能，而 Aspose.Pdf for .NET 不支持在现有 PDF 文件中操作 TOC 的功能。但是为了实施，在问题跟踪系统中添加了要求作为**PDFNEWNET-34836**。一旦新功能可用，我们将能够获得与 TOC 中每个项目相关的信息。

*PS，我的名字是 Nayyer，我是 Aspose 的宣传员/支持开发人员。*

# sql - 使用 SQL 查找最大总数

> ID：14481900
> 
> 赞同：1
> 
> 时间：2013-01-23T14:18:45.437
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 数据库中有两个 SQL 表，如下所示：

```
Customer
--------
ID
Name

Order
-----
ID
CustomerID
Total 
```

我需要弄清楚客户下的最多订单数量。在这一点上，我已经到了这里：

```
SELECT MAX([OrderCount]) FROM (
  SELECT COUNT(o.[ID]) as 'OrderCount'
  FROM [Order] o 
  GROUP BY o.[CustomerID]
) 
```

当我执行此语句时，我收到一条消息，提示“')' 附近的语法不正确”。我的子查询有效。这意味着问题出在 SELECT MAX([OrderCount]) 上，但对我来说一切看起来都是正确的（当然，我不是 sql 高手）。我在这里做错了什么？我是否正确地攻击了这个 sql 查询？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:19:53.443

你基本上在那里：

```
SELECT MAX([OrderCount]) FROM (
  SELECT COUNT(o.[ID]) as 'OrderCount'
  FROM [Order] o 
  GROUP BY o.[CustomerID]
) t 
```

最后需要别名。

没有子查询的另一种编写方法是：

```
 SELECT top 1 COUNT(o.[ID]) as OrderCount
  FROM [Order] o 
  GROUP BY o.[CustomerID]
  order by OrderCount desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:12:45.080

OVER 子句的另一种选择

```
SELECT TOP 1 MAX(COUNT(o.[ID])) OVER() AS OrderCount
FROM [Order] o
GROUP BY o.[CustomerID] 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/611bf/1/0)上的演示[](http://sqlfiddle.com/#!3/611bf/1/0)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:24:44.553

或者你可以这样做：

```
SELECT max(COUNT(o.[ID])) as 'OrderCount'
FROM [Order] o  
GROUP BY o.[CustomerID] 
```**

# java - Eclipsify 不适用于 Play v1.2.5

> ID：14481901
> 
> 赞同：1
> 
> 时间：2013-01-23T14:18:50.003
> 
> 标签：java, playframework, playframework-1.x

我能够在 Play Framework v1.2.5 中成功创建新应用程序，但无法使新创建的项目黯然失色。

该项目的名称是`firstApp`，它是在 中创建的`F:\PlayWOrkspace`。

因此，现在的目录结构是：`F:\PlayWOrkspace\firstApp`. firstAPP 目录包含所有子文件夹，例如 app、conf 等。

创建新项目后，我尝试在命令提示符中运行 eclipsify 命令，但在命令提示符中收到一条错误消息：

`The command is not recognized...`

请让我知道如何运行 eclipsify 命令.... :(

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:42:26.427

尝试运行

```
play eclipsify firstApp 
```

从`F:\PlayWOrkspace`目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:07:26.633

您也可以使用简短版本（不太可能拼写错误）：（ `play ec`如果您在`F:\PlayWOrkspace\firstApp`）

# sql - sql server 2008 更新表

> ID：14481905
> 
> 赞同：0
> 
> 时间：2013-01-23T14:19:05.363
> 
> 标签：sql, sql-server-2008

我有存储过程，在将数据插入表后，我想通过执行另一个过程来更新此表中的数据，但数据未更新。

就在我在第一个过程之后执行 updateTable 过程时，它起作用了，但我需要从第一个过程执行 updateTable 过程！！！

这是第一个程序：

```
CREATE PROCEDURE a  
AS
BEGIN
insert into tbl
select * from tempTable

exec updateTable
end 
```

更新表的过程如下所示：

```
ALTER procedure [dbo].[updateTable]
AS
BEGIN
    update tbl
    set tbl.name= users.name
            from  dbo.tbl tbl
                    inner join  
                  dbo.users   users 
                    on users.id=tbl.id
END 
```

我能做些什么？？？？

# spring - Spring Security SQL 错误：0，SQLState：空

> ID：14481906
> 
> 赞同：0
> 
> 时间：2013-01-23T14:19:09.317
> 
> 标签：spring, spring-security

我的项目完全连接到数据库以加载所有数据，但 Spring Security 向我抛出以下异常

10:58:08 WARN [JDBCExceptionReporter] SQL 错误：0，SQLState：null 10:58:08 错误 [JDBCExceptionReporter] com.mchange.v2.c3p0.ComboPooledDataSource [java.beans.IntrospectionException: java.lang.reflect.InvocationTargetException [ numThreadsAwaitingCheckoutDefaultUser] ] 已关闭()

这是我的spring安全配置类

```
<http auto-config="true" use-expressions="false" authentication-manager-ref="authManager" access-decision-manager-ref="accessDecisionManager"
    access-denied-page="/unauthorized">
    <intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" />

    <form-login 
        login-processing-url="/j_login" 
        authentication-failure-url="/login?erro=usuarioIncorreto"
        always-use-default-target="false"
        login-page="/login" 
        default-target-url="/" />

    <logout invalidate-session="true" 
        logout-success-url="/login"
        logout-url="/j_logout"
        delete-cookies="JSESSIONID" />

    <session-management invalid-session-url="/login?erro=novaSessao" 
        session-fixation-protection="newSession">
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="false" />
    </session-management>
</http>

<authentication-manager >
    <authentication-provider user-service-ref="securityServiceTrack">
        <password-encoder hash="md5" />
    </authentication-provider>
</authentication-manager>

<beans:bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased">
    <beans:property name="decisionVoters">
        <beans:list>
            <beans:bean class="org.springframework.security.access.vote.AuthenticatedVoter" /> 
```

-->

这是我的 web.xml：

```
<display-name>Track Go Web</display-name>

<!-- ******************************************************* -->
<!-- Configuração do Spring -->
<!-- ******************************************************* -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/config/spring/applicationContext.xml
        /WEB-INF/config/spring/applicationContext-persistence.xml
        /WEB-INF/config/spring/applicationContext-security.xml
    </param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<listener>
    <listener-class>
        org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener> 

<!-- OpenEntityManagerInViewFilter -->
<filter>
    <filter-name>OpenEntityManagerInViewFilter</filter-name>
    <filter-class>
        org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- ******************************************************* -->
<!-- Configuração do SiteMesh -->
<!-- ******************************************************* -->
 <filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>org.sitemesh.config.ConfigurableSiteMeshFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- ******************************************************* -->
<!-- Configuração do VRaptor3 -->
<!-- ******************************************************* -->

<context-param>
    <param-name>br.com.caelum.vraptor.encoding</param-name>
    <param-value>UTF-8</param-value>
</context-param>
<!-- Define Messages Bundle --> 
```

--> javax.servlet.jsp.jstl.fmt.localizationContext</param-name>--> messages</param-value>--> --> javax.servlet.jsp.jstl.fmt.locale pt_BR -- > vraptor.jasperMaker</param-name>--> /WEB-INF/reports</param-value>--> -->

```
<filter>
    <filter-name>vraptor</filter-name>
    <filter-class>br.com.caelum.vraptor.VRaptor</filter-class>
</filter>

<filter-mapping>
    <filter-name>vraptor</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

这是我的持久性配置文件

```
<!-- ********************************************* -->
<!-- DataSource condfig-->
<!-- ********************************************* -->

<context:property-placeholder location="classpath:configuracoes.properties" />

 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${trackgoweb.jdbc.driverclass}" />
    <property name="jdbcUrl" value="${trackgoweb.jdbc.url}" />
    <property name="user" value="${trackgoweb.jdbc.username}" />
    <property name="password" value="${trackgoweb.jdbc.password}" />
    <property name="maxPoolSize" value="10" />
    <property name="maxStatements" value="0" />
    <property name="minPoolSize" value="3" />
    <property name="checkoutTimeout" value="30000" />
</bean>

<!-- Configuraçãoes relativas a acesso a dados -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">

    <property name="dataSource" ref="dataSource"/>

    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"></bean>
    </property>
    <property name="jpaVendorAdapter">
        <bean
            class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.PostgreSQLDialect" />
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.query.substitutions">true 'S',false 'N',yes 'S',no 'N'</prop>
            <prop key="hibernate.query.jpaql_strict_compliance">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<!-- Transaction Manager exclusivo para JPA -->
<bean id="transactionManager"
    class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"></bean>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:33:42.450

我通过删除数据源 bean 上的 distroy 会话关闭解决了这个问题

```
<context:property-placeholder location="classpath:configuracoes.properties" />

 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="${trackgoweb.jdbc.driverclass}" />
    <property name="jdbcUrl" value="${trackgoweb.jdbc.url}" />
    <property name="user" value="${trackgoweb.jdbc.username}" />
    <property name="password" value="${trackgoweb.jdbc.password}" />
    <property name="maxPoolSize" value="10" />
    <property name="maxStatements" value="0" />
    <property name="minPoolSize" value="3" />
    <property name="checkoutTimeout" value="30000" />
</bean> 
```

# java - 如何重写画布（重用它）

> ID：14481912
> 
> 赞同：0
> 
> 时间：2013-01-23T14:19:27.787
> 
> 标签：java, android, android-canvas, surfaceview

我有一种方法可以在画布上绘制一组自动生成的线条。这没有问题。现在的问题是，如何使用 onTouch 事件在此 Canvas 上添加例如线条。我尝试使用 Thread 和 SurfaceView 来解决这个问题，但是 Thread 会无限地绘制自动生成的集合。（我要添加的行必须是可删除的）。

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:30:51.790

将您的**线条坐标**放在线条对象的数组列表中，并在您的**onDraw**方法中使用循环迭代每一行以在画布上绘制它。在arraylist onTouch 中添加行。添加线 onTouch 调用**invalidate()**以更新画布后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:55:37.603

利用

```
invalidate() 
```

这将调用

```
onDraw(Canvas canvas) 
```

# c# - 在 C# 中投射“div”

> ID：14481914
> 
> 赞同：2
> 
> 时间：2013-01-23T14:19:30.603
> 
> 标签：c#, html, asp.net, .net, c#-4.0

有没有办法以编程方式创建`<DIV>`以获得属性 innerHtml？

```
 HtmlGenericControl div = new HtmlGenericControl("div"); 
```

我怎样才能得到`div.innerHTML`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T14:21:53.553

这不起作用：

```
div.InnerHtml = "<b>hello</b>"; 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontainercontrol.innerhtml.aspx)

# ruby-on-rails - Rails：以编辑形式显示来自嵌套属性的图像

> ID：14481922
> 
> 赞同：0
> 
> 时间：2013-01-23T14:20:02.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, nested-forms

我正在使用 Rails、Mongoid 和载波。

这是我正在使用的代码。

**页面.rb**

```
class Page
    include Mongoid::Document
    include Mongoid::Timestamps

    embeds_many :pictures

    attr_accessible :picture_image, :picture_image_cache, :picture_title
end 
```

**图片.rb**

```
class Picture
    include Mongoid::Document
    mount_uploader :picture_image, Picture_imageUploader

    embedded_in :page 

    field :picture_image, :type => String
    field :picture_title, :type => String
end 
```

**form.html.erb**

```
<%= simple_nested_form_for(@page) do |f| %>
    <%= f.fields_for :pictures do |f| %>
        <!-- This is a nested form -->

        <!-- Preview of previously uploaded picture -->
        <% @page.pictures.each do |picture| %>
            <%= image_tag picture.picture_image_url(:thumb).to_s %>
        <% end %>

        <!-- Upload button -->
        <%= f.input :picture_image, :as => :file, :label => 'Choose an Image:'%>

        <!-- Title for picture -->
        <%= f.input :picture_title, :label => 'Picture Title:'%>

         <%= f.link_to_remove "Delete this item" %>

    <% end %>
<% end %> 
```

在编辑表单中 - 我想在“上传新图像”按钮上方显示以前上传的图像的预览。上面的代码可以正常工作，只是它会循环（显然）并显示每个部分中的所有图像。例如，如果我有 3 个“图片”条目，它将在每个“上传”按钮上方显示所有三张图片。

我只希望它显示该特定条目的相关图像。我会想象这样的事情会起作用`<%= image_tag @page.picture_image_url(:thumb).to_s %>`，但事实并非如此。

我错过了什么简单、愚蠢的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:25:46.350

我没有检查，但`embeds_many :pictures`你的循环的关系必须是：

```
<% @page.pictures.each do |picture| %>
  .
  .
  .
 <% end %> 
```

如果我了解您想要做什么并且您只想在循环中显示 1 张图片，您可以尝试：

```
<% for picture in @page.pictures.limit(1).shuffle %>
 .
 .
 .
<% end %> 
```

试试这个代码！

# c++ - C++ 中的#include 问题

> ID：14481925
> 
> 赞同：2
> 
> 时间：2013-01-23T14:20:14.803
> 
> 标签：c++, .net, winforms, visual-studio-2010, c++-cli

我有3节课。主要类是`Form1` 另外两个是`Form2`&`Class3` 我在Form1中包含了Form2和Class3，我的意思是我在Form1中有以下内容：

```
#include "Form2.h"
#include "Class3.h" 
```

另外，在 Form2 中我包含了 Class3，所以我在 Form2 中有以下内容：

```
#include "Class3.h" 
```

但我得到重新定义错误，我该如何解决这个问题。

我总是面临这样的问题，有时包含标题就足够了，`stdafx.h`但有时不起作用。那么另一个问题是如何利用和利用 `stdafx.h`我的 C++/CLI winform 项目中默认创建的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:24:30.603

尝试在 Class3.h 中添加：

```
#ifndef _CLASS3_H
#define _CLASS3_H

/* your code here */

#endif 
```

那应该工作

所以你明白发生了什么，这样做是为了防止你的 Class3.h 重新定义所有已经完成的事情。在您的程序中，Form1 使用 Class3，但 Form2 也是如此。第一次包含 Form2 时，Class3 也包含在内，然后，下一行您尝试再次包含 Class3，然后出现重新定义错误。

希望这能让你清楚

ps：我强烈建议您对所有 .h 文件执行此操作，不过

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:23:23.913

使用[包括警卫](http://en.wikipedia.org/wiki/Include_guard)或[`#pragma once`](http://en.wikipedia.org/wiki/Pragma_once).

# iphone - 增加 UIButton 在高亮时的触摸效果半径

> ID：14481928
> 
> 赞同：0
> 
> 时间：2013-01-23T14:20:28.637
> 
> 标签：iphone, ios, ipad, cocoa, uibutton

有没有办法在`Shows Touch on Highlight`启用时增加 UIButton 的“发光效果”？在大多数情况下，它在 iPhone 上很好，但在 iPad 上太小了。如果不可能，任何想法如何实现所需的行为？

**编辑：**

基本上，我正在寻找如何继承 UIButton 以添加此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:32:16.370

我会使用这样的东西：为按钮上按下的按钮添加一个目标。

```
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown]; 
```

这是按下按钮时调用的方法。您可以更改 shadowRadius 以满足您的需要。

```
- (void) buttonPressed:(id) sender
{
    UIButton *button = (UIButton *) sender;
    DDLogInfo(@"%@ Button Pressed...", button.titleLabel.text);
    UIColor *color = [UIColor whiteColor];
    button.layer.shadowColor = [color CGColor];
    button.layer.shadowRadius = 20.0f;
    button.layer.shadowOpacity = 0.9;
    button.layer.shadowOffset = CGSizeZero;
    button.layer.masksToBounds = NO;
    button.backgroundColor = [UIColor whiteColor];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:44:43.003

您可以创建发光效果的图像，并在按钮突出显示时将其添加到按钮。

# php - 记事本++的自动完成用户定义的功能？

> ID：14481936
> 
> 赞同：1
> 
> 时间：2013-01-23T14:21:08.513
> 
> 标签：php, autocomplete, dreamweaver, notepad++, text-editor

Dreamweaver 有一个选项可以自动扫描目录并索引所有用户定义的函数，这样您就可以在编写代码时轻松引用和自动完成。我正在使用 notepad++ 来纠正 PHP，并且想要一个类似的功能，而无需手动更新 API 或配置文件或任何用于 notepad++ 的东西。

有谁知道插件/插件等，或者可能是允许此功能的更好的开源程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:24:02.567

你试过[Sublime Text 2](http://www.sublimetext.com/)吗？这是一个非常酷的文本编辑器，可以原生实现您的要求。

# eclipse-plugin - 如何使用 Eclipse p2 存储库获取具有平台特定代码的插件以部署到正确的平台？

> ID：14481940
> 
> 赞同：0
> 
> 时间：2013-01-23T14:21:13.813
> 
> 标签：eclipse-plugin, eclipse-rcp, tycho, p2

我正在构建一个包含一些插件的 Eclipse 功能。其中一个插件使用 import package 语句来声明对另一个插件的依赖。

另一个插件具有特定于平台的代码，并且存在于我正在构建的另一个功能中。我在此功能中有两个具有平台特定代码的插件。一个用于 os=win32 arch=x86，另一个用于 os=win32 arch=x86_64

这两个功能都在构建并使用 Tycho，并且它们都有成功可用的 p2 存储库。

因此，我创建了一个指向这两个存储库的复合存储库，然后在我的 RCP 应用程序中使用“安装新软件...”命令并指向复合存储库以安装我提到的第一个功能。

问题是安装完成后，具有平台特定代码的插件无法正确安装。具体来说，x86 系统的插件出现在我的 64 位机器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:04:42.003

在您的 feature.xml 中，选择具有平台特定代码的插件并添加平台过滤器。过滤器在右侧可用（一旦您选择插件）。您可以选择过滤器，例如：

1.  操作系统
2.  WS
3.  语言
4.  建筑学

当您的功能发布时，p2 将生成适当的过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:26:48.633

我找到了答案。

在我在问题中提到的第一个功能中，我需要一个位于我的 feature.xml 文件旁边的 p2.inf 文件。

在那个 p2.inf 文件中，我需要这个文本......

```
requires.1.namespace=org.eclipse.equinox.p2.iu
requires.1.name=com.myplatform.specfic.bundle.win32.x86   
requires.1.filter=(&(osgi.os=win32) (osgi.arch=x86))

requires.1.namespace=org.eclipse.equinox.p2.iu
requires.1.name=com.myplatform.specfic.bundle.win32.x86_64
requires.1.filter=(&(osgi.os=win32) (osgi.arch=x86_64)) 
```

我也将此文件添加到 build.properties 以确保它包含在已部署的功能中

然后，当我部署 p2 存储库并在我的 RCP 应用程序中执行安装时，正确的插件被放置到我的 64 位机器上。

更新：我在这里错了。这不是正确的答案。某些机器上仍然安装了不正确的插件。

# coldfusion - 将字符串转换为变量coldfusion

> ID：14481941
> 
> 赞同：0
> 
> 时间：2013-01-23T14:21:14.680
> 
> 标签：coldfusion, tags

我对这个有点难过。。

我目前有一个字符串。

> 请在此处输入您的 variable.firstname

我想做的是`variable.firstname`在字符串中找到并将其转换为用作`#variable.firstname#`

我正在使用 CF8，我查看了使用`findNoCase()`但该`variable.firstname`部分可以出现在任何地方。我还尝试在 Coldfusion 自定义标签中使用它来简单地显示可以动态填充的用户的名字。

我不能使用任何其他功能来更改它 IE = variable['firstname] 因为该变量可能是我传入的动态变量的结果，并且对内容的查询将驻留在自定义标记中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:34:00.870

```
 <cfset yourNewString = replace(yourOldString,'variable.firstname', 
'##variable.firstname##', 'all')> 
```

注意双磅符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:51:27.643

> 我不能使用任何其他功能来更改它 IE = variable['firstname] 因为该变量可能是我传入的动态变量的结果，并且对内容的查询将驻留在自定义标记中。

我不确定我是否完全理解您在这里所说的内容，但如果您说 variables.firstname 来自另一个变量并且 .firstname 是动态部分，您仍然可以使用数组表示法。

```
<cfset myName = "Travis">
<cfset yourName = "user125264">
<cfset myCustomVariable = "myName">
<cfoutput>Hi, My name is #variables[myCustomVariable]#. </cfoutput>
<cfset myCustomVariable = "yourName">
<cfoutput>Your name is #variables[MyCustomVariable]#.</cfoutput> 
```

输出：`Hi, My name is Travis. Your name is user125264.`

如果这不是你的意思，我很抱歉。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T20:45:57.630

如果您尝试将 variable.firstname 替换为 #variables.firstname# 然后还获取该变量的值，则需要进行替换`<cfset yourNewString = replace(yourOldString,'variable.firstname', '##variables.firstname##', 'all')>`，然后将生成的字符串包装在 evaluate() 函数（以及内部de() 以防止 CF 评估*所有内容*): `<cfset evaluatedString = evaluate(de(yourNewstring))>`.

如果除了 variable.firstname 之外还有更多需要这种翻译的变量，您需要使用 reReplace() 进入正则表达式，以便在一个语句中将它们全部捕获。我的正则表达式生锈了，所以你需要自己谷歌一下。;o)

# mysql - 在 MySQL 中创建 Unix 时间戳

> ID：14481942
> 
> 赞同：4
> 
> 时间：2013-01-23T14:21:14.390
> 
> 标签：mysql, sql

如何在 MySQL 中创建 unix 时间戳？我知道类型设置为`INT`，值是`NULL`，但我需要它以如下格式填充当前时间：1343782742

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T14:22:54.050

利用`UNIX_TIMESTAMP(date)`

```
SELECT UNIX_TIMESTAMP(NOW()) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/6346)

*   [UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

# android - ActionBarSherlock + Google Maps API v2 重复 ID

> ID：14481950
> 
> 赞同：7
> 
> 时间：2013-01-23T14:21:55.140
> 
> 标签：android, google-maps, actionbarsherlock, google-maps-android-api-2

我正在尝试将 ActionBarSherlock 与 Google Maps API v2 片段集成。

我有一个包含 2 个片段的布局：一个用于列表布局，另一个用于 SupportMapFragment。

当我第一次单击列表项时运行良好，但是当我第二次单击列表项时，它会引发错误：“重复 id 0x7f040038、标签 null 或父 id 0x0 与 com.google.android.gms 的另一个片段。地图.SupportMapFragment"

我尝试了几种解决方案，但没有一个能够修复它。有什么我做错了吗？请帮我！！

我修改了 ActionBarSherlock 以包含实现的 SherlockMapFragment 以支持新的 SupportMap（如下所示：[https](https://gist.github.com/4392030) ://gist.github.com/4392030 ）。

这是我的代码： [https ://github.com/inigo-jimenez/TestGoogleMaps](https://github.com/inigo-jimenez/TestGoogleMaps)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:23:45.000

这不是 ActionBarSherlock 的问题，而是当您在自定义片段中包含 SupportMapFragment 时更广泛的问题。

您需要使用 getChildFragmentManager() 添加 SupportMapFragment 而不是通过 xml。

在这里看看我的答案：[MapFragment in Fragment, Alternatives?](https://stackoverflow.com/q/15433820/2183804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:20:53.767

从 XML 文件中的项目列表片段中取出 id。

然后将片段放入容器布局（LinearLayout）中。如果您需要参考片段，请通过该布局。

确保在片段类中使用 onCreateView 函数而不是 onCreate 函数。

# sql - DistinctRow 在这种情况下的含义？

> ID：14481956
> 
> 赞同：0
> 
> 时间：2013-01-23T14:22:07.273
> 
> 标签：sql, ms-access

```
DELETE 
        DISTINCTROW tbl1.*, tbl2.Name
    FROM 
        tbl1 INNER JOIN tbl2 ON tbl1.EMP_NUM = tbl2.EMP_NUM
    WHERE 
        (((tbl2.Name) Not Like [Forms]![formReports]![txtName])); 
```

我只需要验证我下面的描述是否有意义，或者它是否没有指出该声明的原因和实际作用。这是我认为它的作用：

使用 EMP_NUM 连接表，并删除基于名称与在表单“formReports”上的视图“txtName”中输入的名称不同的重复记录。

或者

它是否从 tbl1 中的列中删除所有值，并且仅删除 tbl2 中字段名称中的值，其中输入到表单中的名称与 tbl2 中的名称不同。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:27:09.553

因为您要连接两个表并拥有两个表中的字段，所以`DISTINCTROW`没有做任何事情。

您可以在[此处查看](http://msdn.microsoft.com/en-us/library/aa140015.aspx)明确说明这一点的文档。

# sql - SQL：带有参数值的 SQL Like 语句未返回所需值

> ID：14481959
> 
> 赞同：0
> 
> 时间：2013-01-23T14:22:16.757
> 
> 标签：sql, stored-procedures

我正在尝试在 asp.net Web 应用程序中实现搜索，我在其中查询表并将搜索词与某些列匹配。

要实现我认为的部分搜索，我可以使用`Like`子句。所以我这样写我的sql过程 -

```
CREATE PROCEDURE sproc_SEARCH
    @author char(200)
AS
    SELECT * FROM Table WHERE column LIKE '%' + @author + '%' 
```

上面的过程应该返回一些行，但它没有

但是，如果我只是运行以下 sql 语句，它会给我所需的行

```
SELECT * FROM Table WHERE column LIKE '%bha%' 
```

我不明白为什么会这样，可以使用一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:24:09.157

尝试这个：

```
@author varchar(200) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T14:24:23.090

它可能与`@author`作为 a`CHAR`而不是有关`VARCHAR`，所以你有尾随空格。要么使用`VARCHAR`：

```
CREATE PROCEDURE sproc_SEARCH
    @author varchar(200)
AS
    SELECT * FROM Table WHERE column LIKE '%' + @author + '%' 
```

或修剪您的参数：

```
CREATE PROCEDURE sproc_SEARCH
    @author char(200)
AS
    SELECT * FROM Table WHERE column LIKE '%' + RTRIM(LTRIM(@author)) + '%' 
```

# svn - 前卫结帐随机失败

> ID：14481967
> 
> 赞同：1
> 
> 时间：2013-01-23T14:22:56.170
> 
> 标签：svn, ant, svnant, svn-checkout

我正在使用 ant 对存储库中最新版本的应用程序进行全新签出。使用如下命令：

```
 <svn refid="svn.settings">
        <checkout url="${url.to.my.repo}/trunk" destpath="${path.to.dir}"/>
    </svn> 
```

我经常收到以下错误：

```
 [svn] svn: CRLF expected at end of chunk: XX/YY
  [svn] svn: REPORT request failed on '/myApp/!svn/vcc/default'
  [svn] svn: CRLF expected at end of chunk: XX/YY
  [svn] svn: REPORT request failed on '/myApp/!svn/vcc/default'
  [svn] <Checkout> failed. 
```

`XX`并且`YY`是“随机”定义的。

经过几次重试结帐成功。

发生此错误的时间大约为 2 分钟多一点。

使用带有 svnant 1.3.1 的 Windows 7。

有任何想法吗？

10倍

# c# - 从数据库中动态创建的用户控件的 Dropbox 项目在回发时重置

> ID：14481972
> 
> 赞同：1
> 
> 时间：2013-01-23T14:23:18.023
> 
> 标签：c#, asp.net, postback, dropbox, dynamic-usercontrols

首先，我设法创建了一个 Web 应用程序，在该应用程序中，我动态创建的用户控件被重新创建并在回发时使用正确的信息重新填充。我不确定我的问题是什么，但我希望您能够根据我的情况帮助我解决：

在我的页面上，我将要创建的控件数量输入到硬编码的文本框（在 aspx 页面上），然后单击确定按钮。这反过来又在后台使用 c# 动态创建指定数量的用户控件。

到目前为止，所需数量的动态控件都在页面上的表格中。下一个...

我在每个动态用户控件上有 1 个文本框和 4 个保管箱。当我在文本框字段中输入公司名称并按回车键或单击离开（在文本更改事件上）时，它会自动返回并且文本框保留我输入的公司名称。

根据此字符串，从数据库中填充保管箱。现在，当我从保管箱中选择所需的项目并单击保存按钮（位于页面上的动态控件之外）时，它会插入数据库，但事实证明，在此回发时，保管箱中的索引有已重置并插入错误的值。

下面的图片首先显示它应该如何，然后显示它是如何。

基本上公司名称保留在动态控件的文本框中，但我从下拉框中选择的信息会重置为第一个索引。

![应该如何](../Images/9103b02cf8c8ab25db40e6586a3f7b15.png)

![实际情况如何](../Images/9eae0b1287c691a41d71233d60f52c86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:33:04.243

没有代码很难说出发生了什么，但这是一个常见的错误：

如果您在页面加载事件中填充/创建下拉列表控件并回发，代码将重新填充/重新创建控件。`If(!IsPostBack)`这就是为什么您必须在页面加载事件中使用类似的东西。否则，它会在您每次进行回发时执行该代码，实际上只是想在您的事件处理程序中为该按钮执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:39:44.817

如果您正在动态创建控件，请确保在`Page_Init`事件中执行此操作。必须在每次回发时重新创建动态控件。它们的状态在 Page_Init 之后恢复（如果是回发），因此请确保仅在`Page_Load`要覆盖它们时才设置它们的值。

# asp.net-mvc-3 - 无法设置 对于 mvc3 .net Web 应用程序

> ID：14481974
> 
> 赞同：2
> 
> 时间：2013-01-23T14:23:20.600
> 
> 标签：asp.net-mvc-3, iis-7, web-config

我需要在我的 MVC 3 Web 应用程序的 IIS 7.5 中的 web.config 中将 CustomErrors 设置为 OFF。

使用此代码，CustomError 仍处于默认模式。

你能告诉我我在这里错了什么吗？坦斯克

```
 <system.web>
    <customErrors mode="off">
</customErrors>
... 
```

编辑解决方案（区分大小写的问题）

```
 <system.web>
    <customErrors mode="Off">
</customErrors>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:54:07.753

customErrors 区分大小写。

```
<system.web>
    <customErrors mode="Off">
    </customErrors>
...
</system.web> 
```

# ios - 从后台返回时的 pushViewController

> ID：14481975
> 
> 赞同：0
> 
> 时间：2013-01-23T14:23:24.047
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller, storyboard

当应用程序从后台返回时，我想从导航控制器推送我的菜单视图控制器。

测试—— NSString 返回我的导航控制器的标题，所以它应该可以工作，但它没有。它总是显示视图控制器。

PS我使用故事板。

在`AppDelegate.m`：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{    

    NSString * test = self.window.rootViewController.title; // return title of navigation controller

    MenuViewController *mvc = [[MenuViewController alloc] init];
    [(UINavigationController *)self.window.rootViewController pushViewController:mvc animated:NO];
} 
```

[下载项目](https://www.dropbox.com/s/3hcr8qu26rnjads/Archive1.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:42:08.197

可能，您应该在 - (void)applicationDidBecomeActive:(UIApplication *)application 方法中更新您的 UI。

**更新。**

此外，错误是因为在您的故事板中您将新的 ViewControllers 呈现为模态，但您应该推送它们。然后你可以通过调用返回主菜单

```
[(UINavigationController *)self.window.rootViewController popToRootViewControllerAnimated:NO]; 
```

要更改演示文稿样式，请在情节提要中选择 segue，选择 Attributes Inspector 并将样式更改为“Push”。

或者，如果您更喜欢模态演示风格，请致电

```
[(UINavigationController *)self.window.rootViewController dismissModalViewControllerAnimated:YES]; 
```

# c# - 如何传递 HashSet 集合中的每个值？

> ID：14481977
> 
> 赞同：-5
> 
> 时间：2013-01-23T14:23:45.093
> 
> 标签：c#, forms, hashset

```
foreach (var item in HashSet<T>)
{

} 
```

var应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:28:44.013

您的代码无法编译，您应该使用以下代码：

```
HashSet<int> hashSet = new HashSet<int>(); //create a HashSet of integers

//populate hashSet

foreach(var value in hashSet){ //where var is of type int
    //...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:26:20.670

`var`（[隐式类型变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)）将正是您在`T`声明`HashSet`.

因此，例如，如果您声明它`HashSet<int>`，`var`它将是类型`int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T14:25:37.773

var 为 T（30 个字符）（30 个字符）（30 个字符）（30 个字符）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:28:17.000

var 是 T，将鼠标悬停在`var`上面，VS 会告诉你类型。

# css - 单击按钮时更改整个页面背景

> ID：14481978
> 
> 赞同：0
> 
> 时间：2013-01-23T14:23:46.063
> 
> 标签：css

所以这是我的问题：

假设我有一个带有 3 个按钮的页面。每个都包含一个独特的图案作为背景。单击/悬停在其中一个按钮上后，我想更改整个页面的背景图像。

我需要的是类似于[http://subtlepatterns.com/](http://subtlepatterns.com/) 我不需要停止预览选项，只要当我选择不同的按钮时背景图像再次发生变化。

我怎样才能做到这一点？

另外，如果不可能，这也对我有用：每当我单击/悬停在其中一个按钮上时，更改 DIV 的颜色（而不是整个页面背景）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:31:48.740

在你的 CSS 表中有 3 个不同的 body 类：

```
body.class1 {
background: ...;
}

body.class2 {
background: ...;
}

body.class3 {
background: ...;
} 
```

使用jQuery动态改变body类

```
$("#btn1").click(function() {
 $('body').removeClass();
 $('body').addClass('class1');
});

$("#btn2").click(function() {
 $('body').removeClass();
 $('body').addClass('class2');
});

$("#btn3").click(function() {
 $('body').removeClass();
 $('body').addClass('class3');
}); 
```

然后最后在每个按钮中放置一个 id 到 jQuery 在 DOM 中找到这个：

```
<a id="btn1">bg1</a>
<a id="btn2">bg2</a>
<a id="btn3">bg3</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:35:18.887

只使用 javascript 你可以做这样的事情

```
function changeBg(color) {
    var color = '#' + color;
    document.body.style.background = color;
} 
```

[http://jsfiddle.net/62SXu/](http://jsfiddle.net/62SXu/)

您也可以更改它以将路径传递给您的图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:37:06.483

必须用 CSS 完成吗？使用 jQuery 似乎要容易得多。像这样的东西会起作用：

```
<style>
.button1 {background:url(url to PIC);}
</style>
$(document).ready(function (){
$(".onClick").click(function (){
var ID = $(this).attr("id");
$(body).removeClass();
$(body).addClass(ID);
})
})
<div class = "onClick" id="button1"> ... </div>
<div class = "onClick" id="button2"> ... </div>
<div class = "onClick" id="button3"> ... </div> 
```

# java - 使用 gson 反序列化嵌套的泛型类

> ID：14481982
> 
> 赞同：6
> 
> 时间：2013-01-23T14:23:55.113
> 
> 标签：java, oop, generics, deserialization, gson

使用 Gson，我试图反序列化一个嵌套的通用类。类结构如下所示：

Wrapper 对象，已简化，但通常包含其他属性，例如，它们与服务器的 -field`statusMessage`一起返回：`data`

```
public class Response<T> {

   private List<T> data = null;

   public List<T> getData() { return this.data; }   

} 
```

简单的类，上面 -field 的预期输出`data`（虽然是一个数组）：

```
public class Language {
   public String alias;
   public String label;
} 
```

用法：

```
Type type = new TypeToken<Response<Language>>() {}.getType();
Response<Language> response = new Gson().fromJson(json, type);
List<Language> languages = response.getData();
Language l = languages.get(0);
System.out.println(l.alias); // Error occurs here 
```

其中`json`-variable 是[这样](http://pastebin.com/hgp1prri)的。

但是，执行此操作时，我收到以下异常（在第 3 行，最后一个代码示例）：

> ClassCastException：com.google.gson.internal.StringMap 无法转换为 book.Language

仅当将数据存储`getData()`到变量中（*或用作变量时*）时才会发生异常。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T21:32:19.097

您实际遇到的问题不是直接由于`Gson`，而是因为数组和泛型如何一起发挥作用。

你会发现在你这样`new T[10]`的课堂上你实际上做不到。请参阅：[如何在 Java 中创建泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

你基本上有两个选择：

1.  编写一个自定义解串器并在`T[]`那里构造数组，如我上面链接的 SO 问题所示
2.  使用 a`List<T>`代替，然后它会简单地工作。如果你*真的*需要返回一个数组，你可以随时调用`List.toArray()`你的方法。

**根据以下评论编辑：**

这是一个完整的示例：

```
public class App 
{
    public static void main( String[] args )
    {
        String json = "{\"data\": [{\"alias\": \"be\",\"label\": \"vitryska\"},{\"alias\": \"vi\",\"label\": \"vietnamesiska\"},{\"alias\": \"hu\",\"label\": \"ungerska\"},{\"alias\": \"uk\",\"label\": \"ukrainska\"}]}";
        Type type = new TypeToken<Response<Language>>(){}.getType();
        Response<Language> resp = new Gson().fromJson(json, type);

        Language l = resp.getData().get(0);
        System.out.println(l.alias);

    }
}

class Response<T> {

   private List<T> data = null;

   public List<T> getData() { return this.data; }   

}

class Language {
   public String alias;
   public String label;
} 
```

输出：

> 是

# jquery - load() JSON 数据，生成 HTML 表格并将其放置在 div 中

> ID：14481983
> 
> 赞同：2
> 
> 时间：2013-01-23T14:23:58.063
> 
> 标签：jquery, jquery-load

我可能有一个非常简单的 jQuery 问题——可能遗漏了一点点。

我有一个按钮，可以从 PHP 脚本加载 JSON 格式的数据：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
function showLastGame(id) {
        $('#top').load('http://preferans.de/cards-json.php?id=' + id + '&limit=1');
}
</script> 
```

...

```
Show your last game &raquo;
<input type="button" onclick="showLastGame('DE13370')" value="Show"> 
```

效果很好 - 单击按钮后，我可以看到加载的 JSON 数据。

但我实际上想将加载的数据传递给一个 JavaScript 函数（我试图从[dataTables](http://www.datatables.net/examples/server_side/row_details.html)重用一个），它将构造一个返回 HTML 表作为字符串：

```
function renderGame(cardsTable, nTr) {
        var aData   = cardsTable.fnGetData(nTr);
        //console.dir(aData);
        // .... HTML table constructed here....
        return str;
} 
```

请问这个怎么做？

以及如何将生成的字符串放入`#top`div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:29:33.430

使用常规[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)调用而不是`.load()`：

```
$.ajax({
    url: '/cards-json.php',
    data: {
        id: id,
        limit: 1
    },
    dataType: 'json',
    ...
}).done(function(data) {
    // data is your JSON - use it however you want here
    var topHtml = renderGame(arg1, arg2);
    $('#top').html(topHtml);
}); 
```

我假设该`renderGame`函数是返回`#top`元素的 HTML 内容的函数；如果不是，则将其更改为正确的函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:34:43.690

```
<script type="text/javascript">
function renderGame(cardsTable, nTr, html) { // added html to be passed so it can be manipulated further

        // .... HTML table constructed here....
        // using things like `var part = $('selector',HTML_STRING)` you can extract parts
        // to modify, and build a string for the table with them

        var part1 = $('span.menu',html).eq(0) // get the first `span` with class `menu` from the html string passed and store in `part1`
        ... etc ...

        str = "<table><tr><td>" + part1 + "</td></tr></table>" // etc...

        return str;
}
function showLastGame(id) {
    // use `$.get` and a callback function after it got data
    $.get('/cards-json.php?id=' + id + '&limit=1',function(d){
        // d is a string containing the response of the `get` request
        var table = renderGame(???,???) // <~ not sure what variables your function takes
        // set the HTML of the target element
        $('#top').html(table);
    });
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:34:35.903

我认为一种方法是使用[jQuery.getJson()](http://api.jquery.com/jQuery.getJSON/)

示例，根据您的代码：

```
function showLastGame(id) {
    $.getJSON('/cards-json.php?id=' + id + '&limit=1', function(data) {
        var html = '<ul>';
        $.each(data, function(key, val) {
            // Whatever you what to do, eg.
            html = html + '<li>' + key + ': ' + val + '</li'>);
        });
        html = html + '</ul>';
        $('#top').html(html);
    });
} 
```

# ios - 奇怪的 SecKeyEncrypt 行为

> ID：14481989
> 
> 赞同：6
> 
> 时间：2013-01-23T14:24:10.797
> 
> 标签：ios, objective-c, cocoa-touch, rsa

我正在尝试使用 SecKeyEncrypt 函数使用 PKCS1 填充实现 RSA 加密。

代码如下：

```
NSData *encryptText(NSString *text, SecKeyRef publicKey)
{
    NSCParameterAssert(text.length > 0);
    NSCParameterAssert(publicKey != NULL);
    NSData *dataToEncrypt = [text dataUsingEncoding:NSUTF8StringEncoding];
    const uint8_t *bytesToEncrypt = dataToEncrypt.bytes;

    size_t cipherBufferSize = SecKeyGetBlockSize(publicKey);
    NSCAssert(cipherBufferSize > 11, @"block size is too small: %zd", cipherBufferSize);

    const size_t inputBlockSize = cipherBufferSize - 11; // since we'll use PKCS1 padding
    uint8_t *cipherBuffer = (uint8_t *) malloc(sizeof(uint8_t) * cipherBufferSize);

    NSMutableData *accumulator = [[NSMutableData alloc] init];

    @try {

        for (size_t block = 0; block * inputBlockSize < dataToEncrypt.length; block++) {
            size_t blockOffset = block * inputBlockSize;
            const uint8_t *chunkToEncrypt = (bytesToEncrypt + block * inputBlockSize);
            const size_t remainingSize = dataToEncrypt.length - blockOffset;
            const size_t subsize = remainingSize < inputBlockSize ? remainingSize : inputBlockSize;

            size_t actualOutputSize = cipherBufferSize;
            OSStatus status = SecKeyEncrypt(publicKey, kSecPaddingPKCS1, chunkToEncrypt, subsize, cipherBuffer, &actualOutputSize);

            if (status != noErr) {
                NSLog(@"Cannot encrypt data, last SecKeyEncrypt status: %ld", status);
                return nil;
            }

            [accumulator appendBytes:cipherBuffer length:actualOutputSize];
        }

        return [accumulator copy];
    }
    @finally {
        free(cipherBuffer);
    }
} 
```

它在 iOS 6 上完美运行，但在 iOS 5 上失败，SecKeyEncrypt 返回`-50`( `errSecParam`)。如果我将 11 更改为 12 ，它将在 iOS 5 上运行`inputBlockSize = cipherBufferSize - 11`。`SecKeyGetBlockSize() - 11`苹果文档说如果使用 PKCS1 填充，输入块长度应该小于或等于。但在 iOS 5 上，它肯定需要更短的输入。

根据文档，我的密钥块大小为 64，因此输入块的最大长度为 53。在 iOS 5 上，只有 52 或更少可以工作。

这段代码有什么问题？还是 iOS 5 Security.framework 错误？

**UPD：**问题仅使用 512 位密钥重现。尝试使用生成的 1024 位密钥，代码适用于 iOS 5`11`

相关苹果文档：http: [//developer.apple.com/library/ios/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html#//apple_ref/c/func/SecKeyEncrypt](http://developer.apple.com/library/ios/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html#//apple_ref/c/func/SecKeyEncrypt)

# c++ - C++ 数组意外错误

> ID：14481990
> 
> 赞同：0
> 
> 时间：2013-01-23T14:24:11.423
> 
> 标签：c++, arrays

我想制作一个简单的程序，显示一个 16'X' 的正方形，并且您可以更改特定的坐标。一切都完成了，我没有收到任何错误报告，但在程序中事情很奇怪。我应该得到的很容易

```
 XXXX                              
 XXXX
 XXXX
 XXXX 
```

如果我将 1,1 更改为 A 我应该有这个

```
 AXXX
 XXXX
 XXXX
 XXXX 
```

但是当我运行程序时我看到的是：

```
 XXXX
 XXXX
 XXXX
 @ 
```

那么第四行是什么？第一个位置有一个笑脸（我用了@），其余的都是空的。当我将 1,1 更改为任何值时，3,4 也会更改。其他一切正常。如果我尝试更改第四行中的某些内容，程序就会崩溃。如果你想自己测试，我可以上传 .exe #include

```
using namespace std;

int main()
{
    for (;;) {
    int eingabe1;
    int eingabe2;
    char neueingabe;
    char array[4][4];
    array[1][1] = 'X';
    array[1][2] = 'X';
    array[1][3] = 'X';
    array[1][4] = 'X';
    array[2][1] = 'X';
    array[2][2] = 'X';
    array[2][3] = 'X';
    array[2][4] = 'X';
    array[3][1] = 'X';
    array[3][2] = 'X';   
    array[3][3] = 'X';
    array[3][4] = 'X';
    array[4][1] = 'X';
    array[4][2] = 'X';
    array[4][3] = 'X';
    array[4][4] = 'X';
    cout << "koordinaten eingeben" << endl; 
    cin >> eingabe1;
    cin >> eingabe2;
    cout << array[eingabe1][eingabe2] << endl;
    cout << "neueingabe eingeben" << endl;
    cin >> neueingabe;
    array[eingabe1][eingabe2] = neueingabe;
    cout << array[eingabe1][eingabe2]<< endl;
    }
    return 0;
} 
```

我希望你能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:32:57.427

**你正在写你的数组！**

C/C++/C#/Java 和大多数其他语言中的数组从 0 开始编号。

因此对于

```
int arr[4];
// you have:
arr[0]=1;
arr[1]=2;
arr[2]=3;
arr[3]=4;
//arr[4]= A REALLY BIG ERROR; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:32:13.560

从 0 开始索引。因此最大索引为 3,3；最低的是 0,0。访问其他值会导致随机行为 - 在最好的情况下它会使您的程序崩溃。

# python - 从多个列表和变量构建一个复杂的 Python 字典

> ID：14481993
> 
> 赞同：1
> 
> 时间：2013-01-23T14:24:16.883
> 
> 标签：python, list, dictionary, map, lambda

我是 python 和一般编程的新手。我查看了很多关于字典、列表、映射、lambda、列表推导等的问题，但我似乎无法将一个特定的函数放在一起来构建我想要的字典。

我可以描述我想要生成的字典如下：

```
 #goal: make a dictionary that describes a form

    FORMNAME = 'aspnetForm'
    nicks = ['username','password','submit'] #nicknames I want to use
    names = [FIELD_USERNAME, FIELD_PWD, BUTTON_LOGIN] #field names
    values =  ['myusername','mypass',''] #field values
    types =  ['text', 'password', 'submit'] #control types

    INPUTS = [{nicks[0]:{'name':names[0],'value':values[0],'type':types[0]}},
    {nicks[1]:{'name':names[1],'value':values[1],'type':types[1]}},
    {nicks[2]:{'name':names[2],'value':values[2],'type':types[2]}}]

    LOGINFORM = {'name':FORMNAME, 'input':INPUTS} #this is the final dictionary I want to build 
```

请用构建 LOGINFORM 的最佳 python 方法的简单和优雅给我留下深刻印象，以便我可以学习！

我想使用这本字典来填充机械化表格。这是我需要填充的唯一表格。我可以以“长”方式填充此表单，但我想学习如何使用字典以系统的方式填充它。

我在这里的主要目的是学习如何填充字典。但我提前感谢您在我学会如何回答我自己的问题之前没有提出更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:31:18.550

您可以使用[`zip`](http://docs.python.org/2/library/functions.html#zip)：

```
LOGINFORM = {'name': FORMNAME, 'input':
     [{nick: {'name': name, 'value': value, 'type': sort}}
       for nick, name, value, sort in zip(nicks, names, values, types)]} 
```

我避免使用`type`as 变量名，因为它是一个[内置函数/类型](http://docs.python.org/2/library/functions.html#type)，但实际上你可以在这里使用它就好了。