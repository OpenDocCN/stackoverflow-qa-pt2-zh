# StackOverflow 问答 12577000-12577999

# java - SWT 浏览器中的鼠标事件

> ID：12577001
> 
> 赞同：0
> 
> 时间：2012-09-25T06:00:30.280
> 
> 标签：java, browser, eclipse-plugin, swt

我在 Eclipse 视图中嵌入了 SWT 浏览器。是否可以从浏览器中删除鼠标事件。即如果我创建了一个 html 文件并在 SWT 浏览器中显示它，我只想在浏览器中显示 html 文件的内容。没有鼠标事件应该当我单击该组件时发生。

# postgresql - “语言'plpgsql'易失性”是什么意思？

> ID：12577004
> 
> 赞同：10
> 
> 时间：2012-09-25T06:00:45.503
> 
> 标签：postgresql, plpgsql, volatile

当我在 Postgres 数据库中创建或更新函数或过程时，我`LANGUAGE 'plpgsql' VOLATILE`会在函数末尾看到。
这是什么意思，它的目的是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-25T06:06:33.420

来自[Postgres 文档](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)：

> VOLATILE 表示即使在单个表扫描中函数值也可以更改，因此无法进行优化。从这个意义上说，相对较少的数据库函数是易变的；一些例子是 random()、currval()、timeofday()。但请注意，任何具有副作用的函数都必须归类为 volatile，即使其结果是完全可预测的，以防止调用被优化掉；一个例子是 setval()。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T21:45:13.097

尤其重要的是，`LANGUAGE 'plpgsql' VOLATILE`意味着有人没有收到备忘录。

中的语言名称[`CREATE FUNCTION`](https://www.postgresql.org/docs/current/sql-createfunction.html)是一个标识符，不应被引用。应该：

```
LANGUAGE plpgsql VOLATILE 
```

不当行为会导致令人困惑的错误。看：

*   [未找到 PostgreSQL 过程语言“C”](https://stackoverflow.com/questions/12514664/postgresql-procedural-language-c-not-found/12530268#12530268)

关于函数波动：

*   [IMMUTABLE、STABLE 和 VOLATILE 关键字如何影响函数的行为？](https://stackoverflow.com/questions/28569415/how-do-immutable-stable-and-volatile-keywords-effect-behaviour-of-function/28573737#28573737)

# android - 如何在文本视图上设置图像

> ID：12577005
> 
> 赞同：0
> 
> 时间：2012-09-25T06:00:48.913
> 
> 标签：android

我是 android 新手，在我的应用程序中我需要一个文本视图，在该文本视图中，我想首先显示一个图像，然后显示该图像的文本。我也为该文本设置了背景图像。希望有人能提供帮助.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:47:42.503

//你可以使用`drawableLeft, drawableRight, drawableTop, drawableBottom`属性来绘制图像

```
<TextView
        android:layout_height="wrap_content"
        android:layout_marginRight="3dp"
        android:paddingRight="10dp"
        android:text="@string/edit" 
        android:background="@drawable/btn_selector"
       android:drawableLeft="@drawable/ic_cab_done_holo_dark"
/> 
```

[参考这里：](http://developer.android.com/guide/topics/ui/controls/button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:11:49.173

您可以为此使用 TextView 和 Imageview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:02:15.100

在 xml 的标签中使用`android:drawableLeft`属性。`TextView`

# php - 为什么那个正则表达式有效？

> ID：12577013
> 
> 赞同：1
> 
> 时间：2012-09-25T06:02:06.587
> 
> 标签：php, regex

```
'@^(?<!h2.).*\s*\n@' 
```

还有这个

```
'@^(?<!h2.).*\n@' 
```

不要在以下文件上

```
la-la-la

h2\. ohoho

abc
def 
```

由 file_get_contents() 在字符串中读取

实际上，正则表达式在以下表达式中被调用

```
TextileThis(preg_replace('@^(?<!h2.).*\s*\n@','',file_get_contents($that_file))); 
```

所以我只是希望文件的第一个字符串如果不匹配就消失，`^h2\..*\s*$`但由于我不能在 php 中说“不匹配那个正则表达式”，所以我不得不使用这种“lookbehind”形式。

我应该提一下，这两种正则表达式形式都有效，但第一种形式效果很好，第二种形式我得到了`h2.`未经纺织品处理并保持原样的路线。Textile 要求`h2.`字符串与下面的文本间隔一个间隔，仅此而已，所以我只是不明白为什么它没有被解析以及这些正则表达式实际上如何影响行。

我还检查了我的源文件，没有尾随空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:19:24.613

我不明白您的问题，但我尝试向您解释这些正则表达式之间的区别

1.  `@^(?<!h2.).*\s*\n@`

    还有这个

2.  `@^(?<!h2.).*\n@`

`\s`是一个空白字符，这意味着它还包括换行符，例如`\r`and `\n`。

所以**1.**也将删除第二个空行，因为`\s`匹配第一行末尾的换行符，而您的显式`\n`将匹配第二行末尾的换行符。

您的第二个表达式只会删除第一行，因为它`\n`已经在第一行的末尾匹配，并且正则表达式将使第二个空行不匹配。

因此，我假设您对第二个正则表达式的问题来自结果字符串开头的空行。

# objective-c - 如何停止使用自动布局调整 NSView 子视图的大小

> ID：12577016
> 
> 赞同：0
> 
> 时间：2012-09-25T06:02:18.677
> 
> 标签：objective-c, cocoa, nsview, autolayout

我在使用新的自动布局功能时遇到问题。我添加了一个名为 tableView 的 NSView 作为 workingBox 的子视图。workingBox 还包含一些其他使用 Interface Builder 添加的子视图

```
[self.window setFrame:frame display:YES animate:YES];
[workingBox addSubview:tableView]; 
```

我的问题是，如果任何其他子视图触摸 tableView，那么它们将在动画中调整大小。不在添加 tableView 的位置附近的子视图保持正确的大小。我已经尝试在正在调整大小的子视图上设置 NSViewNotSizable resizeMask 但它不起作用。唯一有效的是将子视图向上移动（到错误的位置。

* * *

编辑：我在代码中添加了一个约束：

```
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(divider);
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[divider(==1)]"
                                                               options:0
                                                               metrics:nil
                                                                 views:viewsDictionary];
[workingBox addConstraints:constraints]; 
```

这使 NSView 保持在 1px 高度，但如果我将其锁定在顶部，它会阻止超级视图增长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:15:57.120

我无法通过在代码中添加约束来完成这项工作。但是在 Interface Builder 中，我可以看到有问题的 NSView 存在一个名为“底部对齐”的约束。我在检查器中将其更改为 1 的优先级，它阻止了 NSView 在窗口展开时被拉伸。我认为我在上面的评论中提到的这个自动添加的约束一直是问题所在。

# multithreading - delphi如何释放线程

> ID：12577021
> 
> 赞同：6
> 
> 时间：2012-09-25T06:02:48.130
> 
> 标签：multithreading, delphi

[正如我在这里](https://stackoverflow.com/questions/12575590/why-terminated-property-of-thread-is-set)问的那样，我有多线程应用程序。我想终止线程，并在调用以下方法时启动一个新线程。

```
procedure TFRABData.RefreshDataset;
var
  GridUpdater: TGridUpdater;
begin
  if Assigned(updaterThread) and (updaterThread <> nil) then
  begin
    updaterThread.Terminate;
  end;
  GridUpdater := TGridUpdater.Create(True);
  GridUpdater.OwnerForm := Self;
  updaterThread := GridUpdater;
  GridUpdater.FreeOnTerminate := False;
  GridUpdater.Start;
  CodeSite.Send('RefreshDataset executed');
end 
```

但是，当`FreeOnTerminate`设置为时`True`，我得到访问冲突，但是当`FreeOnTerminate`设置为时`False`，我得到内存泄漏。如何释放线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T17:52:21.890

您需要调用`Terminate()`,`WaitFor()`并`Free()`一起调用，例如：

```
procedure TFRABData.RefreshDataset; 
var 
  GridUpdater: TGridUpdater; 
begin 
  if Assigned(updaterThread) then 
  begin 
    updaterThread.Terminate; 
    updaterThread.WaitFor; 
    FreeAndNil(updaterThread); 
  end; 
  GridUpdater := TGridUpdater.Create(True); 
  GridUpdater.OwnerForm := Self; 
  GridUpdater.Start; 
  updaterThread := GridUpdater; 
  CodeSite.Send('RefreshDataset executed'); 
end; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T06:24:15.683

除了[RRUZ 的回答](https://stackoverflow.com/a/12577099/757830)之外，让它与`FreeOnTerminate = False`：

`Terminate`只是设置标志，它什么都不做。

改变

```
 if Assigned(updaterThread) and (updaterThread <> nil) then 
  begin 
    updaterThread.Terminate; 
  end; 
```

到

```
 if Assigned(updaterThread) then 
  begin 
    updaterThread.Free; 
  end; 
```

`Free`将调用`Terminate`并`WaitFor`随后消除您的内存泄漏。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T06:11:22.777

1.  避免需要启动一个挂起的线程
2.  修改您的`TThread`构造函数以接收 OwnerForm 参数
3.  在线程的构造函数中设置 FreeOnTerminate 值。
4.  以非挂起状态启动 TThread。

像这样。

```
 TGridUpdater = class(TThread)
  private
    FOwnerForm: TForm;
  public
    constructor Create(OwnerForm : TForm); overload;
    destructor Destroy; override;
    procedure Execute; override;
  end;

constructor TGridUpdater.Create(OwnerForm: TForm);
begin
  inherited Create(False);
  FreeOnTerminate := True;
  FOwnerForm:=OwnerForm;
end;

destructor TGridUpdater.Destroy;
begin

  inherited;
end;

procedure TGridUpdater.Execute;
begin
  //your code goes here

end; 
```

现在您可以通过这种方式创建您的 Tthread

```
GridUpdater:=TGridUpdater.Create(Self); //Just set it and forget it 
```

# php - MySQL 查询可以帮助找到类似的客户记录吗？

> ID：12577024
> 
> 赞同：1
> 
> 时间：2012-09-25T06:03:06.403
> 
> 标签：php, mysql, database, match

我有一个提供给我的公司目录，他们希望在 MySQL 数据库中存储和更新。每条公司记录都没有唯一标识符，例如公司 #1234。

这些字段是邮件列表、联系人姓名、公司名称、街道地址、城市、州、邮政编码、电话号码和公司类型的典型字段。更新将再次以 CSV 文件的形式发送给我，没有公司唯一标识符号。

如何将数据库中存储的记录与新记录匹配，以便更新？在这个行业中，联系人姓名可以更改，甚至公司名称也可以更改，因为他们会添加和减去合作伙伴。他们的街道地址可以改变，因为当他们搬家时，他们甚至可以改变他们的电话号码。大多数公司都有一个网站 URL，所以希望它不会经常改变，但它也很容易改变。

我在 MySQL 中看到有类似的匹配 %，这是将记录与新信息匹配的答案吗？

如果有 PHP 解决方案，我在 PHP 中工作。在此先感谢帮助我的好心人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:24:21.313

没有主键，总是很棘手。

一条线解决方案，确定最适合您要求的规则。

如果我是你，我首先会去客户那里确定一些识别相似记录的规则。这一步是必要的，因为没有主键，因为总是有可能重复输入或更新错误的记录。

规则可以很简单，例如：

```
1\. Available fileds:
    contact name,
    company name,
    street address,
    city,
    state,
    zip code,
    phone number and
    type of company (I Hope this is industry)
2\. We will first match company name for similarity like
    select * from table_name where company_name like '%$company_name%'
3\. For all found records, match zip code and phone number. If match, break, record needs to be updated
4\. If not match found in step 3, match street address. If match, break, record needs to be updated
5\. & so on. 
```

您的客户是决定这些规则的最佳人选，因为他是产品的所有者。

另一方面，向客户询问规则对于保证您的安全也很重要，因为**在没有主键的情况下**，即使经过所有的照顾，也总是有可能复制记录和/或更新错误的记录。您可以通过良好的规则尽量减少机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:49:51.867

正如您所说，表的所有字段都可以更改，那么我认为没有简单的方法可以在您选择的任何算法时正确更新表。
实现此目的的方法之一可能是要求人员/系统（向您发送更新的记录）也包括 csv 文件中更新字段的旧值。如果您有旧值，您可以轻松地将它们与当前记录匹配并使用新值更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:10:29.203

这是一个相当笼统的问题，但解决方案本身在不同项目之间有些独特。

我将遍历按更改时间（或创建日期或更新时间戳等）排序的所有记录。接下来，我将匹配所有具有类似主要字段的条目：公司名称、地址（尽管这可能有风险）、电话或 url（仅解析域）。然后，我会递归地遍历所有找到的条目，直到找不到更多结果。

只要它们没有同时更改所有主要列，此算法将有助于找到相同的条目。如果他们这样做了，就无法以编程方式说它是同一家公司。

这将链接行与看似现在的连接（示例中的第 1 行和第 3 行）

例子：

```
2001/01/01 Awesome firm, awesome.com
2002/02/02 Awesome firm, newaddress.com // linked with the first row over company name
2010/12/05 Ohsome inc, newaddress.com // linked over url 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:16:31.803

在我早期的 Sql server 项目之一中，我遇到了类似的场景。我曾经做以下事情来处理它。

1.通常会有2种文件——

a）完整提要（每周频率）这将包含供应商数据库中的所有公司 b）增量提要（每日频率）这将仅包含不在完整提要和更新中的新记录。（插入-I，更新-U作为增量提要中的标志）

2.所以一旦我收到完整的提要，我将在一周内用完整的提要刷新我的数据库表。此外，在这里我将拥有每个公司记录的内部 ID。（这些 ID 用于内部目的）

3.每天我都会根据标志（I-insert，U-update）处理增量提要。

4.这里有一个非常重要的事情是管理映射表。一旦提要到来，只需为其分配一个新的内部ID。

5.为了比较数据以避免重复，我曾经使用模糊算法来获取所有潜在的匹配，然后使用通配符来过滤和识别哪些是新的和重复的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T06:18:03.877

看看[Damerau-Levenshtein](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)距离算法。它计算两个字符串之间的“距离”，并确定将一个字符串转换为另一个字符串需要多少步。步数越少，两根弦越接近。

[本文](http://samjlevy.com/2011/03/mysql-levenshtein-and-damerau-levenshtein-udfs/)展示了作为 MySQL 存储函数实现的算法。 [这是](https://stackoverflow.com/questions/3164763/damerau-levenshtein-php)PHP版本。

该算法比 LIKE 或 SOUNDEX 好得多。

# html - html iframe：如何为以下代码放置 iframe

> ID：12577026
> 
> 赞同：0
> 
> 时间：2012-09-25T06:03:25.597
> 
> 标签：html, iframe

我需要在下面为我的 html 代码包含 iframe。如何执行此操作？以下是我的代码：

```
 <html>
   <head></head>
      <body>
         <table>
    <tr>
         <% dim CountFlg
                CountFlg = 0
                for i=0 to XmlNodes.length-1
                    if CountFlg <= 2 then %>
                        <td class="style3" >
                            <span class="style4">
                                <b><%=XmlNodes.item(i).getAttribute("Name")%></b>
                            </span>&nbsp;
                        </td>
                        <TD>
                            <input class="TextArea" name="<% i % >" id="<% i %>" style="height:35px;overflow:auto;padding-left:80px;" rows="5"cols="10"> </input>
                        </TD>
                        <% CountFlg=CountFlg+1
                    end if
                next%>
            </tr>
           </table>
         </body>
        </html> 
```

我在这里跳过了其余的代码。有没有办法在 iframe 中只包含 tr 标记？我尝试在这里添加 iframe tat 没有`t work.I don`单独的 html 内容文件，我在经典的 asp 文件中构建这个 html。所以请提出一些答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:08:18.410

iframe 的 html 代码是...

```
<iframe class="IFrameClass" src="" ></iframe> 
```

在 src 中，您可以包含任何 html 文件的路径或您需要的任何内容。

有关更多详细信息，请访问[此链接](http://www.w3schools.com/tags/tag_iframe.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:04:45.380

你不能。

`iframe`任何地方都不允许使用 a ，`tr`并且 HTML 文档的根元素必须`html`不是`tr`，因此您不能拥有以 . 开头的 HTML 文档`tr`。

# javascript - 如何编写一个新的脚本数据集，该数据集使用来自 BIRT 中其他数据集的结果？

> ID：12577027
> 
> 赞同：0
> 
> 时间：2012-09-25T06:03:35.257
> 
> 标签：javascript, birt

我有 2 组与工业展览会的酒店预订相关的压缩数据。一个是酒店预订列表，第二个是实际入住列表。

我需要扩展它以显示每家酒店和每一天的预订和入住情况。

由于数据被压缩（一天没有预订，没有数据库记录），我想我可以创建一个脚本数据集来扩展数据并填充空白的日子。然后可以将来自 2 个数据集的信息汇集到脚本中。

我怎么能这样做？我可以将数据集结果作为参数传递吗？我可以从脚本数据集中执行 SQL 数据集吗？

这是一个例子：

DS1（块预留）

```
HotelA, RoomTypeX, From1, To1
HotelA, RoomTypeX, From1, To1
HotelA, RoomTypeX, From2, To2
HotelA, RoomTypeY, From3, To3 
```

DS2（占用）

```
Hotel   Room       Date  Rooms booked
-------------------------------------
HotelA, RoomTypeX, Day1, 0
HotelA, RoomTypeX, Day2, 1
HotelA, RoomTypeX, Day3, 3
HotelA, RoomTypeX, Day4, 2 
```

报告

```
Hotel   Room       Day1   Day2   Day3 ....
------------------------------------------
HotelA  RoomTypeX  0/2    1/3    3/3
HotelA  RoomTypeY  0/0    1/1    1/1 
```

报告显示每家酒店在展会每一天的入住率和预订情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:24:55.637

为什么不使用带有脚本数据集的联合数据集来填充日期，就像这里发布的那样：http: [//www.birt-exchange.org/org/devshare/designing-birt-reports/1543-joint-data-设置为垫出日期/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1543-joint-data-set-to-pad-out-dates/)

# mongodb - “errmsg”：“异常：映射调用失败：JS 错误：TypeError：this.characters 没有属性 nofile_b:1”，

> ID：12577030
> 
> 赞同：0
> 
> 时间：2012-09-25T06:03:59.170
> 
> 标签：mongodb

我使用以下脚本来拆分和计算 MongoDB 中字符列中的数据。`null`处理值时出现错误。请帮助我。

```
map = function() {
    var array = this.characters.split(',');
    emit(this.characters, array.length);
}

reduce = function(key, values) {
    return values[0];
}

result = db.runCommand({
    "mapreduce" : "book", 
    "map" : map,
    "reduce" : reduce,
    "out" : "comma_result1"
}); 
```

我收到此错误：

```
"errmsg" : "exception: map invoke failed: JS Error: TypeError: this.characters has no properties nofile_b:1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:50:05.367

如果 this.characters 为 null，调用 this.characters.split() 将产生异常。

# sorting - 没有交易破坏者的 STL 排序

> ID：12577032
> 
> 赞同：0
> 
> 时间：2012-09-25T06:04:04.687
> 
> 标签：sorting, stl

我们的游戏引擎使用 STL使用模板函数`sort`对各种不同的对象进行排序。`sort`据我了解，比较逻辑的要求是您必须在它可能在内部进行反向排序的基础上编写它（即反转配对，例如 from `(a,b)`to `(b,a)`）。

所以通常我的比较函数如下所示：

```
bool CompareSubGroupReqsByDescendingFillPriority::operator()
    ( const ScenSubGroupReq&  lhs, 
      const ScenSubGroupReq&  rhs ) const
{
    if( lhs.mFillPriority > rhs.mFillPriority ) return true;
    else if( lhs.mFillPriority < rhs.mFillPriority ) return false;
    else return lhs.mForceGroup->ObjectID() > rhs.mForceGroup->ObjectID();
} 
```

我将“else”语句称为“交易破坏者” - 即。它必须能够解决 lhs 和 rhs 相同的情况。我通常在对持久对象进行排序时使用对象 ID。

我的问题是，当您对简单数据类型（例如短裤）的非持久对象进行排序时，如何创建交易破坏者？

这是我正在努力的例子：

```
bool
ComparePhaseLineIndexesByAscendingValue::operator() ( const short  lhs, 
                                                      const short  rhs ) const
{
    if( lhs < rhs ) return true;
    else if( lhs > rhs ) return false;
    else
    {
      // should never be here as no two phase lines should have the same index
      FPAssert( false );
      return false;
    }
} 
```

问题是我一直在对此进行测试并找到了一个有效的案例，其中我可以有两条具有相同索引的相线。我不在乎哪个具有相同值的条目首先结束。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:10:05.953

从技术上讲，排序函数采用小于运算符。您尝试做的似乎与确保以特定顺序返回甚至相等的对象有关。通常你会做

```
bool
ComparePhaseLineIndexesByAscendingValue::operator() (   const short  lhs, 
                                                        const short  rhs ) const
{
    return lhs < rhs;
} 
```

虽然通常内置类型不需要比较函数（我认为它是任何指定了 < 运算符的类型）。

# lettuce - 使用生菜“世界”时出现属性错误

> ID：12577033
> 
> 赞同：1
> 
> 时间：2012-09-25T06:04:04.713
> 
> 标签：lettuce

我有两个文件：

步骤.py：

```
from lettuce import *
from splinter.browser import Browser

@before.harvest
def set_browser():
  world.browser = Browser('webdriver.chrome')
@step(u'Given I visit "([^"]*)"')
def given_i_visit(step, url):
  world.browser.visit(url) 
```

测试功能：

```
Feature: Do some basic tests
  Scenario: Check whether the website is accessable
    Given I visit "/" 
```

对他们运行生菜会返回：

```
Feature: Do some basic tests                        # features/test.feature:1

  Scenario: Check whether the website is accessable # features/test.feature:2
  Given I visit "/"                               # features/steps.py:8
  Traceback (most recent call last):
    File "/..../site-packages/lettuce/core.py", line 125, in __call__
      ret = self.function(self.step, *args, **kw)
    File "/..../test/features/steps.py", line 9, in given_i_visit
      world.browser.visit(url)
  AttributeError: 'thread._local' object has no attribute 'browser'

1 feature (0 passed)
1 scenario (0 passed)
1 step (1 failed, 0 passed) 
```

关于可能出现问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:00:31.083

虽然不在文档中。将terrain.py 文件与您的步骤和功能文件放在同一目录中。用任何值初始化世界属性，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T12:58:18.740

问题是 before.harvest 需要一些数据，所以正确的代码如下：

```
from lettuce import *
from splinter import Browser

@before.harvest
def set_browser(data):
  world.browser = Browser('webdriver.chrome')

@step(u'Given I visit "([^"]*)"')
 def given_i_visit(step, url):
  world.browser.visit(url) 
```

希望能帮助到你！

# visual-studio-lightswitch - 当应用程序处于空闲状态时，LightSwitch 数据库连接丢失

> ID：12577034
> 
> 赞同：0
> 
> 时间：2012-09-25T06:04:09.143
> 
> 标签：visual-studio-lightswitch

我正在将 sql server 数据库用于 lightswitch 应用程序。应用程序中的所有内容在使用时都可以正常工作。当闲置一段时间后，数据库连接丢失，我需要关闭并再次打开应用程序以获取数据库连接。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:30:19.967

您的问题已在您提出相同问题的 LightSwitch 论坛帖子中得到解答。

[当应用程序处于空闲状态时，LightSwitch 数据库连接丢失](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/177427d6-9470-429f-8f04-9589a74f6e3a/#8ced3bdd-4c85-46a0-b97b-a9ee5d900d97)

```
Public Class Application

    Private Sub Application_Initialize()
        Me.Details.ClientTimeout = 1000
    End Sub
End Class 
```

# c++ - linux下用boost::thread创建boost::asio工作线程

> ID：12577035
> 
> 赞同：2
> 
> 时间：2012-09-25T06:04:11.587
> 
> 标签：c++, boost, boost-asio, boost-thread

我在 windows 下使用 boost 已经有一段时间了，现在需要迁移几个现有的应用程序以在 Ubuntu 12 盒子上运行以进行演示。这个应用程序创建了两个工作线程，一个用于记录传入的 UDP 数据，另一个用于侦听单独的端口并将该数据打印到屏幕上。

我已经完成了所有其他工作，但由于某种原因，以下行因“boost::asio::io_service::run 的无效重载”错误而失败

```
m_logThread = new boost::thread( boost::bind( &boost::asio::io_service::run, m_ioServicePtr )); 
```

这条线在我的 Win32 机器上运行良好，但在 linux 上给出了无效的重载错误。

还有另外两个错误：

```
boost::bind is ambiguous 
```

和

```
type boost::thread could not be resolved 
```

但我很确定它们源于另一个错误。我肯定包括了 boost 头文件，因为编译器并没有抱怨我的类有指向 IO 服务和线程的指针作为成员变量，它只是应该产生工作线程的行，这就是问题所在。

我相信我已经正确安装了 boost，因为它对标题位置非常满意。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:14:58.613

错误是`boost::asio::io_service::run`重载，在这种情况下，您必须[解决歧义](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html#err_overloaded)。

# android - 当我点击后退按钮时广播接收器停止

> ID：12577036
> 
> 赞同：0
> 
> 时间：2012-09-25T06:04:22.793
> 
> 标签：android, sms, android-contentprovider

我正在开发一个 Android 短信应用程序。我用来发送短信的以下代码。

```
public void sendSms(final String phoneNumber, final String message){

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";
    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);
    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED),0);

   //--- When the SMS has been sent --

    sendBroadcastReceiver=new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            switch (getResultCode()) {

                case Activity.RESULT_OK:

                    Toast.makeText(getBaseContext(), "SMS sent",
                        Toast.LENGTH_SHORT).show();

                    ContentValues values = new ContentValues();
                    values.put("address", phoneNumber);
                    values.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/sent"), values);

                    break;

                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                        Toast.LENGTH_SHORT).show();

                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                        Toast.LENGTH_SHORT).show();

                    ContentValues values1 = new ContentValues();

                    values1.put("address", phoneNumber);
                    values1.put("body", message);
                    getContentResolver().insert(Uri.parse("content://sms/queued"), values1);

                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:

                    Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:

                    Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                    break;

                default:
                    break;
            }

            context.unregisterReceiver(this);
        }
    };

    SmsManager sms = SmsManager.getDefault();

        registerReceiver(sendBroadcastReceiver , new IntentFilter(SENT));
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

} 
```

当我保持屏幕直到发送短信时它工作正常。它会将短信写入内容/短信/已发送或排队取决于发送的报告。但是如果我在发送短信时按下后退按钮。它将发送短信但不写入内容/短信/已发送或排队也不会取消注册广播也。

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:21:23.447

当按下后退时，您基本上是在退出您的应用程序。因此，为了控制按下后退时的行为，请覆盖 onBackPressed()。在这里你可以确保内容被写入，另外你需要在这里取消注册广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:41:43.403

我已经通过使用服务解决了我的问题。使用 startservice() 和 stopservice() 我可以管理注册。感谢朋友的建议。@Vikki ...您的回答给了我钥匙。

# android - 切换播放和暂停图像/音频 Android

> ID：12577041
> 
> 赞同：1
> 
> 时间：2012-09-25T06:04:56.380
> 
> 标签：android, android-mediaplayer, android-image

我的应用程序的播放和暂停按钮有问题。我正在尝试这样做，以便当我单击“播放”时播放音乐并显示暂停按钮，当我再次单击该按钮时，音乐暂停并再次显示播放按钮。我觉得我很接近，但就是无法得到它！我可以让音频播放和一次更改图像的按钮，但是我无法暂停它并让图像切换回来。请帮忙！我的代码如下：

```
button3.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(mysong.isPlaying()){
            mysong.pause();
            button3.setVisibility(ImageButton.VISIBLE);
            pausebutton3.setVisibility(ImageButton.GONE);

        }else {
            mysong.start();
                            button3.setVisibility(ImageButton.GONE)
                            pausebutton3.setVisibility(ImageButton.VISIBLE)

                 }
    }
}); 
```

当我现在这样设置时，音乐将播放，播放按钮将与暂停按钮交换（应该如此），但现在我无法暂停音乐和恢复图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:30:02.277

您的不“切换回”的原因是因为“else”语句中没有任何内容告诉它进行任何 UI 更改。

如果它正在播放并且按下按钮，则 button3 变为 VISIBLE 并且 mysong 已消失，并且 isPlaying() 变为 false。但是如果再次按下按钮，因为 isPlaying() 为 false，它直接进入 else，并调用 mysong.start(); - 没有什么可以告诉 mysong 或 button3 的可见性变回来。

或者，如果您只想更改图像（而不是隐藏和显示按钮），请尝试使用 ImageButton 和 setImageResource()；

```
 mPauseButton.setOnClickListener(new View.OnClickListener() { 

        public void onClick(View v) { 
            if (mysong.isPlaying()) {
                mysong.pause();
                button3.setImageResource(R.drawable.btn_play);  //Your playbutton image
            } else {
                mysong.start();
                button3.setImageResource(R.drawable.btn_pause);  //Your pausebutton image
            }
            .
            .
            . 
```

我注意到的另一件事是您正在尝试设置 mySong 和 button3 的可见性（mysong 似乎是您的 mediaPlayer - 它没有“可见性”并且不是 ImageButton）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:17:03.107

如果我理解，您有一个按钮，可以在播放/暂停之间切换。

```
button3.setOnClickListener(new View.OnClickListener() { 

public void onClick(View v) { 
        if(mysong.isPlaying()){ 
        mysong.pause(); 
        button3.setVisibility(ImageButton.VISIBLE);
        button3.setText("Pause");
        mysong.setVisibility(ImageButton.GONE); 
    } else { 
        mysong.start();
        button3.setText("Play");
    } 
} 
```

});

# android-layout - 如何在android项目中添加子线性布局

> ID：12577043
> 
> 赞同：1
> 
> 时间：2012-09-25T06:05:19.933
> 
> 标签：android-layout

这是我的 XML 文件代码我想将 3 个子线性布局添加到其父布局中怎么做

```
 <LinearLayout
    android:id="@+id/llTopMain"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    >

    <TextView  
    android:layout_width="fill_parent" 
    android:background= "#F778A1"
    android:layout_height="50dp"/>

 </LinearLayout>

 <LinearLayout android:layout_above="@+id/llBottomMain"
    android:layout_below="@id/llTopMain"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    >
 <LinearLayout
    android:id="@+id/llMidMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    >

    <LinearLayout
    android:id="@+id/llMidMainExt1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    >

    <TextView  
    android:layout_width="fill_parent" 
    android:background= "#FFFFFF"
    android:layout_height="50dp"
    />

    </LinearLayout>

    ***<LinearLayout
    android:id="@+id/llMidMainExt2"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    >***

    <TextView  
    android:layout_width="fill_parent" 
    android:background= "#0F0F0F"
    android:layout_height="50dp"
    />

    </LinearLayout>

 </LinearLayout>

</LinearLayout>

 <LinearLayout
    android:id="@+id/llBottomMain"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    >

    <TextView  
    android:layout_width="fill_parent" 
    android:background= "#F778A1"
    android:layout_height="50dp"/>

 </LinearLayout>

</RelativeLayout> 
```

在这里我无法将 android:id="@+id/llMidMainExt2" 添加到其父布局如何解决这个问题？提前致谢。

# python - 在 iOS 上使用 Django-social-auth 和 sweetpie 登录

> ID：12577045
> 
> 赞同：2
> 
> 时间：2012-09-25T06:05:25.350
> 
> 标签：python, ios, django, api, django-socialauth

我正在为 iOS 应用程序使用美味的 API 构建一个 API。

我可以很好地处理正常的身份验证/授权，但是在使用 django-social-auth 注册/登录/链接 THROUGH Tastypie 时我有点困惑。

例如，如果我想使用 django-social-auth 和 sweetpie 在 iOS 应用程序上验证或注册用户，我会怎么做？有什么建议么？我看错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T16:17:32.923

您不能直接使用 django-social-auth。

要进行 Facebook 登录，您需要使用 iOS 版 Facebook SDK (https://developers.facebook.com/docs/reference/iossdk/)。

它将返回您将发送到使用 TastyPie 创建的 API 的访问令牌。

当您拥有访问令牌时，您可以在此基础上注册一个新用户。使用 Facebook Graph API，您可以获得用户的姓名和其他信息。确保保存访问令牌，以便识别返回用户。

注册或登录用户后，返回特定于该用户的“令牌”。您的站点生成令牌。您将使用该令牌与您的站点进行通信。

# memory - 由于更高的内存消耗，32 位应用程序在 64 位操作系统中崩溃

> ID：12577050
> 
> 赞同：0
> 
> 时间：2012-09-25T06:05:48.533
> 
> 标签：memory, memory-management, 64-bit, wow64

我有一个 32 位版本的 .net 应用程序在两台不同的机器上运行。一个是 32 位机器，另一个是 64 位机器。

在 64 位环境中，32 位应用程序在 WoW64 环境中运行。

64 位机器配置为 4GB RAM。

但是具有相同工作流程的相同应用程序在 32 位操作系统中消耗 500MB，而在 64 位操作系统中消耗超过 1GB 并崩溃。

我阅读了以下与此相关的文章。

[http://blogs.sepago.de/helge/2008/03/11/windows-x64-all-the-same-yet-very-different-part-5](http://blogs.sepago.de/helge/2008/03/11/windows-x64-all-the-same-yet-very-different-part-5)

[http://blogs.citrix.com/2011/10/13/wow64-memory-mapping-of-32bit-apps-running-on-a-64bit-windows/](http://blogs.citrix.com/2011/10/13/wow64-memory-mapping-of-32bit-apps-running-on-a-64bit-windows/)

但他们的分析不是确定性的。你们中有人遇到过这个问题吗？是否有任何建议让 32 位应用程序在 64 位环境中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T21:42:52.160

64位模式的区别是：

*   64 位调用堆栈而不是 32 位调用堆栈。另外还有 WOW64 调用堆栈

*   使用 64 位数据类型而不是 32 位数据类型

*   加载 64 位 DLL 而不是 32 位 DLL

500 MB 仅在调用堆栈中是不可能的。堆栈通常保留 1 MB，但仅提交 64 kB。

数据类型可能是个问题，特别是如果您有一个为 AnyCPU 编译的 .NET 应用程序。您确定您编译的是纯 32 位应用程序吗？

DLL 可以产生巨大的影响。尤其是一些 SQL DLL 的大小为 130 MB，因此加载 64 位版本会产生巨大的差异。它仍然没有解释双倍的内存使用，并且仅适用于 AnyCPU .NET 应用程序。

下一个问题是：为什么应用程序在 64 位操作系统上已经崩溃了 1 GB 而不是接近 2 GB（32 位）或 4 GB（AnyCPU）？你确定你测量的东西是正确的吗？也许您只测量了私有字节，甚至测量了工作集大小，这在这里都没有真正的帮助。

# android - 具有动态图形用户界面的动态 ListView

> ID：12577052
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:06:04.803
> 
> 标签：android, listview

> **可能重复：**
> [带动态 GUI 的动态 ListView](https://stackoverflow.com/questions/12576544/dynamic-listview-with-dynamic-gui)

我必须从 sqlite 数据库中获取数据。数据库将包含 countryname 、 card name 和 card id 和 status，我必须显示 countryname 然后动态显示卡列表，例如，如果美国有四张卡，那么在列表视图中它将显示 USA 然后是所有四张卡，然后是 UK 然后是 UK 卡和所以它应该用每个项目的复选框来实现，如果用户点击假设一张显示在美国类别中的卡，那么我必须更新它在数据库中的状态，例如如果在美国检查了一张卡，那么在数据库中我们必须为其他卡更新“是”类似的功能..那么如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:04:12.890

我认为您是在询问动态列表视图，其列表单元格中带有复选框。

首先，您需要一个适配器来填写您的列表...像这样..

```
 ListView listView=(ListView)findViewById(R.id.listView);
 listView.setAdapter(new MyListAdapter (<Your ArrayList>)); 
```

现在，当我们在列表中使用复选框或编辑框时。然后当我们滚动列表时，它每次都会调用它的 getview 方法。所以我们需要管理组件的价值或状态。在这里管理复选框的状态，我使用了布尔类型的 Arraylist。

为列表的单元格制作一个 XML 文件。将列表单元组件的侦听器放在 getview 方法中。

```
 public class MyListAdapter extends BaseAdapter 
{
 private ArrayList<HashMap<String, String>> data;
 private ArrayList<Boolean> checks=new ArrayList<Boolean>();

  public MyListAdapter ( ArrayList<HashMap<String, String>> d)
    {

    data=d;
    inflater =         (LayoutInflater)baseActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

for (int i = 0; i < d.size(); i++) 
{
        checks.add(i, false);//as first no check box is checked. So fill it with false value

}
}

 public int getCount()
{
    return data.size();
}

public Object getItem(int position)
{
    return position;
}

public long getItemId(int position) 
{
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{
View vi=convertView;

    if(convertView==null)

      vi = inflater.inflate(R.layout.list_row, null);

      name = (TextView)vi.findViewById(R.id.name);// name
      checkBox=(CheckBox)vi.findViewById(R.id.check_box);
      email_id = (TextView)vi.findViewById(R.id.e_mail_id); // email ID
      mobile_no = (TextView)vi.findViewById(R.id.mobile_no); // mobile

      checkBox.setTag(Integer.valueOf(position));
      checkBox.setOnClickListener(this);
      checkBox.setChecked(checks.get(position));

    name.setText(<set name form any data source>);
    email_id.setText(<set emailid form any data source>);
    mobile_no.setText(<set mobile form any data source>);

    return vi;
}

 } 
```

希望这对您有所帮助。干杯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:13:57.417

因此，在您的情况下，您必须实现 Multiselect Expandable listview..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:50:57.073

好的，所以您首先需要为`ListView`要膨胀的每一行创建一个 xml 文件。因此，您的国家/地区名称等有一些文本视图。但现在棘手的部分是根据数量动态添加这些“卡片”：

在每一行的 xml 中，添加一个`LinearLayout`您希望指定卡片出现的位置，然后在（您创建的自定义卡片）`getView()`内部的方法中，`ArrayAdapter`您需要执行以下操作：

```
cardsLayout = (LinearLayout) v.findViewById(R.id.cards_layout);
cardsLayout.removeAllViews(); // rows are reused in listview, so this prevent them to be duplicated
ImageView image;
for(int i = 0; i < country.getCards(); i++){ // I assume you're using array for cards of each country
    image = new ImageView(ActivityName.this);
    layoutParams = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1.0f);
    image.setLayoutParams(layoutParams);
    image.setImageBitmap(someBitmapImage);
    imageLayout.addView(image);
{ 
```

我假设您知道如何创建自己的适配器。这段代码只是动态地创建`ImageViews`并将其权重设置为 1，因此它们在行中的大小将相等。如果您需要复选框或其他内容，您可以通过将 更改`ImageView`为其他内容来使用相同的方法。

# search - Google 正在搜索 AWS Elasticbeans 站点 (mysite.elasticbeanstalk.com)，但不是我的站点 (mysite.com)。该怎么办？

> ID：12577055
> 
> 赞同：2
> 
> 时间：2012-09-25T06:06:24.853
> 
> 标签：search, amazon-web-services, private, amazon-elastic-beanstalk

我在 AWS 上测试我的网站。它就像 mysitetest.elasticbeanstalk.com。但我原来的网站是 mysite.com。现在，每当我搜索 mysite 时，谷歌都会显示 mysitetest.elasticbeanstalk.com 链接，但不会显示我的原始网站。我已经为我的网站完成了网站管理员工具的所有验证。有什么方法可以让 elasticbeanstalk 网站只对我完全私有并且对谷歌不可见？如果有更多建议，请给我。欢迎大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T22:59:49.157

您应该为您的测试站点设置一个 robots.txt 文件，以告诉 Google/crawlers 将测试站点重定向到生产站点。

示例文章：[http ://www.bruceclay.com/blog/how-to-properly-implement-a-301-redirect/](http://www.bruceclay.com/blog/how-to-properly-implement-a-301-redirect/)

你未来的测试网站应该有一个 robots.txt 告诉谷歌不要抓取它。

# android - 给apk密码

> ID：12577058
> 
> 赞同：0
> 
> 时间：2012-09-25T06:06:48.533
> 
> 标签：android, password-protection, apk

我已经开发了一个应用程序并制作了该应用程序的 apk。现在我想为其提供密码，以便当任何人尝试安装该应用程序时它会要求输入密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:08:52.793

您不能以这种方式保护 apk 文件，但是您可以在应用程序中添加一个屏幕来“验证”安装，这是他们应该输入密码的地方，该密码应该只输入一次并记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:44:36.690

你不能简单地这样做。您是否正在尝试许可您的软件？如果是这样，请使用一些登录凭据或用户键入许可证密钥的字段创建一个[启动画面。](http://www.droidnova.com/how-to-create-a-splash-screen,561.html)`EditText`确保启动画面也具有正确的`Intent Filter`，以及：

```
 <activity
        android:name=".Splash"
        android:theme="@android:style/Theme.Black.NoTitleBar" 
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# java - 动态 Jasper 因大量数据而崩溃

> ID：12577060
> 
> 赞同：-2
> 
> 时间：2012-09-25T06:07:01.013
> 
> 标签：java, jsp, tomcat, jasper-reports, dynamic-jasper

当我在我的 jsp 应用程序中向动态 jasper 输入大量数据时，动态 jasper 语句 exporter.exportreport() 会使 tomcat 服务器崩溃，从而导致终止。有什么解决办法吗？等待您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:45:15.940

（对不起我的英语）

我已经使用 DJ 很长时间了，前段时间我遇到了这个问题。我解决了将报告内容保存到文件而不是字节数组的问题。

我导出pdf报告的方法是这样的：

```
private File exportReportPDF(JasperPrint jp, File file) throws JRException,  FileNotFoundException {
    JRExporter exporter = new JRPdfExporter();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jp);
    exporter.setParameter(JRExporterParameter.OUTPUT_FILE, file);
    exporter.exportReport();
    return file;
} 
```

当然，在这种情况下，您必须将文件和 Jasperprint 传递给此方法并使用返回的文件。在这里，我们有超过 500Mb 的报告

干杯，

# python - Django-PuSH 包不工作

> ID：12577062
> 
> 赞同：1
> 
> 时间：2012-09-25T06:07:13.510
> 
> 标签：python, django, websub

我写了一个简单的 django 项目，它使用 pubsubhubbub 订阅我的博客并流式传输最新文章。我使用 django-push 包来完成它

但是，它不起作用，也没有显示错误。那么，任何人都可以帮助我吗？

这是项目：[http ://dpaste.com/805590/](http://dpaste.com/805590/)

我使用[http://pubsubhubbub.appspot.com/](http://pubsubhubbub.appspot.com/)作为 Hub 服务器（由博客支持 - Google 的博客）

# vba - 循环遍历 A 列中的 B 列 foreach 值以查找重复项

> ID：12577064
> 
> 赞同：0
> 
> 时间：2012-09-25T06:07:21.637
> 
> 标签：vba, excel, excel-formula

我在遍历 Excel 电子表格中的数据时遇到问题。

FOR EACH 列 A 中的值在 B 列中的所有值中搜索值。**如果为真**，则插入“重复”

到目前为止，我已经尝试了多种变体：`=IF(A2=$B$2:$B$14,"duplicate",)`

我已经尝试过，但`VLOOKUP`一直无法解决这个问题。`MATCH``INDEX``MATCH`

我相信 vba 脚本会更有效，但似乎无法弄清楚，你能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T06:40:42.333

正如您的帖子所建议的那样，您已尝试使用公式来执行此操作

```
=IF(ISNA(MATCH(A2,B:B,0)),"","duplicate") 
```

对于 VBA 解决方案，试试这个

```
Sub CheckForDups()
    Dim rSource As Range
    Dim rCompare As Range
    Dim rResult As Range
    Dim vSource As Variant
    Dim vComapre As Variant
    Dim vResult As Variant
    Dim sh As Worksheet
    Dim i As Long

    Set sh = ActiveSheet
    Set rSource = Application.Intersect(sh.UsedRange, sh.Columns(1))
    Set rCompare = Application.Intersect(sh.UsedRange, sh.Columns(2))
    Set rResult = Application.Intersect(sh.UsedRange, sh.Columns(3))
    vSource = rSource
    vComapre = rCompare
    rResult.Clear
    vResult = rResult
    For i = 2 To UBound(vSource, 1)
        If Not IsError(Application.Match(vSource(i, 1), rCompare, 0)) Then
            vResult(i, 1) = "duplicate"
        End If
    Next
    rResult = vResult
End Sub 
```

# mongodb - 如何在 Mongoid 中创建可选引用/嵌入？

> ID：12577065
> 
> 赞同：1
> 
> 时间：2012-09-25T06:07:28.983
> 
> 标签：mongodb, mongoid, nosql

我们在 Mongoid 中有一个 Item 数据库，我们在其中存储不同项目的上下文可选额外字段，例如：

```
class Item
  include Mongoid::Document

  field :name, type: String
end 
```

所以我可以做类似的事情：

```
a = Item.new
a.name = "Potato Chips"
a[:flavor] = "Barbecue"
a.save
b = Item.new
b.name = "Underwear"
b[:size] = "XL"
b.save
> Item.first.flavor
 => "Barbecue" 
> Item.last.size
 => "XL" 
```

但是，假设我们想做：

```
class Flavor
  include Mongoid::Document

  field :name, type: String
  field :ingredients, type: Array
end 
```

如果你这样做了：

```
f = Flavor.create({name: "Barbecue", ingredients: ["salt", "sugar"]})
a[:flavor] = f
a.save 
```

你得到：

```
NoMethodError: undefined method `__bson_dump__' for #<Flavor:0x007fb34d3c1718> 
```

我怎么做才能去：

```
Item.first.flavor.ingredients[0] 
```

# c - 试图在 C 中取消引用/使用双指针

> ID：12577066
> 
> 赞同：1
> 
> 时间：2012-09-25T06:07:30.733
> 
> 标签：c, pointers, dynamic-memory-allocation

所以我在 C 中使用/取消引用双指针时遇到问题。它给了我对成员*****的错误消息请求，而不是结构或联合。现在，我看到很多类似问题的帖子，但是，解决方案喜欢做`(*head)`和`head = &temp`不工作。有人可以帮我吗？

```
vertex_t **create_graph(int argc, char *argv[]) {
   vertex_t **head, *temp;

   temp = malloc(sizeof(vertex_t));

   head = head->temp;
   head->name = argv[1];

   head->next = malloc(sizeof(vertex_t));
   head->next->name = argv[2];
   head->next->next = 0;

   head->adj_list = malloc(sizeof(adj_vertex_t));
   head->adj_list->edge_weight = atoi(argv[3]);
   head->adj_list->vertex = head->next;

   head->next->adj_list = malloc(sizeof(adj_vertex_t));
   head->next->adj_list->edge_weight = atoi(argv[3]);
   head->adj_list->vertex = head;

   return head;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:09:56.660

那里的一切都说你应该使用`vertex_t *head`.

此外，`head = head->temp;`由于您尚未分配`head`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T07:21:45.590

这符合您的要求吗？

```
vertex_t **create_graph(int argc, char *argv[]) {
vertex_t *head, **temp;

head = malloc(sizeof(vertex_t));
temp = malloc(sizeof(vertex_t*));
*temp = head;

head->name = argv[1];

head->next = malloc(sizeof(vertex_t));
head->next->name = argv[2];
head->next->next = 0;

head->adj_list = malloc(sizeof(adj_vertex_t));
head->adj_list->edge_weight = atoi(argv[3]);
head->adj_list->vertex = head->next;

head->next->adj_list = malloc(sizeof(adj_vertex_t));
head->next->adj_list->edge_weight = atoi(argv[3]);
head->adj_list->vertex = head;

 return temp;
} 
```

# javascript - 在 Javascript 文件中加载和执行 jQuery

> ID：12577067
> 
> 赞同：1
> 
> 时间：2012-09-25T06:08:01.343
> 
> 标签：javascript, jquery

我的问题与[此](https://stackoverflow.com/questions/10113366/load-jquery-with-javascript-and-use-jquery)类似。但我觉得那里的答案不完整，问题以不确定性结束......

我正在为我的用户开发一个 Javascript 应用程序以放在他们的网站上。我只希望他们必须将一个 javascript 包含在他们的网页顶部才能使用我的应用程序。

我的 javascript 需要 jQuery 才能运行。

所以目标是...

1.  检查 jQuery 是否已经加载。
2.  如果尚未加载，则加载 jQuery。
3.  执行需要 jQuery 运行的 javascript。

我想在同一个脚本中完成以上三个。

这是我最初尝试的...

```
function loa_j(){
 if (typeof jQuery === "undefined") {
 var newscript = document.createElement('script');
 newscript.type = 'text/javascript';
 newscript.async = true;
 newscript.src = 'http://code.jquery.com/jquery-latest.min.js';
 (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(newscript);
 }
}

loa_j();
$(document).ready(function(){
//...Code That Never Fired
} 
```

这不起作用，**因为**javascript 不等待 jQuery 加载。它确实加载了 jQuery，只是速度不够快。

这是我的另一个解决方案，这个解决方案有效，但我挠头想知道这是否真的是最好的方法......

```
function loa_j(){
if (typeof jQuery === "undefined") {
(function(a,b){function G(a){var b=F[a]={.... //Entire jQuery copy and pasted in :D
}
} 
```

因此，通过将整个 jQuery 复制并粘贴到该函数中，代码确实可以工作。

这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:52:11.237

您可以将 onload 事件添加到动态加载的脚本中，如下所示：

```
function loa_j(){
 if (typeof jQuery === "undefined") {
     var newscript = document.createElement('script');
     newscript.type = 'text/javascript';
     newscript.async = true;
     newscript.src = 'http://code.jquery.com/jquery-latest.min.js';
     newscript.onload = jqReady;  //<-- executed only after jquery is loaded
     (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body'[0]).appendChild(newscript);
  }
}

function jqReady(){
    // your jquery code here 
}

loa_j(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:56:01.590

你可以试试这个，它基本上是等待jquery加载，然后执行函数。如果可以的话，可能静态加载 Jquery 也是一个好主意，因为您似乎确实依赖于 $(document).ready 函数。但如果那不可能，你可以试试这个，或者任何其他的加载器，比如 yepnope.js 或我最喜欢的 requirejs。

[http://jsfiddle.net/ytZRw/](http://jsfiddle.net/ytZRw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:13:16.627

像这样编辑

```
$(document).ready(function(){
loa_j();
//...Code That Never Fired
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:18:57.660

在这种情况下，您必须使用计时器来检查库是否存在，然后执行您的代码。看到这个小提琴：

[http://jsfiddle.net/pFaJc/](http://jsfiddle.net/pFaJc/)

```
var callback = function(){
    $(document).ready(function(){
         console.log('jquery');
    });        
}

if( typeof jQuery === 'undefined' ){
    var scr = document.createElement('script');
    scr.src = 'http://code.jquery.com/jquery-latest.min.js';
    document.getElementsByTagName('head')[0].appendChild(scr);

    var timer = setInterval(function(){
        if( typeof jQuery !== 'undefined' ){
            clearInterval(timer);
            callback();
        }        
    },100);
}​ 
```

# django - 上传图片的问题

> ID：12577069
> 
> 赞同：0
> 
> 时间：2012-09-25T06:08:12.370
> 
> 标签：django, django-models, django-uploads

我想上传图像，它们必须存储在媒体文件夹中。但是当我上传图像时，它被上传并且它的名称存储在数据库中，但图像不存储在媒体文件夹中（即使我不知道它存储在哪里）。

**settings.py**是：

```
MEDIA_ROOT = '/home/ghrix/html/media'
MEDIA_URL = 'media' 
```

**models.py**为：

```
from django.conf import settings
class Upload_files(models.Model):

    image           =models.ImageField(upload_to='/images') 
```

**表格.py**

```
class ProductForm(forms.Form):
    image  = forms.FileField()
    class Meta:
        model=Upload_files 
```

我不知道我错在哪里可能是我必须在模型中导入一些东西。所以请帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:20:01.200

你的 MEDIA_ROOT 应该是

```
MEDIA_ROOT = 'media' 
```

# android - 如何在 Android 的一个活动中绘制多个条形图

> ID：12577076
> 
> 赞同：2
> 
> 时间：2012-09-25T06:08:54.130
> 
> 标签：android, bar-chart

我正在开发可以在条形图中显示工资比较的 Android 应用程序。

我需要在同一个活动中显示两个图表，并且我成功地使用`achartengine`.

我需要确认是否可以在这样的一个活动中显示两个图表。如果是这样，请帮助我..

![工资表](../Images/3b62c007079f9acc0124d26a532b5677.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:00:49.537

您绝对可以将 2 个视图添加到您的活动中。每个视图都包含一个使用 AChartEngine 创建的图表。

为了了解如何在活动中嵌入图表，请阅读[这篇](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)文章。

# .htaccess - Codeigniter .htaccess 不忽略目录

> ID：12577077
> 
> 赞同：2
> 
> 时间：2012-09-25T06:09:00.290
> 
> 标签：.htaccess, codeigniter, paypal, paypal-ipn

我有一个基于 codeigniter 的网站，并试图让 PP IPN 使用它。我查看了一些 CI 特定库，但想要一个独立的 IPN 文件。

基本上，我在网站根目录中安装了 CI，并且我还有另一个目录“pp”，也在根目录中。

我正在尝试使用 Paypal 的沙箱测试 IPN，但它返回 404，我也无法直接访问该文件。

这是我的 .htaccess 文件：

```
XSendFile on
Options -Indexes
Options +FollowSymlinks
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

### Canonicalize codeigniter URLs
RewriteRule ^(index(/index)?|index(\.php)?)/?$ / [L,R=301]
RewriteRule ^(.*)/index/?$ $1 [L,R=301]

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

RewriteCond %{HTTP_HOST} !^(www) [NC]
RewriteRule ^(.*)$ http://www.mysite.net/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|pp|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# Without mod_rewrite, route 404's to the front controller
ErrorDocument 404 /index.php
</IfModule> 
```

希望这真的很明显！

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:53:00.110

如果该`pp`目录存在，您可以在该目录中放置一个 htaccess 文件，然后：

```
RewriteEngine On 
```

它本身就在其中，主 htaccess 文件中的任何规则都将被忽略。如果您的 paypal 内容已经在`pp`目录中的 htaccess 文件中具有重写规则，您可能希望将这些规则作为 404 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:13:46.543

您是否启用了 mod_rewrite.c。如果不是，那 .htaccess 将始终给出 404。（抱歉，我无法对此发表评论，没有代表）。

# javascript - JSON - 访问值和循环

> ID：12577081
> 
> 赞同：0
> 
> 时间：2012-09-25T06:09:35.320
> 
> 标签：javascript, jquery, json

在表单提交上，我正在向 PHP 代码发出 AJAX 请求，作为回应，这就是我得到的。

```
var data = {
    "empty":{
        "game_sais_no":"Season cannot contain empty value",
        "game_sc_no":"Category cannot contain empty value",
        "game_st_no2":"Visiting team connot contain empty value",
        "game_room_no_2":"Visiting room cannot contain empty value",
        "game_room_no_1":"Local chamber cannot contain empty value",
        "game_date":"Game date should be specified",
        "game_time":"Game time should be specified",
        "game_time_start":"Game start time should be specified",
        "game_time_close":"Game close time should be specified",
        "game_place_no":"Arena \/ Lot should be specified",
        "game_status":"Game status should be specified"
    }
} 
```

**1** . 我想访问单个值。我试着像这样访问它。

```
data.empty.game_sais_no it returns me the value of undefined. 
```

**2** . 我想遍历 json 对象并将所有消息显示给用户。我尝试使用

```
$.each(data, function(index, value)(){
     //build the markup.
}); 
```

这给了我意想不到的结果。我哪里错了？

**更新：** 我不确定，但由于某种原因，它给了我奇怪的结果，让我告诉你我到底在做什么。

这是我对 php 的 ajax 调用。

```
$('#gce_game_btn').on('click', function(){
    var formData = $('#gce_game_form').serialize();
    $.ajax({
        type    : 'POST',
        url     : 'accueil.php?m=ajax&game=1',
        data    : formData,
        success : function(data) {
            //
        }
    });
}); 
```

这是我要发回的数组。

```
Array
(
    [empty] => Array
        (
            [game_sais_no] => Season cannot contain empty value
            [game_sc_no] => Category cannot contain empty value
            [game_st_no2] => Visiting team connot contain empty value
            [game_room_no_2] => Visiting room cannot contain empty value
            [game_room_no_1] => Local chamber cannot contain empty value
            [game_date] => Game date should be specified
            [game_time] => Game time should be specified
            [game_time_start] => Game start time should be specified
            [game_time_close] => Game close time should be specified
            [game_place_no] => Arena / Lot should be specified
            [game_status] => Game status should be specified
        )

) 
```

我正在使用`json_encode()`并回显它。这反过来又给了我这个字符串。

```
{
    "empty":{
        "game_sais_no":"Season cannot contain empty value",
        "game_sc_no":"Category cannot contain empty value",
        "game_st_no2":"Visiting team connot contain empty value",
        "game_room_no_2":"Visiting room cannot contain empty value",
        "game_room_no_1":"Local chamber cannot contain empty value",
        "game_date":"Game date should be specified",
        "game_time":"Game time should be specified",
        "game_time_start":"Game start time should be specified",
        "game_time_close":"Game close time should be specified",
        "game_place_no":"Arena \/ Lot should be specified",
        "game_status":"Game status should be specified"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:16:14.323

首先，您的响应未在数组中返回。它是，它应该看起来像。看到`[`和`]`

```
"empty":[{
        "game_sais_no":"Season cannot contain empty value",
        "game_sc_no":"Category cannot contain empty value",
        "game_st_no2":"Visiting team connot contain empty value",
        "game_room_no_2":"Visiting room cannot contain empty value",
        "game_room_no_1":"Local chamber cannot contain empty value",
        "game_date":"Game date should be specified",
        "game_time":"Game time should be specified",
        "game_time_start":"Game start time should be specified",
        "game_time_close":"Game close time should be specified",
        "game_place_no":"Arena \/ Lot should be specified",
        "game_status":"Game status should be specified"
    }] 
```

那么你会读为

```
$.each(response.empty, function(index) {
           alert(response.empty[index].game_sais_no);

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:18:31.107

它工作正常。[检查演示](http://jsfiddle.net/tAfaQ/1/)。

```
$.each(data, function(index, value){
    console.log(index);
    $.each(value, function(index, value) {
       console.log(index, value);
    });
});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:34:32.173

您在浏览器的控制台部分看到任何错误吗？您尝试访问 json 对象的方式没有任何问题

试试这个

```
$.each(data.empty, function(i,value){
        console.log(value);
    }) ; 
```

检查[小提琴](http://jsfiddle.net/sushanth009/NfeMC/)

**更新**

您似乎在 ajax 请求中缺少**dataType: 'json'** 属性。如果您未指定它将数据解析为字符串

```
$.ajax({
        type    : 'POST',
        url     : 'accueil.php?m=ajax&game=1',
        data    : formData,
        dataType: 'json'
        success : function(data) {
            //
        }
    }); 
```

# database - sqlite 在列声明中包含类型

> ID：12577084
> 
> 赞同：0
> 
> 时间：2012-09-25T06:09:45.180
> 
> 标签：database, sqlite

鉴于 sqlite 无论如何都不是静态类型的，是否有理由在 sqlite 的 CREATE TABLE 语句中包含列类型？如果可能，请提供一个例子来说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:37:46.337

SQLite 将声明的列类型用于[类型 affinity](http://www.sqlite.org/datatype3.html#affinity)，如果可能，其中的值会自动转换。

# recursion - 与多核时代的迭代相比，递归是否更受欢迎？

> ID：12577090
> 
> 赞同：5
> 
> 时间：2012-09-25T06:10:23.863
> 
> 标签：recursion, iteration, cpu, multicore

或者说，多核 CPU 处理递归是否比迭代快？

还是仅仅取决于一种语言在机器上的运行方式？与执行简单迭代相比，像 c 执行函数调用的成本很高。

我有这个问题是因为有一天我告诉我的一位朋友，递归并不是任何可以加速程序的神奇魔法，他告诉我使用多核 CPU，递归可以比迭代更快。

### 编辑：

如果我们考虑最喜欢递归的情况（数据结构、函数调用）， **递归是否可能更快？**

### 10 月 12 日编辑：

那么现在多核 cpu 的表现如何呢？现在的软件都是为多核cpu编程的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:05:11.093

真的有两种方法来看待这个问题：

**1.**单纯看编译后的代码，是的，迭代比递归快。这是因为递归添加了一个函数调用（=开销），而迭代没有。但是，一种常见的递归类型是尾递归：递归调用是在函数的末尾进行的。这总是由编译器[针对迭代进行优化。](http://en.wikipedia.org/wiki/Tail_recursion_optimization)因此，在这种情况下，这无关紧要。Ergo：在某些情况下，递归速度较慢，但​​它永远不会更快。

**2.**从函数式编程的角度来看，大多数时候递归函数被编写为没有[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)。（在递归函数中存在副作用将使其很难产生正确的结果。）如果函数没有副作用，那么并行化是微不足道的（因此更容易在多核系统上运行）。这不是递归函数本身的属性，但这可能是您的朋友认为递归比迭代更快的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:12:04.023

虽然递归优雅且在数学上很漂亮，但它会消耗大量资源，尤其是内存。如果您有一个有效的迭代解决方案，您应该这样做。

# java - 如何使用 java 和 PDFBox 从 PDF 中获取字符的 Unicode

> ID：12577092
> 
> 赞同：4
> 
> 时间：2012-09-25T06:10:28.080
> 
> 标签：java, pdf, unicode, pdfbox

我正在使用 Apache PDFBox 和 Java 来解析 PDF 并从中获取所有信息。提取文本仅适用于英语。对于其他语言，我只得到一些特殊字符。例如，提取阿拉伯字符 ش 将在打印时给出字符串 :"?问题。请帮助我从 PDF 中获取字符的 Unicode 或建议我一些解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:05:18.603

尝试[更改 Java 系统语言环境](https://stackoverflow.com/questions/64038/setting-java-locale-settings)。在您的 Java 程序中，这应该等同于更改操作系统设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:20:27.847

[http://grepcode.com/file/repo1.maven.org/maven2/org.apache.pdfbox/pdfbox/1.6.0/org/apache/pdfbox/util/PDFText2HTML.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.pdfbox/pdfbox/1.6.0/org/apache/pdfbox/util/PDFText2HTML.java)

*私有字符串转义（字符串字符）*将字符转换为 unicode。

# java - java mail api-不连接到smtp主机

> ID：12577095
> 
> 赞同：0
> 
> 时间：2012-09-25T06:10:45.803
> 
> 标签：java, networking, jakarta-mail, connectexception

我正在从我们的应用程序发送邮件。使用的属性如下，

```
"mail.smtp.auth", "true"
"mail.smtp.host", smtp.bizmail.yahoo.com
"mail.smtp.port", 587 
```

我们有两台 linux 服务器，我的问题是它从一台服务器发送邮件，但从另一台服务器不发送邮件。它抛出异常如下

```
javax.mail.SendFailedException: Sending failed;
  nested exception is:
        javax.mail.MessagingException: Could not connect to SMTP host: smtp.bizmail.yahoo.com, port: 587;
  nested exception is:
        java.net.ConnectException: Connection timed out
        at javax.mail.Transport.send0(Transport.java:219)
        at javax.mail.Transport.send(Transport.java:81) 
```

# ruby-on-rails-3.1 - 检索控制器中日期的参数

> ID：12577100
> 
> 赞同：0
> 
> 时间：2012-09-25T06:11:27.200
> 
> 标签：ruby-on-rails-3.1

我需要在控制器中获取日期的参数。在我的视图页面中，我有 <%= f.date_select :due_date %>。在我的控制器中，我需要检索它并将所选日期传递给另一个控制器..我将如何做..？

def create @task = Task.new(params[:task]) @task.save redirect_to(calenders_path(params[:due_date])) end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:25:39.367

```
<%= redirect_to :controller => 'calenders', :action => "show", :due-date => params[:due_date] %> 
```

# iphone - 界面旋转的 UIView 到底做了什么？

> ID：12577101
> 
> 赞同：2
> 
> 时间：2012-09-25T06:11:43.727
> 
> 标签：iphone, objective-c, ios, uiview, uinavigationcontroller

有人可以解释一下iOS在界面旋转方面做了什么。我的一个视图在旋转 iPhone 后消失了。似乎视图设置了一个新的框架、边界或其他什么，不知道。无论如何，一旦布局问题永远消失了，界面旋转后。所以必须在界面旋转时为视图设置一些东西。

我正在从 NIB 文件加载视图并使用导航控制器显示它：

```
BirthdayReminderWidgetConfigViewController *vc = [self.storyboard
    instantiateViewControllerWithIdentifier:@"BirthdayConfigController"];
self.navigationController pushViewController:vc animated:true]; 
```

也许我必须做一些设置才能在不旋转界面的情况下正确显示视图。

我有一个从 nib 文件加载的视图的布局问题，如下所示：

该项目包含一个 MainStoryboard。在其中，我从一个 nib 文件加载一个视图。

```
NSArray *xib = [[NSBundle mainBundle] loadNibNamed:@"View" owner:self options:nil];
self.configViewController = [xib objectAtIndex:0]; 
```

故事板有一个导航控制器，加载的视图如下所示：

```
 if (currentWidgetConfigViewController != nil)
    {
      [self.navigationController pushViewController:currentWidgetConfigViewController animated:true];
    } 
```

所以在我看来没有错吗？（第一个问题）但现在的问题。

我设计的是：

![在此处输入图像描述](../Images/050b97c33c289097e8b191f19e7dcb95.png)

iOS 所做的如下

![在此处输入图像描述](../Images/267d040107205b6ccf2ee06a3d58adae.png)

控件安排得不好。

除了在新视图上使用一个按钮之外，我还使用该代码打开了一个 PeoplePicker：

```
[self presentViewController:self.picker animated:YES completion:nil]; 
```

关闭人员选择器后，`[self.picker dismissViewControllerAnimated:true completion:nil];`我得到以下结果：

![在此处输入图像描述](../Images/006e9b57ac473ba01a873542fe00d2e4.png)

那么这里出了什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:28:09.440

覆盖`-setFrame:`并`-setBounds:`在您的视图中查看会发生什么：

```
- (void) setFrame: (CGRect) newFrame
{
    NSLog(@"New frame: %@", NSStringFromCGRect(newFrame));
    [super setFrame:newFrame];
} 
```

此外，`transform`通常在轮换期间会发生变化。[Orientation Zoo](https://github.com/zoul/Orientation-Zoo)可能会有所帮助，它是一个示例 Xcode 项目，展示了在各种轮换用例中发生的情况。不过好久没碰了，不知道还能不能用。

# html - 在 HTML 5 中，我无法通过我的代码在浏览器中显示图像？

> ID：12577102
> 
> 赞同：0
> 
> 时间：2012-09-25T06:11:44.647
> 
> 标签：html

```
<HTML>

    <BODY style ="background-color:pink;">

    <H1 STYLE="margin-left:100px;"> AEROSPACE </HI>

    <h2>PHOTOS </h2>

    <img border="0" src="C:\Documents\baburaj.SIT.INDIA\Desktop\IMAGE\2.jpg" width="304" >
    </body>
</html> 
```

我无法通过上面给出的代码显示图像。我必须做哪些更改才能显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:23:03.727

尝试将图像保存到与页面相同的文件夹中，这样您就可以编写 2.jpg 而不是给出该图像的完整路径

```
<img border="0" src="2.jpg" width="304" > 
```

还提供属性之间的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:52:20.143

```
Desktop
--HTML CODES
  --index.html
--IMAGES
  --2.jpg 
```

我假设这些是您当前的目录。如果您从中调用图像，`Desktop\HTML CODES`则必须提供有效路径。

如需进一步阅读，请参阅[http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)

# mongodb - 在 MongoDB 中将嵌入重构到引用中或反之亦然的最简单方法是什么？

> ID：12577107
> 
> 赞同：1
> 
> 时间：2012-09-25T06:12:06.480
> 
> 标签：mongodb, refactoring

假设我有一个现有的数据集，其中某些内容是嵌入式文档，但我们希望将其转换为参考。是否有任何一种自动或半自动的方式来进行这种重构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:28:12.313

重构本身很简单。只需将“embeds_one”替换为“has_one”（或用适当的术语替换您的映射器库）。数据迁移会带来一些痛苦。或者也许不会。这是我在 10 分钟内完成的一个小红宝石脚本。它应该涵盖我认为您需要的内容。

```
source_collection = 'users'
field_to_expand = 'address'
parent_field = 'user_id'
expanded_collection = 'addresses'

require 'mongo'

db = Mongo::Connection.new.db('test')
users = db.collection(source_collection)
addresses = db.collection(expanded_collection)

# prepare test data
users.remove()
addresses.remove()

users.insert({name: 'Joe', address: {city: 'Rio de Janeiro'}})
users.find().to_a # => [{"_id"=>BSON::ObjectId('50614e910ed4c08a6a000001'), "name"=>"Joe", "address"=>{"city"=>"Rio de Janeiro"}}]

users.find().each do |u|
  # move subdocument to a separate collection
  addr = u[field_to_expand]
  addr[parent_field] = u['_id']
  addresses.insert(addr)

  # erase from original document
  users.update({_id: u['_id']}, {'$unset' => {field_to_expand => 1}})
end

users.find().to_a # => [{"_id"=>BSON::ObjectId('50614e910ed4c08a6a000001'), "name"=>"Joe"}]
addresses.find().to_a # => [{"_id"=>BSON::ObjectId('50614e910ed4c08a6a000002'), "city"=>"Rio de Janeiro", "user_id"=>BSON::ObjectId('50614e910ed4c08a6a000001')}] 
```

# asp.net - 与 Twitter Bootstrap 捆绑的 ASP.NET MVC4

> ID：12577108
> 
> 赞同：37
> 
> 时间：2012-09-25T06:12:08.893
> 
> 标签：asp.net, twitter-bootstrap, asp.net-mvc-4, bundling-and-minification, asp.net-optimization

我正在尝试将 MVC 4 中的新捆绑功能与 Twitter 引导程序一起使用，在我看来，css get 中的 glyphicons png-files 的路径在某种程度上被搞砸了。这是我的代码：

```
 bundles.Add(new StyleBundle("~/bundles/publiccss").Include(
            "~/Static/Css/bootstrap/bootstrap.css",
            "~/Static/Css/bootstrap/bootstrap-padding-top.css",
            "~/Static/Css/bootstrap/bootstrap-responsive.css",
            "~/Static/Css/bootstrap/docs.css"));

        bundles.Add(new ScriptBundle("~/bundles/publicjs").Include(
            "~/Static/Js/jquery-1.7.2.js",
            "~/Static/Js/bootstrap/bootstrap.js",
            "~/Static/Js/cookie/jquery.cookie.js")); 
```

我没有在按钮上看到任何图标，同样。我在这里做错了吗？有什么建议么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T16:31:17.210

问题很可能是 css 文件中的图标/图像使用了相对路径，因此如果您的包与未捆绑的 css 文件不在同一个应用程序相对路径中，它们就会成为断开的链接。

我们在待办事项列表中的 css 中重新设置了 url，但现在，最简单的做法是让你的 bundle 路径看起来像 css 目录，这样相对 url 就可以工作，即：

```
new StyleBundle("~/Static/Css/bootstrap/bundle") 
```

**更新：**我们在 1.1beta1 版本中添加了对此的支持，因此要自动重写图像 url，您可以添加一个新的 ItemTransform 来自动执行此变基。

```
bundles.Add(new StyleBundle("~/bundles/publiccss").Include(
            "~/Static/Css/bootstrap/bootstrap.css",
            "~/Static/Css/bootstrap/bootstrap-padding-top.css",
            "~/Static/Css/bootstrap/bootstrap-responsive.css",
            "~/Static/Css/bootstrap/docs.css", new CssRewriteUrlTransform())); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-07-17T14:38:31.637

“CssRewriteUrlTransform”适用于不在虚拟目录之上运行的应用程序。

因此，如果您的应用程序在[http://your-site.com/](http://your-site.com/)上运行，它运行得很好，但如果它在[http://your-site.com/your-app/](http://your-site.com/your-app/)上运行，您的所有图像都会有 404因为默认的“CssFixRewriteUrlTransform”使用“/”引用您的图像。

为了解决这个问题，我实现了自己的“CssRewriteUrlTransform”版本，如下所示：

```
 public class CssFixRewriteUrlTransform : IItemTransform {
    private static string ConvertUrlsToAbsolute(string baseUrl, string content) {
        if (string.IsNullOrWhiteSpace(content)) {
            return content;
        }
        var regex = new Regex("url\\(['\"]?(?<url>[^)]+?)['\"]?\\)");
        return regex.Replace(content, match => string.Concat("url(", RebaseUrlToAbsolute(baseUrl, match.Groups["url"].Value), ")"));
    }

    public string Process(string includedVirtualPath, string input) {
        if (includedVirtualPath == null) {
            throw new ArgumentNullException("includedVirtualPath");
        }
        var directory = VirtualPathUtility.GetDirectory(includedVirtualPath);
        return ConvertUrlsToAbsolute(directory, input);
    }

    private static string RebaseUrlToAbsolute(string baseUrl, string url) {
        if (string.IsNullOrWhiteSpace(url) || string.IsNullOrWhiteSpace(baseUrl) || url.StartsWith("/", StringComparison.OrdinalIgnoreCase)) {
            return url;
        }
        if (!baseUrl.EndsWith("/", StringComparison.OrdinalIgnoreCase)) {
            baseUrl = string.Concat(baseUrl, "/");
        }
        return VirtualPathUtility.ToAbsolute(string.Concat(baseUrl, url));
    }
} 
```

更新：感谢 superjos 指出还有另一种解决方案：

```
public class CssRewriteUrlTransformWrapper : IItemTransform
{
    public string Process(string includedVirtualPath, string input)
    {           
        return new CssRewriteUrlTransform().Process("~" + VirtualPathUtility.ToAbsolute(includedVirtualPath), input);           
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T15:34:31.987

您可以做的是您可以转到自定义[页面](http://twitter.github.com/bootstrap/customize.html)`@iconSpritePath`并`@iconWhiteSpritePath`在**Sprites**部分进行更改，当然，还可以下载新样式。

我已将图像放在文件夹文件`Content/Images`夹中，并更改了路径：

*   `/Content/Images/glyphicons-halflings.png`
*   `/Content/Images/glyphicons-halflings-white.png`

另一种选择是从[github](https://github.com/twitter/bootstrap)下载所有 LESS 文件，更改**variables.less文件中的相同变量，然后使用**[SimpLESS](http://wearekiss.com/simpless)之类的工具重新编译**bootrap.less**文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T11:14:05.540

对此的修复现在添加到我的[AspNetBundling](https://www.nuget.org/packages/AspNetBundling/2.0.3) NuGet 包中，它解决了标准转换器中的许多其他问题，特别是在使用数据 uris 方面。也在[GitHub](http://github.com/benmccallum/AspNetBundling)上开源。

做就是了：

1.  `Install-Package AspNetBundling`
2.  替换`CssRewriteUrlTransform`为`CssRewriteUrlTransformFixed`

# c# - Matplotlib savefig to BytesIO 是不是有点不对？

> ID：12577110
> 
> 赞同：3
> 
> 时间：2012-09-25T06:12:17.997
> 
> 标签：matplotlib, c#, python, matplotlib

我正在尝试将[matplotlib](/questions/tagged/matplotlib "显示标记为“matplotlib”的问题")数字保存到内存流中，就像在 SO 上的另一个示例中一样：

```
import matplotlib.pyplot as plt
import io

plt.figure()
plt.plot([1, 2])
plt.title("test")
buf = io.BytesIO()
plt.savefig(buf, format = 'png')
plt.savefig("real.png", format = 'png')
buf.seek(0)
data = buf.read()
buf.close()
f = open('copy.png', 'w')
f.write(data)
f.close() 
```

我发现 copy.png 的大小略大，应用程序拒绝打开它。这是某种编码问题吗？

**背景**：

我正在尝试使用 python.net 使用 matplotlib 渲染图形并将它们传递给 C# 进行绘图。我想避免将图像写入磁盘。理想情况下，我想写入某种可以在 C# 中使用的字节数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:11:23.267

尝试以二进制模式打开文件。

`f = open('copy.png', 'wb')`

从文档中：

> Windows 上的 Python 区分了文本文件和二进制文件；读取或写入数据时，文本文件中的行尾字符会自动稍作更改。这种对文件数据的幕后修改适用于 ASCII 文本文件，但它会破坏 JPEG 或 EXE 文件中的二进制数据。在读写此类文件时要非常小心使用二进制模式。

# python - 从python中的文本文件构建列表

> ID：12577118
> 
> 赞同：0
> 
> 时间：2012-09-25T06:13:08.373
> 
> 标签：python

我是蟒蛇新手。

我想阅读一个文本文件，其中包含这样的内容

```
1345..
245..
..456 
```

并将其存储在整数列表中。我想保留数字并将句点替换为 0。我该怎么做？

编辑：为模棱两可的输出规范道歉

ps 我希望输出是列表的列表

```
[ [1,3,4,5,0,0],
[2,4,5,0,0],
[0,0,4,5,6]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:14:23.650

```
with open('yourfile') as f:
    lst = [ map(int,x.replace('.','0')) for x in f ] 
```

这与以下嵌套列表组合相同：

```
lst = [ [int(val) for val in line.replace('.','0')] for line in f] 
```

在这里，我曾经在转换为整数之前将其`str.replace`更改为。`'.'``'0'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:23:37.230

```
with open(file) as f:
   lis=[[int(y) for y in x.replace('.','0').strip()] for x in f] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:55:59.667

这是一个经典的for循环形式的答案，对于新手来说更容易理解：

```
a_list = []
l = []
with open('a') as f:
    for line in f:
        for c in line.rstrip('\n').replace('.', '0'):
            l.append(int(c))
        a_list.append(l)
        #next line
        l = []
print a_list 
```

# javascript - 执行某些操作后，如何将文本添加到跨度？

> ID：12577120
> 
> 赞同：0
> 
> 时间：2012-09-25T06:13:16.770
> 
> 标签：javascript, jquery

[http://jsfiddle.net/nwT6v/1/](http://jsfiddle.net/nwT6v/1/)

这基本上是我的剧本。怎么会？

我想在点击下载到`span`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:16:28.783

```
$(".className").click(function() {
    $(this).next("span").html("some text");
});​ 
```

试试这个代码。

使用$按类查找选择器时，需要"." 在类名之前。此外，如果你写 $(".className").next("span").html("some text") - 它会在 .className 之后的所有 span 中添加“some text”，因为 $(".className")在这种情况下，将是带有 class="className" 的元素数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:21:53.660

试试这个：

```
$("li").click(function(o) {
    $(this).find('span').text("some text");
}); 
```

小提琴 - [http://jsfiddle.net/TLpSJ/](http://jsfiddle.net/TLpSJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:22:14.897

这将使它工作

```
$(".className").click(function() {
    $(".className").next("span").html("some text");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:22:33.200

试试这个

```
$(".className").click(function() {
    $(this).next('span').text("some text");
});​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/nwT6v/10/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T06:30:14.607

```
$(".className").click(function(e) {

    $(e.currentTarget).next('span').html("some text");
}); 
```

链接：- [http://jsfiddle.net/sandeep_giet/nwT6v/11/](http://jsfiddle.net/sandeep_giet/nwT6v/11/)

# c - 辨别指针和内存分配

> ID：12577121
> 
> 赞同：0
> 
> 时间：2012-09-25T06:13:19.250
> 
> 标签：c, memory, pointers

什么是内存分配（如果有的话）`p`，我写`*p`的`**p`时候它们在哪里`char **p = NULL`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:28:02.343

的大小`p`取决于其类型。`*p`and `**p`(and `***p`,等) 的大小`**********p`是指针的大小：通常是 4 或 8 个字节，具体取决于您使用的是 32 位还是 64 位系统。

当您编写时`char **p = NULL`，您不会分配超出`char **p`给您的任何额外内存。您只是用一个值初始化变量在内存中的位置，而不是让它未初始化。

至于他们*在哪里*，这取决于上下文。如果这些是函数中的局部变量，它们将在调用函数时分配到堆栈上。如果它们是全局变量，它们将被赋予程序数据段中的位置。如果它们是 a 的成员`struct`，则取决于您在何处声明结构类型的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:17:10.103

变量存储在堆栈上，如果不是静态/全局的。这里没有堆内存分配。它只是（无效的）内存地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:12:53.743

当您编写`char **p = NULL;`时，`p`将是一个局部变量（在大多数情况下，在堆栈上，如果它是在函数内部定义的），或者是一个全局变量（在大多数情况下既不在堆栈上，也不在堆中（从哪里`malloc()`分配内存） )，如果它是在所有函数之外定义的)。

`*p`的位置未定义，因为您不能合法地取消引用 NULL 指针。

这同样适用，`**p`因为您首先需要解除引用`p`，这是非法的。

等等。

# ruby-on-rails - 将 ruby 1.8.6 升级到 ruby 1.9.2

> ID：12577123
> 
> 赞同：-4
> 
> 时间：2012-09-25T06:13:26.117
> 
> 标签：ruby-on-rails, ruby

我有一些用`1.8.6`. 现在我想升级到`1.9.2`任何其他稳定的版本。

我在这个脚本中有一些 gems 和 ruby​​ 内置库，所以如果我将它升级到 ruby `1.9.2`​​，我会遇到什么样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:18:24.777

这几个是我在升级时遇到的常见问题：

如果你`require local_file`在 1.8.x 中你会发现当前目录已经从加载路径中移除了，1.9.x`require_relative`就是为此引入的。

字符串的处理方式可能略有不同。

```
1.9.2 c?
=> c
1.8.7 c?
=> 99 
```

在 1.9.2 中，Array to string 与 1.8.7 Array.inspect 相同，即添加标点符号。

```
1.9.2 [1,2,3].to_s
=> 1,2,3
1.8.7 [1,2,3].to_s
=> 123 
```

对于 1.9.2 中的旧行为，使用`join`1.8.7 中的新行为`inspect`。

[其他变化的回顾](http://slideshow.rubyforge.org/ruby19.html#1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:40:45.830

在 Ruby 中，我们很多人都面临着这些类型的情况，升级到新版本可能会破坏您在旧版本中可以正常工作的代码。

了不起的 Wayne E. Seguin 先生也遇到了这个问题，并创造了一个很好的工具来解决这个问题，称为**rvm**。

简而言之，rvm 允许您**安装****不同版本的 ruby** ​​（例如 1.8.7 或 1.9.2）并通过简单的

 **```
rvm use 1.8.7 
```

你应该去[https://rvm.io/](https://rvm.io/)学习如何在你的机器上安装 rvm。然后你可以安装你当前的 ruby​​ 版本和你想升级到的那个。在两者之间切换并测试您的脚本是否正常工作。这至少可以为您节省一些时间。**

# java - 如何在 Reducer 中访问 Mapper Counter 值？

> ID：12577128
> 
> 赞同：8
> 
> 时间：2012-09-25T06:13:38.233
> 
> 标签：java, hadoop, mapreduce

我想访问 reducer 中的 myCounter.my 值：

```
public static class Map extends Mapper<LongWritable, Text, ImmutableBytesWritable, ImmutableBytesWritable>
{
    public static enum myCounter{my};

    @Override
    public void map(LongWritable key, Text value, Context context) 
    {
        context.getCounter(myCounter.my).increment(1);
        context.write( new ImmutableBytesWritable ( ),new ImmutableBytesWritable() );
    }
}

public static class Reduce extends Reducer<ImmutableBytesWritable, ImmutableBytesWritable, Text, Text>
{
    @Override
    public void reduce(ImmutableBytesWritable key,Iterable<ImmutableBytesWritable> result,Context context)
    {

    }
} 
```

[从 reducer 访问映射器的计数器（旧 API 已给出）](https://stackoverflow.com/questions/5450290/accessing-a-mappers-counter-from-a-reducer?rq=1) 如何使其适用于新 API？

**或者**

我想知道映射器输出的总数？有没有更好的办法？（我无法访问 Reducer 中的计数器：

`Group Name->org.apache.hadoop.mapred.Task$Counter Counter Name->MAP_OUTPUT_RECORDS`)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-18T22:04:15.827

您可以通过作业对象访问计数器，使其适用于新 API。

```
Configuration conf = context.getConfiguration();
Cluster cluster = new Cluster(conf);
Job currentJob = cluster.getJob(context.getJobID());
long val=currentJob.getCounters().findCounter(myCounter.my).getValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:38:00.343

您可以使用相同的代码访问减速器中的计数器值

```
Counter counter = context.getCounter( myCounter.my );
        counter.getValue(); 
```

[也见](https://stackoverflow.com/questions/5450290/accessing-a-mappers-counter-from-a-reducer)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T06:18:53.273

您可以通过以下方式访问：

```
Map.myCounter.my // static fields you can access by it's class name. 
```

# jquery - Jquery DataTable中控件的列宽，jquery datatable的纯css

> ID：12577131
> 
> 赞同：0
> 
> 时间：2012-09-25T06:13:51.150
> 
> 标签：jquery, asp.net-mvc, razor

我的表正在使用 TwitterBootstrap：

```
 <table id="sDetails" class="table table-bordered table-striped table-hover dataTable">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Checked</th>
                        <th>Comments</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var item in m.Items)
                     {
                     <tr>
                        <td>@Html.HiddenFor(m => m.ItemKey)
                            @Html.DisplayFor(m => m.Item)
                        </td>
                        <td>@Html.CheckBoxFor(m => m.IsChecked)</td>
                        <td>@Html.TextBoxFor(m => m.Comments)</td>
                     </tr>
                     }
                </tbody>
            </table>
<script>
 $(document).ready(function () {          /* Init the table*/
             $("#sDetails").dataTable({
                 "bFilter": false,
                 "bLengthChange": false,
                 "bRetrieve": false,
                 "bSortClasses": false,
                 "bPaginate": false,
                 "bInfo": false,
                 "bJQueryUI": false,
                 "bAutoWidth": false,
                 "aDataSort": false,
                 "asSorting": false,
                 "bSortable": false,
                 "aoColumns": [{ "sDom": false, "bSortable": false, sWidth: '15%' }, { "sDom": false, "bSortable": false, sWidth: '5%' }, { "sDom": false, "bSortable": false, sWidth: '80%' }]
            });
</script> 
```

1）如何指定TextBox控件的宽度？2) 如何删除 jQuery DataTable 的 CSS？（即在此表上）- Google Chrome 中的表上没有 CSS，但 IE 中的表上应用了一些默认 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:21:40.067

要将 css 应用到`TextBox`，要么将样式全局应用到 css 文件中的所有文本框，要么使用[HtmlAttributes](http://msdn.microsoft.com/en-us/library/ee703535%28v=vs.108%29.aspx)`@Html.TextBoxFor`的最后一个参数并应用样式。

要在所有浏览器中重置为默认 css，请使用[样板](http://html5boilerplate.com/)。

# android - android启动时键盘布局的加载发生在哪里？

> ID：12577137
> 
> 赞同：0
> 
> 时间：2012-09-25T06:14:19.897
> 
> 标签：android, keyboard

我想了解加载键盘布局并映射到系统的过程。

qwerty.kl 配置文件在哪里使用？

可能是在linux级别..

有参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:41:49.207

这是 qwerty.kl 文件...

```
key 399   GRAVE
key 2     1
key 3     2
key 4     3
key 5     4
key 6     5
key 7     6
key 8     7
key 9     8
key 10    9
key 11    0
key 158   BACK              WAKE_DROPPED
key 230   SOFT_RIGHT        WAKE
key 60    SOFT_RIGHT        WAKE
key 107   ENDCALL           WAKE_DROPPED
key 62    ENDCALL           WAKE_DROPPED
key 229   MENU              WAKE_DROPPED
key 139   MENU              WAKE_DROPPED
key 59    MENU              WAKE_DROPPED
key 127   SEARCH            WAKE_DROPPED
key 217   SEARCH            WAKE_DROPPED
key 228   POUND
key 227   STAR
key 231   CALL              WAKE_DROPPED
key 61    CALL              WAKE_DROPPED
key 232   DPAD_CENTER       WAKE_DROPPED
key 108   DPAD_DOWN         WAKE_DROPPED
key 103   DPAD_UP           WAKE_DROPPED
key 102   HOME              WAKE
key 105   DPAD_LEFT         WAKE_DROPPED
key 106   DPAD_RIGHT        WAKE_DROPPED
key 115   VOLUME_UP
key 114   VOLUME_DOWN
key 116   POWER             WAKE
key 212   CAMERA

key 16    Q
key 17    W
key 18    E
key 19    R
key 20    T
key 21    Y
key 22    U
key 23    I
key 24    O
key 25    P
key 26    LEFT_BRACKET
key 27    RIGHT_BRACKET
key 43    BACKSLASH

key 30    A
key 31    S
key 32    D
key 33    F
key 34    G
key 35    H
key 36    J
key 37    K
key 38    L
key 39    SEMICOLON
key 40    APOSTROPHE
key 14    DEL

key 44    Z
key 45    X
key 46    C
key 47    V
key 48    B
key 49    N
key 50    M
key 51    COMMA
key 52    PERIOD
key 53    SLASH
key 28    ENTER

key 56    ALT_LEFT
key 100   ALT_RIGHT
key 42    SHIFT_LEFT
key 54    SHIFT_RIGHT
key 15    TAB
key 57    SPACE
key 150   EXPLORER
key 155   ENVELOPE        

key 12    MINUS
key 13    EQUALS
key 215   AT 
```

根据`system/usr/keylayout`您的问题，我假设您在问它在哪里以及它是如何映射的，如果您提供更多信息，我可以提供更多帮助

# objective-c - 重新加载 UIView 的正确方法是什么？

> ID：12577140
> 
> 赞同：4
> 
> 时间：2012-09-25T06:14:39.653
> 
> 标签：objective-c, ios, cocoa-touch

当我正在使用 ios 应用程序时，我突然想到了一个问题结构。如果我想重新加载整个视图怎么办？如果我调用会发生什么`viewDidLoad`？这是正确的方法吗？我只问我的知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:18:23.140

如果视图是某个控制器的主视图，您可以通过将控制器的`view`属性设置为来重新加载它`nil`——下次有人使用该`view`属性时它会再次加载。调用`-viewDidLoad`不起作用，它只是 `UIViewController`视图加载完成时某些代码调用的回调方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:02:36.613

您可以使用以下简单代码重新加载视图。

```
[YOUR_VIEW setNeedsDisplay]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:30:56.137

如果要重新加载整个视图，可以使用`reloadInputViews`方法或编写代码`viewWillAppear`，这样每次创建 viewController 的新对象时，viewWillAppear 中的代码都会自动调用。

# php - 在一个 PHP 脚本中输出多个 JavaScript 文件的可靠方法？（避免意外令牌非法）

> ID：12577142
> 
> 赞同：1
> 
> 时间：2012-09-25T06:14:48.813
> 
> 标签：php, javascript

我正在使用 PHP 创建一个 JavaScript 文档。它确实做了两件事：

1.  读取一个包含一些我用作模板的 HTML 文件的目录，然后输出一个对象，其中包含表示文件名的键：值对：内容，最终将类似于以下内容：

    ```
    var HTML = {
        "blogpost.html": '<div>{post}</div>',
        "comment.html" : '<div class="comment">{comment}</div>'
    }; 
    ```

    这允许我用来`HTML["template.html"]`附加从 AJAX 请求接收到的模板化数据。

2.  读取包含 JavaScript 文件的目录并将其内容直接输出到文档中。

在本地它工作正常，但是当我上传后尝试时出现此错误：

> `Uncaught SyntaxError: Unexpected token ILLEGAL`

我尝试将我从每个 HTML 和 JS 文件中获得的输出包装成如下内容：

```
preg_replace('/\s{2,}/', '', $output);
addslashes($output);
mysql_real_escape_string($output); 
```

以及这些的组合，但仍然是相同的错误。

如何可靠地输出我试图放置在输出中的 HTML 和 JavaScript？

这是我正在使用的当前整个 PHP 脚本（它在本地工作，但奇怪的是不能在线工作）：

```
header("Content-type: application/x-javascript");

// Write HTML templates.
$dir = dir($_SERVER['DOCUMENT_ROOT'] . '/view/html/');
$files = array();

while($file = $dir->read())
{
    if(strpos($file, ".html"))
    {
        $key = substr($file, 0, strpos($file, ".html"));
        array_push($files, '"' . $key . '": \'' . compress(file_get_contents($dir->path . $file)) . "'");
    }
}

echo 'var HTML = {' . implode(",", $files) . '};';

// Output other JavaScript files.
$js = array();

array_push($js, file_get_contents("plugin/jquery.js"));
array_push($js, file_get_contents("plugin/imagesloaded.js"));
array_push($js, file_get_contents("plugin/masonry.js"));
array_push($js, file_get_contents("base/master.js"));
array_push($js, file_get_contents("plugin/ga.js"));

echo implode("", $js);

// Compress a JavaScript file.
function compress($str)
{
    return addslashes(preg_replace('/\s{2,}/', '', $str));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:25:32.323

您可以`json_encode()`用于任何 PHP -> JS 转换：

```
while ($file = $dir->read()) {
    if(strpos($file, ".html")) {
        $key = substr($file, 0, strpos($file, ".html"));
        $files[$key] = compress(file_get_contents($dir->path . $file));
    }
}

echo 'var HTML = ' . json_encode($files) .';'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:22:49.910

这是一个解析器错误，所以问题发生在你的代码甚至运行之前。

我建议检查您正在使用的两个运行时的 PHP 版本。使用您计划部署到的相同运行时进行开发和测试将是理想的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:47:54.657

这也发生在我之前。

我假设您复制了您在 Github 之类的网站上发布的部分代码，或者您的编辑器已经塞满了。

众所周知，隐形字符潜伏在此类文件中。

解决此错误的方法是在记事本 (Windows) 或 TextEdit (Mac) 等纯文本编辑器中键入包含错误的代码行、其上方的行和下方的行。输入后，使用`Ctrl-A`或`Cmd-A`（全选），然后复制它并在您的普通代码编辑器中替换代码。

应该修复错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:58:11.940

我已经想出了如何在我目前的情况下解决这个问题。

**背景：**

我的本地机器正在运行 PHP 版本`5.3.5`
我的主机正在运行 PHP 版本`5.2.17`

问题出现在每个加载的 HTML 文档的末尾，文档的最后一行没有空格或制表符，例如

```
<div>
    content
</div> <-- at the beginning of this line 
```

**解决方案：**

我更改了`preg_replace()`与每个文件的输出一起使用的语句，以便它也可以匹配换行符，这似乎已经修复了它。

```
return preg_replace('/\s{2,}/', '', $str); // Old
return preg_replace('/\s{2,}|\n/', '', $str); // New 
```

# winapi - Windows 应用程序可以有多少个消息队列？

> ID：12577144
> 
> 赞同：2
> 
> 时间：2012-09-25T06:14:56.287
> 
> 标签：winapi, visual-c++

Windows 应用程序可以拥有的消息队列数是否等于该应用程序中创建窗口的线程数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:24:43.030

消息队列仅在线程创建窗口时创建。在此之前，线程没有任何消息队列。队列的创建是否成功取决于计算机上的资源量。您拥有的 RAM 和可用硬盘空间越多，就可以创建更多的线程和消息队列。对此没有任何硬编码限制。

根据我的经验，即使在一个大盒子上启动超过一千个线程也很可能会产生问题。但这仍然取决于加载的驱动程序的类型、网络连接的数量等。

# hive - 为 Hadoop 数据仓库 (Hive) 设置环境

> ID：12577146
> 
> 赞同：0
> 
> 时间：2012-09-25T06:15:01.060
> 
> 标签：hive, data-warehouse, business-intelligence

我是 Hadoop 的新手，并试图在数据仓库和分析方面学习它。

有人可以建议我如何设置我的练习机，尤其是关于 1.开始学习所需的机器/节点数 2.是否建议在 Windows 上设置？3.需要安装什么软件 4.测试/样本数据的可用性

此外，我想获得有关使用 Hive 执行 BI 操作的最佳方式的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:59:31.240

如果您对 hadoop 机器更感兴趣，我建议您下载 cloudera VM。另一种立即开始的方法 - 使用亚马逊 EMR（弹性 mapreduce）。有一个选项可以在那里创建交互式 hive 集群并开始使用存储在 S3 中的数据集。
关于节点的数量 - 这取决于目标。如果您有兴趣“感受”一些 hadoop 性能 - 至少尝试 4-6 个节点。
如果您无权访问组织的内部 hadoop / hive 集群，上面列出的两种方式都很好。即使在这种情况下 - 我建议在使用共享环境之前尝试与他们一起动手操作。

# sql-server - 我如何将 IDENTITY_INSERT 设置为 On

> ID：12577150
> 
> 赞同：1
> 
> 时间：2012-09-25T06:15:27.343
> 
> 标签：sql-server, database, c#-4.0

将值插入数据库表时出现错误。

“当 IDENTITY_INSERT 设置为 OFF 时，无法在表 'ref_user' 中插入标识列的显式值。”

请帮帮我？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:19:28.970

```
SET IDENTITY_INSERT tblename on 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:20:02.467

您收到此错误的原因是您试图在表中插入自动增量字段用作主 ke。

在您的命令中，您可以在插入之后设置`Identity_Insert On`and then 。`Off`就像是：

```
new SqlCommand("SET IDENTITY_INSERT ON;
               Insert into yourtable .....;
               SET IDENTITY_INSERT OFF;", yourConnection); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:17:52.007

尝试

句法：

```
SET IDENTITY_INSERT [ database. [ owner. ] ] { table } { ON | OFF } 
```

前任：

```
SET IDENTITY_INSERT dbo.your_table  ON; 
```

**编辑**：

请注意，当您在..上指定身份插入时，您必须在插入语句中明确指定列列表

**示例**：

```
create table test_identity (id int identity , val int)

SET IDENTITY_INSERT dbo.test_identity  On;
insert into test_identity (id,val) select  1,2
SET IDENTITY_INSERT dbo.test_identity  OFF; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:19:50.303

如果您不熟悉此错误，则更有可能您正在尝试为不应提供的列提供值。

假设你有一张桌子：

```
CREATE TABLE T (
    ID int IDENTITY(1,1) not null,
    Col1 varchar(10) not null
); 
```

如果您尝试这样的插入：

```
INSERT INTO T(ID,Col1) values (1,'abc'); 
```

你会得到你发布的错误。通常，您真正想要做的是：

```
INSERT INTO T(Col1) values ('abc'); 
```

（并且可能在之后检索插入的值`SELECT SCOPE_IDENTITY()`）。

但是对于你提出的问题*，*你会这样做：

```
SET IDENTITY_INSERT T ON;
INSERT INTO T(ID,Col1) values (1,'abc');
SET IDENTITY_INSERT T OFF; 
```

* * *

通常，您不应该*关心*为列分配了哪些值`IDENTITY`——它们是恰好具有紧凑的数字表示的神奇值。但是您应该将它们视为黑匣子。当您为数字分配含义时，往往会出现问题。

# sql - 在 MsAccess 2010 中创建工作组

> ID：12577152
> 
> 赞同：1
> 
> 时间：2012-09-25T06:15:54.100
> 
> 标签：sql, ms-access-2010, ddl

我想在 MS Access 2010 的数据库中创建工作组，这样我就可以为不同的用户提供不同的访问级别。

我尝试使用 DDL 命令创建用户`CREATE USER`，`CREATE GROUP`但我收到语法错误，说明**创建表中的错误**

请给我一些建议，以便我可以在 MS Access 2010（.accdb 文件）中为我的数据库提供授权和身份验证。

谢谢，

阿曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:33:27.823

用户级安全性是 Jet 数据库引擎提供的一项功能。使用新的 ACCDB 格式数据库时，新的 ACE 数据库引擎不再支持该功能。但是，旧的 MDB 格式数据库仍然支持它。

因此，如果您想要 Access 2010 的用户级安全性，请创建一个 MDB 格式数据库并使用它。

# tridion - 在 sdl tridion 中生成组件的 xml 包含字段

> ID：12577153
> 
> 赞同：0
> 
> 时间：2012-09-25T06:15:54.017
> 
> 标签：tridion

如何生成包含 SDl Tridion 中组件的所有字段的 xml 文件？我必须通过编写 C# 代码来做到这一点。我正在使用以下代码：

```
 public class stockcompany : ITemplate
    {
        private Engine engine;
        private Package package;
        public void Transform(Engine engine, Package package)

        {

            this.engine = engine;
            this.package = package;

            StringBuilder sb = new StringBuilder();
            Component component = engine.GetObject(package.GetValue("Component.ID")) as Component;
            ItemFields componentfields = new ItemFields(component.Content, component.Schema);
            ItemFields compometa = new ItemFields(component.Metadata, component.Schema);

            if (compometa.Contains("check"))
           {

           }

            if (componentfields.Contains("companyname"))
            {

                 string company = string.Empty;

                company = componentfields["companyname"].ToString();
                package.PushItem("xml", package.CreateHtmlItem(company.ToString()));

         XDocument myxml = new XDocument (new XDeclaration ("1.0","UTF-8",null ),new XElement ("companies",new XElement ("company",xml)));

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:15:22.090

你可能在这里重新发明轮子。

1.  Tridion 项目*是*XML。组件的 .Content 和 .Metadata 属性返回 XML，这样就够了吗？
2.  DD4T 使用将 XML 发布到交付端的模板，可能值得检查一下：[http ://code.google.com/p/dynamic-delivery-4-tridion/](http://code.google.com/p/dynamic-delivery-4-tridion/)

鉴于 DD4T 是开源的，您可能希望以他们的方式为例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:59:01.353

另一种生成 XML 的方法是使用 XmlSerializer。它的工作原理如下：

*   创建一个 POCO
*   用组件中的值填充它
*   使用 XmlSerializer 将其反序列化为 XML 字符串
*   将 XML 存储在包的输出变量中

这就是 DD4T 的做法。正如努诺所说，值得一试（见他的回答）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T00:16:58.797

我通常使用[XSLT 通过组件模板获取源 XML](http://www.createandbreak.net/2012/01/inspect-component-details-with-xslt.html)，但我们绝对[可以使用 C# 做同样的事情](http://www.createandbreak.net/2012/04/inspect-component-xml-with-c.html)。

```
[TcmTemplateTitle("Show XML Guts")]
public class ShowXmlGuts : ITemplate
  {
  public void Transform(Engine engine, Package package)
    {
    Item contentItem = package.GetByType(ContentType.Component);
    Component component = engine.GetObject(contentItem.GetAsSource().GetValue("ID")) as Component;
    package.PushItem("componentSource", package.CreateHtmlItem(component.Content.OuterXml));
    }
  } 
```

## 挑选领域

如果可能的话，我会从一种中间 XML 格式开始，它*不是到组件源的一对一映射*。

我们旨在使用适当的 API 获取和转换字段。在您的下一个重大更改中，依赖源组件格式可能会出现问题，其中可能包括：

*   架构更改和新关键字
*   演示/渲染端或 CMS 更改
*   “意外”内容（富文本、特殊字符、中医参考等）

## C# 的替代品

在技​​术方面：

*   XSLT 非常适合“生成 XML”，即使是在 C# 模板构建块中完成。
*   如果您的环境允许，[XSLT 中介器将是一个不错的选择](http://sdltridionworld.com/community/extension_overview/xsltmediator.aspx)
*   您*可以*使用 DWT 创建 XML，简化字段选择；但是，以这种方式创建无效 XML 更容易（XSLT 也不验证您的 XML，但破坏节点嵌套稍微困难一些）

如果可能，请使用您尝试实现的输出 XML 更新您的问题，或者开始一个新问题以从您的原始组件 XML 获取所需的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T07:07:39.097

您的代码不是很清楚并且包含很多问题，但通常您似乎走在正确的轨道上。

1）你需要投你的

> 组件字段[“公司名称”].ToString();

我怀疑您在这里使用 TextField ，因此将其转换为 TextField 对象，然后使用 objects .value 属性

2) 这是您将值推送到包中的位置，这将包含您从“公司名称”字段中获得的任何内容，它可能是 xml，也可能不是：

> package.PushItem("xml", package.CreateHtmlItem(company.ToString()));

..但我认为通过这些信息，您可以找到所需的方法。

祝你好运！

# android - 为 Google Play 中的印度开发者付费的应用程序上传工具

> ID：12577165
> 
> 赞同：0
> 
> 时间：2012-09-25T06:16:37.483
> 
> 标签：android

我最近碰巧看到印度开发者可以在一些私人网站上在 android google play 中上传付费应用，但是当我真正查看官方网站时，列表下没有指定国家名称，

我进退两难了，印度是否被添加到销售国家的安卓应用程序下......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:35:51.170

商家支持的位置 目前，以下国家/地区的开发者可以注册为 Google Checkout 商家并销售付费应用程序：

阿根廷* 澳大利亚 奥地利 比利时 巴西 加拿大 捷克共和国 丹麦 芬兰 法国 德国 香港 印度 爱尔兰 以色列 意大利 日本 墨西哥 荷兰 新西兰 挪威 波兰 葡萄牙 俄罗斯 新加坡 西班牙 韩国 瑞典 瑞士 台湾 英国 美国

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:00:35.417

现在添加了。添加商家帐户并开始销售您的应用。

引用：

```
Supported locations for merchants
We are pleased to announce that today we are adding support for Google Play 
Developer merchants in India. If you are a developer based in India, you may now 
register as Google Checkout Merchant through your Google Play Developer account 
in order to sell apps on Google Play. 
```

# winapi - 无法接收使用 Windows 8 Touch Inject API 在应用程序级别注入的所有指针/触摸消息

> ID：12577167
> 
> 赞同：3
> 
> 时间：2012-09-25T06:16:54.223
> 
> 标签：winapi, windows-8, multi-touch, gesture, user32

我能够成功注入指针/触摸消息，但无法接收在应用程序上注入的所有消息（在应用程序中捕获消息），即使所有消息都已成功注入而没有任何错误。请为该问题提供任何建议/解决方案。

```
InitializeTouchInjection(10, TOUCH_FEEDBACK_INDIRECT);

//
// initialize the touch info structure
//
memset(&contact, 0, sizeof(POINTER_TOUCH_INFO));

contact.pointerInfo.pointerType = PT_TOUCH; //we're sending touch input
contact.pointerInfo.pointerId = 0;          //contact 0
contact.pointerInfo.ptPixelLocation.x = 300;
contact.pointerInfo.ptPixelLocation.y = 300;
contact.pointerInfo.pointerFlags = POINTER_FLAG_DOWN | POINTER_FLAG_INRANGE | POINTER_FLAG_INCONTACT;
contact.touchFlags = TOUCH_FLAG_NONE;
contact.touchMask = TOUCH_MASK_CONTACTAREA | TOUCH_MASK_ORIENTATION | TOUCH_MASK_PRESSURE;
contact.orientation = 90;
contact.pressure = 32000;

//
// set the contact area depending on thickness
//
// defining contact area (I have taken area of 4 x 4 pixel)

contact.rcContact.top = contact.pointerInfo.ptPixelLocation.y - 2; 

contact.rcContact.bottom = contact.pointerInfo.ptPixelLocation.y + 2; 

contact.rcContact.left = contact.pointerInfo.ptPixelLocation.x  - 2; 

contact.rcContact.right = contact.pointerInfo.ptPixelLocation.x  + 2;
//
// inject a touch down
//
bRet = InjectTouchInput(1, &contact);

//Setting the Pointer Flag to Drag

contact.pointerInfo.pointerFlags = POINTER_FLAG_UPDATE | POINTER_FLAG_INRANGE | POINTER_FLAG_INCONTACT;
bRet = InjectTouchInput(1, &contact);
for(int i=0;i<100;i++)
{

    contact.pointerInfo.ptPixelLocation.y--; 
    bRet =InjectTouchInput(1, &contact);
}
//
// if touch down was succesfull, send a touch up
//
if (bRet) {
    contact.pointerInfo.pointerFlags = POINTER_FLAG_UP;

    //
    // inject a touch up
    //
    InjectTouchInput(1, &contact);
} 
```

# android - 从Android中没有城市的地址获取位置（纬度/经度）

> ID：12577168
> 
> 赞同：0
> 
> 时间：2012-09-25T06:16:59.750
> 
> 标签：android, google-geocoder

我正在尝试查找没有城市的街道地址的位置（纬度/经度） - 例如“123 Main St.” - 最接近当前位置。此功能内置于 Google Maps 应用程序和 iOS 地图 api 中，因此令人惊讶的是 Android 缺少该功能 - 例如调用 Geocoder.getFromLocation() 并让平台插入参考点。我尝试了几种解决方案，以下是最好的，但仍然感觉逊色。

我用左下角和右上角的坐标调用 Geocoder.getFromLocationName()。从当前位置周围 10kmx10km 的区域开始调用，然后重复（30x30、100x100，然后不带边界框参数）直到返回一些地址。当返回多个地址时，计算并使用最接近的地址：

**更新：**这种方法对于容易找到的越界地址似乎效率低下。例如，从西海岸搜索“New york, NY”或“Boston” - 需要对 Geocoder.getFromLocation() 进行 3 次有界和 1 次无界调用。然而，出乎意料的是，在第一次调用时，为纽约市和波士顿返回了正确的纬度/经度，在加州这里有最严格的界限。谷歌很聪明，无视我们的界限。这可能会给某些人带来问题，但这种方法非常有用。

```
package com.puurbuy.android;

import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.os.AsyncTask;
import android.util.Log;

public class GeocoderRunner extends AsyncTask<String, Void, Address> {
    final static double LON_DEG_PER_KM = 0.012682308180089;
    final static double LAT_DEG_PER_KM =0.009009009009009;
    final static double[] SEARCH_RANGES = {10, 50,800,-1}; //city, region, state, everywhere

private Context mContext;
private GeocoderListener mListener;
private Location mLocation;

public GeocoderRunner(Context context, Location location,
        GeocoderListener addressLookupListener) {
    mContext = context;
    mLocation = location;
    mListener = addressLookupListener;
}
@Override
protected Address doInBackground(String... params) {
    Geocoder geocoder = new Geocoder(mContext);
    List<Address> addresses = null;

    //reference location TODO handle null 
    double lat = mLocation.getLatitude();
    double lon = mLocation.getLongitude();
    int i = 0;
    try {
        //loop through SEARCH_RANGES until addresses are returned
        do{
            //if range is -1, call  getFromLocationName() without bounding box
            if(SEARCH_RANGES[i] != -1){

                //calculate bounding box
                double lowerLeftLatitude =  translateLat(lat,-SEARCH_RANGES[i]);
                double lowerLeftLongitude = translateLon(lon,SEARCH_RANGES[i]);
                double upperRightLatitude = translateLat(lat,SEARCH_RANGES[i]);
                double upperRightLongitude = translateLon(lon,-SEARCH_RANGES[i]);

                addresses = geocoder.getFromLocationName(params[0], 5, lowerLeftLatitude, lowerLeftLongitude, upperRightLatitude, upperRightLongitude);

            } else {
                //last resort, try unbounded call with 20 result
                addresses = geocoder.getFromLocationName(params[0], 20);    
            }
            i++;

        }while((addresses == null || addresses.size() == 0) && i < SEARCH_RANGES.length );

    } catch (IOException e) {
        Log.i(this.getClass().getSimpleName(),"Gecoder lookup failed! " +e.getMessage());
    }

    if(addresses == null ||addresses.size() == 0)
        return null;

    //If multiple addresses were returned, find the closest
    if(addresses.size() > 1){
        Address closest = null;
        for(Address address: addresses){
            if(closest == null)
                closest = address;
            else
                closest = getClosest(mLocation, closest,address);//returns the address that is closest to mLocation
        }
        return closest;
    }else
        return addresses.get(0);

}

@Override
protected void onPostExecute(Address address) {
    if(address == null)
        mListener.lookupFailed();
    else
        mListener.addressReceived(address);

}

//Listener callback
public interface GeocoderListener{
    public void addressReceived(Address address);
    public void lookupFailed();
}

//HELPER Methods

private static double translateLat(double lat, double dx){
    if(lat > 0 )
        return (lat + dx*LAT_DEG_PER_KM);
    else
        return (lat - dx*LAT_DEG_PER_KM);
}

private static double translateLon(double lon, double dy){
    if(lon > 0 )
        return (lon + dy*LON_DEG_PER_KM);
    else
        return (lon - dy*LON_DEG_PER_KM);

}

private static Address getClosest(Location ref, Address address1, Address address2){
    double xO = ref.getLatitude();
    double yO = ref.getLongitude();
    double x1 = address1.getLatitude();
    double y1 = address1.getLongitude();
    double x2 = address2.getLatitude();
    double y2 = address2.getLongitude();
    double d1 = distance(xO,yO,x1,y1);
    double d2 = distance(xO,yO,x2,y2);
    if(d1 < d2)
        return address1;
    else
        return address2;

}

private static double distance(double x1, double y1, double x2, double y2){
    return Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2) );
} 
```

}

也许这是最好的解决方案，但我想知道是否有办法在一次通话中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:43:17.483

你的代码看起来太复杂了，这里有更简单的方法：

```
 String searchPattern = "123 Main St." 
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    //I use last known location, but here we can get real location
    Location lastKnownLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    List<Address> addresses = null;
    try {
        //trying to get all possible addresses by search pattern
        addresses = (new Geocoder(this)).getFromLocationName(searchPattern, Integer.MAX_VALUE);
    } catch (IOException e) {
    }
    if (addresses == null || lastKnownLocation == null) {
        // location service unavailable or incorrect address
        // so returns null
        return null;
    }

    Address closest = null;
    float closestDistance = Float.MAX_VALUE;
    // look for address, closest to our location
    for (Address adr : addresses) {
        if (closest == null) {
            closest = adr;
        } else {
            float[] result = new float[1];
            Location.distanceBetween(lastKnownLocation.getLatitude(), lastKnownLocation.getLongitude(), adr.getLatitude(), adr.getLongitude(), result);
            float distance = result[0];
            if (distance < closestDistance) {
                closest = adr;
                closestDistance = distance;
            }
        }
    }
    return closest; //here can be null if we did not find any addresses by search pattern. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:14:32.987

我尝试了 Jin35 的建议，并增加了 Geocoder.getFromLocationName() 的 max_results，但结果并不理想。首先，最大的 max_result 无界调用比我的模拟器上的 5 结果 geocoord 有界调用花费了更长的时间（2.5x - 7x = 1 - 6 秒）。也许现实世界会更快，这个因素变得不那么重要了。

杀手锏是不管 max_results 是 50 还是 100，**每次只返回 20 个结果**。似乎谷歌正在限制服务器端的结果。对我来说，最接近的“123 Main St”不在这 20 个结果中——从加利福尼亚州的 Mt View 测试并返回加利福尼亚州的奥克利。

除非有除 Geocoder.getFromLocationName() 之外的其他方法来进行地址查找，或者使用边界坐标的更好方法，否则我会接受我自己的原始答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T18:41:06.443

```
 getFromLocationName(String locationName, int maxResults, double lowerLeftLatitude, double lowerLeftLongitude, double upperRightLatitude, double upperRightLongitude) 
```

# java - SIP呼叫邀请请求方法后如何发送RTPPackets？

> ID：12577171
> 
> 赞同：2
> 
> 时间：2012-09-25T06:17:02.383
> 
> 标签：java, android, sip, voip, rtp

我正在开发一个基于**VOIP(SIP)**的应用程序。我能够在两个仿真器之间发送 Invite 和 Invite-Ack，但现在我想在**SIP**呼叫流中的 Invite-ack 消息之后发送**RTPpacket 。**

 **可以这样寄吗。如果是的话，请任何人都可以帮助我解决这个问题。

之后，我将把它集成到发送和接收部分**SIP**视频通话中。

任何帮助将不胜感激！！！提前致谢！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:02:43.780

我想我将不得不看看 sipdroid 或 csipsimple 的 RTP 实现，这可能对我有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:26:42.183

一般来说，是的，协议支持这一点。具体如何执行取决于您使用的特定 SIP 堆栈。默认的安卓系统相当高级，没有这个选项。**

# java - 如何告诉 Maven 包含 jar 依赖项，而不是 Eclipse 中的子项目源目录？

> ID：12577175
> 
> 赞同：14
> 
> 时间：2012-09-25T06:17:09.357
> 
> 标签：java, eclipse, maven

我使用 Apache Maven 来管理我的 Java 库（jar）和一些使用这些库的项目。为方便起见，我使用`mvn eclipse:eclipse`生成的*Eclipse 项目文件*可以导入到 Eclipse 工作区进行编辑。

当我在同一个 Eclipse 工作区中编辑主项目和 Java lib 项目时会出现问题。也就是说，在文件中`mvn eclipse:eclipse`包含**src 路径**依赖项，而不是预期的依赖项。`.classpath``jar`

假设我有一个名为`mylib`. 相应的 jar 文件`mylib.jar`已部署到我维护的私有 Maven 存储库中。为了在主项目中使用 mylib.jar，在`pom.xml`.

```
<!-- pom.xml for the main project -->
<dependency>
  <groupId>namespace.my</groupId>
  <artifactId>mylib</artifactId>
  <version>[1.0, )</version>
</dependency> 
```

`mvn compile`并且`mvn test`工作完美，其中`mylib.jar`自动从我的仓库下载。但是，在尝试时`mvn eclipse:eclipse`，我发现生成的`.classpath`文件没有`mylib.jar`按预期包含依赖项。相反，它包含 mylib 的源文件目录，如下所示。

```
<!-- .classpath file generated by mvn eclipse:eclipse -->
<classpathentry kind="src" path="/mylib"/> 
```

看来 Maven 读取了 Eclipse 的元数据，发现 mylib 和主项目在同一个工作区中共存。因此，maven 包含了对我有益的来源。该死。如何告诉 maven 忽略本地项目源并只包含 jar 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T06:30:40.670

我相信这实际上是因为它们是 Eclipse 中的相关项目。因此，如果您右键单击您的主项目并转到`Project References`您的 lib 项目，则应该勾选。

如果您运行`mvn eclipse:eclipse`它，它将自动为任何子项目（模块）添加项目引用。您可以使用Maven Eclipse 插件的[useProjectReferences属性来更改它。](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html#useProjectReferences)

它默认为`true`, 但是

> 设置为 false 时，插件不会创建子项目，而是使用本地存储库中安装的包引用这些子项目

要使用该属性，请在您的 pom.xml 中设置该属性

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <useProjectReferences>false</useProjectReferences>
            </configuration>
        </plugin>
    <plugins>
<build> 
```

或者作为命令行上的属性：

```
mvn eclipse:eclipse -Declipse.useProjectReferences=false 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-29T15:48:57.593

我需要避免将依赖项作为引用项目包含在内，而是作为 jar 包含。使用 Eclipse 4.6 Neon 以前的解决方案都不起作用。

我已禁用该`Workspace Resolution`功能

```
click on the project -> Maven -> Disable Workspace Resolution 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:07:23.780

感谢猎犬的提示。是的，[useProjectReferences](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html#useProjectReferences)控制 Maven 如何处理子项目——包括源目录或包括 jar 文件。

我还没有安装 Eclipse 的 maven 插件，所以在`pom.xml`. 它告诉 Maven 在本地 maven 存储库中包含 jar 依赖项，而不是源目录。如果本地 repo 中不存在所需的 jar 文件，它将自动即时下载。

```
 <!-- pom.xml for the main project: include jar, not src path -->
  <plugin>
  <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.9</version>
    <configuration>
            <useProjectReferences>false</useProjectReferences>
    </configuration>
  </plugin> 
```

现在`mvn eclipse:eclipse`按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T13:38:17.377

只需尝试在依赖标记中使用 type 元素并在 pom.xml 中提及 source/jar 作为类型

```
<!-- pom.xml for the main project --> 
<dependency>
   <groupId>namespace.my</groupId>
   <artifactId>mylib</artifactId>
   <version>[1.0, )</version>
   <type>jar<type> <!-- source/jar -->
 </dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T21:55:56.227

我最近经历过这种行为是由 pom.xml 文件中所述的版本触发的。如果您的主要项目所依赖的 lib 版本可用于工作区中的 eclipse（例如，与 lib 匹配的 pom.xml [group,artifact,version] 的项目），这将被用作项目参考被从 M2REPO 位置拉出。

我的解决方案是将工作区中的库 pom.xml 的版本更改为另一个版本，以便我改进库，而主要项目仍然从 M2REPO 中提取旧的库。

通过对齐版本号来使用它，您可以轻松地执行并发的工件改进/更改。

我还没有测试你是否需要在`mvn eclipse:eclipse`每次更改 lib pom.xml 文件和主要 pom.xml 依赖项时运行，但我希望它是这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-18T10:25:09.847

我尝试在 eclipse 中关闭项目，并且工作区刚刚自己构建，这次从存储库中获取 jar 而不是链接项目

# iphone - 在设置下打开热点取代屏幕 Xcode iPhone 的 UI

> ID：12577176
> 
> 赞同：2
> 
> 时间：2012-09-25T06:17:10.843
> 
> 标签：iphone, objective-c, ios, user-interface, personal-hotspot

当我在我的 iPhone 设置下打开人员热点时，我的 iPhone 应用程序的 UI 会在下方移动 20 像素。我该如何处理这个问题。

有没有办法可以检测热点是打开还是关闭。？

谢谢维卡斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T06:22:20.313

您可以使用以下选择器获得多种尺寸，每当热点或其他通知出现时，statusBarFrame 将变为 40px 高。

```
CGRect rect;
rect = [[UIScreen mainScreen] bounds]; // Get screen dimensions
NSLog(@"Bounds: %1.0f, %1.0f, %1.0f, %1.0f", rect.origin.x, rect.origin.y, rect.size.width, rect.size.height);

rect = [[UIScreen mainScreen] applicationFrame]; // Get application frame dimensions (basically screen - status bar)
NSLog(@"App Frame: %1.0f, %1.0f, %1.0f, %1.0f", rect.origin.x, rect.origin.y, rect.size.width, rect.size.height);

rect = [[UIApplication sharedApplication] statusBarFrame]; // Get status bar frame dimensions
NSLog(@"Statusbar frame: %1.0f, %1.0f, %1.0f, %1.0f", rect.origin.x, rect.origin.y, rect.size.width, rect.size.height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:33:54.987

您有多种选择来处理此问题：

*   对于支持 iOS 6 之前的 iOS 版本的应用程序，在您的视图上使用正确的自动调整大小掩码，并确保您的所有自定义视图都能正确设置其自动调整大小掩码。
*   对于支持 iOS 6+ 的应用程序，请使用自动布局和约束。
*   对于具有大量自定义绘图或视图的应用程序，在适当的时候覆盖视图控制器上的 -viewWillLayoutSubviews 和/或自定义视图上的 -layoutSubviews。

# java - .jar 文件出错找不到主类

> ID：12577177
> 
> 赞同：0
> 
> 时间：2012-09-25T06:17:34.337
> 
> 标签：java, jar

我一直在处理一个 .jar 文件，它在双击时运行。

我安装了 JRE 7，但出现错误。我卸载了 JRE 7 并将 .jar 文件更改为打开，`javaw.exe`现在它得到了错误`could not find main class`。

我使用 Netbeans 创建了 .jar 文件，请帮助我被困在这里

现在我有 JDK 6 和 net beans 7.2 。

该程序从命令行运行属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:21:02.000

通过在存档中打开，确保 jar 内的清单文件包含主类字段和相应的类名。

# ios - 在 UISearchDisplayController 的结果中添加工具栏

> ID：12577178
> 
> 赞同：0
> 
> 时间：2012-09-25T06:17:44.337
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller

我很难过`UISearchDisplayController`。在我的场景中，我有一个`UIView`推到导航控制器上。在`UIView`我有一个`UITableView`和`UIToolbar`。在我正在`UITableView`使用的`UISearchDisplayController`.

![<img></img>](../Images/aacb88e636676da2c70af8617d9652dc.png)

工具栏按钮用于向搜索添加其他过滤器选项。我的问题是我不知道如何在`UISearchDisplayController`.

![在此处输入图像描述](../Images/b608f2b643afc0d3a83d1d4cb252d75e.png)

向结果添加工具栏的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T09:16:47.840

如果有人好奇如何在仍然使用（可能更清洁）的情况下解决此问题，只需在搜索处于活动状态时`UISearchDisplayController`将工具栏的项目设置为视图控制器的项目：`toolbarItems`

```
self.navigationController.toolbarHidden = NO;
self.toolbarItems = optionsToolbar.items; 
```

根据`UISearchDisplayController`保留视图控制器的工具栏`toolbarItems`，因此这可能已经为您完成了。如果工具栏仅在搜索期间使用，则可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:50:43.537

我终于设法解决了我的问题。

而不是使用 UISearchDisplayController 我只添加一个 UISearchBar 到我的 UITableView 并使用 UISearchBarDelegate 方法复制 UISearchDisplayController 的行为。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    [self setSearchText:searchText];
    [self filterCards];
}

- (void)searchBar:(UISearchBar *)searchBar selectedScopeButtonIndexDidChange:(NSInteger)selectedScope
{
    [self setScopeIndex:selectedScope];
    [self filterCards];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    // Move searchbar to table view
    [self.chapterSearchBar removeFromSuperview];
    [self.chapterTableView addSubview:[self chapterSearchBar]];

    // Show navigation controller
    [self.navigationController setNavigationBarHidden:NO animated:YES];

    // Hide scope bar an resize
    [searchBar setShowsScopeBar:NO];
    [searchBar sizeToFit];

    // Hide cancel button
    [searchBar setShowsCancelButton:NO animated:YES];

    // Resize table view
    CGRect tableViewRect = [self.chapterTableView frame];    
    tableViewRect.origin.y = 0;
    [self.chapterTableView setFrame:tableViewRect];

    // Hide keyboard
    [searchBar resignFirstResponder];
    [self setSearchText:@""];
    [self filterCards];
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
}

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar
{
    // Move searchbar to controller view
    [self.chapterSearchBar removeFromSuperview];
    [self.view addSubview:[self chapterSearchBar]];

    // Hide navigation controller
    [self.navigationController setNavigationBarHidden:YES animated:YES];

    // Show scope bar an resize
    [searchBar setShowsScopeBar:YES];
    [searchBar sizeToFit];

    // Show cancel button
    [searchBar setShowsCancelButton:YES animated:YES];

    // Resize table view
    CGRect tableViewRect = [self.chapterTableView frame];    
    tableViewRect.origin.y = 44;
    [self.chapterTableView setFrame:tableViewRect];

    return YES;
} 
```

# python - 拟合多个分布

> ID：12577179
> 
> 赞同：1
> 
> 时间：2012-09-25T06:17:50.077
> 
> 标签：python, numpy, scipy, data-fitting

我有一种情况，两个或多个带有一些系数的 nd 数组应该（大致）加起来到第三个数组。

```
array1*c1 + array2*c2 ... = array3 
```

我正在寻找使前两个数组最近似的`c1`and 。我确信 scipy 中存在某种方法，但我不确定从哪里开始。是否有我应该开始的特定模块？`c2``array3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:07:27.570

[numpy.linalg.lstsq](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html)为您解决这个问题。[scikit-learn](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html)和[StatsModels](http://statsmodels.sourceforge.net/stable/regression.html)都提供了该函数的面向对象的包装器以及更高级的回归模型。

（免责声明：我是一名 scikit-learn 开发人员，所以这不是有史以来最公正的建议。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:31:34.353

这只是线性回归（http://en.wikipedia.org/wiki/Ordinary_least_squares）。

让矩阵`A`有 列`array1, array2, ...` 让向量`a`是`array3`并且`x`是 列向量`[c1,c2,...]'`。

你想解决问题`min_{x} (Ax-a)^2`。

取导数并将其设置为零给出`0=A'Ax-A'a`，这给出了解决方案`x=(A'A)^{-1}A'a`。

在 numpy 中，这是`numpy.linalg.solve(numpy.dot(A.T,A),numpy.dot(A.T,a))`.

# android - 如何在我的设备处于 Wi-Fi 的特定范围内时限制我的移动应用程序。我想在 Android 中制作声波墙或防火墙之类的应用程序？

> ID：12577182
> 
> 赞同：1
> 
> 时间：2012-09-25T06:17:51.653
> 
> 标签：android, wifi, restriction, firewall-access

每当设备在我的 wifi 网络范围内时，我想限制应用程序的使用。有时我的应用程序将自动启动并且它应该始终在我的 wifi 范围内运行，没有人能够禁用或关闭/杀死应用程序，只有应用程序管理员可以这样做。应用程序将检查范围内可用的无线网络，并在范围内立即连接到网络。人将无法关闭 wifi 或连接到任何其他网络。当设备在我的 wifi 范围内时，应用程序将受到限制，只能使用允许的应用程序。假设我们可以限制在我的 wifi 范围内使用相机，并且当设备超出我的 wifi 范围时，相机的使用将不受限制。当设备超出我的 wifi 范围时，人们可以不受任何限制地使用他们的设备。这就像 sonicwall 或防火墙在 windows 的 Internet Explorer 中可以做的一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:29:08.577

您正在寻找的东西在 Android 中是不可能的。应用程序的权限非常有限，它们根本无法限制其他应用程序的行为！[在这里](https://stackoverflow.com/questions/5100928/how-to-connect-android-wifi-to-adhoc-wifi)，您将了解如何连接到 Wifi SSID。但是您要求的就像设备管理员一样，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:52:22.397

不对！可以将应用程序限制为 WIFI 只需安装免费应用程序 Onovo [https://play.google.com/store/apps/details?id=com.onavo.android.onavoid](https://play.google.com/store/apps/details?id=com.onavo.android.onavoid)

# jquery - 如何在页面加载时删除单击全日历事件的能力

> ID：12577184
> 
> 赞同：1
> 
> 时间：2012-09-25T06:18:13.463
> 
> 标签：jquery, fullcalendar

我的代码片段

```
 $('#calendar').fullCalendar({
      allDaySlot: false,
      header: {
        left: 'today prev next',
        center: 'title',
        right: 'agendaWeek,agendaDay'
      },
      axisFormat: 'HH:mm',
      timeFormat: {agenda: 'HH:mm{ - HH:mm}'},
      defaultView: 'agendaWeek',
      editable: false,
      minTime: '8:30am',
      maxTime: '10:00pm',
      weekends: false,
      eventRender: function(event, element) {
        // some code
      },
      eventClick: function(calEvent, jsEvent, view) {
          //some code
      },
      dayClick: function(date, jsEvent, calEvent) {
          //some code
        } 
```

此外，还有 ajax 调用来刷新日历和显示事件。我想在页面加载时禁用单击日历事件，即在 ajax 请求正在进行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:25:12.783

在全局范围内设置一个变量，例如`preventAjax`使用 false 值调用它。将其设置为`true`在触发请求之前并`false`在请求成功时返回。仅当值为 false 时才执行 ajax 请求。例如

```
var preventAjax = false;

function someFunction() {
   if (preventAjax)
       return;

   preventAjax = true;
   $.ajax({
     url : "someUrl",
     success : function(data) {
        preventAjax = false;

        // ... other code ...
    }
  });
} 
```

# java - 如何解决java中的NoSuchAlgorithmException？

> ID：12577185
> 
> 赞同：0
> 
> 时间：2012-09-25T06:18:21.903
> 
> 标签：java, exception, encryption, rsa

我正在尝试使用 RSA 算法解密数据。在进行解密时，我遇到了一个异常。也就是说，

```
java.security.NoSuchAlgorithmException: Cannot find any provider supporting RSA/ECB/PKCS5Padding
        at javax.crypto.Cipher.getInstance(DashoA13*..) 
```

如何解决这个异常？目前，我正在使用`java version "1.6.0_26"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:06:44.570

这是一个错字。带有 PKCS #1 v1.5 填充的 RSA 的正确名称是“RSA/ECB/PKCS1Padding”。通常，与可用算法列表进行比较是个好主意。例如[，这个问题](https://stackoverflow.com/questions/9333504/how-can-i-list-the-available-cipher-algorithms)包含一些打印此类列表的方法。

（当然，使用 OAEP 而不是 v1.5 填充会更好，特别是如果您的主要领域不是密码学）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:42:03.447

该错误意味着您使用的库无法解密数据，因为 Lib 中没有解密 RSA 的算法。您可以使用像 Bouncy Calste 或 GNU Crypto 这样的库来使用 RSA 解密数据。网上有很多关于如何做到这一点的示例。

# android - 试图从android外部构建webkit

> ID：12577188
> 
> 赞同：2
> 
> 时间：2012-09-25T06:18:35.100
> 
> 标签：android, build, webkit

我一直在尝试从源代码（从这里[https://github.com/android/platform_external_webkit](https://github.com/android/platform_external_webkit)）构建 Android WebKit，但到目前为止还没有取得任何成功。我已经从我的 repo 副本的根目录和其中的 Source 目录运行，结果如下`make`：`ndk-build`

`make`从根目录（有意义，因为没有 Makefile），

```
make: *** No targets specified and no makefile found.  Stop. 
```

`make`从 /Source 目录：

```
make[1]: Entering directory `/webkit/Source/JavaScriptGlue'
../Makefile.shared:2: ../../Makefile.shared: No such file or directory
make[1]: *** No rule to make target `../../Makefile.shared'.  Stop.
make[1]: Leaving directory `/webkit/Source/JavaScriptGlue'
make: *** [all] Error 2 
```

`ndk-build`从根目录和 ./Source：

```
Android NDK: Could not find application project directory !    
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it.    
<NDK>/build/core/build-local.mk:130: *** Android NDK: Aborting    .  Stop. 
```

谁能告诉我我做错了什么？我读过提到需要整体编译 Android，但由于这是“外部”，我认为它会独立编译。我错了吗？还是我错过了一些配置步骤？还是别的什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:15:58.697

这不允许您使构建完全正常工作，我怀疑您和我做了同样的事情并克隆到一个名为 webkit 的文件夹中。

如果您将其重命名为 jni，然后`ndk-build`从包含 jni 的文件夹中运行，它至少可以解决您提到的问题。我现在得到错误：

```
jni/Android.mk:314: external/stlport/libstlport.mk: No such file or directory
Android NDK: Trying to define local module 'webcore' in jni/Source/WebKit/Android.mk.
Android NDK: But this module was already defined by jni/Source/WebKit/Android.mk.
/cygdrive/e/android-ndk-r7/build/core/build-module.mk:34: *** Android NDK: Aborting.    .  Stop. 
```

我仍在试图弄清楚如何解决这个新错误。

# bash - 如何在多行字符串shellscript中传递变量的值

> ID：12577190
> 
> 赞同：3
> 
> 时间：2012-09-25T06:18:37.627
> 
> 标签：bash, shell, ubuntu

我有一个名为的变量`instdir`，它具有当前目录。我需要将其值传递给将写入文件的多行字符串。以`instdir`斜线结尾，我**不能**做这样的事情：

```
cat > test <<EOF
  $instdir/final/path/to/file
EOF 
```

但如果我`$instdirfinal`改用，它不会识别 real`instdir`的价值。我想做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:19:50.237

这是诀窍：

```
${instdir}final 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:20:10.913

```
cat > test <<EOF
  ${instdir}final/path/to/file
EOF 
```

# asp.net - 如何使用 mssql 在 asp.net c# 中实现表单身份验证？

> ID：12577193
> 
> 赞同：0
> 
> 时间：2012-09-25T06:18:47.973
> 
> 标签：asp.net

我有 Login.aspx 页面

```
<asp:Login ID="Login1" style=" margin-top:150px;" runat="server">
    <LayoutTemplate>
        <table cellpadding="1" cellspacing="0" style=" background-color:#1b4c6c; color:White; font-family:Calibri; border-collapse:collapse;">
            <tr>
                <td>
                    <table cellpadding="0">
                        <tr>
                            <td align="center" colspan="2">
                                Log In</td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="UserName" runat="server" style=" border-radius:3px; padding-left:3px;"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                    ToolTip="User Name is required." ValidationGroup="Login1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Password" runat="server" style=" border-radius:3px; padding-left:3px;" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                    ControlToValidate="Password" ErrorMessage="Password is required." 
                                    ToolTip="Password is required." ValidationGroup="Login1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <asp:CheckBox ID="RememberMe" runat="server" Text="Remember me next time." />
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2" style="color:Red;">
                                <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" colspan="2">
                                <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" 
                                    ValidationGroup="Login1" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </LayoutTemplate>
</asp:Login> 
```

在 Login.aspx.cs 页面中，我执行以下操作

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class Login : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if((Session["portal"]!=null)&& (Convert.ToBoolean(Session["portal"])==true))
        {
            if (User.Identity.IsAuthenticated)
            {
                Response.Redirect("Default.aspx");
            }
        }
    }

protected static Boolean Authentication(string username, string password)
{
    string sqlstring;
             sqlstring = "Select username, password from tbluser where username='" + username + "' and password ='" + password + "'";

             // create a connection with sqldatabase 
             System.Data.SqlClient.SqlConnection con = new System.Data.SqlClient.SqlConnection(" Data Source=./SQLEXPRESS;Initial Catalog=Database;Connect Timeout=10;TrustServerCertificate=True "); 

            // create a sql command which will user connection string and your select statement string
            System.Data.SqlClient.SqlCommand comm = new System.Data.SqlClient.SqlCommand(sqlstring,con);

            // create a sqldatabase reader which will execute the above command to get the values from sqldatabase
            System.Data.SqlClient.SqlDataReader reader;

            // open a connection with sqldatabase
            con.Open();

            // execute sql command and store a return values in reade
            reader = comm.ExecuteReader();

            // check if reader hase any value then return true otherwise return false
            if (reader.Read())
               return true;
            else
               return false;
       }

protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{

    Boolean blnresult;
    blnresult = false;
    blnresult = Authentication( Login1.UserName, Login1.Password);
    if (blnresult = true)
    {
        e.Authenticated = true;
        Session["portal"] = true;
    }
    else
        e.Authenticated = false;
} 
```

}

我有列用户名和密码的表，分别具有值 admin 和 admin。但是登录控件给出错误消息**您的登录尝试不成功。请再试一次。**

谁能告诉这可能是什么问题？

# wordpress - WP 发出的虚构标头

> ID：12577194
> 
> 赞同：0
> 
> 时间：2012-09-25T06:18:50.763
> 
> 标签：wordpress

自从我迁移了我的页面后，我收到了这条烦人的警告信息。当我保存更改以保存任何内容（帖子，设置......）和上传图像（这就是我注意到它的地方）时，它会显示出来。消息如下：

```
Cannot modify header information - headers already sent by (output started at path/to/theme/functions.php:1)  in /path/to/wp/wp-includes/pluggable.php on line 881 
```

现在我知道在调用标头之前有内容输出到浏览器时应该显示此消息。但是我的functions.php很清楚，至少在dreamweaver中看起来是这样的：

```
<?php
add_theme_support( 'post-thumbnails' );

add_action... 
```

我看不到那里没有输出...怎么了？我之前在测试域上没有收到消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:59:03.170

您的 functions.php 文件可能使用[UTF8 BOM](http://www.w3.org/International/questions/qa-utf8-bom)编码。

您应该尝试在没有 BOM 的情况下对其进行编码，您可以使用例如 notepad++ 来实现这一点。

# java - URL 转发和标题/内容修改

> ID：12577197
> 
> 赞同：0
> 
> 时间：2012-09-25T06:18:55.610
> 
> 标签：java, http, url, forwarding

假设有一个传入的 HTTP`POST`请求到`/first/path`.

是否有任何示例 Java 代码添加新的`Header1`并将其转发`POST`到`/second/path.`

`RequestDispatcher`这是使用Spring 过滤器中的服务进行的服务器端转发。这必须是 URL 转发，而不仅仅是链接过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:27:07.503

这篇文章非常适合您正在寻找的内容。

[https://stackoverflow.com/a/4206094/1354978](https://stackoverflow.com/a/4206094/1354978)

带有可编辑的标题。

# android - 带有按钮单击的径向菜单android？

> ID：12577200
> 
> 赞同：23
> 
> 时间：2012-09-25T06:18:59.660
> 
> 标签：android, menu, custom-controls

我想设计这样的菜单。

我试过动画，但它不保留按钮的位置。

如果有人做过这种类型的菜单，请指导我。

任何帮助将不胜感激。

![在此处输入图像描述](../Images/3bfb6ac9d7a4841c0b3bfdf8efc3d164.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T22:16:54.717

I recently created this circular menu to add up in my recent project. It looks like ![enter image description here](../Images/2b7207c420b3821739812003fcf4230f.png)

What you need is to create a new View and draw this view, check for the user inputs (where he is touching), design a feedback mechanism, for example, in my view, if user touches any of the 5 arcs, background color changes to skyblue. Here is my code for onDrawMethod.

```
protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub

        px = getMeasuredWidth()/2;     
        py = getMeasuredHeight();

        initial = 144;
        finalangle = 252;

        centerCircleradius  = 30;
        middleCircleRadius = 140;

            int init, fina;
            init = 160;    
            fina = 360;
            finalOVal.set(px-middleCircleRadius-4, py-middleCircleRadius-4, px+middleCircleRadius+4, py+middleCircleRadius+4);
            middleOval.set(px-middleCircleRadius, py-middleCircleRadius, px+middleCircleRadius, py+middleCircleRadius);
            while(init<fina)
            {
                circlePaint.setColor(colors[i]);
                canvas.drawArc(finalOVal,init,10,false, circlePaint);
                i++;
                if(i>=colors.length)
                {
                    i=0;
                }
                init = init + 10;

            }

            canvas.drawArc(middleOval, 180, 180, false, pencil);

            midInitial = 180;

            i=0;

            //Creating the first Arc
            if(arcTouched[0])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(0), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[1])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(1), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[2])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(2), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;
            //Creatring the second Arc

            if(arcTouched[3])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(3), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);
            midInitial+=36;

            if(arcTouched[4])
            {

                canvas.drawArc(middleOval, midInitial, 36, true, arcTouchedBack);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            else
            {
                canvas.drawArc(middleOval, midInitial, 36, true, middleCircleBody);
                canvas.drawArc(middleOval, midInitial, 36, true, pencil);
            }
            canvas.drawBitmap(bitmap.get(4), null, (putBitmapTo(midInitial, 36, 140, px, py)), null);           
            canvas.drawCircle(px, py-10, 40, pencil);
            canvas.drawCircle(px, py-10, 39, smallCircleCore);

            canvas.drawCircle(px, py-10, 35, bigArc);
            canvas.drawCircle(px, py-10, 20, smallCircleCore);

            canvas.drawCircle(px, py-10, 15, bigArc);
            canvas.drawLine(px-8, py-10, px+8, py-10, lineCore);

        canvas.save();
    } 
```

Some reference that you might need.

bitmap -> is an arraylist that contains images

arcToched[] -> is an array that defines the background for arc, the values of this boolean array gets modified in onTouchEvent() method.

lineCore, smallCircleCore ..... are paints.

I know this isn't the best way and not professional too. I created this menu as per need. Its not scale able in a way until you change the angle calculations.

This view is highly inspired from Catch Notes Application. The only trouble I face in creating this view was to determine the arc touched. The only animation I used in here are just like again Catch Notes (the one in which circular menu extends a bit more than given size then gets back normal).

# c++ - 关闭内联扩展，但让优化在那里

> ID：12577209
> 
> 赞同：0
> 
> 时间：2012-09-25T06:19:33.513
> 
> 标签：c++, visual-studio, compiler-construction, compiler-optimization

在进行性能分析时，我遇到了一个问题，即由于编译器将它们内联为 /Ox 优化的一部分，因此未检测到某些函数。

所以问题是：如何使用设置 /Ob1 或 /Ob0 开关但让 /Ox 开关保持打开。？？？我想的 Ox 开关会自动将 Ob 开关切换到 /Ob2 ??

请参阅：http: [//msdn.microsoft.com/en-us/library/8f8h5cxt (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/8f8h5cxt(v=vs.71).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:26:24.463

来自[http://msdn.microsoft.com/en-us/library/59a3b321%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/59a3b321%28v=vs.71%29.aspx) /Ox 与以下内容相同：

```
/Obn, where n = 2
/Og
/Oi
/Os, /O, /Ot
/Oy 
```

所以我建议：

```
/Ob0 /Og /Oi /Os /O /Ot /Oy 
```

（当然，如果您需要，您可以将 /Ob0 更改为 /Ob1）。

# triggers - Jenkins-如何在远程机器上完成另一个作业时安排詹金斯作业

> ID：12577210
> 
> 赞同：0
> 
> 时间：2012-09-25T06:19:35.297
> 
> 标签：triggers, jenkins, jobs

我有两台远程机器：A 和 B。两者都安装了 Jenkins。

答：这将从主干构建。

B：触发自动化。

当机器 A 上的构建成功时，如何在机器 B 上配置 Jenkins 作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:47:52.753

我有同样的要求，因为我使用的其中一台服务器属于另一家公司，因此，虽然有可能，但显然需要很长时间才能让我改变他们的 jenkins 设置-起来，即使我被允许访问监控它及其输出。但是，如果您没有这些限制，那么您绝对应该遵循整个主从配置来解决这个问题。也就是说，这是我想出的一个解决方案，只是要注意我已经解释了为什么这是一个真正的要求，尽管我希望尽可能自己走主从路线。

为 Jenkins 安装 ScriptTrigger 插件，然后您可以使用类似以下的脚本来监视远程 jenkins 实例：

```
LAST_SUCCESSFUL_UPSTREAM_BUILD=`curl http://my.remote.jenkins.instance.com:8080/job/remoteJobName/lastSuccessfulBuild/buildNumber`
LAST_KNOWN_UPSTREAM_BUILD=`cat $WORKSPACE/../lastKnownUpstreamBuild || echo 0`
echo $LAST_SUCCESSFUL_UPSTREAM_BUILD> $WORKSPACE/../lastKnownUpstreamBuild
exit $(( $LAST_SUCCESSFUL_UPSTREAM_BUILD > $LAST_KNOWN_UPSTREAM_BUILD )) 
```

每当退出代码为“1”时，获取 ScriptTrigger 以安排构建。设置一个合适的轮询间隔，就可以了。

如果上游作业成功，这显然只会安排构建。根据您的要求，在上面的 URL 中使用“lastBuild”或“lastFailedBuild”而不是“lastSuccessfulBuild”。

注意：使用 BASH shell 实现。可以在其他 UNIX shell 中工作，在 Windows 中不起作用。

# java - Android 后台服务没有停止/终止

> ID：12577211
> 
> 赞同：1
> 
> 时间：2012-09-25T06:19:37.563
> 
> 标签：java, android, android-service

我正在使用服务来播放背景音乐。问题是当我完成活动时音乐继续播放。

这是来自 Main Activity 的代码，它启动服务

```
 Intent svc=new Intent(HomeActivity.this, BackgroundSoundService.class);
    startService(svc); 
```

**背景声音服务.java**

```
 public class BackgroundSoundService extends Service {
             private static final String TAG = null;
             public static MediaPlayer player;
             public IBinder onBind(Intent arg0) {

                 return null;
             }
             @Override
             public void onCreate() {
                 super.onCreate();
                 Log.d("atMedia", "Backround Music playing");
                 player = MediaPlayer.create(this, R.raw.background);
                 player.setLooping(true); // Set looping
                 player.setVolume(100,100);

             }
             public int onStartCommand(Intent intent, int flags, int startId) {
                 player.start();
                 return 1;
             }

             public void onStart(Intent intent, int startId) {
                 // TO DO
             }
             public IBinder onUnBind(Intent arg0) {
                 // TO DO Auto-generated method
                 return null;
             }

             public void onStop() {

             }
             public void onPause() {

             }
             @Override
            public void onDestroy() {
                super.onDestroy();
                 player.stop();
                 player.release();
             }

             @Override
             public void onLowMemory() {

             } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:22:04.507

您必须在服务中调用 selfStop() 方法。或使用 stopService() API

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:26:19.880

尝试从您的 MainActivity 停止服务：

```
Intent svc=new Intent(HomeActivity.this, BackgroundSoundService.class);     
stopService(svc); 
```

# asp.net-mvc - ASP MVC 3 使用 AJAX 和 JQUERY 提交 url 参数

> ID：12577216
> 
> 赞同：2
> 
> 时间：2012-09-25T06:20:04.950
> 
> 标签：asp.net-mvc, jquery

我在使用 ASP.NET MVC3、AJAX 和 JQUERY 时遇到了问题。我有以下功能

```
[HttpPost]
public bool Update(int id, FormCollection collection) 
```

这是我的 jQuery 源代码：

```
$(document).ready(function () {
    $('#btnUpdate').click(function (e) {
        // Cancel default action
        e.preventDefault();
        var formCollection = $('#formId').serialize();
        $.ajax({
            cache: false,
            type: 'POST',
            url: '@Url.Action("Action","Controller")',
            data: { id: $('#id').val(), collection: formCollection },
            success: function (data) {
                alert(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Error during process: \n' + xhr.responseText);
            }
        });
    });
}); 
```

id参数提交成功，但是集合（FormCollection）包含一个数组，{[0]:10000,[1]:collection}。我无法解决问题。当我重新设计这样的解决方案时：

```
[HttpPost]
public bool Update(FormCollection collection)

$(document).ready(function () {
    $('#btnUpdate').click(function (e) {
        // Cancel default action
        e.preventDefault();
        $.ajax({
            cache: false,
            type: 'POST',
            url: '@Url.Action("Action", "Controller")',
            data: $('#formId').serialize(),
            success: function (data) {
                alert(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Error during process: \n' + xhr.responseText);
            }
        });
    });
}); 
```

一切正常。我在传递 2 参数时做错了什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:30:15.583

```
$(document).ready(function () {
    $('#btnUpdate').click(function (e) {
        // Cancel default action
        e.preventDefault();
        var formCollection = $('#formId').serialize();
        $.ajax({
            cache: false,
            type: 'POST',
            url: '@Url.Action("Action","Controller")',
            data: JSON.stringify({ id: $('#id').val(), collection: formCollection }),
            success: function (data) {
                alert(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Error during process: \n' + xhr.responseText);
            }
        });
    });
}); 
```

您应该必须使用 jsonstringify 传递数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:28:17.240

尝试在 JSON 上调用 JSON.stringify()：

```
data: JSON.stringify({ id: $('#id').val(), collection: formCollection }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T06:41:28.217

这是真正的手表： ![调试](../Images/53ba07bf3bc836298715a8898be8b15b.png)

参数 ID 提交成功（Name=id, Wert=10000）。在 id 上方，您可以看到 formCollection，包括 ajax 调用的 FORM.serialize() 值。但是 System.Web.Mvc.FormCollection 只包括两个键：**id**和**collection**！我期望

1.  “姓名”
2.  “地址”
3.  “地址2”
4.  ...

我想如果在创建我的 ajax 请求时出错，但我不知道为什么......

```
var customerNo = $('#fieldID').val();
var formCollection = $('#formID').serialize();
$.ajax({
    cache: false,
    type: 'POST',
    url: '@Url.Action("Action", "Controller")',
    data: { id: customerNo, collection: formCollection },
    dataType: 'json',
    success: function (data) {
        if (data) {
            alert(data);
        };
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert('Error during process: \n' + xhr.responseText);
    }
}); 
```

以下行生成错误：

```
data: JSON.stringify({ id: customerNo, collection: formCollection }) 
```

*参数字典包含一个不可为空类型“System.Int32”的空条目“id”...*

更改无效：

```
data: { id: customerNo, collection: JSON.stringify(formCollection) }, 
```

有任何想法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T04:34:52.530

这是我的想法（有效！）

在模型的部分类中添加字符串属性，在“数据”中手动添加此属性。

**JS：**

```
$.ajax({
        cache: false,
        type: 'POST',
        url: '@Url.Action("Action", "Controller")',
        data: $("form").serialize() + "&id=whatever",
        dataType: 'json',
        success: function (data) {
                if (data) {
                        alert(data);
                };
        },
        error: function (xhr, ajaxOptions, thrownError) {
                alert('Error during process: \n' + xhr.responseText);
        }
}); 
```

**partialClass.cs 模型：**

```
public partial class TableName
{
    public string id { get; set; }
} 
```

**控制器：**

```
[HttpPost]
public bool Update(FormCollection collection){
    var ID = collection.id; 
} 
```

问候！

# c++ - 从函数返回分配的指针，会导致内存泄漏吗？

> ID：12577220
> 
> 赞同：2
> 
> 时间：2012-09-25T06:20:18.623
> 
> 标签：c++, pointers, memory-management, memory-leaks, malloc

我有一个函数 foo 像

```
myType** foo(){

    myType **array = malloc( .... );
    //Do some stuff
    return array;
} 
```

在这里我已经 malloced 了，但在我归还它时没有释放它。这会导致内存泄漏吗？使用后是否应该在调用函数中显式释放它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:21:34.317

仅当您不释放内存（无论在哪里）时，这才是内存泄漏。

在这种情况下，您应该`free`在调用函数并完成指针之后使用它。

但这是 C 的做法。在 C++ 中，您将返回一个智能指针，并使用`new`而不是`malloc`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T06:22:02.857

使用这种类型的函数，调用者是指针指向的资源的“所有者”。所以调用者必须要么释放资源，要么将它们传递给其他愿意的人。

在 C++ 中，人们倾向于返回一种管理其自己的资源的类型，例如一个`std::vector`或一个[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，它们既负责资源解除分配，又使所有权明确。

看这个例子，别担心，阅读所有关于[复制](http://en.wikipedia.org/wiki/Copy_elision)省略的内容，特别是*命名返回值优化*（NRVO）。

```
std::vector<std::vector<SomeType>> foo()
{
  std::vector<std::vector<SomeType>> tmp = ....;
  // do some stuff
  return tmp;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T06:32:26.660

内存泄漏是由于没有释放内存造成的。只要内存在某个时候被释放，它就不会泄漏*。*但是，如果指针曾经“丢失”，或者如果某种依赖循环导致内存在不再有用后仍然存在的情况，那么此时您已经创建了泄漏。

通常在这种情况下，您会创建这样的模式：

```
void* mything_init() {
   void *obj = malloc(LEN);
   // do some initialization
   return obj;
}

void mything_uninit(void* thing) {
   // any teardown
   free(thing);
} 
```

对于每`mything`一个你`_init`，你最终都必须调用`_uninit`那个对象。这是您作为该库用户的责任。作为该库的作者，您要确保`_init`在`_uninit`.

这是 C 模式而不是 C++ 模式，因为 malloc() 是 C 习惯用法。C++ 使用`new`and `delete`，我们通常在构造函数/析构函数对中完成这类工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-31T20:27:14.373

很长一段时间以来，我一直对此问题有疑问。我建议你阅读这个 wiki 页面：

[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)

在您的情况下，您可以使用 unique_ptr。因此，您将能够将指针的所有权转移给调用者函数。

```
unique_ptr<int> callee1()
{
     std::unique_ptr<int> p1(new int(5));
     return p1;
}

int main()
{
     std::unique_ptr<int> result = callee1() ;
     (*result)++; // Increase the value stored in the pointer
     std::cout << "New Value: " << (*result) << std::endl; 
     result.reset() ;
} 
```

希望这个代码狙击手可以帮助你。

# oracle - 将 2 列的整个值从一个表复制到另一个表以确保关系

> ID：12577221
> 
> 赞同：0
> 
> 时间：2012-09-25T06:20:34.843
> 
> 标签：oracle, plsql

我有一个`STUDENT`带有列的表`st_id,name,age,dept_name`。现在我想创建一个`STUDENT_DESC`带有列的新表`st_id,dept_name,st_desc`。所以我需要将`st_id`和的所有值复制`dept_name`到新创建的表中`STUDENT_DESC`。我需要在复制时确保关系`st_id`and `dept_name`，`dept_name`应该对应于`st_id`。那么我该如何在 PL/SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:04:03.913

我不确定我是否了解您的数据模型，但从表面上看，您可以简单地创建表格：

```
CREATE TABLE student_desc AS SELECT st_id, dept_name FROM student;

ALTER TABLE student_desc ADD (st_desc VARCHAR2(..)); 
```

填写`..`所需的最大尺寸`st_desc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:18:02.660

```
insert into STUDENT_DESC (select st_id, dept_name, null from student); 
```

这将简单地复制所有记录。第三列`st_desc`留空（null）

为了确保参照完整性，您将向`STUDENT_DESC`表添加主键和参照完整性约束

但是，请注意，在许多情况下，引入包含此类学生数据的第二个表可能是“错误的”。`st_desc`添加到`STUDENT`表格中可能会“更好” 。

# javascript - 如何更改下拉列表中特定选项的文本？

> ID：12577222
> 
> 赞同：-2
> 
> 时间：2012-09-25T06:20:38.590
> 
> 标签：javascript, jquery, html-select

我有一个下拉列表，

```
<select id="bi_tool_y_axis" name="bi_tool[y_axis]">
   <option value="0">Vote Count</option>
   <option selected="selected" value="1">Choices of Poll</option>
   <option value="2">Location</option>
</select> 
```

和一个 jquery 函数来更改上面下拉列表中值 2 的选项文本

```
function change_text_of_value_2(new_text){
    // I want  to change text "Location" with new_text in the dropdown list
} 
```

我怎样才能做到这一点？请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:23:34.870

为什么不简单

```
$("#bi_tool_y_axis option[value='2']").text("anything else"); 
```

这就是你调用的函数（你的函数并将参数放入`text`函数）；

或者

```
function change_text(optionValue, new_text){
   $("#bi_tool_y_axis option[value='"+optionValue+"']").text(new_text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:22:40.907

尝试这个

```
function change_text_of_value_2(new_text){
   $("#bi_tool_y_axis option[value='2']").text(new_text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:30:06.247

尝试这个

```
$(function() {

    $('#bi_tool_y_axis').on('change', function() {

        if ($(this).val() == '2') {
            change_text_of_value_2($(this), "New_Text_Added")
        }
    });
});

function change_text_of_value_2($elem, new_text) {
    $elem.find("option[value='2']").text(new_text);
}​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/LWmWu/)

# jakarta-ee - Jaxb XmlElementRef 父类标签

> ID：12577227
> 
> 赞同：1
> 
> 时间：2012-09-25T06:20:50.617
> 
> 标签：jakarta-ee, jaxb

我在 JAXB XmlElementRef 标记生成方面需要一些帮助。我有如下课程：

```
@XmlRootElement(name = "Request")
public class BaseRequest
{
   @XmlAttribute(name = "requestid")
   private String requestId;
   //Getters and Setters
}

@XmlRootElement(name = "ChildRequest")
public class ChildRequest extends BaseRequest
{
  private String name = null;
  private String id = null;
  //Setters and getters
}

@XmlRootElement(name = "PublishRequest")
public class PublishRequest
{
    private List<BaseRequest>   requests  = null;

    @XmlElementWrapper(name = "Requests")
    @XmlElementRefs({ @XmlElementRef(type = ChildRequest.class) })
    public List<BaseRequest> getRequests()
    {
      return this.requests;
    }

} 
```

并且期望从这些类中遵循 XML。

```
 <PublishRequest>
    <Requests>
      <Request requestid = "">
        <ChildRequest>
           <name></name>
           <id></id>
        </ChildRequest>
      </Request>
    </Requests>
  </PublishRequest> 
```

但是@XmlElementRef 忽略了父类属性及其声明的 JAXB 注释。谁能帮我生成预期的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:57:52.333

在类中使用 @XmlElement 注解。在下面更新了您的代码。

```
@XmlRootElement(name = "Request")
public class BaseRequest
{
    @XmlAttribute(name = "requestid")
    private String requestId;
    //Getters and Setters   
    @XmlElement(name = "ChildRequest")
    ChildRequest childRequest;
}

@XmlRootElement(name = "ChildRequest")
public class ChildRequest extends BaseRequest
{
    @XmlElement(name = "name")
    private String name = null;
    @XmlElement(name = "id")
    private String id = null;
    //Setters and getters 
}

@XmlRootElement(name = "PublishRequest")
public class PublishRequest
{
    private List<BaseRequest>   requests  = null;

    @XmlElementWrapper(name = "Requests")
    @XmlElementRefs({ @XmlElementRef(type = ChildRequest.class) })
    public List<BaseRequest> getRequests()
    {
        return this.requests;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:30:11.653

您可以使用 xjc 生成类：

```
xjc -p <your package> <your XSD> 
```

对于您的方案，以下是 XML 的 xsd：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="PublishRequest">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Requests">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Request">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="ChildRequest">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element type="xs:string" name="name"/>
                          <xs:element type="xs:string" name="id"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute type="xs:string" name="requestid"/>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

对象工厂类：

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.09.25 at 11:57:53 AM GMT+05:30 
//

package com.test;

import javax.xml.bind.annotation.XmlRegistry;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the com.test package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: com.test
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link PublishRequest }
     * 
     */
    public PublishRequest createPublishRequest() {
        return new PublishRequest();
    }

    /**
     * Create an instance of {@link PublishRequest.Requests.Request.ChildRequest }
     * 
     */
    public PublishRequest.Requests.Request.ChildRequest createPublishRequestRequestsRequestChildRequest() {
        return new PublishRequest.Requests.Request.ChildRequest();
    }

    /**
     * Create an instance of {@link PublishRequest.Requests.Request }
     * 
     */
    public PublishRequest.Requests.Request createPublishRequestRequestsRequest() {
        return new PublishRequest.Requests.Request();
    }

    /**
     * Create an instance of {@link PublishRequest.Requests }
     * 
     */
    public PublishRequest.Requests createPublishRequestRequests() {
        return new PublishRequest.Requests();
    }

} 
```

发布请求类：

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.09.25 at 11:57:53 AM GMT+05:30 
//

package com.test;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="Requests">
 *           &lt;complexType>
 *             &lt;complexContent>
 *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *                 &lt;sequence>
 *                   &lt;element name="Request">
 *                     &lt;complexType>
 *                       &lt;complexContent>
 *                         &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *                           &lt;sequence>
 *                             &lt;element name="ChildRequest">
 *                               &lt;complexType>
 *                                 &lt;complexContent>
 *                                   &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *                                     &lt;sequence>
 *                                       &lt;element name="name" type="{http://www.w3.org/2001/XMLSchema}string"/>
 *                                       &lt;element name="id" type="{http://www.w3.org/2001/XMLSchema}string"/>
 *                                     &lt;/sequence>
 *                                   &lt;/restriction>
 *                                 &lt;/complexContent>
 *                               &lt;/complexType>
 *                             &lt;/element>
 *                           &lt;/sequence>
 *                           &lt;attribute name="requestid" type="{http://www.w3.org/2001/XMLSchema}string" />
 *                         &lt;/restriction>
 *                       &lt;/complexContent>
 *                     &lt;/complexType>
 *                   &lt;/element>
 *                 &lt;/sequence>
 *               &lt;/restriction>
 *             &lt;/complexContent>
 *           &lt;/complexType>
 *         &lt;/element>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "requests"
})
@XmlRootElement(name = "PublishRequest")
public class PublishRequest {

    @XmlElement(name = "Requests", required = true)
    protected PublishRequest.Requests requests;

    /**
     * Gets the value of the requests property.
     * 
     * @return
     *     possible object is
     *     {@link PublishRequest.Requests }
     *     
     */
    public PublishRequest.Requests getRequests() {
        return requests;
    }

    /**
     * Sets the value of the requests property.
     * 
     * @param value
     *     allowed object is
     *     {@link PublishRequest.Requests }
     *     
     */
    public void setRequests(PublishRequest.Requests value) {
        this.requests = value;
    }

    /**
     * <p>Java class for anonymous complex type.
     * 
     * <p>The following schema fragment specifies the expected content contained within this class.
     * 
     * <pre>
     * &lt;complexType>
     *   &lt;complexContent>
     *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *       &lt;sequence>
     *         &lt;element name="Request">
     *           &lt;complexType>
     *             &lt;complexContent>
     *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                 &lt;sequence>
     *                   &lt;element name="ChildRequest">
     *                     &lt;complexType>
     *                       &lt;complexContent>
     *                         &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                           &lt;sequence>
     *                             &lt;element name="name" type="{http://www.w3.org/2001/XMLSchema}string"/>
     *                             &lt;element name="id" type="{http://www.w3.org/2001/XMLSchema}string"/>
     *                           &lt;/sequence>
     *                         &lt;/restriction>
     *                       &lt;/complexContent>
     *                     &lt;/complexType>
     *                   &lt;/element>
     *                 &lt;/sequence>
     *                 &lt;attribute name="requestid" type="{http://www.w3.org/2001/XMLSchema}string" />
     *               &lt;/restriction>
     *             &lt;/complexContent>
     *           &lt;/complexType>
     *         &lt;/element>
     *       &lt;/sequence>
     *     &lt;/restriction>
     *   &lt;/complexContent>
     * &lt;/complexType>
     * </pre>
     * 
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "request"
    })
    public static class Requests {

        @XmlElement(name = "Request", required = true)
        protected PublishRequest.Requests.Request request;

        /**
         * Gets the value of the request property.
         * 
         * @return
         *     possible object is
         *     {@link PublishRequest.Requests.Request }
         *     
         */
        public PublishRequest.Requests.Request getRequest() {
            return request;
        }

        /**
         * Sets the value of the request property.
         * 
         * @param value
         *     allowed object is
         *     {@link PublishRequest.Requests.Request }
         *     
         */
        public void setRequest(PublishRequest.Requests.Request value) {
            this.request = value;
        }

        /**
         * <p>Java class for anonymous complex type.
         * 
         * <p>The following schema fragment specifies the expected content contained within this class.
         * 
         * <pre>
         * &lt;complexType>
         *   &lt;complexContent>
         *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *       &lt;sequence>
         *         &lt;element name="ChildRequest">
         *           &lt;complexType>
         *             &lt;complexContent>
         *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *                 &lt;sequence>
         *                   &lt;element name="name" type="{http://www.w3.org/2001/XMLSchema}string"/>
         *                   &lt;element name="id" type="{http://www.w3.org/2001/XMLSchema}string"/>
         *                 &lt;/sequence>
         *               &lt;/restriction>
         *             &lt;/complexContent>
         *           &lt;/complexType>
         *         &lt;/element>
         *       &lt;/sequence>
         *       &lt;attribute name="requestid" type="{http://www.w3.org/2001/XMLSchema}string" />
         *     &lt;/restriction>
         *   &lt;/complexContent>
         * &lt;/complexType>
         * </pre>
         * 
         * 
         */
        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {
            "childRequest"
        })
        public static class Request {

            @XmlElement(name = "ChildRequest", required = true)
            protected PublishRequest.Requests.Request.ChildRequest childRequest;
            @XmlAttribute
            protected String requestid;

            /**
             * Gets the value of the childRequest property.
             * 
             * @return
             *     possible object is
             *     {@link PublishRequest.Requests.Request.ChildRequest }
             *     
             */
            public PublishRequest.Requests.Request.ChildRequest getChildRequest() {
                return childRequest;
            }

            /**
             * Sets the value of the childRequest property.
             * 
             * @param value
             *     allowed object is
             *     {@link PublishRequest.Requests.Request.ChildRequest }
             *     
             */
            public void setChildRequest(PublishRequest.Requests.Request.ChildRequest value) {
                this.childRequest = value;
            }

            /**
             * Gets the value of the requestid property.
             * 
             * @return
             *     possible object is
             *     {@link String }
             *     
             */
            public String getRequestid() {
                return requestid;
            }

            /**
             * Sets the value of the requestid property.
             * 
             * @param value
             *     allowed object is
             *     {@link String }
             *     
             */
            public void setRequestid(String value) {
                this.requestid = value;
            }

            /**
             * <p>Java class for anonymous complex type.
             * 
             * <p>The following schema fragment specifies the expected content contained within this class.
             * 
             * <pre>
             * &lt;complexType>
             *   &lt;complexContent>
             *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
             *       &lt;sequence>
             *         &lt;element name="name" type="{http://www.w3.org/2001/XMLSchema}string"/>
             *         &lt;element name="id" type="{http://www.w3.org/2001/XMLSchema}string"/>
             *       &lt;/sequence>
             *     &lt;/restriction>
             *   &lt;/complexContent>
             * &lt;/complexType>
             * </pre>
             * 
             * 
             */
            @XmlAccessorType(XmlAccessType.FIELD)
            @XmlType(name = "", propOrder = {
                "name",
                "id"
            })
            public static class ChildRequest {

                @XmlElement(required = true)
                protected String name;
                @XmlElement(required = true)
                protected String id;

                /**
                 * Gets the value of the name property.
                 * 
                 * @return
                 *     possible object is
                 *     {@link String }
                 *     
                 */
                public String getName() {
                    return name;
                }

                /**
                 * Sets the value of the name property.
                 * 
                 * @param value
                 *     allowed object is
                 *     {@link String }
                 *     
                 */
                public void setName(String value) {
                    this.name = value;
                }

                /**
                 * Gets the value of the id property.
                 * 
                 * @return
                 *     possible object is
                 *     {@link String }
                 *     
                 */
                public String getId() {
                    return id;
                }

                /**
                 * Sets the value of the id property.
                 * 
                 * @param value
                 *     allowed object is
                 *     {@link String }
                 *     
                 */
                public void setId(String value) {
                    this.id = value;
                }

            }

        }

    }

} 
```

# c++ - 编写 JSON 解释器的设计问题

> ID：12577231
> 
> 赞同：1
> 
> 时间：2012-09-25T06:21:25.270
> 
> 标签：c++, design-patterns, c++11

我决定用 C++ 编写一个 json 解释器来练习。理想情况下，我希望能够将它设置在一个包含地图、向量和相关值类型的树状容器中，以便我可以按照 json 的实际结构方式进行访问。例如，给出以下 JSON 示例（来自 json.org）：

```
JSON
{
"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}}

C++
jsonobject["menu"]["id"] // returns std::string "file"
jsonobject["menu"]["popup"]["menuitem"] // returns std::vector of std::maps
jsonobject["menu"]["popup"]["menuitem"][0]["value"] // returns std::string "New" 
```

在上面的示例中，我的第一个问题来自容器内的混合类型。例如，在上面的 json 中，“menu”将是一个 std::map，但我不能拥有“id”和“popup”键，因为一个返回一个字符串，另一个返回一个向量。

为了解决这个问题，我决定创建从无类型基类继承的包装模板类。假设这将提供对值的多态访问。问题是我做不到。这是一些代码来显示我到目前为止所拥有的内容：

```
#include <string>
#include <map>
#include <vector>

class NodeBase {};

template <typename T>
class Node : public BaseNode {};

typedef std::map<std::string, BaseNode*> JSONObject;
template <>
class Node<JSONObject> : public BaseNode {
  public:
    JSONObject value;
    BaseNode* operator[](const std::string key){(value.find(key) != value.end) ? return value[key] : return nullptr}
};

typedef std::vector<BaseNode*> JSONArray;
template <>
class Node<JSONArray> : public BaseNode {
  public:
    JSONArray value;
    BaseNode* operator[](const uint index) {(index < value.size()) ? return value[index] : return nullptr}
};

template <typename T>
class Node : public BaseNode {
  public:
    T value;
};

class RootNode {
  Node<JSONObject> value;
};

int main(void) {
  RootNode root;
  root.insert(std::pair<std::string, BaseNode*>("menu", new Node<JSONObject>)
  // problem!
  // cannot use following code, because BaseNode* does not have access to value :'<
  root["menu"].insert(..)
} 
```

所以我想我的问题是，我该如何进行这项工作？我是在正确的道路上，但无法从经验中看到解决方案，还是这种设计与 C++ 根本不兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:48:06.250

有趣的课程，但我最近使用 boost::property_three 来解析 json 并且很高兴我避免重新发明轮子 xD 你的库可能作为轻量级解析器工作，所以我对这项研究感兴趣。

我觉得这个设计不是很好，使用库的人可能不知道某些值包含什么：哈希或数组。这可能导致过载，`dynamic_cast`这是相对繁重的操作。结果，您的库将失去其“轻量级”属性。

我建议使用一种对象类型表示法，就像所有`Get`方法 return一样`Node*`，但`Node*`可以回答问题`isArray()`，`isHash()`而不需要像动态强制转换这样的繁重操作。

接下来，`Node<JSONObject>`并且`Node<JSONArray>`应该具有从`BaseNode`:继承的相同接口`BaseNode* operator[](const std::string key)`，但`Node<JSONArray>`能够通过重载接收`int`密钥。如果用户知道它是数组，`operator[]`这会缩小 API 并允许用户使用索引。`int`但这不是万能的，你应该做所谓的“图书馆设计”。

Globally, i recommend not to write code right now. Write some class hierarchy schemas, write some use cases; look how these use cases can fit into schema. Generally writing such librarys in not a trivial task and "design" mistakes may make your library unusable in future. So, choose wise=) Goodluck!

# c# - 如何为非静态方法从 javascript 调用 asp.net 函数？

> ID：12577243
> 
> 赞同：1
> 
> 时间：2012-09-25T06:22:40.263
> 
> 标签：c#, javascript, asp.net

我正在使用下面给出的代码从 javascript 调用 asp.net 函数：但我需要调用非静态方法。当我删除未触发的静态场功能时。有什么办法可以做到这一点？谢谢你

```
public partial class Test : System.Web.UI.Page
{
   [WebMethod]
   public static string HelloWorld(string name)
   {
       return string.Format("Hi {0}",name);
   }
}

<script type="text/javascript">
function GreetingsFromServer() {
    var name = 'Jalpesh';
    PageMethods.HelloWorld(name,OnSuccess, OnError);
    return false;
}
function OnSuccess(response) {
    alert(response);
}
function OnError(error) {
    alert(error);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:30:22.993

不可能，也不鼓励这样做。

# node.js - 如何使用 node-couchdb-api 使用全有或全无选项进行批量保存

> ID：12577248
> 
> 赞同：1
> 
> 时间：2012-09-25T06:23:02.613
> 
> 标签：node.js, couchdb

为了保存批量文档，我使用了 bulkDocs 功能，它工作正常。但是如何在 bulkDocs 函数中使用 all-or-nothing 选项。我已经尝试了以下代码。

```
db.bulkDocs(docs, "all-or-nothing",function (err, body, res) {
       console.log(body);
}); 
```

它不适合我。请建议我使用该选项，因为我需要保存所有文档，或者如果发生任何错误，则无法保存。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:20:08.483

[node-couchdb-api](https://github.com/felixge/node-couchdb) api`bulkDocs`只支持两个参数——数据和回调。不要将选项作为参数传递，而是尝试将其嵌入到传递给的数据中，`bulkDocs`如[CouchDB 文档](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Transactional_Semantics_with_Bulk_Updates)及以下所示。

例如，我相信这应该可以满足您的需求，但我目前没有系统设置来测试它：

```
var data = {
    "all_or_nothing": true,
    "docs": docs
}

db.bulkDocs(data, function(err, body, errs) {
     console.log(body);
} 
```

# java - 如何获取 HashMap 中某个键的出现次数？

> ID：12577250
> 
> 赞同：0
> 
> 时间：2012-09-25T06:23:04.110
> 
> 标签：java, collections, hashmap, key

我有这样的Hashmap，

```
HashMap<String,String> epnSource = new HashMap<String, String>(); 
```

现在我添加了这样的键/值，

```
epnSource.put("10.3.2.227","EPN1");
epnSource.put("10.3.2.227","EPN2");
epnSource.put("10.3.2.166","EPN3");
epnSource.put("10.3.2.166","EPN4");
epnSource.put("10.3.2.161","EPN5"); 
```

我每次在添加值之前都尝试这样做，我想检查 HashMap 中存在的键的出现次数。假设如果 key`10.3.2.227`出现两次以上，我不应该添加它并选择新的。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:31:37.937

> 假设如果值 10.3.2.227 出现两次以上...

它不会。您实现它的方式，“10.3.2.227”是 Map 的一个键，给定的键不能在 Map 中出现多次。

如果您*希望*给定键（例如“10.3.2.227”）映射到多个值（例如“EPN1”和“EPN1”），您需要使用 Apache 或 Google/Guava 集合库中的一个`Map<String,Set<String>>`或一个`MultiMap`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:29:58.547

*如果映射先前包含键的映射，则替换旧值。*

HashMap 中不可能有重复键。

# sql - 如何在订单网格页面中添加 SKU

> ID：12577253
> 
> 赞同：2
> 
> 时间：2012-09-25T06:23:08.147
> 
> 标签：sql, magento, grid, skus

我已经看到了很多关于如何做到这一点的例子。但是所有示例都是针对不同版本的 Magento。他们都没有在我的情况下工作。我的版本是 1.4.0.0rc-1。是的，我知道这不应该在生产环境中，但不幸的是这里就是这种情况。

问题是 Mage/Adminhtml/Block/Sales/Order/Grid.php 类中的 _prepareCollection() 函数与我见过的所有其他示例不同。所以不知道该怎么做。

这是该功能的代码：

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel('sales/order_collection')
        ->addAttributeToSelect('*')
        ->joinAttribute('sku','sales_flat_order_item', null, null, 'left')
        ->joinAttribute('billing_firstname', 'order_address/firstname', 'billing_address_id', null, 'left')
        ->joinAttribute('billing_lastname', 'order_address/lastname', 'billing_address_id', null, 'left')
        ->joinAttribute('shipping_firstname', 'order_address/firstname', 'shipping_address_id', null, 'left')
        ->joinAttribute('shipping_lastname', 'order_address/lastname', 'shipping_address_id', null, 'left')
        ->addExpressionAttributeToSelect('billing_name',
            'CONCAT({{billing_firstname}}, " ", {{billing_lastname}})',
            array('billing_firstname', 'billing_lastname'))
        ->addExpressionAttributeToSelect('shipping_name',
            'CONCAT({{shipping_firstname}},  IFNULL(CONCAT(\' \', {{shipping_lastname}}), \'\'))',
            array('shipping_firstname', 'shipping_lastname'));
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

我尝试添加左连接，但没有用。这是我在 setCollection 语句之前尝试过的：

```
$collection->getSelect()->join('sales_flat_order_item', 'order_id=entity_id',    array('name'=>'name', 'sku' =>'sku'), null,'left'); 
```

但它打印出以下错误：

```
SELECT `e`.*, `_table_billing_address_id`.`value` AS `billing_address_id`, `_table_billing_firstname`.`value` AS `billing_firstname`, `_table_billing_lastname`.`value` AS `billing_lastname`, `_table_shipping_address_id`.`value` AS `shipping_address_id`, `_table_shipping_firstname`.`value` AS `shipping_firstname`, `_table_shipping_lastname`.`value` AS `shipping_lastname`, CONCAT(_table_billing_firstname.value, " ", _table_billing_lastname.value) AS `billing_name`, CONCAT(_table_shipping_firstname.value,  IFNULL(CONCAT(' ', _table_shipping_lastname.value), '')) AS `shipping_name`, `sales_flat_order_item`.`name`, `sales_flat_order_item`.`sku` FROM `sales_order` AS `e`
 LEFT JOIN `sales_order_int` AS `_table_billing_address_id` ON (_table_billing_address_id.entity_id = e.entity_id) AND (_table_billing_address_id.attribute_id='112')
 LEFT JOIN `sales_order_entity_varchar` AS `_table_billing_firstname` ON (_table_billing_firstname.entity_id = _table_billing_address_id.value) AND (_table_billing_firstname.attribute_id='202')
 LEFT JOIN `sales_order_entity_varchar` AS `_table_billing_lastname` ON (_table_billing_lastname.entity_id = _table_billing_address_id.value) AND (_table_billing_lastname.attribute_id='204')
 LEFT JOIN `sales_order_int` AS `_table_shipping_address_id` ON (_table_shipping_address_id.entity_id = e.entity_id) AND (_table_shipping_address_id.attribute_id='113')
 LEFT JOIN `sales_order_entity_varchar` AS `_table_shipping_firstname` ON (_table_shipping_firstname.entity_id = _table_shipping_address_id.value) AND (_table_shipping_firstname.attribute_id='202')
 LEFT JOIN `sales_order_entity_varchar` AS `_table_shipping_lastname` ON (_table_shipping_lastname.entity_id = _table_shipping_address_id.value) AND (_table_shipping_lastname.attribute_id='204')
 INNER JOIN `sales_flat_order_item` ON order_id=entity_id WHERE (e.entity_type_id = '11') ORDER BY `e`.`created_at` desc, `e`.`created_at` desc LIMIT 20 
```

有人可以帮我解决这个问题吗？为了您的信息，SKU 字段位于“Sales_flat_order_item”表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:24:11.513

```
$collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('attribute_set_id')
        ->addAttributeToSelect('type_id')
        ->joinField('qty',
            'cataloginventory/stock_item',
            'qty',
            'product_id=entity_id',
            '{{table}}.stock_id=1',
            'left')
        ->joinAttribute('status', 'catalog_product/status',
                        'entity_id', null, 'inner', $store->getId()); 
```

像 getId() 你可以去 getSku(); --->我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:58:14.050

对于任何对此有问题的人，我在这里找到了一个很好的解决方案：

[http://www.magentocommerce.com/boards/viewthread/18362/](http://www.magentocommerce.com/boards/viewthread/18362/)

# android - 将额外的数据文件部署到已部署的 android 应用程序

> ID：12577255
> 
> 赞同：0
> 
> 时间：2012-09-25T06:23:24.730
> 
> 标签：android

考虑一个在 apk 中嵌入了一组数据文件（可能是音乐、图片或位置或任何东西）的应用程序。我现在想向用户提供额外的数据文件，以替换或添加到原始数据文件 - 用户应该能够选择要下载的文件，而不必重新安装整个应用程序。

所以问题是可以以非编程方式执行此操作 - 例如通过为应用程序提供额外的 apk 文件但仅包含单个数据文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:39:47.533

这是一个很好的用例。一个简单的想法可能是，要求用户检查更新，然后下载定义更新的 XML 文件。解析此 XML 文件并显示用户需要下载的内容。然后下载并将其保存到所需位置。始终对 XML 文件进行版本控制，以便您知道更新是否可用！

# eclipse - BPEL Apache ODE .deployed 文件

> ID：12577258
> 
> 赞同：4
> 
> 时间：2012-09-25T06:23:39.347
> 
> 标签：eclipse, bpel, apache-ode

我在 BPEL 项目中的 Eclipse 中创建了一个基本的 helloworld.bpel 流程文件，并尝试将其部署到 Apache ODE。所以我按照这个链接 [Apache ODE Eclipse BPEL guide](http://wso2.org/library/tutorials/developing-simple-bpel-project-eclipse-bpel-designer-plugin-wso2-bps-bpel-exporter-plugin)中的步骤进行操作。

但在后期，将相关文件放入 WEB-INF 文件夹并运行 APACHE ODE 后，未创建预期的 .deployed 文件。当我使用`localhost:8080/ode/processes`.

当我尝试在 Eclipse 中启动 ODE 服务器时，出现以下错误。首先，这是我得到的错误。“另一个 derby 实例可能已启动到数据库中” 然后我在 services.msc 中重新启动了 Apache Tomcat。然后该错误停止显示。

现在这是我遇到的错误。“架构 SA 不存在”

```
Database Class Loader started - derby.database.classpath=''
13:54:26,099 WARN  [GeronimoConnectionEventListener] connectionErrorOccurred called with null
  java.sql.SQLSyntaxErrorException: Schema 'SA' does not exist
  at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
  at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
  at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown     Source)
  at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
  at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:19:10.760

看起来嵌入式 derby 数据库存在一些问题。我会尝试完全重新部署 ODE，以便再次从 .war 中提取数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:52:10.437

您必须以管理员身份执行 Eclipse 或 NetBeans。

# javascript - Mootools 确认对话框，如果取消将停止 ajax 功能。

> ID：12577260
> 
> 赞同：1
> 
> 时间：2012-09-25T06:23:49.027
> 
> 标签：javascript, hyperlink, mootools, confirmation

我在某些链接上设置了一个 JavaScript 弹出窗口“确认对话”，当单击该链接时，它会显示“您确定吗？” 并让您确认或取消，但是无论您选择什么，ajax 调用都将起作用。

```
<a onclick="return confirm(\'Are you sure?\')" class="sendEmailLink" href="/" id="someID">Send</a> 
```

调用的函数如下所示：

```
$$('.sendEmailLink').addEvent('click', function(e)
{
    e.stop();

    (I assume something should go here)

    var myRequest = new Request.JSON({
    etc... 
```

确认对话不会停止上述代码是有道理的，但我无法理解如何在 mootools 中完成此操作。帮助？

我需要一个对话框，提供是或否的选择，如果是，则继续 ajax 请求，如果不是，则不继续请求。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:16:42.470

这是解决方案：http: [//jsfiddle.net/kVjAB/](http://jsfiddle.net/kVjAB/)

一些评论：

1.  不要再在 Mootools 中使用 $$ 或 $。它们已被弃用。

2.  在您的代码中，您绑定`click event`到链接。此外，您添加`onClick`了将首先运行自身代码的属性，然后是绑定代码。这就像您添加两个单独的事件来链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:15:53.173

就像@Marcin 提到的那样，您将两个单击事件绑定到一个元素，因此无论确认对话框的结果如何，您的 ajax 调用都会照常进行也就不足为奇了。

通过不通过`onclick`属性将事件绑定到元素来消除一个。（永远不要使用`onclick`！）

```
element.addEvent('click', function() {
    if (confirm('Are you sure?')) {
        new Request.JSON({
            // ...
        }).send();
    } else {
        // Do nothing
    }
}); 
```

这是一个相关的[jsFiddle](http://jsfiddle.net/skTL9/)供您使用。

# node.js - 如何在 mongoose + express 中使用模式上的方法

> ID：12577263
> 
> 赞同：2
> 
> 时间：2012-09-25T06:23:53.373
> 
> 标签：node.js, mongodb, express, mongoose

当我尝试从exports.index.post 运行user.comparePassword 时出现以下错误（见下文）——我粘贴了所有代码以帮助缩小问题范围。UserSchema.pre('save') 方法工作正常，但不是 ./routes/account.js 中的那个（我使用的是 mongoose 3）

这是我得到的错误。

```
Caught exception: [TypeError: Object { username: 'test4',
  email: 'test4@test.com',
  password: '$2a$10$Ix5vCuVYGIU7AmXglmfIxOyYnF6CiPJfw9HLSAGcRDxMJEttud/F6',
  _id: 505fee7ce28f10711e000002,
  __v: 0 } has no method 'comparePassword']

## ./app.js

app.post('/account', routes.account.index.post);

## ./models/user.js

var mongoose = require('mongoose')
    , bcrypt = require('bcrypt')
  , Schema = mongoose.Schema
  , db = mongoose.createConnection('localhost', 'mydb');

var UserSchema = new Schema({
        username    : { type: String, required: true, index: { unique: true }, trim: true }
    , email       : { type: String, required: true, index: { unique: true }, trim: true, lowercase: true }
    , password    : { type: String, required: true, trim: true }
});

UserSchema.pre('save', function(next) {
    var user = this;

    // only hash the password if it has been modified (or is new)
    if (!user.isModified('password')) return next();

    // generate a salt
    bcrypt.genSalt(function(err, salt) {
        if (err) return next(err);

        // hash the password along with our new salt
        bcrypt.hash(user.password, salt, function(err, hash) {
            if (err) return next(err);

            // override the cleartext password with the hashed one
            user.password = hash;
            next();
        });
    });
});

//compare supplied password
UserSchema.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if (err) return cb(err);
        cb(null, isMatch);
    });
};

module.exports = db.model('User', UserSchema);

##./routes/account.js

/*
 * GET account home page.
 */

exports.index = {};
exports.index.get = function(req, res){
    var d = { title: 'Edit account' };
  res.render('account', { d: d } );
};

exports.index.post = function(req, res){
    req.assert('email', 'Enter email').notEmpty().isEmail();
  req.assert('password', 'Enter password').notEmpty().isAlphanumeric().len(5,20);

    //user must confirm password
    if ( req.body.password_new ) {
        req.assert('password_new', 'Enter password').notEmpty().isAlphanumeric().len(5,20);
        req.assert('password_new_confirm', 'Passwords must match').equals(req.body.password);
    }

    res.locals.err = req.validationErrors(true);

    if ( res.locals.err ) {
        var d = { title: 'Edit account' };
        res.render('account', { d: d } );
        return;
    }

    var User = require('../models/user')
    , mongoose = require('mongoose')
  , db = mongoose.createConnection('localhost', 'mydb');

    var user = db.model('User', User.UserSchema);
    user.find({username: req.session.user.username }, function(err, user){
        if ( err ) return next(err);

/*********** THIS IS WHERE THE ERROR OCCURS **************/

        user.comparePassword(req.body.password, function(err, isMatch) {
            console.log("isMatch", isMatch);
            if (err) next(err);

            if (!isMatch) {
                req.flash('error', 'Woops, looks like you mistyped your password.');
                req.session.user = user;
                res.locals.user = user;
                res.redirect('/account');
                return;
            }

            //user is authenticated
            //session length
            console.log(req.body);
        });

    });

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:10:08.920

`user.find`查询 0 个或多个文档，因此其回调的第二个参数是文档数组，而不是单个文档。 `user.findOne`查询 0 或 1 个文档，因此其回调的第二个参数为 null 或该单个文档。因此，您尝试在 JavaScript 上调用架构的方法，`Array`这当然是行不通的。`find`将该调用更改为 a `findOne`，它应该可以工作。

# android - 如何解析 TFL api

> ID：12577265
> 
> 赞同：3
> 
> 时间：2012-09-25T06:24:01.640
> 
> 标签：android

我目前正在从事基于 TFL 的项目。我想解析这个链接中提供的 json 文件： http: [//countdown.api.tfl.gov.uk/interfaces/ura/instant_V1](http://countdown.api.tfl.gov.uk/interfaces/ura/instant_V1) 所以请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:34:07.050

此 API 不是*TFL* API 文档中所写的标准*JSON 。*实际上，我们最好将其解析为 CSV，但要小心，因为我发现有些响应不一致，第一行可能有 6 个字符串，而第二行可能有 5 个字符串，缺少的字段未标识为空字符串，只是被省略了。这种方式使用 CSV 解析器进行解析会导致错误，因为您可能永远不知道省略了什么。

 *我还搜索了解决方案，我能找到的最好的方法是另一个提供标准 JSON 但仅通过`stopCode`请求返回巴士站倒计时的 API。

使用此链接访问它。 **[http://countdown.tfl.gov.uk/stopBoard/75288](http://countdown.tfl.gov.uk/stopBoard/75288)**

我很惊讶为什么 TFL 将这个 api 用于他们自己的应用程序，但没有实现公共 api 来返回像这样的好 JSon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T13:47:42.250

此 API 不是 TFL API 文档中所写的标准 JSON。因此，在获取内容后，您可以更改该格式。使用此链接[http://jsonlint.com/](http://jsonlint.com/)它将验证您的 json 格式。这样您就可以轻松理解json格式错误

获取内容后执行此操作

```
 JSONArray jArray = new JSONArray("["+ result.replaceAll("]", "],").toString() + "]") 
```

现在你得到了正确的 json 数组跳过 jArray 第 0 个位置，这是 - URA 版本数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T14:35:01.740

It is not a single full JSON object, as per the TFL documentation. You treat each line as a separate JSON object. This way if/when you move to the streaming mode, you can continue to receive objects and interpreting them as they get streamed to you. Also you use the first element in the JSON array to determine how to process that particular line, or in some cases if you need to refresh the base data.*

# ios - IOS AWS s3桶图片上传问题

> ID：12577277
> 
> 赞同：0
> 
> 时间：2012-09-25T06:25:01.730
> 
> 标签：ios, amazon-s3

一直试图让它工作一段时间知道我已经尝试过使用数据和流式传输但没有运气，我认为我不需要创建存储桶，如大多数示例所示，因为我想要上传到的存储桶已经存在，它还告诉我我正在尝试访问的存储桶，但是当我尝试上传时，我得到了这个

“将图像上传到 S3 时出错：您提供的 XML 格式不正确或未针对我们发布的架构进行验证”

这是代码

```
UIImage * img = [[[[CurrentGamesInfo sharedCurrentGamesInfo]GameInCreation] GetImageToSend]_imageToSend];
    NSData *savedImageData = UIImageJPEGRepresentation(img, 0.8);
    NSString *pictureName = [[[CurrentGamesInfo sharedCurrentGamesInfo]GameInCreation] GetGameID];

    @try 
    {
        AmazonS3Client *s3 = [[[AmazonS3Client alloc] initWithAccessKey:MY_ACCESS_KEY_ID withSecretKey:MY_SECRET_KEY] autorelease];

        //[s3 createBucket:[[[S3CreateBucketRequest alloc] initWithName:MY_PICTURE_BUCKET] autorelease]];
        NSArray *bucketArray = [s3 listBuckets];
        S3Bucket *bucket = [[s3 listBuckets] objectAtIndex:0];
        NSLog(@"%@",[bucket name]);

        S3PutObjectRequest *por = [[[S3PutObjectRequest alloc] initWithKey:pictureName inBucket:MY_PICTURE_BUCKET] autorelease];
        por.contentType = @"image/jpeg";

        //por.data = savedImageData;
        //por.cannedACL   = [S3CannedACL publicRead];

        S3UploadInputStream *stream = [S3UploadInputStream inputStreamWithData:savedImageData];
        //stream.delay = 0.2; 
        //stream.packetSize = 16;
        por.contentLength = [savedImageData length];
        por.stream = stream;

        [s3 putObject:por];      
    }
    @catch (AmazonClientException *exception) 
    {
        NSLog(@"Error uploading image to S3: %@", exception.message);
    } 
```

sooooo ...我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T05:17:57.043

没关系...变量“pictureName”为零...我羞愧地溜走了

# python - 在 Python 中将字符串 5'8'' 转换为 5.677？

> ID：12577279
> 
> 赞同：0
> 
> 时间：2012-09-25T06:25:04.763
> 
> 标签：python

我正在尝试使用 Python 计算 BMI（身体质量指数），用户输入他们的身高和体重。用户输入高度为 5'8" 或 6" 或 6'1" 应转换为英尺，如 5'8" 应转换为 5.667。到目前为止，这是我的代码。

```
#!/usr/bin/python3.2

W = input("Enter weight:") 
H = input("Enter height:")

W = int(W)

BMI = 703*W/H**2

print(BMI) 
```

我的问题是如何将输入的 5'8" 转换为 5.667 并进行计算？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:31:17.470

我想你误解了你的功课，你需要把英尺和英寸换算成英寸。5'8" 应该在你的公式中变为 68。这就是你想要做的（虽然不做任何格式检查，假设 xx'yy"）：

```
H_feet = H.split("'")[0]
H_inch = H.split("'")[1].split("\"")[0]

H_inches = int(H_feet) * 12 + int(H_inch)

BMI = 703*W/H**2

print(BMI) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:31:06.190

```
import re

# convert feet'inch" to decimal feet
def decimalize_feet(s):
    m = re.match(r'^(\d+)\'(\d+)\"$', s)
    if m:
        return float(m.group(1)) + float(m.group(2)) / 12.
    else:
        return None
        # or handle invalid inputs otherwise 
```

# javascript - 如何通过 JavaScript 代码填充表格的单元格？

> ID：12577284
> 
> 赞同：0
> 
> 时间：2012-09-25T06:25:28.317
> 
> 标签：javascript, html-table

我有一张如下表。我必须使用“购买数量”和“市场价格”字段填充“金额”字段。金额=购买数量*市场价格。我正在做某事——

```
<script>
function populate() {
var rows = document.getElementById("mytable").getElementsByTagName("tr");
for ( var i = 1; i <= rows.length; i++) {
    cells = rows[i].getElementsByTagName("td");
    for ( var j = 0; j <= cells.length; j++) {
        if (j == 1) {
            var num1 =parseFloat(cells[1].childNodes[0].value);
            var num2 =parseFloat(cells[2].childNodes[0].data);
            var num3=num1 * num2;
            cells[3].childNodes[0].value = num3.toString();
        }
     }
   }
 }
</script> 
```

我可以获得 column1 和 column2 的值，但最后一列中的值没有被填充。最后一行似乎不起作用。

```
cells[3].childNodes[0].value = num3.toString(); 
```

我应该改变什么？

![我的表](../Images/95595cd684fb7b12d122348a879255b3.png)

下面的 html 代码是我的 .jsp 文件的一部分。

```
 <form action="BuyServlet">
    <table border="1" cellpadding="5" id="mytable">
        <tr>
            <th>Stock Name</th>
            <th>Buy Quantity</th>
            <th>Market Price</th>
            <th>Amount</th>
        </tr>
        <tr>
            <td>Stock Name</td>
            <td><input type="text" name="quantity" onblur="populate()"></td>
            <td>122</td>
            <td><input type="text" name="amount">
            </d>
        </tr>
        <tr>
            <td>Stock Name</td>
            <td><input type="text" name="quantity" onblur="populate()"></td>
            <td>111</td>
            <td><input type="text" name="amount"></td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:33:35.903

基本上，您从文本框中获取值（最佳数量），并且您正在使用数据来获取市场价格的值（最好使用 innerText）

试试这个（用循环内的代码替换）

```
var num1 =parseFloat(cells[1].childNodes[0].value);
var num2 =parseFloat(cells[2].innerText);
var num3=num1 * num2;
cells[3].innerText = num3.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:02:29.757

您的代码需要改进。在您的表格中，您应该有一个 thead 和一个 tbody 部分。这将使标题行更容易访问和更容易。

```
<table border="1" cellpadding="5" id="mytable">
        <thead>
          <tr>
            <th>Stock Name</th>
            <th>Buy Quantity</th>
            <th>Market Price</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Stock Name</td>
            <td><input type="text" name="quantity"></td>
            <td>122</td>
            <td><input type="text" name="amount"></td>
          </tr>
          <tr>
            <td>Stock Name</td>
            <td><input type="text" name="quantity"></td>
            <td>111</td>
            <td><input type="text" name="amount"></td>
          </tr>
        </tbody>
    </table>
</form> 
```

现在有了代码，您应该使用代码添加 onblur，而不是硬编码。您正在遍历单元格，没有理由这样做。当表格改变时，也不需要循环每一行。只计算改变的那个！由于浏览器中的空白差异，使用 childNode 可能会很棘手。呈现表格后运行此代码。

```
(function () {

    var table = document.getElementById("mytable");
    var tbody = table.getElementsByTagName("tbody")[0];
    var rows = tbody.getElementsByTagName("tr");​​​​​​​​​

    function populateRow (index, addBlurEvent) {
        var row = rows[index];
        var cells = row.getElementsByTagName("td")
        var textboxes = row.getElementsByTagName("input");

        var amountTextbox = textboxes[0];
        var totalTextbox = textboxes[1];
        var costCell = cells[2];

        var amount = amountTextbox.value.length>0 ? parseFloat(amountTextbox.value) : 0;
        var cost = parseFloat(costCell.innerHTML);
        var total = amount * cost;
        totalTextbox.value = total;

        if (addBlurEvent) {
            amountTextbox.onblur = function () { populateRow(index, false); };
        }

    }

    for (i=0;i<rows.length;i++) {
        populateRow(i, true);    
    }

}()); 
```

上面代码的[运行fiddle](http://jsfiddle.net/nLvTT/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:43:29.713

我认为该错误是由于拼写错误造成的——“cells[3].childnodes[0].value = num3.toString();”上有子节点而不是子节点

检查这个小提琴 - [http://jsfiddle.net/VwU7C/](http://jsfiddle.net/VwU7C/)

# facebook - 为访问 RESTful 服务的移动应用程序提供单独的 OAuth？

> ID：12577289
> 
> 赞同：1
> 
> 时间：2012-09-25T06:25:48.817
> 
> 标签：facebook, rest, oauth

我有一个通过 facebook 登录对用户进行身份验证的移动应用程序。然后，此应用程序与 RESTful php Web 服务进行通信。现在，我知道 facebook 使用 OAuth 对话框并创建了一个用户会话。我是使用 facebook 的 OAuth 令牌并授权用户会话，还是必须在我的 Web 服务中单独使用 OAuth 来管理用户会话。

# c# - 从字体 migradoc / pdsharp 获取表格列的文本宽度

> ID：12577290
> 
> 赞同：2
> 
> 时间：2012-09-25T06:25:49.847
> 
> 标签：c#, pdf, pdfsharp, migradoc

我想在 PDF 文档中创建一个表格，该表格的列宽取决于其内容的宽度。

我正在使用 PDFSharp、MigraDoc

也许从单个单元格中获取段落宽度会有所帮助。有没有办法根据字体/样式获取文本宽度？

有什么线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:18:52.850

使用 PDFsharp 函数，您可以获得任何文本的宽度。
MigraDoc 不限于 PDF，它为 PDF、RTF、打印创建文档。没有机会确定确切的宽度（除非您将自己限制为 PDF 并使用 PDFsharp 来获取宽度）。
MigraDoc 将在需要时将列中的文本拆分到下一行。

创建一个虚拟 PdfDocument，创建一个页面，获取该页面的 XGraphics 对象 (gfx)，然后使用 gfx.MeasureString() 查找宽度。

# proxy - 如何在现有隧道上创建 OpenVPN 隧道

> ID：12577295
> 
> 赞同：0
> 
> 时间：2012-09-25T06:26:25.340
> 
> 标签：proxy, vpn, archlinux, openvpn

在我们学校，我们必须连接到一个`OpenVPN-server`才能使用互联网。问题是许多网站都被锁定了。

是否有可能创建第二个隧道以连接到另一个`OpenVPN-provider`隧道并将第二个隧道用作系统范围的代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T16:45:06.517

我在这里看到两种可能性：

1 使用 VM 并连接主机上的一个 VPN 和来宾上的一个 VPN：

> 第 1 步安装 OpenVPN 和 VirtualBox 计算机
> 
> 粗体文本是终端命令。
> 
> 首先，我们需要为 Linux 用户安装 VPN 客户端。Windows 用户可在此处和此处下载 > 程序，并正常运行安装程序。Mac 用户可以将此 GUI 用于 > > OpenVPN for Mac。
> 
> ```
> Change to the Downloads directory.
> Configure the installation.
>     ./configure
> Compile and install.
>     make && sudo make install
> Now we need to install VirtualBox. This will allow us to have a virtual operating > > systems running from within our computer. Download VirtualBox: Windows, Mac, Linux.
> Install a virtual machine of your choice for Windows or Linux and Mac, then install > OpenVPN to it. 
> ```
> 
> 第 2 步链接 VPN
> 
> 启动您的虚拟机，并配置它们。
> 
> ```
> For Windows users using the default VPN client, use this guide to connect to a VPN. > Linux and Mac users, go here.
> Connect to VPN A with your host OS.
> Start up your virtual machine of choice, and connect to VPN B with it.
> Operate from within your virtual machine, and you will be safe from prying eyes. If > you need to delete the virtual machine, make sure you securely delete it, and your 
> ```
> 
> 信息将是安全的。

来源： http: [//null-byte.wonderhowto.com/how-to/chain-vpns-for-complete-anonymity-0131368/](http://null-byte.wonderhowto.com/how-to/chain-vpns-for-complete-anonymity-0131368/)

2 链接 OpenVPN 和其他类型的隧道（PPTP、SSH 等）

> 连接 OpenVPN
> 
> 连接其他隧道

资料来源：大脑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T17:35:21.140

如果您想创建自己的 VPN 隧道，简而言之，您需要：

1.  您将用作 openVPN 服务器的服务器
2.  您的机器上安装了 OpenVPN
3.  您机器上的管理权限
4.  更改路由表，使所有内容都通过第二个 VPN 进行路由，但第一个 VPN 的 IP 和第二个 VPN 的 IP 除外。

有关详细信息，您可以在此处查看我的帖子：您可以在此处查看我的帖子： [https ://www.optionull.com/2017/01/29/routing-traffic-through-openvpn-multiple-hops/](https://www.optionull.com/2017/01/29/routing-traffic-through-openvpn-multiple-hops/)

# ip-camera - 轴一键连接组件

> ID：12577300
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:26:53.330
> 
> 标签：ip-camera

我们正在使用轴一键式连接组件在我们的监控服务中自动发现轴摄像头。我们使用的一键组件的版本是1.2。是最新版本还是有新版本？我们基本上无法通过一键式组件连接 RTSP 流。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T08:19:57.997

知道了。一键组件最新版本[为1.4.3](http://www.axis.com/partner_pages/software_sdk.php?t=cv&mid=2609)

# wcf - 如何在 Delphi 中设置 wcf 服务调用者的超时？

> ID：12577304
> 
> 赞同：1
> 
> 时间：2012-09-25T06:27:13.293
> 
> 标签：wcf, delphi, wcf-data-services, delphi-2010

我直接调用了由 iis 托管的 wcf 服务，我是 Delphi 2010

对服务调用的操作可能需要几分钟时间

在 Delphi 中避免超时错误的最佳方法是什么？

我故意在我的 WCF 服务中放置一个 Thread.Sleep 强制它等待 31 秒

30秒后我得到了错误

项目引发异常类 ESOAPHTTPException 并带有消息“请求操作的句柄处于错误状态 - URL：http://10.1.1.4/STC.WcfServices.Host/FlexProcurementService.svc - SOAPAction:http://navsl.stcenergy。 com/FlexProcurement/FlexProcurementService/GetPassthroughSummaryGridReportData'。

原来这是我已经应用补丁的 Delphi 2010 中的一个错误，所以现在我得到错误操作超时

```
function GetFlexProcurementService(const objServiceInfo: TWCFService; UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): FlexProcurementService;
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := objServiceInfo.WSDL
    else
      Addr := objServiceInfo.URL;
end;
if HTTPRIO = nil then
  RIO := THTTPRIO.Create(nil)
else
  RIO := HTTPRIO;
try
  Result := (RIO as FlexProcurementService);
  if UseWSDL then
  begin
    RIO.WSDLLocation := Addr;
    RIO.Service := objServiceInfo.Svc;
    RIO.Port := objServiceInfo.Prt;
  end else
    RIO.URL := Addr;
finally
  if (Result = nil) and (HTTPRIO = nil) then
    RIO.Free;
end; 
```

结尾;

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:27:37.327

```
uses wininet;
...

function SetTimeout(const HTTPReqResp: THTTPReqResp; Data: Pointer; NumSecs : integer) : boolean;
var
  TimeOut: Integer;
begin
  // Sets the receive timeout. i.e. how long to wait to 'receive' the response
  TimeOut := (NumSecs * 1000);
  try
    InternetSetOption(Data, INTERNET_OPTION_RECEIVE_TIMEOUT,  Pointer(@TimeOut),  SizeOf(TimeOut));
    InternetSetOption(Data, INTERNET_OPTION_SEND_TIMEOUT,  Pointer(@TimeOut),  SizeOf(TimeOut));
  except on E:Exception do
    raise Exception.Create(Format('Unhandled Exception:[%s] while setting timeout to [%d] - ',[E.ClassName, TimeOut, e.Message]));
  end;
end; 
```

在 RIO OnBeforePost 中：

```
procedure TEETOUpsertWrapper.OnBeforePost(const HTTPReqResp: THTTPReqResp; Data: Pointer);    begin
  SetTimeout(HTTPReqResp, Data, 5 * 60);
end; 
```

# c# - LINQ 在表创建中替换 foreach

> ID：12577306
> 
> 赞同：1
> 
> 时间：2012-09-25T06:27:30.847
> 
> 标签：c#, linq

我需要通过添加与通用列表中的对象对应的行来创建一个表（LINQ 以替换 TableRow 创建中的 foreach）。我们可以使用 foreach 循环按照下面列出的方式进行操作。我们如何在没有 foreach的情况下使用**LINQ实现此功能？**

注意：对象中的每个属性都需要添加一个表格单元格。

```
 System.Web.UI.WebControls.Table tableControl = new Table();

 foreach (FinancialTransaction transaction in transactionsList)
        {
            TableRow row = new TableRow();

            TableCell cellLineNumber = new TableCell();
            cellLineNumber.Text = Convert.ToString(transaction.Line);
            row.Cells.Add(cellLineNumber);

            TableCell cellEmpID = new TableCell();
            cellEmpID.Text = Convert.ToString(transaction.EmpID);
            row.Cells.Add(cellEmpID);

            TableCell cellSSN = new TableCell();
            cellSSN.Text = transaction.SSN;
            row.Cells.Add(cellSSN);

            tableControl.Rows.Add(row);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:43:02.013

您可以使用`ForEach`LINQ if `transactionsList`is `List`，但可以稍微提高可读性：

```
transactionsList.ForEach(transaction => {
     TableRow row = new TableRow();

     valueList = new object[] { 
                                  transaction.Line, 
                                  transaction.EmpID, 
                                  transaction.SSN 
                              };

     row.Cells.AddRange(valueList.Select(value => CreateCell(value))
                            .ToArray());

});

private TableCell CreateCell(object cellText)
{
    TableCell cell = new TableCell();
    cell.Text = Convert.ToString(cellText);

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:11:46.687

您还可以使用`Aggregate`：

```
var tableControl = transactionsList.Aggregate(new Table(), (acc, transaction) => 
{  
    TableRow row = new TableRow();

    TableCell cellLineNumber = new TableCell();
    cellLineNumber.Text = Convert.ToString(transaction.Line);
    row.Cells.Add(cellLineNumber);

    TableCell cellEmpID = new TableCell();
    cellEmpID.Text = Convert.ToString(transaction.EmpID);
    row.Cells.Add(cellEmpID);

    TableCell cellSSN = new TableCell();
    cellSSN.Text = transaction.SSN;
    row.Cells.Add(cellSSN);

    acc.Rows.Add(row);

    return acc;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:31:16.317

Linq 本身的 foreach 怎么样？或检查[此](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=nl&gs_nf=1&tok=t1yb1lT88GN-16_Rb5l_Rw&cp=17&gs_id=n&xhr=t&q=linq%20alternative%20foreach&pf=p&newwindow=1&safe=off&output=search&sclient=psy-ab&oq=linq%20alternative%20&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=6b517538c876e673&biw=1280&bih=939&ion=1)链接

也可以创建自己的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# android - 电子邮件应用程序中的帐户未列出

> ID：12577308
> 
> 赞同：2
> 
> 时间：2012-09-25T06:28:04.307
> 
> 标签：android, android-account

我的应用程序中有一个方法，它用帐户信息填充数组。问题是我无法获取存储在电子邮件应用程序 (POP3/IMAP) 中的帐户详细信息。有没有办法列出使用电子邮件应用程序创建的帐户。

这是我的代码：

```
 Account[] accounts = AccountManager.get(getApplicationContext()).getAccounts();
  for (Account account : accounts) {
        String EmailID = account.name;
        String Type =account.type;
        Acntlist.add(EmailID);
        Acntlist1.add(Type);
   } 
```

# algorithm - 是否可以将任何碱基转换为任何碱基（范围 2 到 46）

> ID：12577314
> 
> 赞同：3
> 
> 时间：2012-09-25T06:28:23.063
> 
> 标签：algorithm, math

我知道将任何基础转换为任何基础都很简单且可能。首先，将任何基数转换为十进制，然后将十进制转换为任何其他基数。但是，我之前在 2 到 36 范围内这样做过，但从未在 2 到 46 范围内这样做过。

我不明白我会在 36 之后放什么，因为 36 表示“z”（1-10 是十进制数字，然后是字母表的 26 个字符）。

请解释 36 岁之后会发生什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:04:06.010

您用于数字的符号是任意的。例如，base64 编码使用“A”表示零值数字，“0”表示值为 52 的数字。在 base64 中，数字经过字母 AZ，然后是小写字母 az，然后是传统数字 0-9 , 然后通常是 '+' 和 '/'。

一个 base 60 系统使用了这些符号：![巴巴罗尼亚数字](../Images/bbeac485326f577b6a4101213c31ea38.png)

所以使用的符号是任意的。36 岁之后没有什么“发生”，除了你所说的发生在你的系统上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:11:59.190

每个基地都有一个目的。通常我们会进行基础转换以使复杂的计算更简单。

以下是一些最常用的碱基及其代表。

*   **2-二进制数字系统**

    几乎所有计算机在内部使用，是基数二。两位数为`0`和`1`，分别由显示 OFF 和 ON 的开关表示。

*   **8八进制**

    偶尔用于计算。八位数字是`0–7`。

*   **10 进制**

    世界上最常用的数字系统，用于算术。它的十位数是`0–9`。

*   **12-十二进制（十进制）系统**

    由于可被 2、3、4 和 6 整除，因此经常使用它。它传统上用作以几十和毛表示的数量的一部分。

*   **16 进制**

    常用于计算。十六位数字`0–9`后跟`A–F`。

*   **60进制**

    起源于古苏美尔，传给巴比伦人。它仍然被用作我们现代圆坐标系（度、分和秒）和时间测量（分和小时）的基础。

*   **64-基地 64**

    也偶尔用于计算，用作数字`A–Z,` `a–z,` `0–9`，再加上两个字符，通常是`+`和`/`。

*   **256 字节**

    由计算机内部使用，实际上将八个二进制数字组合在一起。对于人类阅读，字节通常以十六进制显示。

八进制、十六进制和 base-64 系统经常用于计算，因为它们易于作为二进制的简写。例如，每个十六进制数字都有一个等效的 4 位二进制数。

基数通常是自然数。然而，其他位置系统也是可能的，例如黄金比例底（其基数是非整数代数数）和负底（其基数为负）。

* * *

您的疑问是我们是否可以在基数超过 36 后将任何基数转换为任何其他基数（# of Alphabets + # of digits = 26+ 10= 36）

以 64-Base 为例，它使用 A-Z(大写)(26)、a-z(小写)(26)、0-9(10)，再加上 2 个字符。这样就解决了 36 的约束。

由于我们在 64 进制中有 (26+26+10+2)64 个符号用于表示，因此我们可以在 64 进制中表示任何数字。同样，对于更多的基础，他们使用不同的符号来表示。

**来源**：[http ://en.wikipedia.org/wiki/Radix](http://en.wikipedia.org/wiki/Radix)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T08:07:46.430

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T07:03:54.700

要记住的重要一点是，所有数字都是价值的象征。因此，如果您想这样做，您可以制作一个包含每个位置的值的列表。在 base 36 之后，您只需用完可以构成逻辑序列的字符。例如，如果您使用包含 70 个奇数字符的柬埔寨字母表，则可以使用 80 进制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-04T06:53:55.273

Here is the complete code I have written, hope this will help.

```
import java.util.Scanner;

    /* 
    * author : roottraveller, nov 4th 2017
    */

public class BaseXtoBaseYConversion {

    BaseXtoBaseYConversion() {
    }

    public static String convertBaseXtoBaseY(String inputNumber, final int inputBase, final int outputBase) {
        int decimal = baseXToDecimal(inputNumber, inputBase);
        return decimalToBaseY(decimal, outputBase);
    }

    private static int baseXNumeric(char input) {
        if (input >= '0' && input <= '9') {
            return Integer.parseInt(input + "");
        } else if (input >= 'a' && input <= 'z') {
            return (input - 'a') + 10;
        } else if (input >= 'A' && input <= 'Z') {
            return (input - 'A') + 10;
        } else {
            return Integer.MIN_VALUE;
        }
    }

    public static int baseXToDecimal(String input, final int base) {
        if(input.length() <= 0) {
            return Integer.MIN_VALUE;
        }

        int decimalValue = 0;
        int placeValue = 0;

        for (int index = input.length() - 1; index >= 0; index--) {
            decimalValue += baseXNumeric(input.charAt(index)) * (Math.pow(base, placeValue));
            placeValue++;
        }

        return decimalValue;
    }

   private static char baseYCharacter(int input) {
        if (input >= 0 && input <= 9) {
            String str = String.valueOf(input);
            return str.charAt(0);
        } else {
            return  (char) ('a' + (input - 10));
            //return  ('A' + (input - 10));
        }
    }

    public static String decimalToBaseY(int input, int base) {
        String result = "";

        while (input > 0) {
            int remainder = input % base;
            input = input / base;
            result = baseYCharacter(remainder) + result;  // Important, Notice the reverse order here
        }

        return result;
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Enter : number baseX baseY");

        while(true) {
            String inputNumber = scanner.next();
            int inputBase      = scanner.nextInt();
            int outputBase     = scanner.nextInt();

            String outputNumber = convertBaseXtoBaseY(inputNumber, inputBase, outputBase);
            System.out.println("Result = " + outputNumber);
        }
    }
} 
```

# sql - SQL查询过滤特定记录计数的记录

> ID：12577319
> 
> 赞同：2
> 
> 时间：2012-09-25T06:28:49.017
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我有一个表，其中包含 Identity、RecordId、Type、Reading 和 IsDeleted 列。Identity 是自动递增的主键，RecordId 是可以有重复值的整数，Type 是可以是“一”或“平均”的读数类型，读数是包含任何整数值的整数，IsDeleted 是位可以是 0 或 1，即假或真。现在，我希望查询包含表的所有记录，如果每个 RecordId 的 COUNT(Id) 大于 2，则显示该 RecordId 的所有记录。

如果该特定 RecordId 的 COUNT(Id) == 2 和读取值，即“一个”或“平均”类型的记录相同，则仅显示平均记录。

如果 COUNT(Id) ==1 则仅显示该记录。

例如 ：

```
Id          RecordId          Type          Reading       IsDeleted 
1           1                 one             4              0
2           1                 one             5              0
3           1                 one             6              0
4           1                 average         5              0
5           2                 one             1              0
6           2                 one             3              0
7           2                 average         2              0
8           3                 one             2              0
9           3                 average         2              0
10          4                 one             5              0
11          4                 average         6              0
12          5                 one             7              0 
```

Ans结果可以是

```
Id          RecordId          Type          Reading       IsDeleted 
1           1                 one             4              0
2           1                 one             5              0
3           1                 one             6              0
4           1                 average         5              0
5           2                 one             1              0
6           2                 one             3              0
7           2                 average         2              0
9           3                 average         2              0
10          4                 one             5              0
11          4                 average         6              0
12          5                 one             7              0 
```

简而言之，我想跳过“一个”类型的读数，它的平均读数具有相同的值，并且“一个”类型读数的计数不超过一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:46:10.280

看看这个程序

```
DECLARE @t TABLE(ID INT IDENTITY,RecordId INT,[Type] VARCHAR(10),Reading INT,IsDeleted BIT)
INSERT INTO @t VALUES
(1,'one',4,0),(1,'one',5,0),(1,'one',6,0),(1,'average',5,0),(2,'one',1,0),(2,'one',3,0),
(2,'average',2,0),(3,'one',2,0),(3,'average',2,0),(4,'one',5,0),(4,'average',6,0),(5,'one',7,0),
(6,'average',6,0),(6,'average',6,0),(7,'one',6,0),(7,'one',6,0)
--SELECT * FROM @t

;WITH GetAllRecordsCount AS                              
(   
    SELECT *,Cnt = COUNT(RecordId) OVER(PARTITION BY RecordId ORDER BY RecordId)
    FROM @t
)
-- Condition 1 : When COUNT(RecordId) for each RecordId is greater than 2 
 --               then display all the records of that RecordId. 
, GetRecordsWithCountMoreThan2 AS
(
    SELECT * FROM GetAllRecordsCount WHERE Cnt > 2
)
-- Get all records where count = 2
, GetRecordsWithCountEquals2 AS
(
    SELECT * FROM GetAllRecordsCount WHERE Cnt = 2
)
-- Condition 3 : When COUNT(RecordId) == 1 then display only that record.
, GetRecordsWithCountEquals1 AS
(
    SELECT * FROM GetAllRecordsCount WHERE Cnt = 1
)

-- Condition 1: When COUNT(RecordId) > 2
SELECT * FROM GetRecordsWithCountMoreThan2  UNION ALL

-- Condition 2 : When  COUNT(RecordId) == 2 for that specific RecordId and Reading value of 
--               both i.e. 'one' or 'average' type of the records are same then display only 
--               average record. 
SELECT t1.* FROM GetRecordsWithCountEquals2 t1
JOIN (Select RecordId From GetRecordsWithCountEquals2 Where [Type] = ('one') )X
ON t1.RecordId = X.RecordId
AND t1.Type = 'average'     UNION ALL   

-- Condition 2: When COUNT(RecordId) = 1
SELECT * FROM GetRecordsWithCountEquals1 
```

**结果**

```
ID  RecordId    Type    Reading IsDeleted   Cnt
1   1            one    4             0     4
2   1            one    5             0     4
3   1            one    6             0     4
4   1            average5             0     4
5   2            one    1             0     3
6   2            one    3             0     3
7   2            average2             0     3
9   3            average2             0     2
11  4            average6             0     2
12  5            one    7             0     1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:03:20.863

假设您的表名为`the_table`，让我们这样做：

```
select main.*
from the_table as main
inner join (
  select recordId, count(Id) as num, count(distinct Reading) as reading_num
  from the_table
  group by recordId
) as counter on counter.recordId=main.recordId
where num=1 or num>2 or reading_num=2 or main.type='average'; 
```

未经测试，但它应该是它的一些变体。

**[在 Fiddle 上](http://sqlfiddle.com/#!3/cadae/17)**编辑测试****

 **简短的总结是我们想用 o=itself 的聚合版本加入表格，然后根据您提到的计数标准对其进行过滤（num=1，然后显示它；num=2，如果读取数字，则仅显示平均记录相同，否则显示两者；num>2，显示所有记录）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:02:40.853

```
;with a as
(
select Id,RecordId,Type,Reading,IsDeleted, count(*) over (partition by RecordId, Reading) cnt, 
row_number() over (partition by RecordId, Reading order by Type, RecordId) rn
from table
)
select Id,RecordId,Type,Reading,IsDeleted
from a where cnt <> 2 or rn = 1 
```**

# recent-documents - SHAddToRecentDocs 不会将我的文件添加到最近的文档中

> ID：12577320
> 
> 赞同：0
> 
> 时间：2012-09-25T06:28:50.517
> 
> 标签：recent-documents

双击资源管理器中的文件正确地将文件添加到我的应用程序的最近列表中，我可以从我固定在开始菜单上的应用程序的弹出菜单中再次打开它。

我在应用程序中有一个特殊的文件管理器，所以我使用 SHAddToRecentDocs 将应用程序中打开的项目添加到最近的文件中。但这只是没有发生，我找不到问题所在。

这是我在注册表中得到的：

```
HKEY_CLASSES_ROOT\.abc\Content Type = application/MyApp
HKEY_CLASSES_ROOT\.abc\(Standard) = MyAppProjectFile

HKEY_CLASSES_ROOT\MyAppProjectFile\shell\open\command\(Standard) = "C:\MyApp\MyApp.exe" %1

HKEY_CLASSES_ROOT\Applications\MyApp.exe\shell\open\command\(Standard) = "C:\MyApp\MyApp.exe" %1 
```

HKCR\Applications\MyApp.exe 下没有其他键。

就像我说的，我可以通过在资源管理器中双击它们来打开应用程序，它们会被添加到最近的文档中，一切看起来都很好。我可以从弹出窗口中打开它们。

我的 SHAddToRecentDocs 调用获得了正确的路径，似乎根本没有做任何事情。最近的文档文件夹中不显示任何链接。

这是我用来运行 SHAddToRecentDocs 的 C# 代码：

```
[DllImport("Shell32.dll", CharSet = CharSet.Unicode)]
static extern void SHAddToRecentDocs(ShellAddToRecentDocsFlags flags, string file);

[Flags]
public enum ShellAddToRecentDocsFlags
{
   Pidl = 0x001,
   Path = 0x002,
}

/// <summary> 
///   Adds the file to recent files list in windows.
/// </summary>
/// <param name="fullPath"> Name of the file. </param>
public static void AddFileToRecentFilesList(string fullPath)
{
   SHAddToRecentDocs(ShellAddToRecentDocsFlags.Path, fullPath);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:28:27.913

如果结果是对 FxCop 代码警告的修复是这不起作用的原因。

ShellAddToRecentDocsFlags API 定义如下：

```
[DllImport("Shell32.dll", CharSet = CharSet.Unicode)]
static extern void SHAddToRecentDocs(ShellAddToRecentDocsFlags flags, string file); 
```

将其更改为以下解决了该问题：

```
[DllImport("Shell32.dll", BestFitMapping = false, ThrowOnUnmappableChar = true)]
static extern void SHAddToRecentDocs(ShellAddToRecentDocsFlags flags, [MarshalAs(UnmanagedType.LPStr)]string file); 
```

# java - 在 Java 桌面应用程序中播放声音

> ID：12577324
> 
> 赞同：0
> 
> 时间：2012-09-25T06:29:01.543
> 
> 标签：java, audio

我们如何在 Java 桌面应用程序中播放声音（任何格式的音乐文件，如 .wma、.mp3 ）？（不是小程序）

我使用了以下代码（取自 Stack Overflow 上的另一个问题），但它引发了异常。

```
public class playsound {
    public static void main(String[] args) {
s s=new s();
s.start();
    }
}
class s extends Thread{
    public void run(){
        try{
            InputStream in = new FileInputStream("C:\\Users\\srgf\\Desktop\\s.wma");
         AudioStream as =    new AudioStream(in); //line 26
            AudioPlayer.player.start(as);
        }
        catch(Exception e){
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

程序运行时抛出以下异常：

```
java.io.IOException: could not create audio stream from input stream
    at sun.audio.AudioStream.<init>(AudioStream.java:82)
    at s.run(delplaysound.java:26) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:01:01.763

嗯。这可能看起来像是我的东西的广告，但你可以在这里使用我的 API：

[https://github.com/s4ke/HotSound](https://github.com/s4ke/HotSound)

用这个播放很容易。

替代方案：使用 Java Clips（预缓冲）

```
... code ...
// specify the sound to play
File soundFile = new File("pathToYouFile");
//this does the conversion stuff for you if you have the correct SPIs installed
AudioInputStream inputStream = 
getSupportedAudioInputStreamFromInputStream(new FileInputStream(soundFile));

// load the sound into memory (a Clip)
DataLine.Info info = new DataLine.Info(Clip.class, inputStream.getFormat());
Clip clip = (Clip) AudioSystem.getLine(info);
clip.open(sound);

// due to bug in Java Sound, explicitly exit the VM when
// the sound has stopped.
clip.addLineListener(new LineListener() {
  public void update(LineEvent event) {
    if (event.getType() == LineEvent.Type.STOP) {
      event.getLine().close();
      System.exit(0);
    }
  }
});

// play the sound clip
clip.start();
... code ... 
```

那么你需要这个方法：

```
public static AudioInputStream getSupportedAudioInputStreamFromInputStream(InputStream pInputStream) throws UnsupportedAudioFileException,
        IOException {
    AudioInputStream sourceAudioInputStream = AudioSystem
            .getAudioInputStream(pInputStream);
    AudioInputStream ret = sourceAudioInputStream;
    AudioFormat sourceAudioFormat = sourceAudioInputStream.getFormat();
    DataLine.Info supportInfo = new DataLine.Info(SourceDataLine.class,
            sourceAudioFormat,
            AudioSystem.NOT_SPECIFIED);
    boolean directSupport = AudioSystem.isLineSupported(supportInfo);
    if(!directSupport) {
        float sampleRate = sourceAudioFormat.getSampleRate();
        int channels = sourceAudioFormat.getChannels();
        AudioFormat newFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                sampleRate,
                16,
                channels,
                channels * 2,
                sampleRate,
                false);
        AudioInputStream convertedAudioInputStream = AudioSystem
                .getAudioInputStream(newFormat, sourceAudioInputStream);
        sourceAudioFormat = newFormat;
        ret = convertedAudioInputStream;
    }
    return ret;
} 
```

Clip 示例的来源（我的改动很小）：[http ://www.java2s.com/Code/Java/Development-Class/AnexampleofloadingandplayingasoundusingaClip.htm](http://www.java2s.com/Code/Java/Development-Class/AnexampleofloadingandplayingasoundusingaClip.htm)

通过将 .jars 添加到类路径来添加 SPI

对于 mp3，这些是：

*   [http://www.javazoom.net/mp3spi/mp3spi.html](http://www.javazoom.net/mp3spi/mp3spi.html)
*   [http://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)
*   [http://www.tritonus.org/plugins.html](http://www.tritonus.org/plugins.html) (tritonus_share.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:32:50.590

使用这个库： [http ://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)

```
public void play() {
        String song = "http://www.ntonyx.com/mp3files/Morning_Flower.mp3";
        Player mp3player = null;
        BufferedInputStream in = null;
        try {
          in = new BufferedInputStream(new URL(song).openStream());
          mp3player = new Player(in);
          mp3player.play();
        } catch (MalformedURLException ex) {
        } catch (IOException e) {
        } catch (JavaLayerException e) {
        } catch (NullPointerException ex) {
        }

} 
```

希望对有类似问题的每个人都有帮助:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T22:25:19.500

使用 JavaFX（与您的 JDK 捆绑在一起）非常简单。您将需要以下导入：

```
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.util.Duration;

import java.nio.file.Paths; 
```

* * *

脚步：

初始化 JavaFX：

```
new JFXPanel(); 
```

创建一个`Media`（声音）：

```
Media media = new Media(Paths.get(filename).toUri().toString()); 
```

创建一个`MediaPlayer`播放声音：

```
MediaPlayer player = new MediaPlayer(media); 
```

并播放`Media`：

```
player.play(); 
```

`MediaPlayer.setStartTime()`您也可以使用和设置开始/停止时间`MediaPlayer.setStopTime()`：

```
player.setStartTime(new Duration(Duration.ZERO)); // Start at the beginning of the sound file
player.setStopTime(1000); // Stop one second (1000 milliseconds) into the playback 
```

或者，您可以停止使用`MediaPlayer.stop()`.

播放音频的示例函数：

```
public static void playAudio(String name, double startMillis, double stopMillis) {
    Media media = new Media(Paths.get(name).toUri().toString());
    MediaPlayer player = new MediaPlayer(media);

    player.setStartTime(new Duration(startMillis));
    player.setStopTime(new Duration(stopMillis));
    player.play();
} 
```

更多信息可以在 JavaFX [javadoc](https://docs.oracle.com/javase/8/javafx/api/index.html)中找到。

# python - python中的国际象棋引擎速度

> ID：12577327
> 
> 赞同：3
> 
> 时间：2012-09-25T06:29:08.983
> 
> 标签：python, algorithm, artificial-intelligence, chess

你好！

我用python编写了一个国际象棋引擎。对于搜索，我使用带有 alpha beta 修剪的 minimax 算法。我的评估功能非常基础，它只是根据棋盘上的棋子值给棋盘打分。对于板表示，我使用邮箱方法，特别是 0x88 板表示。

问题是，我的搜索速度非常慢。我还没有实现任何类型的移动排序算法，但是仍然需要两分钟以上（有时甚至是两倍）来搜索 4 层。每个位置的平均移动次数约为 23，搜索 4 ply 在起始位置，它只查看大约 20 000 个节点。

2-4 分钟内 20 000 个节点对我来说似乎很慢。我的问题是，对于国际象棋引擎来说，python 是不是太慢了，或者我的实现可能有问题？

# textmate - Textmate 2 使用 Python 缩进

> ID：12577330
> 
> 赞同：2
> 
> 时间：2012-09-25T06:29:16.257
> 
> 标签：textmate, textmate2

当我通过 tab 键缩进时，tab 被 4 个空格替换。有谁知道我怎样才能将其设置为正常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T23:47:53.513

在编辑器窗口的底部有一个选项卡大小菜单，您可以在那里设置所需的宽度以及打开插入空格而不是选项卡但在编辑时将它们视为选项卡的软选项卡。您的选择将根据活动文件类型保存，因此请确保在 python 文件中进行设置。

# internationalization - 你如何命名 i18n 文本？

> ID：12577334
> 
> 赞同：3
> 
> 时间：2012-09-25T06:29:59.863
> 
> 标签：internationalization

当我与我的大学一起处理网络应用程序时。i18n 文本的名称非常随意。就像每个人都有自己的命名规则一样。

举个例子，我们有一个文本“ **Create a new item** ”，它用于链接。

*   A 将资源文件中的键命名为：**CreateANewItem**，它将所有单词放在一起。
*   B 更喜欢这样命名它：**CreateLinkText**，它描述了它在应用程序中的用法。
*   但是，C 想要使用：**CreateItemText**，它总结了它的字面意思。

当某些文本较长或包含动态内容的格式时。命名差异很大，很难达成一致。

所以我想知道 i18n 文本在不同情况下是否有一个好的命名规则或约定：短、长、有格式、易受更改等。或者你如何在你的项目中做到这一点？使用这种约定，可以轻松维护并且代码更具可读性。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:56:34.463

到目前为止，这不是我在编码约定中看到的。我想在编码标准方面它比其他问题要重要得多。也就是说，我不知道您使用的是什么平台，但如果是 .NET，这里有一个关于资源标识符命名约定的非常短的页面：http: [//msdn.microsoft.com/en-us/library/vstudio /ms229037%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms229037%28v=vs.100%29.aspx)

# websphere - 在 wsadmin 脚本（WebSphere Application Server 7+）中使用 jython 与 jacl 的优势

> ID：12577341
> 
> 赞同：7
> 
> 时间：2012-09-25T06:30:14.483
> 
> 标签：websphere, jython, wsadmin, jacl

面对**wsadmin 脚本客户端**的编程，我看到您可以同时使用**jacl**和**jython**。

我对两种语言都有同样的信心。

我想知道，在特定的 wsadmin 编程中，使用一种语言是否比另一种语言有优势；例如鲁棒性、Websphere 管理的示例或库的可用性，或者您在使用和构建此类脚本的经验中产生的类似内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T08:26:56.913

Jython 是首选语言：

*   Rational Application Developer 具有对 Jyton 的工具支持（Jython 编辑器、调试器、命令完成，以及针对 IDE 中的测试服务器测试脚本的能力）。
*   WebSphere 管理控制台提供控制台命令帮助；如果您想自动化它们，它会为您提供使用管理控制台执行的操作的脚本等效项。此帮助使用 Jython 作为语言。
*   即使 Jacl 曾经是 wsadmin 的默认语言，IBM 还是会在未来推广 Jython，甚至提供了[将 Jacl 脚本转换为 Jython 的工具](http://www-01.ibm.com/support/docview.wss?uid=swg24012144)。在给定链接中引用此工具的描述；

> 在选择脚本语言时，Jython 是 WebSphere Application Server 的管理脚本语言的战略方向，因为脚本语言的未来增强主要集中在 Jython 的使用上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T08:32:40.033

我不是要质疑之前的任何回答，只是添加一些事实。

尽管 Jython 是“战略”方向，但 Jacl 自 WAS v4 以来就一直存在。在 WAS v8.5 中，它仍然是默认设置（并且已弃用！）。

编写管理 API 时考虑了 Jacl。使用 Jython 之一，您必须执行以下技巧才能将服务器列表作为列表：

```
for srv in AdminConfig.list('Server').splitlines():
    print srv 
```

而在 Jacl 中，可以简单地做到这一点：

```
foreach srv [$AdminConfig list Server] {
    puts $srv
} 
```

显然，许多 AdminConfig 和 AdminControl 方法将列表作为换行符分隔的字符串返回。

IBM has really cornered itself with Jython and Jacl. They're still using Jython 2.1 (released in 2002, even in the latest and greatest WAS v8.5). Jacl isn't actively supported by the community. The API is Jacl-friendly, wasn't rewritten for Jython. Lots of client solutions are based on the tricks you have to do in Jython, there's plenty of Jacl-based solutions. Even IBM internally has a plenty of dependencies on that legacy. This might be the reason why Jacl is deprecated since WAS v5.1 and still default.

In short:

*   If you're going to write a small script for a specific task, Jacl may be more convenient for you (since you've mentioned that you're comfortable with both Python and Tcl)
*   但是，如果您有兴趣开发更大的框架来管理您的 WAS 基础架构，那么具有面向对象的 Jython 可能是一个更好的选择。但是不要对那个版本的 Jython 抱有太大的期望——它有很多错误，而且你不能使用太多的 Python 库，因为它们很久以前就放弃了 Python2.1 支持。

结论是：这不是那么简单的答案（这意味着你问了一个好问题）。

# apache - Apache Web 服务器不会因分段错误而产生核心转储

> ID：12577355
> 
> 赞同：1
> 
> 时间：2012-09-25T06:31:28.830
> 
> 标签：apache, coredump

我在 httpd.conf 中添加了 CoreDumpDirectory /tmp

```
mkdir /tmp
chown apache:apache /tmp
chmod 0777 /tmp

ulimit -c unlimited
service httpd restart 
```

但是`core.*`发生段错误时没有生成转储文件，有什么建议吗？

我的系统是CentOS6.2 x64（虚拟机）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:39:59.490

检查您的`/etc/security/limits.conf`文件并查看此行是否设置为 0：

```
* hard core 0 
```

从本质上讲，任何第三个词是的东西，`core`看看第一个词是否是`*`或`apache`相关的。您可以通过在行首添加 a 来注释掉该`#`行。然后运行：

```
sysctl -p 
```

# jquery-mobile - jquery mobile中的单页模板和多页模板及其处理速度？

> ID：12577357
> 
> 赞同：0
> 
> 时间：2012-09-25T06:31:44.163
> 
> 标签：jquery-mobile, processing

我对基于 html5 的移动应用程序感到担忧。

在 jquery mobile 中，我看到了一些在 chrome 上作为网页运行良好的多页模板，但如果我认为移动应用单页模板运行良好，但一个 html 文件中有这么多行代码很难理解。

是否有任何工具可以将多个 HTML 文件绑定到一个文件中，这有助于快速处理？

还有哪些是我可以遵循的最佳实践来处理这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:11:01.017

嗨，我正在尝试理解您的问题，我认为您可能应该使用[http://www.codiqa.com/之类的东西](http://www.codiqa.com/)

在那里，您可以使用 GUI 构建 jQuery Mobile 应用程序。他们有 15 天的免费试用期（以前是 30 天），因此您可以在决定之前先查看一下。

# c++ - 我必须在类体之外定义纯虚拟析构函数吗？

> ID：12577364
> 
> 赞同：3
> 
> 时间：2012-09-25T06:32:48.447
> 
> 标签：c++, inline, destructor, pure-virtual

我试过的两个编译器都接受了这种语法，但我在某处读到纯虚拟析构函数定义应该总是在类之外。我的代码编译：

```
class AbstractBase
{
public:
    virtual ~AbstractBase() = 0
    {}

    virtual void foo()
    {
        ...
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T06:53:04.940

根据标准，您不能在类体内定义纯虚函数。
不过，一些编译器确实支持此功能作为扩展。请注意，使用此扩展将使您的代码在不同的编译器中不可移植。

**参考：**

**C++03 10.4 第 2 段：**

> [注意：函数声明不能​​同时提供纯说明符和定义——尾注] [示例：
> 
> ```
> struct C 
> { 
>     virtual void f() = 0 { }; // ill-formed 
> }; 
> ```
> 
> ——结束示例]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:36:49.847

该语法不允许同时使用两者`= 0`，`{ }`因此您应该单独定义析构函数，就像在 .cpp 文件中一样。

一些编译器可能允许您的版本作为扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:42:11.247

Microsoft Visual Studio 接受这种语法，坦率地说，gcc*编译器*似乎也不会对此感到不满。但是，您应该担心的不是编译器，而是链接器。在类定义中（在头文件中）定义纯虚拟析构函数会导致同一符号的多个定义。我不是 100% 确定 MSVC 编译器如何处理这种情况，但 gcc 可能会抱怨。此外，即使使用 MSVC，当项目增长并拆分为多个静态/动态库时，您也可能会遇到麻烦。

# c# - 密码解密错误

> ID：12577367
> 
> 赞同：0
> 
> 时间：2012-09-25T06:33:04.193
> 
> 标签：c#, .net, encryption

我必须以加密格式将密码字段存储在 SQL Server 数据库中，并且必须在用户登录系统时对其进行解密。加密部分工作正常。但是我在解密部分收到错误消息，即“Base-64 char array 的长度无效”

```
byte[] todecode_byte = Convert.FromBase64String(encryptpwd); 
```

解密模块。

```
private string Encryptdata(string password)
{
        string encryptpwd = string.Empty;
        byte[] encode = new byte[password.Length];
        encode = Encoding.UTF8.GetBytes(password);
        encryptpwd = Convert.ToBase64String(encode);
        return encryptpwd;
}

private string Decryptdata(string encryptpwd)
{
        string decryptpwd = string.Empty;
        UTF8Encoding encodepwd = new UTF8Encoding();
        Decoder Decode = encodepwd.GetDecoder();
        byte[] todecode_byte = Convert.FromBase64String(encryptpwd); //here I am getting error as "Invalid length for a Base-64 char array"
        int charCount = Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
        char[] decoded_char = new char[charCount];
        Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
        decryptpwd = new String(decoded_char);
        return decryptpwd;
} 
```

输入数据：`prabu`
加密数据：`cHJhYnU=`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:41:23.600

你有一个错误，因为你的代码是这样的：

```
 string password = "prabu";
    string encryptdata = Encryptdata(password);
    string decryptdata = Decryptdata(password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:30:40.677

我们没有保存加密的用户密码并对其进行解密以执行身份验证，而是将密码保存为加盐哈希，其中每次存储新密码时都会自动生成盐（盐和哈希存储在数据库中） .

为了验证登录尝试，我们为登录期间提供的密码生成一个哈希，但使用我们在最初设置密码时存储的盐。然后要验证登录，只需比较两个哈希值。

例如，如果您选择 SHA1 哈希函数：

```
using System;
using System.Security.Cryptography;

public interface ISaltedHash
{
    /// <summary>
    /// Gets the hash.
    /// </summary>
    string Hash
    {
        get;
    }

    /// <summary>
    /// Gets the salt.
    /// </summary>
    string Salt
    {
        get;
    }
}

public class SaltedHashProvider
{
    #region Fields

    private int m_saltLength = 6;

    #endregion // Fields

    #region Public Methods

    /// <summary>
    /// Encrypts data with the a salted SHA1 algorith. 
    /// The salt will be automatically generated.
    /// </summary>
    /// <param name="value">Value to be encrypted.</param>
    /// <returns>The encrypted data.</returns>
    public ISaltedHash EncryptWithSalt( string value )
    {
        string salt = CreateSalt();

        string hash = Encrypt( salt + value );

        return new SaltedHash
        {
            Hash = hash,
            Salt = salt
        };
    }

    /// <summary>
    /// Encrypts data with the a salted SHA1 algorith. 
    /// </summary>
    /// <param name="value">Value to be encrypted.</param>
    /// <param name="salt">Salt to be used when encypting the value.</param>
    /// <returns>The encrypted data.</returns>
    public ISaltedHash EncryptWithSalt( string value, string salt )
    {
        string hash = Encrypt( salt + value );

        return new SaltedHash
        {
            Hash = hash,
            Salt = salt
        };
    }

    #endregion // Public Methods

    #region Helper Methods

    /// <summary>
    /// Creates salt.
    /// </summary>
    /// <returns>A base64 salt string.</returns>
    private string CreateSalt()
    {
        byte[] saltBlob = CreateRandomBytes(m_saltLength);

        return Convert.ToBase64String(saltBlob);
    }

    /// <summary>
    /// Encrypts data with the SHA1 algorithm.
    /// </summary>
    /// <param name="value">Value to be encrypted.</param>
    /// <returns>The encrypted data.</returns>
    private string Encrypt( string value )
    {
        byte[] blob = ToByteArray( value );

        byte[] hash = ComputeHash( blob );

        return Convert.ToBase64String( hash );
    }

    /// <summary>
    /// Computes the hash value for the specified byte array.
    /// </summary>
    /// <param name="blob">The input to commute the hash for.</param>
    /// <returns>The computed hash code.</returns>
    private byte[] ComputeHash( byte[] blob )
    {
        return new SHA1CryptoServiceProvider().ComputeHash( blob );
    }

    /// <summary>
    /// Gets a UTF8 byte array encoding for the specified character array.
    /// </summary>
    /// <param name="value">The input containing characters to be encoded.</param>
    /// <returns>The UTF8 encoded array.</returns>
    private byte[] ToByteArray( string value )
    {
        return System.Text.Encoding.UTF8.GetBytes( value );
    }

    /// <summary>
    /// Creates a random byte array.
    /// </summary>
    /// <param name="length">Length of array to be generated.</param>
    /// <returns>A random byte array.</returns>
    private static byte[] CreateRandomBytes( int length )
    {
        byte[] blob = new byte[length];

        new RNGCryptoServiceProvider().GetBytes( blob );

        return blob;
    }

    #endregion // Helper Methods
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T08:38:08.850

```
private string Decrypt(string cipherText)
        {
            string EncryptionKey = "MAKV2SPBNI99212";
            byte[] cipherBytes = Convert.FromBase64String(cipherText);
            using (Aes encryptor = Aes.Create())
            {
                Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(EncryptionKey, new byte[] { 0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76 });
                encryptor.Key = pdb.GetBytes(32);
                encryptor.IV = pdb.GetBytes(16);
                using (MemoryStream ms = new MemoryStream())
                {
                    using (CryptoStream cs = new CryptoStream(ms, encryptor.CreateDecryptor(), CryptoStreamMode.Write))
                    {
                        cs.Write(cipherBytes, 0, cipherBytes.Length);
                        cs.Close();
                    }
                    cipherText = Encoding.Unicode.GetString(ms.ToArray());
                }
            }
            return cipherText;
        } 
```

# iphone - 我们可以使用 Arcgis 使用 Well API Number 绘制要素图层吗？

> ID：12577370
> 
> 赞同：0
> 
> 时间：2012-09-25T06:33:12.297
> 
> 标签：iphone, ios, ipad, arcgis, arcgis-server

我有一个 JSON 响应，其中包含井详细信息（井 API 编号、井名称和操作员详细信息）。我想知道这个 json 响应是否足以绘制要素层，或者我们是否需要纬度和经度来绘制要素中的要素层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:57:06.873

好吧，如果您添加一些代码以供参考，这将有所帮助。
如果您正在使用 ArcGIS Server 和 ESRI JavaScript API，并且您已经完成了某种查询操作，则可以请求将几何图形连同您的井详细信息一起返回。

这是一个完整的示例，描述了如何做到这一点：[ESRI JavaScript API QueryTask Example](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples/query_click.html)

那里的关键代码行是：

```
 var query = new esri.tasks.Query();
    query.returnGeometry = true; 
```

.returnGeometry 属性意味着您的 JSON 响应将包含坐标，然后在 QueryTask 完成后显示该坐标。

```
 dojo.connect(queryTask, "onComplete", function(featureSet) {
      map.graphics.clear();

      var symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([255,255,255,0.35]), 1),new dojo.Color([125,125,125,0.35]));

      //QueryTask returns a featureSet.  Loop through features in the featureSet and add them to the map.
       dojo.forEach(featureSet.features,function(feature){
        var graphic = feature;
        graphic.setSymbol(symbol);
        graphic.setInfoTemplate(infoTemplate);

        map.graphics.add(graphic);

      });

    }); 
```

# iphone - IOS静态库错误“无法识别的选择器发送到实例”

> ID：12577371
> 
> 赞同：0
> 
> 时间：2012-09-25T06:33:14.617
> 
> 标签：iphone, objective-c, ios, static-libraries

我已经创建了编译成功的静态库，我已经在我想要使用它的应用程序中添加了 .a 文件。但得到错误`"unrecognised selector sent to an instance"`。但是，如果我在应用程序中包含静态库源，我不会收到任何错误。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:34:35.987

也许选择器是在一个类别中实现的，而您缺少`-ObjC`链接器标志？请参阅 Apple[技术 QA1490](http://developer.apple.com/library/mac/#qa/qa1490/)。

# jquery - 使用 JQuery 日期选择器选择星期日

> ID：12577376
> 
> 赞同：1
> 
> 时间：2012-09-25T06:33:53.957
> 
> 标签：jquery, datepicker

我需要帮助来为我的网页创建日期选择器。我正在使用 JSP（Jquery 模板）。我如何实现日期选择器，它只选择星期天。选择星期天后，我需要添加 7 天，显示我需要在下一个文本框中显示第 7 个日期。这可以创建吗？

我当前的脚本代码：

```
<script>
  function onSelDate()
  {
    var day1 = $("#DOB").datepicker('getDate').getDate();                 
    var month1 = $("#DOB").datepicker('getDate').getMonth();             
    var year1 = $("#DOB").datepicker('getDate').getFullYear();
    var fullDate = year1 + "-" + month1 + "-" + day1;                         
    var myDate=new Date();     
    myDate.setFullYear(year1,month1,day1);       
   }
   $(function() {
     $( "#DOB" ).datepicker();
   });
</script> 
```

在输入框中：

```
<input type="text" name="bdate" onChange="onSelDate()" value=""id="DOB" style="width:70px; margin-bottom:5px; margin-top:5px;" size="20">
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js">/script>
<script type="text/javascript">
  $(document).ready(function(){
    $("#DOB").datepicker({ showOn: 'button', buttonText: "select" });
  });
</script> 
```

感谢和问候大师 Bhat

![现在我可以选择任何日期，我只需要选择星期天][1]

[http://i.stack.imgur.com/eORQ8.jpg](http://i.stack.imgur.com/eORQ8.jpg)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T06:52:44.347

像这样试试

```
$("#datepickerID").datepicker({
     dateFormat: 'dd-mm-yy',
     minDate: 1,
     beforeShowDay: enableSUNDAYS
}); 
```

# routing - 在angularjs中为多个部分视图创建一个html视图

> ID：12577378
> 
> 赞同：23
> 
> 时间：2012-09-25T06:33:58.217
> 
> 标签：routing, routes, angularjs

我希望创建一个带有多个标签的 html 文件。这些应该作为通常保存在 partials 文件夹中的单独的视图。然后我希望在路由控制器中指定它们。现在我正在做如下：app.js

```
 angular.module('productapp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/productapp', {templateUrl: 'partials/productList.html', controller: productsCtrl}).
        when('/productapp/:productId', {templateUrl: 'partials/edit.html', controller: editCtrl}).
        otherwise({redirectTo: '/productapp'});
        }], 
        ['$locationProvider', function($locationProvider) {
            $locationProvider.html5Mode = true;
}]); 
```

索引.html

```
 <!DOCTYPE html>
<html ng-app = "productapp">
<head>
<title>Search form with AngualrJS</title>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="js/products.js"></script>
        <script src="js/app.js"></script>
</head>
<body>
    <div ng-view></div>
</body>
</html> 
```

在 partials 文件夹中：我有 2 个名为 edit.html 和 productlist.html 的 html 视图

而不是创建这两个文件，我希望将它们单独组合成一个并通过路由调用它们（div）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-25T14:10:17.550

您可以使用 ng-switch 根据路由参数有条件地使用包含呈现您的 productList。

在你的配置中试试这个：

```
 angular.module('productapp', [])
      .config(['$routeProvider', function($routeProvider) {
      $routeProvider
        .when('/productapp', {templateUrl: 'partials/productList.html', controller: productsCtrl})
        .when('/productapp/:productId', {templateUrl: 'partials/productList.html', controller: productsCtrl})
        .otherwise({redirectTo: '/productapp'}); 
```

在你的控制器中：

```
 function productsCtrl($scope, $routeParams) {
      $scope.productId = $routeParams.productId;
    } 
```

在你的 html 中：

```
 <...productListHtml...>
    <div ng-switch="productId != null">
      <div ng-switch-when="true" ng-include="'partials/product.html'">
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:57:47.280

我在 Angular 中遇到嵌套视图和深度链接问题，因为 $routerProvide 不支持多个 ng-view。但我找到了一个可能的解决方案，如何在[此处](http://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm)实现这一点。它基于使用请求上下文和渲染上下文手动处理路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-10T11:56:23.450

I Had the same problem, now there is a solution for it using: [UI-Router](https://github.com/angular-ui/ui-router#get-started)

The advantage of using this and not the ngRoute is that you can have multiple views in the same page using "ui-view" naming convention.

# drupal - 在 Google Analytics 中包含 drupal 搜索参数？

> ID：12577381
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:34:24.083
> 
> 标签：drupal, google-analytics

Drupal 6 的 htaccess 说：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

所以，如果你搜索，你可以像这样输入路径：

```
mysite.com/search/SEARCH_STRING 
```

我希望 Google Analytics 能够跟踪此用户搜索“SEARCH_STRING”。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:57:11.490

[Google Analytics](https://drupal.org/project/google_analytics)支持搜索查询跟踪。

如果您将 GA 代码包含在模板文件中并且无法返回 GA 模块，则可以提取搜索查询并将其附加到 JavaScript 中的跟踪 URL，如下所示：

```
var search_matches = window.location.pathname.match(/\/search\/(.*?)\/(.*)/);
if (search_matches) {
  _gaq.push(['_trackPageview', window.location.pathname + [window.location.search, (window.location.search ? '&' : '?'), 'search=', search_matches[2] , '&search_type=', search_matches[1]].join('')]);
}
else {
  _gaq.push(['_trackPageview']);
} 
```

# php - 在 Mysql PHP 代码中存储多维数组

> ID：12577384
> 
> 赞同：0
> 
> 时间：2012-09-25T06:34:40.263
> 
> 标签：php, mysql

大家好只是想问我如何在mysql中存储多维数组？我的表格格式是这样的：

销售表

```
| sales id |  fkmember | date_of_sales 
```

销售线表

```
|  line id | fkproduct | fksales | qty_purchased 
```

我的数组是这样的：

```
foreach($products as $element => $inner_array){
    echo "<strong>Product ID: ".$element."</strong><br>";
    foreach($inner_array as $items){
        echo $items."<br>";
    }
} 
```

我怎样才能把数据放在我的表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:46:56.063

您可以尝试对数组进行序列化，这与 Wordpress 所做的非常相似，以存储配置值

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-25T06:42:39.327

使用[implode()](http://php.net/manual/en/function.implode.php)函数将列值数组转换为字符串。

```
foreach($inner_array as $items) {
    $sql = "INSERT INTO Sales (salesid, fkmember, date_of_sales, lineid, fkproduct, fksales, qty_purchased ) VALUES ('" . implode("', '", $items) . "')";
    $result = mysql_query($sql) or die(mysql_error());
} 
```

# java - 等待 AWT 重绘完成

> ID：12577386
> 
> 赞同：3
> 
> 时间：2012-09-25T06:34:44.660
> 
> 标签：java, awt, frame

我有一个`Frame`全是一种颜色，但角落里有一些文字。我设置颜色，实际从显示器读取颜色，然后根据这些测量值进行一些计算。

问题是，调用`repaint()`会导致在我进行测量**后**`Frame`绘制。我假设这是由于委托给 EDT，但由于在实际绘画工作之前/期间发生的测量，我得到了不正确的结果。**`repaint()`**

 **我最初的想法是让一个侦听器完成绘制，但我重新绘制以更新文本的频率比我为颜色所做的要频繁得多，而且我不想听这些事件。在进行测量之前，我如何才能等待实际的绘画任务完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:49:57.110

惊人的你能找到...

```
EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {

        Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
            @Override
            public void eventDispatched(AWTEvent event) {

                PaintEvent pe = (PaintEvent) event;

                String type = "";
                if (pe.getID() == PaintEvent.PAINT) {
                    type = "PAINT";
                } else if (pe.getID() == PaintEvent.PAINT_FIRST) {
                    type = "PAINT_FIRST";
                } else if (pe.getID() == PaintEvent.PAINT_LAST) {
                    type = "PAINT_LAST";
                } else if (pe.getID() == PaintEvent.UPDATE) {
                    type = "UPDATE";
                }

                System.out.println(type + "; pe.UpdateRec = " + pe.getUpdateRect() + "; pe.component = " + pe.getComponent());

            }
        }, AWTEvent.PAINT_EVENT_MASK);

        JFrame frame = new JFrame("Testing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }
}); 
```

现在，因为重绘请求可以快速思考，所以我很想在最后一个请求完成后不久触发一个小的“延迟”......

```
private Timer updateTimer;

// ...

EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {

        updateTimer = new Timer(250, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // Update compulations here...
            }
        });
        updateTimer.setRepeats(false);
        updateTimer.setCoalesce(true);

        Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {

            @Override
            public void eventDispatched(AWTEvent event) {
                updateTimer.restart();
            }
        }, AWTEvent.PAINT_EVENT_MASK);
    }
} 
```

这个想法是在最后一次重绘请求和开始编译之间至少允许 250 毫秒。你可能想玩弄一下这些值，看看什么适合你......

**更新**

你也可以试试[`JComponent.paintImmediately`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)

> 立即绘制此组件中的指定区域及其与该区域重叠的所有后代。
> 
> 很少需要调用此方法。在大多数情况下，调用 repaint 会更有效，这会延迟实际的绘制，并且可以将多余的请求合并到单个绘制调用中。如果在调度当前事件时需要更新显示，则此方法很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T17:25:21.687

我知道这是一个旧线程，但如果有人正在寻找答案，[SwingUtilities](https://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)有一个名为[invokeAndWait(Runnable)](https://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait(java.lang.Runnable))的方法，它在 AWT 调度线程上与当前线程同步运行任务。请注意，如果您需要在事件调度线程内完成，则无法完成此操作。**

# java - 如何初始化变量？

> ID：12577387
> 
> 赞同：3
> 
> 时间：2012-09-25T06:34:44.793
> 
> 标签：java

所以我有一个程序可以打印出你从用户给定的日期到一年中的天数，其中包括闰年。但是，当我编译程序时，它说变量 dayNumber 未初始化。我该如何解决？

```
import java.util.Scanner;

public class Days
{
public static void main( String [] args )
{
    Scanner scan = new Scanner(System.in);
    int month, day, year;
    int dayNumber;

    System.out.print("Enter the month: ");
    month = scan.nextInt();
    System.out.print("Enter the day: ");
    day = scan.nextInt();
    System.out.print("Enter the year: ");
    year = scan.nextInt();

    if ( month == 1 )

        dayNumber = day;

    else if ( month == 2 )

        dayNumber = 31 + day;   

    else if ( month == 3 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + day;

        else

            dayNumber = 31 + 28 + day;

    else if ( month == 4 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + day;

        else

            dayNumber = 31 + 28 + 31 + day;

    else if ( month == 5 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + day;

    else if ( month == 6 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + day;

    else if ( month == 7 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + day;

    else if ( month == 8 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + 31 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + 31 + day;

    else if ( month == 9 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + 31 + + 31 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + 31 + 31 + day;

    else if ( month == 10 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + 31 + + 31 + 30 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;

    else if ( month == 11 )

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + 31 + + 31 + 30 + 31 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;

    else 

        if ( year % 400 == 0 )

            if ( year % 4 == 0 && year % 100 != 0 )

                dayNumber = 31 + 29 + 31 + 30 + 31 + 30 + 31 + + 31 + 30 + 31 + 30 + day;

        else

            dayNumber = 31 + 28 + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;

    System.out.println("The date " + month + "/" + day + "/" + year + " is day number " + dayNumber);

}
} 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T06:38:58.747

如果“运行程序”是指编译，则需要在所有 if 语句之前将 dayNumber 设置为某个值。您不应该认为您的标签表明您不完全理解 if/else 语句。例如：

```
 if ( year % 400 == 0 )
        if ( year % 4 == 0 && year % 100 != 0 )
            dayNumber = 31 + 29 + day;
    else
        dayNumber = 31 + 28 + day; 
```

else 连接到最后一个 if（在这种情况下 year % 4 == 0 && year % 100 != 0）。如果这不是您想要的，那么您将需要：

```
 if ( year % 400 == 0 )
    {
        if ( year % 4 == 0 && year % 100 != 0 )
            dayNumber = 31 + 29 + day;
    }
    else
        dayNumber = 31 + 28 + day; 
```

应该注意的是，不会将 dayNumber 设置为任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:38:21.950

那是因为编译器检测到您可能有一个未初始化变量的路径。

**不要这样做`int dayNumber=0`：这只会隐藏真正的错误**

解决方案**不是**初始化 int`int dayNumber=0`而是检查您的代码。

为了能够做到这一点，请使您的代码可读。我建议你使用`switch`而不是那些`if`：

```
switch (month) {
case 1:
    ...
    break;
case 2:
... 
```

并考虑一下您的这部分代码：

```
else if ( month == 3 )
    if ( year % 400 == 0 )
        if ( year % 4 == 0 && year % 100 != 0 ) 
```

如果前两个测试为真但第三个不为真，那么 dayNumber 会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:36:35.960

就像`int dayNumber=0;`，您还需要初始化其他变量（`month, day, year`）。不完全为 0，您可以将其初始化为其他默认值（请参阅@dystroy 的答案）。

在java中，如果变量是本地的，那么你必须初始化它们，否则你会得到编译器错误。

而类字段被初始化为其默认值。有关更多信息，请参见[此处的变量](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)`Primitive Data Types`，也可以在给定链接上查看下一章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:37:47.603

```
int month, day, year;
int dayNumber;

dayNumber = month = day = year = 0; 
```

这对我来说有点矫枉过正，但至少它涵盖了所有基础......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T06:38:11.823

写吧：

```
int dayNumber = 0; 
```

Java 中的所有局部变量都必须在首次使用之前进行初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T06:42:14.470

你可以这样做`int dayNumber=0;`
你可能想知道为什么它不存在`month`,`day`和`year`。这是因为编译器发现，对于这些属性，您在使用它们之前为其分配了值。但是，如果您在条件循环中为其设置值，并且在访问打印`dayNumber`之前可能无法执行它。`dayNumber`

# php - php 中是否有类似于 bash set ±x 指令？

> ID：12577391
> 
> 赞同：2
> 
> 时间：2012-09-25T06:35:04.713
> 
> 标签：php, bash

`set -x`使输出更加清晰，即您可以看到“幕后”、值替换以及实际完成的操作。`set +x`恢复默认行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:52:46.640

[您可以使用xdebug 扩展](http://xdebug.org/docs/execution_trace)来跟踪 php 的执行情况，它也可以进行变量扩展和各种其他数据收集。

# protobuf-net - 如何为我的 protobuf-net 类获取基类

> ID：12577392
> 
> 赞同：4
> 
> 时间：2012-09-25T06:35:04.037
> 
> 标签：protobuf-net

我已经阅读了有关继承的各种帖子，并且协议缓冲区不支持继承。我不想继承 Protocol Buffers 消息，而是继承，这样我就可以轻松处理我的所有 Protocol Buffers 消息。

我正在使用 protobuf-net 2.0.0.480 和 .proto 文件来定义我的协议。一切都很好，除非我想要一个共同的祖先，这样我就可以做一些共同的功能并便于检查。一个简单的例子：

我的 .proto 文件：

```
message ProtocolInformation {
  enum MessageKinds {
    LAYOUT_ADVANCE = 1;
    LAYOUT_RENDER = 2;                             
  }
  required MessageKinds MessageKind = 1;  
  required int32 UniqueID = 2;            
} 

message GFX_Layout_Advance {
  required ProtocolInformation ProtocolInfo = 1;
  required int32 LayoutHandle = 2;
}

message GFX_Layout_Render {
  required ProtocolInformation ProtocolInfo = 1;
  required int32 LayoutHandle = 2;
  required int32 Stage = 3;
} 
```

它最终为 GFX_Layout_Advance、GFX_Layout_Render 生成类，如下所示（仅 GFX_Layout_Advance 的一部分）：

```
[global::System.Serializable, global::ProtoBuf.ProtoContract(Name = @"GFX_Layout_Advance")]
public partial class GFX_Layout_Advance : global::ProtoBuf.IExtensible
{
    public GFX_Layout_Advance() { }

    private GFX_Protocol.ProtocolInformation _ProtocolInfo;
    [global::ProtoBuf.ProtoMember(1, IsRequired = true, Name = @"ProtocolInfo", DataFormat = global::ProtoBuf.DataFormat.Default)]
    public GFX_Protocol.ProtocolInformation ProtocolInfo 
```

因为它是一个部分类，并且我实现了似乎没有可覆盖的构造函数：

```
public partial class GFX_Layout_Advance : GfxProtocolMessageBase
    {
        public override ProtocolInformation ProtocolInformation()
        {
            return ProtocolInfo;
        }
    } 
```

这将允许我将所有传入消息视为 GfxProtocolMessageBase 并允许查询 ProtocolInformation 以便我可以转换为适当的后代。在这种情况下，GFX_Layout_Advance。然而.....

*   添加额外的部分类 GFX_Layout_Advance() 会导致不同的 protobuf 编码。由于界面的唯一变化是一种我不明白为什么会这样的方法？

底线是：

1.  我想为所有生成的 protobuf-net 类引入一个共同的基础祖先
2.  基础祖先类将允许我访问有关我正在处理的消息类型的信息，因为在我准备好之前我不想强制转换为实际的消息类型

我如何实现 1\. 和 2.？

所有指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:19:01.740

1.  是的，只要`GfxProtocolMessageBase`不是合同类型，它就应该可以正常工作。它故意使用部分类来允许这种类型的事情。编码数据不应改变。如果你有一个我可以看到的行为不端的场景，我会很乐意调查。

2.  没关系; 只是：不要使用`Serializer.Serialize<GfxProtocolMessageBase>`/ `Serializer.Deserialize<GfxProtocolMessageBase>`，因为序列化程序*不应该知道*（`GfxProtocolMessageBase`除非您当然乐意这样做，但这确实意味着您不会遵循现有的`.proto`100%）。对于序列化，`Serializer.NonGeneric.Serialize`或者`typeModel.Serialize`（例如，`RuntimeTypeModel.Default.Serialize`）将自动执行正确的操作。对于反序列化，您需要知道实际的目标`Type`。

当然，另一种选择是*允许* `GfxProtocolMessageBase`序列化程序将其视为基本类型，并使用 protobuf-net 的内置继承支持（`[ProtoInclude(...)]`等） - 但问题是：这不会 100% 映射到您的 .proto ，因为继承（通过protobuf-net）作为封装实现，这意味着：它将被写成好像它是带有许多可选子消息字段的基本消息。

* * *

编辑以显示用于从单个流中读取不同对象（异构类型）的类型解析器用法：

```
using ProtoBuf;
using System;
using System.Collections.Generic;
using System.IO;
[ProtoContract]
class Foo
{
    [ProtoMember(1)]
    public int Id { get; set; }

    public override string ToString()
    {
        return "Foo with Id=" + Id;
    }
}
[ProtoContract]
class Bar
{
    [ProtoMember(2)]
    public string Name { get; set; }

    public override string ToString()
    {
        return "Bar with Name=" + Name;
    }
}
static class Program
{
    // mechanism to obtain a Type from a numeric key
    static readonly Dictionary<int, Type> typeMap = new Dictionary<int, Type>
    {
        {1,typeof(Foo)}, {2,typeof(Bar)}
    };
    static Type ResolveType(int key)
    {
        Type type;
        typeMap.TryGetValue(key, out type);
        return type;
    }
    static void Main()
    {
        // using MemoryStream purely for convenience
        using (var ms = new MemoryStream())
        {
            // serialize some random data (here I'm coding the outbound key
            // directly, but this could be automated)
            Serializer.SerializeWithLengthPrefix(ms, new Foo { Id = 123 },
                PrefixStyle.Base128, 1);
            Serializer.SerializeWithLengthPrefix(ms, new Bar { Name = "abc" },
                PrefixStyle.Base128, 2);
            Serializer.SerializeWithLengthPrefix(ms, new Foo { Id = 456 },
                PrefixStyle.Base128, 1);
            Serializer.SerializeWithLengthPrefix(ms, new Bar { Name = "def" },
                PrefixStyle.Base128, 2);

            // rewind (this wouldn't be necessary for a NetworkStream,
            // FileStream, etc)
            ms.Position = 0;

            // walk forwards through the top-level data
            object obj;
            while (Serializer.NonGeneric.TryDeserializeWithLengthPrefix(
                ms, PrefixStyle.Base128, ResolveType, out obj))
            {
                // note we overrode the ToString on each object to make
                // this bit work
                Console.WriteLine(obj);
            }
        }
    }
} 
```

# wordpress - woocommerce单品中给出url路径

> ID：12577396
> 
> 赞同：0
> 
> 时间：2012-09-25T06:35:36.297
> 
> 标签：wordpress, woocommerce

我已经使用 woocommerce 的 Maya 主题在 wordpress 中给出了图像的 url 路径，并且图像未显示图像路径看起来像

```
<img title="Adidas-H111-2" alt="Adidas-H111-2" class="attachment-shop_thumbnail" src="http://localhost/alphatest/wp-content/uploads/http://localhost/webservice/ap/upload_images/Adidas/Hard/H111/Adidas-H111-2.jpg" style="opacity: 1;"> 
```

我怎样才能删除这部分

```
http://localhost/alphatest/wp-content/uploads/ 
```

我在 wordpress 中使用 maya 主题和 woocommerce 插件。完整的代码就像

```
<?php
/**
 * Single Product Thumbnails
 */

global $post, $woocommerce;
?>
<div class="thumbnails">
    <?php   
        $thumb_id = get_post_thumbnail_id();
        $small_thumbnail_size = apply_filters('single_product_small_thumbnail_size', 'shop_thumbnail');
        $args = array(
            'post_type'     => 'attachment',
            'numberposts'   => -1,
            'post_status'   => null,
            'post_parent'   => $post->ID,
            'post__not_in'  => array($thumb_id),
            'post_mime_type'=> 'image',
            'orderby'       => 'menu_order',
            'order'         => 'ASC'
        );
        $attachments = get_posts($args);
        if ($attachments) :
            $loop = 0;
            $columns = apply_filters('woocommerce_product_thumbnails_columns', 3);
            foreach ( $attachments as $attachment ) :

                if (get_post_meta($attachment->ID, '_woocommerce_exclude_image', true)==1) continue;

                $loop++;

                $_post = & get_post( $attachment->ID );
                $url = wp_get_attachment_url($_post->ID);

                $post_title = esc_attr($_post->post_title);
                $image = wp_get_attachment_image($attachment->ID, $small_thumbnail_size);

                echo '<a href="'.$url.'" title="'.$post_title.'" rel="thumbnails" class="zoom ';
                if ($loop==1 || ($loop-1)%$columns==0) echo 'first';
                if ($loop%$columns==0) echo 'last';
                echo '">'.$image.'</a>';

            endforeach;
        endif;
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T23:42:35.153

只需添加双斜杠 (//) 而不是域名。例子：

```
http://www.google.com/wp-content/uploads/2013/10/image.png 
```

将是：

```
//wp-content/uploads/2013/10/image.png 
```

# c# - 查询用户配置文件取决于 sharepoint 2010 中的自定义属性

> ID：12577399
> 
> 赞同：0
> 
> 时间：2012-09-25T06:35:58.983
> 
> 标签：c#, sharepoint

我想查询 sharepoint 2010 中的用户配置文件，这取决于用户配置文件中的自定义字段，而无需迭代 sharepoint 中的每个用户配置文件。我怎样才能做到这一点？

例如，我在名为 Account 的用户配置文件中创建了新字段。

我想检索具有相同帐户名的所有用户配置文件，而无需迭代每个用户配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:12:21.010

使用 caml 查询，您可以获得具有相同帐户名称的所有用户配置文件。

希望这个答案对你很有帮助。

# android - 分配游标时内存不足

> ID：12577400
> 
> 赞同：18
> 
> 时间：2012-09-25T06:36:04.017
> 
> 标签：android, sqlite, memory, memory-leaks, android-cursor

我有一个我无法弄清楚的记忆问题。我有一个类可以完成我所有的数据库检索工作。我遇到的错误如下：

```
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=733 (# cursors opened by this proc=733) 
```

当我这样做时发生内存分配错误：

```
mDatabaseInterface.getGraphForLevel(level); 
```

我知道这是一个泄漏，因为我大约每 2.5 秒调用一次此方法，并且第 5 或 6 次调用很容易通过。现在这里是我的 DatabaseInterface 类中的方法：

```
public Graph getGraphForLevel(Level level) {

    //get the nodes
    ArrayList<Node> nodes = new ArrayList<Node>(Arrays.asList(this.getNodesWithLevel(level)));
    //get the edges
    ArrayList<Edge> edges = new ArrayList<Edge>(Arrays.asList(this.getEdgesWithNodes(nodes)));

    return new Graph(nodes, edges);
}

public Node[] getNodesWithLevel(Level level) {

    List<Node> l = new ArrayList<Node>();

    Cursor cursor = mDatabase.query("nodes", null, 
            "level = " + wrapSql(String.valueOf(level.getId())), null, null, null, null);

    while (cursor.moveToNext()) {
        l.add(parseNodeFromCursor(cursor));
    }

    cursor.close();

    return l.toArray(new Node[l.size()]);       
}

private Node parseNodeFromCursor(Cursor cursor) {

    Level l = getLevelWithId(cursor.getInt(2));

    return new Node(cursor.getInt(0), cursor.getString(1), l, 
            cursor.getInt(4), cursor.getInt(5));
} 
```

我有很多相互调用的方法，但我知道这不是递归问题，因为这个类在另一个应用程序中工作。我的主要问题是为什么不`cursor.close()`释放光标？如果我这样做：

```
cursor = mDatabase.query(...);
cursor.moveToNext();
Node node = new Node(cursor.getInt());
cursor.close(); 
```

在这种情况下是否保留光标？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T09:20:18.307

调用`cursor.close()`应该在一个`finally`块中，以防在迭代时抛出异常。

```
Cursor cursor = mDatabase.query("nodes", null, 
        "level = " + wrapSql(String.valueOf(level.getId())), null, null, null, null);
try {
    while (cursor.moveToNext()) {
        l.add(parseNodeFromCursor(cursor));
    }
} finally {
    cursor.close();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T06:40:52.550

发生内存不足错误的原因之一是*`you are not closing your cursor`*.

正如我所看到的，您正在调用`cursor.close()`，但是您应该调用此方法的正确位置还是检查是否应该在其他地方关闭它。

**编辑：**

如果您的活动是`managing your Cursor`，您可以考虑停止管理它并关闭`onPause`方法中的`onResume`所有内容，然后再次打开所有内容并填充数据。

# javascript - javascript 或 jquery 的正则表达式

> ID：12577404
> 
> 赞同：-2
> 
> 时间：2012-09-25T06:36:17.017
> 
> 标签：javascript, jquery, regex

我的字符串是这样的——“一些文字&&电源线&&更多文字&&主管&&

现在我有一个数组，其中包含 - arr[0]=Power Cable 和 arr[1]=Supervisor 之类的值。所以我想要做的是 - 解析我的字符串并从中找出这些令牌，在这种情况下是 - 1）电源线和 2）主管，然后将这些令牌与我的数组中的令牌进行比较。

请注意，字符串中可以有 n 个标记（都是动态的），它们可以在任何地方，即在字符串的开头或结尾或中间的某个地方。我尝试了一些正则表达式，但它们都没有给我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:39:41.143

您可以使用[JavaScript split() 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。

```
var str = "Some text &&Power Cable&& more text &&Supervisor&&";
var result = str.split("&&"); 
```

# c# - 无法从新创建的 .txt 中读取。它正被另一个进程使用

> ID：12577410
> 
> 赞同：0
> 
> 时间：2012-09-25T06:36:59.923
> 
> 标签：c#, visual-studio-2010, file, file-io

当我创建我`log.txt`的 with`File.Create(Path.Combine(PATH, NAME));`然后尝试从中读取时，我得到一个异常：`{System.IO.IOException: The process cannot access the file 'c:\temp\log.txt' because it is being used by another process.`.

如果`log.txt`文件退出并且没有在该方法中创建，我可以读取和写入日志而不会出现任何问题。

创建的是`log.txt`异步的，问题是程序在创建之前试图读取它吗？

```
public static void WriteToLog(string text)
{
    try
    {
        if (!Directory.Exists(PATH))
        {
            Directory.CreateDirectory(PATH);
        }

        if( !File.Exists(Path.Combine(PATH, NAME)) )
        {
            File.Create(Path.Combine(PATH, NAME));
        }

        var logLines = File.ReadAllLines(Path.Combine(PATH, NAME)).ToList<string>();
        logLines.Insert(0, "-------------------------------------------------End New Log");
        logLines.Insert(0, text);
        logLines.Insert(0, "-------------------------------------------------Start New Log");
        File.WriteAllLines(Path.Combine(PATH, NAME), logLines);
    }
    catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T06:39:02.610

File.Create 创建一个文件流，创建后打开。因此该文件由其自己的进程使用。

只需将其更改为

```
 using(var f = File.Create(Path.Combine(PATH, NAME))) { } ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:40:00.893

[`File.Create`](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)具有类型的返回值[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)。如果您不打算将它用于任何事情，那`FileStream`应该是`Close`d（或d）。`Dispose`

但是，对于日志文件，我通常会`FileStream`直接通过构造一个`FileStream`对象，使用接受参数的[构造函数之一来创建。](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)`FileShare`这样，您可以保持流打开，但指示其他程序应该能够打开它以进行读取：

```
var fs = new FileStream(Path.Combine(PATH, NAME),
   FileMode.OpenOrCreate,
   FileAccess.Write,
   FileShare.Read); //Now other people can access the log file whilst I'm still writing to it 
```

# sql-server - SQL Server 如何在标识列中生成值？

> ID：12577411
> 
> 赞同：0
> 
> 时间：2012-09-25T06:37:16.793
> 
> 标签：sql-server, sql-server-2008, tsql, identity-column

我的问题是，如果我在一个表中并行插入两个批处理，SQL Server 如何创建标识值？

我的意思是，如果在一个会话中我插入多行（Row1-Row2-Row3），同时另一个会话同时插入多行（Row4-Row5-Row6），结果会是这样吗？

```
Row1
Row2
Row3
Row4
Row5
Row6 
```

或者可能是这样的？

```
Row1
Row6
Row3
Row5
Row4
Row2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T07:30:01.210

您正在犯在表格中假设顺序的常见谬误。表没有顺序。只有结果有顺序，除非指定了明确的 ORDER BY，否则它是不确定的。

您可能会问一个不同的问题：在并发插入的情况下，标识生成的值是如何分配的？答案很简单：**没关系**。如果您对订单做出任何假设，那么您的代码就会被破坏。间隙也是如此。即使生成的身份是完全随机的，您的应用程序也应该可以工作，并且如果身份是完全随机的，正确编写的应用程序*也可以*工作。用于[`SCOPE_IDENTITY()`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)检索最后插入的标识。更好的是，使用[`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)of 子句`INSERT`，它也适用于多行插入。

记录一下：身份是按照操作获取[日志流](http://rusanu.com/2012/01/17/what-is-an-lsn-log-sequence-number/)访问权的顺序生成的。

# android - Android中带有片段的标签的分离回栈

> ID：12577414
> 
> 赞同：0
> 
> 时间：2012-09-25T06:37:21.123
> 
> 标签：android, android-fragments, android-tabhost, android-tabactivity

由于不推荐使用选项卡活动，我正在尝试使用片段实现选项卡。正如您在许多 StackOverFlow 问题中看到的那样，当您使用 Fragment 并且它有自己的 back stack 时，back stack 是一个问题。

所以我想做的是，每个选项卡中有一个片段，这个片段可以调用同一个选项卡中的另一个片段，其他选项卡也一样。

由于只有一个活动，因此整个应用程序只有一个后退堆栈。所以我需要创建为每个选项卡分开的自定义后台堆栈。这也是其他问题中相同的常见想法。我需要找到一种方法来创建自定义后退堆栈，但我找不到任何示例来查看。

是否有任何教程或任何示例代码做类似的事情？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:51:20.167

整个应用程序都有一个backstack，但也有一个fragment 的backstack。

也许读过这个：

[http://developer.android.com/guide/components/fragments.html#Transactions](http://developer.android.com/guide/components/fragments.html#Transactions)

当您执行片段事务（添加、替换或删除）时，您可以将该事务添加到后台堆栈。

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.replace(R.id.fragmentContainer, fragment);
ft.addToBackStack(null);
ft.commit(); 
```

现在，当您按下返回时，最新的片段将从片段回栈中“弹出”。

您还可以覆盖 onBackPressed()，并在那里管理您的片段回栈。（我目前在试图弄清楚如何有效地做到这一点时遇到了麻烦）。

无论如何，FragmentManager 有几个调用可用于处理 backstack。对我最有用的是：

```
FragmentManager.getBackStackEntryCount() 
```

和

```
FragmentManager.PopBackStack() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T18:29:35.120

抱歉回答晚了，但这可能对某人有所帮助。我在我的项目中添加了这样的功能。我使用片段 tabhost 在其中添加 backstacks。其他的主要逻辑将保持不变。

基本上我拿了，

```
Stack<String> fragmentStack = new Stack<>();
boolean bBackPress = false;
String strPrevTab;
FragmentTabHost tabHost;

strPrevTab = "tag"; // Add tag for tab which is selected by default
        tabHost.setOnTabChangedListener( new TabHost.OnTabChangeListener() {
            @Override
            public void onTabChanged( String tabId ) {
                if ( !bBackPress ) {
                    if ( fragmentStack.contains( tabId ) ) {
                        fragmentStack.remove( tabId );
                    }
                    fragmentStack.push( strPrevTab );
                    strPrevTab = tabId;
                }
            }
        } );

@Override
    public void onBackPressed() {
        if ( fragmentStack.size() == 0 ) {
            finish();
        } else {
            strPrevTab = fragmentStack.pop();
            bBackPress = true;
            tabHost.setCurrentTabByTag( strPrevTab );
            bBackPress = false;
        }
    } 
```

希望这可以帮助！

# android - 如何从编辑文本中的可滚动内容创建位图图像？

> ID：12577421
> 
> 赞同：2
> 
> 时间：2012-09-25T06:37:47.323
> 
> 标签：android, bitmap, android-edittext

我想捕获图像中的编辑文本内容。但是文本可以滚动。

如何从编辑文本中捕获可滚动内容？

没有可滚动我正在使用以下链接来做..

[从 EditText 及其内容创建位图图像](https://stackoverflow.com/questions/7763667/create-bitmap-image-from-edittext-its-content)

请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:39:51.730

这是示例代码

请尽力...

```
Bitmap bitmap = BitmapFactory.decodeResource(this.getResources(),
            R.drawable.edittextimage);// get the image same as your EditText

    bitmap = convertToMutable(bitmap);// converting the bitmap to mutable
    Canvas cs = new Canvas(bitmap);

    int h = bitmap.getHeight();
    int w = bitmap.getWidth();
    Paint pt = new Paint();
    pt.setColor(Color.GREEN);
    String iam = "your text that get from the Edit Text";
    cs.drawText(iam, 0, iam.length(), (h / 2) + 10, (w / 2) / 2, pt);
    pt.setColor(Color.RED);
    cs.drawText("this is praki", 0, 13, h / 2, w / 3, pt);

    Save_to_SD(bitmap , path)//save the bitmap in to sdcard 
```

convertToMutable(bitmap) 方法 ....

```
public static Bitmap convertToMutable(Bitmap imgIn) {
    try {
        // this is the file going to use temporally to save the bytes.
        // This file will not be a image, it will store the raw image data.
        File file = new File(Environment.getExternalStorageDirectory()
                + File.separator + "temp.tmp");

        // Open an RandomAccessFile
        // Make sure you have added uses-permission
        // android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        // into AndroidManifest.xml file
        RandomAccessFile randomAccessFile = new RandomAccessFile(file, "rw");

        // get the width and height of the source bitmap.
        int width = imgIn.getWidth();
        int height = imgIn.getHeight();
        Bitmap.Config type = imgIn.getConfig();

        // Copy the byte to the file
        // Assume source bitmap loaded using options.inPreferredConfig =
        // Config.ARGB_8888;
        FileChannel channel = randomAccessFile.getChannel();
        MappedByteBuffer map = channel.map(FileChannel.MapMode.READ_WRITE,
                0, imgIn.getRowBytes() * height);
        imgIn.copyPixelsToBuffer(map);
        // recycle the source bitmap, this will be no longer used.
        imgIn.recycle();
        System.gc();// try to force the bytes from the imgIn to be released

        // Create a new bitmap to load the bitmap again. Probably the memory
        // will be available.
        imgIn = Bitmap.createBitmap(width, height, type);
        map.position(0);
        // load it back from temporary
        imgIn.copyPixelsFromBuffer(map);
        // close the temporary file and channel , then delete that also
        channel.close();
        randomAccessFile.close();

        // delete the temp file
        file.delete();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return imgIn;
} 
```

Save_to_SD(bitmap , path) 方法....

```
public static void Save_to_SD(Bitmap bm, String image_name) {

    // String extStorageDirectory =
    // Environment.getExternalStorageDirectory()
    // .toString();
    // String meteoDirectory_path = extStorageDirectory +
    // "/Weather_Belgium";

    OutputStream outStream = null;
    File file = new File(image_name);
    try {
        outStream = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
        outStream.flush();
        outStream.close();

        Log.i("Hub", "OK, Image Saved to SD");
        Log.i("Hub",
                "height = " + bm.getHeight() + ", width = " + bm.getWidth());

    } catch (FileNotFoundException e) {

        e.printStackTrace();
        Log.i("Hub", "FileNotFoundException: " + e.toString());

    } catch (IOException e) {

        e.printStackTrace();
        Log.i("Hub", "IOException: " + e.toString());
    }

} 
```

# c# - 创建新的开放属性

> ID：12577422
> 
> 赞同：1
> 
> 时间：2012-09-25T06:38:06.637
> 
> 标签：c#, asp.net, ado.net

我正在尝试做一个博客项目，我正在使用 ado.net，我有 3 层架构。在一个类库中，我有诸如`User`和之类的类`Comments`：

```
public class User
{
 public int userID{ get; set; }
 public string userName{ get; set; }
 public string userPassword { get; set; }
 public string userMail{ get; set; }
}

public class Comments
{
public int ID { get; set; }
public int userID{ get; set; }
public string commentHeader{ get; set; }
public string commentContent{ get; set; }
} 
```

我想在课堂上拥有一`userName`处房产。`Comments`我决定在`Comments`课堂上创建一个开放属性。

因为我将在 UI 中显示这些内容，并且我希望`UserName`看到`UserID`; 以便更好地了解谁发送此评论。

我如何创建以下内容？

```
public string userName
{
    get
    {
       return //(what I have to write here) 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:44:01.087

有多种方法可以做到这一点。

假设您`User`的代码中有 s 列表，您可以查询该列表并`UserName`在您的属性中检索 。就像是：

```
public string userName
{
    get
    {
       return userList.Single(r=>r.UserID == this.UserID).UserName; // Use single  
       //if you are sure there's going to be a single record against a user ID
       //Otherwise you may use First / FirstOrDefault
    }
} 
```

**或者**

您可以使用组合并将 User 对象放在 Comments 类中。

```
public class Comments
{
public int ID { get; set; }
public User user { get; set; } // User object in Comments class
public string commentHeader{ get; set; }
public string commentContent{ get; set; }
} 
```

然后在您的财产中，您可以简单地执行以下操作：

```
public string userName
{
    get
    {
       return user.UserName;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:44:58.093

```
 public string userName
    {
        get
        {
            return userList.FirstOrDefault(user => user.userID == userID).userName;
        }
    } 
```

用户列表在哪里

```
List<User> userList; 
```

# java - 如何设置 java 系统属性，使其在我启动 JVM 时有效而不将其添加到命令行参数

> ID：12577437
> 
> 赞同：42
> 
> 时间：2012-09-25T06:39:06.933
> 
> 标签：java, jvm-arguments

Java 1.7 中从操作系统获取默认语言环境的方式发生了变化。有一些方法可以恢复旧行为，例如在启动 JVM 实例时设置标志 -Dsun.locale.formatasdefault=true。

我想永久设置这个标志，这样每次启动 JVM 实例时就不必在命令行参数中指定它。是否有文件或任何其他可能性可以更改 JVM 的默认设置？类似于 Eclipse.ini 文件但针对 JVM 本身的东西？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-25T07:02:36.677

您可以在操作系统中设置设置环境变量[`JAVA_TOOL_OPTIONS`](https://bugs.openjdk.java.net/browse/JDK-4971166)。所有 Java 工具（java、javac、..）都会选择并使用这个变量。所以你可以例如使用

```
SET JAVA_TOOL_OPTIONS=-Dsun.locale.formatasdefault=true 
```

我使用它来强制每个 JVM 使用特定的语言环境。

~~但这仅在您的应用程序通过 Java 工具启动时才有效。例如，如果它是从调用 jvm DLL 的 C 程序启动的，则不会使用它。~~

编辑：我刚刚对其进行了测试，似乎 JAVA_TOOLS_OPTIONS 在启动 DLL 时也被拾取（通过使用 WinRun4J 作为启动器的 Swing 应用程序进行验证）

请参阅：[http ://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html)

# wcf - 使用 net tcp 绑定托管 WCF 服务。错误：服务元数据可能无法访问

> ID：12577438
> 
> 赞同：2
> 
> 时间：2012-09-25T06:39:16.370
> 
> 标签：wcf, nettcpbinding

我有一个服务应用程序，它具有以下 web.config 文件：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

  <standardEndpoints>
  </standardEndpoints>
  <bindings>
  </bindings>
  <services>
  <service behaviorConfiguration="metadatabehaviour" name="WCF_Service.HistorianService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
      contract="WCF_Service.IHistorianCollectorService" />
    <endpoint address="net.tcp://localhost:8081/mex" binding="mexTcpBinding"
      contract="IMetadataExchange" />
    <endpoint address="net.tcp://localhost:8081" binding="netTcpBinding"
      contract="WCF_Service.IHistorianCollectorService" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="metadatabehaviour">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>

 <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
 </system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
 </system.webServer>

 </configuration> 
```

我收到以下错误：添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

如果我只是实现“basicHttpBinding”，我可以成功运行该服务，但是一旦我引入一个“netTcp”绑定，我就会开始收到这个错误。我已将“mex”绑定更改为“mexTcpBinding”，但错误仍然存​​在。我曾尝试切换相关属性。知道如何纠正这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:41:21.530

看来您实际上禁用了元数据交换：

```
<serviceMetadata httpGetEnabled="false" /> 
```

应该设置为真！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:08:12.030

我找到了解决方案。我的 net.tcp 端口号的值为“0”。我不知道这是可能的。将其更改为 808 即可。

# batch-file - 等待并行批处理脚本

> ID：12577442
> 
> 赞同：18
> 
> 时间：2012-09-25T06:39:44.640
> 
> 标签：batch-file, parallel-processing

我有 4 个批处理文件。我想同时`one.bat`运行`two.bat`。这两个批处理文件完成后，`three.bat`应该`four.bat`同时运行，并行。我尝试了很多方法，但 mot 工作正常。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-30T22:00:37.160

使用我为[并行执行 shell 进程](https://stackoverflow.com/a/11715437/1012053)提供的解决方案的简化版本很容易做到这一点。有关文件锁定如何工作的说明，请参阅该解决方案。

```
@echo off
setlocal
set "lock=%temp%\wait%random%.lock"

:: Launch one and two asynchronously, with stream 9 redirected to a lock file.
:: The lock file will remain locked until the script ends.
start "" cmd /c 9>"%lock%1" one.bat
start "" cmd /c 9>"%lock%2" two.bat

:Wait for both scripts to finish (wait until lock files are no longer locked)
1>nul 2>nul ping /n 2 ::1
for %%N in (1 2) do (
  ( rem
  ) 9>"%lock%%%N" || goto :Wait
) 2>nul

::delete the lock files
del "%lock%*"

:: Launch three and four asynchronously
start "" cmd /c three.bat
start "" cmd /c four.bat 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T17:53:06.057

我也有同样的困境。这是我解决这个问题的方法。我使用 Tasklist 命令来监控进程是否仍在运行：

```
:Loop
tasklist /fi "IMAGENAME eq <AAA>" /fi "Windowtitle eq <BBB>"|findstr /i /C:"<CCC>" >nul && (
timeout /t 3
GOTO :Loop
)
echo one.bat has stopped
pause 
```

你需要调整

`<AAA>, <BBB>, <CCC>`

脚本中的值，以便它正确过滤您的流程。

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T12:19:30.933

创建启动 one.bat 和 two.bat 的 master.bat 文件。当 one.bat 和 two.bat 正确结束时，它们会回显到已完成的文件

```
if errorlevel 0 echo ok>c:\temp\OKONE
if errorlevel 0 echo ok>c:\temp\OKTWO 
```

然后master.bat等待这两个文件的存在

```
del c:\temp\OKONE
del c:\temp\OKTWO
start one.bat
start two.bat
:waitloop
if not exist c:\temp\OKONE (
    sleep 5
    goto waitloop
    )
if not exist c:\temp\OKTWO (
    sleep 5
    goto waitloop
    )
start three.bat
start four.bat 
```

另一种方法是尝试使用 /WAIT 标志

```
start /WAIT one.bat
start /WAIT two.bat 
```

但是您无法控制错误。

这里有一些参考

[http://malektips.com/xp_dos_0002.html](http://malektips.com/xp_dos_0002.html)

[http://ss64.com/nt/sleep.html](http://ss64.com/nt/sleep.html)

[http://ss64.com/nt/start.html](http://ss64.com/nt/start.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-22T19:42:20.593

只是添加另一种方式，也许是最短的。

```
(one.cmd | two.cmd) && (three.cmd | four.cmd) 
```

概念真的很简单。`errorlevel`并行启动 1 和 2 ，完成后`0`运行 3 和 4。

# python - 固定装置的 Django 自然键给出反序列化错误

> ID：12577446
> 
> 赞同：3
> 
> 时间：2012-09-25T06:39:58.670
> 
> 标签：python, django, yaml, fixtures, natural-key

我在 SO 上看到了一些与此类似的问题，但似乎没有一个能回答我的特定问题。我是 Django 新手，并按照[此页面](https://docs.djangoproject.com/en/dev/topics/serialization/#natural-keys)上的说明指导自己，以允许自己使用自然键来加载固定装置。不过，我收到了反序列化错误，因为 Django 想要一个整数作为外键，并且似乎无法将我的自然键映射到说明中所述的整数主键。具体来说，我的相关模型代码是：

```
class GraphTypeManager(models.Manager):
    def get_by_natural_key(self, type):
        return self.get(type=type)
class GraphType(models.Model):
    type = models.CharField(max_length=100, unique=True)

class GraphManager(models.Manager):
    def get_by_natural_key(self, name):
        return self.get(name=name)
class Graph(models.Model):
    name = models.CharField(max_length=200, unique=True)
    type = models.ForeignKey(GraphType)

class LineManager(models.Manager):
    def get_by_natural_key(self, name):
        return self.get(name=name)
class Line(models.Model):
    name = models.CharField(max_length=200, unique=True)

class GraphToLineManager(models.Manager):
    def get_by_natural_key(self, line, graph):
        return self.get(line=line,graph=graph)
class GraphToLine(models.Model):
    line = models.ForeignKey(Line)
    graph = models.ForeignKey(Graph)
    class Meta:
        unique_together = (('line', "graph"),) 
```

我的 YAML 夹具是：

```
- model: graphs_container.GraphType
  pk: null
  fields:
    type: TimeSeries
- model: graphs_container.Graph
  pk: null
  fields:
    name: LikesOverTime
    type: [TimeSeries]
- model: graphs_container.Graph
  pk: null
  fields:
    name: UsersOverTime
    type: [TimeSeries]
- model: graphs_container.Line
  pk: null
  fields:
    name: NumUsers
- model: graphs_container.Line
  pk: null
  fields:
    name: NumLikes 
```

但是在尝试运行时`python manage.py loaddata sample_data.yaml`，我收到以下错误：

```
DeserializationError: [u"'['TimeSeries']' value must be an integer."] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T08:39:13.133

你需要

*   `natural_key`在模型中定义方法
*   有一个有`get_by_natural_key`方法的经理
*   实际附上经理 ( `objects=GraphManager()`)

在玩了你的代码之后，我让它工作了：

```
class GraphTypeManager(models.Manager):
    def get_by_natural_key(self, type):
        return self.get(type=type)

class GraphType(models.Model):
    type = models.CharField(max_length=100, unique=True)
    objects = GraphTypeManager()

    def natural_key(self):
        return (self.type,)  # must return a tuple

class GraphManager(models.Manager):
    def get_by_natural_key(self, name):
        return self.get(name=name)

class Graph(models.Model):
    name = models.CharField(max_length=200, unique=True)
    type = models.ForeignKey(GraphType)
    objects = GraphManager() 
```

转储数据：

```
$ bin/django dumpdata index --indent=4 --natural > project/apps/fixtures_dev/initial_data.json
[
    {
        "pk": 1,
        "model": "index.graphtype",
        "fields": {
            "type": "asotuh"
        }
    },
    {
        "pk": 1,
        "model": "index.graph",
        "fields": {
            "type": [
                "asotuh"
            ],
            "name": "saoneuht"
        }
    }
]

bin/django loaddata project/apps/fixtures_dev/initial_data.json 
Installed 2 object(s) from 1 fixture(s) 
```

# android - 如何从 Android 中的 WCF 服务反序列化复杂的 JSON 对象？

> ID：12577449
> 
> 赞同：3
> 
> 时间：2012-09-25T06:40:10.917
> 
> 标签：android, json, wcf, deserialization

我有一个生成以下 JSON 的 REST WCF 服务。

```
{
   "RecordsUpdateResult":[
      {
         "ID":115,
         "Crud":2,
         "Data":{
            "__type":"Client:#PIT.Library.AndroidClasses",
            "ID":115,
            "Adress":"str. 1",
            "City":"Luzern",
            "Description":"Client 115",
            "PostalCode":6000
         }
      },
      {
         "ID":128,
         "Crud":2,
         "Data":{
            "__type":"Client:#PIT.Library.AndroidClasses",
            "ID":128,
            "Adress":"",
            "City":"",
            "Description":"Client 128",
            "PostalCode":0
         }
      }
   ]
} 
```

如何使用 gson 库在 android 手机上反序列化它？

我怀疑问题出在**"__type":"Client:#PIT.Library.AndroidClasses"**。我在 Android 端有一个名为“Client”的类。

我想将此 JSON 反序列化为以下类。

```
public class StammdatenUpdate extends ObjectBase
{
    @SerializedName("Crud")
    private CRUD    crud;
    @SerializedName("Data")
    private Object  data;

    @Override
    public String getSha1Hash()
    {
        // TODO Auto-generated method stub
        return null;
    }

    public synchronized CRUD getCrud()
    {
        return crud;
    }

    public synchronized void setCrud(CRUD crud)
    {
        this.crud = crud;
    }

    public synchronized Object getData()
    {
        return data;
    }

    public synchronized void setData(Object data)
    {
        this.data = data;
    }
} 
```

属性 ID 在基类中。

```
 ...
    Type listType = new TypeToken<ArrayList<StammdatenUpdate>>()
        {}.getType();
    Gson gson = new GsonBuilder().create();

    // List<StammdatenUpdate> RecordsUpdate(StammdatenType type, Dictionary<long, string> listWithHashes)
    postData.setParameter(new String[] { "type", "listWithHashes" });
    postData.setValues(new String[] { gson.toJson(StammdatenType.CLIENT), gson.toJson(map) });

    String json = post.execute(postData);

    List<StammdatenUpdate> retValue = null;
    if(Tools.isNullOrEmpty(json) == false)
    {

        retValue = gson.fromJson(json, listType);
    }

    return retValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:01:42.910

从以下位置更改 WCF 注释：

BodyStyle = WebMessageBodyStyle。**包裹**

至：

BodyStyle = WebMessageBodyStyle。**包裹请求**

这将 JSON 更改为：

```
 {
       "RecordsUpdateResult":[
          {
             "ID":115,
             "Crud":2,
             "Data":{ 
```

至：

```
[
          {
             "ID":115,
             "Crud":2,
             "Data":{ 
```

并且反序列化工作正常。

```
 Type listType = new TypeToken<ArrayList<StammdatenUpdate>>()
        {}.getType();
    Gson gson = new GsonBuilder().create();

    List<StammdatenUpdate> retValue = null;
    if(Tools.isNullOrEmpty(json) == false)
    {
        retValue = gson.fromJson(json, listType);
    }

    return retValue; 
```

# c# - 网格视图下拉列表数据绑定错误

> ID：12577450
> 
> 赞同：0
> 
> 时间：2012-09-25T06:40:15.323
> 
> 标签：c#, asp.net, c#-4.0, data-binding, gridview

我正在使用下面的代码来绑定另一个表中的下拉数据。并且还使用 rowindex 引用该控件名称。但它总是返回null。并且还返回错误消息。

```
 `Object reference not set to an instance of an object.` 
```

我使用这两种方法，但都返回控件名称 null

第一个代码：

```
 protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Control ctrl = e.Row.FindControl("DDL_STATUS_FT"); //It always return null
            if (ctrl != null)
            {
                DropDownList dd = ctrl as DropDownList;
                DataSet7TableAdapters.sp_getall_trv_masterTableAdapter TA = new DataSet7TableAdapters.sp_getall_trv_masterTableAdapter();
                DataSet7.sp_getall_trv_masterDataTable DS = TA.GetData();
                dd.DataTextField = "fld_TName";
                dd.DataValueField = "fld_id";
                dd.DataSource = DS;
                dd.DataBind();
            }

        }

    } 
```

第二 ：

```
 In databind function

if (DS.Rows.Count > 0)
    {
        GridView2.DataSource = DS;
        GridView2.DataBind();

    foreach (GridViewRow grdRow in GridView2.Rows)
    {
        DataSet7TableAdapters.sp_getall_trv_masterTableAdapter TA1 = new DataSet7TableAdapters.sp_getall_trv_masterTableAdapter();
        DataSet7.sp_getall_trv_masterDataTable DS1 = TA1.GetData();
        // Nested DropDownList Control reference is passed to the DrdList object. This will allow you access the properties of dropdownlist placed inside the GridView Template column.  
        DropDownList drdList = (DropDownList)(GridView2.Rows[grdRow.RowIndex].Cells[4].FindControl("DDL_STATUS_FT"));//It always return null

        // DataBinding of nested DropDownList Control for each row of GridView Control.  
        drdList.DataSource = DS1;
        drdList.DataValueField = "fld_id";
        drdList.DataTextField = "fld_TName";
        drdList.DataBind();
    } 
} 
```

请帮我这样做..

```
 <asp:TemplateField ItemStyle-Width="100px" HeaderText="TYPE">
                        <ItemTemplate>
                            <asp:DropDownList ID="DDL_STATUS" runat="server" AutoPostBack="true" Enabled="false" >
                            </asp:DropDownList>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:DropDownList ID="DDL_edit_STATUS" runat="server" AutoPostBack="true" SelectedValue='<%# Eval("fld_Type") %>'>
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <FooterTemplate>
                            <asp:DropDownList ID="DDL_STATUS_FT" runat="server" AutoPostBack="true">
                            </asp:DropDownList>
                        </FooterTemplate>
                    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:35:32.870

DropDown“DDL_STATUS_FT”在`Footer Template`..你必须检查它如下..

```
if(e.Row.RowType == DataControlRowType.Footer)
{
  DropDownList ctrl =(DropDownList)e.Row.Cells[CellIndex].FindControl("DDL_STATUS_FT"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:47:23.040

**已编辑2**

您必须`dropdownlist`在 gridview item-template 中有 aspx 代码

您发现 using`e.row.findcontrol`没有如此滥用地声明它返回 null

因此，首先将下拉列表添加到您的网格视图中，这是您的下拉列表的示例

```
 <asp:TemplateField ItemStyle-Width="30px" HeaderText="DDL_STATUS_FT">
                        <ItemTemplate>
                            <asp:Dropdownlist ID="DDL_STATUS_FT" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField> 
```

如果你`ctrl` 有空 Control ctrl = e.Row.FindControl("DDL_STATUS_FT"); //它总是返回null

然后确保在您的 aspx 代码中 `DDL_STATUS_FT`Control 是`runat="server"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:12:52.227

尝试通过 cell 和 cellIndex 找到您的控件，例如...

```
Control ctrl = e.Row.Cells[yourCellIndex].FindControl("DDL_STATUS_FT"); 
```

# android - 如何处理不支持 EXIF 方向数据的 Android 设备？

> ID：12577451
> 
> 赞同：7
> 
> 时间：2012-09-25T06:40:15.107
> 
> 标签：android, image, orientation, exif

我正在使用 Android 2.2 在 HTC Desire 上测试我的应用程序。它完全按照我的意愿工作。我使用 Sherlock 包在旧设备上与新设备上具有相同的风格。

我的 AVD 设置为使用最新的 android，而且看起来也不错。然后我把它放到三星 Galaxy S2 上，当我使用相机和画廊图像时，它们旋转错误。三星（相机应用程序，android it self）上的某些东西没有接缝，或者它确实检查了 EXIF 并且我的图像方向错误。纵向图像以横向加载，横向图像以纵向加载。

1.  我想我需要以某种方式检查 EXIF 并忽略它以便按原样加载图像？
2.  更大的问题是 - 如何知道是否有任何其他设备（一些 HTC，一些 HUAWEI 一些）会出现类似问题？我认为除了有 4 个屏幕尺寸组之外，所有 android 设备的行为方式都相同......

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T23:13:01.680

没有任何代码很难说出发生了什么。

我发现最简单的方法是读取 EXIF 信息并检查图像是否需要旋转。要阅读有关 Android 上的 ExifInterface 类的更多信息：http: [//developer.android.com/intl/es/reference/android/media/ExifInterface.html](http://developer.android.com/intl/es/reference/android/media/ExifInterface.html)

也就是说，这是一些示例代码：

```
/** An URI and a imageView */
public void setBitmap(ImageView mImageView, String imageURI){
    // Get the original bitmap dimensions
    BitmapFactory.Options options = new BitmapFactory.Options();            
    Bitmap bitmap = BitmapFactory.decodeFile(imageURI, options);
    float rotation = rotationForImage(getActivity(), Uri.fromFile(new File(imageURI)));

    if(rotation!=0){
        //New rotation matrix
        Matrix matrix = new Matrix();
        matrix.preRotate(rotation);
        mImageView.setImageBitmap(Bitmap.createBitmap(bitmap, 0, 0, reqHeight, reqWidth, matrix, true));
    } else {
        //No need to rotate
        mImageView.setImageBitmap(BitmapFactory.decodeFile(imageURI, options));
    }
}

/** Returns how much we have to rotate */
public static float rotationForImage(Context context, Uri uri) {
        try{
            if (uri.getScheme().equals("content")) {
                //From the media gallery
                String[] projection = { Images.ImageColumns.ORIENTATION };
                Cursor c = context.getContentResolver().query(uri, projection, null, null, null);
                    if (c.moveToFirst()) {
                        return c.getInt(0);
                    }               
            } else if (uri.getScheme().equals("file")) {
                 //From a file saved by the camera
                    ExifInterface exif = new ExifInterface(uri.getPath());
                    int rotation = (int) exifOrientationToDegrees(exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL));
                    return rotation;
            }
            return 0;

        } catch (IOException e) {
            Log.e(TAG, "Error checking exif", e);
            return 0;
        }
}

/** Get rotation in degrees */
private static float exifOrientationToDegrees(int exifOrientation) {
        if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_90) {
            return 90;
        } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_180) {
            return 180;
        } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_270) {
            return 270;
        }
        return 0;
} 
```

如果出现错误，您将在 rotationForImage 函数上看到日志“错误检查 EXIF”。

# jquery - 如何开发一个jquery无闪烁流畅动画

> ID：12577456
> 
> 赞同：0
> 
> 时间：2012-09-25T06:40:36.003
> 
> 标签：jquery, animation

下面是我的脚本，当我运行这个脚本时，我注意到发生了闪烁。特别是动画在 IE 中看起来特别糟糕。我知道闪烁是由于使用动画功能增加 div 大小而发生的。所以请指导我如何使下面的脚本动画看起来非常流畅。指导我需要在脚本中更改哪些代码，因此它的功能相同，但动画看起来很流畅。我不想要任何闪烁。谢谢

这是演示网址[http://jsfiddle.net/tridip/kPZrZ/2/](http://jsfiddle.net/tridip/kPZrZ/2/)

```
$(document).ready(function () {
        $('#lnk').click(function (e) {
            $('body').append('<div id="transition"></div>').show();

            var $t = $('#transition'),
            to = $(this).offset(),
            td = $(document);

            $t.css({
                top: to.top + 50,
                left: to.left + 50,
                display: 'block'
            }).animate({
                opacity: 1,
                top: td.height() / 2,
                left: td.width() / 2
            }, 600, function () {
                $(this).animate({
                    top: '-=75',
                    left: '-=50'
                }, 600);

                $('#transition').addClass("BusyStyles");
                setTimeout(function () {
                    $('#transition').animate({
                        top: (td.height() / 2) - 200/2,
                        left: (td.width() / 2) - 250/2,
                        width: 250,
                        height: 200
                    }, 600, function () {
                        //alert('pp');
                        // to do things   
                        $('#transition').removeClass("BusyStyles");
                        $('#transition').html('<b>Welcome...</b>');
                    });
                }, 1000);
            });

            $t.click(function (e) {
                //alert('pp');
                $(this).fadeOut('slow').remove();
            });
            return false;
        });

    }); 
```

# java - 标量乘法 - 数组索引越界异常

> ID：12577457
> 
> 赞同：0
> 
> 时间：2012-09-25T06:40:37.810
> 
> 标签：java, exception, indexoutofboundsexception

```
public static int[][] scalarMultiplication(int[][] A,int num) {
    int[][] arrayScalarMul = new int[A.length][A[0].length];

    for (int x=0; x < arrayScalarMul.length; x++) {
        for (int y=0; y < arrayScalarMul[x].length; y++) {
            arrayScalarMul[x][y] = A[x * num][y * num];
        }
    }
    return arrayScalarMul;
} 
```

正如标题所说，我遇到了一个`ArrayIndexOutOfBoundsException`错误，我看到有些人通过将长度缩短 1 来修复它，我只是不明白为什么需要这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:42:48.937

```
arrayScalarMul[x][y] = A[x * num][y * num]; 
```

将其更改为

```
arrayScalarMul[x][y] = num * A[x][y]; 
```

您将索引与给定的标量相乘，但您应该乘以该索引上的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:43:16.070

错误是因为

arrayScalarMul[x][y] = A[x * num][y * num];

num 与 x（或 y）相乘时会超出范围。

index-1 终止通常用于防止“关闭 1 错误”，因为您有一个基于 0 的数组，因此大小为 n 的数组实际上将具有介于 0 和 n-1 之间的有效索引。所以我们要么使用 < n 或 <= n-1 的循环条件。上述情况并非如此。

如果您的意图是用 A[x*num][y*num] 替换 A[x][y] 处的值，*前提是这是一个有效的索引*，然后添加这样的检查

```
if(x*num - totalx) && (y*num - totaly)
   A[x][y] = A[x*num][y*num]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:49:48.983

*长度短 1*也不起作用，因为`num`这里是可变的。

```
arrayScalarMul[x][y] = A[x * num][y * num]; 
```

它生产`java.lang.ArrayIndexOutOfBoundsException`. 这里 *x*num* 和*y* num* 超出了数组索引。

# jquery-ui - 用于获取在 HTML 标记中选择的子节点的 Jquery 代码

> ID：12577460
> 
> 赞同：0
> 
> 时间：2012-09-25T06:40:42.527
> 
> 标签：jquery-ui, jquery, jquery-selectors

```
Below is the HTML code for a Telerik Tree View Control used in a ASP.NET MVC application. I need to get the value (input tags values are in GUID format) of the ChildNode when a child node checkbox is selected.

Illlustrated below:
*Main Region*     
    **North VAncouver    
    testlocation2       
    Testlocation123**       
*Africa*           
    **Tanzania         
    Headquarters**             
*India*                
   **Items Gobetter       
   Mash          
   YouThinkSo**               
*Canada*           
   **WestVancouver** 
```

正如上面给出的，我想知道您是否可以给我 Jquery 代码来遍历 HTML 标记并选择 GUID 中给出的已检查子节点值。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />

  <title></title>
</head>

<body>
  <ul>
    <li>
      <span id="spnloc">Locations</span>

      <div style=
      "position: absolute; padding-top: 5px; background-color: rgb(234, 234, 234); color: rgb(63, 138, 196); z-index: 2000; display: none;"
      id="TreeView1" class="t-widget t-treeview t-reset">
        <ul class="t-group t-treeview-lines">
          <li class="t-item t-first">
            <div class="t-top">
              <span class="t-checkbox"><input type="hidden" value="0" name=
              "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
              value="True" name="TreeView1_checkedNodes[0].Checked" class="t-input"
              checked="checked" /><input type="hidden" value="Main Region" name=
              "TreeView1_checkedNodes[0].Text" class="t-input" /><input type="hidden"
              value="Main Region" name="TreeView1_checkedNodes[0].Value" class=
              "t-input" /></span><span class="t-in">Main Region</span><input type=
              "hidden" value="Main Region" name="itemValue" class="t-input" />
            </div>

            <ul class="t-group">
              <li class="t-item">
                <div class="t-top">
                  <span class="t-checkbox"><input type="hidden" value="0:0" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[0:0].Checked" class=
                  "t-input" /></span><span class="t-in">North
                  Vancouver</span><input type="hidden" value=
                  "5761a893-9ef0-48d3-847a-2638ec081f5f" name="itemValue" class=
                  "t-input" />
                </div>
              </li>

              <li class="t-item">
                <div class="t-mid">
                  <span class="t-checkbox"><input type="hidden" value="0:1" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[0:1].Checked" class=
                  "t-input" /></span><span class="t-in">testLocation2</span><input type=
                  "hidden" value="d63d6ff6-07dc-4021-a4bb-7b1b7c781119" name="itemValue"
                  class="t-input" />
                </div>
              </li>

              <li class="t-item t-last">
                <div class="t-bot">
                  <span class="t-checkbox"><input type="hidden" value="0:2" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[0:2].Checked" class=
                  "t-input" /></span><span class=
                  "t-in">TestLocations123</span><input type="hidden" value=
                  "eadfd0f5-9181-4094-b01a-9d7ee383b7f2" name="itemValue" class=
                  "t-input" />
                </div>
              </li>
            </ul>
          </li>

          <li class="t-item">
            <div class="t-mid">
              <span class="t-checkbox"><input type="hidden" value="1" name=
              "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
              value="True" name="TreeView1_checkedNodes[1].Checked" class="t-input"
              checked="checked" /><input type="hidden" value="Africa" name=
              "TreeView1_checkedNodes[1].Text" class="t-input" /><input type="hidden"
              value="Africa" name="TreeView1_checkedNodes[1].Value" class=
              "t-input" /></span><span class="t-in">Africa</span><input type="hidden"
              value="Africa" name="itemValue" class="t-input" />
            </div>

            <ul class="t-group">
              <li class="t-item">
                <div class="t-top">
                  <span class="t-checkbox"><input type="hidden" value="1:0" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[1:0].Checked" class=
                  "t-input" /></span><span class="t-in">Tanzania</span><input type="hidden"
                  value="5c2389eb-365e-42bb-9b1a-8db36f87b4af" name="itemValue" class=
                  "t-input" />
                </div>
              </li>

              <li class="t-item t-last">
                <div class="t-bot">
                  <span class="t-checkbox"><input type="hidden" value="1:1" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="True" name="TreeView1_checkedNodes[1:1].Checked" class="t-input"
                  checked="checked" /><input type="hidden" value="Headquarters" name=
                  "TreeView1_checkedNodes[1:1].Text" class="t-input" /><input type=
                  "hidden" value="ac171662-3eca-411f-a623-a3cb1a69238e" name=
                  "TreeView1_checkedNodes[1:1].Value" class=
                  "t-input" /></span><span class="t-in">Headquarters</span><input type=
                  "hidden" value="ac171662-3eca-411f-a623-a3cb1a69238e" name="itemValue"
                  class="t-input" />
                </div>
              </li>
            </ul>
          </li>

          <li class="t-item">
            <div class="t-mid">
              <span class="t-checkbox"><input type="hidden" value="2" name=
              "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
              value="True" name="TreeView1_checkedNodes[2].Checked" class="t-input"
              checked="checked" /><input type="hidden" value="India" name=
              "TreeView1_checkedNodes[2].Text" class="t-input" /><input type="hidden"
              value="India" name="TreeView1_checkedNodes[2].Value" class=
              "t-input" /></span><span class="t-in">India</span><input type="hidden"
              value="India" name="itemValue" class="t-input" />
            </div>

            <ul class="t-group">
              <li class="t-item">
                <div class="t-top">
                  <span class="t-checkbox"><input type="hidden" value="2:0" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[2:0].Checked" class=
                  "t-input" /></span><span class="t-in">Item's Go Here</span><input type=
                  "hidden" value="d8266db4-e846-4338-906f-e0b84fd9044a" name="itemValue"
                  class="t-input" />
                </div>
              </li>

              <li class="t-item">
                <div class="t-mid">
                  <span class="t-checkbox"><input type="hidden" value="2:1" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[2:1].Checked" class=
                  "t-input" /></span><span class="t-in">MASH</span><input type=
                  "hidden" value="869c083a-a17b-4a7a-a2a9-ef88f972de1b" name="itemValue"
                  class="t-input" />
                </div>
              </li>

              <li class="t-item t-last">
                <div class="t-bot">
                  <span class="t-checkbox"><input type="hidden" value="2:2" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[2:2].Checked" class=
                  "t-input" /></span><span class="t-in">YouThinkSo</span><input type=
                  "hidden" value="4e33e582-8a54-450a-ad73-70698a578162" name="itemValue"
                  class="t-input" />
                </div>
              </li>
            </ul>
          </li>

          <li class="t-item t-last">
            <div class="t-bot">
              <span class="t-checkbox"><input type="hidden" value="3" name=
              "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
              value="True" name="TreeView1_checkedNodes[3].Checked" class="t-input"
              checked="checked" /><input type="hidden" value="Canada" name=
              "TreeView1_checkedNodes[3].Text" class="t-input" /><input type="hidden"
              value="Canada" name="TreeView1_checkedNodes[3].Value" class=
              "t-input" /></span><span class="t-in">Canada</span><input type="hidden"
              value="Canada" name="itemValue" class="t-input" />
            </div>

            <ul class="t-group">
              <li class="t-item t-last">
                <div class="t-top t-bot">
                  <span class="t-checkbox"><input type="hidden" value="3:0" name=
                  "TreeView1_checkedNodes.Index" class="t-input" /><input type="checkbox"
                  value="False" name="TreeView1_checkedNodes[3:0].Checked" class=
                  "t-input" /></span><span class="t-in">West Vancouver</span><input type=
                  "hidden" value="b8fd4a6f-bfc7-4c8a-b2ff-cb3c278c7434" name="itemValue"
                  class="t-input" />
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</body>
</html> 
```

斜体是区域（父节点），粗体是子节点。区域和子节点（它们是位置）都是复选框。
子节点的值采用 GUID（唯一标识符）值。在选择父节点和子节点时，我需要在选择节点后才能获取子节点的值，并且可能单击一个按钮来运行 JQuery 代码。你能帮我用 Jquery 代码吗？即使它们被选中，它也可以给我选择的复选框（仅子节点）的值，而忽略父复选框。TreeView 的 HML 标记在上面给出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:10:41.477

不确定这是否是您想要的

演示：http: [//jsfiddle.net/qHJYJ/](http://jsfiddle.net/qHJYJ/)

通过单击按钮将返回`GUID`所有具有

*   已选择父节点
*   子节点本身被选中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:02:45.683

```
$('input[type="checkbox"]').on('change', function() {
    var e = $(this);
    if (e.parents('li:eq(2)').length) {
        console.log('sub-checkbox found, value: ' + e.val());
    } else {
        console.log('parent checkbox has been changed, ignoring...');
    }
    console.log(e.attr('name'));
});​ 
```

[jsFiddle 示例代码在这里](http://jsfiddle.net/aa2Vw/1/)

# android - 在android中设置推送通知

> ID：12577462
> 
> 赞同：1
> 
> 时间：2012-09-25T06:40:51.493
> 
> 标签：android

我有一个 API。假设这个 api [http://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/) 有我在列表视图中显示的这个联系人。我想在我们的应用程序中设置一个推送通知，这样当在 api 中添加新联系人时，我们的应用程序中应该有一个通知，表明新联系人已上传。即使应用程序未打开或未启动，也应显示此通知。

例如：它应该像“印度时间”安卓应用一样运行。当新闻更新到来时，它会显示一个通知。
我是安卓新手。请帮我。我会这样做吗？请向我发送示例资源或向我发布相关博客或告诉我逻辑。我将如何做到这一点我也有服务器访问权限。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:43:28.490

您可以为此使用 GCM，

Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到他们在 Android 设备上的 Android 应用程序。这可能是一条轻量级消息，告诉 Android 应用程序有新数据要从服务器获取（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此应用程序如即时通讯可以直接消费消息）。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面

本文档描述了如何使用 GCM 提供的帮助程序库（客户端和服务器）编写 Android 应用程序和服务器端逻辑。

检查这些链接，

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/19226-android-push-notification-gcm-framework-tutorial.html)

[http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/](http://fundroiding.wordpress.com/2012/06/29/google-cloud-messaging-for-android-gcm-simple-tutorial/)

对于客户端应用程序，您可以在此处找到代码

[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

# c# - 元素在页面上可见但显示为空

> ID：12577464
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:40:58.397
> 
> 标签：c#, javascript, jquery, selenium, webdriver

无法识别页面中的元素。它给出null。我想识别Iframe（文本框）中的元素。我使用selenium webdriver点击元素，但它无法识别元素

1) 我的 HTML 代码如下所示

```
 <html>
        <head>
         <body>
         <iframe id="iframeOne">                  
             </iframe>
         </body>    
          </head>

              </html> 
```

2.我使用javascript来识别像document.getElementById('textbox')这样的文本框。
但它返回null。

3.我什至尝试使用 selenium webdriver

```
 IWebElement ClickElement = Wait.Until((d) => webDriver.FindElement(By.Id(parameter1))); It gives object reference error
            ClickElement.Click(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:46:27.360

您不能将 html 放在 iframe 标记内。它是在当前页面中加载另一个页面。并且您的输入标签应该包含控件的类型。并检查 HTML 验证错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T06:51:36.873

当且仅当浏览器**不**支持 iframe 标记时，您放置**在**iframe 标记中的 html 代码才会被加载并可见。所以可能永远不会，除非您使用的是较旧的 Netscape navigator 或 IE 4。

 **将`src`属性添加到指向要加载的 url 的 iframe。然后你可以通过这种方式访问​​里面的元素：

```
var frame = document.getElementById('iframeOne');
var frameDocument = frame.contentDocument;
var element = frameDocument.getElementById('xxxx'); 
```

但是，需要考虑一件事：`contentDocument`当 iframe 的 src 跨域时访问可能无法按预期工作。**

# java - 如何在 Android 上使用 Robotium 测试从列表中删除项目

> ID：12577466
> 
> 赞同：0
> 
> 时间：2012-09-25T06:41:20.867
> 
> 标签：java, android, testing, robotium

我的应用程序中有一个项目列表。我想写一个测试用例从 onLongClick 列表中删除一个项目。我使用了机器人方法：

```
clickLongInList() 
```

但它无法正常工作如何以不同的方式测试删除项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:34:43.070

当您长按列表中的项目时，

我想“存在具有删除选项的菜单”

如果此菜单存在，则**clickLongOnText();** 将打开菜单 [包含删除选项] 和**clickOnText("Delete");** 这将从列表中删除您的项目。

我希望这能帮到您。谢谢。

# iphone - 将 UIViewController 更改为 UIView

> ID：12577468
> 
> 赞同：0
> 
> 时间：2012-09-25T06:41:23.613
> 
> 标签：iphone, ipad, uiview, uiviewcontroller, xcode4.2

我是iOS开发的新手，

我想在我的应用程序中画一条线，我创建了一个简单的基于视图的应用程序，

我知道要画线我们需要`- (void)drawRect:(CGRect)rect`方法，但是这个方法在`UIView`not in `UIViewCOntroller`

如何将我的班级更改为`UIView`？

这是我的代码片段，

```
// .h file
@interface Financial_Calc : UIViewController{
    UIButton *firstBtn,*secondBtn;
}
 @end

//.m file
@implementation Financial_CalculatorViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"drawRect");
}

@end 
```

**任何帮助将不胜感激**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:50:17.763

您需要保留您拥有的视图控制器，并为它创建一个自定义视图类来控制。

1.  选择文件 > 新建文件...</li>
2.  从iOS，Cocoa Touch，选择'Objective-C Class'，点击下一步
3.  将您的课程命名为“MyView”（或任何您喜欢的名称，约定是在最后查看）
4.  使您的类成为 UIView 的子类（在“子类”字段中键入 UIView）
5.  单击下一步，选择创建文件的位置（项目文件夹中的任何位置都可以）。
6.  将您的自定义绘图代码添加到`drawRect:`MyView.m
7.  在视图控制器的 Xib 文件中，选择视图。
8.  选择“视图”>“实用工具”>“显示身份检查器”
9.  在“自定义类”字段中，将类字段从“UIView”更改为“MyView”
10.  构建并运行 - 您的视图控制器现在正在控制您的自定义视图。

也可以在不使用用户界面 Xib 的情况下执行此操作，但这应该可以帮助您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T06:48:00.663

**仅供参考：您不能将 UIViewController 更改为 UIView。**一种方法是，创建一个新的 UIView 子类（假设称为 CustomUIView）。你的draw rect编码在那里。并在 viewDidLoad 方法中的 ViewController.m 中创建 CustomUIView 类的对象（比如说 customUIView）并执行此操作

```
[self.view addSubView:customUIView]; 
```

# ruby-on-rails - 避免需要在 Heroku 上声明“-a”

> ID：12577469
> 
> 赞同：0
> 
> 时间：2012-09-25T06:41:44.137
> 
> 标签：ruby-on-rails, git, heroku

这可能应该是一个超级简单的问题，但我无法弄清楚我没有正确完成什么。

我在 Heroku 上运行了 5 个应用程序，在我的前三个应用程序中，我可以使用以下命令：

```
git push heroku 
```

而新的我必须明确声明

```
git push git@heroku.com:myappname.git 
```

对于旧的，如果我在本地应用程序的正确文件夹中，我可以使用以下命令：

```
heroku logs 
```

在 Heroku 上查看该应用程序的日志，而对于新的我必须指定

```
heroku logs -a myapp 
```

似乎我错过了与 Heroku 的 git“连接”的一些东西。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:59:17.820

heroku git repo 与您的应用程序无关，请使用：

```
git remote add heroku <repo_name> 
```

# jquery - jQuery .ajax 与 dataType json 的返回参数是什么？

> ID：12577470
> 
> 赞同：2
> 
> 时间：2012-09-25T06:41:44.527
> 
> 标签：jquery, ajax, json

我有以下内容：

```
 var row = 99;
    $.ajax({
        cache: false,
        url: "/Admin/" + obj.table + "s/JsonUpdate",
        dataType: 'json',
        type: 'POST',
        data: { PartitionKey: pk,
                RowKey: rk,
                Entity: entity,
                Field: type, 
                Value: val }
    })
    .done(updateFieldDone(json, textStatus, XMLHttpRequest, row))
    .fail(function (jqXHR, textStatus, errorThrown) {
        ajaxOnFailure(jqXHR, textStatus, errorThrown)
    }); 
```

但我对.done 究竟返回了什么感到困惑。像这样编写 updateFieldDone(json, textStatus, XMLHttpRequest, row) 是否可以。以前我只有 updateFieldDone() 但我遇到的问题是我需要传递一个名为 row 的参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:44:24.003

您可以使用该`context`参数将其他数据传递给成功回调：

```
var row = 99;
$.ajax({
    cache: false,
    url: "/Admin/" + obj.table + "s/JsonUpdate",
    dataType: 'json',
    type: 'POST',
    context: { row: row },
    data: { 
        PartitionKey: pk,
        RowKey: rk,
        Entity: entity,
        Field: type, 
        Value: val 
    }
})
.done(function(json) {
    // Here "this" will represent the object we passed as context
    var row = this.row;
})
.fail(function (jqXHR, textStatus, errorThrown) {
    ajaxOnFailure(jqXHR, textStatus, errorThrown)
}); 
```

或者如果你想在一个单独的函数中使用它：

```
var row = 99;
$.ajax({
    cache: false,
    url: "/Admin/" + obj.table + "s/JsonUpdate",
    dataType: 'json',
    type: 'POST',
    context: { row: row },
    data: { 
        PartitionKey: pk,
        RowKey: rk,
        Entity: entity,
        Field: type, 
        Value: val 
    }
})
.done(updateFieldDone)
.fail(function (jqXHR, textStatus, errorThrown) {
    ajaxOnFailure(jqXHR, textStatus, errorThrown)
}); 
```

然后定义函数：

```
function updateFieldDone(json) {
    // Here "this" will represent the object we passed as context
    var row = this.row;
} 
```

# android - 如何在字符串数组（即）向量中得到答案？

> ID：12577472
> 
> 赞同：0
> 
> 时间：2012-09-25T06:41:48.913
> 
> 标签：android, sqlite, android-edittext

这是我的代码：

```
blanks=new EditText(this);
String values =blanks.getText().toString();
answers.put(relative.getId(),answer);
if(answer[0].equals(values)) {
     Toast.makeText(this,"Match!", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:03:34.160

你的代码没有意义。您创建一个新的 EditText 字段，然后立即获取文本。但这将始终为空。

# facebook-graph-api - 使用图形 api 添加喜欢的评论问题

> ID：12577481
> 
> 赞同：0
> 
> 时间：2012-09-25T06:42:44.463
> 
> 标签：facebook-graph-api

我在网页上放了最后 3 个帖子，如果用户登录他可以添加评论/喜欢，问题是如果用户登录并尝试添加喜欢或评论，他会收到权限错误 #200，如果我登录我可以添加喜欢或评论（应用程序是给我的），我得到了用户的所有权限，所以我怎样才能给他添加喜欢/评论的权限。

代码 ：

```
$facebook = new Facebook(array(
            'appId' => '',
            'secret' => '',
            'cookie' => true,
        ));

$user = $facebook->getUser();
if ($user) {  
    if (session_id()) {

    } else {
        session_start();
    }

    $access_token = $facebook->getAccessToken();
    //check permissions list

    $permissions_list = $facebook->api(
            '/me/permissions', 'GET', array(
        'access_token' => $access_token
            )
    );

    //check if the permissions we need have been allowed by the user
    //if not then redirect them again to facebook's permissions page

    $permissions_needed = array('publish_stream', 'read_stream', 'manage_pages');

    foreach ($permissions_needed as $perm) {
        if (!isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1) {
            $login_url_params = array(
                'scope' => 'publish_stream,read_stream,manage_pages',
                 'fbconnect' =>  1,
        'display'   =>  "page",
                'redirect_uri' => 'http://localhost/fb/index.php',
            );
            $login_url = $facebook->getLoginUrl($login_url_params);
            header("Location: {$login_url}");
            exit();
        }
    }
}else {

    //if not, let's redirect to the ALLOW page so we can get access
    //Create a login URL using the Facebook library's getLoginUrl() method

    $login_url_params = array(
        'scope' => 'publish_stream,read_stream,manage_pages',
                'fbconnect' =>  1,
        'display'   =>  "page",
        'redirect_uri'=>'http://localhost/fb/index.php',
    );
    $login_url = $facebook->getLoginUrl($login_url_params);

    //redirect to the login URL on facebook
    header("Location: {$login_url}");
    exit();
}

$logoutUrl = $facebook->getLogoutUrl(); 
```

**如果用户点击喜欢按钮：**

```
 jQuery('ul.fb_list a').click(function(){

               var comm_id = jQuery(this).attr("class");

                    jQuery.post('https://graph.facebook.com/'+comm_id+'/likes/',{
                        access_token : "<?php echo $access_token ?>"

                    });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:25:20.793

仔细检查并确保您的变量 comm_id 的格式为发布帖子的人的用户 ID，然后是帖子本身的 ID，中间有一个下划线，就像这样 - USERID_POSTID。如果您调用图形 api，这就是 facebook 为您提供的方式

```
$post_url = "https://graph.facebook.com/" . $user_id . "/posts?access_token=". urlencode($access_token); 
```

不确定您是否从其他来源获得 comm_id。在您的代码中也注意到

```
access_token : "<?php echo $access_token ?>" 
```

您在回声呼叫后忘记了分号。应该是这个

```
 access_token : "<?php echo $access_token; ?>" 
```

希望这可以帮助。我看到您正在使用很多 jquery 来执行类似的功能。我喜欢为这样的东西坚持使用服务器端代码，我觉得出于某种原因它更稳定。

我就是这样做的。我有一个像这样的按钮-

```
echo '<div id="like_container-'.$i.'">
<div id="like_count">'.$num_likes.'</div>'
<a href="javascript:void()" onclick="fb_Like(\''.$post_id.'\',\''.$access_token.'\','.$num_likes.','.$i.')"><div class="unliked"></div></a>
</div>'; 
```

而 fb_Like() 是一个 ajax 调用，像这样 -

```
function fb_Like(post_id, token, num_likes, id){
$.ajax({
type: "GET",
url: "likepost.php",
data: 'id='+post_id+'&token='+token+'&likes='+num_likes,
success: function(html)
{
    $("#like_container-"+id).empty().html(html);

}

});
} 
```

而likepost.php 页面是一个类似于此页面上的脚本

[使用 Graph Api 在外部像 Facebook 帖子一样 - 示例](https://stackoverflow.com/questions/11428242/like-a-facebook-post-externally-using-graph-api-example/11432386#comment16949982_11432386)

这对我来说非常有效。如果有人点赞，我还可以更新帖子在“点赞”按钮正上方的点赞数。祝你好运！

更新

如果您想检查用户是否已经喜欢某个帖子，使用 facebook graph api 非常简单

```
//Create Post Url
$post_url = "https://graph.facebook.com/" . $Page/User_id . "/posts?access_token=". urlencode($access_token);

//Get Json Contents
$resp = file_get_contents($post_url,0,null,null);

//Store Post Entries as Array
$the_posts = json_decode($resp, true);

foreach ($the_posts['data'] as $postdata) {

    foreach ($postdata['likes']['data'] as $like){

        if($like['id']==$user){

        $liked=1;

        }else{continue;}                                                
    }

    if($liked==1){
     //do something
    }

} 
```

这假设您已经拥有登录用户的 facebook 用户 ID，在本例中，存储在变量 $user 中。

# javascript - 如何从 当流进入<c:if>块时，我想调用一个 javascript 函数。 例如，我有以下代码： <c:if test="${!empty errorMessage &amp;&amp; !(fn:contains(errorMessage, 'generic'))}">errorError 问问题 问问题 2012-09-25T06:42:44.337 17628 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当流进入<c:if>块时，我想调用一个 javascript 函数。 例如，我有以下代码： <c:if test="${!empty errorMessage &amp;&amp; !(fn:contains(errorMessage, 'generic'))}">errorError occured</c:if> <c:if>只有当这是真的时，我才需要调用 JS 函数。 请建议如何实现这一目标。 您可以</c:if> 希望这可以帮助。 javascriptjsp 4 1 回答 1 This answer is useful 6 您可以</c:if> 希望这可以帮助。 于 2012-09-25T07:14:49.483 回答 Related 1 javascript - 提供者跨浏览器 DOM 访问存在什么库？ 4 c# - 使用 IDisposable 和没有 IDisposable 的内存释放 1 wxpython - wxPython 多分割器窗口 2 php - wordpress：打开 SEO URL 时无法获取类别 ID 4 c# - 当行具有空值时，实体框架返回空对象 1 android - Google TV 模拟器和 GenericMotionEvent 1 python - 带有参数的 Django ManyToManyField 过滤器？ 1 webgl - 三.js ParticleSystem 创建给出 INVALID_OPERATION: not bound BUFFER_ARRAY 2 svn - 如何找到所有需要提交的颠覆存储库？ 1 asp.net - 在会话期间保存浏览的页面 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</c:if></c:if>

> ID：12577482
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, jsp

当流进入`<c:if>`块时，我想调用一个 javascript 函数。

例如，我有以下代码：

```
<c:if test="${!empty errorMessage && !(fn:contains(errorMessage, 'generic'))}">
    <span> errorError occured<br />
    </span>
</c:if> 
```

`<c:if>`只有当这是真的时，我才需要调用 JS 函数。

请建议如何实现这一目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T07:14:49.483

您可以`<script>`在块中包含标签`<c:if>`，如下所示：

```
<c:if test="${!empty errorMessage && !(fn:contains(errorMessage, 'generic'))}">
    <span>
        errorError occured<br />
    </span>
    <script>
        alert("Calling my function ...");
        myFunction(); // this is a call to your function which must be defined in the <head> section or another JS file.
    </script>
</c:if> 
```

希望这可以帮助。

# asp.net - Asp.net 4.0 中的安全和不安全页面

> ID：12577484
> 
> 赞同：2
> 
> 时间：2012-09-25T06:42:53.337
> 
> 标签：asp.net, security, c#-4.0

我正在 Asp.net 4.0 中开发一个 Web 应用程序，其中我有两种类型的页面“安全”和“不安全”。

要访问安全页面，用户必须成功登录。

这可以通过两种方式实现：

第一种方法：web.config 文件中的位置标记。

第二种方法：为 Secured 和 Unsecured 创建 2 个虚拟目录。

如果有其他更好的选择，请提出更好的方法并提出建议。

提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:53:11.743

“位置标签”更好，因为即使您使用虚拟目录，您也需要再次使用“位置标签”，从不安全重定向到安全 - 所以要确保每个虚拟目录，都一样任何目录。

这是一个非常好的项目，可以为您制作：http: [//www.codeproject.com/Articles/7206/Switching-Between-HTTP-and-HTTPS-Automatically-Ver](http://www.codeproject.com/Articles/7206/Switching-Between-HTTP-and-HTTPS-Automatically-Ver)

根据规则自动从 http 切换到 https。

# jquery - 在rails中失去焦点后立即保存数据

> ID：12577486
> 
> 赞同：2
> 
> 时间：2012-09-25T06:43:01.197
> 
> 标签：jquery, ruby-on-rails, ruby, rubygems

我想将具有多个字段的数据保存在rails中。其实我是怕我往form里填数据的时候不小心把那些数据丢了，所以想在失去焦点后把这些数据一一保存。我想知道天气有什么宝石或方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:58:17.987

使用 jQuery 模糊功能，正如@Rab Nawaz 所说，AJAX 提交数据。

[这](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_event_focus_blur)是一个模糊的工作示例，[解释](http://www.w3schools.com/jquery/event_blur.asp)和[文档](http://api.jquery.com/blur/)

所以像：

```
$("input").blur(function(){
  $("form.form_class").submit();
}); 
```

只需确保为 AJAX 正确设置了表单。

或者，如果您正在寻找宝石，您可以试试[这个](https://github.com/bernat/best_in_place)。没用过，不过看着挺酷的。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:54:41.620

让我们试试 Sisyphus jquery。它会自动将数据保存在本地。

[http://coding.smashingmagazine.com/2011/12/05/sisyphus-js-client-side-drafts-and-more/](http://coding.smashingmagazine.com/2011/12/05/sisyphus-js-client-side-drafts-and-more/)

[https://github.com/dnoonan/sisyphus-rails](https://github.com/dnoonan/sisyphus-rails)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T08:55:13.557

阿贾克斯就是答案。但想想表现。如果您在每个属性失去焦点后发送请求，它将向数据库和服务器发送多个请求..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:52:40.027

要将新数据发送到服务器，您不需要任何 Gem。你可以简单地使用 jQuery（当然你可以使用 gem 来做 jQuery）。只需将您的更新代码挂钩到您的字段的模糊事件。

```
$(document).on('blur', 'input[type=text]', function(e){
  post_data = {}; //prepare your data here
  $.post(UPDATE_URL, post_data, function(response_data){
     console.log(data)
  })
}) 
```

现在，当您编辑文本字段时（如果需要，您可以在查询中添加其他字段），它会将更新后的 DATA 发送到服务器。您应该输入 UPDATE_URL 以便您可以使用它。但是，您还需要 csrf_token_name 和值来发出 post 请求。将这些添加到 post_data。如果你找不到方法，我可能会帮助你。

# iphone - iPhone：youtube 视频链接未打开

> ID：12577487
> 
> 赞同：0
> 
> 时间：2012-09-25T06:43:01.573
> 
> 标签：iphone, objective-c, video

我正在使用以下代码在 webview 中打开 youtube 链接。

```
[self playVideo:@"www.youtube.com/watch?v=GcpFTAqvLYQ" frame:CGRectMake(0, 44, 1024, 700)];

- (void)playVideo:(NSString *)urlString frame:(CGRect)frame
{
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.view addSubview:videoView];
    [videoView release];
    NSLog(@"%@",html);
} 
```

在此代码的帮助下，我只能打开其他 youtube 链接，特别是该链接未打开。

此外，我在浏览器中使用此链接，它正在浏览器中打开。

我不明白是什么问题。

如果您有任何想法，请分享。

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:52:24.520

做这个：

```
[self playVideo:@"http://www.youtube.com/watch?v=GcpFTAqvLYQ" frame:CGRectMake(0, 44, 1024, 700)]; 
```

现在 playVideo 将是：

```
 - (void)playVideo:(NSString *)urlString frame:(CGRect)frame
{
    NSString *embedHTML = [NSString stringWithFormat:@"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>", urlString, frame.size.width, frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:embedHTML baseURL:nil];
    [self.view addSubview:videoView];
    [videoView release];
    NSLog(@"%@",embedHTML);
} 
```

# c# - 预构建事件：使用 XCopy 将文件夹及其子文件夹和文件复制到构建目录中

> ID：12577496
> 
> 赞同：25
> 
> 时间：2012-09-25T06:43:36.053
> 
> 标签：c#, winforms, visual-studio-2010

我有 Window 应用程序，我有一些插件，它是 ChildPlugins，我放置在我的应用程序文件夹结构中（请参阅文件夹结构图像）。我使用 SVN 作为源代码控制，所以每个文件夹都有`.SVN`文件夹。

这是我的问题：

下图是我的插件目录结构。所有文件夹都有一些与其插件相关的文件。现在我想使用 Pre Built Event 将所有文件夹（带有 SubFolders）和它的文件复制到我的 Application Build 输出路径。

![**插件目录结构**](../Images/25d70e7b7f705e15e9d6a8144daa2268.png)

在网上搜索后，我发现通过使用 XCopy 我可以实现我想要的。通过使用下面的代码，我可以复制 Plugins 目录和它的文件，但不能复制它的子文件夹和子文件夹 Files 。

```
xcopy "$(SolutionDir)Plugins\*.*" "$(SolutionDir)Windows\Host\Host.GUI\bin\x86\$(ConfigurationName)\Plugins\" /Y/D 
```

我想复制文件夹，它是所有文件的所有子文件夹，并且想要排除`.SVN`. 谁能指出我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-05T16:19:05.520

我用过这个：

```
xcopy "$(ProjectDir)MyFolder\*.*" "$(SolutionDir)ConsoleApplication1\bin\Release\MyFolder" /Y /I /E 
```

并且工作正常，当我编译包含所有文档的项目时，文件夹“MyFolder”出现在我的“Release”文件夹中。

这里要指出的是，$(SolutionDir) 之后的路径会根据您的解决方案的名称而改变，我的解决方案是 ConsoleApplication1。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-25T06:49:15.233

您需要添加 /E 开关来复制子目录（包括空目录）。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-07-23T14:20:04.673

如果它不需要具有解决方案名称或配置类型的路径，则更好：

```
xcopy "$(ProjectDir)MyFolder\*.*" "$(TargetDir)\MyFolder" /Y /I /E 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-24T10:51:40.670

这是将 Assets 文件夹（位于项目文件夹中）复制到 bin(debug or release ...)\Assets 的示例

```
<Target Name="BeforeBuild">
    <Exec Command="xcopy &quot;$(ProjectDir)Assets\*.*&quot; &quot;$(ProjectDir)bin\$(Configuration)\Assets&quot; /Y /I /E" />
</Target> 
```

*注意，双引号替换为特殊词*

# javascript - cfml jquery 未捕获语法错误无效令牌？

> ID：12577500
> 
> 赞同：0
> 
> 时间：2012-09-25T06:44:18.353
> 
> 标签：javascript, jquery, coldfusion

页面顶部显示一个问号，但我找不到。我只是想从一批电子邮件中发送一封测试电子邮件来验证内容。

```
<script type="text/javascript">

$(document).ready(function () {

    $(function() {
        $("#message_submit").live('click', function() {
            alert('x');
            $.ajax({
                  type: 'GET',
                  url: 'cfc/basic.cfc?method=SendTestEmail',
                  data: 'EmailAddress=' + $("#previewemailaddress").text() + '&emailbody=' + $("#Email_Text").text() + '&emailfrom=' + $("#email_from").text(),
                  error: function (xhr, textStatus, errorThrown) {
                    // show error
                    alert(errorThrown);
                  },
                  success: function () {
                    return true;
                  }
                });
         return false;
        });
    });​
)}; 
```

```
<table width="900">
  <tr>
    <td width="900"><cftextarea name="Email_Text" id="Email_Text" value="#Qmailer.Email_Text#"  richtext="True"></cftextarea>
    </td>
  </tr>
<tr>
    <td>
    <p><label for="previewemailaddress">Email Address for test email</label><input type="text" size="30" name="previewemailaddress" id="previewemailaddress" /></p>
    <p><input type="button" value="Send Test Email" name="commit" id="message_submit"/></p>
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:46:34.193

你的最后一行应该是`});`而不是`)};`.

一点解释：错误与jQuery无关。您所拥有的是无效的 JavaScript 语法。以后只需打开浏览器的 JavaScript 控制台即可检查错误。

你可以看看[这里](http://jsfiddle.net/9mdNb/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:47:17.453

您的 DOM 就绪事件的结束标记是非法字符.. 尝试删除它

```
 });
    });​

 });  < ----- 
```

您的代码以 `)};`

还要检查您在浏览器的控制台部分看到的错误

# xcode - XCode - 自动创建方法存根？

> ID：12577504
> 
> 赞同：1
> 
> 时间：2012-09-25T06:44:34.617
> 
> 标签：xcode, xcode4

是否可以让 xcode 为您在头文件中定义的方法生成方法存根？我不是在谈论协议方法，而是在您的班级中您自己的自定义方法。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:55:57.867

我相信 Xcode 没有为所有（或所有未实现的）方法生成存根的命令。但是，您可以让 Xcode 至少为每个方法生成方法签名。

例如，如果您定义以下方法声明：

```
- (void)aVoidMethod;
- (int)aMethodReturningInt;
- (CGSize)sizeOfSomething;

+ (void)classMethod;
+ (NSString *)stringClassMethod; 
```

您可以通过放置适当的符号 ( `+`/ `-`) [我忘记了术语 :) ] 加上每个方法的前几个字符来生成方法签名。

例如：

*   键入`- av`（不区分大小写），CodeSense 将自动（很可能）选择`- (void)aVoidMethod`
*   `+ cl`生成方法签名`+ (void)classMethod`
*   等等。这也适用于具有任意数量参数的方法。

# c# - XSLT 转换后的前导非法字符

> ID：12577511
> 
> 赞同：0
> 
> 时间：2012-09-25T06:45:17.177
> 
> 标签：c#, asp.net, xslt

在 XSLT 转换之后，我不断收到（似乎）与字符编码有关的领先问号，但我无法摆脱它们。我尝试了所有不同的编码，但没有帮助。当我序列化对象时，我坚持使用内存中的 xml 源。

这是我的代码（尽可能短地重现问题）

```
var xd = new XmlDocument();
xd.LoadXml(@"<?xml version=""1.0"" encoding=""utf-8""?><Test><AAA>AAA</AAA></Test>");

var xslt = new System.Xml.Xsl.XslCompiledTransform();
xslt.Load(Server.MapPath("/Transformations/Test.xslt"));

using (var ms = new MemoryStream())
{
    xslt.Transform(xd, null, ms);
    ms.Position = 1;

    using (var sr = new StreamReader(ms, System.Text.Encoding.UTF8, true))
    {
        string s = sr.ReadToEnd();
    }
} 
```

这是 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="text"  indent="no"/>
    <xsl:template match="Test">
        BBB<xsl:value-of select="AAA" />CCC
    </xsl:template>
</xsl:stylesheet> 
```

产生：

```
��\r\n\t\tBBBAAACCC\r\n\t 
```

这可能很简单，但我无法弄清楚......

问候，

赫拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:06:12.010

将 设置`ms.Position`为 0 而不是 1

C# 数组是零索引的。

# iphone - 在后台调用函数和在线程中调用函数的区别

> ID：12577514
> 
> 赞同：2
> 
> 时间：2012-09-25T06:45:31.257
> 
> 标签：iphone, ios, background-process, nsthread

我无法理解在后台调用函数之间的区别

```
[self performSelectorInBackground:@selector(getFriendFaceBookList) withObject:nil]; 
```

并在 Thread 中调用相同的函数：

```
[NSThread detachNewThreadSelector:@selector(getFriendFaceBookList) toTarget:self withObject:nil]; 
```

哪一种是在非 ARC 应用程序中工作的最佳方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:58:16.803

它们是相同的。查看[文档](http://developer.apple.com/mac/library/documentation/cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW13)

performSelectorInBackground:withObject: 调用这个方法的效果和调用NSThread的detachNewThreadSelector:toTarget:withObject:方法的效果是一样的，参数是当前对象、选择器和参数对象。

希望能帮助到你。

# html - 带有 css 的静态水平导航栏 - IE 和 Chrome 之间的边距问题

> ID：12577515
> 
> 赞同：1
> 
> 时间：2012-09-25T06:45:35.783
> 
> 标签：html, css

我有一个包含 4 个`<li>`元素的静态导航栏，它应该向用户显示他/她在网站上的进度。
每个元素的宽度都是预定义的以适合页面。现在，当我显示该网站时，它在 IE 上从左到右延伸，但在 Chrome 上缩短了 10 像素。

我正在寻找一种更流畅的方式来让这种方式在 IE/FF/Chrome 上保持一致。亲切的问候

CSS：

```
ul#progress {
  list-style:none;
  margin-bottom:2px;
  padding:0px;
  height: auto;
  display: table;
  float:left;
}
ul#progress li {
  list-style-type:none;
  display:table-cell;
  padding-left:9px;
  padding-bottom:5px;
  background-color: #EBEBEB;
}
* ul#progress li {
  list-style-type:none;
  list-style: none;
  display: inline-block;
  line-height: 20px; 
  padding-top: 5px;
} 
ul#progress li.selected {
  font-weight:bold;
  color: #FFFFFF;
  background-color:#FF8040!important;
} 
```

HTML：

```
<li id="li_pers" runat="server" style="width:176px"><span class="nav">1\. some text</span></li>
<li id="li_bew" runat="server" style="width:176px"><span class="nav">2\. more text</span></li>
<li id="li_anl" runat="server" style="width:176px"><span class="nav">3\. and more</span></li>
<li id="li_ueb" runat="server" style="width:262px"><span class="nav">4\. and somewhat more because of long words</span></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:00:16.230

这行得通吗？

这是我的[小提琴](http://jsfiddle.net/tracyfu/hHTSw/)

HTML：

```
<ul id="progress">
  <li id="li_pers" runat="server"><span class="nav">1\. some text</span></li>
  <li id="li_bew" runat="server"><span class="nav">2\. more text</span></li>
  <li id="li_anl" runat="server"><span class="nav">3\. and more</span></li>
  <li id="li_ueb" runat="server"><span class="nav">4\. and somewhat more because of long words</span></li>
</ul> 
```

CSS：

```
ul#progress {
  list-style: none;
  margin-bottom: 2px;
  padding: 0;
  display: table;
  float: left;
  width: 790px;
}

ul#progress li {
  display: table-cell;
  line-height: 20px; 
  padding: 5px 0 5px 9px;
  background-color: #EBEBEB;
  width: 176px;
}

ul#progress li#li_ueb {
  width: 262px;
}

ul#progress li.selected {
  font-weight: bold;
  color: #FFFFFF;
  background-color: #FF8040!important;
} 
```

# c# - 试图通过互操作使使用 C# 和 Excel 的用户更容易访问非常过时的 Baan 系统

> ID：12577517
> 
> 赞同：0
> 
> 时间：2012-09-25T06:45:39.383
> 
> 标签：c#, excel-interop, erp, obsolete

根据建议，此问题已修改为以下内容；

这里有没有人知道 Baan 作为一个系统，如果知道的话，从开发人员的角度来看，它与 Excel 的兼容性如何（如果有的话）？我需要从 Baan 提取报告以填充 Excel 工作簿，并且能够将某些数据部分放入其他工作簿中，而无需引入整个代码并对其进行筛选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:13:05.517

这实际上是 3 个独立的问题：

1.  [如何在 C# 中解析 BaaN 报告？](https://stackoverflow.com/questions/4971056/how-do-i-create-a-baan-interface-in-c)（不幸的是，您可能会遇到一些麻烦。）

2.  [如何在 C# 中读取 Excel 文件？](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)

3.  [如何在 C# 中生成 Excel 文件？](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:57:30.943

如果您正在将数据源中的拉数据查找到只是表格格式的 excel 中。所以你需要学习的是 excel 与 C# 的互操作，这很简单，我可以为你提供一些示例。一样。

[http://vscontrols.blogspot.com/2010/09/manipulating-excel-using-adonet.html](http://vscontrols.blogspot.com/2010/09/manipulating-excel-using-adonet.html)

如果您希望从数据源中提取复杂的数据和矩阵值，那么我建议您阅读有关 EXCEL DNA 的信息，它是一个能够广泛使用 Excel 的开源。

# php - 我需要将“函数”与“for循环”与php结合起来

> ID：12577518
> 
> 赞同：3
> 
> 时间：2012-09-25T06:45:52.403
> 
> 标签：php, function, loops, for-loop

我正在尝试制作一个提供如下输出的程序：

X

xx

xxx

xxxx

xxxxx

xxxx

xxx

xx

X

我有一个类似的程序是：

```
<?php
    $n = 4;                                     
    $R[] = '*';                                  
    $w = 1;                                     
        for( $c=1; $c<=$n; $c++ ){             
            $R[] = '*'.str_repeat( '*',$w );  
            $w = $w+1;                       
        }        
    print '<pre>'.implode( "\n",$R ).'</pre>';  
?> 
```

但我需要使用一个函数并创建另一个循环以获得更简单的代码。我还需要在第 5 行之后减少它。提前谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:54:53.163

鉴于问题描述，我只会使用递归，因为它是一种更优雅的方式。

```
function hump($n, $i = 1)
{
        echo str_repeat('*', $i), PHP_EOL;
        if ($i < $n) {
                hump($n, $i + 1);
                echo str_repeat('*', $i), PHP_EOL;
        }
}

hump(5); 
```

它在每次调用中打印一个级别，并调用自己打印下一个级别，直到它到达顶部；当堆栈展开时，它会再次打印相同的级别。

对于性能和/或内存优化，建议使用循环而不是递归。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:50:00.170

```
<?php
function drawPyramid($length) {
    for ($i = 1; $i <= $length; ++$i) {
        echo str_repeat("x", $i) . "\n";
    }
    for ($i = $length - 1; $i > 0; --$i) {
        echo str_repeat("x", $i) . "\n";
    }
}

drawPyramid(3);
echo "\n";
drawPyramid(5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T06:55:48.590

这是一个递归解决方案，完全摆脱了 for 循环：

```
function addLevel(&$array, $currentDepth, $maxDepth)
{
    $array[] = str_repeat('*', $currentDepth);
    if($currentDepth < $maxDepth)
    {
        addLevel($array, $currentDepth + 1, $maxDepth);
        $array[] = str_repeat('*', $currentDepth);
    }
}

$R= array();

addLevel($R, 1, 5);

print '<pre>'.implode( "\n",$R ).'</pre>'; 
```

It's not exactly neat, that the thing has 3 parameters, but without a class to do this, you would need to use global variables, which is even worse.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T07:21:41.537

Nice homework assignment. Nice seeing all the different examples.

How about a 1-liner?

```
for ($i=1; $i<$loops*2; $i++) echo str_repeat('*',($i > $loops ? ($loops * 2) - $i : $i)) . '<br>'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T16:46:48.230

**Examples**

```
echo "<pre>";
echo drawOutput(5, "x");
echo drawOutput(5, "x ");
echo drawOutput(5, "x ", " "); // left padding
echo drawOutput(5, "@-^-@ ", " "); // left padding 
```

**Output**

```
x
xx
xxx
xxxx
xxxxx                          <----------------- what you want 
xxxx
xxx
xx
x

x 
x x 
x x x 
x x x x 
x x x x x                      <----------------- Space it out
x x x x 
x x x 
x x 
x 

    x 
   x x 
  x x x 
 x x x x 
x x x x x                      <----------------- Add some padding
 x x x x 
  x x x 
   x x 
    x 

    @-^-@ 
   @-^-@ @-^-@ 
  @-^-@ @-^-@ @-^-@ 
 @-^-@ @-^-@ @-^-@ @-^-@ 
@-^-@ @-^-@ @-^-@ @-^-@ @-^-@ 
 @-^-@ @-^-@ @-^-@ @-^-@ 
  @-^-@ @-^-@ @-^-@ 
   @-^-@ @-^-@ 
    @-^-@ 
```

**Function Used**

```
function drawOutput($length, $str = "* ", $lpad = null) {
    $x = array();
    for($n = $i = $length; $i >= 0; $i --) {
        $x[] = ($lpad ? str_repeat($lpad, $i) : null) . str_repeat($str, $n - $i) . "\n";
    }
    return implode($x) . implode(array_slice(array_reverse($x), 1));
} 
```

# java - 在 Android 中初始化 VM (java.lang.StackOverflowError) 时发生错误

> ID：12577519
> 
> 赞同：1
> 
> 时间：2012-09-25T06:46:02.200
> 
> 标签：java, android, eclipse

今天突然开始遇到

```
Error occurred during initialization of VMjava/lang/NoClassDefFoundError: java/lang/ref/FinalReference 
```

在 Eclipse 靛蓝中。我跟着[here](http://code.google.com/p/android/issues/detail?id=345)，也尝试过[here](https://stackoverflow.com/questions/9455236/eclipse-error-noclassdeffounderror-java-lang-ref-finalreference)，现在我得到了：

```
Error occurred during initialization of VM java.lang.StackOverflowError 
```

我正在使用 Eclipse Java EE IDE 构建一个 Android 应用程序。

编辑：我不知道为什么会导致问题，但现在我可以通过运行运行配置-android 应用程序运行来运行我的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:55:11.057

由于 JVM，问题仍然存在。如果你会给出类似 java -version 的命令。它给出了同样的问题。

如果您想通过以下方式启动 eclipse.exe：

```
E:\softwaredownload\eclipse-jee-helios-SR2-win32\eclipse>eclipse -vm "c:\Program Files\Java\jdk1.7.0_03\jre\bin\javaw.exe 
```

# c# - 使用 C# .net 应用程序访问活动目录中的不同域在本地计算机上工作，但在 IIS 服务器中托管时不工作

> ID：12577523
> 
> 赞同：3
> 
> 时间：2012-09-25T06:46:15.753
> 
> 标签：c#, .net, active-directory

我正在使用 C# Web 应用程序在活动目录中搜索不同域中的用户。在实际场景中，我们有来自两个不同领域的员工，例如：印度、美国。

当应用程序托管在 IIS 服务器中时，我无法从美国域中检索用户。尝试连接到美国域时，出现以下错误：

```
> System.Runtime.InteropServices.COMException (0x8007203A): The server
> is not operational. at
> System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) at
> System.DirectoryServices.DirectoryEntry.Bind() at
> System.DirectoryServices.DirectoryEntry.get_AdsObject() at
> System.DirectoryServices.DirectorySearcher.FindAll(Boolean
> findMoreThanOne) at
> System.DirectoryServices.DirectorySearcher.FindAll() at
> NovellADTest.AD.btnSyncTest_OnClick(Object sender, EventArgs e) 
```

但是，如果我在本地计算机上运行该应用程序，它会运行并从美国域中获取用户，但是当托管在服务器中时这不起作用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:04:27.403

由于场景不同，可能会出现问题。尝试跟随。

1.  检查目录服务权限不足。
2.  可能是证书错误。

以下链接有一个解决方案，但不确定..它是否适合您..

[http://forums.asp.net/t/1096070.aspx/1](http://forums.asp.net/t/1096070.aspx/1)

# html - Cakephp 2.0 表单助手问题

> ID：12577524
> 
> 赞同：0
> 
> 时间：2012-09-25T06:46:19.013
> 
> 标签：html, forms, cakephp-2.0

我是 CakePHP 2.0 的新手。它与以前的版本相比有太多的变化。在 CakePHP 2.0 中实现基本功能时我遇到了很多问题。我在 CakePHP 1.3 和 2.0 中做了相同的代码，但输出不同，所以它给我带来了问题。

我创建了一个表格，如下所示：

```
<form name="User" method="post" action="http://192.168.1.24/project/api/documents/sub" ENCTYPE="multipart/form-data"> 
 <table>
  <tr><td><label>username:</label></td><td><input type="text" name="username"></td></tr>
  <tr><td><label>password:</label></td><td><input type="text" name="password"></td></tr>
  <tr><td><label>email:</label></td><td><input type="text" name="email"></td></tr>
  <tr><td><label>Image:</label></td><td><input type="file" name="image"></td></tr>
  <tr><td colspan="2" align="center"><input type="submit" name="submit" value="Submit" /> 
```

我在 CakePHP 1.3 和 2.0 中的两个应用程序中都使用了这个表单。CakePHP 1.3 的控制器代码是：

```
function api_sub()
{
  $this->layout = false;
  $this->data['Document'] = $this->params['form'];
  pr($this->data); die();
} 
```

上述代码的输出是：

```
Array
(
    [Document] => Array
        (
            [username] => mack
            [password] => meack
            [email] => mack@gmail.com
            [submit] => Submit
            [image] => Array
                (
                    [name] => 01manta.jpg
                    [type] => image/jpeg
                    [tmp_name] => C:\wamp\tmp\phpF586.tmp
                    [error] => 0
                    [size] => 636306
                )
        )
) 
```

CakePHP 2.0 中的控制器代码如下所示：

```
public function api_sub()
{
  //$this->layout = false;
  $this->request->data['Document']= $this->request->data;
  pr($this->request->data); die();
} 
```

上述代码的输出如下图所示：

```
Array
(
    [username] => mack
    [password] => meack
    [email] => mack@gmail.com
    [submit] => Submit
    [User] => Array
        (
            [username] => mack
            [password] => meack
            [email] => mack@gmail.com
            [submit] => Submit
        )
) 
```

现在的问题是，在 CakePHP 2.0 中，输出中缺少图像数组。谁能告诉我如何在 CakePHP 2.0 中获取该图像数组？我必须对编码进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:38:53.673

我可能是因为您没有使用[FormHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)。如果您使用所述助手，数据可能会正确填充到`$this->data`or中`$this->request->data`。不过，我在文档中找不到任何明确的信息。

在任何情况下，通用表单数据始终存在于 中`$this->request->params['form']`，因此您的表单的文件数据将位于`$this->request->params['form']['file']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:21:26.370

您应该执行以下操作，而不是为表单编写 HTML 代码：

```
echo $this->Form->create('ModelName');
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->input('email');
echo $this->Form->input('image');
echo $this->Form->end('Submit!'); 
```

请注意，在此示例中，假设您将在模型中验证图像，并且它可能会存储在您的数据库中。如果您不希望将图像存储在数据库中，您可以将最后一个输入替换为：

```
echo $this->Form->input('image', array('type' => 'file')); 
```

所有这些都可以通过以下方式在您的控制器中访问：

```
$this->request->data 
```

这将是一个如下所示的数组：

```
array(
    'ModelName' => array(
        'username' => 'whatever_the_user_wrote',
        'password'=> '********',
        'email' => 'foo@bar.baz',
        'image' => the image
    )
) 
```

*   本书链接：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)
*   API 链接： http: [//api.cakephp.org/class/form-helper](http://api.cakephp.org/class/form-helper)

# iphone - 如何使用 CATransition 从右向左移动屏幕的 uiview 部分

> ID：12577525
> 
> 赞同：1
> 
> 时间：2012-09-25T06:46:25.063
> 
> 标签：iphone

我正在开发一个应用程序。我想使用下面的代码将 uiview 从右向左移动。

```
-(void)centerAnimation1:(id)sender
{
theview=qstnview;
CATransition *animation = [CATransition animation];
animation.delegate = self;
[animation setDuration:0.4];
[animation setType:kCATransitionMoveIn];

if(rhtolft)
{
    [animation setSubtype:kCATransitionFromLeft];
}
else 
{
    [animation setSubtype:kCATransitionFromRight];
}
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
//[animation setanima]
[[theWindow layer] addAnimation:animation forKey:@"SwitchToView1"];

[[theview layer] addAnimation:animation forKey:@"SwitchToView1"];
[qstnview removeFromSuperview];
}

- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag{
    if(animate)
     {
    CATransition *animation = [CATransition animation];
    animation.delegate = self;
    [animation setDuration:0.4];
    [animation setType:kCATransitionMoveIn];
    if(rhtolft)
    {
        [animation setSubtype:kCATransitionFromLeft];
        rhtolft=NO;
    }
    else 
    {
        [animation setSubtype:kCATransitionFromRight];
    }
    //[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    //[animation setanima]

         [[theview layer] addAnimation:animation forKey:@"SwitchToView1"];

         [self.view addSubview:qstnview];

}
 } 
```

但是这个正在将视图从右侧最后一个边缘移动到左侧。但我只需要在框架大小内移动。我不需要从右侧边缘开始。所以请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:59:14.067

编辑：

```
 [UIView animateWithDuration:0.33f 
                  delay:0.0f 
                options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
             animations:^{
                 [theView setFrame:newFrame]; //set new frame for view where x =200;
             }
             completion:^(BOOL finished){
                 // do whatever post processing you want (such as resetting what is "current" and what is "next")
             }]; 
```

像这样使用 CATransition 从右到左的屏幕

```
CATransition *animation = [CATransition animation];
[animation setDuration:0.3];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromRight];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[[theView layer] addAnimation:animation forKey:@"rightToLeftAnimation"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:03:00.680

使用此代码更改带有动画的图像：

```
CATransition *transition = [CATransition animation];
transition.duration = 1.0f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionMoveIn;
transition.subtype=kCATransitionFromLeft;
[yourImageViewName.layer addAnimation:transition forKey:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:01:24.570

我不认为你需要潜入CA来做这种事情。它可以使用 UIView 动画来完成。这里[http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)是一个很好的 UIView 动画教程。

# eclipse - 为什么我的 UiProperty 在 GWT Designer 中不再可编辑？

> ID：12577530
> 
> 赞同：4
> 
> 时间：2012-09-25T06:46:36.170
> 
> 标签：eclipse, gwt, gwt-designer

由于某种原因，我不再能够在 GWT 设计器中编辑 UiField 属性。该字段的行为就像它的只读一样。选择该字段后，整个内容都会突出显示，而不仅仅是文本。事实上，所有的属性字段都是这样做的，只是 UiField 是唯一没有编辑窗口的字段。

最近对我的环境所做的更改是升级到 Mountain Lion。

环境：
Eclipse - Helios Rel 2
Mac OSX - Mountain Lion
Java 1.6.0

* * *

更新：2012年 8 月 27 日
我创建了一个新的 GWT 项目，但仍然无法在设计器中编辑属性。我也安装了 Eclipse Juno，还是一样。在另一台机器上，验证 Lion 上没有问题。

所以我现在只能假设这与山狮有某种关系。

有人在 Mountain Lion 上进行 GWT 开发吗？

* * *

更新：2012 年 8月 29 日
这显然是 Eclipse 和 Mountain Lion 的一个已识别问题。
[http://www.eclipse.org/forums/index.php/m/911789/](http://www.eclipse.org/forums/index.php/m/911789/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T20:34:17.220

使用 Juno 的 ML 也存在同样的问题，目前唯一的解决方法是手动编辑。

# .net - 来自 Stream 的 Encoding.GetString

> ID：12577531
> 
> 赞同：1
> 
> 时间：2012-09-25T06:46:42.290
> 
> 标签：.net

我有一个将流的一部分转换为字符串的函数：

```
private string GetString(Stream stream, int start, int length) 
{
    var buffer = new byte[length];
    stream.Read(buffer, start, length);
    return Encoding.UTF8.GetString(buffer, start, length);
} 
```

我正在使用相当大的流，我不喜欢复制字节（通过将流的一部分转换为字节 []）只是为了能够调用`Encoding.GetString`. 有没有办法从流中获取一些编码的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:48:30.353

目前尚不清楚您要做什么-而且您在`Stream.Read`不使用返回值的情况下进行调用的事实令人震惊-但也许您正在寻找[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)？它[`TextReader`](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)是由 a 支持的 a `Stream`，因此您可以从中读取字符而不是二进制数据。如果您正在从完全是文本数据的流中读取，这是合适的（至少从您传递给构造函数时的当前位置开始；它之前可能有二进制数据）。

如果您*真的*想从流的一部分中读取数据，那么您的代码无论如何都需要更改 -`Stream.Read`就第二个参数而言，它不会按照您认为的那样做，它是*缓冲区*中的位置，而不是内部的位置流。您需要使用`Stream.Position`或`Stream.Seek()`到达流中的正确位置。

# button - 使用 JWebUnit 测试按钮状态

> ID：12577533
> 
> 赞同：1
> 
> 时间：2012-09-25T06:46:58.903
> 
> 标签：button, web-testing, ui-testing, jwebunit

是否可以使用 JWebUnit 在页面中测试按钮是否启用或禁用（即使在几个表单操作后使用 java 脚本启用/禁用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:45:27.553

如果您可以通过 xpath 定位器策略获取元素（按钮），那么您可以使用“getElementAttributeByXPath(String xpath, String attribute)” 这将允许您检查将启用/禁用的对象的属性

# html - 为 Safari 阅读器构建 HTML 文档

> ID：12577534
> 
> 赞同：1
> 
> 时间：2012-09-25T06:47:08.900
> 
> 标签：html, safari, structure

我在为 Safari 阅读器构建 HTML 文档时遇到了一些麻烦。具体来说，Reader 将我的 H2 标签置于 H1 之上，我不知道为什么。

文档的结构基本上是这样的：

```
<h1>
<p>
<p>
<h2>
<h3>... 
```

它正在行动中：http: [//www.dontwakemeup.com/2013/who.html](http://www.dontwakemeup.com/2013/who.html)

还有很多清理工作要做，但我认为让它在 Reader 中工作会相对简单，而这个真的让我很烦。有任何想法吗？

# javascript - JavaScript 中用户定义对象属性的断点

> ID：12577535
> 
> 赞同：0
> 
> 时间：2012-09-25T06:47:12.533
> 
> 标签：javascript, json, debugging, firebug, google-chrome-devtools

javascript中用户定义对象属性的断点

你好

是否有任何 JavaScript 调试工具或插件可以帮助在用户定义的对象属性上放置断点。

例如：

我有一个 JavaScript 对象文字

`var TextBox = { color:"gray", size:"100px", border:true }`

这是我进行修改的代码

`function foo(){ TextBox["color"] = "blue"; }`

我正在寻找在**TextBox.color**上放置一个断点，以便在修改属性时我可以找到谁在进行修改或哪个函数进行了更改。

它也应该打破 `TextBox.color = null; or delete TextBox.color;`

这个功能在 firebug 或 chrome 开发者工具中是否已经可用？

我已经看到了 html 元素删除、属性修改的断点，但没有看到**用户定义的对象属性**的断点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:56:05.147

看看一些浏览器支持的魔法 getter 和 setter： [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)

您应该能够定义一个设置器并在其中放置一个断点。

出于兼容性原因，最好将这些代码保留在生产代码之外，但它们是调试某些问题的唯一实用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T22:18:21.090

使用这样的东西：

```
(function() {
    var obj=TextBox; var realValue = obj.color; 
    Object.defineProperty(obj, 'color', { 
        set: function(newValue) { debugger; realValue = newValue; },
        get: function() { debugger; return realValue; } 
    });
})(); 
```

只需在浏览器控制台中运行它。

# html - 你怎么能用css在html中制作一个形状

> ID：12577539
> 
> 赞同：2
> 
> 时间：2012-09-25T06:47:26.940
> 
> 标签：html, css

如何使用单个 HTML 元素制作形状？只要至少有一个浏览器支持，任何 CSS 技术都可以使用。

形状的示例是圆形、三角形、六角形等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:57:20.170

[http://css3shapes.com/](http://css3shapes.com/)有关于如何在 CSS 中制作大量形状的说明。

但说真的，在浏览器中绘制形状有比使用 CSS 更好的解决方案。

上面站点中显示的大多数形状仅适用于现代浏览器，因为它们使用了在 IE8 等浏览器中不可用的 CSS3 技术。（因此，如果您想在旧版本的 IE 中执行此操作，答案就是忘记它）。

但是支持这些形状的浏览器也都支持其他技术，如 SVG，它允许您绘制任何您喜欢的形状，而不受围绕盒子形状工作的限制。

所以简短的回答是肯定的，它可以做到，但 SVG 会给你更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:19:02.623

我用一些纯 html/css 形状制作了[这个小提琴](http://jsfiddle.net/jhs4d/)
： - 使用跨度边框的 2 个三角形
- 借助边界半径的圆形

免责声明：我的灵感来自旧的谷歌应用程序/菜单栏。

来源：

html

```
An CSS triangle pointing down:
<span class="delta_down"></span><br>
An CSS triangle pointing up:
<span class="delta_up"></span><br>
Circle:
<span class="circle"></span> 
```

css

```
span.delta_down {
        border-color: #C0C0C0 transparent transparent;
        border-style: solid dashed dashed;
        border-width: 5px 5px 0;
        display: inline-block;
        font-size: 0;
        height: 0;
        line-height: 0;
        padding-top: 1px;
        position: relative;
        top: -1px;
        width: 0;
}

span.delta_up {
        border-color: transparent transparent #C0C0C0;
        border-style: dashed dashed solid;
        border-width: 0 5px 5px;
        display: inline-block;
        font-size: 0;
        height: 0;
        line-height: 0;
        padding-top: 1px;
        position: relative;
        top: -1px;
        width: 0;
}

span.circle {
        border-radius: 50%;
        width: 10px;
        height: 10px;
        display: inline-block;
        background-color: #C0C0C0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:54:51.687

这对于纯 HTML 和 CSS 是不可能的。但是您可以使用画布元素并使用 JavaScript 绘制所有形状。

[本基础教程](http://dev.opera.com/articles/view/html-5-canvas-the-basics/)可能会对您有所帮助。

# android - SDK 和 AVD 行为怪异

> ID：12577541
> 
> 赞同：1
> 
> 时间：2012-09-25T06:47:33.063
> 
> 标签：android

我对 android sdk 有一个奇怪的问题。我尝试按照三星开发者网站中的说明安装 samsung_ace 皮肤，因此我只是将所有内容复制到 sdk 附加组件文件夹中，但无法制作任何三星 ace 模拟器。然后我复制到 -android-sdk\platforms\android-8\skins 文件夹，但它说 -Skin 'Galaxy_ace' 不存在，AVD 文件夹中缺少皮肤路径。

我也对 Galaxy_S2 进行了同样的尝试，但它甚至没有出现在 AVD 管理器的目标/皮肤下拉列表中。

请帮忙。我只想为最新的三星 TAB 和 Galaxy_S2 制作一个模拟器。

# css - 在不使用通用选择器的情况下选择元素的所有直接后代

> ID：12577544
> 
> 赞同：0
> 
> 时间：2012-09-25T06:48:02.710
> 
> 标签：css, css-selectors

我目前有这样的事情：

```
article > * { max-width: 800px; } 
```

但是人们抱怨使用通用选择器。除了手动输入每个可能的标签名称（我一定会错过），不使用通用选择器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:52:19.370

如果您可以固定文章的宽度，那么如果您不将它们显式设置为更大的尺寸，则不会有很多元素可能溢出。所以如果你设置

```
article, article div, article img {
    max-width: 800px;
} 
```

你可能没事。如果您发现缺少一个，请添加一个。

# javascript - 使用javascript从gridview中的数据匹配文本框值

> ID：12577546
> 
> 赞同：0
> 
> 时间：2012-09-25T06:48:06.607
> 
> 标签：javascript, asp.net

我想将我的文本框中写入的值与 gridview 的现有值相匹配。我已经使用以下功能在服务器端完成了此操作

```
protected void isRecordAlreadyExist(TextBox txt_Value, int res)
{
    ds_main = new DataSet();
    paramArray = new string[3, 2];
    paramArray[0, 0] = "@KeyWinCountNumber";
    paramArray[0, 1] = txtkeyWinCount.Text.Trim();
    paramArray[1, 0] = "@ContractNumber";
    paramArray[1, 1] = txtContractNum.Text.Trim();
    paramArray[2, 0] = "`";
    obj = new DalLib();
    ds_main = obj.getDataSet("sp_tbl_Contract_MatchValues", paramArray);
    gvContract.DataSource = ds_main.Tables[res];
    if (ds_main.Tables[res].Rows.Count > 0)
    {
        mtvResult.ActiveViewIndex = 3;
        btnSubmit.Enabled = false;
    }
    else
    {
        btnSubmit.Enabled = true;
    }
}

protected void txtkeyWinCount_TextChanged(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(txtkeyWinCount.Text))
    {
        isRecordAlreadyExist(txtkeyWinCount, 0);
    }
    else
    {
        mtvResult.ActiveViewIndex = -1;
    }
} 
```

但我也想使用javascript从客户端的gridview数据中匹配文本框的值。我怎样才能做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:25:48.140

你可以写这样的东西，在网格中搜索 TextBox 值的函数之后，如果找到它返回 true。

您可以在文本框的 onchange javascript 事件上调用此函数

```
function FindTextBoxValueInGrid
    {
    // Declare the flag
    var flag = false;
    // Get the text we want to compare in the table
    var checkText = document.getElementById('txtkeyWinCount').value;

    // Get the grid
    var gvContract= document.getElementById('gvContract');

    // Loop through each row
    // Starts at row 1 because I assume row 0 is a header row
    for (i=1;i<=gvContract.rows.length;i++)
    {
        var currentRow = gvContract.rows[i];

        if (currentRow.cells[0].value == checkText)
        {
            flag = true;
        }
    }
    return flag;
} 
```

# asp.net - 具有验证和转换的属性

> ID：12577550
> 
> 赞同：0
> 
> 时间：2012-09-25T06:48:37.407
> 
> 标签：asp.net, vb.net, oop

这可能是一个基本问题，但我想知道最佳实践。我有一个公共财产，它的价值是一个整数。如果该值意外地是一个字符串，我是否可以在我的属性中进行即时验证和转换，所以输出变成一个整数，而我的脚本不会失败？还是最好让舒尔在将其传递给属性之前使用正确的数据类型进行操作？

这是我的财产：

```
Public Property Quantity() As Integer
    Get
        Return m_Quantity
    End Get
    Set(value As Integer)
        m_Quantity = value
    End Set
End Property 
```

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:50:19.403

> 如果该值偶然是一个字符串，

这种意外不会在强类型语言中发生，因为编译器会告诉您不能将字符串值分配给整数属性。[实际上，您可以通过使用Auto-Implemented Property](http://msdn.microsoft.com/en-us/library/dd293589.aspx)来稍微缩短代码：

```
Property Quantity As Integer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:51:55.917

该属性不能是字符串。代码将无法编译，或者如果您没有打开 Option Strict/Infer（您确实应该！）运行时转换为 Integer 将失败，从而导致异常。

# java - 删除时 SessionFactoryImpl#getReturnTypes 中的空指针异常

> ID：12577554
> 
> 赞同：1
> 
> 时间：2012-09-25T06:48:53.820
> 
> 标签：java, database, hibernate, nullpointerexception

这一行抛出了一个植根于`SessionFactoryImpl#getReturnTypes`方法的 NPE：

```
 Query q = em.createQuery("DELETE FROM Table t WHERE row = :row"), Table.class); 
```

更具体地说，返回 null 值的方法是`HQLQueryPlan#getReturnMetadata()`，这就是该指令`SessionFactoryImpl#getReturnTypes`失败的原因：

```
return queryPlanCache.getHQLQueryPlan( queryString, false, CollectionHelper.EMPTY_MAP ).getReturnMetadata().getReturnTypes(); 
```

出于某种原因，该表上的选择工作正常，我记得在同一张表上也看到了删除工作，但我不知道哪里可能丢失或更改了某些内容。我记得做的最后一件事是从表中删除所有行，但我认为这与问题无关。

知道可能出了什么问题吗？

这个确实有效：

```
Query q = em.createNativeQuery("DELETE FROM Table t WHERE row = ?"); 
```

但我仍然不知道为什么另一个没有，正如我所说，选择确实可以正常工作。

这是堆栈跟踪：

```
java.lang.NullPointerException
at org.hibernate.impl.SessionFactoryImpl.getReturnTypes(SessionFactoryImpl.java:812)
at org.hibernate.impl.AbstractQueryImpl.getReturnTypes(AbstractQueryImpl.java:193)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:278)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy87.createQuery(Unknown Source)
at com.xyz.persistence.dao.myDAO.deleteStuff(myDao.java:652) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T02:02:18.503

因为您的 DELETE 查询不会返回“类型”，所以查询不会接受 resultClass 参数 Table.class

它是一个古怪的 api

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:38:56.077

检查您的域对象`Table`。Hibernate 无法恢复该对象的元数据，因此可能存在问题。如果您使用 JPA，请检查您的`persistence.xml`文件并确保包含您的域对象。

# frameworks - “框架”实际上是什么意思？

> ID：12577555
> 
> 赞同：1
> 
> 时间：2012-09-25T06:48:55.457
> 
> 标签：frameworks

谁能用简单的话告诉我，当我们说*“我想为 blah..blah 构建一个框架”时是什么意思*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:52:32.867

来自维基百科上的[软件框架](http://en.wikipedia.org/wiki/Software_framework)：

> 在计算机编程中，软件框架是一种抽象，其中提供通用功能的软件可以由用户代码有选择地更改，从而提供特定于应用程序的软件。**软件框架是一个通用的、可重用的软件平台，用于开发应用程序、产品和解决方案。**软件框架包括支持程序、编译器、代码库、应用程序编程接口 (API) 和工具集，这些工具集汇集了所有不同的组件以支持项目或解决方案的开发。

谢谢

# html - 在基于 Web 的 HTML 编辑器、Dreamweaver 和其他编辑器中围绕 div 显示轮廓

> ID：12577556
> 
> 赞同：0
> 
> 时间：2012-09-25T06:48:55.800
> 
> 标签：html, css, contenteditable

我正在编写一个简单的基于 contenteditable 的 HTML 编辑器，它允许用户编辑一个由他们自己的 CSS 设置样式的页面（他们可以实时编辑），还可以做一些基本的事情，比如插入新标签、应用类等。

我想要的一个功能是切换 div 周围虚线边框的显示选项，就像您通常在所见即所得 HTML 编辑器（如 Dreamweaver、Expression Web 等）中找到的那样。（这有助于用户看到她的 div，即使它们没有可见的边框。）

有没有办法做到这一点？一些想法：

1.  我不能简单地修改实际/现有 div 上的 CSS，因为它们可能已经定义了自己的边框，我不应该用点来消除它们。理想情况下，我可以在现有边界*周围*显示一个边界，这就是前面提到的商业编辑器中的内容。即使我退回到实际在没有现有边界的元素上设置边界，尤其是要弄清楚哪些没有边界可能很困难。`:hover`面对动态改变计算样式的事情。

2.  我可以将这些 div 包装在新的 div 中，这些 div 又具有虚线边框。棘手的部分是处理他们的 CSS，例如：

    *   包装器的样式必须与其子级相似，例如，一个 div`width:50px`必须有一个包装器`width:50px`（大致），所以我要么需要不断轮询（因为没有办法通知间接样式更改，例如在类) 用于更改计算样式（完全不可扩展），或者实现我自己的 CSS 引擎，该引擎运行并确定每次用户实时编辑他们的 CSS 时发生了什么变化。

    *   用我自己的 div 污染 DOM 是侵入性的，并且会干扰以下规则：

        ```
        /* these may or may not be divs */
        .a > .b > .c { ... } 
        ```

        或者：

        ```
        /* if this is wrapped, then they'll all be :first-child */
        .foo:first-child { ... } 
        ```

        也许：

        ```
        /* immediate children of my wrappers would inherit the dotted borders */
        .foo { border: inherit; } 
        ```

        也许有一种方法可以自动稳健地重写这些规则——以最后一个例子为例：

        ```
        :not(.my-dotted-border) > .foo { border: inherit; } 
        ```

        但即使理论上可能，也有很多情况需要担心，而且会很麻烦。

    *   最后，也许有一种方法可以折叠边距，即使是虚线边框，但我不知道。

3.  另一个想法是在顶部覆盖边框（根据底层元素的尺寸/偏移量绝对使用 JS 定位），但这对于具有特定 z-index 的重叠元素来说很难看，而且我需要再次监视所有元素用于样式更改。除了现在仅仅监视明确指定的样式的变化是不够的，因为我需要对甚至对偏移和尺寸的变化做出反应（例如，如果用户键入一些文本，它可能会按下它下面的所有元素，所以我必须通过更新叠加层对此做出反应）。

一个相关的问题是[查看页面大纲](https://stackoverflow.com/questions/4097104/see-the-page-outlines)，但这是从想要查看大纲的用户的角度来看的 - 我从基于 Web 的编辑器实现的角度询问如何提供这些大纲。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:51:44.120

您可以使用`outline`和`outline-offset`CSS 属性来设置可编辑 div 的轮廓样式，因为它们不会覆盖任何现有的边框（但是，它们会覆盖任何现有的轮廓，如果有的话）。

查看此示例以了解如何实现它：http: [//jsfiddle.net/EFJ6B/](http://jsfiddle.net/EFJ6B/)

# css - 如何通过css选择器找到第一个非空的？

> ID：12577559
> 
> 赞同：3
> 
> 时间：2012-09-25T06:49:11.617
> 
> 标签：css, selector

如何仅使用 css 选择器找到第一个非空子元素？有没有人可以帮助我？非常感谢！！！

比如下图：

```
<ul><li></li>...<li><span>o haha</span></li>...<li></li></ul> 
```

如何通过 css 选择器获取第一个非空 li 元素

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:53:33.453

这需要两个选择器才能使其工作：

```
li:not(:empty) {
   /* First non-empty <li> styles */
}

li,
li:not(:empty) ~ li {
   /* All other <li> styles */
} 
```

例子：

[http://jsfiddle.net/tr958/2/](http://jsfiddle.net/tr958/2/)

# image - 在 j2me 移动应用程序中加载图像需要很长时间

> ID：12577562
> 
> 赞同：1
> 
> 时间：2012-09-25T06:49:30.213
> 
> 标签：image, java-me, loading

我使用下面的代码从服务器获取图像。我在服务器上放置了 60 张不同的图像。我有所有这些图片的网址。通过使用 while 循环，我得到了所有这些图像，但是从服务器加载图像需要花费很多时间。

我该怎么做才能尽快获得这些图像？

```
 public Image getImagefromURL(String imageURL) {
    DataInputStream is = null;
    StringBuffer sb = new StringBuffer();
    Image img = null;
    try {
        HttpConnection c = (HttpConnection) Connector.open(imageURL);
        int len = (int) c.getLength();

        if (len > 0) {
            is = c.openDataInputStream();
            byte[] data = new byte[len];
            is.readFully(data);
            img = Image.createImage(data, 0, len);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return img;
} 
```

还有一件事是，当我获取第一张图片时，应用程序正在向我确认“应用程序想要使用通话时间连接到 [图像位置的 URL]。使用通话时间可以吗？” 在这里我想隐藏我的图像位置路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:13:02.380

图像越大，加载它所需的时间就越长。确保您的 PNG 图像使用工具进行压缩，例如[PNGGauntlet](http://pnggauntlet.com/)。

您还可以使用 RMS 在应用程序端添加本地缓存。

最后一个提示......你不应该依赖`HttpConnection.getLength`，即使有数据要读取，它也可能为零。

# boost-python - import() 和 exec_file() 返回的对象所需的生命周期是多少？

> ID：12577563
> 
> 赞同：0
> 
> 时间：2012-09-25T06:49:34.300
> 
> 标签：boost-python

以下是此示例的精简形式：http: [//www.boost.org/doc/libs/1_51_0/libs/python/doc/v2/exec.html#examples](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/v2/exec.html#examples)

从 C++ 调用的 Python 函数，存储在文件*script.py*中：

```
def greet():
   return 'Hello from Python!' 
```

执行 Python 函数的 C++ 代码：

```
#include <iostream>
#include <string>
#include <boost/python.hpp>

using namespace boost::python;

void greet()
{ 
  object main = import("__main__");
  object global(main.attr("__dict__"));
  object result = exec_file("script.py", global, global);
  object greet = global["greet"];
  std::string message = extract<std::string>(greet());
  std::cout << message << std::endl;
} 
```

我的问题是：**我是否需要保持*main*、*global*和*result*对象活着才能调用*greet*？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:35:05.927

不，你没有。需要保持活力的一切都通过`greet`对象持有的引用保持活力，您不需要在自己周围持有对象。

# android - 如何防止Android中的背景图像变形？

> ID：12577565
> 
> 赞同：0
> 
> 时间：2012-09-25T06:49:43.320
> 
> 标签：android

我有一个非常适合我的 S3 的 1280 X 720 的背景图像。
但是，如果我想适配其他设备，该怎么做呢？
例如，如果一台设备是 800 X 600，如果我将图像从 1280 X 720 缩放到 800 X 600，图像会有点变形。
另外，我希望图像适合全屏尺寸。
有什么好主意吗？
经过研究，我知道我应该准备不同分辨率的图像，但我应该准备哪些分辨率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:14:00.087

如果您没有可用作 9-patch 的图像，那么我建议如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    <ImageView 
            android:src="@drawable/backgroundimage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"/>
</RelativeLayout> 
```

此解决方案将为您提供覆盖整个屏幕的图像。图像将被均匀拉伸，但由于使用 centerCrop，某些部分会被剪掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:00:43.303

您可以使用 9patch 图形。在您的 Android/tools 目录中找到 draw9patch.bat。您通过此实用程序放置您的 PNG 文件，并标记可以拉伸以适合显示的图形区域。

# python - 如何使用 django 正确显示用户生成的图像？

> ID：12577568
> 
> 赞同：1
> 
> 时间：2012-09-25T06:49:51.893
> 
> 标签：python, django, settings, models, imagefield

我正在尝试上传用户生成的图像，然后显示在我的 django web 应用程序中。图片正在上传到服务器，但我无法显示它。

# 模型.py

```
image = models.ImageField(blank=True, null=True, max_length=255, upload_to="images/") 
```

# 设置.py

```
MEDIA_ROOT = '/home/user/webapps/static/'
MEDIA_URL = 'http://user.webfactional.com/static/' 
```

例如，假设我上传了名为 Finland.gif 的文件。我可以看到上传的文件。但是，当我查看源代码时，我将图像的源代码视为“www.foo.com/accounts/profile/images/Finland.gif”，而不是应该是“http://user.webfactional”的静态图像 URL .com/static/images/Finland.gif”。关于我应该如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:19:07.777

`userprofile.image.url`为您提供图片的完整网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:04:15.943

刚刚解决了...我需要包括：

```
http://user.webfactional.com/static/{{userprofile.image}} 
```

# jquery - 来自变量的 jQuery 选项键

> ID：12577569
> 
> 赞同：0
> 
> 时间：2012-09-25T06:49:54.687
> 
> 标签：jquery, variables, key, tablesorter

我正在使用[TableSorter](http://tablesorter.com/docs/example-options-headers.html)，需要禁用某些列的排序。

**我可以添加选项**

在我的情况下，我需要从变量中添加下面的列号 1 和 2，就像我对`my_number`. 1 和 2 有效，但无效`my_number`（设置为 3）。

```
$(document).ready(function() { 
    var my_number = 3;
    $("table").tablesorter({
        headers: { 
            1: { 
                sorter: false 
            }, 
            2: { 
                sorter: false 
            },
            my_number: {
                sorter: false
            },
        } 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:40:20.267

您不能将变量用作 JSON 中的键。

尝试这样的事情：

```
headers[my_number] = { sorter: false } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:10:46.663

@koskoz 给了你正确的答案，所以请给他信用。我想向您展示如何使用它的完整示例：

```
$(document).ready(function() {

    var my_headers = {
        1: { sorter: false },
        2: { sorter: false }
    },
    my_number = 3;

    my_headers[my_number] = { sorter : false };

    $("table").tablesorter({
        headers: my_headers
    });

}); 
```

并与您分享替代方案。我已经派生了一个[tablesorter 的副本，](http://mottie.github.com/tablesorter/docs/index.html)它允许您在标题中添加一个类名，例如`sorter-false`禁用该列的排序。看看[这个演示](http://mottie.github.com/tablesorter/docs/example-parsers-class-name.html)

# c++ - 使用 operator() 对 std::set 进行排序以对插入进行排序

> ID：12577571
> 
> 赞同：0
> 
> 时间：2012-09-25T06:49:56.533
> 
> 标签：c++, sorting

我将在这之后继续这篇文章，[**我们**](https://stackoverflow.com/questions/12576763/how-to-sort-a-stdset-with-const-getters) 有一个课程：

```
class LaneConnector {
public:

    const Lane* getLaneFrom() const {
        return From;
    }
    const Lane* getLaneTo() const {
        return To;
    }

private:

    Lane* From;
    Lane* To;
} 
```

和一个比较为的函子：

```
struct MyLaneConectorSorter {
  bool operator() (const LaneConnector* rhs, const LaneConnector* lhs) const
  {
    // you may want to put some null pointer checks in here
    const Lane* a = lhs->getLaneFrom();
    const Lane* b = rhs->getLaneFrom();
    return a->getLaneID() < b->getLaneID();
  }
}; 
```

最后是源和目标集：

```
const std::set<LaneConnector*> src = ..... ;

const std::set<LaneConnector*, MyLaneConectorSorter> dest(src.begin(), src.end(), MyLaneConectorSorter()); 
```

dest 集的大小将为 1，而 src 有更多（在我的情况下为 14）

我可能做错了什么？我重视你的善意评论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:46:29.093

`std::set`***根据key***跟踪元素。在您的*比较器*中，您有`return a->getLaneID() < b->getLaneID();`. 从而`Lane ID`隐含地成为***关键***。既然 if`a`和`b`have 相同`LaneID`，那么两者`MyLaneConectorSorter(a, b)` *和* `MyLaneConectorSorter(b, a)`都返回`false`。

因此，您`set`不能包含多个`LaneConnectior`相同的`LaneID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:22:34.833

有一种非常简单的方法可以在他们有机会暴露自己之前以这种方式发现问题。编写单元测试！

我的猜测是你所有的 LaneConnector 都从同一行开始。因此，GetLaneFrom()->GetLaneID() 在所有 LaneConnector 上产生相同的结果

# embedded - 哪个更好，gcc 或 armcc 用于 NEON 优化？

> ID：12577572
> 
> 赞同：7
> 
> 时间：2012-09-25T06:49:57.140
> 
> 标签：embedded, arm, simd, neon, cortex-a8

在此处参考@auselen 的答案：[使用 ARM NEON 内在函数添加 alpha 和 permute](https://stackoverflow.com/questions/11890997/using-arm-neon-intrinsics-to-add-alpha-and-permute)，看起来 armcc 编译器比 gcc 编译器的 NEON 优化要好得多。这是真的吗？我还没有真正尝试过 armcc 编译器。但是我使用带有 -O3 优化标志的 gcc 编译器得到了相当优化的代码。但是现在我想知道armcc是否真的那么好？那么，考虑到所有因素，这两个编译器哪个更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T20:28:47.607

编译器也是软件，它们往往会随着时间的推移而改进。任何像 armcc 这样的通用声明都比 NEON 上的 GCC（或者更好地称为矢量化）不能永远成立，因为一个开发人员小组可以通过足够的关注来缩小差距。然而，最初期望硬件公司开发的编译器具有优越性是合乎逻辑的，因为他们需要展示/营销这些功能。

我最近在 Stack Overflow 上看到的一个例子是关于[分支预测的答案](https://stackoverflow.com/a/11227902/1163019)。引用更新部分的最后一行*“这表明即使是成熟的现代编译器在优化代码的能力上也会有很大差异......”*。

我是 GCC 的忠实拥护者，但我不会将其生成的代码质量与 Intel 或 ARM 的编译器打赌。我希望任何主流商业编译器生成的代码至少与 GCC 一样好。

这个问题的一个经验答案可能是使用[hilbert-space 的 neon 优化示例](http://hilbert-space.de/?p=22)，看看不同的编译器如何优化它。

```
void neon_convert (uint8_t * __restrict dest, uint8_t * __restrict src, int n)
{
  int i;
  uint8x8_t rfac = vdup_n_u8 (77);
  uint8x8_t gfac = vdup_n_u8 (151);
  uint8x8_t bfac = vdup_n_u8 (28);
  n/=8;

  for (i=0; i<n; i++)
  {
    uint16x8_t  temp;
    uint8x8x3_t rgb  = vld3_u8 (src);
    uint8x8_t result;

    temp = vmull_u8 (rgb.val[0],      rfac);
    temp = vmlal_u8 (temp,rgb.val[1], gfac);
    temp = vmlal_u8 (temp,rgb.val[2], bfac);

    result = vshrn_n_u16 (temp, 8);
    vst1_u8 (dest, result);
    src  += 8*3;
    dest += 8;
  }
} 
```

这是 armcc 5.01

```
 20:   f421140d    vld3.8  {d1-d3}, [r1]!
  24:   e2822001    add r2, r2, #1
  28:   f3810c04    vmull.u8    q0, d1, d4
  2c:   f3820805    vmlal.u8    q0, d2, d5
  30:   f3830806    vmlal.u8    q0, d3, d6
  34:   f2880810    vshrn.i16   d0, q0, #8
  38:   f400070d    vst1.8  {d0}, [r0]!
  3c:   e1520003    cmp r2, r3
  40:   bafffff6    blt 20 <neon_convert+0x20> 
```

这是 GCC 4.4.3-4.7.1

```
 1e:   f961 040d   vld3.8  {d16-d18}, [r1]!
  22:   3301        adds    r3, #1
  24:   4293        cmp r3, r2
  26:   ffc0 4ca3   vmull.u8    q10, d16, d19
  2a:   ffc1 48a6   vmlal.u8    q10, d17, d22
  2e:   ffc2 48a7   vmlal.u8    q10, d18, d23
  32:   efc8 4834   vshrn.i16   d20, q10, #8
  36:   f940 470d   vst1.8  {d20}, [r0]!
  3a:   d1f0        bne.n   1e <neon_convert+0x1e> 
```

这看起来非常相似，所以我们打了个平手。看到这个后，我尝试提到添加 alpha 并再次排列。

```
void neonPermuteRGBtoBGRA(unsigned char* src, unsigned char* dst, int numPix)
{
    numPix /= 8; //process 8 pixels at a time

    uint8x8_t alpha = vdup_n_u8 (0xff);

    for (int i=0; i<numPix; i++)
    {
        uint8x8x3_t rgb  = vld3_u8 (src);
        uint8x8x4_t bgra;

        bgra.val[0] = rgb.val[2]; //these lines are slow
        bgra.val[1] = rgb.val[1]; //these lines are slow 
        bgra.val[2] = rgb.val[0]; //these lines are slow

        bgra.val[3] = alpha;

        vst4_u8(dst, bgra);

        src += 8*3;
        dst += 8*4;
    }
} 
```

用 gcc 编译...

```
$ arm-linux-gnueabihf-gcc --version
arm-linux-gnueabihf-gcc (crosstool-NG linaro-1.13.1-2012.05-20120523 - Linaro GCC 2012.05) 4.7.1 20120514 (prerelease)
$ arm-linux-gnueabihf-gcc -std=c99 -O3 -c ~/temp/permute.c -marm -mfpu=neon-vfpv4 -mcpu=cortex-a9 -o ~/temp/permute_gcc.o

00000000 <neonPermuteRGBtoBGRA>:
   0:   e3520000    cmp r2, #0
   4:   e2823007    add r3, r2, #7
   8:   b1a02003    movlt   r2, r3
   c:   e92d01f0    push    {r4, r5, r6, r7, r8}
  10:   e1a021c2    asr r2, r2, #3
  14:   e24dd01c    sub sp, sp, #28
  18:   e3520000    cmp r2, #0
  1c:   da000019    ble 88 <neonPermuteRGBtoBGRA+0x88>
  20:   e3a03000    mov r3, #0
  24:   f460040d    vld3.8  {d16-d18}, [r0]!
  28:   eccd0b06    vstmia  sp, {d16-d18}
  2c:   e59dc014    ldr ip, [sp, #20]
  30:   e2833001    add r3, r3, #1
  34:   e59d6010    ldr r6, [sp, #16]
  38:   e1530002    cmp r3, r2
  3c:   e59d8008    ldr r8, [sp, #8]
  40:   e1a0500c    mov r5, ip
  44:   e59dc00c    ldr ip, [sp, #12]
  48:   e1a04006    mov r4, r6
  4c:   f3c73e1f    vmov.i8 d19, #255   ; 0xff
  50:   e1a06008    mov r6, r8
  54:   e59d8000    ldr r8, [sp]
  58:   e1a0700c    mov r7, ip
  5c:   e59dc004    ldr ip, [sp, #4]
  60:   ec454b34    vmov    d20, r4, r5
  64:   e1a04008    mov r4, r8
  68:   f26401b4    vorr    d16, d20, d20
  6c:   e1a0500c    mov r5, ip
  70:   ec476b35    vmov    d21, r6, r7
  74:   f26511b5    vorr    d17, d21, d21
  78:   ec454b34    vmov    d20, r4, r5
  7c:   f26421b4    vorr    d18, d20, d20
  80:   f441000d    vst4.8  {d16-d19}, [r1]!
  84:   1affffe6    bne 24 <neonPermuteRGBtoBGRA+0x24>
  88:   e28dd01c    add sp, sp, #28
  8c:   e8bd01f0    pop {r4, r5, r6, r7, r8}
  90:   e12fff1e    bx  lr 
```

用armcc编译...

```
$ armcc
ARM C/C++ Compiler, 5.01 [Build 113]
$ armcc --C99 --cpu=Cortex-A9 -O3 -c permute.c -o permute_arm.o

00000000 <neonPermuteRGBtoBGRA>:
   0:   e1a03fc2    asr r3, r2, #31
   4:   f3870e1f    vmov.i8 d0, #255    ; 0xff
   8:   e0822ea3    add r2, r2, r3, lsr #29
   c:   e1a031c2    asr r3, r2, #3
  10:   e3a02000    mov r2, #0
  14:   ea000006    b   34 <neonPermuteRGBtoBGRA+0x34>
  18:   f420440d    vld3.8  {d4-d6}, [r0]!
  1c:   e2822001    add r2, r2, #1
  20:   eeb01b45    vmov.f64    d1, d5
  24:   eeb02b46    vmov.f64    d2, d6
  28:   eeb05b40    vmov.f64    d5, d0
  2c:   eeb03b41    vmov.f64    d3, d1
  30:   f401200d    vst4.8  {d2-d5}, [r1]!
  34:   e1520003    cmp r2, r3
  38:   bafffff6    blt 18 <neonPermuteRGBtoBGRA+0x18>
  3c:   e12fff1e    bx  lr 
```

在这种情况下，armcc 会生成更好的代码。我认为这证明[了 fgp 在上面的回答](https://stackoverflow.com/a/12582666/1163019)是正确的。大多数时候 GCC 会产生足够好的代码，但你应该关注关键部分，或者最重要的是首先你必须测量/配置文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T12:08:58.043

如果您使用 NEON 内在函数，编译器应该没那么重要。大多数（如果不是全部）NEON 内在函数转换为单个 NEON 指令，因此编译器剩下的唯一事情就是寄存器分配和指令调度。根据我的经验，GCC 4.2 和 Clang 3.1 在这些任务上都做得相当好。

但是请注意，NEON 指令比 NEON 内在指令更具表现力。例如，NEON 加载/存储指令具有前增量和后增量寻址模式，它们将加载或存储与地址寄存器的增量相结合，从而节省了一条指令。NEON 内在函数没有提供明确的方法来做到这一点，而是依靠编译器将调节器 NEON 加载/存储内在函数和地址增量组合到带有后增量的加载/存储指令中。类似地，一些加载/存储指令允许您指定内存地址的对齐方式，如果您指定更严格的对齐保证，则执行速度更快。同样，NEON 内在函数不允许您显式指定对齐方式，而是依赖编译器来推断正确的对齐说明符。理论上，您使用“

根据我的经验，Clang 和 GCC 在这些优化方面都不是很聪明。幸运的是，这些优化的额外性能优势通常不是那么高——它更像是 10% 而不是 100%。

这两个编译器不是特别聪明的另一个领域是避免堆栈溢出。如果您的代码使用的向量值变量多于 NEON 寄存器，那么我似乎两个编译器都会产生可怕的代码。基本上，他们似乎做的是基于有足够可用寄存器的假设来调度指令。寄存器分配似乎是在之后进行的，并且似乎只是在运行寄存器后将值溢出到堆栈中。因此，请确保您的代码在任何时候都具有少于 16 个 128 位向量或 32 个 64 位向量的工作集！

总的来说，我从 GCC 和 Clang 中得到了相当不错的结果，但我经常不得不重新组织代码以避免编译器的特殊性。我的建议是坚持使用 GCC 或 Clang，但请使用您选择的反汇编程序定期检查。

所以，总的来说，我会说坚持使用 GCC 很好。不过，您可能想查看性能关键部件的拆卸，并检查它是否合理。

# php - 防止直接访问 PHP

> ID：12577575
> 
> 赞同：1
> 
> 时间：2012-09-25T06:50:16.407
> 
> 标签：php

我有 2 个脚本。那是 ：

1.  注册.html
2.  process_registration.php

有时有人直接打开链接到 process_registration.php，那么我该如何防止呢？

Process_registration.php 功能是保存从registration.html 输入的数据。

任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:51:55.300

您可以使用 ：

```
if (!isset($_POST['field'])) {
  die();
} 
```

在您的 process_registration.php 文件的顶部。

当然，替换`field`为表单中的现有字段之一。

如果您反对使用脚本注册多个帐户的洪水泛滥，您可以在注册表单上使用验证[码字段，或使用](http://en.wikipedia.org/wiki/CAPTCHA)[防止爬行](https://stackoverflow.com/questions/12257584/how-to-detect-fake-users-crawlers-and-curl)的保护措施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:54:41.733

只是另一种方法：

```
if (empty($_POST)) {
  exit("Direct access not allowed");
} 
```

对象名称更灵活。为了额外的安全，你应该把它放在你的表格中：

```
<input type="hidden" value="9957374" name="hiddenvalidate" /> 
```

在你的脚本中：

```
if (!isset($_POST['hiddenvalidate']) || $_POST['hiddenvalidate'] != 9957374) {
  exit("Direct access not allowed");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:52:12.407

您可以检查当前请求是否为 POST 类型（如果您使用表单）

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

您还可以检查是否设置了所有必需的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T06:55:11.380

您可以`$_POST`在 process_registration.php 中使用数组，例如：

```
if(!isset($_POST['yourvariable'])){
//Redirect to registration page
} 
```

您也可以使用[PHP Session](http://php.net/manual/en/features.sessions.php)。如果未设置会话，则将用户重定向到注册页面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T06:56:10.787

我喜欢`Joomla`处理这个问题的方式。

在 Joomla 的每个 php 页面上，您都会看到以下代码：

```
// No direct access
defined('_JEXEC') or die; // it's a config setting 
```

只有顶级页面包含此变量。所有其他文件，如果直接打开，将关闭，从而防止任何意外误用/数据丢失。

# sql-server-2005 - 在 Where 子句中使用 IF 和 else 并在 where 条件字段中使用 IN（在 where 条件字段中）

> ID：12577578
> 
> 赞同：0
> 
> 时间：2012-09-25T06:50:19.030
> 
> 标签：sql-server-2005

我想运行以下查询。`@city`值将在运行时提供

```
Select * from Emp
    where empno in (
        if( @city = 'Bangalore')
            Begin
                Select Empno from Emp
                    where EmpCity = @city
            End
        Else
            Begin
                Select empno from Emp
        End
    ) 
```

请通过提供替代方案来帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:01:39.503

`IF`是一个控制流*语句*。您不能将语句放在其他语句中。

人们想出的时候通常会寻找的`IF`是[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)，这是一种*表达方式*。但是，在这种情况下，一个更简单的查询似乎是可行的：

```
Select * from Emp
where
    (EmpCity = @city or @city != 'Bangalore') and
    (EmpSalary = @salary or @salary != 20000) and
    (Designation = @designation or @designation != 'PM') 
```

我不明白为什么你有嵌套选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:13:38.480

假设您的搜索基于`EmpId`-`@EmpId`并且`City`-`@city`

```
Select * 
from 
  Emp 
where 
 (@city  = '' or EmpCity = @city) and
 (@EmpId = '' or EmpId = @EmpId) 
```

# android - Android：从 sdcard 导入联系人的代码

> ID：12577583
> 
> 赞同：0
> 
> 时间：2012-09-25T06:50:50.660
> 
> 标签：android, android-contacts, android-sdcard

有人可以提供将联系人从 sdcard 导入到 Android 手机的代码吗？我正在查看此链接： [Export the Contacts as VCF file](https://stackoverflow.com/questions/8147563/export-the-contacts-as-vcf-file) 然而，它与我想要的相反。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:55:25.380

为了导入联系人，您只需要调用 Android 的内置 Intent ....

```
 private void restoreContact(){
   if(android.os.Build.VERSION.SDK_INT < 11){
      try{
           Intent i = new Intent();
           i.setComponent(new ComponentName("com.android.contacts","com.android.contacts.ImportVCardActivity"));
           startActivity(i);
       } catch(Exception e){
           try {
               Intent i = new Intent();
               i.setComponent(new ComponentName("com.sonyericsson.contacts","com.sonyericsson.contacts.contactlist.ImportVCardActivity"));
               startActivity(i);
           }
           catch (Exception ex)
           {
            //Show Exception

           }
       }

  } else if(android.os.Build.VERSION.SDK_INT >= 11){
      try{
           Intent intent =new Intent();
           intent.setComponent(new ComponentName("com.android.contacts","com.android.contacts.vcard.ImportVCardActivity"));
           startActivity(intent);
      }catch(Exception e){
        //Show Exception

       }          
    }
 } 
```

# android - 首次启动时的登录屏幕

> ID：12577585
> 
> 赞同：1
> 
> 时间：2012-09-25T06:51:03.460
> 
> 标签：android, password-protection, apk

您将如何创建一个仅在应用程序第一次启动时运行的活动，并为用户提供一个输入密码和“解锁”应用程序的屏幕

* * *

第一次意味着应用程序首次安装和首次启动的时间。就像`FIRST EVER`它打开的时候一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:53:56.283

您只能第一次使用 android 首选项来显示登录屏幕。

您可以优先设置标志并在应用程序启动时检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:48:30.467

您可以使用`sharedPreferences`：

```
boolean firstTime = prefs.getBoolean("firstTime", true);
if(firstTime) {
    SharedPreferences.Editor editor = prefs.edit();
    editor.putBoolean("firstTime", false);
    editor.commit();

    //do your first time "operations" here E.G read configuration, show user guide
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:58:22.413

通过“应用程序首次启动”我假设您的意思是第一次`Activity`出现在显示器上。

我通常测试用户偏好数据库的存在。如果它不存在，则应用程序从未处于活动状态，然后我可以提示用户进行配置更新。

查看[文档](http://developer.android.com/reference/android/preference/PreferenceManager.html)以`PreferenceManager`开始使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:59:49.930

您总是可以从“启动画面”活动开始，如果用户登录，它只会检查数据库/共享首选项。然后您可以运行登录活动或不运行。或者在第一个活动中，您可以显示带有登录请求的弹出窗口。

# hp-quality-center - 如何将 ALM 与 Ruby on Rails 应用程序集成？

> ID：12577586
> 
> 赞同：0
> 
> 时间：2012-09-25T06:51:06.703
> 
> 标签：hp-quality-center

我想通过使用 REST API 将 ALM 11 与我的 Ruby on Rails 应用程序集成，以获取测试用例并将结果发送回 HP ALM。

如果您对相同的工作有一些想法，您能否帮我提供一些相同的示例和参考 (URL)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:12:03.093

HP ALM 文档中有相当广泛的关于 REST API 的文档，其中包括所有公开资源的列表和一些代码示例。

提示获取此文档只需转到 ALM 客户端内的帮助 -> 文档库。

# .net - 关于打开 .bak 文件的想法

> ID：12577588
> 
> 赞同：0
> 
> 时间：2012-09-25T06:51:16.423
> 
> 标签：.net, sql-server, database

我有这个文件名为`somename.bak`. 它的大小约为 15mb。它是数据库备份。

我想打开这个文件以便查看它的内容。我尝试了文件查看器软件，但没有用。

谁能建议我如何打开这个 .bak 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:56:53.303

您无法在文件查看器中打开此文件。

您必须使用 SQL Server management studio express 并且您应该恢复该数据库以查看数据库。

首先从微软站点下载并安装sql server expression edition 和sql server management studio。

安装后打开 sql express management studio，连接到本地 sql 服务器，在数据库列表中，您将获得恢复数据库选项。

基本上你需要设置一个 sql server express

# ruby - RoR：如何在同一个视图中以两种不同的方式定义@microposts？

> ID：12577590
> 
> 赞同：-2
> 
> 时间：2012-09-25T06:51:21.510
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试将搜索（微博）功能放入我的应用程序中。所有的方法都包括给出定义

```
@microposts=Micropost.search(params[:search]) 
```

或类似的东西。你总是必须在 microposts_controller.rb 中定义 @microposts

问题是我已经有了

```
def home
     @microposts=Micropost.all
end 
```

因为最初主页只是所有微博的列表。用户使用搜索功能后如何更改定义。这是唯一的方法吗？我需要一个 if then 语句吗？

就像他们按搜索 @microposts=Micropost.search(params[:search]) 否则 @microposts=Micropost.all？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:02:49.210

当页面最初加载时，我猜`params[:search]`不存在。所以你可以尝试：

```
if params[:search].present?
  @microposts=Micropost.search(params[:search])
else 
  @microposts=Micropost.all 
```

# c# - 为什么对象（根）类不冲突多重继承

> ID：12577595
> 
> 赞同：6
> 
> 时间：2012-09-25T06:51:45.753
> 
> 标签：c#, .net, oop

众所周知，.Net 不支持多重继承。因此我们只能继承一个类。但默认情况下，每个类都继承“对象”类。那么为什么当我继承任何其他类时不会发生错误。

例如 A- 基类，B- 派生类。当我使用**A:B**时，隐式对象类也被继承为（我认为）**A:B,Object**。如果.Net 不支持多重继承，这怎么可能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T06:52:47.330

不，不是那样的——只有一个继承链，它是：

```
__________
| Object |
----------
    ^
    |
__________
|   A    |
----------
    ^
    |
__________
|   B    |
---------- 
```

任何一个类只有一个直接基类，但类的继承链可以很长。

例如，为什么这与直接继承不同，如果overrides ，则无法*调用*的原始实现- 它*只能*调用's 版本（当然，并覆盖自身）。`B``A``A``ToString``B``Object.ToString()`*`A``ToString`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:56:19.887

很简单，声明的类*只有*`object`在它不从另一个类继承时才继承。编译器所做的是它有效地改变

```
public class MyBaseLessClass
{
} 
```

至

```
public class MyBaseLessClass : object
{
} 
```

这样每个类都有*一个*它继承自的类。（有点像[理发师悖论](http://en.wikipedia.org/wiki/Who_shaves_the_barber):)）*

# spring-mvc - jsp下有多个子文件夹的内部资源视图解析器

> ID：12577599
> 
> 赞同：1
> 
> 时间：2012-09-25T06:52:06.190
> 
> 标签：spring-mvc

嗨，我使用了内部资源视图解析器，我的 jsp 结构类似于 jsp/adm、jsp/icon、jsp/iload，
我的基于注释的控制器将根据条件返回字符串值我的问题是 jsp uder 子文件夹未解析但它在 jsp 文件夹下正在工作，任何人都可以帮助我，他是我的代码：`

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/jsp/"/>
  <property name="suffix" value=".jsp"/>
</bean> 
```

我的控制器代码是

```
@RequestMapping("/icrl")
    public String search() throws Exception
    {
        setMenuName(CommonConstants.ICRL);
        return "pgiCRL";
    }

    @RequestMapping("/searchCodes")
    public String searchCodes() throws Exception
    {
        String key=getSearchKey();  
        String query=getQuery();
        Map<String, Object> searchKeys = new HashMap<String, Object>();
        ArrayList<String> list=new ArrayList<String>();
        if(query!=null||!query.isEmpty()){
            searchKeys.put(CommonConstants.DIAGICD9, getDiaICD9());
            searchKeys.put(CommonConstants.DIAGICD10, getDiaICD10());
            searchKeys.put(CommonConstants.DIAGNOSIS, getDiagnosis());
            searchKeys.put(CommonConstants.PROCEDURE, getProcedure());
            searchKeys.put(CommonConstants.SURGICAL, getSurgical());
            searchKeys.put(CommonConstants.SURGICAL9, getSurICD9());
            searchKeys.put(CommonConstants.SURGICAL10, getSurICD10());
            searchKeys.put(CommonConstants.REVENUE, getRevenue());
            list= (ArrayList<String>) iCRLService.getSearchCodeList(query,searchKeys);  
        }
        setSuggestions(list);
        return CommonConstants.SUCCESS;
    } 
```

我的观点取决于条件，它可能是成功页面和失败页面，所以我需要修复控制器中的返回值，因为这是动态的。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:03:41.843

您需要在返回的字符串值中定义子文件夹名称。

例如，如果您的页面“pgiCRL”在 admin 子文件夹中，则返回“admin/pgiCRL”。

# nhibernate - FluentNHibernate 如何知道要访问哪一行？

> ID：12577608
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:52:20.107
> 
> 标签：nhibernate, fluent-nhibernate

没有问题；我只是好奇 FluentNHibernate/NHibernate 如何知道要访问哪些行。

在以下伪代码中，我有这些实体：

```
public class User
{
    public virtual int Id { get; protected set; }
    public virtual IList<Friend> Friends { get; set; }
}   

public class Friend
{
    public virtual int Id { get; protected set; }
    public virtual User User { get; set; }
    public virtual String FunnyProperty { get; set; }
} 
```

与这种一对多的关系：

```
public class UserMap : ClassMap<User>
{
    Id(x => x.Id);
    // One user has many friends
    HasMany(x => x.Friends).KeyColumn("UserId")...
}    

public class FriendMap : ClassMap<Friend>
{
    Id(x => x.Id);
    References(x => x.User, "UserId")... 
} 
```

如果我运行以下代码来建立双向关系：

```
var user = new User().Friends.AddRange( /* 5 friends */ );
/* 5 friends */.ForEach(friend => friend.User = user); 
```

然后设置：

```
user[2].FunnyProperty = "a magic string"; 
```

然后，在可视化数据库资源管理器工具中，我将表**用户**视为：

* * *

```
ID
--------------------------------------
63
--------------------------------------

```

* * *

和表**Friends**为：

* * *

```
身份证 | 用户名 | 有趣的属性
--------------------------------------
24 | 63 | （空值）
--------------------------------------
25 | 63 | （空值）
--------------------------------------
26 | 63 | 一根魔线
--------------------------------------
27 | 63 | （空值）
--------------------------------------
28 | 63 | （空值）
--------------------------------------

```

* * *

FluentNHibernate/NHibernate 如何“记住” *id 26*作为 中的第三个`Friend`对象`user.Friends`？假设您提交事务，在其他地方开始另一个事务，然后检索相同的`user.Friends[2]`. FluentNHibernate/NHibernate 如何知道访问*id 为 26*的行？

尤其是当您有一个**Friends**表，其中有许多不同的**用户**浮动时，如下所示，FluentNHibernate/NHibernate 如何“记住”要访问哪一行？：

* * *

```
身份证 | 用户名 | 有趣的属性
--------------------------------------
24 | 24 | （空值）
--------------------------------------
25 | 89 | （空值）
--------------------------------------
26 | 66 | 一根魔线
--------------------------------------
27 | 12 | （空值）
--------------------------------------
28 | 66 | （空值）
--------------------------------------
28 | 89 | （空值）
--------------------------------------

```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:45:59.030

您的 Friends 表包含属性 UserId，它是对朋友的引用。Fluent NHibernatie 会读取您定义的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:52:32.833

Friends 表中还有一个索引列。

# vbscript - Vbscript 寻找文件末尾以制作尾部命令脚本

> ID：12577628
> 
> 赞同：0
> 
> 时间：2012-09-25T06:53:20.153
> 
> 标签：vbscript

我使用 vbscript 编写了一个简单的尾部命令。它工作正常，除了非常大的文件，它必须通读整个文件才能获得最后 10 行。有没有办法找到文件的末尾，然后向后读十行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:53:25.170

恐怕在 VBS TextStream 中向后搜索是不可能的，但是您可以搜索一个位置，而不是阅读整个文件。在 EOF 之前 1K，然后读取文件的其余部分，仅显示最后 10 行。

编辑：我正在添加一些示例代码来说明这个想法：

```
set fso = CreateObject("Scripting.FileSystemObject")
set file = fso.GetFile(filePath)
set stream = file.OpenAsTextStream(1, -2)
pos1KBeforeEnd = file.Size-1024
if pos1KBeforeEnd<0 then pos1KBeforeEnd=0
stream.Skip pos1KBeforeEnd 
```

# iphone - 使用 wifi 和 3G 网络将文件从一台 ios 设备传输到另一台设备？

> ID：12577630
> 
> 赞同：1
> 
> 时间：2012-09-25T06:53:26.657
> 
> 标签：iphone, ios, wifi, file-transfer, 3g

我只是想知道是否可以使用 wifi 或 3G 网络将文件从一台 ios 设备发送到另一台设备。我不确定这是否可能。

我浏览了苹果的[CFNetwork 参考](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001132)文档，找到[了 cfftp](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html#//apple_ref/doc/uid/TP30001132-CH9-SW1)参考。我无法清楚地理解它，因为它说我们可以实现来自远程服务器的读取流。

我想将文件从一台设备读取到另一台设备，并使用两个设备的 wifi 写入相同的内容，就像我们可以使用`Bluetooth`.

1.  是否可以通过仅连接 2 个设备使用 wifi 和 3G 网络发送文件？（无中介）
2.  我在寻找正确的方向吗？
3.  如果没有，请指导我正确的方向。
4.  ios中是否有wifi和3G文件传输类？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:33:52.900

要在没有中介的情况下在两台设备之间进行传输，至少一台设备必须运行某种服务器（如[http://code.google.com/p/ios-ftp-server/](http://code.google.com/p/ios-ftp-server/)，对于客户端，请参阅[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)）。但是您还需要发现 ip 地址（可能使用[ZeroConf](http://en.wikipedia.org/wiki/Zero_configuration_networking)）。很多麻烦，如果可能的话；两个客户端必须在同一个网络中，因此不能在 3G 上工作。

如果你对调解员没意见，事情就会变得简单得多。我创建了一个名为[cross copy](http://cross-copy.net)的 Open Souce 应用程序，它使用 http REST 命令在设备之间传输文件（因此还为桌面提供了一个 Web 应用程序）。显然还有其他不错的基于中介的解决方案：[DropBox](https://www.dropbox.com/)、[Bump](https://bu.mp)、[Hoccer](http://hoccer.com/)等

# javascript - 如何强制 iPad/iPhone Safari 使用旧版本的 webkit？

> ID：12577632
> 
> 赞同：0
> 
> 时间：2012-09-25T06:53:36.983
> 
> 标签：javascript, html, ipad, webkit, ios6

我们有一个支持 iPad/iPhone 的网络应用程序，当我将 iPad 升级到 iOS 6.0 时，它在 iOS 5.1 和 AppleWebKit/534.46 上运行良好，因此 safari webkit 升级到 AppleWebKit/536.26 许多功能停止并且布局被破坏，因为我们依赖绝对定位广泛，所以有办法，第一是重组整个应用程序来处理webkit的变化（这个选项需要大量的返工），第二是找到一个变通方法来强制使用iPad safari以前版本的 webkit（这个需要 0 时间，我更喜欢它）。

那么，有没有什么办法可以强制 iPad safari 使用特定的 webkit 版本来渲染 HTML ？？？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:57:06.690

不。

Mobile Safari 上唯一的 webkit 版本是设备安装的 iOS 版本中存在的任何版本。

# php - 使用 JQUERY 对象通过 PHP 上传图像

> ID：12577633
> 
> 赞同：-3
> 
> 时间：2012-09-25T06:53:40.283
> 
> 标签：php, jquery, image, object, upload

我有一张图片（特别是验证码），我想使用 PHP 上传到我的服务器（或者如果可能更好，只有 JQUERY）

我用这段代码创建了一个对象：

```
var newIMG = $("img[name='captchaImage']").clone(); 
```

但我不能通过 jQuery 的 ajax 方法或其他方式发送它。（甚至尝试手动添加但不知道如何将对象作为文件发送）

发送这个对象的最简单的 PHP / jQuery 代码应该是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:56:27.593

为此，您可以使用 [jsupload](https://github.com/valums/file-uploader)插件。

无法使用 AJAX 上传文件..

您还可以使用 iframe 来模拟上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:01:53.423

只有jquery文件上传是不可能的你需要php

您可以使用[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)通过 ajax 和 jquery 上传文件

# iphone - 网格线未在散点图中放大

> ID：12577643
> 
> 赞同：0
> 
> 时间：2012-09-25T06:54:24.507
> 
> 标签：iphone, ios, core-plot

当我缩放时（即使用绘图空间的allowUserInteraction默认放大）网格线保持在同一个地方。我想让它缩放或者它应该与刻度线相协调。
任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:38:55.230

这是发布版本 1.0 中的一个[已知问题](http://code.google.com/p/core-plot/issues/detail?id=433)，它已在开发版本中修复，要使用此版本，您必须通过执行以下操作来克隆 mercurial 存储库：

```
hg clone https://code.google.com/p/core-plot/ 
```

要安装 mercurial，您应该可以在[此处](http://mercurial.berkwood.com)下载安装程序。

# java - Web 连接器错误“身份验证失败”

> ID：12577647
> 
> 赞同：1
> 
> 时间：2012-09-25T06:54:43.213
> 
> 标签：java, quickbooks

我一直在尝试创建一个简单的 Web 服务，该服务能够在 Windows 7 上使用 Quickbooks 2012 连接到 Quickbooks Web 连接器。

[编程指南（ http://developer.intuit.com/qbsdk-current/doc/pdf/qbwc_proguide.pdf](http://developer.intuit.com/qbsdk-current/doc/pdf/qbwc_proguide.pdf) ）中清楚地描述了实现。

在验证方法中，我不断收到与“身份验证失败”和“对象引用未设置为对象实例”相同的错误。我首先使用 Eclipse 在 java 中创建了示例 Web 服务。

问题出在身份验证方法中。

我还为 Web 连接器打开了 VERBOSE 模式。

以下是完整日志

```
 20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.ConnectToQB() : Connecting to QuickBooks...

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.ConnectToQB() : Connected., Session started

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.deleteFileIDValueFromQB() : Deleting FileID value from Company object for the ownerID = {57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.deleteFileIDValueFromQB() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtDelRq requestID="1"><DataExtDel><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID><DataExtName>FileID</DataExtName><OtherDataExtType>Company</OtherDataExtType></DataExtDel></DataExtDelRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.registerDataExtInQB() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtDelRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">

    <DataExtDelRet>

    <OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID>

    <DataExtName>FileID</DataExtName>

    <TimeDeleted>2012-09-24T20:41:25+05:30</TimeDeleted>

    </DataExtDelRet>

    </DataExtDelRs>

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.DisconnectFromQB() : Session ended and connection closed

    20120924.15:11:25 UTC : QBWebConnector.SOAPWebService.deleteFileIDValueFromQB() : Data extension FileID has been cleared from QuickBooks for owner id.

    20120924.15:11:25 UTC : RemoveApp() : Application PratikWS has been removed.

    20120924.15:11:29 UTC : QWCReader.ParseQWC() : Contents of QWC file: -

    <QBWCXML>

      <AppName>PratikWS</AppName>

      <AppID></AppID>

      <AppURL>http://localhost:8080/TestWS/services/TestHello?WSDL</AppURL>

      <AppDescription>A short description for WCWebService1</AppDescription>

      <AppSupport>http://localhost:8080</AppSupport>

      <UserName>pratik</UserName>

      <OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID>

      <FileID>{90A44FB5-33D9-4815-AC85-BC87A7E7D1FB}</FileID>

      <QBType>QBFS</QBType>

      <Scheduler>

        <RunEveryNMinutes>2</RunEveryNMinutes>

      </Scheduler>

    </QBWCXML>

    20120924.15:11:29 UTC : QBWebConnector.WebServiceManager.ReadQWC(QWCReader QWC) : Parsing application configuration xml file to load its content to variables

    20120924.15:11:30 UTC : QBWebConnector.RegistryManager.createRegKey() : Error creating registry key for appName = <>

    20120924.15:11:30 UTC : QBWebConnector.RegistryManager.createRegKey() : Reason: Value cannot be null.

    Parameter name: name

    20120924.15:11:30 UTC : QBWebConnector.SOAPWebService.SerializeToRegistry() : Error saving PratikWS to Registry: Object reference not set to an instance of an object.

    20120924.15:11:30 UTC : QBWebConnector.SOAPWebService.ConnectToQB() : Connecting to QuickBooks...

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.ConnectToQB() : Connected., Session started

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.AddToQuickBooks() : Application name = PratikWS

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.AddToQuickBooks() : Querying company file to find if owner/file id exists.

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDinQB() : Latest QBXML version supported = v11.0

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDinQB() : Querying QuickBooks for existance of owner/file id

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDinQB() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtDefQueryRq requestID="1"><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID></DataExtDefQueryRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDinQB() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtDefQueryRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">

    <DataExtDefRet>

    <OwnerID>{57F3B9B1-86F1-4FCC-B1EE-566DE1813D10}</OwnerID>

    <DataExtName>AppLock</DataExtName>

    <DataExtType>STR255TYPE</DataExtType>

    <AssignToObject>Company</AssignToObject>

    </DataExtDefRet>

    <DataExtDefRet>

    <OwnerID>{57F3B9B1-86F1-4FCC-B1EE-566DE1813D10}</OwnerID>

    <DataExtName>FileID</DataExtName>

    <DataExtType>STR255TYPE</DataExtType>

    <AssignToObject>Company</AssignToObject>

    </DataExtDefRet>

    </DataExtDefQueryRs>

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDinQB() : Status message: Status OK

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.registerDataExtInQB() : Creating DataExtDef named AppLock assigned to Company object for the ownerID = {57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.registerDataExtInQB() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtDefAddRq requestID="1"><DataExtDefAdd><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID><DataExtName>AppLock</DataExtName><DataExtType>STR255TYPE</DataExtType><AssignToObject>Company</AssignToObject></DataExtDefAdd></DataExtDefAddRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.registerDataExtInQB() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtDefAddRs requestID="1" statusCode="3100" statusSeverity="Error" statusMessage="The name "AppLock" of the list element is already in use." />

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.registerDataExtInQB() : Data extension definition has been created in QuickBooks for owner id.

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.AddToQuickBooks() : Registered the AppLock to company file successfully.

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDValueinQB() : Latest QBXML version supported = v11.0

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDValueinQB() : Querying QuickBooks for existance of owner/file id

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDValueinQB() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><CompanyQueryRq requestID="1"><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID></CompanyQueryRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.findFileIDValueinQB() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <CompanyQueryRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">

    <CompanyRet>

    <IsSampleCompany>false</IsSampleCompany>

    <CompanyName>krazykoder</CompanyName>

    <LegalCompanyName>krazykoder</LegalCompanyName>

    <FirstMonthFiscalYear>January</FirstMonthFiscalYear>

    <FirstMonthIncomeTaxYear>January</FirstMonthIncomeTaxYear>

    <CompanyType>InformationTechnologyComputersSoftware</CompanyType>

    <TaxForm>Form1040</TaxForm>

    <SubscribedServices>

    <Service>

    <Name>QuickBooks Online Banking</Name>

    <Domain>banking.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Online Billing</Name>

    <Domain>billing.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Online Billing Level 1 Service</Name>

    <Domain>qbob1.qbn</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Online Billing Level 2 Service</Name>

    <Domain>qbob2.qbn</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Online Billing Payment Service</Name>

    <Domain>qbobpay.qbn</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Bill Payment</Name>

    <Domain>billpay.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Online Billing Paper Mailing Service</Name>

    <Domain>qbobpaper.qbn</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Payroll Service</Name>

    <Domain>payroll.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Basic Payroll Service</Name>

    <Domain>payrollbsc.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Basic Disk Payroll Service</Name>

    <Domain>payrollbscdisk.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Deluxe Payroll Service</Name>

    <Domain>payrolldlx.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>QuickBooks Premier Payroll Service</Name>

    <Domain>payrollprm.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>Basic Plus Federal</Name>

    <Domain>basic_plus_fed.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>Basic Plus Federal and State</Name>

    <Domain>basic_plus_fed_state.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>Basic Plus Direct Deposit</Name>

    <Domain>basic_plus_dd.qb</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    <Service>

    <Name>Merchant Account Service</Name>

    <Domain>mas.qbn</Domain>

    <ServiceStatus>Never</ServiceStatus>

    </Service>

    </SubscribedServices>

    <AccountantCopy>

    <AccountantCopyExists>false</AccountantCopyExists>

    </AccountantCopy>

    <DataExtRet>

    <OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID>

    <DataExtName>AppLock</DataExtName>

    <DataExtType>STR255TYPE</DataExtType>

    <DataExtValue>UNLOCKED:ADMIN-PC</DataExtValue>

    </DataExtRet>

    </CompanyRet>

    </CompanyQueryRs>

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.enterDataExtValueInQB() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtAddRq requestID="1"><DataExtAdd><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID><DataExtName>FileID</DataExtName><OtherDataExtType>Company</OtherDataExtType><DataExtValue>{90A44FB5-33D9-4815-AC85-BC87A7E7D1FB}</DataExtValue></DataExtAdd></DataExtAddRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.enterDataExtValueInQB() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtAddRs requestID="1" statusCode="0" statusSeverity="Info" statusMessage="Status OK">

    <DataExtRet>

    <OwnerID>{57F3B9B1-86F1-4FCC-B1EE-566DE1813D10}</OwnerID>

    <DataExtName>FileID</DataExtName>

    <DataExtType>STR255TYPE</DataExtType>

    <DataExtValue>{90A44FB5-33D9-4815-AC85-BC87A7E7D1FB}</DataExtValue>

    </DataExtRet>

    </DataExtAddRs>

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.enterDataExtValueInQB() : Data extension value has been created in QuickBooks for FileID

    20120924.15:11:31 UTC : QBWebConnector.CompanyFileLock.Send_DataExtDefAddRqXML() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtDefAddRq requestID="1"><DataExtDefAdd><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID><DataExtName>AppLock</DataExtName><DataExtType>STR255TYPE</DataExtType><AssignToObject>Company</AssignToObject></DataExtDefAdd></DataExtDefAddRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.CompanyFileLock.Send_DataExtDefAddRqXML() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtDefAddRs requestID="1" statusCode="3100" statusSeverity="Error" statusMessage="The name "AppLock" of the list element is already in use." />

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.CompanyFileLock.Send_DataExtAddRqXML() : XML dump follows: -

    <?xml version="1.0"?><?qbxml version="11.0"?><QBXML><QBXMLMsgsRq onError="stopOnError"><DataExtAddRq requestID="1"><DataExtAdd><OwnerID>{57F3B9B1-86F1-4fcc-B1EE-566DE1813D10}</OwnerID><DataExtName>AppLock</DataExtName><OtherDataExtType>Company</OtherDataExtType><DataExtValue>UNLOCKED:ADMIN-PC</DataExtValue></DataExtAdd></DataExtAddRq></QBXMLMsgsRq></QBXML>

    20120924.15:11:31 UTC : QBWebConnector.CompanyFileLock.Send_DataExtAddRqXML() : XML dump follows: -

    <?xml version="1.0" ?>

    <QBXML>

    <QBXMLMsgsRs>

    <DataExtAddRs requestID="1" statusCode="3180" statusSeverity="Error" statusMessage="There was an error when saving a data extension named "AppLock".  QuickBooks error message: Attribute with specified name already exists." />

    </QBXMLMsgsRs>

    </QBXML>

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.AddToQuickBooks() : Application PratikWS has been added to QuickBooks.

    20120924.15:11:31 UTC : QBWebConnector.SOAPWebService.DisconnectFromQB() : Session ended and connection closed

    20120924.15:11:39 UTC : gridControl1_CheckBoxClicked() : Scheduling has been disabled for PratikWS

    20120924.15:11:41 UTC : QBWebConnector.WebServiceManager.DoUpdateSelected() : updateWS() for application = 'PratikWS' has STARTED

    20120924.15:11:41 UTC : QBWebConnector.RegistryManager.getUpdateLock() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\UpdateLock = FALSE

    20120924.15:11:41 UTC : QBWebConnector.RegistryManager.setUpdateLock() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\UpdateLock has been set to True

    20120924.15:11:41 UTC : QBWebConnector.RegistryManager.setUpdateLock() : ********************* Update session locked *********************

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.instantiateWebService() : Initiated connection to the following application.

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.instantiateWebService() : AppName: PratikWS

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.instantiateWebService() : AppUniqueName (if available): PratikWS

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.instantiateWebService() : AppURL: http://localhost:8080/TestWS/services/TestHello?WSDL

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_serverVersion() : *** Calling serverVersion().

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_serverVersion() : Actual error received from web service for serverVersion call: <No such operation 'serverVersion'>. For backward compatibility of all webservers, QBWC will catch all errors under app-not-supporting-serverVersion.

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_serverVersion() : This application does not contain support for serverVersion. Allowing update operation for backward compatibility.

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_clientVersion() : *** Calling clientVersion() with following parameter:<productVersion="2.1.0.27">

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.updateWS() : Actual error received from web service for clientVersion call: <No such operation 'clientVersion'>. For backward compatibility of all webservers, QBWC will catch all errors under app-not-supporting-clientVersion.

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_clientVersion() : This application does not contain support for clientVersion. Allowing update operation for backward compatibility.

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_authenticate() : Authenticating to application 'PratikWS', username = 'pratik'

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_authenticate() : *** Calling authenticate() with following parameters:<userName="pratik"><password=<MaskedForSecurity>

    20120924.15:11:41 UTC : QBWebConnector.SOAPWebService.do_authenticate() : QBWC1012: Authentication failed due to following error message.

    Object reference not set to an instance of an object.

    More info:

    StackTrace =    at QBWebConnector.WebService.do_authenticate(String& ticket, String& companyFileName)

    Source = QBWebConnector

    20120924.15:11:41 UTC : QBWebConnector.RegistryManager.setUpdateLock() : HKEY_CURRENT_USER\Software\Intuit\QBWebConnector\UpdateLock has been set to False

    20120924.15:11:41 UTC : QBWebConnector.RegistryManager.setUpdateLock() : ********************* Update session unlocked *********************

    20120924.15:11:41 UTC : QBWebConnector.WebServiceManager.DoUpdateSelected() : Update completed with errors. See log (QWClog.txt) for details. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:18:56.103

您为 SOAP 服务使用了错误的命名空间。修复您的命名空间问题，如果您仍然遇到问题，请发布您的代码。

您的命名空间应该是：http: [//developer.intuit.com/](http://developer.intuit.com/)

这让我认为您可能也没有从 WSDL 生成它，这可能会解决您的问题。

# linux - 部署失败 Jboss 4.2.0

> ID：12577651
> 
> 赞同：0
> 
> 时间：2012-09-25T06:54:56.580
> 
> 标签：linux, jboss, locking, workspace, myeclipse

JBoss 4.x 部署失败无法将所有资源复制到 E:\jboss-4.2.0.GA\server\default\deploy\etc.war。如果文件被锁定，您可以等到锁定超时重新部署，或者停止服务器并重新部署，或者手动删除 E:\jboss-4.2.0.GA\server\default\deploy\etc.war.how 的部署来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:59:36.997

如果允许您停止服务器，简单的步骤是：

```
Stop the server, redeploy the WAR and start the server. 
```

# google-cloud-messaging - GCM（谷歌云消息）批量使用 Linux

> ID：12577652
> 
> 赞同：4
> 
> 时间：2012-09-25T06:55:08.923
> 
> 标签：google-cloud-messaging

有没有人知道在 Linux 服务器上发送 Bulk Google Cloud Messaging 的最佳方式（植入）。（我个人喜欢非 java 实现）任何帮助、链接或建议表示赞赏。

**编辑**

我没有尝试任何批量消息传递的方法。我知道 GCM 也有一个 php 实现，但我想知道在实现之前我应该​​考虑什么。比如，如何处理失败的消息，对 GCM 服务器的 http 请求是否有任何限制等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:55:58.553

最后，我为自己的问题找到了最佳答案。`http`我们可以使用一个请求向 1000 个 Google 可能的消息收件人发送消息。发送批量消息不应该那么复杂。任何语言或工具都能够向`http`GCM 服务器发送适当的请求就足够了。

> GCM 允许您将多达 1,000 个收件人附加到单个消息中，让您在适当的时候轻松快速地联系大型用户群，同时最大限度地减少服务器上的工作负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:31:23.203

如[本例](http://labs.distriqt.com/post/1223)所示，似乎服务器端代码甚至可以用`C#`. [这个问题](https://stackoverflow.com/questions/12417704/how-to-implement-push-notifications-in-android)也证实了这种方法有效。其他人似乎能够设置独立的 Java 应用程序，如此[处所示](http://www.linkedin.com/groups/Google-Cloud-Messaging-How-create-86481.S.139378077)。

如果您必须设置 Linux 服务器来发送`GCM`推送通知，您可以自由选择使用`C#`或`Java`自行决定。

然而，对于什么问题`C/C++`，事情要复杂一些。[这个问题（PHP）](https://stackoverflow.com/questions/11396177/gcm-sending-with-curl-php)表明`GCM`可以使用发送通知`CURL`，所以我怀疑使用“C/C++”实现`libCurl`是可能的。但是，您必须自己调整它，因为它似乎不是使用`GCM`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:50:49.257

如果您熟悉 PHP，而不是在 PHP 中实现它。由于 GCM 仅使用 2 个带有 HTTPS 的 GET，因此您可以轻松地用任何语言实现它，甚至使用 curl 进行批处理（我正在使用它进行测试）。你可以在[这里](https://stackoverflow.com/questions/7639678/c2dm-401-error-when-sending-messages-after-receiving-id-and-auth-token/7771710#7771710)找到电话。

请注意，您需要一个能够执行 HTTPS 的 curl.exe。Avio 回答中的链接向您展示了如何在 PHP 中做到这一点，坚持使用 C++。

# javascript - 使用图像源查找图像宽度和高度的 jQuery 代码

> ID：12577655
> 
> 赞同：0
> 
> 时间：2012-09-25T06:55:29.290
> 
> 标签：javascript, jquery, image

在我们的网站中，我们正在访问我们的图像或图像源就像

```
<img src="image_manage.php&type=resize&id=12" /> 
```

我的问题是，在 jquery 中使用此源获取图像高度和宽度。我写了一个代码来获取宽度和高度

```
photograf = new Image();
photograf.src = '/image_manage.php&type=resize&id=12';
var width = photograf.width;
var height = photograf.height; 
```

但是我的高度和宽度都为零，这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:57:16.600

试试这个代码：

```
var oImage = new Image();

oImage.onload = function(){
    this.width// width of loaded image
}

oImage.src = '/path/to/image.gif'; 
```

或者类似的东西更好：

```
var img = document.getElementById('imageid'); 
//or however you get a handle to the IMG
var width = img.clientWidth;
var height = img.clientHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:57:31.130

试试这个

```
width = $("img").attr('width');    //can also $("img").width();
hight = $("img").attr('height');   //can also $("img").height(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:57:37.923

您必须等待图像加载才能检测其大小。

```
$("#imgElement").attr('src',photograf.src).load(function(){
    var w = $("imgElement").width();
    var h = $("imgElement").height();
}); 
```

这里我设置了`src`图像的参数，并使用jQuery的`load()`函数来检测图像何时加载成功。

参考 -

*   [`load()`](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:57:54.713

使用 jQuery[`width()`](http://api.jquery.com/width/)和[`height()`](http://api.jquery.com/height/)函数：

```
jQuery(function(){
    var $width = jQuery("img").width();
    var $height = jQuery("img").height();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T06:59:06.523

你可以试试这个

```
width = $("img").prop('width');   
hight = $("img").prop('height'); 
```

不要忘记将js代码放入`load`或`document ready`事件中

```
$(document).ready(function(){
    var height = $('img').prop('height');
    var width= $('img').prop('width');
    alert('Height :'+height+' AND '+'width :'+width);
}); 
```

这是正在运行的示例 **示例** [jsfiddle](http://jsfiddle.net/Azsxg/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T06:59:27.893

当您询问其大小时，该图像尚未加载。onLoad 方法对此很有帮助。

```
photograf = new Image();
photograf.src = '/image_manage.php&type=resize&id=12';
photograf.onLoad = function(){ 
    var width = this.width; 
    var height = this.height; 
}; 
```

# regex - 使用 .regex 和 htaccess 重定向到添加了查询字符串的新 URL

> ID：12577670
> 
> 赞同：0
> 
> 时间：2012-09-25T06:56:31.543
> 
> 标签：regex, .htaccess, mod-rewrite, rewrite, query-string

尝试使用正则表达式和 .htaccess 重定向旧网站博客档案，以便使用包含类别过滤器的查询字符串在新网站的主档案下找到。

我正在尝试使以下重定向工作

```
RewriteRule ^blog/2012/04 http://example.com/2012/04?cat=306,10,11 [R=301,L] 
```

如何使用 regex 和 .htaccess 识别`?`目标 URL 查询字符串中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:09:52.580

`?`是正则表达式中的特殊字符。它是一个量词，使前一个字符“可选”意味着它可以存在或不存在 ==> 匹配 0 次或 1 次。

因此，如果您想在字符串中逐字匹配它，则必须使用反斜杠对其进行转义：

```
RewriteRule ^blog/2012/04 http://example\.com/2012/04\?cat=306,10,11 [R=301,L] 
```

顺便提一句。一个点也一样`.`。它是一个可以匹配任何字符的特殊字符，所以如果它应该匹配一个点，请转义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:03:07.617

您的重写规则由空格分隔的 3 部分组成

```
the regex: ^blog/2012/04

the target: http://example\.com/2012/04\?cat=306,10,11

flags: [R=301,L] 
```

没有应用于目标的正则表达式！

如果要将查询字符串从源 url 携带到目标 url，可以执行以下操作：

```
RewriteCond %{QUERY_STRING} (.*)
RewriteRule ^blog/2012/04$ http://example.com/2012/04?%1 [R=301,L] 
```

# android - 整个android应用程序的触摸事件

> ID：12577671
> 
> 赞同：4
> 
> 时间：2012-09-25T06:56:38.183
> 
> 标签：android

我正在开发一个新的应用程序，我非常怀疑它是否可能？我的疑问是

我们必须为整个应用程序设置一个时间监听器。我们必须为应用程序中发生的任何触摸事件运行一组代码。**例如。**我们的应用程序中可能有 n 个活动。但是我们必须为所有活动设置一个时间监听器，并在 n 个活动中的任何一个发生任何触摸时运行一组代码。我为此做了很多尝试。欢迎任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:13:28.013

我希望我理解你的正确。

您可以做的是创建一个扩展 Activity 的类，比如说 TouchActivity。您的每一项活动都将继承 TouchActivity。

```
 public class TouchActivity extends Activity 
{
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {
        if (event.getAction() == MotionEvent.ACTION_DOWN)
        {
            Log.d("Touch", "Touch");
            sendBroadcast(new Intent("touch_event_has_occured"));
        }

        return super.onTouchEvent(event);
    }
} 
```

现在在您的全球广播接收器中，您将获得广播

```
public class TouchReveiver extends BroadcastReceiver 
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        if (intent.getAction().equals("touch_event_has_occured"))
        {
            Log.d("Touch", "Touch");
        }
    }

} 
```

不要忘记使用动作注册接收器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:08:47.733

您可以创建一个不可见的自定义视图，占用所有屏幕并使用 onTouchEvent 执行您需要执行的任何操作。

然后，您需要让每个布局文件在顶部包含该视图（可能在 FrameLayout 中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:08:14.117

您可以做的是，创建一个由应用程序中所有其他活动扩展的基本活动类。然后，您可以覆盖`public boolean dispatchTouchEvent (MotionEvent ev)`此基本活动中的方法。这个被覆盖的实现将是您所有触摸事件的唯一位置。

但是有一个重要的警告，它仅在您的所有活动都属于同一类型的情况下才有效（例如 - 所有活动都是`Activitiy`类型或所有活动都是类型`ListActivity`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T13:07:33.300

如果您想在整个应用程序中使用它，您需要创建从 ActionBarActivity（或 SherlockActivity）扩展的类

```
public class MyCustomActivity extends ActionBarActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        FrameLayout decorView = (FrameLayout) getActivity().getWindow().getDecorView();
        decorView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.d(TAG, "Click X:" + event.getX() + " Y:" + event.getY());
                return false;
            }
        });
    }
} 
```

然后从 MyCustomActivity 扩展所有其他活动：

```
public class MainActivity extends MyCustomActivity{ } 
```

比所有触摸事件都将通过您的 TouchListener 事件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:09:01.310

完全有可能。

创建一个名为`MyTouchActivity`（或其他）的活动覆盖`onTouch`事件并编写`set`您正在谈论的代码。

现在，所有其余的`n`活动都应该扩展`MyTouchActivity`而不是常规活动。这样，该代码将被继承到您的所有 n 个活动中。您需要创建 Seperate `MyTouchListActivity`（用于 ListActivity）和 MyTouchMapActivity（用于 MapActivity）

另一种方法是简单地创建一个 Ontouch 监听器，然后覆盖每个`onTocuh`活动中的每个事件以首先调用您的监听器。但这很麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-29T16:35:44.570

使用`dispatchTouchEvent`or`onTouch`方法的解决方案不适用于整个应用程序。因为有不同类型的窗户。例如，如果弹出片段或用户单击菜单，这些解决方案将无法捕获触摸事件，因为在这些情况下会发生其他事情。

长话短说，我正在为我的高级项目处理这个问题，我开发了一个能够收集应用程序的所有触摸事件的库。该库依赖于棘手的方法，但它也可以工作。该库是开源的。如果需要，您可以检查它：[https ://github.com/fatih-iver/touchy](https://github.com/fatih-iver/touchy)

只需将其添加为依赖项：

```
implementation 'fun.observe:touchy:1.0.0' 
```

然后，通过注册您的接收器来使用它：

```
MotionEventBroadcaster.registerReceiver(new MotionEventReceiver() {
    @Override
    protected void onReceive(MotionEvent motionEvent) {
        Log.d(TAG, motionEvent.toString());
    }
}); 
```

# ios-simulator - UIManagedDocument CompletionHandler 未在 iOS 5.1 模拟器中执行，但适用于设备和 iOS 6.0 模拟器

> ID：12577672
> 
> 赞同：2
> 
> 时间：2012-09-25T06:56:40.750
> 
> 标签：ios-simulator, uimanageddocument

我希望有人对此有一些想法......

我有一个使用 UIManagedDocument 的项目。我在 appDelegate 中做的第一件事是打开文档。一切都很顺利，直到突然（代码中没有任何更改） -openWithCompletionHandler: 停止执行处理程序代码。该应用程序在设备上运行良好，但在模拟器中却不行。作为一个云雀，我尝试在 iOS 5.0 和 6.0 模拟器下运行该应用程序，一切都按预期运行！？！

我重新安装了 xcode 4.5 并且行为保持不变。我通过删除应用程序文件夹中的 xcode 应用程序来卸载。我还删除了 ~/Library/Application Support/iPhone Simulator/ 目录中的所有 iPhone 模拟器文件。

有人有什么想法吗？

# java - 在 Java Web 应用程序中自动跟踪用户位置

> ID：12577674
> 
> 赞同：-1
> 
> 时间：2012-09-25T06:56:51.497
> 
> 标签：java, jsp, jakarta-ee

如何在 Java Web 应用程序中自动跟踪用户位置？

我不想从用户那里获取像乡村城市这样的输入。任何人都可以让知道如何使用**maxmind api**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:02:19.827

在 Web 应用程序上对用户进行地理定位有很多选项。

最常用的一种可以是基于 javascript 的地理定位。

[http://code.google.com/p/geo-location-javascript/](http://code.google.com/p/geo-location-javascript/)

您可以在您的 *.jsp 页面上使用它来定位用户并将您想要保存的信息（如坐标）发送到 servlet。

希望它有所帮助，如果您想要另一种方法，请告诉我。

# email - 转发模块无法发送电子邮件

> ID：12577678
> 
> 赞同：1
> 
> 时间：2012-09-25T06:57:15.703
> 
> 标签：email

我是使用drupal的新手，并且一直停留在一个我无法弄清楚我哪里出错的地方......

我需要在我的网站上创建“推荐朋友”应用程序。为此，任何人都可以向我推荐可以用于此目的的最佳模块。

我为此找到了许多相关模块，但不幸的是，这些模块与 Drupal 7 不兼容，例如：告诉朋友告诉朋友节点

是否有任何替代模块可用于“推荐朋友”应用程序，我可以在其中向多个收件人发送邮件？

同时，我正在使用通过电子邮件发送整个页面的“转发”模块。我已经完全安装了它，但我无法发送任何邮件。在此之前，我使用了“Webform”模块，为此我什至安装了 SMTP 并正确配置了它，而且我还能够从这个模块发送电子邮件。我无法确定我哪里出错了。我还需要为“转发”模块配置什么以便正确发送电子邮件吗？

我收到以下错误：无法发送电子邮件。如果问题仍然存在，请联系站点管理员。

# ubuntu - 无法使用 Minicom 将输入从 USB 发送到串行连接的硬件

> ID：12577686
> 
> 赞同：14
> 
> 时间：2012-09-25T06:57:31.823
> 
> 标签：ubuntu, usbserial

我正在尝试从安装了 Ubuntu 的 PC 与我的硬件板通信。我使用了 USB 转串口线，串口线连接到硬件，USB 连接到我桌面的 USB 端口。我使用了 minicom，它运行良好，就像我能够看到我的硬件的输出一样。但问题是我无法输入任何内容。它无法识别我的键盘输入。没有它，它完全没用。有人可以在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T07:30:27.257

了解设备是什么将有助于回答这个问题。

如果您看到设备**的输出良好**，那么很可能是软件方面运行良好。这是个好消息。问题可能是：

*   设备不会回显您的输入。它是否以任何其他方式对您的输入做出反应？如果您想在设备不支持回显的情况下查看您的输入，您可以打开 minicom 软件中的本地回显功能。
*   设备有故障。这可能是硬件问题，例如接触不良或设备的固件问题。

您也可以尝试使用 minicom 的替代软件。这不会解决问题，但可以帮助您更轻松地找到原因。gtkterm 就是这样一种带有 GUI 的软件。像这样安装和使用。所有选项和配置都可以通过菜单获得：

```
sudo apt-get install gtkterm
gtkterm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:02:16.473

我经历过类似的事情，最终成为我使用的卡的驱动程序问题。安装不同版本的驱动程序后，它可以正常工作。

# actionscript-3 - 在 Flex 中将字符串转换为日期对象

> ID：12577687
> 
> 赞同：4
> 
> 时间：2012-09-25T06:57:32.967
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex4

> **可能重复：**
> [日期到字符串 <-> 字符串到日期](https://stackoverflow.com/questions/3135829/date-to-string-string-to-date)

我有一个字符串形式的日期：

```
"Tue Sep 25 12:24:18 GMT+0530 2012" 
```

如何将此字符串转换为日期对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T07:20:52.737

```
var d:Date = new Date();
d.setTime(Date.parse(str)); 
```

# android - 振动不起作用 ICS

> ID：12577689
> 
> 赞同：0
> 
> 时间：2012-09-25T06:57:43.413
> 
> 标签：android, vibration

我已在清单中授予 VIBRATE 权限。在我的应用程序中，我有以下代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_parent_control);

    vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE) ;
    vibe.vibrate(100);} 
```

但什么也没有发生。任何想法为什么？这可能是一件非常愚蠢的事情。我确实检查了我的手机是否在振动并且它在不同的应用程序中。

银河 s3 ICS-4.0.4

这是清单

```
import android.os.Vibrator;...

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="Jino.parentcontrol"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name=".ParentControl"
        android:screenOrientation="portrait"
        android:label="@string/title_activity_parent_control" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是我完整的 onCreate 函数。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_parent_control);

    vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE) ;
    vibe.vibrate(100);
    Connection_Status=0;

    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
    }

    mapview = new MapView(ParentControl.this, getString(R.string.debug_mapview_apikey));
    mapview.setClickable(true);
    mapview.setBuiltInZoomControls(true);
    mapview.setSatellite(true);

    mapcontrol = mapview.getController();
    mapcontrol.setZoom(19);

    myLocationManager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );

    me=new MyCustomLocationOverlay(this, mapview);
    mapview.getOverlays().add(me);

    me.enableMyLocation();
    me.enableCompass();

    CenterMap();

    RelativeLayout layout= (RelativeLayout) findViewById(R.id.my_layout);
    layout.addView(mapview);

    probar=(ProgressBar) findViewById(R.id.progressBar);

    probar.setMax(100);
    probar.setBackgroundColor(Color.BLACK);
    probar.setProgress(100);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:06:51.633

需要在声音 -> 振动强度菜单中打开触觉反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:39:55.880

我测试了你的代码。完美运行，没有任何问题。

我有以下内容：

在清单中：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

在主要活动中

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Vibrator vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE) ;
    vibe.vibrate(100);
} 
```

尝试增加振动时间？

# java - 无法解析芬兰语言环境中的日期

> ID：12577694
> 
> 赞同：3
> 
> 时间：2012-09-25T06:57:59.723
> 
> 标签：java, android, date, locale

我正在尝试使用我在 Stack Overflow 上找到的示例解析芬兰日期，但我不断收到解析异常。

这是我的片段：

```
SimpleDateFormat dftFormat = new SimpleDateFormat("dd MMMM yyyy", new Locale("fi", "FI"));
Date datDate = dftFormat.parse("25 syyskuu 2012"); 
```

这些`DateFormat`字符似乎与英文中的字符相同，所以我想知道为什么这不起作用。

这是[有关芬兰语言环境](http://www.localeplanet.com/java/fi-FI/index.html)的信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:15:03.490

似乎所有芬兰日期都以 ta ie`syyskuu`结尾`syyskuuta`。

我提供的语言环境参考是错误的。如果您看到该链接，您会注意到`ta`缺少该链接，这是一些误导性信息。我在 Javadocs 中找不到芬兰语言环境的确切语言环境信息。

感谢@Eis 和@Fildor，我吸取了教训，使用您的解析格式打印出日期以查看结果字符串是什么。然后您可以使用该格式比较您的输入字符串是否可解析。

这是我测试代码的方法：

```
Date datDate = dftFormat.parse("25 syyskuuta 2012");
System.out.println(new SimpleDateFormat("dd MMMM yyyy").format(datDate)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-12T02:04:06.977

# tl;博士

`syyskuu`和都是芬兰语`syyskuuta`的正确拼写`September`。第一个用于独立使用，第二个用于上下文。

枚举可以提供任何一种[`java.time.Month`](https://docs.oracle.com/javase/8/docs/api/java/time/Month.html)拼写形式。

# java.time

`java.util.Date`我使用现代的 java.time 类而不是旧的过时的类尝试了这种相同的代码`java.text.SimpleDateFormat`。

Java 8 及更高版本中内置的[java.time框架。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

## 日期值的格式化字符串

对于此示例，我们根据问题实例化[`LocalDate`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)2012 年 9 月 25 日的 a。

```
LocalDate ld = LocalDate.of ( 2012 , Month.SEPTEMBER , 25 );  // 2012-09-25 
```

我们得到一个[`DateTimeFormatter`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html?is-external=true)在生成字符串时自动本地化的方法。调用[`ofLocalizedDate`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofLocalizedDate-java.time.format.FormatStyle-)意味着我们的字符串将仅代表日期时间值的日期部分。控制字符串的[`FormatStyle`](http://docs.oracle.com/javase/8/docs/api/java/time/format/FormatStyle.html)长度（完整、长、中、短）。

```
DateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDate ( FormatStyle.LONG ); 
```

接下来，我们将[JVM 当前默认值`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#getDefault--)的分配替换为[芬兰](https://en.wikipedia.org/wiki/Finland)和[芬兰](https://en.wikipedia.org/wiki/Finnish_language)语言环境。该[`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)对象决定了两件事：(a) 用于翻译诸如日期名称或月份名称等片段的人类语言，以及 (b) 缩写、排序元素（例如月份或日期优先、逗号与句点的使用）的文化规范， 等等。

```
Locale locale = new Locale ( "fi" , "FI" );
formatter = formatter.withLocale ( locale ); 
```

使用该格式化程序实际生成 a`String`来表示我们的`LocalDate`值。

```
String output = ld.format ( formatter );  // 25\. syyskuuta 2012 
```

转储到控制台。

```
System.out.println ( "ld: " + ld + " with locale: " + locale + " | output: " + output ); 
```

> 25.  西斯库塔 2012

如[接受的答案](https://stackoverflow.com/a/12603731/642706)所示，java.time 同意这`syyskuuta`是九月的月份名称。

# 显示月份名称

java.time 类包括[enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。这个方便的类具有生成字符串的功能，该字符串的月份名称本地化为.[`Month`](http://docs.oracle.com/javase/8/docs/api/java/time/Month.html) [`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)

这种本地化类似于我们在上面的代码中看到的本地化的想法。但不同的是使用不同的枚举来控制文本的长度。在这里，[`TextStyle`](http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html)枚举（而不是[`FormatStyle`](http://docs.oracle.com/javase/8/docs/api/java/time/format/FormatStyle.html)）提供了完整、窄和短……但也提供了这三种长度的“独立”版本。在某些语言中，单独使用文本时使用的单词与完整日期不同。只是为了好玩，让我们用芬兰语试试。

```
Locale locale = new Locale ( "fi" , "FI" );
EnumSet<TextStyle> styles = EnumSet.allOf ( TextStyle.class );

for ( TextStyle style : styles ) {
    System.out.println ( style + " | " + Month.SEPTEMBER.getDisplayName ( style , locale ) );
} 
```

## 谜团解开：独立月份名称

果然，下面的输出解释了这个谜团。芬兰语：

*   单独使用月份名称时，删除`ta`for `syyskuu`。
*   在特定日期时间值的上下文中使用时，包括`ta`for `syyskuuta`。

> 完整 | 西斯库塔
> 
> 全独立 | 西斯库
> 
> 简短 | 西斯库塔
> 
> SHORT_STANDALONE | 系统
> 
> 窄 | 小号
> 
> NARROW_STANDALONE | 小号

如果您无法控制应用程序中格式不正确的输入，您可以搜索并用正确版本替换任何独立值。或者也许你可以[`DateTimeFormatterBuilder`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatterBuilder.html)期待独立版本（我不知道这是否可能，只是一个想法）。

# android - 两个 arrayList 在 diff 类中合二为一

> ID：12577695
> 
> 赞同：0
> 
> 时间：2012-09-25T06:58:04.983
> 
> 标签：android

嗨，我班上有两个 listArrays。我想在活动类中使用一个类，但我想将两者都放在一个arrayList 中，该arrayList 存在于我所有应用程序中定义的公共类中。数据名称是 Data 我的第一个类包含下一个数组：

```
//Class1

public static ArrayList<String> array1=new ArrayList<String>();
public static ArrayList<String> array2=new ArrayList<String>();

//Data
public static ArrayList<Class1> getE = new ArrayList<Class1>(); 
```

好吧，我尝试在 Activity 类中使​​用 class1 中的 obj 从 listArray 中获取值，但是应用程序在运行时崩溃了。这就是为什么我想将数组的值放入 Data 类中的一个数组中。接下来我展示了我是如何使用这个对象的：

```
//ActivityClass
Class1 c1=new Class1();
if(c1.array1.get(1)=="1")
    {
    return ;
     } 
```

第一个问题：如何将array1和array2中的值放入Data类getE中的数组中？？

第二问：为什么我在ActivityClass中使用obj时app崩溃了？

```
09-25 07:03:04.888: E/UNIVERSITY(645): Size of List Before 0
09-25 07:03:06.948: I/dalvikvm(645): threadid=3: reacting to signal 3
09-25 07:06:54.738: E/AndroidRuntime(645): FATAL EXCEPTION: main
09-25 07:06:54.738: E/AndroidRuntime(645): java.lang.NullPointerException
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.university.app.PersonalHome$1.onItemClick(PersonalHome.java:61)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.university.app.controls.CarouselAdapter.performItemClick(CarouselAdapter.java:261)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.university.app.controls.Carousel.onSingleTapUp(Carousel.java:964)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:568)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.university.app.controls.Carousel.onTouchEvent(Carousel.java:310)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.View.dispatchTouchEvent(View.java:5541)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.View.dispatchPointerEvent(View.java:5721)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.os.Looper.loop(Looper.java:137)
09-25 07:06:54.738: E/AndroidRuntime(645):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-25 07:06:54.738: E/AndroidRuntime(645):  at java.lang.reflect.Method.invokeNative(Native Method)
09-25 07:06:54.738: E/AndroidRuntime(645):  at java.lang.reflect.Method.invoke(Method.java:511)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-25 07:06:54.738: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-25 07:06:54.738: E/AndroidRuntime(645):  at dalvik.system.NativeStart.main(Native Method)
09-25 07:18:01.538: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:511) 
```

# delphi - 从 vb6 到 delphi 的带有 WM_COPYDATA 的发送消息是乱码

> ID：12577701
> 
> 赞同：2
> 
> 时间：2012-09-25T06:58:20.987
> 
> 标签：delphi, vb6, delphi-7, sendmessage, wm-copydata

我正在使用来自 vb6 应用程序的 WM_COPYDATA 将数据发送到 delphi 应用程序。在我本地为英语的系统中，我正确接收数据，但在另一个使用荷兰语本地的系统上，接收文本是乱码。

接收应用程序是delphi，代码是

```
procedure TReceiverMainForm.WMCopyData(var Msg: TWMCopyData);
var
  copyDataType: TCopyDataType;
begin
  copyDataType := TCopyDataType(Msg.CopyDataStruct.dwData);

  //Handle of the Sender
  mmoResult.Lines.Add(Format('WM_CopyData from: %d', [msg.From]));

  case copyDataType of
    cdtString: HandleCopyDataString(Msg.CopyDataStruct);
  end;

  //Send something back
  msg.Result := mmoResult.Lines.Count;
end;

procedure TReceiverMainForm.HandleCopyDataString(
  copyDataStruct: PCopyDataStruct);
var
  s: string;
begin
  s := PChar(copyDataStruct.lpData);
  mmoResult.Lines.Add(s);
end; 
```

**编辑**

这是发送数据的vb6代码，发送的数据是字符串

```
Dim buf() As Byte
ReDim buf(1 To LenB(Message))
Call CopyMemory(buf(1), ByVal Message, Len(Message))
cds.dwData = 0
cds.cbData = Len(Message) + 1
cds.lpData = VarPtr(buf(1))
' Send the string.
Dim i As Long
i = SendMessage(lHwnd, WM_COPYDATA, MainForm.hwnd, cds) 
```

谁能告诉我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:28:52.117

VB 字符串是基于 COM`BSTR`字符串类型的，就像 Delphi 的`WideString`字符串类型一样。A`BSTR`是 UTF-16 编码的 Unicode 字符串。 `LenB()`返回转换为本地机器的当前语言环境时 VB 字符串占用的字节数。你没有考虑到这一点。您没有将字符串字节正确复制到缓冲区中，也没有将`cds.cbData`字段设置为正确的值。 `Len()`返回字符串中 UTF-16 编码字符`LenB()`的数量，而返回字节数。对于英文字符串，`Len()`并且`LenB()`将返回相同的值，但不能保证对于外语。

我建议您按原样发送原始的 VB Unicode 编码数据，并更改您的 Delphi 代码以将传入数据视为 Unicode，而不是像当前那样处理 Ansi（`PChar`在 Delphi 7 中是 Ansi，但在 Delphi 2009+ 中是 Unicode）。

您还需要为该`cds.dwData`字段分配一个唯一值。 `WM_COPYDATA`VCL 将其用于一些自己的内部数据，因此您必须区分您的`WM_COPYDATA`消息和 VCL 的消息。

试试这个：

```
cds.dwData = RegisterWindowMessage("MyWMCopyData")
If cds.dwData <> 0 Then
  cds.cbData = Len(Message) * 2 ' characters are 2-bytes each
  cds.lpData = StrPtr(Message) ' access the string's character buffer directly
  ' Send the string. 
  Dim i As Long 
  i = SendMessage(lHwnd, WM_COPYDATA, MainForm.hwnd, cds) 
End If 
```

.

```
var
  uMyWMCopyDataMsg: UINT = 0;

procedure TReceiverMainForm.WMCopyData(var Msg: TWMCopyData); 
var 
  s: WideString; // you can use UnicodeString in D2009+ 
begin 
  if (uMyWMCopyDataMsg = 0) or (Msg.CopyDataStruct.dwData <> uMyWMCopyDataMsg) then
  begin
    inherited;
    Exit;
  end;

  mmoResult.Lines.Add(Format('WM_CopyData from: %d', [msg.From])); 

  SetString(s, PWideChar(Msg.CopyDataStruct.lpData), Msg.CopyDataStruct.cbData div SizeOf(WideChar)); 
  mmoResult.Lines.Add(s); 

  msg.Result := mmoResult.Lines.Count; 
end; 

initialization
  uMyWMCopyDataMsg := RegisterWindowMessage('MyWMCopyData'); 
```

# c# - 如何获得 MPN？

> ID：12577704
> 
> 赞同：1
> 
> 时间：2012-09-25T06:58:29.170
> 
> 标签：c#, ebay-api

在使用 eBay .NET SDK 时，我遇到了一个问题。我找不到我关注的一些字段，例如`EAN, Model, Brand, ASIN`and 特别是`MPN`.

我用作信息类的类是`eBay.Service.Core.Soap.ItemType`. 要获取有关我所做的产品的信息

```
GetItemCall call = new GetItemCall(_context);
call .DetailLevelList.Add(DetailLevelCodeType.ReturnAll);
item = apicall.GetItem(itemID.ToString()); 
```

我怎样才能得到这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:27:35.010

[http://developer.ebay.com/devzone/xml/docs/Reference/eBay/GetItem.html#Response.Item.ProductListingDetails.BrandMPN](http://developer.ebay.com/devzone/xml/docs/Reference/eBay/GetItem.html#Response.Item.ProductListingDetails.BrandMPN)？

# sql-server-2008-r2 - SQL Server BI 中的计数总和

> ID：12577705
> 
> 赞同：0
> 
> 时间：2012-09-25T06:58:32.587
> 
> 标签：sql-server-2008-r2, business-intelligence, reportbuilder

正在使用 SQL Server BI Development Studio 开发报告，当我尝试创建一个函数来汇总 StudentID 的计数时，我收到错误“聚合函数不能嵌套在其他聚合函数中”

以下是正在使用的表达式：- =Sum(Count(Fields!StudentID.Value))

我该如何进行这样的计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:31:06.187

你可以这样做

```
;With CountIds AS
(
SELECT COUNT(Fields!StudentID.Value) AS CountOfId FROM Table ... 
)
SELECT Sum(CountOfId)
FROM CountIds 
```

“With”为您提供了具有所需条件的 COUNT。然后你总结它。

但我不太确定查询返回你想要的。（因为当我测试查询时，它给我的结果与所有表上的 COUNT 相同。）我想你想知道的是“有多少算你有”。

如果是这样，我会这样做。

```
;With CountId AS
(
SELECT COUNT(Fields!StudentID.Value) AS CountOfId FROM Table ... 
)
SELECT TOP 1 ROW_NUMBER() OVER (ORDER BY CountOfId)
FROM CountIds
ORDER BY 1 DESC 
```

或者简单地说：

```
;With CountId AS
(
SELECT COUNT(Fields!StudentID.Value) AS CountOfId FROM Table ... 
)
SELECT COUNT(*) FROM CountIds 
```

# iphone - 如何在核心文本编程中设置字体大小和名称？

> ID：12577706
> 
> 赞同：4
> 
> 时间：2012-09-25T06:58:35.453
> 
> 标签：iphone, objective-c, ios, core-text

下面是我的代码崩溃

```
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText); 
```

我正在尝试设置字体，请帮助我谢谢。

```
+(void)drawText:(NSString*)textToDraw inFrame:(CGRect)frameRect
{

    //  CFStringRef stringRef = (__bridge CFStringRef)textToDraw;
    //  Prepare the text using a Core Text Framesetter

    NSAttributedString *stringRef=[[[NSAttributedString alloc]initWithString:textToDraw attributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIFont boldSystemFontOfSize:12.0],(NSString*)kCTFontAttributeName, nil]]autorelease];

    CFAttributedStringRef currentText =(__bridge CFAttributedStringRef)stringRef;
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);// at this Line it giving me EXC_BAD_ACCESS

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);
    CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CTFrameDraw(frameRef, currentContext);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2);
    CFRelease(frameRef);
    //CFRelease(currentText);
    CFRelease(framesetter);
    //CFRelease(stringRef);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T07:13:47.310

尝试这个

```
CTFontRef font = CTFontCreateWithName((CFStringRef)@"Helvetica", 16.0f, nil);
CFAttributedStringSetAttribute(currentText,CFRangeMake(0, _stringLength-1),kCTFontAttributeName,font); 
```

# ios - WebRTC 在 iOS 版 Chrome 21 中可用吗？

> ID：12577709
> 
> 赞同：4
> 
> 时间：2012-09-25T06:58:43.713
> 
> 标签：ios, google-chrome, webrtc

`GetUserMedia`如果在 iPad 或 iPhone 上运行的 Chrome 21 上启用但未成功，我正在尝试查找任何信息。

我知道它`peerConnection`仍然只能在 Chrome Canary 或普通 Chrome 上使用，但需要切换标志。据我所知，您无法`about:flags`在 iOS 上访问。目前有什么方法可以让 iOS 上的 Chrome 中的 WebRTC 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-22T18:19:31.677

我意识到这是一个老问题，但在过去的 2 年里，关于 WebRTC 和 iOS 的新信息已经被推出。

从我所读到的所有内容来看，Google 正在[慢慢地在 Chrome for iOS 中提供 WebRTC](https://groups.google.com/forum/#!topic/discuss-webrtc/bch_feIJn88)。但是，他们仍在[解决许多错误，](https://code.google.com/p/webrtc/issues/detail?id=3566)即使在 Chrome 32 中也仍处于早期阶段。

但简而言之，[这个讨论](https://groups.google.com/forum/#!topic/discuss-webrtc/B2f4vLaoXJI)显示了启用它的痛苦以及为什么 Chrome 21 有/没有它。

其他资源：

*   [有关该主题的最新 SO 问题](https://stackoverflow.com/questions/12811361/using-getusermedia-stream-api-with-ios-6)
*   [iOS 上的浏览​​器的其他一些问题](https://stackoverflow.com/a/23391401/1818849)

# android - 如何编译Android 2.3.4源代码并获取.img文件

> ID：12577710
> 
> 赞同：0
> 
> 时间：2012-09-25T06:58:54.597
> 
> 标签：android, android-source

我正在使用 TECHNEXION 的 Android ARM 板，我有 Android 2.3.4 源代码。

*   如何编译和获取`.img`文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:03:40.450

无论是来自 TechNexion、来自 TI 还是来自 Rowboat 项目的代码，它们都差不多。

您可以在此处找到构建的一般说明：[http ://code.google.com/p/rowboat/wiki/ConfigureAndBuild](http://code.google.com/p/rowboat/wiki/ConfigureAndBuild)

不要担心获取源的部分，但您需要更改 TARGET_PRODUCT 的名称或类似的东西。

这不会给你 .img 但至少文件系统和足够的开始。

# xaml - 在滑块上设置“SliderTrackThemeHeight”

> ID：12577712
> 
> 赞同：0
> 
> 时间：2012-09-25T06:59:04.363
> 
> 标签：xaml, windows-8, controltemplate

我正在尝试在 XAML 中设置滑块的样式。我看到拇指的大小由名为“SliderTrackThemeHeight”的静态资源控制。只是，我找不到这是在哪里定义的，所以我可以改变它？：/我现在可以手动输入它，但是将来我想重用一个控制模板，很高兴知道。

谢谢各位高手！

缺口

```
<Thumb x:Name="HorizontalThumb" Background="{StaticResource SliderThumbBackgroundThemeBrush}" Grid.Column="1" DataContext="{TemplateBinding Value}" Height="{StaticResource SliderTrackThemeHeight}" Grid.Row="1" Style="{StaticResource SliderThumbStyle}" Width="{StaticResource SliderTrackThemeHeight}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T18:12:10.837

定义任何双精度值（高度的情况）的模板是

< x:Double x:Key〓"customHeight"> 10 </x:Double>

现在您可以使用“customHeight”而不是slidertrackthemeheight 并将高度设为10。

# php - 具有爆炸倍数的 PHP 分隔符

> ID：12577715
> 
> 赞同：1
> 
> 时间：2012-09-25T06:59:11.520
> 
> 标签：php, explode

我正在编写一个简单的“httpref”程序，它将搜索引擎响应捕获到一个大文本文件中。例如，日志文件包含大量数据，并且每隔一段时间就会出现一个以 :`?q=`结尾的位置`&`：

> [http://www.bing.com/search?q=blogging+for+answers&qs=n&form=QBRE&pq=blogging+for+answers&sc=8-18&sp=-1&sk=](http://www.bing.com/search?q=blogging+for+answers&qs=n&form=QBRE&pq=blogging+for+answers&sc=8-18&sp=-1&sk=)

我想做的是使用explode 创建一个数组，它会过滤掉除所需结果之外的所有内容：即“博客+for+answers”。文本文件包含很多垃圾，我只想在每个`?q=`和`&`符号之间保留结果。

据我所见，没有一个简单的解析器可以从 URL 字符串中提取参数数据。

即`$q[0] = "blogging+for+answers"`
每次我使用explode with 时，`?q=`它只需要整个文本直到下一次出现`?q=`，我只希望它直到`&`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:21:08.453

用于[`parse_url`](http://php.net/manual/en/function.parse-url.php)获取查询字符串组件以及[`parse_str`](http://php.net/manual/en/function.parse-str.php)提取所需的查询字符串变量。

```
<? 
$url = "http://www.bing.com/search?q=blogging+for+answers&qs=n&form=QBRE&pq=blogging+for+answers&sc=8-18&sp=-1&sk=";
$querystring = parse_url($url,PHP_URL_QUERY);
parse_str($querystring,$arr);
echo $arr['q'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:16:34.337

试试[`parse_url()`](http://php.net/manual/en/function.parse-url.php)。

以下是相同的代码：

```
<?php
    $url = 'http://username:password@hostname/path?arg=value#anchor';
    print_r(parse_url($url));
    echo parse_url($url, PHP_URL_PATH);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:29:53.753

如上所述，这将为您提供 $q 作为数组。

```
$file = file_get_contents($filename);
preg_match_all("/http[^'\" ]*[?][^'\" ]*[&]q[=]([^'\"& ]*)/",$file ,$matches);

foreach($matches as $match)
     $q[] = $match[1]; 
```

编辑

解释这个表达式的作用。这将找到每次出现的情况`http*****?****&q=(result)[&'" ]`，然后将 $matches 作为每次出现的数组返回。该表达式还检查没有空格或引号，然后它不会添加到 $matches

# python - 在 Django 的列表中查找。查找单列

> ID：12577716
> 
> 赞同：0
> 
> 时间：2012-09-25T06:59:12.570
> 
> 标签：python, django

```
class A (models.Model):
name = models.charfield(max_length=200);
study = models.ForeignKey(Study);
b = models.CharField(max_length=200);

def__unicode__(self)
return "%s (%s)" % (self.name, self.id); 
```

在我的模板中，我想显示来自查询的数据

```
select name from A where id = 70. 
```

我已加载模板的列表，其他一切正常，但我无法获得该名称。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:01:09.843

查询是在视图中组装的，而不是在模板中。

```
A.objects.filter(id=70).values_list('name')
A.objects.get(id=70).name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:01:45.470

```
Q = A.objects.get(pk=70)
Q.name 
```

[有关Django 查询的](https://docs.djangoproject.com/en/dev/topics/db/queries/)更多详细信息

# css - Safari 和 Firefox 中的嵌套表 css，适用于 IE9

> ID：12577718
> 
> 赞同：0
> 
> 时间：2012-09-25T06:59:19.200
> 
> 标签：css, safari

嗨，我有许多表嵌套在一个表中，它在所有浏览器中都运行良好，但是当我旋转文本时，宽度比例在 Safari 和 FireFox 中不起作用，它在 IE9 中运行良好，我也注意到如果我有超过一个字的宽度增加了！！

这是样式：

```
.V-text
{
    padding: 0px;
    color: #333; /*  border: 0px solid red;*/
    /*writing-mode: tb-rl;*/
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    white-space: nowrap;
    display: inline-table;
    font-weight: normal; /* vertical-align: bottom; bottom: 0; text-align: center;*/
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;
} 
```

这是表格的一部分：

```
 <table width="920px" border="0" >
            <tr>
                <td>
                      <table width="50px">
                        <tr style="height: 105px" valign="middle">
                            <td align="center" class="t-border" width="15px">
                                <div class="V-text">
                                    text</div>
                            </td>
                            <td align="center" class="t-noborder" width="15px">
                                <div class="V-text">
                                    text</div>
                            </td>
                        </tr>
                    </table>

                            </td>
                        </tr>
                    </table> 
```

其他没有旋转的桌子效果很好。我试过 style="table-layout:fixed" 没用，我会很感激你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:31:41.943

花了两天时间，我发现最好的解决方案是使用图像作为表格的垂直部分，而不是尝试针对不同的浏览器进行修复。

# c# - 使用文件的字节数组作为字段序列化对象

> ID：12577719
> 
> 赞同：1
> 
> 时间：2012-09-25T06:59:22.067
> 
> 标签：c#, bytearray, file-transfer, binaryreader, object-serialization

我正在使用客户端-服务器程序通过网络发送文件。读取文件的字节后（使用`File.ReadAllBytes()`），我将字节数组设置为对象的字段。然后序列化对象并将其发送给客户端，客户端应该反序列化对象并使用`BinaryWriter`.

客户端-服务器之间的所有消息都是通过序列化一个名为 Command 的类的对象来传递的。

当文件加载到字节数组时，这种方法似乎会消耗大量内存。

谁能提出另一种机制，我可以一点一点地发送文件，而不会消耗太多内存。是否可以发送文件的内存地址，然后服务器使用客户端上的内存地址（使用循环）一点一点地拉文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:30:49.813

我认为最好的选择是使用流传输。这是 wcf 中的本机功能。

你可以在[这里](http://msdn.microsoft.com/en-us/library/ms789010.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms733742.aspx)找到帮助。

**编辑 ：**

您可以尝试像这样阅读和发送：

```
 using (FileStream fs = new FileStream(@"C:\...\file.txt", FileMode.Open))
  {
    byte[] buffer = new byte[1024];
    int len;
    while ((len = fs.Read(buffer, 0, buffer.Length)) > 0)
    {
      //client.Send(buffer, 0, len);
    }
  } 
```

# c# - 为什么我应该在可能的情况下使用隐式类型 (var)？

> ID：12577721
> 
> 赞同：5
> 
> 时间：2012-09-25T06:59:31.587
> 
> 标签：c#, implicit-typing

> **可能重复：**
> [C# 3.0 中 var 关键字的优势](https://stackoverflow.com/questions/884555/advantage-of-var-keyword-in-c-sharp-3-0)

昨天我偶然发现了 MS 的建议，我应该尽可能使用 var：

[http://msdn.microsoft.com/en-us/library/ff926074.aspx](http://msdn.microsoft.com/en-us/library/ff926074.aspx)

我一直认为使用正确的类型将有助于记录代码，也有助于在编译时发现错误。

这个推荐背后的原因是什么？

最佳托马斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T07:01:13.790

那么建议有：

[编码约定 - 隐式类型的局部变量](http://msdn.microsoft.com/en-us/library/ff926074.aspx)

> 当变量的类型从赋值的右侧**显而易见时，或者当精确类型****不重要**时，对局部变量使用隐式类型。

它并不总是。

它还具有：

> 当类型在赋值右侧不明显时，不要使用 var。

来自同一来源的示例：

```
// When the type of a variable is not clear from the context, use an 
// explicit type. 
int var4 = ExampleClass.ResultSoFar(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T07:02:05.050

它是一种减少击键的语法糖。

编译器通过计算 RHS 上的表达式来导出 LHS 上的变量类型。

所以如下代码：

```
var fStream = new FileStream("file", Filemode.Open); 
```

由编译器转换为：

```
Filestream fstream = new FileStream("file", Filemode.Open); 
```

编译器对我们的一些输入非常友好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T07:10:00.813

使用隐式类型并不意味着变量不是强类型的。这意味着编译器暗示了语句右侧的类型。

```
var i = 1; 
```

`i`is 定义为具有 type `int`。这和说的完全一样，`int i = 1;`但类型是隐含的。

同样，下面的代码更容易阅读：

```
var pairs = new List<pair<int, IEnumerable<string>>>(); 
```

比你必须输入：

```
List<pair<int, IEnumerable<string>>> pairs = new List<pair<int, IEnumerable<string>>>(); 
```

然而结果却完全一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T07:04:52.507

我的经验法则：

`var` **如果代码是通用的**，则应使用；即，如果将来类型发生变化，它是否可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:02:49.843

使用 var 不会损害您的性能，因为编译器会完成所有工作。它比打字更短`MyDatabaseModel model`。

使用 var 的另一个原因是您可以在右侧看到它是哪种类型。

使用它的最后一个原因是匿名类型（只要您不知道类型）。

# makefile - FreeBSD：Makefile Malformed conditional (${PORT_OPTIONS:MLIBSIGSEGV})，导致致命错误

> ID：12577723
> 
> 赞同：0
> 
> 时间：2012-09-25T06:59:47.040
> 
> 标签：makefile, freebsd

我正在寻找一种方法来在 FreeBSD 6.3 上的 ports 文件夹中安装各种端口包。

我正在尝试使用端口安装 m4，但是出现此错误。

```
[root@SM2-BSD /usr/ports/devel/m4]# make install
"Makefile", line 38: Malformed conditional (${PORT_OPTIONS:MLIBSIGSEGV})
"Makefile", line 41: if-less else
"Makefile", line 43: if-less endif
make: fatal errors encountered -- cannot continue 
```

这是在我做了一个之后发生的

```
portsnap fetch extract update 
```

在进行 make install 时，我在 emacs 端口中也遇到了类似的错误。

```
[root@SM2-BSD /usr/ports/editors/emacs]# make install
"Makefile", line 83: Malformed conditional (${PORT_OPTIONS:MCANNA})
"Makefile", line 92: if-less endif
"Makefile", line 100: Malformed conditional (${PORT_OPTIONS:MSVG})
"Makefile", line 106: Malformed conditional (${PORT_OPTIONS:MGTK2})
"Makefile", line 109: if-less elif
"Makefile", line 112: if-less elif
"Makefile", line 115: if-less elif
"Makefile", line 118: if-less elif
"Makefile", line 121: if-less endif
"Makefile", line 123: Malformed conditional (!${PORT_OPTIONS:MSCROLLBARS})
"Makefile", line 125: if-less endif
"Makefile", line 127: Malformed conditional (!${PORT_OPTIONS:MSYNC_INPUT})
"Makefile", line 129: if-less endif
"Makefile", line 131: Malformed conditional (${PORT_OPTIONS:MJPEG})
"Makefile", line 133: if-less else
"Makefile", line 135: if-less endif
"Makefile", line 137: Malformed conditional (${PORT_OPTIONS:MTIFF})
"Makefile", line 139: if-less else
"Makefile", line 141: if-less endif
"Makefile", line 143: Malformed conditional (${PORT_OPTIONS:MGIF})
"Makefile", line 145: if-less else
"Makefile", line 147: if-less endif
"Makefile", line 149: Malformed conditional (${PORT_OPTIONS:MPNG})
"Makefile", line 151: if-less else
"Makefile", line 153: if-less endif
"Makefile", line 155: Malformed conditional (${PORT_OPTIONS:MXPM})
"Makefile", line 157: if-less else
"Makefile", line 159: if-less endif
"Makefile", line 161: Malformed conditional (${PORT_OPTIONS:MXFT})
"Makefile", line 165: Malformed conditional (${PORT_OPTIONS:MM17N})
"Makefile", line 168: if-less else
"Makefile", line 170: if-less endif
"Makefile", line 171: Malformed conditional (${PORT_OPTIONS:MOTF})
"Makefile", line 174: if-less else
"Makefile", line 176: if-less endif
"Makefile", line 177: if-less else
"Makefile", line 179: Malformed conditional (${PORT_OPTIONS:MM17N})
"Makefile", line 181: if-less elif
"Makefile", line 183: if-less endif
"Makefile", line 185: if-less endif
"Makefile", line 187: Malformed conditional (${PORT_OPTIONS:MMAGICK})
"Makefile", line 190: if-less else
"Makefile", line 192: if-less endif
"Makefile", line 194: Malformed conditional (${PORT_OPTIONS:MGSETTINGS})
"Makefile", line 197: if-less else
"Makefile", line 199: if-less endif
"Makefile", line 201: Malformed conditional (${PORT_OPTIONS:MGCONF})
"Makefile", line 204: if-less else
"Makefile", line 206: if-less endif
"Makefile", line 208: Malformed conditional (${PORT_OPTIONS:MXIM})
"Makefile", line 210: if-less else
"Makefile", line 212: if-less endif
"Makefile", line 214: if-less endif
"Makefile", line 216: Malformed conditional (${PORT_OPTIONS:MSOUND})
"Makefile", line 218: if-less else
"Makefile", line 220: if-less endif
"Makefile", line 222: Malformed conditional (${PORT_OPTIONS:MDBUS})
"Makefile", line 225: if-less else
"Makefile", line 227: if-less endif
"Makefile", line 229: Malformed conditional (${PORT_OPTIONS:MXML})
"Makefile", line 232: if-less else
"Makefile", line 234: if-less endif
"Makefile", line 236: Malformed conditional (${PORT_OPTIONS:MGNUTLS})
"Makefile", line 239: if-less else
"Makefile", line 241: if-less endif
make: fatal errors encountered -- cannot continue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:08:07.913

您的`make`实用程序太旧，无法处理当前端口树的 Makefile 使用的功能。您必须更新操作系统或`make`实用程序以及它使用的所有基础架构（*.mk 文件）。后者是一项艰巨的任务，不推荐。如果您不想更新当前操作系统，那么在虚拟机中安装当前操作系统怎么样？VirtualBox 可能是一个好的开始（尽管您可能在这里面临另一个鸡与蛋的问题：VirtualBox 端口 Makefile 可能会导致相同的错误。）我会认真考虑将您的操作系统更新为 9-STABLE 并让所有这些问题成为一个非问题。

# arrays - 连接字符串数组中的特定索引

> ID：12577725
> 
> 赞同：1
> 
> 时间：2012-09-25T06:59:48.627
> 
> 标签：arrays, vb.net, string

在 vb.ne 应用程序中，我有一个字符串数组，如下所示

```
dim s1() as array = {"vase",  "kalr", "7", "cm", "blue"} 
```

那么是否有一个函数可以通过指定我要加入的索引使其看起来像下面这样？

```
{"vase",  "kalr", "7cm", "blue"} 
```

我有很多这样的情况，有时我需要根据某些条件加入 4 个索引，那么做这些事情的最佳方法是什么？

另一个更复杂的例子

```
{"vase",  "kalr", "7x" , "12" , "cm", "blue"} 
```

需要它看起来像

```
{"vase",  "kalr", "7x12cm", "blue"} 
```

# java - 完成任务后如何停止石英调度程序

> ID：12577727
> 
> 赞同：0
> 
> 时间：2012-09-25T06:59:56.087
> 
> 标签：java, swing, quartz-scheduler

我正在创建一个从目录上传文件的 Swing UI。我们正在使用 Quartz 安排这个任务。现在我的问题是，按下停止按钮时，调度程序应该停止并且文件上传过程也应该停止。我想要一个文件要么完全传输，要么根本不传输。我怎么做？

文件上传的代码片段

```
File uploadDir = new File("E:\\SFTP_UPLOAD_DIR\\");
File[] listOfFiles = uploadDir.listFiles();
for (int i = 0; i < listOfFiles.length; i++) {
    if (listOfFiles[i].isFile()) {
       SftpUtil.uploadFile(ConfigurationClass.TEMP_FOLDER_LOCATION 
          + listOfFiles[i].getName(), host, userId, password, destDir);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:09:26.273

我不确定你真正想要实现什么，但如果你想链接 2 个作业（一个上传，一个停止调度程序），可以使用 JobChainingJobListener（[http://quartz-scheduler.org/ api/2.1.5/org/quartz/listeners/JobChainingJobListener.html](http://quartz-scheduler.org/api/2.1.5/org/quartz/listeners/JobChainingJobListener.html) )

HIH

# tomcat - 使用基本的 tomcat 身份验证

> ID：12577728
> 
> 赞同：1
> 
> 时间：2012-09-25T07:00:06.577
> 
> 标签：tomcat, authentication

我有一个需要实现 tomcat 身份验证的小型应用程序。在挖掘互联网后，我发现 Realm 是解决方案。我还知道了如何配置我的 tomcat-users.xml、server.xml 和 web.xml。但它仍然无法正常工作。

我在 web.xml 中添加了这段代码

```
<security-constraint>
    <web-resource-collection>
    <web-resource-name>hp</web-resource-name>
    <url-pattern>/pages/bill.jsp</url-pattern>
    </web-resource-collection>
    <auth-constraint>
    <role-name>Admin</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
     <auth-method>BASIC</auth-method>>
     <realm-name>default</realm-name>>
 </login-config> 
```

在 login-config 中，我得到 Element 'login-config' cannot have character [children]，因为该类型的内容类型是仅元素。可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T14:14:46.590

您的 XML 无效 - 您有两个 ">" 字符

更正数据的结尾

```
<login-config>
     <auth-method>BASIC</auth-method>>
     <realm-name>default</realm-name>>
 </login-config> 
```

到

```
<login-config>
     <auth-method>BASIC</auth-method>
     <realm-name>default</realm-name>
 </login-config> 
```

我不确定tomcat会为您的无效xml提供什么错误，但它肯定不会按原样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:26:09.217

这个问题可能已经在这个网站的其他地方得到了回答。但这里有一些帮助。

1.  不要使用 BASIC（也不是 DIGEST）身份验证，使用 FORM 身份验证。这就是为什么：[如何强制 Jetty 在会话无效后通过 BASIC 身份验证请求凭据？](https://stackoverflow.com/questions/2180206/how-to-force-jetty-to-ask-for-credentials-after-invalidating-the-session)

2.  您可能希望首先从（表单身份验证和）内存领域开始（即在 tomcat-users.xml 中定义用户和角色），然后可能会尝试使用 JDBC 领域，最后是 DatasourceRealm。

阅读[Tomcat 文档](http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html#What_is_a_Realm?)以了解这种爵士乐是如何工作的。

我写了一些关于这个主题的笔记（身份验证方法和领域），看看，应该比遵循 tomcat 文档更容易。[https://sites.google.com/site/adrienitnotes/java/web-apps-login-system-in-tomcat-container](https://sites.google.com/site/adrienitnotes/java/web-apps-login-system-in-tomcat-container)

*   **警告：**您可能会从内存领域开始，在 Eclipse 中运行 Tomcat 时要小心（tomcat-user.xml 配置更改问题）：

当您创建一个新服务器时，一组配置文件会从您的 Tomcat 安装导入（复制）到您工作区中 Servers 项目下的相应文件夹中。有时 Eclipse 不会更新此文件，因此您的更改将被忽略。

解决方案1：建议在Tomcat中手动部署.war文件来运行此类应用程序（在Eclipse之外运行Tomcat）。

解决方案 2：使用相关更改修改 localhost-config\tomcat-users.xml 中的 \Servers\Tomcat v7.0 Server***可能会***解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T15:09:04.307

我碰巧偶然发现了这个老问题，你可能很久以前就解决了这个问题，但我想我还是可以提供一个答案。

和之后有多余的`>`字符。删除那些应该可以解决问题。`</auth-method>``</realm-name>`

# c# - 如何传递可选参数

> ID：12577730
> 
> 赞同：6
> 
> 时间：2012-09-25T07:00:10.010
> 
> 标签：c#, optional-parameters

我有一个具有两个固定参数的函数。但是下一个参数不是固定的，可以有两个或三个或四个。

这是一个运行时参数，那么我该如何定义该函数？

我的代码如下所示：

```
public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, dynamic arguments comming it should be 2 or 3)
        {

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T07:28:21.553

1)[参数（C# 参考）](http://msdn.microsoft.com/ru-ru/library/w5zay9db.aspx)

```
public ObservableCollection<ERCErrors>ErrorCollectionWithValue
                (string ErrorDode, int MulCopyNo, params object[] args)
{
    //...
} 
```

2)[命名和可选参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

```
public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, object arg1 = null, int arg2 = int.MinValue)
{
    //...
} 
```

3）也许简单的方法[重载](http://csharpindepth.com/Articles/General/Overloading.aspx)仍然更适合，将方法逻辑分离到不同的方法？在此链接下，您还可以找到命名参数和可选参数的另一个描述

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:19:04.220

一种方法是重载方法

```
public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, int param1)
{
   //do some thing with param1
}

public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, int param1,int param2)
{
   //do some thing with param1 and param3
}

public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, int param1, int param2, int param3)
    {
       //do some thing with param1, param2 and param3
    } 
```

那么所有这些都是有效的

```
var err = ErrorCollectionWithValue("text", 10, 1);
var err = ErrorCollectionWithValue("text", 10, 1,2);
var err = ErrorCollectionWithValue("text", 10, 1,2,3); 
```

另一种方法是使用可选参数。有了这个，你只需要一个方法，而不是第一种方法中的 3 个。

```
public ObservableCollection<ERCErrors> ErrorCollectionWithValue
    (string ErrorDode, int MulCopyNo, int param1 = 0, int param2 = 0, optional int param3 = 0)
{

} 
```

这些仍然有效

```
var err = ErrorCollectionWithValue("text", 10, 1); //defaults param2 and param3 to 0
var err = ErrorCollectionWithValue("text", 10, 1,2); //defaults param3 to 0
var err = ErrorCollectionWithValue("text", 10, 1,2,3); 
```

要跳过任何可选参数，您需要使用[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)，[这](http://www.codeproject.com/Articles/37795/C-4-0-s-New-Features-Explained)仅在 C# 4.0 及更高版本中受支持

```
var err = ErrorCollectionWithValue("text", param3: 5); //skipping param1 and param2 
```

在其他两种方法中，您不能跳过参数的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T07:29:32.863

如果参数的数量可能会有所不同，您可以使用[params](http://msdn.microsoft.com/en-us/library/w5zay9db%28VS.71%29.aspx)：

```
public ObservableCollection<ERCErrors> ErrorCollectionWithValue(string errorCode, int num, params object[] args) 
{ 
  foreach(object obj in args)
{
  //process args.
}
} 
```

# xpages - Designer 8.5.3 中缺少 XPage？

> ID：12577731
> 
> 赞同：0
> 
> 时间：2012-09-25T07:00:16.043
> 
> 标签：xpages

我真的很想知道“xapges 从 Designer 8.5.3 消失”的原因是什么？

我不知道是因为缺少插件还是其他原因...... bt 想知道可能的原因。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:56:57.420

根据 Frantisek 的评论....

Domino 8.5.3 引入了用于 Notes 客户端开发的三个独立的 Perspectives Forms/View、用于 XPages 开发的 XPages 和用于混合 Notes CLient 和 Xpages 开发的 Domino Designer 透视图。这些视角限制了包含的视图数量和显示的设计元素，这些元素与每种开发风格相关。

# c++ - 构造函数 C++ 的多重声明

> ID：12577732
> 
> 赞同：0
> 
> 时间：2012-09-25T07:00:23.287
> 
> 标签：c++, declaration

我的班级 Point3D 出现错误，我真的不明白为什么。

这是我的标题：

```
#ifndef POINT3D_H
#define POINT3D_H

using namespace std;
class Point3D {

public:
    Point3D(float x, float y, float z);
    float operator[] (const int i);
private:
    float xyz[3];

};

#endif 
```

这是cpp文件：

```
#include "point3d.h"

Point3D::Point3D(float x, float y, float z){
    xyz[0] = x;
    xyz[1] = y;
    xyz[2] = z;
}

float Point3D::operator[](int i )
{

    if(i == 0){
        return xyz[0];
    }
    else if(i == 1){
        return xyz[1];
    }
    else if(i == 2){
        return xyz[2];
    }

    return -1;

} 
```

存在编译器错误：

```
/tmp/ccyDEfcW.o: In function `Point3D::Point3D(float, float, float)':
vector3d.cc:(.text+0x0): multiple definition of `Point3D::Point3D(float, float, float)'
/tmp/ccqDasr3.o:point3d.cc:(.text+0x0): first defined here
/tmp/ccyDEfcW.o: In function `Point3D::Point3D(float, float, float)':
vector3d.cc:(.text+0x10): multiple definition of `Point3D::Point3D(float, float, float)'
/tmp/ccqDasr3.o:point3d.cc:(.text+0x10): first defined here
/tmp/ccyDEfcW.o: In function `Point3D::operator[](int)':
vector3d.cc:(.text+0x20): multiple definition of `Point3D::operator[](int)'
/tmp/ccqDasr3.o:point3d.cc:(.text+0x20): first defined here
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:10:19.363

1）您在标题中有不同的声明：

```
float operator[] (const int i); 
```

和.cpp中的定义：

```
float Point3D::operator[](int i ) 
```

使它们都具有相同的参数

```
const int i 
```

2）查看vector3d.cc（请在此处分享），您可能已经定义了两次Point3D代码。

# dojox.charting - 如何将标记符号更改为道场图表中的图像

> ID：12577734
> 
> 赞同：1
> 
> 时间：2012-09-25T07:00:23.853
> 
> 标签：dojox.charting

我有一个道场图表。我想将图表上的标记显示为不同的图像。我搜索了很多但没有解决方案。请帮我。

提前致谢

# grails - Grails 从会话更改数据库 URL 连接

> ID：12577736
> 
> 赞同：1
> 
> 时间：2012-09-25T07:00:28.177
> 
> 标签：grails

我需要使用会话更改数据源的 url 或将当前连接更改为新连接或在运行时构建新数据源（在我的控制器或服务中）

如果有人可以告诉我另一种方式排除多数据源告诉我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:32:32.513

我有一种不是最干净的方法，但应该可以。如果您可以访问`dataSource`Spring bean，则可以更改其属性。您需要让它关闭所有池连接，然后新连接将使用新设置。

您可以像任何 bean 一样使用依赖注入来访问数据源，即`def dataSourceUnproxied`. 您必须使用“dataSourceUnproxied”而不是“dataSource”来获取真实的`DataSource`，而不是 Grails 包装真实代理的事务感知代理。

完成后，您可以像这样更改 url、用户名等：

```
dataSourceUnproxied.url = 'some other url'
dataSourceUnproxied.username = 'some other username' 
```

然后关闭它以强制关闭所有连接，但重置`closed`标志以欺骗它在下次重新连接时`getConnection()`调用：

```
dataSourceUnproxied.close()
dataSourceUnproxied.closed = false 
```

这是非常特定于池实现的，因为`DataSource`接口只有几个方法。这适用于`org.apache.commons.dbcp.BasicDataSource`Grails 默认使用的方法，但如果您使用不同的池实现，则需要查看其源代码以获取等效方法。

# java - 使用 passPhrase ,saltValue,passwordIterations,initVector,keySize 进行 sha1 加密

> ID：12577737
> 
> 赞同：0
> 
> 时间：2012-09-25T07:00:36.017
> 
> 标签：java, security, encryption, cryptography, sha1

我正在开发 java 应用程序，我被要求使用以下信息生成安全代码。

```
Value to be encrypted ="test1234";

passPhrase = "testValue"
saltValue  = "testValue"
hashAlgorithm = "SHA1"
passwordIterations = 2
initVector = "testValue"
keySize = 256 
```

有人可以让我知道基于上述值使用 SHA1 算法生成哈希值的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:18:13.360

这个问题有点模糊，但我想你可能想使用 PBKDF2 来生成哈希。幸运的是，它在 Java SE 6+ 中非常简单

```
KeySpec spec = new PBEKeySpec(passsword.toCharArray(), salt, 
   iterations, derivedKeyLength);
SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");

return f.generateSecret(spec).getEncoded(); 
```

[在http://jerryorr.blogspot.com/2012/05/secure-password-storage-lots-of-donts.html](http://jerryorr.blogspot.com/2012/05/secure-password-storage-lots-of-donts.html)有更深入的解释

# api - 以下哪一项是更好的 Rest URL？

> ID：12577741
> 
> 赞同：0
> 
> 时间：2012-09-25T07:00:58.820
> 
> 标签：api, rest, url-design

只是一个快速的问题。以下哪一项是更好的 Rest API Url，为什么会这样？

1.  `GET shop/department/{id}/{action}`
2.  `GET shop/department/{action}/{id}`

动作是动词，它可以是：

*   ~~`GET shop/department/{id}/download`~~
*   `GET shop/department/{id}`
*   `GET shop/department/{id}/receive`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:11:32.327

如果`action`是远程过程调用 RPC 中的操作，则两者都同样糟糕。

动作不属于 URL，而是属于 HTTP 动词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:12:34.230

使用动作和对应的 id 作为参数

# android - Android 布局复杂按钮

> ID：12577747
> 
> 赞同：0
> 
> 时间：2012-09-25T07:01:24.213
> 
> 标签：android, image, button, onclick, overlap

想象一下，如果您将在一个椭圆中包含一个圆圈的布局。椭圆的顶部和底部接触圆的顶部和底部，给出 3 段。椭圆的左右部分与圆的边缘重叠。- 所以我所拥有的是这样的（A（B）C）。如果你从 A 的最右边点的顶部到 A 的最右下点画一条线，它将直接从 B 的中心向下分割

我希望 3 个部分作为独立按钮工作。我怎样才能做到这一点？

我正在考虑使用这种方法： [Android Images with clickable areaa](http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/)

但是，这在边缘是否足够准确？

有没有其他方法可以做到这一点，而不是简单地把按钮弄成方形？

Android点击事件可以忽略透明度吗？那么，如果我将这些片段作为单独的图像重叠，我只能点击每个图像的彩色区域吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:06:28.437

不要试图将其定义为 XML 布局......这是不可能的，但您可以创建自己的自定义视图并覆盖[onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)以检测触摸并进行任何计算以找出事件发生的位置。

要创建您的自定义视图，如果有帮助，您可以将其设为子类或按钮...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:31:24.057

最后，我尝试并成功使用了隐藏颜色叠加方法，链接在我的第一篇文章中。这工作得非常好，是一段非常有效的编码

然后我决定在工作了几个小时后我不喜欢那种特殊的布局，并采用了更传统的设计！哦，好吧……生活和学习！

# c# - 在 Windows 应用程序中的 notifyicon 图标上显示文本

> ID：12577749
> 
> 赞同：5
> 
> 时间：2012-09-25T07:01:32.793
> 
> 标签：c#, windows, winforms, windows-applications, notifyicon

我正在创建一个 Windows 应用程序。在这个应用程序中，我正在使用`notifyicon`并将我的应用程序最小化到系统托盘。在我的按钮单击代码中，我在后台处理一些事情并每 2 秒返回一个整数值。我需要在`Notifyicon`.

谁能帮我？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T07:09:07.377

尝试[`NotifyIcon.ShowBalloonTip`](http://msdn.microsoft.com/en-us/library/ms160065.aspx)方法：

> 在指定时间段的任务栏中显示具有指定标题、文本和图标的气球提示。

```
void Form1_DoubleClick(object sender, EventArgs e)
{
    notifyIcon1.Visible = true;
    notifyIcon1.ShowBalloonTip(20000, "Information", "This is the text",
        ToolTipIcon.Info );
} 
```

如果要更改托盘图标，请按需创建图标并将其设置为[`NotifyIcon.Icon`](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.icon.aspx)：

要创建图标，您可以使用此代码（更新）：

```
public static Icon GetIcon(string text)
{
    Bitmap bitmap = new Bitmap(32, 32);

    Icon icon = SmsSender.Properties.Resources.notifficationicon;
    System.Drawing.Font drawFont = new System.Drawing.Font("Calibri", 16, FontStyle.Bold);
    System.Drawing.SolidBrush drawBrush = new System.Drawing.SolidBrush(System.Drawing.Color.White);

    System.Drawing.Graphics graphics = System.Drawing.Graphics.FromImage(bitmap);

    graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.SingleBitPerPixel;
    graphics.DrawIcon(icon, 0, 0);            
    graphics.DrawString(text, drawFont, drawBrush, 1, 2);        
    Icon createdIcon = Icon.FromHandle(bitmap.GetHicon());

    drawFont.Dispose();
    drawBrush.Dispose();
    graphics.Dispose();
    bitmap.Dispose();

    return createdIcon;
} 
```

看到同样的项目：

*   [使用-C# 动画外壳托盘图标](http://www.codeproject.com/Articles/26178/Animating-Shell-Tray-Icon-With-C)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T07:14:34.610

试试这个。希望这对您有所帮助。

[http://www.dotnetperls.com/notifyicon](http://www.dotnetperls.com/notifyicon)

[http://www.codeproject.com/Articles/37451/Display-Progress-and-Overlay-Icons-for-Multiple-Vi](http://www.codeproject.com/Articles/37451/Display-Progress-and-Overlay-Icons-for-Multiple-Vi)

你最多可以做这样的事情。

```
Graphics canvas;
Bitmap iconBitmap = new Bitmap(16, 16);
canvas = Graphics.FromImage(iconBitmap);

canvas.DrawIcon(YourProject.Resources.YourIcon, 0, 0);

StringFormat format = new StringFormat();
format.Alignment = StringAlignment.Center;

canvas.DrawString(
    "2",
    new Font("Calibri", 8, FontStyle.Bold),
    new SolidBrush(Color.FromArgb(40, 40, 40)),
    new RectangleF(0, 3, 16, 13),
    format
);

notifyIcon.Icon = Icon.FromHandle(iconBitmap.GetHicon()); 
```

# mysql - 在一个列和其他所有内容上选择不同

> ID：12577750
> 
> 赞同：3
> 
> 时间：2012-09-25T07:01:36.770
> 
> 标签：mysql, sql

我正在尝试以下但它失败了......我想要一切，但只有在不同的名称：

所以，如果我有

```
NAME    A  B  C  D
-------------------
john    5  6  6  7
jack    5  3  2  4
paul    5  7  9  2
john    4  2  3  4 
```

我只想要前三行

```
select distinct name, * from items order by NAME, D 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:08:43.713

如果您不关心在重复名称的情况下选择哪些值：

```
select name,
       min(a),
       min(b),
       min(c),
       min(d)
from items
group by name
order by name; 
```

请注意，在此解决方案中，a、b、c、d 的值不一定来自同一行！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:24:21.800

**样本输入：**

```
Name    A   B   C   D
john    5   6   6   7
jack    5   3   2   4
paul    5   7   9   2
john    4   2   3   4
john    5   6   6   7 
```

**询问**

```
SELECT Name,Max(A) AS A,MAX(B) AS B,MAX(C) AS C,MAX(D) AS D
FROM <your table>
GROUP BY Name 
```

**预期产出**

```
Name    A   B   C   D
jack    5   3   2   4
john    5   6   6   7
paul    5   7   9   2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:03:09.100

改用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

```
SELECT a.*
FROM items a
     INNER JOIN ( SELECT MIN(id) id
                  FROM items
                  GROUP BY name
                ) b
                ON a.id = b.id
ORDER BY a.name; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/8eaaf/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:04:59.483

试试这个查询

```
select distinct name,A,B,C,D from items group by name order by name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:16:37.323

试试这个：

如果您有重复的名称，这将选择任何一条记录

```
 select slno,name,A,B,C,D
   from           
   ( SELECT  @i:=@i+1 AS slno,t.*
     FROM items t ,(SELECT @i:=0) r )a
   group  by    name  
   having slno=min(slno) 
```

# [SQL 小提琴演示](http://sqlfiddle.com/#!2/fd3fe/1)

# c# - 如何从pdf图像中查找文本？

> ID：12577752
> 
> 赞同：4
> 
> 时间：2012-09-25T07:01:40.853
> 
> 标签：c#, asp.net, ocr

我正在开发一个 C# 应用程序，其中我将 PDF 文档转换为图像，然后在自定义查看器中呈现该图像。

在尝试在生成的图像中搜索特定单词时，我遇到了一些障碍，我想知道最好的方法是什么。我应该找到搜索词的 x,y 位置吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T07:06:29.717

您可以在控制台模式下使用[tessract OCR 图像进行文本识别。](http://code.google.com/p/tesseract-ocr/)

我不知道这种用于pdf的SDK。

但是，如果你想获取所有单词的坐标和值，你可以使用下一个我不复杂的代码，感谢[nguyenq](https://stackoverflow.com/questions/8962160/text-blocks-positions-and-sizes-detection-in-command-line-mode-in-tesseract)的 hocr 提示：

```
public void Recognize(Bitmap bitmap)
{
    bitmap.Save("temp.png", ImageFormat.Png);
    var startInfo = new ProcessStartInfo("tesseract.exe", "temp.png temp hocr");
    startInfo.WindowStyle = ProcessWindowStyle.Hidden;
    var process = Process.Start(startInfo);
    process.WaitForExit();

    GetWords(File.ReadAllText("temp.html"));

    // Futher actions with words
}

public Dictionary<Rectangle, string> GetWords(string tesseractHtml)
{
    var xml = XDocument.Parse(tesseractHtml);

    var rectsWords = new Dictionary<System.Drawing.Rectangle, string>();

    var ocr_words = xml.Descendants("span").Where(element => element.Attribute("class").Value == "ocr_word").ToList();
    foreach (var ocr_word in ocr_words)
    {
        var strs = ocr_word.Attribute("title").Value.Split(' ');
        int left = int.Parse(strs[1]);
        int top = int.Parse(strs[2]);
        int width = int.Parse(strs[3]) - left + 1;
        int height = int.Parse(strs[4]) - top + 1;
        rectsWords.Add(new Rectangle(left, top, width, height), ocr_word.Value);
    }

    return rectsWords;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:14:47.230

使用 ITextSharp[在此处](http://sourceforge.net/projects/itextsharp/)下载。确保 PDF 是可搜索的。

并使用此代码：

```
public static string GetTextFromAllPages(String pdfPath)
{
    PdfReader reader = new PdfReader(pdfPath); 

    StringWriter output = new StringWriter();  

    for (int i = 1; i <= reader.NumberOfPages; i++) 
        output.WriteLine(PdfTextExtractor.GetTextFromPage(reader, i, new SimpleTextExtractionStrategy()));

    return output.ToString();
} 
```

# iphone - 使用自动布局导致按钮停止工作

> ID：12577756
> 
> 赞同：1
> 
> 时间：2012-09-25T07:01:51.220
> 
> 标签：iphone, ios, xcode, ios6, autolayout

我试图为我的 .xib 文件中的视图添加使用自动布局功能，目标是根据正确的屏幕尺寸调整视图。

当我将自动布局添加到视图并设置自由格式并将视图大小更改为 568 时，视图在 iPhone 5 模拟器上看起来正确，但是当尝试按下底部的按钮时，如果我在 iPhone 4 上运行相同的应用程序，它们将不起作用视图看起来正确并且按钮正在工作。

我错过了什么？任何人都知道教程或我在哪里可以找到如何在没有自动布局的情况下转换常规 xib 工作的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:58:08.680

您的按钮可能不在他们的超级视图之上。您需要将按钮的超级视图限制在超级视图的底部。

不幸的是，没有看到任何东西，除此之外很难为您提供任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T19:07:54.617

我参加聚会有点晚了，但我认为除了将其添加到 xib 文件中之外，您还必须为按钮添加约束。

这是 AutoLayout 教程的[链接](http://www.raywenderlich.com/50317/beginning-auto-layout-tutorial-in-ios-7-part-1)和/或您可以观看**WWDC 会议**将提供一些见解：

[2012](https://developer.apple.com/videos/wwdc/2012/)

*   iOS 和 OS X 的自动布局简介（第 202 节）
*   掌握自动布局的最佳实践（第 228 课）
*   示例自动布局（第 232 课）

[2013](https://developer.apple.com/videos/wwdc/2013/)

*   在 Xcode 5 中控制自动布局（会话 406）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T08:44:07.163

我遇到了同样的问题。就我而言：

```
self.view
 \- ...
  \_self.wrapper
       \_self.button 
```

代码不起作用：

```
NSDictionary *metrics = @{@"padding":[NSNumber numberWithFloat:kGridPadding]};

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[head]-padding-[wrapper]-|" options:0 metrics:metrics views:views]]; 
```

原因是 'wrapper' 的高度为 0，尽管按钮仍然可见。所以它可以通过提供足够的宽度和高度来修复，如下所示：

```
NSDictionary *metrics = @{@"padding":[NSNumber numberWithFloat:kGridPadding],
                          @"screenHeight":[NSNumber numberWithFloat:self.view.bounds.size.height]};

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[head]-padding-[wrapper(screenHeight)]-|" options:0 metrics:metrics views:views]]; 
```

--> 更好的办法是让wrapper的高度自动增加，但我现在不知道怎么做？

# driver - 如何在 PPC DTS 中添加 rtc 节点？

> ID：12577759
> 
> 赞同：1
> 
> 时间：2012-09-25T07:01:54.037
> 
> 标签：driver, linux-device-driver, device-driver, i2c

我是 PPC 设备驱动程序开发的新手，最近在 DTS 中遇到了一个问题。

我们的团队在PPC平台的新开发板上添加了一个rtc芯片rtc-pcf8563。驱动程序可用且正确，但我必须将 DTS 中的设备添加为 rtc 节点。但我不知道如何更改 .dts 资源。

这是关于.dts的代码，@3200是我添加的，我不知道它是否有用。

```
i2c@3000 {
    #address-cells = <1>;
    #size-cells = <0>;
    cell-index = <0>;
    compatible = "fsl-i2c";
    reg = <0x3000 0x100>;
    interrupts = <43 2>;
    interrupt-parent = <&mpic>;
    dfsrr;
    rtc@68 {
        compatible = "dallas,ds1339";
        reg = <0x68>;
        };
    };

    i2c@3200 {
    #address-cells = <1>;
    #size-cells = <0>;
    cell-index = <0>;
    compatible = "fsl-i2c";
    reg = <0x3200 0x100>;
    interrupts = <43 2>;
    interrupt-parent = <&mpic>;
    dfsrr;
    rtc@50 {
            compatible = "philips,pcf8563";
            reg = <0x50>;
           };
    }; 
```

* * *

有谁知道如何正确更改 .dts ？

# iphone - 设置gps的经纬度

> ID：12577762
> 
> 赞同：0
> 
> 时间：2012-09-25T07:02:08.383
> 
> 标签：iphone, objective-c, gps

我想测试一些功能。如何设置硬编码我的 iPhone gps 的纬度、经度？我知道如何获得它...

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
 {
 lat =  newLocation.coordinate.latitude;
 lon = newLocation.coordinate.longitude;

 } 
```

但没有找到设置它的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:04:36.243

打开您的**模拟器**，在顶部栏中转到**Debug=>Location=>Custom Location**输入您的自定义纬度和经度坐标。

# php - 做点什么？网址错误

> ID：12577764
> 
> 赞同：0
> 
> 时间：2012-09-25T07:02:09.067
> 
> 标签：php

我有一个登录屏幕。当您输入错误的密码/用户名时，您将被重定向到同一页面，但我想显示一个错误，所以我重定向到 index.php?wrong。

现在我想检查：

```
If ?wrong  {
echo "wrong pw"; 
} else {
// nothing
} 
```

我想知道怎么做这个。我必须写什么而不是

```
if ?wrong 
```

我检查了一些关于它的页面，例如[这个](http://www.w3schools.com/php/php_get.asp)，但它是关于 index.php?something=wrong 的，但我想只是？错了。

非常感谢！艺术

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:03:49.157

```
<?php

if (isset($_GET['wrong'])) {
    // wrong
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:04:19.407

尝试

```
if(isset($_GET['wrong']))
{
    //Play
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:06:17.050

`$_GET`是全局默认的 PHP 'array'，它包含所有 url 参数。所以使用这个：

```
<?php
if (isset($_GET['wrong'])) {
  // do stuff
}
?> 
```

`isset`检查是否`$_GET['wrong']`有效，换句话说，`wrong`在 url 的某处有一个参数，所以你所要求的 (`?wrong`或`?foo&wrong`) 都将被检测到。

# objective-c - UILabel 中的文本加载减慢了 UITableView 的滚动

> ID：12577767
> 
> 赞同：0
> 
> 时间：2012-09-25T07:02:18.943
> 
> 标签：objective-c, uitableview, uiscrollview

由于这条线，我有一个生涩的向下滚动问题：

```
NSString *text =[NSString stringWithCString:[[Text objectAtIndex:indexPath.row] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding]; 
```

文本长度因单元格行而异。我有这条线：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

有没有办法克服这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:11:07.343

将文本异步加载到表格视图单元格，例如：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *objects=[[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];
    CustomCell *cell=[objects objectAtIndex:0];

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,  0ul);
        dispatch_async(queue, ^{

        NSString *text =[NSString stringWithCString:[[Text objectAtIndex:indexPath.row] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding];

     dispatch_sync(dispatch_get_main_queue(), ^{
                CustomCell *cell = (CustomCell *)[tableView cellForRowAtIndexPath:indexPath];
              // set the string to cell here using cell object.

            });
        });

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:30:59.067

好吧，伙计们，我在我的问题上搜索了好几个小时，我发现我必须预先计算我所有的 uitableviewcells 并将它们保存到一个 nsmutablearray 中。我还必须预先计算其单元格的高度，因为高度是动态的而不是静态的。完成所有计算后，我必须将此行添加到

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
             return [self.CellObjects objectAtIndex:indexPath.row]; //this just loads the precomputed cell
} 
```

而且我还必须像这样添加每个单元格的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{

  NSNumber *height=[HeightObjects objectAtIndex:indexPath.row];
    CGFloat height1=[height floatValue];
    return height1;

} 
```

希望它可以帮助某人！

# google-apps-script - 如何通过 doc id 下载文件

> ID：12577772
> 
> 赞同：0
> 
> 时间：2012-09-25T07:02:42.667
> 
> 标签：google-apps-script

```
function getDocuments(user){
  var scope = 'https://docs.google.com/feeds/';
  //oAuth
  user="user@yourdomain.com"
  var fetchArgs = googleOAuth_('docs', scope);
  var url = scope + user+'/private/full?v=3&alt=json';
  var urlFetch = UrlFetchApp.fetch(url, fetchArgs);
  var json=Utilities.jsonParse(urlFetch.getContentText())
  var entry = json.feed.entry;
  var docs = [];
  for(var i in entry){
    var tempDoc = {};
    for(var j in entry[i]){
      tempDoc.id = entry[i].id.$t.split('%3A')[1];
    }
    docs.push(tempDoc);
  }

  var url='https://docs.google.com/feeds/download/documents/Export?docID='+docs[0]+'&exportFormat=docs'
UrlFetchApp.fetch(url,fetchArgs)

}

//--------------------------------------------------------------------------------------
//Google oAuth
//Used by getDocuments(user)
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey(consumerKey);
  oAuthConfig.setConsumerSecret(consumerSecret);
  return {oAuthServiceName:name, oAuthUseToken:"always",method:"GET"};
} 
```

我正在尝试通过文档 ID 下载文档的上述代码。我有一个文档 ID 数组作为文档，我正在使用导出格式作为文档......所以请对此代码提出一些建议......当我运行此代码时，它会给出错误：错误 302 ..临时移动。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:21:31.093

尝试这个：

```
 for(var i in entry){
    var tempDoc = {};
    for(var j in entry[i]){
      tempDoc.id = entry[i].id.$t.split('%3A')[1];
    }
//now your splitting your string nicely but you also want to use that
    docs.push(tempDoc.id);
  }

  var url='https://docs.google.com/feeds/download/documents/Export?docID='+docs[0]+'&exportFormat=docs'

//you dont want to use the fetch arguments anymore you have authenticated already
UrlFetchApp.fetch(url) 
```

祝你好运，

托马斯·范拉图姆

# git - 将内容从一个 git 存储库移动到另一个？

> ID：12577775
> 
> 赞同：1
> 
> 时间：2012-09-25T07:02:46.000
> 
> 标签：git

我在 xp-dev.com 有一个当前的 git 存储库，我们称之为 A。现在我在 xp-dev.com 创建了一个新项目，它有自己的 git 存储库，我们称之为 B。现在，A 有很多在其中提交了代码，我想将 A 的所有内容（包括提交历史）移动到 B。而 B 是空的，它基本上只是一个没有签入代码的初始化存储库。

我该怎么做呢？我试图自己解决它，但似乎几乎不可能只说“将 A 的内容推入 B”......

请帮帮我，我昨晚在这上面花了几个小时，当时我本可以做更有成效的事情:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:12:54.143

我是 git 新手，我不知道 xp-dev.com 的细节，但你应该可以用这样的东西来做。

一、克隆并*镜像*原仓库

```
git clone --mirror orig-host:A 
```

然后将其推送到新家（前提是已经创建了 repo）

```
cd A
git push --mirror new-host:B 
```

注意：这对新存储库具有破坏性。首先离线尝试一下可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:06:44.993

尝试以下顺序：

```
git clone orig-host:repo
cd repo
git remote add target dest-host:repo
git push target master
# repeat the last command for every unmerged branch 
```

# installation - Insserv 和 LSBbase：在 Debian 中修复 Aptitude？无法安装任何东西，为什么？

> ID：12577776
> 
> 赞同：0
> 
> 时间：2012-09-25T07:02:48.393
> 
> 标签：installation, debian, aptitude

错误报告[here](http://pastie.org/4796007)和[here](https://askubuntu.com/questions/187142/aptitude-not-working-after-sources-list-messup)。[此处的](http://www.howtoforge.com/forums/showthread.php?t=55972)说明建议使用 insserv，但我无法安装任何东西，因此无法运行 insserv。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:59:48.483

您至少在[LSBbase](http://wiki.debian.org/LSBInitScripts)、 insserve 、 LSBheaders 方面存在问题。我感谢#Debian 和 Trxmxr 帮助我，我成功了！

> **1\. 拼图**
> 
> > `/etc/init.d/couchdb`将to的头文件固定在`"+mountall +mountoverflowtmp +umountfs"`local_fs的位置。
> 
> **2\. 拼图（[此处](http://pastie.org/4811703)为错误示例）**
> 
> > 通过将 Cups 的标题复制到 Smfpd -samsung-printer-thing 来修复 LSB -headers 问题`/etc/init.d/smfpd`，记得修改一下。更多信息[在这里](http://wiki.debian.org/LSBInitScripts)。
> 
> **3.拼图**
> 
> > `rc-status`用-thing 通过这个命令修复错误`"sudo touch /etc/rc.status"`。
> 
> **4.拼图**
> 
> > 通过对比工作系统，Trxmor 意识到必须重新安装 lsb-base，[这里](http://pastie.org/4811891)设置错误。所以 `"$ sudo aptitude reinstall lsb-base"`。

**诊断命令**

**1\. insserv**

> 根据 Trxmxr 的说法，尚未做出从 insserve 切换到其他东西的决定。
> 
> **定义**
> 
> *   `'$ is a "virtual" target, i.e. not a real startup script but an alias or group of multiple targets'`
> *   `'+ is an optional member of a group'`. 该错误与Required-Start 事物有关。
> 
> **一些命令**
> 
> *   $ grep "_fs" /etc/init.d/couchdb
>     
>     
> *   $头/etc/insserv.conf

**2.更新升级**

> 如果您遇到错误，请回滚到谜题 - 下面是我如何配置事物的示例。
> 
> ```
> $ wget http://ftp.debian.org/debian/pool/main/i/insserv/insserv_1.14.0-4_i386.deb
> $ sudo dpkg -i --force-confdef insserv_1.14.0-4_i386.deb
> $ sudo dpkg --configure -a
> $ sudo apt-get upgrade 
> ```

# jquery - Jquery 设置效果限制（左边距）

> ID：12577783
> 
> 赞同：0
> 
> 时间：2012-09-25T07:03:08.383
> 
> 标签：jquery

我正在尝试在我的导航菜单上设置最大和最小限制。到目前为止，我的代码几乎可以完美运行...

```
var navmenuliwiwdth = 0;

$('#othermenu ul li').each(function() {
    navmenuliwiwdth += $(this).outerWidth();
});

$('#otherleftarrow').click(function() {
    if ( parseInt($('#othermenu ul').css('margin-left')) < 0 )
        $('#othermenu ul').animate({'margin-left': '+=50'}, 200);
    return false; 
});

$('#otherrighttarrow').click(function() {
    if ( navmenuliwiwdth > 638 && parseInt($('#othermenu ul').css('margin-left')) > (638 - navmenuliwiwdth))
        $('#othermenu ul').animate({'margin-left': '-=50'}, 200);
    return false;
}); 
```

右箭头限制效果很好。但是留下一个经常行为不端...如果我快速单击右箭头而不是等待滑块单击左箭头几次，它会达到 50px 边距。我想知道为什么会发生这种情况，如果有任何方法可以解决它，我知道它与`< 0`

有任何想法吗？

我在这里工作：http: [//jsfiddle.net/sandrodz/TsGqU/5/](http://jsfiddle.net/sandrodz/TsGqU/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:08:05.023

您必须`.stop()`在 jQuery 中设置一个方法来停止和清除动画队列，否则它会在足够快地单击元素时显示异常行为。

~~http://jsfiddle.net/TsGqU/4/~~ [http://jsfiddle.net/TsGqU/7/](http://jsfiddle.net/TsGqU/7/)

如需进一步阅读，请参阅 jQuery API [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

编辑：我刚刚添加了另一个条件，所以只要最后一个动画正在运行，动画就不会触发。您可以使用 $([selector]).is(':animated') 检查正在运行的动画。此方法返回一个布尔值。

# javascript - jquery简单的图像转换器

> ID：12577789
> 
> 赞同：0
> 
> 时间：2012-09-25T07:03:31.160
> 
> 标签：javascript, jquery, image, slider

大家好，我有这个代码来更改多个图像，如幻灯片

```
function test() {
   $(".topimg img").first().appendTo('.topimg').fadeOut(1000);
   $(".topimg img").first().fadeIn(1000);
   setTimeout(test, 7000);
}
test(); 
```

但是当我最小化浏览器或更改选项卡并且当我返回图像更改太快时，我遇到了一个问题。我该如何解决这个问题，请修复此代码不要给我另一个带有 javascript 的代码或任何简单的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:08:38.473

请试试这个：

```
 function test() {
       $(".topimg img").first().appendTo('.topimg').fadeOut(1000);
       $(".topimg img").first().fadeIn(1000);
 }

 setTimeout(function(){test();}, 7000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:12:01.180

在未查看选项卡时，渲染被暂停。暂停逻辑也是合适的，因此当页面再次进入视图时，浏览器不需要赶上事件。

*   Chrome 页面可见性 API：[https ://developers.google.com/chrome/whitepapers/pagevisibility](https://developers.google.com/chrome/whitepapers/pagevisibility)
*   Firefox 的：[https ://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)

我确信有办法在其他浏览器中检测到这一点，但我从未使用过这些，所以没有想到那些参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:13:06.640

您可以使用`setInterval`而不是`setTimeout`. `setInterval`将在每 7000 毫秒后调用测试。如果你想立即运行测试，你可以在 setInteval 之后调用它；

我添加了 inteval 变量来检查 setInterval 是否已经在运行，如果不调用 setInterval。

```
 if(window.inteval){
      return
   }
    function test() {
       $(".topimg img").first().appendTo('.topimg').fadeOut(1000);
       $(".topimg img").first().fadeIn(1000);
    }
    if(!window.inteval){
         window.inteval = setInterval(test, 7000);
   } 
```

同样的方式你可以检查你的代码

```
 function test() {
       $(".topimg img").first().appendTo('.topimg').fadeOut(1000);
       $(".topimg img").first().fadeIn(1000);
       window.interval = setTimeout(test, 7000);
    }
   if( !window.interval){
       test();
   } 
```

# javascript - 如何将类添加到由 appendChild 创建的元素

> ID：12577797
> 
> 赞同：19
> 
> 时间：2012-09-25T07:03:51.107
> 
> 标签：javascript, appendchild

我想问如何为我在javascript中通过appendChild创建的元素添加一个类

```
document.forms[0].appendChild(document.createElement("input")); 
```

如何为我创建的输入元素添加一个类？

我只使用 Javascript，我不喜欢 jQuery，请用纯 javascript 发送答案。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-25T07:19:14.517

> 我想问如何为我在javascript中通过appendChild创建的元素添加一个类

像任何其他元素一样，您有参考。不管是通过 JS 在 JS 中创建`createElement`，还是以其他方式获得对节点的引用。假设`input`包含对您的节点的引用：

```
var input = document.createElement("input"); 
```

您可以使用[className](https://developer.mozilla.org/en-US/docs/DOM/element.className)：

```
input.className = "foo"; 
```

[类列表](https://developer.mozilla.org/en-US/docs/DOM/element.classList)：

```
input.classList.add("foo"); 
```

[设置属性](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)：

```
input.setAttribute("class", "foo"); 
```

第一个被任何浏览器广泛支持，所以我强烈建议你使用一个，除非你不在现代浏览器中并且你想操作你设置的每个类，这样`classList`会更有用。我强烈避免使用后者，因为`setAttribute`您将设置 HTML 的属性而不是 JS 对象的类名：然后浏览器将该值映射到 JS 的属性，但在某些情况下它会失败（例如，参见IE 的某些版本），因此即使 HTML 节点具有该属性，也不会应用该类。

请注意，尽管如何获得`HTML`节点引用，上述所有方法都可以正常工作，因此也可以使用：

```
var input = document.getElementById("my-input"); 
```

等等。

在您的情况下，因为`appendChild`返回对附加节点的引用，您也可以在一个语句中编写所有内容：

```
document.forms[0]
    .appendChild(document.createElement("input"))
    .className = "foo"; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T07:06:02.520

您需要创建元素的变量。

```
var input = document.createElement("input");
input.className = 'class_to_add';
document.forms[0].appendChild(input); 
```

***更新：***

`.appendChild`返回孩子，所以你也可以在没有变量的情况下做到这一点：

```
document.forms[0].appendChild(document.createElement("input")).className = "class_to_add"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T07:07:57.410

使用 setAttribute 和 getAttribute 方法：

```
var i = document.createElement('input'); 
i.setAttribute('class', 'myclass');
document.forms[0].appendChild(i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T07:11:05.400

喜欢：

```
document.forms[0].appendChild(document.createElement("input")).className = "class_to_add"; 
```

# blackberry - 黑莓UI构建工具

> ID：12577805
> 
> 赞同：2
> 
> 时间：2012-09-25T07:04:26.800
> 
> 标签：blackberry, user-interface

我正在寻找任何适用于 BlackBerry 的 UI 构建工具，但没有找到。有没有这样的工具可以让我的应用程序 UI 更快更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:43:04.990

如果您正在谈论使用 Java ME 为 BlackBerry 开发，那么没有 UI 构建工具。

# excel - 如何格式化第二列的行与第一列的行

> ID：12577808
> 
> 赞同：0
> 
> 时间：2012-09-25T07:04:30.893
> 
> 标签：excel, excel-formula

考虑到第一列的行，如何格式化第二列的行。

描述：：-

我有一列说excel中的A列有8行。

数据存在于某些行中，某些行为空白。例如

```
1st row tiger
2nd row lion
3rd row (blank no data present)
4th row (blank no data present)
5th row cow
6th row (blank no data present)
7th row cat
8th row mouse. 
```

现在我的第二列说 excel 中的 B 连续包含 85 行中的数据。例如

```
1st row 1
2nd row 1
3rd row 3
4th row 4
5th row 10 
```

现在我想根据第一列排列第二列。

如下所示：

```
column A                            Column B
1st row tiger                       1
2nd row lion                        1
3rd row (blank no data present)
4th row (blank no data present)
5th row cow                         3
6th row (blank no data present)
7th row cat                         4
8th row mouse.                      10 
```

由于我有大量数据，我需要一个公式来做到这一点。

请提出相同的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:46:25.633

删除空白行（使用过滤器）并将 B 列粘贴到 A 列旁边。

您可以通过跟踪行号来插入行 - 完成后，只需从原始文件中取出空白行（使用过滤器）并将它们粘贴到过滤后的文件下，然后按列索引排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:10:26.680

这可以通过几个公式来完成：

从此开始： ![起始页](../Images/c98c52f95f5940dd13cdbb4a502f1104.png)

然后添加这些公式：

![公式](../Images/a3e3473eb5d7ed2b19bca2ee6df3f3cf.png)

`IN B2 - =IF(A2<>"",VLOOKUP(COUNTA(A$2:A2),$D$2:$E$6,2,0),"")`

`IN D3 - =D2+1`

这给出了：

![结果](../Images/1d98d68e9174b7202810e768b9315be0.png)

# iphone - 如何以编程方式播放默认电话铃声？

> ID：12577811
> 
> 赞同：8
> 
> 时间：2012-09-25T07:04:39.047
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ringtone

我一直在开发与会议相关的应用程序。我想显示来电的响铃通知。我尝试过使用 AVAudioPlayer，它对自定义声音效果很好。我的问题是，是否可以从 iPhone 获取默认铃声（用户在设置中选择的铃声）并为我的应用播放？

感谢您的宝贵建议...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T07:28:20.833

有人在[这里](https://stackoverflow.com/questions/5250200/play-alert-sound-same-as-default-message-ringtone)问过类似的问题，但总体而言，这似乎是不可能的，至少如果您想通过 App Store 分发您的应用程序。在越狱手机上，您可能会发现[此答案](https://stackoverflow.com/a/5644142/10320)很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T07:23:48.557

不，没有用于获取 iPhone 铃声的 SDK API。

但是您可以从其他链接下载这些并添加到您的项目中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-19T15:06:35.853

推荐的方法是使用 CallKit。然后，您的 VoIP 应用程序将“免费”获得很多东西。当您使用 CallKit 注入来电时，iOS 会自动播放正确的铃声。

[https://developer.apple.com/documentation/callkit](https://developer.apple.com/documentation/callkit)

CallKit 可以为您处理很多事情。像：

*   手机锁定时显示正确的来电屏幕
*   如果用户已经在另一个通话中会发生什么
*   “请勿打扰”已开启（开车或睡觉）
*   手机设置为静音
*   播放正确的铃声

# android - 使用带有片段的通用图像加载器在引用基本活动时会出错

> ID：12577812
> 
> 赞同：1
> 
> 时间：2012-09-25T07:04:38.860
> 
> 标签：android, android-fragments, universal-image-loader

我在[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)使用来自 nostra13 的通用图像加载器。我的问题是：

我有这些课程

`PhotoActivity extends FragmentActivity`

`ImageFragment extends Fragment`

`imageLoader`我在`ImageFragment`using`imageLoader = ImageLoader.getInstance();`和这个片段中初始化了，我还使用`imageLoader.displayImage(...)`.

当我`PhotoActivity`停止（`onStop()`被调用）时，我`ImageFragment`也会停止，这应该会停止任何图像加载，因为我调用`imageLoader.stop()`了该`onStop()`方法。但是，情况并非如此，它给了我 NullPointerException 因为`onLoadingComplete()`之后`ImageLoadingListener()`被调用，并且这个方法调用在`getActivity()`这`null`一点上，因为片段已与其活动分离。

`imageLoader.stop()`应该停止每个加载过程，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:42:55.380

ImageLoader`ExecutorService`用作任务池。ImageLoader.stop() 只需执行 ExecutorService.shutdown() 即可，其中包含下一个 Java 文档：

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。如果已经关闭，调用没有额外的效果。
> 
> 此方法不等待先前提交的任务完成执行。

不保证活动任务会在`shutdown()`. 对于这种情况，也许使用 of`shutdownNow()`是更好的选择（我会考虑一下），但它仍然不能保证立即关闭任务。

所以此时无论如何你应该检查一下`getActivity()`。但我会考虑在 ImageLoader 停止后防止触发回调。也许在下一个版本中。

# linux - 带有 chkserv.d 的 cassandra nosql 自动重启服务

> ID：12577816
> 
> 赞同：2
> 
> 时间：2012-09-25T07:04:57.587
> 
> 标签：linux, service, centos, cassandra, background-process

我没有太多的 linux 经验，所以我可能遗漏了一些明显的东西。

但是...我正在尝试将 Cassandra nosql 放在 CentOS 上的 chkserv.d 中，以便它在中断时自动重启。我设法把它放在那里，当它坏掉时它被 chkservd 正确识别。我这样说：

```
root@server [/etc/chkserv.d]# cat cassandra
service[cassandra]=x,x,x,/etc/init.d/cassandra start,cassandra,root 
```

问题是当执行“cassandra start”时，在 cassandra.out 日志中我得到：

```
 /opt/cassandra/cassandra_home/bin/cassandra: line 141: exec: java: not found 
```

在 cassandra 脚本的第 141 行是：

执行 $NUMACTL "$JAVA" $JVM_OPTS $cassandra_parms -cp "$CLASSPATH" $props "$class" <&- &

并且所有环境变量都正确扩展：

```
java -ea -javaagent:/opt/cassandra/cassandra_home/bin/../lib/jamhreadPriorities -XX:ThreadPriorityPolicy=42 -Xms400M -Xmx400M -XnOutOfMemoryError -Xss180k -XX:+UseParNewGC -XX:+UseConcMarkSweeemarkEnabled -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=1 -XX:yFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.net.prefe.sun.management.jmxremote.port=7199 -Dcom.sun.management.jmxremon.management.jmxremote.authenticate=false -Dlog4j.configuration=es -Dlog4j.defaultInitOverride=true -Dcassandra-pidfile=/var/runpt/cassandra/cassandra_home/bin/../conf:/opt/cassandra/cassandraasses/main:/opt/cassandra/cassandra_home/bin/../build/classes/thassandra_home/bin/../lib/antlr-3.2.jar:/opt/cassandra/cassandra_e-cassandra-1.1.5.jar:/opt/cassandra/cassandra_home/bin/../lib/atutil-1.1.5.jar:/opt/cassandra/cassandra_home/bin/../lib/apache-5.jar:/opt/cassandra/cassandra_home/bin/../lib/avro-1.4.0-fixes.ssandra_home/bin/../lib/avro-1.4.0-sources-fixes.jar:/opt/cassann/../lib/commons-cli-1.1.jar:/opt/cassandra/cassandra_home/bin/..2.jar:/opt/cassandra/cassandra_home/bin/../lib/commons-lang-2.4assandra_home/bin/../lib/compress-lzf-0.8.4.jar:/opt/cassandra/clib/concurrentlinkedhashmap-lru-1.3.jar:/opt/cassandra/cassandraa-r08.jar:/opt/cassandra/cassandra_home/bin/../lib/high-scale-liandra/cassandra_home/bin/../lib/jackson-core-asl-1.9.2.jar:/opt/ome/bin/../lib/jackson-mapper-asl-1.9.2.jar:/opt/cassandra/cassajamm-0.2.5.jar:/opt/cassandra/cassandra_home/bin/../lib/jline-0.ra/cassandra_home/bin/../lib/json-simple-1.1.jar:/opt/cassandra//lib/libthrift-0.7.0.jar:/opt/cassandra/cassandra_home/bin/../lipt/cassandra/cassandra_home/bin/../lib/metrics-core-2.0.3.jar:/oa_home/bin/../lib/servlet-api-2.5-20081211.jar:/opt/cassandra/caib/slf4j-api-1.6.1.jar:/opt/cassandra/cassandra_home/bin/../lib/ar:/opt/cassandra/cassandra_home/bin/../lib/snakeyaml-1.6.jar:/oa_home/bin/../lib/snappy-java-1.0.4.1.jar:/opt/cassandra/cassandaptree-0.1.jar org.apache.cassandra.thrift.CassandraDaemon 
```

当我手动启动该 cassandra 脚本，或者使用 etc/init.d/cassandra start 启动它时，一切都会正确启动。

百万美元的问题 - 我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:18:05.547

只需要设置 JAVA_HOME 环境变量。现在一切都按预期工作。

$CASSANDRA_HOME/bin/cassandra.in.sh 中未注释的行。

# iphone - revmob 横幅在 iphone5 中变红并闪烁

> ID：12577823
> 
> 赞同：0
> 
> 时间：2012-09-25T07:05:17.020
> 
> 标签：iphone, banner, revmob

我在我的应用程序底部添加了 revmob 广告横幅。但它只显示红色框，有时它会闪烁。

怎么了？

我曾经添加全屏广告，所以我不知道revmob横幅广告。

请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:58:53.787

我得到了解决方案！:)

恐怕很少有关于 iOS（尤其是 iphone5）的 revmob 广告的参考资料。

我在 viewWillAppear 函数上编写了我的代码 [Revmovads showbannerAdWithDelegate:nil]。

这只是问题。

我将它移到 viewDidAppear，现在广告视图清晰了！

谢谢 ：）

# c# - 枚举值的自定义名称

> ID：12577828
> 
> 赞同：4
> 
> 时间：2012-09-25T07:05:37.203
> 
> 标签：c#, enums, data-annotations

我有一个通过 API 获得的值的枚举。

这些名字很好，但是我想用数据注释来改变一个，但是你怎么做呢？

我的枚举看起来像：

```
public enum TopicType
{
    All = 0,
    Message=1,
    CalendarEvent=2,
    Upload=4, 
    ToDo=8,
    ToDoList=16,
    Document=32
} 
```

我想在编码时将“ToDo”更改为“ToDoItem”，但由于枚举对象的序列化，我无法更改枚举中的值，所以我必须使用数据注释，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T18:49:37.537

无论您为什么要将 ToDo 更改为 ToDoItem（单独讨论），都可以使用以下方法轻松实现：

```
public enum TopicType
{
  All = 0,
  Message=1,
  CalendarEvent=2,
  Upload=4, 
  [Display(Name = "ToDoItem")]
  ToDo=8,
  ToDoList=16,
  Document=32
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:16:07.607

我想你可以试试`[Display()]`Annotation。

我希望这是你所期待的..

# javascript - URL 缩短书签

> ID：12577830
> 
> 赞同：1
> 
> 时间：2012-09-25T07:05:41.993
> 
> 标签：javascript, bookmarklet

好吧，我有一个 URL 缩短器[http://shrt.in/](http://shrt.in/)，我想为它添加一个书签功能。

我已经有了一个，不过我还没有把它放在我的网站上，因为我需要让它变得更好。

这是我现在拥有的：

```
javascript:location.href='http://shrt.in/shrt.php?long='+encodeURIComponent(location)+'&title='+encodeURIComponent(document.title); 
```

当您在要缩短的网站上单击书签时，它会将您重定向到我的网站，您可以在其中复制 URL。

我想知道是否可以以某种方式缩短 URL，并将其粘贴到地址栏中，而无需重定向到我的网站。

所以你去网址长的网站，点击小书签，地址栏就换成了新的短网址。

我知道这是可以做到的，因为几年前我曾经使用过具有此功能的 URL 缩短器，但不幸的是，所有者放弃了它并且它死了。

这对我来说将是一个非常大的帮助，如果你们能帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:29:15.873

如果我说对了，您需要将参数与您的缩短网址一起传递给您的原始网址

以下链接可能会帮助您解决此问题[https://webapps.stackexchange.com/questions/5973/url-shortener-that-supports-parameters](https://webapps.stackexchange.com/questions/5973/url-shortener-that-supports-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:31:24.670

您可以进行编辑`http://shrt.in/`，以便立即重定向到缩短的链接，而不是只显示缩短的链接。

似乎 SHRT.IN 正在使用 PHP。编辑`shrt.php`文件，以便您可以重定向用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:33:22.170

你能行的！您只需要一个 shrt.in 上的侦听器，它将接受 url 以缩短并返回缩短的 url，您需要通过跨站点 ajax 传递长 url 并从您的站点获取结果，而不是重定向到您的站点然后执行短路。

希望能帮助到你。

# visual-studio-2010 - GridView消失没有任何错误

> ID：12577833
> 
> 赞同：0
> 
> 时间：2012-09-25T07:06:01.810
> 
> 标签：visual-studio-2010, sql-server-2008, gridview

我已将 Gridview 设置为允许分页。

```
 try
        {

            SqlConnection sqlConnection = new SqlConnection("Data Source=JACKCONNECTION\\SQLEXPRESS;Initial Catalog=testbase;Integrated Security=True");
            SqlCommand sqlCommand = new SqlCommand(allitemsselectedsqlsrc, sqlConnection);
            sqlCommand.CommandType = System.Data.CommandType.Text;
            sqlConnection.Open();

            SqlDataAdapter da = new SqlDataAdapter(sqlCommand);
            DataSet ds = new DataSet();
            da.Fill(ds);

            ArrayList ArrList = new ArrayList();

            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                ArrList.Add(dr);
            }
            GridViewMass.DataSource = ds;
            GridViewMass.DataBind();

        }
        catch (Exception err)
        {
            LabelSelErr.Text = err.Message;
        } 
```

另外，我`PageIndexChanging`对 GridView 有如下操作：

```
 protected void gvm_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridViewMass.PageIndex = e.NewPageIndex;
        GridViewMass.DataBind();

    } 
```

最后，包含 Gridview 的 aspx 文件如下：

```
<asp:GridView ID="GridViewMass" runat="server" AllowPaging="True" 
                            AllowSorting="True" BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" 
                            BorderWidth="1px" CellPadding="4" EnableSortingAndPagingCallbacks="True" 
                            ForeColor="Black" GridLines="Horizontal" 
                            onpageindexchanging="gvm_PageIndexChanging">
                            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
                            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
                            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
                            <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
                            <SortedAscendingCellStyle BackColor="#F7F7F7" />
                            <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
                            <SortedDescendingCellStyle BackColor="#E5E5E5" />
                            <SortedDescendingHeaderStyle BackColor="#242121" />
                        </asp:GridView> 
```

奇怪的是，当我点击页面时（无论是第二页、第三页还是我可以点击的任何页面），Gridview`GridViewMass`都会消失。

我编码错了吗？以前，我遇到以下错误消息并已解决它们，但现在，我得到了一些我无法继续的东西。

1.  System.dll 中出现“System.InvalidOperationException”类型的第一次机会异常
2.  已经有一个与此命令关联的打开的数据读取器，必须先关闭它。
3.  数据源不支持服务器端数据分页。
4.  GridView 'GridView' 触发了未处理的事件 PageIndexChanging。

感谢任何可以帮助我找回 GridView 的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:53:36.103

您在活动中只缺少一`PageIndexChanging`件事

```
protected void gvm_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    // Here you missing to give datasource to your Grid...
    GridViewMass.PageIndex = e.NewPageIndex;
    GridViewMass.DataBind();

} 
```

在您的 Try/catch 块中，您必须将该数据集存储在`ViewState`

```
 try
    {

        SqlConnection sqlConnection = new SqlConnection("Data Source=JACKCONNECTION\\SQLEXPRESS;Initial Catalog=testbase;Integrated Security=True");
        SqlCommand sqlCommand = new SqlCommand(allitemsselectedsqlsrc, sqlConnection);
        sqlCommand.CommandType = System.Data.CommandType.Text;
        sqlConnection.Open();

        SqlDataAdapter da = new SqlDataAdapter(sqlCommand);
        DataSet ds = new DataSet();
        da.Fill(ds);

        ArrayList ArrList = new ArrayList();

        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            ArrList.Add(dr);
        }
        ViewState["DataSource"] = ds;
        GridViewMass.DataSource = ds;
        GridViewMass.DataBind();

    }
    catch (Exception err)
    {
        LabelSelErr.Text = err.Message;
    } 
```

现在`pageIndexChangeing`像这样改变你

```
protected void gvm_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    // Here you missing to give datasource to your Grid...
    GridViewMass.DataSource = (DataSet)(ViewState["DataSource"]);
    GridViewMass.PageIndex = e.NewPageIndex;
    GridViewMass.DataBind();

} 
```

还记得设置你`EnableSortingAndPagingCallbacks`的`False`！

# vba - 需要画折线图

> ID：12577834
> 
> 赞同：0
> 
> 时间：2012-09-25T07:06:08.507
> 
> 标签：vba, excel

我对 EXCEL VBA 很陌生。请为我提供以下要求的帮助。

**要求**：需要一个 EXCEL VBA 宏来满足以下要求。

有`n`列数。第一列是文本。所有其他列都是数字。我需要为

1.  第 1 列（X 轴）和第 2 列（Y 轴）
2.  第 1 列（X 轴）和第 3 列（Y 轴）
3.  .
4.  .
5.  . n. 第 1 列（X 轴）和第 n 列（Y 轴）

所以状态是第一列是一直不变的。如何通过动态更改列来循环上述状态？

如果我没有解释清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:15:31.967

基本上这是您录制的宏的通用版本，它将循环所有列，所有行。

```
Sub PlotLineGraph()
    Dim height As Long
    Dim width As Long
    Dim sourceWs As Worksheet
    Dim targetWs As Worksheet
    Dim targetWorksheetName As String
    Dim targetRange As Range

    Dim targetChart As Chart
    Dim chartsPerRow As Long
    Dim chartWidth As Double
    Dim chartHeight As Double

    'customize the parameters
    chartsPerRow = 2
    chartWidth = 300
    chartHeight = 300
    Set sourceWs = Worksheets("Sheet1") ' replace Sheet1 with the sheet name the data is stored ( Case sensitive)
    targetWorksheetName = "Sheet2"   ' the output sheet name
    Set targetWs = Worksheets(targetWorksheetName)

    '--------------------------------------------------------------------------------
    'optional
    'this part deletes all previous shapes on the target worksheet
    For Each Shape In targetWs.Shapes
        Shape.Delete
    Next Shape
    '--------------------------------------------------------------------------------
    With sourceWs
        height = .Cells(.Rows.Count, 1).End(xlUp).Row ' getting height of column A
        width = .Cells(1, .Columns.Count).End(xlToLeft).Column 'getting columns of row 1
        If width > 1 Then
            For j = 2 To width
                targetWs.Activate
                targetWs.Shapes.AddChart.Select
                ActiveChart.ChartType = xlLine
                Set targetChart = ActiveChart
                .Activate
                Set targetRange = Union(.Range(.Cells(1, 1), .Cells(height, 1)), .Range(.Cells(1, j), .Cells(height, j)))
                targetChart.SetSourceData Source:=targetRange
                With targetChart.Parent
                    .height = chartHeight
                    .width = chartWidth
                    .Top = CLng((j - 2) / chartsPerRow) * chartHeight
                    .Left = ((j - 2) Mod chartsPerRow) * chartWidth
                End With
            Next j
        End If
    End With
End Sub 
```

# vb.net - DateTimePicker 控件不显示 AM/PM

> ID：12577838
> 
> 赞同：6
> 
> 时间：2012-09-25T07:06:23.837
> 
> 标签：vb.net, winforms, datetimepicker, datetime-format

我在使用包含两个字母 AM/PM 缩写的自定义格式的 DateTimePicker 控件时遇到问题。

使用“en-US”CultureInfo DateTimeFormat.ShortTimePattern 会产生“h:mm tt”。

但是使用以下代码在 DateTimePicker 中将其设置为自定义格式：

```
Dim curCul As CultureInfo = New CultureInfo("en-US")
dtpTime.Format = DateTimePickerFormat.Custom
dtpTime.CustomFormat = curCul.DateTimeFormat.ShortTimePattern 
```

结果只显示小时和分钟。然而，我还需要 AM/PM 部分。

例子：

上午 11:04 显示为 11:04

下午 2:00 显示为 2:00

补充说明：我注意到 DateTimePicker 跟踪正确的时间。如果我增加时间（我为此 DateTimePicker 控件使用 ShowUpDown = true）并将小时数增加 12 并将更改保存到数据库中，则 AM/PM 已更改。因此，显示 AM/PM 部分似乎“仅”是一个问题。

谢谢你的帮助。坦率

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T07:12:30.487

尝试这个

```
dtpTime.Format = DateTimePickerFormat.Custom
dtpTime.CustomFormat = "hh:mm tt" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-14T10:34:16.773

我有同样的问题。这对于“为什么”：实际上根据 MS：[https](https://support2.microsoft.com/Default.aspx?scid=kb%3ben-us%3b889834&x=18&y=19) ://support2.microsoft.com/Default.aspx?scid=kb%3ben-us%3b889834&x=18&y=19 日期选择器不要使用当前的线程文化：它使用用户区域设置。因此，如果您强制日期选择器自定义格式包含“tt”的内容，并且如果用户区域设置没有任何指示符......那么它将不会显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T14:06:41.950

尝试这个：

```
Private Sub mainform_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Timer1.Enabled = True
End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Label7.Text = DateTime.Now.ToString("MMM dd yyyy  hh:mm:ss tt")
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T01:43:22.290

确保在 Windows 设置中您还正确设置了时间格式以显示 AM/PM。Windows 中的时间格式也应设置为 H:mm tt 以正确显示您的结果。

# java - MqSQL 数据库管理

> ID：12577842
> 
> 赞同：2
> 
> 时间：2012-09-25T07:06:32.587
> 
> 标签：java, android, mysql, database, replication

我将很快推出我的 Android 应用程序，我想知道是否有人可以提示我如何管理它正在使用的数据库。情况如下：

我有一个连接到存储在 Amazon EC2 中的 HTTPS 服务器的 Android 应用程序。我已经设置了一个负载均衡器，它在两个实例之间分配负载，所以基本上应用程序连接到均衡器。问题是这两个实例都有自己的数据库副本，并且没有以任何方式同步。我基本上希望两台服务器都处理来自数据库的 READ 请求，并且无论哪一台接收到 WRITE，该写入都将发送到所有其他实例。我不确定这是否是最好的解决方案，所以如果有人有更好的解决方案，我愿意接受建议。

现在我知道了复制，并且我检查了 stackoverflow 中关于该主题的主题，但不幸的是找不到任何可能有帮助的东西。这个想法是不存在单点故障:) 顺便说一句，我使用 mysql 作为带有 Java JDBC 驱动程序的数据库，并且服务器是用 Java 编写的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:13:28.987

我不会关心您的应用程序通过插入或读取到达的数据库。

我建议使用复制设置（主 <-> 主复制有一些缺点，比如很容易发生 PK 违规），比如[galera cluster](http://codership.com/)。

如果一个数据库可以处理每个写入负载，我会选择简单的主->从复制。（写入一直到主控，主控将该数据写入所有用于读取的从属）

# security - Symfony2：设置 security.yml 并使用自定义密码加密

> ID：12577844
> 
> 赞同：0
> 
> 时间：2012-09-25T07:06:42.157
> 
> 标签：security, symfony

我正在尝试在我的 symfony2 项目中使用自定义密码加密。

我在设置安全性时遇到问题：

```
security:
    encoders:
    Symfony\Component\Security\Core\User\User:
      id: custom_encoder

    providers:
        main:
            entity: { class: MDPI\BackendBundle\Entity\Users, property: email }

    firewalls:
        main:
            pattern:    ^/
            anonymous: ~
            form_login:
                login_path:  /login
                check_path:  /login_check

    access_control:
        - { path: /admin/.*, role: ROLE_ADMIN }
        - { path: /.*, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

在这里，我得到了例外：

```
InvalidConfigurationException: Unrecognized options "main" under "security.encoders.providers" 
```

欢迎任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:21:04.427

我解决了这个问题，我的 security.yml 中有一些多余的空格被我删除了。空间必须小心管理这个文件！

# r - 无法创建生存对象：错误“时间变量不是数字”

> ID：12577850
> 
> 赞同：4
> 
> 时间：2012-09-25T07:07:27.560
> 
> 标签：r, object, numeric

我尝试使用此命令创建一个生存对象。

```
Surv(date1, date2, event=status) 
```

它导致错误“时间变量不是数字”。请注意，“date1”和“date2”的类是日期。

在创建生存对象之前，我是否需要将 Date 对象强制转换为数字？我认为这没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:08:31.393

Time 变量必须是数字才能使生存函数起作用，或者在您的情况下，您可以执行以下操作： `Surv(as.numeric(date2 - date1), event=status)`

# php - 第 594 行 C:\xampp\htdocs\2\2\mvc\model\includes\catclass.php 中的非法字符串偏移 'tittle'

> ID：12577851
> 
> 赞同：0
> 
> 时间：2012-09-25T07:07:31.947
> 
> 标签：php, jquery, mysql

请帮助解决这个错误非法字符串偏移“标题”这里是jquery

```
 data:{option:'catapply',sr:$(":input").serialize()}, 
```

和 catapply php 数据

```
if($_REQUEST['option']=='catapply'){

    $sc  = serialize($_POST['sr']);

    mysql_query("insert into user_data(uid,mid,cid,scid,data) values('$session->userid','5','5','5','$sc')"); 
```

现在我正在使用上述方法对存储的db中的上述数据进行反序列化

```
 $sql = mysql_query("SELECT * from user_data  where uid='$session->userid'");

while ($row = mysql_fetch_array($sql)) {
    $un=unserialize($row['data']);
    $tittle=$un['tittle'];

   echo $tittle; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:13:39.620

来自[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

> 返回转换后的值，可以是布尔值、整数、浮点数、字符串、数组或对象。
> 
> 如果传递的字符串不是不可序列化的，则返回 FALSE 并发出 E_NOTICE。

您可以尝试使用错误抑制运算符 (@)，但我不会 [*通常*] 建议这样做。你应该确保它`$row['data']`不是空的。

```
if (!empty($row['data']) {
    // here we're suppressing errors
    // @see: http://php.net/manual/en/language.operators.errorcontrol.php
    $un = @unserialize($row['data']); 
    if ($un) {
        // ... so on and so forth
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:14:06.850

在这条线之后

```
$un=unserialize($row['data']); 
```

试试这个

```
var_dump($un) OR print_r($un) 
```

看看`$un`里面有什么。

```
$un['tittle'] 
```

这不会评估，因为此语法用于数组评估而不是字符串，并且您的`var_dump($un)`结果是字符串。

您正在使用此序列化

```
$sc  = serialize($_POST['sr']); 
```

和反序列化

```
$un=unserialize($row['data']); // this is query data it should be
$un=unserialize($sc); 
```

如果你想要`title` 我们的数据

```
$tittle=$row['tittle']; 
```

# amazon - 亚马逊土耳其人——数据去哪儿了？

> ID：12577853
> 
> 赞同：0
> 
> 时间：2012-09-25T07:07:48.610
> 
> 标签：amazon, mechanicalturk

Aloha - 我想创建一个 Amazon Turk 任务来收集夏威夷酒店公司的信息。

一个问题（我无法通过 MTurk 常见问题解答/网站得到答复）

我的主机上有一个表格，允许 turker 完成任务 - 我可以重定向或在任务描述中包含此链接。我尝试创建一个示例任务——它要求我使用/修改他们现有的 DHTML 模板——并且不允许重定向到我网站上托管的数据输入表单。我计划在 MTurk 任务描述中提供有关如何将数据输入我的站点表单的详细说明。

任何帮助，将不胜感激。马哈洛！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:27:40.650

如果您需要工作人员在您的网站上填写表格，您有两种选择：

1.  使用外部问题创建您的匹配项（需要使用 mturk API）：[http ://docs.amazonwebservices.com/AWSMechTurk/2008-02-14/AWSMechanicalTurkRequester/ApiReference_ExternalQuestionArticle.html](http://docs.amazonwebservices.com/AWSMechTurk/2008-02-14/AWSMechanicalTurkRequester/ApiReference_ExternalQuestionArticle.html)

2.  在任务描述中提供指向工作人员表单的链接。当工作人员填写您的表格后，提供一个验证码，他们可以将其输入到您的 Mturk 模板中的字段中。通过这种方式，您可以通过检查员工是否输入了正确的代码来确保他们已经完成了您的外部表格。

# php - 检测分隔符而不使用 PHP 中的潜在分隔符

> ID：12577863
> 
> 赞同：2
> 
> 时间：2012-09-25T07:08:25.173
> 
> 标签：php, delimiter

我需要在 PHP 中使用一个函数，该函数使用 2 个参数检测文件的分隔符：

文件句柄和预期标头值的数组。

有人可以帮助我编写函数或使用类似的现有函数，该函数使用文件的标题并将其与预期的标题值匹配以检测文件分隔符而不使用潜在分隔符数组。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:20:50.463

```
<?php

    $col1 = 'name';
    $enc = '"';
    $line = '"name";"company";"email"';

    $delimiter = substr($line, (substr($line, 0, 1) == $enc ? (strlen($col1)+2) : strlen($col1)), 1);
    echo $delimiter;

?> 
```

**输出**

```
; 
```

这首先检查第一个字符`$line`是否是`"`. 如果没有`"`，则将 1 个字符作为子串，其起始位置为`$col1`。如果有`"`，则将 1 个字符子串，其起始位置的长度为`$col1`+2（对于每个`"`）

# c# - 为什么 Syncfusion GridControl 会在 ComponentResourceManager 的 GetX 方法中导致 StackOverflowException？

> ID：12577868
> 
> 赞同：1
> 
> 时间：2012-09-25T07:08:59.263
> 
> 标签：c#, visual-studio-2010, syncfusion

我知道这是一个非常具体的问题，我要描述的行为很难重现，但也许有人偶然发现了类似的问题。

我有两个 Visual Studio 项目，*Base*和*Derived*。在*Base*中，我创建了`UserControl`继承者`BaseUserControl`并添加了一个 Syncfusion（版本 9.403.0.62）`GridControl`和一个`ImageList`包含一些图像的内容。然后在*Derived*我派生一个`DerivedUserControl`from `BaseUserControl`。当我现在尝试打开可视化设计器时，Visual Studio 2010 崩溃。如果我将调试器从第二个 Visual Studio 实例附加到我用来打开设计器的那个，我会`StackOverflowException`在. 当调用'方法加载.`InitializeComponent``BaseUserControl``ComponentResourceManager``GetObject``ImageList`

如果没有 Syncfusion，`GridControl`一切正常，我也无法使用 Visual Studio 2008 观察到这个问题。它可以在我们公司的每台机器上复制。我们使用 Windows XP SP3 和 .NET 3.5。

我无法确定与`GridControl`to的直接联系`ComponentResourceManager`，因此无法确定`StackOverflowExcpetion`. 也许有人可以让我看到我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:40:45.817

使用两个基本/派生项目创建了一个示例，其中包括一个 GridControl 和一个 ImageList。一些`*.png`图像附加到 ImageList 中。如您的查询中所述，已提供参考。恐怕无法通过这种方式复制 Vs2010 崩溃。Derivedproject的设计者已经`StackOverflow`无一例外的展示出来了。以下是测试样本供您参考：

[http://www.syncfusion.com/downloads/Support/DirectTrac/1/ImageCell_CS-1414783889.zip](http://www.syncfusion.com/downloads/Support/DirectTrac/1/ImageCell_CS-1414783889.zip)

并且，同时确保以下事项，

1.  检查是否引用了程序集“Syncfusion.Core”。
2.  还要检查您的许可详细信息。
3.  将 Syncfusion 引用程序集的属性的“SpecficVersion”更改为“False”</li>

# objective-c - 我们可以在 xib 文件中搜索吗？

> ID：12577870
> 
> 赞同：1
> 
> 时间：2012-09-25T07:09:04.490
> 
> 标签：objective-c, xcode4.3, xib

我曾经遇到过一个错误，其中 xib 仍然引用了某个变量。

很难找到该错误的原因是，如果我搜索该变量，它根本不会显示。

假设我想知道哪个xib 仍然有某些图片的参考iboutlet。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:12:14.213

是的。XIB 是人类可读的。只需使用文本编辑器或[`grep`图像名称搜索图像名称](https://stackoverflow.com/questions/3963378/text-search-though-all-xib-files-in-xcode?rq=1)。

在构建过程中，它们通常会转换为另一种更小的表示形式（称为“扁平化”）。因此，您希望专门查看您编辑的 XIB，而不是转换并复制到应用程序包内容的 XIB。

# buildbot - buildbot：不构建，而是显示“？”

> ID：12577875
> 
> 赞同：0
> 
> 时间：2012-09-25T07:09:24.853
> 
> 标签：buildbot

我正在尝试将 buildbot 用于 CI 目的。我已经设置了一个 buildmaster 和 buildslave。而且，它们都是相连的。（我在下面附上我的 master.cfg）

我有以下问题：

a) 我可以在 Waterfall 页面上看到提交的更改，这意味着 SVNPoller 工作正常。但是，没有任何更改正在构建。我得到一个“？” 在 buildbot 页面上。

b) 当我尝试从 http://localhost:8010/builders 进行强制构建时，我在日志中收到错误消息：[HTTPChannel,1,10.0.0.58] ..but not authorized

```
c = BuildmasterConfig = {}

from buildbot.buildslave import BuildSlave
c['slaves'] = [BuildSlave("example-slave", "pass")]

c['slavePortnum'] = 9989

from buildbot.changes.svnpoller import SVNPoller
c['change_source'] = []
c['change_source'].append(SVNPoller(
        'file:///my/repo/path/trunk',
        pollinterval=300))

from buildbot.schedulers.basic import SingleBranchScheduler
from buildbot.schedulers.forcesched import ForceScheduler
from buildbot.changes import filter
c['schedulers'] = []
c['schedulers'].append(SingleBranchScheduler(
                            name="all",
                            change_filter=filter.ChangeFilter(branch='trunk'),
                            treeStableTimer=None,
                            builderNames=["runtests"]))
c['schedulers'].append(ForceScheduler(
                            name="force",
                            builderNames=["runtests"]))

from buildbot.process.factory import BuildFactory
from buildbot.steps.source import Git
from buildbot.steps.source import SVN
from buildbot.steps.shell import ShellCommand

from buildbot.steps import source, shell
from buildbot.process import factory

f = factory.BuildFactory()
f.addStep(source.SVN(svnurl="file:///my/repo/path/trunk/", mode="copy"))
f.addStep(shell.ShellCommand(command=["cmake", "."]))
f.addStep(shell.ShellCommand(command=["make", "all"]))

from buildbot.config import BuilderConfig

c['builders'] = []
c['builders'].append(
    BuilderConfig(name="runtests",
      slavenames=["example-slave"],
      factory=f))

c['status'] = []

from buildbot.status import html
from buildbot.status.web import authz, auth

authz_cfg=authz.Authz(
    auth=auth.BasicAuth([("userid","password")]),
    gracefulShutdown = False,
    forceBuild = 'auth', # use this to test your slave once it is set up
    forceAllBuilds = True,
    pingBuilder = False,
    stopBuild = False,
    stopAllBuilds = False,
    cancelPendingBuild = False,
)
c['status'].append(html.WebStatus(http_port=8010, authz=authz_cfg))

c['title'] = "My Project"
c['titleURL'] = "http://my/url"

c['buildbotURL'] = "http://localhost:8010/"

c['db'] = {
    'db_url' : "sqlite:///state.sqlite",
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:16:38.870

更改以下值：

forceBuild = 真

# xcode - shouldAutorotateToInterfaceOrientation 在 iOS 6 中不起作用

> ID：12577879
> 
> 赞同：30
> 
> 时间：2012-09-25T07:09:59.137
> 
> 标签：xcode, orientation, ios6, screen-orientation

在 iOS 6`shouldAutorotateToInterfaceOrientation`中无法正常工作，但在 iOS 5.0 和 5.1 中运行良好。

对于 iOS 6，我需要更改哪些内容？这是我的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
if([[[SampleApplicationAppDelegate instance].callInfoDictionary valueForKey:IS_CHAT] isEqualToString:NO_RESPONSE])
{
    int nAngle = 0;
    BOOL bRet = NO;

    switch (interfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            nAngle = 90;
            bRet = YES;
            NSLog(@".......Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);

            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);

            NSLog(@"Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            nAngle = 270;
            bRet = YES;
            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        case UIInterfaceOrientationLandscapeLeft:
            nAngle = 0;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
            break;

        case UIInterfaceOrientationLandscapeRight:
            nAngle = 180;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        default:
            break;
    }                
    return bRet;
}    
if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    return YES;     
return NO;    
} 
```

当我搜索这个方向问题时，我发现的只有[这个](https://stackoverflow.com/questions/11441762/stop-uiview-from-roating-into-landscape)和[这个](https://stackoverflow.com/questions/12260261/shouldautorotatetointerfaceorientation-not-being-called-in-ios-6)，但对我没有任何帮助:(

请帮忙 .....

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-25T11:14:29.363

**编辑：**发生这种情况是因为 Apple 改变了管理`UIViewController`. 在 iOS6 中，方向处理方式不同。在**iOS6 中，** `shouldAutorotateToInterfaceOrientation`方法已被弃用。视图控制器（例如`UINavigationController`）不会咨询他们的孩子来确定他们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置`UIInterfaceOrientationMaskAll`为 iPad[惯用语](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/macro/UI_USER_INTERFACE_IDIOM)和`UIInterfaceOrientationMaskAllButUpsideDown`iPhone 惯用语。

如果您希望将特定视图更改为所需的方向，您必须执行某种子类或类别并覆盖自动旋转方法以返回所需的方向。

将此代码放在您的根视图控制器中。这将有助于`UIViewController`确定其方向。

```
 //RotationIn_IOS6 is a Category for overriding the default orientation.

  @implementation UINavigationController (RotationIn_IOS6)

 -(BOOL)shouldAutorotate
    {
      return [[self.viewControllers lastObject] shouldAutorotate];
    }

  -(NSUInteger)supportedInterfaceOrientations
   {
     return [[self.viewControllers lastObject] supportedInterfaceOrientations];
   }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
 {
     return [[self.viewControllers lastObject]  preferredInterfaceOrientationForPresentation];
 }

 @end 
```

现在您需要在 viewController 中实现以下方法（在 iOS6 中引入）以进行定位

```
- (BOOL)shouldAutorotate
{
    //returns true if want to allow orientation change
    return TRUE;

}
- (NSUInteger)supportedInterfaceOrientations
{   
     //decide number of origination tob supported by Viewcontroller.
     return UIInterfaceOrientationMaskAll;

}

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
   {
     //from here you Should try to Preferred orientation for ViewController 
   } 
```

并将您的代码放入以下方法中。每当更改设备方向时，都会调用此方法：

```
 - (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)  interfaceOrientation duration:(NSTimeInterval)duration
{
if([[[SampleApplicationAppDelegate instance].callInfoDictionary valueForKey:IS_CHAT] isEqualToString:NO_RESPONSE])
{
    int nAngle = 0;
    BOOL bRet = NO;

    switch (interfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            nAngle = 90;
            bRet = YES;
            NSLog(@".......Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);

            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);

            NSLog(@"Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            nAngle = 270;
            bRet = YES;
            _previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        case UIInterfaceOrientationLandscapeLeft:
            nAngle = 0;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
            break;

        case UIInterfaceOrientationLandscapeRight:
            nAngle = 180;
            bRet = YES;
            //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        default:
            break;
    }                
  } 
```

**编辑：**检查你的窗口，你需要在窗口上添加控制器，`rootViewController`而不是`addSubview`像下面这样

```
self.window.rootViewController=viewController; 
```

有关详细信息，请参阅有关[iOS6.0](http://9to5mac.com/2012/06/25/apple-pushes-ios-6-0-update-to-devs/) Beta 2 OTA 的文章。

我希望这可以帮到你。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-17T06:55:28.710

我解决此问题的方法是在我的应用程序在委托类中启动时替换以下行

```
 window addSubview: navigationController.view 
```

和

```
window.rootViewController = navigationController 
```

进行此更改后，我的应用程序开始处理屏幕旋转

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T13:30:33.807

这是因为 Apple 已弃用 ios6 中的 shouldautorate 方法，而是使用这些方法

```
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
- (NSUInteger)supportedInterfaceOrientations NS_AVAILABLE_IOS(6_0);
// Returns interface orientation masks.
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation NS_AVAILABLE_IOS(6_0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T17:52:59.927

我解决了这个问题就用这个

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    
    if(![AppDelegate instance])
        return (interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);

    if([[[AppDelegate instance].callInfoDictionary valueForKey:IS_CHAT] isEqualToString:NO_RESPONSE])
    {
        int nAngle = 0;
        BOOL bRet = NO;

        switch (interfaceOrientation) {
            case UIInterfaceOrientationPortrait:
            {
                nAngle = 90;
                bRet = YES;
                NSLog(@".......Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);

                NSComparisonResult order = [[UIDevice currentDevice].systemVersion compare: @"6.0" options: NSNumericSearch];
                if (order == NSOrderedSame || order == NSOrderedDescending)
                {
                    // OS version >= 6.0
                    NSLog(@"ami iOS 6 er device");
                    _previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
                }
                else
                {
                    // OS version < 6.0
                    _previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
                }

                NSLog(@"Preview = %f %f",_previewCamera.frame.size.width,_previewCamera.frame.size.height);
                NSLog(@"-->%s %d",__FUNCTION__,__LINE__);
                break;
            }

            case UIInterfaceOrientationPortraitUpsideDown:
            {

                nAngle = 270;
                bRet = YES;
                NSComparisonResult order = [[UIDevice currentDevice].systemVersion compare: @"6.0" options: NSNumericSearch];
                if (order == NSOrderedSame || order == NSOrderedDescending)
                {
                    // OS version >= 6.0
                    NSLog(@"ami iOS 6 er device");
                    _previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
                }
                else
                {
                    // OS version < 6.0
                    _previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
                }
                break;
            }
            case UIInterfaceOrientationLandscapeLeft:
                nAngle = 0;
                bRet = YES;
                //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI*1.5);
                break;

            case UIInterfaceOrientationLandscapeRight:
                nAngle = 180;
                bRet = YES;
                //_previewCamera.transform = CGAffineTransformMakeRotation(M_PI_2);
                break;

            default:
                break;
        }        

        return bRet;
    }   
    if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
        return YES; 
    return NO;    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T20:14:52.967

请试试这个，它会对你有所帮助。

在你的 viewcontroller 类中编写代码

```
-(BOOL)shouldAutorotate
   {
      return YES;
   }

   -(NSUInteger)supportedInterfaceOrientations{
      return UIInterfaceOrientationMaskLandscape;
    } 
```

然后在 appdelegate 中搜索这一行 [window addSubview:viewController.view] 并将其替换为 window.rootViewController = viewController;

欢呼它会起作用。它适用于 ios 6 的简单解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T10:06:09.633

这对我有用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

    - (BOOL)shouldAutorotate {

        UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

        if (orientation == UIInterfaceOrientationPortrait) {
            // your code for portrait mode

        }

        return YES;
    }
    - (NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown;
    } 
```

# sql - SQL select Distinct with where 子句

> ID：12577881
> 
> 赞同：5
> 
> 时间：2012-09-25T07:10:03.223
> 
> 标签：sql

我有这样的桌子。

```
PersonID, KvalifikationId
1         1
1         2
1         3
2         1
2         3 
```

我想编写返回所有没有 kvalifikation 2 的人的 SQL 查询。

我写

```
SELECT DISTINCT PersonID where NOT KvalifikationID = 2 
```

但这会返回第 1 个人和第 2 个人。我如何选择只返回没有 kval2 的 personId？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T07:11:48.140

试试这个，

```
SELECT DISTINCT PersonID
FROM tableName
WHERE PersonID NOT IN
    (
        SELECT PersonID
        FROM tableName
        WHERE KvalifikationId = 2
    ) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e5c8b/17)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T07:17:44.467

```
Declare @t table(PersonID int,KvalifikationId int)
Insert Into @t Select 1 ,1
Insert Into @t Select 1, 2
Insert Into @t Select 1,3
Insert Into @t Select 2 ,1
Insert Into @t Select 2,3

Select PersonId From @t

Except 

Select PersonID From @t where KvalifikationId = 2 
```

**结果**

```
PersonId
2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T07:13:21.523

```
SELECT DISTINCT person_id
FROM tableName t1
WHERE not exists 
(
  select 1 
  from tableName 
  where person_id = t1.person_id and KvalifikationId = 2 
) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T07:28:53.313

通过`Person`在外部查询中使用您的表而不是您的 N:N 表，您可以跳过`distinct`子查询的反半连接，因为它位于聚集索引上，所以性能会更好。（假设表`PersonID`中为pk `Person`）

```
SELECT PersonID
FROM tblPerson
WHERE NOT EXISTS
    (
        SELECT NULL
        FROM tblPersonKvalifikation
        WHERE KvalifikationId = 2 AND 
              tblPerson.PersonID = tblPersonKvalifikation.PersonID
    ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T07:26:11.143

试试这个。
SELECT DISTINCT PersonID from tableName
WHERE KvalifikationId NOT IN ('2');

# java - Portlet 生命周期和初始化

> ID：12577884
> 
> 赞同：2
> 
> 时间：2012-09-25T07:10:26.580
> 
> 标签：java, tomcat, servlets, portlet

我不清楚什么时候调用a`Portlet`的方法。`init`它是在容器实例化时调用还是在对 portlet 的第一个请求到来时调用？
它的行为是否与`Servlet#init`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:40:12.570

这取决于容器。从[Portlet 2.0 规范](http://jcp.org/en/jsr/detail?id=286)：

> **PLT.5.2.1 加载和实例化**
> 
> portlet 容器负责加载和实例化 portlet。加载和实例化可以在 portlet 容器启动 portlet 应用程序时发生，或者延迟到 portlet 容器确定需要 portlet 来为请求提供服务时发生。
> 
> ...
> 
> **PLT.5.2.2 初始化**
> 
> 在实例化 portlet 对象之后，portlet 容器必须在调用 portlet 以处理请求之前对其进行初始化。

# java - Android OnNavigationListener 覆盖？

> ID：12577888
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:38.247
> 
> 标签：java, android, overriding, android-actionbar

我正在我的 actionBar 中为 android 实现一个下拉菜单，并且我正在尝试设置 onNavigationItemSelected 行为，但我被告知没有什么可以覆盖？任何帮助都会很棒。代码：

```
 public class DropMenu implements OnNavigationListener {

    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
        switch (itemPosition) {

        case 0: {

        }

        case 1: {

        }

        case 2: {

        }

        }
        return false;
    } 
```

错误：

> MainActivity.DropMenu 类型的 onNavigationItemSelected(int, long) 方法必须覆盖超类方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:38:55.203

假设您使用的是 Eclipse：

右击你的项目，进入“Properties”，选择左侧的“Java Compiler”，将“Compiler compliance level”设置为1.6

# websphere - 卸载 IBM WebSphere

> ID：12577889
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:38.887
> 
> 标签：websphere, websphere-7

我正在使用 IBM 安装管理器从我的驱动器 E 中卸载 WebSphere，在卸载期间它给了我以下错误：“E:\Program Files\IBM\WebSphere\AppServer\bin\clearClassCache.bat”未找到”

我搜索了一下，发现clearClassCache.bat文件的位置是：

“E:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv01\bin”

我应该将文件从 AppSrv01\bin 复制到 AppServer\bin 并重试卸载吗？或者有没有其他解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:23:17.730

AppServer\profiles\AppSrv01\bin 下的脚本也应该在 AppServer\bin 下，但配置文件下的副本通常（总是？）修改为特定于配置文件。所以我怀疑复制它对你有用。

该特定脚本位于我的 AppServer\bin 下，因此在您的情况下似乎已将其删除。可能来自卸载的早期部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T16:41:50.423

有点老问题，但它就在这里。

卸载脚本位于 <application_server>\uninstall 文件夹中。不确定在 Windows 下叫什么，但在 Linux 上是 <application_server>\uninstall\uninstall （是的脚本与文件夹同名）

# c# - 传入字典的模型项是“`”类型，但该字典需要一个“System.Collections.Generic.IEnumerable”类型的模型项

> ID：12577891
> 
> 赞同：2
> 
> 时间：2012-09-25T07:10:39.987
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, wcf, razor

在这里，我在 MVC 中使用 WCf 服务并从该服务中检索值并尝试在视图中显示它。得到错误：

> 传递到字典中的模型项的类型为“System.Collections.Generic.List”，但此字典需要“System.Collections.Generic.IEnumerable”类型的模型项

**服务代码：**

```
public IList<AddressDetails> GetAddressDetails(string addressid)
        {
            List<AddressDetails> addressdetails = new List<AddressDetails>();
             {
                con.Open();
                SqlCommand cmd = new SqlCommand("select Name,EmailAddress,Line1,City from Address where addressid ='6742596A-F413-4C71-8BAB-0016F96B56A0'", con);
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataTable dt = new DataTable();
                da.Fill(dt);
                if (dt.Rows.Count > 0)
                {
                    for (int i = 0; i < dt.Rows.Count; i++)
                    {
                        AddressDetails addressInfo = new AddressDetails();
                        //addressInfo.Addressid = dt.Rows[i]["Addressid"].ToString();
                        addressInfo.Name = dt.Rows[i]["Name"].ToString();
                        addressInfo.EmailAddress = dt.Rows[i]["EmailAddress"].ToString();
                        addressInfo.Line1 = dt.Rows[i]["Line1"].ToString();
                        addressInfo.City = dt.Rows[i]["City"].ToString();
                        addressdetails.Add(addressInfo);
                    }
                }
                con.Close();
            }
            return addressdetails;
        } 
```

**控制器代码：**

```
ServiceReference1.Service1Client objService = new ServiceReference1.Service1Client();
        public ActionResult sample()
        {
            IList<AddressDetails> objAddressDetails = new List<AddressDetails>();
            objAddressDetails = objService.GetAddressDetails("");
            return View(objAddressDetails.ToList());
        } 
```

**查看代码：**

```
@model IEnumerable<Magelia.WebStore.StarterSite.Web.Models.Sample.SampleViewModel>

@{
    ViewBag.Title = "sample";
}

<h2>sample</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            AddressId
        </th>
        <th>
            Name
        </th>
        <th>
            EmailAddress
        </th>
        <th>
            Line1
        </th>
        <th>
            City
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.AddressId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EmailAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Line1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:12:59.470

线索就在您错过的问题中 -视图中序列的预期*元素类型以及列表的**元素类型*。

这是您在模型中创建的内容：

```
IList<AddressDetails> objAddressDetails = new List<AddressDetails>(); 
```

但这是模型声明它需要的：

```
@model IEnumerable<Magelia.WebStore.StarterSite.Web.Models.Sample.SampleViewModel> 
```

你应该有

```
@model IEnumerable<AddressDetails> 
```

我的猜测是您复制并粘贴了模型声明而没有查看 - 始终确保您了解复制和粘贴的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:12:41.227

尝试更改以下代码行（在控制器中）：

```
return View(objAddressDetails.AsEnumerable()); 
```

# jenkins - jenkins 可以在构建时从 transifex 下载 *.mo 吗？

> ID：12577893
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:46.797
> 
> 标签：jenkins, translation

我正在使用 Zend/Translator 和 gettext，当 jenkins build 正在运行时，它可以从我的 transifex 帐户更新 MO 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:23:46.700

您可以为此在构建过程中添加一个额外的步骤。

首先，您需要使用[transifex 客户端](http://help.transifex.com/features/client/)并为您的项目进行设置。许多项目选择在存储库本身内包含所需的 .tx/config 文件。参见例如 [https://github.com/django/django/tree/master/.tx/](https://github.com/django/django/tree/master/.tx/)

鉴于此，您可以将项目配置为首先从 Transifex 中提取所有 PO 文件`tx pull -a`，然后运行`msgfmt`命令从 PO 文件生成 MO 文件。

# ios6 - 我正在使用 Xcode 4.5 并且我跟踪到此“格式字符串不是字符串文字（可能不安全）”的警告

> ID：12577894
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:48.963
> 
> 标签：ios6, xcode4.5

我面临以下**错误**：
`format string is not a string literal (potentially insecure) [-Wformat-security]`

我的**代码**是：

```
appDelegate.reportString = [NSString stringWithFormat:queryString]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:41:01.043

由于您似乎不想格式化字符串（即没有与格式字符串一起使用的参数）而只是复制它，因此更好的使用方法是[[NSString stringWithString:]](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithString:)

```
appDelegate.reportString = [NSString stringWithString:queryString]; 
```

如果`queryString`是不可变字符串而不是`NSMutableString`，则无需复制它，只需使用;

```
appDelegate.reportString = queryString; 
```

结果相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:41:36.503

问题是“ `stringWithFormat`”更喜欢编译时字符串文字，例如：

```
appDelegate.reportString = [NSString stringWithFormat: @"this is a series of numbers %@", @"123456"]; 
```

而在您的情况下，编译器看到的只是一个变量（“ `queryString`”），没有别的。

如果 queryString 没有改变，为什么不这样做：

```
appDelegate.reportString = queryString; 
```

这会增加 queryString 的保留计数。或者你可以做“ `[[NSString alloc] initWithString: queryString]`”或“ `[queryString copy]`”来创建一个全新的保留副本。

当然，约阿希姆的回答也很好。给他+1！

# c# - 如何创建我自己的通用列表类？

> ID：12577895
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:50.023
> 
> 标签：c#, generics, linked-list

我有这个 ：

```
public class CChainElement
{
    public CChainElement m_Prev, m_Next;
}

public class CChainList : IEnumerable
{
    public CChainElement m_First;

    internal void Add(CChainElement Element)
    {
        if (m_First != null)
            m_First.m_Prev = Element;

        Element.m_Next = m_First;
        m_First = Element;
    }
}

public class CEntity : CChainElement
{
}

public class CItem : CEntity
{
}

public class CTest
{
    void Test()
    {
        CChainList AllItem = new CChainList();
        CItem Item = new CItem();

        AllItem.Add(Item);

        CItem FirstItem = AllItem.m_First as CItem;
        CItem SecondItem = FirstItem.m_Next as CItem;
    }
} 
```

我想切换到这样的东西：

```
public class CChainElement<T> where T : CChainElement<T>
{
    public T m_Prev, m_Next;
}

public class CChainList<T> : IEnumerable where T : CChainElement<T>
{
    public T m_First;

    internal void Add(T Element)
    {
        if (m_First != null)
            m_First.m_Prev = Element;

        Element.m_Next = m_First;
        m_First = Element;
    }
}

public class CEntity : CChainElement<CEntity>
{
}

public class CItem : CEntity
{
}

public class CTest
{
    void Test()
    {
        CChainList<CItem> AllItem = new CChainList<CItem>();
        CItem Item = new CItem();

        AllItem.Add(Item);

        CItem FirstItem = AllItem.m_First;  // Yeepee, no more "as CItem" ..! ;-)
        CItem SecondItem = FirstItem.m_Next;
    }
} 
```

我得到的错误是`CItem can't be converted to CChainElement<CItem>`.

所以我的问题是：是否有任何约束`public class CChainElement<T>`，所以它会优雅地采用 CItem，即使它不直接从 CChainElement 继承？

我的目标显然是所有继承自`CChainElement<T>`能够与我的通用列表类一起列出的类，同时避免显式转换。

提前感谢您的帮助！

**编辑：**在我的完整项目中，CEntity 作为一个抽象类用于许多不同的事情（即：我可以通过它以与 Items 类似的方式操纵 Monsters），因此不能将其更改为通用的`CEntity<T>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:29:23.200

`CChainElement`不应该是通用的。唯一应该转向泛型的是`CChainList`.

```
public class CChainElement
{
    public CChainElement m_Prev, m_Next;
}

public class CChainList<T> : IEnumerable
   where T : CChainElement
{
    public T m_First;

    internal void Add(T Element)
    {
        if (m_First != null)
            m_First.m_Prev = Element;

        Element.m_Next = m_First;
        m_First = Element;
    }
}

public class CEntity : CChainElement
{
}

public class CItem : CEntity
{
}

public class CTest
{
    void Test()
    {
        CChainList<CItem> AllItem = new CChainList<CItem>();
        CItem Item = new CItem();

        AllItem.Add(Item);

        CItem FirstItem = AllItem.m_First;
        CItem SecondItem = FirstItem.m_Next;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:53:17.650

嗯，这是一个有趣的小问题。您需要进行以下更改：

```
public class CEntity<T> : CChainElement<T> where T : CChainElement<T> { ... }

public class CItem : CEntity<CItem> { ... } 
```

然后这将按照您想要的方式工作：

```
var allItems = new CChainList<CItem> { new CItem(), new CItem() };

// Both of these are now of type Item.
var firstItem = allItems.m_First;
var secondItem = firstItem.m_Next; 
```

* * *

另一种选择是制作`ChainElement`一个通用接口：

```
public interface IChainElement<T> where T : IChainElement<T>
{
    T Previous { get; set; }
    T Next { get; set; }
} 
```

但是，您必须明确地将属性添加到要放入列表中的每个类：

```
public class Entity { }

public class Item : Entity, IChainElement<Item>
{
    public Item Previous { get; set; }
    public Item Next { get; set; }
} 
```

无论哪种方式，您最终都需要修改列表中要使用的所有类。

* * *

顺便说一句，您可能希望使用一组更好的命名约定。`C`用, 命名参数和局部变量以及以`InitialCapitals`开头的公共字段作为所有类名的前缀`m_`会使您的代码很难阅读！我会推荐这样的东西：

```
public class ChainElement<T> where T : ChainElement<T>
{
    public T Previous { get; set; }
    public T Next { get; set; }
}

public class ChainList<T> : IEnumerable where T : ChainElement<T>
{
    public T First { get; private set; }

    public void Add(T element)
    {
        if (First != null)
            First.Previous = element;

        element.Next = First;
        First = element;
    }

    public IEnumerator GetEnumerator() { throw new NotImplementedException(); }
}

public class Entity<T> : ChainElement<T> where T : ChainElement<T> { }

public class Item : Entity<Item> { } 
```

# wordpress - 如何在 WordPress 中实现单页布局

> ID：12577896
> 
> 赞同：0
> 
> 时间：2012-09-25T07:10:55.547
> 
> 标签：wordpress, wordpress-theming

我需要为客户制作一个 WordPress 模板，他们在其中定义多个嵌套（2 级）页面并将它们显示在单个页面上。嵌套页面将位于选项卡部分中，因此用户可以通过更改选项卡在这些部分之间导航。他们还希望有几个页面正常显示（在单独的页面上）。为了处理这个问题，我想我可以对一个页面中的页面或单独的页面使用不同的模板。

我想出了如何显示页面，但我不知道如何让 WordPress 生成我想要的链接。如果可能的话，我想使用内置的 WordPress 菜单来构建带有锚点链接的菜单（就像`<a href="#section">`我不记得术语一样）。

除了付费主题外，我无法在 WordPress 中找到任何单页布局的示例（而且我付费不仅仅是为了看看其他人是如何做到的）。如果可能的话，我希望使用 WordPress 内置菜单，但如果没有，我想我可以自己构建菜单。

这是我显示页面的方式：

```
<?php
/**
 * Template Name: One Page Template
 */

get_header(); ?>
    <div id="primary">
        <div id="content" role="main">

            <?php query_posts(array(
                'post_type' => 'page',
                'post_parent' => 0,
                'orderby' => 'menu_order',
                'order' => 'ASC'
                // would also like to check something like 'template' => 'one-page'
            )); ?>

            <?php while (have_posts()) : the_post(); ?>
                <article class="page" id="<?php echo $post->post_name; ?>">
                    <h1><?php the_title(); ?></h1>

                    <?php the_content(); ?>

                    <?php $sub_pages = new WP_Query(array(
                        'post_type' => 'page',
                        'post_parent' => $post->ID,
                        'orderby' => 'menu_order',
                        'order' => 'ASC'
                    ));
                    while ($sub_pages->have_posts()) : $sub_pages->the_post(); ?>
                        <h2><?php the_title(); ?></h2>

                        <?php the_content(); ?>
                    <?php endwhile;?>
                </article>
            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:59:06.647

最简单的方法是在 WP 内置菜单中使用自定义链接，但我想你想要比这更好的东西。

我认为你想要的是这里的[HTML Formatting for Custom Menus](http://digwp.com/2011/11/html-formatting-custom-menus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:09:40.803

这是我发现的

```
function one_page_permalink($permalink, $id)
{
    $template = get_post_meta($id, '_wp_page_template', true);
    if ($template == 'one-page.php') {
        $post = get_page($id);
        return '/#' . $post->post_name;
    }
    return $permalink;
}

add_filter('_get_page_link', 'one_page_permalink', 10, 2); 
```

它并不完美，但它可以满足我的需求。

# php - tcpdf 中的 HTML 实体

> ID：12577900
> 
> 赞同：1
> 
> 时间：2012-09-25T07:11:09.573
> 
> 标签：php, html-entities, tcpdf

我正在使用 tcpdf 生成 pdf，但是在显示其中包含 html 实体的字符串时遇到了问题。例如，字符串 `RAH&#304;B`显示为 RAH?B，而我只想解码此实体并将其显示为 RAHİB。我使用 UTF-8 作为字符集。我尝试使用 html_entity_decode 函数，但这不起作用。

任何帮助都会非常明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:48:14.337

有一个名为 TCPDF 的函数`unhtmlentities`对我有用。

[https://tcpdf.org/docs/srcdoc/tcpdf/class-TCPDF/#_unhtmlentities](https://tcpdf.org/docs/srcdoc/tcpdf/class-TCPDF/#_unhtmlentities)

# iphone - 在调试模式下测试 IAP

> ID：12577901
> 
> 赞同：0
> 
> 时间：2012-09-25T07:11:10.913
> 
> 标签：iphone, ios, ipad

我知道 Apple 支持 2 个 IAP 链接，一个用于调试，一个用于发布，我在调试模式下将我的应用程序构建到我的设备上，并且曾经`https://buy.itunes.apple.com/verifyReceipt`购买过 IAP 产品，但设备总是向我显示**[Environment:Sandbox]**的警报。

我想知道的是：我可以通过真正的商店（ **）而不是沙盒商店****来测试 iap 。`https://buy.itunes.apple.com/verifyReceipt`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:57:48.283

我认为您无法在调试模式下通过实际的应用商店对其进行测试。

# php - 将周数 (1 - 5) 分配给一个月中的几天

> ID：12577902
> 
> 赞同：1
> 
> 时间：2012-09-25T07:11:24.427
> 
> 标签：php, calendar, week-number

我正在尝试将一个月中的几天从 1 分配到 5 周，即

```
 Day 1 - 7   = Week 1
  Day 8 - 14  = Week 2
  Day 15 - 21 = Week 3
  Day 22 - 28 = Week 4
  Day 23 - 31 = Week 5 
```

平年和闰年的所有月份。

我的问题是：对于像 2012 年 9 月（周日 - 周六）这样的一个月，9 月 1 日是第 35 周的最后一天，而 9 月 30 日是第 40 周的开始，因此不会使这周独一无二。

我的周数是否总是正确的？

我每个月都有这样的日子。此外，此代码用于从 1 到 53 获取周数。但我只希望各个月份的第 1 周到 4/5 周。

```
$month array('january'.........'december');
$year = array('2011',........'2099');
for($i=0; $i<count($year); $i++){
    for($j=0; $j<count($month); $j++){
        $stamp = strtotime("last Monday of $month[$j] $year[$i]");
        $date = date("d-M-Y", $stamp); 
        $newdate = explode("-", $date); 
        echo "Day - $date[0]". "<br>";
        echo "Month - $date[1]". "<br>";
        echo "Year - $date[2]". "<br><br>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:54:21.643

您可以使用此代码段

```
<?php
function weekInMonth($date) {
return (int) ((date('d', $date) - 1) / 7) + 1;
} 
```

回报：

```
weekInMonth(strToTime('2012/09/01')); // 1
weekInMonth(strToTime('2012/09/14')); // 2
weekInMonth(strToTime('2012/09/15')); // 3
weekInMonth(strToTime('2012/09/21')); // 3
weekInMonth(strToTime('2012/09/22')); // 4
weekInMonth(strToTime('2012/09/28')); // 4
weekInMonth(strToTime('2012/09/29')); // 5 
```

再说一次，我不太确定它是否适用于您的用例。

# c# - ASP.NET Web API：RC 到 RTM 的变化。使用 HttpContext 发送内容以 NoContent 状态结束

> ID：12577903
> 
> 赞同：1
> 
> 时间：2012-09-25T07:11:25.097
> 
> 标签：c#, asp.net, asp.net-web-api, .net-4.5, c#-5.0

由于 ASP.NET Web API RC，我使用了一些基于声明 void API 控制器操作的方法。

我正在使用 AOP 和 PostSharp 自定义~~响应对象~~DTO（而不是使用 HttpResponseMessage），最后使用`HttpContext.Response.Write(...)`将 DTO 序列化为 JSON 字符串将其发送到客户端。

当我将解决方案升级到 ASP.NET Web API RTM 时，这种方法不再适用。

每当我从 Web API 发送响应并在客户端收到它时，我发现响应以 204 状态 (NoContent) 发送，而我为响应本身设置 200 状态 (OK)。

因为这种方法适用于 WebAPI 的 RC 版本，所以我怀疑当 WebAPI 开发团队过渡到 RTM 版本时，这是一个未知的重大变化。

我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:19:53.670

我不知道这种重大变化，但我可以确认这在 RTM 中不起作用。无论如何，这是一种错误的使用 Web API 的方法，以至于它不起作用可能是一件好事。如果您要手动编写对客户端的响应，那么您正在扼杀 Web API 的全部意义。如果您有一些无法修改的现有代码执行此操作，那么我建议您使用通用 ASHX 处理程序，直到您准备好升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:11:41.020

据我所知，由于 RTM 如果 POST 操作不返回 HttpResponseMessage，则默认状态代码为 204（而不是 RC 中的 200）。我知道，我们可以做两件事来防止客户抱怨 204。

a) 从您的操作中更改响应消息：

```
[HttpPost]
public HttpResponseMessage DoWork(MyModel model)
{
   // Do work
   return new HttpResponseMessage(HttpStatusCode.OK) { Content = new ObjectContent<MyModel>(model, FormatterConfig.JsonFormatter) };
} 
```

b）更改 DelegatingHandler 中的响应（通过通用方式变脏）

```
public class ResponseHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var response = base.SendAsync(request, cancellationToken);

        response.Result.StatusCode = response.Result.IsSuccessStatusCode ? System.Net.HttpStatusCode.OK : response.Result.StatusCode;
        return response;
    }
} 
```

# javascript - 使用 Jasmine-Maven 测试 AJAX 调用

> ID：12577905
> 
> 赞同：0
> 
> 时间：2012-09-25T07:11:38.417
> 
> 标签：javascript, unit-testing, testing, jasmine, jasmine-jquery

对于我当前的项目，我正在使用 Jasmine 设置 JS 测试。我们希望我们的测试在每次构建时自动运行，所以我将它插入到我们的 Maven 构建中。我可以运行 Javascript 的一些基本测试，并且一切正常。到目前为止，一切都很好！

但是，我们正在构建一个富客户端接口，并对服务器进行大量回调——因此，我们的代码中有很多 $.ajax 调用。每当我尝试加载包含调用的 JS 文件（*不*执行测试，甚至还没有处理）时，Maven 构建每次都会崩溃，因为它已经尝试执行回调：

```
[ERROR] Caused by: java.io.FileNotFoundException: F:\Users\gjoris\Development\Source\xxx\xxx-war\target\jasmine\rest\xxx\search (The system cannot find the path specified) 
```

所以，只是为了说清楚：我*不是*在这里运行测试，我只是在加载源代码。到目前为止，这是我的插件的配置：

```
 <plugin>
            <groupId>com.github.searls</groupId>
            <artifactId>jasmine-maven-plugin</artifactId>
            <version>1.2.0.0</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                    <goals>
                        <goal>test</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <sourceIncludes>
                    <include>sorting*.js</include>
                    <include>*blabla*.js</include>
                </sourceIncludes>
                <jsSrcDir>${project.basedir}/src/main/webapp/resources/scripts/</jsSrcDir>
                <jsTestSrcDir>${project.basedir}/src/test/javascript</jsTestSrcDir>
                <timeout>300</timeout>
                <preloadSources>
                    <!-- Load basic libraries for application-->
                    <source>${project.basedir}/src/main/webapp/resources/scripts/libs/knockout-2.1.0.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/scripts/libs/jquery-1.7.2.min.js</source>
                    <!-- Load all necessary Jasmine plugins -->
                    <source>${project.basedir}/src/test/javascript/libs/jasmine-ajax/mock-ajax.js</source>
                    <source>${project.basedir}/src/test/javascript/libs/jasmine-jquery/jasmine-jquery.js</source>
                    <!-- Load our own mocks -->
                    (some of our mocks in JS go here)
                    <!-- Load additional libraries, application specific, which are needed to run -->
                    (some general JS, which are used everywhere)
                </preloadSources>
            </configuration>
        </plugin> 
```

任何人都有这方面的经验，并且知道我必须如何配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:20:38.057

我已经有了答案，但可以肯定的是，我会在这里发布。

问题是我们也在使用 KnockoutJS，并且模型在加载时执行了 ajax 调用。

我现在所做的是将剔除加载功能提取到不同的 JS 文件中，我没有将其加载到我的预加载源中。这样，我可以在我的模型上测试所有内容，但 ajax 调用不会在预加载时执行。因此，我可以模拟 ajax 调用。

# c++ - 我定义了一个非拷贝构造函数；复制构造函数是否仍会被隐式定义？

> ID：12577907
> 
> 赞同：41
> 
> 时间：2012-09-25T07:11:44.197
> 
> 标签：c++, constructor, copy, default, copy-constructor

可以为已经具有***用户定义的构造函数****但不是复制构造函数的***类**调用（隐式）**默认** **复制构造**函数吗？

 ****如果可能的话，假设我们*为类显式定义了复制构造函数*，现在可以调用（隐式）默认构造函数吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-25T07:45:17.787

首先，让我们稍微澄清一下我们的词汇。默认构造函数是可以在没有任何参数的情况下调用的构造函数。复制构造函数是可以使用相同类型的单个参数调用的构造函数。鉴于此，“默认复制构造函数”将是具有类似签名的构造函数：

```
class MyClass
{
public:
    static MyClass ourDefaultInstance;
    //  default copy constructor...
    MyClass( MyClass const& other = ourDefaultInstance );
}; 
```

不知何故，我不认为这是你的意思。我*认为*您要问的是隐式声明或隐式定义的复制构造函数；一个复制构造函数，其声明或定义由编译器隐式提供。除非您提供可以被视为复制构造函数的声明，否则编译器将始终提供声明。提供其他构造函数不会阻止编译器隐式声明复制构造函数。

这与默认构造函数不同——*任何*用户定义的构造函数都会阻止编译器隐式声明默认构造函数。这意味着如果您有用户定义的复制构造函数，编译器不会隐式声明默认构造函数。

第二个重点是你不要调用构造函数。编译器在某些定义明确的上下文中调用它们：主要是变量定义和类型转换。编译器只能调用已声明的构造函数（包括隐式声明的构造函数）。因此，如果您有一个用户定义的构造函数（副本或其他），并且没有定义默认构造函数，则编译器无法调用该构造函数，除非在它具有调用它的参数的上下文中。

总结一下我认为您的问题是：即使该类具有其他用户定义的构造函数，编译器也会提供隐式复制构造函数，前提是这些构造函数都不能被视为复制构造函数。如果你提供一个用户定义的拷贝构造函数，编译器*不会*提供一个隐式声明的默认拷贝构造函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T07:14:48.713

[http://www.cplusplus.com/articles/y8hv0pDG/](http://www.cplusplus.com/articles/y8hv0pDG/)

如果您没有定义一个默认的复制构造函数。所以是的，你可以调用默认的复制构造函数，如果你没有定义一个复制构造函数，但是如果你在你的类中定义了一个复制构造函数，你将无法调用默认的构造函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T07:15:10.303

没有默认复制构造函数之类的东西。有默认构造函数和复制构造函数，它们是不同的东西。

隐式定义的复制构造函数（我认为这是“默认复制构造函数”的意思）将使用它们的复制构造函数复制类类型的非静态成员，而不是它们的默认构造函数。当您没有定义自己的复制构造函数时，将使用隐式定义的复制构造函数。****

# linux-kernel - Linux UART 驱动程序 - __init 调用所花费的调试时间

> ID：12577912
> 
> 赞同：0
> 
> 时间：2012-09-25T07:12:11.663
> 
> 标签：linux-kernel, linux-device-driver, kernel-module, kernel

我对 Linux 内核有点陌生，我们的团队正在尝试优化设备的启动时间。观察到 8250 UART 驱动程序需要超过 1 秒才能完成 __init 调用。使用 printk 并通过生成的控制台时间戳记在每条日志消息前面，我能够缩小需要额外时间的函数调用：

ret = platform_driver_register(&serial8250_isa_driver);

作为一个新手，我不确定从调试的角度我还能做些什么来追踪问题？我正在寻找一些经验丰富的内核开发人员的指针/建议。只是好奇内核开发人员会从他们的“调试工具箱”中使用什么其他方法？

谢谢，维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:17:15.763

如果我理解正确，则 register 函数正在使用该结构做一些事情（可能是轮询地址或其他东西）。您需要查看其中定义的任何函数是否被寄存器调用。

为了更多地回答您的问题，您运行的平台是否有 8250 ISA UART？如果不是，那可以很好地解释为什么初始化需要这么长时间（它正在超时）。

# objective-c - 在 Objective-C 中用星号替换数字

> ID：12577917
> 
> 赞同：0
> 
> 时间：2012-09-25T07:12:30.233
> 
> 标签：objective-c, xcode, replace, nsstring, character

我有一个包含用户信用卡号的 NSString。我想将数字替换为星号。我怎样才能做到这一点？我认为下面的代码不起作用，因为它只针对一个数字：

```
finalString = [[firstString stringByReplacingOccurancesOfString:@"O" withString:@"*"] stringByReplacingOccurancesOfString:@"o" withString:@"0"]; 
```

对所有数字进行 for 循环是最好的方法还是有另一种方法？蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:15:08.963

做这个：

```
NSCharacterSet* charSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
 finalString = [[finalString componentsSeparatedByCharactersInSet:charSet] componentsJoinedByString:@"*"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:26:26.577

您也可以对此类任务使用正则表达式：（使用 RegExKitLite）

```
 NSString * regex = @"[0-9]";
 NSString * stringWithAsteriskInsteadOfNumbers = [stringWithNumbers stringByReplacingOccurrencesOfRegex:regex withString:@"*"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:30:38.447

最有效的方式，无需分配数以千计的对象：

```
NSRegularExpression* e = [NSRegularExpression regularExpressionWithPattern:@"\\d" 
                             options:0 error:nil];
finalString = [e stringByReplacingMatchesInString:finalString
                                          options:0 
                                            range:NSMakeRange(0, [finalString length]) 
                                     withTemplate:@"*"]; 
```

# python - 如何显示 M2M 关系的字段

> ID：12577921
> 
> 赞同：0
> 
> 时间：2012-09-25T07:12:46.477
> 
> 标签：python, django, m2m

我有这个 Django 模型：

```
#encoding:utf-8
from django.db import models
from django.contrib.auth.models import User
from django.contrib import admin

# Create your models here.
class Profile(models.Model):
    user = models.ForeignKey(User, unique=True, related_name='user')
    follows = models.ManyToManyField(User, related_name='follows', symmetrical=False, blank=True)
    bio = models.TextField(blank=True)
    avatar = models.ImageField(upload_to='avatar', blank=True)
    website = models.CharField(max_length=100, blank=True)
    place = models.CharField(max_length=100, blank=True)

    def __unicode__(self):
        return unicode(self.user)

admin.site.register(Profile)

admin.autodiscover() 
```

然后，我有这样的看法：

```
def profile(request, user_id):
    user = get_object_or_404(Profile, user=user_id)
    return render_to_response('user_view.html', {'user':user,}) 
```

现在，在`user_view.html`我显示“用户”数据（用户名、头像、网站等）：

```
{{user.user_id}}
{{user.user}}
{{user.website}}
{{user.avatar.url}} 
```

但是，我还需要显示我关注的用户的用户名、头像和网站。我这样做了：

```
{% for element in user.follows.all %}
    <a href="{{element.website}}">{{element.user}}</a>
    <img src="{{element.avatar.url}} />
{% endfor %} 
```

但是，它不是显示用户的数据，而是显示：

```
<django.db.models.fields.related.RelatedManager object at 0x022F34F0> 
```

但如果我这样做：

```
{% for element in user.follows.all %}
    <p>{{element}}</p>
{% endfor %} 
```

它完美地显示了用户的姓名，但我仍然无法显示网站或头像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:19:18.757

我想你会尝试

```
{% for element in user_data.follows.all %}
    <p>{{element.username}}</p>
    <p>{{element.profile.website}}</p>
    <p>{{element.profile.avatar}}</p>
{% endfor %} 
```

**element**是**User**的实例，而不是**Profile**的实例。但是您仍然可以通过编写来检索关联的**Profile实例**

```
element.profile 
```

因为它是一对一的关系（OneToOneField 或 ForeignKey(unique=True)）

# android - 当用户按下智能手机中的通话/发送按钮时会跳转的移动应用程序

> ID：12577926
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:12:59.340
> 
> 标签：android, windows-phone-7, phone-call

我想为 android 和 windows phone 开发一个应用程序，当用户按下智能手机中的拨号/通话按钮时，呼叫按钮会导致应用程序运行。

1.  windows phone 可以吗？如果是，如何？
2.  当用户按下通话按钮时，我可以使用 Android 中的什么功能来推送我的应用程序。
3.  如果有人知道以这种方式工作的应用程序，我会很高兴为您知道的那种移动应用程序提供一些链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:56:08.747

我不能代表 Android 手机发言，但在 Windows Phone 中，这是不可能的，因为 OS/SDK 不允许第三方应用程序拦截来自手机的任何呼叫，因此在 Windows Phone 中是不可能的

# c# - 如何在 Windows.Forms.PictureBox 中适当地显示 Kinect 视频流？

> ID：12577935
> 
> 赞同：3
> 
> 时间：2012-09-25T07:13:39.323
> 
> 标签：c#, windows, winforms, kinect, picturebox

我正在尝试将 Kinect 的视频流显示到 PictureBox 中。原因是，我想用一些图像覆盖它并使用 FillEllipse() 方法来添加实时标记。但是，我最终得到了一个带有红色 x（十字）的盒子。有人可以告诉我，我哪里出错了？我应该改用 WritableBitmap 吗？我想到了这一点，但是可写位图不提供诸如 FillEllipse() 之类的方法来放置标记。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Microsoft.Kinect;
using System.Drawing.Imaging;
using System.Drawing;
using System.Runtime.InteropServices;

namespace fTrack_WF
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        KinectSensor myKinect;

        private void Window_Loaded(object sender, EventArgs e)
        {
            if (KinectSensor.KinectSensors.Count == 0)
            {
                MessageBox.Show("No Kinects device detected", "Camera View");
                Application.Exit();
                return;
            }

            try
            {
                // get first Kinect device attached on computer
                myKinect = KinectSensor.KinectSensors[0];

                // enable depth stream
                myKinect.DepthStream.Enable();

                // enable color video stream
                myKinect.ColorStream.Enable();

                // start the sensor
                myKinect.Start();

                // connect up the video event handler
                myKinect.ColorFrameReady += new EventHandler<ColorImageFrameReadyEventArgs>(myKinect_ColorFrameReady);

            }
            catch
            {
                MessageBox.Show("Kinect initialise failed", "Camera viewer");
                Application.Exit();
            }

        }

        #region Video Image Processing

        byte[] colorData = null;
        Bitmap kinectVideoBitmap = null;
        IntPtr colorPtr;

        void myKinect_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
        {
            using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
            {
                if (colorFrame == null) return;

                if (colorData == null)
                    colorData = new byte[colorFrame.PixelDataLength];

                colorFrame.CopyPixelDataTo(colorData);

                Marshal.FreeHGlobal(colorPtr);
                colorPtr = Marshal.AllocHGlobal(colorData.Length);
                Marshal.Copy(colorData, 0, colorPtr, colorData.Length);

                kinectVideoBitmap = new Bitmap(
                    colorFrame.Width,
                    colorFrame.Height,
                    colorFrame.Width * colorFrame.BytesPerPixel;
                    PixelFormat.Format32bppRgb,
                    colorPtr);

                kinectVideoBox.Image = kinectVideoBitmap;

                kinectVideoBitmap.Dispose();

            }

        }

        #endregion
    }
} 
```

非常感谢！

问候， 伊克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:22:00.737

我找到了答案。Dispose 是释放资源所必需的，如此处[所示](https://stackoverflow.com/questions/2808753/right-way-to-dispose-image-bitmap-and-picturebox)。问题是，我画的太早了，就好像什么都没画一样。但是，无论如何，对我来说，[这里](https://stackoverflow.com/questions/2521297/how-can-i-dispose-of-an-object-say-a-bitmap-when-it-becomes-orphaned)给出了更明确的答案。

> `Bitmap`继承自`Image`，它实现`IDisposable`了 ，所以当你使用完一个实例后，你应该调用`Dispose()`它。这将清理 Image 中的非托管资源。
> 
> 但是，`Image` **也实现**了 a `finalizer`，因此如果由于某种原因您无法调用`Dispose()`，则资源将在实例完成期间被回收，这将在不再引用实例后的某个时间点发生。

我只是删除`kinectVideoBitmap.Dispose();`了，我的 Windows 窗体在 PictureBox 控件中显示 Kinect 的视频流。

问候， 伊克尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T21:38:04.490

我不清楚您为什么使用 WinForms PictureBox 而不是仅使用 WPF。

您是否尝试过在视频流顶部放置一个画布，在 SDK 示例中进行了演示，然后简单地吸引了它？

```
 <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="320" Height="240">
        <lt:KinectDepthViewer x:Name="DepthViewer" KinectSensorManager="{Binding KinectSensorManager}" />
        <Canvas>
            <lt:KinectSkeletonViewer
                                KinectSensorManager="{Binding KinectSensorManager}"
                                Width="{Binding ElementName=DepthViewer, Path=ActualWidth}"
                                Height="{Binding ElementName=DepthViewer, Path=ActualHeight}"
                                ShowBones="True" ShowJoints="True" ShowCenter="True" ImageType="Depth" />
        </Canvas>
    </Grid>

    <Canvas Name="DrawingCanvas">
    </Canvas> 
```

第二个画布的 z-index 较高，上面的任何对象都会覆盖您的视频流。

PS 虽然我的代码指向深度查看器，但在使用 SDK 中的示例时，视频流是以相同的方式完成的。

# php - Magento 我从管理员启用了 ssl 选项，商店显示 404 错误

> ID：12577940
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:13:53.643
> 
> 标签：php, magento

我刚刚从管理员启用了 ssl 选项，当我通过刷新页面检查它时，我的前端和管理页面显示 404 错误。有什么问题？任何身体都可以帮忙吗？我什至无法从管理员更改设置。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:42:39.543

我不确定你为什么会收到 404 错误，我可以简单地帮助你恢复以前的设置。这样您就可以访问您的管理面板。您可以打开 mysql 并查找表 core_config 并检查您在那里更改的内容，将其替换为以前的并刷新您的网页。我希望这个能帮上忙 ...

# android - android list 加载另一个列表

> ID：12577945
> 
> 赞同：0
> 
> 时间：2012-09-25T07:14:26.000
> 
> 标签：android, android-intent, android-listview, android-arrayadapter

我有两个活动。第一个活动是来自服务器的列表，第二个活动也是一个列表视图。如果我在第一个活动中执行 onItemClick，那么第二个活动将显示第一个活动中所选项目的列表。这是我的代码：

-第一个活动-

```
package com.statis.activity;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONObject;
import com.example.main.DetailCategoryActivity;
import com.example.main.DetailRestoActivity;
import com.example.main.R;
import com.example.main.ResultRestoActivity;
import com.example.main.TabResultRestoActivity;
import com.example.parser.JSONParser;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class List_ATM extends ListActivity {
    //Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();
    JSONArray data = null;

    ArrayList<HashMap<String,String>> dataList;

    //url
    private static String url_ = "http://www.tw-indo.com/droid_cari/atm.php";

 // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_DATA = "Vw_Merchant_Detail";
    private static final String TAG_Pk_Merchant_ID = "Pk_Merchant_ID";
    private static final String TAG_DataLevel1_ID = "DataLevel1_ID";
    private static final String TAG_DataLevel2_ID = "DataLevel2_ID";
    private static final String TAG_DataLevel1 = "DataLevel1";
    private static final String TAG_DataLevel2 = "DataLevel2";
    private static final String TAG_DataLevel3 = "DataLevel3";
    private static final String TAG_Address = "Address";
    private static final String TAG_Longitude = "Longitude";
    private static final String TAG_Latitude = "Latitude";

    Context ctx;

    String kota,subtitles;
    String Pk_Merchant_ID,DataLevel1_ID,DataLevel2_ID,  
    DataLevel1, DataLevel2, DataLevel3, Address, 
    Longitude, Latitude ;

    TextView selection, tvArea, tvRestoIndo, tvJenisMerchant;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        kota = getIntent().getStringExtra("cities");
        subtitles = getIntent().getStringExtra("subtitle");
        ctx = this;
        setContentView(R.layout.activity_detailcategory_list);

        selection = (TextView)findViewById(R.id.tv_detailrestaurant);

        tvJenisMerchant = (TextView)findViewById(R.id.tvRestoran);
        tvJenisMerchant.setText(""+subtitles+"");

        tvArea = (TextView)findViewById(R.id.area);
        tvArea.setText(""+kota+"");

        tvRestoIndo = (TextView)findViewById(R.id.tvRestoranIndo);
        tvRestoIndo.setText(""+kota+"");

        dataList = new ArrayList<HashMap<String, String>>();
        new LoadData().execute();

        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {
                // TODO Auto-generated method stub
                DataLevel2_ID = ((TextView) v.findViewById(R.id.id_merchant)).getText()
                                .toString();
                Address = ((TextView) v.findViewById(R.id.tv_detailrestaurant)).getText()
                                .toString();
                Intent i = new Intent(getApplicationContext(), ResultRestoActivity.class);
                    i.putExtra(TAG_DataLevel2_ID, DataLevel2_ID);
                    i.putExtra(TAG_Address, Address);
                startActivity(i);
            }
        });
    }

    class LoadData extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(List_ATM.this);
            pDialog.setMessage("Loading Merchant...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            List<NameValuePair> params = new ArrayList<NameValuePair>();

            JSONObject json = jParser.makeHttpRequest(url_, "GET", params);
            Log.d("Get List :", json.toString());

            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    data = json.getJSONArray(TAG_DATA);
                    for (int i=0; i<data.length(); i++) {
                        JSONObject c = data.getJSONObject(i);
                        String Pk_Merchant_ID = c.getString(TAG_Pk_Merchant_ID);
                        String DataLevel1_ID = c.getString(TAG_DataLevel1_ID);
                        String DataLevel2_ID = c.getString(TAG_DataLevel2_ID);
                        String DataLevel1 = c.getString(TAG_DataLevel1);
                        String DataLevel2 = c.getString(TAG_DataLevel2);
                        String DataLevel3 = c.getString(TAG_DataLevel3);
                        String Address = c.getString(TAG_Address);
                        String Longitude = c.getString(TAG_Longitude);
                        String Latitude = c.getString(TAG_Latitude);

                        HashMap<String, String> map = new HashMap<String, String>();
                            map.put(TAG_Pk_Merchant_ID, Pk_Merchant_ID);
                            map.put(TAG_DataLevel1_ID, DataLevel1_ID);
                            map.put(TAG_DataLevel2_ID, DataLevel2_ID);
                            map.put(TAG_DataLevel1, DataLevel1);
                            map.put(TAG_DataLevel2, DataLevel2);
                            map.put(TAG_DataLevel3, DataLevel3);
                            map.put(TAG_Address, Address);
                            map.put(TAG_Longitude, Longitude);
                            map.put(TAG_Latitude, Latitude);
                        dataList.add(map);
                    }
                }
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String file_url) {
            pDialog.dismiss();

            runOnUiThread(new Runnable() {
                public void run() {
                    // TODO Auto-generated method stub
                    ListAdapter adapter = new SimpleAdapter(
                            List_ATM.this, dataList, 
                            R.layout.activity_detailcategory, new String[] {TAG_DataLevel2_ID, TAG_DataLevel2},
                            new int[] {R.id.id_merchant, R.id.tv_detailrestaurant});
                    setListAdapter(adapter);
                }
            });
        }
    }
} 
```

-第二个活动-

```
package com.example.main;

import java.lang.reflect.Array;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

import com.example.main.R.layout;
import com.statis.activity.List_ATM;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.TextView;

public class ResultRestoActivity extends Activity {

    Context ctx;

    String[] id, address;

    TextView tes,tes2;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        id = getIntent().getExtras().getStringArray("DataLevel2_ID");
        address = getIntent().getExtras().getStringArray("Address");
        ctx = this;
        setContentView(R.layout.activity_restoresult);

        ListView listresto = (ListView)findViewById(R.id.list);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        for (int i=0; i<mylist.size(); i++) {
        HashMap<String, String> map = new HashMap<String, String>();
            map.put("id", (String) Array.get(id, i));
            map.put("atm", "BCA");
            map.put("alamat", (String) Array.get(address, i));
        mylist.add(map);
        }

        SimpleAdapter sAdapter = new SimpleAdapter(ctx, mylist, R.layout.restoresult_row, 
                new String[] {"id","alamat"}, new int[] {R.id.merchant_name, R.id.merchant_address} );

        listresto.setAdapter(sAdapter);
    }
} 
```

我仍然无法在第二个活动中显示列表。请更正我的代码，我需要您的建议。

# jquery - 需要 JQuery 语法解释，可能与 Selector 相关联

> ID：12577952
> 
> 赞同：0
> 
> 时间：2012-09-25T07:14:52.487
> 
> 标签：jquery, jquery-selectors

当我查看[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)时，我无法理解语法。

我实际上在 JsFiddle 设置了一个类似的脚本：http: [//jsfiddle.net/huyoumo/HUc2L/24/](http://jsfiddle.net/huyoumo/HUc2L/24/)

这是代码片段：

```
 var methods = {
 init : function( options ) {

   return this.each(function(){

     var $this = $(this),
         data = $this.data('tooltip'),
         tooltip = $('<div />', {
           text : $this.attr('title')
         });

     // If the plugin hasn't been initialized yet
     if ( ! data ) {

       /*
         Do more setup stuff here
       */

       $(this).data('tooltip', {
           target : $this,
           tooltip : tooltip
       });

     }
   });
 }, 
```

更加具体：

```
 tooltip = $('<div />', {
           text : $this.attr('title')
  }); 
```

我调试了代码并发现工具提示是一个 JQuery 对象（显然），它只有一个子对象（一个 HTMLDivElement）。

我试图用谷歌搜索 JQuery 选择器作为关键词，但没有运气。谁能阐明它并解释它的作用？

谢谢。

有墨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:45:16.017

这是该[http://api.jquery.com/jQuery/的文档](http://api.jquery.com/jQuery/)

```
var foo = $('<div>',
  {
           class : "FooBar"
  }); 
```

实际上是创建一个 jquery 对象并设置大括号之间定义的道具（在本例中为类）。你可以用 foo.attr("class") 返回它。

在您的情况下，设置了 text 道具，这等于对象的内部 html（使用 .text() 返回）。

还修复了您的小提琴（由于文档中的大写 D 从未调用过 onload :) [http://jsfiddle.net/HUc2L/26/](http://jsfiddle.net/HUc2L/26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:21:12.953

[在jqfundamentals.com/](http://jqfundamentals.com/)上试试这个，他们有更好的解释

# javascript - 同一页面性能问题上的多个推文按钮

> ID：12577953
> 
> 赞同：2
> 
> 时间：2012-09-25T07:14:54.850
> 
> 标签：javascript, jquery, html, twitter

我正在开发一个网页，我们需要为网页上的每个日记条目显示多个推文共享按钮，但是我正在尝试使用性能问题。

目前页面内容是由 jQuery 呈现的，对于每个帖子，我都添加了一个这样的推文按钮：

```
$.each(data, function(entryIndex, entry) {
html = '<p>this is a diary entry</p>';
html += '<a href="https://twitter.com/share" class="twitter-share-button" data-related="bmywebsite" data-lang="en" data-size="large" data-count="none">Tweet</a>';
})

$('#usersDiary').html(html);

// Used to add the Twitter.js include
var twitterScript   = document.createElement("script");
twitterScript.type  = "text/javascript";
twitterScript.src   = "http://platform.twitter.com/widgets.js";
$('#usersDiary').append(twitterScript); 
```

这工作得相当好，但我开始注意到，随着页面上更多的日记条目，性能下降，当我查看页面的网络时，我看到了很多这些条目。

![网络形象](../Images/bd5c37e59052e258ec3aaa1bab3b5c34.png)

有没有人对如何启用多个推文按钮但减少网络调用次数有任何建议？

谢谢亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:36:48.227

试试[Socialite.js](http://socialitejs.com/ "社交名流.js")，它将异步处理您的请求并使用优化的 JavaScript。

# javascript - 使用 javascript 控制点 (.) 符号的整数验证

> ID：12577958
> 
> 赞同：0
> 
> 时间：2012-09-25T07:15:08.727
> 
> 标签：javascript, internet-explorer, validation, firefox, google-chrome

我使用以下 java 脚本函数进行整数验证。它在 FireFox 中运行良好。但在**IE 和 Chrome（不是 Fire Fox）中，允许在该文本框中使用点（。）符号。**如何控制不出现点（。）使用 IE 和 Chrome 时文本框中的符号？

**javascript函数**

```
$('.intValidate').live('keypress', function(event) {
    if((event.keyCode != 8)&&(event.keyCode != 9)&&(event.keyCode != 37)&&(event.keyCode != 39)&&(event.keyCode != 46)&&(event.which < 48 || event.which > 57)) {
        event.preventDefault();
    }
}); 
```

**我使用这个类**，

```
<input type="text" id="abcd" style="width:30px" maxlength="2" class="intValidate"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:26:39.007

我不认为使用事件键代码进行整数验证是一个可行的选择，我建议您使用正则表达式，或者如果您真的只想使用上述方式阻止，您也可以阻止 keyCode 110 - 在这里查看完整的事件代码

[http://www.webonweboff.com/tips/js/event_key_codes.aspx](http://www.webonweboff.com/tips/js/event_key_codes.aspx)

和

[http://ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html](http://ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html)用于您的正则表达式验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:30:44.080

[在此处](http://jsfiddle.net/p9JMa/)修改您的代码。它适用于铬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:07:39.813

首先，您不应该在*键入*时进行验证，如在按键中，相反，您应该对输入文本的文本区域的值更改进行验证。之所以如此，是因为：

*   不同的键盘可能会使用相同的键码发送不同的字符。

*   除了常规输入，每个系统都有 IME 模式，一些通过 Unicode 代码点插入字符的方法，通过复制和粘贴等等。

通过在控件更改后验证文本将使您免去查找文本插入方式的麻烦。

这是一个类似的例子：[How to force maxlength on textArea in HTML using JavaScript](https://stackoverflow.com/questions/1125482/how-to-impose-maxlength-on-textarea-in-html-using-javascript/1125521#1125521)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:41:40.437

你也可以这样做：

```
function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}
$('.intValidate').live('keyup', function(event) {
    var $this = $(this);
    if (isNumber($this.val())) {
        $this.val(Math.floor($this.val()));
    } else {
        $this.val('')
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T07:29:16.153

您应该使用`keydown`事件而不是`keypress` [jsfiddle](http://jsfiddle.net/KMDVc/2/)

# c# - 当两个移动的标签相互接触时如何引发消息

> ID：12577960
> 
> 赞同：-1
> 
> 时间：2012-09-25T07:15:10.197
> 
> 标签：c#, winforms, label, point

标签 1：

```
lblLeftToRight.Location = new Point(lblLeftToRight.Location.X + 10, lblLeftToRight.Location.Y); 
```

标签 2：

```
lblLeftToRight.Location = new Point(lblLeftToRight.Location.X - 10, lblLeftToRight.Location.Y); 
```

通过使用`timer`和`Point`结构，我正在移动 label1 和 label2。我想在两个标签相互联系时发出一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:34:03.500

它应该很简单：http: [//msdn.microsoft.com/en-us/library/y10fyck0.aspx](http://msdn.microsoft.com/en-us/library/y10fyck0.aspx)

标签有：顶部、左侧、高度和宽度

```
Rectangle r1 = new rectangle (label1.left,label1.top,label1.width,label1.height);
Rectangle r2 = new rectangle (label2.left,label2.top,label2.width,label2.height);

if  (r1.IntersectsWith(r2))
{
// do stuff
} 
```

# javascript - INPUT TEXT 删除浏览器默认下拉菜单

> ID：12577961
> 
> 赞同：6
> 
> 时间：2012-09-25T07:15:15.610
> 
> 标签：javascript, jquery, css, drop-down-menu, input

如何删除您在此图像中看到的焦点下拉菜单？![在此处输入图像描述](../Images/b02c8422e40dc4135be568423eb6d84d.png)

通过css或javascript？如何？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T07:17:25.590

使用`autocomplete="off"`：

```
<input type="text" autocomplete="off"> 
```

但是，对于 HTML 版本 < 5，这是一个非标准属性。在 HTML5 中您可以自由使用此属性，请参阅参考：

*   [http://www.w3.org/TR/html5/the-form-element.html#attr-form-autocomplete](http://www.w3.org/TR/html5/the-form-element.html#attr-form-autocomplete)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T07:17:40.200

如果那`input`是类型，`text`那么您可以通过指定属性来做到这一点`autocomplete`：

```
<input type="text" autocomplete="off"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T07:21:39.343

属性为`<INPUT ...>`

自动完成 = 开 | 离开

```
 <input type="text" autocomplete="off"> 
```

**好读**

[如何关闭表单自动完成](https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion)

# php - 我的 if 语句不允许更改非索引数组值

> ID：12577962
> 
> 赞同：0
> 
> 时间：2012-09-25T07:15:18.867
> 
> 标签：php

在下面的脚本中，我有一个数组。我的数组存储来自网页的所有链接、标题和描述。但我想确保如果没有描述，它将使用 ap 标签的前 20 个字符，使用一个有效的功能。唯一的问题是我有拼图，但似乎无法将它们放在一起，所以我希望我的 if 语句显示，如果描述为空，则使用函数 getWord 而不是 getMetas()。

```
function getMetas($link) {
    $str1 = file_get_contents($link);    

    if (strlen($str1)>0) {
        preg_match_all( '/<meta.*?name=("|\')description("|\').*?content=("|\')(.*?)("|\')/i', $str1, $description);
        if (count($description) > 1) {
            return $description[4];   
        }

    }

} 
```

然后我的功能就在这里，但没有必要看到它，因为我知道它有效。

```
function getWord() {
    $html = file_get_contents($link);    
    preg_match('%(<p[^>]*>.*?</p>)%i', $html, $re);
    $res = get_custom_excerpt($re[1]);
}

$outputs = array();

foreach ($links as $thisLink) {
    $output[] = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink));

    if ($output['description'] == null) {
        $output['description'] = $res;
    }

    $outputs[] = $output;
}
print_r($output); 
```

# objective-c - 当我们使用 Core Data 时，我们应该创建模型类吗？

> ID：12577966
> 
> 赞同：2
> 
> 时间：2012-09-25T07:15:50.930
> 
> 标签：objective-c, ios, design-patterns, core-data

我正在开发一个 iPad 应用程序，如果用户无法访问 Internet，则需要我在本地存储数据，然后再与后端数据库同步。

对于本地存储，我计划将 Core Data 与 SQLite 一起使用。

我第一次使用 Core Data，它似乎以字典的形式检索实体和存储实体。

那么我应该创建模型类吗？

什么是这种应用程序的好设计。

我有一个 DataEngine 类，其职责是根据连接将实体存储在服务器或本地数据库上。

现在我有点困惑如果我需要创建一个模型类并要求各个模型类使用带有字典表示的 NSMangaedObjectContext 来保存自己，或者只是直接保存数据而不是创建模型对象并要求它这样做？

我是否应该为每个实体使用 Moel 类，并且它将作为来自/去往服务器的 JSON 表示之间的接口。

以及我从 managedObjectContext 得到的表示。

还是我应该完全依赖 Core Data 创建的实体和关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:40:35.220

我会倒着做：首先是一些东西让你检查，然后是一些想法。

检查[我自己的问题](https://stackoverflow.com/questions/10427340/extending-core-data-generated-nsmanagedobject-classes)。

我想说的是，在您的自定义类别中，您可以在 JSON 表示和您的类之间进行接口。

您还应该检查[RestKit](http://restkit.org)，它已经可以完成您需要的大部分工作。

* * *

据我所知，您在谈论两个不同的问题：

1.  根据连接将本地数据同步到服务器；
2.  使用模型类。

## 问题 1

我认为您应该有一个具有通用代码的类，并且每个模型类都应该有自己的映射（在模型和 JSON 之间映射）和保存方法。

另一个类，可能是您的 DataEngine 类，负责在正确的时间保存正确的对象。看看[RestKit](http://restkit.org)，因为它有助于映射和保存。我不确定同步。

## 问题 2

我认为你应该有模型类。处理对象有很大帮助，然后您可以保存查找不同类型数据的方法。

为此，[我的问题](https://stackoverflow.com/questions/10427340/extending-core-data-generated-nsmanagedobject-classes)可能对您有用，因为您可以使用生成的类文件创建 CoreData 模型，并在保留自定义代码的同时随时更新它。

# r - 以交互方式处理占用大量内存的列表对象

> ID：12577967
> 
> 赞同：8
> 
> 时间：2012-09-25T07:15:51.803
> 
> 标签：r, list, memory, memory-management, filehash

我最近发现了包的神奇之处`bigmemory`，`ff`并且`filehash`可以处理非常大的矩阵。

如何处理非常大 (300MB++) 的列表？在我的工作中，我每天都在处理这些列表。`save()`我可以在任何地方用& hacks做创可贴解决方案，`load()`但我更喜欢类似`bigmemory`的解决方案。像 a`bigmemory` `bigmatrix`这样的东西是理想的，我使用它基本上与 a 相同，`matrix`只是它在我的 RAM 中占用了 660 个字节。

* * *

这些列表主要是对象（或类似的回归对象）`>1000`的长度列表。`lm()`例如，

```
Y <- rnorm(1000) ; X <- rnorm(1000)
A <- lapply(1:6000, function(i) lm(Y~X))
B <- lapply(1:6000, function(i) lm(Y~X))
C <- lapply(1:6000, function(i) lm(Y~X))
D <- lapply(1:6000, function(i) lm(Y~X))
E <- lapply(1:6000, function(i) lm(Y~X))
F <- lapply(1:6000, function(i) lm(Y~X)) 
```

在我的项目中，我将拥有`A,B,C,D,E,F`必须以交互方式使用的类型列表（甚至更多）。

如果这些是巨大的矩阵，就会有大量的支持。我想知道在任何大型`list`对象的包中是否有类似的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T04:40:03.953

[您可以使用filehash](/questions/tagged/filehash "显示标记为“filehash”的问题")包在磁盘上存储和访问列表。这应该可以工作（如果在我的机器上相当缓慢......）：

```
Y <- rnorm(1000) ; X <- rnorm(1000)

# set up disk object
library(filehash)
dbCreate("myTestDB")
db <- dbInit("myTestDB")

db$A <- lapply(1:6000, function(i) lm(Y~X))
db$B <- lapply(1:6000, function(i) lm(Y~X))
db$C <- lapply(1:6000, function(i) lm(Y~X))
db$D <- lapply(1:6000, function(i) lm(Y~X))
db$E <- lapply(1:6000, function(i) lm(Y~X))
db$F <- lapply(1:6000, function(i) lm(Y~X)) 
```

可以使用该`[`功能访问列表项。有关详细信息，请参见此处：http: [//cran.r-project.org/web/packages/filehash/vignettes/filehash.pdf](http://cran.r-project.org/web/packages/filehash/vignettes/filehash.pdf)

# boost - C++ 类成员回调和外部库

> ID：12577970
> 
> 赞同：1
> 
> 时间：2012-09-25T07:16:08.010
> 
> 标签：boost, callback, function-pointers, static-members

我想解决这个关于类成员函数回调的问题。想象一下，您有一个来自外部库的函数（无法修改！），如下所示：

`void fortranFunction(int n, void udf(double*) );`

我想作为现有类的函数成员上方的 udf 函数传递。请看下面的代码：

```
// External function (tipically from a fortran library) 
void fortranFunction(int n, void udf(double*) ) 
{ 
     // do something 
} 

// User Defined Function (UDF) 
void myUDF(double* a) 
{ 
      // do something 
} 

// Class containing the User Defined Function (UDF) 
class myClass 
{ 
public: 
    void classUDF(double* a) 
    { 
        // do something... 
    }; 
}; 

int main() 
{ 
    int     n=1; 

    // The UDF to be supplied is myUDF 
    fortranFunction(n, myUDF); 

    // The UDF is the classUDF member function of a myClass object 
    myClass myClassObj; 
    fortranFunction(n, myClassObj.classUDF);   // ERROR!! 
} 
```

上面代码的最后一行导致编译错误，因为不能将classUDF成员函数声明为静态函数。你知道是否有可能解决这个问题？可能 Boost 库可以帮助我，但我不知道如何（请考虑 fortranFunction 无法修改，因为它来自外部库）。非常感谢！阿尔贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:43:28.260

您可以尝试该解决方案（有点hacky，但我认为它应该适合您）：

```
void fortranFunction(int n, void udf(double*))
{
    double d = static_cast<double>(n);
    udf(&d);
}

class myClass {
public:
    void classUDF(double* a) {
    }
};

#ifdef _MSC_VER
#define THREADLOCALSTATIC __declspec(thread) static
#define THREADLOCAL
#else
#define THREADLOCALSTATIC static ___thread
#define THREADLOCAL ___thread
#endif

struct _trampolinebase {
    THREADLOCALSTATIC _trampolinebase* current_trampoline;
};
THREADLOCAL _trampolinebase* _trampolinebase::current_trampoline = 0;

#undef THREADLOCAL
#undef THREADLOCALSTATIC

template<class CBRET, class CBARG1, class T>
struct _trampoline1 : _trampolinebase
{
    typedef CBRET (T::*CALLBACKFN)(CBARG1);
    _trampoline1(T& target, CALLBACKFN& callback)
    : callback_(callback)
    , target_(target)
    {
        assert(current_trampoline == 0);
        current_trampoline = this;
    }
    static CBRET callback(CBARG1 a1) {
        _trampoline1* this_ = static_cast<_trampoline1*>(current_trampoline);
        current_trampoline = 0;
        return this_->trampoline(a1);
    }
private:
    CBRET trampoline(CBARG1 a1) {
        return (target_.*callback_)(a1);
    }

    CALLBACKFN& callback_;
    T& target_;
};

template<class FRET, class FARG1, class CBRET, class CBARG1, class T, class F>
FRET call1_1(T& target, CBRET (T::*callback)(CBARG1), F& fortranfunction, FARG1 a)
{
    typedef typename _trampoline1<CBRET, CBARG1, T> trampoline;
    trampoline t(target, callback);
    return fortranFunction(a, trampoline::callback);
}

int main() 
{ 
    int n=1; 
    myClass myClassObj; 
    call1_1<void,int,void,double*>(myClassObj, &myClass::classUDF, fortranFunction, 1);
} 
```

使用“threadlocal”的东西，这也适用于多线程调用。如果您不使用多线程环境，您可以忽略它。它也适用于递归调用（例如，如果回调调用另一个 fortran 函数）。

此解决方案仅适用于 fortran 函数的单个参数加上回调和回调函数本身中的单个参数，但您应该能够轻松扩展它。这也是为什么我称它为“call1_1”（带 1 个参数的 fortran 函数，带 1 个参数的回调函数）。FRET 是 fortran 函数的返回类型，FARG1 是第一个参数的类型（在本例中为 int）。回调函数的 CBRET 和 CBARG 是一样的。

在实际调用 fortran 函数之前，目标对象存储在全局（线程局部）变量中。fortran 函数调用一个静态回调函数，该函数最终调用您的成员函数。

我发明了蹦床来实例化静态成员，我也可以为此使用全局变量（但出于某种原因，我不太喜欢全局变量）;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:34:36.980

我不明白，你为什么不能这样`classUDF`声明`static`

```
class myClass {
public:
  static void classUDF(double *a) {
  ...
  }
}; 
```

然后像

```
fortranFunction(n, myClass::classUDF); 
```

# powershell - Powershell 3.0 - 工作流 - 限制并行执行的数量

> ID：12577975
> 
> 赞同：10
> 
> 时间：2012-09-25T07:16:27.820
> 
> 标签：powershell, parallel-processing, workflow, powershell-3.0

我正在从模板克隆 ESX 服务器上的虚拟机。简化的代码如下所示：

```
Workflow Create-VM {
  $List = 1..500
  foreach -parallel ($Elem in $List)
  {
      # Create VM ...
      # Configure created VM ..
  }
}

Create-VM 
```

并行执行真的很有帮助。不幸的是，在这种情况下效果不佳。生成了太多并行请求。我需要将并行执行的数量限制为较小的数量（例如 4）。

我试图更改本地会话配置（SessionThrottleLimit、MaxSessionsPerWorkflow、MaxRunningWorkflows）[http://technet.microsoft.com/en-us/library/hh849862.aspx](http://technet.microsoft.com/en-us/library/hh849862.aspx)。

```
$WWE = New-PSWorkflowExecutionOption  -SessionThrottleLimit 4
Set-PSSessionConfiguration -Name microsoft.powershell.workflow `
   -SessionTypeOption $WWE 
Get-PSSessionConfiguration microsoft.powershell.workflow | 
fl SessionThrottleLimit 
```

**问题**

*   我应该更改会话配置的哪个参数（或组合），以将并行执行的数量限制为 4？
*   有没有其他方法可以实现这一点（例如：执行工作流的不同方式......）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-26T17:49:15.980

有一个选项可以使用`-throttlelimit N`. 这对于降低并行度非常有用，但是如果您尝试使用较高的数量，系统可能仍会将您限制为 5，具体取决于您的所有软件版本（YAY！Microsoft 一致性）。我知道这个问题很老了，但由于它在谷歌上没有一个像样的答案，我想我会插话的。

```
Workflow Create-VM {
  $List = 1..500
  foreach -parallel -throttlelimit 4 ($Elem in $List)
  {
      # Create VM ...
      # Configure created VM ..
  }
}

Create-VM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:01:27.337

一个简单的解决方案是将列表分成更小的块并将其用作并行 foreach 的输入。像这样，

```
Workflow Create-VM {
  $List = 1..500
  # Calclulate indexes to get elements 0,3; 4,7; 8,11 and so on
  # Use the .. operator to extract those elements from $list and pass
  # 'em to foreach -parallel processing part
  for($i=0;$i -le $List.Count-4; $i+=4) { 
    foreach -parallel ($Elem in $list[$i..($i+3)]) {
      # Create VM ...
      # Configure created VM ..
    } 
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T20:12:26.367

Just wanted to add this detail, ThrottleLimit switch mentioned above is available in Powershell v4.0, its not available in v3.0\. We have a mix of 2.0 and 3.0 servers

# python - Python：当所有实例根据定义都是唯一的时，测试自定义类集的等效性？

> ID：12577977
> 
> 赞同：1
> 
> 时间：2012-09-25T07:16:33.807
> 
> 标签：python, class, set

使用 Python 2.6，内置 set()，而不是 sets.set。

我已经定义了一些自定义数据抽象类，它们将使用内置的 set() 对象成为某些集合的成员。

在被划分为集合之前，这些类已经被存储在一个单独的结构中。首先声明类的所有实例。声明第一个集合后，不会创建或删除任何类实例。没有两个类实例被认为彼此“相等”。（包含相同数据的类的两个实例被认为是不相同的。A == B 对于所有 A，B 都是 False，其中 B 不是 A。）

鉴于上述情况，这些测试策略之间会有任何合理的区别`set_a == set_b`吗？：

**选项 1：** 将整数存储在唯一标识我的类的实例的集合中。

**选项 2：** 存储我的类的实例，并实现`__hash__()`和`__eq__()`比较 id(self) == id(other)。（这可能没有必要？这些函数的默认实现是否`object`只是做同样的事情但速度更快？）可能使用一个实例变量，每次新实例调用时递增`__init__()`。（不是线程安全的？）

或者，

**选项 3：** 实例已经存储并在由相当长的字符串键入的字典中查找。字符串是最直接代表实例的内容，并且保持唯一。`__eq__()`我认为将这些字符串存储在集合中会产生 RAM 开销和/或通过调用and来创建一堆额外的运行时`__hash__()`。如果不是这种情况，我应该直接存储字符串。（但我认为到目前为止我所读到的内容告诉我情况确实如此。）

我对 Python 中的集合有点陌生。我已经弄清楚了一些我需要知道的东西，只是想确保我没有忽略一些棘手的事情或在某处得出错误的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:02:24.880

我可能误解了这个问题，但这就是 Python 默认的行为方式：

```
class Foo(object):
    pass

a = Foo()
b = Foo()
c = Foo()

x = set([a, b])
y = set([a, b])
z = set([a, c])

print x == y # True
print x == z # False 
```

> 对象中这些函数的默认实现是否只是做同样的事情但速度更快？

是的。`User-defined classes have __cmp__() and __hash__() methods by default; with them, all objects compare unequal (except with themselves) and x.__hash__() returns id(x).` [文档](http://docs.python.org/reference/datamodel.html#object.__hash__)

# json - 如何漂亮地打印数组？

> ID：12577985
> 
> 赞同：1
> 
> 时间：2012-09-25T07:17:05.043
> 
> 标签：json, symfony, twig

我有一个这样的数组：

```
$a = array ('a' => 'apple', 'b' => 'banana', 'c' => array ('x', 'y', 'z')); 
```

我想以这样的可读方式打印它：

```
Array
(
    [a] => apple
    [b] => banana
    [c] => Array
        (
            [0] => x
            [1] => y
            [2] => z
        )
) 
```

我必须将数组传递给 Twig 模板。我试过这个，但我没有得到我想要的结果。你能告诉我有什么改变吗？

在控制器中：

```
$a = array ('a' => 'apple', 'b' => 'banana', 'c' => array ('x', 'y', 'z'));
$b = json_encode($a);
$c = json_decode($b, true);

return $this->render('AcmeTestBundle:Home:data.html.twig', array('data' => $c)); 
```

在模板中：

```
{% extends '::base.html.twig' %}

{% block stylesheets %}

    <link href="{{ asset('bundles/acmetest/css/test.css') }}" type="text/css" rel="stylesheet" /> 

{% endblock %}

{% block body %}

    {{ data }}

{% endblock %} 
```

（这是 base.html.twig ：）

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}{% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
        {% block body %}{% endblock %}
        {% block javascripts %}{% endblock %}
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-20T16:09:30.900

您可以在树枝模板中使用转储功能。

试试这个：

```
<pre>{{ dump(data) }}</pre> 
```

这应该可以解决问题，而无需通过控制器添加扩展或打印。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:42:56.313

尝试使用 Twig 调试扩展：

**树枝 1.x**

```
<pre>{% debug data %}</pre> 
```

**树枝 2.x**

```
{{ dump(user, categories) }} 
```

调试/转储标签仅在`debug`环境选项设置为时有效`true`。

[https://twig.symfony.com/doc/2.x/functions/dump.html](https://twig.symfony.com/doc/2.x/functions/dump.html)

此外，您可以在没有调试扩展的情况下尝试此操作：

```
$a = array ('a' => 'apple', 'b' => 'banana', 'c' => array ('x', 'y', 'z'));

return $this->render('AcmeTestBundle:Home:data.html.twig', array('data' => var_export($a, true))); 
```

在您的模板中：

```
<pre>{{ data }}</pre> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T13:27:14.467

使用[瓢虫捆绑](https://github.com/raulfraile/LadybugBundle)。

**一些关键特性：**

- 转储数组、对象、GD 图像

-5 可以在任何控制器中使用的助手

-Symfony 命令

-Symfony 分析器集成

-树枝过滤器

我希望有所帮助。

# qt4 - qmake Makefile 在 myWidget.o 的规则中不包含对 ui_form.h 的依赖

> ID：12577999
> 
> 赞同：0
> 
> 时间：2012-09-25T07:18:15.743
> 
> 标签：qt4, makefile, qmake

我的设置：
我在*Qt Designer*中创建和更新一个*form.ui*文件，并使用*由*. 使用*form.ui*，正确生成*ui_form.h*，它包含在*myWidget.cc*中。**`qmake`*`make`***

 ***问题：
当*form.ui*更新时，`make`相应地重新生成*ui_form.h*。但是，*myWidget.o*不会重新生成，因此 UI 更新不会反映在重新编译的应用程序中。在检查*Makefile*时，发现*myWidget.o规则对**ui_form.h*没有依赖性。

问题：
如何强制在它生成的*Makefile*`qmake`中包含所需的依赖项？ 注意：由于每次运行时都会自动生成*Makefile*，因此手动编辑*Makefile*只是我宁愿避免的临时解决方案。 **`qmake`**

 ***相关：
-[这个问题](https://stackoverflow.com/questions/4616932/qt-gui-doesnt-change-after-compilation)确定了一个类似的问题，但仍然是开放的。回复没有充分探讨问题（将其缩小到缺少的*Makefile*依赖项），并且给出的解决方案不起作用。[-这里](https://stackoverflow.com/questions/8434707/is-it-possible-to-add-a-dependency-to-your-makefile-in-qmake)
有一个关于向*Makefile* 添加依赖项的讨论，但是这个问题也仍然是开放的，并且场景与我的不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T16:36:52.493

我还遇到了 myWidget.o 规则没有将 ui_form.h 列为 makefile 中的依赖项的问题。在我的例子中，ui_form.h 是一个间接依赖（myWidget.h 包括 ui_form.h）。

为了让 Qmake 生成包含头文件作为依赖项（直接或间接包含）的 makefile，需要正确设置[INCLUDEPATH](http://doc.qt.io/qt-4.8/qmake-variable-reference.html#includepath)和[DEPENDPATH （](http://doc.qt.io/qt-4.8/qmake-variable-reference.html#dependpath)[此处](https://stackoverflow.com/a/6184053)）。

**生成文件**

```
release/tmp/myWidget.o: src/source/myWidget.cpp src/source/myWidget.h
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o release/tmp/myWidget.o src/source/myWidget.cpp 
```

**项目.pro**

```
INCLUDEPATH += src/header
DEPENDPATH += src/header

CONFIG += debug_and_release

CONFIG(debug, debug|release) {
     DESTDIR      = debug
     RCC_DIR      = debug/tmp
     OBJECTS_DIR  = debug/tmp
     UI_DIR       = debug/tmp
     MOC_DIR      = debug/tmp
     INCLUDEPATH += debug/tmp
     DEPENDPATH  += debug/tmp
} else {
     DESTDIR      = release
     RCC_DIR      = release/tmp
     OBJECTS_DIR  = release/tmp
     UI_DIR       = release/tmp
     MOC_DIR      = release/tmp
     INCLUDEPATH += release/tmp
     DEPENDPATH  += release/tmp
} 
```

**生成文件**

```
release/tmp/myWidget.o: src/source/myWidget.cpp src/source/myWidget.h \
                        release/tmp/ui_form.h
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o release/tmp/myWidget.o src/source/myWidget.cpp 
```******