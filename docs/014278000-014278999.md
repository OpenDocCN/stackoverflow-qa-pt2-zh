# StackOverflow 问答 14278000-14278999

# c++ - 在另一个静态对象的析构函数中构造的静态对象的析构函数

> ID：14278006
> 
> 赞同：8
> 
> 时间：2013-01-11T12:14:26.927
> 
> 标签：c++, oop, static, g++, destructor

在下一个代码中，我对析构函数有一些问题：

```
#include <stdlib.h>
#include <cstdio>

class Foo2
{
    public:
        Foo2() { printf("foo2 const\n"); }

        ~Foo2()
        {
            printf("foo2 dest\n"); //  <--- wasn't called for bionic libc
        }
};

static Foo2& GetFoo2()
{
    static Foo2 foo2;
    printf ("return foo2\n");
    return foo2;
}

class Foo1
{
    public:
        Foo1() { printf("foo1 const\n"); }

        ~Foo1()
        {
            printf("foo1 dest\n");
            GetFoo2();
        }
};

int main( int argc, const char* argv[] )
{
        printf("main 1 \n");
        static Foo1 anotherFoo;
        printf("main 2 \n");
} 
```

为什么 foo2 的析构函数没有被调用`bionic`并且是 for `glibc`？

**仿生的编辑**
输出：

```
main 1  
foo1 const  
main 2  
foo1 dest  
foo2 const  
return foo2 
```

**调试信息：**

```
(gdb) break 22
Breakpoint 1 at 0x8048858: file test.C, line 22.
(gdb) info breakpoints
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x08048858 in Foo2::~Foo2() at test.C:22
(gdb) cont
[    exited with code 0] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T12:53:28.753

我认为您的代码具有未定义的行为，尽管标准并不清楚（或者我在标准中找不到它）。您的代码在静态对象的析构函数中构造了一个新的静态对象。该标准没有解决这种情况，但是：

1.  它确实说必须以构造的相反顺序调用析构函数。在您的情况下，这意味着`GetFoo2`必须在构造静态对象之前对其进行破坏，这是自相矛盾的。

2.  §3.6/3 中的文本描述了使用`atexit`. 要求是必须为每个使用相同的注册机制。并且`atexit`一旦你调用`exit`（或从返回 `main`）调用是未定义的行为。

3.  还有§3.6/2，它说“如果一个函数包含一个已被销毁的静态或线程存储持续时间的块范围对象，并且在销毁具有静态或线程存储持续时间的对象期间调用该函数，则程序如果控制流通过先前销毁的块范围对象的定义，则具有未定义的行为。” 这句话说的是已经销毁的对象，但不费吹灰之力就可以认为“尚未构建”对象的缺失只是一个疏忽。

最后，我想说我上面的第一点就意图而言是决定性的。在第 1.3.24 节中，有一条注释（非规范性，但表明意图）“当本国际标准省略任何明确的行为定义或程序使用错误的构造或错误数据时，可能会出现未定义的行为。” 在这种情况下，对所需行为的唯一描述是不可能的（因为您无法在构造对象之前对其进行破坏），并且该标准没有说明应如何解决此问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T12:18:45.840

我在这段代码中看到的所有实例都是静态的。

因此，在 main 完成后，它们的析构函数在可执行文件的末尾被调用。

如果没有调用析构函数，那么这是一个错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T12:26:37.050

当程序存在时，静态对象将被销毁。在 处设置断点`~Foo2()`，您将看到它或将日志写入文件应该可以帮助您诊断它。如果真的没有被调用，那么它是一个编译器错误。

![在此处输入图像描述](../Images/c7e4cdb437400d44cff58401a883a2d9.png)

上传图片来回答问题很有趣。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T12:51:13.203

> C++11 3.6.3/1：具有静态存储持续时间的已初始化对象的析构函数 [...] 作为从返回的结果被调用`main`

在程序从 中返回时`main`，`anotherFoo`已初始化；但`foo2`没有，因为`GetFoo2`在销毁`anotherFoo`. 因此，对规则的严格解释意味着不应调用其析构函数。

# ios - 如何仅用两根手指滑动滚动 UIScrollView？

> ID：14278007
> 
> 赞同：1
> 
> 时间：2013-01-11T12:14:31.150
> 
> 标签：ios, objective-c, ios6

我有一个`UIView`我用手指画的东西，一切都很好而且很漂亮，但我需要这个视图是可滚动的。所以我做了一个`UIScrollView`，并将我的绘图视图嵌入其中。但是问题来了，我不能再画画了，因为每次点击都会`UIScrollView`拦截它们以进行滚动。我想要做的是`UIScrollView`只拦截两次手指滑动，单次触摸和滑动只是定期绘制。我怎么做？

`touchesBegan, touchesMoved`我通过使用 simpe方法绘制`BezierPath`，没有手势识别器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:57:02.727

在[使用 UIScrollView 用两根手指滚动](https://stackoverflow.com/questions/787212/scrolling-with-two-fingers-with-a-uiscrollview)中查看答案[https://stackoverflow.com/a/3173290/1492816](https://stackoverflow.com/a/3173290/1492816) 人们报告它适用于您所处的那种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:43:54.270

正如该答案中所建议的那样，我已经尝试过了，但无济于事。它说`recognizePan:`找不到该方法。我将其更改为 nil，并且仅按预期使用两根手指进行滚动，因为缺少绘图功能。我觉得触摸没有进入我的视野。可以做什么？

```
UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self.scrollView action:@selector(recognizePan:)];
panGestureRecognizer.maximumNumberOfTouches = 1;
[scrollView addGestureRecognizer:panGestureRecognizer]; 
```

# python - Pycharm 与虚拟环境相关的外部工具

> ID：14278009
> 
> 赞同：8
> 
> 时间：2013-01-11T12:14:49.723
> 
> 标签：python, virtualenv, pycharm, pylint

使用 PyCharm IDE，在设置外部工具时，如何设置具有相对于使用当前虚拟环境默认值的路径的外部工具。？

一个例子是 pylint - 我希望虚拟环境版本而不是系统版本运行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-11-12T14:03:37.060

不确定旧版本，但在 PyCharm 5 中可以使用`$PyInterpreterDirectory$`宏。这正是我们想要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T20:09:25.550

您可以使用*JDKPath*宏，它指向为项目设置的解释器的可执行文件。`-m`您可以将此与许多工具可以通过使用解释器选项直接运行它们的模块来运行的事实相结合。还有问题[PY-2734 外部工具中的新有用宏](http://youtrack.jetbrains.com/issue/PY-2734)每个人都可以投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:00:32.490

刚刚在查找有关为外部工具设置参数时可能使用的“变量”的文档时找到了您的帖子。

没有文档，但在“编辑工具”对话框中按下“插入宏”按钮后，您可以看到所有可用内容的列表。

我在那里看不到对解释器路径的任何引用，但我通常使用 virtualenv 作为我的项目路径。如果你也这样做，你可以从那里推断出 python 解释器路径。

# java - 如何下载和安装 xuggler？

> ID：14278018
> 
> 赞同：2
> 
> 时间：2013-01-11T12:15:55.240
> 
> 标签：java, xuggler

我对如何下载 xuggler 有点困惑，我进入以下链接下载它：

[http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/)

我下载了 xuggle-xuggler-5.4.jar，现在对从这里去哪里有点困惑。

我下载 xuggler 的目的是为了可以按照本教程进行操作： [http ://www.youtube.com/watch?v=wdW6tUql154](http://www.youtube.com/watch?v=wdW6tUql154)

并需要以下文件 xuggle/share/java/jar 才能遵循教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:36:26.650

在 Eclipse jar 文件中包含**xuggle jar**

[http://blog.xuggle.com/2009/01/23/how-to-write-your-first-xuggler-application-in-eclipse/](http://blog.xuggle.com/2009/01/23/how-to-write-your-first-xuggler-application-in-eclipse/)

[http://www.xuggle.com/downloads](http://www.xuggle.com/downloads)

# c - accept() 函数中断程序。C

> ID：14278022
> 
> 赞同：0
> 
> 时间：2013-01-11T12:16:21.353
> 
> 标签：c, sockets

我不知道为什么以下服务器线程中的 accept() 函数会破坏程序。

头文件

```
/*
 * tcpip_server.h
 *
 *  Created on: 2013-01-10
 *      Author: Lukasz
 */

#ifndef TCPIP_SERVER_H_
#define TCPIP_SERVER_H_

int init_tcpip_server();

#endif /* TCPIP_SERVER_H_ */ 
```

.c 文件

```
*
 * tcpip_server.c
 *
 *  Created on: 2013-01-10
 *      Author: Lukasz
 */
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <pthread.h>
#include <semaphore.h>

#include "tcpip_server.h"

/* Logger thread prototype */
void *tServerThreadFunc(void *);

/* Thread variable */
pthread_t tServerThread;
/* Thread attributes structure */
pthread_attr_t aServerThreadAttr;

/**
 * Function crates server thread
 */
int init_tcpip_server() {

    int status;
    printf("begginning init_tcpip_server()\n");
    /* Set server scheduling policy to FIFO */
    pthread_attr_init(&aServerThreadAttr);
    pthread_attr_setschedpolicy(&aServerThreadAttr, SCHED_FIFO);
    printf("before ServerThread createion\n");
    /* Create server thread */
    if ((status = pthread_create( &tServerThread, NULL, tServerThreadFunc, &aServerThreadAttr))) {
        fprintf(stderr, "Cannot create thread.\n");
        return 0;
    }

    return 0;
}

/**
 * Server thread function
 */
void *tServerThreadFunc(void *cookie) {

    /* Scheduling policy: FIFO or RR */
    int policy;
    /* Structure of other thread parameters */
    struct sched_param param;
    /* Socket address structure */
    struct sockaddr_in socket_addr;
    /* Socket variable */
    int srv_socket;
    /* Buffer */
    char buff[100];
    char answer[100];

    /* Read modify and set new thread priority */
    pthread_getschedparam( pthread_self(), &policy, &param);
    param.sched_priority = sched_get_priority_min(policy);
    pthread_setschedparam( pthread_self(), policy, &param);
    printf("before socket\n");
    /* Initialize socket variable */
    srv_socket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

    if(srv_socket == -1) {
        fprintf(stderr, "Cannot create socket\n");
        return 0;
    }

    /* Initialize socket address to 0*/
    memset(&socket_addr, 0, sizeof(socket_addr));
    /* Set socket address parameters */
    socket_addr.sin_family = AF_INET;
    socket_addr.sin_port = htons(1200);
    socket_addr.sin_addr.s_addr = INADDR_ANY;

    /* Bind socket to socket address struct */
    if(bind(srv_socket, (struct sockaddr *)&socket_addr, sizeof(socket_addr)) == -1) {
        fprintf(stderr, "Cannot bind socket\n");
        close(srv_socket);
        return 0;
    }

    /* Start to listen on created socket */
    if(listen(srv_socket, 10) == -1) {
        fprintf(stderr, "Cannot start to listen\n");
        close(srv_socket);
        return 0;
    }

    printf("Server is waiting.\n");

    /* Wait until somebody open connection with you */
    int srv_connection = accept(srv_socket, NULL, NULL); /* <= program breaks here. */

    printf("test\n");

    /* Check if connection is OK */
    if(srv_connection < 0) {
        fprintf(stderr, "Accept connection failed\n");
        close(srv_socket);
        return 0;
    }

    for(;;) {

    }
    return 0;
} 
```

该程序打印“服务器正在等待”，但从未达到“测试”，只是停止工作。我使用该`init_tcpip_server()`函数从同一项目中的另一个 .c 文件启动它。我在编译过程中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:21:51.617

好的。我发现了我的失败。我是线程新手，不习惯 main 继续工作并退出，关闭所有内容。在这种情况下，“服务器正在等待”和“测试”之间。在主要添加延迟后，一切正常。很抱歉浪费了您的时间。

# c# - windows 8 C#同时读取和写入文件

> ID：14278023
> 
> 赞同：3
> 
> 时间：2013-01-11T12:16:25.723
> 
> 标签：c#, windows-8

我有一个将字节数组写入文件（`StorageFile`）的过程。该进程以周期性间隔运行，同时我需要在另一个进程中从文件的开头读取。这两个进程属于不同的类。当我开始读取文件时，写入操作失败并出现拒绝访问错误。

这里的文件是`StorageFile`app 文件夹中的一个。

write 方法调用：

```
IRandomAccessStream randomStream = await targetFile.OpenAsync(FileAccessMode.ReadWrite);
Stream stream = randomStream.AsStreamForWrite(); 
```

读取方法调用：

```
IRandomAccessStream randomStream = await targetFile.OpenAsync(FileAccessMode.Read);
Stream stream = randomStream.AsStreamForRead(); 
```

两种操作**同时通过不同的方法进行**，并导致访问被拒绝错误。似乎**我可以在打开写入时使用相同方法中的读/**写。**但是如何通过不同的方法做到这一点？**

我们是否有与前面类似的东西，`System.IO.FileShare`以便我可以明确地说需要从同一个应用程序中的另一个位置访问这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:09:06.893

除了切换到数据库类型设置之外，我还建议将您的写入缓冲到一个数组中，并根据缓冲区填充和/或某些经过的时间将它们写入块中。除非您需要精确到毫秒的最新和最佳性能，否则我怀疑人们会注意到性能影响。您将不得不调整缓冲区大小，以确保您给读者足够的时间来实际读取文件。

在阅读器方面，您可以在文件上实现[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)对象。

# node.js - 在使用 sudo 运行节点时使用 EXPORT 设置 process.env 变量

> ID：14278024
> 
> 赞同：19
> 
> 时间：2013-01-11T12:16:26.817
> 
> 标签：node.js, sudo

我在 EC2 上使用 node.js

我打字

```
EXPORT PORT=80 
```

在终端中，我看到它在我输入 EXPORT 时正确保存

但是当我使用以下内容运行我的 node.js 应用程序时：

```
...
console.log(process.env);
... 
```

当我使用 sudo 运行 PORT 时，它没有在对象中列出：

```
sudo node app.js 
```

如何设置 PORT 以便在使用 sudo 运行节点时从 process.env 对象访问它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T12:26:28.543

要设置`process.env`变量，请使用以下代码：

```
sudo PORT=80 node server.js 
```

当然，你可以设置多个`process.env`变量：

```
sudo PORT=80 HOST=localhost node server.js 
```

通常，`EXPORT`也应该工作。但是`sudo`会创建自己的环境，然后以`root`. 因此，您应该添加`PORT`到`sudo`'s 环境或强制它保留您自己的环境。

要改变`sudo`的环境，你应该修改`/root/.profile`。

要强制它保留您自己的环境，请使用`-E`密钥：

```
sudo -E node app.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-06T19:19:28.360

我知道这是一篇旧帖子，但我在端口 80 上运行 node.js 时遇到了同样的权限问题。我做了一个解决方法来避免`sudo`在节点运行命令 ( `sudo PORT=80 node server.js`) 中运行并必须定义 PORT。我所做的是将 PORT 80 的流量重定向到另一个允许的端口，在我的例子中是 3000。

```
sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3000 
```

# silverlight - 数据绑定数据格式问题

> ID：14278028
> 
> 赞同：0
> 
> 时间：2013-01-11T12:16:39.827
> 
> 标签：silverlight, xaml

我有一个绑定到数据源的 AutoCompleteBox。DataSource 包含两个字符串属性。我已经为 AutoCompleteBox 定义了 ItemTemplate。

我希望第二个属性用括号括起来，例如 Property1 Data (Property2 Data) 我必须在绑定期间定义 StringFormat。

我完全不知道格式。谁能告诉我格式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:27:11.810

这里是例子。

在绑定中使用 StringFormat 的简单方法。

输出：（0）

```
<TextBlock Text="{Binding Videos.Count, StringFormat='({0})', FallbackValue='(0)'}" /> 
```

使用`<Run>`标签，您还可以构建复杂的值。

输出：距离：200km

```
<TextBlock>
    <Run Text="Distance: " />
    <Run Text="{Binding VideoDistance, StringFormat='\{0:G\}'}" />
</TextBlock> 
```

如果使用第二个示例，则必须`<Run>`为下一个值添加另一个标签。

您还可以使用水平`StackPanel`显示多个值。

输出：起始距离：200km

```
<!--START DISTANCE MIN-->
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Start Distance:" />
    <TextBox Text="{Binding StartDistanceMinStr, Mode=OneWay}" IsReadOnly="True" />
</StackPanel> 
```

# visual-studio-2010 - SSIS - 连接来自不同服务器的表，其名称基于变量

> ID：14278029
> 
> 赞同：0
> 
> 时间：2013-01-11T12:16:46.723
> 
> 标签：visual-studio-2010, variables, ssis, oledb

我有一个基于来自两个不同链接服务器的表的简单查询。我需要两台服务器都可以更改，因为我们正在从 DEV 转移到 UAT 再到生产。我正在使用一个表达式来设置服务器 A 的连接字符串和密码。因此，以此为基础，我设置了一个数据流任务和一个“OLE DB 源”来提取我需要的数据。最终我希望我的查询看起来像这样：

```
Select * from A.Payments p1
Full Outer Join ?.Payments p2 on p1.Id = p2.Id 
where p1.OrderDesc is null or p2.OrderDesc is null 
```

有办法解决吗？我可以使用变量或某种动态查询吗？我还没有设法解析项目参数并运行一个。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:35:29.473

这是通过使数据源 SQL 成为表达式来完成的。

右键单击数据流，然后单击“表达式”旁边的省略号 [...]。在那里，您会发现您可以设置的可用属性之一是您的数据流源的 SQLCommand。

公平地说，这不是最直观的事情。

# python - wx xrc + aui 管理器

> ID：14278031
> 
> 赞同：0
> 
> 时间：2013-01-11T12:16:50.777
> 
> 标签：python, wxpython, xrc

是否有可能，如果可以，如何（链接、教程）使用 XRC 加载 aui 元素？

我想为程序创建一个有点高级的界面，而不想在代码中做所有事情。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:37:33.390

我认为 XRC 不支持 AUI（C++ 或 wx.agw.aui 中的纯 Python 版本）。但是，您应该能够将 XRC 项目与 AUI 混合使用。见[http://wxpython-users.1045709.n5.nabble.com/xrc-aui-toolbar-problem-test-attached-td2344498.html](http://wxpython-users.1045709.n5.nabble.com/xrc-aui-toolbar-problem-test-attached-td2344498.html)

基本上，您只需创建 XRC 支持的框架和其他项目，然后在顶部添加 AUI 代码。

# sass - 配置 Sass 输出

> ID：14278032
> 
> 赞同：0
> 
> 时间：2013-01-11T12:16:50.563
> 
> 标签：sass

我是 Sass 的新手，希望能够检查输出，并希望它采用我手工制作的 CSS 的样式，特别是：

*   结束前的换行符}
*   每个声明之前的制表符而不是空格

我尝试了 sass`--watch file.scss:file.css --style expanded &`但它没有做任何事情，我的理解是不会将空格更改为制表符。

实现我想要的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T09:00:11.277

尝试
`--watch file.scss:file.css --style=expanded`

不同之处在于`=`

当我用等号做它时，它起作用了。

# android - 视图如何占据屏幕空间

> ID：14278038
> 
> 赞同：0
> 
> 时间：2013-01-11T12:17:03.167
> 
> 标签：android, android-layout

如果视图宽度固定，我想计算一次在屏幕上显示多少视图。为此，我得到一个布局，在其中添加一些固定大小的视图并运行它。

但是根据我的计算，我在屏幕上显示的孩子数量错误，因为它显示在屏幕上。

请告诉我我错在哪里？

这是我的代码...

```
 In Activity ...
    ----
     LinearLayout featured_listlayout_horizontallayout=(LinearLayout)findViewById(R.id.featured_listlayout_horizontallayout);
            LayoutInflater inflater=LayoutInflater.from(getApplicationContext());
            for(int i=0;i<20;i++){
                LinearLayout childItem=(LinearLayout)inflater.inflate(R.layout.childitemlayout,null);
                Button btn=(Button)childItem.findViewById(R.id.btn);
                btn.setText("Item"+(i+1));
                featured_listlayout_horizontallayout.addView(childItem);
            }

    DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);

    final int height = dm.heightPixels;
    float screenWidth = dm.widthPixels;//Screen Width in pixel

    float itemWidth=getResources().getDimension(R.dimen.featured_text);//itemWidth in DP
    itemWidth=convertDpToPixel(itemWidth, getApplicationContext());// convert itemWidth into pixel

    System.out.println("screenWidth "+screenWidth+" itemWidth "+itemWidth);

    float noOfItem=screenWidth/itemWidth;
    System.out.println("noOfItem "+noOfItem);

    -----

    convertPixelsToDp method:

    public float convertPixelsToDp(float px,Context context){
            Resources resources = context.getResources();
            DisplayMetrics metrics = resources.getDisplayMetrics();
            float dp = px / (metrics.densityDpi / 160f);
            return dp;
        }  

  convertDpToPixel method:

   public float convertDpToPixel(float dp,Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi/160f);
        return px;
    }

    activity_main.xml

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

        <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:id="@+id/featured_listlayout_horizontallayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingBottom="5dp" >
            </LinearLayout>
        </HorizontalScrollView>

    </RelativeLayout>

    childitemlayout.xml

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="@dimen/featured_text"
        android:layout_height="@dimen/featured_image"
        android:orientation="vertical" 
        android:background="#0000ff">

        <Button android:id="@+id/btn"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:text="Button"
                android:background="#ff00ff"/>

    </LinearLayout>

    dimen.xml

    <?xml version="1.0" encoding="utf-8"?>
    <resources>
             <dimen name="featured_text">80dp</dimen>
             <dimen name="featured_image">60dp</dimen>
    </resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:29:27.673

> 但是根据我的计算，我在屏幕上显示的孩子数量错误，因为它显示在屏幕上。

您[以像素为单位获得屏幕宽度](http://developer.android.com/reference/android/util/DisplayMetrics.html#widthPixels)：

```
float screenWidth = dm.widthPixels; 
```

对于项目的宽度，您可以获得以像素为单位的宽度，但您也可以将其转换为`dp`：

```
float itemWidth=getResources().getDimension(R.dimen.featured_text);
itemWidth=convertPixelsToDp(itemWidth, getApplicationContext()); 
```

然后您尝试将这两个值一起使用。

使用`pixels`或`dp`。

**编辑2：**

你真的应该阅读类的`inflate()`方法`LayoutInflater`。您需要使用正确的视图来膨胀视图，`LayoutParams`这是通过提供`ViewGroup`将是膨胀布局文件的父级来完成的。所以你需要这样做：

```
LinearLayout childItem = (LinearLayout) inflater.inflate(
                    R.layout.aaaaaaaaaaaa, featured_listlayout_horizontallayout, false); 
```

如果你不这样做，你的膨胀视图将没有设置的大小（你可能已经看到它们会包装它们的内容）。完成上述修改后，您想在实际将它们添加到布局中（使用您在 xml 布局中设置的尺寸）之前找出可见（完全或部分）的子项的数量，您只需划分屏幕宽度到资源的尺寸：

```
int screenWidth = dm.widthPixels;
int itemWidth=getResources().getDimension(R.dimen.featured_text);
int noOfItem=screenWidth/itemWidth;
// if we have a remainder from the division it means there is extra space
// so we need to check if we have more items so there is another child partially showing
int rem = screenWidth % itemWidth;
if (rem != 0) {
    noOfItem += 1;
} 
```

**编辑1：**

您当前的代码将不起作用，并且您不理解我的答案。`dm.widthPixels`返回以像素为单位的屏幕宽度（您`HorizontalScrollView`填充的）。`getResources().getDimension(R.dimen.featured_text)`将以像素为单位返回该维度资源的值。不需要方法来转换这些值，只需直接使用它们即可。即便如此，您的代码也不会按您的意愿正常工作，因为您没有注意`LayoutParams`为您的视图分配适当的权限。您应该像这样膨胀子布局：

```
LinearLayout childItem = (LinearLayout) inflater.inflate(
                    R.layout.aaaaaaaaaaaa, featured_listlayout_horizontallayout, false); 
```

另外，我将只使用下面的代码（在`onCreate`方法中使用）来找出屏幕上可见的子项（完全可见或部分可见）：

```
featured_listlayout_horizontallayout.post(new Runnable() {

        @Override
        public void run() {
            DisplayMetrics dm = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(dm);
            // screen width
            final float screenWidth = dm.widthPixels;
            final int count = featured_listlayout_horizontallayout
                    .getChildCount();
            int realWidth = 0;
            int visibleChildren = 0;
            for (int i = 0; i < count; i++) {
                final View child = featured_listlayout_horizontallayout
                        .getChildAt(i);
                realWidth += child.getWidth();
                if (realWidth < screenWidth) {
                    visibleChildren++;
                } else {
                    visibleChildren++;
                    break;
                }
            }
            // visibleChildren now has the visible children on the screen
        }

    }); 
```

# asp.net - 使用 iis 的 url 重写模块将下划线替换为破折号

> ID：14278041
> 
> 赞同：1
> 
> 时间：2013-01-11T12:17:10.490
> 
> 标签：asp.net, url, web-config, rewrite

我有关于 Url 重写模块的问题。

我想在我的网站中实现永久重定向（301）。和 url 是，我想永久重定向

[http://demo.datadiary.com/search/product/ahmedab​​ad/ac_dealers](http://demo.datadiary.com/search/product/ahmedabad/ac_dealers)

网址到

[http://demo.datadiary.com/search/product/ahmedab​​ad/ac-dealers](http://demo.datadiary.com/search/product/ahmedabad/ac-dealers)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:19:38.177

我得到了解决方案。将以下内容放入您的 web.config，但请记住，您的主机必须在 iis 中安装了 Url 重写模块。

```
<rule name="Imported Rule 1-2" stopProcessing="true">
                    <match url="(search/product/ahmedabad.*/[^/]*?)_([^/_]*)$" ignoreCase="false" />
                    <action type="Redirect" url="{R:1}-{R:2}" redirectType="Permanent" />
                </rule> 
```

# html - 如何在同一页面的 div 中定位锚点

> ID：14278045
> 
> 赞同：0
> 
> 时间：2013-01-11T12:17:19.673
> 
> 标签：html, css

我正在努力将一些锚点/其他 html 页面（左侧的按钮）显示在同一页面的另一个 div 中（更准确地说是在右侧）。div有什么解决方案吗？或者也许使用 frame/iframe，甚至 jQuery 有什么提示吗？

![在图像中你有源代码](../Images/9106addeb8d88858fdca3ea670700c46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:26:10.863

> div有什么解决方案吗？

1.  使用 JavaScript 获取内容（例如 XMLHttpRequest）。
2.  去掉你不需要的部分（例如，除了`<body>`
3.  使用 DOM 操作将其添加到 div

> 或者也许使用 frame/iframe

这正是 iframe 的设计目的。将`target`锚点的属性设置`name`为 iframe 的

* * *

将内容加载到页面的一部分会带来很多问题。至少它会干扰访问者链接到他们实际查看的内容的能力（尽管您可以使用 History API 并`pushState`对此进行补偿）。链接到一个新页面几乎总是一个更好的主意，该页面包括（通过模板）所有页面共有的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:51:23.330

如果页面链接到 HTML 页面，您可以使用 jQuery 附加`iframe`如下：

```
$(document).ready(function(){
  $('.button').click(function(){
    // Prevent Default Action
    event.preventDefault();
    // get the href parameter
    var url = $(this).attr('href');
    // Append the iframe
    $('#content').append('<iframe src="'+ url +'"></iframe>');
  });
}); 
```

### [这是一个工作示例](http://jsfiddle.net/Eaz92/2/)

如果您能够返回 a `JSON`or`XML`响应，您可以使用它`$.ajax`来获取响应，然后将其附加到 a`div`而不是`iframe`.

# asp.net-mvc-4 - 在asp .net mvc 4中使用htmlhelper创建textarea

> ID：14278048
> 
> 赞同：3
> 
> 时间：2013-01-11T12:17:35.437
> 
> 标签：asp.net-mvc-4, textarea, html-helper

使用：在我的一个页面中使用 ASP .NET MVC 4 我需要使用**html 帮助程序类**具有一定宽度和高度的**文本区域**。我的一些代码如下：

 **```
 <div class="editor-label">
        @Html.LabelFor(model => model.MailSubject)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MailSubject)
        @Html.ValidationMessageFor(model => model.MailSubject)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.MailBody)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MailBody)
        @Html.ValidationMessageFor(model => model.MailBody)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>
    <div class="editor-field1">
        @Html.EditorFor(model => model.Content)
        @Html.ValidationMessageFor(model => model.Content)
    </div> 
```

我想知道如何定义**editorfor(model.content) 的大小（宽度/隐藏）**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-27T21:36:48.763

我意识到这个问题已经有一年多了，但以防万一有人在寻找答案，这里是：

```
Html.TextAreaFor(model => model.Field, new { rows = "", cols = "", style = "width: 90%; height: 50px;" }) 
```

您可以应用内联样式或使用类声明。这将呈现页面上的文本区域，如下所示：

```
<textarea class="swiper-no-swiping" name="model.Field" cols="" rows="" style="width: 90%; height: 50px;"></textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T23:27:50.950

我有这个问题。我是新手，所以我不太确定，但使用以下我能够调整高度......

```
@Html.TextAreaFor(model => model.FullItinerary, 20, 10, null) 
```

我仍然不知道如何调整宽度，我目前的谷歌任务......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:01:46.807

编写一个客户助手，或扩展 TextAreaFor 助手的功能。

以下是帮助您创建自定义助手的资源：[http ://www.simple-talk.com/dotnet/asp.net/writing-custom-html-helpers-for-asp.net-mvc/](http://www.simple-talk.com/dotnet/asp.net/writing-custom-html-helpers-for-asp.net-mvc/)**

# haskell - Cabal 不更新二进制符号链接

> ID：14278051
> 
> 赞同：6
> 
> 时间：2013-01-11T12:17:54.693
> 
> 标签：haskell, osx-lion, cabal, cabal-install

我正在使用带有 Haskell 平台 2012.4.0.0 的 OS X 10.8.2。使用 更新软件包时`cabal install`，二进制符号链接不会更新为指向新的二进制版本。我必须手动删除符号链接并重新安装包。`cabal install`说：

> 警告：无法在 /Users/thsoft/Library/Haskell/bin 中为 elm 创建符号链接，因为该文件已经存在但不受 cabal 管理。如果您愿意，可以手动为此可执行文件创建符号链接。可执行文件已安装在 /Users/thsoft/Library/Haskell/ghc-7.4.1/lib/Elm-0.7/bin/elm

我尝试明确地使用`sudo`和`--symlink-bindir=/Users/thsoft/Library/Haskell/bin`指​​定，但它们都没有帮助。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T18:21:50.333

只需删除指定目录中存在的现有链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T10:02:24.437

Tener's answer is correct: before 'cabal install'ing remove the links that would cause problems. I've had the same problem and this solved it.

(I couldn't make this a comment to Tener's answer since that would require more reputation than I have. :-( )

# ubuntu - 在 Ubuntu 12.04 上安装 ElasticSearch

> ID：14278063
> 
> 赞同：6
> 
> 时间：2013-01-11T12:18:31.350
> 
> 标签：ubuntu, elasticsearch, ubuntu-12.04

我有一个运行 Ubuntu 12.04 的虚拟机，并且正在尝试安装 ElasticSearch。我以最好的“以艰难的方式学习 X”的精神遵循了这个[要点，并且一切都安装得很好——软件包被下载、解压缩、复制到正确的位置等。](https://gist.github.com/2026107)

当我运行它时问题就来了 - 通过调用：

```
$ /usr/local/share/elasticsearch/bin/elasticsearch 
```

或使用服务包装器 ( `$ rselasticsearch console`)

输出记录到`wrapper.log`并包含在下面。我认为我可能遇到了 JAVA 主页/类路径问题，但不确定。

非常感谢任何帮助！

```
Running ElasticSearch...
wrapper  | Unable to write to the configured log directory: /usr/local/share/elasticsearch/logs (No such file or directory)
wrapper  |   The directory does not exist.
wrapper  | Unable to write to the configured log file: /usr/local/share/elasticsearch/logs/service.log (No such file or directory)
wrapper  |   Falling back to the default file in the current working directory: wrapper.log
wrapper  | --> Wrapper Started as Console
wrapper  | Java Service Wrapper Community Edition 32-bit 3.5.14
wrapper  |   Copyright (C) 1999-2011 Tanuki Software, Ltd. All Rights Reserved.
wrapper  |     http://wrapper.tanukisoftware.com
wrapper  | 
wrapper  | Launching a JVM...
jvm 1    | WrapperManager: Initializing...
jvm 1    | WrapperSimpleApp Error: Unable to locate the class org.elasticsearch.bootstrap.ElasticSearchF : java.lang.ClassNotFoundException: org.elasticsearch.bootstrap.ElasticSearchF
jvm 1    | 
jvm 1    | WrapperSimpleApp Usage:
jvm 1    |   java org.tanukisoftware.wrapper.WrapperSimpleApp {app_class{/app_method}} [app_arguments]
jvm 1    | 
jvm 1    | Where:
jvm 1    |   app_class:      The fully qualified class name of the application to run.
jvm 1    |   app_arguments:  The arguments that would normally be passed to the
jvm 1    |                   application.
wrapper  | JVM exited while loading the application.
...
wrapper  | There were 5 failed launches in a row, each lasting less than 300 seconds.  Giving up.
wrapper  |   There may be a configuration problem: please check the logs.
wrapper  | <-- Wrapper Stopped 
```

**更新**

鉴于我们现在是 2016 年，在 Ubuntu 上运行 ES 的最简单方法是使用 Docker。`docker run elasticsearch`将下载最新版本并在前台运行它，显然您可以将其作为守护进程运行，或运行特定版本（例如`elasticsearch:1.7.2`），并设置端口等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T12:53:53.873

警告任何尝试我之前所做的事情的人 - Gist 中指定的 URL 是源版本，而不是编译版本，因此没有 *.class 文件。

您可以按原样使用 Gist，但用 ElasticSearch 站点的最新下载 URL 代替当前的 github URL，例如：

```
....
wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.1.1.tar.gz -O elasticsearch.tar.gz
tar -xf elasticsearch.tar.gz
rm elasticsearch.tar.gz
sudo mv elasticsearch-* elasticsearch
sudo mv elasticsearch /usr/local/share
... 
```

** 这是截至 2014 年 5 月 20 日的最新版本。要获得更多更新版本，请访问[此](http://www.elasticsearch.org/overview/elkdownloads/)页面，右键单击 TAR 链接（在下载部分下），复制链接并替换第一行中的 wget 参数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T19:26:34.390

我以与您相同的方式安装了 elasticsearch 并遇到了同样的问题。最后我通过安装编译版本而不是从 github 解决了这个问题。它涉及使用与要点相同的步骤，除了使用来自[http://www.elasticsearch.org/download/2012/12/27/0.20.2.html](http://www.elasticsearch.org/download/2012/12/27/0.20.2.html)而不是 github 的 tar。我分叉并更新了要点，可在[https://gist.github.com/4512530](https://gist.github.com/4512530)获得。希望这可以帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-08T17:36:16.303

按照此步骤轻松配置 Elastic Search。

**第 1 步 — 安装 Java：**

> ```
> $ sudo apt-get 更新
> 
> $ sudo apt-get install openjdk-7-jre
> 
> $ java -版本
> ```

**第 2 步 — 下载和安装 Elasticsearch：**

> ```
> $ wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.2.deb
> 
> $ sudo dpkg -i elasticsearch-1.7.2.deb
> 
> $ sudo update-rc.d 弹性搜索默认值
> ```

**第 3 步 — 配置弹性：**

> ```
> $ sudo nano /etc/elasticsearch/elasticsearch.yml
> ```

node.name：“我的第一个节点” cluster.name：mycluster1

> ```
> $ sudo 服务弹性搜索开始
> ```

**第 4 步 - 保护 Elastic ：**

> ```
> $ sudo nano /etc/elasticsearch/elasticsearch.yml
> ```

network.bind_host：本地主机

script.disable_dynamic: 真

**第 5 步 — 测试：**

> ```
> $ curl -X GET 'http://localhost:9200' 或在任何浏览器中运行 http://localhost:9200。
> ```

您应该看到以下响应：

> ```
> { 
> 
> “状态”：200，
> 
> “名称”：“Harry Leland”，
> 
> “cluster_name”：“elasticsearch”，
> 
> “版本”：{ 
> 
> “数字”：“1.7.2”，
> 
> “build_hash”：“e43676b1385b8125d647f593f7202acbd816e8ec”，
> 
> “build_timestamp” ：“2015-09-14T09:49:53Z”，
> 
> “build_snapshot”：false，
> 
> “lucene_version”：“4.10.4” 
> 
> }，
> 
> “标语”：“你知道，用于搜索” 
> 
> }
>  
> ```

参考：

[http://laravelcode.com/post/how-to-install-elastic-search-in-local-system-and-live-server](http://laravelcode.com/post/how-to-install-elastic-search-in-local-system-and-live-server)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-18T07:16:44.190

解包 elasticsearch 网站上可用的 deb 文件对我来说效果很好：

sudo dpkg -i elasticsearch-1.1.1.deb

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T13:29:40.370

[按照https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-repositories.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-repositories.html)`apt`中的说明进行安装似乎效果很好。

# c# - 在数据模板 WPF 中使用 * 调整大小

> ID：14278066
> 
> 赞同：0
> 
> 时间：2013-01-11T12:18:36.367
> 
> 标签：c#, wpf, itemtemplate

我正在尝试在项目模板中设置 * height 属性，但我不断收到错误消息

```
'50*' string cannot be converted to Length. 
```

我不确定我想做的事情是否可行。

如果您需要更多信息，请告诉我。

这是我的 Xaml：

```
<ItemsControl Name="lstMain" ItemsSource="{Binding Sections}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <GroupBox Header="{Binding Section.SectionName}" Height="50*">
                            <StackPanel>
                                <ItemsControl ItemsSource="{Binding SubSections}" ItemTemplate="{StaticResource BinderTemplate}" />
                            </StackPanel>
                        </GroupBox>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:25:58.213

关键是 Height 是一种`Double`数据类型，而不是[GridLength](http://msdn.microsoft.com/en-us/library/system.windows.gridlength.aspx)，例如网格行和列。

只有 GridLength 支持星号大小。

# php - php调用未定义的函数（类初学者）

> ID：14278067
> 
> 赞同：0
> 
> 时间：2013-01-11T12:18:38.350
> 
> 标签：php

我有 2 个文件 index.php 和 class_lib.php。

这是 index.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
    <meta http-equiv="Content-Type" content="text/html;
    charset=iso-8859-1" />
    <title>OOP in PHP</title>
    <?php include("class_lib.php"); ?>
</head>
<body>
        <?php
            $adrian = new person();
            $jimmy = new person;

            $adrian = set_name('adrian de cleir');
            $jimmy = set_name('jimmy darmady');

            echo $adrian->get_name();

    ?>

</body>
</html> 
```

和类的文件

```
<?php
    class person {

    var $name;
           function set_name($new_name) {
                      $this->name = $new_name;
                   }
           function get_name() {
                      return $this->name;
                    }

    }
?> 
```

当我加载页面时出现致命错误：在第 15 行的 /var/www/php_learning_testing/index.php 中调用未定义函数 set_name()

感谢您的帮助，我确定这很愚蠢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T12:20:22.737

`set_name`不存在于全局范围内，而只存在于对象之外，您使用`get_name`.

```
 $adrian = new person();
        $jimmy = new person;

        $adrian->set_name('adrian de cleir');
        $jimmy->set_name('jimmy darmady');

        echo $adrian->get_name(); 
```

您现有的代码（应该`set_name`实际存在并返回一个值）将简单地`person`用返回值覆盖对象`set_name`。每当您调用非静态类方法时，您总是需要引用该实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:20:06.293

在行中

```
$adrian = set_name('adrian de cleir');
$jimmy = set_name('jimmy darmady'); 
```

您需要调用对象的方法：

```
$adrian->set_name('adrian de cleir');
$jimmy->set_name('jimmy darmady'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:21:36.540

对于吉米，你有 $jimmy = new person; 你应该有

```
$jimmy = new person(); 
```

然后调用你做的类方法

```
$jimmy->set_name('bla'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T12:23:09.477

尝试在功能之前设置公共。还将 var 替换为私有。到目前为止我知道， var 在 php 中不存在；）

# iphone - iPhone 3GS 上的 iOS 6.0 上的 UICollectionView 崩溃

> ID：14278068
> 
> 赞同：0
> 
> 时间：2013-01-11T12:18:41.637
> 
> 标签：iphone, ios, memory-management, ios6, iphone-3gs

该应用程序应该在显示 UICollectionView 时崩溃。它还会创建一个低内存崩溃日志。如何减少 UICollectionView 中的内存使用量？我在项目中使用 ARC。请帮助...（以下是我的代码）

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return [untaggedImagesArray count];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    @autoreleasepool {

    static NSString *identifier = @"imageCell";
    imageCell *cvc = (imageCell *)[self.iamgesCollectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];
    if(cvc == nil){
        NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"imageCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects){
            if([currentObject isKindOfClass: [imageCell class]]){
                cvc = (imageCell*)currentObject;

                break;
            }
        }
    }
    NSString *path = [untaggedImagesArray objectAtIndex:indexPath.row];
         NSString *path = [untaggedImagesArray objectAtIndex:indexPath.row];
    //[self performSelectorInBackground:@selector(getImage:) withObject:path];

    UIImage *cache_image = [images_cache objectForKey:path];

    if(cache_image)
    {
        [cvc.imageView setImage:cache_image];
    }
    else
    {
        [self performSelectorInBackground:@selector(getImage:) withObject:path];
        //UIImage *img = [UIImage imageWithContentsOfFile:path];
        [images_cache setObject:cellImage forKey:path];
         [cvc.imageView setImage:cellImage];
    }

    if([preTaggedPaths containsObject:path]){
        [cvc.tagLabel setText:[tagStringsDict valueForKey:[NSString stringWithFormat:@"%d",indexPath.row]]];
        [cvc setUserInteractionEnabled:NO];
    }else{
        [cvc.tagLabel setText:@""];
        [cvc setUserInteractionEnabled:YES];
    }

        if([selectedImagesPath containsObject:path]){
            [cvc.checkImageView setImage:[UIImage imageNamed:@"checkbox_small_selected.png"]];
        }else{
            [cvc.checkImageView setImage:[UIImage imageNamed:@"checkbox_small_unselected.png"]];
        }

//
    return cvc;
    }
}

-(void)getImage:(NSString*)path{
    cellImage = [UIImage imageWithContentsOfFile:path];
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"clicked to select at index%d",indexPath.row);
    imageCell *cvc = (imageCell*)[self.iamgesCollectionView cellForItemAtIndexPath:indexPath];
    NSString *pathString = [untaggedImagesArray objectAtIndex:indexPath.row];
    [cvc.checkImageView setImage:[UIImage imageNamed:@"checkbox_small_selected.png"]];
    [selectedImagesPath addObject:pathString];
}

- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath {
     NSLog(@"clicked to DEselect at index%d",indexPath.row);
    imageCell *cvc = (imageCell*)[self.iamgesCollectionView cellForItemAtIndexPath:indexPath];
    NSString *pathString = [untaggedImagesArray objectAtIndex:indexPath.row];
    [cvc.checkImageView setImage:[UIImage imageNamed:@"checkbox_small_unselected.png"]];
    [selectedImagesPath removeObject:pathString];
//    [cvc setSelected:NO];
} 
```

-

```
(void)getImage:(NSString*)path{
    //cellImage = [UIImage imageWithContentsOfFile:path];
    NSLog(@"image path: %@", path);
    cellImage = [UIImage imageNamed:path];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:24:14.400

您说崩溃是由于内存不足引起的！

一个可能的问题是您的图像加载机制（图像的大小是多少？）：

```
[UIImage imageWithContentsOfFile:path]; 
```

这将在您的集合视图中的每个单元格每次执行。

```
[UIImage imageNamed:@"name"]; 
```

例如正在缓存图像，而 imageWithContentsOfFile 没有！

所以 UIImage 的方法`imageNamed:`和`imageWithContentsOfFile`做的事情略有不同。`imageNamed`将图像加载到特殊的系统缓存中，然后使用该图像路径的未来调用将返回缓存中的图像，而不是从磁盘重新加载它。`imageWithContentsOfFile`只需在您指定的路径加载图像，但不缓存。多次调用`imageWithContentsOfFile`同一图像将导致内存中有多个副本。

如果这是您的问题，请尝试缓存图像或使用智能方式仅加载当前正在显示的图像。

# java - Restful web 服务的书籍

> ID：14278074
> 
> 赞同：-5
> 
> 时间：2013-01-11T12:19:15.777
> 
> 标签：java, web-services, rest

我想在 Java 中学习 Restful Web 服务。你能告诉我吗

1.  Restful Web 服务最佳书籍
2.  Restful Web 服务的良好框架

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:10:20.980

对于具有 RESTful 服务的良好框架，您可以使用[Jersey](http://jersey.java.net/)

# php - 是否达到了结束字符

> ID：14278075
> 
> 赞同：0
> 
> 时间：2013-01-11T12:19:17.450
> 
> 标签：php, file, file-io

总之，我正在使用 stream_get_line 读取文件的一行，替换一个字符串，然后将该行写入另一个文件。

我正在使用 stream_get_line 并提供“结束”参数来指示函数读取行，或者如果没有新行则读取 130 个字节。

我想知道的是如何知道是否找到了第三个参数（PHP_EOL），因为我需要将完全相同的行（除了我的字符串替换）写入新文件。

以供参考...

```
string stream_get_line ( resource $handle , int $length [, string $ending ] ) 
```

它主要用于最后一行，有时会包含换行符，有时不包含。

我最初的想法是寻找文件的最后一行并在该行中搜索换行符，以查看是否需要在已编辑的行上附加换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:49:21.257

如果流处于 ASCII 模式（仅在 Windows 上很重要），您可以尝试使用[fgets 。](http://php.net/manual/en/function.fgets.php)如果找到，该函数将包括换行符：

```
$line = fgets(STDIN, 131); 
```

否则，您可以使用[ftell](http://php.net/manual/en/function.ftell.php)查看读取了多少字节，从而确定是否有行尾。例如，如果`foo.php`包含

```
<?php
while (!feof(STDIN)) {
    $pos = ftell(STDIN);
    $line = stream_get_line(STDIN, 74, "\n");
    $ended = (bool)(ftell(STDIN) - strlen($line) - $pos);
    echo ($ended ? "YES  " : "NO   ") . $line . "\n";
} 
```

执行`echo -ne {1..100} '\n2nd to last line\nlast line' | php foo.php`将给出以下输出：

```
NO   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28
NO    29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 5
NO   3 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 
YES  78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 
YES  2nd to last line
NO   last line 
```

# regex - split_to_table() 按字符数且无分隔符

> ID：14278080
> 
> 赞同：1
> 
> 时间：2013-01-11T12:19:39.993
> 
> 标签：regex, postgresql, split, pattern-matching, generate-series

我需要将`varchar`字段拆分为设定长度的行，但没有分隔符。

示例：
归档值：`'Field example of varchar'`
我想将其拆分为长度为 5 的行。结果应该是：

```
"Field"
" exam"
"ple o"
"f var"
"char " 
```

我试过这个查询：

```
select regexp_split_to_table('Field example of varchar','(.{5})') as x 
```

但它不起作用，它返回五个空行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:53:42.343

您可以使用[**`generate_series()`**](http://www.postgresql.org/docs/current/interactive/functions-srf.html).
应该比正则表达式要快很多[`regexp_matches()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)，因为正则表达式功能强大但*代价高昂*。

```
SELECT substring(col, generate_series(1, length(col), 5), 5)
FROM   tbl; 
```

请注意，如果该列为空或为空，则所提供的任何一种解决方案都不会得到*任何*回报。`NULL`

[**-> SQLfiddle 并排**演示。](http://sqlfiddle.com/#!12/dc231/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:34:47.997

您可以不使用**regexp_split_to_table**，而是使用**regexp_matches**：

```
select (regexp_matches('Field example of varchar', E'.{1,5}', 'g'))[1] 
```

# java - Java - 没有工作台的 SWTBot 测试向导

> ID：14278081
> 
> 赞同：0
> 
> 时间：2013-01-11T12:19:43.140
> 
> 标签：java, testing, wizard, swtbot

我创建了一个 Eclipse 向导，现在我想用 SWTBot 对其进行测试。我已经使用了最终可以工作的 SWTWorkbenchBot，但我现在想在没有 eclipse 工作台的情况下测试向导。这就是为什么我在我的测试类中创建了一个外壳，我想把它放在我的向导页面上，但我所看到的只是一个没有向导页面的空外壳。

所以我创建了一个新的 shell 类，其中包含以下代码：

```
public static void main(String args[]) {
    try {
        Display display = Display.getDefault();
        HorrorShell shell = new HorrorShell(display);
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Create the shell.
 * 
 * @param display
 */
public HorrorShell(Display display) {
    super(display, SWT.SHELL_TRIM);
    setLayout(new FillLayout());

    createContents();
}

/**
 * Create contents of the shell.
 */
protected void createContents() {
    setText("SWT Application");
    setSize(450, 300);
    ManualSettingsWizardPage page = new ManualSettingsWizardPage();
    page.createControl(this);
} 
```

使用它工作的 shell 类，显示了我的向导页面，但是如果我尝试将我的测试类作为 SWTBotTest 或 JUnitTest 运行，它只会显示一个空的 shell。这是我的测试类中的代码：

```
private ManualSettingsWizardPage wizard;
private SWTBotShell botShell;
private Shell shell;
private Display display;
    private SWTBot bot;

@Before
public void setUp() {

    botShell = new SWTBotShell(shell);
    bot = new SWTBot();
    wizard = new ManualSettingsWizardPage();

    display = Display.getDefault();
    shell = new Shell(display);
    shell.open();
    shell.layout();

}

@Test
public void bot() throws Exception {
    bot = botShell.bot();
    shell.setBounds(200, 200, 400, 400);
    shell.setLayout(new FillLayout());

    wizard.createControl(shell);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:36:17.953

我认为您的问题源于您从 SWTBot-Thread 创建 GUI 组件这一事实。不过，它们应该由 UIThread 创建。

通常，您会测试一些插件，该插件会作为选择操作的结果打开向导，例如“new xyz”。第一步是将您的向导代码放入插件中并注册一个可以启动向导的新操作。然后您可以尝试使用 SWTBot 查找 shell 并执行所需的操作。

# three.js - 从 Three.JS 51 迁移到 54（纹理问题）

> ID：14278083
> 
> 赞同：0
> 
> 时间：2013-01-11T12:20:02.050
> 
> 标签：three.js, textures, migrating

我在将代码迁移到 Three.JS 的最新版本时遇到了一些问题。我已经尝试了很多，但是我的模型一直看起来是黑色的（颜色功能似乎坏了））并且一旦我尝试加载带有纹理的模型，它就会崩溃。我知道在从 r52 到 r53 的过渡过程中，纹理发生了一些变化，但我似乎无法正确实施。我使用动态加载系统来缓存 JSON 模型。

目前代码如下所示：

```
 var MB = MB || {};
    MB.Part = function () {
        this.id = MB.ObjectCount++;
        this.type = 'part';
        this.name = '';
        this.reference = undefined;
        this.mesh = undefined;
        this.colour = undefined;
        this.texture = undefined;
        this.Object3D = undefined;
        this.parent = undefined;
        this.visible = true;
        this.position = new THREE.Vector3();
        this.rotation = new THREE.Vector3();
        MB.Objects[this.id] = this
    };
    MB.Part.prototype.load = function (reference, name, mesh, color, texture, position, rotation, visible, visible3D, callback) {
        var context = this;
        if (!position) position = new THREE.Vector3();
        if (!rotation) rotation = new THREE.Vector3();
        if (this.isGeometrySetup(mesh, texture)) {
            this.insert(context, reference, name, mesh, color, texture, position, rotation, visible, visible3D);
            if (callback) callback()
        } else {
            var loader = new THREE.JSONLoader(false);
            loader.load(PATH + 'data/parts/json/' + mesh + '.js', function (geometry) {
                context.setupGeometry(geometry, mesh, texture);
                context.insert(context, reference, name, mesh, color, texture, position, rotation, visible, visible3D);
                if (callback) callback()
            })
        }
    };
    MB.Part.prototype.insert = function (context, reference, name, mesh, color, texture, position, rotation, visible, visible3D) {
        context.reference = reference;
        context.mesh = mesh;
        context.name = name;
        if (color) context.colour = color;
        if (texture) context.texture = texture;
        context.visible = visible;
        if (color) {
            context.setupColour(color);
            var Object3D = new THREE.Mesh(MB.Library.geometries[mesh], MB.Library.colours[color])
        } else if (texture) {
            var Object3D = new THREE.Mesh(MB.Library.geometries[texture], new THREE.MeshFaceMaterial())
        }
        context.Object3D = Object3D;
        context.Object3D.doubleSided = true;
        context.position.copy(position);
        context.rotation.copy(rotation);
        Object3D.Object = context;
        Object3D.scale.set(SCALE, SCALE, SCALE);
        Object3D.position.copy(context.position);
        Object3D.rotation.copy(context.rotation);
        Object3D.visible = visible3D;
        MB.Object3Ds[Object3D.id] = Object3D
    };
    MB.Part.prototype.isGeometrySetup = function (mesh, texture) {
        if (texture) {
            if (!MB.Library.geometries[texture]) return false;
            else return true
        } else {
            if (!MB.Library.geometries[mesh]) return false;
            else return true
        }
    };
    MB.Part.prototype.setupGeometry = function (geometry, mesh, texture) {
        if (texture) {
            if (!MB.Library.geometries[texture]) {
                var file = this.loadTexture(PATH + 'data/parts/textures/' + texture + '.png');
                MB.Library.geometries[texture] = geometry;
                MB.Library.geometries[texture].materials[0].map = file;
                MB.Library.geometries[texture].materials[0].wireframe = (RENDER === 'WIREFRAME') ? true : false
            }
        } else {
            if (!MB.Library.geometries[mesh]) {
                MB.Library.geometries[mesh] = geometry
            }
        }
    };
    MB.Part.prototype.loadTexture = function (url, mapping, callback) {
        var image = new Image(),
            texture = new THREE.Texture(image, mapping);
        image.onload = function () {
            texture.needsUpdate = true;
            if (callback) callback(this)
        };
        image.crossOrigin = '';
        image.src = url;
        return texture
    };
    MB.Part.prototype.setupColour = function (colour) {
        if (!MB.Library.colours[colour]) {
            var materialColour = '0x' + COLOURS[colour].hex;
            var materialOpacity = COLOURS[colour].opacity;
            MB.Library.colours[colour] = new THREE.MeshPhongMaterial({
                ambient: new THREE.Color(materialColour),
                color: new THREE.Color(materialColour),
                opacity: materialOpacity,
                shininess: 100
            });
            MB.Library.colours[colour].wireframe = (RENDER === 'WIREFRAME') ? true : false;
            MB.Library.colours[colour].transparent = (COLOURS[colour].opacity < 1) ? true : false
        }
    };
    MB.Part.prototype.setColour = function (colour) {
        if (this.colour) {
            this.setupColour(colour);
            this.colour = colour;
            this.Object3D.material = MB.Library.colours[colour]
        }
    };

    MB.ObjectCount = 0;
    MB.Object3Ds = {};
    MB.Objects = {};
    MB.Library = {
        'colours': {},
        'geometries': {}
    }; 
```

问题似乎在这里：

```
if (texture) {
            if (!MB.Library.geometries[texture]) {
                var file = this.loadTexture(PATH + 'data/parts/textures/' + texture + '.png');
                MB.Library.geometries[texture] = geometry;
                MB.Library.geometries[texture].materials[0].map = file;
                MB.Library.geometries[texture].materials[0].wireframe = (RENDER === 'WIREFRAME') ? true : false
            } 
```

总的来说，我仍然处理纹理。

任何帮助将不胜感激！

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:15:33.330

`Geometry`没有`materials`数组了。该数组已移至`MeshFaceMaterial`.

```
new THREE.Mesh( geometry, new THREE.MeshFaceMaterials( materials ) ); 
```

# asp.net - Html.textbox 用于在 chrome 中显示电子邮件地址，其中模型具有空字符串

> ID：14278086
> 
> 赞同：1
> 
> 时间：2013-01-11T12:20:06.603
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

我有一个 asp.net mvc，它从控制操作中获取模型数据。我看到 model.genericpassword 字段是空字符串，但在视图中它显示了一个电子邮件地址（仅在 chrome 中）。此电子邮件地址来自此视图之前的登录页面。是缓存问题还是什么？如果我使用 Html.passwordfor，那么它会显示空文本框（这是我想要的）。但我想使用 html.textboxfor 以纯格式显示密码。此问题不在 Firefox 或 IE 中。如果模型具有价值，则它显示正确的价值。

控制器动作是

```
 [Authorize]
        public ActionResult EditMyUserDetails()
        {
            // IMS.ManagerObjects.IUserProfileManager mgr = profilemanager; //Roopa 29 Oct 2012
            using (IUserProfileManager profilemanager = new ManagerFactory().GetUserProfileManager())
            { //Roopa 29 Oct 2012
                UserProfile profile = profilemanager.GetProfile(CurrentUser.Id, CurrentAccount.Id);
                UserModel model = userauthenticationmanager.GetModelWithProfileInfo(CurrentUser, profile);

                 model.PasswordReminder = model.PasswordReminder != null ? model.PasswordReminder : "";
                 model.GenericPassword = model.GenericPassword != null ? model.GenericPassword : "";

                string[] userTypes = new string[] { "Admin", "Standard User" };
                ViewData["userTypes"] = new SelectList(userTypes, model.myRole.RoleName);

                using (ICurrencyManager currencyManager = new ManagerFactory().GetCurrencyManager())
                {
                    List<Currency> currencies = currencyManager.GetAll().ToList();
                    int currencyId = CurrentAccount.Currency.Id;
                    Currency currency = currencyManager.GetById(currencyId);
                    ViewData["currencies"] = new SelectList(currencies, "DialPrefix", "CountryDialPrefix", currency.DialPrefix);
                }

                return View(model);
            }
        }

and view is:

<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/child.Master" Inherits="System.Web.Mvc.ViewPage<IMS.Model.UserModel>" %>

<asp:Content ID="contentHead" ContentPlaceHolderID="PageHead" runat="server">
    <script src="../../Content/custom-js/EditMyUserDetails.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContainer" runat="server">
    <script type="text/javascript">
        $(document).ready(function () {

            $("#frmEditMyDetails :input").not(":button").change(function () {
                IsChanged(true);
            });

           $("#dialog-confirm").dialog({
               autoOpen: false,
                resizable: true,
                modal: true,
                buttons: {
                    "Yes": function () {
                        save();
                    },
                   No: function () {
                        document.location.href = $(this).data('Parameter').address;
                        $(this).dialog("close");
                   }
                }
           });
       });
    </script>
    <style type="text/css">
        .wide
        {
            width: 400px;
        }

        .disabled
        {
            background-color: #ebebe4;
        }

        .widetextarea
        {
            width: 400px;
            height: 100px;
        }

        .normal
        {
            width: 317px;
        }

        .small
        {
            width: 40px;
        }
        .tiny
        {
            width: 25px;
        }
    </style>
    <div id="dialog-confirm" title="Do you want to save changes?" style="display: none;">
        <p>
            <span class="ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>Changes
            made to user details are not saved.Do you want to save ?</p>
    </div>
    <% Html.EnableClientValidation(); %>
    <% using (Html.BeginForm("EditMyUserDetails", "Account", FormMethod.Post, new { id = "frmEditMyDetails", name = "frmEditMyDetails" }))
       { %>
    <%= Html.ValidationSummary(true)%>
    <%= Html.HiddenFor(model => model.id)%>
    <table>
        <tr>
            <td style="width: 710px;">
                <table width="100%" border="0" align="center" cellpadding="3" cellspacing="0">                  
                    <tr>
                        <td>
                            Email :
                        </td>
                        <td style="padding-left: 1px">
                            <%= Html.TextBoxFor(model => model.Email, new { @class = "textarea", @disabled ="disabled", @readonly = "readonly", MaxLength = "50" })%>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Landline :
                        </td>
                        <td style="padding-left: 1px">
                            <%= Html.TextBoxFor(model => model.Landline, new { @class = "textarea", MaxLength = "50" })%>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Mobile :
                        </td>
                        <td style="padding-left: 1px">
                            <%= Html.TextBoxFor(model => model.Mobile, new { @class = "textarea", MaxLength = "50" })%>
                        </td>
                    </tr>            
                    <tr>
                        <td>
                            Generic Password :
                        </td>
                        <td  style="padding-left: 1px">
                            <%= Html.TextBoxFor(model => model.GenericPassword, new { @class = "textarea editable", MaxLength = "50" })%>

                        </td>
                    </tr>
                    <tr>
                        <td>
                            Add generic password by default :
                        </td>
                        <td style="padding-left: 0px">
                           <%-- <%= Html.CheckBox("defaultGeneric")%>--%>
                             <%= Html.CheckBoxFor(model => model.IsGenericDefault )%>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Prompt for unique password by default :
                        </td>
                        <td style="padding-left: 0px">
                            <%--<%= Html.CheckBox("PromptForPass")%>--%>
                             <%= Html.CheckBoxFor(model => model.IsUniqueDefault )%>
                        </td>
                    </tr>
                  <%--  <tr>
                        <td>
                            Do not add a password by default :
                        </td>
                        <td style="padding-left: 0px">
                            <%= Html.CheckBox("Defaultpass")%>
                        </td>
                    </tr>--%>
                    <tr>
                        <td colspan="2">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Login Password :
                        </td>
                        <td>

                            <%=Html.PasswordFor(model => model.Password, new { @class = "textarea  editable" })%>
                            <%=Html.HiddenFor(model => model.HiddenPassword)%>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            New Password :
                        </td>
                        <td>
                            <%=Html.PasswordFor(model => model.NewPassword, new { @class = "textarea editable" })%>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Confirm Password :
                        </td>
                        <td>
                            <%=Html.PasswordFor(model => model.ConfirmPassword, new { @class = "textarea editable" })%>
                        </td>
                    </tr>
                    <tr style="height: 10px;">
                        <td colspan="2">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <b>Please enter some text which will help you remember your password</b>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Password Reminder :
                        </td>
                        <td>
                            <%=Html.TextBoxFor(model => model.PasswordReminder, new { @class = "textarea  editable" })%>
                        </td>
                    </tr>
                </table>
            </td>           
        </tr>
    </table>
    <% } %>
</asp:Content> 
```

此页面上还有其他文本框可以正常工作。

# android - Android SDK Manager 无法在 Windows 8 x64 上获取存储库

> ID：14278094
> 
> 赞同：4
> 
> 时间：2013-01-11T12:20:53.777
> 
> 标签：android, sdk, windows-8, connection

todey 我在运行 Windows 8 x64 的笔记本电脑上安装了实际的 adt 包。安装运行良好，但是当我启动 SDK 管理器时，他尝试获取 Android 存储库，然后出现此错误：

```
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: Bind Cannot assign requested address: connect 
```

我已经尝试过 x86 和 x64 版本的 SDK，但没有一个可以获取 repo。我已经完全重新安装了java。我在 Windows 7 笔记本电脑上尝试过的有趣的东西，效果很好。我还尝试强制 SDK 管理器使用 http 而不是 https，但它没有帮助。我还停用了我的软件防火墙（卡巴斯基）和路由器上的硬件防火墙，但它没有帮助。Java 也可以连接互联网，因为 Jdownloader 可以毫无问题地下载。我还尝试在浏览器中打开 URL，没有问题。有人知道还有什么问题吗？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:24:53.207

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:30:29.910

1) 可能是由于您的计算机或组织的防火墙造成的问题。尝试在 Eclipse->Android SDK Manager->Tools->Options 中设置代理，如果有的话。

2）您的防病毒软件可能会阻止它尝试禁用它并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:30:47.500

Is your Eclipse running in Drive C? Try running your eclipse or Android SDK manager as Administrator.

# facebook - addthis IE 无法在 facebook 共享中显示多个图像

> ID：14278096
> 
> 赞同：0
> 
> 时间：2013-01-11T12:21:08.570
> 
> 标签：facebook, internet-explorer, addthis, sharethis

我有一个网页，我希望人们在 facebook 上分享。所以我为 facebook、twitter 放置了 addthis 按钮......并添加了一些额外的代码

```
    <meta og:title ... />
    <meta og:url .../>
    <meta og:image ... /> 每张图片

```

当我单击按钮时，我可以看到标题、url、站点名称（源自 url）和图像。在 Chrome 中，我可以在多个图像中进行选择，但不能使用 IE（Windows7 64 位下的 IE9）我与 sharethis 有同样的问题。但是当我直接将页面 url 粘贴到 facebook 中时，IE 和 Chrome 都可以正确处理它。

这是 adthis 和类似社交插件的问题，特别是 IE？我还尝试在打开和关闭兼容模式的情况下运行，结果相同。如何修复？

# spring-roo - 带有哈迪斯插件的春袋

> ID：14278102
> 
> 赞同：1
> 
> 时间：2013-01-11T12:21:29.553
> 
> 标签：spring-roo, osgi-bundle

我正在尝试在我的 roo 中安装 hades bundle。

我正在关注这篇文章 java.dzone.com/articles/playi...-roo-and-hades

在执行时

1.  `osgi install --url http://hades.synyx.org/static/roo/re....0.RELEASE.jar`
2.  `osgi start --url http://hades.synyx.org/static/roo/re....0.RELEASE.jar`

首先运行良好，但在第二个命令中它抛出此错误：

```
org.osgi.framework.BundleException: Unresolved constraint in bundle org.synyx.ha 
```

des.roo.addon [75]：无法解析 75.0：缺少要求 [75.0] 包；(&(package=org.springframework.roo.addon.entity)(版本>=1.1.0))

有人可以帮忙吗。

谢谢

# c++ - C++ 指针向量

> ID：14278103
> 
> 赞同：-1
> 
> 时间：2013-01-11T12:21:31.923
> 
> 标签：c++, pointers, vector

我创建了一个读取列表的方法（ bool readList(vector a) ）。我想在 main 上创建一个向量作为参数发送到此方法。例如：

```
bool readList(vector<int> a){
   //Fill...
}
void main(){
   vector<int> my_vector;
   readList(my_vector);
   //work with my vector
} 
```

我应该使用指针正确吗？但是怎么做？我已经尝试了几种可能性，但都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:23:49.073

现在，您正在`a`按值传递（制作副本），对其进行修改，然后丢弃结果。您应该通过`a`引用传递：

```
// a passed by reference
bool readList(vector<int>& a){ 
   //Fill...
}
void main(){
   vector<int> my_vector;
   readList(my_vector); // inside readList a will now refer to my_vector
   //work with my vector
} 
```

此外，您应该将签名更改`main`为 return `int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:23:23.247

您需要使用*参考*。

```
bool readList(vector<int>& a) 
```

这意味着为了`a`传播到它的源所做的任何更改，`my_vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:23:27.447

在这种情况下，您希望[通过引用传递。](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)为此，请将您的方法定义更改为：

```
bool readList(vector<int>& a){
   //Fill...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:03:43.647

像 STL 算法一样，您可以更改`readList`为采用如下输出迭代器：

```
#include <iterator>
#include <vector>

template<class OutputIterator>    
OutputIterator readList(OutputIterator result) {
    // For example: Adds 0, 1, 2, 3, 4
    for (int i = 0; i < 5; i++)
        *result++ = i;
    return result;
}

int main() {
    std::vector<int> my_vector;
    readList(std::back_inserter(my_vector));
    return 0;
} 
```

# python - Python不调用外部程序

> ID：14278109
> 
> 赞同：-2
> 
> 时间：2013-01-11T12:21:59.523
> 
> 标签：python, postgresql

我编写的 python 程序有问题。它实际上是plpython3u。我正在将程序作为来自 postgres 的触发器运行。我很确定触发部分有效。我的测试 python 程序现在只做两件事。它将一些垃圾写入文件，然后尝试运行我的 C: 驱动器上的程序（这是 Windows 系统，顺便说一句）。我能够写入文件，以便正确调用 python 程序。作为一个测试，我试图运行的程序是一个 BAT 文件，它只是做了一个 COPY。副本从未完成，因此我调用外部程序的代码无法正常工作。最终我希望它调用一个真正的 Windows 应用程序（有一个窗口出现。这是最好的方法吗？另外，我通过一个问题[在这里设置了所有 python 的东西](https://stackoverflow.com/questions/14106388/postgres-and-python)

我正在使用带有 python32 的 Winows 7 机器。虽然这可能无关紧要，但我使用的是 postgres 9.2，并且我通过 pgAdmin 1.16 的 SQL 窗口运行所有这一切

这是有问题的代码：

```
CREATE or replace FUNCTION scalesmyone (thename text)
  RETURNS int
AS $$
a=5
f = open('C:\\JUNK\\frompython.txt','w')
f.write(thename)
f.close()
import os
os.system('"C:\\Users\\Jim\\Desktop\\BATfiles\\run_addcust.bat"')
$$ LANGUAGE plpython3u; 
```

谢谢，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:30:38.530

我更改为子进程，但我仍然对具有只读权限的 Windows 7 文件夹有问题。[我在这里](https://stackoverflow.com/questions/14364928/python-not-calling-an-external-program-part-2%22here%22)问了这个问题

# android - Android 中的 SQLite：我必须下载任何 SQLite 管理（如 MySQL）还是它已经在设备内存中？

> ID：14278112
> 
> 赞同：0
> 
> 时间：2013-01-11T12:22:10.113
> 
> 标签：android, sqlite

我需要在 Android 中使用 SQLite。那么，我是否必须下载任何 SQLite 管理（如 MySql）或者它已经在设备内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:24:06.180

你不需要下载任何东西。它已经在那里了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:24:22.590

除了使用 Android SDK 中的内置工具外，您无需执行任何操作。有关更多信息，请查看[sqlite 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

基本上，您可以使用 Java 代码创建数据库、向其中插入记录、修改它们等。

如果您想以图形方式处理数据库，只需使用 Eclipse 的 DDMS 视图导航到应用程序的数据库文件夹。从那里，将数据库下载到您的计算机上，然后使用许多可用的 sqlite 应用程序之一打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:24:47.517

您需要的一切都已经安装好了。要在开发期间检查数据库，您可以使用 sqlite3 工具。它安装在模拟器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-19T03:49:49.987

```
 ------------------------------------------------------------------------  
        Sqlite
    ----------------------------------------------------------------------    

         // instance varieable

            Button btn_insert,btn_update,btn_show,btn_delete,btn_search;
                EditText edit_no,edit_name,edit_mark;
                Cursor c;
                Context context=this;
                SQLiteDatabase db;
                StringBuffer sb;

        init
          edit_no= (EditText) findViewById(R.id.edit_no);
                edit_name= (EditText) findViewById(R.id.edit_name);
                edit_mark= (EditText) findViewById(R.id.edit_mark);
                btn_insert= (Button) findViewById(R.id.btn_insert);
                btn_update= (Button) findViewById(R.id.btn_update);
                btn_show= (Button) findViewById(R.id.btn_show);
                btn_delete= (Button) findViewById(R.id.btn_delete);
                btn_search= (Button) findViewById(R.id.btn_search);
                db=openOrCreateDatabase("topstech",context.MODE_PRIVATE,null);
                db.execSQL("create table if not exists register(no varchar2(20),name varchar2(20),mark varchar2(20))");

       btn_insert.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (edit_no.getText().toString().trim().length() == 0) {
                        edit_no.setError("Enter Your No");
                        return;
                    } else if (edit_name.getText().toString().trim().length() == 0) {
                        edit_name.setError("Enter Your Name");
                        return;
                    } else if (edit_mark.getText().toString().trim().length() == 0) {
                        edit_mark.setError("Enter Your Mark");
                        return;
                    } else {
                        db.execSQL("insert into register values('" + edit_no.getText().toString() + "','" + edit_name.getText().toString() + "','" + edit_mark.getText().toString() + "')");
                        Toast.makeText(context, "Record Successfully Inserted...", Toast.LENGTH_SHORT).show();
                        Clear();
                    }
                }
            });

            btn_show.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v)
                {
                    c=db.rawQuery("select * from register",null);
                    sb=new StringBuffer();
                    if(c.moveToFirst())
                    {
                        do
                        {
                            sb.append(c.getString(c.getColumnIndex("no"))+"\t");
                            sb.append(c.getString(c.getColumnIndex("name"))+"\t");
                            sb.append(c.getString(c.getColumnIndex("mark"))+"\n");

                        }while (c.moveToNext());
                        Toast.makeText(MainActivity.this, ""+sb, Toast.LENGTH_SHORT).show();
                    }
                    else
                    {
                        Toast.makeText(MainActivity.this, "Empty Record...", Toast.LENGTH_SHORT).show();
                    }
                }
            });

            btn_delete.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v)
                {
                    if (edit_no.getText().toString().trim().length() == 0)
                    {
                        edit_no.setError("Enter Your No");
                        return;
                    }
                    else
                    {
                        c=db.rawQuery("select * from register where no='"+edit_no.getText().toString()+"'",null);
                        sb=new StringBuffer();
                        if(c.moveToFirst())
                        {
                            do
                            {
                                db.execSQL("delete from register where no='"+edit_no.getText().toString()+"'");
                                Toast.makeText(MainActivity.this, "1 Record Is Deleted...", Toast.LENGTH_SHORT).show();
                                Clear();
                            }while (c.moveToNext());
                        }
                        else
                        {
                            Toast.makeText(MainActivity.this, "Record Not Found...", Toast.LENGTH_SHORT).show();
                            Clear();
                        }
                    }
                }
            });

            btn_search.setOnClickListener(new View.OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                    if (edit_no.getText().toString().trim().length() == 0)
                    {
                        edit_no.setError("Enter Your No");
                        return;
                    }
                    else
                    {
                        c=db.rawQuery("select * from register where no='"+edit_no.getText().toString()+"'",null);
                        sb=new StringBuffer();
                        if(c.moveToFirst())
                        {
                            do
                            {
                                edit_name.setText(c.getString(c.getColumnIndex("name")));
                                edit_mark.setText(c.getString(c.getColumnIndex("mark")));
                            }while (c.moveToNext());
                        }
                        else
                        {
                            Toast.makeText(MainActivity.this, "Record Not Found...", Toast.LENGTH_SHORT).show();
                            Clear();
                        }
                    }
                }
            });

            btn_update.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v)
                {
                    if (edit_no.getText().toString().trim().length() == 0)
                    {
                        edit_no.setError("Enter Your No");
                        return;
                    }
                    else
                    {
                        c=db.rawQuery("select * from register where no='"+edit_no.getText().toString()+"'",null);
                        sb=new StringBuffer();
                        if(c.moveToFirst())
                        {
                            do
                            {
                                if (edit_name.getText().toString().trim().length() == 0)
                                {
                                    edit_name.setError("Enter Your Name");
                                    return;
                                }
                                else if (edit_mark.getText().toString().trim().length() == 0)
                                {
                                    edit_mark.setError("Enter Your Mark");
                                    return;
                                }
                                else
                                {
                                    //Syntex:-
                                    //   db.execSQL("update tablename set col_name='" +edit_name+"' where no='" + no+ "'");
                                    db.execSQL("update register set name='"+edit_name.getText().toString()+"',mark='"+edit_mark.getText().toString()+"' where no='"+edit_no.getText().toString()+"'");
                                    Toast.makeText(MainActivity.this, "1 Record Is Updated...", Toast.LENGTH_SHORT).show();
                                    Clear();
                                }
                            }while (c.moveToNext());
                        }
                        else
                        {
                            Toast.makeText(MainActivity.this, "Record Not Found...", Toast.LENGTH_SHORT).show();
                            Clear();
                        }
                    }
                }
            });

        }

-----------------------------------------
Upload Image ANd Fetch Device Contact JSON ARRAY
------------------------------------------
Upload Image Using Retrofit

  @Multipart
    @POST("addDocument")
    Call<AddDocumentsResponse> doAddDocuments(@Header("Authorization") String token, @Part List<MultipartBody.Part> files, @PartMap Map<String, RequestBody> map);

 private void uploadDocuments() {
        if (Utility.checkInternetConnection(InsurenceActivity.this)) {
            ArrayList<MultipartBody.Part> multipart = new ArrayList<>();
            Map<String, RequestBody> map = new HashMap<>();
            map.put("document_type", RequestBody.create(MediaType.parse("text/plain"), "insurance"));
            map.put("expiry_date", RequestBody.create(MediaType.parse("text/plain"), str_select_date));
            map.put("photo_id_type", RequestBody.create(MediaType.parse("text/plain"), ""));
            multipart.add(Utility.prepareFilePart(InsurenceActivity.this, "document_file", picturePath));
            messageUtil.showProgressDialog(InsurenceActivity.this);
            Call<AddDocumentsResponse> registerResponseCall = ApiClient.getApiInterface().doAddDocuments(fastSave.getString(Constant.ACCESS_TOKEN), multipart, map);
           Log.d("request","---- Request -----"+map.toString());

            registerResponseCall.enqueue(new Callback<AddDocumentsResponse>() {
                @Override
                public void onResponse(Call<AddDocumentsResponse> call, Response<AddDocumentsResponse> response) {
                    if (response.code() == 200) {
                        if (response.body().getStatus().equalsIgnoreCase("fail"))
                        {
                            messageUtil.hideProgressDialog();
                            messageUtil.showErrorToast(response.body().getMessage());
                            return;
                        }
                        if (response.body().getStatus().equalsIgnoreCase("success"))
                        {
                            Log.d("response","---- Respons -----"+new Gson().toJson(response));

                            messageUtil.hideProgressDialog();
                            messageUtil.showSuccessToast(response.body().getMessage());
                            str_select_date = str_select_date;
                            picturePath = null;
                            Log.d("TAG", "success:............... " + new Gson().toJson(response));
                            finish();

                        }
                    }
                }

                @Override
                public void onFailure(Call<AddDocumentsResponse> call, Throwable t) {

                    messageUtil.hideProgressDialog();
                    messageUtil.showErrorToast("Something went wrong");
                }
            });
        } else {
            Toast.makeText(this, R.string.no_internet_connection, Toast.LENGTH_SHORT).show();
        }
    }

  public static MultipartBody.Part prepareFilePart(Context context, String partName, String filePath) {

        if(filePath!=null) {
            File file = new File(filePath);
            Log.d("TAG", "prepareFilePart: " + filePath);
//        RequestBody requestBody = RequestBody.create(MediaType.parse(getContentResolver().getType(Uri.fromFile(file))), file);

            // Libaray  Required
            RequestBody requestBody = RequestBody.create(MediaType.parse("image/*"), file);

            //  Multipart   Camera and Gallery
            //   RequestBody requestBody = RequestBody.create(MediaType.parse(context.getContentResolver().getType(FileProvider.getUriForFile(context, "com.", file))), file);
            return MultipartBody.Part.createFormData(partName, file.getName(), requestBody);
        }
        else {
                return MultipartBody.Part.createFormData(partName,"");
        }
    }

@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {
            CropImage.ActivityResult result = CropImage.getActivityResult(data);
            if (resultCode == RESULT_OK) {

                Uri resultUri = result.getUri();
                ll_profile_file.setVisibility(View.GONE);
                img_photo_file.setVisibility(VISIBLE);
                img_photo_file.setImageURI(resultUri);
                picturePath = resultUri.getPath();
            } else if (resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE) {
            }
        }
    }

Fetch Device Contact Fast

    ArrayList<Contact> listContacts;
        listContacts = new ContactFetcher(this).fetchAll();

public class ContactPhone {
    public String number;
    public String type;

    public ContactPhone(String number, String type) {
        this.number = number;
        this.type = type;
    }
}

public class ContactFetcher {

    private final Context context;

    public ContactFetcher(Context c) {
        this.context = c;
    }

    public ArrayList<Contact> fetchAll() {
        String[] projectionFields = new String[]{
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME,
        };
        ArrayList<Contact> listContacts = new ArrayList<>();
        CursorLoader cursorLoader = new CursorLoader(context,
                ContactsContract.Contacts.CONTENT_URI,
                projectionFields, // the columns to retrieve
                null, // the selection criteria (none)
                null, // the selection args (none)
                null // the sort order (default)
        );

        Cursor c = cursorLoader.loadInBackground();

        final Map<String, Contact> contactsMap = new HashMap<>(c.getCount());

        if (c.moveToFirst()) {

            int idIndex = c.getColumnIndex(ContactsContract.Contacts._ID);
            int nameIndex = c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);

            do {
                String contactId = c.getString(idIndex);
                String contactDisplayName = c.getString(nameIndex);
                Contact contact = new Contact(contactId, contactDisplayName);
                contactsMap.put(contactId, contact);
                listContacts.add(contact);
            } while (c.moveToNext());
        }

        c.close();

        matchContactNumbers(contactsMap);
        matchContactEmails(contactsMap);

        return listContacts;
    }

    public void matchContactNumbers(Map<String, Contact> contactsMap) {
        // Get numbers
        final String[] numberProjection = new String[]{
                Phone.NUMBER,
                Phone.TYPE,
                Phone.CONTACT_ID,
        };

        Cursor phone = new CursorLoader(context,
                Phone.CONTENT_URI,
                numberProjection,
                null,
                null,
                null).loadInBackground();

        if (phone.moveToFirst()) {
            final int contactNumberColumnIndex = phone.getColumnIndex(Phone.NUMBER);
            final int contactTypeColumnIndex = phone.getColumnIndex(Phone.TYPE);
            final int contactIdColumnIndex = phone.getColumnIndex(Phone.CONTACT_ID);

            while (!phone.isAfterLast()) {
                final String number = phone.getString(contactNumberColumnIndex);
                final String contactId = phone.getString(contactIdColumnIndex);
                Contact contact = contactsMap.get(contactId);
                if (contact == null) {
                    continue;
                }
                final int type = phone.getInt(contactTypeColumnIndex);
                String customLabel = "Custom";
                CharSequence phoneType = Phone.getTypeLabel(context.getResources(), type, customLabel);
                contact.addNumber(number, phoneType.toString());
                phone.moveToNext();
            }
        }

        phone.close();
    }

    public void matchContactEmails(Map<String, Contact> contactsMap) {
        // Get email
        final String[] emailProjection = new String[]{
                Email.DATA,
                Email.TYPE,
                Email.CONTACT_ID,
        };

        Cursor email = new CursorLoader(context,
                Email.CONTENT_URI,
                emailProjection,
                null,
                null,
                null).loadInBackground();

        if (email.moveToFirst()) {
            final int contactEmailColumnIndex = email.getColumnIndex(Email.DATA);
            final int contactTypeColumnIndex = email.getColumnIndex(Email.TYPE);
            final int contactIdColumnsIndex = email.getColumnIndex(Email.CONTACT_ID);

            while (!email.isAfterLast()) {
                final String address = email.getString(contactEmailColumnIndex);
                final String contactId = email.getString(contactIdColumnsIndex);
                final int type = email.getInt(contactTypeColumnIndex);
                String customLabel = "Custom";
                Contact contact = contactsMap.get(contactId);
                if (contact == null) {
                    continue;
                }
                CharSequence emailType = Email.getTypeLabel(context.getResources(), type, customLabel);
                contact.addEmail(address, emailType.toString());
                email.moveToNext();
            }
        }

        email.close();
    }

    public class ContactEmail {
    public String address;
    public String type;

    public ContactEmail(String address, String type) {
        this.address = address;
        this.type = type;
    }
}

public class Contact {
    public String id;
    public String name;
    public ArrayList<ContactEmail> emails;
    public ArrayList<ContactPhone> numbers;

    public Contact(String id, String name) {
        this.id = id;
        this.name = name;
        this.emails = new ArrayList<ContactEmail>();
        this.numbers = new ArrayList<ContactPhone>();
    }

    @Override
    public String toString() {
        String result = name;
        if (numbers.size() > 0) {
            ContactPhone number = numbers.get(0);
            result += " (" + number.number + " - " + number.type + ")";
        }
        if (emails.size() > 0) {
            ContactEmail email = emails.get(0);
            result += " [" + email.address + " - " + email.type + "]";
        }
        return result;
    }

    public void addEmail(String address, String type) {
        emails.add(new ContactEmail(address, type));
    }

    public void addNumber(String number, String type) {
        numbers.add(new ContactPhone(number, type));
    }

    JSON ARRAY

     Model model = new Model();
        ArrayList<Model> contacts_arraylist=new ArrayList<>();
        for (int i = 0; i < 50; i++)
        {
            model.setName("sanjay"+i);
            model.setEmails("sanjay@gmail.com"+i);
            model.setNumbers("89689527"+i);
            contacts_arraylist.add(model);
        }
        JSONArray personarray=new JSONArray();
        for (int j = 0; j < contacts_arraylist.size(); j++)
        {
            JSONObject person1 = new JSONObject();
            try {
                if(contacts_arraylist.get(j).getName()!=null)
                {
                    person1.put("name", contacts_arraylist.get(j).getName());
                }
                else {
                    person1.put("name","");
                }

                if(contacts_arraylist.get(j).getEmails().length()>0)
                {
                    person1.put("email", contacts_arraylist.get(j).getEmails());
                }
                else {
                    person1.put("email", "");
                }

                if(contacts_arraylist.get(j).getNumbers().length()>0)
                {
                    person1.put("mobile_number", contacts_arraylist.get(j).getNumbers());
                }
                else {
                    person1.put("mobile_number", "");
                }
                personarray.put(person1);
            } catch (JSONException e)
            {
                e.printStackTrace();
            }
            }
        txt_array.setText(personarray.toString());
            System.out.println("jsonString:---- " + personarray.toString());
    } 
```

# ruby-on-rails - Ruby on Rails：从另一个模型调用实例方法

> ID：14278113
> 
> 赞同：3
> 
> 时间：2013-01-11T12:22:12.280
> 
> 标签：ruby-on-rails, ruby, methods, model

我有一个 Match 模型和一个 Team 模型。我想在保存匹配后运行一个实例方法（在 Team 模型中编写）。这就是我所拥有的。

### 团队.rb

```
def goals_sum
  unless goal_count_cache
    goal_count = a_goals_sum + b_goals_sum
    update_attribute(:goal_count_cache, goal_count)
  end
  goal_count_cache
end 
```

它有效。现在我需要在保存比赛时运行它。所以我尝试了这个：

### 匹配.rb

```
after_save :Team.goals_sum
after_destroy :Team.goals_sum 
```

它不起作用。我知道我缺少一些基本的东西，但我仍然无法完成它。有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:27:49.127

您可以在`Match`委托给方法的方法上定义一个私有方法`Team`（否则，它怎么知道*在哪个*团队上运行该方法？您说它是一个实例方法，我假设一场比赛有正在玩它的团队）。

```
after_save :update_teams_goals_sum
after_destroy :update_teams_goals_sum

private

def update_teams_goals_sum
  [team_a, team_b].each &:goals_sum
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:24:44.367

```
after_save :notify_team
after_destroy :notify_team

private

def notify_team
  Team.goals_sum
end 
```

# ios - requestAccessToEntityType - 一次还是每次？

> ID：14278115
> 
> 赞同：5
> 
> 时间：2013-01-11T12:22:19.053
> 
> 标签：ios, objective-c, cocoa-touch

```
EKEventStore *eventStore = [[UpdateManager sharedUpdateManager] eventStore];

if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if (granted)... 
```

我想请求用户允许将事件添加到他的日历中。授予后，当我想删除一个事件（在应用程序关闭并重新打开后的另一个会话中）时，我是否需要再次请求许可，还是只是需要时间？

如果这是一次性的事情，我可以在第一次午餐时把它放在 ViewDidLoad 中只是为了“摆脱它”吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T12:35:43.440

您只需要调用一次：

```
BOOL needsToRequestAccessToEventStore = NO; // iOS 5 behavior
EKAuthorizationStatus authorizationStatus = EKAuthorizationStatusAuthorized; // iOS 5 behavior
if ([[EKEventStore class] respondsToSelector:@selector(authorizationStatusForEntityType:)]) {
    authorizationStatus = [EKEventStore authorizationStatusForEntityType:EKEntityTypeEvent];
    needsToRequestAccessToEventStore = (authorizationStatus == EKAuthorizationStatusNotDetermined);
}

if (needsToRequestAccessToEventStore) {
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {            
        if (granted) {
            dispatch_async(dispatch_get_main_queue(), ^{
                // You can use the event store now
            });
        }
    }];
} else if (authorizationStatus == EKAuthorizationStatusAuthorized) {
    // You can use the event store now
} else {
    // Access denied
} 
```

不过，您不应该在第一次发布时这样做。仅在您需要时才请求访问权限，而在用户决定添加事件之前情况并非如此。

# sql-server-2008 - 如何运行具有基于文件的源和目标的 SSIS 包

> ID：14278118
> 
> 赞同：2
> 
> 时间：2013-01-11T12:22:36.290
> 
> 标签：sql-server-2008, ssis

我有一个保存在桌面上的 dtsx 文件。

它抓取一个特定文件（源文件（CSV））并与另一个文件（目标文件（CSV）作为附加方式连接。我怎样才能运行这个DTSX？我只是希望它在不使用sqlserver的情况下定期运行因为它与服务器无关。

我使用 sql server 2008 中的导入和导出数据向导创建了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:27:21.267

您可以通过 DTEXEC 独立运行 SSIS 包，或者双击包以运行“执行包实用程序”(DTEXECUI)。

这些将需要安装，您可以通过安装 SSIS**和**SQL/Server 工作站工具来安装它们。

您也可以通过 Business Intelligence Development Studio (BIDS) 执行此操作，尽管这也将使工作站能够修改包。

# macos - 使用选项卡时在 NSTextView 中过早换行

> ID：14278119
> 
> 赞同：1
> 
> 时间：2013-01-11T12:22:37.993
> 
> 标签：macos, cocoa, nstextview

如果我输入一行制表符，我在第 51 列之后的 NSTextView 换行有一个奇怪的问题。这只发生在制表符上，而不是任何其他字符，它们在文本视图的边缘正确换行，而不是在第 51 个字符之后。

这很容易重复。在 XCode 中创建一个带有单个窗口和一个 NSTextView 的空白项目。唯一的非默认设置是我删除了约束，并使用旧样式自动调整大小来自动调整 textview 以使其填充窗口。我没有写任何代码。现在运行应用程序，打开比 51 个字符宽得多的窗口，按住 tab 键，它会提前换行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T18:19:04.417

这里的问题是 NSTextView 有一个默认的 NSMutableParagraphStyle 对象，它有一个属性列表，例如换行、制表位、边距等...您可以通过转到“格式”菜单、文本子视图并选择“显示标尺”菜单。（您可以使用任何 NSTextView 免费获得此菜单）。

显示标尺后，您将看到所有制表位，这将解释为什么您的制表位在到达最后一个制表位时会换行。

因此，您需要的解决方案是为段落样式对象创建一组您想要的选项卡，然后将其设置为 NSTextView 的样式。

这是一种创建选项卡的方法。在此示例中，它将创建 5 个左对齐的标签，每个标签相距 1.5 英寸：

```
-(NSMutableAttributedString *) textViewTabFormatter:(NSString *)aString
{
    float columnWidthInInches = 1.5f;
    float pointsPerInch = 72.0f;

    NSMutableArray * tabArray = [NSMutableArray arrayWithCapacity:5];

    for(NSInteger tabCounter = 0; tabCounter < 5; tabCounter++)
    {
        NSTextTab * aTab = [[NSTextTab alloc] initWithType:NSLeftTabStopType location:(tabCounter * columnWidthInInches * pointsPerInch)];
        [tabArray addObject:aTab];
    }

    NSMutableParagraphStyle * aMutableParagraphStyle = [[NSParagraphStyle defaultParagraphStyle]mutableCopy];
    [aMutableParagraphStyle setTabStops:tabArray];

    NSMutableAttributedString * attributedString = [[NSMutableAttributedString alloc] initWithString:aString];
    [attributedString addAttribute:NSParagraphStyleAttributeName value:aMutableParagraphStyle range:NSMakeRange(0,[aString length])];

    return attributedString;
} 
```

然后在将任何文本添加到 NSTextView 之前调用它，以便设置带有这些制表位的默认段落样式：

```
[[mainTextView textStorage] setAttributedString:[self textViewTabFormatter:@" "]]; 
```

如果您想要更深入的教程，可以在此处找到其他信息：

[http://www.mactech.com/articles/mactech/Vol.19/19.08/NSParagraphStyle/index.html](http://www.mactech.com/articles/mactech/Vol.19/19.08/NSParagraphStyle/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T12:53:56.383

我正在分享我的经验，因为我最近遇到了相同类型的问题 - 按下制表符时，光标在大约 10-12 个制表符后跳到下一行 - 当有多行文本时，按下制表符时整个段落变成项目符号行

我使用“Ed Fernandez”的上述方法，只能在最初在 NSTextView 中没有文本但加载现有保存的文本时才解决问题

为此，我尝试了以下链接中的以下代码（它确实有效并解决了这两个问题） [http://www.cocoabuilder.com/archive/cocoa/159692-nstextview-and-ruler-tab-settings.html](http://www.cocoabuilder.com/archive/cocoa/159692-nstextview-and-ruler-tab-settings.html)

如果您使用自动引用计数，则无需调用“释放”。

```
- (IBAction)formatTextView:(NSTextView *)editorTextView
{
   int cnt;
   int numStops = 20;
   int tabInterval = 40;
   NSTextTab *tabStop;

   NSMutableDictionary *attrs = [[NSMutableDictionary alloc] init];
   //attributes for attributed String of TextView

   NSMutableParagraphStyle *paraStyle = [[NSMutableParagraphStyle alloc] init];

   // This first clears all tab stops, then adds tab stops, at desired intervals...
   [paraStyle setTabStops:[NSArray array]];
   for (cnt = 1; cnt <= numStops; cnt++) {
      tabStop = [[NSTextTab alloc] initWithType:NSLeftTabStopType location: tabInterval * (cnt)];
      [paraStyle addTabStop:tabStop];
   }

   [attrs setObject:paraStyle forKey:NSParagraphStyleAttributeName];

   [[editorTextView textStorage] addAttributes:attrs range:NSMakeRange(0, [[[editorTextView textStorage] string] length])];
} 
```

由于“标尺”概念限制了大约 12 个制表位，因此存在此选项卡限制。您可以通过调用查看标尺

```
[editorTextView setRulerVisible:YES]; 
```

# android - 如何通过 id 为 Android 中的 JUnit 测试查找 GUI 组件

> ID：14278125
> 
> 赞同：0
> 
> 时间：2013-01-11T12:23:04.623
> 
> 标签：android, user-interface, junit

我需要为（在我的应用程序中）与多个 TextView 一起使用的类编写测试。通常，该类在构造函数中获取父 Activity 和视图资源 id，然后通过调用加载 TextViews 和其他一些控件`findViewById`。它使用不同的 id 和父活动多次重复使用。

这是一个应用程序测试，存在描述 GUI 的 xml 文件，并且视图 ID 可用作 R.id.* 。但是现在如何从我无法访问的测试用例中加载它们`Activity`？

我试过了`AndroidTestCase`，它确实提供了访问权限，`Context`但这似乎不足以通过 id 加载/访问/解析 GUI 组件。然后我尝试`ApplicationTestCase`了但是它的方法很少`Application`，并且可以通过它获得的实例也没有明显的方式通过id访问GUI组件。

**问题：** 在 JUnit 测试中，我能否获得一个与我使用的 id`TextView`相同的实例？如果可以，怎么做？`R.id.myView``Activity.findViewById(R.id.myView)`

**我试过了：**

```
public void testIpSection() {
    Activity act = new Activity();
    act.setContentView(R.layout.testlayout); // NPE thrown
    FragmentManager fm = act.getFragmentManager();
    FSetup setup = (FSetup) fm.findFragmentById(R.id.test_setup); 
    IPSection secs = new IPSection(setup, R.id.sbA0, R.id.sbA1, R.id.sbA2);
} 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/test_setup"
    android:name="com.spectraseis.fo4.qcdownload.FSetup"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
</fragment> 
```

但是我在测试的第二行抛出了 android.app.Activity.setContentView(Activity.java:1867) 处的 NPE。可能 Activity 不能像那样实例化。如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:35:47.820

是的，你不能以这种方式创建活动。有专门的课程来测试活动。阅读[此文档](http://developer.android.com/tools/testing/activity_testing.html)并在 ActivityInstrumentationTestCase2/ActivityUnitTestCase/SingleLaunchActivityTestCase 之间进行选择。

# java - 将 ms（长）转换为 mm:ss

> ID：14278126
> 
> 赞同：-2
> 
> 时间：2013-01-11T12:23:07.947
> 
> 标签：java, jsp, time, long-integer

> **可能重复：**
> [如何在 Java 中将毫秒转换为“X 分钟，x 秒”？](https://stackoverflow.com/questions/625433/how-to-convert-milliseconds-to-x-mins-x-seconds-in-java)

您好，我需要在 JSP 文件中转换显示毫秒数以格式化 mm:ss 的长值

```
<td>${values.parameters.timeLong}</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:24:46.467

一个简单的解决方案是使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)（格式为`"mm.ss"`）。我可能会在服务器上执行此操作，并为 JSP 提供预呈现的值。

请注意，此类不是线程安全的，可以通过[Joda-Time获得更好的替代方案](http://joda-time.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:26:09.060

太糟糕了。。太容易了。。

```
 x = input/ 1000;
    minutes = x % 60;
    seconds = x - ( minutes * 60 ) 
```

这将比使用 SimpleDateFormat 更快

# jquery - 如何通过在函数中接收参数来获取参数原始值

> ID：14278130
> 
> 赞同：0
> 
> 时间：2013-01-11T12:23:14.667
> 
> 标签：jquery, html, css, jquery-animate, position

我是 jQuery 新手，正在尝试编写一个函数，用于在单击另一个链接时滑动 div。

我的问题是，当我给出静态方向时，该函数有效，但当我尝试给出动态方向时，该函数无效。

这是我的代码：

HTML：

```
<div id="popshbtn" onclick="uiSlide(this, '#popwrap', 'right')">
    <p>Feedback</p>
</div>

<div id="popwrap" class="popdnone">
    <h3 class="h3">Support</h3> 
</div> 
```

CSS：

```
#popshbtn{
    background-color: #3385D6;
    color: #FFFFFF;
    font-size:16px;
    width:38px; height:188px;
    border:1px solid #2d7dcb;
    text-align:center;
    cursor:pointer;
    position:absolute;
    bottom:2%;
    right:0;
    z-index:999999;
}
#popshbtn:hover{
    background:#2d7dcb;
}
#popwrap{
    width:478px; 
    border:1px solid #ccc; 
    padding:10px; 
    background:#f5f5f5;
    position:absolute;
    top:20%;
    right:-500px;
    margin-left:-500px;
    display:none;
    height:400px;
} 
```

jQuery :

```
function uiSlide(ths, target, direction){
console.log(direction);

if( $(target).is(':visible')){

    $(target).hide().animate({
        'direction': '-500px'
    },'fast', function(){
        //call back function
    })

}
else{
    $(target).show().css({
        direction: 0
    },'fast', function(){
        //call back function
    })
}

   } 
```

此代码不起作用，除非我给出静态位置而不是方向。

我只想知道，有可能吗？如何确定动画的方向？

请让我知道，如果你有任何问题。

这是 js fiddle 链接[http://jsfiddle.net/sarfarazdesigner/u25Ne/](http://jsfiddle.net/sarfarazdesigner/u25Ne/)。

我上传了一张图片，它将帮助您更好地理解 ![在此处输入图像描述](../Images/691dee647ae2a15b8c68061b1a34317d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:08:17.220

您可以在 animate() jquery API 方法中将对象作为参数传递，例如：

[http://jsfiddle.net/u25Ne/3/](http://jsfiddle.net/u25Ne/3/)

```
$(document).ready(function (e) {
  $('#popshbtn').click(function () {
    uiSlide(this, '#popwrap', 'right');
  })

  $('#popshbtn').html($('#popshbtn').text().replace(/(.)/g, "$1<br />"));
});

function uiSlide(that, target, direction) {
  var optionObj1 = {},optionObj2 = {};
  optionObj1[direction] = "-500px";
  optionObj2[direction] = 0;

  if ($(target).is(':visible')) {
    $(target).animate(optionObj1, 'fast', function () {
         $(this).hide();
    })

  } else {
    $(target).show().animate(optionObj2, 'fast', function () {

    })
  }

} 
```

# asp.net - 如何将重复对象传递给用户控件到转发器

> ID：14278133
> 
> 赞同：2
> 
> 时间：2013-01-11T12:23:20.583
> 
> 标签：asp.net, telerik-grid, datarepeater

例如，我使用 Telerik rad 网格，并将用户列表绑定到它

```
rgUsers.DataSource = GetUsersList();
rgUsers.DataBind(); 
```

我有接收用户对象的用户控件**UserEditor**，

```
<radG:RadGrid runat="server" ID="rgUsers">
    <MasterTableView>
        <Columns>
          <radG:GridTemplateColumn>
              <ItemTemplate>
                  <asp:Label runat="server" ID="lblName" Text='<%# Eval("username") %>'></asp:Label>
              </ItemTemplate>
              <EditItemTemplate>
                <uc:UserEditor ID="UserEditor" runat="server" User='???????' />
              </EditItemTemplate>
          </radG:GridTemplateColumn>
          ... 
```

我可以将 User 对象传递给**UserEditor**，还是必须在 Data Binding 事件中进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:38:17.260

我认为它像原生 ASP.NET 控件一样工作：

[RadControls for ASP.NET AJAX 文档 - 事件序列](http://www.telerik.com/help/aspnet-ajax/grid-event-sequence.html)

```
<radG:RadGrid runat="server" ID="rgUsers" OnItemDataBound="rgUsers_ItemDataBound">  

protected void rgUsers_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item.ItemType == GridItemType.EditItem) 
    {
        User user = (User)e.Item.GridDataItem;
        UserEditor userEditor = (UserEditor )e.Item.FindControl("UserEditor");
        UserEditor.User = user;
    }

} 
```

# android - Android 模拟器上令人困惑的 jQuery/jsonp 失败

> ID：14278138
> 
> 赞同：0
> 
> 时间：2013-01-11T12:23:40.110
> 
> 标签：android, jquery, jquery-mobile, android-emulator

我正在尝试在 Android 模拟器上使用 jsonp 调用服务：

```
 bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },

    onDeviceReady: function() {
        app.receivedEvent('deviceready');
    },

    receivedEvent: function(id) {
        console.log('Received Event: ' + id);

        $.ajaxSetup ({  
            cache: false  
        });

        $.ajax({
            type: "GET",
            url: "http://10.0.2.2/uk-en/login/user",
            dataType: "jsonp",
            contentType: "application/json",
            success: function(xml){
                $("#result").html('123');
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
                $("#result").html('XMLHttpRequest = ' + JSON.stringify(XMLHttpRequest) + ", textStatus = " + textStatus + ', errorThrown = ' + JSON.stringify(errorThrown));
            } 
        });
    } 
```

我在 HelloWorld 应用程序上执行此操作，在 phonegap 网站上创建以下文档。我`index.html`的类似于这样：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <title>Hello World</title>
</head>
<body>
    <div class="app">
        <div id="result">

        </div>
    </div>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body> 
```

这是我收到的错误，尽管这适用于我本地机器上的 Firefox：

```
XMLHttpRequest = {"READYSTATE":4,"STATUSTEXT":"SUCCESS"},TEXTSTATUS = PARSERERROR, ERRORTHROWN = {"MESSAGE":JQUERY1830456564654_32131 WAS NOT CALLED", "STACK":"ERROR:JQUERY1830456564654_32131 WAS NOT CALLED"\N AT FUNCTION.ERROR(http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js:2:13215) 
```

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:26:36.177

`JSONP`要求将响应包装在某种**回调函数**中。

这一切都假设您从另一个域获取内容。如果是这样，您将受到[同源策略的限制：](http://en.wikipedia.org/wiki/Same_origin_policy)

所以服务器应该响应：

```
urFunction({....}); 
```

# hadoop - 映射Hadoop中reduce任务的输出大小

> ID：14278141
> 
> 赞同：1
> 
> 时间：2013-01-11T12:23:59.320
> 
> 标签：hadoop, hadoop-partitioning

在 Hadoop 0.20.2 中，jobtracker 是否维护与 reduce 任务对应的各种映射输出大小的任何信息？

`Map<String, List<MapOutputLocation>>`in 类型的maplocations`ReduceCopier`包含 reduce 任务的映射输出位置，但它似乎没有任何关于其大小的信息。

# iphone - UITableviewcell 内容更新反映到其他单元格

> ID：14278144
> 
> 赞同：0
> 
> 时间：2013-01-11T12:24:10.227
> 
> 标签：iphone, ios, uitableview

我在表格视图中使用 8 个单元格。每个单元格都有一组组件，如 UIButton、UILabel 和 UISlider。当我更新第 6 个单元格时，它反映到第 1 个单元格。同样，如果我更新第 7 个单元格，它会反映到第 2 个单元格。

删除单元格代码：

```
{
 [buttonarray removeObjectAtIndex:delpath.row];
 viewcount--;

ListCell1 *cell=(ListCell1 *)[table cellForRowAtIndexPath:delpath];

cell.slider.value=0;
cell.qlabel.text=@"1";
cell.slabel.text=@"1";
cell.n=1;
[cell.button1 setTitle:@"240" forState:UIControlStateNormal];

for (int m=0; m<7; m++)
{
    [[cell.myarray objectAtIndex:m]setImage:[UIImage imageNamed:@"Num2.png"] forState:UIControlStateNormal];
    UIButton *but=[cell.myarray objectAtIndex:m];
    but.tag=0;
}

 [self->table deleteRowsAtIndexPaths:[NSArray arrayWithObjects:delpath, nil]     withRowAnimation:UITableViewRowAnimationFade];
[table reloadData];
delpath=NULL;
} 
```

按下按钮时

```
-(void)buttonpressed:(id)sender
{
  viewcount++;
table.delegate=self;
table.dataSource=self;
//UIView *middleview=[[UIView alloc]initWithFrame:CGRectMake(100,200,300,200)];
[buttonarray addObject:sender];
[table reloadData];
} 
```

表格视图的代码

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
 return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
 return viewcount;
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 NSString *MyIdentifier=@"mycell";

 ListCell1 *cell = (ListCell1 *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
 if (cell == nil)
{
 cell = [[ListCell1 alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier]; 
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;
UIButton *b=[buttonarray objectAtIndex:indexPath.row];
 cell.imageView.frame=CGRectMake(0, 0, 0, 0);
 b.imageView.frame=CGRectMake(0, 0, 30, 30);
 cell.imageView.image=b.imageView.image;
 return cell;
 }
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
ListCell1 *cell1 = (ListCell1 *)[tableView cellForRowAtIndexPath:indexPath];
[cell1 addSubview:delbutton];
 delpath=indexPath;
 return;
 }
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return 100.0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:52:05.370

发生此问题是因为 UIKit 重用了 UITableView 中的单元格。因此，当您将 UI 组件添加到该单元格时，相同的组件将在不同的行上重复使用。

简而言之，每次更新单元格时，您都需要清除/重建 UI。

# c# - Windows 8 XAML 应用程序 - C++ 与 C# - 用户体验差异

> ID：14278151
> 
> 赞同：3
> 
> 时间：2013-01-11T12:24:29.973
> 
> 标签：c#, c++, xaml, windows-8, windows-runtime

是否存在 Windows 8 XAML 应用程序的用户体验会有所不同的情况，具体取决于它是用 C# 还是 C++ 开发的（即托管与本机）。

例如，如果应用程序通过包含etc`GridView`的复合体绑定到 500 个左右的数据项，从用户的角度来看，一种语言/技术会比另一种表现更好吗？`DataTemplate``IValueConverters`

我试图确定是否将 C++ 或 C# 用于相当复杂、数据量大的 Windows 商店 XAML 应用程序，该应用程序需要在 ARM 和 X86/X64 架构上运行良好。

**编辑**

这是对我的问题的澄清：

是否存在 Windows 8 XAML 应用程序的用户体验会有所不同（如果有）的任何场景，具体取决于它是**开发为使用托管 CLR 运行，还是编写为在本机环境中运行**

**编辑 2**

好的 - 忘记编码风格。创建看起来几乎完全相同的 C#（托管）和 C++（非托管）应用程序非常容易，让我们假设出于这个问题的目的，没有实现差异。

1.  代码足够相似以至于无关紧要
2.  您至少有 500 个数据项
3.  你有一个 GridView
4.  您的 ItemTemplate 中有一个复杂的 DataTemplate（两种方案中的相同模板）

问题 - 用户体验是否相同。有没有人有答案，还是我必须编写所有代码并自己尝试？？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:24:34.493

它不依赖于 C# 与 C++。

Windows XAML 严重依赖 GPU，并且假设您使用合理编写的代码和具有足够时间复杂度的算法，C# 和 C++ 应用程序在与 UI 相关的所有任务上的表现都相似。

时间要么花在更新 GPU 缓冲区上，要么花在 Windows 或 XAML 库中的某个地方——你选择的语言不会在任何地方产生影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:21:06.783

ListView 中的 500 个项目趋于偏大。大多数占用处理器时间的代码将是 Windows 运行时，渲染 UI 和处理滚动等；并且 C# 和 C++ 都使用完全相同的 UI 运行时。相比之下，花在您自己的代码上的 CPU 时间可能微不足道。您的优化工作主要涉及关注您如何定义项目模板、启用虚拟化等。

因此，实现语言可能对您的应用程序的性能影响不大。选择您可以最有效地开发的任何一种语言。

# locking - 更改当前可执行文件的内容。可能吗？

> ID：14278152
> 
> 赞同：0
> 
> 时间：2013-01-11T12:24:38.347
> 
> 标签：locking, byte, range, execution, disassembly

我听过，您可能会使用`LockBytes()/UnlockBytes()`WinAPI 中的此类函数（不知道 *nix 替代方案中的确切名称）来实现此类目标。

我很感兴趣：“是否可以在执行过程中更改某些 *.exe 的内容？”

我认为，由于线程锁柜模型（例如：信号量、自旋锁和其他...

但是**存在某种方式**吗？

也许，如果将资源嵌入 EXE 并使其为准备好的自己的线程模型和执行锁定，然后解锁它的字节区域并更改您需要的值。

我对这个问题很感兴趣，原因如下：

*   安全在线检查。我想更改一些值，这些值将用于在线密钥检查器（例如将校验和和会话写入此类字节区域并在线检查等...）

*   我不想写入另一个文件或注册表或其他东西，因为我想通过 UAC/chmod 阻止访问文件系统空间或系统注册表。

附言

我不想制造病毒，只是为我自己的程序提供良好的保护，使其免受黑客试验检查/反汇编的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:42:57.520

一种可能的解决方案：

1.  将要保护的大量代码移到自己的 DLL 中，而不是将其保存在 EXE 中；
2.  在主可执行文件中，将 DLL 读入内存并使用[https://github.com/fancycode/MemoryModule](https://github.com/fancycode/MemoryModule)加载它。

然后DLL不会被锁定，您可以根据需要更新其资源（如果您有权限）。

以上是针对Windows系统的，MemoryModule是针对PE格式的。在 unix 上，有两点不同：

1.  您可以在运行时重命名和替换可执行文件，因此无需写入同一个文件，但是
2.  没有一个头脑正常的人会在系统范围内安装程序，并允许普通用户编写程序的可执行文件或目录（顺便说一句，在 Windows 上有什么不同吗？你似乎确信 UAC 不会阻止你如果可以的话，编写自己的可执行文件，但可能不是这样）。

# javascript - setTimeout 导致内存泄漏

> ID：14278153
> 
> 赞同：0
> 
> 时间：2013-01-11T12:24:39.607
> 
> 标签：javascript

```
var SetInactivityTimeOut = function () {
    try {
        var TimeoutInterval = parseInt(10, 10);

        var PreviousTimeStamp = Math.round(new Date().getHours() * 60 + new Date().getMinutes());

        if (TimeoutInterval === 0) return;

        TimeoutInterval = TimeoutInterval * 60 * 1000; //Converting to milisecond
        var TimeOutObj;
        if (TimeOutObj != null && TimeOutObj != undefined) {
            clearTimeout(TimeOutObj);
        }
        //Ti.API.info('TimeOutObj---'+TimeOutObj);
        TimeOutObj = setTimeout(function () {
            open the main page
        },TimeoutInterval);

    } catch (e) {
        error(e);
    }
} 
```

这是我在每次单击按钮时使用的功能，一旦 10 分钟的空闲时间结束，它就会打开索引页面。但是当我尝试从那里登录应用程序时，它非常慢并且应用程序被挂起。

我在 Mobile 中使用此代码。我只是想知道函数的编写方式是否存在内存泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:35:34.770

因为你现在有你的函数，`TimeOutObj`它被声明在你检查它是否存在的同一个函数中，它总是存在，但总是`undefined`在你检查它是否是超时 id 的地方，所以你永远不会真正清除超时。

通过将大部分`SetInteractivityTimeout`函数包装在一个闭包中，您可以声明`TimeOutObj`实际处理函数的范围之外，因此每次调用该`SetInactivityTimeout`函数时它都会保持其值。

```
var SetInactivityTimeOut = (function () {
   var TimeOutObj;
   var TimeoutInterval = 10 * 60 * 1000; //Converting to milisecond

   return function() {
     if (TimeOutObj) {
       clearTimeout(TimeOutObj);
     }

     TimeOutObj = setTimeout(function () {
       // open the main page
     }, TimeoutInterval);
   }
 }()); 
```

# ruby-on-rails - form_for 在 ruby on rails 中抛出错误

> ID：14278160
> 
> 赞同：0
> 
> 时间：2013-01-11T12:25:04.747
> 
> 标签：ruby-on-rails, ruby, form-for

首先，我是一名经验丰富的 PHP 程序员，本周末我将在 Rails 上“检查”ruby。我已经建立了一个服务器，上周我一直在学习一些教程，现在我正忙于制作一个测试应用程序。我想创建一个用户登录系统，但是当我尝试按照教程中创建表单时，它无法编译......我真的不知道如何获得详细的错误，我的 /log/production.log保持空...

错误：

```
We're sorry, but something went wrong. 
```

当我从此视图中删除两个表单行时，错误消失：

```
<div data-role="page">
    <div data-role="header">
        <h1>Login</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <%= form_for @user do |f| %>
        <% end %>
    </div><!-- /content -->
</div> 
```

控制器：

```
class UsersController < ApplicationController
  def login
    @user = User.new
  end
end 
```

模型：

```
class User < ActiveRecord::Base
    validates_presence_of :email_address
    validates_presence_of :password
end 
```

我希望有人能告诉我我做错了什么，也许我可以看到更详细的错误。我试图找到如何启用错误，但似乎默认情况下它应该将错误输出到 ./log/production.log 而它没有。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:46:11.757

在对我的帖子发表评论后，我转向开发以获得关于我的错误的更广泛的细节。这是多个错误；

1.  我忘了在我的 routing.rb 中设置资源：用户：

    ```
    Helloworld::Application.routes.draw do
      resources :users 
    ```

2.  我必须清除我的 tmp 文件夹

    ```
    http://stackoverflow.com/questions/9219061/error-compiling-css-asset 
    ```

3.  我的 tmp 文件夹的权限是 755，应该是 777

    ```
    Permission denied - /var/rails_apps/helloworld/tmp/cache/assets/D38 
    ```

谢谢大家的帮助

# iphone - Cocos2d 2.0 中的 Admob 横幅集成 / iphone 游戏中的 Admob 横幅

> ID：14278166
> 
> 赞同：5
> 
> 时间：2013-01-11T12:25:40.223
> 
> 标签：iphone, ios, cocos2d-iphone, admob

有人知道如何在 cocos 2d v2 中使用 admob，所有文档都基于视图根控制器，而 cocos2d 2 只是以另一种方式运行。

我发现的唯一文档是：[Working-with-admob-and-cocos2d](http://googleadsdeveloper.blogspot.com.es/2012/09/working-with-admob-and-cocos2d-v20.html) ，但对于像我这样的新手来说有点差。如果有人可以帮助我，我将不胜感激！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T18:34:49.900

这是我工作的 admob cocos2d 代码：将 createAdmobAds、showBannerView、hideBannerView 和 dismissAdView 复制到您的班级。

这是[Cocos2d 3.0 Admob 示例](https://app.box.com/s/7lsxp9u4lam2rym6i2x8)，对于 Cocos2d 2.0，请查看下方

```
#import "GADBannerView.h"

typedef enum _bannerType
{
    kBanner_Portrait_Top,
    kBanner_Portrait_Bottom,
    kBanner_Landscape_Top,
    kBanner_Landscape_Bottom,
}CocosBannerType;

#define BANNER_TYPE  kBanner_Landscape_Bottom //change this on need basis

@interface MyMainMenu : CCLayer
{
    GADBannerView *mBannerView;
    CocosBannerType mBannerType;
    float on_x, on_y, off_x, off_y;
}

@implementation MyMainMenu

-(void)onEnter
{
    [super onEnter];
    [self createAdmobAds];
}

-(void)onExit 
{
    [self dismissAdView];
    [super onExit];
}

-(void)createAdmobAds
 {
    mBannerType = BANNER_TYPE;

    AppController *app =  (AppController*)[[UIApplication sharedApplication] delegate];
    // Create a view of the standard size at the bottom of the screen.
    // Available AdSize constants are explained in GADAdSize.h.

    if(mBannerType <= kBanner_Portrait_Bottom)
        mBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
    else
        mBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerLandscape];

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    mBannerView.adUnitID = MY_BANNER_UNIT_ID;

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.

    mBannerView.rootViewController = app.navController;
    [app.navController.view addSubview:mBannerView];

    // Initiate a generic request to load it with an ad.
    [mBannerView loadRequest:[GADRequest request]];

    CGSize s = [[CCDirector sharedDirector] winSize];

    CGRect frame = mBannerView.frame;

    off_x = 0.0f;
    on_x = 0.0f;

    switch (mBannerType)
    {
        case kBanner_Portrait_Top:
        {
            off_y = -frame.size.height;
            on_y = 0.0f;
        }
            break;
        case kBanner_Portrait_Bottom:
        {
            off_y = s.height;
            on_y = s.height-frame.size.height;
        }
            break;
        case kBanner_Landscape_Top:
        {
            off_y = -frame.size.height;
            on_y = 0.0f;
        }
            break;
        case kBanner_Landscape_Bottom:
        {
            off_y = s.height;
            on_y = s.height-frame.size.height;
        }
            break;

        default:
            break;
    }

    frame.origin.y = off_y;
    frame.origin.x = off_x;

    mBannerView.frame = frame;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

    frame = mBannerView.frame;
    frame.origin.x = on_x;
    frame.origin.y = on_y;

    mBannerView.frame = frame;
    [UIView commitAnimations];
}

-(void)showBannerView
{
    if (mBannerView)
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGRect frame = mBannerView.frame;
             frame.origin.y = on_y;
             frame.origin.x = on_x;

             mBannerView.frame = frame;
         }
                         completion:^(BOOL finished)
         {
         }];
    }

}

-(void)hideBannerView
 {
    if (mBannerView)
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGRect frame = mBannerView.frame;
             frame.origin.y = off_y;
             frame.origin.x = off_x;
         }
                         completion:^(BOOL finished)
         {
         }];
    }

}

-(void)dismissAdView
 {
    if (mBannerView) 
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         { 
             CGRect frame = mBannerView.frame;
             frame.origin.y = off_y;
             frame.origin.x = off_x;
             mBannerView.frame = frame;
         } 
                         completion:^(BOOL finished)
         {
             [mBannerView setDelegate:nil];
             [mBannerView removeFromSuperview];
             mBannerView = nil;

         }];
    }
} 
```

# html - HTML如何在一行中对齐两个表格？

> ID：14278167
> 
> 赞同：5
> 
> 时间：2013-01-11T12:25:45.303
> 
> 标签：html, html-table

如何在页面中间对齐一行中的两个表格？我想看到的结果：

```
 11 12   11 12
                                21 22   21 22 
```

我得到的结果：

```
11 12
21 22
11 12
21 22 
```

```
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>11</td>
    <td>12</td>
  </tr>
  <tr>
    <td>21</td>
    <td>22</td>
  </tr>
</table>
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>11</td>
    <td>12</td>
  </tr>
  <tr>
    <td>21</td>
    <td>22</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:44:11.673

请使用它，根据要求调整宽度，如果要放置在文档的中心，请取一个 div 并将其对齐页面的中心并将以下 html 放入其中。

```
<table border="0" cellpadding="0" cellspacing="0" style="width:50%;float:left">
<tbody>
<tr>
  <td> 11</td>
  <td> 12</td>
</tr>
<tr>
  <td> 21</td>
  <td> 22</td>
</tr>
</tbody>
</table>
<table border="0" cellpadding="0" cellspacing="0" style="width:50%;float:left">
<tbody>
 <tr>
  <td> 11</td>
  <td> 12</td>
</tr>
<tr>
  <td> 21</td>
  <td> 22</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:39:24.560

您可以创建另一个表并将这两个表嵌入其中：

```
<table border="0" cellspacing="0" cellpadding="0">
 <tr>
 <td>
    <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td>11</td>
            <td>12</td>
          </tr>
          <tr>
            <td>21</td>
            <td>22</td>
          </tr>
    </table>    
 </td>
 <td>
    <table border="0" cellspacing="0" cellpadding="0">
       <tr>
            <td>11</td>
            <td>12</td>
       </tr>
       <tr>
            <td>21</td>
            <td>22</td>
       </tr>
     </table>
 </td>
 </tr>
</table> 
```

或者您可以在 css 中使用 float 属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T12:30:58.850

这个[http://jsfiddle.net/pNH3T/](http://jsfiddle.net/pNH3T/)是一种可能的解决方案：

```
<div style="display:block; width:100%">
  <div style="margin:0 auto; width:200px;">
    <table border="0" cellspacing="0" cellpadding="0" style="float:left; margin-right:10px;">
      <tr>
        <td>11</td>
        <td>12</td>
      </tr>
      <tr>
        <td>21</td>
        <td>22</td>
      </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0" style="float:left">
      <tr>
        <td>11</td>
        <td>12</td>
      </tr>
      <tr>
        <td>21</td>
        <td>22</td>
      </tr>
    </table>
  </div>
</div> 
```

# java - 缩小 HTML 页面并转换为 A4 大小的 pdf

> ID：14278168
> 
> 赞同：0
> 
> 时间：2013-01-11T12:25:47.213
> 
> 标签：java, html, pdf, pdf-writer

将html页面转换为pdf。当我将页面转换为 pdf 时，**html 页面内容不适合 A4 页面。我希望将整个 html 页面转换为 pdf 而不会丢失任何内容。**

我已经有了将 html 转换为 pdf 的代码

```
 String tempOutFileNameXHTML = "/Users/Common/index" + i + DOT + "xhtml";
            String tempOutFileNamePDF = "/Users/Common/index" + i + DOT + PDF;
            File targetFile = targetFiles.get(i); // gets all the specified html files
            CleanerProperties props = new CleanerProperties();
            props.setTranslateSpecialEntities(true);
            props.setTransResCharsToNCR(true);
            props.setOmitComments(true);

            //checking of starting and ending tags are in proper
            HtmlCleaner htmlCleaner = new HtmlCleaner(props);
            TagNode tagNode = htmlCleaner.clean(targetFile);
            PrettyXmlSerializer prettyXmlSerializer = new PrettyXmlSerializer(props);

            prettyXmlSerializer.writeToFile(tagNode, tempOutFileNameXHTML, "utf-8");

            File xhtmlpath = new File(tempOutFileNameXHTML);
            File pdfPath = new File(tempOutFileNamePDF);
            com.itextpdf.text.Document pdfDocument = null;
            PdfWriter pdfWriter = null;
            pdfDocument = new com.itextpdf.text.Document(com.itextpdf.text.PageSize.A4); // TODO handle this

            pdfWriter = PdfWriter.getInstance(pdfDocument, new FileOutputStream(pdfPath));
            pdfDocument.open();
            Font catFont = new Font(Font.FontFamily.TIMES_ROMAN, 25, Font.BOLD);
            pdfDocument.add(new Paragraph("Target : " + targetFile.getParentFile().getName(), catFont));

            XMLWorkerHelper.getInstance().parseXHtml(pdfWriter, (com.itextpdf.text.Document) pdfDocument,
                    new FileInputStream(xhtmlpath), null);

            pdfDocument.close(); 
```

**这里的问题是当 html 页面宽度太长时，它不适合 A4 大小的 pdf。**无论如何要缩小或使其成为pdf而不会丢失任何内容。? 我怎样才能做到这一点 ？Html 页面可以缩小并转换为 pdf 吗？关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:33:34.583

“ [Flying Saucer XHTML 渲染器项目支持将 XHTML 输出为 PDF。请看](http://code.google.com/p/flying-saucer/)[这里](http://today.java.net/pub/a/today/2007/06/26/generating-pdfs-with-flying-saucer-and-itext.html)的示例。”

>[来源](https://stackoverflow.com/questions/633780/converting-html-files-to-pdf)<

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:24:25.227

iText 可能支持 CSS 样式。您可以使用样式表来格式化您的 HTML 页面，使其适合一页。有关样式表和 iText 的一些信息：http://itextpdf.com/examples/iia.php? [id =56](http://itextpdf.com/examples/iia.php?id=56)

如前所述，您还可以尝试 Flying Saucer，它是另一种 HTML 到 PDF 转换器。至少使用 Flying Saucer 可以提供真正的样式表，并且 CSS 支持非常好。

# jquery - 为什么我的简单主干视图点击事件没有触发？

> ID：14278169
> 
> 赞同：0
> 
> 时间：2013-01-11T12:25:51.150
> 
> 标签：jquery, html, backbone.js, backbone-views, backbone-events

这是我的主干视图场景

```
var TreeNode = Backbone.View.extend({
        tagName : "span",
        className : "ndelem dirnode",
        events : {
            "click" : "selectNode",
        },
        initialize : function() {
            _.bindAll(this, "render", "selectNode");
            $(this.el).append(this.model.get("fname")).attr({
                "data-cid" : this.model.cid
            });

        },
        render : function() {
            this.delegateEvents();
            return this;
        },

        selectNode : function(e) {
            e.stopPropagation();

            this.model.set({
                isOpened : true
            });
        }
    }); 
```

主视图

```
var TreeZone = Backbone.View.extend({
        el : $("#nodes"),
        initialize : function() {
            this.collection.bind("add", this.list, this);
        },      
        getHtml : function(elem) {
            var newItem = $("<div/>").append(elem);
            return newItem.html();
            newItem.remove();
        },
        getSelectedItem : function() {
            var selectedItem = $('#nodes').jqxTree('selectedItem');
            if (selectedItem != null)
                return selectedItem.element;
            else {
                var treeItems = $('#nodes').jqxTree('getItems');
                var firstItem = treeItems[0];
                return firstItem.element;
            }
        },
        list : function(file) {

            var node = new TreeNode({
                model : file
            });
            var newItem = this.getHtml(node.render().el);

            var element = this.getSelectedItem();

            $('#nodes').jqxTree('addTo', {
                html : newItem,
            }, element);
            $('#nodes').jqxTree('expandItem', element); 
        }
    });

var tree = new TreeZone({collection:dircollection}); 
```

我将元素添加到集合中。

但树节点单击事件未触发。只是我将原始 html 添加到树节点，因为树不支持 jquery 对象。所以我正在尝试从获取 html 函数获取 html。并将其交给树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:43:25.673

事件绑定到 DOM 元素，但您最终使用的是 HTML 字符串。你这样做：

```
getHtml : function(elem) {
    var newItem = $("<div/>").append(elem);
    return newItem.html();
    newItem.remove();
},

//...
var newItem = this.getHtml(node.render().el); 
```

所以`getHTML`返回一个字符串，一旦你将`TreeNode`'s `el`（这是一个 DOM 对象）转换为一个字符串，[`delegate`](http://api.jquery.com/delegate)Back 附加到`el`事件处理的那个就消失了：没有`delegate`，没有事件。

我可以看到几个选项：

1.  在调用后挖掘节点并用于`<span>`将其重新附加到视图。`#nodes``addTo`[`setElement`](http://backbonejs.org/#View-setElement)`TreeNode`
2.  重新排列结构，使你根本没有`TreeNode`。如果您将一个类附加到节点`<span>`s 那么您可以让`TreeZone`处理所有事件；例如，如果您用于`<span class="node">`节点，那么`TreeZone`可以有这个：

    ```
    events: {
        'click .node': 'selectNode'
    } 
    ```

    你会有一个`selectNode`方法 on`TreeZone`而不是`TreeNode`. 您可能需要向 s 添加一个`data-id`属性，`<span>`以便您可以从 回溯`<span>`到模型。

另外，请注意，您的`newItem.remove();`in`getHtml`将永远不会被执行。

# java - java - 如何在java中检查一个字符串是否包含至少一个字母？

> ID：14278170
> 
> 赞同：36
> 
> 时间：2013-01-11T12:25:53.537
> 
> 标签：java, string

我想要这样一种验证，即我的字符串必须包含至少一个字母表。

我正在使用以下内容：

```
String s = "111a11";
boolean flag = s.matches("%[a-zA-Z]%"); 
```

`false` 即使`a`在我的字符串中，标志也会给我`s`

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-11T12:52:47.397

您可以使用`.*[a-zA-Z]+.*`with`String.matches()`方法。

```
boolean atleastOneAlpha = s.matches(".*[a-zA-Z]+.*"); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-11T12:30:27.117

您想要的正则表达式是`[a-zA-Z]`，但您需要使用该`find()`方法。

此页面将让您根据输入测试正则表达式。

[正则表达式测试页](http://www.fileformat.info/tool/regex.htm)

在这里你有一个 Java 正则表达式教程。

[Java 正则表达式教程](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

# javascript - 按钮禁用 - 如何更改外观

> ID：14278172
> 
> 赞同：0
> 
> 时间：2013-01-11T12:26:04.040
> 
> 标签：javascript, css, html, dart

如何在禁用时更改 html 按钮的外观并在启用时更改其外观？我希望按钮保持可见，并且我不想更改按钮的文本。我想从代码中改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:11:51.777

[例如](http://jsfiddle.net/tet3m/)：

```
button {
  border: 3px solid #009;
  background: #66c;
  color: #fff;
}
button:disabled {
  border: 3px solid #66c;
  opacity: 0.5;
} 
```

请注意，根据[我评论](https://developer.mozilla.org/en-US/docs/CSS/%3adisabled)中的链接`:disabled`，IE8 及更早版本不支持伪类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:40:24.790

CSS 提供 :disabled 选择器。

[有关 CSS3 选择器的更多信息](http://www.w3schools.com/cssref/sel_disabled.asp)

* * *

如果您不想使用 CSS3 选择器，您可以创建新类并以您想要的方式设计它。

但在那之后，您必须添加标志“禁用”并`return false;`在设置标志时使用。

# vb.net - 搜索字节数组

> ID：14278173
> 
> 赞同：0
> 
> 时间：2013-01-11T12:26:06.233
> 
> 标签：vb.net

基本上我在 VB.NET 中搜索一个字节数组，代码如下：

```
For i As Integer = 0 To message.Length - 1
    If message(i) = Asc(ControlChars.Cr) Then
        If message(i + 1) = Asc(ControlChars.Lf) Then
            If message(i + 2) = Asc(ControlChars.Cr) Then
                If message(i + 3) = Asc(ControlChars.Lf) Then
                    start = i + 4 ' take into account the above characters
                    Exit For
                End If
            End If
        End If
    End If
Next

Dim length As Integer = message.Length - start 
```

我想知道是否有更好的方法来做到这一点？我试着做这样的事情：

```
start = message.IndexOf({ControlChars.CrLf, ControlChars.CrLf}) 
```

但这会返回-1。

另外，有没有更好的方法从字节数组中删除字节，因为我有这个：

```
Dim text(message.Length - start) As Byte
Dim position As Integer = 0
For i As Integer = start To message.Length - 1
    text(position) = message(i)
    position = position + 1
Next 
```

# php - 将 html 标记附加到 php 变量

> ID：14278186
> 
> 赞同：-3
> 
> 时间：2013-01-11T12:26:28.577
> 
> 标签：php

我是 php 的新手，刚开始学习它，同时使用 wordpress。

我想将 html 代码添加到 php 变量中，实际上是一个锚标记链接。首先，我使用 拆分文本`substr()`，现在我想在帖子末尾附加一个锚标记。

```
$json['timeline']['date'][$i]['text'] =  substr(strip_tags($post->post_content), 0, 400)+"<a href='#'>Read more..</"; 
```

好吧，我相信这不是正确的方法。谁能指导我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:27:55.530

用于`.`在 PHP 中附加字符串。并且不要忘记关闭该标签：

```
$json['timeline']['date'][$i]['text'] = substr(strip_tags($post->post_content), 0, 400) . "<a href='#'>Read more..</a>"; 
```

请注意，一个例外是`echo`，它允许您传递以逗号分隔的参数：

```
echo "one", "two", "three"; 
```

这具有边际时间优势，但不要因此而这样做（以避免过早优化）。实际上，`.`请在任何地方使用，以防您最终将其更改`echo`为`return`.

最后，有一种更简单的方法可以将自定义链接添加到您可能想要查看的 Wordpress 摘录中：

[http://codex.wordpress.org/Customizing_the_Read_More](http://codex.wordpress.org/Customizing_the_Read_More)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:29:56.737

在php中，您可以像这样

```
$var = "any value"."<a href='example.com'>link</a>"; 
```

# windows - 是否可以使用 vbs 构建一些 gui？（SSH 自动化）

> ID：14278190
> 
> 赞同：0
> 
> 时间：2013-01-11T12:26:35.450
> 
> 标签：windows, user-interface, vbscript, ssh, automation

我正在尝试使用 vbs 进行自动化，我想知道是否可以使用文件选择器（或其中几个）构建一些简单的 gui？谷歌搜索在这里没有帮助我。

我需要这个不要硬编码脚本的一些输入参数。

最初的问题是 ssh 命令自动化。我现在为此使用 XShell（ssh 客户端）vbs 脚本，但是每次使用它时我都必须对参数进行硬编码。如果我可以只输入 ip/choose 文件，而不是编辑脚本，那就更好了。
也许值得考虑任何其他自动化方式，如果有人可以建议任何工具来自动将 ssh 命令发送到远程服务器，那就太好了！

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:25:52.067

对于了解 HTML 的人来说，编写由 VBScript（或任何其他 ActiveScript 语言：Perl、Python、Ruby、JScript 等）控制的 GUI 是非常可行的。该技术称为[HTML 应用程序 (HTA)](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)，甚至还有一个[向导/设计](http://www.microsoft.com/en-us/download/details.aspx?id=17332)器（质量一般）。

虽然命令行 VBScript 由 C/WScript.exe 托管，但 HTA 是基于浏览器（即 IE）的。如果您可以通过脱壳或 COM 对象来完成 SSH 工作，这不是问题。但是 Mr.Nothing 的 SSH 客户端似乎是一个控制台风格的应用程序，它在内部托管/使用 VBScript 代码；在这种情况下，HTA 是没有选择的。OTOH：如果 - 正如“我不需要它来硬编码脚本的某些输入参数”似乎表明 - 真正的工作是通过启动 VBScript 脚本完成的，那么在 HTA GUI 中为此类脚本选择/构造参数应该很容易（对于精通 HTML 的人）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:01:03.497

用 VBScript 编写 GUI 并不可行。毫无疑问，这是可能的，但没有任何工具包可以让它变得简单。这不是 VBScript 的设计目的。

我想到了许多选择：

*   用另一种语言编写您的 GUI，无论您喜欢什么。然后将命令作为命令行参数发送到您的 VBscript 代码。这对您来说是最简单的选择。您需要做的就是编写 GUI，并用一些从命令行提取值的代码替换 VBscript 代码中的硬编码值。
*   用支持 COM 自动化的不同语言对 Xshell 进行 COM 自动化。大多数语言都有。并在那里编写 GUI。例如，Python 是我的选择。
*   将 GUI 和您的 ssh 代码批发切换为不同的语言。同样，许多语言都具有良好的 ssh 模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T14:33:05.460

创建 VBScript UI 所涉及的大多数问题是缺少事件驱动的编程模型。通过使用 Javascript 和 Internet Explorer 事件，我已经解决了这个问题。

如下声明 Internet Explorer 对象以启用事件。

```
Set oIE = WScript.CreateObject("InternetExplorer.Application", "oIE_") 
```

像下面这样声明退出事件。在这种情况下退出脚本。

```
Sub oIE_onQuit 
```

像下面这样声明 TitleChange 事件。在这种情况下，您将处理所有 UI 功能。

```
Sub oIE_TitleChange(text) 
```

在 html 中，您要触发偶数的按钮必须具有 javascript 才能更改标题。

```
document.title = document.title; 
```

[这是完整源代码的链接。](http://fredgrass.blogspot.com/2013/04/vbs-internet-explorer-ui-made-simple.html)

# objective-c - UINavigationController 不显示

> ID：14278193
> 
> 赞同：2
> 
> 时间：2013-01-11T12:26:44.740
> 
> 标签：objective-c, uinavigationcontroller

遇到这个问题，UInavigationController 没有显示.. 这是我的代码..

```
eSigHomeViewController *controller = [[eSigHomeViewController alloc] initWithNibName:@"eSigHomeViewController" bundle:[NSBundle mainBundle]];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
self.navigationController.navigationBarHidden = YES;
self.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque;

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Override point for customization after application launch.
[self.window addSubview:self.navigationController.view];
self.window.backgroundColor = [UIColor clearColor];
[self.window makeKeyAndVisible]; 
```

做，我错过了一些东西..希望你能提供一些帮助..

谢谢，

雀巢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:29:30.793

`self.navigationController.navigationBarHidden = YES;`如果您想查看导航栏，请删除此行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:31:07.753

好像你不见了

```
self.window.rootViewController = self.navigationController; 
```

# c# - 单元测试/模拟 XML-RPC.net 调用

> ID：14278194
> 
> 赞同：1
> 
> 时间：2013-01-11T12:26:47.297
> 
> 标签：c#, unit-testing, mocking, nunit, xml-rpc

我正在开发一个使用 CookComputing XML-RPC.net 的应用程序

我的问题是如何对调用外部 rpc 方法的方法进行单元测试。

如果我们以网站上的例子为例：

```
//This is the XML rpc Proxy interface
[XmlRpcUrl("http://www.cookcomputing.com/xmlrpcsamples/RPC2.ashx")]
public interface IStateName : IXmlRpcProxy
{
    [XmlRpcMethod("examples.getStateName")]
    string GetStateName(int stateNumber); 
}

public class MyStateNameService 
{
    public string GetStateName(int stateNumber)
{
        IStateName proxy = XmlRpcProxyGen.Create<IStateName>();
        return proxy.GetStateName(stateNumber);
     }
} 
```

[我们如何在不实际访问 http://www.cookcomputing.com/xmlrpcsamples/RPC2.ashx](http://www.cookcomputing.com/xmlrpcsamples/RPC2.ashx)的情况下有效地测试 IStateName 的结果

我想一个好的开始将是一个构造函数，`MyStateNameService`它采用 IStateName，并在 IStateName 上传入一个假的（或模拟的？）实例......

我有兴趣测试它的实际内容 - 例如伪造来自端点的响应，并以某种方式返回它，而不仅仅是验证`GetStateName`调用服务......

**编辑**

我不是想测试服务的*内容* ，也不是**我的**课程用它做什么。

因此，例如，假设响应是：

```
<?xml version="1.0"?>
<methodResponse>
  <params>
    <param>
        <value><string>My State Name</string></value>
    </param>
  </params>
</methodResponse> 
```

我想“伪造”该响应一些如何测试`MyStateNameService.GetStateName`实际返回的“我的州名”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:36:03.560

您的问题在于此处应用的单例模式。

```
XmlRpcProxyGen.Create<IStateName>(); 
```

因此，您使用依赖注入（通过构造函数）的想法是一个好的开始。（你使用 IoC 容器吗？）

接下来是为`IStateName`服务创建一个 Mock/Fake/Stub。这可以通过多种方式实现。

*   手动实施
*   [N替换](http://nsubstitute.github.com/)
*   [模拟](http://nmock3.codeplex.com/)
*   [犀牛模拟](http://hibernatingrhinos.com/oss/rhino-mocks)
*   您选择的其他自动/动态模拟框架

使用动态模拟系统可能会为您节省一些工作，但您需要了解它们的用法。

使用 NUnit、NSubstitute 和修改后的经典 AAA 测试示例`MyStateNameService`：

```
class MyStateNameService
{
  private readonly IStateName _remoteService;
  public MyStateNameService(IStateName remoteService)
  {
    // We use ctor injection to denote the mandatory dependency on a IStateName service
    _remoteService = remoteService;
  }

  public string GetStateName(int stateNumber)
  {
    if(stateNumber < 0) throw new ArgumentException("stateNumber");
    // Do not use singletons, prefer injection of dependencies (may be IoC Container)
    //IStateName proxy = XmlRpcProxyGen.Create<IStateName>();
    return _remoteService.GetStateName(stateNumber);
  }
}

[TestFixture] class MyStateNameServiceTests
{
  [Test]
  public void SomeTesting()
  {
    // Arrange
    var mockService = Substitute.For<IStateName>();
    mockService.GetStateName(0).Returns("state1");
    mockService.GetStateName(1).Returns("state2");

    var testSubject = new MyStateNameService(mockService);

    // Act
    var result = testSubject.GetStateName(0);

    // Assert
    Assert.AreEqual("state1", result);

    // Act
    result = testSubject.GetStateName(1);

    // Assert
    Assert.AreEqual("state2", result);

    // Act/Assert
    Assert.Throws<ArgumentException>(() => testSubject.GetStateName(-1));
    mockService.DidNotReceive().GetStateName(-1);

    /* 
       MyStateNameService does not do much things to test, so this is rather trivial.
       Also different use cases of the testSubject should be their own tests ;) 
    */

  }

} 
```

# android - 屏幕旋转后片段状态未保存（使用带有选项卡的 ActionBar）

> ID：14278195
> 
> 赞同：1
> 
> 时间：2013-01-11T12:26:48.750
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

我将此侦听器用于选项卡，但是当屏幕旋转时，所有片段都会移动到初始状态：

```
public static class TabListener implements ActionBar.TabListener {

        private final Activity mActivity;
        /**
         * HashMap with tab tag and tab frament
         */
        private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();

        /**
         * Auxiliary class for storing tab info
         * 
         */
        static final class TabInfo {
            private final String mTag;
            private final Class<? extends Fragment> mClass;
            private Fragment mFragment;

            TabInfo(String tag, Class<? extends Fragment> class_) {
                mTag = tag;
                mClass = class_;
            }
        }

        public TabListener(Activity activity) {
            mActivity = activity;
        }

        public void addTab(String tag, Class<? extends Fragment> class_) {
            mTabs.put(tag, new TabInfo(tag, class_));
        }

        /* The following are each of the ActionBar.TabListener callbacks */

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // Check if the fragment is already initialized
            TabInfo tabInfo = mTabs.get(tab.getTag());

            Fragment prevFragment = ((SherlockFragmentActivity) mActivity)
                    .getSupportFragmentManager().findFragmentByTag(
                            (String) tab.getTag());
            if (prevFragment != null) {
                tabInfo.mFragment = prevFragment;
            }

            if (tabInfo.mFragment == null) {
                // If not, instantiate and add it to the activity
                tabInfo.mFragment = Fragment.instantiate(mActivity,
                        tabInfo.mClass.getName());
                ft.add(android.R.id.content, tabInfo.mFragment, tabInfo.mTag);
            } else {
                // If it exists, simply attach it in order to show it
                ft.attach(tabInfo.mFragment);
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            TabInfo tabInfo = mTabs.get(tab.getTag());
            if (tabInfo.mFragment != null) {
                // Detach the fragment, because another one is being attached
                ft.detach(tabInfo.mFragment);
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // User selected the already selected tab. Usually do nothing.
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:32:28.600

```
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

...

CustomFragment fragment;
if (savedInstanceState != null) {
    fragment = (CustomFragment) getSupportFragmentManager().findFragmentByTag("customtag");
} else {
    fragment = new CustomFragment();
    getSupportFragmentManager().beginTransaction().add(R.id.container, fragment, "customtag").commit(); 
}

...

} 
```

试试这个，它肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:03:35.023

调用`setRetainInstance(true)`你的片段。即使在屏幕旋转之后，这也将保持它们的状态。但是请注意 Fragment 生命周期的变化，请参阅[Docs](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)。

# php - 将复选框表单结果发送到电子邮件的 php 代码

> ID：14278196
> 
> 赞同：0
> 
> 时间：2013-01-11T12:26:49.390
> 
> 标签：php, email

非常感谢对php新手的一些帮助！

HTML 表单具有以下复选框列表：

```
 <input type="checkbox" name="servicetype[]" value="Option A"> Option A<br>
    <input type="checkbox" name="servicetype[]" value="Option B"> Option B<br>
    <input type="checkbox" name="servicetype[]" value="Option C"> Option C<br>
    <input type="checkbox" name="servicetype[]" value="Option D"> Option D<br>
    <input type="checkbox" name="servicetype[]" value="Option E"> Option E<br> 
```

下面的 php 代码虽然不起作用。我希望在电子邮件中发送表格上勾选的选项。所有其他非复选框日期都正常。这是php：

```
$mail = new Mail();
$mail->to = "my@emailadddress.com";            
$mail->from  =   $_REQUEST["emailaddress"];
$mail->subject = "Form Results";
$mail->body.= "Name: ".$_REQUEST["title"]." ".$_REQUEST["firstname"]." ".$_REQUEST["surname"]. "\n";
$mail->body.= "Email Address: ".$_REQUEST["emailaddress"]. "\n";            
$mail->body.= "Phone Number: ".$_REQUEST["telephonenumber"]. "\n";
$mail->body.= "Address:  ".$_REQUEST["addressline1"]. "\n";    
$mail->body.= $_REQUEST["addressline2"]. "\n";                
$mail->body.= "Town/City:  ".$_REQUEST["towncity"]. "\n";
$mail->body.= "County/State:  ".$_REQUEST["countystate"]. "\n";            
$mail->body.= "Post Code: ".$_REQUEST["postcode"]."\n";
$mail->body.= "Country: ".$_REQUEST["country"]."\n";            

$servicetype = $_POST['servicetype'];
$body .= "servicetype: \r\n".

foreach ($servicetype as $selected) {
$body .= " > ".$selected."\r\n";      
}

$mail->send();
$success=1; 
```

php中的servicetype位是我没有成功复制的部分。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:30:12.390

*   您将服务类型相关的文本存储在`$body`而不是 中`$mail->body`，即它不会包含在您的邮件中。
*   `.`您还用 a而不是 a结束了一行`;`
*   你突然开始使用`$_POST`而不是`$_REQUEST`. 这应该无关紧要（假设您`post`在表单中使用该方法），但是突然在两者之间切换是“奇怪的”并且容易出错。
*   你需要检查一个 cehckbox 是否真的被选中，否则`$servicetype`将被取消设置并且你得到错误。用于[`isset()`](http://nl1.php.net/manual/en/function.isset.php)此检查。

因此，将代码的最后一部分更改为：

```
$servicetype = $_POST['servicetype'];
if(isset($servicetype)) {
    $mail->body .= "servicetype: \r\n";

    foreach ($servicetype as $selected) {
        $mail->body .= " > ".$selected."\r\n";      
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:38:31.883

你可以这样做-

```
$servicetype = implode(",", $_POST['servicetype']);
$mail->body .= $servicetype."\r\n"; 
```

# android - 添加事件后如何在日历中同步事件

> ID：14278197
> 
> 赞同：0
> 
> 时间：2013-01-11T12:26:49.370
> 
> 标签：android, calendar, sync, google-calendar-api

我正在添加这样的事件......

```
public static String EVENT_URI = "content://com.android.calendar/events";
public static String CALENDAR_URI = "content://com.android.calendar/calendars";

public static Uri insert(ContentResolver cr, ContentValues cv) {

    Uri newEvent = null;

    try {
        cv.put(Event.CALENDAR_ID, 1);
        cv.put(Event.TITLE, "title");
        cv.put(Event.DESCRIPTION, "description");
        cv.put(Event.DTSTART, new Date().getTime());
        cv.put(Event.DTEND, new Date().getTime() + 1000 * 60 * 60);
        cv.put(Event.EVENT_LOCATION, "Hall: " + "+ 1000 * 60 * 60");
        cv.put(Event.HAS_ALARM, true);
        cv.put(Event.EVENT_TIMEZONE, TimeZone.getDefault().getDisplayName());

        newEvent = cr.insert(Uri.parse(EVENT_URI), cv);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return newEvent;
} 
```

添加事件后，我想与 Google 日历同步，是否有任何参数需要发送，`ContentValues` **或者**我需要触发查询`sync`。

这很有用[http://developer.android.com/guide/topics/providers/calendar-provider.html#sync-adapter](http://developer.android.com/guide/topics/providers/calendar-provider.html#sync-adapter)

帮助！！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:35:44.017

[在不使用 Google Calendar Data API 的情况下从 Android 手机的日历同步到 Web 上的 Google Calendar。这可能吗？](https://stackoverflow.com/questions/8834257/sync-from-android-phones-calendar-to-google-calendar-on-web-without-using-googl)

等待最佳答案，因为我已经提供了帐户选择功能。

# excel - Excel 单元格格式 - XSSF 工作簿

> ID：14278198
> 
> 赞同：4
> 
> 时间：2013-01-11T12:26:54.147
> 
> 标签：excel, coldfusion, xssf

到目前为止，这是我的代码，它从查询中获取数据，然后将其导出到 Excel 文档中：

```
<cfscript>
  oArray = CreateObject("java", "java.util.Arrays");
  workbook = CreateObject("java", "org.apache.poi.xssf.usermodel.XSSFWorkbook");
  workbook.init();

  myFont = workbook.createFont();
  myFont.setBoldweight(myFont.BOLDWEIGHT_BOLD);

  boldStyle = workbook.createCellStyle();
  boldStyle.setFont(myFont);
</cfscript>

<!--- Set up the headings for the Excel worksheet --->
  <cfscript>
    thisSheet = workbook.createSheet(JavaCast("string", 'invoices due'));
    rows = {};
    // we need to refer to these three rows later on
    rows[1] = thisSheet.createRow(0);
    rows[2] = thisSheet.createRow(1);
    rows[3] = thisSheet.createRow(2);
    rows[4] = thisSheet.createRow(3);

    //Report parameters explanation
    thisCell = rows[2].createCell(0, 1);
    thisCell.setCellValue(reportSum);

    // user column headings
    thisCell = rows[4].createCell(0, 1);
    thisCell.setCellValue('Value');
    thisCell.setCellStyle(boldStyle);
    thisCell = rows[4].createCell(1, 1);
    thisCell.setCellValue('Team');
    thisCell.setCellStyle(boldStyle);
    thisCell = rows[4].createCell(2, 1);
    thisCell.setCellValue('Manager');
    thisCell.setCellStyle(boldStyle);
  </cfscript>

<cfset row = 5>
<cfloop query="invoicesDue">

<cfscript>
   thisRow = thisSheet.createRow(JavaCast("int", row));
   thisCell = thisRow.createCell(0, 1);
   thisCell.setCellValue(HTMLEditFormat(invoicesDue.value));
   thisCell = thisRow.createCell(1, 1);
   thisCell.setCellValue(HTMLEditFormat(invoicesDue.ct_team));
   thisCell = thisRow.createCell(2, 1);
   thisCell.setCellValue(HTMLEditFormat(invoicesDue.manager));
   thisCell = thisRow.createCell(3, 1);  
 </cfscript>
 </cfloop>

<cfscript>
 // todo: change to datadir from getAppRoot
 outputFileName = "invoicesDue(withfundingsource)" & "_" & RandRange(00000,99999) & ".xlsx";
 fos = CreateObject("java", "java.io.FileOutputStream");
 fos.init(outputFilename);
 workbook.write(fos);
 fos.close();
</cfscript> 
```

我要做的是将标题为“值”的列格式化为 Excel 中的数据格式“会计”。我做过研究，但我很困惑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:02:41.550

我要做的是在 Excel 中创建一个文件。将“会计”格式应用于其中一个单元格。然后在 POI 中检查单元格的[样式/数据格式：](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/CellStyle.html#getDataFormat%28%29)

```
 dataFormatIndex = theAccountingCell.getCellStyle().getDataFormat(); 
```

在我的测试中，POI 报告“会计”格式为 BuiltInFormat `44`。您可以像这样应用它：

```
 accountingStyle = workbook.createCellStyle();
    accountingStyle.setDataFormat( javacast("int", 44) ) ;

    someRow  = someSheet.createRow(0);
    someCell = someRow.createCell(0);
    someCell.setCellStyle( accountingStyle );  
    someCell.setCellValue( javacast("double", 123.75) ); 
```

要查看所有[BuiltInFormat](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/BuiltinFormats.html)值：

```
 formats = createObject("java", "org.apache.poi.ss.usermodel.BuiltinFormats");
 writeDump(formats.getAll()); 
```

# scala - 定义协变和逆变类型的错误

> ID：14278203
> 
> 赞同：5
> 
> 时间：2013-01-11T12:27:12.580
> 
> 标签：scala

我有代码：

```
class A {
    override def toString = "object class A"
}

class B extends A {
    override def toString = "object class B"
}

class Cell[+T](init: T) {
    private[this] var current: T = init
    def get: T = current
    def set(x: T) { current = x }
}

val cB = new Cell[B](new B)
println(cB.get)
val cA: Cell[A] = cB
println(cA.get) 
```

但我有错误：`def set(x: T) { current = x }`

> 错误：协变类型 T 出现在值 x def set(x: T) { current = x } 的类型 T 的逆变位置

请解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:32:42.170

类型的逆变位置是（除其他外）允许您将该类型的实例传递给方法的任何位置。所以所有方法参数类型都处于逆变位置。由于您将 T 声明为协变 ( `+T`)，因此编译器将不允许这样做。您唯一的选择是：

*   使`T`不变
*   修改 set 方法，使其返回一个新的实例，`Cell`从而`Cell`变得不可变。
*   删除 set 方法，也使`Cell`不可变

如果编译器允许您在实现时使用 set 方法，那将使类型系统不安全，因为它允许您编写：

```
val cs:Cell[String] = new Cell("")
val ca:Cell[Any] = cs
ca.set(5)
val s:String = cs.get //boom 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T12:35:09.237

简短的回答是你不能有一个协变的可变容器。假设这是编译的，那么在您的示例中，最后两行可以读取：

```
val cA: Call[A] = cB
cA.set(new A) 
```

第一行是允许的，因为 a是`Cell[B]` *由于*`Cell[A]`使用`+T`. 然后第二行也被允许 - 因为当然你可以设置 a`Cell[A]`来保存一个`A`.

但是现在，`cB.get`返回一个实例`A`，而不是一个`B`！这没有任何意义，也没有办法解决这个矛盾，同时仍然允许 Cell 的类型参数存在协变。

* * *

如需更长、更正式/更全面的答案，请参阅以下问题：[Scala covariance/contravariance](https://stackoverflow.com/questions/663254/scala-covariance-contravariance-question)

# macos - NSImage 在拖动操作之间“保留”

> ID：14278207
> 
> 赞同：2
> 
> 时间：2013-01-11T12:27:42.957
> 
> 标签：macos, cocoa, drag-and-drop, nstableview

嗨我已经实施：

```
- (NSImage *)dragImageForRowsWithIndexes:(NSIndexSet *)dragRows tableColumns:(NSArray *)tableColumns event:(NSEvent *)dragEvent offset:(NSPointPointer)dragImageOffset
{
    NSImage *dragImage = [NSImage imageNamed:@"Drag-Icon.png"];
    NSInteger numberOfItems = dragRows.count;
    NSAttributedString *numbers = [[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"%lu",numberOfItems] attributes:attributes];
    [dragImage lockFocus];
    NSRect numbersSurroundRect = NSMakeRect(dragImage.size.width - (numbers.size.width + 15) - strokeWidth - 5, strokeWidth, numbers.size.width + 15, boxHeight);
    NSBezierPath *circle = [NSBezierPath bezierPathWithRoundedRect:numbersSurroundRect xRadius:9.0 yRadius:9.0];
    [[NSColor redColor] set];
    [circle fill];
    [[NSColor whiteColor] set];
    [circle setLineWidth:strokeWidth];
    [circle stroke];
    numbersSurroundRect.origin.y += ((numbersSurroundRect.size.height - numbers.size.height) + 1.75);
    [numbers drawInRect:numbersSurroundRect];
    [dragImage unlockFocus];
    return dragImage;
} 
```

在我的 NSTableView 子类中，当我在表中拖动多行时，我得到：

![在此处输入图像描述](../Images/aa68f00e81a9b512aba49e654643e1a7.png)

然后，当我只拖动 1 或 2 行时，我得到：

![在此处输入图像描述](../Images/d4bfa48e68f1a0af4c3722d02013fa17.png)

似乎返回了旧的行数，然后在其上绘制了新的行数....

任何人都可以对此有所了解吗？这是在我的项目中使用 ARC 的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:03:00.487

您正在直接在原始图像上绘图。您应该在绘制之前制作副本，以便下次可以在新副本上绘制。

# c# - 使图像的 ObservableCollection 在屏幕上显示得很好

> ID：14278215
> 
> 赞同：1
> 
> 时间：2013-01-11T12:27:59.840
> 
> 标签：c#, windows, xaml, microsoft-metro

我有一个填充 ObservableCollection 的方法。这个 ObservableCollection 绑定到我的 XAML，并出现在屏幕上。然而，目前它只是向下延伸，一个接一个的图像，如下所示： ![如您所见，在 3 张图像之后，它不再显示并在中途切断图像。](../Images/53d9e8ebda42d491cca282729fcc55b6.png)

我希望图像以网格方式显示，例如每行 5 个，允许用户向下滚动。我怎么能做到这一点？我想要的一个例子：

![来自谷歌图片。 使用静态数量的图像，这很容易实现，绑定到 ObservableCollectiout，但是，我迷路了。](../Images/306b95197ce0ed70169896e645a43bc9.png)

据我了解，向下扩展可能不被视为“Metro”/“Windows 8 应用程序样式”，如果是这样，我将如何模拟图像中显示的功能，以便溢出向右延伸，让您继续向右滚动？

我目前的代码：

```
 <ItemsControl ItemsSource="{Binding Path=listOfImages}"
      HorizontalContentAlignment="Stretch">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel VerticalAlignment="Center">
                        <Image x:Name="images" Source="{Binding}" Visibility="Visible" Stretch="Fill" Width="200" Height="200"/>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

更新 ：

我现在添加了一个 WrapGrid，但它仍然呈现不正确，如下所示：

![我现在添加了一个 WrapGrid，但它仍然呈现不正确，就像这样](../Images/f8f8f81b44f1dee477130db8133f21d8.png)

这是我正在使用的代码：

```
 <ItemsControl ItemsSource="{Binding Path=listOfImages}" Grid.Column="1" Grid.Row="3" Grid.ColumnSpan="5"
              HorizontalContentAlignment="Stretch">
                    <ListView Height="Auto" Width="Auto">
                            <ItemsPanelTemplate>
                                <WrapGrid Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Center" Orientation="Horizontal">
                                    <Image x:Name="images" Source="{Binding}" Visibility="Visible" Stretch="Fill" Width="200" Height="200"/>
                                </WrapGrid>
                            </ItemsPanelTemplate>
                    </ListView>
                </ItemsControl> 
```

我在这里误解了什么？非常感谢。

更新 ：

简单的代码：

```
 <ItemsControl ItemsSource="{Binding Path=listOfImages}">
                                <WrapGrid Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4" VerticalAlignment="Center" Orientation="Horizontal">
                                    <Image x:Name="images" Source="{Binding}" Visibility="Visible" Stretch="Fill" Width="200" Height="200"/>
                                </WrapGrid>
                  </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:30:42.980

您可以将 a`WrapPanel`与[`Orientation`](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.orientation.aspx)set to 一起使用`Orientation.Vertical`。

像这样，它将首先填充第一列，溢出到第二列，依此类推，向右延伸。

另请参阅文档：

> 如果 Orientation 属性设置为 Horizo​​ntal，则子内容首先形成水平行，如有必要，形成垂直的行堆栈。如果将 Orientation 属性设置为 Vertical，则子内容首先位于垂直列中，如果空间不足，则会发生换行并添加水平维度中的附加列。

* * *

您使用的`WrapGrid`有点奇怪。看起来你必须像这样使用它：

```
<ItemsControl ItemsSource="{Binding Path=listOfImages}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid VerticalAlignment="Center" Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Image Visibility="Visible" Stretch="Fill" Width="200" Height="200"
                   Source="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# java - 我可以ping我的本地主机但我不能用其他IP地址

> ID：14278218
> 
> 赞同：-1
> 
> 时间：2013-01-11T12:28:11.287
> 
> 标签：java, udp, ping

我这里有一个 UDP ping 客户端。我不知道我是否做对了，但我认为如果我设置`127.0.0.1`为 IP 地址它会起作用。但如果我将其设置为例如 Google 的 IP 地址，则不会。我得到一个例外： `java.net.SocketTimeoutException: Receive timed out` .

```
import java.io.*;
import java.net.*;
import java.util.*;

public class PingClient {

    private static final int AVERAGE_DELAY = 0;
    public static void main(String[] args) throws Exception    {
        int port = 4997;
        DatagramSocket socket = new DatagramSocket(port);

        for(int i=1;i<=10;i++) {
            byte[] buf = new byte[1024] ;
            Calendar cal=Calendar.getInstance();
            String ping="PING "+ i +" "+cal.getTimeInMillis()+" ms"+"\r\n";
            buf=ping.getBytes("UTF-8");
            InetAddress address = InetAddress.getByName("69.63.176.11");
            DatagramPacket packet = new DatagramPacket(buf, buf.length, address, port);
            packet.setData(buf);
            socket.send(packet);
            Thread.sleep( 10* AVERAGE_DELAY);
            DatagramPacket server_response = new DatagramPacket(new byte[1024], 1024);
            socket.setSoTimeout(1000);
            socket.receive(server_response);
            printData(server_response);
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:35:33.273

Ping是互联网时代有趣的恐龙。

不幸的是，您没有指定您在哪个平台上。在 Windows 平台上，127.0.0.1（即 localhost 地址）不会通过实际的网络适配器进行路由。Microsoft 已优化 localhost 路由以通过堆栈的不同部分，因此无论网络连接如何，它都可以一直工作。

在基于 Unix 的主机上，您将能够使用网络嗅探器查看进入“lo”或环回接口的数据包。无论互联网连接如何，这些都将起作用。

Ping 是一个非常古老的协议，它使用 ICMP 协议。我相信这实际上是一个向下的层，或者可能与 UDP 位于同一网络层，但它不是 UDP 消息。

正如另一位成员对这个问题所评论的那样 - 如果您发送到的端口上没有任何东西在监听，那么您正在编写的客户端将会失败。

有关“ping”命令的作用的更多信息，请参阅[此内容。](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)

**编辑以获取更多信息** 我想我看到了问题 - 播放客户端中有两个不同的端口号正在端口 4997 上创建套接字，服务器正在端口 8117 上创建套接字。这似乎是不匹配的一部分。

我做了一个快速的谷歌搜索，它可能会为你指明正确的方向。有关更多信息，请参阅[本文](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/)。

我已经很多年没有编写 TCP/UDP 级别的东西了，所以很抱歉我不能提供更多的实质性信息。

# google-app-engine - 如何在 MapReduce 作业中创建具有父键或字符串 ID 的新实体？

> ID：14278219
> 
> 赞同：3
> 
> 时间：2013-01-11T12:28:11.760
> 
> 标签：google-app-engine, mapreduce, app-engine-ndb

我想`parent key`在一些使用 MapReduce 的实体中添加一个。如果我理解正确，我不能因为密钥不可编辑。但是，如果我尝试使用以下代码为每个实体创建一个新实体：

```
a = Analisi(parent=new.key,
            computo=cme.key,
            voce=new.key)
a.put() 
```

我得到这个错误：`Analisi() got an unexpected keyword argument 'parent'`。如果我尝试分配一个字符串 ID，同样的事情。我错过了什么？

更新：

```
class Analisi(ndb.Model):
    computo = ndb.KeyProperty(kind=ComputoMetrico)
    voce = ndb.KeyProperty(kind=VoceComputo) 
```

如果我切换到 Expando，我不会收到以下错误，但 Mapreduce 创建了一个名为“父”的属性。似乎 MapReduce 无法管理 ndb 键类实例。我在处理程序中使用`mapreduce.input_readers.DatastoreKeyInputReader`并转换为 ndb with`from_old_key()`方法：始终工作，除非它必须创建新的 ndb 键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:59:13.393

如果您查看 ndb 模型的文档，您会发现 ndb.Model 构造函数使用的语法与 db.Model 不同。要为 ndb.Model 创建祖先路径，请使用关键字“key”和构建祖先路径的 ndb.Key。例如：

```
ekey= ndb.Key(pairs=[('kind1','id1')('kind2', 'id2')...('entity kind','entityid')])
a = Analisi(key=ekey,
        computo=cme.key,
        voce=new.key) 
```

# ruby - 与 Ruby 中的 -T、-F、-K、-i 命令行选项混淆

> ID：14278222
> 
> 赞同：0
> 
> 时间：2013-01-11T12:28:27.190
> 
> 标签：ruby, ruby-1.9

你能帮我理解以下选项在现实生活中是如何工作的吗？

*   `-T [level]`
*   `-K [kcode]`
*   `-F pat`
*   `-i [ext]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:08:08.183

我找到了以下[资源](http://www.phrogz.net/ProgrammingRuby/rubyworld.html)，这可能对您有所帮助，在对您的问题进行了真正的快速破解后，我将只从页面中引用来回答您的问题。

-T 选项与您的 Ruby 脚本的安全级别有关，而 -k 指使用的字符代码集。-F 用于模式匹配，最后，-i 用于编辑代码的参数。我现在将引用相关部分为您提供更多信息：

-T[level} 设置安全级别，其中包括启用污染检查.. 这基本上是一个带有几个选项的安全级别，请[参阅](http://www.phrogz.net/ProgrammingRuby/taint.html#lockingrubyinthesafe)

```
0    No checking of the use of externally supplied (tainted) data is performed. This
     is Ruby's default mode.
>= 1 Ruby disallows the use of tainted data by potentially dangerous operations.
>= 2 Ruby prohibits the loading of program files from globally writable locations.
>= 3 All newly created objects are considered tainted.
>= 4 Ruby effectively partitions the running program in two. Nontainted objects may not 
     be modified. Typically, this will be used to create a sandbox: the program sets up 
     an environment using a lower$SAFE level, then resets $SAFE to 4 to prevent 
     subsequent changes to that environment. 
```

-K kcode 指定要使用的代码集。此选项主要在使用 Ruby 进行日语处理时很有用。kcode 可以是以下之一： e、E 代表 EUC；s, S 代表 SJIS；u, U 表示 UTF-8；或 a, A, n, N 表示 ASCII。

-F 模式 指定用作 split() 的默认值的输入字段分隔符 ($;)（影响 -a）。

-i [extension} 就地编辑 ARGV 文件。对于在 ARGV 中命名的每个文件，您写入标准输出的任何内容都将作为该文件的内容保存回来。如果提供了扩展名，将制作文件的备份副本。

希望有点帮助。干杯！

# cryptography - 密文是否可以包含实际的明文输入

> ID：14278235
> 
> 赞同：0
> 
> 时间：2013-01-11T12:29:04.387
> 
> 标签：cryptography, plaintext

任何常用的对称或非对称算法是否有可能允许任何输入明文加密为包含实际明文输入的密文？就像本质上没有加密的病态案例一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:33:04.520

可能吗？是的。但这**极**不可能。

没有密码算法（几乎自二战中的 Enigma 以来，这是让 Bletchley 公园的英国和波兰密码学家解密其大量传输的关键弱点之一）保证`A`将加密到`A`. 与或任何其他有效的替代方案一样`A->A`可能。同样有可能产生这个堆栈溢出答案或独立宣言，因为它是原始明文，所以你在这样的密文中看到的任何清晰的东西都不能被视为“通过”，这只是随机的机会。`A->B``A->C`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:33:30.360

这取决于使用的密码模式。对于欧洲央行模式 - 不太可能。但是对于 CBC 或 CTR，明文与加密 IV 异或，加密 IV 中的某些字节可以为零，并且在异或后密文将包含与明文相同的字节。

更新：经过一些测试（见评论）得到输出中的字节与输入中的字节相同，概率（接近）1/256，即如果输出是随机的，则概率几乎相同。

# c# - 当 id 具有文件扩展名时，ASP.NET MVC 4 路由不起作用

> ID：14278237
> 
> 赞同：9
> 
> 时间：2013-01-11T12:29:15.993
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, routing

在 MVC 3 中我没有问题，但现在我已经去了 MVC 4。

URL 如下所示：

```
{controller}/{action}/{id}

/podcast/file/PODCAST-01.MP4 
```

其中 PODCAST-01.MP4 是 id；当它到达控制器时，控制器会将文件发送给客户端，这样做是为了让我们可以轻松计算有多少人下载了该文件。

但是，现在，Web 服务器认为那里应该有一个文件并给出 404 错误。我试图通过制作自己的 404 错误页面然后使用 /podcast/file?id=PODCAST-01.MP4 重定向回来来解决这个问题，但这不起作用，因为 iTunes 不喜欢它，它不喜欢这 ”？”。

我尝试创建一条新路线：

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}.{format}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, format = UrlParameter.Optional }); 
```

但这似乎刚刚破坏了路由。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-10T07:45:59.970

你可以这样做。在 MVC 4 解决方案中，Web 配置包含：

```
<add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
<add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" /> 
```

您只需在这些之前为您的路径添加一个新的处理程序

```
<add name="ManagedFileWithExtension" path="podcast/file*" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:54:50.930

你不能这样做（我认为）你必须在分析请求的代码中保留后缀。

# javascript - EJS 模板 .render() 返回函数而不是 HTML

> ID：14278238
> 
> 赞同：1
> 
> 时间：2013-01-11T12:29:17.600
> 
> 标签：javascript, templates, ejs

我有一个 EJS 模板，我试图用[EJS](http://embeddedjs.com/)渲染：

```
new EJS({url: "assets/modules/templates/channel_filter.ejs"}).render(); 
```

我没有返回模板内容，而是得到了一个字符串化函数：

```
function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('
\n
\n Click channels to remove from results\n
\n
\n All Off\n All On\n
\n
\n
\n\n
\n
\n Apply\n Cancel\n
\n');}return __p.join('');} 
```

视图由基于 AMD 的 javascript (require.js) 渲染，服务器端系统是 Rails。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:17:21.500

原来这是因为 rails 资产管道试图解释文件。

# vb.net - x86 程序想要访问 AnyCpu 而不是 x86

> ID：14278240
> 
> 赞同：0
> 
> 时间：2013-01-11T12:29:25.717
> 
> 标签：vb.net, ms-access, x86, anycpu, subproject

我对 AnyCPU vs x86 编译器设置有一些问题，但如果我理解正确，我的问题似乎与通常情况相反。

目前，一切都驻留在装有 Visual Studio 2010 的 Win 7 64 位机器上。有问题的应用程序是 Dot.NET 3.5。Visual Studio 是英文的，但部​​分错误是德文，这是操作系统的语言。

项目 E：主要项目/解决方案，包括 3 个子项目，2 个作为 DLL，1 个作为 exe。VB.net 3.5，编译为 x86，因为它需要 OleDB 才能访问。最初是在 WinXP 的 32 位机器上的 VS 2008 甚至 VS 2005 上开始的。

项目 ADB：vb.net exe，需要可以独立启动，我需要能够从项目 E 访问表单。这是作为一个单独的项目开始的，我在 VS 2010 中是 Dot.Net 4.0，但是如果相关的话，我认为它仍然在 32 位机器/WinXP 上。
需要 OledDB 到 MS Access，所以独立的 exe 需要是 x86。
但是，如果我将其编译为 x86（项目属性 > 编译 > 高级编译选项）作为解决方案的一部分，则会出现构建错误（见下文）。如果我更改为 AnyCPU，它可以作为解决方案的一部分，包括访问 OleDB（这应该意味着它是 x86，对吗？），但是独立的不能再使用 OleDB（这意味着它不是 x86，对吗？） .

Project Au：vb.net DLL，包含在E的引用中，不需要OleDB。如果编译为 x86，我会得到与项目 ADB 相同的错误。如果编译为 AnyCPU，则可以工作。在 32 位机器上被添加到 VS 2008 中。

项目 S：C# DLL，不需要 OleDB。编译为 x86 并包含在 E 的参考资料中，这是可行的。是从网上下载的，在32位机器上添加到VS 2008中。

构建错误如下：
Die Datei oder Assembly "file:///X:/Entw/E/VB.net/ADB/bin/Debug/ADB.exe" oder eine Abhängigkeit davon wurde nicht gefunden。Es wurde versucht, eine Datei mit einem falschen Format zu laden。
已翻译：
无法加载文件或程序集“XYZ”或其依赖项之一。试图加载格式不正确的程序。

我在将 ADB 作为 AnyCPU 独立启动时遇到的 OleDb 错误如下：
Der 'Microsoft.Jet.OLEDB.4.0'-Provider ist nicht auf dem lokalen Computer registriert。
这是通常的非 64 位 JET 错误警告：
“Microsoft.Jet.OLEDB.4.0”提供程序未在本地计算机上注册。

现在，据我了解，通常如果主项目是 AnyCPU 而子项目是特定的，我会收到构建错误，因为它会尝试从 AnyCPU 访问 x86，在这种情况下是 x64。但是在这里我尝试从 x86 访问 x86 不起作用，但是从 x86 访问 AnyCpu（应该是 x64）有效吗？

如有必要，我可以提供更多信息和所有配置文件等。

如果我写得混乱，我很抱歉，但我对这个问题非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:58:37.900

您应该[避免使用该`AnyCPU`](http://blogs.msdn.com/b/rmbyers/archive/2009/06/09/anycpu-exes-are-usually-more-trouble-then-they-re-worth.aspx)设置。

但我猜您的解决方案配置不正确。在 Visual Studio 2010 中，右键单击解决方案，然后单击“属性”（“Eigenschaften”）。选择“配置属性”（“Konfigurationseingenschaften”）并确保所有项目都将构建为`x86`.

如果您计划提供 64 位版本的应用程序，我建议创建不同的构建配置文件。您可以通过单击解决方案属性中的“配置管理器”来执行此操作。在“Active Platform Configuration”下选择“<New...>”，选择“x64”，从“x86”复制设置并启用“Create new project platforms”。然后浏览列表并确保所有项目都在此配置中构建为 x64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:16:57.577

好的，我现在找到了。问题是错误消息并没有真正的帮助。

挖掘输出发现这是特定表单上的 resgen.exe 的问题。
更多在 Google 和 VS 命令行中的挖掘显示它以某种方式试图获取错误的 System.Forms.dll： [http ://connect.microsoft.com/VisualStudio/feedback/details/532584/error-when-compiling-resx-file -seems-related-to-beta2-bug-5252020](http://connect.microsoft.com/VisualStudio/feedback/details/532584/error-when-compiling-resx-file-seems-related-to-beta2-bug-5252020)并意识到是的，我在该表单上使用了 ImageList。

# spring - 如何在 Spring 的 Controller 方法中使用 Hibernate

> ID：14278246
> 
> 赞同：1
> 
> 时间：2013-01-11T12:29:46.747
> 
> 标签：spring, hibernate, model-view-controller, servlets, controller

我使用 STS 创建了一个新的 MVC 模板项目，并添加了所有依赖项以支持 Hibernate。

这是我的 root-context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xsi:schemaLocation="
http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

<jdbc:embedded-database id="dataSource" type="H2"> 
    <jdbc:script location="classpath:schema.sql"/> 
    <jdbc:script location="classpath:test-data.sql"/> 
</jdbc:embedded-database>   

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="contactDao" class="com.server.dao.impl.ContactDaoImpl">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.server.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
            <prop key="hibernate.max_fetch_depth">3</prop>
            <prop key="hibernate.jdbc.fetch_size">50</prop>
            <prop key="hibernate.jdbc.batch_size">10</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean> 
```

STS 自动创建一个名为 HomeController.java 的示例控制器：

```
@Controller
public class HomeController {

private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );

    return "home";
 } 
```

我想当 Web 应用程序在服务器上启动时，在 root-context.xml 中声明的 bean 会由框架自动实例化。

我的问题是：如何获得对 ContactDao 对象实例的引用？那就是：如何对我的数据库执行操作？

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:15:02.473

您需要`ContactDao`使用注释注入控制器：

```
@Autowired 
public void setContactDao(ContactDao contactDao) {
    ...
} 
```

使用接口（我猜它是 ContactDao），这样您就可以更改实现（可能对测试有用）。

现在您可以使用您的联系人 DAO 方法使用`contactDao`对象。

有关自动装配的更多信息，请参阅[http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-autowire](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-autowire)

# c# - 找到一个值正下方的浮点数

> ID：14278248
> 
> 赞同：9
> 
> 时间：2013-01-11T12:29:57.533
> 
> 标签：c#, floating-point

假设我有一个浮点数 X。我想找到小于 X 并且可以无损存储在浮点数中的最大数。

IIRC IEEE 标准说，您可以通过将浮点数的位转换为 int 表示、减一并转换回浮点数来实现这一点。

（*编辑：*这对于非 NaN 或 inf 的正数是正确的。对于负数，您必须添加。有关更多信息，请参阅[Rawling 的答案](https://stackoverflow.com/a/14278361/11801)。）

要在表示之间进行更改，我只知道 C# 的 (cast) 运算符，它会截断。那不是我想要的。

有没有办法在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T12:36:53.383

以下是您如何简单地将 a`float`变成 a `int`，对其进行更改，然后将其重新变成 a 的方法`float`：

```
float myFloat = 10.3f;
// Get the bytes making up the float
byte[] bytes = BitConverter.GetBytes(myFloat);
// Make an int out of them
int myInt = BitConverter.ToInt32(bytes, 0);
// Change it
myInt--;
// Get the bytes making up the int
bytes = BitConverter.GetBytes(myInt);
// Make a float out of them
myFloat = BitConverter.ToSingle(bytes, 0);
// gives 10.2999992 or so 
```

`BitConverter`甚至为 64 位等价物内置了这个：

```
double myDouble = 10.3;
long myLong = BitConverter.DoubleToInt64Bits(myDouble);
myLong--;
myDouble = BitConverter.Int64BitsToDouble(myLong); // gives 10.2999999... 
```

然而，正如[Peter Ruderman](https://stackoverflow.com/users/114421/peter-ruderman)指出的那样，简单的底层证券递减`int`并不能可靠地为您提供下一个最小的`float`.

特别是，对于负数，您需要*增加*整数以使浮点数*更负*。对于`float`零，下一个最小值`int`实际上对应于`NaN`，因此您需要一个特殊情况。

以下是我拼凑起来的几个函数，它们通常可以应对这些情况；它看起来也很明智地在大数和正/负无穷大之间移动！我使用了不安全的转换来减少代码长度，但如果你愿意，你可以坚持上面的字节转换：

```
static unsafe float Increment(float f)
{
    int val = *(int*)&f;
    if (f > 0)
        val++;
    else if (f < 0)
        val--;
    else if (f == 0)
        return float.Epsilon;
    return *(float*)&val;
}
static unsafe float Decrement(float f)
{
    int val = *(int*)&f;
    if (f > 0)
        val--;
    else if (f < 0)
        val++;
    else if (f == 0)
        return -float.Epsilon; // thanks to Sebastian Negraszus
    return *(float*)&val;
} 
```

正如[Jeppe](https://stackoverflow.com/users/1336654/jeppe-stig-nielsen)指出的那样，您可能还想

*   以 开始每个函数`if (float.IsNaN(f)) return f;`，这样您就不会意外地递增或递减 a`NaN`并给出一个数字。
*   还要考虑对照`float.PositiveInfinity`or检查输入`.NegativeInfinity`，因为从数学上讲，这些应该在递增/递减下保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:16:17.743

为此有一个库例程，`nexttowardf(x, -INFINITY);`.

如果您想使用自己的代码执行此操作，您可以本机执行（在 IEEE 754 浮点运算中，无需访问浮点编码或组件），如下所示（在 C 中）。

提供了两种版本，一种在每种情况下都使用次正规值（在某些处理器上可能很慢），另一种仅在输入很小时才使用次正规值（但它有一个分支）。+INFINITY 不支持作为输入，尽管可以通过简单的测试添加支持。这是为 编写的`double`，但对 的更改`float`很简单。

如果`CompileMain`定义了，它还包括一个测试程序。

```
#include <float.h>
#include <math.h>

/*  Return the next floating-point value before the finite value q.

    This was inspired by Algorithm 3.5 in Siegfried M. Rump, Takeshi Ogita, and
    Shin'ichi Oishi, "Accurate Floating-Point Summation", _Technical Report
    05.12_, Faculty for Information and Communication Sciences, Hamburg
    University of Technology, November 13, 2005.
*/
double NextBefore(double q)
{
    // SmallestPositive is the smallest positive floating-point number.
    static const double SmallestPositive = DBL_EPSILON * DBL_MIN;

    /*  Scale is .625 ULP, so multiplying it by any significand in [1, 2)
        yields something in [.625 ULP, 1.25 ULP].
    */
    static const double Scale = 0.625 * DBL_EPSILON;

#if 0
    /*  This version has a branch but uses subnormal values only if q is so
        small that q * Scale is subnormal.
    */
    double increment = fabs(q)*Scale;

    if (0\. == increment)
        return q - SmallestPositive;

    return q - increment;
#else
    /*  This version uses a subnormal, SmallestPositive, in each case.
        This might cause poor performance on some processors.
    */
    return q - fmax(SmallestPositive, fabs(q)*Scale);
#endif
}

#if defined CompileMain

#include <stdio.h>
#include <stdlib.h>

#define NumberOf(a) (sizeof (a) / sizeof *(a))

int main(void)
{
    int status = EXIT_SUCCESS;

    static const struct { double in, out; } cases[] =
    {
        { -INFINITY,                -INFINITY                },
        { -0x1.fffffffffffffp1023,  -INFINITY                },
        { -0x1.ffffffffffffep1023,  -0x1.fffffffffffffp1023  },
        { -0x1.ffffffffffffdp1023,  -0x1.ffffffffffffep1023  },
        { -0x1.ffffffffffffcp1023,  -0x1.ffffffffffffdp1023  },
        { -0x1.0000000000003p1023,  -0x1.0000000000004p1023  },
        { -0x1.0000000000002p1023,  -0x1.0000000000003p1023  },
        { -0x1.0000000000001p1023,  -0x1.0000000000002p1023  },
        { -0x1.0000000000000p1023,  -0x1.0000000000001p1023  },

        { -0x1.fffffffffffffp1022,  -0x1.0000000000000p1023  },

        { -0x1.fffffffffffffp1,     -0x1.0000000000000p2     },
        { -0x1.ffffffffffffep1,     -0x1.fffffffffffffp1     },
        { -0x1.ffffffffffffdp1,     -0x1.ffffffffffffep1     },
        { -0x1.ffffffffffffcp1,     -0x1.ffffffffffffdp1     },
        { -0x1.0000000000003p1,     -0x1.0000000000004p1     },
        { -0x1.0000000000002p1,     -0x1.0000000000003p1     },
        { -0x1.0000000000001p1,     -0x1.0000000000002p1     },
        { -0x1.0000000000000p1,     -0x1.0000000000001p1     },

        { -0x1.fffffffffffffp-1022, -0x1.0000000000000p-1021 },
        { -0x1.ffffffffffffep-1022, -0x1.fffffffffffffp-1022 },
        { -0x1.ffffffffffffdp-1022, -0x1.ffffffffffffep-1022 },
        { -0x1.ffffffffffffcp-1022, -0x1.ffffffffffffdp-1022 },
        { -0x1.0000000000003p-1022, -0x1.0000000000004p-1022 },
        { -0x1.0000000000002p-1022, -0x1.0000000000003p-1022 },
        { -0x1.0000000000001p-1022, -0x1.0000000000002p-1022 },
        { -0x1.0000000000000p-1022, -0x1.0000000000001p-1022 },

        { -0x0.fffffffffffffp-1022, -0x1.0000000000000p-1022 },
        { -0x0.ffffffffffffep-1022, -0x0.fffffffffffffp-1022 },
        { -0x0.ffffffffffffdp-1022, -0x0.ffffffffffffep-1022 },
        { -0x0.ffffffffffffcp-1022, -0x0.ffffffffffffdp-1022 },
        { -0x0.0000000000003p-1022, -0x0.0000000000004p-1022 },
        { -0x0.0000000000002p-1022, -0x0.0000000000003p-1022 },
        { -0x0.0000000000001p-1022, -0x0.0000000000002p-1022 },
        { -0x0.0000000000000p-1022, -0x0.0000000000001p-1022 },

        { +0x1.fffffffffffffp1023,  +0x1.ffffffffffffep1023  },
        { +0x1.ffffffffffffep1023,  +0x1.ffffffffffffdp1023  },
        { +0x1.ffffffffffffdp1023,  +0x1.ffffffffffffcp1023  },
        { +0x1.0000000000004p1023,  +0x1.0000000000003p1023  },
        { +0x1.0000000000003p1023,  +0x1.0000000000002p1023  },
        { +0x1.0000000000002p1023,  +0x1.0000000000001p1023  },
        { +0x1.0000000000001p1023,  +0x1.0000000000000p1023  },

        { +0x1.0000000000000p1023,  +0x1.fffffffffffffp1022  },

        { +0x1.0000000000000p2,     +0x1.fffffffffffffp1     },
        { +0x1.fffffffffffffp1,     +0x1.ffffffffffffep1     },
        { +0x1.ffffffffffffep1,     +0x1.ffffffffffffdp1     },
        { +0x1.ffffffffffffdp1,     +0x1.ffffffffffffcp1     },
        { +0x1.0000000000004p1,     +0x1.0000000000003p1     },
        { +0x1.0000000000003p1,     +0x1.0000000000002p1     },
        { +0x1.0000000000002p1,     +0x1.0000000000001p1     },
        { +0x1.0000000000001p1,     +0x1.0000000000000p1     },

        { +0x1.0000000000000p-1021, +0x1.fffffffffffffp-1022 },
        { +0x1.fffffffffffffp-1022, +0x1.ffffffffffffep-1022 },
        { +0x1.ffffffffffffep-1022, +0x1.ffffffffffffdp-1022 },
        { +0x1.ffffffffffffdp-1022, +0x1.ffffffffffffcp-1022 },
        { +0x1.0000000000004p-1022, +0x1.0000000000003p-1022 },
        { +0x1.0000000000003p-1022, +0x1.0000000000002p-1022 },
        { +0x1.0000000000002p-1022, +0x1.0000000000001p-1022 },
        { +0x1.0000000000001p-1022, +0x1.0000000000000p-1022 },

        { +0x1.0000000000000p-1022, +0x0.fffffffffffffp-1022 },
        { +0x0.fffffffffffffp-1022, +0x0.ffffffffffffep-1022 },
        { +0x0.ffffffffffffep-1022, +0x0.ffffffffffffdp-1022 },
        { +0x0.ffffffffffffdp-1022, +0x0.ffffffffffffcp-1022 },
        { +0x0.0000000000004p-1022, +0x0.0000000000003p-1022 },
        { +0x0.0000000000003p-1022, +0x0.0000000000002p-1022 },
        { +0x0.0000000000002p-1022, +0x0.0000000000001p-1022 },
        { +0x0.0000000000001p-1022, +0x0.0000000000000p-1022 },
    };

    for (int i = 0; i < NumberOf(cases); ++i)
    {
        double in = cases[i].in, expected = cases[i].out;
        double observed = NextBefore(in);
        printf("NextBefore(%a) = %a.\n", in, observed);
        if (! (observed == expected))
        {
            printf("\tError, expected %a.\n", expected);
            status = EXIT_FAILURE;
        }
    }

    return status;
}

#endif  // defined CompileMain 
```

# php - 包括问题 我有两个带有路径的文件： /reader.php /ebook/titlepage.xhtml 我计划让读者最终阅读电子书 toc.ncx 并能够将其显示在左侧窗格中以便于导航。但是现在，我要做的就是解决显示 xhtml 文件的问题。 电子书标题页的开头如下 问问题 问问题 2013-01-11T12:30:16.223 156 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有两个带有路径的文件： /reader.php /ebook/titlepage.xhtml 我计划让读者最终阅读电子书 toc.ncx 并能够将其显示在左侧窗格中以便于导航。但是现在，我要做的就是解决显示 xhtml 文件的问题。 电子书标题页的开头如下： 问题是当我使用 include(/ebook/titlepage.xhtml); 我得到了意外的版本 T_String 因为我的服务器设置为使用短打开标签 我尝试ini_set('short_open_tag', '0')在我的包含之前使用无济于事然后我尝试readfile('ebook/titlepage.xhtml')了哪些工作，除了图像是从 reader.php 相对引用而不是从 titlepage.xhtml 相关引用。 我不想编辑任何电子书文件，所以使用echo loadHTMLFile("{$_GET["book"]}/titlepage.xhtml"); //Create the base element $base = $doc->createElement("base"); $baseHref = $doc->createAttribute('href'); $baseHref->value = "{$_GET["book"]}/"; $base->appendChild($baseHref); //add <base...>to $head = $doc->getElementsByTagName("head")->item(0); $head->appendChild($base); //output the page echo $doc->saveHTML(); 谢谢 任何用于业务流程建模符号的开源库？ 他们是我可以用于业务流程建模符号的任何开源库吗，允许用户创建图表，存储它们并在需要时检索它们。 phpxmlincludereadfile 4 1 回答 1 This answer is useful 1 readfile() 适合插入文件内容。您也可以使用 file_get_contents() 。 一个好的做法是在您的 html 文档中设置一个全局基础 href，以便正确解析相对路径。 https://developer.mozilla.org/en-US/docs/HTML/Element/base 于 2013-01-11T12:36:39.017 回答 Related 4 css - 如何在不弄乱布局的情况下为 div 添加边框？ 0 ruby - Sinatra - 在请求之间更改单例的值 1 ios - MFMailComposeViewController 仅在第二次点击后出现 2 c++ - fprintf 不打印 Unicode 字符 5 java - 为什么我们不能在 java 中使用“this”关键字创建对象？ 1 android - 从服务传递数据 1 asp.net-mvc - MVC4 仅仅因为它来自微软就选择 Unity 作为 DI 容器是否明智？可能重复 1 jquery - JQuery 自动完成禁用某些结果 2 django - ViewDoesNotExist 即使它确实存在 2 sql - 根据父和日期sql计算子记录 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</base...>

> ID：14278251
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, xml, include, readfile

我有两个带有路径的文件：

```
/reader.php
/ebook/titlepage.xhtml 
```

我计划让读者最终阅读电子书 toc.ncx 并能够将其显示在左侧窗格中以便于导航。但是现在，我要做的就是解决显示 xhtml 文件的问题。

电子书标题页的开头如下：

```
 <?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head> 
```

问题是当我使用

```
include(/ebook/titlepage.xhtml); 
```

我得到了意外的版本 T_String 因为我的服务器设置为使用短打开标签

我尝试`ini_set('short_open_tag', '0')`在我的包含之前使用无济于事然后我尝试`readfile('ebook/titlepage.xhtml')`了哪些工作，除了图像是从 reader.php 相对引用而不是从 titlepage.xhtml 相关引用。

我不想编辑任何电子书文件，所以使用`echo <?xml...`是不可能的；我最终希望将所有文件打包在 ebook.epub 中，并尝试使用 php 导航存档以在我的阅读器中读取和显示文件

我想我的问题是，如何在不编辑任何 ebbok 文件的情况下获取读取文件以使用相对于电子书的路径？或者我如何使用包含和忽略

或者，也许有更好的方法，我在这里不知道。也许是一种加载 html 文件并仅处理其中的内容或仅处理正文或头部和正文的方法，因为我最终想使用 head 中的样式和标题。

**使用 passfree 的答案更新（已解决）**

我现在将 HTML 加载到 domdocument 中，并在使用 savehtml 输出之前将基本标记添加到头部

```
 //Load the ebook title page
            $doc = new DOMDocument();
            $doc->loadHTMLFile("{$_GET["book"]}/titlepage.xhtml");

            //Create the base element
            $base = $doc->createElement("base");
            $baseHref = $doc->createAttribute('href');
            $baseHref->value = "{$_GET["book"]}/";
            $base->appendChild($baseHref);

            //add <base...> to <head>
            $head = $doc->getElementsByTagName("head")->item(0);
            $head->appendChild($base);

            //output the page
            echo $doc->saveHTML(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:36:39.017

readfile() 适合插入文件内容。您也可以使用 file_get_contents() 。

一个好的做法是在您的 html 文档中设置一个全局基础 href，以便正确解析相对路径。

[https://developer.mozilla.org/en-US/docs/HTML/Element/base](https://developer.mozilla.org/en-US/docs/HTML/Element/base)

# java - 任何用于业务流程建模符号的开源库？

> ID：14278253
> 
> 赞同：-1
> 
> 时间：2013-01-11T12:30:20.873
> 
> 标签：java, open-source

他们是我可以用于业务流程建模符号的任何开源库吗，允许用户创建图表，存储它们并在需要时检索它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:20:05.613

[Activiti](http://activiti.org/)和[Bonita](http://www.bonitasoft.org)有自己的建模器，如果你只想要图表，还提供引擎[， dia](http://projects.gnome.org/dia/??)和[yaoqiang](http://sourceforge.net/projects/bpmn/)是很好的选择。

# android - ViewPagerIndicator：标签标题的多行文本？

> ID：14278255
> 
> 赞同：5
> 
> 时间：2013-01-11T12:30:25.880
> 
> 标签：android, viewpagerindicator

我正在尝试使用“Sample Styled Tabs”示例使用 ViewPagerIndicator 中的 2 行显示选项卡文本。这是我到目前为止所做的：

*   在[`SampleTabsStyled.java`](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/SampleTabsStyled.java)中，我对`GoogleMusicAdapter`. 注意我添加到标题字符串的换行符：

    ```
    @Override
    public CharSequence getPageTitle(int position) {
        StringBuilder sb = new StringBuilder(CONTENT[position % CONTENT.length].toUpperCase());
        sb.append("\n");
        sb.append(RANDOM.nextInt(1000));
        return sb.toString();
    } 
    ```

*   在[`styles.xml`](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/res/values/styles.xml)中，我做了以下更改：

    ```
    <style name="CustomTabPageIndicator.Text" parent="android:TextAppearance.Medium">
        <item name="android:typeface">monospace</item>
        <item name="android:singleLine">false</item>
    </style> 
    ```

但是，我只看到 VPI 选项卡中的第一行文本。我没有看到第二行数字。我可能做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T12:48:24.533

我在 G+ 的帮助下找到了答案。这是我必须做的：

*   不要费心修改`CustomTabPageIndicator.Text`. 我把它还原到原来的样子。
*   将以下行添加到 的样式中`CustomTabPageIndicator`：

    ```
    <item name="android:maxLines">2</item> 
    ```

那是为我做的。

# java - Struts2 Hello World jsp 示例错误

> ID：14278258
> 
> 赞同：2
> 
> 时间：2013-01-11T12:30:32.090
> 
> 标签：java, jsp, struts2, tomcat6

我正在尝试在 Tomcat 6 中运行 Hello World Struts2 项目。

我不断得到：

```
 root cause: java.lang.ClassNotFoundException: org.apache.struts2.interceptor.SessionAware

  java.lang.NoClassDefFoundError: org/apache/struts2/interceptor/SessionAware
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:56)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1374)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    at com.opensymphony.xwork2.util.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:138)
    at com.opensymphony.xwork2.ObjectFactory.getClassInstance(ObjectFactory.java:96)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:398)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:355)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:460)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:265)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:189)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:360)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:403)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:190) 
```

但是，我在项目的 WEB-INF/lib 文件夹中确实有 struts2 所需的 jar。

罐子：

struts-core xwork ognl freemarker commons-fileupload commons-io commons-lang

有任何想法吗？

我遵循了一个在线的 Struts2 HelloWorld 示例：

HelloWorld.action 类：

```
 package za.co.vine.tutorialspoint.struts2;

  public class HelloWorldAction{
  private String name;

  public String execute() throws Exception {
  return "success";
  }

  public String getName() {
  return name;
  }

  public void setName(String name) {
  this.name = name;
  }
  } 
```

HelloWorld.jsp：

```
 <%@ page contentType="text/html; charset=UTF-8" %>
  <%@ taglib prefix="s" uri="/struts-tags" %>
  <html>
  <head>
  <title>Hello World</title>
  </head>
  <body>
     Hello World, <s:property value="name"/>
  </body>
  </html> 
```

index.jsp：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
  <%@ taglib prefix="s" uri="/struts-tags"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
  "http://www.w3.org/TR/html4/loose.dtd">
  <html>
  <head>
  <title>Hello World</title>
  </head>
  <body>
     <h1>Hello World From Struts2</h1>
      <form action="hello">
        <label for="name">Please enter your name</label><br/>
        <input type="text" name="name"/>
        <input type="submit" value="Say Hello"/>
     </form>
  </body>
  </html> 
```

struts.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
   <struts>
    <constant name="struts.devMode" value="true" />
    <package name="helloworld" extends="struts-default">

     <action name="hello" 
        class="za.co.vine.tutorialspoint.struts2.HelloWorldAction" 
        method="execute">
        <result name="success">/HelloWorld.jsp</result>
     </action>
  </package>
  </struts> 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
  id="WebApp_ID" version="3.0">

  <display-name>Struts 2</display-name>
  <welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
  <filter-name>struts2</filter-name>
  <filter-class>
     org.apache.struts2.dispatcher.FilterDispatcher
  </filter-class>
  </filter>

  <filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:30:29.820

只需在 WEB-INF/lib 中添加以下 Jar。如果您不需要，请删除所有相关的 jar。

```
asm-3.3.jar
asm-commons-3.3.jar
asm-tree-3.3.jar
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang3-3.1.jar
freemarker-2.3.19.jar
javaassist-3.11.0.GA.jar
ognl-3.0.5.jar
struts2-core-2.3.7.jar
xwork-core-2.3.7.jar 
```

如果您没有这些 jar，请下载它。

这里 **org.apache.struts2.dispatcher.FilterDispatcher** 现在已被弃用。所以编辑你的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
  id="WebApp_ID" version="3.0">

  <display-name>Struts 2</display-name>
  <welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
  <filter-name>struts2</filter-name>
  <filter-class>
     org.apache.struts2.dispatcher.FilterDispatcher
  </filter-class>
  </filter>

  <filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

至

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Struts2 Application</display-name>

  <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
   </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

  <welcome-file-list>
    <welcome-file>/index.jsp</welcome-file>  
  </welcome-file-list>
</web-app> 
```

我想这可以为你完成工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:05:09.063

您使用的 xwork-core jar 的版本似乎与其他 jar 的版本不兼容。

尝试使用[xwork-2.1.2.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/com/opensymphony/xwork/2.1.2/xwork-2.1.2.jar)。我之前已经成功使用过。

如果它仍然不起作用，请确保您使用与示例应用程序中相同的每个 jar 版本。

**编辑**：

根据您的代码，尝试更改

```
public String execute() throws Exception {
  return "success";
} 
```

至

```
public String execute() throws Exception {
  setName("Honey Bunny");
  return "success";
} 
```

似乎由于您没有调用 setter，Struts 正在会话中搜索属性名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:53:31.820

关于您的问题，问题可能出在服务器或您的 IDE 工具中，因此请分别在 project clean 和 server clean 下清理它们。

如果您再次遇到同样的问题，请从此链接下载 struts2

> [struts2](http://apache.techartifact.com/mirror/struts/examples/) 只需从该文件夹复制 struts-blank.war 并*`the new workspace`*运行一个程序（struts-blank.war 包含测试程序），它肯定会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T12:46:31.370

当您在类路径中没有该类或在类路径中有多个该类的版本时，通常不会出现 classdeffound 错误。使用这两个选项进行故障排除。我在为代码示例编写[JSP 示例时遇到了这种情况。](http://www.deepakgaikwad.net/index.php/2009/04/13/java-server-pages-jsp-tutorial.html)

# java - 启动我的 Rcp 应用程序时出现此错误？

> ID：14278261
> 
> 赞同：2
> 
> 时间：2013-01-11T12:30:50.100
> 
> 标签：java, eclipse-rcp

我格式化了我的硬盘驱动器并重新安装了我的操作系统。但是在那之后我开发的任何 RCP 应用程序都出现了错误。任何人都可以帮助我。

错误：

```
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

# c# - 为什么我的 ASP.NET 项目没有加载 Dll？

> ID：14278265
> 
> 赞同：3
> 
> 时间：2013-01-11T12:30:55.263
> 
> 标签：c#, asp.net-mvc-4, filenotfoundexception

我有一个**ASP.NET MVC 4**项目。我正在引用一个**托管 C++ dll**，它在内部调用**非托管 C++ dll**的方法。问题是在 Visual Studio 中调试我的项目时出现*“无法加载文件或程序集或其依赖项之一”错误。*它找不到的 Dll 由**非托管 C++ dll**使用。我将所有需要的 DLL 放在 ASP 项目的 bin 目录中。

在 WPF 项目中一切正常，但在 ASP.NET MVC4 项目中执行相同操作时出现错误。启动/调试 ASP.NET MVC4 项目时出现错误。

我已经尝试了几乎所有我能做的事情，但不确定为什么会出现这个错误。

想法？

**编辑** 我尝试了 Fuslogvw.exe，它正在创建两个输出/日志文件。我对它的输出有点困惑

在一个文件最后说

> 绑定成功。从 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\9abdb93b\4655bb86\assembly\dl3\5113eba9\008d3984_ccb1cb01\Assembly.dll 返回程序集。日志：程序集在默认加载上下文中加载。”

在第二个日志中它说

> === 预绑定状态信息 ===
> LOG：DisplayName = AssemblyName（部分）
> WRN：为程序集提供了部分绑定信息：
> WRN：程序集名称：AssemblyName | 域 ID：2
> 警告：仅提供部分程序集显示名称时会发生部分绑定。
> 警告：这可能会导致活页夹加载不正确的程序集。
> WRN：建议为程序集提供完全指定的文本标识，
> WRN：由简单名称、版本、文化和公钥标记组成。
> 警告：有关此问题的详细信息和常见解决方案，请参阅白皮书 > [http://go.microsoft.com/fwlink/?LinkId=109270](http://go.microsoft.com/fwlink/?LinkId=109270)。
> 日志：Appbase = file:///c:/users/haris.hasan/documents/visual studio 2012/Projects/MvcApplication1/MvcApplication1/
> 日志：初始 PrivatePath = c:\users\haris.hasan\documents\visual studio 2012\ Projects\MvcApplication1\MvcApplication1\bin
> 日志：动态基础 = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\9abdb93b 日志：缓存基础 = C:\Windows\Microsoft.NET\ Framework\v4.0.30319\Temporary ASP.NET Files\root\9abdb93b 日志：AppName = 4655bb86 调用程序集：（未知）。=== 警告：未找到匹配的本机图像。
> 日志：从 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\9abdb93b\4655bb86\assembly\dl3\5113eba9\008d3984_ccb1cb01\AssemblyName.dll 加载的 IL 程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:51:11.613

您是否在 x64 平台上运行？那么 IIS 可能在 x64 模式下运行并且根本不加载 x86 dll。

您可以通过将相关的 IIS 应用程序池设置为 x86 模式（enable32BitAppOnWin64 => true）来测试它，并测试它是否正常工作。

此外，托管 DLL 和/或 C++ dll 的安全设置可能会阻止它加载。在 C++ dll 上，至少要确保“经过身份验证的用户”组可以读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:57:13.493

1- 可能是因为 MS C++ 可再发行包更新！卸载它们并重新安装。
2-我认为 IIS 正在创建路径中每个托管 dll 的卷影副本，但对于非托管另一个路径，您必须对其进行配置。检查该[链接](http://blogs.msdn.com/b/jorman/archive/2007/08/31/loading-c-assemblies-in-asp-net.aspx)以获取更多信息。

# android - 画廊的 ViewPager

> ID：14278273
> 
> 赞同：0
> 
> 时间：2013-01-11T12:31:33.890
> 
> 标签：android, android-viewpager

我正在按照[本](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)教程建立一个画廊。直到现在我已经设法使用如下所示的滑动功能显示图像

```
public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int Id = 0;
        switch (position) {
        case 0:
            Id = R.layout.farleft;
            break;
        case 1:
            Id = R.layout.left;
            break;
        }
        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    } 
```

但是我想显示很多图片，所以我无法设置数百个案例来设置数百个不同的布局。那么我在这里有什么选择？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:33:51.727

```
int resId = context.getResources().getIdentifier("image_" +
                Integer.toString(position), "id", context.getpackageName(); 
```

我是从心里打出来的，所以可能有一些错字，但我相信你理解这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:34:14.413

像这样试试。。

```
@Override
public Object instantiateItem( final View pager, final int position )
{
    //Note: if you do not have a local reference to the context make one and
    //set it to the context that gets passed in to the constructor.
    //Another option might be to use pager.getContext() which is how its
    //done in the tutorial that you linked.
    ImageView mImg = new ImageView(context);

    /*Code to dynamically set your image goes here.
    Exactly what it will be is going to depend on 
    how your images are stored. 
    In this example it would be if the images
    are on the SD card and have filenames
    with incrementing numbers like: (img0.png, img1.png, img2.png etc...)*/

    Bitmap mBitmap = BitmapFactory.decodeFile(
         Environment.getExternalStorageDirectory() + "/img" + position + ".png");
    mImg.setImageBitmap(mBitmap);

    ((ViewPager) collection).addView(mImg, 0);
    return mImg;

} 
```

也尝试链接 [https://github.com/ysamlan/horizo​​ntalpager](https://github.com/ysamlan/horizontalpager)

# c# - 如何使用 System.DirectoryServices.AccountManagement 命名空间获取 Active Directory 用户属性？

> ID：14278274
> 
> 赞同：11
> 
> 时间：2013-01-11T12:31:36.020
> 
> 标签：c#, properties, active-directory, principal, userprincipal

我想从用户那里获取 Active Directory 属性，并且我想使用`System.DirectoryServices.AccountManagement`.

我的代码：

```
public static void GetUserProperties(string dc,string user) 
        {
            PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);
            UserPrincipal u = UserPrincipal.FindByIdentity(ctx, user);

            string firstname = u.GivenName;
            string lastname = u.Surname;
            string email = u.EmailAddress;
            string telephone = u.VoiceTelephoneNumber;

            ...//how I can get company and other properties?
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-25T17:04:57.883

您可以转换到 DirectoryServices 命名空间以获取您需要的任何属性。

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);
UserPrincipal u = UserPrincipal.FindByIdentity(ctx, user);

string firstname = u.GivenName;
string lastname = u.Surname;
string email = u.EmailAddress;
string telephone = u.VoiceTelephoneNumber;
string company = String.Empty;

...//how I can get company and other properties?
if (userPrincipal.GetUnderlyingObjectType() == typeof(DirectoryEntry))
{
    // Transition to directory entry to get other properties
    using (var entry = (DirectoryEntry)userPrincipal.GetUnderlyingObject())
    {
        if (entry.Properties["company"] != null)
            company = entry.Properties["company"].Value.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-27T13:25:04.157

如果您想更改属性，请不要忘记在更改值后调用 userPrincipal.save()。

```
entry.Properties["company"].value = company;
userPrincipal.save(); 
```

# iphone - 如何以编程方式为自定义 UIButton 设置高亮动画？

> ID：14278278
> 
> 赞同：0
> 
> 时间：2013-01-11T12:31:56.850
> 
> 标签：iphone, objective-c

我有一个非常复杂的逻辑，我必须触发 UIButton 的事件：

```
if (CGRectContainsPoint(self.startButton.frame, point))
{
    [self buttonDidClicked:self.startButton];
} 
```

它没有链接到任何控制事件，也没有必要。问题是调用函数时没有高亮动画。我说的是常规动画，当您单击 UIButton 时，会有一个简短的黑色蒙版应用于它。

然后我尝试将按钮链接到 UIEventTouchDown 控件事件并通过以下方式触发调用：

```
if (CGRectContainsPoint(self.startButton.frame, point))
{
    [self.nextButton setHighlighted:YES];
    [self.backButton sendActionsForControlEvents:UIControlEventTouchDown];
} 
```

它模拟了一个真实的触摸事件。它确实在按钮上创建了一个黑色层，但它不会自动关闭。

最好的方法是什么？我想在按钮被触发时得到一些反馈。默认动画就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:40:55.987

您可以通过以下方式使用图层或渐变图层：

```
- (void) viewDidLoad
{
        [super viewDidLoad];

        CAGradientLayer *gradient = [CAGradientLayer layer];
        loginButton.clipsToBounds = YES;
        UIColor *topColor = [UIColor colorWithRed:255/255 green:255/255 blue:255/255 alpha:0.9];
        UIColor *middleColor = [UIColor colorWithRed:61.0/255 green:130.0/255 blue:244.0/255 alpha:1.0];
        UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
        gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor,
                           (id)middleColor.CGColor, (id)bottomColor.CGColor, nil];
        gradient.locations = [NSArray arrayWithObjects:
                              [NSNumber numberWithFloat:0.0f],
                              [NSNumber numberWithFloat:0.05f],
                              [NSNumber numberWithFloat:0.7],
                              nil];
        gradient.frame = [[loginButton layer] bounds];
        gradient.cornerRadius = 4.0;
        gradient.borderWidth = 0.5;
        [loginButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [loginButton.layer insertSublayer:gradient atIndex:0]; 
        [loginButton addTarget:self action:@selector(loginTouchDown:)
                forControlEvents:UIControlEventTouchDown];
        [loginButton addTarget:self action:@selector(loginTouchUp:)
              forControlEvents:UIControlEventTouchUpOutside];
}

- (IBAction)loginTouchDown:(id)sender
{
        CAGradientLayer *gradient = [loginButton.layer.sublayers objectAtIndex:0];
        UIColor *topColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
        UIColor *middleColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
        UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
        gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor, (id)middleColor.CGColor,
                           (id)bottomColor.CGColor, nil];
}

- (IBAction)loginTouchUp:(id)sender
{
        CAGradientLayer *gradient = [loginButton.layer.sublayers objectAtIndex:0];
        UIColor *topColor = [UIColor colorWithRed:255/255 green:255/255 blue:255/255 alpha:0.9];
        UIColor *middleColor = [UIColor colorWithRed:61.0/255 green:130.0/255 blue:244.0/255 alpha:1.0];
        UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
        gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor,
                           (id)middleColor.CGColor, (id)bottomColor.CGColor, nil];
}

- (IBAction)loginButton:(id)sender
{
        [self loginTouchUp:sender];
        [self doLogin];
} 
```

登录按钮在故事板中定义并分配给本地视图属性。

（在 *.h 文件中）

```
@interface LoginViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic, retain) IBOutlet UIButton *loginButton;
@end 
```

（在 *.m 文件中）

```
@synthesize loginButton; 
```

在 viewdidload 中，我们为正常状态和推送状态定义了梯度层。然后我们在 up/down 事件上操作它们。我们还需要 loginButton() 作为按钮处理程序来执行操作。这样，此按钮行为理想地与普通按钮相同。好像就是这个了

您可以在 iphone 应用商店中找到它的工作原理示例。有一个名为 Torchoo 的免费应用程序。当你运行它时，它首先显示的是登录屏幕。它有登录按钮。按下它看看这是不是你需要的。此代码来自该项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:38:17.537

方法是将您的`-buttonDidClicked`操作绑定到 UIButton UIControlEventTouchUpInside 事件：

```
[self.startButton addTarget:self action:@selector(buttonDidClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果您需要使用`CGRectContainsPoint()`机制，您应该在调用之前将`self.startButton.highlighted`选项设置为 YES ，然后在`-buttonDidClicked`调用之后设置为 NO。

# android - Android Eclipse 调试模式 - 线程

> ID：14278288
> 
> 赞同：4
> 
> 时间：2013-01-11T12:32:42.980
> 
> 标签：android, eclipse, multithreading

一个简单的问题，我今天正在调试我的应用程序，我第一次问自己一个问题。在 Eclipse 调试模式中，您有很多选项和值，但其中一个视图让我在调试时思考了一下。图片上的所有这些`Threads`，它们应该是什么意思？在我的应用程序上运行的线程？我正在启动/停止的线程或者它们更像是系统级别的线程，它控制我的应用程序。有那么多线程是正常的还是我做错了什么？

![线程](../Images/a78535fb4c68f435bf13fd7c4f44dc15.png)

非常感谢您提供任何类型的信息/帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:39:50.637

这些都是驻留在您的 VM 实例中的所有线程。在运行时的任何给定时间有多个运行或等待是正常的。每当您生成作业或计时器时，都会创建一个线程，或者从池中获取一个线程。在您的屏幕截图中，还可以看到许多可能空闲的池线程。此外，考虑 UI 编程 - Display 线程通常是一个独立线程，在该线程上事件被其他非 UI 线程调用，因为 UI 线程上长时间运行的操作似乎会冻结整个应用程序。

编辑：澄清一下，并非所有这些线程都是您有意识地调用的。有些是由 VM 本身启动的，有些是由您可能正在使用的某个框架或库启动的，还有一些是由您启动的 - 其中通常所谓的“主”线程是最突出的。

EDIT2：您还可以随时在“调试”视图中暂停给定线程并检查其当前堆栈跟踪。这可能会为您提供有关所有这些线程在做什么的线索。很有可能，他们正在等待一个对象（某些池调度程序的礼貌）或轮询一个空的阻塞队列或类似的东西。

最好的问候， h。

# javascript - 为什么ajax调用的超时不能正常工作

> ID：14278289
> 
> 赞同：1
> 
> 时间：2013-01-11T12:32:42.890
> 
> 标签：javascript, ajax, json, timeout

在我的 ASPX 页面中，我调用了一个包含 5 秒超时的 Ajax 调用的 javascript 函数。

我首先尝试在关闭互联网连接且超时正常工作的情况下调用此函数。但是当我第二次调用这个函数时，Ajax调用直接调用成功函数，无需等待超时和后续的错误函数。

这是ajax调用

```
$.ajax({
     type: "POST",
     url: pageUrl + "/SubmitAnsGetNewQue",
     data: jsonParamsForSbmt,
     timeout: 5000,
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     async: true,
     success: SetNextQueSet,
     error: OnErrorCall
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:36:20.863

`timeout`不是你在这种情况下所想的，它是 jQuery 等待 ajax 请求返回的毫秒数。

如果服务器回复的时间超过 5 秒，则不会触发回调。

**暂停**

> 为请求设置超时（以毫秒为单位）。这将覆盖使用 $.ajaxSetup() 设置的任何全局超时。超时时间从 $.ajax 调用开始；如果有几个其他请求正在进行并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，如果请求超时，XMLHttpRequest 对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

[文档](http://api.jquery.com/jQuery.ajax/)

# java - JPA：将实体与现有 ID 合并

> ID：14278290
> 
> 赞同：1
> 
> 时间：2013-01-11T12:32:45.287
> 
> 标签：java, jpa

我正在使用 JPA 2.0 开发一个 Web 应用程序，并在每个请求上打开和关闭 EntityManager。用户可以创建一个新实体并设置 id-field（该字段有含义，我无法更改表结构）。要存储新实体，我必须使用 EntityManager 的“合并”方法，但是当已经存在具有相同 id 的实体时，它只会被更新。我是否必须手动检查是否已经存在具有相同 ID 的实体，或者可以以更好的方式完成吗？还是我的方法有其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:37:53.970

如果您使用`persist`方法，`EntityPersistsException`则会为重复的 id 抛出一个。

也就是说，从用户的角度来看，他越早知道 ID 已被使用越好（最好在更新字段时使用 ajax 检查它）。

# grails - Grails spring-security UserRole - 角色获取：'join'

> ID：14278295
> 
> 赞同：0
> 
> 时间：2013-01-11T12:33:04.603
> 
> 标签：grails, grails-plugin, grails-domain-class

我有典型的由 spring-security 类自动生成的。+ 我想在一个查询中同时选择角色和 UserRoles（表连接），因此我添加了 fetch: 'join'。

```
class User {
    def springSecurityService
    String username 
    String password 
    static hasMany = [userRoles: UserRole]
    Set<Role> getAuthorities () {
        if (!this.id) {return []}
        def userAuthorities= userRoles*.role
        return userAuthorities
    }
}

class UserRole implements Serializable {

    User user
    Role role
...
    static mapping = {
        table 'UserRole'
        version false
        id composite: ['role', 'user']
        user column: 'UserID'
        role column: 'RoleID', fetch: 'join'
    }
class Role {
    String authority
    String description

    static mapping = {
        cache true
        table 'Role'
        id column: 'RoleID', generator: 'identity'
        authority column: 'Authority'
        description column:  'Description'
    } 
```

但是我仍然在延迟初始化角色，只有当我在 getAuthorities() 中访问它时。它会导致“N+1”查询性能问题。为什么 grails/hibernate 会忽略 fetch: 'join' 指令？它是否以某种方式取决于弹簧安全性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:40:34.957

正如我对官方文档的解释，当您为用户（非唯一属性方法）和唯一结果（get 或 findBy 唯一属性方法）`fetch`进行多选时，grails 会使用它`findBy``lazy`

官方文档：

*   懒惰： http: [//grails.org/doc/latest/ref/Database%20Mapping/lazy.html](http://grails.org/doc/latest/ref/Database%20Mapping/lazy.html)
*   渴望和懒惰的获取： http: [//grails.org/doc/latest/guide/single.html#fetching](http://grails.org/doc/latest/guide/single.html#fetching)

你试过`lazy`方法吗？

另一种可能性是关于 spring-security 本身的实现，什么是 java 实现的移植，并且不知道来自 gorm 的信息（也许只翻译 java 代码）

# android - 在缓存中保存 ListView？

> ID：14278298
> 
> 赞同：0
> 
> 时间：2013-01-11T12:33:29.767
> 
> 标签：android, listview, caching, android-custom-view

我想在缓存上保存一个 ListView，但我不知道该怎么做。该列表是从 SQL 读取并按字母顺序排列的。它有分隔符，因此它必须读取所有条目并按字母对它们进行分类，以便将分隔符添加到正确的位置。我认为将列表保存在缓存中比每次都构建它更快。这是正确的？如何将视图保存在缓存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:14:14.487

> 我认为将列表保存在缓存中比每次都构建它更快。这是正确的？

不一定正确，假设保存列表 = 保存整个视图及其绘图缓存。无论如何，我认为没有一种简单的方法可以做这样的事情。

但好消息是**你真的不需要这样做！**

如果您的列表加载速度不快，可能是因为您在`getView()`方法内部进行了很多操作，例如解码位图、解析大量数据或类似的事情。

如果您想以正确的方式进行操作 - 如果您有图像，请缓存图像，然后下次从缓存中加载它们并在单独的线程中进行解码（`AsyncTesk`为此目的使用或其他 API 组件之一） . 如果您正在进行一些繁重的计算或解析 - 也将结果缓存在数据库中，并在下次加载它们（例如，将数据按字母顺序保存在数据库中）

使用这种方法，您确实没有理由感到用户体验有任何缓慢。视图不应该以您描述的方式“保存”，我真的相信没有理由这样做，因为如果使用得当，Android 的“加载”视图的机制工作得很好

希望对你有帮助，祝你好运。

# iphone - 模仿照片应用程序的平移行为（速度）

> ID：14278305
> 
> 赞同：0
> 
> 时间：2013-01-11T12:33:46.157
> 
> 标签：iphone, ios, cocoa-touch, uigesturerecognizer, uipangesturerecognizer

我试图模仿照片应用程序的行为，其中用户用手指平移照片并且它具有一定的速度。由于我不会进入的原因，我不能将 a`UIScrollView`与它的缩放一起使用`UIImageView`，而必须使用 a 来`UIImageView`实现`UIPanGestureRecognizer`。Apple 是否有任何关于如何做到这一点的样本，或者有人知道如何模仿这种行为吗？有关于这方面的 WWDC 视频吗？（找不到任何东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:46:15.183

如果您愿意集成任何其他第三方现成控件，我建议您查看[KTPhotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)演示。

这很棒。一切都以编程方式完成，但您可以根据需要进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:45:18.480

实现`UIPinchGestureRecognizer`并挂钩以下函数作为选择器。

```
-(void)scale:(id)sender {
  if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {
    lastScale = 1.0;
    CGSize zoomViewSize = CGSizeApplyAffineTransform(imgScrollView.frame.size, [(UIPinchGestureRecognizer *)sender view].transform);
    CGPoint centerPoint = CGPointApplyAffineTransform(imgScrollView.frame.origin, [(UIPinchGestureRecognizer *)sender view].transform);

    CGRect r = imgScrollView.bounds;
    CGSize scrollViewSize = imgScrollView.frame.size;
    imgScrollView.contentSize = zoomViewSize;
    imgScrollView.contentOffset = centerPoint; 
  }

  CGFloat currentScale = [[[(UIPinchGestureRecognizer*)sender view].layer valueForKeyPath:@"transform.scale"] floatValue];

  CGFloat scale = 1.0 - (lastScale - [(UIPinchGestureRecognizer*)sender scale]);
  scale = MIN(scale, imgScrollView.maximumZoomScale / currentScale);   
  scale = MAX(scale, imgScrollView.minimumZoomScale / currentScale);
  CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
  CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);
  [[(UIPinchGestureRecognizer*)sender view] setTransform:newTransform];
  lastScale = [(UIPinchGestureRecognizer*)sender scale];    
} 
```

# c# - 只能 Dll 驻留在没有可执行文件的不同应用程序域中

> ID：14278306
> 
> 赞同：1
> 
> 时间：2013-01-11T12:33:46.547
> 
> 标签：c#, .net, appdomain, .net-assembly

我开发了一个控制台应用程序，它使用 math.dll 进行所有数学计算。默认情况下，当我在我的可执行应用程序中创建此 dll 类的实例时，它会加载到我当前的应用程序域中，即我的可执行应用程序的应用程序域。我想知道我是否可以在不同的应用程序域中加载这个 dll。如果是，而不是它驻留在不同的应用程序域中，我如何调用这个 dll 的方法。我是否需要创建代理来调用它，如果是，如何实现它。

# r - 探索数据时，箱形图不会与 Rattle 中的其他图表共享页面

> ID：14278310
> 
> 赞同：3
> 
> 时间：2013-01-11T12:33:56.123
> 
> 标签：r, rattle

我目前正在使用 Rattle 和 Williams 的 R 进行数据挖掘。我在他的书的第 32 页和 Rattle 的以下标签上：

探索 > 分布

重申标题，在探索数据时，箱形图不会与其他图表共享页面。

例如，当我绘制箱线图和直方图时`MinTemp`，`Sunshine`我会得到一个带有直方图的页面，以及每个箱线图的单独页面。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:12:43.920

当我偶然发现你的帖子时，我遇到了同样的问题。在尝试安装各种推荐的软件包之后，为我解决了这个问题，只是在 Rattle 设置“高级图形”中禁用。之后，箱线图按照教程中的描述工作。

希望对你有帮助

# java - 处理程序运行得比它应该更频繁？（后期延迟）

> ID：14278312
> 
> 赞同：1
> 
> 时间：2013-01-11T12:34:10.660
> 
> 标签：java, android, handler

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。

当我收到数据时，以下方法会自动运行。当我收到数据时，我想在`onDataReceived`方法中使用 invalidate 来更新模拟器屏幕，但是由于某种原因这不起作用，所以我创建了一个处理程序来每隔 1 秒执行一次，这样就可以了。

```
public void onDataReceived(int id, byte[] data) 
{
    dataReceived = new String(data);
    ((MyBAIsWrapper) bis).renew(data);
    mSession.write(dataReceived);

    mSession.notifyUpdate();
    viewHandler.post(updateView);
} 
```

现在我想测试接收到的某些字符的数据，所以我做了一个 for 循环`onDataReceived`，同样这不起作用，它只会时不时地看到字符，缺少一些字符。所以我将循环添加到处理程序中：

```
Handler viewHandler = new Handler();
Runnable updateView = new Runnable()
{
    @Override
    public void run() 
 {
        //update screen ever 1000ms
        mEmulatorView.invalidate();

    //should check data received every 1000ms
    for(int i = 0; i < dataReceived.length(); i++)
        {           
            if(dataReceived.charAt(i) == '>')
                {

                     Log.d(TAG, "found >");
                }

            if(dataReceived.charAt(i) == '#')
                {

                     Log.d(TAG, "found #");     
                }
        }
        viewHandler.postDelayed(updateView, 1000);
  }

}; 
```

我的问题是，虽然我可以看到屏幕每秒更新一次，但在日志中我可以看到我发现字符的频率要高得多，它将它们打印到日志中 100 次，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:05:09.903

我真的不知道，但原因可能是，因为 runnable 没有停止。只需设置一个条件，即 runnbale 仅在此条件为真时才应启动。所以如果它是 false，runnable 会自动停止，例如：

```
 @Override
public void run() 
 {
    //update screen ever 1000ms
    mEmulatorView.invalidate();

     if(yourCondition==true){ //put here a condition that the runnable only starts if this is true
//should check data received every 1000ms
for(int i = 0; i < dataReceived.length(); i++)
    {           
        if(dataReceived.charAt(i) == '>')
            {

                 Log.d(TAG, "found >");
            }

        if(dataReceived.charAt(i) == '#')
            {

                 Log.d(TAG, "found #");     
            }
    }
    viewHandler.postDelayed(updateView, 1000);
    }
   }

  }; 
```

# vba - 查找重复值并移动到不同的工作表

> ID：14278314
> 
> 赞同：1
> 
> 时间：2013-01-11T12:34:13.037
> 
> 标签：vba, excel, duplicates, excel-2007

我有如下两列：

```
4   10
20  5
20  20
70  20
60  50
80  70
5   90
20  60
100 
```

我需要一个宏来查找重复的对并将它们移动到单独的工作表中，以便当前工作表看起来像这样：

```
4   10
20  50
80  90
100 
```

表 2 如下所示：

```
20  20
20  20
70  70
5   5
60  60 
```

![SO14278314 示例](../Images/a739bd02b779a4c06246f8315fedc705.png)

我到处搜索，找不到解决问题的方法。到目前为止，我尝试过的所有代码和公式要么移动所有`20`' 而不是仅移动两对（因为两列中只有两对），要么保持原样。

我每天要整理大约 300 个条目，并且每天都会完全改变。对我的问题的任何帮助或指导将不胜感激。

我怎样才能达到所示的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:56:24.593

有很多方法可以做到这一点。这是一个例子。

试试这个。我已经对代码进行了注释，因此您理解它不会有问题。

```
Option Explicit

Sub Sample()
    Dim wsMain As Worksheet, wsOutput As Worksheet
    Dim lRowColA As Long, lRowColB As Long, i As Long, j As Long
    Dim aCell As Range, ColARng As Range, ColBRng As Range

    '~~> Set input Sheet and output sheet
    Set wsMain = ThisWorkbook.Sheets("Sheet1")
    Set wsOutput = ThisWorkbook.Sheets("Sheet2")

    '~~> Start Row in output sheet
    j = 1

    With wsMain
        '~~> Get last row in Col A & B
        lRowColA = .Range("A" & .Rows.Count).End(xlUp).Row
        lRowColB = .Range("B" & .Rows.Count).End(xlUp).Row

        '~~> Set your actual data range in Col A and B
        Set ColARng = .Range("A1:A" & lRowColA)
        Set ColBRng = .Range("B1:B" & lRowColB)

        '~~> Loop through Col A
        For i = 1 To lRowColA
            If Len(Trim(.Range("A" & i).Value)) <> 0 Then
                '~~> Check if there are duplicates of Col A value in Col B
                If Application.WorksheetFunction.CountIf(ColBRng, _
                .Range("A" & i).Value) > 0 Then
                    '~~> If found write to output sheet
                    wsOutput.Cells(j, 1).Value = .Range("A" & i).Value
                    wsOutput.Cells(j, 2).Value = .Range("A" & i).Value

                    '~~> Find the duplicate value in Col B
                    Set aCell = ColBRng.Find(What:=.Range("A" & i).Value, _
                    LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, _
                    SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

                    '~~> Clear the duplicate value in Col B
                    aCell.ClearContents
                    '~~> Clear the duplicate value in Col A
                    .Range("A" & i).ClearContents

                    '~~> Set i = 1 to restart loop and increment
                    '~~> the next row for output sheet
                    i = 1: j = j + 1
                End If
            End If
        Next i

        '~~> Sort data in Col A to remove the blank spaces
        ColARng.Sort Key1:=.Range("A1"), Order1:=xlAscending, Header:=xlNo, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal

        '~~> Sort data in Col B to remove the blank spaces
        ColBRng.Sort Key1:=.Range("B1"), Order1:=xlAscending, Header:=xlNo, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/ed8f79a5080194a909033abb893c1fae.png)

# java - java.net.MalformedURLException：没有协议：

> ID：14278320
> 
> 赞同：1
> 
> 时间：2013-01-11T12:34:51.210
> 
> 标签：java, url, protocols

如果我在 url 路径中有 http，为什么我没有协议？

日志：

```
network: Connecting http://xxx.ccc.local/upload/up.php?aa=0&bb=Ap%F3lice+de+Seguro&cc=1028&from=documentos with cookie "CLinkLanguage=en; __utma=232844939.1396040569.1356709687.1357294077.1357902500.12; __utmz=232844939.1356709687.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmb=232844939.24.10.1357902500; symfony=e0lpbkrcu0bidkpiujd1if4pt4; __utmc=232844939; CLinkLanguage=en; PHPSESSID=uv31kr1vpojvqgnc9ae9nda921" 
```

例外：

```
 java.net.MalformedURLException: no protocol: 
        at java.net.URL.<init>(Unknown Source)
        at java.net.URL.<init>(Unknown Source)
        at java.net.URL.<init>(Unknown Source) 
```

**html**

```
 <APPLET  CODE = "wjhk.jupload.JUploadApplet" ARCHIVE = "upload/wjhk.jupload.jar" WIDTH = "600" HEIGHT = "400" MAYSCRIPT></XMP>
        <PARAM NAME = CODE VALUE = "wjhk.jupload.JUploadApplet" >
        <PARAM NAME = ARCHIVE VALUE = "upload/wjhk.jupload.jar" >
        <PARAM NAME = "type" VALUE="application/x-java-applet;version=1.4">
        <PARAM NAME = "scriptable" VALUE="false">
        <PARAM NAME = "postURL" VALUE ="{$url}">
        <PARAM NAME = "anexosID" VALUE ="{$anexosID}">
        <PARAM NAME = "subanexosID" VALUE ="{$IdConsulta}">
        <PARAM NAME = "companyID" VALUE ="{$companyID}">
        <PARAM NAME = "resultURL" VALUE ="{$resultUrl}">
        <param name="debug" value="true">

    Java 1.4 or higher plugin required. 
```

```
<APPLET  CODE = "wjhk.jupload.JUploadApplet" ARCHIVE = "upload/wjhk.jupload.jar" WIDTH = "600" HEIGHT = "400" MAYSCRIPT></XMP>
    <PARAM NAME = CODE VALUE = "wjhk.jupload.JUploadApplet" >
    <PARAM NAME = ARCHIVE VALUE = "upload/wjhk.jupload.jar" >
    <PARAM NAME = "type" VALUE="application/x-java-applet;version=1.4">
    <PARAM NAME = "scriptable" VALUE="false">
    <PARAM NAME = "postURL" VALUE ="http://xxx.ccc.local/upload/up.php?aa=0&bb=Alvar%E1%2Ffg&cc=1028&from=documentos">
    <PARAM NAME = "anexosID" VALUE ="">
    <PARAM NAME = "subanexosID" VALUE ="">
    <PARAM NAME = "companyID" VALUE ="">
    <PARAM NAME = "resultURL" VALUE ="">
    <param name="debug" value="true">

Java 1.4 or higher plugin required.
</APPLET> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:40:13.207

postURL 参数的值是一个可以毫无例外地解析的 URL，因此问题出在其他地方。你可以做什么：

*   试验各种小程序参数
*   请求小程序开发者的支持
*   如果您没有小程序的源代码，您可能仍然可以对其进行反编译，并了解它是如何工作的：[我在哪里可以找到 Java 反编译器？](https://stackoverflow.com/questions/671394/where-can-i-find-a-java-decompiler)

以下程序仅显示 postURL 值适用于 Java：

```
public class A {
    public static void main(String[] args) throws MalformedURLException {
        String s = "http://xxx.ccc.local/upload/up.php?aa=0&bb=Alvar%E1%2Ffg&cc=1028&from=documentos";

        URL url = new URL(s);
        String protocol = url.getProtocol();
        System.out.println(String.format("A::main: protocol = '%s'", protocol));
    }
} 
```

# c# - 从 Observable.Interval 中获取，直到另一个 observable 产生一个值

> ID：14278322
> 
> 赞同：3
> 
> 时间：2013-01-11T12:35:04.973
> 
> 标签：c#, system.reactive

我正在使用 RX 来查询来自自动化设备的事件，该设备连接有按钮。我希望能够区分用户刚刚按下并立即释放按钮，或者他是否按住按钮一段时间。我用来查看他是否按住按钮的查询有问题。

基本思想是一旦按钮被按下，我会每半秒产生一个值，直到按钮再次被释放。我还给每个值加上时间戳，这样我就知道按钮被按下了多长时间。

这是我的代码，以及我认为这应该如何工作：

```
public IObservable<DigitalInputHeldInfo> Adapt(IObservable<EventPattern<AdsNotificationEventArgs>> messageStream) {
  var startObservable = 
    _digitalInputPressedEventAdapter.Adapt(messageStream);
  var endObservable = 
    _digitalInputReleasedEventAdapter.Adapt(messageStream);

  return from notification in startObservable.Timestamp()

    from interval in 
        Observable.
        Interval(
            500.Milliseconds(),
            _schedulerProvider.ThreadPool).
        Timestamp().
        TakeUntil(endObservable)

    select new DigitalInputHeldInfo(
            interval.Timestamp.Subtract(notification.Timestamp),
            notification.Value);
} 
```

从给定的 IObservable 中，我正在对其应用查询，以便我有一个可观察的*startObservable*，每次按下按钮时都会产生一个值（状态从*false*变为*true*）。我还有一个可观察的*endObservable*，从同一个源 observable 查询，它在按钮再次释放时产生一个值（状态从*true*变为*false*）。当*startObservable*产生一个值时，我每 500 毫秒开始一个可观察的时间间隔。我给这些值加上时间戳，并从中获取，直到*endObservable*产生一个值。然后我返回一个包含*startObservable值的对象*到现在为止已经坚持了多久。

我对此进行了单元测试，我按住按钮 2 秒钟（使用 TestScheduler），释放它，然后让调度程序继续运行几秒钟。我这样做是为了确保在释放按钮后不再产生任何值。

这是我的测试失败的地方，也是我的问题的主题。在我的测试中，我预计会产生 4 个值（在 0.5 秒、1 秒、1.5 秒和 2 秒之后）。但是，即使我使用的是*TakeUntil(endObservable)* ，在按钮释放后仍然会产生事件（产生 endObservable 的*digitalInputReleasedEventAdapter**有*自己的一组测试，我相信它会按应有的方式工作） .

我认为我没有错误地构建我的查询。我怀疑这可能与热与冷的可观察物有关。但由于我刚开始使用 RX，我并不完全了解这可能与我在这里遇到的问题有什么关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:15:16.403

不确定这是否完全符合您的要求，但它是“另一种方法”：

```
void Main()
{
    // ButtonPush returns IObservable<bool>
    var buttonPusher = ButtonPush();
    var pushTracker = 
        from pushOn in buttonPusher.Where(p => p).Timestamp()
        let tickWindow = Observable.Interval(TimeSpan.FromMilliseconds(500))
        from tick in tickWindow
            .TakeUntil(buttonPusher.Where(p => !p))
            .Timestamp()
            .Select(t => t.Timestamp)
        select tick;

    Console.WriteLine("Start: {0}", Observable.Return(true).Timestamp().First().Timestamp);
    var s = pushTracker
        .SubscribeOn(NewThreadScheduler.Default)
        .Subscribe(x => Console.WriteLine("tick:{0}", x));
}

IObservable<bool> ButtonPush()
{
    var push = new BehaviorSubject<bool>(false);    
    var rnd = new Random();
    Task.Factory.StartNew(
        () => 
        {
            // "press button" after random # of seconds
            Thread.Sleep(rnd.Next(2, 5) * 1000);
            push.OnNext(true);
            // and stop after another random # of seconds
            Thread.Sleep(rnd.Next(3, 10) * 1000);
            push.OnNext(false);
        });
    return push;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:25:57.433

听起来您想要的是仅在按钮按下时接收时间事件。[`CombineLatest`](http://msdn.microsoft.com/en-us/library/hh211991%28v=vs.103%29.aspx)应该在这里帮助你。

例如：

```
using Microsoft.Reactive.Testing;
using System;
using System.Diagnostics;
using System.Reactive.Linq;
using System.Reactive.Subjects;

namespace ButtonTest
{
    class Program
    {
        enum State
        {
            KeyDown, KeyUp
        }

        static void Main(string[] args)
        {
            var buttonState = new BehaviorSubject<State>(State.KeyUp);
            var testScheduler = new TestScheduler();
            var events = testScheduler.CreateObserver<long>();

            Observable.Interval(TimeSpan.FromTicks(100), testScheduler)
                .CombineLatest(buttonState, (t,s)=> new { TimeStamp = t, ButtonState = s })
                .Where(t => t.ButtonState == State.KeyDown)
                .Select(t => t.TimeStamp)
                .Subscribe(events);

            testScheduler.AdvanceBy(100);//t=0
            testScheduler.AdvanceBy(100);//t=1

            buttonState.OnNext(State.KeyDown);
            testScheduler.AdvanceBy(100);//t=2

            testScheduler.AdvanceBy(100);//t=3
            buttonState.OnNext(State.KeyUp);

            testScheduler.AdvanceBy(100);//t=4
            testScheduler.AdvanceBy(100);//t=5

            buttonState.OnNext(State.KeyDown);
            testScheduler.AdvanceBy(100);//t=6

            buttonState.OnNext(State.KeyUp);

            testScheduler.AdvanceBy(100);//t=7
            testScheduler.AdvanceBy(100);//t=8

            Debug.Assert(events.Messages.Count == 5);
            Debug.Assert(events.Messages[0].Value.Value == 1);
            Debug.Assert(events.Messages[1].Value.Value == 2);
            Debug.Assert(events.Messages[2].Value.Value == 3);
            Debug.Assert(events.Messages[3].Value.Value == 5);
            Debug.Assert(events.Messages[4].Value.Value == 6);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T18:46:13.267

不确定这是否是错误，但您的 TimeStamp 调用未包含测试调度程序。检查所有采用 IScheduler 参数的运算符，并确保它们在测试调度程序中传递。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T15:56:29.573

我找到了解决方案。

```
public IObservable<DigitalInputHeldInfo> Adapt(
  IObservable<EventPattern<AdsNotificationEventArgs>> messageStream) {

  var startObservable = _digitalInputPressedEventAdapter.
      Adapt(messageStream).
      Publish();
  var endObservable = _digitalInputReleasedEventAdapter.
      Adapt(messageStream).
      Publish();

  startObservable.Connect();
  endObservable.Connect();

  return from notification in startObservable.Timestamp()
         from interval in Observable.Interval(500.Milliseconds(), 
                                              _schedulerProvider.ThreadPool).
                          Timestamp().
                          TakeUntil(endObservable)
         select new DigitalInputHeldInfo(
                interval.Timestamp.Subtract(notification.Timestamp), 
                notification.Value);
} 
```

我将此代码隔离到控制台应用程序中，并从 IEnumerable<> 构造源 observable（此处称为*messageStream*），该 IEnumerable<> 产生了一些真值和假值。我看到这个 IEnumerable<> 生成了几次，所以肯定有几个线程启动了。我相信产生的值被 Observable.Interval 的单独实例消耗，并且这些实例相互竞争以接收指示按钮释放的消息。所以现在我在 startObservable 和 endObservable 上调用 Publish() 和 Connect()，所以 Observable.Interval 实例共享同一个订阅。

# sql-server - 根据条件删除 SQL Server 中的 XML 节点

> ID：14278323
> 
> 赞同：2
> 
> 时间：2013-01-11T12:35:04.493
> 
> 标签：sql-server, xml

我有看起来像的xml

```
<MeasureSet>
    <MeasureSetType val_type="name">Variant</MeasureSetType>
    <Measure>
      <MeasureType val_type="name">single nucleotide variant</MeasureType>
      <AttributeSet>
        <MeasureAttributeType val_type="name">HGVS</MeasureAttributeType>
        <Attribute>NM_000054.4:c.838dupT</Attribute>
      </AttributeSet>
      <Citation>
        <CitationType val_type="name">general</CitationType>
        <ID Source="PubMed">10820168</ID>
      </Citation>
      <Citation>
        <CitationType val_type="name">general</CitationType>
        <ID Source="PubMed" />
      </Citation>
      <Citation>
        <CitationType val_type="name">general</CitationType>
        <ID Source="PubMed">9773787</ID>
      </Citation>
      <Citation>
        <CitationType val_type="name">general</CitationType>
        <ID Source="PubMed">18726898</ID>
      </Citation>
      <Citation>
        <CitationType val_type="name">general</CitationType>
        <ID Source="PubMed" />
      </Citation>
    </Measure>
  </MeasureSet> 
```

我想删除具有 Citation/ID/@Source = "PubMed" 且 Citation/ID 为空的 Citation 元素节点

这只会删除 ID 元素，但会删除正确的元素

```
SET @myBlob.modify('delete //Citation/ID[@Source = ''PubMed''
      and string-length(string(number(.))) = 0]') 
```

这会删除所有引文元素

```
SET @myBlob.modify('delete //Citation[ID/@Source = ''PubMed''
      and string-length(string(number(.))) = 0]') 
```

似乎应该有一个我没有想到的简单解决方案。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:53:45.397

您的第二个是检查错误元素的长度 - 它正在查看`(.)`，这是`Citation`元素（因为它位于`Citation`元素的谓词中）。改为使用

```
SET @myBlob.modify('
      delete //Citation[ID/@Source = ''PubMed'' 
                        and string-length(string(number(ID[1]))) = 0]') 
```

我已更改`.`为`ID[1]`. `[1]`是必需的，因为“ `'number()' requires a singleton (or empty sequence)`”。

# python - python-gnupg：检索签名消息的公钥

> ID：14278325
> 
> 赞同：1
> 
> 时间：2013-01-11T12:35:16.583
> 
> 标签：python, pgp, public-key, gnupg

我想知道生成加密/签名 PGP 消息的用户的公钥。

我查看了 python-gnupg API，但我刚刚找到了如何检查签名是否正常

```
GPG().verify(data) 
```

如果可以验证签名，则说明公钥在密钥环中。我怎样才能找到它是哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:42:08.547

您想查看方法返回`fingerprint`的对象的属性。例如：`gnupg.Verify``verify`

```
>>> gpg = gnupg.GPG()
>>> v = gpg.verify(data)
>>> v.fingerprint
u'3D2822FCA7D73D07F65B1514C9A99684DEDF97D5' 
```

然后，您可以过滤`list_keys`以找到有问题的密钥：

```
>>> [k for k in gpg.list_keys(v.fingerprint)
     if k['fingerprint'] == v.fingerprint] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:37:33.630

PGP 不在签名/加密消息中存储公钥，它存储密钥标识符（公钥字段散列的 8 字节部分）。因此，您应该在文档中查找名为“key id”的内容。这里是：

验证签名时，签名者信息保存在已验证的属性中：username、key_id、signature_id、fingerprint、trust_level 和 trust_text。

# c# - 用于异常处理的 NUnit C# 语法

> ID：14278328
> 
> 赞同：0
> 
> 时间：2013-01-11T12:35:24.860
> 
> 标签：c#, exception, nunit

我需要为一些枚举值集合编写测试。当使用其中的一部分时，我预计会出现异常，我的测试需要处理它。

`[ExpectedException]`我可以用我的枚举值和参数编写测试方法。我可以编写使用 foreach 枚举预期会引发异常的枚举值的方法。但在这种情况下，我认为将引发第一个异常并且不会检查其余枚举值。

如何正确枚举枚举值并使用单个或 2 个可能的方法检查异常？

我只是不想为我需要检查的每个枚举值使用一种新方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:38:17.177

您可以将 NUnits 参数化测试与该`TestCase`属性一起使用。

这将允许您编写两个测试：一个用于应该引发异常的枚举值，另一个用于不应引发异常的枚举值。

```
[Test]
[TestCase(MyEnum.ExceptionValue1)]
[TestCase(MyEnum.ExceptionValue2)]
[TestCase(MyEnum.ExceptionValue3)]
public void MethodShouldThrowForInvalidValues(MyEnum value)
{
    var sut = new MyClass();

    Assert.Throws<MyException>(() => sut.MyMethod(value));
}

[Test]
[TestCase(MyEnum.ValidValue1)]
[TestCase(MyEnum.ValidValue2)]
[TestCase(MyEnum.ValidValue3)]
public void MethodShouldNotThrowForValidValues(MyEnum value)
{
    var sut = new MyClass();

    sut.MyMethod(value);

    Assert.True(true);
} 
```

* * *

另一种方法是使用返回所有枚举值的类型或属性，该方法应为其抛出异常：

```
[Test]
[TestCaseSource("InvalidEnumValues")]
public void MethodShouldThrowForInvalidValues(MyEnum value)
{
    var sut = new MyClass();

    Assert.Throws<MyException>(() => sut.MyMethod(value));
}

public IEnumerable<MyEnum> InvalidEnumValues
{
    get
    {
        // here you can put a foreach if you like
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:50:58.677

以下是 TestCaseSource 如何帮助大型数据驱动测试的示例：

这是一种定义测试数据源的方法 -

```
private class InputData
{
    private Dictionary<string, string> _keywords;
    public InputData()
    {
        _keywords = new Dictionary<string, string>
                       {
                           {"abc", "test case 1"},
                           {"xyz", "test case 2"},
                       };
    }
} 
```

它的用法：

```
[TestCaseSource(typeof(InputData), "_keywords")]
public void MethodShouldNotThrowForValidValues(KeyValuePair<string, string> value)
{
    var sut = new MyClass();

    var val = sut.MyMethod(value);

    Assert.True(val);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:41:35.750

您的测试代码可能如下所示。考虑`TestMethod`拆分成两种方法，这样就不需要传递`bool`标志

```
[TestFixture]
class Test
{

    [TestCase(MyEnum.Foo, false)]
    [TestCase(MyEnum.Bar, true)]
    public void TestMethod(MyEnum myEnum, bool shouldExceptionBeThrown)
    {
        if (shouldExceptionBeThrown)
            Assert.Throws<Exception>(() => MethodUnderTest(myEnum));
        else
            MethodUnderTest(myEnum);
    }

    public void MethodUnderTest(MyEnum myEnum)
    {
        if(myEnum == MyEnum.Bar)
            throw new Exception();
    }
}

internal enum MyEnum
{
    Foo,
    Bar
} 
```

# google-analytics - 使用谷歌分析跟踪外国网址

> ID：14278330
> 
> 赞同：0
> 
> 时间：2013-01-11T12:35:30.463
> 
> 标签：google-analytics, analytics, google-analytics-api

我有一个属于我的网站 (https://www.mysite.com/) 的 URL (https://www.mysite.com/tab/subtab/)。显然，要跟踪此 url 的点击次数，我所要做的就是将 utm_source、utm_medium 和 utm_campaign 参数附加到它。
现在，我想做的是跟踪一个网址[http://www.notmysite.com/tab/subtab/](http://www.notmysite.com/tab/subtab/)。这个网址既不是我网站的一部分，也没有在我的谷歌分析帐户的任何地方提及，只有链接可用于修改。如果我在此处附加 utm_* 参数，“点击”信息会转到[http://www.notmysite.com](http://www.notmysite.com)网站所有者的 GAQ 帐户，而不是我的（显然！）。这个外国网址应该附加什么参数，以便我可以跟踪它的点击？如果谷歌分析无法做到这一点，还有其他选择吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:15:10.430

您将需要查看事件跟踪来跟踪链接的点击次数。

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Anatomy](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Anatomy)

以谷歌文档为例：

```
<a href="http://www.notmysite.com/" onClick="_gaq.push(['_trackEvent', 'Link', 'Click', 'Not My Site']);" target="_blank">Click here</a> 
```

现在，对该链接的任何点击都将显示在 Analytics 中的 Content -> Events 下。请注意，我如何添加 target="_blank" 以确保外部链接事件的准确性，因为没有足够的时间将数据发送给 Google。一种解决方法是通过 javascript 添加延迟，如果您要跟踪更多点击，这是一种更好的方法。

# ms-access - 如何从 MDB 文件中提取图像和声音文件

> ID：14278338
> 
> 赞同：0
> 
> 时间：2013-01-11T12:35:51.993
> 
> 标签：ms-access

我有一个 MDB 文件，其中包括许多图像和波形文件。我需要提取它们。

我尝试使用 access 2007 打开 MDB 文件。我可以看到几个表，4 个或 5 个。我可以看到其中的记录。我还尝试使用 Mac book 上的工具打开它。我可以看到大约 20 张桌子。我也可以查看记录。

但是，我怎样才能得到这些文件？从记录中，我可以看到许多字段的值，例如“pic\m1.jpg”、“s1\sound\a1.wav”。

我可以确保该文件存在于这个数据库文件中。但我只是不知道如何提取它们。

# amazon-s3 - 我可以更新现有的 Amazon S3 对象标头属性吗？

> ID：14278343
> 
> 赞同：4
> 
> 时间：2013-01-11T12:36:15.363
> 
> 标签：amazon-s3, amazon

我有一个视频文件的 Content-Type 为空的问题，并且想根据文件的扩展名使用 Content-Type: video/** 更新这些对象。但是，当我对内容类型相同的密钥/存储桶使用 put 方法时，它会被“0”内容长度覆盖。

[我可以更新现有的 Amazon S3 对象吗？](https://stackoverflow.com/questions/9517198/can-i-update-an-existing-amazon-s3-object)链接说 put 将覆盖不符合我目的的文件 s3 对象。

注意：我不想使用 java sdk。由于移动设备的内存限制，我想使用普通的 java httpput。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:22:10.490

您可以尝试使用具有相同源和目标的[PUT COPY请求。](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html)

```
PUT /yourvideo.flv HTTP/1.1
Host: bucket.s3.amazonaws.com
Date: Wed, 28 Oct 2009 22:32:00 GMT
x-amz-copy-source: /bucket/yourvideo.flv
Authorization: AWS AKIAIOSFODNN7EXAMPLE:0RQf4/cRonhpaBX5sCYVf1bNRuU= 
```

显然[python boto](https://github.com/boto/boto/blob/develop/boto/s3/key.py)以这种方式修改元数据

是的，我可以确认，副本正在工作：

```
PUT /test/123.png HTTP/1.1\r\n
Host: yourbucket.s3.amazonaws.com\r\n
Accept-Encoding: identity\r\n
Content-Length: 0\r\n
x-amz-storage-class: STANDARD\r\n
x-amz-copy-source: yourbucket/test/123.png\r\n
Date: Fri, 11 Jan 2013 15:16:48 GMT\r\n
Content-Type: image/gif\r\n # this is the content-type set
Authorization: AWS AKXXXXXDDRXXXXXX63CA:RcktkZ9nPwsXXXXXd+KXXXXXY=\r\n
x-amz-metadata-directive: REPLACE\r\n
\r\n 
```

**S3 回复：**

```
HTTP/1.1 200 OK
x-amz-id-2: Vf1bRJd+e4ru0y73GB0Ra0xYB2vv6GLWYKsHAC4AzE+a8uZB56Xy8+YTDkJ0/wfN
x-amz-request-id: C0E6A2823F3FB3E9
Date: Fri, 11 Jan 2013 15:16:49 GMT
Content-Type: application/xml
Content-Length: 234
Server: AmazonS3 
```

**确认：**

```
HEAD /test/123.png HTTP/1.1\r\n
Host: yourbucket.s3.amazonaws.com\r\n
Accept-Encoding: identity\r\n
Date: Fri, 11 Jan 2013 15:25:23 GMT\r\n
Content-Length: 0\r\n
Authorization: AWS AXXXIXXXXMDDXXXXX7XXXCA :HoZ4Woxxw6SWlxxxx000Rxxm8ODQ=\r\n
\r\n 
```

S3 以正确的内容类型回复（我错误设置为 image/gif 而不是 image/png 的内容类型）

```
HTTP/1.1 200 OK
x-amz-id-2: 7Ut6sdm6i+1h7Di5UrB4v9Sn3mVCNjyDnkb4rm1jGzN6wBTgDT2/yCSHdrKG12Jd
x-amz-request-id: 38A1F6EC6ECD1D2D
Date: Fri, 11 Jan 2013 15:25:24 GMT
Last-Modified: Fri, 11 Jan 2013 15:25:24 GMT
ETag: "c09fad0faf4e6bb1148670af78b6de41"
Accept-Ranges: bytes
Content-Type: image/gif
Content-Length: 122311
Server: AmazonS3 
```

# ruby-on-rails - Rails：找不到或无法读取要导入的文件：“bootstrap”

> ID：14278344
> 
> 赞同：14
> 
> 时间：2013-01-11T12:36:20.153
> 
> 标签：ruby-on-rails, twitter-bootstrap

我对编程比较陌生，因此我希望这个问题不是绝对愚蠢的。

我遇到了关于我的 Rails 应用程序的问题。

我尝试使用引导程序。我构建了一个名为“custom.css.scss”的文件并在其中使用了“@import“bootstrap””行。

问题是：每次我保存我的“custom.css.scss”文件时，都会自动生成一个新文件“custom.css”，我收到以下消息：“custom.css.scss File to import not found or unreadable:bootstrap ”。

有趣的是：当我删除文件“custom.css.scss”并刷新我的浏览器时，一切都很好（这意味着：使用了引导程序）。

你有什么想法，可能是什么原因？

最亲切的问候克里斯

PS：这是我安装的gem文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  # gem 'guard-rspec', '1.2.1'
  # gem 'guard-spork', '1.2.0'  
  # gem 'spork', '0.9.2'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
  gem 'launchy', '2.1.0'
  # gem 'rb-fsevent', '0.9.1', :require => false
  # gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

custom.css.scss 文件如下所示

```
@import "bootstrap";

/* universal */

html {
    overflow-y:scroll
}

body {
    padding-top: 60px
}

section {
    overflow: auto;
}

textarea {
    resize: vertial;
}

.center {
    text-align: center;
}

.center h1 {
    margin-bottom: 10px;
}

/* typography */

h1, h2, h3, h4, h5, h6 {
    line-height: 1
}

h1 {
    font-size: 3em;
    letter-spacing: -2px;
    margin-bottom: 30px;
    text-align: center;
}

h2 {
    font-size: 1.7em;
    letter-spacing: -1px;
    margin-bottom: 30px;
    text-align: center;
    font-weight: normal;
    color: #999;
}

p {
    font-size: 1.1em;
    line-height: 1.7em;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-02T18:20:21.193

我遇到了类似的问题，看到了Habax的解决方案，先尝试了最后一步。

**我刚刚重新启动了服务器。**

事实证明这已经足够了。希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-24T10:32:11.707

**在使用Bootstrap 4处理****Rails 6**应用程序时，我遇到了类似的问题。

 **问题是我没有在我的文件中指定文件的**节点模块**完整路径。`bootstrap.scss``app/assets/stylesheets/application.scss`

使用以下命令安装**Bootstrap 4**及其依赖项后：

```
yarn add bootstrap jquery popper.js 
```

我需要做的就是修改它：

```
@import "bootstrap"; 
```

至

```
@import 'bootstrap/scss/bootstrap'; 
```

然后，您可以通过这种方式在文件中添加要求`boostrap.js`文件`app/javascript/packs/application.js`：

```
require("bootstrap"); 
```

就这样。

**我希望这有帮助**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T19:16:21.390

我有一个类似的问题，我将文件类型从 css 更改为 scss。我敢打赌，如果您从文件名中删除“.css”，它将起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-10T07:10:27.537

面临同样的问题。我将 custom.css.scss 重命名为 custom.css，并在 Gemfile 中指定了 ruby​​ 的版本。并捆绑安装。在我的情况下：红宝石'2.0.0'

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-22T22:46:16.803

在新应用程序中遇到了同样的问题，但重新启动开发服务器解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T16:26:33.470

我遇到了同样的问题，通过将 bootstrap-sass 和 sass-rails 版本修复为：

```
gem 'sass-rails', '~> 3.2'
gem 'bootstrap-sass', '~> 2.3.1.0' 
```

然后`bundle install`服务器重启。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-10T13:30:30.467

我只是想通过我的决议作为参考。我今天也遇到了这个问题。如果您还使用带有 scss 模式的 emacs，它可能会有所帮助。默认情况下，当您保存 scss 文件时，emacs 将自动编译这些 scss 文件并创建一个响应的 .css 文件。那么你只需要删除这些 .css 文件。或将以下代码放入 .emacs 作为永久修复

```
(setq scss-compile-at-save nil) ;; disable the auto-compilation 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-06T14:06:05.980

**我在我的scss**文件中遇到了同样的问题，即“找不到或无法读取要导入的文件：引导程序” 。我刚刚通过将**“bootstrap-sass”**的require语句添加到**config.ru**文件来解决。我的**config.ru**如下所示。

```
# This file is used by Rack-based servers to start the application.

require ::File.expand_path('../config/environment',  __FILE__)
require 'bootstrap-sass' #require statement of bootstrap-sass
run Rails.application 
```**

# c# - 如何在listview控件中打开listview窗口资源管理器

> ID：14278350
> 
> 赞同：0
> 
> 时间：2013-01-11T12:36:30.827
> 
> 标签：c#, winforms

我有一个工作正常的列表视图窗口浏览器。我通过文件夹浏览器打开文件夹，该特定目录中的文件和文件夹通过使用在列表视图中打开

```
PopulateListView(path) 
```

现在在我的鼠标双击事件中，我打开了一个特定的文件和文件夹，它会打开文件，但是当它打开目录时会弹出一个新窗口。我希望在 listview 控件中打开该目录...此场景的代码是

```
private void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
        {
            string pathdoubleClicked = listView1.FocusedItem.Tag.ToString();
          PopulateListView(pathdoubleClicked);

            Process.Start(pathdoubleClicked);
             simpleStack.Push(pathdoubleClicked);
        } 
```

现在我想用 if else 来做，如果路径是 drectory 然后去 populatelistview 方法其他明智的 process.start 但它现在工作任何想法我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:41:18.210

据我了解，如果路径是目录，您希望在双击时显示其内容。如果它是一个文件，你想打开它。

因此，您只需执行以下操作：

```
private void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
{
    string pathdoubleClicked = listView1.FocusedItem.Tag.ToString();

    if (System.IO.Directory.Exists(pathdoubleClicked))
    {
        PopulateListView(pathdoubleClicked);
    }
    else
    {
        Process.Start(pathdoubleClicked);
    }

    // ?
    simpleStack.Push(pathdoubleClicked);
} 
```

# filenet-p8 - 更改文件的保留时间

> ID：14278351
> 
> 赞同：0
> 
> 时间：2013-01-11T12:36:32.620
> 
> 标签：filenet-p8, filenet-content-engine

是否可以更改已提交文件的保留期限？

如果您需要动态保留期怎么办？一种可能性是创建 2 个存储区域并将文件从一个存储移动到另一个存储。但这不是一个好的解决方案。有没有其他可能解决这个问题？=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:18:13.487

存储区只解决存储“内容元素”（文件）的问题。是的，我想，如果底层存储设备具有某种处置机制，这可能允许您进行一些控制。但它不会删除相关的元数据，坦率地说它看起来不是很干净......而且您将需要一些自定义机制来“移动文件”。

Records Manager 产品旨在处理保留和处置问题。由于您的问题相当广泛，我只是鼓励您阅读有关此主题的“红皮书”：[http](http://www.redbooks.ibm.com/abstracts/sg247623.html) ://www.redbooks.ibm.com/abstracts/sg247623.html 。

如果您没有 Records Manager，我建议您通过使用 CE API 而不是在存储级别删除内容的自定义组件来实现处置。这将“干净地”摆脱一切，您将能够使用文档元数据更好地控制处置特征。

# html - 在“td”标签的底部放置一个独立的“a”标签

> ID：14278352
> 
> 赞同：0
> 
> 时间：2013-01-11T12:36:33.273
> 
> 标签：html, css

嘿伙计们，我有以下布局：

```
<table>
  <tr>
    <td>
      <div>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
      </div>
    </td>
    <td>
      <div>
        I´m smaller than the other<br>
        I´m smaller than the other
      </div>
      <a href="">I should be at the bottom of my parent td</a>
    </td>
  </tr>
</table> 
```

[http://jsfiddle.net/BqxuM/](http://jsfiddle.net/BqxuM/)

现在我想将 a-tag 放在 td-tag 底部的第二个 td-tag 中！我尝试了许多不同的方法来实现这一点，但没有成功。

那么有人有答案让我让它工作吗？

PS：如果这可以在没有 js/jquery“hacks”的情况下完成，我会非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:39:33.483

如果这是您将使用的唯一结构，而不是使用`position: relative;`for`<table>`和`position: absolute;`for`<a>`

[**演示**](http://jsfiddle.net/BqxuM/2/)

CSS

```
table {
  border: solid 1px black;
  position: relative;
}

td {
  padding: 5px;
  border: solid 1px black;
}

a {
  position: absolute; 
  bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:39:51.753

css

```
.my-bottom-link-parent {
  position:relative;
  /* padding-bottom: the height of the a element */
}

.my-bottom-link-parent a {
  position:absolute;
  bottom:0;
} 
```

html

```
<table>
  <tr>
    <td>
      <div>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
        I´m bigger than the other<br>
      </div>
    </td>
    <td class="my-bottom-link-parent">
      <div>
        I´m smaller than the other<br>
        I´m smaller than the other
      </div>
      <a href="">I should be at the bottom of my parent td</a>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:41:25.603

它必须在同一个td中吗？

这个怎么样：

```
<table>
    <tr>
        <td>
            <div>big<br /> div</div>
        </td>
        <td>
            <div>small div</div>
        </td>
    </tr>
    <tr>
        <td>
        </td>
        <td>
            <a href="#">link here</a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T12:39:50.593

使用相对位置：

```
td {
  padding: 5px;
  border: solid 1px black;
  position: relative;
}

td a {
  position: absolute;
  bottom: 0px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T12:50:14.200

这是一个示例，您可以如何做到这一点：

父：位置：相对；孩子：位置：绝对；显示：块；底部：0；

```
td {
padding: 5px;
border: solid 1px black;
position:relative;
}

 a{
 display:block;
 bottom:0;
 position:absolute;
} 
```

[http://jsfiddle.net/BqxuM/4/](http://jsfiddle.net/BqxuM/4/)

# angularjs - 如何在浏览器中调试角度服务

> ID：14278355
> 
> 赞同：39
> 
> 时间：2013-01-11T12:36:32.860
> 
> 标签：angularjs

我在我的 Angular 应用程序中创建了一个工厂/服务。

我想在浏览器中调试它。有没有办法我可以访问它的实例并检查它的函数和变量的值是什么。

角度范围可以使用

```
angular.element(e).scope() 
```

有没有类似的方式来访问工厂？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-11T14:08:43.487

我相信你可以使用这样的东西：

```
angular.element(e).injector().get('serviceName') 
```

而且由于 angularjs 服务是**单例**的，因此在任何*angular.element*上执行此操作将始终返回相同的服务实例/对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T15:24:43.270

将您的服务注入任何控制器，然后`console.log(myService);`

[小提琴](http://jsfiddle.net/mrajcok/V3EvS/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-04T10:23:05.447

就像@bmleite 所说，您可以使用：

```
angular.element( {DOM element} ).injector().get('serviceName') 
```

您可以选择想要的 DOM 元素（使用 Chrome 开发者工具上的“元素”选项卡或 Firefox/Firebug 上的“HTML”选项卡），然后在“控制台”选项卡中使用 $0 指向它。

要选择的最简单的元素是您有 ngApp 指令的元素。最终代码是：

```
var myService = angular.element($0).injector().get('serviceName'); 
```

然后你可以访问他的所有变量和函数：

```
myService.getConfig('dev'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-22T18:46:35.450

尝试[ng-inspect](https://chrome.google.com/webstore/detail/ng-inspect/cidepfmbgngpdapgncfhpecbdhmnnemf/related?hl=en-US&gl=IN) chrome 扩展。

控制台中的 $get('serviceName') 将返回服务或工厂实例。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-16T01:16:08.900

我不确定它是如何检查*服务*的，但是**Angular Batarang**是一个很棒的 Chrome 扩展，用于调试 Angular 应用程序。可能会有所帮助。

[https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk)

Batarang 的有用文档：

[http://www.c-sharpcorner.com/UploadFile/9c2805/getting-started-with-angularjs-batarang/](http://www.c-sharpcorner.com/UploadFile/9c2805/getting-started-with-angularjs-batarang/)

# android - 按升序对 SMS 消息进行排序

> ID：14278356
> 
> 赞同：3
> 
> 时间：2013-01-11T12:36:34.547
> 
> 标签：android, sqlite, sms, android-contentprovider

当我在 Android 中查询 SMS 提供程序时，我会收到从旧消息到最新消息的消息。我正在使用以下查询：

```
Cursor cursor = getContentResolver().query(messagesUri,null,null,null,null); 
```

是否可以以相反的方式对其进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T13:06:50.817

解决方案是将最后一个参数从 转换`null`为`date ASC`：

```
Cursor cursor = getContentResolver().query(messagesUri,null,null,null,"date ASC"); 
```

# python - python在元组中去除空格

> ID：14278360
> 
> 赞同：0
> 
> 时间：2013-01-11T12:36:51.093
> 
> 标签：python

我有

```
k= (('answer ', ' Answer the call for a channel(answer )'), ('att_xfer ', ' Attended Transfer(att_xfer )'), ('bind_digit_action ', ' Bind a key sequence or regex to an action.(bind_digit_action )')) 
```

我想去掉所有多余的空格。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T12:37:39.757

如果您的意思是“额外空格”，则每个字符串开头和结尾的空格：

```
k = tuple(tuple(b.strip() for b in a) for a in k) 
```

如果要删除字符串中的一些其他“额外空格”（例如`(answer )`=> `(answer)`），则必须定义更多规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T12:45:18.077

如果要删除所有空格：

```
tuple(tuple("".join(i.split()) for i in a) for a in k) 
```

*出去：*

```
(('answer', 'Answerthecallforachannel(answer)'),
 ('att_xfer', 'AttendedTransfer(att_xfer)'),
 ('bind_digit_action',
  'Bindakeysequenceorregextoanaction.(bind_digit_action)')) 
```

或者如果您因此不需要元组：

```
from itertools import chain
["".join(i.split()) for i in chain.from_iterable(k)] 
```

*出去：*

```
['answer',
 'Answerthecallforachannel(answer)',
 'att_xfer',
 'AttendedTransfer(att_xfer)',
 'bind_digit_action',
 'Bindakeysequenceorregextoanaction.(bind_digit_action)'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:40:59.013

另一种方法是：

```
tuple(map(lambda x:tuple(map(lambda y:y.strip(),x)),k)) 
```

# matlab - 在matlab中从字符串中获取数字

> ID：14278364
> 
> 赞同：1
> 
> 时间：2013-01-11T12:37:09.887
> 
> 标签：matlab, find

我有一个字符串数组：

```
dd = {'L','temp1','temp23','Reas'}; 
```

我想从包含任何数字的字符串中提取数字（如果有意义的话）。所以，这个问题的答案应该是 1 和 23。

如何在 matlab 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:46:53.140

这是解决方案的一部分。认为

```
myString = 'temp23' 
```

然后表达式

```
str2double(a(isstrprop(a,'digit'))) 
```

将返回

```
23 
```

我没有时间把它变成一个函数来处理你的字符串数组，但这应该让你开始。

@DennisJahruddin 建议以下完成我的回答。我还没有彻底测试过：

```
dd = {'L','temp1','temp23','Reas'};
ee = cellfun(@(a) str2double(a(isstrprop(a,'digit'))),dd);
ff = ee(~isnan(ee)) 
```

# android - 如何管理片段之间的事务

> ID：14278366
> 
> 赞同：1
> 
> 时间：2013-01-11T12:37:12.767
> 
> 标签：android

在我的活动中，我有两个片段，一个在右侧，一个在左侧。在某些时候，我需要删除一个并添加另一个。但是当我删除左侧时，未删除的一个扩展，第二个添加到右边而不是左边。我给你看一个截图，这样你就可以理解我的意思了。我怎样才能防止蓝色片段改变位置？我用过`rightFrag.setRetainInstance(true);` ，但它不会工作。谢谢你的时间。

![在此处输入图像描述](../Images/6e27f36efc41660a034adfa2b1c0bf4d.png)

```
 public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {

private final Handler handler = new Handler();
private RoundedColourFragment leftFrag1;
private RoundedColourFragment leftFrag2;
private RoundedColourFragment leftFrag3;
private RoundedColourFragment leftFrag4;
private RoundedColourFragment currentFragment =null;
private RightFragment rightFrag;
private boolean useLogo = false;
private boolean showHomeUp = false;
private FragmentTransaction ft;
private static boolean onLoad=true;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ActionBar ab = getSupportActionBar();

    // set defaults for logo & home up
    ab.setDisplayHomeAsUpEnabled(showHomeUp);
    ab.setDisplayUseLogoEnabled(useLogo);

    // set up tabs nav
    for (int i = 1; i <= 4; i++) {
        ab.addTab(ab.newTab().setTabListener(this).setText("Tab "+ i));
    }

    // set up list nav
    ab.setListNavigationCallbacks(ArrayAdapter
            .createFromResource(this, R.array.sections,
                    R.layout.sherlock_spinner_dropdown_item),
            new OnNavigationListener() {
                public boolean onNavigationItemSelected(int itemPosition,
                        long itemId) {
                    // FIXME add proper implementation
                    rotateLeftFrag();
                    return false;
                }
            });

    // default to tab navigation
    showTabsNav();

    // create a couple of simple fragments as placeholders
    final int MARGIN = 16;
    leftFrag1 = new RoundedColourFragment(getResources().getColor(
            R.color.abs__bright_foreground_holo_dark), 1f, MARGIN, MARGIN / 2, MARGIN, MARGIN,R.layout.tab1);
    leftFrag2 = new RoundedColourFragment(getResources().getColor(
            R.color.abs__bright_foreground_holo_dark), 4f, MARGIN, MARGIN / 2, MARGIN, MARGIN,R.layout.tab2);
    leftFrag3 = new RoundedColourFragment(getResources().getColor(
            R.color.abs__bright_foreground_holo_dark), 1f, MARGIN, MARGIN / 2, MARGIN, MARGIN,R.layout.tab3);
    leftFrag4 = new RoundedColourFragment(getResources().getColor(
            R.color.abs__bright_foreground_holo_dark), 1f, MARGIN, MARGIN / 2, MARGIN, MARGIN,R.layout.tab4);

    rightFrag = new RightFragment(getResources().getColor(
            R.color.honeycombish_blue), 2f, MARGIN / 2, MARGIN, MARGIN,
            MARGIN);

    ft = getSupportFragmentManager().beginTransaction();

    ft.add(R.id.root, leftFrag1);

   ft.add(R.id.root, rightFrag);

    ft.commit();

    onLoad=false;
    currentFragment=leftFrag1;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main_menu, menu);

    // set up a listener for the refresh item
    final MenuItem refresh = (MenuItem) menu.findItem(R.id.menu_refresh);
    refresh.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        // on selecting show progress spinner for 1s
        public boolean onMenuItemClick(MenuItem item) {
            // item.setActionView(R.layout.progress_action);
            handler.postDelayed(new Runnable() {
                public void run() {
                    refresh.setActionView(null);
                }
            }, 1000);
            return false;
        }
    });
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // TODO handle clicking the app icon/logo
        return false;
    case R.id.menu_refresh:
        // switch to a progress animation
        item.setActionView(R.layout.indeterminate_progress_action);
        return true;
    case R.id.menu_both:
        // rotation animation of green fragment
        rotateLeftFrag();
        return true;
    case R.id.menu_text:
        // alpha animation of blue fragment
        ObjectAnimator alpha = ObjectAnimator.ofFloat(rightFrag.getView(),
                "alpha", 1f, 0f);
        alpha.setRepeatMode(ObjectAnimator.REVERSE);
        alpha.setRepeatCount(1);
        alpha.setDuration(800);
        alpha.start();
        return true;
    case R.id.menu_logo:
        useLogo = !useLogo;
        item.setChecked(useLogo);
        getSupportActionBar().setDisplayUseLogoEnabled(useLogo);
        return true;
    case R.id.menu_up:
        showHomeUp = !showHomeUp;
        item.setChecked(showHomeUp);
        getSupportActionBar().setDisplayHomeAsUpEnabled(showHomeUp);
        return true;
    case R.id.menu_nav_tabs:
        item.setChecked(true);
        showTabsNav();
        return true;
    case R.id.menu_nav_label:
        item.setChecked(true);
        showStandardNav();
        return true;
    case R.id.menu_nav_drop_down:
        item.setChecked(true);
        showDropDownNav();
        return true;
    case R.id.menu_bak_none:
        item.setChecked(true);
        getSupportActionBar().setBackgroundDrawable(null);
        return true;
    case R.id.menu_bak_gradient:
        item.setChecked(true);
        getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.ad_action_bar_gradient_bak));
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

private void rotateLeftFrag() {
    if (currentFragment!= null) {
        ObjectAnimator.ofFloat(currentFragment.getView(), "rotationY",0,360).setDuration(500).start();

    }
}

private void showStandardNav() {
    ActionBar ab = getSupportActionBar();
    if (ab.getNavigationMode() != ActionBar.NAVIGATION_MODE_STANDARD) {
        ab.setDisplayShowTitleEnabled(true);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    }
}

private void showDropDownNav() {
    ActionBar ab = getSupportActionBar();
    if (ab.getNavigationMode() != ActionBar.NAVIGATION_MODE_LIST) {
        ab.setDisplayShowTitleEnabled(false);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    }
}

private void showTabsNav() {
    ActionBar ab = getSupportActionBar();
    if (ab.getNavigationMode() != ActionBar.NAVIGATION_MODE_TABS) {
        ab.setDisplayShowTitleEnabled(false);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    }
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
    // FIXME add a proper implementation, for now just rotate the left
    // fragment

    System.out.println(tab.getPosition());

    if(!onLoad){

        ft = getSupportFragmentManager().beginTransaction();
        ft.remove(currentFragment);

        if(tab.getPosition()==0){
            ft.add(R.id.root, leftFrag1);
            currentFragment=leftFrag1;
        }else if(tab.getPosition()==1){
            ft.add(R.id.root, leftFrag2);
            currentFragment=leftFrag2;
        }else if(tab.getPosition()==2){
            ft.add(R.id.root, leftFrag3);
            currentFragment=leftFrag3;
        }else{
            ft.add(R.id.root, leftFrag4);
            currentFragment=leftFrag4;
        }

        ft.commit();
       // rotateLeftFrag();

    }
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
    // FIXME implement this
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
    // FIXME implement this
}

} 
```

我还有另外两个与片段有关的课程，如果您认为我应该发布它们，请告诉我。

# python - BeautifulSoup - 如何找到连续第三个 div

> ID：14278368
> 
> 赞同：2
> 
> 时间：2013-01-11T12:37:27.160
> 
> 标签：python, beautifulsoup

如何找到第三个连续的 div（不是下一个）

```
x = soup.find('div', attrs={'id': 'a'})
x.find_next('div').text 
```

我希望`<div id="d">`（之后连续第三个 div `div id="a"`）

```
<div id="a" class="text" >1</div>
<div id="b" class="text" >2</div>
<div id="c" class="text" >3</div>
<div id="d" class="text" >4</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:38:37.257

改为使用`find_all()`并将其用作带有索引的列表：

```
.find_all('div')[2] 
```

要查找第 n 个下一个兄弟，请使用`.find_next_siblings()`并选择第三个元素：

```
thirddiv = x.find_next_siblings('div')[2] 
```

# python - 如何在 Python/Django 中将此持续时间转换为天/小时/分钟/秒？

> ID：14278370
> 
> 赞同：1
> 
> 时间：2013-01-11T12:37:33.793
> 
> 标签：python, django, python-2.6

我有这样的持续时间：

```
(1, 2, 3, 11) 
```

它采用天/小时/分钟/秒格式。我怎样才能显示类似：`1 days, 2 hours and 3 minutes`. 我不需要秒。所以，如果持续时间是：

```
(0, 2, 3, 1) 
```

它应该显示为`2 hours and 3 minutes`. 如果持续时间是：

```
(0, 0, 3, 11) 
```

它应该显示为`3 minutes.`

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:51:05.887

这是 Python 2.6 和英语单数/复数的编辑答案：

```
def f(x):
    parts = ['%d %s%s' % (a, p, ('', 's')[a > 1]) for a,p in zip(x, ('day', 'hour', 'minute')) if a]
    return ' and '.join(c for c in [', '.join(parts[:-1]), parts[-1]] if c) 
```

测试：

```
>>> print f((1, 2, 3, 11))
1 day, 2 hours and 3 minutes

>>> print f((0, 2, 3, 1))
2 hours and 3 minutes

>>> print f((0, 0, 3, 11))
3 minutes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:48:56.640

你打算做多少？

如果它很多，并且会重复很多，你可以写一个函数来为你做；

```
def days(t):
    oxford_comma = False
    a = [" day", " hour", " minute"]
    s = []
    if len(t) != 4:
        return "incorrect format"
    else:
        for i in range(3):
            if t[i] != 0:
                plural = "s" if t[i] > 1 else ""
                s.append(str(t[i]) + a[i] + plural + ", ")

        if len(s) > 1:
            if not oxford_comma:
                s[-2] = s[-2].replace(",","")
            s.insert(len(s)-1,"and ")
        return "".join(s)[:-2]

    print days((1,2,3,11))      #1 day, 2 hours, and 3 minutes
    print days((0,2,3,1))       #2 hours, and 3 minutes
    print days((0,0,3,11))      #3 minutes
    print days((1,1,1,11))      #1 day, 1 hour, and 1 minute 
```

`oxford_comma`如果你想改变它。

它还考虑了复数。

抱歉，它有点乱——它肯定可以清理干净——很匆忙！

# android - 在 EditText 子类的 onDraw 中获取无效区域

> ID：14278371
> 
> 赞同：0
> 
> 时间：2013-01-11T12:37:35.060
> 
> 标签：android

我试图在 EditText 子类中覆盖 onDraw 以显示自定义字幕。我已经让它工作了，但是有一些错误。

基本上，我需要做的就是在视图左上角的某个偏移处绘制 StaticLayout。

不幸的是，我在 onDraw 方法中得到的只是画布。画布的大小等于整个屏幕的大小（在具有 320x480 显示器的设备上为 320x480），它的剪辑边界几乎可以是任何东西——它可以是整个视图；如果视图在滚动视图内并且部分可见，则它只能是视图的顶部或底部；它甚至可以是视图内的任意矩形，可能是因为超类仅使其部分区域无效。

因此，如果我有这个大小为 320x48 的视图，我可以获得大小为 320x480 的画布并剪切矩形（200、200、300、230）（左、上、右、下）。我不明白这个剪裁矩形如何映射到我的视图坐标。

我需要知道剪辑矩形的左上角相对于视图的左上角在哪里。不幸的是，我不知道如何得到这个。

**补充：**
此代码适用于我测试过的所有操作系统版本：

```
private int[] coordinates = new int[2];
private Matrix identityMatrix = new Matrix();

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.save();
    getLocationInWindow(coordinates);
    canvas.setMatrix(identityMatrix);
    canvas.translate(coordinates[0], coordinates[1]);
    //do the drawing in EditText coordinate space
    canvas.restore();
} 
```

但是，我仍然有一个问题：**为什么它有效？**
我正在尝试覆盖 View 类，它的 onDraw 方法总是会收到一个大小与 View 本身相匹配的画布。直接视图子类的画布将没有剪裁矩形。TextView （EditText 类的直接祖先）也是如此。但 EditText 就不一样了。传递给 EditText 的 onDraw 方法的画布将始终（或不？）具有屏幕大小和自定义剪辑矩形。这整个“通过窗口中的视图坐标进行翻译”似乎很hacky。我不明白为什么要翻译坐标空间。

我已经尝试破解android源代码以获得答案，但没有找到。EditText 没有自己的 onDraw。理论上，重写 TextView onDraw 和 EditText onDraw 应该没有区别。但是有区别。传递给 onDraw 方法的画布对象将根据其 TextView 或 EditText 不同而有所不同。为什么？**我怎么知道什么时候应该对矩阵应用变换，什么时候不应该？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:45:24.217

你可以用`View`. [getLocationOnScreen](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)方法

# android - 在 Android 中切换方向

> ID：14278372
> 
> 赞同：0
> 
> 时间：2013-01-11T12:37:36.833
> 
> 标签：android, orientation

我在从纵向到横向的方向之间切换时遇到任何麻烦。

我创建了这个页面是因为我没有添加图片的权限

[http://www.guitart.comyr.com/](http://www.guitart.comyr.com/)

有我的代码和两张图片。

我尝试制作一些小应用程序来测试切换，我制作了与您在页面上看到的相同的文件夹，这个小测试应用程序运行良好。但我原来的应用程序不起作用。

对不起英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:48:14.487

您是否尝试过从布局文件夹中复制布局文件并将其粘贴到“layout-land”中。检查视图的 ID，因为 logcat 在 onCreate 中显示 nullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:50:23.380

你有

```
<Button
   android:id="@+id/btn_menu_info"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentRight="true"
   android:layout_alignParentTop="true"
   android:background="@drawable/info64"
   android:src="@drawable/info64" /> 
```

在两个 menu.xml layouts(layout|layout-land) 文件夹中？如果您将方向更改为横向，您的应用会自动使用 layout-land 文件夹中的 xml。Eclipse 无法识别 ID 是否存在于两个方向。Eclipse 不能阻止您构建，因为它没有错误，但它至少可以给您一个警告 imo。

没问题 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:46:08.283

```
<Button
        android:id="@+id/btn_menu_info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/info64"
        android:src="@drawable/info64" /> 
```

消除

```
android:src="@drawable/info64" 
```

此按钮属性的行。这就是问题。你就完成了。

# c - 从 C 调用英特尔 8086 汇编程序

> ID：14278373
> 
> 赞同：1
> 
> 时间：2013-01-11T12:37:37.803
> 
> 标签：c, assembly, intel, x86-16

我需要为汇编语言开发一个过程并从 C 语言调用该过程（传递一个字符串并返回一个整数值）。我的组装程序“独立”运行良好。我需要帮助将它们连接在一起。

程序应该在 Intel 8086 上运行。我需要使用 MASM 或 emu8086 作为汇编器/模拟器。请推荐一个 C 编译器，以及一种制作能够调用汇编程序并获取返回值的简单 C 程序的方法。

如何将字符串传递给这个外部函数？
如何连接 ASM 文件和 C 文件？（编译器如何知道这个过程的定义/代码在哪里？）
我怎样才能从汇编语言中获取从 C 发送的字符串，以及如何将整数返回给 C？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:41:09.447

> 推荐一个C编译器

没有足够的信息，但是如果您的平台足够重要，那么 GCC 很可能已经支持它。

> 也是一种制作能够调用汇编程序并获取返回值的简单C程序的方法。

编写简单的 C 程序的方法是使用文本编辑器。（哦，等等，你对代码感兴趣？它是这样的：

```
#include <stdio.h>

extern int foo();

int main()
{
    int i = foo();
    printf("%d\n", i);
    return 0;
} 
```

# php - 在验证域方面需要帮助

> ID：14278381
> 
> 赞同：0
> 
> 时间：2013-01-11T12:37:59.737
> 
> 标签：php, regex, dns

我需要帮助来验证域。这是我用来验证的 reg-ex：`/^[a-z\d][a-z\d-]{0,62}$/i`

它满足了我的需求，但无法验证 www.google*.com 或 www.google*.com* 之类的域。我不想保存这些类型的域。

这是我正在使用的功能：

```
$pieces = explode(".",$domain_name);
foreach($pieces as $piece) {
    if (!preg_match('/^[a-z\d][a-z\d-]{0,62}$/i', $piece) || preg_match('/-$/', $piece)) {
        return false;
    }
} 
```

对此有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:48:53.020

如果您只是想验证 URL 的格式是否正确，请使用：

```
filter_var('http://example.com', FILTER_VALIDATE_URL); 
```

正则表达式很昂贵，当有可行的替代方案时应避免使用。

# c# - C# 正在 Visual Studio 中编写文件，但在我发布时没有

> ID：14278400
> 
> 赞同：4
> 
> 时间：2013-01-11T12:38:53.060
> 
> 标签：c#, file-io, publishing

我有以下代码，它应该通过 orgs 列表对它们中的每一个进行 td，对它们中的每一个调用 toString 方法，并将结果打印到控制台和名为 Debug1.tab 的文件中。

```
try
{
    StreamWriter print = File.CreateText("Debug1.tab");
    Console.WriteLine(LinkedInClass.isThrottled);
    int p = 1;
    foreach (Org org in orgList)
    {
        try
        {
            if (org.numContacts > 0)
            {
                Console.WriteLine(org.ToString());
                print.WriteLine(org.ToString());
            }
        }
        catch (Exception) {  Console.WriteLine(e.StackTrace); Console.WriteLine(e.Message); Console.ReadKey();}
    }
    print.Close();
    Console.WriteLine("There were " + orgList.Count + " organizations in the list." + LinkedInClass.numWithContacts + " of which I found contacts for. Throttling was "+(LinkedInClass.isThrottled?"":"not ")+"encountered.");
    break;
}
catch (Exception e) { Console.WriteLine(e.StackTrace); Console.WriteLine(e.Message); Console.ReadKey(); } 
```

在 Visual Studio 中它可以完美运行，但是当我发布它时，程序不会创建文件或写入文件。它仍在写入控制台，catch 语句没有执行，并且在它应该关闭 streamWriter 之后立即正确打印到控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:50:01.490

您指定文件名的方式（不提供路径），该文件是在当前工作目录中创建的，该目录可能与您的应用程序所在的目录不同。使用搜索您的磁盘以查看该文件是否有帮助可能会有所帮助是在别处创建的。

无论如何：在创建文件时指定一个路径，以确保它始终位于您期望的位置（并且不要使用该`Program Files`文件夹，而是使用一些可公开写入的文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:48:14.567

您应该在要向其中写入文件的文件夹上授予您的 os 当前用户完全权限。为此，右键单击该文件夹，转到属性并转到安全选项卡，如果当前用户不存在，则添加该用户并提供该用户的完全权限。

# opencart - 为什么需要单独的 product_to_category 数据库表？

> ID：14278401
> 
> 赞同：0
> 
> 时间：2013-01-11T12:38:53.953
> 
> 标签：opencart

我一直在查看 Opencart 数据库结构，基本上，它们有一个产品表、一个类别表，然后是一个包含 2 列的表，该表将 product_id 链接到 category_id。

这背后的原因是什么？仅将 category_id 作为列包含在产品表中不会使事情变得更简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:41:10.713

因为一个产品可以属于多个类别并且表示多对多的关系。它是标准化过程的一部分。

# android - 将现有的非 Maven 项目添加到 Maven 项目

> ID：14278413
> 
> 赞同：0
> 
> 时间：2013-01-11T12:39:55.027
> 
> 标签：android, maven

所以我再次对 Maven 感到非常沮丧。我想[将此库](https://github.com/jfeinstein10/SlidingMenu)合并到我的项目中。目前这个库不是一个 Maven 项目。我想将其转换为 maven 项目并将其添加到我的项目中。

我是否认为实现这一目标的最佳方法是将其添加为子模块？如果是，那怎么办？

我有写一个 pom 的想法，尝试生成项目结构，然后手动添加类。这似乎不是一个好的解决方案，但我不知道我还能做什么。

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:13:52.120

如果您只想将库用作依赖项，只需执行 a`mvn install:install-file`并将其添加到本地存储库。

如果您想编辑代码并使用 maven 构建项目，则无法自动转换项目。最好的办法是使用默认原型创建一个标准的 maven 项目，将源移动到新的 maven 结构中，并创建适当的 pom 条目。

编辑：

[maven 中的原型](http://maven.apache.org/guides/introduction/introduction-to-archetypes.html)是定义项目结构的一种方式。有一个默认结构或简单结构，如果您在 Eclipse 中，只需说 New -> Maven Project，您可以选择“simple project”，这将为您提供基本的 src/main/java、src/test/java 和pom.xml 结构。

# node.js - 无法在 Windows 7 x64/VS2012 上安装需要编译的节点模块

> ID：14278417
> 
> 赞同：193
> 
> 时间：2013-01-11T12:40:20.423
> 
> 标签：node.js, visual-studio-2012, node-gyp

我无法安装任何需要编译的模块。他们都失败并出现以下错误：

```
MSBUILD : error MSB3411: Could not load the Visual C++ component "VCBuild.exe". ... 
```

我的环境：

*   Windows 7 企业版 x64，版本 6.1.7601
*   节点 x86 0.8.16
*   npm 1.2.0
*   节点gyp 0.8.2
*   Visual Studio 2012 和众多软件包

相关环境变量：

```
Path=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShel l\v1.0;C:\Program Files\TortoiseGit\bin;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;c:\tools;c:\tools\node 
```

没有 INCLUDE、LIB、LIBPATH 等。

我对该问题进行了简短调查，并发现通过以下设置手动编译（直接调用 VCBuild.exe 和 msbuild.exe）对于手动克隆的 git://github.com/einaros/ws.git 成功：

```
SET Configuration=Release
SET PATH=%ProgramFiles(x86)%\Microsoft Visual Studio 9.0\VC\vcpackages
SET PATH=%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\VC\bin;%PATH%
SET PATH=%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\Common7\IDE;%PATH%
SET PATH=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Bin;%PATH%
SET PATH=%SystemRoot%\system32;%PATH%

SET INCLUDE=%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\VC\include
SET INCLUDE=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Include;%INCLUDE%

SET LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\v7.1A\Lib
SET LIB=%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\VC\lib;%LIB%

SET MSBUILD="%SystemRoot%\Microsoft.NET\Framework\v4.0.30319\msbuild.exe"

VCBuild.exe C:\Tools\node\ws\build\bufferutil.vcproj "Release|Win32" /useenv
VCBuild.exe C:\Tools\node\ws\build\validation.vcproj "Release|Win32" /useenv
%MSBUILD% build/binding.sln /verbosity:diagnostic /nologo /p:Configuration=Release;Platform=Win32 
```

我尝试使用相同的变量调用 node-gyp，但失败了：

```
C:\!> git clone https://github.com/einaros/ws.git
C:\!> cd ws
C:\!\ws>node-gyp configure
...
C:\!\ws>node-gyp build
gyp info it worked if it ends with ok
gyp info using node-gyp@0.8.2
gyp info using node@0.8.16 | win32 | ia32
gyp info spawn C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe
gyp info spawn args [ 'build/binding.sln',
gyp info spawn args   '/clp:Verbosity=minimal',
gyp info spawn args   '/nologo',
gyp info spawn args   '/p:Configuration=Release;Platform=Win32' ]
Building the projects in this solution one at a time. To enable parallel build, please add the "/m" switch.
C:\Users\User\.node-gyp\0.8.16\deps\uv\include\uv.h(55): fatal error C1083: Cannot open include file: 'stdint.h': No such file or directory [C:\!\
ws\build\binding.sln]
C:\Users\User\.node-gyp\0.8.16\deps\uv\include\uv.h(55): fatal error C1083: Cannot open include file: 'stdint.h': No such file or directory [C:\!\
ws\build\binding.sln]
gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onExit (c:\Tools\node\node_modules\node-gyp\lib\build.js:255:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "c:\\Tools\\node\\\\node.exe" "c:\\Tools\\node\\node_modules\\node-gyp\\bin\\node-gyp.js" "build"
gyp ERR! cwd C:\!\ws
gyp ERR! node -v v0.8.16
gyp ERR! node-gyp -v v0.8.2
gyp ERR! not ok 
```

也许你会对它有一些想法？

谢谢。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2014-03-14T16:44:19.297

试试看 - 将它全局设置：

```
npm config set msvs_version 2012 --global 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2013-05-31T09:40:43.920

要在不安装 VS2010 且仅 2012 的情况下执行此操作，请设置 msvs_version 标志：

`node-gyp rebuild --msvs_version=2012`

`npm install <module> --msvs_version=2012`

根据@Jacob 评论

`npm install --msvs_version=2013`如果你有 2013 版

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-08-13T11:39:27.590

更新 v3： [https ://www.npmjs.com/package/windows-build-tools](https://www.npmjs.com/package/windows-build-tools)

npm install --global windows-build-tools

> 下载并安装 Microsoft 免费提供的 Visual C++ Build Tools 2015。这些工具是编译流行的本机模块所必需的。它还将安装 Python 2.7，适当地配置您的机器和 npm。

更新 v2：

node-gyp 更新了他们的自述文件以包括[Windows 的 HOW-TO](https://github.com/nodejs/node-gyp)

原来的：

不需要整个视觉工作室，你可以只下载构建工具

微软构建工具 2013：[http ://www.microsoft.com/en-us/download/details.aspx?id=40760](http://www.microsoft.com/en-us/download/details.aspx?id=40760)

运行 cmd 设置全局标志以使用 2013 版本：

`npm config set msvs_version 2013 --global`

在此之后一切都应该恢复正常并且您的 npm install / node-gyp rebuild 将工作

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-04-14T15:14:37.870

只需添加 --msvs_version=2012

```
node-gyp rebuild --msvs_version=2012 
```

或者

```
node-gyp configure --msvs_version=2012
node-gyp build 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-04-05T09:57:18.540

尝试为 Node.js 安装包时遇到了同样的问题。经过一番广泛的谷歌搜索后，我发现了这个演练：[https ://github.com/TooTallNate/node-gyp/wiki/Visual-Studio-2010-Setup](https://github.com/TooTallNate/node-gyp/wiki/Visual-Studio-2010-Setup)

当我按照这些步骤操作时，我可以毫无问题地使用“npm install”。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-11-15T17:18:47.157

感谢[@felixrieseberg](https://github.com/felixrieseberg)，您只需要安装[windows-build-tools npm 包](https://github.com/felixrieseberg/windows-build-tools)就可以了。

```
npm install --global --production windows-build-tools 
```

您无需安装 Visual Studio。

您无需安装 Microsoft Build Tools。

从回购：

> 安装后，npm 会自动执行该模块，下载并安装微软免费提供的 Visual C++ Build Tools 2015。这些工具是编译流行的本机模块所必需的。它还将安装 Python 2.7，适当地配置您的机器和 npm。
> 
> Windows Vista / 7 需要 .NET Framework 4.5.1（目前此软件包不会自动安装）
> 
> **两种安装都没有冲突，这意味着它们不会与 Visual Studio、C++ 构建工具或 Python 的现有安装混淆。**

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-01-29T03:55:38.083

在 Windows 8 上，它对我有用：

```
npm install -g node-gyp -msvs_version=2012 
```

然后

```
npm install -g restify 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-12-05T19:02:41.700

经过几天的挖掘，IRC 上的某个人建议我尝试使用

```
Windows 7.1 SDK Command Prompt 
```

快捷方式（链接到 C:\Windows\System32\cmd.exe /E:ON /V:ON /T:0E /K "C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\SetEnv.cmd" ）。我认为您必须拥有较旧的 7.1 SDK（即使在 Windows 8.1 上），因为较新的 SDK 使用 msbuild.exe 而不是 vcbuild.exe，这是 node-gyp 想要的，即使它现在是 node 的两倍：/

一旦出现该提示，我必须运行以下命令来获取 x86 上下文，因为编译器会抛出有关体系结构的错误：

```
setenv.cmd /Release /x86 
```

然后我能够成功运行试图使用 node-gyp 重新编译东西的 npm 命令。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-05-24T08:07:27.730

我有相同的 isuee 并做了上面所有的魔法，唯一对我有魔法的是来自[https://github.com/atom/atom/issues/2435](https://github.com/atom/atom/issues/2435)

“因为 --msvs_version=2013 在由构建脚本运行时没有传递给 node-gyp。设置 GYP_MSVS_VERSION = 2013 环境变量，它应该在之后工作。”

砰! 有效

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-09-20T18:02:21.657

在 Windows 上这对我有帮助：（学分转到）[https://github.com/TooTallNate/node-gyp/wiki/Updating-npm%27s-bundled-node-gyp](https://github.com/TooTallNate/node-gyp/wiki/Updating-npm%27s-bundled-node-gyp) 我尝试了 MINGW32，但没有成功。

上`cmd.exe`

```
$ cd "C:\Program Files\nodejs\node_modules\npm"
$ npm install -g node-gyp@latest 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-01T22:01:12.313

对于 Windows 8 64 位，安装 zmq 和 protobuf，以下对我有用： 在命令行上安装[Visual Studio 2012 ：](http://www.microsoft.com/en-us/download/confirmation.aspx?id=34673)

```
SET VisualStudioVersion=11.0
npm install zmq
npm install protobuf 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-05T13:08:16.283

我认为解决方案是下载 **安装 Microsoft windows sdk for server 2008 with .net framework 3.5**

或者**只是安装 Visual Studio 2008**。

问题是 Windows 构建 node-gyp 执行 vcbuid.exe 文件，由于某种原因它找不到它。

谢谢

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-05-27T16:36:22.343

1.  安装 Python 2.7（不是 3.x）
2.  将路径添加到包含`vcbuild.exe`在您的环境变量中的目录`PATH`
3.  如果你需要`vcbuild.exe`在这里 [https://github.com/kin9puppy/vcbuildFixForNode](https://github.com/kin9puppy/vcbuildFixForNode)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-23T18:17:54.797

我在编译nodejs zmq时也遇到了很多问题。

对于 vcbuild.exe 的问题，只需将其添加到 PATH

对于其他问题，我可以只使用编译`Windows 7.1 SDK Command Prompt`

（菜单程序 -> Microsoft Windows SDK v7.1 -> Windows 7.1 SDK 命令提示符）

并根据提示：

`npm install zmq`

那行得通:)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-04-14T15:14:07.533

在 cmd 中根据您的版本设置 Visual Studio 路径为

```
Visual Studio 2010 (VS10): SET VS90COMNTOOLS=%VS100COMNTOOLS%

Visual Studio 2012 (VS11): SET VS90COMNTOOLS=%VS110COMNTOOLS%

Visual Studio 2013 (VS12): SET VS90COMNTOOLS=%VS120COMNTOOLS% 
```

在 node-master（从 gi​​t 下载的原始节点模块）中以管理员权限运行**vcbuild.bat 。**vcbild.bat 会生成windows相关的依赖，会在node-master中添加文件夹名Release

一旦运行，构建文件需要时间。

然后在具有 .gyp 文件的目录中使用命令

```
node-gyp rebuild --msvs_version=2012 --nodedir="Dive Name:\path to node-master\node-master" 
```

这将构建所有依赖项。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-06-06T07:33:13.923

经过长时间的斗争，我将节点架构切换到 x86，它的工作原理非常棒。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-28T16:50:29.223

我通过本教程在 windows 8 和 windows 10 pro 上解决了这个问题。我尝试了很多次用许多不同的解决方案来解决这个问题，但只对我有用： [http ://www.serverpals.com/blog/building-using-node-gyp-with-visual-studio-express -2015-on-windows-10-pro-x64](http://www.serverpals.com/blog/building-using-node-gyp-with-visual-studio-express-2015-on-windows-10-pro-x64) 我注意到我没有像本教程那样使用 nodist 来控制节点版本，我使用 NVM 并且工作正常，我没有使用 nodist 测试本教程。我使用节点 5.2.0。

# arrays - 寻找一种分割数组的好方法

> ID：14278423
> 
> 赞同：14
> 
> 时间：2013-01-11T12:40:31.977
> 
> 标签：arrays, string, scala, split

我一直在 Scala *Array*中寻找类似于*String.split*的方法，但一直没能找到。

 *我想要做的是用分隔符分割数组。

例如，分隔以下数组：

```
val array = Array('a', 'b', '\n', 'c', 'd', 'e', '\n', 'g', '\n') 
```

使用`'\n'`分隔符，应导致：

```
List(Array(a, b), Array(c, d, e), Array(g)) 
```

我知道我可以将数组转换为字符串，并在那里应用拆分：

```
array.mkString.split('\n').map(_.toArray) 
```

但我宁愿跳过转换。

到目前为止，我的解决方案涉及递归使用**span**并且有点太样板：

```
 def splitArray[T](array: Array[T], separator: T): List[Array[T]] = {
    def spanRec(array: Array[T], aggResult: List[Array[T]]): List[Array[T]] = {
      val (firstElement, restOfArray) = array.span(_ != separator)
      if (firstElement.isEmpty) aggResult
      else spanRec(restOfArray.dropWhile(_ == separator), firstElement :: aggResult)
    }
    spanRec(array, List()).reverse
  } 
```

我敢肯定 Scala 中一定有我遗漏的东西。任何想法？

谢谢，鲁本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:39:52.813

这不是最简洁的实现，但它应该被公平地执行并保留数组类型而不求助于反射。循环当然可以用递归代替。

由于您的问题没有明确说明我假设的分隔符应该做什么，因此它们不应导致输出列表中的任何条目（请参阅下面的测试用例）。

```
def splitArray[T](xs: Array[T], sep: T): List[Array[T]] = {
  var (res, i) = (List[Array[T]](), 0)

  while (i < xs.length) {    
    var j = xs.indexOf(sep, i)
    if (j == -1) j = xs.length
    if (j != i) res ::= xs.slice(i, j)
    i = j + 1
  }

  res.reverse
} 
```

一些测试：

```
val res1 =
  // Notice the two consecutive '\n'
  splitArray(Array('a', 'b', '\n', 'c', 'd', 'e', '\n', '\n', 'g', '\n'), '\n')

println(res1)
  // List([C@12189646, [C@c31d6f2, [C@1c16b01f)
res1.foreach(ar => {ar foreach print; print(" ")})
  // ab cde g

// No separator
val res2 = splitArray(Array('a', 'b'), '\n')
println(res2)
  // List([C@3a2128d0)
res2.foreach(ar => {ar foreach print; print(" ")})
  // ab

// Only separators
val res3 = splitArray(Array('\n', '\n'), '\n')
println(res3)
  // List() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:20:16.317

您可以使用该`span`方法将数组拆分为两部分，然后在第二部分递归调用您的拆分方法。

```
import scala.reflect.ClassTag

def split[A](l:Array[A], a:A)(implicit act:ClassTag[Array[A]]):Array[Array[A]] = {
  val (p,s) = l.span(a !=)
  p +:  (if (s.isEmpty) Array[Array[A]]() else split(s.tail,a))
} 
```

但是，这不是很有效，因为它具有二次性能。如果你想要快速的东西，一个简单的尾递归解决方案可能是最好的方法。

使用列表而不是数组，您将获得线性性能并且不需要反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T17:54:13.373

这是一个简短的公式，应该可以完成这项工作：

```
def split(array:Array[Char], sep:Char) : Array[Array[Char]] = { 
  /* iterate the list from right to left and recursively calculate a 
     pair (chars,list), where chars contains the elements encountered
     since the last occurrence of sep.
  */
  val (chars, list) = array.foldRight[(List[Char],List[Array[Char]])]((Nil,Nil))((x,y) => if (x == sep) (Nil, (y._1.toArray)::y._2) else (x::y._1, y._2)  ); 

  /* if the last element was sep, do nothing; 
     otherwise prepend the last collected chars
  */
  if (chars.isEmpty) 
    list.toArray 
  else 
    (chars.toArray::list).toArray 

}

/* example:
scala> split(array,'\n')
res26: Array[Array[Char]] = Array(Array(a, b), Array(c, d, e), Array(g), Array())
*/ 
```

如果我们使用 List 而不是 Array，我们可以稍微概括一下代码：

```
def split[T](array:List[T], char:T) : List[List[T]] = {
  val (chars, list) = array.foldRight[(List[T],List[List[T]])]((Nil,Nil))((x,y) => if (x == char) (Nil, (y._1)::y._2) else (x::y._1, y._2)  )
  if (chars.isEmpty) list else (chars::list) 
}

/* example:
scala> split(array.toList, '\n')
res32: List[List[Char]] = List(List(a, b), List(c, d, e), List(g), List())

scala> split(((1 to 5) ++ (1 to 5)).toList, 3)
res35: List[List[Int]] = List(List(1, 2), List(4, 5, 1, 2), List(4, 5))
*/ 
```

如果这个解决方案被认为是优雅的或不可读的，留给读者和她对函数式编程的偏好:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:21:09.247

A 从 sschaef 的解决方案中借用了论点：

```
def split[T](array : Array[T])(where : T=>Boolean) : List[Array[T]] = {
    if (array.isEmpty) Nil
    else {
        val (head, tail) = array span {!where(_)}
        head :: split(tail drop 1)(where)
    }
}                                         //> split: [T](array: Array[T])(where: T => Boolean)List[Array[T]]

val array = Array('a', 'b', '\n', 'c', 'd', 'e', '\n', 'g', '\n')

split(array){_ =='\n'}                    //> res2: List[Array[Char]] = List(Array(a, b), Array(c, d, e), Array(g))

def splitByNewLines(array : Array[Char]) = split(array){_ =='\n'}
splitByNewLines(array)                    //> res3: List[Array[Char]] = List(Array(a, b), Array(c, d, e), Array(g)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-09T08:21:47.990

我想出了一个针对以下目标的解决方案：

*   是通用的：您应该能够`Array`像 a 一样拆分 a`Vector`和`Char`s 的集合，就像任意对象的集合一样
*   保留输入的类型：an`Array[A]`在 an中拆分`Array[Array[A]]`，a`Vector[A]`在 a 中拆分`Vector[Vector[A]]`
*   允许在需要时使用惰性方法（通过`Iterator`）
*   在大多数情况下公开一个紧凑的接口（只需`split`在您的集合上调用一个方法）

在开始解释之前，请注意您可以[在 Scastie 上](https://scastie.scala-lang.org/stefanobaghino/ZLGjnwSzRWOCZJCVWcDRTw)使用下面的代码。

第一步是实现一个分`Iterator`块*你*的集合：

```
import scala.language.higherKinds
import scala.collection.generic.CanBuildFrom

final class Split[A, CC[_]](delimiter: A => Boolean, as: CC[A])(
    implicit view: CC[A] => Seq[A], cbf: CanBuildFrom[Nothing, A, CC[A]])
    extends Iterator[CC[A]] {

  private[this] var it: Iterator[A] = view(as).iterator

  private def skipDelimiters() = {
    it = it.dropWhile(delimiter)
  }

  skipDelimiters()

  override def hasNext: Boolean = it.hasNext

  override def next(): CC[A] = {
    val builder = cbf()
    builder ++= it.takeWhile(!delimiter(_))
    skipDelimiters()
    builder.result()
  }

} 
```

我使用谓词而不是值来更灵活地拆分集合的方式，尤其是在拆分非标量值（如`Char`s）的集合时。

我正在对集合类型使用隐式视图，以便能够将其应用于可以被视为`Seq`（如`Vector`s 和`Array`s）的所有类型的集合，并且`CanBuildFrom`能够构建我收到的集合的确切类型作为输入。

的实现`Iterator`只是确保删除分隔符并将其余部分分块。

我们现在可以使用 an`implicit class`来提供一个友好的接口并将该`split`方法添加到所有集合中，都允许将谓词或值定义为分隔符：

```
final implicit class Splittable[A, CC[_]](val as: CC[A])(implicit ev1: CC[A] => Seq[A], ev2: CanBuildFrom[Nothing, A, CC[A]], ev3: CanBuildFrom[Nothing, CC[A], CC[CC[A]]]) {

  def split(delimiter: A => Boolean): CC[CC[A]] = new Split(as)(delimiter).to[CC]

  def split(delimiter: A): CC[CC[A]] = new Split(as)(_ == delimiter).to[CC]

} 
```

现在您可以在收集`Char`s时自由使用您的方法

```
val a = Array('a', 'b', '\n', 'c', 'd', 'e', '\n', 'g', '\n')
val b = List('\n', '\n', '\n')
val c = Vector('\n', 'c', 'd', 'e', '\n', 'g', '\n')
val d = Array('a', 'b', 'c', 'd', 'e', 'g', '\n')
val e = Array('a', 'b', 'c', 'd', 'e', 'g', '\n')

a.split('\n')
b.split('\n')
c.split('\n')
d.split('\n')
e.split('\n') 
```

和任意对象：

```
final case class N(n: Int, isDelimiter: Boolean)

Vector(N(1, false), N(2, false), N(3, true), N(4, false), N(5, false)).split(_.isDelimiter) 
```

请注意，通过直接使用迭代器，您使用的是惰性方法，因为您可以查看是否向`next`方法添加了调试打印并尝试执行以下操作：

```
new Split(Vector('\n', 'c', 'd', 'e', '\n', 'g', '\n'))(_ == '\n'}).take(1).foreach(println) 
```

如果您愿意，您可以添加几个方法来`Splittable`返回 an `Iterator`，这样您也可以直接通过它公开惰性方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-23T11:21:59.657

使用 foldLeft 的简单方法

```
val f =  array.foldLeft((Array[Char](),List[Array[Char]]()))(
  (acc, char: Char) => {
    char match {
      case '\n' => (Array(),acc._1 :: acc._2)
      case _ => (acc._1 :+ char,acc._2)
    }
  }
)._2.reverse 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T13:02:50.693

我不知道任何内置方法，但我想出了一个比你更简单的方法：

```
def splitOn[A](xs: List[A])(p: A => Boolean): List[List[A]] = xs match {
  case Nil => Nil
  case x :: xs =>
    val (ys, zs) = xs span (!p(_))
    (x :: ys) :: splitOn(zs.tail)(p)
}

// for Array
def splitOn[A : reflect.ClassTag](xs: Array[A])(p: A => Boolean): List[Array[A]] =
  if (xs.isEmpty) List()
  else {
    val (ys, zs) = xs.tail span (!p(_))
    (xs.head +: ys) :: splitOn(zs.tail)(p)
  }

scala> val xs = List('a', 'b', '\n', 'c', 'd', 'e', '\n', 'g', '\n')
xs: List[Char] = 
List(a, b, 
, c, d, e, 
, g, 
)

scala> splitOn(xs)(_ == '\n')
res7: List[List[Char]] = List(List(a, b), List(c, d, e), List(g)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T14:03:28.050

这个怎么样？没有反射，也没有递归，但尝试尽可能多地使用 scala 库。

```
def split[T](a: Array[T], sep: T)(implicit m:ClassManifest[T]): Array[Array[T]] = {
  val is = a.indices filter (a(_) == sep)
  (0 +: (is map (1+))) zip (is :+ (a.size+1)) map { 
    case(from,till) => a.slice(from, till)
  } 
} 
```

可能很慢，但只是为了好玩。:-)

为您提供找到分隔符的`indices filter`索引 ( `is`)。在您的示例中，这是`2,6,8`. 我认为这是`O(n)`。

下一行将其转换为`(0,2), (3,6), (7,8), (9, 10)`. 所以`k`分隔符产生`k+1`范围。这些被交给`slice`，由它完成其余的工作。转换也是`O(n)`找到`n`的分隔符的数量。（这意味着输入`Array[Char]()`will yield`Array(Array())`而不是更直观`Array()`，但这不是太有趣）。

数组追加/前置（`:+`, `+:`）使用数组是浪费的，但没有什么不能通过使用允许您`O(1)`追加/前置的适当集合来解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-22T12:33:48.363

您也可以使用折叠来完成此操作：

```
def splitArray[T](array: Array[T], separator: T) = 
    array.foldRight(List(List.empty[T])) { (c, list) => 
        if (c == separator) Nil :: list 
        else (c :: list.head) :: list.tail
    }.filter(!_.isEmpty).map(_.reverse).toArray 
```

lambda.xy.x 已经提到了这一点，但由于某种原因，它的可读性不如必要；）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-23T22:30:59.307

几乎是单线：

```
val it = array.iterator
List.range(0, array.count(_ == '\n')).map(_ => it.takeWhile(_ != '\n').toArray) 
```

对于给定的`array`，这使用了一个`Iterator`版本的`Array`order 来调用`.takeWhile`与分隔符的出现次数一样多的次数。

* * *

另一个版本虽然更短但可读性更短，使用`List.tabulate`它是一个范围内的地图：

```
val it = array.iterator
List.tabulate(array.count(_ == '\n'))(_ => it.takeWhile(_ != '\n').toArray) 
```

* * *

这可以`array.mkString.split("\n", -1).map(_.toArray)`通过拉皮条制成一个通用的等价物`Array`：

```
implicit class ArrayExtensions[T: ClassTag](array: Array[T]) {

  def split(sep: T): List[Array[T]] = {
    val it = array.iterator
    List.range(0, array.count(_ == sep)).map(_ => it.takeWhile(_ != sep).toArray)
  }
} 
```

并以这种方式使用：

```
Array('\n', '\n', 'a', 'b', '\n', 'c', 'd', 'e', '\n', 'g', '\n').split('\n')
// List(Array(), Array(), Array(a, b), Array(c, d, e), Array(g), Array()) 
```

为了摆脱由 2 次连续出现分隔符产生的空子数组，可以使用`.filter(_.nonEmpty)`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-19T05:02:12.577

通用序列/数组拆分的拉皮条版本 -

```
 implicit def toDivide[A, B <% TraversableLike[A, B]](a : B) = new {
    private def divide(x : B, condition: (A) => Boolean) : Iterable[B] = {

      if (x.size > 0)
        x.span(condition) match {
          case (e, f) => if (e.size > 0) Iterable(e) ++ divide(f.drop(1),condition) else Iterable(f)
        }
      else
        Iterable()
    }
    def divide(condition: (A) => Boolean): Iterable[B] = divide(a, condition)
  } 
```*

# python - flask + nginx + uwsgi - 找不到 Python 应用程序

> ID：14278424
> 
> 赞同：5
> 
> 时间：2013-01-11T12:40:42.027
> 
> 标签：python, nginx, flask, uwsgi

**猫 /etc/nginx/sites-available/mywebsite**

```
server {
     listen              80;

    server_name         mywebsite;

    location /static {
        alias           /var/www/mywebsite/static;
    }

    location / {
        include         uwsgi_params;
        uwsgi_pass      unix:/tmp/website.sock;
        uwsgi_param         UWSGI_PYHOME    /var/www/mywebsite/env;
        uwsgi_param         UWSGI_CHDIR     /var/www/mywebsite;
        uwsgi_param         UWSGI_MODULE    mywebsite;
        uwsgi_param         UWSGI_CALLABLE  mywebsite;
    }

    error_page          404     /404.html;

} 
```

**猫 /etc/uwsgi/apps-available/website.ini**

```
[uwsgi]
plugins=python
vhost=true
socket=/tmp/website.sock 
```

**猫 /var/www/mywebsite/mywebsite.py**

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def index():
    return "It works!"

if __name__ == "__main__":
    app.run() 
```

我正在运行 nginx，然后是 uwsgi，并且在浏览器中出现 uWSGI 错误“找不到 Python 应用程序”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:13:32.583

我在相同的配置中遇到了同样的错误，我的问题只是 uwsgi 服务没有启动。重启 nginx 和 uwsgi 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:47:14.480

UWSGI_CALLABLE 必须是 'app'（是在请求中调用的函数的名称）

# android - RemoteView ADT21 布局参数

> ID：14278425
> 
> 赞同：1
> 
> 时间：2013-01-11T12:40:46.003
> 
> 标签：android, service, widget

我正在尝试在服务的 AppWidgetProvider 类上设置 TextView 的文本。在服务的 OnStart() 方法上，我给出了这个

```
RemoteViews rv = new RemoteViews(this.getApplicationContext().getPackageName(),R.layout.main); 
```

但它表明“主”无法在“R.layout.main”中解决。我只能分配整数值作为第二个参数。我听说 ADT21 有问题，这是其中之一吗？

AppWidgetProvider 和服务中的所有 Log.d() 语句都没有在 LogCat 上打印消息。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:46:22.030

我找到了解决方案。您需要使用`import.android.R`解决 R 然后删除导入。就如此容易。

# jquery - jQuery连接自定义函数

> ID：14278426
> 
> 赞同：6
> 
> 时间：2013-01-11T12:40:49.903
> 
> 标签：jquery

切换所有项目后，我需要调用自定义函数。不是每个人。

假设我们有一个警报：

```
function myAlert() { alert("OK"); } 
```

如果我这样编码，它会在每次切换时调用：

```
$('div.myGroupOfItems').toggle('fast',function() {
myAlert();
}); 
```

我怎么能这样做，因为我的是自定义 JS 函数？这样它不起作用：

```
$('div.myGroupOfItems').toggle('fast').myAlert(); 
```

还是其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T12:43:30.633

您必须扩展 jQuery 才能将您的方法添加到其中。你可以这样做：

```
$.fn.myAlert = function () {
    alert("OK");
}; 
```

如果您希望之后能够链接其他 jQuery 方法，则需要`this`从插件中返回。

这是一个[工作示例](http://jsfiddle.net/jamesallardice/MUsP2/)。

* * *

如果您对更详细的实际功能感兴趣，请继续阅读。`$.fn`只是 . 的别名`$.prototype`。通过向 中添加属性`prototype`，您可以有效地扩展所有 jQuery 实例。

当您调用 时`$`，jQuery 会在内部创建一个实例（您不需要手动创建实例，例如使用`new`运算符）。由于您已扩展`$.prototype`，所有实例现在都可以访问您的新方法。

如果您完全按照我上面显示的那样使用代码（没有`return`声明），您将无法将进一步的调用链接到 jQuery 方法。通过从方法返回实例，调用将是可链接的：

```
$.fn.myAlert = function () {
    alert("OK");
    return this;
}; 
```

请注意，在方法内部，`this`引用一个 jQuery 实例，因此无需将其包装在对`$`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T12:46:15.043

您可以从 jQuery 1.6 开始使用它...

```
$('div.myGroupOfItems').toggle('fast');

$('div.myGroupOfItems').promise().done(function() {
    myAlert();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T12:44:18.743

要使用该语法，您需要将您的函数变成这样的 jQuery 插件：

```
$.fn.extend({         
    myAlert: function() {
        alert('OK');
        return this; // return the assigned elements to continue chaining.
    }
});

$('div.myGroupOfItems').toggle('fast').myAlert(); 
```

# css - 左右 div 附加到中间 div

> ID：14278432
> 
> 赞同：4
> 
> 时间：2013-01-11T12:41:11.843
> 
> 标签：css, layout, html

我正在尝试为左右 div 设置自动宽度，以便它们始终连接到居中的 div。我下面的示例`width: 20%;`用于应该是动态的左右 div。我怎样才能做到这一点？

我查看了这些 ( [1](https://stackoverflow.com/questions/7724576/3-divs-one-centered-and-the-two-others-one-in-each-side) , [2](http://www.maxdesign.com.au/articles/liquid/) , [3](http://jsfiddle.net/DejUn/1/) ) 示例以获取想法，但无法解决我的问题。3rd 是我想要的，但它不适用于所有浏览器。

随意更改下面的整个代码，因为我愿意寻求更好的解决方案，但中心 div 必须为 850px。

谢谢

```
<style>
body
{
    background: #333333;
}
*
{
    margin: 0;
    padding: 0;
}
#cover
{
    float: left;
    width: 100%;
    height: 200px;
    background: #bababa;
}
#left
{
    float: left;
    width: 20%;
    height: 200px;
    background: #cccccc;
}
#center
{
    float: left;
    width: 850px; /*compulsory*/
    height: 200px;
    background: #dddddd;
}
#right
{
    float: right;
    width: 20%;
    height: 200px;
    background: #eeeeee;
}
</style>

<div id="cover">
    <div id="left">LEFT</div>
    <div id="center">CENTER</div>
    <div id="right">RIGHT</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:49:04.707

这是工作**[演示](http://jsfiddle.net/enve/udZxt/2/embedded/result/)**

**CSS**

```
body
{
    background: #333333;
}
*
{
    margin: 0;
    padding: 0;
}
#cover
{
    float: left;
    width: 100%;
    min-width:1420px;
    height: 200px;
    background: #bababa;
}
#left
{
    float: left;
    width: 20%;
    height: 200px;
    background: #cccccc;
    left:0
}
#center
{
    float: left;
    min-width:850px;
    width: 60%;
    height: 200px;
    background: #dddddd;

}
#right
{
    float: right;
    width: 20%;
    height: 200px;
    background: #eeeeee;

    right:0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:55:02.567

以百分比为中心 div 添加宽度，例如

```
 <style>
body
{
    background: #333333;
}
*
{
    margin: 0;
    padding: 0;
}
#cover
{
    float: left;
    width: 100%;
    height: 200px;
    background: #bababa;
}
#left
{
    float: left;
    width: auto;
    height: 200px;
    background: #cccccc;
}
#center
{
    float: left;
    width: 850px; /*compulsory*/
    height: 200px;
    background: #dddddd;
}
#right
{
    float: left;
    width: auto;
    height: 200px;
    background: #eeeeee;
}
</style>

<div id="cover">
    <div id="left">LEFT</div>
    <div id="center">CENTER</div>
    <div id="right">RIGHT</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:00:30.877

见@Ence答案

现在只需在“中心”div 中添加一个新 div 并应用该类：

```
#middle{
  width: 200px;
  background: #f90;
  margin:auto;
} 
```

示例：http: [//jsfiddle.net/vSvTZ/](http://jsfiddle.net/vSvTZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:06:05.733

如果你真的想坚持`850px`中间，你将不得不计算整个文档的宽度，因此使用一点javascript：[小提琴](http://jsfiddle.net/9uPe2/4/)

这是非常基本的javascript部分。

```
function menuresize(){
  var windowWidth = document.body.offsetWidth;
  var menusSize = (windowWidth-850)/2;
  if(menusSize<1){
    document.querySelector('#left').style.display = 'none';
    document.querySelector('#right').style.display = 'none';
  }else{
    document.querySelector('#left').style.width = menusSize+'px';
    document.querySelector('#right').style.width = menusSize+'px';
    document.querySelector('#left').style.display = 'block';
    document.querySelector('#right').style.display = 'block';
  }
}
menuresize();
window.onresize = function(e){menuresize();} 
```

如果页面更薄或等于`850px`，则左右菜单消失。

# java - 使用本机查询级联删除

> ID：14278437
> 
> 赞同：2
> 
> 时间：2013-01-11T12:41:43.787
> 
> 标签：java, orm, playframework, ebean, cascading-deletes

我有一个 Ebean 实体模型，其中包含 3 个与 @OneToMany 关系相关的实体，如下所示：

```
public class A extends Model {
    @Id
    @GeneratedValue
    public Long id;

    public String name;

    @OneToMany(cascade = CascadeType.ALL)
    public List<B> bList;
    ...
}

public class B extends Model {
    @Id
    @GeneratedValue
    public Long id;

    public String name;

    @OneToMany(cascade = CascadeType.ALL)
    public List<C> cList;
    ...
}

public class C extends Model {
    @Id
    @GeneratedValue
    public Long id;

    public String name;

    ...
} 
```

我想删除特定 A 对象的 al Bs 和 Cs。我知道如果我做这样的事情，Ebean 可以处理 Cs 的删除：

```
for (B b : a.bList) {
    b.delete();
} 
```

但我认为这不是最好的解决方案。我想做这样的事情：

```
String sql = "DELETE FROM B WHERE B.a_id="+a.id;
SqlUpdate update = Ebean.createSqlUpdate(sql);
update.execute(); 
```

但它是一个原生 SQL，它输出一个“ConstraintViolationException”，因为它没有一个“ON DELETE CASCADE”。

最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T22:41:39.113

`com.avaje.ebean.Ebean`类具有`delete`以集合为参数的方法：

```
static int delete(Collection<?> c) // Delete all the beans from a Collection. 
```

因此，您可以使用以下代码：

```
Ebean.delete(a.bList);
a.bList = new ArrayList<B>(); 
```

# php - 单例访问/PHP 魔术方法 __toString/ 打印静态对象

> ID：14278440
> 
> 赞同：1
> 
> 时间：2013-01-11T12:42:05.373
> 
> 标签：php, string, class, object, magic-methods

我想要实现的（PHP 5.3）是拥有一个访问器来访问我的表示，例如页面的 HTML 正文。与其直接回显所有内容，不如将其添加到该单例中的条目数组中。例子：`myBodyClass::add('<h1>Title</h1>');`

`add()`被声明为`public static function add($strEntry) {}`

现在我应该将它们添加到静态数组 $entries 中，例如`self::$entries[] = $strEntry;`（**类 VersionB**）还是应该使用类似的实例`self::getInstance()->entries[] = $strEntry;`？(**类 VersionA** ) （因此 getInstance() 当然会实例化 '...new self;' 如有必要）

恐怕我还不太明白其中的区别。

我的问题的第二部分是如何打印对象。PHP手册关于为什么 __toString() 不能是静态的有点薄 - 但是我再次理解解析器在区分`echo myBodyClass`常量时存在问题（这就是原因吗？）

理想情况下，我想`add()`根据需要经常调用以添加主体的所有部分，然后`echo myHeaderClass, myBodyClass, myFooterClass;`在脚本末尾使用类似的东西，它应该调用`__toString()`类中的方法。

感谢您为我指明正确的方向。

## 代码示例

```
class VersionA
{
    private static $instance = null;
    private $entries = array();
    private final function __construct(){}
    private final function __clone(){}

    private static final function getInstance()
    {
        if (self::$instance === null) :
            self::$instance = new self;
        endif;
        return self::$instance;
    }
    public static function add($sString)
    {
        self::getInstance()->entries[] = $sString;
    }
    public static function getHtml()
    {
        return implode("\r\n", self::getInstance()->entries);
    }
}

class VersionB
{
    private static $entries = array();
    private final function __construct(){}
    private final function __clone(){}

    public static function add($sString)
    {
        self::$entries[] = $sString;
    }
    public static function getHtml()
    {
        return implode("\r\n", self::$entries);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:52:57.040

您可能不应该使用静态添加方法。

单例的想法是您创建一个类的单个实例，以便外部对象可以与该实例交互。这意味着您的 add 方法不应该是静态的。

您可以执行以下操作：

```
class MyBodyClass
{
    protected $entries = array();

    protected $instance;

    public static function getInstance()
    {
        if (is_null($this->instance)) {
            $this->instance = new self();
        }
        return $this->instance;
    }

    private function __construct() {}

    public function add($strEntry)
    {
        $this->entires[] = $strEntry;
    }
} 
```

并这样称呼它：

```
MyBodyClass::getInstance()->add('<h1>blah</h1>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:52:10.743

（根据OP的要求，从评论中复制...）

你错过了单例的意义。单例对象和静态类是有区别的。如果你想使用作用于对象的方法（比如 __toString()），那么你需要它是一个对象；静态类还不够好​​。如果您想避免`getInstance`一直调用，则根据依赖注入模式为对象设置一个变量，并像处理其他对象一样将其传递到任何地方。无论如何，这可能是最佳实践建议。

静态类的问题在于它不是真正的 OOP。它只是一堆具有共享类名的全局函数。也可以使用带有命名空间声明的普通函数。

但是使用真正的单例的主要原因是可交换性。假设您遵循我上面的建议并创建对您在代码中传递的对象的单个引用，那么交换替代对象会变得容易得多，因为您没有到处引用硬编码的类名. 这使得为​​使用该类的代码编写体面的单元测试变得更加容易。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:51:55.093

像这样的东西应该工作：

```
class MySingleton
{

    public static function getInstance()
    {
        static $inst = null;
        if ($inst === null) {
            $inst = new MySingleton();
        }
    return $inst;
    }

    private function __construct() { }

    public static function add() {}

    public function __toString() {
        echo 'Something';
    }

}

$body = MySingleton::getInstance();
$body::add('Something');
echo $body; 
```

# asp.net - 如何检查两个具有相同文本框值的不同网络表单

> ID：14278441
> 
> 赞同：1
> 
> 时间：2013-01-11T12:42:04.537
> 
> 标签：asp.net, validation, jquery-validate, webforms

aspx TextBox1.Text World.aspx TextBox1.Text

我希望页面 Hello.aspx 和 World.aspx 具有相同的验证值

请帮助我任何人对此有想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:43:48.847

您需要使用 cookie 或数据库或其他方式将值保存在第一页上。然后检索第二页中的值并比较验证函数或事件中的值。

```
using(SqlConnection cn = new SqlConnection(connStr))
    {

    using(SqlCommand cmd = new SqlCommand())
    {
        cmd.Connection = cn;

        string sql = string.Format(@"select email from customers where customer_id = '{0}'", customer_id);

        cmd.CommandType = CommandType.Text;

        //try and catch block would go here

        cmd.CommandText = sql;

        cn.Open();
        SqlDataReader rdr = cmd.ExecuteReader();
        string email = rdr[0].ToString();
        cn.Close();
    }
    } 
```

# php - 如何在本地模拟访问 Dynamics CRM 数据库以与 SOAP 一起使用？

> ID：14278444
> 
> 赞同：1
> 
> 时间：2013-01-11T12:42:28.283
> 
> 标签：php, database, soap, crm, microsoft-dynamics

我目前正在为学校做一个项目，我们要为一个使用 PHP 和 SOAP 访问 Dynamics CRM 服务器的应用程序制作原型。

到目前为止，我已经启动并运行了我的 apache 服务器并在 Netbeans 中设置了一个项目，简单的 .php 文件就可以正常工作......

现在我需要一个可以在本地运行的 MS Dynamics CRM 系统中使用的类似数据库（因此不需要网络连接或配置）。连接到实际数据库（我们为其制作原型的公司）是不可能的。

SQL 服务器将是我所知道的最简单的选择（根据这里的帖子 MySQL 与动态数据库不兼容，所以这不是一个选项），因为我们已经在课堂上使用过它，但这是一个可比的数据库动态CRM？

因为我没有使用 PHP 或 SOAP 编码的经验，所以这个任务有点超出我的范围，但是我们只需要模拟几个简单的 insert/update/delete/... 语句 - 唯一的问题是我不知道我应该如何模拟他们的数据库。

提前感谢您的帮助，如果您需要更多信息，请随时提出任何其他问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:12:58.313

仅仅拥有一个数据库是不够的。Dynamics CRM 是具有 SOAP Web 服务端点然后对数据库执行任何操作的应用程序。

您不能直接对数据库运行 SOAP 调用，也不应该直接编辑 CRM 数据库 - Microsoft 不支持它。

你真正需要的是一个完整的开发环境——CRM、SQL、AD 整个设置。

因此，传统上，您可能会选择安装了 CRM On-Premise、SQL 及其所有先决条件的本地服务器，这不是一个便宜的选择，而且听起来它可能超出了您当前的资源。

所以我的建议是使用 CRM Online - 基本上是 Microsoft 托管所有内容，您可以通过 Web 访问 CRM。CRM Online 与 CRM On-Premise 基本相同，但存在一些关键差异，但您将能够针对实际工作的 CRM 执行所有 SOAP 调用。

更好的 CRM Online 提供 30 天免费试用，之后每位用户每月 44 美元，但据我了解，您可以继续创建更多免费试用。

然后，您还需要在环境中安装您的客户定制。您可以从 CRM 中导出它们并将它们导入到您的开发环境中。您可以在不获取实时数据的情况下执行此操作 - 这可能是客户不想给您他们的数据库的原因。这很重要的原因是您拥有正确的数据模型，这对于 SOAP Web 服务调用非常重要。

关于 PHP SOAP 位，您可能想看看：[PHP MSCRM](http://phpmscrm.codeplex.com/)，我自己没有使用过，但它看起来很有用。

另一方面，您可能想查看 MSCRM 的 OData 端点，您可能会发现从 PHP 中使用它更简单。

# c# - 在 .NET 中以线程安全的方式将生成的进程的 stdout+stderr 异步写入文件

> ID：14278448
> 
> 赞同：1
> 
> 时间：2013-01-11T12:43:04.430
> 
> 标签：c#, .net, .net-2.0

我有一个相当标准的设置：

```
 void Run()
    {
        this.sw = File.CreateText(logfile)

        start.RedirectStandardInput = true;
        start.RedirectStandardOutput = true;
        start.RedirectStandardError = true;
        start.UseShellExecute = false;
        Process proc = Process.Start(start)
        proc.OutputDataReceived += new DataReceivedEventHandler(OutputHandler);
        proc.ErrorDataReceived += new DataReceivedEventHandler(OutputHandler);
        proc.BeginOutputReadLine();
        proc.BeginErrorReadLine();
        ...
    }

    private void OutputHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {
        if (!String.IsNullOrEmpty(outLine.Data))
        {
            sw.WriteLine(outLine.Data);
        }
    } 
```

我想，这一切都很好，直到我第一次试运行，几分钟后完美运行它崩溃了：

> 未处理的异常：未处理的异常：System.IndexOutOfRangeException：复制内存时检测到可能的 I/O 竞争条件。默认情况下，I/O 包不是线程安全的。在多线程应用程序中，必须以线程安全的方式访问流，例如 TextReader 或 TextWriter 的 Synchronized 方法返回的线程安全包装器。这也适用于 StreamWriter 和 StreamReader 等类。在 System.IO.StreamWriter.Write(Char[] buffer, Int32 index, Int32 count) 在 System.IO.TextWriter 的 System.Buffer.InternalBlockCopy(Array src, Int32 srcOffset, Array dst, Int 32 dstOffset, Int32 count)。写行（字符串值）

我只在我的应用程序中运行一个线程，所以我认为发生这种情况的唯一方法是如果 stdout 和 stderror 同时触发事件。

我的代码应该是什么样子来实现提到的“线程安全包装器”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:49:42.367

无论你在哪里有一个 WriteLine 都会在它周围加个锁，例如

```
public class MyClass
{
   object myLockObject = new object();

   public void MyOperationCalledOnAnEvent(string data)
   {
      lock (myLockObject)
          sw.WriteLine(outLine.Data);
   } 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:49:50.347

这应该可以解决您的问题：

```
private readonly object _looker = new object();

private void OutputHandler(object sendingProcess, DataReceivedEventArgs outLine)
    {
        if (!String.IsNullOrEmpty(outLine.Data))
        {
            lock(_locker)
            {
                sw.WriteLine(outLine.Data);
            }
        }
    } 
```

另一种解决方案可以是将输出添加到，例如，`ConcurrentQueue`然后在单独的线程中检索消息并保存到流中。

# jquery - jQuery：如何编写双斜杠'//'以便它不会抛出错误？

> ID：14278451
> 
> 赞同：-2
> 
> 时间：2013-01-11T12:43:13.160
> 
> 标签：jquery, double, slash

我有这个代码：

```
(options.parent) ? top = options.parent.height / 2; : top = parent.height() / 2; 
```

由于我在那里使用双斜杠，它得到一个错误我知道为什么我得到错误我只是不知道如何编写它来工作。
再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:45:15.963

与“双斜线”无关，去掉分号

```
(options.parent) ? top = options.parent.height / 2 
                 :top = parent.height() / 2; 
```

分号用于定义语句的结尾（可选），三元运算符被视为单个语句。

```
(options.parent) ? top = options.parent.height / 2; : top = parent.height() / 2;
//                                                ^------ Wrong! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:45:32.123

我认为这不是斜线问题，而是分号。试试这个：

```
top = (options.parent ? options.parent.height : parent.height()) / 2; 
```

# iphone - 如何更改Tapku日历的背景图像

> ID：14278452
> 
> 赞同：1
> 
> 时间：2013-01-11T12:43:16.993
> 
> 标签：iphone, ios, objective-c, calendar, tapku

![我在下面附上tapku日历图片](../Images/7258e0816df3ad6fd079f182ab68bb6c.png)！

我尝试使用以下代码。但图像未设置。

```
TKCalendarMonthView *calendar = [[TKCalendarMonthView alloc] init];

calendar.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"fishimage.png"]]; 
```

“提前致谢”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:08:27.387

否 无法更改 Tapku 日历的整个图像，因为它是（可能是）包含日期编号的按钮/视图的集合。但是您可以通过以下类方法**更改更改月份箭头的图像**`UIImage+TKCategory.m`

```
+ (UIImage*) imageNamedTK:(NSString*)str{

    CGFloat s = 1.0f;
    if([[UIScreen mainScreen] respondsToSelector:@selector(scale)]){
        s = [[UIScreen mainScreen] scale];
    }

    //NSString *path = [NSString stringWithFormat:@"%@%@.png",str,s > 1 ? @"@2x":@""];
    return [UIImage imageWithCGImage:[[UIImage imageNamed:@"img.jpg"]CGImage] scale:s orientation:UIImageOrientationUp]; // put here specific image name for display !

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-16T09:56:22.047

无需更改任何编码只需替换图像

转到 TapkuLibrary.bundle --> 图片 --> 日历并将您的图片替换为“月历日期 Tile.png”

**或者**

更改 TKCalendarMonthView.m 中的代码

`tileImage = [UIImage imageNamed:@"fishimage.png"];`

和

```
tileImage = [UIImage imageWithContentsOfFile:TKBUNDLE(@"calendar/Month Calendar Date Tile.png")]; 
```

# android - 使用 ContentResolver 将数据插入到 sqlite 数据库

> ID：14278454
> 
> 赞同：0
> 
> 时间：2013-01-11T12:43:28.977
> 
> 标签：android, android-sqlite, android-contentresolver

我想用`ContentResolver.bulk(uri, ContentValues[])`方法。

我将`sqlite`数据库存储在应用程序私有存储内的数据库文件夹下。数据库名为**mydb.db**

名为 BUDGET 的表的 Uri 是什么？我需要以`ContentResolver`某种方式连接到我的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:36:35.737

您需要实现一个内容提供者。然后，您的内容提供者会将数据存储在 SQLite DB 中。有关详细信息，请参阅[Android 文档](http://developer.android.com/guide/topics/providers/content-providers.html)。

# android - Trivial Drive 中的模棱两可的错误消息

> ID：14278458
> 
> 赞同：3
> 
> 时间：2013-01-11T12:43:47.140
> 
> 标签：android, in-app-purchase

我试图让谷歌的示例（应用内购买[版本 3](http://developer.android.com/google/play/billing/api.html)）测试应用程序“TrivialDrive”工作，但有以下问题：

我点击“购买汽油”按钮，这会弹出以下屏幕：

![在此处输入图像描述](../Images/26a1a25a2eddd4d0dfab53b1e48010b4.png)

此消息有两种可能的解释：

1.  该项目不可用，因此该用户无法获得它。

2.  用户不知何故没有资格购买此商品，因此该商品不可用。

那么它是哪一个？为什么我还是会收到这个错误？

顺便说一句，该应用程序昨天已上传到我的开发者帐户，所以我已经远远超过了谷歌建议的 2-3 小时等待数据进入系统的时间。

我还在设备上安装了“Play Store”。

为了更好地衡量，这里是我的开发者帐户的屏幕截图：

![在此处输入图像描述](../Images/7a93314169ea681a6446a35600466435.png)

我正在从使用我的开发人员的“测试帐户”列表中的 gmail 地址注册的设备运行该应用程序。

**编辑：**我刚刚测试了我的另一个使用旧式（版本 2）计费系统的应用程序，它报告“请先通过添加付款方式来完成您的帐户”。所以看起来缺乏支付方式是最终原因——但我不希望潜在客户看到这样无用和误导性的错误信息。我在 MainActivity.java 和 strings.xml 中搜索了“项目不可用”，但一无所获，因此无法避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:48:00.053

有没有设置测试账号？测试帐户不应是您的 google play 开发帐户。 [在这里解释](http://developer.android.com/google/play/billing/billing_admin.html#billing-testing-setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:37:01.260

我看到您尚未发布应用内产品应该源自的总体应用程序。因此，如果应用程序本身尚未发布，Google 不允许您为应用内产品付费。发布应用程序并发布后，您应该能够访问应用内产品的销售页面。

> 在拥有的应用程序发布之前，应用内产品将显示为 UNPUBLISHED。

即使您要发布您的应用内产品，在您的实际应用发布之前没有人可以购买它。

# c# - 展平 protobufs-net 合约

> ID：14278462
> 
> 赞同：1
> 
> 时间：2013-01-11T12:44:00.223
> 
> 标签：c#, protobuf-net

我想展平用于定义 protobuf-net 合同的类型层次结构，我们目前在该合同中具有以下内容：

```
[ProtoContract]
public class SubClass : BaseClass
{
   [ProtoMember(1)]
   public string Prop1 { get; set; }
}

[ProtoContract]
[ProtoInclude(1, typeof(SubClass))]
public class BaseClass
{
   [ProtoMember(100)]
   public string Prop2 { get; set; }
} 
```

然后将其重构为

```
[ProtoContract]
public class SubClass
{
   [ProtoMember(1)]
   public string Prop1 { get; set; }

   [ProtoMember(100)]
   public string Prop2 { get; set; }
} 
```

这样在重构之前序列化的实例被成功反序列化。这是否可以简单地通过选择正确的索引或者我需要做更多的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:58:28.200

在底层，protobuf-net 中的继承以一种基本上是多级操作的方式实现。对其进行建模并非易事，坦率地说，使用自动映射器之类的东西可能更容易，即将数据加载到*旧*模型中；将其映射到*新*模型；序列化新模型。请注意，这是一项重大更改，之后数据将不兼容。但是，**如果**您可以忍受一点丑陋，则可以在一个模型中执行此操作（尽管请注意，我必须提供不同的字段编号才能使其起作用）：

```
[ProtoContract]
public class NewClass
{
    [ProtoMember(2)]
    public string Prop1 { get; set; 

    [ProtoMember(100)]
    public string Prop2 { get; set; }

    [ProtoMember(1)] // this 1 is from ProtoMember
    private Shim ShimForSerialization { get { return new Shim(this); } }

    // this disables the shim during serialiation; only Prop1 and Prop2 will
    // be written
    public bool ShouldSerializeShimForSerialization() { return false; }

    [ProtoContract]
    private class Shim {
        private readonly NewClass parent;
        public Shim(NewClass parent) {
            this.parent = parent;
        }
        [ProtoMember(1)]
        public string Prop1 {
            get { return parent.Prop1;}
            set { parent.Prop1 = value;}
        }

    }
} 
```

# autocomplete - 用于用户定义函数的 Notepad++ 智能感知

> ID：14278467
> 
> 赞同：1
> 
> 时间：2013-01-11T12:44:30.253
> 
> 标签：autocomplete, intellisense, notepad++

我知道我可以通过转到“*设置->首选项->备份/自动完成*”在记事本++中启用自动完成。例如，对于 Python，自动完成功能仅适用于根据此[链接](https://stackoverflow.com/questions/12165017/is-there-any-way-to-enable-intellisense-for-notepad-html-coding)的一组预定义函数。

有谁知道如何在 Notepad++ 中为我定义的函数和方法制作智能感知？我不是这方面的专家，但我在想，肯定有一种方法可以让 Notepad++ 自动检测代码中的函数定义，并将这些函数添加到它的智能感知数据库或什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:50:06.517

您可能对相关[文档](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Auto_Completion)感兴趣。看看里面的文件`%ProgramFiles%\Notepad++\plugins\APIs`。

# c++ - 什么是 pp-number C++

> ID：14278470
> 
> 赞同：1
> 
> 时间：2013-01-11T12:45:09.010
> 
> 标签：c++

遇到诸如“pp-number”之类的术语，无法[谷歌](http://www.google.com.ua/search?client=opera&q=pp-number+C%2B%2B&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)到底是什么，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:11:01.557

*预处理数字*是组成整数或浮点文字的数字和其他字符序列。例如`42`或`1.5e-7`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T12:47:32.860

预处理数字：

### 2.9 预处理数字 [lex.ppnumber]

> `pp-number:`
> `digit`
> `. digit`
> `pp-number digit`
> `pp-number nondigit`
> `pp-number e sign`
> `pp-number E sign`
> `pp-number .`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T12:48:45.470

PP 编号是一个同时存在的数字：

1.  十进制的回文。
2.  一个素数。

这些有时用于编程练习、测试或竞赛。

# coldfusion - Adobe ColdFusion，在登录并导航页面后未填充 CFGrid，

> ID：14278474
> 
> 赞同：0
> 
> 时间：2013-01-11T12:45:14.323
> 
> 标签：coldfusion, coldfusion-10, cfgrid

我试图`CFGrid`通过正常工作的 CFC 函数在 ColdFusion 中绑定一个，但登录后当我尝试浏览页面时，`CFGrid`没有填充任何记录。

这是我的`grid.cfm`代码：

```
<cfform name="GridForm">
    <cfgrid format="html" name="UserGrid" pagesize="10" selectmode="row" bind="cfc:Consumer.getUserinfo({cfgridpage},{cfgridpagesize},{cfgridsortcolumn},{cfgridsortdirection})">             

    <cfgridcolumn name="FirstName" width="300" header="FirstName" />
    <cfgridcolumn name="LastName" width="180" header="LastName" />
    <cfgridcolumn name="UserName" width="120" header="UserName" />
    <cfgridcolumn name="Age" width="60" header="Age" />
    </cfgrid>
    <br/>
</cfform> 
```

这是我的 cfc 函数：

```
<cfcomponent output="false">

    <cffunction name="getUserInfo" access="remote" returntype="struct" >
        <cfargument name="page" required="true" />
        <cfargument name="pageSize" required="true" />
        <cfargument name="gridsortcolumn" required="true" />
        <cfargument name="gridsortdirection" required="true" />

        <cfif arguments.gridsortcolumn eq "">
        <cfset arguments.gridsortcolumn = "FirstName" />
        <cfset arguments.gridsortdirection = "asc" />
        </cfif>

        <cfquery name="GetUser" datasource="MyDatabase" >
        select      *
        from        UserInfo
        order by    #arguments.gridsortcolumn# #arguments.gridsortdirection#
        </cfquery>

        <cfreturn queryconvertforgrid(GetUser, page, pagesize) />
    </cffunction>

</cfcomponent> 
```

为什么登录后不填充此网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:56:49.037

我建议在 Chrome 中使用开发人员工具/javascript 控制台。打开日志 XMLHTTPRequests。然后，下次重新加载应用程序时，控制台会显示应用程序正在进行的所有 ajax 调用以及它们是成功还是失败。

如果您有一个失败的请求，您可以右键单击它并在新选项卡中打开它以查看错误详细信息，就像您通常解决问题一样。

# asp.net-mvc - 从本地系统上传图片 + TinyMCE 编辑器 + ASP.NET MVC

> ID：14278485
> 
> 赞同：3
> 
> 时间：2013-01-11T12:45:41.333
> 
> 标签：asp.net-mvc, tinymce, image-uploading

我正在使用 tinymce 编辑器从后端上传 cms 内容，但它只允许使用外部链接上传图像，但我想从本地系统上传图像。

我将非常感谢您为解决我的问题提供的帮助.....提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-11T12:53:57.710

您可以对图像进行 base64 编码并将其放入编辑器中。在这种情况下，您不需要关心链接。

# iis-7.5 - 通过 IP 地址的 IIS Web 应用程序错误 401.2

> ID：14278486
> 
> 赞同：0
> 
> 时间：2013-01-11T12:45:50.750
> 
> 标签：iis-7.5, asp.net-3.5, http-status-code-401

我的本地计算机上有一个在 IIS 7.5 上运行的域上的 Web 应用程序。通过 localhost 访问此 Web 应用程序时，它工作正常，但如果我尝试使用我的 IP 地址，它会询问我的凭据，当我不输入它们时，我会收到错误 401.2。

![在此处输入图像描述](../Images/028dbeac7d71e6a10a8283446fd5644d.png)

我已经启用了匿名访问和 Windows 身份验证。![在此处输入图像描述](../Images/d02c08bab3d249ca88932d5806c97a80.png)

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:11:31.233

我能够让它工作。我没有使用我的 IP 地址来访问 Web 应用程序，而是使用了我的计算机名称。

# ios - 每个线程使用的内存量

> ID：14278488
> 
> 赞同：1
> 
> 时间：2013-01-11T12:45:58.943
> 
> 标签：ios, objective-c, iphone, ipad

我正在开发一个由于内存使用过多而崩溃的应用程序。我想知道每个活动线程正在使用的内存量，以便我可以决定在屏幕元素中分配或绘制的哪些释放或从视图中删除。有没有办法获得它？

我曾尝试使用 mach.h 库，但`mach_task_self()`我只能访问整个应用程序使用的内存。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:57:03.663

我想你想要的是`logMemUsage()`。

您可以查看此**问题的****答案**： [Watching memory usage in iOS](https://stackoverflow.com/questions/7989864/watching-memory-usage-in-ios)

 **我想你也可以从这个文档中得到一些东西： [Understanding and Analyzing iOS Application Crash Reports](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

如果要[在应用程序运行时检查内存使用情况，请使用 Instruments](https://stackoverflow.com/questions/6438756/checking-memory-usage-while-application-is-running?rq=1)。：

使用`Instruments`您可以检查您的应用程序正在使用多少内存。在`Xcode4`中，使用 ' `Profile`' build，选择`Leaks`，然后单击工具栏中的`Library`按钮并添加`Memory Monitor instrument`.

如果您真的不想使用 Instruments，那么您可以使用自定义类`UIDeviceAdditions`： [获取当前内存使用情况](http://forrst.com/posts/Get_current_Memory_usage-hzw)

希望够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:56:24.030

你不能因为线程共享堆。线程使用[512KB 堆栈空间](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)创建，并根据需要分配内存页面。除此之外，没有存储在任何地方的每个线程值的内存。**

# java - Android发送与消息不同的短信字符串

> ID：14278490
> 
> 赞同：0
> 
> 时间：2013-01-11T12:46:06.497
> 
> 标签：java, android, string, sms, send

嘿，我正在创建需要发送 SMS 的 android 项目，这是我的代码：

```
private void sendSMS(String destSMS, String msgSMS) {
    // TODO Auto-generated method stub
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent pi = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);
    PendingIntent deliveri_pi = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

    BroadcastReceiver brSend = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(getBaseContext(), "SMS Delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                Toast.makeText(getBaseContext(), "Generic Failure",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(getBaseContext(), "No Service",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                Toast.makeText(getBaseContext(), "Radio Off",
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }
    };
    BroadcastReceiver brDelivered = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(getBaseContext(), "SMS delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            case Activity.RESULT_CANCELED:
                Toast.makeText(getBaseContext(), "SMS not delivered",
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }
    };
    registerReceiver(brSend, new IntentFilter(SENT));
    registerReceiver(brDelivered, new IntentFilter(DELIVERED));

    SmsManager smsman = SmsManager.getDefault();
    smsman.sendTextMessage(destSMS, null, msgSMS, pi, deliveri_pi);
}

btnSend.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String dest, messageEnc;
            dest = etDest.getText().toString();
            messageEnc = etCipher.getText().toString();
            try {
                sendSMS(dest, messageEnc);
            } catch (Exception e) {
                Toast.makeText(getBaseContext(),
                        "Gagal karena " + e.toString(), Toast.LENGTH_SHORT)
                        .show();
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

问题在于文本字段文本是 = 'th!Azasd" 随机文本，但是当我尝试发送到另一个模拟器时收到的消息不同，消息接收就像“@hu@@@”完全不同，消息接收长度很多更多并填写一些unicode符号..对不起我的英语。

# axapta - Axapta 2009 - 如何将提示导出到另一个环境？

> ID：14278494
> 
> 赞同：0
> 
> 时间：2013-01-11T12:46:11.670
> 
> 标签：axapta

如何在 Dynamics 2009 中将提示导出到另一个环境？我需要将一些提示从 DEV 转移到 TST。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:08:52.207

尝试按照此处的步骤操作：[http ://technet.microsoft.com/en-us/library/dd362033(v=ax.50).aspx](http://technet.microsoft.com/en-us/library/dd362033(v=ax.50).aspx)

# android - Android，结合不同SDK版本的应用组件

> ID：14278499
> 
> 赞同：0
> 
> 时间：2013-01-11T12:46:29.987
> 
> 标签：android, plugins, android-intent, android-activity, target

我正在寻找一种方法，如何组合不同 SDK 版本的组件。

例如，我有一个与 minSdkVersion="8" 配合使用的 APP。但我想有一个额外的功能，需要 minSdkVersion="10"。

也许像插件之类的东西并动态加载它？如果 android 设备具有 minSdkVersion="10" 它将加载该插件。在较低版本中，它只能使用 SdkVersion="8" 的基本功能。

有什么办法吗？可以在不同的包中创建两个活动并从意图加载一个活动作为界面吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:33:54.760

要面向多个平台，请在构建项目时指定最低 SDK 级别和目标 SDK 级别。您将项目配置为链接到目标 SDK 构建。如果您对当前平台上不存在的方法执行调用，Davlik VM 将生成运行时异常。编译器将为在最低 SDK 级别上不可用的调用生成警告。有各种 Java @ 声明可以抑制对类、方法或特定引用的警告。在 Eclipse 中按 F2 键以自动生成适当的 Java 装饰。听起来很吓人。但在实践中，这些警告让您可以相对无所畏惧地编写代码。

所以一般的做法是：链接目标SDK库；将 @ 装饰添加到使用来自更高 SDK 版本的方法的代码中；装饰特定于特定构建的方法或类；根据“所有警告都是错误”的编码规则生死存亡。

为每个 API 级别重新实现整个活动是多余的。具有覆盖方法的类特化并不是做这种事情的好方法。绑定的复杂性使得以这种方式工作变得困难。使用较小的帮助程序类或条件代码要好得多。

编写 Helper 类有各种约定——本质上是每个 API 级别的单独实现类，每个实现一个公共接口或抽象基类。Android 开发者博客中给出的方法是一种相当整洁的方法。该模式有很多细微的变化，所有这些都基于获取特定 API 级别的帮助程序类的实例。

这种模式的另一个例子是谷歌 ActionBarCompat 库中使用的 IActionBarHelper 接口。在这种情况下，您的活动继承自 ActivityCompat，而不是 Activity，并且实例方法 ActivityCompat.getActionBarHelper() 返回 IActionBarHelper 的实现，该实现为您正在运行的平台提供适当的实现。在这种情况下，实现包含相当多的初始化状态，以及与活动相关的状态；所以从成员方法中获取实现是有意义的。

尽管如此，Davlik VM 完全能够处理没有链接的内联方法。

```
 if (Build.Version >= 10) { 
      Call an API 10 method.
  } 
```

也工作得很好。Davlik VM 确实通过 LogCat 中的调试消息发出了一点点抱怨。因此，如果您一直这样做，可能会有一些开销。如果您要在下层平台上执行 API-10 方法，Davlik 加载程序会生成在执行时引发运行时异常的代码，而不是执行调用。但是代码链接和加载很好。if 语句是防止执行缺少的方法所需的全部内容。在小剂量下，条件代码是完全可以的。如果有很多特定于平台的代码，最好以某种方式将特定于平台的功能封装在一个类中。

对于存在或不存在的功能，例如您的 NFC 示例，最好的方法可能是在一个类中实现尽可能多的 NFC 功能；然后有条件地从您的主类或活动中的代码中引用该类。例如：

```
 void onCreate(...)
 {
    if (Build.Version >= 10) 
    {
         mNfcReceiver = new NfcReceiver(getContext());
    }
 } 
```

Helper 类模式并不能真正帮助您，因为您显然不会在下层平台上重新实现该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:06:37.907

而且，如果您使用支持库？

[http://developer.android.com/training/basics/fragments/support-lib.html](http://developer.android.com/training/basics/fragments/support-lib.html)

需要什么样的功能？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:48:39.377

你的问题在Android开发者官方博客上有非常详细的解释：

[http://android-developers.blogspot.co.uk/2010/07/how-to-have-your-cupcake-and-eat-it-too.html](http://android-developers.blogspot.co.uk/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)

它基本上是应用 Java 延迟加载，这是一种编程模式，它利用了 Java 只在第一次调用时才加载一个类这一事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T17:11:12.867

谢谢大家的回答。我能够在eclipse中使用@decoration解决这个问题：@SuppressLint("NewApi")。

在我的父活动中，我刚刚检查了 VERSION 和 NFC 支持并写入 this.supportNFC；之后我选择要加载的意图

```
if(this.supportNFC == KITAPP.NFC_ENABLED){
   intent = new Intent(this, ActivityNFC.class);
} else {
   intent = new Intent(this, ActivityBasic.class);
}
startActivityForResult(intent, 0); 
```

顺便提一句，

```
class ActivityNFC extends ActivityBasic{} 
```

所以我只是用 NFC 的附加功能扩展了我的 NFC 类。但如果移动设备不支持 NFC 或版本较低，则会加载基本功能。

# c++ - 在 DirectX9 中更改分辨率

> ID：14278502
> 
> 赞同：0
> 
> 时间：2013-01-11T12:46:37.353
> 
> 标签：c++, directx, directx-9

尽管我已经查看了一段时间的 DirectX 文档，但我发现很难找到解释 DirectX API 的良好信息来源。

我正在尝试为 DX9 的包装类创建一个方法，该方法会在运行时更改分辨率。我已经设法用 DirectDraw 处理了这个问题，但我没有找到有关 DX9 的信息，即使它应该更常见。

我发现的只是对 SetDisplayMode 的引用，但我的 Direct Object 或我的 DirectX 设备都没有这个方法。

我正在使用 DirectX 9。

示例方法：

```
void SetResolution(int width, int height, int depth)
{
   // I have access to DirectX device, object and the window HWND in this class
}; 
```

...我要更改 HWND 窗口大小，还是在 DirectX 中处理？我知道如何在 Windows 应用程序中更改分辨率，但不知道如何在 DX9 中进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:41:52.013

尝试按照通常的方式调整 D3DPRESENT_PARAMETERS。就像是：

```
// D3DPRESENT_PARAMETERS is already defined as md3dPP
RECT R ={0, 0, 640, 480}
AdjustwindowRect(&R, WS_OVERLAPPEDWINDOW, false);
md3dPP.BackBufferFormat = D3DFMT_UNKNOWN;
md3dPP.BackBufferWidth = 640;
md3dPP.BackBufferHeight = 480;
md3dPP.Windowed = true; 
```

如果您愿意，这也可能是更改窗口样式的好时机，例如：

```
SetWindowLongPtr(yourWindowHandle, GWL_STYLE, WS_OVERLAPPEDWINDOW)

// must use SetWindowPos for SetWindowLongPtr changes to take effect
SetWindowPos(yourWindowHandle, HWND_TOP, 100, 100, R.right, R.bottom, SWP_NOZORDER |     SWP_SHOWWINDOW); 
```

或者，如果您使用全屏：

```
md3dPP.BackBufferFormat = D3DFMT_X8R8G8B8;
md3dPP.BackBufferWidth = 640;
md3dPP.BackBufferHeight = 480;
md3dPP.Windowed = true;

SetWindowLongPtr(yourWindowHandle, GWL_STYLE, WS_POPUP)

// must use SetWindowPos for SetWindowLongPtr changes to take effect
SetWindowPos(yourWindowHandle, HWND_TOP, 0, 0, 640, 480, SWP_NOZORDER | SWP_SHOWWINDOW); 
```

无论哪种方式，通过调用 IDirect3DDevice9::Reset 来跟进。只需确保在重置时重新初始化资源。

所以如果你定义了类似的东西： IDirect3DDevice9 *gd3dDevice;

采用：

```
gd3dDevice->Reset(&md3dPP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:03:45.627

创建时`IDirect3DDevice9`，将使用 设置分辨率，`D3DPRESENT_PARAMETERS`并分配前端缓冲区。[如果不重新创建整个设备或调用IDirect3DDevice9::Reset](http://msdn.microsoft.com/en-us/library/bb174425%28VS.85%29.aspx)，则无法更改缓冲区的大小。

# java - 是否可以在 Windows 批处理或 Java 中编写 Tee？

> ID：14278504
> 
> 赞同：4
> 
> 时间：2013-01-11T12:46:42.350
> 
> 标签：java, windows, batch-file, command-prompt, tee

我有一个在 Windows 7 控制台中运行的 Java 程序：

```
java -classpath classfolder mypackage.MyProgram 
```

这个程序运行了很长时间。它一次又一次地使用 System.out.println 将输出写入控制台。

是否可以在不修改现有 Java 代码的情况下将其输出实时发送到控制台和日志文件？

如果 Windows 7 无法做到这一点，是否可以用 Java 编写 Tee 实用程序？

它在 Windows 8 中解决了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:13:56.247

该`tee`命令可以帮助您，但它是一个 Unix 命令。您可以[将此批处理文件](http://www.robvanderwoude.com/files/tee_nt.txt)用作`tee`.

例子：

```
systeminfo | tee_nt.bat 1.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:56:05.557

要做到这一点“不修改现有的 Java 代码”，您可以编写另一个适当重新分配的包装类，`System.out`然后调用现有的主类

```
package mypackage;
import java.io.*;
import org.apache.commons.io.output.*;

public class TeeWrapper {
  public static void main(String[] args) throws Exception {
    FileOutputStream logFile = new FileOutputStream("log.txt");
    try {
      System.setOut(new PrintStream(new TeeOutputStream(System.out, logFile)));
      MyProgram.main(args);
    } finally {
      logFile.close();
    }
  }
} 
```

（使用来自 Apache commons-io 的[TeeOutputStream ）。](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/TeeOutputStream.html)

您运行包装器而不是原始类

```
java -classpath classfolder mypackage.TeeWrapper 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:52:16.590

有可能，只需从 system.in 读取并输出到 system.out 和文件。

# php - 仅在插入一行时才显示成功消息

> ID：14278506
> 
> 赞同：0
> 
> 时间：2013-01-11T12:46:44.830
> 
> 标签：php, mysqli

为什么我只在数据库中插入一行，它会显示成功消息，但是如果我在数据库中插入多行，那么它不会显示成功消息？

下面是代码：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : array(); 
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : array();   

$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                       

foreach($studentid as $id)
{ 
$insert->bind_param("ii", $sessionid, $id);

$insert->execute();

if ($insert->errno) {
echo json_encode(array('errorflag'=>true,'msg'=>"An error has occured, Students have not been added into the Assessment"));
}else{
echo json_encode(array('errorflag'=>false,'msg'=>"Students have been successfully added into the Assessment"));
}
}

$insert->close();

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:59:26.033

您需要在每次查询后未输出所有查询后移动状态消息。故障检测也是错误的。

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : array(); 
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : array();   

$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";

if (!$insert = $mysqli->prepare($insertsql))
{
    // Handle errors with prepare operation here
}      

$success = true;

foreach($studentid as $id)
{ 
    $insert->bind_param("ii", $sessionid, $id);

    if($insert->execute() === false)
    {
        $success = false;
    }
}

$insert->close();

if($success)
{
    echo json_encode(array('errorflag'=>false,'msg'=>"Students have been successfully added into the Assessment"));
}
else
{
    echo json_encode(array('errorflag'=>true,'msg'=>"An error has occured, Students have not been added into the Assessment"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:55:43.107

您确定没有输出吗？（我假设没有输出，因为您没有提到您收到了错误消息）

似乎更有可能是因为您正在尝试输出几个 json 格式的字符串，所以在另一端接收它们的任何内容实际上都是由于无法正确识别而导致问题的部分。最好将所有消息推送到循环外部定义的数组中，然后在循环完成后回显一次。如果多个查询中的一个特定查询失败而其余查询成功，它还会为您提供更详细的信息。

# jquery - 在 vb.net 2.0 中使用 jQuery ajax

> ID：14278508
> 
> 赞同：2
> 
> 时间：2013-01-11T12:46:51.943
> 
> 标签：jquery, asp.net, ajax, vb.net

我尝试在 asp.net 网站（使用 vb.net 2.0）中使用 Ajax（通过 jQuery）。

这是我的 .aspx 页面（ajax.aspx）：

```
 <%@ Page Language="vb" AutoEventWireup="true" CodeFile="ajax.aspx.vb" Inherits="_Ajax" %>

<!DOCTYPE html>
<html>
<head>
  <title>Calling page methods with jQuery</title>
  <style type="text/css">
    #Result {
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="Result">Click here for the time.</div>

  <script src="jquery-1.8.3.js"></script>
  <script>
      $('#Result').click(function () {
          $.ajax({
              type: "POST",
              url: "ajax.aspx/HelloWorld",
              data: "{}",
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (msg) {
                  // Replace the div's content with the page method's return.
                  $("#Result").text(msg.d);
              },
              error: function (xhr, ajaxOptions, thrownError) {
                  alert("xhr.responseText= " + xhr.responseText);
                  alert("xhr.responseStatus= " + xhr.responseStatus);
                  alert("thrownError= " + thrownError);
              }
          });
      });
  </script>
</body>
</html> 
```

这是代码隐藏文件（ajax.aspx.vb）：

```
 Imports System
Imports System.Web.Services

Public Class _Ajax
    Inherits System.Web.UI.Page

    Protected Sub Page_Load()

    End Sub

    <WebMethod()> _
    Public Shared Function HelloWorld() As String
        Return "Hello: "
    End Function

End Class 
```

当我点击我的 div 时，ajax 调用失败：

**System.ArgumentException：未知的 Web 方法 HelloWorld。**

**[编辑]**

多次刷新重启浏览器后，发现web方法！

我现在尝试添加一个新的网络方法，但我再次收到错误“未知的网络方法”。

我认为这是一个缓存问题。

你知道如何强制禁用这种缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:14:07.830

最后，paritosh 的回答很有用。

我必须使用 ASP.NET 2.0 在 Web 服务器上安装 ASP.NET Ajax 1.0。

这是链接： [http ://www.microsoft.com/en-us/download/details.aspx?id=883](http://www.microsoft.com/en-us/download/details.aspx?id=883)

然后，直到我重新启动ISS网站才找到web方法，我不知道为什么，但重新启动后就可以了。

感谢您的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:26:47.773

改变

```
<%@ Page Language="vb" AutoEventWireup="true" CodeFile="ajax.aspx.vb"
 Inherits="_Ajax" %> 
```

到

```
 <%@ Page Language="vb" AutoEventWireup="true" CodeFile="ajax.aspx.vb"
 Inherits="_Ajax" ScriptManager.EnablePageMethods="true" %> 
```

这将使该页面上的所有 Web 方法对 JavaScript 客户端可见。

# ios - 在 ios 中通过 POST 将 json 发送到 symfony2 服务器

> ID：14278524
> 
> 赞同：0
> 
> 时间：2013-01-11T12:48:30.357
> 
> 标签：ios, objective-c, json, post, symfony

抱歉这个愚蠢的问题，但我对此感到疯狂:(

我正在尝试通过 POST 将 json 从 iOs 前端发送到基于 symfony2 的服务器。

我不知道我做错了什么，但 POST 中没有任何内容。

这是前端代码：

```
NSMutableDictionary* objeto = [NSMutableDictionary dictionary];
[objeto setValue:[NSNumber numberWithInt:2] forKey:@"cliente"];
[objeto setValue:[NSNumber numberWithInt:3] forKey:@"usuario"];
[objeto setValue:[NSNumber numberWithInt:4] forKey:@"producto"];
[objeto setValue:[NSNumber numberWithInt:100] forKey:@"cantidad"];

NSLog(@"objeto %@", [objeto JSONRepresentation]);

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:objeto options:kNilOptions error:nil];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JSON String: %@",jsonString);

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
[NSURL URLWithString:@"http://xxx.com/nueva_venta"]
cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
timeoutInterval:60.0];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:jsonData];

NSURLConnection *connection = [[[NSURLConnection alloc] initWithRequest:request delegate:self]autorelease];

if(connection)
{
    recibeData = [NSMutableData data];
} 
```

例如，如果我在服务器端执行此操作：

```
 /**
* Prueba de nueva venta
* @Route("/nueva_venta", name="nueva_venta")
* @Method("POST")
*/
public function nuevaVenta(){

   $request= Request::createFromGlobals();
       return new Response(json_encode($request->request->all()));
    } 
```

我得到一个空的 json :(

如果我改为通过 Javascript 发出请求，它可以正常工作：

```
 $(document).ready(function() {

        var venta=new Venta();
        venta.cliente=10;
        venta.usuario=1;
        venta.producto=11;
        venta.cantidad=100;

        var capsulaJson={"cliente": venta.cliente,
                            "usuario":venta.usuario,
                            "producto":venta.producto,
                            "cantidad":venta.cantidad};

      var json=capsulaJson.toString();

    $.post("http://xxx.com/nueva_venta", json,
             function (datos) {
                if (datos) {
                    alert(datos);
                }
                else {
                    alert("No funciona :-(");
                }
            }
);
}); 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:03:29.027

你有一个错字.. 不要使用 jsonData。使用 jsonString

```
[request setHTTPBody:jsonString]; 
```

# c# - MVC4 提交一个 PagedList

> ID：14278526
> 
> 赞同：1
> 
> 时间：2013-01-11T12:48:37.780
> 
> 标签：c#, asp.net-mvc, pagedlist

如何提交包含 PagedList 的表单？

模型：

```
public class PagedClientViewModel
{
    public int? Page { get; set; }
    public PagedList.PagedList<ClientViewModel> Clients { get; set; }
}

public class ClientViewModel
{
    public int ClientId { get; set; }
    public string Name { get; set; }
    public bool IsCool { get; set; }
} 
```

看法：

```
@model MvcApplication21.Models.PagedClientViewModel

@{
    ViewBag.Title = "Index";
}

 @using (Html.BeginForm("index", "home"))
    {         
        foreach (var item in Model.Clients)
        { 
    <div>
    @Html.HiddenFor(modelItem => item.ClientId)
    @Html.EditorFor(modelItem => item.Name)
    @Html.CheckBoxFor(modelItem => item.IsCool)
    </div>        
        }

    <input type="submit" value="submit" />
    } 
```

看法：

```
 public ActionResult Index()
    {
        List<ClientViewModel> clients = new List<ClientViewModel>();

        ClientViewModel client1 = new ClientViewModel
        {
            ClientId = 1,
            Name = "Bob",
            IsCool = false
        };
        ClientViewModel client2 = new ClientViewModel
        {
            ClientId = 2,
            Name = "John",
            IsCool = false
        };
        ClientViewModel client3 = new ClientViewModel
        {
            ClientId = 3,
            Name = "Peter",
            IsCool = true
        };

        clients.Add(client1);
        clients.Add(client2);
        clients.Add(client3);

        PagedClientViewModel model = new PagedClientViewModel
        {
           Page = 1,
           Clients = new PagedList<ClientViewModel>(clients, 1, 10)           
        };

        return View(model);
    }

    [HttpPost]
    public void Index(PagedList<ClientViewModel> model)
    {
       //how do i process the model here?
    }

} 
```

我收到以下错误：

> 没有为此对象定义无参数构造函数。

这样做的正确方法是什么？我需要使用编辑器模板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:03:11.910

我认为该错误正在告诉您到底出了什么问题。绑定到您的视图的东西缺少无参数构造函数。PagedList 也许？

此外，您填充视图的操作使用的模型与您的 HttpPost 方法不同。PagedClientViewModel 与 PagedList。在构建视图和提交视图时尝试使用相同的视图模型。

# javascript - javascript 对象属性具有指向另一个属性的指针

> ID：14278529
> 
> 赞同：0
> 
> 时间：2013-01-11T12:48:43.150
> 
> 标签：javascript

我有这段代码，将节点添加到数组然后更改它，`firstNode`对象在`init`函数中设置。

```
var myClass = function() {
    this.items = []
    this.firstNodeValues = {};

    this.init = function() {
        var firstIndex = false;

        for (i = 10; i <= 15; i++) {
            Node = {};
            Node.index = i;
            Node.name = "undefined";
            if (i == 10) {
                Node.name = "John"
                this.firstNodeValues = Node;
            }
            this.items[i] = Node;
        }
    }

    this.iterate = function() {
        var newIndex = 10;
        for (i = 10; i <= 15; i++) {
            this.items[i].index = newIndex;
            if (i == 10) {
                this.items[i].name = "Michael";
            }
            newIndex++;
        }
    }
}
var test = new myClass();
test.init();
console.debug(test.firstNodeValues.name) // this gives value "John"
test.iterate();
console.debug(test.firstNodeValues.name) // this gives value "Michael" 
```

第二次调试返回`"Michael"`，但为什么呢？它看起来`firstNodeValues`有一个指向节点的指针`items[10]`。
我希望如果我设置`FirstNodeValues`in`firstTime`和后来的更改节点值，那么`firstNodeValues`不是 Changes 并保持与我第一次设置它的完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:55:50.680

更改数据时克隆发生变化的原因是：

```
this.firstNodeValues = Node; 
```

在那里，您声明`firstNodeValues`是对 的*引用*，`Node`而不是*副本*。所以你改变的一切`firstNodeValues`，改变`Node`，反之亦然。

您需要克隆该对象，如下所示：

```
function clone(obj){
    if(obj == null || typeof(obj) != 'object'){
        return obj;
    }

    var temp = {};

    for(var key in obj){
        if(obj.hasOwnProperty(key))){
            temp[key] = clone(obj[key]);
        }
    }
    return temp;
} 
```

然后，您可以复制节点，如下所示：

```
this.firstNodeValues = clone(Node); 
```

这将确保它`this.firstNodeValues`不是对 的引用，而是一个新对象，具有与（所以，一个克隆）`Node`相同的属性/值。`Node`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T13:02:40.207

您可能对[jQuery.extend()](http://api.jquery.com/jQuery.extend/)感兴趣。所以：

`this.firstNodeValues = $.extend( {}, Node );`

# selenium - 无法点击 http://www.royalmail.com/ 中的 Redelivery menuItem

> ID：14278542
> 
> 赞同：0
> 
> 时间：2013-01-11T12:49:43.180
> 
> 标签：selenium

正在使用 Selenium WebDriver 代码。FreeToPay 是代表[http://www.royalmail.com/](http://www.royalmail.com/)主页的类 getWebDriver 是获取 webdriver 实例的 get 方法。

```
 WebElement Menu=FreeToPay.getWebDriver().findElement(By.linkText("Receiving mail"));
        //Sub menu 
        WebElement MenuItem=FreeToPay.getWebDriver().findElement(By.linkText("Redelivery"));
        Actions builder = new Actions(driver); 
        Actions hoverOverRegistrar = builder.moveToElement(Menu);
        hoverOverRegistrar.build().perform();

        MenuItem.click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:14:51.573

由于我在页面中看不到链接，因此有我的提示：

*   手动尝试并完全按照脚本中的内容进行操作。如果您无法手动执行此操作，则可能必须更新脚本

*   代码中可能有错别字：

您定义了 WebElement 调用`MenuItem`，但稍后您尝试将鼠标悬停在`Menu`仅调用的内容上：

```
Actions hoverOverRegistrar = builder.moveToElement(Menu); 
```

也许尝试将其替换为

```
Actions hoverOverRegistrar = builder.moveToElement(MenuItem); 
```

顺便说一句，最后一个建议：变量应以小写字母开头 - 请参阅[此建议](http://java.about.com/od/javasyntax/a/nameconventions.htm)

# c# - Silverlight - 使用双工与 PollingDuplexHttpBinding 而不是 NetTcpBinding

> ID：14278549
> 
> 赞同：0
> 
> 时间：2013-01-11T12:50:01.833
> 
> 标签：c#, asp.net, wcf, silverlight, wcf-binding

我正在构建一个 Silverlight 网站，我正在寻找客户端和服务器之间最简单的双向通信。

据我了解，这是使用双工的 WCF 完成的。

我已经阅读了一些关于 NetTcpBinding 或 PollingDuplexHttpBinding 的教程。

NetTcpBinding 在各个方面似乎都更简单一些。

我徘徊，关于 Silverlight 应用程序，有什么缺点？

有什么理由使用 PollingDuplexHttpBinding 而不是 NetTcpBinding？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T13:34:09.477

我认为有很多原因，但是将 nettcpbinding 与 PollingDuplexHttpBinding 进行比较会极大地影响性能，只能在内网环境中使用的解决方案，并且只能使用端口 4502-4534。同样，silverlight 不支持用于 nettcp 协议的 SSL。

# azure - azure connect 无法连接到辅助角色

> ID：14278550
> 
> 赞同：1
> 
> 时间：2013-01-11T12:50:02.803
> 
> 标签：azure, connect

我已经设置了一个工作角色，它启动在云中运行的本机应用程序，该应用程序在端口 9900 上侦听内部端点。我还根据 Microsoft 的说明设置了 Azure 连接。我可以使用从管理门户获得的 IPV6 地址 ping 工作人员角色实例。我也可以从 webrole 连接到它，但是我无法使用 Azure connect 从本地计算机连接到它。每次我尝试这个连接尝试超时。是否可以使用 connect 连接到内部端点？我看到的所有示例都从云中的角色连接回本地机器，而不是反过来，但我找不到任何说这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:52:36.230

上述信息不足以说明问题所在或您无法从本地本地计算机连接到您的工作人员角色的原因。在 Azure 角色和本地计算机上安装和配置 Azure 连接后，您可以从双方连接。即使 Azure Connect 在过去 2 年内没有任何更新，您仍然可以使用此预览/测试版功能。

您可以做的是运行一些故障排除测试，如下所述，然后在此处提供一些故障排除日志以提供准确的帮助。

*   [Windows Azure Connect 故障排除](http://msdn.microsoft.com/en-us/library/windowsazure/gg433016.aspx)

此外，如果可能，请使用以下信息重新检查您的 Azure 连接配置：[为 Windows Azure 角色配置连接的清单](http://msdn.microsoft.com/en-us/library/windowsazure/gg433045.aspx)

一旦侧节点，如果您可以使用 Windows Azure 虚拟网络，那最好不要使用 Azure Connect。这是可以提供帮助的链接：

*   [将 Web 或辅助角色连接到 Windows Azure 中的简单虚拟网络](http://michaelwasham.com/2012/08/06/connecting-web-or-worker-roles-to-a-simple-virtual-network-in-windows-azure/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:17:09.267

我终于解决了这个问题。工作人员角色端点必须创建为输入而不是内部输入，即使它并不意味着可公开访问。然后，Azure 连接 VPN 会阻止除添加到相关组的计算机之外的所有输入。这一点从文档中并不清楚。我从另一台未添加到该组的计算机上对其进行了测试，它被阻止了，因此 VPN 正在运行。

# unix - Unix HP-UX ksh 递归查找和替换

> ID：14278552
> 
> 赞同：1
> 
> 时间：2013-01-11T12:50:06.463
> 
> 标签：unix, sed, find, ksh, hp-ux

我正在尝试在 HP-UX 中进行递归查找和替换，但我遗漏了一些东西。

我目前拥有的：

```
find . -name "*.java" | xargs sed 's/foo/bar/g' 
```

知道问题是它没有替换内联文件。我相信在其他操作系统上有一个 -i 标志，但在我的 HP-UX 版本中似乎没有。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:03:36.513

```
find . -name "*.java" | xargs sed -i 's/foo/bar/g' 
```

或者

```
find . -name "*.java" | xargs perl -pi -e's/foo/bar/g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:08:31.893

在文件上运行您喜欢的任何工具并“就地”更改它们的简单、便携的解决方案（sed -i 在幕后也使用 tmp 文件）只是：

```
find . -name "*.java" |
while IFS= read -r file; do
   sed 's/foo/bar/g' "$file" > tmp && mv tmp "$file"
done 
```

您可以将该方法用于 sed、grep、cut，无论您喜欢什么：

```
find . -name "*.java" |
while IFS= read -r file; do
   grep "whatever" "$file" > tmp && mv tmp "$file"
done 
```

唯一不起作用的是名称包含换行符的文件，但`find | xargs`解决方案也不是原样，如果你有它们，你应该重命名它们。

# android - 是否有更好的替代 Eclipse 来编写 android 应用程序？

> ID：14278554
> 
> 赞同：2
> 
> 时间：2013-01-11T12:50:14.500
> 
> 标签：android

> **可能重复：**
> [从 Eclipse 切换到 IntelliJ IDEA 进行 Android 开发的好处](https://stackoverflow.com/questions/4964168/benefits-of-switching-from-eclipse-to-intellij-idea-for-android-development)

好吧，我一直在使用 Eclipse，正如不久前回答我问题的人之一所指出的那样，Eclipse 真的很“愚蠢”。有时编码变得困难，您必须多次清理和构建，并且在某些情况下完全重新启动 Eclipse。

所以我在想有没有更好的 IDE，你可以在上面编写比 Eclipse 更稳定的 android 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:52:36.930

我最近一直在 Mac 和 Linux 下使用[IntelliJ IDEA 12（社区版）](http://www.jetbrains.com/idea/)，发现它非常棒。

*虽然这个问题之前已经被[问过](https://stackoverflow.com/questions/4964168/benefits-of-switching-from-eclipse-to-intellij-idea-for-android-development)，所以可能会被关闭。*

我之前问过这个问题，IDEA 中没有足够的东西让我做出改变，但由于它现在包含一个 Android UI 设计器，所以它已经足够了。现在缺少的只是一个`AndroidManifest.xml`编辑器......

# python - 扭曲连接丢失后如何获取客户端IP地址

> ID：14278555
> 
> 赞同：4
> 
> 时间：2013-01-11T12:50:16.823
> 
> 标签：python, ip, twisted

我知道我们可以在建立连接后获取客户端（主机）IP，因为那时我们将具有传输属性：

```
self.transport.getPeer() 
```

但是当它失去与服务器的连接时，我如何在扭曲的 TCP 服务器中获取客户端的 IP 地址，就像在它断开连接之后一样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T12:57:51.453

这有点晚了。我建议您在拥有此信息时保存它。例如：

```
class YourProtocol(protocol.Protocol):

    def connectionMade(self):
        self._peer = self.transport.getPeer()

    def connectionLost(self):
        print 'Lost connection from', self._peer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-10T23:53:47.830

虽然这已经得到了回答，但我想我会很快添加我的，所以我以后不会忘记这个......我们知道，Twisted 的文档是......很好扭曲......

```
def connectionLost(self):
    ip, port = self.transport.client
    print ip
    print port 
```

通过使用上述内容，您可以简单地将 ip/port 与任何数据库或您拥有的跟踪客户端的方式进行匹配。

我最终通过`print vars(self.transport)`在输出/控制台中使用和查看客户端对象来找到...在这里使用经典的 php 调试

# ruby-on-rails - 如何使用 Rails 从图像序列（例如 jpg）生成 mp4 文件？

> ID：14278560
> 
> 赞同：2
> 
> 时间：2013-01-11T12:50:35.240
> 
> 标签：ruby-on-rails, ruby, ffmpeg

我有一个图像序列 sample001.jpg、sample002.jpg、...、sample400.jpg。如何使用`ffmpeg`和从他们构建一个 mp4 视频文件`Ruby on Rails`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:20:14.793

刚刚发现`Rmagick`这颗宝石几乎正在做我想要的。它可以将我的序列保存为 avi 格式（这对我来说也可以）。

1）加载你的序列：

`sequence = ImageList.new("sample001.jpg", "sample002.jpg", ..., "sample400.jpg")`

2）Genearte avi文件：

`sequence.write("sequence.avi")`

3) 完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:28:31.643

您可以使用系统命令`ffmpeg`在 ruby​​ 中运行命令行。 `system("ffmpeg -f image2 -i img%d.jpg /tmp/a.mpg")`或`exec`或`backticks`

# regex - 需要从贪婪中治愈我的正则表达式

> ID：14278565
> 
> 赞同：0
> 
> 时间：2013-01-11T12:50:47.800
> 
> 标签：regex

我有一个表情

```
^(((\d{1,2}))|((\d{1,2}\.\d{1,2}))|((\d{1,2}\.\d{1,2}\.\d{1,2})))(;?)$ 
```

验证这样的文本行：

```
9
99
99.9
99.99
99.99.9
99.99.99 
```

现在我需要为`;`-separated 文本验证所有这些可能的变体

当我使用表达式时：

```
^(((((\d{1,2}))|((\d{1,2}\.\d{1,2}))|((\d{1,2}\.\d{1,2}\.\d{1,2})))(;?))+?)$ 
```

它变得贪婪并允许超过 2 位数。

对不起，伙计们，我需要添加一些解释。这是所有可能匹配的示例

```
9;99;99.9;99.99;99.99.9;99.99.99 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:58:23.383

使用这个正则表达式`^\d{1,2}(\.|;\d{1,2})*$`

或者

设置重复计数`^\d{1,2}(\.|;\d{1,2})`**{0,2}**`$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:55:20.783

您可以尝试：

```
^(\d{1,2})(;(\d{1,2})){0,2}$ 
```

它接受带有`;`分隔符的描述输入。

如果要测试分隔符，只需`.`更改：`;``\.`

```
^(\d{1,2})(\.(\d{1,2})){0,2}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:02:09.800

您的问题不是由贪婪匹配引起的，而是因为您只允许选择分隔分号。我会尝试类似的东西（鉴于`dotted_number`正则表达式与您的原始单值匹配，没有分号）

```
^(dotted_number;)*dotted_number;?$ 
```

最后，它看起来像

```
^((\d{1,2}\.){0,2}(\d{1,2});)*(\d{1,2}\.){0,2}(\d{1,2});?$ 
```

或者你可以用另一种方式对其进行perenthesize，这可能会稍微快一些

```
^dotted_number(;dotted_number)*;?$ 
```

即使这样也有效：

```
egrep '^(([[:digit:]]{1,2}\.){0,2}[[:digit:]]{1,2}(;|;?$))+$' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T13:04:40.793

您有问题的正则表达式允许超过两位数，因为第一个选项，

```
((\d{1,2})) 
```

后跟 a`+`有效地匹配任意数量的数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T13:07:34.203

也许我错了，但你需要这样的东西：

```
^((\d)\2?)(?:[.](?:\1|\2))*$ 
```

更改`*`为您想要的任何内容:) 喜欢`{0,2}`或其他与您的模式相匹配的内容。

我在这里做什么？

我只是使用`\2 \1`-它是一个组，已经在正则表达式中匹配:)

`99.99.99`

`\1`是外括号，所以它首先匹配`99`=`^( (\d)\2? )...`

`\2`是内括号，所以它匹配`9` = `( \d )\2?`

# c# - 基于 .Net 的矢量 CMYK 图形库

> ID：14278568
> 
> 赞同：0
> 
> 时间：2013-01-11T12:50:55.293
> 
> 标签：c#, .net, vector, richtext, cmyk

我们有一个应用程序可以简化流程，最终结果是打印的广告页面。当前的实现使用 C# 中的 GDI+ 命令在设计环境中绘制广告，允许对广告进行视觉排列并将最终结果打印到文件中。

我们的系统有几个方面需要改进：

1.  该系统本质上是 RGB，RGB 和 CMYK 输出之间的不匹配会导致一些问题。
2.  在 GDI+ 中，我们缺乏对富文本的支持。我们的系统使用不理想的每行格式。
3.  如果输入需要超出我们系统提供的格式，我们可以选择提供预先设计的图像。我们的系统不能接受矢量设计（除了 emf，没有好的设计器支持 CMYK，从其他格式转换为 EMF 没有产生好的结果。

我们需要改进我们的图形子系统。我们可以使用什么好的库？这是我们的要求：CMYK、Vector、Rich-Text、Complex script (rtl+ltr)、实时屏幕显示

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:20:00.180

好吧，读完[这篇文章后](https://stackoverflow.com/questions/4827270/using-cmyk-colours-in-wpf-xaml)，我想低级的 WPF 似乎是一个不错的方法：它完全支持富文本、双向文本，它完全基于矢量，它与打印标准 (XPS) 紧密兼容，现在我知道了它支持 CMYK。

我会试一试。

更新：事实证明，Wpf 是解决我们手头问题的完美解决方案。我们已经用它来创建 LOB 应用程序，所以对于它彻底的文档处理、色彩空间处理、打印、xps ......促进桌面出版的功能的经验很少。

# c# - XNA 上的浮点精度

> ID：14278570
> 
> 赞同：1
> 
> 时间：2013-01-11T12:50:59.247
> 
> 标签：c#, visual-studio-2010, xna, floating-point-precision

我正在使用 Visual Studio 2010 Ultimate，在 .Net 框架 4 上工作。

![精度问题](../Images/645c45991f482cd2b42a5386ab25cb09.png)

`groundControlPoint`和的类型`worldPosition`是`Vector2`，来自 XNA 框架。

我知道每个调试器都使用自己的精度管理，但是这个问题使我的代码无法正常工作。我想将我的加法与给定的浮点值（在我的情况下是 5166.28003 ..）进行比较，但由于我的加法结果是`5166.28027`，它总是错误的......

关于如何理解的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:54:27.557

如[MSDN](http://msdn.microsoft.com/en-us/library/aa691146%28v=vs.71%29.aspx)中所述，`float`精度仅为 7 位...

> 该`float`类型可以表示范围从大约 1.5 × 10E−45 到 3.4 × 10E38 的值，精度为 7 位。

在您的情况下，您正在处理的值是`5166.28003`，因此只能精确到小数点后 3 位。

如果您需要更高的精度，请考虑使用`double`（15-16 位精度）或[`decimal`](http://msdn.microsoft.com/en-us/library/aa691147%28v=vs.71%29.aspx)（通常用于财务和货币计算）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:55:10.763

`float`仅精确到 7 位。从 看[`MSDN`](http://msdn.microsoft.com/en-us/library/aa691146%28v=vs.71%29.aspx)。

> float 类型可以表示范围从大约 1.5 × 10−45 到 3.4 × 1038 的值，精度为 7 位。

[`decimal`](http://msdn.microsoft.com/en-us/library/aa691147%28v=vs.71%29.aspx)type 看起来更适合您的情况。

> 十进制类型是适用于金融和货币计算的 128 位数据类型。十进制类型可以表示从 1.0 × 10−28 到大约 7.9 × 1028 的值，有效数字为 28-29。

# vba - 锁定属性的VBA Excel替代方案？

> ID：14278571
> 
> 赞同：0
> 
> 时间：2013-01-11T12:51:03.500
> 
> 标签：vba, excel

请您告诉我**锁定**财产的替代方案。

实际上我有一些宏，使用这些宏我锁定了一些单元格并基于 userEnvironments 解锁了相同的单元格，但是客户端希望它作为共享工作簿，以便多个用户可以一次编辑。锁定需要**取消保护**和**保护，这在****共享**工作簿时是不可能的。

关！所以请你给我一个替代方案来解决我的问题。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:50:32.680

如果锁定的属性仍然可用，那么您可以使其无法选择锁定的单元格。这不会阻止一个坚定的用户，因为他们可以禁用宏，但我想锁定更多是为了阻止对公式和内容的意外编辑？

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim Cr As Range
Dim Rr As Range
If Not Target.Rows.Count > 1 And Not Target.Columns.Count > 1 Then
    If Target.Locked = True Then
        Target.Offset(ColumnOffset:=1).Select
    End If
Else
    If Target.Cells.Count > 1000 Then
        Debug.Print "Selection too big!"
        Target.Cells(1,1).Select
        Exit Sub
    End If
    For Each Cr In Target.Cells
        If Cr.Locked = False Then
            If Rr Is Nothing Then
                Set Rr = Cr
            Else
                Set Rr = Application.Union(Rr, Cr)
            End If
        End If
    Next Cr
    If Not Rr Is Nothing Then
        Rr.Select
    End If
End If
End Sub 
```

当用户选择单个单元格并且其锁定属性为 true 时，它​​会将它们向右移动到下一个未锁定的列。如果它是一个选定区域，它会从该区域中删除所有锁定的单元格。我没有真正测试过它，它可能不是最好的解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:13:22.283

Private Sub Worksheet_Change(ByVal Target As Range)

```
Dim cell As Range 
Dim Rng As Range 
Dim Flag As Boolean 

Flag = False 

For Each Rng In Target.Cells 

    For Each cell In Worksheets("DATA").Range("A1:AZ10") 
        If cell.Address = Rng.Address Then 
            MsgBox "You are not authorized to edit cells in this range." 
            Application.EnableEvents = False 
            Application.Undo 
            Application.EnableEvents = True 
            Flag = True 
            Exit For 
        End If 
    Next cell 

    If Flag = True Then 
        Exit For 
    End If 

Next Rng 
```

结束子

Atlast我得到了我的问题的答案..

# iphone - UIToolBar 图像显示不正确

> ID：14278576
> 
> 赞同：0
> 
> 时间：2013-01-11T12:51:18.090
> 
> 标签：iphone, ios, objective-c, uitoolbar

我有这个 UIToolBar 显示图像不正确的问题。有些显示很好，有些则没有。我想知道是否有人以前遇到过这种情况。不确定这是否是一个透明的事情。您可以看到图像 1 和图像 3 实际上是 png 图标图像时是白色圆圈。

谢谢你的帮助

这是我要显示的图像：

![图片](../Images/60266b9e9d3a9534e8c77b0736e8c15f.png)

这是一个屏幕截图：

![截屏](../Images/10d0239343a09ef70d9eee9a6063f9d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:56:26.810

标签栏图标只是模板图像，因此 iOS 会自行渲染效果。您必须添加没有任何效果和颜色的图像才能使其正常工作。[在此处](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW8)和[此处](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW52)查看文档。在您的示例中，它可能是一个带有“az”切口的单色圆圈。

# android - 插入新的联系意图

> ID：14278587
> 
> 赞同：25
> 
> 时间：2013-01-11T12:52:01.117
> 
> 标签：android, contacts, android-contacts

对于我的一个应用程序，我需要用户选择他现有的联系人之一或创建一个新联系人。使用以下代码显然很容易选择一个：

```
i = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);
startActivityForResult(i, PICK_CONTACT_REQUEST ); 
```

现在我想创建一个新联系人。我尝试使用该代码，但它不会触发活动结果：

```
i = new Intent(Intent.ACTION_INSERT);
i.setType(Contacts.CONTENT_TYPE);
startActivityForResult(i, PICK_CONTACT_REQUEST); 
```

上面的代码将启动联系人添加表单。然后当我验证它时，它只是要求我打开联系人列表，并且永远不会触发 onActivityResult 方法。

你能帮我让它工作吗？

我在一些板上读到这是不可能的，我必须创建自己的联系人添加表单。你能确认一下吗？

**编辑：问题解决了。检查我的答案。**

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-11T13:06:50.443

您可以选择是否要自动添加联系人，或者使用预先填写的数据打开添加联系人活动：

```
/**
 * Open the add-contact screen with pre-filled info
 * 
 * @param context
 *            Activity context
 * @param person
 *            {@link Person} to add to contacts list
 */
public static void addAsContactConfirmed(final Context context, final Person person) {

    Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);

    intent.putExtra(ContactsContract.Intents.Insert.NAME, person.name);
    intent.putExtra(ContactsContract.Intents.Insert.PHONE, person.mobile);
    intent.putExtra(ContactsContract.Intents.Insert.EMAIL, person.email);

    context.startActivity(intent);

}

/**
 * Automatically add a contact into someone's contacts list
 * 
 * @param context
 *            Activity context
 * @param person
 *            {@link Person} to add to contacts list
 */
public static void addAsContactAutomatic(final Context context, final Person person) {
    String displayName = person.name;
    String mobileNumber = person.mobile;
    String email = person.email;

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
            .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null).build());

    // Names
    if (displayName != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                        displayName).build());
    }

    // Mobile Number
    if (mobileNumber != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, mobileNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE).build());
    }

    // Email
    if (email != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Email.DATA, email)
                .withValue(ContactsContract.CommonDataKinds.Email.TYPE,
                        ContactsContract.CommonDataKinds.Email.TYPE_WORK).build());
    }

    // Asking the Contact provider to create a new contact
    try {
        context.getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (Exception e) {
        e.printStackTrace();
    }

    Toast.makeText(context, "Contact " + displayName + " added.", Toast.LENGTH_SHORT)
            .show();
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-11T13:20:54.940

终于找到解决办法了，分享给大家。这只是对 4.0.3 以上的 Android 版本的修复。它不适用于 4.0 到 4.0.2。

```
i = new Intent(Intent.ACTION_INSERT);
i.setType(Contacts.CONTENT_TYPE);
if (Integer.valueOf(Build.VERSION.SDK) > 14)
    i.putExtra("finishActivityOnSaveCompleted", true); // Fix for 4.0.3 +
startActivityForResult(i, PICK_CONTACT_REQUEST); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-11T13:01:05.470

```
Intent intent = new Intent(
        ContactsContract.Intents.SHOW_OR_CREATE_CONTACT,
        Uri.parse("tel:" + phoneNumber));
    intent.putExtra(ContactsContract.Intents.EXTRA_FORCE_CREATE, true);
    startActivity(intent); 
```

此代码可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-22T14:01:52.583

我收集了各种添加联系人的 Intent。这是单个函数的结果：

```
@JvmStatic
fun prepareCreateContactIntent(context: Context, contactName: String? = null, phoneNumber: String? = null): Intent? {
    var intent = Intent(Intents.Insert.ACTION)
    intent.type = ContactsContract.RawContacts.CONTENT_TYPE
    val packageManager = context.packageManager
    var resolveActivity: ResolveInfo? = packageManager.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY or PackageManager.GET_RESOLVED_FILTER)
    if (resolveActivity == null) {
        intent = Intent(Intent.ACTION_INSERT).setType(ContactsContract.Contacts.CONTENT_TYPE)
        resolveActivity = packageManager.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY or PackageManager.GET_RESOLVED_FILTER)
    }
    if (resolveActivity == null) {
        intent = Intent(Intents.SHOW_OR_CREATE_CONTACT, if (phoneNumber == null) Uri.parse("tel:") else Uri.parse("tel:$phoneNumber"))
        intent.putExtra(Intents.Insert.NAME, contactName)
        resolveActivity = packageManager.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY or PackageManager.GET_RESOLVED_FILTER)
    }
    intent.putExtra(Intents.Insert.NAME, contactName)
    intent.putExtra(Intents.Insert.PHONE, phoneNumber)
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET or Intent.FLAG_ACTIVITY_MULTIPLE_TASK)
    return if (resolveActivity == null) null else intent
} 
```

如果它返回null，则表示没有应用程序可以处理它，因此您应该自己添加它，或者向用户显示一些东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-05T10:37:12.790

使用了已接受答案的第一部分：

```
 Intent i = new Intent(Intent.ACTION_INSERT);
        i.setType(ContactsContract.Contacts.CONTENT_TYPE);
        if (Build.VERSION.SDK_INT > 14)
            i.putExtra("finishActivityOnSaveCompleted", true); // Fix for 4.0.3 +
        startActivityForResult(i, 1); 
```

现在在您的结果中，您可以获得电话号码和姓名，因为这很棘手，您应该查询两个由相同 ID 连接的不同表。我将发布这部分，以便每个人都更容易：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
    if (requestCode == 1) {
        if (resultCode == RESULT_OK) {
            assert data != null;
            ContentResolver cr = getContentResolver();
            Cursor cursor = cr.query(Objects.requireNonNull(data.getData()), null, null, null, null);
            if (cursor != null && cursor.moveToFirst()) {
                String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                if (cursor.getInt(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)) > 0) {//Has phoneNumber
                    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[]{id}, null);
                    while (pCur != null && pCur.moveToNext()) {
                        String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        Log.v("SteveMoretz", "NAME : " + name + " phoneNo : " + phoneNo);
                    }
                    if (pCur != null) {
                        pCur.close();
                    }
                }
            } else {
                Toast.makeText(getApplicationContext(), "User canceled adding contacts", Toast.LENGTH_SHORT).show();
            }
            if (cursor != null) {
                cursor.close();
            }
        }
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

希望这会对某人有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-11T06:17:19.807

如果你使用 Kotlin 试试

```
fun Fragment.saveContact(name: String?, phone: String?) {
    if (name != null && phone != null) {
        val addContactIntent = Intent(Intent.ACTION_INSERT)
        addContactIntent.type = ContactsContract.Contacts.CONTENT_TYPE
        addContactIntent.putExtra(ContactsContract.Intents.Insert.NAME, name)
        addContactIntent.putExtra(ContactsContract.Intents.Insert.PHONE, phone)
        startActivity(addContactIntent)
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-27T13:23:23.127

```
 // Creates a new Intent to insert a contact

Intent intent = new Intent(Intents.Insert.ACTION);
 // Sets the MIME type to match the Contacts Provider

intent.setType(ContactsContract.RawContacts.CONTENT_TYPE); 
```

如果您已经有联系人的详细信息，例如电话号码或电子邮件地址，您可以将它们作为扩展数据插入到意图中。对于键值，请使用 Intents.Insert 中的适当常量。联系人应用程序在其插入屏幕中显示数据，允许用户进行进一步的编辑和添加。

```
private EditText mEmailAddress = (EditText) findViewById(R.id.email);
private EditText mPhoneNumber = (EditText) findViewById(R.id.phone);

/*
 * Inserts new data into the Intent. This data is passed to the
 * contacts app's Insert screen
 */
 // Inserts an email address

 intent.putExtra(Intents.Insert.EMAIL, mEmailAddress.getText())
 /*
  * In this example, sets the email type to be a work email.
  * You can set other email types as necessary.
  */
  .putExtra(Intents.Insert.EMAIL_TYPE, CommonDataKinds.Email.TYPE_WORK)
 // Inserts a phone number
  .putExtra(Intents.Insert.PHONE, mPhoneNumber.getText())
 /*
  * In this example, sets the phone type to be a work phone.
  * You can set other phone types as necessary.
  */
  .putExtra(Intents.Insert.PHONE_TYPE, Phone.TYPE_WORK); 
```

创建 Intent 后，通过调用 startActivity() 发送它。

```
/* Sends the Intent
 */
startActivity(intent); 
```

注意：导入“ContactsContract”的“intents”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T13:39:10.767

```
 int INSERT_CONTACT_REQUEST=2;
 i = new Intent(Intent.ACTION_INSERT,Contacts.CONTENT_URI);
 startActivityForResult(i, INSERT_CONTACT_REQUEST); 
```

* * *

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
// TODO Auto-generated method stub
 if(requestCode == INSERT_CONTACT_REQUEST)
   {
        if (resultCode == RESULT_OK)
            {                                  
             Toast.makeText().show(getApplicationContext(),"Added_Succesfully",Toast.LENGTH_SHORT);
            }else if(resultCode == RESULT_CANCELED)
                   {
                 Toast.makeText().show(getApplicationContext(),"Contacts Adding Error",Toast.LENGTH_SHORT);     
                    }

    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-20T07:41:29.070

> 在 Xamarin.forms 和 Xamarin.Android c# 中。

```
Android.Content.Intent intent = new  
Android.Content.Intent(Android.Content.Intent.ActionInsert);
intent.SetType(Android.Provider.ContactsContract.Contacts.ContentType);
intent.PutExtra(Android.Provider.ContactsContract.Intents.ExtraForceCreate, 
true);
StartActivity(intent); 
```

# lua - Lua字节码，大小为nil

> ID：14278588
> 
> 赞同：1
> 
> 时间：2013-01-11T12:52:04.443
> 
> 标签：lua, byte, bytecode

我正在阅读[这个](http://underpop.free.fr/l/lua/docs/a-no-frills-introduction-to-lua-5.1-vm-instructions.pdf)并开发一个虚拟机，我坚持阅读常量，因为如果常量为 nil，我不知道要读取多少字节。nil*是*多少字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:19:36.393

读取类型后没有要读取的字节，因为在这种情况下类型说明了一切。请参阅[http://www.lua.org/source/5.1/lundump.c.html#LoadConstants](http://www.lua.org/source/5.1/lundump.c.html#LoadConstants)。

# c# - 空指针测试性能

> ID：14278595
> 
> 赞同：8
> 
> 时间：2013-01-11T12:52:18.023
> 
> 标签：c#, performance, c#-4.0, null-pointer

与测试小于零的整数甚至 bool 为假相比，测试C# 中的引用类型变量是否为空指针*（如`if (x == null)`...）的性能如何？*

关于此类*空指针测试*是否还有其他问题，例如是否*产生了垃圾*？

我对游戏的每一帧都进行了数百次这样的测试，我想知道这些测试是否会导致问题或者可以更有效地实施？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T12:55:56.833

空值测试可能等同于简单的“等于 0”测试。它们*非常非常*便宜 - 除非您拥有数百万的帧速率，否则每帧只有数百个应该完全微不足道:)

您应该分析您的应用程序以找出*实际*花费的时间 - 这比猜测更有效率。理想情况下，您还应该尝试编写一些基准测试，这样您不仅可以衡量当前的性能，还可以注意到它是否由于任何特定的变化而变得明显更糟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T13:01:47.907

测试 null 的值不是需要类型检查或类似的复杂操作，并且不涉及内存分配。

反汇编语句`if (x == null)`给出：

```
00000030  cmp         qword ptr [rsp+20h],0
00000036  jne         000000000000004A 
```

即测试被实现为指针值的简单整数比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T12:56:38.740

但是，像您这样进行密集检查*可能会*导致性能下降，这只能通过您自己的标准针对您的特定应用程序来衡量。

根据测试的重点，可能还有其他方法可以让您更聪明地了解检查的内容和时间。但是，如果不了解更多有关您的应用程序的信息，就很难想出一个答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T13:04:56.690

可能是主观的 - 但空检查等同于等于零检查，并且同样快速。所以我认为你不应该担心这个。

同样 - 除非你有性能问题，否则为什么还要玩它。

同样，如果您确实有性能问题，那么您很可能能够从复杂的代码分支中获得性能，而不是消除一些空检查。

也就是说，对于条件代码，潜在的性能改进（但它确实需要进行基准测试）可能是使用代表作为一个或多个条件更改的结果设置的不同逻辑分支 - 但我会如果这样的解决方案在一般情况下实际上提高了性能，会感到惊讶——尤其是对于您的“为空”场景。所以，我的意思是这样的：

```
if([condition])
{
  Foo();
}
else
{
  Bar();
} 
```

如果，说，`[condition]`涉及一个局部变量`_obj`（在你的情况下`_obj == null`） - 你可以用这样的东西替换（但要非常小心线程问题）：

```
private Action _logic;
private object _obj;
public Object Obj {
  get { return Obj; }
  set {
    _obj=value;
    if([condition])
      _logic = () => Foo();
    else
      _logic = () => Bar();
  }
} 
```

现在，在您之前检查`[condition]`过进行分支的任何代码中，您现在只需执行以下操作：

```
_logic(); 
```

这种事情在`[condition]`复杂的情况下获得了最大的改进，而且至关重要的是，已***通过分析证明占用了大量的处理器时间***。使用委托也会在条件分支上产生轻微的开销，但如果该开销小于执行的`[condition]`那么它可能会产生影响，特别是如果这些检查被非常频繁地执行。

这也有其他变体，最常见的是从一个值派生的函数查找表，而不是基于相等性检查选择代码分支（这是可以实现大型 switch/case 语句的方式 - 委托添加到`Dictionary`由枚举键入的/value 被检查 - 这避免了对值的多次检查）。

但是，最终，如果没有尽职的分析（当然是之前和之后），执行这样的优化基本上是没有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T12:55:51.880

没有问题（性能或其他）`if (x == null)`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T12:58:25.207

这绝对没有问题-您提到的所有测试通常都需要一个时钟周期。如果条件分支对性能有影响，则通常是由不可预测的或至少难以预测的分支行为破坏分支预测器并要求中止推测执行的分支引起的。

# ios - 在 iOS 的 UIImageview/位图中检测特定的 RGB 值

> ID：14278597
> 
> 赞同：0
> 
> 时间：2013-01-11T12:52:21.033
> 
> 标签：ios, image, uiimageview, rgb, pixel

我目前正在尝试找到一种从 iOS 中的 UIImageview 中找到一些 rgba 值的方法。例如，我想`0-0-0`在白色背景上找到所有黑色像素`1-1-1`并输出它们的坐标。

我当前的代码（改编自另一个stackoverflow帖子）：

```
 UIImage *myPicture = [UIImage imageNamed:@"somePicture.png"];

CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(myPicture.CGImage));

myWidth = CGImageGetWidth(myPicture.CGImage);
myHeight = CGImageGetHeight(myPicture.CGImage);

const UInt8 *pixels = CFDataGetBytePtr(pixelData);
UInt8 blackThreshold = 10; 
int bytesPerPixel_ = 4;
for( x = 0; x < myWidth; x++)
    for( y = 0; y < myHeight; y++) 

    {
        {
        int pixelStartIndex = (x + (y * myWidth)) * bytesPerPixel_;
        UInt8 redVal = pixels[pixelStartIndex + 1];
        UInt8 greenVal = pixels[pixelStartIndex + 2];
        UInt8 blueVal = pixels[pixelStartIndex + 3];
        if(redVal < blackThreshold && blueVal < blackThreshold && greenVal < blackThreshold) {
            NSLog(@"x coordinate = %@", x);
            NSLog(@"y coordinate = %@", y);

        }
    }
} 
```

}

有人可以查看代码并就可能的解决方案提供一些反馈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:34:31.177

经过一点调试，我解决了这个问题。

这是我的较暗像素坐标的代码：

```
 CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
    int myWidth = CGImageGetWidth(image.CGImage);
    int myHeight = CGImageGetHeight(image.CGImage);
    const UInt8 *pixels = CFDataGetBytePtr(pixelData);
    UInt8 blackThreshold = 10 ;
    //UInt8 alphaThreshold = 100;
    int bytesPerPixel_ = 4;
    for(int x = 0; x < myWidth; x++)
    {
        for(int y = 0; y < myHeight; y++)
        {
            int pixelStartIndex = (x + (y * myWidth)) * bytesPerPixel_;
            UInt8 alphaVal = pixels[pixelStartIndex];
            UInt8 redVal = pixels[pixelStartIndex + 1];
            UInt8 greenVal = pixels[pixelStartIndex + 2];
            UInt8 blueVal = pixels[pixelStartIndex + 3];

            if(redVal < blackThreshold || blueVal < blackThreshold || greenVal < blackThreshold || alphaVal < blackThreshold)
            {
                NSLog(@"x %d, y = %d", x, y);
            }
        }
    } 
```

谢谢你们的帮助。

# events - 从另一个会话范围的托管 bean 访问会话范围的托管 bean

> ID：14278598
> 
> 赞同：0
> 
> 时间：2013-01-11T12:52:27.303
> 
> 标签：events, jsf-2

`sessionScoped`我从另一个打开托管 bean 时遇到问题。我有一个页面，其中有一个包含对象列表的表格。在行单击时，我正在导航到另一个页面并显示其内容。我在`sessionMap`object 或 by中发送点击的行`Flash`。对象在其他页面中被发送和读取并显示数据。在另一页中，我收到了`sessionMap`or`Flash`在`@PostConstruct`方法中。

如果我回来打开另一个对象，第一个对象将打开，问题是它是一个`sessionScoped`bean，所以在第二个打开时它不会调用`@PostConstruct`. 那么强制`sessionScoped`读取新值并打开另一个会话的解决方案是什么？或者我怎样才能通过听众而不是阅读对象`@PostConstruct`？

`page1.java`

```
@ManagedBean
@SessionScoped
class pageBean{

    MyObject myObj;
    public String save(){FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put(myObj,"obj");
    }
} 
```

* * *

```
@ManagedBean
@SessionScoped
class pageBean{
@PostConstruct
public void init()
MyObject = (MyObject)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("obj");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:35:36.657

您的托管 bean 应该是`@ViewScoped`. 否则，您需要在 (action)listener 方法中获取它，例如`<f:event>`：

```
<f:event type="preRenderView" listener="#{bean.init}" /> 
```

`init()`其中您在方法中获取会话对象。

```
public void init() {
    obj = (Obj) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("obj");
} 
```

或者，如果您的唯一目的是在 EL 中访问它，则可能会懒惰地加载到 getter 中：

```
public Obj getObj() {
    if (obj == null) {
        obj = (Obj) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("obj");
    }

    return obj;
} 
```

但这没有任何意义，因为会话范围的对象可以直接在 EL 中使用，`#{obj}`而不需要像`#{bean.obj}`.

至少，整个设计毫无意义。这就是为什么我建议他们实际上应该是`@ViewScoped`。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# jsf - 在 JSF 中显示两个查询结果

> ID：14278599
> 
> 赞同：0
> 
> 时间：2013-01-11T12:52:32.050
> 
> 标签：jsf, jakarta-ee, jpa, ejb

我正在尝试向我找到的项目添加一些功能。有查询选择指定的结果。现在我正在尝试获取第二个查询的结果。这是我的代码：

汽车.java

```
@Entity
@NamedQueries({
@NamedQuery(name = "car.unsold", query = "Select c from Car c where c.sold = false"),
@NamedQuery(name="car.findByName", query=" SELECT C FROM Car c where c.make=?")
})
public class Car {  
private Long id;
private String make;
private String model;
//and all getters and setters   
 } 
```

CarManager.java

```
@Stateless
public class CarManager {

@PersistenceContext
EntityManager em1;

@SuppressWarnings("unchecked")
public List<Car> getAvailableCars() {
    return em1.createNamedQuery("car.unsold").getResultList();
}

@SuppressWarnings("unchecked")
public List<Car> getCarsByName(String make){
    return em1.createNamedQuery("car.findByName").setParameter(1,   make).getResultList();
}} 
```

CarBean.java

```
@SessionScoped
@Named("carBean")
public class CarFormBean implements Serializable {

private static final long serialVersionUID = 1L;

private Car car = new Car();
private ListDataModel<Car> cars = new ListDataModel<Car>();

private ListDataModel <Car> searchresult = new ListDataModel<Car>();

private String searchCar;
public String getSearchCar() {
    return searchCar;
}
public void setSearchCar(String searchCar) {
    this.searchCar = searchCar;
}
@Inject
private CarManager cm;  

public Car getCar() {
    return car;
}
public void setCar(Car car) {
    this.car = car;
}   

public ListDataModel<Car> getAvailableCars() {
    cars.setWrappedData(cm.getAvailableCars());
    return cars;
}

public ListDataModel<Car> getCarsByName(){
    searchresult.setWrappedData(cm.getCarsByName(searchCar));
    return searchresult;
}   
public String searchCar(){
    cm.getCarsByName(searchCar);
    return null;
    } 
```

我的问题是如何显示 carByName 查询的结果？上面的代码可以吗？第一次查询的结果由以下人员打印：

```
<rich:dataTable value="#{carBean.availableCars}" var="car" 
```

但它是如何完成的？我看不到名为 availableCars 的方法。

**更新** Search.xhtml [http://wklej.org/id/921560/](http://wklej.org/id/921560/) all.xhtml [http://wklej.org/id/921561/](http://wklej.org/id/921561/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:58:32.410

在这种情况下，表达式`#{carBean.availableCars}`不是指方法，而是指 bean 的属性`carBean`。所以它评估为 的`getAvailableCars()`方法`carBean`。在[表达式语言标签信息页面上搜索](https://stackoverflow.com/tags/el/info)以了解有关此内容的更多信息。

请注意，在 getter 上调用服务方法不是一个好习惯（请参阅[此问题](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)）。使用带有注释的初始化方法会更好`@PostConstruct`。

此外，您不需要单独的结果列表。只需创建一个操作方法，用搜索结果填充汽车列表 - 说`searchCars()`，然后让您的搜索按钮调用它：

```
<h:commandButton value="Search" action="#{carBean.searchCars}" /> 
```

所以，把它们放在一起，你的 bean 代码应该是这样的：

```
@SessionScoped
@Named("carBean")
public class CarFormBean implements Serializable {
    private static final long serialVersionUID = 1L;        
    private Car car = new Car();

    // a list for storing the available cars and the search results
    private ListDataModel<Car> cars = new ListDataModel<Car>();        
    private String searchCar;

    @Inject
    private CarManager cm;

    // initialization method
    @PostConstruct
    public void init() {
        cars.setWrappedData(cm.getAvailableCars());
    }

    // action method
    public void searchCars() {
        cars.setWrappedData(cm.getCarsByName(searchCar));
    }

    // getters and setters
    public ListDataModel<Car> getAvailableCars() {
        return cars;
    }
    public Car getCar() {
        return car;
    }
    public void setCar(Car car) {
        this.car = car;
    }
    public String getSearchCar() {
        return searchCar;
    }
    public void setSearchCar(String searchCar) {
        this.searchCar = searchCar;
    } 
```

# performance - Apache Solr LocalParams 性能

> ID：14278601
> 
> 赞同：0
> 
> 时间：2013-01-11T12:52:38.510
> 
> 标签：performance, solr

我刚刚在 Solr 中遇到[LocalParams](http://wiki.apache.org/solr/LocalParams)，我想知道使用 LocalParams 是否对默认的参数指定方式有任何性能影响。

举个例子来说明我的意思，请考虑以下 URL

默认

```
/select?q=dog&defType=dismax&qf=q_title_exact^20.0+q_title+q_suggest^0.5 
```

局部参数

```
/select?q={!type=dismax qf='q_title q_title_exact^20 q_suggest^0.5'}dog 
```

虽然大小上的差异微不足道，但我可以将参数类型限制为一种这一事实对我来说非常有益。

但是，由于它们被称为**本地**参数，我担心使用它们可能会对性能产生影响，例如没有正确缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:56:42.403

与默认方式相比，如果您使用 localparams，我认为这对您的缓存功能并不重要。您提供的示例将彼此功能相同。但是，LocalParams 在以下情况下提供了优势（并且可能会影响存储在缓存中的记录，具体取决于您是进行标准搜索还是使用一些 dismax/edismax 搜索）：-

假设您要搜索字段“A”匹配值“A1”且字段“B”匹配值“B1”的记录。此外，您希望基于 dismax 解析器匹配字段“A”，而应基于 solr 的标准解析器匹配字段“B”。

据我了解LocalParams，以下代码（未经测试）： -

```
/select?q=A:A1&fq=B:B1&defType=dismax&qf=A^20.0+B^0.5 
```

不会达到目的，因为它将对字段 A 和字段 B 执行 dismax 搜索。但是，以下代码（未经测试）：-

```
/select?q={!type=dismax qf='A^20.0 B^0.5}A:A1&fq=B:B1 
```

将跨字段 A 执行 dismax 搜索，而将对字段 B 执行标准搜索。

因此，您可以说 LocalParams 可以帮助您执行“不同类型的搜索”。根据使用的参数，它们还有许多其他优点。

# php - PHP range() 从 A 到 ZZ？

> ID：14278603
> 
> 赞同：32
> 
> 时间：2013-01-11T12:52:53.903
> 
> 标签：php, range

是否可以使用 PHP 获得从 A 到 ZZ* 的范围？

abc ... aa ... zx zy zz

对我来说，这不起作用：

```
range('A', 'ZZ'); 
```

它适用于 PHPExcel，当它将**BE**作为最高字段时，我会遍历所有列。在这种情况下，我只得到 A，B：

```
range ('A', 'BE') 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-11T13:03:17.087

利用 PHP 增加字符“perl 风格”的能力

```
$letters = array();
$letter = 'A';
while ($letter !== 'AAA') {
    $letters[] = $letter++;
} 
```

但是您也可以使用简单的整数值，并利用 PHPExcel 的内置 PHPExcel_Cell::stringFromColumnIndex() 方法

**编辑**

从 PHP 5.5 开始，您还可以使用生成器来避免在内存中实际构建数组

```
function excelColumnRange($lower, $upper) {
    ++$upper;
    for ($i = $lower; $i !== $upper; ++$i) {
        yield $i;
    }
}

foreach (excelColumnRange('A', 'ZZ') as $value) {
    echo $value, PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-11T12:59:36.750

试试这个-（测试工作正常）

```
function createColumnsArray($end_column, $first_letters = '')
{
  $columns = array();
  $length = strlen($end_column);
  $letters = range('A', 'Z');

  // Iterate over 26 letters.
  foreach ($letters as $letter) {
      // Paste the $first_letters before the next.
      $column = $first_letters . $letter;

      // Add the column to the final array.
      $columns[] = $column;

      // If it was the end column that was added, return the columns.
      if ($column == $end_column)
          return $columns;
  }

  // Add the column children.
  foreach ($columns as $column) {
      // Don't itterate if the $end_column was already set in a previous itteration.
      // Stop iterating if you've reached the maximum character length.
      if (!in_array($end_column, $columns) && strlen($column) < $length) {
          $new_columns = createColumnsArray($end_column, $column);
          // Merge the new columns which were created with the final columns array.
          $columns = array_merge($columns, $new_columns);
      }
  }

  return $columns;
}
echo "<pre>";
print_r( createColumnsArray('BZ')); 
```

[从http://php.net/range](http://php.net/range)复制

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-31T09:05:18.243

```
for ($i = 'A'; $i !== 'AC'; $i++){
    echo $i.', '; //A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, AA, AB,
} 
```

它正在工作

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-11T13:01:04.967

您可以结合两个 foreach 循环来生成类似的东西。

```
// Single letters
foreach(range('A', 'Z') as $letter) {
    echo $letter;
}

// AA-ZZ combinations
foreach(range('A', 'Z') as $letter1) {
    foreach(range('A', 'Z') as $letter2) {
        echo $letter1 . $letter2;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T12:57:32.350

内置是不可能的[`range`](http://php.net/manual/en/function.range.php)：

> 在 4.1.0 中添加了对字符序列和递减数组的支持。字符序列值的长度限制为 1。如果输入的长度大于 1，则仅使用第一个字符。

但是，本质上，您在这里所做的是从使用 26 位数字的数字系统中的 1 向上`a`计数`z`。`0`因此，您可以通过计数、转换为基数 26（使用数字to`9`和`a`to `p`）然后将数字“转换”到范围`a`to来快速组合解决方案`z`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T13:41:02.437

更好的选择（工作得很好）

```
for ($i = 'a'; $i < 'zz'; $i++) 
    echo $i."<br>"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T13:00:11.287

您当然可以编写自己的函数来执行此操作，因为 php 中的 range() 函数似乎不支持这一点。这应该很容易，因为您可以将 range 函数嵌套在另一个循环中。像这样的东西：

```
foreach(range('a', 'z') as $outer) {
  foreach(range('a', 'z') as $inner) {
    print($outer.$inner);
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-23T11:33:10.257

Please check this simple solution incrementing char.

[How to list from A to Z in PHP, and then on to AA, AB, AC, etc](https://stackoverflow.com/questions/25958518/how-to-list-from-a-to-z-in-php-and-then-on-to-aa-ab-ac-etc/42414721#42414721)

Use this recursive function to get the exact range from A to ZZ

```
function myRange($end_column = '', $first_letters = '') {
    $columns = array();
    $length = strlen($end_column);
    $letters = range('A', 'Z');

    // Iterate over 26 letters.
    foreach ($letters as $letter) {
      // Paste the $first_letters before the next.
      $column = $first_letters . $letter; 
      // Add the column to the final array.
      $columns[] = $column;
      // If it was the end column that was added, return the columns.
      if ($column == $end_column)
          return $columns;
    }

    // Add the column children.
    foreach ($columns as $column) {
      // Don't itterate if the $end_column was already set in a previous itteration.
      // Stop iterating if you've reached the maximum character length.
      if (!in_array($end_column, $columns) && strlen($column) < $length) {
          $new_columns = myRange($end_column, $column);
          // Merge the new columns which were created with the final columns array.
          $columns = array_merge($columns, $new_columns);
      }
    }

    return $columns;
} 
```

call function like.

```
print_r(myRange('ZZ')); 
```

will give you result

A B C . . . ZX ZY ZZ

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-19T17:44:47.850

这对我很有效。

```
function create_columns_range($start = 'A', $end = 'ZZ'){
    $return_range = [];
    for ($i = $start; $i !== $end; $i++){
        $return_range[] = $i;
    }
    return $return_range;
} 
```

要使用它，只需调用：

```
$range = create_columns_range('A', 'ZZ');
print_r(range); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-28T23:35:29.017

这是一个简化的解决方案，您可以在其中定义要生成的行数和列数。这样，您将分配更少的内存。

```
// Get cell names for excel
function generate_excel_cell_names($row_cnt, $col_cnt){
    $excel_cells = [];

    // Note: Row and col indexes are starting from 1
    for ($excel_row=1; $excel_row <= $row_cnt; $excel_row++) { 
        $excel_col = 'A';
        for ($col_index = 1; $col_index <= $col_cnt; $col_index++)
        {
            $excel_cells[$excel_row][$col_index] = $excel_col.$excel_row;
            $excel_col++;
        }
    }
    return $excel_cells;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-01-11T12:58:16.673

这是我可以帮助你的（生成从 A 到 Z 的数组）。

```
$a = range(65, 90);
array_walk($a, 'chr'); 
```

查看[chr](http://php.net/manual/en/function.chr.php)和[array_walk](http://php.net/manual/en/function.array-walk.php)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-05-16T01:05:55.767

我使用 alpha2num() 将 alpha 转换为数字，然后在循环中使用它。有了这个，我可以使用任何值作为开始和结束来获取范围。

```
// to convert alpha to number
function alpha2num($a) {
    $l = strlen($a);
    $n = 0;
    for($i = 0; $i < $l; $i++)
        $n = $n*26 + ord($a[$i]) - 0x40;

    return $n-1;
}

// to convert number back to alpha
function num2alpha($n)
{
    for($r = ""; $n >= 0; $n = intval($n / 26) - 1)
    $r = chr($n%26 + 0x41) . $r;
    return $r;
}

function get_range($start_column, $end_column)
{
    $s = alpha2num($start_column); // get start number
    $e = alpha2num($end_column); // get end num

    $columns = array();

    // loop from start to end and change back the number to alpha to be stored in array
    for($i=$s; $i<=$e; $i++)
        $columns[] = num2alpha($i);

    return $columns;
}

// usage
$columns = get_range('Z', 'BA')); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-04-30T22:03:16.713

```
$abc = [];
foreach(range('A', 'Z') as $first) {
    array_push($abc, $first);
}

foreach(range('A', 'Z') as $second) {
  foreach(range('A', 'Z') as $third) {      
      array_push($abc, $second.$third);
  }
}

$headers = ['CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO', 'CAMPO'];

foreach($headers as $key => $value) {
  echo $abc[$key] . ' - ' . $value . PHP_EOL;
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-11-13T03:18:03.653

```
$atoz = range('A', 'Z');
$target = range('A', 'Z');

$result = $atoz;
foreach ($target as $val) {
    $step = array_map(function ($elem) use ($val) {
            return $val. $elem;
        }, $atoz);

    $result = array_merge($result, $step);
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-07-07T11:54:47.617

```
$alfabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ","BA","BB","BC","BD","BE","BF","BG","BH","BI","BJ","BK","BL","BM","BN","BO","BP","BQ","BR","BS","BT","BU","BV","BW","BX","BY","BZ","CA","CB","CC","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","DA","DB","DD","DD","DE","DF","DG","DH","DI","DJ","DK","DL","DM","DN","DO","DP","DQ","DR","DS","DT","DU","DV","DW","DX","DY","DZ"];

 $active_row_value_fulladdress = "AA - AM";
 //$active_row_value_fulladdress = "A - F";
 $taken_full = strtoupper($active_row_value_fulladdress);

$taken_full_ar = explode("-", $taken_full);
$start = trim($taken_full_ar[0]);
$end   = trim($taken_full_ar[1]);

$alfabet_key = array_flip($alfabet);
$start1 = $alfabet_key[$start];
$end1   = $alfabet_key[$end];

for($i=$start1;$i<=$end1;$i++)
{
    $taken_full_array[]=$alfabet[$i];
}

foreach ($taken_full_array as $key => $value) 
{
    $full_add[]=array_search($value,$alfabet);
}

echo "<pre>";
print_r($taken_full_array);
print_r($full_add); 
```

# html - 滚动表格单元格 - 但仅在必要时

> ID：14278605
> 
> 赞同：0
> 
> 时间：2013-01-11T12:53:00.257
> 
> 标签：html, css-tables

我想显示一个只包含 2 个单元格的表格 - 在左侧，有一个（固定大小）图像，在右侧，一个动态填充的项目列表，这意味着它通常比图像的高度 - 所以它应该具有滚动功能。

到目前为止效果很好 - 除了即使“列表”为空也有滚动条这一事实。有没有办法只在必要时才显示滚动条？我知道我想要很多。8-) ..

这是我当前的代码：

```
<div style="width:100%; height:400px;">
    <div id="image" style="float:left; width:540px; height:400px"></div>
    <div id="items" style="float:left; height:400px; overflow:scroll; width:20%;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:15:03.097

您可以仅在需要时使用 使容器可滚动`overflow: auto;`。

这是一个例子：http: [//jsfiddle.net/ZHEHT/](http://jsfiddle.net/ZHEHT/)

# jquery - 自动全屏播放 youtube 视频

> ID：14278606
> 
> 赞同：1
> 
> 时间：2013-01-11T12:53:02.377
> 
> 标签：jquery, iframe, youtube, youtube-api, youtube-javascript-api

我正在使用播放器在网页上播放 youtube 视频。视频从频道加载并自动播放。这是完美的工作。但是我希望该视频应该以全屏模式自动播放。

这是播放视频的代码：

```
<iframe frameborder="0" allowfullscreen="" id="player" title="YouTube video player" height="400" width="580" src="http://www.youtube.com/embed/?wmode=transparent&amp;iv_load_policy =0&amp;allowfullscreen=true&amp;enablejsapi=1"></iframe> 
```

如您所见，我正在使用具有标准宽度和高度的 iframe。现在一种解决方案是增加 iframe 的大小，这样就可以了。但我不想这样做，因为页面有其他内容，我不想增加它与其他内容冲突的大小。我希望我的视频在加载时自动进入全屏状态，当按下退出键时，它将返回小尺寸（这是默认的全屏选项）。

谢谢艾哈迈尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:31:24.940

这是不可能的。除非您拥有原始 .fla 文件，否则您无法与 Flash 对象进行交互。闪存的限制

# jsp - checkInterval 配置够用还是需要删除_jsp.class

> ID：14278609
> 
> 赞同：0
> 
> 时间：2013-01-11T12:53:06.513
> 
> 标签：jsp, tomcat

我正在使用 Apache Tomcat 5.5.25。

我希望将要更新的 JSP 文件生效（在访问该 JSP 时向用户显示更新的内容）而无需重新启动服务器。

我不想删除 _/org/apache/jsp 下的文件。但我希望我更新的 JSP 反映其更新的内容。

`web.xml`我用`checkInterval`, `modificationTestInterval`&配置就足够了`development`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:40:34.793

在 Tomcat 5.5 中，您可以设置`reloading`为**true**以仅检查 JSP 页面是否已被修改。

但是，是的，如果你设置`development`为**true**它也很好，只是更贪婪。

**也可以看看：**

*   [Tomcat 5.5 中的 Jasper 配置](http://tomcat.apache.org/tomcat-5.5-doc/jasper-howto.html#Configuration)

# xml - Web 服务响应中的 XML 格式无效

> ID：14278614
> 
> 赞同：2
> 
> 时间：2013-01-11T12:53:28.227
> 
> 标签：xml, web-services, playframework

我正在使用 Play 1.2.4，我需要调用第三方网络服务。当我得到响应时，我无法通过 XPath 正确解析它，因为它包含无效的 XML 格式。

响应有`&gt;`and`&lt;`而不是`<`and `>`。我试图解码响应没有运气。我还检查了看起来不错的响应内容 "application/soap+xml" 。

那么我该如何替换这个字符。除了使用正则表达式的简单字符串替换函数之外，是否有一种优雅的替换/转换方法。

编辑：这里有一个更好的想法是我如何调用网络服务。

```
HttpResponse response = WS.url(WS_URL)
                 .setHeader("Content-Type","application/soap+xml") 
                 .body(wsBody)
                 .post(); 
```

这是我要解析的内容：

```
org.w3.dom.Document xmlDoc = response.getXML();
String textOfSelectedTag = XPath.selectText("tag", xmlDoc); 
```

并且 XPath 找不到标签，因为它的格式`<tag>`不像`&lt;tag&gt;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:34:57.593

好的，看起来这只是一个返回*字符串*的 SOAP 方法——而字符串恰好是 XML。

因此，您应该将`<GetFooResult>`（或其他）标记的内容*作为字符串*获取，然后将其解析为 XML 文档。当您将其作为字符串获取时，它将解码`&lt;`to`<`等，因此它将是一个有效的文档。*然后*，您将拥有一个包含根元素的文档，`TAG1`然后您可以对其进行查询等。

我建议您使用 Web 服务库进行调用 - 它应该能够抽象出所有内容，以便您可以调用`getFoo()`或获取结果字符串，然后按照您的预期解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:27:03.073

我猜你的 XML 有很好的根元素！否则`xmlDoc = response.getXML();`应该有错误了！我认为XML中的元素很少或很多是这样的！如果我没记错的话，就是 Web 服务上的 XML 构建器负责生成这样的文件！这不是因为你阅读它的方式！

在这种情况下，我们无能为力！我遇到过这样的场景，其中其他成员遇到了编码不正确的 XML。对于这种情况，我所建议的只是修改生成此类 XML 的代码（如果您有权访问），否则......我们将只剩下正则表达式或字符串操作！虽然不是首选但唯一可用的方法。

我看到的这种 XML 代码的一个原因是，因为使用了字符串连接！所以我的第一个建议是修改生成 XML 的源代码。

用于替换`&lt;`to`<`和`&gt;`to的正则表达式模式`>`：

```
string result = Regex.Replace(Regex.Replace(input, @"(\&lt;)", @"<"), @"(\&gt;)", @">"); 
```

# iphone - 在 twitter 中为 ios 5 和 ios 6 上传图片而不打开 Tweetsheet

> ID：14278616
> 
> 赞同：1
> 
> 时间：2013-01-11T12:53:33.540
> 
> 标签：iphone, ios, ios5, twitter, ios6

我想在 ios5 和 ios6 中不打开 Tweetsheet 的情况下上传图片。可能吗？我曾尝试使用 TweetSheet 上传图片，我可以上传照片，但不打开 tweetsheet 就无法上传照片。

曾经使用过：- TWTweetComposeViewController

请告知我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T04:41:35.920

```
if (appDelegate.PHONE_OS >= 5)
{        
    NSString *strTwitterMessage;
    strTwitterMessage = [NSString stringWithFormat:@"test twitter post : Photo link URL "];        

    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            NSLog(@"Count : %d",[accountsArray count]);                
            ACAccount *twitterAccount;                
            int flagTwitter;
            flagTwitter = 0;
            for(int i = 0;i<[accountsArray count];i++)
            {
                if([[[accountsArray objectAtIndex:i]username] isEqualToString:appDelegate.strTwitterEmailSelected])
                {                        
                    flagTwitter = 1;                        
                    twitterAccount = [accountsArray objectAtIndex:i];                        
                }

            }                
            if(flagTwitter == 1)
            {
                appDelegate.strTwitterEmail = appDelegate.strTwitterEmailSelected;

            }
            else
            {
                appDelegate.strTwitterEmail = [[accountsArray objectAtIndex:0]username];
                twitterAccount = [accountsArray objectAtIndex:0];
            }

            //ACAccount *twitterAccount = [accountsArray objectAtIndex:0];
            //appDelegate.strTwitterEmail = [[accountsArray objectAtIndex:0]username];

             UIImage *image =[UIImage imageNamed:@"image.png"];

             NSURL *url =
             [NSURL URLWithString:
             @"https://upload.twitter.com/1/statuses/update_with_media.json"];

             //  Create a POST request for the target endpoint
             TWRequest *request =
             [[TWRequest alloc] initWithURL:url
             parameters:nil
             requestMethod:TWRequestMethodPOST];

             [request setAccount:twitterAccount];

             NSData *imageData = UIImagePNGRepresentation(image);

             [request addMultiPartData:imageData
             withName:@"media[]"
             type:@"multipart/form-data"];

             NSString *status = strTwitterMessage;

             [request addMultiPartData:[status dataUsingEncoding:NSUTF8StringEncoding]
             withName:@"status"
             type:@"multipart/form-data"];

             [request performRequestWithHandler:
             ^(NSData *responseData1, NSHTTPURLResponse *urlResponse, NSError *error) {
             NSDictionary *dict =
             (NSDictionary *)[NSJSONSerialization
             JSONObjectWithData:responseData1 options:0 error:nil];

             // Log the result
             NSLog(@"%@", dict);

             NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];

             NSLog(@"status : %@", output);

             dispatch_async(dispatch_get_main_queue(), ^{
             // perform an action that updates the UI...

             UIAlertView *customAlertView = [[UIAlertView alloc]initWithTitle:@"Social Media"
             message:@"successful share"
             delegate:nil
             cancelButtonTitle:nil
             otherButtonTitles:@"OK",nil];
             [customAlertView show];
             [customAlertView release];

             });
             }];

        }

        else
        {
            // Alert Please login through seeting

            dispatch_async(dispatch_get_main_queue(), ^{
                // perform an action that updates the UI...

                UIAlertView *customAlertView = [[UIAlertView alloc]initWithTitle:@"Social Media"
                                                                         message:@"Please enable twitter through iPhone Settings"
                                                                        delegate:nil
                                                               cancelButtonTitle:nil
                                                               otherButtonTitles:@"OK",nil];
                [customAlertView show];
                [customAlertView release];

            });

        }

    }];
} 
```

# sql-server - 从 Entity Framework 执行语句时 SQL 转换错误，但在执行相应的 sql 时工作正常

> ID：14278617
> 
> 赞同：0
> 
> 时间：2013-01-11T12:53:44.133
> 
> 标签：sql-server, entity-framework

我有一段代码在其中添加对象并从对象上下文中删除另一个对象。在对象上下文中保存更改时，会引发以下 SQL 异常：

> 将 nvarchar 值“KV Oberaargau136”转换为数据类型 int 失败

当然 'KV Oberaargau136' 不能转换为 int 值，问题是我不知道该字符串是如何到达那里的。字符串唯一可以来自的地方是以下代码：

```
History h = new History()
{
    idTableRef = rpo.idOA,
    tableRef = "RelPersonOrganism",
    date = now,
    idResponsible = entities.getUserOA().id,
    data = "<delete><organism><name><![CDATA[%name%]]></name><id>%id%</id></organism></delete>"
        .Replace("%name%", organism.defaultName)
        .Replace("%id%", organism.idOA.ToString())
}; 
```

其中 History 是一个实体，data 是一个字符串（实际上是 SQL Server 上的 xml 数据类型）

因此，我尝试使用 SQL Profiler 查看哪些 SQL 语句会引发该异常，这是引发异常的跟踪部分：

```
RPC:Starting exec sp_executesql N'insert [dbo].[History]([tableRef], [idTableRef], [date], [idResp...
SQL事务
异常错误：245，严重性：16，状态：1
将 nvarchar 值“KV Oberaarau136”转换为数据类型 int 时，用户错误消息转换失败。
SQL事务
SP：已完成插入 [dbo].[History]([tableRef], [idTableRef], [date], [idResponsible], [data]) v...
RPC:Completed exec sp_executesql N'insert [dbo].[History]([tableRef], [idTableRef], [date], [idRespon...

```

其中完整的 SQL 语句（在上面的跟踪中显示了 3 次）是：

```
EXEC sp_executesql
  N'insert [dbo].[History]([tableRef], [idTableRef], [date], [idResponsible], [data])
values (@0, @1, @2, @3, @4)
select [id]
from [dbo].[History]
where @@ROWCOUNT > 0 and [id] = scope_identity()',
  N'@0 nvarchar(255),@1 int,@2    datetime2(7),@3 int,@4 nvarchar(max) ',
  @0=N'RelPersonOrganism',
  @1=1255,
  @2='2013-01-11     12:35:18.4984109',
  @3=1,
  @4=N'<delete><organism><name><![CDATA[KV Oberaargau]]></name><id>136</id></organism></delete>' 
```

因此，通过查看跟踪，我得出结论，该 SQL 语句是有罪的，尽管在我看来它并没有错。所以我尝试在 SQL Server Management Studio 中执行它，它工作得非常好，没有错误......

那么是什么触发了这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:24:01.817

我也看不出您发布的查询会直接导致该错误消息的任何方式。

因此，请检查您是否有任何触发器或计算列来解析 XML，这可能是原因。

# c# - 如何在事件上切换本地资源文件

> ID：14278629
> 
> 赞同：1
> 
> 时间：2013-01-11T12:54:31.390
> 
> 标签：c#, asp.net, markup

在我的 asp.net 解决方案中，我通过 VS 中的 Tools -> Generate local resource 菜单生成了一个本地资源文件，并在其中更改了一些控件的文本。我有一个下拉列表，其中包含我希望能够切换到的语言（例如 Default.en.aspx.resx）。我该如何编码？如何引用与当前活动的资源文件不同的资源文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:07:41.683

如果您想为每个用户使用不同的语言，包括日期格式等，您可以设置当前线程的 CurrentUICulture 以匹配请求的语言。

例如，在有人从下拉列表中选择一种语言后，您可以将其存储在会话中，然后在页面上覆盖 InitializeCulture：

```
protected override void InitializeCulture()
{
    string language = Session["language"].ToString(); // e.g. en-GB
    System.Threading.Thread.CurrentThread.CurrentUICulture =
        System.Globalization.CultureInfo.GetCultureInfo(language);
} 
```

请参阅[Page.InitializeCulture](http://msdn.microsoft.com/en-us/library/system.web.ui.page.initializeculture.aspx)和 ResourceManager 以及 ResourceManager 中的文化特定[资源](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:30:39.067

要仅更改特定值，您将需要使用[HttpContext.GetLocalResourceObject](http://msdn.microsoft.com/en-us/library/ms149953.aspx)方法来获取所需的文本。像这样的东西：

```
string cultureCode = MyDropDown.SelectedValue;

MyLabel.Text = HttpContext.GetLocalResourceObject(
    this.AppRelativeVirtualPath, // virtual path to current page
    "MyLabelText", // key in resx
    System.Globalization.CultureInfo.GetCultureInfo(cultureCode) // language
).ToString(); 
```

# javascript - 如何使用 jQuery 将文本添加到特定的 div 元素？

> ID：14278630
> 
> 赞同：12
> 
> 时间：2013-01-11T12:54:33.860
> 
> 标签：javascript, jquery, html

我在使用 jquery 时遇到问题。我的 HTML 是

```
<div id="first">
   <span class="test"></span>
</div>
<div id="second">
   <span class="test"></span>
<div> 
```

现在我正在尝试使用 Jquery 在跨度中添加文本。

```
$j('span.test').text('Welcome'); 
```

之后就变成了，

```
<div id="first">
    <span class="test">Welcome</span>
</div>
<div id="second">
    <span class="test">Welcome</span>
<div> 
```

但是，我正在努力实现的是，

```
<div id="first">
    <span class="test">Welcome</span>
</div>
<div id="second">
    <span class="test"></span>
<div> 
```

我怎么能在jquery中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T13:04:51.480

## 几种可能的选择

其他人已经提供了他们的答案，但让我给你一些更多的选择。

```
$("span.test:first").text("Welcome");
$("#first span.test").text("Welcome");
$("span.test").first().text("Welcome");
$("span.test").eq(0).text("Welcome");
$("span.test", "#first").text("Welcome"); 
```

第二个也是最后一个可能是最快的，因为它们按 ID 定位特定容器。
^(（内部 jQuery 优化可能会证明我对任何未来版本的错误）)

## 性能比较

这是一个[JSPerf 测试](http://jsperf.com/first-element-matching)，其性能比较了较高的可能性。正如预期的那样，第二种和最后一种方法是最快的，因为元素选择被大大简化了。我已经尝试在 Chrome 上运行它们，如果您想查看差异，您可以在其他浏览器中运行它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T12:57:56.707

```
$('#first span.test').text('Welcome'); 
```

jQuery 选择器是用一点魔法扩展的 CSS 选择器。你可以在这里找到你需要知道的一切：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:55:21.937

您需要使用`:first`选择器表示您只想将文本添加到选择器找到的第一个元素。试试这个：

```
$j('span.test:first').text('Welcome'); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/xDPKP/)

或者，您可以使用`id`父 div 的 来使选择器唯一：

```
$j('#first .test').text('Welcome'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:09:31.607

在这个例子中，你可以做什么 RoRyMcCrossan 对于一般选择，我建议你看看这个：[http ://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

或者你可以使用这个

[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T13:14:35.467

由于您有一个 id，通常在一页上是唯一的，因此最好使用以下内容：

```
$("#first span.test").text("Welcome"); 
```

# javascript - CRM 2011 JavaScript - 从一个字段修改日期并设置为另一个

> ID：14278633
> 
> 赞同：1
> 
> 时间：2013-01-11T12:54:45.483
> 
> 标签：javascript, dynamics-crm-2011

我正在尝试从一个字段中提取日期，修改该日期并将该值设置为另一个，这是我的代码：

```
var startDate = Xrm.Page.getAttribute('new_startdate').getValue();
var expiryDate = startDate.getDate()+3; //Add 3 days

var expiryField = Xrm.Page.getAttribute('new_expirydate').setValue(expiryDate); 
```

有人可以解释我做错了什么吗？我已经有一段时间了，我担心我错过了一些明显的东西。

提前致谢。

编辑;

当脚本触发时，1/1/1970 设置在到期字段中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:13:26.303

这应该工作

```
var startDate = Xrm.Page.getAttribute('new_startdate').getValue();
var expiryDate = new Date();
expiryDate.setDate(startDate.getDate()+3); //Add 3 days

var expiryField = Xrm.Page.getAttribute('new_expirydate').setValue(expiryDate); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:27:40.817

您的问题是该函数[`getDate()`](http://www.w3schools.com/jsref/jsref_getdate.asp)返回月份中的某一天。所以结果

```
var startDate = new Date("January 11, 2013");
var expiryDate = startDate.getDate()+3; 
```

将是*数字*14。

我假设这会使用 Date(milliseconds) 重载转换为 Date，它表示

> [整数值，表示自 1970 年 1 月 1 日 00:00:00 UTC（Unix 纪元）以来的毫秒数。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Parameters)

因此，您会看到 this 值。

因此，lazarus 发布的解决方案显示了正确的方法。

# java - 带MS访问的jdbc odbc的连接字符串

> ID：14278634
> 
> 赞同：2
> 
> 时间：2013-01-11T12:54:47.880
> 
> 标签：java, jdbc, odbc

我正在尝试通过 ms 访问建立 jdbc odbc 连接，但无法传递由特殊字符组成的密码

```
I am using the following code

 try
 {
  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
  Connection con=DriverManager.getConnection("Jdbc:Odbc:Driver={Microsoft Access   
  Driver(*.mdb); DBQ=d:/abc/xyz.mdb};","","password here");
   Statement st=con.createStatement();
 }
 catch(Exception ex)
 {

 } 
```

但这在这里无法识别密码，即使密码非常复杂（特殊字符的组合）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T04:13:49.697

以下 JDBC-ODBC 连接字符串工作正常。

```
 try
   {

    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String connectionQuery="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=path upto the database;uid=; pwd=password here;";  

    con = DriverManager.getConnection(connectionQuery,"",""); 
    st=con.createStatement();
    stmt=con.createStatement();

   }
    catch(Exception ex)
    {

     System.out.println("exception is"+ex);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:12:26.580

您使用的是 32 位还是 64 位 Windows？每个 URL 字符串都不同：

[http://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/](http://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/)

使您的 URL 看起来像本文中的那些，否则您会遇到问题。

空的 catch 块总是一个坏主意。您将不知道是否引发了异常。打印堆栈跟踪需要多少工作？

# apache - 使用 Apache Jmeter 发送带有 http 标头的 xml 内容

> ID：14278636
> 
> 赞同：0
> 
> 时间：2013-01-11T12:55:00.483
> 
> 标签：apache, xml-parsing, jmeter

我正在尝试通过使用 Apache Jmeter2.8 粘贴 HTTP 请求的 Post Body 部分以及 HTTP 标头管理器中的两个标头来发送一个 xml 文件内容。响应应该是另一个 xml 文件，但响应数据显示 xml 解析错误。我在采样器结果部分得到关注

```
Thread Name: SOS_Secured_SOS_Local 1-1
Sample Start: 2013-01-11 17:22:25 GMT+05:30
Load time: 746
Latency: 746
Size in bytes: 21586
Headers size in bytes: 256
Body size in bytes: 21330
Sample Count: 1
Error Count: 0
Response code: 200
Response message: OK

Response headers:
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: Content-Type
Content-Type: text/xml
Content-Length: 21330
Date: Fri, 11 Jan 2013 11:52:26 GMT

HTTPSampleResult fields:
ContentType: text/xml
DataEncoding: null 
```

但是响应数据部分显示以下内容 -

```
<?xml version="1.0" encoding="UTF-8"?>
<ows:ExceptionReport version="1.0.0" xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsAll.xsd" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ows:Exception exceptionCode="MissingParameterValue">
    <ows:ExceptionText>Premature end of file.</ows:ExceptionText>
  </ows:Exception>
</ows:ExceptionReport> 
```

有谁知道这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-12T19:54:32.910

我猜你在 Header Manager 中输入的参数应该是这样的：

> /path?param1=value1¶m2=value2

不幸的是，如果没有您的配置截图，很难确定它是答案。

# java - 会话到期时重定向到登录页面时出现空指针异常？

> ID：14278640
> 
> 赞同：1
> 
> 时间：2013-01-11T12:55:10.253
> 
> 标签：java, jsf, session, redirect, session-timeout

会话到期时，我需要重定向到登录页面。

我正在使用 HttpSessionListener，它正在调用 sessionDestroyed 方法，但我无法重定向到登录页面。

重定向时出现空指针异常

Java 类

```
import com.and.web.util.FacesUtils;
import java.io.IOException;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class MyHttpSessionListener implements HttpSessionListener {

    public void sessionCreated(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        System.out.print(getTime() + " (session) Created:");
        System.out.println("ID=" + session.getId() + " MaxInactiveInterval="
                + session.getMaxInactiveInterval());
    }

    public void sessionDestroyed(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        session.invalidate();
        try {
            FacesUtils.getExternalContext().redirect("/tnt-ui/");
        } catch (IOException ex) {
            Logger.getLogger(MyHttpSessionListener.class.getName()).log(Level.SEVERE, null, ex);
        }
        // session has been invalidated and all session data
        //(except Id)is no longer available
        System.out.println(getTime() + " (session) Destroyed:ID=" + session.getId());
    }

    private String getTime() {
        return new Date(System.currentTimeMillis()).toString();
    }
} 
```

Web.xml

```
<listener>
    <listener-class>`com.and.web.bean.MyHttpSessionListener`</listener-class>
</listener> 
```

这该怎么做？请给出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:16:06.897

```
public void sessionDestroyed(HttpSessionEvent se) {
    HttpSession session = se.getSession();
    session.invalidate();
    try {
        FacesUtils.getExternalContext().redirect("/tnt-ui/"); 
```

这是行不通的。只能在请求处理期间发出重定向。`sessionDestroyed`一般是超时事件，不会被请求线程调用。

您可以使用（例如）过滤器来检测过期的会话并重定向。

# c# - 如何在c#中两种情况都为真时获取枚举值

> ID：14278642
> 
> 赞同：0
> 
> 时间：2013-01-11T12:55:20.330
> 
> 标签：c#, enums

我有一个枚举，其中包含 3 个复选框的 3 个值：

```
public enum Str
{
    Test = 1,
    Exam = 2,
    Mark = 4
} 
```

想象一下这些是复选框。如果我选择其中任何一个都可以正常工作，但是当我选择多个复选框时，会添加枚举值。

当我检查测试和标记枚举值`5`时，当我选择测试和考试时，结果是`3` 我什至尝试了类型转换

```
 string sVal = "checkbox Value";
 bool ival = int.TryParse(sValue,out iVal);
 if(iVal)
 {
   int iValue = int.Parse(sValue)
    str s = (str)iValue;
 } 
```

再次“s”返回附加值而不是枚举类型如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:58:53.583

我认为您正在寻找的是 Flags 属性：http: [//msdn.microsoft.com/en-gb/library/system.flagsattribute.aspx](http://msdn.microsoft.com/en-gb/library/system.flagsattribute.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:03:11.543

您**确实**希望该值是 1 和 4 的加法。以下是测试值的方法：

```
public enum Str
{
    Test = 1,
    Exam = 2,
    Mark = 4
}

private static void Main()
{
    Str test = (Str)5;  // Same as  test = Str.Test | Str.Mark;

    if ((test & Str.Test) == Str.Test)
    {
        Console.WriteLine("Test");
    }

    if ((test & Str.Exam) == Str.Exam)
    {
        Console.WriteLine("Exam");
    }

    if ((test & Str.Mark) == Str.Mark)
    {
        Console.WriteLine("Mark");
    }

    Console.Read();
} 
```

`Flag`应该使用该属性，以便其他人知道您的枚举应该与按位运算一起使用。但是这个属性本身什么都不做（可能会修改`.ToString()`结果）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:09:02.060

您需要做几件事才能为您工作。

1.  在枚举上设置`[Flags]`属性。没有它它也能工作，但拥有它是一件好事，即使只是为了文档目的。

    ```
    [Flags]
    public enum Str
    {
      None = 0
      Test = 1,
      Exam = 2,
      Mark = 4
    } 
    ```

2.  要设置枚举，您需要循环选定的复选框并设置值，类似于：

    ```
    Str value = Str.None;
    if (chkTest.Checked)
       value = value | Str.Test;
    if (chkExam.Checked)
       value = value | Str.Exam;
    if (chkMark.Checked)
       value = value | Str.Mark; 
    ```

    运行后，如果，假设，测试和考试被检查，值将是：

    ```
    (int) value       =>  3
    value.ToString()  => "Str.Test|Str.Exam". 
    ```

3.  要检查枚举值是否具有特定标志，您可以执行以下操作：

    ```
    Str value = ....
    if (value.HasFlag(Str.Test))
       // it has test selected 
    else
       // it does not have test selected 
    ```

    或者你可以做

    ```
    Str value = ....
    if (value & Str.Test == Str.Test)
       // it has test selected 
    else
       // it does not have test selected 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:16:05.157

```
 if((EnumVal & Str.Exam) ==Str.Exam)|| EnumVal == Str.Exam) 
```

解决了.....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T13:16:08.443

您不能使用 Flags 属性。但是你的枚举值应该是 2 的 pow。

枚举的 int 值：

```
var values = Enum.GetValues(typeof(Str)).Cast<int>().Where(x => (x & iVal) != 0).ToList() 
```

然后：

```
values.Select(x => list[(int)Math.Log(x, 2)]) 
```

`list`是您的复选框列表，您可以对其进行迭代并设置为选中状态。

```
var list = new List<CheckBox>
           {
               firstCheckBox,
               secondCheckBox,
               thirdCheckBox,
           }; 
```

# java - Mapview V2 标注

> ID：14278645
> 
> 赞同：0
> 
> 时间：2013-01-11T12:55:27.197
> 
> 标签：java, android, google-maps, android-mapview, google-maps-markers

在 android 中，我实现了 MapView V2 API，并在用户点击地图上的标记时创建了一个自定义标注。但是，我将标记的标题和文本字段用于其他目的，并且因为这些字段包含字符串，所以在点击标记时会出现默认的白色标注。我已经在创建和标记的单击事件上尝试了 hideInfoWindow() 方法，但它不起作用。有任何想法吗？

编辑有没有办法以编程方式取消选择标记？就像在 iOS 的 Objectie-C marker.deselectAnnotation() 中一样。此方法取消选择代码中的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:36:00.507

通过返回 true 而不是 false 来解决这个问题

# javascript - Webview：window.close 不工作

> ID：14278646
> 
> 赞同：1
> 
> 时间：2013-01-11T12:55:29.233
> 
> 标签：javascript, android, webview, android-webview

我已经开发了带有 web 视图的 android 应用程序，我在这里加载了创建弹出窗口的示例 html 文件，但是在 android web 视图中我没有得到弹出窗口而不是那个弹出窗口覆盖以前的窗口。我使用 window.open 来创建弹出窗口

如果我想关闭那个窗口意味着我必须在我的脚本中使用 window.close 但这在 android web 视图中不起作用而且我也给予了所有权限

```
 WebSettings settings = Browser.getSettings();  
        settings.setSupportMultipleWindows(true);
        settings.setJavaScriptEnabled(true); 
        Browser.setWebViewClient(new WebViewClient());
        Browser.setWebChromeClient(new WebChromeClient());
        settings.setJavaScriptCanOpenWindowsAutomatically(true);
        settings.setBuiltInZoomControls(true);
        Browser.requestFocusFromTouch(); 
```

如果我在浏览器中加载相同的页面，它可以正常工作。无法在 Web 视图中创建弹出窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:07:45.623

如果要显示新页面的弹出窗口，则需要回调 java 以在 web 视图上创建一个 android`dialog`视图并将另一个 web 视图加载到其中。`window.close`将不起作用，因为这不会关闭**`web view`**; 它仍然保持开放。相反，您将需要再次调用 java 并`finish()`打开 web 视图的活动。这将关闭 Web 视图。

# web-services - SaaS、SOA 和 Web 服务

> ID：14278648
> 
> 赞同：22
> 
> 时间：2013-01-11T12:55:34.650
> 
> 标签：web-services, soa, saas

这个问题可能很愚蠢，但我真的很困惑。

我想实现一个软件即服务 (SaaS)，我认为我可以使用 Visual Studio 和 WCF 来实现它。但我读过 WCF 和 Web 服务是 SOA 实现而不是 SaaS。

我可以使用 WCF 来实现 SaaS 吗？SaaS、SOA 和 Web 服务之间有什么关系？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-11T21:17:01.667

**[SaaS](http://en.wikipedia.org/wiki/Software_as_a_service)只是一种软件交付方法。**可以这样想：您是软件提供商，您需要为客户提供他们想要使用的软件应用程序。但是您不会向他们出售 DVD 并说： *“来！在您的服务器上安装它并使用它”*。相反，您将应用程序托管在您自己的服务器上，并且 - 收取订阅费 - 为用户提供通过网络访问它的权限。它是应用程序的外部化（例如电子邮件、人力资源应用程序、会计和税收等）。

**当我们谈论 SaaS 时，我们谈论的是提供一些业务服务的**功能齐全的独立应用程序。****

 **[SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture)与此类似，但处于较低级别。它不提供业务服务，而是提供小型隔离流程作为服务。

**SOA 是一种构建软件的架构风格。**[这个想法是您通过将一组无状态、可重用、解耦的网络服务（例如Web 服务](http://en.wikipedia.org/wiki/Web_service)）放在一起（或与之交互）来构建您的应用程序。

**我认为让人们感到困惑的是“服务”这个词。SaaS 和 SOA 都提供“服务”。**但目标不同：SOA 为其他应用程序提供服务，而 SaaS 为用户提供服务。

**您当然可以使用 SOA 来构建您的 SaaS 应用程序。**这不是强制性的，但通常更可取。使用 SaaS，您可以为更多客户提供服务，并且将其构建在 SOA 架构之上，这使得应用程序比更单一的“全能”应用程序更容易扩展。

[TL;DR](http://en.wiktionary.org/wiki/Talk%3aTLDR)：我将解释一下我在[博客](http://blogs.msdn.com/b/hanuk/archive/2007/04/08/saas-and-soa.aspx)上读到的内容：

> 决定通过 Web 提供税收功能的是 SaaS。
> SOA 使税务应用程序能够与 IRS 集成以进行电子申报和内部申报验证。**

# asp.net-mvc-3 - 在 nopCommerce 的自定义页面上启用插件

> ID：14278649
> 
> 赞同：2
> 
> 时间：2013-01-11T12:55:39.343
> 
> 标签：asp.net-mvc-3, nopcommerce

我必须开发一个小部件插件，并且必须仅在某个页面上处于活动状态。我去了创建插件的教程，但我没有弄清楚如何使小部件仅在某个页面上可见。这可能吗？我必须在哪里进行更改才能使其正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:21:09.903

可以通过执行（任一/两者）以下操作：

1.  一些小部件区域是特定于页面的。添加到特定于页面的小部件区域，它只会显示在该页面上。

2.  为小部件提供服务时，您可以获得 HttpContext，然后您可以获取路由数据。通过检查路线数据，您可以决定您当前所在的页面，并可选择显示小部件。

希望这可以帮助。:)

# html - 将星号添加到末尾

> ID：14278651
> 
> 赞同：4
> 
> 时间：2013-01-11T12:55:48.610
> 
> 标签：html, css, forms

是否可以在文本字符串的末尾添加星号`<label>`？

这就是我所拥有的，但星号（当然）显示在整个标签后面：

```
<label class="xy-form-label-required" for="zipcode">
   Zip Code
   <span class="xy-form-labelinfo">
       Allowed characters a-z A-z 0-9 ,.-
       Could also be an information about the field...
   </span>
</label> 
```

我的 CSS 代码：

```
form.xy-form .xy-form-label-required:after {
    color: grey;
    content: ' *';
} 
```

* * *

这是结果：

**邮政编码**
允许的字符 az Az 0-9 ,.-
*

这就是我想要在不更改 html 标记的情况下实现的目标。

**邮政编码***
允许的字符 az Az 0-9 ,.-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:10:09.510

您可以简单地添加以下 CSS 代码

```
.xy-form-label-required > span.xy-form-labelinfo:before{
  color: grey;
  content: " *";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:09:16.587

除了错别字，您需要在信息标签*之前添加星号：*

```
.xy-form-label-required .xy-form-labelinfo:before{
    color: grey;
    content: ' *';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T13:55:18.077

我必须像这样更改标记，如果没有 < 选择器（尚不可用），就无法实现我想要的：

```
<label class="xy-form-label" for="zipcode">
    <span class="mc-form-asterisk>Zip Code</span>
    <span class="xy-form-labelinfo">
        Allowed characters a-z A-z 0-9 ,.-
        Could also be an information about the field...
    </span>
</label> 
```

我的 CSS 代码：

```
form.xy-form .xy-form-label .xy-form-asterisk:after,
form.xy-form .xy-form-label-required:after {
    display: inline-block;
    color: grey;
    content: '\a0*';
} 
```

我认为仍然没有那么糟糕。不过，还是谢谢各位的建议！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:53:58.087

您在元素后添加星号，而不是文本节点。为了达到你想要的效果，你需要使用 javascript 即这样的东西：[http://jsbin.com/udiroz/2/edit](http://jsbin.com/udiroz/2/edit) 但我不会这样。

不知道这在您的情况下是否可行，但我建议将标记更改为如下所示：http: [//jsbin.com/udiroz/1/edit](http://jsbin.com/udiroz/1/edit) 在我看来，标签不是用于获取其他信息的好地方，例如允许或不允许使用哪些字符、验证错误等。

# arrays - 带有 foreach 的多维数组

> ID：14278655
> 
> 赞同：0
> 
> 时间：2013-01-11T12:55:52.903
> 
> 标签：arrays, function, multidimensional-array, foreach

我正试图围绕多维数组、键等。

我查看了大量示例并阅读了 php 文档，但我无法正确理解。

下面的示例代码已修改，以便其他人受益并帮助回答我的问题。

如何编写数组来存储数据以及如何使用 foreach 循环构建数组以便可以在函数中调用数组数据，如下所示。

这是数组数据：

```
'imgTitle' => "Sample Title A" 
'tabSection' => '0'
'imgId' => '0' 

'imgTitle' => "Sample Title A" 
'tabSection' => '0'
'imgId' => '0' 

'imgTitle' => "Sample TItle B" 
'tabSection' => '0'
'imgId' => '1'

'imgTitle' => "Sample Title C" 
'tabSection' => '0'
'imgId' => '2' 

'imgTitle' => "Sample Title xyz" 
'tabSection' => '1'
'imgId' => '0' 

'imgTitle' => "Sample Title abc" 
'tabSection' => '1'
'imgId' => '1'

'imgTitle' => "Sample Title lmnop"
'tabSection' => '1'
'imgId' => '2' 

function build_img_links() {

    foreach( WHAT_GOES_HERE? ) {
        $output  = '<a href="#">';
        $output .= '<img src="../'.$imgSection.'-'.$imgId.'.jpg"> title="'.$imgTitle.'" />';
        $output .= '</a>';

        return $output;     
    }
}

echo build_img_links(0,1);
echo build_img_links(0,2);
echo build_img_links(1,0); 
```

上面传递的参数将与数组数据显示相关联。

输出应如下所示：

```
<a href="#"><img src="../0-1.jpg" title="Sample TItle B" />
<a href="#"><img src="../0-2.jpg" title="Sample TItle c" />
<a href="#"><img src="../1-1.jpg" title="Sample TItle abc" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:01:47.650

尝试：

```
$data = array(
  array(
    'imgTitle'   => 'Sample Title A',
    'tabSection' => '0',
    'imgId'      => '0' 
  ),
  array(
    'imgTitle'   => 'Sample Title A',
    'tabSection' => '0',
    'imgId'      => '0' 
  ),
  // ....
);

function build_img_links($data) {
  $output = '';

  foreach( $data as $item ) {
    $output .= '<a href="#">';
    $output .= '<img src="../'.$item['imgSection'].'-'.$item['imgId'].'.jpg" title="'.$item['imgTitle'].'" />';
    $output .= '</a>';
  }

  return $output;
}

build_img_links($data); 
```

# android - 如何从android中的服务器获取时间？

> ID：14278663
> 
> 赞同：2
> 
> 时间：2013-01-11T12:56:12.350
> 
> 标签：android, xml, json, date

> **可能重复：**
> [有人知道一个好的 JSON 时间服务器吗？](https://stackoverflow.com/questions/9486293/does-anyone-know-of-a-good-json-time-server)

我可以**解析当前时间**的服务器上是否有任何公共`json`或存在？我将利用这段时间检查我的应用程序试用版的到期期限，我没有使用日历或日期类。我是安卓新手。谢谢。`xml`

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:17:17.210

我知道这不完全是您所要求的，但您也可以从网络提供商（手机网络）那里获得时间。

你有没有尝试过

```
LocationManager locMan = (LocationManager) activity.getSystemService(activity.LOCATION_SERVICE);
long time = locMan.getLastKnownLocation(LocationManager.NETWORK_PROVIDER).getTime(); 
```

它以毫秒为单位返回时间。

所以你不需要互联网连接或解析 JSON、XML ...

希望这会有所帮助，

托拜厄斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:27:48.060

我有一个实用程序 Web 服务，当我通过 SOAP 向服务器“询问”时，他们将日期返回给我。

```
@WebMethod(operationName = "getDateTime")
public byte[] getDateTime() {
    UtilWS.showIpClient(wsContext);

    String format = "yyyy-MM-dd HH:mm:ss.SSS";
    SimpleDateFormat sdf = new SimpleDateFormat(format,
            Locale.US);
    String data = sdf.format(new Date(System.currentTimeMillis()));

    System.out.println("== Date Requisiton: " + data);
    return data.getBytes();
} 
```

在我的客户端：

```
byte[] b = CommWS.send(getApplicationContext(), "UtilWS", "getDateTime");
String server_date = new String(b); 
```

CommWS 是我的类，它实现了与服务器的 SOAP 通信。

赛亚，
贝尔坦**

# python - 在python中合并子列表

> ID：14278664
> 
> 赞同：29
> 
> 时间：2013-01-11T12:56:33.400
> 
> 标签：python

> **可能重复：**
> [在 Python 中展平一个浅列表 从 Python 中的列表列表中](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)
> [制作一个平面列表 在 Python 中](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)
> [合并两个列表？](https://stackoverflow.com/questions/1720421/merge-two-lists-in-python)

快速简单的问题：

我如何合并这个。

```
[['a','b','c'],['d','e','f']] 
```

对此：

```
['a','b','c','d','e','f'] 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-11T13:09:57.783

使用列表理解：

```
ar = [['a','b','c'],['d','e','f']]
concat_list = [j for i in ar for j in i] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-11T12:58:58.150

列表连接只是用`+`运算符完成的。

所以

```
total = []
for i in [['a','b','c'],['d','e','f']]:
    total += i

print total 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-11T12:59:32.340

这会做：

```
a = [['a','b','c'],['d','e','f']]
reduce(lambda x,y:x+y,a) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T13:00:15.683

尝试：

```
sum([['a','b','c'], ['d','e','f']], []) 
```

或者更长但更快：

```
[i for l in [['a', 'b', 'c'], ['d', 'e', 'f']] for i in l] 
```

或者`itertools.chain`按照@AshwiniChaudhary 的建议使用：

```
list(itertools.chain(*[['a', 'b', 'c'], ['d', 'e', 'f']])) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T13:14:22.133

尝试列表对象的“扩展”方法：

```
 >>> res = []
 >>> for list_to_extend in range(0, 10), range(10, 20):
         res.extend(list_to_extend)
 >>> res
 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19] 
```

或更短：

```
>>> res = []
>>> map(res.extend, ([1, 2, 3], [4, 5, 6]))
>>> res
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T13:00:52.733

```
mergedlist = list_letters[0] + list_letters[1] 
```

这假设您有一个静态长度列表，并且您总是希望合并前两个

```
>>> list_letters=[['a','b'],['c','d']]
>>> list_letters[0]+list_letters[1]
['a', 'b', 'c', 'd'] 
```

# jquery - 使用 jQuery 预加载网页

> ID：14278669
> 
> 赞同：0
> 
> 时间：2013-01-11T12:56:46.000
> 
> 标签：jquery, css, html

我想`div`在页面重定向之前将其预加载到页面上，以便在加载时不会闪烁。

我想要完成的是所有标签下的标题（an `img`）和导航（a ）似乎没有重新加载并保持在原位，而它下面的内容淡出并淡入淡出。`ul``<header>``page1.html``page2.html`

我希望有一种方法可以将标题加载到页面上，以便在它们之间切换时不会闪烁。

# asp.net-mvc - 根据复选框选择用户

> ID：14278670
> 
> 赞同：1
> 
> 时间：2013-01-11T12:56:49.410
> 
> 标签：asp.net-mvc

我有一个显示数据库中所有用户详细信息的视图，我需要能够过滤它并仅显示管理员选择的那些用户。

目前控制器看起来像这样 -

```
public ViewResult Index()
    {
        var trs = db.TRS
            .Include(t => t.User);
        return View(trs.ToList());
    } 
```

但我需要更改此查询以仅包含选定的用户。我已经像这样更改了控制器-

```
public ViewResult Index(FormCollection form)
    {

        string[] UserIDs = form["TRSIDs"].Split(',');

        var trs = db.TRS
            .Include(t => t.User);
        return View(trs.ToList());

    } 
```

现在我有一个包含所有选定用户 ID 的数组，是否可以更改查询以使用这些用户 ID，以便发送的列表仅包含选定的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:03:36.450

你想要这样的东西吗？

```
string[] UserIDs = form["TRSIDs"].Split(',');
//if userIds are int, you should type conversation from string array to int array
var trs = db.TRS.Where(g => UserIDs.Contains(g.User.UserId)).ToList(); 
```

# c - 指针数组 - 从文件中读取 - 崩溃

> ID：14278673
> 
> 赞同：0
> 
> 时间：2013-01-11T12:57:01.453
> 
> 标签：c, arrays, file, pointers

你能指出我做错了什么吗？

我正在尝试编写一些代码，这些代码将从文本文件中读取数据并将这些数据保存到指向结构的指针数组中。我不使用任何全局标识符是至关重要的。

这是我写的，但每次函数`nactiProdukty`( `readProductsfromFile`) 结束时都会出现错误：`First-chance exception at 0x73006500 in ConsoleApplication3.exe: 0xC0000005: Access violation executing location 0x73006500`. 但是从文件中读取似乎工作正常。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

typedef struct produkt {
  char jmeno[20];
  int mnozstvi;
  int cena;
} tProdukt;

int SpoctiProdukty();
int Generuj(int min, int max);
void nactiProdukty(tProdukt **pole);

void main(){
  tProdukt **pole=NULL;

  int i;

  srand(time(NULL));
  nactiProdukty(pole);

  printf("test");
  scanf("%s");
}

int SpoctiProdukty(){
  FILE *data=fopen("data.txt","r");
  int count=0;
  while(fscanf(data,"%s %d") != EOF){
    count++;
  }
  fclose(data);
  return count;
}

int Generuj(int min, int max){
  return (rand()%(max-min)+min);
}

void nactiProdukty(tProdukt **pole){
  FILE *data=fopen("data.txt","r");
  int temp;
  int i;
  char temps[20];
  int pocet=SpoctiProdukty();
  //tProdukt **pole;

  pole=(tProdukt**)malloc(sizeof(tProdukt*)*pocet);
  for (i = 0; i < pocet; i++) {
    pole[i]=(tProdukt*)malloc(sizeof(tProdukt));
  }      

  for (i = 0; i < pocet; i++) {
    fscanf(data,"%s %d",temps,&temp);
    strcpy((*pole[i]).jmeno,temps);
    (*pole[i]).cena=temp;
    (*pole[i]).mnozstvi=Generuj(10,150);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:23:35.253

线

```
while(fscanf(data,"%s %d") != EOF){ 
```

是错的。从[fscanf](http://linux.die.net/man/3/scanf)手册页：

> 如果格式转换规范的数量超过指针参数的数量，则结果未定义。

崩溃是一种有效且常见的未定义结果。您可以通过提供`fscanf`要写入的变量来解决此问题，然后忽略结果：

```
int i;
char s[20];
while(fscanf(data,"%s %d", s, i) == 2){ 
```

# css - 调整图像大小，固定位置

> ID：14278678
> 
> 赞同：0
> 
> 时间：2013-01-11T12:57:11.783
> 
> 标签：css, image, resize, position

我想保持这些横幅位置固定。并使它们可调整大小。因为在较小的显示器上，横幅可以随心所欲。而且它们总是比背景更大。如果您调整浏览器的大小，您可以看到我想要告诉的内容。

[http://mecanik.net/theback/5/index_1.html](http://mecanik.net/theback/5/index_1.html)

```
.tab1{background-image:url(../images/tab1.PNG); width:302px;
height:201px; background-repeat:no-repeat; display:block;
position:absolute; top:18%; left:5%;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:18:36.290

由于它们的父 div 是已经调整大小的背景，因此您可以将图像大小设置为它的百分比。百分比高度和宽度是其父容器的百分比，因此应该使用 %15 之类的东西。由于您将它们显示为容器的背景，因此您需要使用 css background-size 属性。

请记住，除了 IE 8 和更早的 IE 版本之外， background-size 几乎适用于所有应用程序。

将 .tab1 的背景设置为 images/tab1.PNG。删除 html img 标签，并尝试将以下代码添加到您的 css 中的 .tab1 。您将不得不稍微调整百分比，但它应该开始使事情规模化。

```
 background: url(../images/tab1.png); background-size: 100% auto; height:20%; width:30%; 
```

# listview - 无法理解 NullPointerException

> ID：14278681
> 
> 赞同：-1
> 
> 时间：2013-01-11T12:57:21.807
> 
> 标签：listview, nullpointerexception, android-arrayadapter

我正在尝试使用 ListViews 和 ArrayAdapters，并且遇到了 runTimeException 问题，DDMS 错误报告告诉我，我在包含“public void onItemClick”的行出现 NullPointerException，我不明白它为什么会给出我一个问题。

```
 package com.example.worksheet2;

import android.os.Bundle;
import android.app.ListActivity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends ListActivity {

ListView listview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView listview = (ListView) findViewById(R.layout.activity_main);
    String[] values = { "A", "B", "C" };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.id.menu_settings, values);

    // asign adapter to listview
    listview.setAdapter(adapter);

    listview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            Toast.makeText(getApplicationContext(),
                    "Click ListItem Number " + position, Toast.LENGTH_LONG)
                    .show();

        }
    });

}

   } 
```

这是错误报告

```
 Caused by: java.lang.NullPointerException
at com.example.worksheet2.MainActivity.onCreate(MainActivity.java:31)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:13:26.613

尝试给 listview 一个 id，然后通过 id 找到它。

# php - 在 Laravel 4 中如何通过 Web 界面调用 Artisan 命令？

> ID：14278685
> 
> 赞同：4
> 
> 时间：2013-01-11T12:57:32.787
> 
> 标签：php, laravel

在[Laravel 4](https://github.com/illuminate)中如何通过 Web 界面调用 Artisan 命令？

我试过以下

```
$command = "controller:make";
$parameters = array('name' => 'FooController');
Artisan::call($command,$parameters); 
```

但是我收到此错误消息

```
 InvalidArgumentException: There are no commands defined in the "controller" namespace. 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T18:19:10.827

现在有一个名为 WebArtisan 的包可以做到这一点，请参阅此页面了解更多信息：

[http://forums.laravel.io/viewtopic.php?id=10334](http://forums.laravel.io/viewtopic.php?id=10334)

如果你觉得这有帮助，请标记我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T07:53:27.140

你注册你的命令了吗？我完全没有问题使用 Arisan:call() 通过网络调用工匠命令。我没有为它安装一个包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:38:05.740

Artisan 并非旨在通过网络调用。

但是，如果您需要，您可以使用[此捆绑包](https://github.com/joecwallace/web-artisan)，它将允许您将 Artisan 公开到网络。

确保您阅读了有关不在生产中使用它或添加某种密码保护选项的信息！

# sdk - 从哪里下载 CUDA SDK

> ID：14278687
> 
> 赞同：7
> 
> 时间：2013-01-11T12:57:42.383
> 
> 标签：sdk, cuda, nvidia

我一直在 nvidia 网站上搜索 GPU Computing SDK，因为我正在尝试构建支持 cuda 的点云库 (PCL)。但是，在 nvidia 网站上，我只能找到工具包的链接，而不是 SDK 的单个下载链接。

我找到了这个帖子：[如何下载最新版本的GPU计算SDK？](https://stackoverflow.com/questions/9872896/how-can-i-download-the-latest-version-of-the-gpu-computing-sdk)

但是，该解决方案似乎已经过时并且似乎不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T14:31:13.300

fritzone 提供的链接 ( [https://developer.nvidia.com/cuda-downloads](https://developer.nvidia.com/cuda-downloads) ) 是一个安装程序包，其中包括 CUDA 工具包、开发人员驱动程序和 SDK。从 CUDA 4.2 开始，NVidia 将所有这些都分布在一个包中。旧版本的 CUDA 仍将它们作为单独的下载，可从[https://developer.nvidia.com/cuda-toolkit-archive](https://developer.nvidia.com/cuda-toolkit-archive)获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:04:28.393

尝试：[https](https://developer.nvidia.com/cuda-downloads) ://developer.nvidia.com/cuda-downloads 并选择您的架构/操作系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:16:03.860

我认为在大多数情况下，为其他库添加 GPU 支持只需要 CUDA 工具包，可以公开找到。

还有一个 CUDA 编译器 SDK。

它位于注册开发者网站中。

首先，您必须通过[此链接](https://developer.nvidia.com/user/register)注册为注册开发者。

登录后申请[CUDA/GPU计算注册开发者计划](https://developer.nvidia.com/rdp/cuda-registered-developer-program)

然后就可以看到CUDA Compiler SDK的下载链接了。

# javascript - 使用Javascript从DIV中提取所有图像标签

> ID：14278694
> 
> 赞同：0
> 
> 时间：2013-01-11T12:57:58.083
> 
> 标签：javascript, html

我正在使用 Javascript。我想仅使用 Javascript 而不是 JQuery 或 Regex 等提取 DIV 中的所有图像标签。我可以这样做吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:22:09.057

这一切都取决于您到底想要什么（以及哪个浏览器），但这里有一些应该经常工作的代码。

我会这样做：

```
var imgNodes = document.getElemetById("DIVCONTAINER").getElementsByTagName("img");

for(var idx = 0; idx < imgNodes.length;idx++)
{
  alert(imgNodes[idx].src);
} 
```

您可以在此处找到要测试的代码。

~~[http://jsfiddle.net/SBjA8/1/](http://jsfiddle.net/SBjA8/1/)~~

[http://jsfiddle.net/SBjA8/2/](http://jsfiddle.net/SBjA8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:02:35.350

尝试[`getElementsByTagName`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-A6C9094)：

```
var images = div.getElementsByTagName('img'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:03:06.690

用这个

```
var imgs = document.images;
var src = [];
for( var i = imgs.length; i--; ){
src.push( img.src );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:03:16.920

首先做一个

```
var divObj = document.getElementById('the div that contains the image tags') 
```

， 然后

```
//this will give you a NodeCollection of img tags in this divand not an array
divObj.getElementsByTagName('IMG') 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)

# amazon-s3 - 限制访问托管在 S3 上的网站

> ID：14278698
> 
> 赞同：46
> 
> 时间：2013-01-11T12:58:19.917
> 
> 标签：amazon-s3

我想在亚马逊 S3 上托管一个静态网站，但我需要限制对某些用户的访问。这可能是通过 IP 地址或亚马逊凭证（只有登录的用户才能访问存储桶的内容。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-15T18:59:24.580

是的，这确实是可能的。更好的起点是阅读[S3 access control](http://docs.aws.amazon.com/AmazonS3/latest/dev/s3-access-control.html)。

但默认情况下，在 S3 上创建的存储桶不是公开的。因此，默认行为应该是只有知道您的访问权限和密钥的人/程序才能访问它。

您还可以[编辑存储桶权限](http://docs.aws.amazon.com/AmazonS3/latest/UG/EditingBucketPermissions.html)，以授予对特定 AWS 账户或电子邮件 ID 的访问权限。

为了限制对某些 IP 的访问，您可以创建额外的存储桶策略。

**限制对特定 IP 地址的访问**

> 此语句授予任何用户对指定存储桶中的对象执行任何 S3 操作的权限。但是，请求必须源自条件中指定的 IP 地址范围。此语句中的条件标识 192.168.143.* 允许的 IP 地址范围，但有一个例外，即 192.168.143.188。
> 
> 请注意，条件中指定的 IPAddress 和 NotIpAddress 值使用 RFC 2632 中描述的 CIDR 表示法。有关详细信息，请访问[http://www.rfc-editor.org/rfc/rfc4632.txt](http://www.rfc-editor.org/rfc/rfc4632.txt)。

```
{
    "Version": "2012-10-17",
    "Id": "S3PolicyId1",
    "Statement": [
        {
            "Sid": "IPAllow",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:*",
            "Resource": "arn:aws:s3:::bucket/*",
            "Condition" : {
                "IpAddress" : {
                    "aws:SourceIp": "192.168.143.0/24" 
                },
                "NotIpAddress" : {
                    "aws:SourceIp": "192.168.143.188/32" 
                } 
            } 
        } 
    ]
} 
```

有关更多信息，请阅读[此处](http://awspolicygen.s3.amazonaws.com/policygen.html)和[此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-21T18:00:31.760

编辑：基于用户/组的限制**[不适](https://stackoverflow.com/a/15291736/7190495)用于托管在 S3 中的静态网站，**因为 AWS 没有为 S3 注册您的 AWS 管理控制台（路径：amazon.com）凭证/cookie（路径：amazonaws.com），也没有检查它们.

解决方法：[www.s3auth.com](http://www.s3auth.com) - S3 存储桶的基本身份验证可能对您有用，但涉及第三方。另一种解决方案可能是[查询字符串请求身份验证](https://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)，使用 EC2 实例或[Elastic Beanstalk Java SE 静态文件选项](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/java-se-platform.html#java-se-options)。我们目前正在探索使用[Amazon API Gateway 作为 Amazon S3 代理](https://docs.aws.amazon.com/apigateway/latest/developerguide/integrating-api-with-aws-services-s3.html)来保护我们的存储桶。

* * *

旁注：还有一些额外的事情需要注意，通常不会直接指出。

目前[无法](https://stackoverflow.com/a/30668874/7190495)在*存储桶策略*中授予或限制*组访问权限*，只能授予特定用户。由于您通常也不想为用户结构中的每次更改更新每个存储桶策略，并且存储桶策略可能（无意中）干扰您的*用户策略*，您**可能不想使用存储桶策略**。

基于用户/组的策略仅适用于`s3:GetBucketLocation`和`s3:ListAllMyBuckets`附加到`arn:aws:s3:::*`或`*`（不幸的是，此处无法过滤，所有存储桶名称对于具有此策略的用户/组都是可见的）。

IAM 策略示例：（不是 S3 存储桶策略，**不适**用于*静态网站托管*）

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:ListAllMyBuckets",
                "s3:GetBucketLocation"
            ],
            "Resource": [
                "arn:aws:s3:::*"
            ]
        },
        {
            "Effect": "Allow",
            "Action": "s3:GetObject",
            "Resource": [
                "arn:aws:s3:::YOURBUCKETNAME",
                "arn:aws:s3:::YOURBUCKETNAME/*"
            ]
        }
    ]
} 
```

* * *

更详细的博文：[“如何限制对特定 IAM 角色的 Amazon S3 存储桶访问”](https://aws.amazon.com/de/blogs/security/how-to-restrict-amazon-s3-bucket-access-to-a-specific-iam-role/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-30T09:27:15.700

您也可以限制某些 http 引用者访问存储桶/静态网站。因此，您可以建立一个 wordpress 会员网站，只有登录到该网站的用户才能访问托管在亚马逊上的网站。例如 mymembershipsite.com/members 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-31T16:33:37.190

您可以将 Cloudfront 放在 S3 前面，将 AWS WAF 放在 Cloudfront 前面，只将您想要的 IP 列入白名单，并且可以正常工作。

# php - 从 html onclick 事件传递 jQuery onclick 函数的参数

> ID：14278699
> 
> 赞同：2
> 
> 时间：2013-01-11T12:58:20.240
> 
> 标签：php, javascript, jquery

我想将参数从 html onclick 事件传递给 onclick jquery 函数。

**PHP中的html语句渲染**

```
$name = "abcd";
for ($i=0;$<10;$i++){
$text .= '<tr>
             <td>'.$i.'</td>
             <td><div id="name">'.$name.'/div>
                 <a class="href" onclick="callJSFunc($i,\''.$name.'\')" ></a>
             </td>
          </tr>';
} 
```

**javascript..**

```
function callJSFunc(i , name){
alert(i+"  "+name);
} 
```

**我想把它转换成某种...**

```
$(".href").click(function(i,name,event){
alert(i+"  "+name);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:03:21.867

你为什么不尝试其他方式

```
$name = "abcd";
for ($i=0;$<10;$i++){
$text .= '<tr>
         <td>'.$i.'</td>
         <td><div id="name">'.$name.'/div>
             <a class="href" data-id="'.$i.'" data-name="'.$name.'" ></a>
         </td>
      </tr>';
} 
```

在 jQuery onClick 中

```
$(".href").click(function(){
    alert($(this).attr('data-id')+"  "+$(this).attr('data-name'));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:01:34.037

您无法更改触发事件的方式，但您始终可以将这些参数作为`data-*`属性存储在标记中，并将它们提取到事件处理程序中。您请求的是订阅事件和事件对象以根据您希望作为参数的内容自然变化，但是浏览器无法确定您需要什么。

我使用`data-*`属性的意思是将数据存储在 DOM 元素中：

```
<a class="href" data-index="$i" data-name="$name" href="someHref" /> 
```

jQuery：

```
$('.href').click(function (event) {
    var index = $(this).attr('data-index'); // Yields a string use data() for other data types
    var name = $(this).attr('data-name'); // Yields a string use data() for other data types
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:14:30.867

最好使用 jQuery 执行此操作，而不是使用 PHP 发送参数。

你可以在你的 javascript 中做这样的事情：

```
$('a.href').click(function( event ) {
  var index = $('table').index(this); // Containing table
  var name = $(this).siblings('#name').innerHTML;
  alert( index + ' ' + name );
}); 
```

顺便说一句，一个 id 应该是唯一的。您的代码生成 10 个表行，其中每个行都有 id '#name'。

# role - 创建自定义 WAI-ARIA 角色

> ID：14278702
> 
> 赞同：1
> 
> 时间：2013-01-11T12:58:28.507
> 
> 标签：role, wai-aria

我是 WAI-ARIA 的新手。我想知道如何根据现有角色创建自定义角色。

例如，我想从 aria 按钮角色创建一个自定义按钮角色。如果有人提供这样做的步骤，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:22:32.890

WAI-ARIA 1.0 不支持自定义角色，尽管 ARIA 中的基础设施将来可以支持这一点。来自[http://www.w3.org/TR/wai-aria/roles](http://www.w3.org/TR/wai-aria/roles)：

> 5\. 角色模型
> 
> [...]
> 
> RDF/OWL 分类法*可用作未来扩展 WAI-ARIA 的*工具，或被工具制造商用于根据本规范验证适用于角色的状态和属性。

现在，坚持最接近的定义角色；在您的情况下可能是按钮。

在您的情况下，您的按钮需要自定义角色是什么？它与常规按钮的行为有何不同？

# python - 看不懂Python表达式

> ID：14278705
> 
> 赞同：1
> 
> 时间：2013-01-11T12:58:34.427
> 
> 标签：python, lambda

我遇到了一些 Python 函数，完全无法理解它的含义，也不知道它是如何工作的。

```
def test(data, bot):
    return reduce(lambda a, b: a or b, [i in data['message'] for i in
        ['地震了吗', '地震了么', '地震了?', '地震了？', '地震了吧']]) 
```

我知道结果是如果`data['message']`（这是一个字符串值）包含这些字符串中的任何一个`['地震了吗', '地震了么', '地震了?', '地震了？', '地震了吧']`，函数测试将返回 true。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T13:00:48.047

您正在查看列表理解；对于每个`i`它将计算`i in data['message']`。

如果您要在循环中写出它，它将是：

```
tmplist = []
for i in ['地震了吗', '地震了么', '地震了?', '地震了？', '地震了吧']:
    tmplist.append(i in data['message']) 
```

因此，对于列表中的每个字符串，测试布尔表达式`i in data['message']`并将结果（`True`或`False`）添加到 `tmplist.

然后该`reduce()`函数返回等价于：

```
tmplist[0] or tmplist[1] or tmplist[2] or ... or tmplist[len(tmplist)-1] 
```

而是以更曲折的方式表达。`reduce(lambda a, b: a or b, sequence)`以`sequence[0]`and `sequence[1]`as `a`and开始`b`，然后获取 as 的结果和`lambda`as`a`中的下一个元素`sequence`，`b`并重复此操作，直到 sequence 中的所有元素都已处理。

编写此代码的更友好的方法是[`any()`](http://docs.python.org/2/library/functions.html#any)改用：

```
return any(i in data['message']
    for i in ['地震了吗', '地震了么', '地震了?', '地震了？', '地震了吧']) 
```

`any()`实际上效率更高；它将运行生成器并在找到匹配项时立即停止；如果只`data['message']`包含`'地震了吗'`一个测试将被执行。

# ajax - ajax yii 无休止的加载

> ID：14278711
> 
> 赞同：0
> 
> 时间：2013-01-11T12:59:03.750
> 
> 标签：ajax, yii

我正在尝试在 yii 中使用 ajax，但有时加载不会在我的浏览器中停止，有人知道为什么吗？

这是我的代码，我知道这不是最好的解决方案，但它可以工作（除了在谷歌浏览器中永无止境的加载）

```
<script>           
        function refresh(){
<?
echo CHtml::ajax(array('url' => CController::createUrl('results/UpdateAjax'), 'update' => '#data'
    , 'complete' => 'function(html){refresh()}'
))
?>

    }
</script>

Yii::app()->clientScript->registerScript('firstRefresh', "$(document).ready(function () {" .
            CHtml::ajax(array('url' => CController::createUrl('results/UpdateAjax'), 'update' => '#data'
                , 'complete' => 'function(html){refresh()}'
            ))
            . "});", CClientScript::POS_READY); 
```

# multithreading - 在 Java 类中使用线程而不实现 Runnable 或扩展 Thread

> ID：14278716
> 
> 赞同：1
> 
> 时间：2013-01-11T12:59:28.713
> 
> 标签：multithreading, runnable, datagram

我正在编写一个可以接收和发送 datagramPacket 的类 SipProvider。此类是我正在处理的 SIP 堆栈的一部分。

我提供的 API 不会使 SipProvider 实现可运行或扩展线程。

我试图实现的解决方案是在 SipProvider 中创建一个新类，它将扩展线程。我想为线程提供参数并且我有编译问题（没有可访问类型 SipProvider 的封闭实例），线程无法实例化，因为它与 SipProvider 相关（我发现它应该是静态的但不知道怎么做）。

我在 Internet 上查找了如何在类中实现线程，但没有找到解决方案。有没有已知的方法来做到这一点。

这是我一直在尝试做的事情的快照。这只是课堂的一部分。

```
public class SipProvider {

    //startOn is the method which allow the user to listen on a port 
    //so the user don't have to bother creating a thread and so on
public static SipProvider startOn(listeningPoint) {
        SipProvider sipProvider = new SipProvider();
        thread.sipProvider = sipProvider;
        thread.run();
        return sipProvider; 
}

    //this is the thread i want to handle the listening process 
public class ReceiveThread extends Thread{

    public SipProvider sipProvider;

    public ReceiveThread(SipProvider sipProvider){
        this.sipProvider = sipProvider;
    }

    @Override
    public void run(){
        try {

            int MAX_LEN = 200;
            DatagramSocket datagramSocket = new DatagramSocket(
                    listeningPoint.getPort());
            sipProvider.datagramSocket = datagramSocket;
            byte[] buffer = new byte[MAX_LEN];
            DatagramPacket packet = new DatagramPacket(buffer, MAX_LEN);
            while (!datagramSocket.isClosed()) {
                sipProvider.setSipListener(sipListener);
                datagramSocket.receive(packet);
                                    //handle packet content

            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
} 
```

**伊迪丝：**

除了提议的解决方案（效果很好）之外，我发现的另一种解决方案是实例化一个新线程并同时定义它的 run() 方法。我的示例中的 startOn 方法在 listenerPoint 上开始侦听（其中包含有关端口地址和使用的协议的信息）。

```
public static SipProvider startOn(final ListeningPoint listeningPoint) throws   SocketException {
    final SipProvider sipProvider = new SipProvider(listeningPoint);

    new Thread() {
        @Override
        public void run() {
            try {

                while (true) {
DatagramPacket packet = newDatagramPacket(new byte[200], 200);
sipProvider.datagramSocket.receive(packet);
String content = new String(packet.getData(), 0, packet.getLength());
sipProvider.sipListener.processContent(content);
                }

            } catch (Exception e) {
            }
        }
    }.start();
    return sipProvider;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:20:03.740

此代码段可能会帮助您：

```
public class SipJob implements Runnable {

    private SipProvider sipProvider;

    public SipJob(SipProvider sipProvider) {
                  // pass other parameters, if you need
        this.sipProvider=sipProvider;
    }

    @Override
    public void run() {
        // do the code, use SipProvider

    }
} 
```

这将包含您要运行的代码。您可以根据需要向构造函数添加任意数量的参数，您可以从业务逻辑中使用它们。我建议不要传递资源（例如套接字），因为它们必须关闭，并且将打开和关闭代码分开是不明智的（必须由同一实体负责）。

现在您需要`Thread` 执行：

```
SipProvider sipProvider = ...;
Runnable job = new SipJob(sipProvider);
Thread runner = new Thread(job);
runner.setDaemon(true);
runner.start(); 
```

请注意 - 据我了解 - 这将在后台运行，所以我设置了`setDaemon(true)`.

我不确定，但你可能在`SipProvider`你想在线程中使用的内容中有内部的东西。这种方式我建议首先扩展`SipProvider`类，启用对那些内部变量/方法的访问，在类中使用子`SipJob`类。

编辑：访问 SipProvider 内部的另一种方法是扩展类，并将 SipJob 类定义为后代中的`inner class`（不是内部静态类，而是实例类）。这样，您将自动访问包含 SipProvider 的实例变量——您甚至不必将其作为参数传递。从内部实例类试试这个：`SipProvider.this.whateverField`。

# windows-phone-7 - 在 MS Blend 中为 Frame 创建样式

> ID：14278721
> 
> 赞同：0
> 
> 时间：2013-01-11T12:59:37.683
> 
> 标签：windows-phone-7, expression-blend, windows-phone-8

如何使用与任何控件相同的方式在 MS Blend 中为 PhoneApplicationFrame 创建样式，即 `[RightClick] -> [Edit Style] -> [Edit a Copy...]`？我需要用设计视图来编辑它，而不仅仅是从代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:08:13.937

我找到了解决方法：

*   在资源部分创建

`<Style TargetType="phone:PhoneApplicationFrame" x:Key="MyFrame"></Style>`

*   打开资源选项卡（主要在窗口右侧）
*   在列表中找到 MyFrame 并单击图标

你会在设计师身上看到一个框架。

**笔记：**

（资源部分可能是：`<phone:PhoneApplicationPage.Resources>`在页面或`<Application.Resources>`App.xaml 或`<ResourceDictionary>`字典文件中）

（您可能需要添加命名空间 `xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"`）

# ruby-on-rails-3 - rails redirect_to 模拟

> ID：14278724
> 
> 赞同：0
> 
> 时间：2013-01-11T12:59:47.463
> 
> 标签：ruby-on-rails-3

我正在使用 Rails 3 编写一个服务。该服务主要提供一些 API 方法，但也有一些面向最终用户的特殊网页，界面友好——这些网页基本上是 API 的“封面”。

所以我需要做的是进行一些编码`CoverController`，然后重定向到 API 方法（不同的控制器）。这个方法需要通过调用，`POST`因为它包含一些最终用户不应该看到的敏感信息（例如访问令牌）。

据我了解HTTP标准不可能通过重定向`POST`，但我需要调用的方法只是相邻类中的另一个函数！有没有办法在`params`正确设置所有内容（等）的情况下调用它，*就好像*它是从浏览器调用的一样？还是我应该只使用`Net::HTTP::Post`并打电话给自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:33:43.983

你可以调用方法：#在控制器中

```
# action 1
def action1
  ...
  action2
end

# must be called via post
def action2
  ...
end 
```

这当然是假设 action2 可以使用传递给 action 1 的现有参数列表。否则，您也可以将其填满。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:02:10.753

我认为你的想法是错误的。Rails 3 非常好，您可以调用操作，结果取决于您调用操作的方式。

小例子：一个返回当前时间的api：

```
def gettime
  @time = new Date
  # and do all other important stuff
  respond_to do |format|
    format.json { render json:  @time }
    format.html { render 'gettime' } # renders gettime.html.erb
  end
end 
```

如果作为 api 调用，则返回一个 json 对象。如果从浏览器调用，它会返回一个 html 页面。这样您就不会重复代码，并遵守操作由用户发起或在另一个操作之后重定向到的规则。

其他开发人员也将理解您的代码，并将其准确放置在它所属的位置。

顺便说一句：没有通过使用 post 来“隐藏”合理参数之类的东西。任何浏览器都使用一个快捷方式显示此信息。

# c++ - 通过 USB 控制步进电机控制器

> ID：14278727
> 
> 赞同：3
> 
> 时间：2013-01-11T13:00:01.793
> 
> 标签：c++, linux, usb, libusb, motordriver

我正在尝试对 Gnu/Linux 中的 Trinamic [StepRocker](http://www.trinamic.com/index.php?option=com_content&view=article&id=541&Itemid=434)步进电机控制器进行一些实验。我之前通过 USB 将设备连接到 Windows 机器，并使用 Trinamic 的[专有软件](http://www.trinamic.com/index.php?option=com_content&view=article&id=303)来测试控制器是否按预期运行，并且看起来确实如此。StepRocker 的初学者手册提到了应该通过串行接口发送的某些命令，以使电机向左、向右旋转或使其停止。但是当我通过 USB 将此控制器连接到 Gnu/Linux 计算机，并想编写自己的 C++ (libusb) 程序来使电机移动时，我不太确定我的起点应该是什么。控制台应用程序（我计划编写）应该是非阻塞的。

这是发出旋转命令时正在发送的数据报和收到的响应的图像：

![在此处输入图像描述](../Images/81901cd30e900f5ebcf1ba2d31111c76.png)

我尝试编写一个简单的程序，将图片中显示的旋转值数据报提供给电机控制器：

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>

int fd1;
int wr;
int main()
{
    fd1=open("/dev/ttyACM0", O_RDWR | O_NOCTTY | O_NDELAY);
    if (fd1 == -1 )
    {
    perror("open_port: Unable to open /dev/ttyACM0");
    }
    else
    {
    fcntl(fd1, F_SETFL,0);
    printf("Port 1 has been sucessfully opened and %d is the file description\n",fd1);
    char moveMsg[9]={0x01,0x01, 0x00, 0x00, 0x00, 0x00, 0x02, 0xbc, 0xc0};
    wr = write(fd1, moveMsg, 9);
    }
    close(fd1);
    return 0;
} 
```

但这不会以任何方式改变控制器的 LED 行为（当然也不会移动电机）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:25:28.677

他们说“USB 虚拟 COM 端口驱动程序”，因此您不需要 libusb：只需像常规 RS-232 一样在您的程序中打开 /dev/USBtty0（/dev/ACM0 或您的发行版将如何创建它）并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:12:02.837

您可以使用 libusb + libftdi（然后没有虚拟串行端口）。

# module - joomla 2.5 模块翻译问题

> ID：14278728
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:04.997
> 
> 标签：module, joomla2.5, joomla-module

我正在开发 joomla 2.5.4。我无法为我的模块安装语言，请参阅我的 mod_staker.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE install SYSTEM "http://dev.joomla.org/xml/1.5/module-install.dtd">
<install version="1.5" type="module" client="site" method="upgrade">
    <name>Stalker</name>
    <author>Nick Texidor</author>
    <authorEmail>nick@texidor.com</authorEmail>
    <authorUrl>http://www.nicktexidor.com/</authorUrl>
    <creationDate>8 November 2009</creationDate>
    <copyright>Copyright (C) 2008-2009 Nick Texidor. All rights reserved.</copyright>
    <license>GNU/GPL</license>
    <version>1.1.1</version>
    <description>Displays icons for your online social networking sites.</description>

    <languages>
        <language tag="en-GB">en-GB.mod_stalker.ini</language>
    </languages>

    <files>
        <filename module="mod_stalker">mod_stalker.php</filename>
        <filename>gpl.txt</filename>
        <filename>helper.php</filename>
        <filename>index.html</filename>

        <filename>assets/index.html</filename>
        <filename>assets/css/index.html</filename>
        <filename>assets/css/stalker.css</filename>

        <filename>tmpl/default.php</filename>
        <filename>tmpl/index.html</filename>

    </files>

    <config>
        <fields name="params">
            <fieldset name="basic">

        <field name="moduleclass_sfx" type="text" default="" label="MODSUFFIX" description="MODSUFFIXDESC" />

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="iconsize" type="list" default='32' label="ICONSIZELABEL" description="ICONSIZEDESC">
        <option value='16'>16px</option>
        <option value='20'>20px</option>
        <option value='24'>24px</option>
        </field>
        <field name="digg" type="list" default='0' label="DIGGOPTLABEL" description="DIGGOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="diggname" type="text" default='' label="DIGGNAMELABEL" description="DIGGNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="diigo" type="list" default='0' label="DIIGOOPTLABEL" description="DIIGOOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="diigoname" type="text" default='' label="DIIGONAMELABEL" description="DIIGONAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="facebook" type="list" default='0' label="FACEBOOKOPTLABEL" description="FACEBOOKOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="facebookname" type="text" default='' label="FACEBOOKNAMELABEL" description="FACEBOOKNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="facebookgrp" type="list" default='0' label="FACEBOOKGRPOPTLABEL" description="FACEBOOKGRPOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="facebookgrpname" type="text" default='' label="FACEBOOKGRPNAMELABEL" description="FACEBOOKGRPNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="facebookpage" type="list" default='0' label="FACEBOOKPAGEOPTLABEL" description="FACEBOOKPAGEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="facebookpagename" type="text" default='' label="FACEBOOKPAGENAMELABEL" description="FACEBOOKPAGENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="feedburner" type="list" default='0' label="FEEDBURNEROPTLABEL" description="FEEDBURNEROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="feedburnername" type="text" default='' label="FEEDBURNERNAMELABEL" description="FEEDBURNERNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="flickr" type="list" default='0' label="FLICKROPTLABEL" description="FLICKROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="flickrname" type="text" default='' label="FLICKRNAMELABEL" description="FLICKRNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="friendfeed" type="list" default='0' label="FRIENDFEEDOPTLABEL" description="FRIENDFEEDOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="friendfeedname" type="text" default='' label="FRIENDFEEDNAMELABEL" description="FRIENDFEEDNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="friendster" type="list" default='0' label="FRIENDSTEROPTLABEL" description="FRIENDSTEROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="friendstername" type="text" default='' label="FRIENDSTERNAMELABEL" description="FRIENDSTERNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="hi5" type="list" default='0' label="HI5OPTLABEL" description="HI5OPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="hi5name" type="text" default='' label="HI5NAMELABEL" description="HI5NAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="hyves" type="list" default='0' label="HYVESOPTLABEL" description="HYVESOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="hyvesname" type="text" default='' label="HYVESNAMELABEL" description="HYVESNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="jaiku" type="list" default='0' label="JAIKUOPTLABEL" description="JAIKUOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="jaikuname" type="text" default='' label="JAIKUNAMELABEL" description="JAIKUNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="kwippy" type="list" default='0' label="KWIPPYOPTLABEL" description="KWIPPYOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="kwippyname" type="text" default='' label="KWIPPYNAMELABEL" description="KWIPPYNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="lastfm" type="list" default='0' label="LASTFMOPTLABEL" description="LASTFMOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="lastfmname" type="text" default='' label="LASTFMNAMELABEL" description="LASTFMNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="lastfmart" type="list" default='0' label="LASTFMARTOPTLABEL" description="LASTFMARTOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="lastfmartname" type="text" default='' label="LASTFMARTNAMELABEL" description="LASTFMARTNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="linkedin" type="list" default='0' label="LINKEDINOPTLABEL" description="LINKEDINOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="linkedinname" type="text" default='' label="LINKEDINNAMELABEL" description="LINKEDINNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="linkedingrp" type="list" default='0' label="LINKEDINGRPOPTLABEL" description="LINKEDINGRPOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="linkedingrpname" type="text" default='' label="LINKEDINGRPNAMELABEL" description="LINKEDINGRPNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="meetup" type="list" default='0' label="MEETUPOPTLABEL" description="MEETUPOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="meetupname" type="text" default='' label="MEETUPNAMELABEL" description="MEETUPNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="metacafe" type="list" default='0' label="METACAFEOPTLABEL" description="METACAFEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="metacafename" type="text" default='' label="METACAFENAMELABEL" description="METACAFENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="misterwong" type="list" default='0' label="MISTERWONGOPTLABEL" description="MISTERWONGOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="misterwongname" type="text" default='' label="MISTERWONGNAMELABEL" description="MISTERONGNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="myspace" type="list" default='0' label="MYSPACEOPTLABEL" description="MYSPACEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="myspacename" type="text" default='' label="MYSPACENAMELABEL" description="MYSPACENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="netvibes" type="list" default='0' label="NETVIBESOPTLABEL" description="NETVIBESOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="netvibesname" type="text" default='' label="NETVIBESNAMELABEL" description="NETVIBESNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="newsvine" type="list" default='0' label="NEWSVINEOPTLABEL" description="NEWSVINEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="newsvinename" type="text" default='' label="NEWSVINENAMELABEL" description="NEWSVINENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="ning" type="list" default='0' label="NINGOPTLABEL" description="NINGOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="ningname" type="text" default='' label="NINGNAMELABEL" description="NINGNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="orkut" type="list" default='0' label="ORKUTOPTLABEL" description="ORKUTOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="orkutname" type="text" default='' label="ORKUTNAMELABEL" description="ORKUTNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="photobucket" type="list" default='0' label="PHOTOBUCKETOPTLABEL" description="PHOTOBUCKETOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="photobucketname" type="text" default='' label="PHOTOBUCKETNAMELABEL" description="PHOTOBUCKETNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="picasa" type="list" default='0' label="PICASAOPTLABEL" description="PICASAOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="picasaname" type="text" default='' label="PICASANAMELABEL" description="PICASANAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="plurk" type="list" default='0' label="PLURKOPTLABEL" description="PLURKOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="plurkname" type="text" default='' label="PLURKNAMELABEL" description="PLURKNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="qik" type="list" default='0' label="QIKOPTLABEL" description="QIKOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="qikname" type="text" default='' label="QIKNAMELABEL" description="QIKNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="reader" type="list" default='0' label="READEROPTLABEL" description="READEROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="readername" type="text" default='' label="READERNAMELABEL" description="READERNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="reddit" type="list" default='0' label="REDDITOPTLABEL" description="REDDITOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="redditname" type="text" default='' label="REDDITNAMELABEL" description="REDDITNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="simpy" type="list" default='0' label="SIMPYOPTLABEL" description="SIMPYOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="simpyname" type="text" default='' label="SIMPYNAMELABEL" description="SIMPYNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="stumbleupon" type="list" default='0' label="STUMBLEUPONOPTLABEL" description="STUMBLEUPONOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="stumbleuponname" type="text" default='' label="STUMBLEUPONNAMELABEL" description="STUMBLEUPONNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="technorati" type="list" default='0' label="TECHNORATIOPTLABEL" description="TECHNORATIOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="technoratiname" type="text" default='' label="TECHNORATINAMELABEL" description="TECHNORATINAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="tumblr" type="list" default='0' label="TUMBLROPTLABEL" description="TUMBLROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="tumblrname" type="text" default='' label="TUMBLRNAMELABEL" description="TUMBLRNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="twitter" type="list" default='0' label="TWITTEROPTLABEL" description="TWITTEROPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="twittername" type="text" default='' label="TWITTERNAMELABEL" description="TWITTERNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="vox" type="list" default='0' label="VOXOPTLABEL" description="VOXOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="voxname" type="text" default='' label="VOXNAMELABEL" description="VOXNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="vimeo" type="list" default='0' label="VIMEOOPTLABEL" description="VIMEOOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="vimeoname" type="text" default='' label="VIMEONAMELABEL" description="VIMEONAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="xbox" type="list" default='0' label="XBOXLIVEOPTLABEL" description="XBOXLIVEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="xboxname" type="text" default='' label="XBOXLIVENAMELABEL" description="XBOXLIVENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="xing" type="list" default='0' label="XINGOPTLABEL" description="XINGOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="xingname" type="text" default='' label="XINGNAMELABEL" description="XINGNAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="youtube" type="list" default='0' label="YOUTUBEOPTLABEL" description="YOUTUBEOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="youtubename" type="text" default='' label="YOUTUBENAMELABEL" description="YOUTUBENAMEDESC"></field>

        <field name="@spacer" type="spacer" default="" label="" description=""></field>

        <field name="extlink" type="list" default='0' label="EXTLINKOPTLABEL" description="EXTLINKOPTDESC">
        <option value='0'>No</option>
        <option value='1'>Yes</option>
        </field>
        <field name="extlinkname" type="text" default='' label="EXTLINKNAMELABEL" description="EXTLINKNAMEDESC"></field>

        <field name="cache" type="list" default="1" label="CACHE" description="CACHEDESC">
            <option value="1">USEGLOBAL</option>
            <option value="0">NOCACHE</option>
        </field>
        <field name="cache_time" type="text" default="900" label="CACHETIME" description="CACHETIMEDESC" />
      </fieldset>
    </fields>
    </config>
</install> 
```

这是我的语言文件`en-GB.mod_stalker.ini`

```
MOD_STALKER=mod_stalker
BEBOOPTLABEL=Enable Bebo
BEBOOPTDESC=Select YES to display a link to Bebo
BEBONAMELABEL=Bebo username
BEBONAMEDESC=Enter your Bebo username

FRIENDSTEROPTLABEL=Enable Friendster
FRIENDSTEROPTDESC=Select YES to display a link to Friendster
FRIENDSTERNAMELABEL=Friendster Id
FRIENDSTERNAMEDESC=Enter your Friendster Id

HI5OPTLABEL=Enable Hi5
HI5OPTDESC=Select YES to display a link to Hi5
HI5NAMELABEL=Hi5 Username
HI5NAMEDESC=Enter your Hi5 username

HYVESOPTLABEL=Enable Hyves
HYVESOPTDESC=Select YES to display a link to Hyves
HYVESNAMELABEL=Hyves Username
HYVESNAMEDESC=Enter your Hyves username

JAIKUOPTLABEL=Enable Jaiku
JAIKUOPTDESC=Select YES to display a link to Jaiku
JAIKUNAMELABEL=Jaiku Username
JAIKUNAMEDESC=Enter your Jaiku username

KWIPPYOPTLABEL=Enable Kwippy
KWIPPYOPTDESC=Select YES to display a link to Kwippy
KWIPPYNAMELABEL=Kwippy Username
KWIPPYNAMEDESC=Enter your Kwippy username

LASTFMOPTLABEL=Enable Last.fm
LASTFMOPTDESC=Select YES to display a link to Last.fm
LASTFMNAMELABEL=Last.fm Username
LASTFMNAMEDESC=Enter your Last.fm username

LASTFMARTOPTLABEL=Enable Last.fm Artist
LASTFMARTOPTDESC=Select YES to display a link to Last.fm Artist
LASTFMARTNAMELABEL=Last.fm Artist Name
LASTFMARTNAMEDESC=Enter your Last.fm Artist Name

LINKEDINOPTLABEL=Enable LinkedIn
LINKEDINOPTDESC=Select YES to display a link to LinkedIn
LINKEDINNAMELABEL=LinkedIn Username
LINKEDINNAMEDESC=Enter your LinkedIn username

LINKEDINGRPOPTLABEL=Enable LinkedIn Group
LINKEDINGRPOPTDESC=Select YES to display a link to a LinkedIn Group
LINKEDINGRPNAMELABEL=LinkedIn Group Id
LINKEDINGRPNAMEDESC=Enter your LinkedIn Group Id

MEETUPOPTLABEL=Enable MeetUp
MEETUPOPTDESC=Select YES to display a link to MeetUp
MEETUPNAMELABEL=MeetUp Username
MEETUPNAMEDESC=Enter your MeetUp username

METACAFEOPTLABEL=Enable Metacafe
METACAFEOPTDESC=Select YES to display a link to Metacafe
METACAFENAMELABEL=Metacafe Username
METACAFENAMEDESC=Enter your Metacafe username

MISTERWONGOPTLABEL=Enable MisterWong
MISTERWONGOPTDESC=Select YES to display a link to MisterWong
MISTERWONGNAMELABEL=MisterWong Username
MISTERWONGNAMEDESC=Enter your MisterWong username

MYSPACEOPTLABEL=Enable MySpace
MYSPACEOPTDESC=Select YES to display a link to MySpace
MYSPACENAMELABEL=MySpace Username
MYSPACENAMEDESC=Enter your MySpace username

NETVIBESOPTLABEL=Enable Netvibes
NETVIBESOPTDESC=Select YES to display a link to Netvibes
NETVIBESNAMELABEL=Netvibes Username
NETVIBESNAMEDESC=Enter your Netvibes username

NEWSVINEOPTLABEL=Enable Newsvines
NEWSVINEOPTDESC=Select YES to display a link to Newsvine
NEWSVINENAMELABEL=Newsvine Username
NEWSVINENAMEDESC=Enter your Newsvine username

NINGOPTLABEL=Enable Ning
NINGOPTDESC=Select YES to display a link to Ning
NINGNAMELABEL=Ning Username
NINGNAMEDESC=Enter your Ning username

ORKUTOPTLABEL=Enable Orkut
ORKUTOPTDESC=Select YES to display a link to Orkut
ORKUTNAMELABEL=Orkut Userid
ORKUTNAMEDESC=Enter your Orkut userid

PHOTOBUCKETOPTLABEL=Enable Photobucket
PHOTOBUCKETOPTDESC=Select YES to display a link to Photobucket
PHOTOBUCKETNAMELABEL=Photobucket Username
PHOTOBUCKETNAMEDESC=Enter your Photobucket username

PICASAOPTLABEL=Enable Picasa
PICASAOPTDESC=Select YES to display a link to Picasa
PICASANAMELABEL=Picasa Username
PICASANAMEDESC=Enter your Picasa username

PLURKOPTLABEL=Enable Plurk
PLURKOPTDESC=Select YES to display a link to Plurk
PLURKNAMELABEL=Plurk Username
PLURKNAMEDESC=Enter your Plurk username

QIKOPTLABEL=Enable Qik
QIKOPTDESC=Select YES to display a link to Qik
QIKNAMELABEL=Qik Username
QIKNAMEDESC=Enter your Qik username

READEROPTLABEL=Enable Google Reader
READEROPTDESC=Select YES to display a link to Google Reader
READERNAMELABEL=Google Reader Id
READERNAMEDESC=Enter your Google Reader Id.

REDDITOPTLABEL=Enable Reddit
REDDITOPTDESC=Select YES to display a link to Reddit
REDDITNAMELABEL=Reddit Username
REDDITNAMEDESC=Enter your Reddit username

SIMPYOPTLABEL=Enable Simpy
SIMPYOPTDESC=Select YES to display a link to Simpy
SIMPYNAMELABEL=Simpy Username
SIMPYNAMEDESC=Enter your Simpy username

STUMBLEUPONOPTLABEL=Enable StumbleUpon
STUMBLEUPONOPTDESC=Select YES to display a link to StumbleUpon
STUMBLEUPONNAMELABEL=StumbleUpon Username
STUMBLEUPONNAMEDESC=Enter your StumbleUpon username

TECHNORATIOPTLABEL=Enable Technorati
TECHNORATIOPTDESC=Select YES to display a link to Technorati
TECHNORATINAMELABEL=Technorati Username
TECHNORATINAMEDESC=Enter your Technorati username

TUMBLROPTLABEL=Enable Tumblr
TUMBLROPTDESC=Select YES to display a link to Tumblr
TUMBLRNAMELABEL=Tumblr Username
TUMBLRNAMEDESC=Enter your Tumblr username

TWITTEROPTLABEL=Enable Twitter
TWITTEROPTDESC=Select YES to display a link to Twitter
TWITTERNAMELABEL=Twitter Username
TWITTERNAMEDESC=Enter your Twitter username

VIMEOOPTLABEL=Enable Vimeo
VIMEOOPTDESC=Select YES to display a link to Vimeo
VIMEONAMELABEL=Vimeo Username
VIMEONAMEDESC=Enter your Vimeo username

VOXOPTLABEL=Enable Vox
VOXOPTDESC=Select YES to display a link to Vox
VOXNAMELABEL=Vox Username
VOXNAMEDESC=Enter your Vox username

XBOXLIVEOPTLABEL=Enable Xbox Live
XBOXLIVEOPTDESC=Select YES to display a link to your Xbox Live Profile
XBOXLIVENAMELABEL=Xbox Live Username
XBOXLIVENAMEDESC=Enter your Xbox Live Gamer Tag

XINGOPTLABEL=Enable Xing
XINGOPTDESC=Select YES to display a link to your Xing Profile
XINGNAMELABEL=Xing Username
XINGNAMEDESC=Enter your Xing username

YOUTUBEOPTLABEL=Enable YouTube
YOUTUBEOPTDESC=Select YES to display a link to YouTube
YOUTUBENAMELABEL=YouTube Username
YOUTUBENAMEDESC=Enter your YouTube username

EXTLINKOPTLABEL=Enable External Link
EXTLINKOPTDESC=Select YES to display a link to an External Site
EXTLINKNAMELABEL=External Link URL
EXTLINKNAMEDESC=Enter the URL of the External Link

CACHE=Caching
CACHEDESC=Select whether to cache the content of this module.
USEGLOBAL=Use global
NOCACHE=No caching
CACHETIME=Cache Time
CACHETIMEDESC=The time before the module is recached. 
```

它无法为配置翻译标签，它们在语言文件模块右侧面板中定义，但仍显示为 like`CACHETIMEDESC`而不是`The time before the module is recached.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:59:40.663

如果您启用翻译调试，请检查您的语言文件是否正确加载。还是 joomla 试图从另一个文件夹加载它？

另一件事，但我认为这不是您的翻译问题的原因是您为**Joomla 1.5指定了一个****dtd** ，但您的 xml 的内容是 1.6 样式和模块 2.5 的目标。任何 XML 验证器都应该向您显示一些错误。

# ruby-on-rails - 使用 Rails 跨多个样式表导入相同的 Compass Sprite

> ID：14278729
> 
> 赞同：1
> 
> 时间：2013-01-11T13:00:07.990
> 
> 标签：ruby-on-rails, import, include, compass-sass, css-sprites

有时，我们同时拥有使用*相同精灵图像*声明的*常规*文件和*部分* `.sass`文件。这很容易**独立**使用，因为您可以在主文件和每个后续*部分*文件中使用。`@include`***`sass`**`@import icons/*.png``@include icons-sprite`*

 **问题是**`sass-rails`**你不能这样做。

Rails 管道似乎以无法相互共享变量的方式编译 sass 文件。因此，精灵的`@import`声明仅在声明它的文件范围内可用。

尽管`@import icons/*.png`在任何需要它的地方都会导致 Rails 为相同的图像生成不同的覆盖 sprite 文件，从而导致最终样式表在其`background-image`声明中丢失文件名。

我一直在通过`sass`在它们都需要相同的导入声明时跳过部分来解决这个问题，将它们混合到一个单独的大样式表文件中，这不是一种理想的方法，因为它会混淆代码组织、代码维护和关注点分离。

*想知道是否有更好的方法来解决这个问题，如果有人可以分享......*

谢谢你。**

# python - 使用大数据库初始信息测试应用程序

> ID：14278730
> 
> 赞同：1
> 
> 时间：2013-01-11T13:00:09.270
> 
> 标签：python, database, django, migration

目前我有大量初始数据的大型应用程序。基本上，我有 postgresql 转储文件，我应该应用一些迁移来获得“好的数据库”。并且应用程序几乎没有固定装置来重新创建同步/迁移的初始数据。

是的，这是一个很大的痛苦......头。

无论如何，Django 复制数据库来执行测试，一切都应该正常工作。但问题是——这需要很长时间。

我正在考虑创建自定义测试运行器来重现这些操作，但我想问你！你能提出什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:26:42.927

有大量数据的单元测试有很多不错的答案

我的最爱有这两个

这是我[用 Django 模型进行的单元测试，涉及到很多关系](https://stackoverflow.com/questions/11874071/unit-testing-with-django-models-and-a-lot-of-relations-involved/11960345#11960345)

和这个朋友[的 在 Django 中测试“不同层”的最佳实践是什么？](https://stackoverflow.com/questions/11543117/what-are-the-best-practices-for-testing-different-layers-in-django/)

您可以使用像[FactoryBoy](https://github.com/dnerdy/factory_boy)这样的库来创建任意数量的模型实例，并使用不同的特性来测试多个案例。[这](https://factoryboy.readthedocs.org/en/latest/)是 FactoryBoy 的文档页面

# 聊天后编辑：

在这种情况下，定义自己的测试运行器似乎是要走的路。

[https://docs.djangoproject.com/en/1.2/topics/testing/#defining-a-test-runner](https://docs.djangoproject.com/en/1.2/topics/testing/#defining-a-test-runner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T19:23:55.080

尝试使用[Mixer](https://github.com/klen/mixer)：

```
from mixer.backend.django import mixer

mixer.blend(MyModel) 
```

# python - 主窗口中的 KeyEvent (PyQt4)

> ID：14278735
> 
> 赞同：5
> 
> 时间：2013-01-11T13:00:19.367
> 
> 标签：python, qt, pyqt, pyqt4

我正在尝试使用 PyQt4 构建一个 GUI，并使用箭头键控制一些操作。尽管如此，我还是没有得到击键。

这必须是一个简单的问题，但我是新手。因此，任何帮助将不胜感激。谢谢！

```
import sys
from PyQt4 import QtCore, QtGui

class Ui_MainWindow(object):
   def setupUi(self, MainWindow):
     MainWindow.setObjectName(_fromUtf8("MainWindow"))
     MainWindow.resize(910, 500)
     self.centralwidget = QtGui.QWidget(MainWindow)
     self.centralwidget.setObjectName(_fromUtf8("centralwidget"))  

     MainWindow.setCentralWidget(self.centralwidget)
     self.menubar = QtGui.QMenuBar(MainWindow)
     self.menubar.setGeometry(QtCore.QRect(0, 0, 240, 22))
     self.menubar.setObjectName(_fromUtf8("menubar"))
     MainWindow.setMenuBar(self.menubar)
     self.statusbar = QtGui.QStatusBar(MainWindow)
     self.statusbar.setObjectName(_fromUtf8("statusbar"))
     MainWindow.setStatusBar(self.statusbar)

  def keyPressEvent(self, event):
     key = event.key()
     print(key)

     if key == QtCore.Qt.Key_Left:
        print('Left Arrow Pressed')

if __name__=='__main__':
  app = QtGui.QApplication(sys.argv)
  MainWindow = QtGui.QMainWindow()
  ui = Ui_MainWindow()
  ui.setupUi(MainWindow)

  MainWindow.show()
  sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T13:58:25.253

`keyPressEvent`应该在`QWidget`. 在这种情况下， 的子类`QWidget`。

你不应该把它放在一个 ui 类中。

```
class MyWindow(QtGui.QMainWindow):
    def keyPressEvent(...
        ...

if __name__=='__main__':
    ...
    window=MyWindow()
    ...
    sys.exit(app.exec_())  # and don't forget to run the mainloop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-19T08:07:37.147

我遇到了类似的问题，但我需要不更改 .ui 文件中生成的 python 脚本的结构。

因此，一个简单的方法是在 def setupUI 中添加以下内容

```
MainWindow.keyPressEvent = self.newOnkeyPressEvent 
```

然后在 Ui_MainWindow 类中创建自己的按键功能

```
def newOnkeyPressEvent(self,e):
if e.key() == QtCore.Qt.Key_Escape:
    print "User has pushed escape" 
```

# oracle-adf - 使用 Oracle ADF 使用 EJB、JPA 和 JavaServer Faces 构建 Web 应用程序

> ID：14278736
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:21.713
> 
> 标签：oracle-adf

我下载并安装了 JDeveloper 11.1.2.3.0（我没有许可证。我只想使用 ADF 做演示应用程序，我没有将它用于商业目的）

然后我完成了以下 Oracle 教程（使用 EJB、JPA 和 JavaServer Faces 构建 Web 应用程序）： [http ://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_51/jdtut_11r2_51_2.html](http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_51/jdtut_11r2_51_2.html)

在第 3 步：运行并测试页面时，我在 JDeveloper 日志中得到以下信息：

```
<ViewHandlerImpl> <_checkTimestamp> Apache Trinidad is running with time-stamp checking enabled. This should not be used in a production environment. See the org.apache.myfaces.trinidad.CHECK_FILE_MODIFICATION property in WEB-INF/web.xml

<11.01.2013 18:25:26 ALMT> <Notice> <EclipseLink> <BEA-2005000> <2013-01-11 18:25:26.552--ServerSession(14553247)--EclipseLink, version: Eclipse Persistence Services - 2.1.3.v20110304-r9073> 
<11.01.2013 18:25:26 ALMT> <Notice> <EclipseLink> <BEA-2005000> <2013-01-11 18:25:26.557--ServerSession(14553247)--Server: 10.3.5.0> 
<MessageFactory> <getMessage> 
java.lang.IllegalStateException
    at oracle.jbo.uicli.binding.JUSearchBindingCustomizer.getViewCriteria(JUSearchBindingCustomizer.java:1980)
    at oracle.adfinternal.view.faces.model.binding.FacesCtrlSearchBinding$QueryDescriptorImpl.getFilterCriteria(FacesCtrlSearchBinding.java:1325)
    at oracle.adfinternal.view.faces.renderkit.rich.table.BaseColumnRenderer._getFilterCriteria(BaseColumnRenderer.java:1871)
    at oracle.adfinternal.view.faces.renderkit.rich.table.BaseColumnRenderer._renderFilterField(BaseColumnRenderer.java:1755)
    at oracle.adfinternal.view.faces.renderkit.rich.table.BaseColumnRenderer.renderColumnFilterCell(BaseColumnRenderer.java:1206)
    at oracle.adfinternal.view.faces.renderkit.rich.table.BaseColumnRenderer.encodeAll(BaseColumnRenderer.java:163)
    at oracle.adf.view.rich.render.RichRenderer.encodeAll(RichRenderer.java:1452)
    at org.apache.myfaces.trinidad.render.CoreRenderer.encodeEnd(CoreRenderer.java:511)
    at org.apache.myfaces.trinidad.component.UIXComponentBase.encodeEnd(UIXComponentBase.java:923)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1681)
... 
```

这是我的 web.xml（org.apache.myfaces.trinidad.CHECK_FILE_MODIFICATION 部分）

```
 <context-param>
    <description>If this parameter is true, there will be an automatic check of the modification date of your JSPs, and saved state will be discarded when JSP's change. It will also automatically check if your skinning css files have changed without you having to restart the server. This makes development easier, but adds overhead. For this reason this parameter should be set to false when your application is deployed.</description>
    <param-name>org.apache.myfaces.trinidad.CHECK_FILE_MODIFICATION</param-name>
    <param-value>false</param-value>
  </context-param> 
```

值为假。我试图切换到 true，但它仍然给我同样的错误。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:12:47.597

您正在查看错误的消息。问题是这个 - oracle.jbo.uicli.binding.JUSearchBindingCustomizer.getViewCriteria(JUSearchBindingCustomizer.java:1980) 的 java.lang.IllegalStateException

不完全确定问题是什么，如果您澄清在教程的哪个阶段开始出现此错误，可能会有所帮助。

# java - 如何在 serversocket 上接受两种客户端？

> ID：14278740
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:40.003
> 
> 标签：java, sockets, serversocket

我正在开发一个服务器应用程序，它将基本上将命令和消息从一个客户端转发到另一个客户端。不过，这些客户端是两个不同的应用程序。一个是 Android 设备上的应用程序，用作另一个的“遥控器”。

当启动这些应用程序中的任何一个时，它将通过套接字注册到在线服务器。现在，我的问题是：我的服务器如何能够知道它在处理什么样的客户端`ServerSocket.accept()`？

我提出了两种可能的解决方案：

1：在两个不同的端口上打开两个 ServerSocket。一个应用程序连接到一个端口，另一个应用程序连接到另一个。

2：连接后，客户端发送一个字符串，其中包含他们是什么客户端的标识符。

不过，可能有比这两个更多（更好）的解决方案，所以我想知道你们喜欢做什么。我相当肯定我不是第一个陷入这种困境的人。:)

# html - 如何将左侧 12 像素的空间留白并从 CSS 中的内容中删除 12 像素？

> ID：14278741
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:43.563
> 
> 标签：html, css

我正在尝试制作一个距左侧有 12px 边距的页面。我想将背景灰色设置为 12px（不管这个）。

在左侧设置 12px 左边距后，我想将所有其他屏幕尺寸提供给容器，我该如何提供它。

见 jsfiddle [http://jsfiddle.net/7vzSQ/](http://jsfiddle.net/7vzSQ/)

我想要的是：假设将来如果我给我的页面一个背景并且左边的 12px 是白色边距，那么有没有人知道一个技巧，以便 .container 将获得所有屏幕尺寸（除了我通过左边距设置的 12px 边距）

```
<div class="container">

    <header>
        <hgroup>
            <div class="logo">
                test
            </div>
        </hgroup>
    </header>
    <div class="content">
        <div class="logo">

        </div>
    </div>
    <footer>

    </footer>
</div> 
```

有人检查[http://jsfiddle.net/7vzSQ/7/embedded/result/](http://jsfiddle.net/7vzSQ/7/embedded/result/)我已经更新了三个背景，但不知道为什么它没有出现在页面中。

我这样做的主要目的是我可以为 .container 提供所有宽度（100% -12px）。如果我给了 100% 它是行不通的。我试过 css3 的 calc 功能没用。我尝试 calc(100%+ 12px) 工作，但 calc(100% - 12px) 不工作（带减号）。

有没有人猜得到它的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:18:54.090

如果你想变得超酷，你可以使用[calc](https://developer.mozilla.org/en-US/docs/CSS/calc)：

```
#container{
  margin-left:12px;
  width: 100%;              /* fallback for non-supporters, produces scrollbar */
  width:    -moz-calc(100% -12px); 
  width: -webkit-calc(100% -12px);
  width:         calc(100% -12px); 
} 
```

然而，这将取消所有 IE 用户直到版本 8 和那些可怜的 Opera 用户的资格：-D（请参阅 MDN-Compat 列表或**[caniuse](http://caniuse.com/#search=calc)**）。

如果你想成为老派，你可以使用绝对定位（遇到溢出问题）

```
#container{
    position:absolute;
    left:12px;right:0;
} 
```

还有一点老派你使用包装元素：

```
#outerwrapper{
     padding-left:12px;
}
#container{
     width:100%;
} 
```

带有标记：

```
<div id="outerwrapper">
   <div id="container">
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:08:42.767

试试这个

```
 <style>
body{margin: 0px; padding: 0px;}
#cover
{
    width: 100%;
    height: 200px;

    padding: 0px 0px 0px 12px;
    margin:0px;
}
#inner{width:100%; height: 200px; margin: 0px; padding: 0px; background: #bababa; }

</style>

<div id="cover">  
    <div id="inner">

    </div>
</div> 
```

它可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:12:25.523

Rupali 和 Christoph，感谢你们在这个问题上帮助我。我终于为我的问题找到了解决方案。

```
<div class="topline">

</div>
    <div class="bgs">
        <div class="bg1 bg"></div>
        <div class="bg2 bg"></div>
        <div class="bg3 bg"></div>
    </div>
<div class="container">

    <header>
        <hgroup>
            <div class="logo">
                <h1>Blah blah</h1>
                <div class="desc">
                lorem ipsum dollar sit amet
                </div>
            </div>
        </hgroup>
    </header>
    <div class="content">

    </div>
    <footer>

    </footer>
</div>

.bgs {
  float: left;
}
.bgs .bg {
  width: 9px;
  height: 100%;
  float: left;
  margin-right: 0px;
}
.bgs .bg1 {
  background: #0068B3;
}
.bgs .bg2 {
  background: #65B561;
}
.bgs .bg3 {
  background: #F99D32;
}
.container {
  margin-left: 50px;
  float: left;
  position: absolute;
} 
```

这将使它对我有用。

# php - 使用会话测试应用程序

> ID：14278742
> 
> 赞同：2
> 
> 时间：2013-01-11T13:00:45.173
> 
> 标签：php, laravel

我正在使用即将推出的 Laravel 4 框架构建一个应用程序。我想为它编写单元测试。该应用程序使用会话。因此，我必须重新创建用户状态以正确测试所有内容。

这是我想做的事情：

```
User::login($user); // updates the session
$crawler = $this->client->request('GET', 'http://myapp.dev/');
$this->assertTrue($this->client->getResponse()->isOk());
$this->assertCount(1, $crawler->filter("#logout-button")); 
```

但是，`$this->client->request`会创建一个新请求，因此会话不会被传播。

该会话在测试中可用。但是当您使用 $this->client->request('GET', 'something') 时，该请求的会话不再存在，因为它使用了数组驱动程序。我可以尝试使用文件驱动程序，但我将如何向请求发送自定义会话 ID？

**我该如何解决这个问题？我可以通过假 cookie 传递会话 ID 吗？或者以某种方式传递会话对象？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:53:41.880

使用`$this->be($user)`而不是`Auth::login`. 在此处查看早期 L4 文档：[https ://github.com/laravel/docs/blob/master/testing.md](https://github.com/laravel/docs/blob/master/testing.md)

# html - Razorenginen 未加载视图

> ID：14278743
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:45.420
> 
> 标签：html, razor, asp.net-mvc-4

我正在使用 razorengine 发送电子邮件。senden不是问题，只是内容在内容中只显示为/da/Property/Property/Mail/TellAFriendTextMail。

```
private void SendTellAFriendMail(NotificationTellAFriend mailData)
    {

      string textmail = this.GetMailAsText(mailData);
      string htmlmail = this.GetMailAsHTML(mailData);

      MailAddress from = new MailAddress("robot@mail.com", mailData.SenderName);
      MailAddress to = new MailAddress(mailData.receiverMail, mailData.SenderName);

      using (AlternateView htmlview = this.CreateView(htmlmail, "text/html"))
      using (AlternateView textview = this.CreateView(textmail, "text/plain"))
      using (MailMessage email = new MailMessage(from, to))
      {
        email.Subject = string.Format(CultureInfo.InvariantCulture, Resources.Resources._MailSubject, mailData.SenderName);
        email.AlternateViews.Add(textview);
        email.AlternateViews.Add(htmlview);
        email.ReplyToList.Add(new MailAddress(mailData.receiverMail, mailData.SenderName));

        using (SmtpClient client = new SmtpClient())
        {
          client.Send(email);
        }

      }
    }

 private string GetMailAsHTML(NotificationTellAFriend mailData)
    {
      return Razor.Parse(Url.Action("/Property/Mail/TellAFriendTextMail"), mailData);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:54:36.603

该`Razor.Parse`方法的第一个参数不是 url，而是您要解析的实际 Razor 内容。所以：

```
private string GetMailAsHTML(NotificationTellAFriend mailData)
{
    var razorTemplateFile = Server.MapPath("~/Property/Mail/TellAFriendTextMail.cshtml");
    var razorTemplate = File.ReadAllText(razorTemplateFile);
    return Razor.Parse(razorTemplate, mailData);
} 
```

# .net - 如何生成 .NET Framework 的完全限定类名的完整列表？

> ID：14278745
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:47.480
> 
> 标签：.net

我正在学习 .NET Framework，是 MS 开发的初学者，我想要一个包含 .NET Framework 的每个完全限定类名的文本文件，以便当我对某些可用功能感到“好奇”或不是，在哪个命名空间中，我可以“grep”这个文本文件并查看一下。

可能的方法是，例如使用 Python 脚本来爬取 MSDN 文档页面、遍历本地文档文件、遍历非常 .NET 安装的文件，或者可能对本身包含此列表的某些页面进行文本处理。

感谢您的任何提示！

# c# - 出现错误：无法从“对象”转换为“字符串”

> ID：14278747
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:00:48.417
> 
> 标签：c#, asp.net

我有以下小功能：

```
public Image AddImage(Stream stream)
{
    return AddImage(stream as object);
} 
```

我总是收到错误`Can not convert from 'object' to 'string'`

`Stream`是类型`System.IO.Stream`

怎么了？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:14:18.417

从您的更新到问题，您有两个`AddImage`. 一个接受 a `Stream`，一个接受 a `string`。

您正在尝试调用`AddImage(object)`，但没有匹配的重载。编译器告诉您不能将对象发送到`AddImage(string blah)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:03:38.947

你为什么不只创建一个函数

```
public Image AddImage(Stream stream, string filename)
    {
        string contentType = "";
        Image image; 

        // The extension this file has will be taken to be its format.
        switch (Path.GetExtension(filename))
        {
            case ".tiff": contentType = "image/tif"; break;
            case ".tif": contentType = "image/tif"; break;
            case ".png": contentType = "image/png"; break;
            case ".bmp": contentType = "image/png"; break;
            case ".gif": contentType = "image/gif"; break;
            case ".jpg": contentType = "image/jpg"; break;
            case ".jpeg": contentType = "image/jpeg"; break;
            default: contentType = "image/jpg"; break;
        }

        //What you do in the third function;

       return image;
    } 
```

# model-view-controller - 在 MVCArray 上使用“Heading_changed”

> ID：14278748
> 
> 赞同：0
> 
> 时间：2013-01-11T13:00:52.193
> 
> 标签：model-view-controller, google-maps-api-3

怎么会，我正在努力研究如何改变下面的代码来处理“Heading_change”而不是“Click”。有没有人管理过这个？即使没有鼠标点击，它仍然是一个（事件）吗？

```
google.maps.event.addListener(map, 'click', addLatLng);

/**
 * Handles click (or other) events on a map, and adds a new point to the Polyline.
 * @param {MouseEvent} mouseEvent
 */
    function addLatLng(event) {

        var path = flightPath.getPath();

  // Because path is an MVCArray, we can simply append a new coordinate
  // and it will automatically appear
        path.push(event.latLng);

  // Add a new marker at the new plotted point on the polyline.
        var marker = new google.maps.Marker({
        position: event.latLng,
        title: '#' + path.getLength(),
        map: map
        });alert("Done");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:38:51.373

简单地改变

```
google.maps.event.addListener(map, 'click', addLatLng); 
```

至

```
google.maps.event.addListener(map, 'heading_changed', addLatLng); 
```

但是，heading_changed 事件没有与之关联的 MouseEvent，即您不能传入事件对象来获取事件发生位置的 latLng，因为该 `heading_changed`事件没有与其关联的位置。所以你需要重新考虑你想让你的函数做什么。

# ruby-on-rails-3 - Rails 3 应用中社交分享按钮的实现

> ID：14278752
> 
> 赞同：2
> 
> 时间：2013-01-11T13:01:04.797
> 
> 标签：ruby-on-rails-3

在我的 Web 应用程序中，我使用 rails 3 代码生成我希望在各种社交媒体上共享的链接。现在我找到了一个简单的解决方案，而无需使用“OmniAuth”来执行此操作。网站在[这里](https://www.addthis.com)

现在，如果您登录，您将看到这样的代码。

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50effbad1fc26ade"></script>
<!-- AddThis Button END --> 
```

所以我将以下代码添加到我的网站。所以它工作得很好。但是在登录到提供的任何这些选项后，我发现它实际上是在复制我的应用程序的名称（没关系），然后它也在复制我的页面中的链接，该链接在我的剪贴板中自动可用。但问题是它在我生成的链接之前添加了一些额外的信息。例如链接变为：

```
http://localhost:3000/linkbunches/4vlvmm#.UPALKv3f-cw.gmail 
```

而它应该像

```
http://localhost:3000/linkbunches/4vlvmm 
```

所以任何人都知道如何解决这个问题，因为我在他们的网站上没有找到任何东西来解决这个问题。如果有人可以建议任何替代解决方案来实现此功能，那就太好了。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:31:54.397

这是由 addthis 添加以跟踪您的推荐流量并为您提供分析（如果您愿意）。

如果您正在寻找一些没有跟踪的东西，请尝试[shareaholic](http://shareaholic.com/)、[loginradius](http://www.loginradius.com)和其他服务。

# vim - Vim - 如何将光标自动定位在第一个文件或我来自（辅助）NerdTreeBuffer 的文件上？

> ID：14278754
> 
> 赞同：2
> 
> 时间：2013-01-11T13:01:04.660
> 
> 标签：vim, nerdtree

我还没有弄清楚如何通过`:ex .`（NERDTreeHijackNetrw = 1）将光标定位在与NerdTree缓冲区openend中的第一个文件条目相对应的第四/第五行。

我的 .vimrc 中的以下行不起作用：

```
autocmd BufEnter * silent! if (exists("b:NERDTreeType") && b:NERDTreeType == "secondary") | <missing command> | endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:39:11.957

我一直在尝试多种方式，但问题是所有 NERDTrees 内部方法都是私有的（它们是在它们的前面定义的`s:`，因此很难重用它们），而且挂钩 BufEnter 事件是不是很有用，因为当该事件被触发时，NERDTree 似乎还没有完全初始化。

目前，我认为这将是最好的解决方案：

```
fun! NewTreeOpen()
    NERDTreeFind
    wincmd o
    let g:NERDTreeQuitOnOpen=1
endfun 
```

这是做什么的：

*   打开一个新的 NERDTree 侧边栏窗口，并选择您当前的文件
*   使 NERDTree 窗口成为唯一的窗口
*   告诉 NERDTree 在您选择文件后再次关闭（全尺寸）侧边栏

我希望这已经足够好了。否则我认为您应该向 NERDTree 的作者提出功能请求，询问他是否可以添加此内容。

# resharper - Jasmine + Pahtom.js + ReSharper：执行后测试会话不会停止

> ID：14278758
> 
> 赞同：3
> 
> 时间：2013-01-11T13:01:12.873
> 
> 标签：resharper, jasmine, phantomjs, resharper-7.1

我使用 Jasmine 编写我的 JS 测试，然后在 ReSharper (7.1) 上使用 Phantom.js (1.8.1) 执行

一切运行顺利，除了 ReSharper Testrunner 的测试会话在所有单元测试运行后没有停止。结果是每次我运行一个新的单元测试时，它都会打开另一个单元测试会话，并且所有其他打开的会话都有“执行动画”。

任何想法如何在所有测试运行时停止测试会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:36:55.450

这是 ReSharper 的一个已知问题，我已经为它打开[了一个线程](http://devnet.jetbrains.net/message/5476275#5476275)。

# html - 固定位置的div不能滚动

> ID：14278759
> 
> 赞同：0
> 
> 时间：2013-01-11T13:01:17.363
> 
> 标签：html, css, scroll, css-position

我有 `<div>`并且`position:fixed`我想在调整浏览器大小时为该 div 滚动。我已经尝试过`overflo:auto`和其他但没有工作。如果有人可以帮助我...谢谢。

```
<div class="div1">
   <span class="l">1</span>
   <span class="l">2</span>
   <span class="l">3</span>
  <span class="l">4</span>
  <span class="r">4</span>
  <span class="r">3</span>
  <span class="r">2</span>
  <span class="r">1</span>
</div> 
```

css

```
 .div1{
      background:lime;
      width:45pc;
      height:50px;
      position: fixed;
      overflow-x: scroll;
    }

    .l{
      float: left;
    }

    .r{
      float:right;
    } 
```

小提琴：http: [//jsfiddle.net/Ksb2W/158/](http://jsfiddle.net/Ksb2W/158/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:13:19.240

看起来您输入的是 ac 而不是 x，所以更改`width:45pc;`为`width:45px;`. 那应该解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:09:42.593

将您的更改`width:45pc;`为`width:45px;`. 然后一切都按预期工作。

当你使用 pica 时，你的宽度是 16 * 45 px (720px)，因为 1pc=16px。如果你想保持 pc 作为单位，你需要在你的情况下使用`width:2.8125pc;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:01:38.717

你需要另一个 div 里面

```
<div class="div1">
  <div class="ins">
   <span class="l">1</span>
   <span class="l">2</span>
   <span class="l">3</span>
  <span class="l">4</span>
  <span class="r">4</span>
  <span class="r">3</span>
  <span class="r">2</span>
  <span class="r">1</span>
  </div>
</div> 
```

以及对 css 的一些更改。

```
.div1{
  background:lime;
  width:100%;
  height:50px;
  position: fixed;
  overflow-x: scroll;

}
.ins{
  min-width:45pc;
  height:50px;

}

.l{
  float: left;
}

.r{
  float:right;
} 
```

这是小提琴：http: [//jsfiddle.net/Ksb2W/189/](http://jsfiddle.net/Ksb2W/189/)

# java - 调用 onSaveInstanceState 而不调用 super.onSaveInstanceState(outState)

> ID：14278763
> 
> 赞同：5
> 
> 时间：2013-01-11T13:01:30.763
> 
> 标签：java, android

如果我将使用此代码而不调用 super.onSaveInstanceState(outState);

```
@Override protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putLong(ID, mId);
} 
```

像这样：

```
@Override protected void onSaveInstanceState(Bundle outState) {      
        outState.putLong(ID, mId);
    } 
```

可能会出现什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T13:11:57.050

Activity 本身保存了 bundle 中的一些值，例如 Fragments 的状态，如果你不调用 super 方法，这些值将不会被保存。

# php - CodeIgniter 在选择框中从数据库中获取值？

> ID：14278765
> 
> 赞同：0
> 
> 时间：2013-01-11T13:01:45.453
> 
> 标签：php, jquery, ajax, codeigniter, drop-down-menu

我是 CodeIgniter 的新手，所以我不知道该怎么做。我想在选择框中动态显示值，并在选择值后显示一个文本框，然后将文本框值和选项（显示在下拉列表中的名称）id传递给控制器​​，所以简单地说我想要什么去做：

*   动态显示选择框中的值
*   选择值后动态创建文本框
*   将选定或跟踪下拉列表和文本框值的“id”传递给控制器

**这是我的模型**

```
function getAllCategories(){
    $this->db->select('cat_name');
    $q = $this->db->get('category');

    if ($q->num_rows() > 0){
        foreach($q->result() as $row) {
            $data[] = $row;
        }
        return $data;
    }

} 
```

**我的控制器**

```
function showCategoryNames(){
    $data = array();
    $this->load->model('categoryModel');
    $query = $this->categoryModel->getAllCategories();
    if ($query){
        $data['records'] = $query;  
    }    
    $this->load->view('itemsView',$data);   
 } 
```

**查看：这是显示简单列表**

```
<?php if(isset($records)) : foreach($records as $row) :?>
    <h2><?php echo $row->cat_name; ?></h2>
    <?php endforeach;?>
    <?php else :
endif;?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:08:37.223

怎么样

```
<select name="mySelect">
<?php foreach($records as $row) { ?>
<option value="<?=$row->id?>"><?=$row->cat_name?></option>
<?php } ?>
</select> 
```

在你看来？

这是一个关于使用 jQuery、Ajax 和 Codeigniter 的教程：

[http://www.jotorres.com/2012/01/using-jquery-and-ajax-with-codeigniter/](http://www.jotorres.com/2012/01/using-jquery-and-ajax-with-codeigniter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T13:39:17.967

加载表单助手类后，您的视图应该用于创建下拉菜单

```
form_dropdown('size', $data_array, 'large'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T07:11:40.380

```
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Trip_model extends CI_Model{

    var $table = 'tbl_trip';

    public function __construct(){
        parent::__construct();
        $this->load->database();
    }

    public function get_all_trips(){
        $this->db->from('tbl_trip');
        $query=$this->db->get();
        return $query->result();
    }

    public function get_by_id($id){
        $this->db->from($this->table);
        $this->db->where('trip_id',$id);
        $query = $this->db->get();
        return $query->row();
    }

    public function trip_add($data){
        $this->db->insert($this->table, $data);
        return $this->db->insert_id();
    }

    public function trip_update($where, $data){
        $this->db->update($this->table, $data, $where);
        return $this->db->affected_rows();
    }

    public function delete_by_id($id){
        $this->db->where('trip_id', $id);
        $this->db->delete($this->table);
    }
} 
```

# java - 降低我的 Java 程序的复杂性

> ID：14278772
> 
> 赞同：1
> 
> 时间：2013-01-11T13:01:55.583
> 
> 标签：java, nullpointerexception, fractions

我用 Java 编写了一个程序，但它的计算时间很长，我不知道为什么。有人可以提供一些指示以降低复杂性吗？同样在计算一些值之后，比如在 3,100 之后，它会给出空指针异常。代码：

```
public class Fraction
{
    long n;
    long d;

    public Fraction()
    {
        n= 0L;
        d= 1L;
    }

    public Fraction(long a,long b)
    {
        n= a;
        d= b;
    }

    public Fraction mult(Fraction a, Fraction b)
    {
        Fraction product = new Fraction();
        product.n = a.n * b.n;
        product.d = a.d * b.d;
        long hcf=gcd(product.n,product.d);
        product.n/=hcf;
        product.d/=hcf;
        return product;
    }

    public Fraction add(Fraction a, Fraction b)
    {
        Fraction sum = new Fraction();
        sum.d = a.d * b.d;
        sum.n = a.n * b.d + a.d * b.n;
        long hcf=gcd(sum.n,sum.d);
        sum.n/=hcf;
        sum.d/=hcf;
        return sum;
    }

    public Fraction divide(Fraction a, Fraction b)
    {
        Fraction quotient = new Fraction();
        quotient.n = a.n * b.d;
        quotient.d = a.d * b.n;
        long hcf=gcd(quotient.n,quotient.d);
        quotient.n/=hcf;
        quotient.d/=hcf;
        return quotient;
    }

    long gcd(long a,long b)
    {
        long hcf=0,min;
        min=(a<b)?a:b;
        for(long i=1;i<=min;i++)
        {
        if(a%i==0 &&b%i==0)
        hcf=i;
        }
        return hcf;
    }
}

class foo extends Fraction
{
    static void main()
    {
        Fraction obj=new Fraction();
        Fraction f[][]=new Fraction[103][103];
        for(int i=1;i<=100;i++)
        {
            f[1][i]=new Fraction(1L,(long)i);
            f[i][1]=f[1][i];
            f[2][i]=obj.add(new Fraction(1L,(2L*i)),new Fraction((i*i-1L),3L)); 
            f[i][2]=f[2][i];
        }
        for(int i=3;i<=100;i++)
        {
            for(int j=1;j<=100;j++)
            {
                f[i][j+1]=obj.divide(obj.add(new Fraction(1,1),obj.mult(f[i-1][j+1],f[i][j])), f[i-1][j]);
                System.out.println(i+","+j+"="+f[i][j].n+"/"+f[i][j].d);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:35:06.207

NPE 来自`j+1`并且可能来自 f[1][i]=new Fraction(...); 我跳过 0 和一些。缓慢当然也源于 gcd，请参阅@wxyz。 `Fraction obj`可以称为`final Fraction ZERO`。

索引约定使用`<`而不是`<=`: `for ...; i < f.length; ...`。

要么改变

```
public Fraction divide(Fraction a, Fraction b) 
```

进入

```
public static Fraction divide(Fraction a, Fraction b) 
```

其中调用将是 Fraction.divide(a, b)。

或更好

```
public Fraction divide(Fraction b) 
```

where`this`扮演 a 的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:30:56.573

注意：你去 j+1，在 for 子句中你去直到 100，所以，你可以获得一个超出范围异常的索引。

# java - NoClassDefFoundError：org/springframework/context/support/ClassPathXmlApplicationContext

> ID：14278773
> 
> 赞同：0
> 
> 时间：2013-01-11T13:01:59.847
> 
> 标签：java, spring

我`spring-framework-3.2.0.RELEASE`用来做一个简单的应用程序。但我得到 NoClassDefFoundError

这是我的代码

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import java.io.FileOutputStream;
import java.io.PrintWriter;
import java.io.FileNotFoundException;

public class SpringDemo{
    public static void main(String args[]) throws FileNotFoundException{
            ApplicationContext context = new ClassPathXmlApplicationContext("message.xml");
    }
}

class MessageClass{
    private String message = null;

    MessageClass(String message){
        this.message = message;
    }

    public String getMessage(){
        return message;
    }

    public void setMessage(String message){
        this.message = message;
    }
} 
```

以下是我的`message.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans 
                       http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean id="message"
      class="MessageClass">
    <property name="message" value="Spring is fun." />
</bean> 
```

我收到以下错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/c
ontext/support/ClassPathXmlApplicationContext
        at SpringDemo.main(SpringDemo.java:10)
Caused by: java.lang.ClassNotFoundException: org.springframework.context.support
.ClassPathXmlApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 1 more 
```

我在我的`jdk_version/jre/lib/ext`目录中包含了以下 jar

1) antlr 2) commons-logging-1.1.1 3) spring-beans 4) spring-context 5) spring-core 6) spring-jdbc 7) spring-orm 8) spring-tx

怎么了？我没有从其他相关问题中得到任何帮助。请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:07:14.600

> 我在我的`jdk_version/jre/lib/ext`目录中包含了以下 jar

这可能是一个错误，因为只有*需要*扩展的 JAR 才应该放在这个目录中（如果您不能 100% 确定某个特定的 JAR 需要作为扩展，那么它可能不需要）。尝试以正常方式从应用程序的类路径中删除 JAR`lib/ext`并将它们放入。

# ios - 在复合对象中覆盖实例的某些方法是一个好的设计吗？

> ID：14278775
> 
> 赞同：0
> 
> 时间：2013-01-11T13:02:00.773
> 
> 标签：ios

我正在为 iOS 开发一个应用程序。

班级设计如下：

我的目的是让使用 CustomView 的开发人员为所有标签设置样式，而不是文本。标签的文本将根据设置为 、entity1、entity2、entity3 的值进行设置。

由于我已通过访问器将 label1,..label3 作为属性公开，因此我计划拦截发送的任何消息以设置任何标签的文本并覆盖它以不执行任何操作。这是一个正确的设计吗？

```
@interface CustomView:UIVIew{

}

@property (nonatomic) UILabel *label1;
@property (nonatomic) UILabel *label2;
@property (nonatomic) UILabel *label3;

@property (nonatomic) CustomEntity *entity1;
@property (nonatomic) CustomEntity *entity2;
@property (nonatomic) CustomEntity *entity3;

@end

@interface CustomEntity:NSObject
@property (nonatomic) NSString *dsiplayName;
@property (nonatomic,assign) NSInteger *totalItems;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:08:06.417

这几乎不是一个好的设计，这是相当骇人听闻的。如果您要求不设置标签的文本，则不要将标签公开为属性。

# iphone - iOS6 游戏中心崩溃

> ID：14278777
> 
> 赞同：0
> 
> 时间：2013-01-11T13:02:11.890
> 
> 标签：iphone, objective-c, ios5, ios6, game-center

我的游戏已经在 iOS5 中运行了一年。在更新它以与 iOS6 一起工作后，它现在在尝试在 Game Center 中发送分数时崩溃。`reportScoreWithCompletionHandler`它在代码行中崩溃

```
- (void)sendScore:(GKScore *)score {
    [score reportScoreWithCompletionHandler:^(NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^(void)
                       {
                           if (error == NULL) {
                               NSLog(@"Successfully sent score!");
                               [scoresToReport removeObject:score];                
                           } else {
                               NSLog(@"Score failed to send... will try again later.  Reason: %@", error.localizedDescription);                
                           }
                       });
    }];
} 
```

我在这里做错了什么？

**更新**

看了一点，似乎也可能存在问题`authenticateWithCompletionHandler`......我的代码如下......如果这是罪魁祸首，我该如何更新它才能正常工作？

```
- (void)authenticateLocalUser { 

    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO) {     
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];        
    } else {
        NSLog(@"Already authenticated!");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:32:31.877

我在[这里找到了解决方案](http://www.cocos2d-iphone.org/forum/topic/41948)

看来您必须创建乐谱副本并提交副本。它似乎只在重新发送保存的分数时发生。这可能是因为它试图阻止您`GKScore`从排行榜发送？

```
// Pull the score value and category from the passed in score
int scoreValue = score.value;
NSString*scoreCategory = score.category;

// Create a new temporary score with these values
GKScore *toReport = [[[GKScore alloc]
initWithCategory:scoreCategory] autorelease];
toReport.value = scoreValue; 
```

# spring-mvc - 使用spring在弹出窗口中提交数据后在父窗口或其他窗口上填充数据

> ID：14278778
> 
> 赞同：0
> 
> 时间：2013-01-11T13:02:14.387
> 
> 标签：spring-mvc

我的要求是我想在父 jsp 上填充数据，或者在使用 spring 关闭弹出窗口时可能在其他一些 jsp 中。我面临的问题是我能够打开弹出窗口，但是在提交值后，数据填充在同一个弹出窗口中，我希望在不同的页面上，例如我在弹出窗口打开时所做的事情，我提交了“Employee_Id”数据的值填充在弹出窗口本身我不知道如何使用spring在不同页面上填充数据这是我的代码

这是我的控制器

```
package com.nousinfo.tutorial.controllers;

import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import com.nousinfo.tutorial.model.EmployeeForm;
import com.nousinfo.tutorial.service.impl.EmployeeServiceImpl;
import com.nousinfo.tutorial.service.model.EmployeeBO;

@Controller
@RequestMapping("/search")
public class SearchEmployeeController {

    private EmployeeServiceImpl employeeServiceImpl;

    public void setEmployeeServiceImpl(EmployeeServiceImpl employeeServiceImpl) {
        this.employeeServiceImpl = employeeServiceImpl;
    }

    @RequestMapping(value = "/searchspring", method = RequestMethod.GET)
    public String view() throws Exception {
        return "Home";
    }

    @RequestMapping(value = "/searchPage", method = RequestMethod.GET)
    public ModelAndView search(@Validated EmployeeForm employeeForm,
            @RequestParam("selectedValue") String selectedValue)
            throws Exception {
        ModelAndView model = new ModelAndView();

        if (selectedValue.equals("FindEmployeeById")) {
            boolean x = true;
            model.addObject("x", x);
        }
        if (selectedValue.equals("FindEmployeeByName")) {

            boolean y = true;
            model.addObject("y", y);

        }

        if (selectedValue.equals("FindByDepartmentId")) {
            boolean z = true;
            model.addObject("z", z);
        }
        model.setViewName("Search");
        return model;
    }

    @RequestMapping(value = "/FindById", method = RequestMethod.GET)
    public ModelAndView searchByEmpNo(
            @ModelAttribute("employeeForm") EmployeeForm employeeForm)
            throws Exception {
        ModelAndView model = new ModelAndView();
        model.addObject("employeeForm", employeeForm);
        Integer i = (employeeForm.getEmployeeNumber());

        EmployeeBO employeeBO = employeeServiceImpl.getEmployee(i);
        System.out.println(employeeBO);
        model.addObject("employeeBO", employeeBO);
        model.addObject("block", "block");

        model.setViewName("EmployeeDetail");
        return model;
    }

    @RequestMapping(value = "/FindByName", method = RequestMethod.POST)
    public ModelAndView searchByEmployeeName(
            @ModelAttribute("employeeForm") EmployeeForm employeeForm) {
        ModelAndView model = new ModelAndView();
        model.addObject("employeeForm", employeeForm);
        List<EmployeeBO> employeeBOs = employeeServiceImpl
                .findEmployees(employeeForm.getFirstName());
        model.addObject("listEmployeeBO", employeeBOs);
        model.addObject("block", "block");
        model.setViewName("EmployeeList");
        return model;

    } 
```

这是我的jsp页面

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<fmt:setBundle basename="ApplicationResources" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Employee Search Page</title>
<script type="text/javascript">
    function doAllThese(url) {

        if (url == 'FindById') {
            document.form.action = "/EmployeeWebSpring/search/FindById";

        }
        if (url == 'FindByName') {
            document.form.action = "/EmployeeWebSpring/search/FindByName";
        }
        if (url == 'FindByDeptNO') {
            document.form.action = "/EmployeeWebSpring/search/FindByDeptNO";
        }
    }
    function loadName(name) {

        this.firstName = name;
        window.location = 'http://localhost:8080/EmployeeWeb/GetEmployee?key1='
                + encodeURIComponent(firstName);

    }
</script>
</head>
<body>
    <form:form name="form" commandName="employeeForm" method="post">

        <c:if test="${requestScope.x}">
            <div id="div1">
                Employee_ID:
                <form:input path="employeeNumber" />
                <input type="submit" name="method" value="FindById" id="FindById"
                    onclick="doAllThese(this.value)" />
            </div>
        </c:if>
        <c:if test="${requestScope.y}">

            <div id="div2" >

                Employee_Name
                <form:input path="firstName" />
                <input type="submit" name="method" value="FindByName"
                    onclick="doAllThese(this.value)" /> <br /> <font size=3>For
                    Searching the employees by<b>Employee Name</b><br />you can use %
                    match all the records with the given pattern
                </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                        matches alL the employees whose name starts with character <b>S</b></i></font>
            </div>
        </c:if>
        <c:if test="${requestScope.z}">
            <div id="div3">
                Employee_Name
                <form:input path="departmentId" />
                <input type="submit" name="method" value="FindByDeptNO"
                    onclick="doAllThese(this.value)" />
            </div>
        </c:if>
    </form:form>
</body>
</html> 
```

这是我使用内部视图解析器的 ds-servlet xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

    <context:annotation-config />

    <mvc:annotation-driven />

    <bean class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        id="dataSource">
        <property value="com.mysql.jdbc.Driver" name="driverClassName" />
        <property value="jdbc:mysql://192.168.25.30:3306/employee"
            name="url" />
        <property value="hr" name="username" />
        <property value="hr123" name="password" />
    </bean>
    <bean id="employeeDaoImpl" class="com.nousinfo.tutorial.employee.dao.impl.EmployeeDAOImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="employeserviceImpl" class=" com.nousinfo.tutorial.service.impl.EmployeeServiceImpl">
        <property name="daoImpl" ref="employeeDaoImpl" />
    </bean>

    <bean id="mycontroller"
        class="com.nousinfo.tutorial.controllers.SearchEmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl"></property>
    </bean>
    <bean id="emplController" class="com.nousinfo.tutorial.controllers.EmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl"></property>
    </bean>

    <bean id="configurationLoader"
        class="org.springmodules.validation.bean.conf.loader.annotation.AnnotationBeanValidationConfigurationLoader" />
    <bean id="validator" class="org.springmodules.validation.bean.BeanValidator"
        p:configurationLoader-ref="configurationLoader" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:prefix="/WEB-INF/" p:suffix=".jsp" />

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="com/nousinfo/resources/messages" />
    </bean>
    <!-- Configure the multipart resolver -->
    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:04:51.077

在我的脑海中，这是您的选择：

1.  提交弹出窗口，将相关更新数据存储在会话中或您可以访问的地方，然后使用 JS 在父页面上调用重新加载
2.  使父表 AJAX 加载，然后在弹出窗口关闭后，调用 AJAX 代码以重新加载页面内容。
3.  想出一些非常复杂的 JS 来使用弹出窗口上的数据来更新父页面......我认为这不是一个好的解决方案

Spring MVC 是一个服务器端工具，这意味着所有数据都在服务器端进行处理。如果您想直接使用 Spring 获取任何新数据，则需要以一种或另一种方式调用服务器。

# java - 更新/更改 ArrayList 中的值

> ID：14278781
> 
> 赞同：2
> 
> 时间：2013-01-11T13:02:22.890
> 
> 标签：java, arraylist

我对 java 编程还是很陌生，我正在为我的 java 练习寻找一些帮助，目前我无法弄清楚如何更新 ArrayList 中的值。

我已经使用 JAXBinding 生成了一些可以使用它来创建 XML 文件的源文件。

```
public static void main (String[] args) {
 String delete;
 AvailableFlights todayFlight = new AvailableFlights();
 List<Flight> flights_today =  todayFlight.getFlightDetail();

Flight journey1;
        journey1 = new Flight();
        journey1.setJourney("J1");
        journey1.setAirline("KLM");
        journey1.setConnections(1);
        journey1.setDestination("Amsterdam");
        journey1.setOrigin("London");
        journey1.setSeats(10);
        journey1.setCost(200);
        journey1.setCurrency((float) 0.16);
        flights_today.add(journey1); 
```

我发现的问题是，如果我想更新`Seats`值，我会做这样的事情来拿走座位：

```
if(delete.equals("J1")) {
Flight journey1;
flights_today.add(journey1.setSeats(-1));
flights_today.add(journey1);
} 
```

但它只是用 -1 覆盖它，而不是从 10 中拿走 1 个席位。

**问题解决：** `journey1.setSeats(journey1.getSeats()-1);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:03:18.407

您可以使用`set(index, value)`来更新实现`List`接口的类的值，包括`ArrayList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:11:06.263

而不是使用：

`journey1.setSeats(-1)`

你应该使用：

`journey1.setSeats(journey1.getSeats()-1)`

`setSeats(-1)`将座位数设置为 -1，您应该指定实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:07:01.200

当您取消座位时，您需要：

*   通过遍历列表并找到正确的航班来找到正确的航班`Flight`。
*   在此航班上，您希望从值中`setSeats`减去 1 。`getSeats`

# json - 杰克逊“没有单字符串构造函数/工厂方法”异常

> ID：14278786
> 
> 赞同：0
> 
> 时间：2013-01-11T13:02:58.767
> 
> 标签：json, jackson

我有一个实体：

```
E{
    String screen;
} 
```

我需要将屏幕字段分配给我作为 json 字符串接收的值之一

> "屏幕":{"ldpi":"1.jpg","mdpi":"2.jpg","hdpi":"3.jpg","xhdpi":"4.jpg"}

不幸的是，我不能声明容器类而不仅仅是字符串，因为 E 类被 orm 系统使用。

为了实现它，我创建了自定义值反序列化器：

```
public class DensityDeserializer extends JsonDeserializer<String> {

    public final static int LDPI = 0;
    public final static int MDPI = 1;
    public final static int HDPI = 2;
    public final static int XHDPI = 3;

    private int mDensity = LDPI;

    public DensityDeserializer() {
    }

    public DensityDeserializer(int density) {
        mDensity = density;
    }

    @Override
    public String deserialize(JsonParser jsonparser,
            DeserializationContext deserializationcontext) throws IOException,
            JsonProcessingException {
        ScreenContainer screenContainer = jsonparser
                .readValueAs(ScreenContainer.class);
        switch (mDensity) {
        default:
            return "";
        case LDPI:
            return screenContainer.getLdpi();
        case MDPI:
            return screenContainer.getHdpi();
        case HDPI:
            return screenContainer.getHdpi();
        case XHDPI:
            return screenContainer.getXhdpi();
        }
    }

    public static class ScreenContainer {
        public String ldpi = "";
        public String mdpi = "";
        public String hdpi = "";
        public String xhdpi = "";

        public ScreenContainer() {
            // TODO Auto-generated constructor stub
        }

        public String getLdpi() {
            return ldpi;
        }

        public void setLdpi(String ldpi) {
            this.ldpi = ldpi;
        }

        public String getMdpi() {
            return mdpi;
        }

        public void setMdpi(String mdpi) {
            this.mdpi = mdpi;
        }

        public String getHdpi() {
            return hdpi;
        }

        public void setHdpi(String hdpi) {
            this.hdpi = hdpi;
        }

        public String getXhdpi() {
            return xhdpi;
        }

        public void setXhdpi(String xhdpi) {
            this.xhdpi = xhdpi;
        }
    }
} 
```

当我运行程序时，它会引发异常：

> 01-11 12:29:06.833:​​ W/System.err(1501): com.fasterxml.jackson.databind.JsonMappingException: 无法从 JSON 字符串实例化类型 [简单类型，类 .DensityDeserializer$ScreenContainer] 的值；没有单字符串构造函数/工厂方法（通过引用链：E.["screen"]）

有什么建议么 ？

# iphone - 从 Plist 中搜索

> ID：14278787
> 
> 赞同：1
> 
> 时间：2013-01-11T13:03:00.933
> 
> 标签：iphone, ios, uitableview, plist

我有一个数组中包含多个字典的 Plist。

我无法`Plist`从以下代码中搜索。当我从下面的代码中搜索时，我只能在输入全名的情况下进行搜索，`objectForKey:@"aName"`我需要输入 Sugar..我无法使用 sug..or s.. 进行搜索，我必须输入 sugar full如果我搜索 plist 中的 Milk ..它将显示第一个是 Sugar 的字典，plist 如下所示.. 我必须搜索才能找到 **objectForKey:@"aName"**

从 plist.please 检查我在哪里搜索错了......

![进入图像](../Images/9a31d20fa26eb65f61b8be38f8b2184b.png)

```
 - (void)viewDidLoad
 {
          [super viewDidLoad];

        if (!expandedSections)
        {
            expandedSections = [[NSMutableIndexSet alloc] init];
        }

        NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                     NSUserDomainMask, YES); 
        NSString *documentsDirectory = [documentPaths objectAtIndex:0];
        NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"p.plist"];

        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

        valueArray = [dict objectForKey:@"title"];

        self.mySections=[valueArray copy];  
        NSLog(@"value array %@",self.mySections);

        }
        - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

        if (tableView==self.searchDisplayController.searchResultsTableView)
        {
            return [self.searchResults count];
        }
        else
        {

            return [self.mySections count];
        }

         }

        - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section      
        {

        if (  !(tableView == self.searchDisplayController.searchResultsTableView) )
        {
            if ([expandedSections containsIndex:section] )
            {

                return [[[self.mySections objectAtIndex:section ] allKeys] count] ;

            }
            return 1;
         } else  
            if(tableView == self.searchDisplayController.searchResultsTableView) 
            {
                if ([expandedSections containsIndex:section] )
                {

                    NSString *key = [self.searchResults objectAtIndex:section];
                    NSArray *dataInSection = [[self.mySections objectAtIndex:section ] allKeys]   ;

                    return [dataInSection count];
                }

            }

        return 1;

        }

        - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        }

        NSUInteger section = [indexPath section];
        NSUInteger row = [indexPath row];

        NSString *key = nil;
        if ([tableView isEqual:self.searchDisplayController.searchResultsTableView])
        {
            key = [self.searchResults objectAtIndex:section];
        }
        else{
            key = [self.mySections objectAtIndex:section];
        }

        NSDictionary *dict = [self.mySections objectAtIndex:indexPath.section];
        cell.textLabel.text = [dict.allKeys objectAtIndex:indexPath.row];
        cell.detailTextLabel.text= [dict valueForKey:[dict.allKeys objectAtIndex:indexPath.row]];

        return cell;
        }

        -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
        {
        UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0,0,tableView.bounds.size.width,40)];
        tempView.backgroundColor=[UIColor blackColor];

        UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(0,3,tableView.bounds.size.width-10,40)];
        tempLabel.backgroundColor=[UIColor clearColor]; 
        tempLabel.textColor = [UIColor redColor]; //here you can change the text color of header.
        tempLabel.font = [UIFont fontWithName:@"ChalkboardSE-Bold" size:13];
        tempLabel.font = [UIFont boldSystemFontOfSize:13];
        NSString *key=nil;

        if ([tableView isEqual:self.searchDisplayController.searchResultsTableView])
        {
            key = [[self.mySections objectAtIndex:section]objectForKey:@"aName"];
        }
        else{

         key = [[self.mySections objectAtIndex:section]objectForKey:@"aName"];
        // return [NSString stringWithFormat:@"%@", key];
         }

        tempLabel.text=[NSString stringWithFormat:@"%@", key];
        [tempView addSubview:tempLabel];

        return tempView;
        }

        - (void)filterContentForSearchText:(NSString*)searchText 
                                 scope:(NSString*)scope
        {
        NSPredicate *resultPredicate = [NSPredicate 
                                        predicateWithFormat:@"SELF contains[cd] %@",
                                        searchText];

        self.searchResults = [self.mySections filteredArrayUsingPredicate:resultPredicate];

        }

        -(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
        {
        UISearchBar * searchBar = [controller searchBar];
        [self filterContentForSearchText:searchString scope:[[searchBar scopeButtonTitles] objectAtIndex:[searchBar selectedScopeButtonIndex]]];
        return YES;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:27:04.683

它为您提供过滤`NSArray`后的结果，您可以进一步对结果做任何事情。

```
NSArray *_originalArray = ...;
/*
 * EDITED : because the thread's owner has seriously no idea what it is.
 *
 * you can get the searchText's value from anywhere else of your code
 * (i.e. from UITextField, UISearchBar, and anywhere else...)
 *
 */
NSString *searchText = ...; // EDITED : this is a parameter only, it can be set freely
NSArray *_filteredArray = [originalArray filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
            NSDictionary *_dataRow = (NSDictionary *)evaluatedObject;
            return ([[[_dataRow valueForKey:@"aName"] lowercaseString] rangeOfString:[searchText lowercaseString]].location != NSNotFound);
        }]];

NSLog (@"%@", _filteredArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:01:53.420

试试这个可能对你有帮助...

如果您正在使用`searchBar`，您可能应该使用它的委托方法，然后尝试使用该`searchTableView`方法..

例如……试试这个

```
 -(void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText  {

if([searchText length] > 0)  {
    searching = YES;
    [self **searchTableView**:yourSearchBar];  ///give call to the **searchTableView** method..

    //show your search table..
}

else  {
    searching = NO;

    //set your search table hidden
}

}

-(void)searchTableView:(UISearchBar *)searchBar  {

if (searchBar == yourSearchBar)  {
    NSString *searchText = yourSearchBar.text;

    for (NSString *sTemp in yourValueArray)  {
        NSComparisonResult result = [sTemp compare:searchText options: (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

        if (result == NSOrderedSame)  {
            [self.yourTemporarySearchArray addObject:sTemp];

        }
    }

    [yourSearchTable reloadData];
}

} 
```

# java - 什么触发了 java 垃圾收集器

> ID：14278793
> 
> 赞同：0
> 
> 时间：2013-01-11T13:03:13.007
> 
> 标签：java, garbage-collection, jvm

我对 Java 中的垃圾收集如何工作感到有些困惑。

当不再有对它的实时引用时，我知道一个对象有资格进行垃圾回收，但是如果它有对实时对象的引用怎么办？

可以说我有一个节点集合再次引用更多节点

```
List
1 -> Node a -> Node b
2 -> Node c -> Node d
3 -> Node d -> Node c
4 -> Node e
5 
```

现在如果我删除列表，节点 cd 和 e 应该被垃圾收集。节点 e 不再引用它，节点 c 和 d 有循环引用。

但是节点 a 呢？会被垃圾回收吗？

节点 b 是否具有外部实时引用会有所不同吗？假设节点 b 从不同的地方引用它，这会使节点 a 留在内存中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:10:25.303

有一组引用（当前局部变量、静态引用、堆栈帧的操作数堆栈）被认为是活动的。从此根引用集无法访问的任何内容都有资格进行垃圾收集。

节点 a 没有任何指向它的引用。因此，即使它指的是活动对象，它也符合 gc 条件。由于节点 b 有实时引用，它不会被 gc'ed。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:07:23.140

如果节点 B 有任何其他对它的引用，则节点 A 的垃圾收集无关紧要。如果节点 A 没有对它的引用，它将被垃圾回收。节点 B 将保留，因为它仍然具有实时引用。

基本上，每个没有实时引用的对象都会被收集。这些对象中包含的任何对象都将遵循相同的机制，如果没有其他对它们的引用，它们也将被垃圾回收。如果有来自其他对象的实时引用，它们将保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:06:26.533

GC 知道哪些对象是活动的，因为它将所有活动对象复制到一个新的内存区域，并且所有未复制的对象都将在下一次被覆盖。

请注意，这对于 Oracle VM 中 GC 的当前实现有效。其他虚拟机可以用另一种方式处理它。

# c# - 单击带有下划线的元素

> ID：14278799
> 
> 赞同：0
> 
> 时间：2013-01-11T13:03:28.577
> 
> 标签：c#, web, automation, watin

我正在尝试填写表格，其中的几个输入在*`name`*and中有下划线*`id`*。我想知道这是否会导致问题。

```
<fieldset>
<label for="user_name">Username</label>
<div class="goodorbad">
<span id="user_name-loading" class="free-or-taken fot-loading">
<img width="24" alt="Checking…" src="/i/loading/fresh-64.gif">
Checking...
</span>
<span id="user_name-free" class="free-or-taken" title="Available">✓&lt;/span>
<span id="user_name-taken" class="free-or-taken" title="Taken">×</span>
</div>
<input id="user_name" type="text" autocomplete="off" tabindex="10" autocorrect="off" autocapitalize="off" maxlength="50" value="" name="user_name">
<div class="suggestions">
</fieldset> 
```

出于某种原因，我无法`Element`通过*`Id`or `Name`(Exception throw ElementNotFound)*找到它。

这是我迄今为止尝试过*的（下面的代码都没有工作）*：

```
browser.ElementOfType<TextFieldExtended>(Find.ByClass(new Regex("user.name"))).TypeText("gfgh");

browser.TextField(Find.ById(new Regex("user.name"))).TypeText("gfgh");

browser.TextField(Find.ById("user%5Fname")).TypeText("gfgh");

browser.ElementOfType<TextFieldExtended>("user_name").TypeText("gfgh");

browser.ElementOfType<TextFieldExtended>("user_name").Value="FFF";

browser.Table(Find.ByClass("form-table")).TextField(Find.ByClass("user_name")).TypeText("gfgh");

browser.TextField(Find.ById("user_name")).TypeText("gfgh"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:39:21.427

如果你有和我类似的情况，这里是如何解决的。

而不是使用 TextField

```
 browser.TextField(Find.ById("someID")).TypeText("someText"); 
```

使用元素

```
 browser.Element(Find.ById("someID")).SetAttributeValue("value","someText"); 
```

奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:59:19.557

使用下划线搜索 ID 和名称就可以了；我一直都这样做。可能的原因是您没有正确的 ID 或名称（<- 这是最有可能的），文本框在框架中（不太可能），或者您没有针对正确运行的浏览器运行 WatiN 代码；这还包括弹出窗口和对话框。（不太可能）。

**示例 HTML** - 为清楚起见，对 id 进行了轻微更改

```
<html>
<body>
<input name="user_name" id="user_id" value="" maxlength="50" autocapitalize="off" autocorrect="off" tabindex="10" autocomplete="off" type="text">
</body>
</html> 
```

**示例 C#/WatiN**

```
IE myIE = new IE();
myIE.GoTo("theCorrectURL");
myIE.TextField("user_id").TypeText("Found By ID");
System.Threading.Thread.Sleep(500);  //not needed other than to watch what is happening
myIE.TextField(Find.ByName("user_name")).TypeText("Found By Name"); 
```

以上在 WatiN 2.1、IE9、Win7-64 上运行和测试

***其他注意事项***

1) Find.ByClass("user_name") 不会找到它，因为您的标签上没有定义 CSS 类。如果你有，那么你*可以*搜索 Find.ByClass("theCssClass")。

2) 浏览器的类型将是 WatiN.Core.IE (或者可能是 .Firefox) 如果它确实是 Windows.Forms.WebBrowser 我会非常惊讶。

# c# - Directory.Copy 失败，因为 C# 中的另一个进程正在访问 *.mdf

> ID：14278800
> 
> 赞同：1
> 
> 时间：2013-01-11T13:03:31.650
> 
> 标签：c#, sql-server

我正在`winform`用 C# 构建一个基于桌面的应用程序。我在我的应用程序中使用 SQL Server 数据库。

该应用程序有一个存档选项，我基本上将所有配置文件和数据文件 (*.mdf) 复制到 Winzip 存档中。

但是，我无法复制数据库文件 *.mdf。它抛出一个异常：

**“该进程无法访问文件 UserData.mdf，因为它正被另一个进程使用”**

我相信我正在关闭所有 SQL 连接，并通过 `GC.Collect()`.

但是，这似乎不起作用。

作为一种解决方法，如果我能够从任务管理器中终止进程 sqlservr.exe，则文件副本可以正常工作。

我想，应该有一种更好、更优雅的方式来做这件事。任何想法如何进行？

谢谢基兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:08:29.647

我不完全确定你想用这个做什么，但听起来备份脚本会更有益

[http://msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)

```
BACKUP DATABASE [AdventureWorks2012]
TO DISK = 'd:\AdventureWorks2012.Bak' 
```

# php - Symfony 2 和 PHP-EWS

> ID：14278807
> 
> 赞同：0
> 
> 时间：2013-01-11T13:03:46.730
> 
> 标签：php, symfony, exchange-server, exchangewebservices

我有一个 Symfony 2.0.17 项目，我想使用 php-ews 来与 Exchange Server 交互。问题是我不知道在我的项目中集成 php-ews。我下载了符合 PSR-0 的版本（[在这里](https://github.com/beraneck/php-ews)）我修改了 app/autoload.php 文件，如下所示：

```
'PhpEws'           => __DIR__.'/../vendor/PhpEws/PhpEws', 
```

这里有一个例子：

```
use PhpEws; 
use ExchangeWebServices;
use EWS_Exception;
use NTLMSoapClient;
use NTLMSoapClient_Exchange;
use EWSType_FindItemType;
use Symfony\Bridge\Monolog\Logger;

...

$ews = new ExchangeWebServices($host, $user, $password, $version); 
```

我收到以下错误

```
'Class ExchangeWebServices not found' 
```

有人有想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:08:21.230

尝试这个：

```
use PhpEws\ExchangeWebServices; 

...

$ews = new ExchangeWebServices($host, $user, $password, $version); 
```

# java - 检查一个类是否包含方法

> ID：14278810
> 
> 赞同：1
> 
> 时间：2013-01-11T13:03:52.227
> 
> 标签：java, methods

我有一个抽象类来创建工具（如插画笔、选择等）。这个想法是用户可以根据需要轻松创建新工具。

一些工具有一个名为“draggingSelection”的方法。我想知道是否有办法检查一个类是否具有该对象，如果有，请运行它。（在这种情况下 draggingSelection 返回一个布尔值）

到目前为止，我可以弄清楚该方法是否存在。我只是无法让它运行的方法。我尝试了调用，但我失败了。我的方法不需要任何参数。有人能帮忙吗。

```
public boolean draggingSelection() {

    Method[] meths = activeTool.getClass().getMethods();
    for (int i = 0; i < meths.length; i++) {
        if (meths[i].getName().equals("draggingSelection")) {
            // how can i run it?
                        //return meths[i].draggingSelection(); // wrong     
        }
    }
    return false;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:06:52.473

我认为更好的解决方案是检查给定对象的类是否实现了某个接口。

但是，要调用`draggingSelection`方法，请在您正在测试的对象上执行此操作：

```
activeTool.draggingSelection() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:07:53.487

您*可以*通过反射来做到这一点，但更好的解决方案是拥有一个包含所有相关方法的接口：

```
public interface SelectionAware {
  public void draggingSelection(SelectionEvent e);
} 
```

一旦你有了它，你有（至少）两个选项来使用它：

1.  让您的工具实现该接口并使用`myTool instanceof SelectionAware`后跟强制转换来调用该方法*或*
2.  `init`让工具以某种适当的方法将自己显式注册为侦听器。

选项 1 更接近您尝试执行的操作，但限制了该接口的使用并且不是真正干净的代码（因为您的代码需要“猜测”某些工具是否实现了某个接口）。

选项 2 可能需要做更多的工作（在哪里/何时注册/注销监听器？...），但绝对是更清洁的方法。它还具有侦听器不限于作为工具的优点：任何东西都可以注册这样的侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:06:59.570

```
public interface Draggable {
    public boolean draggingSelection(int foo, int bar);
} 
```

然后，当你有一个使用这种方法的类时，只需添加`implements Draggable`. 例子：

```
public class Selection implements Draggable {
    public boolean draggingSelection(int foo, int bar) {
        (insert code here)
        return baz;
    }
    (insert rest of code here)
} 
```

因此，您的示例将是：

```
if (activeTool instanceof Draggable) {
    ((Draggable)activeTool).draggingSelection(foo, bar);
} 
```

# asp.net-mvc - AppHarbor 上的错误 请求的资源只能通过 SSL 访问

> ID：14278811
> 
> 赞同：0
> 
> 时间：2013-01-11T13:03:53.960
> 
> 标签：asp.net-mvc, ssl, appharbor

我的错误日志文件中弹出一个奇怪的错误。我正在使用`RequireHttpsAttribute`来自 AppHarbor 的自定义：[https](https://gist.github.com/915869) ://gist.github.com/915869 。

我的家庭控制器上有这个属性，它工作正常，但我会说每天有 5-10 次请求失败，并出现以下错误：

```
The requested resource can only be accessed via SSL.
Stack Trace:
   at System.Web.Mvc.RequireHttpsAttribute.HandleNonHttpsRequest(AuthorizationContext filterContext)
   at Osmosis.RequireHttpsAttribute.OnAuthorization(AuthorizationContext filterContext) in d:\temp\bfzenor31c\input\prj\Infrastructure\Extensibility\RequireHttpsAttribute.cs:line 35
   at System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;&gt;c__DisplayClass25.&lt;BeginInvokeAction&gt;b__1e(AsyncCallback asyncCallback, Object asyncState 
```

RequireHttpsAttribute 的第 35 行如下：

```
HandleNonHttpsRequest(filterContext); 
```

因此，“X-Forwarded-Proto”请求标头中未提供“https”。但是由于我不明白的原因，重定向到 https 失败了。

这是请求的 url：[http://www.mydomain.com:14685/](http://www.mydomain.com:14685/)，具有 [RequireHttps] 属性的控制器主页操作索引。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:42:21.783

每当部署新版本时，AppHarbor 都会向您的站点发出这样的请求。这是[预热过程](http://blog.appharbor.com/2012/09/04/web-worker-pre-warming)的一部分，我认为这可能是您的问题的根源。

我们会想办法避免这种情况显示为您的错误。

# hibernate - Hibernate Joda DateTime 排序

> ID：14278812
> 
> 赞同：2
> 
> 时间：2013-01-11T13:04:00.840
> 
> 标签：hibernate, jodatime, spring-data-jpa

我正在使用 Joda DateTime 和休眠 4 的 UserType 库

我有一个具有以下字段的 JPA 实体

```
@Columns(columns = { @Column(name = "lastUsedDateTimeStamp"), @Column(name = "lastUsedDateTimeStamp_TMZ") })
@Type(type = "org.jadira.usertype.dateandtime.joda.PersistentDateTimeAsString")
private DateTime lastUsedDateTimeStamp; 
```

我正在使用普通的 Spring Data JPA 存储库，如下所示：

return repository.findAll(new PageRequest(0, 5, new Sort(Sort.Direction.DESC, "lastUsedDateTimeStamp"))).getContent();

但是，当我查看 hibernate 在日志中抛出的 sql 时，它以如下方式结束：

```
order by
        entity.lastUsedDateTimeStamp,
        entity.lastUsedDateTimeStamp_TMZ asc limit ? 
```

这意味着排序未按预期对 lastUsedDateTimeStamp 列进行，因为“asc”关键字位于 lastUsedDateTimeStamp_TMZ 之后，而不是 lastUsedDateTimeStamp。

有谁知道我可以如何修复它，以便查询在正确的字段上指定“asc”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:23:53.850

自己解决了这个问题，必须编写我自己的自定义 PersistentDateTimeAsString 和 AbstractMultiColumnDateTime 类来反转 2 个字段的默认顺序。

时区现在是顺序中的第一位，然后是日期时间。所以 sql 现在看起来像这样：

```
order by
        entity.lastUsedDateTimeStamp_TMZ,
        entity.lastUsedDateTimeStamp asc limit ? 
```

# algorithm - 如何制作一个 GPS 交通应用程序？

> ID：14278813
> 
> 赞同：1
> 
> 时间：2013-01-11T13:04:03.233
> 
> 标签：algorithm, gps, transport

我住在克罗地亚的斯普利特，一家城市公交公司最近购买了一个新软件，它的作用是：如果我是一名乘客，并且正在公交车站等车，那么我在上面有一个巨大的监视器可以看到公交代码和他到我的车站所需的时间。问题是，在拥有该软件的两年时间里，我从未见过它的到达时间是非常准确的。我知道 GPS 数据可能不准确，但这……这让我非常沮丧，我决定尝试为我的大学 CS 期末考试写一个类似的应用程序。问题是我在过去几天广泛搜索了网络，但我找不到好的起点。所以我的问题是：你有没有参与过这样的项目，如果有的话，你能给我一些指导，比如教程，或有关该主题的书籍？我感谢任何形式的输入。如果我在问题本身方面犯了错误，请随时关闭它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:22:25.030

你可能会有：

*   车辆对象，包含每个车辆的位置、分配的路线、路线上的行驶方向、下一个预定停靠点、上一个预定停靠点、上一个预定停靠点的到达时间
*   路线数组，包括停靠点列表和保存每条路线停靠点之间历史过境时间的数据结构

现在，对车辆位置的更新推送到车辆对象。

当您想要更新车站的显示时，查找通过该车站的所有路线，并为每条路线显示该路线上下一辆车的预计到达时间。

预计到达时间结构是其中的核心。通过假设停靠点之间的距离和平均行驶速度来播种。

现在，每次车辆到达停靠点时，计算从最后一站到达那里所需的实时时间，并使用它来更新按半小时增量（或你有什么）划分的平均运输时间，你也可以 bin按季节和/或星期几。分箱的目的是隐含地考虑按一天中的时间、一周中的一天和/或季节变化的交通拥堵。假设其他条件均质，您最终将收敛到对每个车站之间的运输时间的合理估计。

[您可能会发现使用卡尔曼滤波器](https://en.wikipedia.org/wiki/Kalman_filter)很有用。

如果您想调查一下，更远的车站之间的旅行时间估计可能比相邻车站之间的旅行时间更准确。高阶[马尔可夫链](https://en.wikipedia.org/wiki/Markov_chain)也可能有助于描述运输时间的基本统计数据。

只是想法。

# css - 我如何利用这个半透明的 png 以便在我的 Jquery 滑块中更容易阅读标题？（带图片）

> ID：14278814
> 
> 赞同：0
> 
> 时间：2013-01-11T13:04:06.807
> 
> 标签：css, stylesheet

我有这个用于 Wordpress 的 Jquery 滑块插件，它只是 Malsup 的 jquery 循环插件。

无论如何，我在每张幻灯片中添加了一个标题。我只是找不到在每张幻灯片中清晰显示的颜色。所以我在 Photoshop 中制作了一个半透明（50% 不透明度）的 png，5px x 5 px。目前，我的 CSS 如下所示：

```
.homepage-slides p {
background: transparent url('images/title-bg.png') repeat top left;
bottom: 0;
left: 0;
color: #000000;
font-size: 12px;
font-weight: bold;
margin: 0;
padding: 5px;
position: absolute;
text-align: left;
width: 100%;
} 
```

我也尝试使用 png 的绝对路径，但不行。结果如下：

![风车](../Images/7f4ac54fd406f6bff2af1a667e305c1d.png)

如您所见，底部的标题几乎无法阅读。如果我能找到一种方法来拥有……这个半透明的黄色矩形框，然后在该框内添加黑色标题，那将是很酷的，这样您就可以阅读标题。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:23:21.607

杰森先生

试试这个 Html 和 Css，

```
 <body>
    <div class="stroke-effect">
        This text should have a stroke in some browsers
    </div>
    </body> 
```

CSS

```
 body{
    background-color:#000;
    }
    .stroke-effect{
    font-weight:bold;
    color: #000;
    text-shadow:
    -1px -1px 0 #ffffff,
    1px -1px 0 #ffffff,
    -1px 1px 0 #ffffff,
    1px 1px 0 #ffffff;  
    } 
```

检查这个[http://jsfiddle.net/VqDKp/](http://jsfiddle.net/VqDKp/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:21:47.933

我建议不要使用图像。一个原因是具有透明背景的 png 图像在某些浏览器中不具有透明度（我知道它可能只是较旧的浏览器，但仍然如此）。另一个原因。图像不会 100% 定位在脚本中的背景中。

我个人喜欢使用 CSS 制作的背景，因为它们几乎涵盖了所有浏览器类型。这是我给你的背景例子:)

```
background:rgba(200,200,200,0.5); //50% silver-ish background. 
```

你可以使用不透明度。但我不建议这样做，因为它会影响`p`元素中的内容。我相信使用 alpha 过滤器会做同样的事情，但我已经有一段时间没有使用它们了。

这是给你的另一个例子:)

```
background:linear-gradient(top, rgba(0,0,0,0) 0%, rgba(70,70,70,0.5) 30%, rgba(200,200,200,0.5) 100%); 
//from top to bottom 100% transparent black.
//Very dark grey 50% transparent at 30% from the top of the element.
//Silver-ish 100% at the bottom at 50% transparency. 
```

在上面的例子中分别使用 webkit 扩展:)

我希望这有帮助。

# c++ - 如何配置 Xcode 来查找这些头文件？

> ID：14278815
> 
> 赞同：0
> 
> 时间：2013-01-11T13:04:07.980
> 
> 标签：c++, xcode, protocol-buffers

我正在生成一些`proto`在嵌套目录结构中创建的 c++ 类。使用它们的类定义了这个导入：

```
#include "com/x/y/z/MarketDataEntryTypeProto.pb.h" 
```

注意没有尖括号。

我已经在磁盘上创建了底层 dir 结构，然后将 com 目录导入到项目中。

我如何配置`Xcode`才能找到这些？

我已经搜索了论坛，但找不到与导入没有尖括号相关的答案。

把我的头发拉出来，谢谢。

# algorithm - 有效的按示例排序算法

> ID：14278818
> 
> 赞同：1
> 
> 时间：2013-01-11T13:04:37.750
> 
> 标签：algorithm, sorting

假设我们有一个长度为 N 的对象数组（所有对象都具有相同的字段集）。

我们有一个长度为 N 的相同类型值的数组，它们代表某个对象的字段（例如，代表 ID 的数字数组）。

现在我们要按在第二个数组中表示的字段对对象数组进行排序，并且与第二个数组中的顺序相同。

例如，这里有 2 个数组（如描述）和预期结果：

```
A = [ {id: 1, color: "red"}, {id: 2, color: "green"}, {id: 3, color: "blue"} ]
B = [ "green", "blue", "red"]

sortByColorByExample(A, B) == 
    [ {id: 2, color: "green"}, {id: 3, color: "blue"}, {id: 1, color: "red"} ] 
```

如何有效实现“逐例排序”功能？那我想不出更好的了`O(N^2)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:18:55.473

`B`这是假设你有一个从元素到元素的双射`A`

`M`从`B`的元素到它们的位置 ( `O(N)`)构建一个地图（比如）

对于`A`( `O(N)`) 的每个元素，访问映射以查找将其放在排序数组中的位置（`O(log(N))`使用映射的有效实现）

总复杂性：`O(NlogN)`时间和`O(N)`空间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:23:01.207

假设我们正在对物品的颜色进行分类。然后创建一个字典*d*，将每种颜色映射到 A 中具有该颜色的项目列表。然后遍历列表 B 中的颜色，并为每个颜色*c从列表**d* [ *c* ]中输出（并删除）一个值。这在 O( *n* ) 时间内运行，为字典提供 O( *n* ) 额外空间。

请注意，如果无法根据 B 中的示例对 A 进行排序，您必须决定该怎么做：您会引发错误吗？选择最大化匹配数的顺序？要不然是啥？

无论如何，这是 Python 中的一个快速实现：

```
from collections import defaultdict

def sorted_by_example(A, B, key):
    """Return a list consisting of the elements from the sequence A in the
    order given by the sequence B. The function key takes an element
    of A and returns the value that is used to match elements from B.
    If A cannot be sorted by example, raise IndexError.

    """
    d = defaultdict(list)
    for a in A:
        d[key(a)].append(a)
    return [d[b].pop() for b in B]

>>> A = [{'id': 1, 'color': 'red'}, {'id': 2, 'color': 'green'}, {'id': 3, 'color': 'blue'}]
>>> B = ['green', 'blue', 'red']
>>> from operator import itemgetter
>>> sorted_by_example(A, B, itemgetter('color'))
[{'color': 'green', 'id': 2}, {'color': 'blue', 'id': 3}, {'color': 'red', 'id': 1}] 
```

请注意，此方法处理序列 B 中有多个相同值的情况，例如：

```
>>> A = 'proper copper coffee pot'.split()
>>> B = 'ccpp'
>>> ' '.join(sorted_by_example(A, B, itemgetter(0)))
'coffee copper pot proper' 
```

在这里，当 中有多个相同的值时`B`，我们以相反的顺序获取对应的元素`A`，但这只是实现的产物：通过使用 a[`collections.deque`](https://docs.python.org/3/library/collections.html#collections.deque)代替列表（而`popleft`不是`pop`），我们可以安排获取相应的元素的`A`原始顺序，如果这是首选的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:11:17.440

制作一个数组数组，称其为大小为 B.length 的 C。遍历 A。如果它的颜色为“绿色”，则将其放入 C[0]。如果它的颜色为“蓝色”，则将其放入 C[1]，如果它的颜色为红色，则将其放入 C[2]。完成后，通过 C 并将其展平为原始结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:17:02.493

类似于合并排序的东西不是更好吗？创建 B.length 数组，为 B 中的每个元素创建一个数组，然后遍历 A，并将它们放置在适当的较小数组中，然后在完成后将数组合并在一起。它应该在 O(2n) 左右

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T13:19:28.017

*   遍历第一个数组并创建一个`HashMap`这样的字段而不是`List`对象。**O(n)** [假设这些关键字段的值重复]

例如。key = green 将包含字段值为 Green 的所有对象

*   现在遍历第二个数组，从 HashMap 中获取对象列表并将其存储在另一个数组中。**O(k)** ..（其中 k - 字段的不同值）

总运行时间为 O(n)，但它需要一些额外的内存，例如映射和辅助数组

最后，您将根据您的要求对数组进行排序。

# c# - 未找到连接字符串 WebSecurity.IntializeDatabaseConnection

> ID：14278820
> 
> 赞同：2
> 
> 时间：2013-01-11T13:04:45.223
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

在一个测试项目中，我使用 SimpleMembershipProvider 和 Entity Framework 5。测试项目使用 localdb 创建了一个数据库，但它突然停止工作。我不确定发生了什么变化，但我很困惑。这几乎是样板：

```
 private static void InitializeSimpleMembership()
    {
        Database.SetInitializer<TestEfhContext>(null);
        using (var context = new TestEfhContext(ConnectionString))
        {
            if (!context.Database.Exists())
            {
                // Create the SimpleMembership database without Entity Framework migration schema
                ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
            }

            WebSecurity.InitializeDatabaseConnection(ConnectionString, "Users", "UserID", "UserName", autoCreateTables: true);

        }           
    } 
```

当`ConnectionString`不是 app.config 中的键时，它应该创建一个该名称的数据库，并为用户模型初始化它。如果 localdb 数据库不存在，则成功创建它。`WebSecurity.InitializeDatabaseConnection`现在失败了

```
`Connection string "testdb" was not found.` 
```

在进行故障排除时，我尝试更改连接字符串以使用实际的连接字符串而不是别名：

```
WebSecurity.InitializeDatabaseConnection(context.Database.Connection.ConnectionString,
   "Users", "UserID", "UserName", autoCreateTables: true); 
```

这将解析为到 localdb 服务器的完整连接字符串：

```
Data Source=(localdb)\\v11.0;Initial Catalog=testdb;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFrameworkMUE' 
```

我认为这至少会奏效。不是这样：

```
Connection string "Data Source=(localdb)\v11.0;Initial Catalog=testdb;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFrameworkMUE" was not found. 
```

有任何想法吗？这是我使用 EF 的第一个项目，所以其中一些对我来说仍然有点神秘。当我第一次设置测试项目时，它就像魔术一样工作，我无法理解可能发生了什么变化。初始化程序甚至不能使用真正的连接字符串，这似乎特别奇怪。实际的应用程序仍然可以正常工作，我现在无法让测试项目正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:12:27.047

有两个非常相似的**InitializeDatabaseConnection**方法，这导致了混乱。

该行：

```
WebSecurity.InitializeDatabaseConnection(context.Database.Connection.ConnectionString,
   "Users", "UserID", "UserName", autoCreateTables: true); 
```

始终需要一个连接字符串名称，该名称**必须存在**于配置的 appSettings 中。

要专门传入您自己的连接字符串，**InitializaDatabaseConnection**方法需要传入 6 个参数。第二个参数是提供程序名称。

# c# - 获取线程状态

> ID：14278821
> 
> 赞同：0
> 
> 时间：2013-01-11T13:04:47.347
> 
> 标签：c#, multithreading

我正在运行一个正在发送邮件的线程。我怎么知道一个线程已经完成了它的执行？

```
new Thread(x => SendMail(node.Attributes["id"].Value.ToString(), node["fname"].InnerText +      " " + node["lname"].InnerText, 500, node["email"].InnerText)).Start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:09:48.227

```
var thr = new Thread(x => SendMail(node.Attributes["id"].Value.ToString(), node["fname"].InnerText +      " " + node["lname"].InnerText, 500, node["email"].InnerText));
thr.Start();
thr.Join();//In this place main thread will wait 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:07:13.770

您应该保留对您创建的线程实例的引用，然后检查[`ThreadState`](http://msdn.microsoft.com/en-us/library/system.threading.threadstate.aspx). 您还可以检查该[`IsAlive`](http://msdn.microsoft.com/en-us/library/system.threading.thread.isalive.aspx)属性以查看线程当前是否正在执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T13:13:17.560

这取决于你的环境是什么。例如，您可以通过使用任务和订阅延续来避免所有线程。

例如

```
var task = Task.Run(DoSomething)
               .ContinueWith(a => Whatever()) 
```

或者使用 C# 5 提供的便利关键字：

```
var task = await Task.Run(DoSomething);
Whatever(); 
```

如果您必须使用线程，我建议您传递一个委托，当电子邮件完成后，您只需调用它：

```
// Outside the thread
private Action callback;

// Before starting the thread
callback = MyMethod/*Or a lambda if you want*/;

// In the thread action
Action<object> threadBody = x => 
{
    SendMail(node.Attributes["id"].Value.ToString(), node["fname"].InnerText +      " " + node["lname"].InnerText, 500, node["email"].InnerText);
    callback();
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T13:20:11.837

另一种变体是将 与`ThreadPool.QueueUserWorkItem`结合使用`ManualResetEvent`：

如：

```
private void DoWork()
{
    List<ManualResetEvent> events = new List<ManualResetEvent>();

    //in case you need to loop through multiple email addresses 
    //use the foreach here, assuming that the items is a list.

    //foreach(var item in items)
    //{
    var resetEvent = new ManualResetEvent(false);
    ThreadPool.QueueUserWorkItem(arg =>
    {
        SendMail(node.Attributes["id"].Value.ToString(), 
           node["fname"].InnerText + " " + node["lname"].InnerText,
           500, node["email"].InnerText);
        resetEvent.Set();
    });
    events.Add(resetEvent);

    //} <- closes the foreach loop

    //WaitHandle.WaitAll waits for all the threads to finish.
    WaitHandle.WaitAll(events.ToArray());
    MessageBox.Show("Mails are sent", "Notification");
} 
```

如果您想遍历电子邮件地址列表或数组并为每封邮件单独启动一个线程，这将特别有用。

在您的情况下，如果您想在等待发送邮件时做其他事情。您可以简单地在后台线程中运行上面的代码，当消息显示时，您就知道工作已完成。

```
public void StartMailThread()
{
    Thread myThread = new Thread(DoWork)
    {
        IsBackground = true,
        Name = "MailThread"
    };
    myThread.Start();
} 
```

虽然，使用线程启动线程池对我来说似乎有点奇怪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T20:18:18.103

除了 Andrew's Answer 你可以使用 BackgroundWorker 它已经有 RunWorkerCompleted 事件 [BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)

# ruby - Capistrano、防火墙和隧道

> ID：14278822
> 
> 赞同：4
> 
> 时间：2013-01-11T13:04:49.893
> 
> 标签：ruby, ssh, capistrano, firewall, ssh-tunnel

我们正在使用 Capistrano 自动将 PHP 应用程序的新版本推送到生产服务器。生产服务器（我们称之为生产）是公共的，而我们的存储库服务器（我们称之为 repo）与我们自己的机器一起位于我们公司的防火墙后面。

默认配置的 Capistrano 不起作用，因为生产无法与 repo 对话。

我想知道是否有某种方法可以先将 capistrano 设置为 SSH 以进行 repo，然后 SSH 到生产在端口上打开一个隧道，然后我可以使用 SSH 从生产返回 repo 以从 SCM 中提取更改。

我只是不知道如何设置或找出更好的解决方案。想法？

**编辑：**

我试过这个：

```
role :web, "deploy.com"

namespace :deploy do
    task :remote_tunnel do
        run 'Creating SSH tunnel...' do |channel, stream, data|
            ssh = channel.connection
            ssh.forward.remote(22, 'server.com', 10000, '127.0.0.1')
            ssh.loop {!ssh.forward.active_remotes.include?([10000, '127.0.0.1'])}
        end
    end
end

before "deploy:update_code", "deploy:remote_tunnel" 
```

但我不断收到此错误：

```
failed: "sh -c 'Creating SSH tunnel...'" on deploy.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:56:23.973

这里有 2 种方法来完成它。

## 第一种方式

不确定你是否看过这个帖子？

*   [https://groups.google.com/forum/?fromgroups=#!topic/capistrano/RVwMim-qnMg](https://groups.google.com/forum/?fromgroups=#!topic/capistrano/RVwMim-qnMg)

它利用`net-ssh-gateway`库，但创建本地转发方法的副本，但它们适用于远程访问。

```
class Net::SSH::Gateway 
  # Opens a SSH tunnel from a port on a remote host to a given host and port 
  # on the local side 
  # (equivalent to openssh -R parameter) 
  def open_remote(port, host, remote_port, remote_host = "127.0.0.1") 
    ensure_open! 

    @session_mutex.synchronize do 
      @session.forward.remote(port, host, remote_port, remote_host) 
    end 

    if block_given? 
      begin 
        yield [remote_port, remote_host] 
      ensure 
        close_remote(remote_port, remote_host) 
      end 
    else 
      return [remote_port, remote_host] 
    end 
  rescue Errno::EADDRINUSE 
    retry 
  end 

  # Cancels port-forwarding over an open port that was previously opened via 
  # open_remote. 
  def close_remote(port, host = "127.0.0.1") 
    ensure_open! 

    @session_mutex.synchronize do 
      @session.forward.cancel_remote(port, host) 
    end 
  end 
end 
```

## 第二种方式

在对这个 SO question 的回答中概述：

*   [是否可以让 Capistrano 通过反向 SSH 隧道进行结帐？](https://stackoverflow.com/questions/2729100/is-it-possible-to-do-have-capistrano-do-a-checkout-over-a-reverse-ssh-tunnel)

这种技术与第一种方式非常相似。首先，您需要创建 2 个存储库路径：

```
# deploy.rb
set :local_repository, "ssh://git@serverbehindfirewall/path/to/project.git"
set :repository,  "ssh://git@localhost:9000/path/to/project.git" 
```

然后在部署之前，您需要设置远程转发：

```
% ssh -R 9000:serverbehindfirewall:22 deploybot@deployserver.com
# CTRL + C + A (Screen) or ⌘ + T (Terminal.app) to open new tab 
```

其次是您的部署：

```
% cap HOSTFILTER=deployserver.com deploy # HOSTFILTER reduces set to specified host. Only useful if you have multiple servers. 
```

有关更多详细信息，请参阅该 SO 问题的答案：

*   [https://stackoverflow.com/a/3953351/33204](https://stackoverflow.com/a/3953351/33204)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T13:09:31.113

使用 Capistrano 3.x，以下对我有用：

```
namespace :deploy do
  desc "Open SSH Tunnel to GitLab"
  task :open_tunnel do
    on roles(:app) do
      info "Opening SSH Remote Tunnel..."
      self.send(:with_ssh) do |ssh|
        # ssh -R 9000:192.168.1.123:22
        ssh.forward.remote(22, "192.168.1.123", 9000)
      end
    end
  end
  before "deploy:check", "deploy:open_tunnel"
end 
```

请注意，`ssh.forward.remote`期望参数的顺序不同于`ssh -R`，以上等价于`ssh -R 9000:192.168.1.123:22`

此任务调用私有方法，如果有人知道获取 Capistrano 的 ssh 连接的官方方法，请评论或编辑。

***编辑：**另见SSHKit 的自述文件的[隧道和其他相关 SSH 主题部分](https://github.com/capistrano/sshkit#tunneling-and-other-related-ssh-themes)*

# solr - Solr 匹配给定月份的任何日期

> ID：14278826
> 
> 赞同：1
> 
> 时间：2013-01-11T13:04:56.423
> 
> 标签：solr

在 Solr 中，是否可以搜索给定月份中的所有记录，而不考虑年份或日期？例如，下面的片段将匹配 01.01.2013 上的所有内容 - 我想要做的是找到任何一年出现在 01.01 上的所有内容。

```
date:2013-01-01T00:00:00Z 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:44:14.853

不，没有日期字段。Solr 只能处理日期范围，就像它只能处理数字范围或字符串范围一样。要求 Solr 仅根据当月的第一天查询日期字段就像要求它查询数字字段并且只给您奇数，或者查询字符串但只查询以元音开头的字符串。

您需要做的是将日期分解为月和日组件，然后查询这些组件。如果您的基本字段是`sale_date`，您还需要`sale_month`和`sale_day`。然后，您可以查询`month:3`以获取任何 3 月发生的所有事情，或者`day:1`获取任何一个月的第一天的所有内容，或者`month:3 AND day:1`获取任何 3 月 1 日发生的所有事情。

# ruby-on-rails - Rails cron不发送电子邮件

> ID：14278830
> 
> 赞同：4
> 
> 时间：2013-01-11T13:05:09.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cron

我正在使用when gem 让rails cron 作业发送电子邮件。一切似乎都很好，我的 cron.log 或 production.log 文件中没有错误，但我从未收到电子邮件。我也检查了电子邮件地址是否正确。

任何帮助表示赞赏。

production.log 文件包含以下内容：

```
Connecting to database specified by database.yml
  Rendered email_mailer/send_birthday_reminders.html.erb (5.3ms)

Sent mail to tomcaflisch@gmail.com (409ms) 
```

这是我的每当 gem schedule.rb 文件

```
set :output, "#{path}/log/cron.log"

every :hour do
    runner "BirthdayRemindersController.send_birthday_email_reminders"
end 
```

生日提醒控制器.rb

```
class BirthdayRemindersController < ApplicationController

    # cron job that sends birthday reminders
    def self.send_birthday_email_reminders 
        users = User.all

        email_addresses = []

        users.each_with_index do |user, i|
            if user.user_details.birthday_reminders == true
                email_addresses[i] = get_primary_email(user)
            end
        end
        p "email_addresses to send to:"
        p email_addresses

        users.each do |user|
            p "this user is"
            p user.user_details.full_name
            if user.user_details.birthday.try(:strftime, "%m") == Date.today.strftime("%m") && user.user_details.birthday.try(:strftime, "%d") == Date.today.strftime("%d")
                p "reminder sent"
                EmailMailer.send_birthday_reminders(user, email_addresses).deliver
            end
        end
    end
end 
```

email_mailer.rb 片段

```
class EmailMailer < ActionMailer::Base
  include ApplicationHelper
  default :from => "\"FamNFo\" <no-reply@mysite.com>"

  def send_birthday_reminders(birthday_person, email_addresses)
    p "we in send_birthday_reminders mailer"
    p email_addresses
    @birthday_person = birthday_person
    mail(:subject => "Birthday Reminder For The Caflisch Family", :to => email_addresses, :reply_to => email_addresses)
  end
end 
```

capistrano 的 deploy.rb 包含这个

```
# needed for the 'whenever' gem
set(:whenever_command) { "RAILS_ENV=#{rails_env} bundle exec whenever"}
require "whenever/capistrano" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:07:12.367

如果您的操作邮件配置指定 perform_deliveries=false，则可能会发生这种情况。您可以检查环境文件中的配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:44:00.513

检查您的垃圾邮件文件夹。为确保电子邮件不会在那里结束，请在每封电子邮件中添加一个“取消订阅”链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:48:11.647

如果您的应用程序部署到云服务，那么您可能会在垃圾邮件文件夹中收到您的电子邮件。他们的整个 IP 块在 之类的服务中被注册为垃圾邮件`Spamhaus`，这是一个明智的预防措施，否则我们会收到比平时更多的垃圾邮件。

您应该在该字段中输入服务器的 IP 地址，以查看您是否被列为垃圾邮件发送者。

如果是，您可以向 Spamhaus 请求解除封锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-29T19:50:53.933

我发现的另一个大问题是 PATH 和 rbenv 可能未在 CRONTAB 中初始化，具体取决于您的设置方式。我建议将以下内容添加到`.bashrc`文件顶部

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

这确保了如果您使用`whenever`调用完全可用的`rbenv`模型方法。`ruby`

# wordpress - 如何找出当前页面在哪个导航菜单中？

> ID：14278833
> 
> 赞同：0
> 
> 时间：2013-01-11T13:05:36.533
> 
> 标签：wordpress

我正在开发的一个网站有很多菜单项，所以它们被分成了两个菜单。有一个更多按钮显示使用 JS 的第二个菜单（一次只显示一个）。

我想要实现的是，当用户点击第二个菜单中的某个项目时，重新加载后默认显示第二个菜单。

为此，我需要知道当前页面是否在二级菜单中，但我不知道如何访问菜单项。更具体地说，我不知道我的菜单的 ID 是什么（我想我应该使用`wp_get_nav_menu_items`需要菜单 ID 的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:55:18.907

WordPress在您所在的当前页面的导航中的 li 上添加**current_page_item类。**因此，您可以使用该类来设置当前页面项目的样式。

# c# - 如何更改类型数据表列

> ID：14278839
> 
> 赞同：2
> 
> 时间：2013-01-11T13:06:17.313
> 
> 标签：c#, types, datatable

> **可能重复：**
> [如何转换 DataTable 列类型？](https://stackoverflow.com/questions/6567787/how-to-convert-the-datatable-column-type)

如果表已经有值，我们如何更改数据表列类型？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T13:09:17.430

填充后无法更改数据表的数据类型，但其中一项工作是克隆数据表和更改类型

**第一种方式**

```
//clone datatable     
DataTable dtCloned = dt.Clone();
//change data type of column
dtCloned.Columns[0].DataType = typeof(Int32);
//import row to cloned datatable
foreach (DataRow row in dt.Rows) 
{
    dtCloned.ImportRow(row);
} 
```

* * *

**第二种方式**

和其他方法是这样的，首先填充模式 - 而不是更改列数据类型，然后填充数据表

```
adapter.FillSchema(table, SchemaType.Source);
table.Columns[0].DataType = typeof (Int32);
adapter.Fill(table); 
```

* * *

**第三种方式**

另一种方法是

```
System.Data.DataTable dt = new System.Data.DataTable();
dt.Columns.Add("Col1", typeof(int));
dt.Rows.Add(1);

System.Data.DataTable dt2 = new System.Data.DataTable();
dt2.Columns.Add("Col1", typeof(string));
dt2.Load(dt.CreateDataReader(), System.Data.LoadOption.OverwriteChanges); 
```

# asp.net-mvc-4 - Entity Framework 5 ASP.Net 实现接口作为模型类型

> ID：14278841
> 
> 赞同：0
> 
> 时间：2013-01-11T13:06:29.273
> 
> 标签：asp.net-mvc-4, entity-framework-5

使用 MVC4，Entity Framework 5，我希望每种类型都使用一个接口，

所以我有我的接口，一个对另一个具有“导航”属性；

Ifoo 接口有：

```
IUser User {get; set;}
int UserID {get; set;} 
```

假设 IUser 只有 UserID 和 UserName 属性。

在一个类型中实现 Ifoo 接口时，我使用

```
public Iuser User {get; set;}
public UserID {get; set;} 
```

然后，使用 EF5，我渴望加载导航属性，使用实现 IUser 的用户类型：

```
db.Foo.where(x => x.id == id).Include(x => x.User) 
```

但它告诉我：

指定的包含路径无效。EntityType 'Dal.Foo' 没有声明名为 'User' 的导航属性。

但是，如果我将两个接口都更改为直接实现类型，则效果很好。

有没有办法解决这个问题，所以我可以利用接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T06:19:21.097

我知道这可以使用部分类来完成。所以你可以使用部分类并忽略接口，或者只在部分类中实现接口然后继承它。我建议查看 T4 模板。

# .net - 在特定字符串之后搜索文本

> ID：14278842
> 
> 赞同：0
> 
> 时间：2013-01-11T13:06:31.537
> 
> 标签：.net, regex

我正在尝试在某个字符串之后搜索特定文本。
问题是这个特定的字符串在我的文本中存在两次。就像这样：

> *帐单信息*
> 名称：SomeName
> 地址：SomeAddress
> 城市：SomeCity
> 
> *运输信息*
> 名称：SomeName
> 地址：SomeAddress
> 城市：SomeCity

到目前为止，我正在使用这个正则表达式：

```
(?<=Name:).* 
```

这让我得到了两个名字。
我如何从运输信息下获得名称？

编辑：我当然可以使用多个匹配项，并遍历它们，但我希望每个匹配项都有一个语句。因此，一份运输名称声明和一份账单名称声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:13:07.213

您可以使用`^Name: (.+)$`全局和多行标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:15:50.727

你可以使用

```
  ^名称: (\w*)
```

或者

```
(?<=名称:)(.*)
```

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:12:29.500

您是否尝试过通过匹配进行枚举？

[正则表达式匹配](http://msdn.microsoft.com/en-us/library/b49yw9s8.aspx)

# xaml - 在 WinRT 中同步两个 ListView

> ID：14278843
> 
> 赞同：1
> 
> 时间：2013-01-11T13:06:32.350
> 
> 标签：xaml, listview, gridview, synchronization, windows-runtime

我正在尝试同步 WinRT 应用程序中两个不同 ListViews 的选定项目，以便在一个项目中选择一个项目，从而在另一个项目中选择相同的项目。两个列表都绑定到同一个数据源。

我认为您可以使用 ListView 的 IsSynchronizedWithCurrentItem 属性来管理同步，但是当我尝试它时，这似乎总是引发异常（“不支持将 IsSynchronizedWithCurrentItem 设置为 true”），并且无论如何可能不适合用于多个选定的项目。

有没有办法在 WinRT 中以编程方式选择给定 ListView 中的项目？或者使两个列表中的选定项目保持同步的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:10:33.823

查看 WinRT XAML 工具包。它在示例应用程序中有一个 ListViewExtensions 示例，似乎几乎完全符合您的要求。

# xcode4.5 - 理解 viewController 的呈现方式

> ID：14278849
> 
> 赞同：0
> 
> 时间：2013-01-11T13:06:49.513
> 
> 标签：xcode4.5

我有一个关于 viewControllers 和“演示文稿”的概念性问题。

我试图找出展示我的内容的“好”方式。

假设我有 2 个视图（viewControllers）。

我现在想从 view1 导航到 view2。使用按钮或其他事件。

我注意到有“presentViewController”——这涉及“解雇”。我想这意味着 view2 有点堆叠在 view1 的顶部？

如果 view1 仅用于启动登录——这样您就永远不会回到这个视图，除非您退出或注销？你还会“在场”和“解雇”吗？（因此 view1 始终存在，但隐藏在 view2 下方 - 甚至可能是 view3、view4 等等）

我的猜测是我应该去view2并完全替换view1？如何？你可以用多少种方式呈现一个 viewController？你什么时候使用每个？

我的问题有意义吗？

谢谢约翰

# java - 日期对话框在 12 月时强制关闭

> ID：14278856
> 
> 赞同：0
> 
> 时间：2013-01-11T13:07:00.660
> 
> 标签：java, android, datepicker, forceclose

当我单击对话框时，它会强制关闭。工作正常，直到 11 月。但是当我选择 12 月时，它会强制关闭。请看代码。

```
 // ---------------- For DatePicker ----------------
    @Override
    protected Dialog onCreateDialog(int id) {
        if(date.toString().length() > 0)
        {
            //12/31/1986
            cmonth =(Integer.parseInt(date.substring(0,2)));
            cday =(Integer.parseInt(date.substring(3,5)));
            cyear =(Integer.parseInt(date.substring(6,10)));
        }
        else
        {
            Calendar c = Calendar.getInstance();
            cyear = c.get(Calendar.YEAR);
            cmonth = c.get(Calendar.MONTH);
            cday = c.get(Calendar.DAY_OF_MONTH);
        }
        switch (id) {
        case DATE_DIALOG_ID:
            //return new DatePickerDialog(ProfileSetting.this, mDateSetListener, cyear, cmonth-1, cday); //Gets forceclose when it comes to December month
            return new DatePickerDialog(ProfileSetting.this, mDateSetListener, cyear, cmonth, cday); // works till November
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:29:55.960

在仔细观察您粘贴在问题中的代码后，这是您犯的错误。

在第一个 if 循环中，`onCreateDialog()`您将获得 1986 年 12 月 31 日这种格式的日期。您将月份设为 12。

在 else 循环中，您直接从 Calendar 实例中获取月份，这最多只能为您提供 11 个。

因此，要在这两种情况下工作，您需要在第一个 if 循环中减少月份。

改变你的 if 循环如下

```
if(date.toString().length() > 0)
        {
            //12/31/1986
            cmonth =(Integer.parseInt(date.substring(0,2)));
            cmonth--;
            cday =(Integer.parseInt(date.substring(3,5)));
            cyear =(Integer.parseInt(date.substring(6,10)));
        } 
```

希望它对你有用。

# objective-c - 委托给多个对象

> ID：14278857
> 
> 赞同：29
> 
> 时间：2013-01-11T13:07:09.820
> 
> 标签：objective-c

有没有办法在 Objective-C 中一次委托给两个对象？我知道委托模式意味着一次一个响应，并且对于多个听众和广播有通知中心，但通知不返回任何值。

如果我有一个基于网络的 iOS 项目并且需要委托给多个侦听器并需要从它们返回值，那么在这种情况下，哪种方法应该是最好的？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T13:22:12.507

在每个班级中，代表都是一个，因此一个代表被告知该事件。但是没有什么禁止你声明一个带有一组委托的类。

或者改用观察。一个类可以被多个类观察。

**例子**

根据 OP 的要求，由于一些代码也很有用，所以这是一种方法：

```
@interface YourClass()

@property (nonatomic, strong, readwrite) NSPointerArray* delegates;
// The user of the class shouldn't even know about this array
// It has to be initialized with the NSPointerFunctionsWeakMemory option so it doesn't retain objects

@end  

@implementation YourClass

@synthesize delegates;

...   // other methods, make sure to initialize the delegates set with alloc-initWithOptions:NSPointerFunctionsWeakMemory

- (void) addDelegate: (id<YourDelegateProtocol>) delegate
{
    [delegates addPointer: delegate];
}

- (void) removeDelegate: (id<YourDelegateProtocol>) delegate
{
    // Remove the pointer from the array
    for(int i=0; i<delegates.count; i++) {
        if(delegate == [delegates pointerAtIndex: i]) {
            [delegates removePointerAtIndex: i];
            break;
        }
    } // You may want to modify this code to throw an exception if no object is found inside the delegates array
}

@end 
```

这是一个非常简单的版本，你可以用另一种方式来做。我不建议公开委托集，您永远不知道如何使用它，并且您会得到不一致的状态，特别是多线程。此外，当您添加/删除委托时，您可能需要运行其他代码，这就是将委托设置为私有的原因。
您可能还可以使用很多其他方法`delegatesCount`，例如。

PS：代码已被编辑为*NSPointerArray*而不是*NSMutableSet*，因为如评论中所述，应使用弱指针来保存委托以避免保留循环。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-15T07:08:04.970

除了[Ramys 答案](https://stackoverflow.com/a/14279115/1196673)，您还可以使用 a`[NSHashTable weakObjectsHashTable]`而不是 a `NSMutableSet`。这将只保留对您的委托的弱引用，并防止您遇到内存泄漏。您将获得与标准弱委托相同的行为`@property (nonatomic, weak) id delegate;`

```
@interface YourClass()

@property (nonatomic, strong) NSHashTable *delegates;

@end  

@implementation YourClass

- (instancetype)init
{
    self = [super init];
    if (self) {
        _delegates = [NSHashTable weakObjectsHashTable];
    }
    return self;
}

- (void) addDelegate: (id<YourDelegateProtocol>) delegate
{
    // Additional code
    [_delegates addObject: delegate];
}

// calling this method is optional, because the hash table will automatically remove the delegate when it gets released
- (void) removeDelegate: (id<YourDelegateProtocol>) delegate
{
    // Additional code
    [_delegates removeObject: delegate];
}

@end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T13:23:01.570

如果您正在编写将调用委托的函数，您可以拥有任意数量的委托。但是，如果您正在使用调用委托的类（您无法更改），那么您的委托不能超过该类支持的数量。

如果对您有用，您可以让一位代表给另一位代表打电话。设置第一个委托，以便它调用第二个委托（其指针存储在第一个委托对象中）。这可以很简单，使用 Objective-C 的动态调用机制预先定义“传递”哪些调用，或者相当复杂。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T14:11:58.720

Robbie Hanson 编写了一个[多播委托实现](http://deusty.blogspot.fr/2008/11/multicast-delegates-in-cocoa.html)。看起来像你需要的。[他在这里](https://github.com/robbiehanson/XMPPFramework/wiki/MulticastDelegate)更详细地讨论了它，以及它是如何在 XMPPFramework 中使用的。他对主要问题之一进行了很好的讨论，即如何处理多个委托实现给定方法的情况，该方法的返回值决定了类的行为（并且多个委托返回不同的值）。相关位：

> 什么是 MulticastDelegate？
> 
> xmpp 框架需要支持无限数量的扩展。这包括框架附带的官方扩展，以及您可能想要插入框架的任意数量的扩展或自定义代码。所以传统的委托模式根本行不通。XMPP 模块和扩展需要分离到它们自己独立的类中，但是这些类中的每一个都需要接收委托方法。而且标准的 NSNotification 架构也不起作用，因为其中一些委托需要返回变量。（另外，从通知的 userInfo 字典中提取参数真的很烦人。）
> 
> 因此，MulticastDelegate 允许您使用标准委托范例插入框架，但它允许多个类接收相同的委托通知。这样做的好处是您不必将所有 xmpp 处理代码放在一个类中。你可以将你的处理分成多个类，或者你认为合适的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-22T09:43:51.000

一个委托只能为一个对象设置，但可以将委托存储在数组中。Ramy Al Zuhouri 的变体很好，但我想说从数组中释放委托可能是一个问题，因为 NSArray（如 NSMutableArray）类保留所有添加的对象，但委托在大多数情况下是一个没有 retainCount 的分配属性。保留委托可能会导致具有委托实现的类将具有 retainCount + 1。解决方案是将委托存储在 NSMutableArray 中，就像指向委托方法的指针一样。我正在使用带有委托标头的单音类。

```
//YourClass.h file
@protocol YourDelegateProtocol <NSObject>    
-(void)delegateMethod;    
@end

@interface YourClass : NSObject    
+(YourClass *)sharedYourClass;
- (void) addDelegate: (id<YourDelegateProtocol>) delegate;
- (void) removeDelegate: (id<YourDelegateProtocol>) delegate
@end

//YourClass.m file
@interface YourClass()
@property (nonatomic, retain) NSMutableArray *delegates;    
-(void)runAllDelegates;
@end

@implementation YourClass

@synthesize delegates = _delegates;        

static YourClass *sharedYourClass = nil;

+(YourClass *)sharedYourClass {
    if (!sharedYourClass || sharedYourClass == nil) {            
        sharedYourClass = [YourClass new];      
        sharedYourClass.delegates = [NSMutableArray array];
    }
    return sharedYourClass;
}

-(void)addDelegate: (id<YourDelegateProtocol>) delegate{

    NSValue *pointerToDelegate = [NSValue valueWithPointer:delegate];
    [_delegates addObject: pointerToDelegate];
}

-(void)removeDelegate: (id<YourDelegateProtocol>) delegate{

    NSValue *pointerToDelegate = [NSValue valueWithPointer:delegate];
    [_delegates removeObject: pointerToDelegate];
}      

-(void)runAllDelegates{
//this method will run all delegates in array
    for(NSValue *val in sharedYourClass.delegates){
        id<YourDelegateProtocol> delegate = [val pointerValue];
        [delegate delegateMethod];
    }
}

-(void)dealloc{
    sharedYourClass.delegates =nil;
    [sharedYourClass release], sharedYourClass =nil;
    [super dealloc];
}

@end

//YourClassWithDelegateImplementation.h file
#include "YourClass.h"
@interface YourClassWithDelegateImplementation : NSObject <YourDelegateProtocol>        
@end

//YourClassWithDelegateImplementation.m file       
@implementation YourClassWithDelegateImplementation
-(id)init{
    self = [super init];
    if(self){
        //...your initialization code
        [[YourClass sharedYourClass] addDelegate:self];     
    }
    return self;
}

-(void)delegateMethod{
//implementation of delegate
}

-(void)dealloc{    
    [[YourClass sharedYourClass] removeDelegate:self];
    [super dealloc];
}
@end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T13:37:50.253

如果你想为类`B`和只有一个委托的类调用回调，你可以创建一个委托包装器`C`，它具有对类的引用和. 然后类调用回调 on和through 。`A``DWrap``B``C``A``B``C``DWrap`

# django - 如何将两个域指向同一个 django 页面？

> ID：14278863
> 
> 赞同：0
> 
> 时间：2013-01-11T13:07:32.393
> 
> 标签：django, nginx, webserver

我有一个运行站点 abc.com 的 Django 应用程序，在前端使用 nginx。

URL：[http](http://abc.com/products/widget) ://abc.com/products/widget显示了小部件产品页面。我还希望 URL [http://getwidget.com](http://getwidget.com)指向同一产品页面。我如何配置 nginx 来做到这一点？

我当前的 nginx 配置是这样的：

```
server {
        listen 80;
        server_name     abc.com;

        location / {
                client_max_body_size 10M;
                proxy_pass   http://127.0.0.1:8200;
        }

        location /static/
        {
            root /home/projects/abc/static;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:10:52.123

添加另一个服务器 {}，如下所示：

```
server{
    listen 80; 
    server_name getwidget.com;
    root /path/to/webroot;
} 
```

这个新服务器既可以指向您的项目，也可以指向旧的。如果您在项目中硬编码了一些 url，则需要更正此问题。

# clojure - 在clojure中获取传入var的字符串名称？

> ID：14278865
> 
> 赞同：1
> 
> 时间：2013-01-11T13:07:39.240
> 
> 标签：clojure

如何像这样获取第二个嵌套 var 的字符串名称？

```
(def bar "abc")
(defn string-var [foo]
  (...))

(= "bar" (string-var bar)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:32:43.170

你可以这样做`macro`

```
(def bar "abc")

(defmacro string-var [foo]
  (name foo))

(string-var bar)
=> "bar" 
```

# java - 如何解决 FindBugs DP_DO_INSIDE_DO_PRIVILEGED

> ID：14278870
> 
> 赞同：11
> 
> 时间：2013-01-11T13:07:53.487
> 
> 标签：java, findbugs

在阅读和扫描旧代码时，我看到了这些代码行：

```
public static void replaceNull(Object obj)
{
    if (obj == null)
    {
        return;
    }

    Field[] fields = obj.getClass().getDeclaredFields();
    if (fields != null)
    {
        for (Field field : fields)
        {
            field.setAccessible(true);
            Class<?> fieldType = field.getType();
            try
            {
                if (field.get(obj) == null)
                {
                    setDefaultValue(obj, field, fieldType);
                }
            } catch (IllegalArgumentException e)
            {
                logger. error("failed replacing null :"+ e.getMessage(),e);
            } catch (IllegalAccessException e)
            {
                logger. error("failed replacing null :"+ e.getMessage(),e);
            }

        }
    }
}

   private static void setDefaultValue(Object obj, Field field, Class<?> fieldType) throws IllegalAccessException
{
    if (fieldType == String.class)
    {
        field.set(obj, CommonConstants.BLANK);

    } else if (fieldType == Date.class)
    {
        field.set(obj, new Date());
    } else if (fieldType == Long.class)
    {
        field.setLong(obj, 0L);
    } else if (fieldType == Integer.class)
    {
        field.setInt(obj, 0);
    } else if (fieldType == BigDecimal.class)
    {
        field.set(obj, new BigDecimal("0.0"));
    }
} 
```

从程序的流程来看，如果值为空，编写者似乎希望为对象的所有数据成员创建一个默认值。

在使用 FindBugs 进行扫描时，findbugs 报告了“DP_DO_INSIDE_DO_PRIVILEGED”，并在 setAccessible(true) 上有以下描述：

> 不好的做法 - 调用的方法只能在 doPrivileged 块内调用 插件：findbugs 键：DP_DO_INSIDE_DO_PRIVILEGED 此代码调用需要安全权限检查的方法。如果此代码将被授予安全权限，但可能被没有安全权限的代码调用，则调用需要在 doPrivileged 块内进行。

我的问题为什么这么糟糕？我应该如何解决它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-08T22:15:43.973

来自 Javadocs [`field#setAccessible(boolean)`](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible-boolean-)：

> 首先，如果存在安全管理器，则使用 ReflectPermission("suppressAccessChecks") 权限调用其 checkPermission 方法。

如果没有`SecurityManager`安装，该程序将运行良好。但是，假设您的代码是作为共享库编写的，并且它恰好被某个设置了安全管理器的模块使用。在这种情况下，`field.setAccessible(true)`即使您的代码中的此操作和其他操作被视为受信任代码，也可能会被拒绝权限。这就是 FindBugs 发出此警告的原因。

为了保证`field.setAccessible(true)`无论调用者代码的权限如何都始终被授予权限，您可以将语句包装在 a 中`AccessController.doPrivileged`（您必须将其设为`field`final）：

```
AccessController.doPrivileged(new PrivilegedAction() {
    @Override
    public Object run() {
        field.setAccessible(true);
        return null;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-25T06:15:32.310

除了上面接受的答案之外，使用 Java 1.7+ lambda 表达式，同样可以通过以下方式实现：

```
AccessController.doPrivileged((PrivilegedAction) () -> {
    field.setAccessible(true);
    return null;
}); 
```

# forms - 如果表单验证失败

> ID：14278873
> 
> 赞同：0
> 
> 时间：2013-01-11T13:08:15.800
> 
> 标签：forms, codeigniter

如果表单验证失败，我想将人们重定向到某个页面。但是，我无法完全弄清楚如何。

如果我在下面的 REDIRECT HERE 评论中重定向人们，它也会在加载表单时重定向并导致无限循环。

```
public function create() {

    $this->form_validation->set_rules('email_adress', 'E-mail', 'required|valid_email|is_unique[users.email_adress]');

    if ($this->form_validation->run() !== FALSE) {
        // PASSED
    } 

    else {
        // REDIRECT HERE
    }

    $this->load->view('user_register_view');
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:26:58.317

你会像这样重定向：

```
redirect('insert_URI_here'); 
```

或者，如果您将它传递给同一控制器中的另一个方法，您可以这样做：

```
$this->method_name(); 
```

但是，如果您只是在 else 语句中删除它， user_register_view 将不会加载，因为 $this->form_validation->run() 将在验证错误或未提交表单时返回 false。

您需要做的是添加另一个检查以查找验证错误。如果验证失败并且没有验证错误，则您的表单尚未提交。

所以你可以做这样的事情：

```
public function create() {

    $this->form_validation->set_rules('email_adress', 'E-mail', 'required|valid_email|is_unique[users.email_adress]');
    if(($this->form_validation->run() == FALSE) && ($this->form_validation->error_string() == ''));
        //form not submitted yet
        $this->load->view('user_register_view');
    else if ($this->form_validation->run()) {
        // PASSED
    } else {
        //Validation errors
        redirect('insert_URI_here');
    }
} 
```

你将不得不玩弄它。我认为 $this->form_validation->error_string() 如果未提交，应该返回一个空字符串，但它可能是空值或假（抱歉，我不记得了）。

# php - 从 24 小时日的小时日期范围中选择日期

> ID：14278882
> 
> 赞同：1
> 
> 时间：2013-01-11T13:08:35.320
> 
> 标签：php, mysql, date, datetime

我需要做一份报告。该报告跟踪用户随着时间的推移在终端上单击的位置，这些单击存储在数据库中的 2 个表中。我需要找到一个优雅的解决方案来遍历日期范围并为一天中的每个小时进行报告。

我坚持使用最好和最优雅的方式循环数小时（即使该小时没有记录点击，报告也会显示从 00:00 到 23:00 的小时数）。

所以我的输出需要是（例如）

```
00:00   -   34 clicks
01:00   -   22 clicks
02:00   -   91 clicks
03:00   -   4  Clicks
...
...
23:00   -  17  Clicks 
```

我正在考虑在 PHP $startHour = 00:00; 中声明 2 个变量；$endHour = $startHour + 01:00;

并做一个循环增加 $startHour unitl 它匹配结束时间，但我不知道我是否可以像这样增加小时变量。

日期以这种格式存储：2012-11-22 09:17:29

这是我的mysql查询：

```
SELECT tbl_xboxstats.sessionend_date, 
       tbl_xboxstatsaux.XboxStatsId, 
       tbl_xboxstatsaux.ItemId, 
       tbl_xboxstats.UnitId, 
       tbl_xboxstats.UIId, 
       WEEK( tbl_xboxstats.sessionend_date ) AS WeekNumber, 
       Count(tbl_xboxstatsaux.ItemId) AS Count
FROM tbl_xboxstats
INNER JOIN tbl_xboxstatsaux ON tbl_xboxstats.id = tbl_xboxstatsaux.XboxStatsId
WHERE tbl_xboxstats.sessionend_date
BETWEEN '2012-11-22 "' . $startHour . '"'
AND '2012-11-22"' . $endHour . '"'
GROUP BY tbl_xboxstatsaux.XboxStatsId
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:18:49.347

我不明白这两个表是如何相关的（你说输出必须是小时+点击，但查询选择了很多字段）但是如果你想显示按小时分组的点击，请尝试以下操作：

```
SELECT EXTRACT(HOUR FROM sessionend_date) AS hour, COUNT(*) 
  FROM your_table
 WHERE DATE(sessionend_date) = '2012-11-22'
 GROUP BY hour; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:18:55.960

这将按小时对所有结果进行分组。

```
SELECT tbl_xboxstats.sessionend_date, 
       tbl_xboxstatsaux.XboxStatsId, 
       tbl_xboxstatsaux.ItemId, 
       tbl_xboxstats.UnitId, 
       tbl_xboxstats.UIId, 
       WEEK( tbl_xboxstats.sessionend_date ) AS WeekNumber, 
       HOUR( tbl_xboxstats.sessionend_date ) AS Hours
       Count(tbl_xboxstatsaux.ItemId) AS Count
FROM tbl_xboxstats
INNER JOIN tbl_xboxstatsaux ON tbl_xboxstats.id = tbl_xboxstatsaux.XboxStatsId
WHERE tbl_xboxstats.sessionend_date
BETWEEN '2012-11-22 "' . $startHour . '"
AND '2012-11-22"' . $endHour . '"
GROUP BY Hours
LIMIT 0 , 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:38:47.777

我认为最安全的方法可能是将您的开始日期转换为时间戳，添加 3600（1 小时），然后将其重新转换为日期格式。

或者，您可能想使用 strtotime 添加一个小时：

```
$starttime = "01:00";

$endtime = strtotime($starttime, "+1 hour") 
```

# android - HoloEverywhere 错误：构建路径包含重复的条目 src

> ID：14278884
> 
> 赞同：19
> 
> 时间：2013-01-11T13:08:36.537
> 
> 标签：android, android-holo-everywhere

我目前正在开发一个应用程序，它将使用 ActionBarSherlock 和 HoloEverywhere 但是每当我尝试将 HoloEverywhere 库导入 Eclipse 时，我都会收到以下错误：

构建路径包含重复条目：项目“库”中的“src”

我检查了库文件夹，里面没有重复，但它仍然抱怨。

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-28T08:08:18.160

这就是我的解决方法：

property->resource->Android，勾选一个Android build target，然后点击OK

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T22:43:10.250

有同样的问题，

尝试这个：

只需使用重复的 src 错误导入它，然后右键单击 HoloeEverywhere 库项目并选择属性。在属性中选择 Android（在左侧）并在 Project Build Target 下检查是否选中了 Target Name Android 4.2（或您的任何名称）。我的不是。如果您检查它，它应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:20:27.780

“HoloEverywhere”和“ActionBarSherlock”两个项目的名称为“library”。因此，您可能应该重命名它们。然后导入两个项目（忽略 HoloEverywhere 错误）。在“HoloEverywhere”项目属性中选择“Android 选项”。删除所有错误引用并添加对“ActionBarSherlock”项目库的新引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-14T16:29:19.683

要解决此问题，您必须右键单击左侧的项目名称并选择属性，然后选择 Android 并在构建目标中添加一个勾号，例如 Android 4.0，不要忘记应用并单击确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-03T12:47:06.210

路径中没有明显的重复，经过数小时尝试各种建议后，我将目标（在项目属性和清单中）从 15 更改为 17 以解决此问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-04T18:59:38.987

右键单击 HoloEverywhere 项目，转到 Android，在 Library 部分中，删除所选内容，然后他们选择已经在您的工作区中的 ActionBarSherlock 库。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-11T13:16:41.920

要修复它，请在项目主目录中打开 .classpath 文件并注释掉以下两行中的任何一行

> < classpathentrykind="src"path="onePath"/>
> < classpathentrykind="src"path="anotherpath"/>

这里一个和另一个 Paths 是引用您的库的路径。

然后，右键单击项目-> Android 工具-> 修复项目属性。然后清理并构建您的项目。

# jsf - view scoped backing bean的内部转换器怎么办

> ID：14278891
> 
> 赞同：1
> 
> 时间：2013-01-11T13:09:02.067
> 
> 标签：jsf, converter, inner-classes, view-scope

JSF 中视图范围的支持 bean 的另一个问题。我在视图范围内的支持 bean 中创建了一个内部类。那个内部类是转换器。我需要内部类，因为我必须从我的支持 bean 访问一些字段（在这种情况下选择一个项目的列表）。突然间，我发现每次请求后都会调用我的支持 bean 的`@PostConstruct`方法。经过一番检查，我意识到转换器属性是问题所在，经过一些谷歌搜索（一如既往）在[BalusC 的博客](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)上找到了这个原因。

所以，我的问题是如何让我的转换器正常工作，并且还有我的转换所需的数据列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:22:26.867

将转换器解耦为一个独立的类，并用于[`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29)访问转换器方法内的视图范围 bean 实例。

```
ViewBean viewBean = context.getApplication().evaluateExpressionGet(context, "#{viewBean}", ViewBean.class); 
```

然而，这是一个有点讨厌的设计。如果我了解您根据可用项目列表转换所选项目的具体功能要求，另一种方法是使用基于物理`<f:selectItem>`/`<f:selectItems>`组件转换的通用转换器。JSF 实用程序库[OmniFaces](http://omnifaces.org)有两个专门用于此目的的转换器，[`SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)即[`SelectItemsIndexConverter`](http://showcase.omnifaces.org/converters/SelectItemsIndexConverter).

# css - Firefox 不会使用 font-face 属性将字体加载到本地主机

> ID：14278902
> 
> 赞同：3
> 
> 时间：2013-01-11T13:09:46.710
> 
> 标签：css, font-face

我`font-face`在我的本地主机上使用 CSS3 属性，并在我的网站上托管了一个字体以加载到本地网页上。它可以在 IE 和 Chrome 上正常工作，但不能在 Firefox 上正常工作。奇怪的是，当我使用本地 URL 时，它也适用于 Firefox。

```
//Works with local URLs like http://localhost/repo/BMitra/BMitra.*
@font-face {
  font-family: "BMitra";
  src: url("http://fonts.gexek.com/repo/BMitra/BMitra.eot");
  src: local("☺"),
       url("http://fonts.gexek.com/repo/BMitra/BMitra.woff") format("woff"),
       url("http://fonts.gexek.com/repo/BMitra/BMitra.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
} 
```

我认为在本地主机上工作可能是问题，但我发现 Google 字体也在本地主机上正常工作。

你可以在你的 Firefox 和（Chrome 或 IE）浏览器上看到这个小提琴来演示我的意思。
[http://jsfiddle.net/66QE3/1/](http://jsfiddle.net/66QE3/1/)

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:35:01.210

Firefox 错误控制台说：

```
downloadable font: download failed (font-family: "BMitra" style:normal 
weight:normal stretch:normal src index:1): bad URI or cross-site access
not allowed
source: http://fonts.gexek.com/repo/BMitra/BMitra.woff 
```

要使用来自不同域的可下载字体，托管该字体的服务器应具有允许的跨站点访问设置，请参阅[HTTP 访问控制 (CORS)](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:53:40.960

我在 Web 应用程序中遇到了与**WOFF**字体格式类似的问题，结果发现问题是由于我的服务器无法识别（因此不提供）`application/x-woff`文件请求。

如果您的站点托管在 Windows IIS 上，请尝试使用本教程： http: [//www.projectseven.com/tutorials/servers/iis-woff/index.htm](http://www.projectseven.com/tutorials/servers/iis-woff/index.htm)

否则，这个 SO 问题可能会很方便：[MIME Type for WOFF Fonts](https://stackoverflow.com/questions/3594823/mime-type-for-woff-fonts)

# java - 使用 Java Wicket WiQuery Selectable

> ID：14278904
> 
> 赞同：1
> 
> 时间：2013-01-11T13:09:55.313
> 
> 标签：java, wicket, wiquery

这是使用 wiquery selectable 的代码：

```
 SelectableAjaxBehavior selectableAjaxBehavior = new SelectableAjaxBehavior() {
        private static final long serialVersionUID = 1L;

        @Override
        public void onSelection(Component[] components, AjaxRequestTarget     ajaxRequestTarget) {
            System.out.println("SIZE: " + components.length);
        }
    };
    selectableAjaxBehavior.getSelectableBehavior().setSelectedEvent(new JsScopeUiEvent() {
        @Override
        protected void execute(JsScopeContext scopeContext) {
            scopeContext.append("console.log('ID: ' + ui.selected.id);");
        }
    });
    selectableAjaxBehavior.setFilter(".tooth-image");
    add(selectableAjaxBehavior); 
```

我正在尝试在类中的图像上使用它：“牙齿图像”。当我从方法“onSelection()”中选择一些图像时，我得到一个空的选定组件数组。触发选择操作时，我在浏览器的控制台中看到元素的 ID，因此它可以工作。

所以，也许有人知道我必须做些什么来停止获得一个空的选定组件数组？

# html - div块下边距不生效

> ID：14278906
> 
> 赞同：4
> 
> 时间：2013-01-11T13:10:03.437
> 
> 标签：html, css

我有几个嵌套`div`块，我的问题是最后一个`left_navigation_container`在底部边缘没有 7px 间距，我不知道为什么（[jsfiddle](http://jsfiddle.net/pJ6Je/)）。

HTML：

```
<div class="left_navigation_outer">
    <div class="left_navigation_header_outer">
        <div class="left_navigation_header_logo">
            <strong>Title</strong>
        </div>
    </div>
    <div class="left_navigation_container">
    </div>
</div> 
```

CSS：

```
div.left_navigation_outer {
    background: green;
    background-repeat: repeat;
    margin:10px;
    -moz-box-shadow:  0px 0px 5px #ababab;
    -webkit-box-shadow:  0px 0px 5px #ababab;
    box-shadow:  0px 0px 5px #ababab;
}

div.left_navigation_header_outer {
    background: blue;
    background-repeat: repeat;
    height: 50px;
    border-top: 4px solid black;    
}

div.left_navigation_header_logo {
    line-height:50px;
    color: #efefef;
    text-shadow: 0 -1px #000;
    text-align: center;
    text-transform: uppercase;
}

div.left_navigation_container {
    background: red;
    background-repeat: repeat;
    height: 50px;
    margin: 7px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:37:20.870

您的问题是由计算此元素边距的方式引起的 - 它指的是其兄弟姐妹的位置，而不是父母的位置。

您可以为包含“TITLE”文本的其他 div 设置边距，并查看与 margin-top 相同的问题。

编辑：您可以添加`<div style="width: 100%; height: 1px;"></div>`之后`<div class="left_navigation_container"></div>`触发底部边距并使其可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:18:35.583

奇怪......不知道为什么，但如果你添加一个填充底部`1px`来`div.left_navigation_outer`修复它 - 这是我[的小提琴叉](http://jsfiddle.net/vYLyE/)

```
div.left_navigation_outer {
    background: green;
    background-repeat: repeat;
    margin:10px;
    -moz-box-shadow:  0px 0px 5px #ababab;
    -webkit-box-shadow:  0px 0px 5px #ababab;
    box-shadow:  0px 0px 5px #ababab;
    padding-bottom:1px; /* tricky hack to get the bottom spacing */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:15:25.453

你可以通过给出`div.left_navigation_outer`一个来解决这个问题`padding-bottom`

# jquery - 剑道网格在 IE8 中不呈现过滤器图标

> ID：14278913
> 
> 赞同：1
> 
> 时间：2013-01-11T13:10:41.307
> 
> 标签：jquery, telerik, kendo-ui

为什么 Internet Explorer IE8 在 Kendo 网格的标题栏中不显示过滤器图标？它是一个错误吗？我检查了代码并将其设置为`filterable:true`. 在火狐的作品中。

我这样使用它：

```
$("#myHtmlTable1").kendoGrid({
    dataSource: {
        pageSize: 18
    },
    scrollable: false,
    sortable: true,
    filterable: true,
    selectable: true,
    pageable: {
        input: false,
        numeric: false
    },
    change: function () {
        // MY LOGIC
    },
    columns: [
    {
        field: "Col1",
        width: 40
    },
    {
        field: "Col2",
        width: 250
    },
    {
        width: 40,
        field: "Col3"
    },
    {
        width: 150,
        field: "Col4"
    }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:57:35.007

这个[jsbin](http://jsbin.com/edamuj/325/)示例对您有用吗？在我看来，它和你的很相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:37:28.713

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`使用它解决的文档类型。

# c - 混淆迷宫生成器

> ID：14278927
> 
> 赞同：0
> 
> 时间：2013-01-11T13:11:28.083
> 
> 标签：c, obfuscation, main, maze

[我从http://www.mazeworks.com/mazegen/maze_faq](http://www.mazeworks.com/mazegen/maze_faq)找到了一个混淆的迷宫生成程序

```
int a[1817];main(z,p,q,r){for(p=80;q+p-80;p-=2*a[p])for(z=9;z--;)q=3&(r=time(0)
+r*57)/7,q=q?q-1?q-2?1-p%79?-1:0:p%79-77?1:0:p<1659?79:0:p>158?-79:0,q?!a[p+q*2]
a[p+=a[p+=q]=q]=q:0:0;for(;q++-1817;)printf(q%79?"%c":"%c\n"," #"[!a[q-1]]);} 
```

我不明白为什么要使用 main(z,p,q,r)。分配给这些变量的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:17:29.917

它被混淆了，你不应该理解它:)

这是声明整数变量的一种模糊方式。当您没有在 c 中明确编写变量的类型时，假定为 int。该部分`main(z,p,q,r)`也可以写成`int main(int z, int p, int q, int r)`，但这会很无聊。~~当 main 被调用时，没有值被传递给这些变量，因此在函数的开头它们可能未初始化。~~z、p 和 q 使用 argc 的值以及 argv 和 envp 的指针地址进行初始化。r 的值应该是未定义的。但是这些值中的大多数会立即被丢弃。例如，变量 p 的值在 main 函数开始的 for 语句中初始化，变量 z 在下一个 for 语句中初始化。

根据 ANSI，具有四个整数作为参数的 main 函数是否合法？省略 int 变量的类型是一种好习惯吗？你应该滥用函数参数作为局部变量吗？谁在乎，在混淆时它运行时是正确的。

# css - 我如何根据文本拉伸我的 div？

> ID：14278929
> 
> 赞同：2
> 
> 时间：2013-01-11T13:11:34.817
> 
> 标签：css, html, height, stretch

我如何根据文本拉伸我的 div

我想用用户发布的文本拉伸 div 的高度

看屏幕截图很清楚。

CSS：

```
.cmnt{ width: 570px; margin-top: 10px; margin-bottom: 10px; float: right; margin-right:     15px; clear:both; }
.cmnt .body{ width: 570px; background: #333333; min-height: 90px; height: auto; }
.cmnt .text{ width: 513px; float: left; font-family: arial; color: #FFF; }
.cmnt .arrow{ width: 570px; height: 7px; background: url(../img/comment_arr.jpg) no-repeat     17px top; }
.cmnt .info{ width: 470px; height: 20px; font-family: arial; font-size: 14px; color: #FFF; float: left; text-align: left; } 
```

HTML：

```
<div class="cmnt">
<a name="comment-id" />
<div class="body">
<div class="text">
text<br/>
text<br/>
text<br/>
text<br/>
text<br/>
text<br/>
text<br/>
</div>
<img class="avatar" src="assets/img/cmnt-u.jpg" align="absmiddle" />
</div>
<div class="arrow"></div>
<div class="info">
&nbsp;&nbsp;smith (date)
</div>
<div class="rp">
<a href="#comment">reply ↓&lt;/a>
</div>
</div> 
```

图片

![评论图片 => [评论视图][1]](../Images/ffe1cc8096465036056803e8aadf3209.png)

家长：

```
<div class="comment">
<div class="cmntHeader">Comments</div>
<div class="cmntBody">
<center>
....
</center>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:15:13.440

您可以尝试将`float: left`CSS 属性添加到**外部**容器。

```
.cmnt .body{ float: left; width: 570px; background: #333333; min-height: 90px; height: auto; } 
```

**这是给你的小提琴**

[http://jsfiddle.net/znQa8/](http://jsfiddle.net/znQa8/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:40:15.023

如果未指定，容器的高度会根据子（非浮动）元素自动调整。因为 div (class=text) 是浮动的，所以没有考虑它的高度。每当您使用浮动时，请在解决高度问题后系统地尝试清除它。

```
<div class="text">
...
</div>
<div style="clear:both"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:19:29.033

`min-height`将是您的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:17:16.037

可以添加：

```
div.body
{
height: auto;
} 
```

但我不确定它不会破坏整个布局

关于我的头疼，你需要清除你的花车：

```
.cmnt .body
{
    overflow: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T13:47:54.210

发生的事情是您有一个带有浮动子项的浮动容器。

在这种情况下，浮动容器“忽略”子维度。这可能是实现浮动的真正主要目标（即在包装文本上具有浮动图像）的副作用。

[在这篇文章中，您可以看到浮动目的和解决方法列表： http](http://www.ejeliot.com/blog/59) ://www.ejeliot.com/blog/59

这就是我认为迄今为止最好的解决方案，micro clearfix（最好的一点是你可以放入你的css并在你再次需要它时重复使用它）： http: [//nicolasgallagher.com/micro-clearfix-黑客/](http://nicolasgallagher.com/micro-clearfix-hack/)

只需将此 css 块添加到您的 css 文件中：

```
/*THE CLEARFIX HACK*/
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after { clear: both; }
.clearfix { *zoom: 1; } 
```

然后将 clearfix 类添加到“body”div。

jsfiddle：XZRH5

# sublimetext2 - Sublime Text 2 中 Laravel Blade 模板引擎的语法高亮

> ID：14278935
> 
> 赞同：11
> 
> 时间：2013-01-11T13:12:05.780
> 
> 标签：sublimetext2, laravel, sublimetext

在 Sublime Text 2 中，我需要采取哪些步骤才能使 Laravel Blade 模板引擎的语法高亮功能正常工作？

如[http://daylerees.com/2012/04/06/notable-blade-syntax-support-by-medalink/](http://daylerees.com/2012/04/06/notable-blade-syntax-support-by-medalink/)中所述，我将[https://github.com/Medalink/Laravel-Blade](https://github.com/Medalink/Laravel-Blade)解压并复制将该文件夹放入 Sublime 的包文件夹中。

但是，它似乎不起作用（见屏幕截图），即使我使用 Tools\Command Palette...\Set Syntax: Blade 手动设置它

这是否仅适用于特定的配色方案（如果是，哪些），或者我错过了什么？（我今天才开始使用 Sublime Text）

![在此处输入图像描述](../Images/2ecda55a8332c9cc809e24edecd6d940.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-11T17:51:55.467

为 Sublime Text 2 安装插件的最简单方法是通过 Package Control。

[要安装包控制](http://wbond.net/sublime_packages/package_control/installation)：

> 安装是通过 Sublime Text 2 控制台进行的。这是通过 ctrl+` 快捷方式访问的。打开后，将以下命令粘贴到控制台中：
> 
> ```
> import urllib2,os; pf='Package Control.sublime-package'; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read()); print 'Please restart Sublime Text to finish installation'
> This command creates the Installed Packages folder for you (if necessary), and then downloads the Package Control.sublime-package into it. 
> ```

安装包控制后，安装 Blade 语法荧光笔所需要做的就是：

1.  打开命令面板并输入“安装包”
2.  按回车
3.  在获取包列表后等待新的调色板出现
4.  输入“刀片语法”
5.  按回车
6.  享受

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-06T18:56:09.417

对于崇高文本 3 以及崇高文本 2

1.  安装 Sublime 包控制（更多帮助：[http](http://wbond.net/sublime_packages/package_control/installation) ://wbond.net/sublime_packages/package_control/installation ）

2.  然后重新启动崇高文本（2/3）并按---->控制（或mac中的命令）+ shift + p

3.  那里搜索包控制：安装包

4.  等待另一个交互屏幕

5.  搜索 Laravel Blade（如果需要，还可以搜索其他包）

{对于这个和其他的视频教程，订阅这个频道： https: [//www.youtube.com/channel/UChEv_j3fE4k2r7KcEApFDyQ](https://www.youtube.com/channel/UChEv_j3fE4k2r7KcEApFDyQ) }

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T17:10:02.547

此外，一旦你安装了包控制，你还应该安装包“DetectSyntax”。它将自动检测刀片语法，因此您不必为每个文件手动设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T06:15:18.390

我的存储在用户文件夹中，只需在文件夹搜索“laravel-blade”并从 json 配置中删除条目

查找：laravel-blade 位置：/Users/:username/Library/Application Support/Sublime Text 2/Packages

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T19:56:17.407

如果您使用 Package control 安装了 Laravel Blade Syntax Highlighter，该插件由于某种原因不断抛出错误。

包控制：指定的包 laravel-blade 不可用

我所做的只是 Preference > Browse packages 然后将文件夹重命名为 laravel-blade。现在似乎没有讨厌的错误。我所做的只是直觉。我什至没有阅读文件夹中文件中的任何内容。

-- 已编辑：转到 Preference > Browse packages > Package Control.sublime-settings 并删除有问题的条目。

# intellij-idea - intellij - java：找不到模块的 JDK '1.7'

> ID：14278936
> 
> 赞同：19
> 
> 时间：2013-01-11T13:12:06.777
> 
> 标签：intellij-idea

我刚刚在 Windows 8（和 7）上安装了 IntelliJ。然后我使用“Java Hello World”示例作为我的项目。

然后我选择了已安装的 JDK (C:\Program Files\Java\jdk1.7.0_10)。项目创建成功，我可以看到与项目相关的所有类等。当我“制作项目”时，我收到以下错误：

```
Compilation completed with 1 error and 0 warnings in 2 sec
1 error 
0 warnings
java: Cannot find JDK '1.7' for module 'TEST' 
```

无论我做什么，我都无法在 Windows8/IntelliJ 下编译任何 Java 代码

我尝试了以下方法：

*   使缓存失效。
*   切换到 32 位 JDK 而不是 64 位
*   Idea64.exe 而不是 idea.exe
*   安装 1.6 以防是 1.7 的问题？
*   将 JAVA_HOME 更改为指向不同的版本（即当前为 C:\Program Files\Java\jdk1.7.0_10）

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T13:15:29.267

```
project structure > project > choose correct jdk 
```

或者`ctrl+alt+shift+s > project> choose correct jdk`

还有平台设置> SDK的>并确保1.7在那里。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T13:57:06.353

找到了问题的根源。事实证明，Windows 8 与 OSX 共享相同的桌面。这以某种方式使 IntelliJ 感到困惑，因此它无法正确编译。

同时，通过删除“配置”下共享的“桌面”，可以解决问题。

![在此处输入图像描述](../Images/aba4b7363259f96164a7e34661a2b5bc.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T00:33:48.217

如果您仍想共享文档和桌面，解决方案是修改 idea.properties 文件（例如，在 C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.1\bin\idea.properties 下），以及更改以下属性以指向特定于您正在工作的操作系统的不同位置：

```
idea.config.path=
idea.system.path=
idea.plugins.path=
idea.log.path= 
```

我还复制了以前的文件夹（在我的计算机上它位于

```
\\psf\Home\.IntelliJIdea12 
```

) 到新位置以保留所有设置。

**更新**：安装 IntelliJ Idea 13 后我遇到了同样的问题。我将 .IntelliJIdea13 文件夹从 \\psf\Home 移动到 c:\Users\costa，然后我修改了 C:\Program Files (x86)\JetBrains\IntelliJ IDEA 13.0\bin\idea.properties 文件：

```
idea.config.path=C:/Users/costa/.IntelliJIdea13/config
idea.system.path=C:/Users/costa/.IntelliJIdea13/system
idea.plugins.path=C:/Users/costa/.IntelliJIdea13/config/plugins
idea.log.path=C:/Users/costa/.IntelliJIdea13/system/log 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-19T12:24:45.787

我在编辑时犯了错误，在我个人添加的行**的末尾**`idea.properties`留下了一个空格。**`idea.config.path=../.IdeaIC/config`**

 **这恰好导致了`Cannot find JDK '...' for module`错误消息。

我需要手动“修剪”该行，只需删除空格，重新启动 IntelliJ，一切正常。

我在扫描找到的`idea.log`文件时发现了这个`java.io.FileNotFoundException: C:\Software\IntelliJ IDEA Community Edition 14.1.3\.IdeaIC\config \tasks\root.contexts.zip`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-25T13:49:01.260

就我而言，Idea 说“无法保存设置”（可能是由于打开了很多项目。之后，它无法运行测试并显示“Cannot find JDK '1.8' for module XXX”消息。Idea 重启解决了这个问题为了我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-10T09:37:06.070

我相信这是一个 IntelliJ 错误。

这不是修复程序，但您可以通过转到设置 > 编译器并禁用“使用外部构建”来解决此问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-30T12:18:24.903

似乎有时 Intellij（或用户:-)）在导入设置时会感到困惑，尤其是当您更改 jdk 所在的路径时（对我来说，这是在迁移到新的 Linux 环境期间发生的）。

我可以纠正这个问题的唯一方法是删除用户的设置文件夹。

在 Linux 中：

我删除了文件夹（和子文件夹）：~/.IntelliJIdea12/

当然，这会删除保存的设置、许可证等**

# scala - 理解 Scala 中的“推断类型参数不符合类型参数边界”错误

> ID：14278937
> 
> 赞同：9
> 
> 时间：2013-01-11T13:12:11.410
> 
> 标签：scala, types, type-parameter

我不明白为什么我得到“推断的类型参数不符合类型参数边界”。首先，我定义了一个称为 CS 的特征，它可以由多个类（例如 CS01 和 CS02）实现：

```
trait CS[+T <: CS[T]] {
  this: T =>
  def add: T
  def remove: T
}

class CS01 extends CS[CS01] {
  def add: CS01 = new CS01
  def remove: CS01 = new CS01
}

class CS02 extends CS[CS02] {
  def add: CS02 = new CS02
  def remove: CS02 = new CS02
} 
```

`add`这个想法是在调用 CS01和`remove`CS02时保持实现的类型。其次，我想定义可以在每个符合 trait CS 的类上执行的操作。然后，我定义了一个名为的特征`Exec`（带有两个非常简单的类示例`Exec01`并`Exec02`混合`Exec`特征）：

```
trait Exec {
  def exec[U <: CS[U]](x: U): U
}

class Exec01 extends Exec {
  def exec[U <: CS[U]](x: U): U = x.add
}

class Exec02 extends Exec {
  def exec[U <: CS[U]](x: U): U = x.remove
} 
```

再一次，我需要保留混合`CS`特征的类的实现类型。这就是为什么 exec 用`[U <: CS[U]]`.

最后，我希望对它的任何`CS`启用操作都可以混合 trait `Executable`，从而可以执行 trait 之后的操作`Exec`：

```
trait Executable[T <: CS[T]] {
  this: T =>
  def execute(e: Exec): T = e.exec(this)
} 
```

但是，当我尝试编译时出现以下错误：

```
error: inferred type arguments [this.Executable[T] with T] do not conform to method exec's type parameter bounds [U <: this.CS[U]]
  def execute(e: Exec): T = e.exec(this)
                              ^ 
```

我不太明白，因为任何混合的类都`Executable`必须是`T`具有混合 CS 特征的约束的类型，因为`trait Executable[T <: CS[T]]`. 那么，为什么`this`不符合类型参数 bound`U <: CS[U]`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:38:37.540

如果您明确指定要执行的类型参数，则有效：

```
def execute(e: Exec): T = e.exec[T](this) 
```

似乎是类型推断的限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T14:13:10.480

*免责声明：这里不是 scala 大师，我在写这篇文章时正在学习它*。

首先，让我们简化示例。

```
scala> trait Moo[+X <: Moo[X]] 
defined trait Moo

scala> class Foo extends Moo[Foo]
defined class Foo

scala> def foobar[U <: Moo[U]](x: U) = x
foobar: [U <: Moo[U]](x: U)U

scala> foobar(new Foo)
res0: Foo = Foo@191275b

scala> class Bar extends Foo
defined class Bar

scala> foobar(new Bar)
<console>:12: error: inferred type arguments [Bar] do not conform to method 
foobar's type parameter bounds [U <: Moo[U]]
              foobar(new Bar)
              ^

scala> 
```

`foobar`接受一个`Foo`论点，但拒绝一个`Bar`只扩展的`Foo`。为什么？`foobar`是一个泛型，由其参数的类型参数化。*它对该*类型施加了限制。类型推断器不会检查参数类型的每一个祖先，希望找到一个满足界限的祖先。

那么如何对祖先类型施加界限呢？一种方法是使用存在类型。

```
scala> def foobar[V <: Moo[U] forSome {type U}](x: V) = x
foobar: [U <: Moo[_], V <: U](x: V)V

scala> foobar(new Foo)
res3: Foo = Foo@1154718

scala> foobar(new Bar)
res4: Bar = Bar@5a7ff7

scala> 
```

# css - Sass/Compass 没有移除旧的精灵

> ID：14278945
> 
> 赞同：7
> 
> 时间：2013-01-11T13:13:07.760
> 
> 标签：css, sass

我现在正在使用 SASS+Compass 生成精灵问题是当我使用原始配置时，罗盘在生成新精灵后会删除旧版本的精灵，但如果我要添加这一行

```
generated_images_dir = "generated_images" 
```

配置，指南针只是生成新的精灵，而不是删除旧的。

```
http_path = "/"
css_dir = "stylesheets"

sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts"

# generated_images_dir = "generated_images"
generated_images_path = "generated_images" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T20:17:32.243

我对 Compass 不太熟悉，但 Git 上也出现了完全相同的问题：

[https://github.com/chriseppstein/compass/issues/931](https://github.com/chriseppstein/compass/issues/931)

Chris Eppstein（Compass 开发人员）在 7 个月前提交了一个修复程序，该修复程序应该清理正确文件夹中的图像。我猜你将不得不升级你的 Compass 版本，如果它比它更旧并且你的问题应该得到解决。

# asp.net - 如果提交不应推送到存储库的文件夹，.hgignore 文件是否有效？

> ID：14278950
> 
> 赞同：2
> 
> 时间：2013-01-11T13:13:25.910
> 
> 标签：asp.net, mercurial, repository, tortoisehg

我已经阅读了很多关于这个 .hgignore 主题的教程，但还没有弄清楚。

在我的 Asp.Net Mvc 3 应用程序中，我有不想推送到存储库的“bin”和“obj”目录。我将 .hgingore 文本文件放入我的本地存储库文件夹（其中还有 .hg 文件夹）。

```
syntax: regexp
/bin$
/obj$ 
```

也试过这个：

```
syntax: glob
*obj
*bin 
```

我在某处读到，如果您提交文件夹（在我的情况下为 bin，obj），.hgignore 文件将不起作用。
会不会是这样，如果是这样，我怎么能不提交这些文件夹？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:48:57.687

1.  是的，.hgignore 只会影响添加新的、未版本控制的文件（和文件夹），并且不会对 Mercurial 中已有的对象执行任何操作
2.  您可以通过使用从版本控制中排除 hgignored 模式`hg forget`
3.  如果您想排除文件夹和文件夹**的所有内容**，不仅是根目录，您的模式不是最佳形式

`syntax: regexp`

`/bin/**`

`/obj/**`

# android - 试图将 URL 从 EditText 传递到 Fragment

> ID：14278951
> 
> 赞同：0
> 
> 时间：2013-01-11T13:13:29.220
> 
> 标签：android, webview, fragment

我正在尝试将字符串值“url”传递给片段以在 Web 视图中显示它。我不断收到以下错误：

**java.lang.NullPointerException**

这是我的代码：

```
protected void goToTab1View() {
    if(mTabState != TAB1_STATE){
        mTabState = TAB1_STATE;
        Toast.makeText(getActivity(), "goToTabView1: " + url, Toast.LENGTH_SHORT).show();
        FragmentManager fm = getFragmentManager();
        if(fm!= null){
            //Perform fragment transaction
            FragmentTransaction ft = fm.beginTransaction();
            FragTab1 f = new FragTab1();
            f.setString(url);
            ft.replace(R.id.fragment_content, f);
            ft.commit();
        }
    }
} 
```

我想我没有正确附加片段？？我只是对片段不熟悉，所以如果问题很明显，我深表歉意。任何帮助将非常感激。

堆栈跟踪：

```
 01-11 13:16:06.671: E/AndroidRuntime(23045): FATAL EXCEPTION: main
01-11 13:16:06.671: E/AndroidRuntime(23045): java.lang.NullPointerException
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.widget.Toast.<init>(Toast.java:92)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.widget.Toast.makeText(Toast.java:238)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at com.example.tabdemo.FragTab1.setString(FragTab1.java:57)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at com.example.tabdemo.TabFragment.goToTab1View(TabFragment.java:60)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at com.example.tabdemo.MainActivity$1.onClick(MainActivity.java:34)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.view.View.performClick(View.java:4202)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.view.View$PerformClick.run(View.java:17340)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.os.Handler.handleCallback(Handler.java:725)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.os.Looper.loop(Looper.java:137)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at java.lang.reflect.Method.invokeNative(Native Method)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at java.lang.reflect.Method.invoke(Method.java:511)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-11 13:16:06.671: E/AndroidRuntime(23045):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:20:23.523

看起来您正在Fragment`setString()`中显示 Toast。`FragTab1`这就是你面临的原因`NullPointerException`。

`setString()`删除里面的Toast Display`FragTab1`并运行它会为你工作的应用程序。

除非 FragTab1 附加到 Fragment Container，否则`getActivity()`在通过如下设置 String 替换 FragTab1 Fragment 之前，您不会得到您正在访问的内容

```
f.setString(url); 
```

这将调用 FragTab1 的 setString()，您将在其中显示 Toast，这将导致 NullPointerException，因为它无法获取上下文。

# maps - 两个地图形状文件之间的过渡

> ID：14278952
> 
> 赞同：0
> 
> 时间：2013-01-11T13:13:37.683
> 
> 标签：maps, d3.js

我有两个地图形状文件。一个是包含 28 个多边形的英国地区的地理投影。另一个是几何投影，显示相同的 28 个区域，但显示为简单的正方形。两者都是geojson文件。是否可以在两者之间创建过渡，以便形状从一个过渡到另一个？

# c - 从 C 调用的汇编过程（英特尔 8086）

> ID：14278955
> 
> 赞同：0
> 
> 时间：2013-01-11T13:13:44.560
> 
> 标签：c, assembly, intel, x86-16

> **可能重复：**
> [从 C 调用的 Intel 8086 Assembly 过程](https://stackoverflow.com/questions/14278373/intel-8086-assembly-procedure-calling-from-c)

我需要在汇编中为能够从 C 调用的 Intel 8086 准备一个程序（传递一个字符串并返回一个整数值（16 位））。我的组装程序“独立”运行得非常好。我需要帮助将它们连接在一起。

程序应该在 Intel 8086 上运行。我需要使用 MASM 或 emu8086 作为汇编器/模拟器。请推荐一个 C 编译器，以及一种制作能够调用汇编程序并获取返回值的简单 C 程序的方法。

*如何连接 ASM 文件和 C 文件？（编译器如何知道这个过程的定义/代码在哪里？）*

*如何接收汇编语言从 C 发送的字符串，以及如何将整数从汇编返回给 C？*

# php - PHP 如果有空格就拆分一个字符串并检测它是否被拆分

> ID：14278956
> 
> 赞同：1
> 
> 时间：2013-01-11T13:13:46.153
> 
> 标签：php

我需要将两个没有空格的变量传递给 Web 服务，这样我就不会得到无效的响应。

`$firstname`和`$surname`

我需要从一个名为的变量中生成这些变量`$display_name`

显示名称可能包含也可能不包含空格。它通常是“Joe Smith”或“JoeSmith”

所以我不能这样做（因为使用“JoeSmith”我不会得到姓氏）

```
$pieces = explode(" ", $display_name);
$firstname = $pieces[0]; // Joe
$surname   = $pieces[1]; // Smith 
```

同样我不能做（因为潜在的空间）

```
$firstname = $display_name; // Joe Smith
$surname   = $display_name; // Joe Smith 
```

我如何确保名字和姓氏都没有空格。即使显示名称是“Joe T Smith”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:15:33.713

```
if (count($pieces) < 2)
{
    // Wasn't split
}
else
{
    //Was split into at least two pieces
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:17:02.533

只需使用条件语句查看拆分是否成功，是否执行第一个代码块，是否执行第二个代码块

# jquery - 单击与该公司相关的“显示更多”链接时显示 Div 并隐藏其他 Div

> ID：14278963
> 
> 赞同：0
> 
> 时间：2013-01-11T13:14:18.243
> 
> 标签：jquery, html, hide, show

我在 foreach 循环中有 2 个 div。第一个 div 包含有关公司的信息，但形式较短，第二个 div 包含有关公司的完整信息。我想隐藏第一个 div 并在单击该公司的“显示更多”链接时显示第二个 div。在我的代码中，当我单击“显示更多”链接时，它不仅显示我单击的公司，还显示所有公司。

```
<?php   
  $X         = 0;
  foreach($companyRows as $row){ ?>
  <div class="first" >
        echo "a company information shortend form"
      </div>
      <div class="second" style="display:none">
       echo "a company information full form"
       </div>
       <a class="show_details"> show more</a>                               
  <?php $X++;
  } ?> 
```

这是 jQuery 。我是 jquery 和 php 的新手。

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".show_details").click(function(){
            $(".second").show();
            $(".first").hide();
        });
    });
</script> 
```

并想更改显示更多链接以显示更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:21:06.877

在你的循环中添加一个父`<div>`级......这样所有这些 html 都留在一个父级 div 中......这样我们就可以使用[parent()](http://api.jquery.com/parent/) ..

```
<?php   
  $X         = 0;
   foreach($companyRows as $row){ ?>
   <div class="parentDiv"> //***here****
    <div class="first" >
      echo "a company information shortend form"
    </div>
     <div class="second" style="display:none">
       echo "a company information full form"
     </div>
     <a class="show_details show_more"> show more</a>    //updated 
 </div>                           
<?php $X++;
} ?> 
```

**JQUERY** ****更新****

```
$(document).ready(function(){
    $(".show_details").click(function(){
        var $this=$(this);
        var $parent= $this.parent();
        if($this.hasClass('show_more')){
            $this.removeClass('show_more').addClass('show_less');

            $parent.find('.second').show(); //find parent div and div with second class inside that parent div
           $parent.find(".first").hide();
           $this.html('show Less');  // $(this).text('show Less');
        }else if($this.hasClass('show_less')){
            $this.removeClass('show_less').addClass('show_more');

            $parent.find('.second').hide(); //find parent div and div with second class inside that parent div
           $parent.find(".first").show();
           $this.html('show More');  // $(this).text('show Less'); 
        } 
    });
}); 
```

[html()](http://api.jquery.com/html/) .. 替换点击链接内的文本，或者你可以使用[text()](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:17:25.180

如果您不想添加更多 DIV 元素，请尝试此操作

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".show_details").click(function(){
            $(this).prev().show();
            $(this).prev().prev().hide();
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:18:16.400

以这种方式更改您的代码

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".show_details").click(function(){
            var $parent=$(this).parent();
            $parent.find(".second").show();
            $parent.(".first").hide();
        });
   });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:18:16.927

```
$(document).ready(function(){
    $(".show_details").click(function(){
        $(this).parent().find(".first").hide(100, function() {
            $(this).parent().find('.second').show(100);
            $(this).html(" show less").addClass("hide_details").removeClass("show_details");
        });
    });
}); 
```

# jboss - JBOSS集群间文件上传复制

> ID：14278969
> 
> 赞同：0
> 
> 时间：2013-01-11T13:14:44.627
> 
> 标签：jboss, cluster-computing

我有一个在 JBoss 上运行的 Web 应用程序，我们已经成功设置了一个集群。在我们的 Web 应用程序中，我们允许用户上传存储在系统文件夹中的图像文件，现在我的问题是如何让这些文件跨集群复制。有没有办法使用 Jboss 复制存储在集群其他节点中的文件。请分享你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:27:40.847

在 JBoss 5.1 中，JBoss 的“all”配置文件中有一个文件夹“farm”。此文件夹中的所有内容都将在集群中同步。

您真的要在集群中复制用户上传的文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:50:38.593

这不能（*也不应该*）通过集群完成。如果您想要复制文件，那么您应该使用像 NFS 这样的共享文件系统或像数据库服务器这样的其他持久存储选项（尽管这将是 NFS 的更昂贵的替代方案）。

# visual-c++ - 将 char * 重新分配为 null 时释放内存

> ID：14278975
> 
> 赞同：0
> 
> 时间：2013-01-11T13:15:09.150
> 
> 标签：visual-c++

我对 c++ 中的字符串内存使用有点困惑。

第二次将 *PChar 重新分配为 NULL 是否很好？第一次分配给 *PChar 字符串的内存会被释放吗？

```
char * fnc(int g)
{
...
}

char *PChar = NULL;
PChar=fnc(1);
if (PChar) { sprintf(s,"%s",PChar); } ;

*PChar = NULL;
PChar=fnc(2);
if (PChar) { sprintf(s,"%s",PChar); } ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:17:50.363

第一件事。以下陈述不是您想要的：

```
*PChar = NULL;
PChar=fnc(2); 
```

您没有将 null 分配给指针，而是将值零 (0) 赋给所述缓冲区的第一个字符。你可能愿意这样做：

```
 PChar = NULL;
   PChar=fnc(2); 
```

作为一种良好的编程习惯，是的，您应该在使用空指针后为其分配一个指针（并且可能已释放内存）。但是将指针分配给 null 不会释放内存 - 指针不会指向分配的内存，而是指向不存在的内存位置。`delete`如果它是使用分配的，则需要`new`调用，或者`free`如果分配是由调用，则需要调用`malloc`。

对于给定的语句，编译器无论如何都会删除以下语句，作为优化过程：

```
 // PChar = NULL;
 PChar=fnc(2); 
```

使用指针时需要非常小心，并使用静态分配的数据或动态分配的缓冲区分配给它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:14:44.843

我建议声明一个 PChar 类型的缓冲区，并在函数调用中将指针传递给该缓冲区。良好的编程实践还用于传递应在函数中检查的缓冲区的允许长度。

```
#define MAX_PCHAR_LEN 1024 // or constant const DWORD . . .

PChar PCharbuf[MAX_PCHAR_LEN] = {0}; // initialize array with 0s

//make a call
fnc (&PCharbuf, MAX_PCHAR_LEN, 2); // whatever 2 means 
```

这样您就不必担心谁分配和谁释放了内存，因为在 PCharbuf 超出范围后释放是自动的。

# javascript - 动画回调函数未触发 - 使用队列：false

> ID：14278980
> 
> 赞同：0
> 
> 时间：2013-01-11T13:15:13.817
> 
> 标签：javascript, jquery

当我添加时，我无法让我的动画完整功能触发

```
{持续时间：2000，队列：假}
```

例子：

```
current.animate({left: "-=600px"}, {duration : 2500, queue : false});
next.animate({left: "-=600px"}, {duration : 2500, queue : false}, function(){
  // Run stuff here once both animations above have finished  
}); 
```

我试过 .done() 没有成功，

任何想法将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:23:31.560

您可以通过以下方式实现此行为：

```
elem.animate({left: "-=600px"}, {duration : 2500, queue : false, complete: function () {
   //some actions
}}); 
```

这是一个例子：http: [//jsfiddle.net/byQZp/1/](http://jsfiddle.net/byQZp/1/)

# java - 我怎样才能摆脱 if 块？

> ID：14278982
> 
> 赞同：3
> 
> 时间：2013-01-11T13:15:15.627
> 
> 标签：java, if-statement, controls

考虑这个代码示例。

这段代码只是用来解释我的问题。

```
boolean status = false;
for ( int i = 0; i <= 5; i++ ) {
    if ( i == 4 ) { 
        System.out.println ( "Enter into first if" );
        if ( status == false ) {
               System.out.println ( "Enter into second if" );
               status = true;
               if ( status == true ) {
                    System.out.println ( "Enter into third if" );
                    //third if body
               }
               //second if body                             
        }
        //first if body
        System.out.println ( "Before exiting first if" );
    }
} 
```

**我想做的就是从第三个如果到第一个如果。**

我们知道**break 和 continue**可以在**loops**中使用。我们可以为**块**实现相同的目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:28:02.380

好吧，你可以打破任何块：

```
public class Bar {

  static void foo(boolean b) {
    foo: {
      if (b) {
        break foo;
      }
      System.out.println(b);
    }
  }

  public static void main(String[] args) {
    foo(true);
    foo(false);
  }
} 
```

输出：

```
false 
```

有关更多信息，请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)。

但是，如果您尝试在我的一个项目中提供此代码，我们可能会说话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:21:35.440

创建一个封装 if #2 和 #3 的方法。然后`return`从#3 if 块内部：

```
boolean status = false;
for ( int i = 0; i <= 5; i++ ) {
    if ( i == 4 ) { 
        System.out.println ( "Enter into first if" );
        status = perform2ndAnd3rdIf(status);
        System.out.println ( "Before exiting first if" );
    }
}

private boolean perform2ndAnd3rdIf(boolean status) {
    if ( status == false ) {
        System.out.println ( "Enter into second if" );
        status = true;
        if ( status == true ) {
            System.out.println ( "Enter into third if" );
            return status;
            //third if body
        }
        //second if body                             
    }
    return status;
} 
```

使用方法而不是嵌套`if`块可以提高整体可读性和理解代码的能力。而不是代码注释，你应该给那个方法一个有意义的名字（当然*不是* ~~`perform2ndAnd3rdIf()`~~）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T13:26:01.730

你总是可以这样做：

```
mylabel:
boolean status = false;
for ( int i = 0; i <= 5; i++ ) {
    if ( i == 4 ) { 
        System.out.println ( "Enter into first if" );
        if ( status == false ) {
               System.out.println ( "Enter into second if" );
               status = true;
               if ( status == true ) {
                    System.out.println ( "Enter into third if" );

                    break mylabel;

                    //third if body
               }
               //second if body                             
        }
        //first if body
        System.out.println ( "Before exiting first if" );
    }
} 
```

但我认为你应该重构你的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T13:20:14.757

我不确定您要通过此实现的要求。在第三个循环之后再添加一个 if 条件，如果仅满足条件，则执行第二个循环的剩余部分。您可以在第三个 if 块内设置此条件.

而不是所有这些，你可以切换到'switch'，这会更干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T13:26:01.237

我会引入第二个状态标志来捕捉最里面的条件：

```
boolean secondStatus = false;
boolean status = false;
for ( int i = 0; i <= 5; i++ ) {
    if ( i == 4 ) { 
        System.out.println ( "Enter into first if" );
        if ( status == false && secondStatus == false ) {
               System.out.println ( "Enter into second if" );
               status = true;
               if ( status == true ) {
                    System.out.println ( "Enter into third if" );
                    //third if body
                    secondStatus = true;
               } else {
                   //second if body
               }                           
        }
        //first if body
        System.out.println ( "Before exiting first if" );
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-24T03:45:55.877

`while`添加循环和`break`语句的简单组合可能会有所帮助。

```
boolean status = false;
for ( int i = 0; i <= 5; i++ ) {
    if ( i == 4 ) { 
        System.out.println ( "Enter into first if" );
        while(True) {
            if ( status == false ) {
                System.out.println ( "Enter into second if" );
                status = true;
                if ( status == true ) {
                    System.out.println ( "Enter into third if" );
                    break;//The key statement
                    //third if body
                }
                //second if body                             
            }
            break;//Don't forget break while loop
        }          
        //first if body
        System.out.println ( "Before exiting first if" );
    }
} 
```

或者您可以使用`try .. catch ..`.

# xml - 当已知加密和未加密字符串时如何解密 XML 文件中的字符串

> ID：14278983
> 
> 赞同：1
> 
> 时间：2013-01-11T13:15:16.603
> 
> 标签：xml, encryption, scripting

我需要编写一个脚本，该脚本将从客户端文件中提取所有数据，而无需启动在其中创建它们的应用程序。该应用程序将所有数据保存到 XML 文件中，在压缩文件之前仅加密所述文件的内容，并且最后更改压缩文件的扩展名，使其“更难”识别。

该应用程序有一个文本查看器，它将显示客户端文件中的部分数据，但不是全部，这使得我和我的同事必须将复制该文本并在我们需要的所有其他区域中的字段中进行切换从中提取数据。尝试使用应用程序本身很慢而且几乎没有用，因为它存在可怕的内存问题，导致它不断崩溃。

无论如何 - 我能够弄清楚一些基础知识，因为加密似乎相当弱，或者至少很容易看到它使用的模式。我将要使用的每台机器上的每个客户的每个客户端文件对于相同的字符都将具有相同的输出。所有文件之间的加密都是相同的。

它更改三个字符的块（在每个三个字符块的开头添加一个字符），从第四个重新开始。`=`似乎是一个空字符。例如：`A`成为`QQ==`、`AA`是`QUE=`、`AAA`是`QUFB`、`AAAA`是`QUFBQQ==`

我已经找到了基础知识，它只是所有已更改的 Unicode 字符的列表，例如`QQ==`将是`A`、`Qg==`是`B`、`Qc==`是`C`，我们移动到`RA==`for `D`、`RQ==`for `E`，然后循环遍历字符表。

当我们在字符串中引入第二个和/或第三个字符时，它开始变得有趣，就像它现在有`ITA=`for一样`!0`，并且向前移动四个字母数字字符，如下所示：`ITE=`for `!1`，`ITY=`for`!6`和回滚到`ITc=`for `!7`，直到`IT8=`for`!>`再移动到第二个位置的下一个字符并像这样重新`IUA=`开始`!?`。等等。

无论如何，我会喜欢一些关于这里的一些事情的指示。我如何获取我所知道的并找到算法？从那里，我如何使用它来解密其余数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:27:08.123

那不是加密，那是[BASE64](http://en.wikipedia.org/wiki/Base64)编码。它是一种仅使用 64 个可打印 ASCII 字符对二进制数据流进行编码的方法。当通过可能无法正确处理二进制数据（即作为电子邮件附件的二进制文件）的通信通道发送二进制数据时使用它。

每 3 个输入字符（24 位）编码为 4 个输出字符，其中仅使用 64 种可能性（每个字符 6 个有效位 * 4 = 24 位）。尾随`=`标志是填充。

几乎所有主要语言，甚至 XSLT（谷歌“XSLT base64”）都有一些库方法可以在 BASE64 之间进行转换。

甚至还有一个[网站](http://www.base64encode.org/)（实际上有几个）可以与 BASE64 相互转换。

# jquery - jQuery.push 进入数组返回未定义

> ID：14278985
> 
> 赞同：0
> 
> 时间：2013-01-11T13:15:27.310
> 
> 标签：jquery, arrays, push, undefined

我正在尝试将此 h5 标记中的数据推送到我的收藏夹数组，但它一直返回未定义。它确实返回了一些东西，它在点击时起作用，但它只是一直返回未定义。

```
<h5 id="favoriteartist"> Armin van Buuren </h5> 
```

这是我的脚本。

```
$('#favoriteadd').live('click',function() {
    var favorites = []
    favorites.push( $('h5 #favoriteartist').val() );
    console.log(favorites);
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T13:17:44.707

你的选择器是错误的。简单使用：

```
$("#favoriteartist"); 
```

而且你应该使用`.text`not `.val`：

```
favorites.push( $("#favoriteartist").text() ); 
```

如果你使用的是 jQuery 1.7+，你应该使用`.on`not `.live`：

```
$(document).on('click', '#favoriteadd', function() {
    var favorites = []
    favorites.push( $('#favoriteartist').text() );
    console.log(favorites);
}); 
```

现在您可以`document`使用静态选择器进行更改。如果`#favoriteadd`在绑定事件时在文档中，您可以简单地将其绑定为普通事件：

```
$('#favoriteadd').on('click', function() {
    var favorites = []
    favorites.push( $('#favoriteartist').text() );
    console.log(favorites);
}); 
```

* * *

`h5 #favoriteartist`就像说：

1.  给我整个页面上的所有 h5 元素。
2.  现在给我所有具有 id 的元素，`favoriteartist`女巫是这些 h5 的（孙）子。

我们知道 html 中的 id 总是唯一的，所以我们简单地说：

1.  给我带有 id 的元素`favoriteartist`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:19:07.693

您的代码不会返回未定义。它返回一个包含一个元素的数组。该元素`undefined`意味着您的选择器正在选择一个`h5`没有值的元素，并且该选择的 val() 返回未定义。`.val()`可以用于例如。一个文本输入字段，用于获取用户输入的值

```
<input type="text" id="t" value="..." />
...
$("#t").val(); //will return the value of the input element 
```

在 h5 元素的情况下，如果您希望获取该元素的文本内容，请`.text()`改为使用。

```
$("#favoriteartist").text(); //will return " Armin van Buuren " 
```

# java - 在java中实现跨进程锁定

> ID：14278991
> 
> 赞同：1
> 
> 时间：2013-01-11T13:15:44.517
> 
> 标签：java, multithreading, synchronization

我正在尝试实现跨进程锁定，我只想要一个 jvm 来运行我的一段代码。以下代码在任何情况下都会中断吗？如果是这样如何使它牢不可破？

PS：以下代码取自[这里](https://stackoverflow.com/questions/5297813/cross-process-synchronization-in-java)并根据我的要求进行了修改。

```
public class TestMe
{
    public static void main(String args[]) throws InterruptedException
    {
        try
        {
            if (crossProcessLockAcquire())
            {
                // Success - This process now has the lock. 
                System.out.println("I am invincible");
                Thread.sleep(10000);
            }
            else
            {
                System.out.println("I am doomed");
            }
        }
        finally
        {
            crossProcessLockRelease(); // try/finally is very important.
        }
    }
    private static boolean crossProcessLockAcquire()
    {
        try
        {
            file = new File(System.getProperty("java.io.tmpdir") + File.separator + "file.lock");
            if (!file.exists())
            {
                file.createNewFile();
            }
            RandomAccessFile randomAccessFile = new RandomAccessFile(file,
                    "rw");
            FileChannel fileChannel = randomAccessFile.getChannel();
            fileLock = fileChannel.tryLock();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return fileLock == null ? false : true;
    }
    private static void crossProcessLockRelease()
    {
        if (fileLock != null)
        {
            try
            {
                fileLock.release();
                fileLock = null;
                if (file.exists())
                {
                    file.delete();
                }
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }
    private static FileLock fileLock = null;
    private static File file = null;
    static
    {
        Runtime.getRuntime().addShutdownHook(new Thread()
        {
            public void run()
            {
                crossProcessLockRelease();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:36:17.993

它可以在这里中断：

```
 file = new File(System.getProperty("java.io.tmpdir") + File.separator + "file.lock");
        if (!file.exists())
        {
            file.createNewFile();
        } 
```

在您测试文件是否存在和创建它之间，可能有其他进程创建了它。

将其替换为目录并检查`.mkdir()`（如果目录已存在，它将失败）的返回代码，因为`.mkdir()`在文件系统级别是原子的：

```
file = new File("/path/to/sentinel");
if (!file.mkdir())
    someoneHasLocked(); 
```

当然，`.delete()`关于“解锁”。

# batch-file - 如何将从命令获得的状态写入 .txt BATCH

> ID：14278994
> 
> 赞同：1
> 
> 时间：2013-01-11T13:15:56.173
> 
> 标签：batch-file

全新编辑：我设法从 cmd 获取日志，然后使用名为 status (no extension) 的日志生成一个文件，然后我调用一个名为 status.bat 的批处理，这是代码：

```
Find /N "License:" "status" >> license.txt 
```

这对我来说很好，除了它显示行号和上面的单词-------状态之外，是否有让它不显示行号和“-- ----状态”在每个上面？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:50:19.333

将 status.bat 更改为：

```
type status | find "License:" >> license.txt 
```

这不会显示 --- 状态或行号。但是，它会更慢，但这**可能**仅在文件大小为几兆时才重要。

见`type /?`和`find /?`寻求帮助。

# opencv - 显示捕获的视频

> ID：14278995
> 
> 赞同：0
> 
> 时间：2013-01-11T13:15:56.837
> 
> 标签：opencv

在 opencv2.2 visual c++ express 2010 中，灰屏显示为输出而不是实际的相机输入。是因为任何 dll 文件吗？

我正在尝试执行一个简单的 opencv 程序来显示捕获的视频源，但得到一个灰色窗口作为输出。

```
int main(void) {

CvCapture* capture = cvCaptureFromCAM (CV_CAP_ANY);
if( !capture ) {
    fprintf( stderr, "ERROR: capture is NULL \n");
    getchar();
    return -1;
}
// create a window in which the capture images will be presented
cvNamedWindow("mywindow", CV_WINDOW_AUTOSIZE);
// show the image captured from the camera in the window and repeat
while (1) {
    // get one frame
    IplImage* frame = cvQueryFrame (capture);
    if (!frame) {
        fprintf( stderr, "ERROR: frame is null...\n");
        getchar();
        break;
    }
    cvShowImage("mywindow", frame);
    // do not release the frame

    // terminate
    if ((cvWaitKey(10) & 255) == 27) break;
}

// release the capture device
cvReleaseCapture (&capture);
cvDestroyWindow("mywindow");

return EXIT_SUCCESS;
} 
```

# c# - 元素无法接收 MouseUp 事件

> ID：14278996
> 
> 赞同：0
> 
> 时间：2013-01-11T13:15:59.803
> 
> 标签：c#, wpf, checkbox, popup

`CheckBox.Content`是一个`ToggleButton`和一个*`Popup`*。当`ToggleButton`is时`Checked`，*Popup*显示。在*`Popup`*中，存在三个元素。如果我单击一个元素，则*`Popup`*应该关闭。

重现问题的步骤：

1.  单击黑色椭圆，弹出窗口将显示
2.  单击红色、绿色或蓝色椭圆，弹出窗口不关闭*（弹出窗口预计会关闭）*。

这是我的代码。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
        <CheckBox>
            <DockPanel Panel.ZIndex="2"  HorizontalAlignment="Right">
                <Popup Name="facePopup" DockPanel.Dock="Bottom" StaysOpen="True"  AllowsTransparency="True"
                       Placement="Bottom" VerticalOffset="1"
                       IsOpen="{Binding Path=IsChecked, ElementName=roleFaceButton}" MouseUp="facePopup_MouseUp" >
                    <StackPanel>
                        <Ellipse Fill="Red" Width="18" Height="25"/>
                        <Ellipse Fill="Green" Width="18" Height="25"/>
                        <Ellipse Fill="Blue" Width="18" Height="25"/>
                    </StackPanel>
                </Popup>
                <ToggleButton x:Name="roleFaceButton">
                    <Ellipse Fill="Black" Width="18" Height="25"/>
                </ToggleButton>
            </DockPanel>
        </CheckBox>
</Window> 
```

和代码隐藏

```
private void facePopup_MouseUp(object sender, MouseButtonEventArgs e)
{
    facePopup.IsOpen = false;
} 
```

我发现如果我`CheckBox`用*Border*代替，我的代码就可以工作。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:51:23.197

```
I find that if I substitute CheckBox by Border, my code will work. Why? 
```

据我所知，您不能将鼠标向上或向下事件添加到复选框，因为它们被 Checked 事件消耗。由于边框没有该默认行为，因此可以添加鼠标事件。您可以尝试使用`PreviewMouseLeftButtonDown`它应该可以正常启动