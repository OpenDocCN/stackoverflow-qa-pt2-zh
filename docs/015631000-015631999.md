# StackOverflow 问答 15631000-15631999

# scheme - 在 Racket 中，如果使用点符号构造不带引号的对，是否可以对第二个元素使用变量或表达式值？

> ID：15631001
> 
> 赞同：1
> 
> 时间：2013-03-26T06:48:43.223
> 
> 标签：scheme, racket

在球拍中，以下工作：

```
(+ . [1 2]) ; => 3

{ define a + }
(a . [1 2]) ; => 3 
```

但是，我认为没有办法定义`b`为`(1 2)`列表以便获取`(+ . b)`和`(a . b)`返回`3`。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:51:27.450

当然，只需使用`apply`：

```
(define a +)
(define b '(1 2))
(apply a b)       ; => 3
(apply + b)       ; => 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:23:18.037

这个怎么样......不使用`apply`但使用`eval`. 但说真的，在这种情况下使用`apply`是一个更好的主意，它没有任何问题（虽然`eval` [是邪恶](https://stackoverflow.com/questions/2571401/why-exactly-is-eval-evil)的，请参阅[文档](http://docs.racket-lang.org/guide/eval.html)以了解名称空间的最后一部分）：

```
(define a +)
(define b '(1 2))

; executing in the evaluation window

(eval `(+ ,@b))
=> 3
(eval `(a ,@b))
=> 3

; executing from the definitions window

(define-namespace-anchor an)
(define ns (namespace-anchor->namespace an))    
(eval `(+ ,@b) ns)
=> 3
(eval `(a ,@b) ns)
=> 3 
```

# php - 如何在 PHP 中使用 FOR 循环创建二维数组？

> ID：15631008
> 
> 赞同：1
> 
> 时间：2013-03-26T06:49:13.847
> 
> 标签：php, arrays, for-loop

这是存储数据库值的数组：

```
$dataTitle[0] = "TIR";
$dataTitle[1] = "OIL";
$dataTitle[2] = "SPK";

$dataDesc[0] = "Tires";
$dataDesc[1] = "Oil";
$dataDesc[2] = "Spark Plugs";

$dataValue[0] = "100";
$dataValue[1] = "10";
$dataValue[2] = "4"; 
```

我可以使用以下方法手动将数据插入二维数组，但如果我要插入 100 条或更多行记录，它就没有用。这就是为什么下面需要 FOR 循环的原因。

```
$ResultView = array(array($dataTitle[0], $dataDesc[0], $dataValue[0]),
                array($dataTitle[1], $dataDesc[1], $dataValue[1]),
                    array($dataTitle[2], $dataDesc[2], $dataValue[2])
               ); 
```

如果使用下面的 FOR LOOP，则二维数组只存储最后一行记录，省略了第一行和第二行记录。

```
for ($i=0; $i<=2; $i++) {
          $ResultView = array(array($dataTitle[$i], $dataDesc[$i], $dataValue[$i])
               );
    } 
```

当我为上面的 for 循环发出下面的输出脚本时，我得到了第 3 行的输出值并且缺少第 1 行和第 2 行结果。请帮忙！

```
for ($row=0; $row<=2; $row++) {

    for ($col=0; $col<=2; $col++) { 

        echo $ResultView[$row][$col]."&nbsp | ";
    }

    echo '<br />';
} 
```

但是，我正在寻找一种使用 FOR 循环代替上述方法的方法。如何？

实际输出为：

```
Row 1 => TIR | Tires | 100 
Row 2 => OIL | Oil | 10 
Row 3 => SPK | Spark Plugs | 4 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:39:50.757

做了

```
 for ($i=0; $i<=2; $i++) {
      $ResultView[] = array(array($dataTitle[$i], $dataDesc[$i], $dataValue[$i])
           );
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:23:22.700

这是最终的解决方案

```
 $dataTitle = array('TIR','OIL','SPK');
  $dataDesc=array('Tires','Oil','Spark Plugs'); 
 $dataValue=array('100','10','4');
 for ($i=0; $i<=2; $i++) { 
 $ResultView[] = array(array($dataTitle[$i], $dataDesc[$i], $dataValue[$i])); 
} 
     for ($row=0; $row<=2; $row++) 
     {   
         for ($col=0; $col<=2; $col++) 
         { 
              echo $ResultView[$row][0][$col]."  | "; 
          } 
   echo '<br />'; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:30:13.773

根据您的数组结构，您可以使用它

```
$data[0] = "TIR";
$data[1] = "Tires";
$data[2] = "100";

$data1[0] = "OIL";
$data1[1] = "Oil";
$data1[2] = "10";

$data2[0] = "SPK";
$data2[1] = "Spark Plugs";
$data2[2] = "4";

$resultCount = 3;  // adjust this value for the number of results you have
$products = array();

for ($i = 0; $i < $resultCount; $i++) {
    $products[] = ${'data' . ($i ? $i : '')};
}

print_r($products); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:55:29.200

如果您的数据来自数据库：您可以使用`while`循环

```
$products        = array();
/* data from first table*/
while($dataTitle = mysql_fetch_assoc($sql)){
   $products[]   = $dataTitle;
} 

/* data from second table*/
while($dataDesc  = mysql_fetch_assoc($sql)){
   $products[]   = $dataDesc;
}

/* data from third table*/
while($dataValue = mysql_fetch_assoc($sql)){
   $products[]   = $dataValue;
}

echo "<pre>";
print_r($products); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T06:58:19.060

如果您的数据库结果行作为数组返回，那么您应该能够遍历结果并将它们推送到您的产品数组中。

```
// assuming $results contains your DB response
$products = array();
for ($i = 0; $i < count($results); $i++) {
     $products[] = $results[$i];  // or whatever method you use to fetch a row
} 
```

尽管您的数据库结果可能只是像多维数组一样使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T07:14:43.810

```
**Method-1**  Raw method to generate the 2 diamentional array
This is your Array

$products = array( array( 'TIR', 'Tires', 100 ),
array( 'OIL', 'Oil', 10 ),
array( 'SPK', 'Spark Plugs', 4 ),
array( 'SPK', 'Spark Plugs', 4 ));

$cnt=0;
$cnt=count($products);
$product=array(); 
```

// 正在将数据复制到 $product 数组

```
for($i=0;$i<$cnt;$i++){
for($j=0;$j<3;$j++){
$product[$i][$j]= $products[$i][$j];
}
}

If you are getting data from data base 

for($i=0;$i<mysql_num_rows($result);$i++){
 $products[]=result [$i];
} 
```

# jquery - 如何使用 JQuery Datatables 以两行而不是默认的一行显示数据？

> ID：15631012
> 
> 赞同：0
> 
> 时间：2013-03-26T06:49:35.187
> 
> 标签：jquery, datatables, rows, multiple-columns

使用数据表，我可以在一行中显示所有必需的信息。由于空间限制，我希望在同一行的另一列（名称）下显示一列（评论）

.

**当前的：**

行 1 列 1 | 第 1 行第 2 行 | 行 1 列 3

* * *

第 2 行第 1 列 | 第 2 行第 2 列 | 行 2 列 3

* * *

第 3 行第 1 列 | 第 3 行第 2 列 | 第 3 行第 3 列

* * *

.

**必需的：**

行 1 列 1 | 行 1 列 2

第 1 行第 3 行 |

* * *

第 2 行第 1 列 | 行 2 列 2

第 2 行第 3 列 |

* * *

第 3 行第 1 列 | 第 3 行第 2 列

第 3 行第 3 列 |

* * *

代码

```
dishTable = $('#dishtable').dataTable({
             //"bJQueryUI": true,
//          "sPaginationType": "full_numbers",
//          "iDisplayLength": 7,
            "sScrollY": "80%",
            "sScrollX": "100%",
            "bPaginate": false,
            "sAjaxSource": "amsrequestprocessor?action=amsretrieveorder&source=ams",

..........

"aoColumns": [
                          { "sTitle": "SNo", "sClass":"dish_ID",   "mDataProp": "sno" },
                          { "sTitle": "Name",  "sClass":"d_name", "mDataProp": "dishname" },
                          { "sTitle": "List-Price",  "sClass":"dish_per_price", "mDataProp": "price" },
                          { "sTitle": "Bill-Price",  "sClass":"dish_per_billprice", "mDataProp": "billprice" },
                          { "sTitle": "Qty", "sClass":"dish_qty",   "mDataProp": "qty" },
                          { "sTitle": "Total", "sClass":"dish_tot", "mDataProp": "total" },
                          { "sTitle": "Customization", "sClass":"dish_comment", "mDataProp": "comment" },
                          { "mDataProp": null,"sClass":"rowEdit","bSortable": false},
                          { "sClass":"rowDel", "mDataProp": null,"bSortable": false},
                          { "sClass":"rowId", "bSortable": false, "mDataProp": "id"}
                         ]      

        });
    } 
```

HTML：

```
<table id="dishtable" class="display">
    <thead>
        <tr>
            <th class="sno">SNo</th>
            <th class="d_name">Name</th>
            <th>List-Price</th>
            <th>Bill-Price</th>
            <th>Qty</th>
            <!-- <th>State</th>  -->
            <th>Total</th>
            <th>Customizations</th>
            <th width=16px height=16px></th>
            <th width=16px height=16px></th>
            <th class="rowId"></th>
        </tr>

    </thead>
    <tbody>
    </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:00:45.797

谢谢@Beetroot-甜菜根

我已经设法调整我的后端服务以适当地呈现而不是通过 JavaScript 找到一种方法 - 因为该解决方案似乎很复杂，并且要求它在所有浏览器中工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T07:03:30.047

通过使用 colspan 我们可以拆分 td 并使用 width 我们可以对齐表格..

```
 <table width="100%">
    <tr><td width="50%">td1</td><td width="50%">td2</td>
    <td colspan="2">td1&2</td></tr>
    </table> 
```

# android-intent - 如何共享一个 SQLite 数据库 b/w 两部使用 Wifi Direct 连接的安卓手机

> ID：15631018
> 
> 赞同：1
> 
> 时间：2013-03-26T06:50:01.803
> 
> 标签：android-intent

我有 2 部使用 Wifi Direct 连接的 Android 手机，比如 A 和 B。我正在使用 SQLiteOpenHelper 在 Phone-A 上的 SQlite 数据库中写入和读取。如何从 Phone-B 访问在 Phone-A 上创建的数据库。

我拥有两部手机的全部权利。

提前致谢。

# css - 固定位置在 ipad 上不起作用

> ID：15631019
> 
> 赞同：0
> 
> 时间：2013-03-26T06:50:06.010
> 
> 标签：css

我正在尝试修复我的网站的背景，并且我在我的网站上放置了一个 div“bgDiv”，位置固定。它在桌面上运行良好。但在 ipad 位置固定不工作它与我的整个网站滚动。和背景图像重复。有什么方法可以避免滚动 bgDiv。

```
 .bgDiv{
    background: url("test.jpg") repeat scroll 0 0 transparent;
    background-size: 100% 100%;
    bottom: 0;
    left: 0;
    position: fixed;
    right: 0;
    top: 0;
    z-index: -2;
    height: inherit;
    }

<body>
  <div class="bgDiv"></div>
     <div class="wrapper">
          content
      </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:06:09.717

用这个更新你的CSS，

```
.bgDiv{
    background: url("test.jpg") repeat scroll 0 0 transparent;
    background-size: 100% 100%;
    left: 0;
    position: fixed;
    top: 0;
    z-index: -2;
    height: auto;
    width:100%;
 } 
```

如果未添加，请将其添加到上面的代码中，

```
 <meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

您可以参考此文档：- [http://www.quirksmode.org/blog/archives/2010/12/the_fifth_posit.html](http://www.quirksmode.org/blog/archives/2010/12/the_fifth_posit.html)

# java - Google Drive SDK API没有列出java中Google Drive上传的文件

> ID：15631020
> 
> 赞同：3
> 
> 时间：2013-03-26T06:50:07.843
> 
> 标签：java, google-drive-api

我正在创建一个可以将文件插入 Google Drive 并列出它的应用程序。我正在使用 Google Drive SDK v2 API。但我的问题是它没有列出不是通过我的应用程序上传的文件。如果我直接从 Google 驱动器上传，它不会在我的应用程序中列出。

这是列出文件的方法：

```
private static List<File> retrieveAllFiles(Drive service) throws IOException {
        List<File> result = new ArrayList<File>();
        Files.List request = service.files().list();

        do {
          try {
            FileList files = request.execute();

            result.addAll(files.getItems());
            request.setPageToken(files.getNextPageToken());
          } catch (IOException e) {
            System.out.println("An error occurred: " + e);
            request.setPageToken(null);
          }
        } while (request.getPageToken() != null &&
                 request.getPageToken().length() > 0);

        return result;
      } 
```

我正在迭代这样的文件：

```
List<File> files = retrieveAllFiles(service);
        for(File f : files) {
            System.out.println("File Name : "+f.getOriginalFilename();
        } 
```

谁能帮帮我？提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:01:41.130

我认为您使用了错误的 oauth 范围，这可能`https://www.googleapis.com/auth/drive.file`会限制您的应用程序访问由您的应用程序创建或打开的文件，而您应该使用`https://www.googleapis.com/auth/drive`它来完全控制您的应用程序。

# android - 是否可以使用 Android 地图 V2 在折线上添加箭头

> ID：15631022
> 
> 赞同：8
> 
> 时间：2013-03-26T06:50:09.010
> 
> 标签：android, google-maps-android-api-2

如何使用 Android Maps V2 API 绘制带箭头的折线（指示方向）。在[Android 地图文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/PolylineOptions)中，此选项不可用。是否可以在折线上添加箭头？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-15T11:27:41.937

这是我使用与 Doug 建议的概念相同的概念开发的一个工作示例，采用 JavaScript 示例 ( [http://econym.org.uk/gmap/example_arrows.htm](http://econym.org.uk/gmap/example_arrows.htm) ) 并将其转换为 Java 代码。为方便起见，它使用来自谷歌地图服务器的图像，但这些图像可能是您设计的图像，也可能是从网络上抓取并存储在本地应用程序中。为了演示，我在主线程上下载这些，但如果在实时应用程序中使用，请不要这样做！

与 JavaScript 示例的主要区别在于，您必须将箭头图像投影到大小为四倍的较大图像上，根据从 A 到 B 的方位计算出将图像转换到的位置，最后将该图像居中通过为图标添加另一个带有较大图像的锚定标记来现有的 B 标记。

首先添加你的折线：

```
PolylineOptions polylines = new PolylineOptions();

LatLng from = new LatLng(f.getLatitude(), f.getLongitude());
LatLng to = new LatLng(t.getLatitude(), t.getLongitude());

polylines.add(from, to).color(polyColor).width(2);

mMap.addPolyline(polylines);

DrawArrowHead(mMap, from, to); 
```

然后添加你的箭头：

```
private final double degreesPerRadian = 180.0 / Math.PI;

private void DrawArrowHead(GoogleMap mMap, LatLng from, LatLng to){
    // obtain the bearing between the last two points
    double bearing = GetBearing(from, to);

    // round it to a multiple of 3 and cast out 120s
    double adjBearing = Math.round(bearing / 3) * 3;
    while (adjBearing >= 120) {
        adjBearing -= 120;
    }

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 

    // Get the corresponding triangle marker from Google        
    URL url;
    Bitmap image = null;

    try {
        url = new URL("http://www.google.com/intl/en_ALL/mapfiles/dir_" + String.valueOf((int)adjBearing) + ".png");
        try {
            image = BitmapFactory.decodeStream(url.openConnection().getInputStream());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (image != null){

        // Anchor is ratio in range [0..1] so value of 0.5 on x and y will center the marker image on the lat/long
        float anchorX = 0.5f;
        float anchorY = 0.5f;

        int offsetX = 0;
        int offsetY = 0;

        // images are 24px x 24px
        // so transformed image will be 48px x 48px

        //315 range -- 22.5 either side of 315
        if (bearing >= 292.5 && bearing < 335.5){
            offsetX = 24;
            offsetY = 24;
        }
        //270 range
        else if (bearing >= 247.5 && bearing < 292.5){
            offsetX = 24;
            offsetY = 12;
        }
        //225 range
        else if (bearing >= 202.5 && bearing < 247.5){
            offsetX = 24;
            offsetY = 0;
        }
        //180 range
        else if (bearing >= 157.5 && bearing < 202.5){
            offsetX = 12;
            offsetY = 0;
        }
        //135 range
        else if (bearing >= 112.5 && bearing < 157.5){
            offsetX = 0;
            offsetY = 0;
        }
        //90 range
        else if (bearing >= 67.5 && bearing < 112.5){
            offsetX = 0;
            offsetY = 12;
        }
        //45 range
        else if (bearing >= 22.5 && bearing < 67.5){
            offsetX = 0;
            offsetY = 24;
        }
        //0 range - 335.5 - 22.5
        else {
            offsetX = 12;
            offsetY = 24;
        }

        Bitmap wideBmp;
        Canvas wideBmpCanvas;
        Rect src, dest;

        // Create larger bitmap 4 times the size of arrow head image
        wideBmp = Bitmap.createBitmap(image.getWidth() * 2, image.getHeight() * 2, image.getConfig());

        wideBmpCanvas = new Canvas(wideBmp); 

        src = new Rect(0, 0, image.getWidth(), image.getHeight());
        dest = new Rect(src); 
        dest.offset(offsetX, offsetY); 

        wideBmpCanvas.drawBitmap(image, src, dest, null);

        mMap.addMarker(new MarkerOptions()
        .position(to)
        .icon(BitmapDescriptorFactory.fromBitmap(wideBmp))
        .anchor(anchorX, anchorY));
    }
}

private double GetBearing(LatLng from, LatLng to){
    double lat1 = from.latitude * Math.PI / 180.0;
    double lon1 = from.longitude * Math.PI / 180.0;
    double lat2 = to.latitude * Math.PI / 180.0;
    double lon2 = to.longitude * Math.PI / 180.0;

    // Compute the angle.
    double angle = - Math.atan2( Math.sin( lon1 - lon2 ) * Math.cos( lat2 ), Math.cos( lat1 ) * Math.sin( lat2 ) - Math.sin( lat1 ) * Math.cos( lat2 ) * Math.cos( lon1 - lon2 ) );

    if (angle < 0.0)
        angle += Math.PI * 2.0;

    // And convert result to degrees.
    angle = angle * degreesPerRadian;

    return angle;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-03T20:34:00.610

从[2017 年 2 月 15 日发布的 Android Maps API v2](https://developers.google.com/maps/documentation/android-api/releases#february_15_2017)开始，您现在可以在 Android Maps API v2 的折线末端添加自定义[线帽](https://developers.google.com/maps/documentation/android-api/shapes#line-caps)，这可以是箭头。

来自[Line caps](https://developers.google.com/maps/documentation/android-api/shapes#styling-shapes)文档：

> 以下代码段为端盖指定了一个自定义位图：
> 
> ```
> mPolyline.setEndCap(
>         new CustomCap(BitmapDescriptorFactory.fromResource(R.drawable.arrow),
>                 16)); 
> ```
> 
> 当您使用自定义位图时，您应该以像素为单位指定参考笔划宽度。API 相应地缩放位图。参考笔划宽度是您在为帽子设计位图图像时使用的笔划宽度，位于图像的原始尺寸。默认参考笔画宽度为 10 像素。提示：要确定参考笔划宽度，请在图像编辑器中以 100% 放大打开位图图像，并绘制相对于图像的所需线条笔划宽度。
> 
> 如果您用于[`BitmapDescriptorFactory.fromResource()`](https://developers.google.com/android/reference/com/google/android/gms/maps/model/BitmapDescriptorFactory#fromResource(int))创建位图，请确保使用与密度无关的资源 ( [nodpi](https://developer.android.com/guide/practices/screens_support.html) )。

谷歌关于相关已解决问题的帖子[说](https://issuetracker.google.com/issues/35822534#comment11)：

> 我们添加了使用自定义位图自定义折线的起点和终点的功能。使用它，您将能够向折线添加箭头。
> 
> 在此处的形状指南中查看有关线帽的信息： [https ://developers.google.com/maps/documentation/android-api/shapes#line_caps](https://developers.google.com/maps/documentation/android-api/shapes#line_caps)
> 
> 在此处查看新的折线和多边形教程中的示例： [https ://developers.google.com/maps/documentation/android-api/polygon-tutorial#add_custom_styling_to_your_polyline](https://developers.google.com/maps/documentation/android-api/polygon-tutorial#add_custom_styling_to_your_polyline)
> 
> 请参阅此处的发行说明： [https ://developers.google.com/maps/documentation/android-api/releases#february_15_2017](https://developers.google.com/maps/documentation/android-api/releases#february_15_2017)
> 
> 请参阅此处的博客文章： [https ://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html](https://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:32:53.453

我没有尝试过，但我认为使用标记应该是可能的。您将需要创建一系列（例如 20 个）小箭头，每个箭头指向不同的方向，18、36、54 度等。然后在构建折线时，或者可能更好，在构建折线后作为单独的过程，以您想要的任何间距遍历所有坐标，并在每个选定点使用 locationn.getbearing 获取方位，并从该方位确定用作标记的方向箭头并在该点放置适当的标记

# jquery - 通过单击 d3.js 中的节点删除和添加节点

> ID：15631023
> 
> 赞同：3
> 
> 时间：2013-03-26T06:50:09.227
> 
> 标签：jquery, d3.js

如何`onclick`在我的代码中添加或删除带有事件的节点和链接？

这是我的 ( [d3js](http://d3js.org/) )[代码小提琴](http://jsfiddle.net/5AbwQ/1/)。

**如何使用：**右键单击任何节点并单击删除它删除所有节点但没有链接。
但我只想删除一个节点，它是点击删除的链接。

```
//right click menu items
$('g.node').contextMenu('cntxtMenu',
{
    itemStyle:
    {
        fontFamily : 'Arial',
        fontSize: '13px'
    },
    bindings:
    {
        'open': function(t) {
            alert(t.__data__.name);
        },
        'email': function(t) {
            alert('Trigger was '+t.__data__.name+'\nAction was Email');
        },
        'save': function(t) {
            alert('Trigger was '+t.__data__.name+'\nAction was Save');
        },
        'delete': function(t) {
            $('g.node').remove();
            //alert('Trigger was '+t.__data__.name+'\nAction was Delete');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T12:19:23.510

只需使用 $(t) 而不是 $('g.node')

```
 'delete': function(t) {
        $(t).remove();

    } 
```

[在此处查看演示](http://jsfiddle.net/5AbwQ/51/)

# javascript - Ext.Create 和 this.callParent

> ID：15631027
> 
> 赞同：2
> 
> 时间：2013-03-26T06:50:25.563
> 
> 标签：javascript, extjs, extjs4

我怎样才能使用`Ext.create`和`this.callParent`在一起？如果我使用以下代码，我将从 ajax 存储中检索数据时出错。

```
items: [
    { xtype: 'combo',
        initComponent: function() {
            ...
            this.callParent(arguments);
        }
    }
] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:57:53.503

`callParent`文档说：

> 调用当前方法的“父”方法。这是先前被派生或被覆盖覆盖的方法（参见 Ext.define）。

换句话说，您只能在 or 内获得`Ext.define`callParent `Ext.override`；当您在配置中覆盖此方法时不会。

真正重要的是要理解它`initComponent`并不意味着作为配置被覆盖。你真的应该扩展`combo`类并`initComponent`在那里覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:46:20.287

我的方法是在侦听器配置中使用`boxReady`事件。

```
Ext.create('...', {
    listeners: {
        boxReady: function() {
            //Do something with this...
        }
    }
} 
```

# sql-server - 如何根据第三列中的一些相同数据将数据从一个表复制到另一个表？

> ID：15631035
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:51:14.873
> 
> 标签：sql-server

作为问题，如何实现目标？例如：

**表格1**

```
place_id     place_name      Invoice_no
100       Sydney            NULL
101       Melbourne         NULL
102       Adlaide           NULL
103       Gold Coast        NULL
104       Perth             NULL
105       Hobart            NULL 
```

**表 2**

```
Invoice_id   Invoice_no       place_id
1        NIT1001            100
2        NIT1002            101
3        NIT1002            102
4        NIT1003            103 
```

**目标表**

```
place_id    place_name  Invoice_no
100         Sydney          NIT1001        
101        Melbourne        NIT1002        
102        Adlaide          NIT1002        
103        Gold Coast       NIT1003        
104        Perth            NULL
105         Hobart          NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:53:33.300

~~`LEFT JOIN`这两个表`table1`并`table2`从第二个表中获取那些不匹配的行`invoice_id = NULL`：~~

 ~~```
INSERT INTO TargetTable(place_id, place_name, invoice_id)
SELECT
  t1.place_id,
  t1.place_name,
  t2.invoice_id
FROM table1 AS t1
LEFT JOIN table2 AS t2 ON t1.place_id = t2.place_id; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/407ba/1)~~  ~~* * *

## 编辑：

您需要使用`UPDATE`with`JOIN`来执行此操作。就像是：

```
UPDATE t1
SET  t1.Invoice_no =  t2.Invoice_no
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t1.place_id = t2.place_id; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/ea27a/1)

这将使您的表格`table1`看起来像：

```
| PLACE_ID | PLACE_NAME | INVOICE_NO |
--------------------------------------
|      100 |     Sydney |    NIT1001 |
|      101 |  Melbourne |    NIT1002 |
|      102 |    Adlaide |    NIT1002 |
|      103 | Gold Coast |    NIT1003 |
|      104 |      Perth |     (null) |
|      105 |     Hobart |     (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:54:34.053

使用[JOIN](http://msdn.microsoft.com/en-us/library/aa213233%28v=sql.80%29.aspx)子句：

```
INSERT INTO targetTable
SELECT a.place_id, a.place_name, b.invoice_no
FROM table1 a LEFT JOIN table2 b
ON a.place_id = b.place_id 
```~~

# php - 无法将主键（AKA 自动增量）更改为用户 ID 而不是用户名

> ID：15631036
> 
> 赞同：0
> 
> 时间：2013-03-26T06:51:18.460
> 
> 标签：php, login, registration

我最近从 JPMaster77 获得了一个注册/登录脚本。总而言之，它工作得很好，我让脚本工作，但是当我在表中添加一个新列作为“ID”并将其更改为主键时，脚本变得很奇怪。

这是我使用的 SQL

```
CREATE TABLE users (
 id int(11) primary key,
 username varchar(30),
 password varchar(32),
 userid varchar(32),
 userlevel tinyint(1) unsigned not null,
 email varchar(50),
 timestamp int(11) unsigned not null
); 
```

如您所见，它实际上运行良好，直到您看到注册码。错误“很抱歉，发生错误，您的用户名测试注册无法完成。请稍后再试。” 每次有人尝试注册时都会弹出，我相信就是这个原因。我一直在尝试解决这个问题，但我不熟悉主键和自动增量。脚本有点长，所以我想把它贴在 Pastebin 上，而不是全部写在这里。[http://pastebin.com/DYRCp3Sc](http://pastebin.com/DYRCp3Sc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:22:48.423

好吧，我在 sql 脚本中根本看不到 auto_increment 列。如果您需要它，那么您的表创建查询应该是这样的

```
CREATE TABLE users (
 id int(11) primary key auto_increment  ,
 username varchar(30),
 password varchar(32),
 userid varchar(32),
 userlevel tinyint(1) unsigned not null,
 email varchar(50),
 timestamp int(11) unsigned not null
); 
```

没有 auto_increment 您需要插入由您/应用程序生成的唯一主键。MySQL 不会插入任何值。mysql 也可能在插入时出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:07:21.793

我看不到实际调用注册功能的代码。但似乎这张桌子还不错。您是否尝试通过控制台将数据插入此表？尝试输入您在表单中输入的相同数据，看看会是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:12:50.950

当你想插入一条新记录并且你有 id 主键和 auto_increment **试试这个：**

```
insert into users (username,password,userid,userlevel,email,timestamp) values
('username','password','userid','userlevel','email','timestamp'); 
```

您省略字段 id，因为它是自动递增的，请在脚本中插入表的位置进行此修改

# css - 有没有一种方法可以控制省略号出现在文本溢出中的字母数量？

> ID：15631040
> 
> 赞同：0
> 
> 时间：2013-03-26T06:51:35.710
> 
> 标签：css

我有一个 div 元素来显示项目的状态。如果状态文本太大，我想换行并显示省略号。下面是项目的 CSS。

```
.item-status {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    word-spacing: -0.17em;
    letter-spacing: -0.02em;
    font-size: 8pt;
    float: right;
    width: auto;
    padding-top: 1px;
    text-indent: .25em;
    min-width: 3.25em;
    max-width: 7em;
    padding-right: 2px;
} 
```

而对应的div是

```
<div class="item-status">This is an open item to test ellipsis</div> 
```

对于此文本，省略号出现在“o”之后，例如

> 这是一个 o...（12 个字符后）

还有另一个具有相同类的 div

```
<div class="item-status">Some one is looking into this. Please wait.</div> 
```

对于此文本，省略号显示为

> 有人我...（10个字符后）

要求在指定字符数（如 10 个字符后）后始终显示省略号。是否可以设置任何属性来控制省略号在换行文本中的显示位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:12:22.543

你不能用 CSS 做到这一点，但你可以用 Javascript 做到这一点。

```
// gets characters 1 - 10 in newstr
var str = "abcdefghijklmnopqrstuv";
var newstr = str.substr(0, 10);
newstr += '...'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:44:47.307

在花了一些时间摆弄 CSS 之后，发现没有直接的方法可以实现这一点（除了调整字体系列、大小等）。所以现在，建议一种解决方法来浮动 div 'left' 并增加最小宽度。这样 div 就有了显示消息的整个宽度。不需要溢出:)

# java - java - 如何防止我的索引在java中的递归函数中重置？

> ID：15631041
> 
> 赞同：0
> 
> 时间：2013-03-26T06:51:36.077
> 
> 标签：java, indexing

我试图将我的二叉树插入到数组中，函数中有一个递归循环，当它重新启动我的索引时，我的索引会被重置，并且我在数组中以错误的顺序输入值。该索引主要是inizilized。

```
public boolean  toArray (Node _root, String[] arr, int i)
{
if (_root == null)
{
return false;
}
if (_root.isleaf())
{
    arr[i]=this.data;
    i++;
    if (this.father == null)
        return false;
    else if (this.father.ls==this)
    {
        this.father.ls = null;
        return false;
    }
    else 
    {
        this.father.rs=null;
        return true;
    }
}
    if (_root.ls ==null)
        {
        arr[i] = _root.data;
        i++;
        _root.data=null;
        }
    if ( _root.ls!=null && _root.ls.isleaf() )
    {
        arr[i] = _root.ls.data;
        i++;
        _root.ls = null;
        arr[i]=_root.data;
        i++;

    }
    if ( _root.rs!=null && _root.rs.isleaf())
    {
        arr[i]=_root.rs.data;
        i++;
        _root.rs = null;
    }
    toArray(_root.ls, arr,i);
    toArray(_root.rs, arr,i);
    if (this.data !=null)
        {
        arr[i] = this.data;
        i++;
        this.data = null;
        _root.data=null;
        }
    else 
        return false;
    return false;
} 
```

这是我的主要课程

```
public class Test_Tree {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    BT mytree = new BT();
    mytree.in("11","","","");
    mytree.in("2","","","");
    mytree.in("810","","","");
    mytree.in("17","","","");
    mytree.in("845","","","");
    mytree.in("10","","","");
    mytree.in("1","","","");
    String[] arr = new String[10];
    Node myroot = new Node (mytree._root);
    int i=0;
    myroot.toArray(myroot, arr,i);
    for (int j=0; j<arr.length;j++)
    {
        System.out.println(arr[j]);
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:03:39.217

您遇到的问题是，在执行第一次递归调用后`toArray(_root.ls, arr,i);`， 的值`i`不会改变，但会保持不变。这是因为整数是在递归中按值传递的，然后在调用返回后，本地`i`不会发生变化。解决此问题的一种方法是使函数 toArray 返回一个 int -`i`函数何时返回的值。您似乎使用布尔返回值来指示给定子树是否为空。我相信你将不再需要它。

代码类似于：

```
public boolean  toArray (Node _root, String[] arr, int i)
{
  if (_root == null)
  {
    return i;
  }
  if (_root.isleaf())
  {
    arr[i]=this.data;
    i++;
    if (this.father == null)
        return i;
    else if (this.father.ls==this)
    {
        this.father.ls = null;
        return i;
    }
    else 
    {
        this.father.rs=null;
        return i;
    }
  }
  if (_root.ls ==null)
  {
    arr[i] = _root.data;
    i++;
    _root.data=null;
  }
  if ( _root.ls!=null && _root.ls.isleaf() )
  {
    arr[i] = _root.ls.data;
    i++;
    _root.ls = null;
    arr[i]=_root.data;
    i++;
  }
  if ( _root.rs!=null && _root.rs.isleaf())
  {
    arr[i]=_root.rs.data;
    i++;
    _root.rs = null;
  }
  i = toArray(_root.ls, arr,i);
  i = toArray(_root.rs, arr,i);
  if (this.data !=null)
  {
    arr[i] = this.data;
    i++;
    this.data = null;
    _root.data=null;
  }
  return i;
} 
```

# ios - 将 NSData 添加到 NSDirectory (JSON) 中得到 Invalid type in JSON write (NSConcreteMutableData) 错误

> ID：15631042
> 
> 赞同：4
> 
> 时间：2013-03-26T06:51:37.063
> 
> 标签：ios, afnetworking

我正在尝试将图像添加到我想在服务器上发布的 JSON 文件中。我正在使用以下代码，但我不断收到`Invalid type in JSON write (NSConcreteMutableData)`错误。代码是

```
NSDictionary *parameter = [[NSDictionary alloc]init];
NSData *imageData = UIImagePNGRepresentation(imageView.image);
parameter = @{@"body":@"Hi",@"image":imageData}; 
```

另外，我正在使用`AFNetworking`将图像发布到服务器

我不确定代码中有什么问题。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:38:41.877

如果其他人以后有同样的问题。这是您应该使用的代码

```
NSURL *url = [NSURL URLWithString:@"http://api-base-url.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"avatar.jpg"], 0.5);
NSDictionary *parameter = @{@"body":@"image"};
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:parameter constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[httpClient enqueueHTTPRequestOperation:operation]; 
```

来源：[链接](https://github.com/AFNetworking/AFNetworking)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:56:08.563

试试这样

```
parameter = @{@"body":@"Hi",@"image":[NSString stringWithFormat:@"%@" ,imageData]}; 
```

# grails - Richui 自动完成功能仅与 firebug 一起使用

> ID：15631043
> 
> 赞同：0
> 
> 时间：2013-03-26T06:51:49.993
> 
> 标签：grails, autocomplete, rich-ui

我正在使用 grails 2.1.0 和 grails richui plugin 8.0 进行自动完成。我的问题是如果 firebug 在 firefox 中打开，则自动完成工作。在其他浏览器中它不起作用。但是 ajax 调用将转到后端，因为我能够打印结果。以下是我在头标签中的 gsp 中的代码

```
 <resource:include components="autoComplete" autoComplete="[skin:'default']"/> 
```

和自动完成

```
 <richui:autoComplete name="searchCountry" id="searchCountry" delimChar=","  class="countryBox" action="${createLinkTo('dir': 'controller/getCountryList')}"/></td> 
```

这是我控制器中的代码

```
 def getCountryList()
    {
    println("**********get country list*********")
    def locations = Countrylist.findAllByCityLike("%${params.query.trim()}%")

    render(contentType: "text/xml"){
        results()
        {
            locations.each { location -> result(){
                    name(location.city + ", " + location.state)
                    println("**********get country list*********"+location.city + ", " + location.state)
                }
            }
        }
    }

} 
```

我将感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:00:37.687

从控制器返回的 xml 似乎不正确。afaik，它应该采用以下格式，

```
<results>
    <result>
        <id>1</id>
        <name>city,state</name>
    </result>
</results> 
```

# python-2.7 - 我想将我的程序连接到图像扫描仪

> ID：15631046
> 
> 赞同：6
> 
> 时间：2013-03-26T06:52:08.760
> 
> 标签：python-2.7, image-scanner, pyusb

我想用python编写程序，它可以从扫描仪获取输入并保存为jpg。我不知道如何开始。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-02-26T21:47:00.653

六年过去了，我今天来到这里寻找同一个问题的答案。

不幸的是，当前接受的答案中的 Pysane 和 python-imagescanner 不再有效，但经过进一步搜索后，我发现[libinsane](https://gitlab.gnome.org/World/OpenPaperwork/libinsane#readme)现在似乎是一个更好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T06:58:24.963

在 Windows 中，您要查看的模块称为[Python TWAIN 模块](https://pypi.python.org/pypi/twain/1.0.5)，而在 Linux（我认为是 Mac）中，您应该查看[pysane](https://pypi.python.org/pypi/pysane/2.0.1)。

现在我正在研究这个，看起来有一个名为[python-imagescanner](http://code.google.com/p/imagescanner/)的项目试图将这两种方法包装到一个公共库中，

来自 imagescanner 的[文档](http://code.google.com/p/imagescanner/wiki/GettingStarted)

> ```
> Getting access to a scanner device:
> 
>  from imagescanner import ImageScanner
> 
>  # instantiate the imagescanner obj 
>  iscanner = ImageScanner()
> 
>  # get all available devices
>  scanners = iscanner.list_scanners()
> 
>  # choose one of the devices
>  scanner = scanners[0]
> 
>  # scan your file (returns a PIL object)
>  scanner.scan() 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-17T15:20:02.423

[在这里仅提及其他方法，以防有人需要具有少量代码的简单方法，否则您可以使用上面](https://stackoverflow.com/a/62271544/11798494)的@Marcelo 答案。

这个想法是使用[Windows 传真和扫描](https://en.wikipedia.org/wiki/Windows_Fax_and_Scan)来扫描文档。这是python中的代码。

```
import os
os.system("WFS") 
```

它将为您打开 Windows 传真和扫描。现在您可以扫描您的文档了。

祝你好运！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-08T21:33:41.803

我也是，六年后搜索，我发现这个[从 WIA 兼容的数码相机捕获图像](https://sites.tntech.edu/renfro/2009/09/03/capturing-an-image-from-a-wia-compatible-digital-camera/)真的很有帮助。它使用`win32com.client`.

它适用于我的扫描仪 Cannon DR-C240。

代码：

```
import win32com.client, time, os

WIA_COM = "WIA.CommonDialog"

WIA_DEVICE_UNSPECIFIED = 0
WIA_DEVICE_CAMERA = 2

WIA_INTENT_UNSPECIFIED = 0

WIA_BIAS_MIN_SIZE = 65536
WIA_BIAS_MAX_QUALITY = 65536

WIA_IMG_FORMAT_PNG = "{B96B3CAF-0728-11D3-9D7B-0000F81EF32E}"

WIA_COMMAND_TAKE_PICTURE="{AF933CAC-ACAD-11D2-A093-00C04F72DC3C}"

def acquire_image_wia():
    wia = win32com.client.Dispatch(WIA_COM) # wia is a CommonDialog object
    dev = wia.ShowSelectDevice()
    for command in dev.Commands:
        if command.CommandID==WIA_COMMAND_TAKE_PICTURE:
            foo=dev.ExecuteCommand(WIA_COMMAND_TAKE_PICTURE)

    i=1
    for item in dev.Items:
        if i==dev.Items.Count:
            image=item.Transfer(WIA_IMG_FORMAT_PNG)
            break
        i=i+1

    fname = 'wia-test.png'
    if os.path.exists(fname):
        os.remove(fname)
    image.SaveFile(fname)

os.chdir("c:/temp")
acquire_image_wia() 
```

# mysql - 如何将会话值存储在 ruby on rails 的表中

> ID：15631049
> 
> 赞同：1
> 
> 时间：2013-03-26T06:52:21.737
> 
> 标签：mysql, ruby-on-rails

我有一个出售书籍的应用程序。客户将其添加到他的购物车并为此创建一个会话。现在我想将购物车中的商品添加到订单表中，以便管理员可以查看正在订购的商品。谁能告诉它怎么做？

控制器：

```
def checkout    
@cart = find_cart    
if @cart.items.empty?   
redirect_to_index("Your cart is empty")   
else  
@order = Order.new  
@order.items=@cart.items  
end  
end 
```

使用此代码它存储项目的哈希值。我想存储书名。

# durandal - 在 Durandal 中为某些视图使用不同的过渡

> ID：15631052
> 
> 赞同：1
> 
> 时间：2013-03-26T06:52:42.220
> 
> 标签：durandal, hottowel

感谢 Durandal，我开发了一个 SPA。在这个模板中，我们可以定义从一个页面导航到另一个页面时使用的转换。过渡风格是在主模块中为所有人定义的，并用于所有过渡。

我想知道是否可以对某些特定视图使用不同的过渡？

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T12:38:49.417

# 我想知道是否可以对某些特定视图使用不同的过渡？

是的你可以。 [我创建了一个过渡助手](https://gist.github.com/evanlarsen/4799019)，它只是一个使用[Animate.css](http://daneden.me/animate/)开源库的自定义过渡。

因此，如果您查看`doTrans`发生转换魔术的方法，它会传递 3 个参数：`parent`、`newChild`、`settings`。

`parent`并且`newChild`是对您用来制作动画的 html 视图的引用。

我认为该`settings`对象是您要查找的对象。因为它包含对您的视图模型的引用，该视图模型在属性下绑定到您的新视图`settings.model`。

因此，您可以创建自己的自定义转换并检查`settings.model`新视图模型上的某些属性，这将决定您应该如何为下一个视图设置动画。

我希望我能够足够清楚地解释这一点。如果没有，请告诉我，我将为您创建一个示例。

# python - 外键中的 Django 模型计数

> ID：15631054
> 
> 赞同：2
> 
> 时间：2013-03-26T06:52:52.390
> 
> 标签：python, django, foreign-key-relationship

我有两个模型。

```
class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)

class Position(models.Model):
    person = models.ForeignKey(Person)
    description = models.CharField(max_length=50) 
```

有没有办法可以计算这种 Person 模型中有多少个职位？就像 Person.position.count.. 某种这样的。请帮我。这仅在模型内部计算。请。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:56:39.233

是的，如果您有一个`Person`带有 name 的实例`person`，您可以使用`person.position_set.count()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:52:16.890

无论如何，如果您尝试获取所有对象的计数或从@MostafaR 建议的外键集中获取计数。您应该在查询`.count()`集上使用该方法。`len()`如果您要查找的只是计数而不是对象，请确保不要使用该`len()`方法将评估查询集。[更多信息在这里](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)。

### 获取所有对象的计数

```
models.Position.objects.all.count() 
```

### 使用外键获取对象的计数

```
person = models.Person.objects.get(pk=1, **kwargs)
person.position_set.count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T22:25:03.607

You need to create a method in Person model

```
class Person(models.Model):
 # ...
     def position(self):
         return self.position_set.count() 
```

# parsing - Visual Studio MFC SDI 应用程序需要帮助

> ID：15631055
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:52:57.893
> 
> 标签：parsing, visual-c++, mfc, treeview, sdi

我是 Visual Studio MFC 的新手。我迫切需要创建一个小型应用程序。我需要帮助我坚持这个问题我有一个包含以下数据的文本文件。A-A1,A2 其中 A 是根节点，A1 A2 是子节点。我的要求是我需要创建一个 SDI MFC 应用程序。我需要像当我转到 File->Open->"xxx.txt"（包含上述数据）时，它必须以 A |_ A1 |_ A2 (TREE VIEW) 之类的格式显示。我经历了许多教程，比如它需要被标记化等。我真的很困惑，比如如何继续等等。我只使用基于 dailog 并且我是 SDI 的新手。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:41:15.377

从我可以从评论中收集到的问题以及 Codeproject 中链接的相同问题，我将尝试提供一些帮助，但鉴于问题的普遍性，答案可能也不会很具体。

首先，如果你想有一个树视图显示，你需要你的视图类是一个 CTreeView。CTreeView 是具有嵌入式[CTreeCtrl](http://msdn.microsoft.com/en-us/library/8bkz91b4%28v=vs.80%29.aspx)的 CView 。CEditView 是带有嵌入式 CEdit 的 CView，因此显示文本（如文本编辑器或类似的东西）很有用。普通的 CView 不支持任何特殊类型的内容，因此您必须自己“绘制”它。

现在，要在视图中显示某些内容，您必须告诉它显示它。仅仅读取文件是不行的。你必须积极地展示它。通常，您会将文件中的数据读取到某种结构中，然后从那里显示出来。或者您可以将数据直接存储在树中，这取决于。无论如何，你需要学习使用 CTreeView/CTreeCtrl。基本上，使用[CTreeCtrl::InsertItem](http://msdn.microsoft.com/en-us/library/ettyybhw%28v=vs.80%29.aspx)添加元素。

至于标记化，我不确定我是否理解你的格式，但我想我会为根节点和子节点使用不同的分隔符。所以如果你有 ROOT-Child1,Child2，我会做类似的事情：

```
int pos = 0;
CString strRoot = strLine.Tokenize(_T("-"), pos);

// do something with strRoot, like store it or display it in the tree

while (pos != -1)
{
    CString strChild;

    strChild = strLine.Tokenize(_T(","), pos);
    // do something with strChild, like store it or display it in the tree
} 
```

最后，在使用 Doc/View 架构时，要走的路是将数据与其显示分开。因此，您通常会将数据保存在文档中，并在那里执行所有打开/保存操作，然后使用 GetDocument 从视图访问文档中的数据以显示它。有时，在视图中包含实时数据可能是有意义的，但这不是通常的做法。在这种情况下，将其改为基于对话框的应用程序甚至可能是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:35:36.007

基本上我曾在基于 dailog 的应用程序中使用 CTreeCtrl，但这是我第一次在 SDI 中工作。我真的很感谢你为我提供了这样的解决方案。我开发了一小段代码看看

```
void CFileView::OnFileOpen()
 { 
  // TODO: Add your command handler code here
 CString pathname,strLine; 
 CStdioFile File; 

 if(File.Open(pathname, CFile::modeRead)) // Open to read
 { 
  while(File.ReadString(strLine)) // Read file 
  { 
     int Position = 0; 
     CString Token; 
     Token = strLine.Tokenize(_T("-:,"), Position);
     HTREEITEM hRoot = m_wndFileView.InsertItem(Token, 0, 0);

     while(Token!="") 
     { 
         Token = strLine.Tokenize(_T("-:,"), Position); 
         HTREEITEM hSrc = m_wndFileView.InsertItem(Token, 0, 0, hRoot);
     } 
   } 
 }
} 
```

就像我的观点是我是否将我的代码放在正确的函数中？即我们打开文件的地方。因为在客户端窗口中我没有得到任何东西，而是一个空白窗口。SDI 基于 CTreeView 类。我现在对标记器和树控制部分很清楚，但现在我很困惑为什么我根本没有在客户端窗口中得到任何东西:(

# gwt - GWT：提供者与 AsyncProvider

> ID：15631056
> 
> 赞同：3
> 
> 时间：2013-03-26T06:52:59.630
> 
> 标签：gwt, gwt-gin, gwtp

GWT 中的 provider 和 AsyncProvider 有什么区别。我的理解是两者都用于代码拆分和延迟实例化。所以我无法决定，在这种情况下我们选择 Provider 而不是 AsyncProvider ？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:48:27.180

`Provider`是关于：

*   延迟实例化（但实例化是瞬时的、同步的）；仅供参考，[Dagger](http://square.github.com/dagger/)`Lazy`为这个用例引入了一种类型。
*   对象工厂：除非对象是作用域的，否则`get()`每次调用都会给你一个新对象
*   在长寿命范围内使用短寿命范围对象：如果您需要从单例范围（或会话范围）对象访问请求范围对象，则必须使用 a `Provider`，否则您将从当前请求范围，将无法用于下一个请求。GIN 仅支持它在这里`Singleton`并不*真正*适用的范围操作系统，因为它只是上述工厂用例的变体；但在服务器端（使用 Guice、Spring DI、Dagger 等），servlet 或 RequestFactory 服务/定位器是单例（或 RF 的伪单例），这是 DI 框架的关键部分。

`AsyncProvider`是相同的，**只是**它是异步的，包装了对`GWT.runAsync()`.

换句话说：only`AsyncProvider`真的是关于代码拆分。`Provider`将对代码拆分输出产生影响，但与任何工厂（手工编码，或 GIN 的 AssistedInject）没有什么不同。

# forms - 如何在 Node.js 中使用表单模块？

> ID：15631060
> 
> 赞同：0
> 
> 时间：2013-03-26T06:53:06.143
> 
> 标签：forms, node.js

在我的应用程序中，我使用 node.js 中的表单模块（[https://github.com/caolan/forms](https://github.com/caolan/forms)）。在启动页面中显示表单时，jade 文件出现错误。任何人都可以帮助解决这个问题。

应用程序.js

```
 var http = require('http'),
  express = require('express'),
  app = express();

  var fields = forms.fields,
  validators = forms.validators,
  widgets = forms.widgets;

  var reg_form = forms.create({
  username: fields.string({required: true}),
  password: fields.password({required: true}),
  confirm: fields.password({
    required: true,
    validators: [validators.matchField('password')]
}),
email: fields.email()
  });

app.configure(function () {
  app.set('views', __dirname);
  app.set('view engine', 'jade');

  app.use(express.bodyParser());
  app.use(app.router);

  });

  app.get('/', function (req, res) {
     res.render('page', {
     locals: {
         title: 'Filling out the form...',
         form: reg_form.toHTML()
     }
  });
   });

 app.post('/', function (req, res) {
 reg_form.handle(req, {
    success: function (form) {
        res.render('page', {
            locals: {
                title: 'Success!'
            }
        });
    },
    other: function (form) {
        res.render('page', {
            locals: {
                title: 'Failed!',
                form: form.toHTML()
            }
        });
    }
});
}); 
```

page.jade

```
 h1= title

-  if (typeof form !== 'undefined')
form(method='post')
  != form
  input(type='submit') 
```

page.jsont

```
 <html>
      <head>
      <title>Example Form</title>
      <style>
        form {
            border-top: 1px dashed #ccc;
            width: 375px;
        }
        label {
            position: relative;
            width: 200px;
            top: 6px;
        }
        .required label {
            font-weight: bold;
        }
        .field {
            border-bottom: 1px dashed #ccc;
            padding: 10px 5px 15px 5px;
            position: relative;
        }
        .field input, .field select, .field textarea {
            margin: -20px 0 0 175px;
            width: 180px;
        }
        .field textarea {
            margin-top: -15px;
        }
        .field input[type='checkbox'] {
            position: relative;
            margin-left: 32px;
            top: 4px;
        }
        .field fieldset input {
            margin: 0;
            width: 20px;
        }
        .error {
            background: #ffcccc;
        }
        .error_msg {
            color: red;
            margin: -15px 0 0 0;
            padding: 5px 0;
        }
        input[type='submit'] {
            margin-top: 20px;
        }
    </style>
   </head>
    <body>
    <h1>Example Form</h1>
    <form action="" method="GET">
        {form}
        <input type="submit" />
    </form>
 </body>
 </html> 
```

页面错误

```
 ReferenceError: /home/manigandan/workspace/CreatingForm/page.jade:1
    > 1| h1= title
      2| 
      3|   - if (typeof form !== 'undefined')
      4|     form(method='post')

title is not defined
at eval at <anonymous>   (/home/manigandan/workspace/CreatingForm/node_modules/jade/lib/jade.js:176:8)
at /home/manigandan/workspace/CreatingForm/node_modules/jade/lib/jade.js:181:12
at Object.render (/home/manigandan/workspace/CreatingForm/node_modules/jade/lib/jade.js:216:14)
at View.engine (/home/manigandan/workspace/CreatingForm/node_modules/jade/lib/jade.js:243:13)
at View.render (/home/manigandan/workspace/CreatingForm/node_modules/express/lib/view.js:75:8)
at Function.render (/home/manigandan/workspace/CreatingForm/node_modules/express/lib/application.js:504:10)
at ServerResponse.render (/home/manigandan/workspace/CreatingForm/node_modules/express/lib/response.js:753:7)
at /home/manigandan/workspace/CreatingForm/app.js:34:9
at callbacks (/home/manigandan/workspace/CreatingForm/node_modules/express/lib/router/index.js:161:37)
at param (/home/manigandan/workspace/CreatingForm/node_modules/express/lib/router/index.js:135:11) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:39:03.600

这与 无关`forms`，而是与您将参数传递给的方式有关`render`：

```
app.get('/', function (req, res) {
  res.render('page', {
    title: 'Filling out the form...',
    form: reg_form.toHTML()
  });
}); 
```

`locals`请注意如何删除多余的部分。

# sqlite - Windows 运行时组件中的 sqlite

> ID：15631063
> 
> 赞同：0
> 
> 时间：2013-03-26T06:53:31.003
> 
> 标签：sqlite, windows-8, windows-runtime, windows-store-apps

我试图在 Windows 运行时组件中使用 sqlite。但是当我添加 nuget sqlite-net 包时出现一些 219 错误。无法在任何地方弄清楚。有没有类似的问题？

我最终使用了一个商店应用程序类库来使用 sqlite，并从我的 Windows 运行时组件中调用了这些方法。

商店应用程序中的方法

```
 public async  Task<IEnumerable<TaskGroup> > GetTaskGroup()
    {
         return await conn.QueryAsync<TaskGroup>("select * from TaskGroup");

    } 
```

win运行时组件中调用方法

```
public IAsyncOperation<IEnumerable<TaskGroup>> GetAllTaskGroup()
    {
        return m_objDAL.GetTaskGroup().AsAsyncOperation();

    } 
```

我收到以下错误

```
Error   1   Method 'Tasker.BAL.TaskManager.GetAllTaskGroup()' has a parameter of type 'Windows.Foundation.IAsyncOperation<System.Collections.Generic.IEnumerable<SQLLite.Models.TaskGroup>>' in its signature. Although this generic type is not a valid Windows Runtime type, the type or its generic parameters implement interfaces that are valid Windows Runtime types. Consider changing the type 'SQLLite.Models.TaskGroup' in the method signature. It is not a valid Windows Runtime parameter type. 
```

将商店应用程序方法设为私有可根据此博客 [http://racher.azurewebsites.net/Post/PostContent/23解决它](http://rarcher.azurewebsites.net/Post/PostContent/23)

但我不能使用它，因为它是私有的，它会给我访问问题。

任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:06:36.980

我不明白这些错误是什么，但是您是否首先通过“工具”>“扩展”安装了 SQLite for Windows 运行时？sqlite-net 是 LINQ 查询库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:51:33.800

Windows 运行时组件对其对外公开的类型有[许多限制。](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx#DeclaringTypes)

当你 include 时`sqlite-net`，它​​的所有类型都被声明为 public 并且会被组件有效地公开。这是您看到的错误的原因。

您可以执行以下两项操作之一来解决问题：

*   您可以将所有`public`修饰符`SQLite.cs`和`SQLiteAsync.cs`文件更改为内部。这将使您更难以将软件包更新到较新版本，因为您每次都必须重复该过程（几分钟的工作）。
*   您可以创建一个单独的 Windows 应用商店应用程序类库，`sqlite-net`从那里引用并从您的 Windows 运行时组件引用这个类库。这种方式`sqlite-net`的类不会被组件自动公开。

# c# - 从用户控件调用表单中的方法

> ID：15631067
> 
> 赞同：1
> 
> 时间：2013-03-26T06:53:40.973
> 
> 标签：c#, forms, user-controls

在用户控件中，我有一些对象（`textbox`，`combobox`等）。在表单中，我有一个按钮，可以显示或隐藏用户控件中的一些对象。我正在尝试从 usercontrol 调用该方法，但它不起作用。我的代码：

用户控制：

```
public void MinimMaxim()
{
    _txtName.Visible = true;
    _txtPackage.Visible = true;
    _panelButton.Visible = false;
    _txtBody.Visible = false;
    _btnPlus.Visible = false;
} 
```

并以形式：

```
//method that creates taskcontrols at every button click
private void _buttonAdd_Click(object sender, EventArgs e)
{
    TaskControl task= new TaskControl();
}
//call function from usercontrol
private void button_Click(object sender, EventArgs e)
{
    task.MinimMaxim = true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:57:33.100

通过用户控件引用以下代码调用方法>>

```
yourUserControlName.methodName(); 
```

**我认为你的情况可能是：**

```
yourUserControlName.MinimMaxim(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:57:52.000

您创建的任务变量是 _buttonAdd_Click 方法的局部变量。无法从任何其他方法访问它。如果您希望在其他方法中使用它，它必须是成员变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T07:47:50.943

我尝试过 Freelancer 的回答，它奏效了。

用户控制类

```
using System;
using System.Windows.Forms;

namespace SOF_15631067
{
    public partial class UserControl1 
        : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }

    private void UserControl1_Load(object sender, EventArgs e)
    {

    }

    public void MinimMaxim()
    {
        _txtName.Visible = true;
        _txtPackage.Visible = true;
        _panelButton.Visible = false;
        _txtBody.Visible = false;
        _btnPlus.Visible = false;
    } 
} 
```

}

表单类

```
using System;
using System.Windows.Forms;

namespace SOF_15631067
{
    public partial class Form1 
: Form
    {
        public Form1()
        {
            InitializeComponent();
        }

    private void button1_Click(object sender, EventArgs e)
    {
        userControl11.MinimMaxim();
    }
} 
```

}

如果我们在运行时创建这个 UserControl，答案是；

```
using System;
using System.Windows.Forms;

namespace SOF_15631067
{
    public partial class Form1 : Form
    {
        UserControl1 uc1 = new UserControl1();
    public Form1()
    {
        InitializeComponent();

        **Controls.Add(uc1);**
    }

    private void button1_Click(object sender, EventArgs e)
    {
        uc1.MinimMaxim();
        // userControl11.MinimMaxim();
    }
} 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T06:58:43.240

要访问用户控件中的控件，我通常会公开该控件的一些属性，并且可以从主页中使用属性来使用控件。

# permissions - 仅向用户授予 Webi 权限

> ID：15631070
> 
> 赞同：1
> 
> 时间：2013-03-26T06:53:46.553
> 
> 标签：permissions, sap, business-objects, webi

我只想将用户权限限制为 webi，在 Webi 中查看报告时，他只会使用滑块并将该报告导出为本地 excel。

但他不应该以任何方式保存文件，只是查看它。

谢谢并恭祝安康，

高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:27:06.747

按需查看。用户可以将报告另存为 excel 文件。但无法编辑/保存。

# android - Android调试setDisplayHomeAsUpEnabled是什么意思？

> ID：15631074
> 
> 赞同：1
> 
> 时间：2013-03-26T06:54:23.820
> 
> 标签：android, android-fragments, android-actionbar

我将 setDisplayHomeAsUpEnabled 与一组片段一起使用，即具有 A、B、C、D 片段的活动。按下 setDisplayHomeAsUpEnabled 后，它指向片段 X.... 我真的不知道为什么会发生这种情况，因为我认为我已经在活动的 OnCreate() 中声明了以下内容

```
ActionBar bar = getActionBar();
bar.setDisplayHomeAsUpEnabled(true);

FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
FragA fragment = new FragA();
fragmentTransaction.add(R.id.frag_container, fragment);
fragmentTransaction.commit(); 
```

其他一切正常，除了 setDisplayHomeAsUpEnabled 按钮......它总是指向片段 X（实际上是设置页面，我认为它会指向片段 A ！！）

有人有线索吗？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:06:07.903

您可以覆盖`setDisplayHomeAsUpEnabled`. 如果您想重定向到您想要覆盖行为的屏幕，请执行以下操作：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
 switch (item.getItemId()) {
 case android.R.id.home:
    // do your stuff
    break;
 }
} 
```

# testing - 发布多个测试套件的结果

> ID：15631075
> 
> 赞同：2
> 
> 时间：2013-03-26T06:54:29.863
> 
> 标签：testing, tcm

我需要使用 tcm 命令从 .trx 文件发布结果

我可以使用以下命令发布：

```
tcm run /publish /suiteid:1350 /configid:11 /collection:http://tfs2010 /teamproject:DreamProject /resultsfile:"C:\publish.trx" /resultowner:"Myself" 
```

但是这个命令将只发布一个结果`suiteid`。我需要在单个命令中为多个suiteid 执行此操作。那可能吗？

# php - Codeigniter 在静态函数中加载库

> ID：15631078
> 
> 赞同：3
> 
> 时间：2013-03-26T06:54:40.353
> 
> 标签：php, model, codeigniter-2

我的 users_model 中有一个名为 isLoggedin() 的静态函数，它需要我制作的库。我无法加载它！它位于名称 SessionsHelper.php 下的库文件夹中，其中有一个 SessionsHelper 类（我知道这并不奇怪）。我尝试将它加载到静态函数中，结果`$this->load->library('SessionsHelper')`发现我不能在静态函数中使用 $this。然后我尝试使用`require_once '../libraries/SessionsHelper.php'`不起作用的加载它，然后我尝试了自动加载器，它也不起作用....所以这里的功能。

```
public static function isLoggedin() {
        if (SessionsHelper::get('id') != '' && SessionsHelper::get('id') >= 0) { // TODO add logic to differentiate between user/admin
            return true;
        }
        return false;
    } 
```

我只需要能够使用图书馆！请任何帮助将不胜感激！

编辑：控制器是：

```
class Users extends CI_Controller{

    public function login(){
        $this->load->model('users_model');

        if($this->users_model->isLoggedin()){
            redirect($this->config->base_url);
        }

        $data['info'] = $this->users_model->login('slavigne@uark.edu', 'abcdefg');

        $this->load->view('templates/header');
        $this->load->view('users/login', $data);
        $this->load->view('templates/footer');
    }

    public function logout(){
        $this->load->library('SessionHelper');
        SessionsHelper::destroy();
    }
} 
```

模型是：

```
class users_model extends CI_Model{
    public function users_model(){
            parent::__construct();
    }

    public static function hash($password, $salt) {
//this code works no problem! but it's private you know?
    }

    public static function isLoggedin() {
        $CI =& get_instance();
        $CI->load->library('SessionsHelper');
        if (SessionsHelper::get('id') != '' && SessionsHelper::get('id') >= 0) { // TODO add logic to differentiate between user/admin
            return true;
        }
        return false;
    }

    public function login($email, $password){
        $this->load->library('SessionHelper');
        $this->load->database();
        $query = $this->db->get_where('users', array('email' => $email));
        $result = $query->result();
        if($result[0]->password == $this->hash($password, $result[0]->salt)){
            //error_log("Pass matched!");
            SessionHelper::set('id', $result[0]->id);
        }        
        return $result[0];
    }
} 
```

该库在 application/libraries/Sessinshelper.php 中：

```
class Sessionshelper {
        public function __construct() {      
    }

    public static function start() {
        if (!session_id()) {
            session_start();
        }
    }

    public static function set($fld, $val) {
        self::start();
        $_SESSION[$fld] = $val;
    }

    public static function un_set($fld) {
        self::start();
        unset($_SESSION[$fld]);
    }

    public static function destroy() {
        if (session_id() != "" || isset($_COOKIE[session_name()])) {
            $params = session_get_cookie_params();
            setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
        }
        session_unset();
        $_SESSION = array();
        session_destroy();
    }

    public static function get($fld) {
        self::start();
        if (isset($_SESSION[$fld])) {
            return $_SESSION[$fld];
        }
        return FALSE;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:59:04.537

您可以通过加载*全局可访问*的CodeIgniter 实例来在静态上下文中加载任何库`get_instance`，从而导致：

```
$CI =& get_instance();
$CI->load->library('SessionHelper'); 
```

但是静态方法通常被社区认为难以测试并且设计气味难闻，尤其是在使用像 CodeIgniter 这样的框架时，它可以让你避免它。

# c# - 构建 C# 应用程序的发布版本

> ID：15631081
> 
> 赞同：0
> 
> 时间：2013-03-26T06:54:55.453
> 
> 标签：c#, visual-studio, versioning

在 Visual Studios 中构建我的 C# 应用程序的发布版本时，它还生成了一个`.config`和一个`.manifest`文件。我想知道这些是什么，以及它们对应用程序的实际运行是否重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:03:28.770

读这个：

什么是清单文件：

> 清单是一个 XML 文档，可以是外部 XML 文件，也可以是嵌入应用程序或程序集的资源。隔离应用程序的清单用于管理应用程序在运行时应绑定到的共享并行程序集的名称和版本。并行程序集的清单指定其对名称、版本、资源和其他程序集的依赖关系。

如何控制它：

> 默认情况下，新项目的项目属性设置为生成清单文件。但是，可以使用项目的 Generate Manifest 属性禁用项目清单的生成。当此属性设置为 Yes 时，将生成此项目的清单。否则，链接器在解析应用程序代码的依赖关系时会忽略汇编信息，并且不会生成清单。

和

> Visual Studio 中的构建系统允许将清单嵌入到最终的二进制应用程序文件中，或生成为外部文件。此行为由“项目属性”对话框中的“嵌入清单”选项控制。要设置此属性，请打开 Manifest Tool 节点，然后选择 Input and Output。如果清单未嵌入，则将其作为外部文件生成并保存在与最终二进制文件相同的目录中。如果清单已嵌入，Visual Studio 将嵌入最终清单。

取自[这里](http://msdn.microsoft.com/en-us/library/ms235229.aspx)

此外，您可以从这里控制它。`Project Properties>>Application tab` ![在此处输入图像描述](../Images/b371105b069bcc3fc7a3012ed3686cef.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:58:58.833

该`.manifest`文件很重要，因为它存储了有关您的应用程序的重要元数据。但是请注意，清单不是绝对必需的，您只需要注意删除它的潜在副作用。来自[MSDN](http://msdn.microsoft.com/en-us/library/1w45z383.aspx)：

> 每个程序集，无论是静态的还是动态的，都包含一组数据，这些数据描述了程序集中的元素如何相互关联。程序集清单包含此程序集元数据。程序集清单包含指定程序集的版本要求和安全标识所需的所有元数据，以及定义程序集范围和解析对资源和类的引用所需的所有元数据。程序集清单可以存储在带有 Microsoft 中间语言 (MSIL) 代码的 PE 文件（.exe 或 .dll）中，也可以存储在仅包含程序集清单信息的独立 PE 文件中。

也可以将清单嵌入程序集本身，这样您只需分发一个文件。

当使用 Visual Studio 的某些功能时，这些`.config`文件可以存储重要信息。它们通常用于存储`.settings`解决方案文件中指定的设置。但是，如果您不知道这些文件是什么，则不太可能使用这些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:04:50.273

**.config**

该文件可以包含有关您的目标框架的信息。在此文件中还存储了应用程序范围的设置变量。

**。显现**

该文件可以包含有关您的应用程序的信息。您可以在此处定义您的应用程序需要管理员权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:58:00.740

是 重要的是，就像您正在启动新版本并更新应用程序的现有设置一样，此功能仅有助于识别系统上安装的应用程序的当前版本，并且在此基础上只有您才能更新它。

# jsp - 不使用相对路径在服务器上上传文件

> ID：15631095
> 
> 赞同：0
> 
> 时间：2013-03-26T06:55:47.357
> 
> 标签：jsp, servlets, ejb

我想使用带有相对路径的 servlet 将文件上传到服务器。每当我上传文件时，它都应该上传到我的项目主目录下的文件夹中。我不想使用绝对路径。并且该路径必须保存到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:14:33.613

您可以使用servlet API 的[getRealPath()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)来获取上下文根的实际物理路径，并且可以将上传的文件保存在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:12:39.830

在 servlet 中，您可以找到位于类路径中的某些资源的路径，如下所示。

```
URL url = this.getClass().getClassLoader().getResource("someFile.properties");
String pathToFile = url.getPath(); 
```

从“pathToFile”变量中，您可以找到项目主目录的根目录。然后，您可以将上传的文件保存到此目录。请注意，如果您将项目部署为战争文件，这可能是不可能的（因为您无法写入战争文件）。但是，如果您以爆炸方式部署它，它将始终有效。

如果 pathToFile=C:/someFolder/yourProject/WEB-INF/classes/someFile.properties。您可以推断您的主目录是 C:/someFolder/yourProject 因为 /WEB-INF/classes/someFile.properties 部分将始终相同

# jquery - 如何使用 CSS 扩展 div 并将标题向下/向上推？

> ID：15631098
> 
> 赞同：0
> 
> 时间：2013-03-26T06:55:52.983
> 
> 标签：jquery, css

以下是我的 html 页面的摘录。

```
<div id="main_container">
    <div id="sec_inform" >
      <h1 class='inf_head'>Some heading goes here</h1>
      <div class='inf_desc'>And here goes the description. Two Liner description actually. 
      </div>
    </div>
    <div id="sec_pic" >
      <img class='prd_logo' src="https://src.com/abc.png" />
    </div>
  </div> 
```

造型后看起来不错。（见这里：http: [//jsbin.com/orucel/1](http://jsbin.com/orucel/1)）

现在，我想要的是如果`.inf_desc`包含大量文本，那么：

1.  `.inf_head`应该移到顶部（如果您看到代码，我已经使用了 padding-top `sec_inform`，所以它应该以某种方式将 padding-top 更改为 0 。[可能还有其他一些属性可以做同样的事情]）
2.  另一个想要的东西，但不重要，如果`.inf_desc`包含太多的文本，那么`.inf_desc`应该增长，最终`#sec_inform`也`#main_container`应该增长。

我怎样才能做到这一点？

如果完全需要 jQuery，那么我可以接受，但我更喜欢一些纯 CSS 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:09:45.587

jQuery[`.animate()`](http://api.jquery.com/animate/)方法会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:43:20.643

您可以使用表格根据高度推送内容，但不推荐使用表格，但在这种情况下，我们可以在纯 CSS 和一些 HTML 标签中实现这一点，而不是放置 jquery，如果任何人都可以实现这个纯 DIV，那将会很有趣.

[http://jsbin.com/orucel/4/edit](http://jsbin.com/orucel/4/edit)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body id='jsbinBody'>

  <div id="main_container">
    <div id="sec_inform" >
      <table valign="middle" height="100%">
        <tr>
          <td valign="middle" height="100%">
            <div>
              <h1 class='inf_head'>Some heading goes here</h1>
              <div class='inf_desc'>And here goes the description. Two Liner description actually.
                Use this text indeed. 
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam sodales, nibh sit amet bibendum consectetur, elit sem laoreet erat, interdum tempor arcu augue nec ligula. Mauris eget leo mi, a consectetur metus. Cras sagittis ultricies ipsum feugiat tincidunt. Aenean augue dolor, porta at facilisis non, sollicitudin vitae justo. Quisque nec tristique mauris. Praesent a ultricies lacus. Duis pretium mi neque. Aenean quis orci sed dolor pulvinar lacinia in id risus. Sed arcu neque, ultrices non viverra et, tincidunt ut lacus. Vestibulum porttitor elementum consequat. Curabitur ac ante orci.
              </div>
            </div>
          </td>        
        </tr>
      </table>

    </div>
    <div id="sec_pic" >
      <img class='prd_logo' src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSVYSnOi8NlsD7QNJoz2Do1Lcm8qoiCH3I-EWkEuVgg_sypqpjQ8Q" />
    </div>
  </div>

</body>
</html> 
```

CSS：

```
div {
   border: 1px dashed red;  
}

#main_container{
  height: 500px;
  width:800px;
}

#sec_inform{
  border-color: green;
  height: 86%;
  width: 50%;
  margin: 0px 30px;
  display: inline-block;
  float: left; 
  box-sizing: border-box;
  padding-top: 0px;
}

#sec_pic{
  border-color: blue;

  float: right;
  height: 86%;
  width: 38%;
  margin: 30px 30px 30px 0px;
}

.prd_logo{
   display: block;
   margin: 50% auto;
}

.inf_desc{
   font-size: 16px;
   color: #666;
}

h1 {
  font-size: 30px;
  color: #333;
  margin:0px;
}

#jsbinBody{
  font-family: Lucida grande;
} 
```

# ios - 无故障播放录制的音频

> ID：15631099
> 
> 赞同：1
> 
> 时间：2013-03-26T06:55:56.623
> 
> 标签：ios, avaudioplayer, avaudiorecorder, avaudiosession

我已经录制了音频文件：

```
NSDictionary *recordSettings = [NSDictionary
                                            dictionaryWithObjectsAndKeys:
                                            [NSNumber numberWithInt:AVAudioQualityMin],
                                            AVEncoderAudioQualityKey,
                                            [NSNumber numberWithInt:16],
                                            AVEncoderBitRateKey,
                                            [NSNumber numberWithInt: 2],
                                            AVNumberOfChannelsKey,
                                            [NSNumber numberWithFloat:44100.0],
                                            AVSampleRateKey,
                                            nil];
            NSError *error = nil;
            recorder = [[AVAudioRecorder alloc]
                        initWithURL:soundFileURL
                        settings:recordSettings
                        error:&error]; 
```

并通过以下方式播放音频播放器：

```
 UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
        AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
        UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
        AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

DiracAudioPlayer *mDiracAudioPlayer = [[DiracAudioPlayer alloc] initWithContentsOfURL:inUrl channels:1 error:&error];
    [mDiracAudioPlayer setDelegate:self];
    mDiracAudioPlayer.numberOfLoops=-0;
    mDiracAudioPlayer.volume=0.1;  
    [mDiracAudioPlayer play]; 
```

但是当我一次又一次地录制和播放音频文件时。我造成了一些小故障。

如何避免这种故障？请！帮我。

# php - php,fileopen和在url中读写

> ID：15631107
> 
> 赞同：0
> 
> 时间：2013-03-26T06:56:27.610
> 
> 标签：php

我在 html 中打开一个图像，我想通过输入 localhost/changimage.php?width=40 之类的 url 来调整它的大小

这是我打开文件并读取图像的代码：changimage.php

```
<?php

$remoteImage = "/var/www/html/zahir/images/bike.jpeg";

$imginfo = getimagesize($remoteImage);

header("Content-type: ".$imginfo['mime']);
//header("Content-Length

readfile($remoteImage);

?> 
```

我不知道该怎么做。。

# iphone - 如何第二次请求用户许可以允许访问当前位置？

> ID：15631109
> 
> 赞同：4
> 
> 时间：2013-03-26T06:56:29.123
> 
> 标签：iphone, ios, objective-c, core-location, cllocationmanager

在我的应用程序中，如果不允许用户访问他们当前的位置，我可以通过以下方法收到该消息

```
- (void)locationManager:(CLLocationManager*)aManager didFailWithError:(NSError*)anError
{
    switch([anError code])
    {
       case kCLErrorLocationUnknown: 
        break;

        case kCLErrorDenied:
        {
           UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Access Denied" message:@"You didn't allow to access your current location" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
          break;
        }
    }
 } 
```

如何第二次请求用户权限？

我搜索并得到答案 NO，如果用户希望应用程序访问他/她的位置，他/她如何设置应用程序以使用他们当前的位置？

删除应用程序并下载另一个应用程序是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T21:57:51.030

这只是我还是什么？有几个这样的问题。每个问题都由**用户**应该做什么来重新启用定位服务来回答，而不是**程序员**应该做什么来获得宝贵的一致警报。

称呼

```
[singleton.locationManager startUpdatingLocation]; 
```

这实际上是弹出警报的原因。

如果您不调用它，则不会显示警报。

如果您先检查它是否已启用，然后仅在已启用时才调用它，则不会显示警报。

我花了数周时间弄清楚这一点。互联网上没有关于此的任何信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T07:08:31.863

我想是的。删除应用程序并下载另一个应用程序是唯一的解决方案，因为询问用户是否允许访问位置设置的警报消息不是由应用程序触发，而是由 iPhone OS 触发，因此我认为您不能以编程方式询问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T07:02:59.710

我认为您可以从设备设置 -> 定位服务选项卡中打开定位服务。请参见下图

![在此处输入图像描述](../Images/857c4386f4de318c09d3c243eaf78fad.png)

**更新：** 当应用程序的位置服务关闭时，位置管理器将触发错误代码为*kCLErrorDenied*然后您可以向用户显示警报以从设置中打开位置服务。

或者，您也可以使用以下代码

```
if (![CLLocationManager locationServicesEnabled]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T20:53:42.520

这需要用户来完成。

在ios 7中：设置->常规->限制->如果没有打开->在隐私下-位置服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:16:54.030

您可以在您的设备**Setting-->Privacy-->Location**中手动重置位置，然后重新启动您的应用程序。

# selenium-webdriver - selenium webdriver chrome中的注销脚本

> ID：15631112
> 
> 赞同：0
> 
> 时间：2013-03-26T06:56:39.987
> 
> 标签：selenium-webdriver, ui-automation

我是硒的新手。

我通过 selenium webdriver 脚本登录到 Facebook，但现在我想注销。请帮我写剧本。

例如：

```
 public class AJ {

    public static void main(String[] args) {

        WebDriver driver = new ChromeDriver();
        driver.get("http://facebook.com");
        WebElement element=driver.findElement(By.name("email"));
        element.sendKeys("ajaykumar0891@yahoo.com");
        element=driver.findElement(By.name("pass"));
        element.sendKeys("devilhacker");

        element.submit();

       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:10:27.357

我还没有执行下面的代码，但我想这应该可以。

```
WebElement userMenuPullDown = driver.findElement(By.id("navAccountLink"));
userMenuPullDown.click();

WebElement logoutOption = driver.findElement(By.id("logout_form"));
logoutOption.click(); 
```

# iphone - 使用单个 NSMutableArray 填充 UITableView Sections 表

> ID：15631115
> 
> 赞同：2
> 
> 时间：2013-03-26T06:56:59.403
> 
> 标签：iphone, ipad, nsmutablearray, uitableview

很抱歉再次提出完整描述的问题。我有结果数组，其中包含从服务器获取的标题描述等，但问题是我想在部分中显示这些数据。

所以让我们说如果有三个部分来自数组，那么如何使用单个 resultArray 填充每个部分中的数据。

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
    {
return [categoryArray objectAtIndex:section];
} 
```

resutArray 包含所有部分的所有数据，因此如何根据部分显示

数组的结构是

```
 ObjectData *theObject =[[ObjectData alloc] init];
            [theObject setCategory:[dict objectForKey:@"category"]];
            [theObject setSub_Category:[dict objectForKey:@"sub_Category"]];    
            [theObject setContent_Type:[dict objectForKey:@"content_Type"]];
            [theObject setContent_Title:[dict objectForKey:@"content_Title"]];
            [theObject setPublisher:[dict objectForKey:@"publisher"]];
            [theObject setContent_Description:[dict objectForKey:@"content_Description"]];
    [theObject setContent_ID:[dict objectForKey:@"content_ID"]];
    [theObject setContent_Source:[dict objectForKey:@"content_Source"]];
        [resultArray addObject:theObject]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:39:56.197

看起来就像你有 ObjectData，它有一个名为 category 的属性，并且你想显示 ObjectData 按类别分组的表格视图。您可以这样做生成一个 NSDictionary，其中键 = 唯一类别，值 = 该类别的 ObjectData 的 NSArray。然后，您将该 NSDictionary 用作数据源的数据。

```
NSArray *tempArray =[[DataController staticVersion] startParsing:@"http://www.celeritas-solutions.com/pah_brd_v1/productivo/catalogMaster.php"];
// dictionary for cells, you'll probably want this to be ivar or property
NSMutableDictionary* dictionary = [NSMutableDictionary dictionary];
// array for headers, you'll probably want this to be ivar or property
NSMutableArray* categories = [NSMutableArray array];

for (int i = 0; i<[tempArray count]; i++) {

    id *item = [tempArray objectAtIndex:i];
    NSDictionary *dict = (NSDictionary *) item;
    ObjectData *theObject =[[ObjectData alloc] init];
    [theObject setCategory:[dict objectForKey:@"category"]];
    [theObject setSub_Category:[dict objectForKey:@"sub_Category"]];
    [theObject setContent_Type:[dict objectForKey:@"content_Type"]];
    [theObject setContent_Title:[dict objectForKey:@"content_Title"]];
    [theObject setPublisher:[dict objectForKey:@"publisher"]];
    [theObject setContent_Description:[dict objectForKey:@"content_Description"]];
    [theObject setContent_ID:[dict objectForKey:@"content_ID"]];
    [theObject setContent_Source:[dict objectForKey:@"content_Source"]];

    [resultArray addObject:theObject];
    [theObject release];
    theObject=nil;

    // here you populate that dictionary and categories array
    NSMutableArray* objs = [dictionary objectForKey:theObject.category];
    if(!objs)
    {
        objs = [NSMutableArray array];
        [dictionary setObject:objs forKey:theObject.category];
        [categories addObject:theObject.category];
    }
    [objs addObject:theObject];
} 
```

然后在你的控制器中：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return [categories count] ;

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
 {

      return [categories objectAtIndex:section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }

    NSString* category = [categories objectAtIndex: indexPath.section];
    NSMutableArray* objs = [dictionary objectForKey:category];
    ObjectData* obj = [objs objectAtIndex: indexPath.row];

    // populate cell here

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSString* category = [categories objectAtIndex:section];
    NSMutableArray* objs = [dictionary objectForKey:category];
    return [objs count];
} 
```

请注意，这只是一个示例，您可以根据需要对其进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:11:00.537

使用自定义类，您可以实现这一点。

**我的类.h**

```
@interface myClass : NSObject
@property(nonatomic,retain) NSString* sectionHeader;
@property(nonatomic,retain) NSMutableArray* sectionRows;
@end 
```

**我的班级.m**

```
#import "myClass.h"

@implementation myClass
@synthesize sectionHeader;
@synthesize sectionRows;
@end 
```

首先，您需要使用上述类对象设置您的 resultArray。为类设置适当的值。例子：

```
myClass *myClassObj = [[myClass alloc] init];
myClassObj.sectionHeader = @"Your section title";
myClassObj.sectionRows   = < Your NSMutableArray for rows under current section >;
[retunArray addObject:myClassObj]; 
```

现在设置`numberOfSectionsInTableView`, `numberOfRowsInSection`, `titleForHeaderInSection`,`cellForRowAtIndexPath`

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [returnArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[returnArray objectAtIndex:section] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    myClass *myClassObject = [returnArray objectAtIndex:section];
    return myClassObject.sectionHeader;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    myClass *myClassObject = [returnArray objectAtIndex:indexPath.section];
    NSLog(@"%@",[myClassObject.sectionRows objectAtIndex:indexPath.row]);

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:34:11.837

执行与示例代码相同的操作

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return [sectionArray count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
 //Do your stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:16:58.700

您可能还会发现使用免费的 Sensible TableView 框架要容易得多。该框架将简单地获取您的数组并生成所有表格视图单元格和部分，如果您愿意，包括所有详细视图。我发现它更简单，实际上需要几分钟才能实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:10:33.860

如果你只有一个 NSMutableArray 并且你想把它分成几个部分意味着你必须知道对象的索引。例如，

```
[
Section 1,
Section1,
Section1,
Section 2,
Section 2,
Section2,
Section 3,
Section 3,
Section 3
] 
```

第 1 部分显示 0 到 2 索引的数据，第 2 部分显示 3 到 5 索引的数据，第 3 部分显示 6 到 8 索引的数据。

否则最好去`NSDictionary`。在 Dictionary 中将部分标题保留为键，并将值保留为 NSArray。所以加载单元格会更容易。

你有对象数据的 NSArray .. 所以你可以这样做

```
 NSMutableDictionary *sectionDict = [[NSMutableDictionary alloc] init];

    for(int i=0; i < [data count]; i++)
    {
ObjectData *theObject = [data objectAtIndex:i];
        NSMutableArray *arr;
        if([sectionDict valueForKey:theObject.category])
        {
            arr = [sectionDict valueForKey:theObject.category];
        }
        else
        {
            arr = [[NSMutableArray alloc] init];
        }
        [arr addObject:theObject];
        [sectionDict setObject:arr forKey:theObject.category];
    } 
```

所以现在你将拥有所需的数据......

# python - 列表作为python中的命令行参数

> ID：15631117
> 
> 赞同：-2
> 
> 时间：2013-03-26T06:57:06.093
> 
> 标签：python, list, command-line-arguments

我想在 python 中给出一个列表作为命令行参数。当我尝试`

```
osize = sys.argv[1]

o_hres = osize[0]
o_vres = osize[1]

print osize

print o_vres
print o_hres` 
```

输出是

```
python temp.py 23,44

23,44

3

2 
```

预期在哪里

```
python temp.py 23,44

23,44

44

23 
```

请解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:58:54.480

你的论点是一个字符串，所以把它分开：

```
osize = sys.argv[1].split(',') 
```

# php - Twitter 流媒体 API。php中如何异步处理推文？

> ID：15631122
> 
> 赞同：1
> 
> 时间：2013-03-26T06:57:22.647
> 
> 标签：php, twitter

通常，代码应该收集推文，对其进行处理并将一些统计信息存储在数据库中。我将 phirehose 库用于 Twitter Stream API，因此它不断地流式传输推文。据我了解，我无法在同一进程中解析推文，因此我应该在其他进程中解析推文，因此 phirehose lib 应该获取推文并将其存储在某处或将它们排队到内存中以供其他进程（或进程）使用，这将解析它们并存储在数据库中。所以我不想重新发明轮子，所以可能有一些代码片段或一些库，允许这样的数据处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-10T10:21:31.690

我很晚才回答这个问题，但其他人可能会觉得它有帮助。虽然 Phihose 可能会起作用，但它看起来很脆弱。它没有实现完整的 HTTP 客户端，而是手动发送标头并尝试解析响应。

我建议使用适当的 HTTP 客户端。如果您只想使用单个流，则不需要非阻塞 I/O，但这会很有帮助，因为您可以在其他地方写入结果，同时继续使用 Twitter 的流*。*

一个这样的客户端是[Artax](https://github.com/amphp/artax)，它支持开箱即用的流式响应。它可以很容易地与[流式 JSON 解析器](https://github.com/kelunik/streaming-json)结合使用。您可以在上述 JSON 解析器的存储库中[找到完整示例](https://github.com/kelunik/streaming-json/blob/eabf02a1a1141011efceefa81cde546913dce799/examples/twitter-streaming.php#L62-L78)，您可能希望使用单独的包进行请求签名。

该组合已经解析了发出的流，您只需要对推文做您需要做的事情，例如总结您的统计数据并将它们写入某处。如果您不想在这样做时阻塞流消耗，则需要支持非阻塞 I/O 的东西来写入数据。

```
/** @var Response $response */
$response = yield $client->request(
    (new Request($uri, "POST"))
        ->withHeader("authorization", $authorization)
);

if ($response->getStatus() !== 200) {
    exit(1);
}

$parser = new StreamingJsonParser($response->getBody(), true);

while (yield $parser->advance()) {
    // do whatever you want with your tweet here
    var_dump($parser->getCurrent());
} 
```

# decode - informatica 中的更新标志端口中的解码功能是做什么的？

> ID：15631123
> 
> 赞同：3
> 
> 时间：2013-03-26T06:57:23.800
> 
> 标签：decode, data-warehouse, etl, informatica-powercenter, informatica

我是 Informatica 的新手，想问一个有关 infa 端口的问题。我找到了一个示例，该示例显示了如何在表达式转换中创建更新标志以更新数据。端口中的代码`v_UPDATE_FLAG`如下所示：

```
IIF(NOT ISNULL(PREV_ITEM_KEY)
AND
(
DECODE(BONUS_FLAG,PREV_BONUS_FLAG,1,0) = 0 
OR
DECODE(DISCOUNT,PREV_DISCOUNT,1,0) = 0 
OR
DECODE(PRICE,PREV_PRICE,1,0) = 0 
),'TRUE','FALSE') 
```

你能解释一下这是做什么的吗？DECODE 在这里做什么？

```
DECODE(BONUS_FLAG,PREV_BONUS_FLAG,1,0) = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:20:21.723

`DECODE`句法：

```
DECODE (
  value
, first_search  , first_result 
, second_search , second_result
, ...           , ...
                , default
) 
```

将`value`参数与参数进行比较`search`，当找到第一个匹配项时，`result`返回相应的参数。如果没有匹配，`default`则返回参数。

`DECODE(BONUS_FLAG,PREV_BONUS_FLAG,1,0) = 0`表示`BONUS_FLAG`和`PREV_BONUS_FLAG`不相等。

当`PREV_ITEM_KEY`不为 NULL 且任何属性或已更改（先前值与当前值）时`BONUS_FLAG`，整个表达式为 UPDATE 标记一行。`DISCOUNT``PRICE`

# jquery - 如何防止fancybox-2后面的页面滚动

> ID：15631124
> 
> 赞同：15
> 
> 时间：2013-03-26T06:57:27.613
> 
> 标签：jquery, fancybox, fancybox-2

我们使用 fancybox2 来显示图像。一切正常，但是当fancybox中显示较大的图像时，后面的页面会滚动到顶部。关闭fancybox后，用户必须向下滚动到他打开盒子的位置。fancybox2 站点上的示例未显示此行为。我不知道，实现这一点的区别在哪里。

```
fancyOptions = {
  type: 'image',
  closeBtn: false,
  autoSize: false,
  scrolling: 'no',
  type: 'image',
  padding: [10,10,10,10],  
  beforeLoad: function(){
    this.title = getTitle(this);
    this.href = $(this.element).closest('a').attr('href');
  },
  helpers: {
    overlay: {
      css: {
        'background': 'rgba(0, 0, 0, 0.7)'
      },
    },
    title: {
      type: 'inside'
    }
  }
}; 
```

我们在 require.js 中使用 fancybox2 作为模块。.fancybox() 调用位于 $(document).ready 块中。

那里有 2 个滚动条，我用 css 隐藏了一个

```
.fancybox-overlay {
overflow: hidden !important;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-03T21:14:22.433

显然，Fancybox 将元素上`overflow`的CSS 属性更改为显示图片时。这会导致背景滚动回顶部。您所要做的就是注释掉stylesheet部分中的行。`body``hidden``overflow: hidden !important;``.fancybox-lock``jquery.fancybox.css`

请参阅[fancybox2 / fancybox 导致页面也跳到顶部](https://stackoverflow.com/questions/13547007/fancybox2-fancy-box-causes-page-to-to-jump-to-the-top/17458177#17458177)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-09T08:32:50.247

这对我来说很好用：

在 facnybox 初始化中添加跟随函数

```
beforeShow: function(){
    $("body").css({'overflow-y':'hidden'});
},
afterClose: function(){
    $("body").css({'overflow-y':'visible'});
} 
```

例子：

```
$(".fancyBoxTrigger").fancybox({
    maxWidth    : 820,
    maxHeight   : 670,
    fitToView   : false,
    width       : 760,
    height      : 580,
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
    padding     : 10,
    closeBtn    : false,
    beforeShow: function(){
        $("body").css({'overflow-y':'hidden'});
    },
    afterClose: function(){
        $("body").css({'overflow-y':'visible'});
    },
    helpers : {
        overlay : {
            opacity: 0.4,
            locked: false
        }
    }
}); 
```

我希望它对你有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-02T01:25:15.127

这对我有用：

```
$.fancybox({
        scrolling   : 'hidden',
        helpers: {
            overlay: {
              locked: true 
            }
        }); 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T08:07:53.437

我猜？您单击以触发 fancybox 的选择器很可能是带有`hashmark`like 的锚点：

```
<a href="#"> 
```

然后你`href`从最近的`<a>`元素中得到幻想框，就像你的代码一样：

```
 beforeLoad: function(){
    this.title = getTitle(this);
    this.href = $(this.element).closest('a').attr('href');
  } 
```

这**[是一个重现您描述的行为的演示](http://jsfiddle.net/xTwPn/)**（向下滚动内容，直到找到触发 fancybox 的缩略图）

如果我上面的假设是正确的，那么您可能的解决方案是：

1）。`hashmark`将锚的`href`属性更改为`hashtag` `#nogo`类似`<a href="#nogo">`

正如[Stuart Nicholls (cssplay)](http://www.cssplay.co.uk/menu/scroll_gallery.html)在 2005 年 3 月 15 日更新的链接帖子中所提到的。

2）。或者用like替换`hashmark`你的锚`href`属性中的`javascript:;``<a href="javascript:;">`

使用第一个选项查看**[更新的 JSFIDDLE 。](http://jsfiddle.net/xTwPn/1/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-25T19:37:15.537

我意识到这个问题已经被问过一段时间了，但我认为我已经找到了一个很好的解决方案。问题是花哨的盒子会改变 body 的溢出值以隐藏浏览器滚动条。

正如 SimCity 所指出的，我们可以通过添加以下参数来阻止花式盒子这样做：

```
$('.image').fancybox({
  padding: 0,
  helpers: {
    overlay: {
      locked: false
    }
  }
}); 
```

但是，现在我们可以在查看我们花哨的框窗口时滚动主页。它比跳到页面顶部要好，但它可能不是我们真正想要的。

我们可以通过添加下一个参数来防止以正确的方式滚动：

```
 $('.image').fancybox({
      padding: 0,
      helpers: {
        overlay: {
          locked: false
        }
      },
    'beforeLoad': function(){
      disable_scroll();
        },
     'afterClose': function(){
       enable_scroll();
      }
    }); 
```

并从 galambalaz 添加这些功能。请参阅：[如何暂时禁用滚动？](https://stackoverflow.com/questions/4770025/how-to-disable-scrolling-temporarily)

```
 var keys = [37, 38, 39, 40];

    function preventDefault(e) {
      e = e || window.event;
      if (e.preventDefault) e.preventDefault();
      e.returnValue = false;  
    }

    function keydown(e) {
        for (var i = keys.length; i--;) {
            if (e.keyCode === keys[i]) {
                preventDefault(e);
                return;
            }
        }
    }

    function wheel(e) {
      preventDefault(e);
    }

    function disable_scroll() {
      if (window.addEventListener) {
          window.addEventListener('DOMMouseScroll', wheel, false);
      }
      window.onmousewheel = document.onmousewheel = wheel;
      document.onkeydown = keydown;
    }

    function enable_scroll() {
        if (window.removeEventListener) {
            window.removeEventListener('DOMMouseScroll', wheel, false);
        }
        window.onmousewheel = document.onmousewheel = document.onkeydown = null;  
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T07:11:55.600

你可以试试这个：-

```
beforeShow: function(){
 $("body").css({'overflow-y':'hidden'});
},

afterClose: function(){
 $("body").css({'overflow-y':'visible'});

} 
```

当 fancybox 打开时，它会停止父页面上的垂直滚动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-16T19:38:55.383

在 jquery.fancybox.css -> .fancybox-lock
change:
`overflow: hidden !important;`
to:
`overflow: visible !important;`
works for me :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-15T10:23:42.140

我的修改，这对我有帮助

```
/* Fancybox */
$('.fancybox').fancybox({
    beforeShow: function(){
        $("body").css({
            "overflow-y": "hidden",
            "position": "fixed"
            }
        );
    },
    afterClose: function(){
        $("body").removeAttr("style");
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-25T14:11:28.140

```
$('.fancybox').fancybox({
 'beforeLoad': function(){
   disable_scroll();
    },
 'afterClose': function(){
   enable_scroll();
  }
});

var disabled_scroll = false;

function disable_scroll() {
  disabled_scroll = true;
}

function enable_scroll() {
  disabled_scroll = false;
} 
```

在 fullPage.js 中

```
function scrollPage(element, callback, isMovementUp)
{
   if(disabled_scroll) return;
   .....
} 
```

# c# - 按 ID 查找具有特定内容类型的列表

> ID：15631133
> 
> 赞同：0
> 
> 时间：2013-03-26T06:58:09.637
> 
> 标签：c#, linq, sharepoint-2010, caml

如果我只有内容类型 ID，我需要了解如何从站点/网络获取列表，有一些大约 500 + 列表我不想“foreach”这些列表：

```
using (SPSite _SiteCollection = SPContext.Current.Site)
        {
            using (SPWeb _web = _SiteCollection.OpenWeb())
            {
                foreach (SPList _list in _web.Lists)
                {
                    foreach (SPContentType _type in _list.ContentTypes)
                    {
                        if (_type.Id == ContentTypeIds.ocTodoCTId)
                        {

                            foreach (SPListItem _item in _list.Items)
                            {

                               //bla bla bla  
                            }

                        }

                    }

                }
            } 
```

我找到了一种方法来做到这一点，但它不适用于沙盒解决方案。 [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spcontenttypeusage.getusages.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spcontenttypeusage.getusages.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:32:04.090

这段代码是一个解决方案：

```
 SPSiteDataQuery query = new SPSiteDataQuery();
                query.Webs = "<Webs Scope=\"SiteCollection\">";
                query.Lists = "<Lists BaseType='1' />";
                query.Query = "<Where><BeginsWith><FieldRef Name='ContentTypeId'/><Value Type='Text'>" +
                    "0x0101006d76968475dd473f92fbdec03bbff85e" +
                    "</Value></BeginsWith></Where>"; 
```

这里我们有你的内容类型的列表

# python - Ubuntu 12.04 中缺少 Python.h

> ID：15631135
> 
> 赞同：69
> 
> 时间：2013-03-26T06:58:18.447
> 
> 标签：python, ubuntu-12.04

我在我的 Ubuntu 12.04 上安装了一个名为 RYU 的 openflow 控制器，使用：

```
 sudo  pip install ryu 
```

我试图使用 ryu-manager 运行 python 文件，如下所示。

```
sudo ryu-manager simple_switch.py 
Traceback (most recent call last):
  File "/usr/local/bin/ryu-manager", line 19, in <module>
    import gevent
ImportError: No module named gevent 
```

然后我尝试使用以下方法安装 gevent：

```
sudo pip install gevent
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c gevent/core.c -o build/temp.linux-x86_64-2.7/gevent/core.o
gevent/core.c:4:20: fatal error: Python.h: No such file or directory

compilation terminated.

error: command 'gcc' failed with exit status 1 
```

这个错误的原因是什么？我尝试`Python.h`使用定位`sudo locate Python.h`，但没有成功。然而的输出`python -V`是

```
Python 2.7.3 
```

系统上应该`Python.h`有吗？如果是这样，我应该安装什么来获得它？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-03-26T07:34:13.867

这应该这样做：

`sudo apt-get update; sudo apt-get install python-dev -y`

它将安装任何缺少的标头。这对我帮助很大。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-26T07:11:37.803

即使您安装了 Python，默认情况下通常也不会安装头文件和库。在 Ubuntu 上，它们位于一个单独的包中，名为[`python-dev`](http://packages.ubuntu.com/search?keywords=python-dev).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-26T07:01:24.437

直接安装`gevent`- `sudo apt-get install python-gevent`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-14T00:14:28.243

嘿社区我通过这个命令解决了这个问题

> pip3 install -U git+https://github.com/kti/python-netfilterqueue

希望它有效:)

# mysql - MySQL 连接运算符

> ID：15631137
> 
> 赞同：49
> 
> 时间：2013-03-26T06:58:20.147
> 
> 标签：mysql, sql, concatenation

我不知道 MySQL 的连接运算符。

我已经尝试使用此代码进行连接：

```
SELECT vend_name || ' (' || vend_country || ')'
FROM Vendors
ORDER BY vend_name; 
```

但它没有用。我应该使用哪个运算符来连接字符串？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-07-16T09:33:59.140

`||`是 ANSI 标准字符串连接运算符，大多数数据库都支持（尤其是[MS SQL Server 不](https://stackoverflow.com/a/11404025/1157100)支持）。MySQL 也支持它，但你必须[`SET sql_mode='PIPES_AS_CONCAT';`](https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sqlmode_pipes_as_concat)或[`SET sql_mode='ANSI';`](https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sqlmode_ansi)首先。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-26T07:01:04.847

您使用的是 ORACLE 类型的连接。MySQL的应该是

```
 SELECT CONCAT(vend_name, '(', vend_country, ')') 
```

调用该`CONCAT()`函数并用逗号分隔您的值。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-26T07:01:01.000

MySQL CONCAT 函数用于连接两个字符串以形成单个字符串。试试下面的例子：

```
mysql> SELECT CONCAT('FIRST ', 'SECOND');
+----------------------------+
| CONCAT('FIRST ', 'SECOND') |
+----------------------------+
| FIRST SECOND               |
+----------------------------+
1 row in set (0.00 sec) 
```

要更详细地了解 CONCAT 函数，请考虑具有以下记录的 employee_tbl 表：

```
mysql> SELECT CONCAT(id, name, work_date)
    -> FROM employee_tbl;
+-----------------------------+
| CONCAT(id, name, work_date) |
+-----------------------------+
| 1John2007-01-24             |
| 2Ram2007-05-27              |
| 3Jack2007-05-06             |
| 3Jack2007-04-06             |
| 4Jill2007-04-06             |
| 5Zara2007-06-06             |
| 5Zara2007-02-06             |
+-----------------------------+ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-21T19:21:19.127

使用的好处`concat`是您可以传递不同的数据类型列和连接字符串表示

```
 SELECT concat('XXX',  10.99, 'YYY', 3, 'ZZZ', now(3)) as a; 
```

输出

> a
> -----
> XXX10.99Y​​YY3ZZZ2018-09-21 15:20:25.106

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-31T10:52:48.327

只需您可以使用`CONCAT`关键字来连接字符串..您可以像这样使用它

```
SELECT CONCAT(vend_name,'',vend_country) FROM vendors ORER BY name; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-01-14T19:29:59.737

每次使用管道作为连接运算符运行查询之前，您都必须将管道设置为连接。

# performance - 需要有关调整 Haskell 程序性能的建议

> ID：15631142
> 
> 赞同：1
> 
> 时间：2013-03-26T06:58:39.650
> 
> 标签：performance, haskell

我在 Haskell 中编写了一个程序来使用一堆 XML 文件作为输入进行报告。每个 xml 文件都包含缺陷记录的详细信息。不幸的是，我一直遇到“内存不足”的问题。

我已经把程序放在这里了 - [https://github.com/ckkashyap/haskell-perf-repro](https://github.com/ckkashyap/haskell-perf-repro)

我使用 parsec - 我首先使用 Text.ParserCombinators.Parsec 然后切换到 Text.Parsec ...看起来 Text.Parsec 在我的情况下需要更多内存。

无论如何，我怀疑真正的问题在于我解析和解决问题的方式。对于如何调试这种情况，我将不胜感激。

问候， 卡什亚普

# php - php电子邮件生成文件错误

> ID：15631146
> 
> 赞同：0
> 
> 时间：2013-03-26T06:58:56.750
> 
> 标签：php, html

大约一年前，我写了一个小订单应用程序，它允许用户选择一些项目，然后单击提交按钮，提交按钮然后触发一个 php 脚本，该脚本为订购它的人和公司创建电子邮件发票供应产品。

现在我对 PHP 还是很陌生，现在我又回到了它，我忘记了很多我写的东西，出于某种原因，我在电子邮件中收到了一个错误，我希望有人能帮助我找到它。

这是我的订单页面的样子

![在此处输入图像描述](../Images/b7de726e4761734cbb3475aa6f51db9b.png)

这是该页面的代码

```
<p><i>Required fields are marked with</i> <b>*</b></p>

<form action="orderformDNP.php" method="post"
onsubmit="document.getElementById('myButton').disabled=true;
document.getElementById('myButton').value='Submitting...';"
>

<table width="496" border="0" style="border-width: 1px; border-color:#E5E5E5;
border-style: solid;">
    <tr>
        <td width="40%">
            Name: *
        </td>
        <td width="60%">
            <input type="text" name="yourname" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Phone Number: *
        </td>
        <td width="60%">
            <input type="text" name="phonenumber" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Mobile Number: 
        </td>
        <td width="60%">
            <input type="text" name="mobilenumber" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            E-mail: *
        </td>
        <td width="60%">
            <input type="text" name="email" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Deliver Address: *
        </td>
        <td width="60%">
            <textarea name="deliveryaddress" rows="3" cols="40"></textarea>
        </td>
    </tr>
 </table>
 </br>

<!-- this is the ordering part of the form --!>

 <h3>Duvets</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 5050goosedown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>50/50 Goose Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";
  echo "<td><select name=". $row['goosedown_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br></br>
<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 5050duckdown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>50/50 Duck Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo "<td><select name=". $row['duckdown_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br></br>
<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 955goosedown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>95/5 Goose Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";
  echo "<td><select name=". $row['955goosedown_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br>
<h3>Pillows</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM goosedownpillows ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='62.5%'><b>Goose Down Pillows:</b></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  echo "<td>" . $row['name'] ."</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo "<td><select name=". $row['goosedownpillows_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br>
<h3>Feather Mattress Toppers</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM feathermattresstoppers ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='62.5%'><b>95/5 Mattress Toppers:</b></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";
  echo "<td><select name=". $row['feathermattresstoppers_id'] .">
                <option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>

<p><b>Additional Info:</b><br />
<textarea name="comments" rows="10" cols="40"></textarea></p>
</br></br>496

Access code: <input type="text" name="code" /><br />
Please enter <i>MYCODE</i> above. </br></br>

<input type="submit" value="Submit" id="myButton" />

        </td>

    </tr>
</table>

</td> 
```

这是orderformDNP，它似乎无法正常工作..我只是不知道为什么..

```
<?php
    session_start();

    $body_items = '';
    $total_price = 0;

    /* Set Redgraves Email address, so they receive the orders  */
    $myemail  = "clientsEmail@gmail.com";

    /* Check all form inputs using check_input function */
    $yourname = check_input($_POST['yourname'], "Enter your name");
    $phonenumber = check_input($_POST['phonenumber'], "Enter your phone number");
    $mobilenumber = check_input($_POST['mobilenumber']);
    $email    = check_input($_POST['email'], "Enter your E-mail address");
    $deliveryaddress = check_input($_POST['deliveryaddress'], "Enter your delivery address");

    $comments = check_input($_POST['comments']);

    $random = substr(number_format(time() * rand(),0,'',''),0,10);

    $goosedown_id = ($_POST[$row['goosedown_id']]); 

    if (strtolower($_POST['code']) != 'mycode') 
    {
        die('Wrong access code');
    }

    /* If e-mail is not valid show error message */
    if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
    {
        show_error("E-mail address not valid");
    }

    /* If phone number has characters show error message */
    if (preg_match("/\D/",$phonenumber))
    {
        die("Please enter numbers only for Phone Number");
    }

    /* If mobile number has characters show error message */
    if (preg_match("/\D/",$mobilenumber))
    {
        die("Please enter numbers only for Mobile Number");
    }

    // 5050duckdown
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['5050goosedown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['5050goosedown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['5050goosedown'][$key]['name'] . "   -" . $_SESSION['5050goosedown'][$key]['width'] . "/" . $_SESSION['5050goosedown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['5050goosedown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['5050goosedown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>50/50 Goose Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////////////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['5050duckdown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "   -" . $_SESSION['5050duckdown'][$key]['width'] . "/" . $_SESSION['5050duckdown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['5050duckdown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['5050duckdown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>50/50 Duck Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    /////////////////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['955goosedown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['955goosedown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['955goosedown'][$key]['name'] . "   -" . $_SESSION['955goosedown'][$key]['width'] . "/" . $_SESSION['955goosedown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['955goosedown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['955goosedown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>95/5 Goose Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['goosedownpillows'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['goosedownpillows'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['goosedownpillows'][$key]['name'] . "   -" . $_SESSION['goosedownpillows'][$key]['width'] . "/" . $_SESSION['goosedownpillows'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['goosedownpillows'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['goosedownpillows'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>Goose Down Pillows:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['feathermattresstoppers'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['feathermattresstoppers'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['feathermattresstoppers'][$key]['name'] . "   -" . $_SESSION['feathermattresstoppers'][$key]['width'] . "/" . $_SESSION['feathermattresstoppers'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['feathermattresstoppers'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['feathermattresstoppers'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag = 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>95/5 Mattress Toppers:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }
    $body_items .= "<br /><b>Total: $total_price</b></b></b>";

/*-------------------First Email--------------------*/

    /* Set Email for Redgraves, so they can for-full the order form */
    $message = "A order form has been submitted by: $yourname<br /><br />

    Order number :<u>$random</u><br /><br />

    <b>Name:</b> $yourname<br />
    <b>E-mail:</b> $email<br />
    <b>Phone Number:</b> $phonenumber<br />
    <b>Mobile Number:</b> $mobilenumber<br />
    <b>Delivery Address:</b> $deliveryaddress<br />
    <b>Comments:</b> $comments<br /><br />

    $body_items

    <br /><br />**End of message**
    ";

/* Send the message using mail() function */
    $header= "MIME-Version: 1.0\r\n";
    $header.= "Content-type: text/html\r\n";
    mail($myemail, "Order Submitted", $message, $header);

    /* Send the message using mail() function */
    //mail($myemail, "Order Submitted", $message);

/*---------------Second Email---------------------*/    

    /* This email is to confirm the order and act as a receipt to the purchaser */
    $respond_message = "Order Completed<br /><br />

    Your order has been submitted! details are as follows<br /><br />

    <b>Name:</b> $yourname<br />
    <b>E-mail:</b> $email<br />
    <b>Phone Number:</b> $phonenumber<br />
    <b>Mobile Number:</b> $mobilenumber<br />
    <b>Delivery Address:</b> $deliveryaddress<br />
    <b>Comments:</b> $comments<br /><br />

    $body_items

    <br /><b>Reference Number:</b> <u>$random</u><br /><br />

    Please make payment using the refrence number above within 7 working days or your order will be canceled <br />
    ASB 000-0000-0000-00 ";

    /* Send the message using mail() function */
    $headers= "MIME-Version: 1.0\r\n";
    $headers.= "Content-type: text/html\r\n";
    mail($email, "Thank you for your order", $respond_message, $headers);

    /* Redirect visitor to the thank you page */
    header('Location: thankyou.html');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
    return $data;
}

function show_error($myError)
{
?>
    <html>
    <body>

    <b>Please correct the following error:</b><br />
    <?php echo $myError; ?>

    </body>
    </html>
<?php
exit();
}
?> 
```

这就是电子邮件正在发生的事情...... :(

```
A order form has been submitted by: kc

Order number :8674170468

Name: kc
E-mail: testing@gmail.com
Phone Number: 0941
Mobile Number: 64215
Delivery Address: japan
Comments: 

95/5 Mattress Toppers:  Item Price  Quantity    Price

Total: 0 

**End of message** 
```

我已经在这几天了，我很困惑，也许这个错误是由数据库上的 php 版本引起的还是什么？？？

任何帮助将不胜感激

更新：这是从**print_r($_POST);**

```
Array ( [yourname] => kc 
        [phonenumber] => 987 
        [mobilenumber] => 987 
        [email] => test@gmail.com 
        [deliveryaddress] => testing 66 
        [1] => 
        [2] => 
        [comments] => sdsdf 
        [code] => MYCODE ) 
```

更新 2：电子邮件输出不输出价格以及其他几个值

![在此处输入图像描述](../Images/624bb1251997336a8620b75a432f5a71.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:04:15.370

`if ($flag = 1)`

应该是`if ($flag == 1)`

对于大多数条件句，它被正确地写为后者，但不是床垫罩子。这就是为什么总是出现空床垫罩部分的原因。

根据显示的`$_POST`内容，您的实际表单字段的名称与您的 PHP 期望找到的名称之间似乎存在不匹配。例如 50/50 Goosedown 部分正在寻找： `$_POST['5050goosedown']`但我认为与此相关的下拉列表是这样的`<select name=". $row['goosedown_id'] .">`，因此它会显示在 $_POST 中，其键等于任何`$row['goosedown_id']`值。看起来这些是数字（`$_POST`for`1`和`2`.

为什么它们是空的？我的猜测是这些 ID 在多个字段中共享，因此您有多个具有相同名称的选择，并且在提交时它们相互冲突。

尝试将选择更改为如下所示（第一个示例）：

```
echo '<td><select name="5050goosedown[' . $row['goosedown_id'] . ']">'
. "<option>1</option>
<option>2</option>
and so on 
```

这将导致它显示`$_POST`为嵌套数组，例如

```
array(
    [5050goosedown] => array( 
        [1] => 2, 
        [2] => 
    )
) 
```

此处的特定项目 ID 为 1 和 2。这似乎是 PHP 代码所期望的。

# android - 从另一个活动中调用一个活动中的函数的正确方法是什么？

> ID：15631149
> 
> 赞同：0
> 
> 时间：2013-03-26T06:59:07.553
> 
> 标签：android, android-activity

`activity`从另一个调用函数的正确方法是什么`activity`。我曾经通过创建`static object`第一个`activity`并从第二个调用它来做到这一点`activity`。但是这种方法据说会导致内存泄漏。那么什么是正确的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:05:28.353

您描述的方法仅在您将上下文/活动存储在某处时才会导致内存泄漏。

android sdk 中有一些类使用相同的方法（例如 Toast）

# jrebel - 如何将以前版本的 jrebel for EE 安装到 Eclipse 中

> ID：15631152
> 
> 赞同：2
> 
> 时间：2013-03-26T06:59:20.200
> 
> 标签：jrebel

我正在使用 liferay 6.0.6+ jrebel 5.2，但似乎 jrebel 5.2 导致 liferay 服务器的每个页面加载都卡住了几秒钟。以前的版本没有这个问题，但是在线安装并没有让我们选择安装哪个版本，而是安装最新版本。那么如何将以前版本的jrebel ee安装到eclipse中呢？我试图用 5.1.3 的 jrebel.jar 替换 eclipse 插件中的 jrebel.jar，但没有效果。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:09:47.433

您可以下载 5.1.3 [ZIP 存档](http://zeroturnaround.com/software/jrebel/download/prev-releases/)，然后在**Help** -> **JRebel Config Center**中选择替代 jrebel.jar

![在此处输入图像描述](../Images/d9fa4a648f730c592138fea94fa6b980.png)

# android - android我如何创建文件夹并在屏幕上显示

> ID：15631154
> 
> 赞同：0
> 
> 时间：2013-03-26T06:59:28.260
> 
> 标签：android

我想在内部存储器中创建一个画廊文件夹，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/b18cd0af1afc034eb01e17bf46fac083.png)

单击相册时，我希望它显示其中的图像列表。

```
String dirPath = getFilesDir().getAbsolutePath() + File.separator + "newfoldername";
File projDir = new File(dirPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:21:16.093

为了为您的应用程序创建一个文件夹，下面是代码，它采用您的文件夹的字符串名称并检查 SD 卡是否可用，如果它在图片文件夹中创建该名称的文件夹，否则如果 Sd 卡不存在则创建文件夹安装应用程序的内部存储器中的相同名称，例如 data/data.com.myapp/files/yourFolder

```
public File createDirectoryForApp(Context con, String dirName)
{
File directory=null;
    /*
     * This sections checks the phone to see if there is a SD card. if
     * there is an SD card, a directory is created on the SD card 
     */

    if (isExternalStorageWritable()) {

         // search for directory on SD card
        directory = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)
                + "/"+dirName+"/");

        // if no directory exists, create new directory to store test
        // results
        if (!directory.exists()) {
            directory.mkdir();
        }

    } 
    else
    {
          //create new file directory object in internal memory as no SD card is available
        directory = new File(con.getFilesDir()
                + "/"+dirName+"/");

        // if no directory exists, create new directory
        if (!directory.exists()) {
            directory.mkdir();
        }

    }
    return directory;
        }

//method used above to check external storage
 public static boolean isExternalStorageWritable() {
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        return true;
    }
    return false;
} 
```

并获取具有特定扩展名的文件和内部目录中的其他文件（也是文件），您可以使用以下方法

```
private List<File> getListFiles(File parentDir) {
ArrayList<File> inFiles = new ArrayList<File>();
File[] files = parentDir.listFiles();
for (File file : files) {
    if (file.isDirectory()) {
        inFiles.addAll(getListFiles(file));
    } else {
        if(file.getName().endsWith(".png")){
            inFiles.add(file);
        }
    }
}
return inFiles;
} 
```

并且要直观地表示所有这些信息，这取决于您如何设计布局并在从这些文件中获取数据后显示数据。

# c# - JavaScriptSerializer 有 registerconverters，如何在 RegisterConverts 类中调用 base deserialize 方法

> ID：15631155
> 
> 赞同：1
> 
> 时间：2013-03-26T06:59:34.573
> 
> 标签：c#, serialization, javascriptserializer

我有一个带有 RegisterConverters 类的 JavaScriptSerializer 来序列化 DataTime。在同一个类中，我有`Deserialize`throws 的方法`NotImplementedException`。 `RegisterConverters`序列化对象时类工作正常。

当使用相同的`JavaScriptSerializer`对象将 Json 对象反序列化回所需的 Class 对象时，它正在抛出`NotImplementedException`。

这里我不想使用Class`Deserilize`的方法。`RegisterConverters`我怎样才能做到这一点？它只是作为一个新`JavaScriptSerializer`对象工作，`RegisterConverters`在反序列化时没有。

```
public class DefaultNullPropertiesConverter : JavaScriptConverter
{
    public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
    {
        var jsonExample = new Dictionary<string, object>();
        foreach (var prop in obj.GetType().GetProperties())
        {
            //check if decorated with ScriptIgnore attribute
            bool ignoreProp = prop.IsDefined(typeof(ScriptIgnoreAttribute), true);

            var value = prop.GetValue(obj, BindingFlags.Public, null, null, null);
            if (value != null && !ignoreProp)
            {
                if (value.GetType().FullName == "System.DateTime" && Convert.ToDateTime(value) == DateTime.MinValue)
                    continue;
                else if (value.GetType().FullName == "System.DateTime")
                    jsonExample.Add(prop.Name, Convert.ToDateTime(value).ToString("yyyy-MM-dd"));
                else
                    jsonExample.Add(prop.Name, value);
            }
        }

        return jsonExample;
    }

    public override IEnumerable<Type> SupportedTypes
    {
        get { return GetType().Assembly.GetTypes(); }
    }

} 
```

现在当我调用反序列化方法时：

```
var restGeoCodeResponse rgcr = jss.Deserialize<restGeoCodeResponse>(result); 
```

这不应该调用 DefaultNullPropertiesConverter 类的 Deserialize 方法。只需反序列化，因为它没有任何 RegisterConverts。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:11:42.680

所以我要问的第一个问题是你传递给 RegisterConverters 方法的是什么？您是否编写了自己的 JavascriptConverter 来处理 DateTime 序列化和反序列化。如果是这样，那么您编写的 JavascriptConverter 类可能在 Deserialize 方法中有一个 throws NotImplementedException。

如果您使用的是第 3 方 JavascriptConverter，我会查看他们的源代码，或者如果您没有他们的源代码，请使用JetBrains 的 dotPeek 或[Telerik](http://www.jetbrains.com/decompiler/)的[JustDecompile等工具反编译源代码](http://www.telerik.com/products/decompiler.aspx)

# c - g_hash_table：int64 作为键

> ID：15631157
> 
> 赞同：0
> 
> 时间：2013-03-26T06:59:46.323
> 
> 标签：c, glib

我正在使用`glib` `g_hash_table`创建一个哈希表，其中 int64 作为键，指针作为值。

我尝试了这段代码，但失败了：

```
GHashTable* hash = g_hash_table_new(g_int64_hash, g_int64_equal);
uint64_t mer_v = 0;
exist_m = g_hash_table_lookup(hash, mer_v); 
```

它报告错误：

```
(gdb) bt
#0  IA__g_int64_hash (v=0x1d89e81700000) at /build/buildd/glib2.0-2.24.1/glib/gutils.c:3294
#1  0x00007ff2de966ded in g_hash_table_lookup_node (hash_table=0x13a4050, key=0x1d89e81700000) at /build/buildd/glib2.0-2.24.1/glib/ghash.c:309
#2  IA__g_hash_table_lookup (hash_table=0x13a4050, key=0x1d89e81700000) at /build/buildd/glib2.0-2.24.1/glib/ghash.c:898 
```

我`glib`经常使用数据结构，但从未尝试过带键 int64 的 hash_table。无法从 Google 找到任何帮助。本教程也没有任何点击：[http](http://www.ibm.com/developerworks/linux/tutorials/l-glib/section5.html) ://www.ibm.com/developerworks/linux/tutorials/l-glib/section5.html 。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:20:55.820

要使用`g_int64_hash`，`g_int64_equal`您需要将64 位密钥的*地址存储在哈希表中。*因此，正确的查找将是：

```
exist_m = g_hash_table_lookup(hash, &mer_v); 
```

要使用这个散列器/比较器，所有的键都需要动态分配，并且它们的地址传递给`g_hash_table_insert`和`g_hash_table_lookup`：

```
uint64_t *mer_p = malloc(sizeof(uint64_t));
*mer_p = mer_v;
g_hash_table_insert(hash, (gpointer) mer_p, (gpointer) m);

exists = g_hash_table_lookup(hash, (gpointer) &mer_v); 
```

一个常见的优化是将整数值直接存储为哈希表键，而不是它们的地址。哈希器和比较器是[`g_direct_hash`](https://developer.gnome.org/glib/2.31/glib-Hash-Tables.html#g-direct-hash)和[`g_direct_equal`](https://developer.gnome.org/glib/2.31/glib-Hash-Tables.html#g-direct-equal)。这要求所有整数键都适合指针的大小（如果可以使用则保证`uintptr_t`），并且可以将任意整数转换为指针并返回（ISO C 不保证，但主要平台尊重）。在这种情况下，插入和查找如下所示：

```
g_hash_table_insert(hash, (gpointer) mer_v, (gpointer) m);

exists = g_hash_table_lookup(hash, (gpointer) mer_v); 
```

# asp.net-mvc - ASP .NET MVC 4 应用程序作为 Windows azure 上的多租户应用程序

> ID：15631161
> 
> 赞同：1
> 
> 时间：2013-03-26T07:00:13.310
> 
> 标签：asp.net-mvc, azure, multi-tenant

我有一个 mvc 4 应用程序。我已经在数据库表中有一个字段（CompanyID）。现在我们计划将此应用程序作为多租户应用程序放在 Windows azure 上。我研究了很多论坛等等。关于如何使我现有的 mvc 4 应用程序成为与 windows azure 兼容的多租户，没有人给出完美的描述。

我们可以使用现有的应用程序和 Windows azure 来实现这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:10:27.420

> 我们可以使用现有的应用程序和 Windows azure 来实现这一点吗？

你当然可以。我几乎找不到任何适用于其他地方的方案，尤其是在微软的技术堆栈上，不能转移到 Azure。

> 我研究了很多论坛等等。关于如何使我现有的 mvc 4 应用程序成为与 windows azure 兼容的多租户，没有人给出完美的描述。

没有一个`this is how you do it`。有多种方法可以实现相同的目标。这就是为什么您无法找到自己的具体解决方案的答案。

让我问你一个问题：

*   您是否已创建 MVC4 应用程序以用作本地 IIS 服务器的多租户应用程序？

如果答案是`NO`- 那么首先在本地进行，确保它在本地工作，然后询问如何迁移到 Azure。

如果答案是`YES`- 那么您在将应用程序迁移到 Azure 时遇到的具体问题是什么。

# c++ - 查找点是否在几何内部

> ID：15631163
> 
> 赞同：11
> 
> 时间：2013-03-26T07:00:24.220
> 
> 标签：c++, stl, geometry, polygon, point

我正在编写一个代码，该代码需要确定一个点是否在特定几何图形内。几何形状可以是 2 维的 n 边多边形（不一定是凸的）或 3 维的 STL 几何形状。我实际上可以使用一些可用的算法编写搜索代码。但我正在寻找可以服务于此类目的的软件库。它可以是更大图书馆的一部分。对任何此类库或免费提供的代码的任何建议都可以。谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T07:25:24.413

威科比怎么[样](https://github.com/ArashPartow/wykobi)

> Wykobi 是一个极其高效、强大且易于使用的 C++ 2D/3D 计算几何库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:14:46.230

你可以看看这些：

[http://www.cgal.org/](http://www.cgal.org/)

[http://clb.demon.fi/MathGeoLib/nightly/](http://clb.demon.fi/MathGeoLib/nightly/)

[http://pointclouds.org/](http://pointclouds.org/)

[http://www.geometrictools.com/](http://www.geometrictools.com/)

[http://pointclouds.org/](http://pointclouds.org/)

[http://www.boost.org/doc/libs/1_48_0/libs/geometry/doc/html/index.html](http://www.boost.org/doc/libs/1_48_0/libs/geometry/doc/html/index.html)

# ruby - 关于对象的误解#tap

> ID：15631166
> 
> 赞同：4
> 
> 时间：2013-03-26T07:00:46.760
> 
> 标签：ruby

这是我的简单测试代码：

```
def test_function
  0.tap do |v|
    v += 10
  end
end

p test_function 
```

为什么我在这里得到 0 ？我在等10个。

**更新：**

```
class TestClass
    def initialize
        @v = 0
    end

    def inc 
        @v = @v + 1
    end
end

def test_function
    0.tap do |v|
        v += 10
    end
end

def test_function_2
    TestClass.new.tap { |obj|
        obj.inc
    }
end

p test_function
p test_function_2 
```

> 0
> 
> 测试类：0x29244f0 @v=1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T07:10:19.673

原因是原始对象没有被 += 操作符改变。那么在块中创建对它的引用，将引用更改为指向另一个对象，该对象大 10 然后返回，会发生什么情况。0 的值保持不变。

关于它的事情 - 这就是你想要发生的事情。+= 运算符不会更改它所操作的对象。它返回*另一个不同*的对象并将引用分配给它。这就像：

```
 v = 0
  v = v + 10 
```

你不会期望`0 == 10`在这之后是真的，对吧？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T09:36:35.503

这里还有其他答案：该方法`tap`返回原始对象。例如，您可以将其用于副作用，例如报告、收集统计数据或记录。它不会为您提供对原始对象的额外内部访问权限。

```
v = [0,1,2]
v.tap { |array| array.map { |x| x + 1 } }
=> [0,1,2]

v.tap { |array| array.map! { |x| x + 1 } }
=> [1,2,3] 
```

可以使用您的 test_function_2 的变体，其中您控制的对象具有 Integer 属性，甚至只是具有一个元素的数组：

```
def test_function
  [0].tap do |v|
    v[0] += 10
  end
end

p test_function[0]
=> 10 
```

. . . 取决于你想做什么？

# ruby-on-rails - 在 Active Record 回调中验证日文字符

> ID：15631168
> 
> 赞同：6
> 
> 时间：2013-03-26T07:00:53.897
> 
> 标签：ruby-on-rails, ruby, validation, rails-activerecord, cjk

我有一个日文项目需要验证半角和全角日文字符，半角允许 14 个字符，全角允许 7 个字符。

有谁知道如何实现它？

现在在我的模型上

```
class Customer
   validates_length_of :name, :maximum => 14
end 
```

不是一个好的选择

我目前使用的是 ror 2.3.5 全角和半角都可以

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T03:09:22.213

首先，全角（全角）和半角（半角）的概念只存在于日语中的两种字符：

*   罗马字符（即拉丁文）
*   片假名字符

韩文也有类似的概念，但日文平假名和汉字都没有。

对于**片假名**，半角字符有自己的 Unicode 代码点，它们呈现为全角字符大小的一半，尽管它们在其他方面的形状相同。例子：

全角“ka”：カ<br> 半角“ka”：ｶ</p>

半角版本中不存在组合字符（即带有像 ガ 这样的变音符号）；它们必须被编码为两个单独的字符：ｶ + ﾞ，这可能是您的任务中允许半角字符数量增加两倍的原因。（请注意，这些两个代码点的组合被视为*组合字符*，通常呈现为一个。）

对于**罗马（拉丁）字符**，通常的 ASCII 字符称为半角，但 Unicode 的日语代码范围（以及传统的日本特定字符集）为全角版本提供了单独的代码范围。例子：

全宽：Ｌ<br> 半宽：L

非 ASCII 拉丁语衍生字符（例如德语变音符号）不存在全角版本，重音版本也不存在。但是，它们确实存在于数字和一些标点符号中。

同样，平假名和汉字没有半角版本。

要检查字符是全角字符还是半角字符，请将代码点与相关代码范围进行比较。范围如下：

半角片假名：`0xff61`通过`0xff9f`
全角片假名：`0x30a0`通过`0x30ff`
半角罗马：`0x21`通过`0x7e`（这是 ASCII）
全角罗马：`0xff01`通过`0xff60`
平假名：`0x3041`通过`0x309f`
汉字（即统一表意文字范围）：`0x4e00`通过`0x9fcc`

这是一个简单的 Ruby 程序，它基于每个字符执行检查：

```
# -*- coding: utf-8 -*-

def is_halfwidth_katakana(c)
  return (c.ord >= 0xff61 and c.ord <= 0xff9f)
end

def is_fullwidth_katakana(c)
  return (c.ord >= 0x30a0 and c.ord <= 0x30ff)
end

def is_halfwidth_roman(c)
  return (c.ord >= 0x21 and c.ord <= 0x7e)
end

def is_fullwidth_roman(c)
  return (c.ord >= 0xff01 and c.ord <= 0xff60)
end

def is_hiragana(c)
  return (c.ord >= 0x3041 and c.ord <= 0x309f)
end

def is_kanji(c)
  return (c.ord >= 0x4e00 and c.ord <= 0x9fcc)
end

text = "Hello World、こんにちは、半角ｶﾀｶﾅ、全角カタカナ、ｆｕｌｌｗｉｄｔｈ ０－９\n"

text.split("").each do |c|
  if is_halfwidth_katakana(c)
    type = "halfwidth katakana"
  elsif is_fullwidth_katakana(c)
    type = "fullwidth katakana"
  elsif is_halfwidth_roman(c)
    type = "halfwidth roman"
  elsif is_fullwidth_roman(c)
    type = "fullwidth roman"
  elsif is_hiragana(c)
    type = "hiragana"
  elsif is_kanji(c)
    type = "kanji"
  end

  printf("%c (%x) %s\n",c,c.ord,type)
end 
```

* * *

**补充说明**

1.  上面的代码范围是每种字符类型的官方 Unicode 范围（请参阅[Unicode Fullwidth forms](http://www.unicode.org/charts/PDF/UFF00.pdf)和[Unicode Hiragana](http://www.unicode.org/charts/PDF/U3040.pdf)）。这些包括某些旧/传统形式或特殊标点字符的全角/半角版本。如果您只需要 Web 表单中常用的字符（例如供人们输入他们的姓名），您可能需要稍微缩小范围。

2.  建议：如果这是用于人们可以输入姓名的 Web 表单，您可能需要做的不仅仅是检查半角或全角。这在日本网站和注册表中非常常见，尤其是。对于银行，要求人们以纯半角（通常用于拉丁语）或纯全角（通常用于片假名）输入他们的姓名。不幸的是，这使得输入数据非常不方便。启用日文输入法后，拉丁字符通常以全角形式出现，然后 Web 表单将拒绝数据，因为它不是纯半角。而不是拒绝它，它应该*自动转换它*它需要的任何形式。您可以通过从一个代码范围转换到另一个代码范围来轻松实现这一点（只需添加相关常量），并使人们的生活更轻松。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T07:21:29.550

下面的代码*可能*会让您越过界限，以*尽可能最短的时间*满足您迄今为止指定的*确切*要求。它使用[Moji gem](https://github.com/gimite/moji)（[日语文档](http://gimite.net/gimite/rubymess/moji.html)），它提供了许多方便的方法来确定日语字符串的内容。

 *它验证 a 中最多 14 个字符（`name`仅**由**半角字符组成），以及`name`s 中最多 7 个字符（包括包含半角和全角字符组合的名称，即即使存在一个全角字符）字符串中的宽度字符将使整个字符串被视为“全角”）。

```
class Customer 

  validates_length_of :name, :maximum => 14, 
    :if => Proc.new { |customer| half_width?(customer.name) }
  validates_length_of :name, :maximum => 7
    :unless => Proc.new { |customer| half_width?(customer.name) }

  def half_width?(string)
    Moji.type?(string, Moji::HAN_KATA)
  end

end 
```

**假设**：

1.  系统内的数据编码为UTF-8，并以UTF-8的形式存储在数据库中；任何进一步必要的重新编码（例如将数据传递到遗留系统等）都在另一个模块中完成。
2.  在将数据保存到数据库之前不会自动将半角字符转换为全角字符，即数据库中允许使用半角字符，原因可能是遗留系统集成、正确保存实际用户输入（！）和/或美学半角字符的值（！）
3.  半角字符中的变音符号被视为它们自己的单独字符（即没有解析ｶ和ﾞ被视为一个字符以确定字符串长度）
4.  您指定的只有一个名称字段，而不是现在很常见 的四个（对于 surname，surname [furigana](http://en.wikipedia.org/wiki/Furigana)，given name，given name [furigana ）。](http://en.wikipedia.org/wiki/Furigana)*

# php - 为用户选择正确的数据

> ID：15631176
> 
> 赞同：0
> 
> 时间：2013-03-26T07:01:17.723
> 
> 标签：php, mysql, select

我的数据库中有两个表

![在此处输入图像描述](../Images/642fb07d8b0463c27e5675e5eaa0f506.png)

表任务的 U_ID 是表用户 id 的外键

我的代码是这样的

```
<?php
    require("common.php");
    if(empty($_SESSION['user']))
    {
        header("Location: login.php");
        die("Redirecting to login.php");
    }
    $query = "
        SELECT
            id,
            username,
            eID
        FROM users
        WHERE id <> '5'
    ";
    $query1 = "
        SELECT
            T_ID,
            task_tom,
            U_ID
        FROM tasks
        ORDER BY T_ID DESC LIMIT 1

    ";
    try
    {
        $stmt = $db->prepare($query);
        $stmt->execute();
    }
    catch(PDOException $ex)
    {
        die("Failed to run query: " . $ex->getMessage());
    }
    $rows = $stmt->fetchAll();

        try
    {
        $stmt1 = $db->prepare($query1);
        $stmt1->execute();
    }
    catch(PDOException $ex)
    {
        die("Failed to run query: " . $ex->getMessage());
    }
    $rows1 = $stmt1->fetchAll();
?>
<h1>Memberlist</h1>
<table border="1">
    <tr>
        <th>Username</th>
        <th>Employee ID</th>
        <th>Task</th>
    </tr>
    <?php foreach($rows as $row): foreach($rows1 as $row1): ?>
        <tr>
            <td><?php echo htmlentities($row['username'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td><?php echo htmlentities($row['eID'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td><?php echo $row1['task_tom']; ?></td>
           <?php endforeach; endforeach;?>
</table>
<br/>
<a href="edit_account.php">Edit Account</a><br /><a href="logout.php">Logout</a> 
```

我的问题是如何在表中填充对应于正确 U_ID 的任务列。
这段代码将为我提供这个答案

![在此处输入图像描述](../Images/84ccf7b74d3e195cd70312fcd1ee4129.png)

据说，SSIS（数据挖掘）只是分配给bassil的task_tom，而lawrence应该有一个空白任务，因为用户还没有为lawrence输入任何任务，但似乎我的select语句有缺陷，或者它是我的每个其中它将它打印在桌子上给每个用户。所以我的问题是如何解决这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:19:10.587

```
SELECT
    U.id,
    U.username,
    U.eID, 
    t.task_tom

FROM 
    users u

  INNER JOIN 
   (
      SELECT u_id, max(t_id) as t_id
      FROM tasks
      GROUP BY u_id
   ) tmax
  ON tmax.U_ID = u.id

  INNER JOIN tasks t ON t.t_id = tmax.t_id

WHERE u.id <> '5' 
```

这基本上是说“每个用户的最新任务 ID 是什么，现在让我获取有关该任务的所有信息”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:03:45.227

`JOIN`您的表使用`LEFT JOIN`或`RIGHT JOIN`或`INNER JOIN`根据您的要求。

```
 SELECT
        id,
        username,
        eID,
        T_ID,
        task_tom,
        U_ID
    FROM users
    LEFT JOIN tasks ON tasks.U_ID = users.id
    WHERE users.id <> '5'
    ORDER BY tasks.T_ID DESC
    GROUP BY users.id 
```

编辑了答案，但我不确定

```
ORDER BY tasks.T_ID DESC
GROUP BY users.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:18:58.300

```
$query="SELECT U.id,T.T_ID,task_tom FROM users U LEFT JOIN tasks T ON U.id = T.T_ID WHERE id <> '5' ORDER BY T.T_ID DESC group by U.id"; 
```

# php - 不使用隐藏字段的贝宝付款

> ID：15631185
> 
> 赞同：3
> 
> 时间：2013-03-26T07:02:01.837
> 
> 标签：php, paypal

我第一次实施贝宝付款集成。我正在使用隐藏字段将参数发送到贝宝。我真的不喜欢这种方法，因为用户很容易更改此信息。

有没有其他方法可以将数据发送到贝宝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:12:25.383

以某种或其他方式，您必须使用表单提交到贝宝 url。但是有一些方法可以玩得很聪明。我创建了这个类，它不是最好的，但仍然足以让用户远离编辑字段。

**班级**

```
<?php
/* 
///// ------------ Author :- Aman Virk 
//// ------------- Created On :- 2012-02-17
//// ------------- Licensed Under - Open Source
//// ------------- Author URI :- http://www.thetutlage.com

 */

 class paypal_class {

  var $last_error;                 // holds the last error encountered

  var $ipn_log;                    // bool: log IPN results to text file?

  var $ipn_log_file;               // filename of the IPN log
var $ipn_response;               // holds the IPN response from paypal   
var $ipn_data = array();         // array contains the POST values for IPN

  var $fields = array();           // array holds the fields to submit to paypal

 function paypal_class() {

  // initialization constructor.  Called when class is created.

  $this->paypal_url = 'https://www.paypal.com/cgi-bin/webscr';

  $this->last_error = '';

  $this->ipn_log_file = '.ipn_results.log';
  $this->ipn_log = true; 
  $this->ipn_response = '';

  // populate $fields array with a few default values.  See the paypal
  // documentation for a list of fields and their data types. These defaul
  // values can be overwritten by the calling script.

  $this->add_field('rm','2');           // Return method = POST
  $this->add_field('cmd','_xclick'); 

 }

   function add_field($field, $value) {

  // adds a key=>value pair to the fields array, which is what will be 
  // sent to paypal as POST variables.  If the value is already in the 
  // array, it will be overwritten.

  $this->fields["$field"] = $value;
 }

  function submit_paypal_post() {

  // this function actually generates an entire HTML page consisting of
  // a form with hidden elements which is submitted to paypal via the 
  // BODY element's onLoad attribute.  We do this so that you can validate
  // any POST vars from you custom form before submitting to paypal.  So 
  // basically, you'll have your own form which is submitted to your script
  // to validate the data, which in turn calls this function to create
  // another hidden form and submit to paypal.

  // The user will briefly see a message on the screen that reads:
  // "Please wait, your order is being processed..." and then immediately
  // is redirected to paypal.

 $paypal_submit_output = "<html>\n";
  $paypal_submit_output .= "<head><title>Processing Payment...</title></head>\n";
 $paypal_submit_output .= "<body onLoad=\"document.forms['paypal_form'].submit();\">\n";
     $paypal_submit_output .= '<center> <img src="images/ajax-loader.gif" /> <h4> Please wait we are processing your transaction </h4>
                    <h5> Do not refresh or press back button </h5> <center> ';
  $paypal_submit_output .= "<form method=\"post\" name=\"paypal_form\" ";
  $paypal_submit_output .= "action=\"".$this->paypal_url."\">\n";

  foreach ($this->fields as $name => $value) {
     $paypal_submit_output .= "<input type=\"hidden\" name=\"$name\" value=\"$value\"/>\n";
  }
  $paypal_submit_output .= "<center><input type=\"submit\" value=\"Click Here\"></center>\n<br />";

  $paypal_submit_output .= "</form>\n";
 $paypal_submit_output .= "</body></html>\n";
  return $paypal_submit_output;
 }

  function validate_ipn() {

  // parse the paypal URL
  $url_parsed=parse_url($this->paypal_url);

  // generate the post string from the _POST vars aswell as load the
  // _POST vars into an arry so we can play with them from the calling
  // script.
  $post_string = '';    
  foreach ($_POST as $field=>$value) { 
     $this->ipn_data["$field"] = $value;
     $post_string .= $field.'='.urlencode(stripslashes($value)).'&'; 
  }
  $post_string.="cmd=_notify-validate"; // append ipn command

  // open the connection to paypal
  $fp = fsockopen($url_parsed[host],"80",$err_num,$err_str,30);
  if(!$fp) {

     // could not open the connection.  If loggin is on, the error message
     // will be in the log.
     $this->last_error = "fsockopen error no. $errnum: $errstr";
     $this->log_ipn_results(false);       
     return false;

  } else { 

     // Post the data back to paypal
     fputs($fp, "POST $url_parsed[path] HTTP/1.1\r\n"); 
     fputs($fp, "Host: $url_parsed[host]\r\n"); 
     fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n"); 
     fputs($fp, "Content-length: ".strlen($post_string)."\r\n"); 
     fputs($fp, "Connection: close\r\n\r\n"); 
     fputs($fp, $post_string . "\r\n\r\n"); 

     // loop through the response from the server and append to variable
     while(!feof($fp)) { 
        $this->ipn_response .= fgets($fp, 1024); 
     } 

     fclose($fp); // close connection

  }

  if (eregi("VERIFIED",$this->ipn_response)) {

     // Valid IPN transaction.
     $this->log_ipn_results(true);
     return true;       

  } else {

     // Invalid IPN transaction.  Check the log for details.
     $this->last_error = 'IPN Validation Failed.';
     $this->log_ipn_results(false);   
     return false;

  }

 }

  function log_ipn_results($success) {

  if (!$this->ipn_log) return;  // is logging turned off?

  // Timestamp
  $text = '['.date('m/d/Y g:i A').'] - '; 

  // Success or failure being logged?
  if ($success) $text .= "SUCCESS!\n";
  else $text .= 'FAIL: '.$this->last_error."\n";

  // Log the POST variables
  $text .= "IPN POST Vars from Paypal:\n";
  foreach ($this->ipn_data as $key=>$value) {
     $text .= "$key=$value, ";
  }

  // Log the response from the paypal server
  $text .= "\nIPN Response from Paypal Server:\n ".$this->ipn_response;

  // Write to log
  $fp=fopen($this->ipn_log_file,'a');
  fwrite($fp, $text . "\n\n"); 

  fclose($fp);  // close file
 }

  function dump_fields() {

  // Used for debugging, this function will output all the field/value pairs
  // that are currently defined in the instance of the class using the
  // add_field() function.

  echo "<h3>paypal_class->dump_fields() Output:</h3>";
  echo "<table width=\"95%\" border=\"1\" cellpadding=\"2\" cellspacing=\"0\">
        <tr>
           <td bgcolor=\"black\"><b><font color=\"white\">Field Name</font></b></td>
           <td bgcolor=\"black\"><b><font color=\"white\">Value</font></b></td>
        </tr>"; 

  ksort($this->fields);
  foreach ($this->fields as $key => $value) {
     echo "<tr><td>$key</td><td>".urldecode($value)."&nbsp;</td></tr>";
  }

  echo "</table><br>"; 
 }
} 
```

**执行**

```
require_once('paypal.class.php');
    $p = new paypal_class;
    $p->paypal_url = 'https://www.paypal.com/cgi-bin/webscr';
      //    $p->paypal_url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';
    $p->add_field('business',$paypal_id);
    $p->add_field('return',$paypal_success_url);
    $p->add_field('cancel_return',$paypal_cancel_url);
    $p->add_field('notify_url',$paypal_ipn_url);
    $p->add_field('item_name',$payment_for);
    $p->add_field('amount', $amount);
    $p->add_field('custom', $unique_transaction_id);
    $new_form = $p->submit_paypal_post(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:34:31.300

如果您正在执行 SetExpressCheckout 和 GetExpressCheckout，则可以使用自定义字段。我在 Php 中使用新的 PayPal X.comm SDK Express Checkout，所以我将以此为例。

在设置要传递给 SetExpressCheckout 的请求对象时，您可以将参数放在自定义字段中。

```
$setECReqDetails->Custom = $billingFreq . "SPACE" . $billingPeriod; 
```

当您从 PayPal 返回时，您可以通过调用 GetExpressCheckoutDetails 并从响应对象的自定义字段中获取参数来取回这些参数。

```
$getECResponse = $paypalService->GetExpressCheckoutDetails($getExpressCheckoutReq);

$billingInfo = explode("SPACE",$getECResponse->GetExpressCheckoutDetailsResponseDetails->Custom);

$billingFreq = $billingInfo[0]; 
$billingPeriod = $billingInfo[1]; 
```

注意“空间”这个词的使用。这可以是任何词，但它被用作分隔符。这样，您可以通过在它们之间放置“SPACE”来传递任意数量的参数。

如果您想查看完整代码，可以从这里下载 X.comm SDK、express checkout、Php： [https](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index) ://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index 并转到 Merchant-sdk-dev-2.2.98/samples/ExpressCheckout/SetExpressCheckout.php 和 GetExpressCheckout.php 以查看代码。他们实际上并没有在示例代码中使用自定义，但您可以查看添加代码的位置。

# mysql - 错误代码：2013 查询期间丢失与 MySQL 服务器的连接

> ID：15631189
> 
> 赞同：1
> 
> 时间：2013-03-26T07:02:10.260
> 
> 标签：mysql, timeout

我正在执行一个查询，该查询在显示另一个错误之后给出此错误 **错误代码：2006 MySQL 服务器已消失**

我在 Google 中搜索并找到了一些要设置的参数，例如**connect_timeout、interactive_timeout 和 wait_timeout**

我从现有值中增加了所有参数值，但仍然显示该错误。

然后我创建了 2 个数据较少的测试表，然后查询执行得很好。

我的实时表有超过 50k 的数据，我在查询中使用联合表

我认为由于联合数据和我表中的大量数据，它需要更多时间。

我的查询

```
SELECT TBL.NAME1,
   TBL.NAME2 
  FROM (SELECT MLD1.LOGIN_NAME AS NAME1,
           MLD2.LOGIN_NAME AS NAME2 
      FROM FEDERATED_M_LOGIN_DETAILS MLD1 
      JOIN FEDERATED_M_LOGIN_DETAILS MLD2 
     WHERE MLD1.LOGIN_NAME < MLD2.LOGIN_NAME
  ORDER BY NAME1,NAME2) TBL    
WHERE NOT EXISTS (SELECT USER_NAME1,
                      USER_NAME2 
                 FROM CONNECTION C
                WHERE (C.USER_NAME1 = TBL.NAME1 AND C.USER_NAME2 = TBL.NAME2)); 
```

请帮助我摆脱这个问题。

提前致谢

# javascript - 如何使javascript中的排序功能表现得像mysql order by

> ID：15631194
> 
> 赞同：0
> 
> 时间：2013-03-26T07:02:32.850
> 
> 标签：javascript, mysql, sorting

我正在尝试对多维数组进行排序。我应该在javascript .sort() 函数的回调中添加什么以使其表现得像mysql order by？

例子。使用mysql order by，结果：

```
acx, 
acx abx,
acx acx,
S&P/ASX 20 
```

在js中使用排序函数，结果：

```
S&P/ASX 20,
acx, 
acx abx,
acx acx 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:10:28.123

问题是 JS 中的排序是区分大小写的。为了解决这个问题，提供一个函数作为 的参数[`sort`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)，它应该比较字符串的大写（或小写）版本。

```
function cmp(x, y) {
    return x > y ? 1 : x < y ? -1 : 0;
}

a = ["S&P/ASX 20","acx", "acx abx","acx acx"]

a.sort(function(x, y) {
    return cmp(x.toUpperCase(), y.toUpperCase())
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:11:13.293

目前尚不清楚您的多个维度是什么，但您的示例看起来只是在不区分大小写的情况下排序。

在任何情况下，要获得自定义行为，您所做的就是将一个函数传递给[`sort`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.11)比较元素，返回 -1、1 或 0。例如：

```
yourArray.sort(function(a, b) {
    a = a.toLowerCase();
    b = b.toLowerCase();
    if (a < b) {
        return -1;
    }
    if (a > b) {
        return 1;
    }
    return 0;
}); 
```

如果您要比较数组数组，则在比较函数中，您将比较在和中给出的两个*数组*中的各个条目。`a``b`

# jquery - 使用带有 webdriver 的 jQuery Fileuploader 自动上传文件

> ID：15631195
> 
> 赞同：1
> 
> 时间：2013-03-26T07:02:37.477
> 
> 标签：jquery

有没有人尝试过使用带有 webdriver 的 jQuery Fileuploader 自动上传文件？我正在使用 selenium 2.0a6 和 pythonbinding。

测试中的 webapp，[https](https://contactsui.ovi.com) ://contactsui.ovi.com 正在使用 jQuery Fileuploader 一次上传一部手机。单击一个链接添加照片将弹出一个文件上传窗口。选择文件后，它会自动将文件附加到 qqfile。我面临的挑战是 jQuery Fileuploader 似乎没有生成一对。检测或查找元素失败。听说可以使用Webdriver的execute_script直接调用jQuery来附加文件，但是怎么做呢？

如果你做过类似使用 jQuery Fileuploader 和 webdriver 自动上传文件的事情，请分享你的成功经验。谢谢。

# php - 如何将 php mail() 链接添加到自动“订阅过期”电子邮件的正文？

> ID：15631196
> 
> 赞同：1
> 
> 时间：2013-03-26T07:02:50.427
> 
> 标签：php

我需要在用户订阅完成时发送的电子邮件正文中添加一个链接。然后，此链接应向一个地址发送一封电子邮件，该地址表明“用户名”要续订其订阅。所以我需要在 php mail() 中做一个 php mail()，如果你理解我的话！此外，在他们单击链接后，他们应该会收到一条感谢消息。当前 'sendExpiryEmail' 函数的 php 代码如下。希望你能帮忙！谢谢。

公共函数 sendExpiryEmail($emails){

```
 foreach($emails as $email){

        $name = $email['name'];

        $emailaddress = $email['email'];

        $expirydate = date('jS F Y',strtotime($email['datetime_expire']));

        $subject = "AZ China Report expiry reminder";

        $body = '<p><img src="http://az-china.com/images/azchina_logo_email.jpg"></p>

                <p>Dear '.$name.',<br /><br />

                We hope you have been enjoying your subscription to the Black China Report.<br /><br />

                We aim to meet the needs of our readers, by de-mystifying the China market, and by providing accurate, current and pertinent facts and analysis.<br />

                We have some exciting new initiatives planned in the coming months.<br /><br />

                Your Black China Report subscription will expire on '.$expirydate.'.<br /><br />

                <strong>Renewing your subscription is easy.</strong><br /><br />

                Simply click here (link to mail()) and we will send you an order form and details on how to pay.<br /><br />

                If we can be any further assistance, please do not hesitate to contact us! <br /><br />

                Yours sincerely, <br /><br />

                Tom Martin<br /><br />

                AZ China</p>';

        // multiple recipients

        $to  = $emailaddress;

        //$to = 'c23gooey@gmail.com';

        // To send HTML mail, the Content-type header must be set

        $headers  = 'MIME-Version: 1.0' . "\r\n";

        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

        // Additional headers

        $headers .= 'From: AZ China <tom.martin@az-china.com>' . "\r\n";

        // Mail it

        mail($to, $subject, $body, $headers);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:42:31.220

处理此问题的一种方法是设置一个查找表或联结表，您将在其中存储一个唯一标识 ID，该 ID 是您为每个续订请求生成的具有相应用户 ID 的。

此表可能类似于：

```
renewals
-------------------------------
renewid              | userid
-------------------------------
[output of uniqid()] | bob
[output of uniqid()] | bill
[output of uniqid()] | sarah
... 
```

当您运行脚本来收集即将到期的帐户列表时，请在电子邮件步骤中添加一点：

```
while ...

    $renewid = uniqid();

    $renewurl = "http://.../renew.php?req=$renewid";

    // Put that URL in the body of the email.

    $renewsql = "
INSERT INTO renewals (
    renewid, userid
) VALUES (
    '$renewid', '{$email['userid']}'
)
";

    if ($db->query($renewsql)) {
        mail(...);
    }
} 
```

假设这`$email['userid']`就是用户 ID 字段的名称，并且您已在查询中选择了它`$emails`。

然后，使用类似的 URL `http://.../renew.php?req=$renewid`，您可以在以下位置执行类似的操作`renew.php`：

```
<?php

$renew = preg_replace('/^a-z0-9/i', '', $_GET['req']);

if ($renew != '') {
    $which = $db->query("
SELECT userid 
FROM renewals 
WHERE renewid = '$renew' 
LIMIT 1
");

    if ($which->hasRows()) {
        $userid = $which->get(0)->field('userid');

        // do whatever renewal stuff with the $userid

        $db->query("DELETE FROM renewals WHERE renewid = '$renewid'");
    } 
} 
```

您可以做的另一件事是添加一个`expires`列，以便您可以定期清除旧的续订请求。但或多或少，这是一般的想法。

# .net - 简单插入的实体框架性能很糟糕

> ID：15631204
> 
> 赞同：1
> 
> 时间：2013-03-26T07:03:12.820
> 
> 标签：.net, entity-framework-5

我首先使用带有代码的 EF 5 和带有 6.5.6 mySQL DotNet 连接器的 mySQL 5.5.25（但它不是连接器，因为 DevArt 连接器表现出相同的性能）并且具有如下实体：

```
public class SocialMediaEventEntity
{
    public virtual int Id { get; set; }   //PK
    public virtual DateTime Date{ get; set; }
    public virtual string ProvIdType{ get; set; }
    public virtual string ProviderId{ get; set; }
    public virtual int Rendered{ get; set; }
    public virtual int Sent{ get; set; }
    public virtual decimal UserId { get; set; }
    public virtual string UserName { get; set; }
    public virtual string UserScreenName { get; set; }
    public virtual string UserDescription { get; set; }
    public virtual ICollection<HistoryEntity> Messages { get; set; }
} 
```

它使用以下代码优先配置密钥等。

```
 HasKey(entity => entity.Id);
  Property(entity => entity.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity).IsRequired(); 
```

最终，我通过以下方式向该表添加了一行：

```
 var socialEvent = new SocialMediaEventEntity()
        {
                Date = ADate, 
                ProviderId = AProviderId, 
                ProvIdType = AProviderIdType, 
                Rendered = ARendered, 
                Sent = ASent, 
                UserId = AUserId, 
                UserName = AUserName ?? string.Empty,
                UserScreenName = AUserScreenName ?? string.Empty,
                UserDescription = AUserDescription ?? string.Empty,
                Messages = new List<HistoryEntity>()
        };

        MyDBContext.SocialMediaEvents.Add(socialEvent); 
```

在皮肤下，这会生成预期的 SQL：

```
INSERT INTO tblSocialMediaEvents(`Date`, ProvIdType, ProviderId, Rendered, Sent, UserId, UserName, UserScreenName, UserDescription) VALUES ('2013-03-25 14:26:30', 'Twitter', '316028289447763968', 0, 0, 280310495, 'ChuBbyBhu', 'Komang Trinda Dewi', 'Always smile,,,but no crazy..:D\r All must be beautiful in its time' 
```

现在，在我的机器上分析时的 INSERT 语句非常快，大约 1 毫秒，但是调用：

```
MyDBContext.SaveChanges(); 
```

需要从 ~20 到 ~40ms 的任何时间，偶尔 > 100ms。

![在此处输入图像描述](../Images/555f7c9a3f653e318062169fbd019bde.png)

当我分析代码时，我发现它实际上是大部分时间的事务提交。但是，当我在事务中执行完全相同的 SQL 到 mySQL 时，情况并非如此。

所以我的问题是：

*   如何提高此代码的性能？除了不那么频繁地调用 SaveChanges() 之外？
*   为什么事务提交比在像 HeidiSQL 这样的 mySQL 客户端工具中执行相同代码时花费的时间要长得多？

感谢任何帮助和指示。

> 编辑：我对 SQL Server 2008 Express 使用了完全相同的代码，性能非常出色。通常 INSERTS < ~1ms 和 SaveChanges ~1ms。我自然希望 M$ 产品很快，但我被 mySQL 卡住了，无法改变。那么有什么我可以做的吗？

# visual-studio - Visual Studio 自动完成和逗号

> ID：15631206
> 
> 赞同：1
> 
> 时间：2013-03-26T07:03:17.133
> 
> 标签：visual-studio, visual-studio-2012, editor

从 netbeans 迁移到 Visual Studio 2012 后，我似乎找不到编辑器的一个功能，它节省了很多时间（1 个键），如下所示：

假设您正在键入函数调用或定义或类似 this.doSomething(someString) 的内容，请注意当我在小弹出窗口中看到 doSomething 并按“（”也会自动完成关闭“）”时，它会自动完成。现在我只剩下在里面输入参数了，我继续写一些字符串，问题来了！现在光标在 ....(someString|) 中，所以我必须向右移动 1，然后写 ';'。但是，在 netbeans 中，我可以简单地写 ';' 它会正确地将它放在行尾，我不确定我是否在解释自己......

this.doSomething(someString;) ==> 这是我在 VStudio 中得到的，我不喜欢 this.doSomething(someString); ==> 这就是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:34:46.290

您可以使用 TAB 转到行尾。

写“this.d”，输入TAB完成

```
this.doSomething 
```

输入 "(" 获得

```
this.doSomething() 
```

然后写“someS”和TAB完成

```
this.doSomething(someString) 
```

光标在“g”和“)”之间。再次键入 TAB 并将光标移到“）”之后。用“;”完成

```
this.doSomething(someString); 
```

因此，您输入了“this.d TAB (someS TAB TAB ;"

没有办法做你真正想做的事，但使用 TAB 可以节省很多打字。

# php - PHP 图片上传文件名

> ID：15631210
> 
> 赞同：0
> 
> 时间：2013-03-26T07:03:35.053
> 
> 标签：php, javascript, html

好的，如此简短而甜蜜；我已经有一个在 PHP 中完美运行的图像上传器，来自 HTML 表单。我现在需要以某种方式将上传的图像名称存储到 Javascript 中的变量中。图片名称必须不带图片路径保存。例如：images123.jpg。

我正在创建一种注册表单，因此我不需要将每个图像保存为变量，只需将当前图像保存为变量，因此将其作为变量保存在用户帐户中。

老实说，我对 PHP 完全陌生，而且我还在学习，所以我不知道如何做到这一点。

所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:16:22.717

这对您在这里使用您的 php 代码很有用

```
<?php
if ($_FILES["file"]["error"] > 0)
{
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
}
else
{
 $imageName = $_FILES["file"]["name"];
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Stored in: " . $_FILES["file"]["tmp_name"];
}
?>
  <input type="hidden" id="imgName" value="<?php echo $imageName; ?>" /> 
```

通过隐藏字段名称在javascript中获取图像名称

```
 var imgName = document.getElementById("imgName").value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:40:19.870

使用 jQuery

```
$('#upload_document_name').bind('change', function() {

        var logoName = $('#upload_document_name').val();
        $('#uploadDocumentName').attr('value', logoName);                   
}); 
```

**注意：**应该有一个名为“uploadDocumentName”的隐藏或文本字段。

# java - 对子类的对象使用相同的超类方法

> ID：15631212
> 
> 赞同：1
> 
> 时间：2013-03-26T07:03:37.827
> 
> 标签：java, polymorphism

```
class A {
    void test() {
    }
}

class B extends A {
    void test() {
    }

 public static void main(String[] args)
{
 B b=new B();
//insert code here
}
} 
```

如何为 B`test`类的对象**b**调用 A 类的方法？专门针对对象 b

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T07:06:15.907

您不能从B*外部*调用它...但*在*B 内部您可以将其称为：

```
super.test(); 
```

这可以从 B 中的任何代码完成 - 它不必在`test()`方法本身中。例如：

```
public void foo() {
    // Call the superclass implementation directly - no logging
    super.test();
}

@Override void test() {
    System.out.println("About to call super.test()");
    super.test();
    System.out.println("Call to super.test() complete");
} 
```

请注意`@Override`告诉编译器您确实*是*要覆盖方法的注释。（除此之外，如果您在方法名称中有拼写错误，这将帮助您快速找到它。）

您不能从 B 外部调用它的原因是 B*覆盖*了该方法......覆盖的目的是替换原始行为。例如，在带有参数的方法中，B 可能希望在调用超类实现或执行其他操作之前对参数执行某些操作（根据自己的规则对其进行验证）。如果外部代码只能调用 A 的版本，那将违反 B 的期望（和封装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:09:41.873

类本身是错误的。定义类名时不应添加括号。您可以在B 类`super.test()`的方法中使用对象类型转换或调用`test`

```
class A
 {
 test()
 {}
 }

   class B extends A
  {
  test()
  {
   super.test()   // calls the test() method of base class
   }
   }

  B b=new B(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:17:11.100

这可用于使用派生类对象调用基类方法。

`b.super.test()`

# objective-c - 将 refreshControl 添加到 TableViewController 的子视图时的 EXC_BAD_ACCESS

> ID：15631214
> 
> 赞同：0
> 
> 时间：2013-03-26T07:03:42.140
> 
> 标签：objective-c, ios6, uitableview

`BrowseViewController`加载`BrowseResultsTableViewController`为`subView`. 其中`subview`，是以下代码块：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];   
    [refreshControl addTarget:self action:@selector(refreshResults:) forControlEvents:UIControlEventValueChanged];
    [self.tableView addSubview:refreshControl];

}

- (void)refreshResults:(UIRefreshControl *)sender
{
    NSLog(@"REFRESH");
    //[self performSelector:@selector(updateTable) withObject:nil afterDelay:1];
} 
```

抛出错误`Thread 1: EXC_BAD_ACCESS (code=2 ....`

如果我清理项目并重新构建，我会收到此错误：

> 2013-03-25 23:59:06.256 rockit[40772:c07]-[UIViewControllerWrapperView refreshResults:]：无法识别的选择器发送到实例 0x7516fe0 2013-03-25 23:59:06.257 rockit[40772:c07] - 终止应用程序由于未捕获的异常“NSInvalidArgumentException”，原因：“-[UIViewControllerWrapperView refreshResults:]：无法识别的选择器发送到实例 0x7516fe0”

为什么找不到方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:10:49.457

我认为您的引用`BrowseResultsTableViewController`可能会在您创建它并且方法结束后发布。您可能需要在`BrowseViewController`引用它的内部创建一个实例变量。

// BrowseViewController.h

```
@interface BrowseViewController : UIViewController
// ...
@property (nonatomic, strong) BrowseResultsTableViewController *browseResultsVC;
// ...
@end 
```

// 浏览视图控制器.m

```
@implementation BrowseViewController
@synthesize browseResultsVC;
// ...
- (void)someMethod {
    self.browseResultsVC = [[BrowseResultsTableViewController alloc] init];
    [self.view addSubview:browseResultsVC];
}
// ...
#end 
```

# php - Evernote 与 PHP 的集成

> ID：15631218
> 
> 赞同：0
> 
> 时间：2013-03-26T07:04:05.837
> 
> 标签：php, evernote

我已经使用 PHP 成功完成了 Evernote 的身份验证。

我得到了这个回应。

```
Array ( [oauth_token] => S=s1:U=6316e:E=144fcfdfdb9:C=13da54cd1ba:P=185:A=maheshchari-2599:V=2:H=6da806fe92b9289cf0334f04e2afdc55 [oauth_token_secret] => [edam_shard] => s1 [edam_userId] => 405870 [edam_expires] => 1395813907897 [edam_noteStoreUrl] => https://sandbox.evernote.com/shard/s1/notestore [edam_webApiUrlPrefix] => https://sandbox.evernote.com/shard/s1/ ) 
```

现在，我想要已经通过evernote 认证的用户的笔记本列表。

我在网上做了很多研究，但我找不到任何有帮助的东西，我开始知道 guid 是获取笔记本列表所必需的。

从哪里可以找到？我怎样才能访问notestore和userstore？

php中如何调用notestore和userstore的函数来获取用户账户和用户笔记的数据？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:33:33.790

使用[Evernote SDK for PHP](https://github.com/evernote/evernote-sdk-php)，您可以按以下方式列出笔记本：

```
$client = new Client(array('token' => $authToken));
$noteStore = $client->getNoteStore();
$notebooks = $noteStore->listNotebooks(); 
```

所有 API 参考都可以在[这里](http://dev.evernote.com/documentation/reference/)找到。

此外，您不应该公开您的令牌。请确保您放置的令牌字符串不能再使用。如果您在这方面需要更多帮助，可以[从 Evernote 开发者支持处获得支持](http://dev.evernote.com/support/faq.php#getsupport)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T06:44:30.070

[https://github.com/evernote/evernote-sdk-php](https://github.com/evernote/evernote-sdk-php) 转到此链接并下载此 zip，然后转到示例文件夹，然后转到客户端文件夹并运行 EDAMTest.php 页面。并添加授权令牌。

# python - 如何在不更改原始字典的情况下将值分配给重复字典中的列表

> ID：15631221
> 
> 赞同：3
> 
> 时间：2013-03-26T07:04:26.010
> 
> 标签：python, list, dictionary

```
d = {1:[]}
dic = d.copy()
dic[1].append(2)

print "d=", d
print "dic=", dic 
```

### 输出

```
d= {1:[2]}
dic= {1:[2]} 
```

如何在`dic`不更改`d`和返回的情况下分配

```
d= {1:[]}
dic= {1:[2]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:06:04.183

使用[`copy.deepcopy()`](http://docs.python.org/2/library/copy.html#copy.deepcopy)：

```
In [5]: import copy

In [6]: d = {1:[]}

In [7]: dic = copy.deepcopy(d)

In [8]: dic[1].append(2)

In [9]: d
Out[9]: {1: []}

In [10]: dic
Out[10]: {1: [2]} 
```

你现在拥有的是一个*浅*拷贝：它只是复制了 list *reference*。结果，如果您在一个字典中更改列表的内容，它也会在另一个字典中更改。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T07:06:47.620

您可以使用`deepcopy`函数（而不是`copy`）来制作与 相同的新字典`d`。不要忘记通过导入它`from copy import deepcopy`。

# objective-c - Objective C 如何获取 UITextPosition 的数值

> ID：15631222
> 
> 赞同：9
> 
> 时间：2013-03-26T07:04:26.703
> 
> 标签：objective-c, struct, uitextrange, uitextposition

我需要获取 UIText 范围的开始和结束的数值。到目前为止，我只能将描述打印为字符串。

通过查看 selectedTextRange，我认为它可能是一个结构？如何获取结构的元素？

```
UITextRange *selectedRange = [myTextView selectedTextRange];

NSLog(@"selectedRange.start %@, selectedRange.end %@ ", selectedRange.start.description, selectedRange.end.description); 
```

这是描述：

```
2013-03-26 13:44:03.127 AttributedString[24678:907] selectedRange.start <UITextPosition: 0x1ead8f10, 8, {"Rrrttgh "}, {"gggggh ggg..."}>, selectedRange.end <UITextPosition: 0x1eaf7860, 14, {"...tgh gggggh"}, {" gggg"}> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:18:14.223

这里有一个类似问题的答案：[UITextPosition to NSRange](https://stackoverflow.com/questions/11732150/uitextposition-to-nsrange)。

基本上，您调用`-offsetFromPosition:toPosition:`的`UITextRange`开始和结束，初始位置为`myTextView.beginningOfDocument`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T07:25:40.850

UITextView 符合`UITextInput`. 作为该协议的一部分，它必须实现并处理它自己的 UITextRange 和 UITextPosition 子类。这些不是结构，而是对象。

[`offSetFromPosition:toPosition:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITextInput/offsetFromPosition%3atoPosition%3a)你可以通过使用和传入来获取一个简单的数字位置`beginningOfDocument`来获取起始位置。所有这些方法都将由 UITextView 实现。您还可以传入范围的开始和结束以找出选择的长度。

完整的协议参考[在这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intfp/UITextInput/)。

# javascript - 使用 Jquery，如何更改您单击的对象的 css？

> ID：15631225
> 
> 赞同：1
> 
> 时间：2013-03-26T07:04:50.413
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我正在处理一个非常动态的页面，为了简单起见，它将有很多我们称之为按钮的按钮（实际上是 div）。

这些按钮有一个 span 标签，里面有`display:none;`. 所有这些“按钮”都有 Span 内部和隐藏它们的 css 类。我不能为每个人创建一个#ID，它们将是动态的

我怎样才能使用 Jquery`.show()`仅使用被单击的项目进行动画处理。我无法输入 ID，因为它将使用 php 动态创建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:09:51.870

```
$('.button').click(function(){
    $(this).find('span').show();
}) 
```

**[jsfiddle](http://jsfiddle.net/pD3qh/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:12:49.420

尝试这个

```
$("div").click(function(){
    $(this).children("span").show();
}); 
```

**[演示](http://jsfiddle.net/uDSdX/3/)**

更多信息**[在这里](http://api.jquery.com/children/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:32:05.233

尝试这个

```
$(".button").click(function(){
  $("div span").hide();
  $(this).find("span").show();     
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:07:14.940

```
$(".className or #idName").css("thecssselector", "thevalue"); 
```

[看这里](http://api.jquery.com/css/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:21:04.300

[这里](http://jsfiddle.net/damian0o/jrFBS/)有一些小提琴。

```
$('div').click(function(){
    $(this).find('span').fadeIn("slow");
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T07:08:39.083

使用这个 jQuery：

```
$(document).ready(function(){
    $("tag name or id on which you will click").click(function(){
        $("tagname on which you want to apply the css").css("property_name","property_value");
   });
}); 
```

# php - 如何在一个表单中拥有多个变量

> ID：15631233
> 
> 赞同：0
> 
> 时间：2013-03-26T07:05:36.210
> 
> 标签：php, input

这是我到目前为止所拥有的：

```
Age: <input type="text" name="age">

   Canoe<input type="radio" name="ck">
        Kayak<input type="radio" name="ck">

<input type="submit" style=" margin-bottom: 30px;">
</form>

You are <?php $_POST["age"];
 if ($_POST["age"]<"11")
 echo "an Atom.";

 elseif ($_POST["age"]<"13")
 echo "a Peewee.";

 elseif ($_POST["age"]<"15")
 echo "a Bantam.";

 elseif ($_POST["age"]<"17")
 echo  "a Midget.";

 elseif ($_POST["age"]<"19")
 echo "a Juvenile.";

 elseif ($_POST["age"]<"21")
 echo "a Junior.";

 elseif ($_POST["age"]<"120")
 echo "a Senior.";

 elseif ($_POST["age"]>"120")
 echo "too old to race";
   ?> 
```

我希望能够在其中包含独木舟和皮划艇单选按钮，以使输出类似于：您是 Peewee 独木舟运动员，今年您的对手是：| 或者，你是一个侏儒皮划艇运动员。今年你的对手是：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:29:15.970

您是否尝试将 CK 值回显到您的输出中？这有帮助吗？

```
Age: <input type="text" name="age">

Canoe<input type="radio" name="ck" value="canoeist">
Kayak<input type="radio" name="ck" value="kayakist">

<input type="submit" style=" margin-bottom: 30px;">
</form>

<?php
        $ck = $_POST["ck"];
?>

You are <?php $_POST["age"];
if ($_POST["age"]<"11")
echo "a $ck Atom.";

elseif ($_POST["age"]<"13")
echo "a $ck Peewee.";

elseif ($_POST["age"]<"15")
echo "a $ck Bantam.";

elseif ($_POST["age"]<"17")
echo  "a $ck Midget.";

elseif ($_POST["age"]<"19")
echo "a $ck Juvenile.";

elseif ($_POST["age"]<"21")
echo "a $ck Junior.";

elseif ($_POST["age"]<"120")
echo "a $ck Senior.";

elseif ($_POST["age"]>"120")
echo "too old to race";
?> 
```

形式 radio 的值必须是 canoeist 和 "kayakist"。只需加上`$ck = $_POST['ck'];`你的句子就像`echo "a $ck Atom.";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:27:50.793

你应该在这里使用一些变量。

（我不是很擅长 php，但我会尝试一下）

```
Age: <input type="text" name="age">

    Canoe<input type="radio" name="ck" value="canoe"/>
    Kayak<input type="radio" name="ck" value="kayak"/>

<input type="submit" style=" margin-bottom: 30px;">
</form>

$boat = "";
if ($_POST["ck"] == "canoe")
{
    $boat = "canoeist";
} else if ($_POST["ck"] == "kayak")
{
    $boat = "kayak er";
}

$rank = "";
You are <?php $_POST["age"];
 if ($_POST["age"]<"11")
 $rank = "an Atom.";

 elseif ($_POST["age"]<"13")
 $rank = "a Peewee.";

 elseif ($_POST["age"]<"15")
 $rank = "a Bantam.";

 elseif ($_POST["age"]<"17")
 $rank =  "a Midget.";

 elseif ($_POST["age"]<"19")
 $rank = "a Juvenile.";

 elseif ($_POST["age"]<"21")
 $rank = "a Junior.";

 elseif ($_POST["age"]<"120")
 $rank = "a Senior.";

 elseif ($_POST["age"]>"120")
 $rank = "too old to race";

 echo "You are " . $rank . " " . $boat;
   ?> 
```

# php - 数组 Simplexml 以不同方式访问属性

> ID：15631239
> 
> 赞同：0
> 
> 时间：2013-03-26T07:05:57.863
> 
> 标签：php, arrays, attributes, simplexml

抱歉，如果我错过了这里的答案，但我真的无法在所有属性问题之间找到它。

我使用 SimpleXML 来解析 rss-feed 并且在 dev (xampp) 中效果很好

var_dump：

```
object(SimpleXMLElement)[672]
  public '@attributes' => 
    array (size=2)
      'name' => string 'A name' (length=11)
      'description' => string 'A very long desc' (length=12) 
```

这对我来说在开发上效果很好：

```
$desc = (string) $xml->attributes()['description']; 
```

...但不在我的网络服务器上。我找到了一个解决方案，在这两种情况下都有效：

```
$v = 'description';
$desc = (string) $xml->attributes()->$v; 
```

有人可以告诉我为什么。这个版本相关吗？再次：对不起，这个问题已经被问过了。

编辑：我刚刚发现，这也有效：

```
$a = $xml->attributes();
$desc = (string) $a['description']; 
```

同样的问题:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:59:07.443

# python - 在 Python 字典中有一个嵌套列表

> ID：15631241
> 
> 赞同：1
> 
> 时间：2013-03-26T07:06:01.517
> 
> 标签：python, sql, json

我有一个如下的数据库表。数据采用树的形式

```
 CREATE  TABLE IF NOT EXISTS DOMAIN_HIERARCHY (
                COMPONENT_ID        INT             NOT NULL ,
                LEVEL               INT             NOT NULL ,
                COMPONENT_NAME      VARCHAR(127)    NOT NULL ,
                PARENT              INT             NOT NULL ,
                PRIMARY KEY ( COMPONENT_ID ) 
                ); 
```

以下数据在表中

```
 (1,1,'A',0)
                (2,2,'AA',1)
                (3,2,'AB',1)
                (4,3,'AAA',2)
                (5,3,'AAB',2)
                (6,3,'ABA',3)
                (7,3,'ABB',3) 
```

我必须检索数据并存储在 python 字典中

在下面的代码中

```
 conx = sqlite3.connect( 'nameofdatabase.db' )
                curs = conx.cursor()
                curs.execute( 'SELECT COMPONENT_ID, LEVEL, COMPONENT_NAME, PARENT FROM DOMAIN_HIERARCHY' )
                rows = curs.fetchall()                    
                hrcy = {}                 
                for row in rows:
                    entry = ( row[2], {} )
                    cmap[row[0]] = entry
                    if row[1] == 1:
                        hrcy = {entry[0]: entry[1]}
                        hrcy['status'] = 0
                for row in rows:
                    item = cmap[row[0]]
                    parent = cmap.get( row[3], None )
                    if parent:
                        parent[1][row[2]] = item[1]
                        parent[1]['status'] = 0
                print json.dumps( hrcy, indent = 4 ) 
```

输出就像

```
 {
                    "status": 0, 
                    "A": {
                        "status": 0, 
                        "AA": {
                            "status": 0, 
                            "AAA": {}, 
                            "AAB": {}
                        }, 
                        "AB": {
                            "status": 0, 
                            "ABA": {}, 
                            "ABB": {}
                        }
                    }
                } 
```

我想要像这样的输出

```
 {
                    "component": "A",
                    "status": 0,
                    "children": [
                        {
                            "component": "AA",
                            "status": 0,
                            "children": [
                                {
                                    "component": "AAA",
                                    "status": 0,
                                    "children": []
                                },
                                {
                                    "component": "AAB",
                                    "status": 0,
                                    "children": []
                                }
                            ]
                        },
                        {
                            "component": "AB",
                            "status": 0,
                            "children": [
                                {
                                    "component": "ABA",
                                    "status": 0,
                                    "children": []
                                },
                                {
                                    "component": "ABB",
                                    "status": 0,
                                    "children": []
                                }
                            ]
                        }
                    ]
                } 
```

谁能告诉我应该做些什么改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:55:02.753

我会选择这样的东西：

```
import pprint

class Node(dict):
    def __init__(self, *args):
        dict.__init__(self)
        self['id'] = args[0]
        self['group'] = args[1]
        self['component'] = args[2]
        self['parent'] = args[3]
        self['status'] = 0
        self['children'] = []

    def add_node(self, node):
        for child in self['children']:
            if child.is_parent(node):
                child.add_node(node)
                break
        else:
            self['children'].append(node)

    def is_parent(self, node):
        return node['component'].startswith(self['component'])

class RootNode(Node):
    def __init__(self):
        Node.__init__(self, *[0, 0, "Root", -1])

    def is_parent(self, node):
        return True

def make_tree(nodes):
    root = RootNode()
    for data in nodes:
        node = Node(*data)
        root.add_node(node)
    return root

nodes =  [
        (1, 1, 'A', 0),
        (2, 2, 'AA', 1),
        (3, 2, 'AB', 1),
        (4, 3, 'AAA', 2),
        (5, 3, 'AAB', 2),
        (6, 3, 'ABA', 3),
        (7, 3, 'ABB', 3),
      ]

if __name__ == "__main__":
    tree = make_tree(nodes)
    pprint.pprint(tree['children'][0]) 
```

**输出**

```
{'children': [{'children': [{'children': [],
                             'component': 'AAA',
                             'group': 3,
                             'id': 4,
                             'parent': 2,
                             'status': 0},
                            {'children': [],
                             'component': 'AAB',
                             'group': 3,
                             'id': 5,
                             'parent': 2,
                             'status': 0}],
               'component': 'AA',
               'group': 2,
               'id': 2,
               'parent': 1,
               'status': 0},
              {'children': [{'children': [],
                             'component': 'ABA',
                             'group': 3,
                             'id': 6,
                             'parent': 3,
                             'status': 0},
                            {'children': [],
                             'component': 'ABB',
                             'group': 3,
                             'id': 7,
                             'parent': 3,
                             'status': 0}],
               'component': 'AB',
               'group': 2,
               'id': 3,
               'parent': 1,
               'status': 0}],
 'component': 'A',
 'group': 1,
 'id': 1,
 'parent': 0,
 'status': 0} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:42:12.663

只需构建您想要的字典，而不是其他东西：

```
for row in rows:
    entry = {"component": row[2], 
             "children": [], 
             "status": 0}
    cmap[row[0]] = entry
    if row[1] == 1:
        hrcy = entry
for row in rows:
    item = cmap[row[0]]
    parent = cmap.get( row[3], None )
    if parent:
        parent["children"].append(item) 
```

# xcode - 更新 ios 推送通知的 SSL 证书时是否需要重新创建 CK.pem？

> ID：15631243
> 
> 赞同：0
> 
> 时间：2013-03-26T07:06:06.840
> 
> 标签：xcode, push-notification, apple-push-notifications

当我为 ios 推送通知提供商续订 SSL 证书时，我是否需要重新创建 CK.pem 并在 keychan 和终端中重复所有步骤，然后将这些证书与 CK.pem 一起上传到我的服务器？或者只是我需要将更新的 development.cer 和 production.cer 上传到我的服务器并替换旧的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:26:58.140

是的，您需要用新证书替换所有旧证书。我已经在我的应用程序中尝试过一个，并且在我使用的任何地方替换证书后它都可以正常工作。

希望能帮助到你 ！！！

# android - 1118578 在我的 android 应用程序 facebook 登录问题

> ID：15631247
> 
> 赞同：3
> 
> 时间：2013-03-26T07:06:12.107
> 
> 标签：android, facebook

我的 facebook 登录我的应用程序在几个小时前就可以正常工作，但突然它显示一个错误，例如，

> 登录失败。请联系此应用程序的制造商，并要求他们向 Facebook 报告问题 #1118578。

现在我无法登录我的应用程序，为什么会这样？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:56:47.297

检查此[链接](http://developers.facebook.com/bugs/284709068314243)。

在那个 facebook 权威人士说：

**“感谢您的报告。由于技术原因，我们不支持 android:launchMode="singleInstance"，并且新的 SDK 会抛出一个诊断消息，该消息应该在您尝试登录时通知您。”**

# web-services - 从客户端访问 gimp 等工具（安装在服务器上）

> ID：15631248
> 
> 赞同：0
> 
> 时间：2013-03-26T07:06:13.100
> 
> 标签：web-services, web-applications, imagemagick, gimp, image-editing

我想创建一个 Web 应用程序，通过它我必须访问像 Gimp 这样的工具来进行图像处理。是否可以使用客户端-服务器（服务器上的 Gimp）方法来管理我的需求？

我不限制 Gimp，但我更喜欢任何具有基本功能的开源（缩小/缩小、选择工具、裁剪工具、透明工具等）。

对不起，如果这个问题太高了，因为我对这些架构不太熟悉。

我希望这个（stackoverflow）是从人们那里获得帮助的平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:20:50.363

有几种方法可以在 Web 应用程序的服务器中进行图像处理。

1.  一种方法是通过命令行调用工具（我认为这就是你试图用 gimp 做的事情）。
2.  第二种方法是使用您用于开发应用程序的语言中的图像处理库。（有时我用 Java 做这个）
3.  根据您希望的操作类型使用上述组合。

但是凭借当今的浏览器功能，可以在客户端本身使用 HTML5（画布）+ Javascript 完成一些处理。例如，您可以使用这样的东西进行裁剪：

[http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/)

或者像这样用于 Javascript 中的图像处理：

[http://pixastic.com/](http://pixastic.com/)

所以，有很多选择。没有更好的方法，这完全取决于处理的类型、图像的大小、您拥有的硬件等。

希望它有帮助...

# html - 为什么浏览器不显示图片？

> ID：15631250
> 
> 赞同：0
> 
> 时间：2013-03-26T07:06:15.100
> 
> 标签：html, file, image

下面的屏幕截图描述了我的问题。图像 src 是正确的，因为图像可以在 firebug 中看到，但**我无法在浏览器中显示图像。**

谁能告诉我错过了什么？？？

![在此处输入图像描述](../Images/d1ab2addd6e1ce15b2e550342f14ef84.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:08:54.917

某些浏览器中的安全限制会阻止托管在 HTTP 上的页面使用`file:`URI 嵌入图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T07:15:03.210

看下面给出的解决方案，看看你的图片路径，你就会自动理解了—— ![在此处输入图像描述](../Images/d9e1fe3ee651e5f8738fadaaae5b3c15.png)

# regex - 引号之间匹配的正则表达式

> ID：15631252
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:06:32.743
> 
> 标签：regex, apache-flex

我想编写一个正则表达式来匹配引号中的字符串，但引号中的引号除外。例如：我的字符串："Good programm\",\"pls help"

我想得到：好的程序\“，\”请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:23:09.970

尝试`(?<=").*(?=")`在线检查：[http ://regexr.com?349d2](http://regexr.com?349d2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:28:33.953

只要你没有嵌套结构，你可以试试这个：

```
(?<=")(?:[^"]|(?<=\\)")*(?=") 
```

[在 Regexr 上](http://regexr.com?349cs)查看

`(?<=")` [积极的后向断言](http://www.regular-expressions.info/lookaround.html)，确保在比赛之前有一个 " （试试它是否适合你，在 Regexr 中它是。）

`(?:[^"]|(?<=\\)")` [Alternation](http://www.regular-expressions.info/alternation.html)：匹配一个不是 " 的字符，或者一个被转义的 " （由后向确保`(?<=\\)`）。

`*`交替中的字符[匹配 0 次或多次](http://www.regular-expressions.info/repeat.html)。

`(?=")` [肯定的前瞻断言](http://www.regular-expressions.info/alternation.html)，确保匹配后有一个“

但要小心：当没有可用的非转义引号时，它匹配换行符以及转义的“”。

[正则表达式](http://regexr.com?349d5)

# php - 在ajax调用PHP中返回选择下拉列表

> ID：15631255
> 
> 赞同：0
> 
> 时间：2013-03-26T07:06:40.813
> 
> 标签：php, html, ajax

我想使用 PHP 代码在 ajax 调用中获取下拉列表。

```
$outputRes = '';
$reminderDetails["interval_type"] = value of dropdown this may varies. I want to keep value selected="selected" 
```

以下是我预期的 ajax 调用输出

```
$outputRes .= '<select id="reminder_int_type" name="reminder_int_type" class="change">
                 <option value="1" '.if($reminderDetails["interval_type"] == 1){ \'selected="selected"\'; }.'>days</option>
                 <option value="2">Hours</option>
                 <option value="3">Minutes</option>
              </select>';
echo $outputRes; exit; 
```

我可以使用如下代码，但我有很多选项标签，所以对我来说看起来不可行

```
$outputRes .= '<select id="reminder_int_type" name="reminder_int_type" class="change">
                 <option value="1" ';
if($reminderDetails["interval_type"] == 1){ $outputRes .= 'selected="selected"';}
$outputRes .= '>days</option>
                 <option value="2">Hours</option>
                 <option value="3">Minutes</option>
              </select>';
echo $outputRes; exit; 
```

我在编写正确的语法时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:19:30.280

根据您的代码，您可以这样做：

```
$outputRes = '';
$reminderDetails["interval_type"] = value of dropdown this may varies. I want to keep value selected="selected"

$interval = array("Days", "Hours", "Minutes");

$outputRes .= '<select id="reminder_int_type" name="reminder_int_type" class="change">';

foreach ($interval as $k => $v) {
    $k = $k + 1; // to keep your values beginning at 1.
    $outputRes .= '<option value="'.$k.'"'
    if ($reminderDetails["interval_type"] == $k) {
        $outputRes .= 'selected="selected"';
    }
    $outputRes .= '>';
    $outputRes .= $v
    $outputRes .= '</option>';
}

$outputRes .= '</select>'; 
```

您可能希望返回 JSON 并在浏览器端解析它。见[json_encode](http://www.php.net/json_encode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:20:59.697

```
$reminderDetails["interval_type"] = 'value of dropdown this may varies. I want to keep value selected="selected"';

$result = array('array from which you want to create a dropdown');
$outputRes = '<select id="reminder_int_type" name="reminder_int_type" class="change">';
foreach($result as $optionValue=>$optionName)
{
   $is_selected = ($reminderDetails["interval_type"] == $optionValue)?'selected':'';
   $outputRes   .= "<option value=$optionValue $is_selected>$optionName</option>"

}

$outputRes . ="</select>";
echo $outputRes; exit; 
```

我希望您有所了解.. 我假设您正在从数组中动态创建下拉列表

# jquery - 如何设置基于特定字符的Datatable文本换行

> ID：15631264
> 
> 赞同：1
> 
> 时间：2013-03-26T07:07:36.640
> 
> 标签：jquery, jquery-ui, datatables, jquery-datatables

我的 js 文件有`"bAutoWidth": false`

即使在此之后，只要列内有任何文本出现更多没有空格可换行。那个时候表格延伸到页面的右侧..

客户对查看 xScool 不感兴趣。有人可以在这个问题上帮助我吗..？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T11:41:17.760

有一个用于溢出文本的 CSS 属性。您可以使用以下代码

```
p{
    width:100%;
    overflow:hidden;
    height:20px;
    text-overflow:ellipsis;
} 
```

请注意：上面的 css 只是一个例子。在您的情况下，高度宽度可能会有所不同，但应该使用 text-overflow: ellipsis。

# javascript - 淘汰赛：事件处理程序可用的事件是什么

> ID：15631266
> 
> 赞同：0
> 
> 时间：2013-03-26T07:07:41.233
> 
> 标签：javascript, knockout.js, knockout-2.0

当我浏览[文档](http://knockoutjs.com/documentation/event-binding.html)时，他们只列出了其中的几个，在那里我可以获得可以使用的事件的完整列表。

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:14:37.633

淘汰文档页面指出，事件绑定旨在能够处理任何可用的 Javascript 事件。

清单在这里。

[http://www.quirksmode.org/dom/events/index.html](http://www.quirksmode.org/dom/events/index.html)

一个例子在这里： -

```
<input 
  data-bind="
    value: linecost, 
    event: { change: function() { $parent.updateTotals() }"
/> 
```

# mysql - 如何在mysql中找到这种情况下的重复和空白

> ID：15631269
> 
> 赞同：7
> 
> 时间：2013-03-26T07:08:08.907
> 
> 标签：mysql, select

嗨，我有一张看起来像的桌子

```
-----------------------------------------------------------
|  id  |  group_id | source_id | target_id | sortsequence |
-----------------------------------------------------------
|  2   |    1      |    2      |   4       |     1        |   
-----------------------------------------------------------
|  4   |    1      |    20     |   2       |     1        |   
-----------------------------------------------------------
|  5   |    1      |    2      |   14      |     1        |   
-----------------------------------------------------------
|  7   |    1      |    2      |   7       |     3        |   
-----------------------------------------------------------
|  20  |    2      |    20     |   4       |     3        |   
-----------------------------------------------------------
|  21  |    2      |    20     |   4       |     1        |   
----------------------------------------------------------- 
```

**设想**

有两种情况需要处理。

1.  `Sortsequence``source_id`列值对于 1和应该是唯一的`group_id`。例如，如果所有记录都`group_id = 1 AND source_id = 2`应该具有唯一的排序序列。在上面的示例记录中具有`id= and 5 which are having group_id = 1 and source_id = 2 have same sortsequence which is 1`. 这是错误的记录。我需要找出这些记录。
2.  如果`group_id and source_id`一样。`sortsequence columns value should be continous. There should be no gap`。_ 例如上表`records having id = 20, 21 having same group_id and source_id and sortsequence value is 3 and 1`。即使这是唯一的，但 sortsequence 值也存在差距。我还需要找出这些记录。

**我迄今为止的努力**

我写了一个查询

```
SELECT source_id,`group_id`,GROUP_CONCAT(id) AS children 
FROM
    table 
GROUP BY source_id,
  sortsequence,
  `group_id` 
 HAVING COUNT(*) > 1 
```

此查询仅针对场景 1。如何处理场景 2？有什么方法可以在同一个查询中执行此操作，或者我必须编写其他方法来处理第二种情况。

`By the way query will be dealing with million of records in table so performance must be very good.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:57:38.963

`Tere J`从评论中得到答案。以下查询涵盖了上述两个标准。

```
 SELECT 
     source_id, `group_id`, GROUP_CONCAT(id) AS faultyIDS    
 FROM
     table
 GROUP BY
     source_id,group_id 
 HAVING
     COUNT(DISTINCT sortsequence) <> COUNT(sortsequence) OR COUNT(sortsequence) <> MAX(sortsequence) OR MIN(sortsequence) <> 1 
```

也许它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:01:53.510

试试这个查询，它会解决你在问题中提到的这两种情况。

```
SELECT 
   a.* 
FROM 
   tbl a
INNER JOIN 
   (select 
       @rn:=IF(@prevG = group_id AND @prevS = source_id, @rn + 1, 1) As rId,
       @prevG:=group_id AS group_id, 
       @prevS:=source_id AS source_id, 
       id, 
       sortsequence
    FROM 
       tbl 
    join 
       (select @rn:=0, @prevS:=0, @prevG:=0)b
    order by group_id, source_id, id) b
ON a.id = b.id AND a.SORTSEQUENCE <> b.RID; 
```

**[小提琴](http://sqlfiddle.com/#!2/3faf9/34)**

# windows-8 - 无法在 Worklight 5.0.6 中使用 Direct Update for Windows 8

> ID：15631278
> 
> 赞同：0
> 
> 时间：2013-03-26T07:08:25.150
> 
> 标签：windows-8, ibm-mobilefirst

我使用 Worklight 5.0.6，不能对 Windows 8 应用程序使用直接更新。 [IBM Worklight Information Center](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/index.jsp?topic=/com.ibm.worklight.help.doc/admin/c_direct_updates_app_versions_to_desktop.html&resultof=%2522%2564%2569%2572%2565%2563%2574%2522%2520%2522%2575%2570%2564%2561%2574%2565%2522%2520%2522%2575%2570%2564%2561%2574%2522%2520)告诉 Windows 8 应用程序可以使用直接更新。

我测试直接更新的方法如下。请告诉我如何在 Windows8 中使用直接更新。

1.  制作 windows8 环境项目
2.  更改 wlInitOptions.connectOnStartup 值“true”（在 common\js\initOptions.js 中）
3.  选择[全部构建并部署]
4.  在 Visual Studio 2012 for Windows8 中双击 .jsproj 文件运行模拟器
5.  让应用成为“后台”
6.  更改 html 文件并“重新 [Build All and Deploy]”
7.  使应用程序“前台”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:24:54.450

该文档页面具有误导性（我将打开一个缺陷来纠正它）。

直接更新（如在设备上安装应用程序后更新网络资源的过程）仅适用于 iOS 和 Android。在那些环境中，按照您的步骤确实会触发直接更新。

桌面应用程序的更新（或者更确切地说，升级）与上述直接更新机制没有任何关系。

对于桌面环境，将其视为更新任何其他桌面应用程序 - 您可以在其中提高版本号，并且应用程序检测到有可用的更新。

对于 Adob​​e Air 和 Windows 7/Vista 小工具：

1.  构建您的应用程序并安装它
2.  在 application-descriptor.xml 中，`version`将环境元素中的属性值向上（例如从“1.0”到“1.1”）
3.  再次构建
4.  我相信现在您需要前往 Worklight Console 并重新下载安装程序，它会检测到它需要升级而不是重新安装）。

注意：iGoogle、Facebook、Windows 7/Vista Gadgets 和 Dashboard 环境将在 Worklight 的下一版本中删除。所有这些都可以替换为其他受支持的 Worklight 环境。

在 Windows 8 的情况下：

*   直接更新肯定不存在
*   上述步骤也不相关，因为它不是可下载的可执行文件

# testng - Method Skipped,when run with testng TEST annotation.How提供参数？我去了testng文档但无法理解，请指导

> ID：15631287
> 
> 赞同：2
> 
> 时间：2013-03-26T07:09:04.933
> 
> 标签：testng

**代码**：

```
package tests;

import org.testng.annotations.Test;

@Test
public class SearchText {

    public void createzoo(String[] args) {  

        String[] elems = {"lion", "tiger", "duck"};  
        System.out.println(elems[0]);
        System.out.println(elems[1]);
        System.out.println(elems[2]);
    }
} 
```

结果：

> 跳过：createzoo org.testng.TestNGException：方法 createzoo 需要 1 个参数，但在 @Test 注释中提供了 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T19:32:28.887

示例 createzoo 方法实际上并没有使用传入的 args。由于它没有使用它们，只需将消息签名更改为：

```
public void createzoo() 
```

大多数 JUnit/TestNG 测试不接受任何参数。您可能会将其与具有 public static void main(String[] args) 的典型程序混淆

测试`main()`本身并没有，框架将为您运行测试。

仅在您确实需要它们并且该方法将对它们做一些事情时才使用其他人提到的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:00:56.210

您需要`String[] args`在`createzoo`方法中提供参数的值。以下是几种方法：

*   在方法上使用[@Parameters](http://testng.org/doc/documentation-main.html#parameters-testng-xml)注释并在 testng.xml 文件中提供值。
*   [Dataprovider](http://testng.org/doc/documentation-main.html#parameters-dataproviders)（Cedric 在他的回复中也提到了）。
*   将[@Optional](http://testng.org/javadocs/org/testng/annotations/Optional.html)注释放在您的参数上并提供默认值。

阅读 TestNG 文档 - 它有很多关于如何完成此操作的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:17:54.780

以下是相关文档： [http ://testng.org/doc/documentation-main.html#parameters-dataproviders](http://testng.org/doc/documentation-main.html#parameters-dataproviders)

# perl - 如何在我的 Perl 脚本中填充哈希（已在单独的文件中定义）并对其进行必要的操作？

> ID：15631292
> 
> 赞同：1
> 
> 时间：2013-03-26T07:09:21.573
> 
> 标签：perl, hash, populate

如何在我的 Perl 脚本中填充哈希（已在单独的文件中定义）并对其进行必要的操作？

例如：

file1.pl -- 包含定义的哈希，

file2.pl -- 用户定义的代码，应该从 file1.pl 填充散列

```
my %tgs = (
    'articles' =>  {
        'vim' => '20 awesome articles posted',
        'awk' => '9 awesome articles posted',
        'sed' => '10 awesome articles posted'
    },

    'ebooks' =>  {
        'linux 101'   => 'Practical Examples to Build a Strong Foundation in Linux',
        'nagios core' => 'Monitor Everything, Be Proactive, and Sleep Well'
    },
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:08:46.660

@Gibron 实际上已经回答了您的问题。
所以我只是给你看代码，你可能会更感兴趣。
填充普通散列的方式与填充“散列上的散列”的方式相同。
我使用 Data::Dumper 直接显示哈希结构，您可以选择自己的方式来了解最终哈希包含的内容。

```
use strict;
use Data::Dumper qw(Dumper);
do 'file1.def'; # evaluate file1

# add new sub key and value to 'hash of hash'
$file1::tgs{'articles'}{'emacs'} = '21 awesome articles posted';

# create a completely new pair
$file1::tgs{'new_key'}{'new_sub_key'} = 'new_value';

# see the result
print Dumper (\%file1::tgs); 
```

# ios - 如何在非基于文档的应用程序上集成 iCloud？

> ID：15631294
> 
> 赞同：6
> 
> 时间：2013-03-26T07:09:24.200
> 
> 标签：ios, icloud, foundation

我已经阅读了 Apple 文档和 Ray Wenderlich 的教程。看来我被迫使用 UIDocument 所以我在文档中阅读了它。我发现使用基于文档的方法是有效的。

我的问题是我不想被特定于平台（iOS）的技术所束缚，因此我的应用程序有自己的模型，从头开始制作，只继承自 NSObject。这包括保存/加载。

现在，我需要将 iCloud 与我的旧模型集成在一起。我将如何以一种优雅/有效的方式来保持我的旧模型实现并能够集成 iCloud？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T16:37:57.937

您不会以任何方式被迫使用`UIDocument`. 您可以通过`NSFileManager`和使用 iCloud `NSMetadataQuery`。一般的做法是：

### 创建文件时

*   在本地创建文件，就像没有 iCloud 一样正常
*   用于`-[NSFileManager setUbiquitous:itemAtURL:destinationURL:error:]`将文件传输到 iCloud 存储。
*   `NSMetadataQuery`（如有必要）使用或轮询 URL 资源值检查上传进度。

### 打开文件时

*   用于`NSMetadataQuery`定位 iCloud 常驻文件
*   用于`-[NSFileManager startDownloadingUbiquitousItemAtURL:error:]`开始下载或将本地副本与云副本同步。
*   `NSMetadataQuery`使用或通过轮询 URL 资源值来检查上传进度`[NSURL resourceValuesForKeys:]`。

### 编辑文件时

*   使用`NSFileCoordinator`ubiquity 守护程序协调您的文件访问。
*   用于`NSFilePresenter`获取文件更改的通知。

这在 WWDC 2012（也许是 2011 年，我不记得）的会议中都有介绍，您需要的类和方法都在 iOS 文档中。

# java - 用于从 MySQL 数据库获取信息的 AsyncTask 与 Worker 线程

> ID：15631304
> 
> 赞同：1
> 
> 时间：2013-03-26T07:09:47.170
> 
> 标签：java, android, multithreading, android-asynctask

我了解我无法从主线程（UI 线程）访问 MySQL 数据库。所以我现在知道我可以选择这样做。我可以使用工作线程（ Thread t = new Thread() ）来访问 MySQL db 并获得我需要的东西，或者我可以执行 AsyncTask 来访问 MySQL db 并获得我需要的东西。

但我的问题是，什么是正确的方法或最有效的方法？当我遇到这个问题时，我真的很想了解并遵循良好的编程程序。

那么从 MySQL 数据库中检索数据：AsyncTask、工作线程还是时间、功率等没有区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:19:47.457

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。**AsyncTasks 最好用于短时间的操作（最多几秒钟）。**如果您需要保持**线程长时间运行，**强烈**建议**您使用 java.util.concurrent 包提供的各种 API，例如**执行器、线程池执行器和 FutureTask**。（直接来自文档）。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

用于长时间运行操作的 asynctask 的替代方法是 robospice。

[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

更新：

不推荐使用协程或任何其他线程机制的 Asynctask。考虑起诉工作经理以获得可延期的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T07:17:59.070

实际上最好的方法是使用[`Loaders`](http://developer.android.com/guide/components/loaders.html). 更具体的一个[`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)。与和`Loaders`相比的优势在于它将与您的生命周期相关联。因此，如果您的or在您的or停止之后完成，您将不会遇到麻烦，并尝试通知不再存在的组件。`AsyncTasks``Threads``Cursors``Activity``Fragment``AsyncTask``Thread``Activity``Fragment`

您可以在`Loaders`此处找到[如何使用装载机](http://www.grokkingandroid.com/using-loaders-in-android/)和[在装载机之前的生活](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)的一些示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T07:14:35.650

AsyncTask 比 Thread 更好

**AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。**

并通过这个[**Handler vs AsyncTask vs Thread**](https://stackoverflow.com/questions/6964011/handler-vs-asynctask-vs-thread?rq=1)

# javascript - 使用 javascript 验证 aspxbutton 上的 aspxtextbox

> ID：15631319
> 
> 赞同：0
> 
> 时间：2013-03-26T07:10:42.780
> 
> 标签：javascript, devexpress

如何在单击按钮时使用 javascript 验证 aspxtexbox。我有一个 aspxtextbox 和一个 aspxbutton，单击时我需要检查文本框是否为空如果为空我需要显示一个确认框，单击取消时我需要将焦点设置在 aspxtextbox

一般asp我们写如下

```
<script type="text/javascript">
 function checkEmpty() {
var subj= "";
subj= document.getElementById("txtString").value;
if(subj=="")
{

}
}
</Script> 
```

我怎样才能使用 Devex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:04:10.513

Devexpress[在线演示](http://demos.devexpress.com/aspxeditorsdemos/Validation/Inplace.aspx)展示了如何添加验证和自定义验证。只需在演示中检查 SetFocusOnError。

您也可以参考[Devexpress 在线文档](http://documentation.devexpress.com/#silverlight/customdocument4920)。

希望这可以帮助！

维韦克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:53:41.050

如果您跳过显示弹出消息，那么 DevExpress 验证设置是更好的选择，您可以通过设置它来验证控制客户端`ValidationGroup`。

在此 SO 线程上检查我之前可能与您相关的[答案-](https://stackoverflow.com/a/9937271/770710) [Javascript 验证消息](https://stackoverflow.com/questions/9935967/validation-message-by-javascript/9937271#9937271)

例子：

```
<dx:ASPxButton ID="btn" runat="server" Text="Validate" 
AutoPostBack="False" CausesValidation="False">

         <ClientSideEvents Click="function(s, e) {

    if (chkIsChecked.GetValue())  // if checked then validate the group
    {
              ASPxClientEdit.ValidateGroup('RejectReason');
    }
         }" />
    </dx:ASPxButton> 
```

如果您想显示弹出消息，那么这是您的工作。使用另一个答案

设置`ClientInstanceName`文本框，您将能够在客户端访问它。

```
<dxe:ASPxTextBox ID="InstrumentQuantity" 
 runat="server" Width="170px" 
 ClientInstanceName="MyTextBox"> 
</dxe:ASPxTextBox> 
```

使用 ApxxButton 客户端单击事件并调用 javascript 方法来执行您想要的操作结果。

```
<script type="text/JavaScript">
function checkEmpty() {

    var theText = MyTextBox.GetValue(); //GetValue() is the DevExpress clientside function
    if(theText =="")
    {
       //you pop message code and focus related work
    }
} 
```

请参阅[ASPxTextBox 客户端方法和事件](http://www.devexpress.com/Help/?document=ASPxEditors/DevExpressWebASPxEditorsScriptsASPxClientTextBox_ctortopic.htm)以获得更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:40:39.933

您可以使用：

1.  ASP.Net 验证器控件。它们支持服务器端和客户端验证。CompareValidator 或 RegularExpressionValidator 将适合您的目的。[请参阅CodeProject](http://www.codeproject.com/Articles/426761/Exploring-ASP-NET-Validation-Controls)上的此链接

2.  [jQuery 验证](http://docs.jquery.com/Plugins/Validation/validate)

3.  自定义 JavaScript 验证 - 最简单的方法是使用表单的 onSubmit 事件。拿你的例如。

    <form onsubmit="javascript:checkEmpty()">...</form>

验证脚本可能如下所示：

```
<script type="text/JavaScript">
function checkEmpty() {
    var subj = document.getElementById("txtString").value;
    if(subj=="")
    {
        subj.focus();
        alert("Error Message...");
        return false;
    }
}
</Script> 
```

# liferay - 颜色选择器不起作用

> ID：15631321
> 
> 赞同：0
> 
> 时间：2013-03-26T07:10:45.777
> 
> 标签：liferay, yui, liferay-6, color-picker

我使用 Liferay 6.1，我用代码创建了一个 portlet（链接：[http](http://www.liferay.com/community/wiki/-/wiki/Main/Using+Lifery+provided+Color+Picker+in+Own+Portlets) ://www.liferay.com/community/wiki/-/wiki/Main/Using+Lifery+provided+Color+Picker+in+Own+Portlets ）

```
<script type="text/javascript"> jQuery( function() { var colorPicker = new Liferay.ColorPicker( { hasImage: true } ); } ); </script>

<tr> <td> <input class="text-input" id="color" name="color" size="9" type="text" value="" />

<img align="absmiddle" alt="<liferay-ui:message key="color" />" border="0" class="use-color-picker" height="18" hspace="0" src="<%= themeDisplay.getPathThemeImages() %>/color.png" title="<liferay-ui:message key="color" />" vspace="0" width="18" style="cursor: pointer;" />

</input> </td> </tr> 
```

但它不起作用，请帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:17:25.423

您需要将更多选项传递给`new Liferay.ColorPicker`. 根据您发布的指南：

> 选项：
> 
> •context (Object)：一个 DOM 对象，它指定在其中搜索项目的上下文
> •hasImage：（布尔值）如果设置为 true，则使用“item”参数或任何具有 .use-color-picker 类的图像如图
> •item: (Object|String): DOM 对象或 jQuery Selector 字符串，用于指定将选定值插入到哪个字段
> •onChange (Function): 每当颜色改变时都会调用的
> 函数 •onClose (Function )：当颜色选择器关闭时将调用的函数。

# android - 在android中通知gridview适配器时如何执行动画

> ID：15631323
> 
> 赞同：0
> 
> 时间：2013-03-26T07:10:51.043
> 
> 标签：android

我正在开发网格视图拖放。我想通过拖放重新排列网格视图。同时我想通知适配器并执行一些动画.. 谢谢

# vim - Emacs 的 Command-T？

> ID：15631325
> 
> 赞同：6
> 
> 时间：2013-03-26T07:10:57.903
> 
> 标签：vim, emacs, elisp, macvim

我是 Emacs 的长期用户，但在 2 年前部分切换到 MacVim，并且一直将它用于我所有的编程工作（仍然使用 Emacs 进行其他工作）。我决定现在切换回 Emacs，主要是因为[`evil-mode`](https://gitorious.org/evil/pages/Home). 我很高兴，但我仍然没有找到像 Vim [Command-T](https://wincent.com/products/command-t)插件那样好的和简单的东西。

Emacs 替代品的主要问题是它们要么太复杂要么太慢。

最接近 Command-T 的是[`helm`](https://github.com/emacs-helm/helm)/ [`helm-cmd-t`](https://github.com/emacs-helm/helm-cmd-t)，但它并不像它那样工作。

假设您有两条路径：

*   `app/controllers/admin/feedback_controller.rb`
*   `app/controllers/fee_controller.rb`

在 Vim 的 Command-T 中，你可以这样写：

```
app/controllers/fe 
```

它将匹配两条路径。

与`helm-cmd-t`，如果我写`app/controllers/fee`，它只会匹配`fee_controller`。如果我想同时匹配两者，我必须使用正则表达式，如 in `app/controllers/.*`，这还不错**，**但需要更多的击键。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:16:30.027

任何使用 ido 的 Emacs 包都可以做到这一点，前提是`ido-flex-match`它不是 nil。Helm-cmd-t[故意不支持这种灵活匹配](https://github.com/lewang/helm-cmd-t#but-what-about-flex)。

您可以使用设置为 的 find-file-in-repository 获得您描述的[行为](http://melpa.milkbox.net/#find-file-in-repository)。`ido-flex-match``'t`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-01T01:22:59.927

我最近开始使用`flx`with `ido-mode`，`projectile`它具有非常好的排序模糊匹配，并且感觉与 Vim 的 CtrlP 和 CmdT 非常相似。

它可以通过 MELPA 安装。

```
M-x package-install
flx 
```

有关详细信息，请参阅[flx 项目](https://github.com/lewang/flx)。

这是一个屏幕截图来说明...

![flx 模糊匹配](../Images/eb0f8479daa909b45866abdd2a41f385.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-28T04:39:42.477

在这里，但需要先安装 helm：[https ://github.com/emacs-helm/helm-cmd-t](https://github.com/emacs-helm/helm-cmd-t)

**编辑**：请参阅我的[Helm 指南](http://tuhdo.github.io/helm-intro.html)。阅读[它为什么强大](http://tuhdo.github.io/helm-intro.html#sec-17)。请参阅该部分中的实际操作`helm`。`projectile`

使用 Vim 中的 Ido + flx 之类的模糊搜索器，您必须**按顺序**输入 thing 。使用 Helm，您可以执行**乱序**匹配。我将其称为乱序，因为无论我输入“main.c x86”还是“x86 main.c”，对于任一查询，我都会得到相同的结果集。但将其称为多步搜索也很有意义。**无需**以有序的方式输入搜索字符串（称为“模式”，实际上是正则表达式），Helm 给了我更大的自由：我可以在脑海中输入我首先想要的东西，而不必记住它的复杂路径；如果我想要的目标中有很多候选人，我会用更多细节（模式）进一步缩小范围。

上面的例子从上面的优点来说明这两种情况：

*   如果我的愿望目标不是唯一的，那我可以进一步缩小范围。
*   如果我的愿望目标是独一无二的，我可以立即得到它。

如您所见，Linux 内核源代码树包含超过 40k 个文件，我立即将其缩小到几个文件。

Visual Studio 也在他们的项目搜索中实现了这种机制，但它不像 Helm 那样通用。在 Helm 中，您可以将相同的 Helm 接口重用于许多其他事情；例如，请参阅`helm-semantic-or-imenu`。你有一个类似于大纲树的东西，但你可以通过一些简单的模式交互式地逐步缩小到你想要的候选者。

最后，仅供参考，`flx`作者 Le Wang 正在使用 Helm。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T22:23:09.530

长话短说——没有什么比 Emacs 的 command-T 更好的了。最好的选择是 gpicker 或 Peepcode 的 peepopen，但它们是外部应用程序，我发现它们在使用 command-T 这么长时间后会分散注意力。我现在会坚持使用 MacVim，只是因为 command-T，但可能会考虑实现一些行为类似于 command-T 的东西作为练习。

谢谢大家的回答和评论！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T11:18:27.610

我曾经遇到过[gpicker](http://www.emacswiki.org/Gpicker)，它宣称速度是它优于[Ido](http://emacswiki.org/emacs/InteractivelyDoThings)和其他“原生”elisp 包的优势之一。虽然从来没有在现实世界的项目中尝试过，但它可能对你有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T07:47:22.737

你试过[LustyExplorer](http://www.emacswiki.org/LustyExplorer)吗？它基于同名的 Vim 插件。

此外，您似乎没有充分利用 Command-T 的功能：`acfe`应该足以匹配这两个文件。你所做的并不比`:e app/con*/**/fe<Tab>`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-01T19:34:26.030

试试 textmate.el :) [https://github.com/defunkt/textmate.el](https://github.com/defunkt/textmate.el)

你只需要使用“Command+T”而不是“Ctrl+P”:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-29T14:42:24.380

[https://github.com/bling/fzf.el](https://github.com/bling/fzf.el)

这是我认为最好的解决方案。原因如下：

1.  如果您在项目中，则使用 projectile 确定项目根目录。
2.  否则，它会很快索引当前目录中的文件。
3.  模糊匹配。
4.  可定制（顶部或底部放置、记录数等）

# php - 如何在表格内容中制作视图控制台

> ID：15631331
> 
> 赞同：0
> 
> 时间：2013-03-26T07:11:27.990
> 
> 标签：php, javascript, html

我尝试像往常一样在我的网络中制作一个简单的表格。但我不知道如何根据每个表格内容进行显示以进行编辑和查看其他内容。

```
<body>
<table width="1023" height="248" border="1">
  <tr>
    <th colspan="2" scope="col">A1</th>
    <th colspan="2" scope="col">A2</th>
    <th colspan="2" scope="col">A3</th>
    <th colspan="2" scope="col">A4</th>
    <th colspan="2" scope="col">A5</th>
    <th colspan="2" scope="col">A6</th>
    <th colspan="2" scope="col">A7</th>
    <th colspan="2" scope="col">A8</th>
    <th colspan="2" scope="col">A9</th>
  </tr>
  <tr>
    <td><div align="center">A1.4</div></td>
    <td><div align="center">A1.8</div></td>
    <td><div align="center">A2.4</div></td>
    <td><div align="center">A2.8</div></td>
    <td><div align="center">A3.4</div></td>
    <td><div align="center">A3.8</div></td>
    <td><div align="center">A4.4</div></td>
    <td><div align="center">A4.8</div></td>
    <td><div align="center">A5.4</div></td>
    <td><div align="center">A5.8</div></td>
    <td><div align="center">A6.4</div></td>
    <td><div align="center">A6.8</div></td>
    <td><div align="center">A7.4</div></td>
    <td><div align="center">A7.8</div></td>
    <td><div align="center">A8.4</div></td>
    <td><div align="center">A8.8</div></td>
    <td><div align="center">A9.4</div></td>
    <td><div align="center">A9.8</div></td>
  </tr>
</body> 
```

我的概念是，当用户的指针接近表的 1 内容时，会自动显示用于行为视图或输入新数据的显示。请指教

为 exp。喜欢查看 gmail 网络客户端。当用户光标靠近收件箱中的发件人电子邮件之一时，控制台会自动显示以添加联系人等。但在 gmail 中仅显示发件人的姓名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:27:05.083

您可以通过纯 javascript 或 jquery 解决您的问题：

javascript解决方案

```
//this function create our layout which will be displayed on mouse over
function createOverlay(){
var div = document.createElement("div");
div.innerHTML = "your own code here";
div.id = "overlay";
div.display="none";
div.style.position="absolute";
div.style.border="1px solid";
document.body.appendChild(div);
}

//this function show layout
function showOverlay(el){
if(!document.getElementById("overlay"))
createOverlay();
var div = document.getElementById("overlay");
div.style.display="block";
div.style.width="200px";
div.style.height="200px";
div.style.top = parseInt(el.offsetTop)+"px";
div.style.left=parseInt(el.offsetLeft)+parseInt(div.style.width)/4+"px";
div.onmouseover = function(event){event.stopPropagation();return false;}
}

// and this function hide - you can use it for "close" button on overlay
function hideOverlay(){
document.getElementById("overlay").style.display="none";
}

here is the code which add event handlers to td elements of your table
var table = document.getElementsByTagName("table")[0];
var tds = table.getElementsByTagName("td");
var flag=true;
if(document.getElementById("overlay")){
if(document.getElementById("overlay").style.display!="none")
flag=false;
}
for(i in tds){
tds[i].onmouseover = function(event){if(flag){showOverlay(this);event.stopPropagation()}else{return false;}};
} 
```

在这里，我们处理每个 td 元素上的 onmouseover 事件以及当它发生时 - 显示可以包含任何 HTML 代码的叠加层（ div ）

您也可以为 div 添加背景，并通过编辑此行来编辑 div 的位置

```
div.style.top = parseInt(el.offsetTop)+"px";
div.style.left=parseInt(el.offsetLeft)+parseInt(div.style.width)/4+"px"; 
```

你也可以通过 JQuery 来做这件事，它会更少的代码:)

我还建议您阅读 javascript 中的事件

干杯。

# java - 活动被破坏

> ID：15631338
> 
> 赞同：0
> 
> 时间：2013-03-26T07:11:48.803
> 
> 标签：java, android, android-activity, ondestroy

我只想感谢昨天回答我帖子的人，这对我帮助很大，但现在话题不同了。我设法修复了 NPE，但显然我的活动正在被破坏。

这是日志：

```
03-26 06:55:27.411: E/AndroidRuntime(1321): java.lang.IllegalStateException: Activity has been destroyed
03-26 06:55:27.411: E/AndroidRuntime(1321):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1342)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at As2.packageTK.TicTacToeGame.changeLayout(TicTacToeGame.java:157)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at As2.packageTK.TicTacToeGame.checkTurn(TicTacToeGame.java:132)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at As2.packageTK.PlayerTurn1$1.onClick(PlayerTurn1.java:34)
03-26 06:55:27.411: E/AndroidRuntime(1321):     at android.view.View.performClick(View.java:4202) 
```

这些是位于我的 TicTacToeGame FragmentActivity 类中的 checkTurn() 和 changeLayout()：

```
public class TicTacToeGame extends FragmentActivity{

    //fields..
    public int checkTurn()
    {
        if(turn == 1)
        {
            changeLayout(turn);
            turn = 2;
            return 1;
        }
        else
        {
            changeLayout(turn);
            turn = 1;
            return 2;
        }
    }

    //changeLayout method
    public void changeLayout(int turn)
    {
        FragmentManager fm       = getSupportFragmentManager();
        Fragment        fragment = fm.findFragmentById(R.id.fragment_container);
        FragmentTransaction ft;

        if(turn == 1) //if its player 1's turn
        {  
            if(fragment == null) //checks wether the current framelayout contains a fragment or not
            {   
                ft = fm.beginTransaction();
                ft.add(R.id.fragment_container, new PlayerTurn1());
                ft.commit(); 
                //setPlayer1();
            }
            else
            {
                ft = fm.beginTransaction();
                ft.replace(R.id.fragment_container, new PlayerTurn1());
                ft.commit();
                //setPlayer1();

            }
        }
        else
        {   
            if(fragment == null)
            {
                ft = fm.beginTransaction();;
                ft.add(R.id.fragment_container, new PlayerTurn2());
                ft.commit(); 
                //setPlayer2();
            }
            else
            {
                ft = fm.beginTransaction();;
                ft.replace(R.id.fragment_container, new PlayerTurn2());
                ft.commit(); 
                //setPlayer2();
            }
        }
    }
} 
```

这些是我的片段的 onCreatedActivity 和 onCreateView：

```
 public View onCreateView(LayoutInflater inflater,
        ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.playerturn1, container, false);

        return view;
    }

        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            doneP1 = (Button) getActivity().findViewById(R.id.doneP1);
            //resetP1 = (Button) this.getActivity().findViewById(R.id.resetP2);

            doneP1.setOnClickListener(new View.OnClickListener() {          
                public void onClick(View v) {   
                    object.checkTurn();
                }
            });
        } 
```

有任何想法吗？

# c# - C# 中的序列化和对象版本控制

> ID：15631341
> 
> 赞同：12
> 
> 时间：2013-03-26T07:11:57.407
> 
> 标签：c#, .net, serialization, migration, versioning

如果我想序列化一个对象，我必须使用`[Serializable]`属性，并且所有成员变量都将写入文件。我不知道如何进行版本控制，例如，如果我添加一个新的成员变量（重命名一个变量或只是删除一个变量）然后我打开（反序列化）文件我如何确定对象/文件版本以便我可以正确设置新成员还是进行某种迁移？如何确定变量在加载期间是否已初始化（被反序列化程序忽略）。

我知道有版本容错的方法，我可以用`[OptionalField(VersionAdded = 1)]`属性标记变量。如果我打开一个旧文件，框架将忽略这个可选（新变量），它只是零/空。但是我再次如何确定变量是由加载初始化还是被忽略。

我可以将类/对象版本号写入流。使用该`ISerializable`方法并在该`constructor(SerializationInfo oInfo, StreamingContext context)`方法中读取此版本号。这将准确地告诉我流中的类版本是什么。

但是我希望这种版本控制已经由 C# 中的流框架实现。我试图从中获取程序集版本，`SerializationInfo`但它始终设置为当前版本，而不是保存对象时使用的版本。

首选方法是什么？我在网上找到了很多文章，但我找不到解决版本控制的好方法......

任何帮助表示感谢谢谢，深渊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:24:31.003

如果我写的某些内容太明显，请原谅我，

首先，请！你必须停止认为你正在序列化一个对象......这是不正确的，因为作为你对象一部分的方法没有被持久化。您正在持久化信息 - 等等.. 仅限数据。

.NET 序列化还序列化包含程序集名称及其版本的对象的类型名称，因此当您反序列化时 - 它将持久化的程序集信息与将用信息显示的类型进行比较 - 如果它们不相同，它将返回异常。

除了版本控制问题 - 并非所有内容都可以如此轻松地序列化。尝试序列化 System.Drawing.Color 类型，您将开始理解 .NET 序列化机制过于简单的问题。

除非您打算序列化一些非常简单但没有发展计划的东西，否则我不会使用 .NET 提供的序列化机制。

让焦点回到您的问题上，您可以在此处阅读有关版本控制无知能力的信息：http: [//msdn.microsoft.com/en-us/library/ms229752](http://msdn.microsoft.com/en-us/library/ms229752(v=vs.80).aspx) (v=vs.80).aspx ，它是为 BinaryFormatter 提供的。

您还应该检查具有一些不错功能的 XML 序列化，但最大的好处是您获得了人类可读的 XML，因此即使您的类型版本控制复杂，您的数据也永远不会丢失。

但最后，我建议您要么使用带有实体框架的数据库来持久化数据，要么编写自己的平面文件管理器。虽然 EF 对大多数解决方案都非常有用，但有时你可能想要更轻的东西来持久化一些非常简单的东西。（我的意思是我再也看不到 .NET 序列化可能相关的解决方案。）

我希望这会有所帮助，祝你好运。

# c# - c#中字符串到数字的转换

> ID：15631342
> 
> 赞同：0
> 
> 时间：2013-03-26T07:12:15.623
> 
> 标签：c#, string, numbers

我正在尝试编写一个函数来将`string`“12345”的内容转换为`int`.

如果字符串为空白，我想返回`null`（未初始化），而不是值`0`。

问题是，函数不会返回未初始化的值。

我的代码无法编译，因为 Retval 可以返回一个未初始化的值......

到目前为止我的尝试：

```
public int ConvertStringToNumber(String TheString)
{
    // Uninitialized
    int Retval;

    if (TheString.Length > 0)
    {
        // We have a valid string
        if (Int32.TryParse(TheString, out Retval))
        {
            // We have a valid Number
        }
    }

    // Return the number or null
    return Retval;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T07:13:21.120

你可以使用 Nullable int 吗？它将允许设置为 nullable 。见这里： http: [//www.codeproject.com/Articles/11854/C-2-0-Nullable-Types](http://www.codeproject.com/Articles/11854/C-2-0-Nullable-Types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:16:56.507

您可以使用可为空的 int（更多信息[在这里](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)）。

> 可空类型可以表示基础类型的所有值，以及一个额外的空值。

```
public int? ConvertStringToNumber(String TheString)
{
    int retval;
    bool isInt = Int32.TryParse(TheString, out retval);
    return isInt ? retval : null;
} 
```

注意：使用可空类型时，您需要使用强制转换或获取它的值。见[这里](http://msdn.microsoft.com/en-us/library/2cf62fcy%28v=vs.80%29.aspx)。

**例子：**

```
int? n = ConvertStringToNumber("123");

int value = n.Value;
// or
int value = (int)n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:22:48.407

因为`Int32.TryParse(TheString, out Retval)`要求 int 类型不可为空

```
public int? ConvertStringToNumber(String TheString)
{

    // Uninitialized
    int Retval;

    if (TheString.Length > 0)
    {

        // We have a valid string

        if (Int32.TryParse(TheString, out Retval))
        {

            // We have a valid Number
            return Retval;
        }

    }

            // Return the number or null

    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:27:10.743

如果您在第一次为 Retval 对象分配了一个值，则该值仅在该区域有效。因此，当您返回它时，Retval 为空。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T07:22:05.477

解决您问题的简单扩展方法

```
using System;

namespace temp
{
    class Program
    {
        static void Main(string[] args)
        {
            string valu = "";
            Console.WriteLine(valu.ToInt32());
            Console.ReadLine();
        }
    }
    public static class MyExtentions
    {
        public static int ToInt32(this string s)
        {
            int x;
            if (s != null)
            {
                if (s.Length > 1)
                    x = Convert.ToInt32(s);
                else
                    x = 0;
            }
            else
            {
               x= 0;
            }
            return x;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-26T07:14:39.040

```
int? x = ConvertStringToNumber("1"); 
```

int 值 = x.Value;

c#中字符串到数字的转换

# javascript - 使用 Javascript 更改 CSS 值不起作用

> ID：15631343
> 
> 赞同：0
> 
> 时间：2013-03-26T07:12:17.493
> 
> 标签：javascript, html, css

我正在尝试为我的网站开发一个聊天框。

```
<div class="chat_box1">
<div id="chat_box_bar">
    <p>(SOME PHP CODE HERE)</p>
        <p id="close_chat" onclick="close_chat_box(1)">X</p>

</div>
</div> 
```

我想知道我是否将显示设置为“无”，并且只有在单击某些文本时才能将其更改为“阻止”。作为：

```
<li onclick='display_chat_box(chat_box_number(),"kamal@kamal.com")'>KAMAL</li> 
```

javascript函数：

```
function display_chat_box(y,email)
{
   switch (y)
   {
        case 1:
        {
           alert("hi");
           document.getElementsByClass("chat_box1")[0].style.display="block";
        }
        case 2:
        {
           document.getElementsByClass("chat_box2")[0].style.display="block";
        }
        case 3:
        {
           document.getElementsByClass("chat_box3")[0].style.display="block";
        }
    }
} 
```

我在第一种情况下插入了警报代码，以检查范围内的代码是否有效，并且它在我运行网页时弹出警报框。

问题：显示属性没有从“无”变为“阻止”。不知道为什么，但它以某种方式在我之前正在使用的另一台 PC 上运行。

变量 'y' 从这个函数中获取它的值：

```
function chat_box_number()
{
    if(n==3)
        n=0;
    n++;
    return n;
} 
```

这是CSS代码：

```
.chat_box1,.chat_box2,.chat_box3
{
   display: none;
   width: 20%;
   position: fixed;
   bottom:0;
   margin-right: 10px;
   border-style: solid;
   border-width: thin;
   height:30%;
   font-family: comic sans ms;
   font-size: 12px;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:24:43.707

直到现在我才注意到，但我认为您的 switch 语句不是有效的 javascript

在编写案例时，您应该这样做：

```
case 1:
   whatever_you_want_to_do();
   break; 
```

代替

```
case 1:
{
   whatever_you_want_to_do();
} 
```

而正确使用的功能`getElementsByClassName`不是`getElementsByClass`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T07:18:01.783

如果你设置呢？...

```
whatever.style.display="block !important"; 
```

# android - UIAuitomator 代码中的错误

> ID：15631346
> 
> 赞同：4
> 
> 时间：2013-03-26T07:12:24.737
> 
> 标签：android, android-uiautomator

我的代码如下，

```
package com.example.automatorapp.test;

import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class Try2 extends UiAutomatorTestCase 
{

public void demo() throws UiObjectNotFoundException
{

    getUiDevice().pressHome();
}

 } 
```

错误是......

```
 java.lang.RuntimeException: Exception during suite construction
at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:93)
at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4382)
at android.app.ActivityThread.access$1300(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Stub!
at com.android.uiautomator.testrunner.UiAutomatorTestCase.<init>(UiAutomatorTestCase.java:5)
at com.example.automatorapp.test.Pun.<init>(Pun.java:10)
... 18 more 
```

我的 MainActivity 没有问题。它工作正常。但是这个测试用例给出了一些错误。你能告诉我如何添加 uiautomator.jar 的 javadocs。因为我找不到 uiautomator 的 javadoc 的 apk 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:31:18.353

测试用例需要具有标准的 junit 3 样式方法签名`public void test...() { ... }`

你的代码有一个方法`demo()`一旦你添加前缀测试如下，`testdemo()`然后测试被找到并执行。

为了完整起见，这是运行测试时两者之间的差异。首先，该方法的代码本质上是什么`public void demo()`

```
UIAutomatorExample$ adb shell uiautomator runtest UIAutomatorExample.jar -c com.example.automatoapp.test.Try2
INSTRUMENTATION_STATUS: stream=
Test results for WatcherResultPrinter=
Time: 0.0

OK (0 tests) 
```

一旦方法被正确命名为`public void testdemo()`

```
UIAutomatorExample$ adb shell uiautomator runtest UIAutomatorExample.jar -c com.example.automatoapp.test.Try2
INSTRUMENTATION_STATUS: current=1
INSTRUMENTATION_STATUS: id=UiAutomatorTestRunner
INSTRUMENTATION_STATUS: class=com.example.automatoapp.test.Try2
INSTRUMENTATION_STATUS: stream=
com.example.automatoapp.test.Try2:
INSTRUMENTATION_STATUS: numtests=1
INSTRUMENTATION_STATUS: test=testdemo
INSTRUMENTATION_STATUS_CODE: 1
INSTRUMENTATION_STATUS: current=1
INSTRUMENTATION_STATUS: id=UiAutomatorTestRunner
INSTRUMENTATION_STATUS: class=com.example.automatoapp.test.Try2
INSTRUMENTATION_STATUS: stream=.
INSTRUMENTATION_STATUS: numtests=1
INSTRUMENTATION_STATUS: test=testdemo
INSTRUMENTATION_STATUS_CODE: 0
INSTRUMENTATION_STATUS: stream=
Test results for WatcherResultPrinter=.
Time: 1.53

OK (1 test) 
```

这是示例代码的更正版本：

```
package com.example.automatoapp.test;

import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class Try2 extends UiAutomatorTestCase 
{
    public void testdemo() throws UiObjectNotFoundException
    {
        getUiDevice().pressHome();
    }
} 
```

# magento - 如何在 magento 购物车页面中获取自定义值？

> ID：15631350
> 
> 赞同：1
> 
> 时间：2013-03-26T07:12:36.117
> 
> 标签：magento, shopping-cart

在我的商店中，我需要将一些值传递到产品列表页面。并且传递的值需要在购物车页面中获取。我的示例代码在这里，

我添加了一些这样的自定义值，

```
$description = "Pendant Shape: ".$pen_shape." "."Pendant Color: ".$pen_color." "."Necklace Color: ". 
```

添加我传递这样的值，

```
$cart->addProduct($product, $params, $description); 
```

如何在购物车页面中获取此**$description**值。必须感谢任何建议或帮助。

谢谢

# ios - 通过 APNS 在有效载荷中发送的数据

> ID：15631352
> 
> 赞同：2
> 
> 时间：2013-03-26T07:12:43.023
> 
> 标签：ios, apple-push-notifications

我在我的应用程序中使用 APNS，我想发送一些数据（当然少于 256 字节）。我的问题是我想通过推送通知发送数据而不向用户显示任何警报。我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:40:22.883

在 aps 键中指定徽章，并将您的数据放入其他键中。因此，如果您使用徽章编号，请重新计算正确的徽章编号，如果您不使用它们，只需发送 0。

来自苹果文档：

> 提供者可以在 Apple 保留的 aps 命名空间之外指定自定义有效负载值。自定义值必须使用 JSON 结构化和原始类型：字典（对象）、数组、字符串、数字和布尔值。您不应将客户信息作为自定义有效负载数据包含在内。相反，将其用于设置上下文（用于用户界面）或内部指标等目的。例如，自定义有效负载值可能是供即时消息客户端应用程序使用的会话标识符，或者是标识提供者何时发送通知的时间戳。与警报消息相关的任何操作都不应具有破坏性——例如，删除设备上的数据。

但是有一个问题 - 这仅在应用程序正在运行时才有效。

它的工作方式是 - 如果应用程序正在运行，您会通过带有有效负载数据的 didReceiveRemoteNotification 回调获得通知。您可以在此处提取您的自定义数据。但是，如果应用程序没有运行，通常会显示一个警报，并且*只有*当用户点击它时才会通知您的应用程序。由于您不想显示警报 -当应用程序*未*运行时，您无法获取自定义有效负载数据。仔细想想，如果应用程序自己启动，用户会感到非常害怕。:)

# ios - iPad 屏幕顶部有多个条形图

> ID：15631356
> 
> 赞同：0
> 
> 时间：2013-03-26T07:12:57.480
> 
> 标签：ios, ipad, custom-controls, uinavigationbar, uitoolbar

我想知道我们能不能像这个屏幕截图一样在顶部创建 2 个条形图。一个带有多个按钮和搜索栏的顶部栏，第二个带有后退按钮的顶部栏。

![在此处输入图像描述](../Images/0830e37a06b5aa1803cadbfe0154ea36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:23:17.937

您可以使用`UINavigationBar`from并且可以在视图顶部`UINavigationController`添加当前显示`UIViewController`的视图。`UIToolBar`

# c++ - C ++将数据字节解析为结构

> ID：15631364
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:13:47.077
> 
> 标签：c++, visual-c++

我是新来的，我有一个问题，我有一个结构，假设总大小是 8 个字节，这里是结构：

```
struct Header 
{
    int ID;             // 4 bytes
    char Title [4];     // 4 bytes too
}; // so it 8 bytes right? 
```

而且我也有一个 8 字节的文件...我只是想问一下，如何将该文件上的数据解析为该文件的结构

我试过这个：

```
 Header* ParseHeader(char* filename)
    {
        char* buffer = new char[8];
        fstream fs(filename);

        if (fs.is_open() != true)
            throw new exception("Couldn't Open file for Parsing Header.");

        fs.read(buffer, 8);

        if (!fs)
        {
            delete[] buffer;
            throw new exception("Couldn't Read header OJN file.\nHeader data was corrupted");
        }

        Header* header = (Header*)((void*)buffer);
        delete[] buffer;
        fs.close();

        return header;
    } 
```

但它失败了，并返回了比我预期的无效数据（我可以确定，这不是文件错误，文件结构正确）

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:15:46.793

到目前为止，您似乎一切都很好：

```
Header* header = (Header*)((void*)buffer);
delete[] buffer;
fs.close(); 
```

请注意，您在转换后删除了缓冲区，这意味着标头指向已删除的位置-> 垃圾，如果您仍想使用它，则需要不删除或复制数据。

另外，老实说，我不明白你的代码是如何编译的，你的函数声明它返回一个 Header，而你返回一个 Header*..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:15:48.690

您正在删除正在返回的数据。因此`header`不再可访问。

我认为您的意思是：

```
Header header = *(Header*)((void*)buffer); 
```

这实际上将复制标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:02:32.307

`struct Header`就涉及 C++ 而言，您的 8 字节文件正确映射到您的文件只是运气。该结构可能具有使其大于 8 个字节的内部填充，并且文件和 CPU 之间的数据字节序可能不同。

我意识到您的代码适用于*您的特定编译器版本*，在*您的操作系统*和*CPU*上，但您不应该养成这样编码的习惯，否则一旦您更改任何这些参数，您可能会遇到大麻烦（或者甚至可能只是一些编译器标志）。换句话说，你正在做的是**非常糟糕的做法**。在 C++ 中，您甚至不能保证 an`int`实际上是 4 个字节。

从文件中加载此类二进制数据的正确方法是单独加载每个字段并确保根据您使用的 CPU（例如通过`hton* / ntoh*`或类似功能）进行正确的字节顺序转换。使用固定大小的类型`int32_t`也有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:14:48.693

只需将 1 字节边界的结构定义为：

```
#pragma pack(1)
struct Header 
{
    int ID;             // 4 bytes
    char Title [4];     // 4 bytes too
};
#pragma pack() 
```

第一`pack`条语句指示编译器对结构中的成员使用单字节填充。这种方式的大小`Header`将是 8 个字节。第二条`pack`语句指示返回默认设置。您可能需要使用`push`和`pop`说明（请参阅[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)）-但这不是您所必需的。

其次，更重要的是，您不应该使用硬编码值，例如`8`. 始终用于`sizeof`读取或写入结构。此外，绝对不需要此声明：

```
char* buffer = new char[8];
... 
```

只需声明`Header`变量本身，然后阅读它：

```
Header header;
...
fs.read(&header, sizeof(Header)); 
```

# c - 在 diskperf 中获取分区详细信息

> ID：15631367
> 
> 赞同：0
> 
> 时间：2013-03-26T07:13:51.653
> 
> 标签：c, windows, driver, disk, partition-problem

在 diskperf 过滤器驱动程序中，如何获取所有分区的分区信息。

我正在使用`IOCTL_DISK_GET_DRIVE_LAYOUT_EX`ioctl 来获取分区信息。

我能够从一个磁盘获取分区的详细信息。但是，如果有多个磁盘，那么我如何从这些磁盘中获取分区的详细信息。我试过了，但我得到了第二个磁盘的返回状态，`0x80000010`这意味着`STATUS_DEVICE_OFF_LINE`。谁能解释一下我该如何解决这个问题？

另一个磁盘的分区是主分区，但不引导。所以可能这就是为什么我`0x80000010`在启动时获得了 windbg 中的返回状态。那么如何才能获得系统已完成加载的分区详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:37:28.703

基本磁盘支持 IOCTL_DISK_GET_PARTITION_INFO_EX 控制代码。它仅在作为引导或系统磁盘的动态磁盘上受支持，或者在分区表中保留了条目。

[http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/35a1d1cc-5948-4554-bbeb-63e014f03328/](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/35a1d1cc-5948-4554-bbeb-63e014f03328/)

[http://www.osronline.com/ShowThread.cfm?link=152051](http://www.osronline.com/ShowThread.cfm?link=152051)

# testing - 为什么 ets 表在 ct:init_per_testcase 但 init_per_suite 不存在？

> ID：15631369
> 
> 赞同：5
> 
> 时间：2013-03-26T07:13:56.760
> 
> 标签：testing, erlang, common-test

我有一个通用测试套件，它尝试创建一个 ets 表以用于所有套件和所有测试用例。它看起来像这样：

```
-module(an_example_SUITE).
-include_lib("common_test/include/ct.hrl").

-compile(export_all).

all() -> [ets_tests].

init_per_suite(Config) ->
    TabId = ets:new(conns, [set]),
    ets:insert(TabId, {foo, 2131}),
    [{table,TabId} | Config].

end_per_suite(Config) ->
    ets:delete(?config(table, Config)).

ets_tests(Config) ->
    TabId = ?config(table, Config),
    [{foo, 2131}] = ets:lookup(TabId, foo). 
```

该`ets_tests`函数因 badarg 而失败。为每个测试用例创建/销毁 ets 表，如下所示：

```
-module(an_example_SUITE).
-include_lib("common_test/include/ct.hrl").

-compile(export_all).

all() -> [ets_tests].

init_per_testcase(Config) ->
    TabId = ets:new(conns, [set]),
    ets:insert(TabId, {foo, 2131}),
    [{table,TabId} | Config].

end_per_testcase(Config) ->
    ets:delete(?config(table, Config)).

ets_tests(Config) ->
    TabId = ?config(table, Config),
    [{foo, 2131}] = ets:lookup(TabId, foo). 
```

运行它，我发现它的功能很漂亮。

我对这种行为感到困惑，无法确定*为什么*会发生这种情况，形成[文档](http://www.erlang.org/doc/man/common_test.html#Module%3ainit_per_suite-1)。问题：

*   为什么会这样？
*   如何在每个套件和每个测试用例之间共享一个 ets 表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:21:44.670

正如 Pascal 在回答中已经提到的那样，并且仅在[用户指南](http://www.erlang.org/doc/apps/common_test/write_test_chapter.html#id63060)`init_per_testcase`中讨论过，并且`end_per_testcase`在与测试用例相同的过程中运行。由于 ETS 表绑定到所有者进程，因此在整个套件或组中保持 ETS 表的唯一方法是放弃它或定义继承进程。

`init_per_suite`您可以轻松地在您的or函数中生成一个进程`init_per_group`，将其设置为 ETS 表的继承者，并在配置中传递其 pid。

要清理所有你需要的是在你的`end_per_suite`or`end_per_group`函数中杀死这个进程。

```
-module(an_example_SUITE).
-include_lib("common_test/include/ct.hrl").

-compile(export_all).

all() -> [ets_tests].

ets_owner() ->
    receive
        stop -> exit(normal);
        Any -> ets_owner()
    end.

init_per_suite(Config) ->
    Pid = spawn(fun ets_owner/0),
    TabId = ets:new(conns, [set, protected, {heir, Pid, []}]),
    ets:insert(TabId, {foo, 2131}),
    [{table,TabId},{table_owner, Pid} | Config].

end_per_suite(Config) ->
    ?config(table_owner, Config) ! stop.

ets_tests(Config) ->
    TabId = ?config(table, Config),
    [{foo, 2131}] = ets:lookup(TabId, foo). 
```

您还需要确保您仍然可以从测试用例过程中访问您的表，方法是`protected`：`public`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:26:25.613

一个 ets 表附加到一个进程并在进程结束后立即销毁，除非您使用 give_away 函数（我担心在这种情况下这是不可行的）

作为通用 tets 文档中的状态，每个测试用例以及 init_per_suite 和 end_per_suite 都在单独的进程中运行，因此一旦您离开 init_per_suite 函数，ets 表就会被销毁。

来自 common_test 文档

> init_per_suite 和 end_per_suite 将在专用的 Erlang 进程上执行，就像测试用例一样。然而，这些函数的结果不包括在成功、失败和跳过案例的测试运行统计中。

来自 ets 文档

> 默认所有者是创建表的进程。表所有权可以在进程终止时通过使用 heir 选项或通过调用 give_away/3 显式转移。

# php - 向没有 API 的用户发送私信

> ID：15631371
> 
> 赞同：1
> 
> 时间：2013-03-26T07:13:59.333
> 
> 标签：php, facebook, facebook-messages

有没有一种方法可以在不使用 API 的情况下在 facebook 上向用户发送消息，就像您可以向用户发送电子邮件一样？

我有用户的 facebook 电子邮件，但是当我发送到 facebook 电子邮件时，它有时会进入垃圾邮件，有时会进入收件箱，有时甚至不会发送给他们，我可以在 Mandrill 中看到消息已发送？

# sql - 序列号基于 SQL 中所需的列信息

> ID：15631372
> 
> 赞同：1
> 
> 时间：2013-03-26T07:13:59.810
> 
> 标签：sql, sql-server-2000

我的表中有几列（SQL Server 2000 数据库）。我有类似的信息

```
OrderID      Design        Qty
------------------------------    
28500   R6192WHM+DWN    1
28500   P3150WHM+DWN    1
28504   E3085/2DWN  1
28503   R5595HCT(P) 1
28503   R4768DWN    1
28505   E3415D(P)   1
28505   E3413DWN    1
28505   E3365AQ(P)  1 
```

我需要这样的信息（即基于 orderid 的 sno ）

```
OrderID   Design        Qty    SNO
-------------------------------------    
28500   R6192WHM+DWN    1       1
28500   P3150WHM+DWN    1       2
28504   E3085/2DWN  1       1
28503   R5595HCT(P) 1       1
28503   R4768DWN    1       2 
28505   E3415D(P)   1       1
28505   E3413DWN    1       2
28505   E3365AQ(P)  1       3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:52:26.793

尝试这个

```
select t1.*, SNO = count(*)
  from Table1 t1
  join Table1 t2
    on t1.OrderID = t2.OrderID
   and t1.Design >= t2.Design
 group by t1.OrderID, t1.Design, t1.Qty
 order by t1.OrderID, t1.Design 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:23:41.617

试试，它适用于 MS Sql 服务器 2005 及更高版本：

```
select 
    *, 
    row_number() over (partition by OrderID order by OrderID) 
from YourTable 
```

样本

```
select 
    *, 
    row_number() over (partition by OrderID order by OrderID) 
from(
    select 28500 OrderID,   'R6192WHM+DWN' Design,  1 Qty union
    select 28500 OrderID,   'P3150WHM+DWN' Design,  1 Qty union
    select 28504 OrderID,   'E3085/2DWN' Design,    1 Qty union
    select 28503 OrderID,   'R5595HCT(P)' Design,   1 Qty union
    select 28503 OrderID,   'R4768DWN' Design,      1 Qty union
    select 28505 OrderID,   'E3415D(P)' Design,     1 Qty union
    select 28505 OrderID,   'E3413DWN' Design,      1 Qty union
    select 28505 OrderID,   'E3365AQ(P)' Design,    1 Qty
)x 
```

请尝试以下查询，该查询适用于 sql server 2000 `select *, (select count(*) from YourTable t2 where t2.OrderId=t1.OrderID and t2.Design<t1.Design)+1 as SNo From YourTable t1 order by OrderID, Design`

# c++ - resize() 和 reserve() 有什么区别？

> ID：15631377
> 
> 赞同：0
> 
> 时间：2013-03-26T07:14:29.577
> 
> 标签：c++, vector, stl

```
#include<iostream>
using namespace std;
#include<vector>
#include "s.h"

template<class T> 
void f(vector<T> a)
{
    cout << "size  " << a.size() << endl;
    cout << "capacity  " << a.capacity() << endl << endl;
}

int main()
{
    vector<int> s(10,5);
    f(s);
    s.resize(50);
    f(s);
    s.reserve(150);
    f(s);
    return 0;
} 
```

我认为 resize() 会改变大小，而 reserve() 会改变容量，但在我的示例中，reserve() 不会改变容量，为什么？还有我的第二个问题——assign() 是什么意思？我可以对 operator=() 做同样的事情吗？

```
// 10 10
// 50 50 
// 50 50 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T07:26:47.900

当您将向量传递给函数时，您正在创建向量的副本。更改 的定义`f`以通过引用传递向量，您会看到它的行为与您预期的一样：

```
void f(const vector<T>& a) 
```

印刷

```
size  10
capacity  10

size  50
capacity  50

size  50
capacity  150 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T07:29:20.083

复制向量会复制其*内容*。并且容量不被视为向量内容的一部分。由于您的`f`函数复制了它的参数，因此您没有传递实际的向量；你正在传递一份副本。容量设置为实现定义值的副本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T07:28:40.163

调用`reserve(...)`实际上可能正在工作，但您只是不知道。当你调用你的函数时

```
void f(vector<T> a) 
```

您正在将原始向量*复制*到新向量中`a`；那时我怀疑该库创建了一个具有最小容量的向量。如果您尝试将函数的签名更改为

```
void f(vector<T> const& a) 
```

您可能会看到您期望的结果，因为该函数将在原始向量对象而不是副本上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T08:30:39.993

reserve() 总是增加容量，而 resize() 可以做任何事情，包括以某种方式破坏您的数据及其危险。调用 reserve() 以获得比实际大小更小的容量可能不会导致任何问题或更改，而使用小于大小的值调用 resize() 只会裁剪数据或使用高于实际大小的值调整大小当然会增加向量大小本身

# sql - Sql server 语句排序 ASC

> ID：15631380
> 
> 赞同：1
> 
> 时间：2013-03-26T07:14:34.437
> 
> 标签：sql, sql-server, select

我目前正在尝试在 ASC 中对日期进行排序。如果我使用 ASC，它将对数据进行排序，日期将比下一个日期空。

所以我做这样的事情 Select * from tblUser order by LastLogin 它将显示以下内容

```
Name             LastLogin 
1\. Peter         NULL
2\. Brian         2013-03-14
3\. Jack          2013-03-15 
```

但我想退回一些东西，请告知我可以做到这一点

```
1\. Brian         2013-03-14
2\. Jack          2013-03-15
3\. Peter         NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:15:39.480

```
SELECT  *
FROM    tableName
ORDER   BY CASE WHEN lastlogin IS NULL THEN 1 ELSE 0 END, lastlogin 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/acce2/2)

# java - 升级 JIRA 时需要下载哪个 jar？

> ID：15631385
> 
> 赞同：0
> 
> 时间：2013-03-26T07:14:45.127
> 
> 标签：java, tomcat, tomcat7, jira

在升级 jira 版本时，我在控制台中遇到了这个错误。

所以请告诉我我需要安装哪个 jar 来克服这个错误？

如果您在启动或停止 JIRA 时遇到问题，请参阅故障排除。

```
Using JIRA_HOME:        D:\JIRA\atlassian-jira-6.0-m08-standalone
Using CATALINA_BASE:   "D:\JIRA\atlassian-jira-6.0-m08-standalone"
Using CATALINA_HOME:   "D:\JIRA\atlassian-jira-6.0-m08-standalone"
Using CATALINA_TMPDIR: "D:\JIRA\atlassian-jira-6.0-m08-standalone\temp"
Using JRE_HOME:        "D:\ProgramFiles\Java\jdk1.7.0"
Using CLASSPATH:       "D:\JIRA\atlassian-jira-6.0-m08-standalone\bin\bootst 
```

错误：

```
**java.lang.NoSuchMethodError: org.apache.tomcat.util.digester.Digester.setRulesValidation(Z)**
    at org.apache.catalina.startup.Catalina.createStartDigester(Catalina
    at org.apache.catalina.startup.Catalina.load(Catalina.java:465)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:551)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorI
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodA
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:29:19.723

您可以添加 tomcat-util-[Latest Version].jar 如果您遇到类似问题，也可以作为参考，并尝试找出需要哪个 jar，您可以查看[FindJar 网站](http://www.findjar.com)

希望对未来有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:17:44.113

您需要下载以下jar

tomcat-util.jar

希望能帮助到你

# php - 使用 php 或 javascript 在 json 数组中转义 Utf-8

> ID：15631387
> 
> 赞同：0
> 
> 时间：2013-03-26T07:14:48.903
> 
> 标签：php, javascript, json

我创建了一个在 postgres 数据库上`php`执行`select`语句的脚本。我将结果转换为 json 字符串并使用line将其传递给`javascript`变量。我无法解决的问题是我的 from包含波兰字符 ( ) 编码，当我得到这个值时，它完全没问题，因为字符串没有被转义。这是我这样做的方法： json 的生成：`<? echo $a; ?>`

`json``php``utf-8``javascript``Uncaught SyntaxError: Unexpected identifier`

`php`

```
<? $result_json = json_encode($result); ?> 
```

以及我如何将它传递给js：

```
options_json='<? echo $result_json; ?>'; 
```

当我在浏览器中调试时，我的`options_json`样子：

```
options_json='[{"code":"za\u0105e ba\u0144stre."..... 
```

我试过`escape()` `utf8_encode()`了`addslashes()`。首先没有结果，该`addslashes()`函数删除了错误，但它破坏了`json`结构，所以我无法将其还原..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:23:15.953

它可能对你有用，我正在使用下面的函数来编码那些有阿拉伯文本的数组。试试下面的函数。我不是在处理斜线。

```
 public function utf8_encode_all($dat) // -- It returns $dat encoded to UTF8
      {
          if (is_string($dat)) return utf8_encode($dat);
          if (!is_array($dat)) return $dat;
          $ret = array();
          foreach($dat as $i=>$d) $ret[$i] = $this->utf8_encode_all($d);
          return $ret;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:24:32.747

只需尝试返回 json 编码值，如下例所示：

```
$arr_rslt=array();
$query=" Select col1,col2,col3 from tbl";
$result = mysql_query($query);

while( $row = mysql_fetch_array( $result ) )
{

    $arr_rslt[] = $row;
}

echo json_encode($arr_rslt); 
```

在客户端，如果您使用 $.ajax 或 $.post 然后在他们的回调中操作它。也可以在你的 $.ajax 中使用它。

```
contentType: "application/json; charset=UTF-8", 
```

# javascript - Chrome 默认弹窗如何使用？

> ID：15631389
> 
> 赞同：1
> 
> 时间：2013-03-26T07:14:50.227
> 
> 标签：javascript, html, google-chrome, css, popup

是否可以使用在我的网页的设置页面中看到的 chrome 弹出窗口 ![在此处输入图像描述](../Images/c4b4cfc15e65815dd185cd4dd4a9007d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:11:01.217

您可以使用`window.showModalDialog()`

但是，不推荐 - [window.showModalDialog：它是什么以及为什么你不应该使用它](http://tjvantoll.com/2012/05/02/showmodaldialog-what-it-is-and-why-you-should-never-use-it/)

# jquery - JQuery 通过单击按钮开始事件

> ID：15631392
> 
> 赞同：0
> 
> 时间：2013-03-26T07:14:54.637
> 
> 标签：jquery, button

在用户单击按钮后，我正在禁用按钮，以防止重复提交或操作。我有两种类型的按钮。执行提交并重新加载页面的 php 按钮（或表单按钮）。我对此没有任何问题。因为我只是永远禁用按钮，并且在重新加载之后再次可以推动。这里有一个例子：

```
$(document).on('click', 'button', function() {
    var $this = $(this);
        htmls =  $(this).html();
       $(this).prop("disabled", true);
       setTimeout(function(){
           $this.prop("disabled", false);
       }, 2000);
}); 
```

现在是 2 秒，但我将删除 setTimeout 部分。更大的问题是 Javascript 按钮，这个按钮不会重新加载页面。当用户按下按钮时，它应该被禁用，直到使用按钮启动的过程结束，然后再次启用它。我可以检查按钮是否提交，或者它只是说清除表单中的所有字段。我在想也许我可以得到从按钮按下开始的过程，然后当它结束时我可以继续工作。这甚至可能吗？还是有其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:29:34.070

您可以使用 jQuery.ajax 向服务器发出请求，当服务器返回响应时，您可以继续处理相同的表单或其他内容。您必须记住的是，您必须从表单中收集所有数据并将其作为 json 对象发送到服务器。

基于您的代码的小示例：

```
$(document).on('click', 'button', function() {
    var $this = $(this);
        htmls =  $(this).html();
       $(this).prop("disabled", true);
       $.ajax({
          type: "POST",
          url: "some.php", //url to make post to
          data: JSON.stringify(formdata), //data collected from your form
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          }).done(function( result) {
              //put here the code to process the result from server
          }).fail(function() { 
              alert("error"); // if something went wrong on server
          })
           .always(function() { 
              $(this).prop("disabled", false); //back enabling your button and maybe some other logic
          });;
}); 
```

在此处阅读有关 jQuery.ajax 的更多信息[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果有任何其他问题让我知道；）我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:24:01.617

你可以这样做

```
<input type='button' value='Javascript button' id="btn" />
    <script>
        $(document).ready(function () {

            $("#btn").click(function () {
                $(this).prop("disabled", true);
                // long processing
                $(this).prop("disabled", false);
            });

            //OR with a jquery request 

            $("#btn").click(function () {
                $(this).prop("disabled", true);

                $.ajax({
                    type: "POST",
                    url: "some url",
                    data: JSON.stringify(data),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    sucess: function (data) { alert(data); }
                }).always(function () {
                    $(this).prop("disabled", false);
                });

            });

        });
    </script> 
```

# c# - 重写 Linq 查询以使用 if / else 并放弃 var

> ID：15631393
> 
> 赞同：0
> 
> 时间：2013-03-26T07:14:55.430
> 
> 标签：c#, .net

我最近开始玩 Linq（提示 groans），并试图编译以下内容。现在，whereclause 部分使用了 DynamicLinq，效果很好；它是编译器想要一个真正的类的 var 占位符变量；不幸的是，我正在使用我认为是匿名课程，并且不知道如何从这里获取它。有什么建议么？

```
var query;
if(whereclause != string.Empty) 
{
    query = Directory.GetFiles(LRSettings.Default.OperatingDirectory, LRSettings.Default.FileExtension,
    SearchOption.AllDirectories).AsQueryable()
        .Select(Filename => new { Filename, new FileInfo(Filename)
        .LastWriteTime, new FileInfo(Filename).Extension, new FileInfo(Filename).Length })
        .Where(whereclause);
}
else 
{
    query = Directory.GetFiles(LRSettings.Default.OperatingDirectory,
                               LRSettings.Default.FileExtension,
                               SearchOption.AllDirectories)
        .AsQueryable()
        .Select(Filename => new { Filename, new FileInfo(Filename).LastWriteTime, new FileInfo(Filename).Extension, new FileInfo(Filename).Length });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:23:48.490

由于您的查询似乎唯一的区别是是否包含`WHERE`子句，您应该能够做到这一点：

```
var query = Directory.GetFiles(LRSettings.Default.OperatingDirectory, LRSettings.Default.FileExtension, SearchOption.AllDirectories)
        .AsQueryable()
        .Select(Filename => new { Filename, new FileInfo(Filename).LastWriteTime, new FileInfo(Filename).Extension, new FileInfo(Filename).Length });

if(whereclause != string.Empty) 
{
    query = query.Where(whereclause);
} 
```

由于您使用的是`IEnumerable`，因此我认为您不必担心在没有该`Where()`子句的情况下提取太多数据，因为在您以某种方式访问​​之前它不会被枚举`query`（例如绑定到表单或诸如此类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:24:37.840

两个直接选项是使用[`?:`](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)或提取公共/起始查询。

对于前者：

```
bool expr = SomeTrueOrFalseValue();
var l = new [] { 1,2,3 };
// both "true" and "false" branches unify an IEnumerable<int>
var q = expr
  ? l
  : l.Where(x => x > 1);
// q typed as IEnumerable<int> 
```

对于后者：

```
var q = l.AsEnumerable();
// q is typed as IEnumerable<int>
if (!expr) {
    q = q.Where(x => x > 1);
}
// q is still typed as IEnumerable<int> - can't be changed after var 
```

赋值*必须*包含在[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)声明中，这样才能确定变量的类型。

但没有 var：

```
IEnumerable<int> q; // not practical/possible for complex types
if (expr) {
   q = l;
} else {
   q = l.Where(x => x > 1);
} 
```

# jquery - 循环我的进度条？

> ID：15631399
> 
> 赞同：0
> 
> 时间：2013-03-26T07:15:14.330
> 
> 标签：jquery, loops, jquery-ui-progressbar

我有个问题。

有人可以帮助修复此代码，以便进度条在达到 100 时重新开始。

我希望你能看到工作正在进行中。现在使用我的代码，它会在达到 100 时停止。

希望你能理解我的问题。

另一种解决方案可能是一个进度条，它一直在不同的值上跳跃。唯一重要的是进度条一直在工作，直到您从页面重定向。

这是我目前进度条的代码。

```
$("#progressbar").progressbar();
                var value = 0;
                var timer = setInterval (function ()
                {
                  $("div#progressbar").progressbar ("value", value);
                  value++;
                  if (value > 100) clearInterval (timer);
                }, 200); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:19:08.657

当它达到 100 时如何设置`0`再次值？`progressBar`

```
$("#progressbar").progressbar();
var value = 0;
var timer = setInterval (function (){
$("div#progressbar").progressbar ("value", value);
    value++;
    if (value > 100) value=0;
}, 200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:19:27.363

当它达到 100 时，只需将值设置为 0：

```
if(value > 100) value = 0; 
```

观看**[现场演示](http://jsfiddle.net/samliew/HFArM/)**

您不想清除计时器，因为它会停止动画。

当页面重定向时，所有计时器将自动清除/停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:26:45.853

您可以尝试`window.clearInterval()`：

```
if (value > 100){
  var timer = window.clearInterval(timer);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T07:19:06.453

您的 if 语句不在块内您应该像这样

```
if(value > 100){ clearInterval(timer); } 
```

另外我认为您要在这里重置的不是间隔而是值。所以这样做：

```
if(value > 100){ value=0; } 
```

那应该工作

# python - 带有 uwsgi 的 signal.SIGALRM

> ID：15631400
> 
> 赞同：3
> 
> 时间：2013-03-26T07:15:21.680
> 
> 标签：python, timeout, signals, uwsgi

我用 uwsgi 服务器运行 django。我的代码包含许多带有 urllib2 的 api 调用，如下所示：

```
with closing(urllib2.urlopen(request, timeout=1)) as f:
    content = f.read() 
```

即使我设置了套接字超时，我也看到请求需要更多我想要的秒数。我猜这是因为超时限制了套接字连接而不是数据读取。

我想限制这个代码块。试图用它来实现它，`signal.SIGALRM`但它不适用于 uwsgi （我没有运行`enable-threads`）。但它适用于 Apache+mod_wsgi。线程超时看起来不可靠。

没有错误，SIGALRM 只是忽略了 harakiri 模式。我不擅长阅读 C 源代码，但[这里](https://github.com/unbit/uwsgi/blob/master/core/gateway.c#L73)出现这种行为的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-17T02:19:48.273

使用线程支持编译的 Python 不会[在其线程或`fork()`s](https://hg.python.org/cpython/file/v2.7.9/Modules/signalmodule.c#l197)中调用自定义信号处理程序，除非它使用 重新初始化[`PyOS_AfterFork()`](https://hg.python.org/cpython/file/v2.7.9/Modules/signalmodule.c#l1008)，这通常发生在 中[`os.fork()`](https://hg.python.org/cpython/file/v2.7.9/Modules/posixmodule.c#l3835)，但奇怪的是 uwsgi 默认不这样做。但是，它提供了一个选项[`--py-call-osafterfork`](https://github.com/unbit/uwsgi/blob/2.0.11.2/plugins/python/python_plugin.c#L171)，uwsgi 从站可以使用该选项处理信号，包括`SIGALRM`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:33:46.390

不要将 UNIX 信号用于此类事情，它们基本上是不可靠的。Harakiri 模式有一个“用户级别”的对应部分：

```
uwsgi.set_user_harakiri(10)
with closing(urllib2.urlopen(request, timeout=1)) as f:
    content = f.read()
uwsgi.set_user_harakiri(0) 
```

# android - Achartengine - android中条形图的不同条形颜色

> ID：15631408
> 
> 赞同：3
> 
> 时间：2013-03-26T07:15:54.027
> 
> 标签：android, achartengine

我使用[AchartEngine](http://achartengine.org)库在 android 中创建了一个图形。我想用不同的颜色显示每个 Bar。我该怎么办，请给我一些建议..？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:21:48.827

看看[这里](https://stackoverflow.com/questions/5405858/bar-chart-using-achartengine)给出的答案。在这里，他只给一个酒吧提供不同的颜色。

考虑一下并尝试根据您的要求进行定制。

# c++ - C ++填充数组问题

> ID：15631413
> 
> 赞同：0
> 
> 时间：2013-03-26T07:16:20.843
> 
> 标签：c++

我有一个根据用户输入填充数组的函数

该程序在这个测试用例中运行良好，但它要求用户提供比需要的多一个数字。

```
void fill_array(char a[], int size)
{
char next;
const char SENTIEL ='.';
int index=0;
cin >> next;

  while ((next !=SENTIEL) && (index < size))
{
   a[index] = next;
   index++;
   cin >> next;

}

cout << a[0];
cout << a[1];
cout << a[2];
cout << a[3];
cout << a[4];
cout << a[5];
cout << a[6];
cout << a[7];
cout << a[8];
cout << a[9];   
}

int main()
{
int const MAX=10;
char b[MAX];
fill_array(b,MAX);
} 
```

这会返回正确的数字，但它还有一个要问的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:20:28.433

您要求`cin >> next`在循环之外（1 次），然后您要求`cin >> next` `size`时间导致：大小 + 1 次。

你应该使用一个 for 循环（当然删除局外人`cin >> next`）：

```
for (int index = 0; (next !=SENTIEL) && (index < size); index++)
{
   a[index] = next;
   cin >> next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:23:28.410

`next`使用其他字符初始化字符`SENTIEL`，然后读取`next`之前`index`的字符会递增。

```
char next = ' ';
const char SENTIEL ='.';
int index=0;
while ((next !=SENTIEL) && (index < size))
{
  cin >> next;
  a[index] = next;
  index++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:24:27.827

请更换：

```
 while ((next !=SENTIEL) && (index < size))
{
   a[index] = next;
   index++;
   cin >> next;

} 
```

至

```
while ( ( cin >> next) && ( next !=SENTIEL) && ( index < size))
    {
       a[index] = next;
       index++;

    } 
```

还要`cin >> next;`在循环外删除第一个，而且很明显是初始化`next`，就OK了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:28:21.670

或者你可以做这样的事情，

```
while ((index < size) && ((cin>>next) && next!=SENTIEL) )
{
   a[index] = next;
   index++;
} 
```

这样，如果第一个输入是 SENTIEL，您将不会进入循环。

# c# - 为什么我的 Gnome 排序算法会导致我的系统挂起？

> ID：15631416
> 
> 赞同：1
> 
> 时间：2013-03-26T07:16:34.460
> 
> 标签：c#

这是我的 Gnome 排序算法，由于某种原因，当我使用它时，它会导致我的系统挂起。我认为这可能与该`comparer.Compare(x,y) == 1`部分有关，但不确定。

```
 static public void GnomeSort<T>(IList<T> list)
    {
        GnomeSort<T>(list, Comparer<T>.Default);
    }

    static public void GnomeSort<T>(IList<T> list, IComparer<T> comparer)
    {
        bool stillGoing = true;
        while (stillGoing)
        {
            stillGoing = false;
            for (int i = 1; i < list.Count; )
            {
                T temp;
                T x = list[i - 1];
                T y = list[i];
                if (comparer.Compare(x,y) == 1)
                    i++;
                else
                {
                    temp = x;
                    x = y;
                    y = temp;
                    i--;
                    if (i == 0)
                        i = 1;
                    stillGoing = true;
                } 
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:23:25.223

您永远不会更改传入列表。所以你总是有未排序的列表

```
 if (comparer.Compare(x,y) > 0)
   {
        i++;
   }
   else
   {
       list[i-1] = y;
       list[i] = x;
       i--;
       if (i == 0)
           i = 1;
       stillGoing = true;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:23:42.767

`x`和变量仅包含列表中数据的`y`副本，因此交换它们不会交换列表中的项目。

如果`T`是值类型，则值是实际副本。如果`T`是引用类型，则值是对实际数据的引用的副本。

改变这个：

```
temp = x;
x = y;
y = temp; 
```

进入：

```
list[i - 1] = y;
list[i] = x; 
```

# java - Datanucleus type_converter 插件

> ID：15631418
> 
> 赞同：0
> 
> 时间：2013-03-26T07:16:37.867
> 
> 标签：java, jpa, datanucleus

我为 X 型创建了一个像[这里](http://www.datanucleus.org/extensions/type_converter.html)描述的转换器插件。

然后我创建了这个类

```
class A {
    @Basic(fetch = FetchType.Eager)
    X x;
} 
```

当我尝试保留 A 对象时，出现以下错误

```
org.datanucleus.exceptions.NucleusDataStoreException: Object of type net.sf.jcommon.geo.Country isnt Serializable
org.datanucleus.store.rdbms.mapping.AbstractLargeBinaryRDBMSMapping.setObject(AbstractLargeBinaryRDBMSMapping.java:235)
org.datanucleus.store.mapped.mapping.SingleFieldMapping.setObject(SingleFieldMapping.java:207)
org.datanucleus.store.rdbms.fieldmanager.ParameterSetter.storeObjectField(ParameterSetter.java:201)
org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1447) 
```

据我从日志中可以看出，该插件似乎已加载。

```
Added converter for X<->java.lang.String using mypackage.myplugin.XStringConverter 
```

使用调试器，我在转换器中设置了断点，但流程并没有去那里。

还有什么可能出错的？

我正在使用 DataNucleus 3.1.3。

插件代码如下。

清单文件

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: myplugin
Bundle-SymbolicName: mypackage.myplugin
Bundle-Version: 1.0.1
Bundle-Vendor: Adrian Ber 
```

插件.xml

```
<?xml version="1.0"?>
<plugin id="mypackage.myplugin" name="DataNucleus plug-ins" provider-name="myplugin">
<extension point="org.datanucleus.type_converter">
    <type-converter name="dn.x-string" member-type="mypackage.myplugin" 
        datastore-type="java.lang.String"
        converter-class="mypackage.myplugin.XStringConverter" />
</extension>
</plugin> 
```

XString转换器

```
package mypackage.myplugin;
import org.datanucleus.store.types.converters.TypeConverter;

public class XStringConverter implements TypeConverter<X, String> {

private static final long serialVersionUID = 1L;

@Override
public String toDatastoreType(Country memberValue) {
    return memberValue == null ? null : memberValue.getISO();
}

@Override
public Country toMemberType(String datastoreValue) {
    return  datastoreValue == null ? null : X.findByISO(datastoreValue.trim());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:27:45.903

正如我在对该问题的评论中所说，您还需要提供 RDBMS JavaTypeMapping 插件，因为没有它就不会使用 TypeConverter。只需编写一个扩展 ObjectAsStringMapping 并使用您的 TypeConverter 的简单 JavaTypeMapping。

在 DN 3.2 中，JavaTypeMapping 不是必需的，一个 TypeConverter 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:23:22.310

尝试添加`implements Serializable`到您的 X 类。

# asp.net - 如何从asp.net中的页面外部获取会话值

> ID：15631421
> 
> 赞同：2
> 
> 时间：2013-03-26T07:16:44.150
> 
> 标签：asp.net, vb.net, session

是否可以从页面上下文之外获取会话值？是 vb.net 类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:18:09.183

试试[System.Web.HttpContext.Current.Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session%28v=vs.110%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:38:14.690

我一直在使用这样的类（示例只有一个属性，但您可以设置您需要的属性）

```
Public Class MySession

    Private Sub New()
    End Sub

    Public Shared ReadOnly Property Current() As MySession
        Get
            Dim session As MySession = DirectCast(HttpContext.Current.Session("__MySession__"), MySession)
            If session Is Nothing Then
                session = New MySession()
                HttpContext.Current.Session("__MySession__") = session
            End If
            Return session
        End Get
    End Property

    Public Property IsAuthenticated As Boolean
End Class 
```

像这样使用它

```
 <%
       If MySession.Current.IsAuthenticated Then
    %> 
```

# ms-access-2007 - 如何在 Access 2007 表单中选择性地编辑字段？

> ID：15631425
> 
> 赞同：1
> 
> 时间：2013-03-26T07:16:57.673
> 
> 标签：ms-access-2007

是否可以在 ACCESS 2007 的表单中使所有其他字段成为只读字段时保持可编辑状态？我的表单上有大约 40 个控件，让它们一一读取会很不方便。我希望这些字段之一（选项组）可编辑，以便当用户选择一个选项时，整个表单变得可编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:17:00.777

**选项1**

您可以将要锁定的表单设置为子表单并将选项组放在主表单中：

![样本表格](../Images/d771022fd4f58dfa1c3970ac228eb160.png)

例如：

```
Private Sub Form_Current()
    Me.aTable_subform.Form.AllowAdditions = False
    Me.aTable_subform.Form.AllowEdits = False
    Me.aTable_subform.Form.AllowDeletions = False

End Sub

Private Sub PickOne_AfterUpdate()

    Select Case Me.PickOne
        Case 1, 3
            Me.aTable_subform.Form.AllowAdditions = True
            Me.aTable_subform.Form.AllowEdits = True
            Me.aTable_subform.Form.AllowDeletions = True

        Case 2
            Me.aTable_subform.Form.AllowAdditions = False
            Me.aTable_subform.Form.AllowEdits = True
            Me.aTable_subform.Form.AllowDeletions = False

    End Select
End Sub 
```

**进一步说明重新评论**

**选项 2**

您可以在主表单打开时打开一个弹出表单。在本例中，它将在主窗体之前可见。

主窗体上的代码：

```
Private Sub Form_Close()
    DoCmd.Close acForm, "popupform"
End Sub

Private Sub Form_Load()
    DoCmd.OpenForm "popupform", , , , , acDialog
End Sub 
```

![弹出式表格](../Images/d1dab02e234eb1a92fd7b67148b8dbfa.png)

```
Private Sub PickOne_BeforeUpdate(Cancel As Integer)
    Select Case Me.PickOne
        Case 1
            If MsgBox("You chose this. Continue?", vbYesNo) = vbYes Then
                Forms!mainform.AllowAdditions = True
                Forms!mainform.AllowEdits = True
                Forms!mainform.Form.AllowDeletions = True

                ''Setting the visibility leaves the form
                ''available but it is no longer a dialog form
                ''but you must remember to close it elsewhere
                ''If the form is not needed, just close it here
                Me.Visible = False
            Else
                Cancel = True
            End If
        Case 2
            ''Whatever

    End Select
End Sub 
```

**选项 3**

每个控件都有一个供设计人员使用的标记属性，例如，您可以将“Admin”添加到所有需要锁定的控件。哟必须使用加载事件，或稍后的事件。

```
Private Sub Form_Load()
    For Each ctrl In Me.Controls
        ''For example:
        If ctrl.Tag = "Admin" And TheOption <> "Admin" Then
            ctrl.Locked = True
        End If
    Next
End Sub 
```

您可以轻松拥有多个标签，一个用于管理员用户或 OptionX，另一个用于其他用户或 OptionY。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:52:01.107

您可以使用 VBA 过程循环遍历表单的 Controls 集合并将每个控件的`.Locked`属性设置为`True`. 检查每个控件的`.ControlType`属性，并忽略标签和命令按钮等控件。IOW，`.Locked`只为有意义的那些类型的控件设置。

# svg - SVG填充不填充边界

> ID：15631426
> 
> 赞同：1
> 
> 时间：2013-03-26T07:17:03.883
> 
> 标签：svg

查看以下 SVG 文件：

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400">
<polygon points="10,10 10,390 390,390 10,10" style="fill:rgb(140,90,90)" />
<polygon points="10,10 390,390 390,10 10,10" style="fill:rgb(90,140,90)" />
</svg> 
```

如果你试试这个，这两个三角形有一个薄的灰色区域，将它们分开。我想摆脱这些，因为我有数百个小三角形，然后分隔线在该区域上作为网格可见，应该被三角形覆盖。我注意到，Mathematica 的 SVG 导出正是这个问题。

我试图用相同颜色和宽度 1 的笔触填充轮廓。但是，三角形过度填充。因此，外观取决于绘制三角形的顺序。

是否有任何干净的解决方案或至少可以改进此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T13:09:05.780

我对共享边的多边形之间的空间有同样的问题。这是两个共享一条边的三角形，具有不同的不透明度：

[http://jsfiddle.net/YfH9N/embedded/result/](http://jsfiddle.net/YfH9N/embedded/result/)

...当多边形具有更高的不透明度时，空间更明显。正如其他答案中所建议的那样，向多边形添加描边轮廓会有所帮助，但描边的正确宽度取决于多边形的不透明度。

使用恒定的 1px 笔划宽度：

[http://jsfiddle.net/LKQHf/embedded/result/](http://jsfiddle.net/LKQHf/embedded/result/)

使用笔画宽度 = polygon_alpha ^ 6：

[http://jsfiddle.net/ekwk3/2/embedded/result/](http://jsfiddle.net/ekwk3/2/embedded/result/)

...我仅凭经验使用此 Perl 脚本找到了笔画宽度的方程式，因此您可以自己尝试一下：

```
#!/usr/bin/perl

print "<?xml version=\"1.0\" standalone=\"no\"?>
<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">
<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1100\" height=\"100\">
";

for (my $alpha = 0; $alpha<=1; $alpha+=0.025) {
    my $alpha_str = sprintf("%.3f", $alpha);
    my $alpha_stroke = 1;#$alpha ** 6;
    my $alpha_stroke_str = sprintf("%.3f", $alpha_stroke);
    my $stroke_width = $alpha ** 6;
    my $stroke_width_str = sprintf("%.3fpx", $stroke_width);

    print "
    <g transform=\"translate(".($alpha*1000).",0)\">    
        <polygon points=\"20,10 25,49 6,40\" style=\"fill:rgb(255,100,0);fill-opacity:$alpha_str;stroke:rgb(255,100,0);stroke-width:$stroke_width_str;stroke-opacity:$alpha_stroke_str\" />
        <polygon points=\"20,10 25,49 40,4\" style=\"fill:rgb(255,100,0);fill-opacity:$alpha_str;stroke:rgb(255,100,0);stroke-width:$stroke_width_str;stroke-opacity:$alpha_stroke_str\" />
    </g>\n";
}

print "</svg>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:50:38.850

您看到的似乎是将矢量图形映射到位图设备的工件。为了补偿它，稍微扰动其中一个三角形，其量小于 1 个单位。

示例（代码见下文）：通过沿 x 轴移动 0.2 个单位来平移紫色多边形。

请注意，除了明显的因素外，结果的质量将取决于缩放系数。在给定的示例中，我可以看到分隔线在 chrome 25 中以 >=150% 的缩放级别消失。

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400">
<polygon points="10.2,10   10.2,390 390.2,390 10.2,10" style="fill:rgb(140,90,90)" />
<polygon points="  10,10    390,390   390,10    10,10" style="fill:rgb(90,140,90)" />
</svg> 
```

另一种选择可能是将一些三角形更改为五边形，这是一个相邻的梯形区域，覆盖三角形之间的分隔线（参见下面的代码），适用于缩放系数 > 67%。三角形及其在平面中的方向是否有任何限制（如一个直角，正交晶格上的边）？

```
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400">
<polygon points="10,10  10,390  390,390 390,389.6 10.4,10 10,10" style="fill:rgb(140,90,90)" />
<polygon points="10,10      390,390 390,10  10,10"               style="fill:rgb(90,140,90)" />
</svg> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:51:30.117

这是使用光栅化策略的结果，没有简单的解决方法。

一种解决方法是描边三角形，但描边非常非常细。例如，这里有一个 0.2px 的描边：

### 演示：http: [//jsfiddle.net/Qw2HL/](http://jsfiddle.net/Qw2HL/)

或者，您可以将您的图形加倍并在实际内容下方渲染描边版本。

### 演示：http: [//jsfiddle.net/Qw2HL/1/](http://jsfiddle.net/Qw2HL/1/)

```
<g id="underlay">
  <polygon class="t1" points="10,10 10,390 390,390 10,10" />
  <polygon class="t2" points="10,10 390,390 390,10 10,10" />
</g><g id="content">
  <polygon class="t1" points="10,10 10,390 390,390 10,10" />
  <polygon class="t2" points="10,10 390,390 390,10 10,10" />
</g> 
```

```
.t1 { fill:rgb(140,90,90); stroke:rgb(140,90,90) }
.t2 { fill:rgb(90,140,90); stroke:rgb(90,140,90) }
#underlay polygon { stroke-width:1px }
#content  polygon { stroke:none      } 
```

（如果您在用户代理（如可用的网络浏览器）中运行，则可以通过 JS 自动执行此操作。）

* * *

这个演示非常清楚地显示了这个问题。

### 问题：http: [//jsfiddle.net/tbCxT/](http://jsfiddle.net/tbCxT/)

```
<svg xmlns="http://www.w3.org/2000/svg">
  <g id="aligned">
    <polygon class="a" points="10,10 10,100 100,100, 100,10" />
    <polygon class="b" points="100,10 100,100 200,100, 200,10" />
  </g>
  <g id="shifted" transform="translate(0.5,110)">
    <polygon class="a" points="10,10 10,100 100,100, 100,10" />
    <polygon class="b" points="100,10 100,100 200,100, 200,10" />
  </g>
</svg> 
```

在这里，我们有两个垂直边缘正好在彼此的顶部。在第一种情况下，它们在像素网格上完全对齐。左侧形状完全填充左侧的所有像素，右侧形状完全填充右侧的所有像素，并且都不填充间隙。

然而，在第二种情况下，两个形状都位于像素边界之间。由于我们的形状与这些像素重叠了 50%，因此抗锯齿告诉我们，在这种情况下，我们应该将重叠的像素填充为 50% 的不透明度。所以左边的形状用 50% 的不透明度填充这个共享的像素列，然后右边的形状用另外 50% 的不透明度填充共享的列。

不幸的是，不透明度是通过乘法而不是加法建立的。一个像素的`rgba(0,0,0,0.5)`overtop`rgba(0,0,0,0.5)`产生`rgba(0,0,0,0.75)`，NOT `rgba(0,0,0,1)`。

这是问题的症结所在，它并不特定于 SVG。例如，请参阅：

*   [如何避免 HTML5 Canvas 中的多边形边缘拼接伪影？](https://stackoverflow.com/questions/4846911/how-can-i-avoid-polygon-edge-stitching-artifacts-in-html5-canvas)
*   [缩放后形状之间的间隙](https://stackoverflow.com/questions/5109074/gap-between-shapes-after-scaling)

当您将无限精确的矢量图像采样到有限像素网格时，信息会丢失。你需要破解它来解决它。

# vb.net - 在带有 BackgroundWorker 的 VB.Net 中使用 Console.Readkey 方法时出现问题

> ID：15631428
> 
> 赞同：0
> 
> 时间：2013-03-26T07:17:06.157
> 
> 标签：vb.net, console

我正在尝试使用 VB 控制台构建康威人生游戏的模拟（我很奇怪。）事情有点*像*在职的。该程序发生在四个具有单独布尔条件的循环中：暂停、完成、清除和退出，从最里面到最外面。控制一切的是一个 BackgroundWorker，它读取 Keypresses 并更改所有布尔变量。只有有时在使用 BackgroundWorker 和 Console.Readkey 时，我才会得到这个需要两次才能读取 Keypress 的东西。我在其他项目中也有过，我不知道为什么。当我暂停程序时，它显然在等待两个线程上的按键，但只有当我第一次按下它时，调试器才会提示我按键。这不是一个大问题，但无论如何，我想知道我是否可以做些什么来消除这个问题。

这是主要的子，不包括声明：

```
Do Until Quit = True 'This block repeats until Quit is true
        Start = False : Finish = False : Pause = False : Quit = False : Iterate = False : Clear = False
        Generation = 0 'This resets the Generation counter to 0
        ClearArray(Board) 'This resets a 2D boolean array to false.
        UpdateTitle(Generation) 'This updates the Console.Title to show the current generation.

        DrawBorder(Board, Offset, ConsoleColor.Cyan, BorderBlock) 'This draws an ASCII border around the grid.
        DrawBoard(Board, Offset) 'This draws the physical grid itself.

        WriteMessage(1, BoardDimensions(1) - 1, Offset) 'This writes a line below the grid prompting user input.
        ObtainInitialSetup(Board, Offset) 'This sub links to a bunch of other subs allowing the user to input an initial pattern.
        TransferArrayContents(Board, BoardMemory) 'This stores the contents of the pattern the user has entered into a memory array.
        Clear = False

        Do Until Clear = True 'This block repeats until Clear is true
            TransferArrayContents(BoardMemory, Board) 'This recalls the saved pattern from memory. If a user presses "Stop" then all generation
            'will cease and this is where the board is reset.
            DrawBoard(Board, Offset) 'The board is redrawn.
            WriteMessage(2, BoardDimensions(1) - 1, Offset)

            Do 'This block waits for the user to confirm before starting.
                Keypress = Console.ReadKey(True)
                If Keypress.Key = StartKey Then Start = True : Finish = False : Clear = False : Quit = False : Pause = False
                If Keypress.Key = QuitKey Then Finish = True : Clear = True : Quit = True
                If Keypress.Key = ClearKey Then Finish = True : Clear = True
                'The program does not start until a user presses Start, Clear or Quit.
            Loop Until Start = True Or Finish = True Or Clear = True Or Quit = True

            If Quit = False Then WriteMessage(3, BoardDimensions(1) - 1, Offset)
            If Finish = False Then If BK.IsBusy = False Then BK.RunWorkerAsync()
            'The backgroundworker is called so long as it isn't already running.

            Do Until Finish = True 'This block repeats until Stop is true
                Iterate = False 'The Iterate condition allows the Loop to go through once.
                UpdateTitle(Generation) 'This updates the title.
                Generate(Board, CoordList, Generation, Survivals, Births) 'This sub does the calculation across the whole Board and changes
                'the values in the board for the next generation.
                DrawBoard(Board, Offset) 'This draws the new board.
                CheckPause(Offset, BoardDimensions(1) - 1) 'This sub holds the loop if Pause is true by inserting a new Do Loop.
            Loop
        Loop
    Loop

    BK.CancelAsync() 
```

这是 BackgroundWorker 子：

```
Sub ReadBackgroundKey() Handles BK.DoWork
    Dim Keypress As ConsoleKeyInfo
    Do
        Keypress = Console.ReadKey(True)
        If Keypress.Key = StopKey Then 'Finish
            Quit = False
            Clear = False
            Finish = True
        ElseIf Keypress.Key = PauseKey Then 'Pause the generation.
            Quit = False
            Clear = False
            Finish = False
            Pause = Not Pause
        ElseIf Keypress.Key = QuitKey Then 'Quit the game.
            Quit = True
            Clear = True
            Finish = True
            Pause = False
        ElseIf Keypress.Key = StepKey Then 'Step a generation.
            Quit = False
            Clear = False
            Finish = False
            Pause = True
            Iterate = True
        ElseIf Keypress.Key = ClearKey Then 'Clear the board.
            Quit = False
            Clear = True
            Finish = True
            Pause = False
        End If
    Loop Until Quit = True Or Clear = True
End Sub 
```

另外，如果你发现任何值得尊敬的程序员都不应该做的可怕的事情，欢迎所有的批评——我才做 VB 半年，我还不是很好。

我感谢所有的想法和反馈:)。

编辑：另外，我不能在帖子的开头加上“你好”或任何愉快的问候，它会被抹去 oO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T08:08:11.947

好吧，在我看来你有“开始=假：完成=假：暂停=假：退出=假：迭代=假：清除=假”在第一个循环下，所以它周围的每个循环都会重置。

不太确定这是否会做到这一点，老实说，我经验不足，极度昏昏欲睡，并且渴望咖啡因。

编辑：做了一些乱七八糟的事情，我也遇到了同样的问题，也在一个循环中，会更多地研究它

对了，闲来无事，想出了一个不太方便的解决办法，让我测试一下再发帖，只是想让sue这不是运气。

是的，只是运气。由于我对控制台应用程序缺乏经验，我不太清楚这些命令可以肯定地说，但这可能是焦点问题。

# javascript - 用原型扩展基本实例？

> ID：15631432
> 
> 赞同：1
> 
> 时间：2013-03-26T07:17:20.160
> 
> 标签：javascript, prototypal-inheritance

情况就是这样；我有一个调用的基类（一个函数）`Car`和一些特定的子类，例如`truck`,`bus`或`partybus`.

我的脚本让用户创建一个`car`，然后由服务器随机更新那辆车到底是什么（无法​​预测它将是什么）。那时我已经有一个`car`带有所有者/里程信息的实例，但需要扩展创建的实例，`truck`以便`getTopSpeed`覆盖该方法并且我的`carInstance`成为`myExtendedInstance instanceof truck===true`

基类和子类函数/扩展的创建不是问题。这是代码；

```
function Car(){
}
Car.prototype.getTopSpeed=function(){
    return 100;
}

function Truck(){
    Truck.uber.constructor.call(this);
}
Truck.prototype.getTopSpeed=function(){
    return 20;
}
inherit.call(this, Truck, Car); 
```

继承人 Dustin Diaz/Ross Harmes 的继承功能

```
inherit=function _inherit(subClass, superClass){
    var F=function(){};
    F.prototype=superClass.prototype;
    subClass.prototype=new F();
    subClass.prototype.constructor=subClass;

    subClass.uber=superClass.prototype;
    if (superClass.prototype.constructor===Object.prototype.constructor){
        superClass.prototype.constructor=superClass;
    }
} 
```

问题是如何从*已经创建*的 baseClass 实例到工作子类，并以最佳方式返回到 baseClass 和另一个子类，而无需创建新的子类实例并破坏 baseClass 的实例。

我可以打电话`myExtendedInstance=inherit(carInstance, Truck)`吗？这不会造成内存泄漏或模糊我的原型链吗？如果没有，我怎样才能再次破坏原型链以返回基本的汽车实例？

我想我脑子里有个结。任何帮助将非常感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:31:31.053

你可以让它工作，但我认为这种方法（改变对象的类）很复杂。

我会创建一个 Car 类和另一个类 CarSettings 或类似的东西。

每个 Car 对象都将包含一个 CarSettings 对象，可以对其进行修改或完全替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:46:18.437

> 我可以打电话`myExtendedInstance=inherit(carInstance, Truck)`吗？这不会造成内存泄漏或模糊我的原型链吗？

不，它不会造成内存泄漏，`inherit`只是期望*构造函数*（类）作为参数而不是实例。

> 如果没有，我怎样才能再次破坏原型链以返回基本的汽车实例？

您不能修改现有对象的原型链 - 除非您使用非标准[`__proto__`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)（例如 IE 不支持）。

相反，您需要`myExtendedInstance = new Truck;`从旧的`carInstance`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:22:59.100

我看到这样的继承助手的问题是

继承的类是使用`new`和调用`constructor`无参数创建的，如果构造函数依赖于特定的参数，那么在继承过程`subClass.prototype=new F();` 中*（在我看来）* 可以很容易地破坏更复杂的构造函数。

所以为了解决这个问题，也能够做你的问题，~~我目前使用这样的东西：~~

抱歉，我误解了最初的问题并修改了我使用的帮助程序以支持扩展和缩减。

```
var base = (function baseConstructor() {
    var obj = {
        create: function instantiation(extend) {
            var instance, args = [].slice.call(arguments);
            if (this === base) {
                throw new SyntaxError("You can't create instances of base");
            } else if (!this.hasOwnProperty("initclosure")) {
                throw new SyntaxError("Cannot create instances without an constructor");
            } else if (this.singleton && this.instances.length !== 0) {
                throw new SyntaxError("You can't create more than one Instance of a Singleton Class");
            } else {
                if (!extend._class || !extend._class.isPrototypeOf(this)) {
                    instance = Object.create(this.pub);
                    this.instances.push(instance);
                } else {
                    args = args.slice(1);
                    extend._class.remove(extend);
                    instance = this.extend(extend);
                }
                this.init.apply(instance, args);
                instance.onCreate();
                return instance;
            }
        },
        extend: function (instance) {
            if (!instance._class.isPrototypeOf(this)) {
                return;
            }
            var extended = Object.create(this.pub);
            for (var propInst in instance) {
                if (instance.hasOwnProperty(propInst)) {
                    extended[propInst] = instance[propInst];
                }
            }
            instance._class.remove(instance);
            this.instances.push(extended);
            return extended;
        },
        reduce: function (instance) {
            if (!instance.instanceOf(this)) {
                return;
            }
            var reduced = Object.create(this.pub);
            for (var propRed in instance) {
                if (instance.hasOwnProperty(propRed)) {
                    reduced[propRed] = instance[propRed];
                }
            }
            instance._class.remove(instance);
            this.instances.push(reduced);
            return reduced;
        },
        remove: function (instance) {
            if (instance.instanceOf(this)) {
                var removed = this.instances.splice(this.instances.indexOf(instance), 1)[0];
                instance.onRemove();
                return removed;
            }
        },
        inherit: function inheritation(specsOpt) {
            specsOpt = specsOpt || {};
            applyDefaults(specsOpt, {
                singleton: false,
                anonymous: false
            });
            var sub = Object.create(this);
            sub.pub = Object.create(this.pub);
            sub.pub.proto = this.pub;
            sub.pub._class = sub;
            sub.instances = [];
            sub.anonymous = specsOpt.anonymous;
            sub.sup = this;
            if (specsOpt.singleton) {
                sub.singleton = specsOpt.singleton;
                sub.getSingleton = getSingleton;
                protect.call(sub, {
                    singleton: {
                        writable: false,
                        configurable: false,
                        enumerable: false
                    },
                    getSingleton: {
                        writable: false,
                        configurable: false
                    }
                });
            }
            return sub;
        },
        initclosure: function Base() {},
        instances: [],
        pub: {
            instanceOf: function (obj) {
                if (!obj || !obj.pub) {
                    return this.className;
                }
                return obj.pub.isPrototypeOf(this);
            },
            onRemove: function () {},
            onCreate: function () {},
            "_class": obj
        }
    };
    /* Helper Functions. --- Use function expressions instead of declarations to get JSHint/Lint strict mode violations
     *
     * TODO: Maybe add an obj.helper Propertie with usefull functions
     */
    var applyDefaults = function (target, obj) {
        for (var prop in obj) {
            if (obj.hasOwnProperty(prop)) {
                target[prop] = target[prop] || obj[prop];
            }
        }
    };
    var getSingleton = function () { //To get past the strict violation
        return this.instances[0];
    };
    var protect = function (props, desc) { //Maybe change it a little
        for (var prop in props) {
            if (props.hasOwnProperty) {
                Object.defineProperty(this, prop, props[prop] || desc);
            }
        }
        return this;
    };
    /*  End Helpers
     * 
     *  Protecting
     */
    Object.defineProperty(obj, "init", {
        set: function (fn) {
            if (typeof fn !== "function") {
                throw new Error("Expected typeof init to be 'function'");
            } else if (Boolean(fn.name) === this.anonymous) {
                try {
                    throw new Error("Expected the constructor " + (!this.anonymous ? "not " : "") + "to be Anonymous");
                } catch (e) {
                    console.error(e.stack);
                }
            }
            if (!this.hasOwnProperty("initclosure")) {
                this.initclosure = fn;
                this.pub.constructor = this.init;
                this.pub.className = fn.name;
                protect.call(this.pub, {
                    constructor: false,
                    className: false
                }, {
                    enumerable: false
                });
            }
        },
        get: function () {
            var that = this;
            var init = function init() {
                if (that.pub.isPrototypeOf(this)) {
                    that.initclosure.apply(this, arguments);
                } else {
                    throw new Error("init can't be called directly");
                }
            };
            init.toString = function () {
                return that.initclosure.toString();
            };
            return init;
        }
    });
    obj.toString = function () {
        return "[class " + (this.initclosure.name || "Class") + "]";
    };
    obj.pub.toString = function () {
        return "[instance " + (this.className || "Anonymous") + "]";
    };
    protect.call(obj, {
        create: false,
        inherit: false,
        toString: false,
        onRemove: {
            enumerable: false
        },
        onCreate: {
            enumerable: false
        },
        initclosure: {
            enumerable: false
        }
    }, {
        writable: false,
        configurable: false
    });
    protect.call(obj.pub, {
        instanceOf: false,
        toString: false,
        "_class": {
            enumerable: false
        }
    }, {
        writable: false,
        configurable: false,
        enumerable: false
    });
    return obj;
})(); 
```

*注意：这依赖`Object.create`于 ECMAScript 5 中引入的内容，因此旧版浏览器不支持*

* * *

给定继承帮助器，让我们创建一些“类”

```
var Car = base.inherit();
Car.pub.getTopSpeed = function () {
    return 100;
};
Car.init = function ClassCar(model) {
    this.model = model || this.model || "";
};
Car.pub.type = "car"; 
```

现在我们有了一个可继承的超类，让我们`Truck`继承自`Car`

```
var Truck = Car.inherit();
Truck.pub.getTopSpeed = function () {
    return 20;
};
Truck.pub.type = "truck";
Truck.init = function ClassTruck(model, color) {
    Truck.sup.init.apply(this, [].slice.call(arguments));
    this.color = color;
}; 
```

然后让我们创建一个实例`Car`

```
var myCar = Car.create("Porsche");
console.log(myCar.getTopSpeed(), myCar.className); //100, ClassCar 
```

现在，如果我对您的理解正确，您希望将现有的 Instance扩展`myCar`为. *如果是这样，让我们​​这样做*`Car``Truck`

 *```
var myExtendedTruck = Truck.extend(myCar);
console.log(myExtendedTruck.getTopSpeed(), myExtendedTruck.className); //20, ClassTruck
console.log(myExtendedTruck.instanceOf(Truck)); //true 
```

这只是设置扩展原型链将实例变量复制到新的卡车实例。所以`Car`实例现在是一个`Truck`实例

或者，如果您也想使用构造函数。 `create`在传递超类的实例时也可以使用。
然后它被扩展和初始化。

```
var myConstructedExtendedTruck = Truck.create(myCar, myCar.model, "Yellow");
console.log(myConstructedExtendedTruck.getTopSpeed(), myConstructedExtendedTruck.model, myConstructedExtendedTruck.color); //20 , Porsche , Yellow 
```

现在我们有一个扩展`Car`实例，它现在是构造函数的实例`Truck`并由构造函数正确`Trucks`构造。

现在，如果我做对了，您也希望能够回到超类实例。

```
var myReducedCar = Car.reduce(myExtendedTruck);
console.log(myReducedCar.getTopSpeed(), myReducedCar.className); //100, ClassCar
console.log(myReducedCar.instanceOf(Truck)); //false 
```

[这是一个关于 JSBin](http://jsbin.com/opigom/1/edit)的示例，可以稍微摆弄一下

*编辑说明：修复代码以正确移动 Classes`instances`数组中的实例**

# c# - 如何在实体框架中向 ObservableCollection 添加数据？

> ID：15631433
> 
> 赞同：0
> 
> 时间：2013-03-26T07:17:24.067
> 
> 标签：c#, entity-framework, exception-handling, observablecollection

我的数据库中有一个名为 Impacts 的表，它有两个来自 Component Table 的名为 cmpt_name 和 cmpt_reference 的 foring 键。

我想将一些数据添加到我使用 Impact 表创建的 ObservableCollection 中。但我不能向它添加 cmpt_name 和 cmpt_reference 吗？

```
public ObservableCollection<Impact> ModelListe { get; set; }

private Impact model;

public Project_Questions_Window()
{
    InitializeComponent();

    ModelListe = new ObservableCollection<Impact>();
    DataContext = this;
}

public void addData()
{
     model = new Impact();
     **model.Component.cmpt_name = comboBoxComponents.Text;**
     model.impt_name = textBoxQuestion.Text;
     **model.Component.cmpt_reference = comboBoxComponents.SelectedValuePath;**
     ModelListe.Add(model);
} 
```

我在突出显示的行中出现错误，它说：

> 你调用的对象是空的。

谁能告诉我如何解决它？我使用实体模型数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:40:48.487

当你新建一个`Impact`实例时，我很确定它还不包含 a `Component`。`model.Component`这里的空对象也是如此。

我不知道您的业务逻辑，但我认为补救措施是`Component`从数据库中获取 s 并使用这些预先存在的组件填充组合框。现在，当您创建一个新组件时`Impact`，您无需设置其组件的名称，而是设置其`Compenent`属性：

```
model.Component = comboBoxComponents.SelectedValue; 
```

# java - pom中缺少artifactId，查找父级时出错？

> ID：15631436
> 
> 赞同：2
> 
> 时间：2013-03-26T07:17:25.667
> 
> 标签：java, maven, pom.xml

我是 Java 新手。我想从文档“[实现一个简单的 OWS 服务](http://docs.geoserver.org/latest/en/developer/programming-guide/ows-services/implementing.html)”中创建一个 Web 服务，但是在 pom 文件中有两个错误：

> 缺少工件 org.geoserver:main:jar:2.2.0

和

> 项目构建错误：Non-resolvable parent POM: Failure to find org.geoserver:community:pom:2.2.0 in [http://repo.opengeo.org](http://repo.opengeo.org)缓存在本地仓库中，直到更新间隔才会重新尝试解析opengeo 的时间已过或强制更新，并且“parent.relativePath”指向错误的本地 POM

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:18:16.357

查看错误消息中的 opengeo Maven 存储库后，看起来该工件的 2.2.0 版本不存在。它也没有 1.7.0。但我看到其他版本，如 2.2.1、2.2.2、2.2.3、2.2.4、2.2.5。您可能应该使用它们。查看存储库[主和](http://repo.opengeo.org/org/geoserver/main/)[社区](http://repo.opengeo.org/org/geoserver/community/)并选择您想要的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:25:43.137

如果我查看 MvnRepository [Site](http://mvnrepository.com/artifact/org.geoserver/main)，我发现**org.geoserver.main 最高**只有 1.7.0 版本，您可能应该使用该版本。[社区](http://mvnrepository.com/artifact/org.geoserver/community)也一样。

这是以防万一的依赖项。

```
<dependency>
    <groupId>org.geoserver</groupId>
    <artifactId>community</artifactId>
    <version>1.7.0</version>
</dependency>
<dependency>
    <groupId>org.geoserver</groupId>
    <artifactId>main</artifactId>
    <version>1.7.0</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T03:37:56.083

我在学习文档“实现简单的 OWS 服务”时遇到了同样的问题，感谢 Vikram，我将“2.2.0”编辑为“2.2.5”，然后右键单击项目 Maven4MyEclipse->Update Dependencies 和 Update Project Configuration ，pom.xml中的错误消失，然后mvn clean install，就ok了！所以“看看存储库主和社区，然后选择你想要的版本。”</p>

# latex - ST2 插件——请提供有关创建事件侦听器的建议

> ID：15631437
> 
> 赞同：1
> 
> 时间：2013-03-26T07:17:25.837
> 
> 标签：latex, sublimetext2, sublimetext, pdflatex

我正在使用 OSX TexLive (MacTeX)，它不支持`-aux-directory`or的 latexmk 选项`aux_dir`。没有将辅助文件发送到其他地方的内置方法，而是将新的 *.pdf 文件保存在 *.tex 文件的工作目录中。因此，我既可以清理工作目录，也可以将 *.pdf 文件从一个`-output-directory`备份复制到工作目录。

我正在寻找一些建议，关于如何最好地创建一个事件侦听器，该事件侦听器将触发以下任一 Sublime Text 2 插件的第二 (2) 阶段。第一阶段 (1) 是构建一个乳胶文档并创建一个 *.pdf（这需要时间）。第二阶段 (2) 是清理工作目录（使用带有 little 选项的内置 latexmk 脚本`-c`）；或者，将 *.pdf 从 复制`-output-directory`到包含 *.tex 文件的工作目录。两个插件都可以工作，并且第二阶段 (2) 配置了 10 秒的 lambda 超时，以便latexmk 构建过程有机会在进入第二阶段 (2) 之前完成。[该`latexmk`命令在此处有效（没有绝对路径），因为`$PATH`已使用不同的插件设置。]

有时，由于 *.tex 文档中的错误（例如，拼写错误），LaTeX 文档无法正确构建。当构建过程失败时，没有必要清理或复制 *.pdf —— 即，*.pdf 甚至可能还没有创建，或者它会包含错误。

**问题的核心是`event`正确构建 LaTeX 文档时会发生什么？并且，构建失败时究竟`event`发生了什么？**

目标是在成功完成 LaTeX 构建后自动激活任一插件的第二 (2) 阶段。如果构建过程失败，则不要继续进行第二阶段 (2) -- 并显示错误消息 --`Ooops! The build process failed -- please check the *.tex document for errors.`

任何帮助将不胜感激。

```
import sublime, sublime_plugin
import os, os.path, shutil

class LatexmkWorkingDirectory(sublime_plugin.TextCommand):
   def run(self, edit):
      self.view.window().run_command('exec', {'cmd': ["latexmk", "-r", "/Users/HOME/Library/Application Support/Sublime Text 2/Packages/User/0.latexmkrc/.latexmkrc", self.view.file_name() ]})
      sublime.set_timeout(lambda: self.view.window().run_command('exec', {'cmd': ["latexmk", "-c", "-r", "/Users/HOME/Library/Application Support/Sublime Text 2/Packages/User/0.latexmkrc/.latexmkrc", self.view.file_name() ]}), 10000)

class LatexmkOutputDirectory(sublime_plugin.TextCommand):
   def run(self, edit):
      path, file = os.path.split(self.view.file_name())
      prefix, suffix = os.path.splitext(file)
      self.view.window().run_command('exec', {'cmd': ["latexmk", "-r", "/Users/HOME/Library/Application Support/Sublime Text 2/Packages/User/0.latexmkrc/.latexmkrc", "-output-directory=/tmp", self.view.file_name() ]})
      sublime.set_timeout(lambda: shutil.copyfile('/tmp/' + prefix + '.pdf', path + '/' + prefix + '.pdf'), 10000) 
```

* * *

虽然还不是提议的事件侦听器插件的解决方案，但以下两行代码（当添加到`the very end`LaTexTools makePDF.py 时，将在成功完成构建 *.pdf 文件后自动清理。不需要 lambda 超时。注意: 需要将两行代码缩进到与`self.window.active_view().run_command("jump_to_pdf", {"from_keybinding": True})`.

```
from subprocess import call
call(["latexmk", "-c", "-r", "/Users/HOME/Library/Application Support/Sublime Text 2/Packages/User/0.latexmkrc/.latexmkrc", self.file_name]) 
```

* * *

在 OSX 上安装 MacTeX 会在此处安装 latexmk 脚本（4.31 版） `/usr/local/texlive/2012/texmf-dist/scripts/latexmk/latexmk.pl`：. 至于那个 perl 脚本，可以在 5511 行附近添加一个清理命令，就在`print "$My_name: All targets (@dests) are up-to-date\n";`. [注：latexmk 当前版本为 4.35。限制在于TexLive `-aux-directory`（不是 latexmk）——即，latexmk 依赖于 TexLive 来完成所有的魔法。]

已知问题：将latexmk.pl 脚本硬连接到清理将阻止LaTexTools 插件发挥其魔力，因为它依赖于*.log 文件。如果该 *.log 文件很快被清理，那么魔法就被打破了。因此，如果使用 LaTexTools，我们可以硬连线`makePDF.py`. 或者，我们可以硬连线 latexmk.pl 而不使用 LaTexTools。

注意：看起来latexmk.pl（v.4.31）的第5510行可能**`the event`**在python控制台中运行，可以使用Sublime插件进行侦听，以便无需修改latexmk.pl脚本就可以自动实现清理. 需要做进一步的研究，看看插件是否可以监听控制台输出作为后续命令行的触发事件。如果依赖 LaTeXTools 插件，则可能需要依赖 *.log 文件和/或该插件的输出`the event`（而不是第 5510 行）。

```
 print "$My_name: All targets (@dests) are up-to-date\n";
        print "$My_name: Cleanup (@dests) -- hardwired @ lines 5511 to 5513\n";
        system("latexmk", "-r", "/Users/HOME/Library/Application Support/Sublime Text 2/Packages/User/0.latexmkrc/.latexmkrc", "-c", @dests);
        print "$My_name: Cleanup (@dests) -- complete!\n"; 
```

至于版本 4.35，行是 5676 到 5678。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:25:51.180

与事件侦听器相比，完成此项目的更好方法是使用 subprocess.check_call 和调用。bash 等价于`&&`.

[Python 等价于 Bash：`latexmk file.tex && latexmk -c file.tex`](https://stackoverflow.com/questions/15715557/python-equivalent-to-bash-latexmk-file-tex-latexmk-c-file-tex)

特别感谢 John Collins 博士。（latexmk 的作者）。

[https://github.com/lawlist/LaTexTools-Unofficial-Modification](https://github.com/lawlist/LaTexTools-Unofficial-Modification)

[https://github.com/lawlist/ST2-plugin-latexmk-save-build-clean](https://github.com/lawlist/ST2-plugin-latexmk-save-build-clean)

# javascript - 在 HTML5 中将地图标记添加到平面图

> ID：15631438
> 
> 赞同：-3
> 
> 时间：2013-03-26T07:17:26.473
> 
> 标签：javascript, jquery, html

我有一个建筑平面图图像，我打算用它把它作为 2D 图像放在画布上。这个我没有问题。

在某个地方，比如前门，我想放置某种标记（类似于谷歌地图标记，或蓝色/红色别针）以将其标记为传感器（即运动等）。如果我单击标记，它将显示该特定传感器的信息。我该怎么做呢？当我尝试对此进行谷歌搜索时，我似乎无法找到正确的术语来获得我想要的结果。我希望你们中的任何人都可以指出我在这方面的正确方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:28:54.413

好的，首先，我什至不知道图像拼贴这个术语，但是在查看了代达罗斯建议的 Minecraft 概览后，看起来我必须创建图像拼贴。这可以通过使用可从[此处](http://www.maptiler.org/)获得的 MapTiler 软件来完成。在选项中，我只选择适合我的“基于图像的瓷砖”。

之后，我编辑了使用 OpenLayer API 生成的 HTML 文件，以显示缩放和标记及其[弹出窗口](http://dev.openlayers.org/docs/files/OpenLayers/Popup-js.html)。就是这样了。

# wix - 从已安装的文件中，如何找到哪个 msi 会安装该文件？

> ID：15631439
> 
> 赞同：1
> 
> 时间：2013-03-26T07:17:26.727
> 
> 标签：wix, windows-installer, wix3.5, orca

我的经理给了我安装 msi 的机器上的配置文件列表。

他让我找出他们来自哪个微星。（因为我们需要为那个 msi 写一些逻辑）。

如何查找此文件来自哪个 msi？

手动打开 orca 并搜索它很困难，因为 msi 的数量更多。

还有其他替代方法吗？我们正在使用 Wix 创建 msi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:55:43.303

我将获取 .config 文件的 MD5 哈希，然后查询 .msis 中的 MsiFileHash 表，直到找到匹配的哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:03:50.227

不能保证 MSI 安装了该文件。也就是说，我经常使用的一个快速技巧是 ms-dos findstr 命令

在安装了配置文件的机器上：

```
CD %WINDIR%\Installer
FINDSTR -i -m dark.exe *.msi *.msi 
```

这将对字符串 dark.exe 的所有 MSI 文件进行不区分大小写的搜索。然后使用 ORCA 检查生成的 MSI，以查看命中是否准确以及它是什么产品。提醒：MSI 名称将是一些简短的十六进制哈希，因为这些是剥离/缓存的 MSI，而不是原始 MSI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:41:13.847

如果您可以在机器上运行代码，那么使用 Windows Installer API 的实用程序将为您提供答案。这样的实用程序很容易用 VC++ 编写。

Windows Installer API 的起点是[MsiEnumComponents](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370097%28v=vs.85%29.aspx)，它将为您提供系统上安装的每个组件的组件代码。从那里，`MsiEnumClients`将为您提供包含特定组件的每个产品的产品代码。然后你可以使用`MsiGetComponentPath`来获取组件的路径。如果它是您感兴趣的路径，则使用[MsiGetProductInfoEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370131%28v=vs.85%29.aspx)查找安装它的产品，例如`INSTALLPROPERTY_INSTALLSOURCE`和`INSTALLPROPERTY_PACKAGENAME.`

这听起来很复杂，但事实并非如此。

# python-2.7 - 项目列表的烧瓶部分视图

> ID：15631443
> 
> 赞同：2
> 
> 时间：2013-03-26T07:17:42.353
> 
> 标签：python-2.7, flask, jinja2

如果在网站的大多数页面上我都有从数据库加载的类别或最近文章的列表 - 我如何避免使用 flask 和 jinja2 重复代码？

现在的方式是，我有一个 html 文件，其中包括：

```
{% include '/root/latest_articles.html' %} 
```

然后每个视图都必须将参数（文章列表）传递给模板。我想避免这种情况。

在 Flask 中实现这一目标的最佳方法是什么？

谢谢。

**编辑**

“附加模板上下文”将起作用..我可以导出一个从数据库加载数据并在“latest_articles.html”模板中访问它的函数。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:47:55.160

您可以添加[其他模板上下文](http://flask.pocoo.org/docs/templating/#context-processors)：

```
@app.context_processor
def additional_context():
    return {
        'content': get_page_content_context(request.endpoint, g.language),
        'hot_links': get_hot_links(),
    } 
```

对于模板代码，您可以使用[宏](http://jinja.pocoo.org/docs/templates/#macros)或[包含](http://jinja.pocoo.org/docs/templates/#include).

**升级版：**

首先尝试使用[模板继承](http://jinja.pocoo.org/docs/templates/#template-inheritance)并将您的类别列表或最近的文章放在基本模板中，如果您的页面允许这样做。

您也可以使用 `@app.context_processor' 使模板代码可变，但我认为这不是一个好主意：

```
@app.context_processor
def additional_context():
    return {
        'recent_articles_markup': do_mark_safe(render_template(
            'root/latest_articles.html', articles=get_recent_articles()),
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:08:39.277

对于这类东西，我通常的解决方案是使用准备函数进行类继承，请参阅我在其他线程中的回答：

不同的问题，相同的解决方案。 [Flask 中的动态导航](https://stackoverflow.com/questions/15501518/dynamic-navigation-in-flask/15525226#15525226)

# javascript - 在文本框中输入任何新值时光标位置正在更改

> ID：15631444
> 
> 赞同：0
> 
> 时间：2013-03-26T07:17:43.007
> 
> 标签：javascript, jsp

定义：我有一个最大长度为 11 个字符的文本框。如果我尝试在该文本框的中间输入值，光标位置会自动移动到结束位置。你能帮我设置光标位置吗？

注意：函数用于文本框只允许字母数字值。

这里的代码

```
<!DOCTYPE html>
<html>
<body>
<script>
//function for alphanumberic validation
function alphaNumericOnly(i){
if(i.value != null) 
    {
        i.value = i.value.replace(/[^\w]+/g, ''); 

    }
    }
</script>
<input type="text" maxlength="11" id="policyOrBondNum" onkeyup="alphaNumericOnly(this);" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:21:24.670

尝试-

```
<input type="text" maxlength="11" id="policyOrBondNum" onkeyup="alphaNumericOnly(this);" style="text-align: right; padding-right: 50px;"/> 
```

# c# - 写入文件时的 Json.net 异步

> ID：15631448
> 
> 赞同：11
> 
> 时间：2013-03-26T07:17:53.503
> 
> 标签：c#, windows-runtime, json.net, c#-5.0, winrt-async

Json.net 具有用于将对象转换为 json 的异步函数，例如：

```
json = await JsonConvert.DeserializeObjectAsync<T> 
```

但是，当我想将对象写入 json 文件时，直接使用文件 Stream.js 似乎更好。

所以我认为它应该是这样的：

```
 var fileStream = await file.OpenAsync(FileAccessMode.ReadWrite);

    using (IOutputStream outputStream = fileStream.GetOutputStreamAt(0))
    {
        using (StreamWriter sw = new StreamWriter(fileStream.AsStreamForWrite()))
        {
            using (JsonWriter jw = new JsonTextWriter(sw))
            {
                jw.Formatting = Formatting.Indented;

                JsonSerializer serializer = new JsonSerializer();
                serializer.Serialize(jw, obj);
            }
        } 
```

但是在 JsonSerzializer 对象上我找不到异步方法。另外我认为 IO 操作不应该放在自己的线程中。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T21:55:14.980

Json.NET 并不真正支持异步反序列化。上的异步方法`JsonConvert`只是对在另一个线程上运行它们的同步方法的包装（[这正是库不应该做的](http://web.archive.org/web/20160206081501/http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)）。

我认为这里最好的方法是在另一个线程上运行文件访问代码。这不会为您提供`async`（它会浪费线程）的全部优势，但不会阻塞 UI 线程。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-09T08:36:16.027

另请参阅此代码，它使用正确的异步方式（例如，它不会创建大字节数组以避免 LOH 内存分配，它不会等待 IO 操作完成）。

```
// create this in the constructor, stream manages can be reused
// see details in this answer https://stackoverflow.com/a/42599288/185498
var streamManager = new RecyclableMemoryStreamManager();

using (var file = File.Open(destination, FileMode.Create))
{
    using (var memoryStream = streamManager.GetStream()) // RecyclableMemoryStream will be returned, it inherits MemoryStream, however prevents data allocation into the LOH
    {
        using (var writer = new StreamWriter(memoryStream))
        {
            var serializer = JsonSerializer.CreateDefault();

            serializer.Serialize(writer, data);

            await writer.FlushAsync().ConfigureAwait(false);

            memoryStream.Seek(0, SeekOrigin.Begin);

            await memoryStream.CopyToAsync(file).ConfigureAwait(false);
        }
    }

    await file.FlushAsync().ConfigureAwait(false);
} 
```

整个文件：[https ://github.com/imanushin/AsyncIOComparison/blob/0e2527d5c00c2465e8fd2617ed8bcb1abb529436/IntermediateData/FileNames.cs](https://github.com/imanushin/AsyncIOComparison/blob/0e2527d5c00c2465e8fd2617ed8bcb1abb529436/IntermediateData/FileNames.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-28T12:10:48.063

JSON.NET/Newtonsoft.JSON 无法做到这一点。
但是，您可以改用 System.Text.Json。
要获得与 JSON.NET 相同的行为，只需将 IncludeFields 和 PropertyNameCaseInsensitive 设置为 true。

```
public static class JsonExtensions
{
    private static readonly System.Text.Json.JsonSerializerOptions _jsonOptions = 
        new System.Text.Json.JsonSerializerOptions
        {
            PropertyNameCaseInsensitive = true,
            IncludeFields = true
        }
    ;

    public static string ToJson<T>(this T obj)
    {
        return System.Text.Json.JsonSerializer.Serialize<T>(obj, _jsonOptions);
    }

    public static T FromJson<T>(this string json)
    {
        return System.Text.Json.JsonSerializer.Deserialize<T>(json, _jsonOptions);
    }

    public static async System.Threading.Tasks.Task ToJsonAsync<T>(this T obj, System.IO.Stream stream)
    {
        await System.Text.Json.JsonSerializer.SerializeAsync(stream, obj, typeof(T), _jsonOptions);
    }

    public static async System.Threading.Tasks.Task<T> FromJsonAsync<T>(this System.IO.Stream stream)
    {
        return await System.Text.Json.JsonSerializer.DeserializeAsync<T>(stream, _jsonOptions);
    }

} 
```

你去吧。

此外，如果您想异步序列化为字符串：

```
public static async System.Threading.Tasks.Task<string> ToJsonAsync<T>(this T obj)
{
    string ret = null;

    Microsoft.IO.RecyclableMemoryStreamManager streamManager = 
        new Microsoft.IO.RecyclableMemoryStreamManager();

    using (System.IO.MemoryStream ms = streamManager.GetStream())
    {
        await System.Text.Json.JsonSerializer.SerializeAsync(ms, obj, typeof(T), _jsonOptions);
        ms.Position = 0;

        using (System.IO.TextReader sr = new System.IO.StreamReader(ms, System.Text.Encoding.UTF8))
        {
            ret = await sr.ReadToEndAsync();
        }

    }

    return ret;
} 
```

# scala - 基于触摸的移动 web 应用的 Play 和 Sencha 集成

> ID：15631451
> 
> 赞同：0
> 
> 时间：2013-03-26T07:18:02.880
> 
> 标签：scala, playframework, akka, spray

我需要开发应该与任何基于移动/触摸的设备（iphone、android 等）兼容的移动 webapp。

我真的很喜欢 Play 的功能，它几乎可以满足我们的所有需求，我们计划将 Play 与 Scala 一起使用。

我有以下疑问，请您帮我解决这些问题：

1.  Play 可以与 Sencha 框架集成吗？，因为我需要使用 sencha 作为我的 View 层。

2.  我选择 Play 主要是为了支持出色的垂直可扩展性，我应该更喜欢哪个 Web 服务器，内置 JBoss Netty 或任何基于 Akka 的 Web 服务器，Spray 等。我在这里有点困惑，因为对我来说都是新名字:)

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:35:42.590

1.  PlayFramework 是一种服务器端解决方案，可与**任何**客户端框架一起使用。所以是的。

2.  要获得更好的可扩展性，请使用内置服务器。您还可以使用 tomcat 或任何 servlet 容器，但尚不支持所有功能。而 Spray 是一种不同的解决方案，与 Play 不兼容。

# sql-server - SQL Server 2005 Express：分组依据

> ID：15631457
> 
> 赞同：0
> 
> 时间：2013-03-26T07:18:23.933
> 
> 标签：sql-server, group-by, aggregate-functions, sql-server-2005-express

经销商有各种销售产品的渠道。产品基于类别。

网点可以从分销商和其他网点接收产品（转移）。每天的期初余额（数量），收货（数量），转入（数量），转出（数量），销售（数量），期末余额（数量）都维护在一个表格中`txnTransactions`。表结构如下：

```
Create table txnTransactions
(
  dDate datetime,
  iCategoryID int (FK),
  iProduct ID int (FK),
  iOutletID int (FK),
  iOpeningBalance int,
  iReceipt int,
  iTranIN int,
  iTranOut int,
  iSale int,
  iClosingBalance int
) 
```

将向分销商显示在指定期间（例如 2013 年 1 月 3 日至 2013 年 3 月 31 日）内所有网点的总交易（产品方面）的报告（我使用 0 作为值来检查如果是所有网点或特定网点）。

在此报告中，所有产品的期初余额将仅在开始日（例如 01/03/2013）检索，然后将显示所有其他字段（产品）的总和（总和）。

在临时表的帮助下，我也实现了同样的目标。但是查询需要很长时间，导致超时。如果我使用简单分组，我需要对期初余额使用聚合函数，这会导致错误数据。

```
Select 
   sum(iOpeningBalance), sum(iReceipt), sum(TranIN), sum(TranOut), sum(Sale) 
from 
   txnTransactions 
where 
   datediff(d, dDate, @startDate) <= 0 
   and datediff(d, dDate, @endDate) >= 0
group by 
   iProductID 
```

不想用`sum(iOpeningBalance)`...

示例输出如下：

```
ProductID OpeningBalance Receipts TranIN TranOut Sale Total/Balance
1         10             100      40     50      50   50
2         35             165      50     100     50   100
3         3              147      10     60      10   90 
```

期初余额是开始日期，所有其他字段是开始日期和结束日期（程序的输入参数）提供的持续时间的总和。

```
Total/Balance is: openingbalance + sum(receipts) + sum(TranIn) - sum(TranOut) - sum(Sale) 
```

需要帮助来优化查询。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:24:52.943

`CASE`如果日期是一个月的第一天，您可以将表达式与条件一起使用`dDate = DATEADD(month, DATEDIFF(month, 0, dDate), 0)`：

```
SELECT
  SUM(CASE 
        WHEN CAST(dDate AS DATE) = DATEADD(month, 
                                           DATEDIFF(month, 0, dDate), 
                                           0) THEN iOpeningBalance
        ELSE 0 END) AS iOpeningBalance, 
  SUM(iReceipt), 
  SUM(TranIN), 
  SUM(TranOut), 
  SUM(Sale) 
FROM txnTransactions 
WHERE DATEDIFF(d, dDate, @startDate) <= 0 
  AND DATEDIFF(d, dDate, @endDate) >= 0
GROUP BY iProductID; 
```

* * *

## 编辑

尝试这个：

```
WITH CTE
AS
(
  SELECT
    ProductID,
    SUM(ReceiptS) TotalReceiptS, 
    SUM(TranIN) TotalTranIN, 
    SUM(TranOut) TotalTranOut, 
    SUM(Sale) TotalSale
  FROM txnTransactions 
  GROUP BY ProductID
)
SELECT
  c.*,
  [Total/Balance] = (SELECT TOP 1 OpeningBalance
                     FROM txnTransactions AS t
                     WHERE t.ProductID = c.ProductID
                     AND CAST(t.dDate AS DATE) = DATEADD(month,
                                                         DATEDIFF(month, 0, t.dDate), 
                                                         0)) + 

                     TotalReceiptS + 
                     TotalTranIN - 
                     TotalTranOut - 
                     TotalSale  
FROM CTE AS c; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/2efb2/3)

# javascript - 如果根元素具有名称空间`xmlns`，则不起作用

> ID：15631473
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:19:16.390
> 
> 标签：javascript, html, xml, xslt, xpath

这是我的 xml 文件：-

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<results xmlns="http://gisgraphy.com">
    <result>
        <distance>1071.59873299109</distance>
        <name>Irungattukottai</name>
        <adm1Code>25</adm1Code>
        <adm1Name>State of Tamil Nadu</adm1Name>
        <asciiName>Irungattukottai</asciiName>
        <countryCode>IN</countryCode>
        <featureClass>P</featureClass>
        <featureCode>PPL</featureCode>
        <featureId>1269687</featureId>
        <gtopo30>47</gtopo30>
        <population>0</population>
        <timezone>Asia/Kolkata</timezone>
        <lat>12.996390342712402</lat>
        <lng>79.99082946777344</lng>
        <placeType>City</placeType>
        <oneWay>false</oneWay>
        <length>0.0</length>
        <google_map_url>http://maps.google.com/maps?f=q&amp;amp;ie=UTF-8&amp;amp;iwloc=addr&amp;amp;om=1&amp;amp;z=12&amp;amp;q=Irungattukottai&amp;amp;ll=13.026390342712402,79.99082946777344</google_map_url>
        <yahoo_map_url>http://maps.yahoo.com/broadband?mag=6&amp;amp;mvt=m&amp;amp;lon=79.99082946777344&amp;amp;lat=12.996390342712402</yahoo_map_url>
        <country_flag_url>/images/flags/IN.png</country_flag_url>
    </result>
    <result>
        <distance>1892.33578431928</distance>
        <name>Valapuram</name>
        <adm1Code>25</adm1Code>
        <adm1Name>State of Tamil Nadu</adm1Name>
        <asciiName>Valapuram</asciiName>
        <countryCode>IN</countryCode>
        <featureClass>P</featureClass>
        <featureCode>PPL</featureCode>
        <featureId>1466104</featureId>
        <gtopo30>33</gtopo30>
        <population>0</population>
        <timezone>Asia/Kolkata</timezone>
        <lat>13.016940116882324</lat>
        <lng>80.00167083740234</lng>
        <placeType>City</placeType>
        <oneWay>false</oneWay>
        <length>0.0</length>
        <google_map_url>http://maps.google.com/maps?f=q&amp;amp;ie=UTF-8&amp;amp;iwloc=addr&amp;amp;om=1&amp;amp;z=12&amp;amp;q=Valapuram&amp;amp;ll=13.046940116882324,80.00167083740234</google_map_url>
        <yahoo_map_url>http://maps.yahoo.com/broadband?mag=6&amp;amp;mvt=m&amp;amp;lon=80.00167083740234&amp;amp;lat=13.016940116882324</yahoo_map_url>
        <country_flag_url>/images/flags/IN.png</country_flag_url>   
    </result>
</results> 
```

这是我的完整代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "search.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );

        function get_list(ls) {
            var elName = $('#select').val();
            var value = $('#value').val();
            if(elName == "" || value == "")
            {
            }
            else if (elName != "" || value != "")
            {
            //var xPath = '//loction[ @lat '+ ls +' "'+elName+'" and @lng '+ ls +' "'+value+'"][1]/preceding-sibling::*/@*';
            var xPath = '//result[lat='+elName+' and lng='+value+']/node()/text()';
            //var xPathh = '//lng[@lng '+ ls +' "'+ value +'"]'+'/../City/@value';

            var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $("#result").text(str);
        }
        else 
        {}
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" name="button" value="Search" onclick="get_list('=')">
    <div id="result">
    </div>
</body>
</html> 
```

```
 i want:- 
```

如果在我的 xml 文件中两者都匹配，我想在文本框中输入纬度和经度值，然后返回兄弟节点值。

```
problem:- 
```

我不知道如果根元素有一个
像`<results xmlns="http://gisgraphy.com">`它这样的
属性值如果删除这个属性值然后工作完美的话会有什么问题......
任何想法它的食物对我有帮助......
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:50:04.747

您需要一个稍微不同的 xpath，其中“result”有一个前缀，然后使用命名空间解析器作为评估函数的第三个参数。有关如何执行此操作的说明和示例，请参阅[https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver 。](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:29:56.980

xslt4convert：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="xml" version="1.0" encoding="UTF-8" />
        <xsl:template match="*">
                <xsl:element name="{local-name()}">
                        <xsl:apply-templates select="@* | node()"/>
                </xsl:element>
        </xsl:template>
</xsl:stylesheet> 
```

创建一个 php 文件来加载 xml 和 xslt 文件：-

```
<?php
$sourcedoc = new DOMDocument();
    $sourcedoc->load('filename.xml');
    $stylesheet = new DOMDocument();
    $stylesheet->load('new4convert.xsl');
     // create a new XSLT processor and load the stylesheet
    $xsltprocessor = new XSLTProcessor();
    $xsltprocessor->importStylesheet($stylesheet);

    // save the new xml file
    file_put_contents('filename.xml', $xsltprocessor->transformToXML($sourcedoc));
?> 
```

它的声音是返回这种类型的 xml 文件：-

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <results>
        <result>
            <distance>1071.59873299109</distance>
            <name>Irungattukottai</name>
            <adm1Code>25</adm1Code>
            <adm1Name>State of Tamil Nadu</adm1Name>
            <asciiName>Irungattukottai</asciiName>
            <countryCode>IN</countryCode>
            <featureClass>P</featureClass>
            <featureCode>PPL</featureCode>
            <featureId>1269687</featureId>
            <gtopo30>47</gtopo30>
            <population>0</population>
            <timezone>Asia/Kolkata</timezone>
            <lat>12.996390342712402</lat>
            <lng>79.99082946777344</lng>
            <placeType>City</placeType>
            <oneWay>false</oneWay>
            <length>0.0</length>
            <google_map_url>http://maps.google.com/maps?f=q&amp;amp;ie=UTF-8&amp;amp;iwloc=addr&amp;amp;om=1&amp;amp;z=12&amp;amp;q=Irungattukottai&amp;amp;ll=13.026390342712402,79.99082946777344</google_map_url>
            <yahoo_map_url>http://maps.yahoo.com/broadband?mag=6&amp;amp;mvt=m&amp;amp;lon=79.99082946777344&amp;amp;lat=12.996390342712402</yahoo_map_url>
            <country_flag_url>/images/flags/IN.png</country_flag_url>
        </result>
        <result>
            <distance>1892.33578431928</distance>
            <name>Valapuram</name>
            <adm1Code>25</adm1Code>
            <adm1Name>State of Tamil Nadu</adm1Name>
            <asciiName>Valapuram</asciiName>
            <countryCode>IN</countryCode>
            <featureClass>P</featureClass>
            <featureCode>PPL</featureCode>
            <featureId>1466104</featureId>
            <gtopo30>33</gtopo30>
            <population>0</population>
            <timezone>Asia/Kolkata</timezone>
            <lat>13.016940116882324</lat>
            <lng>80.00167083740234</lng>
            <placeType>City</placeType>
            <oneWay>false</oneWay>
            <length>0.0</length>
            <google_map_url>http://maps.google.com/maps?f=q&amp;amp;ie=UTF-8&amp;amp;iwloc=addr&amp;amp;om=1&amp;amp;z=12&amp;amp;q=Valapuram&amp;amp;ll=13.046940116882324,80.00167083740234</google_map_url>
            <yahoo_map_url>http://maps.yahoo.com/broadband?mag=6&amp;amp;mvt=m&amp;amp;lon=80.00167083740234&amp;amp;lat=13.016940116882324</yahoo_map_url>
            <country_flag_url>/images/flags/IN.png</country_flag_url>   
        </result>
    </results> 
```

# curl - 卷曲下载文件

> ID：15631475
> 
> 赞同：0
> 
> 时间：2013-03-26T07:19:24.480
> 
> 标签：curl

我有一个 url，当从浏览器运行时它开始下载文件（ebup 或 pdf）因为 url 包含 uername 和密码我不能给我的客户这个 url 所以我必须创建一个文件到我的服务器 download.php 将使用 curl 下载文件。

假设网址是 www.myebookspartner.com/username/ebooks/password/1234/ebookid/12

当我尝试用 curl 调用这个 url 时，下载它没有开始（如果我运行表单浏览器，下载会立即开始）

```
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL,$url);

 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);        
 curl_setopt($ch, CURLOPT_HEADER, 1);
 curl_setopt($ch, CURLOPT_NOBODY, 1);               
 $server_output = curl_exec ($ch);  
 $info=curl_getinfo($ch);           
 curl_close ($ch); 
```

curl_getinfo 返回

```
{
  ["url"]=the url"
  ["content_type"]=>
  string(35) "application/epub+zip; charset=utf-8"
  ["http_code"]=>;
  int(200)
  ["header_size"]=>
  int(861)
  ["request_size"]=>
  int(318)
  ["filetime"]=>
  int(-1)
  ["ssl_verify_result"]=>
  int(0)
  ["redirect_count"]=>
  int(0)
  ["total_time"]=>
  float(5,622246)
  ["namelookup_time"]=>
  float(0,000764)
  ["connect_time"]=>
  float(0,056946)
  ["pretransfer_time"]=>
  float(4,8E-5)
  ["size_upload"]=>
  float(0)
  ["size_download"]=>
  float(0)
  ["speed_download"]=>
  float(0)
  ["speed_upload"]=>
  float(0)
  ["download_content_length"]=>
  float(510415)
  ["upload_content_length"]=>
  float(0)
  ["starttransfer_time"]=>
  float(5,622168)
  ["redirect_time"]=>
  float(0)
} 
```

怎么做才能使用 curl 从我的文件中强制下载文件

谢谢

# java - 如何从jsp文件中获取值并发送到struts中的方法？

> ID：15631480
> 
> 赞同：-3
> 
> 时间：2013-03-26T07:19:48.600
> 
> 标签：java, javascript, jsp, struts

我可以从表格格式的 jsp 文件中获取值，即使用 td 值吗？然后我在单击时获取 td 值并将相同的值获取到 struts java 文件中的方法中。能否请您发送示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:51:13.417

Jsp 中的字段应该有一个“名称”属性。并且相应的属性应该是您的操作类中的一个变量，具有适当的 getter 和 Setter 方法。

参考以下链接 [http://www.mkyong.com/struts2/struts-2-hello-world-example/](http://www.mkyong.com/struts2/struts-2-hello-world-example/)

# outlook - 在 Outlook 2007、2010、2013 中使用共享加载项（不是 VSTO）添加 CustomUI 功能区

> ID：15631491
> 
> 赞同：1
> 
> 时间：2013-03-26T07:20:31.337
> 
> 标签：outlook, c#-2.0, outlook-addin, ribbon, shared-addin

我正在使用 VS 2010，我的项目模板是 Extensibility->Shared Add-in。我想要一个带有按钮的功能区，它应该在 Outlook 中调用我的表单。我无法理解如何做到这一点？

我使用 Office 模板 Outlook2007 加载项创建了ribbonName.xml 和 ribbionName.cs 并将这两个文件添加到我的共享加载项中我做得对还是我应该怎么做？

请问谁能指导我怎么做？

我应该在哪里添加这个方法 Connect Or ？当我在 Connect 中添加它时，它给了我错误“没有合适的超载方法”

```
protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject()  {
     return new TurboAddinsRibbon();
  } 
```

谁能给我一个简单的例子，这将是很大的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:49:02.790

您可以从[MSDN Reference - Ribbon Overview](http://msdn.microsoft.com/en-us/library/vstudio/bb386097%28v=vs.100%29.aspx)、[RibbonManager](http://msdn.microsoft.com/en-in/library/microsoft.office.tools.ribbon.ribbonfactory.createribbonmanager.aspx)和BackStage[视图](http://msdn.microsoft.com/en-us/library/office/ff936212%28v=office.14%29.aspx)开始。

# xcode - 在 didOutputSampleBuffer 中调用主队列时出现内存警告

> ID：15631492
> 
> 赞同：1
> 
> 时间：2013-03-26T07:20:32.677
> 
> 标签：xcode, memory-management, ios6, avfoundation, grand-central-dispatch

当我尝试从以下位置更新主队列上的 UI 时收到内存警告：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
fromConnection:(AVCaptureConnection *)connection 
```

委托方法在 GCD 中的一个单独的串行队列上调用，所以当我想从上述方法中分析的帧更新 UI 时，我调用：

```
long wait = dispatch_semaphore_wait(self.myUISemaphore, DISPATCH_TIME_FOREVER);
if(wait == 0)
{
    dispatch_semaphore_signal(self.myUISemaphore);
    dispatch_sync(dispatch_get_main_queue(), ^(void) {
    self.numberFinderMarksLabel.text = [NSString stringWithFormat:@"%d", self.data];
    });
} 
```

如您所见，我尝试使用信号量无济于事。我尝试在调用 UI 后锁定线程并解锁，但这也不起作用。没有什么能阻止那些内存警告。五点左右之后，整个事情都无声无息地崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T20:07:30.563

将所有内容包装在您的委托方法中：

```
@autoreleasepool {

} 
```

那为我修好了。你可能有一些 CGImageRefs 或者你没有释放的东西。（必须手动完成，即使在 ARC 中也是如此）

# visual-studio-2010 - Disable CodeAnalysis for VS2010 解决方案

> ID：15631494
> 
> 赞同：2
> 
> 时间：2013-03-26T07:20:35.457
> 
> 标签：visual-studio-2010, code-analysis, fxcop

我在一个解决方案中有大约 50 个项目，并且大多数项目（除了 unittest 项目）都启用了 RunCodeAnalysis。问题是，构建需要很多时间。即使我修改了文件的源，它也在构建所有项目。

假设一个项目大约需要 10 秒来构建，而 CodeAnalysis 本身需要 8 秒。所以，只想在解决方案级别禁用 CodeAnalysis，而不是去每个项目并禁用它。我想在本地进行更改并且我不想将此更改签入到 TFS。

因此，我可以在没有代码分析的情况下更快地构建。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:53:33.343

这里有两件事，慢编译和慢代码分析。

关于加快编译过程，本白皮书中提供了一些技巧：[通过 .NET 程序集和 Visual Studio 项目对代码库进行分区](http://www.ndepend.com/Res/NDependWhiteBook_Assembly.pdf)。如果您使用 VS 选项`Copy Local = true`，则有可能大大加快编译速度（最多快 10 倍）。

关于代码分析，你可以试试[NDepend](http://www.ndepend.com/Default.aspx)工具，它自带[200 多条默认代码规则](http://www.ndepend.com/DefaultRules/webframe.html)，在 VisualStudio 中查看这些规则非常快。重新分析所有 VS 解决方案（编译后）并检查所有规则需要 2 或 3 秒，并具有浏览规则结果的工具。（*免责声明：我是这个工具的开发者之一*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:25:24.930

好吧，您的项目文件在源代码控制中，因此此更改将传输到服务器。

您可以编写一个工具来删除写保护并删除 Visual Studio 项目文件中的部分并在每次获取时运行它。这有点难看。

更好的是，如果您约定您获得一个可以签入的自定义构建配置“WithoutQA”，并且当您使用它时，您可以将其设置为这个。但这意味着您应该与您的团队沟通（这是更好的解决方案）

另请参阅：[MSDN 构建配置](http://msdn.microsoft.com/en-us/library/kkz9kefa%28v=vs.100%29.aspx)

和[MSDN 了解构建配置](http://msdn.microsoft.com/en-us/library/vstudio/kkz9kefa.aspx)

您可以为每个构建配置设置不同的选项，QA 分析选项也可以：

截图表格 MSDN：

![在此处输入图像描述](../Images/f57d43a3267b4dc0483117380f4153f3.png)

# html - 对平板电脑和手机使用引导响应的问题

> ID：15631496
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:20:48.663
> 
> 标签：html, twitter-bootstrap, responsive-design

我正在为以下图像设计一个使用引导响应的页面，而我是使用引导响应的初学者。![create_account.png 用于 create_account 页面](../Images/d503c1bf7f6dfb53421c5e282d9c3992.png)

html如下。

```
<!DOCTYPE HTML>

<html>

<head>
<meta http-equiv="content-type" content="text/html" />
<meta name="author" content="" />
<meta charset="utf-8">
<title>Bootstrap Responsive</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="" name="description">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-responsive.min.css">
<style>
    .container {
        margin-top: 80px;
    }
    #main-form {
        margin: auto;
        width:  500px;
    }
    .profile-photo {
        vertical-align: middle;
    }
    .form {
        text-align: center;
    }
    .profile-image {
        width: 100%;
        height: 100%;
    }
</style> 
```

```
<body>
    <div class="container">
        <div class="row text-center">
            <img src="img/slider/1.jpg" width="250px" height="250px" />
        </div>
        <div class="row text-center">
            <h2>Create your account</h2>
        </div>
        <div class="row">
            <div id="main-form">
                <div class="span2">
                    <div class="profile-photo">
                        <img class="profile-image" src="img/slider/1.jpg" />
                    </div>
                </div>
                <div class="span3 form">
                      <div class="widget-container widget-box4">  
                        <div class="control-group">
                            <div class="controls">
                                <input type="text" id="inputEmail" placeholder="Username">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="text" id="inputEmail" placeholder="Email">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="password" id="inputPassword" placeholder="Password">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="password" id="inputPassword" placeholder="Confirm Password">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="checkbox"> Remember me
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn">Sign in</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.min.js">
    <script type="text/javascript">
        $('.carousel').carousel();
    </script>
</body> 
```

我想要它在页面中间，我在桌面中得到了正确的。

但问题是表格和个人资料图像不在中心。

请帮我怎么做？

作品更受赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T07:47:57.347

我已经对您的代码进行了更改，请注意，对于手机布局可能小于 500 像素，您已经提到了您的容器之一，因此您的手机布局会受到干扰，请尝试对其使用自定义媒体查询，就 html 结构而言，请查看变化...

```
<body>
    <div class="container">
        <div class="row text-center">
            <img src="img/slider/1.jpg" width="250px" height="250px" />
        </div>
        <div class="row text-center">
            <h2>Create your account</h2>
        </div>
            <div id="main-form" class="row">
                <div class="span5">
                    <div class="profile-photo">
                        <img class="profile-image" src="img/slider/1.jpg" />
                    </div>
                </div>
                <div class="span7 form">
                      <div class="widget-container widget-box4">  
                        <div class="control-group">
                            <div class="controls">
                                <input type="text" id="inputEmail" placeholder="Username">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="text" id="inputEmail" placeholder="Email">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="password" id="inputPassword" placeholder="Password">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="password" id="inputPassword" placeholder="Confirm Password">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="checkbox"> Remember me
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn">Sign in</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $('.carousel').carousel();
    </script>
</body> 
```

# linux - 如何延迟运行程序直到磁盘活动消退

> ID：15631497
> 
> 赞同：1
> 
> 时间：2013-03-26T07:20:49.333
> 
> 标签：linux, bash, scripting

我想将一些大型应用程序放入我的启动脚本中。由于启动每个都是 I/O 繁重的任务，为了避免拥塞，我想推迟启动另一个，直到第一个初始化。

这些不是可以完成某些工作然后存在的工作脚本。我说的是不会退出的 GUI 应用程序（如 Firefox、Eclipse），因此了解应用程序已完成初始化工作的唯一方法是（如果我错了，请纠正我）检查磁盘 I/O。

我知道我可以通过解析输出来粘合一些东西，`atop`甚至更好地使用`vmstat`- 但有件事告诉我，必须有一个更简单的解决方案，比如`wait-for-io-idle`当磁盘 IO 在给定时间（例如 3 秒）采样时返回的实用程序更少超过给定的阈值（例如 10%）。

有谁知道这样的实用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:40:16.940

根据 pereal 的回答，我已经修补了一个可以使用的脚本。让我们称之为`wait-for-disk-idle`。这种方法的缺点是它自己需要初始化时间。在有效采样“采样时间”的同时执行两次“采样时间”。这是 iostat 的局限性。

（是的，一定是bash，不是sh）

```
#! /bin/bash

USAGE="Usage: `basename $0` [-t sample time] [-p disk IO percent threshold] disk-device"

time=3
percent=10
# Parse command line options.
while getopts ":t:" OPT; do
    case "$OPT" in
        t)
            time=$OPTARG
            ;;
        :)
            # getopts issues an error message
            echo "`basename $0` version 0.1"
            echo $USAGE >&2
            exit 1
            ;;
        \?)
            # getopts issues an error message
            echo "`basename $0` version 0.1"
            echo $USAGE >&2
            exit 1
            ;;
    esac
done
while getopts ":p:" OPT; do
    case "$OPT" in
        p)
            percent=$OPTARG
            ;;
        :)
            ;;
        \?)
            # getopts issues an error message
            echo "`basename $0` version 0.1"
            echo $USAGE >&2
            exit 1
            ;;
    esac
done

# Remove the switches we parsed above.
shift `expr $OPTIND - 1`

# We want at least one non-option argument. 
# Remove this block if you don't need it.
if [ $# -eq 0 ]; then
    # getopts issues an error message
    echo "`basename $0` version 0.1"
    echo $USAGE >&2
    exit 1
fi

# echo percent: $percent, time: $time, disk: $1

while [[ $(iostat -d -x $time 2 $1 | 
          sed -n 's/.*[^0-9]\([0-9][0-9]*\),[^,]*$/\1/p' | tail -1) > $percent 
      ]]; do 
#   echo wait
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:46:47.467

这不是您正在寻找的理想解决方案，但仍然是一个解决方案：

```
while [[ $(iostat -d -x 3 2 sda | 
          sed -n 's/.*[^0-9]\([0-9][0-9]*\),[^,]*$/\1/p' | tail -1) > 10 
      ]]; do 
  echo wait
done 
```

采样 sda 的利用率 3 秒，如果低于 10% 则退出。

# php - 对于不熟悉 OOP 的人，避免在 PHP 中使用全局数据库处理程序变量？

> ID：15631500
> 
> 赞同：1
> 
> 时间：2013-03-26T07:20:57.053
> 
> 标签：php, oop, class, global-variables, database-connection

**编辑：**这个问题**不是**重复的。这就是为什么。这些答案都没有一点帮助，因为我对 OOP 完全陌生——我需要一个适合我理解水平的答案。仅仅因为这个问题**看起来**很相似，提问者就不是——更不用说我首先特别要求一个“可以理解的”答案。

* * *

总体而言，我对 PHP 还是比较陌生，对面向对象的 PHP 还是比较陌生，在过去一周内才刚刚开始自学，我仍然无法掌握一些概念，例如继承和什么是类抽象——一些由于我一直在使用 PDO 处理我的数据库连接和查询一段时间，因此我已经能够相当快地掌握它，但除此之外我仍然是 OOPHP 的新手，所以如果我的问题请多多包涵似乎有点“基本”。

我在每个网页的顶部都有一个初始化文件（init.php），除其他外，它使用 PDO 连接到 MySQL 数据库，如下所示：

```
尝试 {
    $dbh = new PDO(conn. data here);
} 捕捉（PDOException $e）{
    回声 $e->getMessage();
}

```

因此，据我了解，在执行此代码时，`$dbh`现在将其实例化为 PDO 对象。在我的 init.php 文件的底部有很多需要链接到函数文件，例如`user.func.php`,`images.func.php`等。

问题是每当我需要从我的一个函数内部查询数据库时，我需要先声明`$dbh`为全局，然后才能对其进行操作，如下所示：

```
功能我的功能{
    全球 $dbh; // 问题来了！

    尝试 {
        $stmt = $dbh->prepare(这里有一些 SQL);
        $stmt->执行（）；
    } 抓住 {
        // ETC。
    }
}
```

现在，问题不在于我对**为什么**必须声明为全局变量的理解——我明白了很多，而是如何避免它。我已经阅读了一些关于为什么要避免全局变量的 StackOverflow 答案，但我不确定如何。

我将如何`global $dbh`从我的代码中删除？每次我实例化它并使用它时，我会创建一个数据库处理程序类并将我的连接设置传递给构造函数方法吗？（似乎有点多余）。

不太确定如何替换我对全局变量的使用，因此绝对感谢我能理解的帮助！

# java - 在 java GWT Canvas 中获得气泡效果？

> ID：15631517
> 
> 赞同：0
> 
> 时间：2013-03-26T07:21:48.863
> 
> 标签：java, jquery, html, gwt, canvas

我想在java GWT Canvas中获得气泡效果，我有不同x，y，位置和不同半径的圆圈，所以想要慢慢地增加它们的半径，就像它们越来越靠近并且在某个特定的半径处我希望它是慢慢消失，即慢慢降低它们的不透明度，最后去除。谁能知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:22:16.250

我会尝试在纯 CSS 中做到这一点。[http://aext.net/2009/11/bubble-effect-with-css/](http://aext.net/2009/11/bubble-effect-with-css/)

在 GWT 中这样做是可能的，但可能不如 CSS 高效。

# reporting-services - 始终在导出/打印 rdlc 报告 SSRS 时展开组（即使用户已明确折叠组）

> ID：15631520
> 
> 赞同：0
> 
> 时间：2013-03-26T07:21:55.790
> 
> 标签：reporting-services, rdlc, ssrs-grouping

我在创建 rdlc ssrs 报告时遇到问题。

场景如下：

*   该报告具有全部展开/全部折叠单选按钮选项以切换组的可见性。
*   如果导出为 pdf、word 等或打印（即使当前已被用户折叠），报告应始终处于展开状态。

这是通过使用全局内置变量“RenderFormat”在 rdl 报告中实现的（以下是在从工具栏导出/打印的情况下要扩展的分组区域上使用的条件）

在呈现/打印报告时显示扩展数据：

```
=iif(Parameters!ExpandAll.Value = 0,iif(Globals!RenderFormat.Name = "WORD" or Globals!RenderFormat.Name = "EXCEL" or 

Globals!RenderFormat.Name = "PDF" or Globals!RenderFormat.Name = "MHTML" or Globals!RenderFormat.Name = "IMAGE",false,true),False) 
```

但是，该变量无法在本地报告中使用。

如何为同一报告的 RDLC 实施它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:59:15.783

您尝试执行的操作在 Reporting Services 中不可用。不幸的是，导出功能不会触发任何类型的事件来运行您的代码。但是，当您选择导出报表时，报表的外观是它在 Excel 中的呈现方式。

一种解决方案是包含一个“全部展开”按钮，其中包含在导出前按下该按钮的说明。

# jasper-reports - JasperReports 服务器上的报告中的页面加载问题

> ID：15631527
> 
> 赞同：0
> 
> 时间：2013-03-26T07:22:26.730
> 
> 标签：jasper-reports, jasperserver

我将报告部署到*JasperReports Server*。报表运行时，结果网格显示在后台，但页面处于加载过程中，因此无法导出报表。如果页面加载被取消，则导出选项变为禁用。

我也部署了其他报告，它们工作正常。

什么原因？请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T06:34:18.657

您在 jasper 服务器中运行的报告可能有更多页面或从数据库中获取更多数据，这就是加载过程仍在继续且导出选项处于禁用状态的原因。除非报表的所有页面都加载到 jasper 服务器中，否则您将无法导出报表。因此，您可以采用以下三种方法来解决此问题： 1\. 限制查询中的记录数。2\. 对查询应用过滤器。3.优化查询，更加注重性能。

在某些情况下，我发现通过浏览加载的页面会快速加载所有页面，以防加载过程卡住。

我希望这些解决方法可以帮助你。！

问候，

斯里坎特·卡塔姆

# python - openerp 7 ir.sequence 增加 2 个错误。？

> ID：15631529
> 
> 赞同：0
> 
> 时间：2013-03-26T07:22:31.963
> 
> 标签：python, xml, sequence, openerp

在我的情况下，当我打开表单时会显示 +1 序列号。但是当我保存记录时，它又增加了 1。这意味着我的序列号现在看起来像这样：

*   EMP0010
*   EMP0012
*   EMP0014

这是 openerp 的问题还是我的代码中缺少某些内容？

```
'register_no': fields.char('Register No', size=32, help='Register No', readonly=True),  # employer wise ,estate wise
        'employer_no': fields.char('Employer No', type='char', readonly=True),

_defaults = {
 'register_no': lambda obj, cr, uid, context: '/',
 'employer_no': lambda obj, cr, uid, context: '/',
 } 
```

[您可以在这里](https://github.com/priyankahdp/openerp/blob/openerp)查看我的代码

我评论了

```
 def create(self, cr, uid, values, context=None):
        values['register_no'] = self.pool.get('ir.sequence').get(cr, uid, 'bpl.worker')
        values['employer_no'] = self.pool.get('ir.sequence').get(cr, uid, 'bpl.employer')
        return super(bpl_worker_registration, self).create(cr, uid, values, context=context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:29:39.290

您已经调用了两次 ir.sequence 方法，一次来自 create

> def create(self, cr, uid, values, context=None):
> 
> ```
> values['register_no'] = self.pool.get('ir.sequence').get(cr, uid, 'bpl.worker')
> values['employer_no'] = self.pool.get('ir.sequence').get(cr, uid, 'bpl.employer')
> return super(bpl_worker_registration, self).create(cr, uid, values, context=context) 
> ```

第二个是默认值

> _defaults = {
> 
> ```
>  'register_no': lambda obj, cr, uid, context: obj.pool.get('ir.sequence').get(cr, uid, 'bpl.worker'),
>  'employer_no': lambda obj, cr, uid, context: obj.pool.get('ir.sequence').get(cr, uid, 'bpl.employer'),
> 
>  } 
> ```

调用两次没有任何意义。仅从 _default 或从 create 方法进行调用

# php - 未定义索引

> ID：15631530
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:22:36.377
> 
> 标签：php, database

这个说法有什么问题吗？

错误返回：

> 注意：未定义索引：inputBlock
> 
> 注意：未定义索引：inputHouseUnit

代码：

```
if($conn){
    $insertData = "INSERT INTO ESTATEUNIT (BLOCK, UNIT) VALUES ('$_POST[inputBlock]', '$_POST[inputHouseUnit]')";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:25:36.287

PHP 数组索引是数字或字符串。

如果`inputBlock`和`inputHouseUnit`是字符串变量的标识符，则必须在它们前面加上`$`（例如，`$_POST[$inputBlock]`）。

如果它们是文字字符串，请将它们包含在`'`（单引号）或`"`（双引号）中（例如，`$_POST["inputBlock"]`）。

显然，您必须小心转义单引号和双引号。此外，您应该在尝试将其放入数据库之前验证您的用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:25:58.573

这里的所有答案都是错误的。甚至与这个问题相矛盾，显然表明它`inputBlock`被认为是数组索引。

> 这个说法有什么问题吗？

没有。你的陈述完全有效。

您收到这些消息的原因是空的 $_POST 数组。您很可能使用 GET 方法调用此代码。

将您的代码放入此 if 语句中：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // your code goes here
} 
```

此外，您必须始终正确格式化查询。至少[这里描述的方式](https://stackoverflow.com/a/15614086/285587)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:27:05.903

就在这里。它应该看起来像这样

```
if($conn){
    $insertData = "INSERT INTO ESTATEUNIT (BLOCK, UNIT) VALUES ('" . $_POST["inputBlock"] . "', '" . $_POST["inputHouseUnit"] . "')";
} 
```

我使用了字符串连接，因此您不必转义引号。

您还应该考虑安全性，因为将原始帖子数据传递到数据库是非常不安全的 - 永远不要相信您的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:27:14.150

```
$insertData = "INSERT INTO ESTATEUNIT (BLOCK, UNIT) VALUES ('".$_POST['inputBlock']."', '".$_POST['inputHouseUnit']."')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-23T08:27:22.443

将各个后期操作的值存储在单独的变量中，然后在`echo`函数中使用它们......就像这样......

```
$x=$_POST[inputBlock];
<br>$y=$_POST[inputHouseUnit]; 
```

然后替换`echo`函数中的变量....

还要检查 post 方法是否接收到任何值，因为您可能只向 php 页面发送了一个值...当变量没有从`$_POST`数组中获取任何值时，通常会计算未定义的索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-15T13:42:01.993

确保这些变量是从

$_POST[inputBlock] $_POST[inputHouseUnit]

在 $sql 之前打印它们。

另外，请确保您指定了 method=POST 。如果没有，这些变量将作为 GET 提供。

# ios - 单击时可见和不可见的按钮+在ScrollView ios中滚动相同

> ID：15631532
> 
> 赞同：0
> 
> 时间：2013-03-26T07:22:38.307
> 
> 标签：ios, uibutton, scrollview

我有 2 个按钮，称为`previousBttn`和`nextBttn`for `scrollView`。我有 3 张图片`scrollView`。

1.  我想像这样隐藏`previousBttn`：[...] > 在第一张图片

2.  当我点击`nextBttn`第二张图片时，2 按钮将显示如下：< [...] >

3.  最后，在第三张图片`nextBttn`将隐藏，previousBttn 将显示如下：< [...]

    过程：[...] > < [...] > < [...]

`swipe`当我们所有的图像时，它也是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:33:58.517

我认为你必须自己做。您知道当前可见页面的索引和图像总数。if (index == 0) hidePreviousButtonORShowThis[...]>. else if (index == totalImageCount - 1) then hideNextButton else UnhideBothButtons.

您可以将图像用于这些标志 [...]> <[...] <[...]>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:15:49.253

```
 int currentIndex = 0;   // set to first postion
    // if you are at first position
    if(currentIndex == 0)
    {
        // hide previous button
    }
    else if(currentIndex == yourImageCount)
    {
        // hide next button
    }
    else
    {
        // show both the buttons
    } 
```

# javascript - 春季长轮询示例代码？

> ID：15631538
> 
> 赞同：5
> 
> 时间：2013-03-26T07:22:49.060
> 
> 标签：javascript, ajax, eclipse, spring-mvc

我可以找到很多关于长轮询如何工作的信息（例如，this 和 this），但没有关于如何在代码中实现它的简单示例。

基本上，我将如何使用 Apache Tomcat 来处理请求，以及如何编写一个简单的应用程序（ spring ）来“长轮询”服务器以获取新消息？

该示例不必是可扩展的、安全的或完整的，它只需要工作！如果有人能给我这样的教程或参考任何其他教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:28:31.663

这是我能想到的最简单的例子......

在控制器中：

```
@RequestMapping("/longPolling")
public String longPolling(Model model) {
  while(true) {
    // .. Do something, break when done...
    if( somethingIsDone ) {
       break;
    }
  }
  return "someResponse";
} 
```

在调用它的视图中，您将设置一个 ajax 调用，并在超时时再次调用它。长轮询的想法是服务器只有在它有响应时才会响应。

如果您使用的是 Spring 3.2，更好的方法是使用[DeferredResult](http://docs.spring.io/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/api/org/springframework/web/context/request/async/DeferredResult.html) 或从您的处理程序方法返回一个 Callable。如果您是 Spring 3.2 之前的版本，那么您可以使用几个框架来提供帮助，例如 Atmosphere，它们与 Spring 配合得很好。有些甚至有 JavaScript 部分来简化客户端编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:03:51.040

基于现有的 anwser，使用 Servlet 3 API (Tomcat 7) 和 Spring 3.2 附带的新内容的更有效的“长轮询”变体

```
@RequestMapping("/longPolling")
public Future<String> longPolling(Model model) {
  return callSomethingWhereAFutureReturns();
} 
```

重点是：未来只是指向未来结果的“指针”（不要从字面上理解）。因此，无论未来何时解决，该请求的调度线程将在处理上述代码后暂停/退出。当 future 被解析时，/a 线程将被重新附加并返回实际结果（在本例中为字符串）。但是想想“Spring”，这也可能是转换为 JSON 的 POJO。

仅当将来的结果将由另一个线程解决时，这才有意义。在聊天应用程序中，这将是另一个带有新消息的请求线程（不推荐）或专用调度程序线程（更好）。

# javascript - RequireJS require() 函数的自定义使用

> ID：15631540
> 
> 赞同：0
> 
> 时间：2013-03-26T07:22:53.857
> 
> 标签：javascript, requirejs

我想知道为什么我不能使用这样的`require()`功能：

```
// I'm using define's sugar syntax
define(function(require) {  

  // This works fine. It assigns myModule to the myModule variable (no callback needed)
  var myModule = require('myModule');

  var getModule = function(name) {

    // This doesn work. Using require() here expects a callback
    return require(name);        
  };

  return getModule;
}); 
```

第二次`require()`调用抛出（但使用 DevTools 显示`<name>`实际已加载）：

```
Uncaught Error: Module name <name> has not been loaded yet for context: _ 
```

为什么第一次`require()`调用只返回模块（无需以回调方式执行），而第二次`require()`调用仅适用于回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:57:46.407

我会在这里跟进我的评论。

**除非**在传递给它的定义回调中，否则`require`如果不将数组作为第一个参数传递，则无法使用。即使这样也有局限性。**`require`**

 **尝试在其他任何地方执行此操作会引发错误：

```
require('jquery', function() {}); 
```

[http://requirejs.org/docs/errors.html#requireargs](http://requirejs.org/docs/errors.html#requireargs)

你唯一能做到的就是在这里：

```
define(function(require) {
    var $ = require('jquery');
}); 
```

这只是一种更好的写作方式：

```
define(['jquery'], function($) {

}); 
```

第一个版本被称为糖语法 - [http://requirejs.org/docs/whyamd.html#sugar](http://requirejs.org/docs/whyamd.html#sugar)

> AMD 加载器将使用 Function.prototype.toString() 解析出 require('') 调用，然后在内部转换上述定义调用

我基本上只是重复了 RequireJS 文档中解释的内容，但希望这能让它更清楚一点。

我还在不同的上下文中讨论了这个主题 -[如何使用 RequireJS 实现延迟加载？](https://stackoverflow.com/questions/10911044/how-to-achieve-lazy-loading-with-requirejs/10914329#10914329)**

# android - 如何重新加载Andengine游戏活动？

> ID：15631547
> 
> 赞同：0
> 
> 时间：2013-03-26T07:23:25.977
> 
> 标签：android, andengine

完成游戏关卡后，如何重新加载活动或游戏？我正在使用 Android 中的 Andengine 开发 ea 游戏？请任何机构可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:48:20.763

如果“重新加载”是指您想要拆除引擎并创建一个新引擎，那可能不是您想要做的。Android 中的 Activity 是“用户可以做的单一的、专注的事情”。在游戏的情况下，活动从用户决定玩游戏的那一点开始到用户决定做其他事情的那一点。下一级应在活动内部处理。

在此处查看有关活动的更多信息：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

AndEngine 设置为自己的活动，因此每次有下一个级别时重新启动活动不是一个好主意。相反，您最好通过在主 AndEngine 活动中覆盖 onCreateResources、onCreateScene 和 onPopulateScene 来加载每个级别所需的所有背景/资源。

然后，在用户移动/与场景交互时调用的回调中插入检查（例如在 onAreaTouched 中），以检测用户是否“赢得”了关卡。如果是这样，你改变背景，从最后一个关卡中移除所有的精灵，并为新的关卡实例化新的精灵。

这是一个太大的主题，无法提供代码示例，但您似乎可以从 AndEngine 中更深入的教程中受益。可以在这里找到：http: [//andenginedevtutorial.blogspot.com/2012/11/first-project-andengine.html](http://andenginedevtutorial.blogspot.com/2012/11/first-project-andengine.html)

（但是，如果你坚持重新加载它，你应该通过调用 finish() 将它拆除。你应该有另一个活动，它可以退回到，然后可以再次启动活动。）

# java - 如何使用 JExcel API 设置单元格的颜色

> ID：15631556
> 
> 赞同：0
> 
> 时间：2013-03-26T07:24:02.227
> 
> 标签：java, excel, jexcelapi

我想知道如何使用 JExcel API 为 Excel 中的单元格设置颜色。一个示例程序可以作为示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:30:56.423

在提问之前先google你的问题，然后在这里提问；
我想你正在寻找[jxl.format.color](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/format/Colour.html)

您还可以查看以下线程[在 JExcelApi 中制作新颜色](https://stackoverflow.com/questions/1834973/making-new-colors-in-jexcelapi)

您必须使用[jxl.write.label](http://www.docjar.org/docs/api/jxl/write/Label.html)将颜色包含到您的单元格中

```
Label label_name = new Label(col_num, row_num, "value", getCellFormat(Colour.GREEN, Pattern.GRAY_25)); 
```

# jquery - jquery和$的区别

> ID：15631558
> 
> 赞同：8
> 
> 时间：2013-03-26T07:24:22.023
> 
> 标签：jquery

我在我的 php 项目中大量使用了 jquery。但是在某些页面上`$`不起作用，所以我必须使用 jquery。例如：

```
jQuery('#mycarousel').jcarousel({
start: 3
}); 
```

谁能告诉我$和jquery有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T07:27:09.297

当`.noConflict()`被调用时，selector like`$('')`不再工作以确保与 Prototype 等其他框架的兼容性。在那个时候`jQuery('')`被用来代替。

参考：[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)

为了更好地说明这个想法，以下是从参考链接中获得的示例：

```
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:27:16.190

`$`只是一个用于别名`jQuery`的变量，它是一个变量，因此可以将任何东西分配给它。

您可以从其[文档中获取与其相关的详细信息](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-30T16:19:47.777

最简单的控制台实验说明了已经被告知的内容：

```
($ === jQuery); //true
$.noConflict();
($ === jQuery); //false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T07:28:31.513

`$`表示 jQuery 函数，是 jQuery 函数的别名`jQuery`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T09:53:32.517

`$`是旧版本中 jQuery 的别名。

在最新版本中，如果您使用它`$`，那么该功能将不会执行。

因此，无需使用 jQuery 更改整个代码...

在该代码之前，输入：

```
var $ = jQuery; 
```

很简单...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T07:26:23.857

这些是相同的，除了 $ 是 Jquery 中 Jquery 的 ShortForm

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T07:26:28.617

这是一个jquery冲突。您应该使用正确的 jquery 插件来解决此问题。使用最新的 Jquery 插件并从您的代码中删除旧的插件。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-01-09T07:01:32.867

```
$.ajax({
    url: 'Emp.asmx/getDesignation',
    type:'post',
    contentType: 'application/json;charset=utf-8',
    dataType: 'json',
    data: "{}",
    aync: false, 
```

# ruby-on-rails - 在 Rails 中为 3 个模型定义关系（多对多）

> ID：15631560
> 
> 赞同：0
> 
> 时间：2013-03-26T07:24:30.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, relationship

我在 Rails 中有三个模型：课程、成绩和主题。

关系场景如下：

> 'G1' 年级的课程 'C1' has_many Topics (t1,t2,t3)
> 
> 'G2' 年级的课程 'C2' has_many Topics (t1,t2,t4,t5) [一个主题可以在许多不同的课程中，但可能在不同的年级教授]

G1 级本身可以成为 C1、C2 等多个课程的一部分

我需要存储信息，以便对于主题 t1，我可以说：

> 它在 G1 年级的 C1 中教授
> 
> 它在 G2 年级的 C2 中教授

如何在 Rails 中进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:59:50.050

我相信这似乎是你所追求的模型？

```
class Curriculum < ActiveRecord::Base
  has_many :grades
end

class Grade < ActiveRecord::Base
  belongs_to :curriculum
  has_and_belongs_to_many :topics
class

class Topic < ActiveRecord::Base
  has_and_belongs_to_many :grades
end 
```

# html - 表单元素没有移动到中心

> ID：15631566
> 
> 赞同：0
> 
> 时间：2013-03-26T07:24:43.250
> 
> 标签：html, css, twitter-bootstrap

我对网络编程很陌生。

我的标签中有一个样式标签，`head`如下所示：

```
<style type="text/css">
  .center {
      float: none;
      margin-left: auto;
      margin-right: auto;
  } 
```

我使用 twitter 引导程序。我把我的`form`包裹在`div`街区里

```
<div class="center"
    <form>
      <fieldset>
        <legend>Legend</legend>
        <label>Label name</label>
        <input type="text" placeholder="Type something…">
        <span class="help-block">Example block-level help text here.</span>
        <label class="checkbox">
          <input type="checkbox"> Check me out
        </label>
        <button type="submit" class="btn">Submit</button>
      </fieldset>
    </form>
</div> 
```

但是`form`元素甚至没有移动到中心。

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:29:20.777

这是居中的，但是由于 div 是块元素，除非您给出一些宽度（具有指定宽度的**[示例](http://jsfiddle.net/dLDgK/1/)**），否则您无法找出差异

所以试试这个

```
 .center {
      float: none;
      margin-left: auto;
      margin-right: auto;
    text-align:center
  }
legend{
    text-align:left
} 
```

**[演示](http://jsfiddle.net/dLDgK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:35:28.387

在表单标签之前使用中心标签。

```
<center>
 <form></from>
 </center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:31:47.323

将 text-align:center 添加到容器 div..

```
 .center {
      float: none;
      margin-left: auto;
      margin-right: auto;
      text-align:center;
  } 
```

小提琴：http: [//jsfiddle.net/xhjHS/](http://jsfiddle.net/xhjHS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:30:59.430

试试这个

```
.center {
    float: none;
    margin-left: auto;
    margin-right: auto;
    text-align:center;
} 
```

# jquery - 是否可以在 JQM 中的简单搜索字段上使用数据过滤器样式？

> ID：15631571
> 
> 赞同：0
> 
> 时间：2013-03-26T07:25:19.033
> 
> 标签：jquery, jquery-mobile

我正在使用[jQuery Mobile](http://jquerymobile.com)开发一个小型移动项目，我需要为用户提供搜索选项。默认搜索输入很好，但我想要更多...我发现使用列表时可以添加`data-filter="true"`，它看起来像这样

![在此处输入图像描述](../Images/d893d26c28514af97d4234af7cb38cf3.png)

是否可以使用简单的输入和提交按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:04:55.433

是的，你可以做到。您可以获取一个文本框，并随着用户类型捕获事件并动态调用 Web 服务或相关数据源并填写下面的列表视图。

否则，您可以使用现有的[预先编写的库，例如这个](http://andymatthews.net/read/2012/03/27/jQuery-Mobile-Autocomplete-now-available)。

在此处查看[示例](http://andymatthews.net/code/autocomplete/)。

# .net - 使用 Access Database Engine 2010 时出现“无效密码”错误？

> ID：15631582
> 
> 赞同：0
> 
> 时间：2013-03-26T07:25:51.263
> 
> 标签：.net, ms-access, vb6

我的客户报告说我的应用程序安装在一台机器上，指向`ACCDB`服务器位置上的一个文件，并且一切正常。

当应用程序安装在指向同一`ACCDB`文件的第二台机器上时，应用程序会生成以下错误：

> 不是有效的密码

这种不一致的原因可能是什么？客户告诉我所有机器都在运行`XP 32-bit`。

这里的第 2 号帖子与我所经历的基本相同：[http ://www.accessforums.net/programming/excel-access-adodb-connection-not-valid-password-24373.html](http://www.accessforums.net/programming/excel-access-adodb-connection-not-valid-password-24373.html)

# javascript - 使用 UI 反馈在多个元素上切换类

> ID：15631584
> 
> 赞同：1
> 
> 时间：2013-03-26T07:26:08.987
> 
> 标签：javascript, jquery, css, toggle, toggleclass

我有一个列表（空格只是为了视觉清晰）：

```
<li class="a">      A     </li>
<li class="b">      B     </li>
<li class="c">      C     </li>
<li class="a b">    A B   </li>
<li class="a c">    A C   </li>
<li class="b c">    B C   </li>
<li class="a b c">  A B C </li> 
```

我有一系列“控制”：

```
<a class="show-a" href="#">A</a>
<a class="show-b" href="#">B</a>
<a class="show-c" href="#">C</a>
<a class="show-all active" href="#">ALL</a> 
```

我有一些 CSS：

```
li           {color: red; }
 .deactivate {color: #ddd; }
a            {color: #ddd; }
 .active     {color: blue; } 
```

**我想做两件事：**

1.  单击相应`<a>`控件时，将`.deactivate`类添加/删除到相应的`<li>`段，如果`.show-a`单击，则应用于`.deactivate`所有没有类的元素`.a`。因此，从不再需要它`.deactivate`的任何 s 中删除该类。`<li>`

2.  反映控件中的当前选择。即添加/删除`.active`类到各自的锚链接。（这是我永远找不到答案的部分）。

**笔记：**

*   `.active`在任何给定时间只能有一个控件。像单选按钮，但通过 CSS 更具样式。
*   似乎更好的解决方案使用 jQuery 和 toggleClass。

**RE其他答案：**有很多（例如[http://jsfiddle.net/Cx4uK/2/](http://jsfiddle.net/Cx4uK/2/)）但是

*   没有那个地址#2
*   大多数显示/隐藏而不是切换类
*   解释的很少，因此很难迭代答案并理解它们是如何工作的（这是我的最终目标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:36:20.420

此解决方案使用该`data-selector`属性来保存与特定链接相关的项目的选择器。它有助于使 JS 真正干净。

至于活动链接，我们只需`.active`从所有链接中删除并将其添加到刚刚单击的链接中。

[jsFiddle](http://jsfiddle.net/JCcZZ/1/)

**JS**

```
$(document).ready(function () {
    $('.links a').click(function () {

        // Remove .active from all links then add to the clicked one
        $('.links a').removeClass('active');
        $(this).addClass('active');

        // Remove .active from all lis then use the attribute data-selector to set
        // the relevant items
        $('.letters li').removeClass('active');
        $(this.getAttribute('data-selector')).addClass('active');
    });
}); 
```

**HTML**

```
<div class="links">
    <a class="show-a" href="#" data-selector=".a">A</a>
    <a class="show-b" href="#" data-selector=".b">B</a>
    <a class="show-c" href="#" data-selector=".c">C</a>
    <a class="show-all active" href="#" data-selector=".a,.b,.c">ALL</a>
</div>

<ul class="letters">
    <li class="a">      A     </li>
    <li class="b">      B     </li>
    <li class="c">      C     </li>
    <li class="a b">    A B   </li>
    <li class="a c">    A C   </li>
    <li class="b c">    B C   </li>
    <li class="a b c">  A B C </li>
</ul> 
```

**CSS**

```
.active {
    background-color:#AAA;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:38:03.627

我假设你想要这样的东西：

```
 $(function () {
    $("#user-controls div").first().addClass('active'); // <---add this line
    $("#user-controls").on('click', 'div', function () {
       $(this).addClass('active').siblings().removeClass('active'); //<--and this
       var classToShow = this.id.split('-')[1],
        filter = classToShow === "all" ? 'div' : '.' + classToShow;
        $("#devices").children().show().not(filter).hide();
    });
}); 
```

### [结帐小提琴](http://jsfiddle.net/Cx4uK/4/)

在这里我做了一个 CSS 类`.active{}`：

```
.active {
  background:red !important;
  color:yellow;
} 
```

并且在页面加载第一个 div 之后，`#user-controls`应该`all`应用`.active`css 类。

有了这个：

```
$("#user-controls div").first().addClass('active'); 
```

那么如果点击发生在其他链接上，那么在这种情况下，这里`.siblings()`是有用的功能。

```
$(this).addClass('active').siblings().removeClass('active'); 
```

让我们分解一下：

```
$(this).addClass('active') 
```

此行将类添加`.active`到单击的链接和

```
.siblings().removeClass('active'); 
```

这个删除了应用于同一级别的其他链接的其他链接类。

# asp.net - 如何在 RadGrid 中自定义 Edititem 模板的设计？

> ID：15631585
> 
> 赞同：1
> 
> 时间：2013-03-26T07:26:10.700
> 
> 标签：asp.net, telerik, telerik-grid, telerik-ajax

我有一个 RadGrid，每当我单击编辑以编辑网格中的一行时。它在编辑时显示了以下设计。

![在此处输入图像描述](../Images/ffcaab18e7c144c9800ea245e1724a4c.png)

但我只希望它在两行中，如下所示：

第 1 行：订单日期、所需日期、公司

第 2 行：其余部分

我们可以把它分成两排吗？我期待着您的回答。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:23:08.013

Yes.. you can configure your RadGrid to use an Edit table format that you're looking for.

Check this demo on the Telerik demos site for information about using the EditFormSettings ColumnNumber attribute to specify the number of columns you want and how to place items into each of those columns.

[http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/multicolumneditform/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/multicolumneditform/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:37:41.793

你不能按行设计它。有一个例子可以在列中制作它。

请看[这里](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/multicolumneditform/defaultcs.aspx "这里")。

# gnuplot - gnuplot 不会绘制函数 sqrt(2/10)*sin((3.14/10)*x)

> ID：15631589
> 
> 赞同：2
> 
> 时间：2013-03-26T07:26:26.867
> 
> 标签：gnuplot

Gnuplot 似乎不会绘制函数：

```
sqrt(2/10)*sin((3.14/10)*x) 
```

谁能告诉我为什么。我试图在[Wolfram alpha](http://www.wolframalpha.com/input/?i=sqrt%282/10%29%2asin%28%283.14/10%29%2ax%29%20)中绘制它，它在那里工作得非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:30:25.023

最有可能`2/10`计算为整数除法并将其他所有内容归零。

将其更改为：

```
sqrt(2.0/10.0)*sin((3.14/10.0)*x) 
```

或者：

```
sqrt(0.2)*sin(0.314*x) 
```

# asp.net-mvc - MVC 3.0 查看一个包含html的字符串变量是否可以？

> ID：15631592
> 
> 赞同：0
> 
> 时间：2013-03-26T07:26:35.150
> 
> 标签：asp.net-mvc, razor

在上面的 MVC 3.0 查看一个字符串变量包括 html 但不起作用

```
 string address = "-";
                if (Model.Landmark != null)
                {
                    address = Model.FlatBuildingName + " " + Model.RoadStreet + " " + Model.Landmark +"</br> "+ Model.Pincode + " " + Model.Villagecity ;
                } 
```

包括 html 标签，但不显示

## 输出

```
FlatBuildingName RoadStreet Landmark</br>PincodeVillagecity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:57:51.473

尝试[HtmlHelper.Raw 方法](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)将您的字符串写入 html 文档。像这样：

```
@Html.Raw(address) 
```

但是您应该自己检查和清理 html，因为如果您的字符串包含脚本，它们将在浏览器中执行。

# java - 使用约定插件更改 Struts2 中的 URL 映射

> ID：15631596
> 
> 赞同：0
> 
> 时间：2013-03-26T07:26:50.297
> 
> 标签：java, struts2, annotations, convention

我目前正在`struts2`使用约定插件学习注释。除了 URL 映射，一切都很好。我想使用以下 URL 访问操作：`http://{my domain name}/{action name}`.

但经过多次尝试，我总是以`http://{my domain name}/{project name}/{action name}`

我的行动：

```
package com.vaanila.action;

import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Result;

public class WelcomeUserAction {
private String userName;
private String message;

public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

public String getMessage() {
    return message;
}

public void setMessage(String message) {
    this.message = message;
}

@Action(value="/Welcome", results={@Result(name="success", location="successPage.jsp")})
public String execute()
{
    message = "Welcome " + userName;
    return "success";
}
} 
```

我的 index.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib uri="/struts-tags" prefix="s" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World</title>
</head>
<body>
<s:form action="/Welcome">
    <s:textfield name="userName" label="User Name"/>
    <s:submit />
</s:form>
</body>
</html> 
```

我的成功.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Welcome User</title>
</head>
<body>
<h1>${message}</h1>
</body>
</html> 
```

和 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <display-name>HelloWorld</display-name>
  <filter>
<filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter> 

  <filter-mapping>
<filter-name>struts2</filter-name>
<url-pattern>/*</url-pattern>
  </filter-mapping>

  <welcome-file-list>    
    <welcome-file>index.jsp</welcome-file>        
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:36:16.243

您应该使用名称`ROOT.war`而不是`{project name}.war`.

# sql - 如何优化乘法连接查询？

> ID：15631597
> 
> 赞同：0
> 
> 时间：2013-03-26T07:26:54.517
> 
> 标签：sql, postgresql, query-optimization, postgresql-performance

我有一个这样的查询

```
SELECT DISTINCT p.id 
FROM person p 
    INNER JOIN person_func pf1 
        ON p.id = pf1.person_id 
    INNER JOIN Func f1 
        ON f1.id = pf1.func_id
    LEFT JOIN person_location pf2 
        ON p.id = pf2.person_id 
    LEFT JOIN Location f2 
        ON f2.id = pf2.location_id AND f2.val='1'
    LEFT JOIN person_location pf3 
        ON p.id = pf3.person_id 
    LEFT JOIN Location f3 
        ON f3.id = pf3.location_id and f3.val='3'
WHERE f2.val IS NOT NULL OR f3.val IS NOT NULL; 
```

通常有 9-10 个这样的连接。它运行得非常非常慢。我在 person_func(person_id)、person_location(person_id) 上添加了索引，但没有帮助。我可以做些什么来优化它？

一个例子 - [SQLFiddle 例子](http://sqlfiddle.com/#!1/dc885/9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:15:12.757

如果超过 ~ 5% 的表有`val IS NOT NULL`（很可能是这种情况），则索引对子句将`val`无用*。*`WHERE`

不过，它可能对 JOIN 子句有所帮助，您可以在其中加入特定值。但是，更好的是：多列索引：

```
CREATE INDEX some_name_idx ON Location (location_id, val) 
```

根据具体情况（特别是 if和`val = 1`arerare *）*，部分索引可能会更好地为您服务：`val = 3`

 *```
CREATE INDEX some_name1_idx ON Location (location_id)
WHERE val = 1

CREATE INDEX some_name3_idx ON Location (location_id)
WHERE val = 3 
```

除此之外，如果使用的值不是常见的（小于表的 5%），那么您需要在 JOIN 或 WHERE 条件中使用的每一列上都有一个索引——通常情况下这是正确的。

所有[通常的性能优化建议](https://wiki.postgresql.org/wiki/Performance_Optimization)都适用。

如果您需要更具体的建议，则需要发布大量信息。阅读[postgresql-performance](/questions/tagged/postgresql-performance "show questions tagged 'postgresql-performance'")的[标签 wiki](https://stackoverflow.com/tags/postgresql-performance/info)。

由于您要加入这么多表，因此您可能会超出 Postgres 无法再找到最佳计划的一些限制（可能的变化太多）。*首先编写最具选择性*的JOIN可能变得很重要。在这种情况下，一般`JOIN`会出现在前面。[在此处阅读手册中的更多信息。](http://www.postgresql.org/docs/current/interactive/runtime-config-query.html#RUNTIME-CONFIG-QUERY-GEQO)`LEFT JOIN`

### `CROSS JOIN`通过代理

所以你有 10 个左连接。示例：如果其中一半有 3 个匹配项，则将行数乘以 3^5 = 243。或者如果它们全部有 5 个匹配项，则乘以 5^10 = 9765625。这必然会导致*糟糕*的性能。一切都是徒劳的，因为你只想要`DISTINCT id`最后。

锦上添花：要获得`DISTINCT person.id`，所有那些 LEFT JOIN 都是 100% 没用的。他们不会改变任何事情。只需将它们全部删除即可。

至于`JOIN`：替换那些[`EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)以避免成倍增加你的行。喜欢：

```
EXISTS (SELECT 1 FROM Func f1 WHERE f1.id = pf1.func_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:31:47.400

WHERE 子句实际上似乎是多余的。您已经根据作为特定值的值进行了连接，然后您的 WHERE 子句验证这些值不是 NULL，因此所做的只是验证连接是否发生。因此，如果您只获取发生连接的行，则可以只使用 INNER JOIN 而不是 LEFT JOIN。==> f2.val 只有在没有发生 LEFT JOIN 时才会为空。

> 左连接位置 f2 ON f2.id = pf2.location_id AND **f2.val='1'**
> 
> 其中f2.val**不为空**

因此，在这种情况下，您可能只尝试内部连接。

您还可以识别与您想要的值相对应的 ID，然后加入这些 ID。这些将是主键，并且可能更有效。

**确定真正的问题**

我还建议您逐个取出每个连接并重新运行查询，并注意每次减少时间。这将有望向您显示导致问题的连接或 where 子句元素。

1.  按原样运行查询。
2.  删除第一个 where 子句表达式。
3.  删除第二个 where 子句表达式。
4.  删除一个联接
5.  删除另一个联接...*

# java - 导入wsdl时遇到的问题

> ID：15631598
> 
> 赞同：0
> 
> 时间：2013-03-26T07:26:56.197
> 
> 标签：java, wsdl, tibco, axis

我创建了一个 Web 服务“患者”，并将其托管在 Axis 上以获取 WSDL：

WSDL 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:ns1="http://org.apache.axis2/xsd" xmlns:ns="http://ws.apache.org/axis2" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://ws.apache.org/axis2">
    <wsdl:documentation>getPatientDetails</wsdl:documentation>
    <wsdl:types>
        <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://ws.apache.org/axis2">
            <xs:element name="getPatientDetails">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" name="args0" nillable="true" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="getPatientDetailsResponse">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="RequestMessage">
        <wsdl:part name="parameters" element="ns:getPatientDetails"/>
    </wsdl:message>
    <wsdl:message name="ResponseMessage">
        <wsdl:part name="parameters" element="ns:getPatientDetailsResponse"/>
    </wsdl:message>
    <wsdl:portType name="getPatientDetailsPortType">
        <wsdl:operation name="getPatientDetails">
            <wsdl:input message="ns:RequestMessage" wsaw:Action="urn:getPatientDetails"/>
            <wsdl:output message="ns:ResponseMessage" wsaw:Action="urn:getPatientDetailsResponse"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="getPatientDetailsSoap11Binding" type="ns:getPatientDetailsPortType">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="getPatientDetails">
            <soap:operation soapAction="urn:getPatientDetails" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="getPatientDetailsSoap12Binding" type="ns:getPatientDetailsPortType">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="getPatientDetails">
            <soap12:operation soapAction="urn:getPatientDetails" style="document"/>
            <wsdl:input>
                <soap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="getPatientDetailsHttpBinding" type="ns:getPatientDetailsPortType">
        <http:binding verb="POST"/>
        <wsdl:operation name="getPatientDetails">
            <http:operation location="getPatientDetails"/>
            <wsdl:input>
                <mime:content type="text/xml" part="parameters"/>
            </wsdl:input>
            <wsdl:output>
                <mime:content type="text/xml" part="parameters"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="getPatientDetails">
        <wsdl:port name="getPatientDetailsHttpSoap11Endpoint" binding="ns:getPatientDetailsSoap11Binding">
            <soap:address location="http://localhost:8080/axis2/services/getPatientDetails.getPatientDetailsHttpSoap11Endpoint/"/>
        </wsdl:port>
        <wsdl:port name="getPatientDetailsHttpSoap12Endpoint" binding="ns:getPatientDetailsSoap12Binding">
            <soap12:address location="http://localhost:8080/axis2/services/getPatientDetails.getPatientDetailsHttpSoap12Endpoint/"/>
        </wsdl:port>
        <wsdl:port name="getPatientDetailsHttpEndpoint" binding="ns:getPatientDetailsHttpBinding">
            <http:address location="http://localhost:8080/axis2/services/getPatientDetails.getPatientDetailsHttpEndpoint/"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

但是，当我尝试将 WSDL 导入 TIBCO 业务作品时，我遇到了问题：WSDL 在 SoapUI 工具上运行，并且 java 代码运行良好。

# c# - 如何设置 SQL Server 连接字符串？

> ID：15631602
> 
> 赞同：110
> 
> 时间：2013-03-26T07:27:05.547
> 
> 标签：c#, sql-server, connection-string, sa

我正在开发一个简单的 C# 应用程序，我想知道这一点：当我将我的应用程序连接到我的 PC 上的 SQL Server 时，我知道连接字符串（服务器名称、密码等），但是当我连接它时到另一台 PC，SQL Server 连接字符串不同。SQL Server 中是否有带有可以连接的默认帐户的通用帐户？

我听说过`sa`SQL Server 中的帐户。是什么`sa`？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-03-26T08:21:20.170

### .NET DataProvider -- 使用用户名和密码的标准连接

```
using System.Data.SqlClient;

SqlConnection conn = new SqlConnection();
conn.ConnectionString =
  "Data Source=ServerName;" +
  "Initial Catalog=DataBaseName;" +
  "User id=UserName;" +
  "Password=Secret;";
conn.Open(); 
```

### .NET DataProvider——可信连接

```
SqlConnection conn = new SqlConnection();
conn.ConnectionString =
  "Data Source=ServerName;" +
  "Initial Catalog=DataBaseName;" +
  "Integrated Security=SSPI;";
conn.Open(); 
```

请参阅[文档](https://docs.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.connectionstring?redirectedfrom=MSDN&view=netframework-4.8#System_Data_SqlClient_SqlConnection_ConnectionString)。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-04-23T16:19:27.050

实际上，您可以使用`SqlConnectionStringBuilder`该类来构建您的**连接字符串**。要构建**连接字符串**，您需要从中实例化一个对象，`SqlConnectionStringBuilder`并使用用于连接数据库的参数设置它们的属性。然后您可以从对象的属性中获取**连接字符串**，如下例所示：`ConnectionString``SqlConnectionStringBuilder`

例如：

```
SqlConnectionStringBuilder sConnB = new SqlConnectionStringBuilder ()
    {
        DataSource = "ServerName",
        InitialCatalog = "DatabaseName",
        UserID = "UserName",
        Password = "UserPassword"
    }.ConnectionString

SqlConnection conn = new SqlConnection(sConnB.ConnectionString); 
```

您可以使用`new`运算符直接进行操作。

例如：

```
SqlConnection conn = new SqlConnection(
    new SqlConnectionStringBuilder ()
    {
        DataSource = "ServerName",
        InitialCatalog = "DatabaseName",
        UserID = "UserName",
        Password = "UserPassword"
    }.ConnectionString
); 
```

您可以添加更多参数来构建您的**连接字符串**。请记住，参数由`SqlConnectionStringBuilder`对象属性中设置的值定义。

您还可以从 Microsoft Visual Studio 与附加数据库的连接中获取数据库连接字符串。当您选择数据库时，属性面板中会显示**连接字符串**。

类属性的完整列表[在 Microsoft MSDN 站点](https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder(v=vs.110).aspx)`SqlConnectionStringBuilder`的此页面中列出。

关于 SQL Server 的默认用户，**sa**表示“系统管理员”，其密码因 SQL Server 版本而异。在[此页面上](http://support.webecs.com/kb/a867/what-is-the-default-password-for-the-sa-login.aspx)，您可以看到密码是如何变化的。

> **SQL Server 2008/R2 Express 用户：** *sa 密码：* [空白密码 - 留空以进行连接]
> **SQL Server 201x Express 用户：** *sa 密码：* Password123
> **SQL Server 20xx Web 或标准用户：** *sa 密码：* 将与您的管理员相同或预配 VDS 时的 root 用户密码。

您可以在SQL Server 数据库管理器启动时在此登录窗口中使用**sa用户登录。**就像在这张图片中：

[![登录示例](../Images/bac49790009a42aae53e1cc605120961.png)](https://i.stack.imgur.com/K2r02.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-05-08T07:19:03.627

**.NET 数据提供者——默认相对路径——标准连接**

```
 using System.Data.SqlClient;
 var conn = new SqlConnection();
 conn.ConnectionString = 
 "Data Source=.\SQLExpress;" + 
 "User Instance=true;" + 
 "User Id=UserName;" + 
 "Password=Secret;" + 
 "AttachDbFilename=|DataDirectory|DataBaseName.mdf;"conn.Open(); 
```

**.NET 数据提供者 -- 默认相对路径 -- 可信连接**

```
 using System.Data.SqlClient;
 var conn = new SqlConnection();
 conn.ConnectionString = 
 "Data Source=.\SQLExpress;" + 
 "User Instance=true;" + 
 "Integrated Security=true;" + 
 "AttachDbFilename=|DataDirectory|DataBaseName.mdf;" conn.Open(); 
```

**.NET 数据提供者——自定义相对路径——标准连接**

```
using System.Data.SqlClient;
AppDomain.CurrentDomain.SetData(
"DataDirectory", "C:\MyPath\");
 var conn = new SqlConnection();
 conn.ConnectionString = 
 "Data Source=.\SQLExpress;" + 
 "User Instance=true;" + 
 "User Id=UserName;" + 
 "Password=Secret;" + 
"AttachDbFilename=|DataDirectory|DataBaseName.mdf;" conn.Open(); 
```

**.NET 数据提供者——自定义相对路径——可信连接**

```
 using System.Data.SqlClient;
 AppDomain.CurrentDomain.SetData(
 "DataDirectory", "C:\MyPath\");
 var conn = new SqlConnection();
 conn.ConnectionString = 
 "Data Source=.\SQLExpress;" + 
 "User Instance=true;" + 
 "Integrated Security=true;" + 
 "AttachDbFilename=|DataDirectory|DataBaseName.mdf;" conn.Open(); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-26T09:26:34.153

您可以按如下方式使用连接字符串，您只需要添加您的数据库名称。

```
string connetionString = "Data Source=.;Initial Catalog=DB name;Integrated Security=True;MultipleActiveResultSets=True"; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-26T07:33:33.860

当连接到另一台计算机上的 SQL Server 时，需要担心这些问题。

*   机器的主机/IP地址
*   初始目录（数据库名称）
*   有效的用户名/密码

很多时候，SQL Server 可能作为默认实例运行，这意味着您可以简单地指定主机名/IP 地址，但您可能会遇到它作为命名实例运行的情况（例如[SQL Server Express Edition](https://en.wikipedia.org/wiki/SQL_Server_Express)）。在这种情况下，您必须指定主机名/实例名称。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-26T07:36:41.293

如果您的服务器在域中，您可以使用 Windows 身份验证，也可以使用 SQL Server 身份验证。*Sa*是系统管理员，用于 SQL Server 身份验证的 root 帐户。但是使用 if 连接到您的客户是一种不好的做法。

您应该创建自己的帐户，并使用它们连接到您的 SQL Server 实例。**在您设置帐户登录**的每个连接中，它的**密码**和您想要连接的**默认数据库。**

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-01-14T11:49:55.977

`sa`是 SQL Server 默认附带的系统管理员帐户。您可能已经知道，您可以使用两种方式登录 SQL Server。

[![SQL Server Management Studio 的屏幕截图](../Images/5865bab836bda41cc620cefec912abd5.png)](https://i.stack.imgur.com/nIHgf.png)

因此，有适合每个场景的连接字符串（例如 Windows 身份验证、localdb 等）。使用*[ASP.NET Web 应用程序的 SQL Server 连接字符串](https://docs.microsoft.com/en-us/previous-versions/aspnet/jj653752(v=vs.110))*来构建连接字符串。这些是 XML 标记。您只需要一个**connectionString**值。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-07-15T07:47:24.160

我们可以像这样简单地连接到数据库：

```
 uid=username;pwd=password;database=databasename;server=servername 
```

例如：

```
string connectionString = @"uid=spacecraftU1;pwd=Appolo11;
                            database=spacecraft_db;
                            server=DESKTOP-99K0FRS\\PRANEETHDB";
SqlConnection con = new SqlConnection(connectionString); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-26T07:35:23.223

You need to understand that a database server or [DBA](https://en.wikipedia.org/wiki/Database_administrator) would not want just anyone to be able to connect or modify the contents of the server. This is the whole purpose of security accounts. If a single username/password would work on just any machine, it would provide no protection.

That "sa" thing you have heard of, does not work with [SQL Server 2005](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2005), [2008](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2008) or [2012](https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#SQL_Server_2012). I am not sure about previous versions though. I believe somewhere in the early days of SQL Server, the default username and password used to be *sa*/*sa*, but that is no longer the case.

FYI, database security and roles are much more complicated nowadays. You may want to look into the details of Windows-based authentication. If your SQL Server is configured for it, you don't need any username/password in the connection string to connect to it. All you need to change is the server machine name and the same connection string will work with both your machines, given both have same database name of course.

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2019-06-20T18:28:30.370

```
"ConnectionString":{
  "Database_Name": "server=.;database=Database_Name;Integrated Security=true;"
}, 
```

试试这个

# android - MainActivity 线程外的无效和 ImageView

> ID：15631610
> 
> 赞同：0
> 
> 时间：2013-03-26T07:27:52.363
> 
> 标签：android, dialog, imageview, invalidation, ui-thread

我的 MainActivity 的 contentView/View 可以通过在调用后的任何地方简单地使用 invalidate() 来刷新：

```
setContentView(R.layout.activity_main); 
```

但是，如果我要在我的项目选择中调用一个对话框：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()){
    case R.id.menu_tools:
        showDialog();
        return true;
            ... 
```

这样做不会刷新对话框内的 ImageView：

```
public class ToolSettingsDialog extends Dialog {
                ...
private void updatePreview() {
    ImageView image = (ImageView)findViewById(R.id.widthImageView);

    Bitmap bitmap = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    bitmap.eraseColor(Color.WHITE);

    Drawing d = null;
    d = box.getDrawing();
    s.draw(paint, canvas);
    image.setImageBitmap(bitmap);
    image.invalidate();     
} 
```

我一直在环顾四周，我似乎无法理解如何在与 UI 不同的线程中无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:32:50.233

`Dialogs`绘制在 上`UI thread`，类似于 Android 上的所有其他 UI 操作。所以这可能不是你的问题。

此外，您不能在 UI 线程之外执行 UI 操作。您必须`invalidate()`在 UI 线程上执行，使用类似`View.postInvalidate()`or的东西`Activity.runOnUIThread()`。

# ms-access - 访问找不到字段“|” 表达中提到的

> ID：15631611
> 
> 赞同：0
> 
> 时间：2013-03-26T07:27:54.260
> 
> 标签：ms-access, vba, ms-access-2007

我遇到了错误'microsoft office access 找不到字段'|' 在你的表达式中提到“当我使用 DCount 函数来计算表中出现 OrderNo 的次数时。OrderNo 的数据类型是数字。这就是我所做的

```
If DCount("[OrderNo]", "tblDisposition", "[OrderNo]='" & [txtOrderNo.Value] & "'") > 1 Then
    MsgBox "Duplicate data", vbOKOnly, "ERROR"
Else
    MsgBox "succeed"
End If 
```

在表单的加载事件中，我将 txtOrderNo 控制源设置为 tblDisposition 中的 OrderNo。我也尝试使用 DLookup 函数，它似乎是相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:32:09.450

表情`[txtOrderNo.Value]`看起来不对。尝试不带方括号，例如：

```
If DCount("[OrderNo]", "tblDisposition", "[OrderNo]=" & txtOrderNo.Value) > 1 Then
    MsgBox "Duplicate data", vbOKOnly, "ERROR"
Else
    MsgBox "succeed"
End If 
```

# c++ - GCC shared_ptr 模板错误

> ID：15631612
> 
> 赞同：2
> 
> 时间：2013-03-26T07:28:14.053
> 
> 标签：c++, templates, g++, shared-ptr

以下函数

```
#include <memory>

template<typename T>
std::shared_ptr<typename T> Tail(const std::shared_ptr<typename T>& cont, size_t n)
{
   const auto size(std::min<size_t>(n, cont->size()));
   return std::shared_ptr<typename T>(new T(cont->end() - size, cont->end()));
} 
```

在 gcc 4.7.2 上产生以下错误。

```
g++ test.cpp -std=c++0x
test.cpp:4:27: error: template argument 1 is invalid
test.cpp:4:66: error: template argument 1 is invalid
test.cpp: In function ‘int Tail(const int&, size_t)’:
test.cpp:6:42: error: base operand of ‘->’ is not a pointer
test.cpp:7:35: error: template argument 1 is invalid
test.cpp:7:47: error: base operand of ‘->’ is not a pointer
test.cpp:7:67: error: base operand of ‘->’ is not a pointer 
```

我知道 cont 并不“看起来”像一个指针，但这在 VS2012 上编译得很好。如何为 gcc 编写函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:30:26.123

只需删除那些多余`typename`的 s

```
template<typename T>
std::shared_ptr<T> Tail(const std::shared_ptr< T>& cont, size_t n)
{
   const auto size(std::min<size_t>(n, cont->size()));
   return std::shared_ptr< T>(new T(cont->end() - size, cont->end()));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:31:44.020

您过度使用了`typename`关键字。代码应如下所示：

```
template<typename T>
std::shared_ptr<T> Tail(const std::shared_ptr<T>& cont, size_t n)
{
   const auto size(std::min<size_t>(n, cont->size()));
   return std::shared_ptr<T>(new T(cont->end() - size, cont->end()));
} 
```

如需进一步讨论，请参阅[在何处以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:32:15.880

您不必`typename`在每次使用参数之前都重写，因此请将其更改为：

```
template<typename T>
std::shared_ptr<typename T> Tail(const std::shared_ptr<T>& cont, size_t n)
{
   const auto size(std::min<size_t>(n, cont->size()));
   return std::shared_ptr<typename T>(new T(cont->end() - size, cont->end()));
} 
```

这与 ie 类的问题相同，您不写`void myfunc(class MyClass &m){}`，而只是简单地`void myfunc(MyClass &m){}`

# magento - 自定义静态块小部件未显示在任何前端页面中 - Magento

> ID：15631621
> 
> 赞同：4
> 
> 时间：2013-03-26T07:28:36.047
> 
> 标签：magento, magento-1.7

在 magento 管理部分，我创建了一个静态块并将内容添加到其中。然后创建了一个小部件实例并选择了这个静态块。在布局更新中，我选择了这个小部件以显示在所有页面上的右栏和所有产品类型中，产品视图额外提示。

但是，小部件没有出现在任何页面中。我可以知道不显示小部件的问题是什么。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:40:42.593

我发现了在前端页面中停止显示小部件的问题。在创建小部件实例时，设计包/主题应该是默认的/默认的。将主题修改为默认/默认包，小部件显示在所有页面中。

# php - 如何检索文件的前 n 行？(php)

> ID：15631622
> 
> 赞同：1
> 
> 时间：2013-03-26T07:28:37.993
> 
> 标签：php, file, fopen, tokenize, fputs

```
$fileName = file ("gstbook.txt");
$rows = count ($fileName);

// $Char is the string that will be added to the file.
if ($Char != '') 
{
  $Char = str_replace ("\n","<br>",$Char);
  $Char = strip_tags ($Char, '<br>');

  $newRow = '<tr><td>' . ($username) . ": " . ($Char) . '</td></tr>';

  $oldRows = join ('', file ('gstbook.txt') );
  $fileName = fopen ('gstbook.txt', 'w');
  fputs ($fileName, $oldRows . chr(13) . chr(10) . $newRow);
  fclose ($fileName);
} 
```

我正在从网站上的教程开始工作。这是一个留言簿程序，我正试图将它变成一个小聊天，以便与我的其他应用程序一起使用。

我被困的地方与这两行有关：

```
 $oldRows = join ('', file ('gstbook.txt') ); 
```

和：

```
 fputs ($fileName, $oldRows . chr(13) . chr(10) . $newRow); 
```

我可以说它将整个文件输入到一个字符串中。然后输出该字符串。我无法从谷歌那里弄清楚如何让它只将文件的前*n*行输入到 $oldRows 变量中。

好消息是

```
</tr> 
```

每个文件行可以作为分隔符。坏消息是我不知道从那里去哪里。

有人能告诉我如何将 $oldRows 变量的输入限制为 $filename 中的*n*行，或者如何将 $oldRows 变量缩减为*n*行吗？

更正：

我需要获取文件的**最后** *n*行（最新添加到末尾）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:37:40.813

Try

```
array_map( 'trim', file( $filename ) ); 
```

this will return array of string, then you can use for/foreach

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:43:27.477

我会使用[array_slice](http://php.net/array_slice)

这是一个例子：

```
$data = file('file.txt');
$data = array_slice($data, count($data) - 1, null, true);
print_r($data); 
```

在上面的代码`count($data) - 1)`中，您设置了*n*参数，在这种情况下，它正在获取文件的最后一行。

# extjs - 将组件浮动在 extjs 中的父组件之上

> ID：15631625
> 
> 赞同：1
> 
> 时间：2013-03-26T07:28:57.440
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我之前在这里问过这个问题，但可能是因为缺乏理解，没有人回答正确。我正在尝试在父容器`toolbar`的事件中使用（或您想要推荐的其他东西） 。`mouseenter`

现在，我在`toolbar`父容器的底部可见，正在调整`container2`具有`flex: 1`.

![在此处输入图像描述](../Images/aaaf7a3b0d36e51594fa84af4b702c40.png)

![在此处输入图像描述](../Images/704336f5888e68c37f195a53066e1d64.png)

这是我的代码：

```
var hContainer = [];  //adding many blocks to this dynamically
hContainer.push({
    xtype: 'panel',
    flex:1,             
    layout: {type:'vbox',align:'stretch'},                       
    items:[{
        xtype: 'container',
        height: 10,
        html: 'hello'
    },
    {
        xtype: 'container',
        flex: 1
    }]              
}) 
```

然后`mouseenter`是父容器的事件，即。`panel`添加下面的变量是这样的`parentContainer.add(upperController)`。

```
var upperController = {                                                              
   xtype: 'toolbar',                                                                  
   defaultAlign: 'tl',  //no effect at all                                                                 
   items: ['->',{                                                               
       xtype: 'button',                                                             
       text: '+'                                                              
   }]                                                   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:39:33.293

如果是我，我会执行以下操作：容器 1 和容器 2 让我们说`flex: 1`并`flex: 2`确定它们的高度。

让 Container 1 表现得像一个容器并设置一个 extra `layout: 'vbox'`，以便容器 1 的高度由于`flex: 1`父容器上的而保持不变。

然后，您可以在不更改其高度的情况下将项目添加到容器 1，因为`flex`这些子项（项）的 将确定这些子项（项）的高度。

# iphone - 想要在 UITableView 中从右向左滑动显示删除按钮

> ID：15631629
> 
> 赞同：6
> 
> 时间：2013-03-26T07:29:16.847
> 
> 标签：iphone, objective-c, uitableview

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{
    return UITableViewCellEditingStyleDelete;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{

    if(editingStyle == UITableViewCellEditingStyleDelete){
        //[theSimpsons removeObjectAtIndex:indexPath.row];

        NSString *time = [[arrayList objectAtIndex:indexPath.row] objectForKey:@"TIME"];
        NSString *date= [[arrayList objectAtIndex:indexPath.row] objectForKey:@"DATE"];
        DBManager *dbm = [[DBManager alloc] init];
        [dbm initiallzeDatabase];
        [dbm deleteItemAtIndexPath:time :date];

        //arrayList = [dbm getParkResults];
        //[parkTableView reloadData];

        [arrayList removeObjectAtIndex:indexPath.row];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

我在我的应用程序中使用了上面的代码。编辑部分工作正常，但问题是，只有当我们在单元格上从左向右滑动时才会出现删除按钮。现在我有一个菜单，可以像 Facebook 一样从左到右滑动打开。那么我如何确保当用户从右向左滑动时出现删除按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T10:14:02.367

请不要将代表设置为`UISwipeGestureRecognizer`

把这个写`viewDidLoad`在你发起你的`UITableView`

```
 UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(callYourMethod:)];
 swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
 [self.tblView addGestureRecognizer:swipeRight]; 
```

**不需要在下面的方法中写任何东西。**

```
- (void)callYourMethod:(UISwipeGestureRecognizer *)recognizer
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:37:52.207

这可能会奏效。将此代码放入`awakeFromNib`or `init`：

```
UISwipeGestureRecognizer *swipeDelete = [[UISwipeGestureRecognizer alloc]     initWithTarget:self action:@selector(handleSwipeDelete:)];
[swipeDelete setDirection: UISwipeGestureRecognizerDirectionLeft];
[yourTableView addGestureRecognizer:swipeDelete]; 
```

然后在`handleSwipeDelete`组织您的单元格并显示删除按钮。您可能需要处理单元格状态并在 swipeLeft/swipeRight 上更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T07:50:20.403

看起来您需要自定义 UITableViewCell 的行为，我从未注意到 Apple 在从右向左滑动后提供了该行为....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:28:15.663

你可以通过使用得到它`two Methods of UITableVie.`

```
// This only needs to be implemented if you are going to be returning NO
// for some items. By default, all items are editable.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    // Return YES if you want the specified item to be editable.
    return YES;
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //add code here for when you hit delete
     //When you remove a cell of your tableview, you also has to remove your array object at index x
    }    
} 
```

取出物体后。您必须重新加载`UITableView`.

```
[self.tableView reloadData]; 
```

欲了解更多信息，请[阅读此官方文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

# c# - 如何使用异步方法对 ViewModel 进行单元测试。

> ID：15631635
> 
> 赞同：5
> 
> 时间：2013-03-26T07:29:35.140
> 
> 标签：c#, unit-testing, mvvm, prism, async-await

我不知道从哪里开始，但让我简要介绍一下我在哪里以及我想要实现的目标。我对 MVVM 上的单元测试非常陌生，并且很难测试我使用 PRISM 委托命令属性公开的命令。我的委托命令调用必须等待的异步方法，以便我可以获得实际结果。下面是一个由我想测试的方法调用的 asyc 方法。

```
 async void GetTasksAsync()
        {
            this.SimpleTasks.Clear();
            Func<IList<ISimpleTask>> taskAction = () =>
                {
                    var result = this.dataService.GetTasks();
                    if (token.IsCancellationRequested)
                        return null;
                    return result;
                };
            IsBusyTreeView = true;

            Task<IList<ISimpleTask>> getTasksTask = Task<IList<ISimpleTask>>.Factory.StartNew(taskAction, token);
            var l = await getTasksTask;          // waits for getTasksTask

            if (l != null)
            {
                foreach (ISimpleTask t in l)
                {
                    this.SimpleTasks.Add(t); // adds to ViewModel.SimpleTask
                }
            }
        } 
```

这也是我的虚拟机中调用上述异步方法的命令

```
 this.GetTasksCommand = new DelegateCommand(this.GetTasks);
      void GetTasks()
        {
                GetTasksAsync();
        } 
```

现在我的测试方法就像

```
 [TestMethod]
        public void Command_Test_GetTasksCommand()
        {
          MyViewModel.GetTaskCommand.Execute(); // this should populate ViewModel.SimpleTask 
          Assert.IsTrue(MyBiewModel.SimpleTask != null)
        } 
```

目前我得到的是我的 ViewModel.SimpleTask = null 这是因为它不等待异步方法完成。我知道堆栈溢出中已经有一些相关的主题，但我找不到与我的 DelegateCommands 相关的内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T07:50:19.977

您的方法 GetTasksAsync 应该返回一个 Task 以便您可以真正等待它。

我在 Channel9 上推荐[这个系列，特别是](http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async)[这一集](http://channel9.msdn.com/Series/Three-Essential-Tips-for-Async/Tip-1-Async-void-is-for-top-level-event-handlers-only)来解释你的问题。

只是说清楚：只需将 GetTasksAsync 的签名更改为

```
Task GetTasksAsync(); 
```

允许您这样做：

```
var t = GetAsync();
t.Wait();
Assert(...); 
```

如果您真的想在单元测试中测试命令而不是命令调用的实际方法，您可以使用 ViewModel 中的一个字段来存储要等待的任务（不是那么干净）或用类似中描述的内容替换您的 DelegateCommand这篇文章：[Awaitable DelegateCommand](http://jake.ginnivan.net/awaitable-delegatecommand)

更新：除了博客文章，考虑到您正在使用 PRISM，您应该看看与 PRISM 来自同一团队的[Project Kona 。](http://konaguidance.codeplex.com/)他们实际上实现[了 DelegateCommand 来支持 AsyncHandlers](http://konaguidance.codeplex.com/SourceControl/changeset/view/cb2b257e240e#StoreApps.Infrastructure/DelegateCommand.cs)

# apache2 - 列出加载的 apache2 模块在 debian 中失败

> ID：15631636
> 
> 赞同：0
> 
> 时间：2013-03-26T07:29:54.790
> 
> 标签：apache2, debian

我想列出在 debian 5 中加载的 apache2 模块，使用

“**阿帕奇2-M** ”

但我发现它返回以下错误

```
apache2: bad user name ${APACHE_RUN_USER} 
```

有什么办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:33:55.803

检查您的环境变量，确保它们适用于 apache2 实用程序。尝试使用“source /etc/apache2/envvars”，它应该可以解决您的问题。希望这对您有所帮助。

# postgresql - 过去 X 个月内的 PostgreSQL 累积计数

> ID：15631638
> 
> 赞同：2
> 
> 时间：2013-03-26T07:30:07.287
> 
> 标签：postgresql, aggregate-functions, window-functions, postgresql-performance

给定下表：

```
CREATE TABLE cnts(
  user_id INT,
  month_d DATE,
  cnt INT
) 
```

我想查询每个 (user_id, month_d) 对的最后 6 个月的累积计数。我可以通过以下 JOIN 来做到这一点：

```
SELECT
  S1.month_d AS "month_d",
  S1.user_id AS "user_id",
  SUM(S2.cnt) AS "last_6_months_cnt"
FROM cnts S1
LEFT JOIN cnts S2 ON S1.user_id = S2.user_id
                 AND (S2.month_d BETWEEN (S1.month_d - INTERVAL '5 MONTH') AND S1.month_d)
GROUP BY 1, 2
ORDER BY 2, 1; 
```

但我想知道这是否可以用窗口函数解决？

**样本数据：**

```
INSERT INTO cnts(user_id, month_d, cnt) VALUES 
(1, '2013-01-01', 2),
(1, '2013-04-01', 2),
(1, '2013-07-01', 2),
(1, '2013-10-01', 2),

(2, '2013-01-01', 2),
(2, '2013-04-01', 2),
(2, '2013-07-01', 2),
(2, '2013-10-01', 2)
; 
```

**预期结果（来自上面的连接）：**

```
 month_d   | user_id | last_6_months_cnt 
------------+---------+-------------------
 2013-01-01 |       1 |                 2
 2013-04-01 |       1 |                 4
 2013-07-01 |       1 |                 4
 2013-10-01 |       1 |                 4
 2013-01-01 |       2 |                 2
 2013-04-01 |       2 |                 4
 2013-07-01 |       2 |                 4
 2013-10-01 |       2 |                 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:28:50.670

## PostgreSQL 12 及更新版本

**更新**：PostgreSQL 12 和更新版本现在支持`RANGE`windows。

正确的方法是使用一个窗口`RANGE (INTERVAL '6' MONTH) PRECEDING`：

```
demo=> SELECT month_d, user_id, 
              SUM(cnt) OVER (PARTITION BY user_id ORDER BY month_d RANGE INTERVAL '6' MONTH PRECEDING)
       FROM cnts ORDER BY 2,1;

  month_d   | user_id | sum 
------------+---------+-----
 2013-01-01 |       1 |   2
 2013-04-01 |       1 |   4
 2013-07-01 |       1 |   6
 2013-10-01 |       1 |   6
 2013-01-01 |       2 |   2
 2013-04-01 |       2 |   4
 2013-07-01 |       2 |   6
 2013-10-01 |       2 |   6
(8 rows) 
```

## PostgreSQL 11 及更早版本

在 PostgreSQL 11 或更早版本`RANGE`上尚不支持 Windows，因此查询将失败：

```
regress=> SELECT month_d, user_id, 
          SUM(cnt) OVER (PARTITION BY user_id ORDER BY month_d RANGE INTERVAL '6' MONTH PRECEDING) 
          FROM cnts ORDER BY 2,1;
ERROR:  RANGE PRECEDING is only supported with UNBOUNDED
LINE 1: ...(cnt) OVER (PARTITION BY user_id ORDER BY month_d RANGE INTE... 
```

没有它，您将返回 join over `generate_series`，并且在多个用户 ID 上执行此操作很麻烦。我怀疑您的自联接方法比尝试使用`ROWS`基于 window over来执行此操作要好得多`sum`。您必须`generate_series`将整个日期范围的 a 与所有不同 uid 的集合交叉连接，然后将其与`cnts`表左外连接，`sum`在窗口上处理它，然后过滤掉具有空计数的行。不用说，这是一种比简单的自加入更折磨人的做事方式。

* * *

对于您的示例数据，以下查询将产生与上面显示的相同的结果：

```
-- This query is totally wrong and only works because of overly simple sample data
SELECT 
  month_d, user_id, 
  SUM(cnt) OVER (PARTITION BY user_id ORDER BY month_d ROWS 1 PRECEDING)
FROM cnts
ORDER BY 2,1; 
```

然而，这是完全错误的。我展示它主要是为了说明样本数据不足以进行可靠的测试，因为结果基本上是靠运气来匹配的。在六个月的范围内，您的所有样本都没有超过两个样本。示例数据很棒，但您需要考虑极端情况，就像编写单元测试时一样。您应该拥有不同的 uid，它们不会在相同的日期开始和停止，具有不同的计数等。

# android - 如何在android程序中的所需点获取输出

> ID：15631640
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:30:10.067
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

这是 JSON 文件：

```
{
   "response":{
      "code":1,
      "message":"success"
   },
   "data":{
      "updates":[
         {
            "update_id":"67",
            "date":"6 months ago",
            "update_type":"7",
            "update_id":"67",
            "name":"ravi"
         },
         {
            "update_id":"68",
            "date":"3 months ago",
            "update_type":"5",
            "update_id":"68",
            "name":"paresh"
         },
         {
            "update_id":"69",
            "date":"1 months ago",
            "update_type":"6",
            "update_id":"69",
            "name":"sampath"
         },
         {
            "update_id":"62",
            "date":"9 months ago",
            "update_type":"6",
            "update_id":"62",
            "name":"raju"
         }
      ]
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:33:02.343

尝试这个，

```
 String str_json = "your json string from query";

    try {
        JSONObject topobj = new JSONObject(str_json);
        JSONObject innerobj = topobj.getJSONObject("yourdate");

        String name = innerobj.getString("yourdata");
        String photo = innerobj.getString("yourdata");
        JSONArray cuisines = innerobj.getJSONArray("yourdata");
        //etc etc...

    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:37:05.360

```
 try {
        HttpClient httpclient = getNewHttpClient();
        HttpGet httppost = new HttpGet(URL);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch(Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch(Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    try {
        Log.e("log_tag", "result" + result.toString());
        JSONObject json_data = new JSONObject(result);
        String data = json_data.getString("Data");
        json_data = new JSONObject(data);
        String updates = json_data.getString("updates");
        JSONArray json_data1 = new JSONArray(updates);
        for(int i = 0; i < json_data1.length(); i++) {
            json_data = json_data1.getJSONObject(i);
            String update_id = json_data.getString("update_id");
            String date = json_data.getString("date");
        }
    } catch(Exception e) {

    } 
```

# ios - 视图控制器的过渡 - 从左到右

> ID：15631653
> 
> 赞同：4
> 
> 时间：2013-03-26T07:30:58.290
> 
> 标签：ios, uiviewcontroller, transition

我没有使用导航控制器，而是使用故事板。

我必须从 1 个视图控制器过渡到另一个，为此我正在使用 segue。

现在我将 segue 样式设置为 Custom，并在相应的类中覆盖该`perform`方法。

```
-(void)perform
{
    UIViewController *sourceViewController = [self sourceViewController];
    UIViewController *destinationViewController = [self destinationViewController];

    CATransition *transition = [CATransition animation];
    transition.duration = 0.25;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    transition.type = kCATransitionPush;
    transition.subtype = kCATransitionFromLeft;

    [sourceViewController.view.layer addAnimation:transition forKey:kCATransition];animated:NO];
    [sourceViewController presentViewController:destinationViewController animated:YES completion:nil];
} 
```

但也有目标视图控制器的一个属性`modalTransitionStyle`。

所以现在，源 VC 从左到右就像被推送一样，但我想表明它是由目标视图控制器推送的。相反，目标 VC 默认执行“Cover Vertical”，并且该属性只有四个选项可用`modalTransitionStyle`，其中没有一个对我有用。

我认为要让它工作，这个动画应该被添加到一些超级视图层，一个超级视图，两个视图控制器都从中呈现。但是没有这样的superview..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T08:14:11.723

通常你会给destinationController一个storyboardId，然后从sourceViewController这样调用它：

```
//push next view
UIStoryboard *storyboard = self.storyboard;
YourViewControllerClass *destVC = [storyboard instantiateViewControllerWithIdentifier:@"StoryboardID"];
[self.navigationController pushViewController:destVC animated:YES]; 
```

或者，您可以像这样手动执行此操作：

```
 // Get the views.
    UIView * fromView = sourceViewController.view;
    UIView * toView = destinationViewController.view;

    // Get the size of the view area.
    CGRect viewSize = fromView.frame;

    // Add the toView to the fromView
    [fromView.superview addSubview:toView];

    // Position it off screen.
    toView.frame = CGRectMake( 320 , viewSize.origin.y, 320, viewSize.size.height);

    [UIView animateWithDuration:0.4 animations:
     ^{
         // Animate the views on and off the screen. This will appear to slide.
         fromView.frame =CGRectMake( -320 , viewSize.origin.y, 320, viewSize.size.height);
         toView.frame =CGRectMake(0, viewSize.origin.y, 320, viewSize.size.height);
     }
                     completion:^(BOOL finished)
     {
         if (finished)
         {
             // Remove the old view from its parent.
             [fromView removeFromSuperview];

             //I use it to have navigationnBar and TabBar at the same time
             //self.tabBarController.selectedIndex = indexPath.row+1;
         }
     }]; 
```

****编辑****

反函数（类似于导航控制器中的后退按钮）：

```
// Get the views.
UIView * fromView = fromViewController.view;
UIView * toView = destViewController.view;

// Get the size of the view area.
CGRect viewSize = fromView.frame;

// Add the to view to the tab bar view.
[fromView.superview addSubview:toView];

// Position it off screen.
toView.frame = CGRectMake( -320 , viewSize.origin.y, 320, viewSize.size.height);

[UIView animateWithDuration:0.4 animations:
 ^{
     // Animate the views on and off the screen. This will appear to slide.
     fromView.frame =CGRectMake( 320 , viewSize.origin.y, 320, viewSize.size.height);
     toView.frame =CGRectMake(0, viewSize.origin.y, 320, viewSize.size.height);
 }
                 completion:^(BOOL finished)
 {
     if (finished)
     {
         // Remove the old view from the tabbar view.
         [fromView removeFromSuperview];
     }
 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T20:53:40.637

我的应用程序中的所有 ViewControllers 都继承自`MyViewController`其中，除了一些其他默认行为外，还具有以下属性：

```
@property(readwrite, nonatomic) BOOL slideFromSide; 
```

而这段代码：

```
- (void) presentViewController: (UIViewController*) vc animated: (BOOL) flag completion: (void (^)(void)) completion
{
    BOOL slideIn = NO;
    if ([vc isKindOfClass: [MyViewController class]])
    {
        MyViewController *svc = (MyViewController*) vc;
        slideIn = svc.slideFromSide;
    }

    if (slideIn)
    {
        [self addChildViewController: vc];
        [self.view addSubview: vc.view];

        CGRect frame = vc.view.frame;
        frame.origin.x = frame.size.width;
        vc.view.frame = frame;

        frame.origin.x = 0;
        [UIView animateWithDuration: 0.33
                         animations: ^{
                             vc.view.frame = frame;
                         }
         ];
    }
    else
    {
        [super presentViewController: vc animated: flag completion: completion];
    }
}

- (IBAction) backAction: (id) sender
{
    if (_slideFromSide)
    {
        CGRect frame = self.view.frame;
        frame.origin.x = frame.size.width;
        [UIView animateWithDuration: 0.33
                         animations: ^{
                             self.view.frame = frame;
                         }
                         completion:^(BOOL finished) {
                             [self removeFromParentViewController];
                         }
         ];
    }
    else
    {
        [self dismissViewControllerAnimated: YES completion: nil];
    }
} 
```

然后，在我想要滑入的 ViewControllers 中，我有：

```
- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName: nibNameOrNil bundle: nibBundleOrNil];
    if (self)
    {
        self.slideFromSide = YES;
        // Whatever else you want to do
    }

    return self;
} 
```

调用一个新的 ViewController 就像平常一样：

```
WhateverViewController *vc = [WhateverViewController alloc] initWithNibName: nil bundle: nil];
[self presentViewController: vc animated: YES completion: nil]; 
```

# jquery - WCF jQuery 从服务器接收列表数据

> ID：15631655
> 
> 赞同：1
> 
> 时间：2013-03-26T07:31:01.980
> 
> 标签：jquery, asp.net, ajax, wcf

我正在尝试使用 jQuery + Ajax + WCF ......你能帮我吗？如果我在 WCF 中使用单个数据响应是可以的，但是当我尝试发送一个列表或大量作为来自 WCF 的响应时，它看起来是错误的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Text;

namespace longpollingexample
{
    [ServiceContract(SessionMode = SessionMode.NotAllowed)]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.PerCall)]
    public class Service2
    {          
        static List<int> ff = new List<int>();

        [OperationContract]
        [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
        public List<int> hi(int a, int f)
        {
            ff.Add(a*f);
            return ff;
        }
    }
} 
```

这是 WCF 服务，我们只有一个功能并尝试获取列表的答案。列表是静态的。如何从该列表中获取任何元素？我尝试做什么...

```
 function hi2() {
        var t = 0;
        $.ajax({
            async: true,
            url: '/Service2.svc/hi',
            data: 'a= ' + $('#my1').val() + '&f=' + $('#my2').val(),
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                var str='';
                str += data[0].d;
                $("#msgs").html(aa);
            },
            error: function () { alert('pop the champagne'); }
        });
    } 
```

我可以得到`data[0].d`- 我的 ff 列表中的第一个元素吗？它不起作用（怎么了？谢谢！对不起我的英语，我知道这真的很糟糕（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:35:26.277

就这样做，

```
 success: function (data) {
  $.each(data.d, function(i, item) {
         alert(item);
   });
 } 
```

# android - 如何将消息添加到 AVD 的收件箱

> ID：15631657
> 
> 赞同：1
> 
> 时间：2013-03-26T07:31:04.717
> 
> 标签：android

```
public class SearchableActivity extends ListActivity {
    String options[]={"got nothing here "};
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /*
        Uri uriSMSURI = Uri.parse("content://sms/inbox");
        Cursor cur = getContentResolver().query(uriSMSURI,new String[] { "_id", "thread_id", "address", "person","date", "body" }, null, null,null);
        int i=0;
        if(cur.getCount()>0) {
            while(cur.moveToNext()) {
                String smsBody = cur.getString(5);
                options[i++]=smsBody;
            }
        } else {
            options[0]="got nothing here ";
        }
        cur.close();
        */
        setListAdapter(new ArrayAdapter<String(this,android.R.layout.simple_list_item_1, options));
    } 
```

注释 /**/ 中的代码使应用程序崩溃。

AVD收件箱默认是空的吗？

如果是，那么我该如何向它提供一些消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:47:24.420

您可以在 Eclipse DDMS 中使用 DDMS 将消息发送到 AVD :)

转到菜单*Window* -> open *Prespectiv* -> DDMS prespective -> emulator tab -> send SMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T11:45:33.777

通过 Telnet 连接到正在运行的模拟器（5554 是模拟器编号）：

```
telnet localhost 5554 
```

输入这个：

```
sms send phoneNumber textmessage 
```

# mysql - 如何编写一个mysql查询来替换字段中的空格和逗号

> ID：15631658
> 
> 赞同：-2
> 
> 时间：2013-03-26T07:31:07.933
> 
> 标签：mysql, string, whitespace

我有一个名为日期的字段，其中包含这样的数据`"27 Mar 2013, 28 Mar 2013, 29 Mar 2013"`

现在我需要编写查询以将数据更改为以下格式。

`"27 Mar 2013,28 Mar 2013,29 Mar 2013"`.

在 MySql 中，如何编写一个查询来替换空格，后面是逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:35:07.010

Give this a try,

```
SELECT REPLACE(columnName, ', ', ',') 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/9117d/2)

# symfony1 - ie中密码形式更改的奇怪行为

> ID：15631660
> 
> 赞同：2
> 
> 时间：2013-03-26T07:31:27.643
> 
> 标签：symfony1, symfony-1.4, sfguard

我使用 sfDoctrineGuardPlugin。密码更改的形式有三个字段：

> 当前密码、新密码、重复新密码。

如果当前是正确的，并且新的和重复的相同，我会这样做

```
$this->getUser()->getGuardUser()->setPassword($this->form->getValue('password'));
$this->getUser()->getGuardUser()->save(); 
```

在除 ie 之外的所有浏览器中，一切正常，但在 ie when `save()`is - 或重新验证表单中，或重定向到相同的路由。

结果，用旧数据重新检查当前密码（然后有一个新密码），抛出表单错误。告诉我该怎么做，我不明白浏览器如何影响服务器操作。

```
public function executeChangePassword(sfWebRequest $request) {
        $this->forward404Unless($this->getUser()->isAuthenticated());
        $this->form = new ChangePasswordForm();
        $this->bSuccess = false;

        if ($request->isMethod('post')) {
            $this->form->bind($request->getParameter($this->form->getName()));
            if ($this->form->isValid()) {
                $this->oUser = $this->getUser();
                $this->oUser->setPassword($this->form->getValue('password'));
                $this->bSuccess = true;
            }
        }
} 
```

```
class ChangePasswordForm extends BaseForm {
    public function configure() {
        $this->setWidgets(array(
            'current_password' => new sfWidgetFormInputPassword(array(), array('class' => 'b-input-text')),
            'password' => new sfWidgetFormInputPassword(array(), array('class' => 'b-input-text')),
            'password_again' => new sfWidgetFormInputPassword(array(), array('class' => 'b-input-text')),
        ));

        $this->validatorSchema['current_password'] = new slValidatorUserPassword(
            array('required' => true,
                'min_length' => 6,
                'max_length' => 128
            )
        );
        $this->validatorSchema['password'] = new sfValidatorString(
            array(
                'required' => true,
                'min_length' => 6,
                'max_length' => 128
            )
        );
        $this->validatorSchema['password_again'] = new sfValidatorString(
            array('required' => true,
                'min_length'    => 6,
                'max_length'    => 128
            )
        );
        $this-> mergePostValidator(new sfValidatorSchemaCompare('password', '==', 'password_again', array(), array()));
        $this->widgetSchema->setNameFormat('change_password[%s]');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:52:17.790

您可以只使用提供的**sfGuardChangeUserPasswordForm**类。它包含在插件中。

这是一个工作控制器示例：

```
public function executeIndex(sfWebRequest $request)
{
    $sf_user = $this->getUser();
    $sf_guard_user = $sf_user->getGuardUser();
    $this->form = new sfGuardChangeUserPasswordForm($sf_guard_user);

    if ("changepassword" == $request->getParameter('do'))
    { /* dont forget to put action="/route/to/this/controler/?do=changepassword" on the view's <form> */ 
        $this->processForm($request, $this->form);
    }
}

protected function processForm(sfWebRequest $request, sfForm $form)
{
    $form->bind($request->getParameter($form->getName()), $request->getFiles($form->getName()));
    if ($form->isValid())
    {
        $notice = 'Password updated successfully.';

        try {
            $sf_guard_user = $form->save();
        } catch (Doctrine_Validator_Exception $e) {

            $errorStack = $form->getObject()->getErrorStack();

            $message = get_class($form->getObject()) . ' has ' . count($errorStack) . " field" . (count($errorStack) > 1 ? 's' : null) . " with validation errors: ";
            foreach ($errorStack as $field => $errors)
            {
                $message .= "$field (" . implode(", ", $errors) . "), ";
            }
            $message = trim($message, ', ');

            $this->getUser()->setFlash('error', $message);
            return sfView::SUCCESS;
        }

        $this->dispatcher->notify(new sfEvent($this, 'admin.save_object', array('object' => $sf_guard_user)));

        $this->getUser()->setFlash('notice', $notice);

        $this->redirect(array('sf_route' => 'sf_guard_user_profile'));
    }
    else
    {
        $this->getUser()->setFlash('error', 'Password was not changed due to some errors.', false);
    }
} 
```

# php - zend 无法在 phtml 中显示多个差异记录

> ID：15631663
> 
> 赞同：0
> 
> 时间：2013-03-26T07:31:32.137
> 
> 标签：php, zend-framework

```
 $where = array('status' => 1);
$this->view->active = $user->fetchAll($where);
$where1 = array('status' => 0);
$this->view->inactive = $user->fetchAll($where1); 
```

在 view.phtml 中

我有这两个 foreach

```
foreach($this->active as $active){
    echo $active->uid;
    echo $active->uname;
}

foreach($this->inactive as $inactive_va){
    echo $inactive_va->uid;
    echo $inactive_va->uname;
} 
```

上面的代码只返回非活动和非活动的活动记录。我必须改变这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:51:11.617

您可能应该使用`?`占位符语法来使您的`WHERE`子句正确：

```
$where = array('status = ?' => 1);
$where1 = array('status = ?' => 0); 
```

但是，请注意，不推荐`WHERE`直接提供子句`fetchAll()`。请参阅[Zend_Db_Table 文档](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.fetch-all)中的**警告**。最好使用对象修改您的查询。`Zend_Db_Table_Select`

您的第一个查询将如下所示：

```
$user->fetchAll(
    $user->select()->where('status = ?', 1);
); 
```

# eclipse - 类型中的方法永远不会在本地使用非私有方法的警告

> ID：15631664
> 
> 赞同：1
> 
> 时间：2013-03-26T07:31:36.950
> 
> 标签：eclipse, settings, warnings

对于私有方法，我多次收到此警告。如何使 Eclipse 对公共、默认和受保护的方法显示相同（或相似）的警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:02:56.540

Eclipse 无法做到这一点，因为可能会从当前工作空间中不可见的代码中使用公共方法。但是您可以使用[Unnecessary Code Detector](http://www.ucdetector.org/) Plugin 来查找此类方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:02:25.940

为私有方法执行此操作很容易，因为搜索该方法使用的范围是有限的（仅限于类本身），并且因为警告是有道理的：因为它是私有的，所以外部没有人可以调用该方法，因为它不是从项目内部调用，该方法可能没用，因此发出警告。

可以为默认方法执行此操作。

但是在大多数情况下对公共和受保护的方法这样做会适得其反，因为公共和受保护的方法是您的类的公共接口的一部分，可以被其他类使用，超出了当前 eclipse 项目的范围.

AFAIK，eclipse 没有这样的工具。但是[UCDetector](http://www.ucdetector.org/index.html)插件可以在您的项目中找到未使用的代码。谨慎使用！

# javascript - 在 Enter 键上提交表单以获取两个不同的 div 标签

> ID：15631671
> 
> 赞同：1
> 
> 时间：2013-03-26T07:32:09.653
> 
> 标签：javascript, jquery

我有一个带有两个 div 标签的登录控件的表单

第一个带有用户名、密码和登录按钮的 DIV，而且我在表单中忘记了密码链接。当我们点击它时，它会显示另一个带有输入电子邮件 ID 文本框和提交按钮的 div。

我使用Jquery for Enter Key press来提交它工作正常的表单..但如果忘记密码链接单击它会显示另一个div ..带有提交按钮但输入键在按键时不适用于该div

这是我的 jQuery 代码：

```
$('#form input').keydown(function (e) {
       if (e.keyCode == 13) {
           $('#form1').submit();
       }
   }); 
```

如何在两个 div 按钮（登录和提交）的输入键上提交表单。请帮助所需的Jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-04T15:45:45.267

您可以将多个元素添加到 keydown 或任何其他功能，只需用逗号分隔它们即可。

```
$('#form #UserName, #form #password').keydown(function (e) {
    if (e.keyCode == 13) {
        $('#form1').submit();
    }
}); 
```

# postgresql - 使所有用户都可以使用 postgresql 数据库

> ID：15631672
> 
> 赞同：2
> 
> 时间：2013-03-26T07:32:10.000
> 
> 标签：postgresql

在访问 postgres 数据库时，我收到一条错误消息

```
FATAL:  Peer authentication failed for user "myuser" 
```

要解决此错误，我需要更改数据库所有者，例如

```
ALTER DATABASE dbname OWNER TO 'all'; 
```

all 不是我系统中的用户，但我想让这个数据库对系统中的所有用户可用。

我确信有办法做这样的事情。谁能帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:34:38.207

You need to [read the Client Authentication section of the manual](http://www.postgresql.org/docs/current/static/client-authentication.html), particularly the part that discusses `pg_hba.conf`. PostgreSQL's manual and tutorials are fairly comprehensive and are well worth a read.

There are lots of questions on Stack Overflow, superuser.com, serverfault.com and dba.stackexchange.com that cover `pg_hba.conf` so I won't repeat what's already available in abundance.

Very short version:

*   Use `md5` authentication; and
*   `CREATE USER` all the users you want to be able to log in or have them all log in as a shared identity.

*Please* read the manual sections on authentication and security to avoid future pain and problems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:16:00.963

在你的文件系统中找到 pg_hba.conf 文件使用

```
locate pg_hba.conf 
```

然后找到你的 postgres 的版本。

使用编辑文件

```
sudo nano /etc/postgresql/9.1/main/pg_hba.conf 
```

如果您有以下行：

```
local   all    all     peer 
```

然后将其更改为：

```
local   all    all     md5 
```

我相信它会起作用的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:13:06.423

对等身份验证意味着 PostgreSQL 将只允许 OS 用户 ,`admin`以 身份连接`admin`或 OS 用户`myuser`以 身份连接 PostgreSQL `myuser`。

这是因为它在`pg_hba.conf`文件中有这样的条目

```
local   all    all    peer 
```

如果你用这个替换它

```
local   all   all    trust 
```

那么托管 PostgreSQL 数据库的同一操作系统上的所有用户都可以自由连接。

# c# - 将值发送到标签会导致程序循环并导致堆栈溢出错误

> ID：15631673
> 
> 赞同：0
> 
> 时间：2013-03-26T07:32:10.953
> 
> 标签：c#, winforms, loops, button, label

这让我完全发疯了！我正在尝试计算值并将这些值返回到我的程序中的标签。它很长，这里只是一个例子。当我去编译它时，它每次循环一次 "label18.Text = String.Format(l.ToString("F1"));" 或类似的运行。例如，该程序将按顺序运行，直到它到达标签 18，然后它返回再次声明 h、w、l 并将每个用户输入转换为 double 以进行计算。随着我的程序大小增加，这些循环加起来最终导致堆栈溢出。请帮帮我！标签中是否有一些设置导致了这种情况？

```
 private void calculateModes_Click(object sender, EventArgs e)
    {
        //Declare, Convert, and Display variables

        double h,w,l;

        h = Convert.ToDouble(height.Text.ToString()); //(height);
        w = Convert.ToDouble(width.Text.ToString()); //width
        l = Convert.ToDouble(length.Text.ToString()); //length

        label18.Text = String.Format(l.ToString("F1"));
        label19.Text = String.Format(w.ToString("F1"));
        label21.Text = String.Format(h.ToString("F1"));} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:39:44.997

作为一个选项：尝试检查`label 18`'s Properties/Events 并查看是否有`TextChange`事件处理程序设置为`calculateModes_Click`.

# authentication - 为什么不允许密码验证？

> ID：15631675
> 
> 赞同：6
> 
> 时间：2013-03-26T07:32:16.633
> 
> 标签：authentication, ssh, passwords

我的 ssh 现在似乎只接受公钥认证。即使我确定 /etc/ssh/ssh_config 中的“PasswordAuthentication”是肯定的。这是我的 ssh 日志。我想知道为什么我的 ssh 中不允许密码验证？PS：我可以通过在命令行中添加“-o PubkeyAuthentication=no”来强制 ssh 使用密码认证。

```
markz@markz-hp6200:~$ ssh -l lab 10.19.170.114 -v
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /home/markz/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to 10.19.170.114 [10.19.170.114] port 22.
debug1: Connection established.
debug1: identity file /home/markz/.ssh/id_rsa type -1
debug1: identity file /home/markz/.ssh/id_rsa-cert type -1
debug1: identity file /home/markz/.ssh/id_dsa type -1
debug1: identity file /home/markz/.ssh/id_dsa-cert type -1
debug1: identity file /home/markz/.ssh/id_ecdsa type -1
debug1: identity file /home/markz/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5ubuntu1
debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEX_ECDH_INIT
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ECDSA d5:c0:00:1b:bf:54:56:a0:c6:68:6f:62:a4:1a:e3:e1
debug1: Host '10.19.170.114' is known and matches the ECDSA host key.
debug1: Found key in /home/markz/.ssh/known_hosts:10
debug1: ssh_ecdsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: markz@markz-hp6200
debug1: Authentications that can continue: publickey,password
debug1: Offering RSA public key: markz@markz-hp6200
debug1: Authentications that can continue: publickey,password
debug1: Offering RSA public key: markz@markz-hp6200
debug1: Authentications that can continue: publickey,password
debug1: Offering RSA public key: markz@markz-hp6200
debug1: Authentications that can continue: publickey,password
debug1: Offering RSA public key: markz@markz-desktop
debug1: Authentications that can continue: publickey,password
debug1: Offering RSA public key: markz@markz-desktop
Received disconnect from 10.19.170.114: 2: Too many authentication failures for lab 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:53:49.943

SSH 客户端甚至没有更改尝试密码身份验证，因为所有身份验证尝试都用于您的公钥。

删除未使用的公钥，添加类似

> 主机 * PubkeyAuthentication=no

通过在服务器端添加公钥来`~/.ssh/config`或实际使用公钥身份验证。`~/.ssh/authorized_keys`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T10:56:37.603

恐怕您的`~/.ssh`.

`ssh`似乎首先尝试使用每个可用的密钥，但目标机器将只接受 5 个身份验证请求，因此没有机会尝试密码身份验证。

移动或移除一些未使用的键，使您的“”中的键少于 5 个`ssh-add -l`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T12:16:06.527

我还发现，当您没有设置与服务器报告自身相同的主机名时，即使您的帐户有效并且 ssh 公钥的权限设置正确，也会弹出此错误。

因此，例如，您已经在本地覆盖了 /etc/hosts 中的主机名，提供了一个与远程 SSH 服务器的实际主机名不同的别名。

```
XX.XX.YY.YY   host.correct.domain   hostalias 
```

如果您尝试使用主机名作为*hostalias*进行 ssh ，远程 SSH 服务器会拒绝公钥身份验证，因为它的主机名是*host.correct.domain*。这发生在 OpenSSH v4.3 服务器版本上。

希望这可以帮助。

# ruby - 在多个线程中运行时出现“名称或服务未知 (SocketError)”错误

> ID：15631678
> 
> 赞同：5
> 
> 时间：2013-03-26T07:32:39.713
> 
> 标签：ruby, multithreading, sockets, getaddrinfo

我制作了一个程序，可以并行解析文本文件和下载数据。在 9 个或更少线程中运行下载方法时，程序没有错误。但是当在 10 个或更多线程中运行该方法时，程序会抛出“`initialize': getaddrinfo: Name or service not known (SocketError)”错误。我尝试了一些算法并行运行，但出现了同样的问题。我将在发生“名称或服务未知”错误时传递给“打开”方法（open-uri）的 url 放入浏览器并确认该 url 有效并接收到正确的数据。这是部分代码。

```
jobs = []
aps = []
....
#jobs are pushed into jobs[]
....
max_thread = 15
loop do
  ary_threads = []
  max_thread.times do |i|
    break if jobs.size == 0
    job =  jobs.pop
    ary_threads << Thread.start {
      begin
        request(job[0],job[1]).each do |ap| #in "request" method, open(url)are called
            aps.push(ap)
        end
      end
    }
 end
 ary_threads.each { |th| th.join }
 break if jobs.size == 0
end 
```

错误是

```
/usr/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: Name or service not known (SocketError)
from /usr/lib/ruby/1.9.1/net/http.rb:762:in `open'
from /usr/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
from /usr/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
from /usr/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from /usr/lib/ruby/1.9.1/net/http.rb:762:in `connect'
from /usr/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
from /usr/lib/ruby/1.9.1/net/http.rb:744:in `start'
from /usr/lib/ruby/1.9.1/open-uri.rb:306:in `open_http'
from /usr/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'
from /usr/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'
from /usr/lib/ruby/1.9.1/open-uri.rb:201:in `catch'
from /usr/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'
from /usr/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'
from /var/lib/gems/1.9.1/gems/open-uri-cached-0.0.5/lib/open-uri/cached.rb:10:in `open_uri'
from /usr/lib/ruby/1.9.1/open-uri.rb:677:in `open'
from /usr/lib/ruby/1.9.1/open-uri.rb:33:in `open'
from Test1.rb:42:in `request'
from Test1.rb:77:in `block (3 levels) in <main>' 
```

为什么会这样？有没有人遇到过类似的问题？请帮我！

第一个问题后3小时，我找到了临时解决方案。如果我将“请求”方法中的“打开”方法与“开始~救援~重试~结束”夹在中间，则第二次“打开”调用时不会发生错误。这是代码。

```
begin
    response = open(url)
rescue Exception
    puts url
    puts "retrying"
    retry
end 
```

捕获异常并显示 url 和“重试”后，将永远不会显示 url 和“重试”并且程序正常工作:) 但我仍然找不到导致此问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T09:25:24.680

我认为这可能是因为线程之间的竞争条件。尝试以原子方式执行操作。把互斥锁。

```
 @mutex = Mutex.new

    @mutex.syncronize do
      ...

      ary_threads << Thread.start {
       begin
        request(job[0],job[1]).each do |ap| #in "request" method, open(url)are called
          aps.push(ap)
        end
        end
      }

      ...
    end 
```

# java - 与 JFXpanel 的滚动条相关的事件

> ID：15631680
> 
> 赞同：1
> 
> 时间：2013-03-26T07:32:43.377
> 
> 标签：java, javafx

与向上滚动和向下滚动相关的事件是什么？我想创建两个按钮作为顶部和向下，而不是使用向上和向下滚动来向上和向下移动 JFXpanel。我应该将哪些事件与这些按钮相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:46:19.683

您想使用`ScrollPane`element 和[vvalue](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#vvalueProperty)属性，该属性`double`默认为`0.0`和之间的值`1.0`，分别表示滚动到顶部和底部的状态。

所以，滚动到底部：

```
scrollpane.setVvalue(1); 
```

并滚动到顶部：

```
scrollpane.setVvalue(0); 
```

您可以使用[`ScrollPane.setVmax()`](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#setVmax%28double%29)and[`ScrollPane.setVmin()`](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#setVmin%28double%29)为[vmin](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#vminProperty)（默认 0.0）和[vmax](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#vmaxProperty)（默认 1.0）设置其他值。

这是一个为滚动设置动画的便捷函数：

```
public void scrollVAnimate(ScrollPane scrollPane, double duration, double toVal)
{
    TimelineBuilder.create()
        .keyFrames(
            new KeyFrame(
                Duration.millis(duration),
                new KeyValue(scrollPane.vvalueProperty(), toVal)
            )).build()
            .play();
} 
```

用法：

```
// scroll to the bottom, animated
this.scrollVAnimate(scrollpane, 300, 1); 
```

您可以使用 FXML 或 Java 代码将这些操作分配给按钮。在这两种情况下，我们都假设这`scrollpane`是您的控制器中的一个字段。

## 1\. 使用 FXML

在控制器中创建一个方法：

```
public void onBtnDownPressed(MouseEvent event)
{
    this.scrollpane.setVvalue(1);
} 
```

将其添加到控制器的 .fxml 中的按钮中：

```
<Button text="Scroll to bottom" onAction="#onBtnDownPressed"></Button> 
```

## 2.在Java中使用[setOnAction](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ButtonBase.html#setOnAction%28javafx.event.EventHandler%29)：

```
button.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event)
    {
        scrollpane.setVvalue(1);
    }
}); 
```

# c - 如何在函数中使用 scanf？

> ID：15631685
> 
> 赞同：1
> 
> 时间：2013-03-26T07:33:03.757
> 
> 标签：c, scanf

```
void mscanf(char *format, ...)
{
  scanf(format);
}
int main()
{
  int n1, n2;
  mscanf("%d%d", &n1, &n2);
  printf("%d,%d\n", n1, n2);
  return 0;
} 
```

这有什么问题。？我怎么能像这样在函数中使用 scanf 呢？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T07:34:25.627

而不是`scanf`你想要的[`vscanf`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/vfscanf.html)：

```
va_list args;
va_start(args, format);
vscanf(format, args);
va_end(args); 
```

* * *

当您使用带有可变参数列表的函数时，您有时会偶然发现需要**传递这些可变参数**。所以在你的例子中你知道你想做什么，你想“将'...'传递给scanf”。这正是`vscanf`, `vprintf`etc 函数的用途：它们接受 '...' 的形式`va_list`。

# java - 使用java形成数字对的集群

> ID：15631687
> 
> 赞同：0
> 
> 时间：2013-03-26T07:33:16.990
> 
> 标签：java

我必须打印 110 个能够打印的文档的相似度矩阵，输出是具有最高相似度的文档对。

现在我必须根据这些文档对形成集群。

问题是我无法存储这些文档对，因为`(4,29),(29,76),(45,89)`输出必须是，`(4,29,76),(45,89)`但这里我没有得到，因为只要调用 maxarray 方法并且**输出与输入相同，**数组列表就会被覆盖。

```
 public class SimilarityMatrix {

               public static void main(String[] args) throws IOException  {

                         int array[][]=new int[120][120];

      outputArray(array);
      }

     public static void outputArray(int[][] array) throws IOException {
                                            FileOutputStream out=new FileOutputStream("similaritymatrix.txt");
                    PrintStream p=new PrintStream(out); 

     int rowSize = array.length;
     int columnSize = array[0].length;
     for(int i = 1; i <= 110; i++) {
     System.out.print("[");
     p.print("[");

     for(int j = 1; j <= 109; j++) {
         if(i!=j && i<j)
         {
             app obj=new app();

             array[i][j]=         obj.main(i,j);

         }

         else if(i>j || i==j)
         {
                  array[i][j]=0;
         }        
                            System.out.print(" " + array[i][j]);
                            p.print(" " + array[i][j]);

     }
     System.out.println(" ]");
      p.println(" ]");

     }
     System.out.println();
      p.println();
      max(array);
     }
      public static void max(int array[][]) throws FileNotFoundException
      {
                                                  FileOutputStream out=new FileOutputStream("similaritymatrix1.txt");
                    PrintStream p=new PrintStream(out); 

     int maxValue = 1;

      int i=1;

      int j=1;
     for (  i = 1; i <= 110; i++) {
            for ( j = 1; j <= 109; j++)
            {

            if (array[i][j] > maxValue) {
            maxValue = array[i][j];

            }
            }}

             for ( i = 1; i <= 110; i++) {
            for ( j = 1; j <= 109; j++)
            {
            if(maxValue==array[i][j]){
                                  System.out.println("\nMax values in 2D array at d"+i+"d"+j+"max value ="+maxValue);

                                  p.println("\nMax values in 2D array at d"+i+"d"+j+"max value ="+maxValue);

    array[i][j]=0;
 ArrayList a = new ArrayList();
             a.add(i);
            a.add(j);
             if(!a.contains(i)&& !a.contains(j))
             {
                 a.add(i);
                 a.add(j);
                                   System.out.println("the cluster is" +a);

             }
                else  if(a.contains(i)&& !a.contains(j))
                  {
                      a.add(j);
                                        System.out.println("the cluster is" +a);

                  }
                else  if(!a.contains(i)&& a.contains(j))

                  {
                      a.add(i);
                                        System.out.println("the cluster is" +a);

                  }

                }}}

     for(  i=1;i<=110;i++)
              {
                  p.print("[");
              System.out.print("[");

                  for( j=1;j<=109;j++)
                  {
                      System.out.print(" "+ array[i][j]);
                      p.print(" "+ array[i][j]);

                  }

                p.println(" ]");
                System.out.println("]");

              }
        if(maxValue>1)         
      max(array);

      }
    }

     class app {

        private static ArrayList<String> load(String f1) throws FileNotFoundException{

            Scanner reader = new Scanner(new File(f1));

            ArrayList<String> out = new ArrayList<String>();

            while (reader.hasNext()){

                String temp = reader.nextLine();

                String[] sts = temp.split(" ");

                for (int i = 0;i<sts.length;i++){

                    if(sts[i] != "" && sts[i] != " " && sts[i] != "\n")

                        out.add(sts[i]);

                }

            }

            return out;

        }

        private static void write(ArrayList<String> out, String fname) throws IOException{

            FileWriter writer = new FileWriter(new File(fname));

            for (int i = 0;i<out.size();i++){

                writer.write(out.get(i) + "\t");

            }

            writer.close();

        }

        public static int main(int a,int b) throws IOException {

    int count=0;

            ArrayList<String> file1;

            ArrayList<String> file2;

            ArrayList<String> out = new ArrayList<String>();

            file1 = load(a+".txt");

            file2 = load(b+".txt");

            for(int i = 0;i<file1.size();i++){

        String word1 = file1.get(i);

        for (int z = 0; z <file2.size(); z++){

            if (word1.equalsIgnoreCase(file2.get(z))){

                        boolean already = false;

                        for (int q = 0;q<out.size();q++){

                            if (out.get(q).equalsIgnoreCase(file1.get(i))){

                                already = true;

                            }

                        }

                        if (already==false){

                            out.add(file1.get(i));

    count++;
                        }}}}

                    return count;

        }

        } 
```

这是我到目前为止尝试过的代码，我得到了输出，但它与输入相同

# c# - 在任务中渲染局部视图

> ID：15631692
> 
> 赞同：3
> 
> 时间：2013-03-26T07:33:45.873
> 
> 标签：c#, razor, asp.net-mvc-4

我有一个运行电子邮件通知功能的 MVC 控制器，`Task.Factory.StartNew()`因为它从数据库中提取了一些计数，并且不够关键以阻止主请求。我想使用一些等效的[RenderPartialViewToString](https://gist.github.com/cassioeskelsen/831567)来生成电子邮件正文，但这会引发错误，因为某些 Web 上下文在任务运行的上下文中不可用。

有没有一种简单的方法可以使用核心 MVC / Razor 库来实现这一点，还是我需要求助于[RazorEngine 之](https://github.com/Antaris/RazorEngine)类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:33:50.150

您将需要使用 RazorEngine。这是一些执行类似操作的代码

[https://bitbucket.org/swaj/actionmailer.net/src/65301af9614b/src/ActionMailer.Net.Standalone/RazorEmailResult.cs?at=default](https://bitbucket.org/swaj/actionmailer.net/src/65301af9614b/src/ActionMailer.Net.Standalone/RazorEmailResult.cs?at=default)

# c# - 解决日期时间许可证问题的最佳方法

> ID：15631696
> 
> 赞同：5
> 
> 时间：2013-03-26T07:33:55.003
> 
> 标签：c#, licensing

现在我们正在开发一个基于 Windows 的小型应用程序。我们以前提供试用版许可证，有效期为 30 天，30 天到期后，产品将无法使用。

现在这是我的问题：

想象一个客户在 1 月 1 日下载并安装了该应用程序，到 2 月 1 日，试用期将结束。现在1月31日，如果他再把系统时间改成1月1日，系统就从头开始计时，所以客户可以通过简单的改变系统时间来延长试用期。

并且根据社区的建议，我们可以检查互联网/日期时间，但作为一个小问题，我们不能通过服务器随机验证许可证，如果用户**离线**并更改他的系统日期时间，那么就会出现问题再次。有没有其他方法可以解决这个问题？

我已经检查过[这个问题](https://stackoverflow.com/questions/2021088/implementing-a-30-day-time-trial/2022237#2022237)。

解决这个问题的最佳方法是什么？该产品是一个 C# 应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-13T20:00:09.660

根据您的要求，我所看到的，您无法检查在线服务器的日期。这对于离线系统来说是非常明显的。

所以，你需要做几件事——

1.  以高加密数据的形式设置注册日期和到期日期，并将其保存在注册表数据库中的某个位置。

2.  当应用程序每次打开时，获取最新的时钟日期并将加密数据保存在注册表中。

3.  确保检查时钟日期和最后使用日期。如果上次使用日期 < 时钟日期，则一切正常，但如果使用日期>时钟日期，则用户已更改时钟日期。所以，不要更新注册表。

4.  一旦 lastusagedate 达到到期日期，就会弹出一条消息“您的试用版已过期。”。

希望这可以帮助。

干杯

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T07:37:53.343

Probably the best possible solution would be to have an online server for verification of the licensing details. If you let your application be dependant over client machine's data then there is always a chance that they will break it. But for that your **client must have internet access**

# c++ - 这个分形的逻辑是什么？

> ID：15631697
> 
> 赞同：1
> 
> 时间：2013-03-26T07:33:55.453
> 
> 标签：c++, logic

我正在为学校做一个项目，需要大致重现这个分形（在 BGI 中）：

![在此处输入图像描述](../Images/7b99b8adc7add1ca6663891f2baab6cf.png)

我一直试图为中等大小的三角形寻找放置逻辑，因为它们必须被绘制到 for/while 循环中。（我画了主要的三角形和它的每一边的一个圆圈。）

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:35:22.320

绝对是IFS。IFS 分形使用递归。它就像一个树结构，其中每个分支都可以有侧分支，而这些分支又可以有自己的较小侧分支。在（C-like）伪代码中，它看起来像：

```
draw_triangle(vector2d pos, float scale, int depth)
{
  if (depth < MAX_DEPTH) return;

  /* actual graphics code for the triangle goes here.. use pos and scale */

  /* compute center positions for circles side1_pos, side2_pos, etc... */

  draw_circle(side1_pos, 0.5*scale, depth+1);
  draw_circle(side2_pos, 0.5*scale, depth+1);
  draw_circle(side3_pos, 0.5*scale, depth+1);
}

draw_circle(vector2d pos, float scale, int depth)
{
  if (depth < MAX_DEPTH) return;
  /* actual graphics code for the circle goes here.. use pos and scale */

  /* compute center positions for triangles side1_pos, side2_pos, etc... */

  draw_triangle(side1_pos, 0.5*scale, depth+1);
  draw_triangle(side2_pos, 0.5*scale, depth+1);
  draw_triangle(side3_pos, 0.5*scale, depth+1);
} 
```

# objective-c - 如何确保在没有警告的情况下调用 viewDidLoad？

> ID：15631702
> 
> 赞同：0
> 
> 时间：2013-03-26T07:34:11.187
> 
> 标签：objective-c, xcode4.5

```
BGLogin * login = [[BGLogin alloc]init];

[nav pushViewController:login animated:YES];
login.view; //access it once to trigger didload
NSAssert(login.navigationItem==login.navigationItemAtDidload,@"They should be the same");//View didload isn't called yet here.
NSAssert(login.navigationController == nav,@"The navigation controller should be the same");
NSAssert(nav.navigationBar.topItem==login.navigationItem,@"We just push our self so our stuff should be on top"); 
```

这是简单的代码。但是，如果我不做 login.view 那么 viewDidLoad 将不会首先被调用。如果我做 login.view ，我会收到一个警告，即未使用 login.view 的值。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:14:45.780

如果您不关心返回值，则不要使用属性访问器语法 ( `login.view`)。像常规方法一样调用 getter `[login view]`：.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:56:41.007

如果您只想使用`login.view;`被`viewDidLoad`调用，我认为您最好在您的`BGLogin`类`init`方法中添加一些代码。

如 ：

```
- (id)init
{
    // your code

    self.view.tag = 0;
    return self;
} 
```

或者你可以改变你`login.view;`的`login.view.tag = 0;`

它会调用`viewDidLoad`，但我不认为它更好，但它会为你工作，也许有人有更好的方法来处理它

# windows-phone-7 - how to send the location information collected to server using http request/response in windows phone 7 or 8

> ID：15631708
> 
> 赞同：0
> 
> 时间：2013-03-26T07:34:55.913
> 
> 标签：windows-phone-7, windows-phone-8

Application which we are currently developing collects location information using Geolocator. I want to send this collected info to the server. Could anyone plz suggest some APIs or methods to do the same. Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:06:05.513

您可以编写一个 Web 服务来执行此操作，或使用 Azure 移动服务写入 Azure 数据库，甚至使用后台文件传输将文件中的位置传输到您的服务器

# java - android: webview with arabic content doesn't load custom font

> ID：15631713
> 
> 赞同：3
> 
> 时间：2013-03-26T07:35:23.057
> 
> 标签：java, android, webview, font-face

I have a webview which has an arabic content and I've tried to change the default font with custom one (which is an arabic font) as described [here](https://stackoverflow.com/a/7395170/1260459) but with no success. So how can i do that?

any help will be appreciated.

**Edit:** this is my code:

```
// Prepare html page
String fontFamily = "@font-face {"
        + "font-family: 'ARABTYPE';"
        + "src: url('file:///android_asset/fonts/ARABTYPE.TTF');} "
        + "body {font-family: 'ARABTYPE';font-size: large;text-align: justify;}";

    String mHTMLHeader = "<html><head><style type=\"text/css\">\n"
            + fontFamily + "\n</style></head><body><div dir='rtl'>";

    String arabicText = "السلام عليكم ورحمة الله";

    String mHTMLFooter = "</div></body></html>";

    String mHtml = mHTMLHeader + "<div dir='rtl'>" + arabicText
            + "</div>" + mHTMLFooter; 

    WebView mBrowser;

    mBrowser = (WebView) findViewById(R.id.myWebView);

    mBrowser.getSettings().setSupportZoom(true);
    mBrowser.getSettings().setBuiltInZoomControls(true);
    mBrowser.getSettings().setJavaScriptEnabled(true);
    mBrowser.getSettings().setDisplayZoomControls(false);

    mBrowser.loadDataWithBaseURL("file:///android_asset/", mHtml, "text/html", "UTF-8", ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:21:36.357

我在这里面临同样的问题，我正在使用带有 @font-face 标记的 CSS 文件的 HTML 文件，但我已经做了进一步的测试：

1.  我用自定义西方字体尝试了相同的代码，它成功了。
2.  我在 IIS 上将文件托管在我的 PC 上并从桌面版 Chrome 访问它，它成功加载了自定义阿拉伯字体，另一方面，Android Chrome 未能加载自定义阿拉伯字体（对于 webview 和 Internet 应用程序也是如此）。

问候。

# javascript - js是否工作

> ID：15631716
> 
> 赞同：0
> 
> 时间：2013-03-26T07:35:27.447
> 
> 标签：javascript

我已经为此工作了一个多小时，不知道它有什么问题......代码如下

```
var webkit = (browsername == (("Safari")||("Chrome")))? true : false; 
```

它应该为 chrome 和 safari 返回一个 true 值，而不是 Internet Explorer、Opera 或 Firefox 我不明白为什么它在 safari 而不是 chrome 上返回 true？有什么建议么？

即使我把它改了一点，它仍然会这样做

```
if (browsername == (("Safari")||("Chrome")))
        webkit = true; 
```

我是在做我的**还是**错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:37:46.500

Yes, you do. It should be

```
var webkit = (browsername == "Safari")||(browsername == "Chrome"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:38:19.720

使用这种类型

```
if (browsername == ("Safari")||browsername == ("Chrome"))
    webkit = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:40:24.607

是的，我认为您以错误的方式使用**or**和**==运算符。**JavaScript 中的 == 一次只能将一个值与一个不同的值进行比较，因此其工作方式与在口语中的使用不同。尝试：

```
var webkit = (browsername == "Safari" || browsername == "Chrome") ? true : false; 
```

编辑：感谢 Alnitak 关于冗余三元运算符的提示：

```
var webkit = browsername == "Safari" || browsername == "Chrome"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:42:05.383

你也可以在 jquery 中试试这个：

```
 $(document).ready(function () {
        var browser=$.browser.webkit;
    }); 
```

对于 chrome 和 safari，它将返回 true，对于其他浏览器将返回“undefined”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:37:47.537

You can't use `||` that way, you should use:

```
var webkit = (browsername == "Safari" || browsername == "Chrome"); 
```

and

```
if (browsername == "Safari" || browsername == "Chrome") { ... } 
```

# ruby-on-rails-3.2 - CarrierWave 为版本（拇指、大、中）创建存储目录

> ID：15631719
> 
> 赞同：2
> 
> 时间：2013-03-26T07:35:58.633
> 
> 标签：ruby-on-rails-3.2, carrierwave

我想为不同版本的图像创建不同的目录。为了实现这一点，可以对 Uploader rails 3.2 中的“store_dir”方法执行什么操作

```
def store_dir
    "uploads/#{model.book.id}/resource"
end

version :large do
    process :resize_to_fill => [800, 800]
end

version :thumb do
    process :resize_to_fill => [100, 100]
end 
```

# php - 如何在 Zend Framework 2 中扩展 moduleManager？

> ID：15631720
> 
> 赞同：1
> 
> 时间：2013-03-26T07:36:03.137
> 
> 标签：php, zend-framework2

我想扩展标准 Zend\ModuleManager\ModuleManager，可以吗？例如，我想从数据库中加载模块列表，并且我想添加一些使用模块的方法。

如果我将工厂设置为 serviceManager：

```
'service_manager' => array(
    'factories' => array(
        'moduleManager' => 'Path/To/My/ModuleManager',
    ),
), 
```

出现错误“名称或别名为“modulemanager”的服务已存在且无法覆盖，请使用备用名称”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:28:00.310

Zend Framework 2 中的模块管理器是通过服务工厂类创建的。`ModuleManager`正在映射到`Zend\Mvc\Service\ModuleManagerFactory`。我建议你看看这个`ModuleManagerFactory`，看看在模块管理器中注入了什么对象`createService()`。

如果你想扩展和使用你自己的模块管理器，你必须创建一个扩展 ModuleManager 的类，同时创建一个覆盖 Zend\Mvc\Service\ModuleManagerFactory 的服务管理器工厂。您使用以下代码是正确的，但将此代码放在`/config/application.config.php`文件中很重要，因为这是 Zend\Mvc 用于创建主要服务的配置文件。

```
// config/application.config.php
'service_manager' => array(
    'factories' => array(
        'ModuleManager' => 'Path/To/My/ModuleManagerFactory', // <-- Path to MM factory
    ),
), 
```

下面的链接将为您提供有关使用 \Zend\Mvc 运行哪些默认服务以及如何以及在何处发生这种情况的良好信息：

[https://zf2.readthedocs.org/en/latest/modules/zend.mvc.services.html](https://zf2.readthedocs.org/en/latest/modules/zend.mvc.services.html)

希望这会有所帮助，反馈将不胜感激:)

斯托扬

# java - 组合与多个单例

> ID：15631725
> 
> 赞同：1
> 
> 时间：2013-03-26T07:36:18.890
> 
> 标签：java, design-patterns, architecture

我正在写一个桌面 MMO 游戏，我想咨询一下架构问题。我有诸如 NetworkManager、ClientWindow、CachingTextureAtlas 之类的类，它们仅在游戏的一个实例中需要，这是我的问题：将它们设为单例是否正确？如果是，这将是一种通过全局类的交互，从设计的角度来看，这在我看来并不好，如果不是，我们将把它们组合在一个外观中，我们必须将它们全部传递给构造函数太多的类也不方便。什么是更好的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:54:35.697

单例应谨慎使用（几乎从不）。我见过很多地方，最近的场景是休眠会话工厂，最初我们认为单个实例应该没问题，但后来遇到了多个实例的场景并最终重构了代码。另一个问题是，如果您正在为代码编写单元测试，那么对于所有依赖于这些单例类的类来说，这将是一场噩梦。

一个解决方案可能是注入一种可以为您提供这些实例的工厂/它为您提供一种间接并避免直接耦合。另一种方法是拥有一个容器（例如 pico 容器）并作为构造函数依赖项注入，这也是您所指出的。

# android - 获取xml数据并以数组列表的形式存储

> ID：15631728
> 
> 赞同：0
> 
> 时间：2013-03-26T07:36:28.260
> 
> 标签：android, arrays, saxparser, xmldatasource

我正在获取数据，但我想以组的形式对一些特定数据进行分组，例如在机场列表中

JFK 机场的所有纬度、经度、名称、代码必须与其他机场类似地制作一个数组。请帮我解决这个问题。

**主要的java类：**

```
 public String getAirportListHTTPURL(String mAirportLocation,Double airportLatitude, Double airportLongitude, String mAirlineCode, boolean mAirport2, String mAddress2, String mCity2, String mState2, String mCountry2) {
        String url = CarmelURLConstants.LIVE_URL.toString();
        URL u = new URL(url);
        URLConnection uc = u.openConnection();
        HttpURLConnection http = (HttpURLConnection) uc;

        http.setDoOutput(true);
        http.setDoInput(true);
        http.setRequestMethod("POST");
        http.setRequestProperty("Content-type", "text/xml; charset=utf-8");     

        String xmldata = Here i used the xml format Syntax data
        System.out.println(xmldata);
        OutputStream out = http.getOutputStream();
        Writer wout = new OutputStreamWriter(out);
        wout.write(xmldata);
        wout.flush();
        wout.close();
        // Reading Data from the server using getInputStream 
        BufferedReader rd = new BufferedReader(new InputStreamReader(http.getInputStream()));
        System.out.println("code..."+http.getResponseCode());

        String result, responsedata = " ";
        RequestName = "AirportlistByPickUpAddress Request:-";
        ResponseName = "AirportlistByPickupAddress Response:-";
        while ((result=rd.readLine()) != null) {
           System.out.println(result");  
           responsedata = result;

           // Method to parse in SAX Parser
         mParsedValue = ParseAirportLocationResponse(result);
        }
       // updateTraceFile(xmldata, responsedata,RequestName,ResponseName);
        }catch(Exception e){
            mParsedValue = e.getMessage();
            e.printStackTrace();
        }
        return mParsedValue;
    }

    private String ParseAirportLocationResponse(String result) {
        try {

             // Create a XMLReader from SAXParser
            XMLReader mXmlReader = SAXParserFactory.newInstance().newSAXParser().getXMLReader();
            AirportHandler Airportlist = new AirportHandler();

            // Apply Handler to XML Reader
            mXmlReader.setContentHandler(Airportlist);
            // Start the Process to Parse
            InputSource is = new InputSource(new StringReader(result));
            mXmlReader.parse(is);
        } catch (Exception e) {
            System.out.println(e);

        }
            return result;// Get the Parsed Data

    } 
```

**在 XMLSETTERS 类中：**

```
 public class XMLGettersSetters {
 public static ArrayList<String> airportCode = new ArrayList<String>();
 public static  ArrayList<String> airportName = new ArrayList<String>();
 public static ArrayList<String> latitude = new ArrayList<String>();
 public static ArrayList<String> longitude = new ArrayList<String>();
public ArrayList<String> getlongitude() {
    return longitude;
}
public void setlongitude(String longitude) {
    this.longitude.add(longitude);
    Log.i("This is the longitude:", longitude);
}
public ArrayList<String> getairportCode() {
    return airportCode;
}

public void setairportCode(String airportCode) {
    this.airportCode.add(airportCode);
    Log.i("This is the airportCode:", airportCode);
}
public ArrayList<String> getairportName() {
    return airportName;
}
public void setairportName(String airportName) {
    this.airportName.add(airportName);
    Log.i("This is the airportName:", airportName);
}
public ArrayList<String> getlatitude() {
    return latitude;
}
public void setlatitude(String latitude) {
    this.latitude.add(latitude);
    Log.i("This is the latitude:", latitude);
} 
```

}

**在 Airport 处理程序类中：**

```
public class AirportHandler extends DefaultHandler {
String elementValue = null;
Boolean elementOn = false;
public static XMLGettersSetters data = null;

public static XMLGettersSetters getXMLData() {
    return data;
}

public static void setXMLData(XMLGettersSetters data) {
    AirportHandler.data = data;
}
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    elementOn = true;

    if (localName.equals("getAirportListByPickUpAddressResponse"))
    {
        data = new XMLGettersSetters();
    } 
    else if (localName.equals("airportList")) {

    }
}

/** 
 * This will be called when the tags of the XML end.
 **/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    elementOn = false;

    /** 
     * Sets the values after retrieving the values from the XML tags
     * */ 
    if (localName.equalsIgnoreCase("airportCode"))
        data.setairportCode(elementValue);
    else if (localName.equalsIgnoreCase("airportName"))
        data.setairportName(elementValue);
    else if (localName.equalsIgnoreCase("latitude"))
        data.setlatitude(elementValue);
    else if (localName.equalsIgnoreCase("longitude"))
        data.setlongitude(elementValue);

}

/** 
 * This is called to get the tags value
 **/
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (elementOn) {
        elementValue = new String(ch, start, length);
        elementOn = false;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:46:29.573

执行 XML 解析后尝试这样

```
ArrayList<String> aList = new ArrayList<String>();

aList.add("your string"); 
```

# c++ - C++ 找不到运算符

> ID：15631731
> 
> 赞同：4
> 
> 时间：2013-03-26T07:36:41.793
> 
> 标签：c++, operators

有人可以告诉我为什么这不起作用吗？我的印象是 C++ 会自动将按值返回函数结果的引用传递给构造函数，但它抱怨找不到匹配的运算符。

```
class bucket_string {
        public:
            bucket_string();
            bucket_string(bucket_string & rhs);
            bucket_string & operator=(bucket_string & rhs);
            virtual ~bucket_string();

            bucket_string substr(iterator start, iterator end){
                        bucket_string b(str);
                        return b;
                    }
 };

bucket_string bs("the quick brown fox jumps over the lazy dog");
bucket_string bs1 = bs.substr(bs.begin(), bs.end()); 
```

返回以下错误：

```
error: no matching function for call to ‘bucket_string::bucket_string(bucket_string)’
note: candidates are: bucket_string::bucket_string(bucket_string&)
      bucket_string::bucket_string() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T07:41:56.400

在 C++ 中，临时值不​​能绑定到非常量引用。

您的`bucket_string substr(iterator start, iterator end)`函数返回一个临时值，并且您的构造函数/赋值运算符将非常量引用作为参数，因此您的问题。

因此，您需要将缺少的`const`说明符添加到构造函数和赋值运算符中。像这样：

```
bucket_string(const bucket_string& rhs);
bucket_string& operator=(const bucket_string& rhs); 
```

这是一个关于该主题的[有趣讨论](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object)，以便更好地理解。

附带说明一下，如果 C++11 是一个选项，您也可以使您的类可移动。这将允许您临时的内部资源转移到另一个实例。我们缺乏上下文来说明这在您的情况下是否是一件好事。

然后你必须实现这些方法：

```
bucket_string(bucket_string&& other);
bucket_string& operator=(bucket_string&& other); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T07:37:46.050

Put some `const`.

```
bucket_string(const bucket_string & rhs);
              ^^^^^
bucket_string & operator=(const bucket_string & rhs);
                          ^^^^^ 
```

You're passing a temporary const values to the constructor. Compiler is searching for a constructor which accpets `const` reference:

```
bucket_string bs("the quick brown fox jumps over the lazy dog"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T07:44:55.430

代码以一种不起作用的方式混合了值和引用语义。`substr`按值返回，但构造函数通过非常量引用获取参数。非常量表示参数将被视为可修改的对象，而不是纯值。语言禁止以这种方式使用引用。调整赋值运算符，使其不能修改其参数：

```
 bucket_string & operator=(bucket_string const & rhs); 
```

这是可行的，因为 C++ 将允许通过`const`引用传递临时对象（例如函数返回值）。

如果您确实想修改赋值操作的来源，那么 C++ 提供了右值引用的解决方案。而不是`const &`使用`&&`. 但是分配将不再是幂等的，因此它被称为*移动分配，并且在使用**非*临时对象时需要替代语法。

# javascript - Highchart 条形缩放

> ID：15631733
> 
> 赞同：1
> 
> 时间：2013-03-26T07:36:49.077
> 
> 标签：javascript, highcharts

我想显示 0 到 100% 之间的数据。条形图的宽度为 160 像素，我希望只看到没有任何标题/图例的条形图。我得到了介于 0 和 x 之间的数据（例如从 0 到 700），并且可以更改最大值。

当最大值小于 160 时，条形图看起来正确。但是当最大值超过 160 时，一个字符会错误地缩放当前条形值。

理想的结果

[http://jsfiddle.net/dvasuta/H6SJE/2/](http://jsfiddle.net/dvasuta/H6SJE/2/)

我现在拥有的 [http://jsfiddle.net/dvasuta/sXAeh/2/](http://jsfiddle.net/dvasuta/sXAeh/2/)

```
$(function () {
    $('#container').highcharts({
        credits: {
            enabled: false,
        },
        chart: {
            renderTo: 'container',
            type: 'bar',
            marginBottom: 1,
            marginTop: 1,
            marginLeft: 1,
            marginRight: 1,
            borderRadius: 0,
            borderWidth: 1,
            borderColor: '#c5c6c7',
            backgroundColor: 0,
            height: 22,
            width:160
        },
        title: {
            text: null
        },
        xAxis: {
            tickWidth: 0,
            lineWidth: 0,
            gridLineWidth: 0,
            categories: 0,
            labels: {
                enabled: false
            }
        },
        yAxis: {
            tickWidth: 0,
            lineWidth: 0,
            gridLineWidth: 0,
            min: 0,
            max: 2500,
            title: {
                text: null
            },
            labels: {
                enabled: false
            }
        },
        tooltip: {
            enabled: false,
            formatter: function () {
                return '';
            }
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true,
                    formatter: function () {
                        return '';
                    },
                    y: 0,
                    x: 0,
                    color: '#ff0',
                    style: {
                        fontSize: '18px',
                        fontFamily: 'bold Helvetica,Arial,sans-serif'
                    }
                }
            },
            series: {
                allowPointSelect: false,
                enableMouseTracking: false,
                groupPadding: 0,
                pointPadding: 0,
                borderWidth: 0,
                borderRadius: 0
            }
        },
        series: [{
            shadow: true,
            data: [2482],
            color: {
                linearGradient: [20, 20, 0, 20],
                stops: [
                    [0, '#B6D22D'],
                    [1, '#5C9135']
                ]
            }
        }]
    });
}); 
```

似乎是 chart.width 参数中的问题。但是如何设置图表宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:34:19.513

我认为您需要尝试的参数是 y 轴上的“endOnTick”：

```
endOnTick:false, 
```

[http://jsfiddle.net/46nMs/](http://jsfiddle.net/46nMs/)

[http://api.highcharts.com/highcharts#yAxis.endOnTick](http://api.highcharts.com/highcharts#yAxis.endOnTick)

此外，您可能想要关闭导出（这只是视觉上的调整，不会影响栏的缩放）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:27:28.763

试试这个链接[图表链接](http://jsfiddle.net/H6SJE/3/)

```
1\. Disabled exporting
2\. borderWidth = 0 
```

# django - Pybbm 超级用户配置文件“UserProfile 匹配查询不存在。”

> ID：15631734
> 
> 赞同：0
> 
> 时间：2013-03-26T07:36:58.297
> 
> 标签：django, user-profile

我在 django 1.4.5 上有一个项目，其中包含自定义用户配置文件和全新安装的 pybbm，如本说明[https://pybbm.readthedocs.org/en/latest/install.html#enable-your-site-profile中所述](https://pybbm.readthedocs.org/en/latest/install.html#enable-your-site-profile)

在此说明中：“如果您启用了南并在南控制下使用配置文件类（如'pybb.Profile'），则不会在syncdb / migrate之后创建超级用户的配置文件。它将在此用户首次登录网站时创建pybb.middleware.PybbMiddleware。”

但在第一次超级用户登录时，我得到：“用户配置文件匹配查询不存在。”

这是完整的追溯[http://dpaste.com/1035237/](http://dpaste.com/1035237/)

我在 process_request 中观看
/usr/local/lib/python2.7/dist-packages/pybb/middleware.py

这里：

```
 if request.user.is_authenticated():
        try:
            # Here we try to load profile, but can get error
            # if user created during syncdb but profile model
            # under south control. (Like pybb.Profile).
            profile = request.user.get_profile()
        except ObjectDoesNotExist:
            # Ok, we should create new profile for this user
            # and grant permissions for add posts
            user_saved(request.user, created=True)
            profile = request.user.get_profile() 
```

但没有为超级用户创建个人资料。

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:28:43.760

检查您的 settings.py 中是否启用了“pybb.middleware.PybbMiddleware”

# mongodb - Mongodb 查询（hashmap 对象）

> ID：15631736
> 
> 赞同：1
> 
> 时间：2013-03-26T07:37:14.860
> 
> 标签：mongodb

我想查询所有用户组的 ID，其中管理员的 ID =“25160228446835585906563830293”或用户的 ID =“25160228446835585906563830293”。

这是 java obj 中的 hashmap 键值对`hashmap<String,Date>` `"25160228446835585906563830293" : ISODate("2013-03-26T04:51:36.731Z")`

```
{ "_id" : ObjectId("51512958849ca4748271c640"), 
  "_class" : "com.pcd.app.model.UserGroup", 
  "groupName" : "sdfsadfsad", 
  "privacyType" : "PRIVACY_OPEN", 
  "approvalType" : "MEMBER_APPROVAL", 
  "groupDescription" : "test", 
  "admins" : { 
      "25160228446835585906563830293" : ISODate("2013-03-26T04:51:36.731Z"),
      "25160228446835585906563830294" : ISODate("2013-03-26T04:51:36.731Z"),
      "25160228446835585906563830295" : ISODate("2013-03-26T04:51:36.731Z") 
  },
  "users" : { 
      "25160228446835585906563830296" : ISODate("2013-03-26T04:51:36.731Z") 
  } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:06:18.807

我建议您重组您的文档，使其可索引并更容易在 MongoDB 中搜索。

不要使用 的`id`作为`admin`字段，而是将每个添加`admin`为数组的对象：

```
 "admins" : [
        { id: "25160228446835585906563830293",
           date: ISODate("2013-03-26T04:51:36.731Z") }
     ], 
```

这将使搜索更自然：

```
db.so.find( { "admins.id" : 
    { $in: ['25160228446835585906563830293', 
            '25160228446835585906563830296']}}) 
```

您可以使用`$in`( [docs](http://docs.mongodb.org/manual/reference/operator/in/#op._S_in) ) 运算符来查找与您想要的列表匹配的`admin`s ( )。`id``admins.id`

所以，给定一个 Java `QueryBuilder`，它可能看起来像这样：

```
BasicDBList adminIds = new BasicDBList();
adminIds.addAll(ids); // the ids could be a List<String> 
DBObject inClause = new BasicDBObject("$in", adminIds);
DBObject query = new BasicDBObject("admins.id", inClause); 
```

您可能希望用于`ensureIndex`构建索引 ( [docs](http://api.mongodb.org/java/2.5/com/mongodb/DBCollection.html#ensureIndex%28com.mongodb.DBObject%29) )。

根据您的原始示例，这是供参考的完整文档：

```
{ 
    "_id" : ObjectId("51512958849ca4748271c640"), 
    "_class" : "com.pcd.app.model.UserGroup", 
    "groupName" : "sdfsadfsad", 
    "privacyType" : "PRIVACY_OPEN", 
    "approvalType" : "MEMBER_APPROVAL", 
    "groupDescription" : "test", 
    "admins" : [
        { id: "25160228446835585906563830293" ,
          date: ISODate("2013-03-26T04:51:36.731Z") },
        { id: "25160228446835585906563830294" , 
          date:  ISODate("2013-03-26T04:51:36.731Z") },
        { id: "25160228446835585906563830295" , 
          date: ISODate("2013-03-26T04:51:36.731Z") } 
    ],
    "users" : [
        { id: "25160228446835585906563830296", 
          date : ISODate("2013-03-26T04:51:36.731Z") }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:30:58.643

如果您使用的是 mongodb java 驱动程序，您可以执行以下操作：

```
 BasicDBObject queryForAdminsID = new BasicDBObject("admins." + adminsID, new BasicDBObject("$exists", true));  
// BasicDBObject queryForUsersID = new BasicDBObject("users." + usersID, new BasicDBObject("$exists", true));
cursor = coll.find(query); // coll is a DBCollection

try {
while(cursor.hasNext()) {
   System.out.println(cursor.next());
}
} finally {
 cursor.close();
} 
```

你的身份证`usersID`在哪里？`adminsID`

# ruby-on-rails - How to test controller actions that require a current session?

> ID：15631740
> 
> 赞同：0
> 
> 时间：2013-03-26T07:37:38.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sinatra

I'm adding more controllers to the admin section of the Padrino but I can't workout how to stub the current user or a session with Factory Girl or Mocha.

What is a good way for testing controller actions that need a current session?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:37:58.137

这个解决方案似乎有效

```
def set_current_user(user)
    ApplicationController.stub(:current_user).and_return(user)
    session[:identity_id] = user.id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:21:18.410

警告：我没有使用过帕德里诺，你也没有给出任何你尝试过的代码，所以这是相当笼统和模糊的。

* * *

### 备选方案 1

不要存根会话，而是使用像 Capybara 这样为您设置 cookie jar 的测试框架。将[RSpec shared_context](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-context)与运行登录的块`before`一起使用。`after`

我不记得 Capybara 的确切语法，我会让你去查一下，但它会是这样的：

```
shared_context "When logged in" do
  before do
    visit "/login"
    fill_in "username", user.name
    fill_in "password", user.password
    click "login!"
  end
  after do
    # log out…
  end
end

describe "Something that you need to be logged in for" do
  let(:user) { OpenStruct.new({name: "blah", password: "blurgh" }) }
  include "When logged in"
  before do
    visit "/only/authenticated/see/this"
  end
  subject { page }
  it { should be_ok }
  it { #… }
end 
```

### 备选方案 2

使用`Rack::Test`，看看[这个答案](https://stackoverflow.com/a/5336616/335847)

### 备选方案 3

[这是身份验证助手](https://github.com/padrino/padrino-framework/blob/0.11.0/padrino-admin/lib/padrino-admin/helpers/authentication_helpers.rb#L7)，因此您应该存根`logged_in?`返回`true`并`current_account`返回用户双精度（无论是来自 FactoryGirl 还是来自其他`let`地方）。这样您的应用就不会从会话中询问信息。

# jquery - Stopping googlebot from following links in javascript

> ID：15631741
> 
> 赞同：1
> 
> 时间：2013-03-26T07:37:40.360
> 
> 标签：jquery, seo, web-crawler, bots, googlebot

While looking over my google bot errors one of them was a 403 error from a directory link I never put anywhere. After searching around in that page for a bit I found that google followed a link it found in some javascript code, this code in particular:

```
 $.ajax({
        type: 'post',
        url: '/data/pages/' + r,
        success: function(data) {
            $('#mainbox').animate({"height": a}, 80, function() { 
```

The google bot doesn't understand the + r part of it and keeps giving me errors about this. I know you can add a rel="nofollow" to anchors to tell googlebot not to follow them, but is there a way you can do this with script tags? (I searched around a lot and couldn't find a good answer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:24:19.643

在您的[robots.txt 中指定 google bot](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)可以关注的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:00:28.550

[Matt Cutts 刚刚发布了一个关于这个主题的视频](http://www.youtube.com/watch?v=LW3pjQeCqqk)。在其中，他建议对 Javascript 文件使用 robots.txt。然而，他说：

> 事实证明，当我们执行 JavaScript 时，我们确实会查看属性。因此，您实际上可以使用 Javascript 并在各个 URL 上放置一个 nofollow 属性。

我不清楚将 nofollow 放入 javascript 的语法是什么。我在这里问过这个问题： [https ://webmasters.stackexchange.com/q/46659/14543](https://webmasters.stackexchange.com/q/46659/14543)

# wpf - 能够在 Inkcanvas 中键入文本并以笔划形式保存

> ID：15631752
> 
> 赞同：1
> 
> 时间：2013-03-26T07:38:06.300
> 
> 标签：wpf

我想以笔划的形式将文本框对象添加到inkcanvas，并将字符串以笔划格式保存在文本框中。

提前感谢您的帮助。

# apache - 如何在 apache2 加载的模块中禁用 mod_authn_file

> ID：15631758
> 
> 赞同：0
> 
> 时间：2013-03-26T07:38:25.050
> 
> 标签：apache

`a2dismod`我使用htaccess 文件中的命令禁用模块。这是命令，我试图禁用两者。

```
 a2dismod mod_authn_file
(OR)
    a2dismod authn_file_module 
```

我的 apache 日志中出现错误，

```
.htaccess: Invalid command 'a2dismod', perhaps misspelled or defined by a module not included in the server configuration 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:46:28.297

您使用的是哪个操作系统？

在 CentOS 上没有 a2enmod 和 a2dismod 命令。要在 Apache 中禁用不需要的模块，您需要执行下面描述的步骤 - 例如 - 这篇文章：

[http://www.cyberciti.biz/faq/howto-disable-apache-modules-under-linux-unix/](http://www.cyberciti.biz/faq/howto-disable-apache-modules-under-linux-unix/)

# ios - iOS：当我在导航堆栈中下降 2 级时，如何访问根视图控制器中使用的变量？

> ID：15631761
> 
> 赞同：0
> 
> 时间：2013-03-26T07:38:32.380
> 
> 标签：ios, oop, model-view-controller, uinavigationcontroller

我正在尝试构建一个发送 HTTP 请求的应用程序，并且此请求的某些部分存储在根视图控制器的对象中。一旦我在导航堆栈中下降了两级，我如何才能访问此对象？在 App Delegate 中声明的全局变量？我正在尝试保持 MVC 规则到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:49:55.653

在视图控制器中存储这些信息不是一个好主意，imo。更好的是，创建一个类来管理您的 HTTP 请求并从您想要的任何地方调用它（单例，或者只是传递一个实例）

# java - 覆盖子类中的设置器

> ID：15631762
> 
> 赞同：6
> 
> 时间：2013-03-26T07:38:32.977
> 
> 标签：java, setter, getter-setter, overriding

我在这里遇到了一个问题。我想从我的子类（子类）中的超类（父类）的属性更改设置器，但是当我在子类中覆盖此方法时，我无法从超类访问我的私有属性。关键是，他们必须保持私密。

超类（问题：setMinimumVoorraad(int voorraad);)

包域；

```
public abstract class Artikel implements Weegbaar
{
    private String omschrijving;
    private double prijs;
    private int aantalInStock;
    private int minimumVoorraad;

    public Artikel(String omschrijving, double prijs, int aantalInStock, int minimumVoorraad)
    {
        this.setOmschrijving(omschrijving);
        this.setPrijs(prijs);
        this.setAantalInStock(aantalInStock);
        this.setMinimumVoorraad(minimumVoorraad);
    }

    @Override
    public String toString()
    {
        String output = String.format(" \n omschrijving: %s \n prijs:  %f \n In stock %d (minimumvoorraad = %d) \n", this.omschrijving, this.prijs, this.aantalInStock, this.minimumVoorraad);
        return output;
    }
//----Getters----
    public String getOmschrijving() {
        return omschrijving;
    }

    public double getPrijs() {
        return prijs;
    }

    public int getAantalInStock() {
        return aantalInStock;
    }

    public int getMinimumVoorraad() {
        return minimumVoorraad;
    }

//----Setters----
    public void setOmschrijving(String omschrijving) {
        this.omschrijving = omschrijving;
    }

    public void setPrijs(double prijs) {
        this.prijs = prijs;
    }

    public void setAantalInStock(int aantalInStock) {
        this.aantalInStock = aantalInStock;
    }

    public void setMinimumVoorraad(int minimumVoorraad) 
    {
        if(minimumVoorraad < 2)
            this.minimumVoorraad = 3;
        else
            this.minimumVoorraad = minimumVoorraad;
    }

} 
```

子类

```
package domein;

public class Food extends Artikel
{

    private String houdbaarheidsDatum;
    private double nettoGewicht;

    public Food(String omschrijving, double prijs, int aantalInStock, int minimumVoorraad, String houdbaarheidsDatum, double nettoGewicht)
    {
        super(omschrijving, prijs, aantalInStock, minimumVoorraad);
        this.setHoudbaarheidsDatum(houdbaarheidsDatum);
        this.setNettoGewicht(nettoGewicht);
    }

    @Override
    public boolean isWeegbaar()
    {
        return true;
    }

//----Getters----
    public String getHoudbaarheidsDatum() {
        return houdbaarheidsDatum;
    }

    public double getNettoGewicht() {
        return nettoGewicht;
    }

//----Setters----
    public void setHoudbaarheidsDatum(String houdbaarheidsDatum) {
        this.houdbaarheidsDatum = houdbaarheidsDatum;
    }

    public void setNettoGewicht(double nettoGewicht) {
        this.nettoGewicht = nettoGewicht;
    }

    @Override
    public void setMinimumVoorraad(int minimumVoorraad) 
    {
        if(minimumVoorraad < 5)
            this.minimumVoorraad = 6;
        else
            this.minimumVoorraad = minimumVoorraad;
    }

} 
```

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T07:41:01.440

一种可能性是根据超类的 setter 来实现子类的 setter（大概您可以访问）。

例如，假设 setter 是`setFoo`，那么子类的版本可能是：

```
public void setFoo(Foo f) {

    // Do subclass stuff pre-setting, if any

    super.setFoo(f);

    // Do subclass stuff post-setting, if any
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:00:23.367

NPE上面给出的答案绝对是解决这个问题的最佳方法。它很优雅，并且尊重超类和子类之间的基本继承契约。即使在您的原始帖子中，子类实际上比超类更具限制性，因此请执行以下操作：

```
@Override
public void setMinimumVoorraad(int minimumVoorraad) 
{
    if(minimumVoorraad <= 5)
        super.setMinimumVoorraad(6);
    else
        super.setMinimumVoorraad(minimumVoorraad);
} 
```

完全按照 NPE 的建议可能会起作用。（注意我是如何修改你的`if`测试的。不确定它是否是一个错字，但在原始实现`5`中将是一个有效的最小值，但输入 like`4`会将其设置为`6`。）

其他（可能可接受的）模式将是：

1.  在您的 Parent 类中创建成员`protected`，这将提供可见性。（意识到您确实提到了一个`private`限制；仅提及此模式是为了提供更完整的整体答案。）
2.  将验证逻辑委托给另一种方法（即非私有）。这样，孩子可以覆盖验证方法。

现在谈谈使用 Java 反射的（可能是不可接受的）模式：

```
@Override
public void setMinimumVoorraad(int minimumVoorraad) {

    try {
        Field field = this.getClass().getSuperclass().getDeclaredField("minimumVoorraad");
        field.setAccessible(true);

        if(minimumVoorraad <= 5)
            field.set(this, 6);
        else
            field.set(this, minimumVoorraad);

        field.setAccessible(false);
    }
    catch(NoSuchFieldException | IllegalAccessException e) {
        // do something
    }
} 
```

值得注意的是，如果您一生中从未这样做过，那么您可能会因此而变得更好。它不仅**完全**破坏了所有合同，而且还依赖硬编码的字符串来进行字段名称查找，这本身​​就非常痛苦。但它确实存在。**如果没有一个如何不**做某事的例子，没有好的答案（NPE 已经在上面给出）是不完整的......

# orchardcms - 修改 Orchard CMS 搜索结果

> ID：15631767
> 
> 赞同：0
> 
> 时间：2013-03-26T07:38:55.273
> 
> 标签：orchardcms, orchardcms-1.6

是否可以修改 Orchard 的搜索结果，不显示部分（图片库和联系表）。

我创建了一个网站，添加了一个图片库。进行搜索时，图片库会显示在搜索结果中。与联系表格相同，它们也显示在搜索结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:51:31.613

将 Place Parts_ContactForm="-"/ 添加到我的 placement.info（在 Orchard.Search 文件夹中）。请参阅[http://docs.orchardproject.net/Documentation/Understanding-placement-info#OverridingPlacement](http://docs.orchardproject.net/Documentation/Understanding-placement-info#OverridingPlacement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:31:07.327

在 /Admin/ContentTypes 中，编辑内容类型（例如：联系表格），然后取消选中复选框“索引此内容类型以供搜索”

# android - Android - 将一个图像部分放在其他图像之上

> ID：15631770
> 
> 赞同：1
> 
> 时间：2013-03-26T07:39:04.697
> 
> 标签：android, layout

我正在尝试放置两个图像视图-

```
<ImageView
    android:id="@+id/ivLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:focusable="true"
    android:layout_marginTop="20dp"
    />

<ImageView
    android:id="@+id/ivAction"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="110dp"
    android:layout_centerHorizontal="true"
    android:focusable="true"
     /> 
```

图像之间有一些重叠。
动作图像与徽标重叠。
这是预期的行为，因为它们在屏幕上都有一些公共空间。

动作图像的顶部位于徽标的顶部，而我希望徽标的底部位于动作图像的顶部。
**发生了什么**- 行动是最重要的

--![在此处输入图像描述](../Images/3b10f37a1ba23eecdd13d1429ab1c215.png)

**需要什么**——行动应该去后台

![在此处输入图像描述](../Images/d61549f11a6e57b8ab241e04d2790f9c.png)

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:40:41.667

只需更改 XML 中 2 个 ImageView 的顺序。系统以相同的顺序绘制它们，因此无论您先放置什么，它们都在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T04:24:20.773

尝试这个。这会将您的顶部图像放在背景图像的中心

```
<RelativeLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"

<ImageView
    android:id="@+id/ivLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:focusable="true"
    android:layout_marginTop="20dp"
    />

<ImageView
    android:id="@+id/ivAction"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="110dp"
    android:layout_centerInParent="true"
    android:focusable="true"
     />
</RelativeLayout> 
```

# ios - 在保存在文档目录中的表格视图中显示图像

> ID：15631771
> 
> 赞同：0
> 
> 时间：2013-03-26T07:39:11.150
> 
> 标签：ios, objective-c, tableview

我已经使用以下代码将图像保存在文档目录中，并且图像成功保存在文档目录中

```
UIImage *image =[[UIImage alloc ]init ];
 image = [UIImage imageNamed:@"PlaceHolder.png"];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithString: @"PlaceHolder.png"] ];
    NSData* data = UIImagePNGRepresentation(image);
    [data writeToFile:path atomically:YES]; 
```

现在我想在表格视图中显示图像，因为在我的表格视图中，一些图像是从 facebook url 显示的，这就是我使用以下代码的原因

```
NSString *path = [[_arrayForTable valueForKey:@"URL"] objectAtIndex:[indexPath row]];

NSURL *url = [NSURL URLWithString:path];
AsyncImageView *imageView = [[[AsyncImageView alloc] init] autorelease];
imageView.frame = CGRectMake(0, -5, 45, 45);
imageView.imageURL=url; 
```

_arrayForTable 是 Dic 数组，它包括 URL，一些链接来自 facebook，一些来自文档目录

现在我的问题如下

** 只有 facebook 图像显示在表格视图中，但文档目录图像没有显示**

我已检查位置对于图像完全正确，但现在显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:08:52.567

在您的 .m 文件中

```
@interface YourClass ()<NSURLConnectionDelegate>
@property (nonatomic, copy) NSMutableData *receivedImageData;
@end

@implementation YourClass

- (void)init {
    if (self = [super init]) {
        // Do your init stuff
        _receivedImageData = [[NSMutableData alloc] initWithCapacity:0];
    }
}

// A method to start your connection
- (void)startDownloadingImage {
    NSMutableURLRequest *downloadImageRequest = [[NSMutableURLRequest alloc] init];
    downloadImageRequest.URL = [NSURL URLWithString:@"http://www.theImage.you/want/to/download.extension"];
    downloadImageRequest.HTTPMethod = @"GET";
    [NSURLConnection connectionWithRequest:downloadImageRequest delegate:self];

}

// You need the following delegate methods
#pragma mark -
#pragma mark NSURLConnection delegate methods

- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse {
    return request;
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    // This method is called frequently ... you can see if you log
    // NSLog(@"I am downloading");
    [self.receivedImageData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    // Log an error or do whatever you want ;)
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // Create your picture here using
    UIImage *image = [UIImage imageWithData:self.receivedImageData scale:1.0];
    // Only if there is an image display the downloaded image
    if (CGSizeEqualToSize(self.imageView.image.size, CGSizeZero)) {
        self.imageView.image = image;
    } 
```

}

您可以尝试下载图像，如果没有图像，您可以继续显示 PlaceHolder.png 确保您***复制***了图像并且它确实在您的*项目目录中*

```
// self.imageView is an UIImageView
self.imageView.image = [UIImage imageNamed:@"PlaceHolder.png"];
[self startDownloadingImage]; 
```

让我知道它是否对您有帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:40:14.673

```
NSURL *url = [NSURL URLWithString:path]; 
```

这在您的代码中是错误的。用这行代码替换它。

```
NSURL *url = [NSURL fileURLWithPath:path]; 
```

检查文件是否存在于您的文档目录中

```
if([[NSFileManager defaultManager] fileExistsAtPath:path])
    NSURL *url = [NSURL fileURLWithPath:path]; 
```

如果图像是否被保存，还要检查您的文档目录。像这样为您提供图像的名称

```
image = [UIImage imageNamed:@"PlaceHolder.png"]; 
```

因此，如果您重复这一行，您的图像将被覆盖在文档目录中。

您也可以在这里检查 BOOL success = [data writeToFile:path atomically:YES];

```
if(success)
   NSLog(@"image written successfully");
else
   NSLog(@"image writing failed"); 
```

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:56:23.353

`AsyncImageView`是 的子类`UIImageView`。您可以`image`在使用加载图像后简单地设置属性`initWithContentsOfFile:filePath`。您只需要弄清楚要从目录中加载哪些图像，以及从网络加载哪些图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:51:24.400

您是否检查了文档目录图像的图像数据不为零？您必须通过正确的路径检索图像并确保您提供正确的位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T08:26:35.983

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [[_arrayForTable valueForKey:@"URL"] objectAtIndex:[indexPath row]];

NSURL *url = [NSURL URLWithString:path];
if ([path rangeOfString:documentsDirectory].location != NSNotFound)
    url = [NSURL fileURLWithPath:path isDirectory:NO];

AsyncImageView *imageView = [[[AsyncImageView alloc] init] autorelease];
imageView.frame = CGRectMake(0, -5, 45, 45);
imageView.imageURL=url; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T08:42:10.157

Asynchimageview 是否支持从文档目录或带有图像 url 的包加载图像？？..尝试先从包中加载图像。最近我遇到了类似的问题，最终从服务器本身加载了一个占位符。

就像在其他一些答案中一样，您可以首先使用 set创建一个`UIImage`对象。`initWithContentsOfFile:``asynchimageView.image`

# php - Tinymce 编辑器没有出现在服务器上的 Croogo 上

> ID：15631779
> 
> 赞同：0
> 
> 时间：2013-03-26T07:39:44.763
> 
> 标签：php, javascript, tinymce, admin, croogo

我是克鲁戈的新手。我在本地服务器上创建了几个页面。我可以在那里使用编辑器，但是当我在服务器上上传文件时，我找不到任何附加的编辑器，我只能看到几个带有文本的 html 标签。

是否与此错误有关：

解析错误：语法错误，第 1 行 /hermes/bosoraweb081/b2606/sl.onpointsaliency/public_html/app/Plugin/Tinymce/webroot/js/tiny_mce.js 中的意外 '('

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:48:01.383

清除 /app/tmp 下的缓存文件，并删除浏览器缓存，因为 CakePHP 为插件资产设置缓存，然后尝试重新加载页面。

# android - 使用 Hierarchy Viewer for Android App Widget

> ID：15631783
> 
> 赞同：3
> 
> 时间：2013-03-26T07:39:54.010
> 
> 标签：android, android-layout, hierarchy

是否可以将[Hierarchy Viewer](http://developer.android.com/tools/debugging/debugging-ui.html#HierarchyViewer)用于[App Widget](http://developer.android.com/design/patterns/widgets.html)？如果是，如何？是否有任何教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:09:07.493

您是否尝试过将 Hierarchy Viewer 用于 UI 元素？我昨天按照这些说明进行了操作，它们对我来说效果很好。

要运行 Hierarchy Viewer，您可以按照以下步骤操作：

1.  连接您的设备或启动模拟器。
    为了保护安全，Hierarchy Viewer 只能连接到运行 Android 系统开发者版本的设备。
2.  如果您还没有这样做，请安装您要使用的应用程序。
3.  运行应用程序，并确保其 UI 可见。
4.  从终端（命令提示符），从 /tools/ 目录启动 hierarchyviewer。
5.  您看到的第一个窗口显示设备和模拟器列表。要展开设备或模拟器的 Activity 对象列表，请单击左侧的箭头。这将显示其 UI 当前在设备或模拟器上可见的 Activity 对象的列表。这些对象按其 Android 组件名称列出。该列表包括您的应用程序 Activity 和系统 Activity 对象。此窗口的屏幕截图如图 1 所示。
6.  从列表中选择您的活动名称。您现在可以使用 View Hierarchy 窗口查看其视图层次结构，或者使用 Pixel Perfect 窗口查看 UI 的放大图像。

由于这不适用于现有的 Android 系统，因此您必须使用开发人员版本或模拟器。

请！[在这里](http://developer.android.com/tools/debugging/debugging-ui.html)检查

如果这些说明不适用于应用小部件，或者您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T12:45:09.330

现在不推荐使用 Hierarchy Viewer，您应该使用 Layout Inspector。我遵循以下步骤：

1.  在模拟器上使用小部件启动我的应用程序
2.  单击工具/布局检查器
3.  设置复选框 显示所有进程
4.  接下来，您应该选择流程。Android 应用小部件代码在 OS 启动器进程中执行，因此您需要在选择进程菜单中选择它。对我来说，它调用 com.android.launcher3
5.  毕竟你得到了你的应用小部件的布局

我认为此步骤不适用于真实设备，因为系统进程不可用于调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T15:52:19.593

在 Romain Guy 开发出解决方法之前，这是正确的答案。

**您现在可以将该`ViewServer`类添加到您的项目中，并在任何设备中使用 HierarchyView。**

所需代码可在此处获得： [https ://github.com/romainguy/ViewServer](https://github.com/romainguy/ViewServer)

有关更多信息，[请查看此](https://stackoverflow.com/a/7607705/327011)。

# jquery - MVC3 - 将 jQuery 从 1.5.2 更新到最新版本

> ID：15631784
> 
> 赞同：2
> 
> 时间：2013-03-26T07:39:54.760
> 
> 标签：jquery, asp.net-mvc-3

我有一个使用 jQuery 1.5.2 的 MVC3 项目，我想更新到最新版本。我对 MVC3 有点陌生，我想知道更新 jQuery 的后果？有没有人有这方面的经验？以及如何实现？

最好的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:44:00.873

# 一般来说

与以前的版本相比，jQuery 1.9.x 有很大的变化。[您可以从此处](http://jquery.com/upgrade-guide/1.9/)检查这些更改。jQuery 团队做了很棒的工作并创建了[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/)。这个想法是您将 1.5.2 版本更改为最新版本，然后添加指向 jQuery Migrate 插件的链接（在 jQuery 之后）。

Migration 插件的作用是检查您是否使用了已弃用的功能（如 .live），并且该插件充当新实现的代理。您应该检查开发人员工具栏控制台中的消息并根据提示进行更改。

jQuery Migration 插件是一个临时解决方案，因为它增加了开销，如果您使用已弃用的功能，您确实应该进行这些更改。

# ASP.NET MVC

根据您使用的第 3 方库（Telerik、DevExpress 等），如果它们使用不再支持的功能/API 调用，您可能会遇到一些错误。也许他们有使用当前 jQuery 版本实现的更新版本。

# matlab - NACA 翼型 Matlab 问题

> ID：15631787
> 
> 赞同：0
> 
> 时间：2013-03-26T07:40:07.087
> 
> 标签：matlab

我在生成 NACA 翼型图时遇到了障碍。这是代码：

```
% NACA 6414%
clc
clear
format compact

m1=input('Please enter one digit number for maxi camber line:')
p1=input('Please enter one digit number for distance of m and chordline:')
t1=input('Please enter two digit number for thickness of airfoil:')

m=m1*0.01;
p=p1*0.1;
t=t1*0.01;

x1=[0:0.01:p];
x2=[p:0.01:1];
x=[x1,x2]

yc1=(m*(2*p*x1-x1.^2))/(p^2);
yc2=(m/(1-p)^2)*((1-2*p)+2*p*x2-x2.^2);
yt=(t/0.2)*(0.2969*sqrt(x)-0.1260*x-0.3516*x.^2+0.2843*x.^3-0.1015*x.^4)

yc=[yc1,yc2]

ang1=(atan((m/p^2)*(2*p-2*x1)))*180/pi
ang2=(atan((m/(1-p)^2)*(2*p-2*x2)))*180/pi
ang=[ang1,ang2]

xu=x-yt.*sin(ang)
yu=yc+yt.*cos(ang)
xl=x+yt.*sin(ang)
yl=yc-yt.*cos(ang)

xplot=[xu,xl]
yplot=[yu,yl]

plot(xplot,yplot) 
```

它没有生成正常的翼型图，而是带有一个非常奇怪的图，其中包含图片上的许多圆圈。谁能帮我弄清楚如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:47:06.053

这就是问题所在，我怀疑：

```
 ang1=(atan((m/p^2)*(2*p-2*x1)))*180/pi
 ang2=(atan((m/(1-p)^2)*(2*p-2*x2)))*180/pi
 ang=[ang1,ang2]

 xu=x-yt.*sin(ang)
 yu=yc+yt.*cos(ang)
 xl=x+yt.*sin(ang)
 yl=yc-yt.*cos(ang) 
```

函数 sin 和 cos 需要以弧度为单位的输入。atan 的输出也是弧度，但您将其转换为度数，这意味着您稍后绘制的 xu、yu 等输出将是错误的。尽量避免转换，除非你真的需要以度为单位的角度。或者，您可以使用这些函数的其他形式（sind、cosd、atand 等）并始终保持所有内容的度数。

# shell - Windows Shell 脚本和 powershell

> ID：15631788
> 
> 赞同：0
> 
> 时间：2013-03-26T07:40:16.653
> 
> 标签：shell, powershell, windows-server-2008-r2

我对 Shell 脚本（在 Windows Server 2008 R2 上工作）完全陌生，4 小时前我开始理解它。在搜索 SO 和 Google 时，我发现大多数教程/网站都在谈论 Linux/Unix shell 脚本。

*   编写批处理文件的脚本是否类似于 Linux/Unix 中的 shell 脚本？

我的要求是从一些文件夹中获取一些详细信息，在 SQL Server 上运行 SP/SQL 脚本并执行 SQL 代理作业。

*   使用 Powershell 是优势还是学习仅限于 Windows 服务器配置/版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:51:14.530

> *   编写批处理文件的脚本是否类似于 Linux/Unix 中的 shell 脚本？

不，批处理语法与 Linux/Unix shell 脚本语法完全不同。查看令人敬畏的[Rob van der Woude](http://www.robvanderwoude.com/batchfiles.php)的主页以获取批处理教程。

> *   使用 Powershell 是优势还是学习仅限于 Windows 服务器配置/版本？

使用 PowerShell 很可能是一个优势。PowerShell 自 Windows Vista/Server 2008 起默认安装，但也可用于[Windows XP 和 Server 2003](http://support.microsoft.com/kb/968929)。如果您必须决定是要学习批处理还是 PowerShell：选择 PowerShell。它*比*批处理更通用。

# php - 会话状态未在 php 的某些页面中设置

> ID：15631791
> 
> 赞同：0
> 
> 时间：2013-03-26T07:40:23.653
> 
> 标签：php, session

我正在使用 Elgg 应用程序，在 FB 连接插件内部我正在启动会话并在同一文件夹中设置一些变量我正在访问此会话属性它工作正常..

但是我又包含了一个 php 文件，登录后如果我通过 url session_status 直接调用此页面，则 session_status 为 1 但在其他两个文件夹中设置了它...

如何在这里设置会话，它们应该是页面到会话变量之间的任何链接

任何人都可以帮助...

FB_connect 文件夹

```
str= "var/www/elgg/mod/fb_connect
import-contact-plugin-str="var/www/elgg/mod/importer. 
```

我添加的新 php 文件

```
url=var/www/elgg/engine/sample.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:54:14.430

当你使用 Elgg 时，你[不应该改变它的 core](http://docs.elgg.org/wiki/Dont_Modify_Core)。几乎所有事情都可以通过插件来完成，这是使用 Elgg 的首选方式。

Elgg 会话保存在数据库中，并在系统启动事件时调用会话启动。但是，当您在插件上下文中时，会话已经到位，无需额外的 session_start 调用。

因此，如果您决定继续修改核心，您应该从注册的回调运行您的逻辑到引导系统：

```
elgg_register_event_handler('boot', 'system', YOUR_CALLBACK); 
```

# mysql - 在数据库模式设计方面需要帮助以获取印刷厂产品选项

> ID：15631807
> 
> 赞同：0
> 
> 时间：2013-03-26T07:41:34.907
> 
> 标签：mysql, database, database-design, activerecord

我最近一直在印刷店网站上工作。而且我现在在开发有效的数据库模式方面遇到了麻烦。

我的应用程序是一家印刷店，它为海报、名片和传单等提供定制印刷品。我面临的问题是开发产品选项的架构。这是一个场景：名片可以有“尺寸”和“材质”选项。“尺寸”可以是“3.5x2.5 英寸”或“3.25x2.25 英寸”。同样，“材料”可以是“300 gsm Card Stock”或“200 gsm Card Stock”。现在我的商店提供的是选项和数量组合的价格。

喜欢， `100 Business Cards + 3.5x2.5 inch + 300 gsm Card Stock = $500.00`

或者

`200 Business Cards + 3.5x2.5 inch + 300 gsm Card Stock = $800.00`.

这里需要注意的一点是，“传单”和“海报”产品的“尺寸”选项是不同的。所以“3.5x2.5”海报是没有意义的。海报产品将有自己的尺寸。价格始终与期权组合绑定，没有期权组合的产品没有单独的价格。

其次，也有基于重量的运输。所以我也想知道，权重在数据库中存储在哪里？

请提供一些关于设计这样一个数据库的见解。我也想要一种基于 ActiveRecord 的方法，因为我在 EAV 建模方面太弱了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:06:27.973

你可以这样做：

**`Products`**：

*   `ProductId`首要的关键，
*   `ProductName`,
*   ...

**`Materials`**：

*   `MaterialID`首要的关键，
*   `MaterialName`.

**`Units`**：

*   `UnitId`首要的关键，
*   `UnitName`.

**`ProductsSizesOptions`**：

*   `SizeOptionId`首要的关键，
*   `Height`,
*   `Width`,
*   `UnitId`外键约束`REFERENCES Units(UnitId)`来处理每个产品的不同类型的单元。

**`ProductsMaterialOptions`**：

*   `MaterialOptionId`,
*   `Quantity`,
*   `MaterialId``REFERENCES Materials(MaterialId)`为每种产品的报价处理不同类型的材料的外键约束。

**`ProductsOffers`**：

*   `OfferId`首要的关键，
*   `ProductId`外键约束`REFERENCES Products(ProductId)`，
*   `MaterialOptionId`外键约束 REFERENCES ProductsMaterialOptions(MaterialOptionId)`,
*   `SizeOptionId`外键约束`REFERENCES ProductsSizesOptions(SizeOptionId)`，
*   `Price`.

![在此处输入图像描述](../Images/13d8434ad334a0d48634263821b58378.png)

* * *

例如，对于您在问题中发布的示例数据，您可以通过`JOIN`表格简单地获取每种产品的这些优惠：

```
SELECT
  po.OfferId,
  p.ProductNAme,
  mo.Quantity,
  m.MaterialName,
  so.Height,
  so.width,
  u.UnitName,
  po.Price
FROM products                      AS p
INNER JOIN ProductsOffers          AS po ON p.ProductId         = po.ProductId
INNER JOIN ProductsMaterialOptions AS mo ON po.MaterialOptionId = mo.MaterialOptionId
INNER JOIN ProductsSizesOptions    AS so ON so.SizeOptionId     = po.SizeOptionId
INNER JOIN Units                   AS u  ON u.UnitId            = so.unitId
INNER JOIN Materials               AS m  ON m.MaterialId        = m.MaterialId; 
```

这会给你类似的东西：

```
| OFFERID |   PRODUCTNAME | QUANTITY | MATERIALNAME | HEIGHT | WIDTH | UNITNAME | PRICE |
-----------------------------------------------------------------------------------------
|       1 | Business Card |      100 |   Card Stock |      4 |     3 |      gsm |   500 |
|       2 | Business Card |      200 |   Card Stock |      4 |     3 |      gsm |   800 | 
```

然后从您的前端应用程序中，您可以按照您希望的方式格式化这些结果。

## [用于 DB 模式的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/820cf/2)

* * *

## 更新

**`Products`：**

*   `ProductId`,
*   `ProductName`,
*   ...

**`Options`：**

*   `OptionId`,
*   `OptionName`.

要存储可能的选项：

```
OptionId OptionName
1 Material
2 Shape
and so on 
```

**`Properties`：**

*   `PropertyId`,
*   `PropertyName`,
*   `PropertyTypeId`.

**`PropertiesTypes`：**

*   `PropertyTypeId`,
*   `PropertyTypeName`.

您可能不需要此表，但您可以在前端应用程序中使用它来了解如何在应用程序中显示此字段。例如，它可能包含以下值：

```
1 Integer
2 String
3 Decimal
... 
```

**`OptionsProperties`：**

*   `OptionPropertyId`,
*   `OptionId`,
*   `PropertyId`.

每个选项的属性，例如`Shape`和`Material`：

```
OptionPropertyId OptionId PropertyId 
1                   1        1
2                   2        2
3                   2        3
4                   2        4 
```

**`ProductOptions`：**

*   `ProductOptionId`,
*   `ProductId`,
*   `OptionId`.

**`ProductOptionsValues`：**

*   `ProductOfferOptionsId`,
*   `ProductId`,
*   `PropertyId`,
*   `NumericValue`,
*   `TXTValue`.

**`ProductsOffers`：**

*   `OfferId`,
*   `ProductOfferOptionsId`,
*   `Quantity`,
*   `Price`.

![在此处输入图像描述](../Images/761174f62b6ed2ee8b7a5b2e5fd4f82e.png)

因此您可以获得每个产品的报价列表，如下所示：

```
SELECT
  p.ProductName,
  MAX(CASE WHEN pr.PropertyName = 'Material Name' THEN PropertyValue END) AS 'Material Name',
  MAX(CASE WHEN pr.PropertyName = 'Height' THEN PropertyValue END) AS 'Height',
  MAX(CASE WHEN pr.PropertyName = 'Width' THEN PropertyValue END) AS 'Width',
  MAX(CASE WHEN pr.PropertyName = 'Unit' THEN PropertyValue END) AS 'Unit',
  o.Quantity,
  o.Price
FROM products AS p
INNER JOIN
(
  SELECT 
    ProductId,
    PropertyId,
    ProductOfferOptionsId, 
    COALESCE(NumericValue, TXTValue) AS PropertyValue
  FROM 
  ProductOptionsValues
) AS ov ON ov.ProductId = p.ProductId
INNER JOIN OptionsProperties AS op ON op.PropertyId            = ov.PropertyId
INNER JOIN Properties        AS pr ON op.PropertyId            = pr.PropertyId
INNER JOIN ProductsOffers    AS o  ON o.ProductOfferOptionsId  = ov.ProductOfferOptionsId 
GROUP BY p.ProductName,
         o.Quantity,
         o.Price; 
```

这会给你：

```
|   PRODUCTNAME |  MATERIAL NAME | HEIGHT | WIDTH | UNIT | QUANTITY | PRICE |
-----------------------------------------------------------------------------
| Business Card | gsm Card Stock |    3.5 |   2.5 | inch |      100 |   500 |
| Business Card | gsm Card Stock |    3.5 |   2.5 | inch |      200 |   800 | 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/99885/1)

* * *

当然，这个查询没有意义。要获取所有属性的列表，您必须使用动态 SQL 动态执行此操作。您可以将以下代码放入存储过程中：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(pr.PropertyName = ''',
      pr.PropertyName, ''', ov.PropertyValue, 0)) AS ', '''',   pr.PropertyName , '''')
  ) INTO @sql
FROM Properties        AS pr 
INNER JOIN
(
  SELECT 
    PropertyId,
    COALESCE(NumericValue, TXTValue) AS PropertyValue
  FROM 
  ProductOptionsValues
) AS ov ON pr.PropertyId = ov.PropertyId;

SET @sql = CONCAT('SELECT
  p.ProductName, ', @sql , ', o.Quantity,
  o.Price
FROM products AS p
INNER JOIN
(
  SELECT 
    ProductId,
    PropertyId,
    ProductOfferOptionsId, 
    COALESCE(NumericValue, TXTValue) AS PropertyValue
  FROM 
  ProductOptionsValues
) AS ov ON ov.ProductId = p.ProductId
INNER JOIN OptionsProperties AS op ON op.PropertyId            = ov.PropertyId
INNER JOIN Properties        AS pr ON op.PropertyId            = pr.PropertyId
INNER JOIN ProductsOffers    AS o  ON o.ProductOfferOptionsId  = ov.ProductOfferOptionsId 
GROUP BY   p.ProductName,
  o.Quantity,
  o.Price');

prepare stmt 
FROM @sql;

execute stmt; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/99885/5)

这将动态地旋转所有属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:25:59.327

您正在销售目录中的物品。商品可以是商品（实际上是产品的规格，而不是实物资产），也可以是商品的集合，称为营销包。

您需要在这里使用[表继承](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)。

```
catalog_item
------------
id
type {good, marketing_package}
name

good : catalog_item
-------------------
size
material

marketing_package : catalog_item
--------------------------------
standard_price

marketing_package_good (this is a junction table)
----------------------
marketing_package_id
good_id
quantity

poster : good
-------------
{any poster-specific properties or defaults}

flyer : good
------------
{any flyer-specific properties or defaults}

business_card : good
--------------------
{any business-card-specific properties or defaults} 
```

# ruby-on-rails - ruby 中 html.haml 文件的 Tab 键顺序/tabindex 设置

> ID：15631808
> 
> 赞同：0
> 
> 时间：2013-03-26T07:41:37.410
> 
> 标签：ruby-on-rails, haml, tabindex, tab-ordering

我试过`tabindex => '1'`and `tabindex = '1'`，但我无法让标签索引/标签顺序工作。我想从`:full_name`到`:telephone`到`:address`（它的列搞乱了排序）。有任何想法吗？提前致谢。这是我的代码。

```
=simple_form_for( :application, :url => users_path( application ), :method => :put ) do | f |
  .clearfix
    .column
      =f.input :full_name, label: 'Full Name', placeholder: 'Full Name'
      .help-block *&nbsp;please enter your legal name
      =f.input :address_1, label: 'Address', placeholder: 'Apartment, Street'
      .guardian
        =f.input :guardian_full_name, label: 'Guardian Full Name', placeholder: 'Full Name'
    .column
      =f.input :telephone, label: 'Telephone Number', as: :string
      .help-block &nbsp;
      =f.input :address_2, label: '&nbsp;', placeholder: 'City, Country, Zip/Postcode'
      .control-group.boolean &nbsp;
      .guardian
        =f.input :guardian_email, label: 'Guardian Email Address', placeholder: 'Email Address', as: :string
    .column#partner-details-errors
      =render 'partner_details_errors', application: application
  =f.submit 'Show Contract', class: 'btn btn-primary', data: { 'text' => 'Create Contract', 'disabled-text' => 'Creating ...' } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:21:17.613

使用`input_html`选项：

```
=f.input :full_name, label: 'Full Name', placeholder: 'Full Name', input_html: { tabindex: 1 } 
```

# android - 在android中单击按钮时出错

> ID：15631810
> 
> 赞同：0
> 
> 时间：2013-03-26T07:41:54.063
> 
> 标签：android, buttonclick

```
public boolean isValidPin(String pin) {

type = false; 
Cursor c =db .rawQuery( "select * from"+ pinTable+" where Pin='" + pin+ "'", null); 
if (c.getCount() > 0) 
{ 
c.moveToFirst(); 
type = true; 
}
 c.close(); 
return type; 
} 
```

我在android wen iclick的对话框上有一个按钮，它会强制停止...这是logcat错误..

```
03-26 07:35:23.140: E/AndroidRuntime(16907): FATAL EXCEPTION: main
03-26 07:35:23.140: E/AndroidRuntime(16907): java.lang.NullPointerException
03-26 07:35:23.140: E/AndroidRuntime(16907):    at com.android.lnt_form.WayDataBase.isValidPin(WayDataBase.java:147)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at com.android.lnt_form.LoginActivity$3.onClick(LoginActivity.java:133)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.view.View.performClick(View.java:4202)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.view.View$PerformClick.run(View.java:17340)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.os.Handler.handleCallback(Handler.java:725)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.os.Looper.loop(Looper.java:137)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at java.lang.reflect.Method.invokeNative(Native Method)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at java.lang.reflect.Method.invoke(Method.java:511)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-26 07:35:23.140: E/AndroidRuntime(16907):    at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙。我该如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:49:39.697

这里没什么好说的，但我要试一试，说你在尝试访问它之前没有初始化你的数据库。这将在该行上给出一个空指针。

# javascript - 谷歌地图：绘制优化路径

> ID：15631812
> 
> 赞同：1
> 
> 时间：2013-03-26T07:42:01.897
> 
> 标签：javascript, google-maps

所以我有一个 javascript 表格，其中包含一些客户的经度和纬度。我想做的是绘制一条连接它们的路径，以便于到达它们。我尝试了折线，但它似乎在不尊重主要路线的情况下画线。另外，我希望优化路径，我选择要访问的第一个客户端，程序通过链接最近的路径来绘制路径的其余部分。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:21:35.370

有时只知道某物的名称就可以帮助您找到解决方案。您要问的问题恰好是计算和数学中的一个经典问题，称为[旅行商问题](https://www.google.com/search?q=traveling+salesman+problem)(TSP)。

有了这些知识，我们可以将搜索范围缩小到[javascript google maps api travelling salesman problem](https://www.google.com/search?q=javascript+google+maps+api+traveling+salesman+problem)，这是我们幸运的一天：第一个匹配项恰好是 Google Maps API 的开源[TSP 求解器](https://code.google.com/p/google-maps-tsp-solver/)。

如果您碰巧没有 Subversion 客户端，请不要担心；您可以直接从 Google Code下载[BpTspSolver.js](https://google-maps-tsp-solver.googlecode.com/svn/trunk/BpTspSolver.js)和[tsp.js文件。](https://google-maps-tsp-solver.googlecode.com/svn/trunk/tsp.js)

还有一个[用于 TSP 求解器的 Google 组](https://groups.google.com/forum/#!forum/google-maps-tsp-solver)，您可以在其中找到更多信息。

# java - 通过安卓手机使用java通过PC发送短信

> ID：15631814
> 
> 赞同：0
> 
> 时间：2013-03-26T07:42:06.687
> 
> 标签：java, android, sms

我想以USB调试模式连接我的手机，然后通过一些java代码发送短信，这样文本实际上是使用我的提供商短信计划通过我的手机发送的。我没有任何想法。我用谷歌搜索但找不到任何有用的东西。任何想法、方法或链接到一些教程都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:21:29.187

我建议[SMS lib](http://smslib.org/) 使用 Java 代码通过您的手机发送 SMS。但是，如果您对其他想法持开放态度，我建议使用公共网络服务在您的位置发送您的 SMS，您可以使用例如[nexmo](https://www.nexmo.com/)，他们有非常好的 api 并且收取非常便宜的 SMS。你有一个开始的初始信用。

# java - Websphere 管理工具

> ID：15631819
> 
> 赞同：1
> 
> 时间：2013-03-26T07:42:33.847
> 
> 标签：java, websphere

我正在尝试为 websphere 创建一个管理客户端程序，但是当我尝试连接时，我收到以下消息。

也许我缺少一些库（我在记事本中创建我的应用程序）。

```
at TryConnection1.main(TryConnection1.java:37) Caused by: java.lang.ClassNotFoundException: com.ibm.websphere.security.auth.WSL oginFailedException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

我的代码：

```
import java.util.Properties;
import javax.management.MalformedObjectNameException; 
import javax.management.ObjectName; 

import javax.management.*;
import com.ibm.websphere.management.*; 
import com.ibm.websphere.management.AdminClient; 
import com.ibm.websphere.management.AdminClientFactory; 
import com.ibm.websphere.management.exception.*;

import com.ibm.websphere.management.exception.ConnectorException;

public class TryConnection1 {

    /**  * @param args  */

    public static void main(String[] args) {

    Properties connectProps = new Properties(); 
    connectProps.setProperty(AdminClient.CONNECTOR_TYPE, AdminClient.CONNECTOR_TYPE_SOAP);

    connectProps.setProperty(AdminClient.CONNECTOR_HOST, "hostgoeshere");
    connectProps.setProperty(AdminClient.CONNECTOR_PORT, "portgoeshere");
    connectProps.setProperty(AdminClient.USERNAME, "usernamegoeshere");
    connectProps.setProperty(AdminClient.PASSWORD, "passgoeshere");

    AdminClient adminClient = null; 
    try {
        adminClient = AdminClientFactory.createAdminClient(connectProps); 
    } catch(ConnectorException e) {
        System.out.println("Exception creating admin client: " + e); }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:32:38.440

如果您使用不同的 WebSphere 版本，请尝试将 $WEBSPHERE_HOME/AppServer/runtimes/com.ibm.ws.admin.client_8.5.0.jar 或类似内容添加到您的类路径中。这是 WebSphere Admin Client 所需的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:50:56.453

您应该尝试添加：

```
import com.ibm.websphere.security.auth.*; 
```

# c++ - 调用基类的模板函数

> ID：15631823
> 
> 赞同：-4
> 
> 时间：2013-03-26T07:43:00.057
> 
> 标签：c++, templates, linker

```
class Base
{
  protected:
    template<typename TFunc>
    void m_vProcess(TFunc& func) const
    {
         BasePrivateClass<TFunc> baseprivateobj(func);
         // rest of code              
    }

   private:   
       template<typename TFunc>
       class BasePrivateClass
       {
       public:
           BasePrivateClass(TFunc& obj) :m_obj(oParam)
           {}                            
        private:  
           TFunc& m_obj;
   };
}; 
```

这是我的派生类：

```
class Derived: public Base
{
private:
   class DerivedPrivateClass
    {
    public:
        explicit DerivedPrivateClass(int **p): m_objDerived(poParam)
        {}
    private:
         int** m_objDerived;
    };
}; 
```

从派生类中的一个函数，我试试这个：

```
DerivedPrivateClass obj(param);
this->m_vProcess(obj); 
```

* * *

我收到多重定义符号的链接器错误 - 符号在基类和派生类中都定义。

我不知道是什么导致了链接器错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:05:19.260

正如我评论的..有点难以阅读..但从外观上看，一个主要问题是您尝试使用的 m_vProcessAnimParams 函数在 Base 中是私有的，因此 Dervied 无法访问它..

# python - 如何在没有 SSL 连接的情况下从 Python 中的密钥库中读取密钥？

> ID：15631824
> 
> 赞同：2
> 
> 时间：2013-03-26T07:43:15.370
> 
> 标签：python, keystore

知道如何从密钥库或密钥文件（基本上是 PKCS12 类型）访问密钥。我不想创建任何连接。我只想访问将在用户计算机上的这个私钥，对其进行加密，然后将其作为纯文本字符串作为参数发送到服务器。我们这样做是为了某种身份验证。

那么我怎样才能简单地从密钥文件中提取密钥呢？无需 SSL 连接/证书/等。

我正在使用 python 来实现这一点。

溶胶：

我能够使用以下代码使用 pyOpenSSL 提取密钥：

```
>>> p12 = load_pkcs12(file("C:\XYZ\DistProfile.p12", "rb").read(), "passwd")  
>>> p12.get_certificate()
>>> p12.get_privatekey()
>>> key_pem = dump_privatekey(FILETYPE_PEM,p12.get_privatekey())
Key_pem will have the private key 
```

# maven - 在多模块构建中，为什么需要告诉子模块在哪里可以找到父 POM？

> ID：15631827
> 
> 赞同：1
> 
> 时间：2013-03-26T07:43:30.927
> 
> 标签：maven, pom.xml, parent-pom

考虑以下平面多模块布局的场景：

```
| parent-pom
|     - pom.xml
| module1
|     - pom.xml 
```

`parent-pom/pom.xml`所有模块的父 POM在哪里：

```
<groupId>my-group</groupId>
<artifactId>parent-pom</artifactId>
<version>1.0.0</version>
...
...
<module>../module1</module> 
```

现在，`pom.xml`of`module1`包含以下`parent`部分：

```
<parent>
    <groupId>my-group</groupId>
    <artifactId>parent-pom</artifactId>
    <version>1.0.0</version>
</parent> 
```

我从一个干净的本地存储库开始；没有一个工件是预先构建的，一切都是从头开始的。尝试执行`mvn install`on`parent-pom`会导致错误，因为 Maven reactor 会`my-group:base-pom`在本地仓库中查找，失败（因为它不存在）然后查找`../pom.xml`.

美好的。我的问题是：如果构建`module1`是通过构建调用的`parent-pom`，为什么 Maven 甚至必须在`pom.xml` *任何地方*寻找父级？当 Maven 来 build 时`module1`，它已经知道以下事情：

1.  文件系统的物理位置`my-group:parent-pom:1.0.0`。
2.  `module1`根植`my-group:parent-pom:1.0.0`于.

为什么要看别处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:31:04.167

POM简介：项目[继承：示例2](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Example_2)告诉我们如下：-

### 情景

但是，如果父项目已经安装在我们的本地存储库中或者在那个特定的目录结构中（父项目`pom.xml`比模块的目录高一个目录`pom.xml`），这将起作用。

但是如果还没有安装父目录并且目录结构是

```
.
 |-- my-module
 |   `-- pom.xml
 `-- parent
     `-- pom.xml 
```

### 解决方案

为了解决这个目录结构（或任何其他目录结构），我们必须将`<relativePath>`元素添加到我们的父部分。

```
<project>
    <parent>
        <groupId>com.mycompany.app</groupId>
        <artifactId>my-app</artifactId>
        <version>1</version>
        <relativePath>../parent/pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>my-module</artifactId>
</project> 
```

顾名思义，它是`relative path`从模块`pom.xml`到父级的`pom.xml`.

### 编辑：

[getRelativePath](http://maven.apache.org/ref/3.0.5/maven-model/apidocs/org/apache/maven/model/Parent.html#getRelativePath%28%29)告诉我们如下

> 在签出中获取父 pom.xml 文件的相对路径。**默认值为 ../pom.xml**。Maven首先在当前构建项目的reactor中查找父pom，然后在文件系统上的这个位置，然后是本地存储库，最后是远程存储库。relativePath 允许您选择不同的位置，**例如当您的结构是平坦的，或更深而没有中间父 pom 时**。但是，组 ID、工件 ID 和版本仍然是必需的，并且必须与给定位置的文件匹配，否则它将恢复到 POM 的存储库。此功能仅用于增强该项目的本地结帐开发。

我希望这可能会有所帮助。

# javascript - 为什么我的 JavaScript if 语句不起作用？

> ID：15631828
> 
> 赞同：0
> 
> 时间：2013-03-26T07:43:36.890
> 
> 标签：javascript

第一条`if`语句不起作用，尽管我将块参数的值传递为`physicalActivityBlock`：

```
function obj(select,block,idName) {
    var a=document.getElementById(select).value;
    var b=document.getElementById(block);
    var i=0;
    b.innerHTML = '';

   if(block=='physicalActivityBlock'){
       b.appendChild('<p>hello</p>');
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:44:39.560

`if`条件看起来不错，但是块中的代码是`if`错误的。[`appendChild`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107)不接受字符串。它接受一个 DOM 节点。

无论如何，您`innerHTML`可以这样做：

```
if (block == 'physicalActivityBlock') {
    b.innerHTML = '<p>hello</p>';
} 
```

我可能会稍微改变逻辑，所以你只设置`innerHTML`一次：

```
function obj(select,block,idName) {
    var a=document.getElementById(select).value;
    var b=document.getElementById(block);
    var i=0;

   b.innerHTML = block=='physicalActivityBlock' ? '<p>hello</p>' : '';
} 
```

如果你真的想使用`appendChild`，你必须创建元素：

```
var p = document.createElement('p');
p.innerHTML = 'hello';
b.appendChild(p); 
```

# c# - C# 先做这个语句然后

> ID：15631829
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:43:41.500
> 
> 标签：c#, insert-update

我遇到了问题

```
{
   double a = Convert.ToDouble(textBox1.Text);
   double b = Convert.ToDouble(textBox8.Text);
   textBox8.Text = (a + b).ToString();
   textBox1.Text = "";
   double c = Convert.ToDouble(textBox2.Text);
   double d = Convert.ToDouble(textBox9.Text);
   textBox9.Text = (c + d).ToString();
   textBox2.Text = "";
}

//cmd = new OleDbCommand("update Table1 set balance='" + textBox8 + "','" + textBox9.Text + "','" + textBox10.Text + "','" + textBox11.Text + "','" + textBox12.Text + "','" + textBox13.Text + "','" + textBox14.Text + "', where ID=" + textBox15.Text, con);
  cmd = new OleDbCommand("UPDATE Table1 SET OUT = ? " + " WHERE ID = ?", con);
  cmd.Parameters.AddWithValue("OUT", textBox8.Text);
  cmd.Parameters.AddWithValue("OUT", textBox9.Text);
  cmd.Parameters.AddWithValue("ID", textBox15.Text);

  con.Open();

  cmd.ExecuteNonQuery();

  con.Close();
  loaddata();
} 
```

我有 2 个`textbox`，一个是 Balance，一个是 IN

余额是从我的数据库中加载数据，允许用户输入一个值，所以

`IN + Balance = Balance`，这将更新到数据库。

更新功能是完美的。但是我怎样才能先添加值然后运行更新？建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:50:03.180

因为你正在这样做

```
textBox8.Text = (a + b).ToString();
textBox9.Text = (c + d).ToString(); 
```

这意味着 sum 与`textBox8.Text`and`textBox9.Text`

那么你正在这样做

```
cmd.Parameters.AddWithValue("OUT", textBox8.Text); 
cmd.Parameters.AddWithValue("OUT", textBox9.Text); 
```

你的查询是：

```
UPDATE Table1 SET OUT = textbox8.Text  WHERE ID = x
UPDATE Table1 SET OUT = textbox9.Text  WHERE ID = x 
```

在那里，当你这样做时`cmd.ExecuteNonQuery()`，你`OUT`在行中的`ID`x列`Table1`会更新两次，

首先，它的值被设置为 Text of`textbox8`然后它被更新为`textbox9`.

我想，这不是你想要的。

您可能希望针对不同的 ID（即不同的行）循环执行此操作，即

```
 UPDATE Table1 SET OUT = textbox8.Text WHERE ID = x1
 UPDATE Table1 SET OUT = textbox9.Text WHERE ID = x2 
```

或者

相同的 ID 但不同的列，即

```
UPDATE Table1 SET OUT = textbox8.Text, AnotherColumn=textbox9.Text  WHERE ID = x 
```

# button - 我们如何通过单击帐户对象中销售人员中的按钮将自定义地址字段复制到标准地址字段中

> ID：15631831
> 
> 赞同：0
> 
> 时间：2013-03-26T07:43:43.413
> 
> 标签：button, salesforce

如何通过单击帐户对象中的销售人员中的按钮来创建将自定义地址字段复制到标准地址字段的按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:30:39.437

您可以使用设置所需帐户字段的方法为帐户创建控制器扩展。

然后在标准控制器是 Account 并且扩展包括您的类的视觉强制页面上放置一个命令按钮。此命令按钮的操作可以调用您的方法来复制字段。

一个轻微的变化是使用 Account 上的自定义命令按钮将用户重定向到上面的 visualforce 页面，然后在 apex:page 操作中触发该方法。

请参阅[构建控制器扩展](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_extension.htm)。

# php - 在 PHP 中包含远程文件

> ID：15631832
> 
> 赞同：1
> 
> 时间：2013-03-26T07:43:48.060
> 
> 标签：php, include

我无法在我的 PHP 脚本中包含远程 PHP 文件。这是我所做的：

1.  设置`allow_url_include`为`on`php.ini。
2.  将以下内容添加到我的索引顶部

    ```
    $content = file_get_contents('http://domain.com/folder/file.php'); 
    ```

但仍然无法使用远程服务器中的 file.php 中的任何函数。错误：

```
PHP Fatal error:  Call to undefined function makeConnection() 
```

**注意：** makeConnection() 在 file.php 里面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:55:55.470

如果您的意思`makeConnection()`是在外部 file.php 中声明了函数“”，那么您将看不到该函数，因为外部服务器正在解析 php 代码而**不是**向您发送原始代码。

您需要将外部保存`file.php`到类似的东西，`file.txt`以便服务器返回内容而不进行处理。

试试看它是否适合你。

如果是这样，那么您可以计划一些更有效的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:49:50.253

file_get_contents 和 include 不一样，file_get_contents 只是获取文件内容（就像它自己的名字一样），include 执行文件中的代码......
所以你只是想获取文件内容还是从远程服务器执行代码？

如果你想包括它只是

```
include('http://domain.com/folder/file.php'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T07:47:30.297

下载代码后使用[`eval()`](http://php.net/manual/en/function.eval.php)函数：

```
<?
$content = file_get_contents('http://domain.com/folder/file.php'); 
eval($content)
?> 
```

但要小心包含其他来源的东西而不检查。

# javascript - 这个原型是做什么的？

> ID：15631833
> 
> 赞同：0
> 
> 时间：2013-03-26T07:43:48.300
> 
> 标签：javascript

它是在制作新版本的 Number 函数并将其命名为别的吗？有没有更好的方法来写这个？

```
Number.prototype.clamp = function(min, max) {
  return Math.min(Math.max(this, min), max);
}; 
```

是不是一样

```
Number.prototype.NumberToMystring = function(n) {
  return n.toSTring();
}; 
```

然后 NumberToMystring(5) 将返回 "5" 但作为字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:49:33.330

No NumberToMystring 与clamp 不同。

Clamp 有不同的目标，NumberToMystring 也是如此。Clamp 确保数字在后者是转换运算符的范围内。

夹具的用途是

```
var x = (5).clamp(0, 255); return 5

Number.prototype.clamp = function(min, max) {
  return Math.min(Math.max(this, min), max);
}; 
```

如果你看到这个原型。您将在 return 语句中有一个 this 对象。这只不过是您在我们的例子中调用夹子的数字，它是 5。

要了解为什么会这样，您必须了解很多概念，从执行上下文、范围开始，然后访问原型。

尝试像这样更改钳位函数，看看它返回什么。这将帮助您了解为什么您的 JS fiddle 代码不起作用。

```
Number.prototype.newclamp = function(min, max) {
  return this;
}; 
```

这将返回 Number 对象。如果您在此调用期间分析作用域链，那么您将在其作用域中找到 5，因此执行任何操作时将返回 5

```
var y = 5;
var z;

z = y.newclamp();
z.toString() // return 5;

Number.prototype.NumberToMystring = function(n) {
  return n.toSTring();
}; 
```

在这个特定的原型中，您只使用调用原型时传递的参数。这就是 NumberToMystring(5) 以 5 作为参数返回“5”的原因

要了解原型、范围链和执行上下文，请查看此站点。 [http://dmitrysoshnikov.com/ecmascript/chapter-3-this/](http://dmitrysoshnikov.com/ecmascript/chapter-3-this/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:54:09.227

JavaScript 中的所有对象都是 Object Object 的后代；所有对象都从 Object.prototype Object.prototype 继承方法
和属性，尽管它们可能被覆盖（除了具有空原型的对象，即 Object.create(null)）。例如，其他
构造函数的原型会覆盖构造函数属性并提供自己的 toString
方法。对 Object 原型对象的更改会传播到所有对象，除非受这些更改影响的属性和方法沿原型链被进一步覆盖。

[看这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

# perl - perl中双斜杠之间的执行命令是什么？

> ID：15631835
> 
> 赞同：0
> 
> 时间：2013-03-26T07:43:56.957
> 
> 标签：perl, syntax

我正在尝试在安装了山狮的 mac pro 上构建 gccg(gccg.sourceforge.net)。我尝试按照手册安装所有东西，但它给了我一些错误，例如：

> gccg_package.pl：gccg_package 需要 gccg_package.pl 第 1224 行的 gunzip。

然后我试图解决这个问题，并递归地找到这个问题的根源：

```
($_ = `gunzip --version 2>&1`)  &&  /gunzip / or die "$0: gccg_package requires gunzip"; 
```

我用这个 && 运算符输出操作数的每个部分，并确保“/gunzip /”在这里返回 false。这里的问题是我不明白这些陈述在这里是什么意思？

对不起，我的 perl 新手，我试图找到一些教程，但似乎无论如何搜索都不是那么容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:16:52.397

简而言之，如果 的输出`gunzip --version 2>&1`不包含字符串，它会导致程序结束`gunzip`。

*   `$_ = `gunzip --version 2>&1``执行反引号中的 shell 命令，捕获其输出，将输出存储在 中`$_`，如果返回输出则返回 true。
*   `/gunzip /`是匹配运算符。如果内容`$_`包含字符串，则返回 true `gunzip`。
*   `die`抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:00:04.113

我对 perl 有点生疏，但是：

第一部分`($_ = `gunzip --version 2>&1`)`执行`gunzip --version 2>&1`并将输出存储在`$_`

用作快捷操作，`&&`如果左侧返回true，则将执行右侧。

右手边`/gunzip /`是一个正则表达式，在 perl 中，如果没有为正则表达式声明变量（标量），它将在默认变量上执行`$_` 所以这只会在第一部分的输出中搜索“gunzip”并返回 true 如果它包含它

`or die "$0: gccg_package requires gunzip";`仅当前两个部分之一返回 false 时，才会执行最后一部分。

有关短路操作的更多信息，请查看[http://www.perlmonks.org/?node_id=301355](http://www.perlmonks.org/?node_id=301355)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T07:59:21.427

基本上，这一行告诉你应该安装`gunzip`.

`gunzip`是一个 Unix 命令；这条线的作用是它首先将部分`$_`的​​结果分配给变量`gunzip --version`；然后它在该变量上运行正则表达式搜索`/gunzip /`，以检查命令的结果是否包含`gunzip`（而不是`gunzip`，没有空格，如果命令的结果是 ，也可以找到`gunzip: command not found`）。最后，如果搜索不成功，例如`gunzip`由于某种原因没有执行，程序会`die`在打印您阅读的消息后停止 ( )。

# php - 如果数据库中存在会话，则拒绝登录

> ID：15631838
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:44:06.607
> 
> 标签：php, mysql

我在我的脚本中实现了一个 php 登录系统。如果数据库中存在现有会话，我将如何制作拒绝用户登录的脚本？

例如，

用户 1 登录系统 > 接受登录 用户 2 使用与用户 1 相同的帐户登录系统 > 拒绝，因为存在另一个会话。

这就是我希望它工作的方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:51:47.207

将您的 sessionId 存储在您的数据库中，然后如果上次访问时间是最近的，则拒绝具有不同 sessionID 的用户的登录尝试（通过查找上次登录时间与当前时间之间的差异来计算）。注销时清除 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:52:38.897

为了那个原因

您必须将`session`值存储在数据库中。然后当其他用户使用相同的详细信息登录时。您可以从数据库中检查已经有一个用户在线使用相同的登录详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:59:21.963

我会将另一个字段放入名为 last_seen 的数据库中。每次登录用户产生请求 - 只需将当前日期放入该字段。

当有人尝试登录时 - 只需检查多久以前在网站上看到用户。如果超过会话超时时间（默认为 20 分钟） - 您可能会认为用户已注销并允许登录。

否则 - 拒绝登录。

您无法确定用户是否仍在使用您的网站。当用户登录/注销时，您可以在某些字段中输入 1/0，但没有人可以保证用户在关闭选项卡之前会单击注销链接。

但是，当用户单击注销链接时，您可以通过将该新字段设置为 null 来改善您网站的行为。否则可能会发生有人注销并现在尝试再次登录，但由于系统仍将他的帐户视为正在使用而无法这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:51:40.637

在您的用户表中应该有一个名为logged_in 的新字段。验证时检查此字段它具有什么值。

如果为 0 / false，则让用户登录并将 logged_in 字段设置为 1/true。

否则，如果 logged_in 字段为 1/true，则不要让第二个用户登录。

**注销时不要忘记将 logged_in 字段设置为 0/false。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:51:56.217

好问题。

**如果您指的是 PHP 会话：**您可以将会话 ID（和上次访问时间）存储在数据库中，如果上次访问时间太近（例如，在过去 20 内），则拒绝具有不同会话 ID 的用户的登录尝试分钟）。当然，在注销时清除 ID。

但是请注意，如果用户在没有注销的情况下关闭浏览器然后重新打开它，他们很可能会被锁定一段时间（上面的 20 分钟，或您决定的任何时间间隔），因为他们不会有匹配的会话饼干了。

**如果您指的是数据库会话：**您必须像在此[链接](http://dev.mysql.com/doc/refman/5.0/en/user-resources.html)`Setting Account Resource Limits`中一样在您的 Mysql DB 中配置。但这里的问题是，一个帐户与服务器的同时连接数仅在 MySQL 5.0.3 中可用。

**如果您指的是实时检查，**那么您可以使用[COMET 编程](http://en.wikipedia.org/wiki/Comet_%28programming%29)将数据推送到浏览器，而无需浏览器明确请求它。

# javascript - 使用 jquery 加载将文本插入 div

> ID：15631839
> 
> 赞同：2
> 
> 时间：2013-03-26T07:44:13.600
> 
> 标签：javascript, jquery, ajax, html, text

我试图让 jquery 将文本文件中的文本加载到博客的 div 中，但它根本不起作用。有什么帮助吗？

这就是我正在使用的（我见过其他人的使用）。另外，我没有在本地测试它。

```
$("#content").load("articlename.txt"); 
```

更新：有什么办法可以让输入保持休息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:55:09.530

没有直接的方法可以从 jquery 的外部文件中获取数据。但是通过ajax是可能的。

```
$(document).ready(function() {
 $("#loadData").click(function() {
    $.ajax({
        url : "articlename.txt",
        dataType: "text",
        success : function (data) {
            $("#content").html(data);
        }
    });
 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:53:36.513

```
$(document).ready(function() {
   $("#content").load("articlename.txt"); 
}); 
```

将您的电话包裹在 document.ready 中。

# visual-studio - 如何调试流畅的 API？

> ID：15631840
> 
> 赞同：6
> 
> 时间：2013-03-26T07:44:13.467
> 
> 标签：visual-studio, debugging, fluent-interface

流畅的 API 很棒。他们提供简洁易读的代码。
但是，当某些事情按预期工作时，这是一种严重的痛苦。

有没有办法在VS中查看方法调用链的中间结果？可能是一些加载项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T11:15:04.920

由于 VS 2012 现在可以查看链中方法的返回结果。请参阅自动窗口。

# regex - 用于拆分字符串并将其添加到数组的正则表达式

> ID：15631842
> 
> 赞同：0
> 
> 时间：2013-03-26T07:44:16.887
> 
> 标签：regex, arrays, vb.net, split

我有一个格式如下的字符串：

```
[0:2]={1.1,1,5.1.2} 
```

我的要求是在运算符之后拆分花括号内的值`=`，并将它们存储到字符串数组中。我曾尝试通过使用`Substring()`and`IndexOf()`方法来拆分部分，并且成功了。但是我需要一种更简洁优雅的方式来通过正则表达式实现这一点。

有没有人有线索来满足我的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:56:09.487

这是您的完整 RegEx 解决方案：

```
Dim input As String = "[0:2]={1.1,1,5.1.2}"

Dim match = Regex.Match(input, "\[\d:\d\]={(?:([^,]+),)*([^,]+)}")

Dim results = match.Groups(1).Captures.Cast(Of Capture).Select(Function(c) c.Value).Concat(match.Groups(2).Captures.Cast(Of Capture).Select(Function(c) c.Value)).ToArray() 
```

不要认为它比标准拆分更具可读性：

```
Dim startIndex = input.IndexOf("{"c) + 1
Dim length = input.Length - startIndex - 1
Dim results = input.Substring(startIndex, length).Split(",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:53:46.100

您可以使用正则表达式来提取花括号内的值，然后使用普通的`Split`：

```
Regex.Match("[0:2]={1.1,1,5.1.2}", "{(.*)}").Groups(1).Value.Split(","c) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:55:42.403

```
Dim s As String = "[0:2]={1.1,1,5.1.2}";

Dim separatorChar as char = "="c;
Dim commaChar as char = ","c;
Dim openBraceChar as char = "{"c;
Dim closeBraceChar as char = "}"c;

Dim result() as String = 
  s.Split(separatorChar)(1)
   .trim(openBraceChar)
   .trim(closeBraceChar)
   .split(commaChar); 
```

（假设它有效！在 iPad 上输入，因此无法轻松验证语法，但主体应该是正确的）。

编辑：更新为 VB，因为在 c# 语法中显示有效的 .net 方法而被否决。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T07:58:21.203

如果你想使用正则表达式

```
Dim s() As String=Regex.match(str,"(={)(.*)(})").Groups(1).Tostring.split(','); 
```

# r - 从输出 R 程序访问数据

> ID：15631843
> 
> 赞同：0
> 
> 时间：2013-03-26T07:44:26.100
> 
> 标签：r, cut

我有一个由切割函数生成的输出，它是下面的输出......让我们将此输出称为“数据”。

```
cuts: [20,25)
   Time Kilometres
21   20        7.3
22   21        8.4
23   22        9.5
24   23       10.6
25   24       11.7
------------------------------------------------------------ 
cuts: [25,30)
   Time Kilometres
26   25       12.8
27   26       13.9
28   27       15.0
29   28       16.1
30   29       17.2
------------------------------------------------------------ 
cuts: [30,35)
   Time Kilometres
31   30       18.3
32   31       19.4
33   32       20.5
34   33       21.6
35   34       22.7 
```

我如何访问每个切割中的数据..比如从切割中获取公里数据：[20,25]..etc 我尝试做 data$Kilometres ......但这不起作用......所以我基本上想要一个新的数据框，我可以为每个切割单独使用公里数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:48:36.223

这里的输出`by`是一个列表，因此您可以使用基本的列表索引，按数字或名称。使用[您几个小时前的问题中](https://stackoverflow.com/questions/15628289/cut-function-in-r-program)的数据以及[Matthew Lundberg 的回答](https://stackoverflow.com/a/15628513/1270695)，我们可以索引如下：

```
> x[[1]]
  Time Velocity
1  0.0     0.00
2  1.5     1.21
3  3.0     1.26
4  4.5     1.31
> x[["[6,12)"]]
  Time Velocity
5  6.0     1.36
6  7.5     1.41
7  9.0     1.46
8 10.5     1.51 
```

您可以使用 . 查看 R 中对象的结构`str`。这通常有助于您决定如何提取某些信息。这是`str(x)`：

```
> str(x)
List of 7
 $ [0,6)  :Classes ‘AsIs’ and 'data.frame': 4 obs. of  2 variables:
  ..$ Time    : num [1:4] 0 1.5 3 4.5
  ..$ Velocity: num [1:4] 0 1.21 1.26 1.31
 $ [6,12) :Classes ‘AsIs’ and 'data.frame': 4 obs. of  2 variables:
  ..$ Time    : num [1:4] 6 7.5 9 10.5
  ..$ Velocity: num [1:4] 1.36 1.41 1.46 1.51
 $ [12,18):Classes ‘AsIs’ and 'data.frame': 6 obs. of  2 variables:
  ..$ Time    : num [1:6] 12 13 14 15 16 17
  ..$ Velocity: num [1:6] 1.56 1.61 1.66 1.71 1.76 1.81
 $ [18,24):Classes ‘AsIs’ and 'data.frame': 5 obs. of  2 variables:
  ..$ Time    : num [1:5] 18 19 20 21 22.5
  ..$ Velocity: num [1:5] 1.86 1.91 1.96 2.01 2.06
 $ [24,30):Classes ‘AsIs’ and 'data.frame': 4 obs. of  2 variables:
  ..$ Time    : num [1:4] 24 25.5 27 28.5
  ..$ Velocity: num [1:4] 2.11 2.16 2.21 2.26
 $ [30,36):Classes ‘AsIs’ and 'data.frame': 4 obs. of  2 variables:
  ..$ Time    : num [1:4] 30 31.5 33 34.5
  ..$ Velocity: num [1:4] 2.31 2.36 2.41 2.42
 $ [36,42):Classes ‘AsIs’ and 'data.frame': 1 obs. of  2 variables:
  ..$ Time    : num 36
  ..$ Velocity: num 2.43
 - attr(*, "dim")= int 7
 - attr(*, "dimnames")=List of 1
  ..$ cuts: chr [1:7] "[0,6)" "[6,12)" "[12,18)" "[18,24)" ...
 - attr(*, "call")= language by.data.frame(data = mydf, INDICES = cuts, FUN = I)
 - attr(*, "class")= chr "by" 
```

从这里我们可以看到我们有一个包含七个项目的命名列表，每个列表都包含一个`data.frame`. 因此，如果我们想要一个仅包含第三个间隔的“速度”变量（第二列）的向量，我们将使用如下内容：

```
> x[[3]][[2]]
[1] 1.56 1.61 1.66 1.71 1.76 1.81 
```

# ruby-on-rails - 如何在引导模式中添加分页

> ID：15631851
> 
> 赞同：0
> 
> 时间：2013-03-26T07:45:25.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, pagination, modal-dialog

我有一个`user's list`，当单击“显示活动”时，它会在部分文件的模式中显示用户活动列表`_user_activities.html.haml`。此活动列表是一个分页视图。我只想在我的模态窗口中为这个活动添加分页。这个怎么做？我已经在使用`will_paginate`，这使我的页面重新加载。如何做到这一点？

用户/index.html.haml

```
%table
  %thead
    %th Name
    %th Actions
  %tbody
    - @users.each do |user|
      %tr
        %td= user.name
        %td
          %i.icon-play
          %div.modal.hide
            = render 'user_activities', user: user

= will_paginate users

:javascript
  $('i').click(function() {
    $(this).next(.modal).modal('show');
  }); 
```

用户/_user_activities.html.haml

```
%table
  %thead
    %th Name
    %td Type
  %tbody
    - user.activities.eadch do |activity|
      %tr
        %td= activity.name
        %td= activity.type

= will_paginate user.activities 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:50:10.963

实现 ajax 类型分页的一种方法是使用[Kaminary](https://github.com/amatsuda/kaminari) gem。我们可以使用 Kaminary 轻松设置分页。我不知道如何实现 ajax 类型的分页`will_paginate`，但我`kaminary`在我的一个项目中使用了它，它很容易使用。

**更新**

检查[如何使用 will_paginate gem 实现 ajax 分页以](https://stackoverflow.com/questions/13623953/how-to-implement-ajax-pagination-with-will-paginate-gem)提供带有`will_paginate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:00:11.960

您可以使用非常容易使用的 kamiray 或 will_paginate gem 看看以下使用 will paginate 的示例，

在您的控制器中执行此操作，它将添加分页。

```
@set = SomeObject.paginate(:page       => params[:page],
                           :per_page   => 20,
                           :order      => 'created_at DESC',
                           :conditions => { :foo => 'bar' }) 
```

这是[Kaminary](http://railscasts.com/episodes/254-pagination-with-kaminari)和willpaginate 的[railscast](http://railscasts.com/episodes/51-will-paginate) 希望它能解决您的问题。

# sql - 如果 Phone Number 为 null 或 0，则为 mobile number ，如果 mobile number 也为 0 或 null ，则 SQL 中为 0

> ID：15631853
> 
> 赞同：1
> 
> 时间：2013-03-26T07:45:35.943
> 
> 标签：sql, sql-server, sql-server-2008

请帮帮我

我想知道电话号码是否为空或0，然后选择手机号码，如果手机号码也是0或空，然后选择0

```
DECLARE 
    @phoneNumber varchar(MAX),
    @nReservationID varchar(MAX)

SELECT 
    @phoneNumber = 
       (CASE 
             WHEN ISNULL(RDG.nPhoneNumber  ,'') IN ('0','-',NULL)  
             THEN ISNULL(RDG.nMobileNumber, '0')  
             WHEN ISNULL(RDG.nMobileNumber, '0')  IN ('0','-',NULL)  
             THEN '0' 
             ELSE ISNULL(rdg.nPhoneNumber  ,'0')  END)
FROM tblReservation_Details_Guest RDG 
WHERE RDG.nReservationID = @nReservationID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:10:50.050

听起来你只想[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)和[`NULLIF`](http://msdn.microsoft.com/en-us/library/ms177562.aspx)：

```
COALESCE(NULLIF(RDG.nPhoneNumber,'0'),NULLIF(RDG.nMobileNumber,'0'),'0') 
```

`COALESCE`返回第一个非 NULL 表达式。`NULLIF`如果它的两个参数匹配，则返回`NULL`，否则返回它的第一个参数。

所以`COALESCE`第一个表达式将是`NULL`if `RDG.nPhoneNumber`is either `NULL`or `'0'`。它的第二个表达式将是`NULL`if `RDG.nMobileNumber`is either `NULL`or `'0'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:49:04.403

抱歉，没有任何效果....但这是我找到的答案

```
DECLARE @phoneNumber VARCHAR(MAX)
SELECT 
@phoneNumber =

(CASE WHEN RDG.nPhoneNumber IN ('0','-',NULL)
THEN RDG.nMobileNumber
WHEN RDG.nMobileNumber IN('0','-',NULL)
THEN 
RDG.nPhoneNumber
ELSE '0'
END)
FROM tblReservation_Details_Guest RDG where RDG.nReservationID=783689

SELECT
@phoneNumber as 'Phone number' 
```

感谢您的回复和努力:)

# c# - 日期时间解析异常

> ID：15631854
> 
> 赞同：0
> 
> 时间：2013-03-26T07:45:41.897
> 
> 标签：c#, .net, winforms, datetime

我正在寻找日期时间数据类型中的当前日期（仅日期）。

为此，我进行了一些谷歌搜索并制作了以下代码>>

```
DateTime dtCurrDate;
dtCurrDate=DateTime.ParseExact(DateTime.Now.Date.ToShortDateString(),"MM/dd/yyyy",null); 
```

这段代码给了我例外：

```
String was not recognized as a valid DateTime. 
```

其中有什么错误？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:51:14.887

我相信您知道[DateTime.Now.Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性，它会将当前日期设置为时间`00:00:00`。

现在为什么您在解析时遇到问题：

可能是因为你现在的文化，[`DateTime.ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)会给你（`en-US`文化）：

```
Displaying short date for en-US culture: 
//          6/1/2009 (Short Date String) 
```

后来你正在解析：`"MM/dd/yyyy"`你需要一个数字`M`和`d`

所以代码是：

```
dtCurrDate=DateTime.ParseExact(DateTime.Now.Date.ToShortDateString(),"M/d/yyyy",null); 
```

如果您可以将结果存储`ToShortDateString()`在字符串中，然后检查您获得的格式，然后进行相应的解析，那就更好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:51:31.447

您的格式字符串错误。您应该使用“d”作为标准日期

> "d"
> 短日期模式。
> 
> 2009 年 6 月 15 日下午 1:45:30 -> 2009 年 6 月 15 日（美国）
> 
> 2009 年 6 月 15 日下午 1:45:30 -> 2009 年 6 月 15 日（法国-法国）
> 
> 2009 年 6 月 15 日下午 1:45:30 -> 2009 年 6 月 15 日（日本-日本）

请参阅[此 msdn 页面](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)以获取参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T07:55:34.377

您在评论中说要将数据库中的日期与当前日期进行比较。只有两种可能的方法可以做到这一点：

1.  在 C# 中
2.  在数据库中

**C#**
您必须从数据库中选择值。`DateTime`当您正确执行时，您会得到一个，例如：

```
using (SqlCommand cmd = new SqlCommand("SELECT DateColumn FROM Table", conn))
using (SqlDataReader reader = cmd.ExecuteReader())
{
    while (reader.Read())
    {
        DateTime datecolumn = reader["DateColumn"] as DateTime? ?? DateTime.MinValue;
        if (dateColumn.Date == DateTime.Now.Date)
        {
            ...
        }
    }
} 
```

**SQL**
您需要将日期值传递给 SQL。这必须使用参数化查询来完成：

```
using (SqlCommand cmd = new SqlCommand("....", conn))
{
    cmd.Parameters.AddWithValue("@dateParameter", DateTime.Now.Date);
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T07:51:18.700

您应该知道，`DateTime`它没有类似`MM/dd/yyyy`or的格式`dd/MM/yyyy`。这只是您希望如何显示的偏好问题，您可以通过各种格式控制它`ToString()`

您可以将您的数据库值解析为 a `DateTime`，然后您可以只比较仅`Date`使用的部分`<instance>.Date`（这在午夜 12 有时间分量）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T07:52:07.987

尝试

```
dtCurrDate=DateTime.Now.ToShortDateString(); 
```

# jquery - 使用 Phantomjs 模拟编程按钮单击并使用 Jasmine 进行测试

> ID：15631855
> 
> 赞同：1
> 
> 时间：2013-03-26T07:45:46.777
> 
> 标签：jquery, bdd, jasmine, phantomjs

使用[phantomjs-jasmine](https://github.com/mrosati84/phantomjs-jasmine)做一个简单的测试

```
//example_spec.js
describe("Click button", function() {
  it ("should be become 3", function() {
      var i = 0;
      var button_element = $('#button');
      console.log(button_element.text());
      while(i < 3 ) {
          button_element[0].click();
      console.log($('#counter').text());
        i ++;
      }
      console.log($('#counter').text());
    expect($('#counter').text()).toEqual('3');
  });

});

//example.js
var main = function() {
    var button = document.getElementById('button');

    button.addEventListener('click', function(){
        var count = document.getElementById('counter');
        count.innerText = parseInt(count.innerText) + 1;
    });
}
window.addEventListener('load', main);

window.addEventListener('load', main);

//index.html
....
<p id='counter'>0</p>
<button id='button'></button>
.... 
```

测试结果真的很奇怪

```
hantomjs lib/run_jasmine_test.coffee spec/TestRunner.html
Starting...
0
0
0

Click button : should be become 3
Error: Expected '1' to equal '3'.

Finished
-----------------
1 spec, 1 failure in 0.033s.

ConsoleReporter finished 
```

我的代码中一定有问题，知道吗？

* * *

**//example-updated-jquery-version.js**

```
var main = function() {
    var button = $('#button');

    $('#button').on('click', function(){
        $('#counter').text(parseInt($('#counter').text()) + 1);
    })

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:57:44.273

您确定`innerText()`PhantomJS 支持吗？如果您在 Mozilla 上尝试相同的代码段，它将无法正常工作，因为您应该使用`textContent()`.

尝试改用[jQuery的`text()`方法](http://jqapi.com/#p=text)，它是跨浏览器的。

更新：innerText() 是 IE 特定的方法，因此您必须使用 textContent。如需进一步参考，请参阅[此 MDN 页面](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)。

# c# - SQL Server Express 用户权限能够从 Visual Studio 2010 在 IIS 上测试我的 Web 应用程序

> ID：15631857
> 
> 赞同：0
> 
> 时间：2013-03-26T07:46:15.337
> 
> 标签：c#, asp.net, visual-studio-2010, iis, permissions

我正在尝试使用实际的 IIS 7 在我的开发机器上运行我的 ASP.NET Web 应用程序。Visual Studio 2010 给了我一个警告，我需要以管理员身份运行 VS 才能使用 IIS。所以我做了。但是现在当我从 VS 启动我的 Web 应用程序时，SQL Server Express 连接会在这一行引发异常：

```
using (SqlConnection cn = new SqlConnection(strConnectionString))
{
    //Open connection
    cn.Open();          //Exception
} 
```

这是异常本身：

> 尝试为文件 C:\Users\UserName\Desktop\C#\WebApp004_TestProjDB\WebApp004_TestProjDB\App_Data\Database1.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

请注意，我的本地计算机上存在“C:\Users\UserName\Desktop\C#\WebApp004_TestProjDB\WebApp004_TestProjDB\App_Data\Database1.mdf”文件。我确定问题出在访问权限上。“用户名”是标准用户。（我在启用了 UAC 的 Windows 7 机器上运行它。）

有人可以建议我需要为哪些用户启用哪些权限吗？

# eclipse - 使用 maven+eclipse 构建 hadoop

> ID：15631858
> 
> 赞同：0
> 
> 时间：2013-03-26T07:46:20.840
> 
> 标签：eclipse, maven, hadoop

我正在尝试使用 eclipse mvn 插件（即 m2e）构建 hadoop。但是，由于依赖关系解析问题，构建过程失败，并给出以下错误消息：

```
Failed to execute goal on project hadoop-common: Could not resolve dependencies for project org.apache.hadoop:hadoop-common:jar:3.0.0-SNAPSHOT: The following artifacts could not be resolved: com.sun.jersey:jersey-core:jar:1.8, javax.activation:activation:jar:1.1, tomcat:jasper-compiler:jar:5.5.23, commons-el:commons-el:jar:1.0, commons-beanutils:commons-beanutils-core:jar:1.8.0, org.codehaus.jackson:jackson-mapper-asl:jar:1.8.8, com.thoughtworks.paranamer:paranamer:jar:2.3, org.xerial.snappy:snappy-java:jar:1.0.3.2: Could not transfer artifact com.sun.jersey:jersey-core:jar:1.8 from/to central (http://repo.maven.apache.org/maven2): No response received after 60000 -> [Help 1] 
```

现在，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:53:02.360

# android - WebView 页面不可用 - Android

> ID：15631861
> 
> 赞同：1
> 
> 时间：2013-03-26T07:46:38.190
> 
> 标签：android, android-webview

我有一个`WebView`应该显示 www.google.com 的基本应用程序。虽然可以通过内置浏览器访问该网站，但我无法从`WebView`. 我在各种论坛上处理了大量问题并采纳了所有建议，但似乎没有任何效果。我已确保：
1.`uses-permission`允许互联网访问的标签是标签的子`manifest`标签。
2\. 为 WebView 启用 javascript。
清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sriram.hellowebview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".helloWebview"
            android:label="@string/title_activity_hello_webview" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

布局：

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

   <WebView
       android:id="@+id/helloWebview"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
     />
</LinearLayout> 
```

代码：

```
/* Program to create sample webview.
 * Steps:
 * 1\. Create webview.
 * 2\. Show some website in it.
 * 3\. Show some transitions as well.
 */

package com.sriram.hellowebview;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.webkit.WebView;

public class helloWebview extends Activity {

    WebView myWebview;
    String url = "www.google.com";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hello_webview);

        Log.v(this.toString(), "Starting activity.");

        myWebview = (WebView) findViewById(R.id.helloWebview);

        Log.v(this.toString(), "Getting settings.");
        myWebview.getSettings().setJavaScriptEnabled(true);

        Log.v(this.toString(), "Loading URL now.");
        myWebview.loadUrl(url);
        Log.v(this.toString(), "Loaded URL.");

        //open all links within the same webview.
        //myWebview.setWebViewClient(new WebViewClient());
        //Log.v(this.toString(), "All done here.");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hello_webview, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T07:59:45.270

```
String url = "https://www.google.co.in/"; 
```

要不然

```
super.loadUrl("https://www.google.co.in//"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T07:47:55.627

尝试在链接前添加 http://

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T08:06:34.977

```
WebView wt;

wt.loadUrl("http://www.google.com/"); 
```

有时在 android 4.0 中它会是空白的，`android:hardwareAccelerated="true"`在清单文件中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T12:17:35.850

您需要在 url 字符串中添加 http://...url 必须如下所示

字符串 url = " [http://www.google.com/](http://www.google.com/) ";

现在做

webview.loadurl(url);

# java - 无法通过从 MAC 上的 java 脚本调用“requestFocus()”方法来设置 Java 小程序的焦点

> ID：15631864
> 
> 赞同：1
> 
> 时间：2013-03-26T07:46:59.373
> 
> 标签：java, javascript, applet

我在我们的页面中嵌入了一个 Java 小程序。当我“单击我”链接获得焦点时，它会在 java 脚本中调用方法“focusApplet”。该方法调用applet 的“requestFocus()”方法。功能“focusApplet”正在成功执行。但重点并没有在 MAC 上的所有浏览器（包括 safari 5、Firefox 和 chrome）上转移到小程序内部。但是同一段代码正在 Windows 平台上运行。我也尝试了“requestFocusInWindow()”方法，但它不起作用。请帮我解决这个问题。

```
<HTML>
    <HEAD>
    </HEAD>
    <BODY>
        <script type="text/javascript">
            function sayhello(){
                var name = document.getElementById('hellotext');
                name.focus();
                name.click();
                name.value = "raman";
            }
            function focusMe() {
                alert('Hello world!!');
                document.getElementById('hellotext').focus();
            }
            function show() {
                var name = document.getElementById('name');
                var address = document.getElementById('address');
                alert("Hello " + name.value + " Your Address is : " + address.value);// + address.value
            }
            function focusApplet(){
                document.getElementsByName('mediamaster')[0].requestFocus();
            }
        </script>
        <form>
            Text : <input type="text" id="mytext" >
            Address : <input type="text" id="address" >
            <div >
                <a  id="medialink" href="#" onfocus="focusApplet();">Click Me</a>
            </div>
            <div>
                <APPLET name="mediamaster" CODE="FirstApplet.class" WIDTH="200"
                        HEIGHT="200" name="FirstApplet" id="fA"></APPLET>
            </div>
            Name : <input type="text" id="hellotext"> Address : <input type="text">
            <input type="reset">
            <button value="Show" onclick="show()">show</button>
        </form>
    </BODY>
</HTML> 
```

小程序代码：

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.Choice;
import java.awt.Color;
import java.awt.Label;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import netscape.javascript.JSObject;
import org.w3c.dom.html.HTMLDocument;
import com.sun.java.browser.dom.DOMAccessor;
import com.sun.java.browser.dom.DOMAction;
import com.sun.java.browser.dom.DOMService;
import com.sun.java.browser.dom.DOMUnsupportedException;

public class FirstApplet extends Applet {
    private Button clear_button;
    private Choice color_choices;
    private Button button;
    public void init() {

        this.setFocusable(true);
        this.setBackground(Color.green);
        try {
            service = DOMService.getService(this);
        } catch (DOMUnsupportedException e3) {
            e3.printStackTrace();
        }
        final JSObject win = JSObject.getWindow(this);
        // Create a button and add it to the applet.
        // Also, set the button's colors
        clear_button = new Button("Clear");
        clear_button.setForeground(Color.black);
        clear_button.setBackground(Color.lightGray);
        button = new Button("Push Me");
        this.add(clear_button);
        this.add(button);
        // Create a menu of colors and add it to the applet.
        // Also set the menus's colors and add a label.
        color_choices = new Choice();
        color_choices.addItem("black");
        color_choices.addItem("red");
        color_choices.addItem("yellow");
        color_choices.addItem("green");
        color_choices.setForeground(Color.black);
        color_choices.setBackground(Color.lightGray);
        this.add(new Label("Color: "));
        this.add(color_choices);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                System.out.println("Hello World!!! Thread2");
                win.eval("sayhello()");
            }
        });

    }
} 
```

# php - 致命错误：在非对象上调用成员函数 prepare()

> ID：15631872
> 
> 赞同：0
> 
> 时间：2013-03-26T07:47:39.390
> 
> 标签：php, pdo

好吧，我从我的用户名存在函数中得到了错误。这是注册功能。

```
public function register($username, $upassword){
    if(!$this -> exists($username)) {
        $salt = $this->salt();
        $date = date('Y-m-d');
        $password = $this->md5($upassword, $salt);

        $SQL = $this -> db -> prepare("INSERT INTO `user` (username, password, salt, created_at) VALUES(:username, :password, :salt, :date)");
        $SQL -> execute(array(':username' => $username, ':password' => $password, ':salt' => $salt,':date' => $date));
    return TRUE;
  } else {
      return FALSE;
  }
} 
```

错误似乎来自这一行中的准备语句。

```
public function exists($username){
       $SQL = $this -> db -> prepare("SELECT COUNT(*) FROM `user` WHERE `username` = :username");
       $SQL -> execute(array(':username' => $username ));
       $count = $SQL -> fetchcolumn(0);
       if($count > 0) {
           return TRUE;
       } else {
           return FALSE;
       }
   } 
```

收到错误：致命错误：在第 41 行的 functions.php 中的非对象上调用成员函数 prepare()

存在函数中的第一行是哪一行？

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:40:00.560

如果您尝试像这样实例化您的类：`new ClassName($db)`那么`$this->db`很可能没有定义，因为您实际上还没有为您的类定义一个对`$this->db`.

`_construct($db)`应该`__construct($db)`

假设您想要构造函数魔术方法。所有魔术方法都以两个下划线开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:15:18.773

exists() 类没有“看到”你的 $this->db，尝试调试它，如果它确实在引用或者可以在 exists() 类中使用

# javascript - Distribution.xml 中的 Javascript

> ID：15631873
> 
> 赞同：1
> 
> 时间：2013-03-26T07:47:41.313
> 
> 标签：javascript, macos, package, packagemaker

我很好奇在哪里可以找到对象列表及其方法，这些对象可以在 javascript 函数中用于 mac os 包的 Distribution.xml 部分。例如，我研究过 iTunes Distribution.xml 并发现`system.files.plistAtPath("...")`和其他系统调用。我想知道我还能做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:53:08.613

您可以在苹果文档中找到一些信息：[安装程序 JavaScript 参考](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/InstallerJavaScriptRef/)。但看起来有点过时了

# c++ - C++ 的 GeoIP 有这个库吗？

> ID：15631874
> 
> 赞同：4
> 
> 时间：2013-03-26T07:47:47.323
> 
> 标签：c++, ip, country, geoip, maxmind

我看了又看，找不到C++版本的GeoIP。我知道它在 C 中有一个版本，但我似乎无法让它与 Micosoft Visual Studio 2012 C++ 一起使用

我努力了：

*   [使用 Visual Studio 2010 编译 Maxmind C 库](https://stackoverflow.com/questions/12187040/compile-maxmind-c-library-with-visual-studio-2010)
*   [http://dev.maxmind.com/geoip/](http://dev.maxmind.com/geoip/)

所以，

1.  GeoIPC++ 版本是否存在？
2.  是否有另一个库可以像 C++ 中的 GeoIP 一样对国家/地区进行 IP 处理？
3.  是否有关于如何让 GeoIP 与 C++ 一起使用的教程？

抱歉所有问题，但我看了又看，似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-10T02:51:25.907

迟到了，但我最近为 MaxMind GeoIP db 编写了一个 C++ API。我没有在 Windows 下测试它，我只在 Linux 下运行它，但它绝对不是 Linux 特定的。

我称它为 GeoLite2++。你可以在这里找到它： [https ://www.ccoderun.ca/GeoLite2++/api/](https://www.ccoderun.ca/GeoLite2++/api/)

Ubuntu 的源 tarball 和 .deb 文件在这里： [https ://www.ccoderun.ca/GeoLite2PP/download/?C=M;O=D](https://www.ccoderun.ca/GeoLite2PP/download/?C=M;O=D)

示例源代码：

```
#include <GeoLite2PP.hpp>
...
GeoLite2PP::DB db( "/opt/stuff/GeoLite2-City.mmdb" );
std::string json = db.lookup( "216.58.216.163" );
std::cout << json << std::endl; 
```

示例输出：

```
{
    "city" : 
    {
        "names" : 
        {
            "de" : "Mountain View",
            "en" : "Mountain View",
            ... 
```

它包括更多内容，例如获取单个字段与获取整个记录作为 JSON 字符串。

展示如何抓取单个字段的示例：

```
GeoLite2PP::DB db("GeoLite2-City.mmdb");
std::string city = db.get_field( "65.44.217.6", "en",
    GeoLite2PP::VCStr { "city", "names" } ); 
```

此处描述了中心类： [https ://www.ccoderun.ca/GeoLite2++/api/classGeoLite2PP_1_1DB.html](https://www.ccoderun.ca/GeoLite2++/api/classGeoLite2PP_1_1DB.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:56:52.247

GeoIP 是一个在线数据库，每天（或每月！）更新其数据。

*此外，您可以拥有一个大型离线数据库来将 IP 映射到您的应用程序旁边的位置（并且您需要定期更新它）。*

GeoIP 不绑定到特定的编程语言，您可以使用[Web 服务](http://dev.maxmind.com/geoip/web-services)机制连接到该数据库。只需通过 TCP/HTTP 请求连接到在线服务并检索数据。

> HTTP API 要求您将一组参数作为 HTTP GET 或 POST 传递。结果以下面记录的简单文本格式返回。
> 
> 我们提供多种不同的服务，每种服务都提供不同数量的 IP 地址信息。

# xaml - 通过 XamlReader 加载 Xaml 仅用于预览

> ID：15631880
> 
> 赞同：1
> 
> 时间：2013-03-26T07:48:02.330
> 
> 标签：xaml, root, xmlreader, xamlparseexception, xamlreader

刚刚在运行时加载 Xaml 文件时遇到了一些问题。为了您的信息，我的代码片段将文件加载为用户控件的内容：

```
 public UserControl LoadXaml(FileInfo paramFile)
    {
        FileInfo _XamlFile = paramFile;
        UIElement rootElement;
        FileStream s = new FileStream(_XamlFile.FullName, FileMode.Open);
        rootElement = (UIElement)XamlReader.Load(s);
        s.Close();
        UserControl uc = new UserControl();

        if (rootElement.GetType() == typeof(Window))
        {
            uc.Content = (rootElement as Window).Content;
        }
        else
        {
            uc = rootElement as UserControl;
        }

        return uc;
    }

    private void lstPDFDokumente_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var _XamlFile = ((System.Windows.Controls.ListBox)sender).SelectedItem as FileInfo;

        if (_XamlFile != null)            
        {
            layoutGrid.Children.Clear();
            System.Windows.Controls.UserControl rootElement;
            rootElement = XamlController.LoadXaml(_XamlFile);
            layoutGrid.Children.Add(rootElement);
        }
    } 
```

这在事件时工作正常并且`x:Class="..."`被手动删除。

我试图解决的问题是：

1.  如果`x:Class="..."`在根元素处存在 a，XamlReader 将引发第一个异常。
2.  当 XamlReader 到达一个包含事件的控件时，例如`Click`或`TextChanged`，它会引发另一个异常。

我试图弄清楚的是如何加载 XamlFile，在主窗口的控件内显示它，并显示一些属性，如、`Name`等。只是阅读了几十个网站，但从未找到要进行预览或类似的主题。`Height``Width`

我尝试的解决方案之一是将 Xaml 文件读取为 XML 并删除该代码。问题是在 C# 中获取所有可能事件的列表。

如果对该准则有任何疑问，请随时提问：）

问候丹尼尔

# python - Python 扩展：未找到架构 x86_64 错误的符号

> ID：15631882
> 
> 赞同：1
> 
> 时间：2013-03-26T07:48:09.473
> 
> 标签：python, c, python-2.7

我想用c写一个python扩展。我在 Mac 上工作，我从[这里](http://en.wikibooks.org/wiki/Python_Programming/Extending_with_C)获取了一个代码：

```
#include <Python.h>

static PyObject* say_hello(PyObject* self, PyObject* args)
{
    const char* name;

    if (!PyArg_ParseTuple(args, "s", &name))
        return NULL;

    printf("Hello %s!\n", name);

    Py_RETURN_NONE;
}

static PyMethodDef HelloMethods[] =
{
     {"say_hello", say_hello, METH_VARARGS, "Greet somebody."},
     {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC

inithello(void)
{
     (void) Py_InitModule("hello", HelloMethods);
} 
```

我编译它：

```
gcc -c -o py_module.o py_module.c -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/
gcc -o py_module py_module.o -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/ -lm 
```

但我得到这个错误：

```
Undefined symbols for architecture x86_64:
  "_PyArg_ParseTuple", referenced from:
      _say_hello in py_module.o
  "_Py_InitModule4_64", referenced from:
      _inithello in py_module.o
  "__Py_NoneStruct", referenced from:
      _say_hello in py_module.o
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [py_module] Error 1 
```

python为什么不支持`X86_64`架构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T07:49:48.057

两件事情：

*   您需要将扩展​​链接为共享对象（您正在尝试链接可执行文件，这就是链接器正在寻找的原因`main()`）；
*   您需要链接 Python 静态库 ( `-lpython`)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-26T07:05:05.070

1.  使用以下命令查询 python env 路径：

> ```
> $python-config --includes
> -I/usr/include/python2.6 -I/usr/include/python2.6
> $python-config --ldflags
> -lpthread -ldl -lutil -lm -lpython2.6 
> ```

2.  生成 .o 文件：

> $ g++ -fPIC -c -I/usr/include/python2.6 -I/usr/include/python2.6 xx.cpp

3.  生成 .so 文件：

> g++ -shared xx.o -o xx.so

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:00:09.870

感谢@NPE @glglgl 和[anatoly](http://techtonik.rainforce.org/2008/01/compiling-python-extension-with-gcc.html)这是我的 Makefile：

```
DIR=/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/
CC=gcc
CFLAGS=-I$(DIR)
ODIR=.

LIBS_DIR=/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/config/
LIBS=-lpython2.7

_DEPS =
DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

_OBJ = py_module.o
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

$(ODIR)/%.o: %.c $(DEPS)
        $(CC) -c -o $@ $< $(CFLAGS)

py_module: $(OBJ)
        gcc -shared $^ $(CFLAGS) -I$(LIBS_DIR) $(LIBS) -o $@

.PHONY: clean

clean:
        rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~ 
```

makefile 模板取自[这里](http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/)。

为了找到路径，可以使用`python-config --ldflags`

和`python-config --includes`

# jquery - Jquery - 悬停时选择乘法div

> ID：15631883
> 
> 赞同：1
> 
> 时间：2013-03-26T07:48:10.290
> 
> 标签：jquery, html, css, hover

所以我需要，当我 mouseover 时`#3`。两者`#1`都`#2`获得了特定的 css 类。如果我悬停也是如此`#5`，那么所有 div 都会获得 css 类。

当它们不再悬停时，该类将从 div 中删除。

```
<div class="rateStar"><a href="#1"><img src="/images/images/stars.png"/></a></div>
<div class="rateStar"><a href="#2"><img src="/images/images/stars.png"/></a></div>
<div class="rateStar"><a href="#3"><img src="/images/images/stars.png"/></a></div>
<div class="rateStar"><a href="#4"><img src="/images/images/stars.png"/></a></div>
<div class="rateStar"><a href="#5"><img src="/images/images/stars.png"/></a></div> 
```

但是我对如何做到这一点有点迷茫，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T07:52:42.207

检查[prevAll](http://api.jquery.com/prevAll/)。它可以这样使用：

```
$('.rateStar').on('mouseover', function () {
    $(this).prevAll('.rateStar').addClass('glow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:56:18.580

看起来像这样

js

```
$('div').hover(function() {
    $('div').not($(this)).stop().animate({
        opacity: .3
    }, 500);
}, function() {
    $('div').stop().animate({
        opacity: 1
    });
}, 250); 
```

工作[演示](http://jsfiddle.net/LCMSz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:54:37.150

尝试这个：

```
$('.rateStar').on('mouseover', function () {
    $('.rateStar').removeClass('newclass');
    $(this).prevAll('.rateStar').addClass('newclass');
}); 
```

# javascript - history.go() 如何从 window.history 获取特定访问页面 url 的索引？

> ID：15631888
> 
> 赞同：2
> 
> 时间：2013-03-26T07:48:44.747
> 
> 标签：javascript, jquery, asp.net-mvc-3

如果单击将转到特定历史记录，我有一个具有按钮的 Web 应用程序。听说只有 IE 支持 history.go(url) 而其他浏览器只接受数值。在我的情况下，history.go() 只会转到特定页面，例如`http://localhost:54187/Products/Create`。即使用户在单击按钮时导航到不同的页面，它仍然会转到历史记录的“创建”页面。我需要history.go，因为它相当于浏览器来回。我不能使用 window.location 或 location.href，因为我的应用程序要求填写的数据仍然存在，这正是 history.go 所做的。如果用户总共加载了 26 个页面，我如何知道这 26 个页面中的哪一个是创建页面，以便我可以使用 history.go(createIndex)？window.history.length 给出 26 但它不公开网址。

请帮助我如何解决我的问题。

JavaScript 和 HTML

```
<script type="text/javascript">
    $(document).ready(function () {
    $('#btnGoToCreate').click(function () {
        var createIndex = //how to know what's the index of 
        //http://localhost:54187/Products/Create from window.history?
        history.go(createIndex);
        });
    });
   </script>

<input type="button" value="Go to Last Entry" id="btnGoToCreate" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T09:03:38.990

添加一个计数器变量来保存索引。这个计数器可以存储在 `cookie/sessionStorage/localStorage`.
当用户导航到另一个页面时，counter self 加 1，最后你可以在用户单击按钮时使用 window.history.go(counter)。

顺便说一句，当用户刷新页面时，计数器可以自加 1，为避免发生此问题，如果 url 中的时间戳与保存在的时间戳不同，您需要将时间戳传递给下一页，使用`?timestamp=1231232123`并保存在，那么计数器可以加 1。`cookie/sessionStorage/localStorage``cookie/sessionStorage/localStorage`

这是我在项目中的解决方案，希望能帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:24:08.523

由于安全/隐私原因，您无法*阅读历史记录项目。*您只能访问以前的 URL，可以使用以下方式读取：

```
document.referrer 
```

虽然您可以[**操纵**浏览器历史记录](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)，但这也不允许您转到用户历史记录中的特定页面。

# git - 如何实现不允许的`git --no-ff --ff-only`

> ID：15631890
> 
> 赞同：23
> 
> 时间：2013-03-26T07:49:05.230
> 
> 标签：git, merge, rebase

作为我们重基化工作流程的一部分，我希望在主分支上使用合并。特别是，我只想在主题分支重新基于最近的主提交时才合并，从而使任何合并成为快进合并。我可以通过使用来实现：

`git merge --ff-only`

此外，我想记录主题分支与空提交的集成，这就是为什么我想使用 --no-ff 来强制这种行为：

`git merge --no-ff`

不过，我真正想要的是两者的结合：仅在微不足道时才合并，但无论如何让我记录一下。吉特认为

`fatal: You cannot combine --no-ff with --ff-only.`

这在某些人看来是不言而喻的。

`git merge --edit --no-ff topicbranch`

也没有达到我想要的行为。那么，如果有问题的主题分支重新基于最新的主提交，我如何与 --no-ff 选项合并？

* * *

更新：似乎查尔斯·贝利的回答可以解决问题。如果你想把它变成一个 git 别名，你可以在这里发出这个：

```
git config --global alias.integrate '!test "$(git merge-base HEAD "$1")" = "$(git rev-parse HEAD)" && git merge --no-ff --edit $1 || echo >&2 "Not up-to-date; refusing to merge, rebase first!"' 
```

有点拗口但有效。请注意使用选项编辑提交消息的力量`--edit`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T07:02:52.367

您不想要`--ff-only`，因为您确实想要进行`--ff-only`会抑制的合并提交。

您可以在运行合并命令之前将所需的检查作为单独的检查进行。您可以将其打包成一个简单的 shell 函数。

例如

```
merge_if_ahead () {
  if test "$(git merge-base HEAD "$1")" = "$(git rev-parse HEAD)"; then
      git merge --no-ff "$1"
  else
      echo >&2 "Not up to date; refusing to merge"
      return 1
  fi
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:37:14.753

我创建了一个适用于我的简单测试的别名

```
git config --global alias.ffmerge '!sh -c "git merge --ff-only $1 && git reset --hard HEAD@{1} && git merge --no-ff $1" -' 
```

它由 3 个命令组成，一个接一个，一旦第一个失败，它们就会失败。逐一解释：

```
git merge --ff-only $1 
```

如果合并不能作为快进合并继续，将失败。（$1 是作为参数传入的分支名称）

```
git reset --hard HEAD@{1} 
```

如果第一个命令成功，则意味着我们可以进行快进合并，但是当我们想要进行合并提交时，我们将回到我们（成功）合并之前的 HEAD 状态。HEAD@{1} 是一个引用日志指针。

```
git merge --no-ff $1 
```

现在我们将通过合并提交进行真正的合并，即使合并可以作为快进进行。

一个简单的调用`git ffmerge`将为我们完成整个事情，唯一可能失败的步骤是第一步，这将使我们像以前一样处于未更改的工作副本中。

与往常一样，`git reset --hard`工作副本应该是干净的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-10T12:04:36.533

```
git config alias.mff '!mff() { git merge --ff-only "$1" && git reset --hard HEAD@{1} && git merge --no-ff "$1"; }; mff' 
```

从那时起

```
git mff other-branch 
```

# android - Android：通过基适配器类绑定动态文本视图时，我无法在对话框中获得价值

> ID：15631897
> 
> 赞同：1
> 
> 时间：2013-03-26T07:49:31.170
> 
> 标签：android

通过基本适配器类绑定动态文本视图时，我在对话框中遇到异常

我可以得到对话框，但它没有绑定textview值地狱..请帮助我..我做错了:)

## Train_Origin_Destination.java

公共无效loadAutocomplete1（字符串strCmdTrain）{

c.moveToFirst(); if (c.isAfterLast() == false) {

```
 do {            

            listFrom1 = new ArrayList<String>(Arrays.asList(strComments));
            listTo1 = new ArrayList<String>(Arrays.asList(strComments));

            listFrom1.removeAll(Collections.singleton(null));

            HashMap<String, String> map = new HashMap<String, String>();
            map.put(KEY_Start, "Hello");

            listData.add(map);
            Log.e("map", map.toString());
            Log.e("list4", listData.toString());

            customAdapter = new MyCustomAdapter2(
                    Train_Origin_Destination.this, listData);
            lvTrainTime1.setAdapter(customAdapter);

        } while (c.moveToNext());

    } 
```

## onButtonClick 事件

公共无效 onClick（查看 arg0）{

```
 Log.d("Dialog", "Dialog");
    dialog = new Dialog(context1);
    //dialog.setContentView(R.layout.traintimings_dialog);
    //dialog.getWindow().getAttributes().windowAnimations = R.style.Animations_SmileWindow;
    dialog.setTitle("Train Timings");
    //dialog.setContentView(R.id.lvTrainTimings1);

if (chkSunday.isChecked()) {
        if (Area_Index < Area_Index1) {
            Log.d("Sunday", "Sunday");
        } else if (Area_Index > Area_Index1) {
            Log.d("SundayReverse", "SundayReverse");
        }
    } else {
        if (Area_Index < Area_Index1) {
            Log.d("Normal", "Normal");

            if (strSpSelectedItem.contentEquals("Beach - Tambaram")) {
                int id = Area_Index + 1;
                int id1 = Area_Index1 + 1;
                /*
                 * strCmdTrainFrom =
                 * "Beach_Thirumalpur_WeekD ays where _id='" + id +
                 * "' or _id='" + id1 + "'";
                 */
                strCmdTrainFrom = "Beach_Thirumalpur_WeekDays where _id='"
                        + id + "'";
                loadAutocomplete1(strCmdTrainFrom);

            }
        } else if (Area_Index > Area_Index1) {
            Log.d("NormalReverse", "NormalReverse");
        }
    }

    Log.d("DialogEndB4", listData.toString());
    dialog.show(); 
    Log.d("DialogEnd", "DialogEnd");

} 
```

## MyCustomAdapter2.java

```
public class MyCustomAdapter2 extends BaseAdapter {

private String[] strKeys;
private ArrayList<HashMap<String, String>> alData;
private Context context;
TextView txtBusNo, txtBusVia, txtBusServiceType, txtBusJourneyTime;
TextView[] tvStart;
ListView lvTrainTime1;
View rowView2;

public MyCustomAdapter2(Context context,
        ArrayList<HashMap<String, String>> listData) {

    super();
    Log.d("Custom", "Custom");
    this.alData = listData;
    this.context = context;
    Log.d("alData", alData.toString());
    Log.d("Custom1", "Custom1");

}

public int getCount() {
    // TODO Auto-generated method stub
    Log.d("alData.size()", String.valueOf(alData.size()));
    return alData.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    Log.d("View", "View");
    rowView2 = convertView;
    if (rowView2 == null) {

        Log.d("View1", "View1");
        Train_Origin_Destination trDetails = new Train_Origin_Destination();
        // Inflate the layout, list_view.xml, in each row.
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(context.LAYOUT_INFLATER_SERVICE);
        Log.d("View2", "View2");
        rowView2 = inflater
                .inflate(R.layout.textview_autofrom, null, false); 
```

}

```
 txtBusNo = (TextView) rowView2.findViewById(R.id.idTvAutoFrom1);

        Log.d("View3", "View3");
        HashMap<String, String> hashmap = new HashMap<String, String>();

        txtBusNo.setText("Bus No : Hello");

        Log.d("View30", "View30");

        Log.d("View5", String.valueOf(rowView2));
    } else {

    }
    return rowView2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:07:42.893

好吧，您所做的是将其添加`lvTrainTime`到`scr`ScrollView 中，而不是将其用作对话框的内容视图。也许你想做的是`setContentView(scr);`？如果这样做，`scr`将扮演视图容器的角色。所以基本上你需要将容器设置为内容视图。

编辑 - 澄清：

我的意思是在你的`loadAutocomplete1`方法中你创建一个`ScrollView scr = new ScrollView(this);`. 稍后在相同的方法中，在循环之后，向该滚动视图添加一个视图 -`scr.addView(lvTrainTime);`然后将对话框的内容视图设置为提到的视图 - `dialog.setContentView(lvTrainTime);`。您不能这样做，因为`scr`和`dialog`是不同的控件，并且一个视图 ( `lvTrainTime`) 不能有两个父级。因此，与其将内容视图设置为该视图`lvTrainTime`- 我的意思是您应该将其父（容器）设置为内容视图。当我回答时，我认为`scr`应该将其设置为内容视图，但我刚刚看到您实际上将 - 放在`scr`了`tableLayout`-中`tablelayout.addView(scr, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, 50));`。所以你现在的情况就是`lvTrainTime`在里面`scr`，`scr`在里面`tableLayout`。所以试试 `dialog.setContentView(tableLayout);`反而。此外，我不确定当您设置对话框的内容视图两次时会发生什么，所以也许您也应该尝试不`dialog.setContentView(R.layout.traintimings_dialog);`这样做。

# c# - 正则表达式无法正常工作

> ID：15631901
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:49:39.333
> 
> 标签：c#, .net, regex

我需要一个用于 c# 格式的正则表达式

```
 <abc>-<1wee>-<qwje>-<#>-<weruyu>-<...>-<suidyw>-<xdsljd23>- 
```

我写了一个格式的正则表达式

```
 Regex r1 = new Regex("(^(<{1}([a-zA-Z0-9]*|[#]|[.]{3})>-{1})*$)", RegexOptions.IgnoreCase | RegexOptions.Singleline); 
```

这在所有情况下都可以正常工作，除了 1\. 当 < 和 > 之间没有字符时，例如

```
 <>-<agdf>- 
```

2.当任何一对字母数字字符出现在<#> 和<...> 之后，例如

```
 <abc>-efgh>-<123>-<#>-<...>- 
```

这工作正常，但

```
 <abc>-<#>-<123>-<...>- 
```

不管用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:54:03.897

1.  这部分：

    [a-zA-Z0-9]*

    也匹配 0 个字符。您可能打算使用`+`

2.  您的表达式说字符串*必须*以 a 结尾`-`，这就是后面的示例不起作用的原因。尝试`(-|$)`使最后一个破折号可选。

# java - 在Android中循环随机图像

> ID：15631904
> 
> 赞同：1
> 
> 时间：2013-03-26T07:49:46.807
> 
> 标签：java, android, xml, image, random

我是 Android / Java 开发的初学者。我刚开始学习编程，对我来说最简单的方法是修改开源项目以了解所涉及的原则。

无论如何，我想对泡泡射击游戏做一个非常简单的修改，5-10个不同的背景图像将随机循环：

*   当每个新关卡开始时（但在关卡刚重新启动时保持不变）
*   或更简单：当关卡重新启动或开始时，背景每次都会改变

我定义了一个背景可绘制对象的字符串数组：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="random_background"></string-array>
        <item name="background_01">@drawable/background01</item>
        <item name="background_02">@drawable/background02</item>
        <item name="background_03">@drawable/background03</item>
        <item name="background_04">@drawable/background04</item>
        <item name="background_05">@drawable/background05</item>
        <item name="background_06">@drawable/background06</item>
        <item name="background_07">@drawable/background07</item>
        <item name="background_08">@drawable/background08</item>
        <item name="background_09">@drawable/background09</item>
        <item name="background_10">@drawable/background10</item>

</resources> 
```

原始代码在**SRC文件夹中定义***GameView.java*的背景：

 **```
 mBackgroundOrig =
    BitmapFactory.decodeResource(res, R.drawable.background, options); 
```

请帮助我为这个想法创造一个简单的方法。

我也有几个问题：

*   xml 文件必须在 res/values 中正确吗？我可以使用任何文件名吗？例如：*random.xml*
*   我的 xml 文件出现此错误：**错误：项目需要“类型”属性**我需要为每个项目设置类型和格式吗？如果是，请问是什么类型和格式？
*   我们可以避免超过显存限制吗？我的意思是只加载当前的背景，每次使用后都要刷新，然后才会显示一个新的随机图像。

***注：***泡泡射击源码： [https ://code.google.com/p/bubble-shoot/](https://code.google.com/p/bubble-shoot/)

背景图片文件名：background01.jpg、background02.jpg等。

非常感谢，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:00:48.967

由于字符串数组是由数字索引的，所以很容易做你所描述的事情并使用你喜欢的任何图像。

假设您小心地输入它们的名称，就像它们在 drawables 文件夹中一样。

所以你的数组（不需要命名项目）看起来像

```
<string-array name="myImages">
    <item>foo</item>
    <item>bar</item>
    <item>image7</item>
    <item>king_kong</item>
</string-array> 
```

等等。Drawable 需要包含图像 foo.jpg、bar.jpg 等。

现在在您的代码中，您拉取一个介于 0 和该数组长度之间的随机数，然后您将获得这样的可绘制对象：

```
int randomNum = Math.floor(Math.random() * getResources().getStringArray(R.array.myImages).length);
Field field = R.drawable.class.getField(getResources().getStringArray(R.array.myImages)[randomNum]);
int imgId = field.getInt(null);

myImg.setImgResource(imgId); 
```

我是凭记忆写的，所以可能有错别字，但你明白了。**

# php - 使用 PHP 查找和更新多维数组的值

> ID：15631908
> 
> 赞同：2
> 
> 时间：2013-03-26T07:49:59.870
> 
> 标签：php, multidimensional-array

我无法为该线程获得合适的标题（帮助我）。我无法描述这个问题，所以这里是我的问题的例子。

我的数组：

```
Array ( [0] => Array ( [answer] => a [score] => 3 )
[1] => Array ([answer] => b [score] => 4 ) 
[2] => Array ( [answer] => h [score] => 3) 
[3] => Array ( [answer] => a [score] => 4 ))
... 
```

我想得到这样的输出：

```
Array ( [0] => Array ( [answer] => a [score] => 7 )
[1] => Array ([answer] => b [score] => 4 ) 
[2] => Array ( [answer] => h [score] => 3))
... 
```

您可以在索引键 0 中看到 score 子键的变化。这是因为索引键 0 和 3 的答案子键中有两个值“a”。由于两者的总和 (3+4)，分数变为 7 . 真的我对此一无所知，对不起我的英语并感谢您的帮助。随意发表评论。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:57:11.057

```
$merged = array();

foreach ($array as $answer) {
    if (isset($merged[$answer['answer']])) {
        $merged[$answer['answer']]['score'] += $answer['score'];
    } else {
        $merged[$answer['answer']] = $answer;
    }
}

var_dump($merged); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:57:30.967

检查这个答案，不使用循环：

```
$arr  = array ( array ( 'answer' => 'a', 'score' => 3 ),
                array ( 'answer' => 'b', 'score' => 4 ), 
                array ( 'answer' => 'h', 'score' => 3), 
                array ( 'answer' => 'a', 'score' => 4 ));

$t = array_reduce($arr, function($result, $item) {
        if(array_key_exists($item['answer'],$result)){
           $result[$item['answer']]    = array('answer' => $item['answer'], 'score' => $item['score']+$result[$item['answer']]['score']);
        }
        else{
           $result[$item['answer']]    = array('answer' => $item['answer'], 'score' => $item['score']);
        }
    return $result;
},array()); 

echo "<pre>";
print_r($t); 
```

输出 ：

```
Array
(
    [a] => Array
        (
            [answer] => a
            [score] => 7
        )

    [b] => Array
        (
            [answer] => b
            [score] => 4
        )

    [h] => Array
        (
            [answer] => h
            [score] => 3
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:03:11.180

我虽然使用了一个临时数组：

```
/* Current array */
$array = array(
    array("answer" => "a", "score" => 3),
    array("answer" => "b", "score" => 4),
    array("answer" => "h", "score" => 3),
    array("answer" => "a", "score" => 4)
);

/* Using a temporary array */
$tmp_array = array();
foreach($array as $subarray){
    if(array_key_exists($subarray["answer"], $tmp_array)){
        $tmp_array[$subarray["answer"]] += $subarray["score"];
    }else{
        $tmp_array[$subarray["answer"]] = $subarray["score"];
    }
}

/* Creating a new formatted array */
$new_array = array();
foreach($tmp_array as $key => $value){
    $new_array[] = array("answer" => $key, "score" => $value);
}

print_r($new_array); 
```

# dynamics-crm-2011 - ETL 软件，无法检索联系人的所有者

> ID：15631909
> 
> 赞同：3
> 
> 时间：2013-03-26T07:49:59.713
> 
> 标签：dynamics-crm-2011, data-migration

第一个问题，使用我的 ETL 软件，我可以映射所有 GM 联系人字段并将它们迁移到 MCRM 联系人实体。我不能的唯一字段是所有者（所有者始终是联系人的创建者）。

我发现他们是这个实体字段[prvAssignContact](http://technet.microsoft.com/en-us/library/gg328465.aspx)的特权。

他们是消除这种安全性的技巧，还是我可以通过我昨天刚开始使用的 SDK 工具包做的事情？

在 SO 上，我找到了这个主题，[我可以使用 LINQ 更新联系人的所有者 ID 吗？](https://stackoverflow.com/questions/7746046/can-i-update-the-owner-id-of-a-contact-using-linq)但根本不知道它是否对我有用，如果是的话，该代码放在哪里。

P:S: 我一定要一个人做……所以我会喜欢用户友好的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:21:02.687

了解您使用的 ETL 将很有用，但是在进行数据迁移时需要考虑一件重要的事情。如果您正在创建新记录，指定所有者就足以使用 EntityReference 设置字段

```
 Entity contact = new Entity("contact");
        contact["firstname"] = "John";
        Guid ownerId = new Guid("BFC777ED-5E79-E111-8489-00166D63156F");
        contact["ownerid"] = new EntityReference("systemuser", ownerId);
        service.Create(contact); 
```

如果您要更新联系人，则需要按照其他主题中的说明使用 AssignRequest

```
 Guid contactId = new Guid("90F8889F-EB95-E781-8417-000C44420CBC");
        Guid newOwnerId = new Guid("BFCAA4ED-5E79-E781-8349-00155BB3156F");
        AssignRequest assignRequest = new AssignRequest
        {
            Assignee = new EntityReference("systemuser", newOwnerId),
            Target = new EntityReference("contact", contactId)
        };
        service.Execute(assignRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:22:50.083

除了 Guido 的回答之外，如果您在 IOrganizationService 上使用[模拟，它会自动将所有者设置为模拟用户。](http://technet.microsoft.com/en-us/library/gg334744.aspx)

# wordpress - 如何将表格添加到自定义帖子类型作为wordpress中的自定义字段

> ID：15631912
> 
> 赞同：-2
> 
> 时间：2013-03-26T07:50:05.080
> 
> 标签：wordpress, wordpress-theming

您好我已经尝试过 Tablepress，wp_table_reloaded 插件。我觉得天真的用户通过向每个自定义帖子的内容添加短代码来添加表格真的很复杂，而且网站上有很多自定义帖子。实际上，我希望该表应该添加到每个自定义帖子类型，因为我们将自定义字段添加到每个自定义帖子类型，然后简单地为每个字段添加值。请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:16:38.370

看看`add_meta_box`函数： [http ://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

**这是我在最近的一个项目中使用的代码，相信你应该可以调整元框来添加表格。**

```
add_action( 'admin_menu', 'create_meta_boxes' );

function create_meta_boxes() {
  add_meta_box( 'author_info', 'Auteur info', 'author_info_meta_box', 'portfolio', 'normal');
}

function author_info_meta_box( $object, $box ) { ?>
  <p>
    <label for="auteur-meta">Auteur</label><br />
    <input type="text" name="auteur-meta" id="auteur-meta" style="width:100%;" value="<?php echo wp_specialchars( get_post_meta( $object->ID, 'Auteur', true ), 1 ); ?>" />
  </p>
  <p>
    <label for="auteur-quote-meta">Quote auteur</label><br />
    <input type="text" name="auteur-quote-meta" id="auteur-quote-meta" style="width:100%;" value="<?php echo wp_specialchars( get_post_meta( $object->ID, 'Auteur Quote', true ), 1 ); ?>" />
  </p>
  <p>
    <label for="auteurBioMeta">Biografie auteur</label><br />
    <?php $settings = array(
      'media_buttons' => false,
      'textarea_rows' => 6
    ); ?>
    <?php wp_editor( wp_specialchars( get_post_meta( $object->ID, 'Auteur Biografie', true ), 1 ), 'auteurBioMeta' , $settings); ?>
  </p>
  <p>
    <label for="order-mail-meta">E-mail voor bestellingen</label><br />
    <input type="text" name="order-mail-meta" id="order-mail-meta" style="width:100%;" value="<?php echo wp_specialchars( get_post_meta( $object->ID, 'Order Mail', true ), 1 ); ?>" />
  </p>
<?php }

//Insert values on save
add_action( 'save_post', 'save_post', 10, 2 );
function save_post( $post_id, $post ) {
  if ( !current_user_can( 'edit_post', $post_id ) )
    return $post_id;

  update_post_meta( $post_id, 'Auteur', stripslashes( $_POST['auteur-meta'] ) );
  update_post_meta( $post_id, 'Auteur Biografie', stripslashes( $_POST['auteurBioMeta'] ) );
  update_post_meta( $post_id, 'Auteur Quote', stripslashes( $_POST['auteur-quote-meta'] ) );
  update_post_meta( $post_id, 'Order Mail', stripslashes( $_POST['order-mail-meta'] ) );
} 
```

# asp.net-mvc - 自动 C# MVC 错误处理

> ID：15631918
> 
> 赞同：4
> 
> 时间：2013-03-26T07:50:40.240
> 
> 标签：asp.net-mvc, exception-handling

我有这个代码。

```
 public ActionResult Index()
 {
        ReceiptModel model = new ReceiptModel();

        try
        {
            model = new ReceiptModel(context);
        }
        catch (BussinessException bex)
        {
            ModelState.AddModelError("Index", bex.MessageToDisplay);
            return View("Index");
        }
        return View(model);
 } 
```

BussinesException ir 从数据库返回，然后显示给用户。每个控制器方法都得加上try-catch语句，有点繁琐。有没有更简单的方法来处理这些异常？

PS所有其他异常都用`HandleExceptionAttribute`

更新：

我使用了 Floradu88 方法。所以现在我有这样的东西。

```
public sealed class HandleBussinessExceptionAttribute : HandleErrorAttribute, IExceptionFilter
    {

        public override void OnException(ExceptionContext filterContext)
        {
            filterContext.Controller.TempData["UnhandledException"] = filterContext.Exception;
            filterContext.ExceptionHandled = true;

            ((Controller)filterContext.Controller).ModelState.AddModelError(
                 ((BussinessException)filterContext.Exception).Code.ToString(),
                 ((BussinessException)filterContext.Exception).MessageToDisplay
             );

            filterContext.Result = new ViewResult
            {
                ViewName = this.View,
                TempData = filterContext.Controller.TempData,
                ViewData = filterContext.Controller.ViewData,
            };

        }
    } 
```

在控制器动作上我放了

```
[HandleBussinessExceptionAttribute(Order = 2, ExceptionType = typeof(BussinessException), View = "Login")] 
```

我也尝试过异常处理程序：

```
 filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(filterContext.RouteData)); 
```

然后处理行动中的错误，`ModelState.IsValid`但行动的价值为空。所以现在我使用第一种方法。当我有更多时间时，我会尝试修复第二种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:16:19.970

请阅读这部分的文档：http: [//msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx](http://msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx)
[http://www.asp.net/web-api/overview /web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)
[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

内容太多，这里就不放了：

```
 public class NotImplExceptionFilterAttribute : ExceptionFilterAttribute 
    {
        public override void OnException(HttpActionExecutedContext context)
        {
            if (context.Exception is NotImplementedException)
            {
                context.Response = new HttpResponseMessage(HttpStatusCode.NotImplemented);
            }
        }
    } 
```

和你的控制器：

```
public class ProductsController : ApiController
{
    [NotImplExceptionFilter]
    public Contact GetContact(int id)
    {
        throw new NotImplementedException("This method is not implemented");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T14:14:30.520

1.  根据[这篇文章](https://stackoverflow.com/questions/25213998/any-way-to-recover-model-passed-to-post-action-when-inside-onexceptionexception)，创建一个自定义活页夹并将模型放入 TempData：

    ```
    public class AppBinder : DefaultModelBinder
    {
        protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            base.OnModelUpdated(controllerContext, bindingContext);
            controllerContext.Controller.TempData["model"] =    bindingContext.Model;
        }
    } 
    ```

2.  在 global.asax 中注册它：

    ```
    ModelBinders.Binders.DefaultBinder = new AppBinder(); 
    ```

3.  创建一个 BaseController 并覆盖 OnException：

    ```
    protected override void OnException(ExceptionContext filterContext)
    {
        filterContext.ExceptionHandled = true;

        this.ModelState.AddModelError(string.Empty, filterContext.Exception.Message);

        filterContext.Result = new ViewResult
        {
            ViewName = filterContext.RouteData.Values["action"].ToString(),
            TempData = filterContext.Controller.TempData,
            ViewData = filterContext.Controller.ViewData
        };

        base.OnException(filterContext);
    } 
    ```

All Actions int 从该基本控制器继承的控制器将在验证摘要中显示其未处理的异常他们自己的视图（请记住

```
@Html.ValidationSummary(true) 
```

在页面中）。它对我有用，希望对你也有用！

# php - 我应该使用什么数据类型将电子邮件存储在 mysql 数据库中？

> ID：15631919
> 
> 赞同：7
> 
> 时间：2013-03-26T07:50:43.973
> 
> 标签：php, mysql

我有一个小型网站，我想将联系人的电子邮件存储在 MySQL 数据库中。我正在使用 PHP 和 MySQL。每次我尝试时，它都会给我以下错误。但是，当我删除`@`和`.`（点）时，它工作正常。我真的需要这方面的帮助，请告诉我我在做什么错误，如果给出代码将非常有帮助。

我已经`VARCHAR`只用了。它不断显示以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '@gmail.com(id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id), name VARCHAR(3') 附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:03:14.493

您可以使用`vachar`带`1-255`长度的数据类型。

如果您的值的长度更长，请`255`使用`text`数据类型获取更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-08T23:47:16.393

使用 varchar 并将电子邮件用引号引起来，以便可以将其视为字符串，如下所示：

'电子邮件@gmail.com'

就是这样的兄弟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:00:23.583

除了@ 的错误之外，您仍然有一个无法正常工作的查询：gmail.com( id INT.... 不应该是 gmail.com', ( id INT....？

您的数据库无法处理 @ 的事实可能是由数据库的字符集引起的。是 UTF-8 Unicode (utf8) 吗？您要存储邮件的记录类型是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:00:38.013

a `varchar(50`) 足以存储电子邮件..

然后在您的查询中，所有要插入的值必须由`''`or包裹`""`

例如

```
$sql='INSERT INTO TABLE1 VALUES("Value1","EMAIL@GMAIL.com","VALUES3")' 
```

# mongodb - 基于 Mongo 构建的数据模型：将 ID 存储为一个大字符串或字符串数 组？Mongo 使用正则表达式或查看数组内部是否更快？

> ID：15631924
> 
> 赞同：0
> 
> 时间：2013-03-26T07:51:09.747
> 
> 标签：mongodb, indexing, mongomapper

我们可以使用帮助来构建我们的 Mongo 数据库。我们需要存储国家 ID，然后运行查询以返回包含匹配国家的文档。假设 ID 是 6-10 个字符长的字符串。

两种选择：

1) 将国家 ID 存储为一个由分隔符分隔的大字符串

（例如，/）。`Ex: "IDIDID1/IDIDID2/IDIDID3/IDIDID4/IDIDID5".`

2) 将 ID 存储在数组中。

```
 Ex: ["IDIDID1", "IDIDID2", "IDIDID3", "IDIDID4", "IDIDID5"]. 
```

我们希望针对“ `Find all documents containing country ID IDIDID3.`”之类的查询进行优化

对于选项 1，我们计划使用 RegEx 来查询文档（例如，`/IDIDID3/`）。

对于选项 2，我们将使用标准`$in`运算符。

哪个选项产生更好的读取性能？

使用字符串方法是否会产生更好的性能，因为您可以索引字符串（而不是 Mongo 只能索引一个数组的限制）？

我们正在使用 MongoMapper。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:10:12.157

来自 MongDB 手册

```
$regex can only use an index efficiently when the regular expression 
has an anchor for the beginning (i.e. ^) of a string and is a case-sensitive match.
Additionally, while /^a/, /^a.*/, and /^a.*$/ match equivalent strings, 
they have different performance characteristics. 
All of these expressions use an index if an appropriate index exists; 
however, /^a.*/, and /^a.*$/ are slower. /^a/ can stop scanning after matching the prefix. 
```

所以使用数组和多键索引在性能方面更有意义

# jquery - 使用 jquery 加载方法时，JSP 请求未传递到另一个 jsp 页面

> ID：15631932
> 
> 赞同：0
> 
> 时间：2013-03-26T07:51:33.027
> 
> 标签：jquery, jsp, load, request

在 JSP 页面中使用 jquery 的 load() 方法时遇到问题。在第一页中，我试图将属性 list1 设置为请求并使用 load() 将第 2 页的内容加载到第 1 页的“#content”中。

```
<% 
    ArrayList<String> list1 = new ArrayList<String>();
    request.setAttribute("list1", list1);
%>

<script>
    (function($) {
        $(document).ready(function() {
            $.ajaxSetup( {
                cache: false,
                beforeSend: function() {
                    $('#RSSList').hide();
                    $('#loading').show();
                },
                complete: function() {
                    $('#loading').hide();
                    $('#RSSList').show();
                },
                success: function() {
                    $('#loading').hide();
                    $('#RSSList').show();
                }
            });
            var refreshId = setInterval(    
                            function() { 
                              $("#content").load("page2.jsp");
                            }, 9000); 
        } );
    })(jQuery);
</script>

<div id="content"></div>
<img src="images/loading.gif" id="loading" alt="loading" style="display:none;" /> 
```

在第二页中，list1 正在从请求中检索并在被 out.println() 输出之前进行一些处理

```
<% 
    ArrayList<String> list2 = (ArrayList<String>) request.getAttribute("list1");

    // process list2 here

    if (list2==null){
        out.println("list2 is null");
    } else {
        // out.println() contents of list2
    }
%> 
```

那么问题就在这里。`request.getAttribute("list1")`在第 2 页中返回空指针，经过一些研究，我发现请求没有被发送到第 2 页，所以我无法从请求中检索“list1”。

我不能`request.getRequestDispatcher("page2.jsp").forward(request, response)`在第 1 页中使用，因为它会将我重定向到 page2.jsp，这不是我打算做的。

是否有任何解决方法可以将请求传递到第 2 页，以便可以在 page2.jsp 中检索 list1？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:53:19.553

把它包起来`doc ready`：

```
$(function(){
   $("#content").load("page2.jsp");
}); 
```

# jquery - 为 iOS、android 和 windows phone 8 原生外观修改 jquery 移动主题

> ID：15631933
> 
> 赞同：1
> 
> 时间：2013-03-26T07:51:33.233
> 
> 标签：jquery, cordova, mobile, themes

我正在使用 jquery mobile 开发电话间隙应用程序。我需要有 3 个不同平台的原生外观和感觉。Windows 手机 8、iPhone 和安卓。有什么方法可以继续。我是否应该为所有三个平台创建 3 组不同的 html 页面 [由于导航模型不同，不同手机的页眉和页脚也不同]。有没有办法我可以创建单个 html 页面并根据手机更改主题.. jquery mobile 是主题定制的正确选择。如果您建议相同的方法，我将不胜感激...是否存在相同的预定义主题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:50:35.443

是的，您将能够在 html 加载期间通过简单的 javascript 代码在不同的 css 之间切换。

其他建议

1\. 跨平台配置选项的好方法是将它们存储在 app.json 中，然后在应用程序启动期间通过 XmlHttpRequest 加载它们并应用（因此对于 iOS、Android、WP，您有不同的 app.json）。简单的 app.json 可能如下所示

```
{
  "name": "MyApp",
  "js": ["platformspecific.js", "platformspecific.2js"],
  "css": ["platformspecific.css", "platformspecific2.css"],
  "settings": {
     "isOption1Enabled": true,
     "isOption2Enabled": false
  } 
} 
```

2\. 了解使用 KnockoutJS 的 mvvm 方法 [如何使用 jquery-mobile 和 knockoutjs 构建 webapp](https://stackoverflow.com/questions/6089727/how-to-architecture-a-webapp-using-jquery-mobile-and-knockoutjs)

[http://www.scottlogic.co.uk/blog/colin/2012/10/integrating-knockout-and-jquerymobile/](http://www.scottlogic.co.uk/blog/colin/2012/10/integrating-knockout-and-jquerymobile/)

3\. 对于 Windows Phone 看看[https://channel9.msdn.com/Blogs/Interoperability/Demo-jQuery-Mobile-theme-for-Windows-Phone-8](https://channel9.msdn.com/Blogs/Interoperability/Demo-jQuery-Mobile-theme-for-Windows-Phone-8)

4\. 看看 Sencha Touch 作为一种替代方法。在针对不同平台进行自定义时，它的功能要强大得多

# c# - 为 Visual Studio 2010 自定义项目设计器

> ID：15631935
> 
> 赞同：1
> 
> 时间：2013-03-26T07:51:37.917
> 
> 标签：c#, visual-studio-2010, visual-studio-addins, visual-studio-extensions

我为 Visual Studio 2010 创建了一个新的项目模板，对于这个特定的项目模板，我想自定义项目设计器（即当您右键单击项目并单击属性选项时打开的窗口）。

如何以编程方式自定义项目设计器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:15:58.360

我没有正确回答你的问题但是，试试这个它会帮助你，

[http://www.codeproject.com/Articles/173496/How-to-Create-a-Visual-Studio-Add-in-that-Launches](http://www.codeproject.com/Articles/173496/How-to-Create-a-Visual-Studio-Add-in-that-Launches)

# web-services - 添加通行证后设备如何注册自身

> ID：15631939
> 
> 赞同：1
> 
> 时间：2013-03-26T07:51:53.130
> 
> 标签：web-services, authentication, ios6, passbook

当我在设备中添加通行证时，我在控制台上看到如下：

```
Mar 26 14:32:36 CamMobs-iPod4 passd[7128] <Warning>: Card has more than 10 locations. Capping.
Mar 26 14:32:38 CamMobs-iPod4 MobileSafari[7115] <Warning>: Warning: Attempt to dismiss from view controller <BrowserRootViewController: 0x1ed546a0> while a presentation or dismiss is in progress!
Mar 26 14:32:39 CamMobs-iPod4 backboardd[52] <Warning>: CoreAnimation: updates deferred for too long
Mar 26 14:32:39 CamMobs-iPod4 locationd[41] <Notice>: Location icon should now be in state 'Active'
Mar 26 14:32:50 CamMobs-iPod4 locationd[41] <Notice>: Location icon should now be in state 'Inactive'
Mar 26 14:32:52 CamMobs-iPod4 profiled[7122] <Notice>: (Note ) profiled: Idled.
Mar 26 14:32:52 CamMobs-iPod4 profiled[7122] <Notice>: (Note ) profiled: Service stopping.
Mar 26 14:33:31 CamMobs-iPod4 locationd[41] <Warning>: Launch Services: Registering unknown app identifier com.apple.PassKit failed
Mar 26 14:33:31 CamMobs-iPod4 locationd[41] <Warning>: Launch Services: Unable to find app identifier com.apple.PassKit
Mar 26 14:33:33 CamMobs-iPod4 configd[50] <Notice>: network changed: v4(en0:192.168.1.109) DNS Proxy
Mar 26 14:33:53 CamMobs-iPod4 backboardd[52] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0 
```

.....为什么它试图注册到 com.apple.PassKit ？在我的服务器中，我在 index.php 中使用了一些代码，如下所示：

```
<?php
    // Transfer Request URL into array
$request = explode("/", substr(@$_SERVER['REQUEST_URI'], 1));
//$request = explode("/", substr(@$_SERVER['REQUEST_URI'], 1));
print_r($_SERVER['REQUEST_URI']);

if (strtoupper($_SERVER['REQUEST_METHOD']) === "POST"
    && isset($_SERVER['HTTP_AUTHORIZATION'])
    && strpos($_SERVER['HTTP_AUTHORIZATION'], 'ApplePass') === 0
    && $request[2] === "devices"
    && $request[4] === "registrations") {

$auth_key = str_replace('ApplePass ', '', $_SERVER['HTTP_AUTHORIZATION']);

$device_id = $request[3];
$pass_id = $request[5];
$serial = $request[6];

echo $request[3];
//$device_id = $_POST[''];
echo $device_id;
echo $pass_id;
echo $serial ; 
// Catch the JSON post and decode it
$dt = @file_get_contents('php://input');
   // $dt = @file_get_contents('php://input');
//$device_token = json_decode($dt);
//$device_token = $device_token->pushToken;

$pushtoken=json_decode($dt)->pushToken;
if (!$device_token) die('No Token Found'); // Token wasn't found

    $dbhost = 'localhost:8889';
    $dbuser = 'root';
    $dbpass = 'root';
    $dbname = 'passesdb';
    $conn = mysql_connect($dbhost, $dbuser, $dbpass)

    or die ('Error connecting to mysql'.mysql_error());         

    mysql_select_db($dbname);
    mysql_query("SET NAMES UTF8");
    mysql_query($sql,$conn);
    $table = 'Devices';
    $sql = mysql_query("insert into Devices values('$device_id','$pushtoken')");
    mysql_query($sql);
exit;
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:34:17.320

这是在控制台中成功注册的样子：

```
1\. Mar 26 17:00:03 iPhone5 passd[6262] <Warning>: Generating POST request with URL <https:/afr.passk.it/v1/devices/7864dc8fdcfe739273cf7362a0db2b35/registrations/pass.it.passk.developer3/1wqdDAqHydkRURA9YCjbq>
2\. Mar 26 17:00:03 iPhone5 passd[6262] <Warning>: Request contains header field <Authorization: ApplePass 5cdddad65324384efa39575a4cf22424>
3\. Mar 26 17:00:03 iPhone5 passd[6262] <Warning>: Request contains body dictionary {
        pushToken = 0bbe54794500332b789a3ddb69827386d5c9aad1cb035c9f2725761d419950b2;
    }
4\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Register task (for device 7864dc8fdcfe739273cf7362a0db2b35, pass type pass.it.passk.developer3, serial number 1wqdDAqHydkRURA9YCjbq; with web service url https://afr.passk.it/) got response with code 201
5\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Generating GET request with URL <https:/afr.passk.it/v1/devices/7864dc8fdcfe739273cf7362a0db2b35/registrations/pass.it.passk.developer3?passesUpdatedSince=1364287618>
6\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Generating GET request with URL <https:/afr.passk.it/v1/passes/pass.it.passk.developer3/1wqdDAqHydkRURA9YCjbq>
7\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Request contains header field <If-Modified-Since: Tue, 26 Mar 2013 07:35:33 GMT>
8\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Request contains header field <Authorization: ApplePass 5cdddad65324384efa39575a4cf22424>
9\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Get serial #s task (for device 7864dc8fdcfe739273cf7362a0db2b35, pass type pass.it.passk.developer3, last updated 1364287618; with web service url https://afr.passk.it/) got response with code 204
10\. Mar 26 17:00:04 iPhone5 passd[6262] <Warning>: Get serial numbers task completed with update tag (null), serial numbers (null)
11\. Mar 26 17:00:05 iPhone5 passd[6262] <Warning>: Get pass task (pass type pass.it.passk.developer3, serial number 1wqdDAqHydkRURA9YCjbq, if-modified-since Tue, 26 Mar 2013 07:35:33 GMT; with web service url https://afr.passk.it/) got response with code 304 
```

您在上面发布的内容只是此过程的最后一行，（在哪里`passd`发现您的 pass.json 中有 10 多个位置）。

* * *

如果您检查上述内容，您可以看到您的 Web 服务需要响应的事件流：

**第 1 行：**设备将 POST 请求发送到：

```
https://webserviceURL/v1/devices/{deviceLibraryIdentifier}/registrations/{passTypeIdentifier}/{serialNumber}` 
```

**第 2 行：** POST 请求使用头字段发送：

`Authorization: ApplePass {authenticationToken}`

**第 3 行：** POST 正文包含 JSON 字典：

```
{
    pushToken = {pushToken};
} 
```

如果您的重写规则是正确的，您的 PHP 代码应该分析 URL 并捕获`deviceLibraryIdentifier`and`pushToken`并将其存储在数据库中，链接到包含`serialNumber`,`authenticationToken`和`passTypeIdentifier`.

然后**第 4 行：**您的 Web 服务使用代码响应设备，`201`表明注册成功。

在**第 5 行：**设备然后向您的 Web 服务生成一个 GET 请求，以检查是否有更新版本的 pof 通过相同的证书：

```
https:/webserviceURL/v1/devices/{deviceLibraryIdentifier}/registrations/{passTypeIdentifier}?passesUpdatedSince={lastUpdateTag} 
```

在**第 6、7 和 8 行：**设备向您的 Web 服务生成 GET 请求，以检查是否有此特定通行证的更新版本。它提供了一个`If-Modified-Since header`包含上次下载的 .pkpass 包（**第 7 行**）的标题中提供的日期，并提供了另一个`Authorization`包含`Applepass {authenticationToken}`（**第 8 行**）的标题，以便您的 Web 服务可以通过检查数据库记录来验证请求`serialNumber`。

```
https:/webserviceURL/v1/passes/{passTypeIdentifier}/{serialNumber}
Header: If-Modified-Since: {last modified date}
Header: Authorization: ApplePass {authenticationToken} 
```

在**第 9 行：** Web 服务以`204`响应响应，指示没有需要更新 `serialNumber`的 s 。**第 10 行**证实了这一点。`passTypeIdentifier`

 **最后，在**第 11 行**，设备收到`304`来自您的 Web 服务的响应，确认它刚刚安装的通行证是该通行证的最新版本。

上面准确地概述了您的 Web 服务将接收的内容以及成功注册设备所需的响应。**

# sockets - SO_REUSEADDR 选项会影响碎片吗？

> ID：15631941
> 
> 赞同：3
> 
> 时间：2013-03-26T07:52:00.717
> 
> 标签：sockets

我遇到了带有 SO_REUSEADDR 选项集的 UDP 套接字的有趣行为......

如果我通过 IP/UDP 发送 1472 个字节，我会在一帧中得到所有内容 - 这是预期的......

但是对于 1473 碎片，有/没有该选项会有所不同。有谁知道为什么会发生这种情况（我使用的是 Debian 2.6.32-5-amd64）？

***SO_REUSEADDR 启用：***

**框架#1**

```
Internet Protocol Version 4, Src: 173.59.3.22 (173.59.3.22), Dst: 173.70.1.5 (173.70.1.5)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: **1476**
    Identification: 0x214d (8525)
    Flags: 0x01 (More Fragments)
        0... .... = Reserved bit: Not set
        .0.. .... = Don't fragment: Not set
        ..1\. .... = More fragments: Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (17)
    Header checksum: 0xd53f [correct]
        [Good: True]
        [Bad: False]
    Source: 173.59.3.22 (173.59.3.22)
    Destination: 173.70.1.5 (173.70.1.5)
    [Source GeoIP: Unknown]
    [Destination GeoIP: Unknown]
User Datagram Protocol (**8** bytes)
    Source port: icl-twobase1 (25000)
    Destination port: 5000 (5000)
    Length: **1481**
    Checksum: 0x3cac [unchecked, not all data available]
        [Good Checksum: False]
        [Bad Checksum: False]
Data (**1448** bytes) 
```

**框架#2**

```
Internet Protocol Version 4, Src: 173.59.3.22 (173.59.3.22), Dst: 173.70.1.5 (173.70.1.5)br/>
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: **45**
    Identification: 0x214d (8525)
    Flags: 0x00
        0... .... = Reserved bit: Not set
        .0.. .... = Don't fragment: Not set
        ..0\. .... = More fragments: Not set
    Fragment offset: 1456
    Time to live: 64
    Protocol: UDP (17)
    Header checksum: 0xfa20 [correct]
        [Good: True]
        [Bad: False]
    Source: 173.59.3.22 (173.59.3.22)
    Destination: 173.70.1.5 (173.70.1.5)
    [Source GeoIP: Unknown]
    [Destination GeoIP: Unknown]
Data (**25** bytes) 
```

***SO_REUSEADDR 已禁用：***

**框架#1**

```
Internet Protocol Version 4, Src: 173.59.3.22 (173.59.3.22), Dst: 173.70.1.5 (173.70.1.5)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: **1500**
    Identification: 0x214a (8522)
    Flags: 0x01 (More Fragments)
        0... .... = Reserved bit: Not set
        .0.. .... = Don't fragment: Not set
        ..1\. .... = More fragments: Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (17)
    Header checksum: 0xd52a [correct]
        [Good: True]
        [Bad: False]
    Source: 173.59.3.22 (173.59.3.22)
    Destination: 173.70.1.5 (173.70.1.5)
    [Source GeoIP: Unknown]
    [Destination GeoIP: Unknown]

User Datagram Protocol (**8** bytes)
    Source port: icl-twobase1 (25000)
    Destination port: 5000 (5000)
    Length: **1481**
    Checksum: 0x3cac [unchecked, not all data available]
        [Good Checksum: False]
        [Bad Checksum: False]
Data (**1472** bytes) 
```

**框架#2**

```
Internet Protocol Version 4, Src: 173.59.3.22 (173.59.3.22), Dst: 173.70.1.5 (173.70.1.5)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: **21**
    Identification: 0x214a (8522)
    Flags: 0x00
        0... .... = Reserved bit: Not set
        .0.. .... = Don't fragment: Not set
        ..0\. .... = More fragments: Not set
    Fragment offset: 1480
    Time to live: 64
    Protocol: UDP (17)
    Header checksum: 0xfa38 [correct]
        [Good: True]
        [Bad: False]
    Source: 173.59.3.22 (173.59.3.22)
    Destination: 173.70.1.5 (173.70.1.5)
    [Source GeoIP: Unknown]
    [Destination GeoIP: Unknown]
Data (**1** byte) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:44:47.103

答案是**否定**的**——SO_REUSEADDR 不会影响分段**……

线索是**MTU 发现**和IP 标头中的**不要分段标志**。
如果在 MTU Discovery = ON 的情况下发送 1472 个字节：
在 Don't Frag Flag ON => 的情况下发送 1500 个字节我得到 ICMP：

Internet 控制消息协议
类型：3（目标不可达）
**代码：4（需要分段）** 校验和：0x90db [正确]
**下一跳的 MTU：1480**

之后，发送方对所有数据包进行分段以适应 1480 MTU，同时为该接收方保留 route\arp 缓存信息（路由 5 分钟，arp 30 秒 - 我的系统上配置的默认值）。

这就是为什么我看到意外的 1473 字节碎片（两帧中的 1456 + 25 字节）（SO_REUSEADDR 在该实验中为 ON）...

下次我尝试发送相同的 1473 字节（SO_REUSEADDR 已关闭）时，route\arp 缓存释放了有关接收器的信息，我看到了不同的混乱碎片（两帧中的 1480 + 1 个字节）。

很抱歉让大家感到困惑......
但是，我深入研究这种行为并澄清我观察到的事情对我来说是相当认知的。这里没有奇迹。

# java - 替换java中的整个字符串

> ID：15631944
> 
> 赞同：2
> 
> 时间：2013-03-26T07:52:22.577
> 
> 标签：java, android

我有一个字符串数组，其中包含智能手机中可用的传感器列表。在这个数组中，如果有匹配，我想要的每个元素，替换整个字符串。

例如：

```
sensor[1] = "iEnemoEngine orientation sensor"; 
```

我想如果`sensor[1]`包含单词“orientation”，将整个字符串“iEnemoEngineorientation sensor”替换为“orientation”

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T07:55:01.370

尝试这个：

```
if (sensor[1].contains("orientation")) {
    sensor[1] = "orientation";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:56:06.753

```
String str = "iEnemoEngine orientation sensor";
String checkReplaceStr = "orientation";
if(str.contains(checkReplaceStr)){
    str = checkReplaceStr;
} 
```

这应该对`String`数组中的每个元素进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:54:44.950

```
String orient = "orientation";

if(sensor[1].contains(orient)) sensor[1] = orient; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:58:03.873

尝试这个：

```
 String pattern= "orientation";
 for (int i=0; i<stringArray.length; i++){
   String str = stringArray[i];
   if (str.contains (pattern)){

     str = pattern;
     stringArray[i] = str;
    }
} 
```

# sql - 在sql中获取一对多关系中的计数

> ID：15631945
> 
> 赞同：0
> 
> 时间：2013-03-26T07:52:31.270
> 
> 标签：sql, sql-server, sql-server-2008

这是相关问题[相关问题](https://stackoverflow.com/questions/15630959/how-to-concatenate-string-in-sql)的链接，

现在我有一个查询，它给出了我想要的公司名称

**询问**

```
 SELECT  CASE WHEN COALESCE(b.totalCoupons, 0) > 3 THEN a.Name +'(Important) '
     WHEN IsHighPriority = 1 THEN a.Name +'(High Priority) '
    ELSE a.Name +''
END  AS CompanyName
 FROM    Company a
LEFT JOIN
(
    SELECT  Name, COUNT(*) totalCoupons
    FROM    Company
    GROUP   BY Name
) b ON a.name = b.name 
```

现在我想要那个在`(important)`我们正在测试的场景中，如果公司有超过 3 张优惠券，则`(Important)`在公司名称前面添加，但如果公司有超过 3 张优惠券，我想这样做

```
RejectProcessed = 0 and ReviewVerify = 0 and isPublish = 0 and ForSupervisor = 0 
```

然后我想在那个特定的公司名称前面添加重要的内容。所以我该怎么做 。

请随时询问您是否需要任何详细信息。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:24:38.697

这个查询解决了我的问题

```
SELECT  CASE WHEN COALESCE(b.totalCoupons, 0) > 3 THEN company.Name +' (Important) '
        WHEN IsHighPriority = 1 THEN company.Name +' (High Priority) '
        ELSE company.Name +''
    END  AS CompanyName , company.id as Companyid
FROM    Company company
    left JOIN
    (
        SELECT  co.Name as coName, co.id as coid, COUNT(c.id) totalCoupons
        FROM    Company co, Coupon c
        where c.CompanyId = co.id   and c.RejectedProcessed = 1 and c.ReviewVerify = 0 and c.isPublish = 0 and c.ForSupervisor = 0 
        GROUP   BY co.Name, co.id
    ) b ON company.id = b.coid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:22:00.070

用这个..

```
SELECT CASE WHEN COALESCE(b.totalCoupons, 0) > 3 THEN a.Name +'(Important) '

WHEN IsHighPriority = 1 THEN a.Name +'(High Priority) '

ELSE a.Name +''

END AS CompanyName

FROM Company a

LEFT JOIN

(

SELECT  Name, COUNT(*) totalCoupons

FROM    Company C

WHERE

EXISTS(

         select 1 

         from coupon P

         where P.RejectProcessed = 0 and P.ReviewVerify = 0

         and P.isPublish = 0 and P.ForSupervisor = 0 

         and P.CompanyName = C.Name

       )

and in second query..

use WHERE P.RejectProcessed = 0 and P.ReviewVerify = 0

and P.isPublish = 0 and P.ForSupervisor = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:10:42.240

@user2193861，优惠券是否存在于与公司表的左连接中..？

```
LEFT JOIN
(
    SELECT  Name, COUNT(*) totalCoupons
    FROM    Coupon 
    GROUP   BY Name
) b ON a.name = b.name 
```

# list - 更改 itertools 的输出

> ID：15631946
> 
> 赞同：0
> 
> 时间：2013-03-26T07:52:37.583
> 
> 标签：list, python-3.x

```
import itertools
def x(a,b):
    x = [[i] for i in itertools.product(a, repeat=b)]
    return [x]
print (x({0,1},3)) 
```

输出是

```
[[[(0, 0, 0)], [(0, 0, 1)], [(0, 1, 0)], [(0, 1, 1)], [(1, 0, 0)], [(1, 0, 1)], [(1, 1,    0)], [(1, 1, 1)]]] 
```

我想要的是它看起来像这样，所有的 () 都被删除了，开始和结束的 [] 被删除了

```
[[0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:57:21.320

为什么不简单

```
return list(itertools.product(a, repeat=b)) 
```

或者，如果您希望所有元素都是列表，

```
return map(list, itertools.product(a, repeat=b)) 
```

此外，请小心写入从名为;`x`的函数中命名的变量。`x`这会给递归带来麻烦。

# android - SyncAdapter 周期性同步（）未触发

> ID：15631949
> 
> 赞同：11
> 
> 时间：2013-03-26T07:52:58.100
> 
> 标签：android, android-contentprovider, android-syncadapter

我正在尝试弄清楚 syncAdapter 的工作原理，我使用 sampleSync Adapter 作为示例/起点，并以此为基础进行了第一次测试。唯一的区别是我没有使用默认联系人提供程序，而是我需要自己的一个。

此方法与 sampleSyncAdapter 演示（在 AccountAuthenticatorActivity 中）中的方法有点相同，我刚刚添加了定期同步。

```
 public void finishLogin(String authToken) {
    Log.i(TAG, "finishLogin()");
    final Account account = new Account(mUsername, "be.company.syncAdapterTest");
    if(mRequestNewAccount) {
        mAccountManager.addAccountExplicitly(account, mPassword, null);
        ContentResolver.setIsSyncable(account, MY_AUTHORITY, 1);

        Bundle params = new Bundle();
        params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_DO_NOT_RETRY, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, false);           
        ContentResolver.addPeriodicSync(account, MY_AUTHORITY, params, 30);
        ContentResolver.setSyncAutomatically(account, MY_AUTHORITY, true);
        ContentResolver.requestSync(account,MY_AUTHORITY,params);
    } else {
        mAccountManager.setPassword(account, mPassword);
    }
    final Intent intent = new Intent();
    intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, "ACCOUNT_TEST");
    intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, "be.company.syncAdapterTest");
    setAccountAuthenticatorResult(intent.getExtras());
    setResult(RESULT_OK, intent);
    finish();
} 
```

在 perfomSync() 方法中，我有以下方法：

```
 @Override
public void onPerformSync(Account account, Bundle extras, String authority,
        ContentProviderClient provider, SyncResult syncResult) {
    Log.d(TAG, "onPerformSync() start");
    // Testje
    try {
        final String authToken = mAccountManager.blockingGetAuthToken(account, "be.company.syncAdapterTest", NOTIFY_AUTH_FAILURE);
        Log.d(TAG, SAPNetworkUtilities.getWeek(account, authToken, getRandomDate()));
    } catch (OperationCanceledException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (AuthenticatorException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Log.d(TAG, "onPerformSync() end");
} 
```

这里我只是调用了一个简单的 SAP webservice 并在日志中显示出来。现在我有以下两个问题：

1.  当我在设置中添加我的帐户时，SYNC 不会自动启动。我需要进入帐户并选中复选框以开始同步？
2.  在此示例中，同步不是每 30 秒触发一次...我是否需要在 perfomSync() 方法中添加一些内容才能让系统知道同步已完成并且可以开始下一次运行？

目前我没有在 contentProvider 中写入值，只是因为我试图弄清楚同步是如何详细工作的。

目前我正在Android模拟器上进行测试。

提前感谢您的反馈。

亲切的问候，

罗宾

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-08T19:35:16.683

我也在努力与同步适配器进行定期同步。我可以使用 requestSync 手动触发我的 SyncAdapter，但 addPeriodicSync 不会触发。

我注意到在**所有**示例中，进入 Settings->Accounts 显示 SyncAdapter 的帐户带有一个小“同步轮”（如果同步正常，通常为绿色；如果最近同步失败，则为红色）以及“上次同步”时间戳. 我的帐户（从[Google Docs](http://developer.android.com/training/sync-adapters/creating-authenticator.html)复制和粘贴的虚拟帐户）没有列出同步轮或时间戳之类的任何内容。

进一步挖掘发现了问题所在：我的内容提供者在其 XML 中没有**标签**（我以前使用它没有问题，所以我浏览了文档的那部分）。为我的内容提供者添加一个简单的标签会导致它在设置中显示在我的帐户下，同时还有一个同步轮和时间戳。

这是从我的应用程序中获取的一些代码以获得灵感。希望它会帮助某人，某处！

/res/xml/sync_adapter.xml

```
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
android:accountType="com.example.database"
android:allowParallelSyncs="false"
android:contentAuthority="com.example.database.data.provider"
android:isAlwaysSyncable="true"
android:supportsUploading="false"
android:userVisible="true" /> 
```

/com/example/database/data/MySyncAdapter

```
public class MySyncAdapter extends AbstractThreadedSyncAdapter {
    private static final String TAG = MySyncAdapter.class.getSimpleName();
    Context context;

    public MySyncAdapter(Context context, boolean autoInitialize) {
        super(context, autoInitialize);
        this.context = context;
    }

    public MySyncAdapter(Context context, boolean autoInitialize, boolean allowParallelSyncs) {
        super(context, autoInitialize, allowParallelSyncs);
        this.context = context;
    }

    @Override
    public void onPerformSync(Account account, Bundle extras, String authority, ContentProviderClient provider, SyncResult syncResult) {
        Log.e(TAG, "Performing Sync");
    }
} 
```

AndroidManifest.xml（内容提供者需要标签才能显示在帐户中）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.database">

    <uses-sdk tools:node="replace" />

    <uses-permission
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        android:maxSdkVersion="18" />

    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.READ_SYNC_STATS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:logo="@drawable/chef_collection_logo_white"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">

        <provider
            android:name="com.example.database.data.MyContentProvider"
            android:authorities="com.example.database.data.provider"
            android:label="my provider"
            android:exported="false"
            android:multiprocess="true"
            android:syncable="true" />

        <activity
            android:name=".app.MainActivity"
            android:label="@string/title_activity_main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name="com.example.database.data.AuthenticatorService"
            android:exported="true"
            android:process=":auth">
            <intent-filter>
                <action android:name="android.accounts.AccountAuthenticator" />
            </intent-filter>
            <meta-data
                android:name="android.accounts.AccountAuthenticator"
                android:resource="@xml/authenticator" />
        </service>

        <service
            android:name="com.example.database.data.MySyncAdapterService"
            android:exported="true"
            android:process=":sync">
            <intent-filter>
                <action android:name="android.content.SyncAdapter" />
            </intent-filter>
            <meta-data
                android:name="android.content.SyncAdapter"
                android:resource="@xml/sync_adapter" />
        </service>

    </application>

</manifest> 
```

主要活动。我在首次运行设置向导之后调用此代码，但您可以在任何地方调用它。这将尝试每*30 秒*同步一次（用于测试）。请注意，谷歌文档目前是错误的，因为它提到它需要毫秒而不是秒。要注意的另一件事是，您不能将 null 作为捆绑传递。这样做会抛出 IllegalArgumentException 或类似的东西。

```
//Create Account
mAccount = createSyncAccount(this);

//Turn on periodic syncing
ContentResolver resolver = getContentResolver();
resolver.setIsSyncable(mAccount, AUTHORITY, 1);
resolver.setSyncAutomatically(mAccount, AUTHORITY, true);

resolver.addPeriodicSync(
        mAccount,
        AUTHORITY,
        Bundle.EMPTY,
        30); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-06T07:07:41.720

如果未设置同步选项，则某些设备不会触发定期同步。我最近对三星 Galaxy Grand 2 的这个问题发疯了……

![在此处输入图像描述](../Images/5bd50c03959582b00b3ac3ffa8864efc.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-25T16:09:07.430

我只是把头撞在墙上好几个小时，试图弄清楚为什么定期同步不起作用。事实证明，轮询频率需要以秒（字面意思）而不是毫秒为单位，也不是以毫秒为单位的秒数。因此，例如，如果您希望它每分半钟同步一次，您需要调用：

```
 ContentResolver.addPeriodicSync(
                    account,
                    authority,
                    Bundle.EMPTY,
                    90
            ); 
```

此外，传入的包不能像文档中那样为空，它会抛出 NullPointerException。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-22T21:48:02.323

仅当其自动同步设置为 ON 且 syncable=true 时，才能运行定期同步。解决此问题的更好方法是使用[GCM](http://developer.android.com/google/gcm/index.html)。只要客户端需要了解更改，服务器就可以向设备发送推送通知。在客户端，我们会在收到此类消息后手动请求同步。它的电池效率更高，我们会在服务器一上线就更新，无需等待下一个同步周期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-07T09:12:09.213

即使您的所有同步配置都以正确的方式设置，如果设备内部存储空间几乎已满，则定期同步将不起作用。我认为如果使用了 96% 或 97% 的内存，同步将停止运行。我不知道是他们的即使内存几乎已满，任何使其工作的规定。您可以在 android mobile 的 gmail 应用程序中观察到相同的问题，当内存快满时同步将无法工作。当设备内存快满时，您无法使用 android gmail 应用程序接收或发送消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-09T07:22:52.073

这对我来说很好 就解释如何使 addPeriodicSync 工作而言，培训指南中有两个错误：

1.  您必须调用 ContentResolver.setSyncAutomatically 并将 true 作为第三个（同步）参数，以便在 addPeriodicSync 之前为您的适配器启用同步。像这样： ContentResolver.setSyncAutomatically(account,MY_AUTHORITY,true);

2.  ContentResolver.addPeriodicSync 的第四个（pollFrequency）参数是秒数，如此处所述，而不是培训指南中暗示的毫秒数。培训指南中 addPeriodicSync 的演示代码将导致每千小时同步一次，而不是每小时一次。所以最小频率是1分钟。

请参阅此[http://digitalassassin.net/2014/03/contentresolver-addperiodicsync-doesnt-work-never-syncs/](http://digitalassassin.net/2014/03/contentresolver-addperiodicsync-doesnt-work-never-syncs/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-08-17T06:57:50.047

尝试`android:process=":sync"`从 android manifest 中删除以在中文 rom 中运行

# mysql - 如何在 Cake 中检索来自哪个用户的消息？

> ID：15631950
> 
> 赞同：0
> 
> 时间：2013-03-26T07:53:03.237
> 
> 标签：mysql, cakephp

我正在 CakePHP 中制作一个消息系统，我有表格消息

```
id
from_id
to_id
subject
message 
```

to_id 设置为用户的 FK，因此用户可以拥有许多消息，但是如果我只获得 id，我该如何回显发件人的姓名？

用户模型：

```
class User extends AppModel {

public $name = 'User';

public $hasOne = array (
    'UserProfile'=>array(
        'className'=>'UserProfile',
        'foreignKey'=>'id'
    )
);

public $hasMany = array(
    'Message'=>array(
        'className'=>'Message',
        'foreignKey'=>'to_id'
    )
);
} 
```

消息模型：

```
class Message extends AppModel {

public $name = 'Message';

public $belongsTo = array (
    'User'=>array(
        'className'=>'User',
        'foreignKey'=>'to_id'
    ),
);
} 
```

消息控制器：

```
public function messages(){

    $user = $this->User->find(  'first', array('conditions' => array(
        'User.id' => $this->Session->read('Auth.User.id'))));
    $this->set('user', $user);

    if($this->request->is('post')) {
        $this->requert->data['Message']['from_id'] = $this->Auth->user('id');
        debug($this->request->data);
    }
} 
```

这需要将有关用户的所有信息存储在数组中，包括数组消息，但在这种情况下，我会得到以下消息：

```
id => 1
from_id => 10
to_id => 7
subject => 'subject'
message => 'body' 
```

那么如何从这个id中提取发件人的名字呢？

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:05:21.183

在这种情况下，您需要为类名使用别名。

```
class Message extends AppModel {
    public $belongsTo = array(
        'Sender' => array(
            'className' => 'User',
            'foreignKey' => 'from_id'
        ),
        'Receiver' => array(
            'className' => 'User',
            'foreignKey' => 'to_id'
        )
    );
}

class User extends AppModel {
    public $hasMany = array(
        'SentMessages' => array(
            'className' => 'Message',
            'foreignKey' => 'from_id'
        ),
        'Messages' => array(
            'className' => 'Message',
            'foreignKey' => 'to_id'
        )
    );
} 
```

# css - 如果导航保持相同的 JSF 页面，则不会加载样式

> ID：15631955
> 
> 赞同：0
> 
> 时间：2013-03-26T07:53:20.417
> 
> 标签：css, jsf, jsf-2, styles, rendering

我有一个命令按钮，我绑定了它的操作方法。

```
<f:view >
    <pm:page title="Title">
        <pm:view id="viewId" swatch="c">
            <p:outputPanel id="panelId">
                <h:form id="formId">   

    <p:commandButton action="#{bean.actionMethod}" update="formId" value="Click" />
                           </h:form>
                     </p:outputPanel>
               </pm:view>
    </pm:page >
</f:view> 
```

内部动作方法。导航指向同一页面。一些值在 action 方法中更新。

```
public String applyPeriod(String caller)
{
    .....
    retrun SAMEPAGE;
} 
```

一切都好。但未呈现样式。页面返回默认样式。

知道如何加载样式。我不想通过真正的刷新来更改 URL。我应该通过 ajax 调用来管理它。

我跟踪页面的请求。完全不需要样式。

我使用primefaces，primefaces mobile，它是一个移动页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:57:10.700

如果您没有`:`在表单的 ID 后面使用，我相信问题可能与相对组件搜索有关，试图根据相对标识符查找表单。通过使用不同元素的 ID，您将获得预期的行为，我强调，因为它们以相对于您的上下文的方式正确引用`<p:commandButton/>`。

尝试使用`update="@form"`或`update=":formId"`。另外，作为旁注，如果您想使用完整的 ajax 并且您不会将用户重定向到任何地方，您的方法应该是`void`或者 return `null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:58:03.730

我真的不知道幕后的原因。但是，我通过提供确切的组件 id 来更新 commandButton 的属性解决了这个问题。

```
<p:commandButton action="#{bean.actionMethod}" update="ListOfComponentIds" value="Click" /> 
```

# sql-server - 何时创建函数而不是过程

> ID：15631965
> 
> 赞同：0
> 
> 时间：2013-03-26T07:53:58.997
> 
> 标签：sql-server

我有很多`stored procedures`正在生产中，但没有`functions`。

这里在 MSDN 中是[**`CREATE FUNCTION`**](http://msdn.microsoft.com/en-us/library/ms186755.aspx). 它说：

> 在 SQL Server 2012 中创建用户定义函数。用户定义函数是 Transact-SQL 或公共语言运行时 (CLR) 例程，它接受参数、执行操作（例如复杂计算）并返回该操作的结果作为一个值。返回值可以是标量（单个）值或表。使用此语句创建一个可重用的例程，该例程可以通过以下方式使用：

我的存储过程似乎已经实现了上述所有功能。

当一个人选择 a`function`而不是 a时，确定的情况是`stored procedure`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:57:11.110

当您想要将结果集成为更大查询的一部分时。

例如，您可以`join`或`cross apply`表值函数，并且您可以为结果中的每一行评估一个标量 UDF（小心，因为这可能会影响性能）。

对于存储过程，您需要执行它们并将结果捕获到临时表等中，以便能够在更广泛的查询中加入它，并且需要游标或类似物来模拟标量 UDF 行为并为每一行执行它。

# c# - windows phone 中的文件打开对话框

> ID：15631969
> 
> 赞同：1
> 
> 时间：2013-03-26T07:54:13.010
> 
> 标签：c#, windows-phone-7, fileopendialog

我正在开发 windows phone 应用程序，我需要应用程序中的文本文件导入工具。现在我需要像在 Windows 桌面应用程序或 html 文件控件中一样打开文件资源管理器。

我用谷歌搜索了所有可能的方法，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:00:45.803

您的应用程序是沙盒的，并且只能访问文件夹中的数据 - 因此您无法浏览到文件。您只能读取随应用程序部署的文件，或写入隔离存储。

或者，您可以从 Skydrive 下载文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:11:21.127

您不能在 WP 应用程序中浏览文件。不支持文件浏览器！

您只能访问存储在应用程序的独立存储中的文件。为此，您需要自己创建一个文件浏览器，它只允许访问独立存储中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:05:27.250

您还可以读取存储在 SD 卡上的文件，但前提是您已注册应用程序以管理特定的扩展程序。不支持txt文件，因为它们是由操作系统注册的，不能被替换。

# html - Gwt 使用 UiBinder 将标签文本设置为小于 (<) 符号

> ID：15631971
> 
> 赞同：1
> 
> 时间：2013-03-26T07:54:17.603
> 
> 标签：html, gwt, uibinder

我在 UiBinder 中有以下小部件的代码

```
<g:HorizontalPanel>
<b:Label>&lt;</b:Label>
<b:TextBox ui:field="lowerLimit" addStyleNames="lowerLimitTextBox"></b:TextBox>
<b:Button icon="COPY" addStyleNames="copyAll copyAllLower">Copy To All</b:Button>
</g:HorizontalPanel> 
```

在页面上它显示为`&lt;`而不是 < 如何在 UiBinder 中指定标签文本以显示为 <？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:05:39.057

你试过这样吗？

```
<g:Label  text="&lt;"></g:Label> 
```

确保你`doctype`应该喜欢`<!doctype html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:10:18.120

利用

```
<g:HTML HTML="&lt;"></g:HTML> 
```

而不是标签。因为 Label 只显示**纯**文本而不是**Html**文本。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T10:46:03.070

逃脱它。`<b:Label> \< </b:Label>`

# sql - 从日期时间中减去一天

> ID：15631977
> 
> 赞同：115
> 
> 时间：2013-03-26T07:54:31.857
> 
> 标签：sql, sql-server, datetime

我有一个查询来获取 2 个日期时间之间的日期差异：

```
SELECT DATEDIFF(DAY, @CreatedDate , GETDATE())

Ex :

SELECT DATEDIFF(DAY, '2013-03-13 00:00:00.000' , GETDATE()) 
```

我需要进行这样的查询工作，它将从创建的日期中减去一天：

```
SELECT DATEDIFF(DAY, **@CreatedDate- 1** , GETDATE()) 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-03-26T07:59:03.923

尝试这个

```
SELECT DATEDIFF(DAY,  DATEADD(day, -1, '2013-03-13 00:00:00.000'), GETDATE()) 
```

或者

```
SELECT DATEDIFF(DAY,  DATEADD(day, -1, @CreatedDate), GETDATE()) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-06-19T20:36:35.860

我不确定你到底想做什么，但我认为这个 SQL 函数会帮助你：

```
SELECT DATEADD(day,-1,'2013-04-01 16:25:00.250') 
```

以上将给你`2013-03-31 16:25:00.250`。

它会带你回到一天，并适用于任何标准的日期时间或日期格式。

尝试运行此命令，看看它是否为您提供了您正在寻找的内容：

```
SELECT DATEADD(day,-1,@CreatedDate) 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-04-06T19:37:03.497

简单地从今天的日期中减去一天：

```
Select DATEADD(day,-1,GETDATE()) 
```

（原始帖子使用-7并且不正确）

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-12-26T21:26:03.860

显然，您可以从日期时间中减去所需的天数。

```
SELECT GETDATE() - 1

2016-12-25 15:24:50.403 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-08-03T08:19:34.310

这应该有效。

```
select DATEADD(day, -1, convert(date, GETDATE())) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T07:57:52.680

```
SELECT DATEDIFF (
    DAY, 
    DATEDIFF(DAY, @CreatedDate, -1), 
    GETDATE()) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T08:05:48.027

试试这个，可能对你有帮助

```
SELECT DATEDIFF(DAY, DATEADD(DAY,-1,'2013-03-13 00:00:00.000') , GETDATE()) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-15T09:56:12.627

老实说，我只是使用：

```
select convert(nvarchar(max), GETDATE(), 112) 
```

从中`YYYYMMDD`减去一。

或者更准确地说

```
select convert(nvarchar(max), GETDATE(), 112) - 1 
```

对于昨天的日期。

替换`Getdate()`为您的值`OrderDate`

```
select convert(nvarchar (max),OrderDate,112)-1 AS SubtractDate FROM Orders 
```

应该这样做。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-03-26T08:05:57.197

你可以试试这个。

**时间戳=2008-11-11 13:23:44.657;**

```
SELECT DATE_SUB(OrderDate,INTERVAL 1 DAY) AS SubtractDate FROM Orders 
```

**输出：2008-11-10 13:23:44.657**

我希望，它将有助于解决您的问题。

# android - 过滤列表视图，而不是使用更具体的条件重新查询数据库

> ID：15631980
> 
> 赞同：1
> 
> 时间：2013-03-26T07:54:44.790
> 
> 标签：android, listview, filter, cursor

这个主题似乎没有被详细讨论，所以我将尽可能地解释我的情况，以使其清楚，并希望得到一些解释。

我的应用程序允许用户获取有关地点的信息：有不同的菜单，其中包含与地点类别相对应的不同按钮（食品/快餐、餐馆、...或商店/商店、...等等）。用户单击他选择的按钮，它将向我的数据库发送一个请求并显示一个带有结果的列表视图。这种方式：
![在此处输入图像描述](../Images/2e52f213935dd15c558aecb8ea99a0c0.png) 这是一个例子，但有 16 种这样的可能性，每次它打开相同的活动（ResultListViewActivity）但显示不同的内容。

我希望用户能够进行更准确的研究，所以有一个过滤模式，如图 3 所示。出现的窗口允许选择更多标准。到目前为止，我的计划是在用户每次点击某物时填充一些变量。就像他选择用信用卡付款一样，VALUECARD = X，如果预算 = 某物，那么 VALUEBUDGET = Y 等等，当您单击“确定”时，它会将所有价值包发送到查询数据库的方法并打开一个新的列表视图结果。它肯定会起作用，我知道该怎么做。但是我也觉得每次查询数据库都不是什么好方法，为什么不直接在列表视图中搜索呢？

我知道如何查询数据库，因为我的方法正在显示列表视图（见图 2），但我不知道如何查询列表视图，尤其是当我将在我的归档中使用的数据库中的某些列未导入时我的光标，然后在我的列表视图中。我想我首先必须导入我可能需要过滤的每一列。
这是我显示列表视图的方法的代码，因此您可以看到我的光标是如何填充的以及我的适配器是如何制作的：

```
private void displayListView() {

    // getExtra 
    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    String inInterval = bundle.getString("inInterval");
    Log.d(TAG, "inInterval = " + inInterval);

    poititle.setText(title);

    // put the results of the method in a cursor
    Cursor c = dbHelper.findPoiInTable(inInterval);
    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_STREET, DatabaseAdapter.COL_WEBSITE,
            DatabaseAdapter.COL_TELEPHONE, DatabaseAdapter.COL_REMARKS,
            DatabaseAdapter.COL_PRICE };
    int[] to = new int[] { R.id.name, R.id.street, R.id.website,
            R.id.telephone, R.id.remarks, R.id.price };
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.poilistview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        // Comportement des éléments de la listview
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(),
                    POIActivity.class);

            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String website = ((TextView) view.findViewById(R.id.website))
                    .getText().toString();
            String telephone = ((TextView) view
                    .findViewById(R.id.telephone)).getText().toString();
            String remarks = ((TextView) view.findViewById(R.id.remarks))
                    .getText().toString();
            String price = ((TextView) view.findViewById(R.id.price))
                    .getText().toString();
            // i.putExtra(ID_EXTRA, name) ;
            i.putExtra(ID_NAME, name);
            i.putExtra(ID_WEBSITE, website);
            i.putExtra(ID_TELEPHONE, telephone);
            i.putExtra(ID_REMARKS, remarks);
            i.putExtra(ID_PRICE, price);
            startActivity(i);
        }

    }); } 
```

在这种特殊情况下，我如何过滤光标中的“COL_PRICE”？更准确地说，在我的过滤器菜单中，当用户设置预算并且我们得到一个值时，如何使用该值与 COL_PRICE 中的值相关并将元素保持在给定值之下？
感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:11:03.883

使用当前代码最简单的解决方案是使用向`FilterQueryProvider`适配器添加一个，但这最终会在您的数据库中启动一个新查询。

如果您真的不想对数据库进行新查询，则必须为您的`ListView`. 这将比第一个解决方案多得多的工作，而且可能也更慢。

# node.js - 如何在 Node.js 的 MongoDB mapReduce 函数中处理 ISO 日期字符串

> ID：15631986
> 
> 赞同：2
> 
> 时间：2013-03-26T07:55:13.277
> 
> 标签：node.js, mongodb, node-mongodb-native

我在 Node.js 应用程序的 mapReduce 函数中使用 Date 函数。在下面的 map 函数中，我首先将 ISO 日期字符串转换为 Date 对象。然后获取日期的年份，它将用作键。预期结果是输出集合中的 _id 为“2013”​​。但实际上，_id 是 NaN（类型是 Double）。

mapReduce 函数内部使用的 Date 函数似乎与普通的 JS Date 函数不同。

1.  如何在下面的 map 函数中使用普通的 JS Date 函数？
2.  如果不可能，如何处理map函数内部的ISO日期字符串？

.

```
var mongodb = require('mongodb');

var map = function() {
    var date = new Date("2013-03-19T08:27:58.001Z"); // Convert ISO date string to Date object
    var year = date.getFullYear(); // Get the year of the date.

    emit(year, this);
};

var reduce = function(key, values) {
    if (values.length) {
        return values[0];
    }
};

/**Connect to MongoDB
*/
var server = new mongodb.Server(dbIP, dbPort, {});
var db = new mongodb.Db(dbName, server, {safe:true});
db.open(function (err, client) {
    if( err ) {
        console.log('DB: Failed to connect the database');        
    }
    else {      
        console.log('DB: Database is connected');

        db.collection(collectionName).mapReduce(
            map,
            reduce,
            {
                out: 'map_reduce_collection'
            }
            , function (err, collection, stats){            
                if( err ) {
                    console.log('Map reduce: Fail.');        
                }
                else {      
                    console.log('Map reduce: Success.');
                }
                db.close();
        });     
    }   
}); 
```

=======编辑：添加解决方案=========

ISODate 解决了我的问题。下面的代码对我有用。

```
// The map and reduce functions are serialized by the driver and run in the MongoDB server.
// The functions used in them should be supported by the mongo shell.
// A tip is checking if a function is supported by map-reduce function by execuing it in the mongo shell.
// For example, the Date function is different from the one supported by Node.js. 
// In Node.js, the var date = new Date("2013-03-19T08:27:58.001Z"); works. But it doesn't work in mongo shell.
// So it can't be used in the map function.
var map = function() {
    var date = new ISODate("2013-03-19T08:27:58.001Z");
    var year = date.getFullYear();
    emit(year, this);
}; 
```

谢谢，杰弗里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T09:31:36.287

在这里发布答案。

ISODate 解决了我的问题。下面的代码对我有用。

```
// The map and reduce functions are serialized by the driver and run in the MongoDB server.
// The functions used in them should be supported by the mongo shell.
// A tip is checking if a function is supported by map-reduce function by execuing it in the mongo shell.
// For example, the Date function is different from the one supported by Node.js. 
// In Node.js, the var date = new Date("2013-03-19T08:27:58.001Z"); works. But it doesn't work in mongo shell.
// So it can't be used in the map function.
var map = function() {
    var date = new ISODate("2013-03-19T08:27:58.001Z");
    var year = date.getFullYear();
    emit(year, this);
}; 
```

# xaml - phone 8 超链接按钮样式

> ID：15631987
> 
> 赞同：1
> 
> 时间：2013-03-26T07:55:32.027
> 
> 标签：xaml, windows-phone-8

hyperlinkBut​​ton 样式有什么好的例子吗？我在下面找到了一个，但在按下状态下我得到错误，我的 hyperlinkBut​​ton 是 2 行，如果我不使用这种样式，我会得到 2 行的 2 个下划线，但如果我只使用最后一个样式线得到下划线我想要的风格是我得到两条线都加下划线，当点击时前景变为白色而不是手机强调色这里是风格

```
<Style x:Key="HyperlinkButtonStyle" TargetType="HyperlinkButton">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HyperlinkButton">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="TextElement">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="TextElement">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border Background="{TemplateBinding Background}" 
                                 Margin="{StaticResource PhoneHorizontalMargin}" BorderThickness="0,0,0,0"
                                 Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding Foreground}">
                            <ContentPresenter 
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        Content="{TemplateBinding Content}"
                                        ContentTemplate="{TemplateBinding ContentTemplate}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# regex - 将数字更改为英文 Perl

> ID：15631988
> 
> 赞同：0
> 
> 时间：2013-03-26T07:55:33.017
> 
> 标签：regex, perl

Hye，你能检查我的脚本哪里是我的问题..对不起，我是 perl 的新手..我想从数字转换为英文单词，例如 1400 -> 1400 ......我已经用过

`Lingua::EN::Numbers qw(num2en num2en_ordinal);`

这是我的输入文件.txt

```
I have us dollar 1200 
```

并且输出应该是。“我有我们一千二百美元”

这是我的脚本

```
#!/usr/bin/perl

use utf8;
use Lingua::EN::Numbers qw(num2en num2en_ordinal);

if(! open(INPUT, '< snuker.txt'))
{
die "cannot opent input file: $!";
}

select OUTPUT;

while($lines = <INPUT>){

$lines =~ s/usd|USD|Usd|uSd|UsD/us dollar/g;
$lines =~ s/\$/dollar /g;
$lines =~ s/rm|RM|Rm|rM/ringgit malaysia /g;
$lines =~ s/\n/ /g; 
$lines =~ s/[[:punct:]]//g;
$lines =~ s/(\d+)/num2en($lines)/g; #this is where it should convert to english words
    print lc($lines); #print lower case
}

close INPUT;
close OUTPUT;
close STDOUT; 
```

我得到的输出是“ `i have us dollar num2en(i have us dollar 1200 )`”

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T08:07:03.607

`$1`您需要使用而不是在最后一个正则表达式中传递来引用捕获，在该正则表达式的末尾`$lines`还需要一个`e`标志，以便将其作为表达式进行评估。您可以使用`i`flag 来避免写入 [Uu][Ss][Dd]... 的所有组合：

```
while($lines = <INPUT>){
  $lines =~ s/usd/us dollar/ig;
  $lines =~ s/\$/dollar /g;
  $lines =~ s/rm/ringgit malaysia /ig;
  $lines =~ s/\n/ /g; 
  $lines =~ s/[[:punct:]]//g;
  $lines =~ s/(\d+)/num2en($1)/ge; #this is where it should convert to english words
  print lc($lines), "\n"; #print lower case
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T08:03:10.223

您缺少`e`正则表达式替换的修饰符：

```
$ echo foo 42 | perl -pe "s/(\d+)/\$1+1/g"
foo 42+1
$ echo foo 42 | perl -pe "s/(\d+)/\$1+1/ge"
foo 43 
```

见[man perlop](http://perldoc.perl.org/perlop.html)：

> 选项与 m// 一样，但添加了以下替换特定选项：
>         将右侧计算为表达式。

另外，您必须参考捕获的数字 ( `$1`)，而不是整个字符串 ( `$lines`)，但我想您已经掌握了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:02:54.193

这里的问题是您将正则表达式与函数混淆了。在您尝试进行转换的行中，您没有调用函数`num2en`；相反，您将数字替换为 text `num2en($line)`。这里给你一个建议：

```
($text, $number) = $lines =~ s/(.*)+(\d+); # split the line into a text part and a number part
print lc($text . num2en($number));         # print first the text, then the converted number; 
```

# html5-canvas - 如何为 HTML5 画布注册 onkeydown 事件

> ID：15631991
> 
> 赞同：6
> 
> 时间：2013-03-26T07:55:43.487
> 
> 标签：html5-canvas

我想用 HTML5`<canvas>`元素编写一个蛇游戏演示。我尝试注册 Keyboard(onkeydown) 事件，但它不起作用。

代码：

```
 canvas.onkeydown = divertDirection; //don't work
   //canvas.addEventListener("keydown", divertDirection, false);  //don't work

   //根据键盘来调振蛇移动的方向
   function divertDirection(ev) {
        console.log(ev);
    }

    //register this event for widnow
   window.addEventListener("keydown", divertDirection, false); //ok 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-11T01:28:50.273

正如 jing3142 所说，您不能在不是为它们设计的元素上监听键盘事件。

但是，您可以强制为它们设计元素。

```
canvas.tabIndex = 1000; 
```

现在您可以使用`canvas.addEventListener`键盘事件。

这比这更可取，`window.addEventListener`因为这样您就不会干扰页面上的任何其他元素，例如实际输入元素。

请注意，当画布具有焦点时，您可能会在某些浏览器中看到虚线轮廓。要删除它：

```
canvas.style.outline = "none"; 
```

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:49:37.990

如果 HTML 元素不是为文本输入而设计的，那么您不能为其设置 keydown 事件。

正如你所做的那样使用

```
window.addEventListener("keydown", divertDirection, false); 
```

然后使用divertDirection 函数来改变snake 对象的方向。如果您有不止一条蛇，则为每条蛇使用不同的密钥。

# android - Android导出签名的应用程序包错误

> ID：15631994
> 
> 赞同：10
> 
> 时间：2013-03-26T07:55:58.350
> 
> 标签：android, xml, api, export, apk

当我尝试为 google mao 导出签名的应用程序包时，我的 res/value/string.xml 文件出现此错误。我应该怎么办？

```
app_name" is not translated in af, am, ar, be, bg, ca, cs, da, de, el, en-rGB, es, es-rUS, et, fa, fi, fr, hi, hr, hu, in, it, iw, ja, ko, lt, lv, ms, nb, nl, pl, pt, pt-rPT, ro, ru, sk, sl, sr, sv, sw, th, tl, tr, uk, vi, zh-rCN, zh-rTW, zu
Issue: Checks for incomplete translations where not all strings are translated
Id: MissingTranslation
If an application has more than one locale, then all the strings declared in one language should also be translated in all other languages.
If the string should not be translated, you can add the attribute translatable="false" on the <string> element, or you can define all your non-translatable strings in a resource file called donottranslate.xml. Or, you can ignore the issue with a tools:ignore="MissingTranslation" attribute.
By default this detector allows regions of a language to just provide a subset of the strings and fall back to the standard language strings. You can require all regions to provide a full translation by setting the environment variable ANDROID_LINT_COMPLETE_REGIONS.
You can tell lint (and other tools) which language is the default language in your res/values/ folder by specifying tools:locale="languageCode" for the root <resources> element in your resource file. (The tools prefix refers to the namespace declaration http://schemas.android.com/tools.) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-08-08T10:43:33.893

在`"Window" > "Preferences" > "Android" > "Lint Error Checking"`：

转到`MissingTranslation`行，并将其设置为警告：

![在此处输入图像描述](../Images/cecf7cc0e1f68ff114ed0b52c354ccb6.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T08:06:57.513

尝试这个

转到 Eclipse -> 窗口选项卡 -> 首选项 -> Android -> Lint 错误检查 -> 取消选中完整的错误检查运行

可能会有所帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-02T09:22:22.507

在 string.xml 文件中只需添加`translatable="false"`到字符串。像这样

```
<string name="app_name" translatable="false">Example App</string> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-25T00:35:24.920

尽管所有其他答案都是正确的，但另一种选择是将`tools:ignore="MissingTranslation"`属性添加到 xml 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources
    xmlns:tools="http://schemas.android.com/tools"
    tools:ignore="MissingTranslation" >

    <!-- your strings here; no need now for the translatable attribute -->
</resources> 
```

我更喜欢这个，因为 a) 它不需要更改*每个*字符串值，并且 b) 它不是应用程序设置，因此可以将其签入 git。另一方面，如果错误出现在您没有写入权限的引用项目中，则无济于事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T13:14:25.213

只需将 string.xml 文件重命名为 donottranslate.xml。这可能会帮助你。

# unit-testing - 如何在不拥有数千台计算机的情况下测试社交应用程序的真实性能？

> ID：15631997
> 
> 赞同：0
> 
> 时间：2013-03-26T07:56:08.190
> 
> 标签：unit-testing, networking, testing, scalability, game-engine

我正在管理一个开放世界社交游戏的原型设计，该游戏应该替换存在扩展问题的服务器。我如何测试它在现实世界中的行为——也就是说，数百个客户端从不同的地方连接——而不需要数百个客户端连接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:27:53.587

除了（或结合使用）@PavelJanicek 提到的方法之外，您还可以手动限制应用程序可用的资源（内存、CPU 时隙和优先级）——这将允许应用程序以更少的用户达到其限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:22:18.473

有几个答案。

1.  专业的负载测试应用程序可以做到这一点。例如，请参阅[HP Load Runner](http://www8.hp.com/us/en/software-solutions/software.html?compURI=1175451&jumpid=reg_r1002_usen_c-001_title_r0001#.US-ZWDCnrp8)
2.  开源负载测试应用程序 - 请参阅[JMeter](http://jmeter.apache.org/)
3.  调整其他应用程序来做到这一点。在我自己的情况下，我使用的是[Selenium Grid](http://code.google.com/p/selenium/wiki/Grid2)，仅使用 10 台计算机，我就可以模拟 100 个不同的用户。

一般的答案是：如果您没有数百名真正的用户来进行真正的点击，您将不得不以某种方式编写用户行为脚本并从几台计算机并行运行这些脚本。