# StackOverflow 问答 14981000-14981999

# c# - 通过EntityFramework获取表的最新值

> ID：14981003
> 
> 赞同：17
> 
> 时间：2013-02-20T13:26:08.653
> 
> 标签：c#, entity-framework

我有一个包含多个字段的表，每个字段分别由单独的 ViewModel 更新，现在我想获取特定字段的最新值（可能它已在我的表的第五条记录中更新），好吗？现在我写的是这样的：

```
 public ViewResult ShowPiece()
        {
            var context = new SiteContext();
            var showPiece = context.Portraits.LastOrDefault();
            return View(showPiece);
        } 
```

但是当我运行应用程序并导航上面的操作时，我得到了错误：

LINQ to Entities 无法识别该方法，并且该方法无法转换为存储表达式...

那有什么问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-20T13:27:43.690

使用降序（按日期或 id）`FirstOrDefault`并且[支持](http://msdn.microsoft.com/en-us/library/bb738550.aspx)：

```
var showPiece = context.Portraits
                       .OrderByDescending(p => p.Date)
                       .FirstOrDefault(); 
```

* * *

另一种选择是通过子查询选择具有最大日期（id）的肖像（正如 Evelie 在评论中建议的那样）：

```
var showPiece = context.Portraits
              .FirstOrDefault(p => p.Date == context.Portraits.Max(x => x.Date)); 
```

我在这里做了一点调查。在第一种情况下（排序）生成以下查询：

```
SELECT TOP (1) [t0].*
FROM [Portraits] AS [t0]
ORDER BY [t0].[Date] DESC 
```

在第二种情况下（获得最大值）：

```
SELECT TOP (1) [t0].*
FROM [Portraits] AS [t0]
WHERE [t0].[Date] = ((
    SELECT MAX([t1].[Date])
    FROM [Portraits] AS [t1]
    )) 
```

执行计划几乎相同，但在第二种情况下，Top 执行了两次。因此，与索引扫描相比，Top 成本为 0%，这应该不是问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-06T19:54:34.063

尝试这样的事情：

```
var lastShowPieceId = context.Portraits.Max(x => x.Id);
return context.Portraits.FirstOrDefault(x => x.Id == lastShowPieceId); 
```

我有这种情况，这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:48:10.250

```
var s = con.Portraits.Where(j => j.Date.HasValue)
                  .OrderByDescending(a => a.Date)
                  .Select(p => p).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-11-02T14:42:30.087

我已经尝试了您在这里的所有回复。

但没有人真正工作过。

我的解决方案是：

```
 List<Portraits> portraitsList = db.Portraits.ToList();
        int idPortraits = portraitsList.Last().PortraitsId;
        portratisList.Remove(portratisList.Last());

        Portraits p = db.Mementos.Find(idPortraits); 
```

# java - 程序结束而不考虑 if 语句（编码初学者）

> ID：14981007
> 
> 赞同：1
> 
> 时间：2013-02-20T13:26:31.773
> 
> 标签：java, if-statement

我在这里遗漏了一些东西。我的程序在要求此人输入他们的服务包后结束。请原谅多余的代码，我是这方面的初学者，还没有学到比这更有效的方法。

```
import javax.swing.JOptionPane;

public class InternetSP
{
    public static void main(String[] args)
    {

        final double PACKA = 9.95, PACKB = 13.95, PACKC = 19.95;
        final int PACKAC = 2, PACKBC = 1;
        double chargecalc, entrycalc = 0;
        String entry, pack;

        pack = JOptionPane.showInputDialog(null, "Please enter your service" + " package (A,B or C)");
        if (pack == "A" || pack == "B")
        {
            entry = JOptionPane.showInputDialog(null, "Please enter your usage " + "hours.");
            entrycalc = Double.parseDouble(entry);
        }

        if (pack == "A")
        {
            if (entrycalc > 10)
            {
                chargecalc = (PACKA + (entrycalc * PACKAC));
                JOptionPane.showMessageDialog(null, "Your total charges are: $" + chargecalc);
            }
            else
            {
                JOptionPane.showMessageDialog(null, "Your total charge is: $" + PACKA);
            }
        }
        else if (pack == "B")
        {
            if (entrycalc > 20)
            {
                chargecalc = (PACKB + (entrycalc * PACKBC));
                JOptionPane.showMessageDialog(null, "Your total charges are:" + "$ " + chargecalc);
            }
            else
            {
                JOptionPane.showMessageDialog(null, "Your total charge is: $" + PACKB);
            }

        }
        else if (pack == "C")
        {
            JOptionPane.showMessageDialog(null, "Your total charge is:" + "$ " + PACKC);
        }

        System.exit(0);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:28:36.620

您应该尝试将您的字符串与[equals](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals(java.lang.Object))（或更好的[equalsIgnoreCase](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)）方法进行比较。

正如这里所解释的：[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)，在 java 中，“==”运算符检查两个变量是否指向同一个对象，而不是它们是否具有相同的值。

所以如果你写

```
String a1 = "A";
String a2 = "A"; 
```

然后

```
if (a1 == a2) {
  // This is not executed
}
if (a1.equals(a2)) {
  // This is executed
} 
```

这是一个重要的区别，它存在于每个对象中，但大多数人都被字符串欺骗了，因为它是您比较的第一个对象。

通常人们从比较数字开始，而在 Java 中，原始数字（int、long 等）可以与 == 进行比较，因为它们不是对象。

希望这会有所帮助，祝你好运！

# javascript - Highcharts：如何使曲线在可见视图之外水平开始？

> ID：14981011
> 
> 赞同：1
> 
> 时间：2013-02-20T13:26:47.270
> 
> 标签：javascript, highcharts

我试图弄清楚如何使曲线进入高图的可见视图之外。我得到了小提琴从底部[小提琴出现曲线（定义为](http://jsfiddle.net/F9cq6/)*区域*）的位置，但在我的情况下，我有 6 个月的时间一直可见和 yAxis 处的正常数值。`tickInterval: 30 * 24 * 3600 * 1000`

当我只有例如 1 个月的数据时，哪个点位于图表的中间是？

如果可能的话，点应该设置在可见视图之外，这样我就不能将鼠标悬停在它上面或选择它（因为我希望有真实点的工具提示）。

我想做这个的原因；是为了让空曲线看起来更好，我可以在大多数月份设置一个点，比如 30 到左边，但这对我的情况无效，因为它是可选的，它有标记和工具提示。（用户的数据错误）如果这是实现此目的的唯一方法，我可以在最左边添加数据点并禁用其标记和工具提示的解决方案也可能有效？（注意：我想为其余的点保留标记和工具提示。）有什么帮助吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:20:13.453

好的，我想我前一天过得很糟糕 - 我设法通过使用`min`和`max`值`xAxis`以及将虚拟值分配给曲线的两侧（*在服务器端生成*）来解决这个问题，这些值将被留在可见视图之外。

[这是小提琴](http://jsfiddle.net/bcD28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:09:39.650

您可以为 xAxis [http://jsfiddle.net/w9kED/使用反向参数](http://jsfiddle.net/w9kED/)

```
 reversed:true 
```

[http://api.highcharts.com/highcharts#xAxis.reversed](http://api.highcharts.com/highcharts#xAxis.reversed)

# java - 如何同时访问不同类的两种方法？

> ID：14981016
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:04.903
> 
> 标签：java, oop, methods, extends

在一次采访中，我被问到以下问题。

假设有一个类 A 有一个方法`drawShape()`，另一个类 B 有一个方法`drawSquare()`。

现在有第三个类 C 扩展了 A 和 B。

现在终于在我的课堂上 CI 想要这两种方法。

如何同时获得这两种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:34:44.900

不要因为 Java 不支持而扩展，而是可以使用接口：

```
interface IA{
   void drawshape();
}

inerface IB{
   void drawsquare();
}

class A implements IA{
    ...
}

class B implements IB{
    ...
}

class C implements IA,IB{
   private A a;
   private B b;

   void drawshape(){
     a.drawshape()
   } 

   void drawsquare(){
     b. drawsquare()
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:38:32.680

Java 不支持多类继承：一个类只能扩展另一个类。

相反，您可以使用 Composition（在您的类中包含类）来实现所要求的内容：

```
Class C {
    A a = new A();
    B b = new B();

    ...
} 
```

现在`C`可以通过`a.drawShape()`或访问任一方法`b.drawSquare()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:29:28.883

`Now there is a third class C that extends both A and B`

在 Java 中，您不能扩展到多个类。

如果您愿意，您可以将 B 扩展到 A，然后将 C 扩展到 B，这样您应该能够访问这两种方法

# iphone - 从图像中检测覆盖文本的颜色

> ID：14981020
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:15.323
> 
> 标签：iphone, objective-c, xcode, uiimage, detection

我正在寻找一些类别/子类来检测覆盖文本（UILabel）的颜色，因此文本可以阅读。

有什么建议吗？

谢谢，

# jquery - jQuery 动态创建带有 ID 的元素：如果元素已经存在会怎样？

> ID：14981029
> 
> 赞同：2
> 
> 时间：2013-02-20T13:27:29.080
> 
> 标签：jquery

```
 var myWindow = $("<div id='msgwindow'/>").someWidget({
      option1: true,
      option2: someVariableWhoseValueChanges
     }); 
```

如果上面的代码多次执行会发生什么？id 为 #msgwindow 的元素是否被完全或部分覆盖？它是先销毁然后重新创建的吗？是否有前一个实例留下的痕迹？任何事件侦听器会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:41:38.733

该元素**不会被过度使用**。简单地说，将在 DOM 中创建另一个具有相同 ID 的元素。

据我所知，事件侦听器（例如）`$("body").on("click", "#msgWindow"`只会**在与 DOM 中的 ID 匹配的元素的第一个实例上触发**。

你不应该在一个文档中有多个 ID，这是不好的做法，考虑使用一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:40:29.987

您问题中的代码不适`someWidget()`用于现有元素。它创建一个新`<div>`元素并将小部件应用于该新元素（这可能会或可能不会导致将元素附加到页面的`<body>`，具体取决于小部件）。

因此，多次运行此代码将导致创建多个元素并可能将其添加到 DOM 中。由于所有这些元素将共享相同的`id`属性，这将使您的文档无效。

# c# - 使用 C# 的 Windows phone 7.5 appName.dll 中发生“System.InvalidCastException”类型的未处理异常

> ID：14981031
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:29.913
> 
> 标签：c#, windows-phone-7

有谁知道投射 itemCollection.GetEnumerator() 的正确方法？

由于某些原因，返回 itemCollection.GetEnumerator(); 在 windows phone 8 中工作正常，但在 windows phone 7.5 中不起作用它要求我明确地投射它，但我不确定什么是正确的方法。有人知道吗？

```
public class ItemCollection : IEnumerable<Object>
{
    private System.Collections.ObjectModel.ObservableCollection<Item> itemCollection = new System.Collections.ObjectModel.ObservableCollection<Item>();

    public IEnumerator<Object> GetEnumerator()
    {
        //return itemCollection.GetEnumerator();
        IEnumerator<Object> test = (IEnumerator<Object>)itemCollection.GetEnumerator();

        return test;
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(Item item)
    {
        itemCollection.Add(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:42:47.453

也，试试这个

```
return itemCollection.Cast<object>() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:38:18.180

我不确定，但试试这个

```
IEnumerator<Object> test = new IEnumerator<Object>(itemCollection.GetEnumerator()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:51:18.983

嗯，我不清楚你为什么要这样做：这样做不是更好吗：

```
public class ItemCollection : System.Collections.ObjectModel.ObservableCollection<Item>
{
} 
```

# vim - 按下“Del”时不要将字符放入 yank 缓冲区

> ID：14981032
> 
> 赞同：5
> 
> 时间：2013-02-20T13:27:31.437
> 
> 标签：vim

在正常模式下删除一个字符`Del`并将其放置在 yank 缓冲区中。如何更改此行为以保持缓冲区不变？`d`例如，在使用命令时可以将其拉到黑洞缓冲区中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:32:13.230

您可以使用 更改 yank 缓冲区`"<character>`。“黑洞”缓冲区是`_`，因此您想要的命令将是`"_d`等。请注意，这是每次删除（猛拉等）。

您可以在默认情况下创建一个简单的快捷`.vimrc`方式`Del`。

```
nnoremap <Del> "_x 
```

# php - 如何在我的数组中的最新日期之后排序？

> ID：14981033
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:34.307
> 
> 标签：php, arrays

如何在我的数组中的最新日期之后排序？

这是我的数组（$testarray）的输出：

```
Array ( 
[0] => Array ( [created] => 16-02-13 20:41:56 [restaurant_id] => 64324 [title] => Café Blabla [city] => State K ) 
[1] => Array ( [created] => 19-02-13 13:42:14 [restaurant_id] => 42132 [title] => Chicos Blabla [city] => State K ) 
[2] => Array ( [created] => 17-02-13 19:41:30 [restaurant_id] => 51242 [title] => Restaurant Blabla  [city] => State K ) 
[3] => Array ( [created] => 18-02-13 16:42:12 [restaurant_id] => 64342 [title] => Couloir Blabla [city] => State S ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:29:23.070

试试这个 ：

```
<?php

$arr=your array;

$sort = array();
foreach($arr as $k=>$v) {
    $sort['created'][$k] = $v['created'];

}

array_multisort($sort['created'], SORT_DESC, $arr);

echo "<pre>";
print_r($arr);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:30:26.417

您可以使用`asort()`or对数组进行排序`ksort()`。

你可以在这里学习

```
http://php.net/manual/en/array.sorting.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:31:54.780

[`usort`](http://www.php.net/usort)允许您通过提供函数回调基于自定义方法进行排序：

```
// Sorts two array elements based on the value of the
// `[created]` element.
function SortByDateCreatedDate($x,$y){
  $xd = $x['created']; //or if they're strings:*/ strtotime($x['created']);
  $yd = $y['created']; //or if they're strings:*/ strtotime($y['created']);
  return $xd > $yd ? 1
    : $yd > $xd ? -1
    : 0;
}

$testarray = /*...*/;
usort($testarray, 'SortByCreatedDate'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:56:12.087

```
<?php

$dts = array_map(function($x) { $x['created']; }, $array);
$max = max($dts);
$idx = array_search($max, $dts);
$do_not_sort = array_slice($array, 0, $idx);
$do_sort = array_slice($array, $idx);

function cmp($x, $y) {
    $a = $x['created'];
    $b = $y['created'];
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

uasort($do_sort, 'cmp');
$sorted[] = $do_not_sort;
$sorted[] = $do_sort;

?> 
```

# c++ - 使用 libmxml 库解析 XML

> ID：14981039
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:53.167
> 
> 标签：c++, xml

我想解析一个 XML 字符串。我在 mxml 库中使用。

如果这是我的 xml 字符串

```
<root>
 <name1>1</name1>
 <name2>2</name2>
 <name3>3</name3>
</root> 
```

比我想打印

名称1:1

名称2:2

名称3:3

我找不到一个好的文档来迭代一个简单的 XML。
这是我到目前为止得到的代码。

```
#include <mxml.h>
using namespace std;

int main ()
{
  char buffer[8192] = "<x><a>111</a><w>qqq</w><z>112</z></x>";
  mxml_node_t *tree;

  tree = mxmlLoadString(NULL, buffer,MXML_TEXT_CALLBACK);

} 
```

谁能帮我继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:12:40.630

所以这就是我从文档中得到的。没试过运行它。

[http://www.minixml.org/documentation.php/basics.html](http://www.minixml.org/documentation.php/basics.html)

```
mxml_node_t *node;

for (node = mxmlWalkNext(tree, tree, MXML_DESCEND_FIRST);
     node != NULL;
     node = mxmlWalkNext(node, tree, MXML_DESCEND_FIRST)) {

   cout << node->mxmlGetElement(node) << ":" << mxmlGetText(node) << endl;
} 
```

# html - 具有绝对位置的 div 交叉悬停菜单

> ID：14981040
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:54.223
> 
> 标签：html, css

我有两个主要的 div

```
<div1>menu</div1>
<div2>searchbox</div2> 
```

由于下面的 div2，我无法在悬停时显示子菜单；`div2=div.searchcontainertop`具有绝对位置，该 div 位于悬停子菜单的顶部，这使得无法在悬停时显示子菜单
我试过，firefox，chrome，opera，IE10 - [jsfiddle](http://jsfiddle.net/lolipop/Uy3X9/)

如何显示子菜单？

```
<style type="text/css">
<!--
.searchcontainermain {
    width: 100%;
    position: relative;
}
.searchcontainertop {
    width: 100%;
    position: absolute;
    left: 0px;
    top: 0px;
}
.searchcontainerleft {
    float: right;
    width: 400px;
    padding-right: 1%;
}
#nav, #nav ul {
    width: 100%;
    height: 28px;
    list-style: none;
    margin: 0;
    padding: 0;
    background: none;
    font: 12px/28px Verdana, Arial, Helvetica, sans-serif;
}
#nav li {
    float: left;
    position: relative;
}
#nav li:hover, #nav li.jshover {
    background-color: none;
}
#nav a {
    font-weight: bold;
    display: block;
    color: #000;
    padding: 0 19px;
    text-align: center;
    text-decoration: none;
    border-right: 1px solid #999;
}
#nav a:hover {
    color: #000;
}
#nav ul {
    border: none;
    border-top: 0;
    border-bottom: 0;
    display: none;
    position: absolute;
    top: 28px;
    left: 0;
}
#nav ul a {
    border: 0;
    border-bottom: 1px solid #000;
    width: 114px;
}
#nav li:hover ul, #nav li.jshover ul {
    display: block;
}
-->
</style>

<div id="conteiner">
  <div id="main">
    <div id="menu">
      <ul id="nav">
        <li><a href="" target="_self">menu1</a></li>
        <li><a class="active" href="" target="_self">menu2</a>
          <ul>
            <li><a href="" target="_self">submenu1</a></li>
            <li><a href="" target="_self">submenu2</a></li>
            <li><a href="" target="_self">submenu3</a></li>
            <li><a href="" target="_self">submenu4</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="searchcontainermain">
      <div class="searchcontainertop">
        <div class="searchcontainerleft"> some text goes here<br />
          some text goes here<br />
          some text goes here<br />
          some text goes here<br />
          some text goes here<br />
        </div>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:15:12.993

给出`.nav ul`1 或更大的 z-index 似乎有效。

为了避免 IE7 中本地堆栈上下文出现明显问题，我添加了以下新 CSS 规则：

```
#menu {
    position:relative;
    z-index:1;
} 
```

[更新了演示](http://jsfiddle.net/Matt_Coughlin/D6tax/3/)（使用背景颜色使分层更加明显）。如果在 IE8 及更早版本中运行 jsfiddle 时出现问题，请使用此[独立链接](http://fiddle.jshell.net/Matt_Coughlin/D6tax/3/show/)。测试于：IE7/8/9、FF、Chrome、Safari、Opera。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:09:05.277

送给

```
.searchcontainertop {
    z-index: -1;
} 
```

它对我有用。

# javascript - 在 JavaScript 中访问函数的闭包

> ID：14981042
> 
> 赞同：0
> 
> 时间：2013-02-20T13:27:57.770
> 
> 标签：javascript

给定 Chrome 或 Firefox 中的函数对象，我如何（如果可以的话）读取函数闭包中捕获的变量？

如果我在控制台中打印一个对象，Chrome 开发工具可以让我检查闭包，所以应该有一个调试 API，我想从脚本中使用它。这不是生产代码，所以如果需要，我可以将浏览器置于某种“调试模式”。

# html - 根据图像大小调整文本大小

> ID：14981049
> 
> 赞同：1
> 
> 时间：2013-02-20T13:28:14.830
> 
> 标签：html, css

我有一张图片和下面的一段文字。我正在尝试使图像的文本宽度的最大宽度。（图像的大小未定义，父 div 的大小也未定义）

```
<div>
  <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/NYers_celebrate_historic_vote_for_gay_marriage.webm/300px--NYers_celebrate_historic_vote_for_gay_marriage.webm.jpg"/>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non risus dolor, a euismod leo. Phasellus viverra aliquet felis eget porttitor. Aenean sollicitudin, nulla id ultrices ullamcorper, sem lectus sagittis metus, ut sodales dui nunc id sem. Vestibulum nisl justo, aliquet id luctus eu, tincidunt sit amet diam. Suspendisse at nulla nisl. Duis sed sapien odio, eget commodo metus. Fusce ultricies lectus sit amet massa tristique eu ultricies elit accumsan. Donec mi mi, elementum sit amet faucibus sed, pellentesque sed neque. Pellentesque ut tincidunt dui. Nullam in urna vitae arcu lobortis porta sit amet a sapien. Maecenas at ultricies erat. Maecenas diam arcu, condimentum eu gravida quis, aliquam at nunc. Duis at fermentum orci. Donec porta feugiat purus faucibus euismod. In pretium auctor nulla, blandit dapibus ante auctor at.</p>
</div> 
```

我画了一个快速模型以便更好地理解 -![在此处输入图像描述](../Images/bb969177be88733cf850e08b2f184662.png)

Codepen - [http://codepen.io/anon/pen/kJLrF](http://codepen.io/anon/pen/kJLrF)

有什么方法可以实现吗？（不需要这样的标记，如果需要可以添加更多元素）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:37:05.370

您需要将它们包装在另一个`div`元素中，设置其 max-width 属性，然后为图像定义 100% 宽度，如下所示：

```
div {
    max-width: 500px;
}

div img {
    width: 100%;
} 
```

请看这个 jsFiddle 演示 > [http://jsfiddle.net/Vt9CL/](http://jsfiddle.net/Vt9CL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:27:13.687

我已经玩了一点，我设法做到了`html`and `css`: html:

```
<div class="container">
   <img src="http://dummyimage.com/300x200/000/fff&text=image" />
   <p>Lorem ipsum [...]</p>
</div> 
```

CSS：

```
.container {
   margin: 0 auto;
   width: -moz-min-content;
   width: -webkit-min-content;
} 
```

**[小提琴](http://jsfiddle.net/BvrLe/1/)**

问题是它只适用于 Firefox 和 chrome。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:40:37.710

如果您坚持自己构建的结构，那么 JS 是唯一的选择。

```
$(init);

function init()
{
  var w = $("img").innerWidth();
  $('p').css({"width": w});
} 
```

[http://jsbin.com/ikunix/1/](http://jsbin.com/ikunix/1/)

不过，将图像和段落文本包装在另一个容器中会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:42:40.633

您可以使用这个小脚本完成此操作：

```
$('p').css('width',$('img').width() + 'px'); 
```

它采用`width`of the`img`并将其应用于`width`of `p`。这是[jsFiddle](http://jsfiddle.net/xeaxL/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:49:15.990

嗯，我不知道是否可以通过 css 做到这一点。如果你想在没有 javascript 的情况下完成这项工作，我唯一知道的是这样的：http: [//goo.gl/U3pBE](http://goo.gl/U3pBE)

# java - JDBC MySQL存储过程抛出异常“参数号2不是OUT参数”？

> ID：14981050
> 
> 赞同：2
> 
> 时间：2013-02-20T13:28:16.793
> 
> 标签：java, mysql, jdbc

我有这个代码片段：

```
final String adatbazisURL = "jdbc:mysql://localhost:3306";
Connection kapcsolat = null;
Statement utasitas = null;

try {
    Class.forName("com.mysql.jdbc.Driver");
    kapcsolat = DriverManager.getConnection(adatbazisURL, felhNev,
            jelszo);
    utasitas = kapcsolat.createStatement();
    String sql = "USE"+Azonositok.getAdatbazisNev()+";";
    utasitas.executeUpdate(sql);
} catch (Exception e) {
    e.printStackTrace();
    throw new RuntimeException(e);
}

String sql = "DROP PROCEDURE IF EXISTS proba ;";
utasitas.executeUpdate(sql);

sql = "CREATE PROCEDURE proba (" + "IN number1 INTEGER, "
        + "OUT number2 INTEGER) " + "BEGIN " +

        "SET number2 = number1;" + "END";
utasitas.execute(sql);
CallableStatement callableStatement = null;

String callString = "{CALL proba(?,?)}";

callableStatement = kapcsolat.prepareCall(callString);
callableStatement.setInt(1, 5);
callableStatement.registerOutParameter(2, java.sql.Types.INTEGER);

callableStatement.execute();

int number = callableStatement.getInt(2);

callableStatement.close(); 
```

当我运行此代码时，它会抛出“参数号 2 不是 OUT 参数”异常。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:24:21.723

问题是这样的：

```
String sql = "USE"+Azonositok.getAdatbazisNev()+";";
utasitas.executeUpdate(sql); 
```

执行后的所有语句似乎都没有设置使用上下文。无需运行 SQL 来更改架构，而是将其直接附加到 JDBC URL：

```
final String adatbazisURL = 
    "jdbc:mysql://localhost:3306/" +
    Azonositok.getAdatbazisNev().trim(); 
```

或者，您可以在执行它们之前将模式添加到您的过程名称。

# c - C：链表打印垃圾字符

> ID：14981057
> 
> 赞同：0
> 
> 时间：2013-02-20T13:28:30.350
> 
> 标签：c

这是我编写的一段代码，它在链接列表中添加了人员的姓名。当我尝试显示这些姓名时遇到了问题。我的代码不是打印姓名，而是打印垃圾字符代码...

```
struct node
{
 char name1[5];
 struct node *link;
};

void add(struct node **q,char *name)
{
 struct node *temp,*r;
 if(*q==NULL)
 {
             temp=malloc(sizeof(struct node));
             *temp->name1=name;
             temp->link=NULL;
             *q=temp;
             count++;
 }
 else
 {
     count++;
     temp=*q;
     while(temp->link !=NULL)
     temp=temp->link;

     r=malloc(sizeof(struct node));
     *r->name1=name;
     r->link=NULL;
     temp->link=r;
 }    

} 

void display(struct node *q)
{
    while(q!=NULL)
     {
      printf("%s",q->name1);  //it prints junk characters
      q=q->link;
      }                   

}     
int main()
{
    struct node *p;
    p=NULL;

    add(&p,"Alice");
    add(&p,"Cat");
    add(&p,"Pawan");
    add(&p,"BoB");

    display(p);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:30:15.610

这个：

```
*temp->name1=name; 
```

根本不符合您的期望。它将`name`字符串的地址转换为字符，并将第一个字符设置`temp1->name1`为该值。

这种错误的转换应该产生编译器警告：确保启用编译器能够发出的所有警告，并*修复*它们。

要更正代码，您需要实际复制字符串数据：

```
strcpy(temp->name1, name); 
```

请注意，如果`name`长度超过`name1`支持，即超过 4 个字符加上终止 0 字符，这是非常危险的。您可以使用以下方法使其更安全：

```
strlcpy(temp->name1, name, sizeof temp->name1); 
```

如果你有它，或者

```
snprintf(temp->name1, sizeof temp->name1, "%s", name); 
```

如果你有那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:31:50.237

你`char name1[5]`的数组太小了。由于终止 NUL，“Alice”是 6 个字符，但您的数组只有 5 个字符，导致 C 语言中的**未定义行为**。正如 unwind 指出的那样，还有一个额外的取消引用错误，`*temp->name1`其中可能应该是`temp->name1`.

# javascript - 将此悬停效果更改为淡出？

> ID：14981059
> 
> 赞同：0
> 
> 时间：2013-02-20T13:28:33.370
> 
> 标签：javascript, html, hover

我有这个脚本可以更改图像源 onmouseover/onmouseout。我现在添加了一些新元素，我想做同样的事情，但也会淡出，而不是立即更改图像源。有人可以给我一个提示，甚至可以更改我的代码吗？我会很感激的！

Javascript：

```
 d004on = new Image(100, 100);
    d004on.src = "images/catalog/dus004_h.png";

    d004off = new Image(100, 100);
    d004off.src = "images/catalog/dus004.png";

}

function change(imgName) {
    if (document.images) {
        imgOn = eval(imgName + "on.src");
        document[imgName].src = imgOn;
    }
}

function changeback(imgName) {
    if (document.images) {
        imgOff = eval(imgName + "off.src");
        document[imgName].src = imgOff;
    }
} 
```

HTML：

```
<img src="images/catalog/dus004.png" alt="dus004" onMouseover="change('d004')" onMouseout="changeback('d004')"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:48:50.117

在 jquery 中很容易

html

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<span>Click here...</span>
<div id="one"></div>
<div id="two"></div>
<div id="three"></div>
</body>
</html> 
```

css

```
span { color:red; cursor:pointer; }
div { margin:3px; width:80px; display:none;
height:80px; float:left; }
div#one { background:#f00; }
div#two { background:#0f0; }
div#three { background:#00f; } 
```

jQuery

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>

   $(document.body).mouseenter(function () {
   $("div:hidden:first").fadeIn("slow");
   }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T13:36:45.170

首先摆脱这个邪恶的 eval 东西 ;) 第二个 jQuery 有一些不错的动画功能......你可以使用 jQuery 吗？ [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

像这样的东西？ [http://jsbin.com/ewijam/1/edit](http://jsbin.com/ewijam/1/edit)

哦，顺便说一句，谢谢你不喜欢试图帮助的人^^

# web-services - 用于 URL 的 JMeter + XML 解析

> ID：14981062
> 
> 赞同：2
> 
> 时间：2013-02-20T13:28:36.630
> 
> 标签：web-services, testing, jmeter

我正在使用 JMeter 对一个轻量级 Web 应用程序进行负载测试。

我需要访问一个返回大型 XML 文件的 Web 服务。然后我需要通过这个 XML 并在其中一个分支中获取 URL。这些然后用于下载媒体文件。

XML 只是与搜索条件匹配的视频文件列表。Web 服务基于 WCF，并以`url.com\name.svc`.

所以一步一步：

1.  点击 Web 服务获取 XML；
2.  从 XML 中解析 URL；
3.  遍历这些 URL 下载文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T20:55:43.987

假设您可以在您的场景中组合和使用以下组件：

*   [HTTP 请求](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)访问您的 Web 服务，然后向提取的 URL 发送请求；
*   [XPath_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)从 xml-response 中提取所有必需的元素（您必须正确的 XPath 查询才能在此后处理器中使用）；
*   [ForEach 控制器](http://jmeter.apache.org/usermanual/component_reference.html#ForEach_Controller)迭代提取的 URL；
*   [将响应保存到文件](http://jmeter.apache.org/usermanual/component_reference.html#Save_Responses_to_a_file)侦听器以根据请求的 URL 保存文件。

您的架构可能如下所示：

```
**Thread Group**
    ...
    **HTTP Request**                   // request to hit your web-service
        **XPath Extractor**
        Reference Name: testURL
        XPath query: ...
        Default value: NOT_FOUND
    **Foreach Controller**
    Input variable prefix: testURL
    Output variable name: url
    Add "_" before number? True
        **HTTP Sampler**              // request to download files per extracted urls
        Path: ${url}
            **Save Responses to a file**
        ...
    ... 
```

# javascript - How to compile Python with Brython to Javascript (to run with nodejs)?

> ID：14981069
> 
> 赞同：8
> 
> 时间：2013-02-20T13:29:06.650
> 
> 标签：javascript, python, node.js, brython

How can I use [Brython](https://www.brython.info/) to compile Python to Javascript? I want to do this on my computer, so I can the run Javascript with nodejs, eg.

```
$ python hello.py
Hello world
$ brython hello.py -o hello.js
$ node hello.js
Hello world 
```

The examples on the Brython website only explain how do this in the browser [http://www.brython.info/index_en.html](http://www.brython.info/index_en.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T13:45:34.360

It seems they are very browser oriented, there is no command line option out of the box.

You can try to use their code youself from node.js, perhaps it will work easily. It seems the `$py2js(src, module)` function does the actual conversion so maybe you can just run it with the python code string as first parameter.

Another option is to use pyjs: [http://pyjs.org/](http://pyjs.org/) which does something similar and has command line tool to do the conversion.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-07T20:00:42.880

It is possible to compile Python code to javascript and load it afterwards using import statement . See [brython:ticket:222](https://github.com/brython-dev/brython/issues/222) for further details. You'll have to load brython js lib in advance because , in the end, Python semantics are quite different from Javascript's . You can include compiled .pyc.js code in .vfs.js files in order to speed up module import times.

Disclaimer : I'm a committer of Brython project .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T13:41:07.823

Brython has a console that runs in the browser, but not a compiler. It is meant for you to either import your python scripts into the html file, or write your python code into the html file. See pyjs if you wish a conversion tool before the page loads.

# c# - 为什么/何时可能 StorageFolder.CreateFolderAsync 失败？

> ID：14981071
> 
> 赞同：3
> 
> 时间：2013-02-20T13:29:18.943
> 
> 标签：c#, .net, windows-store-apps, storagefolder

文档[`StorageFolder.CreateFolderAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/br227257.aspx)说：“如果您尝试在库或文件组等虚拟文件夹中创建子文件夹，则此方法可能会失败”。仅此而已，不再赘述。

有没有人对这个问题有更深入的了解或经验？为什么/何时/在什么情况下创建会失败？“失败”是什么意思？抛出异常（哪一个）？无声的失败？

# php - Magento 按管理员顺序加载类别

> ID：14981076
> 
> 赞同：2
> 
> 时间：2013-02-20T13:29:29.290
> 
> 标签：php, magento, plugins

我正在尝试以与管理面板中相同的顺序加载标记为包含在 Magento 导航中的所有类别，以构建自定义分层菜单（我们将输出与存储在数据库到其他页面）。

到目前为止，这是我在生成菜单的函数中使用的：

```
private function generateCategories() {

    $_root_category_id = Mage::app()->getWebsite(true)->getDefaultStore()->getRootCategoryId();

    $_current_children = Mage::getModel('catalog/category')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addIsActiveFilter()
        ->addLevelFilter(2)
        ->addOrderField('position', 'asc');

    $i = 0;

    $html = '';

    foreach( $_current_children as $l0 ) {
        if ($l0->getID() != $_root_category_id && $l0->getName() != '' && $l0->getIncludeInMenu())  {

            $i++;

            if (Mage::helper('core/url')->getCurrentUrl() == $l0->getURL())
                $active = ' active';
            else
                $active = '';

            if ($l0->hasChildren())
                $parent = ' parent';
            else
                $parent = '';

            $html .= '<li class=" level0' . $active . $parent . '"><a href="' . $l0->getURL() . '" class="top">' . $l0->getName() . '</a>';

            if ($l0->hasChildren()) {
                $multiplier = 1;
                $iteration = 0;

                $level1 = '';
                $level1[] = '';

                foreach ( explode(',', $l0->getChildren()) as $l1 ) {

                    $l1 = Mage::getModel('catalog/category')->load($l1);

                    if ( $l1->getIncludeInMenu() ) {

                        if (Mage::helper('core/url')->getCurrentUrl() == $l1->getURL())
                            $active = ' active';
                        else
                            $active = '';

                        if ($iteration == $this->perColumn) {
                            $iteration = 0;
                            $multiplier++;
                        }

                        $iteration++;

                        $level1[] = '<span class="level1' . $active . '"><a href="' . $l1->getURL() . '" title="' . $l1->getName() . '">' . $l1->getName() . '</a></span>';
                    }
                }

                unset($level1[0]);

                $numLinks = count($level1);
                $columns = $numLinks / $this->perColumn;

                $html .= '<div class="border-cover"></div><div class="dropdown" style="width: ' . $this->colWidth * $multiplier . 'em;">';

                $used = 0;
                $iteration = 0;

                foreach( $level1 as $link ) {
                    $used++;
                    $iteration++;

                    if ($used == 1)
                        $html .= '<div class="col" style="float: left; width: ' . $this->colWidth . 'em;">';

                    $html .= $link;

                    if ($used == 4 || $iteration == $numLinks) {
                        $html .= '</div>';
                        $used = 0;
                    }
                }

                $html .= '</div>';
            }

            $html .= '</li>';
        }
    }

    return $html;

} 
```

我的印象是`->addOrderField('position', 'asc')`应该将类别过滤到与管理面板中相同的顺序，但这仅适用于第一级 ( `$l0`) 类别，不适用于子类别。

任何人都可以建议如何修改它以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:16:42.757

尝试使用函数 getChildrenCategories() 而不是 getChildren 这将返回一个对象而不是类别的 id，因此您不需要加载信息。

更多信息可以在[更改 Magento 子类别的排序顺序中找到](https://stackoverflow.com/questions/14898819/change-sort-order-of-magento-subcategories)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T09:32:29.577

$subcategories = Mage::getModel('catalog/category')->getCollection()
->addAttributeToSelect('name')
->addFieldToFilter('parent_id', $categoryId)
->addAttributeToSort('name', ASC);
?>

# oracle - 在 WHERE IN 子句中使用 CASE

> ID：14981082
> 
> 赞同：2
> 
> 时间：2013-02-20T13:29:46.773
> 
> 标签：oracle, case, where-clause

我正在尝试根据 IN 参数制定 WHERE 子句。出于这个原因，我正在做一些关于在 WHERE IN 子句中使用 CASE 的实验。以下是正常工作：

```
SELECT * FROM TABLE1 WHERE COL1 IN (SELECT ID FROM TABLE2); 
```

考虑我有一个名为 P1 的输入参数。类型不是必需的。如果 P1 的值为空，则以下一个也可以正常工作：

```
SELECT * FROM TABLE1 WHERE COL1 IN (CASE P1 WHEN NULL THEN COL1 ELSE (SELECT ID FROM TABLE2)); 
```

但是如果 P1 不是 NULL 我得到

> ORA-01427: 单行子查询返回多于一行

错误。

如果你想知道我为什么需要这个，让我快速解释一下。存储过程将接受许多输入参数。其中一些将是用户定义的集合类型。并且所有参数都是可选的，带有 DEFAULT NULL 值。所以我想检查一个参数是否为NULL，如果是这样，那么将与参数对应的列与自身进行比较（这意味着该列上没有过滤器），否则用参数内的值过滤列。我尝试的方式有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:31:02.930

您`ELSE`包含`SELECT`返回多行的 a。

相反，您可以在测试 IN 之前测试 NULL：

```
SELECT * FROM TABLE1 WHERE (P1 IS NULL) OR (COL1 IN (SELECT ID FROM TABLE2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:33:18.443

由于`COL1 IN (COL1)`与 相同`true`，因此您可以像这样重写您的查询：

```
SELECT *
FROM TABLE1
WHERE P1 IS NULL OR COL1 IN (SELECT ID FROM TABLE2); 
```

一般来说，`CASE/WHEN/END`从句只能用在 a 的“投影”部分`SELECT`；您需要在`WHERE`子句中使用“常规”布尔表达式。

# php - 使用 htaccess 获取 URL 中的变量

> ID：14981085
> 
> 赞同：0
> 
> 时间：2013-02-20T13:29:55.340
> 
> 标签：php, .htaccess

我需要在写[http://www.mysite.com/username](http://www.mysite.com/username)时 将用户名作为参数发送到 index.php

例如：[http ://www.mysite.com/index.php?user=username](http://www.mysite.com/index.php?user=username)

我该如何使用htaccess？你有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:32:55.290

请像这样在您的 htaccess 中编写规则：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9-/]+)$ index.php?uniqname=$1 [QSA]
RewriteRule ^([a-zA-Z0-9-/]+)/$ index.php?uniqname=$1 [QSA] 
```

要添加文件夹，请使用此

```
RewriteEngine On
RewriteRule ^avatars/([a-zA-Z0-9-/]+)$ index.php?uniqname=$1 [QSA]
RewriteRule ^avatars/([a-zA-Z0-9-/]+)/$ index.php?uniqname=$1 [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:37:53.940

那么您希望能够读取所请求页面的 PHP 中的*用户名变量吗？*

在 PHP 中你会这样做，这是最基本的形式

```
 <?php echo $_GET['username']; ?> // That will print the variable value on the page 
```

重要的。如果您使用它来获取或编辑数据库中的数据，则需要首先清理或[清理该变量](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)以防止 SQL 注入攻击。一个粗略的例子就是这样

```
 <?php 
    $username = mysql_real_escape_string($_GET['username'];
    echo $username;
    ?> 
```

您可能还希望更多地阅读[PHP GET 和 POST 变量。](http://www.tizag.com/phpT/postget.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:43:25.697

您可以使用以下 RewriteRules：

```
//Only one parameter that defines username
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?username=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?username=$1

//If you need second parameter or a number only parameter
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)/([0-9]+)$ index.php?username=$1&paramnumber=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?username=$1&paramstring=$2 
```

# macos - 如何使 Intellij jetty 运行配置在 JDK7 (OS X) 上运行

> ID：14981087
> 
> 赞同：1
> 
> 时间：2013-02-20T13:29:58.543
> 
> 标签：macos, intellij-idea, jetty, java-7

我在 Apple JDK6 旁边安装了 oracle 的 JDK 7。JDK 7 在 IntelliJ (12.x) 中注册，我的项目设置为 JDK7。

我创建了一个码头运行配置，但似乎他正在针对 JDK6 运行码头服务器。当然这给出了一个： org/eclipse/jetty/start/Main : Unsupported major.minor version 51.0 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:47:53.897

在 Project Settings > Project 下将项目 SDK 设置为正确的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:46:24.333

如果上述解决方案不起作用，请尝试运行配置 -> JRE -> 选择执行环境 -> JavaSE-1.7

# php - 检查一个数组是否可以放入另一个数组

> ID：14981088
> 
> 赞同：0
> 
> 时间：2013-02-20T13:30:00.613
> 
> 标签：php, arrays, algorithm

我正在编写一个 PHP 脚本来创建一个 arduino“俄罗斯方块时钟”。我想生成一系列块俄罗斯方块来显示一个数字。

我的数字数组（以“0”为例）：（格式化显示）

```
1 1 1 1 1 1
1 1 1 1 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 1 1 1 1
1 1 1 1 1 1 
```

在哪里 ：

```
1 = must be filled
0 = empty
2 = informed (after check if block can be put) 
```

现在我有俄罗斯方块数组，像这样：

```
0 0 0 0
0 0 0 0
0 0 0 0
1 1 1 1 
```

或者

```
1 0 0 0
1 0 0 0
1 0 0 0
1 0 0 0 
```

我想检查是否可以**将我的俄罗斯方块块放入数字数组**中。

例如。：放置第一个块后，我会得到以下数组：（它是一个“T”块）

```
1 1 1 1 1 1
1 1 1 1 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 2 1 1 1 1
2 2 2 1 1 1 
```

起初我尝试将表格按行和列切割以查看它是否与我的块对应，并且我进行了很多更改但没有成功。

你可以看到我的两个测试脚本： http: [//pastebin.com/znnmvT4g](http://pastebin.com/znnmvT4g)和[http://pastebin.com/D9h51Xw3](http://pastebin.com/D9h51Xw3)

如果出现错误或无法解析数字，我将保留历史添加以使用回溯。

因此，我首先会检查我的 blocka 阵列是否可以添加到我的数字阵列中。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:26:36.383

将您的俄罗斯方块块放置在与数字数组大小完全相同的数组中，并仅用零围绕它来定义它在棋盘上的位置。（注意我用 2 而不是 1，这将在后面解释）

```
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
2 2 2 2 0 0 
```

然后将所有现有数组值添加到另一个数组中的相应值。

```
1 1 1 1 1 1
1 1 1 1 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 3 1 1 1 1
5 5 5 3 1 1 
```

检查结果数组是否包含 5。如果包含，则俄罗斯方块块无法放置在该位置，因为那里已经有一个块。

还要检查是否没有 2。如果是这样，则不应填充的空间被填充。（这就是为什么你应该使用 2 而不是 1）。

```
1 1 1 1 1 1
1 1 1 1 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
3 3 2 2 1 1
1 3 1 1 1 1
3 3 3 1 1 1 
```

如果这些都不正确，那么您有一个可行的解决方案。

```
1 1 1 1 1 1
3 3 3 3 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 1 0 0 1 1
1 3 1 1 1 1
3 3 3 1 1 1 
```

这可能不是唯一的解决方案，因此您必须对俄罗斯方块块可以在数字数组中的所有可能位置执行此操作。要获得最佳位置并创建可行的解决方案，您可能需要使用 A* 之类的算法。

# mongodb - 如何从mongodb中的某个文档开始获取多个文档

> ID：14981090
> 
> 赞同：0
> 
> 时间：2013-02-20T13:30:05.000
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

假设，在 mongo db 中，我有一个这样的集合：

```
{_id: "A", Value: "1"}
{_id: "B", Value: "2"}
{_id: "C", Value: "3"}
{_id: "D", Value: "4"}
{_id: "E", Value: "5"}
{_id: "F", Value: "6"}
{_id: "G", Value: "7"}
{_id: "H", Value: "8"}
{_id: "I", Value: "9"} 
```

我有一个名为 M (ID, LIMIT) 的方法，它以相反的顺序获取以文档 ID 开头的最后 LIMIT 记录。

如何实现方法 M？

**例 1：**

```
M(F, 4) returns
{_id: "F", Value: "6"}
{_id: "E", Value: "5"}
{_id: "D", Value: "4"}
{_id: "C", Value: "3"} 
```

**例 2：**

```
M(H, 2) returns
{_id: "H", Value: "8"}
{_id: "G", Value: "7"} 
```

**例 3：**

```
M(G, 6) returns
{_id: "G", Value: "7"}
{_id: "F", Value: "6"}
{_id: "E", Value: "5"}
{_id: "D", Value: "4"}
{_id: "C", Value: "3"}
{_id: "B", Value: "2"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:44:54.033

您需要按以下方式过滤结果，`_id`同时按以下方式进行降序排序`_id`：

```
var cursor = test.FindAs<BsonDocument>(Query.LTE("_id", ID));
cursor.SetSortOrder(SortBy.Descending("_id"));
cursor.SetLimit(LIMIT); 
```

# windows - Windows 8 应用商店应用程序：以固定比例裁剪图像

> ID：14981091
> 
> 赞同：2
> 
> 时间：2013-02-20T13:30:05.270
> 
> 标签：windows, windows-8

我在 Windows 8 应用程序上遇到了 Microsoft 的图像裁剪解决方案，但我需要强制用户裁剪到特定比例（例如 1:1、4:3），请建议/或任何更好的解决方案是可用的？

非常感谢您提前。

这是解决方案（该解决方案允许用户在 x,y 上自由裁剪） [http://code.msdn.microsoft.com/windowsapps/CSWin8AppCropBitmap-52fa1ad7/sourcecode?fileId=70609&pathId=1727496808](http://code.msdn.microsoft.com/windowsapps/CSWin8AppCropBitmap-52fa1ad7/sourcecode?fileId=70609&pathId=1727496808)

[http://code.msdn.microsoft.com/windowsapps/CSWin8AppCropBitmap-52fa1ad7](http://code.msdn.microsoft.com/windowsapps/CSWin8AppCropBitmap-52fa1ad7)

```
/// <summary> 
    /// If a pointer which is captured by the corner moves，the select region will be updated. 
    /// </summary> 
    void Corner_PointerMoved(object sender, PointerRoutedEventArgs e) 
    { 

        Windows.UI.Input.PointerPoint pt = e.GetCurrentPoint(this); 
        uint ptrId = pt.PointerId; 

        if (pointerPositionHistory.ContainsKey(ptrId) && pointerPositionHistory[ptrId].HasValue) 
        { 
            Point currentPosition = pt.Position; 
            Point previousPosition = pointerPositionHistory[ptrId].Value; 

            double xUpdate = currentPosition.X - previousPosition.X; 
            double yUpdate = currentPosition.Y - previousPosition.Y; 

            this.selectedRegion.UpdateCorner((sender as ContentControl).Tag as string, xUpdate, yUpdate); 

            pointerPositionHistory[ptrId] = currentPosition; 
        } 

        e.Handled = true; 
    } 
```

# java - MD5 在 PHP 和 JAVA 中给出不同的结果

> ID：14981094
> 
> 赞同：1
> 
> 时间：2013-02-20T13:30:15.230
> 
> 标签：java, php, md5

在我的程序中，我使用 Java 程序中的 Ftp 将文件加载到我的服务器，然后比较 MD5-sum。

上传工作正常，我得到相同的 md5 总和。但是 php-version 在相同的 md5-sum 之前有一个“0”。为什么会这样？

```
Php: 0e9e9399840d9a9368b53d3df98a6a2f
Java: e9e9399840d9a9368b53d3df98a6a2f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:32:20.140

它们是一样的，只是 PHP 用一个额外的 0 在前面填充了这个值，所以它总是 16 个字符。

将哈希视为十六进制的数字 - 它可以被填充，因此它始终是相同的位数（因为它永远不会超过 16 位），但它不一定是。这有点像比较数字`209`和`0209`。

# javascript - NETWORK_ERR：Chrome 中的 XMLHttpRequest 异常 101

> ID：14981096
> 
> 赞同：1
> 
> 时间：2013-02-20T13:30:23.857
> 
> 标签：javascript, xmlhttprequest, three.js

我正在 Chrome 中调试threejs javascript 代码。

我有以下内容：

```
var loader = new THREE.JSONLoader();
loader.load( "models/goal.js", function(geo) {
//blah blah
}); 
```

我有一个文件夹'models'，里面有文件goal.js。

在下面的函数中，我在 f.send() 上收到以下错误

**未捕获的错误 NETWORK_ERR：XMLHttpRequest 异常 101**

```
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e)
{
    var f=new XMLHttpRequest,g=0;
    f.onreadystatechange=function()
    {
        if(4==f.readyState)if(200==f.status||0==f.status)
        {
            try
            {
                var h=JSON.parse(f.responseText)
            }
            catch(i)
            {
                console.warn("DEPRECATED: ["+b+"] seems to be using old model format")
            }
            a.createModel(h,c,d);
            a.onLoadComplete()
        }
        else
        console.error("Couldn't load ["+b+"] ["+f.status+"]");

        else 3==f.readyState?e&&(0==g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):2==f.readyState&&(g=f.getResponseHeader("Content-Length"))
    };

    f.open("GET",b,!0);
    f.overrideMimeType&&f.overrideMimeType("text/plain; charset=x-user-defined");
    f.setRequestHeader("Content-Type","text/plain");
    **f.send(null)**
}; 
```

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:37:14.497

您需要更改 Chrome 中的安全策略才能访问本地文件。

使用命令行标志启动 Chrome 可执行文件：

```
chrome --allow-file-access-from-files 
```

在 Windows 上，您可以创建一个带有添加标志的快捷方式。（右键单击快捷方式 -> 属性 -> 目标）

有关更多信息，请参阅[Wiki 文章](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)。

# php - 使用 Angular.js 连接数据库和模型

> ID：14981102
> 
> 赞同：1
> 
> 时间：2013-02-20T13:30:53.103
> 
> 标签：php, javascript, codeigniter, angularjs

正如AngularJS所说，我有一个完全是“往返”应用程序的应用程序。我正在设置一个侧边栏来使用 AngularJS，但我对接下来的步骤有点困惑。将以下示例放在我的页面上作为起点（他们的主页示例之一，这里没有大的胜利）：

[http://jsfiddle.net/w5LKa/](http://jsfiddle.net/w5LKa/)

我想做的是弄清楚如何从我的数据库中获取数据，而不是硬编码：

```
$scope.todos = [{
    text: 'learn angular',
    done: true },{
    text: 'build an angular app',
    done: false
}]; 
```

我很高兴设置一个只有这两个字段的表格，以便基本上完成本教程。根据我的阅读，配置 API 似乎是一个好方法，但这不是我现在真正想深入研究的内容。我只有一个返回数组的普通模型，由单个查询指定。

谁能阐明我如何做到这一点？我正在使用 Codeigniter 作为我的服务器端框架。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:35:29.327

您可以使用 $http 获取数据

例如：

```
$http({
   url: "some url here",
   method: "POST",
   data: {"key":"value"}
}).success(function(data, status, headers, config) {
    $scope.data = data;
}).error(function(data, status, headers, config) {
    $scope.status = status;
}); 
```

或者你可以使用 $resource，文档在[这里](http://docs.angularjs.org/api/ngResource.%24resource)

# java - 正则表达式 - 捕获他或她，但不知道要运行哪个

> ID：14981105
> 
> 赞同：0
> 
> 时间：2013-02-20T13:30:57.577
> 
> 标签：java, regex

使用正则表达式我希望能够对两个单词的可能性进行反向引用。我的意思是，文本可能是， `.*she|he.*`. 在运行正则表达式之前，我不知道文本是否会阅读她或他，并且想对出现的单词进行反向引用。

我努力了

```
(she|he) 
```

但是虽然这找到了短语，但它并没有捕捉到这个词。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:33:32.320

试试这个正则表达式：

```
(\bs?he\b) 
```

给定以下输入：

```
he 
hesitate 
?she??
shealalala 
```

它将匹配：

```
he 
?she?? 
```

# python - Python 中的多态性和构造函数行为

> ID：14981108
> 
> 赞同：3
> 
> 时间：2013-02-20T13:31:07.453
> 
> 标签：python, oop

我正在阅读 Python 中的多个构造函数多态性。我遇到了这段[代码](http://pythonconquerstheuniverse.wordpress.com/2010/03/17/multiple-constructors-in-a-python-class/)。

```
import sys, types, pprint

class Vector:
    """
    Demo of a class with multiple signatures for the constructor
    """
    def __init__(self, *args, **kwargs):

        if len(args) == 1:  foundOneArg = True;  theOnlyArg = args[0]
        else:               foundOneArg = False; theOnlyArg  = None

        if foundOneArg and isinstance(theOnlyArg, types.ListType):      
            self.initializeFromList(theOnlyArg)             
        elif foundOneArg and isinstance(theOnlyArg,Vector):
            self.initializeFromVector(theOnlyArg)           
        else:
            self.initializeFromArgs(*args)

        pprint.pprint(self.values)  # for debugging only

    def initializeFromList(self, argList):
        self.values = [x for x in argList]

    def initializeFromVector(self, vector):
        self.values = [x for x in vector.values]

    def initializeFromArgs(self, *args):
        self.values = [x for x in args]
#------------ end of class definition ---------------------

v = Vector(1,2,3) 
v = Vector([4,5,6]) 
q = Vector(v); 
```

但是，我不明白如何`vector.values`在 `initializeFromVector`.

我发现 Python 解释器如何能够访问它很奇怪，`vector.values`即使它没有在程序中手动设置，我也不认为`values`它是某种内置变量。

这是可变类的一个例子吗？我一直觉得这种行为很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:34:19.713

真的很简单：`initializeFromVector`接受一个类型的参数`vector`并查找它的`values`成员。这必须在之前`vector`构建时设置。

作为一个更简单的例子：

```
from copy import copy

class Set(object):
    def __init__(self, other=None):
        """Initialize; optionally copy the elements of another Set."""
        self.elements = set()
        if other is not None:
            self.elements = copy(other.elements) 
```

# java - 检查 UTF-8 数据类型 3 字节或 4 字节 Unicode

> ID：14981109
> 
> 赞同：8
> 
> 时间：2013-02-20T13:31:08.173
> 
> 标签：java, mysql, unicode, utf-8, character-encoding

在我的数据库中，我收到错误

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 
```

我使用 Java 和 MySQL 5。我知道 4 字节 Unicode 在 Java 中是合法的，但在 MySQL 5 中是非法的，我认为它可能会导致我的问题，我想检查我的数据类型，所以这是我的问题：如何我检查我的 UTF-8 数据是 3 字节还是 4 字节 Unicode？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T13:37:08.870

[UTF-8](http://en.wikipedia.org/wiki/UTF-8)将基本多语言平面中的所有内容（即 U+0000 到 U+FFFF 包括在内）编码为 1-3 个字节。因此，您只需要检查字符串中的所有内容是否都在*BMP*中。

在 Java 中，这意味着检查任何`char`（UTF-16 代码单元）是高代理字符还是低代理字符，因为 Java 将使用代理对来编码非 BMP 字符：

```
public static boolean isEntirelyInBasicMultilingualPlane(String text) {
    for (int i = 0; i < text.length(); i++) {
        if (Character.isSurrogate(text.charAt(i))) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T15:29:16.250

如果您不想支持 BMP 以外的内容，则可以在将其交给 MySQL 之前删除这些字符：

```
public static String withNonBmpStripped( String input ) {
    if( input == null ) throw new IllegalArgumentException("input");
    return input.replaceAll("[^\\u0000-\\uFFFF]", "");
} 
```

如果你想支持 BMP 以外的东西，你需要 MySQL 5.5+ 并且你需要改变所有的东西`utf8` （`utf8mb4`排序规则、字符集......）。但是您还需要我不熟悉的驱动程序中对此的支持。在 Java 中处理这些字符也很痛苦，因为它们分布在 2 上`chars` ，因此在许多操作中需要特殊处理。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-18T04:39:02.467

[我发现](https://stackoverflow.com/a/4035871/489790)在 java 中去除非 BMP 字符的最佳方法如下：

```
inputString.replaceAll("[^\\u0000-\\uFFFF]", "\uFFFD"); 
```

# python - Python 正则表达式没有按我的预期工作

> ID：14981110
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:31:08.873
> 
> 标签：python, regex

为什么这不起作用？！

```
re.match(r".*hello.*", "\n\nhello\n\n", re.MULTILINE) 
```

请帮忙？

Windows 7 x64 Python 2.7.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:32:24.417

您正在寻找的是[`re.DOTALL`](http://docs.python.org/2/library/re.html#re.S)：

```
re.match(r".*hello.*", "\n\nhello\n\n", re.DOTALL) 
```

引用文档：

> 使`'.'`特殊字符完全匹配任何字符，包括换行符；没有这个标志，`'.'`将匹配除换行符以外的任何内容。

`re.MULTILINE`改变位置`^`和`$`匹配，而不是`.`点模式匹配的内容。

# jquery - 将滚动条值插入输入字段

> ID：14981112
> 
> 赞同：0
> 
> 时间：2013-02-20T13:31:11.503
> 
> 标签：jquery, jquery-ui, scrollbar

我有这个脚本，灵感来自 codrops 滑块分页概念[http://tympanus.net/codrops/2012/12/21/slider-pagination-concept/](http://tympanus.net/codrops/2012/12/21/slider-pagination-concept/) 我想将滑块获得的值放入输入字段值（即）而不是进入 div#preview。我能怎么做 ？谢谢

KD

```
<div class="container"> 
            <div id="preview" type="text" class="preview">0</div>

            <div id="slider" class="sp-slider-wrapper">
            </div>

    </div><!-- /container -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/jquery.pagination.js"></script>
    <script>
        $(function() {
            var $update = $( '#preview' );
            $( "#slider" ).pagination( {
                total : 12,
                onChange : function( value ) {
                    $update.text( value );
                }
            } );
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:36:37.633

利用`val()`

```
 $('#yourInputID').val(value); 
```

**HTML**

```
<div class="container"> 
        <div id="preview" type="text" class="preview">0</div>
        <div id="slider" class="sp-slider-wrapper"></div>
        <input id="test" value=""/> <--- input here
</div> 
```

**查询**

```
$(function() {
        var $update = $( '#preview' );
        $( "#slider" ).pagination( {
            total : 12,
            onChange : function( value ) {
                $('#test').val(value);
            }
        } );
    }); 
```

# java - 如何以 .rtf 格式保存文件

> ID：14981115
> 
> 赞同：0
> 
> 时间：2013-02-20T13:31:26.787
> 
> 标签：java, swing, file-io, rtf, jfilechooser

我正在使用 JFileChooser 来制作保存功能。但我想以 .rtf 格式保存我的文件，我该怎么做？

我现在的代码是：

```
@Override
    public void actionPerformed(ActionEvent e) {

        JFileChooser saveFile = new JFileChooser();
        int option = saveFile.showSaveDialog(null);
        saveFile.setDialogTitle("Save the file...");
//      saveFile.setFileFilter(new FileNameExtensionFilter("Text Files", "txt", "rtf"));

        if (option == JFileChooser.APPROVE_OPTION) {
            try {
                BufferedWriter writer = new BufferedWriter(new FileWriter(saveFile.getSelectedFile().getPath()));
                writer.write(text);
                writer.close();

            } catch (IOException ex) {

                ex.printStackTrace();
                System.out.println(ex.getMessage());
                JOptionPane.showMessageDialog(null, "Failed to save the file");
            }
        }
    }//End of method
}//End of inner class 
```

所以我需要实现一个将文件保存到 .rtf 的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:39:29.580

假设（在没有 SSCCE 的情况下）`JEditorPane`已经设置`text/rtf`并包含一些格式化文本，序列化它的最简单方法是：

```
editorPane.write( writer ); 
```

详情请参阅[`JTextComponent.write(Writer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)。

# c# - 由于 unicode 字符“\”，mvc3 下拉菜单不起作用

> ID：14981117
> 
> 赞同：0
> 
> 时间：2013-02-20T13:31:34.167
> 
> 标签：c#, asp.net-mvc-3, razor

我有以下代码，该页面在我提交并尝试保存到数据库之前有效，我将该字段作为 nvarchar(70)。当我选择“基金/投资经理”时，由于“/”页面出现错误。我什至尝试使用 *HttpUtility.HtmlEncode("Fund-Investment Manager",....)*但这不起作用。以前有没有其他人提出过这个问题？提前谢谢

```
@Html.DropDownListFor(
       model => model.JobDesc, 
       new SelectList(
              new List<Object>{ 
                   new { value = "Please Select" , text = "Please Select"  },
                   new { value = "Buy-Side Analyst" , text = "Buy-Side Analyst" },
                   new { value = "Fund/Investment Manager" , text = "Fund/Investment Manager"},
                   new { value = "Sell-Side Analyst" , text = "Sell-Side Analyst"},
                   new { value = "Broker" , text = "Broker"},
                   new { value = "Other" , text = "Other"}
                },
              "value",
              "text", new { @class = "chk" }
       )
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:18:37.503

你试过转义字符串吗？

基金//投资经理

# opengl - 一起使用 NPAPI( libflashplayer32.so ) 和 OpenGL

> ID：14981121
> 
> 赞同：0
> 
> 时间：2013-02-20T13:31:41.823
> 
> 标签：opengl, npapi

我正在使用 OpenGL for Linux 系统构建一个 3D 应用程序。

我也想用闪光灯。在 Windows 上，您可以将 flash 文件渲染到屏幕外目标，从中创建纹理，然后与 D3D/OpenGL 一起使用。

因此，通过使用 NPAPI 和 dlopening libflashplayer32.so，这就是我想要做的：每次从渲染的 swf 创建一个纹理并在我的 OpenGL 应用程序中使用它。

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:40:45.963

这*是*可能的，但非常棘手。我做过一次，不是为了生成 OpenGL 纹理，而是为了创建动画。

您必须假装是加载 Flash 插件的浏览器，然后从 Flash 插件绘制的 X11 窗口中读取帧。这可能会非常慢，因此根据您的用例可能不实用。

# ios - 复制/粘贴类文件后，一个项目中的 IBActions 仍然连接到其原始故事板

> ID：14981124
> 
> 赞同：1
> 
> 时间：2013-02-20T13:31:53.617
> 
> 标签：ios, storyboard

我创建了一个新项目，我想在其中重用另一个项目中的类和故事板元素。我以为这很简单。我复制了我需要的课程。它们最初通过 IBActions 与情节提要元素相关联。

当我打开第二个项目（组件被重用的那个）时，IBActions 指向第一个项目的故事板元素！！！

此时，在第二个项目中，故事板是空的，所以当我将鼠标悬停在 ClassA 文件中的 IBAction 目标上时，第一个项目中的按钮被突出显示......

我怎样才能摆脱这件事？编辑：摆脱这个，而不必打破 IB 中的 IBActions 链接......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:17:03.993

你有几个相互关联的问题

*   当您将类添加到新项目时，您没有选中“目标”复选框“将项目复制到目标组的文件夹”，因此新项目中列出的类只是对原始项目类文件的引用。这就是为什么 IBActions 指向第一个项目中的情节提要元素。

*   如果您确实选中了该复选框，并将类*复制*到您的新项目中，那么所有与故事板项目的链接都会消失，您必须将所有内容与新故事板中的项目重新链接。

# java - 精确测量物体尺寸

> ID：14981127
> 
> 赞同：6
> 
> 时间：2013-02-20T13:31:56.153
> 
> 标签：java, memory, jvm

这个问题底部的代码有点长，但基本上是创建了一些对象并确定了它们在内存中的大小。我使用以下 JVM 参数执行代码（TLAB 是为了避免块内存分配并应该获得准确的内存使用数据）：

```
-server -Xms2000m -Xmx2000m -verbose:gc -XX:-UseTLAB 
```

我在 64 位 Hotspot JVM 上运行代码并获得以下输出：

> Java HotSpot(TM) 64 位服务器 VM
> 对象：16 字节
> 
> 1 个整数的对象：16 个字节
> 2 个整数的
> 对象：24 个字节 3 个整数的对象：24 个字节
> 
> 具有 1 个 long 的对象：24 字节
> 具有 2 个 long 的对象：32 字节
> 具有 3 个 long 的对象：40 字节
> 
> 1 个引用的对象：16 字节
> 2 个引用的
> 对象：24 个字节 3 个引用的对象：24 个字节

我的结论是：

*   一个对象占用 12 个字节，对齐到 16 个字节。
*   一个 int 占用 4 个字节（1 个带有一个 int 的对象是 12 + 4 = 仍然是 16 个字节，有 2 个 int：12 + 8 = 20 对齐到 24 个字节）
*   long 需要 8 个字节（1 个 long 对象是 12 + 8 = 20 个字节，对齐到 24 个字节）

**但我很难理解为什么引用不使用`long`s 那么多的空间。**

由于引用在 64 位 JVM 上是 8 个字节，因此显而易见的结论是测量方法存在缺陷*。你能解释一下发生了什么以及可以做些什么来解决它？

[*注：]
[- 测量期间不运行 GC。]
[- 使用 Netbeans 分析器会产生类似的结果。]

```
public class TestMemoryReference {

    private static final int SIZE = 100_000;
    private static Runnable r;
    private static Object o = new Object();
    private static Object o1 = new Object();
    private static Object o2 = new Object();
    private static Object o3 = new Object();

    public static class ObjectWith1Int  { int i; }
    public static class ObjectWith2Ints { int i, j; }
    public static class ObjectWith3Ints { int i, j, k; }
    public static class ObjectWith1Long  { long i; }
    public static class ObjectWith2Longs { long i, j; }
    public static class ObjectWith3Longs { long i, j, k; }
    public static class ObjectWith1Object  { Object o = o1; }
    public static class ObjectWith2Objects { Object o = o1; Object p = o2; }
    public static class ObjectWith3Objects { Object o = o1; Object p = o2; Object q = o3; }

    private static void test(Runnable r, String name, int numberOfObjects) {
        long mem = Runtime.getRuntime().freeMemory();
        r.run();
        System.out.println(name + ":" + (mem - Runtime.getRuntime().freeMemory()) / numberOfObjects + " bytes  ");
    }

    public static void main(String[] args) throws Exception {
        System.out.println(System.getProperty("java.vm.name") + "  ");

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new Object(); } };
        test(r, "Object", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith1Int(); } };
        test(r, "Object with 1 int", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith2Ints(); } };
        test(r, "Object with 2 ints", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith3Ints(); } };
        test(r, "Object with 3 ints", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith1Long(); } };
        test(r, "Object with 1 long", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith2Longs(); } };
        test(r, "Object with 2 longs", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith3Longs(); } };
        test(r, "Object with 3 longs", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith1Object(); } };
        test(r, "Object with 1 reference", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith2Objects(); } };
        test(r, "Object with 2 references", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new ObjectWith3Objects(); } };
        test(r, "Object with 3 references", SIZE);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:40:00.270

> 由于引用在 64 位 JVM 上是 8 个字节

这是您可能存在缺陷的假设。

HotSpot 能够使用[“压缩 oops”在 JVM 的](https://wikis.oracle.com/display/HotSpotInternals/CompressedOops)*某些*地方使用 32 位值进行引用（强调我的）：

> 哪些 oops 被压缩？
> 
> 在 ILP32 模式的 JVM 中，或者如果在 LP64 模式下关闭 UseCompressedOops 标志，则所有 oops 都是本机机器字长。
> 
> 如果 UseCompressedOops 为 true，则堆中的以下 oops 将被压缩：
> 
> *   每个对象的类字段
> *   **每个 oop 实例字段**
> *   oop 数组 (objArray) 的每个元素

我*怀疑*这就是你的情况。

通过使用测试它

```
-XX:-UseCompressedOops 
```

或者

```
-XX:+UseCompressedOops 
```

在我的机器上，默认情况下我得到与你相同的结果，但`-XX:-UseCompressedOops`我看到：

```
Object:16 bytes
Object with 1 int:24 bytes
Object with 2 ints:24 bytes
Object with 3 ints:32 bytes
Object with 1 long:24 bytes
Object with 2 longs:32 bytes
Object with 3 longs:40 bytes
Object with 1 reference:24 bytes
Object with 2 references:32 bytes
Object with 3 references:40 bytes 
```

...这可能更接近您的预期:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:46:32.190

Java 对象的大小在定义类时是已知的。

Java对象的内存使用：一般[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

# ios - 在 iOS 中检测退格键

> ID：14981129
> 
> 赞同：0
> 
> 时间：2013-02-20T13:31:56.747
> 
> 标签：ios, uitextfield

我正在尝试验证在 UITextfield 中输入的 10 位电话号码。实际上我需要 xxx-xxx-xxxx 格式的数字。所以我不希望用户删除 - 符号。

我尝试使用此处提到的各种方法：[Detect backspace in UITextField](https://stackoverflow.com/questions/1977934/detect-backspace-in-uitextfield/6637821)，但它们似乎都不起作用。

我目前的做法是：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if (range.location == 12) {
        UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Invalid Input" message:@"Phone number can contain only 10 digits." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [testTextField resignFirstResponder];
        return NO;
    }

    if (range.length == 0 && [blockedCharacters characterIsMember:[string characterAtIndex:0]]) {
        UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Invalid Input" message:@"Please enter only numbers.\nTry again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        return NO;
    }

    if (range.length == 0 &&
        (range.location == 3 || range.location == 7)) {
        textField.text = [NSString stringWithFormat:@"%@-%@", textField.text, string];
        return NO;
    }

    if (range.length == 1 &&
        (range.location == 4 || range.location == 8))  {
        range.location--;
        range.length = 2;
        textField.text = [textField.text stringByReplacingCharactersInRange:range withString:@""];
        return NO;
    }

    return YES;
} 
```

对此有什么想法吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:26:20.757

子类`UITextField`类并覆盖，`- (void)deleteBackward` 然后您将收到每次按下键盘退格键的消息。并且不要忘记在函数开头调用**super 。**

例子：

```
- (void)deleteBackward
{
    [super deleteBackward];
    [self.delegate deleteTapped:self];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:36:53.383

我遇到了类似的问题：

我知道你需要 - 里面的数字就像 xxx-xxx-xxxx。

这就是我解决它的方法：

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
     if (self.tf == textField) {
        NSMutableString *stringtf = [NSMutableString stringWithString:self.tf.text];
        [stringtf insertString:@"-" atIndex:2];
        [stringtf insertString:@"-" atIndex:5];
        tf.text = stringDID;
    }
} 
```

因此，一旦用户完成了对号码的编辑，我就会为他们添加 -。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-11T04:20:16.410

试试这个。我基本上在这里做的是检查表示退格的空键单击。然后，我们检查最后两个字符，看它是否包含“-”，如果是，我们将两者都删除。然后返回 NO，因为我们正在自己处理退格。我实际上并没有运行代码，但理论上应该可以工作。这意味着像“123-456-7”这样的数字最终会变成“123-456”。您可以调整逻辑以满足您的需要。干杯。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if([string isEqualToString:@""] && [textField.text length] > 3)
    {
        NSString *lastChars = [textField.text substringFromIndex:[textField.text length] - 2];

        if([lastChars rangeOfString:@"-"].location != NSNotFound)
        {
            NSString *newString = [textField.text substringToIndex:[textField.text length] - 2];
            [textField setText:newString];

            return NO;
        }
    }

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T12:06:52.833

这段代码可能会提供一些线索：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {     

if (textField.tag==txtYourTextField.tag) {

    const char * _char = [string cStringUsingEncoding:NSUTF8StringEncoding];
    int isBackSpace = strcmp(_char, "\b");

    if (isBackSpace == -8) {
        NSLog(@"isBackSpace");
        return YES; // is backspace
    }
    else if (textField.text.length == 10) {
        return YES;
    }
}

return NO; } 
```

# database - 如何使数据库事务原子化（所有部分都完成或没有）？

> ID：14981130
> 
> 赞同：1
> 
> 时间：2013-02-20T13:32:00.737
> 
> 标签：database, transactions

比方说，我有一个储蓄账户和一个支票账户。我的储蓄账户余额是 150 美元。我正在尝试将 100 美元从我的储蓄账户转移到支票账户，同时将 100 美元从我的储蓄账户转移到我朋友的账户。

**将 100 美元从我的储蓄账户转移到我的支票账户的步骤：**

1.1。读取（current_saving_balance）

1.2\. 将 Saving_balance 减少 100

1.3\. 将 100 添加到我的检查余额

**将 100 美元从我的储蓄账户转移到我朋友的账户的步骤：**

2.1。读取（current_saving_balance）

2.2\. 将 Saving_balance 减少 100

2.3\. 给我朋友的账户余额加 100

我想同时执行这些事务。如果他们在开始时都读取了 Saving_balance，则两者都可以将 Saving_balance 减少 100 美元，但是，他们中应该只有一个能够成功。这在银行系统中是如何处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:49:15.867

下面是如何在 tSQL 中执行此操作，您的数据库可能在语法上有所不同。

```
BEGIN TRAN

UPDATE  accounts
SET balance = balance-100
WHERE   account='1'

UPDATE  accounts
SET balance = balance + 100
WHERE   account='2'

COMMIT TRAN 
```

我建议您阅读[这篇文章](http://www.sqlteam.com/article/introduction-to-transactions)以更多地了解 DB 事务。

忽略评论中正在进行的整个可序列化隔离对话。它并没有真正解决您描述的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T04:14:09.700

不需要可序列化的隔离级别（但是确切的登录语义因数据库系统而异）。

*   执行 select for update 作为第一条语句，然后执行其余事务。第一个执行 select for update 的事务将锁定该行，另一个事务将被阻塞，直到第一个事务提交（悲观锁定）
*   确保执行更新语句时它仍然具有与读取时相同的值，否则重新执行

*   不需要显式读取数据，一个简单的更新语句就足够了（但是需要有逻辑来检查账户中是否有足够的资金，这可以通过触发器来实现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T04:31:30.340

您有两笔实际交易（1\. 将 100 美元转入支票。2\. 将 100 美元转给朋友），而您正在尝试在单个技术交易中进行交易（开始；...；提交）。我认为这是错误的方法。您的代码必须反映实际交易，即开始；... 1\. 将 100 美元转入支票。;犯罪; 开始; ... 2\. 将 100 美元转给朋友）。;犯罪; 有一些数据库功能，可以在每次交易前检查余额并决定是否保存。

# objective-c - 旋转 CALayers

> ID：14981132
> 
> 赞同：2
> 
> 时间：2013-02-20T13:32:01.997
> 
> 标签：objective-c, xcode, calayer, quartz-graphics

我已经完成了使用 UIKit 创建旋转轮控制的教程。 [http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)

在教程的“布置轮子”部分中，轮子从圆圈的左侧开始顺时针绘制（参见带有红色标签的屏幕截图）。所以它从左侧站点的 0 开始。

然而。我想从值为 0 的圆圈的正确位置开始 - 现在是屏幕截图上的 4。不幸的是，我不知道如何实现这一目标。当然数字或图片的旋转应该和现在完全相反。所以现在 4 旋转 180 度应该是正常的。

有人可以在这里帮助我吗？会很好。

问候

当前drawWheel函数：

```
// 3 - Create the sectors
for (int i = 0; i < _numberOfSections; i++) {
    // 4 - Create image view
    UIImageView *im = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"segment.png"]];
    im.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
    im.layer.position = CGPointMake(_container.bounds.size.width/2.0-_container.frame.origin.x,
                                    _container.bounds.size.height/2.0-_container.frame.origin.y);
    im.transform = CGAffineTransformMakeRotation((angleSize * i) + M_PI);
    im.alpha = minAlphavalue;
    im.tag = i;
    if (i == 0) {
        im.alpha = maxAlphavalue;
    }
    // 5 - Set sector image
    UIImageView *sectorImage = [[UIImageView alloc] initWithFrame:CGRectMake(12, 100, 40, 40)];
    sectorImage.image = [UIImage imageNamed:[NSString stringWithFormat:@"icon%i.png", i]];
    [im addSubview:sectorImage];
    // 6 - Add image view to container
    [_container addSubview:im];
} 
```

![轮子现在的屏幕截图](../Images/135c070b25e52be4017a22db1b520862.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:36:22.240

未经测试，但你不能只添加`M_PI`吗？

```
- (void) drawWheel {
    container = [[UIView alloc] initWithFrame:self.frame];
    CGFloat angleSize = 2*M_PI/numberOfSections;
    for (int i = 0; i < numberOfSections; i++) {
        UILabel *im = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 40)];
        im.backgroundColor = [UIColor redColor];
        im.text = [NSString stringWithFormat:@"%i", i];
        im.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
        im.layer.position = CGPointMake(container.bounds.size.width/2.0, 
                                        container.bounds.size.height/2.0); 
        // ===== Add M_PI Here! =====
        im.transform = CGAffineTransformMakeRotation((angleSize * i) + M_PI);
        // ==========================
        im.tag = i;
        [container addSubview:im];
    }
    container.userInteractionEnabled = NO;
    [self addSubview:container];
} 
```

# php - 带有前导零的数字的奇怪行为

> ID：14981133
> 
> 赞同：4
> 
> 时间：2013-02-20T13:32:09.193
> 
> 标签：php, numbers, integer, octal

我有一些带有一些整数的 PHP 代码并且一切正常，除非我有`08`或`0X`作为整数。当我把它们放在引号里时，一切都很好。

示例编号：

```
2      //Works fine
08     //Doesn't work
012    //Doesn't work
"08"   //Works fine again
"012"  //Works fine again 
```

谁能告诉我背后的原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T13:33:58.257

如果你只写 08 和 09（不带引号）或任何其他以 0 开头的数字，PHP 认为你正在写一个八进制值，而 08 和 09 是无效的八进制数。

[http://www.php.net/manual/en/language.types.integer.php](http://www.php.net/manual/en/language.types.integer.php)

> **句法**
> 
> 整数可以用十进制（以 10 为基数）、十六进制（以 16 为基数）、八进制（以 8 为基数）或二进制（以 2 为基数）表示法指定，可以在前面加上符号（- 或 +）。
> 
> 二进制整数文字从 PHP 5.4.0 开始可用。
> 
> 要使用**八进制表示法**，请在数字前加上**0**（零）。要使用 **十六进制表示法**，请在数字前加上**0x**。要使用**二进制表示法**，请在数字前加上**0b**。
> 
> [...]
> 
> **警告：** 在 PHP 7 之前，如果在八进制整数（即 8 或 9）中给出了无效数字，则该数字的其余部分将被忽略。从 PHP 7 开始，会发出解析错误。

# android - 意图如何工作？

> ID：14981138
> 
> 赞同：1
> 
> 时间：2013-02-20T13:32:27.413
> 
> 标签：android, android-intent

当我说，

```
Intent intent = new Intent(context, TestActivity.class); 
```

问题是是否每次实例化意图时都会创建一个新的 TestActivity 实例。还是它使用单例副本？

我查看了一些文档，几乎没有找到答案。你怎么看待这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:34:10.053

这取决于您开始新活动时使用的标志。如果您使用 FLAG_REORDER_TO_TOP，它将采用旧实例并放在活动堆栈的顶部。如果您不指定任何内容，将创建并启动一个新实例

# c++ - 快速实现对大量相当大整数的操作

> ID：14981143
> 
> 赞同：2
> 
> 时间：2013-02-20T13:32:41.703
> 
> 标签：c++, performance, algorithm, integer, set

**描述 ：**

我实现了以下类 LabSetInt64（见下面的代码）。

这里的目标是尽可能快地处理大量的大整数（最大为 10M）。我的主要要求集中在：

*   !Crucial : 尽可能快地获得集合的大小/基数
*   !Important : 能够非常快速地迭代一个集合

所以，从下面的实现开始，还有两点想和大家讨论。

**“popcount()”惰性实现**

```
int LabSetInt64::popcount(uint64_t x) {
    int count;
    for (count=0; x; count++)
        x &= x-1;
    return count;
} 
```

我知道我选择的实现是市场上最慢的实现之一，但我自己找不到更好的实现。所以，如果你能指点我一个更好的（当然是 64 位）......

我听说过一种非常有效的计算基数的算法：“MIT HAKMEM 169”算法>>

```
// MIT HAKMEM.
// MIT HAKMEM Count is funky. Consider a 3 bit number as being 4a+2b+c. If we
// shift it right 1 bit, we have 2a+b. Subtracting this from the original gives
// 2a+b+c. If we right-shift the original 3-bit number by two bits, we get a,
// and so with another subtraction we have a+b+c, which is the number of bits
// in the original number. How is this insight employed? The first assignment
// statement in the routine computes tmp. Consider the octal representation of
// tmp. Each digit in the octal representation is simply the number of 1¡äs in
// the corresponding three bit positions in n. The last return statement sums
// these octal digits to produce the final answer. The key idea is to add
// adjacent pairs of octal digits together and then compute the remainder
// modulus 63\. This is accomplished by right-shifting tmp by three bits, adding
// it to tmp itself and ANDing with a suitable mask. This yields a number in
// which groups of six adjacent bits (starting from the LSB) contain the number
// of 1¡äs among those six positions in n. This number modulo 63 yields the
// final answer. For 64-bit numbers, we would have to add triples of octal
// digits and use modulus 1023\. This is HACKMEM 169, as used in X11 sources.
// Source: MIT AI Lab memo, late 1970¡äs.
// http://gurmeet.net/2008/08/05/fast-bit-counting-routines/
int CheckMIT(unsigned int n) 
{
   /* works for 32-bit numbers only    */
   /* fix last line for 64-bit numbers */
   register unsigned int tmp;

   tmp = n - ((n >> 1) & 033333333333)
           - ((n >> 2) & 011111111111);

   // the remainder of 63 for i equals the sum of 7 octal numbers which
   // consititutes the 32-bit integer.
   // For example, 03456 % 63 == 034 + 056
   return ((tmp + (tmp >> 3)) & 030707070707) % 63;
} 
```

我对上述算法的问题是我对它的理解不够，无法将其转换为“uint64_t”（64 位）版本（尽管执行此操作的指令很少）。

因此，如果你们中的一个人可以帮助我完成这项任务（或至少帮助我理解），那就太棒了。

这是**LabSetInt64.h**：

```
/*
 * LabSetInt64.h
 *
 *  Created on: Feb 20, 2013
 *      Author: golgauth
 */

#ifndef LABSETINT64_H_
#define LABSETINT64_H_

#include <ctype.h>
#include <stdio.h>
#include <string.h>

#include <iostream>
#include <stdint.h>
#include <limits>
#include <algorithm>

#include <LabTimeUtils.h>

using namespace std;

namespace elps {

// Lets assume we need at most 1M distinct indices in our sets
#define DEFAULT_SIZE_IN_BITS 1000000

class LabSetInt64
{
public:

    LabSetInt64();
    LabSetInt64(int sizeinbits);
    LabSetInt64(const LabSetInt64 &);
    ~LabSetInt64();

    void Clear();
    void Resize(int sizeinbits);
    void Set(int i);
    void UnSet(int i);
    void Set(int i, bool b);
    bool Find(int i);
    int  Cardinality();
    int  NextSetBit(int i);

    void Print();

    /**
     * Should have been "=" operator, but this overload is not compatible
     * with Cython, so we'll use "<<" instead.
     * @param
     * @return
     */
    const LabSetInt64 & operator << ( const LabSetInt64 & );
    LabSetInt64         operator ~  () const;
    LabSetInt64         operator +  ( const LabSetInt64 & );
    LabSetInt64         operator *  ( const LabSetInt64 & );
    LabSetInt64         operator -  ( const LabSetInt64 & );
    LabSetInt64         operator ^  ( const LabSetInt64 & );

private:
    uint64_t *data;
    int data_len;
    int bits_size;

    int popcount(uint64_t x);
    int nb_trailing_zeros(uint64_t v);
};

} /* namespace elps */
#endif /* LABSETINT64_H_ */ 
```

这里是**LabSetInt64.cpp**：

```
/*
 * LabSetInt64.cpp
 *
 *  Created on: Feb 20, 2013
 *      Author: golgauth
 */

#include "LabSetInt64.h"

namespace elps {

/** PUBLICS **/

LabSetInt64::LabSetInt64() : LabSetInt64(DEFAULT_SIZE_IN_BITS) {
}

LabSetInt64::LabSetInt64(int sizeinbits) {
    bits_size = sizeinbits;
    data_len = (bits_size + 63) / 64;
    data = new uint64_t[data_len];
}

LabSetInt64::LabSetInt64(const LabSetInt64& src) {
    bits_size = src.bits_size;
    data_len = src.data_len;
    data = new uint64_t[data_len];
    for( int i = 0; i < data_len; i++ )            // copy into this set
        data[i] = src.data[i];
}

LabSetInt64::~LabSetInt64() {
}

void LabSetInt64::Clear() {
    std::fill_n(data, data_len, 0);
}

void LabSetInt64::Resize(int sizeinbits) {
    bits_size = sizeinbits + 1;
    int size = (bits_size + 63) / 64;
    uint64_t *new_data = new uint64_t[size];

    memcpy( new_data, data, data_len * sizeof(uint64_t) );

    data_len = size;
    delete [] data;
    data = new_data;
}

void LabSetInt64::Set(int i) {
    data[i / 64] |= (1l << (i % 64));
}

void LabSetInt64::UnSet(int i) {
    data[i / 64] &= ~(1l << (i % 64));
}

void LabSetInt64::Set(int i, bool b) {
    if(b) Set(i); else UnSet(i);
}

bool LabSetInt64::Find(int i) {
    return ((data[i / 64]) & (1l << (i % 64)));           // binary AND;
}

int LabSetInt64::Cardinality() {
    int sum = 0;
    for(int i=0; i<data_len; i++)
        sum += popcount(data[i]);
    //sum += __builtin_popcount(data[i]);
    return sum;
}

int LabSetInt64::NextSetBit(int i) {
    int x = i / 64;
    long w = data[x];
    w >>= (i % 64);
    if (w != 0) {
        return i + nb_trailing_zeros(w);
    }
    ++x;
    for (; x < data_len; ++x) {
        if (data[x] != 0) {
            return x * 64 + nb_trailing_zeros(data[x]);
        }
    }
    return -1;
}

void LabSetInt64::Print() {
    int cur_id = this->NextSetBit(0);
    cout << "\nSet size : " << this->Cardinality() << endl;
    cout << "{ ";
    while (cur_id != -1)
    {
        cout << (cur_id) << " ";
        cur_id = this->NextSetBit(cur_id+1);
    }
    cout << "}" << endl;;
}

/** PRIVATES **/

//This is better when most bits in x are 0
//It uses 3 arithmetic operations and one comparison/branch per "1" bit in x.
int LabSetInt64::popcount(uint64_t x) {
    int count;
    for (count=0; x; count++)
        x &= x-1;
    return count;
}

// output: c will count v's trailing zero bits,
// so if v is 1101000 (base 2), then c will be 3
int LabSetInt64::nb_trailing_zeros(uint64_t v) {
    int c;
    if (v)
    {
        v = (v ^ (v - 1)) >> 1;         // Set v's trailing 0s to 1s and zero rest
        for (c = 0; v; c++) {
            v >>= 1;
        }
    }
    else
        c = 8 * sizeof(v);

    return c;
}

/** ***************************************************************************
*********************************   OPERATORS   *******************************
*******************************************************************************/

/** PUBLICS **/

/*******************************************************************************
 * TODO >> May be better to use  "DEFAULT_SIZE_IN_BITS" instead of "data_len"  *
 *         in all the operators !!!                                            *
 *                                                                             *
 * => For now, we assume that all the Sets are created with the default        *
 *    constructor (aka : bit_size = DEFAULT_SIZE_IN_BITS)                      *
 *******************************************************************************/

/**
 *  "operator = " assigns the right hand side to this set.
 *  returns: nothing
 */
const LabSetInt64 &LabSetInt64::operator << ( const LabSetInt64 &rhs )
{
    if( &rhs != this )                              // avoid self assignment
    {
        this->Resize(rhs.bits_size - 1);
        for( int i = 0; i < data_len; i++ )         // copy into this set
            data[i] = rhs.data[i];
    }
    return *this;                                   // enable x << y << z;
}

/**
 * "operator ~ " performs set complement operation (not).
 * returns: pointer to set
 */
LabSetInt64 LabSetInt64::operator ~ () const
{
    LabSetInt64 rv;
    for( int i = 0; i < data_len; i++ )
        rv.data[i] = ~data[i];                      // bitwise complement
    return rv;
}

/**
 * "operator + " performs set union operation (or).
 * returns: pointer to set
 */
LabSetInt64 LabSetInt64::operator + ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;
    for( int i = 0; i < data_len; i++ )
        rv.data[i] = data[i] | rhs.data[i];         // bitwise OR
    return rv;
}

/**
 * "operator * " performs set intersection operation (and).
 * returns: pointer to set
 */
LabSetInt64 LabSetInt64::operator * ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;
    for( int i = 0; i < data_len; i++ )
        rv.data[i] = data[i] & rhs.data[i];         // bitwise AND
    return rv;
}

/**
 * "operator - " performs set difference operation.
 * returns: pointer to set
 */
LabSetInt64 LabSetInt64::operator - ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;
    for( int i = 0; i < data_len; i++ )
        rv.data[i] = data[i] & ( ~rhs.data[i] );    // bitwise a AND ~b
    return rv;
}

/**
 * "operator ^ " performs set symmetric difference operation (xor).
 * returns: pointer to set
 */
LabSetInt64 LabSetInt64::operator ^ ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;
    for( int i = 0; i < data_len; i++ )
        rv.data[i] = data[i] ^ rhs.data[i];         // bitwise XOR
    return rv;
}

/** *****************************************************************************
*********************************************************************************/

} /* namespace elps */ 
```

对于其余的实施，我对性能非常满意，但再一次，任何好的评论都将非常非常感谢。

非常感谢您的时间。

**编辑：** 好吧，毕竟我并不完全相信“稀疏”解决方案，因为我需要联合、交集、差异特征，我想这比我的“按位”版本要贵得多（需要迭代通过潜在的大量项目），所以我仍然有兴趣获得一些关于如何**将上述“MIT HAKMEM”算法转换为 64 位的**帮助。非常感谢。

编辑：这个版本包含一些小瑕疵。请更好地查看下面给出的源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:38:43.377

在他的网站上，Russ Cox 描述了一个[非常简单的整数集数据结构](http://research.swtch.com/sparse)，它具有 O(n) 迭代（相对于 O(U)，其中 U 是某个最大值）和 O(1) 插入、删除和计数。它不使用任何摆弄。它也倾向于使用更多空间，但可以扩展为具有 O(1) 摊销附加（通过简单地使用`std::vector`而不是普通数组）。

（我会粘贴示例代码，但我认为 Cox 的描述足够清晰，我只是介绍错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:51:53.657

因此，在研究了一些其他库（[BitMagic](http://bmagic.sourceforge.net/)和一些 C++ 和 java 实现）和很多基准测试之后：

（由于需要快速组合运算符，我拒绝了“稀疏”选项）...

我进行了一些有趣的改进。

主要的改进是我现在可以随时保持基数（这意味着快速计数不再是一个大问题）。

改进：

*   迭代（这是我的第一个问题）仍然比（BitMagic）慢一点，但可以。将我的表现与 BitMagic 的表现进行比较证实了我的课程并没有那么糟糕，毕竟......但 BitMagic 的目的主要是“通过使用压缩来节省内存”，并且在处理时比 boost（我想在这里避免）慢得多与大向量。
*   显着改进了我们计算基数的方式。

## 更好的迭代：

```
inline int nb_trailing_zeros(uint64_t v) {
    if (v & 1l) return 0;           // Fast check if no trailing zeros
                                    // Avoids a useless call to __builtin_ctzl()
    else return __builtin_ctzl(v);
} 
```

两个改进：使用 gcc 的内置函数来计算尾随零，并避免在块以 1 开头时调用它，从而显着提高了迭代时的性能。

## 更好的计数：

**内置`sse4.2`popcount函数的用法：**

```
inline int popcount(uint64_t x) {
//      int count;
//      for (count=0; x; count++)
//          x &= x-1;
//      return count;
    return _mm_popcnt_u64(x); //__builtin_popcount(x) is ok too
// Thanks to @cschwan for pointing me on this
} 
```

“_mm_popcnt_u64”需要额外的编译选项“-m64 -msse4.2”（不是“__builtin_popcount”）

**添加了以下功能：**

```
int LabSetInt64::CU ( const LabSetInt64 &rhs ) {
    int sum = 0;
    for(int i=0; i<data_len; i++)
        sum += popcount(data[i] | rhs.data[i]);
    return sum;
} 
```

比做运算快，然后计数。

**“优化计数”选项（`CNT_OPT`模式）：**请参阅下面的新类版本

稍微减慢组合操作（只是一些，不用担心......）

## 更快的插入：

仅在未找到时插入：

```
void LabSetInt64::Set(int i) {
    int n = i / 64;
    uint64_t shift1l = 1l << (i % 64);
    if ( !(data[n] & shift1l) ) {               // Not found
        data[n] |= shift1l;
        if (CNT_OPT) ++cardinality;
    }
} 
```

首先检查该位是否已设置比在任何情况下都设置它要快。（我们尝试插入的零最多，我们节省的时间最多）。在设置未设置位的情况下，性能保持不变。

## 添加了一些更快的运算符：

```
const LabSetInt64 & LabSetInt64::operator +=  ( const LabSetInt64 & rhs) {
    for( int i = 0; i < data_len; i++ )
        data[i] = data[i] | rhs.data[i];            // bitwise OR
    return *this;
} 
```

A += B 现在比 A = A + B 快得多（保存要返回的新向量的实例化）

**添加了一些方便的功能和操作符：**见下面的新类版本

[ `Header`]

```
/**
 * If the set to 1, will be optimized for counting (cardinality updated on the fly).
 * WARNING : Optimizing for counting will slow down a little the following features :
 *              - Binary operation : (~, +, *, -, ^)
 */
#define CNT_OPT                 1

#define DEFAULT_SIZE_IN_BITS    1000000

//This is better when most bits in x are 0
inline unsigned int popcount(uint64_t x) {
    //      // It uses 3 arithmetic operations and one comparison/branch per "1" bit in x.
    //      int count;
    //      for (count=0; x; count++)
    //          x &= x-1;
    //      return count;
    return _mm_popcnt_u64(x); //__builtin_popcountl(x); //
}

/**
 * Counts trailing zeros starting from a given point
 * @param v Input to count trailing zero bits
 * @return c will count v's trailing zero bits,
             so if v is 1101000 (base 2), then c will be 3
 */
inline int nb_trailing_zeros(uint64_t v) {
    if (v & 1l) return 0;           // Fast check if no trailing zeros
                                    // Avoids a useless call to __builtin_ctzl()
    else return __builtin_ctzl(v);
}

class LabSetInt64
{
public:

    LabSetInt64();
    /**
     * Instantiates a bitset with a given maximum size.
     * @param sizeinbits Maximum size of the population
     */
    LabSetInt64(unsigned int sizeinbits);
    LabSetInt64(const LabSetInt64 &);

    virtual ~LabSetInt64();

    void Clear();
    void Resize(unsigned int sizeinbits);
    /**
     * WARNING : no check is perform whether i is in the correct range :
     *           i MUST be in [0, size_in_bits-1]
     */
    void Set(int i);
    void UnSet(int i);
    //    void Set(int i, bool b);
    int  Cardinality();

    bool Find(int i);
    void Print();

    int GetFirst();
    int ChooseOne();
    int GetAt(int n);

    const LabSetInt64 & operator = ( const LabSetInt64 & );

    /**
     * All the following operators assume that left and right operands
     * have the same size "size_in_bits" (enough for our needs,
     * since memory usage is not really a problem for us).
     */
    LabSetInt64         operator ~  () const;                   /** Inversion      **/
    LabSetInt64         operator +  ( const LabSetInt64 & );    /** Union          **/
    LabSetInt64         operator *  ( const LabSetInt64 & );    /** Intersection   **/
    LabSetInt64         operator -  ( const LabSetInt64 & );    /** Difference     **/
    LabSetInt64         operator ^  ( const LabSetInt64 & );    /** Symmetrical D. **/

    /**
     * Comparison.
     */
    bool                operator == ( const LabSetInt64 & ) const;
    bool                operator != ( const LabSetInt64 & ) const;

    /**
     * Convenient, moreover :
     * (A += B) is actually a lot faster than (A = A + B)...
     * [ No intermediary storage ]
     */
    const LabSetInt64 & operator +=  ( const LabSetInt64 & );
    const LabSetInt64 & operator *=  ( const LabSetInt64 & );
    const LabSetInt64 & operator -=  ( const LabSetInt64 & );
    const LabSetInt64 & operator ^=  ( const LabSetInt64 & );

    const LabSetInt64 & INV();

    /**
     * Gets the population count of the union.
     * Faster than realizing the union, then calling Cardinality().
     * [ No intermediary storage ]
     */
    int CU  ( const LabSetInt64 & );
    int CI  ( const LabSetInt64 & );
    int CD  ( const LabSetInt64 & );
    int CSD ( const LabSetInt64 & );

    /**
     * Basic iterator facility.
     */
    class iter {
    public:
        iter(LabSetInt64 & bv) { pos_ = -1; bv_ = &bv; }

        void reset() { pos_ = -1; }
        int  end()   { return -2; }
        int  next()  { pos_ = bv_->next_set_bit(pos_); return pos_; }

    private:
        int           pos_;
        LabSetInt64 * bv_;
    };

private:

    uint64_t *   data_;
    unsigned int data_len_;
    unsigned int size_in_bits_;
    unsigned int cardinality_;

    void init_bitset(unsigned int sizeinbits);
    int  calc_cardinality();
    int  next_set_bit(int i);
}; 
```

[ `Implementation`]

```
LabSetInt64::LabSetInt64() {
    init_bitset(DEFAULT_SIZE_IN_BITS);
}

LabSetInt64::LabSetInt64(unsigned int sizeinbits) {
    init_bitset(sizeinbits);
}

void LabSetInt64::init_bitset(unsigned int sizeinbits) {
    // +1 (the last higher weighted bit is 0 : allows to stop when iterating)
    // See example in "Print()" function
    size_in_bits_ = sizeinbits + 1;
    data_len_ = (size_in_bits_ + 63) / 64;
    data_ = new uint64_t[data_len_];
    if (CNT_OPT) cardinality_ = 0;
    Clear();                        // Start filled with 0s. // Necessary...    
}

LabSetInt64::LabSetInt64(const LabSetInt64& src) {
    size_in_bits_ = src.size_in_bits_;
    data_len_ = src.data_len_;
    data_ = new uint64_t[data_len_];
    memcpy( data_, src.data_, src.data_len_ * sizeof(uint64_t) );
    cardinality_ = src.cardinality_;
}

LabSetInt64::~LabSetInt64() {
    if (data_ != NULL) delete[] data_;
}

void LabSetInt64::Clear() {
    std::fill_n(data_, data_len_, 0);

    if (CNT_OPT) cardinality_ = 0;
}

void LabSetInt64::Resize(unsigned int sizeinbits) {
    bool truncated;
    unsigned int new_sizeinbits = sizeinbits + 1;

    if (size_in_bits_ != new_sizeinbits)
    {
        truncated = (size_in_bits_ > new_sizeinbits);
        size_in_bits_ = new_sizeinbits;
        unsigned int new_size = (size_in_bits_ + 63) / 64;

        if (new_size != data_len_)      // Resize only if storage size changed
        {
            uint64_t *new_data = new uint64_t[new_size];
            if (!truncated)             // Clear : required only if extended
                std::fill_n(new_data, new_size, 0);

            memcpy( new_data, data_, std::min(data_len_, new_size) * sizeof(uint64_t) );

            data_len_ = new_size;
            delete [] data_;
            data_ = new_data;
        }

        //--
        if (truncated) {
            // Clear the bits beyond the maximum size
            unsigned int begin = sizeinbits;
            unsigned int end = data_len_ * 64;
            for ( unsigned int i = begin; i<end; ++i ) UnSet(i);
            // Update cardinality
            if (CNT_OPT) cardinality_ = calc_cardinality();
        }
    }
}

void LabSetInt64::Set(int i) {

    int n = i / 64;
    uint64_t shift1l = 1l << (i % 64);
    if ( !(data_[n] & shift1l) ) {              // Not found
        data_[n] |= shift1l;
        if (CNT_OPT) ++cardinality_;
    }
}

void LabSetInt64::UnSet(int i) {

    int n = i / 64;
    uint64_t shift1l = 1l << (i % 64);
    if ( data_[n] & shift1l ) {                 // Found
        data_[n] &= ~shift1l;
        if (CNT_OPT) --cardinality_;
    }
}

//void LabSetInt64::Set(int i, bool b) {
//  if(b) Set(i); else UnSet(i);
//}

bool LabSetInt64::Find(int i) {
    return ((data_[i / 64]) & (1l << (i % 64)));
}

int LabSetInt64::Cardinality() {
    if (CNT_OPT) return cardinality_;
    else return calc_cardinality();
}

int LabSetInt64::calc_cardinality() {
    unsigned int sum = 0;

    for(unsigned int i=0; i<data_len_; i++)
        sum += popcount(data_[i]);
        //sum += bitcount64_4way(data[i], data[i+1], data[i+2], data[i+3]);

    return sum;
}

int LabSetInt64::next_set_bit(int i) {
    ++i;
    unsigned int x = i / 64;
    uint64_t w = data_[x];
    w >>= (i % 64);
    if (w != 0) {
        return i + nb_trailing_zeros(w);
    }
    ++x;
    for (; x < data_len_; ++x) {
        if (data_[x] != 0) {
            return x * 64 + nb_trailing_zeros(data_[x]);
        }
    }
    return -2;
}

void LabSetInt64::Print() {

    cout << "\nSet size : " << this->Cardinality() << endl;
    cout << "{ ";
    int cnt = 0;
    iter it(*this);
    for (int val = it.next(); val != it.end(); val = it.next())
    {
        cout << (val) << " ";
        if ((++cnt) % 30 == 0) cout << endl;
    }
    cout << "}" << endl;
}

int LabSetInt64::GetFirst() {
    return this->next_set_bit(-1);
}

int LabSetInt64::ChooseOne() {
    // Get lucky...
    int id = rand() % this->size_in_bits_;
    // Otherwise...
    if (!Find(id))
        id = GetAt(rand() % this->Cardinality());
    return id;
}

int LabSetInt64::GetAt(int n) {

    int cnt = 0, val;
    iter it(*this);
    while ((val = it.next()) != it.end() && cnt++ != n) {  }

    return val;
}

// *************************************************

/*----------------------------------------------------------------------------*
 **  "operator = " assigns the right hand side to this set.
 **
 **  returns: nothing
 */
const LabSetInt64 &LabSetInt64::operator = ( const LabSetInt64 &rhs )
{
    if( &rhs != this )                              // avoid self assignment
    {
        this->Resize(rhs.size_in_bits_ - 1);
        memcpy( data_, rhs.data_, rhs.data_len_ * sizeof(uint64_t) );

        if (CNT_OPT) cardinality_ = rhs.cardinality_;
    }
    return *this;                                   // enable x = y = z;
}

/*----------------------------------------------------------------------------*
**  "operator ~ " performs set complement operation (not).
**
**  returns: pointer to set
*/
LabSetInt64 LabSetInt64::operator ~ () const
{
    LabSetInt64 rv;

    unsigned int i;
    for( i = 0; i < data_len_; i++ ) {
        rv.data_[i] = ~data_[i];                        // bitwise complement
        if (CNT_OPT) rv.cardinality_ += popcount(rv.data_[i]);
    }

    rv.size_in_bits_ = size_in_bits_;
    // Clear the bits beyond the maximum size
    unsigned int begin = rv.size_in_bits_ - 1;
    unsigned int end = data_len_ * 64;
    for ( i = begin; i<end; ++i ) rv.UnSet(i);

    return rv;
}

/*----------------------------------------------------------------------------*
**  "operator + " performs set union operation (or).
**
**  returns: pointer to set
*/
LabSetInt64 LabSetInt64::operator + ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;

    for( unsigned int i = 0; i < data_len_; i++ ) {
        rv.data_[i] = data_[i] | rhs.data_[i];            // bitwise OR
        if (CNT_OPT) rv.cardinality_ += popcount(rv.data_[i]);
    }

    return rv;
}

/*----------------------------------------------------------------------------*
**  "operator * " performs set intersection operation (and).
**
**  returns: pointer to set
*/
LabSetInt64 LabSetInt64::operator * ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;

    for( unsigned int i = 0; i < data_len_; i++ ) {
        rv.data_[i] = data_[i] & rhs.data_[i];        // bitwise AND
        if (CNT_OPT) rv.cardinality_ += popcount(rv.data_[i]);
    }

    return rv;
}

/*----------------------------------------------------------------------------*
**  "operator - " performs set difference operation.
**
**  returns: pointer to set
*/
LabSetInt64 LabSetInt64::operator - ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;

    for( unsigned int i = 0; i < data_len_; i++ ) {
        rv.data_[i] = data_[i] & ( ~rhs.data_[i] );       // bitwise a AND ~b
        if (CNT_OPT) rv.cardinality_ += popcount(rv.data_[i]);
    }

    return rv;
}

/*----------------------------------------------------------------------------*
**  "operator ^ " performs set symmetric difference operation (xor).
**
**  returns: pointer to set
*/
LabSetInt64 LabSetInt64::operator ^ ( const LabSetInt64 &rhs )
{
    LabSetInt64 rv;

    for( unsigned int i = 0; i < data_len_; i++ ) {
        rv.data_[i] = data_[i] ^ rhs.data_[i];            // bitwise XOR
        if (CNT_OPT) rv.cardinality_ += popcount(rv.data_[i]);
    }

    return rv;
}

bool LabSetInt64::operator == ( const LabSetInt64 &rhs ) const {

    if ((CNT_OPT) && (cardinality_ != rhs.cardinality_)) return false;

    for( unsigned int i = 0; i < data_len_; i++ )
    {
        if (data_[i] != rhs.data_[i]) {
            return false;
        }
    }
    return true;
}

bool LabSetInt64::operator != ( const LabSetInt64 &rhs ) const {

    return !(*this == rhs);
}

const LabSetInt64 & LabSetInt64::operator +=  ( const LabSetInt64 & rhs) {

    if (CNT_OPT) cardinality_ = 0;
    for( unsigned int i = 0; i < data_len_; i++ ) {
        data_[i] = data_[i] | rhs.data_[i];
        if (CNT_OPT) cardinality_ += popcount(data_[i]);
    }

    return *this;
}

const LabSetInt64 & LabSetInt64::operator *=  ( const LabSetInt64 & rhs) {

    if (CNT_OPT) cardinality_ = 0;
    for( unsigned int i = 0; i < data_len_; i++ ) {
        data_[i] = data_[i] & rhs.data_[i];
        if (CNT_OPT) cardinality_ += popcount(data_[i]);
    }

    return *this;
}

const LabSetInt64 & LabSetInt64::operator -=  ( const LabSetInt64 & rhs) {

    if (CNT_OPT) cardinality_ = 0;
    for( unsigned int i = 0; i < data_len_; i++ ) {
        data_[i] = data_[i] & ( ~rhs.data_[i] );
        if (CNT_OPT) cardinality_ += popcount(data_[i]);
    }

    return *this;
}

const LabSetInt64 & LabSetInt64::operator ^=  ( const LabSetInt64 & rhs) {

    if (CNT_OPT) cardinality_ = 0;
    for( unsigned int i = 0; i < data_len_; i++ ) {
        data_[i] = data_[i] ^ rhs.data_[i];
        if (CNT_OPT) cardinality_ += popcount(data_[i]);
    }

    return *this;
}

// *************************************************

const LabSetInt64 & LabSetInt64::INV() {

    unsigned int i;

    if (CNT_OPT) cardinality_ = 0;
    for( i = 0; i < data_len_; i++ ) {
        data_[i] = ~data_[i];
        if (CNT_OPT) cardinality_ += popcount(data_[i]);
    }

    // Clear the bits beyond the maximum size
    unsigned int begin = size_in_bits_ - 1;
    unsigned int end = data_len_ * 64;
    for ( i = begin; i<end; ++i ) UnSet(i);

    return *this;
}

// *************************************************

int LabSetInt64::CU ( const LabSetInt64 & rhs ) {
    int sum = 0;
    for( unsigned int i=0; i < data_len_; i++ )
        sum += popcount(data_[i] | rhs.data_[i]);
    return sum;
}

int LabSetInt64::CI  ( const LabSetInt64 & rhs ) {
    int sum = 0;
    for( unsigned int i=0; i < data_len_; i++ )
        sum += popcount(data_[i] & rhs.data_[i]);
    return sum;
}

int LabSetInt64::CD  ( const LabSetInt64 & rhs ) {
    int sum = 0;
    for( unsigned int i=0; i < data_len_; i++ )
        sum += popcount(data_[i] & (~rhs.data_[i]));
    return sum;
}

int LabSetInt64::CSD ( const LabSetInt64 & rhs ) {
    int sum = 0;
    for( unsigned int i=0; i < data_len_; i++ )
        sum += popcount(data_[i] ^ rhs.data_[i]);
    return sum;
} 
```

## 关于便携性的注意事项：

一些架构（如`Windows 7`+ `MinGW`），其中`long`只有 32 位，在上面的代码中替换所有出现的：

*   `1l`和`1ll`
*   `__builtin_popcountl`和`__builtin_popcountll`
*   `__builtin_ctzl`和`__builtin_ctzll`

这将确保您始终使用 64 位数字 ( `long long`)。

好吧，我希望这是信息丰富的，它可以成为其他一些人的一个很好的起点。

# mysql - 使用 facebook 远程访问 mySQL

> ID：14981144
> 
> 赞同：0
> 
> 时间：2013-02-20T13:32:43.973
> 
> 标签：mysql, facebook

我在一个 Facebook 应用程序中工作，我想访问一个 mySQL 数据库。我已经安装了 xampp，因为它有 php、apache、mysql 等。我需要从我一直在寻找如何以远程模式访问的应用程序访问 mySQL 数据库，但我没有找到解决方案。

从 php 访问 mySQL 数据库的一般方法是：mysql_connect("localhost","user","password"); 我已经配置了一个没有pass的数据库，它接受任何用户名，但我不知道第一个要放什么，一个ip，一个普通ip？我怎么知道我的服务器 ip 是什么？如果我在 localhost 中使用它执行一个简单的程序，效果很好，但如果我在应用程序中执行相同操作，我会遇到这个问题：连接到数据库时出错

在寻找解决方案时，我发现我必须像这样修改 mySQL 中的“my.ini”：
#bind-address="127.0.0.1" 或 bind-address = "0.0.0.0" 但我有同样的问题。

如果有帮助，我也在使用 heroku 和 git bash。

[https://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook) [https://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:18:03.810

在 mysql_connect 函数的第一部分，您可以只输入服务器的域名，例如`mysql_connect( 'mysqlserver.com', 'user', 'pass' );`，这应该可以工作（如果您有它的域名，那就是）。

在您的服务器上使用该`ipconfig`命令将为您提供它的 IP 地址。除了允许远程访问数据库之外，您不需要更改任何 MySQL 设置。

# perl - 如何使用批处理从perl返回正则表达式匹配值？

> ID：14981150
> 
> 赞同：0
> 
> 时间：2013-02-20T13:33:15.210
> 
> 标签：perl, batch-file

我正在使用批处理执行 perl 正则表达式命令，例如：

```
perl -p -e "<my regex>" c:\file.txt
PAUSE 
```

我如何告诉 perl 将其作为可验证返回，然后使用批处理回显打印结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:50:32.493

```
@echo off
for /f "delims=" %%q in ('perl -e"print q{a b c}"') do set var=%%q
echo %var%
pause 
```

或者

```
@echo off
for /f "usebackq delims=" %%q in (`perl -e"print 'a b c'"`) do set var=%%q
echo %var%
pause 
```

# node.js - Node JS worker - 需要他们吗？

> ID：14981154
> 
> 赞同：20
> 
> 时间：2013-02-20T13:33:26.927
> 
> 标签：node.js, message-queue

原谅我的无知，但是来自 Django/Python 背景，我可以看到让 Celery 队列在后台处理较慢的进程，同时尽可能快地更新 Web 界面的巨大好处。

然而，随着 Node 异步工作，队列系统的用例是否大大减少了？

例如：

1 - 用户向站点发布内容，2 - 站点响应，然后向管理员发送邮件。

在 Django 中，您将管理邮件发送到一个任务，稍后执行，然后响应请求。Celery 在后台发送邮件。

在 Node 中，您调用您的邮件程序，然后响应请求。然后，邮件程序发送一个回调来表示是否完成，此时用户已经在查看响应。

那么我为什么要在 Node 中使用队列呢？我猜什么时候事情会比这更复杂 - 似乎对于事务性邮件这样的琐碎事情来说，它是没有必要的..

还是我误解了它的工作原理！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T01:47:18.550

没错，节点中的延续非常好，如果您在单个节点进程中运行所有内容，则不需要立即使用队列。但是，由于节点是单线程的，节点在忙于发送该电子邮件或处理该任务时将无法处理任何新的传入请求（如果它是一个 CPU 密集型任务）

因此，如果您的任务需要一段时间才能明智地处理 cpu，那么使用外部队列和单独的进程来处理这些任务/消息可能仍然值得。例如，如果您的任务是 io 密集型的并且需要一段时间，因为它们正在等待来自其他服务器的响应，那么就不再需要了，因为 node 可以很好地处理 io。

如果您有一个 cpu 密集型任务，但您不想部署队列，您可以创建更多节点进程和机器实例并在它们之间进行负载平衡，所有这些都让它们处理这些任务。这种方法的缺点是您不能单独扩展网站和后台处理。（例如 5 个处理 Web 请求的实例和 2 个工作实例）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T20:08:26.127

不，队列总是有用例，即使在 Node 世界中也是如此。我见过几个人在不同程度上成功使用的一种基本方法是使用 Redis 支持的队列来存储消息或任务。您可能有一个 Node 进程将项目添加到队列中，而另一个 Node 实例处理来自队列的项目。此外，查看[队列模块](https://github.com/joyent/node/wiki/modules#wiki-message-queue)的节点模块列表，您会看到大量的实现。

# android - 使用 Android 进行文本预测

> ID：14981156
> 
> 赞同：0
> 
> 时间：2013-02-20T13:33:32.207
> 
> 标签：android, text, prediction

我想开发一个应用程序，用户将在 android 触摸屏设备的屏幕上书写，并在上面的小部件中生成单词提示。当用户单击提示时，它将被放置在 Textview 的上方。我打算使用gestureoverlayview类来设计书写区域。

我有自己的识别器模块。因此我不会使用三星安卓中的预测模块。

我的问题是，我应该使用哪个小部件来显示提示？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:weightSum="10">
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:weightSum="5"
    android:layout_weight="3">
    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight="2"
        android:text="Hello"
         />

    <ListView
        android:id="@+id/ListView1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" 
        android:layout_weight="3">

    </ListView>
</LinearLayout>
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="5"
    android:layout_weight="6">

    </LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="6"
    android:layout_weight="1">

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:58:14.950

AutoCompleteTextView 成功了

# ruby-on-rails - 没有任何宝石的Rails auth

> ID：14981158
> 
> 赞同：1
> 
> 时间：2013-02-20T13:33:36.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我像在旧的 php 网站上一样进行了自己的身份验证，为此我使用会话和通过 md5 哈希。我的身份验证后的会话如下所示：

```
{"session_id"=>"874e2703dbaa562da8350fe141612cb6", "_csrf_token"=>"o3g5VHz7f6BPCwpaphI/7qnBnaDVBcguKVB4lXqvUss=", "user_id"=>2, "login"=>"123", "avatar"=>/uploads/resume/avatar/2/avatars/noava.jpg, "group_id"=>1} 
```

所有其他事情都已完成，但是现在我如何根据我的会话限制对控制器中不同操作的访问？

或者我可以用设计和康康宝石解决这个问题吗？他们正在使用 bcrypt，但我在 md5 中的旧密码我不能用于那个 bcrypt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:40:54.930

您混淆了身份验证和授权的概念。

您已经建立了自己的身份验证 - 您知道人们是谁。Devise 是处理身份验证的 gem 的一个示例。

授权控制人们可以做什么，并且完全独立于身份验证。Cancan 是处理授权的 gem 的一个示例。

使用 Cancan 或[此处](https://www.ruby-toolbox.com/categories/rails_authorization)的任何内容。

# c++ - QMediaPlayer 未定义引用链接器错误

> ID：14981160
> 
> 赞同：5
> 
> 时间：2013-02-20T13:33:39.107
> 
> 标签：c++, qt

我安装了 Qt5，由于 Qt5 不支持 Phonon，我不得不使用其他东西，所以我决定使用 QtMultimedia。

。轮廓：

```
QT       += core gui
CONFIG += mobility
MOBILITY += multimedia 
```

.cpp 代码：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui>
#include <QtCore>
#include <QtMultimedia/QMediaPlayer>

...

void MainWindow::on_pushButton_clicked()
{
    QMediaPlayer *player = new QMediaPlayer(this);
    player->setVolume(50);
    player->setMedia(QUrl::fromLocalFile("some_path"));
    player->play();
} 
```

但我收到以下错误：

![在此处输入图像描述](../Images/804ec473eeb68d2442ed99a933d1955e.png)

我该如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:40:06.863

*在 .pro 文件中将多媒体*模块添加到 QT，*运行 qmake*然后构建您的项目：

```
QT += core gui multimedia 
```

在 Qt 5 中， QMediaPlayer 类位于多媒体[模块](https://qt-project.org/doc/qt-5.0/qtmultimedia/qtmultimedia-index.html)中。你可能也想要[小部件](https://qt-project.org/doc/qt-5.0/qtwidgets/qtwidgets-index.html)模块（我看到你有一个主窗口）

LE：使用不带模块文件夹的包含：

```
#include <QMediaPlayer> 
```

# mysql - MySQL 加入更新

> ID：14981168
> 
> 赞同：0
> 
> 时间：2013-02-20T13:34:09.673
> 
> 标签：mysql, sql, join

一个（据说）简单的更新结果并不是那么简单。无论我从其他已回答的问题中尝试哪种语法，我都会从 MySQL 得到相同的响应：

0 行受影响行匹配：124 更改：0 警告：0

尝试1：

```
UPDATE news_content, news_map
SET news_content.active='no'
WHERE news_content.rowID = news_map.newsID
AND news_map.catID = 170; 
```

尝试2：

```
UPDATE  news_content
LEFT JOIN
    news_map
ON      news_map.newsID = news_content.rowID
SET     news_content.active = 'no'
WHERE   news_map.catID = 170; 
```

尝试3：

```
UPDATE 
news_content nc JOIN
news_map nm 
  ON nm.newsID = nc.rowID 
  AND nm.catID = 170
SET nc.active = 'no'; 
```

你认为什么会起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:43:34.107

可能是一个愚蠢的问题，但 news_content.active 是否已经等于“不”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:39:08.350

是否有任何由此返回的行：

```
select *
from news_content
LEFT JOIN
    news_map
ON      news_map.newsID = news_content.rowID
WHERE   news_map.catID = 170 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:29:09.053

尝试这个：

```
UPDATE news_content
SET active='no'
WHERE rowID IN (SELECT m.newsID FROM news_map m WHERE m.catID = 170); 
```

一般来说，我更喜欢在 UPDATE 上使用子查询而不是 JOIN，因为它是一种更标准的方式。

# nuget - Nuget 错误：请提供以下凭据：https://www.myget.org/F

> ID：14981171
> 
> 赞同：6
> 
> 时间：2013-02-20T13:34:18.380
> 
> 标签：nuget, tfsbuild, myget

Nuget 一直告诉我它无法在非交互模式下提示输入。我将凭据添加到 nuget.config 并将 nuget -NonInteractive 开关添加到 nuget 命令。我想我做错了什么......但是什么？

部分构建日志：

```
RestorePackages:
  C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.exe sources add -name rai69 -source "https://www.myget.com/F/rai69/"
  Package Source with Name: rai69 added successfully.
  C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.exe setapikey 763736d6-ff35-45ca-af37-064cfc87fc45 -source "https://www.myget.com/F/rai69/"
  The API Key '763736d6-ff35-45ca-af37-064cfc87fc45' was saved for 'https://www.myget.com/F/rai69/'.
  C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.exe sources update -name rai69 -user **** -pass ****
  Package source "rai69" was successfully updated.
  attrib -r C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.config
  copy %appdata%\nuget\nuget.config C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget /y
      1 file(s) copied.
  "C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.exe" install "C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\TfsOnlineBuildNugetTest\packages.config" -source "https://www.myget.org/F/rai69/" -o "C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\packages" -verbosity detailed -noninteractive 
  Please provide credentials for: https://www.myget.org/F/rai69/
C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.targets(121,7): error : Cannot prompt for input in non-interactive mode.     [C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\TfsOnlineBuildNugetTest\TfsOnlineBuildNugetTest.csproj]
  UserName: 
C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.targets(121,7): error MSB3073: The command ""C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\.nuget\nuget.exe" install         "C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\TfsOnlineBuildNugetTest\packages.config" -source "https://www.myget.org/F/rai69/" -o "C:\a\src\d\projects\poc\TfsOnlineBuildNugetTest\packages" -verbosity detailed -noninteractive " exited with code 1\. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:38:48.497

您现在可以在本地 nuget.config 中正确使用明文密码，如本文所述：[http ://www.xavierdecoster.com/deploying-to-azure-web-sites-using-nuget-package-restore-from -a-secured-feed](http://www.xavierdecoster.com/deploying-to-azure-web-sites-using-nuget-package-restore-from-a-secured-feed)

另请查看[http://docs.nuget.org/docs/reference/nuget-config-settings](http://docs.nuget.org/docs/reference/nuget-config-settings)上的 nuget.config 设置文档。

# android - 添加具有不同版本的相同支持库的多个库项目会产生问题

> ID：14981172
> 
> 赞同：1
> 
> 时间：2013-02-20T13:34:18.983
> 
> 标签：android, android-support-library, android-facebook

我正在开发一个包含与 facebook 集成的应用程序，并通过名为 socialize 的第三方库提供共享和其他设施。我将这两个 sdk 用作库项目。当我将我的项目与这个库项目附加时，我看到有这两个项目中都提供了两个不同的 android-support.v4 库。但是，当我尝试删除它们中的任何一个时，对应的库项目在其 java 文件中显示错误。我不知道如何使所有这些项目引用相同的支持库。有什么方法可以找到哪个版本的支持库在我的项目和库项目中最兼容。

# iphone - 如何将通话从一台蓝牙设备转移到 iPhone 上的另一台蓝牙设备？

> ID：14981175
> 
> 赞同：4
> 
> 时间：2013-02-20T13:34:23.543
> 
> 标签：iphone, ios, objective-c, bluetooth

我有两个连接到 iPhone 的蓝牙设备 (MFi)。这两个设备都支持 HFP。如果从一台设备（没有麦克风和扬声器等硬件）接受呼叫，之后我想将呼叫路由到其他设备（耳机）。是否有任何 API 可以从应用程序或任何其他方式来实现相同的。

我找到了以下相关链接

[如何将 iPhone 音频路由到蓝牙耳机](https://stackoverflow.com/questions/2375837/how-to-route-iphone-audio-to-the-bluetooth-headset)

有什么方法可以从应用程序模拟耳机的接受按钮或将通话会话从一台 HFP 设备转移到另一台 HFP 设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T13:48:26.530

您不能以编程方式执行此操作，因为电话呼叫完全在系统的控制之下。您可以使用 Core Telephony API 访问一些信息，但所有这些信息都是只读的。更改应用程序音频会话的设置不会影响通话中的任何内容。

或者，iOS 7 为您提供了一个方便的界面来手动进行切换。在下面的屏幕截图中，我有一个车载套件和一个在通话期间连接到电话的耳机。单击任何项​​目会立即传输音频。

![通话中音源更改](../Images/4805c59c937b73b4f47fc80d653752a7.png)![通话中音源更改](../Images/b2178e2d36a399baee985ea97ceb20d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T06:53:36.250

如果实现了**HFP**`accepted`，那么通话可以`rejected`来自蓝牙设备`API`。iOS中没有这样做。我认为这是Pebble智能手表中的实现。我们也可以同时查看不同HFP设备中的通话详情（carkit ，智能手表，耳机）。

# android - Firefox for Android 是否使用设备证书存储？

> ID：14981179
> 
> 赞同：7
> 
> 时间：2013-02-20T13:34:44.233
> 
> 标签：android, firefox, ssl, certificate

我发现的唯一证据是：-

[此线程http://support.mozilla.org/en-US/questions/808899](http://support.mozilla.org/en-US/questions/808899)中的用户 kbrosnan提到 Firefox 使用自己的 CA 列表。

在这个网站[http://www.jethrocarr.com/2012/01/04/custom-ca-certificates-and-android/](http://www.jethrocarr.com/2012/01/04/custom-ca-certificates-and-android/) Jethro carr 提到“网站有点不同，因为至少有一些浏览器*盯着 firefox移动设备*依赖于他们自己的内部证书数据库，而不是 Android OS DB”。

我在任何地方都找不到任何具体证据表明 Firefox 正在使用设备证书存储（设置 > 安全 > 可信凭据）。

我问这个的原因是因为我在设备上安装了一个 CA-Root 证书，当我建立连接时 Firefox 不信任，在我看来，它好像没有查看设备证书存储，并且Firefox 有自己的受信任 CA 列表。

请注意，在桌面版 Firefox 上安装此证书可以完美运行，没有任何问题。

我在用：

Firefox 版本：18.0 / 手机：三星 Galaxy S3 / Android 版本：4.1.2

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T21:45:07.823

这是对的。Firefox Mobile for Android 目前使用自己的证书数据库，而不是原生的 Android 数据库。

用户 OERNii 为 Firefox Mobile 创建了一个证书管理器插件，但它只支持 9-13 版本。更多信息可以在[https://addons.mozilla.org/en-US/mobile/addon/cert-manager/](https://addons.mozilla.org/en-US/mobile/addon/cert-manager/)找到。由于过去一年 FF 代码的重大更新，cert DB 的接口方式与以前不同，任何包含证书管理的更新都需要广泛的 Firefox 研究。

与 Android 4.0+ 打包的原生 Android 浏览器利用原生 Android 信任库并允许用户执行 TLS 客户端身份验证。

# javascript - 如何向 Google Directions 路线添加更多路线点？

> ID：14981181
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:34:45.523
> 
> 标签：javascript, google-maps-api-3

我正在使用 Google Directions API。用户在地图上放置标记作为起点和终点。您能告诉我如何在路线中添加更多路线点吗？现在我只能添加 2 个标记：起点和终点。我想知道我应该如何定义是否要添加 4,5 或更多路线点？这是我的代码：

```
function addRoute(event) {
        if(markers.length < 50){
            var marker = new google.maps.Marker({
                position: event.latLng,
                map: map,
                draggable: true
            });
            markers.push(marker);
        }

        if(markers.length == 2){
            var start = markers[0].getPosition();
            var end = markers[1].getPosition();

            putDirections(start, end);

            $(markers).each(function(i, marker){
                google.maps.event.addListener(marker, 'dragend', function(){
                    clearDirections();
                    var start = markers[0].getPosition();
                    var end = markers[1].getPosition();
                    putDirections(start, end);
                });
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:07:55.033

```
directionsService.route({waypoints: waypts, /*other options*/}); 
```

您还可以添加 optimizeWaypoints: true 如果您希望 google 计算航点的顺序以使路线最短。

# magento - 删除页脚

> ID：14981188
> 
> 赞同：0
> 
> 时间：2013-02-20T13:35:11.567
> 
> 标签：magento

我试图从 magento 的客户帐户页面中删除页脚站点地图。我通过在部分中添加代码来更改 local.xml 文件

```
 <reference name="footer">
        <remove name="footer_sitemap" />
    </reference> 
```

我有一个奇怪的问题。在我的项目中，我有 4 个主要类别（子商店）。当我从 2-nd 和 3-rd 类别登录时，页脚被禁用，但是当我从另一个类别页脚进入登录页面时.... URL 可能有问题？还是缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:42:49.797

Ant 我相信你的问题是因为页脚被缓存了。

当我在我的推特提要中加入时，我遇到了同样的问题。

试试这个 - [http://ken.edmonds-commerce.co.uk/magento/disable-footer-block-caching-in-magento/](http://ken.edmonds-commerce.co.uk/magento/disable-footer-block-caching-in-magento/)

# android - 在姜饼和冰淇淋三明治中呈现不同的微调器

> ID：14981193
> 
> 赞同：2
> 
> 时间：2013-02-20T13:35:26.450
> 
> 标签：android, actionbarsherlock, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我不明白为什么某些元素的渲染方式不同。这是一个*模拟*的ActionBar，我在其中放置了一个 Spinner 来更改在线状态。然而，微调器中的文本在 Desire HD (2.3.5) 和 Nexus 7 (4.2.2) 上可见，但在 LG P990 (4.0.4) 上当前微调器项目不可见我设置了实际位置带有一个绿色矩形。

![GB和ICS截图](../Images/cfcec982571dde9c507aa2f1e2b3f75f.png)

这是我的代码，我在其中稍微操作了 Spinner，以便文本可读：

```
IcsSpinner status = (IcsSpinner)content.findViewById(R.id.status);
OnlineAdapter adapter = new OnlineAdapter(status.getContext());
status.setAdapter(adapter);
status.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(IcsAdapterView<?> parent, View v, int position, long id) {
        TextView tv = (TextView)parent.getChildAt(0);
        tv.setTextSize(12);
        tv.setPadding(0, 0, 0, 0);
    }

    public void onNothingSelected(IcsAdapterView<?> parent) {
    }
}); 
```

顺便说一下，上面的代码片段中的默认 Spinner 看起来是一样的，我使用的是 ActionBarSherlock 的后端端口。

我尝试使用：

```
tv.setPadding(0, -12, 0, 0); 
```

这对于 ICS 设备看起来不错，但在 GB 和 JB 上看起来不太好。

这是什么原因？
如何检测是否需要更正位置？

# java - 使用 GSON 解析 JSON 提要并获取数组而不是多参数

> ID：14981196
> 
> 赞同：3
> 
> 时间：2013-02-20T13:35:31.167
> 
> 标签：java, android, json, parsing, gson

我正在尝试在 Android 应用程序上解析一个 ELGG resfull 网络服务（[http://elgg.pro.tn/services/api/rest/json/?method=system.api.list](http://elgg.pro.tn/services/api/rest/json/?method=system.api.list)）。

我正在使用 GSON 库将 JSON 提要转换为 JAVA 对象，我为转换创建了所有需要的类（映射）

问题出在 jSON 格式上（我无法更改）：

```
{
   "status":0,
   "result":{
      "auth.gettoken":{
         "description":"This API call lets a user obtain a user authentication token which can be used for authenticating future API calls. Pass it as the parameter auth_token",
         "function":"auth_gettoken",
         "parameters":{
            "username":{
               "type":"string",
               "required":true
            },
            "password":{
               "type":"string",
               "required":true
            }
         },
         "call_method":"POST",
         "require_api_auth":false,
         "require_user_auth":false
      },
      "blog.delete_post":{
         "description":"Read a blog post",
         "function":"blog_delete_post",
         "parameters":{
            "guid":{
               "type":"string",
               "required":true
            },
            "username":{
               "type":"string",
               "required":true
            }
         },
         "call_method":"POST",
         "require_api_auth":true,
         "require_user_auth":false
      }
   }
} 
```

这种格式的“结果”包含许多不具有相同名称的子项（即使它们具有我称为“apiMethod”的相同结构），GSON 尝试将其解析为分离的对象，但我想要的是他解析所有“结果”子作为“apiMethod”对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:45:53.530

`Map`如果您不想在对象中定义所有可能的字段，则可以使用 而不是数组来执行此操作`Result`。

```
class MyResponse {

   int status; 
   public Map<String, APIMethod> result;    
}

class APIMethod {

    String description;
    String function;
    // etc
} 
```

否则，您将需要定义一个`Result`要使用的对象，而不是`Map`具有所有可能的“方法”类型作为字段的对象，并`@SerializedName`由于非法 Java 名称而使用注释：

```
class Result {
    @SerializedName("auth.gettoken")
    APIMethod authGetToken;
    @SerializedName("blog.delete_post")
    APIMethod blogDeletePost;
    // etc
} 
```

如果您*真的*想要 a ，选项 C`List`是创建您自己的自定义反序列化器，该反序列化器传递已解析的 JSON，并创建一个包含 a`List`而不是 a`Map`或 POJO 的对象。

```
class MyResponse {
    public int status;
    public List<APIMethod> methods;

    public MyResponse(int status, List<APIMethod> methods) {
        this.status = status;
        this.methods = methods;
    }
}

class MyDeserializer implements JsonDeserializer<MyResponse> {

    public MyResponse deserialize(JsonElement je, Type type, JsonDeserializationContext jdc) throws JsonParseException
    {
        Gson g = new Gson();
        List<APIMethod> list = new ArrayList<APIMethod>();
        JsonObject jo = je.getAsJsonObject();
        Set<Entry<String, JsonElement>> entrySet = jo.getAsJsonObject("result").entrySet();
        for (Entry<String, JsonElement> e : entrySet) {
            APIMethod m = g.fromJson(e.getValue(), APIMethod.class);
            list.add(m);
        }

        return new MyResponse(jo.getAsJsonPrimitive("status").getAsInt(), list);
    }
} 
```

（未经测试，但应该可以）

要使用它，您可以通过以下方式注册它：

```
Gson gson = new GsonBuilder()
                .registerTypeAdapter(MyResponse.class, new MyDeserializer())
                .create(); 
```

# git - 如何为 Google Code 上的 Git 托管项目做出贡献？

> ID：14981199
> 
> 赞同：2
> 
> 时间：2013-02-20T13:35:57.783
> 
> 标签：git, google-code

我对 Git 非常陌生，尤其是在 Google Code 上托管 Git。我的问题是，我如何为 Google Code 上的 Git 托管项目做出贡献。

我已经克隆了原始项目。接下来是什么？以及如何向原始项目发送拉取请求。

我想知道工作流程和 Git 命令。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:39:27.007

与提供 git 存储库的任何其他项目一样（具有内部分叉和拉取请求功能的 github 除外），您可以发布修改后的存储库并将链接和分支名称发送给原始软件的作者，或者使用和`git-format-patch`/或`git-send-email`格式化并将每个添加的提交的补丁发送给作者。

# php - 使用 Azure 媒体服务 REST API 和 PHP 创建资产时出错

> ID：14981201
> 
> 赞同：1
> 
> 时间：2013-02-20T13:36:04.617
> 
> 标签：php, rest, azure, azure-media-services

在执行用于创建资产的 php 代码时出现 HTTP 代码 301 错误：

```
 public function request($arrData = array()){
            $ch = curl_init();
            $arrHeader = array(
                'Authorization: Bearer '.$this->strToken,

            );
        echo 'Call API:'.$this->strUrl."\n";
        curl_setopt($ch, CURLOPT_URL, $this->strUrl);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $arrHeader);
        //curl_setopt($ch, CURLOPT_HEADER, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
        if (!empty($data)){
            curl_setopt($ch, CURLOPT_POSTFIELDS, $this->generateData($arrData));
        }
        $data = curl_exec($ch);
       The value of strUrl is: https://media.windows.net/API/Assets 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:43:58.953

在 C# 中，您将在此处找到重定向处理的工作示例：http: [//createassettask.codeplex.com/SourceControl/changeset/view/21236#458379](http://createassettask.codeplex.com/SourceControl/changeset/view/21236#458379)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:29:46.870

我不确定您使用的 URL 是否正确。这个对我有用。

[https://wamsbluclus001rest-hs.cloudapp.net/API/](https://wamsbluclus001rest-hs.cloudapp.net/API/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T04:55:26.400

PHP 中的问题是，您似乎没有遵循连接到 API 时发生的重定向。REST API 的 MSDN 文档中记录了它。看看这个 MSDN 参考文档，它解释了如何遵循重定向：

[http://msdn.microsoft.com/en-us/library/jj129576.aspx](http://msdn.microsoft.com/en-us/library/jj129576.aspx)

> **连接到媒体服务 URI 媒体服务**的根 URI 是[https://media.windows.net/API/](https://media.windows.net/API/)。您最初应该连接到此 URI，如果您收到 301 重定向作为响应，您应该对新 URI 进行后续调用。此外，请勿在您的请求中使用任何自动重定向/跟随逻辑。HTTP 动词和请求正文不会被转发到新的 URI。

# vb.net - 仅从组合框中选择列表项

> ID：14981204
> 
> 赞同：3
> 
> 时间：2013-02-20T13:36:09.907
> 
> 标签：vb.net

我在 Visual Studio 2010 中有一个 winforms 应用程序。

在一个表单上，我有一个数据绑定组合框，为此我设置了 autocompletesource=listitems 和 autocompletemode=suggestappend。

现在为了让这个功能起作用，我设置了 dropdownstyle=dropdown，这样用户就可以输入一个文本

但我希望用户能够从其下拉列表中仅选择一个可用的项目。

如果用户输入列表项以外的项目并离开组合框，则用户不应离开组合框。

**简而言之，我希望用户只能从可用的列表项中选择项目，而不是他输入的任何内容。**

请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:16:11.167

如果您设置`DropDownStyle = DropDownList`和`AutoCompleteMode = Append`，用户仍然可以键入值来选择他们想要的项目，但他们将被限制为列表中的项目。

时`AutoCompleteMode = Append`，它会通过将它们附加到正在搜索的值中来检查随后键入的字符，只要您快速键入它们即可。如果您在击键之间等待的时间过长，那么它将再次返回到第一个字母搜索。

考虑一下：您是否真的需要他们能够输入无效值，以便提醒他们该值无效？因为如果不是，那只会更加混乱。通过让他们有机会输入任何值，这意味着他们被允许这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T13:43:52.130

将属性“DropDownStyle”设置为“DropdownList”，这将阻止用户输入组合。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-28T05:45:42.227

我寻找一些解决方案，但没有使用限制 DropDownList （键入是时间有限的用户必须快速）。

以前的代码对我来说似乎很好，但在输入我们需要的内容时不会被调用。ComboBox 我切换到`AutoCompleteMode = SuggestAppend`, `AutoCompleteSource = ListItems`, `DoprDownStyle = DropDown`. 这允许用户直接输入框并且没有时间限制。

这是我的代码，希望对某人有所帮助：

```
Private Sub ComboBox1_KeyUp(sender As Object, e As KeyEventArgs) Handles ComboBox1.KeyUp
  If ComboBox1.Text <> String.Empty Then
    If ComboBox1.FindString(cboSkupina.Text) = -1 Then 'if is value -1 typed text is not in list
      ComboBox1.Text = Mid(ComboBox1.Text, 1, Len(ComboBox1.Text) - 1) 'Delete not valid character
      ComboBox1.SelectionStart = Len(ComboBox1.Text) + 1 'Place cursor at the end
    End If
  End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T05:18:03.260

虽然同意之前的答案，但为了限制用户输入无效数据，明智的做法是选择`DropDownStyle = ComboBoxStyle.DropDownList`. 但万一你想要你想要的，你可以使用`OnValidating`控件的事件来检查列表项的有效值。或者更好的是，继承控件并在整个项目中使用它。这是我使用的代码。

```
Namespace Relax.Controls
    Public Class RelaxCombobox
        Inherits ComboBox

        Public Property RestrictContentToListItems As Boolean = True

        Public Sub New()
            With Me
                .AutoCompleteSource = Windows.Forms.AutoCompleteSource.ListItems
                .AutoCompleteMode = Windows.Forms.AutoCompleteMode.SuggestAppend
            End With
        End Sub

        Protected Overrides Sub OnValidating(e As System.ComponentModel.CancelEventArgs)
            If RestrictContentToListItems AndAlso Me.Items.Count > 0 Then
                 Dim index As Integer = Me.FindString(Me.Text)
                If index > -1 Then
                    Me.SelectedIndex = index
                Else
                    e.Cancel = True
                    Me.Text = ""
                    Beep()
                End If
            End If
           MyBase.OnValidating(e)
        End Sub
    End Class
End Namespace 
```

请注意，不允许用户离开控件是一个糟糕的 UI 设计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-26T16:02:46.097

尝试以下操作：

```
Private Sub ComboBox1_Leave(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.Leave
    If (ComboBox1.SelectedIndex = -1) Then
        ComboBox1.Focus()
    End If
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T16:39:23.380

只需将以下代码段添加到ComboBox的**KeyPress 事件中。**请记住用您的名称替换组合框名称。

```
Private Sub ComboBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles ComboBox1.KeyPress
        If e.KeyChar = ControlChars.Back AndAlso e.KeyChar = ControlChars.Back Then
            Return
        End If

        Dim t As String = ComboBox1.Text
        Dim typedT As String = t.Substring(0, ComboBox1.SelectionStart)
        Dim newT As String = typedT + e.KeyChar

        Dim i As Integer = ComboBox1.FindString(newT)
        If i = -1 Then
            e.Handled = True
        End If
End Sub 
```

# facebook - 视频不是为每个用户嵌入的

> ID：14981205
> 
> 赞同：0
> 
> 时间：2013-02-20T13:36:10.770
> 
> 标签：facebook, video, meta-tags, embedding

我们最近发布了一个非常面向社交的视频服务，Facebook 分享是我们的主要功能之一。

我们所有的元标记都可以，使用 facebook 调试器进行调试，我没有收到任何错误，它告诉我视频嵌入已启用。

尽管我们的很多用户，以及我们团队中的一些人，无法播放视频内联，并被重定向到网站。怎么来的 ？到底是怎么回事 ？

我们询问了我们的社区，发现它与浏览器无关，也与操作系统无关，那么我该如何解决这个问题？我知道 Twitter 需要为其嵌入式播放器使用 SSL，这可能与安全有关吗？

再一次，视频正在为我内联播放，我的同事在单击缩略图时被重定向到该网站......

这里是我们 facebook 页面的链接：http: [//facebook.com/cultcut](http://facebook.com/cultcut) 你会发现很多我所说的视频链接的例子。

先感谢您 ！

# php - 忽略的字符，null / csv 通过 php 到 json 文件

> ID：14981206
> 
> 赞同：1
> 
> 时间：2013-02-20T13:36:12.947
> 
> 标签：php, arrays, json, csv, fgetcsv

我想通过 php 读取 csv 文件，然后将数组保存在 json 文件中。

```
 $fp = fopen('images/thermo.csv','r') or die("**! can't open file\n\n");
    setlocale(LC_ALL, 'sk_SK.UTF-8');
    $i = 0;
    while($csv_line = fgetcsv($fp,10024,';')) {
        $i++;
        $json[$i]['nazov'] = $csv_line[0];
        $json[$i]['popis'] = $csv_line[1];
        $json[$i]['cena'] = $csv_line[2];
            $json[$i]['img'] = $csv_line[3];
         $json[$i]['mnozstvo'] = $csv_line[4];
    }
    $json['total_lines'] = $i;
    //print json_encode($json);

    fclose($fp) or die("**! can't close file\n\n");

    $fn = fopen('cennik.json', 'w');
    fwrite($fn, json_encode($json));
    fclose($fn); 
```

.csv 文件是

```
Murovacia tvarnica 25 a;?;15,4;img2.jpg;m2
Murovacia tvárnica 35;á;23,1;img1.jpg;m2
Murovacia tvárnica 44;helo test;31,9;img3.jpg;m2 
```

json 文件是有效的，但它包含“null”.. 或“”（空）而不是这个 'á'

```
{
    "1": {
        "nazov": "Murovacia tvarnica 25 a",
        "popis": "?",
        "cena": "15,4",
        "img": "img2.jpg",
        "mnozstvo": "m2"
    },
    "2": {
        "nazov": null,
        "popis": "",
        "cena": "23,1",
        "img": "img1.jpg",
        "mnozstvo": "m2"
    },
    "3": {
        "nazov": null,
        "popis": "helo test",
        "cena": "31,9",
        "img": "img3.jpg",
        "mnozstvo": "m2"
    },
    "total_lines": 3
} 
```

有人可以解释一下我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:54:01.360

显然，您必须首先[`utf8_encode`](http://www.php.net/manual/en/function.json-encode.php#69393)（[也在这里](http://www.php.net/manual/en/function.json-encode.php#90407)）这些值，因为 PHP 的字符串是 ISO-8859-1。

所以，

```
$json[$i]['nazov'] = $csv_line[0]; 
```

应该成为

```
$json[$i]['nazov'] = utf8_encode($csv_line[0]); 
```

您还应该对可能包含 UTF-8 字符的任何其他字符串进行编码。

`utf8_decode`在任何环境中从 JSON 检索值时，您可能需要它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:50:58.757

@crush所以这是.csv

```
Murovacia tvárnica 25;čokolvek nieč aké taký;15,4;img2.jpg;m2
Murovacia tvárnica 35;čokolvek nieč aké taký;23,1;img1.jpg;m2
Murovacia tvárnica 44;čokolvek nieč aké taký;31,9;img3.jpg;m2
Prekladová tvárnica 25;čokolvek nieč aké taký;3,85;;bm
Prekladová tvárnica 35;čokolvek nieč aké taký;5,91;;bm
Prekladová tvárnica 44;čokolvek nieč aké taký;8,8;;bm
Vencová tvárnica 25;čokolvek nieč aké taký;3,3;;bm
Vencová tvárnica 35;čokolvek nieč aké taký;5,5;;bm
Vencová tvárnica 44;čokolvek nieč aké taký;8,25;;bm
Koncový diel;čokolvek nieč aké taký;0,33;;ks 
```

json 文件是（通过 JSONLINT）是：

```
{
    "1": {
        "nazov": "Murovacia tvárnica 25",
        "popis": "okolvek nieè aké taký",
        "cena": "15,4",
        "img": "img2.jpg",
        "mnozstvo": "m2"
    },
    "2": {
        "nazov": "Murovacia tvárnica 35",
        "popis": "okolvek nieè aké taký",
        "cena": "23,1",
        "img": "img1.jpg",
        "mnozstvo": "m2"
    },
    "3": {
        "nazov": "Murovacia tvárnica 44",
        "popis": "okolvek nieè aké taký",
        "cena": "31,9",
        "img": "img3.jpg",
        "mnozstvo": "m2"
    },
    "4": {
        "nazov": "Prekladová tvárnica 25",
        "popis": "okolvek nieè aké taký",
        "cena": "3,85",
        "img": "",
        "mnozstvo": "bm"
    },
    "5": {
        "nazov": "Prekladová tvárnica 35",
        "popis": "okolvek nieè aké taký",
        "cena": "5,91",
        "img": "",
        "mnozstvo": "bm"
    },
    "6": {
        "nazov": "Prekladová tvárnica 44",
        "popis": "okolvek nieè aké taký",
        "cena": "8,8",
        "img": "",
        "mnozstvo": "bm"
    },
    "7": {
        "nazov": "Vencová tvárnica 25",
        "popis": "okolvek nieè aké taký",
        "cena": "3,3",
        "img": "",
        "mnozstvo": "bm"
    },
    "8": {
        "nazov": "Vencová tvárnica 35",
        "popis": "okolvek nieè aké taký",
        "cena": "5,5",
        "img": "",
        "mnozstvo": "bm"
    },
    "9": {
        "nazov": "Vencová tvárnica 44",
        "popis": "okolvek nieè aké taký",
        "cena": "8,25",
        "img": "",
        "mnozstvo": "bm"
    },
    "10": {
        "nazov": "Koncový diel",
        "popis": "okolvek nieè aké taký",
        "cena": "0,33",
        "img": "",
        "mnozstvo": "ks"
    }
} 
```

你看到字符不一样了吗？čokolvek nieč aké taký != okolvek nieè aké taký ...

php是一样的：

```
$fp = fopen('images/thermo.csv','r') or die("**! can't open file\n\n");

$i = 0;
while($csv_line = fgetcsv($fp,10024,';')) {
    $i++;
    $json[$i]['nazov'] = utf8_encode($csv_line[0]);
    $json[$i]['popis'] = utf8_encode($csv_line[1]);
    $json[$i]['cena'] = $csv_line[2];
        $json[$i]['img'] = $csv_line[3];
     $json[$i]['mnozstvo'] = $csv_line[4];
}

fclose($fp) or die("**! can't close file\n\n");

$fn = fopen('cennik.json', 'w');
fwrite($fn, json_encode($json));
fclose($fn); 
```

jQuery .getJSON 是：

```
jQuery.getJSON( "web_beta/cennik.json" , function(data){
    var myBoxes = ''
        jQuery.each(data,function(key,value){

            var priceDPH = parseFloat(parseFloat(value.cena) * 1.2).toFixed(2);
            myBoxes += '<div id="no_'+key+'" class="box"> <div class="pic">'
            myBoxes += '<a href="web_beta/images/thermoimg/type'+key+'/'+value.img+'" id="mb'+key+'" class="s5mb" title="'+value.nazov+'">'
            myBoxes += '<img src="web_beta/images/thermoimg/type'+key+'/'+value.img+'" width="45%" class="boxed" alt="" />'
            myBoxes += '</a></div>'
            myBoxes += '<h3>'+value.nazov+'</h3><p class="description">'+value.popis+'</p>'
            myBoxes += '<input type="text" id="name_'+key+'" class="boxin" value="0"><p class="thePrice">Cena: <span class="price">'+priceDPH+'</span> €/'+value.mnozstvo+'(s DPH)'
            myBoxes += '</p> <span class="send">Pridať do zoznamu<strong>+</strong></span></div>'
            var divider = parseFloat( key / 2 );
            if( (divider - parseInt(divider)) == 0 ) {

                myBoxes += '<div class="new"></div>'

            }

        });
    jQuery('#bigbox').children().remove();
        jQuery('#bigbox').append(myBoxes);

    }); 
```

# android - 在 Canvas Android 上绘制多条路径

> ID：14981210
> 
> 赞同：3
> 
> 时间：2013-02-20T13:36:42.017
> 
> 标签：android, canvas, paint

我有一个名为 MyView 的类，它扩展了 View..在我的选项菜单中，我有四种颜色。

我想要的是当我选择绿色并在画布上绘制路径时，它应该绘制绿色路径，当我选择红色时，它应该绘制红色路径，而之前的绿色应该是原样......

我在绘制多种颜色的多条路径方面取得了成功，但一次只有一种颜色在画布中保存..那么我该怎么做才能在画布上绘制多种颜色的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:48:31.657

我这样做的方法是通过子类化路径来存储颜色和路径：

```
 private class DrawingPath extends Path
    {
            public DrawingPath(float w, int c)
            {
                    Width = w;
                    Color = c;
            }

            public float Width;
            public int Color;
    } 
```

然后，当我绘制每条路径时，我预先设置了颜色。

如您所见，您还可以使用此代码设置宽度，以便您可以更改每个路径的笔触宽度。

为了画这个，我使用了：

```
mCanvas.drawColor(Color.WHITE);

for (DrawingPath p : mPaths)
{
    mPaint.setColor(p.Color); 
    mPaint.setStrokeWidth(p.Width);
    mCanvas.drawPath(p, mPaint);
}

invalidate(); 
```

# android - Android ListPreference 视觉调整

> ID：14981215
> 
> 赞同：0
> 
> 时间：2013-02-20T13:36:59.243
> 
> 标签：android, listpreference

是否可以在 Android 中获取 ListPreference，以便列表中的每个项目的每个选项都有两行文本，而不仅仅是通常看到的那一行。

我所追求的有点像这样：[https ://wiggio.zendesk.com/attachments/token/0uwzbehz5cnkrsu/?name=Picture_12.png](https://wiggio.zendesk.com/attachments/token/0uwzbehz5cnkrsu/?name=Picture_12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:17:21.053

自定义 ListPreference 是要走的路，非常基于这个 cmwmobile.com/... 有一个或两个修复

# cordova - 给定一个网址如何将其转换为 Android 和 iPhone 的 PhoneGap？

> ID：14981217
> 
> 赞同：0
> 
> 时间：2013-02-20T13:37:01.277
> 
> 标签：cordova, phonegap-plugins, phonegap-build

我是PhoneGap的新手..我刚开始接触基础知识..10天前..

请告诉我将给定的 Web URL 更改为 android 应用程序和 iphone 应用程序的程序是什么。

例如stackoverflow.com/

请指导我...

**期待 APT 解决方案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:24:58.023

You will find that in the main activity (.java file) of your android project.

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

For iOS you will find it in the AppDelegate.m file

```
self.viewController.startPage = @"index.html"; 
```

# sql-server - delphi dbgrid 布尔值，接受 f fa fal fals false ，如何接受更多的值？

> ID：14981221
> 
> 赞同：7
> 
> 时间：2013-02-20T13:37:11.527
> 
> 标签：sql-server, delphi, delphi-2009

我正在使用 mssql 和 Delphi 2009。当表单包含连接到布尔字段的 dbgrid 时，值显示为`True`或`False`。Delphi dbgrid 具有翻译能力

```
f
fa
fal
fals
false
t
tr
tru
true 
```

成为`true`或`false`。我想添加值，以便它可以接受其他字符串，并将它们匹配到`true`or `false`。这些值可以添加到哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T14:09:44.767

这是 的默认行为[`TBooleanField.DisplayValues`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DB_TBooleanField_DisplayValues.html)。查看`db`单位来源：
`db.TBooleanField.SetAsString`和`db.TBooleanField.SetDisplayValues`。

如果您设置`TField.DisplayValues := 'Yes;No';`例如：`Y`, `Ye`,`Yes`将代表`True`; `N`,`No`将代表`False`.

您无法为其添加更多值。除非您`OnSetText`按照其他答案的建议使用，否则使用`TDbGrid.PickList`.

就个人而言，我会`CheckBox`在`TDBGrid`.
有很多关于如何做到这一点的[例子。](http://delphi.about.com/od/usedbvcl/l/aa082003a.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:08:09.377

`OnSetText`您可以为您的布尔字段编写一个事件，并将任何给定文本解释为`True`或`False`。

# javascript - ng-show 在指令更改相关范围值后不更新

> ID：14981224
> 
> 赞同：3
> 
> 时间：2013-02-20T13:37:26.587
> 
> 标签：javascript, angularjs

我在使用 ng-show 方法时遇到问题，因为我将方法设置如下：

我检查了用户名字符串的长度，但是即使它报告了正确的长度，ng-show 方法也不会为我隐藏/显示额外的文本，直到击键之后。我怎样才能让它更新键上的用户名帮助文本的可见性

如果你看看 JS 小提琴[http://jsfiddle.net/FkAkg/8/](http://jsfiddle.net/FkAkg/8/)

```
 accountApp.directive("stripCharacters", ['$filter', '$http', function($filter, $http) {
            return {
                restrict: 'C',
                link: function(scope, element) {
                    element.bind("keyup", function() {
                        if(scope.account.username !== undefined) {
                            element.val($filter('stripCharacters')(scope.account.username));
                            if(scope.account.username.length > 2) {
                                scope.toggleShowUsername(true); 
                                scope.usernameMessage = scope.account.usernameAvailable;
                            } else {
                                scope.toggleShowUsername(false);
                            }
                        }
                    });
                }
            }
        }]); 
```

我已经让它在同一个元素上用 jQuery hide/show 替换它，但希望让它只在 angular 中工作。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:32:47.917

keyup 处理程序在 Angular 的“外部”运行，因此使用`scope.$apply()`它可以让 Angular 注意到您已更改`showUsername`：

```
...
if(scope.account.username.length > 2) {
   scope.toggleShowUsername(true); 
   scope.usernameMessage = scope.account.usernameAvailable;
} else {
   scope.toggleShowUsername(false);
}
scope.$apply(); 
```

以上回答了您的问题，但我推荐@pkozlowski.opensource 的回答/评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:18:42.690

详细阐述pkozlowski的评论......

我也认为你试图在一个地方做太多事情。该指令的（单一）责任是什么？根据名称，它是“剥离字符”......但如果你看看你在里面做什么，你正在剥离字符，调用方法并更新指令所在元素之外的元素的显示逻辑。

我建议您简化指令，并将其他内容移到 $watch 中：

[这是你的 JSFiddle 的一个分支](http://jsfiddle.net/blesh/2475s/3/)

以及相关的代码：

在您的控制器中，我添加了以下内容...

```
$scope.$watch('account.username', function (value) {
   if (value.length > 2) {
      $scope.toggleShowUsername(true);
      $scope.usernameMessage = $scope.account.usernameAvailable;
   } else {
      $scope.toggleShowUsername(false);
   }
}); 
```

然后你的指令：

```
accountApp.directive("stripCharacters", ['$filter', function ($filter) {
   return {
      restrict: 'C',
      require: 'ngModel',
      link: function (scope, element, attrs, ngModel) {
            ngModel.$parsers.unshift(function (value) {
               var stripped = $filter('stripCharacters')(value);
               element.val(stripped);
               return stripped;
            });
      }
   }
}]); 
```

需要明确的是，Mark Rajcok 的答案也适用于此，并且可能更适合您……但它缺少一件：$setViewValue。如果是这样，您只需将上述指令的链接功能更改为：

```
link: function (scope, element, attrs, ngModel) {
    element.bind('keyup', function () {
       var value = element.val();
       var stripped = $filter('stripCharacters')(value);
       element.val(stripped);
       ngModel.$setViewValue(stripped);
       scope.$apply();
    });
} 
```

其中 $setViewValue 用于使用适当的值实际更新您的模型。 [*这是该*](http://jsfiddle.net/blesh/QGcX2/1/)[解决方案](http://jsfiddle.net/blesh/QGcX2/1/)[的 JSFiddle](http://jsfiddle.net/blesh/QGcX2/1/)*；*

 *我希望所有这些都是有帮助的。*

# mysql - 按路径和排序顺序获取类别树

> ID：14981225
> 
> 赞同：3
> 
> 时间：2013-02-20T13:37:28.777
> 
> 标签：mysql, sql

我的类别结构如下图所示。我的目的是通过单个查询获取类别结构。我按路径对表格进行排序，然后得到类别树。

**sort_order**：表示同级类别之间的排序顺序

![在此处输入图像描述](../Images/87ac89574ada53d19952d83e1412f899.png)

当我运行查询

```
SELECT * FROM category order by path; 
```

**结果：**

![在此处输入图像描述](../Images/17f4c338900687aa06afdf2ed88680aa.png)

**但结果必须如下所示，** 因为 Electronic 的 sort_order 为 1，这小于 Computer 类别 2 的 sort_order 值

```
 - ELectronic 
 - - TV 
 - - - LCD 
 - - - - LED LCD 
 - Computer 
 - - Laptop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:10:58.020

**编辑**添加了 SQL Fiddle 的东西

[SQL小提琴](http://sqlfiddle.com/#!2/a39211/2)

**MySQL 5.5.28 架构设置**：

```
CREATE TABLE IF NOT EXISTS `category` (
  `id` int(11) NOT NULL,
  `parent_id` int(11) NOT NULL,
  `label` varchar(20) NOT NULL,
  `level` int(11) NOT NULL,
  `path` varchar(100) NOT NULL,
  `sortorder` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `category`
--

INSERT INTO `category` (`id`, `parent_id`, `label`, `level`, `path`, `sortorder`) VALUES
(0, 0, '', 0, '', 0),
(2, 0, 'Computer', 1, '.2.', 2),
(3, 0, 'Electronic', 1, '.3.', 1),
(4, 3, 'TV', 2, '.3.4.', 3),
(5, 2, 'Laptop', 2, '.2.5.', 4),
(6, 7, 'LED LCD', 4, '.3.4.7.6.', 5),
(7, 4, 'LCD', 3, '.3.4.7', 5); 
```

**查询 1**：

```
SELECT 
  (
    SELECT group_concat( cast( g.sortorder AS char ) ORDER BY g.path ) AS gso
    FROM category AS g
    WHERE c.path LIKE concat( g.path, '%' )
  ) AS grsortorder, c. *
FROM `category` AS c
ORDER BY grsortorder 
```

**[结果](http://sqlfiddle.com/#!2/a39211/2/0)**：

```
| GRSORTORDER | ID | PARENT_ID |      LABEL | LEVEL |      PATH | SORTORDER |
-----------------------------------------------------------------------------
|           0 |  0 |         0 |            |     0 |           |         0 |
|         0,1 |  3 |         0 | Electronic |     1 |       .3\. |         1 |
|       0,1,3 |  4 |         3 |         TV |     2 |     .3.4\. |         3 |
|     0,1,3,5 |  7 |         4 |        LCD |     3 |    .3.4.7 |         5 |
|   0,1,3,5,5 |  6 |         7 |    LED LCD |     4 | .3.4.7.6\. |         5 |
|         0,2 |  2 |         0 |   Computer |     1 |       .2\. |         2 |
|       0,2,4 |  5 |         2 |     Laptop |     2 |     .2.5\. |         4 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:07:23.693

看看这是否有效：

```
SELECT * FROM category order by level, sort_order, path; 
```

**结果 ：**

![在此处输入图像描述](../Images/c630e1472862e0f60dff7330d5f83705.png)

# data-structures - 表达式树构建？

> ID：14981229
> 
> 赞同：0
> 
> 时间：2013-02-20T13:37:43.857
> 
> 标签：data-structures

为以下表达式构造表达式树：

```
E=(2a+5b)(x-7y)^4 
```

我可以在没有 ^4 的情况下构建它。

如何为这种类型的运算符构造它？

我的努力：

```
 *
        /     \
       /       \
      +         ^
     / \       /  \
    /   \     -    4
   *     *   / \ 
 /  \   / \  x  * 
2    a 5   b   /  \
              7    y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:39:35.460

度数只是另一个二元运算符，因此没有太大区别。请记住，它通常比其他操作具有更高的优先级。

# jquery - 两个点击事件绑定到一个元素

> ID：14981231
> 
> 赞同：0
> 
> 时间：2013-02-20T13:37:47.907
> 
> 标签：jquery

我有一个锚标签，里面有一个 img 标签。当我点击 img 时，会发生一个事件。但是，我也有另一个标记到锚标记的点击事件，那么如何防止在 img 点击上的锚点击事件？

```
<a class="rfi btn btn-inverse"><img class="delete"/></a> 
```

我的点击事件是使用 jquery 完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:39:18.570

阻止对图像的单击冒泡并触发其父级的单击处理程序：

```
$("img").on("click", function (e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:41:17.643

尝试这个：

```
$("your img selector").click(function (event) {
    event.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:39:16.053

您可以通过停止从`img`到 、 的`a`“传播”（冒泡）来做到这一点[`Event#stopPropagation`](http://api.jquery.com/event.stopPropagation/)。所以：

```
$("selector for your img elements").click(function(e) {
    e.stopPropagation();

    // -- Your img click code here --
}); 
```

（`return false`事件处理程序也会这样做，但也会*阻止*`click`任何默认操作。请注意，元素上没有默认操作`img`，所以在这种情况下会很好。）

# android - 自定义对象的 Android ArrayList - 保存到 SharedPreferences - 可序列化？

> ID：14981233
> 
> 赞同：79
> 
> 时间：2013-02-20T13:38:03.227
> 
> 标签：android, arraylist, sharedpreferences, serializable

我有一个对象的 ArrayList。该对象包含“Bitmap”和“String”类型，然后是两者的getter 和setter。首先Bitmap是可序列化的吗？

我将如何将其序列化以将其存储在 SharedPreferences 中？我看到很多人问过类似的问题，但似乎没有一个给出好的答案。如果可能的话，我更喜欢一些代码示例。

如果位图不可序列化，那么我该如何存储这个 ArrayList？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-21T20:48:49.780

是的，您可以将复合对象保存在共享首选项中。比方说。。

```
 Student mStudentObject = new Student();
 SharedPreferences appSharedPrefs = PreferenceManager
             .getDefaultSharedPreferences(this.getApplicationContext());
 Editor prefsEditor = appSharedPrefs.edit();
 Gson gson = new Gson();
 String json = gson.toJson(mStudentObject);
 prefsEditor.putString("MyObject", json);
 prefsEditor.commit(); 
```

..现在您可以将对象检索为：

```
 SharedPreferences appSharedPrefs = PreferenceManager
             .getDefaultSharedPreferences(this.getApplicationContext());
 Gson gson = new Gson();
 String json = appSharedPrefs.getString("MyObject", "");
 Student mStudentObject = gson.fromJson(json, Student.class); 
```

欲了解更多信息，请单击[此处。](http://androidcodemonkey.blogspot.com/2011/07/store-and-get-object-in-android-shared.html)

如果您想取回`ArrayList`任何类型的对象，例如`Student`，请使用：

```
Type type = new TypeToken<List<Student>>(){}.getType();
List<Student> students = gson.fromJson(json, type); 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2014-02-25T15:56:08.303

上面的答案有效，但不适用于列表：

要保存对象列表，请执行以下操作：

```
List<Cars> cars= new ArrayList<Cars>();
    cars.add(a);
    cars.add(b);
    cars.add(c);
    cars.add(d);

    gson = new Gson();
    String jsonCars = gson.toJson(cars);
    Log.d("TAG","jsonCars = " + jsonCars); 
```

读取 json 对象：

```
Type type = new TypeToken<List<Cars>>(){}.getType();
List<Cars> carsList = gson.fromJson(jsonCars, type); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-10-25T10:09:56.587

对我来说，它是这样工作的：

将值放入 SharedPreferences ：

```
String key = "Key";
ArrayList<ModelClass> ModelArrayList=new ArrayList();

SharedPreferences shref;
SharedPreferences.Editor editor;
shref = context.getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);

Gson gson = new Gson();
String json = gson.toJson(ModelArrayList);

editor = shref.edit();
editor.remove(key).commit();
editor.putString(key, json);
editor.commit(); 
```

要从 SharedPreferences 获取值：

```
Gson gson = new Gson();
String response=shref.getString(key , "");
ArrayList<ModelClass> lstArrayList = gson.fromJson(response, 
    new TypeToken<List<ModelClass>>(){}.getType()); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-01-13T09:37:28.727

保存：

```
public static void saveSharedPreferencesLogList(Context context, List<PhoneCallLog> callLog) {
    SharedPreferences mPrefs = context.getSharedPreferences(Constant.CALL_HISTORY_RC, context.MODE_PRIVATE);
    SharedPreferences.Editor prefsEditor = mPrefs.edit();
    Gson gson = new Gson();
    String json = gson.toJson(callLog);
    prefsEditor.putString("myJson", json);
    prefsEditor.commit();
} 
```

对于负载：

```
public static List<PhoneCallLog> loadSharedPreferencesLogList(Context context) {
    List<PhoneCallLog> callLog = new ArrayList<PhoneCallLog>();
    SharedPreferences mPrefs = context.getSharedPreferences(Constant.CALL_HISTORY_RC, context.MODE_PRIVATE);
    Gson gson = new Gson();
    String json = mPrefs.getString("myJson", "");
    if (json.isEmpty()) {
        callLog = new ArrayList<PhoneCallLog>();
    } else {
        Type type = new TypeToken<List<PhoneCallLog>>() {
        }.getType();
        callLog = gson.fromJson(json, type);
    }
    return callLog;
} 
```

PhoneCallLog 是我的自定义对象的名称。（包含字符串、长整数和布尔值）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-13T08:43:36.327

上面的 Mete 示例就像一个魅力。
这是一个**Kotlin**示例

```
private var prefs: SharedPreferences = context?.getSharedPreferences("sharedPrefs", MODE_PRIVATE)
    ?: error("err")
private val gson = Gson() 
```

节省

```
fun saveObjectToArrayList(yourObject: YourObject) {
    val bookmarks = fetchArrayList()
    bookmarks.add(0, yourObject)
    val prefsEditor = prefs.edit()

    val json = gson.toJson(bookmarks)
    prefsEditor.putString("your_key", json)
    prefsEditor.apply()
} 
```

读

```
fun fetchArrayList(): ArrayList<YourObject> {
    val yourArrayList: ArrayList<YourObject>
    val json = prefs.getString("your_key", "")

    yourArrayList = when {
        json.isNullOrEmpty() -> ArrayList()
        else -> gson.fromJson(json, object : TypeToken<List<Feed>>() {}.type)
    }

    return yourArrayList
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-29T16:18:59.677

kotlin 的实现`Gson`，扩展了@SpyZips 的答案，

**序列化为 JSON**

```
val jsonCars: String = Gson().toJson(cars); 
```

**反序列化返回到 obj 列表**

```
val type = object: TypeToken<List<Car>>(){}.type
val carsList: List<Car> = Gson().fromJson(jsonCars, type) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-07T09:17:08.030

**解决方案**

不用担心您可以按照我的代码进行操作。我正在使用自己的 sharedPreference 自定义类来在 sharedPreference 中保存任何类型的 List。

```
public class AuthPreference {
    private static final String MY_PREFERENCES = "MY_PREFERENCES";
    private static final int MODE = Context.MODE_PRIVATE;
    private static AuthPreference pref;
    private final SharedPreferences sharedPreference;
    private final SharedPreferences.Editor editor;

    @SuppressLint("CommitPrefEdits")
    public AuthPreference(Context context) {
        sharedPreference = context.getSharedPreferences(MY_PREFERENCES, MODE);
        editor = sharedPreference.edit();
    }

    public void clear() {
        editor.clear().commit();

    }

    //Here  save your api responce like YourModel arraylist

    public void saveDataResponce(ArrayList<YourModel> model_, String key) {
        SharedPreferences.Editor editor = sharedPreference.edit();
        Gson gson = new Gson();
        String json = gson.toJson(model_);
        editor.putString(key, json);
        editor.apply();
    }

//Here we get our api responce like YourModel arraylist.Using key value when you want to define.

    public ArrayList<YourModel> getDataResponce(String key) {
        Gson gson = new Gson();
        String json = sharedPreference.getString(key, null);
        Type type_ = new TypeToken<ArrayList<YourModel>>() {
        }.getType();
        return gson.fromJson(json, type_);
    }
} 
```

# sql - 如何将客户端证书的公钥存储在数据库中？

> ID：14981234
> 
> 赞同：1
> 
> 时间：2013-02-20T13:38:08.767
> 
> 标签：sql, public-key

我在 asp.net 应用程序中实现客户端证书身份验证，我需要从表用户中为每个用户分配他/她相应客户端证书的公钥。我怎样才能做到这一点？我正在通过`makecert.exe`.

# facebook-fql - 执行 Fql 时的应用程序请求限制

> ID：14981237
> 
> 赞同：1
> 
> 时间：2013-02-20T13:38:24.407
> 
> 标签：facebook-fql

进行 API 调用时出现以下错误

```
<error_code>4</error_code>
<error_msg>Application request limit reached</error_msg> 
```

当我们检查我们远低于允许调用的洞察力时，我们在一个月内只进行了 100 万次调用。这在我们触发 FQL 查询时特别发生，我们该如何解决这个问题？

问候，

阿尤什

# php - 为什么这个文件没有上传？

> ID：14981238
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:38:23.633
> 
> 标签：php

PHP：

```
// If the user accessed the page by form submittal
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $filename = $_FILES["file-input"]["name"];
    $extension = pathinfo($filename, PATHINFO_EXTENSION);
    $filesize = filesize($filename);
    $max_filesize = 524288;
// Array to hold errors
    $errors = array();

                if (!$filename) {
                    array_push($errors, "You didn't actually upload anything!");
            }
            else if ($extension != "txt") {
                    array_push($errors, "That's not a valid file-type. Please only use txt files.");
            }
            else if (filesize($filename)) {
                array_push($errors, "The txt file must not be empty. Give us a good story.");
            } 
```

HTML：

```
<div class="upload-form">
<form action="" method="post" enctype="multipart/form-data">
<div class="upload">
<input type="file" name="file-input">
<span class="input-filename">Select a file...
    </span>
    <input type="button" value="Browse">
</div>

                <input type="submit" name="submit" value="Upload">
                <span class="valid-formats">Valid input: .txt files &lt;= 512 KB</span>
            </form>
        </div> 
```

我得到错误：

> 警告：filesize(): stat failed for todo.txt in .../Dropbox/Projects/Website Projects/serverside/assignment2/index.php 在第 34 行
> 
> 警告：filesize(): stat failed for todo.txt in .../Dropbox/Projects/Website Projects/serverside/assignment2/index.php 在第 46 行
> 
> 警告：file_get_contents(todo.txt)：无法打开流：第 77 行的 .../Dropbox/Projects/Website Projects/serverside/assignment2/index.php 中没有此类文件或目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:40:22.827

该文件不在`$_FILES['file-input']['name']`. 这将告诉您上传时客户端计算机上文件的文件名。PHP 将文件存储在`$_FILES['file-input']['tmp_name']`服务器上。因此，`pathinfo`将不起作用（它需要文件在磁盘上）。

您可以`$_FILES['file-input']['name']`按点拆分，并获得最后一个值：

```
$parts = explode(".", $_FILES['file-input']['name']);
$extension = end($parts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:43:47.490

请注意在不可写的文件/目录上使用此功能：您将收到如下警告：

警告：filesize() [function.filesize]: stat failed for /var/www/xxx/yyy.php in /var/www/xxx/yyy.php on line 123

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:46:02.637

上传的文件路径保存在 中`$_FILES["file-input"]["tmp_name"];`，如果要对文件进行操作，需要使用该路径。

您当前使用`$_FILES["file-input"]["name"]`的不是您想要的。它包含用户机器上的原始文件名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:46:36.807

试试这个。

```
 move_uploaded_file($_FILES['file-input']['tmp_name'],"file_upload_location/".$_FILES['file-input']['name']); 
```

它可能会起作用。

# gdb - gdb - 在二进制文件中的特定文件中设置断点

> ID：14981240
> 
> 赞同：2
> 
> 时间：2013-02-20T13:38:29.560
> 
> 标签：gdb

```
(gdb) b processMessage

No symbol table is loaded.  Use the "file" command.

Make breakpoint pending on future shared library load? (y or [n]) n

(gdb) file aqm_wfmgr

Reading symbols from /home/dir/bin/mgr...done.

(gdb) b processMessage
Function "processMessage" not defined. 
```

如何在该二进制文件的特定文件中为特定函数@某些行设置断点？

如果我直接给出行号或函数名称和文件号，它不会识别。请帮助。

```
(gdb) b 599

Cannot access memory at address 0x498f14

(gdb) b 598

Cannot access memory at address 0x498f14

(gdb) b processMessage 598

Function "processMessage" not defined. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:09:12.527

很可能您的二进制文件缺少调试信息。确保至少编译它`-g`（假设您使用的是 gcc）。

# javascript - 如何从淘汰赛 js 模板中管理子选择元素

> ID：14981241
> 
> 赞同：0
> 
> 时间：2013-02-20T13:38:29.693
> 
> 标签：javascript, knockout.js, html-select

我有以下场景，我使用 ko.mapping 从服务器获取一些数据，并以以下形式翻译：

```
var viewModel = {
    name: "Abc",
    educations: [{ course: "C1", countryID: 1, cityID = 2},
                 { course: "C2", countryID: 2, cityID = 3}]
} 
```

我还有 2 个数组变量，它们是：

```
var countries = [{id=1,name="UAE"},{id=2,name="USA"},];
var cities = [{id=1,name="Dubai", cid=1},{id=2,name="Al-Ain", cid=1},
              {id=3,name="Newyork", cid=2},{id=4,name="Houston", cid=2},]; 
```

现在要显示/编辑此数据，我有以下 HTML

```
<div>
    <input type="text" data-bind="value: Name"/>
    <table data-bind="template: { name: 'cet', foreach: educations }">
    </table>
</div>
<script type="text/html" id="cet">
    <tr>
        <td>
            <select data-bind="options: countries, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select...', value: countryID"></select>
        </td>
        <td>
            <select data-bind="options: cities, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select...', value: cityID"></select>
        </td>
    </tr>
</script> 
```

现在我需要的是，当从服务器发送数据时，选择框应该显示与绑定对象对应的正确项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:04:22.443

你几乎达到了你的目标——[这](http://jsfiddle.net/RP3eR/1/)是你的代码的工作版本。

```
var viewModel = {
    name: "Abc",
    educations: [{course: "C1", countryID: 1, cityID: 2},
                 {course: "C2", countryID: 2, cityID: 3}],
    countries: [{id: 1, name: "UAE"}, {id: 2, name: "USA"}],
    cities: [{id: 1, name: "Dubai", cid: 1},
             {id: 2, name: "Al-Ain", cid: 1},
             {id: 3, name: "Newyork", cid: 2},
             {id: 4, name: "Houston", cid: 2}]
};

ko.applyBindings(viewModel); 
```

```
<div>
    <input type="text" data-bind="value: name" />
    <table data-bind="template: { name: 'cet', foreach: educations }"></table>
</div>
<script type="text/html" id="cet">
    <tr>
        <td>
            <select data-bind="options: $root.countries, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select...', value: countryID"></select>
        </td>
        <td>
            <select data-bind="options: $root.cities, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select...', value: cityID"></select>
        </td>
    </tr>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:52:15.427

好的解决了:)

数据绑定应按如下方式完成：

```
<select id="Countries" name="Countries" data-bind="options: countries, optionsText: 'CountryName', optionsValue: 'CountryID', optionsCaption: 'Select...', value: SelectedCountryID"></select>
<select id="Cities" name="Cities" data-bind="options: Cities, optionsText: 'CityName', optionsValue: 'CityID', optionsCaption: 'Select...', value: CityID"></select> 
```

首先，我必须运行**ko.mapping**将 viewModel 转换为“ *Observable viewModel* ”，然后代码将如下所示：

```
if(viewModel.educations() != undefined && viewModel.educations().length > 0) {
    for(k in viewModel.educations()) {
        var education = viewModel.educations()[k];

        education.Cities = ko.observableArray();
        education.SelectedCountryID = ko.computed({
            read: function() {
                return(this.CountryID());
            },
            write: function(value) {
                this.CountryID(value);
                this.Cities.removeAll();

                if(value != undefined) {
                    for(c in cities) {
                        if(cities[c].cid == value) {
                            this.Cities.push(cities[c]);
                        }
                    }
                }
            },
            owner: education,
        });

        if(viewModel.educations()[k].CountryID() != 0 ||
            viewModel.educations()[k].CountryID() != undefined) {
            viewModel.educations()[k].SelectedCountryID(viewModel.educations()[k].CountryID());
        }
    }
} 
```

# fbml - Facebook Sharer 没有缩略图

> ID：14981247
> 
> 赞同：3
> 
> 时间：2013-02-20T13:38:47.883
> 
> 标签：fbml, xfbml, facebook-sharer, facebook-fbml

我试过了`meta property="og:image"`，但是当我点击链接时`meta property="og:image:security"`，`link rel="image_src"`共享者没有得到缩略图。它显示标题、描述和网址。我试图将图像重新缩放为`90x90`，但什么`200x200`也`500x500`没发生。这是代码：

```
<meta property="og:url" content="URL">
<meta property="og:title" content="TITLE">
<meta property="og:description" content="DESCRIPTION" />
<meta property="og:type" content="website">
<meta property="og:image" content="IMAGE">
<meta property="og:site_name" content="SITE NAME">

<a href="https://www.facebook.com/sharer/sharer.php?u=url" target="_blank">Share on FB!</a> 
```

PS：我也有https，我也试过了。

这是输出：

![在此处输入图像描述](../Images/7d0d02e31aef658ecbcf110c35da003b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T14:47:36.023

这可能有多种原因，但没有看到您的实际代码（没有用 等空白`IMAGE`），`SITE NAME`我只能冒险猜测。

1.  **您的网站在本地托管或受密码保护**

    人们有时会犯一个愚蠢的错误，如果你在本地开发这个并且你将本地托管的图像作为`og:image`内容放入，那么 facebook 将无法正确加载图像。

2.  **不是有效的网址**

    加载`og:image`URL 并查看是否加载。如果没有，那是你的问题。

3.  **您的图片无效。这是 facebooks[文档](http://developers.facebook.com/docs/opengraphprotocol/)在图像属性上所说的：**

    > > og:image - 应在图中表示您的对象的图像 URL。图像必须至少为 50 像素 x 50 像素，但至少 200 像素 x 200 像素是首选，并且建议使用 1500 像素 x 1500 像素以获得最佳用户体验。图像的最大纵横比为 3:1。我们支持 PNG、JPEG 和 GIF 格式。您可以包含多个 og:image 标签以将多个图像与您的页面相关联。（注意：图像大小不得超过 5MB。）

4.  **Facebook 已阻止您的域**

    不太可能，但可能。有关使用 facebook 调试器的信息，请参见下文。

您可以使用[Facebook 调试器](http://developers.facebook.com/tools/debug)- 只需输入您的 URL，它就会为您提供所需的所有信息。包括`og:image`财产。

如果没有收到任何内容，请确保您在页面中正确包含标签，您可以[在此处查看](http://developers.facebook.com/docs/opengraphprotocol/)。

**如果**上述方法完全无效，并且您真的无法为您工作，您可以将 URL 直接包含在共享 URL 链接中 - 我在[这里](http://jsfiddle.net/dYfwK/)为您做了一个示例。

# .net - 存储对称密钥的好解决方案或保护我的数据的替代方法

> ID：14981249
> 
> 赞同：1
> 
> 时间：2013-02-20T13:38:56.020
> 
> 标签：.net, security, cryptography

关于存储对称密钥，我有一个特别令人沮丧的问题。

**背景：**

我有一些敏感数据存储在需要加密/解密的数据库中。目前我正在使用 Rijndael 算法。该应用程序是基于 Web 的 (ASP.NET MVC)。多个实例的密钥需要相同（如果这些实例连接到同一个数据库）。

**问题：**

记住以上内容，存储密钥的最佳位置在哪里？或者也许我应该使用非对称算法？有人还建议我使用 .cer 文件。那将如何运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:49:34.370

这里很好地描述了加密在 Windows/.NET 上的工作原理。基本上，您会将您的证书存储在 Windows 证书存储中并使用 Crypt API 来使用它。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa388162(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388162(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:50:15.770

与对称相比，非对称加密使用更多的资源。对称加密数据和非对称加密密钥（如 SSL）是一个好主意。

由于您可能需要多个实例，因此如果没有互补的不对称解决方案，风险会更高。

`CertMgr.msc`您已经完成了第一部分，只需通过 Windows 证书管理控制台（运行 => ）使用非对称算法保持密钥安全

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:16:44.870

存储密钥没有很好的解决方案。有很多不好的解决方案，比如硬编码密钥，或者将其存储在数据库中，因此将密钥存储在 .cer 之类的文件中比那些要好得多。

我已将 Google 的[Keyczar](http://keyczar.org)框架移植[到 C#](http://jbtule.github.com/keyczar-dotnet/)，它主要将密钥存储在文件系统上。强调**键**复数。

它在格式中内置了密钥轮换，因此您可以随着时间的推移轮换对称密钥，基本上允许您替换或增加新密文的密钥强度，而不会失去解密旧密文的能力，它通过添加一个小的密钥标识符来做到这一点到密文并使用经过[身份验证的加密](http://en.wikipedia.org/wiki/Authenticated_encryption)。

能够更改您的加密密钥是在构建您自己的加密时经常被忽略的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:21:33.567

使用一次性、随机生成的对称密钥。将此密钥直接添加到消息中，使用非对称加密算法对其进行加密。接收者首先解码对称密钥，然后使用它来解码消息的其余部分；之后，对称密钥被丢弃并且永远不会重复使用 - 因此不需要存储。

您将获得非对称加密的所有逻辑，即使好的加密密钥的大小也不应该是一个大的性能问题。

# php - Doctrine 如何设置私有 ID

> ID：14981251
> 
> 赞同：8
> 
> 时间：2013-02-20T13:39:02.960
> 
> 标签：php, doctrine-orm

在 PHP 中，我可以创建一个带有私有/受保护`$id`变量且没有设置器的模型。

Doctrine ORM 能够在保存/加载对象时设置该属性。

这在内部如何运作？我假设这是通过序列化处理的，但我无法找到负责此行为的代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T13:46:57.730

在第一次实例化一个实体（例如 a `User`）时，它会这样做：

```
$this->prototype = unserialize(sprintf('O:%d:"%s":0:{}', strlen($this->name), $this->name)); 
```

它在不调用其构造函数的情况下创建了该类型的对象（反序列化避免了对 的调用`__construct`，并且它们是有意这样做的，因此它们不必担心构造函数的外观或作用）。

在第一个对象被初始化后，Doctrine 使用`clone`创建相同对象类型的新实例。

```
$entity = clone $this->prototype; 
```

从克隆的对象中，它将：

```
$reflection = new \ReflectionObject($entity);
$property = $reflection->getProperty('idField');
$property->setAccessible(true);
$property->setValue($entity, 123); 
```

由于 Doctrine 对复合主键的支持，执行此操作的实际代码更加复杂，但这有望指导您正确的方向。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T13:46:36.857

Doctrine ORM 使用[反射](http://php.net/manual/en/class.reflectionclass.php)来[分配标识符](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L819)。这是在实体的[类元数据中完成的。](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Mapping/ClassMetadataInfo.php#L679-L691)

当 ORM 必须在内部实例化它们而不使用构造函数参数时，反序列化[仅用于创建](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Mapping/ClassMetadataInfo.php#L829-L831)实体的新实例（蓝图）。一旦蓝图可用，就会为每个新请求的实例克隆它。

官方网站上有一篇博文[解释了 Doctrine 如何创建](https://www.doctrine-project.org/2010/03/21/doctrine-2-give-me-my-constructor-back.html)实体的新实例。

# c++ - 构造函数和对象声明具体事项

> ID：14981252
> 
> 赞同：0
> 
> 时间：2013-02-20T13:39:05.543
> 
> 标签：c++, c, eclipse, optimization, arduino

在我的`main.cpp`文件中，我调用了一个类的构造函数。在构造函数中，我从一些静态函数中设置了这个类的变量。所有的问题都是关于从 NTP 服务器设置时间。

作为 getter 的静态函数使用`while`循环来检查标志。如果未设置时间，则该标志为假，如果 NTP 服务器至少有一次响应，则该标志为真。如果标志为假，则`while`循环必须尝试永远获取时间（因为没有理由在没有时间的情况下继续），如果为真，则返回时间。

正如我所说的，构造函数通过调用 getter 来设置变量。

当我在 main 中声明该类的对象时，程序没有运行，因为我在串行打印上什么也没得到。如果我评价它的声明，它会起作用。此外，它不像卡在里面，`while`因为我在里面放了一个串行打印，它也没有出现。我给出下面的代码：

构造函数：

```
#import "DayTime.h"
#include "NTP.h"

DayTime::DayTime(){
    hour = NTP::getLCThour();
    minutes = NTP::getMin();
    seconds = NTP::getSec();
} 
```

`main.cpp`文件：

```
#include <Arduino.h>
#include <SPI.h>
#include "NTP.h"
#include "DayTime.h"
#include "DayNumber.h"

DayTime DT;
DayNumber DN;

int main(void)
{
    init();
    setup();
    for (;;)
        loop();
    return 0;
}

void setup() {
    Serial.begin(9600);
    NTP::startEthernetAndUdp();
}

void loop() {
    NTP::getTime();
    //    Serial.println(DT.hour);
    //    Serial.println(DT.getTimeToDec());
    delay(3000); 
```

如果我注释了名为 DT 的 DayTime 对象的声明，那么 getTime 函数在这里起作用。

NTP.cpp 部分：

1）第一个吸气剂：

```
int NTP::getLCThour(){
    while(timeNTPSet==false){
        Serial.print("kolaw");
        getTime();
    }
    return lcthour;
} 
```

2) 标头上的标志声明：

```
static bool timeNTPSet; 
```

这是一个公共变量。

3）它在.cpp文件开头的定义：

```
bool NTP::timeNTPSet= false; 
```

这是在包含后的 .cpp 文件中设置的。

最后将标志设置为 true 的函数的一部分：

```
NTP NTP::getTime(){

    if (testNtpServer()){
        timeNTPSet = true;
        // We've received a packet, read the data from it
        Udp.read((unsigned char*)packetBuffer, NTP_PACKET_SIZE); 
```

testNTPServer 函数仅测试 3-4 个不同的 NTP 服务器，以便从至少一个服务器中获取时间。此外，如果我像之前所说的那样评论 DayTime 对象的声明，它也可以正常工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:43:23.547

您将`DayTime`变量声明为全局变量。这意味着它的构造函数在你的函数被调用*之前*`main`被调用。并且由于串行端口以及我猜测的网络没有设置，因此它将无法工作。

您可以在类中创建一个初始化`DayTime`，它执行构造函数的操作，并在设置串行端口和网络后调用它。

# ios - 用从子视图调用的视图填充 iphone 屏幕

> ID：14981254
> 
> 赞同：0
> 
> 时间：2013-02-20T13:39:09.723
> 
> 标签：ios, xamarin.ios

我的应用程序中的视图上有一个 UIScrollView 和一个 UIPageControl。滚动视图包含 2 个视图控制器（page1 和 page2），每个页面都在一个单独的类中进行管理，并具有一个按钮列表。

我的问题是，例如，当我在 page1 的一个按钮内触摸时，我想打开一个新的控制器，并且新的 viewcontroller 显示为 scrollview 的子视图（是新的 page1），因此正在显示 pagecontrol 和 page2卷轴仍然有效。

这很正常，因为我在 page1 代码中执行此操作：

```
void HandleTouchUpInside (object sender, EventArgs e)
{
    MyNewController mnc = new MyNewController();
    this.View.AddSubview(mnc.View);
} 
```

所以我的问题是..

如何设置被调用的控制器以填充屏幕？是否可以用从子视图调用的视图填充屏幕？

**编辑：**

![这是第1页](../Images/52086d1147b822bb8fe636b18c763c0c.png) ![这是作为 page1 的新控制器，而不是作为填充屏幕的新视图控制器](../Images/221c230498feacf2088f9fc9cbc3c215.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:49:56.957

### 使用故事板

我会推荐使用 StoryBoard 编辑器来设计你的 UI。按住 Control 从您的按钮拖动到您的 MyNewController。为 Action Segue 选择**模态。**

### 使用代码

```
void HandleTouchUpInside (object sender, EventArgs e)
{
    bool animated = true;
    NSAction completionHandler = null;
    MyNewController mnc = new MyNewController();
    PresentViewController(mnc, animated, completionHandler);
} 
```

### 解雇

在任何一种情况下，当您想要关闭`DismissViewController`来自 MyNewController 的模态视图调用时。

```
bool animated = true;
NSAction completionHandler = null;
DismissViewController(animated, completionHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:39:51.183

最后，我解决了从我的应用程序委托调用顶部导航控制器的问题。

```
 void HandleTouchUpInside (object sender, EventArgs e)
    {
        Clases viewClases = new Clases();

        AppDelegate del = (AppDelegate)UIApplication.SharedApplication.Delegate;
        del._navController.SetNavigationBarHidden(false, true);
        del._navController.PushViewController(viewClases, false);

    } 
```

有关此 [链接的更多信息](https://stackoverflow.com/questions/3142134/accessing-a-top-navigation-controller-from-a-subview-navigation-controller)

# javascript - 在js中从结尾处第三次拆分字符串

> ID：14981256
> 
> 赞同：0
> 
> 时间：2013-02-20T13:39:15.410
> 
> 标签：javascript

我有这个字符串：

> 01-08-2011_11-08-20113-我的身份-我的姓名-1.tif

我想在第三次出现 ("-") 时从字符串的末尾拆分，因为在字符串的开头，长度可能会改变。这就是我想要的：

> 我的身份-我的名字-1.tif

我不想使用`slice`and `pop`。我只想使用`split`, `lastindexof`,`substring`和`indexof`.

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:46:55.257

```
myStr.replace(/^.*-([^-]+-[^-]+-[^-]+)$/, '$1') 
```

这将捕获最后三个破折号之间的所有内容，并仅用该部分替换整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T22:33:08.317

我确信有更好的方法来做到这一点 - 因为我对 js 很陌生，但下面的方法确实有效。这是基于您不使用拼接和弹出的请求。

```
var input = "01-08-2011_11-08-20113-My Id-MY Name-1.tif";
var sc = input.split("-");
var r1 = sc[sc.length-1]
var r2 = sc[sc.length-2]
var r3 = sc[sc.length-3]
var rtn = [r3,r2,r1].join("-")
alert (rtn) //returns: My Id-MY Name-1.tif 
```

# java - 如何使用 PDFBox 添加多个签名？

> ID：14981263
> 
> 赞同：1
> 
> 时间：2013-02-20T13:39:30.037
> 
> 标签：java, digital-signature, pdfbox

我正在尝试使用 PDFBox 在 PDF 文档中添加两个不同的签名（显然有两个不同的证书）。[从这个答案中](https://stackoverflow.com/a/13387484/1384011)提供的代码开始，但是每当我添加第二个签名时，它都会使第一个签名无效。

我设法使用 iText 轻松做到这一点，因为 PdfStamper 有可能附加额外的元素，但由于它的新许可证，我不能在这个项目中使用 iText。

谁能指出我正确的方向？如果没有，是否还有其他具有签名功能的开源库？

谢谢！

编辑：我的问题不是我不能添加第二个签名，而是一旦应用第二个签名，第一个签名就会失效。

为第二个签名创建了一个方法，我目前像这样签署我的文档：

`PDFSigner signer = new PDFSigner(input, output);
signer.sign(keystore1, password1);
signer.signR(keystore2, password2);
signer.document.saveIncremental(.....);`

# javascript - 从 DOM 副本中删除元素

> ID：14981268
> 
> 赞同：0
> 
> 时间：2013-02-20T13:39:39.133
> 
> 标签：javascript, dom

我想从主 DOM 的副本中删除一个元素，但是我无法让它工作。

基本上，我试图从重复的 DOM 中删除 h2 元素并在警报中返回修改后的代码，但是到目前为止，无论我尝试过什么，我仍然得到原始 DOM。

```
<html>
<head>

</head>

<body>

<h2>Test</h2>

<script type="text/javascript" id="CustomScript">

    var Page = document.documentElement;
    var TempPage = document.documentElement;

    TempPage.removeChild("h2"); // Remove Not working
    TempPage.getElementById("h2").innerHTML = ""; // Remove Not working

</script>

<input type="button" value="Get Pages Code" onclick="alert(TempPage.innerHTML)">

</body>
</html> 
```

如果可能的话，我宁愿不使用 jQuery 或 YUI 等，只想使用常规的 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:58:21.377

你的问题有两个部分，你都做错了。

1.  `TempPage`是*同一个*对象`Page`。分配给不同的变量不会产生副本——它只是让您可以通过另一个名称访问同一个对象。您需要显式创建一个副本。
2.  您获取元素的尝试`h2`都是不正确的。
    1.  `removeChild()`不起作用，因为：
        1.  它需要一个 Node 对象，而不是字符串。
        2.  `documentElement`是`<html>`元素，但`<h2>`元素是 的子元素，而`<body>`不是`<html>`。
    2.  `getElementById()`将不起作用，因为您的`<h2>`元素没有 id 属性。

你将如何做到这一点是：

```
var TempPage = document.documentElement.cloneNode(true); // copy document
var h2 = TempPage.querySelector('h2'); // find h2 element
h2.parentNode.removeChild(h2);  // remove h2 element 
```

如果`querySelector`不可用，这将是一项更加繁琐的任务，但仍然可以使用正常的 DOM 操作。你真的需要[学习 DOM 操作](http://net.tutsplus.com/tutorials/javascript-ajax/javascript-and-the-dom-series-lesson-1/)

但是，从您的完整代码中，我无法理解您为什么需要克隆页面。只需这样做：

```
function textContent(node) {
    return node.textContent || node.innerText || '';
}
var h2 = document.getElementsByTagName('h2')[0];
var h2Text = textContent(h2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:41:21.660

`TempPage`和`Page`是*同一个*元素，只是有两个不同的变量指向它。

通过一个变量所做的任何更改都会自动发生在另一个变量上。为了区别对待它们，一个必须是另一个的克隆。 [`Node.cloneNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)可能有用，但未得到广泛支持。您将需要进行*深层*复制。

# java - 连接的 UDP 套接字未将数据报发送到双栈机器上的仅 IPv6 服务器应用程序

> ID：14981273
> 
> 赞同：0
> 
> 时间：2013-02-20T13:40:00.713
> 
> 标签：java, sockets, udp, ipv6

我期待下面的代码将数据报发送到任何 ipv4/ipv6 服务器应用程序，但是在我的双堆栈盒上，它不会将数据报发送到仅 ipv6 的服务器应用程序，我需要使用环回文字“::1”而不是“localhost”来实现它。

```
DatagramSocket datagramSocket = new DatagramSocket();
datagramSocket.connect(InetAddress.getByName("localhost"),8086);
datagramSocket.send(new DatagramPacket("hello".getBytes(), "hello".length())); 
```

我可能会错过什么？如何编写独立于协议的 UDP 客户端，它使用“连接”并能够将数据报发送到在双堆栈盒上运行的任何仅 ipv4 或仅 ipv6 的服务器应用程序？

# javascript - Javascript：开关与从 cookie 中提取的变量值不匹配

> ID：14981274
> 
> 赞同：0
> 
> 时间：2013-02-20T13:40:01.200
> 
> 标签：javascript, cookies, switch-statement, case

该脚本应该计算 cookie 设置的次数，并在计数为 1 或 2 时执行特定操作。由于某种原因，它与开关中的 1 不匹配。我尝试将其作为字符串“1”进行，并尝试以多种不同的方式重写它。似乎没有什么可以匹配。

```
<HTML>
    <HEAD>
        <TITLE>Hello World</TITLE>
    </HEAD>
    <BODY>
        <SCRIPT type="text/javascript">

function SetCookie(name, value, time)
{
    var expires = new Date();    expires.setTime( expires.getTime() + time );    document.cookie = name + '=' + value + '; expires=' + expires.toGMTString() + '; path=/';
}

function GetCookie(name)
{

    var cookies = document.cookie.toString().split('; ');
    var cookie, c_name, c_value;

    for (var n=0; n<cookies.length; n++)
    {
        cookie  = cookies[n].split('='); c_name  = cookie[0]; c_value = cookie[1];

        if ( c_name == name )
        { return c_value; }
    }
    return null;
}

function CheckTarget(e)
{
    var cookieValue = GetCookie('vrOp');    

    if (cookieValue === null) {
                var cookieOp = 1;
                SetCookie('vrOp',  cookieOp, 5*24*60*60*1000);
    }
    else {

    switch(cookieValue)
        {           
            case 1:
                var cookieOp = cookieValue + 1;
                alert(cookieOp);
                SetCookie('vrOp', cookieOp, 5*24*60*60*1000);
                break;
            case 2:
                var cookieOp = cookieValue + 1;

                SetCookie('vrOp', cookieOp, 5*24*60*60*1000);
                break;
        }

    }
}

function InitVr()
{
    if ( document.attachEvent )
    {
        document.attachEvent( 'onclick', CheckTarget );
    }
    else if ( document.addEventListener )
    {
        document.addEventListener( 'click', CheckTarget, false );
    }
}

InitVr();

        </SCRIPT>
        <script type="text/javascript">

        </script>
    </BODY>
</HTML> 
```

如果它确实有效，您应该不会在第一次单击时从脚本中得到任何反应，因为 cookieValue 为 === null，除了它将 cookie 值设置为 1。在第二次单击时，它应该提醒您 cookie 值现在将变为是 2。第三次单击不会再次发出警报，但是当设置为 3 时的值。就好像开关甚至没有运行一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:07:50.677

我测试了您的代码，并使用了大量的警报，发现这`cookieValue`确实是一个字符串。我猜测为什么当您更改开关以查找字符串时它似乎不起作用是因为它已被设置为您的开关不查找的值。

因此，就您的代码而言，事件的顺序如下：

*   cookie 在第一次点击时为空（假设是新环境）。然后将其设置为字符串“1”*   在第二次单击时，输入了 switch 语句，但没有匹配的值，因此没有任何反应*   之后的所有点击都和上面一样
现在，如果您更改开关以检查字符串，在第一种情况下，您希望`cookieOp`设置值为 2，而是将 1 连接到其值，从而设置为值“11”。

解决这个问题实际上很简单。您只需要确保您正在处理的变量是一个数字，而不是一个字符串。

```
if (cookieValue === null) {
    var cookieOp = 1;
    SetCookie('vrOp',  cookieOp, 5*24*60*60*1000);
} else {
    cookieValue = parseInt(cookieValue, 10);
    switch(cookieValue)
    {           
        case 1:
            var cookieOp = cookieValue + 1;
            ... 
```

为确保这能正常工作，您可能需要删除先前测试已设置的 cookie，或`default`在您的开关中放置一个案例。

# c++ - boost::asio 内部线程

> ID：14981291
> 
> 赞同：5
> 
> 时间：2013-02-20T13:40:47.763
> 
> 标签：c++, boost, tcp, boost-asio

当使用 boost::asio 进行一些异步 TCP 通信时，我注意到它启动了很多 (3-4) 内部线程。阅读[文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/core/threads.html)，它说

```
"The implementation of this library for a particular platform may 
 make use of one or more internal threads to emulate asynchronicity" 
```

现在我的库有非常严格的要求，不能启动任何额外的线程（除了一个由客户端提供并且现在启动的线程`io_service::run()`）。有没有办法阻止 boost::asio 创建这些额外的线程？

或者，是否有任何其他只能在一个线程中运行的异步库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T15:15:52.063

`BOOST_ASIO_DISABLE_THREADS`您可以通过在适当的翻译单元中定义来禁用模拟异步操作支持。[文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/using.html)有这个关于定义的说法

> 显式禁用 Boost.Asio 的线程支持，与 Boost 作为一个整体是否支持线程无关。

如果您没有找到[特定于平台的实现说明](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/implementation.html)，它会明确说明哪些操作使用此仿真。例如，我知道几乎每个平台`async_resolve()`都以这种方式模拟，线程是在第一次调用`async_resolve()`. 一些（全部？）Windows 平台模拟了其他几个操作，例如`deadline_timer`操作。

禁用线程支持的一种替代方法可能是避免这些模拟操作。我个人没有`BOOST_ASIO_DISABLE_THREADS`在项目中使用过，所以我不确定它是否有其他副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:59:57.540

您是否实际测试过它是否在您的特定平台上产生了线程？如果没有，问题就解决了！如果有的话，您可能会考虑使用不同的库，例如 libevent 或 libev。其中任何一个，或者由 Qt 等各种库提供的一大堆其他异步事件循环都可以工作。

# html - HTML/CSS 渲染问题

> ID：14981292
> 
> 赞同：0
> 
> 时间：2013-02-20T13:40:48.693
> 
> 标签：html, css

我有一个我遇到的问题的简单示例。请注意，两个 div 各有 5 个按钮，每个按钮应以 20% 的宽度呈现。第一组超出了界限，我不知道为什么。如果您使用开发工具，您可以看到 div 本身是 100% 宽度的正确大小。在第二组中，当按钮连接时，它可以工作。谁能解释一下？

[jsfiddle 演示](http://jsfiddle.net/AdeMU/)

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        .nav5 {
            white-space: nowrap;
         }
         .nav5 button {
             height: 50px;
             width: 20%;
         }
    </style>
 </head>
<body>
    <div class="nav5">
        <button>A</button>
        <button>B</button>
        <button>C</button>
        <button>D</button>
        <button>E</button>
    </div>
    <div class="nav5">
        <button>A</button><button>B</button><button>C</button><button>D</button><button>E</button>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:13:27.433

或者你可以'浮动：离开'你的按钮

[http://jsfiddle.net/AdeMU/1/](http://jsfiddle.net/AdeMU/1/)

```
 .nav5 {
        white-space: nowrap;
    }
    .nav5 button {
        height: 50px;
        width: 20%;
        margin:0;
        float:left;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:55:05.163

即使您已指定`white-space: nowrap;`它会将所有空格合并为一个，因此它不会完全删除它。您可以使用您指定的第二种方法或注释掉两者之间的空格。

# c# - DATE 未使用 sql 命令更新到数据库中

> ID：14981296
> 
> 赞同：0
> 
> 时间：2013-02-20T13:40:50.827
> 
> 标签：c#, sql, sql-server-2008

我正在尝试更新数据库中的日期，该日期在开始时设置为 null，并且用于日期的数据类型是`nvarchar(50)`.

我什至在 SQL Server 中尝试过`nchar`, `date`,`varchar(50)`数据类型，但是在更新它时出现错误消息：

> *从字符串转换日期和/或时间时转换失败。*

如何摆脱这种情况，我想使用 2-feb-2013 格式显示日期

```
dd.tostring("D); 
```

它不工作。

```
SqlCommand cmd = new SqlCommand("update barcode set intime=@time,date='@date' where bcd=@bcd", con);
cmd.Parameters.Add("@cc", SqlDbType.NChar, 20).Value = c;
cmd.Parameters.Add("@bcd", SqlDbType.NChar, 20, "bcd").Value = textBox1.Text;
DateTime dd = DateTime.Now;

String ss, sss;
ss = dd.ToString("t");
sss = dd.ToString("d");

cmd.Parameters.Add("@time", SqlDbType.NVarChar, 50, "intime").Value = ss;
cmd.Parameters.Add("@date", SqlDbType.Date, 50, "date").Value = sss;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:49:47.960

好吧，我不明白为什么要为此使用字符串参数，或者为什么在将日期和时间值发送到数据库之前关心格式。无论如何，既然 SQL Server 也可以告诉时间，为什么要让应用程序这样做呢？`CURRENT_TIMESTAMP`您可以通过为 the`intime`和列设置默认值来绕过所有这些`date`（因此您甚至不需要在插入时指定它们），并且在更新时，如果实际上您确实需要更新这些列：

```
UPDATE dbo.barcode 
  SET intime = CURRENT_TIMESTAMP,
      [date] = CURRENT_TIMESTAMP
  WHERE bcd = @bcd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:45:18.113

因为你`@date`用单引号括起来。参数不应用单引号引起来。删除它，它会工作。

```
UPDATE barcode 
SET    intime = @time,
       date = @date 
WHERE  bcd = @bcd 
```

还有一件事，保持日期格式不变。仅在投影期间转换日期（*选择*）

# android - 如何在同一部分文本上的 TextView 文本上设置多个跨度？

> ID：14981307
> 
> 赞同：67
> 
> 时间：2013-02-20T13:41:31.963
> 
> 标签：android, font-size, spannablestring

假设我有下一个文本：

> 你好堆栈溢出

我希望将第二个单词设置为[RelativeSizeSpan](http://developer.android.com/reference/android/text/style/RelativeSizeSpan.html)（设置相对字体大小）和[TextAppearanceSpan](http://developer.android.com/reference/android/text/style/TextAppearanceSpan.html)（设置文本的颜色），如何将它们合并？

我所知道的是我可以选择其中一个，例如使用下一个代码：

```
final SpannableString textToShow = new SpannableString("Hello stackOverflow");
textToShow.setSpan(new RelativeSizeSpan(1.5f), textToShow.length() - "stackOverflow".length(),textToShow.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(textToShow); 
```

但我还需要设置颜色，甚至添加其他跨越类的其他功能......

我能做些什么 ？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-02-20T14:13:03.377

只需设置额外的跨度。必要时它们将重叠/合并。这段代码对我有用：

```
final SpannableString text = new SpannableString("Hello stackOverflow");
text.setSpan(new RelativeSizeSpan(1.5f), text.length() - "stackOverflow".length(), text.length(),
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
text.setSpan(new ForegroundColorSpan(Color.RED), 3, text.length() - 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tv.setText(text); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-03-22T08:42:28.027

我知道这是对已经回答的问题的新回复，但我想分享一个我制作的实用程序类，它使这项任务更容易。

* * *

# Java版

```
public class SimpleSpanBuilder {
    private class SpanSection{
        private final String text;
        private final int startIndex;
        private final CharacterStyle[] styles;

        private SpanSection(String text, int startIndex,CharacterStyle... styles){
            this.styles = styles;
            this.text = text;
            this.startIndex = startIndex;
        }

        private void apply(SpannableStringBuilder spanStringBuilder){
            if (spanStringBuilder == null) return;
            for (CharacterStyle style : styles){
                spanStringBuilder.setSpan(style, startIndex, startIndex + text.length(), Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
            }
        }
    }

    private List<SpanSection> spanSections;
    private StringBuilder stringBuilder;

    public SimpleSpanBuilder(){
        stringBuilder = new StringBuilder();
        spanSections = new ArrayList<>();
    }

    public SimpleSpanBuilder append(String text,CharacterStyle... styles){
        if (styles != null && styles.length > 0) {
            spanSections.add(new SpanSection(text, stringBuilder.length(),styles));
        }
        stringBuilder.append(text);
        return this;
    }

    public SimpleSpanBuilder appendWithSpace(String text,CharacterStyle... styles){
        return append(text.concat(" "),styles);
    }

    public SimpleSpanBuilder appendWithLineBreak(String text,CharacterStyle... styles){
        return append(text.concat("\n"),styles);
    }

    public SpannableStringBuilder build(){
        SpannableStringBuilder ssb = new SpannableStringBuilder(stringBuilder.toString());
        for (SpanSection section : spanSections){
            section.apply(ssb);
        }
        return ssb;
    }

    @Override
    public String toString() {
        return stringBuilder.toString();
    }
} 
```

**用法：**

```
SimpleSpanBuilder ssb = new SimpleSpanBuilder();
ssb.appendWithSpace("Hello");
ssb.append("StackOverflow",new ForegroundColorSpan(Color.RED),new RelativeSizeSpan(1.5));
textView.setText(ssb.build()); 
```

* * *

# Kotlin 版本

```
class SimpleSpanBuilder() {

    class Span {
        private var startIndex: Int = 0
        internal var text: String
        private var styles: Array<out CharacterStyle>

        internal constructor(index: Int, text: String, vararg styles: CharacterStyle) {
            this.startIndex = index
            this.text = text
            this.styles = styles
        }

        constructor(text: String, vararg styles: CharacterStyle) : this(0, text, *styles)

        internal fun setIndex(index: Int): Span {
            return Span(index, this.text, *this.styles)
        }

        internal fun apply(spanStringBuilder: SpannableStringBuilder?) {
            if (spanStringBuilder == null) return
            for (style in styles) {
                spanStringBuilder.setSpan(
                    style,
                    startIndex,
                    startIndex + text.length,
                    Spannable.SPAN_INCLUSIVE_EXCLUSIVE
                )
            }
        }
    }

    private val spanSections = mutableListOf<Span>()
    private val stringBuilder = StringBuilder()

    constructor(text: String, vararg styles: CharacterStyle) : this() {
        plus(Span(text, *styles))
    }

    operator fun plus(span: SimpleSpanBuilder.Span): SimpleSpanBuilder {
        spanSections.add(span.setIndex(stringBuilder.length))
        stringBuilder.append(span.text)
        return this
    }

    fun build(): SpannableStringBuilder {
        val ssb = SpannableStringBuilder(stringBuilder.toString())
        for (section in spanSections) {
            section.apply(ssb)
        }
        return ssb
    }

    override fun toString(): String {
        return stringBuilder.toString()
    }
} 
```

**用法**

```
var ssb = SimpleSpanBuilder("Hello ",ForegroundColorSpan(Color.BLUE))
ssb += SimpleSpanBuilder.Span(
    "StackOverflow",
    ForegroundColorSpan(Color.RED),
    RelativeSizeSpan(1.5f)
)

textView.text = ssb.build() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-14T09:47:21.990

### 最简单的方法？

### `textView.setText("I love coding");`

### `setHighLightedText(textView,"coding");`

只需使用以下方法 -

```
public void setHighLightedText(TextView tv, String textToHighlight) {
    String tvt = tv.getText().toString();
    int ofe = tvt.indexOf(textToHighlight, 0);
    Spannable wordToSpan = new SpannableString(tv.getText());

    for (int ofs = 0; ofs < tvt.length() && ofe != -1; ofs = ofe + 1) {
        ofe = tvt.indexOf(textToHighlight, ofs);
        if (ofe == -1)
            break;
        else {
            // you can change or add more span as per your need
            wordToSpan.setSpan(new RelativeSizeSpan(2f), ofe,ofe + textToHighlight.length(), 0); // set size
            wordToSpan.setSpan(new ForegroundColorSpan(Color.RED), ofe, ofe + textToHighlight.length(), 0);// set color
            tv.setText(wordToSpan, TextView.BufferType.SPANNABLE);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-14T07:50:29.613

Kotlin 可以通过扩展来帮助做到这一点`SpannableStringBuilder`：

```
fun SpannableStringBuilder.spansAppend(
    text: CharSequence,
    flags: Int,
    vararg spans: Any
): SpannableStringBuilder {
    val start = length
    append(text)

    spans.forEach { span ->
        setSpan(span, start, length, flags)
    }

    return this
} 
```

使用示例：

```
val builder = SpannableStringBuilder()
builder.append("Start of string ")
builder.spansAppend(
    "text spanned",
    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE,
    RelativeSizeSpan(1.1f),
    ForegroundColorSpan(Color.RED)
) 
```

# java - Hashset 二维数组

> ID：14981311
> 
> 赞同：0
> 
> 时间：2013-02-20T13:41:43.417
> 
> 标签：java, list, multidimensional-array, hashset

我有一个哈希集，其中存储了一个列表唯一的 URL。我想让它成为一个二维哈希集，其中我有一个唯一的 URL 列表和一个非唯一的数字。然后，我希望能够在此列表中搜索 URL 和与之关联的号码。下面是我要创建的列表的示例。

```
www.test1.com - 200
www.test2.com - 503
www.test3.com - 400
www.test4.com - 200
www.test5.com - 404
www.test6.com - 404 
```

然后我想搜索 www.test2.com 并返回 503。这可以使用 Hashset 吗？还是我应该看别的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:46:36.823

尝试使用 HashMap，其中 URL 为键，返回码为值。HashMap 在幕后使用 HashSet。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T13:47:08.067

哈希图可能更适合您的情况。

```
Map<String, Integer> urlHashMap = new HashMap<String, Integer>();
urlHashMap.put("www.test1.com", 200);
System.out.println(urlHashMap.get("www.test1.com")); //outputs 200 
```

它提供了一种更简单、更容易从地图中获取值的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:47:54.717

似乎适合您的数据结构是构建一个**Dictionary \ HashMap**（所有键都是唯一的：test1、test2、...，并且值不必是唯一的）。

例子：

```
HashMap<String,String> pairs = new HashMap<String,String>();

pairs.put("www.test1.com","404"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T13:48:11.053

您可以使用地图来实现您想要的，如下所示：

```
Map<String, Integer> map = new HashMap<String, Integer>();
map.put("www.test1.com", 200);
map.put("www.test2.com", 503);
...and so on 
```

# php - PHPUnit coverage-html 分析错误的文件夹

> ID：14981313
> 
> 赞同：1
> 
> 时间：2013-02-20T13:41:45.963
> 
> 标签：php, report, phpunit, code-coverage

[在 ZF2“入门](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)”教程之后，我正在学习 Zend Framework 2 。现在我有一个简单的应用程序，即 IndexController 的 PHPUnit 测试（代码是从教程的大写“[单元测试](http://framework.zend.com/manual/2.0/en/user-guide/unit-testing.html)”复制而来）。测试有效。现在我正在尝试创建一个代码覆盖率报告：

```
# phpunit --coverage-html ./report 
```

或者

```
# phpunit --coverage-html ./report ApplicationTest/Controller/IndexControllerTest.php 
```

我期望整个文件夹`test`（第一个示例）或`IndexControllerTest`（第二个示例）的覆盖率报告。

我目前得到的是这份报告：

[![在此处输入图像描述](../Images/f9992877edab9cf757c42b3756fe98ae.png)](https://i.stack.imgur.com/kCxcJ.png)

为什么？以及如何使代码覆盖脚本处理我要分析的文件/文件夹。

编辑：

我可以导航到我的模块文件夹并查看它的报告：

[![在此处输入图像描述](../Images/9408ecc544f93f2e3cd0b3a8267c1346.png)](https://i.stack.imgur.com/aaEej.png)

但是问题保持不变：（1）它为什么会这样工作以及（2）我怎样才能使代码覆盖脚本处理（仅）我想分析的文件/文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:52:19.570

您可以使用 phpunit.xml 包含/排除文件或文件夹以进行代码覆盖，请参阅[phpunit 手册](http://www.phpunit.de/manual/3.2/en/appendixes.configuration.html#appendixes.configuration.blacklist-whitelist)。

您也可以忽略代码覆盖聚合中的特定代码块。见：[http ://www.phpunit.de/manual/3.2/en/code-coverage-analysis.html](http://www.phpunit.de/manual/3.2/en/code-coverage-analysis.html)

PHPUnit 代码覆盖率使用 xdebug 来计算覆盖的行。如果您的 IndexControllerTest 还在订单文件中运行行，它们也将显示在覆盖率报告中。

# java - 在 Java/c# 中以不同于 C 中的后缀增量向自身添加变量

> ID：14981316
> 
> 赞同：1
> 
> 时间：2013-02-20T13:41:54.780
> 
> 标签：java, c, postfix-notation

如果我这样做，在 Java 和 C# 中：

```
int i=1;
int j= i++ + i; 
```

j 是 3，即它转换为 1+2 并在加法之前增加 i。

然而，在 C 中 j 是 2，即它转换为 1+1 然后增加 i。

C 和 Java/C# 中导致表达式存在差异的内部机制是什么？

（后修复也是如此。Java/C# 变为 4，C 变为 3。）

谢谢。

顺便说一句，最初我认为这将是 C 的答案，因此对 Java/C# 结果感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T13:45:15.670

与精确指定副作用发生时间的 Java 和 C# 不同，C 禁止在下一个[*序列点*](http://en.wikipedia.org/wiki/Sequence_point)之前使用具有副作用的表达式。您的表达式不仅会在 C 中产生不同的结果，而且还是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:44:52.090

在 C 语言中，该机制是对编译器编写技能的精心调整，被亲切地称为[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)或“UB”。

换句话说，没有人可以为 C 提供答案，因为事先知道代码会触发未定义的行为。任何事情都有可能发生，没有“对”或“错”之分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:41:49.767

来自[C 语言标准的 2011 年草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 6.5 表达式
> 
> ...
> 2 如果标量对象的副作用相对于同一标量对象的不同副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。如果表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为未定义。^(84))
> 
> 3 运算符和操作数的分组由语法指示。^(85))除非稍后指定，否则子表达式的副作用和值计算是无序的。^(86))
> 
> * * *
> 
> ^(84) 本段呈现未定义的语句表达式，例如
> 
> ```
>     我=++我+1；
>     a[i++] = i;
> 
> ```
> 
> 同时允许
> 
> ```
>     我 = 我 + 1;
>     a[i] = i;
> 
> ```
> 
> 85) 语法规定了表达式求值中运算符的优先级，与本小节主要小节的顺序相同，最高优先级在前。因此，例如，允许作为二进制 + 运算符 (6.5.6) 的操作数的表达式是 6.5.1 到 6.5.6 中定义的那些表达式。例外情况是作为一元运算符 (6.5.3) 的操作数的强制转换表达式 (6.5.4)，以及包含在以下任何一对运算符之间的操作数：分组括号 () (6.5.1)、下标括号 [] (6.5 .2.1)、函数调用括号 () (6.5.2.2) 和条件运算符 ? : (6.5.15)。在每个主要子条款中，运算符具有相同的优先级。左或右结合性在每个子条款中由其中讨论的表达式的语法指示。
> 
> 86) 在程序执行期间多次计算的表达式中，其子表达式的未排序和不确定排序的计算不需要在不同的计算中一致地执行。)

`i++`相对于较大表达式的副作用的应用顺序`i++ + i`未*指定*；这两个操作相对于彼此是无序的。如果在求值后立即应用副作用`i++`，那么你将得到 1 + 2 的结果。如果副作用推迟到相加之后，你将得到 1 + 1 的结果。

旧版本的标准更清晰一些。通过对序列点之间的表达式求值，对象最多可以修改其值*一次*，并且表达式的先前值仅用于确定要存储的新值。

该行为*未定义*，因此编译器不需要检测这些问题并发出诊断（`i++ + i`很容易捕获，但这个问题有更微妙的变化，更难检测）。就语言定义而言，任一结果都是“正确的”。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-20T13:48:05.247

在 C 中，后递增/递减将在当前操作完成后执行。在这个例子中，i++ + i；i 将在添加完成后递增。

# ruby-on-rails - 为控制器创建一个 url

> ID：14981319
> 
> 赞同：0
> 
> 时间：2013-02-20T13:41:56.957
> 
> 标签：ruby-on-rails, ruby

我是 ROR 的新手，我试图将用户的字段从 null 更新为 1。我已经为此编写了 c 控制器

```
def update_users
  Rails.logger.info("in Update users")
  @user = User.find(params[:id])
  @user.deleted=1    

  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to @user, notice: 'User was successfully Deleted.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

并在路线中将其定义为-

```
match '/update_users' => 'users#update_users', :as => 'update_users', :via => [:put] 
```

我对此的看法是——

```
= link_to raw('<span class="delete">Delete User</span>'), update_users_path(@user.id),
                                :method => :put,
                                :data => { :confirm => 'Are you sure?' },
                                :remote =>true 
```

但在输出 i 中，得到 /update_users.7 而不是 /update_users/7。在网络方面我得到-

```
ActiveRecord::RecordNotFound in UsersController#update_users

Couldn't find User without an ID 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:44:25.987

您的路由不正确 - 您的新操作应该是现有用户路由的成员操作。

有关更多信息，请参阅[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:43:56.813

尝试将您的路线更改为：

```
put '/update_users/:id' => 'users#update_users' 
```

这样您就可以正确地将您的ID传递给它。那么您的链接助手将是：

```
update_users_path(@user) 
```

就像现在一样，您还没有告诉从哪里获取 ID 的路线。

# c# - 将值发布到 URL 而不重定向

> ID：14981321
> 
> 赞同：1
> 
> 时间：2013-02-20T13:42:00.027
> 
> 标签：c#, asp.net, vb.net

我正在设置一个 SMS 服务，我必须将一些值（例如接收者、发送者和消息）发布到提供商的特定 url。

如果我只是添加一个按钮并在按钮事件中创建一个 response.redirect("...url and url parameters with values...")，那就很简单了

但是我不希望在单击按钮时将用户重定向到另一个页面。我尝试使用 JavaScript 将 URL 发布到新窗口。没关系，但我遇到了很多浏览器的弹出窗口阻止问题......

有没有关于如何实现这一点的建议，我认为这一定是一种将信息发布到支付服务等的非常常见的方式。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:53:10.927

当您需要在不重新加载的情况下将内容加载到不同的页面时，您可以使用现在得到广泛支持的本地存储。在某种意义上类似于 cookie，但更加灵活和最新。

[在此处](http://diveintohtml5.info/storage.html)深入了解本地存储

简要的本地存储演示[在这里](http://www.html5rocks.com/en/features/storage)

我不能确定在 VB 或 C# 中使用它的确切方法，但我相信如果你环顾四周，你会发现它。很难说出您的确切用例，但最终 GET 变量会在加载时加载到页面或脚本中，即使您设法更改或更新变量，也不会在下次重新加载之前访问该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:22:17.160

使用 System.Net.WebClient，您可以在不进行重定向的情况下调用网站。

```
Dim result As String = New System.Net.WebClient().DownloadString("http://...") 
```

# iphone - iOS 计量窗口大小和权重矩阵

> ID：14981322
> 
> 赞同：3
> 
> 时间：2013-02-20T13:42:00.217
> 
> 标签：iphone, ios, camera, ios7, avfoundation

我们是否有关于曝光测光窗口大小和使用提供的`iDevices`模式和点测光的窗口权重的信息。`APIs``AVfoundation`

# visual-studio-2012 - 如何强制 Visual Studio 不添加 GlobalSection(Performance) 部分？

> ID：14981323
> 
> 赞同：54
> 
> 时间：2013-02-20T13:42:08.043
> 
> 标签：visual-studio-2012, profiling, projects-and-solutions

我使用 Visual Studio 内置分析工具，现在每次我检查任何文件时，此部分都会自动添加到我的解决方案文件中：

```
GlobalSection(Performance) = preSolution
    HasPerformanceSessions = true
EndGlobalSection 
```

我完全删除了所有分析报告，然后从此解决方案中删除了所有源代码控制文件的本地副本并更新到最新版本。此部分在任何结帐后仍在 *.sln 文件中。

其他没用过prfiler的队友没有这个问题。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-01T08:06:53.773

使用菜单在 Visual Studio 中打开 PerformanceExplorer，`Analyze -> Windows -> PerformanceExplorer`并检查它是否列出了任何会话条目。

如果是这样，请通过右键单击条目以打开 ContextMenu 来删除它们。然后从菜单中选择“删除”。

您还应该检查解决方案的文件夹是否包含任何`.vsp`文件`.psess`并将其删除。这些是分析会话的报告文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-14T10:55:22.887

我能解决这个问题的唯一方法是关闭解决方案，从根目录中删除 *.psess 和 *.vsp 文件，将我的 .sln 文件重置为远程版本并重新打开解决方案。然后问题就消失了。这是使用 Visual Studio 2015 社区版。

# sql - Oracle SQL：计算 4 小时？

> ID：14981334
> 
> 赞同：1
> 
> 时间：2013-02-20T13:42:50.440
> 
> 标签：sql, function, stored-procedures, oracle10g

我有带有许多记录表的 oracle 10g 数据库。表中包含接收某种订单的员工的数据。大多数可用的列是employee、dt 和orderId（我附上了示例）。我想构建选择，它将选择在**任何**4 小时内有 6 个或更多订单的员工的记录。我使用了常规连接，各种功能，但我仍然没有做出可用的选择。我无法为过去（4 小时）的每个记录搜索选择该选项，并查看同一员工是否有 6 个订单。

任何帮助或解决方案表示赞赏。

BR,

IJ

[http://sqlfiddle.com/#!2/77418/1](http://sqlfiddle.com/#!2/77418/1)

选择的输出应该是：

乔 19.2.2013 13:28:09 36589589

乔 19.2.2013 13:50:59 36589593

马特 19.2.2013 13:57:02 36589594

乔 19.2.2013 14:19:46 36589598

本尼 19.2.2013 14:50:28 36589601

本尼 19.2.2013 14:54:58 36589602

班尼 19.2.2013 14:56:35 36589603

雷 19.2.2013 15:26:39 36589607

雷 19.2.2013 15:26:41 36589608

雷 19.2.2013 15:26:44 36589609

雷 19.2.2013 15:48:11 36589611

本尼 19.2.2013 16:48:52 36589614

班尼 19.2.2013 16:49:40 36589615

本尼 19.2.2013 16:50:38 36589616

约翰尼 19.2.2013 17:37:33 36589620

约翰尼 19.2.2013 17:51:41 36589621

乔 19.2.2013 18:16:55 36589625

约翰尼 19.2.2013 18:34:14 36589626

马特 19.2.2013 21:13:50 36589632

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:36:46.503

您可以使用以下`lag()`功能执行此操作：

```
select t.*, 
from (select t.*, lag(dt, 6) over (partition by employeeId order by dt) as ord6dt
      from t
     ) t
where dt - ord6dt < 4.0/24 
```

这只是查看当前订单之前的第 6 个订单并比较日期。仅保留时间差小于 4 小时的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:01:48.387

像这样的事情应该这样做：

```
select distinct employee
  from (select employee, dt, orderid,
               (select count(*)
                    from emp_data ed2
                   where ed2.employee = ed.employee
                     and ed2.dt >= ed.dt
                     and ed2.dt <= ed.dt + (4/24)) cnt
            from emp_data ed)
 where cnt >= 6; 
```

或者如果您不想从 09:00:00 - 13:00:00 计算，但只能计算到 12:59:59，请替换为`and ed2.dt <= ed.dt + (4/24)`。`and ed2.dt < ed.dt + (4/24)`

# javascript - 脚本不会对最近创建的元素生效

> ID：14981335
> 
> 赞同：1
> 
> 时间：2013-02-20T13:42:52.520
> 
> 标签：javascript, jquery, html, ajax

我创建了两个用于管理列表的脚本。一种用于在页面中添加*li*元素并将其保存到数据库中，另一种用于将其删除。事实是，当我创建一个*li*元素时，第二个脚本（删除一个）不会对其生效（我必须更新页面以删除它）。我怎样才能让它工作？

我留给你两个脚本：

添加：

```
function afegir() {

    var fnom=document.getElementById('compranom').value;
    var fnum=document.getElementById('quantitat').value;
        $.ajax({
            data: {
                "nom": fnom,
                "num":fnum
            },
            url:   'afegir.php',
            type:  'post',
            beforeSend: function () {
            },
            success:  function (response) {
            if(response!="-1") {
                $('.llista').append('<li value="'+fnum+'" id="'+response+'" >'+fnom+'</li>');
            }
            else{
            alert('Error');
            }
            }
        }); 
    } 
```

删除：

```
$(document).ready(function(){
$(".list li").click(function() {
var fid=$(this).attr('id');
    $.ajax({
        data: {
            "id": fid
        },
        url:   'treure.php',
        type:  'post',
        beforeSend: function () {
        },
        success:  function (response) {
        if(response=="si") {
            $("#"+fid+"").remove();
        }
        else{
        alert('Error');
        }
        }
    }); 
});

}); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:45:12.550

为此使用事件委托..

```
$(document).ready(function(){
 $(".list").on('click','li',function() {
    var fid=$(this).attr('id');
    $.ajax({
      data: {
        "id": fid
      },
      url:   'treure.php',
      type:  'post',
      beforeSend: function () {
      },
      success:  function (response) {
        if(response=="si") {
          $("#"+fid+"").remove();
        }
        else{
           alert('Error');
        }
       }
   }); 

 });
}); 
```

[链接在这里](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)阅读更多关于委托事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:23:08.763

可以使用 live() 获取新创建的元素：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

**描述：为现在和将来**匹配当前选择器的所有元素附加一个事件处理程序。

# javascript - 多选框中的上下移动选项

> ID：14981338
> 
> 赞同：1
> 
> 时间：2013-02-20T13:43:18.363
> 
> 标签：javascript

代码中存在逻辑错误..我们不能一次向上或向下移动 2 个或更多选项。一次只能向上或向下移动 1 个选项..那么如何使 2 个或更多选项向上和向下移动选择时...

```
function listbox_move(listID, direction) {
    var listbox = document.getElementById(listID);
    var selIndex = listbox.selectedIndex;

    if(-1 == selIndex) {
        alert("Please select an option to move.");
        return;
    }

    var increment = -1;
    if(direction == 'up')
        increment = -1;
    else
        increment = 1;

    if((selIndex + increment) < 0 ||
        (selIndex + increment) > (listbox.options.length-1)) {
        return;
    }

    var selValue = listbox.options[selIndex].value;
    var selText = listbox.options[selIndex].text;
    listbox.options[selIndex].value = listbox.options[selIndex + increment].value
    listbox.options[selIndex].text = listbox.options[selIndex + increment].text

    listbox.options[selIndex + increment].value = selValue;
    listbox.options[selIndex + increment].text = selText;

    listbox.selectedIndex = selIndex + increment;

} 
```

我称之为如下

```
listbox_move('countryList', 'up'); //move up the selected option
listbox_move('countryList', 'down'); //move down the selected option 
```

先感谢您.... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T05:34:50.543

我知道它很老的问题......如果它有帮助..

**编辑 ：**

[https://jsfiddle.net/m0f757wh/](https://jsfiddle.net/m0f757wh/)

```
<html>
<body>
<script language="javascript" type="text/javascript">
        function moveUp()
        {
            var ddl = document.getElementById('contentlist');
            //var size = ddl.length;
            //var index = ddl.selectedIndex;
            var selectedItems = new Array();
            var temp = {innerHTML:null, value:null};
            for(var i = 0; i < ddl.length; i++)
                if(ddl.options[i].selected)             
                    selectedItems.push(i);

            if(selectedItems.length > 0)    
                if(selectedItems[0] != 0)
                    for(var i = 0; i < selectedItems.length; i++)
                    {
                        temp.innerHTML = ddl.options[selectedItems[i]].innerHTML;
                        temp.value = ddl.options[selectedItems[i]].value;
                        ddl.options[selectedItems[i]].innerHTML = ddl.options[selectedItems[i] - 1].innerHTML;
                        ddl.options[selectedItems[i]].value = ddl.options[selectedItems[i] - 1].value;
                        ddl.options[selectedItems[i] - 1].innerHTML = temp.innerHTML; 
                        ddl.options[selectedItems[i] - 1].value = temp.value; 
                        ddl.options[selectedItems[i] - 1].selected = true;
                        ddl.options[selectedItems[i]].selected = false;
                    }
        }

        function moveDown()
        {
            var ddl = document.getElementById('contentlist');
            //var size = ddl.length;
            //var index = ddl.selectedIndex;
            var selectedItems = new Array();
            var temp = {innerHTML:null, value:null};
            for(var i = 0; i < ddl.length; i++)
                if(ddl.options[i].selected)             
                    selectedItems.push(i);

            if(selectedItems.length > 0)    
                if(selectedItems[selectedItems.length - 1] != ddl.length - 1)
                    for(var i = selectedItems.length - 1; i >= 0; i--)
                    {
                        temp.innerHTML = ddl.options[selectedItems[i]].innerHTML;
                        temp.value = ddl.options[selectedItems[i]].value;
                        ddl.options[selectedItems[i]].innerHTML = ddl.options[selectedItems[i] + 1].innerHTML;
                        ddl.options[selectedItems[i]].value = ddl.options[selectedItems[i] + 1].value;
                        ddl.options[selectedItems[i] + 1].innerHTML = temp.innerHTML; 
                        ddl.options[selectedItems[i] + 1].value = temp.value; 
                        ddl.options[selectedItems[i] + 1].selected = true;
                        ddl.options[selectedItems[i]].selected = false;
                    }
        }
</script>
<select id="contentlist" name="itemId" multiple="multiple">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>
<button id="Up" onclick="moveUp()">Up</button>
<button id="Down" onclick="moveDown()">Down</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T15:35:26.167

这是 StackAddict 的代码，进行了一些重要的修改，以确保 Text*和*Value 属性交换在一起：

```
 $("#up").bind("click", function () {
            var ddl = $("[id*=lstRight]")[0]; // <-- you may not need the [0]... I needed it
            var selectedItems = new Array();
            for (var i = 0; i < ddl.length; i++)
                if (ddl.options[i].selected)
                    selectedItems.push(i);

            if (selectedItems.length > 0)
                if (selectedItems[0] != 0)
                    for (var i = 0; i < selectedItems.length; i++) {
                        var tempText = ddl.options[selectedItems[i]].text;
                        var tempValue = ddl.options[selectedItems[i]].value;
                        ddl.options[selectedItems[i]].text = ddl.options[selectedItems[i] - 1].text;
                        ddl.options[selectedItems[i]].value = ddl.options[selectedItems[i] - 1].value;
                        ddl.options[selectedItems[i] - 1].text = tempText;
                        ddl.options[selectedItems[i] - 1].value = tempValue;
                        ddl.options[selectedItems[i] - 1].selected = true;
                        ddl.options[selectedItems[i]].selected = false;
                    }
        });

        $("#down").bind("click", function () {
            var ddl = $("[id*=lstRight]")[0]; // <-- you may not need the [0]... I needed it
            var selectedItems = new Array();
            for (var i = 0; i < ddl.length; i++)
                if(ddl.options[i].selected)             
                    selectedItems.push(i);

            if (selectedItems.length > 0)    
                if(selectedItems[selectedItems.length - 1] != ddl.length - 1)
                    for(var i = selectedItems.length - 1; i >= 0; i--)
                    {
                        var tempText = ddl.options[selectedItems[i]].text;
                        var tempValue = ddl.options[selectedItems[i]].value;
                        ddl.options[selectedItems[i]].text = ddl.options[selectedItems[i] + 1].text;
                        ddl.options[selectedItems[i]].value = ddl.options[selectedItems[i] + 1].value;
                        ddl.options[selectedItems[i] + 1].text = tempText; 
                        ddl.options[selectedItems[i] + 1].value = tempValue; 
                        ddl.options[selectedItems[i] + 1].selected = true;
                        ddl.options[selectedItems[i]].selected = false;
                    }           
        });
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:27:36.180

您需要遍历所有选项并测试选择了哪些选项并执行相同的逻辑。这是一个如何做到这一点的工作示例 - 您应该能够使用它：

```
function listbox_move(listID, direction)
{
    var listbox = document.getElementById(listID);

    for(var i=0; i<listbox.options.length; i++)
    {
        var option = listbox.options[i];
        if(option.selected == true)
        {
            var selIndex = i;

            if(-1 == selIndex) {
                alert("Please select an option to move.");
                return;
            }

            var increment = -1;
            if(direction == 'up')
                increment = -1;
            else
                increment = 1;

            if((selIndex + increment) < 0 ||
                (selIndex + increment) > (listbox.options.length-1)) {
                return;
            }
            var selValue = listbox.options[selIndex].value;
            var selText = listbox.options[selIndex].text;
            listbox.options[selIndex].value = listbox.options[selIndex + increment].value
            listbox.options[selIndex].text = listbox.options[selIndex + increment].text
            listbox.options[selIndex].selected = false;
            listbox.options[selIndex + increment].value = selValue;
            listbox.options[selIndex + increment].text = selText;
            listbox.options[selIndex + increment].selected = true;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T11:19:33.263

dave823 的回答有问题，但我无法评论，所以有我的工作解决方案：

在向上和向下移动项目的情况下，您不能使用相同的“for”循环（就像您使用的那样）。您必须为每种情况使用两个不同的循环 - 如下所示：

```
for(var i=0; i<listbox.options.length; i++)
for(var i = listbox.options.length - 1; i >= 0; i--) 
```

**这是我的（工作）解决方案，基于 dave823 的回答：**

```
function listbox_move(listBox, direction) {
    if (direction == 'up') {
        for (var i = 0; i < listBox.options.length; i++) {
            moveLbSelectedItemUpDown(lbOutput, i, -1);
        }
    }
    else if (direction == 'down') {
        for (var i = listBox.options.length - 1; i >= 0; i--) {
            moveLbSelectedItemUpDown(lbOutput, i, 1);
        }
    }
}

function moveLbSelectedItemUpDown(lb, itemIndex, increment) {
    if (-1 == itemIndex) {
        alert("Please select an option to move.");
        return;
    }
    if (lb.options[itemIndex].selected == true) {
        if ((itemIndex + increment) < 0 ||
            (itemIndex + increment) > (lb.options.length - 1)) {
            return;
        }
        var selValue = lb.options[itemIndex].value;
        var selText = lb.options[itemIndex].text;
        lb.options[itemIndex].value = lb.options[itemIndex + increment].value
        lb.options[itemIndex].text = lb.options[itemIndex + increment].text
        lb.options[itemIndex].selected = false;
        lb.options[itemIndex + increment].value = selValue;
        lb.options[itemIndex + increment].text = selText;
        lb.options[itemIndex + increment].selected = true;
    }
} 
```

# javascript - node.js 的模板引擎

> ID：14981352
> 
> 赞同：2
> 
> 时间：2013-02-20T13:43:33.847
> 
> 标签：javascript, performance, node.js

我想知道 node.js 的最佳模板引擎。目前我正在使用带有 node.js 的翡翠引擎。

读完这篇文章后产生了困惑

[https://github.com/baryshev/template-benchmark](https://github.com/baryshev/template-benchmark)

请给我最好的建议

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T15:02:33.877

没有最佳视图引擎。最佳视图引擎的标准基于模板引擎必须实现的实际需求以及使用它的人。例如，很多人真的很喜欢 Jade 视图引擎，但也有很多人认为它不好，因为他们不喜欢语法。您应该遵循的优先事项很简单：

1.  **语法**：您喜欢视图引擎为您提供的语法吗？
2.  **特点**：视图引擎是否有你想要它做的一切（例如包括、变量、过滤器）？
3.  **学习**：学习难吗？如果你有设计师，他们懂吗？工具？
4.  **社区**：是否有可以帮助解决问题的社区或可以联系的人？
5.  **性能**：视图引擎是否编译和缓存？如果不是，这*真的*重要吗？

请注意，当您在生产模式下运行节点时，大多数视图引擎会自动进入编译和缓存（NODE_ENV=production）现在您应该检查不同风格的视图引擎并根据项目的标准决定您最喜欢什么（例如Jade、Handlebars、EJS、Gaikan）。

**更新**：我查看了基准并决定将我自己的视图引擎合并到其中（Gaikan）。可以在此地址[https://github.com/Deathspike/template-benchmark](https://github.com/Deathspike/template-benchmark)看到分叉，包括结果。如果你完全是为了性能，这增加了另一个有价值的选择，但我建议坚持我上面列出的优先事项。

# asp.net-mvc - Visual Studio 发布实际上并未发布

> ID：14981359
> 
> 赞同：0
> 
> 时间：2013-02-20T13:43:47.727
> 
> 标签：asp.net-mvc, publish

我有几个 MVC3 应用程序，当我尝试发布它实际上并没有发布任何东西时，输出是：

```
2>obj\Debug\Package\PackageTmp.
2>Deleting existing files...
2>Publishing folder /...
2>
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:46:17.177

将发布模式从 RELEASE 更改为 DEBUG（反之亦然），发布，再次更改并再次发布。

# asp.net - 添加时母版页错误？

> ID：14981374
> 
> 赞同：0
> 
> 时间：2013-02-20T13:44:39.847
> 
> 标签：asp.net

我试图在新项目中添加新母版页，在添加时抛出“添加新项目”我有这个错误“ `Data at the root level is invalid. Line 1\. Position`1”请问如何解决这个问题？

我的 web.config

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

    <system.web>
        <compilation debug="false" targetFramework="4.0" />
    </system.web>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:51:57.833

好的，我可以在我的环境中重现您的错误。如果您的项目中有无效的 XML 文件，则会出现此问题。可能是web.config。

您能否确认项目中的 XML 文件格式正确？尝试使用 IE 打开 XML 文件并确保没有错误。

# mysql - 如何将O xxx开头的姓氏转换为O'Xxx，将Mc xxx开头的姓氏转换为McXxx

> ID：14981378
> 
> 赞同：0
> 
> 时间：2013-02-20T13:44:54.780
> 
> 标签：mysql, sql

我知道应该在将数据输入我的数据库之前进行此更改，但是您能否告诉我是否有办法将我的姓氏列中以 O xxx 开头的名称转换为 O'Xxx 以及以 Mc xxx 开头的名称转换为 McXxx .

提前一百万感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:55:42.960

You could use a quick solution like this:

```
UPDATE surnames
SET
  surname = CASE WHEN surname LIKE 'O %'
                 THEN CONCAT('O\'', SUBSTRING_INDEX(surname, 'O ', -1))
                 WHEN surname LIKE 'Mc %'
                 THEN CONCAT('Mc', SUBSTRING_INDEX(surname, 'Mc ', -1))
            END
WHERE
  surname LIKE 'O %' OR surname LIKE 'Mc %' 
```

See fiddle [here](http://sqlfiddle.com/#!2/d11e9/1).

# php - 将ajax值发送到php时丢失内容

> ID：14981388
> 
> 赞同：0
> 
> 时间：2013-02-20T13:45:15.763
> 
> 标签：php, jquery, mysql, ajax

我使用 ajax 向 php 发送数据，以下是发送的内容

> title=2¬e= 徽标 mynameisdonald%s 的照片 mynameisdonald 退出 论坛 车库俱乐部 商店分类系统 My-STOC 俱乐部高级 此论坛 Fiesta ST Owners Club → Fiesta ST Mk6 技术手册 → 刹车、车轮和轮胎 查看新内容 留言箱 打开留言箱popup 我们注意到您已超过 10 分钟处于非活动状态。由于您不活动，我们已停止运行 Shoutbox。如果您再次回来，请单击下面的“我回来”按钮。3 关注此论坛 Brakes, Wheels & Tires 第 1 页，共 172 页 1 2 3 下一个 » 开始新主题 将此论坛标记为已读 最近更新 开始日期 回复最多 浏览次数最多 自定义新回复 固定中心盖 由 Jim 发起，2006 年 6 月 22 日 1 2 3 13 → Hot 190 回复 5, 09 9 回复 55 查看 刹车片磨损不均匀 - JackJack JackJack 昨天，21:07 新回复 Uniroyal rainsport 2's Started by teeman，2013 年 2 月 15 日 1 2 16 条回复 116 查看 Uniroyal rainsport 2's - sme101 sme101 昨天，13 的最新帖子:06 什么中心盖适合 ST 车轮的中间。Started by Suicida1 Zombie, 2013 年 2 月 4 日 9 条回复 87 次浏览 什么中心盖适合 ST 车轮的中间。- Alec M 的最新帖子 Alec M 昨天 10:20 新回复 您更喜欢哪种合金？由 pop80_uk 发起，2011 年 7 月 30 日 1 2 18 条回复 243 次浏览 您更喜欢哪种合金？- Alec M 的最新帖子 Alec M 昨天 08:30 新回复 Spongey Breaks!?!?!? Started by Suicida1 Zombie, 07 Feb 2013 12 条回复 98 次浏览 Spongey Breaks!?!?! ? - teeman teeman 的最新帖子 2013 年 2 月 18 日 新回复 更换卡尺很难吗？由 Tommobug 发起，2013 年 2 月 17 日 2 条回复 41 次浏览 卡尺更换难吗？- Tommobug 的最新帖子 Tommobug 2013 年 2 月 17 日 New Replies Black RS2000 Wheels Started by nated84, 2013 年 2 月 17 日 1 条回复 25 次浏览 Black RS2000 Wheels - STinger STinger 的最新帖子 2013 年 2 月 17 日 New Replies 车轮螺母 Started by _Taylor, 2013 年 2 月 17 日 1 条回复10 次查看 车轮螺母 - sme101 sme101 的最新帖子 2013 年 2 月 17 日 新回复 escort cossie Wheels Started by mikeszetec，2013 年 2 月 16 日 escort cossie 车轮在 fez 上 1 条回复 29 次查看 escort cossie 轮子 - STinger STinger 的最新帖子 2013 年 2 月 16 日 新回复 I' m in need of a new ST500 BLACK Alloy 由 MonsterST 开始，2013 年 2 月 16 日 1 条回复 23 次浏览 2013 年 2 月 13 日 2 条回复 28 次查看 刹车噪音 - Kane-st Kane-st 的最后帖子 2013 年 2 月 13 日 加载更多主题 第 1 页，共 172 页 1 2 3 下一个 » 开始新主题 这个论坛由管理员领导，俱乐部员工社区论坛软件由 IP .BoardLicensed to: FiestaSTOC.com - Club Network Limited - No. 7955718 加入 Facebook 13:13 最后访问：2013 年 2 月 18 日 22:11 执行。时间：0.3303 负载：- 查询：15 次查询 Gzip：启用 GZIP &language=plain&expire=never com - Club Network Limited - 编号 7955718 在 Facebook 上添加我们 在 Twitter 上关注我们 在 Youtube 上观看我们 订阅我们的 RSS 源 RSS 源 更改主题 标记 社区 阅读 联系我们 隐私政策 帮助时间：2013 年 2 月 20 日 13:13 上次访问： 2013 年 2 月 18 日 22:11 执行。时间：0.3303 负载：- 查询：15 次查询 Gzip：启用 GZIP &language=plain&expire=never com - Club Network Limited - 编号 7955718 在 Facebook 上添加我们 在 Twitter 上关注我们 在 Youtube 上观看我们 订阅我们的 RSS 源 RSS 源 更改主题 标记 社区 阅读 联系我们 隐私政策 帮助时间：2013 年 2 月 20 日 13:13 上次访问： 2013 年 2 月 18 日 22:11 执行。时间：0.3303 负载：- 查询：15 次查询 Gzip：启用 GZIP &language=plain&expire=never

这很好，这就是我想要的。但是当查看我的 php echo 的控制台日志时，我丢失了很多数据。

**.php 文件**

```
$note       =  mysql_escape_string($_POST['note']);
echo $note; 
```

**console.log 响应**

> \n徽标\n\n mynameisdonald%s\的照片\n mynameisdonald \n \n \n 退出\n\n \n 论坛\n 车库\n 俱乐部商店\n
> 分类\n 系统\n My-STOC\ n 俱乐部\n\n高级此论坛\n\n Fiesta ST 车主俱乐部\n → Fiesta ST Mk6 技术手册\n → 刹车、车轮

正如您通过回显我的文字所看到的那样，我已经失去了很多。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:48:43.017

不要将其作为字符串发送，将其作为对象发送：

```
 dataObj = {
                    var1: "hello",
                    var2: 1
            };
$.ajax({
            type: 'POST',
            url: YOUR_SERVER_URL,
            data: dataObj,
            success: function(data) {
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:48:15.070

在 url 参数“note”中的单词 Wheels 之后，您有“&”，它定义了新的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:50:15.073

你必须转义你的字符：你的`&`字符被 POST 解释为另一个键的分隔符。

试着`encodeURIComponent(string input);`逃避那些。

例子 ：`encodeURIComponent($("input[name=foo"]").val().toString());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:01:34.440

在 jQuery 中发送表单并避免编码问题的最简单方法是使用[`serialize`](http://api.jquery.com/serialize/).

在你的ajax调用中：

```
data: $("form").serialize(), 
```

# c# - 保护 dll 不被外部应用程序使用

> ID：14981396
> 
> 赞同：0
> 
> 时间：2013-02-20T13:45:39.680
> 
> 标签：c#, dll

我有一个在我的一个项目中使用的 dll 库。我不希望其他人能够链接和访问库中的方法。有可能保护它吗？谢谢！

编辑：有没有办法“隐藏”方法名称或使它们在 dll 中随机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:21:23.613

您可以在 Sentinel Hasp 等第三方产品的帮助下保护您的库和可执行文件免遭授权使用，但这会影响您的应用程序的性能，花费您一些钱，并且不能保证没有人会破坏它。但要打破保护海盗应该努力工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:47:15.053

您可以尝试通过要求密钥来限制其使用。如果传递了错误的密钥，您的库将无法工作。

然而，这可以通过反编译您的应用程序并检查您提供的密钥并简单地使用相同的密钥来轻松规避。

另一种可能性是为每个公共类的每个公共方法添加一个检查。该检查将验证调用程序集是您的程序集之一。
根据此检查的实现，可以通过创建一个与您的同名的小型代理程序集来轻松绕过它。

一般来说：不可能阻止它。就像复制保护一样，如果对方可以访问您的程序集，那么一切都可以被规避——我指的是编译后的程序集，而不是源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:47:59.877

简短的回答是否定的。如果有人想访问您的图书馆，他们会找到方法。

但是，您可以混淆您的库以使它们变得更难，但是没有万无一失的方法可以防止它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:52:38.130

一种方法是[Friend Assemblies](http://msdn.microsoft.com/en-us/library/0tke9fxk%28v=vs.80%29.aspx) 您可以标记您的程序集`internal`，并且只有指定的程序集才能访问您的库。

但它只是禁止以“简单的方式”使用您的库。

# c# - 三个平面的交点 3D - C#

> ID：14981410
> 
> 赞同：1
> 
> 时间：2013-02-20T13:46:36.027
> 
> 标签：c#, algorithm, intersection, plane

有没有人有任何 C# 算法来找到三个平面的交点（每个平面由三个点定义：`(x1,y1,z1)`, `(x2,y2,z2)`,`(x3,y3,z3)`每个平面不同）。由等式定义的平面：`ax + by + cz + d = 0`，其中：

```
A = y1 (z2 - z3) + y2 (z3 - z1) + y3 (z1 - z2)

B = z1 (x2 - x3) + z2 (x3 - x1) + z3 (x1 - x2)

C = x1 (y2 - y3) + x2 (y3 - y1) + x3 (y1 - y2)

D = -(x1 (y2 z3 - y3 z2) + x2 (y3 z1 - y1 z3) + x3 (y1 z2 - y2 z1)) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:52:43.440

这是相当复杂的，因为在许多情况下，平面可以是平行的，或者在某些配置中它们不会在一个点相交。

但是，当他们这样做时，可以在此处找到公式：

[http://geomalgorithms.com/a05-_intersect-1.html](http://geomalgorithms.com/a05-_intersect-1.html)

我宁愿认为这对您来说还不够。但也许它会让你开始。

# android - ListActivity 中的动态操作栏

> ID：14981415
> 
> 赞同：0
> 
> 时间：2013-02-20T13:46:45.273
> 
> 标签：android, android-actionbar

我有一个使用 ArrayAdapter 填充其列表行的 ListActivity。该列表包括一个复选框，用户可以选择该复选框以进行多选。

我正在尝试实现一些东西，以便底部的操作栏根据选中的复选框数量而变化。示例：如果勾选了零个项目，则为一组按钮，如果勾选了多个项目，则为一组不同的按钮。

例子：

![图片](../Images/6ea95c587d9a6168a03e37bb2b346e6f.png) ![图片](../Images/b4274a7c32e67e1abaf3d3b03ee11c50.png)

这样做的范式是什么？我可以在我的自定义 ArrayAdapter 中放置一些代码来跟踪检查的项目数量，但我不确定这是否是标准做法。另外，我将如何动态构建操作栏？当使用 Google 当前的 GMail for android 应用程序时，看起来好像一个单独的 ActionBar 覆盖在用于检查 0 封电子邮件的操作栏之上。

# ruby-on-rails - will_paginate 查询是否执行了多次？

> ID：14981424
> 
> 赞同：4
> 
> 时间：2013-02-20T13:47:09.557
> 
> 标签：ruby-on-rails, will-paginate, rails-activerecord

假设我有一个 ActiveRecord 查询，它有 100 万条记录作为结果，我正在使用 WillPaginate（当然）对这个结果进行分页。
所以，我的疑问是：
所有这 100 万条记录都以某种方式存储在内存中，或者将再次执行 will_paginate 查询以检索越来越多的记录？

我希望我很清楚:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:00:28.443

不，它不会重复抓取所有 100 万条记录。查询看起来像这样：

```
SELECT ... FROM ... LIMIT X OFFSET Y 
```

...其中`X`是每页的最大值，`Y`是从堆栈顶部跳过的记录数，由`X * (current_page - 1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:50:56.093

Will_paginate 将运行单独的查询来填充数据，并且不会一次获取所有数据。您还可以检查分页在终端中的工作方式。假设您使用的是 rails 默认 webrick 服务器。然后在您的终端中，您将看到 will_paginate 发出的 sql 查询，如下所示：

```
Processing by InvoicesController#index as HTML

Invoice Load (0.1ms)  SELECT "invoices".* FROM "invoices" ORDER BY id DESC LIMIT 5 OFFSET 0 
```

# c# - foreach 中的 foreach 与 if else inside 将所有内容列出两次

> ID：14981429
> 
> 赞同：1
> 
> 时间：2013-02-20T13:47:30.753
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, html, foreach

我不明白我在这里错过了什么？在我看来，我的代码将每个组列出两次？

```
 <% foreach (var group in Model.AllGroups)  //53 entries here
 { %>     
   <% foreach (var groupForUser in Model.GroupsForUser) //2 entries here
      { %>    
      <% if (group.GroupId == groupForUser.GroupId) 
         { %>
           <div id="Div1" style="width:auto; height:50px; border:solid 1px black; margin:5px; **background-color:green**;" >
             <h3>&nbsp; &nbsp; <a href="javascript:OnGroupClicked(<%: groupForUser.GroupId %>)" id="changer1<%: group.GroupId %>"><%: groupForUser.Name %></a></h3> 
           </div>
            <input type="hidden" id="Hidden1" name="group<%: group.GroupId %>" value="" />
       <% }
          else %>  
       <% { %>
           <div id="group-select<%: group.GroupId %>" style="width:auto; height:50px; border:solid 1px black; margin:5px;" >
             <h3>&nbsp; &nbsp; <a href="javascript:OnGroupClicked(<%: group.GroupId %>)" id="changer<%: group.GroupId %>"><%: group.Name %></a></h3> 
           </div>
           <input type="hidden" id="group<%: group.GroupId %>" name="group<%: group.GroupId %>" value="" />
       <% } } }%> 
```

有更好的方法吗？以及为什么我认为这些组两次列出？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:00:15.810

它们被列出两次，因为您在其中有 2 个条目，`GroupsForUsers`并且您在每次迭代中输出**每个**组（因为您`else`在 inner 中的语句`foreach`）。

更好的方法是完全切断内部循环（使用 Linq），例如：

```
<% foreach (var group in Model.AllGroups)
   { %>      
     <% if (Model.GroupsForUsers.Any(g => g.GroupId == group.GroupId)
        { %>
            //make it green
     <% }
        else %>  
     <% { %>
           //make it red
   <% } }%> 
```

# javascript - 如何仅选择表格的一列复制到剪贴板，而不是相邻的列

> ID：14981431
> 
> 赞同：2
> 
> 时间：2013-02-20T13:47:30.460
> 
> 标签：javascript, jquery, dom

我想知道是否有人知道 jQuery 插件或函数可以帮助选择列文本以复制到剪贴板。

例如，我有一个 4x4 表格并将光标从单元格 R1C2 拖动到 R4C2 - 我只想选择第 2 列的 4 个单元格，而不是第 1、3 或 4 列。

在图像中，我只想要红色，没有黄色阴影单元格。

[示例表图像](http://imgur.com/y4NNvGM)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:13:50.930

这是 Firefox 中的内置行为，但在其他浏览器中是不可能的。这是因为 Firefox 是唯一允许每次选择多个范围的主要浏览器（实现为每个表格单元格一个范围）。所有其他浏览器都将选择限制在一个范围内，并将在可预见的将来继续这样做。

您可以在其他浏览器中伪造它：

*   创建自己的高亮机制
*   当表格中的列被突出显示时，动态创建一个位于屏幕外并仅包含突出显示列的副本的表格
*   使用内置的浏览器选择对象选择屏幕外表格的内容。

# android - 为什么我收到此服务错误？

> ID：14981433
> 
> 赞同：1
> 
> 时间：2013-02-20T13:47:41.810
> 
> 标签：android, service, runtime-error

为什么我在调用服务时收到此错误

```
E/ActivityManager(160): ANR in com.colo
E/ActivityManager(160): Reason: Executing service com.colo/.services.PmService
E/ActivityManager(160): Load: 8.41 / 7.12 / 6.4
E/ActivityManager(160): CPU usage from 21836ms to -1ms ago:
E/ActivityManager(160):   2.2% 160/system_server: 1.3% user + 0.9% kernel / faults: 9 minor
E/ActivityManager(160):   1.9% 65/bma_wq: 0% user + 1.9% kernel
E/ActivityManager(160):   1.4% 28646/com.colors.pipemedia: 1.2% user + 0.1% kernel / faults: 285 minor 1 major
E/ActivityManager(160):   0.5% 27859/com.google.android.apps.maps:NetworkLocationService: 0.4%  
                    user + 0% kernel / faults: 280 minor 14 major
E/ActivityManager(160):   0.3% 18292/com.android.systemui: 0.3% user + 0% kernel / faults: 48 minor
E/ActivityManager(160):   0% 61/synaptics_wq: 0% user + 0% kernel
E/ActivityManager(160):   0.1% 144/adbd: 0% user + 0.1% kernel
E/ActivityManager(160):   0.1% 246/com.android.phone: 0.1% user + 0% kernel / faults: 1 minor
E/ActivityManager(160):   0% 62/check_ic_wq: 0% user + 0% kernel
E/ActivityManager(160):   0% 72/kondemand/0: 0% user + 0% kernel
E/ActivityManager(160):   0% 28602/logcat: 0% user + 0% kernel
E/ActivityManager(160):   0% 5/events/0: 0% user + 0% kernel
E/ActivityManager(160):   0% 58/file-storage: 0% user + 0% kernel
E/ActivityManager(160):   0% 90/rild: 0% user + 0% kernel
E/ActivityManager(160):   0% 237/com.hu1.wallpaper.forest: 0% user + 0% kernel / faults: 28 minor
E/ActivityManager(160):   0% 1276/com.google.process.gapps: 0% user + 0% kernel
E/ActivityManager(160):   0% 25919/flush-138:13: 0% user + 0% kernel
E/ActivityManager(160):   0% 26459/AR6K Async: 0% user + 0% kernel
E/ActivityManager(160):   0% 26461/ksdioirqd/mmc1: 0% user + 0% kernel
E/ActivityManager(160):   0% 26467/wpa_supplicant: 0% user + 0% kernel
E/ActivityManager(160):   0% 27702/com.wssyncmldm: 0% user + 0% kernel / faults: 9 inor
E/ActivityManager(160):   0% 28103/com.android.vending: 0% user + 0% kernel / faults: 1 minor
E/ActivityManager(160): 4.1% TOTAL: 2.8% user + 1.2% kernel
E/ActivityManager(160): CPU usage from 1156ms to 1691ms later:
E/ActivityManager(160):   43% 28646/com.colors.pipemedia: 31% user + 12% kernel / ults: 729 minor 2 major
E/ActivityManager(160):     14% 28649/GC: 12% user + 1.7% kernel
E/ActivityManager(160):     8.7% 28646/olors.pipemedia: 3.5% user + 5.2% kernel
E/ActivityManager(160):     5.2% 28652/Compiler: 3.5% user + 1.7% kernel
E/ActivityManager(160):    +0% 28674/Thread-28: 0% user + 0% kernel
E/ActivityManager(160):    +0% 28675/RefQueueWorker@: 0% user + 0% kernel
E/ActivityManager(160):   10% 160/system_server: 3.5% user + 7.1% kernel / faults: 4 minor
E/ActivityManager(160):     10% 176/ActivityManager: 3.5% user + 7.1% kernel
E/ActivityManager(160):   0.6% 22/kswapd0: 0% user + 0.6% kernel
E/ActivityManager(160):   1.8% 65/bma_wq: 0% user + 1.8% kernel
E/ActivityManager(160):   0.7% 72/kondemand/0: 0% user + 0.7%  kernel
E/ActivityManager(160):   0.8% 26461/ksdioirqd/mmc1: 0% user + 0.8% kernel
E/ActivityManager(160):   1% 28602/logcat: 1% user + 0% kernel
E/ActivityManager(160): 83% TOTAL: 35% user + 20% kernel + 26% iowait
E/(160): Dumpstate > /data/log/dumpstate_app_anr 
```

我在按钮单击时调用这样的服务。

```
final Intent pm_intent = new Intent(AccountsActivity.this , PmService.class);
pm_intent.putExtra("Key", "gtalk service*****");
pm_intent.putExtra("user_name", acc.getAcc_Name());
pm_intent.putExtra("user_pass", acc.getAcc_Pass());             
Thread t = new Thread(){
public void run(){
    startService(pm_intent);
    }
};
t.start(); 
```

我在按钮单击时停止这样的服务

```
final Intent gtalk_intent = new Intent(getActivity() , GtalkService.class);
Thread t = new Thread(){
    public void run(){
        getActivity().stopService(gtalk_intent);
    }
};
t.start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:51:29.517

你得到一个 ANR，所以你在你的 UI 线程上做一些处理器密集型的工作。

我看到你正在推出`Service`一个新的`Thread`. 虽然这看起来像是`Service`会从一个新的开始`Thread`，但实际上并非如此。如果要在新的 Thread 中运行服务的内容，则必须在 Service 中创建新的 Thread，在`onStartCommnand()`或中`onCreate()`。尝试这样做。

# jetty - 如何停止码头

> ID：14981435
> 
> 赞同：17
> 
> 时间：2013-02-20T13:47:45.253
> 
> 标签：jetty

我是 Jetty 和客户端/服务器架构的新手。

我设法在 Eclipse 中编写了一个码头服务器，它可以工作。

但是我怎样才能停止码头服务器呢？我听说过 stop.jar 和 start.jar。我在哪里可以找到它？它是否集成在 jetty-all-jar 中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T13:56:40.133

各种`jetty-all.jar`工件可用于嵌入式码头使用。如果你决定使用这个 jar，你必须管理你自己的启动/关闭。

***更新：2015 年****：从 Jetty 9 开始，`jetty-all.jar`不推荐使用 as 依赖项。这是因为从 Jetty 9 开始，现在不可能在单个聚合 jar 中满足“所有”Jetty。Jetty 的某些组件不能包含在内，因为它们会导致此聚合 jar 出现问题。Jetty 的未来，支持 HTTP/2，也使这个聚合 jar 作为依赖项变得不那么有用。*

**典型的嵌入式模式使用**

启动服务器的线程：

```
Server server = new Server();
// various server configuration lines
// ...

// Start server (on current thread)
server.start();

// Have current thread wait till server is done running
server.join(); 
```

告诉服务器关闭的另一个线程

```
// Have server stop running
server.stop(); 
```

此时原线程的等待`server.join();`已完成，该线程继续运行。

**标准分布使用**

如果您使用可从[download.eclipse.org/jetty/](http://download.eclipse.org/jetty/)获得的标准发行版`start.jar`，则可以使用该发行版来启动/停止 jetty 本身。

一旦你解压了你的 jetty-distribution，你会`start.jar`在最顶层的目录中找到一个。这可以用作以下内容。

启动码头的过程：

```
$ java -jar start.jar STOP.PORT=28282 STOP.KEY=secret 
```

停止码头的过程：

```
$ java -jar start.jar STOP.PORT=28282 STOP.KEY=secret --stop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-20T14:21:31.280

如果 jetty 作为 maven 插件，您可以通过按`Ctrl`+来停止服务器，`C`然后按`Y`确认终止。

# itextsharp - iTextSharp 修剪前导空格并导致列未对齐

> ID：14981437
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:47:46.527
> 
> 标签：itextsharp

从 iTextSharp 的 4.1.2 => 5.1.3 版本迁移时，我遇到了从文本生成 PDF 时发生的错误。问题是当一行的第一个字符有前导空格时，该前导空格会被截断。这是右对齐列的问题。

示例：（破折号=空格）

*输入*：

> ------标题
> --------------1
> --------------2
> 0123456789

*输出*：

> -----标题
> -------------1
> -------------2
> **0123456789** ~~~注意对齐不正确，因为该列没有前导空格！

有问题的代码已缩小到文件“iTextSharp/text/pdf/PdfChunck.cs”方法“TrimFirstSpace”。在流出字节时，从 PdfDocument 类调用此方法。问题是没有关于这个方法试图完成什么的代码注释。

我应该改变什么才能使这项工作正确？似乎在这里注释掉 ELSE 条件应该可以解决这个问题。

```
public float TrimFirstSpace()
{
    BaseFont ft = font.Font;
    if (ft.FontType == BaseFont.FONT_TYPE_CJK && ft.GetUnicodeEquivalent(' ') != ' ')
    {
            if (value.Length > 1 && value.StartsWith("\u0001"))
            {
                value = value.Substring(1);
                return font.Width('\u0001');
            }
        }
        else
        {
            if (value.Length > 1 && value.StartsWith(" "))
            {
                value = value.Substring(1);
                return font.Width(' ');
            }
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:47:57.723

较新的代码更改解决了该问题。if 语句很重要。

**老的**

```
chunk = overflow;
chunk.TrimFirstSpace(); 
```

**新的**

```
bool newlineSplit = chunk.IsNewlineSplit();
chunk = overflow;
if (!newlineSplit)
    chunk.TrimFirstSpace(); 
```

[http://sourceforge.net/p/itextsharp/code/518/tree/trunk/src/core/iTextSharp/text/pdf/PdfDocument.cs#l415](http://sourceforge.net/p/itextsharp/code/518/tree/trunk/src/core/iTextSharp/text/pdf/PdfDocument.cs#l415)

# c++ - 错误：未在此范围内声明“小时”

> ID：14981443
> 
> 赞同：0
> 
> 时间：2013-02-20T13:48:02.440
> 
> 标签：c++, class, cmake

我用 C++ 写了一段代码。我尝试在 Kdevelop 中使用 CMake。

对于我的头文件 Newtime.h

```
class NewTime
{
public:
  NewTime(int = 0, int = 0, int = 0);    //constructor
  void setTime(int, int, int);    // set time
  void dispTime();    //print time
private:
  int hour;
  int minute;
  int second;
}; 
```

对于 NewTime.cpp，我在下面写道：

```
#include <iostream>
#include <stdio.h>
#include "NewTime.h"
//
NewTime::NewTime(int hr, int min, int sec)  
{
  setTime(hr, min, sec);
}
//
void NewTime::setTime(int h, int m, int s)
{
  hour = ((h >= 0 && h < 24) ? h : 0);
  minute = ((m >= 0 && m < 60) ? m : 0);
  second = ((s >= 0 && s < 60) ? s : 0);
}
//***
void Newtime::dispTime()
{
  std::cout << ((hour == 0 || hour == 12) ? 12 : hour % 12)
       << " : " << (minute < 10 ? "0" : "") << minute
       << " : " << (second < 10 ? "0" : "") << second
       << (hour < 12 ? " AM" : " PM") << std::endl;
} 
```

主体是：

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <iostream>
#include "NewTime.h"

int main()
{
  NewTime t1, //use default arguments
          t2(2), //only hour defined
          t3(21, 34), //second as default
          t4(12, 25, 42), //everything is defined
          t5(53, 343, 234); //invalid hour
  std::cout << "constructed with: " << std::endl;
  std::cout << "use default arguments: " << std::endl;
  t1.dispTime();
  std::cout << "only hour: " << std::endl;
  t2.dispTime();
  std::cout << "hour and minute: " << std::endl;
  t3.dispTime();
  std::cout << "all defined: " << std::endl;
  t4.dispTime();
  std::cout << "invalid values: " << std::endl;
  t5.dispTime();
  std::cin.get();
  return 0;
} 
```

但我得到了这个错误：

```
compiling NewTime.cpp (c++)
/home/hasadi/Desktop/tmp/C++/4-6-class-newtimer/newtimer/NewTime.cpp:17: error: ‘Newtime’ has not been declared
/home/hasadi/Desktop/tmp/C++/4-6-class-newtimer/newtimer/NewTime.cpp: In function ‘void dispTime()’:
/home/hasadi/Desktop/tmp/C++/4-6-class-newtimer/newtimer/NewTime.cpp:19: error: ‘hour’ was not declared in this scope
/home/hasadi/Desktop/tmp/C++/4-6-class-newtimer/newtimer/NewTime.cpp:20: error: ‘minute’ was not declared in this scope
/home/hasadi/Desktop/tmp/C++/4-6-class-newtimer/newtimer/NewTime.cpp:21: error: ‘second’ was not declared in this scope 
```

任何的想法？我很困惑..

提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T13:50:25.807

你有一个错字，编译器抛出的第一个错误告诉你：

```
[…]/NewTime.cpp:17: error: ‘Newtime’ has not been declared 
```

您必须`Newtime`将 dispTime 实现更改为`NewTime`它会构建。现在，编译器不知道 dispTime 实现与`NewTime`-class 相关联。

通常，如果您`'varname' was not declared in this scope`进入方法实现，通常是缺少或拼写错误或错误的类/结构类型名称。

正如 John Zwinck 在评论中所建议的那样，通常**第一个错误是最相关的**。您可能只需查看第一个错误就可以自己解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:52:17.830

仔细看你的拼写！

```
void Newtime::dispTime()
{
std::cout << ((hour == 0 || hour == 12) ? 12 : hour % 12)
     << " : " << (minute < 10 ? "0" : "") << minute
     << " : " << (second < 10 ? "0" : "") << second
     << (hour < 12 ? " AM" : " PM") << std::endl;
} 
```

你用小写的 T 拼写它！

# node.js - 在 AppFog 上运行 node.js？

> ID：14981450
> 
> 赞同：0
> 
> 时间：2013-02-20T13:48:13.017
> 
> 标签：node.js, appfog

我将文件上传到 AppFog 并访问了我刚刚创建的站点。
但似乎该站点仅加载 index.html。

我的 node.js 文件名为 server.js，也许我应该将它命名为其他名称？
帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:02:34.797

您是否尝试过按照 AppFog[官方文档](https://docs.appfog.com/languages/node)来启动和运行 Node？

# blackberry - Blackberry - Horizo ntalFieldManager 中的多个进度条

> ID：14981451
> 
> 赞同：0
> 
> 时间：2013-02-20T13:48:13.187
> 
> 标签：blackberry, blackberry-jde

我试图在水平字段管理器中获得两个具有不同标签的进度条，但只显示一个。我可以更新它并更改进度，但看不到第二个。

```
 // Internal Storage Label and Progress Bar
    ProgressIndicatorView isView = new ProgressIndicatorView(0);
    ProgressIndicatorController isController = new ProgressIndicatorController();  

    _isProgressBar = new ProgressIndicatorModel(0, 100, 0);      
    _isProgressBar.setController(isController);     

    isView.setModel(_isProgressBar);
    isView.setController(isController);        
    isController.setModel(_isProgressBar);
    isController.setView(isView);        
    isView.setLabel("Internal Storage");
    isView.createProgressBar(Field.FIELD_HCENTER);       

    // SDCard Storage Label and Progress Bar
    ProgressIndicatorView sdView = new ProgressIndicatorView(0);
    ProgressIndicatorController sdController = new ProgressIndicatorController();        

    _sdProgressBar = new ProgressIndicatorModel(0, 100, 0);
    _sdProgressBar.setController(sdController);      

    sdView.setModel(_sdProgressBar);
    sdView.setController(sdController);        
    sdController.setModel(_sdProgressBar);
    sdController.setView(sdView);        
    sdView.setLabel("SDCard Storage");
    sdView.createProgressBar(Field.FIELD_HCENTER);       

    //Add everything to the view 
    //Add the manager to the screen.
    add(horizontalFieldManager);

    //Add the fields to the manager.
    horizontalFieldManager.add(isView);
    horizontalFieldManager.add(new SeparatorField());    
    horizontalFieldManager.add(sdView); 
```

# ajax - Drupal Form API：在提交时使用 AJAX 再次显示相同的表单，但具有不同的值

> ID：14981457
> 
> 赞同：2
> 
> 时间：2013-02-20T13:48:25.107
> 
> 标签：ajax, drupal, drupal-fapi

这是我在 Stackoverflow 上的第一篇文章，在阅读了数百个深思熟虑的问题和同样有用的答案之后。

我的观点是，今天，我从来没有找到一种（甚至是肮脏的）方法来做我打算做的事情，也从来没有设法找到答案，尽管似乎不太可能没有人有同样的要求和/或问题。

也就是说，顺便说一句...

## 再次使用 AJAX 调用相同的表单，但使用的值与用户之前输入的值不同

### 这个想法

我有一个带有文本字段和 AJAX 化提交按钮的 Drupal 表单（使用 Drupal 表单 API 构建的普通表单）。此表单通过 AJAX 调用显示，并且本身是 AJAX 化的，因此。

当我点击“提交”时，我想做一些事情，比如根据用户在表单中输入的内容来查看数据库、更新一些值等。然后，*我想再次显示相同的表单，但其值与用户在表单的第一个实例中输入的值不同*。

在处理过程中做任何我想做的一切都很好，但无论我做什么，无论如何，我一次又一次地面临同样的问题：

### 问题

当显示表单的新实例时，它会显示以前的值（用户输入的值）。当在表单的前一个实例中单击“提交”时，我永远无法在表单中显示其他值。

## 简单的例子

我实际上想要做的是非常复杂的，有几个 ajax_commands 和一些处理，但这里有一个更简单的例子，它面临着完全相同的问题：

```
function ajax_first_callback_to_my_form($type = 'ajax') {
// here the first instance of the form is ajax-called. No problem with that.

    $mail = 'example@mail.com';
    $first_message = 'Please enter an email address...';

    $commands = array();
    $commands[] = ajax_command_replace('#my_ajax_wrapper', display_my_form($mail, $first_message));
    $page = array('#type' => 'ajax', '#commands' => $commands);
    return($page);

}

function display_my_form($mail, $message) {
// the function used to display the form.
// it can be called by the first ajax callback (the previous function in this example)
// or by the ajax callback triggered by clicking 'submit' on the form itself.

    $form = drupal_get_form('my_form', $mail, $message);

    $display = '<div id="my_ajax_wrapper">';
    $display .= render($form);
    $display .= '</div>';

    return $display;

}

function my_form($form, &$form_state, $mail, $message) {
// the form constructor

    $form = array (
        'email' => array (
            '#type' => 'textfield',
            '#default_value' => $mail,
            '#suffix' => '<div id="my_message">'.$message.'</div>',
        ),
        'submit' => array (
            '#type' => 'submit',
            '#ajax' => array (
                'callback' => 'my_ajax_callback', ),
        ),
    );

}

function my_ajax_callback($form, &$form_state) {
// triggered by clicking 'submit' in the form    

    $mail = $form_state['values']['email'];

    if ($mail == 'correct_mail@gmail.com') {
        $new_mail = 'different_mail@gmail.com';
        $new_message = 'You entered a correct email and here is your new one';
    } else {
        $new_mail = $mail;
        $new_message = 'You entered an incorrect mail, please correct it';
    }

    $commands = array();
    $commands[] = ajax_command_replace('#my_ajax_wrapper', display_my_form($new_mail, $new_message));
    $page = array('#type' => 'ajax', '#commands' => $commands);
    return($page);

}

function my_form_submit($form, &form_state) {
// my_form submit handler

    $form_state['rebuild'] = true; // appears necessary, otherwise won't work at all

} 
```

好的，这是一段相当长的代码，但完全理解我的问题似乎很有用。

### 处理事情正确发生......

我想在 my_form_submit 或 my_ajax_callback 中做的所有事情都已正确完成。如果我检查 display_my_form() 中的变量，它们会正确更新。

### ...但是表单的新实例没有考虑到它

但是无论我可以尝试什么，下次使用 AJAX 显示表单时，电子邮件字段将是“example@mail.com”作为其默认值（或用户输入的任何不同的邮件），并且消息 div 将被填充与“请输入电子邮件地址...”。

我尝试了许多不同的方法，将提交后处理放在 ajax 回调中，在 my_form_submit 函数中，使用 $_SESSION 变量而不是通过不同的函数传递它们，使用数据库......这些都不起作用。

### 该怎么办 ？

很烦人。这不是我第一次遇到这个问题。上次我可以找到一种解决方法，只需放弃通过 AJAX 重新显示相同表单的想法，但现在我真的很感激能够做到这一点。

问题可能与 $form_state['rebuild'] 有关吗？

顺便说一句，我很好奇：你以前遇到过这个问题吗？我错过了一些简单的事情吗？如果它是一个错误，这个错误可能是 Drupal 相关的，还是 AJAX 相关的......？

任何帮助或想法将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:36:22.427

我想出了一个解决方案：

如果您要使用 AJAX 再次显示相同的表单，例如使用此函数（由您的 AJAX 回调调用），无论您将做什么，它都会一次又一次地显示相同的值：

```
// It doesn't work :

function display_my_form($mail, $message) {  

    $form = drupal_get_form('my_form', $mail, $message);

    $display = '<div id="my_ajax_wrapper">';
    $display .= render($form);
    $display .= '</div>';

    return $display;
} 
```

**如果要在刷新表单时更改字段值**，则必须在再次调用表单后手动更新表单，方法是添加以下行：

```
// It works :

function display_my_form($mail, $message) {

    $form = drupal_get_form('my_form', $mail, $message); // $variables are simply ignored if the form is already displayed. Rebuilding it won't change a thing.

    $form['email']['#default_value'] = $mail; // update a part of the form
    $form['email']['#suffix'] = $message; // update another part of the form

    $display = '<div id="my_ajax_wrapper">';
    $display .= render($form);
    $display .= '</div>';

    return $display; // sends $display to our AJAX callback, and everything's fine now

} 
```

与人们（例如......我）首先可以了解它的简单信念相反，当已经由 AJAX 构造和调用时，表单不考虑使用 drupal_get_form 发送的变量。

仅仅更新变量是不够的，然后再做一次 drupal_get_form 。您必须执行 drupal_get_form，然后手动更新要更新的表单部分。

希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T10:13:10.920

好吧，如果是这种情况，我对您的问题很有信心：

$commands[] = ajax_command_replace('#my_ajax_wrapper', display_my_form($new_mail, $new_message));

问题不在于其他任何东西，它只是您传递的 id。您需要一个类而不是 id“#my_ajax_wrapper”，因为 id 可能会改变，但在这种情况下类不会。试试这个，你应该得到你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T13:36:29.687

注意：要使其工作，需要在 form_submit 处理程序中添加：

```
function my_form_submit($form, &$form_state)
{
    $form_state['rebuild'] = true;
} 
```

# c# - 在 ASP.NET 中存储大量数据

> ID：14981458
> 
> 赞同：1
> 
> 时间：2013-02-20T13:48:26.147
> 
> 标签：c#, asp.net, sql-server, umbraco

我在 ASP.NET (Umbraco CMS) 中建立了一个网站，它有一个竞赛模块。该公司每月举办大约两场比赛，每场比赛平均有约 15.000 名参赛者。这些参赛者存储在一个设计如下的数据库表中：

**选手**

```
Id
Name
ZipCity
Address
Country
Email
DateAttended 
```

**拉链城**

```
Id
Zipcode
City 
```

**竞赛答案**

```
Id
AnswerNodeId (Umbraco node id)
ContestNodeId (Umbraco node id)
ContestantId
Date 
```

每场比赛可以有一个问题和`N`多个答案选项。

我创建它以保存数据库中的记录数的方式是，对于每一个答案，我都会检查表中是否已经存在具有给定电子邮件的参赛者`Contestant`。如果有，我使用那个，如果没有，我创建一个新的参赛者。此外，对于每位参赛者，我都会检查所提供的邮政编码是否已经在`ZipCity`表格中并创建对其的引用。

即使我这样做了，而不是盲目地`Contestant`为每场比赛创建一个新的，数据库仍然被填满:-(我现在已经增加了两次容量，但一段时间后仍然得到同样的异常：

> 无法为对象...分配空间，因为文件组已满。

该公司希望为他们发起的每场比赛保留参赛者，因此在比赛结束后删除记录似乎不是一种选择：-/

所以，现在我一直想知道是否有更聪明的方法来存储这些大量数据？对此有什么想法？

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:33:54.740

我们对您的硬盘设置了解不多。

[http://blog.sqlauthority.com/2009/05/31/sql-server-create-multiple-filegroup-for-single-database/](http://blog.sqlauthority.com/2009/05/31/sql-server-create-multiple-filegroup-for-single-database/)

[http://msdn.microsoft.com/en-us/library/bb522469.aspx](http://msdn.microsoft.com/en-us/library/bb522469.aspx)

第一个链接将解释这个概念。

第二个链接将显示语法。

您要查看的 3 个项目是：

```
[ , SIZE = size [ KB | MB | GB | TB ] ] 
[ , MAXSIZE = { max_size [ KB | MB | GB | TB ] | UNLIMITED } ] 
[ , FILEGROWTH = growth_increment [ KB | MB | GB | TB| % ] ] 
```

为什么？

第一个是初始大小。第二个是最大尺寸。如果设置了此项，即使您的硬盘驱动器上可能有空间，数据库也将停止增长。第三个是“如果我没有违反 maxsize 规则，我将扩展多大”。

现在。您可以将 MAXSIZE 设置为 UNLIMITED。

然而。当您的硬盘驱动器装满时，您将开始出现错误。

所以你必须玩 dba，然后选择最好的选项。
就个人而言，我会将 MAXSIZE 设置为小于驱动器上的可用空间，这样您就不会达到边缘点。

ALSO：您可以创建不同的文件组，并将不同的不同表放在不同的文件组上。如果您知道一张桌子很大，而另一张桌子很小，这很方便。

所以...检查您是否已经设置了 MAXSIZE 设置。

然后你必须用你的桌子、硬盘、文件组和桌子玩轮盘赌。

您还可以将日志文件放在不同的硬盘驱动器上，作为解决空间问题的另一种选择。

这是创建文件组，然后将表移动到该新文件组的一个很好的小示例。

[http://www.daveturpin.com/2010/09/move-tables-to-new-filegroup/](http://www.daveturpin.com/2010/09/move-tables-to-new-filegroup/)

下面是我使用 SQLCMD 模式创建数据库的脚本。请注意，目录必须“预先存在”（如果您实际上并未坐在 sql 服务器上，则在服务器上，而不是您的本地计算机上）。

```
:Setvar DBName MyFirstDatabase01
:Setvar DataFilesBaseDirectory "C:\WUTemp\Some Folder\"
:Setvar LogFilesBaseDirectory "C:\WUTemp\Some Folder\"
:Setvar DatabasePrimaryDataFileStartSizeMB 9
:Setvar DatabasePrimaryDataFileGrowthMB 8
:Setvar DatabasePrimaryLogFileStartSizeMB 7
:Setvar DatabasePrimaryLogFileGrowthMB 6

Use [master];
GO

if exists (select * from sysdatabases where name='$(DBName)')
BEGIN
        DROP DATABASE [$(DBName)];
END

GO

--Create Database $(DBName)
--G--O

DECLARE @device_directory_data NVARCHAR(520)
DECLARE @device_directory_log NVARCHAR(520)
--SELECT @device_directory_data = SUBSTRING(filename, 1, CHARINDEX(N'master.mdf', LOWER(filename)) - 1) FROM master.dbo.sysaltfiles WHERE dbid = 1 AND fileid = 1
--SELECT @device_directory_log = SUBSTRING(filename, 1, CHARINDEX(N'master.mdf', LOWER(filename)) - 1) FROM master.dbo.sysaltfiles WHERE dbid = 1 AND fileid = 1

select @device_directory_data = '$(DataFilesBaseDirectory)'
select @device_directory_log = '$(LogFilesBaseDirectory)'

print  @device_directory_data
print @device_directory_log

EXECUTE (N'CREATE DATABASE $(DBName)
  ON PRIMARY (NAME = N''$(DBName)'', FILENAME = N''' + @device_directory_data + N'$(DBName).mdf'', SIZE = $(DatabasePrimaryDataFileStartSizeMB) MB, FILEGROWTH = $(DatabasePrimaryDataFileGrowthMB)MB)
  LOG ON (NAME = N''$(DBName)_log'',  FILENAME = N''' + @device_directory_log + N'$(DBName).ldf'', SIZE = $(DatabasePrimaryLogFileStartSizeMB) MB, FILEGROWTH = $(DatabasePrimaryLogFileGrowthMB)MB)')

DECLARE @logsize char(1)
SELECT @logsize = CASE WHEN convert(varchar, Serverproperty('ProductVersion')) LIKE '9%'
                       --THEN '10'
                       --ELSE '5'
                       THEN '13'
                       ELSE '14'

                  END

EXECUTE(N'ALTER DATABASE $(DBName)
    ADD LOG FILE (NAME = N''$(DBName)_log2'',
                  FILENAME = N''' + @device_directory_log + N'$(DBName)log2.ldf'', SIZE = ' + @logsize + ' MB)')

-- Make the database case sensitive to clean up the development effort
--  EXECUTE(N'ALTER DATABASE $(DBName) COLLATE SQL_Latin1_General_CP1_CS_AS')  

exec sp_dboption '$(DBName)','trunc. log on chkpt.','true'
exec sp_dboption '$(DBName)','select into/bulkcopy','true'
GO

GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:57:45.187

在减少会导致数据需求下降的空间方面，您无能为力。此外，每月 15k 并不算多，除非您使用一些具有严重限制的共享 sql 主机。无论如何，不​​幸的是，您在这里无能为力。

也许您可以尝试启用 sql server 压缩。查看这些文章了解更多详情

[http://www.bradmcgehee.com/2010/03/an-introduction-to-data-compression-in-sql-server-2008/](http://www.bradmcgehee.com/2010/03/an-introduction-to-data-compression-in-sql-server-2008/)

[http://msdn.microsoft.com/en-us/library/cc280449.aspx](http://msdn.microsoft.com/en-us/library/cc280449.aspx)

# java - DoS 攻击是开发人员还是系统管理员的问题

> ID：14981459
> 
> 赞同：5
> 
> 时间：2013-02-20T13:48:29.677
> 
> 标签：java, security

作为一名 Java 开发人员，我将参与一个 Web 项目。所以我试图了解网络安全的不同方面。

现在我来到了 DoS 攻击主题，我试图弄清楚作为 Java 开发人员我可以/应该做什么。或者可能是系统管理员的工作。

我首先想到的是以某种方式实现功能，这样单个请求就不会占用太多时间和资源。例如，对处理的数据量进行一些限制。但我不确定这是否适用于所有情况。

由于许多请求，我应该注意 DoS 吗？

任何建议将不胜感激。提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:18:40.230

首先，你们谁都无法阻止 DoS 攻击。

您所能做的就是使您的代码合理（Developer），并使您的架构健壮（SysAdmin）。这是一项共同努力。

作为他们工作的一部分，开发人员应该尽量减少资源使用——不仅仅是针对 DoS 攻击。

开发人员应该使用缓存来保护数据库。如果每个请求都需要查阅国家/地区列表，那么每次都从数据库中请求该列表并不是一个好习惯。

开发人员应确保错误请求尽快失败。例如。在您确认他们的帐号确实存在之前，请不要查阅国家/地区列表。

开发人员应该采用类似 REST 的方法：单独处理每个请求，而不是在内存中维护 Session。这可以阻止您的内存使用量在攻击期间猛增。您不希望内存问题以及您的网络被淹没！

开发人员应该使他们的应用程序可扩展。同样，REST 在这里有所帮助，因为您不必将事物存储在内存中。如果您可以一次运行 10 个应用程序实例，每个实例处理请求的子集，那么您将在 DoS 攻击中持续更长时间（并且可能会给您的用户带来更流畅的网站体验）。

系统管理员应该提供负载平衡、故障转移等框架来管理这种可伸缩性。他们还将管理实例的硬件。您还可以选择按需自动添加更多实例，这意味着自动创建和部署服务器变得很重要。使用虚拟机而不是物理盒子可以帮助解决这个问题。

系统管理员可以设置防火墙和代理，这样当攻击发生时，他们可以保持您的真实流量通过并阻止攻击流量。他们可以通过可疑的 IP 范围过滤流量、阻止“可疑”请求、将流量级别限制为温和的流量等。

总体而言，您可以将 DoS 视为“大量流量”。如果您的应用程序代码和架构无法应对来自“普通用户”的日益增长的流量，那么无论 DoS 攻击如何，您都注定要失败。当 Facebook 受到 DoS 威胁时，我记得有人指出“每天都是 Facebook 的 DDoS 攻击......”。但它的开发和结构使其能够应对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:05:30.163

DoS 攻击通常是 IT 关注的问题。如果您正在开发 Web 应用程序，通常它位于将请求转发到您的应用程序容器（Tomcat、Rails 等）的前端控制器（apache、nginx 等）后面。前端控制器通常/总是有逻辑来处理这个问题

如果您是应用程序开发人员，请专注于 XSS 攻击 ( [http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting) )，因为这完全在应用程序开发人员的职责范围内

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:06:06.613

我想说这主要是系统管理员关心的问题，但这并不意味着开发人员不应该采取措施来避免它。

由于 DoS 攻击通常是让您的系统因请求而陷入瘫痪，因此它无法处理真正的请求（拒绝服务），[维基百科](http://en.wikipedia.org/wiki/Denial-of-service_attack#Prevention_and_response)对 DoS 预防有这样的说法：

> 防御拒绝服务攻击通常涉及使用攻击检测、流量分类和响应工具的组合，旨在阻止他们认为是非法的流量并允许他们认为是合法的流量。

在我看来，这些是系统管理员任务，因为他们应该配置防火墙、路由器、交换机等。

# ios - 在 iphone 应用程序中放置徽章

> ID：14981467
> 
> 赞同：0
> 
> 时间：2013-02-20T13:48:59.290
> 
> 标签：ios, user-experience

我的 iphone 应用程序中有一个特殊情况，我必须在可点击的 UI 元素上而不是在选项卡栏中显示徽章……这可以接受吗？我阅读了iOS指南，它说标签栏可以显示一个徽章（红色椭圆形），但他们没有提到任何一点说明它应该专门放置在那里（标签栏）

如果这是一个糟糕的用户体验实践，我是否应该设计一个看起来像徽章的自定义图标并在我的特定情况下使用它？

提前致谢。

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:52:17.270

这并不少见，绝对不是一个坏习惯。徽章不仅仅用于导航事件（在标签栏中）。

如果指南没有禁止某些事情，那么它是允许的。

但是，请确保应用程序仍然遵循基本的 iOS 设计，并且如果标准解决方案也是可能的，您不会以某种非标准方式实现它。

例如，查看 iOS 邮件应用程序。这是一个拆分视图，其中主控制器中的每个邮箱都有一个带有未读消息的编号。嗯，这基本上是一个徽章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:51:27.380

如果他们说徽章可以在 tabBar 中显示，这并不意味着它不能在其他地方显示。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T13:54:59.083

You can't do that, I recommend you to use this customBadges: [http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en](http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en)

# jsf - 使用 primefaces 在 IE8 上渲染大数据

> ID：14981473
> 
> 赞同：0
> 
> 时间：2013-02-20T13:49:15.823
> 
> 标签：jsf, primefaces, datatable, internet-explorer-8

在我的网页中，有一个可编辑的数据表，其中包含大约 100 行，每行 30 列。我使用 JSF 作为我的带有 primefaces 数据表的框架。在最新的浏览器中它可以工作，但对于低端机器（P4 2GB RAM）上的 IE8，它非常慢。您能否建议一些方法，以便快速加载页面。

一些限制（真的很愚蠢的限制，但我很无奈：（

1.  我无法升级我的机器

2.  我无法升级我的浏览器或使用其他浏览器

3.  我不能使用分页或实时滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:20:32.687

也许您可以在数据库上使用分页。它可能对最终用户是透明的，并且可能会提高您的应用程序性能。

# javascript - 使用 jQuery click 进行不受控制的多表单提交

> ID：14981474
> 
> 赞同：0
> 
> 时间：2013-02-20T13:49:17.003
> 
> 标签：javascript, jquery, forms, click

用户有一些列表（确切的列表，但不是重点）。用户可以添加以列出其他一些独特的元素 - 字符串。允许提交新元素的表单被隐藏。要添加新的用户，请按“显示添加水果表单”按钮，表单出现，获取字符串，如果字符串唯一，则将其推送到字符串，如果不是 - 警报消息。

问题是：

*   首先添加所有工作正常。
*   在第二个和下一个添加如果：
*   *   字符串唯一 - 字符串推送到数组*并*警告有关字符串不唯一的消息
*   *   字符串不唯一 - 关于字符串不唯一的多个一一警报消息

html:

```
<div id="plus_tab">Show Add Fruit Form</div>

<div id="div_form" class="hidden">
    <form id="my_form" >
        <input type="text" name="value1"/>
        <input type="submit" value="Add fruit"/>
    </form>
</div>

<div id="result">
    result
</div> 
```

js：

```
var fruits = ['apple', 'strawberries']

$('#plus_tab').click(function(){
    $("#div_form").removeClass('hidden').addClass('visible')
    $("#my_form").submit(function(event){
        event.preventDefault()
        new_fruit  = $(this).find('input[name="value1"]').val()
        if ($.inArray(new_fruit, fruits)==-1 ){
            fruits.push(new_fruit);
            $('#result').empty().append(fruits);
            $("#div_form").removeClass('visible').addClass('hidden');
        }else {
            alert('Name '+new_fruit+' exist, choose other')
        }
    })
}) 
```

CSS：

```
.hidden {
    display: none;
}
.visible {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:50:51.233

使用您的代码，您将在`submit`每次单击时添加一个额外的处理程序`#plus_tab`

`submit`处理程序应该只绑定一次：

```
$("#my_form").submit(function(event){
    event.preventDefault()
    new_fruit  = $(this).find('input[name="value1"]').val()
    if ($.inArray(new_fruit, fruits)==-1 ){
        fruits.push(new_fruit);
        $('#result').empty().append(fruits);
        $("#div_form").removeClass('visible').addClass('hidden');
    }else {
        alert('Name '+new_fruit+' exist, choose other')
    }
})

$('#plus_tab').click(function(){
    $("#div_form").removeClass('hidden').addClass('visible');
}) 
```

# servlets - java.net.NoRouteToHostException：没有到主机的路由：连接

ID：14981477

赞同：0

时间：2013-02-20T13:49:27.253

标签：servlets, struts

# javascript - 扩展正则表达式以触发更多字符

> ID：14981480
> 
> 赞同：0
> 
> 时间：2013-02-20T13:49:48.693
> 
> 标签：javascript, regex

我在 JavaScript 中有一个正则表达式：

```
new RegExp('(?:^|\\b|\\s)' + this.options.token + '([\\w.]*)$'); 
```

问题是这只会在ae、AE、空间等上触发，而不是“.”、“[”、“/”等。如何扩展此正则表达式以包含这些字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:51:24.853

您只需要添加它们：

```
new RegExp('(?:^|\\b|\\s|\\.|\\[|\\/)' + this.options.token + '([\\w.]*)$'); 
```

等等...

这分解为：

```
<start of line> or <word boundary> or <whitespace> or . or [ or / 
```

哪个应该有希望做你想要的。

# mysqli - mysqli 中的结果绑定

> ID：14981481
> 
> 赞同：0
> 
> 时间：2013-02-20T13:49:58.063
> 
> 标签：mysqli

在下面的示例中，当我从表中选择所有字段时，任何人都可以告诉我如何编写绑定部分

```
$stmt = $mysqli_conn->stmt_init();
if ($stmt->prepare("SELECT * FROM books")) {
    $stmt->execute();
$stmt->bind_result( **WHAT DO I PUT HERE** );

    $stmt->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:55:13.670

在`bind_result`中，您将要获取数据的变量放入其中，而不是使用否则返回的数组。

```
$stmt->bind_result($col1, $col2, $col3, $col4);
while($stmt->fetch_assoc())
    echo "$col1 $col2 $col3 $col4"; 
```

或者，如果您不想绑定结果

```
while($resultArray = $stmt->fetch_assoc()) {
    echo "$resultArray[columnName1] $resultArray[columnName2] ...";
} 
```

# xpages - IBM Lotus Domino Designer 中的团队开发菜单选项

> ID：14981482
> 
> 赞同：1
> 
> 时间：2013-02-20T13:50:04.950
> 
> 标签：xpages, lotus-domino, lotus

有没有办法在 IBM Lotus Domino Designer 的 Domino Development 透视图中添加 Team Development 菜单选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:06:07.353

找到了答案。转到 DDE 上的 Windows 菜单并选择“自定义透视图”。切换到“命令”选项卡并在“可用命令组”中找到“Domino Designer Team Development”并激活它。

# java - Gradle 多项目和 lib jar 目录

> ID：14981484
> 
> 赞同：3
> 
> 时间：2013-02-20T13:50:08.373
> 
> 标签：java, gradle

我有一个 Gradle 多项目构建，并且必须包含一个必须来自 lib 目录的 JAR 文件。

首先，我有以下结构：

```
- Directory "project"
  - Directory "sub project 1"
    - Directory "lib"
      - File "A.jar"
  - Directory "sub project 2" 
```

以及“子项目1”的以下“gradle.build”（仅摘录）：

```
repositories {
    flatDir {
        dirs 'lib'
    }
} 
```

当我编译“子项目 2”时出现错误，因为 A.jar 无法解析。为了解决这个问题，我采取了以下方法：

1：我在项目根目录中移动了lib目录

```
- Directory "project"
  - Directory "sub project 1"
  - Directory "sub project 2"
  - Directory "lib"
    - File "A.jar" 
```

2：我在“gradle.build”中为“项目”定义了lib目录，比如

```
subprojects {
    repositories {
        flatDir {
            dirs '../lib'
        }
    }
} 
```

3：我从“子项目1”的“gradle.build”中删除了lib dir条目。

现在的问题是：这是一种合理的方法吗？如果不是，推荐的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:06:58.953

如果您希望项目对目录中的库声明单独的依赖关系`lib`，就像您在使用 Maven 或 Ivy 存储库时所做的那样，那么这种方法很好。

# jquery - 打开带有参数的 jQuery 对话框

> ID：14981485
> 
> 赞同：2
> 
> 时间：2013-02-20T13:50:11.900
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我有一个 MVC 视图，我想从中弹出一个 jQuery 对话框。在对话框中，我想渲染一个视图，但控制器操作需要一个参数。这是我所拥有的：

```
$(document).ready(function () {
            $dialog = $('<div></div>')
            .dialog({
            open: function(event, ui) {
                $(this).load("@Url.Action("Edit", "Agenda", new {id = ???})"); //Line to fix
            },
            autoOpen: false
        }); 
```

再往下，我有这段代码调用对话框。请注意，`id`我要传递给控制器​​的操作是`calEvent.id`

```
$('#calendar').fullCalendar({
    eventClick: function (calEvent, jsEvent, view) {
        $dialog.dialog('open');
    }
}); 
```

所以问题是：如何调整我的代码以传递`calEvent`给`id`参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:08:04.910

jQuery 提供了一种为您存储数据的方法，无需使用虚拟属性或找到解决问题的方法。

在调用它时使用 jquery 对话框对象上的 .data() 方法将您想要的任何数据绑定到对话框，并在 open() 函数中使用相同的方法将其读出：

```
$('#calendar').fullCalendar({
eventClick: function (calEvent, jsEvent, view) {
    $dialog.data('id', calEvent.id).dialog('open');
}
}); 
```

和

```
$(document).ready(function () {
        $dialog = $('<div></div>')
        .dialog({
        open: function(event, ui) {
            url = "@Url.Action("Edit", "Agenda", new {id = "XXX"})";
            url.replace( "XXX", $(this).data('id') );
            $(this).load(url);
        },
        autoOpen: false
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:52:26.167

你的问题不是很清楚。如果您要传递给控制器​​的参数是 javascript 变量，您可以使用以下内容：

```
open: function(event, ui) {
    var url = '@Url.Action("Edit", "Agenda")';
    $(this).load(url, { id: someJavascriptVariable });
} 
```

查看该[`.load()`](http://api.jquery.com/load/)方法的文档。第二个参数允许您为 AJAX 请求传递其他参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:17:20.110

简单地说，它应该作为

```
$(document).ready(function () {
        $dialog = $('<div></div>')
        .dialog({
        open: function(event, ui) {
            $(this).load("@Url.Action("Edit", "Agenda", new {id = '<%= calEvent.id %>'})"); //Line to fix
        },
        autoOpen: false
    }); 
```

# keyboard - 修改后的 Colemak 用于编程

> ID：14981498
> 
> 赞同：12
> 
> 时间：2013-02-20T13:50:33.783
> 
> 标签：keyboard, keyboard-layout, colemak

是否存在专门为编程设计的修改后的[Colemak键盘布局？](http://www.colemak.com/)

几天前，我对 Colemak 键盘布局进行了冷战，我真的很喜欢它用于正常打字，但是对于像`;`（分号）键这样的频繁编程字符，我遇到了一些问题。具有大括号和括号的直接映射的修改布局会很好。

显然，我可以通过反复试验自己重新映射这些键，但我希望有人进行了一些测试以确定常用语言字符的最佳布局。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-04-29T12:23:26.750

## 背景

我痴迷于高效的工作流程，我的实验结果非常引人注目，**我保证这是非常值得的努力。**这也是我的第三次主要编辑，我或多或少地确定了我今天使用的布局。

**我会尽量简明扼要。**

* * *

## 当前布局：

[![亮点：指托](../Images/a8d640652688cb6be0dcd557f8b47ab2.png)](https://i.stack.imgur.com/Vyikd.png)

*   你的手指停留在高光上

*   广角模式：右手移动了一列。**好处**：

    *   减少右手腕的压力
    *   布局现在是对称的
    *   `Shift R`+`Level5`更容易到达。
*   8 层布局需要 3 个修饰符：

    1.  `Shift`
    2.  `Level3`通常被称为`Altgr`
    3.  `Level5`

```
 include "level3(lalt_switch)" // Left Alt
    include "level5(ralt_switch)" // Right Alt 
```

*   `level5`如果您想扩展，了解它非常晦涩且非常有用。例如，在我的布局中，它允许添加大约 200 个额外字符。

* * *

## **8 层的**工作原理

层：

1.  没有修饰符
2.  `Shift`
3.  `Level3`
4.  `Level3`+`Shift`
5.  `Level5`
6.  `Level5`+`Shift`
7.  `Level5`+`Level3`
8.  `Level5`+ `Level3`+`Shift`

* * *

## 数字

[![亮点：如何输入数字](../Images/cc4a85df6d91e3f3f12ceba048d79c6f.png)](https://i.stack.imgur.com/LEQgz.png)

*   仅在 Layer3 上访问
*   经常使用数字的程序员是一个**糟糕的程序员。**参见： [https ://en.wikipedia.org/wiki/Magic_number_%28programming%29](https://en.wikipedia.org/wiki/Magic_number_%28programming%29)
*   这就是为什么它从 Level1 中移除（无修饰符）
*   为方便起见，将其排列在数字键盘中。
*   `1230`，构成最常见的数字，因此可以在主行找到。
*   右手数字键盘可以接近`-+.,#%$*/\;:=`最相关的数学运算符。
*   `1234567890`与标准布局相比，我搜索的键少了大约 10 倍。我发现这更容易和更直观的使用。

* * *

## 替代字符（需要修饰符）

[![亮点：关卡人物](../Images/bf7732f076754cccbdb476fb88aa67fd.png)](https://i.stack.imgur.com/CDOtn.png)

最不常见的替代字符被委托给`Level3`和`Level5`修饰符。它们被映射的原因如下：

*   `@`类似于`Q`
*   `&`类似于`B`
*   `$`类似于`Z`
*   `×`类似于`X`
*   `~`类似于`W`
*   ```开启`C`，“**可爱**”
*   `|`开启`V`，“`V`竖管”
*   `%`开启`M`，“ `M`odulus”
*   `#`开启`H`，“`H`灰烬”
*   `<`以及`>`用于编写 html 等的 Easy Access。
*   `^`旁边是`<`和`>`
*   `+`并且`-`在数字旁边，`-`最容易访问

* * *

## 替代字符（无需修饰符）

[![亮点：不可修改的键](../Images/269f0f66079ab5e6b306370ccdc9cc9e.png)](https://i.stack.imgur.com/Ndd2q.png)

通常，您将键入的最常见的编程字符存在于此处：

*   `?` `!`在角落里，因为它们通常会关闭句子。Colemak 的设计使结束句子的字母在食指和中指上更为常见，将其放在小指上可以改善手部运动。`!`也保持在原来的位置。
*   `[`并且`]`易于访问，因为正则表达式往往会大量使用它们。他们镜像`)` `(`。
*   `)` `(`是相反的，因为从小指到食指更容易滚动手指。以下三元组也很常见：`();`并且在这个方向上效果最好。
*   `"`在一个容易进入的区域和镜子`'`。
*   `'`相反，`s`这对二元组很重要`'s`。
*   `{` `}`通常由编辑自动处理，因此它们被放置在最难到达的区域。
*   `*`和`/`用于`/*`二元组，是常见的 vim 命令。
*   `\`位于远角的右侧，`Escape`与以下二元组相似并最适合使用，`\t` `\n` `\r`
*   `;` `:` `=`都是相似的，并且相似`Return`。同样，因为它们存在于角落附近，并且它们通常结束句子，所以它们在小指和无名指上效果最好。
*   `Prior` `Next`aka`Page Up` `Page Down`是中间的方向键。这在 Thinkpad 键盘上非常有用，因为它们就在 Trackpoint 旁边。即使没有跟踪点，仅滚动文档也很不错。它们不同的原因`Page Up` `Page Down`是为运行配置提供更大的灵活性。
*   `_`这里的下划线适用于编写对象名称，并且适用于 the`m_`和`s_`bigrams。它也不是一封信，因为这使得转换它成为一种痛苦的练习。

* * *

## 方向键

[![亮点：上下左右移动](../Images/7d2c4ca9e5fa4a9cde14d2995eb65956.png)](https://i.stack.imgur.com/YESNe.png)

*   灵感来自 Vim
*   没有“广角模组”，拇指会抽筋`Level5`
*   **非常**适合编辑常规文档。

* * *

## 信件

`Shift`+`[A-Z]`

[![亮点：字母](../Images/8a6ab07d03ccf2820892b14491eaca76.png)](https://i.stack.imgur.com/bPSw8.png)

*   `Capslock`并`Enter`删除并替换为`Shift`
*   `Shift`的被替换为`Control`
*   `Shift`的舒适度提高了 3 倍
*   `Control`的 5 倍更舒适
*   `Capslock`没有错过。如果我`Shift`可以访问这些密钥`Backspace`或`Escape``Level3``Level5`

* * *

## 返回

[![亮点：如何回归](../Images/1fc71b71fb55fefa42deadc6d2ea2566.png)](https://i.stack.imgur.com/D909u.png)

*   放在 上是`o`因为在 vim 中，它的功能类似于`Enter`.
*   有时可能会导致无法检测到它的游戏问题。
*   令人惊讶的是，这不是一个大问题。我认为它可能比原来的位置更难使用 1.3 倍，这是能够进入`Shift`本垒的一个很好的权衡。

* * *

## 功能键

## [![亮点：功能键](../Images/b65ad43697da26396420d3fb1a4978b1.png)](https://i.stack.imgur.com/FXXRO.png)

*   可由任一修饰符访问。

*   `Backspace`位于左侧小指处，以直观地了解您要删除的方向。

*   `Delete`处于打开状态`D`，并且与您要删除的方向直观。

*   `Escape`出于某种原因，在无名指上感觉最好，而不是在小指上。

*   `End`并`Home`受到 colemak Vim 配置的启发：

    *   在`S`ert 中，它将在编辑之前转到行首。
    *   附加在 上`T`，方向相反。
*   `Backspace`使用了 10 倍以上（这意味着我将使用 Home Row 位置多 10 倍，而不是其默认位置。）。

*   `Delete`使用大约 20 倍以上。

*   `Escape`使用大约 15 倍以上。

*   `Home`并且`End`使用频率提高了大约 200 倍，使用频率更高，在 vim 环境之外编辑文档时特别有用。

* * *

## 去做：

如果你准备好迎接挑战，我已经尝试过一些有用的想法，但是由于这样做很困难，因此无法正式添加到布局中。

简而言之，理论上您可以将字符或功能映射到仅在键释放时执行的修饰键。例如，

1.  按下`Shift`，没有其他键
2.  如果您在 1 秒内释放它，它的替代键将执行。

就是这样。

* * *

## 懒惰安装：

1.  去这里：[https ://paste.ubuntu.com/p/TbJJkm2vxM/](https://paste.ubuntu.com/p/TbJJkm2vxM/)
2.  `sudo vim /usr/share/X11/xkb/symbols/us`
3.  替换内容
4.  警告：这将替换您的默认 Colemak。

* * *

## 配置文件

*   `.vimrc`：[https ://paste.ubuntu.com/p/JSKMwrPMPY/](https://paste.ubuntu.com/p/JSKMwrPMPY/)
*   `~/.config/sc-im/scimrc`：[https ://paste.ubuntu.com/p/Vx64STMtHC/](https://paste.ubuntu.com/p/Vx64STMtHC/)
*   `.config/qutebrowser/config.py`：[https ://paste.ubuntu.com/p/mcymX92tBF/](https://paste.ubuntu.com/p/mcymX92tBF/)

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-08T09:16:58.587

我意识到这个问题已经有一年了，但这是我的回复，以防它帮助其他人。

这是一个我经常处理的问题，而不是我想详细说明的问题。

我只想说不，即使经过几个月的搜索，我还没有找到合适的“用于编程的 Colemak”。它与通常的 QWERTY 相同的烦恼是过度使用右小指来表示特殊符号，并且重新映射本来是可取的，但是现在已经完成了混乱，不会有任何直接的解决方案。

你只能做两件事：

1）制作自定义布局键盘。在 Win/Lin/Mac 上有各种工具可以做到这一点。这很整洁，因为您可以根据需要重新排列所有内容。另一方面，最大的缺点是没有其他人使用您的键盘布局，如果您被要求在计算机上键入内容，您将遇到麻烦，因为您的肌肉记忆完全不同。

2) 有一个名为[Programmer Dvorak](http://www.kaufmann.no/roland/dvorak/)的键盘布局，旨在解决您的问题。在这里，缺点是程序员 Dvorak 与标准 Dvorak 键盘相比相对不为人知，因此与上述问题相同。但是，它只会重新排列特殊符号，这意味着如果需要，您仍然可以使用标准的 Dvorak（而且它比 Colemak 广泛得多）。不过，请准备好在过渡中花费数月时间。

或者，您可以尝试选择第三种选择，并尝试说服 Colemak 社区开发对程序员友好的 colemak 版本。但这需要时间，我敢打赌你会找到很少的支持者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-25T21:54:40.820

你看过 colemak.com 上的 dreymar 广角模组吗？

你可以坚持; 在键盘的中间，以便在其上方和下方使用 [ 和 ] 轻松访问？

# ember.js - 保存 ember 数据模型后的转换

> ID：14981500
> 
> 赞同：8
> 
> 时间：2013-02-20T13:50:35.640
> 
> 标签：ember.js, ember-data

我想在创建帖子后进行转换。

> 发布/新建 > 点击提交 > rails 后端成功创建帖子并响应 json > 重定向到新创建的帖子路径

在 ember_data_example github 源代码中。他们使用这种方法

```
 transitionAfterSave: function() {
     // when creating new records, it's necessary to wait for the record to be assigned
     // an id before we can transition to its route (which depends on its id)
     if (this.get('content.id')) {
       this.transitionToRoute('contact', this.get('content'));
     }
 }.observes('content.id'), 
```

它工作正常，因为模型创建时模型的 ID 为 null，并且模型保存成功时它的 ID 会发生变化，因为此函数会观察模型 ID 的变化。

但也许，每当模型的 ID 属性更改时，都会执行此函数。我正在寻找一些更语义化的方式。

我希望在模型状态更改为 'isDirty' = false && 'isNew' == true form 'isDirty' = true, 'isNew' = false 时执行转换。

我该如何实施？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T14:46:53.880

理想情况下，id 不应该改变。但是，您是正确的，从语义上讲，这种方法似乎不正确。

有一种更清洁的方法可以做到这一点：

```
save: function(contact) {
  contact.one('didCreate', this, function(){
    this.transitionToRoute('contact', contact);
  });

  this.get('store').commit();
} 
```

**更新 2013-11-27（ED 1.0 测试版）：**

```
save: function(contact) {
  var self = this;
  contact.save().then(function() {
    self.transitionToRoute('contact', contact);
  });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-11T01:49:12.013

Ember 2.4 的注意事项 它被允许在组件或路由级别处理保存操作（并避免使用控制器）。下面是一个例子。请注意转换中模型对象上的 id。并注意我们如何在路由中使用 transitionTo 而不是 transitionToRoute。

```
 actions: {
    save() {
      var new_contact = this.modelFor('contact.new');
      new_contact.save().then((contact) => {
        this.transitionTo('contact.show', contact.id);
      });
    }, 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-12T22:15:05.347

```
 actions: {
        buttonClick: function () {
            Ember.debug('Saving Hipster');
            this.get('model').save()
                .then(function (result) {
                    this.transitionToRoute('hipster.view', result);
                }.bind(this));
        }
    } 
```

# vb.net - VB.NET 保持 TCP 连接处于活动状态

> ID：14981503
> 
> 赞同：0
> 
> 时间：2013-02-20T13:50:45.880
> 
> 标签：vb.net

抱歉，如果我这几天问了很多问题
使用以下功能，我可以成功连接并登录到服务器，但问题是当它登录到服务器时，它会立即断开连接
但是当我尝试使用 autoit 登录到该服务器时，它起作用了并且它保持连接
这是我在 VB.NET 中使用的函数（它在一个类中）

```
Public Shared ConnectionSocket As New TcpClient
Public Shared Stream As NetworkStream

Public Shared Function Connect(ByRef IP As String, ByRef Port As Integer)
    ConnectionSocket.Connect(System.Net.IPAddress.Parse(IP), Port)
    Stream = ConnectionSocket.GetStream
    ConnectionSocket.Client.SetSocketOption(SocketOptionLevel.Tcp, SocketOptionName.KeepAlive, True)
    Dim RecievedBytes(ConnectionSocket.ReceiveBufferSize) As Byte
    Dim Temp As New List(Of Byte())
    Dim Temp2 As New List(Of Byte())
    Dim Data As Byte()
    Dim Final As Byte()
    Temp.Add({&H10, &H1})
    Temp.Add({&H0})
    Temp.Add({&H97, &H2F})
    Temp.Add(UserPacket)
    Temp.Add(PasswordPacket)
    Temp.Add({&H0})
    Temp.Add({&H1})
    Temp.Add({&H0})
    Temp.Add({&H77, &HD1, &HCA, &HC3, &HEB, &H3A, &H2, &H81, &HDB, &HA, &H51})
    Temp.Add({&H0})
    Temp.Add({&H69, &H6E, &H74, &H6C})
    Temp.Add({&H0, &H0, &H0})
    Temp.Add(StringToByte(My.Settings.BotUsername))
    Temp.Add({&H0})
    Data = Temp.SelectMany(Function(x) x).ToArray()
    Temp2.Add(IntegerToByte(Data.Length - 4))
    Temp2.Add(Data)
    Final = Temp2.SelectMany(Function(x) x).ToArray()

    Stream.Write(Final, 0, Final.Length)

    While True

        Try
            Stream.Read(RecievedBytes, 0, CInt(ConnectionSocket.ReceiveBufferSize))
        Catch ex As Exception

        End Try

    End While
End Function 
```

我在 MainForm_Load 上调用此函数
如果还发布 autoit 代码有帮助，请告诉我将其添加到此处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:36:35.080

您在此处发布的代码中似乎没有任何内容会导致客户端关闭套接字。因此，可能的问题不是客户端正在关闭它，而是服务器正在关闭它。如果是这种情况，可能是因为您发送的数据在某种程度上是不同的。

# javafx-2 - 设置条形图的描边

> ID：14981510
> 
> 赞同：0
> 
> 时间：2013-02-20T13:51:04.870
> 
> 标签：javafx-2, bar-chart

如何设置条形图的笔触（颜色）？我总是有黄条

这是我的代码

```
import java.util.Set;
import javafx.application.Application;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.chart.BarChart;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class StackPaneTest extends Application {

@Override
public void start(Stage primaryStage) {

    final CategoryAxis xAxis1 = new CategoryAxis();
    final NumberAxis yAxis1 = new NumberAxis();

    final BarChart<String, Number> barChart = new BarChart<String, Number>(xAxis1, yAxis1);

    barChart.setAlternativeRowFillVisible(false);
    barChart.setLegendVisible(false);
    barChart.setAnimated(false);

    XYChart.Series serie1 = new XYChart.Series();

    serie1.getData().add(new XYChart.Data("Jan", 1));
    serie1.getData().add(new XYChart.Data("Feb", 2));
    serie1.getData().add(new XYChart.Data("Mar", 1.5));
    serie1.getData().add(new XYChart.Data("Apr", 3));
    serie1.getData().add(new XYChart.Data("May", 2.5));
    serie1.getData().add(new XYChart.Data("Jun", 5));
    serie1.getData().add(new XYChart.Data("Jul", 4));
    serie1.getData().add(new XYChart.Data("Aug", 8));
    serie1.getData().add(new XYChart.Data("Sep", 6.5));
    serie1.getData().add(new XYChart.Data("Oct", 13));
    serie1.getData().add(new XYChart.Data("Nov", 10));
    serie1.getData().add(new XYChart.Data("Dec", 20));

    barChart.getData().addAll(serie1);

    Set<Node> barNode = barChart.lookupAll(".default-color0.chart-bar");
    for(final Node bar : barNode){
        bar.setStyle("-fx-stroke: GREEN");
    }

    StackPane stack = new StackPane();
    stack.getChildren().addAll(barChart);    

    Scene scene = new Scene(stack, 800, 600);

    primaryStage.setScene(scene);
    primaryStage.show();
}

public static void main(String[] args) {
    launch(args);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:29:32.907

如果你想让 bar 变成绿色，使用 setStyle("-fx-bar-fill: GREEN");

关于笔画应用 - 这是一个单独的麻烦，但它与应用于酒吧的样式无关。

通常情况下，您可以使用 caspian.css 或 modena.css 文件来观察样式应用的示例。

# erlang - 更新erlang中的多行表格

> ID：14981512
> 
> 赞同：0
> 
> 时间：2013-02-20T13:51:07.297
> 
> 标签：erlang

我想知道如何更新表的多条记录

例如我有一个名为： **事务的表**

我想修改**交易**的 **ID**

 **我尝试没有成功

```
 testupdate()->
        Key =20,
        Update=#transaction{id=Key} ,
    Fun = fun() ->
                  List = mnesia:match_object(Update),
                  lists:foreach(fun(X) ->
                                        mnesia:write_object(X)
                                end, List)
          end,
    mnesia:transaction(Fun). 
```

当我测试时我没有发现错误

```
1> model:testupdate().
{atomic,ok} 
```

但**交易**的**id**没有改变

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:32:36.493

这在很大程度上取决于`Type of Table`，以及您在记录中更新的字段。不幸的是，你没有告诉我们关于你的桌子的一些细节。可以说，您正在根据给定字段更新多条记录。
**请注意**，我不建议使用该词`transaction`作为表名。但是为了学习的目的，让我们继续。伪代码：

```
获取以下所有记录： Obj#transaction.field == Key
然后，Foreach，设置：Obj#transaction.field == Key2

```

然后考虑这个例子`Query List Comprehension`

```
-include_lib("stdlib/include/qlc.hrl")。

选择（Q）->
    案例记忆：is_transaction() 的
        假->
            F = fun(QH)-> qlc:e(QH) 结束，
            mnesia:activity(transaction,F,[Q],mnesia_frag);
        真-> qlc:e(Q)
    结尾。

gen_update(FilterFun,UpdateFun)->
    A = select(qlc:q([R || R <- mnesia:table(transaction),FilterFun(R) == true])),
    [更新乐趣(X) || X <- A],
    好的。

update_by_key(OldKey,NewKey)->
    FilterFun = fun(#transaction{key = OldKey}) -> true;
                    (_) -> 错误
                结尾，
    UpdateFun = 乐趣（T）->
                    NewT = T#transaction{key = NewKey},
                    记忆：写（NewT），
                    好的
                结尾，
    gen_update(FilterFun,UpdateFun),
    好的。

```

那应该这样做。看函数：`gen_update`。我曾经`funs`创建过通用对象，它们将根据任何所需的形式进行过滤，另一个将进行更新。`fun`现在，只要将记录作为参数，您就可以构建任何选择。请注意，此方法可能适用于 type 的表`set`，具体取决于您在做什么。如果您是通过 更新`primary key`，那么，您需要进行一些新的更改。****

# sql-server - 如果从 sp 过程（存储在 master 中）调用 sys.database_principals 不会在当前数据库中执行

> ID：14981514
> 
> 赞同：1
> 
> 时间：2013-02-20T13:51:12.873
> 
> 标签：sql-server, views, catalog

我想在 SP 过程中打印出实际数据库的数据库用户（参见`sp_PrintUsers`下面的代码），但是，由于某种原因，它会打印出 master 的数据库用户。尽管事实上任何数据库级 SQL 语句都在实际数据库中执行，但这似乎是所有数据库级视图的 SP 过程的一般行为。如果我们打印出来`DB_NAME`显然不是master，那么有什么问题呢？

有什么解决方法吗？

```
use [master]
go
create procedure sp_PrintUsers
as
begin
    SELECT DB_NAME() AS DataBaseName
    select name from sys.database_principals;
end
go

use [actual_database]
go

exec sp_PrintUsers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:02:56.190

尝试动态执行选择，如下所示：

```
EXEC('select name from sys.database_principals;'); 
```

如果这无助于构建查询以引用具有三部分名称的目录视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:05:56.330

试试这个 ：

```
use [master]
go
create procedure sp_PrintUsers
as
begin
    declare @dbname varchar(30) = DB_NAME()
    EXEC ('select name from ' + @dbname + '.sys.database_principals');        
end
go

use [actual_database]
go

exec sp_PrintUsers 
```

# linux - 查找命令忽略目录

> ID：14981517
> 
> 赞同：0
> 
> 时间：2013-02-20T13:51:24.213
> 
> 标签：linux, directory, find

我正在尝试查找以 .jar 结尾的所有文件，但它正在拾取以 .jar 结尾的文件夹，这是我不想要的。

到目前为止我的命令

```
find . -name ".*jar" 
```

我需要它，所以它会忽略以 .jar 结尾的目录

附加请求。

我现在需要在查找时忽略特定文件夹，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:52:23.370

只需添加-type f：

```
find . -name "*.jar" -type f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:02:06.790

其他人已经展示了如何提取以 . 结尾的文件`.jar`。作为对您的评论“如何忽略特定文件夹”的回答。你用`-prune`那个

```
find . -name 'specific/folder' -type d -prune -o -type f -name '*.jar' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:53:19.053

那就是你想要的

```
find . -type f -name "*.jar" 
```

参见手册页：

```
-type Type
    Evaluates to the value True if the Type variable specifies one of the following values:
      b
           Block special file
      c
           Character special file
      d
           Directory
      f
           Plain file
      l
           Symbolic link
      p
           FIFO (a named pipe)
      s
           Socket 
```

# php - Web 服务器何时清除 PHP 会话标识符？

> ID：14981524
> 
> 赞同：3
> 
> 时间：2013-02-20T13:51:38.923
> 
> 标签：php, http, session, curl

**背景：**

我正在尝试编写一个定期连接到 Web 服务器的脚本，并检查特定页面上的某些信息是否已更改。我已经使用 bash（用于脚本）、curl（用于实际连接）和 crontab（用于调度）的组合来完成这项工作。

由于服务器需要身份验证，我首先使用 curl 使用我的凭据在登录页面上执行 POST 请求并保存 cookie 文件（包含 PHPSESSID）。现在我可以在对要检查的实际网页进行请求时使用 cookie 文件。

**问题）：**

1.  服务器何时真正清除我在第一个请求中设置的 PHPSESSID？我想它必须在某个时候这样做，否则它会崩溃，因为它会不断存储有关曾经启动的每个会话的信息。

2.  如果 PHPSESSID 在关闭浏览器时被清除，是否有某种方法可以模拟，即使使用 curl？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:54:11.880

这比“当它被清除时”要复杂一些

会话在 PHP 中有一个生命周期。默认值为 24 分钟。这意味着在您连接到网站后，您的会话将一直有效，直到

*   您关闭浏览器（除非您删除 cookie，否则不会使用 cURL 模拟）

    或者

*   24分钟过去

每次加载页面并且服务器调用`session_start()`时，过期时间将额外增加 24 分钟（从技术上讲，它实际上是在`session_start()`调用页面上的脚本执行结束时增加 24 分钟）。

当该 cookie 实际过期时，您的会话不再有效，并且`$_SESSION`在服务器端将是空的。**但是您的数据仍然在服务器上，**直到下一次服务器执行会话垃圾收集周期以清除过期会话，这取决于服务器上使用的会话处理程序，可能会或可能不会实际删除您的数据。例如，一家银行可能会将数据发送到存档服务器，以备不时之需。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:00:29.083

服务器在最后一次请求后经过会话超时时间后删除会话。默认为 1440 秒（24 分钟），可以在 php.ini 文件中更改。

关闭浏览器时会话不会刷新服务器端，但客户端会丢失其会话数据，因为浏览器会删除其会话的本地内存。但是，如果您将 sessionid 保存在安全的地方，您可以稍后再次使用它，当然如果您保持在超时范围内。

这正是会话劫持的工作方式，他们以某种方式获取您的 sessionid，然后可以在他们自己的机器上设置此 sessionid 并继续您的会话。

# r - 在两个时间段之间设置数据帧的子集

> ID：14981526
> 
> 赞同：1
> 
> 时间：2013-02-20T13:51:53.727
> 
> 标签：r, subset

如果我有一个示例数据框：

```
Date <- c("05/12/2012 05:17:00", "05/12/2012 06:10:00", "05/12/2012 06:12:00", "05/12/2012 06:14:00", 
      "06/12/2012 05:25:00", "06/12/2012 06:55:00", "06/12/2012 06:19:00", "06/12/2012 08:00:00",
      "07/12/2012 05:00:00", "07/12/2012 05:19:00", "07/12/2012 06:04:00",
      "07/12/2012 06:59:00")
Date <- strptime(Date, "%d/%m/%Y %H:%M")
a <- sample(12)
hour <- as.numeric(format(Date, "%H"))
min <- as.numeric(format(Date, "%M")) / 60
hours_mins <- hour + min

df1 <- data.frame(Date,a,hour, min, hours_mins, stringsAsFactors = FALSE) 
```

我希望能够对我的数据框进行子集化，只留下 05:15 到 06:15 之间的数据（在任何一天）。

我将小时和分钟转换为十进制变量，并希望我能够执行以下操作：

```
df1[df1$hours_mins >= '5.25' & df1$hours_mins < '6.25'] 
```

...但是，唉，这不起作用。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:55:13.117

去掉引号，最后加逗号

`df1[df1$hours_mins >= 5.25 & df1$hours_mins < 6.25,]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:32:27.520

实际上，POSIXlt 对象的优点之一是它自动携带重要的日期信息。

```
Date1 <- strptime(c("05/12/2012 05:17:00", "05/12/2012 06:10:00", "05/12/2012 06:12:00", "05/12/2012 06:14:00", 
          "06/12/2012 05:25:00", "06/12/2012 06:55:00", "06/12/2012 06:19:00", "06/12/2012 08:00:00",
          "07/12/2012 05:00:00", "07/12/2012 05:19:00", "07/12/2012 06:04:00",
          "07/12/2012 06:59:00"), "%d/%m/%Y %H:%M")
class(Date1)
a <- sample(12)

#please note since strptime() is used Date1 contains "hour", "min" etc
df1 <- data.frame(Date1, hr=Date1$hour, min=Date1$min, cum_hrs=Date1$min/60+Date1$hour, a, stringsAsFactors = FALSE)
df1[(df1$hr + df1$min/60>= 5.25) & (df1$hr + df1$min/60< 6.25),] 
```

此外，如果您想要总小时数（作为小数），我在数据框中添加了一个列。我希望这能满足您的需求。

# android - 确保在活动部分之前执行服务

> ID：14981535
> 
> 赞同：1
> 
> 时间：2013-02-20T13:52:18.287
> 
> 标签：android, android-activity, android-service

我有一个包含一些活动的应用程序。这些活动需要公共资源（矩阵数组列表），因此为了避免多次重新加载这些资源（当更改为另一个活动或方向更改时），我创建了一个服务。

首先，我用**startService(Intent)**调用它，让它变得粘稠。之后，我将服务绑定到活动， **bindService(sIntent, mConnection, BIND_AUTO_CREATE);**

最后，我有一些代码尝试从服务中获取数据，但它会生成 NullPointerException。我知道这是因为（正如我在日志中看到的那样）服务在应用程序崩溃后启动，尽管我将**startService**和**bindService**放在访问数据代码之前。

任何人都知道如何确保在尝试访问之前获取加载的数据？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:58:21.867

[将公共资源保存在SharedPreference](http://developer.android.com/reference/android/content/SharedPreferences.html)中可能更容易，SharedPreference 可以被应用程序的所有线程访问，并且在运行之间是持久的。这取决于你的资源是什么。

如果您希望您的服务适用于您的方法[，您可以使用透明的 Activity 来做到这一点](https://stackoverflow.com/questions/4467600/how-to-launch-a-android-service-when-the-app-launches)。[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)可能是一个更容易和更简单的解决方案。

尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)加载数据，您可以选择 Activity 在加载时执行的任何操作（进度对话框？），并确保在 AsyncTask 调用 ready 方法 ( )**后**继续使用您的应用程序`onPostExecute()`。这意味着 AsyncTask 将取代您将服务作为后台线程的想法，管理您的资源。（加载、下载等）。

下次还要发布您的日志，它们可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:54:15.100

Start your Service in the [onCreate()](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29) of a class that extends [Application](http://developer.android.com/reference/android/app/Application.html). Or even better, do the work the Service is doing in your Application class, which is guaranteed to be created before any other part of your app. A Service may take a while to start up and you may encounter a race condition, but the class extending Application is *always* the first part of an app to be launched.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T19:40:28.810

我最近遇到了这个问题并创建了一个解决方案。类似于隐形活动，但想法是创建一个不需要服务的“加载”活动。这是一个例子：

在 AndriodManifest.xml 中：

```
...
<application
    ... >
    <activity 
        android:name="com.example.LoadingActivity"
        android:label="@string/app_name" >
        <!-- A do-nothing activity that is used as a placeholder while the service is started. -->
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.MyActivity"
        android:label="@string/app_name" >
        <!-- The real activity, started by the loading activity. -->
    </activity>
    <service
        android:name="com.example.MyService" >
        <!-- The background service, started by the loading activity. -->
    </service>
</application>
... 
```

com/example/LoadingActivity.java：

```
package com.example;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class LoadingActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.activity_loading);

        super.startService(new Intent(this, MyService.class)); // listed first so it will start before the activity
        Intent intent = new Intent(this, MyActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK); // makes it so the 'loading' activity is not kept on the back-stack
        super.startActivity(intent);
    }
} 
```

MyActivity.java 和 MyService.java 文件只是标准的。您还需要一个activity_loading.xml 布局资源，可能只是一个ImageView。

# c# - 使用 jQuery Validation 插件作为 div 而不是表单？

> ID：14981539
> 
> 赞同：3
> 
> 时间：2013-02-20T13:52:27.210
> 
> 标签：c#, jquery, asp.net, jquery-validate

**注意**：我在问这个之前提到了这些问题[Qn1](https://stackoverflow.com/questions/1046739/jquery-validator-plugin-without-using-form)、[Qn2 。](https://stackoverflow.com/questions/4936221/jquery-validate-plugin-on-div)但老实说，答案是**行不通**的。请提出一个解决方案。我正在使用 jquery 验证插件对我的输入字段进行验证。当所有标签都保存在表单标签中并在 jquery 中访问它时，我的代码工作正常，例如， `$("#formID").validate()`--> 这工作正常......但我想为 a`div`而不是表单实现相同的效果。

我试过这样：`$("#divID").validate()`但它不工作......

下面是我的代码。请看一下并告诉我如何实现它`div`。

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#content").validate({
            onfocusout: true,
            rules: {
                fullname:
                    {
                    lettersonly: true,
                    required: true
                    },
                age:
                    {
                        required: true,
                        number: true,
                        min: 20,
                        max:98,
                        nowhitespace:true
                    }
            },
            messages: {
                fullname: "Please specify your name.",
                age:"Please enter your correct age."
            }
        });
    });
</script>
<div id="content">
            <p>
                <label for="fullname">Full name:</label>
                <input type="text" name="fullname" id="fullname" /><br />
                <label for="age">Age</label>
                <input type="text" name="age" />
            </p>
            <p>
                <button id="submit" value="">Search User</button>
            </p>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:22:25.837

> **Quote OP:** "NOTE: I referred these questions Qn1 , [Qn2](https://stackoverflow.com/questions/4936221/jquery-validate-plugin-on-div) before asking this . But honestly the answers are not working."

Incorrect, the [the accepted answer](https://stackoverflow.com/a/4938022/594235) on [Qn2](https://stackoverflow.com/questions/4936221/jquery-validate-plugin-on-div) is working perfectly:

> [The validation plugin is (currently) designed to work on a `<form>`, and only on a `<form>`. You can also note that all of the plugin documentation references a `form`, not any other generic container.](https://stackoverflow.com/a/4938022/594235)

You **must** use a `form` element with the jQuery Validate plugin. There is no workaround for this.

However, if you just want to validate some inputs without actually submitting a `form`, there are lots of working solutions. **Example: [http://jsfiddle.net/GmQ5d/](http://jsfiddle.net/GmQ5d/)**

**[Full Documentation](http://docs.jquery.com/Plugins/Validation)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:06:35.130

不幸的是，这不是您想听到的答案，但是使用 JQuery Validate 插件，您无法对`form`标签以外的任何内容执行验证。您可能会注意到[所有插件文档都](http://docs.jquery.com/Plugins/Validation)引用了一个表单，而不是任何其他通用容器，例如 Div。

这个[网站](http://www.junnark.com/blog/detail/using-jquery-validation-with-aspnet-web-forms)向您展示了如何使用 webforms 实现 JQuery Validate，不像您从 JQuery 获得的普通示例那么简单，但仍然很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:11:13.877

jQuery 自己的验证只适用于`form`s。然而，这个[插件](http://validity.thatscaptaintoyou.com/Demos/index.htm#UsingValidityWithAjax)看起来应该可以在没有表单的情况下工作。根据他们的文档，我自己没有测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-18T17:02:21.280

非常过时，但似乎仍然需要添加一种可能的解决方案。如果您不能使用表单（在 .NET 中，每页不能超过 1 个表单），您仍然可以直接验证每个字段。

所以而不是

```
$("#divID").validate(); 
```

您可以使用：

```
var isValid = $("#fullname").validate();
isValid = $("#age").validate();

if(isValid){
// do submit form
} 
```

# ruby-on-rails-3.2 - 如何在现有 Rails 应用程序中的自定义路径上安装refinerycms 引擎

> ID：14981541
> 
> 赞同：0
> 
> 时间：2013-02-20T13:52:35.400
> 
> 标签：ruby-on-rails-3.2, refinerycms

我打算将炼油厂 cms 集成到现有的 rails 3.2 应用程序中。

我按照本指南[http://refinerycms.com/guides/with-an-existing-rails-app](http://refinerycms.com/guides/with-an-existing-rails-app)设置了一个炼油厂引擎。

我不希望炼油厂在我的应用程序中生成所有页面。只有一组新的。

所以在 routes.rb 我修改了以下行：

```
 mount Refinery::Core::Engine, :at =>'/' 
```

至

```
 mount Refinery::Core::Engine, :at =>'/cms' 
```

在开发模式下（我还在测试是否可以集成成功），当我运行服务器时，如果我手动输入

```
 localhost:3000/cms 
```

cms系统可用。

但是，如果我单击主页链接或炼油厂创建的任何其他页面的链接，我会收到以下错误：

```
 No route matches [GET] "/" 
```

这是因为它已被炼油厂配置为使用 / 路径。

如果我手动输入 localhost:3000/cms/(页面名称)，那么页面就会被渲染。

如果 routes.rb 中的条目是默认条目

```
 mount Refinery::Core::Engine, :at =>'/' 
```

然后精炼厂创建的页面链接可以正常工作但是，在我集成精炼厂之前创建的现有页面不会呈现，因为精炼厂正在覆盖它们。

如何自定义炼油厂创建的页面链接的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:56:58.363

确保在现有路由之后安装 Refinery，这样它就不会覆盖它们，因为它们的优先级是基于创建顺序的。

# c# - 检查 pst 文件是否受密码保护

> ID：14981547
> 
> 赞同：2
> 
> 时间：2013-02-20T13:52:45.247
> 
> 标签：c#, asp.net, outlook, pst

有没有办法检查 microsoft Outlook pst 文件是否受密码保护或不使用 c#。我正在尝试使用以下代码读取 pst 文件。

```
Microsoft.Office.Interop.Outlook.Application app = new Microsoft.Office.Interop.Outlook.Application();
Microsoft.Office.Interop.Outlook.NameSpace outlookNs = app.GetNamespace("MAPI");
Microsoft.Office.Interop.Outlook.MAPIFolder emailFolder = outlookNs.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:10:21.030

我不知道 api 中是否有属性，因为您可以查询联系人或电子邮件文件夹。如果 pst 文件受到保护，它不应该工作。

```
MAPIFolder contacts = olMAPI.GetDefaultFolder(OlDefaultFolders.olFolderContacts)

foreach (ContactItem contact in fcontacts .Items)
{
   ...
} 
```

# vb.net - 在 VB.NET 中启动 gcc.exe 进程

> ID：14981549
> 
> 赞同：0
> 
> 时间：2013-02-20T13:52:48.377
> 
> 标签：vb.net, gcc, process

我正在使用 VB.NET 为 C/C++ 开发一个 IDE。我需要确保在用户单击“编译”菜单项并将任何错误重定向到 GUI 时编译程序。我写了以下代码

```
 Private Sub CompileToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CompileToolStripMenuItem.Click
 Dim comp As New Process
    comp.StartInfo.FileName = "C:\MinGW\bin\gcc.exe"
    comp.StartInfo.Arguments = tabc.SelectedTab.Text 
    comp.StartInfo.RedirectStandardOutput = True
    comp.StartInfo.UseShellExecute = False
    comp.Start()
    Dim msg As String = comp.StandardOutput.ReadToEnd
    MsgBox(msg)
    comp.WaitForExit()
    comp.Close()
End Sub 
```

发送的参数是文件的绝对路径（tabc 是一个 TabControl，并且在 TabControl 中添加了几个 TabPage）。但是当我尝试编译时，会出现一个空白控制台窗口，指示进程已启动但文件未编译。我已经将环境变量中的“PATH”变量设置为 MinGW 的 bin 文件夹，但它仍然没有区别。当我尝试从 CMD 手动编译程序时，没有程序并且 gcc 可以正常工作。我的代码有问题吗？

# javascript - 来自隐藏 div 中的内联图像的灯箱？

> ID：14981551
> 
> 赞同：1
> 
> 时间：2013-02-20T13:52:52.337
> 
> 标签：javascript, jquery, user-interface, colorbox

我有一个带有一些内联图像的隐藏 div：

```
<div id="mydiv" style="dispay:none;">
   <img src="data:image/jpeg;base64,..." />
      ...
   <img .../>
</div> 
```

现在，我不想有一个灯箱，它会显示这些图像。问题是大多数灯箱实现都接受指向图像文件的锚点作为输入。

Colobox，可以采用内联 html，但不能采用多个 html 片段来呈现画廊（带有上一个和下一个按钮）体验。你有什么想法：

1.  如果可以将colorbox配置为显示此类数据？
2.  是否有替代的 jQuery 插件可以做到这一点？
3.  如果没有可行的解决方案，如何快速实施？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:52:59.857

> Colobox，可以采用内联 html，但不能采用多个 html 片段来呈现画廊

当然可以。像这样的东西应该可以工作，但还有其他选择：

```
$('#mydiv img').colorbox({
    rel:'my-group', 
    inline: true,
    open: true,
    href: function(){ return this; }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:22:31.903

一定会有一些灯箱在隐藏内容的显示的基础上工作（如果保持标记的原样很重要）。[Bootstrap 灯箱](http://jbutz.github.com/bootstrap-lightbox/)就是其中之一。

但是，如果您已经对 Colorbox 有偏好，我相信它可以完成任务：[这个演示](http://www.jacklmoore.com/colorbox/example4/)展示了调用多个图像的示例。如果数据 URI 有问题，您可以将其用作链接 - 如果需要为组中的其他图像提供单独链接的问题，您可以隐藏那些`display:none`（与您当前相同）做你的`img`）。

# ruby-on-rails-3 - 如何在工厂中跳过 after_build 回调？

> ID：14981552
> 
> 赞同：0
> 
> 时间：2013-02-20T13:52:55.230
> 
> 标签：ruby-on-rails-3, factory-bot

我在创建工厂时遇到了问题。我有一个像这样的工厂：

```
Factory.define :job do |j|
  j.association :service_partner, :factory => :service_partner
  j.price_per_task 1.to_money
  end
  j.after_build{|j| j.project.service_partner_ids = [j.service_partner.id] unless j.service_partner.nil?}
end 
```

创建工厂时如何跳过 after_build？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:46:54.870

如果您只想让 after_build 回调偶尔运行，最好的办法是定义一个嵌套工厂：

```
Factory.define :job do |j|
  j.association :service_partner, :factory => :service_partner
  j.price_per_task 1.to_money
  end
  factory :job_with_additional_setup do
    j.after_build{|j| j.project.service_partner_ids = [j.service_partner.id] unless j.service_partner.nil?}
  end
end 
```

`FactoryGirl.create(:job)`然后，您可以通过使用 after_build来创建一个正常的工作：`FactoryGirl.create(:job_with_additional_setup)`

# html - css 根据内容拉伸 li

> ID：14981555
> 
> 赞同：2
> 
> 时间：2013-02-20T13:53:03.833
> 
> 标签：html, css, html-lists, stretch

我在[这里有这段代码](http://jsfiddle.net/TEXPQ/)，我正在尝试`ul.submenu li`根据其内容进行拉伸。正如你所看到的，第三`li`个`ul.submenu`有一个很长的文本，它隐藏而不是拉伸`li`.

我尝试`display`使用各种组合更改 DOM 上所有元素的属性，但我无法做到正确。

我做错了什么，为什么会这样？我错过了什么？

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:12:15.667

目前，由于块显示和绝对定位，文本对布局影响不大。

您可以通过给出`li`s`display: inline-block`和`white-space: nowrap`. 我已经[分叉了一个示例](http://jsfiddle.net/barney/mTKKM/)，其中子菜单与最长项目所需的长度一样长。

### 解释

`inline-block`给出`inline`和`block`显示的元素属性：`inline`因为元素应该像文本一样流动，并从它包含的文本中获取其初始布局和尺寸。但是该`block`部分意味着您还可以指定顶部和底部填充和边距，清除等。即使使用此设置，包含元素仍然是绝对定位的（大多数文本内容只要它需要就可以流动，因为通常包含块元素填充 100 % width - 不是绝对、相对和固定元素的情况），所以它的本能是折叠到最小宽度，即第一个单词的宽度。但是如果我们使用`white-space: nowrap`，我们可以强制文本尽可能多地扩展，因此使用完整的句子作为衡量标准。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T14:10:49.223

您可以将最小宽度更改为：

```
min-width: 240px; 
```

[查看示例](http://jsfiddle.net/TEXPQ/5/)

# symfony - 教义不想坚持我的实体，尽管一切似乎都很好

> ID：14981557
> 
> 赞同：1
> 
> 时间：2013-02-20T13:53:09.783
> 
> 标签：symfony, file-upload, doctrine-orm

我想要做什么：我正在尝试按照[http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)上的官方 Symfony 2 教程进行文件上传并将其数据保存到数据库。

我得到的是： `SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'author' cannot be null`

我的实体-> [http://pastebin.com/av0XAASj](http://pastebin.com/av0XAASj)

我的控制器-> [http://pastebin.com/bQ32UUsa](http://pastebin.com/bQ32UUsa)

我得到的完整错误错误，尽管在调用“持久”方法之前正确设置了“作者” [http://i.imgur.com/crOqDUe.jpg](http://i.imgur.com/crOqDUe.jpg)

*我故意将 $author Entity 属性设置为**public**，以便能够在持久化控制器之前对其进行 var_dump。当它是私有的时，问题保持不变。 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:36:48.087

我发现了问题所在。问题在我的脑海中（当然）。列“作者”是与用户实体的关系列，因此作者的值应该是用户类对象，而不是整数。

在控制器中，这就像：

```
 $user = $this->getDoctrine()
                    ->getRepository('RepoRepoBundle:User')
                    ->find('4449');
  $document->setUser($user);
  $em->persist($document);
  $em->flush(); 
```

# python - 使用漂亮的汤抓取数据时网页的表结构问题

> ID：14981561
> 
> 赞同：1
> 
> 时间：2013-02-20T13:53:25.130
> 
> 标签：python, html, python-2.7, beautifulsoup

我正在使用以下代码使用漂亮的 Soup 从网页上的表格结构中抓取数据：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import urllib
import time
import mechanize
from bs4 import BeautifulSoup
from itertools import islice

page = urllib2.urlopen('http://www.t-mobile.de/tarifuebersicht-telefonieren-und-surfen/0,23786,25241-_,00.html#grp=0&dev=0').read()
soup = BeautifulSoup(page)
for row in soup('table', {'class' : 'wloCol5'}).tbody('tr'):
    tds = row['td']
    print tds 
```

这段代码给了我`AttributeError: 'ResultSet' object has no attribute 'tbody'`错误。我正在为另一个运行没有任何故障的网页使用类似的代码。请告知导致此错误的此代码/网页结构可能存在什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:02:27.667

该调用`soup('table', {...})`找到了多个表，因此它返回一个类似列表的对象。

尝试类似：

```
for table in soup('table', {...}):
    for tr in table("tr"):
        ... 
```

# c# - 添加对 web 服务的引用

> ID：14981570
> 
> 赞同：3
> 
> 时间：2013-02-20T13:53:45.533
> 
> 标签：c#, asp.net, visual-studio-2010, web-services, wsdl

我正在使用 Visual Studio 2010 开发一个项目，我需要使用一个 web 服务。问题是开发机无权访问webservice，所以无法直接添加引用。

我需要的是在我的项目中包含一个与 web 服务完全相同的结构的存根。在实时服务器上部署项目后，我将能够简单地更改 web.config 中的 URL 并将其指向真正的 Web 服务。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:56:58.677

获取 webservice wsdl，然后执行 Visual Studio 命令提示符并`wsdl.exe description.wsdl`

这会生成一个 cs 代理文件，您可以将其添加到您的解决方案中并使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:55:22.277

使用[SoapUI](http://www.soapui.org/Service-Mocking/concept.html)模拟开发服务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:57:01.330

您可以使用 wsdl.exe 生成您的客户端类，然后您可以将其添加到您的项目中，您需要访问可以运行它的 Windows 机器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T13:57:23.693

只需使用 Web 服务创建一个 Visual Studio Web 项目并将其添加到您的解决方案中。在此之后，您可以设置对 Web 项目的引用并使用它进行开发。

# php - 带有自定义表单的 Google CSE

> ID：14981575
> 
> 赞同：2
> 
> 时间：2013-02-20T13:54:03.210
> 
> 标签：php, html, forms, search-engine, google-custom-search

我的页面顶部有一个 GET 表单，但尚未配置。我所拥有的就是：

```
 <div class="top-search">
        <form  method="get" id="searchform" action="#">
            <div>
                <input type="text" value="Search..." name="s" id="s" onfocus="defaultInput(this)" onblur="clearInput(this)" />
                <input type="submit" id="searchsubmit" value=" " />
            </div>
        </form>
    </div> 
```

如何操纵它以使用 Google CSE？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T14:13:59.793

似乎没有人决定回答它，我自己发现了。

```
 <div class="top-search">
        <form id="searchform" action="http://www.google.com/cse">
            <div>
                <input type="hidden" name="cx" value="xxxx" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="text" value="" name="q" id="q" autocomplete="off" />
                <input type="submit" id="searchsubmit" name="sa" value=" " />
            </div>
        </form>

    </div> 
```

其中“xxxx”是您的搜索引擎唯一 ID，可在控制面板的“基本信息”页面上找到。

# c# - Unity MissingReferenceException when loading same scene for second time

> ID：14981579
> 
> 赞同：5
> 
> 时间：2013-02-20T13:54:16.950
> 
> 标签：c#, unity3d

I'm trying to create Arkanoid 3d game using Unity with C#. I've created simple Menu (Scene 0), where I can start my game, my main scene where actual game takes place(Scene 1) and Scoreboard (Scene 2), which is shown after losing all 3 balls Player has at start. After pressing any key i go back to Menu and can start game again. And this is where problem begins.

During second game after loosing 1st ball, my game goes crazy. I get loads of "MissingReferenceException"s like one below (but some linked to other objects (like GUIText's etc):

```
MissingReferenceException: The object of type 'Player' has been destroyed but
you are still trying to access it.
Your script should either check if it is null or you should not destroy the object.
Player.BallLost () (at Assets/Player/Player.cs:164)
GameEventManager.TriggerBallLost () (at Assets/Menagers/GameEventManager.cs:30)
Ball.Update () (at Assets/Ball/Ball.cs:47) 
```

I noticed loads of MissingReferenceExceptions that are casued by not assigning variables. But this feels kinda diffrent for me since it all works perfectly during "1st play". What can cause this problem? I cheked in inspector after launching game for the second game and all variables are assigned to objects.

I'm not sure if shoudl insert game code since it has grown rather big and is split into >10 scripts.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-24T19:19:35.010

就我而言，问题是两个静态事件。一个指定在方法被提出时调用（由另一个类创建），一个在此类中创建以通知其他类发生某事。

所以我只是在方法中添加了以下两个`OnDestroy()`：

`OtherClass.onNewX_event -= X_eventHandler;`

对于第一个（OtherClass 是引发 onNewX_event 并且当前类正在处理它的另一个类）

`onThisClassEvent = null;`

对于在此类中创建和引发的事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:42:08.113

我猜你用过`Application.loadLevel(xx)`。这是我发现的：

除非您使用静态变量，否则重新加载场景应重置所有变量，因为从逻辑上创建每个对象的新实例会将其值重置为其初始状态。

**另一方面，**静态变量不会被销毁，因为它们是类的一部分，而不是实例。**您必须手动重置这些。**

 ****DontDestroyOnLoad()**有点不同。它告诉 Unity 在加载新场景时不要破坏对象。所以这些对象也不会被重置，因为它们没有被销毁和重新创建。

重置它们的唯一方法是手动检查并将变量转回某个初始状态。如何做到这一点是您的选择。您可以保存所有初始值，也可以从新实例化的类中复制这些值。

作为补充，我想说如果您使用静态变量，将它们全部放在单例中或将它们更改为非静态变量可能更有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-20T15:33:29.640

在您的 GameEventManager 类中包含以下函数

```
public static void Nullify(){
    GameStart = null;
    GameOver = null;
    LevelWon = null; 
    GamePause = null; 
    GameResume = null; 
    BallLost = null; 
```

}

并在加载其他场景之前在 Menu(scene0) 中调用此函数 (GameEventManager.Nullify();) ；

```
GameEventManager.Nullify();
Application.LoadLevel("Scene1); 
```

希望这有帮助...... :-)**

# excel - 复制值，没有公式。优秀的VBA

> ID：14981582
> 
> 赞同：0
> 
> 时间：2013-02-20T13:54:26.310
> 
> 标签：excel, vba, copy, formulas

我正在编写代码以将工作表从一个工作簿（W1）复制到另一个工作簿（W2）。我知道该怎么做，但问题是 W2 中的复制表仍然有 W1 中的公式和引用，我不希望我只想要这些值。

这是我复制工作表的代码：

```
 Set W1 = Workbooks("REPORT1.xlsx")
    Set W2 = Workbooks("REPORT2.xlsx")
    W1.Sheets("TEST").Copy After:=W2.Sheets(wb.Sheets.Count) 
```

有什么想法吗。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:01:54.593

```
Set W1 = Workbooks("REPORT1.xlsx")
Set W2 = Workbooks("REPORT2.xlsx")
W1.Sheets("TEST").Copy After:=W2.Sheets(wb.Sheets.Count)
ActiveSheet.UsedRange.Value = ActiveSheet.UsedRange.Value 
```

# python - 使用 lambda 替换搜索模式

> ID：14981583
> 
> 赞同：0
> 
> 时间：2013-02-20T13:54:30.453
> 
> 标签：python, regex, python-3.x

我需要使用搜索替换模式之前和之后写入文件。我写了下面的代码。我在写入输出文件时使用了函数，它工作得很好。但是我有大约 20 种这样的替换模式，我觉得我写的代码不好，因为我需要为所有这些替换创建函数。你能告诉我有没有其他的方法来实现这个？

```
import re

Report_file = open("report.txt", "w")
st = '''<TimeLog>
<InTime='10Azx'>1056789</InTime>
<OutTime='14crg'>1056867</OutTime>
<PsTime='32lxn'>1056935</PsTime>
<ClrTime='09zvf'>1057689</ClrTime>
</TimeLog>'''

def tcnv(str):
     Report_file.write("Previous TS:  " + str + "\n\n")
     v1 = re.search(r"(?i)<clrtime='(\d+\w+)'>", str)
     val1 = v1.group(1)

     v2 = re.search(r"(?i)(<clrtime='(\d+\w+)'>(.*?)</clrtime>)", str)
     val2 = v2.group(3)

     soutval = "<Clzone><clnvl='" + val1 + "'>" + val2 + "</clnvl></Clzone>" 
     Report_file.write("New TS:  " + soutval + "\n")
     return soutval

st = re.sub(r"(?i)(<clrtime='(\d+\w+)'>(.*?)</clrtime>)", lambda m: tcnv(m.group(1)), st)
st = re.sub(r"(?i)<intime='(\d+\w+)'>(.*?)</intime>", "<Izone><Invl='\\1'>\\2</Invl></Izone>", st)
st = re.sub(r"(?i)<outtime='(\d+\w+)'>(.*?)</outtime>", "<Ozone><onvl='\\1'>\\2</onnvl></Ozone>", st)
st = re.sub(r"(?i)<pstime='(\d+\w+)'>(.*?)</pstime>", "<Pszone><psnvl='\\1'>\\2</psnvl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:57:10.633

我不明白你为什么将 re.IGNORECASE 标志放在 的形式下`(?i)`，所以我不使用下面的解决方案，并且根据你的示例，模式在必要的地方用大写字母编写

请注意，您应该使用该`with`语句打开文件，这样会好得多：

```
with open('filename.txt','rb') as f:

    ch = f.read() 
```

答案

```
 import re

 st = '''<InTime='10Azx'>1056789</InTime>
 <OutTime='14crg'>1056867</OutTime>
 <PsTime='32lxn'>1056935</PsTime>
 <ClrTime='09zvf'>1057689</ClrTime>
 '''

 d = dict(zip(('InTime','OutTime','PsTime','ClrTime'),

              (('Izone><Invl','/Invl></Izone'),
               ('Ozone><onvl','/onnvl></Ozone'),
               ('Pszone><psnvl','/psnvl></Pszone'),
               ('Clzone><clnvl','/clnvl></Clzone'))
              )
          )

 def ripl(ma,d=d):
      return "<{}='{}'>{}<{}>".format(d[ma.group(1)][0],
                                      ma.group(2),
                                      ma.group(3),
                                      d[ma.group(1)][1])

 st2 = re.sub(r"<(InTime|OutTime|PsTime|ClrTime)='(\d+\w+)'>(.*?)</\1>",
             ripl, st)

 print '%s\n\n%s\n' % (st,st2) 
```

# java - Current example of use of WSO2 Identity Server API

> ID：14981584
> 
> 赞同：1
> 
> 时间：2013-02-20T13:54:37.643
> 
> 标签：java, api, wso2, wso2is

I try to add new user through WSO2 IS API, but the most recent example of use is:
[WSO2 Identity Server managing users and roles through API](https://stackoverflow.com/questions/11155984/wso2-identity-server-managing-users-and-roles-through-api)

It works, but when I try to execute method for adding new user it breaks.

Is there more actual examples anywhere?

There is my method:

```
public void addUser()  throws Exception{
    String serviceEndPoint;
    UserAdminStub adminStub;

    serviceEndPoint = serverUrl + "UserAdmin";
    adminStub = new UserAdminStub(configContext, serviceEndPoint);
    ServiceClient client = adminStub._getServiceClient();
    Options option = client.getOptions();
    option.setManageSession(true);
    option.setProperty(HTTPConstants.COOKIE_STRING, authCookie);

    Map<String, String> claims = new HashMap<String, String>();
    ClaimValue[] claimValues = new ClaimValue[2];
    ClaimValue claimValue1 = new ClaimValue();
    claimValue1.setClaimURI("http://wso2.org/claims/givenname");
    claimValue1.setValue("John");
    claimValues[0] = claimValue1;

    adminStub.addUser("sso", "sso123", null, claimValues, "default");
} 
```

There is stack trace:

```
org.apache.axis2.AxisFault: unknown
at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
at org.apache.axis2.description.RobustOutOnlyAxisOperation$RobustOutOnlyOperationClient.handleResponse(RobustOutOnlyAxisOperation.java:91)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at org.wso2.carbon.user.mgt.stub.UserAdminStub.addUser(UserAdminStub.java:1298)
at org.wso2.carbon.user.mgt.sample.UserAdminClient.addUser(UserAdminClient.java:125)
at org.wso2.carbon.user.mgt.sample.SampleUserRoleMgtClient.main(SampleUserRoleMgtClient.java:111) 
```

And there is log from IS server:

```
java.lang.NullPointerException
    at org.wso2.carbon.user.mgt.UserRealmProxy.addUser(UserRealmProxy.java:255)
    at org.wso2.carbon.user.mgt.UserAdmin.addUser(UserAdmin.java:107)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:33:40.730

所以，我在 IS 源代码中找到了最新的示例，尝试了它并且它有效 =)

[http://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.5/products/is/4.0.0/modules/samples/](http://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.5/products/is/4.0.0/modules/samples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:45:23.413

好像您的 UseradminStub 似乎没有经过身份验证您按照以下方式进行操作。

```
 userAdminStub = new UserAdminStub(endPoint);
 AuthenticateStub.authenticateStub(sessionCookie, userAdminStub); 
```

谢谢你，达沙那。

# c# - Counting cells in a column with EPPlus

> ID：14981587
> 
> 赞同：1
> 
> 时间：2013-02-20T13:54:49.180
> 
> 标签：c#, linq, excel, epplus

I'm using EPPlus in a C# application for reading an Excel (.xlsx) file. What I need to do is counting how many cells in the column `I` contain the value `Value`.

For this I have defined the following query:

```
var query = (from worksheet.Cells["i:i"]
             where cell.Value.ToString().Equals("Value")
             select worksheet.Cells); 
```

Howwever this does not seem to work. I'm pretty sure that the `select` statement is wrong but I don't know what it should look like.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:01:00.807

`Cell.Text`应该工作，假设列`I`是第 9 列：

```
int count = worksheet.Cells[1, 9, worksheet.Dimension.End.Row, 9]
                     .Count(c => c.Text == "Value"); 
```

虽然它也应该与地址一起使用：

```
count = worksheet.Cells["i:i"].Count(c => c.Text == "Value"); 
```

# gnuplot - Determine min and max in gnuplot

> ID：14981589
> 
> 赞同：13
> 
> 时间：2013-02-20T13:54:55.940
> 
> 标签：gnuplot, max, min

I am new to gnuplot and i am trying to determine the mina nd max from a datafile and afterwards plot the data

So far I have managed to determine the min and max like this:

```
# Define two helper functions
ismin(x) = (x<min)?min=x:0
ismax(x) = (x>max)?max=x:0

# Initialise the 'global' vars
max=-1e38
min=1e38

plot "Data.txt" u 0:(ismin($3)*ismax($3)) 
```

The problem is that I am trying to plot the data using splot, and it's not working.

I am trying this:

```
splot \
'Data.txt' u 2:1:3 with pm3d t '',\ 
```

If I remove the part related to determining the min and max, the splot command works.

Any suggestions?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T15:47:17.853

查看`stats`命令：

```
stats 'datafile' using 3 
```

例如，将获取第三列（z 数据）的统计信息，并将它们存储在变量中（`STATS_min`并且`STATS_max`可能是您想要的）。要查看创建的所有变量，请键入

```
show variables all 
```

运行后`stats`。如果你有一个旧版本的 gnuplot 没有`stats`，你可以在不创建输出的情况下绘制文件，并且 gnuplot 会自动定义一些`DATA_`以 - 为前缀的变量，包括 min/max。该`stats`命令省去了在绘图之前定义空输出以获取数据的麻烦。

# c++ - priority_queue declaration and bool operator < declaration

> ID：14981590
> 
> 赞同：0
> 
> 时间：2013-02-20T13:54:56.157
> 
> 标签：c++, priority-queue

my problem is:

*   I have my program with 2 class plus the main;

*   I've declared a priority_queue inside a member function of a class;

*   I have to define the comparison and I think the code I should use is:

    ```
    // Determine priority (in the priority queue)
    bool operator < (const node & a, const node & b)
    {
      return a.getPriority() > b.getPriority();
    } 
    ```

Question: where Should I insert this piece of code? Could someone help me?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:14:09.723

看起来您`operator<`可能是对`node`. 问问自己：节点在逻辑上是否具有可比性？是否清楚比较节点（在priorty_queue 的上下文之外）应该比较它们的优先级？也许它应该比较他们的位置，或者他们可能包含的任何其他内容。如果您提供一个`operator<`，那么拥有其他 5 个比较运算符也是有意义的。如果不清楚`node < node`实际比较的是什么，请不要提供`operator<`for 节点。在这种情况下，最好为`priority_queue`...

```
struct NodeComparer
{
    bool operator()(const node& left, const node& right)
    {
        return left.GetPriority() > right.GetPriority();
    }
} 
```

...

```
std::priority_queue<node, std::vector<node>, NodeComparer> nodeQueue; 
```

这样您`priority_queue`就可以按需要工作，但不会向`node`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:57:23.170

在声明priority_queue 的地方应该可以看到这个操作符。由于优先级队列仅存在于成员中，因此我会将运算符的定义放在`.cpp`实现该方法的文件中给定方法定义的正上方。

# android - how to generate apk using ant

> ID：14981591
> 
> 赞同：2
> 
> 时间：2013-02-20T13:54:57.197
> 
> 标签：android, ant, apk

i want to know how can we generate apk file using ant script. i came to know that we can use "ant debug" command to do that.but when i am running this command it is returning error that " Target "debug" does not exist in the project". i am using ant1.7.0.is it the issue?i have tried given below code to generate apk.

```
 <target depends="build-subprojects,build-project" name="build">
    <jar destfile="bin/test.apk" basedir="bin/classes" >
  <manifest>
    <attribute name="Main-Class" value="test.Main" />
  </manifest>
</jar>
    </target> 
```

but the generated apk is different from auto generated apk while build the app using eclipse.Please guide me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:07:34.000

> 但是当我运行此命令时，它返回错误“项目中不存在目标”调试“

然后你没有正确创建你的 Android 项目，或者你修改了你的`build.xml`文件，或者其他东西被破坏了。

作为测试，我刚刚从我`/tmp`的 Linux 目录中运行了以下命令：

```
android create project --target android-17 --path Foo --package com.foo --activity Foo 
```

然后我切换到`Foo`目录并运行`ant debug`. 该应用程序已编译，并且在我的`bin/`目录中是`Foo-debug.apk`.

如果您没有得到这种结果，请删除您的`build.xml`文件并运行`android update project --path ...`（项目路径在哪里`...`）来创建一个新`build.xml`文件。

# mysql - 如何组合两个sql查询？[过滤器用]

> ID：14981598
> 
> 赞同：0
> 
> 时间：2013-02-20T13:55:13.677
> 
> 标签：mysql, sql

我有桌子

**标签**

```
id INT A_I
id_user INT
id_label INT 
```

**标签数据**

```
id INT A_I
label VARCHAR(10)
name VARCHAR(30) 
```

**任务**

```
id INT A_I
name VARCHAR(30)
value VARCHAR(1000) 
```

我想在名为**tasks的表中添加条目，我想在名为****labels**的表中添加 3-4 个条目。我怎么能做到这一点，我可以在一个查询中做到吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:57:37.377

如果您直接通过查询执行此操作，那么您将需要对插入到表中的每一行进行一个查询。所以这将是一个 Insert to`Tasks`和 3-4 insert to `labels`。

[有关插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)，请参阅 mysql 手册。

# batch-file - 批处理脚本比较

> ID：14981599
> 
> 赞同：1
> 
> 时间：2013-02-20T13:55:13.710
> 
> 标签：batch-file

有一个基本的批处理脚本，它根据脚本中硬编码的内容更新带有用户 MAC 的 postgreSQL 表。当我运行它时，它认为两个 MAC 地址都不同，或者我的语法不起作用。我试过回显变量，它们看起来一样。

我哪里错了？

谢谢

```
@echo off

set mac=00:00:00:00
echo %mac%
set /p mac_address= Please enter the MAC address 
echo %mac_address%
if mac==mac_address (

set /p hostname= Please enter the server ip address 

echo "update license set lldld" >> run
SET PGPASSWORD=xxxxxxxxxx
postgresql\bin\psql -U postgres -h %hostname% -p 5434 -d jasperserver -a -f run
del run

) else (
Echo "Error with MAC code"
pause

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:04:52.567

该表达式`if mac==mac_address`比较文本`mac`而`mac_address`不是变量的内容。

您（几乎）总是需要用百分比或感叹号来扩展变量。

```
if "%mac%"=="%mac_address%" echo Same 
```

# java-me - 使用 Bouncy Castle 库会导致输出 .jar 文件大小大幅增加

> ID：14981606
> 
> 赞同：2
> 
> 时间：2013-02-20T13:55:41.250
> 
> 标签：java-me, jar, proguard, bouncycastle, filesize

我正在开发一个使用 Bouncy Castle J2ME 库的 Java ME/J2ME 项目。然而，当将它添加到我的项目时，我注意到生成的 .jar 文件大小增加了 40 倍（50kB 与 2000kB）。除了将 ProGuard 的混淆器设置设置为 9 级（最大）之外，还有其他方法可以最大限度地减少文件大小的增加吗？

我只使用了一些库的实际类，即：

```
import org.bouncycastle.util.encoders.Hex;
import org.bouncycastle.crypto.Digest;
import org.bouncycastle.crypto.macs.HMac;
import org.bouncycastle.crypto.params.*;
import org.bouncycastle.crypto.digests.SHA256Digest; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:13:19.543

现在这是一个非常棘手的问题！

首先，请您解压缩您的 jar 文件并查看 Proguard 是否混淆了 BouncyCastle 的类文件？由于您已将 bouncycastle jar 文件作为库包含在内，并且其中有类文件，所以我假设 Proguard 没有混淆这些占用大量空间的类文件。

无论如何，我刚刚下载了 bouncy castle jar 文件，可以看到它完全由类文件组成，因此没有额外的文件我们可以删除并删除以减少生成的 jar 文件。

现在，如果您真的想减少，请继续阅读我将提出两种解决方案，它们都是有风险的：

解决方案 1 **（不推荐）**：

1.  这很简单，但我不建议这样做，它可能会导致运行时异常或错误：解压缩 bouncycastle jar 文件。然后导航到目录 src\org\bouncycastle 正如您所提到的，您仅使用以下这些包 org.bouncycastle.util.* org.bouncycastle.crypto.*

2.  现在在这里我将假设这两个包中的源代码不依赖于其他包中的源代码/类文件。

3.  现在删除其他目录，即“asn1”、“bcpg”。在这个阶段，我不会成为屠夫并删除所有内容，而是会删除一对，然后如果有效，然后再回来删除其他人。

4.  现在我们将重新生成 jar 文件。删除目录后，现在返回目录的根目录，您将在其中看到其他目录，例如 META-INF org utils

这是您需要正确执行此操作的重要步骤，否则 jar 文件将无法正常工作。选择根目录下的所有目录然后右键->发送到zip

创建 zip 文件后，将其重命名为 *.jar 而不是 *.zip

1.  jar 文件的大小会减少，现在将这个 jar 文件包含在您的项目中。看看它是否编译并执行。然后检查您的功能是否在运行时正常工作。如果一切顺利，那么你就完成了。现在您可以重复上述步骤以删除更多目录以减小 jar 文件的大小。

解决方案2：

1.  下载您正在使用的 bouncycastle jar 文件的源代码。
2.  您必须从项目中删除 jar 文件。
3.  将源代码包含到项目中。构建项目，看看你是否没有得到任何编译错误。在这个阶段你必须确定你没有使用原始的 jar 文件，而只使用了代码。
4.  现在开始删除包含您不需要的代码的包。继续重建不会出现编译错误的项目，如果出现编译错误，那么您不想删除该包并继续删除其他包。
5.  完成此操作后，构建项目并生成 jar 文件。
6.  通过这种方式，Proguard 将混淆充气城堡的代码，并且由于删除了大部分不需要的代码，您应该会大大减少生成的 jar 文件。

# jquery - Icon images not appearing in jQuery mobile

> ID：14981608
> 
> 赞同：2
> 
> 时间：2013-02-20T13:55:43.930
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

I have created an ASP.NET MVC website and it is hosted off my existing site (www.joebooth-consulting.com/wibs). The mobile component relies on jQuery Mobile and uses the default MVC setup. The CSS files are in the content folder and the images are in a folder called images within the content folder. The icons-xx files are located there.

When I run the site in a simulator, the site looks and runs properly. However, when I load the site on my iPhone, it works properly, but the jQuery Mobile icon images do not appear, I see blank circles. I've copied the icons-xx files to different image folders, but cannot get the icons to show up. I've look in the jQuery Mobile CSS files, and the reference is `URL(images\icons-18-images.jpg)`.

Anyone experience similar problems?

**NEW:** I moved the .jpg files to scripts\images as suggested, but no luck. Even stranger, I published the jQuery mobile version to the main site (rather than just the mobile) and I get the jQuery mobile menu and images when viewed in desktop Chrome or desktop Safari

**More Info...** When I comment out my theme roller custom colors, the images come back... More research ahead...

# xcode - Twilio + Apple o mach error

> ID：14981610
> 
> 赞同：0
> 
> 时间：2013-02-20T13:55:48.480
> 
> 标签：xcode, twilio

When I try to run the code I get an `Apple O-Mach Linker Error`. I'm running up to date XCode 4.6, updated yesterday. I'm running 10.8.2 and here is the error code I get.

A few weeks ago I wasn't getting this issue so I don't know if it's updated SDK from Twilio, the XCode update or what. I've also got one of the library's (`libTwilioClient.a`) thats red in the frameworks section (This is my first iOS and XCode experience). I've tried linking it and then I get 68 errors about other stuff throughout the program not connecting.

Any help? Oh, BTW, I'm just using the HelloMonkey Example from Twilio's SDK, I haven't changed a single thing except the line pointing to my php server for authentication. Also, I've check for any `.m` in the headers and there are none. I was hoping that it would be smooth sailing since it's coming from Twilio and it's the "Get Started Quick"... so much for that :/

```
Ld /Users/Animal/Library/Developer/Xcode/DerivedData/HelloMonkey-
acqupeuamziuogblpxusdjhityyf/Build/Products/Debug-iphonesimulator/HelloMonkey.app
/HelloMonkey normal i386
    cd "/Users/Animal/Downloads/TwilioClient-1.1.1-dbefc0b/Quick Start/HelloMonkey
"
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.2
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/
iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/
Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.
xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents
/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk
 -L/Users/Animal/Library/Developer/Xcode/DerivedData/HelloMonkey-acqupeuamziuo
gblpxusdjhityyf/Build/Products/Debug-iphonesimulator "-L/Users/Animal/Downloads/
TwilioClient-1.1.1-dbefc0b/Quick Start/HelloMonkey/../.." -F/Users/Animal/
Library/Developer/Xcode/DerivedData/HelloMonkey-acqupeuamziuogblpxusdjhityyf/
Build/Products/Debug-iphonesimulator -filelist /Users/Animal/Library/Developer/
Xcode/DerivedData/HelloMonkey-acqupeuamziuogblpxusdjhityyf/Build/Intermediates/
HelloMonkey.build/Debug-iphonesimulator/HelloMonkey.build/Objects-normal/i386/
HelloMonkey.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -ObjC -all_load
 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=4.2
 -framework AVFoundation -framework Foundation -framework UIKit -framework 
CoreGraphics -framework AudioToolbox -framework CFNetwork -framework 
SystemConfiguration -lTwilioClient -o /Users/Animal/Library/Developer/Xcode/
DerivedData/HelloMonkey-acqupeuamziuogblpxusdjhityyf/Build/Products/
Debug-iphonesimulator/HelloMonkey.app/HelloMonkey

ld: library not found for -lTwilioClient
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:33:24.410

您必须添加其他两个库**libcrypto.a**和**libssl.a**以及**libTwilioClient.a**，然后清理并构建项目。你已准备好出发。您可以在解压缩的 Twilio 包的“库”文件夹中找到这些库。希望这会有所帮助。

# python - Python Problems with if statement

> ID：14981614
> 
> 赞同：0
> 
> 时间：2013-02-20T13:56:01.803
> 
> 标签：python, conditional, if-statement

I have a problem with this piece of code. Somehow if we put in `'register'` or `'Register'` as input, it goes to the register function, but after it prints the else: `Aswell ("Bad input")`; I have made more of these but cant find the fault in this one.

Please help me. Thanks! Here's my code:

```
def Boot(): 
        print "Type 'Login' + accountname to login."

        x = raw_input("> ")
        Name = x.split()

        if x == "Register" or x == "register":
            print "Registerbla"

        if Name[0] == "Login" or Name[0] == "login":
            print "Loginblabla"
        else:
            print "Bad input" 
```

So what I see after input is: Registerbla Bad input

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:59:31.443

您缺少`else`if 语句的部分。没有它，您实际上会检查两个单独的 if 语句：注册部分和登录/错误输入部分。相反，您应该使用`elif`：

```
 if x == "Register" or x == "register":
        print "Registerbla"
    elif Name[0] == "Login" or Name[0] == "login":
        print "Loginblabla"
    else:
        print "Bad input" 
```

另外，考虑更改您的语句以检查小写，例如

```
if x.lower() == "register":
    # Now any capitalized variant of register will work! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:59:01.947

当您输入`register`或`Register`

`if Name[0] == "Login" or Name[0] == "login":`

评估为假，打印`Bad input`

# python - Python中的3RSSH平滑

> ID：14981615
> 
> 赞同：5
> 
> 时间：2013-02-20T13:56:01.900
> 
> 标签：python, excel, numpy, scipy, smoothing

我正在寻找运行 Python 的中值平滑实现。特别是 3RSSH。

有一个可以正常工作的 Excel 实现： [http ://www.quantdec.com/Excel/smoothing.htm](http://www.quantdec.com/Excel/smoothing.htm)

另外，R的smooth函数有3RSSH：[http ://exploratorydataanalysis.blogspot.com/2009/03/smoothing-on-r.html](http://exploratorydataanalysis.blogspot.com/2009/03/smoothing-on-r.html)

但我想要一个 Python 版本，最好使用 numpy/scipy 并且找不到。到目前为止，我在谷歌搜索方面没有运气。

有没有实现这种平滑功能的库？还是我注定要写一个？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:48:31.760

不要以为我看到了 3RSSH 实现，但您可以尝试使用[`scipy.signal`](http://docs.scipy.org/doc/scipy/reference/signal.html)来尝试制作一个。

也许这些对您的应用程序来说已经足够了？

[`scipy.signal.medfilt`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.medfilt.html#scipy.signal.medfilt)

[`scipy.signal.medfilt2d`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.medfilt2d.html#scipy.signal.medfilt2d)

[`scipy.ndimage.filters.median_filter`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.median_filter.html)

# java - 使用 xml 在 Eclipse 中隐藏透视图

> ID：14981623
> 
> 赞同：1
> 
> 时间：2013-02-20T13:56:44.563
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-plugin

我是整个 Eclipse RCP 和 PDE 的新手，所以欢迎任何帮助！

基本上我创建了一个新的透视图，主要在我的plugin.xml 中使用xml 透视图和perspectiveExtension。它通常工作正常，但我只需要在我们的产品化应用程序中激活它，并在我们导出为插件时“关闭它”......

这可以通过 xml 实现吗？还是有其他方法可以做到这一点？

我试过使用活动/活动模式绑定，但这似乎不起作用，即：

```
 <extension point="org.eclipse.ui.activities">
   <activity id="com.x.y.z.disable"
           name="HidePerspective">
      <enabledWhen>
         <with variable="true">
            <equals value="false">
            </equals>
         </with>
      </enabledWhen>
   </activity>
   <activityPatternBinding activityId="com.x.y.z.disable"
                          pattern="com.x.y.z.MyPerspective">
   </activityPatternBinding>
   </extension> 
```

如果上述工作正常 - 通过将 value="false" 更改为 value="true" 来打开/关闭透视图，那么我将在属性测试器中替换 org.eclipse.core.runtime.product。任何人都知道这是否是一种有效的方法或为什么上述方法不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:46:28.923

如果您已在 plugin.xml 中定义了您的透视图，则在不需要时尝试在 Java 代码中将其删除（请参阅此博客文章如何操作[http://commercialjavaproducts.blogspot.com/2011/07/remove -unwanted-perspectives-from-your.html](http://commercialjavaproducts.blogspot.com/2011/07/remove-unwanted-perspectives-from-your.html)）。

此外，您可能想看看 Eclipse Fragments，我认为它可以以更优雅的方式解决您的问题。

或者尝试创建这样的插件层次结构，您不依赖于具有透视图的插件，并且只能导出您实际需要的那些插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:50:09.160

您在绑定中的模式是错误的。有两种方法可以使用这些模式：要么是为了匹配多个 ID，要么应该有一些通配符。或者要完全匹配一个 ID，那么它需要采用“plugin.id/perspective.id”的形式，并且属性“isEqualityPattern”应该设置为 true。

查看[http://www.vogella.com/blog/2009/07/13/eclipse-activities/中的示例代码](http://www.vogella.com/blog/2009/07/13/eclipse-activities/)

另一个重点：虽然活动绑定可以隐藏 UI 元素，但如果工作台需要这些UI 元素，它们将*自动再次显示。*因此，如果您的工作区包含 Java 项目，Eclipse*将*显示 Java UI 元素，即使它们之前通过模式绑定被隐藏。因此，您可能希望在尝试绑定时尝试清理工作区（因为工作区可能处于您的绑定已被忽略的状态）。

# ios - iPhone 型号的条件。例如，如果 > iPhone 4，如果 > iPhone 3GS

> ID：14981625
> 
> 赞同：0
> 
> 时间：2013-02-20T13:56:46.263
> 
> 标签：ios, objective-c, uikit

我怎样才能像这样**根据 iPhone 的型号**（不是 iOS 版本）制作条件案例？

```
int myResolution = 10;

if ( model >= iPhone3GS ) {
    myResolution = 100;
}

if ( model >= iPhone4 ) {
    myResolution = 120;
}

if ( model >= iPhone5 ) {
    myResolution = 200;
} 
```

基本上，我可以快速设置一些自定义 OpenGL 绘图的分辨率以手动调整性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:07:07.400

在这里查看评论：http: [//www.cocos2d-iphone.org/forum/topic/8107](http://www.cocos2d-iphone.org/forum/topic/8107)

他们使用以下方法实现了一个 DeviceDetection 类来执行此任务：

```
NSString *model= [[UIDevice currentDevice] model];
struct utsname u;
uname(&u);
NSLog(@"%@",u.machine); 
```

# c#-4.0 - NetDataContractSerializer 产生无效的 XML

> ID：14981626
> 
> 赞同：0
> 
> 时间：2013-02-20T13:56:48.197
> 
> 标签：c#-4.0, serialization, xml-serialization, netdatacontractserializer

我的 NetDataContractSerializer 似乎很困惑： XML 的结尾出现了两次：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="1" 

[...]
        <d2p1:anyType i:nil="true" />
      </d2p1:_items>
      <d2p1:_size>2</d2p1:_size>
      <d2p1:_version>2</d2p1:_version>
    </d2p1:items>
  </ProjectParts>
  <ProjectPath z:Id="31">D:\t10\</ProjectPath>
</Project>ze>
              <d2p1:_version>3</d2p1:_version>
            </d2p1:items>
            <d2p1:_monitor xmlns:d7p1="http://schemas.datacontract.org/2004/07/System.Collections.ObjectModel" z:Id="33">
              <d7p1:_busyCount>0</d7p1:_busyCount>
            </d2p1:_monitor>
          </Elements>
          <Project z:Ref="1" i:nil="true" xmlns="http://schemas.datacontract.org/2004/07/Modules.WorkspaceManager.Types" />
        </d2p1:anyType>
        <d2p1:anyType i:nil="true" />
        <d2p1:anyType i:nil="true" />
      </d2p1:_items>
      <d2p1:_size>2</d2p1:_size>
      <d2p1:_version>2</d2p1:_version>
    </d2p1:items>
  </ProjectParts>
  <ProjectPath z:Id="34">D:\t10\</ProjectPath>
</Project> 
```

正如你所看到的，有一些严重的口吃。它偶尔会发生，我无法重现该错误。有任何想法吗？可能是由于在写入文件时在 VS 中打开文件造成的吗？

我像这样序列化我的对象：

```
private void SerializeToFile(object objectToSerialize)
    {
        Stream stream = null;

        try
        {
            stream = File.Open(_fileName, FileMode.OpenOrCreate, FileAccess.Write);
            using (var writer = XmlWriter.Create(stream, new XmlWriterSettings { Indent = true }))
            {
                NetDataContractSerializer serializer = new NetDataContractSerializer();
                serializer.WriteObject(writer, objectToSerialize);
            }
        }

        finally
        {
            if (stream != null) stream.Close();
        }
    } 
```

序列化的类如下所示：

```
[DataContract(IsReference = true)]
public class Project : IProject
{
    [DataMember] public string ProjectPath { get; set; }
    [DataMember] public string ProjectName { get; set; }
    [DataMember] public Collection<IProjectPart> ProjectParts { get; set; }

    public T GetPart<T>() where T : IProjectPart
    {
        return ProjectParts.OfType<T>().First();
    }

    public void RegisterPart<T>(T part) where T : IProjectPart
    {
        if (ProjectParts.Any(p => p.GetType().IsInstanceOfType(part))) throw new InvalidOperationException("Part already registered.");
        ProjectParts.Add(part);
        part.Project = this;
    }

    public void Load()
    {
        foreach (var projectPart in ProjectParts)
        {
            projectPart.Load();
        }
    }

    public void Unload()
    {
        foreach (var projectPart in ProjectParts)
        {
            projectPart.Unload();
        }
    }

    public void Save()
    {
        foreach (var projectPart in ProjectParts)
        {
            projectPart.Save();
        }
    }

    public Project()
    {
        ProjectParts = new Collection<IProjectPart>();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:39:19.023

问题很简单 - 当您一遍又一遍地序列化对象时，您会使用不同大小的`IProjectPart`集合。该`File.Open`方法不会从以前的内容中清除文件，因此假设以下步骤：

i) 用两个`IProjectPart`实例序列化对象 - 假设它需要 10 行 xml 文件

ii) 用`IProjectPart`集合中的一个实例再次序列化对象 - 这次需要 8 行 xml 文件

iii) 第 9 行和第 10 行将填充旧的 xml 数据，因为它们在序列化尝试之间没有被清除 - 所以有一些重复的、看起来像垃圾的 xml 数据。

亲自尝试一下，您将确切了解这些多个标签是如何生成的。

注意：第 8 行和第 10 行是我的实现的近似值

注意 2：我建议`using`对序列化方法中的流使用语句（对于所有 IDisposable 对象）：

```
private void SerializeToFile(object objectToSerialize)
{
    using(var stream = File.Open(_fileName, FileMode.OpenOrCreate, FileAccess.Write))
    {
        using (var writer = XmlWriter.Create(stream, new XmlWriterSettings { Indent = true }))
        {
            NetDataContractSerializer serializer = new NetDataContractSerializer();
            serializer.WriteObject(writer, objectToSerialize);
        }
    }
} 
```

# c++ - 带有托管对象的 C++ 向量

> ID：14981633
> 
> 赞同：4
> 
> 时间：2013-02-20T13:57:03.470
> 
> 标签：c++, managed

您好，我需要用托管对象填充向量（或其他一些类似的数据结构）。

通常我可以写：

```
std::vector<Object> vect; 
```

但我不能使用：

```
std::vector<Object^> vect; 
```

有人可以解释一下，如何更改声明或建议其他结构而不是向量。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:50:31.913

使用 .NET 通用列表类：http: [//msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

根据 user1237747 的评论要求，列出来自同一 WEB 页面的枚举示例：

```
#include "stdafx.h"
using namespace System;
using namespace System::Collections::Generic;

int main(array<System::String ^> ^args)
{
    List<String^>^ dinosaurs = gcnew List<String^>();

    dinosaurs->Add("Tyrannosaurus");
    dinosaurs->Add("Amargasaurus");

    for each(String^ dinosaur in dinosaurs )
    {
        Console::WriteLine(dinosaur);
    }

    return 0;
} 
```

将 String^ 替换为您需要的类型。您还可以使用 [] 运算符按索引访问 List 元素。

通常，如果不是绝对必要的话，请避免混合托管类型和非托管类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-20T18:04:08.110

是的，托管类型有 stl 数据结构。下面是一个使用向量的示例（根据您的要求）。

```
#include <cliext/vector>

cliext::vector<Object^> vect; 
```

此向量类型的文档在[这里](https://msdn.microsoft.com/en-us/library/bb386284.aspx)

# ruby-on-rails-3 - 如何按两列分组并提供分组项目的总和

> ID：14981634
> 
> 赞同：13
> 
> 时间：2013-02-20T13:57:06.950
> 
> 标签：ruby-on-rails-3

我正在构建一个库存数据库，它有两列我想按（制造商和型号）分组。我将如何按这些列分组并提供项目组的总和？

例如：

```
Qty  Manufacturer  Model
1    Sony          MF-2002
1    Sony          MF-2002
1    Planar        PL2410W
1    Planar        PL2410W
1    Planar        PL2410W
1    Planar        PL3610D
1    Planar        PL3610D 
```

结果：

```
Qty  Manufacturer  Model
2    Sony          MF-2002
3    Planar        PL2410W
2    Planar        PL3610D 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T16:44:36.347

假设一个`Item`模型，您可以将一个数组传递给该`group`方法，如下所示：

```
Item.group(["manufacturer", "model"]).sum(:qty)
# => {["Planar", "PL2410W"]=>3, ["Planar", "PL3610D"]=>2, ["Sony", "MF-2002"]=>2} 
```

# java - 执行 shell 脚本时出现 ClassNotFound 异常

> ID：14981636
> 
> 赞同：0
> 
> 时间：2013-02-20T13:57:12.707
> 
> 标签：java, shell, unix, jar

我想写一个shell脚本，它应该调用罐子里的类。`ClassNotFound Exception`当一个 jar 的类文件调用另一个 jar 的类文件时，我得到了一个。

这是我尝试过的：

```
cd /home/appteam/encrypt/REPORT/CRYPTO4REPORT/
echo $1
echo $2
pwd

set JAVA_HOME = /App/jdk1.6.0_25/bin;

set path= /App/jdk1.6.0_25/bin;

java -classpath .:jars/log4j-1.2.8.jar:jars/xmlsec-1.4.2.jar:jars/CryptoUtils.jar:jars/bcprov-jdk15-146.jar:jars/commons-logging.jar:jars/Utils.jar:jars/Crypto.jar com.crypto.pki.PkiCrypto 1>> files/log/SuccessLog.log 2>>files/log/ErrorLog.log "ILI_RPT_TRV_07022013_001.enc" "crypto4decrypt.properties" DECRYPT 
```

从上面的代码中，我调用了 Crypto.jar 中的 com.crypto.pki.PkiCrypto 类。形成调用 Utils.jar 中的 FileUtil 类的 PriCrypto 类。

`ClassNotFoundException`当 PriCrypto 类文件使用 FileUtil 类时，我收到一个。

我得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/common/utils/FileUtil
       at com.crypto.pki.PkiCrypto.processFile(PkiCrypto.java:75)
       at com.crypto.pki.PkiCrypto.main(PkiCrypto.java:31)
Caused by: java.lang.ClassNotFoundException: com.common.utils.FileUtil
       at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
       at java.security.AccessController.doPrivileged(Native Method)
       at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
       at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
       at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
       at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
       ... 2 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T05:46:04.683

在运行程序时检查 Utils.jar 是否在类路径中，并验证 utils.jar 是否包含 com.common.utils.FileUtil 类

# grails-orm - 在 mongodb 中保存大量条目的脚本

> ID：14981639
> 
> 赞同：0
> 
> 时间：2013-02-20T13:57:19.603
> 
> 标签：grails-orm, mongodb-java

我有一个 mongodb 数据库服务器。我想让它在特定集合中填充大量条目，比如说一个名为“user”的集合。我想知道是否有一个脚本可以在我的 mongodb 数据库中从 linux 终端或相同的 Java 代码中保存大量随机创建的条目。我有一个在“用户”集合中创建 10,000 个条目的脚本：

```
> for(i=0;i<10000;i++){db.user.insert({username:'ashok'+i,password:'123'});} 
```

此查询将用户名创建为 ashok1 、 ashok2 ......我想要一个可以创建随机用户名的脚本。如果我能在 grails 中完成这件事会更好。

# asp.net - UrlRewrite.net 可选/和可选的附加 url 部分

> ID：14981643
> 
> 赞同：1
> 
> 时间：2013-02-20T13:57:26.437
> 
> 标签：asp.net, url-rewriting, urlrewriter.net

我正在编写 URL rewriter.net 规则，但缺少一件事。

这是规则，而且效果很好。

但我希望它也适用于以下情况：

/webshop/products/(.+)/(.+) （没有尾部斜杠）

/webshop/products/(.+)/(.+)/test/bla/bla/ （在我要查找的部分之后还有一些 url 部分）

涵盖这些情况的理想/最灵活的规则是什么？

# php - 进行页面查找时如何保留表单数据

> ID：14981646
> 
> 赞同：0
> 
> 时间：2013-02-20T13:57:49.447
> 
> 标签：php, session

我正在尝试进行表格查找。我填写字段，然后单击组合框进行查找。当我返回页面时，姓氏字段变为空白。当我返回页面时，我需要一种保留字段数据的方法。

```
<?php /*?>
<?php if(isset($_POST['First'])) { echo htmlentities ($_POST['First']); }?>
<?php */?>

<tr valign="baseline">
    <td nowrap="nowrap" align="right">Last Name:</td>
    <td><input type="text" name="Last_Name" id="Last_Name" autofocus value="" placeholder="last name" size="32" /></td>
</tr>
<tr valign="baseline">
    <td nowrap="nowrap" align="right">City:</td>
    <td>
        <select name="LookupCity" id="LookupCity">
            <option value="" 
                <?php if (!(strcmp("", $_GET['City']))) {echo "selected=\"selected\"";} ?>>
                Select from menu
            </option>
            <?php do { ?>
            <option value="<?php echo $row_fmCity['City']?>"<?php if (!(strcmp($row_fmCity['City'], $_GET['City']))) {echo "selected=\"selected\"";} ?>><?php echo $row_fmCity['City']?>
            </option>
            <?php
                } while ($row_fmCity = mysql_fetch_assoc($fmCity));
                $rows = mysql_num_rows($fmCity);
                if($rows > 0) {
                    mysql_data_seek($fmCity, 0);
                    $row_fmCity = mysql_fetch_assoc($fmCity); 
                }
            ?>
        </select>
        <a href="ZipLookup.php?Last Name=<?php echo $Last_Name ?>">select</a>
    </td> 
```

请举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:59:44.330

只需设置控件的“值”属性。

# python - 如何在 matplotlib 中反映矩阵？

> ID：14981648
> 
> 赞同：3
> 
> 时间：2013-02-20T13:57:52.047
> 
> 标签：python, matrix, numpy, matplotlib

![在此处输入图像描述](../Images/5a8f67b3cc46b6dba3210eb61c5aeb5a.png)

我在 matplotlib 中创建了一个矩阵。如您所见，它仅覆盖矩阵的一半。无论如何，我可以将点反射到矩阵的另一侧，这样我就可以填充整个矩阵了吗？

使用生成`imshow`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:03:10.667

虽然 Mr.E. 的回答（几乎）是正确的，但我觉得它需要一个完整的最小工作示例。诀窍是情节`A + A.T`。但是，当你这样做时，你会加倍计算对角线，因此你必须减去那部分。

```
import numpy as np
import pylab as plt

# Create a sample matrix like your image
A = np.random.random((100,100)) * .52
A = np.rint(A)
for idx in np.ndindex(A.shape):
    if idx[0]>idx[1]: A[idx] = 0

plt.subplot(1,2,1)
plt.imshow(A,interpolation='none')

# Make a new matrix B = A + A.T - diagonal(A)
B = A + A.T - np.diag(np.diag(A))
plt.subplot(1,2,2)
plt.imshow(B,interpolation='none')
plt.tight_layout()
plt.show() 
```

![在此处输入图像描述](../Images/9f9785e3762825e1c760f60082832346.png)

# asp.net-mvc - Telerik 网格未更新

> ID：14981651
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:09.130
> 
> 标签：asp.net-mvc, telerik-grid, telerik-mvc

我正在尝试使用 Ajax 绑定创建主/详细 Telerik MVC 网格。当我选择要更新的明细行时，单击“编辑”，编辑值，然后单击“更新”，客户端不会更新该值。我在调试器中看到调用 TryUpdateModel 时模型没有更新。这是视图：

```
@(Html.Telerik().Grid<FeeSrcMstrDteViewModel>()
.Name("FeeSourceConfirmMasterGrid")
.Columns(columns =>
    {
        columns.Bound(m => m.FEE_SRC_NME).Width(65).Title(@FeeBuilderResource.FeeSourceName);
        columns.Bound(m => m.PUBLISHING_ENTITY_NME).Width(45).Title(@FeeBuilderResource.PublishingEntity);
        columns.Bound(m => m.FEE_SRC_SRVC_CATEGORY_NME).Width(55).Title(@FeeBuilderResource.ServiceTypeCategory);
        columns.Bound(m => m.FEE_SRC_PUBLISHED_DTE).Width(45).Title(@FeeBuilderResource.PublishedDate).Format("{0:d}");
        columns.Bound(m => m.YEAR).Width(30).Title(@FeeBuilderResource.Year);
        if (Model.FeeSourceMasterDate.GEO_LOC_ID == 1 || Model.FeeSourceMasterDate.GEO_LOC_ID == 4)
        {
            columns.Bound(m => m.STATE).Width(50).Title("State or carrier locality");
        }
        else
        {
            columns.Bound(m => m.CARRLOC).Width(50).Title("State or carrier locality");
        }
        //columns.Command(commands => commands.Custom("ExportToExcel").Text("Export to Excel")
            //.DataRouteValues(route => route.Add(m => m.FeeSourceMasterDate.FEE_SRC_MSTR_ID).RouteKey("FEE_SRC_MSTR_ID"))
            //.Ajax(false).Action("_ConfirmMasterExportXlsAjax", "FeeSrcFlatRate", new { feeSourceServiceMasterDateId = "<#= FEE_SRC_MSTR_ID #>" }))
            //.HtmlAttributes(new { style = "text-align: center" }).Width(50).Title(@FeeBuilderResource.Actions);
    })
    //.ClientEvents(events => events.OnSave("FeeSourceTestGrid_OnSave"))
    .DetailView(details => details.ClientTemplate(
        Html.Telerik().Grid<FeeSourceFlatRateCommentsViewModel>()
        .Name("FeeSourceHome_<#= FEE_SRC_MSTR_ID #>")
        .DataKeys(keys => keys.Add(m => m.CommentId))
        .DataBinding(dataBinding => dataBinding.Ajax()
            .Select("_GetFeeSourceDetailDataAjax", "FeeSrcFlatRate")
            .Update("_UpdateFeeSourceDetailDataAjax", "FeeSrcFlatRate")
            )
        .Columns(columns =>
        {
            columns.Bound(m => m.CommentId).Width(200).Hidden();
            columns.Bound(m => m.FeeSourceDescription).Width(200).Title("Fee source description");
            columns.Bound(m => m.FeeSourceComments).Width(200).Title("Fee source comments");
            columns.Command(commands =>
            {
                commands.Edit().ButtonType(GridButtonType.ImageAndText);
            }).Width(75);

        })
        .DataBinding(dataBinding => dataBinding.Ajax()
            .Select("_GetFeeSourceDetailDataAjax", "FeeSrcFlatRate", new { id = "<#= FEE_SRC_DTE_ID #>" }))
            .Editable(editing => editing.Mode(GridEditMode.InLine).InsertRowPosition(GridInsertRowPosition.Top))
            .Footer(false)
            .ToHtmlString()
            ))
.DataBinding(dataBinding => dataBinding.Ajax()
    .Select("_GetFeeSourceDataAjax", "FeeSrcFlatRate"))
    .Pageable(paging => paging.PageSize(20))
    //.Scrollable(scrolling => scrolling.Height(580))
    .Sortable()
) 
```

select 方法很好用，但 update 方法不行。当我在控制器中调用 TryUpdateModel 时，我希望模型能够更新，但我没有看到。这是我的控制器代码：

```
[HttpPost]
[GridAction]
public ActionResult _UpdateFeeSourceDetailDataAjax(int id)
{
    FeeSourceFlatRateViewModel modelTest = new FeeSourceFlatRateViewModel();           

    List<FeeSourceFlatRateCommentsViewModel> commentsList = new 

List<FeeSourceFlatRateCommentsViewModel>();

        // get the model by id
        IFeeSourceMstrRepository repo = new FeeSourceMstrRepository();

        IList<FeeSrcMstrDteViewModel> modelTestList = repo.GetFeeSrcMstrDteViewModel((int)id);
        FeeSrcMstrDteViewModel modelTestChange = modelTestList[0];

        //Perform model binding (fill the product properties and validate it).
        if (TryUpdateModel(modelTestChange))
        {
            var testy = modelTestChange;

            // set the comments
            FeeSourceFlatRateCommentsViewModel modelComments = new FeeSourceFlatRateCommentsViewModel
            {
                CommentId = id,
                FeeSourceDescription = modelTestChange.FEE_SRC_DESC,
                FeeSourceComments = modelTestChange.FEE_SRC_COMMENTS
            };

            commentsList.Add(modelTestChange);

            // save the object
            repo.SaveFeeSrcUOW(saveModel);
            OperationStatus opStatus = repo.Save();

        }

        TempData["FeeSourceFlatRateModel"] = modelTestChange;
        return View(new GridModel(commentsList));
    } 
```

我错过了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:46:01.450

我从 Telerik 网站获得了一些帮助。事实证明，我试图更新不正​​确的模型。我的主网格绑定到 FeeSrcMstrDteViewModel，但我想要更新的详细网格绑定到 FeeSourceFlatRateCommentsViewModel。

修复方法是在 FeeSourceFlatRateCommentsViewModel 上调用 TryUpdateModel。

# c# - 全屏运行时 UI 元素放置在错误的位置

> ID：14981652
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:10.680
> 
> 标签：c#, wpf, canvas, size

我有一个全屏运行的 C# WPF 应用程序。当我在画布的右上角放置一个按钮并运行应用程序时，该按钮不会出现。我发现画布比屏幕大，尽管我使它的宽度和高度与屏幕分辨率相同。

PS：该应用程序在另一台计算机上运行良好，并且画布大小正确，但是当我在笔记本电脑或 PC 上运行它时，会出现同样的问题。

```
<Window x:Name="Mywindow" x:Class="Graduation_Project.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" SizeToContent="WidthAndHeight" Height="768" Width="1366" WindowStyle="None"
    ResizeMode="NoResize" WindowStartupLocation="CenterScreen"
    WindowState="Maximized" Topmost="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Canvas Name="workspace">
         <Label x:Name="Print" Content="Label" Canvas.Left="57" Canvas.Top="719" Width="74"/>
    </Canvas>
</Window> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T15:09:36.293

从 Window 中删除`Height="768"`和 `Width="1366"`属性。

# c# - Powershell XML Export-csv 不附加哈希

> ID：14981653
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:16.203
> 
> 标签：c#, .net, powershell, powershell-2.0, powershell-remoting

我对 Powershell 相当陌生，据我所知，我有相当奇怪的 xml，我的主要目标是将 XML 转换为 CSV，它将进一步用于同步到数据库。我已经使用 Powershell 代码将 xml 提取到哈希中。现在我在将它们转换为 CSV 时遇到问题。Export-csv 仅写入散列中的最后一个条目。不知道为什么，我检查了其他几个论坛，他们说 Export-csv 中的 -append 功能仅适用于 powershell 3.0，我使用的是 1.0..

**你能帮我解决这个问题吗？**

XML：

```
<catalog>
<segment>
<segmentname>Batch</segmentname>
<hosts>
<host>
<hostname>cglist17</hostname>
</host>
<host>
<hostname>cglist18</hostname>
</host>
<host>
<hostname>cglist19</hostname>
</host>
<host>
<hostname>cglist20</hostname>
</host>
</hosts>
</segment>
<segment>
<segmentname>Custom S2</segmentname>
<hosts>
<host>
<hostname>cglist21</hostname>
</host>
<host>
<hostname>cglist22</hostname>
</host>
</hosts>
</segment>
<segment>
<segmentname>eCommerce</segmentname>
<hosts>
<host>
<hostname>cglist09</hostname>
</host>
<host>
<hostname>cglist10</hostname>
</host>
</hosts>
</segment>
</catalog> 
```

电源外壳代码：

```
[xml]$xd=gc "C:\Users\sxa8869\Desktop\Webserv\segmentcat.xml"
$nodelist = $xd.selectnodes("/catalog/segment")

$MasterArray = @()
$MasterArray = "" | Select segmentname,hosts

$file="C:\Users\sxa8869\Desktop\Webserv\sha.csv"

foreach ($node in $nodelist) {

  $hostsNode = $node.selectSingleNode("hosts")
  $segmentname = $node.selectSingleNode("segmentname")
  $MasterArray.segmentname=$segmentname.get_InnerXml()
  foreach ($hostitem in $hostsNode) {
    $hostnamenodes = $hostitem.selectnodes("host")
    foreach ($hostname in $hostnamenodes) {
      $MasterArray.hosts=$hostname.selectSingleNode("hostname").get_InnerXml()

#- Displays the hash in table format, want this format in csv
         $MasterArray        

# - displaying only the last element
      $MasterArray | export-csv "file.csv" -notype      

# - this works, but i want to use export-csv to get it in this format
 '"'+$MasterArray.segmentname+'"'+","+'"'+$MasterArray.hosts+'"'    

    }     
  } 
} 

Required output :-
 -----------------
"segmentname","hosts"
"Batch","cglist17"
"Batch","cglist18"
"Batch","cglist19"
"Batch","cglist20"
"Custom S2","cglist21"
"Custom S2","cglist22"
"eCommerce","cglist09"
eCommerce,"cglist10" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:38:02.553

我认为你把事情复杂化了。尝试这个：

```
$myXML = [xml](Get-Content "C:\Users\sxa8869\Desktop\Webserv\segmentcat.xml")
$file="C:\Users\sxa8869\Desktop\Webserv\sha.csv"

$myArray = @()
foreach ($s in $myXML.catalog.segment)
{
    foreach ($h in $s.hosts.host)
    {
        $myArray += New-Object -TypeName PSObject -Property @{"Segment Name" = $s.segmentname; "Host Name" = $h.hostname}
    }
}

$myArray | Export-Csv $file -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:23:17.707

您在这里有多个问题。首先，您创建一个数组`MasterArray`，然后将其设置为等于您创建的自定义对象`Select`。现在`MasterArray`不再是数组，而是单个`pscustomobject`. 第二，将值设置为单个对象属性，每次都会覆盖最后一个条目。一个数组需要包含多个对象。我已经重写了。我没有通过使用管道等来改进它，而是简单地修复了你的错误，;-) 脚本：

```
[xml]$xd = gc "C:\Users\sxa8869\Desktop\Webserv\segmentcat.xml"
$nodelist = $xd.selectnodes("/catalog/segment")

$MasterArray = @()

$file="C:\Users\sxa8869\Desktop\Webserv\sha.csv"

foreach ($node in $nodelist) {

    $hostsNode = $node.SelectSingleNode("hosts")
    $segmentname = $node.SelectSingleNode("segmentname")
    #Store static value for all objects in $node
    $segname = $segmentname.InnerText

    foreach ($hostitem in $hostsNode) {
        $hostnamenodes = $hostitem.SelectNodes("host")
        foreach ($hostname in $hostnamenodes) {
            #Add hostrecord to array
            $MasterArray += New-Object psobject -Property @{
            "Segment Name" = $segname
            "Host Name" = $hostname.InnerText
            }
        }
    }
}

#Output to console
$MasterArray        

#Save to file (path in $file variable  =  "...\sha.csv").
#Using Select-Object to specify order of columns
$MasterArray | Select-Object "Segment Name", "Host Name" | Export-Csv $file -NoTypeInformation 
```

“sha.csv”中的输出：

```
"Segment Name","Host Name"
"Batch","cglist17"
"Batch","cglist18"
"Batch","cglist19"
"Batch","cglist20"
"Custom S2","cglist21"
"Custom S2","cglist22"
"eCommerce","cglist09"
"eCommerce","cglist10" 
```

# ruby-on-rails - 是否可以将模型类作为 Rails 中的角色？

> ID：14981656
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:22.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, authorization, cancan

我知道有很多优秀的授权宝石，如 cancan、声明式授权、cantango 等。我想知道是否可以将模型类用作角色本身？

比如让有两个资源的导师和学生，那么是否有可能让导师和学生也成为角色？我问这个是因为我对不同的资源有不同的身份验证页面，因为我的资源彼此完全不同，而且我不会使用单个用户类进行身份验证。

如果我做错了，也请指导我，因为我是 Rails 新手 :-)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:06:40.923

简短的回答是“是”。对于 cancan，最终您要定义什么是授权访问，您可以按照自己的意愿进行操作。大多数自动部件确实假设用户模型，但没有硬性要求使用提供的帮助器。您可以像往常一样在ability.rb 文件中定义授权逻辑，但`authorize!`在控制器中手动调用。

也就是说，为什么不让生活更简单并使用单一用户模型，而是让用户的角色依赖于上下文呢？然后，您将从已建立的身份验证工作流程中受益，并且可能还拥有更清晰的域模型。

# active-directory - 使用 ADSI 调用，如何获取 ms-TS-Allow-Logon 属性值？

> ID：14981658
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:26.387
> 
> 标签：active-directory, ldap, adsi

我正在尝试通过 ADSI 检索终端服务用户的某些属性（例如 ms-TS-Allow-Logon）。我尝试了类似的东西

```
LPOLESTR pszPropertyList [] = {L"ms-TS-Allow-Logon"};
swprintf_s(pszSearchFilter, dwLength, L"(&(objectCategory=person)(objectClass=user)");
hr = pContainerToSearch->ExecuteSearch(pszSearchFilter,
                                               pszPropertyList,
                                               sizeof(pszPropertyList)/sizeof(LPOLESTR),
                                               &hSearch
                                             ); 
```

但它不起作用。我在哪里可以获得要传递给所有这些终端服务名称的 ADSI 调用的确切属性名称（如 ms-TS-Allow-Logon、ms-TS-Endpoint-Type 等）

谢谢苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:00:32.880

根据 MSDN [ms-TS-Allow-Logon 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678162%28v=vs.85%29.aspx)，该属性的 ldap 名称为 msTSAllowLogon

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T02:27:21.793

我们可以使用随活动目录一起提供的 ADSI 工具获取所有属性名称

# ios - 通过配对来自两个不同 NSArrays 的值来创建一个 CGPoints 数组

> ID：14981661
> 
> 赞同：3
> 
> 时间：2013-02-20T13:58:27.197
> 
> 标签：ios, objective-c, nsarray, cgpoint

如何通过在objective-c中配对来自两个不同NSArrays的值来创建一个CGPoints数组？

假设我有一个包含值的数组“A”：`0, 1, 2, 3, 4`
而且我还有一个包含值的数组“B”：`21, 30, 33, 35, 31`

我想用 CGPoint 值创建数组“AB”：`(0,21), (1,30), (2,33), (3,35), (4,31)`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:03:02.727

请注意，Objective-C 集合类只能保存对象，因此我假设您的*输入数字*保存在`NSNumber`对象中。这也意味着`CGPoint` `struct`s 必须保存在`NSValue`组合数组中的对象中：

```
NSArray *array1 = ...;
NSArray *array2 = ...;
NSMutableArray *pointArray = [[NSMutableArray alloc] init];

if ([array1 count] == [array2 count])
{
    NSUInteger count = [array1 count], i;
    for (i = 0; i < count; i++)
    {
        NSNumber *num1 = [array1 objectAtIndex:i];
        NSNumber *num2 = [array2 objectAtIndex:i];
        CGPoint point = CGPointMake([num1 floatValue], [num2 floatValue]);
        [pointArray addObject:[NSValue valueWithCGPoint:point]];
    } 
}
else
{
    NSLog(@"Array count mis-matched");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:03:22.423

其他人发布了制作 CGPoints 的**NSArray**，但您要求提供 CGPoints 的**数组**。这应该这样做：

```
NSArray* a = @[ @(0.), @(1.), @(2.), @(3.), @(4.) ];
NSArray* b = @[ @(21.), @(30.), @(33.), @(35.), @(31.) ];

const NSUInteger aCount = a.count, bCount = b.count, count = MAX(aCount, bCount);
CGPoint* points = (CGPoint*)calloc(count, sizeof(CGPoint));
for (NSUInteger i = 0; i < count; ++i)
{
    points[i] = CGPointMake(i < aCount ? [a[i] doubleValue] : 0 , i < bCount ? [b[i] doubleValue] : 0.0);
} 
```

# domain-driven-design - DDD\ES\CQRS 中应用程序的 CRUD 部分

> ID：14981662
> 
> 赞同：3
> 
> 时间：2013-02-20T13:58:27.030
> 
> 标签：domain-driven-design, cqrs, event-sourcing

我想在我的项目中使用 DDD\CQRS\ES。我刚开始使用它，所以我没有很多经验。我知道现有的核心域、支持域和 CRUD 域。我的核心域引用了 CRUD 数据。比如Order里面有很多业务规则，但是里面包含了Delivery Company，receipt point等基本信息。

这些信息由管理员管理。在我看来，我应该使用 crud 方法，但是当我需要回滚事件时会发生什么？

系统将存储混合数据——从事件源恢复和从应用程序的 crud 部分实际恢复。我最终会得到不一致的数据。例如，订单可能由不存在的公司维护（该公司在交付包裹时被管理员删除，但回滚后订单仍然有效）在每个项目中都是 CRUD 数据的一部分，那么您如何处理这个问题？我应该存储公司活动吗？

此外，当我添加新订单时，我应该通过事件发送公司名称和 ID，因为当我重建我的 ReadStore 时，数据库中可能没有公司，所以我无法从存储库中获取 companyName

PS。你知道任何 CRUD 框架来处理简单的 CRUD 操作吗？

PS.2 你知道在 ES\CQRS 方法中包含应用程序的 CRUD 部分的任何示例开源项目吗？

* * *

好的。也许我描述得太复杂了。我只是想知道：

*   当我将核心域存储在事件存储中并且我希望能够恢复核心域的先前状态时，如何实现应用程序的最简单部分（糟糕的业务逻辑 - 主要是 CRUD 操作）

*   我是否也应该在事件存储中存储 crud 操作？

*   回滚事件存储后如何提供一致的数据？

*   您为 Java 应用程序推荐哪种 CRUD 框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:39:00.103

我认为这是处理 DDD 时的一个常见问题，尤其是在处理 ES 时。这听起来可能很简单，但您需要寻找的是域中的有界上下文。事实证明，这种有界上下文很好地映射到 SOA 中的服务。现在，当您了解 SOA 时，您会意识到并非所有服务（SOA 中的服务作为 S 而不是 web/windows 服务中的服务）都需要以相同的方式实现。

根据我的经验，你总是会有一些服务主要处理 CRUD 操作和很少的业务逻辑，通常由管理员/特殊用户使用的应用程序使用。这些服务可以而且应该以尽可能少的努力实现，无需 CQRS 和 ES，也不会使它们过于复杂。只要确保他们在发生某些事情时发布相关消息。

我强烈推荐[Eric Evans - 我从这本书的视频中学到的关于 DDD 的知识](http://www.infoq.com/presentations/ddd-eric-evans)。

Udi Dahan 也有一些关于 SOA 的非常好的视频以及 SOA 的含义：[避免失败的 SOA](http://www.infoq.com/presentations/SOA-Business-Autonomous-Components)和[关于 SOA 的 Udi](http://vimeo.com/5022174)

我意识到这实际上并没有回答您问题的所有细节，但我希望它能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T20:37:43.770

为什么不简单地将 CRUD 部分视为仅附加（如果必须，可能允许更新）或将足够的数据复制到事件中，以免丢失重要数据？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T18:44:34.800

我不知道你到底想问什么，但如果它涉及 DDD 和 CRUD 操作，[Cocktail 框架](http://cocktail.ideablade.com/)可能会对你有所帮助，尽管我自己没有尝试过。

# java - Java文本游戏解析器问题

> ID：14981663
> 
> 赞同：1
> 
> 时间：2013-02-20T13:58:27.187
> 
> 标签：java, text, adventure

这是我的第一篇文章，我只是 Java 的新手，如果没有达到标准，请见谅。

我一直在用 Java 编写一个基于文本的冒险游戏，而我的代码在一个地方失败了——解析器。没有错误，它只是不起作用。它接受输入但不做任何事情。它非常简单，看起来像这样：

```
public static void getInput(){
    System.out.print(">>"); //print cue for input
    String i = scan.nextLine(); //get (i)nput
    String[] w = i.split(" "); //split input into (w)ords
    List words = Arrays.asList(w); //change to list format
    test(words);
} 
```

测试方法只是使用 . 在列表中搜索某些单词`if(words.contains("<word>"))`。

代码有什么问题，我该如何改进它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:12:32.230

如何保留数组并使用这样的东西：

```
 String[] word_list = {"This","is","an","Array"}; //An Array in your fault its 'w'
for (int i = 0;i < word_list.length;i++) { //Running trough all Elements 
    System.out.println(word_list[i]);
            if (word_list[i].equalsIgnoreCase("This")) {
        System.out.println("This found!");
    }
    if (word_list[i].equalsIgnoreCase("is")) {
        System.out.println("is found!");
    }
    if (word_list[i].equalsIgnoreCase("an")) {
        System.out.println("an found!");
    }
    if (word_list[i].equalsIgnoreCase("Array")) {
        System.out.println("Array found!");
    }
    if (word_list[i].equalsIgnoreCase("NotExistant")) { //Wont be found
        System.out.println("NotExistant found!"); 
    }
} 
```

您将获得以下输出：

```
This found!
is found!
an found!
Array found! 
```

如您所见，您根本不需要将其转换为列表！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:11:25.547

这是我将如何做到这一点：

```
public class ReadInput {
    private static void processInput (List <String> words)
    {
        if (words.contains ("foo"))
            System.out.println ("Foo!");
        else if (words.contains ("bar"))
            System.out.println ("Bar!");
    }

    public static void readInput () throws Exception
    {
        BufferedReader reader = 
            new BufferedReader (
                new InputStreamReader (System.in));

        String line;
        while ((line = reader.readLine ()) != null)
        {
            String [] words = line.split (" ");
            processInput (Arrays.asList (words));
        }
    }

    public static void main (String [] args) throws Exception 
    {
        readInput ();
    }
} 
```

示例会话：

```
[in]  hello world
[in]  foo bar
[out] Foo!
[in]  foobar bar foobar
[out] Bar! 
```

# php - 如何向 $.ajax() 添加多个数据？

> ID：14981668
> 
> 赞同：1
> 
> 时间：2013-02-20T13:58:35.170
> 
> 标签：php, jquery, ajax, drag-and-drop, shopping-cart

任何人都可以显示将多个数据添加到数据库的正确语法。我在下面使用的代码只添加了 1 个数据。我已经知道在 PHP 端该做什么。我正在为拖放购物车系统制作这个。

```
function addlist(param)

 {
    $.ajax({ type:"POST",
url: "ajax/addtocart.php",
data: 'img='+encodeURIComponent(param),
dataType: 'json',
beforeSend:function(x){$('#ajax-loader').css('visibility','visible');},
success: function(msg){

    $('#ajax-loader').css('visibility','hidden')
               }

 });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:59:39.523

代替

```
data: 'img='+encodeURIComponent(param), 
```

和

```
data: {img:param, otherParam:otherValue}, 
```

并让 jQuery 进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:59:45.767

将数据作为对象传递给 jQuery。让它为你做序列化：

```
data: { key: 'value', key2: 'value2' } 
```

# c# - 根据来自 Web 服务的值隐藏 DataList 行

> ID：14981674
> 
> 赞同：0
> 
> 时间：2013-02-20T13:58:59.797
> 
> 标签：c#, asp.net, web-services

我正在从 Web 服务中检索一组值并用这些值填充 dataList -

```
ActiveDataList.DataSource = ws.TermsReturnActive(sql);
ActiveDataList.DataBind(); 
```

如何根据值隐藏 dataList 的特定列，例如

```
if(value == 1)
{ 
 //Hide Column 
} 
```

但是，此操作必须隐藏与其并行的另一个 dataList 的同一行。我可以通过从第一个中检索值来修改第二个 dataList 上的单元格 -

```
TextBox tb1 = (TextBox)sender;
        DataListItem item1 = (DataListItem)tb1.NamingContainer;

        TextBox txt1 = (TextBox)tData.Items[item1.ItemIndex].FindControl("tTextBox");

        string term = txt1.Text; 
```

因此，如果我可以从单独的 dataList 行中检索一个值，我想我也可以调整它的可见性。

我该如何实现这一点，因为 Web 服务调用是在页面加载中完成的，所以我相信它必须在绑定 dataList 项时完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:22:36.107

如果我是正确的，你应该在你的 aspx 文件中有这样的东西吗？：

```
<asp:DataList ID="DataList1" runat="server" OnItemDataBound="DataList1_ItemDataBound"></asp:DataList> 
```

如您所见，您应该添加一个“OnItemDataBound”事件，您可以在其中检查您的值并根据需要隐藏项目。

所以你可以像这样做出反应并隐藏一些项目：

```
protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
   {
       if (e.Item.ItemType == ListItemType.Item)
       {
           TextBox tbCurrentTextBox = (TextBox)e.Item.FindControl("tTextBox");
           if (DataList1.Items[e.Item.ItemIndex].ToString() == "1")
           {
               e.Item.Visible = false;
           }
       }
   } 
```

# visual-studio - 如何向 Visual Studio 书签或行添加注释？

> ID：14981680
> 
> 赞同：33
> 
> 时间：2013-02-20T13:59:15.600
> 
> 标签：visual-studio, visual-studio-2012

当我在调试的过程中，我经常会发现不止一个可以改进（或修复）的地方，我喜欢把它们标记出来，以便我以后可以回来进行改进。

目前我在该行中添加了一个书签，但这不能包含任何可用于提醒我书签为何存在的注释（您可以更改书签的名称，但这还不够）。我想我真的希望能够在代码运行时向代码添加 TODO，但是尽管启用了[编辑并继续](http://msdn.microsoft.com/en-us/library/bcew296c%28v=vs.110%29.aspx "编辑并继续")，但它在 ASP.NET WebForms (3.5) 项目中不可用。

是否有任何 Visual Studio 功能或扩展可以实现这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T17:15:47.457

`TODO:`您可以创建一个[任务列表快捷方式](http://msdn.microsoft.com/en-us/library/txtwdysk.aspx)（key cord `Ctrl + K, Ctrl + H`） ，而不是启用 Edit and Continue 然后在源代码中输入 a 。

这会在“任务列表”窗口的“快捷方式”部分添加一个条目。从那里您可以更改任务的描述以提醒您创建它的原因。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-04-02T10:05:48.027

由于标记为已接受的答案[在 VS 2015 之后已被弃用](https://stackoverflow.com/questions/31752293/visual-studio-2015-user-tasks-gone)，因此我改用此解决方案：

使用钥匙线为一行代码添加书签`Ctrl+K Ctrl+K`，然后打开书签窗口 ( `Ctrl+K Ctrl+W`)。在书签窗口中，您可以将书签重命名为您喜欢的任何名称。

我已经在 VS 2015 和 2017（社区）中对此进行了测试。

**重要提示：**确保`Ctrl+Shift+S`每隔一段时间执行一次 File->Save All ( )，这样如果 VS 或 Windows 决定崩溃，您就不会丢失您一直在处理的书签。我已经成为这件事的受害者，这很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:45:45.530

[编辑并继续](http://msdn.microsoft.com/en-us/library/bcew296c%28v=vs.110%29.aspx "编辑并继续")功能可让您在调试时对代码进行简单的更改。如果您的更改足够简单，那么您可以在编码时即时进行更改。对于更复杂的更改，您可以添加表单的[TODO 注释](http://msdn.microsoft.com/en-us/library/zce12xx2%28v=VS.80%29.aspx "完整的文档")：

```
// TODO: Explanation of fix 
```

您可以通过查看 Visual Studio 中的任务列表来查看所有 TODO 注释的列表。

# events - 如何使用事件推送插件动态创建新主题

> ID：14981682
> 
> 赞同：1
> 
> 时间：2013-02-20T13:59:20.517
> 
> 标签：events, grails

要为事件创建主题，我需要在 conf/MyEvents.groovy 文件中声明它，如下所示：

```
events = {
    "topicName"  browser: true  
} 
```

我想将服务器推送用于两件事，将聊天消息推送到客户端以及将通知推送到客户端。

以前者为例，我需要为运行时在聊天系统中实例化的每个对话创建一个新主题，以便可以将消息推送给每个对话参与者，所以沿着

`new Event(topic:'anotherTopicName',...)`

这将允许我从服务中调用：

```
 import grails.events.*

    class MyService {

       def doSomething(){
            ...
            event(topic:'anotherNewTopic', data:data)           
       }
    } 
```

有没有一种方法可以让我创建一个新的事件主题？或者是否有另一种使用事件推送来实现这一点的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T07:38:12.760

我刚刚做了类似的事情。我需要根据已登录的用户显示一些通知，因此我在 MyEvents.groovy 中进行了设置：

```
events = {
   'newNotification_*' browser:true
} 
```

当我需要发送通知时：

```
event topic:"newNotification_${userId}",data:n 
```

然后在我的浏览器中，我可以通过类似于以下内容来收听这些通知：

```
grailsEvents.on("newNotification_"+myUser,function(data){ 
```

# php - ZF2 中使用 Doctrine 的一对多关系

> ID：14981688
> 
> 赞同：0
> 
> 时间：2013-02-20T13:59:42.100
> 
> 标签：php, doctrine, zend-framework2

这是我的代码

类别文件

```
 <?php

namespace Category\Entity;

 use Doctrine\ORM\Mapping as ORM,
Zend\Form\Annotation;

/**
 * A Category entity.
 *
   * @ORM\Entity
 * @ORM\Table(name="categories")
 * @ORM\Table(name="categories"))
 * 
 * @property int $id
 * @property string $category_name
 * @property string $status
  * @property date $created_at
 * @property date $created_at

  * 
  * @Annotation\Name("Category")
  */
 class Category {

/**
 * @ORM\Id
 * @ORM\Column(type="integer");
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 * @Annotation\Required(false)
 */
protected $id;

/**
 * @ORM\Column(type="string")
 * 
 * @Annotation\Attributes({"type":"text"})
 * @Annotation\Options({"label":"category_name:"})
 * @Annotation\Filter({"name":"StringTrim"})
 * @Annotation\Filter({"name":"StripTags"})
 */
protected $category_name;

/**
 *  @ORM\Column(type="integer");
 * @Annotation\Options({"label":"Status:"})
 * 
 * @Annotation\Required(false)
 */
protected $status;

/**
 * @ORM\Column(type="datetime")
 * 
 * @Annotation\Required(false)
 */
protected $created_at;

/**
 * @ORM\Column(type="datetime")
 * 
 * @Annotation\Required(false)
 */
protected $updated_at;

/**
 * @ORM\OneToMany(targetEntity="\Product\Entity\Product" , mappedBy="category")
 * 
 * 
 */
protected $category;

public function __get($property) {
    return $this->$property;
}

/**
 * 
 * 
 * Magic setter to save protected properties.
 *
 * @param string $property
 * @param mixed $value
 */
   public function __set($property, $value) {
    $this->$property = $value;
  }

   public function getArrayCopy() {
    return array(
        'category_name' => $this->category_name,
        'status' => $this->status,
    );
  }

public function exchangeArray($data) {
    $this->id = (isset($data['id'])) ? $data['id'] : null;
    $this->category_name = (isset($data['category_name'])) ? $data['category_name'] : null;
    $this->status = (isset($data['status'])) ? $data['status'] : 0;
}

public function populate($data) {
    $this->id = isset($data['id']) ? $data['id'] : $this->id;
    $this->category_name = isset($data['category']) ? $data['category'] : $this->category_name;
    $this->status = isset($data['status']) ? $data['status'] : $this->status;
}

} 
```

这是我的 CategoriesNames 文件

```
 <?php

  namespace Admin\Entity;

 use Doctrine\ORM\Mapping as ORM,
 Zend\Form\Annotation;

 /**
 * A Category entity.
 *
 * @ORM\Entity
 * @ORM\Table(name="categories_names")
 * @ORM\Table(name="categories_names"))
  * 
 * @property int $id
 * @property string $category
 * @property string $language

 * 
 * @Annotation\Name("language")
 */
 class CategoriesNames {

/**
 * @ORM\Id
 * @ORM\Column(type="integer");
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 * @Annotation\Required(false)
 */
protected $id;

/**
 * 
 * @ORM\ManyToOne(targetEntity="\Category\Entity\Category", inversedBy="category")     
 */
private $category;

/**
 * 
 * @ORM\ManyToOne(targetEntity="Languages", inversedBy="language")     
 */
private $language;

public function __get($property) {
    return $this->$property;
}

/**
 * 
 * 
 * Magic setter to save protected properties.
 *
 * @param string $property
 * @param mixed $value
 */
public function __set($property, $value) {
    $this->$property = $value;
}

public function getArrayCopy() {
    return array(
        'category_name' => $this->category_name,
        'status' => $this->status,
    );
}

public function exchangeArray($data) {
    $this->id = (isset($data['id'])) ? $data['id'] : null;
    $this->category_name = (isset($data['category'])) ? $data['category'] : null;
    $this->status = (isset($data['language'])) ? $data['language'] : 0;
}

public function populate($data) {
    $this->id = isset($data['id']) ? $data['id'] : $this->id;
    $this->category_name = isset($data['category']) ? $data['category'] :   $this->category;
    $this->status = isset($data['language']) ? $data['language'] : $this->language;
}

} 
```

这是我的语言实体

```
 <?php

 namespace Admin\Entity;

 use Doctrine\ORM\Mapping as ORM,
   Zend\Form\Annotation;

/**
* A Category entity.
*
* @ORM\Entity
* @ORM\Table(name="languages")
* @ORM\Table(name="languages"))
 * 
*  @property int $id
* @property string $language_name
* @property string $language_code

* 
 * @Annotation\Name("language")
*/
class Languages {

/**
 * @ORM\Id
 * @ORM\Column(type="integer");
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 * @Annotation\Required(false)
 */
protected $id;

/**
 * @ORM\Column(type="string")
 * 
 * @Annotation\Attributes({"type":"text"})
 * @Annotation\Options({"label":"language_name:"})
 * @Annotation\Filter({"name":"StringTrim"})
 * @Annotation\Filter({"name":"StripTags"})
 */
protected $language_name;

/**
 * @ORM\Column(type="string")
 * 
 * @Annotation\Attributes({"type":"text"})
 * @Annotation\Options({"label":"language_code:"})
 * @Annotation\Filter({"name":"StringTrim"})
 * @Annotation\Filter({"name":"StripTags"})
 */
protected $language_code;

/**
 * @ORM\OneToMany(targetEntity="\Admin\Entity\CategoriesNames" , mappedBy="language")
 * 
 * 
 */
protected $language;

public function __get($property) {
    return $this->$property;
}

/**
 * 
 * 
 * Magic setter to save protected properties.
 *
 * @param string $property
 * @param mixed $value
 */
public function __set($property, $value) {
    $this->$property = $value;
}

public function getArrayCopy() {
    return array(
        'category_name' => $this->category_name,
        'status' => $this->status,
    );
}

public function exchangeArray($data) {
    $this->id = (isset($data['id'])) ? $data['id'] : null;
    $this->category_name = (isset($data['category_name'])) ? $data['category_name'] : null;
    $this->status = (isset($data['status'])) ? $data['status'] : 0;
}

public function populate($data) {
    $this->id = isset($data['id']) ? $data['id'] : $this->id;
    $this->category_name = isset($data['category']) ? $data['category'] : $this->category_name;
    $this->status = isset($data['status']) ? $data['status'] : $this->status;
} 
```

现在我到这里的错误是

> 在“Admin\Entity\Languages#language”中找不到目标实体 Admin\Entity\CategoriesNames。

除了例外

> /vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/MappingException.php:428

编辑：我也发布了语言文件

# android - 如何删除Button的背景资源？

> ID：14981695
> 
> 赞同：3
> 
> 时间：2013-02-20T13:59:54.860
> 
> 标签：android, android-button

[如何删除按钮背景资源](https://stackoverflow.com/questions/9269896/how-to-remove-button-background-resource)我参考了这个，但我需要删除按钮背景，并且应该根据 deviceDefault 主题更改背景。意味着只是删除上次添加的资源，而不是分配新的资源。

任何人都可以帮助解决这个问题吗？谢谢你

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T14:07:13.877

尝试在 xml 文件中分配背景：@null 以编程方式尝试 layout.setBackgroundResource(0);

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-14T19:35:15.937

您可以通过更改后台资源来做到这一点。在 XML 文件中，用于按钮的属性。

```
<Button
    ...
    android:background="@null" /> 
```

应该这样做。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-01-25T18:50:56.793

您可以添加样式，而不是将背景设置为 @null：

```
<Button
    ...
    style="@style/Widget.AppCompat.Button.Borderless" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:19:43.163

如果您只这样做几次，一个简单的方法是在更改之前保存以前的背景。您可以将其存储在`tag`Button 的字段中：

```
//store previous background drawable
myButton.setTag(myButton.getBackground());

//    ... alter background, do whatever

//restore background drawable from tag
myButton.setBackground((Drawable)myButton.getTag()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T14:23:39.940

```
your_view.setBackground(null); 
```

成功移除预定义的背景。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-20T14:13:28.687

```
 Button b;
    b=(Button)findViewById(R.id.button1);
    b.setBackgroundResource(R.drawable.ic_launcher);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            b.setBackgroundResource(android.R.drawable.btn_default);

        }
    }); 
```

这应该可以帮助你

# c# - 匿名函数委托收益

> ID：14981698
> 
> 赞同：2
> 
> 时间：2013-02-20T14:00:06.780
> 
> 标签：c#, events, lambda, anonymous-function

我有一个这样声明的按钮事件：

```
myButton.Click += new EventHandler(ButtonClicked);

private void ButtonClicked(Object s, EventArgs e)
{
  this.Close();
} 
```

我可以这样做：

```
myButton.Click += (s, e) => this.Close(); 
```

我确信使用第二种方式的好处不仅仅是美观。

为什么以及何时应该使用第二种方法，因为现在我很困惑？如果只是为了外观，当您在匿名函数的主体中有多个指令时，它看起来并不会更干净。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:16:54.503

从技术上讲没有区别。编译器将在第二种情况下生成处理程序方法。

但坦率地说，我几乎从不使用匿名事件处理程序。为什么？因为他们没有名字。IDE 无法帮助我找到处理事件的地方。您还记得您使用匿名方法订阅的确切位置吗？嗯，你可能还记得那个地方。但我敢打赌你的队友不会。

我也不喜欢混合事件处理程序的风格。Visual Studio 为我生成`button1_Click`方法。我不喜欢一些处理程序以这种方式订阅，而一些处理程序*就地*订阅。

而且我喜欢查看事件参数类型。是的，退订有时也很重要。还有几点-匿名方法对于非常简单的逻辑很有用（例如在您的情况下关闭表单），但是对于更复杂的事情它们会变得非常混乱。而且我认为将事件处理程序*放在适当的位置*会破坏您方法的单一职责。它订阅事件，做一些其他的事情，并在同一个地方处理事件。我喜欢将事物分开以使它们更具可读性和可维护性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:02:44.547

`(s, e) => this.Close();`无论哪种方式，编译器都会为这个匿名函数生成一个方法，

这取决于您想在哪里使用它，在方法中声明它可以让您访问在该方法中声明的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:04:51.457

好吧，您基本上已经隐含地将委托应用于您的`Click`活动。

您无法在其他任何地方的代码中访问此事件。这样做的主要优点是，您不能在类中的任何其他位置调用您的方法，通过拥有一个方法，您可以邀请其他“团队成员”在他们的代码中访问该方法，或者可能将它的修饰符更改为他们的认为应该发生。

如果您希望能够使用`override`一种方法，那么显然内联匿名分配是不利的。

用法或多或少取决于您希望如何处理对逻辑的访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:08:16.820

如果你不需要参数，你可以做得更优雅：

```
myButton.Click += delegate { this.Close(); }; 
```

但它背后除了优雅的外观没有任何利润。

如果我真的不需要它们，我不喜欢使用 lambda 表达式 ( => )，因为您无法在调试期间更改范围代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T14:14:48.253

匿名函数可以是匿名方法或 lambda 表达式。Lamba 表达式的形式为：

`() => //dowork`

匿名方法更加冗长，并且支持主要是为了向后兼容。匿名函数本身没有值或类型，但它可以转换为委托或表达式树。匿名函数允许我们创建内联方法，这些方法在设置事件处理程序等情况下很有用。这种方法的内联允许开发人员“在同一个地方”编写代码。换句话说，处理程序在处理事件的位置立即可供阅读器使用。

当实现仅限于几个语句并且不可重用（在事件处理程序中经常出现这种情况）时，我会努力使用内联方法。Lamba 表达式还可以广泛用于框架的扩展方法 `Enumerable.Select`等。并且在使用新的并行库或调用时`Where`代替`Action`或使用.`Func``Control.Invoke`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T14:03:20.163

第一种方法更容易支持、更复杂和重用。

此外，如何从事件中取消订阅第二种方法也不是很明显

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T14:06:18.617

这是一个类似的主题：[delegate 关键字与](https://stackoverflow.com/questions/299703/delegate-keyword-vs-lambda-notation)考虑匿名委托和 lambda 表达式的 lambda 表示法。特别是，答案是：*一旦编译，它们之间就没有区别了。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T14:08:41.743

只要你不需要参数，你甚至可以使用：

```
myButton.Click += delegate { this.Close(); }; 
```

看起来更干净。

但是正如其他人所指出的，使用匿名委托会带来代码可重用性的成本。同样在文章[How to: Subscribe to and Unsubscribe from Events](http://msdn.microsoft.com/en-us/library/ms366768.aspx)中。微软表示：

> 请务必注意，如果您使用匿名函数订阅某个事件，您将无法轻松取消订阅该事件。要在这种情况下取​​消订阅，必须返回订阅事件的代码，将匿名方法存储在委托变量中，然后将委托添加到事件中。一般来说， **如果您必须在稍后的代码中取消订阅事件，我们建议您不要使用匿名函数来订阅事件**。

[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx)的优点之一，也将它们与 lambda 表达式区分开来，是：

> ...在一种情况下，匿名方法提供了 lambda 表达式中没有的功能。**匿名方法使您能够省略参数列表。这意味着可以将匿名方法转换为具有各种签名的委托。** 这对于 lambda 表达式是不可能的。

作为上面段落的结论，我们可以说您可以根本不传递任何参数，或者您应该传递事件处理程序的确切签名：

```
myButton.Click += delegate(object sender, EventArgs e) { this.Close(); }; 
```

# php - 是否可以在 php 中创建具有相同键的数组？

> ID：14981700
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:12.803
> 
> 标签：php

我在使用 php 发送肥皂请求时遇到问题，xml 代码如下所示：**

```
<list> 
  <ExtIdList>
   <serviceExtId set="true">
   <value>$value1</value>
  </serviceExtId>
  <ExtIdType set="true">
   <value>1</value>
  </ExtIdType>
  </ExtIdList>

  <ExtIdList>
   <serviceExtId set="true">
   <value>$value2</value>
  </serviceExtId>
  <ExtIdType set="true">
   <value>2</value>
  </ExtIdType>
  </ExtIdList>
 </list> 
```

**

问题在这里我不能将它翻译成数组，如果在这里翻译成数组将是 2 个相同的键。有没有办法使用php发送这样的soap请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:04:52.323

试试这个（我不确定它是否适用于你的情况，但是当我向 XERO api 发送多部手机时它对我有用） - 类似于嵌套数组：

```
$phones =
array(
    array(
        'Phone' => array(
            'PhoneType' => 'DEFAULT',
            'PhoneNumber' => $values['phone']
    )),
    array(
        'Phone' => array(
            'PhoneType' => 'MOBILE',
            'PhoneNumber' => $values['mobile']
    ))
); 
```

在您的情况下，将`'Phone'`密钥替换为`'ExtIdList'`

# iis-7 - 经典 ASP 应用程序在浏览器中长时间打开后挂起

> ID：14981702
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:15.673
> 
> 标签：iis-7, asp-classic

我有一个使用 SQL 后端的经典 ASP 应用程序。该应用程序使用 Access 直到本周早些时候，当我更改它以尝试解决此问题时，无济于事。问题是用户整天都在 IE 中打开站点，并且两次使用之间可能需要一个小时或更长时间。在它打开一段时间后，当他们尝试提出请求时，网站挂起并最终显示“页面无法显示”。如果他们点击后退按钮，然后刷新页面，它工作正常。

我刚刚将应用程序池从集成更改为经典，这样可能会解决它，但如果有人有任何其他想法，我欢迎他们。IIS (7.5) 上还有另一个站点，当用户遇到此挂起时，服务器上没有大量资源使用。

此外，我已经为运行超过 3 秒的任何内容打开了失败的请求跟踪。当这些挂起发生时，我会收到日志文件，但他们说请求返回状态代码 200，但它似乎总是在 NOTIFY_MODULE_START - IsapiModule、Notification 128、Notification EXECUTE_REQUEST_HANDLER 的日志中停止。该事件的模块通知在持续时间内显示 NO_END。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:01:32.583

您可以在 Javascript 中构建一个后台 AJAX / jquery pinger，它每 5 分钟 ping 服务器一次以刷新会话，您将永远不会被注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:14:42.997

IIS 会话在设定的时间段后超时 - 默认值为 20 分钟。

你可以做的是在你的登陆页面上设置一个会话变量——例如

```
<% Session("Active") = "yes" %> 
```

然后在所有其他页面上设置一个脚本，以在会话超时时将您弹回登录页面 - 例如

```
<% if Session("Active") <> "yes" then 
Response.redirect("mylandingpage.asp")
end if %> 
```

# python - 具有外部中断条件的 Python 生成器

> ID：14981704
> 
> 赞同：2
> 
> 时间：2013-02-20T14:00:19.007
> 
> 标签：python, generator

我需要迭代 n (= 5, fi) 整数的升序序列 x，找到函数 f(*x) 返回 True 的所有序列。

假设如果 f_n(*y) 对于特定的 y 为 False，那么对于 z_i >= y_i 的任何 z，f_n(*z) id 为 False。所以 f_n 的所有参数都是单调的。

这种生成器函数可用于以下方式来确定平方和 < 100 的所有整数的升序序列

```
for sequence in generate_sequences(5):
   if sum_squares_is_at_least(sequence, 100):
       # some code to trigger the breaking of the generator loop
   else:
       print sequence 
```

澄清：这里的问题是我们需要单独迭代 n 个元素。最初，我们将 [1,1,1,1,1] 迭代到 [1,1,1,1,x]，然后我们必须继续将 [1,1,1,2,2] 到 [1, 1,1,2,y]，最终以 [a,b,c,d,e] 结尾。似乎生成器应该看起来像这样，但如果需要（由外部确定），需要一些代码来打破 for 和/或 while 循环：

```
def generate_sequences(length, minimum = 1):
    if length == []:
        yield []

    else: 
        element = minimum
        while True:

            for sequence in generate_sequences(length - 1, element):
                yield element + [sequence]

            element += 1 
```

示例：对于 n = 3，并且平方和不大于 20，将生成以下序列：[1, 1, 1], [1, 1, 2], [1, 1, 3], [1, 1, 4], [1, 2, 2], [1, 2, 3], [1, 3, 3], [2, 2, 2], [2, 2, 3]

请注意，在一般情况下，我不能使用 4 是每个元素的上限的信息。这也会严重影响更大示例的运行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:05:03.530

您在寻找[itertools.takewhile](http://docs.python.org/2/library/itertools.html#itertools.takewhile)吗？

```
>>> from itertools import takewhile
>>> def gen():  #infinite generator
...    i=0
...    while True:
...       yield range(i,i+5)
...       i = i+1
... 
>>> [ x for x in takewhile( lambda x:sum(x)<20, gen() ) ]
[[0, 1, 2, 3, 4], [1, 2, 3, 4, 5]]
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:02:35.220

```
import itertools as it

it.takewhile(lambda x: sum_squares_is_at_least(x, 100), generate_sequences(5)) 
```

如果您现在确定**5**中的5，那么只要它被调用`generate_sequences`就让它成为数字：`yield`

```
def generate_sequences():
    i = 0 # or anything
    while True:
        yield [i, i] # or anything
        i = i + 1 # or anything 
```

然后以这种方式使用它：

```
it.takewhile(lambda x: sum_squares_is_at_least(x, 100), generate_sequences()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T19:54:23.920

我会通过从给定列表开始然后附加另一个数字来递归解决它（使用逻辑来防止超过平方和目标）

```
def makegen(N): #make a generator with max sumSquares: N
    def gen(l=[]): #empty list is valid with sum == 0
        yield l
        if l:
            i = l[-1] #keep it sorted to only include combinations not permutations
        else:
            i = 1 #only first iteration
        sumsquare = sum(x*x for x in l) #find out how much more we can add
        while sumsquare + i*i < N: #increase the appended number until we exceed target
            for x in gen(l+[i]): #recurse with appended list
                yield x
            i += 1
    return gen 
```

以下列方式调用我们的生成器生成器（tee hee :D）允许我们获得我们想要的任何最大平方和

```
for x in makegen(26)():
    print x 
```

# php - 无法移动上传的文件 - Drupal

> ID：14981707
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:32.363
> 
> 标签：php, file, drupal

所以我的一个客户最近问我一个问题，他们无法使用 Drupal 上传任何文件。

他们得到的错误是（我现在已经复制了它 - 我更改了站点名称以保护隐私）：

> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将“/tmp/phpwmxeOQ”移动到/home/isp/domain-domains/domain 中的“sites/domain.org/files/Leading_Indicators_5.pdf”。 org/includes/file.inc 在第 629 行。文件上传错误。无法移动上传的文件。

什么会导致这种情况？权限问题？PHP的安全模式？还有什么？在搜索的方式中，我并没有真正找到太多能引导我找到任何具体事物的方法。只是模块的问题吗？有没有办法用代码修复它？

# java - 将元素从一个向量移动到另一个向量

> ID：14981708
> 
> 赞同：-6
> 
> 时间：2013-02-20T14:00:38.990
> 
> 标签：java

```
package testing;

import java.util.Random;
import java.util.Vector;

public class Variable2Variable {

    public static void main(String[] args) {
        Vector<Vector<Integer>> lines;
        Vector<Integer> linePoints;
        Random rndNumbers = new Random();

        lines = new Vector<Vector<Integer>>();
        linePoints = new Vector<Integer>();

        for(int i = 0; i < 5; i++){
            linePoints.add(rndNumbers.nextInt(10));
            linePoints.add(rndNumbers.nextInt(10));
        }

        lines.add(linePoints);

        //linePoints.clear();

        System.out.println("Vector: lines: " + lines);
        System.out.println("Vector: linePoints: " + linePoints);
    }

} 
```

请运行上述代码，记下结果，然后取消注释“//linePoints.clear();”行 然后再次运行它。

我怎样才能从向量'linePoints'中移动元素并将它们存储到向量'lines'中？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:07:16.470

代替

```
 lines.add(linePoints);

    //linePoints.clear();

    System.out.println("Vector: lines: " + lines);
    System.out.println("Vector: linePoints: " + linePoints); 
```

这样做：

```
 lines.add(linePoints);

    linePoints = new Vector<Integer>();

    System.out.println("Vector: lines: " + lines);
    System.out.println("Vector: linePoints: " + linePoints); 
```

还有一些注意事项：

*   你在做 OOP 都错了。您在语义上使用整数的非结构化列表作为整数对的列表。这为自己的班级尖叫！
*   当你也可以使用 ArrayLists 时，为什么还要使用 Vectors？您需要它们的线程安全特性吗？

**TL;DR 部分**

您编写的代码的解释：

```
 lines = new Vector<Vector<Integer>>(); //create list instance holding list of Integers
    linePoints = new Vector<Integer>(); //create list instance holding list of Integers

    for(int i = 0; i < 5; i++){ // fill list of Integers with even number of Integers
        linePoints.add(rndNumbers.nextInt(10));
        linePoints.add(rndNumbers.nextInt(10));
    }

    lines.add(linePoints); 
    //add a reference pointing at the  "list of Integers **instance**" 
    //to the list of list of Integers instance
    //No copying happens here! Still only two lists, one has a reference to the other.
    //to copy, you should do: 
    //lines.add(new Vector<Integer>(linePoints));

    linePoints.clear(); //blam! this removes the integers from the list of Integers
    // as linePoints has only a reference to the list instance itself,
    // that has now the same empty list...

    System.out.println("Vector: lines: " + lines); //empty
    System.out.println("Vector: linePoints: " + linePoints); //1 element, the empty list 
```

修复工作原理的说明：

```
 lines = new Vector<Vector<Integer>>(); //create list instance holding list of Integers
    linePoints = new Vector<Integer>(); //create list instance holding list of Integers

    for(int i = 0; i < 5; i++){ // fill list of Integers with even number of Integers
        linePoints.add(rndNumbers.nextInt(10));
        linePoints.add(rndNumbers.nextInt(10));
    }

    lines.add(linePoints); 
    //add a reference pointing at the  "list of Integers **instance**" 
    //to the list of list of Integers instance

    linePoints = new Vector<Integer>(); //create new empty list, 
    //and set the reference linePoints to point to that list. 
    //the original instance is left alone, lines list's reference still points to it

    //there are now 3 instances of List in memory now:
    // * new empty Vector<Integer>, linePoints references it
    // * the Vector<Vector<Integer>> instance, lines references it
    // * the "old" Vector<Integer> instance, the first element of lines references it

    System.out.println("Vector: lines: " + lines); //empty
    System.out.println("Vector: linePoints: " + linePoints); //1 element: the list, having the integers 
```

# c# - TagVisualizer - 活动时 - 阻止 ScatterViewItem 内的文本框触摸键盘焦点

> ID：14981713
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:49.417
> 
> 标签：c#, wpf, pixelsense

我有一个`TagVisualizer`覆盖整个屏幕。嵌套在里面的是一个全屏`ScatterView`。在我`ScatterViewItems`的其中一个`UserControl`里面列出了 n 个`SurfaceTextBoxs`. 和始终可见`UserControl`。`ScatterViewItems`

例如

```
<TagVisualizer Panel.ZIndex="1">
<TagVisualizer.Definitions>
...
<TagVisualizer.Definitions>

<ScatterView Panel.ZIndex="2">
<ScatterViewItem />
<ScatterViewItem />
<ScatterViewItem >
<UserControl />
</ScatterViewItem>
...
</ScatterView>
</TagVisualizer> 
```

我遇到的问题是，当桌面上没有识别出标签时，触摸输入工作并且键盘弹出并正常工作。但是，当表格上的标签被识别时，键盘不再专注于文本块并且不会对用户触摸输入做出反应。我认为分层内容 zindex 可以解决这个问题，但我错了......

令人沮丧的是，我的代码适用于 Surface Input Simulator 工具，但不适用于设备本身。（标签和触摸工具选项，不是鼠标）。

*   标签被精确切割，不会在桌子上显示为斑点/手指触摸。
*   将内容从 scatterview 拖放到 librarybars 等都按预期工作。
*   其他按钮和触摸元素都按预期工作
*   每个标签的 Source 是 IsHitTestVisible=false 并且没有按钮等（只有一个 Ellipse 显示标签在哪里被识别）
*   只有键盘功能没有按我想象的那样运行。

我相信这背后的原因是标签捕获了鼠标上下文并且不会放手，默认的键盘功能不需要触摸输入而是单个鼠标事件。当标签被识别时，我将如何让键盘在`SurfaceTextBox`- Inside a - 上工作？`UserControl`

我是新手`WPF`，这个问题让我有点头疼……我查看了 SDK 示例，但我找不到解决方案。我正在做一些愚蠢的事情还是没有做/错过了什么简单的事情？

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:00:24.553

在研究了有关 Surface 2.0 程序的键盘结构的更多信息并再次按照购物车示例之后，您必须使用 Surface 2.0 键盘，而不是平板电脑（您可以在控制面板中打开/关闭的那个）。我犯了一个愚蠢的错误，以为两个键盘都可以操作相同……不。

Surface 2.0 键盘接受触摸输入并与`TagVisualizers`. 这是由于将键盘绑定到某个特定位置`SurfaceTextBoxes`，即使鼠标没有点击它，它也会接受触摸输入。

平板电脑窗口默认键盘不适用于触摸输入，除非鼠标输入已触摸它（当没有其他输入时，最后一个和当前活动的触摸输入被提升为鼠标）。此键盘始终在未指定键盘且在控制面板中启用时显示。`TagVisualizers`当没有鼠标/触摸输入但有一个可识别的标签时，这很乏味。这个标签会窃取联系人，直到你把它取下来。

Surface 2.0 键盘不存在此问题。当您使用 Surface 2.0 键盘进行开发时，平板电脑键盘将取代它（令人讨厌），直到您通过 Surface Shell 运行您的软件......

要开发您的程序并查看 Surface 2.0 键盘，您必须有一个用于 Surface 的开发环境并设置为 Surface。例如在三星 SUR40 等上开发

1.  [http://msdn.microsoft.com/en-us/library/ff727875.aspx](http://msdn.microsoft.com/en-us/library/ff727875.aspx)在 Windows 模式下测试
2.  [http://msdn.microsoft.com/en-us/library/ff727840.aspx](http://msdn.microsoft.com/en-us/library/ff727840.aspx)表面测试/调试
3.  [http://msdn.microsoft.com/en-us/library/ff727766.aspx](http://msdn.microsoft.com/en-us/library/ff727766.aspx) Surface 键盘

Ps 我相信这是正确的......我仍在研究这个问题，如果我找到解决这个问题的方法，我会更新我的答案......

编辑：

To extend this answer.. You should code the application to use the Surface Shell, via the launcher you should either launch your application from the selection of available applications and / or set the shell to one application mode if you're programming for a store environment.

# ruby - 我怎样才能干掉这段代码而不是设置很多条件

> ID：14981717
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:56.333
> 
> 标签：ruby

我正在使用 ROR 并且在我的控制器功能中我收到了这些参数的参数和基础，我需要根据条件执行操作。但我看到这些是大约 18 个条件。

我怎样才能干这个代码。

```
if params[:topic] == "Topic (title)" and params[:sort] == "Date (ASC)"
  # custom code
elsif params[:topic] == "Topic (title)" and params[:sort] == "Date (DESC)"
  # custom code
elsif params[:topic] == "Topic (title)" and params[:sort] == "Topic (ASC)"
  # custom code
elsif params[:topic] == "Topic (title)" and params[:sort] == "Topic (DESC)"
  # custom code
elsif params[:topic] == "Topic (title)" and params[:sort] == "Author (ASC)"
  # custom code
elsif params[:topic] == "Topic (title)" and params[:sort] == "Author (DESC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Date (ASC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Date (DESC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Topic (ASC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Topic (DESC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Author (ASC)"
  # custom code
elsif params[:topic] == "Post (body)" and params[:sort] == "Author (DESC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Date (ASC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Date (DESC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Topic (ASC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Topic (DESC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Author (ASC)"
  # custom code
elsif params[:topic] == "Author" and params[:sort] == "Author (DESC)"
  # custom code
end 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:07:50.133

使用`case... when`语法。会让事情变得更清楚一些。还将所有 if 的第一部分移出案例 - 它们似乎在很多案例中很常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:40:36.387

如果代码确实不同，请考虑使用 case 语句：

```
case [params[:topic], params[:sort]]
when ["Topic (title)", "Date (ASC)"]
  # custom code
when ["Topic (title)", "Date (DESC)"]
  # custom code
when ["Topic (title)", "Topic (ASC)"]
  # custom code
when ["Topic (title)", "Topic (DESC)"]
  # custom code
when ["Topic (title)", "Author (ASC)"]
  # custom code
when ["Topic (title)", "Author (DESC)"]
  # custom code
when ["Post (body)", "Date (ASC)"]
  # custom code
when ["Post (body)", "Date (DESC)"]
  # custom code
when ["Post (body)", "Topic (ASC)"]
  # custom code
when ["Post (body)", "Topic (DESC)"]
  # custom code
when ["Post (body)", "Author (ASC)"]
  # custom code
when ["Post (body)", "Author (DESC)"]
  # custom code
when ["Author", "Date (ASC)"]
  # custom code
when ["Author", "Date (DESC)"]
  # custom code
when ["Author", "Topic (ASC)"]
  # custom code
when ["Author", "Topic (DESC)"]
  # custom code
when ["Author", "Author (ASC)"]
  # custom code
when ["Author", "Author (DESC)"]
  # custom code
end 
```

If there is repetition in the code, or you wind up using this case statement in multiple locations, then there are probably better ways to do this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:23:03.993

```
 topics = ['Topic (title)', 'Post (body)', 'Author' ]
  sorts = ['Date (ASC)', 'Date (DESC)', 'Topic (ASC)', 'Topic (DESC)']
  code_map = {
    [topics[0], sorts[0]] => ->() {
      # custom code
    },
    [topics[0], sorts[1]] => ->() {
      # custom code
    }
  }

  # usage
  code_map[[params[:topic], params[:sort]]() 
```

虽然这消除了重复，但我不相信你想走这条路，因为我相信“自定义代码”也会有很多重复。

向我们展示您的“自定义代码”以及它在不同情况下的变化，我们可以为您干燥，而不是在调度级别

# jquery - 简单天气 API 当前温度不工作

> ID：14981718
> 
> 赞同：0
> 
> 时间：2013-02-20T14:00:57.477
> 
> 标签：jquery, json, api, weather

我是 JavaScript 和 jquery 的新手......我一直在尝试编写一段简单的代码来使用天气 api 来提醒当前温度。

这是我到目前为止所得到的：

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"/>

 <script>
 var my_city="Washington,USA";
 var my_key="8b0642a6c7133932132002";
 var no_of_days=2;
 // build URI:
 var uri="http://free.worldweatheronline.com/feed/weather.ashx?               q="+my_city+"&key="+my_key+"&format=json&no_of_days="+no_of_days+"&includeLocation=yes";
 // uri-encode it to prevent errors :
 uri=encodeURI(uri); 

 jQuery.get(uri,function(r){
 current_temp_C  =r.data.current_condition[0].temp_C;
 alert(current_temp_C);
 },"json");
 </script> 
```

但是，什么都没有显示。如果有人能指出我哪里出错了，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:05:30.740

我假设您最终进入错误处理程序，并且您只在代码中处理成功的 ajax 调用。由于您使用的是 jquery > 1.5，因此您可以执行以下操作来检查：

```
jQuery.get(uri,function(r){
    current_temp_C  =r.data.current_condition[0].temp_C;
     alert(current_temp_C);
},"json").fail(function(jqXHR, ajaxOpts, thrownError){
    alert(thrownError);
}); 
```

此外，根据代码，您查询的字符串有很多空格。不是将数据作为自定义查询字符串传递，而是添加一个带有数据的对象文字作为第二个参数`$.get`：

```
jQuery.get(uri, { key1: 'value1', key2: 'value2' }, function(r){
//etc... 
```

# asp.net - 如何在asp.net mvc中实现windows认证？

> ID：14981723
> 
> 赞同：1
> 
> 时间：2013-02-20T14:01:21.940
> 
> 标签：asp.net, asp.net-mvc, iis-7

我们正在 APS.NET MVC4 中实现一个必须在 Intranet 上运行的网站。我们需要使用 Active Directory (LDAP) 进行 Windows 身份验证。当我将身份验证模式从 Forms 更改为 windows 时，应用程序会自动记录，而无需登录页面中的明确用户名和密码。

如何实现windows身份验证，在哪个登录页面接受用户名和密码并进行验证？如果有任何例子，请提供给我......非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:05:26.487

您可以启用 FormsAuthentication，然后添加以下成员资格提供程序：

```
<connectionStrings>
    <add name="ADConnectionString" connectionString="YOUR AD CONNECTION STRING" />
</connectionStrings> 
```

接着：

```
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="~/Account/LogOn" />
    </authentication>
    <membership defaultProvider="MY_ADMembershipProvider">
        <providers>
            <clear />
            <add name="MY_ADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnectionString" attributeMapUsername="sAMAccountName" />
        </providers>
    </membership>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T07:21:19.127

您所做的方法似乎已经正确。

在 Windows 身份验证中，如果您尝试从同一台机器加载页面，您将自动登录。但是，如果您尝试从另一台机器登录，它会要求您提供 Windows 凭据。

# c - 需要帮助来了解我的程序中的缺陷

> ID：14981726
> 
> 赞同：0
> 
> 时间：2013-02-20T14:01:43.643
> 
> 标签：c, file

我正在用 C 编程，我开始做一些基本的编程，比如文件中的字数，但不幸的是，我的程序执行存在缺陷。gcc 编译器会显示这样的警告：

```
test.c: In function ‘main’:
test.c:11: warning: passing argument 1 of ‘fopen’ makes pointer from integer without a cast
/usr/include/stdio.h:269: note: expected ‘const char * __restrict__’ but argument is of type ‘char’ 
```

第 11 行是带有 if 语句的行

```
#include<stdio.h>
#include<stdlib.h>
#include<ctype.h>
#define FAIL -1 
#define SUCCESS 1

int main (char *filename) {
    FILE *fp;
    char c;
    int wordcount = 0;
    if ((fp = fopen(*filename,"r")) == NULL)
        return FAIL;
    while (!feof(fp))
    {
        while(!isalpha(fgetc(fp)))
        {
            wordcount++;
        }
    }
    printf("wordcount: %d",wordcount);  
    fclose(fp);
    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:03:34.890

在 C 中的指针之前应用星号会取消对指针的*引用*，即它计算指针指向的任何位置。你不想要那个，你想要：

```
if ((fp = fopen(filename,"r")) == NULL) 
```

否则，您将单个字符（ 中的第一个字符`filename`）传递给`fopen()`，它需要一个指向以 0 结尾的字符数组（又名“字符串”）的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:04:33.120

```
int main( int argc, char **argv )
{
  FILE *fp;
  char *path;
  path = argc > 1 ? argv[1] : "default"
  fp = fopen( path, "r" );
  if( fp == NULL ) {
    perror( path );
    exit( EXIT_FAILURE );
  }
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:05:19.453

`main`必须声明为不带参数或`(int argc, char* argv[])`. 它必须在 [0,255] 中返回一个 int，通常是 EXIT_SUCCESS 或 EXIT_FAILURE。

之后，在您的编译器 ( `gcc -Wall -Werror`) 中启用警告并查看它是如何进行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:06:12.167

通过在文件名前加上“*”，您将数据文件名指向而不是存储数据的地址传递 - 应该是：

```
if ((fp = fopen(filename,"r")) == NULL) 
```

而 main[只接受参数](http://en.wikipedia.org/wiki/Main_function)argc 和 argv。如果您将文件名作为命令行上的第一个参数传递，则：

```
int main (int argc, char* argv[])
{
   FILE *fp;
   char c;
   int wordcount = 0;
   if (argc<1) {
      fprintf(stderr, "need a filename");
      return FAIL;
   }
   if ((fp = fopen(argv[1],"r")) == NULL) {
   .... 
```

# php - 把所有东西都放进去正则表达式

> ID：14981730
> 
> 赞同：0
> 
> 时间：2013-02-20T14:02:00.540
> 
> 标签：php, regex

我有以下代码。我正在尝试将所有内容都放在“a”标签中。目前它正在工作。我得到“第一”和“第二”作为输出。打开“a”标签和关闭“a”标签在同一行。

```
$v = 'this is test 
<a href="products.html">first</a> 
<a>second</a;
preg_match_all("#<a\b[^>]*>(.*?)</a>#", $v, $foo);
echo implode("\n", $foo[1]); 
```

但是如果我这样写，

```
$v = '<a href="products.html">first
</a> 
preg_match_all("#<a\b[^>]*>(.*?)</a>#", $v, $foo);
echo implode("\n", $foo[1])'; 
```

在这里，我将结束的“a”标签移到了第二行，现在它没有给我任何输出。有谁知道如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:17:07.363

至于您遇到的问题，是因为您需要启用单行选项（`s`）：

```
preg_match_all("#<a\b[^>]*>(.*?)</a>#s", $v, $foo); 
```

否则`.`不匹配换行符。

[文档](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)中的选项说明：

> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。

但是你最好不要使用正则表达式。 [有关 PHP 中的其他方法，请参阅此问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php/3577662#3577662)。

# java - 我应该在春季为我的项目使用注释吗？

> ID：14981735
> 
> 赞同：0
> 
> 时间：2013-02-20T14:02:09.940
> 
> 标签：java, spring, hibernate, annotations, spring-annotations

我只有一个查询：

我自己正在开发一个内部项目（spring、hibernate、dao 的混合）..

我是这样想的：在 spring 的情况下，仅对 hibernate 和 xml 配置使用注释。

你建议我什么？（在 Spring 中使用注解优于 XML 配置？）

请问我需要你的建议..

我真的不明白我什么时候必须使用注释，什么时候不应该..

我不是很擅长注释，但知识足够，所以你建议我学习它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:21:00.510

使用 XML 配置的理由是您不需要重建来更改元数据。

根据我的经验，制作 XML 配置而不是注释所发生的一切就是它只是坐在那里，一旦你写了它就会溃烂。这样想，一旦表结构起作用，您多久真正更改一次表结构？

注释意味着您不需要不断地将实体类切出并更改为 xml，也不需要通过 XML 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:27:21.180

没有正确答案它的个人喜好，我非常不科学的稻草民意调查是大多数人更喜欢注释。但是，与您一起工作的人可能习惯于 xml 配置，我们聘请了新人，他们习惯于使用 XML 文件进行开发，因此我们对他们进行了重新教育。

您可以通过提供 XML 配置来覆盖 annatotions - 但这表明一团糟。

（另外，intellij 与 spring 有很大的不同，无论如何都可以单击 vritualyl 任何 bean 引用，它会带你去它的 decalration 很棒）

# php - jquery.post 不起作用

> ID：14981739
> 
> 赞同：3
> 
> 时间：2013-02-20T14:02:27.547
> 
> 标签：php, jquery, .post

HTML 元素：

```
<img align="center" onclick="doc()" src="images/doc.png"> 
```

JavaScript 函数：

```
function doc (){
    $.post("php/file.php", { name: "John", time: "2pm" },).done( function(data) {
        alert("Data Loaded: " + data);
    });
} 
```

文件.php：

```
$pi=$_POST['name'];
echo ($pi); 
```

我不知道为什么，但是`$.post`当我单击图像时不发送数据它什么也没做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:05:29.633

```
 function doc (){
  $.post("php/file.php", { name: "John", time: "2pm" })
   .done( function(data) {
    alert("Data Loaded: " + data);
    }); 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:43:00.683

您在评论之一中提到使用的 Jquery 库是：

```
<script src="code.jquery.com/jquery-1.8.3.min.js"></script> 
```

这不是一个正确的来源。请使用以下来源：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:11:45.047

同时拥有内联 JavaScript 和 jQuery 不是一个好习惯。使用jQuery绑定点击事件。

为此，首先将标识符添加到图像：

```
<img id="imgDoc" align="center" src="images/doc.png"> 
```

然后在代码中：

```
$(document).ready(function() {
    $("#imgDoc").bind("click", function() {
        $.post("php/file.php", { name: "John", time: "2pm" }).done( function(data) {
            alert("Data Loaded: " + data);
        });
    }
}); 
```

# jquery - 将预定义标签设置为 TagIt jQuery 插件

> ID：14981740
> 
> 赞同：1
> 
> 时间：2013-02-20T14:02:31.397
> 
> 标签：jquery, tag-it

我正在使用[https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it)这个插件，并且无法为其设置预定义的标签。

因此，如果我有一组要默认选择的标签：

```
 function PredifinedTagsSet(tags) {

            for(var i = 0; i < tags.length; i++) {
                var el = ""; 
                el  = "<li class=\"tagit-choice\">\n";
                el += tags[i] + "\n";
                el += "<a class=\"close\">x</a>\n";
                el += "<input type=\"hidden\" style=\"display:none;\" value=\""+tags[i]+"\" name=\"item[tags][]\">\n";
                el += "</li>\n";

                var el = ""; 
                el = "<li class=\"tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable\"><span class=\"tagit-label\">";
                el += tags[i];
                el += "</span><a class=\"tagit-close\"><span class=\"text-icon\">×</span><span class=\"ui-icon ui-icon-close\"></span></a></li>";
                $("#myTags").prepend(el);
            }} 
```

我的标签容器：

```
<div class="tags-container">
    <input type="hidden" name="tags" id="mySingleField" value=""/> 
    <label>Tags:</label>
    <ul id="myTags">
    </ul>
</div> 
```

并标记它 jQuery：

```
$(document).ready(function () {
    $('#myTags').tagit({
        availableTags: @Html.Raw(Json.Encode(@ViewBag.Tags)),
        singleField: true,
        singleFieldNode: $('#mySingleField')
    });
}); 
```

我尝试使用 javascript 设置数据 `<ul id="myTags"></ul>`， `<input type="hidden" name="tags" id="mySingleField" value=""/>`但我无法从标签栏中删除标签，或者我得到重复值。

```
 var hiddenTagsValue  = "";
    if(tags.length > 0){
        hiddenTagsValue += tags[0];

        if(tags.length > 1)
            for(var i = 1; i < tags.length; i++) {
            hiddenTagsValue += ", ";           
            hiddenTagsValue += tags[i];
        }
    }

    $("#mySingleField").val(tags[]); 
```

# notepad++ - 有没有办法设置记事本++来跟踪哪些功能视图被最小化？

> ID：14981742
> 
> 赞同：1
> 
> 时间：2013-02-20T14:02:41.037
> 
> 标签：notepad++

在notepad++中，在处理一些代码（通常是python）的过程中，我经常用行号旁边的+/-图标来最小化函数的视图，这样只显示每个函数定义的第一行（即`def [function name] (...):`） . 但是，当我关闭notepad++并重新启动它时，函数的所有视图再次最大化，这样每个函数的所有代码都会显示出来。

有没有办法设置notepad++来记住哪些函数定义视图被最小化，这样当程序重新启动时，最小化的视图保持不变？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:09:31.423

不，notepad++ 不会将元数据保存在文件中。因此，当您打开文件时，它所拥有的只是文件的内容。而且您绝对不希望notepad ++用数据弄脏您的文件（例如最小化哪个功能，因为其他程序不知道如何“吃掉”它。

# c# - 写入网络场的网络服务器上的文件夹位置

> ID：14981746
> 
> 赞同：1
> 
> 时间：2013-02-20T14:02:52.130
> 
> 标签：c#, asp.net

我有一个托管在网络场上的网络应用程序。在应用程序中，用户可以将文件写入位于 IIS 虚拟目录中的文件夹中，如下所示：

```
var compressedFile = FileCompression.GetCompressedAndEncrypted(xml);
File.WriteAllBytes((filePath), compressedFile); 
```

这里的问题是只有连接到客户端的服务器才能获取更新的文件，但要求是同时在场的**两台服务器上执行此操作**。场中有两台服务器。

我想以编程方式实现这一目标。请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:57:44.483

您可以执行以下操作之一 -

1.  存储在数据库中（易于实现，但仅适用于小文件）
2.  存储在所有服务器都可以访问的公共位置（如 Windows Azure 的 Blob 存储）
3.  使用 Microsoft Sync Framework 同步文件（陡峭的学习曲线）

# wpf - 如何在 MVVM WPF 中从子级更改父级控件？

> ID：14981747
> 
> 赞同：1
> 
> 时间：2013-02-20T14:02:54.657
> 
> 标签：wpf, mvvm

我的 WPF MVVM 有问题，我在主视图中加载了一个用户控件。在我的主视图中，我有一个状态栏和一个文本框。我想通过单击用户控件中的按钮来更改文本，我该怎么做？我在这里尝试了很多操作系统的东西，比如 raisepropertiechange，但什么也没发生。

我有一个来自 MainModel 的 ViewModel 和很多带有他们的 viewmodel 的 UserControl。每个用户控制视图模型将有一个按钮，需要触发并更改父模型的文本。

我不确定我是否清楚这一点。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:26:24.950

我会在视图模型中提供一个命令，该命令会`BaseClass`更改`UserControl`视图模型的父视图模型中的文本`UserControls`。的可以绑定到这个命令`Buttons`。`UserControl`并且主视图的标题绑定到 text 属性。
尽可能保持视图和控件的解耦和“愚蠢”。

然后，您只需在其他视图模型中提供主视图模型的参考。

# c - 如何在不更改头文件的情况下更改函数返回的内容

> ID：14981765
> 
> 赞同：0
> 
> 时间：2013-02-20T14:03:49.260
> 
> 标签：c, function, struct

对于作业，我们必须使用预先确定的头文件——我无法对其进行任何更改。

但是大多数函数返回一个节点（一个结构节点），但我希望它们返回一个指向该节点的指针。

有什么方法可以更改我`functions.c`文件中的函数调用吗？

如果不是一旦返回节点，我怎么能有一个指向它的指针？

例如：

```
bst_node_t BSTSearchNode( bst_root_t root, bst_key_t key, cmp_func_t cmp_func ); 
```

是头文件中的函数原型。但是我想返回一个指向节点而不是节点本身的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:07:19.123

不，你不能，函数声明和定义必须匹配。

出于好奇，是否会使用与您的实现链接的程序检查分配，并尝试调用 BSTSearchNode 函数？在这种情况下，你真的想以正确的方式定义它......

编辑：根据您的评论，您的分配实际上是按照定义实现函数，而不是更改其返回类型。所以，就这样做；）

按照要求继续传递值实际上可能更简单（如果您尝试传递指向数据的指针，则必须小心分配节点的内存位置，谁拥有它等等...... ）。您的标头中的 API 可能不适用于此。

当然，如果`bst_node_t`是指向某个实体的指针的 typedef，这也适用，在这种情况下，您无需更改任何内容。没有标题很难说...

# mysql - 从一个表中获取有关所有行的信息，当在连接表中该行不是时

> ID：14981766
> 
> 赞同：0
> 
> 时间：2013-02-20T14:03:49.523
> 
> 标签：mysql, sql

如果表中的 userItems 没有与 moduleItems 连接的记录为空，如何获取？

```
SELECT `users`.*, `useritems`.*, `moduleitems`.*, `modulesubitems`.* FROM `users`
LEFT JOIN `useritems` ON useritems.f_user_id = users.user_id
LEFT JOIN `moduleitems` ON moduleitems.moduleItem_id = useritems.f_moduleItem_id
LEFT JOIN `modulesubitems` ON modulesubitems.modulesubitem_id = useritems.userItem_value 
```

编辑：**我的数据库结构**

```
CREATE TABLE IF NOT EXISTS `moduleitems` (
`moduleItem_id` int(11) NOT NULL AUTO_INCREMENT,
`f_module_id` int(11) NOT NULL,
PRIMARY KEY (`moduleItem_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=63 ; 
```

* * *

```
CREATE TABLE IF NOT EXISTS `modules` (
`module_id` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`module_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ; 
```

* * *

```
CREATE TABLE IF NOT EXISTS `modulesubitems` (
`moduleSubitem_id` int(11) NOT NULL AUTO_INCREMENT,
`f_moduleItem_id` int(11) NOT NULL,
PRIMARY KEY (`moduleSubitem_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=19 ; 
```

* * *

```
CREATE TABLE IF NOT EXISTS `useritems` (
`f_user_id` int(11) NOT NULL,
`f_moduleItem_id` int(11) NOT NULL,
`userItem_value` varchar(255) DEFAULT NULL,
PRIMARY KEY (`f_user_id`,`f_moduleItem_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

```
CREATE TABLE IF NOT EXISTS `users` (
`user_id` int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=35 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:03:36.030

如果您想查看每个用户的每个模块项，无论他们在 useritems 表中是否有匹配的记录，这应该有效：

```
SELECT  `users`.*, `useritems`.*, `moduleitems`.*, `modulesubitems`.* 

FROM    `users`

        CROSS JOIN `moduleitems`

        LEFT JOIN `useritems` 
        ON useritems.f_user_id = users.user_id
        AND moduleitems.moduleItem_id = useritems.f_moduleItem_id

        LEFT JOIN `modulesubitems` 
        ON modulesubitems.modulesubitem_id = useritems.userItem_value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:10:11.243

如果您尝试查找不在连接表中的所有记录（使用 LEFT JOIN 时），请添加到 WHERE 子句，其中您在该表中连接的字段为 NULL。如果没有匹配，连接表中的所有字段都将为 NULL。

例如，如果您试图在 moduleitems 表中查找不匹配的情况，这将起作用。：

```
SELECT `users`.*, `useritems`.*, `moduleitems`.*, `modulesubitems`.* 
FROM `users`
LEFT JOIN `useritems` ON useritems.f_user_id = users.user_id
LEFT JOIN `moduleitems` ON moduleitems.moduleItem_id = useritems.f_moduleItem_id
LEFT JOIN `modulesubitems` ON modulesubitems.modulesubitem_id = useritems.userItem_value
WHERE moduleitems.moduleItem_id IS NULL 
```

# r - 如何在 R 中表示超出比例的数据点

> ID：14981770
> 
> 赞同：0
> 
> 时间：2013-02-20T14:03:58.820
> 
> 标签：r, plot, outliers

我正在尝试在 R 中绘制一组数据

```
x <- c(1,4,5,3,2,25) 
```

我的 Y 比例固定为 20，因此如果我执行以下代码，最后一个数据点实际上不会在图上可见

```
plot(x, ylim=c(0,20), type='l') 
```

我想通过在图上方显示一个较小的框来显示外围数据点的范围，具有独立的 Y 刻度，仅代表最后一个数据点。

有没有解决这个问题的包或方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T18:39:22.347

您可以尝试`axis.break`（plotrix 包）[http://rss.acs.unt.edu/Rdoc/library/plotrix/html/axis.break.html](http://rss.acs.unt.edu/Rdoc/library/plotrix/html/axis.break.html)，您可以使用它定义要中断的轴、样式、大小和颜色中断标记。这种方法的潜在缺点是趋势感知可能会被愚弄。祝你好运！

# java - client_secret 在 client_secret.json 中不可用

> ID：14981772
> 
> 赞同：2
> 
> 时间：2013-02-20T14:04:18.580
> 
> 标签：java, android, google-drive-api

我正在尝试[此处](http://code.google.com/p/google-api-java-client/source/browse?repo=samples#hg/drive-cmdline-sample)提供的 google drive 的命令行演示应用程序。我已按照在 google api 控制台中创建新项目的所有步骤进行操作，然后下载了**client_secret.json**文件。导入并运行项目后，我得到了**空指针异常**。经过几个小时的研究，我意识到发生异常是因为 client_secret.json 文件中没有可用的 client_secret。

这是我下载的 client_secret.json 的图像。其中缺少**client_secret**字段。

![在此处输入图像描述](../Images/5ec83bf02813893bca0c9be5208219c5.png)

我得到了例外

![在此处输入图像描述](../Images/fb45f0e968193d4c8d1d0078f6580c31.png)

有人可以帮我我在这里犯了什么错误。我从哪里得到client_secret。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:30:16.160

尝试按照 Google Drive SDK 文档中的 Java 快速入门示例构建一个将文件上传到 Drive 的命令行 Java 应用程序：

[https://developers.google.com/drive/quickstart-java](https://developers.google.com/drive/quickstart-java)

# javascript - 如何禁用剑道 ui 网格和滑块中的工具提示？

> ID：14981773
> 
> 赞同：0
> 
> 时间：2013-02-20T14:04:31.803
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

如何禁用剑道 UI 网格和滑块中的工具提示？我试过滑动：

```
var slider = $('#selector').kendoSlider({
    tooltip: {enabled: false}
}).data("kendoSlider"); 
```

但它没有被禁用。我也想知道如何禁用网格工具提示。

剑道ui版本：2012.3.1114

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:24:03.073

滑块中的`tooltip`值用于滑块的值，并且按照您的定义工作。如果您想要删除拖动处理程序的*标题*和增加/减少按钮，那么您应该使用：

```
var slider = $("#slider").kendoSlider({
    increaseButtonTitle: "",
    decreaseButtonTitle: "",
    dragHandleTitle:""
}).data("kendoSlider"); 
```

# java - 哪种 NoSQL 实现最合适？

> ID：14981780
> 
> 赞同：6
> 
> 时间：2013-02-20T14:04:52.277
> 
> 标签：java, nosql, redis, orientdb, trove4j

我是 NoSQL 的新手，我正在为我正在尝试构建的应用程序找出最合适的 NoSQL 实现而摸不着头脑。

我的 Java 应用程序需要一个包含数百万到数十亿个条目的内存哈希图，因为它对单层神经网络进行建模。现在我们正在使用[Trove](http://trove.starlight-systems.com/)，以便能够使用原语作为键和值来减小映射的大小并提高访问速度。该映射是映射的映射，其中外部映射的键是长整数，而内部映射具有长/浮点键/值。

当应用程序启动时，我们需要能够将保存的状态从磁盘读取到地图地图中。对地图地图的更改也需要连续或根据某个预定间隔保存到磁盘。

[起初我被OrientDB](http://www.orientdb.org/)所吸引是因为他们的文档和对象数据库，尽管我现在还不确定什么会更好。然后我遇到了[Redis](http://redis.io/)，它是一个键值存储，与可以转储到磁盘的内存数据集一起使用，包括主从复制。但是，地图的值看起来不能是字符串以外的任何值。

我是否在正确的地方寻找满足我需求的解决方案？现在，我喜欢 Redis 的内存和主从方面，但我喜欢 OrientDB 的对象/文档功能，因为我的数据结构比简单的字符串更复杂，并且能够将 Trove 与原始键/值类型一起使用非常有利。如果阅读便宜而写作昂贵而不是相反，那就更好了。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:13:21.850

为什么不直接将 Trove 数据结构序列化到磁盘呢？[从文档（ http://trove4j.sourceforge.net/javadocs/serialized-form.html](http://trove4j.sourceforge.net/javadocs/serialized-form.html) ）来看，似乎有某种支持，但很难说，因为它都是自动生成的，而不是亲切地-制作教程。尽管如此，对于您的用例来说，为什么需要一个合适的数据库并不明显，所以也许 KISS 适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:35:28.447

[OrientDB](http://orientdb.org)拥有最灵活的引擎，具有 JSON 格式的索引、图形、事务和复杂文档。为什么不？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T11:59:03.150

查看[Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle)。这是一个低延迟的持久性库。我想您可能会发现它为此类数据提供了出色的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T19:20:52.357

如果您想为此使用 Redis，您可能最适合使用 ZSET 或 HASH 作为底层结构（Redis 支持结构，而不仅仅是字符串值）。除非您需要根据值/值的排序顺序来获取您的地图部分，否则 HASH 可能是最好的（就内存和速度而言）。

所以你可能想要使用 long -> {long:float, ...} 。也就是说，longs 映射到 long/float 映射。然后，您可以使用 HGET 获取地图中的单个条目，使用 HMGET 获取多个条目，或者使用 HGETALL 获取完整地图。可以查看命令参考[http://redis.io/commands](http://redis.io/commands)

在节省空间方面，根据 HASH 的预期大小，您可以调整它们以使用更少的空间，而对性能的影响有限/没有负面影响。

在持久性方面，您可以使用快照运行 Redis，也可以使用仅附加文件的增量保存。您可以在此处查看持久性文档：[http ://redis.io/topics/persistence](http://redis.io/topics/persistence)

如果您想提出更尖锐的问题，您应该前往邮件列表[https://groups.google.com/forum/?fromgroups=#!topic/redis-db/33ZYReULius](https://groups.google.com/forum/?fromgroups=#!topic/redis-db/33ZYReULius)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T08:07:58.707

Redis 支持比简单字符串更复杂的[数据结构](http://redis.io/topics/data-types-intro)，例如列表、（排序的）集合或散列，这对于您的域模型可能会派上用场。另一方面，您的神经网络可以利用 OrientDB 丰富的图形功能，具体取决于其结构。

# php - AJAX 和 Wordpress 之间的加载功能不起作用

> ID：14981783
> 
> 赞同：0
> 
> 时间：2013-02-20T14:05:01.083
> 
> 标签：php, ajax, wordpress, jquery

我无法使用 ajax 从 single.php 中的 div（宽度为特定 ID）获取内容到 index.php 中。现在我有了这段代码并返回“0”。

```
$("body").on("click", 'a.loadcontent', function() { 
    var href = $(this).attr('href');
    var type = $(this).data('type');
    var id = $(this).data('id');
    var slug = $(this).data('slug');
});
function loadcontent(type,id,slug, action) {
    jQuery.ajax({
        type:'POST', 
        url:srvars.ajaxurl, 
        data: { 
            action:'sr_get_content', 
            id:id, 
            type:type
        }, 
        success: function(response) {}
    });
} 
```

并来自functions.php

```
add_action('wp_ajax_nopriv_sr_get_content', 'loadAjaxPosts');
add_action('wp_ajax_sr_get_content', 'loadAjaxPosts');
function loadAjaxPosts() { 
    switch($_REQUEST['type']) {
        case 'portfolio':
            $output = sf_portfolio_items($_REQUEST['cat'], $_REQUEST['count'], $_REQUEST['page'], true);
        break;
        case 'blog':
            $output = sf_blog_items($_REQUEST['cat'], $_REQUEST['count'], $_REQUEST['page'], true);
        break;
        default:
            $output = 'Incorrect type specified, please contact support.';
        break;

    }
    $output=json_encode($output);
    if(is_array($output)) {
        print_r($output);   
    } else {
        echo $output;
    }
    die;    
} 
```

如何传输内容？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:12:16.743

我也有那部分。。

```
$("body").on("click", 'a.loadcontent', function() { 
    var href = $(this).attr('href');
    var type = $(this).data('type');
    var id = $(this).data('id');
    var slug = $(this).data('slug');

    if(window.location.hash.substr(1) == slug) { 
        $('html, body').animate({scrollTop: 0}, animationSpeed, $easingType);
    } else {
        window.location.hash = slug;    // set the hash
        //history.pushState({page:href}, href, href);
        loadcontent(type,id,slug,false);
    }

    return(false);
}); 
```

# c# - 从 c# 调用 powercfg /requests 会给出错误的值

> ID：14981785
> 
> 赞同：1
> 
> 时间：2013-02-20T14:05:18.733
> 
> 标签：c#, process, powercfg

所以我有一段代码可以使用 /requests 选项调用 powercfg 并从标准输出中获取结果。

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "powercfg";
p.StartInfo.Arguments = "/requests";
p.Start();

string output = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

但是，当我运行此代码时，我得到的输出与在命令行上运行相同命令时完全不同。

在代码版本的情况下，我只得到“[DRIVER] ？”的负载。值回来了，但在命令行上，我通常会得到 2 或 3 个格式正确的响应。

我已经从与具有相同环境的相同用户相同的命令提示符窗口运行我的代码，但仍然没有乐趣。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:06:54.653

它可能与您的应用程序在其中运行的用户上下文有关，例如，如果您以管理员身份运行您的应用程序，Process.Start 将尝试在相同的上下文中启动该进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:51:44.020

所以实际原因是我的应用程序需要为“任何 CPU”编译。将其设置为 x86 或 x64 会导致加载依赖库之一的正确版本时出现问题。

# c# - 获取 Azure Blob 存储中的最后一个 Blob

> ID：14981788
> 
> 赞同：3
> 
> 时间：2013-02-20T14:05:24.633
> 
> 标签：c#, winforms, azure

我需要知道如何在我的 blob 存储中检索最后创建的 blob。现在我用一个 for 循环来做，但目录中大约有 50000*个块*。

如何以有效的方式获取最后创建的块 blob？

我的代码如下：

```
string url = null;
foreach (var blobItem in subdir.ListBlobs())
{
    url = blobItem.Uri.ToString();
}
url += signature;
if (url != pictureBoxLiveViewer.ImageLocation)
{
    pictureBoxLiveViewer.ImageLocation = url;
} 
```

这是每分钟计时的计时器中的一个功能。所以这是低效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:20:20.063

Blob 存储不支持查询功能，因此您需要自行实现。一个明显的选择是您当前执行此操作的方式，即列出 blob 并找到该列表中的最后一个 blob。

[把想法大声说出来]

您可以做的一件事是**按时间倒序命名 blob**（类似于表中的 PartitionKey 的方法）。所以你可以做的是使用这个逻辑命名你的 blob

```
var blobName = DateTime.MaxValue - DateTime.UtcNow 
```

这样，当您列出 blob 时，您总是会首先获得最新的 blob。

另一种选择是将 blob 名称、创建日期和 blob URI 保存在表存储中。同样，您可能希望对 PartitionKey 使用与上述相同的逻辑。然后您将查询表存储，从表中获取第一条记录，这将是您最近创建的 blob。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:24:05.803

我在我的上传应用程序中创建了一个函数，每次都会在文本文件 (txt) 中写入最新图像的完整 URI

```
CloudBlobClient blobClient = new CloudBlobClient(
    sUrl, new StorageCredentialsSharedAccessSignature(signature));
CloudBlobContainer container = blobClient.GetContainerReference(container1);
CloudBlobDirectory dir = container.GetDirectoryReference(cameranaam);
CloudBlob cloudBlob = dir.GetBlobReference(cameranaam+".txt");
cloudBlob.UploadText(blobSAS.Uri.ToString()); 
```

这是我的另一个项目的计时器，它正在加载服务器的最后一个图像：

```
blobClient = new CloudBlobClient(
    blobstoreurl, new StorageCredentialsSharedAccessSignature(signature));
container = blobClient.GetContainerReference(containerName);
CloudBlobDirectory dir = 
    container.GetDirectoryReference(comboBoxCameras.SelectedItem.ToString());
CloudBlob cloudBlob = dir.GetBlobReference(
    comboBoxCameras.SelectedItem.ToString().Replace(" ","") + ".txt");
pictureBoxLiveViewer.ImageLocation = cloudBlob.DownloadText() + signature; 
```

# java - 如何调整 BufferedImage 的大小但保留它的图形？

> ID：14981796
> 
> 赞同：-3
> 
> 时间：2013-02-20T14:05:34.687
> 
> 标签：java, swing, graphics, awt

我有自己的自定义控件，它为其内容维护支持图像。此缓冲区的类型为`BufferedImage`.

**注意力！使用背景图像是由于要求。不要教我画内在`paintComponent()`**

目前我正在通过以下方式调整图像大小：

```
@Override
public void setBounds(int x, int y, int width, int height) {

    if( bufferedImage == null ) {
        bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    }
    else {
        if( bufferedImage.getWidth() < width || bufferedImage.getHeight() < height ) {
            BufferedImage newImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
            newImage.createGraphics().drawImage(bufferedImage, 0, 0, null);
            bufferedImage = newImage;
        }
    }
    super.setBounds(x, y, width, height);
} 
```

不幸的是，这需要创建新`BufferedImage`对象，因此使先前获得的`Graphics`对象无效。

所以我必须有自己的方法

```
public Graphics2D createImageGraphics() {
    if( bufferedImage != null ) {
        return bufferedImage.createGraphics();
    }
    else {
        return null;
    }
} 
```

虽然我想覆盖`getGraphics()`.

是否可以调整图像大小以保存 Graphics 对象？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T15:28:56.027

以下是如何在 Swing 中执行自定义绘画的小示例：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JFrameTest {

    private boolean drawOval = false;

    protected void initUI() {
        final JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                if (drawOval) {
                    g.setColor(Color.BLUE);
                    g.drawOval(0, 0, 100, 100);
                }
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(100, 100);
            }
        };

        AbstractAction drawAction = new AbstractAction("Draw") {

            @Override
            public void actionPerformed(ActionEvent e) {
                drawOval = true;
                panel.repaint();
            }
        };

        JButton drawButton = new JButton(drawAction);

        JPanel buttonPanel = new JPanel();
        buttonPanel.add(drawButton);

        JFrame frame = new JFrame();
        frame.add(panel, BorderLayout.CENTER);
        frame.add(buttonPanel, BorderLayout.SOUTH);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();

        frame.setVisible(true);

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JFrameTest().initUI();
            }
        });

    }
} 
```

# mysql - MySQL查询以获取数据量最少的行？

> ID：14981797
> 
> 赞同：0
> 
> 时间：2013-02-20T14:05:42.147
> 
> 标签：mysql, sql

假设我有这个：

```
id | col1 | col2 | col3 | col4 | col5 | name
1  | xxx  | xxx  | xxx  |      | xxx  | John
2  |      |      |      | xxx  | xxx  | Peter
3  | xxx  | xxx  | xxx  |      |      | Sam 
```

我怎么会得到这样的结果：

```
id | filledData | name
1  | 4          | John
2  | 2          | Peter
3  | 3          | Sam 
```

基本上，我想使用设置的列来确定数据的“填充程度”如何，然后对其进行排序，以便我可以尝试先用最少的数据填充这些列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:07:31.113

您只需要检查该列是否为空或不使用`CASE`语句。

```
SELECT  ID,
        name,
        CASE WHEN col1 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN col2 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN col3 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN col4 IS NOT NULL THEN 1 ELSE 0 END +
        CASE WHEN col5 IS NOT NULL THEN 1 ELSE 0 END filledData
FROM    tableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/0918a/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:07:30.777

这需要一个复杂的 case 语句：

```
select id, filledData, name
from (select t.*,
             ((case when col1 is not null then 1 else 0 end) +
              (case when col2 is not null then 1 else 0 end) +
              (case when col3 is not null then 1 else 0 end) +
              (case when col4 is not null then 1 else 0 end) +
              (case when col5 is not null then 1 else 0 end)
             ) as filledData
      from t
     ) t 
```

# python - 投影图国家边界

> ID：14981800
> 
> 赞同：0
> 
> 时间：2013-02-20T14:05:51.903
> 
> 标签：python, matplotlib, projection, matplotlib-basemap

我使用此代码绘制法国上空的投影中心：

```
from sys import argv

from numpy import array,histogram

from numpy import *

from math import *

from matplotlib.pyplot import *

from matplotlib.image import *

from mpl_toolkits.basemap import Basemap, shiftgrid

from matplotlib import rcParams

import matplotlib.pyplot as plt

import matplotlib.mlab as mlab

import matplotlib.patches as patches

import matplotlib.path as path

import matplotlib.dates as dt

from numpy import linalg

def continents():

 lat=[]

 lon=[]

 for lig in file('24840.dat') :

   ligne=lig.split()

   if len(ligne[0]) > 1 :

     lon.append(ligne[0])

     lat.append(ligne[1])

   else:

     plot(lon,lat,'k',linewidth=0.5)

     lat=[]

     lon=[]

m = Basemap(width=12000000,height=9000000,projection='lcc',\
            resolution='l',lat_1=42,lat_2=52,lat_0=47,lon_0=8)

m.scatter(xlon,xlat,s=45,c=z,vmin=0,vmax=30,cmap=cm.get_cmap('jet', 45),edgecolors='None')

continents() 

m.drawcountries(linewidth=0.3)

m.drawstates(linewidth=0.3)

ax=colorbar()

xlim(-6,10)

ylim(42,52)

show() 
```

我想看看法国的边界，但它不起作用......你看到缺少什么了吗？

# python - 使用非字符串关键字传递 dict 以在 kwargs 中运行

> ID：14981810
> 
> 赞同：12
> 
> 时间：2013-02-20T14:06:13.010
> 
> 标签：python, function, python-3.x, arguments

我使用具有签名功能的库`f(*args, **kwargs)`。我需要在 kwargs 参数中传递 python dict，但 dict 在关键字中不包含字符串

```
f(**{1: 2, 3: 4})
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: f() keywords must be strings 
```

我怎样才能在不编辑函数的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T14:10:16.470

根本不允许使用非字符串关键字参数，因此对于这个问题没有通用的解决方案。您的具体示例可以通过将您的键转换`dict`为字符串来修复：

```
>>> kwargs = {1: 2, 3: 4}
>>> f(**{str(k): v for k, v in kwargs.items()}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:10:21.903

我认为你能做的最好的就是过滤掉你的字典中的非字符串参数：

```
kwargs_new = {k:v for k,v in d.items() if isinstance(k,str)} 
```

原因是因为关键字参数*必须*是字符串。否则，他们会在另一边打开什么包装？

或者，您可以将非字符串键转换为字符串，但您会冒着覆盖键的风险：

```
kwargs_new = {str(k):v for k,v in d.items()} 
```

——考虑一下如果你从以下开始会发生什么：

```
d = { '1':1, 1:3 } 
```

# php - 如何解析 url 列表并跳过不需要的项目 (PHP)

> ID：14981812
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:06:22.777
> 
> 标签：php, parsing, text, text-files, output

我有一个包含很多不同网址的 txt 文件。我想解析列表并跳过一些 url 以获得最终的干净列表。请参阅以下列表的一部分：

```
http://www.example.com/example1/
http://www.example.com/example2/
http://www.example.com/example3/
http://www.example.com/example4/
http://www.example.com/example.js
http://www.example.com/example.css
http://www.example.com/example1.js?v=123
http://www.example.com/{path}
http://www.example.com/feed/
http://www.example.com/?p=66 
```

我想跳过所有**.js**或**.css**或**{path}**或**/feed/**或**?p=66**之类的 url ，然后再次将所有内容输出到 txt 文件中。我想用 PHP 做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:19:17.480

```
<?php 

  $list = "http://www.example.com/example1/
http://www.example.com/example2/
http://www.example.com/example3/
http://www.example.com/example4/
http://www.example.com/example.js
http://www.example.com/example.css
http://www.example.com/example1.js?v=123
http://www.example.com/{path}
http://www.example.com/feed/
http://www.example.com/?p=66";

  $arr = preg_split("/[\r\n]+/",$list);

  // check our input array
  print_r($arr);

  $map = array();
  foreach($arr as $v){
    if(!preg_match("/({path}|\.(js|css)|\?p=\d+|\/feed\/)$/",$v)){
      $map[] = $v;
    }
  };

  // check our output array
  print_r($map);

?> 
```

这假设您要匹配不以`{path}`or`.css`或`.js`or `?p=##`（其中 # 是数字）或结尾的网址`/feed/`。这就是为什么还有`/example1.js?v=123`被匹配的原因。要使其匹配字符串中的任何位置，而不是仅在末尾，请`$`从正则表达式的末尾（就在 word 之后`feed`）删除 。

## 我的控制台输出：

```
Array
(
    [0] => http://www.example.com/example1/
    [1] => http://www.example.com/example2/
    [2] => http://www.example.com/example3/
    [3] => http://www.example.com/example4/
    [4] => http://www.example.com/example.js
    [5] => http://www.example.com/example.css
    [6] => http://www.example.com/example1.js?v=123
    [7] => http://www.example.com/{path}
    [8] => http://www.example.com/feed/
    [9] => http://www.example.com/?p=66
)
Array
(
    [0] => http://www.example.com/example1/
    [1] => http://www.example.com/example2/
    [2] => http://www.example.com/example3/
    [3] => http://www.example.com/example4/
    [4] => http://www.example.com/example1.js?v=123
) 
```

# timer - 飞镖中 Future.of() 与 Timer.run() 的好处？

> ID：14981813
> 
> 赞同：4
> 
> 时间：2013-02-20T14:06:30.810
> 
> 标签：timer, dart, future

Dart 有多种创建、处理和返回异步函数的方法。最常见的方法之一是：

```
import 'dart:async';

var completer = new Completer();

// Previously this would have been new Timer(0, () => ....);
Timer.run(() => completer.complete(doSomethingHere()));
return completer.future; 
```

然而，dart 也直接为 Future 提供了一个构造函数，例如：

```
import 'dart:async';

return new Future.of(() => doSomethingHere()); 
```

我知道`Timer.run()`可以使用静态方法的返回值取消版本。并且该版本的代码略少，使用over`new Future.of()`是否有特别的好处（反之亦然）。还是只是我刚才提到的那些好处？`new Future.of()``Timer.run()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:01:17.283

`Future.of`返回一个 Future，`Timer.run`不返回任何东西。对我来说，这是主要的区别。

`Future.of`如果我想将一个值作为 Future 返回，我会使用它。

如果我想稍后运行某个函数，我会使用`Timer.run`它，并且我不关心它产生的值。

不过，一个很大的区别是*函数*的运行时间。

对于`Future.of`，该函数在当前事件循环中运行，并且只有它的*值*在下一个事件循环中可用。

对于`Timer.run`，函数在下一个事件循环中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:42:31.983

不要忘记它们是两种不同的东西。`Timer`可以在任何地方用于多种用途。例如，它可以在客户端用于等待布局发生，然后再运行更多代码。因此，它可能与期货没有任何关系。我有时在客户端代码中使用计时器来等待布局。

Timer 是一个通用类，用于延迟某些代码的运行。不管它是否与期货有关。另一个例子可能是客户端动画。与期货或异步处理数据无关。

然而，Future 是帮助您编写异步程序的 monad。基本上是传递普通回调函数的替代品。

在编写异步程序时使用`new Future.of()`，它适合您的情况（与`new Future.immediate()`.

`Timer`如果您想延迟某些代码的运行，请使用该类。

如果您想做的是使用期货进行异步编程并同时延迟代码，请忘记计时器类，除非您需要一些真正的延迟（超过 0/下一个事件）。

# ios - 为 iOS SDK6.1 arm7 编译 freetype2.4.2

> ID：14981816
> 
> 赞同：0
> 
> 时间：2013-02-20T14:06:43.123
> 
> 标签：ios, compilation, freetype

我正在尝试为 IOS 编译 freetype 2.4.2（这是该项目在其他平台上使用的版本），我目前不知道究竟应该做什么，因为我能找到的所有教程都非常过时或者是非常不清楚我应该从哪些命令中得到什么，

任何帮助都会很好谢谢

# ios - 从一些解析的 NSString 中提取文本

> ID：14981817
> 
> 赞同：1
> 
> 时间：2013-02-20T14:06:44.183
> 
> 标签：ios, objective-c, regex, nsstring, nsregularexpression

这是我的示例字符串，从远程服务器解析：

```
NSString *example = @"#parsed Value1:1a 2013-02-20 10:00:00 UTC Value2=2a Value3=3a Value4=4aKm Value5=A" 
```

我需要从上面的字符串中推断出单个 ValueS，分开，没有其他字符：

```
"1a"
"2013-02-20 10:00:00 UTC"
"2a"
"3a"
"4a"
"A" 
```

请建议我正确的代码来做到这一点（我已经尝试过使用正则表达式但没有成功），谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:25:26.660

如果格式保持不变，则无需使用正则表达式。

尝试使用`NSScanner`，尤其是方法`scanUpToString:intoString:`和`scanString:intoString:`

编辑：

这段代码应该是你需要的：

```
NSString *example = @"#parsed Value1:1a 2013-02-20 10:00:00 UTC Value2=2a Value3=3a Value4=4aKm Value5=A";

NSString *temp, *value1, *date, *value2, *value3, *value4, *value5;
NSScanner *scanner = [NSScanner scannerWithString:example];
// By default, NSScanner will skip whitespace - we don't want it to skip anything here
[scanner setCharactersToBeSkipped:[NSCharacterSet characterSetWithCharactersInString:@""]];
[scanner scanString:@"#parsed Value1:" intoString:&temp];
[scanner scanUpToString:@" " intoString:&value1];
[scanner scanString:@" " intoString:&temp];
[scanner scanUpToString:@" Value2=" intoString:&date];
[scanner scanString:@" Value2=" intoString:&temp];
[scanner scanUpToString:@" Value3=" intoString:&value2];
[scanner scanString:@" Value3=" intoString:&temp];
[scanner scanUpToString:@" Value4=" intoString:&value3];
[scanner scanString:@" Value4=" intoString:&temp];
[scanner scanUpToString:@" Value5=" intoString:&value4];
[scanner scanString:@" Value5=" intoString:&temp];
value5 = [example substringFromIndex:[scanner scanLocation]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:13:58.580

这些确切键名的正则表达式类似于：

```
#parsed Value1:(.*) (.*) Value2=(.*) Value3=(.*) Value4=(.*) Value5=(.*) 
```

如果列表是可变长度的，则可以在其中进行分组。`()?`如果需要任意键，则需要分组并重复可以检测到`key=value`模式的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T14:28:59.817

也可以使用 NSScanner 查看[link1](https://stackoverflow.com/questions/10663014/how-to-use-nsrange-or-nsscanner-in-ios)和[link2](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)

# configuration - 是否有任何 Windows 商店应用程序发布配置，如 app.config

> ID：14981820
> 
> 赞同：1
> 
> 时间：2013-02-20T14:07:06.800
> 
> 标签：configuration, windows-8, visual-studio-2012, release

我正在构建一个 Windows 8 商店应用程序，它将连接到一些后端提要。我已经准备好所有代码 - 但我需要为我们的测试环境和生产环境创建一个包。他们显然会使用不同的 URL。

在普通的 Windows 窗体/控制台应用程序中，我将拥有一个版本的二进制文件和两个 app.config 文件，它们将托管 URL。由于 Windows 8 是作为包创建的 - 有没有办法让这样的配置不包含在包中但单独存储并在安装过程中安装？目前，该应用程序不会进入 Windows 商店，而是会手动交付给一些设备。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:14:45.373

没有与 Windows 应用商店风格应用关联的 app.config 文件。但是，您可以将 XML 文件添加到您的应用程序包中，并在运行时使用[条件编译](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)和[ms-appx 协议](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)访问该文件。但是，您将没有与 app.config 相关联的所有实用功能。

# android - 从我创建的内部存储目录播放媒体

> ID：14981826
> 
> 赞同：1
> 
> 时间：2013-02-20T14:07:13.867
> 
> 标签：android, android-file

所以我在内部存储上创建了一个目录，如下所示：

```
File mediadir = getDir("tvr", Context.MODE_PRIVATE); 
```

然后我从服务器下载文件并将它们保存在这样的目录中：

```
URL url = new URL(urlString);
URLConnection conexion = url.openConnection();
conexion.connect();
int lenghtOfFile = conexion.getContentLength();
InputStream is = url.openStream();
Log.d("DOWNLOAD NAME",name);
FileOutputStream fos = new FileOutputStream(mediadir+name);
etc 
```

然后文件保存成功，接下来我想像这样播放它们：

```
String path = filelist[playListIndex].getAbsolutePath();
videoView = (VideoView) findViewById(R.id.videoView);
videoView.setVisibility(View.VISIBLE);
videoView.setOnCompletionListener(this);
videoView.setVideoPath(path);
videoView.start(); 
```

其中路径是：

```
/data/data/com.mypackage/tvr/video.mp4 
```

该文件不想播放此错误：

```
02-20 15:57:21.447: E/MediaPlayer(24143): error (1, -2147483648) 
```

并且在设备上弹出一条消息：无法播放视频，抱歉此视频无法播放。

这是权利问题还是什么？如果是的话，我在想，因为我创造了它们，我就拥有它们的权利？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:47:09.777

CommonsWare 有一个很好的例子来说明如何使用 VideoView。这是一个与不想播放视频有类似问题的人的链接： [Playing a video in VideoView in Android](https://stackoverflow.com/questions/3263736/playing-a-video-in-videoview-in-android)

这里还有一个他的示例的视频类，我在学习如何合并 VideoView 时发现它很有用： [https ://github.com/commonsguy/cw-advandroid/blob/master/Media/Video/src/com/commonsware/android /video/VideoDemo.java](https://github.com/commonsguy/cw-advandroid/blob/master/Media/Video/src/com/commonsware/android/video/VideoDemo.java)希望这会有所帮助。

我还将确保您在清单集中具有权限设置：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:05:03.570

问题可能出在视频编码上。Android FROYO 和 Gingerbread 不支持“基线”H264 以外的 H264 格式。因此，如果您的视频是 Mp4 和 H264 编码，请确保其 **“AVC 基线”**编码。在 windows/Linux 中使用“媒体信息”等工具并检查您的视频编码。如果可能，将视频转换为基线。

另一种解决方法是跳过 Videoview 并使用视频播放意图并将播放重​​定向到应用程序。系统将提示用户选择一个播放器来处理播放。显然，如果视频视图无法播放文件，默认播放器也无法处理该文件。您可以选择其他一些已安装的播放器，例如 Mx-Player，它将完美地流式传输文件。

# c# - 为什么在添加到集合时不为所有对象调用 Equals()

> ID：14981827
> 
> 赞同：12
> 
> 时间：2013-02-20T14:07:15.117
> 
> 标签：c#, .net, collections

我有一个类型，我在 IDictionary 中用作键。类型如下

```
public  class Employee
{
    public string Name { get; set; }
    public int ID { get; set; }

    public override bool Equals(object obj)
    {
        Employee emp = obj as Employee;
        if (emp != null)
            return emp.Name.Equals(this.Name);
        return false;
    }

    public override int GetHashCode()
    {
        return this.Name.GetHashCode();
    }
} 
```

现在我在我的主目录中创建了一个字典，如下所示

```
 IDictionary<Employee, int> empCollection = new Dictionary<Employee, int>();
        Employee emp1 = new Employee() { Name = "abhi", ID = 1 };
        Employee emp2 = new Employee() { Name = "vikram", ID = 2 };
        Employee emp3 = new Employee() { Name = "vikram", ID = 3 };

        empCollection.Add(emp1, 1);
        empCollection.Add(emp2, 2);
        empCollection.Add(emp3, 3); 
```

现在在调试时我发现当将emp1添加到集合中时，仅调用键类型的GetHashCode方法，之后当将emp2添加到集合中时，仅再次调用GetHashCode方法，但在emp3的情况下，GetHashCode和Equals方法都被调用被称为。

问这个问题可能看起来太天真了，但是为什么在将 eqImp2 对象添加到集合时不调用 Equals 方法。里面发生了什么。请解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T14:10:40.597

字典和所有其他类似的容器都使用哈希码作为快速检查：不同的哈希码意味着两个对象**绝对**不相等；相同的哈希码没有任何意义。的文档[`GetHashCode`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)通过说来指定这种行为

> 如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。

您的`emp1`和`emp2`生成不同的哈希码，因此不需要运行字典`Equals`；它已经知道它们是不平等的。另一方面，`emp2`并`emp3`​​生成相同的哈希码，因此字典必须调用`Equals`以确定它们是否确实相等，或者相同的哈希码是否只是偶然的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:11:45.997

在您的示例中，`GetHashCode`查看名称哈希码。emp3 与 emp2 同名，（“vikram”）。给定哈希码，它们是相等的，因此使用`Equals`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:12:37.687

emp2 和 emp3 具有相同的密钥。这将导致字典中的“键冲突”。它首先调用 GetHashCode() 并确定哈希码相同。然后它通过调用 Equals() 来确保它们相同。字典中的代码是：

```
int num = this.comparer.GetHashCode(key) & 2147483647;
...
if (this.entries[i].hashCode == num && this.comparer.Equals(this.entries[i].key, key)) 
```

显然，如果哈希码不匹配，它永远不必调用 Equals。

你应该得到一个像 ILSpy 这样的工具，然后你可以查看代码并自己找到答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T14:39:48.140

如果您继续这个实验，您将观察到一些特定于`Dictionary<TKey, TValue>`实现的行为，以及由于您实现的方式而需要的一些行为`GetHashCode`。

首先，重要的是要了解在比较对象是否相等时的作用`GetHashCode`和时间。[有关此问题](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)`Equals`的其他信息可用，但我将在此处重复基本规则：

1.  该`Equals`方法准确地确定了哪些对象相等，哪些对象不相等。需要在此方法中执行所有必要的检查，以便在返回之前进行最终确定。
2.  *哈希码*是根据您的对象的值计算得出的值。通常它比原始对象小得多（在我们的例子中，哈希码是一个 4 字节的整数）并且不一定是唯一的。然而，计算和相互比较比原始对象本身要快得多。
    *   当哈希码不需要唯一时，不同的哈希码表示不同的对象（即`Equals`肯定会返回假），但相同的哈希码并不意味着什么（即`Equals`可以返回真或假）。

将值与关键对象相关联的集合（例如`IDictionary<TKey, TValue>`在.NET 或`Map<K, V>`Java 中）利用散列码来提高实现效率。但是，由于[`Object.GetHashCode`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)特定的文档不要求结果是唯一的，因此这些集合不能单独依赖哈希码来获得正确的功能。**当两个对象具有相同的哈希码时，只有调用`Equals`才能区分它们。**您描述的插入的情况`emp3`属于这种情况：如果您尝试插入相同的值， [ `IDictionary<TKey, TValue>.Add`] 方法需要抛出 an ，并且只有调用才能确定新键是否等于先前插入的。`ArgumentException``Equals``emp3``emp3`

**其他实现特征**

特定的集合实现可能会导致`GetHashCode`比您预期更多的调用。例如，当[哈希表](http://en.wikipedia.org/wiki/Hash_table)的内部存储被调整大小时，实现可能会调用`GetHashCode`存储在集合中的每个对象。基于二叉树或 B 树的集合[可能](http://en.wikipedia.org/wiki/Binary_tree)只[调用](http://en.wikipedia.org/wiki/B-tree)一次`GetHashCode`（如果结果缓存在树结构中），或者可能需要`GetHashCode`在每次插入或查找操作期间调用多个对象（如果结果未缓存）。

有时哈希表实现需要调用`GetHashCode`多个对象，甚至可能`Equals`需要具有不同哈希码的对象，因为它们使用模算术将键放入“桶”中。其具体特征因一种实现方式而异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T14:11:22.983

那是因为**GetHashCode**是一个快捷方式。C# 将首先调用应该快速执行的**GetHashCode 。**如果两个对象具有不同的 HashCode，则无需调用假定更昂贵的**Equals**方法。只有当它们具有相同的 HashCode 时，它​​才会调用**Equals**。那是因为 HashCode 不保证是唯一的

# .net - Windows Azure 上的 AspPDF 和 AspJPEG

> ID：14981830
> 
> 赞同：6
> 
> 时间：2013-02-20T14:07:20.043
> 
> 标签：.net, dll, azure, regsvr32, comclass

我最近开始了将 .NET 应用程序迁移到 Windows Azure 云服务的过程。我们的应用程序严重依赖于许多 COM 类组件，这些组件包括 AspPDF（用于 PDF 制作和操作）和 AspJPEG（用于调整图像大小）。在典型的非云 IIS 设置中，我只需在生产服务器上注册 DLL（使用 regsvr32），一切都会好起来的！

在 Azure 中，过程略有不同，我将回答我自己的问题以帮助那些面临类似挑战的人。此方法可用于作为部署过程的一部分需要在服务器上注册的任何 dll。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:07:20.043

为了在 Windows Azure 云服务上注册 AspPDF 和 AspJPEG 组件，必须将 DLL 注册过程合并到部署例程中。当 Azure 解压应用程序时，它必须触发一个命令来注册 DLL，这必须在所有 VM 上持久保存，以确保这些依赖项在云环境中始终如一地工作。

为此，我们可以指示要在目标服务器上执行的命令文件。此任务在 ServiceDefinition.csdef 文件中定义如下：

```
<Startup>
  <Task commandLine="RegisterPersits.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

提升的执行上下文确保必须在服务上线之前执行此过程。Azure Fabric 控制器将在 BIN 文件夹中查找 .cmd 文件。您可以在记事本中创建 .cmd，然后更改扩展名。这是 .cmd 文件的内容。

```
chcp 1252>NUL
regsvr32 /s .\library\asppdf64.dll
regsvr32 /s .\library\aspjpeg64.dll
exit /b 0 
```

我们使用参数 /s 调用 regsvr32 工具，这样可以确保响应是无声的，即没有会混淆结构控制器的弹出窗口。这很重要，因为我浪费了大量时间想知道为什么部署过程挂在初始化阶段......添加 /s 参数解决了这个问题！

在我的例子中，我将 DLL 放置在一个名为 library 的文件夹中，但是您可以将它们放在任何您喜欢的位置，只要它们在 .cmd 文件中被正确引用。还要确保为 Visual Studio 中的启动命令中引用的任何 DLL 设置以下文件属性：

**构建操作：**内容

**复制到输出目录：**总是

注册 DLL 的这个额外过程为部署过程增加了几乎可以忽略不计的时间。AspPDF 特有的另一点是使用正确的 DLL 版本的重要性。Persits 发出 32 位和 64 位 dll，Azure VM 在 64 位环境中运行，因此在上述过程中注册 asppdf64.dll 很重要，注册 32 位 dll 会在您的应用程序中引发模糊错误。幸运的是，您不需要为 64 位版本的 AspPDF 购买单独的许可证。

我希望这将有助于其他面临类似问题的人将 com 类组件（如 AspPDF）迁移到 Azure。

# asp.net-mvc-4 - 如何在 Durandal 中使用 cshtml 文件？

> ID：14981833
> 
> 赞同：13
> 
> 时间：2013-02-20T14:07:24.570
> 
> 标签：asp.net-mvc-4, single-page-application, durandal

我在 VS2012 上获得了 DurandalJS StarterKit 模板......一切都很好......

但在某些观点中，我需要做这样的事情：

```
@if (Roles.IsUserInRole("Administrators"))
{
   <p>Test</p>
} 
```

但是，对于 durandal，我所有的视图都是“.html”文件......是否可以使用“.cshtml”文件来访问类似的信息？

或者有没有其他方法可以用 durandal 做到这一点？

初级

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-26T12:07:44.493

我这样做是这样的：

1.  为 Durandal 视图创建一个通用控制器：

    ```
    public class DurandalViewController : Controller
    {
      //
      // GET: /App/views/{viewName}.html
      [HttpGet]
      public ActionResult Get(string viewName)
      {
        return View("~/App/views/" + viewName + ".cshtml");
      }
    } 
    ```

2.  注册路线：

    ```
    routes.MapRoute(
        name: "Durandal App Views",
        url: "App/views/{viewName}.html",
        defaults: new { controller = "DurandalView", action = "Get" }
    ); 
    ```

3.  将 Views/web.config 复制到 /App/views/web.config（以便 Razor 视图在此位置工作）。

这让我可以使用正常的 Durandal 约定（甚至是视图的 html 扩展名），并将 durandal 视图作为 cshtml 文件放在其正常位置，而无需添加任何更多的服务器代码。

如果您还有静态 html 视图，您也可以将 cshtml 视图放在子文件夹中或使用普通的 MVC /Views 文件夹。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-17T05:53:43.093

我不建议将 ASP.NET MVC 与 Durandal 一起使用。

您可能想要做的是使用独立于 ASP.NET MVC 存在**的 Razor 视图引擎**（以获得编译器、强类型等的好处）。仅用于数据 I/O 的 WebAPI 就足以非常有效地创建 Durandal.js 应用程序。

如果您有兴趣将**Razor/CSHTML 与 Durandal 和 Knockout 一起使用，那么有一个名为****FluentKnockoutHelpers**的开源选项可能正是您正在寻找的。它提供了 ASP.NET MVC 的许多“不错”部分，允许您使用 Durandal 和 Knockout 的强大功能，几乎没有失败。

*   [来源](https://github.com/johnculviner/FluentKnockoutHelpers)

*   [使用 Durandal.js 的现场演示](http://durandaldemo.apphb.com/)

简而言之，它提供了一系列特性，使得进行 Durandal/Knockout 开发就像 ASP.NET MVC 一样简单。（您只需为大多数功能提供您的 JavaScript 模型所基于的 C# 类型。）您只需为复杂的情况编写 JavaScript 和未编译的标记，这是不可避免的，与 MVC 没有什么不同！（除了在 MVC 中，您的代码也很可能最终也会成为一个大的 jQuery 混乱，这就是您首先使用 Durandal/Knockout 的原因！）

**特征：**

*   使用类似于 ASP.NET MVC 的强类型、流畅的 lambda 表达式助手轻松生成 Knockout 语法
*   丰富的智能感知和编译器支持语法生成
*   流利的语法使创建自定义助手或扩展内置内容变得轻而易举
*   OSS 替代 ASP.NET MVC 助手：随意添加社区中每个人都可以使用的可选功能
*   只需几行代码，即可针对所有当前/未来的应用程序类型和更改轻松地提供基于 .NET 类型和 DataAnnotations 的验证
*   客户端 JavaScript 对象工厂（基于 C# 类型）在例如列表中创建新项目，零麻烦或服务器流量

**没有 FluentKnockoutHelpers 的示例**

```
<div class="control-group">
    <label for="FirstName" class="control-label">
        First Name
    </label>
    <div class="controls">
        <input type="text" data-bind="value: person.FirstName" id="FirstName" />
    </div>
</div>
<div class="control-group">
    <label for="LastName" class="control-label">
        Last Name
    </label>
    <div class="controls">
        <input type="text" data-bind="value: person.LastName" id="LastName" />
    </div>
</div>
<h2>
    Hello,
    <!-- ko text: person.FirstName --><!-- /ko -->
    <!-- ko text: person.LastName --><!-- /ko -->
</h2> 
```

**为 FluentKnockoutHelpers 提供 .NET 类型，您可以使用 Intellisense 和 Razor / CSHTML 中的编译器以风格方式执行此操作**

```
@{
  var person = this.KnockoutHelperForType<Person>("person", true);
}

<div class="control-group">
    @person.LabelFor(x => x.FirstName).Class("control-label")
    <div class="controls">
        @person.BoundTextBoxFor(x => x.FirstName)
    </div>
</div>
<div class="control-group">
    @person.LabelFor(x => x.LastName).Class("control-label")
    <div class="controls">
        @person.BoundTextBoxFor(x => x.LastName)
    </div>
</div>
<h2>
    Hello,
    @person.BoundTextFor(x => x.FirstName)
    @person.BoundTextFor(x => x.LastName)
</h2> 
```

查看**[Source](https://github.com/johnculviner/FluentKnockoutHelpers)**或**[Live Demo](http://durandaldemo.apphb.com/)**以详细了解 FluentKnockoutHelper 在不平凡的 Durandal.js 应用程序中的功能。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-24T18:46:00.107

是的，您绝对可以将 cshtml 文件与 Durandal 一起使用，并在服务器上利用 Razor。我认为这也意味着您需要 MVC，因此您也可以这样做并使用它的路由。

如果您不想要路由，那么您可以在 web.config 中设置 pages.Enabled，正如其他评论所建议的那样。

```
<add key="webpages:Enabled" value="true" /> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-21T04:12:19.257

我不建议您直接使用 .cshtml 文件作为视图。最好将 .cshtml 文件放在控制器后面。

例如，以 HotTowel 示例为例，编辑 /App/main.js，并将函数定义替换为以下内容：

```
define(['durandal/app', 
        'durandal/viewLocator', 
        'durandal/system',
        'durandal/plugins/router',
        'durandal/viewEngine', 
        'services/logger'],
function (app, viewLocator, system, router, viewEngine, logger) { 
```

请注意，我们添加了对 Durandal viewEngine 的引用。然后我们需要更换

```
viewLocator.useConvention(); 
```

和

```
viewLocator.useConvention('viewmodels', '../../dynamic'); 
viewEngine.viewExtension = '/'; 
```

viewLocation.useConvention 的第一个参数将 /Apps/viewmodels/ 目录设置为视图模型 js 文件的位置，但对于视图位置，使用 URL [http://example.com/dynamic/](http://example.com/dynamic/)，扩展名为 ' /'。因此，如果 Durandal 正在寻找名为“shell”的视图，它将引用[http://example.com/dynamic/shell/](http://example.com/dynamic/shell/)（这是因为视图目录是相对于 viewmodels 目录映射的，因此 /App/viewmodels/ ../../dynamic 会给你简单的 /dynamic）。

按照惯例，这个先前的 URL ( [http://example.com/dynamic/shell/](http://example.com/dynamic/shell/) ) 将被映射到控制器 DynamicController 和动作“Shell”。

在此之后，您只需添加一个控制器 - DynamicController.cs，如下所示：

```
// will render dynamic views for Durandal
public class DynamicController : Controller
{
    public ActionResult Shell()
    {
        return View();
    }

    public ActionResult Home()
    {
        return View();
    }

    public ActionResult Nav()
    {
        return View();
    }

    public ActionResult Details()
    {
        return View();
    }

    public ActionResult Sessions()
    {
        return View();
    }

    public ActionResult Footer()
    {
        return View();
    }
} 
```

为上述每个操作创建 .cshtml 文件。通过这种方式，您可以使用控制器、服务器端 IoC 等为您的 SPA 生成动态视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-24T15:44:57.860

DurandaljS 是一个客户端框架，主要为单页应用程序 (SPA) 奠定了坚实的基础。我假设您使用 asp.net Web API 作为您的服务器技术。在这种情况下，您可以在 API 控制器中确定用户的角色，并根据该返回数据给客户端。在客户端上，您可以使用 Knockout "if" 绑定来显示/隐藏页面的某些区域。

您可能可以做的是将此代码放在 Index.cshtml 中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-27T21:32:33.650

以下链接显示了如何自定义 moduleid 到 viewid 映射

[http://durandaljs.com/documentation/View-Location/](http://durandaljs.com/documentation/View-Location/)

按照惯例，durandal 尝试在以下步骤中查找查看 url

1）检查对象是否具有`getView()`返回dom或字符串的函数（视图的url）

2) 如果对象没有 getView 函数，则检查对象是否具有`viewUrl`属性

3) 如果上述两个步骤未能生成 url 或 DOM 视图 drundal 符合默认约定

使用 main.js 中定义的视图 url（视图文件夹的路径）将 moduleid 映射`xyz.js`到视图`xyz.html`

所以对于 moduleid xyz.js 视图的路径将是 `views/xyz.html`

您可以通过覆盖`convertModuleIdToViewId`函数来覆盖此默认映射行为。

因此，您可以通过多种方式为特定模型（.js 对象）自定义视图 url

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-09T10:01:40.707

我对 Durandal 做了一个扩展，它使您能够将 applicationContent div 与 applicationHost div 一起放置在您的 cshtml 文件中。在 applicationContent 中，您现在可以同时使用 ASP .Net MVC 语法和敲除绑定。

我唯一做的就是在 viewLocator.js 文件中添加一些额外的代码来查找 applicationContent div：

```
 locateViewForObject: function(obj, area, elementsToSearch) {
        var view;

        if (obj.getView) {
            view = obj.getView();
            if (view) {
                return this.locateView(view, area, elementsToSearch);
            }
        }

        if (obj.viewUrl) {
            return this.locateView(obj.viewUrl, area, elementsToSearch);
        }

        view = document.getElementById('applicationContent');
        if (view) {
            return this.locateView(view, area, elementsToSearch);
        }

        var id = system.getModuleId(obj);
        if (id) {
            return this.locateView(this.convertModuleIdToViewId(id), area, elementsToSearch);
        }

        return this.locateView(this.determineFallbackViewId(obj), area, elementsToSearch);
    }, 
```

您的原始 cshtml 文件现在可以执行以下操作：

```
<div class="row underheader" id="applicationContent">
<div class="small-5 columns">
    <div class="contentbox">
        @using (Html.BeginForm("Generate", "Barcode", FormMethod.Post, Attributes.Create()
                                                                                    .With("data-bind", "submit: generateBarcodes")))
        {
            <div class="row formrow">
                <label for="aantalBijlagen">@Translations.Label_AantalBijlagen</label>
            </div>
            <div class="row">
                <select name="aantalBijlagen" class="small-6 columns">
                    <option>0</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                </select>
            </div>
            <div class="row">
                <button class="button right" type="submit" id="loginbutton"><span class="glyphicon glyphicon-cog"></span> @Translations.Action_Generate</button>
            </div>
        }
    </div>
</div>
<div class="small-7 columns" data-bind="if: hasPdfUrl">
    <div class="contentbox lastcontent">
        <iframe data-bind="attr: {src: pdf_url}"></iframe>
    </div>
</div> 
```

[你可以在这里](https://github.com/vermegi/Durandal)找到我的 durandal 项目的分支和一篇关于我在[这里](http://proq.blogspot.be/2014/02/extending-durandal.html)做了什么和如何做的小博文。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T18:29:13.460

我对 DurandalJS 不是很熟悉，但因为它是一个客户端系统，所以在服务器上使用什么技术来生成 HTML 标记应该没有区别。因此，如果您使用 Razor CSHTML 文件在服务器上生成 HTML，DurandalJS 应该可以正常工作。

如果您遇到特定错误，请分享该错误，但我想不出它不起作用的任何原因。

# java - 加入两个集合并获得一个随机元素

> ID：14981839
> 
> 赞同：0
> 
> 时间：2013-02-20T14:07:44.183
> 
> 标签：java

我需要加入两个`Collection<String>`，获取 n 个随机元素并将它们从存储它们的原始集合中删除。

要加入集合，我考虑迭代它们并存储在自定义地图结构中，以便：

1.  存储相同的密钥 n 次
2.  获取原始集合。

有没有一种简单的方法可以做到这一点？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:27:31.940

这个怎么样：

```
Collection<String> collection1 = new ArrayList<String>();
Collection<String> collection2 = new ArrayList<String>();

List<String> allElements = new ArrayList<String>(collection1);
allElements.addAll(collection2);
Collections.shuffle(allElements);

Random random = new Random();
int n = 10;
List<String> randomResults = new ArrayList<String>(n);
for (int i = 0; i < n && !allElements.isEmpty(); i++) {
  String randomElement = allElements.remove(random.nextInt(allElements.size()));
  randomResults.add(randomElement);
}

collection1.removeAll(randomResults);
collection2.removeAll(randomResults); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:04:01.080

以下内容对您有用吗？

```
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Random;
import java.util.Set;

import com.google.common.collect.Iterables;
import com.google.common.collect.Lists;
import com.google.common.collect.Sets;

public class Combiner {
    private static final Random rnd = new Random();

    public static void main(String[] args) {
        Collection<String> boys = Sets.newHashSet("James", "John", "andrew",
                "peter");
        Collection<String> girls = Sets.newHashSet("mary", "jane", "rose",
                "danny");

        // Combine the two
        Iterable<String> humans = Iterables.concat(boys, girls);

        // Get n Random elements from the mix
        int n = 2;
        Collection<String> removed = randomSample4(humans, n);

        // Remove from the original Collections
        Iterables.removeAll(boys, removed);
        Iterables.removeAll(girls, removed);

        // or even
        boys.removeAll(removed);
        girls.removeAll(removed);

        // And now we check if all is well
        System.out.println(boys);
        System.out.println(girls);

    }

    public static <T> Collection<T> randomSample4(Iterable<T> humans, int m) {
        List<T> sample = Lists.newArrayList(humans);
        Set<T> res = new HashSet<T>(m);
        int n = sample.size();
        for (int i = n - m; i < n; i++) {
            int pos = rnd.nextInt(i + 1);
            T item = sample.get(pos);
            if (res.contains(item))
                res.add(sample.get(i));
            else
                res.add(item);
        }
        return res;
    }
} 
```

randomSample4 方法已复制自此[博客](http://eyalsch.wordpress.com/2010/04/01/random-sample/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:15:06.270

有趣的是，您想为此使用地图。我建议使用`MultiMap`（`Google's Guava`例如）。它允许您持有一个键，然后是一个`Collection`值，所有这些都属于该键。因此，您将只有两个键（对应于您的原始键`Collections`）。

另一种解决方案是将全部添加`Collections`到第三个 a`Collection`中（有一种`addAll(Collection c)`方法可用）。如果没有重复值，您可以在迭代时检查第三个集合中的某个项目是否属于其他两个集合中的任何一个。

这些是实现您提出的任何问题的基本方法，但值得一试。

希望这些指针对您有所帮助！

# javascript - 用于从另一个 .aspx 加载地图的 Jquery 解决方案？

> ID：14981841
> 
> 赞同：1
> 
> 时间：2013-02-20T14:07:47.727
> 
> 标签：javascript, jquery, asp.net, html, css

试图实现一个 Jquery 打印模板 (C# ASP.net)，该模板从我的 Default.aspx 获取我的地图并将其附加到打印页面 (Print.htm) 以便我可以编辑 HTML。至今...

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"</script>

  <script type="text/javascript">

  $(document).ready(function() {
  $("#Printbtn").click(function() {  

  var mapObj = $("MapCell_Map1");
  var mapHtmlStr = mapObj.html();

         mapHtmlStr = mapHtmlStr.replace(/CURSOR: crosshair; /g, "");
         mapHtmlStr = mapHtmlStr.replace("Maps['Map1'].pendingTiles.remove",          "return;");
         mapHtmlStr = mapHtmlStr.replace("Maps['Map1'].pendingTiles.remove", "return;");
         mapHtmlStr = mapHtmlStr.replace("Maps['Map1'].pendingTiles.remove", "return;");
         mapHtmlStr = mapHtmlStr.replace("Maps['Map1'].pendingTiles.remove", "return;");
         mapHtmlStr = mapHtmlStr.replace("Maps['Map1'].keyFocus=true;", "");

        $.ajax({url:"print.htm", context: document.body, 
        success: function(response){

        var printDoc = $(response);
        printDoc.find("#mapPanel").html(mapHtmlStr);
        var pwin = window.open("Print.htm");
        var pdoc = window.document.open();
        pdoc.write(printDoc.html());
        pdoc.close();

        });

        return false;

  });
  });     
</script> 
```

不会触发，只是在单击按钮后发回...

```
<asp:Button runat="server" id="Printbtn" Text="Print" Forecolor="white"/> 
```

打印.htm 页...

```
html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

</head>
<body>
<div id="MapPanel">

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:21:15.203

如果您要添加的 Html 是静态的，您可以将单独的 Html 文件加载到内存中，然后在将内容写入新窗口之前将动态 Html 添加到隐藏的 div

jQuery 示例（未经测试）：

```
function printmap() {
    var mapObj = $("#Map1");
    var mapHtmlStr = mapObj.html();
    // snip - do string replacements as shown in question
    $.ajax({url:"print.html", context: document.body, 
        success: function(response){
            var printDoc = $(response);
            printDoc.find("#mapPanel").html(mapHtmlStr);
            var pwin = window.open("#");
            var pdoc = window.document.open();
            pdoc.write(printDoc.html());
            pdoc.close();
    });
} 
```

在 Javascript 中加载 Html 文件的更多非 jQuery 示例显示在这篇[文章](https://stackoverflow.com/questions/3535055/load-html-file-contents-to-div-without-the-use-of-iframes)中：

# eclipse - Eclipse EGit：获取/推送永无止境

> ID：14981842
> 
> 赞同：0
> 
> 时间：2013-02-20T14:07:48.830
> 
> 标签：eclipse, push, fetch, egit

我将 EGit 2.2 与 Eclipse Juno 一起使用。到目前为止，一切都或多或少没问题。

但是，一旦我的队友上传了许多大文件（超过 2 Gig），我的 fetch 和 push 操作就永远不会结束。（我的网络连接速度很快。）

我该如何解决/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:13:18.740

好吧，我不是一个非常有经验的 git 用户。所以我用一种直接的方式解决了这个问题：创建一个新的 Eclipse 工作区并将远程存储库克隆到新的工作区。获取和推送操作现在可以正常工作了。

# gnuplot - Gnuplot 粗线与轴重叠

> ID：14981843
> 
> 赞同：0
> 
> 时间：2013-02-20T14:07:48.297
> 
> 标签：gnuplot

嘿嘿！

我需要用 gnuplot 做一些线条。但是由于地块很小，我想让这些线条变胖。然而，它们现在与轴重叠。并进入正常画面。我怎样才能剪掉那些线，让他们不这样做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:38:29.880

如果您正在绘制数据，您可以调整整体 x 和 y 范围，使线条不与边界重叠：

```
set xrange [xmin:xmax]
set yrange [ymin:ymax] 
```

如果要绘制函数，还可以在绘制时通过调整范围来截断线：

```
plot [xmin:xmax][ymin:ymax] ... 
```

这有点棘手，因为无论如何该函数都会自动转到绘图的边缘。如果是这种情况，您可以为空行指定更大的范围：

```
plot [-2:2][-2:2] NaN notitle, [-1:1] x**2 title 'x^2' 
```

# asp.net - Web 部署包和程序集版本

> ID：14981847
> 
> 赞同：1
> 
> 时间：2013-02-20T14:07:54.787
> 
> 标签：asp.net, iis-7, visual-studio-2012, web-deployment, msdeploy

我有一个项目，它由 3 个不同的项目/程序集（数据访问层、业务层和 Web 应用程序）组成。我正在使用 Visual Studio 2012 和 Publish As Web Deploy Package 选项。在发布后构建的产品中，我获得了所需的文件并使用 msdeploy.exe 将网站安装到 IIS。现在，他的 bin 文件夹中的网站具有所有必需的引用（dll 的 - businesslayer.dll、datalayer.dll）。

起初，这是成功的场景。但后来我想做以下事情。如果我更改某些 dll 上的程序集文件版本，并重新编译和重新发布网站，并重新执行 msdeploy 操作，则只有具有新程序集信息的 dll 会在 IIS 上得到更新。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:57:21.057

MSDeploy 已经为您处理了。部署时，仅上传更改的文件。

来自 IIS 团队的 Kristina Olson：

> Web Deploy 分两部分进行增量同步，因此在第一部分中它仅发送有关包中文件内容的元数据以确定哪些文件实际需要更新，因此在第二部分中只有那些增量更新文件通过网络发送。基本上每个文件的元数据（如名称、大小、写入时间）都是通过网络发送的，但实际文件内容不是，除非文件需要更新

# css - 铬填充百分比+宽度百分比不加在一起

> ID：14981856
> 
> 赞同：0
> 
> 时间：2013-02-20T14:08:29.700
> 
> 标签：css, google-chrome

在Firefox中，我的结果符合预期。我正在尝试添加`width`并`padding`弥补全尺寸。在 chrome 中，这似乎不起作用，

```
.tab-content {

padding: 10px 5% 10px 5%;
width:100% !important; 
```

}

在 Firefox 中，这会导致它运行 110%（我所期望的），在 chrome 中 100%，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:29:29.803

如果您在 CSS2 中使用 100%，则意味着元素的最终宽度（不是 CSS 宽度）将是：border-left + padding-left + width + padding-right + border-right。

因此，在您的情况下，它被解释为 110%：

0 + 5% + 100% + 5% + 0 = 110%

一个完美的解决方案可能是：

```
.tab-content {
    padding: 10px 5% 10px 5%;
    width:90%;
} 
```

您可以使用CSS3 的*box-sizing*属性，但由于如何解释它，它有一些错误。**我不建议使用它**。如果使用它，CSS width 属性将包括边框和填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:16:00.793

试试看`-webkit-box-sizing`，可能是这个问题。

更多信息在[CSS 技巧](http://css-tricks.com/box-sizing/)

# java - 将源文件刻录到 CD/DVD

> ID：14981861
> 
> 赞同：-4
> 
> 时间：2013-02-20T14:08:51.487
> 
> 标签：java

我创建了一个名为“WordHunt”的游戏，我想将它刻录到 cd/dvd..

有没有一种正确的方法可以将 java 文件特别是 GUI 刻录到 cd/dvd 中？有没有关于它的教程？你能把它给我看看吗？我真的很想学习它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:13:02.640

我假设你有一个游戏，你想从 CD/DVD 安装你用 Java 编写的游戏。为此，您可能想要使用一系列[免费提供的安装程序生成器](http://java-source.net/open-source/installer-generators)之一（在[此处](https://stackoverflow.com/questions/5396778/create-windows-installer-for-java-programs)找到）。

如果实际上您只是想创建一个自动启动 Java 游戏的 CD/DVD，那么[Windows 自动启动过程的解释](http://www.phdcc.com/shellrun/autorun.htm)可能会对您有所帮助：

> [...]
> 
> 如果 Windows 在 CD 的根目录中找到名为 AUTORUN.INF 的（纯文本）文件，则它会按照该文件中的说明按照上述说明运行程序。此示例 AUTORUN.INF 文件告诉 Windows 运行程序 shellrun.exe（从 CD 的根目录），这反过来将在用户的默认浏览器中显示网页 default.htm。其他选项如下所述。

```
[autorun]
open=shellrun.exe default.htm
icon=shellrun.exe
action=Start ShellRun-CD
label=ShellRun-powered CD 
```

> 使用 Windows 记事本应用程序编辑纯文本文件（它位于开始+所有程序+附件菜单中）。您的 CD 用户可能已关闭 AutoRun。这可能是因为他们担心病毒。此外，如果他们在插入 CD 时按下 Shift 键，自动运行将被禁用。
> 
> 没有办法强制您的用户使用 AutoRun。因此，最好提供说明以便用户知道如何启动您的 CD，例如告诉他们在浏览器中打开文件 default.htm。如果非 Windows 用户可能查看您的 CD，则也需要这些说明。
> 
> [...]

* * *

话虽如此，这个问题的更“类似 Java”的解决方案可能是类似于[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)应用程序。在进行物理分发之前，您可能想研究该技术:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:45:11.930

> 有没有一种正确的方法可以将 java 文件特别是 GUI 刻录到 cd/dvd 中？

不要这样做！

如今，向用户分发软件的最佳方式是通过网络。要通过链接部署基于 Java 的桌面客户端，请查看[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

# silverlight - Silverlight OOB 中的自动填写表单

> ID：14981864
> 
> 赞同：2
> 
> 时间：2013-02-20T14:08:57.827
> 
> 标签：silverlight, silverlight-oob

我有一个 Silverlight 浏览器外 (OOB) 应用程序，其中有一个 WebBrowser 控件。内部网络浏览器中显示的网站来自与应用程序 xap 文件不同的域。**如何自动填写内部浏览器中显示的表单？**最好直接使用 Silverlight 或 JavaScript。

我试图从 silverlight 应用程序调用外部 JavaScript 代码：

```
webBrowser.InvokeScript ("eval", "document.getElementById('formField1').value = 'value1';" +
                          "document.getElementById('formField2').value = 'value2';"+
                          "document.forms[0].submit();"); 
```

显然，由于安全原因，Silverlight 限制了此功能（我认为是跨站点脚本）。

> [WebBrowser.InvokeScript](http://msdn.microsoft.com/en-us/library/cc491132%28v=vs.95%29.aspx)
> 
> 执行在当前加载的 HTML 中定义的指定脚本。

由于我的 JS 代码没有加载到当前显示在 Web 浏览器控件中的 HTML 中，因此我不能使用这种方法。

最明显的解决方案是修改目标网站以包含我的 JS 代码。但我想听听其他一些选择。

# sql - 如果日期是星期六或星期日，SQL 替换日期值

> ID：14981866
> 
> 赞同：0
> 
> 时间：2013-02-20T14:09:06.323
> 
> 标签：sql, sql-server, tsql

（对不起，我想不出更好的标题）

我创建了以下选择语句 (SQL Server) 作为视图工作。

```
SELECT DISTINCT 
       dbo.ECB.Currency + '-' + 
           CAST(dbo.ECB.Date AS varchar(30)) AS ComboDate, 
       dbo.ECB.Rate AS ECBrate 
FROM 
    dbo.ECB 
INNER JOIN
    dbo.MyTable ON dbo.ECB.Date = dbo.MyTable.CutoffDate 
                AND dbo.ECB.Currency = dbo.MyTable.MyCurrency 
```

**我的问题：**

我注意到的是，我的**CutoffDate列中有****周六**和**周日**的日期，但日期列中没有 - 这意味着我没有那些日子的费率。**`ECB`**

 **由于我使用`CutoffDate`Excel 计算，我希望视图将周六和周日的日期值“替换”为周五。

我找到了这个工作片段并根据我的需要对其进行了修改。

```
SELECT 
    DISTINCT
    CASE WHEN DATEPART(weekday, dbo.CutoffDate) IN (6, 7) 
         THEN DATEADD(d, -((DATEPART(weekday, dbo.CutoffDate) + 1 + @@DATEFIRST) % 7), dbo.CutoffDate) 
         ELSE dbo.CutoffDate
    END
FROM
    MyTable 
```

现在我需要找到一种方法来结合这两种结构，这就是我希望你能帮助我的地方。

我想将第二个 select 语句添加到我的视图中，但没有这样做。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:14:39.070

如果您将`case`语句移动到连接中，它应该可以工作。

改变

```
dbo.MyTable ON dbo.ECB.Date = dbo.MyTable.CutoffDate 
```

到

```
dbo.Mytable ON dbo.ECB.Date = case when datepart(weekday, dbo.CutoffDate) IN (6,7) 
    then dateadd(d, -((datepart(weekday, dbo.CutoffDate) + 1 + @@DATEFIRST) % 7), dbo.CutoffDate) 
    else dbo.CutoffDate 
end 
```

希望这可以帮助。**

# cross-compiling - chroot 或虚拟监狱环境——用于交叉编译？

> ID：14981867
> 
> 赞同：1
> 
> 时间：2013-02-20T14:09:11.067
> 
> 标签：cross-compiling, embedded-linux, chroot

我很期待在我的主机 Ubuntu 上为我的 ARM 目标进行编译。
[http://www.raspberrypi.org/phpBB3/viewtopic.php?f=31&t=8478](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=31&t=8478)

上面的链接声明使用 chroot 并直接将您的程序编译到主机上目标的根文件系统中。

有人建议使用像 scratchbox 这样的监狱虚拟环境。
[为特定目标平台设置交叉编译环境](https://stackoverflow.com/questions/2336750/setting-up-a-cross-compilation-environment-for-a-specific-target-platform)

[https://en.wikipedia.org/wiki/Chroot](https://en.wikipedia.org/wiki/Chroot)

```
The chroot mechanism is not intended to defend against intentional tampering by privileged (root) users. On most systems, chroot contexts do not stack properly and chrooted programs with sufficient privileges may perform a second chroot to break out. To mitigate the risk of this security weakness, chrooted programs should relinquish root privileges as soon as practical after chrooting, or other mechanisms – such as FreeBSD Jails - should be used instead. Note that some systems, such as FreeBSD, take precautions to prevent the second chroot attack.[1]
So i am investigating on it for few days here i am not able to understand what above statement means. 
```

1> 与 chroot 相比，虚拟监狱环境有什么优势？

2> chroot 是否会影响所有打开的终端或.. 运行命令的特定终端？

3> 我们究竟应该使用什么来交叉编译 Jail，比如 scratch-box 或 chroot。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T00:06:37.747

维基百科谈论 chroot 的安全性，因为 chroot 经常与[沙箱](https://en.wikipedia.org/wiki/Sandbox_(computer_security)) *（不提供 chroot）*或其他旨在提供安全性和隔离的人进行比较。
[chroot()](https://en.wikipedia.org/wiki/Chroot "您需要记住什么是父子进程：") *（它是一个 UNIX 系统调用）*是将明显的根目录 ( `/`) 更改为系统调用指向的另一个目录的过程。这意味着如果 /dir/target 的 chroot 可执行文件想要访问加载`/lib/ld-linux.so.2`*（可执行文件中的硬编码路径）*，真正的访问将发生在`/dir/target/lib/ld-linux.so.2`
所以这意味着程序需要访问的每个文件和库都需要有它们通常的chroot 路径*（本例中为 /dir/target* ）的真实路径*（以 为前缀`/`）**. 如果您在 chroot 中使用完整的系统，您最终将使用 chroot 路径中描述的目录结构，`man hier`但前缀*（对于 chrooted 程序）*具有 chrooted 路径。这也意味着您可以使用不同***架构***的不同二进制文件（如果您的 CPU 支持多个二进制文件；例如提供一种隔离）。*

 *正如您在查看 chroot 时所看到的，主要目的并不是提供安全性，而是用于其他[目的](https://en.wikipedia.org/wiki/Chroot#Uses)，从 Linux 中的 initramfs 根切换到磁盘上的挂载根（除了进程 mount -o移动）。
但是，正如[Wikipedia 文章所述](https://en.wikipedia.org/wiki/Chroot#Limitations)，某些实现（例如 FreeBSD）选择提供一定级别的安全性：例如禁用在 chroot 中创建第二个 chroot 的可能性。当维基百科告诉 chroot 需要以 root 身份运行时，它是错误的。今天的大多数系统都具有比用户/组权限更[细粒度的机制。](https://stackoverflow.com/a/6763681/2284570)

Jails 旨在直接提供隔离，它允许限制进程可能使用的 RAM 和 CPU 数量；禁用共享内存；限制权限...
某些实现（例如使用沙盒命令）不提供 chroot。监狱在[操作系统级别的虚拟化中有应用，或者在](https://en.wikipedia.org/wiki/Operating_system-level_virtualization)[测试特殊代码](https://en.wikipedia.org/wiki/Sandbox_(software_development))时避免损坏系统的其余部分。
如果您以沙箱命令为例，您会发现它不能单独使用备用根目录结构。

[http://www.raspberrypi.org/forums/viewtopic.php?f=31&t=8478](http://www.raspberrypi.org/forums/viewtopic.php?f=31&t=8478)提到[了 qemu-user](https://wiki.debian.org/QemuUserEmulation)，这显然是为了测试程序而不必将它们放在 Rasberry Pi 上。这与虚拟机不同，因为这里没有虚拟化硬件：程序的二进制指令被转换为本机指令，这意味着系统调用的处理就像程序在本机运行一样。
这里需要使用不同的根目录结构：一些共享对象文件路径名在所有发行版和体系结构中都是通用的*（例如`/lib/ld-linux.so.2`）*. 您不能将多个架构混合到同一个二进制文件中。如果您将共享库替换为其 ARM 等效项，则这些文件将无法用于本机可执行文件。出于同样的原因，qemu-user 或整个目标系统需要静态编译。

我真的建议您安装并设置[binfmt](https://en.wikipedia.org/wiki/Binfmt_misc)。它将使您能够通过自动启动 qemu-arm-static 命令来运行程序，就好像它们具有与您的机器相同的体系结构......
然后您可能想要编译软件而不进行交叉编译，只需在内部安装本机 ARM 编译器你的chroot。*

# sql - 停止长查询 - 关键命令

> ID：14981868
> 
> 赞同：0
> 
> 时间：2013-02-20T14:09:11.467
> 
> 标签：sql, db2

在查询大表时，我经常会这样做：

`select * from table fetch first 50 rows only;`

来限制结果。

如果我不小心做了一个：

`select * from large_table`

并且需要停止查询，如果我点击`CTRL+C`，它将让我退出 db2 提示符。是否有一个关键命令可以停止查询并保持我的会话？

编辑：这全部来自命令行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:12:13.660

也许，您可以使用[CANCEL QUERY](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0010089.htm)命令。

# rdf - SparQL - 列出城市

> ID：14981872
> 
> 赞同：2
> 
> 时间：2013-02-20T14:09:27.273
> 
> 标签：rdf, sparql, wikipedia, dbpedia

我正在尝试使用 SPARQL从[Wikipedia/dbpedia列出丹麦的所有城市。](http://en.wikipedia.org/wiki/List_of_cities_in_Denmark_by_population)

我已经尝试了很多东西，但我无法让它工作。这就是我想出的：

```
SELECT *
WHERE
{
    <http://dbpedia.org/resource/List_of_cities_in_Denmark_by_population> <http://dbpedia.org/ontology/PopulatedPlace>  ?city                  
} 
```

有什么建议或想法吗？任何人都知道如何找出维基百科文章中存在哪些实体？

这是一项学校作业，所以我只是在寻找建议或指导，而不是一个完整的解决方案。这是一个很好的[查询](http://dbpedia.org/snorql/)网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:15:15.983

您的查询可能仅限于 dbpedia 知道其人口的城市。这个可能更好：

```
select ?s where { 
?s a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark>
} 
```

它返回 318 个实体。

# android - 在应用程序标签中设置应用程序名称不起作用

> ID：14981875
> 
> 赞同：10
> 
> 时间：2013-02-20T14:09:31.837
> 
> 标签：android, string, label, android-manifest, launch

所以我有一个带有生成登录屏幕的 Android 应用程序（您可以直接从 Eclipse 创建）。那行得通。问题是这样的：我已将登录屏幕设置为启动器活动。这行得通。不幸的是，该应用程序随后被称为登录活动的标签参数。这意味着应用程序的 android:label 值被简单地忽略。

这是我的代码，因为我的问题听起来很模糊：

```
 <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"  <!-- the app name i want it to have -->
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.test.testytest.MainActivity"
                android:configChanges="orientation"
                android:label="@string/app_name" >

            </activity>

<!-- some more activities -->

            <activity
                android:name="com.test.testytest.LoginActivity"
                android:label="@string/title_activity_login" <!-- the name the app is called in the drawer etc. -->
                android:windowSoftInputMode="adjustResize|stateVisible" >
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            </activity>
    </application> 
```

字符串.xml：

```
<string name="app_name">Testy Test!</string> 
```

字符串活动登录：

```
 <string name="title_activity_login">Sign in</string> 
```

当我将登录活动的字符串更改为 app_name 时，应用程序的名称也会更改。但我很确定应该按照 android:label in 中的定义调​​用该应用程序

希望你能帮助我或指出我的错误（也许我只是错过了一些细节）。

一点编辑：我不想更改我的登录活动的标签，因为它应该保持“登录”。它也应该是第一个被调用的活动。但是抽屉里的 App Name 应该是 .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:27:59.067

感谢 Geobits：

这是解决方案[如何为启动器而不是活动标题设置不同的标签？](https://stackoverflow.com/questions/3488664/android-launcher-label-vs-activity-title)

> > 找到解决方案！
> 
> 显然，“意图过滤器”可以具有标签属性。如果它不存在，则标签是从父组件（活动或应用程序）继承的。因此，使用它，您可以为启动器图标设置标签，同时仍然让 Activity 具有自己的标题。
> 
> [http://developer.android.com/guide/topics/manifest/intent-filter-element.html](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)
> 
> android:label="@string/title_home_activity"
> android:icon="@drawable/icon">

# c# - 选择无法打印到控制台

> ID：14981876
> 
> 赞同：5
> 
> 时间：2013-02-20T14:09:31.900
> 
> 标签：c#, linq, select

我希望`Select`用作功能性foreach。当我执行以下操作时，我希望它能够打印

```
foo
bar
baz 
```

但是它不打印任何东西。怎么来的？代码是

```
List<String> strings = new List<String>(){"foo", "bar", "baz"};
strings.Select(st => { Console.WriteLine(st); return 1; }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T14:10:35.400

**使用 ForEach**：

```
List<String> strings = new List<String>() { "foo", "bar", "baz" };
strings.ForEach(st => { Console.WriteLine(st);  }); 
```

通过使用 Select 您基本上定义了具有以下主体的匿名函数。

```
Console.WriteLine(st); 
return 1; 
```

因此，Console.WriteLine 只会在您遍历列表时触发，如下所示：

```
var x= strings.Select(st => { Console.WriteLine(st); return 1; });

foreach (var i in x){ } 
```

或者`x.ToList()`

这是错误的，使用 ForEach :)

# java - 是否可以在 Android 本机应用程序中使用 HTML？

> ID：14981878
> 
> 赞同：2
> 
> 时间：2013-02-20T14:09:32.023
> 
> 标签：java, android, html, native

我正在开发android原生应用程序。我正在使用图像和文本。所以，我决定在布局中使用 HTML。但我不知道这是否可能以及如果可能的话如何。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T14:12:10.123

您可以在布局中渲染 a `WebView`。例如，这`WebView`可以指向远程或本地资源，例如 HTML/JS/CSS 文件。

以下是在布局中声明 Webview 的方法：

```
<WebView
    android:id="@+id/mywebview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:visibility="visible" /> 
```

并在您的代码中使用/初始化它：

```
/* Retrieve your webview and manipulate it using a reference to
  the object created in your XML */
WebView webview = (WebView) this.findViewById(R.id.mywebview);
/* If you would like to use Javascript in your view */
webview.getSettings().setJavaScriptEnabled(true);
/* Load the URL to the resource you want to load in your view */
webview.loadUrl("http://hostname/..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:15:32.120

首先，创建您想要的 HTML 文件。如果您希望应用程序在没有互联网连接的情况下也可以使用，您将需要 HTML 文件、图像、CSS 文件以及链接到网站的任何其他文件，以便与应用程序一起在手机上。

然后，使用 WebView 显示您创建的 HTML 页面。

您可以在此处查看有关 WebView 的信息（来自 Android 文档）：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# extjs - 从 Ext JS 4 组合框监听器调用函数

> ID：14981880
> 
> 赞同：1
> 
> 时间：2013-02-20T14:09:56.620
> 
> 标签：extjs, extjs4, extjs-mvc

我在从 Ext JS 4 中的组合框侦听器调用自定义函数时遇到问题。我已经设置了如下组合框侦听器。

```
listeners:{
    select:{
        fn:function(combo, value) {
            this.test;
        }
    }
} 
```

我的自定义功能是我在关闭后创建的

```
 this.callParent(arguments); 
```

我的自定义功能是

```
 test: function(){
        alert('test');
  } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:15:40.830

您的范围界定是错误的`this`，您的选择功能中的 指的是您的组合，并且可能不是您的测试功能所在的对象。此外，如果你调用一个函数，你需要在它周围加上大括号：`this.test()`

可能更好的方式如下：

```
initComponent: function() {  
    var me = this;
    me.items = [//... 
    {
       xtype: 'boxselect',
       //props...
       listeners: {
           select:{
               fn:function(combo, value) {
                   this.test(); // this will now be the this variable that you give to your scope.
                   //Or simply: me.test();
               }
           },
           scope: me
       }
    }
    //...
    ];

    me.callParent();
} 
```

您可能想发布更多代码，因为我们需要知道您的测试函数的范围和组合框的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:20:28.917

下面是我的代码

```
 initComponent: function() {           
            this.items = [
            {
                    xtype: 'form',
                    padding: '5 5 0 5',
                    autoScroll:true,
                    border: false,
                    style: 'background-color: #fff;',
                      items: [
                      {
                            xtype:'fieldset',

                        columnWidth: 0.5,
                        id:'adfieldset',
                        title: 'Ad Details',
                        collapsible: true,
                        defaultType: 'textfield',
                        defaults: {anchor: '100%'},
                        layout: 'anchor',

                          items: [
                          {
                                    xtype : 'boxselect',
                                    store : 'product.CategoryComboBox',
                                    name: 'category[]',
                                    id:'category',
                                    displayField: 'name',
                                    valueField: 'idProductCategory',
                                    multiSelect : false,
                                    fieldLabel: 'Category',
                                    //allowBlank: false,
                                    allowQueryAll : false,
                                    multiSelect : true,
                                    forceSelection : true,
                                    typeAhead: true,
                                    triggerAction: 'all',
                                    delimiter : ',',
                                    width: 300,
                                    queryMode:'local',

                                    listeners:{select:{fn:function(combo, value) {
                                       this.test; 
```

# c++ - 从帧缓冲区 GLSL 读取到 OpenCV

> ID：14981881
> 
> 赞同：3
> 
> 时间：2013-02-20T14:10:00.000
> 
> 标签：c++, opengl, opencv, opengl-es

我只是想为 cvMat 提供一个由片段着色器生成的纹理，屏幕上什么也没有出现，我不知道问题出在哪里，这是在驱动程序还是 glreadPixels 中。我刚刚加载了一个 TGA图像，到片段着色器，然后纹理四边形，我想将该纹理提供给 cvMat，所以我使用 glReadPixesl 然后生成一个新纹理，并将其绘制在四边形上，但没有出现。

请注意，以下代码在每一帧执行。

```
cv::Mat pixels;
    glPixelStorei(GL_PACK_ALIGNMENT, (pixels.step & 3) ? 1 : 4);
    glReadPixels(0, 0, 1024, 1024, GL_RGB, GL_UNSIGNED_BYTE, pixels.data);

    glEnable(GL_TEXTURE_2D);
    GLuint textureID;
    glGenTextures(1, &textureID);
       //glDeleteTextures(1, &textureID);

    // Create the texture
    glTexImage2D(GL_TEXTURE_2D,     // Type of texture
                 0,                 // Pyramid level (for mip-mapping) - 0 is the top level
                 GL_RGB,            // Internal colour format to convert to
                 1024,          // Image width  i.e. 640 for Kinect in standard mode
                 1024,          // Image height i.e. 480 for Kinect in standard mode
                 0,                 // Border width in pixels (can either be 1 or 0)
                 GL_RGB, // Input image format (i.e. GL_RGB, GL_RGBA, GL_BGR etc.)
                 GL_UNSIGNED_BYTE,  // Image data type
                 pixels.data);        // The actual image data itself

     glActiveTexture ( textureID );
     glBindTexture ( GL_TEXTURE_2D,textureID );
     glDrawElements ( GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, indices ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:54:39.173

`textureID`看起来像一个[不完整的纹理](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture)。

设置`GL_TEXTURE_MIN_FILTER`为`GL_NEAREST`或`GL_LINEAR`。

或者提供一整套 mipmap。

# matlab - Matlab：将日期字符串转换为 datenum 很慢？

> ID：14981883
> 
> 赞同：2
> 
> 时间：2013-02-20T14:10:05.860
> 
> 标签：matlab

将 100,000 个日期字符串转换为 datenums，Matlab 真的很慢...... 20 秒！有没有更快的方法来做到这一点？

```
%strDay  
%strTime

dblDate = zeros(1, nLines);
for i = 1 : nLines
    dblDate(j) = datenum([strDay{i}, ' ', strTime{i}], 'yy.mm.dd HH:MM:SS.FFF');
    j = j + 1;
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:36:37.137

在内部，`datenum`做了大量的摆弄来处理许多不同的日期格式。`datenummx`然后它根据日期格式和您调用的语法使用不同的输入参数调用内部函数`datenum`。

如果您提前知道您将使用哪种语法进行调用`datenum`，以及您将使用哪种日期格式，您可以`datenummx`直接调用。由于`datenummx`是一个内置的 MEX 文件，并且避免了所有的开销处理，它通常要*快得多*。

查看`datenum`(type `edit datenum`) 以找出调用`datenummx`您的应用程序的适当方式。

（另外，做其他答案建议的所有矢量化）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:40:09.223

这是我发现将时间从 20 秒减少到 2 秒的方法：

```
dblDate = datenum(strDay, 'yy.mm.dd') + ...
          datenum(strTime, 'HH:MM:SS.FFF') - ...
          datenum('00:00:00.000', 'HH:MM:SS.FFF'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:27:00.440

您可以尝试避免循环：

```
tmp = repmat({' '}, length(strDay), 1);
datenum(cell2mat([strDay  (:), tmp(:),  strTime(:)])) 
```

**〜编辑〜**
到目前为止所有解决方案的一些基准测试：

```
% creating some bogus data
a = ones(10000,1).*(now.*rand(10000,1));
str = datestr(a,'yy.mm.dd HH:MM:SS.FFF');
strDay = cellstr(str(:,1:8));
strTime = cellstr(str(:,10:end));

%% jdl's original code
disp('jdl''s original code')
tic
nLines = length(strDay);
dblDate = zeros(1, nLines);
j = 1;
for i = 1 : nLines
    dblDate(j) = datenum([strDay{i}, ' ', strTime{i}]);
    j = j + 1;
end
toc

%% hmuster's solution
disp('hmuster''s solution')
tic
tmp = repmat({' '}, length(strDay), 1);% cell(size(str1));
b = datenum(cell2mat([strDay(:), tmp(:),  strTime(:)]));
toc

%% ThijsW's solution
disp('ThijsW''s solution')
tic
strDay = cell2mat(strDay);
strTime = cell2mat(strTime);

dblDate = datenum([strDay, (' ')*ones(size(strTime)), strTime], 'yy.mm.dd HH:MM:SS.FFF');
toc

% jdl's solution
disp('jdl''s solution')
tic
dblDate = datenum(strDay, 'yy.mm.dd') + ...
    datenum(strTime, 'HH:MM:SS.FFF') - ...
    datenum('00:00:00.000', 'HH:MM:SS.FFF');
toc 
```

这导致：

```
jdl's original code
   Elapsed time is 19.624597 seconds.
hmuster's solution
   Elapsed time is 4.029291 seconds.
ThijsW's solution
   Elapsed time is 0.183376 seconds.
jdl's solution
   Elapsed time is 0.222996 seconds. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T14:28:03.963

尝试不使用 for 循环。`datenum`应该能够处理向量。

```
strDay = cell2mat(strDay);
strTime = cell2mat(strTime);

dblDate = datenum([strDay, (' ')*ones(size(strTime)), strTime], 'yy.mm.dd HH:MM:SS.FFF'); 
```

# sql-server - 将 Code First 数据库上传到 Web 服务器

> ID：14981889
> 
> 赞同：0
> 
> 时间：2013-02-20T14:10:18.803
> 
> 标签：sql-server, c#-4.0, razor, asp.net-mvc-4, ef-code-first

我创建了我的第一个网站，并使用 Code First 在 SQLExpress 上创建数据库。

现在我希望在只接受 SQL Server 数据库的服务器上发布我的网站。

我怎样才能做到这一点？EF5 或 VS 中是否有让我创建数据库、获取 .bak 文件并将其上传到服务器的功能？

或者有没有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:28:56.883

我不知道这是否是正确的方法，但是我找到了一种简单的方法。

我创建了一个与我的数据库同名的新 SQL Server 2008 数据库，并将数据库中的数据导入 App_Data 文件夹中。然后我将连接字符串更改为指向该数据库（在 SQL Server 中），然后可以将其传输到我的服务器上

# php - PHP MySQL 准备语句中的准备语句

> ID：14981896
> 
> 赞同：0
> 
> 时间：2013-02-20T14:10:24.600
> 
> 标签：php, prepared-statement

在`modelSlikeVrijednost`我有一个对`model`-s 主键的引用。`ModelSlikeVrijednost`可以包含很多图像（取决于用户）。我需要删除基于`modelID`.

路径示例：`/home/mainSite/public_html/site/img/1/1/`.

是否有可能做到这一点 ？

代码：

```
if ($stmt = $mysqli->prepare("SELECT modelID FROM model WHERE proizvodacID='$id'")) {    
    $stmt->execute();

    $stmt->bind_result($modelID);

    while ($stmt->fetch()) {
        $path="/home/mainSite/public_html/site/img/".$id."/".$modelID."/";

        if ($stmt1 = $mysqli->prepare("SELECT modelSlikeVrijednost FROM modelSlike WHERE modelID='$modelID'")) {    
            $stmt1->execute();

            $stmt1->bind_result($slike);

            while ($stmt1->fetch()) {
                if(is_null($slike)){
                    rmdir($path);
                }
                else{
                    $slikePath="/home/mainSite/public_html/site/".$slike;
                    if($slikePath!=$path){
                        unlink($slikePath);
                    }
                   rmdir($path);
                }
             }

            $stmt1->close();

        }
        else {
            printf("Prepared Statement Error: %s\n", $mysqli->error);
        }
    }

    $stmt->close();

} 
```

我收到此**错误**：`Prepared Statement Error: Commands out of sync; you can't run this command now Prepared Statement Error: Commands out of sync; you can't run this command now`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:12:30.617

不，您不能……您需要遍历所有结果，关闭光标或使用单独的连接。

但是，无论如何，您要尝试做的事情最好通过加入来完成...

```
SELECT ms.modelSlikeVrijednost, m.modelID FROM model m, modelSlike ms
WHERE ms.modelID= m.modelID
AND m.proizvodacID ='$id' 
```

这将为您提供每行所需的所有信息。

但是，您也错误地使用了准备好的语句。您不应该直接传递 php 变量，您应该将它们作为参数绑定到查询：

```
$sql = 'SELECT ms.modelSlikeVrijednost, m.modelID FROM model m, modelSlike ms'
       .' WHERE ms.modelID= m.modelID'
       .' AND m.proizvodacID = ?';

if($stmt = $mysqli->prepare($sql)) {

   // bind the $id to the parameter as an integer
   $stmt->bind_param('i', $id);

   $stmt->execute();

   // bind the fields of the result to the same variables you had before
   $stmt->bind_result($slike, $modelID);

   // less prone to error if we only type this manually once :-)
   $basePath = "/home/mainSite/public_html/site";

   while($stmt->fetch()) {

        $path= $basePath . "/img/".$id."/".$modelID."/";
        $slikePath = $basePath . "/" . $slike;

        if(is_null($slike)){
          rmdir($path);
        } else {
           if($slikePath!=$path) {
              unlink($slikePath);
           }

           rmdir($path);
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:23:13.430

不要使用裸 mysqli API。
给自己一个帮助类，比如[safemysql](https://github.com/colshrapnel/safemysql)
然后你的代码是

```
$models = $db->getCol("SELECT modelID FROM model WHERE proizvodacID=?i",$id);
foreach($models as $modelID) {
    $path  = "/home/mainSite/public_html/site/img/$id/$modelID/";
    $sql   = "SELECT modelSlikeVrijednost FROM modelSlike WHERE modelID=?i";
    $sarr  = $db->getCol($sql, $modelID));

    foreach($sarr as $silke) {
        if(!$slike)) {
           rmdir($path);
        } else {
            $slikePath="/home/mainSite/public_html/site/".$slike;
            if($slikePath!=$path){
                unlink($slikePath);
            }
                rmdir($path);
            }
        }
    }
} 
```

但是，是的，最好在一个查询中完成，就像 prodigitalson 说的：

```
$sql = "SELECT ms.modelSlikeVrijednost, m.modelID FROM model m, modelSlike ms
        WHERE ms.modelID= m.modelID AND m.proizvodacID=?i";
$sarr = $db->getCol($sql, $id);
foreach($sarr as $silke) {
    if(!$slike)) {
       rmdir($path);
    } else {
        $slikePath="/home/mainSite/public_html/site/".$slike;
        if($slikePath!=$path){
            unlink($slikePath);
        }
            rmdir($path);
        }
    }
} 
```

主要思想是从查询中获取数据，然后使用它。

# r - 使用 Rs fft 函数

> ID：14981902
> 
> 赞同：0
> 
> 时间：2013-02-20T14:10:45.653
> 
> 标签：r, fft

我目前正在尝试使用 R 中的 fft 函数来转换特定深度的测量土壤温度，以便模拟不同深度的土壤温度和热通量。

我想澄清有关 R 中 fft 函数的一些要点，因为我目前在实施此过程时遇到问题。

所以我有一个包含日期和时间以及 5 厘米（T5）深度的土壤温度几个月的 df。根据文献，可以基于测量数据的快速傅里叶变换来模拟不同深度的温度和热通量。所以我的第一步自然是 DF$FFT = fft (DF$T5) 从中我收到一系列复数 (Cn)，即各自的实数 (an) 和虚数 (bn)。根据文献，我可以使用基于上述 fft 输出的公式重新创建 T5 数据。

```
*T_(0,t )= meanT + ∑ (An sin⁡〖nωt+φ〗) ̅ 
```

NB 求和项是在 n=1 和 M（最高谐波）之间求和

其中，T o,t 是给定时间点的温度，一段时间内的平均温度，t 是时间，...

```
An = (2/sqrt(N))*|Cn|
|Cn| = modulus of the complex number of the nth harmonic Mod (DF$FFT)
phi = arctan (an/bn) i.e. arctan (Re(DF$FFT)/Im(DF$FFT)
omega = (2*pi/N) 
```

不幸的是，基于 R i 中 fft 的输出，无法使用上述公式重新创建温度值。我意识到我可以使用重新创建数据

```
fft (fft(DF$T5), inverse = T)/length (DF$T5) 
```

但是，我需要能够使用上面的方程来做到这一点，以便使用该方程中的项来模拟其他深度的温度。任何人都可以帮我解决我上面描述的程序可能出错的地方。例如，上面的过程是在论文中实现的，其中使用了 Mathcad 的 fft 函数！我不是在这里寻找解决我问题的快速解决方案，所以我知道如果是这样的话，更多的数据和信息会很方便。我正在寻找的是一些指导，例如我应该注意的 R fft 的任何特性。

如果有人能以任何可能的方式提供帮助，将不胜感激。另外，如果有人需要有关我的问题的更多信息，请询问

多谢

布拉德

# php - FOSUserBundle 覆盖密码约束

> ID：14981903
> 
> 赞同：3
> 
> 时间：2013-02-20T14:10:48.013
> 
> 标签：php, symfony, symfony-2.1, fosuserbundle

我试图以这种方式覆盖 FOSUserBundle 的密码约束：

**XXX/XXXBundle/Resources/config/validation.yml**

```
XXX\XXXBundle\Entity\User:
    properties:
        username:
            - NotBlank: ~
        email:
            - NotBlank: ~
            - Email: { groups: [online] }
        plainPassword:
            - MinLength: { limit: 6, message: "Your pw must have at least {{ limit }} characters.", groups: [Registration, Profile, ResetPassword, ChangePassword] }
            - Regex: { pattern: "/(?=.*[A-Za-z])(?=.*[0-9])[A-Za-z0-9]+/", message: "Das Passwort muss eine Ziffer und Buchstaben enthalten.", groups: [Registration, Profile, ResetPassword, ChangePassword] } 
```

这对我不起作用。当我尝试更改密码时，接受 2 个字符。我已经尝试过使用和不使用验证组 - 没有变化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:03:25.547

我们使用以下方法解决了这个问题：

```
FOS\UserBundle\Form\Model\ChangePassword:
    properties:
        new:
            - Regex:
                pattern: "/(?=.*[A-Za-z])(?=.*[0-9])[A-Za-z0-9]+/"
                message: "%yourtext%."
                groups: [ChangePassword, ResetPassword] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:24:09.223

我遇到了完全相同的问题，并且我的正则表达式无效，结果始终为真，因此验证通过。检查您的模式以确保其按预期工作。

# android - 与短信分享文本

> ID：14981907
> 
> 赞同：0
> 
> 时间：2013-02-20T14:10:55.320
> 
> 标签：android

如何通过短信分享我的应用程序中的文本？

我想例如用户触摸一个按钮，一个服装文本将被发送到默认消息应用程序，它会询问号码

这是菜单代码：

```
 public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        return true;
        case R.id.menu_share:
return true;
        default:
            return super.onOptionsItemSelected(item);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:12:46.770

要开始启动 sms 活动，您只需要这样：

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);   

sendIntent.setData(Uri.parse("sms:")); 
```

这将打开一个选择器，人们可以在其中选择要向其发送消息的号码/联系人

```
sendIntent.setData(Uri.parse("sms:"+ phoneNumber)); 
```

这会将消息发送到预定义的号码。

您可以添加额外内容以填充您自己的消息，例如这样

```
sendIntent.putExtra("sms_body", x); 
```

然后开始你的意图：

```
startActivity(sendIntent); 
```

# matlab - 在矩阵的行上调用通用函数

> ID：14981908
> 
> 赞同：1
> 
> 时间：2013-02-20T14:10:59.667
> 
> 标签：matlab, machine-learning, bsxfun

我想为 Matlab 中的通用核函数有效地计算核矩阵。这意味着我需要`k(x,y)`为每一行`x`和`X` 每一行`y`计算`Y`. 这是一些计算我想要的matlab代码，但它相当慢，

```
function K=compute_kernel( k_func, X, Y )
    m = size(X,1);
    n = size(Y,1);
    K = zeros(m,n);
    for i = 1:m
        for j = 1:n
            K(i,j) = k_func(X(i,:)', Y(j,:)');
        end
    end
end 
```

是否有任何其他方法可以解决这个问题，例如某些`bsxfun`变体在从`X`and获取的每一行上调用一个函数`Y`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:10:36.597

`pdist2(X,Y, dist_func)`不幸的是计算`dist_func(X, Y(i,:))`，而不是`dist_func(X(i,:), Y(i,:))`。所以我需要的实际功能是，

```
function K=compute_kernel( k_func, X, Y )
  % Woohoo! Efficient way to compute kernel
  size(X)
  size(Y)
  m = size(X,1);
  n = size(Y,1);
  for i = 1:n
    K(:,i) = pdist2( Y(i,:), X, k_func);
end 
```

它不像使用 那样好`pdist2`，但仍然比以前的情况更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:23:20.043

您是否厌倦[`pdist2`](http://www.mathworks.com/help/stats/pdist2.html)了自定义距离功能？

PS
最好[不要在Matlab中使用`i`and作为变量`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

# c# - Html.DropDownList 的名称迭代问题

> ID：14981909
> 
> 赞同：0
> 
> 时间：2013-02-20T14:11:01.893
> 
> 标签：c#, razor, asp.net-mvc-4, html-select

我有一个表，其中每一行都包含一个表单的字段。

我使用这个在视图中迭代：

```
@foreach (var item in Model) { } 
```

在 foreach 中，我创建了一个新的表格行，其中包含各种字段。例如：

```
<tr><td> @Html.DropDownList("granny", "") </td></tr> 
```

“奶奶”正在通过控制器传递，看起来有点像这样：

```
ViewData["granny"] = new SelectList(db.getGrannies(), "grannyid", "grannyname"); 
```

一切运作良好。景色越来越好，一切看起来都很好。但是我注意到字段的名称属性 { 例如...

```
<select id="granny" name="granny"> 
```

} 与创建的每一行完全相同。这是个问题。我想以 FormCollection 的形式将这些数据扔回控制器，并与所有这些阿妈一起做有趣的事情。如果他们没有全部通过，我就不能这样做。

也就是说，我希望选择读取，而不是像这样：

```
<select id="granny1" name="granny1">
<select id="granny2" name="granny2"> 
```

我研究了一下这个问题，并尝试使用

```
new { @Name="xyz" + n } 
```

但是 Visual Studio 不太喜欢。

* * *

这一切的简短和甜蜜是这样的：

**如何为 ViewData 生成的 Html.DropDownLists 提供自己的唯一 ID/名称？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:15:36.163

> 如何为 ViewData 生成的 Html.DropDownLists 提供自己的唯一 ID/名称？

您无法更改`name`生成的输入字段，这是设计使然。只有 id 可以更改。话虽这么说，你不应该这样做。您可以执行以下操作：

```
@for (var i = 0; i < Model.Count; i++) 
{ 
    <tr>
        <td>
            @Html.DropDownList(
                "selectedGranny", 
                (IEnumerable<SelectListItem>)ViewData["granny"]
            )
        </td>
    </tr>    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:55:03.777

似乎您要么尝试对集合进行数据绑定，要么只需要手动命名您的选择（因为它们实际上是 Web 表单上的不同控件）。

您可以使用以下重载将 html 参数传递给下拉列表：

```
@Html.DropDownList(
    "CategoryID", 
    (SelectList)ViewBag.CategoryId, 
    "--Select One--", 
    new{  //anonymous type
          name = "granny1",
          @class = "myCssClass", 
          onchange = "someFunction();"
       }) 
```

# objective-c - 首先 seekToTime，然后用 setVolumeRampFromStartVolume 淡入

> ID：14981911
> 
> 赞同：0
> 
> 时间：2013-02-20T14:11:11.037
> 
> 标签：objective-c, xcode, audio, avplayer

我正在编写一个音乐播放器应用程序，它允许用户在将曲目添加到队列之前预听曲目（我`AVQueuePlayer`用于此）。

如果用户选择了他想要预听的歌曲，当前歌曲将随之淡出，`setVolumeRampFromStartVolume`所选歌曲将开始播放。这工作正常。

用户完成预听后，中断的歌曲将被恢复，我会通过以下方式回溯到它被预听曲目中断的时间`seekToTime:completionHandler`：

我的代码看起来有点像这样：

```
- (void)stopPreview
{
    if (previewInterruptedItem) {
        [self addMediaItemToUserQueue:previewInterruptedItem afterCurrentItem:YES];
        previewInterruptedItem = nil;

        [[self queuePlayer] advanceToNextItem];

        [[[self queuePlayer] currentItem] seekToTime:previewInterruptedTime
                                   completionHandler:^(BOOL finished){
            if (finished) {
                [self fadeVolumeIn:YES];
            }
        }];

    }
}

- (void)fadeVolumeIn:(BOOL)fadeIn
{
    float startVolume = 0.1;
    float endVolume = 1.0;

    if (!fadeIn) {
        startVolume = 1.0;
        endVolume = 0.0;
    }

    AVAssetTrack *audioTrack = [[[self queuePlayer].currentItem.asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    AVMutableAudioMixInputParameters *params = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:audioTrack];

    CMTime currentTime = [[[self queuePlayer] currentItem] currentTime];

    [params setVolumeRampFromStartVolume:startVolume
                             toEndVolume:endVolume
                               timeRange:CMTimeRangeMake(currentTime, CMTimeMakeWithSeconds(1, 1))];

    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    audioMix.inputParameters = [NSArray arrayWithObject:params];

    [self queuePlayer].currentItem.audioMix = audioMix;
} 
```

这不是出于某种原因。如果我删除这`seekTime`条线，它会很好地淡入，但我真的希望轨道能从暂停的地方恢复。

我认为它与该有关，`timeRange`但我无法弄清楚。我希望你有个主意。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:34:20.093

几个建议。首先，我会在你做 seekToTime 之前设置你的淡入淡出。其次，我会为您的 CMTimeMakeWithSeconds 使用更大的时间尺度 - 可能是 60000 左右。有关CMTime 的更多详细信息，请参阅 [http://warrenmoore.net/understanding-cmtime ，时间尺度很重要，因为您的通话时间范围只会落在精确的秒边界上，而不是几分之一秒。](http://warrenmoore.net/understanding-cmtime)

# objective-c - 使用窗口调整自定义视图的大小

> ID：14981912
> 
> 赞同：1
> 
> 时间：2013-02-20T14:11:13.113
> 
> 标签：objective-c, xcode, macos, interface-builder

所以我已经看到这个问题问了几次，但还没有找到解决我问题的答案。现在我基本上有 MainMenu.xib，其顶部有一个标签，一个大的自定义视图和一个底部居中的按钮，用于切换自定义视图的子视图（见下图）。我已经在界面构建器中将窗口和自定义视图设置为自动调整子视图的大小，并且所有按钮、标签等都有与视图侧面相关的约束，但是当我调整窗口大小时，子视图的内容会不调整大小。我认为自定义视图正在调整窗口大小，因为当我使用按钮切换子视图时，加载的子视图会随着窗口调整大小，它们只是没有实时调整窗口大小。

主菜单.xib： ![](../Images/eacd9390d8fc89d38f03a1c5ab73ca7c.png)

普通子视图： ![在此处输入图像描述](../Images/be94ee18e9f43d8d11b9d07d4d2637db.png)

窗口展开后： ![在此处输入图像描述](../Images/c58baee6bc34d4d82b84fc769a1b004f.png)

子视图切换，然后切换回来： ![在此处输入图像描述](../Images/e5f90318b426fea155e2adf208cd9a9b.png)

**约束：**

主菜单.xib： ![在此处输入图像描述](../Images/f5c0184b5138cec591f4bb0e8b9782db.png)

BlockViewController.xib： ![在此处输入图像描述](../Images/6d2708ce98c4d7eca2c3a7db145cb373.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T20:28:54.837

弄清楚了！真的很简单，只要在每个 ViewController 子类的 awakeFromNib 方法中写一行代码：

```
[self.view setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:24:24.417

从图片和评论中的描述看来，问题在于自定义视图没有得到任何布局约束来确定如何调整子视图的大小。

下面的一段代码（直接在浏览器中输入，所以要小心）应该提供必要的约束来将子视图的边框“粘合”到自定义视图。

```
[self.customView addSubview: self.blockSubView.view];
self.blockSubView.view.frame = self.customView.bounds;

NSView *blockSubView = self.blockSubView.view;

NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(blockSubView);
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[blockSubView]|"
                                                               options:0
                                                               metrics:nil
                                                                 views:viewsDictionary];

constraints = [constraints arrayByAddingObjectsFromArray: [NSLayoutConstraint constraintsWithVisualFormat:@"V|[blockSubView]|"
                                                               options:0
                                                               metrics:nil
                                                                 views:viewsDictionary]];

[self.customView addConstraints: constraints]; 
```

[文档](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)中有更多关于此的内容。注意调试技巧 - 非常有用，以至于不可或缺。

# ruby-on-rails - 从库代码访问设计的 current_user

> ID：14981916
> 
> 赞同：6
> 
> 时间：2013-02-20T14:11:25.297
> 
> 标签：ruby-on-rails, authentication, devise

我在 Rails 应用程序的 lib 目录中创建了一个类。该类需要访问 Devise 的 current_user。

我还应该指出，这个 lib 类经常从模型代码中访问，因此不能将 current_user 传递给它。

我怎样才能做到这一点？

彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:24:41.220

Where are you using your library? Are you calling it from any controller method? If so, you should pass the current user as a parameter to your library class constructor, and work with it there. current_user is a controller helper. It expects a valid authenticated session and therefore only makes sense when used from there and in the app flow. Using current_user for any background/script task would not make sense, anyway.

# sql - 对 2 行进行 subselect ininsert 语句

> ID：14981918
> 
> 赞同：1
> 
> 时间：2013-02-20T14:11:30.773
> 
> 标签：sql, oracle, sql-insert

这是我的 sql：

```
insert into
        LIST_ENTRIES(MANDATOR_KEY, SERVICE_IDENTIFIER, SERVICE_IDENTIFIER2,
        REASON_CODE, BLOCK_TYPE, VALID_FROM, VALID_TO, LISTS_KEY, VERSION)
        values
        ('Abra2', 'abrakadabra',NULL,8,0,SYSDATE,SYSDATE,
        SELECT DISTINCT ID, VERSION FROM LISTS
        WHERE SERVICE_KEY = '10s3f10-111'
        AND LIST_COLOR = 2
        AND MANDATOR_KEY = 'ASD'); 
```

我得到例外

```
00936\. 00000 -  "missing expression" 
```

如果我只是运行子选择：

```
 SELECT DISTINCT ID, VERSION FROM LISTS
            WHERE SERVICE_KEY = '10s3f10-111'
            AND LIST_COLOR = 2
            AND MANDATOR_KEY = 'ASD' 
```

我得到结果`11, 145`

怎么了？为什么我不能用子选择插入 2 个值。我检查了这本手册，这里有效： [http ://www.techonthenet.com/sql/insert.php](http://www.techonthenet.com/sql/insert.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:13:09.323

这可以使用`INSERT INTO...SELECT`语句来完成，

```
INSERT INTO LIST_ENTRIES(MANDATOR_KEY, SERVICE_IDENTIFIER, SERVICE_IDENTIFIER2, REASON_CODE, BLOCK_TYPE, VALID_FROM, VALID_TO, LISTS_KEY, VERSION)
SELECT  'Abra2', 'abrakadabra',NULL,8,0,SYSDATE,SYSDATE, ID, VERSION 
FROM    LISTS
WHERE   SERVICE_KEY = '10s3f10-111' AND 
        LIST_COLOR = 2 AND 
        MANDATOR_KEY = 'ASD' 
```

# ios - SKStoreProductViewController SKStoreProductViewControllerDelegate , no error handling?

> ID：14981924
> 
> 赞同：1
> 
> 时间：2013-02-20T14:11:44.150
> 
> 标签：ios, ios5, app-store

When you present a SKStoreProductViewController in your app, with bad network conditions or in airplane mode, the modal view is not presented (because of course it can retrieve the data from the appstore), and there is no error handling method in the delegate.

So what's the proper way to handle network errors or no network in this situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:17:33.427

Silly me, there's just a completion block you can use for this.

```
[storeViewController loadProductWithParameters:parameters
                             completionBlock:^(BOOL result, NSError *error) {
                                 if (result) {
                                     [appDelegate.window.rootViewController presentViewController:storeViewController animated:YES completion:nil];
                                 } else {
                                     //error message

                                 }
}]; 
```

# c# - 使用 Lucene.NET 索引全文文档是否需要 IFilter

> ID：14981927
> 
> 赞同：1
> 
> 时间：2013-02-20T14:11:48.597
> 
> 标签：c#, full-text-search, lucene.net, ifilter

我正在我的项目中前进，并来到处理文件内容的十字路口。我已经成功创建了一个包含一些分类字段的工作索引，但我知道希望将关键字搜索应用于文件内容。我的问题是我不确定将 lucene 传递给阅读器是否会转换为索引整个文件内容的 API。我在网上做了一些搜索，发现需要 IFilter 的建议是真的吗？似乎有些复杂。无论如何，我用于索引文件内容的代码在下面并且不起作用（如果通过阅读器，它会失败）。理想情况下，我希望能够处理 doc 和 docx 文件。任何帮助深表感谢。

我的代码创建阅读器

```
public void setFileText()
        {

            var FD = new System.Windows.Forms.OpenFileDialog();
            StreamReader reader;
            if (FD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                string fileToOpen = FD.FileName;
                reader = new StreamReader(fileToOpen);
            }
            else
            {
                reader = null;
            }
            this.FileText =  reader;
        }
} 
```

我将文档添加到索引的代码

```
 private static void _addToLuceneIndex(MATS_Doc Data, IndexWriter writer)
        {
            // remove older index entry
        //    Query searchQuery = new TermQuery(new Term("Id", Data.Id.ToString()));
          //  writer.DeleteDocuments(searchQuery);

            // add new index entry
            Document doc = new Document();

            // add lucene fields mapped to db fields

            doc.Add(new Field("Id", Data.Id.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Title))
                doc.Add(new Field("Title", Data.Title, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Plant))
                doc.Add(new Field("Plant", Data.Plant, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Containment))
                doc.Add(new Field("Containment", Data.Containment, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Part))
                doc.Add(new Field("Part", Data.Part, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Operation))
                doc.Add(new Field("Operation", Data.Operation, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (!string.IsNullOrEmpty(Data.Geometry))
                doc.Add(new Field("Geometry", Data.Geometry, Field.Store.YES, Field.Index.NOT_ANALYZED));
            if (Data.FileText != null)
                doc.Add(new Field("Text", Data.FileText));
            // add entry to index
            writer.AddDocument(doc);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:50:42.893

使用 IFitlers 实际上非常简单。

我建议使用 Eclipse.IndexingService（在 c# 中）。

然后你所要做的（除了安装 IFitlers 如果需要）是：

```
using (FilterReader filterReader = new FilterReader(path, Path.GetExtension(path)))
{
     filterReader.Init();
     string content = filterReader.ReadToEnd();
} 
```

您可以在此处阅读有关 IFitler 的更多信息：

[http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files](http://www.codeproject.com/Articles/31944/Implementing-a-TextReader-to-extract-various-files)

[http://www.codeproject.com/Articles/13391/Using-IFilter-in-C](http://www.codeproject.com/Articles/13391/Using-IFilter-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:33:53.763

另一个可能值得研究的选择是使用[RavenDB](http://ravendb.net/)，它在内部实现了 Lucene.Net 的索引引擎。看起来你在桌面应用程序中，所以你应该考虑 RavenDB 的[嵌入模式](http://ravendb.net/docs/server/deployment/embedded)。

然后，您可以使用我的[Indexed Attachments Bundle](https://github.com/mj1856/RavenDB-IndexedAttachments) - 它为您管理大部分内容。您只需将文档作为附件上传，它就会使用 IFilters 从文档中提取文本。它会自动在该文本上建立索引。然后，您可以对该索引执行全文 Lucene 搜索。如果需要，您甚至可以突出显示找到的搜索词。

目前缺少该捆绑包的文档，但您应该能够从单元测试中收集您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:02:54.020

Lucene 本身无法处理 .doc 和 .docx 文件。[Solr](http://lucene.apache.org/solr/)在这里可能值得一看，因为 Lucene 本身只是一个用于构建搜索引擎的库。

# sql-server - 填充到达日期之后的出发日期字段

> ID：14981930
> 
> 赞同：0
> 
> 时间：2013-02-20T14:12:07.617
> 
> 标签：sql-server, tsql

步骤1

到达日期（已生成）– 135 万次

第2步

随机化 0 到 1 之间的数字

第 3 步

使用上面生成的随机数来创建下面的脚本

```
UPDATE BOOKINGS
SET DepartureDate
CASE WHEN RAND() Result = Between 0 and 0.3 = Departure Date will be 2 Nights Later 
CASE WHEN RAND() Result = Between 0.3 and 0.4 = Departure Date will be 3 Nights Later
CASE WHEN RAND ()Result >0.4 = Departure Date will be either 1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28 Nights Later 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:02:51.873

只是为了让您知道我使用的最终解决方案是：

```
UPDATE BOOKINGS 
SET DepartureDate = 
DATEADD(day, 
CASE WHEN Rand(CHECKSUM(NEWID())) BETWEEN 0 and 0.3 THEN 2 ELSE 
CASE WHEN Rand(CHECKSUM(NEWID())) BETWEEN 0.3 and 0.5 THEN 3 ELSE 
Round(Rand(CHECKSUM(NEWID())) * 28,0) END END,ArrivalDate) 
```

谢谢

韦恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:38:41.443

不要将 RAND() 与不断变化的种子一起使用。它产生了非常随机的数据。

要获得您的解决方案，您需要创建可能值的“桶”。10% 的情况下应该发生 3 天；这使得最小的桶，所以我们需要十个桶。2 天分为 3 个桶。其他值分别进入 2 个存储桶。然后只需使用模来选择 10 个存储桶之一，如下所示：

```
CREATE TABLE dbo.booking(Id INT IDENTITY(1,1) PRIMARY KEY CLUSTERED,days INT);

GO

INSERT INTO dbo.booking(days)
SELECT TOP(100000) 0 FROM sys.columns A,sys.columns B,sys.columns C,sys.columns D;

GO

UPDATE b
 SET days = rndm.days
FROM dbo.booking b
CROSS APPLY (
  SELECT days
   FROM (VALUES(0,2),(1,2),(2,2),(3,3),(4,1),(5,1),(6,4),(7,4),(8,28),(9,28))dn(n,days)
   WHERE n = ABS(CHECKSUM(NEWID(),b.Id))%10
)rndm;

GO

SELECT days,COUNT(1) cnt
FROM dbo.booking
GROUP BY days;

GO 
```

编辑：将代码更新为不使用 case 语句。

# python - 抽样方法

> ID：14981933
> 
> 赞同：2
> 
> 时间：2013-02-19T09:08:50.160
> 
> 标签：python, sampling

你能帮我解答这些问题吗？我正在使用 Python

抽样方法

抽样（或蒙特卡罗）方法形成了一组通用且有用的技术，这些技术使用随机数来提取有关（多变量）分布和函数的信息。在统计机器学习的背景下，我们最关心的是从分布中抽取样本以获得汇总统计的估计，例如所讨论的分布的平均值。

当我们可以访问单位间隔（Matlab 中的 rand 或 R 中的 runif）上的统一（伪）随机数生成器时，我们可以使用 Bishop Sec.1 中描述的变换采样方法。11.1.1 从更复杂的分布中抽取样本。实现指数分布的变换方法

$$p(y) = \lambda \exp(−\lambda y) , y \geq 0$$

使用 Bishop 中第 526 页底部给出的表达式：*切片采样涉及用附加变量 u 增加 z，然后从联合 (z,u) 空间中抽取样本*。

抽样方法的关键是需要多少样本才能获得对感兴趣数量的可靠估计。假设我们对估计均值感兴趣，即

$$\mu_y = 1/\lambda$$

在上述分布中，我们然后使用样本均值

$$b_y = \frac1L \sum^L_{\ell=1} y(\ell)$$

的 L 个样本作为我们的估计量。由于我们可以根据需要生成任意数量的大小为 L 的样本，因此我们可以研究该估计值如何平均收敛到真实均值。为了正确地做到这一点，我们需要采取绝对差异

$$|\mu_y - b_y|$$

在真实平均值 $µ_y$ 和估计 $b_y$ 之间，对多个 $L$ 值（例如 10、100、1000）的多次重复（例如 1000 次）进行平均。将预期绝对偏差绘制为 $L$ 的函数。您可以绘制一些预期绝对偏差的转换值以获得或多或少的直线，这是什么意思？

我是这种统计机器学习的新手，真的不知道如何在 Python 中实现它。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:40:37.120

您可以采取一些捷径。Python 有一些内置的采样方法，主要在[Scipy](http://www.scipy.org/Installing_SciPy)库中。我可以推荐一份在 Python 中实现这个想法的手稿（免责声明：我是作者），位于[此处](https://nbviewer.jupyter.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Chapter4_TheGreatestTheoremNeverTold/Ch4_LawOfLargeNumbers_PyMC3.ipynb)。

它是一本更大的书的一部分，但这个孤立的章节涉及更一般的大数定律+收敛，这就是你所描述的。本文处理泊松随机变量，但您应该能够根据自己的情况调整代码。

# php - 在表 PHP 中自动选中复选框

> ID：14981939
> 
> 赞同：0
> 
> 时间：2013-02-20T14:12:18.470
> 
> 标签：php, checkbox, checked

我是 PHP 新手，我有问题。我有一个带有复选框的表格。我需要在复选框内添加 if 语句。

```
 echo "<div class='table1'>
<table>
<tr>
<td></td>
<td>Module code</td>
<td>Module Title</td>
<td>Option</td>
</tr>";
echo "<form action='confirmsubmission.php' method='post'>";
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . "<input type='checkbox' name='check[]'  
value='".$row['module_id']."' />" . "</td>";
echo "<td>" . $row['module_id'] .  "</td>"; 
echo "<td>" . $row['module_title'] . "<a href=# content='".$row['description']."'
class='tooltip'><span title='Module Description'><img src='images/i.png'/></span>
</a>". "</td>";
echo "<td>" . $row['module_choice'] . "</td>";
echo "</tr>";
}
echo "</table></div>"; 
```

下面是我需要在 value='".$row['module_id']."' 之后添加的 If 语句

```
 if($row['module_choice']=='Mandatory'){ echo "checked=\"true\""; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:16:25.367

即使我建议您使用模板系统（Smarty 等），您也可以执行以下代码：

```
echo "<div class='table1'>
<form action='confirmsubmission.php' method='post'>
<table>
<tr>
<td></td>
<td>Module code</td>
<td>Module Title</td>
<td>Option</td>
</tr>";
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . "<input type='checkbox' name='check[]'  
value='".$row['module_id']."'";
if($row['module_choice']=='Mandatory'){ 
    echo " checked='checked' "; 
}
echo "/>" . "</td>";
echo "<td>" . $row['module_id'] .  "</td>"; 
echo "<td>" . $row['module_title'] . "<a href=# content='".$row['description']."'
class='tooltip'><span title='Module Description'><img src='images/i.png'/></span>
</a>". "</td>";

echo "<td>" . $row['module_choice'] . "</td>";
echo "</tr>";
}
echo "</table></form></div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:19:11.397

有点拗口，但试试：

```
...    
echo "<td>" . "<input type='checkbox' name='check[]' value='".$row['module_id']."'".($row['module_choice']=='Mandatory' ? 'checked="true"' : "")." />" . "</td>";
... 
```

# silverlight - 防止 ItemsControl 在单击时更改焦点（Silverlight）

> ID：14981940
> 
> 赞同：0
> 
> 时间：2013-02-20T14:12:25.343
> 
> 标签：silverlight

我有一个 ItemsControl 托管一些输入控件（文本框等）。当我在 ItemsControl 的背景中单击时，焦点会自动更改为 ItemsControl 中的第一个项目。

有没有办法防止这种情况？我已经尝试在不调用 base 的情况下覆盖 ItemsControl 上的 OnGotFocus，但它没有用。

先谢谢了！

雅克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:48:22.803

好的，我找出了导致第一个元素获得焦点的原因。就我而言，我使用的是托管自定义 ItemsControl 的 ScrollViewer。ItemsControl 和其中的容器将 IsTabStop 设置为 false。焦点的更改是由 OnMouseLeftButtonDown 方法中的 ScrollViewer 进行的。

由于 ScrollViewer 是密封的，我必须覆盖容器上的 OnMouseLeftButtonDown 和 ItemsControl 以将 e.Handled 设置为 true。这解决了我的问题。

# cakephp - echo $this->element('sql_dump'); 无需调试且在邮件中

> ID：14981941
> 
> 赞同：2
> 
> 时间：2013-02-20T14:12:28.060
> 
> 标签：cakephp

在 CAKEPHP 中，该函数`$this->element('sql_dump')`在屏幕上打印执行的 sql 查询。 `$this->element('sql_dump')`仅适用于`debug mode = 2`

这工作正常，但我希望以下工作：

*   调试模式必须为 0
*   我不想`echo`在屏幕上显示 sql 转储，而是将其邮寄给自己
*   这必须通过单击按钮来发生（发送错误报告）

这可能吗，怎么做？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:38:36.343

要在调试模式为 0 时获取调试信息，您必须在执行查询之前操作数据源。

在您的控制器中：

```
$db = $this->MyModel->getDataSource();
$db->fullDebug = true;
$this->MyModel->find(...);
$log = $db->getLog();
$db->fullDebug = false;
// email yourself the log 
```

# iframe - Tumblr 和 Youtube：iframe 错误

> ID：14981943
> 
> 赞同：1
> 
> 时间：2013-02-20T14:12:30.850
> 
> 标签：iframe, youtube, tumblr, vimeo

在 Tumblr 博客中插入来自 YouTube（或 Vimeo）的视频时，我无法找到有关此一致错误的任何文档或类似事件：

```
Unsafe JavaScript attempt to access frame with URL http://foo.tumblr.com/
from frame with URL http://www.youtube.com/embed/iG4BFxgZxMU?
wmode=transparent&autohide=1&egm=0&hd=1&iv_load_policy=3&modestbranding=1
&rel=0&showinfo=0&showsearch=0\. Domains, protocols and ports must match. 
```

（在 Safari 和 Chrome 中使用不同的视频、tumblr 主题等进行了测试）

打开你的控制台；甚至这个 Pixelunion 主题也显示了 Vimeo 视频的错误： [Pixelunion 主题](http://maximalist-theme.pixelunion.net/page/2)

# ios - UI单元格的选定索引

> ID：14981947
> 
> 赞同：-2
> 
> 时间：2013-02-20T14:12:40.727
> 
> 标签：ios, objective-c

我是 iOS 编程新手，我想将 Selected 保存到同一个表视图之外的`Cell (cell.detailTextLabel.text)`另一个。谁能建议我怎么做？`Textfield``viewController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:18:31.683

使用表格视图的这个委托方法，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedLabelName = cell.textLabel.text;
} 
```

在视图控制器中声明变量名**selectedLabelName**

# java - 等待执行者

> ID：14981954
> 
> 赞同：0
> 
> 时间：2013-02-20T14:13:10.397
> 
> 标签：java, multithreading, executorservice

这里有一个循环，用于从 A GenericObjectPool 借用对象并在每个循环中提交给 Executor。然后，调用者必须等待所有 Exectuor 完成。

这是目前的代码 -

```
private ImplClass implObject;
private Future future;

for (Iterator iter = anArrayList.iterator(); iter.hasNext();) {

    //Gets a GenericObjectPool Object
    implObject = (ImplClass) this.getImplPool().borrowObject();

    future = getExecutorServices().submit(implObject);
}

// Wait for Exectuor to complete
while (!future.isDone()) {
    try {
        Thread.sleep(Global.WaitTime());

    } catch (InterruptedException iex) {
    }
} 
```

但这是错误的，因为未来只等待最后一个线程。我应该创建一个期货数组来监控每个执行者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:11:40.280

这个怎么样？：

```
List<Callable> tasks = new ArrayList<Callable>();
for (Iterator iter = anArrayList.iterator(); iter.hasNext();) {
    //Gets a GenericObjectPool Object
    implObject = (ImplClass) this.getImplPool().borrowObject();      
    tasks.add(implObject);
}
List<Future<Object>> futures = getExecutorServices().invokeAll(tasks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:17:42.843

ExecutorService 有一个特定的方法：[ExecutorService.invokeAll(tasks)](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)

Ralf 的回答中提到的[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)也很有帮助 - 它允许您在调用者线程到达时处理结果。

# python - 在 Python for 循环中设置列表项

> ID：14981955
> 
> 赞同：2
> 
> 时间：2013-02-20T14:13:10.607
> 
> 标签：python, for-loop

大家好，

假设我有一个列表，并且我想列出该列表中的项目，然后将它们打印出来，然后我会这样做。

```
list = ['a', 'b', 'c']

for item in list:
   print item 
```

这应该会导致这种情况。

```
a
b
c 
```

很简单。

我的问题是，当某个事件发生时，例如到达“b”，然后我希望循环继续迭代，但从它刚刚到达的点重新开始。因此输出将是这样的。

```
a
b
b
c 
```

我曾尝试过一种解决方案，但没有奏效。

```
list = ['a', 'b', 'c']

for item in list:
   print item

   index = list.index(item)
   if item == 'b':
      item = list[index - 1] 
```

我曾希望这会将项目设置为“a”，以便下一次迭代将继续返回到“b”，但事实并非如此。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:15:04.430

为什么不如下：

```
for item in lst:
    dostuff()
    if item=="b":
        dostuff() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:20:20.680

```
>>> def my_iter(seq):
...   for item in seq:
...       yield item
...       if item == 'b':
...         yield item
...
>>> for item in my_iter('abc'):
...     print item
...
a
b
b
c 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:15:04.360

您可以使用数字 for 循环轻松完成此操作。还可以通过编写自己的生成器类来设计一种更复杂的方法，当被告知这样做时，它会再次生成相同的元素。

编辑：好的，这是复杂的方法！

```
class Repeater(object):
    def __init__(self, sequence):
        self._sequence = sequence

    def __iter__(self):
        for item in self._sequence.__iter__():
            self._repeat = False
            yield item
            if self._repeat:
                yield item

    def repeat(self):
        self._repeat = True

list = ['a', 'b', 'c']
repeater = Repeater(list)

for item in repeater:
    print item
    if (item == 'b'):
        repeater.repeat(); 
```

# ios - AVCaptureSession 和 AVAssetWriter 不同的设置

> ID：14981956
> 
> 赞同：2
> 
> 时间：2013-02-20T14:13:12.890
> 
> 标签：ios, video, avfoundation, avcapturesession, avassetwriter

在使用和设置从相机写入文件的情况下`AVAssetWriting`，例如`AVVideoWidth`1280 和`AVVideoHeight`720，但使用`AVCAptureSession`as `AVCaptureSessionPreset640x480`（或任何其他分辨率）的视频设置。视频最终会在`AVAssetWriter`'s 设置中编码，还是`AVCaptureSession`会应用 's 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:57:31.400

设置时，`AVCaptureSession`您定义`AVFoundation`交付给客户的格式（==您的应用程序）。
因此，捕获会话是数据流的起点。
`AVAssetWriter`是视频数据的最终目的地，因此最终视频将具有您在创建资产编写器时指定的格式。
在这两者之间，`AVAssetWriter`会将它收到的所有样本从您的捕获会话格式转码为您为您指定的格式`AVAssetWriterInput`（在`outputSettings`字典中）

# mac-app-store - 按类别或价格搜索 iTunes/Appstore

> ID：14981957
> 
> 赞同：2
> 
> 时间：2013-02-20T14:13:12.323
> 
> 标签：mac-app-store, itunes-store, itunes-search-api

有没有机会我可以按类别或价格搜索 Appstore（比如说 Mac Appstore，但我认为搜索对 iTunes 或 iOS 商店的工作方式相同），并获得所有具有给定类别或价格的应用程序，不受 200 个限制结果？

我发现的是这个搜索查询：

[http://itunes.apple.com/de/search?entity=macSoftware&term=game&limit=200](http://itunes.apple.com/de/search?entity=macSoftware&term=game&limit=200)

（此处为 200 的最大限制，如果未设置，则默认设置为 50）

我想要的是这样的：

...apple.com/search?entity=macSoftware&category=games

或者

...apple.com/search?entity=macSoftware&price=0.99

没有有限的结果。

知道如何获得这些结果吗？似乎官方网站在这里没有帮助：http: [//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T23:00:21.077

我认为您最好使用 RSS 提要 - 对于 Mac App Store，您可以返回每种类型的前 300 个应用程序。您还可以将请求范围缩小到热门应用（付费或免费）、热门付费、热门免费或热门收入：

具有游戏类型的顶级 Mac 应用程序 [https://itunes.apple.com/us/rss/topmacapps/limit=300/genre=12006/xml](https://itunes.apple.com/us/rss/topmacapps/limit=300/genre=12006/xml)

具有游戏类型的顶级免费 Mac 应用程序 [https://itunes.apple.com/us/rss/topfreemacapps/limit=300/genre=12006/xml](https://itunes.apple.com/us/rss/topfreemacapps/limit=300/genre=12006/xml)

RSS 提要生成器不会公开子类型，但 Games 有几个您也可以过滤掉：

具有纸牌游戏类型的顶级 Mac 应用程序 [https://itunes.apple.com/us/rss/topmacapps/limit=300/genre=12205/xml](https://itunes.apple.com/us/rss/topmacapps/limit=300/genre=12205/xml)

RSS 提要生成器：http: [//itunes.apple.com/rss](http://itunes.apple.com/rss)

iTunes 类型索引在这里（一直向下滚动，直到看到 Mac App Store）： http: [//www.apple.com/itunes/affiliates/resources/documentation/genre-mapping.html](http://www.apple.com/itunes/affiliates/resources/documentation/genre-mapping.html)

# magento - 订单页面上的 Magento：“此客户电子邮件已存在”

> ID：14981958
> 
> 赞同：4
> 
> 时间：2013-02-20T14:13:15.200
> 
> 标签：magento, migration, magento-1.6

我使用一些迁移工具将订单导入 Magento。当回头客尝试下订单时，Magento 阻止他们这样做并说“此客户电子邮件已存在”。尽管事实上他们已经登录到 Magento。

我是否错误地导入/迁移到 Magento 数据库？或者可能是其他什么原因造成的？

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T16:02:38.207

The exception you get is generated by the customer resource model's [_beforeSave](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Customer/Model/Resource/Customer.php#L89) function, which checks if a customer with the given email address exists. The check's code:

```
 $adapter = $this->_getWriteAdapter();
    $bind = array('email' => $customer->getEmail());

    $select = $adapter->select()
        ->from($this->getEntityTable(), array($this->getEntityIdField()))
        ->where('email = :email');
    if ($customer->getSharingConfig()->isWebsiteScope()) {
        $bind['website_id'] = (int)$customer->getWebsiteId();
        $select->where('website_id = :website_id');
    }
    if ($customer->getId()) {
        $bind['entity_id'] = (int)$customer->getId();
        $select->where('entity_id != :entity_id');
    }
    $result = $adapter->fetchOne($select, $bind);
    if ($result) {
        throw Mage::exception(
            'Mage_Customer', Mage::helper('customer')->__('This customer email already exists'),
            Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS
        );
    } 
```

You customers are logged in, which means the condition `$customer->getId()` is true. But since you get an exception, I suggest, there are duplicate customer accounts with the same emails.

Can it be that your import tool has created duplicates in the customer data? That is the only reason I can think of. Check your database with this query:

```
 select email, count(*) from customer_entity group by email having count(*) > 1 
```

# drupal - 一个模块有几个 hook_cron，drupal 6

> ID：14981966
> 
> 赞同：0
> 
> 时间：2013-02-20T14:13:41.097
> 
> 标签：drupal, drupal-6

有人知道（drupal 6）是否可以创建几个应该由 crontab 运行的任务？我已经创建了 hook mymodule_cron 但我还需要一个。是否可以创建类似 mymodule_another_task_cron 的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:54:29.830

I can highly recommend the [Elysia Cron](http://drupal.org/project/elysia_cron) module

> Elysia Cron extends Drupal standard cron, allowing a fine grain control over each task and several ways to add custom cron jobs to your site.

As a module developer the method you'll be most interested in is implementing `hook_cronapi()` to register jobs that can be scheduled individually through the Elysia cron admin settings.

There's also [Ultimate Cron](http://drupal.org/project/ultimate_cron), but I can't vouch for that one as I've never used it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:24:52.000

Why don't you add another task in your existing hook_cron? You can call whatever functions you want from one hook_cron.

# ocaml - 是否有其他方法可以解构 OCaml 中的选项类型？

> ID：14981967
> 
> 赞同：4
> 
> 时间：2013-02-20T14:13:42.947
> 
> 标签：ocaml, ml, code-readability

OCaml 的选项类型在您的函数可能不返回任何内容的情况下非常有用。但是当我在很多地方使用这个的时候，我发现`Some`在`None`一个`match ... with`.

例如，

```
let env2 = List.map (fun ((it,ie),v,t) ->
  match t with
  | Some t -> (v,t)
  | None   ->
    begin
      match it with
      | Some it -> (v,it)
      | None    -> failwith "Cannot infer local vars"
    end) ls_res in 
```

还有其他方法可以简洁地解构选项类型吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T14:49:59.533

对于简单的情况，您可以一次匹配多个内容：

```
match t, it with
| Some t, _ -> (v, t)
| None, Some it -> (v, it)
| None, None -> failwith "Cannot infer local vars" 
```

这是我一直在做的事情。我被告知编译器对这个结构很好（它实际上并没有生成额外的对）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:31:49.147

根据你想做的事情，你可以写很多东西来帮助处理这些问题。对于这种模式，我建议编写如下内容：

```
let or_else opt1 opt2 = match opt1 with 
  | Some _ -> opt1
  | None -> opt2 
```

然后将您的代码重组为：

```
let env2 = List.map (fun ((it,ie),v,t) ->
  match (or_else opt1 opt2) with
  | Some t -> (v,t)
  | None   -> failwith "Cannot infer local vars") ls_res in 
```

如果您有超过这个数量的选项，那么您可以`or_else`将它们折叠在一个列表中：

```
let a = [None; None; Some 1; Some 2;];;
List.fold a ~init:None ~f:or_else;; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:48:27.627

*   选项单子（又名。也许单子）。请注意，`Just`在 Haskell 中是`Some`在 OCaml 中，`Nothing`在 Haskell 中是`None`在 OCaml 中。[http://en.wikipedia.org/wiki/Option_type#The_option_monad](http://en.wikipedia.org/wiki/Option_type#The_option_monad)
*   高阶函数：`default : 'a -> 'a option -> 'a`, `map_option : ('a -> 'b) -> 'a option -> 'b option`,`or_else`在另一个答案中`map_some : ('a -> 'b option) -> 'a list -> 'b list`,`concat_some : 'a option list -> 'a list`等。我的名字可能不是标准的。
*   如果你遇到麻烦`unsome : 'a option -> 'a`，，，`let unsome = function Some a -> a | None -> raise Not_found`。实际上，如果您有高阶函数来处理普遍的`Not_found`异常，这很有用。

# javascript - Ember.js 自动聚焦于刚刚创建的模板

> ID：14981969
> 
> 赞同：2
> 
> 时间：2013-02-20T14:13:55.480
> 
> 标签：javascript, ember.js

在 Ember 中是否可以将重点放在刚刚创建的模板上？

```
 <script type="text/x-handlebars" data-template-name="foo">
    {{#linkTo "foo.bars" class="success radius button"}}GET ALL THE BARS{{/linkTo}}
    {{outlet}}
  </script> 
```

如何将焦点集中在新`foo/bars`模板上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:54:13.197

你试过`scrollIntoView`吗？您可以创建一个视图，在渲染后在其元素上调用它：

```
App.FooFoo = Ember.View.extend({
  templateName: 'foo',

  didInsertElement: function() {
    var el = this.$()[0];
    el.scrollIntoView();
  }
}); 
```

# sql - 显示带有参数的交叉表查询作为子表单源对象

> ID：14981970
> 
> 赞同：1
> 
> 时间：2013-02-20T14:13:58.410
> 
> 标签：sql, ms-access, crosstab

好的访问 2010 在这里。

我有一个交叉表，我们称之为“TestCrosstab”，它有一个参数来访问它用作参考的查询中的表单控件。它看起来像这样：

```
PARAMETERS [Forms]![TestForm]![TextDaysPast] Short;
TRANSFORM max(val) AS MaxValue
SELECT col AS Criteria
FROM (SELECT [Date], 'Crosstab Column Name 0' as Col, [Query Column Name 0] as  val
  FROM TestQuery
  UNION ALL
  SELECT [Date], 'Crosstab Column Name 1' as Col, [Query Column Name 1] as  val
  FROM TestQuery
  UNION ALL
  '... etc ...
)
GROUP BY col
PIVOT [Date]; 
```

如上所示，它的源查询称为“TestQuery”，它看起来像这样：

```
SELECT SourceDatabase.Date, 
Count(*) AS [Query Column Name 0], 
Sum(IIf(Stuff=Stuff And Stuff=Stuff,1,0)) AS [Query Column Name 1], 
'... etc ...
FROM SourceDatabase INNER JOIN SecondDatabase ON SourceDatabase.ID = SecondDatabase.ID
WHERE (((SourceDatabase.Date) Between Date() And Date()-Forms!TestForm!TextDaysPast))
GROUP BY SourceDatabase.Date; 
```

当用户在表单控件“TextDaysPast”中输入一个数字并且您在“弹出窗口”中手动运行查询时，它们都可以很好地工作。

我要做的是将上面的交叉表附加为子表单的源对象，纯粹用于显示目的。在 VBA 中，当用户在“TextDaysPast”中输入一个数字后，会调用这一行以将交叉表附加到子表单：

```
Me.SubformDisplay.SourceObject = "Query.TestCrosstab"
Me.SubformDisplay.Requery 
```

在“TextDaysPast”中输入数字并使用命令按钮执行查询后，表单似乎可以正常工作（没有错误），但不会显示交叉表。如果我将源查询更改为静态“WHERE”，则交叉表将不再需要“PARAMETERS”，并正常显示为子表单源对象。使用“PARAMETERS”的某些东西不允许显示交叉表。

关于如何解决这个问题的任何想法？将源查询和交叉表组合成一个大怪物可以解决这个问题吗？

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:53:16.897

据我所知，您不能在子表单中引用带有参数的交叉表。但是，您可以在 VBA 中构建查询，这样就不需要参数并更新子表单引用的交叉表查询的 sql。

```
 sSQL="TRANSFORM Sum(Table1.ANumber) AS SumOfANumber " _
     & "SELECT Table1.AText FROM Table1 " _
     & "WHERE Table1.AText='" & Me.txtText & "' " _
     & "GROUP BY Table1.AText PIVOT Table1.AText2"

''Permanently change the sql for MyXtab
CurrentDB.Querydefs("MyXtab").SQL=sSQL
Me.MySubformControlName.Requery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T23:08:40.053

另一种方法是从交叉表创建一个表并将其用作 SourceObject

```
DoCmd.RunSQL ("SELECT * INTO CRTTable FROM CrosstabQ")
Forms!myForm!Subform.SourceObject = "table.CRTTable" 
```

由于交叉表查询中的列数不同，因此可以预先删除 CRTTable。

# vba - 只读和撤消属性 MS Access (VBA)

> ID：14981975
> 
> 赞同：0
> 
> 时间：2013-02-20T14:14:14.770
> 
> 标签：vba, properties, save, record, undo

对于像我这样的新手来说，我一直在网上冲浪，寻找我认为这是一个非常简单的问题的答案。但还没有找到任何答案，所以我在这里！为了简单起见，我将附上我的代码中让我有点头疼的两段代码。我打算做的是通过单击按钮从只读模式切换到允许写入状态。为此，我希望例程检查记录上的更改，如果有任何要求用户决定是保存更改还是丢弃它们。在测试这个特定按钮时，我发现了一些非常“好笑”.. 当没有引入任何更改时，它似乎运作良好。从只读状态完美切换到允许写状态。但是，在允许写入并进行更改时，如果“保存选项”

我的另一个与此密切相关的问题是我找不到为撤消选项设置“保存点”的方法。我想找到一种“保存记录”的方法，因此当按下撤消按钮时，不会撤消自数据库首次打开以来记录所遭受的所有更改（正如它目前正在发生的那样），但由于按钮已经按下。我尝试了 DoCmd Save 功能，但没有像我预期的那样表现（注意：最后一个“else”是我最后一次尝试解决这个问题，但它再次没有按预期工作）

非常感谢您未来的合作，

亚历克斯

```
Private Sub Command28_Click()
    If Form_AODNewRecord.AllowAdditions = True Then
        Call isModified_Save

        Form_AODNewRecord.AllowAdditions = False
        Form_AODNewRecord.AllowEdits = False
        Form_AODNewRecord.AllowDeletions = False
        MsgBox "Read Only. Addition, Edits and Deletions are now locked"
        Command28.Caption = "LOCKED"
    Else
        Form_AODNewRecord.AllowAdditions = True
        Form_AODNewRecord.AllowEdits = True
        Form_AODNewRecord.AllowDeletions = True
        MsgBox "New records, edits and deletions are now allowed"
        Command28.Caption = "Lock mode OFF"
    End If

    MsgBox Form_AODNewRecord.AllowAdditions
End Sub

Sub isModified_Save()
    If Form_AODNewRecord.Dirty Then
        Dim strMsg As String, strTitle As String
        strMsg = "You have edited this record. Do you want to save the changes?"
        strTitle = "Save Record?"
        If MsgBox(strMsg, vbQuestion + vbYesNo, strTitle) = vbNo Then
            Me.Undo
        Else
            DoCmd.OpenTable "AOD Type", acViewPreview, acReadOnly
            DoCmd.Save acTable, "AOD Type"
            DoCmd.Close acTable, "AOD Type", acSaveYes

        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:47:37.540

我想你想要下面的代码。您无法打开表单绑定到的表并影响表单，当您打开表时，您有两个不同的实例，它们不会相互影响。

在 Office 应用程序中运行宏的一个奇怪的副作用是它会清除撤消列表，所以我创建了一个小宏，它只显示一条消息“撤消已清除”，这正是它的作用！

顺便说一句，用有意义的名称重命名您的控件，例如 cmdLock，而不是 Command28，稍后您会感谢自己。

```
Private Sub Command28_Click()
    If Me.AllowAdditions = True Then
        Call isModified_Save

        Me.AllowAdditions = False
        Me.AllowEdits = False
        Me.AllowDeletions = False
        MsgBox "Read Only. Addition, Edits and Deletions are now locked"
        Command28.Caption = "LOCKED"
    Else
        Me.AllowAdditions = True
        Me.AllowEdits = True
        Me.AllowDeletions = True
        MsgBox "New records, edits and deletions are now allowed"
        Command28.Caption = "Lock mode OFF"
    End If

    ''MsgBox Me.AllowAdditions
End Sub

Sub isModified_Save()
    If Me.Dirty Then
        Dim strMsg As String, strTitle As String
        strMsg = "You have edited this record. Do you want to save the changes?"
        strTitle = "Save Record?"
        If MsgBox(strMsg, vbQuestion + vbYesNo, strTitle) = vbNo Then
            Me.Undo
        Else
            ''Save record
            Me.Dirty = False
            ''Clear undo list
            DoCmd.RunMacro "ClearUndo"
        End If
    End If

End Sub 
```

# php - CI_SESSION 查询所需的 id 以查找活动用户

> ID：14981978
> 
> 赞同：1
> 
> 时间：2013-02-20T14:14:26.020
> 
> 标签：php, mysql, codeigniter, session

我的数据库中有`ci_sessions`一个表，当用户登录时，他们的信息保存在这个表中。我想检查一下，如果我给出了特别的，`user_id`那么它会告诉我这个用户是活跃的还是不活跃的。

我想以 CodeIgnter 的活动记录格式查询，而不是基本的 MySQL 格式。

例如：

```
 $this->db->select('*');
 $this->db->from('ci_sessions');
 $this->db->where('user_data','');
 $this->db->get(); 
```

在我的`ci_sessions`表中，该`user_data`列包含所有信息，包括 user_id。我要搜索这个专栏`where user_id = 'my_given_id'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:23:09.947

您可以通过以下方式获取`user_id`存储在会话数据中的内容 `$this->session->userdata('user_id');`

如果要从表中获取特定会话，`ci_sessions`则必须首先从表中检索`session_id`，`userdata`然后才能查询它。

```
$session_id = $this->session->userdata('session_id');

$this->db->select('*');
$this->db->from('ci_sessions');
$this->db->where('session_id', $session_id );
$this->db->get(); 
```

**编辑：** 如果要查询数据库中所有存储的会话并在其中搜索特定的会话，则`user_id`必须首先获取存储在表中的所有数据，反序列化`user_data`并在其中搜索`user_id`您要查找的数据。

# ruby - ActiveMQ 在通过 STOMP 发送时将消息存储在 Base64 中？

> ID：14981979
> 
> 赞同：1
> 
> 时间：2013-02-20T14:14:26.847
> 
> 标签：ruby, activemq, stomp

我正在使用 ruby​​ stomp gem 向 ActiveMQ 发送消息。数据以 Base64 编码形式存储，而不是作为文本存储，这影响了我使用 XPath 选择器的能力！

我已经确认使用码头中的“发送”功能，我可以将非 Base64 编码的文本发送到同一个队列。

关于如何阻止这种情况发生的任何建议？

* * *

我的测试代码：

```
require 'stomp'

stomp = { 
    :hosts => [{:host => 'localhost', :port => 61613}]
}

client = Stomp::Client.new(stomp)

queue = "/queue/test"
xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<test>xml</test>"

client.publish(queue,xml,{
    :'content-type' => 'application/xml',
    :persistent     => true
}) 
```

然后我可以访问 ActiveMQ 演示以查看实际存储的内容：

```
 http://127.0.0.1:8161/demo/queueBrowse/test?view=xml 
```

输出：

```
<messages queue="queue://test">
    <!-- snip -->
        <content>
            <data>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiID8+Cjx0ZXN0PnhtbDwvdGVzdD4A AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAA=</data>
            <offset>0</offset>
            <length>56</length>
        </content>
    <!-- snip -->
</messages> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:23:07.913

我已经解决了我自己的问题 - 这是它发生原因的细分。

ActiveMQ 假定任何传入的带有`content-length`标头的 STOMP 消息都是 ByteMessage，而没有该标头的任何传入的 STOMP 消息都是 TextMessage（[参考资料](http://activemq.apache.org/stomp.html)）。

Ruby 的[stomp gem](https://github.com/stompgem/stomp)试图考虑到这一点，但是他们实现的标头编码方法破坏了他们自己对自定义标头的测试`:suppress_content_length`：

我已经分叉并修改了他们的代码来解决这个问题 - 请参阅[我的 stomp repo](https://github.com/jphastings/stomp/commit/774df622afb5faaca98b07b878546c2306220386) - 希望他们很快就会折叠起来。

# javascript - Javascript/JQuery 如何从多个选择输入中获取文本

> ID：14981980
> 
> 赞同：0
> 
> 时间：2013-02-20T14:14:36.457
> 
> 标签：javascript, jquery, input, return-value

我想返回选定的文本，而不是值。我知道如何返回值：

```
$("#myid").multiselect("getChecked").map(function(){
     return this.value
}).get().join(","); 
```

但我不知道如何获取文本。我尝试了 map 函数 this.text、this.val() 等，但这些都不起作用。请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:34:54.543

我能找到的[multiSelect](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)使用 TITLE 来保存文本值

[演示](http://jsfiddle.net/mplungjan/yzY8M/)

```
$( "#myid" ).multiselect("getChecked").map(function(input){
   return input.title;
}).get().join(","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:16:52.823

DOM Element 对象没有`text`属性，你可以使用`textContent`DOM Element 对象的属性或 jQuery`text`方法：

```
var texts = $("#myid").multiselect("getChecked").map(function(){
    return this.textContent || this.innerText;
    // return $(this).text();
}).get().join(","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:21:39.373

有 jQuery 方法 .html() 方法来获取 innerHTML。

```
 $("#myid").multiselect("getChecked").map(function(){
           return this.html();
}).get().join(","); 
```

# php - Facebook getLogoutUrl() 无法按预期工作

> ID：14981984
> 
> 赞同：3
> 
> 时间：2013-02-20T14:14:39.667
> 
> 标签：php, facebook-php-sdk

这是我的代码：

```
 <?php
require_once("facebook-php-sdk/src/facebook.php");
    define('YOUR_APP_ID', 'xxxxxxxxxxxxx');
    define('YOUR_APP_SECRET', 'xxxxxxxxxxxxxxxxxxxxxxxx');
    $facebook = new Facebook(array(
     'appId' => YOUR_APP_ID,
     'secret' => YOUR_APP_SECRET,
    ));
    $userId = $facebook->getUser();
    if($userId){
         $userInfo = $facebook->api('/' + $userId);
         $fbid = $userInfo['id'];
         $params = array();
         echo '<a href='.$facebook->getLogoutUrl($params).'><div class="text-facebook"><img style="vertical-align:middle;" src="/img/fbicon.png">Logout</div></a>';                         
               }
                else{
                  $permission = array('scope' => 'email');
                  echo '<a href='.$facebook->getLoginUrl($permission).'><div class="text-facebook"><img style="vertical-align:middle;" src="/img/fbicon.png">Login with Facebook</div></a>';
                     }
?> 
```

登录效果很好，但是当我单击“注销”按钮时，它会让我退出 facebook.com，但它仍然登录在我的网站上，这与我想要的完全相反。我希望该链接从我的网站上删除所有 facebook 信息，但让用户登录到 facebook。

我不知道我是否正确解释了我需要什么，但如果有人问我会澄清的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:30:20.173

如果您希望用户从您的网站注销但保持登录到 facebook，那么答案很简单：

不要使用 facebook->getlogouturl()

如果在成功登录后，您将一个变量设置为 true，并使用它来允许您仅授予已登录用户的操作，那么您的注销按钮所需要做的就是将该变量设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:52:58.610

这里的问题不是注销链接（它工作正常，因为它使您退出 Facebook），而是您的网站如何检查您是否仍然登录到 Facebook

您使用的 Facebook API 只处理 Facebook 的事情。登录链接将使您登录 Facebook，注销链接将使您退出 Facebook。它不会直接影响您的网站。

您需要了解您的网站如何决定您是否仍登录 Facebook，然后从那里开始。

# mysql - 需要递归查找mysql表的第一行和最后一行，并以pair的形式显示

> ID：14981986
> 
> 赞同：0
> 
> 时间：2013-02-20T14:14:55.333
> 
> 标签：mysql

例如，我有一个包含数据的表：

按权重 desc 排序，排序 asc ：

```
ID : Weight : Rank desc
8：7：2
7 : 7 : 3
4：5：2
6：4：1
2：2：4
9：2：2

```

我需要从此列表中递归地显示第一行和最后一行的数据对。行可能是奇数或偶数且不固定。可能是 100s。

返回的结果应该是这样的：

```
编号 : (8,9)**(7,2)**(4,6)

```

我正在考虑 Mysql Select UNION 但没有正确获取它。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:19:22.433

试试这个 // 这个想法是你将排序表与反向排序表配对：

```
SET @fw=0; #forwards counter/index
SET @bw=(SELECT COUNT(id) FROM yourtable); #backwards index
SET @limit= @bw/2; #limit tohalf the set to avoid full set of versions (resulting in duplicates)

SELECT a.id, b.id
FROM (
SELECT @bw:=@bw-1 AS ct, id
FROM `yourtable` 
ORDER BY id
) a, (
SELECT @fw:=@fw+1 AS ct, id
FROM `yourtable` 
ORDER BY id
) b 
WHERE a.ct = b.ct
AND a.ct <= @limit 
```

# iis - IIS 6 到 IIS 7.5 导出 SSL 证书

> ID：14981987
> 
> 赞同：1
> 
> 时间：2013-02-20T14:15:03.180
> 
> 标签：iis, ssl, iis-6, iis-7.5

我们当前的站点在 IIS 6.0 上，带有来自 GoDaddy 的 EV SSL 证书（我知道 - 糟糕的选择）。

我目前正在使用 IIS 7.5 迁移到新服务器。我需要保持相同的主机名，所以当切换准备好时，我只想重新 IP 服务器。

如果我从 IIS 6.0 导出 SSL 并将其导入 IIS 7.5 服务器，这会禁用 IIS 6 上的证书吗？理想情况下，我想将证书复制到新盒子，然后通过指向新服务器的主机文件完成我的测试和迁移。

GoDaddy 支持对此的电子邮件回复虽然出人意料地彻底，但在这一点上并不清楚。他们还建议，在将证书移动到新服务器后，通过他们的站点重新输入密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:01:39.040

导出 SSL 证书不会禁用您的证书。它只是制作它的备份副本。您应该能够从旧服务器导出证书，然后毫无问题地将其导入新服务器。

如果您修改您的主机，正如您所提到的，它应该让您测试您的证书是否有效。

# algorithm - 非常奇怪的数据通道的纠错算法

> ID：14981992
> 
> 赞同：0
> 
> 时间：2013-02-20T14:15:12.243
> 
> 标签：algorithm, error-correction

请推荐一种使用非常奇怪的数据通道的纠错算法。

![图表](../Images/08d7138f800ad4bd1d9d7dcd02c372c7.png)

通道由两部分组成：Corrupter 和 Eraser。

Corrupter 接收到一个由 3 符号字母表中的 10000 个符号组成的单词，例如 {'a','b','c'}。
腐蚀者以 10% 的概率更改每个符号。
例子：

```
Corrupter input:  abcaccbacbbaaacbcacbcababacb...
Corrupter output: abcaacbacbbaabcbcacbcababccb... 
```

Eraser 接收到损坏的输出并以 94% 的概率擦除每个符号。
橡皮擦在 4 符号字母表 {'a','b','c','*'} 中产生相同长度的单词。
例子：

```
Eraser input:  abcaacbacbbaabcbcacbcababccb...
Eraser output: *******a*****************c**... 
```

因此，在橡皮擦输出中，大约 6%*10000=600 个符号不会被擦除，其中大约 90%*600=540 个将保​​留其原始值，大约 60 个将被损坏。

**哪种带纠错的编码-解码算法最适合这个通道？**
如果成功解码的概率 > 99.99%，可以传输多少有用数据？
是否可以通过该通道传输 40 字节的数据？(256^40 ~ 3^200)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:34:22.097

这是您至少可以分析的内容：

将你的 40 字节分成 13 个 25 位块（有一些浪费，所以这个位显然可以改进）

2^25 < 3^16 因此您可以将 25 位编码为 16 a/b/c “trits” - 再次浪费意味着改进的余地。

有了 10,000 个可用的 trit，您可以为 13 个编码字节三元组中的每一个提供 769 个输出 trit。在 16 个 trits 上选择（可能随机）769 个不同的线性（mod 3）函数 - 每个函数由 16 个 trits 指定，并且您在这些 trits 和 16 个输入 trits 之间取向量点积。这为您提供了 769 个输出三重奏。

通过考虑所有可能的 (2^25) 块进行解码，并选择与大多数幸存的 trits 匹配的块。只要至少有 16 个幸存的三重奏，你就有希望得到正确的答案，我认为 excel 通过 BINOMDIST() 告诉我的情况经常发生，很有可能所有 13 个三重奏都会发生25 位块。

我不知道你从乱码中得到的错误率是多少，但随机线性码有很好的声誉，即使这个码块大小很短，因为我的脑死解码技术。在最坏的情况下，您可以尝试模拟 25 位块的编码传输和解码并从那里解决。如果你假装乱码阶段也被擦除，那么你可以获得比上面更准确的错误率下限，因此以略高的擦除概率重新计算。

如果你能负担得起每 25 位块的 2^25 次猜测来解码，我认为这实际上可能在实践中起作用。OTOH，如果这是课堂上的一个问题，我猜你需要证明你对课堂上已经讨论过的一些不太特别的技术的了解。

# joomla - 一个活动中的特定日期 joomla

> ID：14981994
> 
> 赞同：0
> 
> 时间：2013-02-20T14:15:15.323
> 
> 标签：joomla, joomla2.5

我想添加一个具有特定日期的事件，我尝试了很多组件但没有成功的那种功能。

Joomla 中是否有任何可用的组件具有此功能？

如果没有，那么您能就此提出建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:36:01.800

重复事件？！？

我只能找到商业扩展：

1.  [活动注册专业版](http://extensions.joomla.org/extensions/calendars-a-events/events/events-registration/3458)
2.  [Zap 日历](http://extensions.joomla.org/extensions/calendars-a-events/events/events-calendars/8587)
3.  [Jtag 日历](http://extensions.joomla.org/extensions/calendars-a-events/events/events-calendars/17043)
4.  [蜘蛛日历](http://extensions.joomla.org/extensions/calendars-a-events/events/events-calendars/22329)
5.  [JE Ajax 活动日历](http://extensions.joomla.org/extensions/calendars-a-events/events/events-calendars/12110)

非商业：

1.  [事件](http://extensions.joomla.org/extensions/calendars-a-events/events/events-calendars/95)

如果还有其他您正在寻找的东西，请进一步解释。

# java - 有没有办法找出传递给 jar 的参数被引用了？

> ID：14981995
> 
> 赞同：0
> 
> 时间：2013-02-20T14:15:23.573
> 
> 标签：java, shell, arguments

我正在尝试将许多参数传递给我的 Java 应用程序，但我想自己使用智能解析器来解析它们，该解析器不仅仅依赖空格来分隔参数。一个例子：

```
/更新源=foo func=(bar, foo ,foo,bar)
```

通过将所有内容转换为令牌然后解析它们，这一切都很好。但是，当我添加时出现问题：

```
path="./foo/bar/foo bar.txt"
```

（注意 foo 和 bar 之间的双倍空格）。

当我使用双引号时，参数作为单个字符串传递，保留双空格。尽管像这样删除引号：

```
路径=./foo/bar/foo bar.txt
```

这使我的解析器失败。但是当我尝试使用其他字符作为引号时，例如'，解析器工作正常，但是shell将字符串作为两个单独的字符串传递，在双空格处分隔，因此我丢失了那里有两个空格的信息.

我可以做些什么来使用双引号传递参数以保留文字字符串表示，同时保留字符串被引用的信息，而无需用户键入像“'string'”这样的奇怪结构？我正在使用Java，也许有一种方法可以让外壳不解析整行参数？或者只是没有删除引号？

顺便说一句，我从微软命令行运行它，还没有尝试过 unix shell，它甚至可能在我在互联网上读到的单引号上失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:42:59.973

在 Windows 命令行（使用`cmd.exe`）上，您可以使用 . 转义双引号`\"`。例如，

```
java MyApp path=\"./foo/bar/foo bar.txt\" 
```

将导致

```
args[0] = path="./foo/bar/foo
args[1] = bar.txt" 
```

尽管

```
java MyApp path="\"./foo/bar/foo  bar.txt\"" 
```

会给你

```
args[0] = path="./foo/bar/foo  bar.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:27:26.413

感谢我得到的帮助，但我已经想通了：

*   我知道可以引用的内容不包含括号、逗号或等号，我的解析器可以识别这些内容。

*   我知道如果引用了某些内容并且它包含空格，那么这些空格仍将存在于 split 参数中。

*   我知道原始参数字符串在空格的每个区域都被拆分，因此最终拆分参数不包含空格，仅包含引号部分中的空格。

因此我可以假设，如果我解析一个拆分参数，其中的任何空间并不意味着必须生成一个新的令牌，因此它会保留在最终的字符串令牌中。

我现在只需要重写我的标记器来接受一个参数数组，而不是我现在从我在 main() 方法中传递的 args 数组创建的连接字符串。这样我就可以区分跳过真正的空格（进入数组的下一个元素）和引用的空格（任何其他空格）。

# java - JTabbedPane 中的 JTextfield 过大

> ID：14981996
> 
> 赞同：-1
> 
> 时间：2013-02-20T14:15:25.083
> 
> 标签：java, swing

```
 textArea = new JTextArea(textString);
    JScrollPane text = new JScrollPane(textArea,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    text.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20)); 
```

我将 JScrollPane 文本添加到 JTabbedPane 中，没什么特别的。

但是，当我切换选项卡时，texfield 会扩展并调整整个窗口的大小。

```
 JFrame frame = new JFrame();
    frame.setSize(600, 500);
    JPanel main = new JPanel();
    main.setLayout(new BorderLayout(0,0));
    main.setBorder(new EmptyBorder(10, 10, 10, 10) );
    textArea = new JTextArea(textString);
    JScrollPane text = new JScrollPane(textArea,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    text.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

    JTabbedPane tabs = new JTabbedPane();
    tabs.add("Text lines", text);
    tabs.add("Another", new JPanel());
    main.add(new JLabel("test"), BorderLayout.NORTH);
    main.add(tabs, BorderLayout.SOUTH);
    frame.setContentPane(main);
    frame.pack(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:26:18.370

我在您的示例中发现的问题是，当您在文本区域中输入多行并切换到另一个选项卡时，选项卡式窗格的大小会变大。为了解决这个问题，只需输入要在`JTextArea`构造函数中显示的文本区域行数。例如，要显示 5 行：

```
textArea = new JTextArea(textString, 5, 0); 
```

现在选项卡式窗格将不会调整大小。

# database - 社交应用的服务器设计

> ID：14981997
> 
> 赞同：-3
> 
> 时间：2013-02-20T14:15:26.953
> 
> 标签：database

我目前正在设计一个应用程序来从服务器上传和下载文件。我想知道要实现哪种类型的服务器足够强大，可以处理每个用户和大量用户的大量数据。

我意识到这可能是一个非常广泛且有点幼稚的问题。

我做了一些研究，我认为我必须获得一个 SQL 服务器并为数据库创建一个 Web 服务，并实现一个 REST 系统来与设备端的服务进行交互。

问候，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:20:27.723

这本身并不是一个天真的问题，但您需要提供比这更多的信息。

如果您只是喜欢传输文件：为什么不使用简单但有效的 FTP 协议呢？