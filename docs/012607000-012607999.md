# StackOverflow 问答 12607000-12607999

# php - PHP - 为什么我的变量仍未定义？

> ID：12607005
> 
> 赞同：-1
> 
> 时间：2012-09-26T17:13:51.767
> 
> 标签：php, html, arrays

好的，我已经搜索并阅读了许多“未定义”变量问题，但找不到解决问题的方法。我是 PHP 新手，所以我希望我在这里要传达的内容很清楚。. .

我有一个带有选择下拉列表的表单。根据用户选择的内容，我的 php 脚本使用 PDO 从 mySql 数据库中检索记录，并将 FetchAll 输出分配给 Session 变量，然后返回到初始表单。

在表单中，我将变量 $scores 设置为会话变量。在表单中，我使用 foreach 循环遍历结果并回显 HTML。它工作得很好，但是当我从浏览器查看源代码时，我收到了这个通知（但是它没有显示在页面上）：

`Notice: Undefined variable: scores in C:\inetpub\wwwroot\content\viewScores.php on line 187`

正如我所说，这并没有真正影响我的页面，但我只是好奇为什么我会收到该消息。

这是我的代码片段。. .

```
<?php $scores = $_SESSION['scores'];?>
<html>
  .
  .
  .
    <?php
        foreach ($scores as $row) {
            echo '<td>' . $row['date'] . '</td>';
               .
               .
               .
        }
    ?>
</html> 
```

foreach 循环是消息的来源。该变量设置为 PDO fetchAll 输出数组的内容，并且循环有效，那么为什么会出现消息？如果我在循环之前放置一个 vardump - 它会很好地转储 $scores 数组。

我已经厌倦了使用 foreach `((array)$scores as $row)`，因为我必须在初始选择下拉列表中这样做以避免出现此错误消息“为 foreach() 提供的参数无效”，这也让我感到困惑，直到我在此板上找到（数组）解决方案（谢谢！）。我仍然不明白为什么我必须这样做，因为 foreach 无论如何都需要一个数组作为第一个参数？也许是因为它是一个数组的数组（或任何你称之为的）。无论如何使用 (array) 并没有解决未定义的变量错误。

有任何想法吗？

编辑：感谢您到目前为止的快速回复。对不起，我从答案中看到可能我的问题并不完全清楚。我包含的代码片段不包括设置 $scores 的所有 PHP 代码 - 我确实使用它`if (isset($_SESSION['scores']))`来验证是否设置了 $_SESSION['scores']。

我刚刚注意到一些非常奇怪的事情。这在 IE 8 中不会发生，它只会在 Google Chrome 中发生。但我认为 PHP 是服务器端脚本，那么为什么我只能在 Google Chrome 中收到此消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:23:25.933

在将会话变量设置为 $scores 变量之前，您应该检查以确保它存在，如果它不存在，则将 $scores 设置为一个空数组（按照@hakra 所说的行）。这将停止通知。

```
<?php $scores = isset($_SESSION['scores']) ? $_SESSION['scores']:array(); ?>
<html>
  .
  .
  .
    <?php
        foreach ($scores as $row) {
            echo '<td>' . $row['date'] . '</td>';
               .
               .
               .
        }
    ?>
</html> 
```

# jsp - 使用 JSP 和 JSTL 作为视图的 Spring MVC 基本示例不起作用

> ID：12607011
> 
> 赞同：1
> 
> 时间：2012-09-26T17:14:17.397
> 
> 标签：jsp, spring-mvc, jstl

与 Spring MVC 的许多新人一样，我很难克服第一个障碍。在我的情况下，当前的障碍似乎与 JSTL fmt taglib 没有正确格式化我的日期有关，***或者***它正在通过 fmt 标签的 value 属性传递一个字符串文字。我有一个简单的 Maven 项目，我用它来解决我所知道的问题。以下代码片段来自我的 WelcomeController、web-servlet.xml、web.xml 和 welcome.jsp。

WelcomeController.java

```
 @Controller
    @RequestMapping(value="/")
    class WelcomeController {  

        @RequestMapping(method=RequestMethod.GET) 
        public String welcome(Model model) {
            Date today = new Date();
            System.out.println("Controller being called");
            model.addAttribute("today", today);
            System.out.println(model.containsAttribute("today"));
            return "welcome";
       }
    } 
```

web-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
   <beans> <!-- bean namespaces ommitted for space sake -->

        <context:component-scan base-package="org.opel.eros.web"/>

        <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

        <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

        <context:property-placeholder location="classpath:META-INF/properties/web-config.properties"/>

        <mvc:annotation-driven/>

        <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="prefix" value="${config.prefix}"/>
            <property name="suffix" value="${config.suffix}"></property>
        </bean> 
```

web.xml

```
 <web-app>
       <servlet>
            <servlet-name>eros</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
       </servlet>

       <servlet-mapping>
           <servlet-name>eros</servlet-name>
           <url-pattern>/</url-pattern>
       </servlet-mapping>
   </web-app> 
```

最后是welcome.jsp

```
 <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
   <html>
   <head></head>
   <body>
       <fmt:formatDate value="${today}" pattern="yyyy-MM-dd"/>
   </body>
   </html> 
```

我知道并没有变得更简单，但是当我输入 url 时抛出异常`http://localhost:9990/XYZ/`，这是异常：PWC6338: Cannot convert "${today}" for the attribute value of the bean java.util.Date

在我看来，这似乎是一个错误，其中将 formateDate 传递给字符串文字“${today}”，这显然会引发异常。我用来帮助的示例（来自 Spring Reciepes: A problem Solution Approach）指出要访问模型属性，您使用上面 fmt 标记中指定的语法。

基本上，我正在寻找解决方案以及发生这种情况的原因（我确实意识到这对我来说可能是非常简单**和愚蠢**的事情=]）。感谢您提前提供任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:15:11.010

问题似乎在 web.xml 内部。web.xml 和相应的项目结构是由 Spring Source 工具使用 maven-archtype-webapp 自动生成的。自动生成的 web.xml 没有指定任何命名空间定义；而是指定与此类似的 DOCTYPE：

```
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd" > 
```

我错误地假设自动生成的代码将使用 3.0 版定义。对版本 3 的更改解决了这些问题。需要注意的一件事是，虽然系统显然使用的是 2.3 版，但调用的输出如下：

```
-application.getMajorVersion(); and
-application.getMinorVersion(); 
```

制作了 3.0 的 Servlet 版本，这导致了我的一些困惑，并且可能会引起其他人的注意。非常感谢博格丹的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:43:00.927

我的猜测是您使用的 JSP 版本和 JSTL 版本不匹配。这是一篇描述如何根据您的设置使用 JSTL 的文章：[如何在您的 Web 应用程序中引用和使用 JSTL](http://www.mularien.com/blog/2008/04/24/how-to-reference-and-use-jstl-in-your-web-application/)。

您`<web-app>`在 web.xml 中的标签没有说明您的应用程序的版本，所以这是我要检查的第一件事。您可以[编写一些代码来找出您的应用程序版本](http://www.coderanch.com/t/425693/java-Web-Component-SCWCD/certification/know-which-servlet-jsp-version)（如果您没有在 web.xml 中明确指定，每个 servlet 版本都应该有其默认值），或者通过更改来进行快速而肮脏的测试以查看您是否使用 JSP 2你的 JSP 到这个：

```
<html>
   <head></head>
   <body>
       ${today}
   </body>
</html> 
```

如果您看到日期值，则说明您在 JSP 2 上；如果您看到字符串 ${today}，那么您在 JSP 1 上（使用了错误的 JSTL 版本）。

# eclipse - Maven eclipse：eclipse不生成.project

> ID：12607012
> 
> 赞同：0
> 
> 时间：2012-09-26T17:14:19.660
> 
> 标签：eclipse, maven

在我的多项目模块中，当我运行时，`eclipse:eclipse`我注意到很多项目没有 .project 文件，因此没有出现在 Eclipse 中。

我需要在这些 POM 中配置任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:33:38.927

我不是 Eclipse 专家，但我相信您可以使用 m2e 插件而不是使用`maven-eclipse-plugin`.

如果您安装了该插件，那么您可以执行`[File] -> [Import...]`. 这将打开一个导入对话框。如果您转到该`[Maven]`文件夹​​并打开它，您将能够选择`Existing Maven Projects`.

我认为这两种方式（`maven-eclipse-plugin`和`m2e`）都有其积极和消极的方面。但是你至少可以试试这个`m2e`插件，看看是否有区别。

# objective-c - UIRefreshControl iOS 6 xcode

> ID：12607015
> 
> 赞同：42
> 
> 时间：2012-09-26T17:14:33.110
> 
> 标签：objective-c, iphone, xcode, ios6, uirefreshcontrol

有没有人有一个简短的例子来说明如何在`UIRefreshControl`xcode 中实现新的。我有一个`UITableViewController`显示推文，希望能够下拉和刷新。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-26T17:19:34.170

`viewDidLoad`如果你有一个，你可以在你的 中设置它`UITableViewController`：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(refresh)
         forControlEvents:UIControlEventValueChanged]; 
self.refreshControl = refreshControl; 
```

然后你可以在这里做你的刷新的东西：

```
-(void)refresh {
    // do something here to refresh.
} 
```

完成刷新后，调用`[self.refreshControl endRefreshing];`以停止刷新控制，正如 rjgonzo 所指出的那样。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-27T18:40:12.303

您也可以在 Interface Builder 中进行配置。虽然它目前的工作方式，它只为您节省了几行代码。

选择 TableViewController 场景，在 Attributes Inspector 中，您会发现“刷新”的下拉列表选项。将其设置为“启用”。您会注意到在 View Controller Hierarchy 中添加了“刷新控件”（您不会看到任何视觉上添加到场景本身的内容）。奇怪的是，在将刷新控件连接到 IBAction（值更改事件）之后，该事件似乎没有被触发。我猜这是一个错误（？），但同时，将“刷新”设置为启用会创建 UIRefreshControl 对象并将其分配给视图控制器的 refreshControl 属性。完成后，您可以将事件处理行添加到 viewDidLoad 方法中：

```
[self.refreshControl addTarget:self action:@selector(refreshView:) forControlEvents:UIControlEventValueChanged]; 
```

在您的 refreshView: 方法中，您可以做一些工作，然后停止刷新动画：

```
- (void)refreshView:(UIRefreshControl *)sender {
    // Do something...
    [sender endRefreshing];
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-17T06:57:29.073

在这里你如何下拉和刷新

在你的**UITableViewController.h**添加 `UIRefreshControl *refreshControl;`和 `-(void) refreshMyTableView;`方法全局声明

并`viewDidLoad`在**UITableViewController.m**

```
//initialise the refresh controller
refreshControl = [[UIRefreshControl alloc] init];
 //set the title for pull request
    refreshControl.attributedTitle = [[NSAttributedString alloc]initWithString:@"pull to Refresh"];
    //call he refresh function
    [refreshControl addTarget:self action:@selector(refreshMyTableView)
             forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl; 
```

并具有刷新日期和时间的刷新功能

```
-(void)refreshMyTableView{

    //set the title while refreshing
    refreshControl.attributedTitle = [[NSAttributedString alloc]initWithString:@"Refreshing the TableView"];
    //set the date and time of refreshing 
    NSDateFormatter *formattedDate = [[NSDateFormatter alloc]init];
    [formattedDate setDateFormat:@"MMM d, h:mm a"];
    NSString *lastupdated = [NSString stringWithFormat:@"Last Updated on %@",[formattedDate stringFromDate:[NSDate date]]];
    refreshControl.attributedTitle = [[NSAttributedString alloc]initWithString:lastupdated];
    //end the refreshing
    [refreshControl endRefreshing];

} 
```

# accessibility - Web 应用程序中的渐变按钮是否符合可访问性？

> ID：12607017
> 
> 赞同：1
> 
> 时间：2012-09-26T17:14:36.433
> 
> 标签：accessibility, wcag

有人知道 Web 应用程序中的渐变按钮是否符合 WCAG 可访问性规则吗？我们正在为 Web 应用程序开发高对比度模式，但我找不到任何指导方针。我们可以保留它们还是只应该使用纯色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:59:28.233

只要您的配色方案通过了可访问性的色盲测试，您应该没问题。如果您专注于可感知的配色方案，则有色盲缺陷的用户仍然应该能够看到对比度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:22:46.880

正如阿尔伯特所说，检查色盲，主要是男性，并且对于中小型文本的对比度至少为 4.5:1，对于较大的文本（如果不是 aaa），对比度至少为 3.5:1。名为 colour-checker 的 Firefox 插件将对此有所帮助。

# ruby-on-rails - Rails rake db：迁移最近创建的数据库

> ID：12607020
> 
> 赞同：0
> 
> 时间：2012-09-26T17:14:45.750
> 
> 标签：ruby-on-rails, ruby, activerecord, rake, dbmigrate

我刚刚创建了一个数据库。我正在尝试迁移，但收到未找到表的错误。

```
rake db:migrate 
/usr/local/rvm/gems/ruby-1.9.2-p290@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:211: warning:     Insecure world writable dir /usr/local/rvm/gems in PATH, mode 042777
rake aborted!
Mysql2::Error: Table 'law_development.users' doesn't exist: SHOW FIELDS FROM `users` 
```

任务：TOP => db:migrate => environment（通过使用 --trace 运行任务查看完整跟踪）

该表是由第一次迁移创建的，数据库是空的（没有表）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:46:37.960

这种行为有多种原因。如果上述解决方案对您不起作用，那么首先尝试运行：

```
rake db:migrate --trace 
```

检查生成的日志，肯定会有一些代码会破坏迁移。

有关更多信息，您可以咨询[此论坛](http://railsforum.com/viewtopic.php?id=26700)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:21:44.570

尝试从一个干净的数据库开始，并直接加载架构而不是运行迁移：

```
rake db:drop db:create db:schema:load 
```

# javascript - 制作一个接受对象列表的函数和一个匿名函数来遍历它们

> ID：12607022
> 
> 赞同：1
> 
> 时间：2012-09-26T17:14:54.327
> 
> 标签：javascript, jquery

参数是：

数据：对象数组。

anonFunction：一个函数，其参数与数据对象的参数相同。

目标：

它将遍历数据，并每次使用新参数触发匿名函数。

想法/尝试：

```
 function special(data, executeFunction){
    var callback = function(){
       if(executeFunction){
          executeFunction();
       }
    }
    var d = JSON.parse(data);
    for( var i = 0; i < d.length; i++){
       var object = d[i];
       callback(object);
    }
 } 
```

这看起来对吗？我能看到的唯一问题是对象被序列化了。所以我只需要按顺序传递项目的值。可以通过某种方式完成的图。我不知道。:(

如您所见，我有一些差距。

编辑：一些示例数据：

```
data = [{"url": "google.com", "type":"POST"}, {"url":"yahoo.com","type":"GET"}] 
```

它将被分解为对 url 和类型的迭代。我会将其传递给：

```
anonFunction(a,b){
     $.ajax({url:a, type:b});
} 
```

因此，在使用列表和 anonfunction 执行我的函数后，它会使用我的示例向 google 和 yahoo 发出请求。

编辑2：

函数会是什么样子：

```
 //given data from above.
 special(data, function(a,b){
     $.ajax({url:a, type:b});
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:27:17.410

您`callback`定义的函数不接受任何参数。稍后，您将对象传递给它，但它不会对它做任何事情。

不过，我认为您将其复杂化了。你只需要这样的东西：

```
function special(data, callback){
  if(!callback) return;
  var d = JSON.parse(data);
  for( var i = 0; i < d.length; i++){
    callback(d[i]);
  }
}

special(data, $.ajax); 
```

作为奖励，在 Coffeescript 中，这就像：

```
$.ajax(settings) for settings in JSON.parse(data) 
```

:)

# c# - 将 DNN 站点地图暴露给外部 asp.net 应用程序

> ID：12607027
> 
> 赞同：0
> 
> 时间：2012-09-26T17:15:22.423
> 
> 标签：c#, asp.net, web-services, dotnetnuke, dotnetnuke-6

我正在尝试将 DNN6 站点地图提供程序公开给外部 asp.net 应用程序。

有没有人有任何有用的提示来完成这个？

我可以毫无问题地获取用户和选项卡属性；并在 asp.net 应用程序中为基本 URL 创建了一个节点，帮助？

我创建了一个 DNN Web 服务，我的应用程序将调用它来在 asp.net 旧版应用程序上正确设置导航（使用 DNN 来维护导航和权限）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:10:10.247

Here's the full code of a handler that retrieves tabs in hierarchy from the DNN database and returns the result as an xml document. It's a child's play to wrap any sitemap provider around the xml.

```
<%@ WebHandler Language="C#" Class="Menus" %>

using System;
using System.Web;

using System.Text;
using System.Xml;
using System.IO;
using System.Globalization;

using DotNetNuke.Common;
using DotNetNuke.Common.Utilities;
using DotNetNuke.Entities.Portals;
using DotNetNuke.Entities.Tabs;
using DotNetNuke.Security.Permissions;
using System.Collections.Generic;

public class Menus : IHttpHandler {

public void ProcessRequest (HttpContext context) {

string cc = PortalAliasController.GetPortalAliasByTab(Int32.Parse(context.Request.Params["tabid"]),"");

PortalAliasInfo pa = PortalAliasController.GetPortalAliasInfo(cc);
int portalid = pa.PortalID;

PortalSettings ps = new PortalSettings(portalid);
int tabid = ps.HomeTabId;  

if (!String.IsNullOrEmpty(context.Request.Params["tabid"]))
    tabid = Int32.Parse(context.Request.Params["tabid"]);  

XmlWriterSettings ws = new XmlWriterSettings();
ws.Indent = true;
ws.Encoding = Encoding.UTF8;
    XmlWriter xw = XmlWriter.Create(context.Response.OutputStream, ws);
    context.Response.ContentType = "text/xml";

xw.WriteStartElement("root");
xw.WriteElementString("portalid", portalid.ToString());

MakeMenu(context, xw, tabid, portalid);

xw.WriteEndElement();
xw.Close();

}

public bool IsReusable {
    get {
        return false;
    }
}

private void MakeMenu(HttpContext context, XmlWriter xw, Int32 tabid, Int32 portalid)
{

    List<TabInfo> tabs = TabController.GetTabsByParent(tabid, portalid);
    if (tabs.Count == 0) return;

    foreach (TabInfo objTab in tabs)
    {

        if (!objTab.IsDeleted &&
          !objTab.DisableLink &&
          objTab.IsVisible &&
          objTab.TabType == TabType.Normal &&
          (Null.IsNull(objTab.StartDate) || objTab.StartDate < DateTime.Now) &&
          (Null.IsNull(objTab.EndDate) || objTab.EndDate > DateTime.Now)

        )
        {
            if (TabPermissionController.CanViewPage(objTab))
            {

                string tabName = objTab.TabName;
                string URL = objTab.FullUrl;

              if (URL.ToLower().IndexOf(context.Request.Url.Host.ToLower()) == -1) ;

              URL = Globals.AddHTTP(context.Request.Url.Host) + URL;

              xw.WriteStartElement("menu");
              xw.WriteAttributeString("text", tabName);
              xw.WriteAttributeString("url", URL);
              MakeMenu(context, xw, objTab.TabID, portalid);
              xw.WriteEndElement();

            }

        }

    }

} 
```

}

# php - curl（php脚本）下载不完整的文件

> ID：12607028
> 
> 赞同：1
> 
> 时间：2012-09-26T17:15:26.710
> 
> 标签：php, curl, download

我正在使用 php 脚本来使用 curl 从外部 url 下载 xml 文件，但我遇到了问题。Curl 有时无法下载完整的文件。当我使用 cron 通过主机服务器运行脚本时，问题会更频繁地发生。

这是脚本：

```
<?php
header('Content-type:text/html; charset=utf-8');

//initialize downloading xml file tries
$xml_dl_attempts = 0;

//set filename of output xml file
$findex = 0;
while(file_exists("xml".$findex.".xml"))
{
    $findex++;
}
$filename = "xml".$findex.".xml";

//filname for log file
$logfilename = "log.txt";

//Open (append) logfile for write.
$logfileout = fopen($logfilename, 'a');
fwrite($logfileout, "Starting attempts to download the xml file at ".date("H:i:s Y-m-d")."\r\n");

//Attempt to download xml file 8 times
do {
    //Sleep 3 second before retrying download
    if($xml_dl_attempts > 0 ) sleep(3);

    //Increse number of download attempts
    $xml_dl_attempts++;
    //Write to logfile
    fwrite($logfileout, date("H:i:s Y-m-d").": Download attempt number ".$xml_dl_attempts.": ");

    //Download xml file using curl
    $ch = curl_init();
    $url = 'http://www.opap.gr/web/services/rs/betting/availableBetGames/sport/program/4100/0/sport-1.xml?localeId=el_GR';

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    set_time_limit(300); 
    curl_setopt($ch, CURLOPT_TIMEOUT, 300);

    $outfile = fopen($filename, 'w');
    if (!$outfile)
    {
    exit;
    }
    curl_setopt($ch, CURLOPT_FILE, $outfile);

    if(curl_exec($ch)==false)
    {
        fwrite($logfileout, "curl_error: ".curl_error($ch));
    }
    fclose($outfile);
    curl_close($ch);

    //Clear errors
    libxml_use_internal_errors(true);
    libxml_clear_errors();

    //Parse xml file
    $xml = simplexml_load_file($filename);

    //Check for errors
    if($err = libxml_get_last_error())
    {
        fwrite($logfileout, "failed\r\n");
    }
} while($err !== false && $xml_dl_attempts < 8); //repeat if xml was not completely downloaded

//Check if 
if(!$err)
{
    fwrite($logfileout, "successfull\r\n");
}
fwrite($logfileout, "End.\r\n");
fclose($logfileout);
?> 
```

如您所见，我检查 simplexml 解析器在解析下载的 xml 文件时是否出错。如果发生错误，我会重复该过程，最多尝试 8 次。我还创建了一个日志文件。

这是一整天的日志文件：

```
Starting attempts to download the xml file at 18:35:00 2012-09-25

18:35:00 2012-09-25: Download attempt number : failed

18:35:03 2012-09-25: Download attempt number : failed

18:35:07 2012-09-25: Download attempt number : successfull

End.

Starting attempts to download the xml file at 19:35:00 2012-09-25

19:35:00 2012-09-25: Download attempt number 1: failed

19:35:03 2012-09-25: Download attempt number 2: failed

19:35:06 2012-09-25: Download attempt number 3: failed

19:35:10 2012-09-25: Download attempt number 4: failed

19:35:13 2012-09-25: Download attempt number 5: failed

19:35:16 2012-09-25: Download attempt number 6: failed

19:35:20 2012-09-25: Download attempt number 7: failed

19:35:23 2012-09-25: Download attempt number 8: successfull

End.

Starting attempts to download the xml file at 20:35:00 2012-09-25

20:35:00 2012-09-25: Download attempt number 1: failed

20:35:04 2012-09-25: Download attempt number 2: failed

20:35:08 2012-09-25: Download attempt number 3: successfull

End.

Starting attempts to download the xml file at 21:35:00 2012-09-25

21:35:00 2012-09-25: Download attempt number 1: failed

21:35:04 2012-09-25: Download attempt number 2: failed

21:35:07 2012-09-25: Download attempt number 3: failed

21:35:11 2012-09-25: Download attempt number 4: successfull

End.

Starting attempts to download the xml file at 22:35:00 2012-09-25

22:35:00 2012-09-25: Download attempt number 1: failed

22:35:04 2012-09-25: Download attempt number 2: failed

22:35:07 2012-09-25: Download attempt number 3: successfull

End.

Starting attempts to download the xml file at 23:35:00 2012-09-25

23:35:00 2012-09-25: Download attempt number 1: failed

23:35:03 2012-09-25: Download attempt number 2: failed

23:35:07 2012-09-25: Download attempt number 3: failed

23:35:10 2012-09-25: Download attempt number 4: failed

23:35:14 2012-09-25: Download attempt number 5: failed

23:35:17 2012-09-25: Download attempt number 6: failed

23:35:21 2012-09-25: Download attempt number 7: successfull

End.

Starting attempts to download the xml file at 00:35:00 2012-09-26

00:35:00 2012-09-26: Download attempt number 1: successfull

End.

Starting attempts to download the xml file at 01:35:00 2012-09-26

01:35:00 2012-09-26: Download attempt number 1: failed

01:35:04 2012-09-26: Download attempt number 2: failed

01:35:07 2012-09-26: Download attempt number 3: failed

01:35:11 2012-09-26: Download attempt number 4: failed

01:35:14 2012-09-26: Download attempt number 5: failed

01:35:18 2012-09-26: Download attempt number 6: failed

01:35:21 2012-09-26: Download attempt number 7: failed

01:35:30 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 02:35:00 2012-09-26

02:35:00 2012-09-26: Download attempt number 1: failed

02:35:03 2012-09-26: Download attempt number 2: failed

02:35:07 2012-09-26: Download attempt number 3: failed

02:35:10 2012-09-26: Download attempt number 4: failed

02:35:13 2012-09-26: Download attempt number 5: failed

02:35:17 2012-09-26: Download attempt number 6: failed

02:35:20 2012-09-26: Download attempt number 7: failed

02:35:24 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 03:35:00 2012-09-26

03:35:00 2012-09-26: Download attempt number 1: failed

03:35:04 2012-09-26: Download attempt number 2: failed

03:35:07 2012-09-26: Download attempt number 3: failed

03:35:10 2012-09-26: Download attempt number 4: failed

03:35:14 2012-09-26: Download attempt number 5: failed

03:35:17 2012-09-26: Download attempt number 6: failed

03:35:21 2012-09-26: Download attempt number 7: failed

03:35:30 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 04:35:00 2012-09-26

04:35:00 2012-09-26: Download attempt number 1: failed

04:35:03 2012-09-26: Download attempt number 2: failed

04:35:07 2012-09-26: Download attempt number 3: failed

04:35:10 2012-09-26: Download attempt number 4: failed

04:35:14 2012-09-26: Download attempt number 5: failed

04:35:17 2012-09-26: Download attempt number 6: failed

04:35:21 2012-09-26: Download attempt number 7: failed

04:35:24 2012-09-26: Download attempt number 8: successfull

End.

Starting attempts to download the xml file at 05:35:00 2012-09-26

05:35:00 2012-09-26: Download attempt number 1: failed

05:35:04 2012-09-26: Download attempt number 2: failed

05:35:08 2012-09-26: Download attempt number 3: failed

05:35:11 2012-09-26: Download attempt number 4: failed

05:35:15 2012-09-26: Download attempt number 5: failed

05:35:18 2012-09-26: Download attempt number 6: failed

05:35:22 2012-09-26: Download attempt number 7: failed

05:35:25 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 06:35:00 2012-09-26

06:35:00 2012-09-26: Download attempt number 1: failed

06:35:03 2012-09-26: Download attempt number 2: failed

06:35:07 2012-09-26: Download attempt number 3: failed

06:35:10 2012-09-26: Download attempt number 4: failed

06:35:14 2012-09-26: Download attempt number 5: failed

06:35:17 2012-09-26: Download attempt number 6: failed

06:35:21 2012-09-26: Download attempt number 7: failed

06:35:24 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 07:35:00 2012-09-26

07:35:00 2012-09-26: Download attempt number 1: failed

07:35:04 2012-09-26: Download attempt number 2: failed

07:35:07 2012-09-26: Download attempt number 3: failed

07:35:11 2012-09-26: Download attempt number 4: failed

07:35:14 2012-09-26: Download attempt number 5: failed

07:35:18 2012-09-26: Download attempt number 6: failed

07:35:21 2012-09-26: Download attempt number 7: failed

07:35:24 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 08:35:00 2012-09-26

08:35:00 2012-09-26: Download attempt number 1: failed

08:35:03 2012-09-26: Download attempt number 2: failed

08:35:06 2012-09-26: Download attempt number 3: failed

08:35:10 2012-09-26: Download attempt number 4: failed

08:35:13 2012-09-26: Download attempt number 5: failed

08:35:16 2012-09-26: Download attempt number 6: failed

08:35:20 2012-09-26: Download attempt number 7: failed

08:35:23 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 09:35:00 2012-09-26

09:35:00 2012-09-26: Download attempt number 1: failed

09:35:04 2012-09-26: Download attempt number 2: failed

09:35:07 2012-09-26: Download attempt number 3: successfull

End.

Starting attempts to download the xml file at 10:35:00 2012-09-26

10:35:00 2012-09-26: Download attempt number 1: failed

10:35:03 2012-09-26: Download attempt number 2: failed

10:35:06 2012-09-26: Download attempt number 3: failed

10:35:10 2012-09-26: Download attempt number 4: failed

10:35:13 2012-09-26: Download attempt number 5: failed

10:35:17 2012-09-26: Download attempt number 6: failed

10:35:20 2012-09-26: Download attempt number 7: successfull

End.

Starting attempts to download the xml file at 11:35:00 2012-09-26

11:35:00 2012-09-26: Download attempt number 1: failed

11:35:03 2012-09-26: Download attempt number 2: failed

11:35:07 2012-09-26: Download attempt number 3: successfull

End.

Starting attempts to download the xml file at 12:35:00 2012-09-26

12:35:00 2012-09-26: Download attempt number 1: failed

12:35:04 2012-09-26: Download attempt number 2: failed

12:35:07 2012-09-26: Download attempt number 3: failed

12:35:11 2012-09-26: Download attempt number 4: failed

12:35:14 2012-09-26: Download attempt number 5: failed

12:35:17 2012-09-26: Download attempt number 6: failed

12:35:21 2012-09-26: Download attempt number 7: successfull

End.

Starting attempts to download the xml file at 13:35:00 2012-09-26

13:35:00 2012-09-26: Download attempt number 1: failed

13:35:03 2012-09-26: Download attempt number 2: successfull

End.

Starting attempts to download the xml file at 14:35:00 2012-09-26

14:35:00 2012-09-26: Download attempt number 1: failed

14:35:03 2012-09-26: Download attempt number 2: failed

14:35:07 2012-09-26: Download attempt number 3: failed

14:35:10 2012-09-26: Download attempt number 4: successfull

End.

Starting attempts to download the xml file at 15:35:00 2012-09-26

15:35:00 2012-09-26: Download attempt number 1: failed

15:35:03 2012-09-26: Download attempt number 2: failed

15:35:07 2012-09-26: Download attempt number 3: failed

15:35:10 2012-09-26: Download attempt number 4: failed

15:35:13 2012-09-26: Download attempt number 5: failed

15:35:17 2012-09-26: Download attempt number 6: failed

15:35:20 2012-09-26: Download attempt number 7: failed

15:35:24 2012-09-26: Download attempt number 8: failed

End.

Starting attempts to download the xml file at 16:35:00 2012-09-26

16:35:00 2012-09-26: Download attempt number 1: failed

16:35:03 2012-09-26: Download attempt number 2: failed

16:35:07 2012-09-26: Download attempt number 3: successfull

End. 
```

问题是，有时它会在一些尝试后设法获得完整的文件，而其他时候则完全失败。另外需要注意的是，当 xml 不完整时 curl_exec 不会返回错误。

不幸的是，具有 xml 的服务器不支持范围，所以我不能在文件不完整时恢复文件。我可以增加尝试的限制，比如说 50，但问题是，在失败的尝试中，脚本仍然会下载一些数据，所以对于一个 1MB 的 xml 文件，如果它失败 30 次，每次下载 500KB，它就会下载16 MB 数据用于成功尝试。我想每小时运行一次这个脚本，所以我相信这会损害我服务器的带宽。

为什么 curl 无法下载完整的文件。是否有一些选项可以让它像浏览器一样运行，最终总是获取文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:57:26.103

问题出在您的来源：服务器。

我试着运行你的刮刀，[`scraperwiki`](http://scraperwiki.com)它显示的是：

![第一张截图](../Images/612c8d41d94b165ee35b7d376176ab27.png)

此外，当我个人尝试加载 xml 并且第三次对我有用时，也出现了同样的问题。

您可以在下图中的前两个请求中看到服务器正在关闭连接，而不是第三个（成功的）。

![第二张截图](../Images/3e2eded77d411b553d852bda8acd0cc5.png)

所以，问题出在服务器上，如果它不是你的，你就无能为力。（当然除了把这个带给他们服务器管理员通知！）

注意：我相信 scraperwiki 的互联网连接非常好，因为它被许多人所依赖。因此，您可以放心地将其归咎于[服务器故障](https://serverfault.com/)#jboss

# java - 如何在 Https 服务器中显示 HTTP url？

> ID：12607032
> 
> 赞同：0
> 
> 时间：2012-09-26T17:15:40.827
> 
> 标签：java, ssl, https, rss

我正在使用应用程序在 RSS 中显示 Http 图片 url。但是在 HTTPS 服务器中加载此图像并在 Internet Explorer 中打开显示安全警告时。如何解决这个问题呢？如何使用 java 处理并在 RSS 中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:18:46.357

使用[方案相对 URL](https://stackoverflow.com/questions/3583103/network-path-reference-uri-scheme-relative-urls)。这意味着看起来像这样的 URL：

```
<img src="//example.com/images/foo.jpg"/> 
```

而不是这个：

```
<img src="http://example.com/images/foo.jpg"/> 
```

更多阅读：[在 <script src="http://..."> 中用 // 替换 http:// 是否有效？](https://stackoverflow.com/questions/550038)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:27:28.807

如果图像（或其他内容）托管在同一主机上，最简单的方法是使用[*相对路径*引用或*绝对路径*引用](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)（即`src="path/to/image.png"`或`src="/path/to/image.png`）。

如果图像位于通过 HTTPS（您的用户也可能信任证书）和纯 HTTP（至少对于此资源）提供相同内容的不同主机上，请使用*网络路径（相对）引用*，即从 URI 中省略方案（例如`src="//the.host.name/path/to/image.png"`）。

如果该其他主机不通过 HTTPS 提供此内容，这将变得更加复杂。一种解决方法是通过查询此内容的反向代理自己提供服务。客户端使用的地址将指向您的 HTTPS 服务器，您的服务器将在后面获取内容。执行此操作时，您可能需要考虑以下几点：

*   安全性：您正在通过您的主机有效地提供其他人的内容，但是否应该相信它来自您的主机？也许这应该是一个单独的 HTTPS 主机，而不是您的主 HTTPS 站点。
*   带宽：您的主机将有效地提供所有内容，您可能必须先获取它。
*   法律：这可能会或可能不会被视为托管他人的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:17:06.823

我不知道Java，但你可以这样做：

```
var STRING

IF SSL DETECTED
   STRING = REPLACE HTTP WITH HTTPS

ECHO STRING 
```

在循环内执行此操作。

最好的方法是使用 http 和 https 中的 url 创建两个主要常量，并在您的 url 中使用它们作为前缀，无论是否检测到 SSL。

# java - 如何在应用引擎中安排 cron 作业？

> ID：12607037
> 
> 赞同：1
> 
> 时间：2012-09-26T17:16:02.217
> 
> 标签：java, xml, google-app-engine, cron

我想像这样安排我的 cron 作业

```
every 5 minutes from 6 am to 1 am and every 30 minutes from 1 am to 6 am 
```

如何在 cron.xml 内安排这个`<schedule tag>`以及如何为`<timezone>`印度配置时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:21:19.017

你可以这样说

```
<schedule>every 5 minutes from 10:00 to 14:00</schedule> 
```

在计划标签内。如果您想拥有“和”，那么我认为创建多个 cron 条目。

[https://developers.google.com/appengine/docs/java/config/cron](https://developers.google.com/appengine/docs/java/config/cron)

同样，您可以配置时区：

```
<timezone>India</timezone> 
```

您必须在这里找到具体的值：

[http://en.wikipedia.org/wiki/Time_in_India](http://en.wikipedia.org/wiki/Time_in_India)

[http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones](http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones)

时区应该是标准 zoneinfo 时区名称的名称，如该页所述。

例如，对于多个定时作业，来自文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/recache</url>
    <description>Repopulate the cache every 2 minutes</description>
    <schedule>every 2 minutes</schedule>
  </cron>
  <cron>
    <url>/weeklyreport</url>
    <description>Mail out a weekly report</description>
    <schedule>every monday 08:30</schedule>
    <timezone>America/New_York</timezone>
  </cron>
  <cron>
    <url>/weeklyreport</url>
    <description>Mail out a weekly report</description>
    <schedule>every monday 08:30</schedule>
    <timezone>America/New_York</timezone>
    <target>version-2</target>
  </cron>
</cronentries> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T10:39:50.513

对于印度，您需要使用`Asia/Kolkata`时区，并且要结合这两个时间表，您需要创建 2 个 cron 作业。

它会是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/your-endpoint</url>
    <description>Your task every 5 minutes</description>
    <schedule>every 5 minutes from 06:00 to 01:00</schedule>
    <timezone>Asia/Kolkata</timezone>
  </cron>
  <cron>
    <url>/your-endpoint</url>
    <description>Your task every 30 minutes</description>
    <schedule>every 30 minutes from 01:00 to 06:00</schedule>
    <timezone>Asia/Kolkata</timezone>
  </cron>
</cronentries> 
```

# qt - 如何找出 QML WebView 页面加载失败的原因

> ID：12607039
> 
> 赞同：2
> 
> 时间：2012-09-26T17:16:13.627
> 
> 标签：qt, debugging, qt4, qml, qtwebkit

我尝试使用 QML WebView 打开本地页面（WebOS 应用程序）

```
import QtQuick 1.1
import QtWebKit 1.0
import com.nokia.meego 1.0

Page 
{
    id: mainPage
    Flickable
    {
        id: appFlickable
        anchors.fill: parent
        clip: true

        contentHeight: appView.height
        contentWidth: appView.width

        WebView
        {
            id: appView
            preferredHeight: parent.height
            preferredWidth: parent.width
            url: appUrl
            settings.javascriptCanOpenWindows: true
            settings.javascriptEnabled: true
            settings.autoLoadImages: true
            settings.javascriptCanAccessClipboard: true
            settings.developerExtrasEnabled: true
            onLoadFailed: console.log("load failed")
            onLoadFinished: console.log("load finished")
        }
    }
} 
```

我以这种方式将它加载到 main.cpp 中：

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDeclarativeView view;
    view.rootContext()->setContextProperty("appUrl", argv[1]);
    view.setSource(QUrl("qrc:/qml/main.qml"));
    view.showFullScreen();
    return app.exec();
} 
```

我总是加载失败。有什么办法可以找出问题，启用一些 Web 控制台来告诉我什么是失败的。

谢谢

马尔钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:28:09.240

最有可能`WebView::onLoadFailed`调用网络错误（无法访问或无效的 url 等）。

您可以尝试做的是收听 NetworkAccessManager 的`finished`信号以检查网络回复是否有错误。

```
connect (viewer.engine()->networkAccessManager(), SIGNAL(finished(QNetworkReply*)),
         logger, SLOT(onNetworkRequestFinished(QNetworkReply*))); 
```

`logger`带`onNetworkRequestFinished`插槽的 QObject在哪里。

```
void Logger::onNetworkRequestFinished(QNetworkReply* reply)
{
    if (reply->error() != QNetworkReply::NoError) {
        qDebug() << "network error:" << reply->errorString();
    }
    reply->deleteLater();
} 
```

有关详细信息，请参阅`QNetworkReply` [文档](http://qt-project.org/doc/qnetworkreply.html)。

# c# - 循环选项

> ID：12607041
> 
> 赞同：-1
> 
> 时间：2012-09-26T17:16:25.637
> 
> 标签：c#, list, loops

我有一个 WPF 应用程序，它显示一些数据，并在用户单击它时将其单位从“x”->“y”->“z”->“x”更改。实现这一目标的最佳方法是什么？

ps：我在这里看到了关于循环的问题，使用`foreach`，但只要列表结束，它们就不会回到第一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:22:53.607

您可以通过保持集合以及当前位置来循环遍历集合并返回开始。例如，使用这些值：

```
int currentUnit = 0;
List<string> units = new List<string>() { "x", "y", "z" }; 
```

您可以通过以下方式在“点击”中“循环”：

```
string GetNextUnit()\
{
    if (++currentUnit == units.Count) current = 0;
    return units[currentUnit];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:29:49.967

创建一个`enum`来保存单位。

```
public enum Units
{
    Kms,
    Miles,
    Knots
} 
```

拥有持有当前单位的财产

```
public Units CurrentUnit { get; set; } 
```

然后，当用户单击按钮时，循环遍历单元以获取下一个。

```
if (CurrentUnit == Enum.GetValues(typeof(Unit)).Cast<Unit>().Last())
{
    CurrentUnit = Unit.km;
}
else
{
    CurrentUnit = (Unit) (int) CurrentUnit + 1;
} 
```

可能有一种更好的方法来循环这些值，但我现在想不出一个。不过，这会做到。

# htmlunit - 严重：在 HtmlUnit 中加载简单页面时，从 [http://www.google-analytics.com/ga.js] 加载 JavaScript 时出错

> ID：12607044
> 
> 赞同：1
> 
> 时间：2012-09-26T17:17:00.130
> 
> 标签：htmlunit

使用以下代码在 HtmlUnit 中加载链接：http://pdfcast.org/login

```
 webclient = new WebClient(BrowserVersion.CHROME_16);
    webclient.setJavaScriptEnabled(true);
    webclient.getCookieManager().setCookiesEnabled(true);
    webclient.setThrowExceptionOnScriptError(false);
    webclient.setRefreshHandler(new ThreadedRefreshHandler());
    HtmlPage currentPage = webclient.getPage("http://pdfcast.org/login"); 
```

发生了错误：

```
Sep 26, 2012 10:04:38 PM com.gargoylesoftware.htmlunit.html.HtmlPage loadExternalJavaScriptFile
SEVERE: Error loading JavaScript from [http://www.google-analytics.com/ga.js].
com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException: 504 Gateway Time-out for http://www.google-analytics.com/ga.js
    at com.gargoylesoftware.htmlunit.WebClient.throwFailingHttpStatusCodeExceptionIfNecessary(WebClient.java:542)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadJavaScriptFromUrl(HtmlPage.java:1041)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadExternalJavaScriptFile(HtmlPage.java:981)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.executeScriptIfNeeded(HtmlScript.java:366)
    at com.gargoylesoftware.htmlunit.html.HtmlScript$1.execute(HtmlScript.java:234)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:244)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endElement(HTMLParser.java:607)
    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
    at cyberneko.html.filters.NamespaceBinder.endElement(NamespaceBinder.java:329) 
```

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T12:56:02.617

它适用于 htmlunit 2.13

```
import java.io.IOException;
import java.net.MalformedURLException;

import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.ThreadedRefreshHandler;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class KUKU {

    public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException {
        WebClient webclient = new WebClient(BrowserVersion.CHROME_16);
            webclient.getOptions().setJavaScriptEnabled(true);
            webclient.getCookieManager().setCookiesEnabled(true);
            webclient.getOptions().setThrowExceptionOnScriptError(false);
            webclient.setRefreshHandler(new ThreadedRefreshHandler());
            HtmlPage currentPage = webclient.getPage("http://pdfcast.org/login");
            System.out.println(currentPage.asText());

    }

} 
```

这是输出

> 2013 年 7 月 11 日 14:53:33 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:34 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。2013 年 7 月 11 日 14:53:34 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：“文本/javascript”。2013 年 7 月 11 日 14:53:35 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：“文本/javascript”。2013 年 7 月 11 日 14:53:35 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。2013 年 7 月 11 日 14:53:36 com。gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:36 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:36 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:36 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:37 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。2013 年 7 月 11 日 14:53:37 com.gargoylesoftware.htmlunit。IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'text/javascript'。2013 年 7 月 11 日 14:53:37 com.gargoylesoftware.htmlunit.DefaultCssErrorHandler 错误警告：CSS 错误：'[http://pdfcast-data.appspot.com/css/style_fb_bt_apl_star.min.css?1](http://pdfcast-data.appspot.com/css/style_fb_bt_apl_star.min.css?1) ' [251:69] 表达错误。（无效的令牌“。”。期待以下之一：、、、、、、、、、“-”、“=”、“）”。） 2013 年 7 月 11 日 14:53:37 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。2013 年 7 月 11 日 14:53:38 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。登录和注册 搜索 上传 PDF 常见问题 联系我们 Facebook Connect Google 登录 登录 注册 登录 如果您已经有 PDFCast 帐户，您可以在下方登录。用户名 密码 登录 忘记密码？注册唐' [还没有帐户？](http://pdfcast-data.appspot.com/css/style_fb_bt_apl_star.min.css?1)[通过填写下面的表格立即注册。](http://pdfcast-data.appspot.com/css/style_fb_bt_apl_star.min.css?1)[用户名密码](http://pdfcast-data.appspot.com/css/style_fb_bt_apl_star.min.css?1)
> 重复密码电子邮件
> 
> 输入上面的文字（重新加载图片）
> 
> 注册第 3 方您可以使用您的 Facebook 或 Google 帐户登录。它更容易，更安全。点击下面的标志。
> 
> 浏览 | DMCA 指南 | 使用条款 | 隐私声明 | 联系方式 | Facebook © 版权所有 2013 PDFCast.org
> 
> 0.0255 - 4.11MB

顺便说一句：不推荐使用 BrowserVersion.CHROME_16。改用 BrowserVersion.CHROME

# javascript - CSS3 圆角框和阴影问题

> ID：12607046
> 
> 赞同：0
> 
> 时间：2012-09-26T17:17:13.870
> 
> 标签：javascript, html, css

以下是我的部分 html 代码...

**html代码：**

```
<div class="fotter" >
&nbsp;&nbsp;&nbsp;&nbsp;Copyright&copy;2012                        
<span style=" float:right;">
<strong>Privacy Policy</strong>&nbsp;&nbsp;                
<strong>Contact Us</strong>&nbsp;&nbsp;                
<strong>Edumemn</strong>&nbsp;&nbsp;
</span>
</div> 
```

和

**CSS 代码：**

```
.fotter{
padding:10px 0 5px 0;
margin:0 auto; margin-bottom:10px;
background-image:url(../img/fotter.jpg);
background-repeat:repeat-x;
height:30px; width:1037px;
border:0;
outline:0;
float:left; font-family: Verdana, Geneva, sans-serif; font-size:12px;   
border-bottom-right-radius:5px;
border-bottom-left-radius:5px;
box-shadow: 0px 1px 2px #000;
-webkit-box-shadow: -1px 0px 2px #000;
-moz-box-shadow: 0px 5px 2px #000;
} 
```

这是我的网站链接..http://nerflek.net/PSD TO HTML/

我的问题是.. 在 Firefox 中，它在页脚部分显示带有阴影的圆形框。但是在 Internet Explorer 8 中它不显示任何阴影或圆角框。

有没有人帮我解决这个问题。
提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:18:38.633

原因是[IE8 不支持border-radius](http://caniuse.com/#feat=border-radius)。

对于这个老浏览器来说，一个“解决方案”是用图片做边角，或者更合理的，让不升级的用户有方角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:21:08.367

IE8不支持border-radius，一种方法是使用插件，这个简单有效， [http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:41:44.677

另一种方法是为ie设置一个目标css。

你可以像这样添加它

```
<head>
<link rel="stylesheet" type="text/css" href="normal.css" />
<!--[if lte IE 8]> <link rel="stylesheet" type="text/css" href="ie.css" /> <![endif]-->
</head> 
```

在您的 ie.css 中，您可以将背景添加为图像。

即.css

```
div#samepagecontainer {
..
..
background : #aaa url(/path/to/image.file) no-repeat top left;
..
} 
```

# fixed-point - 将定点转换为实际值（十进制）

> ID：12607051
> 
> 赞同：1
> 
> 时间：2012-09-26T17:17:51.207
> 
> 标签：fixed-point

我的微控制器通过 ASIC IC 提供定点格式 Q24（24 位）的原始数据。

我需要转换为十进制

```
Actual value = raw_data*LSB 
```

在哪里

```
LSB = 150/[( (2^24) - 1 )*0.6 ] = 150/10066329 = 1.49011E-5 
```

范围原始数据是 `0 ~ 10066329`

我想将实际值计算为 uint 32bit，并将精度保持在小数点后 2 或 3 位。

例如，如果满量程原始数据是`10066329`，精确到小数点后 2 位的实际值将是`15000`或 小数点后 3 位`150000`。

我发现这样做的方法是 - 比例因子（但需要降低原始数据精度以防止数据在 32 位中不溢出） - 浮点（使 MCU 没有效率）

我应该选择什么选项？

我也在[这里发过](http://arduino.cc/forum/index.php/topic,124520.0.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:59:42.467

您可以通过使用中间 64 位值来保持全精度并仍然避免浮点：

```
// raw
unsigned int raw = 10066329;

// conversion
unsigned int actual_a = ((raw >> 6u) * (150000 >> 4u) / 10066329) << 10u;
unsigned int actual_b = (raw * (long long) 150000) / 10066329;

double actual_ref = raw * 150000.0 / 10066329.0;
printf("%.0f\n%u\n%u\n", actual_ref, actual_a, actual_b); 
```

上面的示例给出了以下输出（所有 32 位值）：

```
150000    // True value for reference
149504    // Value converted using 32 bit
150000    // Value converted using 64 bit 
```

当您必须截断原始数据的最低有效位时，您可能会丢失一些精度（这可能完全可以接受，具体取决于您的应用程序）。但是，如果您使用 64 位，则不需要截断。

# java - 跨越 tomcat 和 django

> ID：12607053
> 
> 赞同：0
> 
> 时间：2012-09-26T17:17:56.293
> 
> 标签：java, python, django, tomcat

我正在开发一个最初使用 jsp、tomcat、jersey 和 eclipselink 编写的 webapp 项目。我认为我们应该将项目移向 django。其中有一个组件需要几乎完全重写。如果我可以使用 python 和 django 的数据库模型重写该部分，但它仍然被现有的 java 代码库调用，那就太好了。

谁能提出一个合理的方法来做到这一点？这种混合系统是个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:28:17.130

这听起来像是一个可怕的、可怕的想法，但同时又病态地引人入胜。反正...

[“在 Jython 上运行 Django”](https://docs.djangoproject.com/en/dev/howto/jython/)

[“在 Java 应用程序中使用 Jython”](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)

请随时通知我们您的进度。

# java - 如何使用 Java 将 HTML 页面转换为 PDF 文档？

> ID：12607056
> 
> 赞同：0
> 
> 时间：2012-09-26T17:18:01.940
> 
> 标签：java, pdf, web

我有一个 Web 应用程序（用 Java 构建）。

用户填写一堆字段，一些东西是动态组装的，只读的表单呈现给用户，然后用户点击“批准”，如果他们对一切都没有问题。

在“批准”单击时，我需要构建 HTML 页面的 PDF 版本并将 PDF 存储在数据库中以便安全保存。

我做了一些挖掘，但没有找到我需要的东西。制作我的 HTML 页面的 PDF 版本的*简单*开源方法是什么？

我找到了 iText，但它需要商业许可证（不幸的是，这是一个阻碍）。非常感谢任何其他建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:32:07.323

使用[Apache™ FOP（格式化对象处理器）](http://xmlgraphics.apache.org/fop/) - 最先进的 java。常见问题解答：[我可以使用 FOP 将 XHTML 或 HTML 文件转换为 PDF 吗？](http://xmlgraphics.apache.org/fop/faq.html#xhtml-to-pdf). 但这不是一个很容易的方法，对不起。

# php - 开始编写我的第一个 php 游戏应用程序

> ID：12607058
> 
> 赞同：-2
> 
> 时间：2012-09-26T17:18:14.500
> 
> 标签：php

您好，我是开发应用程序的新手。我和我的朋友 Web 应用程序一起工作过，现在我想构建自己的 Web 应用程序，所以我想知道我必须使用什么开发软件。我将首先从什么开始等等。

我应该从 php 还是 css 还是 js 开始？

我大部分时间都使用**记事本+来编写我的代码。**我不熟悉其他软件。并在网上使用了一些时间：`http://jsfiddle.net/`

好吧，如果你们能提供一些关于开发软件的好信息，这将对我未来有很大帮助。

```
Want to know best php writing software  

Want to know best js writing software 

Want to know best css writing software 
```

我知道萤火虫最适合调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:23:03.470

我一直是一名专业的网络开发人员（html/css/javascript/php）。我强烈推荐你 Netbeans IDE 7.2。这是一个很棒的 ide，拥有您可能正在寻找的一切。代码高亮、语法着色、自动完成、调试功能、多种编程语言、sql 管理器、Web 服务管理器、与 svn 和 git 集成等。它将允许您编辑所有文件（html、css、javascript、php、 sql) 在同一个地方。

而且它是免费的！

# c# - 无法使用 XNA 3.1 或 3.0 创建 AudioEngine

> ID：12607063
> 
> 赞同：2
> 
> 时间：2012-09-26T17:18:24.383
> 
> 标签：c#, xna, xna-3.0

**编辑：我解决了我的问题。**

我似乎和这个和这个有[同样](https://stackoverflow.com/questions/10307898/xna-4-0-cannot-create-an-audioengine)的[问题](https://stackoverflow.com/questions/8389044/creating-xna-audioengine-on-windows-game-project)。除了我可以使用 XNA3.0 或 3.1，但它们都没有 Microsoft.Xna.Framework.Xact.dll 而是有 Microsoft.Xna.Framework 和 Microsoft.Xna.Framework.Game 。

我正在 Microsoft 表面表上编程，我从使用 XNA 2.0 的示例中复制了代码。我可以很好地运行示例代码，但我找不到它正在使用的参考。

我对 Microsoft.Xna.Framework 和 Microsoft.Xna.Framework.Game 都有引用，并且在我拥有的代码中

```
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework; 
```

我的代码在尝试创建新的 AudioEngine 时中断：（因为如果我将其注释掉，程序就会运行）

```
string filename = System.Windows.Forms.Application.ExecutablePath;
string path = System.IO.Path.GetDirectoryName(filename) + "\\Audio\\";

try
{
audioEngine = new AudioEngine(path + "PianoSounds.xgs");
waveBank = new WaveBank(audioEngine, path + "PianoSounds.xwb");
soundBank = new SoundBank(audioEngine, path + "PianoSounds.xsb");
} 
```

我得到的错误不是很有帮助：

```
Cannot create instance of 'SurfaceWindow1' defined in assembly 'CoffeeTable1, Version=1.0.4652.32991, Culture=neutral, PublicKeyToken=null'. Exception has been thrown by the target of an invocation.  Error in markup file 'CoffeeTable1;component/SurfaceWindow1.xaml' Line 1 Position 18. 
```

这是尝试初始化的 xaml 文件 SurfaceWindow1.xaml：

```
<s:SurfaceWindow x:Class="CoffeeTable1.SurfaceWindow1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="http://schemas.microsoft.com/surface/2008"
    Title="CoffeeTable1"
    >
  <s:SurfaceWindow.Resources>
    <ImageBrush x:Key="WindowBackground" Stretch="None" Opacity="0.6" ImageSource="pack://application:,,,/Resources/WindowBackground.jpg"/>
  </s:SurfaceWindow.Resources>

  <Grid Background="{StaticResource WindowBackground}" >
        <s:SurfaceButton Content="A" ContactEnter="StartSound" Margin="50,50,0,0" Height="100" Width="100" HorizontalAlignment="Left" VerticalAlignment="Top" Name="A6" ClickMode="Hover" />
    </Grid>
</s:SurfaceWindow> 
```

# javascript - Node.Select() 在 RadTreeView 中触发 Node_Click() 事件？

> ID：12607064
> 
> 赞同：1
> 
> 时间：2012-09-26T17:18:27.353
> 
> 标签：javascript, asp.net

每次当您尝试从 javascript 调用 Node.select() 时，它都会调用 aspx.cs 事件，即 Node_Click() 如果您想创建两个函数，这会在代码分离方面造成很多麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:18:27.353

我花了 5 个小时才试图找出解决该问题的方法，因为每次我尝试使用以下代码设置从 javascript 端选择的节点时：

```
var nodes=$find("<%= RadTreeView1.ClientID %>").get_allNodes();
var node1=nodes[0];
node1.Select(); 
```

//这里它还调用 Server 事件，它是 aspx.cs 页面中的 Node_Click() 事件，

所以经过很长时间的努力，我发现如果你想在 javascript 中选择一个节点而不触发事件，请使用以下函数：

```
node1.set_selected(true); 
```

我希望我能让你们受益，因为我不希望你们花几个小时来找出这个问题。

祝你好运

# html - 如何使 a:hover 也控制 img 背景？

> ID：12607066
> 
> 赞同：0
> 
> 时间：2012-09-26T17:18:30.783
> 
> 标签：html, css, hover, background-color

我想我今天需要一个更聪明的前端编码忍者的帮助。

所以现在我的标题中有一些社交媒体图标，在滚动时我希望图标的 img 背景颜色和文本颜色一样改变。

现在，如果我翻转图标图像，我设置 li 的方式（图标背景和文本颜色）都会改变，但是当我只翻转文本时不会发生这种情况。当我只滚动文本链接时，只有文本颜色发生变化，而不是图标背景。

你可以在这里看到这个：http: [//s433108212.onlinehome.us/](http://s433108212.onlinehome.us/)

**当前的 HTML：**

```
<div id="social_media">
    <ul id="social_icons">
        <li class="mail_chimp"><script type="text/javascript" language="JavaScript" src="http://athenasweb.us5.list-manage.com/subscriber-count?b=37&amp;u=d789790b-2a29-4119-8a43-0d71267eb0d7&amp;id=bc095e8eb4"></script></li>
        <a href="#" title="Subscribe to our Newsletter"><li class="social_li ico_newsletter"><p class="float-left">Get Email Newsletter</p><img src="http://s433108212.onlinehome.us/img/ico_newsletter.png" alt="Newsletter"/></a></li>
        <a href="http://facebook.com/athenasweb" title="Like our Facebook Page"><li class="social_li ico_facebook"><p class="float-left">Our Facebook Page</p><img src="http://s433108212.onlinehome.us/img/ico_facebook.png" alt="Facebook"/></a></li>
        <a href="http://twitter.com/athenas_web" title="Follow on Twitter"><li class="social_li ico_twitter"><p class="float-left">Follow us on Twitter</p><img src="http://s433108212.onlinehome.us/img/ico_twitter.png" alt="Twitter"/></a></li>
        <!-- <li><p>RSS Feed</p><img src="img/icon_rss.png" alt="RSS"/></li> -->
    </ul>
</div><!-- social_media --> 
```

当前的 CSS：

```
.social_li { list-style-type:none; font-family: 'Raleway', sans-serif; line-height:     32px; font-size: 16px; font-weight: 700; cursor: pointer; }
.social_li a { color:#4098db; }
.social_li a:hover { color:#fff; }
.social_li p { float: right; text-align: left; }

.ico_newsletter img, .ico_facebook img, .ico_twitter img {
    border-radius: 50%;
    width: 35px;
    height: 35px;
    background: #cc0033;
    background-position:top center;
}
.ico_newsletter img {
    background: #cc0033;
}
.ico_facebook img {
    background: #064771;
}
.ico_twitter img {
    background: #00aced;
}
.social_li img:hover { 
    background: #666;
} 
```

现在我想我需要更新这一行：

```
.social_li a:hover { color:#fff; } 
```

我试过了：

```
.social_li a:hover { color:#fff; background:#666; } 
```

然而，当我只滚动文本时，产生了这个结果： ![在此处输入图像描述](../Images/7de97ab001e76fae9246d31f0867ce73.png)

我相信那是因为我不能让 a:hover 控制特定的 img 背景。

有没有其他人尝试过这个？想法？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:49:27.547

您应该在这里使用的方法是[sprite sheet](http://css-tricks.com/css-sprites/)。

例如; 在我的网站上，页脚中有一些社交图标，它们都是由这张图片组成的：

![在此处输入图像描述](../Images/5830b9a5aa73fb16b5b47df6a8f5117c.png)

我在这里所做的是将顶行设置为包含标准图像，将底行设置为包含翻转状态。

要更改文本颜色和图像，您可以首先为图像（将是背景图像）和文本创建容器：

```
<a href="#facebook" class="social fb">
    <div></div>
    Facebook
</a> 
```

然后是一些CSS：

```
a.social
{
    text-decoration: none;
    color: #000;
    display: inline-block;
}

a.social:hover
{
    color: #F00;
}

a.social > div
{
    height: 20px;
    background: url(http://martywallace.com/view/textures/sprite/social.png) no-repeat;
}

a.social.fb > div
{
    background-position: -15px 0;
}

/* Notice here how we target the child div of the a element being hovered over. */
a.social.fb:hover > div
{
    /* We change the background-position to sample a new portion of the sprite. */
    background-position: -15px -20px;
} 
```

我在这个[JSFiddle (http://jsfiddle.net/gd4ha/)](http://jsfiddle.net/gd4ha/)上创建了一个包含两个社交图标的完整示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:25:20.533

看看[这里](https://stackoverflow.com/questions/8614423/how-to-change-one-element-while-hovering-over-another)的前两个答案。

基本上，jQuery 可能是您的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:28:52.747

您的问题是代码中的文本比图像低级，因此虽然应用于图像的更改也会影响文本，但反之则不然。您是否尝试过使用 Javascript 在文本的鼠标悬停操作时更改图像？

```
document.getElementByClassName("your-classname-here").setAttribute("class","new-classname-here"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:54:01.520

虽然图像和其中的文本对您来说显然只是一个元素（一个按钮），但从 CSS 的角度来看（取决于它的编码方式），它们通常看起来是两个独立的元素。

'a:hover' 是 'a' 的一个特例，仅适用于 'anchor' (<a ...) 语句。你还有一个'image' (<img ...) 语句，所以也需要'img:hover'。（你知道它们是相关的，但 CSS 没有。:-)

您还将属性名称拼错为“背景”，而它应该是“背景颜色”。

因此，要完全在 CSS 中执行此操作，您可能需要一些带有两个单独语句的笨拙代码，例如：
.social_li a:hover { color:#fff; }
.social_li img:hover { 背景颜色:#666; }

无论如何，默认情况下，图像会指定*每个*像素，并且不会显示任何颜色。（另一种思考方式是 CSS 不知道您认为图像的哪些部分是“背景”。）您可能需要获得“半透明”（每隔一个像素显示）或“透明”（每个像素显示通过在选定的区域）图像。

或者，也许您会使用完全不同的方法做得更好：也许正如另一个响应中指出的那样，通过 Javascript 将“向上”和“向下”图像分开，或者仅突出显示按钮周围的*边框*，使其内部保持不变，或者更改颜色只有文本，或者可能是覆盖在每个按钮顶部的半透明稀松布，您可以着色，或者......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:36:46.953

我会将图标背景颜色作为图标本身的一部分。有 2 个版本的图标，一个带有标准背景颜色，一个带有灰色背景。然后在列表项上制作图标背景图像，并在列表项悬停时简单地交换背景图像。改变了这段代码的整个方法，但我认为它会更好。

# powershell - 使用 PowerShell 单击超链接

> ID：12607069
> 
> 赞同：0
> 
> 时间：2012-09-26T17:18:39.383
> 
> 标签：powershell, hyperlink

我正在尝试自动化我们的目录同步过程。基本上我需要登录站点，搜索用户，然后单击编辑以更改三个设置，但由于某种原因我无法让 PowerShell 单击编辑。`<a href="/User/Details`或者`><a href="/User/Edit/`永远不会改变，但其余的会根据用户而改变。

```
 <td>domain.com.com/OU/lastname, firstname</td>
    <td>username</td>
    <td>firstname</td>
    <td></td>
    <td>Pinar</td>
    <td></td>
    <td>00334764</td>
    <td>8/1/2012 5:53:45 PM</td>
    <td><a href="/User/Details/sajskjdf-ajsjkf-asddd">Details</a></td>
    <td><a href="/User/Edit/sajskjdf-ajsjkf-asddd">Edit</a></td>
</tr> 
```

到目前为止，这是我的代码：

```
#login to site
$url = "https://website"
$username = 'username'
$password = read-host "password"
$ie = New-Object -com internetexplorer.application;
$ie.visible = $true;
$ie.navigate($url);

while ($ie.Busy -eq $true)
{
    Start-Sleep -Milliseconds 100;
}

$ie.Document.getElementById("username").value = $username
$ie.Document.getElementById("Password").value = $password
$go = $ie.Document.getElementsByTagName(‘button’) | where-object {$_.type -eq ‘submit’}
$go.click()

while($ie.Busy) {Start-Sleep 1}

# Enter the username you want to edit
$logonname=read-host "logonname"
$ie.Document.getElementById("query").value = $logonname
$go2 = $ie.Document.getElementsByTagName(‘button’) | where-object {$_.type -eq ‘submit’}
$go2.click()

while($ie.Busy) {Start-Sleep 1}

# I can't make this part work :(
$go3 = $ie.Document.getElementsByTagName(‘A’)
$yt = $go3 | where-object {$_.innerText -eq '/Edit/User/'}
$yt.click() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:38:42.787

这是单击特定链接的示例：

```
$ie = New-Object -ComObject InternetExplorer.Application
$ie.visible=$true
$ie.navigate2('http://google.com/')
while($ie.Busy) {Start-Sleep 1}
$links = $ie.Document.getElementsByTagName('A')
$yt = $links | where {$_.innerText -eq 'YouTube'}
$yt.click() 
```

# javascript - 跨域问题试图从 iframe 内部调用一个 js 函数到它的父级

> ID：12607072
> 
> 赞同：1
> 
> 时间：2012-09-26T17:18:46.167
> 
> 标签：javascript, cross-domain

大家好，我有跨域的问题。

我有 1 台服务器（example.com），其中有：

index.html 作为主页，indexIFrame.html 作为 index.xhtml 中的框架

Index.html 从静态服务器加载大量 javascript 文件（例如 staticServer:8090/myScript.js）

indexIFrame.html 还从另一个静态服务器（anotherServer:8070/myOtherScript.js）加载它自己的 javascript 文件

所以在 myOtherScript.js 我这样做：

```
parent.MyMainClass.showPopup(); 
```

MyMainClass 类在 staticServer 的 js 文件中声明（此文件可用于 index.xhtml）

当我运行代码时，我得到：

```
Unsafe JavaScript attempt to access frame with URL http://example:8080/myapp/myList.xhtml from frame with URL http://example:8080/myapp/myListIFrame.xhtml Domains, protocols and ports must match. 
```

myList 和 myListIframe 它们位于同一服务器中，只是 javascript 资源位于不同的域中。

所以我不确定如何使这项工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:31:03.797

现代浏览器根本不允许这样做。首选技术是改用[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

...但是你会发现，像往常一样，IE 是在它自己的小世界里，不支持那个标准。我知道有一些框架可以提供跨浏览器解决方案，但我不能特别推荐其中任何一个。

这是一个跨浏览器监听器：

```
if (typeof(window.postMessage) != 'undefined') {
    if (typeof(window.addEventListener) != 'undefined') {
        window.addEventListener("message", function(event) {
            doSomething(event.data);
        }, false);
    } else {
        window.attachEvent('onmessage', function(e) {
            doSomething(e.data);
        });
    }
}​ 
```

...和一个发件人...

```
if (typeof(window.postMessage) != 'undefined') {
    //modern browsers...
    window.top.postMessage('my data', '*');
} else {
    //older browsers - just access window.top
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:39:05.380

尝试在服务器上创建一些别名。

比如：`http://example:8080/myapp/myScript.js`导致`staticServer:8090/myScript.js`等等。

这可能会欺骗 javascript，因为它应该认为这些 JS 文件确实在您的服务器上。

# ios - UINavigationBar 的顶角在 iOS6 中被四舍五入

> ID：12607073
> 
> 赞同：2
> 
> 时间：2012-09-26T17:18:47.590
> 
> 标签：ios, uinavigationbar, ios6

我有一个带有自定义背景的 UINavigation 栏，我在代码的 viewDidLoad 方法中这样设置：

```
UIImage *image = [UIImage imageNamed:@"V2_navbar"];
[self.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

在 iOS 5 中，结果如下所示：

![在此处输入图像描述](../Images/fcd0bf491a3afc18d142a6078b50ee51.png)

在 iOS 6 中，结果如下所示：

![在此处输入图像描述](../Images/b7bb8c1b781d3b527d4078c3dfedc7cc.png)

一方面，状态栏现在是黑色的，这没关系。但是，如果您仔细查看第二张图片，您会注意到我的导航栏的顶角现在被四舍五入，这看起来很糟糕。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:15:41.757

基于快速实验...

作为一种解决方法，只需在项目设置中将状态栏样式设置为黑色半透明即可。这样做的最终效果是，您`UIWindow`将获得整个屏幕，包括状态栏后面的区域——在 3.5 英寸设备上，您的窗口将是 480pts 而不是 460。但是，除非您的视图控制器设置`wantsFullScreenLayout`为`YES`您，否则您不会期望绘制它区域，它看起来与黑色不透明相同。

如果您的代码在某处以编程方式设置状态栏样式，您可能希望禁用它。

编辑：回答 Matt.Z 的担忧... Apple 添加了圆角，因为那里的设计师有时喜欢屏幕边缘的圆角。最初的 1984 年 Macintosh 桌面在所有四个角落都有它们，并且它们一直存在到 OS 9，OS X 最初将它们保留在两个顶部角落，但后来它们在 10.5 中消失了。

在这种情况下，他们似乎采取了另一种方式，决定在 iOS 5 和 6 之间的“显示器边缘”添加圆角。因此，Apple 纯粹出于审美原因添加了圆角。

通过设置您将应用程序能够用作全屏的区域扩展到状态栏下方，因此“显示边缘”不再是导航栏的顶部`wantsFullScreenLayout`。`YES`由于 Apple 不想通过从显示区域的中间切出大块来破坏应用程序，因此 iOS 不会添加角落。

# automation - 具有主从架构的作业调度工具

> ID：12607074
> 
> 赞同：2
> 
> 时间：2012-09-26T17:18:50.537
> 
> 标签：automation, continuous-integration, master-slave

我正在寻找一种在用户通过 UI/CLI 提交作业时将执行作业的工具。执行也可以发生在从节点中。如果所有从节点都忙，则主节点应自动部署从节点并执行作业。我已经尝试过 Jenkins、Hudson、Puppet、Chef、Quartz。但他们中的任何一个都缺乏我正在寻找的东西。

有没有可以满足需求的开源工具？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:44:54.737

如果您提供的列表不符合您的要求和期望，那么是时候采用更灵活、可配置和开放的系统了

试用 zookeeper 一个必备的调度、同步和维护分布式系统的工具 [http://zookeeper.apache.org/](http://zookeeper.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:36:36.003

如果您只运行少数进程/作业，则[JAMS 作业调度程序有一个免费的社区版。](http://www.jamsscheduler.com/DownloadCommEdition.aspx)

# struts2 - Struts2 .action 扩展导致 CSS、JavaScript 和 Struts Dojo 崩溃

> ID：12607075
> 
> 赞同：10
> 
> 时间：2012-09-26T17:19:01.003
> 
> 标签：struts2, dojo, jsp-tags, struts-config, action-mapping

我们已经在 Struts 2.1.8 上运行了一段时间，所有的 Struts 动作都按预期工作，即 Struts 动作的 href 以没有扩展名的动作名称呈现。

这是设置链接的 JSP 代码：

```
<ul id="top_menu">
  <li id="itemHome" class="active"><s:a action="viewHome">Home</s:a></li>
  <li><s:a action="viewSearch">Search</s:a></li>
  <li><s:a action="viewBookMarks">My Bookmarks</s:a></li>
  <li><s:a action="viewSupport">Support</s:a></li>
</ul> 
```

在 2.1.8 下正确呈现到`http://localhost/viewHome`、`http://localhost/viewSearch`等的链接

我们刚刚升级到 Struts 2.2.1（检查了从该版本到 v2.3.4.1 的所有版本），现在看到 Struts 操作链接呈现为`http://localhost/viewHome.action`、`http://localhost/viewSearch.action`等。

我的研究表明，一般建议的解决方案是使用

```
<constant name="struts.action.extension" value=""/> 
```

在 struts.xml 中删除 .action 后缀。虽然这会使 URL 正确呈现，但它会导致意外的副作用。Struts 现在认为每个 URL 都是一个动作，包括对 .css、.png 等的请求。

我在 web.xml 中的过滤器映射没有改变。尽管它向 Struts 发送 /*，但我们在 2.1.8 下没有看到这种行为

```
<filter>
   <filter-name>struts2</filter-name>
   <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>   
</filter>

<filter-mapping>
   <filter-name>struts2</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

为了解决这个问题，我不得不使用*excludePattern*来阻止 Struts 尝试将这些请求视为操作。

```
<constant name="struts.action.excludePattern" value="/index.html,/images/.*,/js/.*,/css/.*"/> 
```

虽然这可行，但最后一个障碍是我的日志中充满了来自 Struts 标记请求的错误，这些请求被作为 Struts 操作处理。当我将这些 URI 添加到排除模式时，Struts Dojo 标记在某些页面中似乎不起作用。

受影响的 struts.xml 部分是：

```
<constant name="struts.devMode" value="true" />
<!-- Set URL's to have no .action extension -->
<constant name="struts.action.extension" value=""/>
<constant name="struts.action.excludePattern" value="/index.html,/images/.*,/js/.*,/css/.*"/> 
```

日志中的 Struts 错误示例如下：

```
2012-09-26 17:12:57,984 [http-bio-8080-exec-9] ERROR org.apache.struts2.dispatcher.Dispatcher- Could not find action or result
/struts/dojo/struts_dojo.js
There is no Action mapped for namespace [/] and action name [struts_dojo.js] associated with context path []. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

我不确定struts Dojo 请求是真实的URI 还是虚拟的或其他。

感觉在这一点上，我已经跳过了很多圈来解决从 URL 中删除 .action 扩展名的简单问题，因为回到 2.1.8 JAR 解决了所有问题，但我决心找到如果可能的话，前进的道路。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T21:00:09.710

尝试像这样使用带有逗号的 struts 动作扩展
`<constant name="struts.action.extension" value=","/>`。
从 struts2 属性文件：

> 由 DefaultActionMapper 使用 您可以提供一个逗号分隔的列表，例如 struts.action.extension=action,jnlp,do 空白扩展名允许您匹配目录列表以及纯操作名称，而不会干扰静态资源，可以指定为逗号前的空字符串，例如 struts.action.extension=, 或 struts.action.extension=x,y,z,, struts.action.extension=action,,

# javascript - 如何在ajaxvalidation函数中定位函数

> ID：12607080
> 
> 赞同：0
> 
> 时间：2012-09-26T17:19:32.383
> 
> 标签：javascript, ajax, function

如何定位窗口警报和两个功能

功能：“saveEdit”和设置“setInterval”

在我的 ajax 验证引擎中？

```
 <script>
    $(document).ready(function() {
        // SUCCESS AJAX CALL, replace "success: false," by:     success : function() { callSuccessFunction() }, 
        $("#form1").validationEngine({
            ajaxSubmit: true,
                ajaxSubmitFile: "note/note.php",

                window.alert("Report Sent!");
                function saveEdits() {//write a confirmation to the user
                document.getElementById("update").innerHTML="Report Sent!";

                setInterval(function(){document.getElementById("update").innerHTML="";},3000);
                }

        })
    });
    </script> 
```

我不知道如何正确定位它，当我尝试将其放入内部时，它总是将验证引擎设置为错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:43:36.453

我想你正在使用[这个插件](https://github.com/posabsolute/jQuery-Validation-Engine)，但选项似乎不同，所以也许你使用的是旧版本。

无论如何，您将一个对象传递给`validationEngine`-function，但您只是通过简单地将函数定义、警报调用等放入其中来破坏语法。

代码注释中提到的“成功”函数必须定义为您作为参数传递给函数的对象的属性。

所以，这应该看起来更像这样：

```
$(document).ready(function() {
        // SUCCESS AJAX CALL, replace "success: false," by:     success : function() { callSuccessFunction() }, 
        $("#form1").validationEngine({
            ajaxSubmit: true,
            ajaxSubmitFile: "note/note.php",
            success: function(){
                window.alert("Report Sent!");

                //write a confirmation to the user
                document.getElementById("update").innerHTML="Report Sent!";

                setTimeout(function(){
                   document.getElementById("update").innerHTML="";
                },3000);

            }
        });
}); 
```

-`success`属性带有一个匿名函数，插件将在验证成功后作为“回调”函数执行该函数。

而且我将您更改`setInterval`为 a`setTimeout`因为我认为没有理由再次清除所有 3 秒内已经为空的元素的内容。

如上所述，属性名称不是我链接的插件的正确名称，如果那是您实际使用的那个。如果是这样，请检查[文档](http://posabsolute.github.com/jQuery-Validation-Engine/)，但脚本中的主要问题是对象语法错误。

# html - 如果背景是渐变的，如何将边框颜色更改为背景颜色？

> ID：12607082
> 
> 赞同：0
> 
> 时间：2012-09-26T17:19:35.577
> 
> 标签：html, css

我想将活动菜单项的底部边框更改为网站背景颜色，使其看起来像一个打开的选项卡，但我的背景是渐变的，因此它在网站的不同部分具有不同的颜色。我怎么做。我无法将其更改为无，因为我在需要覆盖的整个菜单下方有另一个边框。这是我的网站的链接 [http://woodworkingoc.com.hostasp.info/](http://woodworkingoc.com.hostasp.info/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:41:07.330

我检查了你的`.CSS`文件。

因为`nav > ul li.current`你有`background`FF、IE 和 Chrome 前缀的属性。但是这个属性有问题，所以 Chrome 和 FF 在 web 检查器中隐藏了这个属性，而不是将它应用于元素。如果正确写入属性，渐变将应用于`li`元素并覆盖`<div id="layout-navigation" class="group">`.

使用渐变生成器（如[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)）创建正确的渐变规则。例如：

```
nav > ul li.current {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #B9BDBF), color-stop(100%, #5C5E5F)) fixed;
} 
```

# android - onActivityResult 在调用设置时总是返回 0 (RESULT_CANCELED)

> ID：12607085
> 
> 赞同：8
> 
> 时间：2012-09-26T17:19:57.790
> 
> 标签：android, android-activity

我可能以错误的方式解决问题..

我正在做的是在没有互联网连接时显示警报消息，并且“确定”按钮将用户引导至 wifi 设置以打开互联网。当用户在更改（或不更改）互联网设置后返回它时，我希望应用程序执行的操作是重新加载应用程序或活动所在的位置。

为此，我正在对“确定”按钮进行以下调用：

```
 static void startAct(Activity ctxt)
{
    ctxt.startActivityForResult(new Intent(android.provider.Settings.ACTION_SETTINGS), WIFI_SETTINGS);

} 
```

在显示此消息的活动类上，我有以下内容：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
     if (requestCode == WIFI_SETTINGS && resultCode == RESULT_OK) 
     {
         this.finish();

         Intent myIntent = new Intent(this, MyActivity.class);
         startActivity(myIntent);
     }
} 
```

但 resultCode 始终为 0，onActivityResult 在按下“确定”按钮后立即被调用。

我应该以不同的方式处理这个问题吗？当用户从 wifi 设置返回时，如何重新加载/刷新我的应用程序？

我检查了类似的答案，但他们似乎在同一个应用程序中使用了一个活动，所以他们可以打电话`set_result(...)`，但我不能在这里这样做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:22:30.473

正如其他人所说，您不应该调用完成 - 调用`startActivityForResult`也没有那么有用。即使`resultCode`不是 0，通常也需要几秒钟才能连接到 WiFi。

因此，要回答您的问题，您应该使用 a`BroadcastReceiver`并监听网络更改意图。

这段代码有点旧，但这是我在我的一个应用程序中做的类似的事情。希望它可以帮助您入门。

```
protected void registerWifiReceivers()
{   
    IntentFilter f1 = new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION);
    IntentFilter f2 = new IntentFilter(WifiManager.NETWORK_STATE_CHANGED_ACTION;
    this.registerReceiver(mReceiver, f1);
    this.registerReceiver(mReceiver, f2);       
}

final BroadcastReceiver mReceiver = new BroadcastReceiver() 
{       
    @Override
    public void onReceive(Context context, Intent intent) 
    {   
      String action = intent.getAction();        
      Log.d ( TAG, "BroadcastReceiver: " + action );

      if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION))
      {
         Log.i ( TAG, "handling event: WifiManager.NETWORK_STATE_CHANGED_ACTION action: "+action );
         handleWifiStateChange(intent);
      }
      else if (WifiManager.WIFI_STATE_CHANGED_ACTION.equals(action)) 
      {   
         Log.i ( TAG, "ignoring event: WifiManager.WIFI_STATE_CHANGED_ACTION action: "+action );
      } 
    }
}

protected void handleWifiStateChange ( Intent intent )
{   
    NetworkInfo info = (NetworkInfo)intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);      
    if (info.getState().equals(NetworkInfo.State.CONNECTED))
    {
        //do something...
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:11:47.210

请不要使用

```
 this.finish(); 
```

这将完全关闭您的活动。当您使用 startActivityForResult() 方法时，您应该在 onActivityResult() 方法之后使用 this.finish。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:39:46.117

不要创建新的意图。就这样做——

```
finish();
startActivity(getIntent()); 
```

# c - 如何计算输入流中的单词和行数？

> ID：12607086
> 
> 赞同：0
> 
> 时间：2012-09-26T17:20:07.090
> 
> 标签：c, stream, counting

我是 C 编程的新手，目前正在尝试自学如何创建一个 C 程序，该程序可以计算输入流中的单词和行数并将两个总数打印到标准输出。

我要做的是让程序计算行数并计算输入流中的单词数。我想让程序包含单词，但不包括空格、制表符、换行符、连字符或冒号。让程序以小数形式输出结果（单词和行）。

```
#include<stdio.h>

int main()
{
int iochar;
int words;
int lines;

printf("Enter something here:\n\n");

while ((iochar = getchar ()) !=EOF)
    {
    if((iochar == ' ') || (iochar == '\t') || (iochar == '\n'))

    putchar(iochar);
    }

return 0;
} 
```

我想让程序输出它在标准输出中计数的单词和行的值的十进制。这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:28:50.990

`lines`当读取值为 时，您必须增加 的值`\n`。要计算字数，您可以查看这些[解决方案](https://stackoverflow.com/questions/3837800/what-is-the-fastest-way-to-count-lines-and-words-in-a-text-file-in-ansi-c)。

您还可以使用`wc`程序（UNIX）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:29:02.473

尝试使用`switch`语句而不是`if`，并添加一些计数逻辑：

```
int wordLen = 0;
while (...) {
    switch(iochar) {
    case '\n':
        lines++; // no "break" here is intentional
    case '\t':
    case ' ':
        words += (wordLen != 0);
        wordLen = 0;
        break;
    default:
        wordLen++;
        break;
    }
}
if (wordLen) words++; 
```

有一个 K&R 章节详细介绍了这个练习，请参阅第*1.5.4 节字数统计*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:33:53.347

您需要阅读标准库函数[`isspace`](http://pubs.opengroup.org/onlinepubs/007904875/functions/isspace.html)和[`ispunct`](http://pubs.opengroup.org/onlinepubs/007904875/functions/ispunct.html); 这比对各种字符值进行显式测试要容易（并且它考虑了语言环境）。

您需要将`words`and初始化`lines`为 0，然后在检查输入时更新它们：

```
if (isspace(iochar) || ispunct(iochar) || iochar == EOF)
{
  if (previous_character_was_not_space_or_punctuation)  // you'll have to figure
  {                                                     // out how to keep track 
    words++;                                            // of that on your own
  }

  if (iochar == '\n')
  {
    lines++;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:36:54.247

正如 AK4749 所述，您没有任何计数代码。

同样在 if 语句中，如果字符是空格、制表符或换行符，则仅将字符输出到 stdout。我相信你想要相反的。

我会尝试以下方法：

```
#include "stdio.h"

int main()
{
    int iochar, words,lines;
    words=0;
    lines=0;

    printf("Enter something here:\n\n");

    while ((iochar = getchar ()) !=EOF)
    {
        if((iochar == ' ') || (iochar=='\t')) 
            words++;
        else if (iochar == '\n')
            lines++;
        else
        {
            putchar(iochar);
        }
    }
    printf("Lines: %d, Words: %d", lines, words);
    return 0;
} 
```

我没有尝试编译它，但它应该不会太远。

希望它有帮助，左撇子

# c# - 只允许文本框中的特定字符

> ID：12607087
> 
> 赞同：21
> 
> 时间：2012-09-26T17:20:09.927
> 
> 标签：c#, winforms, textbox

如何在 Visual C# 文本框中只允许某些字符？用户应该能够在文本框中输入以下字符，并且应该阻止其他所有字符：0-9、+、-、/、*、(、)。

我用谷歌查找了这个问题，但我得到的唯一解决方案是只允许字母字符，只允许数字或不允许某些字符。我想要的不是禁止某些字符，我想默认禁止所有字符，除了我在代码中输入的字符。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-26T17:32:15.093

正如评论中提到的（以及我输入的另一个答案），您需要注册一个事件处理程序来捕获文本框上的 keydown 或 keypress 事件。这是因为 TextChanged 仅在 TextBox 失去焦点时触发

下面的正则表达式可让您匹配您想要允许的那些字符

```
Regex regex = new Regex(@"[0-9+\-\/\*\(\)]");
MatchCollection matches = regex.Matches(textValue); 
```

而这恰恰相反并捕获了不允许的字符

```
Regex regex = new Regex(@"[^0-9^+^\-^\/^\*^\(^\)]");
MatchCollection matches = regex.Matches(textValue); 
```

我不假设会有一个匹配，因为有人可以将文本粘贴到文本框中。在这种情况下捕获 textchanged

```
textBox1.TextChanged += new TextChangedEventHandler(textBox1_TextChanged);
private void textBox1_TextChanged(object sender, EventArgs e)
{
    Regex regex = new Regex(@"[^0-9^+^\-^\/^\*^\(^\)]");
    MatchCollection matches = regex.Matches(textBox1.Text);
    if (matches.Count > 0) {
       //tell the user
    }
} 
```

并验证单次按键

```
textBox1.KeyPress += new KeyPressEventHandler(textBox1_KeyPress);
private void textBox1_KeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e)
{
    // Check for a naughty character in the KeyDown event.
    if (System.Text.RegularExpressions.Regex.IsMatch(e.KeyChar.ToString(), @"[^0-9^+^\-^\/^\*^\(^\)]"))
    {
        // Stop the character from being entered into the control since it is illegal.
        e.Handled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T17:33:29.583

您需要订阅`KeyDown`文本框上的事件。然后是这样的：

```
private void textBox1_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
    if (!char.IsControl(e.KeyChar) 
       && !char.IsDigit(e.KeyChar) 
       && e.KeyChar != '.' && e.KeyChar != '+' && e.KeyChar != '-'
       && e.KeyChar != '(' && e.KeyChar != ')' && e.KeyChar != '*' 
       && e.KeyChar != '/')
    {
        e.Handled = true;
        return;
    }
    e.Handled=false;
    return;
} 
```

要知道的重要一点是，如果您将`Handled`属性更改为`true`，它将不会处理击键。将其设置为`false`意志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:27:26.327

您可能可以使用[KeyDown 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)、[KeyPress 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)或[KeyUp 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup.aspx)。我会首先尝试我认为的 KeyDown 事件。

您可以设置事件参数的 Handled 属性以停止处理事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T09:15:36.413

在我看来，拦截 KeyPressed 事件是一个很好的可靠解决方案。如果您使用 RegExp，请注意触发代码字符（e.KeyChar 低于 32）。

但是，只要用户从剪贴板粘贴文本，这种方式仍然可以注入超出范围的字符。不幸的是，我没有找到正确的剪贴板事件来解决这个问题。

所以一个防水的解决方案是拦截TextBox.TextChanged。这里有时会在短时间内看到原始的超出范围的字符。我建议同时实施。

`using System.Text.RegularExpressions;`

```
private void Form1_Shown(object sender, EventArgs e)
{
    filterTextBoxContent(textBox1);
}

string pattern = @"[^0-9^+^\-^/^*^(^)]";

private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar >= 32 && Regex.Match(e.KeyChar.ToString(), pattern).Success) { e.Handled = true; }
}

private void textBox1_TextChanged(object sender, EventArgs e)
{
    filterTextBoxContent(textBox1);
}

private bool filterTextBoxContent(TextBox textBox)
{
    string text = textBox.Text;

    MatchCollection matches = Regex.Matches(text, pattern);
    bool matched = false;

    int selectionStart = textBox.SelectionStart;
    int selectionLength = textBox.SelectionLength;

    int leftShift = 0;
    foreach (Match match in matches)
    {
        if (match.Success && match.Captures.Count > 0)
        {
            matched = true;
            Capture capture = match.Captures[0];

            int captureLength = capture.Length;
            int captureStart = capture.Index - leftShift;
            int captureEnd = captureStart + captureLength;

            int selectionEnd = selectionStart + selectionLength;

            text = text.Substring(0, captureStart) + text.Substring(captureEnd, text.Length - captureEnd);

            textBox.Text = text;

            int boundSelectionStart = selectionStart < captureStart ? -1 : (selectionStart < captureEnd ? 0 : 1);
            int boundSelectionEnd = selectionEnd < captureStart ? -1 : (selectionEnd < captureEnd ? 0 : 1);

            if (boundSelectionStart == -1)
            {
                if (boundSelectionEnd == 0)
                {
                    selectionLength -= selectionEnd - captureStart;
                }
                else if (boundSelectionEnd == 1)
                {
                    selectionLength -= captureLength;
                }
            }
            else if (boundSelectionStart == 0)
            {
                if (boundSelectionEnd == 0)
                {
                    selectionStart = captureStart;
                    selectionLength = 0;
                }
                else if (boundSelectionEnd == 1)
                {
                    selectionStart = captureStart;
                    selectionLength -= captureEnd - selectionStart;
                }
            }
            else if (boundSelectionStart == 1)
            {
                selectionStart -= captureLength;
            }

            leftShift++;
        }
    }

    textBox.SelectionStart = selectionStart;
    textBox.SelectionLength = selectionLength;

    return matched;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:31:28.020

对于您的验证事件 IMO，最简单的方法是使用字符数组来验证文本框字符。是的 - 迭代和验证并不是特别有效，但它很简单。

或者，对输入字符串使用白名单字符的正则表达式。您的活动在 MSDN 上可用：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-06-13T10:57:08.290

```
 private void txtuser_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsLetter(e.KeyChar) && !char.IsWhiteSpace(e.KeyChar) && !char.IsControl(e.KeyChar))
        {
            e.Handled = true;
        }
    } 
```

# mysql - 使用 MYSQL SELECT 返回值数组

> ID：12607088
> 
> 赞同：0
> 
> 时间：2012-09-26T17:20:11.503
> 
> 标签：mysql

> **可能重复：**
> [MySQL Nested Select 能否返回结果列表](https://stackoverflow.com/questions/2524848/can-mysql-nested-select-return-list-of-results)

我有一个包含`users`（id，name）的表和另一个包含`courseAttrs`用户已应用于（userID，courseID）的表。我想选择所有用户并让此选择返回用户已申请的名称和逗号分隔的 courseID 列表。什么是可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:32:46.323

您应该查看 mysql 的手册，因此，就您的解释而言，您应该为两个表创建查询...您可以使用 mysql 的程序来获取结果..您始终可以使用 foreach 来读取所有值，并且如果你想要一种特定类型的数组，你可以创建它，同时循环通过 mysql 返回的对象/数组运行

我认为，如果您使用表单（名称、课程 ID、课程 ID、课程 ID）创建一个数组（就像我想您想要创建的），您可能会将所有数据弄得一团糟，并且可能会为每个用户创建一个数组。我认为最好的方法是接收您从查询中获得的对象或数组。

对于查询，假设你有一个关联字段，你可以做这样的事情

select * from user, courseAttrs where user.courseattr = courseattr.id_couse_attr

如果你使用 mysql_fetch_object

```
while ($row = mysql_fetch_object($result)) {
    echo $row->user_id;
    echo $row->fullname;

} 
```

mysql_fetch_assoc() 返回关联数组：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
} 
```

mysql_fetch_array() 返回数组

```
while ($row = mysql_fetch_array($result)) {
    echo $row[0];
    echo $row[1] ;
} 
```

# java - Java OO 设计：接口和列表

> ID：12607091
> 
> 赞同：2
> 
> 时间：2012-09-26T17:20:48.290
> 
> 标签：java, list, interface

假设我有一个名为***MemberNio***的类（包含一个 SocketChannel 和其他 nio 特定对象），它扩展了***Member***类。

*getMember(id)*和*getMembers*方法返回*MemberNio*对象。我的应用程序层不需要了解 Nio 的任何内容，只需调用*getMember*方法来获取成员并使用超类型 Member：

```
Member member = membersMgr.getMember(id); 
```

但是当我尝试调用*getMembers*时会出现问题：

```
List<Member> members =  membersMgr.getMembers(); // <- error, can't cast List<MemberNio> to List<Member> 
```

这将迫使我拥有***MemberNio***对象，而我应该只知道***Member***对象。

当我使用列表和接口/支持类型时，这是一个反复出现的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:23:46.587

您可以使用： -

```
List<? extends Member> members =  membersMgr.getMembers();
for (Member member: members) {
     if (member instanceof MemberNio) {
          MemberNio memNio = (MemberNio)member;
          /** Do your stuff **/
     }
} 
```

为了获取`members`using `enhanced-for loop`，我们使用了 :- 的概念`Super type Reference pointing the Subclass object`。因此，无论`subclass`在. `list`_`super-class``TypeCast``instance type`

并使返回类型`getMembers()`相同..它会起作用。

这样您就可以返回该类`List`的`Member`任何`extends your Member`类..并且您不需要明确给出这些类的名称..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:26:58.713

泛型是`invariant`自然的。这意味着它 `List<MemberNio>`不是`List<Member>` 您可以使用[通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)指定边界的子类型。

```
 List<? extends Member> which means List of Member or any subclass of Member 
```

# mysql - 用于调度的数据库设计

> ID：12607092
> 
> 赞同：3
> 
> 时间：2012-09-26T17:20:52.313
> 
> 标签：mysql, database-design, scheduling, normalization

我需要为我工作中的不同地点创建一个调度程序。我需要为每个特定位置从上午 8 点到下午 5 点安排 15 分钟的时间段。我正试图围绕所需的数据库设计。

一些参数：

1.  时间表需要至少提前两周。
2.  与其他地点相比，每个地点都有一个独特的时间表。
3.  时间表必须以 15 分钟为单位。
4.  每个位置都有不同的块何时满的标准。例如，一个位置可以每十五分钟为 3 位客户提供服务，因此他们的街区将分成三个街区。另一个位置可以每 15 分钟为 5 位客户提供服务，因此他们的街区将在预定 5 人后满员。

每次我草拟这个我都违反了一些数据库规范化规则。主要目标是能够查询特定位置的开放“插槽”并显示它们。任何人都知道我应该如何构建我的表，这样我刚才描述的查询就不必比必要的更努力了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:30:25.443

您将需要每个位置的设置表，其中包含诸如每 15 分钟可以预订多少客户、开放和关闭时间等信息。您实际上将为每个具有开始和结束时间的“槽”创建一个条目表。

您的其余参数必须在应用层处理，例如计算其他位置的事件数量并查看它们是否已满。

```
事件
-----
ID
日期开始
日期结束
location_id

地点
--------
ID
姓名
最大客户
开始时间
时间结束

```

我建议您阅读[Mozilla Calendar SQL Schema](https://wiki.mozilla.org/Calendar:Sql_Calendar_Schema)。它为形成一个坚实的日程安排日历提供了良好的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:34:20.913

在我看来，您至少需要三张桌子。我的建议：

SCHEDULES - 存储实际的时间表。将需要一个`id`（IE：auto_increment），`location_id`（参考“LOCATIONS”表）`time_start`，，`time_end`

位置 - 存储位置。将需要`id`(IE: auto_increment) 和其他适用信息，例如实际的`location`.

RULES - 这将引用 LOCATION 表。您将需要提供您想要存储的所需信息（即：max_occupants）。这将至少需要一个`id`字段和`location_id`字段。

现在您有三个表来存储所需的数据，其他两个表引用了 LOCATIONS。您始终可以将“规则”添加到 LOCATIONS 表中，但是如果您决定有其他限制等，则将其设为自己的表可以在将来为您提供灵活性。

# jquery - Jquery ui仅在对象移动时调用函数

> ID：12607097
> 
> 赞同：1
> 
> 时间：2012-09-26T17:21:10.030
> 
> 标签：jquery, jquery-ui

所以，假设我有一个简单的 div：

```
<div class="drag"></div> 
```

css 我认为在这种情况下无关紧要，这是我的简单`draggable`功能

```
$(".drag").draggable({
  axis: "y"
}); 
```

`drag`现在，只有当div 实际移动 1px 或更多时，我才能调用函数？我已经通过了所有事件和选项，我得到的关闭是`drag`事件，但问题是即使我的 div 静止不动，它也会继续执行，每 1 秒左右......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:47:20.163

你会想做这样的事情：

```
$(".drag").draggable({
  axis: "y",
  start: function() {
    $(this).data('startPos', $(this).offset());
  },
  drag: function() {
    if ($(this).data('startPos') != $(this).offset()) {
      alert('It moved!');
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:44:12.913

这应该可以解决问题：

```
var lastPos = 0;
$("#drag").draggable({
  axis: "y",
  stop: function(event, ui) {
    if(Math.abs(ui.position.top - lastPos) >= 1)
    {
      //Moved 1px or more
      alert("Moved "+Math.abs(ui.position.top - lastPos)+" Pixels");
    }
    lastPos = ui.position.top;
  }
}); 
```

现在只需将以下内容替换为您的函数：

```
alert("Moved "+Math.abs(ui.position.top - lastPos)+" Pixels"); 
```

# sed - 如何在下一个 sed 命令中使用管道的结果？

> ID：12607101
> 
> 赞同：2
> 
> 时间：2012-09-26T17:21:21.910
> 
> 标签：sed

我想用 sed 来做到这一点。我有 2 个文件：

```
keys.txt:
host1
host2

test.txt
host1 abc
host2 cdf
host3 abaasdf 
```

我想使用 sed 删除 test.txt 中包含 keys.txt 中的关键字的所有行。所以 test.txt 的结果应该是

```
host3 abaasdf 
```

有人可以告诉我如何用 sed 做到这一点吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:35:17.800

我建议使用`grep`这个（特别是`fgrep`因为没有涉及正则表达式），所以

```
fgrep -v -f keys.txt test.txt 
```

行得通吗？`sed`很快就可以了：

```
sed -i.ORIGKEYS.txt ^-e 's_^_/_' -e 's_$_/d_' keys.txt
sed -f keys.txt test.txt 
```

（这`keys.txt`会将原始文件修改为可获取源的 sed 脚本。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:25:55.817

`fgrep -v -f`是最好的解决方案。这里有几个选择：

[`comm`](http://man.cx/comm)和的组合[`join`](http://man.cx/join)

```
comm -13 <(join keys.txt test.txt) test.txt 
```

或 awk

```
awk 'NR==FNR {key[$1]; next} $1 in key {next} 1' keys.txt test.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T22:06:20.900

这可能对您有用（GNU sed）：

```
sed 's|.*|/^&\\>/d|' keys.txt | sed -f - test.txt 
```

# c# - 将可变大小数组的列表绑定到 DataGridView

> ID：12607103
> 
> 赞同：0
> 
> 时间：2012-09-26T17:21:56.557
> 
> 标签：c#, .net, data-binding

我有一种情况，我想从数组列表中填充 DataGridView。每行包含单个数组的值。数组的大小可以因用户交互而动态变化，但列表中的所有数组始终具有相同的大小。

我可以动态调整 DataGridView 实例的列以反映数组的大小，并且我只需在数组索引之后命名列（“1”、“2”等）。但我需要知道如何将实际数据推送到 DataGridView 以便它可以更新其行。

我知道我可以使用 BindingSource 作为数据源（数组列表）和 DataGridView 之间的中介，但我不知道如何设置它来执行必要的映射。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:28:17.270

假设您有一组这样的数组（可能会有所不同，但您应该明白）：

```
var row1 = new[] { "A", "B", "C" }
var row2 = new[] { "D", "E", "F" } 
```

现在让我们构建一个可绑定对象：

```
DataTable table = new DataTable();
for (int i = 0; i < row1.Length; i++) { table.Columns.Add(i.ToString(), typeof(string)); }
table.LoadDataRow(row1, true);
table.LoadDataRow(row2, true); 
```

现在让我们绑定网格：

```
dataGridView.DataSource = table.DefaultView; 
```

# css - 媒体查询在一个站点上工作，但在另一个站点上不工作

> ID：12607104
> 
> 赞同：0
> 
> 时间：2012-09-26T17:22:04.980
> 
> 标签：css, media-queries

我正在开发两个不同的响应式网站（两个都在进行中，一个取自 lynda.com，仅供练习）。据我所知，我做的第一个效果很好。HTML 在[这里](http://kimwilddesigns.com/index_new.htm)，CSS 在[这里](http://kimwilddesigns.com/css/kw_styles-responsive2.css)。

然后我开始研究这个，创建了与上面相同的 css，但是针对@media only screen and (max-width: 768px) 的媒体查询由于某种原因没有加载。HTML 在[这里](http://kimwilddesigns.com/TrailGuide_website/TrailGuide_website-class/index_fluid.html)，CSS 在[这里](http://kimwilddesigns.com/TrailGuide_website/TrailGuide_website-class/css/trail-fluid_styles.css)。我花了几个小时试图找出原因，但我迷路了。我在两者之间没有任何区别，但是一个有效，一个无效。您的任何建议将不胜感激！

我现在只是在浏览器中测试它们。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:34:17.003

我认为问题在于一个站点的 HTML 中有一个“元...视口...”，而在另一个站点中，该声明被注释掉了。

在没有“元...视口...”的站点中，媒体查询实际上是针对不受约束的“视口”而不是“屏幕”的尺寸进行测试（过度简化是“设备有时会撒谎”）。另一方面，在具有“meta...viewport...width=device-width”的站点中，“viewport”宽度在媒体查询测试之前被强制降低到与“screen”宽度相同，所以你得到不同的答案（尤其是在较小的设备上）。

（根据您所针对的设备，您可能需要深入了解“视口”。“视口”的行为方式有充分的理由；请不要误解我的讽刺“设备有时会撒谎”意思是“视口是个坏主意”。）

# jquery - 加载并确认加载所有资产、脚本 html/jquery

> ID：12607108
> 
> 赞同：2
> 
> 时间：2012-09-26T17:22:28.947
> 
> 标签：jquery, html, loading

我是 javascript 新手，在允许游戏继续之前，我有一个关于加载和确认加载所有资产、脚本等的问题。基本上，如何知道所有资产和脚本何时加载......

这似乎是一个微不足道的问题/问题，但我已经问过几个程序员，似乎没有人有明确的答案。

我有一个 html 页面来加载资产 - 即 png 等，所有指定的 vis css - 没有指定内联。

我也有很多自定义的 javascript 类等，包括 jquery、loading。

我目前正在使用它来确认页面加载 - 当页面加载功能运行时，内容变得可见。页面上有一个小的加载微调器被删除。

我正在使用 jQuery 标准加载脚本——`$(document).ready(function()`

```
</head>
<body  onload="doAfterPageLoad()">

<div id="wrapper"  >

<div id="loadingIcon" >
    <div id="loadingWord"></div>
</div>
<div id="content"  style="visibility: hidden;">
    <!-- html stuff here -->
       </div>
</div>

</body>
</html>

//Javascript jQuery stuff....
<script type="text/javascript">
    function doAfterPageLoad()
    {
        $("#loadingIcon").css("visibility","hidden");
        $("#content").css("visibility","visible");
    }

    $(document).ready(function()
    {       
        // start javascript stuff
    });
 </script> 
```

我的问题 - 这是同步的吗？（我处于快速连接状态，无法判断）是否有可能出现故障？-我是否应该设置一个变量并在两个“加载”完成时计数并使用它来开始游戏？而且，如果我选择通过 javascript 加载器加载一些 png 资产文件，是否应该提供触发加载完成所需的第三个变量/值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:26:41.147

jQuery 提供了`load()`函数，所以不要`$(document).ready`做

```
$(window).load(function()
{       
    // start javascript stuff
}); 
```

它会在加载所有资产时触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:24:33.000

你有正确的想法。将所有 DOM 就绪的依赖项放入以下内容：

```
$(document).ready(function()
{       
    // start javascript stuff
}); 
```

就像你说的，这是允许 html 在允许 javascript 执行之前先在页面上呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:41:38.700

我发现的最佳解决方案是使用 requirejs。

[http://requirejs.org](http://requirejs.org)

简而言之，它解决了这个问题，允许您根据需要加载脚本，并且知道它们已加载。它使应用程序更快，因为您只在需要时加载脚本。

基本语法是：

```
require(
    ["jquery","module"], // these are your dependancies
    function($,module){ // this is what you want to do after your deps have been loaded
        // do stuff
    }); 
```

在 requirejs 中，每个依赖模块都定义在自己的文件中。您的模块被包装在一个 define() 函数中，以允许 requirejs 提取它：

```
define(
        ["jquery"], // these are your dependancies
        function($){ // this is what you want to do after your deps have been loaded
            var module= {
                // my widget definition
            };
            return module;
        }); 
```

# sonarqube - 声纳可以用来监控我的部分代码吗？

> ID：12607109
> 
> 赞同：0
> 
> 时间：2012-09-26T17:22:34.733
> 
> 标签：sonarqube

嗨，我收到了一个请求，要求仅对我的代码的非遗留部分进行声纳监控代码质量。

可能吗 ？我在声纳配置或其他任何地方都找不到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:32:38.740

[关于高级参数](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)的 Sonar 文档列出了以下可用于排除部分源代码树的属性：

```
sonar.exclusions=com/mycompany/*.java,**/*Dummy.java 
```

也可以从项目的设置菜单中设置此参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:34:03.420

您可以使用 Cutoff 插件[http://docs.codehaus.org/display/SONAR/Cutoff+Plugin](http://docs.codehaus.org/display/SONAR/Cutoff+Plugin)。假设您系统的旧部分未修改，您可以使用此插件根据截止日期阈值从分析中排除文件。在配置的截止日期之前最后修改的任何源文件都被排除在外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T22:10:30.367

尝试使用 sonar.inclusions 设置（在 Sonar 3.5+ 中可用）。

根据[http://docs.sonarqube.org/display/SONAR/Project+Administration](http://docs.sonarqube.org/display/SONAR/Project+Administration)：“通过 'sonar.inclusions' 和 'sonar.test.inclusions' 属性设置要分析的文件。在这种情况下，只有这些非常文件将被分析。”

这在“源文件包含”下的项目配置 -> 设置 -> 排除中也可用

# asp.net - 在列表 vb.net 中返回多个值

> ID：12607110
> 
> 赞同：1
> 
> 时间：2012-09-26T17:22:40.160
> 
> 标签：asp.net, sql, vb.net

在告诉你问题之前，请原谅我的英语不好，我只知道基本的我有一个带有查询的函数并且我想返回它，我正在这样做：

```
Public Function obtenerDataAjuste(ByVal id As Integer)
     Dim ajuste As New Ajuste
     Dim cmd as New SqlCommand("usp_obtenerDataAjuste",cn.getCN")
     cmd.CommandType = CommandType.StoredProcedure
     cn.getCN().Open()
     Dim dr as SqlDataReader
     dr = cmd.ExecuteReader
     Dim ajustelist As New List(Of Ajuste)
     While dr.Read
         ajuste.pesomix = dr("PesoMix")
         ajuste.pesoprod = dr("PesoProd")
         ajuste.unidad = dr("UNIDAD_EMPAQUE")
     End While
     cn.getCN().Close()
     Return ajustelist.ToArray
End Function 
```

但我认为是错误的，因为我在后面的代码中调用了这个函数：

```
Dim opd As New OPDAO
    For Each objAjuste In opd.obtenerDataAjuste(CInt(Session("idop")))
        Dim pesomix As Decimal = objAjuste.pesomix
        Dim pesoprod As Decimal = objAjuste.pesoprod
        Dim empaque As Integer = objAjuste.unidad

        'Reajuste unidad ajustado
        Dim unidadajustado As Double = pesomix / pesoprod
        Session("undajustado") = Convert.ToInt32(unidadajustado)

        'Reajuste paquete ajustado
        Dim paqueteajustado As Double = Session("undajustado") / empaque
        Session("pqtajustado") = paqueteajustado

    Next 
```

它对我不起作用，它返回最后一条记录。任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:27:09.207

您没有在列表中添加任何内容。您还需要在循环**内**`Ajuste`初始化一个新对象。**`While dr.Read`**

 **这就是为什么你现在只看到最后一个值的原因，因为你不断地覆盖你在 while 循环**之外**`Ajuste`初始化的对象。

 **```
 Dim ajustelist As New List(Of Ajuste)
         While dr.Read
             Dim ajuste As New Ajuste       // <-- add this
             ajuste.pesomix = dr("PesoMix")
             ajuste.pesoprod = dr("PesoProd")
             ajuste.unidad = dr("UNIDAD_EMPAQUE")
             ajustelist.Add(ajuste)         // <-- and this
         End While 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:26:45.120

每次通过 For Each 循环，您将覆盖您之前放入 Session("undajustado") 的内容，这将在完成后成为循环中的最后一项。

在能够帮助你之前，我需要知道你想要完成什么。****

# c# - 如何在我的 Mono for Android 项目中获取 Google 提供的 Android.Resource.Layout 参考

> ID：12607111
> 
> 赞同：1
> 
> 时间：2012-09-26T17:22:40.210
> 
> 标签：c#, android, xamarin.android

我有一个 Mono for Android 项目，它可以使用以下代码成功编译和运行。但是，复制/粘贴到我正在处理的较新项目中会导致编译器错误，指示：[appnamespace].Android.Resource.Layout 不包含“SimpleListItem2”的定义。

如果我试图访问我定义的 xml 资源布局，我预计会出现该错误，但我正在尝试访问 Google 提供的默认资源布局，特别是“SimpleListItem2”。我需要做些什么让编译器识别默认布局吗？谢谢！

```
public override View GetView(int position, View convertView, ViewGroup parent)
{
  View v = convertView;
  if (v == null) {
    LayoutInflater li = (LayoutInflater)this.Context.GetSystemService(Context.LayoutInflaterService);
    v = li.Inflate(Android.Resource.Layout.SimpleListItem2, null);
  }

  TextView tt = (TextView)v.FindViewById(Android.Resource.Id.Text1);
  if (tt != null) { tt.Text = string.Format("{0}, {1}", this.LastName, this.FirstName); }  
  return v;
} 
```

基本上，我在 Android.Resource.Layout 命名空间下的 Mono.Android 程序集中寻找对这些布局的访问：

ActivityListItem
BrowserLInkContextHeader
ExpandableListContent
PreferenceCategory
SelectDialogItem
SelectDialogMultiChoice
SelectDialogSingleChoice
SimpleDropDownItem1Line
SimpleExpandableListItem1
SimpleExpandableListItem2
SimpleGalleryItem
SimpleListItem1
SimpleListItem2
SimpleListItemChecked
SimpleListItemMultipleChoice
SimpleListItemSingleChoice
SimpleListItemDropDownItem
SimpleSpinnerItem
TestListItem
TwoLineListItem

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-30T14:16:16.183

这是 C# 语言功能，其行为符合 C# 语言规范。

考虑这个例子：

```
using System;

namespace Example {
    namespace System {
    }

    class Bad : System.Object {
    }
} 
```

以上编译失败：

```
ns.cs(8,24): error CS0234: The type or namespace name `Object' does not exist in 
the namespace `Example.System'. Are you missing an assembly reference? 
```

.NET CSC 和 Mono 的 mcs 编译器都是如此。

为什么？[请参阅C# 语言规范](http://www.ecma-international.org/publications/standards/Ecma-334.htm)的 §10.8 命名空间和类型名称，第 100-102 页。

> *   否则，*namespace-or-type-name*的格式为`N.I`或`N.I<A1, ..., AK>`。 `N`首先被解析为*namespace-or-type-name*。

在这种情况下，我们正在处理`System.Object`，其形式为`N.I`。所以我们需要先解决`System`：

> *   否则，如果*namespace-or-type-name*的形式`I`为`I<A1, ..., AK>`:
>     ...
>     *   否则，对于每个命名空间 N，从出现命名空间或类型名称的命名空间开始，继续每个封闭命名空间（如果有），并以全局命名空间结束，评估以下步骤，直到找到实体: ...

这会将令牌解析`System`为`Example.System`. 现在`System`编译器尝试解析`System.Object`，即`Example.System.Object`. 这种类型不存在，我们得到一个错误。

上述示例的修复？使用`global::`：

```
class Bad : global::System.Object {
} 
```

您的 Android 代码也是如此；如果您碰巧在 `Example.Android`命名空间中并且需要使用该`Android.Resource.Layout` 类型，请使用`global::Android.Resource.Layout`.

或者您可以使用在声明时解析的*using-alias*，允许：

```
using System;
using MyObject = System.Object;

namespace Example {
    namespace System {
    }

    class Bad : MyObject {
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T17:15:22.957

似乎命名空间冲突会导致此错误。在命名空间中使用“Android”时会收到警告。

如果应用程序的命名空间包含“Android”，Xamarin 的 Mono for Android 编译器似乎很难解析 Google 的 SimpleListItem2 对象。

要遇到错误，“Android”字符串需要是命名空间中的完整字符串（而不是子字符串）。命名空间“BenHorgen.Android.MyApps.TestApp”**会**导致编译器错误。

更具体地说，在命名空间中包含字符串“Android”作为子字符串**不会**导致问题。例如：“BenHorgen.MyAndroidApps.TestApp”不会对我造成问题。

# crystal-reports - Crystal Report 字段中的掩码

> ID：12607116
> 
> 赞同：0
> 
> 时间：2012-09-26T17:23:03.860
> 
> 标签：crystal-reports

在巴西，我们有一个名为 CNPJ 的数字，其掩码为 00.000.000/0000-00，我将此数字保存在 SQL 中，就像一个 int 列一样，当我让我的报告工作正常时，字段显示为 00000000000000 我如何输入报表中字段上的掩码显示如下 00.000.000/0000-00

感谢任何方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:07:03.650

如果您不需要前导零，那么：

```
local stringvar sample := totext({table.number},0,'');
if length(sample)<>14 then "Handle the error case" else
  picture(sample,"xx.xxx.xxx/xxxx-xx") 
```

否则，添加前导零：

```
local stringvar sample := totext({table.number},"00000000000000");
picture(sample,"xx.xxx.xxx/xxxx-xx") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:08:14.683

必须使用此公式添加公式字段 mid({imprimePJ;1.doc_cnpj},1,2)+"."+ mid({imprimePJ;1.doc_cnpj},3,3)+"."+ mid({imprimePJ ;1.doc_cnpj},6,3)+"/"+ mid({imprimePJ;1.doc_cnpj},9,4)+"-"+mid({imprimePJ;1.doc_cnpj},13,2)

# tags - 自定义 JSP 标记问题

> ID：12607118
> 
> 赞同：2
> 
> 时间：2012-09-26T17:23:11.613
> 
> 标签：tags, jstl, jsp-tags

我得到了一些不寻常的异常，如下所示。

```
Sep 26, 2012 12:09:50 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: <h3>Validation error messages from TagLibraryValidator for c in /Test.jsp</h3><p>null: org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName.</p><h3>Validation error messages from TagLibraryValidator for sql in /Test.jsp</h3><p>null: org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName.</p><h3>Validation error messages from TagLibraryValidator for x in /Test.jsp</h3><p>null: org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName.</p><h3>Validation error messages from TagLibraryValidator for fmt in /Test.jsp</h3><p>null: org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName.</p> 
```

实际上我已经实现了一个自定义标签。

当我使用 taglib 使用该自定义标签时，它工作正常。

```
<%@taglib prefix="path" uri="PathGenerator"%> 
```

但是当我开始将它与其他 JSTL 标记库一起使用时。它产生上述异常。

```
<%@ taglib uri='http://java.sun.com/jsp/jstl/core' prefix='c'%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%>
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %>
<%@ taglib prefix="json" uri="http://www.atg.com/taglibs/json" %>
<%@taglib prefix="path" uri="PathGenerator"%> 
```

谁能帮帮我吗。

# hamming-code - 汉明码混淆

> ID：12607123
> 
> 赞同：2
> 
> 时间：2012-09-26T17:23:30.880
> 
> 标签：hamming-code

我很难回答这个问题。这是原始问题：

> 使用校验位`0111`（c8、c4、c2 和 c1）对字进行编码。`11101011`该字作为（数据）读回。原始数据字是什么？

我认为既然有 4 个校验位，那么这一定是一个 4 位的内存字，只有 16 个可能的字：`0000, 1000, 0100, 1100, 0010, 1010, 0110, 1110, 0001, 1001, 0101, 1101, 0011, 1011, 0111, 1111`. 因此，每个码字有 8 位，校验位在 1、2、4、8 位。

*   位 1 检查位的奇偶性：1、3、5、7、9、11
*   位 2 检查位的奇偶性：2、3、6、7、10、11
*   位 4 检查位的奇偶性：4、5、6、7、12
*   位 8 检查位的奇偶性：8、9、10、11、12

我也知道，如果 1 的检查总数为奇数，则将奇偶校验位设置为 1，如果所有 1 的检查为偶数，则将奇偶校验位设置为 0。

我认为读回的字一定有错误，我必须纠正它，这样我才能找到原始数据字。

这是这个问题发生的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T18:53:16.400

信息：`11000010`

方法一：

```
CBA987654321  <-- Hexadecimal
1100?001?0??

C=1100
B=1011
5=0101
______
X=0010 
```

垂直测试每一位 (XOR)。

解决方案：

```
1100?001?0??
    0   0 10

110000010010 
```

方法B：

```
CBA987654321  <-- Hexadecimal
1100?001?0?? 
```

# mysql - mysql自动增量并将多个数据库合并为一个主

> ID：12607127
> 
> 赞同：1
> 
> 时间：2012-09-26T17:23:40.740
> 
> 标签：mysql, increment, auto-increment

我们有大师`Database A`和客户`DATABASE B`和`DATABASE C`.

现在 `Database A`有`auto_increment = 10000`和`auto_increment_offset = 10000`。

我们希望我的客户分别设置为`DATABASE B`和AND并与Master 合并。`DATABASE C``auto_increment = 10001``auto_increment_offset = 10000``auto_increment = 10002``auto_increment_offset = 10000``Database A`

我的问题是上述客户部分是否可能，如果可能的话，发生冲突的百分比是多少以及如何避免它。

此外，关于我们关心的性能，因为表自动增量一次增加 10000，而不是典型的增加 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:39:15.273

我们做了相反的事情，不要交错，而是给它们单独的空间：

```
Database A auto_increment = 10000000 for all tables
Database B auto_increment = 20000000
Database C auto_increment = 30000000 
```

...并将数据库 C 的部分与数据库 B 等合并，或者我们喜欢的任何方式。但是我们冲突的机会不大，因为每个数据库的行数比较低<10000，这不是主从的情况。

# node.js - 节点服务器 GUI 前端

> ID：12607132
> 
> 赞同：4
> 
> 时间：2012-09-26T17:23:52.733
> 
> 标签：node.js, user-interface, ipc

好吧，我们都知道无头服务器。实际上，可能绝大多数服务器*都是*无头的。

像往常一样（似乎），我的情况要求完全不同。基本上，提议的架构看起来或多或少像：

![RTG SA](../Images/f1e00830b2f954e2538b7283f0a590cc.png)

应用服务器 (node.js) 位于物理连接到两个屏幕的物理机器上。

在这台机器和网络之间有各种各样的常规网络层。请记住，此设置的主要原因之一是物理可移植性：即客户端获得必要的硬件作为产品。服务器本身依赖 CDN 获取静态文件等。

每个监视器/屏幕都需要显示*由同一节点服务器生成的*不同内容。

现在这个服务器可能会在 Windows 上运行，但是给定一个概念（这是我的问题所在），我可以更改代码以在目标平台上运行。好吧，根据我的代码，这甚至可以自动完成。

所以，我的实际问题。Node 非常灵活，它可以由任何东西运行——甚至是定制软件（C++、Delphi，甚至 GM）。只是`shell_exec('node server.js')`，我们走了。

但是屏幕本身需要非常动态。所以节点需要以某种方式影响两个屏幕。我正在考虑的几个选项：

*   一个自定义应用程序，它创建两个可调整大小、无功能的窗口，并带有嵌入式 chromium 浏览器，以某种方式由节点服务器控制（节点如何与这些浏览器反应？）
*   一个自定义应用程序，根据节点 CLI 输出，更新两个屏幕的 UI。因为我需要一些华丽的 UI，所以这个应用程序将在 GameMaker 或类似的引擎中创建。

**PS：**以防万一你问；与网络相对的物理连接（例如，基于 Web 的 GUI 前端）是**设计**使然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:54:42.577

我只是将结果/监控屏幕连接为常规 HTML 页面。在您的 Node 应用程序中，创建第二个 HTTP 服务器（在非标准端口上，与公共防火墙隔离）提供监控页面。

使用socket.io将实时数据发送到监控页面，可以让一切看起来很漂亮。在 Chrome 的全屏实例中启动它。

这种方法将您完全从任何类型的平台依赖中解放出来，并将监控应用程序与服务器应用程序分离。如果需要，它让您可以在单独的盒子上运行监控应用程序。

# sql - SQL - 根据其他列的数据创建“虚拟”列

> ID：12607134
> 
> 赞同：3
> 
> 时间：2012-09-26T17:24:12.970
> 
> 标签：sql, sql-server-2008, tsql

我正在处理的 SQL 查询有一些问题，很抱歉，我没有任何正在进行的工作可显示，因为到目前为止我尝试过的任何事情都没有很好的结果，所以我希望有人能够指出我正确的方向。

**表：**

电脑：

```
[SN][PN][ComputerName][Model][OS][Architecture][RAM][CPU] 
```

登录：

```
[SN][Username][Timestamp] 
```

**信息：**

它以这种方式工作，每次用户登录到计算机时，计算机信息都会更新到计算机表中，并且用户名和时间戳会插入到登录表中。

**结果**

我试图达到的结果如下：

```
[SN][PN][ComputerName][Model][OS][Architecture][RAM][CPU]**[Primary User]** 
```

每台计算机应该只有一行

主要用户字段应基于 5 次最新登录，并且是这 5 次中重复次数最多的用户名。

所以我认为这就结束了，我希望这里的人至少能够为我指出正确的方向，因为谷歌必须提供的每个结果现在都显示为红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:46:25.583

这有点 RBAR，但应该像下面这样。

```
SELECT [SN],
       [PN],
       [ComputerName],
       [Model],
       [OS],
       [Architecture],
       [RAM],
       [CPU],
       O.[Username] AS [Primary User]
FROM   Computers C
       OUTER APPLY (SELECT TOP 1 [Username]
                    FROM   (SELECT TOP (5) *
                            FROM   Logons L
                            WHERE  L.[SN] = C.[SN]
                            ORDER  BY [Timestamp] DESC) Last5Users
                    GROUP  BY [Username]
                    ORDER  BY Count(*) DESC,
                              Max([Timestamp]) DESC) O 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:31:34.740

看起来您想定义一个计算列。看看这个问题：[在 SQL Server 2008 中创建计算列](https://stackoverflow.com/questions/8038221/creating-a-computed-column-in-sql-server-2008)

# html - iframe 图像在 ibooks 中消失

> ID：12607136
> 
> 赞同：2
> 
> 时间：2012-09-26T17:24:29.180
> 
> 标签：html, image, iframe, epub, ibooks

我有一个 iFrame，其中包含一个表格，其中包含 ibooks 中的一些问题/答案，当然，它是 epub 的形式。我正在使用 iframe，因为 IOS 6 更新修复了`<input type="color">`启动键盘的解决方法。

无论如何，有谁知道为什么 iframe 中的一切看起来都很好，但是当你寻找图像时，它“在那里”但不可见。也就是说，我可以通过双击来选择它，它会突出显示它应该在的区域，但你实际上无法看到图像。

我希望这足够具体，如果您有任何问题，请告诉我。

# concurrency - 对于主要编写应用程序，推荐哪种 NoSQL 解决方案？

> ID：12607139
> 
> 赞同：1
> 
> 时间：2012-09-26T17:24:32.533
> 
> 标签：concurrency, nosql

我们计划将后端将执行的一些写入从 RDBMS 转移到 NoSQL，因为我们预计它们将成为主要瓶颈。

我们的业务流程有 95%-99% 的并发写入，平均只有 1%-5% 的并发读取。将涉及大量数据，因此内存中的 NoSQL DB 不适合。

哪种 NoSQL DB 磁盘最适合这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:02:01.753

如果并发写入造成冲突并且数据完整性是一个问题，那么 NoSQL 可能不是您要走的路。您可以使用支持“乐观并发”的数据管理轻松测试这一点，然后您可以测量现实生活中的锁定冲突并详细分析它们。

当你说你预计会出现问题时，我有点惊讶，没有任何进一步的细节。让我给你一个答案：根据你给我们的事实。什么是 100,000 个来源，写作场景是什么？MySQl 不是最好的例子处理可扩展的并发写入等。

如果您提供某种用例或任何有助于详细了解问题的东西，那将会很有帮助。

让我举两个例子：在内存数据库中，具有先进的写入调度程序、数据版本控制等，可以轻松地采用 1M“写入器”，写入器是网络元素，应用程序是高级 NMS 系统。大量写入，无冲突，乐观并发，内存写入缓冲高达 16GB，异步并行写入 200 多个虚拟主轴（SSD 或磁盘）等。吃新数据的真正“吸盘”！将性能扩展到极限的绝佳候选者。

第二个例子：MSC 具有稀疏的号码空间，例如移动号码是号码的“集群”。巨大的数字空间，但最大。2 亿个个人地址。写入冲突的情况非常罕见。RDBMS 被内存映射的稀疏文件取代。性能提升接近 1000 倍，是的，在最好的情况下是 1000 倍，在最坏的情况下“只有”100 倍。替换代码大约是 300 行 C。那是一个真正的 BigNoSQL，因为它非常适合要解决的问题。

因此，简而言之，在不了解更多细节的情况下，没有“灵丹妙药”可以回答您的问题。我们不是在追捕狼人，这只是“大坏数据”。当我们不知道您的工作量是否是“事务性”时。数字或 IO 和延迟敏感，或“类似 BLOB”。流媒体、地理数据等，承诺任何事情都会给出 100% 错误的结果。带宽和 io-rate/latency/transactions 在现实生活中或多或少是一种权衡。

参见例如[http://publib.boulder.ibm.com/infocenter/soliddb/v6r3/index.jsp?topic=/com.ibm.swg.im.soliddb.sql.doc/doc/pessimistic.vs.optimistic。 concurrency.control.html](http://publib.boulder.ibm.com/infocenter/soliddb/v6r3/index.jsp?topic=/com.ibm.swg.im.soliddb.sql.doc/doc/pessimistic.vs.optimistic.concurrency.control.html)了解更多详细信息。

# spring-mvc - 如何测试POST spring mvc

> ID：12607140
> 
> 赞同：3
> 
> 时间：2012-09-26T17:24:37.827
> 
> 标签：spring-mvc, spring-3, spring-test, spring-test-mvc

我的问题是如何调用它。我可以

```
MyObject o = new MyObject();
myController.save(o, "value"); 
```

但这不是我想做的。我希望 MyObject 在请求帖子正文中吗？如何才能做到这一点？

```
@Requestmapping(value="/save/{value}", method=RequestMethod.POST)
public void post(@Valid MyObject o, @PathVariable String value{
    objectService.save(o);
} 
```

为了清楚起见，我说的是单元测试。

编辑：

```
@RequestMapping(value = "/", method = RequestMethod.POST)
public View postUser(ModelMap data, @Valid Profile profile, BindingResult bindingResult) {

    if (bindingResult.hasErrors()) {

        return dummyDataView;
    }

    data.put(DummyDataView.DATA_TO_SEND, "users/user-1.json");
    profileService.save(profile);
    return dummyDataView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:29:45.093

请参阅下面的示例代码，该代码演示了使用 junit 和 spring-test 对控制器进行单元测试。

```
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({
        DependencyInjectionTestExecutionListener.class,
        DirtiesContextTestExecutionListener.class,
        TransactionalTestExecutionListener.class })
@Transactional
@ContextConfiguration(locations = {
    "classpath:rest.xml"
    })
public class ControllerTest{
    private MockHttpServletRequest request;
    private MockHttpServletResponse response;

    @Autowired
    private RequestMappingHandlerAdapter handlerAdapter;

    @Autowired
    private RequestMappingHandlerMapping handlerMapping;

    @Before
    public void setUp() throws Exception
    {
        this.request = new MockHttpServletRequest();
        request.setContentType("application/json");
        this.response = new MockHttpServletResponse();
    }

    @Test
    public void testPost(){
        request.setMethod("POST");
        request.setRequestURI("/save/test");  //replace test with any value

        final ModelAndView mav;
        Object handler;

        try{
                MyObject o = new MyObject();
                //set values
                //Assuming the controller consumes json
                ObjectMapper mapper = new ObjectMapper();
                //set o converted as JSON to the request body
                //request.setContent(mapper.writeValueAsString(o).getBytes());
                request.setAttribute("attribute_name", o); //in case you are trying to set a model attribute. 
                handler = handlerMapping.getHandler(request).getHandler();
                mav = handlerAdapter.handle(request, response, handler);
                Assert.assertEquals(200, response.getStatus());
                //Assert other conditions.
            }
        catch (Exception e) 
            {

            } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:09:06.977

您需要使用 RequestBody：

```
@Requestmapping(value="/save/{value}", method=RequestMethod.POST)
public void post(@RequestBody MyObject o, @PathVariable String value{
   objectService.save(o);
} 
```

有关请求正文文档的一般信息：http: [//static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-requestbody](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-requestbody)

# c# - 方法参数数组默认值

> ID：12607146
> 
> 赞同：17
> 
> 时间：2012-09-26T17:25:27.853
> 
> 标签：c#, arrays, parameters, default-value, optional-parameters

在 c# 中，可以在方法中使用默认参数值，例如：

```
public void SomeMethod(String someString = "string value")
{
    Debug.WriteLine(someString);
} 
```

但是现在我想在方法中使用一个数组作为参数，并为它设置一个默认值。
我在想它应该看起来像这样：

```
public void SomeMethod(String[] arrayString = {"value 1", "value 2", "value 3"})
{
    foreach(someString in arrayString)
    {
        Debug.WriteLine(someString);
    }
} 
```

但这不起作用。
有没有正确的方法来做到这一点，如果这甚至可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T17:27:41.110

> 有没有正确的方法来做到这一点，如果这甚至可能吗？

这是不可能的（直接），因为默认值必须是以下之一（来自[Optional Arguments](http://msdn.microsoft.com/en-us/library/dd264739.aspx)）：

*   一个常量表达式；
*   new ValType() 形式的表达式，其中 ValType 是值类型，例如枚举或结构；
*   default(ValType) 形式的表达式，其中 ValType 是值类型。

创建一个数组不适合可选参数的任何可能的默认值。

这里最好的选择是进行重载：

```
public void SomeMethod()
{
    SomeMethod(new[] {"value 1", "value 2", "value 3"});
}

public void SomeMethod(String[] arrayString)
{
    foreach(someString in arrayString)
    {
        Debug.WriteLine(someString);
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-26T17:38:06.103

试试这个：

```
public void SomeMethod(String[] arrayString = null)
{
    arrayString = arrayString ?? {"value 1", "value 2", "value 3"};
    foreach(someString in arrayString)
    {
        Debug.WriteLine(someString);
    }
}
someMethod(); 
```

# wpf - 使用目标名称触发

> ID：12607148
> 
> 赞同：12
> 
> 时间：2012-09-26T17:25:33.420
> 
> 标签：wpf, triggers

我在 WPF 中有几个文本框和单选按钮集合。我想使用触发器设置只有一个单选按钮的 IsChecked 属性，如果有任何文本框获得焦点，该按钮具有名称。我检查了几个例子，但我找不到我要找的东西。请记住，我们使用的是 MVVM 模式，并且没有任何代码。

我尝试了以下代码并出现此编译错误：

无法在样式设置器上设置 TargetName 属性

```
<UserControl.Resources>
            <Style x:Name="myTest" TargetType="TextBox">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="RadioButton.IsChecked" Value="True"  TargetName="myRadioButton"></Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </UserControl.Resources> 
```

我阅读了其他帖子，DataTrigger 解决了这个问题。

```
 <Style x:Name="myTest2" TargetType="RadioButton" >
     <Style.Triggers>
        <DataTrigger Binding="{Binding IsFocused, ElementName=myTextBox}" Value="True">
           <Setter Property="IsChecked"  Value="True" ></Setter>
        </DataTrigger>      
    </Style.Triggers>
 </Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-09T20:32:30.680

创建一个 ControlTemplate 并将您的触发器添加到 ControlTemplate.Triggers

```
<ControlTemplate.Triggers>
    <Trigger Property="HasText" Value="True">
        <Setter Property="Visibility" TargetName="LabelText" Value="Hidden" />
     </Trigger>
</ControlTemplate.Triggers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-20T05:49:10.440

为每个提供相应 TextBox 作为触发元素的 RadioButton 编写样式。以下是 3 个文本框和 3 个单选按钮的示例。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBox x:Name="txtBox0" Grid.Row="0"/>
    <TextBox x:Name="txtBox1" Grid.Row="1"/>
    <TextBox x:Name="txtBox2" Grid.Row="2"/>

    <StackPanel Grid.Row="3" Orientation="Horizontal">
        <RadioButton GroupName="grp1" Content="txt1">
            <RadioButton.Style>
                <Style TargetType="RadioButton">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsFocused, ElementName=txtBox0}" Value="True">
                            <Setter Property="IsChecked" Value="True"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </RadioButton.Style>
        </RadioButton>
        <RadioButton GroupName="grp1" Content="txt2">
            <RadioButton.Style>
                <Style TargetType="RadioButton">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsFocused, ElementName=txtBox1}" Value="True">
                            <Setter Property="IsChecked" Value="True"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </RadioButton.Style>
        </RadioButton>
        <RadioButton GroupName="grp1" Content="txt3">
            <RadioButton.Style>
                <Style TargetType="RadioButton">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsFocused, ElementName=txtBox2}" Value="True">
                            <Setter Property="IsChecked" Value="True"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </RadioButton.Style>
        </RadioButton>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:30:20.290

来自 MSDN：

> 您可以将此属性设置为应用 setter 集合（此 setter 所属的集合）范围内的任何元素的名称。这通常是包含此设置器的模板中的命名元素。

`TargetName`主要在控件模板中使用，而不仅仅是在您尝试使用它的样式中。您可以做的是将您`RadioButton`的`IsChecked`DP绑定`IsMouseOver`到`TextBox`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:50:17.107

我认为您正在寻找 GotFocus 事件。

在 XAML 中：

```
<TextBox x:Name="textBox1" GotFocus="tb_GotFocus"/>
<TextBox x:Name="textBox2" GotFocus="tb_GotFocus"/>
<TextBox x:Name="textBox3" GotFocus="tb_GotFocus"/>
<RadioButton x:Name="myRadioButton"/> 
```

然后在您的 C# 中，您的事件处理程序可能看起来像这样

```
private void tb_GotFocus(object sender, RoutedEventArgs e)
{
    myRadioButton.IsChecked = true;
} 
```

如果任何文本框获得焦点，它将检查名为 myRadioButton 的 RadioButton。

# ios - UIImagePickerController 以正面启动时有两个“相机”按钮

> ID：12607150
> 
> 赞同：3
> 
> 时间：2012-09-26T17:25:49.227
> 
> 标签：ios, ipad, uiimagepickercontroller, ios6

从 iOS6 开始，每当我`UIImagePickerController`从 a中显示 present a`UIPopoverController`时，我都会得到两个“拍照”按钮： ![双摄像头按钮](../Images/39196f3cc17e70d506a8fafa9512d82a.png)

这仅在以正面模式启动时发生。如果我从后置摄像头开始，然后在弹出窗口出现后切换，就可以了。同样，从正面开始并切换到背面将使第二个按钮保留在那里。

更糟糕的是，“图片中”按钮不起作用。它只是试图将相机聚焦在那个点上。

还有其他人看到这个或知道解决方案吗？全屏显示时不会发生这种情况，我在 Apple 的文档中看到弹出框不再是显示图像选择器的推荐方式，但它也不一定是坏事。不幸的是，由于一些外部要求，我需要将其保留在弹出窗口中，并且不能全屏显示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:01:04.627

我在 iOS6 上遇到了完全相同的问题。奇怪的行为是它只在我第一次打开图像选择器时出现。当关闭并再次打开时，“in-picture”按钮消失。看起来像 UIImagePickerController 中的错误。

为了克服这个问题，您可以通过将 showsCameraControls 属性设置为 NO 来隐藏图像控件，并使用自定义覆盖视图和自己的控件。这样做的缺点是您必须提供所有控件并为它们编写代码操作处理程序。

不幸的是，到目前为止我还没有找到更好的方法。

# ios - 防止系统拍摄应用程序的“恢复使用”快照

> ID：12607153
> 
> 赞同：2
> 
> 时间：2012-09-26T17:25:57.837
> 
> 标签：ios, screen-capture

我在应用程序中向我的用户显示了一些敏感数据，当用户单击主页按钮并返回应用程序时，Apple 具有快照功能，可在按下主页按钮之前显示设备上最后一个屏幕的图片.

有没有办法完全禁用这种效果？我在这里看到了在后台激活时显示图像的方法，该图像推送到视图顶部并在用户返回应用程序时首先显示在快照的位置，但我希望此功能完全消失而不必当用户再次进入应用程序时，保存任何快照或任何其他屏幕截图。谁能建议一种方法来做到这一点？

请注意，我不是在谈论使用主页按钮 + 睡眠按钮按下屏幕截图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:40:44.410

在`applicationWillResignActive:`您的应用程序委托的方法中，您可以制作一个不显眼的弹出窗口的 UIImageView。例如，假设您的应用程序拥有用户的密码。有人在用户身后走，用户按下主页按钮。这会调用该`applicationWillResignActive:`方法，该方法可能会显示地图视图，因此当步行者离开并且用户重新打开应用程序时，它会直接打开地图视图而不是用户密码的简短快照。这就是你可能实现它的方式：

```
//AppDelegate.m
- (void)applicationWillResignActive:(UIApplication *)application {

    UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"picOfMap.png"]];
    image.frame = self.view.frame;
    image.contentMode = UIViewContentModeCenter;
    [self.window.rootViewController.view addSubview: image];
} 
```

以下是何时`applicationWillResignActive:`调用的描述：

> 调用此方法是为了让您的应用程序知道它即将从活动状态变为非活动状态。这可能发生在某些类型的临时中断（例如来电或短信）或当用户退出应用程序并开始转换到后台状态时。处于非活动状态的应用程序会继续运行，但不会将传入事件分派给响应者。( [UIApplicationDelegate 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html))

代码中可能存在一些错误，因为我不熟悉在 App Delegate 中工作，但这是您应该做的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T07:53:32.510

这是 Apple 关于此主题的技术问答：[https ://developer.apple.com/library/archive/qa/qa1838/_index.html](https://developer.apple.com/library/archive/qa/qa1838/_index.html)

简而言之，Swift 中的代码片段如下：

```
func applicationDidEnterBackground(_ application: UIApplication) {
    let someVCToShowInAppSwitcher = ...
    window?.rootViewController?.present(someVCToShowInAppSwitcher, animated: false)
} 
```

和

```
func applicationWillEnterForeground(_ application: UIApplication) {
    // Make sure that we'll dismiss an expected VC, e.g.:
    if window?.rootViewController?.presentedViewController?.view.accessibilityIdentifier == "someVCToShowInAppSwitcher" {
        window?.rootViewController?.dismiss(sender: self)
    }
} 
```

# macos - 错误：“冲泡链接”步骤未成功完成

> ID：12607155
> 
> 赞同：176
> 
> 时间：2012-09-26T17:26:11.953
> 
> 标签：macos, node.js, npm, homebrew

我正在尝试通过 Homebrew 安装 node.js。不幸的是，我收到此错误：

```
➜  ~  brew install node
==> Downloading http://nodejs.org/dist/v0.8.10/node-v0.8.10.tar.gz
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/node/0.8.10
==> make install
==> Caveats
Homebrew installed npm.
We recommend prepending the following path to your PATH environment
variable to have npm-installed binaries picked up:
  /usr/local/share/npm/bin
Warning: Could not link node. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link node'
==> Summary
/usr/local/Cellar/node/0.8.10: 856 files, 13M, built in 103 seconds 
```

所以然后我尝试手动链接节点......

```
➜  ~  brew link node
Linking /usr/local/Cellar/node/0.8.10... Warning: Could not link node. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/node/0.8.10/lib/node_modules/npm/scripts/relocate.sh
Target /usr/local/lib/node_modules/npm/scripts/relocate.sh already exists. You may need to delete it.
To force the link and delete this file, do:
  brew link -f formula_name

To list all files that would be deleted:
  brew link -n formula_name 
```

没有运气，所以我尝试强制链接节点......

```
➜  ~  brew link -f node
Linking /usr/local/Cellar/node/0.8.10... Warning: Could not link node. Unlinking...

Error: Permission denied - /usr/local/lib/dtrace/node.d 
```

我在任何方面都不熟悉 dtrace，而且我害怕弄乱权限，所以我尝试了 sudo..

```
➜ ~ git:(master) sudo brew link -f node
Password:
Error: Cowardly refusing to `sudo brew link'
You can use brew with sudo, but only if the brew executable is owned by root.
However, this is both not recommended and completely unsupported so do so at
your own risk. 
```

我尝试通过卸载节点`brew uninstall node`并重试安装，但没有成功。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2014-02-03T06:07:20.987

我运行 Mac OS X Mavericks。我尝试安装节点 0.10.25，但最佳答案对我不起作用。

natevw 说，`rm -rf /usr/local/lib/node_modules/npm`但如果权限`/usr/local/lib/node_modules`看起来像这样：

```
drwxr-xr-x   3 root      admin   102 Feb  2 20:45 node_modules 
```

那么 brew 将无法在该目录中创建其 npm 符号链接。这是我的解决方案：

## 第 1 步：更新 Homebrew

```
$ brew update 
```

## 第 2 步：删除系统上所有位置的 node/npm

根据您过去安装 node/npm 的方式，其中一些命令不是必需的。

```
$ brew uninstall npm
$ brew uninstall node
$ npm uninstall npm -g
$ sudo rm -rf /usr/local/lib/node_modules 
```

注意：我有通过运行找到的杂散节点文件`brew -v link node`（这给了我 brew 抱怨的链接错误的详细输出）。您可能需要：

```
$ sudo rm -rf /usr/local/include/node
$ sudo rm -rf /usr/local/lib/node 
```

## 第三步：打开一个新的终端并安装节点

```
$ brew install node 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2012-10-05T17:54:29.700

node.js 的 homebrew 包现在再次包含 npm，所以当我错过了 homebrew 包关于首先删除独立版本的消息时，这发生在我身上。

假设像我一样，你已经通过尝试升级破坏了 node/npm，然后才知道`npm uninstall npm -g`，你可以`rm -rf /usr/local/lib/node_modules/npm`，然后`brew link node`. 这删除了*独立*的自托管 npm 包（而不是一个 brew 想要安装的包），并让 brew 符号链接它来自 Cellar 的捆绑包。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-10-09T09:27:47.110

```
sudo chown -R $(whoami) /usr/local 
```

正如 brew 站点故障排除中提到的那样，会做得很好

[https://github.com/Homebrew/homebrew/wiki/troubleshooting](https://github.com/Homebrew/homebrew/wiki/troubleshooting)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2012-09-26T17:31:51.363

您可能已经使用不同的方法安装了旧版本的 node.js，因此您需要手动删除以 brew 的方式获取的文件。

执行`brew link -n node`并手动删除那些冲突的文件和目录，然后重试`brew link node`。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2013-11-20T23:43:26.180

我有点晚了，对我有用的是：

```
* npm uninstall npm -g

* brew uninstall node

* brew install node

* sudo rm -rf /usr/local/lib/dtrace/node.d

* brew link node (caused error with permissions)

* sudo chmod 777 /usr/local/lib/dtrace/node.d

* brew link node 
```

在这个序列之后一切都成功了

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2016-05-08T17:24:54.413

尝试这个。从另一个参考中获得并为我工作。

```
brew uninstall node
brew update
brew upgrade
brew cleanup
brew install node
sudo chown -R $(whoami) /usr/local
brew link --overwrite node
brew postinstall node 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-10-09T10:10:25.287

将所有应用程序从旧 Mac 转移到新 Mac 后，我遇到了同样的问题。

我通过运行找到了解决方案`brew doctor`：

> 警告：发现损坏的符号链接。删除它们`brew prune`

运行后`brew prune`，Homebrew 终于回到了正轨:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-01-27T11:13:20.837

谢谢@suweller。

我解决了这个问题：

```
➜  bin git:(master) ✗ brew link node
Linking /usr/local/Cellar/node/0.10.25... Warning: Could not link node. Unlinking...

Error: Permission denied - /usr/local/lib/node_modules/npm 
```

我和 suweller 有同样的问题：

```
➜  bin git:(master) ✗ ls -la /usr/local/lib/ | grep node
drwxr-xr-x   3 24561  wheel   102 11 Okt  2012 node
drwxr-xr-x   3 24561  wheel   102 27 Jan 11:32 node_modules 
```

所以我通过以下方式解决了这个问题：

```
➜  bin git:(master) ✗ sudo chown $(users) /usr/local/lib/node_modules
➜  bin git:(master) ✗ sudo chown $(users) /usr/local/lib/node 
```

在我解决了这个问题之后，我又得到了一个：

```
➜  bin git:(master) ✗ brew link node
Linking /usr/local/Cellar/node/0.10.25... Warning: Could not link node. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/node/0.10.25/lib/dtrace/node.d
Target /usr/local/lib/dtrace/node.d already exists. You may need to delete it.
To force the link and overwrite all other conflicting files, do:
  brew link --overwrite formula_name

To list all files that would be deleted:
  brew link --overwrite --dry-run formula_name 
```

所以我通过以下方式删除了 node.d：

```
➜  bin git:(master) ✗ sudo rm /usr/local/lib/dtrace/node.d 
```

得到另一个权限错误：

```
➜  bin git:(master) ✗ brew link node
Linking /usr/local/Cellar/node/0.10.25... Warning: Could not link node. Unlinking...

Error: Could not symlink file: /usr/local/Cellar/node/0.10.25/lib/dtrace/node.d
/usr/local/lib/dtrace is not writable. You should change its permissions. 
```

并修复它：

```
➜  bin git:(master) ✗ sudo chown $(users) /usr/local/Cellar/node/0.10.25/lib/dtrace/node.d 
```

最后一切正常：

```
➜  bin git:(master) ✗ brew link node
Linking /usr/local/Cellar/node/0.10.25... 1225 symlinks created 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-09-18T14:50:36.797

我的问题有一个稍微不同的解决方案。brew 想要在其中创建符号链接的目录不属于当前用户。

`ls -la /usr/local/bin/lib/node | grep node`产生：

```
drwxr-xr-x    3 24561  wheel   102 May  4  2012 node
drwxr-xr-x    7 24561  wheel   238 Sep 18 16:37 node_modules 
```

对我来说，以下修复了它：

```
sudo chown $(users) /usr/local/bin/lib/node_modules
sudo chown $(users) /usr/local/bin/lib/node 
```

附言。`$(users)`将扩展为您的用户名，我会不遗余力地帮助懒惰的复制贴纸；）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-08-25T04:56:27.770

大多数 brew install 问题是由权限错误或先前安装了节点然后尝试通过 brew 安装它引起的。最终对我有用的解决方案是：

警告：这将卸载 nodejs（多个版本）谨慎使用：

1.  通过 brew 删除节点：

    brew卸载节点

2.  也通过武力做到了：

    brew卸载节点--force

3.  要使用脚本 Source: [Remove node](https://github.com/Homebrew/homebrew/issues/31777)：

    curl -O [https://raw.githubusercontent.com/DomT4/scripts/master/OSX_Node_Removal/terminatenode.sh](https://raw.githubusercontent.com/DomT4/scripts/master/OSX_Node_Removal/terminatenode.sh)

然后：

```
chmod +x /path/to/terminatenode.sh 
```

然后：

```
./terminatenode.sh . 
```

1.  然后确保执行以下命令：

    chown $USER /usr/local

2.  然后进行 brew update （继续这样做，直到所有内容都更新）：

    酿造更新

3.  清理 brew 并再次运行更新（可能是多余的）并运行医生以确保一切就绪：

    冲泡清理；酿造更新；冲泡医生

4.  最后通过 brew 安装节点（详细）：

    冲泡安装 -v 节点

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-07-10T13:32:39.520

最终答案：将该目录的所有者更改为您的任何人

```
sudo chown -R `whoami` /usr/local/include 
```

如果您运行 brew doctor ，这也是 brew 推荐的

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-07-31T08:38:41.577

安装时出现错误，无法链接节点和 /usr/local/include 不可写

**下面的解决方案对我有用：-** 首先创建包含文件夹，注意这需要 sudo 权限

```
cd /usr/local

sudo mkdir include

sudo chown -R $(whoami) $(brew --prefix)/*

brew link node 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-01T16:45:13.957

我还设法弄乱了我的 NPM 并在这些 Homebrew 版本之间安装了软件包，无论我取消链接/链接和卸载/安装节点多少次，它仍然无法正常工作。

事实证明，您必须从路径中删除 NPM，否则 Homebrew 将不会安装它：[https ://github.com/mxcl/homebrew/blob/master/Library/Formula/node.rb#L117](https://github.com/mxcl/homebrew/blob/master/Library/Formula/node.rb#L117)

希望这会帮助有同样问题的人，并节省那个小时左右我不得不花时间寻找问题......

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-10T21:45:41.030

我已经尝试了所有方法，但没有一个有效。最简单的方法是从[https://nodejs.org/en/download/重新安装节点](https://nodejs.org/en/download/)

只需下载`pkg`并安装它。现在我有一个工作`npm`和`node`一次。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-12-28T14:18:31.347

通过 Finder，删除此文件：

> /usr/local/lib/dtrace/node.d

在终端：

```
$ brew link --overwrite --dry-run node 
```

然后：

```
$ brew link node 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-12T20:05:18.407

不知道这是不是个好主意：在尝试了所有其他解决方案都没有成功后，我只是重命名了/usr/local/lib/dtrace，链接节点并再次重命名了目录。之后，节点按预期工作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-11-22T22:52:24.400

我为此苦苦挣扎了一段时间。（对我来说“npm uninstall npm -g”什么也没做）

我尝试了很多东西：

```
npm uninstall npm -g
brew uninstall node
brew install node 
```

当我尝试链接节点文件时，我仍然遇到一些问题并且出现错误

最后我尝试了这个

```
brew link --overwrite node 
```

这似乎已经解决了它。（它会覆盖所有冲突的文件并链接节点和 npm）

希望这可以帮助

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-02-15T03:29:01.293

我完全卸载了 brew 并重新开始，只是再次发现同样的问题。

Brew 似乎通过将所需的二进制文件符号链接到您的系统中来工作，而其他安装方法通常会复制文件。

我在这里找到了一组现有的节点库：

`/usr/local/include/node`

经过一番挠头后，我记得在这个旧版本的日期安装了节点，而且它不是通过 brew 安装的。

我手动删除了整个文件夹并成功链接了 npm。

这可以解释为什么使用 brew uninstall 甚至卸载 brew 本身都没有效果。

排名最高的答案非常简单，但我想我会添加我对为什么有必要的观察。

我猜测其他 brew 软件包的一系列问题可能是由旧的非 brew 软件包实例造成的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-09-11T04:02:04.757

一直在符号链接节点上破坏我的头......似乎没有任何工作......但最终有效的是设置正确的权限。这个 'sudo chown -R $(whoami) /usr/local' 为我完成了工作。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-02-06T00:47:02.090

我使用以下命令在 El Capitan 中修复了这个问题。老实说，不知道它做了什么，但我想我会分享，因为它解决了我的问题。

```
brew link --overwrite node 
```

* * *

## 回答 #21

> 赞同：-5
> 
> 时间：2012-09-28T14:48:30.183

您需要手动删除 npm 包。

第一个取消链接节点：`brew link -n node`

删除 npm 文件夹：`rm -R /usr/local/Cellar/node/0.8.10/lib/node_modules/npm`

再次链接：`brew link node`

会有一个软链接到 npm 的新位置

# java - 在 JSP 上获得双倍价值

> ID：12607158
> 
> 赞同：0
> 
> 时间：2012-09-26T17:26:22.407
> 
> 标签：java, jsp, jstl, double

我想在 JSP 上以秒为单位输出查询时间。在 struts Action 课我接下来做

```
long begin = System.currentTimeMillis();
/////////////////////////////////////
long end = System.currentTimeMillis();
double timeOfQuery = (end - begin)/1000;
request.setAttribute(TIME_OF_QUERY, timeOfQuery); 
```

在 JSP 上，我尝试以不同的方式在几秒钟内获得时间查询

```
Time of Query: ${timeOfQuery}
<br/>
<fmt:formatNumber value="${timeOfQuery}" minFractionDigits="3"/>
sec<br /> 
```

但在这两种情况下，${timeOfQuery} 的值都为 3.0。和 3.000 以防我想得到不舍入的值。但是找不到这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:28:18.083

您需要先将其转换为双精度，否则结果将是长格式。

```
double timeOfQuery = (double)(end - begin)/1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:47:21.363

你也可以使用，

双倍时间查询 = (结束 - 开始)/1000.00;

# javascript - JavaScript：将数组排序为有序列表

> ID：12607162
> 
> 赞同：-5
> 
> 时间：2012-09-26T17:26:38.990
> 
> 标签：javascript, html

在我的作业中，我必须创建一个数组，我做到了，但我不需要将它排序到有序列表中。我的教授没有给出任何示例代码，我在网上找不到任何可以帮助我放入有序列表的东西。帮助！

具体方向：在外部 JavaScript 文件中，创建一个数组，其中包含您最喜欢的书籍的标题（如果您愿意，您可以自己编写标题。）当页面加载时，使用 JavaScript 在有序列表中显示网页上的标题。由于图书列表是可变的，因此必须动态建立列表。使用文档对象的 write 方法或修改元素的 innerHTML 属性。

我有

```
var books = new Array();
books[0] = "Fifty Shades of Grey";
books[1] = "Twilight";
books[2] = "The Notebook";
books[3] = "Dear John";
books[4] = "Demon in my View";

var bookList = books.sort();
document.write(bookList); 
```

但这只能用逗号排序:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:32:41.263

您已经对数组进行了排序。只需将每本书打印成一个`<li>`并将 HTML 附加到您的列表中。

看到逗号的原因是对传递给它的对象`document.write(boooks)`的`document.write`调用，因为数组被实现为，默认分隔符是逗号。`toString``toString``array.join()`

```
<ol id="books">
</ol>​

// This looks much nicer a separate call for each array member
var books = [
   "Fifty Shades of Grey",
   "Twilight",
   "The Notebook"
];

var html = "";
for (var i =0; i < books.length; i++) {
    html += "<li>" + books[i]+ "</li>";
}
document.getElementById("books").innerHTML = html;​ 
```

**示例** [http://jsfiddle.net/nkQLM/1/](http://jsfiddle.net/nkQLM/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:43:09.157

只需将列表的 HTML 代码放在字符串周围：

```
document.write('<ol><li>'+bookList.join('</li><li>')+'</li></ol>'); 
```

有点超出了练习的范围，但是像这样将内容放入页面中假定字符串中没有在 HTML 代码中具有特殊含义的字符，`<`例如`>`或`&`。理想情况下，您将创建元素对象，将文本放入其中，然后将它们添加到文档树中。例如使用 jQuery 库：

在页面中放置一个元素：

```
<ol id="list"></ol> 
```

在就绪事件（或列表下方的脚本标记）中，将列表元素放入列表中：

```
$.each(booklist, function(){
  $('#list').append($('<li/>').text(this));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:37:53.400

不，它不是用逗号对数组进行排序。[演示](http://jsfiddle.net/2eVBZ/1/)

当您调用 `document.write(bookList);` bookList 时，通过在项目之间自动插入“，”将其转换为字符串

`join`您可以使用（在我的示例中使用空格） 替换逗号为

```
document.write(bookList.join("  ")) 
```

如果要生成订单列表，请使用以下代码

变量`html ="<ol><li>"+ bookList.join('</li><li>') + "</li></ol>";`

# vb.net - 高级 LINQ/Lambda 表达式

> ID：12607167
> 
> 赞同：0
> 
> 时间：2012-09-26T17:26:50.563
> 
> 标签：vb.net, linq, lambda

我有这个模型：

```
Public Class Tbl_Exercise

    <Key()> Public Property Exercise_ID() As Integer
    Public Property Exercise_Employee_ID() As Integer
    Public Property Exercise_Create_Date() As Date
    <ForeignKey("Tbl_Exercise_Type")> _
    Public Property Exercise_Type_ID() As Integer
    Public Property Exercise_Duration() As Integer

    Public Overridable Property Tbl_Exercise_Type As Tbl_Exercise_Type

End Class 
```

我需要得到`Exercise_Duration`一年中每周的总和。然后我需要检查一周的总和是否大于或等于`150`. 如果是，我需要 +1 另一个变量（计数）。目标是显示这个：

```
# of weeks you've reached 150: X out of Z 
```

（其中`X`周数大于或等于 150 且`Z`等于当年的总周数。）

**最终的**

```
 ' get number of weeks the exercise goal was reached (greater than or equal to the goal)
    Dim exerciseDb = New ExerciseDbContext
    Dim exercise = exerciseDb.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID = empId)

    Dim weeks = exercise.ToList.GroupBy(Function(x) CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(x.Exercise_Create_Date, CalendarWeekRule.FirstDay, DayOfWeek.Sunday))

    Dim totalWeeks = 0

    For Each week In weeks

        Dim sum = week.Sum(Function(x) x.Exercise_Duration)

        If sum > 150 Then

            totalWeeks += 1

        End If

    Next

    Debug.Print("over150: " + totalWeeks.ToString) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:45:57.470

```
using System.Globalization;

DateTimeFormatInfo dfi = DateTimeFormatInfo.CurrentInfo;
Calendar cal = dfi.Calendar;

var recap = 
    (from e in exercises
     group e by cal.GetWeekOfYear(e.Exercise_Create_Date, 
                                  dfi.CalendarWeekRule, 
                                  dfi.FirstDayOfWeek) 
     into g
     select new 
     { 
        g.Key, 
        Total = g.Sum(x => x.Exercise_Duration) 
     } 
     into p 
     where p.Total > 150
     select p)
    .Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:44:20.363

这是 C# 中的一个示例：

```
public class Exercise
{
    public DateTime CreateDate { get; set; }
    public int Duration { get; set; }
}

class Program
{
    static void Main()
    {
        Exercise[] ex = new Exercise[]
        {
            new Exercise { CreateDate = DateTime.Parse("1/1/2012"), Duration = 160 },
            new Exercise { CreateDate = DateTime.Parse("1/8/2012"), Duration = 160 },
            new Exercise { CreateDate = DateTime.Parse("1/15/2012"), Duration = 160 },
            new Exercise { CreateDate = DateTime.Parse("2/1/2012"), Duration = 100 },
            new Exercise { CreateDate = DateTime.Parse("3/1/2012"), Duration = 75 },
            new Exercise { CreateDate = DateTime.Parse("3/1/2012"), Duration = 80 }
        };

        var weeks = ex.GroupBy(x => CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(x.CreateDate, CalendarWeekRule.FirstDay, DayOfWeek.Sunday));
        int currentweek = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(DateTime.Now, CalendarWeekRule.FirstDay, DayOfWeek.Sunday);
        int over150 = weeks.Where(group => group.Sum(item => item.Duration) > 150).Count();
        Console.WriteLine(String.Format("# of weeks you've reached 150: {0} out of {1}", over150, currentweek));
    }

} 
```

# ios - 4英寸屏幕上的自动布局

> ID：12607171
> 
> 赞同：2
> 
> 时间：2012-09-26T17:27:15.703
> 
> 标签：ios, cocoa-touch, autolayout

我试图让这个视图使用自动布局来适应 3.5" 屏幕和 4" 屏幕。我开始觉得仅使用自动布局和 IB 是不可能的。

有什么见解吗？我已经尝试了几乎所有我认为有意义的约束组合（以及许多在黑暗中的刺伤），但没有运气。

这是它在 3.5 英寸屏幕上的外观（来自 IB，但在模拟器中看起来相同）

![在此处输入图像描述](../Images/2497ba446f0082d9dd15a58968df8413.png)

这是它在 4 英寸屏幕上的布局方式

![在此处输入图像描述](../Images/9a75f155ed3ea6876c52c7ea745b64fb.png)

以下是限制条件，如果有更好的方法来显示此信息，请告诉我。

![在此处输入图像描述](../Images/4099e93ab955843828de3f3356a95aad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:38:52.237

最简单（但不是最好）的方法是获取页面上的每个项目并添加以下约束

1.  “针”宽度
2.  “别针”高度
3.  引导空间到superview
4.  顶部空间到superview
5.  删除所有其他约束。

这应该以所有绝对值静态布置每一个。它应该可以正常工作....除非您旋转，但我不确定您是否支持横向。如果这样做，请将步骤 4 替换为“容器中的水平中心”约束。

边注。Xcode 设置了粉色约束，因为它缺少需要正确定位的东西（你不能删除这些）。蓝色的是您放入的。很多时候，当您放入蓝色的时，粉红色的会消失，因为您给它提供了缺少定位项目所需的 Xcode 数据。

# tfs - 从 C# 运行 TFS 查询替换 @Today 变量

> ID：12607182
> 
> 赞同：0
> 
> 时间：2012-09-26T17:27:59.503
> 
> 标签：tfs

我正在编写一个可以运行查询的 TFS 扩展。正如我所见，在使用 TFS API 运行查询之前，**必须替换**所有定义的变量。

我在[这里](http://msdn.microsoft.com/en-us/library/dd286638.aspx#qvariables)查看了默认的 TFS 变量，除了**@Today**变量，我可以理解所有变量。

**@Today**变量的主要问题是您可以向其添加运算符，例如：

[来源].[Microsoft.VSTS.Common.ActivatedDate] = @today - 7

我是否需要用当前日期（和时间？）替换变量并**让查询引擎进行数学运算**，还是应该在将其传递给查询引擎**之前进行数学运算？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:57:31.813

您不需要替换`@Today`任何内容，只需“按原样”运行查询即可。

例如在[Linqpad](http://linqpad.net)中运行以下命令：

```
using (var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri(CollectionAddress)))
{
    tfs.EnsureAuthenticated();
    var server = tfs.GetService<WorkItemStore>();

    server
    .Query("select * from WorkItems where System.CreatedDate > @today - 1")
    .Cast<WorkItem>()
    .Select(wi => new { wi.Id, wi.CreatedDate, })
    .Dump(); //This is a http://LinqPad.net extension method.
} 
```

返回自今天早上以来在我的 TFS 集合中记录的所有工作项。

工作项查询语言 (WIQL) 解析器必须为您处理这些事情。

# c# - 如何在 C# 中使用 VBFixedStringAttribute？

> ID：12607183
> 
> 赞同：4
> 
> 时间：2012-09-26T17:27:59.223
> 
> 标签：c#, string

在最近的一个问题[Import a VB6 structure into C#](https://stackoverflow.com/questions/12592509/import-a-vb6-structure-into-c-sharp)中，代码包含一个与此类似的固定长度字符串：

```
Name As String *10 
```

关于如何在 C# 中实现定长字符串的问题中有一些讨论，我提供了一种可能的方法（尽管我建议不要以任何形式使用定长字符串）。但是，其中一个答案提到了 VBFixedStringAttribute，没有进一步解释，我很想知道那是什么。然而，当我去寻找一些关于它的信息时，我在 MSDN 甚至在 Bing 搜索中都找不到。那么问题是“人们如何实际使用它？”

我找不到 C# 代码示例，虽然[MSDN 上有一个 VB.NET 的最小示例](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.vbfixedstringattribute%28v=vs.110%29.aspx)，但我的 VB.NET 技能不足以弄清楚它发生了什么，所以我可以将它翻译成 C#。

有人可以提供一点代码和解释VBFixedStringAttribute 发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:33:26.763

我认为从链接[VBFixedStringAttribute Class](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.vbfixedstringattribute%28v=vs.110%29.aspx)中需要注意的重要一点是

**VBFixedStringAttribute 是信息性的，不能用于将可变长度字符串转换为固定字符串。此属性的目的是修改识别 VBFixedStringAttribute 的方法或 API 调用如何使用结构和非局部变量中的字符串。请记住，此属性不会更改字符串本身的实际长度。**

从[VB.Net 到 C#](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

```
Structure Person
    Public ID As Integer 
    Public MonthlySalary As Decimal 
    Public LastReviewDate As Long
    <VBFixedString(15)> Public FirstName As String
    <VBFixedString(15)> Public LastName As String
    <VBFixedString(15)> Public Title As String
    <VBFixedString(150)> Public ReviewComments As String 
End Structure 
```

是相同的

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
struct Person
{
    public int ID;
    public decimal MonthlySalary;
    public long LastReviewDate;
    [VBFixedString(15)]
    public string FirstName;
    [VBFixedString(15)]
    public string LastName;
    [VBFixedString(15)]
    public string Title;
    [VBFixedString(150)]
    public string ReviewComments;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:47:34.100

任何属性都需要在其他地方调用 GetCustomAttributes() 来检索它的代码。该代码位于 Microsoft.VisualBasic 命名空间中，即旧版 VB6 I/O 支持方法所在的位置。特别是映射到静态 FileGet 和 FilePut 函数的 FileSystem.FileGetObject() 和 FilePutObject() 方法。直接从 C# 程序中使用这些方法没有问题，只需添加对 Microsoft.VisualBasic 程序集的引用即可。

来自 FileGetObject() MSDN 库文章：

> FileGetObject 读取结构的元素，就好像每个都是单独读取一样，除了元素之间没有填充。在磁盘上，用户定义类型的动态数组（用 FilePutObject 编写）以描述符为前缀，该描述符的长度等于 2 加上 8 乘以维数：2 + 8 * NumberOfDimensions。FileOpen 函数中 RecordLength 子句指定的记录长度必须大于或等于读取各个元素（包括任何数组及其描述符）所需的所有字节的总和。**VBFixedStringAttribute 类可应用于结构中的字符串字段，以指示写入磁盘时字符串的大小。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:33:46.270

`VBFixedStringAttribute`没什么特别的。它是这样定义的：

```
namespace Microsoft.VisualBasic
{
  [AttributeUsage(AttributeTargets.Field, AllowMultiple = false, Inherited = false)]
  public sealed class VBFixedStringAttribute : Attribute
  {
    private int m_Length;

    public int Length
    {
      get
      {
        return this.m_Length;
      }
    }

    public VBFixedStringAttribute(int Length)
    {
       if (Length < 1 || Length > (int) short.MaxValue)
            throw new ArgumentException(Utils.GetResourceString("Invalid_VBFixedString"));
       this.m_Length = Length;
    }
  }
} 
```

使用此属性的主要目的是用于反射目的。如果您正在使用反射并且正在搜索返回字符串的属性，则可以检查此属性以查看其是否为固定字符串，并且可以调用该`Length`属性以获取大小。即使在 VB.NET 中，该属性实际上也没有任何作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:45:46.577

为了使用 VB.NET 的语言特定功能（例如我的命名空间，或者在您的情况下 - VBFixedStringAttribute），您必须添加对 Microsoft.VisualBasic.dll 的引用

之后，您可以简单地将其用作任何其他属性。但请记住，此属性并不会真正影响字符串 - 与大多数属性一样，它只是向将要使用该字符串应具有特定长度的字段的任何人提供信息。所以记住这一点。如果我们已经讨论过字符串长度和验证，建议阅读代码合同：http: [//msdn.microsoft.com/en-us/library/dd264808.aspx](http://msdn.microsoft.com/en-us/library/dd264808.aspx)

# xml - 仅将少数类型从一个 xsd 导入到另一个

> ID：12607190
> 
> 赞同：2
> 
> 时间：2012-09-26T17:28:34.010
> 
> 标签：xml, xsd, schema

这里的问题是——是否可以从 xsd 导入类型的子集？

考虑以下示例：A.xsd 包含三种类型 a、b、c 而 B.xsd 包含两种类型 d、e。

当我在 B.xsd 中导入 A.xsd 时，如下所示：

```
<xs:import namespace="http://www.abc.com/schema/aaa" schemaLocation="A.xsd"/> 
```

我得到所有三种类型-a，b和c。我只想在 B.xsd 中输入 a 。我想在 xsd 中排除类型 b 和 c。有可能这样做吗？如果是，有哪些选择？

谢谢电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:49:07.777

不，你不能这样做。但你为什么想要？多余的未使用类型肯定没有害处吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:14:26.213

套用@Michael，`No you can't do it.`如果您对某些规范阅读感兴趣，[这](http://www.w3.org/TR/xmlschema-1/#layer2)就是描述的地方。

至于为什么有人要这样做，我可以举一个我经常看到的例子。我没有声称它适用于您的场景，但它应该可以帮助那些想知道为什么的人。

这一切都始于大多数人对模式的期望：准确验证他们想要的，仅此而已。然后假设如果 XML 是有效的模式，那么在后面的代码中就没有或几乎没有验证。这可能是人们可以看到这么多问题的原因，即使在 SO 上也是如此，这些问题涉及似乎推动人们想要使用 XSD 做的各种验证场景。

我经常遇到的是那些建立自己或参考（例如行业标准）这些精心设计的类型层次结构和替代组的人，他们意识到虽然在企业模型中使用它们是有意义的，但它关注端到端-最终，企业内的各个系统仅支持该类型层次结构的子集。

当 XSD 被编写为遵循*开放内容*的某些模式（通过抽象元素或抽象类型元素）时，包含这些额外类型或元素的模式将通过对 xsi:type 引用错误类型或使用替换组的错误成员。

为了说明，考虑一个基本抽象类型`Address`；具体地址：加拿大、美国、墨西哥、英国。例如，使用英国地址而不是加拿大/美国/墨西哥对于特定的商业服务是无效的。

在您的情况下，假设 type`a`对`b`and/or 没有依赖关系`c`，唯一的方法是将**A.xsd**拆分为**A'**和**A''**`a`，然后在**B.xsd中引用****A'**。有一些方法可以自动执行此操作，因此从维护角度来看，开销可能非常低；当通过自动 XML Schema Refactoring (XSR) 完成时，**A.xsd**的未来版本（我假设不是您的版本）可以轻松地与您的解决方案的其余部分集成。

# objective-c - ZXBinarizer.mm 中包含的文件中的非限定 ID

> ID：12607203
> 
> 赞同：-1
> 
> 时间：2012-09-26T17:29:29.150
> 
> 标签：objective-c, xcode, zxing, objective-c++

我创建了一个使用 ZXing 条码扫描库的 iPhone 项目。我使用 CocoaPods 添加了 ZXing，当我在我的系统上编译它时它可以完美运行（Mountain Lion with Xcode 4.5 (4G182)）。但是当我将它传递给负责为企业分发生成签名 ipa 的人时，据我所知，他也在使用相同版本的 Xcode，他在编译时看到以下解析错误：

```
Parse Issue
Expected unqualified-id in file included from /The/Absolute/Path/to/Pods/ZXing/objc/src/ZXing/ZXBinarizer.mm 
```

突出显示的行是：

```
#import <ZXing/ZXBinarizer.h>
        ^ 
```

我能够通过 WebEx 查看他的系统，并检查了标题搜索路径，并且显然通过 CocoaPods 配置的值确实解析为文件的实际位置。

当我单击问题导航器中的“解析问题”行时，它仅显示：

```
../../ZXing/objc/src/ZXing/ZXBinarizer.h
^ 
```

我在网上搜索了很多解决方案，我看到很多关于“预期的不合格 ID”的引用，但其中大部分是由于格式错误的代码。

关于Xcode还有很多我不明白的地方，所以我希望有人会告诉我，我在这里忽略了一些简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:22:10.967

发布指向正在编译的确切代码的链接会有所帮助。

您可以使用`clang -E`查看预处理后的代码（所有#imports 扩展）后的样子，然后`diff`将系统上的预处理输出与同事系统上相同命令的输出进行对比。

我确实在 [http://code.google.com/p/zxing/source/browse/trunk/objc/src/ZXing/ZXBinarizer.h](http://code.google.com/p/zxing/source/browse/trunk/objc/src/ZXing/ZXBinarizer.h) 中看到他们指的是`NSObject`没有首先#importing `<Foundation/Foundation.h>`。这是一个坏主意，但这可能不是您的实际问题。（如果它是罪魁祸首，我会期待不同的错误消息。）

您是否 100% 确定您的同事将 ZXBinarizer.mm 编译为 Objective-C++，而不是常规 C++？

您是否 100% 确定 Xcode 没有为您提供错误的任何特定文件和行信息？如果 Xcode 真的只是指向`#import`一行，那么您可以发布该行之前和之后的 10 行，以及 #imported 文件的前 10 行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:46:53.187

我最终不得不放弃使用 CocoaPods 进行依赖管理，而只是手动包含该项目。由于问题出在别人的机器上，但我自己运行良好，我无法确定真正的原因。在我直接将 ZXing 包含在我的项目中之后，他就能够编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T20:36:01.520

**smcmahon**，我在使用 CocoaPods 构建 iOS 项目时遇到了一个非常相似的问题，并看到了那些奇怪的错误，并且能够找出问题所在。确保 CocoaPods 创建的符号链接（如`ZXing/ZXBinarizer.h`）确实是符号链接，而不仅仅是其中包含文件路径的常规文本文件。

更详细的解释在我的博客中：[http ://www.egeek.me/2013/01/26/note-about-building-cocoapods-powered-ios-projects/](http://www.egeek.me/2013/01/26/note-about-building-cocoapods-powered-ios-projects/)

希望这会有所帮助。

# mysql - 需要 MySQL 选择帮助

> ID：12607207
> 
> 赞同：1
> 
> 时间：2012-09-26T17:29:55.820
> 
> 标签：mysql

```
+---+---+
| A | B |
+---+---+
| 1 | 1 |
+---+---+
| 1 | 2 |
+---+---+
| 1 | 3 |
+---+---+
| 1 | 4 |
+---+---+
| 2 | 2 |
+---+---+
| 2 | 4 |
+---+---+
| 3 | 2 |
+---+---+
| 4 | 3 |
+---+---+ 
```

给定 B 中的一组值，我如何从 A 中选择所有 B 值共享的值？例如：

*   值 1、2、3、4 应该返回 1
*   值 2, 4 应该返回 1, 2
*   值 1、2、3、4、5 应该返回一个空集

到目前为止，我有：

```
选择一个
从（表_A）
JOIN table_B ON A = A
其中 B = '1' 或 B = '2' 或 B = '3' 或 B = '4'
```

这显然与我的需要相去甚远。我真的很困惑，不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:47:19.357

```
select A 
from tableA
JOIN tableB ON tableA.A = tableB.A
where B in (1,2,3,4)
group by A
having count(distinct B) = 4 
```

子句中的数字`having`需要是子句中元素的数量`in`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:49:30.473

如果您可以保证这`A, B`是唯一的一组并且为此工作正常。

```
SELECT A 
FROM mytable
WHERE B in (1,2,3,4,5)
GROUP BY A
having count(*)=5; 
```

# heroku - 是否有可用的 nodejs/phantomjs Heroku buildpack？

> ID：12607209
> 
> 赞同：8
> 
> 时间：2012-09-26T17:30:08.573
> 
> 标签：heroku, phantomjs, buildpack

我想部署一个带有运行的 Procfile 的应用程序

```
web: node myapp.js 
```

myapp.js 用于`phantomjs-node`运行无头 webkit 的地方，将结果返回给浏览器请求。这可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T20:05:03.320

我也遇到了同样的问题，我修复它的方法是使用这个[“Multiple Buildpack” Buildpack](https://github.com/ddollar/heroku-buildpack-multi)。然后在我的 .buildpacks 文件中输入以下内容：

```
http://github.com/heroku/heroku-buildpack-nodejs.git
http://github.com/stomita/heroku-buildpack-phantomjs.git 
```

最后，您想将 PhantomJS 添加到路径中

```
heroku config:set PATH=$PATH:vendor/phantomjs/bin 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T18:26:38.047

这是一个 PhantomJS 构建包：[https ://github.com/stomita/heroku-buildpack-phantomjs](https://github.com/stomita/heroku-buildpack-phantomjs)

我还能够运行 PhamtomJS 的 x86_64 构建，只是停留在我的应用程序`vendor`目录中：

[http://phantomjs.org/download.html](http://phantomjs.org/download.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-25T10:54:51.007

Heroku Toolbelt[现在对多个 buildpacks 具有一流的支持](https://devcenter.heroku.com/changelog-items/653)，因此您可以通过以下方式获得有效的 Node 和 PhantomJS 设置：

`heroku buildpacks:set https://github.com/heroku/heroku-buildpack-nodejs.git`

`heroku buildpacks:add --index 1 https://github.com/stomita/heroku-buildpack-phantomjs.git`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T04:12:01.210

查看我修改过的 stomita 版本，其中包括准备运行的 NodeJS、PhantomJS 和 CasperJS。 [https://github.com/olragon/heroku-buildpack-nodejs](https://github.com/olragon/heroku-buildpack-nodejs)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-10T15:01:40.857

这是一个旧线程，但对于在这里登陆的任何人，我已经为 Node 和 Phantom 创建了一个工作 buildpack，它是官方 Heroku Node buildpack 的一个分支，其中包含来自[Beedesk 的自定义 Phantom buildpack](https://github.com/beedesk/heroku-buildpack-phantomjs)的构建脚本。这是[https://github.com/datamail/heroku-buildpack-nodejs-phantomjs](https://github.com/datamail/heroku-buildpack-nodejs-phantomjs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-20T06:48:01.607

我已经分叉了@stomita buildpack 以使用来自 phantomJS.org 的官方 linux 构建二进制文件。我对其进行了测试，它正在与heroku一起使用。

希望像我这样的安全偏执狂会发现它很有用。

[https://github.com/beedesk/heroku-buildpack-phantomjs](https://github.com/beedesk/heroku-buildpack-phantomjs)

我的包的缺点是，与 stomita 不同，它不包括`fontconfig`and `freetype`。但是，PhantomJS 应该在没有它们的情况下工作。

# common-lisp - 如何使用 drakma:http-request 和 flexistreams 下载和保存文件

> ID：12607210
> 
> 赞同：4
> 
> 时间：2012-09-26T17:30:09.193
> 
> 标签：common-lisp, binary-data

我正在尝试下载并保存 PDF，但在写入时出现 EOF 错误失败。这样做的正确方法是什么？

```
(with-open-file (file "/home/*/test.pdf"
                      :direction :io
                      :if-does-not-exist :create
                      :if-exists :supersede
                      :element-type '(unsigned-byte 8))
  (let ((input (drakma:http-request "http://www.fractalconcept.com/ex.pdf"
                                    :want-stream t)))
    (awhile (read-byte input)
      (write-byte it file))
    (close input))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T17:44:21.267

解决方案是我忘了使用的两个可选参数`read-byte`.

正确的方法是设置`eof-error-p`和：`eof-value``nil`

```
(with-open-file (file "/home/*/test.pdf"
                      :direction :output
                      :if-does-not-exist :create
                      :if-exists :supersede
                      :element-type '(unsigned-byte 8))
  (let ((input (drakma:http-request "http://www.fractalconcept.com/ex.pdf"
                                    :want-stream t)))
    (awhile (read-byte input nil nil)
      (write-byte it file))
    (close input))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:27:45.203

AWHILE 在包 ARNESI 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-07T20:33:06.990

```
(ql:quickload "trivial-download")
(trivial-download:download URL FILE) 
```

; 几乎完全按照您的代码执行的操作，但块更大，并且可以显示进度条。

; QuickLisp可以在[http://QuickLisp.org](http://QuickLisp.org)找到。

# powershell - 将 blob 文本上传到 Azure 的 PowerShell 错误：UploadText(string)

> ID：12607211
> 
> 赞同：4
> 
> 时间：2012-09-26T17:30:10.293
> 
> 标签：powershell, azure

我有一个 powershell 模块，它尝试将 blob 上传到 azure 存储。一切都检查出来，直到最后一行实际上传了 blob。

我收到以下错误：

```
Exception calling "UploadText" with "1" argument(s): 
"The specified resource does not exist."
At line:1 char:1
    + $blob.UploadText("asdasdfsdf")
    + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : StorageClientException 
```

我也尝试过使用 3 个参数的重载，但同样的问题也存在。

这是模块：

```
Function Add-BlobText
{
[CmdletBinding()]
param(
      [Parameter(Mandatory = $true,Position = 0)]
      [string]
      $StorageAccount,

      [Parameter(Mandatory = $true,Position = 1)]
      [string]
      $Container,

      [Parameter(Mandatory = $true,Position = 2)]
      [string]
      $BlobName,

      [Parameter(Mandatory = $true, ValueFromPipeline = $true)]
      [string]
      $BlobText
) #end param

Add-Type -Path "C:\Assemblies\Microsoft.WindowsAzure.StorageClient.dll"

Set-AzureSubscription -SubscriptionName "MySubName"

$secondaryKey = (Get-AzureStorageKey -StorageAccountName $storageAccount).Secondary

$creds = New-Object Microsoft.WindowsAzure.StorageCredentialsAccountAndKey($StorageAccount,$secondaryKey)

$cloudStorageAccount = New-Object Microsoft.WindowsAzure.CloudStorageAccount($creds, $true)

[Microsoft.WindowsAzure.StorageClient.CloudBlobClient]$cloudBlobClient = New-Object Microsoft.WindowsAzure.StorageClient.CloudBlobClient($cloudStorageAccount.BlobEndpoint)

[Microsoft.WindowsAzure.StorageClient.CloudBlobContainer]$blobContainer = $cloudBlobClient.GetContainerReference($Container)

[Microsoft.WindowsAzure.StorageClient.CloudBlob]$blob = $blobContainer.GetBlobReference($BlobName)

$blob.UploadText($BlobText)     

} #end Function Add-BlobText 
```

## ***更新：***

我已经能够将其作为二进制模块工作（如下）。如果有人能弄清楚为什么`UploadText()`在二进制模块中工作但在脚本模块中抛出异常，请告诉我。

```
[Cmdlet(VerbsCommon.Add, "BlobText")]
public class AddBlobText : PSCmdlet
{
    [Parameter(Mandatory = true, Position = 0)]
    public string StorageAccount { get; set; }

    [Parameter(Mandatory = true, Position = 1)]
    public string Container { get; set; }

    [Parameter(Mandatory = true, Position = 2)]
    public string BlobName { get; set; }

    [Parameter(Mandatory = true, ValueFromPipeline = true)]
    public string BlobText { get; set; }

    protected override void ProcessRecord()
    {
        PowerShell ps = PowerShell.Create();
        ps.AddScript("Set-AzureSubscription -SubscriptionName 'MySubName'");
        string keyScript = "( Get-AzureStorageKey -StorageAccountName " + StorageAccount + " ).Secondary";
        ps.AddScript(keyScript);
        Collection<PSObject> result = ps.Invoke();
        string secondaryKey = result[0].ToString();
        StorageCredentialsAccountAndKey credentials = new StorageCredentialsAccountAndKey(StorageAccount, secondaryKey);
        CloudStorageAccount storageAccount = new CloudStorageAccount(credentials, true);
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
        CloudBlobContainer container = blobClient.GetContainerReference(Container);
        var blob = container.GetBlobReference(BlobName);
        blob.UploadText(BlobText);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:55:13.433

这可能是因为您的容器不存在。您应该`CreateIfNotExist`在初始化容器后调用以确保它存在：

```
[Microsoft.WindowsAzure.StorageClient.CloudBlobContainer]$blobContainer = $cloudBlobClient.GetContainerReference($Container)
$blobContainer.CreateIfNotExist() <-- Here
[Microsoft.WindowsAzure.StorageClient.CloudBlob]$blob = $blobContainer.GetBlobReference($BlobName)
$blob.UploadText($BlobText) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T22:54:10.763

此错误非常模棱两可且具有误导性，但在某些情况下 Azure 存储可能会“混淆”。看看 Sandrino 的例子，特别是这一行，

```
[Microsoft.WindowsAzure.StorageClient.CloudBlob]$blob = $blobContainer.GetBlobReference($BlobName) 
```

并不是说 Sandrino 的答案是您的问题，而是在将 Url 或其他可能令人困惑的密钥字符串传递给 Azure 存储容器时会发生您遇到的异常。

不幸的是，我不是 Powershell 人，但这是一个复制示例，然后在 C# 中修复。

```
 public void Save(string objId, T obj)
    {
        CloudBlob blob = this.container.GetBlobReference(objId); // Problematic if a URL
        blob.Properties.ContentType = "application/json";

        var serialized = string.Empty;
        serialized = serializer.Serialize(obj);

        if (this.jsonpSupport)
        {
            serialized = this.container.Name + "Callback(" + serialized + ")";
        }
        blob.UploadText(serialized);
    } 
```

假设**this.container**是一个有效的 blob 存储实例，指向*[http://127.0.0.1:10000/devstoreaccount1/sggames](http://127.0.0.1:10000/devstoreaccount1/sggames)*或任何您拥有的有效容器。

并且**objId**是一个包含 URL 的密钥，例如*[https://www.google.com/accounts/o8/id?id=AItOawk4Dw9sLxSc-zmdWQHdZNcyzkTcvKUkhiE](https://www.google.com/accounts/o8/id?id=AItOawk4Dw9sLxSc-zmdWQHdZNcyzkTcvKUkhiE)* ...是的，这可能会发生，在我的情况下，这是来自的实际身份声明谷歌使用 Azure ACS。

在*GetBlobReference*调用之后，blob 实例已损坏，现在看起来混乱的 Uri -> *[https://www.google.com/accounts/o8/id?id=AItOawk4Dw9sLxSc-zmdWQHdZNcyzkTcvKUkhiE](https://www.google.com/accounts/o8/id?id=AItOawk4Dw9sLxSc-zmdWQHdZNcyzkTcvKUkhiE)*

不幸的是，简单地调用**$blobContainer.CreateIfNotExist()**的解决方案不是解决方案，也不会起作用。包含 Uri 结构的键将仅用于重新解释 blob 存储位置。

解决方法（除了daredev的更新）将是这样的：

```
if (Uri.IsWellFormedUriString(claim, UriKind.Absolute) && HttpUtility.ParseQueryString(claim).Count > 0)
{
    claim = HttpUtility.ParseQueryString(claim)[0];
} 
```

在我上面的方法中添加此代码以清理任何 Uri，但如果您需要维护完整密钥，则可以使用任何适当的方法，例如 Base64 编码 URL。

这是显示我描述的结果的前后图像。

**坏处：**

![注意错误的 URI](../Images/193309d59d28ee8f593df1c5fa798364.png) 注意错误的 URI

![这个错误的 URI 破坏了实际的存储 blob 位置](../Images/7b373311e1880631b9178dcdcbbb2bf8.png) 这个错误的 URI 破坏了实际的存储 blob 位置

![这是 dardev 的同一个例外](../Images/bce0bd4ef351d003453d3e40069082f9.png) 这是daredev的同一个例外

**好的：**

![新的擦洗键，注意它只是 URL 查询字符串上的值](../Images/7280cffc57b3490c3bfd0a4925b72f98.png) 新的擦洗键，注意它只是 URL 查询字符串上的值

![Azure 存储 URI 现在看起来不错](../Images/5d96f54191b44f38e4edd631888b6ec6.png) Azure 存储 URI 现在看起来不错

![尤里卡！](../Images/c8856845ac6648b3d7d0e08d25091313.png) 尤里卡！

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T23:57:49.520

这是我用来将文件上传到 Azure Blob 的 PowerShell 脚本：[上传到 Azure 存储](http://thecodegarden.net/uploading-to-azure-storage/)

```
$SubscriptionName = ""
$SubscriptionId = ""
$DestContainer = ""
$StorageAccountName = ""
Import-AzurePublishSettingsFile -PublishSettingsFile "<Location of the publishsettings-file>"
Set-AzureSubscription -SubscriptionId $SubscriptionId -CurrentStorageAccountName $StorageAccountName
Select-AzureSubscription -SubscriptionName $SubscriptionName
Set-AzureStorageBlobContent -File "<File you want to upload>" -Container $DestContainer 
```

# c++ - 使用 Concurrency::parallel_for() 的边际性能增益

> ID：12607216
> 
> 赞同：1
> 
> 时间：2012-09-26T17:30:23.523
> 
> 标签：c++, parallel-processing

在我的应用程序中，我有一个运行大约一千万个项目的 for 循环，如下所示：

```
int main(int argc, char* argv []) 
{
    unsigned int nNodes = 10000000;
    Node** nodeList = new Node* [nNodes];

    initialiseNodes(nodeList);  // nodes are initialised here

    for (unsigned int ii = 0l ii < nNodes; ++ii) 
        nodeList[ii]->update();

    showOutput(nodeList)       // show the output in some way
} 
```

我不会详细说明节点是如何被初始化或显示的。重要的是该`Node::update()`方法是一个小方法，独立于其他节点。因此，并行执行这个 for 循环将是非常有利的。因为这只是一件小事，所以这次我想远离 OpenCL/CUDA/OpenMP，所以我改用了 C++ `Concurrency::parallel_for`。那么代码如下所示：

```
#include <ppl.h>

int main(int argc, char* argv []) 
{
    unsigned int nNodes = 10000000;
    Node** nodeList = new Node* [nNodes];

    initialiseNodes(nodeList);  // nodes are initialised here

    Concurrency::parallel_for(unsigned int(0), nNodes, [&](unsigned int ii) {
            nodeList[ii]->update();
    });

    showOutput(nodeList)       // show the output in some way
} 
```

这确实加快了程序一点点，但我发现通常只有 20% 左右。坦率地说，我期待更多。有人可以告诉我这是否是使用时的典型加速因素`parallel_for`吗？或者有没有办法从中获得更多收益（无需切换到 GPU 实现）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:40:14.740

在一个问题上投入更多的核心并不总能带来改进。事实上，在最坏的情况下，它甚至会降低性能。从使用多核中受益取决于很多事情，例如所涉及的共享数据量。有些问题本质上是可并行的，有些则不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:26:53.920

我发现我认为对性能提升贡献最大的东西。当然，就像@anthony-burleigh 所说，任务必须是可并行的，并且共享数据的影响量也是如此。然而，我发现并行化方法的计算负载更为重要。大任务似乎比小任务提供更高的加速。

例如，在：

```
Concurrency::parallel_for(unsigned int(0), nNodes, [&](unsigned int ii) {
        nodeList[ii]->update();  // <-- very small task
}); 
```

我只有 1.2 的加速因子。但是，在繁重的任务中，例如：

```
Concurrency::parallel_for(unsigned int(0), nNodes, [&](unsigned int ii) {
        ray[ii]->recursiveRayTrace();  // <-- very heavy task
}); 
```

程序突然运行了 3 倍的速度。

我确信这一切都有更深层次的解释，但这是我通过反复试验发现的。

# apache - 在单独的文件中记录特定请求

> ID：12607219
> 
> 赞同：2
> 
> 时间：2012-09-26T17:30:33.260
> 
> 标签：apache, .htaccess

我想记录来自特定文件的请求，比如使用 .htaccess 将 collect.gif 记录到单独的日志文件中，这是可以实现的吗？

例如 [http://www.domain.com/collect.gif?user=1&page=sample](http://www.domain.com/collect.gif?user=1&page=sample)必须单独登录到文件 collect.log

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:34:36.773

这几乎完全在[Apache 文档的](http://httpd.apache.org/docs/2.2/)[`CustomLog`部分](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#customlog)中进行了介绍。在此处复制相关部分：

```
SetEnvIf Request_URI \.gif$ gif-image
CustomLog gif-requests.log common env=gif-image
CustomLog nongif-requests.log common env=!gif-image 
```

因此，对于您的情况，您只需更改`SetEnvIf`条件以匹配您所追求的请求：

```
SetEnvIf Request_URI collect\.gif$ gif-image
CustomLog gif-requests.log common env=gif-image
CustomLog nongif-requests.log common env=!gif-image 
```

# libgdx - 在 box2d 中拉四肢

> ID：12607220
> 
> 赞同：0
> 
> 时间：2012-09-26T17:30:34.420
> 
> 标签：libgdx, box2d

我正在使用 Box2d (libgdx) 与骑手一起实现 BMX 自行车。自行车是一个身体，骑手的每一个肢体都是一个身体。在跳跃过程中空降时，玩家应该能够控制的不是骑手而是自行车。由于骑手在车把和踏板处连接到自行车，四肢将跟随自行车，直到手臂/腿完全伸展，此时自行车的运动受到限制。

任何人都可以提出一种使用关节（可能）来实现这一目标的好方法吗？自行车和骑手都应该受到重力的影响，但骑手的身体不应因重力而倒塌。让四肢僵硬且不受重力影响（即它们的内部位置）是可以的，但四肢必须受到自行车的影响。优选地，骑车人四肢的内部位置应该受到影响，例如当自行车重重地靠在地面上时，但这是第二优先事项。

我可以在四肢关节上设置角度限制以防止其塌陷，但我想当我尝试移动自行车时它们不会让步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:07:29.563

如果四肢跟随自行车，手臂/腿如何才能完全伸展？

我认为首先你需要为肢体关节设置限制，以防止它们在剧烈碰撞中由内向外转动（例如肘关节向后转动）。

然后您可以确定每个关节处于静止位置的目标角度，并且每个时间步长，使用关节电机使关节移动到静止位置。如果你使这些关节马达的强度足以让骑手保持直立，但又不会太强，那么他应该会受到重着陆的影响。

# c# - 时间：2019-01-10 标签：c#conversionbigintdecimal

> ID：12607222
> 
> 赞同：0
> 
> 时间：2012-09-26T17:30:35.270
> 
> 标签：c#, decimal, bigint

我正在使用 sql server 2005 数据库开发 ac# 应用程序。什么是从数据库带到数据读取器的值转换为十进制的最佳方法，不知道来自基数的值是小数还是 bigint？

```
 if (dataReader.IsDBNull(0) == false) {
            PLAYER.PLAYER_ID = dataReader.GetDecimal(0);
        } 
```

在我的 PLAYER 对象中，PLAYER_ID 是十进制类型。

我使用两个不同的数据库，因此，来自基数的值可以是 bigint 或 decimal。如果这是小数，那没问题，但如果是大整数，我会收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:34:17.697

您应该能够使用[GetFieldType](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getfieldtype%28v=vs.100%29.aspx)方法来确定对象的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:35:11.687

您可以使用 GetFieldType 来确定类型

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getfieldtype.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getfieldtype.aspx)

```
Type type = dataReader.GetFieldType(0); 
```

然后，您可以使用适当的读取器方法来读取数据。

您可能希望避免为每一行调用 GetFieldType。在开始读取行之前调用它并设置一个标志来指示此特定查询返回的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:34:46.083

使用`Decimal.TryParse`：

```
decimal tempID;

Decimal.TryParse(dataReader[0], out tempID);
PLAYER.PLAYER_ID = tempID; 
```

它应该将值转换为小数，除非它为空。如果它为空，十进制将保持为 0。

# ruby-on-rails - Rails 3 best_in_place 编辑嵌套模型

> ID：12607225
> 
> 赞同：0
> 
> 时间：2012-09-26T17:30:47.043
> 
> 标签：ruby-on-rails, best-in-place, inplace-editing

给定

```
<% @incidents.each_with_index do |incident,i| %> 
```

我不知道如何在事件和父关联（例如 event.user 或 event.contact ）上放置编辑属性

这适用于例如：

```
best_in_place incident, :notes, type: :input,  nil: 'Add Note' 
```

但我不知道如何做 event.customer 来获取 Customer.all 的下拉列表（incident belongs_to :customer）

每次尝试都会遇到各种错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:40:50.020

如果我对您的理解正确，请在您的控制器的显示操作中或任何相关的地方：

```
@customer = Customer.all.map { |c| [c.id, c.customer_name] } # or whatever the customer name attribute is 
```

在您看来：

```
= best_in_place incident, :notes,  :type => :select, :collection => @customer 
```

这会产生[文档](https://github.com/bernat/best_in_place#select)说需要的 [[a,b], [c,d]] 格式。

Customer.pluck(:id, :name) 不会那么冗长，但这仅在撰写本文时出现在 Edge Rails 中（[链接到指南](http://edgeguides.rubyonrails.org/active_record_querying.html#pluck)）。

# jqplot - 数据点最大时不显示点标签

> ID：12607226
> 
> 赞同：2
> 
> 时间：2012-09-26T17:30:48.773
> 
> 标签：jqplot

我有以下图表：[http ://synicworld.com/media/graph.png](http://synicworld.com/media/graph.png)

有没有办法让点标签显示在具有最大值的条上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:03:25.667

```
pointLabels {
    edgeTolerance: 100
} 
```

看起来它只是我之前尝试过的 edgeTolerance，但值不够高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T14:58:31.803

pointLabels { edgeTolerance: -20 }

这将允许渲染点标签，即使它们太靠近边缘。负值表示图表上可能有重叠。

# c# - 使用 DataContractSerializer 序列化覆盖的属性

> ID：12607227
> 
> 赞同：3
> 
> 时间：2012-09-26T17:30:54.733
> 
> 标签：c#, .net, inheritance, datacontractserializer, composite

我在基础中有一个抽象属性，它被 2 个派生类覆盖。我希望为其中一个序列化属性，而不是另一个：

```
[Serializable]
[DataContract(IsReference = true)]
public abstract class Component
{
    public abstract bool IsSelected { get; set; }   
}

[Serializable]
[DataContract]
public class Leaf : Component
{
    [DataMember]
    public override bool IsSelected { get; set; }   // serialized
}

[Serializable]
[DataContract]
public class Composite : Component
{
    private List<Component> componentList = new List<Component>();

    /// <summary>
    /// Should *not* be serialized
    /// </summary>
    public override bool IsSelected
    {
        get
        {
            foreach (Component component in componentList)
            {
                if (!component.IsSelected)
                    return false;
            }

            return true;
        }
        set
        {
            foreach (Component component in componentList)
                component.IsSelected = value;
        }
    }
} 
```

我认为将 [DataMember] 属性放在 Leaf 的“IsSelected”属性上就足够了，但显然，连 Leaf 的属性都没有被序列化。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T18:20:12.703

我在 Reflector 中对此进行了深入研究，查看了 4.0.0.0 版本`System.Runtime.Serialization`，似乎生成序列化合同的代码明确忽略了从某些基类覆盖的属性。因此，在您的示例中，运行时明确且故意不序列化`Leaf.IsSelected`。

我怀疑这样做是因为他们不想处理检查基类（或某些中间祖先类）是否也将序列化属性。如果是这种情况，您最终可能会序列化多个属性值，这可能是不可取的。

与往常一样，我们不应该过分依赖 Reflector 显示的内容，因为代码总是可以更改的，但至少我们知道它是故意这样做的。

如果其他人在看，代码就是`ImportDataMembers`.`ClassDataContract.ClassDataContractCriticalHelper`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:35:39.303

您还需要在**Composite**和**Component**类的**IsSelected**`[DataMember]`属性上添加该属性。试试看。

# visual-studio - Visual Studio 2012 如何在 ScriptManager 中引用 jquery？

> ID：12607230
> 
> 赞同：1
> 
> 时间：2012-09-26T17:31:11.090
> 
> 标签：visual-studio, visual-studio-2012, scriptmanager

我在 Visual Studios 2012 中创建了一个新的 Azure 云服务 Web 角色。包含在 Site.Master 页面中的是 ScriptManager：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    <Scripts>
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" />
    </Scripts>
</asp:ScriptManager> 
```

解决方案中还有一个脚本文件夹，其中包含：

```
_references.js
jquery-1.7.1.intellisense.js
jquery-1.7.1.js
jquery-1.7.1.min.js
jquery-ui-1.8.20.js
jquery-ui-1.8.20.min.js
modernizer-2.5.3.js 
```

到目前为止，我还无法弄清楚 ScriptManager 如何仅根据提供的名称来引用 jquery 和 jquery-ui。任何人都可以提供有关此参考的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:42:59.157

Visual Studio 2012 附带的默认包注册名称 jquery 和 jquery.ui.combined 与 ScriptManager。脚本管理器然后参考 CDN 中的实际 jquery 脚本替换它[如果您设置 EnableCDN=true]。如果您不设置它，它将从您提到的目录中获取。

您可以在此处找到更多详细信息[http://blogs.msdn.com/b/pranav_rastogi/archive/2012/09/21/asp-net-4-5-scriptmanager-improvements-in-webforms.aspx](http://blogs.msdn.com/b/pranav_rastogi/archive/2012/09/21/asp-net-4-5-scriptmanager-improvements-in-webforms.aspx)

如果您查看网页的源代码，您将看到对脚本的引用。

# css - CSS 瞄准任何比智能手机更大的东西

> ID：12607239
> 
> 赞同：0
> 
> 时间：2012-09-26T17:32:01.300
> 
> 标签：css, mobile

Stack Overflow 上针对特定手机有几个问题，但我想知道是否有可信的媒体查询可以针对***比手持智能手机更大的东西***。

排除：

*   iPhone 3G、3GS、4、4S、5；安卓手机；视窗手机；等等

包括：

*   iPad 和其他平板电脑；台式电脑

这个规则可靠吗？

```
@media only screen and (min-device-width: 481px) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:41:35.567

这会更好

```
@media only screen and (min-width: 600px) {

} 
```

因为有很多有`540px`宽度的手持设备，但`600px`我知道没有平板电脑

# python - python pip：根本找不到现有包的发行版

> ID：12607241
> 
> 赞同：14
> 
> 时间：2012-09-26T17:32:08.367
> 
> 标签：python, pip

我正在尝试将`ScientificPython`软件包安装到 Fedora 14 x64 系统上新安装的 Python 发行版中。Pip`ScientificPython`在存储库中找到但不想安装它

```
[bin]$ sudo ./python2.7 ./pip search ScientificPython
ScientificPython          - Various Python modules for scientific computing

[bin]$ sudo ./python2.7 ./pip install ScientificPython
Downloading/unpacking ScientificPython
  Could not find any downloads that satisfy the requirement ScientificPython
No distributions at all found for ScientificPython
Storing complete log in /tmp/tmpDLdmjy 
```

为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T18:22:23.080

看看[pypi 上的 ScientificPython 条目](http://pypi.python.org/pypi/ScientificPython)，你会发现它只包含一个指向他们项目页面的链接，没有可下载的包或鸡蛋（pip 需要从中安装）。这就是 pip 告诉你的原因`Could not find any downloads`。您必须按照他们的说明手动安装。

底线：如果`pip search`列出了一个给定的包，并不一定意味着你可以`pip install`（幸运的是，在大多数情况下你可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T15:26:31.260

这可能是由于安装包中的文件未经验证。尝试使用 **--allow-unverified**

> pip install package_name==version --allow-unverified package_name

**例如** pip install django-ajax-filtered-fields==0.5 --allow-unverified django-ajax-filtered-fields

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-26T20:53:26.433

包名其实是scipy，不是ScientificPython

尝试：

```
pip install scipy 
```

# git - 对分支感到困惑

> ID：12607250
> 
> 赞同：1
> 
> 时间：2012-09-26T17:32:51.253
> 
> 标签：git, logic

[从对 git 分支和主交互](https://stackoverflow.com/questions/12144844/)的困惑中重新发布。
我还是不明白！
我有 1 个名为“miscChanges”的分支，其中我对某些页面进行了更改（我尚未提交）。现在，当我尝试签出“主”分支时，我收到消息“...文件将被覆盖查看。呸呸呸'。
我不想在“miscChanges”分支上提交我的更改，因为我还没有完成。
在这种情况下进行的合乎逻辑的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:41:54.567

您需要先提交更改。尝试`git add -A`（添加当前目录中的所有更改，包括新文件和已删除文件），然后`git commit`.

基本上，git 会警告您，当您签出 master 分支时，它将覆盖您工作目录中的所有文件——包括您未提交的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:49:40.613

分支只是一个指向**现有**提交 ID 的指针（引用）。更改当前分支意味着选择不同的指针。

这意味着未提交的更改不会保留在前一个分支上，因为没有地方存储这些更改。因此，在更改分支时，git 会尝试将这些更改保留在新的代码库中。更具体地说，工作树中与旧分支上最后提交状态不同的任何文件将在签出后保留在工作树中。但是如果这些文件在旧分支和新分支之间存在差异，git 会抱怨不兼容的更改：它不能将修改后的文件保留在工作树中，因为原始文件不一样。

有三种方法可以解决这个问题：

1.  做一个临时提交，你稍后会丢弃它：
    1.  `git commit -a -m tmp`
    2.  `git checkout master`
    3.  ...做你的主人的工作...
    4.  `git checkout miscChanges`
    5.  `git reset HEAD~`
2.  做一个临时提交，你稍后会改进：
    1.  `git commit -a -m tmp`
    2.  `git checkout master`
    3.  ...做你的主人的工作...
    4.  `git checkout miscChanges`
    5.  ...在 miscChanges 分支上做更多的工作...
    6.  `git commit --amend`
3.  使用[存储](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)：
    1.  `git stash save 'work in progress on branch miscChanges'`
    2.  `git checkout master`
    3.  ...做你的主人的工作...
    4.  `git checkout miscChanges`
    5.  `git stash pop`

如果您保存了多个存储，您可以查找应该弹出哪一个：

```
git stash list
# Find the right stash number, in the form stash@{N}
git stash pop stash@{3} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:43:07.383

首先，回答您收到错误消息的原因 - 当您在 git 中签出分支时，它会更改磁盘上的文件以匹配分支的状态。那会覆盖您正在处理的内容，因此它会警告您。

其次，回答你应该怎么做——如果你赶时间，你可以做“git stash”，它会在你查看另一个分支时临时保存你的更改。（你以后必须用谷歌搜索如何取消存储。）更完整的处理方法是创建一个新分支（“git checkout -b new_branch”，如果我记得的话）并在你查看 master 时提交你的更改. 您始终可以将该临时分支拉回或合并回 miscChanges 并删除临时分支。

还要记住 git 是分布式源代码控制。在您推送之前，其他任何人都不会看到您对 miscChanges 分支的更改，因此从技术上讲，您可以提交不完整的内容并在推送之前对其进行修复，尽管您的历史记录中会出现您的功能不完整的状态。如果您回到 miscChanges 并在完成该功能时执行“git commit --amend ...”，您可能能够避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:49:50.067

如果您还不想提交更改，则必须对它们做一些事情。你可以做一个`git stash`，改变分支，做你需要的任何事情，然后改回你的“miscChanges”分支并做`git stash apply`

# javascript - 如何在 indexedDB 中存储 JSON 对象？

> ID：12607251
> 
> 赞同：6
> 
> 时间：2012-09-26T17:33:01.967
> 
> 标签：javascript, json, indexeddb

我的返回 json 文件如下所示：

```
var data = [{"col1":"value1","col2":"value1","col3":"value1"},{"col1":"value2","col2":"value2","col3":"value2"},{"col1":"value3","col2":"value3","col3":"value3"}]; 
```

没有 JSON.stringify 数据看起来像这样：

[对象对象],[对象对象],[对象对象]

但有了它，result.length 不是 5，而是字符串的字符总数，这样我就不能循环了

```
var result = JSON.stringify(data);
for(i=0; i<result.length; i++){
var transaction = db.transaction([STORE], IDBTransaction.READ_WRITE);
var put = transaction.objectStore(STORE).put(result);
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:37:18.350

```
var data = [{"col1":"value1","col2":"value1","col3":"value1"},{"col1":"value2","col2":"value2","col3":"value2"},{"col1":"value3","col2":"value3","col3":"value3"}]; 
```

如果您尝试存储每个 OBJECT，则不要对其进行字符串化或任何其他操作，它已经是完美的形式。更改`for()`循环以循环遍历数据对象。

**出于性能原因， Kristof Degrave**有一个很好的观点，即把这些放在实际的 for 循环之外。

```
 var transaction = db.transaction([STORE], IDBTransaction.READ_WRITE); 
    var objstore = transaction.objectStore(STORE); 

    for (i = 0; i < data.length; i++) { 
        objstore.put(data[i]);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-19T07:08:26.853

对于新访问者，建议进行一些修改：IDBTransaction.READ_WRITE 已被弃用，因此请改用“readwrite”。

资源：[https](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB) ://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB 参考：

> 较旧的实验性实现使用已弃用的常量 IDBTransaction.READ_WRITE 而不是“读写”。

此外，要减少 loc（我最喜欢），请使用：

```
var objstore = db.transaction([STORE], "readwrite").objectStore(STORE); 
for (i = 0; i < data.length; i++) { 
    objstore.put(data[i]);
} 
```

# ruby - aws-s3 gem 的引擎存在命名空间问题

> ID：12607252
> 
> 赞同：0
> 
> 时间：2012-09-26T17:33:24.777
> 
> 标签：ruby, ruby-on-rails-3, namespaces, rails-engines

我正在为我们的一个项目开发 Rails 3 引擎。为了调试问题，我将 gem 声明移到了一条`:path`语句中，正如[边缘指南所建议的那样](http://edgeguides.rubyonrails.org/engines.html#inside-an-engine)。在宝石的要求之后出现两颗宝石`aws-s3`。现在，当我尝试使用 启动开发服务器时`rails s`，出现如下错误`aws-s3`：

> /Users/me/.rvm/gems/ruby-1.9.3-p194@xproject/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:212:in `const_missing_from_s3_library'：未初始化的常量 MyEngineNamespace ::引擎（名称错误）

S3 gem 中的相关代码如下所示：

```
def const_missing_from_s3_library(sym)
  if sym.to_s =~ /^(\w+)(Bucket|S3Object)$/
    const = const_set(sym, Class.new(AWS::S3.const_get($2)))
    const.current_bucket = $1.underscore
    const
  else
    const_missing_not_from_s3_library(sym)
  end
end
alias_method :const_missing_not_from_s3_library, :const_missing
alias_method :const_missing, :const_missing_from_s3_library 
```

但是我完全不确定为什么要调用此代码；引擎不会（故意）接触 S3。所以……嗯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:45:16.030

不是 100% 回答您的问题，但它会在某种程度上解决您的问题：

建议使用[雾而不是 aws-s3，根据](https://github.com/fog/fog)[Sidekiq wiki](https://github.com/mperham/sidekiq/wiki/Problems-and-Troubleshooting)，这不是线程安全的。Fog 在访问和积极支持哪些云服务方面更加灵活。[这是Fog 和 S3 入门](https://github.com/fog/fog/blob/master/docs/storage/index.markdown)的好指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:13:01.570

啊。弄清楚了。问题不是 S3（正如我所怀疑的那样），而是我将引擎`Gemfile`包含在 .

这有效：

```
gem "my_engine", :path => "/Users/me/Projects/my-engine", :require => 'my-engine' 
```

这不会：

```
gem "my_engine", :path => "/Users/me/Projects/my-engine" 
```

该`:require`参数似乎在设置常量时很有用。

# php - php 错误日志，如何删除重复项/查找唯一错误

> ID：12607254
> 
> 赞同：2
> 
> 时间：2012-09-26T17:33:26.607
> 
> 标签：php

有没有办法只在错误日志中搜索唯一错误。原因是我有很多重复的错误，不想错过罕见的错误。

我将如何编写一个自定义脚本来解析错误日志，并过滤掉除日期时间之外的所有重复项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T09:54:51.467

分析`/var/log/apache2/error.log`使用

```
sed 's^\[.*\]^^g' /var/log/apache2/error.log | sort | uniq -c 
```

这会

1.  在每行的开头剪切日期，例如：

    [2012 年 8 月 28 日 11:20:24 UTC] PHP 通知：未定义索引：在线测试 /var/www/...

2.  按数值排序

3.  查找**并计算**唯一行

> 来源：[strictcoder.blogspot.de](http://strictcoder.blogspot.de/2012/02/linux-count-unique-error-log-entries.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:11:39.887

在 php.ini 中设置或添加到您的 php 脚本中[`ignore-repeated-errors`](http://php.net/manual/de/errorfunc.configuration.php#ini.ignore-repeated-errors)`= On``ini_set('ignore-repeated-errors', 1);`

这将阻止 php 多次记录错误，即由同一脚本中的同一行引起的错误消息。

# jquery - 使向下滑动菜单也滑动父母

> ID：12607255
> 
> 赞同：0
> 
> 时间：2012-09-26T17:33:28.137
> 
> 标签：jquery, drop-down-menu

因此，我正在尝试创建一个向下滑动的菜单，其中父项与该项一起向下滑动。我想这样做的唯一方法是将主菜单项放在底部，将子项放在顶部。这不是首选，但它似乎有效。

现在的问题是，如果将鼠标悬停在错误的部分上，菜单似乎会跳动/不流畅。有没有办法让主菜单项在顶部并阻止它如此跳跃？

一个 [jsFiddle](http://jsfiddle.net/BandonRandon/7gCZB/4/)在这里

这是HTML：

```
<ul>
    <ul>
        <li> Menu 1 </li>
        <li> Menu 2 </li>
    </ul>
        <li> Main Menu Item </li>
</ul>
<ul>
    <ul>
        <li> Menu 1 </li>
        <li> Menu 2 </li>
    </ul>
        <li> Main Menu Item 2 </li>
</ul> 
```

和CSS：

```
ul ul li {
    display: none;
}

ul {
    display:inline;
    float:left;
    width:150px;
} 
```

最后是 jQuery

```
$("ul").hover(

function() {
    $(this).find('ul li').stop(true, true).slideDown();
}, function() {
    $(this).find('ul li').stop(true, true).slideUp();
}

); 
```

**编辑**

因此，其中一个问题似乎是无效标记。建议只使用 Javascript 将第一个 li 标签移动到该部分的底部。我有一个例子，它只适用于第一个 li 的点击。可以在[此处](http://jsfiddle.net/BandonRandon/EQSwT/1/)找到该小提琴理想情况下，我希望它无需单击并具有有效标记即可工作。

这是更新的JS

```
 $("ul li:first").click(function() {

  $(this).parent().append($(this));

});

$("ul").hoverIntent(
function() {
    $(this).find('ul li').stop(true, true).slideDown();
}, function() {
     $(this).find('ul li').stop(true, true).slideUp();
}

);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:56:24.260

试试这个解决方案

***HTML***

```
<nav id="verticalmenu">          
<ul>
  <li> 
      <ul class="down">
        <li><a href="#">Menu#1-1</a></li>
        <li><a href="#">Menu#1-2</a></li>
        <li><a href="#">Menu#1-3</a></li>
      </ul>
      <a class="slide" href="#">Menu#1</a>
  </li>
    <li>
       <ul class="down">
        <li><a href="#">Menu#2-1</a></li>
        <li><a href="#">Menu#2-2</a></li>
        <li><a href="#">Menu#2-3</a></li>
      </ul>
        <a class="slide" href="#">Menu#2</a>
    </li>
</ul> 
```

***JS***

```
 var nav = $("#verticalmenu");
    //add hovers to submenu parents
    nav.find("li").each(function() {
        var li_ul = $(this).find("ul");
            li_ul.hide();
            //show subnav on hover
            $(this).mouseenter(function() {
                li_ul.stop(true, true).slideDown();
            });
    });

    nav.find("li").each(function() {
        var li_ul = $(this).find("ul");
            li_ul.hide();
            //show subnav on hover
            $(this).mouseleave(function() {
                li_ul.stop(true, true).slideUp();
            });
    }); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:00:33.803

似乎获胜者是这个 JavaScript

```
$("ul li:first-child").not("ul li li").hover(function() {

  $(this).parent().append($(this));

});   

$("ul").hoverIntent(
function() {
    $(this).find('ul li').stop(true, true).slideDown();
}, function() {
     $(this).find('ul li').stop(true, true).slideUp();
}

); 
```

# ios - 如何在没有 iPhone 的情况下调试 iPhone 应用程序？

> ID：12607257
> 
> 赞同：0
> 
> 时间：2012-09-26T17:33:31.270
> 
> 标签：ios, iphone, xcode, ipad

好的，我制作了一个非常简单的 iPhone 应用程序，我使用 iOS 5 和 iOS 6 模拟器对 iPhone 和 iPad 进行了测试，一切正常！但是当我提交审核时，他们拒绝了它，因为它在 iPhone 4 和 iPad 3 上崩溃，有没有办法在不购买 iPhone 5 和 iPad 3 的情况下解决这个问题？他们确实向我发送了崩溃文件，但我不知道如何阅读它们。任何建议表示赞赏！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:41:54.133

你没有。模拟器不够准确，无法调试某些问题（模拟器仅运行 x86 代码，而不是设备呈现的更受限制的环境中的实际 ARM 代码）。

因此，您可能需要购买、乞求或借用一两台合适的 iOS 设备进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:46:37.637

您必须学习如何阅读崩溃文件。尝试将它们拖到管理器中开始。

设备上的某些方面有所不同，您应该至少有一台 iOS 设备进行测试。iPad 是一个不错的选择，因为您可以同时测试 iPhone 和 iPad 应用程序。在任何一台设备上运行都会消除所有可能发生的许多错误 - 例如，如果您没有意识到 iPhone 文件系统是区分大小写的，但 Mac（以及因此模拟器）文件系统不是。

即使是较旧的 iPad 2 翻新机也可以进行此类测试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:36:22.480

在没有实际拥有该设备的情况下，很难在特定设备上调试问题。我知道我所在地区有一些苹果商店会为此目的租用设备很短的时间。你可以四处看看，看看能不能找到一个借或租一两天。

# cakephp - 身份验证登录操作未在 CakePHP 中生成查询

> ID：12607258
> 
> 赞同：3
> 
> 时间：2012-09-26T17:33:32.777
> 
> 标签：cakephp, authentication, login

我有一个简单的登录表单，就像蛋糕博客教程一样。当我使用“UsersController”和“User”模型命名约定，在调试中传递权限查询时，它就像一个魅力。

但是当我将其更改为其他名称时，在我的情况下为 Alunos，它不会生成任何查询并给我“不正确的用户名和/或密码。”。

我的登录.ctp

```
<H1> Login </H1>

<?php
    debug($this->data);
    echo $this->Form->create('Aluno', array('action' => 'login'));
    echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->end('Login');
?> 
```

我的应用控制器

```
<?php

class AppController extends Controller {

    public $components = array (
        'Session',
        'Auth' => array (
            'loginAction' => array ('controller'=>'alunos', 'action'=>'login'),
            'loginRedirect'=>array ('controller'=>'alunos', 'action'=>'inicio'),
            'logoutRedirect'=>array ('controller'=>'alunos', 'action'=>'index'),
            'authError'=>"Ops, você não está autorizado a fazer isso.",
            'authorize'=>array('Controller'),
        )
    );

    public function isAuthorized($user) {
        return true;
    }

    public function beforeFilter() {
        $this->Auth->allow('index', 'add');
        $this->set('logged_in', $this->Auth->loggedIn());
        $this->set('current_user', $this->Auth->user());

    }

} 
```

还有我的“AlunosController.php”（看到它不是USERSController，就像普通代码一样）

```
<?php

class AlunosController extends AppController {  

    public $name = 'Alunos';    

    public function beforeFilter(){
        parent::beforeFilter();
    }

    public function index() {}

    public function login(){
        debug($this->Auth->login());
        if ($this->request->is('post')) {
            if ($this->Auth->login()){
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash('Incorrect username and/or password.');
            }
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    }

    public function add() {
        debug($this->Auth->login());
            if($this->request->is('post')) { 
                if ($this->Aluno->save($this->request->data)) {
                    $this->Session->setFlash('Cadastrado.');
                }else {
                    $this->Session->setFlash('Falha no cadastro.');
                }
            }   
    }

    public function inicio() {
        debug($this->Auth->login());
    }

}

?> 
```

我在 login.ctp 中的 debug($this->data) 结果：

```
array(
    'Aluno' => array(
        'password' => '*****',
        'username' => 'anyuser'
    )
) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:45:49.747

将此代码添加到您的应用控制器：

```
function beforeFilter() {

    $this->Auth->userModel = 'Aluno'; <-- Should be singular. My mistake
    parent::beforeFilter();

} 
```

**Cake2 的更新**

```
// Place in beforeFilter() of AppController.php

$this->Auth->authenticate = array(
    'Form' => array(
        'userModel' => 'Aluno'
    )
); 
```

您的问题是因为您没有告诉 cake 用户表使用什么。这就是为什么您的第一个实例有效，而第二个无效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T11:15:20.453

改变这个：

```
echo $this->Form->create('Aluno', array('action' => 'login')); 
```

至：

```
echo $this->Form->create('Alunos', array('url' => 'alunos/login')); 
```

调用 Alunos Controller 的 login() 方法。

# javascript - Youtube iframe 播放器不使用 Youtube 的 Player API 嵌入

> ID：12607261
> 
> 赞同：0
> 
> 时间：2012-09-26T17:33:48.550
> 
> 标签：javascript, html, youtube, youtube-api, youtube-javascript-api

我指的是 Youtube 提供的[示例代码](https://developers.google.com/youtube/iframe_api_reference#Examples)，如下所示。示例代码应该是......

> 下面的示例 HTML 页面创建了一个嵌入式播放器，它将加载一个视频，播放 6 秒钟，然后停止播放。

```
<!DOCTYPE html>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'u1zgFlCw8Aw',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4\. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      // 5\. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
      }
      function stopVideo() {
        player.stopVideo();
      }
    </script>
  </body>
</html> 
```

这是上面代码的[jsFiddle 链接](http://jsfiddle.net/jasonkim/gDMQY/)。

你能说出为什么这不起作用吗？

# mysql - PDO - 内联 SQL 或存储过程

> ID：12607264
> 
> 赞同：1
> 
> 时间：2012-09-26T17:33:58.980
> 
> 标签：mysql

我正在使用[http://www.yiiframework.com/doc/guide/1.1/en/database.dao](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)

数据访问对象 (DAO) 使用 PDO。

不确定哪个最好

选项一 - 内联代码

```
 $alias_name =Utils::checkEnteredData($alias_name);
    $connection = Yii::app()->db;       
    $sql_images = $connection->createCommand("SELECT ig.id, 
        ig.is_flickr,                     
        ig.main_image,
        ig.author_id,
        ig.description,
        ig.latitude, 
        ig.longitude,
        ig.is_youtube, 
        ig.author_id,       
        ig.flickr_youtube_id, 
        ig.thumbnail_image_medium, 
        ig.thumbnail_image, 
        ig.alias_title,
                    ig.image_hits, 
                    ig.title, 
                    ig.created_on,
        a.title,
        a.alias_title as album_alias_title,
        igo.realname, 
        igo.username,
                    igo.location from image_gallery ig 
                    JOIN album a ON ig.album_id = a.id 
                    LEFT JOIN image_gallery_owner igo ON ig.author_id = igo.id  
                    WHERE ig.approved =:approved AND ig.visible=:visible AND ig.alias_title =:alias_title LIMIT 1");
    $sql_images->bindValues(array(':alias_title'=>$alias_name, ':approved'=>'Yes', ':visible'=>'1'));               
    $image = $sql_images->queryAll(); 
```

选项 2 存储过程：

```
 public function getImageFromAliasTitle($alias_title)  
        {     
            $alias_title =Utils::checkEnteredData($alias_title);  
            $connection = Yii::app()->db;   
            $command = $connection->createCommand("CALL getSingleImage(:alias_title)");   
            $command->bindParam(":alias_title",$alias_title,PDO::PARAM_STR);  
            $image = $command->queryAll();  
            return $image;  
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:22:21.863

这取决于，但我仍然建议对您的情况使用存储过程。主要原因是（取自[先前的答案](https://stackoverflow.com/a/8559740/1190388)）：

1.  存储过程的好处是不需要授予用户直接表访问权限。

2.  由于每个非参数化查询都是与 SQL Server 不同的新查询，因此对于每个查询，它必须经过确定执行计划的所有步骤（因此浪费时间 - 并且还浪费计划缓存空间，因为存储执行计划进入计划缓存最终并没有真​​正的帮助，因为该特定查询可能不会再次执行）

3.  非参数化查询存在 SQL 注入攻击的风险，应不惜一切代价避免。

[这](http://www.codinghorror.com/blog/2005/05/stored-procedures-vs-ad-hoc-sql.html)也是一本有趣的读物。

# php - PHP 注册 MD5 密码大小写转移

> ID：12607268
> 
> 赞同：0
> 
> 时间：2012-09-26T17:34:19.327
> 
> 标签：php, passwords, md5, case, shift

我很擅长 php，但我的 MySQL 技能仍然缺乏。

我有这个脚本，但不知道如何用它制作表格，也不知道如何做其他几件事（在脚本后面提到）：

```
insert into user (UserName,Password,key,mobi)  values ($UserName,$pass,$key,900000000) 
```

问题是，密码必须是 MD5，并且 MD5 密码必须全部大写。

那么有人可以给我一个非常基本的代码，包括表单部分吗？我很感激任何帮助，因为在表格和将信息放入表格时我仍然迷路......非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:48:58.910

如果需要，您可以在 MySQL 查询中执行此操作：

```
INSERT INTO user (UserName,Password,key,mobi)
VALUES ($UserName,UPPER(MD5($pass)),$key,900000000) 
```

相反，在 PHP 中，只需将其用作查询，假设您已正确清理表单中的变量：

```
"INSERT INTO user (UserName,Password,key,mobi)
VALUES ('$UserName','".strtoupper(md5($pass))."','$key',900000000)" 
```

# asp.net - 如果没有插入任何列，则 SQL 列显示 -1

> ID：12607270
> 
> 赞同：0
> 
> 时间：2012-09-26T17:34:20.630
> 
> 标签：asp.net, sql-server-2008

在我的 SQL Server 表中，如果列值（整数）什么都不是，那么它的插入值为 -1。如果我从表中选择所有列值并显示在 ASP.net 网格上，它会在指定列上显示-1。我不想将其显示为 -1 它需要显示为“null or none”之类的东西。怎么能得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:57:12.827

不要调用事件并避免不必要的回发到服务器，而是在从数据库中获取 DataTable 之后以及在 Databind() GridView 之前编写以下代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    //DataTable dt = GetDataFromDatabase();
    DataTable dt = new DataTable();
    foreach (DataRow row in dt.Rows)
    {
        row["columnName"] = row["columnName"]== "-1" ? "none" : row["columnName"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:39:35.300

使该列可以为空，并且不要为该列设置默认值，并在 asp.net 页面中检查是否有空值，然后将其替换为银行或“无”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:40:11.043

因此，无论是在您的更新声明中，还是在您正在使用的驱动程序中，'' 都不会被错误处理。如果你想要 NULL，你必须插入 NULL。

*   插入 (mytable ID, SomeNum, SomeText) 值 (1,'','hello World') 不
*   插入 (mytable ID, SomeNum, SomeText) 值 (1,,'hello World') 不
*   插入（mytable ID，SomeNum，SomeText）值（1，NULL，'hello World'）是的。

都会在 someNum 中产生不同的值。第一个可能会引发类型转换，第二个我相信结果是-1，第三个会给你你正在寻找的结果。

如果您使用的是存储过程，则传入的参数没有得到适当的处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:41:41.713

1 您可以在数据库中插入 null。（在您的数据中，您使用 Type Nullable 来匹配）

2 您还可以通过删除 -1 并替换为空值来处理 Gridview 中的信息。

```
 void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
  {

    if(e.Row.RowType == DataControlRowType.DataRow)
    {

      e.Row.Cells[1].Text = (e.Row.Cells[1].Text == "-1" ) ? "" :  e.Row.Cells[1].Text;

    }

  } 
```

# parsing - 使用 `grep` 、 `awk` 、 `sed` 或其他任何功能进行简单过滤

> ID：12607271
> 
> 赞同：2
> 
> 时间：2012-09-26T17:34:21.037
> 
> 标签：parsing, sed, awk, grep

我有一个文件，每一行都可以用这个语法来描述：

```
<text> <colon> <fullpath> <comma> <"by"> <text> <colon> <text> <colon> <text> <colon> <text> 
```

**例如。，**

```
needs fixing (Sunday): src/foo/io.c, by Smith : in progress : <... random comment ...> 
```

我如何获得位于第一个和第一个`<fullpath>`之间的部分`<colon>``<comma>`

（我不太倾向于编写一个程序来解析它，尽管这看起来可以用 javacc 轻松完成。希望使用一些内置工具，如`sed`, `awk`, ...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:10:50.480

或使用正则表达式替换

```
sed -n 's/^[^:]*:\([^:,]*\),.*/\1/p' file 
```

Linux`sed`方言；如果在不同的平台上，也许您需要一个`-E`选项和/或去掉圆括号前的反斜杠；或者直接使用 Perl；

```
perl -nle 'print $1 if m/:(.*?),/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:35:41.387

如果你使用 bash 脚本来解析这些东西，你甚至不需要像 awk 或 sed 这样的工具。

```
$ text="needs fixing (Sunday): src/foo/io.c, by Smith : in progress : <... comment ...>"
$ text=${text%%,*}
$ text=${text#*: }
$ echo "$text"
src/foo/io.c 
```

[*在Parameter Expansion*](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)`bash`下的手册页上阅读相关内容。[](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:16:23.613

使用 GNU grep：

```
grep -oP '(?<=: ).*?(?=,)' 
```

如果该行中有后续逗号，这可能会找到多个子字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:37:58.563

假设输入将类似于您上面的内容：

```
awk '{print $4}' | tr -d , 
```

对于整个文件，您只需在`awk`命令旁边键入我上面的命令的文件名。*

# sql-server - 需要 SSDT 循环引用/未解析的引用解决方法

> ID：12607272
> 
> 赞同：6
> 
> 时间：2012-09-26T17:34:32.237
> 
> 标签：sql-server, sql-server-data-tools

我刚刚开始涉足 SSDT 并且已经遇到了问题。

我的解决方案由 2 个数据库组成。两个数据库都使用同义词相互引用。因此，就 SSDT 而言，我们有循环引用。

我知道这种安排的设计问题，因此无需对此发表评论，也无需建议对数据库本身进行结构更改。这是一个现有的系统，我无权从结构上改变它。

我也知道 SSDT 不允许循环引用的事实。这里有一个解决方法（[http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/5fd12f01-54e6-4e7d-b7e2-14fa9df9a7ef](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/5fd12f01-54e6-4e7d-b7e2-14fa9df9a7ef)）。它建议将 DB1 拆分为 2 个项目 DB1 和 DB1a，例如其中 DB1a 引用 DB1 和 DB2，并使 DB2 引用 DB1。但我不确定如何在不实际创建额外数据库的情况下对其进行配置。

我在想我唯一的选择是将其保留为 2 个项目，但将它们设置为忽略未解决的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:28:52.353

正如评论中提到的，我建议在两个现有数据库项目中的任何一个中将触发器强制部署为部署后脚本。

请注意，通过这样做，您将无法在 SSDT 数据库项目中对触发器本身进行任何引用（除非这些对象也包含在部署后脚本中）。不确定是否确实存在可能依赖于触发器的对象类型，但我认为无论如何值得一提:)。

# actionscript-3 - 将对象放在前面，同时在父对象上保留相同的子索引。AS3/弹性

> ID：12607282
> 
> 赞同：1
> 
> 时间：2012-09-26T17:35:16.207
> 
> 标签：actionscript-3, flash, apache-flex, actionscript

当我们单击图像时，它应该作为所选图像出现在前面，但我不想更改该图像的索引值

```
canvas1.setChilIndex(Image(event.target), numChildern-1) 
```

上面的行正在更改所选图像的索引值并将其设置为最大值-1（例如：5-1 = 4 作为索引值）。我需要替代上述行，以保持图像的相同索引。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:28:03.030

您可以做的是，在您的点击处理程序中存储所点击项目的索引，然后在下一次点击（或任何时候）时，将项目发送回其先前的索引：

```
var previousImg:Image;
var previousIndex:int;

function selectImage(img:Image):void {
    deselectImage(); //if there is already a selected image, put it back before moving this new one to the top

    previousImg = img;    
    previousIndex = canvas1.getChildIndex(img);
    canvas1.addChild(img); //brings it to the front
}

function deselectImage():void {
    if(previousImg){
        canvas1.setChildIndex(previousImage, previousIndex);
        previousImg = null;  //null the var in case you call this method manually
    }
} 
```

所以在你的点击处理程序中，这样做而不是你在问题中的行：

```
selectImage(Image(event.target)); 
```

使用此方法，无论何时调用`selectImage`，它都会将最后一次单击放回它所属的位置。如果您愿意，您也可以`deselectImage`手动调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:55:23.277

这是不可能的，因为在 flash 中子索引是绘制顺序的唯一标准。

如果要保持添加图像的顺序，可以将图像存储在数组中，例如，在数组中，然后每个下一个项目将具有添加顺序的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:30:52.557

当我看到您的问题时，我的想法与上面 LondonDrugs 和 Roman 建议的想法相同。但是，您的问题很简单，因此无法回答。

如果我不知道应用程序的流程，情况会非常复杂。

例如，如果您在选择图像后在运行时将图像添加到画布，那么您希望回滚哪个索引顺序？

My suggestion: You can set a cut point that you want to keep the order of index, then use a loop to find the index of all the image and keep it in an array. When the user finished playing, roll the index back to the cut point.

# c++ - MultiByteToWideChar 或 WideCharToMultiByte 和 txt 文件

> ID：12607283
> 
> 赞同：0
> 
> 时间：2012-09-26T17:35:18.193
> 
> 标签：c++, file, winapi

我正在尝试编写一个通用文本编辑器，它可以在 EditControl 中打开和显示 ANSI 和 Unicode。`ReadFile()`如果确定文本是ANSI，是否需要重复调​​用？无法弄清楚如何执行此任务。我在下面的尝试不起作用，它显示“？” EditControl 中的字符。

```
LARGE_INTEGER fSize;
        GetFileSizeEx(hFile,&fSize);

        int bufferLen = fSize.QuadPart/sizeof(TCHAR)+1;
        TCHAR* buffer = new TCHAR[bufferLen];       
        buffer[0] = _T('\0');

        DWORD wasRead = 0;
        ReadFile(hFile,buffer,fSize.QuadPart,&wasRead,NULL);        
        buffer[wasRead/sizeof(TCHAR)] = _T('\0');

        if(!IsTextUnicode(buffer,bufferLen,NULL))
        {                       
            CHAR* ansiBuffer = new CHAR[bufferLen];
            ansiBuffer[0] = '\0';
            WideCharToMultiByte(CP_ACP,0,buffer,bufferLen,ansiBuffer,bufferLen,NULL,NULL);
            SetWindowTextA(edit,ansiBuffer);
            delete[]ansiBuffer;
        }
        else
            SetWindowText(edit,buffer);

        CloseHandle(hFile);
        delete[]buffer; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:41:39.687

有一些缓冲区长度错误和奇怪之处，但这是你的大问题。你叫`WideCharToMultiByte`错了。这意味着接收 UTF-16 编码的文本作为输入。但是当`IsTextUnicode`返回 false 时，这意味着缓冲区不是 UTF-16 编码的。

以下基本上是您需要的：

```
if(!IsTextUnicode(buffer,bufferLen*sizeof(TCHAR),NULL))
    SetWindowTextA(edit,(char*)buffer); 
```

请注意，我已将长度参数固定为`IsTextUnicode`.

对于它的价值，我想我会读入`char`. 这将消除对`sizeof(TCHAR)`. 事实上，我会`TCHAR`完全停止使用。这个程序应该一直是 Unicode -`TCHAR`是您在为 Windows 的 NT 和 9x 变体编译时使用的程序。我想你不再为 9x 编译了。

所以我可能会这样编码：

```
char* buffer = new char[filesize+2];//+2 for UTF-16 null terminator
DWORD wasRead = 0;
ReadFile(hFile, buffer, filesize, &wasRead, NULL);        
//add error checking for ReadFile, including that wasRead == filesize
buffer[filesize] = '\0';
buffer[filesize+1] = '\0';
if (IsTextUnicode(buffer, filesize, NULL))
    SetWindowText(edit, (wchar_t*)buffer);
else
    SetWindowTextA(edit, buffer);
delete[] buffer; 
```

另请注意，此代码不考虑接收 UTF-8 编码文本的可能性。如果你想处理这个问题，你需要获取缓冲区并通过using`char`发送到。`MultiByteToWideChar``CP_UTF8`

# linux-kernel - 当 mov 指令导致页面错误并在 x86 上禁用中断时会发生什么？

> ID：12607288
> 
> 赞同：15
> 
> 时间：2012-09-26T17:35:59.850
> 
> 标签：linux-kernel, x86, linux-device-driver, interrupt, page-fault

我最近在自定义 Linux 内核（2.6.31.5，x86）驱动程序中遇到了一个问题，其中 copy_to_user 不会定期将任何字节复制到用户空间。它会返回传递给它的字节数，表明它没有复制任何东西。经过代码检查，我们发现代码在调用 copy_to_user 时禁用了中断，这违反了它的合同。更正此问题后，问题停止发生。因为这个问题很少发生，我需要证明禁用中断导致了这个问题。

如果您从 arch/x86/lib/usercopy_32.c rep 查看下面的代码片段；movsl 通过 CX 中的计数将单词复制到用户空间。大小在退出时用 CX 更新。如果 movsl 正确执行，CX 将为 0。因为 CX 不为零，所以 movs? 为了符合 copy_to_user 的定义和观察到的行为，必须没有执行指令。

```
/* Generic arbitrary sized copy.  */
#define __copy_user(to, from, size)                 \
do {                                    \
    int __d0, __d1, __d2;                       \
    __asm__ __volatile__(                       \
        "   cmp  $7,%0\n"                   \
        "   jbe  1f\n"                  \
        "   movl %1,%0\n"                   \
        "   negl %0\n"                  \
        "   andl $7,%0\n"                   \
        "   subl %0,%3\n"                   \
        "4: rep; movsb\n"                   \
        "   movl %3,%0\n"                   \
        "   shrl $2,%0\n"                   \
        "   andl $3,%3\n"                   \
        "   .align 2,0x90\n"                \
        "0: rep; movsl\n"                   \
        "   movl %3,%0\n"                   \
        "1: rep; movsb\n"                   \
        "2:\n"                          \
        ".section .fixup,\"ax\"\n"              \
        "5: addl %3,%0\n"                   \
        "   jmp 2b\n"                   \
        "3: lea 0(%3,%0,4),%0\n"                \
        "   jmp 2b\n"                   \
        ".previous\n"                       \
        ".section __ex_table,\"a\"\n"               \
        "   .align 4\n"                 \
        "   .long 4b,5b\n"                  \
        "   .long 0b,3b\n"                  \
        "   .long 1b,2b\n"                  \
        ".previous"                     \
        : "=&c"(size), "=&D" (__d0), "=&S" (__d1), "=r"(__d2)   \
        : "3"(size), "0"(size), "1"(to), "2"(from)      \
        : "memory");                        \
} while (0) 
```

我的两个想法是：

1.  当中断被禁用时，页面错误不会发生然后rep；动？被跳过而不做任何事情。然后返回值将是 CX，或未复制到用户空间的数量，如定义指定和观察到的行为。
2.  确实发生了页面错误，但是由于禁用了中断，linux无法处理它，因此页面错误处理程序跳过了该指令，尽管我不知道页面错误处理程序会如何执行此操作。同样，在这种情况下，CX 将保持不变并且返回值将是正确的。

谁能指出英特尔手册中指定此行为的部分，或者指出任何其他可能有用的 Linux 源代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T20:53:12.350

我找到了答案。我的#2 建议是正确的，而且机制就在我面前。确实会发生页面错误，但 fixup_exception 机制用于提供异常/继续机制。本节将条目添加到异常处理程序表：

```
 ".section __ex_table,\"a\"\n"               \
    "   .align 4\n"                 \
    "   .long 4b,5b\n"                  \
    "   .long 0b,3b\n"                  \
    "   .long 1b,6b\n"                  \
    ".previous"                     \ 
```

这表示：如果 IP 地址是第一个条目并且在故障处理程序中遇到异常，则将 IP 地址设置为第二个地址并继续。

所以如果异常发生在“4:”，跳转到“5:”。如果异常发生在“0:”，则跳转到“3:”，如果异常发生在“1:”，则跳转到“6:”。

缺失的部分在 arch/x86/mm/fault.c 的 do_page_fault() 中：

```
/*
 * If we're in an interrupt, have no user context or are running
 * in an atomic region then we must not take the fault:
 */
if (unlikely(in_atomic() || !mm)) {
    bad_area_nosemaphore(regs, error_code, address);
    return;
} 
```

in_atomic 返回 true 因为我们处于 write_lock_bh() 锁中！bad_area_nosemaphore 最终会进行修复。

如果会发生 page_fault（这不太可能，因为工作空间的概念），那么函数调用将失败并跳出 __copy_user 宏，未复制的字节设置为 size，因为抢占被禁用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T13:45:57.613

页面错误不是可屏蔽中断。事实上，它们在技术上根本不是中断——而是例外，尽管我同意区别更具语义。

当您在禁用中断的原子上下文中调用它时，您的 copy_to_user 失败的原因是代码对此进行了明确的检查。

见[http://lxr.free-electrons.com/source/arch/x86/lib/usercopy_32.c#L575](http://lxr.free-electrons.com/source/arch/x86/lib/usercopy_32.c#L575)

# javascript - 防止 JSHint 警告“功能名称已定义但从未使用”

> ID：12607289
> 
> 赞同：47
> 
> 时间：2012-09-26T17:36:00.777
> 
> 标签：javascript, jquery, jslint, jshint

我刚刚开始使用 JSHint（通过 Sublime-Linter 包用于 Sublime Text 2）。我想禁止它对在定义之前使用的函数的警告，因为我认为使用这样的函数定义没有问题。例如，以下代码会生成警告：

```
(function($){ 

    $(document).ready(function()
    {
      formValidationSetup();
      refreshErrorMessages();
    });

    function formValidationSetup()
    {

    }

    function refreshErrorMessages()
    {

    }

})(jQuery); 
```

警告：

> 1.  formValidationSetup 已定义但从未使用过
> 2.  refreshErrorMessages 已定义但从未使用过

我尝试在 JSHint 选项中将*undef*设置为*false ，但仍然出现这些错误。*我应该设置另一个选项吗？形成*undef*的[JSLint 文档](http://www.jslint.com/lint.html#options)：

 *> 如果变量和函数在使用前不需要声明，则为 true。这在严格模式下不可用。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-09-26T15:45:54.043

为了避免警告

> 已定义但从未使用

在您的 javascript 中的 jslint 中添加如下注释：

```
 /*exported formValidationSetup, refreshErrorMessages */ 
```

在 jshint 和 jslint 中，您可以将未使用的选项设置为 false：

```
 /*jshint unused:false*/ 
```

查看[选项](http://www.jshint.com/docs/options)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-24T07:39:54.653

我在 Chai 测试中`should`遇到了这个问题。`expect`我最终得到了这种模式：

```
'use strict';

var request = require('supertest');
var should = require('chai').should();  // jshint ignore:line
var expect = require('chai').expect;    // jshint ignore:line

process.env.NODE_ENV = 'test';
var appPromise = require('./index');

describe('GET /r_u_up', function() {

  it('respond with 204', function(done) {
    appPromise.then(function(app) {
      request(app)
      .get('/r_u_up')
      .expect(204, done);
    });
  });

}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-19T14:47:43.627

你可以简单地使用

```
"unused": false, 
```

在你的 .jshintrc

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T20:26:25.067

有趣的是，`'use strict';`在 IIFE 中添加会抑制错误。不知道为什么。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-25T02:55:39.790

`Gruntfile.js`在典型的 Yoeman 设置中不接触 的更好方法是编辑`.jshintrc`文件（Unix 系统中的隐藏文件）。并更新内容如下：

```
{
  "curly": true,
  "eqeqeq": true,
  "immed": true,
  "latedef": true,
  "newcap": true,
  "noarg": true,
  "sub": true,
  "undef": true,
  "unused": false, // the change is here
  "boss": true,
  "eqnull": true,
  "node": true
} 
```

设置`"unused"`为`false`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-05T20:13:12.820

你会想要使用 'latedef' 选项*

# ms-access-2010 - 如何从 Access 2010 获取查询计划 (showplan.out)？

> ID：12607296
> 
> 赞同：5
> 
> 时间：2012-09-26T17:36:40.550
> 
> 标签：ms-access-2010

我试图弄清楚如何在 Access 2010 中针对 ODBC 数据库表执行动态追加查询（请参阅[问题 12592953](https://stackoverflow.com/questions/12592953/)），有人建议启用 showplan 调试输出：[techrepublic link](http://www.techrepublic.com/article/use-microsoft-jets-showplan-to-write-more-efficient-queries/5064388)。但是 Access 2010 / accdb 数据库显然不使用 Jet 引擎，所以这对我没有帮助。

**更新：**这是我正在尝试使用的查询（完整描述在上面链接的另一个 stackoverflow 问题中）。它应该使用远程副本中的新行更新表的本地副本。但是会发生什么是 Access 拉整个远程表（这是巨大的并导致 ODBC 超时），然后在`WHERE`本地运行。

```
INSERT INTO local (dt, latitude, longitude)
SELECT dt, latitude, longitude
FROM remote_odbc, (SELECT max(dt) AS max_dt FROM local) AS sub
WHERE remote_odbc.dt > max_dt; 
```

是否有类似于 Access 2010 中的 Jet / Debug / showplan 注册表黑客的东西来获取有关 Access 如何查看查询的更多信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-06T16:16:02.350

谢谢@Fionnuala

对于 Access 2010 32 位，您将需要以下密钥：

在 Windows 7 32 位上：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Debug]
"JETSHOWPLAN"="ON" 
```

或在 Windows 7 64 位上：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Debug]
"JETSHOWPLAN"="ON" 
```

我需要创建文件夹`Debug`以放入密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:38:10.020

您将需要以下密钥：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Debug]
"JETSHOWPLAN"="ON" 
```

以上是从我运行 Access 2010 的 Windows 7 注册表中导出的，并为我生成 showplan.out。

# ruby - Sinatra 与现有数据库（不遵守命名约定）

> ID：12607297
> 
> 赞同：2
> 
> 时间：2012-09-26T17:36:44.283
> 
> 标签：ruby, activerecord, sinatra, firebird, datamapper

我有一个现有的旧版 Firebird 数据库，其中包含非标准的表和字段名称。

我想编写一个可以访问它并显示信息的 Sinatra 应用程序。我已经看到像 dm-is-reflective 这样的东西在数据库具有适当的命名约定时似乎可以工作，但是我如何使用 DataMapper（或 ActiveRecord，无论哪个最简单）来访问这些表？

例如，假设我有这两个表：

```
Bookshelfs
    shelf_id: integer
    level: integer
    created: timestamp

Book
    id: integer
    id_of_shelf: integer
    title: string
    pages: integer 
```

类似于不遵循任何设定模式的奇怪命名约定，即使没有分配 foreign_key，一个表的记录也可能“拥有”另一个表中的多个条目。

您将如何设置 datamapper（或 activerecord）与它进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:42:44.070

查看此 gem 以在 Sinatra 上使用 ActiveRecord 进行设置： [https ://github.com/bmizerany/sinatra-activerecord](https://github.com/bmizerany/sinatra-activerecord)

至于如何定义关系，activerecord 可以很容易地做到这一点。

```
class Book < ActiveRecord::Base
  belongs_to :bookshelf, :class_name => 'Bookshelf', :foreign_key => 'id_of_shelf'
end

class Bookshelf < ActiveRecord::Base
  has_many :books, :class_name => 'Book', :foreign_key => 'id_of_shelf'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:31:07.197

假设您知道如何使用 ActiveRecord 的 Firebird 适配器连接到旧数据库，接下来我要做的就是在每个表的顶部定义一个视图，例如

```
CREATE VIEW books AS SELECT * FROM Book;
CREATE VIEW bookshelves AS SELECT * FROM Bookshelfs; 
```

这样，您可以像往常一样在 ActiveRecord 中简单地定义模型 Book 和 Bookshelf，它会在数据库中的正确位置找到所有内容。

# objective-c - 滚动时具有自定义拆分视图（如 UITableView）的表单崩溃

> ID：12607302
> 
> 赞同：2
> 
> 时间：2012-09-26T17:37:20.050
> 
> 标签：objective-c, xcode, ipad, uitableview

我创建了一个带有设置表单的 iPad 应用程序。表单使用两个子视图来创建像显示一样的拆分视图。左侧（主） UITableView 滚动并正常启动。The error is coming in from when one of the master cells is selected and it displays a UITableView from a UITableViewController into the right(detail) view. 它将显示 UITableView，但一旦滚动，详细视图就会崩溃。是的，我有从 plist 中提取的列表，因为我希望以后可以在应用程序的其他位置访问这些结果。

这是表单的视图控制器和主视图 **.h 文件的委托**

```
@interface settingsViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>{
    UITableView *mainTableView;
    NSDictionary *mainSettingList;
    NSArray *settingItems;
}

@property (weak, nonatomic) IBOutlet UINavigationBar *settingsNavigationBar;
@property (weak, nonatomic) IBOutlet UITableView *mainTableView;
@property (weak, nonatomic) IBOutlet UIView *borderView;
@property (strong, nonatomic) IBOutlet UIView *detailView; 
```

**.m 文件**

```
@property (nonatomic, strong)NSDictionary *mainSettingList;
@property (nonatomic, strong)NSArray *settingItems;

@end

@implementation settingsViewController
@synthesize settingsNavigationBar = _settingsNavigationBar;
@synthesize mainTableView = _mainTableView;
@synthesize borderView = _borderView;
@synthesize settingItems, mainSettingList;

-(void)viewDidLoad{
    [super viewDidLoad];
    [self.detailView setFrame:CGRectMake(233, 0, 310, 620)];
    [self.borderView setBackgroundColor:[UIColor lightGrayColor]];
    [self.view addSubview:self.borderView];
    [self.view addSubview:self.detailView];

}

- (IBAction)closePressed:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(NSDictionary *)mainSettingList{
    if(!mainSettingList){
        NSString *str_settingList = [[NSBundle mainBundle]pathForResource:@"settingsList" ofType:@"plist"];
        mainSettingList = [NSDictionary dictionaryWithContentsOfFile:str_settingList];
        self.mainSettingList = mainSettingList;
    }
    return mainSettingList;
}

-(NSArray *)settingItems{
    if(!settingItems){
        settingItems = [[self.mainSettingList allKeys]sortedArrayUsingSelector:@selector(compare:)];
        self.settingItems = settingItems;
    }
    return settingItems;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.settingItems.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *wordsInSection = [self.mainSettingList objectForKey:
                                [self.settingItems objectAtIndex:section]];
    return wordsInSection.count;
}

-(NSString *)nameAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *wordsInSection = [self.mainSettingList objectForKey:[self.settingItems objectAtIndex:indexPath.section]];
    return [wordsInSection objectAtIndex:indexPath.row];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"AlumniListCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.textLabel.text = [self nameAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.settingItems objectAtIndex:section];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UINavigationController *nvc = [[UINavigationController alloc]init];
    [nvc.view setFrame:CGRectMake(0,0, 310, 620)];
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellText = selectedCell.textLabel.text;

    if([cellText isEqualToString:@"Types of Jumps"]){
        TypesOfJumps *toj = [[TypesOfJumps alloc]initWithNibName:@"TypesOfJumps" bundle:nil];
        [nvc pushViewController:toj animated:YES];
    }
    [self.detailView addSubview:nvc.view];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:[NSString stringWithFormat:@"You selected %@!", cellText] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return YES;
}

- (void)viewDidUnload {
    [self setSettingsNavigationBar:nil];
    [self setBorderView:nil];
    [self setMainTableView:nil];
    [self setSubViewNavigaionBar:nil];
    [self setDetailView:nil];
    [super viewDidUnload];
}
@end 
```

单元格按下方法调用的 UITableViewController **.h 文件**

```
@interface TypesOfJumps : UITableViewController<UITableViewDataSource,UITableViewDelegate>{
    NSDictionary *listJumps;
    NSArray *typesJumps;
}
@property (strong, nonatomic) IBOutlet UITableView *tableView; 
```

**.m 文件**

```
@interface TypesOfJumps ()
@property (strong, nonatomic)NSDictionary *listJumps;
@property (strong, nonatomic)NSArray *typesJumps;

@end

@implementation TypesOfJumps
@synthesize listJumps = _listJumps;
@synthesize typesJumps = _typesJumps;
@synthesize tableView = _tableView;

-(NSDictionary *)listJumps{
    if(!listJumps){
        NSString *str_settingList = [[NSBundle mainBundle]pathForResource:@"TypesOfJumps" ofType:@"plist"];
        listJumps = [NSDictionary dictionaryWithContentsOfFile:str_settingList];
        self.listJumps = listJumps;
    }
    return listJumps;
}

-(NSArray *)typesJumps{
    if(!typesJumps){
        typesJumps = [[self.listJumps allKeys]sortedArrayUsingSelector:@selector(compare:)];
        self.typesJumps = typesJumps;
    }
    return typesJumps;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.typesJumps.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *wordsInSection = [self.listJumps objectForKey:
                               [self.typesJumps objectAtIndex:section]];
    return wordsInSection.count;
}

-(NSString *)nameAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *wordsInSection = [self.listJumps objectForKey:[self.typesJumps objectAtIndex:indexPath.section]];
    return [wordsInSection objectAtIndex:indexPath.row];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"AlumniListCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.textLabel.text = [self nameAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.typesJumps objectAtIndex:section];
} 
```

# algorithm - 从堆的中间删除一个节点

> ID：12607304
> 
> 赞同：5
> 
> 时间：2012-09-26T17:37:36.137
> 
> 标签：algorithm, data-structures, heap, dijkstra

从堆中间删除一个节点可以在 O(lg n) 中完成，前提是我们可以在恒定时间内找到堆中的元素。假设堆的节点包含 id 作为其字段。现在，如果我们提供 id，我们如何在 O(lg n) 时间内删除节点？

一种解决方案是我们可以在每个节点中拥有一个位置的地址，我们在其中维护堆中节点的索引。该数组将按节点 ID 排序。不过，这需要维护额外的数组。有没有其他好的方法可以达到同样的效果。

PS：我在实现 Djikstra 的最短路径算法时遇到了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:55:32.167

索引 (id, node) 可以在具有 O(1) 查找复杂度（平均）的哈希表中单独维护。然后整体复杂度保持为 O(log n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:23:49.683

每个数据结构的设计都考虑了某些操作。来自关于堆操作的维基百科

```
堆通常执行的操作是：
 create-heap：创建一个空堆
find-max 或 find-min：找到最大堆的最大项或最小堆的最小项，分别为
delete-max 或 delete -min：删除最大或最小堆的根节点，分别
增加键或减少键：分别更新最大或最小堆中
的键插入：将新键添加到堆
合并加入两个堆以形成一个有效的新堆，其中包含两者的所有元素。

```

这意味着，堆不是您正在寻找的操作的最佳数据结构。我建议您寻找更适合的数据结构（取决于您的要求）..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-05T04:31:00.500

我遇到了类似的问题，这就是我想出的：

**解决方案 1：**如果您删除某些随机项的调用将有一个指向项的指针，您可以将您的个人数据项存储在堆外；堆是*指向*这些项目的指针；并让每个项目包含其当前的堆数组索引。

示例：堆包含指向键为 [2 10 5 11 12 6] 的项的指针。持有值 10 的项目有一个名为 ArrayIndex = 1 的字段（从 0 开始计数）。因此，如果我有一个指向第 10 项的指针并想要删除它，我只需查看它的 ArrayIndex 并在堆中使用它进行正常删除。O(1) 找到堆位置，然后通常 O(log n) 通过递归 heapify 删除它。

**解决方案 2：**如果您只有要删除的项目的关键字段，而不是其地址，请尝试此操作。切换到红黑树，将有效负载数据放入实际的树节点中。对于插入和删除，这也是 O( log n )。它还可以在 O( log n ) 中找到具有给定键的项目，这使得 delete-by-key 继续为 log n。

在这些之间，解决方案 1 将需要在每次交换时不断更新 ArrayIndex 字段的开销。这也导致了一种奇怪的一次性数据结构，下一个代码维护者需要研究和理解。我认为解决方案 2 的速度差不多，并且具有易于理解的算法的优势。

# nsxmlparser - 如何使用 [CDATA] 标签解析元素

> ID：12607305
> 
> 赞同：0
> 
> 时间：2012-09-26T17:37:37.523
> 
> 标签：nsxmlparser, cdata, rss-reader

我正在尝试使用 NSScanner 从我的标签中提取图像，但我的标签有一个 [CDATA] 块，它使我的 NSXLM 解析器忽略该标签内的所有内容。我如何解析我的标签内的数据，这是 rss 提要的示例，以及解析器代码的示例。

```
<item>
        <title>Kendrick Lamar &amp; Lady Gaga in Chi-Town</title>
        <link>http://www.motahiphop.com/rap-pix/36-rap-pix/2346-kendrick-lamar-lady-gaga-in-chi-town</link>
        <guid isPermaLink="true">http://www.motahiphop.com/rap-pix/36-rap-pix/2346-kendrick-lamar-lady-gaga-in-chi-town</guid>
        <description><![CDATA[<p style="text-align: center;"><img src="http://www.motahiphop.com/images/lady-gaga-kendrick-lamar.jpg" width="500" alt="Kendrick Lamar with Lady Gaga at Pitchfork festival" /></p> 
```

在上周发推文说她是肯德里克·拉马尔的粉丝之后。Lady Gaga 在芝加哥的 Pitchform 音乐节上与 Compton MC 的后台相见。

]]> gqwebsites@gmail.com（超级用户）精选 Rap Pix Rap Pix Mon, 16 Jul 2012 13:18:45 -0400

解析器代码片段：

```
if ([elementName isEqualToString:@"item"]) 
{
    elements[@"title"] = title;
    elements[@"date"] = date;
    elements[@"summary"] = summary;
    elements[@"link"] = link;
    elements[@"description"] = description;

    //NSLog(@"%@", description);

    [posts addObject:elements];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:53:09.707

经过一番研究，我在另一篇文章中找到了答案，我使用了这种方法

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    NSString *description = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
    NSString *storyImageURL = [self getFirstImageUrl:description];
    NSLog(@"%@",storyImageURL); 
```

我在最后添加了 NSLog，这样您就可以 NSLog 结果并检查是否正在提取数据。奇迹般有效

# oracle - 从单个临时表填充星型模式。

> ID：12607306
> 
> 赞同：2
> 
> 时间：2012-09-26T17:37:38.373
> 
> 标签：oracle, plsql, oracle11g

从单个临时表填充星型模式的最佳方法是什么。数据负载有数百万行，星型模式是一个包含 10 个关联维度表的事实表。

**场景 1.**首先对维度进行顺序插入，然后对事实表进行大插入，在该事实表中，我将临时表与更新的维度表连接起来。我在这里最大的担忧是由于大量数据导致并发插入维度/事实表而可能发生的锁定。

**场景 2.**将数据加载拆分为更小的批次（10k 行）并循环遍历整个临时表并以与*场景 1*中所述相同的方式插入批次。我在这里看到的问题是循环遍历带有游标的大表. 另外，如果其中一个批次无法插入数据，我需要回滚之前完成的所有插入的更改。

**场景 3.**编写一个大的*INSERT ALL*语句并在整个插入期间锁定星型模式。此外，对于锁定问题，我将有一个复杂的插入语句，它必须保存插入语句的所有业务逻辑（调试和维护的噩梦）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:07:01.440

您可以在 11g 第 2 版中尝试 DBMS_PARALLEL_EXECUTE（！）

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_parallel_ex.htm#ARPLS233](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_parallel_ex.htm#ARPLS233)

可以很好地将大表分成较小的块，它可以让您非常轻松地定义并行度。不过，不要在块的处理中使用并行提示或插入追加。

您认为可以毫无问题地加载维度表的假设似乎让我过于乐观。根据我的经验，您必须满足并非所有维度数据信息在加载时都有效的情况。

# perl - 使用 Perl 的 Spreadsheet::ParseExcel 将 Excel 文件中的亚洲（日文/中文）字符转换为 TSV 格式

> ID：12607308
> 
> 赞同：0
> 
> 时间：2012-09-26T17:37:41.803
> 
> 标签：perl, excel, parsing, encoding, non-ascii-characters

朋友们，我正在从 excel 文件中准备一个 TSV 文件，其中包含以下中文（特殊）字符 - The Seonjeongneung ... Jeonghyeon (贞显王后，1462-1530) .....

我尝试使用 perl CPAN 的 Spreadsheet::ParseExcel 和 Spreadsheet::ParseExcel::FmtJapan。但没有成功。这些字符显示为?? 在 TSV 文件中，当在 VIM 中打开时。

我还尝试了“ binmode STDOUT, ':utf8'; ”和“ binmode STDOUT, ':encoding(cp932)'; ”

请帮助我，找到一种从 Excel 工作表中提取信息并进入 TSV 格式的方法。

PS：Excel允许直接保存为TSV，但输出也被搞砸了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:06:47.900

我刚刚从 OpenOffice Calc 中完美地导出了您的示例文本，只需选择“另存为 .csv”选项并选择 UTF-8 作为格式。如果 Excel 不能做到这一点，我会感到非常惊讶。您是否考虑过 VIM / 您的控制台不正确支持中文字符或设置为使用不包含中文字符的字体的可能性？要检查此类错误，请在 Web 浏览器中打开 .csv 或 .tsv 文件。Web 浏览器会做任何事情来正确显示文件，包括根据需要更改字体。

如果您愿意，请将您需要导出的文件发给我，我会检查它是否有什么奇怪的地方。可能是原生中文编码（gb 或 big5）之一，而不是 Unicode。

# sql - 计算sql server数据库的大小

> ID：12607310
> 
> 赞同：1
> 
> 时间：2012-09-26T17:37:47.310
> 
> 标签：sql, sql-server, sql-server-2008

我需要找到一个 sql server 2008 数据库的大小。我使用了以下存储过程

执行 sp_spaceused

如果给我返回以下数据，数据库名称，数据库大小，未分配空间，保留，数据，index_size，未使用

有什么方法可以获取数据库的大小，不包括某些表？

我可以使用此查询获取每个数据库表的保留大小

```
 DECLARE @LOW int
SELECT @LOW = LOW 
FROM [master].[dbo].[spt_values] (NOLOCK) 
WHERE [number] = 1 AND [type] = 'E'

SELECT TableName,[Row Count],[Size (KB)] FROM 
(
  SELECT QUOTENAME(USER_NAME(o.uid)) + '.' + 
                 QUOTENAME(OBJECT_NAME(i.id)) 
     AS TableName
     ,SUM(i.rowcnt) [Row Count]
     ,CONVERT(numeric(15,2),
        (((CONVERT(numeric(15,2),SUM(i.reserved)) * @LOW) / 1024))) AS [Size (KB)]
  FROM sysindexes i (NOLOCK)
  INNER JOIN sysobjects o (NOLOCK) 
     ON i.id = o.id AND 
     ((o.type IN ('U', 'S')) OR o.type = 'U') 
  WHERE indid IN (0, 1, 255) 
  GROUP BY 
     QUOTENAME(USER_NAME(o.uid)) + '.' + 
     QUOTENAME(OBJECT_NAME(i.id))
  HAVING SUM(i.rowcnt) > 0
) AS Z
ORDER BY [Size (KB)] DESC 
```

但这让我有点困惑，因为这只给出了每张桌子的保留大小。保留大小是多少？如果我将每个数据库表的保留大小相加，它不会加起来就是数据库大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:46:31.353

数据库中占用的空间远不止表。还要记住，表/数据库的大小是一个不断变化的东西。添加，删除行，构建日志以跟踪所做的事情，以便在必要时可以撤消或重做。由于这个空间被使用和释放，它通常不会被释放回文件系统，因为 SQL 知道它可能会再次需要它。SQL 将释放空间以供自己将来使用，但根据文件系统，数据库仍在使用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:46:12.220

请停止使用向后兼容性视图，如 sysindexes / sysobjects。

像这样的东西可能会更好，尽管单独的索引/表并不能说明数据库中的所有内容。

```
SELECT Size_In_MB = SUM(reserved_page_count)*8/1024.0
  FROM sys.dm_db_partition_stats
  WHERE OBJECT_NAME([object_id]) NOT IN (N'table1', N'table2'); 
```

另外，为什么要忽略非聚集索引？你认为它们对尺寸没有贡献吗？您可以在此处添加类似的过滤器，但我不确定您为什么要：

```
AND index_id IN (0,1,255); 
```

# c++ - --begin(container) - 被定义的行为？

> ID：12607316
> 
> 赞同：4
> 
> 时间：2012-09-26T17:37:56.073
> 
> 标签：c++, stl, iterator

我正在为我的自定义双向迭代器实现递减运算符。指向 Range 的第一个元素的递减迭代器是定义的行为吗？递减后是否有一些特殊的值，比如 Range.end()？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T17:40:54.583

在所有标准库容器的迭代器中，这是未定义的行为。但是，如果您正在创建自己的迭代器类，则不必如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:24:01.963

迭代器要求相当明确：在 24.2.6 [bidirectional.iterators] 中，表 110：

> `--r`（表达式）`X&`（返回类型）pre：存在`s`这样的`r == ++s`。

由于没有这样`s`的 for `c.begin()`，所以不能在不违反前提条件的情况下递减。

# python - 是否有任何 python 模块用于在 Web 应用程序中的用户之间发送消息？

> ID：12607317
> 
> 赞同：1
> 
> 时间：2012-09-26T17:37:56.167
> 
> 标签：python, pyramid

我正在使用金字塔建立一个网站，并想在我的网站中找到一些关于在用户帐户之间发送消息的模块。我听说 Rails 有一些宝石，例如[https://github.com/ging/mailboxer](https://github.com/ging/mailboxer)或[https://github.com/pluginaweek/has_messages](https://github.com/pluginaweek/has_messages)。

我想找一个蟒蛇。谁能推荐我一些python模块？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:16:19.383

您可能最好使用现有的协议，例如[**XMPP**](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)。例如，对于 Plone（一个 Python CMS），有一个完整的 XMPP 与[collective.xmpp.chat](https://github.com/collective/collective.xmpp.chat)集成，在 Plone 站点的经过身份验证的用户之间提供多用户聊天和即时消息（[演示视频](http://www.youtube.com/watch?v=xMTOXjAoTlc)）。

对于 Pyramid，您需要自己进行此集成`[1]`，方法是运行 Jabber/XMPP 服务器（例如[ejabberd](https://github.com/processone/ejabberd)）并使用 Python 的现有 XMPP 客户端库与其通信。Python 有很多 XMPP 库，其中一些在[这个问题](https://stackoverflow.com/questions/1901828/best-python-xmpp-jabber-client-library)的答案中有描述。

**注意**：如果在查看 XMPP 后它看起来很复杂*，*请不要害怕。XMPP 及其扩展描述了与消息传递和状态相关的各种功能，聊天只是其中之一。如果您不需要其他功能，请不要在您的 webapp 中实现它们。

`[1]`实际上，有一个 Pyramid 项目似乎正是这样做的：[seshat](https://github.com/kstrauser/seshat)，由@KirkStrauser 编写。我自己没用过，但看起来很有前途。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T17:46:43.227

     不; 两个人之间的直接通信在 Web 应用程序中是不可能的，因为他们使用无状态协议；服务器不知道请求是否来自同一个人。
      话虽如此，聊天应用程序通常所做的是将两个人之间的通信存储在数据库中，并使用 AJAX 来检索它们。
     网上已经有很多聊天应用教程和第三方聊天应用包；你可能想检查一下。

# events - 过程声明与具有相同名称的事件或过程的描述不匹配

> ID：12607319
> 
> 赞同：7
> 
> 时间：2012-09-26T17:37:58.223
> 
> 标签：events, vb6, toolbar

我是新手，尝试用Visual Basic 6 编写一个简单的程序，代码几乎和教科书上的一样。它本来是一种绘画程序。令人惊讶的是，它无法使用此问题标题中给出的错误进行编译。这是代码：

```
Option Explicit

Dim Col As Long

Private Sub Form_Load()
    AutoRedraw = True
    BackColor = vbWhite
    Col = vbBlack
    DrawWidth = 3
End Sub

Private Sub Command1_Click()
    CommonDialog1.ShowOpen
    Form1.Picture = LoadPicture(CommonDialog1.FileName)
End Sub

Private Sub Command2_Click()
    CommonDialog1.ShowSave
    SavePicture Image, CommonDialog1.FileName
End Sub

Private Sub Command3_Click()
    CommonDialog1.ShowColor
    Col = CommonDialog1.Color
End Sub

Private Sub Form_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)
    PSet (X, Y), Col
End Sub

Private Sub Toolbar1_ButtonClick(ByVal Button As MSComctlLib.Button)
    Select Case Button.Key
    Case "Line1"
        DrawWidth = 3
    Case "Line2"
        DrawWidth = 20
    End Select
End Sub 
```

应用程序在以下行崩溃：

```
Private Sub Toolbar1_ButtonClick(ByVal Button As MSComctlLib.Button) 
```

出现错误：

> 过程声明与具有相同名称的事件或过程的描述不匹配

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-26T19:11:14.067

问题在这里：

```
Private Sub Toolbar1_ButtonClick(ByVal Button As MSComctlLib.Button) 
```

好的，由于您使用 VB6 进行编码，因此您可以学习 VB6 手册中的一些技巧。暂时将方法重命名为qqToolbar_ButtonClick之类的别的东西，然后去设计器，点击工具栏中的按钮，重新生成代码中的事件。

如果签名输入错误，它将正确地从设计器重新生成，您可能会看到问题。

另一项检查是查看 ToolBar1 是否已添加到控件数组中？在这种情况下，方法签名需要如下所示：

```
Private Sub Toolbar1_ButtonClick(ByVal Index as Integer, ByVal Button As MSComctlLib.Button) 
```

我希望其中之一可以帮助您解决问题。

# java - 从 URL 中提取随机生成的 ID

> ID：12607320
> 
> 赞同：0
> 
> 时间：2012-09-26T17:37:59.300
> 
> 标签：java, url, selenium, extract

我需要为 Java 中的 Selenium 测试提取一个随机生成的 URL 部分。

当浏览器打开一个页面时，例如：

```
/edit_person.html?id=eb58cea3a3772ff656987792eb0a8c0f 
```

然后我可以显示网址：

```
String url = driver.getCurrentUrl(); 
```

但现在我只需要在等号后获取随机生成的 ID。

将整个 URL 作为变量 url 中的字符串后，如何提取参数 id 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:44:25.050

[`URL.getQuery()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getQuery%28%29)会将查询部分作为字符串提供，它是一个简单的正则表达式匹配，用于隔离您想要的部分。

`id=(.*)`只要它是查询字符串中唯一的东西，就会得到你想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:33:55.930

这是设法解决问题的方法：

```
String url = driver.getCurrentUrl();
        URL aURL = new URL(url);
        url = aURL.getQuery();
        String[] id = url.split("=");
        System.out.println(id[1]); 
```

感谢贾罗德·罗伯逊！

# ruby-on-rails - 有没有办法手动推送 NewRelic 错误？

> ID：12607321
> 
> 赞同：29
> 
> 时间：2012-09-26T17:38:03.200
> 
> 标签：ruby-on-rails, newrelic

在我们的 Rails 应用程序中，我们拯救了 ApplicationController 上的大多数异常以提供正确的 API 响应，但仍希望使用 ErrorCollector 跟踪发生的错误。有没有办法手动向 NewRelic 发送错误？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-05-15T04:11:44.550

根据我在 New Relic 代理代码中看到的内容，您可以执行

`NewRelic::Agent.notice_error(exception, options)`

我已经对此进行了测试，并在我的堆栈中运行了它

这是控制器中的示例：

```
class ApplicationController < ActionController::Base
  rescue_from ActiveRecord::RecordInvalid, with: :rescue_invalid_record

  private

  def rescue_invalid_record(exception)
    NewRelic::Agent.notice_error(exception)
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T19:54:26.930

不确定它是否是推荐的使用方式，但这非常有效：

```
NewRelic::Agent.agent.error_collector.notice_error( exception ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T21:54:40.960

用于通知错误和增加错误度量的 API 调用的完整文档是此处的 New Relic Ruby Agent API 文档[http://rdoc.info/github/newrelic/rpm/NewRelic/Agent/Transaction.notice_error](http://rdoc.info/github/newrelic/rpm/NewRelic/Agent/Transaction.notice_error)

# 3d - DirectX, light rays in front of 3D models when not hidden

> ID：12607323
> 
> 赞同：0
> 
> 时间：2012-09-26T17:38:05.560
> 
> 标签：3d, sprite, textures, directx-9, light

(C++) The title pretty much sums up it all;

I want to let a texture (or a sprite, or whatever) of a light be rendered in front of everything *if* a certain point in the 3D space is not hidden behind something else.

How do I do that? I can render it over everything by disabling the Zbuffer temporarily during the drawing process, but I don't know how to check if the point is being hidden.

Do I have to calculate some sort of collision between the point and the camera? Or will some kind of sprite setup make the trick?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:43:53.490

If I understand your question, you want to render a 2D image in 3D space - with all the appropriate depth buffering.

I would use a "billboard". Just render a simple quad in 3D space - making sure it's pointed at the viewer - and apply the "light" texture to it. You'll want to enable alpha blending, otherwise you'll just see a big square with a picture plastered on it - presumably not what you are looking for.

Another approach - that would probably be more work, but give more control - would be manually rendering or not rendering each pixel on the back buffer using a pixel shader. This kind of "blending" is explained pretty simply in Frank Luna's DirectX 9 book.

Sorry, I see now the crux of your problem was about calculating visibility, not how to render a billboard.

If your scene is simple enough, "manually calculating visibility" might just be comparing the distance from the camera of your test point and one or two other objects.

Otherwise, I think your on the right track with the ZBuffer. Manually calculate the depth of the test point (normalizing from 0.0 to 1.0 based on how the View Frustum is defined), project it onto screen space and compare that value to the value in the ZBuffer (at the same projected screen space coordinates). If your calculated depth value is less than the value in the ZBuffer, it's visible.

That's really the only general way I can think of to determine the visibility of a single 3D point.

Hope that helps.

# regex - 新换行符自定义降价扩展

> ID：12607324
> 
> 赞同：0
> 
> 时间：2012-09-26T17:38:21.893
> 
> 标签：regex, python-2.7, markdown, line-breaks

我正在为 python-markdown 编写一个扩展，它应该将我的一些自定义标签中的文本放入一个样式化的 div 中。

我创建了一个简单的内联模式类，它将匹配的表达式封装在 div 标记中。我的正则表达式如下：`r'(\{mytag_start\})(.+)(\{mytag_end\})'`然后在编译时由 markdown.inlinepatterns.Pattern 类放入`"^(.*?)`---`(.*?)$"`中，以便将 compile 方法称为`re.compile("^(.*?)%s(.*?)$" %r'(\{mytag_start\})(.+)(\{mytag_end\})')`.

乍一看，这似乎可以解决问题，但是我注意到所有换行符都需要硬编码为`<br>`标签。

所以

```
{mytag_start}This code<br>
will work{mytag_end} 
```

但是，以下代码破坏了整个降价

```
{mytag_start}This code

will not{mytag_end} 
```

因此，我只是以纯文本形式未经处理的整个上述块。

我尝试向 the 提供 re.MULTILINE 和 re.DOTALL ，`re.compile`但没有帮助。有任何想法吗？

**编辑：** [这](http://pastie.org/4897552)是一个显示上述问题的示例扩展文件。然后我在我的 django 模板中使用`{{ content:"mdx_MyExtension"}}`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:34:23.723

尝试使用非贪婪运算符（`+`紧随其后`?`）：

```
r'(\{mytag_start\})(.+?)(\{mytag_end\})' 
```

**完整的正则表达式：**

`^(?:.*?)(\{mytag_start\})(.+?)(\{mytag_end\})(?:.*?)$`

**标志：**

DOTALL、忽略大小写、多行

**数据测试**：

```
blah 
blash
<h1>Title</h1>
{mytag_start}This code<br>
will work{mytag_end}
<b>bold</b>

{mytag_start}This code

will not{mytag_end} 
```

**输出 ：**

```
# Run findall
>>> regex.findall(string)
[(u'{mytag_start}', u'This code<br>\nwill work', u'{mytag_end}'), (u'{mytag_start}', u'This code\n\nwill not', u'{mytag_end}')] 
```

# wxpython - 绑定 EVT_LEFT_DOWN 时如何保留默认按钮外观行为

> ID：12607326
> 
> 赞同：0
> 
> 时间：2012-09-26T17:38:32.913
> 
> 标签：wxpython

我在 wxpython 中有一个按钮，我已经为其绑定了`EVT_LEFT_DOWN`和`EVT_LEFT_UP`. 我需要明确知道它何时被按下和释放，这就是我不使用`EVT_BUTTON`.

事件工作正常，问题只是审美问题：当我绑定`EVT_LEFT_DOWN`并且`EVT_LEFT_UP`按钮不再显示被按下的正常外观（阴影和缩进）时。

有什么方法可以明确知道何时按下和释放按钮但还保留其默认外观行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:01:19.253

所以我找到了一个解决方案。

如果我调用`event.Skip()`我的处理程序`EVT_LEFT_DOWN`，`EVT_LEFT_UP`它似乎会传播事件，以便恢复默认按钮外观行为。

# android - 如何在 ICS/JB 中增加 ProgressBar 的高度

> ID：12607327
> 
> 赞同：3
> 
> 时间：2012-09-26T17:38:36.300
> 
> 标签：android, progress-bar, android-4.0-ice-cream-sandwich

我在我的一个小部件中使用 Android 进度条：

```
<ProgressBar
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="?android:attr/progressBarStyleHorizontal"
        android:id="@+id/progressbar_Horizontal"
        android:max="100"/> 
```

在 Android 2.x 中看起来不错，如下图所示。我已经在栏本身的顶部写了 % 。

![Android 2.x 中的进度条](../Images/05f6cd9fcd51ffcd69ed65dacc238fec.png)

但是如果我在 Android Manifest 中更改

> 安卓：targetSdkVersion

到“15”，进度条看起来完全不同。它现在是一条细蓝线，而不是一条条。问题是我在进度条上方写了一些文字，特别是进度的百分比。因此，由于酒吧很薄，这看起来很奇怪。

我无法弄清楚如何将条形的高度再次增加到例如 50dp。如果我尝试 android:layout_height="50dp" 它仍然很薄。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T08:42:13.317

首先，您需要在项目的 values->styles.xml 中定义进度条的样式。就像是：

```
<style name="tallerBarStyle" parent="@android:style/Widget.SeekBar">
    <item name="android:indeterminateOnly">false</item>
    <item name="android:progressDrawable">@android:drawable/progress_horizontal</item>
    <item name="android:indeterminateDrawable">@android:drawable/progress_horizontal</item>
    <item name="android:minHeight">8dip</item>
    <item name="android:maxHeight">20dip</item>
</style> 
```

将 maxHeight 编辑为所需的高度。

然后在你的 ProgressBar 添加：

样式="@style/tallerBarStyle"

希望有帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T17:21:15.673

你需要更换

```
style=”?android:attr/progressBarStyleHorizontal” 
```

到

```
style="@android:style/Widget.ProgressBar.Horizontal" 
```

和 layout_height 将工作

```
android:layout_height="50dp" 
```

# java - Android UnknownHostException Facebook SDK

> ID：12607332
> 
> 赞同：5
> 
> 时间：2012-09-26T17:38:53.390
> 
> 标签：java, android, http, ip, android-networking

这是情况。我的应用程序运行良好，并且能够与 URL 建立连接。但是在让应用程序运行几个小时后，突然 Facebook 请求给了我以下错误。

```
09-26 10:01:25.175: W/System.err(252): java.net.UnknownHostException: Host is unresolved: xyz.com:80
09-26 10:01:25.175: W/System.err(252):  at java.net.Socket.connect(Socket.java:1037)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager$ConnectionPool.getHttpConnection(HttpConnectionManager.java:145)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager.getConnection(HttpConnectionManager.java:67)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getHTTPConnection(HttpURLConnection.java:821)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:807)
09-26 10:01:25.175: W/System.err(252):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1051)
09-26 10:01:25.175: W/System.err(252):  at java.net.URL.openStream(URL.java:653) 
```

此错误发生在应用程序和模拟器上。当我注销我的应用程序并重新连接到 Facebook 时，连接再次起作用。

我应该注意：**当我与自己的服务器建立连接时，不会出现问题。**

此错误是由以下行引起的...

```
mAsyncFacebookRunner.request("fql", paramaters,
                new FQLRequestListener()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:41:36.253

`java.net.UnknownHostException`通常意味着无法解析主机的 IP 地址，但实际原因可能会因情况而异。如果代码实现正确（不管你使用哪个 API，HttpUrlConnection 或 DefaultHttpClient）并且仍然间歇性发生，很可能是旧 Android 系统中与 DNS 缓存和 TTL 管理相关的错误：

[问题 7904：Android 不支持 TTL 并缓存 DNS 结果 10 分钟](http://code.google.com/p/android/issues/detail?id=7904)

自 Android 4.1 起已修复此问题，请参阅[InetAddress API Doc](http://developer.android.com/reference/java/net/InetAddress.html)中的额外说明：

> **DNS缓存**
> 
> 在 Android 4.0 (Ice Cream Sandwich) 及更早版本中，DNS 缓存由 InetAddress 和 C 库执行，这意味着 DNS TTL 无法正确处理。在以后的版本中，缓存仅由 C 库完成，并且支持 DNS TTL。

对于旧的 Android 版本，Android 建议调整 Java 级别的 DNS 属性`networkaddress.cache.ttl`，请参阅[旧源代码](http://code.metager.de/source/xref/android/4.0.3/libcore/luni/src/main/java/java/net/InetAddress.java)`networkaddress.cache.negative.ttl`中的 JavaDoc ：

```
/**
 * ... ...
 *
 * <h4>DNS caching</h4>
 * <p>On Android, addresses are cached for 600 seconds (10 minutes) by default. Failed lookups are
 * cached for 10 seconds. The underlying C library or OS may cache for longer, but you can control
 * the Java-level caching with the usual {@code "networkaddress.cache.ttl"} and
 * {@code "networkaddress.cache.negative.ttl"} system properties. These are parsed as integer
 * numbers of seconds, where the special value 0 means "don't cache" and -1 means "cache forever".
 *
 * ... ...
 */ 
```

相关讨论：

*   [Java中的UnknownHostException（有时也是如此）](https://stackoverflow.com/questions/2906745/unknownhostexception-in-java-that-too-only-sometimes)
*   [Java级DNS缓存的目的是什么？](https://stackoverflow.com/questions/6488587/what-is-the-purpose-of-java-level-dns-caching)

如果您的目标是旧的 Android 版本，请尝试调整这两个属性，看看是否有任何不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:44:29.007

如果您可以发布代码会有所帮助.....但是，根据我的经验，调用 httpClient.getConnectionManager().shutdown(); 解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T06:59:35.330

我没有任何关于网络连接、DNS 缓存和 TTL 管理的核心概念知识。

但同样的问题发生在我身上，当时*只是作为一种解决方法*，我在**Facebook 项目的****[Util.java](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Util.java)** *[Facebook SDK 的源项目] 中做了一些更改*，然后将它用于我的项目。这两个更改仅用于不同的 stackoverflow 答案。

在函数**openUrl(String url, String method, Bundle params)**

替换这一行，

```
 HttpURLConnection conn =
            (HttpURLConnection) new URL(url).openConnection(); 
```

有了这些线条，

```
 try {
            InetAddress i = InetAddress.getByName(url);
        } catch (UnknownHostException e1) {
            e1.printStackTrace();
        }

        HttpURLConnection conn = (HttpURLConnection) new URL(url)
                .openConnection();
        conn.setConnectTimeout(50000); 
```

我的问题减少了。

# aem - 如何在叠加层中显示 cq5 表单页面

> ID：12607333
> 
> 赞同：0
> 
> 时间：2012-09-26T17:38:54.473
> 
> 标签：aem

我有下面的代码在叠加层中显示一个按钮。

```
<div class="overlay22" id="overlay22" style="display:none;"></div>  
<div class="box22" id="box22">
    <input type="submit" value="Submit" class="buttonclick" id="buttonclick"  /> 
</div> 
```

我们可以在叠加层中显示 cq5 表单而不是在叠加层中进行硬编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:34:42.940

如果您只是创建某种基本的表单模板或组件，我认为您应该坚持使用常规 HTML 元素，然后使用 CSS 控制外观。尽管如果您绝对需要使用类似于您在 CQ 对话框窗口中看到的表单元素，您将需要通过使用 CQ 的 Ext JS 框架扩展来生成它们。

例如，如果您想创建一个类似于您提供的示例的按钮，您必须编写如下内容：

```
 CQ.Ext.onReady( function(){
         var button = new CQ.Ext.Button({
              text : "Submit",
              id : "buttonclick",
              cls : "buttonclick",
              renderTo : CQ.Ext.getBody(),
              listerners : {
                   click : function(){
                      // Write handler code here
                   }
              }
         });
    }); 
```

最新版 CQ (5.5) 的小部件 API：http: [//dev.day.com/docs/en/cq/current/widgets-api/index.html](http://dev.day.com/docs/en/cq/current/widgets-api/index.html)

Sencha Ext JS 3.4 上的材料（我相信 5.5 是基于此）： [http ://docs.sencha.com/ext-js/3-4/](http://docs.sencha.com/ext-js/3-4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T10:45:52.877

我们也可以按照以下方式进行，例如我们有一个页面，其中已经拖入了默认的 cq5 表单组件，让该页面在此路径中定义为 /content/geometrix/loginpage.html 现在我们可以显示上面使用以下代码在叠加层中的页面

```
 <div class="overlay22" id="overlay22" style="display:none;"></div>  
    <div class="box22" id="box22">
    <sling:include path="content/geometrix/loginpage/par" />  
    </div> 
```

低于这个标准我们可以找到表单的内容。这里 box22 是灯箱（弹出），overlay22 是背景 div

# java - 在云上发布和托管 Web 服务

> ID：12607336
> 
> 赞同：1
> 
> 时间：2012-09-26T17:39:12.570
> 
> 标签：java, web-services

我的网络服务已启动并正在运行，换句话说，它在我的 tomat 端口 8080 上发布，现在我可以通过浏览器访问它我希望我的网络服务在云上发布，以便我可以通过 wsdl uri给世界上的任何人，他可以访问我的 wsdl。请告知如何实现这一点..!!亚马逊会提供这样的设施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:56:07.970

我尝试了各种选择，亚马逊的[Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)是最无缝的。您可以通过简单地上传一个战争来启动您的 Java 网络服务。但是，它确实需要运行 EC2 实例。

其他选项是[Heroku](http://www.heroku.com/)和[Windows Azure](http://www.windowsazure.com/en-us/)

Heroku 有一个免费层并使用 Maven/Git 将应用程序部署到他们的服务器。[https://devcenter.heroku.com/articles/deploy-a-java-web-application-that-launches-with-jetty-runner](https://devcenter.heroku.com/articles/deploy-a-java-web-application-that-launches-with-jetty-runner)

Windows Azure 还提供了有关如何在其平台上部署 java webapp 的说明。[http://www.windowsazure.com/en-us/develop/java/](http://www.windowsazure.com/en-us/develop/java/)

鉴于这些选项，在我个人看来，最便宜的是 Heroku，最方便的是 Amazon Elastic Beanstalk。

# css - 溢出隐藏在构建滑块时不隐藏溢出

> ID：12607339
> 
> 赞同：1
> 
> 时间：2012-09-26T17:39:19.630
> 
> 标签：css, slider, overflow

我正在尝试创建一个可以左右移动的滑块。我只想显示 3 张幻灯片，所以我将容器的宽度设置为每个内部幻灯片的宽度 * 3 并设置`overflow:hidden`. 那么第四张幻灯片不应该被隐藏吗？然后稍后我可以为容器设置动画，使其具有 -110 像素的边距，因此幻灯片 2-4 显示。

[http://jsbin.com/welcome/27336/edit](http://jsbin.com/welcome/27336/edit)

HTML：

```
<div class="container">
  <div class="inner">1</div>
  <div class="inner">2</div>
  <div class="inner">3</div>
  <div class="inner">shouldn't be here</div>
</div> 
```

CSS：

```
.container { width: 330px; overflow:hidden; background:#e6e6e6; }
.inner { width: 110px; background: orange; float:left; } 
```

它是如何呈现的：![在此处输入图像描述](../Images/3bc1a8e1247b3dd8f10ecdf7c540e2e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:46:31.797

如何设置元素的高度：

```
.container { 
    width: 330px; 
    overflow:hidden; 
    background:#e6e6e6; 
    height:20px 
}

.inner { 
    width: 110px; 
    background: orange; 
    float:left; 
    height: 20px;
} 
```

容器的高度随内部元素调整，这就是你看到第四个元素的原因

# c# - Aforge 从一个图像中获取 blob 并从其他图像中提取相同的位置

> ID：12607340
> 
> 赞同：1
> 
> 时间：2012-09-26T17:39:21.887
> 
> 标签：c#, image, aforge

我有一个图像，我做了一些处理，以便将背景与前景分开，创建一个二进制（黑/白）图像。

使用 AForge，我能够从处理后的图像中检测到所有 blob，并将它们返回。

因此，我将原始图像复制到“SourceImg”，进行一些过滤以分离背景并使其成为二进制图像，然后我可以正确地进行 blob 提取。

```
 public static List<Bitmap> ApplyBlobExtractor(Bitmap SourceImg)
    {
        List<Bitmap> ImgLetters = new List<Bitmap>();
        AForge.Imaging.BlobCounter blobCounter = new AForge.Imaging.BlobCounter();

        // Sort order
        blobCounter.ObjectsOrder = AForge.Imaging.ObjectsOrder.XY;
        blobCounter.ProcessImage(SourceImg);
        AForge.Imaging.Blob[] blobs = blobCounter.GetObjects(SourceImg, false);

        // Adding images into the image list            
        AForge.Imaging.UnmanagedImage currentImg;
        foreach (AForge.Imaging.Blob blob in blobs)
        {
            currentImg = blob.Image;
            ImgLetters.Add(currentImg.ToManagedImage());
        }
        return ImgLetters;
    } 
```

我真正想做的是使用这些 blob 的信息从原始的、未处理的图像中提取位置。

理想情况下，我想像切饼干一样使用 blob，并从我最初的未处理图像文件中提取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:12:13.090

您可以使用Blob 的图像和源图像来使用[AForge.Imaging.Filters.Intersect类。](http://www.aforgenet.com/framework/docs/html/7244211d-e882-09b1-965d-f820375af8be.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:06:48.913

假设您的部分图像处理没有调整原始图像的大小，为什么不循环应用裁剪变换到原始图像，将裁剪矩形设置为 blob 的 Rectangle 属性？

# asp.net - 使用 gmail smtp 服务器设置在 asp.net 中进行密码恢复控制 - 消息显示在网站上，而不是通过电子邮件发送

> ID：12607341
> 
> 赞同：0
> 
> 时间：2012-09-26T17:39:33.600
> 
> 标签：asp.net

请耐心等待我是 ASP.NET 的新手。这是我所做的，

网页配置

```
<system.net>
  <mailSettings>
   <smtp from="mygmail@gmail.com">
   <network host="smtp.gmail.com" password="mygmailpwd" 
     userName="mygmail@gmail.com" enableSsl="true"/>
   </smtp>
  </mailSettings>
</system.net> 
```

PASSWORDRECOVERYRES.ASPX

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="PasswordRecoveryRes.aspx.cs" Inherits="PasswordRecovery" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<h1> Forgot Your Password?</h1>
    <asp:PasswordRecovery ID="PasswordRecovery1" runat="server" 
        onsendingmail="PasswordRecovery1_SendingMail" 
        onsendmailerror="PasswordRecovery1_SendMailError" 
        onverifyinganswer="PasswordRecovery1_VerifyingAnswer" 
        onverifyinguser="PasswordRecovery1_VerifyingUser">
        <MailDefinition From="mygmail@gmail.com" Subject="Password Recovery">
        </MailDefinition>
    </asp:PasswordRecovery>
</asp:Content> 
```

PASSWORDRECOVERYRES.ASPX.CS

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;

public partial class PasswordRecovery : System.Web.UI.Page
{
  protected void Page_Load(object sender, EventArgs e)
  {

  }
  protected void PasswordRecovery1_SendingMail(object sender, MailMessageEventArgs e)
  {
      PasswordRecovery1.SuccessText = e.Message.Body;
      e.Cancel = true;
  }
  protected void PasswordRecovery1_SendMailError(object sender, SendMailErrorEventArgs e)
  {

  }
  protected void PasswordRecovery1_VerifyingAnswer(object sender, LoginCancelEventArgs e)
  {

  }
  protected void PasswordRecovery1_VerifyingUser(object sender, LoginCancelEventArgs e)
  {

  }
} 
```

当我运行 PASSWORDRECOVERYRES.ASPX 时，我没有收到任何错误。显示以下消息

```
"Please return to the site and log in using the following information. User Name: username1 Password: %#;IXWh3b:Zj$:" 
```

但是这条消息不应该从 mygmail@gmail.com 通过电子邮件发送到 username1@gmail.com 吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:46:54.843

在您的 SendingMail 事件 ( `PasswordRecovery1_SendingMail`) 中，您首先将邮件正文复制到控件，然后取消该事件（这会阻止发送电子邮件）。

令人惊讶的是，这两个操作是您背后代码中唯一的用户代码，您仍然会问为什么它不起作用。它的工作原理与您实现它的方式完全相同。注释这两行代码，你很可能会得到想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:39:00.673

参考这个网址：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.passwordrecovery.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.passwordrecovery.aspx)

```
protected void PasswordRecovery1_SendingMail(object sender, MailMessageEventArgs e)
{
    PasswordRecovery1.SuccessText = "Mail Sent Successfully!!";
} 
```

# php - Amazon S3 在上传时获取对象的版本 ID

> ID：12607344
> 
> 赞同：1
> 
> 时间：2012-09-26T17:39:40.633
> 
> 标签：php, api, amazon-s3, amazon-web-services

我在存储桶中启用了版本控制，以防止覆盖同名文件。当我在我的 php 应用程序中创建一个对象时，我需要将版本 ID 存储在我的数据库中以在删除对象时使用。

我目前正在从上传返回的标头响应中获取版本 ID

```
//upload the file           
$response = $s3->create_object($bucket, $filename, array(
    'fileUpload' => $filepath,
    'acl' => AmazonS3::ACL_PUBLIC,
    'contentType' => $this->upload->file_type,
    'storage'     => AmazonS3::STORAGE_REDUCED,         
));

//get version id 
$version_id' => $response->header['x-amz-version-id']; 
```

这是正确的方法吗？删除对象时需要使用版本ID，上传时需要将相应对象的版本ID保存在数据库中。我非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:00:09.987

为什么要在数据库中保留版本 ID，您可以从给定前缀和对象的版本列表中再次取回该版本 ID。这将返回给定对象的所有版本。哪个标记哪个是最新的，哪个是删除的等等。

我来自 Bucket Explorer 的开发团队，您可以使用它查看清单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T07:05:46.907

是的，这是在上传时获取版本 ID 的最有效方式。

当 S3 已经为您执行此操作时，我仍然不清楚您将对象版本的版本 ID 存储在数据库中的原因。通过调用[AmazonS3::list_bucket_object_versions()](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/list_bucket_object_versions)并传递一个`prefix`值以专门针对存储桶中的单个对象，S3 将返回该对象的所有对应版本 ID 的列表。

我希望这有帮助！:)

# java - 如何将自己的 jar 导入 android 项目 (ADT 20)

> ID：12607345
> 
> 赞同：0
> 
> 时间：2012-09-26T17:39:40.807
> 
> 标签：java, android, eclipse

如果我将自制的 jar 文件导入我的 Android 项目（将其添加到 libs 文件夹），我会收到 dalvikvm 发送的“找不到类”错误。（我正在使用 Eclipse）

显然这不是导入错误，因为下载的 jars（如 jdome）可以正常工作。

所以我想这是一个出口错误。我导出jar的方式是：右键项目->导出->jar->保留默认设置->完成

我确定这不是内部问​​题，因为 jar 仅包含一个类，该类出于测试原因只有一种方法。

有谁知道我做错了什么？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:03:58.510

只需将 .jar 文件复制并粘贴到项目的 libs 文件夹中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:54:45.990

是的，我希望这对你有用：

*   转到您的项目
*   右键点击
*   特性
*   Java 构建路径
*   图书馆
*   添加外部罐子
*   选择 jar 文件
*   好的

# android - Android - 阻止可编辑的日历事件

> ID：12607347
> 
> 赞同：0
> 
> 时间：2012-09-26T17:39:56.050
> 
> 标签：android, events, calendar

我想不是，只是为了尝试。是否可以以编程方式添加事件并且无法再编辑此事件？用户只能删除事件，但不能编辑它，例如，他不能编辑事件的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:14:49.923

我认为这是可能的，但它会很复杂。您应该查看[日历提供程序 API](http://developer.android.com/intl/de/guide/topics/providers/calendar-provider.html)，并且您可能希望了解[Last.fm 应用程序](https://github.com/c99koder/lastfm-android)是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T16:07:23.210

`CalendarContract.Events.IS_ORGANIZER`创建日历时，尝试将内容值放入`true`事件和`CalendarContract.Calendars.OWNER_ACCOUNT`用户帐户的电子邮件中。

# wordpress - wordpress 中嵌入 Vimeo 视频的特色图片

> ID：12607348
> 
> 赞同：1
> 
> 时间：2012-09-26T17:39:57.267
> 
> 标签：wordpress, image, vimeo

我一直在尝试[将此脚本](https://wordpress.stackexchange.com/questions/25808/setting-a-posts-featured-image-from-an-embedded-youtube-video)改编为 vimeo，但没有任何结果。我不想使用插件，只是一个脚本来添加仅适用于 Vimeo 和 Youtube 的 functions.php。

我可以通过以下方式获取网址图片：

```
$hash = unserialize(file_get_contents('http://vimeo.com/api/v2/video/'. $vimeo_id .'.php')); 
echo $hash[0]['thumbnail_large'];} 
```

但我不知道如何接受并在“$vimeo_thumb_url”中介绍它

```
function set_vimeo_as_featured_image($post_id) {   

    // only want to do this if the post has no thumbnail 
    if(!has_post_thumbnail($post_id)) {  

        // find the vimeo url 
        $post_array = get_post($post_id, ARRAY_A); 
        $content = $post_array['post_content']; 
        $vimeo_id = get_vimeo_id($content); 

        // build the thumbnail strings 

        $vimeo_thumb_url = ''; 

        // next, download the URL of the vimeo image 
        media_sideload_image($vimeo_thumb_url, $post_id, 'Sample vimeo image.'); 

        // find the most recent attachment for the given post 
        $attachments = get_posts( 
            array( 
                'post_type' => 'attachment', 
                'numberposts' => 1, 
                'order' => 'ASC', 
                'post_parent' => $post_id 
            ) 
        ); 
        $attachment = $attachments[0]; 

        // and set it as the post thumbnail 
        set_post_thumbnail( $post_id, $attachment->ID ); 

    } // end if 

} // set_vimeo_as_featured_image 
add_action('save_post', 'set_vimeo_as_featured_image'); 

function get_vimeo_id($content) { 

    // find the vimeo-based URL in the post 
    $urls = array(); 
    preg_match('#http://(?:\w+.)?vimeo.com/(?:video/|moogaloop\.swf\?clip_id=)(\w+)#i', $content, $urls); 
    // next, locate the vimeo video id 
    $vimeo_id = ''; 
    if(strlen(trim($vimeo_url)) > 0) { 
        parse_str( parse_url( $vimeo_url, PHP_URL_QUERY ) ); 
        $vimeo_id = $v; 
    } // end if 

        return $vimeo_id;  

} // end get_vimeo_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:44:00.463

您可以通过以下方式获取图片链接：

```
$hash = unserialize(file_get_contents("http://vimeo.com/api/v2/video/$video_id.php"));
$src = $hash[0]['thumbnail_large']; 
```

哈希数组包括 src 到不同大小的图像。只需选择，您需要什么。

# java - 无法连接zookeeper然后hbase master关闭

> ID：12607349
> 
> 赞同：5
> 
> 时间：2012-09-26T17:40:08.407
> 
> 标签：java, hbase, apache-zookeeper

经过几次尝试，我使用 hbase 0.94.1 和 zookeeper 3.3.6，hbase 的 master 关闭并且 sw 退出

这些是我从 shell 得到的错误

```
12/09/26 18:58:35 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
12/09/26 18:58:35 INFO zookeeper.ClientCnxn: Opening socket connection to server /127.0.0.1:2181
12/09/26 18:58:35 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 5133@xxx-xxx
12/09/26 18:58:35 INFO zookeeper.ClientCnxn: Socket connection established to localhost/127.0.0.1:2181, initiating session
12/09/26 18:58:35 WARN zookeeper.ClientCnxnSocket: Connected to an old server; r-o mode will be unavailable
12/09/26 18:58:35 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13a037edbb2000c, negotiated timeout = 40000
12/09/26 18:58:36 ERROR client.HConnectionManager$HConnectionImplementation: Check the value configured in 'zookeeper.znode.parent'. There could be a mismatch with the one configured in the master.
12/09/26 18:58:36 INFO client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13a037edbb2000c
12/09/26 18:58:36 INFO zookeeper.ZooKeeper: Session: 0x13a037edbb2000c closed
12/09/26 18:58:36 INFO zookeeper.ClientCnxn: EventThread shut down

org.apache.hadoop.hbase.MasterNotRunningException: Retried 10 times
    at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:127)
    at util.HBaseHelper.<init>(HBaseHelper.java:29)
    at util.HBaseHelper.getHelper(HBaseHelper.java:33)
    at driver.ABoxHbaseTableMaker.makeTable(ABoxHbaseTableMaker.java:39)
    at driver.ABoxImporterDriver.run(ABoxImporterDriver.java:55)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at driver.ABoxImporterDriver.main(ABoxImporterDriver.java:32)
    at gui.Main.jButton1ActionPerformed(Main.java:274)
    at gui.Main.access$3(Main.java:241)
    at gui.Main$5.actionPerformed(Main.java:160)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    ... 
```

T试图改变端口，但没有。

这些是配置文件：

**动物园.cfg：**

```
tickTime=2000
dataDir=/home/.../.../zookeeper-3.3.6/data
clientPort=2181 
```

**hbase-site.xml**

```
<configuration>
<property>
    <name>hbase.rootdir</name>
    <value>file:///home/.../.../hbase-0.94.1/hbDATA/</value>
  </property>
 <property>
    <name>hbase.zookeeper.quorum</name>
    <value>localhost</value>
 </property>
 <property>
    <name>zookeeper.znode.parent</name>
    <value>file:///home/.../.../hbase-0.94.1/hbDATA/</value>
 </property>
 <property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2181</value>
 </property>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:56:26.953

如果您在独立模式下使用 HBase，您甚至不需要所有这些属性..虽然，伪或完全分布式模式需要额外设置..通过查看您的配置道具，我假设您在本地使用 HBase模式。所以你可以跳过所有这些东西。而对于伪分布式模式，HBase 的默认 ZK 就足够了。

# java - 是否可以在 android 应用程序中使用自定义 java 类？

> ID：12607354
> 
> 赞同：-2
> 
> 时间：2012-09-26T17:40:24.383
> 
> 标签：java, android

我知道 Android 应用程序是用 Java 编写的。我只是想知道是否可以在 Android 应用程序中使用自定义 Java 类。该类使用以下 java 库：

`import java.awt.*; import java.awt.event.*; import java.util.*; import javax.swing.*;`

如果不是，我需要哪些等效的 Android 库进行翻译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:41:50.573

不，Android 设备不支持 awt/swing，因此会出现编译错误。Android 有自己的 UI 和自己的小部件。[在此处](http://developer.android.com/guide/topics/ui/index.html)查看android UI 信息

有一个库项目[awt-android-compat](http://code.google.com/p/awt-android-compat/)由于问题太多而未激活:)

**更新**

[JLS#7.5.2。按需类型导入声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.2)

```
import java.awt.*; import java.awt.event.*; import java.util.*; 
import javax.swing.*; 
```

这些所有声明都是按需进口的。如果不使用，编译器会忽略它们。与编译代码一样好，它们不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:43:22.243

你并使用java类。我使用[杰克逊](http://jackson.codehaus.org/)JSON 解析器。只需将 jar 文件放在 /lib 文件夹中即可。但是，我认为对于 UI，您不能使用 swing 之类的东西。最好坚持使用 Android API。而且 Android API 实际上比 AWT 更容易使用

# c# - 如何根据参数转换对象类型？

> ID：12607356
> 
> 赞同：2
> 
> 时间：2012-09-26T17:40:34.373
> 
> 标签：c#, casting, xml-deserialization

我有一个简单的问题，但我不确定处理它的最佳方法是什么。

我有几个不同的设置文件，我有一个 GetData 方法，它接收一个“路径”参数。

```
 public static CountriesInfo GetDataFromFile(string path)
    {
        if (!File.Exists(path))
        {
            return null;
        }

        try
        {
            CountriesInfo tempData = new CountriesInfo();
            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(tempData.GetType());
            StreamReader tempReader = new StreamReader(path);
            tempData = (CountriesInfo)x.Deserialize(tempReader);
            tempReader.Close();
            return tempData;
        }
        catch
        {
            return null;
        }
    } 
```

重构它以支持传递对象类型，然后从方法内进行强制转换的最佳方法是什么？现在返回类型（在这个例子中）是国家信息，但我不想有几个相同的函数，唯一的区别是返回类型和方法中的转换。

最好做一些事情，比如传递一个 ref 参数并以这种方式从对象中获取类型？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:43:12.867

请改用通用方法：

```
public static T GetDataFromFile<T>(string path) where T : class
{ 
    if (!File.Exists(path)) 
    { 
        return null; 
    } 

    try 
    { 
        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T)); 
        StreamReader tempReader = new StreamReader(path); 
        T result = (T)x.Deserialize(tempReader); 
        tempReader.Close(); 
        return result; 
    } 
    catch 
    { 
        return null; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:43:48.827

```
public static T GetDataFromFile<T>(string path) where T : class
{
    if (!File.Exists(path))
    {
        return null;
    }

    try
    {
        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T));
        using(StreamReader tempReader = new StreamReader(path))
        {
            return (T)x.Deserialize(tempReader);
        }
    }
    catch
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:57:32.240

处理此问题的最简单方法是使用 Convert.ChangeType 方法并返回动态类型，尝试如下操作：

```
 public static dynamic GetDataFromFile(string path, Type convertType) 
    { 
        if (!File.Exists(path)) 
    { 
        return null; 
    } 

    try 
    { 
        CountriesInfo tempData = new CountriesInfo(); 
        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer  (tempData.GetType()); 
        StreamReader tempReader = new StreamReader(path); 
        tempData = (CountriesInfo)x.Deserialize(tempReader); 
        tempReader.Close(); 
        return Convert.ChangeType(CountriesInfo, convertType);
    } 
    catch 
    { 
        return null; 
    } 
} 
```

# git - Jenkins 手动 Git 标签是如何使用的？

> ID：12607361
> 
> 赞同：1
> 
> 时间：2012-09-26T17:40:45.383
> 
> 标签：git, deployment, continuous-integration, jenkins

我可以单击任何构建上的“无标签”图标并创建一个新标签，但 Jenkins 不会将其推送到源服务器。那么有什么意义呢？

使用 Git，我了解 Jenkins 可以进行预构建合并，并在成功标记它并推送到原点（我确实有工作）但我无法指定描述性标签，因为构建是通过两种不同的方式启动的......

1.  **通过 Git 钩子对源**的每个提交 - Jenkins 作业不断构建并发布到开发服务器。在这种情况下，标签是一些自动生成的值（例如 jenkins-build-$BUILD_NUMBER），这没有多大帮助，我宁愿不标记每个提交。

2.  **手动构建**- 在这种情况下，我希望开发人员使用适当的值（例如 1.0.3）标记他们在 Jenkins 中的最后构建，然后选择将该标签部署到另一个环境......但是如何？

这与 Subversion 配合得很好（甚至还有一个很棒的小插件，可以在下拉列表中显示最后 10 个 SVN 标签），但我似乎无法用 Git 完成它。

# python - python中的解析器完成过滤任务

> ID：12607362
> 
> 赞同：0
> 
> 时间：2012-09-26T17:40:48.443
> 
> 标签：python, parsing, text-parsing

作为一个练习，我有兴趣在 python 中编写一个小解析器，它可以使用一组潜在的标签、运算符和括号，以便我可以指定如下内容：

```
(DP>10) & (LowMQ[0] < 0.05) & (SPV < 0.05) 
```

我需要解析标签 DP、LowMQ 和 SPV 以及操作符和操作顺序。我在 Java 中经常看到这种做法，但我在 python 中没有看到这种做法。关于从哪里开始或一些示例代码的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:59:13.330

由于您的语法是 Python 语法的子集，因此您可以使用 Python 的内置[`ast.parse`](http://docs.python.org/library/ast.html#ast.parse)：

```
>>> import ast, textwrap
>>> src = "(DP>10) & (LowMQ[0] < 0.05) & (SPV < 0.05)"
>>> print '\n'.join(textwrap.wrap(ast.dump(ast.parse(src)), width=80))
Module(body=[Expr(value=BinOp(left=BinOp(left=Compare(left=Name(id='DP',
ctx=Load()), ops=[Gt()], comparators=[Num(n=10)]), op=BitAnd(),
right=Compare(left=Subscript(value=Name(id='LowMQ', ctx=Load()),
slice=Index(value=Num(n=0)), ctx=Load()), ops=[Lt()],
comparators=[Num(n=0.050000000000000003)])), op=BitAnd(),
right=Compare(left=Name(id='SPV', ctx=Load()), ops=[Lt()],
comparators=[Num(n=0.050000000000000003)])))]) 
```

不能解决一般情况，但很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:44:12.113

Yapps 看起来很有希望。[http://theory.stanford.edu/~amitp/yapps/](http://theory.stanford.edu/~amitp/yapps/)

# javascript - Jquery悬停功能不起作用

> ID：12607366
> 
> 赞同：0
> 
> 时间：2012-09-26T17:41:31.357
> 
> 标签：javascript, jquery, html, css

HTML

```
<p id="para"> This is a paragraph</p> 
```

JS/jQuery

```
$("para").hover(function() {$(this).hide();}, function() {$(this).show();}); 
```

现在我想要的是当鼠标在段落上时，元素应该隐藏，当鼠标离开时，元素应该再次可见。但是，该段落都没有隐藏，因此不会出现。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:42:19.193

你错过了**#ID**选择器，只有“para”正在寻找一个标签`<para>`（在这种情况下当然不存在。

```
$("#para") 
```

在旁注中，您通常希望将某种`div`（假设是固定大小）等包裹在这样的情况下，并且从那里获取悬停事件，并显示内部 div。使它不那么“跳跃”。

此外，如果您使用 div 执行此操作，则可以使用 CSS 完成：

```
div:hover #para { display:block; } 
```

[jsFiddle CSS 示例](http://jsfiddle.net/hPJK7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:42:54.240

您错过了 ID 的“#”。

```
$("#para").hover(function() {$(this).hide();}, function() {$(this).show();}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T17:46:19.433

假设缺少`#`作为 OP 中的错字..您的代码将无法按预期工作..因为隐藏元素时将触发鼠标移出。

**演示：http:** [//jsfiddle.net/s8cpz/](http://jsfiddle.net/s8cpz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:48:50.933

这段代码永远不会起作用。当您将鼠标悬停在它上面时，它应该会立即消失，对吗？但是，当它消失时，鼠标仍然在它上面，因此消失`p`会将其注册为`mouseleave`, （它所看到的只是光标与它分开，无论光标是罪魁祸首，还是它本身，它都没有' t care)，有效地触发 的`mouseleave`处理程序`hover`，这将无限期地继续，导致 . 的快速闪烁`p`。您可以`$("p").css({opacity',0.01})`代替`$('p').hide()`. 检查此代码的问题：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
setTimeout(function() { $("p").hide(); },10000);
$("#para").mouseleave(function() {alert('cool');}); 
});
</script>
</head>
<body>
<p id="para"> This is a paragraph</p>

</body>
</html> 
```

将鼠标保持在 上`p`，10 秒后，当`p`消失时，您将看到警报弹出，表示`mouseleave`处理程序已触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:50:04.217

如果你用 ('#para') 更正 ('para') 你就不能达到你的目标，因为当你立即隐藏 p 标签时 mouseout 事件激活和 hide() 方法运行并且你 p 标签开始闪烁直到鼠标光标悬停。这个解决方案可能会有所帮助。

```
$("#body").hover(function(){
$("#para").css("visibility","hidden");},
            function() 
            {$("#para").css("visibility","visible");
            }
           ); ​

<div id="body">
  <p id="para"> This is a paragraph</p>
<div>​ 
```

[演示](http://jsfiddle.net/afshinprofe/Cc6Ty/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T17:52:34.403

首先，你错过了**#**，其次，当一个元素隐藏时，它的 css display 属性变为 none，因此它不占用页面空间，**所以鼠标不再在它上面**，它会再次显示。这会创建一个无限循环。像这样的错误纯粹是合乎逻辑的，有时甚至会使旧版本的浏览器崩溃。

# google-apps-script - 动态地将范围添加到 Google EmbeddedChart

> ID：12607367
> 
> 赞同：1
> 
> 时间：2012-09-26T17:41:32.040
> 
> 标签：google-apps-script, google-visualization, google-sheets

我想将范围动态添加到新的 EmbeddedChartBuilder 但我收到此错误：

“在 dashOutput - 行：605，错误：InternalError：找不到方法 insertChart($Proxy843)。”

这是不是动态但有效的代码：

```
var tRange = sourceSheet.getRange(12, 1, 4, 2);
var tRange2 = sourceSheet.getRange(12,3,4,2);
var chart2 = destSheet.newChart()
             .setPosition(5,6,5,5)
             .setChartType(Charts.ChartType.LINE)
             .addRange(tRange)
             .addRange(tRange2)
             .build();
destSheet.insertChart(chart2); 
```

但这给了我这个错误。

```
var tRange = sourceSheet.getRange(12, 1, 4, 2);
var tRange2 = sourceSheet.getRange(12,3,4,2);
var chart2 = destSheet.newChart()
             .setPosition(5,6,5,5)
             .setChartType(Charts.ChartType.LINE);
chart2.addRange(tRange);
chart2.addRange(tRange2);
chart2.build();
destSheet.insertChart(chart2); 
```

第二个示例不是动态的，但如果它有效，我会在循环内重复 .addRange() 。

有任何想法吗？我错过了什么？您真的必须知道在创建图表时要添加多少范围吗？

谢谢，埃里克 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:06:37.853

问题在于[Sheet.newChart](https://developers.google.com/apps-script/class_sheet#newChart)方法创建了[EmbeddedChartBuilder](https://developers.google.com/apps-script/class_embeddedchartbuilder)类的实例，[EmbeddedChartBuilder.build](https://developers.google.com/apps-script/class_embeddedchartbuilder#build)方法创建了[EmbeddedChart](https://developers.google.com/apps-script/class_embeddedchart)类的实例，而[Sheet.insertChart](https://developers.google.com/apps-script/class_sheet#insertChart)方法需要该`EmbeddedChart`实例。在第一种代码中，`chart2`变量是`EmbeddedChart`类的实例，在第二种情况下，`chart2`变量是`EmbeddedChartBuilder`类的实例。这就是发生错误的原因。更改代码如下。它应该工作。

```
var tRange = sourceSheet.getRange(12, 1, 4, 2);
var tRange2 = sourceSheet.getRange(12,3,4,2);
var chart2 = destSheet.newChart()
             .setPosition(5,6,5,5)
             .setChartType(Charts.ChartType.LINE);
chart2.addRange(tRange);
chart2.addRange(tRange2);
destSheet.insertChart(chart2.build()); 
```

# vb.net - 具有输入类参数的 Web 服务将其转换为数组

> ID：12607369
> 
> 赞同：2
> 
> 时间：2012-09-26T17:41:35.357
> 
> 标签：vb.net, web-services

我有一个 WebService 定义如下：

```
<WebMethod(Description:="Retrieve a list of account profiles.")> _
<System.Web.Services.Protocols.SoapHeader("MyHeader")> _
Public Function RetrieveAccountProfile(<XmlElement(IsNullable:=True, Type:=GetType(WSRetrieveAccountProfile))> ByVal myAccount As WSRetrieveAccountProfile) As <XmlElement(IsNullable:=True)> WSResponseRetrieveAccountProfile
... 
```

我作为输入参数传递的类`WSRetrieveAccountProfile`定义如下：

```
<Serializable()> _
<XmlType(Namespace:="http://mynamespace/", TypeName:="WSRetrieveAccountProfile")> _
Public Class WSRetrieveAccountProfile

    <XmlElement(IsNullable:=False)> Public accountNumber As List(Of Integer)

    Public Sub New()
    End Sub

    Public Function Validate() As Boolean
        'Validations here
        Return True
    End Function
End Class 
```

问题：我使用 Web 服务，我正在客户端工作，我试图声明一个类型的对象，`WSRetrieveAccountProfile`以便在调用 Web 服务时将其作为输入参数传递，但我得到编译错误 - 它不能识别类型。

检查 Reference.vb 后，我注意到该函数的输入参数是 Integer 的普通数组`ByVal myAccount() As Integer`。`WSRetrieveAccountProfile`现在，如果我在类定义中添加另一个变量，则`ByVal myAccount() As Integer`突然更改为`ByVal myAccount As WSRetrieveAccountProfile`并解决了问题。

如何在不添加不必要变量的情况下解决此问题？我尝试使用 XmlType 属性没有运气。

*** 更新 *** 此定义有效：

```
<Serializable()> _
<XmlType(Namespace:="http://mynamespace/", TypeName:="WSRetrieveAccountProfile")> _
Public Class WSRetrieveAccountProfile

    <XmlElement(IsNullable:=False)> Public accountNumber As List(Of Integer)
    <XmlElement(IsNullable:=True)> Public TEST As String
    Public Sub New()
    End Sub

    Public Function Validate() As Boolean
        'Validations here
        Return True
    End Function
End Class 
```

*** 更新 - 解决方案 ***

如果我 `<XmlElement(IsNullable:=False)> Public accountNumber As List(Of Integer)` 改为 `<XmlArray(IsNullable:=True)> Public accountNumber As List(Of Integer)`

然后代理正确生成，我不再有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:41:14.130

改变

`<XmlElement(IsNullable:=False)> Public accountNumber As List(Of Integer)`

至

`<XmlArray(IsNullable:=True)> Public accountNumber As List(Of Integer)`

修复代理生成。

# magento - Magento 中的 Google 结帐发货

> ID：12607381
> 
> 赞同：1
> 
> 时间：2012-09-26T17:41:56.580
> 
> 标签：magento, google-api, google-checkout

在我们的网站 www.theprinterdepo.com 中，我们将实施 google checkout。但是我不确定使用什么运输方式或策略。

在此页面中： [https ://developers.google.com/checkout/developer/Google_Checkout_XML_API_Carrier_Calculated_Shipping#Process](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Carrier_Calculated_Shipping#Process)

谷歌说他们是根据物品的总重量来计算的，但问题是如果一个人买一台打印机没问题，但如果他订购了 3 台 50 磅的打印机，运费以 150 磅计算是无效的。它必须按 3 包 50 磅计算。

在这种情况下你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:25:44.097

我对此只进行了最少的调查，但我认为默认安装无法处理此问题。我知道您需要一个可以支持 Google API shipping-packages 的运输扩展，但真正的问题是，即使是 Google API 也不能支持多个包，无论是通过 API 限制还是选择限制。

```
The <shipping-packages> tag encapsulates information about
all of the packages that will be shipped to the buyer. 
At this time, merchants may only specify one package per order 
```

我希望看到它得到充分利用，因为它可以说任何重量超过 x 的东西都需要额外的包装，但目前我认为这是不可能的。虽然这可以通过将订单分成三个订单来实现，但这会使用户体验过于复杂，并可能导致销售损失。

来源： [https ://developers.google.com/checkout/developer/Google_Checkout_XML_API_Carrier_Calculated_Shipping#tag_shipping-packages](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Carrier_Calculated_Shipping#tag_shipping-packages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T22:30:16.250

上面提到的“限制”只有*当*您依赖 Google 使用他们所说的为您计算运费时`carrier-calculated-shipping`。

您确实有其他选择来计算运费：

*   您可以使用基于购物车内容的任何公式（或运输服务/插件）预先计算（在将购物车交给 Google 进行结帐之前您会知道这一点），这实际上是向Google发送[统一运费](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Flat_Rate_Shipping)， 也许;

*   使用该[`merchant-calculations-api`](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Merchant_Calculated_Shipping)选项，以便您可以考虑目的地/送货地址（不仅仅是购物车内容）。此选项更复杂（您需要处理来自 Google 的回调），但它确实为您提供了在计算运费时可以使用的关键信息。

嗯……

# shell - 如何在 shell 脚本中集成 Spring 批处理命令行调用

> ID：12607384
> 
> 赞同：1
> 
> 时间：2012-09-26T17:42:09.540
> 
> 标签：shell, spring-batch

我有一个通过命令行调用的 spring 批处理应用程序。我想将该调用放在一个 shell 脚本中，这样我就可以运行一个脚本而不是整个命令。

例如，我的调用如下所示：

java -jar 运行=1

问题是对于每次运行，作业参数都需要递增。有没有一种方法可以让我在 shell 脚本中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:36:26.117

你像往常一样需要一个增量器。

```
<bean id="simpleIncrementer"
class="org.springframework.batch.core.launch.support.RunIdIncrementer"/>
<job id="myJob" incrementer="simpleIncrementer">
</job> 
```

此增量器与[CommandLineJobRunner](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/launch/support/CommandLineJobRunner.html)一起使用的技巧是在运行任务时添加**-next**参数。

> -next：（可选）根据Job中的JobParametersIncrementer按顺序开始下一个

像这样的东西：

```
java –jar myjob.jar jobs/myjob.xml myjob -next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:03:59.067

您可以通过这种方式使用 for 循环执行 n 次（在终端中）：

```
for i in {1..10}; do java -jar run=$i; done 
```

# windows-phone-7.1 - Windows Phone App，远程触发摄像头

> ID：12607385
> 
> 赞同：2
> 
> 时间：2012-09-26T17:42:13.083
> 
> 标签：windows-phone-7.1, image

尝试开发我的第一个 Windows Phone 应用程序，我想知道是否有办法触发相机远程拍照。

我对此所做的研究表明，应用程序不可能读取短信，因此通过文本触发似乎不是一种选择。

有没有其他方法可以让相机拍照？或者它是否可以设置为在收到任何文本时拍照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:47:11.347

您的应用程序必须正在运行才能打开相机。

# grails - 使用标准，我如何获得基于 Grails GORM 中的 max(column) 的结果列表

> ID：12607386
> 
> 赞同：2
> 
> 时间：2012-09-26T17:42:15.317
> 
> 标签：grails, hql, grails-orm, criteria

假设我有这个 GORM 对象

```
Class Person {
  String country
  int age
  String Name
} 
```

我想为每个国家找到最年长的人

我可以通过这种方式获得投影，但我想要 Person 对象的列表。

```
def results = Person.withCriteria {
  projections {
    groupProperty("country")
    max('age')
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:56:09.833

```
def countries = Person.executeQuery(
    "select distinct person.country from Person person")
def persons = countries.collect{ country ->
    Person.executeQuery(
        "from Person as person1 " +
        "where person1.country='${country}' and person1.age=" +
            "("+
            "select max(age) "+
            "from Person as person2 "+
            "where person2.country='${country}' "+
            "group by person2.country "+
            ")"
         )
} 
```

希望这会有所帮助。这将返回一个列表列表，因为每个国家/地区都有可能存在一个具有最大年龄的人的列表。

# asp.net-mvc-3 - ASP.NET MVC 路由错误

> ID：12607388
> 
> 赞同：0
> 
> 时间：2012-09-26T17:42:17.057
> 
> 标签：asp.net-mvc-3, routes

我在尝试在 ASP.NET MVC 3 中使用路由时遇到了一些麻烦。我在这个 URL 中：

mysite/InitialPage/123456 <- 合作伙伴 ID

路由它...

```
routes.MapRoute(
    "InitialPageRoute",
    "InitialPage/{partnerID}",
    new { controller = "InitialPage", action = "Index" }
); 
```

好的，它工作正常。当我把 Html.ActionLink 重定向到另一个页面时......

```
@Html.ActionLink("Another copy of some bill", "CopyOfBill", "Payment", new { partnerID = ViewBag.PartnerID }) 
```

并以这种方式路由...

```
routes.MapRoute(
    "CopyOfBillRoute",
    "Payment/CopyOfBill/{partnerID}",
    new { controller = "Payment", action = "CopyOfBill" }
); 
```

并且不起作用。有人知道吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:46:34.153

在这种情况下最好使用 a `RouteLink`（明确命名路由），因为控制器和操作都是硬编码的。

```
@Html.RouteLink("Another copy of some bill", "CopyOfBillRoute", 
    new { partnerID = ViewBag.PartnerID }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:50:35.447

使用[这个](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)重载

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

所以你的代码将是

```
@Html.ActionLink("Another copy of some bill", "CopyOfBill", "Payment",
                                    new { partnerID = ViewBag.PartnerID },null) 
```

假设您不想为锚标记指定任何 HTML 属性。如果需要，请将最后一个参数 ( `null`) 替换为 HTML 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:13:07.800

首先，您在顶部的 Global.asax 中写下您的路线。最重要的是你做了你的第一条路线

```
routes.MapRoute(
    "CopyOfBillRoute",
    "Payment/CopyOfBill/{partnerID}",
    new { controller = "Payment", action = "CopyOfBill" }
); 
```

并像这样使用您的路线

```
@Html.RouteLink("click", "Regis",new {id=>id.Id}) 
```

我想这会对你有所帮助

# c# - 如何将字符串命名的参数发送到存储过程？

> ID：12607393
> 
> 赞同：2
> 
> 时间：2012-09-26T17:42:36.330
> 
> 标签：c#, .net, sql-server-2005, linq-to-sql, stored-procedures

我有一个带有大量参数（> 50）的存储过程，其中绝大多数是可选的。我希望能够这样称呼它：

```
var result = context.MySproc(
               new Dictionary<string, string>()
               {
                   {"foo","bar"},
                   {"baz","xyzzy"}
               }); 
```

所需的参数将动态变化。

数据库调用必须是一个存储过程（不取决于我），它必须使用现有的`DataContext`而不是建立一个新的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:17:44.397

如果我的理解正确，那么[这篇](http://msdn.microsoft.com/en-us/library/ms189330%28v=sql.105%29.aspx)文章将讲述如何使用可选参数调用 ms sql 存储过程。这就是我使用它使用 LINQ to SQL 调用此类存储过程的方式：

1）假设您有一个带有可选参数的存储过程，例如：

```
CREATE PROCEDURE [dbo].[MyProc] 
    @arg1 bigint,
    @arg2 datetime,
    @arg3 decimal(18,2)=null,
    @arg4 decimal(18,2)=null,
    @arg5 int
BEGIN
...
END 
```

2) 你有一些`DataContext`使用 LINQ to SQL

```
DataContext dc = new DataContext("Your connection string, for example"); 
```

3) 存储过程名称

```
string procName = "dbo.MyProc"; 
```

4）Params字典（例如）：

```
Dictionary<string, object> paramList = new Dictionary<string, object>()
        {
            {"arg1",72},
            {"arg2",DateTime.Now.Date},
            //arg3 is omitted and should get its default value in stored 
            {"arg4",250},  proc
            {"arg5",777}
        }; 
```

5）然后您可以使用以下方法：

```
 static int Foo(DataContext dc, 
                   string procName, 
                   Dictionary<string, object> paramList)
    {
        StringBuilder command = new StringBuilder("EXECUTE ");
        command.Append(procName);

        int i = 0;

        foreach (string key in paramList.Keys)
        {
            command.AppendFormat(" @{0} = ", key);
            command.Append("{");
            command.Append(i++);
            command.Append("},");
        }

        return dc.ExecuteCommand(command.ToString().TrimEnd(','),  
                                 paramList.Values.ToArray());
    } 
```

像这样

```
//You should add exception handling somewhere, of course, as you need    
Foo(dc, procName, paramList); 
```

它将调用您的存储过程。强制参数应始终存在于字典中，否则它将失败。可选参数可以省略，然后它们将获得由存储过程本身定义的默认值。

我使用`Dictionary<string,object>`了 ，所以它不仅可以包含字符串值，还可以包含任何类型的参数。当然，它们应该反映存储过程的期望。

PS：我在 ms sql 2008 上测试过，我不完全确定，它将如何在 ms sql 2005 上工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:48:07.077

在 SQL Server 中，参数的数量必须是静态的，因此您将无法为所欲为。

您还有其他一些解决方案：

*   1：使用 1 个分隔字符串作为参数，然后在存储过程中对参数进行子字符串化。

*   2：将这 50 个左右的字符串保存在表中（附加到唯一 ID），使用存储过程中的该表（使用唯一 ID 作为唯一参数），然后让存储过程删除这些临时字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:01:19.333

这样做的唯一方法是创建一个 xml 文件并将其发送到您的 proc。您可以获取 sql 中的所有参数。

*   [如何在 t-sql 中读取 xml？](https://stackoverflow.com/questions/8999813/how-to-read-xml-in-t-sql)
*   [http://www.stylusstudio.com/sqlxml_tutorial.html](http://www.stylusstudio.com/sqlxml_tutorial.html)

# android - AlertDialog 在屏幕上持续时间过长

> ID：12607395
> 
> 赞同：0
> 
> 时间：2012-09-26T17:42:43.780
> 
> 标签：android, android-dialog

下面的代码应该显示一个对话框，然后根据程序的状态，在`doseDownCourt()`单击 OK 关闭对话框时执行一些动画（通过调用来执行）。

问题是对话框在关闭时不会立即消失——它停留在屏幕上，“确定”按钮处于“按下”状态（蓝色阴影），而动画正在执行和显示。对话框会一直停留在屏幕上，直到动画完成。

我尝试更改命令执行的顺序，还尝试使用线程使动画在开始之前等待对话框消失，但无法获得我想要的行为。

任何建议，将不胜感激。谢谢。

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this.getContext());       
    String message;
    Drawable puffle;
    Drawable dr;
    if (made == true) {
        message = "You made it!!!";
         dr = getResources().getDrawable(R.drawable.puff_happy);
    }
    else {
        message = "Aw, you missed. Better luck after your next dose!";
        dr = getResources().getDrawable(R.drawable.puff_confused);
    }
    builder.setMessage(message);        
    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
    puffle = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 200, 200, true));
    builder.setTitle(" ");
    builder.setIcon(puffle);
    builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {    
            alertDialog.dismiss();
            drawAll();      //put ball and shadow back with avatar
            doseDownCourt();    //call doseDownCourt in case multiple doses have been taken before a shot for each has been attempted               
        }
    });
    alertDialog = builder.create();
    alertDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    WindowManager.LayoutParams WMLP = alertDialog.getWindow().getAttributes();
    WMLP.y = -300;   //y position of dialog box
    alertDialog.getWindow().setAttributes(WMLP);
    alertDialog.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:57:32.030

首先，您不必关闭 onClickListener 中的警报对话框，因为它会默认关闭。

其次，尝试在后台线程中运行 drawAll 和 doseDownCourt 函数，并使用 Handler 来更新您的用户界面。

查看以下文档：

[http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) )

[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

所以不要像现在这样在主线程上运行需要大量时间的进程，因为 onClick 将在主线程上执行。

**编辑：**来自文档

此代码显示如何在 onClick 函数中使用线程

```
public void onClick(View v) {
    new Thread(new Runnable() {
        public void run() {
            Bitmap b = loadImageFromNetwork("http://example.com/image.png");
            mImageView.setImageBitmap(b);
        }
    }).start();
} 
```

在您的情况下，您可以将代码更改为以下内容：

```
public void onClick(View v) {
    new Thread(new Runnable() {
        public void run() {
            drawAll();
            doseDownCourt();
        }
    }).start();
} 
```

但要小心，因为你在这两个函数中可能做的一些事情需要在 UiThread 上运行，在这种情况下你应该使用某种 Handler。

罗尔夫

# java - Hibernate 或 JPA 中的游标或记录集迭代器之类的东西？

> ID：12607400
> 
> 赞同：2
> 
> 时间：2012-09-26T17:43:01.057
> 
> 标签：java, hibernate, jpa, cursor, recordset

有什么方法可以在 Hibernate 中处理长查询结果？如果我想绘制包含数百万条记录的表格并允许用户浏览它怎么办？

目标不是当时将所有数据传输给客户端并处理当前位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:48:23.197

您可以尝试使用 Hibernate [ScrollableResults](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/ScrollableResults.html)，我引用：

> 一个结果迭代器，允许在结果中以任意增量移动。Query / ScrollableResults 模式与 JDBC PreparedStatement/ ResultSet 模式非常相似，并且该接口的方法语义与 ResultSet 上类似名称的方法相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:53:15.023

您可以在 Query 对象中`FirstResult`使用简单的机制。`MaxResults`

```
query.setFirstResult(5);
query.setMaxResults(5); 
```

以上`5`将从第五条记录中获取记录。

您可以使用[ScrollableResults](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/ScrollableResults.html)但对于较大的结果，它会比上面的要慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-10T04:43:31.600

要改进对大型数据集的查询，请使用键集分页并尽可能避免偏移分页，因为使用偏移量需要读取所有数据，而使用键集分页（过滤器）会减少数据集（改进可能很重要）。

这是一篇好文章[https://use-the-index-luke.com/no-offset](https://use-the-index-luke.com/no-offset)

# javascript - 有没有办法告诉用户在按下提交时没有互联网连接？

> ID：12607407
> 
> 赞同：4
> 
> 时间：2012-09-26T17:43:20.427
> 
> 标签：javascript, jquery

当然，假设没有互联网连接。像一个 jQuery 方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T17:46:01.797

我会尝试向您知道在线的几台服务器发出 HEAD 请求（不下载内容）。如果没有网络，它们将自动失败（无需设置超时）。

```
$.ajax({
    type: "HEAD",
    url: 'http://www.google.com',
    error: function() {
        alert('world is gone !');
    }
}); 
```

[演示](http://dystroy.org/stackoverflow/window.html)（拔下网络进行测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:45:55.780

如果您正在处理 ajax 请求，您可以捕获`timeout`错误 - 请参阅参考资料`error(jqXHR, textStatus, errorThrown)`。[`$.ajax`](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:45:34.923

有点，是的。在实际提交之前，您可以`ajax`拨打电话尝试连接到您网站上的一个简单的轻量级服务，以检查它是否可以访问。

如果呼叫失败，您可以假设没有连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:51:00.803

借助失败的 XHR 请求，您可以确定连接。重试几次，如果请求没有通过，警告并优雅地失败。

我可以使用从[http://jamiethompson.co.uk/web/2008/06/17/publish-subscribe-with-jquery/获得的这个功能](http://jamiethompson.co.uk/web/2008/06/17/publish-subscribe-with-jquery/)

```
$.networkDetection = function(url,interval){
    var url = url;
    var interval = interval;
    online = false;
    this.StartPolling = function(){
        this.StopPolling();
        this.timer = setInterval(poll, interval);
    };
    this.StopPolling = function(){
        clearInterval(this.timer);
    };
    this.setPollInterval= function(i) {
        interval = i;
    };
    this.getOnlineStatus = function(){
        return online;
    };
    function poll() {
        $.ajax({
            type: "POST",
            url: url,
            dataType: "text",
            error: function(){
                online = false;
                $(document).trigger('status.networkDetection',[false]);
            },
            success: function(){
                online = true;
                $(document).trigger('status.networkDetection',[true]);
            }
        });
    };
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:59:50.207

一种方法是使用 AJAX 发送表单。然后你会有一个处理程序，它会告诉你它无法连接到服务器，你可以保存数据并通知用户服务器不可用。问题是您的互联网连接还是服务器可能已关闭并不重要。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-26T17:59:54.020

```
if (navigator.onLine) {
  alert('online');
} else {
  alert('offline');
} 
```

# c# - 为什么每次单击 Windows 窗体应用程序中的按钮都会增加内存使用量？

> ID：12607409
> 
> 赞同：1
> 
> 时间：2012-09-26T17:43:23.567
> 
> 标签：c#, winforms, performance

即使没有与按钮相关的事件，每次我单击按钮时，内存使用量都会缓慢增加。这是什么原因造成的？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:47:49.120

.NET 使用托管内存模型，这意味着有一个垃圾收集器负责为不再需要的对象释放内存。垃圾回收不是花费时间和精力尽快释放每个对象的内存，而是等待系统需要内存或经过足够的时间来决定执行回收。当执行该集合时，它将四处寻找不再需要在内存中的对象并释放它们。（实际上，它实际上找到了所有需要的东西，并保存了所有这些，让所有没有保存的东西都消失了，但你不需要那样想。）

在大多数情况下，GC 在管理内存方面做得很好。大多数时候你根本不应该考虑它。

# ruby-on-rails - 我有两个使用 Omniauth 的用户模型

> ID：12607410
> 
> 赞同：1
> 
> 时间：2012-09-26T17:43:26.337
> 
> 标签：ruby-on-rails

我有两个用户模型，一个是 1\. User.rb（这是我自己的身份验证系统，用于处理刚刚在我的站点中注册的用户。

1.  Authenticate.rb（这是希望通过 facebook 注册的用户的 OmniAuth 身份验证。

我很难处理这两种模型.....例如这是我的导航代码

```
 - if fb_signed_in?
      .nav.pull-right.padding-top
        %li
        - if fb_signed_in?
          %li#fat-menu.dropdown
            %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
              %span
                Signed in as
                = fb_current_user.email              
            %ul.dropdown-menu
              %li= link_to "Profile", "#"
              %li.divider
              %li= link_to "Sign out", leave_path, method: "get"             
        - else 
          .nav.pull-right
          %span.light_color Already a Member?
          = link_to "Sign in", signin_path, class: 'light_color'
          %span.light_color or
          = link_to "Sign up", signup_path, class: 'light_color' 

    - else
      .nav.pull-right.padding-top
        %li
        - if signed_in?
          %li#fat-menu.dropdown
            %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
              %span
                Signed in as
                = current_user.email              
            %ul.dropdown-menu
              %li= link_to "Profile", "#"
              %li.divider
              %li= link_to "Sign out", signout_path, method: "get"             
        - else 
          .nav.pull-right
          %span.light_color Already a Member?
          = link_to "Sign in", signin_path, class: 'light_color'
          %span.light_color or
          = link_to "Sign up", signup_path, class: 'light_color' 
```

所以我定义了一个 fb_signed_in？添加一个已签名的_in？虽然它基本上做同样的事情..也与 current_user 和 fb_current_user 但继承人的代码两者

当前用户

```
 def current_user
  @current_user = @current_user ||    
       User.find_by_remember_token(cookies[:remember_token])
    end 
```

这是给 fb_current_user

```
 def fb_current_user
      @fb_current_user ||= Authenticate.find(session[:user_id]) if session[:user_id]
    end 
```

所以他们做不同的事情......但是有没有办法让这两个成为一个......因为它会更干净，我试图创建一个评论系统，将打印用户名和 gravatar 图像，我很困惑关于如何为此编写代码，因为它使用 gravatar_for @user 并且我还必须为 fb 用户执行 gravatar_for @authenticate。

我基本上使用 Hartl 的身份验证并尝试将 Omniauth 与之集成

如果问题令人困惑或不清楚，请告诉我，我会尝试更好地解释

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:56:25.193

怎么样：

```
def current_user
  if session[:user_id]
    @current_user ||= Authenticate.find(session[:user_id])
  else
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
end

def signed_in?
  current_user.is_a?(User) || current_user.is_a?(Authenticate)
end 
```

尽管这可能会在其他地方引起问题，因为您不知道 a`current_user`是什么而不测试它的类型。

在我的项目中，我只有一个`User`模型，它有很多`Authorizations`，我把与omniauth 相关的东西放在那里（所以`current_user`总是 a `User`）。

# java - 由 ClassCastException 引起的运行时错误启动 Service

> ID：12607412
> 
> 赞同：0
> 
> 时间：2012-09-26T17:43:41.597
> 
> 标签：java, android, service

我遇到运行时错误，试图启动启动时服务。它失败了，但我看不到任何提示。目的是找到服务，但没有到达 onCreate 或 onStart。

```
public class ControlReceiver extends BroadcastReceiver
{
  /**
   * @see android.content.BroadcastReceiver#onReceive(Context,Intent)
   */
  @Override
  public void onReceive(Context context, Intent intent)
  {
    Intent service = new Intent(context, MyApp.class);
    Log.d("rcvr", "Received intent:" + intent.getAction());
    context.startService(service);
  }
} 
```

清单：

```
<manifest 
    android:versionCode="1" 
    android:versionName="1.0"
    package="com.company.package" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk 
        android:minSdkVersion="9" 
        android:targetSdkVersion="10"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_GPS"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS"/>
    <uses-permission android:name="android.permission.ACCESS_CELL_ID"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.READ_LOGS"/>
    <uses-permission android:name="android.permission.SET_ACTIVITY_WATCHER"/>
    <uses-permission android:name="android.permission.STATUS_BAR"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.BROADCAST_STICKY"/>
    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"/>
    <uses-permission android:name="android.permission.SET_DEBUG_APP"/>
    <uses-permission android:name="android.permission.BATTERY_STATS"/>
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
    <uses-permission android:name="android.permission.BIND_DEVICE_ADMIN"/>
    <uses-permission android:name="android.permission.DIAGNOSTIC"/>
    <uses-permission android:name="android.permission.DEVICE_POWER"/>
    <uses-permission android:name="android.permission.DUMP"/>
    <uses-permission android:name="android.permission.CHANGE_COMPONENT_ENABLED_STATE"/>
    <uses-permission android:name="android.permission.SIGNAL_PERSISTENT_PROCESSES"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.PERSISTENT_ACTIVITY"/>
    <uses-permission android:name="android.permission.HARDWARE_TEST"/>
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/>

    <application 
        android:icon="@drawable/ic_launcher"
        android:label="@string/mod_name" 
        android:name=".MyApp">

        <!-- We declare our service here -->
        <service 
            android:enabled="true" 
            android:exported="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/serv_name" 
            android:name=".MyApp" 
            android:process=":my_process">
            <intent-filter>
              <action android:name="com.company.package.MY_INTENT" />
            </intent-filter>
            </service>
        <receiver 
            android:name=".ControlReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <action android:name="android.intent.action.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE" />
            </intent-filter>
        </receiver>
        <receiver 
            android:name=".BatteryHelper" >
            <intent-filter>
                <action android:name="android.intent.action.BATTERY_OKAY"/>
                <action android:name="android.intent.action.BATTERY_CHANGED"/>
                <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
                <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
                <action android:name="android.intent.action.BATTERY_LOW"/>
                <category android:name="android.intent.category.INFO"/>
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

抛出的异常

```
FATAL EXCEPTION: main 
java.lang.RuntimeException: Unable to instantiate application com.company.package.MyApp: java.lang.ClassCastException: com.company.package.MyApp cannot be cast to android.app.Application    
 at android.app.LoadedApk.makeApplication(LoadedApk.java:529)    
 at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4442)     
 at android.app.ActivityThread.access$1300(ActivityThread.java:139)     
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1305)     
 at android.os.Handler.dispatchMessage(Handler.java:99)     
 at android.os.Looper.loop(Looper.java:154)     
 at android.app.ActivityThread.main(ActivityThread.java:4945)    
 at java.lang.reflect.Method.invokeNative(Native Method)     
 at java.lang.reflect.Method.invoke(Method.java:511) 
```

**更新**
当我从清单中删除应用程序的 android:name=".MyApp" 时，服务启动了。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:29:41.117

> 当我从清单中删除应用程序的 android:name=".MyApp" 时，服务启动了。有谁知道为什么？

造成这种情况的原因很可能是您的`MyApp`类没有扩展`android.app.Application`。

正如[Android 开发者网站](http://developer.android.com/guide/topics/manifest/application-element.html#nm)所说：

> `android:name`
> 
> 为应用程序实现的应用程序子类[的](http://developer.android.com/reference/android/app/Application.html)完全限定名称。当应用程序进程启动时，这个类在应用程序的任何组件之前被实例化。
> 
> 子类是可选的；大多数应用程序不需要一个。在没有子类的情况下，Android 使用基础 Application 类的实例。

由于子类化`Application`是可选的，因此删除`android:name=".MyApp"`允许您的应用程序正确启动，因为您不再尝试强制`MyApp`转换为`Application`您的异常声称您的应用程序正在尝试执行的操作。

# matlab - 从 mx2 矩阵中获取多个最大值

> ID：12607417
> 
> 赞同：0
> 
> 时间：2012-09-26T17:44:08.310
> 
> 标签：matlab

我有这个维度为 mx2 的矩阵。我需要的是一个 mx1 矩阵，以便将 mx1 矩阵的每个元素作为 mx2 矩阵的每个 1x2 行的最大值。我可以通过迭代来做我知道但有直接的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:49:04.913

是的，你可以直接做。matlab中的`max`函数可让您指定要取最大值的维度：

```
max(data_m_by_two, [], 2) 
```

应该给你你想要的`2`，里面说你想在矩阵的第二维上取最大值，它在列上。

# vb.net - 子窗体的近子

> ID：12607426
> 
> 赞同：2
> 
> 时间：2012-09-26T17:44:27.420
> 
> 标签：vb.net, winforms

我有主窗体，它是 MDI 父窗体。

在里面我打开了第二个（相同的解决方案，不同的项目）表单，如下所示：

```
Dim f As New mynevproj.frm_list
With f
  .MdiParent = Me
  .Show()
End With 
```

在这些新表单 (frm_list) 中，我在少数情况下会打开另一个新表单：

```
Dim fa As New frm_art1
With fa
  .StartPosition = FormStartPosition.Manual
  .Location = New Point(Me.Location.X + 20 + (inst * 20), Me.Location.Y))
   AddHandler .aClosed, AddressOf frm_artikl_Closed
  .Show()
End With 
```

发生什么了？

当我打开几个 frm_art1 实例然后关闭 frm_list 时，我希望所有 frm_art1 都将关闭以关闭 frm_list。

但这不会发生。

每次我单击 (X) 关闭 frm_list 时，frm_art1 的一个实例就会关闭，最后当所有 frm_art1 都关闭时，frm_frm_list 就会关闭。

当我关闭 frm_list 时，如何关闭通过 frm_list 打开的所有表单。

这在非 MDI 环境中效果很好。

现在我在frm_list的form_closure中另外尝试了这个：

```
For Each frm As Form In My.Application.OpenForms
  If frm.Name = "frm_art1" Then
    frm.Close()
  End If
Next 
```

这也行不通！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:48:50.443

尝试使 frm_list 成为其他表单的所有者：

```
Dim fa As New frm_art1
With fa
  .StartPosition = FormStartPosition.Manual
  .Location = New Point(Me.Location.X + 20 + (inst * 20), Me.Location.Y))
  AddHandler .aClosed, AddressOf frm_artikl_Closed
  .Owner = Me
  .Show()
End With 
```

# ruby-on-rails - 默认 rails 嵌套控制器 rspec 测试

> ID：12607433
> 
> 赞同：0
> 
> 时间：2012-09-26T17:44:57.447
> 
> 标签：ruby-on-rails, rspec, controllers, stub

所以，我有一个嵌套在另外两个中的控制器

这是一个示例路线 products/123/conditions/321/inventories/121

并且控制器也是这样嵌套的，所以我试图找出在我的测试中要存根的内容。

Product.should_receive(:find) 不会被调用。我想知道第一个叫什么，所以我可以开始存根它。

如果我有办法上课并听取所有调用它的方法，我可以找到这一点。有没有办法做到这一点？我尝试将 Products 重新定义为 nil，这样任何调用的方法都会抛出错误，它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:12:44.600

*如果我有办法上课并听取所有调用它的方法，我可以找到这一点。有没有办法做到这一点？*

好吧，您可以用模拟替换该类：

`Product = mock`

从那时起，任何被调用的方法`Product`都应该产生一个失败，例如“模拟收到意外消息：find”。

# c++ - 如何在 C++ 非托管代码中调试较低级别的文件访问异常/崩溃？

> ID：12607434
> 
> 赞同：0
> 
> 时间：2012-09-26T17:45:06.483
> 
> 标签：c++, windows, exception, file-io

我目前正在尝试解决非托管 C++ 应用程序的崩溃/异常。

应用程序因某些可预测性而崩溃。该程序基本上处理大量文件，并通过访问数据库运行一堆查询。

它肯定是在文件访问期间发生的。错误信息是：

```
 "failed reading. Network name is no longer available." 
```

它似乎总是在相同的较低级别的文件访问代码中崩溃。它正在执行一个较低级别的库 Seek()，然后是 Read()。读取期间发生异常。

更复杂的是，我们只能在运行磁盘平衡实用程序时发生错误。该实用程序本质上检查文件访问历史记录，并将更频繁/最近使用的文件移动到更快的存储检索，而不经常使用的文件移动到较慢的检索区域。我不完全了解这个特定存储设备的架构，但基本上它有一个用于“快速”检索的区域和一个用于“归档/慢速”的区域。

当实用程序应用程序启动和停止多次时，这些问题更容易/可预测地重现。根据磁盘制造商的说法，我们应该能够在后台运行该实用程序，而不会影响客户端主应用程序的行为。

任何建议如何在这里进行？这里有一些理论认为它与存储设备的延迟有关。有没有办法证明/反驳这一点？我们编写了一个小型示例应用程序，它基本上可以访问/读取驱动器上的一大堆文件。即使使用 SmartPools 运行，我们（到目前为止）也无法重现该问题。我的想法是尝试推动延迟理论是让多个应用程序在运行实用程序应用程序时基本上从磁盘读取大量文件。

内存使用率和 CPU 使用率在任务管理器中看起来并不过分。

想法？这变成了一个毛球。

谢谢，约翰B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:52:24.167

获取您的调试二进制文件。设置应用程序验证程序并将您的应用程序添加到其列表中。希望等待崩溃愚蠢。把它通过WinDBG。试试命令： !avrf 看看你得到了什么......

# c# - 在c#中每10秒后暂停一个视频

> ID：12607440
> 
> 赞同：0
> 
> 时间：2012-09-26T17:45:36.687
> 
> 标签：c#, wpf, media-player

我想要做的是每 10 秒后暂停一个视频视频应该在每 10 秒后暂停，直到视频结束

下面给出的代码给出了意想不到的结果，视频在第一次（即 10 秒后）暂停正常，但是当我再次播放时，它应该在 10 秒后暂停，但在我的情况下，它有时会在 8 秒、3 秒、5 秒等时随机暂停，我该怎么办？ ? 请帮忙谢谢！！

```
void PlayClick(object sender, EventArgs e)
{
             VideoControl.Play();
            var dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
            dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
            dispatcherTimer.Interval = new TimeSpan(0, 0, 10);
            dispatcherTimer.Start();
 }

 private void dispatcherTimer_Tick(object sender, EventArgs e)
        {

            VideoControl.Pause();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:52:40.140

1.  在你的 dispatcherTimer_Tick-Method 中添加这个：

    ```
    dispatcherTimer.Stop(); 
    ```

2.  将以下部分移动到构造函数中：

    ```
    dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 10); 
    ```

3.  使 DispatcherTimer 成为全局变量。

编辑：这应该是这样的：

```
 class MyClass
    {
        private DispatcherTimer _dispatcherTimer; //now your dispatcherTimer is accessible everywhere in this class

        public MyClass()
        {
            _dispatcherTimer = new DispatcherTimer();
            _dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
            _dispatcherTimer.Interval = new TimeSpan(0, 0, 10);
        }

        void PlayClick(object sender, EventArgs e)
        {
            VideoControl.Play();
            _dispatcherTimer.Start();
        }

        void dispatcherTimer_Tick(object Sender, EventArgs e)
        {
            _dispatcherTimer.Stop();
            VideoControl.Pause();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:52:57.770

将定时器的声明放到一个私有类变量中，将几行移到类的构造函数中，然后在`Tick`处理程序中停止定时器。

您不想继续创建计时器的原因是因为计时器涉及非托管资源，因此您正在关闭该循环。

```
private dispatcherTimer = new System.Windows.Threading.DispatcherTimer(); 

ctor
{
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick); 
    dispatcherTimer.Interval = new TimeSpan(0, 0, 10); 
}

void PlayClick(object sender, EventArgs e) 
{ 
    VideoControl.Play(); 
    dispatcherTimer.Start(); 
} 

private void dispatcherTimer_Tick(object sender, EventArgs e) 
{ 
    dispatchTimer.Stop();
    VideoControl.Pause(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:52:54.400

`Tick`在事件中尝试以下代码：

```
private void dispatcherTimer_Tick(object sender, EventArgs e)
    { 
        (sender as DispatcherTimer).Stop();
        VideoControl.Pause();
    } 
```

您可以`dispatcherTimer`在 Playclick 事件之外创建对象，并且只能通过以下方式将`Start()`方法放入 `PlayClick`事件中：

```
var dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
public Form1() //// form constructor where you are handling these all event....
{
     dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
     dispatcherTimer.Interval = new TimeSpan(0, 0, 10);
}

void PlayClick(object sender, EventArgs e)
{
            VideoControl.Play();
            dispatcherTimer .Start();
} 
```

# javascript - 在 Visual Web GUI 的应用程序中，来自 javascript 的值不会返回到 c#

> ID：12607450
> 
> 赞同：0
> 
> 时间：2012-09-26T17:46:05.987
> 
> 标签：javascript, c#-4.0, visual-web-gui

我在可视化 Web Gui 应用程序的皮肤文件中编写了一个 java 脚本函数，它也返回一些值。现在我正在从后面的代码中调用 java 脚本方法。

```
public void XYZ( string message)
    {
        this.InvokeMethodWithId("testCall", message);
    } 
```

而javascript函数是：--

```
function testCall(strGuid, txt) {

    alert("hai Java script fired..");
    return txt+ 'returned from JavaScript';
} 
```

我想要从应用程序中的 JavaScript 返回的值。我怎样才能实现它。是否有其他方法可以调用 JavaScript 的方法？

我想要这样的东西：--

```
public void Conect( string message)
        {
          string returnedvalue =  this.InvokeMethodWithId("testCall", message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:09:30.157

@阿米什库马尔，

正如其他回复已经指出的那样，客户端和服务器端在 Web 编程中没有直接连接。客户端永远是每个请求的发起者，服务端的“目的”是渲染一个响应，然后返回给客户端进行处理，在 Visual WebGui 中这通常是一些 UI 更新处理。这基本上意味着您的客户端脚本在服务器端完成呈现响应之前不会执行，并且客户端可以将一些消息返回给服务器的唯一方法是发出另一个请求。

例如，考虑一下您需要如何在 Visual WebGui 中使用 MessageBox。为了从 MessageBox 接收“响应”，您需要在您的服务器端代码中提供一个回调处理程序，然后您的服务器端代码将完成创建响应，该响应将返回给客户端。客户端更新它的 UI 并且对 MessageBox 对话框的某些操作，它向服务器发送一个新请求，服务器解释该操作并调用您的回调处理程序。在回调处理程序中，您使用 Form.DialogResult 来获取用户操作。

在自定义 Visual WebGui 代码中进行这项工作的一种非常基本的方法可能类似于表单上的以下代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        SendClientMessage("This is a test");
    }

    public void SendClientMessage(string strMessage)
    {
        System.Text.StringBuilder sb = new StringBuilder();
        sb.AppendLine("var objEvent = mobjApp.Events_CreateEvent('{0}', 'MessageEvent');");
        sb.AppendLine("mobjApp.Events_SetEventAttribute(objEvent, 'Msg', '{1}');");
        sb.AppendLine("mobjApp.Events_RaiseEvents();");

        this.InvokeScript(string.Format(sb.ToString(), this.ID, strMessage));
    }

    protected override void FireEvent(Gizmox.WebGUI.Common.Interfaces.IEvent objEvent)
    {
        if (objEvent.Type == "MessageEvent")
            MessageBox.Show(objEvent["Msg"]);
        else
            base.FireEvent(objEvent);

    } 
```

除非您将 Visual WebGui 应用程序设置为无遮挡，否则此代码将不起作用。为了使此代码在隐藏的应用程序上运行，您需要将 JavaScript 添加为隐藏的 JavaScript 资源，它会正常工作。

帕利

```
enter code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:51:04.173

Javascript 在客户端执行，因此返回不会到达服务器。

一种解决方案可能是使用 AJAX 将该值发送到服务器。Stack Overflow 充满了关于 AJAX 的答案。

这是一个很好的[例子](https://stackoverflow.com/questions/2356604/asp-net-javascript-ajax-call-how-to)。

# javascript - Facebook 开放图 - 没有指定参考对象？

> ID：12607458
> 
> 赞同：1
> 
> 时间：2012-09-26T17:46:31.370
> 
> 标签：javascript, facebook, facebook-opengraph

这是关于 facebook 开放图的一个非常新手的问题。我完成了教程，使用新动词和新名词创建新命名空间没有问题。但是，我无法让一个简单的 LIKE OBJECT 工作......

无论如何，这是我所做的一切的结果。

当我尝试使用 facebook 的开放图执行自定义内置时，出现以下错误：

```
Object
error: Object
code: 1611072
message: "The action you're trying to publish is invalid because it does not specify any reference objects. At least one of the following properties must be specified: object."
type: "Exception"
__proto__: Object
__proto__: Object 
```

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
  <title>OG Tutorial App</title>

 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#">
  <meta property="fb:app_id" content="99999999999" /> 
  <meta property="og:type"   content="object" /> 
  <meta property="og:url"    content="http://jl.com/" /> 
  <meta property="og:title"  content="Sample Object" /> 
  <meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 

</head>
<body>
  <div id="fb-root"></div>
  <script type="text/javascript">
  function postbake()
  {
      FB.api(
        '/me/og.likes',
        'post',
        { recipe: 'http://jl.com/' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
              console.log(response);
           } else {
              alert('bake was successful! Action ID: ' + response.id);
           }
        });
  }
  </script>

  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '999999999999', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

  <fb:login-button show-faces="true" width="200" max-rows="1" scope="publish_actions">
  </fb:login-button>

   <input type="button" onclick="postbake()" value="like it" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T08:18:30.660

> 消息：“您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：对象。”

您正在尝试将您的对象发布为喜欢`recipe`- 但参数名称必须`object`改为......</p>

# python - wxPython 最小尺寸的 Frame with a Panel

> ID：12607460
> 
> 赞同：4
> 
> 时间：2012-09-26T17:46:33.050
> 
> 标签：python, wxpython, wxwidgets

wxpython 2.8.11.0，python 2.7

如果我把一些`Sizer`带有一些控件的东西直接放入一个`Frame`like

```
import wx

app=wx.App()

frm = wx.Frame(None, title='title')

sizer = wx.BoxSizer(wx.HORIZONTAL)
sizer.Add(wx.SpinCtrl(frm))
sizer.Add(wx.SpinCtrl(frm))

frm.SetSizerAndFit(sizer)
frm.Show()

app.MainLoop() 
```

将`Frame`自动具有正确的最小大小来包含`Sizer`并且不可能使其更小。如果中间有一个`Panel`（根据需要在控件之间切换）这不起作用，则可以使窗口太小。

```
import wx

app=wx.App()

frm = wx.Frame(None, title='title')
pan = wx.Panel(frm)

sizer = wx.BoxSizer(wx.HORIZONTAL)
sizer.Add(wx.SpinCtrl(pan))
sizer.Add(wx.SpinCtrl(pan))

pan.SetSizerAndFit(sizer)
frm.Show()

app.MainLoop() 
```

此外`frm.Fit()`并且`frm.SetMinSize(frm.GetEffectiveMinSize())`需要获得相同的行为。完整代码：

```
import wx

app=wx.App()

frm = wx.Frame(None, title='title')
pan = wx.Panel(frm)

sizer = wx.BoxSizer(wx.HORIZONTAL)
sizer.Add(wx.SpinCtrl(pan))
sizer.Add(wx.SpinCtrl(pan))

pan.SetSizerAndFit(sizer)
frm.Fit()
frm.SetMinSize(frm.GetEffectiveMinSize())
frm.Show()

app.MainLoop() 
```

我可以接受`frm.Fit()`，但我不喜欢`frm.SetMinSize(frm.GetEffectiveMinSize())`。没有更好的解决方案，以便自动考虑与之前一样`Frame`的最小尺寸吗？我正在考虑如果在将另一个控件添加到 sizer 之后发生的更改会发生什么。`Panel``Sizer``EffectiveMinSize`

**编辑：** 显然

```
panel.SetSizerAndFit(sizer)
frm.Fit()
frm.SetMinSize(frm.GetEffectiveMinSize()) 
```

应该替换为

```
panel.SetSizer(sizer)
sizer.SetSizeHints(frm) 
```

看起来更干净一些。所以总的来说这看起来像

```
import wx

app=wx.App()

frm = wx.Frame(None, title='title')
pan = wx.Panel(frm)

sizer = wx.BoxSizer(wx.HORIZONTAL)
sizer.Add(wx.SpinCtrl(pan))
sizer.Add(wx.SpinCtrl(pan))

pan.SetSizer(sizer)
sizer.SetSizeHints(frm)
frm.Show()

app.MainLoop() 
```

这是执行此操作的首选方法吗？

如果稍后添加小部件，即使第一种方法`Sizer`直接在`Frame`没有干预的情况下也无法正确处理，所以我认为这是一个完全不同的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T23:24:14.683

飞哥的回答中给出了最优雅的方式（恕我直言）。拥有一个额外的其他不需要的 sizer 效率略低，但我认为它不会真正引人注目。

有些人确实`SetSizeHints()`手动调用，就像在你的上一个示例中一样，这也有效并且可能更清楚（每当我使用额外的尺寸器时，我觉得有必要留下评论来解释为什么不应该删除它）。

不幸的是，没有更好的方法，我不确定我们是否可以添加一个，因为您需要对所有面板、sizer 和框架做一些事情，这意味着您无法使用单个方法调用来做到这一点将不相关的参数传递给它。即我们可以有类似的东西

```
panel.SetSizerAndFitParent(sizer, frame); 
```

但目前还不清楚这是否会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:36:53.970

引入管理框架内容（例如面板）的sizer 怎么样？由于您没有包含最小示例，因此我尚未对其进行测试。

```
frameSizer = wx.BoxSizer(wx.VERTICAL)
frameSizer.Add(panel)
frm.SetSizerAndFit(frameSizer) 
```

# r - 按类别填写数据表中的缺失（空白） - 向后和向前

> ID：12607465
> 
> 赞同：17
> 
> 时间：2012-09-26T17:46:37.683
> 
> 标签：r, data.table, zoo, missing-data

我正在*为我 11 年的临床实践处理大量账单记录*数据集。相当多的行缺少转诊医生。但是，使用一些规则我可以​​很容易地填写它们，但不知道如何在 R 下的 data.table 中实现它。我知道有诸如`na.locf`zoo 包和 data.table 包中的自滚动连接之类的东西。我看到的例子太简单了，对我没有帮助。

这是一些用于指导您的虚构数据（作为 dput ASCII 文本表示）

```
 structure(list(patient.first.name = structure(c(1L, 1L, 1L, 1L, 
1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L), .Label = c("John", "Kathy", 
"Timothy"), class = "factor"), patient.last.name = structure(c(3L, 
3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L), .Label = c("Jones", 
"Martinez", "Squeal"), class = "factor"), medical.record.nr = c(4563455, 
4563455, 4563455, 4563455, 4563455, 2663775, 2663775, 2663775, 
2663775, 2663775, 3330956, 3330956, 3330956, 3330956), date.of.service = c(39087, 
39112, 39112, 39130, 39228, 39234, 39244, 39244, 39262, 39360, 
39184, 39194, 39198, 39216), procedure.code = c(44750, 38995, 
40125, 44720, 44729, 44750, 38995, 40125, 44720, 44729, 44750, 
44729, 44729, 44729), diagnosis.code.1 = c(456.87, 456.87, 456.87, 
456.87, 456.87, 521.37, 521.37, 521.37, 521.37, 356.36, 456.87, 
456.87, 456.87, 456.87), diagnosis.code.2 = c(413, 413, 413, 
413, 413, 532.23, NA, NA, NA, NA, NA, NA, NA, NA), referring.doctor.first = structure(c(1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, NA, NA, NA, 1L, 1L, NA), .Label = c("Abe", 
"Mark"), class = "factor"), referring.doctor.last = structure(c(1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, NA, NA, NA, 1L, 1L, NA), .Label = c("Newstead", 
"Wydell"), class = "factor"), referring.docotor.zip = c(15209, 
15209, 15209, 15209, 15209, 15222, 15222, 15222, NA, NA, NA, 
15209, 15209, NA), some.other.stuff = structure(c(1L, 1L, 1L, 
NA, 3L, NA, NA, 4L, NA, 6L, NA, 2L, 5L, NA), .Label = c("alkjkdkdio", 
"cheerios", "ddddd", "dddddd", "dogs", "lkjljkkkkk"), class = "factor")), .Names = c("patient.first.name", 
"patient.last.name", "medical.record.nr", "date.of.service", 
"procedure.code", "diagnosis.code.1", "diagnosis.code.2", "referring.doctor.first", 
"referring.doctor.last", "referring.docotor.zip", "some.other.stuff"
), row.names = c(NA, 14L), class = "data.frame") 
```

显而易见的解决方案是在 refer.doctor.last 和 refer.doctor.first 上使用某种最后观察结转 (LOCF) 算法。但是，当它到达新患者时，它必须停止。换言之，LOCF 必须仅应用于由患者.first.name、患者.last.name、medical.record.nr 的组合标识的一位患者。还要注意一些患者在第一次就诊时是如何错过转诊医生的，这意味着一些观察结果必须**倒退**。使事情复杂化的是，一些患者更换初级保健医生，因此可能会在更早的时候有一位转诊医生，而在以后可能会有另一位转诊医生。因此，该算法需要了解具有缺失值的行的日期顺序。

在动物园里`na.locf`，我看不到一个简单的方法来对每个病人的 LOCF 进行分组。我见过的滚动连接示例在这里不起作用，因为我不能简单地取出缺少 refering.doctor 信息的行，因为我会丢失 date.of.service 和 procedure.code 等。我希望您能帮助我了解 R 如何填补我缺失的数据。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T22:19:15.243

一个更简洁的例子会更容易回答。例如，您包含了相当多的列，这些列似乎是多余的。它真的需要按名字和姓氏，还是我们可以使用患者编号？

由于您已经`NA`在数据中有 s，您希望填写，它实际上并不`roll`存在`data.table`。当您的数据没有`NA`但您有另一个时间序列（例如）连接到数据之间的位置*时*，滚动连接更适用。（一个效率优势是您*不必*先创建`NA`，然后必须填写第二步。）或者，换句话说，在您的问题中，您只有一个数据集；你没有加入两个。

所以你确实需要`na.locf`@Joshua 建议的那样。不过，我不知道有一个函数会`NA`向前填充*，然后*将第一个值向后填充。

在`data.table`，`na.locf`按组使用它只是：

```
require(data.table)
require(zoo)
DT[,doctor:=na.locf(doctor),by=patient] 
```

具有快速聚合和引用更新的效率优势。您必须在其上编写一个新的小函数`na.locf`才能将第一个非`NA`向后滚动。

确保数据首先按患者排序，然后按日期排序。那么以上将应对医生随时间的变化，因为`by`保持每组内的行顺序。

希望能给你一些提示。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-27T23:34:22.417

@MatthewDowle 为我们提供了一个很好的起点，在这里我们将得出结论。

简而言之，使用**zoo**的`na.locf`. 该问题不适用于滚动连接。

```
setDT(bill)
bill[,referring.doctor.last:=na.locf(referring.doctor.last,na.rm=FALSE),
     by=list(patient.last.name, patient.first.name, medical.record.nr)]
bill[,referring.doctor.last:=na.locf(referring.doctor.last,na.rm=FALSE,fromLast=TRUE),
     by=list(patient.last.name, patient.first.name, medical.record.nr)] 
```

然后做类似的事情`referring.doctor.first`

几点建议：

1.  该`by`声明确保最后的观察结果仅限于同一患者，以便携带不会“流血”到列表中的下一个患者。

2.  必须使用`na.rm=FALSE`论据。如果不这样做，那么在第一次就诊时缺少转诊医生信息的患者将被`NA`删除，并且新值的向量（现有 + 结转）将比行数少一个元素。缩短的向量被回收，所有内容都向上移动，最后一行在回收时获取向量的第一个元素。换句话说，大乱。最糟糕的是，您有时只会看到它。

3.  用于`fromLast=TRUE`再次穿过该列。这会填充任何数据之前的 NA。动物园使用下一个后向观察（NOCB）代替最后一次观察结转（LOCF）。幸福——您现在已经以适合大多数情况的方式填写了缺失的数据。

4.  您可以每行传递多个`:=`，例如`DT[,`:=`(new=1L,new2=2L,...)]`

# r - 多图pdf R

> ID：12607466
> 
> 赞同：7
> 
> 时间：2012-09-26T17:46:41.010
> 
> 标签：r, pdf-generation

我想在一个 pdf 文件中打印多个图表。我知道这有很多，但我想为每页打印不同的窗口/图形大小，即第一页 8.5x11，第二页 11x8.5 等等。我试过这个：

```
pdf(file="Combined_Graphs.pdf",onefile=TRUE,bg="white",width=8.5,height=11)
hist(rnorm(100))
pdf(file="Combined_Graphs.pdf",onefile=TRUE,width=11, height=8.5, bg="white")
hist(rnorm(100,10,2),col="blue")
dev.off() 
```

我一定是用`onefile=TRUE`错了，因为它只在关闭前生成最后一个图形。有没有更好的方法来调整图形设备的大小而不必调用 pdf 函数两次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:56:20.610

我要做的是生成单独的 PDF，然后将它们组合起来。我为此使用[PDF 工具包](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)。使用系统调用将其包装在 R 函数中，`system`甚至使其可从 R 编写脚本。对 pdftk 的调用将类似于：

```
pdftk *pdf cat output combined.pdf 
```

或在 R 中：

```
system("pdftk *pdf cat output combined.pdf")  

combine_pdfs = function(path, output_pdf) {
  system(sprintf("pdftk %s/*pdf cat output %s"), path, output_pdf)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T20:14:59.017

我认为您尝试做的事情无法在 R 中完成，即您需要使用 Paul Hiemstra 建议的 PDF 工具包等外部工具来组合具有不同页面尺寸的单独 PDF 文件（替代工具是[PDFjam](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic-research/firth/software/pdfjam/)）。

如果您`onefile = TRUE`在调用中设置`pdf()`，则写入该 PDF 设备的每个图都将打印在单独的页面上，但页面尺寸相同。在您的示例中，您打开第一个 PDF 设备，向其写入一个绘图，然后打开第二个 PDF 设备，向其写入不同的绘图，然后关闭第二个 PDF 设备但保持第一个 PDF 设备处于打开状态。由于您`file`对两个调用使用相同的参数`pdf()`，您可能不会注意到第一个 PDF 设备仍处于打开状态。如果你关闭它，只有第一个情节会以`"Combined_Graphs.pdf"`.

这是您的示例的修改版本，说明了如何打开、填充内容和关闭 PDF 设备：

```
pdf(file = "foo.pdf", onefile = TRUE, width = 8.5, height = 11)
hist(rnorm(100))
hist(rnorm(100, 10, 2), col = "red")
pdf(file = "bar.pdf", width =11, height = 8.5)
hist(rnorm(100, 10, 2), col = "blue")
dev.off()
dev.off() 
```

# php - 在 PHP 中下载 Gzip XML 文件

> ID：12607470
> 
> 赞同：3
> 
> 时间：2012-09-26T17:47:07.783
> 
> 标签：php, xml, encoding, gzip

我有一个大约 30 MB 的 xml 文件，它通过 URL 作为 Gzip Xml 文件分发给客户端，但问题是作为客户端，我无法将它的副本作为 xml 文件保存到客户端的服务器中。

当我尝试使用 时`SimpleXMLElement`，它表示我在以下方面有问题：

> 请求必须包含 Accept-Encoding: gzip, deflate header

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T09:41:12.663

您可以直接告诉 PHP 从该 URL 解压缩，这样您就不需要更改 HTTP 流包装器上下文选项中的标头：

```
$xml = simplexml_load_file("compress.zlib://http://site.com"); 
```

# ios - IOS Facebook SDK 3 上传图片和消息

> ID：12607473
> 
> 赞同：16
> 
> 时间：2012-09-26T17:47:11.957
> 
> 标签：ios, facebook-graph-api

我正在使用以下代码将图像上传到 Facebook 墙：

```
UIImage *img = [UIImage imageNamed:@"logoits.png"];

[FBRequestConnection startForUploadPhoto:img
                       completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

    NSLog(@"Facebook posting %@",result);
    NSLog(@"Facebook posting %@",error);

}]; 
```

它按预期工作，但我想为这张上传的照片添加一条消息或标题，并且查看 FBRequestConnection 的文档，没有这样的例子。[http://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBRequestConnection/](http://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBRequestConnection/)

如何上传带有消息的图像？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-27T06:26:41.880

在 Facebook SDK 3.0 中，只能使用给定的方法发布图像，而对于其他操作，您需要使用图形 pi。

因此，要发布带有消息的图像，您需要使用 graph-api。这是代码行，可让您在用户时间轴上发布带有消息的图像。

```
NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:@"your custom message" forKey:@"message"];
[params setObject:UIImagePNGRepresentation(_image) forKey:@"picture"];
_shareToFbBtn.enabled = NO; //for not allowing multiple hits

[FBRequestConnection startWithGraphPath:@"me/photos"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error) 
 {
     if (error) 
     {
         //showing an alert for failure
         [self alertWithTitle:@"Facebook" message:@"Unable to share the photo please try later."];
     } 
     else
     {
         //showing an alert for success
         [UIUtils alertWithTitle:@"Facebook" message:@"Shared the photo successfully"];
     }
     _shareToFbBtn.enabled = YES;
 }]; 
```

并确保`_shareToFbBtn`仅在登录成功后才启用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T10:34:03.377

linesvishy 的解决方案效果很好，还值得注意的是，如果您使用的是 Facebook SDK 3.1 并且您使用了方法

```
FBRequest *request = [FBRequest requestForUploadPhoto:_imageToShare]; 
```

您可以使用以下几行来替换它：

```
NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:_textToShare forKey:@"message"];
[params setObject:_imageToShare forKey:@"picture"];
FBRequest *request = [FBRequest requestWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST"]; 
```

希望能帮助到你！快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:10:06.237

这是一个发布图片和注释的示例：

[http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/)

# amazon-simpledb - 为什么从 Amazon SimpleDB 进行一致读取的选择会产生不同的结果？

> ID：12607477
> 
> 赞同：2
> 
> 时间：2012-09-26T17:47:25.780
> 
> 标签：amazon-simpledb

我在 SimpleDB 上有一个域，我从不从中删除。我正在对它进行以下查询。

```
select count(*) from table_name where last_updated > '2012-09-25'; 
```

尽管我将一致的读取参数设置为 true，但它仍然在不同的执行中返回不同的结果。由于我没有从该域中删除任何内容，因此理想情况下结果应该按递增顺序排列，但这并没有发生。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:17:40.440

如果我正确理解您的用例，您可能误读了[Amazon SimpleDB](http://aws.amazon.com/simpledb/)上下文中*ConsistentRead*参数的语义，请参阅[Select](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/SDB_API_Select.html)：

> 设置为 true 时，确保返回最新数据。有关详细信息，请参阅[一致性](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/ConsistencySummary.html)

*诚然，最近*这个短语最终可能会产生误导，但它不会以任何方式解决/影响结果排序，而是意味着*最近更新*，并且*ConsistentRead*保证您的选择语句之前的每个更新操作已经对该选择操作可见，请参阅说明：

> Amazon SimpleDB 保留每个域的多个副本。当数据被写入或更新时，数据的所有副本都会被更新。但是，**更新传播到所有存储位置需要时间。****数据最终会保持一致**， 但**立即读取可能不会显示更改**。如果您的应用程序不接受最终一致的读取，请使用**ConsistentRead**。尽管此操作可能需要比标准读取更长的时间，但它**始终返回最后更新的值。** *[强调我的]*

[有关一致性](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/ConsistencySummary.html)的链接部分提供了有关此概念的更多详细信息和说明。

## 排序

为了达到您可能想要的结果，一个简单的*order by*语句应该可以完成这项工作，例如：

```
select * from table_name where last_updated > '2012-09-25' order by last_updated; 
```

关于 SimpleDB 上的此操作有一些限制/微妙之处，因此请务必浏览[Sort](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/SortingDataSelect.html)的简短文档以获取详细信息。

# imagemagick - 将 PostScript 转换为 GIF 的最快方法是什么？

> ID：12607478
> 
> 赞同：1
> 
> 时间：2012-09-26T17:47:27.557
> 
> 标签：imagemagick, postscript

我现在正在使用 ImageMagick`convert`实用程序。我有一个 PostScript 文件需要大约 90 秒才能转换为 GIF。

我正在寻找一种更快的方法来最好地通过修改“转换”选项来做到这一点。

当我说“快”时，最好是几秒钟，但我会采取任何显着的速度。适合交互式 GUI 的东西。

我只需要黑白或灰度的（特别是地震数据“摆动轨迹”的图像，所以黑白很好。）

其他可接受的格式包括 BMP、GIF、JPEG、JPG、PCX、PGM、PNG、PNM、PPM、RAS、TGA、TIF 或 TIFF。

试图坚持使用已经安装的 ImageMagick，并试图避免向我的老板出售任何新东西。仍然很高兴听到其他建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:10:32.180

我的建议是：**使用 Ghostscript**。

由于您已经安装了工作的 ImageMagick，这意味着 Ghostscript 也在那里：因为 ImageMagick 无法自行将 PDF 或 PostScript 转换为光栅图像——它必须调用 Ghostscript 作为其*代理*才能执行此操作。

Ghostscript 可以直接将 PDF/PostScript 输入转换为 TIFF/TIF/TIFFg4、JPEG、PBM、PCX、PNG、PNM、PPM、BMP 光栅图像输出。

**优点是：**您不需要涉及 ImageMagick。所以它更快，也让您更直接地控制转换参数。如果您通过 ImageMagick 运行 Ghostscript，那是一个并不总是需要的间接级别。（有时可能需要为 Ghostscript 生成的光栅图像数据添加一些微调和后处理操作——但对您来说似乎并非如此。）

**唯一的缺点是：** Ghostscript 不能生成 GIF。如果您*需要*GIF（您似乎不需要），则需要 ImageMagick 将 Ghostscript 的光栅输出后处理为 GIF。

您可以通过运行以下示例查看 ImageMagick 如何调用 Ghostscript（以及它用于调用的参数 - 在*stderr*上查找包含`gs`、`gsx`或`gswin32c`或的打印行）：`gswin64c`

```
 convert -verbose some.pdf[0] some.gif 
```

* * *

**更新**

我确实运行了一个非常非常不科学的“基准”，分别运行以下两个命令 100 次，将[官方 PDF 规范（PDF-1.7 的 ISO 版本）](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的随机选择的第 333 页转换为 GIF，测量消耗的时间. 我同时并行运行这些命令，因此两者都必须处理相同的整体系统负载，从而使结果具有更好的可比性：

1.  'Comfortably' 使用 ImageMagick's`convert`直接生成 GIF：

    ```
    time for i in $(seq -w 1 100); do
        convert                      \
           PDF32000_2008.pdf[333]    \
           p333-im-no_${i}.gif ;
    done 
    ```

2.  使用 Ghostscript 从同一页面创建灰度 PNG，将 Ghostscript 的输出传送到 ImageMagick`convert`以获得 GIF：

    ```
    time for i in $(seq -w 1 100); do
        gs                      \
          -q                    \
          -o -                  \
          -dFirstPage=333       \
          -dLastPage=333        \
          -sDEVICE=pnggray      \
           PDF32000_2008.pdf    \
        |                       \
        convert                 \
          -                     \
           p333-gs-no_${i}.gif ;
    done 
    ```

**第一个命令的计时结果**（运行“舒适”`convert`以实现 PDF-> GIF 转换，它仅在“背后”使用 Ghostscript）：

```
real  2m29.282s
user  2m22.526s
sys   0m5.647s 
```

**第二个命令的计时结果**（`gs`直接+公开运行，将其输出管道传输到`convert`：

```
real  1m27.370s
user  1m23.447s
sys   0m3.435s 
```

还有一件事：

*   100 个“Ghostscript”-GIF 的总大小为 1.6 MB——但它们是 8 位灰度的。

*   100 个“ImageMagic-direct”-GIF 的总大小为 1.2 MB——但它们是 2 位黑白。

*   我目前没有动机更多地调整测试命令行参数以使结果文件更具有可比性。

这个结果（149 秒对 87 秒）让我对我的猜测有足够的信心，当你遵循我的建议时，你可以获得显着的性能改进。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:18:08.607

> 我现在正在使用 ImageMagick 转换实用程序。我有一个 PostScript 文件需要大约 90 秒才能转换为 GIF。
> 
> 我正在寻找一种更快的方法来最好地通过修改“转换”选项来做到这一点。
> 
> 当我说“快”时，最好是几秒钟，但我会采取任何显着的速度。适合交互式 GUI 的东西。
> 
> 我只需要黑白或灰度的（特别是地震数据“摆动轨迹”的图像，所以黑白很好。）

您可以从 GhostScript 开始：

```
 gs -dSAFER -dBATCH -dNOPAUSE \
    -sDEVICE=pnggray -r300 -sOutputFile=seismic.png seismic.pdf 
```

一个更长但有趣的方法是准确分析*这些*PDF 中的内容。

我必须对 EKG 工作流程的 PDF 输出做类似的事情。原始数据不可用，我们只有 PDF，但我发现 PDF 是*基于矢量*而不是光栅。经过一番修改后，很容易解码标签、图例和构成 EKG 图的单个基本线，我想出了一个选项，从出现的灰度图像开始重新着色轨道。不过，这确实需要几天时间。

您的 PDF 可能以类似的方式生成，并且数据可以被解码（起初我不得不用它`pdftk`来获取非压缩的 PDF，然后我找到了一个可以使用的库 - 它实现了 Deflate 算法）。以 SVG 格式输出真的很酷 :-)

# objective-c - 从 NSObject 类移动 ViewController 中的按钮（调整到 4" 屏幕）

> ID：12607481
> 
> 赞同：1
> 
> 时间：2012-09-26T17:47:33.943
> 
> 标签：objective-c, nsobject, iphone-5

我正在努力将我的所有 iPhone 屏幕调整为新的 iPhone 5 4" 屏幕。为了使代码更易于管理，我想使用 NSObject 类来执行此操作，该类调用 ViewController 来移动按钮或任何需要的东西感动。

有人请给我一些提示如何做到这一点，或者是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:28:33.130

如果您正在谈论自动调整大小，那么我相信共享链接将以 [编程方式自动调整掩码与 Interface Builder / xib / nib工作](https://stackoverflow.com/questions/7754851/autoresizing-masks-programmatically-vs-interfact-builder-xib-nib)

您可以通过编程以及使用界面生成器来调整按钮和视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:49:32.407

我建议您考虑使用[Auto Layout](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)。它会做你需要的一切。

# php - PHP GD 2颜色3步渐变？

> ID：12607483
> 
> 赞同：0
> 
> 时间：2012-09-26T17:47:46.043
> 
> 标签：php, png, gd, gradient, linear-gradients

我正在尝试拍摄 png 图像（具有透明背景，黑色是唯一的前景色）并仅在黑色前景上叠加 2 色 3 步线性渐变。

例子; 从下到上：0% - 颜色 1、50% 颜色 2、100% 颜色 1。

这有可能让渐变只影响php-gd中的黑色前景吗？如果是这样，我将如何去做？

# sharepoint-2007 - 在 Sharepoint 2007 中查看个人的所有共享点权限

> ID：12607486
> 
> 赞同：1
> 
> 时间：2012-09-26T17:47:53.687
> 
> 标签：sharepoint-2007

有没有办法在整个 Sharepoint 2007 环境（即所有站点、列表、库等）中查看个人的所有权限？我知道我可以通过在高级权限下选择查看组权限来对组执行此操作。我如何处理个人？我不知道以前的 IT 授予用户权限的内容和位置，我们有数千个区域和数百个用户。这对于逐个站点的验证来说太过分了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:11:11.720

我为 MOSS 2007 使用[Access Checker WebPart](http://accesschecker.codeplex.com/)。

# javascript - Jquery Flot Slow & 冻结 IE

> ID：12607489
> 
> 赞同：2
> 
> 时间：2012-09-26T17:48:09.670
> 
> 标签：javascript, jquery, plot, flot

我目前必须在 8000 - 32000 点（4 行 * 8000 点）附近进行绘图，我通过 JSON 请求获取我的数据，实际上数据在不到一秒的时间内返回给我。但是，每当我到达 $.plot 点时，它就会冻结 IE8，并且需要永远加载那么多点。这是我的代码：

```
var data = [];

        function onDataReceived(seriesData) {
            var p = $.plot(placeholder, seriesData.seriesData, options);
        }
        $.ajax({
            url: '/Charts/LineChart?DataTypesToGraph=' + dataTypes + '&DatePull=' + chartDate + '&AssetID=' + $('#AssetID').val(),
            method: 'GET',
            async: true,
            cache: true,
            dataType: 'json',
            success: onDataReceived
        }); 
```

如何加快我的 $.plot 以使其加载速度更快。还有一种方法可以做到它不会冻结IE8吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:09:52.763

您看到的是“冻结”，因为 Flot（尚）不支持增量绘图；它在将控制权交还给浏览器之前渲染整个绘图。除了破解代码之外，没有其他办法，但是您可以做两件事来提供帮助：

1.  您可能正在使用 Excanvas；尝试切换到[Flashcanvas](http://flashcanvas.net/)。根据我的经验，它与 Flot 一样好用，并提供了显着更好的性能。获得“专业版”许可所需的 31 美元不会超出大多数预算。

2.  每条线有 8000 个点，大多数显示最大宽度为 1920 像素，平均值更像 1280。如果你显示整条线，没有某种缩放/平移，那么你正在渲染 4-6比屏幕上实际可见的数据多倍。一些将点数降低到 2k 的服务器端过滤/聚合将显着提高性能。

但无论你做什么，你永远不会在 IE8 上获得大型数据集的出色性能。它是一个差不多有四年历史的浏览器，在 JavaScript 性能大战之前发布，使用模拟画布；你只能做这么多。

# php - 复制和粘贴 会产生烦人的减号。寻找 PHP 过滤器

> ID：12607494
> 
> 赞同：1
> 
> 时间：2012-09-26T17:48:34.593
> 
> 标签：php, copy-paste, wbr

我遇到了一个奇怪的问题。

我们使用以下格式的客户银行预订交易 ID `U123C123P123B123`：.

测试预订后，我们使用“ctrl+c”从网上银行输出中复制了交易 ID（正确显示）文本。这个文本，再次输入我们的系统（通过粘贴 strg+v）无法处理，因为：

粘贴时，“ `<wbr>`”变成减号。减号不会显示在表单域中。但它会过去的。MySQL 无法处理带有那个奇怪减号的请求。

银行输出源代码如下：“ `U123C123P123<wbr>B123`”。

大多数软件（firefox、thunderbird、...）在粘贴后都会显示正确的 T-ID。某些编辑器（例如 notepad++、Dreamweaver）会显示粘贴的 T-ID，包括减号。喜欢：“ `U123C123P123-B123`”

如何删除这个愚蠢的减号？我已经尝试过使用 str_replace 和 strip_tags。

对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:24:06.163

我最好的猜测是，在 B123 之前，特定字符会以某种方式出现在您的输出中。

检查网上银行系统。转到显示交易 ID 的页面并将其保存在您的硬盘上。使用可以显示不可打印字符的编辑器（例如在 Linux 中的 vi）打开它并检查特定字符串出现的区域。如果字符串与`<wbr>`字符一起出现，那么您可以更改网上银行系统软件，使其不在那里输出该字符。

但是（我怀疑）如果您无法访问该系统来修改它并且您最终需要修复一些东西，您可以在表单字段中附加一个过滤器或自己过滤数据之前数据库调用。

```
$field = strtoupper($_POST['transaction_id']);
$sanitized = str_replace('<WBR>', '', $field);
$sanitized = str_replace(chr(173), '', $sanitized); 
```

173 是软连字符`&shy`，因此很可能是输入的内容。您始终可以对发布的数据执行 var_dump 并检查输入内容的实际 ASCII 代码。

高温高压

# widget - 多个用户流到一个 StockTwits 小部件

> ID：12607498
> 
> 赞同：1
> 
> 时间：2012-09-26T17:48:58.303
> 
> 标签：widget, stocktwits

是否可以将多个用户流聚合到一个 StockTwits 小部件中，还是仅限于一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:14:39.997

它仅限于一个用户名或符号。这是[小部件文档](http://stocktwits.com/developers/docs/widget)。

# javascript - 对于某些客户端，jQuery ajax POST 数据在服务器上为空

> ID：12607500
> 
> 赞同：0
> 
> 时间：2012-09-26T17:48:59.333
> 
> 标签：javascript, jquery, ajax, http-post

我遇到了一个非常特殊的问题，我在这里找到的答案都没有解决它。

在某些客户端（IE7、IE8）上，当我使用 jQuery Ajax 发布数据时，例如：

```
$.ajax({
    type: 'POST',
    url: '<%= ResolveUrl"~/User.svc/GetUserListForCity") %>',
    data: '{"city":' + cityId + '}',
    contentType: 'application/json; charset=UTF-8',
    dataType: 'json',
    success: processList,
    error: showErrorAlert
}); 
```

我得到的错误：

> “OperationFormatter 无法反序列化消息中的任何信息，因为消息为空 (IsEmpty = true)。”

但是，当我尝试使用 Fiddler 查看数据时，请求成功。

服务器是 IIS，请求由 WCF Web 服务 (webHttpBinding) 提供服务。删除 contentType 以允许默认值被服务器拒绝，因为它需要 JSON。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:53:53.743

试试这个..看起来你发送的数据对象是错误的

```
data: {"city": cityId }, // If cityID is a string this should do 
```

或者

```
data: '{"city":"' + cityId + '"}', 
```

您发送 url 的方式也可能存在问题。尝试使用绝对路径并检查是否有效。

# node.js - 如何使用 node.js 处理 net.Stream？

> ID：12607502
> 
> 赞同：0
> 
> 时间：2012-09-26T17:49:06.400
> 
> 标签：node.js

我正在尝试了解 node.js 中的流！

### 服务器.js

```
var net = require("net");

var server = net.createServer(function(conn) {

  conn.write("welcome!");

  # echo the user input!
  conn.pipe(conn);
});

server.listen("1111", function() {
  console.log("port 1111 opened");
}); 
```

### 远程登录测试

服务器当前回显用户的输入

```
$ telnet localhost 1111
welcome!
hello
hello 
```

### 期望的输出

为了演示我应该在哪里/如何处理服务器端的流，我想`{}`在回显之前包装用户的输入

```
$ telnet localhost 1111
welcome!
hello
{hello} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:06:01.207

这将基本上完成您要求的确切输出：

```
var net = require('net');

var server = net.createServer(function(c) {
    c.setEncoding('utf8');
    c.on('data', function(d) {
        c.write('{' + d.trim() + '}\n');
    });
});

server.listen(9871); 
```

首先让我提请您注意`c.setEncoding('utf8')`。这将在连接上设置一个标志，该标志将自动将传入的 Buffer 转换为 utf8 空间中的字符串。这适用于您的示例，但请注意，为了提高 Socket 之间的性能，最好执行 Buffer 操作。

模拟整个`.pipe()`将需要更多的代码。

`.pipe()`是`Stream`原型的一个方法，可以在`lib/stream.js`. 如果您查看该文件，您会看到比我上面显示的要多得多的代码。为了演示，这里有一段摘录：

```
function ondata(chunk) {
  if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
          source.pause();
      }
  }
}

source.on('data', ondata); 
```

首先检查目标是否可写。如果不是，则没有理由尝试写入数据。接下来检查 if `dest.write === false`。从文档中：

> 如果整个数据成功刷新到内核缓冲区，[.write] 返回 true。如果全部或部分数据在用户内存中排队，则返回 false。

由于 Streams 存在于内核空间中，在 v8 内存空间之外，因此可能会通过填满内存（而不仅仅是让节点应用程序崩溃）来崩溃您的机器。因此，检查消息是否已耗尽是一种安全预防机制。如果它还没有完成耗尽，那么源将被暂停，直到`drain`事件被发出。这是排水事件：

```
function ondrain() {
    if (source.readable && source.resume) {
        source.resume();
    }
}

dest.on('drain', ondrain); 
```

现在，我们可以涵盖更多内容，包括如何`.pipe()`处理错误、清理自己的事件发射器等，但我认为我们已经涵盖了基础知识。

**注意：**发送大字符串时，可能会分多个包发送。因此，可能需要执行以下操作：

```
var net = require('net');

var server = net.createServer(function(c) {
    var tmp = '';
    c.setEncoding('utf8');
    c.on('data', function(d) {
        if (d.charCodeAt(d.length - 1) !== 10) {
            tmp += d;
        } else {
            c.write('{' + tmp + d.trim() + '}\n');
            tmp = '';
        }
    });
});

server.listen(9871); 
```

这里我们假设字符串以换行符（`\n`或 ascii 字符代码 10）结束。我们检查消息的结尾，看看是否是这种情况。如果不是，那么我们暂时存储来自连接的消息，直到收到换行符。

这对您的应用程序来说可能不是问题，但认为这值得一提。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:01:35.070

你可以做类似的事情

```
conn.on 'data', (d) ->
  conn.write "{#{d}}" 
```

.pipe 方法基本上只是附加输入流的数据事件以写入输出流

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:08:19.780

我不确定 net() 实际上，但我想它与 http 非常相似：

```
http.createServer(function (req, res) {

        res.writeHead(200, {'Content-Type': 'text/event-stream'});
        http.get(options, function(resp){
            resp.on('data', function(chunk){
                res.write("event: meetup\n");
                res.write("data: "+chunk.toString()+"\n\n");
            });
        }).on("error", function(e){
            console.log("Got error: " + e.message);
        });
}); 
```

[https://github.com/chovy/nodejs-stream](https://github.com/chovy/nodejs-stream)

# git - 如何使用 Git 正确分支和合并？

> ID：12607505
> 
> 赞同：3
> 
> 时间：2012-09-26T17:49:27.540
> 
> 标签：git, github, merge, branch

我已经搜索了所有其他网络并阅读了许多说明，但它只是不起作用和/或表现出我的预期。

我在 master 工作，刚刚完成了我项目的 0.1 版本的工作，并想从它分支出来，以便获得一个易于访问的 0.1 快照。我目前在 master 工作，所以我跑了：

```
git branch 0.1 
```

这很好地在我的机器上创建了一个分支，但我一生都无法弄清楚如何推动它。我最终跑了：

```
git config push.default current 
```

现在我可以使用以下方式在项目之间交换：

```
git checkout 
```

而且我能够很好地推动它们，并且在 github 上有两个分支。然后我在 0.1 中添加了一个日志文件，它简单地说“0.1 快照测试”，提交并推送它。然后我决定我想要那个登录到主分支，所以我跑了：

```
git merge 0.1 
```

然后我推了它。这现在在我的机器上保留了 0.1，但从 github 中删除了 0.1。编辑：实际上它似乎仍在 github 上，只是在查看整个母版页时被隐藏了。

我想我不太确定应该如何使用 git 来跟踪以前但已完成的版本。我应该分支和合并哪个顺序？是不是因为我在师父工作，所以搞糊涂了？我通读了所有这些，但它让我更加困惑：http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:52:45.387

我真的很喜欢 Git 流程的工作方式。当然，您可以手动执行所有分支、合并和标记步骤，但在我看来，Git 流程更清楚地说明了这一点：

[http://jeffkreftmeijer.com/2010/why-arent-you-using-git-flow/](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:57:04.440

您的问题仅与推送有关吗？

你可以这样做：

```
git push origin master
git push origin 0.1
-- or all
git push --all origin 
```

甚至对于所有分支：

[设置 git 拉取和推送所有分支](https://stackoverflow.com/questions/1914579/set-up-git-to-pull-and-push-all-branches)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:56:07.283

当你在 git 上创建一个新分支时，第一次推送应该引用原点：

```
git push origin 0.1 
```

希望我得到了这个问题的正确结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:57:05.610

如果 push 没有像你期望的那样自动工作，你总是可以明确的：

```
git push origin localBranchName:remoteBranchName 
```

这会将本地分支推送到远程分支，如果远程服务器上没有这样的分支，则会创建它。

您可以使用类似的语法删除远程分支：

```
git push origin :remoteBranchName 
```

# python - python os.path.join 用于冻结的 exe

> ID：12607507
> 
> 赞同：0
> 
> 时间：2012-09-26T17:49:30.050
> 
> 标签：python, python-2.7

我正在研究使用 os.walk 搜索相对路径的代码。当我将它作为 python 脚本运行时，我没有任何问题，但是在将其转换为 exe 后，它似乎无法找到相对路径。当前路径打印良好以下是我一直在研究的当前解决方案。

> ```
> if getattr(sys, 'frozen', False):
>     currentPath = os.path.dirname(sys.executable)
>     relativePath = os.path.join(currentPath,'/../../folder')
> else:
>     currentPath = inspect.stack()[0][1]
>     relativePath = os.path.join(currentPath,'/../../folder') 
> ```
> 
> `for root, dirs, files in os.walk(relativePath):`

在对 relativePath 进行硬编码时，exe 可以工作。

> relativePath = "D:/location/../../文件夹"

转换为我缺少的 exe 时加入有什么棘手的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:06:26.270

我不确定，但原因可能是您在路径中混合了反斜杠和正斜杠。

尝试将创建的代码更改为`relativePath`以下内容：

```
relativePath = os.path.join(currentPath, '..', '..', 'folder') 
```

这应该确保您肯定使用了正确的路径分隔符。

# javascript - Formstack 使用 javascript 变量预填充隐藏字段

> ID：12607510
> 
> 赞同：0
> 
> 时间：2012-09-26T17:49:39.320
> 
> 标签：javascript, jquery, forms, hidden-field

我正在尝试使用标识为 tS 的变量填充具有 ID #filed123（嵌入在使用 javascript 的 html 页面上）的 Formstack 隐藏字段。

关于我可以使用什么javascript来做到这一点的任何想法？我的问题是，只有在 DOM 准备好并加载表单后，它才需要预填充该字段。

提前致谢！

当前代码：

```
<script type="text/javascript">
  var tS = +new Date;
</script>

<script type="text/javascript">
$(document).ready(function(){
    $('#field16955312').val(tS);
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:51:07.220

试试这个，假设该字段是文本框

**使用 Javascript**

```
document.getElementById('filed123').value = tS ; 
```

**使用 jQuery**

```
$('#filed123').val(tS); 
```

# string - Shortest uncommon substring：一个字符串的最短子字符串，即不是另一个字符串的子字符串

> ID：12607512
> 
> 赞同：11
> 
> 时间：2012-09-26T17:49:44.367
> 
> 标签：string, algorithm, suffix-array

我们需要找到两个字符串之间的最短不常见子字符串，即如果我们有两个字符串`a`，`b`那么我们需要找到`a`不是 的子字符串的最短子字符串的长度`b`。

如何使用后缀数组解决这个问题？

以不超过 n*lg(n) 的复杂度求解

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T18:00:49.153

这可以用[广义后缀树](http://en.wikipedia.org/wiki/Generalised_suffix_tree)在 O(N) 时间内解决。

在O(N)时间内构建完广义后缀树后，需要进行广度优先搜索，找到不属于两个字符串的第一个节点。从根到该节点的路径给出了最短的不常见子串。

* * *

同样的事情也可以在 O(N) 时间内使用两个输入字符串的通用后缀数组来完成。

构造广义后缀数组和[LCP 数组](http://en.wikipedia.org/wiki/LCP_array)（或稍后从后缀数组构造 LCP 数组）。添加单个零元素作为 LCP 数组的前缀；添加另一个零元素作为后缀。找到一对最小的 LCP 条目，使得只有一个字符串的后缀由这些条目分隔。这意味着您需要对 LCP 数组执行线性扫描，提取两个最小值，但每次看到不同字符串的后缀或看到属于两个字符串的后缀时，都将两个最小值重置为无穷大。这些对中最好的较大元素（对中较大元素的值最小）给出了最短不常见子串的长度。这是有效的，因为这对最小值分隔了第一个节点（最靠近根节点）的所有后代，而不属于相应后缀树中的两个字符串。

# python - Python UDP广播未发送

> ID：12607516
> 
> 赞同：20
> 
> 时间：2012-09-26T17:49:56.370
> 
> 标签：python, udp, broadcast, labview

我正在尝试从 Python 程序向两个 LabView 程序进行 UDP 广播。我似乎无法发送广播，我不确定我的套接字初始化在哪里出错，广播似乎很简单？据我所见，其他 PC 没有接收到数据。另外，我将来需要这个程序从其他 PC 接收数据。看起来这不应该使事情复杂化，但对我来说，每一步都很复杂！

背景：我的软件经验为零，这只是我在工作中分配的东西。任何帮助表示赞赏。代码如下。蟒蛇 2.7。

```
from threading import Thread  
import time  
from socket import *  

cs = socket(AF_INET, SOCK_DGRAM)  
cs.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)  
cs.setsockopt(SOL_SOCKET, SO_BROADCAST, 1)  
cs.connect(('<broadcast>', 5455)) 

while 1:
    cmd = int(raw_input('send: '))
    if (cmd == 1):
        cs.send('1')
    time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-26T17:57:52.563

您不需要`connect()`使用 UDP 套接字，而是：

```
cs.sendto(data, ('255.255.255.255', 5455)) 
```

编辑：这似乎对我有用：

```
from socket import *
cs = socket(AF_INET, SOCK_DGRAM)
cs.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
cs.setsockopt(SOL_SOCKET, SO_BROADCAST, 1)
cs.sendto('This is a test', ('255.255.255.255', 54545)) 
```

在另一台机器上我运行了 tcpdump：

```
tcpdump -i eth1 port 54545 -XX
listening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes

14:04:01.797259 IP 10.22.4.45.33749 > 255.255.255.255.54545: UDP, length 14
0x0000:  ffff ffff ffff f0de f1c4 8aa6 0800 4500  ..............E.
0x0010:  002a 0000 4000 4011 2c81 0a16 042d ffff  .*..@.@.,....-..
0x0020:  ffff 83d5 d511 0016 fe38 5468 6973 2069  .........8This.i
0x0030:  7320 6120 7465 7374 0000 0000            s.a.test.... 
```

您可以在有效负载中看到文本。以及广播以太网和 IP dst 地址。

# sass - 在 Compass 中更改 CSS 输出文件名

> ID：12607522
> 
> 赞同：4
> 
> 时间：2012-09-26T17:50:11.330
> 
> 标签：sass, compass-sass, zurb-foundation

我正在使用 Compass 将 .scss 文件编译为 .css 文件。我有一个名为 app.scss 的文件，我想将其编译为 Foundation.css。

问题是我不能简单地将 app.scss 重命名为foundation.scss，因为我最终会遇到循环导入错误（app.scss 包括以下行：）`@import "foundation";`。

Compass 有没有办法在编译期间将 app.scss 重命名为 Foundation.css。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:13:04.423

最简单的方法是更改`app.scss`​​为`_app.scss`，然后有一个`foundation.scss`除了导入之外什么都不做的`_app.scss`。

# c# - 跨程序集的自定义程序集属性问题

> ID：12607525
> 
> 赞同：0
> 
> 时间：2012-09-26T17:50:26.073
> 
> 标签：c#, .net-assembly, custom-attributes

我在程序集 A 中有以下代码：

```
[AttributeUsage(AttributeTargets.Assembly)]
public class AssemblyCategoryAttribute : Attribute {
    public string Category { get; set; }

    public AssemblyCategoryAttribute(string category) {
        Category = category;
    }
} 
```

程序集 B 引用程序集 A 并应用了此属性。最后，程序集 C 还引用程序集 A 并具有以下代码：

```
var assembly = Assembly.LoadFrom("..."); // Get assembly B
var description = assembly.GetCustomAttributes(false).OfType<AssemblyDescriptionAttribute>().SingleOrDefault();
var category = assembly.GetCustomAttributes(false).OfType<AssemblyCategoryAttribute>().SingleOrDefault(); 
```

然而，它得到了很好的描述，但类别返回空值。如果有人可以帮助我解决这个问题，我将不胜感激。谢谢

**编辑**

根据评论中的要求，这是我在程序集 B 中的 AssemblyInfo.cs 文件：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using AssemblyANameSpace;

[assembly: AssemblyTitle("Name")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyCategory("Core")]

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:40:40.653

我做了以下事情：

1.  我创建了 AssemblyA、AssebmlyB 和 WindowsFormApplication1
2.  我将包含 AssemblyCategoryAttribute 的 AssemblyA 引用添加到 AssemblyB 和 WindowsFormApplication1
3.  我将 AssemblyCategory 属性添加到 AssemblyB

这似乎对我有用：

```
string assemblyFile = @"D:\My Documents\Visual Studio 2008\Projects\ClassLibrary1\bin\x64\Debug\AssemblyB.dll";
byte[] assemblyBytes = File.ReadAllBytes(assemblyFile);

var assembly = Assembly.Load(assemblyBytes); // Get assembly B 
var description = assembly.GetCustomAttributes(false).OfType<AssemblyDescriptionAttribute>().SingleOrDefault(); 
var category = assembly.GetCustomAttributes(false).OfType<AssemblyCategoryAttribute>().SingleOrDefault(); 
```

# ruby-on-rails - 我也可以使用我的新用户表单登录吗

> ID：12607528
> 
> 赞同：0
> 
> 时间：2012-09-26T17:50:35.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以前有人问过这个问题，但我找不到真正的答案：我怎样才能让我的用户通过他们注册的相同表单登录？顺便说一句，这是客户的要求/需求，我意识到这远非理想......

**用户**

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      render :json => @user.to_json(:only => [:id])
    else
      render :json => @user.errors, :status => ""
    end
  end
end 
```

**会议**

```
class SessionsController < ApplicationController
  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:email])
      sign_in user
      render :json => @user.to_json(:only => [:id])
    else
      render :json => @user.errors, :status => ""
    end
  end
end 
```

**形式**

```
<%= form_for(@user, :html => { :class => "access"}) do |f| %>
    <%= f.label :firstname, "Firstname" %>
    <%= f.text_field :firstname, :placeholder => "Your firstname" %>
    <%= f.label :surname, "Surname" %>
    <%= f.text_field :surname, :placeholder => "Your surname" %>
    <%= f.label :email, "Email Address" %>
    <%= f.text_field :email, :placeholder => "Your email address" %>
    <%= f.submit "Verify" %>
<% end %> 
```

电子邮件被验证为唯一的，这可能是一个入口点吗？例如。如果电子邮件不是唯一的，请检查名称和电子邮件或其他内容。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:03:29.347

我的建议是制作另一个控制器，类似于`AccessController`. 它应该使用一个既意味着登录又意味着注册的名称，Access 只是我能想到的。该控制器应该能够检查登录凭据并登录或注册。

# extjs - 面板上的 Extjs 双击事件

> ID：12607532
> 
> 赞同：2
> 
> 时间：2012-09-26T17:51:01.797
> 
> 标签：extjs, extjs4, extjs4.1

我想向面板添加双击事件。我该怎么做？所以我有一个带有一些 html 的面板，没有其他事件或可点击项目，我希望能够捕获双击。

实际上，只要我可以双击它，任何可以显示大量 html 的组件都可以。

我搜索了 Sencha 的文档，并没有很多带有双击事件的组件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T18:08:23.260

双击事件不是 s 的事件，是`Ext.Component`s 的事件`Ext.Element`。由于`Ext.Components`render `Ext.Element`，它们为您提供了一种在组件创建的元素上设置处理程序的方法，而无需等待`render`事件。

只需为事件设置一个侦听器`dblclick`，指定`Ext.Element`您要处理的面板中的哪个事件。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-addListener](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-addListener)

这是一个例子：http: [//jsfiddle.net/eVzqT/](http://jsfiddle.net/eVzqT/)

```
new Ext.Panel({
    html: 'Here I am',
    title: 'Title',
    width: 400,
    height: 500,
    listeners: {
        dblclick : {
            fn: function() {
                 console.log("double click");
            },
            // You can also pass 'body' if you don't want click on the header or
            // docked elements
            element: 'el'
        }    
    },
    renderTo: Ext.getBody()
});​ 
```

如果您希望能够处理来自控制器的事件，则需要将事件从元素中继到组件

```
new Ext.Panel({
    html: 'Here I am',
    title: 'Title',
    width: 400,
    height: 500,
    listeners: {
        dblclick : {
            fn: function(e, t) {
                 this.fireEvent('dblclick', this, e, t);
            },
            // You can also pass 'body' if you don't want click on the header or
            // docked elements
            element: 'el',
            scope: this
        }    
    },
    renderTo: Ext.getBody()
});​ 
```

可以抽象成一个插件

```
/**
 * Adds an Ext.Element event to a component
 * could be improved to handle multiple events and to allow options for the event
 */
Ext.define('my.plugin.ComponentElementEvent', {
    extend: 'Ext.AbstractPlugin',
    alias: 'plugins.cmp-el-event',

    /**
     * @cfg {String} eventName Name of event to listen for, defaults to click
     */
     eventName: 'click'

    /**
     * @cfg {String} compEl Name of element within component to apply listener to
     *      defaults to 'body'
     */
     compEl: 'body',

    init: function(cmp) {
       cmp.on(this.eventName, this.handleEvent, this, {element: this.compEl});

    },
    handleEvent: function(e,t) {
        this.getCmp().fireEvent(this.eventName, this.getCmp(), e, t);
    }
}); 
```

你可以像下面这样使用插件

```
// This panel fires a dblclick event that can be handled from controllers.
new Ext.Panel({
    html: 'Here I am',
    title: 'Title',
    width: 400,
    height: 500,
    plugins: [{ptype: 'cmp-el-event', eventName: 'dblclick', compEl:'el'}
    renderTo: Ext.getBody()
});​ 
```

# c++ - 在这种情况下，内联函数的宏有什么更好的？

> ID：12607533
> 
> 赞同：-2
> 
> 时间：2012-09-26T17:51:02.877
> 
> 标签：c++

> **可能重复：**
> [内联函数与预处理器宏](https://stackoverflow.com/questions/1137575/inline-functions-vs-preprocessor-macros)
> [什么是内联函数的概念，它与宏有何不同？](https://stackoverflow.com/questions/7738888/what-is-concept-of-inline-function-and-how-it-is-differ-from-macro)

```
inline unsigned int getminutes( unsigned int seconds )
{
    return( seconds / 60 );
}

#define GetMinutes(seconds) (seconds) / (60) 
```

老实说，我会问哪个**更快**，但是我在 SO 上看到了很多，所以问哪个更好会给我知识。（是的！我是知识猎手）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T17:53:19.737

如果您可以使用内联函数来实现相同的功能，请不要使用宏。假设您使用的是相当不错的解决方案，编译器将为您提供的两种解决方案生成**完全相同的代码。**

当然，不能保证内联函数实际上会被内联，但在这些情况下，如果您的编译器不能内联该函数，那么它可能是一个非常糟糕的函数。

除非你真的需要，否则不要使用宏（标题保护，做重复的事情等）。宏在几个方面都是邪恶的，如果您在线搜索信息，您可以阅读很多相关信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:53:24.420

`inline`我猜如果您认为要使用的编译器不能保证宏会更快。如果函数没有内联，那么你就有函数调用的开销。

宏将由预处理器展开，所以它总是内联的。该宏也不是类型安全的并且具有全局范围。

函数是首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:57:45.037

使用良好的优化编译器，性能将是相同的。不同之处在于内联函数或多或少是对编译器的建议。尽管编译器在大多数情况下应该遵守建议，但宏版本将**强制**编译器内联代码。

顺便说一句，应编写宏`((seconds) / 60)`以确保在所有情况下都使用预期的分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:00:09.987

不幸的是，哪个**更快**是唯一知道的方法是分析的情况之一。但是，我怀疑在典型的发布构建设置中结果是相同的。

哪个**更好**，但是，我会说内联函数。更容易调试。比宏更安全。

除非绝对必要，否则我会避免使用宏。我认为它们是编译时查找和替换。我认为查找和替换在最坏的情况下是**极其**危险的。实际上，我写了一两篇[关于](http://www.sheevok.com/archives/198)为什么我如此强烈地不喜欢#define 宏的[帖子......](http://www.sheevok.com/archives/185)

我运行的另一个建议是：编译器比你更清楚。宏将强制内联，即使它实际上对性能不利。`inline`将建议它作为内联的候选者，但如果它不符合内联标准，则可能不会内联。

# ios - Google Places API 违规

> ID：12607538
> 
> 赞同：30
> 
> 时间：2012-09-26T17:51:15.790
> 
> 标签：ios, ios6, mapkit, google-places-api

我正在使用 Google Places API 来提取餐厅列表，并将它们显示在地图上。然而，由于苹果在 iOS 6.0 中从谷歌那里切换了地图服务，我现在违反了谷歌的使用条款，其中规定你必须在谷歌地图上显示谷歌数据。

“如果您的应用程序在地图上显示 Places API 数据，则该地图必须由 Google 提供。”

[https://developers.google.com/places/policies#terms_of_use](https://developers.google.com/places/policies#terms_of_use)

我显然需要更改地图，因为我不会发布违规的应用程序。关于做什么的任何想法或建议？我应该用网络视图去谷歌地图吗？苹果是否有某种 Google Places API 替代方案？

编辑：

通过网络视图使用谷歌地图很麻烦，我想找到一个替代方案，尽管它在技术上是可行的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T22:05:39.013

我决定使用 Google Maps JavaScript API。虽然，处理起来有点困难，主要是通过Objective-C的JavaScript，但它是一种解决方案。地图通过 web 视图显示，我使用 JavaScript 与地图进行交互。

[https://developers.google.com/maps/documentation/javascript/tutorial#api_key](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)

我将等待接受这个答案，看看其他人是否有任何想法。我只是想发布这个，以防它帮助别人。

编辑：

Google 最近发布了适用于 iOS 的 Maps SDK，这是现在更好的解决方案。

[https://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T18:04:59.017

我会尝试直接联系谷歌，解释情况，并要求他们获得使用苹果地图的书面许可。这比编程更像是一个法律问题。有人会认为 Google 知道您无法再使用 Apple 的 API 显示他们的地图，而且即使不考虑地图，他们也会希望您使用他们的位置，因为这样做会为他们带来广告收入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T06:38:58.640

在这里同意@Owen - 您可以获得许可让您的应用程序保持不变，直到您可能需要更改它的某个可能的未来日期，或者您是否肯定会立即努力更改它，然后可能不得不再次更改它未来出于其他原因。

如果你能得到一个 100% 的保证，你可以改变它一次并且永远不必再改变它，那么我会说现在就做，但没有什么是确定的。

# cocos2d-iphone - NSInternalInconsistencyException' 'GL_CLAMP_TO_EDGE 应该在 NPOT 维度中使用'

> ID：12607539
> 
> 赞同：0
> 
> 时间：2012-09-26T17:51:17.740
> 
> 标签：cocos2d-iphone, kobold2d, nsassert

我刚刚将我的项目从 Kobold2d 1.1.2 升级到 2.0.4，现在每次我尝试构建时都会收到此消息。

```
*** Assertion failure in -[CCTexture2D setTexParameters:], /Desktop Items/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/libs/cocos2d-iphone/cocos2d/CCTexture2D.m:856
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'GL_CLAMP_TO_EDGE should be used in NPOT dimensions' 
```

我知道它基本上告诉我我的图像不是 2 的幂，但是在旧版本的 kobold2d 中存在相同的 NSASERT，并且一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-16T08:31:54.800

神奇的词是：

```
CCConfiguration.m:
// around line 122  
supportsNPOT_ = NO; // before it said YES 
```

# vb.net - Visual Studio .vshost 导致异常

> ID：12607540
> 
> 赞同：0
> 
> 时间：2012-09-26T17:51:19.500
> 
> 标签：vb.net

我正在用 Visual Basic 制作一个聊天程序。应该是局域网用的，叫LANChat。

它在端口 65535（只是现在）上启动一个侦听器，并继续在该端口上侦听。但是，如果您尝试一次打开它的两个实例，则会出现运行时错误。我已经处理了它，如果它检测到当前正在使用该端口，它会显示一个 MessageBox 并关闭程序。但是，在 Visual Studio 中，当尝试测试程序时，它会像运行程序一样运行程序。我查看了任务管理器，我看到“LANChat.vshost”当时正在运行。有任何想法吗？我唯一的想法是在测试时注释掉异常处理代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:47:39.523

最好将您的程序创建为单个实例程序。比你应该避免 vshost 问题。我已经为自己完成了它，它工作正常。抱歉，我无法提供代码，我在家 :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:12:04.977

在您的项目属性 > 调试下，您可以取消选择“启用 Visual Studio 托管进程”。这将使托管过程毫无疑问，如果它有效，那么托管过程会以某种方式干扰，如果不是，那么问题就出在其他地方。

# sql-server - SQL Server 中的浮点数和小数转换

> ID：12607546
> 
> 赞同：2
> 
> 时间：2012-09-26T17:52:01.067
> 
> 标签：sql-server

> **可能重复：**
> [使用正确的小数分隔符将浮点数转换为 varchar](https://stackoverflow.com/questions/9310007/converting-float-to-varchar-with-correct-decimal-separator)

当我运行时：`select convert(float, 10.12), convert(decimal(5, 2), 10.12)` 我得到这个结果：

```
(No column name)    (No column name)
10,12   10.12 
```

为什么会这样？我来自巴西，我的 Windows 语言设置为葡萄牙语，但不应该同时返回十进制和浮点数“。” 或“，”同时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:57:11.057

我不确定这是否是问题所在，但它似乎是 SSMS 中的格式错误。它对浮点数和货币使用 OS 区域设置，但对十进制不使用。

[http://connect.microsoft.com/SQLServer/feedback/details/458416/microsoft-sql-server-management-studio-doesnt-get-os-regional-setting](http://connect.microsoft.com/SQLServer/feedback/details/458416/microsoft-sql-server-management-studio-doesnt-get-os-regional-setting)

# javascript - 用javascript隐藏一个div元素

> ID：12607547
> 
> 赞同：1
> 
> 时间：2012-09-26T17:52:10.970
> 
> 标签：javascript, html, visibility

以下是我在 div 中显示匹配的用户输入但我想在用户输入不匹配时隐藏 div 的代码。我似乎无法使用以下代码来做到这一点：

HTML 代码：

```
 <input id="filter" type="text" placeholder="Enter your filter text here.." onkeyup = "test()" />

 <div id="lc">  <p id='placeholder'> </p>  </div> 
```

JS代码：

```
 // JavaScript Document

 s1= new String()
 s2= new String()
 var myArray = new Array();

 myArray[0] = "Football";
 myArray[1] = "Baseball";
 myArray[2] = "Cricket";
 myArray[3] = "Hockey";
 myArray[4] = "Basketball";
 myArray[5] = "Shooting";

 function test()
 {
 s1 = document.getElementById('filter').value;
 var myRegex = new RegExp((s1),"ig");
  arraysearch(myRegex);
  }

 function arraysearch(myRegex)
 {
  document.getElementById('placeholder').innerHTML=""; 
for(i=0; i<myArray.length; i++)
{ 
if (myArray[i].match(myRegex))
{ 
   document.getElementById('lc').style.visibility='visible';
   document.getElementById('placeholder').innerHTML += myArray[i] + "<br/>";
}
    else
    {
   document.getElementById('lc').style.visibility='hidden';
    }
}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:17:21.177

考虑使用 jquery。（带有一点[http://underscorejs.org/](http://underscorejs.org/)的实用程序）

```
var myArray = [“足球”、“棒球”、“板球”、“曲棍球”、“篮球”、“射击”]

$("#filter").keyup(function() {
  if(_.include(myArray, $(this).val()) {
    $('#lc').show()
  } 别的 {
    $('#lc').hide()
  }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:08:56.650

正则表达式是一个强大的工具，但将它们用于如此微不足道的工作通常很麻烦。首先，您使用直接输入作为正则表达式，这从来都不是那么好。

我复制了你的代码并分析了你犯了很多**错误的逻辑**

```
for(i=0; i<myArray.length; i++)
{ 
if (myArray[i].match(myRegex))
{ 
   document.getElementById('lc').style.visibility='visible';
   document.getElementById('placeholder').innerHTML += myArray[i] + "<br/>";
}
    else
    {
   document.getElementById('lc').style.visibility='hidden';
    } 
```

考虑上面的代码，如果我输入足球，它与足球匹配，并显示足球。*接下来它检查不匹配的棒球并且可见性变为隐藏！*

**更好的逻辑**

1.检查哪些字符串匹配，并将它们添加到除法中。

2.**检查有多少字符串匹配**，如果没有，将可见性更改为隐藏。

当这实际上可以通过 indexOf() 轻松实现时，您正在使用正则表达式；

**这些纯属逻辑错误**

# javascript - 多个目标的jQuery dnd文件上传

> ID：12607550
> 
> 赞同：0
> 
> 时间：2012-09-26T17:52:15.710
> 
> 标签：javascript, jquery, jquery-plugins

我正在为一个项目使用***[jQuery dnd 文件上传插件](http://code.google.com/p/dnd-file-upload/)***。dnd 上传器的所有示例都`id`用作选择器。对于多个项目，他们使用不同的`dropzone`声明。

如何更改插件设置为多个`dropzone`选择器将是 a`class`或其他东西以通过单个`dropzone`启动来获取多个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:58:47.210

由于这是使用 jQuery，你不能使用标准的 jQuery 多选择器方法吗？它看起来像这样：

```
$("#drop1, #drop2, #drop3").dropzone(); 
```

或者，如果您正在尝试上课，您可以这样做：

```
$(".drop_zone").dropzone(); 
```

这未经测试，我从未使用过此插件。我只是假设这会起作用，因为它基于 jQuery。

由于这不起作用，请尝试将 jquery.dnd-file-upload.js 的代码替换为以下代码：

```
(function ($) {

$.fn.dropzone = function (options) {
var opts = {};
var uploadFiles = function (files) {
$.fn.dropzone.newFilesDropped(); for (var i = 0; i < files.length; i++) {
var file = filesi?;
// create a new xhr object var xhr = new XMLHttpRequest(); var upload = xhr.upload; upload.fileIndex = i; upload.fileObj = file; upload.downloadStartTime = new Date().getTime(); upload.currentStart = upload.downloadStartTime; upload.currentProgress = 0; upload.startData = 0;
// add listeners upload.addEventListener("progress", progress, false);
xhr.onload = function (event) {
load(event, xhr);
};
xhr.open(opts.method, opts.url); xhr.setRequestHeader("Cache-Control", "no-cache"); xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"); xhr.setRequestHeader("X-File-Name", file.fileName); xhr.setRequestHeader("X-File-Size", file.fileSize); xhr.setRequestHeader("Content-Type", "multipart/form-data"); xhr.send(file);
$.fn.dropzone.uploadStarted(i, file);
}
};
var drop = function (event) {
var dt = event.dataTransfer; var files = dt.files;
event.preventDefault(); uploadFiles(files);
return false;
};
var log = function (logMsg) {
if (opts.printLogs) {
// console && console.log(logMsg);
}
};
// invoked when the input field has changed and new files have been dropped // or selected var change = function (event) {
event.preventDefault();
// get all files ... var files = this.files;
// ... and upload them uploadFiles(files);
};
var progress = function (event) {
if (event.lengthComputable) {
var percentage = Math.round((event.loaded 100) / event.total); if (this.currentProgress != percentage) {
// log(this.fileIndex + " --> " + percentage + "%");
this.currentProgress = percentage; $.fn.dropzone.fileUploadProgressUpdated(this.fileIndex, this.fileObj, this.currentProgress);
var elapsed = new Date().getTime(); var diffTime = elapsed - this.currentStart; if (diffTime >= opts.uploadRateRefreshTime) {
var diffData = event.loaded - this.startData; var speed = diffData / diffTime; // in KB/sec
$.fn.dropzone.fileUploadSpeedUpdated(this.fileIndex, this.fileObj, speed);
this.startData = event.loaded; this.currentStart = elapsed;
}
}
}
};
var load = function (event, xhr) {
var now = new Date().getTime(); var timeDiff = now - this.downloadStartTime; if (opts.onLoadComplete) {
opts.onLoadComplete(xhr.responseText);
} $.fn.dropzone.uploadFinished(this.fileIndex, this.fileObj, timeDiff); log("finished loading of file " + this.fileIndex);
};
var dragenter = function (event) {
event.stopPropagation(); event.preventDefault(); return false;
};
var dragover = function (event) {
event.stopPropagation(); event.preventDefault(); return false;
};
// Extend our default options with those provided. opts = $.extend({}, $.fn.dropzone.defaults, options);
var id = this.attr("id"); var dropzone = document.getElementById(id);
log("adding dnd-file-upload functionalities to element with id: " + id);
// hack for safari on windows: due to not supported drop/dragenter/dragover events we have to create a invisible <input type="file" /> tag instead if ($.client.browser == "Safari" && $.client.os == "Windows") {
var fileInput = $("<input>"); fileInput.attr({
type: "file"
}); fileInput.bind("change", change); fileInput.css({
'opacity': '0', 'width': '100%', 'height': '100%'
}); fileInput.attr("multiple", "multiple"); fileInput.click(function () {
return false;
}); this.append(fileInput);
} else {
dropzone.addEventListener("drop", drop, true); var jQueryDropzone = $("#" + id); jQueryDropzone.bind("dragenter", dragenter); jQueryDropzone.bind("dragover", dragover);
}
return this;
};
$.fn.dropzone.defaults = {
url: "", method: "POST", numConcurrentUploads: 3, printLogs: false, // update upload speed every second uploadRateRefreshTime: 1000
};
// invoked when new files are dropped $.fn.dropzone.newFilesDropped = function () { };
// invoked when the upload for given file has been started $.fn.dropzone.uploadStarted = function (fileIndex, file) { };
// invoked when the upload for given file has been finished $.fn.dropzone.uploadFinished = function (fileIndex, file, time) { };
// invoked when the progress for given file has changed $.fn.dropzone.fileUploadProgressUpdated = function (fileIndex, file,
newProgress) {
};
// invoked when the upload speed of given file has changed $.fn.dropzone.fileUploadSpeedUpdated = function (fileIndex, file,
KBperSecond) {
};
})(jQuery); 
```

这是用户 rik.leigh@gmail.com 在此处[http://code.google.com/p/dnd-file-upload/wiki/howto建议的](http://code.google.com/p/dnd-file-upload/wiki/howto)

# java - 无法让精灵正确旋转？

> ID：12607553
> 
> 赞同：2
> 
> 时间：2012-09-26T17:52:30.377
> 
> 标签：java, rotation, sprite, angle, slick2d

我正在尝试使用 Java/Slick 2D 玩图形。我试图让我的精灵旋转到鼠标在屏幕上的任何位置，然后相应地移动。我认为最好的方法是跟踪精灵所处的角度，因为我必须将角度的余弦/正弦乘以移动速度才能让精灵*“向前”*走，即使它是，例如在*象限 3中面向**45 度*。

 *但是，在我担心这一点之前，我什至一开始就无法让我的精灵旋转。初步的控制台测试表明该代码有效，但是当应用于精灵时，它只是有点抽搐。有谁知道怎么了？

```
int mX = Mouse.getX();
int mY = HEIGHT - Mouse.getY();
int pX = sprite.x;
int pY = sprite.y;
int tempY, tempX;
double mAng, pAng = sprite.angle;
double angRotate = 0;

if (mX != pX) {
    tempY = pY - mY;
    tempX = mX - pX;
    mAng = Math.toDegrees(Math.atan2(Math.abs((tempY)), Math.abs((tempX))));

    if (mAng == 0 && mX <= pX)
        mAng = 180;
}
else {
    if (mY > pY)
        mAng = 270;
    else
        mAng = 90;
}

// Calculations
if (mX < pX && mY < pY) { // If in Q2
    mAng = 180 - mAng;
}
if (mX < pX && mY > pY) { // If in Q3
    mAng = 180 + mAng;
}
if (mX > pX && mY > pY) { // If in Q4
    mAng = 360 - mAng;
}

angRotate = mAng - pAng;
sprite.angle = mAng;
sprite.image.setRotation((float) angRotate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:15:39.940

首先，`atan2`可以为您获得正确的角度 - 只需`Math.abs`从输入中删除，您就不需要用于校正角度象限的*~~三个~~*四个 if 语句。（尽管您必须以正确的方式进行减法）

其次，您将精灵的旋转设置为`mAng - pAng`，相当于*“旧角度 - 新角度”*。因此，实际上，您将旋转设置为自上次以来角度的变化量（这对于此目的没有意义），而不是角度本身。

结合这些建议，我会推荐这样的东西：

```
mAng = Math.toDegrees(Math.atan2(mY - pY, mX - pX));
sprite.angle = mAng;
sprite.image.setRotation((float) mAng); 
```*

# javascript - 使用 javascript 替换选定的 xml 节点

> ID：12607561
> 
> 赞同：0
> 
> 时间：2012-09-26T17:52:48.320
> 
> 标签：javascript, dom, xml-parsing

有没有更好的方法来使用 Javascript 从 XML 中删除选定的节点？我看到`removeChild()`可以使用该方法。但是我不想遍历整个 XML 树直到要替换的节点被卡住的底部。简单来说，我应该能够直接飞到我感兴趣的节点并替换它的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:05:23.233

查看[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

$.parseXML("格式良好的 xml 文档").find('css 选择器来查找要删除的元素').remove()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:56:36.917

使用[XPath](http://www.w3schools.com/XML/xml_xpath.asp)怎么样？它应该在每个现代浏览器中实现。

# backbone.js - require.js / js 文件在 DOM 加载之前加载

> ID：12607565
> 
> 赞同：0
> 
> 时间：2012-09-26T17:53:01.703
> 
> 标签：backbone.js, requirejs, underscore.js

我是 MVC 框架的新手，比如主干.js。我正在尝试使用backbone.js、require.js 和underscore.js 制作一个应用程序。我还添加了 jQuery UI。有一个名为 widget.js 的 js 文件，它实际上调整了小部件，例如固定位置，在窗口重新调整大小时触发一些事件，触发 ui 事件，例如 button()、tab() 等。

现在的问题是，当我直接使用 url 打开页面时（如 http:://localhost/web/#/login），一切正常。但是当我使用导航菜单从另一个页面打开该页面时，会出现大量问题。页面看起来很难看。我认为这是因为当我使用 url 加载页面时，widget.js 在加载 DOM 之后加载，但是当我使用导航打开页面时，widget.js 在加载 DOM 之前加载。浪费了 3 天时间来找到解决方案。但没有运气。这是代码..

```
 define([
  'jQuery',
  'Underscore',
  'Backbone',
  'text!templates/loginForm.html',
  'text!templates/home.html',
  'libs/custom/widget',

], function($, _, Backbone, loginForm, homeTemplate, widget){
  var loginView = Backbone.View.extend({
    el: $("#page"),
    status: 'Failed',
    serverMsg:'Mail doesn\'t match',
    events:{
        "click .login":"login"
        },
    isLogedIn:function(){
        if(this.status=='Failed' || this.status==''){
            console.log("error");
            }else{
                console.log("succss");
                }

        },  
    login:function(e){
        e.preventDefault();
        var info = $(".loginForm").serialize();
        var url = 'http://rest.homeshop.dev/login/';
        var This = this;
        $.ajax({
            url:url,
            type:"POST",
            data:info,
            success:function(data){
                data = $.parseJSON(data);
                This.serverMsg = data.msg;
                This.status = data.status;s
                This.isLogedIn();
                }
            });
        return false;
        },  
    initialize: function(){
    },
    render: function(){
      var data = {};
      var compiledTemplate = _.template( loginForm, data);
     this.el.find('.carrier').html(compiledTemplate);
         }
  });
  return new loginView;
}); 
```

此外，我没有在此处添加 jquery Ui 库，因为我已在 application.js 中添加了该库。这是 application.js 的代码

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'router',
  'libs/custom/jqueryUi-min',
  'libs/custom/widget',
  'libs/custom/layoutSwitcher'
], function($, _, Backbone, Router){    
  var initialize = function(){
    Router.initialize();
  }

  return {
    initialize: initialize
  };
}); 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:47:18.570

我认为你想要的是 domReady！插入。[http://requirejs.org/docs/api.html#pageload](http://requirejs.org/docs/api.html#pageload)

```
define(['jQuery', 'Backbone', 'Router', 'libs/custom/widget', 'domReady!']
       , function($, Backbone, Router, widget, dom) {
            //execute your code knowing that the DOM has loaded.
       }
) 
```

希望这可以帮助！

# umbraco - 如何使用 font-face 读取 Umbraco 中的字体文件？

> ID：12607571
> 
> 赞同：0
> 
> 时间：2012-09-26T17:53:23.263
> 
> 标签：umbraco

我的模板是简单的 HTML，但是当我将模板、脚本和 css 放入 Umbraco 站点时。字体停止被拾取。

起初我以为这是一个路径问题，但事实并非如此。每当我尝试输入引用字体的 URL 时，都会出现错误。

> 找不到页面没有 umbraco 文档与 url 'localhost/.../bliss-heavy.otf' 匹配
> 
> umbraco 尝试使用此 xpath 查询来匹配它'/root/* [@urlName = "login"] | /root/ */* [@urlName = "登录"]')

我知道我的路径是正确的，因为当我尝试稍微不同的路径时，我得到了明显的错误：

> 应用程序“LOCAL.DOTAGENCYLONDON.CO.UK”中的服务器错误
> 
> Internet Information Services 7.5 错误摘要 HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

在我的 web.config 文件中，我有：

```
<staticContent>
    <remove fileExtension=".air" />
    <remove fileExtension=".ttf" />
    <remove fileExtension=".eot" />
    <remove fileExtension=".svg" />
    <remove fileExtension=".otf" />
    <remove fileExtension=".woff" />
    <mimeMap fileExtension=".air" mimeType="application/vnd.adobe.air-application-installer-package+zip" />
    <mimeMap fileExtension=".ttf" mimeType="font/opentype" />
    <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
    <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    <mimeMap fileExtension=".otf" mimeType="font/otf" />
    <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
</staticContent> 
```

我现在应该寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:54:34.163

@amelvin，感谢您的回答。发生这种情况是因为我没有 /login.aspx URL 的模板甚至节点。

但是为什么网站会被重定向到 /login.aspx？原来，应用程序池用户没有读取字体文件的权限。

一旦我在 IIS 网站上用我的应用程序池凭据覆盖，它就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:25:19.467

当您尝试预览或浏览到没有选择模板的 umbraco 页面时，您的第一个错误看起来像 - 转到页面的属性选项卡并查看是否选择了模板：

![在此处输入图像描述](../Images/3631e863d2198c4ed7eec310426cbf40.png)

# javascript - 主干视图顶级元素问题

> ID：12607574
> 
> 赞同：3
> 
> 时间：2012-09-26T17:53:24.963
> 
> 标签：javascript, backbone.js

我有一个需要将数据填充到 dl 标记的视图，因此我希望该视图生成一个如下所示的标记：

```
<dt><i class="icon-<%= icon %>"></i><%= title %></dt>
<dd><%= content %> </dd> 
```

所以，我真的没有一个可以工作的顶级元素。它不能是 dl 标签，因为之后我需要在该顶部元素中放置几个​​项目。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:48:34.447

这里没有好的选择。正如您所说，项目视图没有有效的标签（因为 a`dl`实际上只对子项有效）`dt`并且`dd`视图只有一个 $el。

也许您应该重构您的代码，以便拥有一个代表整个 DL 的集合视图？如果集合中没有很多模型，则可以在其任何模型更改时重新渲染 DL/Collection 视图：

```
var Definitions = Backbone.View.extend({
  tagName: 'dl',

  initialize: function () {
    this.collection.on('change', this.render, this);
  }

  render: function () {
    this.$el.html( <output from template that loops over all definitions> );
  }
}); 
```

如果你想要有效的 HTML，我想不出任何办法。如果您不太关心语义，则可以使用带有单独项目视图的无序列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:11:08.987

我真的不太明白你的问题，但这里有一个答案。作为概念，视图元素应该是 dl，或者在您的情况下，您正在定义“列表中的项目”（如 BookCollectionView 和 BookItemView），因此，您可以有 2 个视图：1 个用于该项目，另一个用于该项目列表 （）。希望它可以帮助你。

# jquery - jquery animate 变得很棘手

> ID：12607577
> 
> 赞同：0
> 
> 时间：2012-09-26T17:53:38.317
> 
> 标签：jquery, jquery-animate

我正在尝试解决一项看似简单但无法正常工作的任务。我有 2 个链接，当单击它们时，它们会显示相应的 div。

我想做的是：

单击链接 #1 时：显示 div #1，单击链接 #2 时：显示 div#2。

我想让 div 淡入并同时滑入，这意味着 div 应该相互交叉淡入淡出。

我当前的 div 动画代码是：

```
 div.animate({
            "height": "toggle", "opacity": "toggle"
        }, "slow"); 
```

问题是 - 当在两个链接之间快速单击时，动画会发疯并保持动画多次..有什么想法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:54:39.410

尝试使用`.stop(true, true)`

```
div.stop(true, true).animate({
    "height": "toggle", "opacity": "toggle"
}, "slow"); 
```

# android - 两个带有 Android 的屏幕/显示器？

> ID：12607578
> 
> 赞同：7
> 
> 时间：2012-09-26T17:53:38.597
> 
> 标签：android, android-layout, android-ndk, android-hardware, multiscreen

我想开发一个使用两个屏幕来显示信息的 Android 应用程序。例如：一个屏幕显示应用程序，另一个屏幕显示有关当前应用程序状态的一些信息。

我的问题：android 是否支持两个显示器/屏幕？您将如何构建这样的设备和项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-04-26T23:39:51.537

从 API 级别 17，android 支持这个

这是链接 [https://developer.android.com/reference/android/app/Presentation](https://developer.android.com/reference/android/app/Presentation)

现在可以让 APP 在主显示器和副显示器上独立绘制不同的内容。辅助显示器可以是 HDMI 屏幕或无线显示器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:57:27.177

您只能使用小部件来做到这一点。没有其他办法。我对此进行了研究，并且碰巧有很多问题。一家公司已经成功地做到了，但他们无法移植两个 opengl 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:41:07.390

看看[京瓷 Echo 和 Gingerbread 的双屏 SDK](http://www.echobykyocera.com/developers/sdk-tools/)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:57:23.273

有些设备可以。例如，HTC Evo 有一个 micro-HDMI 输出，您可以将其发送到电视，但该功能并未内置在 Android 核心中，因此您需要使用专有扩展。

# asp.net - 页面上的许多委托事件

> ID：12607581
> 
> 赞同：2
> 
> 时间：2012-09-26T17:53:52.937
> 
> 标签：asp.net, delegates

有点菜鸟问题。

我正在开发一个具有母版页结构的网页 => aspx => userconcontrol => 嵌套用户控件。

页面上可能会发生许多事件，我可以从母版页向下标记项目，用户控件向上，我可以对数据进行分页等。

我已经使用委托在用户控件和页面之间导航，但是我有一个问题。

当用户点击几个书签然后对数据进行分页时会发生什么？事件是否排队和处理 - 它是否由系统管理 - 我应该做些什么吗？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:13:12.847

您是否试图允许用户为页面添加书签？用户转到页面 X，然后推进可分页控件控件，然后尝试为页面添加书签，两个书签都将用户返回到同一页面 X...

如果您尝试通过书签来维护第二个示例的状态，则需要在查询字符串中呈现您的状态日期。`mypage.aspx`（第一个例子）与`mypage.aspx?start=25`（第二个例子）。

一个简单的方法是在您的控件中捕获分页事件，而不是在那里呈现更新，而是使用 Response.Redirect() 返回同一页面并传递更新后的查询字符串以及状态更改。然后页面根据查询字符串值呈现控件。

# c# - ArrayList 与 C# 中内存分配的通用列表？

> ID：12607583
> 
> 赞同：1
> 
> 时间：2012-09-26T17:53:53.623
> 
> 标签：c#

我想澄清有关 ArrayList 与 Generic List 的内存分配的概念，如果两者都是值类型并且两者都是引用类型。任何人都可以帮助清除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:06:55.740

内存使用的唯一区别是存储值类型时。ArrayList 必须将值装箱（复制）。一个装箱的值将放置在堆上，至少消耗一个额外的标头块（大约 20 个字节）。

但这仅在您存储数百万个项目时才有意义，而不是您一直在做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:03:00.167

它们都是引用类型。唯一的区别是`ArrayList`弱类型。存储在其中的值类型（例如 int、bool 等）被装箱到`object`类型中。然后，当您将每个项目投射到`ArrayList`.

因为一切都被装箱到一个对象中，所以您可以将不同类型的对象存储在一个`ArrayList`.

Generic List 是强类型的，即它可以存储相同类型的对象。没有拳击，所以效率更高。

装箱过程分配更多的内存来将对象封装成弱类型`object`。

如果您在 ArrayList 中仅存储引用类型的对象，则不使用装箱，而是使用另一种称为引用转换的机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:04:53.557

*   `ArrayList`是引用类型，但不是类型安全且效率较低
*   `List<T>`或泛型列表是引用类型，但类型安全且高效

这是关于引用类型的内存分配的 SO 帖子 [如何在 C# 中将内存分配给引用类型？](https://stackoverflow.com/questions/1754903/how-memory-is-allocated-to-reference-types-in-c)

# php - 计算表中的每个用户名

> ID：12607587
> 
> 赞同：0
> 
> 时间：2012-09-26T17:54:21.980
> 
> 标签：php, arrays

> **可能重复：**
> [MYSQL COUNT GROUP BY 问题](https://stackoverflow.com/questions/1997307/mysql-count-group-by-question)

![在此处输入图像描述](../Images/582d089e5a608c89f5d357b960b3922e.png)

```
$query = "SELECT * FROM product_id_1";

$result = mysql_query($query);

while( $record = mysql_fetch_array($result) ){

$array[] = $record['username'];

$unique_array = array_unique($array);

}

foreach( $unique_array as $list ){
    echo $list.'<br/>';
} 
```

问候，

我一直在试图弄清楚如何应用 array_count_unique()。原因是我需要找出表中每个用户的计数，即 adam 出现了多少次，abcd 出现了多少次。

* * *

更新

这是我根据你们的建议所做的：

```
$query = 'SELECT username, COUNT(*) AS username_count FROM product_id_1 GROUP BY username';

$result = mysql_query($query);

while ($record = mysql_fetch_object($result)) {

    echo $record->username;

    echo $record->username_count;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:06:26.963

这正是我们拥有 RDBMS 和 SQL 的原因：

```
SELECT COUNT(1) AS username_count, username
FROM
    product_id_1
GROUP BY
    username 
```

# jquery - 带有 Radiobutton 的中继器使用 jQuery 获取选定的行

> ID：12607590
> 
> 赞同：0
> 
> 时间：2012-09-26T17:54:39.270
> 
> 标签：jquery

我在 asp.net 中有一个中继器控件

当单击 readio 按钮时，我想提醒相应的文本框值

```
<itemtemplate> 
    <div class="Class1 subclass1 subclass2 "> 
        <asp:RadioButton CssClass="Class2" ID="rbOne" runat="server" 
            GroupName="GroupItems"  /> 
        //Some other controls 

        <asp:Panel class="myPanel mYText" style="display:none;" runat="server" id="MyPnl"> 
            <asp:TextBox runat="server" ID="tbValue" CssClass="SomeClass" MaxLength="11" 
                    Text=""></asp:TextBox> 
        </asp:Panel> 
    </div> 
</itemtemplate> 
```

使用 jQuery 如何获取选定的文本框值，如警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:58:08.377

像这样的东西可以给你选择的输入

```
$('div.Class1 input[type=radio]').on('change',function(){
    $(this).nextUntil('.myPanel').find('input.SomeClass').val()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:01:46.053

添加 javascript 事件 onchange 并使用给定的 jquery 选择器。

**html**

```
<asp:RadioButton CssClass="Class2" ID="rbOne" runat="server" onchange="RadioClicked(this);"
                                        GroupName="GroupItems" onclick="GetValue()" /> 
```

**Javascript**

```
function RadioClicked(rad)
{
     alert("change fired");
     alert($(rad).closest('.Class1.subclass1.subclass2').find('.SomeClass').val());
} 
```

**更新 OP 请求** *以获取文本框外部中继器的值*

```
function RadioClicked(rad)
{
      alert($('<%= tbValue.ClientID %>').val());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:00:39.720

```
document.getElementById('<%=tbValue.ClientID%>').value; 
```

# asp.net - 从 radwindow 导航到另一个页面

> ID：12607594
> 
> 赞同：0
> 
> 时间：2012-09-26T17:54:49.817
> 
> 标签：asp.net, telerik, radwindow

**场景：-** 我有一个本地 asp.net 网站目录：-“ `http://localhost/DemoWebsite/`”。里面有一个“安全”文件夹。该文件夹中有两个网页：- Page1.aspx 和 Page2.aspx。还有一个网页：- Page3.aspx 在文件夹之外。

**要求：-** 现在“Page2.aspx”正在从父页面“Page1.aspx”的 RadWindow 中打开。“Page2.aspx”中有一个“取消”按钮，单击该按钮我想从 RadWindow 出来并直接移至“Page3.aspx”。

**尝试的解决方案：-** 按钮的“OnClientClick”事件设置为 JS 函数“LogOff()”。定义是：-

```
function LogOff()
{        
   top.location.href = "http://localhost/DemoWebsite/Page3.aspx";
} 
```

问题是，当我希望该网站推送其他服务器时，我无法提供上述完整链接。因此，如果我将链接提供为：-

`top.location.href = "~/Page3.aspx";`要不就，`top.location.href = "Page3.aspx";`

当我运行网站并单击取消按钮时。它抛出错误“找不到资源”。这是因为单击按钮后它会尝试链接`"/DemoWebsite/Secure/Page3.aspx".`

**问题**：- 分配什么 `top.location.href`以便它尝试链接`"/DemoWebsite/Page3.aspx"`。由于 Page3.aspx 不在**Secure**文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:22:01.743

你可以做类似的事情......`GetRadWindow().BrowserWindow.location.href = '../page3.aspx';`

`GetRadWindow()`是一个获取对您的 radwindow 的引用的函数...。

```
function GetRadWindow()
{
var oWindow = null; if (window.radWindow)
    oWindow = window.radWindow; else if (window.frameElement.radWindow)
    oWindow = window.frameElement.radWindow; return oWindow;
} 
```

该`BrowserWindow`部分将获得对您打开 radwindow 的窗口的引用。其余的只是将打开的窗口重定向到您想要的位置。

**编辑**：再次查看您的问题后，我认为您只需要知道如何通过 javascript 到达相对路径？如果是这样的话，它是这样的`document.location.href = '../'; //Up one level`...... ../ 会让你跳回一级。如果您只使用 /path，那么它将假定您从当前页面所在的同一文件夹级别进行。

# javascript - 为什么萤火虫指出我的代码有错误？

> ID：12607595
> 
> 赞同：-2
> 
> 时间：2012-09-26T17:54:50.310
> 
> 标签：javascript, jquery, mootools1.2

有人可以告诉我为什么 Firefox 不喜欢这部分代码吗？

```
function TB_position(){
$('TB_window').set('morph', {
    duration: 75
});
$('TB_window').morph({
    width: TB_WIDTH + 'px',
    left: (window.getScrollLeft() + (window.getWidth() - TB_WIDTH) / 2) + 'px',
    top: (window.getScrollTop() + (window.getHeight() - TB_HEIGHT) / 2) + 'px'
});} 
```

必须缺少一些小东西，例如括号或句号或我缺少的东西。谢谢！

**我解决了我自己的问题！我的一个剧本与另一个剧本竞争。不管怎么说，还是要谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T17:58:33.700

看起来你错过了关闭`);}`......但是，如果没有更多代码，很难说出这里发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:57:15.680

```
function TB_position(){
$('TB_window').set('morph', {
    duration: 75
});
$('TB_window').morph({
    width: TB_WIDTH + 'px',
    left: (window.getScrollLeft() + (window.getWidth() - TB_WIDTH) / 2) + 'px',
    top: (window.getScrollTop() + (window.getHeight() - TB_HEIGHT) / 2) + 'px'
} //missing paranthesis here ");" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:57:16.397

您在`morph()`通话中缺少右括号：

```
$('TB_window').morph({
  ...
} 
```

应该：

```
$('TB_window').morph({
  ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:57:19.823

```
function TB_position(){
$('TB_window').set('morph', {
    duration: 75
});
$('TB_window').morph({
    width: TB_WIDTH + 'px',
    left: (window.getScrollLeft() + (window.getWidth() - TB_WIDTH) / 2) + 'px',
    top: (window.getScrollTop() + (window.getHeight() - TB_HEIGHT) / 2) + 'px'
}); // missing );
} // missing end to function TB_position 
```

# jquery - Fancybox 2：自定义导航

> ID：12607600
> 
> 赞同：0
> 
> 时间：2012-09-26T17:55:13.450
> 
> 标签：jquery, fancybox

我正在为 Fancybox 2 制作自己的自定义导航。一切正常，直到遇到以下问题。我的花式框打开的那一刻，箭头可见并且正在工作，但是当我单击它们时，它们会从下一张图像显示的那一刻起消失。

```
$("#portfoliodetail a.detailviewer").fancybox({
    padding: 0,
    helpers:{
        overlay: {
            css: {
                'background': 'rgba(0,0,0,0.84)'
            }
        }
    },
    afterShow: function() {
        $("#detailviewernav").appendTo(".fancybox-wrap");
        $("#detailviewernav").show();
    },
    afterClose: function() {
        $("#detailviewernav").hide();
    }
});

$('#detailviewerprev').click(function(){
  $.fancybox.prev();
});

$('#detailviewernext').click(function(){
  $.fancybox.next();
});

function mycarousel_initCallback(carousel) {
   $('#mycarousel-next').bind('click', function() {
       carousel.next();
       return false;
   });

   $('#mycarousel-prev').bind('click', function() {
       carousel.prev();
       return false;
   });
}; 
```

如您所见，'detailviewernav' div 是我的自定义导航，我在打开画廊时显示和隐藏。我将它附加到 fancybox_wrap 类。

知道我应该如何解决这个问题吗？

干杯!

编辑：我添加了一个 JSFiddle！[http://jsfiddle.net/J2eHp/1/](http://jsfiddle.net/J2eHp/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:09:30.390

* * *

## 看看这个[小提琴](http://jsfiddle.net/ryVfD/3/)

* * *

有几件事不对劲。首先是这条线

```
$("#detailviewernav").appendTo(".fancybox-wrap"); 
```

您实际上是在最初将元素从其在 dom 中的位置移动并将其附加到`.fancybox-wrap`. 这样做的问题是，一旦加载下一个图像，它就会在内部加载，`.fancybox-wrap`并且当您的代码再次执行该行时，`#detailviewernav`DOM 中不再存在 a 。

所以你可以把它换成

```
$("#detailviewernav").clone().appendTo(".fancybox-wrap"); 
```

在移动它之前克隆它，以便您可以再次访问它。（您可能希望使用类而不是 ID，这样您就不会得到具有相同 ID 的多个元素。

第二件事是由于 DOM 正在被操作，您需要委托事件。

```
$('body').on('click','.fancybox-wrap #detailviewerprev',function(){
        $.fancybox.prev();
    });

    $('body').on('click','.fancybox-wrap #detailviewernext',function(){
      $.fancybox.next();
    }); 
```

# scala - 如何避免使用 Scala 中的模式匹配进行 def 定义的语法开销？

> ID：12607605
> 
> 赞同：4
> 
> 时间：2012-09-26T17:55:48.253
> 
> 标签：scala, pattern-matching

在实现带有模式匹配的 def 时如何避免包装 args ？

例子 ：

```
def myDef(a: A, b:B, c: C): D = (a,c,d) match {
  case ('qsdqsd, _ , _ ) => ???
  case _ => ???
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T18:05:05.320

您可以将元组作为函数参数：

```
def myDef(abc: (A,B,C)): D = abc match {
  case ('qxpf, _, _) => ???
  case _ => ???
} 
```

用户将自动将他们的非元组参数列表提升为元组。观察：

```
scala> def q(ab: (Int,String)) = ab.swap
q: (ab: (Int, String))(String, Int)

scala> q(5,"Fish")
res1: (String, Int) = (Fish,5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T18:04:31.547

您可以将其声明为 a`PartialFunction`以便您可以`case`直接使用 -block。这是因为`case`s块*是*Scala 中的 PartialFunction。

```
val myDef: PartialFunction[(A, B, C), D] = {
  case ("qsdqsd", b, c) => b + c
  case _ => "no match"
}

println(myDef("qsdqsd", "b", "c"))
println(myDef("a", "b", "c")) 
```

# c# - 从通用类型实例调用 ToString 覆盖

> ID：12607606
> 
> 赞同：2
> 
> 时间：2012-09-26T17:55:54.340
> 
> 标签：c#, generics

我正在为一些现有代码添加一些测试覆盖率。大约有 20 个类——都是同一个基类的派生类——这将导致非常相似和重复的测试方法。相反，我要做的是创建一个抽象测试类，它公开一些抽象方法来处理被测派生类的独特细节。

在我开始测试 ToString 覆盖之前，这一直运行良好。基本上，测试方法（你会记得它存在于一个抽象基类中）是断言预期字符串值的相等性和在我的泛型类型实例上执行的 ToString 方法的结果，正如前面提到的抽象所提供的那样方法。然而，不像我所期望的那样调用 ToString 覆盖，而是调用标准对象实现，返回对象的完全限定名称。

那么，问题来了：在处理泛型类型的实例时，如何调用类的 ToString 覆盖？

我希望可以通过更好地理解泛型类型的基础知识来回答这个问题，所以为了简洁起见，我没有发布任何代码。如果我低估了情况，请告诉我，我会添加相关代码。

提前致谢！

编辑 ==> 代码 :)

```
public abstract class KeyTestsBase<TKey, TKeyInterface> 
    where TKeyInterface : class
    where TKey : class, IKeyParser<TKey>
{
    protected readonly Mock<TKeyInterface> MockKey = new Mock<TKeyInterface>();

    protected abstract string ExpectedStringValue { get; }

    [Test]
    public void ToString_produces_correct_string_value()
    {
        // Arrange
        SetUpValidMock();

        // Act
        var key = BuildKey(MockKey.Object);

        var keyValue = BuildKey(MockKey.Object).ToString();

        // Assert
        Assert.AreEqual(ExpectedStringValue, keyValue);
    }

    protected abstract void SetUpValidMock();

    protected abstract TKey BuildKey(TKeyInterface keyInterface);
}

[TestFixture]
public class AdditiveProductKeyTests : KeyTestsBase<AdditiveProductKey, IAdditiveProductKey>
{
    private const int VALID_PRODUCT_KEY = 123;
    private const string VALID_PRODUCT_KEY_STRING = "123";
    private const string VALID_PARSE_INPUT = "123";

    #region Overrides of KeyTestsBase<AdditiveProductKey,IAdditiveProductKey>

    protected override string ExpectedStringValue
    {
        get { return VALID_PRODUCT_KEY_STRING; }
    }

    protected override void SetUpValidMock()
    {
        MockKey.SetupGet(m => m.AdditiveProductKey_Id).Returns(VALID_PRODUCT_KEY);
    }

    protected override AdditiveProductKey BuildKey(IAdditiveProductKey keyInterface)
    {
        return new AdditiveProductKey(keyInterface);
    }

    #endregion
} 
```

这是许多 Key 类之一的示例，与@Marc 的怀疑相反，您会注意到 ToString 方法已被覆盖。

```
public class AdditiveProductKey : KeyBaseClass<AdditiveProductKey>, IKey<AdditiveProduct>, IAdditiveProductKey
{
    #region constructors and fields

    private readonly int _id;

    public AdditiveProductKey() : this(0) { }

    public AdditiveProductKey(IAdditiveProductKey additiveProductKey)
        :this(additiveProductKey.AdditiveProductKey_Id) { }

    private AdditiveProductKey(int id)
    {
        _id = id;
    }

    #endregion

    public Expression<Func<AdditiveProduct, bool>> FindByPredicate
    {
        get { return (p => p.Id == _id); }
    }

    protected override AdditiveProductKey ParseImplementation(string keyValue)
    {
        var id = int.Parse(keyValue);
        return new AdditiveProductKey(id);
    }

    protected override string GetParseFailMessageImplementation()
    {
        return UserMessages.InvalidAdditiveProductKey;
    }

    public override string ToString()
    {
        return AdditiveProductKey_Id.ToString(CultureInfo.InvariantCulture);
    }

    #region Implementation of IAdditiveProductKey

    public int AdditiveProductKey_Id { get { return _id; }}

    #endregion
} 
```

这是 ToString_produces_correct_string_value 测试中变量“键”的类型信息。

```
key.GetType()
{Name = "AdditiveProductKey" FullName = "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey"}
[System.RuntimeType]: {Name = "AdditiveProductKey" FullName = "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey"}
base {System.Reflection.MemberInfo}: {Name = "AdditiveProductKey" FullName = "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey"}
Assembly: {RioValleyChili.Data.Utilities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
AssemblyQualifiedName: "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey, RioValleyChili.Data.Utilities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
Attributes: Public | BeforeFieldInit
BaseType: {Name = "KeyBaseClass`1" FullName = "RioValleyChili.Business.Core.Keys.KeyBaseClass`1[[RioValleyChili.Data.Utilities.Keys.AdditiveProductKey, RioValleyChili.Data.Utilities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"}
ContainsGenericParameters: false
DeclaringMethod: 'key.GetType().DeclaringMethod' threw an exception of type 'System.InvalidOperationException'
DeclaringType: null
FullName: "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey"
GenericParameterAttributes: 'key.GetType().GenericParameterAttributes' threw an exception of type 'System.InvalidOperationException'
GenericParameterPosition: 'key.GetType().GenericParameterPosition' threw an exception of type 'System.InvalidOperationException'
GenericTypeArguments: {System.Type[0]}
GUID: {81e8adb0-f899-358b-aa20-9bec8f96666d}
HasElementType: false
IsAbstract: false
IsAnsiClass: true
IsArray: false
IsAutoClass: false
IsAutoLayout: true
IsByRef: false
IsClass: true
IsCOMObject: false
IsConstructedGenericType: false
IsContextful: false
IsEnum: false
IsExplicitLayout: false
IsGenericParameter: false
IsGenericType: false
IsGenericTypeDefinition: false
IsImport: false
IsInterface: false
IsLayoutSequential: false
IsMarshalByRef: false
IsNested: false
IsNestedAssembly: false
IsNestedFamANDAssem: false
IsNestedFamily: false
IsNestedFamORAssem: false
IsNestedPrivate: false
IsNestedPublic: false
IsNotPublic: false
IsPointer: false
IsPrimitive: false
IsPublic: true
IsSealed: false
IsSecurityCritical: true
IsSecuritySafeCritical: false
IsSecurityTransparent: false
IsSerializable: false
IsSpecialName: false
IsUnicodeClass: false
IsValueType: false
IsVisible: true
MemberType: TypeInfo
Module: {RioValleyChili.Data.Utilities.dll}
Namespace: "RioValleyChili.Data.Utilities.Keys"
ReflectedType: null
StructLayoutAttribute: {System.Runtime.InteropServices.StructLayoutAttribute}
TypeHandle: {System.RuntimeTypeHandle}
TypeInitializer: null
UnderlyingSystemType: {Name = "AdditiveProductKey" FullName = "RioValleyChili.Data.Utilities.Keys.AdditiveProductKey"} 
```

结果如下：

```
key.ToString() 
"RioValleyChili.Data.Utilities.Keys.AdditiveProductKey" //what i'm getting

((AdditiveProductKey)key).ToString()
"123" // what I'm expecting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:25:03.783

`ToString`是一个虚拟/多态函数。只要你用过`override`它应该已经*可以工作*了。我怀疑你没有使用`override`.

```
public override string ToString() {
   // ...
} 
```

* * *

编辑：

这不需要在你认为的类中：也许`KeyBaseClass<T>`有 a`virtual ToString()`而不是 a `override ToString()`。这是一个*不相关* `ToString`的- 所以你`override`会对此采取行动*，*而不是`object.ToString()`。

# php - 在 PHP 中四舍五入达到 100%

> ID：12607610
> 
> 赞同：4
> 
> 时间：2012-09-26T17:56:04.683
> 
> 标签：php

我需要计算我页面上超过 10 个链接的点击次数，然后计算出点击每个链接的人数百分比。这很容易除法，但我如何确保最后得到 100% 的分数。

我想使用下面的代码，但我担心可能会出现百分比不等于 100% 的情况，因为这个函数只是删除了期间之后的数字。

```
function percent($num_amount, $num_total) {
$count1 = $num_amount / $num_total;
$count2 = $count1 * 100;
$count = number_format($count2, 0);
echo $count;
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:35:57.787

您可以将所有结果作为数组传递并作为一个整体进行处理，而不是在函数中计算一个百分比。计算完所有百分比并四舍五入后，检查它们的总和是否为 100。如果不是，则调整最大值以强制它们全部为 100。调整最大值将确保您的结果尽可能少地倾斜。

在进行调整之前，我示例中的数组总计为 100.02。

```
function percent(array $numbers)
{
    $result = array();
    $total = array_sum($numbers);

    foreach($numbers as $key => $number){
        $result[$key] = round(($number/$total) * 100, 2);
    }

    $sum = array_sum($result);//This is 100.02 with my example array.

    if(100 !== $sum){
        $maxKeys = array_keys($result, max($result));
        $result[$maxKeys[0]] = 100 - ($sum - max($result));
    }
    return $result;
}

$numbers = array(10.2, 22.36, 50.10, 27.9, 95.67, 3.71, 9.733, 4.6, 33.33, 33.33);
$percentages = percent($numbers);
var_dump($percentages);
var_dump(array_sum($percentages)); 
```

输出：-

```
array (size=10)
  0 => float 3.51
  1 => float 7.69
  2 => float 17.22
  3 => float 9.59
  4 => float 32.86
  5 => float 1.28
  6 => float 3.35
  7 => float 1.58
  8 => float 11.46
  9 => float 11.46
float 100 
```

这也适用于作为函数参数的关联数组。密钥将被保留。

这些数字现在可以以表格、图表或图表的形式呈现，并且总能给您 100% 的总和；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:31:43.747

你想做的就是这个。

合计点击次数，然后将每个数字除以总数。例如：

```
1134
5391
2374
2887 
```

在这种情况下，四个按钮，总共有 11786 次点击，所以：

```
1134 / 11786 = 0.09621....
5391 / 11786 = 0.45740....
2374 / 11786 = 0.20142....
2887 / 11786 = 0.24495.... 
```

然后对于每个除法，将结果四舍五入到“两位小数”，所以第一个结果：

```
0.09621.... becomes 0.10 
```

因为第 3 点是 5 或更高，如果第 3 点低于 5，它将保持在 0.09。

将所有结果四舍五入后，将每个结果乘以 100，然后将它们相加。最终结果将始终为 100。

但是应该警告您，根据您如何使用每个单独的百分比，当您四舍五入时，任何小于 0.05 的结果都将变为 0%，除非您在四舍五入之前保留该值，以便您可以将其声明为小于 1 的百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:59:10.530

我想你想使用[`ceil()`](http://php.net/manual/en/function.ceil.php) or [`round()`](http://php.net/manual/en/function.round.php) 。

由于这些是浮点数，因此有出错的余地。小心你如何四舍五入，并确保你不独立计算最后剩余的百分比。只需从 1 或 100 中减去您所拥有的总数。

确保您不计算等式的单独边，将一侧相加，然后从 1 或 100 中减去另一侧，或者您正在处理您的百分比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-29T12:25:19.933

我经常遇到这个问题并且有一个破解方法。

```
 $percentages = array(
    '1'         => 87.5,
    '2'         => 12.5,
    '3'         => 0,
    '4'         => 0,
    '5'         => 0
); 
```

如果您将这些百分比四舍五入，您将得到 88% 和 13% (101%)

```
round($percentages['1']);
round($percentages['2']);

// 88
// 13 
```

所以这是我用来修复它的代码。

```
$checkTotal     = array_sum($percentages);
$max            = max(array_keys($percentages));

if ($checkTotal > 100) {
    $percentages[$max] = $percentages[$max] - 1;
}
if ($checkTotal < 100) {
    $percentages[$max] = $percentages[$max] + 1;
} 
```

如果是 100，则什么也不做。

如果小于 100，则加 1 等于 100

如果超过 100，则减 1 等于 100

# database - 在数据库对象上启用/禁用功能的明智方法是什么？

> ID：12607611
> 
> 赞同：0
> 
> 时间：2012-09-26T17:56:05.463
> 
> 标签：database, database-design, database-normalization

假设我有一个包含常规用户名、密码、电子邮件字段的用户数据库表。为任何给定用户添加启用/禁用功能的附加布尔字段的明智方法是什么。

例如，

```
user_can_view_page_x
user_can_send_emails
user_can_send_pms
etc 
```

向现有用户表添加一堆布尔列似乎是错误的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:59:22.940

是的，我认为这是错误的方法。

我宁愿创建一个

```
User_Features Table 
```

有类似的列

```
UserID
FeatureName 
```

并检查给定用户是否在表格中启用/输入了相关功能。

您甚至可以创建一个`Users_Groups`表，其中用户也与组相关联，并且可以从组设置中继承/禁止功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:12:51.953

我会用三张桌子。

一个是您现有的用户表：

```
USER table
----
user_id (pk)
name
email
... 
```

另一个是包含可能的用户权限的表：

```
PRIVILEGE table
----
privilege_id (pk)
name 
```

最后是一个连接表，其中包含每个用户的每个权限设置的条目：

```
USER_PRIVILEGE table
----
user_id (pk) (fk)
privilege_id (pk) (fk)
allowed 
```

这是两个用户的一些示例数据，一个具有发送电子邮件权限和发送 pms 权限，另一个具有查看页面权限：

用户数据

```
USER_ID  NAME   EMAIL
-------  -----  -------------------
1        USER1  user1@somewhere.com
2        USER2  user2@somewhere.com 
```

特权数据

```
PRIVILEGE_ID  NAME
------------  -----------
1             view_page_x
2             send_email
3             send_pms 
```

USER_PRIVILEGE 数据

```
USER_ID  PRIVILEGE_ID  ALLOWED
-------  ------------  -------
1        1             'N'
1        2             'Y'
1        3             'Y'
2        1             'Y'
2        2             'N'
2        3             'N' 
```

# java - 在 printf 和 String.format 中为空 double 和 float

> ID：12607618
> 
> 赞同：2
> 
> 时间：2012-09-26T17:56:33.773
> 
> 标签：java, printf

`printf`在 Java 中，当我向or提供浮点变量时`String.format`，它什么也没提供。为了说明，一个例子：

```
public class test {
    public static void main(String arg[]) {
        double d = 123.456; 
        System.out.println("println: " + d + " " + (int) d);
        System.out.printf("printf as int: %d%n", (int) d);
        System.out.printf("printf with %%f: %f%n", d);
        System.out.printf("printf with %%e: %e%n", d);
        System.out.printf("printf with %%g: %g%n", d);
        System.out.printf("printf with %%a: %a%n", d);
    }
} 
```

给

```
in println: 123.456 123
in printf as int: 123
in printf with %f: 
in printf with %e: 
in printf with %g: 
in printf with %a: 
```

如您所见，它确实适用于`println`，但在 printf 上失败。也一样`String.format`。如果我提供宽度和精度，它会做同样的事情 - 什么都不提供。

我究竟做错了什么？

编辑：我正在使用 en_US.UTF-8 语言环境；我不确定我使用的是什么版本的 Java。我所知道的是：我用 gcc (gcj) 编译它，版本 4.7.2；并安装了 gcj JRE 4.7.2 版和 OpenJDK JRE 7u7-2.3.2a 版。编辑了代码。现在它是程序的整个代码。在我注意到其他代码中的浮点数存在这些问题后，我将其编写为一个小型测试程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:59:18.353

很有可能这是 GCJ 中的错误。见这里：[http ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=561685](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=561685)

摆脱 GCJ 并使用 OpenJDK 或 Sun/OracleJDK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:04:14.353

这是我的代码和输出。我看不出有什么问题。

```
package foo;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    double d = 123.456; 
    System.out.println("in println: " + d + " " + (int) d);
    System.out.printf("in printf as int: %d%n", (int) d);
    System.out.printf("in printf with %%f: %a%n", d);
    System.out.printf("in printf with %%e: %e%n", d);
    System.out.printf("in printf with %%g: %g%n", d);
    System.out.printf("in printf with %%a: %a%n", d);

  }

 } 
```

给

```
in println: 123.456 123
in printf as int: 123
in printf with %f: 0x1.edd2f1a9fbe77p6
in printf with %e: 1.234560e+02
in printf with %g: 123.456
in printf with %a: 0x1.edd2f1a9fbe77p6 
```

# php - 为什么我的 jQuery AJAX 错误函数在这里不起作用？它完全弄乱了页面

> ID：12607619
> 
> 赞同：0
> 
> 时间：2012-09-26T17:56:33.653
> 
> 标签：php, jquery, html, ajax

[http://christianselig.com/contact.html](http://christianselig.com/contact.html)

在此联系页面上，当我单击提交时，它不会按应有的方式提交页面。AJAX 应该删除表单并输入错误或成功消息。但它不会。如果我注释掉`error:`部分，它会完美运行。

jQuery：

```
$.ajax({  
                type: "POST",  
                url: "mail.php",  
                data: dataString,  
                success: function(data) { 
                    $(".contact-form").hide();
                    $(".alt-contact").hide();

                    // Depending on what the PHP script returned, display a message of success or error
                    if (data == 1) {
                        $(".contact-form").html("<div class='success-message'><div class='success-image'></div><div class='success-title'>Success! The message has been sent!</div><div class='success-body'>I'll get back to you right away.</div></div>");
                    }
                    else {
                        $(".contact-form").html("<div class='error-message'><div class='error-image'></div><div class='error-title'>Whoops! An error occurred.</div><div class='error-body'>I'll get back to you ASAP.</div></div>");
                    }

                    $(".contact-form").fadeIn(500);
                }
                error: function(jqXHR, textStatus, errorThrown) {
                    $(".contact-form").hide();
                    $(".alt-contact").hide();

                    // Inserts divs making up the success message for the form submission
                    $(".contact-form").html("<div class='error-message'><div class='error-image'></div><div class='error-title'>Success! The message has been sent!</div><div class='error-body'>I'll get back to you right away.</div></div>");

                    $(".contact-form").fadeIn(500);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:58:29.707

您在指定错误时忘记了逗号：

```
$.ajax({  
    type: "POST",  
    url: "mail.php",  
    data: dataString,  
    success: function(data) { 
        // code
    }, <----- Right there!
    error: function(jqXHR, textStatus, errorThrown) {
        // code
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:58:14.100

您在错误之前缺少逗号“，”。逗号是变量、对象等之间的分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:59:41.357

分隔属性时缺少逗号

```
 $(".contact-form").fadeIn(500);
 } ,  <--------      Missing a comma here
 error: function(jqXHR, textStatus, errorThrown) { 
```

# android - Android应用上传错误

> ID：12607624
> 
> 赞同：1
> 
> 时间：2012-09-26T17:56:53.217
> 
> 标签：android

我很难将我的升级版本上传到开发者控制台。我已经增加了 versionCode 和 versionName，并且我使用了与以前相同的细节来导出 apk 文件。

当我尝试上传新文件时，它表示出现意外错误并要求我选择另一个文件。

有没有人有任何提示，甚至知道如何解决这个错误？问题会出现在我的清单中吗？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="kev.harris"
android:versionCode="2"
android:versionName="1.1" >

<uses-sdk android:minSdkVersion="7" />

<application
    android:icon="@drawable/man21"
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.NoTitleBar"
    android:debuggable="false">
    <activity
        android:name=".AssignmentActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainMenu"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="kev.harris.MAINMENU" />

            <category android:name="android.intent.category.DEFAULT" />
            <!-- makes it so that the code is recognised but is to run in the background -->
        </intent-filter>
    </activity>
    <activity
        android:name=".MainGame"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="kev.harris.MainGame" />

            <category android:name="android.intent.category.DEFAULT" />
            <!-- makes it so that the code is recognised but is to run in the background -->
        </intent-filter>
    </activity>
    <activity
        android:name=".Savefile"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- saving stuff -->
    </activity>
    <activity
        android:name=".Continues"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="kev.harris.CONTINUES" />

            <category android:name="android.intent.category.DEFAULT" />
            <!-- makes it so that the code is recognised but is to run in the background -->
        </intent-filter>
        <!-- continuing -->
    </activity>
    <activity
        android:name=".Dead"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".NewGame"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- used for the choice between male and female -->
    </activity>
    <activity
        android:name=".Male"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for choosing the standard or custom picture -->
    </activity>
    <activity
        android:name=".CMPicture"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for the male custom picture -->
    </activity>

    <activity
        android:name=".MPicture"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for the male normal picture -->
    </activity>
    <activity
        android:name=".Female"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for the female choice of picture -->
    </activity>
    <activity
        android:name=".CfPicture"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for the female custom picture -->
    </activity>
    <activity
        android:name=".FPicture"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >

        <!-- for the female normal picture -->
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:02:20.223

R 你包括 .apk 扩展名和你的文件名。当你导出时。

# jquery - 加载动画会影响SEO吗？

> ID：12607632
> 
> 赞同：9
> 
> 时间：2012-09-26T17:57:18.067
> 
> 标签：jquery, animation, seo, onload

假设我为我的页面使用了一些加载动画，例如：

```
$(document).ready(function() {
    $('html.myhtml').css('overflow', 'auto').fadeTo(0, 0, function() {
        $(this).css('visibility', 'visible').animate({
            opacity: 1
        }, 200);
    });
})​ 
```

并从内联样式开始，使其首先隐藏：

```
<html class="myhtml" style="visibility:hidden; overflow:hidden"> 
```

最初该页面将被用作空白，然后使用`fadein`. 我想知道：-

*   这会以任何方式影响搜索引擎优化吗？
*   这种做法是好的还是有一些重要的论据不这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T18:00:41.973

它不会影响它。由于同样的担忧，我亲自通过微数据测试了谷歌机器人的读数。谷歌现在实际上在某种程度上可以看到 javascript 交互，甚至是 swf 文件。所以你应该清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T20:31:17.717

> 对SEO有影响吗？

如果我必须用是或否的答案来回答这个问题，那么我会说：不

> 这种做法是好的还是有一些重要的论据不这样做？

我们可以整天争论动画，但仍然没有确定的答案。动画褪色对搜索引擎有什么用途？没有任何。因此，它应该是为了用户的享受？动画渐变对用户有什么用途？没有任何。因此，如果我们采用“为用户而不是为搜索引擎设计”模型，我可能会删除动画。这是我的意见。

回到 SEO 问题，它会影响 SEO 吗？不是真的没有，但这取决于搜索引擎和您的受众。如果我是一个使用屏幕阅读器的人，我可能不会从您的页面中受益，因为我的屏幕阅读器会失败。如果我禁用了 javascript，它将损害我的用户体验（我个人使用 FF NoScript 插件浏览）。

我知道您说没有 javascript 的用户在您的网站上没有业务，但是您应该考虑到这一点并以某种方式处理它。此外，Googlebot 在抓取时没有启用 javascript 或会话 cookie。其次，如果你的一个 js 失败了，你可能希望它优雅地回退到对用户有用的东西，或者至少是一些让他们知道的指令，比如“欢迎！我们这里有您的浏览器不支持的花哨动画！请启用 javascript'。

强制动画通常对用户来说很烦人，尤其是当他们重复每个页面加载时。添加页面加载对谷歌搜索引擎优化不利，因为速度现在是排名的一个因素。

就像我提到的那样，主要的 Googlebot 不会在启用 javascript 或会话 cookie 的情况下进行抓取。他们有不同的爬虫用于不同的目的，比如一些只用于移动设备，一些用于 js，一些用于 Flash。值得注意的是，“Google Instant Previews”将捕获加载的动画/弹出窗口/或任何内容，并在结果中显示给用户（在您的情况下，它可能看起来像一个空白页面）。就像 WDever 提到的那样，一般来说，使用文本缩进或负边距作为初始状态比使用可见性/显示/溢出更安全。

这就是我的做法（[这是一个实时预览，有 4 秒的动画延迟，可以在启用和不启用 js 的情况下进行测试](http://jsbin.com/uhihuh/1)）：

```
<html>
<head>
<style>
.myhtml {visibility:hidden; overflow:hidden;}
</style>
<script>document.documentElement.className='myhtml'</script>
</head>
<body>

 1\. html is not hidden initially and no class
 2\. css styles register .myhtml class with the hidden stuff you want
 3\. the script tag just before the BODY tag will fire and add the class to html thus hiding things for those with javascript enabled. Everyone else who has JS disabled sees the page properly.
 4\. at the bottom of the page your jquery fires animating the page

<script>
$(document).ready(function() {
    $('html.myhtml').css('overflow', 'auto').fadeTo(0, 0, function() {
        $(this).css('visibility', 'visible').animate({
            opacity: 1
        }, 200);
    });
})​
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T11:30:39.883

我认为您应该注册 Google Webmasters Tools。然后找到一个名为“Fetch as googlebot”的功能，现在让 google 去获取您想要的页面，看看它是否发现任何错误或异常行为，或者它没有显示您的预期。如果是这种情况，您可以确定您的页面有问题，谷歌会告诉您它在抓取您的页面时遇到了什么问题。然后就是纠正你的问题。

**编辑：** 使用 javascript 的搜索引擎的主要问题是 js 在从页面中获取和读取内容方面造成障碍。具体来说，这个问题主要出现在实际页面上没有内容并且您使用js从其他地方获取内容时（因此出现ajax seo问题）。因此，应该关注将内容放在页面上而不是从其他地方获取。

因此，还应该在关闭 js 和 css 的情况下测试他们的页面，看看当 google 和其他搜索引擎看到您的页面时他们的页面是什么样子。因此，在所有花哨的动画、抓取和其他东西之后，如果谷歌仍然能够阅读、抓取和索引您的页面，那么我不会担心一秒钟，您也不应该担心。毕竟，如果谷歌很好，我们就更好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T18:12:57.537

据我所知，谷歌只识别页面的初始状态。这包括 CSS 渲染，例如，如果添加`display:none;`或`visibility:hidden;`，我认为 Google 不会对其进行索引。

为了安全起见，我会在加载时隐藏内容，然后将其淡入。我还没有真正测试过，但我从未见过 Google 的机器人与 JavaScript 交互得很好。使用 hashbang 方法时似乎有一个例外。

这种方法的另一个好处是，禁用了 javascript 的用户（我知道，duh）仍然可以看到您的内容，因为它一开始就不会被隐藏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T15:16:15.157

我建议你看看：

[http://searchengineland.com/google-io-new-advances-in-the-searchability-of-javascript-and-flash-but-is-it-enough-19881](http://searchengineland.com/google-io-new-advances-in-the-searchability-of-javascript-and-flash-but-is-it-enough-19881)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-03T18:35:48.173

遗憾的是，对于您的问题，我没有 SEO 答案，但解决方案是使用负边距将元素隐藏在屏幕外。然后当javascript启动时，您设置正确的位置并隐藏，然后您淡入或做任何您想做的事情。

# javascript - 使用 Backbone.Marionette.Application 时如何初始化事件？

> ID：12607636
> 
> 赞同：0
> 
> 时间：2012-09-26T17:57:22.100
> 
> 标签：javascript, backbone.js, marionette

木偶很棒，但有些事情可能会让人有些困惑。在我的初始页面加载中，我在 Marionette.Application 的一个区域中显示了一个 Marionette.Layout。但是由于某种原因，点击事件被委托但实际上并没有响应。如果我导航到另一条路线（删除布局视图）然后返回到路线（重新渲染视图），则事件处于活动状态。如果我使视图连续呈现两次，那么它可以工作。也许我初始化这个系统是错误的。

```
var     ListView =  Backbone.Marionette.Layout.extend({
    el: "#listView", // exists on DOM already
    events: {
        // this is what is supposed to work
        // as well as events in my subviews
        "click" : function() { console.log("clicked");}
    });

var Router = Backbone.Router.extend({

    initialize: function(options) {
        this.app = options.app;
    },
    start: function(page) {
        console.log("start...");
        // with silent false this causes list() to be called
        // and the view is rendered
        // but the ListView does not get its events delegated
        Backbone.history.start({
            pushState:  false,
            silent:     false
        });

        // only by running loadUrl here
        // do I get the events delegated
        // or by switching between other routes
        // and coming back to 'list'

        // but this is causing a second useless calling
        // of list() re-rendering
        console.log("loadUrl...");
        Backbone.history.loadUrl(page);
        // actually the events are not yet delegated at this point
        // if I pause a debugger here.
        // events only active after the  Application finishes its initializers
    },  
    routes: {
        'list': 'list'
    },
    list: function() {
        var lv = ListView({});
        this.app.focus.show(lv)
    }
});

var app = new Backbone.Marionette.Application();

app.addInitializer(function(options) {
    this.router = new Router({app: this});
    this.router.start();
});

app.addRegions({
    // #focus does exist on the DOM
  focus: "#focus",
});

app.start({}); 
```

我期望的另类开始会奏效，但遗憾的是没有

```
 start: function(page) {
        console.log("start...");
        Backbone.history.start({
            pushState:  false,
            silent:     true // don't trigger the router
        });

        // call the router here via history
        console.log("loadUrl...");
        Backbone.history.loadUrl(page);
        // causes page to be rendered correctly 
        // but events are not delegated
    }, 
```

我已经用调试器逐步完成了这一切，但仍然看不到 loadUrl 的神奇效果是什么使它工作。

我也尝试过将布局重新插入该区域：

```
app.focus.show(app.focus.currentView) 
```

也许有一种不同的方式来构建它，根本不会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T02:04:00.900

在 onRender 部分添加

this.delegateEvents();

当 Marionette 关闭视图时，它也会取消绑定事件。事件仅在视图初始化时被委托。当您显示以前存储的视图时，您将需要再次调用 delegateEvents 方法。

[https://github.com/marionettejs/backbone.marionette/issues/714](https://github.com/marionettejs/backbone.marionette/issues/714)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:37:38.883

不是100％肯定这是答案，但是...

如果您的元素已经存在于 DOM 上，并且您正在尝试将视图附加到它们，并将该视图附加到区域，请使用区域的`attach`方法：

```
 list: function() {
  var lv = ListView({});
  this.app.focus.attach(lv)
} 
```

该`attach`方法是专门为您要使用现有 DOM 元素的情况创建的。相反，调用`show`将替换那里的内容，这可能会导致 jQuery 事件被释放。

# c# - 将选中的项目从选中列表框中添加或删除到列表框

> ID：12607639
> 
> 赞同：2
> 
> 时间：2012-09-26T17:57:29.323
> 
> 标签：c#, checkedlistbox

我是 C# 的新手，我的问题是如何将选中的项目从选中的列表框中添加到列表框中，当我取消选中此项目时，也将其从列表框中删除.. 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:38:48.453

如果你有`checkedListBox1`as`checkedListBox`和你的`listBox`call `listBox1`，你应该`ItemCheck Event`为你的`checkedListBox`

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
  if (e.NewValue == CheckState.Checked)
    listBox1.Items.Add(checkedListBox1.Items[checkedListBox1.SelectedIndex]);
  if (e.NewValue == CheckState.Unchecked)
    listBox1.Items.Remove(checkedListBox1.Items[checkedListBox1.SelectedIndex]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:59:23.300

添加项目：

```
YourListbox.Items.Add(""); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection.add.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection.add.aspx)

删除项目：

```
YourListbox.Items.Remove(""); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection.remove.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection.remove.aspx)

```
var items = new System.Collections.ArrayList(listboxFiles.SelectedItems);

foreach (var item in items) {
        listbox.Items.remove(item);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:19:01.133

ASPX

```
<asp:CheckBoxList ID="_CheckBoxList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="CheckBoxList_SelectedIndexChanged">
    <asp:ListItem Text="1" Value="1"></asp:ListItem>
    <asp:ListItem Text="2" Value="2"></asp:ListItem>
</asp:CheckBoxList>
<asp:ListBox ID="_ListBox" runat="server"></asp:ListBox> 
```

CS

```
protected void CheckBoxList_SelectedIndexChanged(object sender, EventArgs e)
{
    CheckBoxList cbx = (CheckBoxList)sender;

    _ListBox.Items.Clear();
    foreach (ListItem item in cbx.Items)
    {
        if(item.Selected)
            _ListBox.Items.Add(new ListItem(item.Text, item.Value));
    }

} 
```

将其包装在更新面板中以使用 AJAX

# android - 更改按钮的背景并最终使其消失

> ID：12607642
> 
> 赞同：1
> 
> 时间：2012-09-26T17:57:43.447
> 
> 标签：android

> > 在 if 循环中，即使将按钮的背景图像设置为 i_1 并使其休眠五秒钟后，按钮的图像也不会显示，而是屏幕等待五秒钟，按钮消失..任何人都可以找出问题所在..

```
public class MainActivity extends Activity {
Button b1,b2;
int a=0,b=0,ctr=0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     b1=(Button)findViewById(R.id.button1);
     b2=(Button)findViewById(R.id.button2);

}
public void onclick(View V){

switch(V.getId())
{
case R.id.button1:
{

    if(a==2)
{   try {
    b1.setBackgroundResource(R.drawable.i_1);
    Thread.sleep(5000);
    b5.setVisibility(V.GONE);
    b1.setVisibility(V.GONE);
} catch (InterruptedException e) {
     //TODO Auto-generated catch block
    e.printStackTrace();
}
ctr=0;b=0;
    }
    else
    {
        ctr++;

        b=a;
        a=1;
        if(ctr>=2)
        {
    b1.setBackgroundResource(R.drawable.cd);//created xml file:named cd
    switch(b)
    {
 //stmts

    }b=0;ctr=0;
        }
    }
            break;
} 
```

# git - 如何使用正则表达式 git filter-branch 从历史记录中永久删除文件/目录？

> ID：12607643
> 
> 赞同：2
> 
> 时间：2012-09-26T17:57:43.727
> 
> 标签：git, version-control, git-filter-branch

有没有办法通过`git filter-branch`正则表达式从历史记录中永久删除文件/目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:57:37.757

假设你想做一个索引过滤器（它不需要改变你的工作树），你可以在所有提交上编写脚本，并且只通过 sed、egrep 或 grep 在`git ls-files`.

```
git ls-files --cached | \
sed 's/weirdprefix\(pattern\)/git reset HEAD weirdprefix\1/g' | \ 
xargs -i{} sh -c '{}' 
```

（这是您将在 filter-branch 命令中提供的脚本）

这是文档中的一个示例（[http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)）：

```
git filter-branch --index-filter \
        'git ls-files -s | sed "s-\t\"*-&newsubdir/-" |
                GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
                        git update-index --index-info &&
         mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' HEAD 
```

# ruby-on-rails-3 - 如何使用“无论何时”宝石？

> ID：12607645
> 
> 赞同：3
> 
> 时间：2012-09-26T17:57:47.600
> 
> 标签：ruby-on-rails-3, scheduled-tasks, whenever

我目前正在尝试使用when gem 来安排我的任务，但我不知道它是如何工作的。我已经尝试按照[https://github.com/javan/whenever](https://github.com/javan/whenever)上的步骤操作，但我被困在 schedule.rb 文件中。我应该在里面写什么？我希望我的应用程序每分钟使用这个 gem 调用一个方法。我该怎么做？谁能给我一个如何做到这一点的线索？

**更新**

* * *

我对我的应用程序执行了以下操作，它应该每分钟发送一封电子邮件。我尝试在没有调度的情况下运行该方法，它可以工作，但如果我安排它，它就不起作用，如下面的代码。我的代码有问题吗？

1) 时间表.rb

```
every 1.minute do
  runner "Newsletter.schedule_email"
end 
```

2) 通讯.rb

```
def schedule_email
    ...*codes*...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:49:43.320

好吧，基本形式是：

```
every 1.minute do
  runner "Class.method_name"
end 
```

如果你的东西没有运行，这个问题可能有一些有用的信息： [每当 cron 作业在 rails 3 中不工作时](https://stackoverflow.com/questions/6980720/whenever-cron-job-is-not-working-in-rails-3?rq=1)

还有一个关于 cron 工作的 Railscast，特别是关于何时： [http ://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)

# c# - 添加记录以从 C# 访问时出错

> ID：12607652
> 
> 赞同：1
> 
> 时间：2012-09-26T17:58:21.687
> 
> 标签：c#, ms-access

大家好，

我对此完全陌生......我想将我的记录从一个winform添加到一个已经是数据源的访问数据库，但最终出现错误，它说：

> OleDBException 未处理，它显示“INSERT INTO 语句中的语法错误”。

表示行：

```
da.Update(ds1, "Table1"); 
```

我的编码是：

```
 int MaxRows = 0;
        int inc = 0;

        private void Form2_Load(object sender, EventArgs e)
        {
            con = new System.Data.OleDb.OleDbConnection();
            ds1 = new DataSet();

            con.ConnectionString = " Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:/Documents and Settings/user/My Documents/anchu.accdb";
            string sql = "SELECT * From Table1";
            da = new System.Data.OleDb.OleDbDataAdapter(sql, con);

            con.Open();

            da.Fill(ds1, "Table1");
            //NavigateRecords();

            con.Close();
            //con.Dispose();
        }
        /*private void NavigateRecords()
        {
            DataRow drow = ds1.Tables["Table1"].Rows[0];

            textBox1.Text = drow.ItemArray.GetValue(0).ToString();
            textBox2.Text = drow.ItemArray.GetValue(1).ToString();
            textBox3.Text = drow.ItemArray.GetValue(2).ToString();
            textBox4.Text = drow.ItemArray.GetValue(3).ToString();

        }*/

        private void groupBox1_Enter(object sender, EventArgs e)
        {

        }

        private void button2_Click(object sender, EventArgs e)
        {
            textBox1.Clear();
            textBox2.Clear();
            textBox3.Clear();
            textBox4.Clear();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            System.Data.OleDb.OleDbCommandBuilder cb;
            cb = new System.Data.OleDb.OleDbCommandBuilder(da);

            DataRow drow = ds1.Tables["Table1"].NewRow();
            drow[0] = textBox1.Text;
            drow[1] = textBox2.Text;
            drow[2] = textBox3.Text;
            drow[3] = textBox4.Text;

            ds1.Tables["Table1"].Rows.Add(drow);

            MaxRows = MaxRows + 1;
            inc = MaxRows - 1;

            da.Update(ds1, "Table1");

            MessageBox.Show("Entry Added");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:11:40.937

请您看一下表格结构。看来，表格字段不匹配。

例如：如果您有一个 auto 列并且您向该列添加了一个值，它将引发异常。此外，即使表列匹配，也要检查数据类型和最大长度。

希望这能解决。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:15:08.773

`OleDbCommandBuilder`不擅长为具有与 PSQL 或 TSQL 不同的语法要求的数据库系统（如 Access）构建语句。我会在生成后添加一个断点`CommandBuilder`并查看它生成的 SQL 以查看它是否是 Access 的正确语法。

您最好自己构建 INSERT 语句，而不是假设命令构建器会为您正确构建它。

# sas - SAS中的“数组”命令来操作数据

> ID：12607654
> 
> 赞同：0
> 
> 时间：2012-09-26T17:58:25.173
> 
> 标签：sas

我有以下数据结构

ID Y xx11 xx12 xx13 xx14 xx21 xx22 xx23 xx24 xx31 xx32 xx33 xx34 xx41 xx42 xx43 xx44；

其中 Y 是响应变量，x 是协变量。

*   xx11 xx12 xx13 xx14 是第 1 组的四次重复测量。
*   xx21 xx22 xx23 xx24 是第 2 组的四次重复测量。
*   xx31 xx32 xx33 xx34 是第 3 组的四次重复测量。
*   xx41 xx42 xx43 xx44 是第 4 组的四次重复测量。

我需要使用 SAS 中的“Array”命令来操作数据以生成以下数据集：

ID Y 时间组

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:03:45.073

```
data want;
set have;
array xx xx11--xx44;
do _t = 1 to dim(xx);
  x=xx[_t];
  group = substr(vname(xx[_t]),3,1);
  time = substr(vname(xx[_t]),4,1);
  output;
end;
run; 
```

这取决于 xx11 到 xx44 是连续变量（不是以任何特定顺序）。

# php - 为什么我不能在模块中加载模型？！[在 codeigniter 2.1.2 中使用 HMVC]

> ID：12607656
> 
> 赞同：0
> 
> 时间：2012-09-26T17:58:27.700
> 
> 标签：php, codeigniter, codeigniter-2

我希望在我跳下窗户之前有人能帮我解决这个问题。我花了几个小时在这个上，不知道我做错了什么。

基本上，我已经在 CodeIgniter 2.1.2 中安装了 HMVC，一切正常，但由于某种原因，我无法像在标准控制器中那样加载模型。在旧的 codeigniter 1.7.1 中，我可以简单地通过调用 $this->load->model('my_model') 来使用它，但现在我不能了吗？！

每次我尝试加载模型时都会收到此错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined property: Special_cart::$db
Filename: core/Model.php
Line Number: 51 
```

我已经按照说明一步一步地安装了它。我在模块文件夹旁边找到了第三方。在模块中，我几乎没有像这样存储的模块：

```
modules
--boxes
----controller
----models
----views 
```

我在我的代码中调用模块是这样的：

```
<?=modules::run('boxes/special_cart/index');?> 
```

我的模块控制器代码如下所示：

```
class Special_cart extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();

    }   

    public function index()
    {
        if ($this->session->userdata('cart'))
        {
            # get product id's and each quantity

            $cart_product_list = array_count_values($this->session->userdata('cart'));

            # get list of product_id
            $product_list = array_keys($cart_product_list); 

            # get product details
            $this->load->model('productmodel');
            $this->load->model('stockmodel');

            $cart_products = $this->productmodel->cart_get_products_details($product_list);
            $final_cart_array = array();

            foreach($cart_products as $cart_product){
                $product_stock = $this->stockmodel->view_product_stock($cart_product["id"]);
                if(empty($product_stock) || $product_stock["UNITS"]<=0)
                    $cart_product["UNITS"] = 0;
                else{
                    if($cart_product_list[$cart_product["id_web"]]>$product_stock["UNITS"])
                        $cart_product["UNITS"] = $product_stock["UNITS"];
                    else{
                        $cart_product["UNITS"] = $cart_product_list[$cart_product["id_web"]];
                    }
                }
                $final_cart_array[] = $cart_product;

            }

            $refresh_cart_array = array();

            foreach($final_cart_array as $cart_product){

                for($i=1;$i<=$cart_product["UNITS"];$i++){
                    $refresh_cart_array[] = $cart_product["id_web"];
                }

            }

            $this->load->view("special_cart",array(
                                                'refresh_cart_array'        => $refresh_cart_array,
                                                'final_cart_array' => $final_cart_array
                                                ));

                } else {
                $this->load->view("special_cart",array(
                                                    'refresh_cart_array'        => NULL,
                                                    'final_cart_array' => NULL
                                                    ));

                    }
            }   

} 
```

我已经尝试了在互联网上找到的所有可能的解决方案 - 它们都不起作用......我希望你能理解我的问题，但如果你需要进一步的解释，请问我。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:56:16.307

Try loading the model stating the module name as follows

```
    $this->load->model('module_name/productmodel');

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:30:34.103

```
Class Models extends MX_Loader{

    function getUser($username){

        $sql="SELECT * FROM user WHERE username = ? ";
        return $this->db->query($sql,array($username))->row();

   } 
} 
```

你必须使用扩展 MX_Loader 因为我不知道是否使用 CI_Model 数据库核心不能在 Codeigniter 中加载，，，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:15:02.427

看起来您尝试加载的模型想要连接到数据库，但数据库驱动程序不可用。如果您在应用程序中使用数据库查询，为什么不自动加载数据库驱动程序？

只需在 application/config/autoload.php 文件的“libraries”数组中插入“database”。不要忘记将您的数据库凭据插入到 application/config/database.php 中。

```
$autoload['libraries'] = array('database'); 
```

如果您只需要一个模型中的数据库连接，请在尝试访问数据库库之前加载它。

```
$this->load->database(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:14:46.020

尝试使用扩展 MX_Controller 类（不是 CI_Contoller 就像你正在做 atm）

根据您在上面的评论中写的内容，我认为您尝试在模块中创建新的 DB 实例（基于 chrises 评论）。在 Special_cart 的构造函数上做

所以更新当前的构造就像

```
public function __construct()
{
    parent::__construct();
    $this->load->database('default');
} 
```

（我是从头顶写的，所以检查方法）

现在可以确定 db 驱动程序应该在您的模型中可用。

关于问题，`HMVC`我认为没有。我现在使用`HMVC`了一段时间，我发现它没有问题（使用数据库）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T07:28:50.267

我有同样的问题和错误。我错过了将控制器扩展到 MX_Controller。所以解决方案是将 CI_Controller 更改为 MX_Controller ，如下所示：

```
class Special_cart extends MX_Controller
{
    public function __construct()
    {
        parent::__construct();
        $this->load->model('productmodel');
        $this->load->model('stockmodel'); 
    }

     public function index()
    {
        if ($this->session->userdata('cart'))
        {
            # get product id's and each quantity

            $cart_product_list = array_count_values($this->session->userdata('cart'));

            # get list of product_id
            $product_list = array_keys($cart_product_list); 

            # get product details

            $cart_products = $this->productmodel->cart_get_products_details($product_list);
            $final_cart_array = array();

            foreach($cart_products as $cart_product){
                $product_stock = $this->stockmodel->view_product_stock($cart_product["id"]);
                if(empty($product_stock) || $product_stock["UNITS"]<=0)
                    $cart_product["UNITS"] = 0;
                else{
                    if($cart_product_list[$cart_product["id_web"]]>$product_stock["UNITS"])
                        $cart_product["UNITS"] = $product_stock["UNITS"];
                    else{
                        $cart_product["UNITS"] = $cart_product_list[$cart_product["id_web"]];
                    }
                }
                $final_cart_array[] = $cart_product;

            }

            $refresh_cart_array = array();

            foreach($final_cart_array as $cart_product){

                for($i=1;$i<=$cart_product["UNITS"];$i++){
                    $refresh_cart_array[] = $cart_product["id_web"];
                }

            }

            $this->load->view("special_cart",array(
                                                'refresh_cart_array'        => $refresh_cart_array,
                                                'final_cart_array' => $final_cart_array
                                                ));

                } else {
                $this->load->view("special_cart",array(
                                                    'refresh_cart_array'        => NULL,
                                                    'final_cart_array' => NULL
                                                    ));

                    }
            } 
} 
```

这也在文档 [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/)中进行了解释 ，这里是引用：

> 笔记：
> 
> 要使用 HMVC 功能，例如 Modules::run()，控制器必须扩展 MX_Controller 类。要仅使用模块化分离，不使用 HMVC，控制器将扩展 CodeIgniter 控制器类。您必须在控制器中使用 PHP5 样式的构造函数。IE：
> 
> ```
> <?php
> class Xyz extends MX_Controller 
> {
>     function __construct()
>     {
>         parent::__construct();
>     }
> } 
> ```

# html - 使用 Django 表单时从单选按钮中删除项目符号

> ID：12607663
> 
> 赞同：4
> 
> 时间：2012-09-26T17:58:46.697
> 
> 标签：html, css, django

我试图在呈现表单时删除单选按钮旁边显示的项目符号。

我的模板如下：

```
<form class="form-horizontal" enctype="multipart/form-data" method="POST" action="" class="uniForm">
<fieldset class="inlineLabels">
{% csrf_token %}
<br>
<h6>Library Type</h6>
{{ formtoaddmodel.type }}
</fieldset>
</form> 
```

type 字段是 a `TypedChoiceField`，它为选项生成单选按钮，但问题是它在每个单选按钮之前放置了一个项目符号。

要删除项目符号，我读到您需要包含 . 但是，我不确定该放在哪里。当我在 CSS 中执行此操作时，它会影响我使用项目符号列表的站点中的所有位置。有没有办法在模板中执行此操作以覆盖 CSS，如果是，如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T18:01:18.847

你试过像这样使用 CSS 吗？

```
fieldset.inlineLabels ul {list-style:none} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-28T13:09:23.367

I had the same problem with bullets showing up next to radio buttons for flask forms. Using the solution for bullets in flask from [here](https://stackoverflow.com/questions/14591202/how-to-make-a-radiofield-in-flask), I was able to get rid of the bullets like this:

```
<p>
   Certification:
   {{form.certification(style="list-style:none")}}
</p> 
```

# jquery - 在jQuery中从父级鼠标移出后保持打开的子菜单

> ID：12607666
> 
> 赞同：0
> 
> 时间：2012-09-26T17:59:00.347
> 
> 标签：jquery, submenu

我制作了一个包含图像和文本的水平菜单。
但是，我使用此代码来显示和隐藏它的子菜单：

```
$('#top_menu').hover(function(e) {
    $('#about_submenu').fadeIn('slow');
},function(){
    $('#about_submenu').fadeOut('slow');
}); 
```

一切正常，但是每当我将鼠标从父级移动到其子菜单时，子菜单就会因为`fadeOut`. 当我从父链接位置移动光标时，如何保持子菜单出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:05:23.540

尝试这个：

```
$('#top_menu').hover(function(e) {
    if(!$('#about_submenu').is(':visible'))
    {
        $('#about_submenu').fadeIn('slow');
    }
},function(){
    if(!$('#about_submenu').is(':hover'))
    {
        $('#about_submenu').fadeOut('slow');
    }
});

$('#about_submenu').mouseout(function(){
    if(!$('#top_menu').is(':hover'))
    {
        $('#about_submenu').fadeOut('slow');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:00:59.700

用一个小的超时实现淡出，比如 200 毫秒。如果悬停子菜单项，请取消淡出。

下面是一个关于您已经拥有的代码的示例：

```
var timeoutID;
$('#top_menu').hover(function(e) {
    clearTimeout(timeoutID);
    $('#about_submenu').fadeIn('slow');
},function(){
    timeoutID = setTimeout(hideSubmenu, 200);
});

$('#about_submenu').hover(function(e) {
    clearTimeout(timeoutID);
},function(){
    timeoutID = setTimeout(hideSubmenu, 200);
});

function hideMenu() {
    $('#about_submenu').fadeOut('slow');
} 
```

# mysql - 非常大的 SQL 查询的问题

> ID：12607667
> 
> 赞同：3
> 
> 时间：2012-09-26T17:59:08.627
> 
> 标签：mysql, sql, refactoring, trac

**问题：**

我正在创建一个 Trac 报告，该报告显示我们图书馆每个章节的开发周期的每个阶段有多少票。*一张票代表一项工作，通常是一个单独的例程。*

例如，即将发布的版本（里程碑）有多少票处于第*X*章的同行评审阶段。

共有10个发展阶段和47个章节。

给定的 MySQL 查询针对所有 10 个开发阶段，但仅针对一章，有 25 行长，因此所有章节的整个查询超过 1200 行。

Trac 给出的错误是`KeyError: 'numrows'`查询变大的地方。

将查询直接输入 MySQL 时，给出的错误是`Out of resources when opening file (Errcode: 24) (23)`

**问题**：

*   重构 - 这可以做得“更好”的 sql 大师，有一些聪明的技巧/先进技术吗？

*   方法 - 我是否需要完全不同的方法？

*   配置 - MySQL 和/或 Trac 是否可以配置为接受非常大的查询

*笔记：*

*表中的数据很小，当它在明显的大小限制下时，查询不会花费很长时间来执行。*

*查询从 Trac 系统传递到 MySQL，这对可以执行的操作设置了一些限制，例如只能从 trac 发送单个查询来生成报告。*

*可以在[此处查看 Trac 报告的示例。](http://trac.edgewall.org/report/37)*

*查询中的`%c%*`只是我在通过脚本生成查询时用于替换实际章节的唯一字符串。*

```
SELECT '%c%' as Chapter,
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status IN ('new','assigned') ) AS 'New',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='document_interface' ) AS 'Document\
 Interface',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='interface_development' ) AS 'Inter\
face Development',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='interface_check' ) AS 'Interface C\
heck',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='document_routine' ) AS 'Document R\
outine',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='full_development' ) AS 'Full Devel\
opment',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='peer_review_1' ) AS 'Peer Review O\
ne',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%'AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='peer_review_2' ) AS 'Peer Review Tw\
o',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='qa' ) AS 'QA',
(SELECT count(ticket.id) AS Matches FROM engine.ticket INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%'AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='closed' ) AS 'Closed',
count(id) AS Total,
ticket.id AS _id
FROM engine.ticket
INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:18:21.490

不要为每个计数创建一个子查询，而是使用 a`case`从已经为查询获取的数据中计数：

```
select '%c%' as Chapter,
  sum(case when ticket.status IN ('new','assigned') then 1 else 0 end) as 'New',
  sum(case when ticket.status='document_interface' then 1 else 0 end) as 'DocumentInterface',
  sum(case when ticket.status='interface_development' then 1 else 0 end) as 'Interface Development',
  sum(case when ticket.status='interface_check' then 1 else 0 end) as 'Interface Check',
  sum(case when ticket.status='document_routine' then 1 else 0 end) as 'Document Routine',
  sum(case when ticket.status='full_development' then 1 else 0 end) as 'Full Development',
  sum(case when ticket.status='peer_review_1' then 1 else 0 end) as 'Peer Review One',
  sum(case when ticket.status='peer_review_2' then 1 else 0 end) as 'Peer Review Two',
  sum(case when ticket.status='qa' then 1 else 0 end) as 'QA',
  sum(case when ticket.status='closed' then 1 else 0 end) as 'Closed',
  count(id) as Total,
  ticket.id as _id
from
  engine.ticket
  inner join engine.ticket_custom on ticket.id = ticket_custom.ticket
where
  ticket_custom.name='chapter' and
  ticket_custom.value LIKE '%c%' and
  type='New material' and
  milestone='1.1.12' and
  component NOT LIKE 'internal_engine' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:10:28.783

不会完全重写它......但这是我的建议：

```
SELECT '%c%' as Chapter,
    SUM(CASE WHEN ticket.status IN ('new','assigned') THEN 1 ELSE 0 END) as `New`,
    ...
    SUM(CASE WHEN ticket.status='closed' THEN 1 ELSE 0 END) as 'Closed',
    count(id) AS Total,
    ticket.id AS _id
FROM engine.ticket
INNER JOIN engine.ticket_custom 
    ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' 
    AND ticket_custom.value LIKE '%c%' 
    AND type='New material' 
    AND milestone='1.1.12' 
    AND component NOT LIKE 'internal_engine'
GROUP BY ticket.id
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:42:52.873

当涉及到通过 Trac 生成这样的复杂报告时，最好根本不使用报告。报告对于相对简单的查询来说是可以的，但是当您组织许多不同的阶段和章节时，它们会变得笨拙。

相反，请尝试使用 wiki 页面创建您的“报告”。这将使您能够更好地控制布局和表示，而且您可以完全避免编写 SQL。以下是虚假报告的一些示例 wiki 代码，该报告显示所有未关闭的工单，按里程碑分组，然后按状态分组：

```
= Custom Report =
My custom report, as a wiki page

== Tickets for Milestone A ==
[[TicketQuery(milestone=MilestoneA,status!=closed,group=status,format=table)]]

== Tickets for Milestone B ==
[[TicketQuery(milestone=MilestoneB,status!=closed,group=status,format=table)]]

... 
```

我不知道您是如何定义阶段和章节的，因此您需要调整查询参数以使用适当的工单字段。您还可以使用`format`其他选项来调整输出格式。

这只是一个简单的例子。该`TicketQuery`宏能够生成更复杂的报告。有关可能更接近（复杂性）您正在寻找的东西的示例，请查看[Trac 项目的发行说明](http://trac.edgewall.org/wiki/TracDev/ApiChanges/1.0)。整个“更改的详细列表”部分是使用单个`TicketQuery`宏生成的（点击“编辑”按钮以查看他们是如何做到的）。

* * *

**另一个例子**

要重新创建您链接到的图表，您可以执行以下操作：

```
||= **Id** =||= **Enhancements** =||= **Defects** =||= **Tasks** =||
||[milestone:v1.0 v1.0] || [[TicketQuery(milestone=v1.0,type=enhancement,format=count)]] || [[TicketQuery(milestone=v1.0,type=defect,format=count)]] || [[TicketQuery(milestone=v1.0,type=task,format=count)]] ||
... repeat for each milestone ... 
```

本质上，`format=count`在宏中使用可以为您提供数据库为`sum(case ...)`Guffa 答案中的一条语句返回的内容。

使用宏而不是直接 SQL 这样做的最大好处是它变得与数据库无关。您不必担心数据库引擎（mysql、sqlite 等）之间的差异、Trac 数据库布局的变化、处理自定义字段的特殊代码等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:06:24.637

对，太丑了 您是否必须在一行中获取所有数据？这么多子查询将猛击服务器。你不能做一个标准的分组提取并在客户端做数据透视表吗？

例如

```
SELECT count(ticket.id) AS Matches, ticket_custom.name, ticket.status
FROM engine.ticket
INNER JOIN engine.ticket_custom ON ticket.id = ticket_custom.ticket
WHERE ticket_custom.name='chapter' AND ticket_custom.value LIKE '%c%' AND type='New material' AND milestone='1.1.12' AND component NOT LIKE 'internal_engine' AND ticket.status='qa' AND (ticket.status IN (........))
GROUP BY ticket.id, ticket_custom.name 
```

然后，在伪代码中：

```
data = array()
while(row = fetch($result)) {
   data[ticket.id]][ticket.status] = row[ticket.status];
} 
```

这样，您将只运行一个查询，并在 fetch 逻辑中做一些额外的小工作，以重新创建您的原始查询正在努力做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T15:13:46.740

我最终在`php`. 这允许更大的灵活性来创建我需要的报告类型并且不涉及荒谬`mysql queries`的 . 将脚本与 trac 项目集成在一起，报告项目，*即第**XX**章中**QA*** ***阶段的票证数量是 trac 中票证本身的超链接：[http ://myhost.co.uk/trac-project/query?id=10&id =15](http://myhost.co.uk/trac-project/query?id=10&id=15)*。此外，[NavAddPluggin](http://trac-hacks.org/wiki/NavAddPlugin)允许自定义主 trac 导航栏，因此可以添加链接到脚本的菜单选项。**

# java - Java EL：访问嵌套属性

> ID：12607670
> 
> 赞同：1
> 
> 时间：2012-09-26T17:59:13.337
> 
> 标签：java, jsf, el

给定一个类`A`：

```
public class A {
    private String foo;

    //getter, setters etc...

} 
```

`foo`如果`A`对象本身作为托管 bean 中的属性公开，则可以引用该属性，例如：

```
@ManagedBean
public class SomeBean {
    private A a;

    //getter, setters etc...

} 
```

`#{someBean.a.foo}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:20:49.883

确实，它会起作用。用于设置和获取值。输入，例如：

```
<h:inputText value="#{someBean.a.foo}" /> 
```

将获得显示它的值并通过执行以下任一操作设置新定义的值

```
beanInstance.getA().getFoo(); 
```

或者

```
beanInstance.getA().setFoo("newValue"); 
```

只需考虑到要使其正常工作并避免获得`NullPointerException`, `getA()`cannot return `null`，这意味着您的`a`对象必须被实例化。

# c# - C# 网络问题多个进程

> ID：12607674
> 
> 赞同：1
> 
> 时间：2012-09-26T17:59:32.450
> 
> 标签：c#, .net, tcp

每当我的客户端失去与服务器的连接时，我都会有一个重新连接循环，它会不断地寻找服务器。

当这个循环运行时，它每次尝试连接时都会生成一个 conhost.exe 和 csc.exe 进程，直到计算机减速停止。

有谁知道什么会创建这些流程？

所以会发生什么，无论何时出现连接失败或连接丢失，我都会调用 Initialize。这应该正确处理所有组件，然后重新初始化它们。

NetworkInterface 和 TcpInterface 的初始化方法：

```
 public void Initialize()
    {
        if (ni != null)
        {
            ni.Dispose();
            GC.Collect();
        }

        if (tcpInterface != null)
        {
            tcpInterface.Dispose();
        }

        tcpInterface = new TcpInterface();
        if (!string.IsNullOrEmpty(ipAddress))
        {
            tcpInterface.Settings = new TcpSettings
            {
                RemoteIp = ipAddress,
                Port = _port,
                PacketDenotesLength = false
            };
        }

        tcpInterface.NewConnection += new TcpInterface.TcpNetworkStateEventHandler(tcpInterface_NewConnection);
        tcpInterface.FailConnection += new TcpInterface.ConnectionEventHandler(tcpInterface_FailConnection);
        tcpInterface.ReceivePacket += new TcpInterface.TcpInterfacePacketEventHandler(tcpInterface_ReceivePacket);
        tcpInterface.LoseConnection += new TcpInterface.TcpNetworkStateEventHandler(tcpInterface_LoseConnection);

        ni = new NetworkInterface<string, PacketInfo>();
        ni.Services.Register("TcpInterface", tcpInterface);

        ni.Initialize();
    } 
```

为 TcpInterface 配置：

```
public void Dispose()
    {
        if (TcpClient != null)// && TcpClient.Connected)
        {
            if (TcpClient.Connected)
            {
                NetworkStream stream = TcpClient.GetStream();

                if (stream != null)
                {
                    stream.Close();
                }
            }
            TcpClient.Close();
            TcpClient = null;
        }
        Buffer = null;
        BufferBuilder = null;
    } 
```

为 ni 处理：

```
 public void Dispose()
    {
        Services.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:06:20.687

csc.exe 是 C# 编译器。

您是否使用 XmlSerializer 进行序列化/反序列化？如果您没有生成程序集，那么 XmlSerializer 将启动 csc.exe 并将一些代码编译到临时文件夹。

另一种选择是在 C# 中使用 CodeDom。然后代码将使用 csc.exe 进行编译。

# selenium - 在 driver.PageSource 中查找编辑链接并单击使用 Selenium Webdriver (C#)

> ID：12607680
> 
> 赞同：1
> 
> 时间：2012-09-26T17:59:45.680
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在尝试查找文本，如果找到文本，然后单击`Edit link`td 标记中的...。但是当您查看页面源时，我看不到如何确定要实现的任何建议或建议？

```
for an example: 
```

在我的页面 html 源代码（见下文）中的 td 中，`Title1`一旦找到文本，我就会调用文本，然后我想找到一种方法来单击编辑链接（这是一个超链接）

这是我到目前为止所做的//这是我的代码

```
IWebDriver driver = new OpenQA.Selenium.IE.InternetExplorerDriver();
string url ="http://site.com";
driver.Navigate().GoToUrl(url);
string pagesource = driver.PageSource; 
```

//html页面源代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head id="ctl00_PageHead">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Employee </title>
    <body id="ctl00_PageBody">
        <form name="aspnetForm" method="post" action="login.aspx" id="aspnetForm" class="container">
        <div>
        </div>
        <div>
        </div>
        <table class="global-table" cellpadding="0" cellspacing="0">
            <tr class="body">
                <td>
                    <div id="body">
                        <div id="body-inner">
                            <h1>
                                Employee Information</h1>
                            <div id="ctl00_ContentPlaceHolder1_Control1_pnlList" style="width: 100%;">
                                &nbsp;<div class='filter'>
                                    Language:
                                    <select name="ctl00$ContentPlaceHolder1$Control1$ddlLanguage" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$Control1$ddlLanguage\',\'\')', 0)"
                                        id="ctl00_ContentPlaceHolder1_Control1_ddlLanguage">
                                        <option selected="selected" value="1">English</option>
                                    </select></div>
                                <div>
                                    <table class="gv" cellspacing="0" border="0" id="ctl00_ContentPlaceHolder1_Control1_gv"
                                        style="border-collapse: collapse;">
                                        <tr class="gridHeader">
                                            <td colspan="8">
                                                <div style="float: left; margin-left: 7px; margin-top: 0px;">
                                                    <div style="float: left;">
                                                        <input type="image" name="ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ibtnFirst"
                                                            id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_ibtnFirst" disabled="disabled"
                                                            title="First Page" src="../App_Themes/Default/images/grid_page_first.png" style="border-width: 0px;
                                                            opacity: 0.4; filter: alpha(opacity=40); cursor: default;" />
                                                        <input type="image" name="ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ibtnPrev" id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_ibtnPrev"
                                                            disabled="disabled" title="Previous Page" src="../App_Themes/Default/images/grid_page_prev.png"
                                                            style="border-width: 0px; opacity: 0.4; filter: alpha(opacity=40); cursor: default;" />
                                                    </div>
                                                    <div style="float: left; padding: 3px 5px 0px 5px;">
                                                        <div class="pagerNumber">
                                                            Page 1 of 34
                                                        </div>
                                                    </div>
                                                    <div style="float: left;">
                                                        <input type="image" name="ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ibtnNext" id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_ibtnNext"
                                                            title="Next Page" src="../App_Themes/Default/images/grid_page_next.png" style="border-width: 0px;" />
                                                        <input type="image" name="ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ibtnLast" id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_ibtnLast"
                                                            title="Last Page" src="../App_Themes/Default/images/grid_page_last.png" style="border-width: 0px;" />
                                                    </div>
                                                </div>
                                                <div style="float: left; margin: 0px 6px 0px 20px;">
                                                    Page Size
                                                    <select name="ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ddlPageSize" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$Control1$gv$ctl01$ddlPageSize\',\'\')', 0)"
                                                        id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_ddlPageSize">
                                                        <option selected="selected" value="10">10</option>
                                                        <option value="20">20</option>
                                                        <option value="50">50</option>
                                                        <option value="100">100</option>
                                                    </select>
                                                </div>
                                                <div id="ctl00_ContentPlaceHolder1_Control1_gv_ctl01_RecordCount" style="float: right;
                                                    padding-right: 10px; margin-top: 3px;">
                                                    <b>10</b> Items Found</div>
                                            </td>
                                        </tr>
                                        <tr class="header">
                                            <th class=" nolink" scope="col">
                                                &nbsp;
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Phone')">
                                                    Phone</a>
                                            </th>
                                            <th class=" sorted-desc" scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Title')">
                                                    Title</a>
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$SubTitle')">
                                                    SubTitle</a>
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Names')">
                                                    Names</a>
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Names')">
                                                    Enames</a>
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Active')">
                                                    Active</a>
                                            </th>
                                            <th scope="col">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$DateTime')">
                                                    &nbsp;DateTime</a>
                                            </th>
                                        </tr>
                                        <tr class="item">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$0')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                Title1
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                8/23/2011&nbsp;
                                            </td>
                                        </tr>
                                        <tr class="altItem">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$1')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                1
                                            </td>
                                            <td>
                                                1
                                            </td>
                                            <td>
                                                Employee
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/31/2014
                                            </td>
                                        </tr>
                                        <tr class="item">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$2')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                111
                                            </td>
                                            <td>
                                                111
                                            </td>
                                            <td>
                                                Employer
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/31/2013
                                            </td>
                                        </tr>
                                        <tr class="altItem">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$3')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                123
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                8/23/2011
                                            </td>
                                        </tr>
                                        <tr class="item">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$4')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                2
                                            </td>
                                            <td>
                                                2
                                            </td>
                                            <td>
                                                Employer
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/31/2012
                                            </td>
                                        </tr>
                                        <tr class="altItem">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$5')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                3
                                            </td>
                                            <td>
                                                3
                                            </td>
                                            <td>
                                                Employer&nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/31/2012
                                            </td>
                                        </tr>
                                        <tr class="item">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$6')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                a
                                            </td>
                                            <td>
                                                a
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/20/2012
                                            </td>
                                        </tr>
                                        <tr class="altItem">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$7')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                Day
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                Customer
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                3/2/2013
                                            </td>
                                        </tr>
                                        <tr class="item">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$8')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                a1
                                            </td>
                                            <td>
                                                a1
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/24/20/14
                                            </td>
                                        </tr>
                                        <tr class="altItem">
                                            <td align="center">
                                                <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$9')">
                                                    Edit</a>
                                            </td>
                                            <td align="center" style="width: 15px;">
                                            </td>
                                            <td>
                                                A1
                                            </td>
                                            <td>
                                                A1
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                7/30/2012
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr class="footer">
                <td>
                </td>
            </tr>
        </table>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:35:39.427

为什么以下不起作用？

```
// Assumes "driver" is a valid object implementing IWebDriver
IWebElement table = driver.FindElement(By.ClassName("gv"));
IWebElement element = table.FindElement(By.XPath(".//td[contains(., 'Title1')]/..//a")); 
```

本质上，这表示“从类名为“gv”的表开始，找到`<td>`文本包含“Title1”的元素，导航到它的父元素（应该是`<tr>`元素），然后找到第一个`<a>`后代元素。

# tcpdump - RDMA中的数据包捕获？

> ID：12607686
> 
> 赞同：9
> 
> 时间：2012-09-26T18:00:31.797
> 
> 标签：tcpdump, infiniband, rdma

Linux 中有没有像 tcpdump 这样的实用程序来捕获通过 RDMA 通道的流量？(Infiniband/RoCE/iWARP)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T15:22:41.870

旧线程，但仍然：

正如 Roland 指出的那样，嗅探 RDMA 流量很棘手，因为一旦端点进行了初始握手，流量就会通过网卡 (HCA) 直接到达内存。嗅探此流量而无需在网络上放置专用硬件嗅探器的唯一方法是在网卡中使用特定于供应商的钩子，以及使用这些钩子的软件工具。

如果您有 Mellanox HCA，[则可以使用“ibdump”工具](http://www.mellanox.com/content/pages.php?pg=products_dyn&product_family=110&menu_section=34)。该工具也是 Mellanox OFED 软件包的一部分。

如果您有其他供应商的硬件，您需要与该供应商核实 - 您不会为所有支持 RDMA 的设备找到任何开源数据包嗅探器，抱歉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T07:09:54.737

一般来说，没有。RDMA 的主要特点之一是所有网络处理都在适配器上完成，完全不涉及 CPU。通常，工作请求直接从用户空间排队到适配器，无需任何系统调用。因此，嗅探器无处可挂以获取流量。

话虽如此，对于以太网协议、iWARP 或 IBoE（又名 RoCE），您可以在连接中间连接一个系统并将其设置为在软件中进行转发（例如 Linux 桥接模块），然后运行 ​​tcpdump 或 wireshark捕获通过此系统的 RDMA 流量。Wireshark 甚至有 iWARP 和 IBoE 的解析器。

对于本机 InfiniBand，理论上可以构建类似的东西（设置一个适配器来捕获和转发流量），但据我所知，甚至没有人完成基本数据包嗅探所需的固件或驱动程序工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T14:17:55.930

Chelsio 的 T4 设备支持数据包跟踪功能，允许将入口/出口卸载数据包复制到设备的 NIC 队列之一。然后，您可以使用 tcpdump 或该 ethX 接口上的任何东西来查看 RDMA 或 TOE 数据包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-19T11:08:24.690

Wireshark 可能就是其中之一。但问题是你需要一个观察服务器。启用镜像功能，您应该能够在观察者处收到 ROCE 口袋。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-22T21:45:32.227

捕获此类流量的可靠方法是将其复制到专用捕获端口中。这些端口可能是您的开发机器中的附加以太网/IB 端口（附加适配器的），或者它们可能位于附加的捕获机器中。

基本上有两种方法可以复制流量：

1.  在交换机中配置[端口镜像](https://en.wikipedia.org/wiki/Port_mirroring)。对端口镜像的支持在托管以太网交换机中非常普遍，即使在便宜的交换机中也是如此。某些 Mellanox Infiniband 交换机也提供此功能。您可以配置将一个端口的两个方向镜像到另一个端口，尽管如果镜像端口同时以线速接收和发送（全双工），这会使接收器超额订阅。在这种情况下，一些帧不能被转发到捕获端口，因此被丢弃。为了避免这种限制，需要将每个方向镜像到一个单独的捕获端口。

2.  将您的网络电缆连接到复制或分离信号的[TAP（目标接入点）设备。](https://community.fs.com/blog/do-you-know-about-optical-tap-test-access-point-cassettes.html)对于光网络，这些 TAP 通常以完全被动的方式构建，因此不会增加太多复杂性并且生产成本相对较低（[示例](https://www.fs.com/de-en/c/fhx-tap-cassettes-2960)）。每根光纤需要一个 TAP，即如果要捕获两个方向，则始终占用 2 个捕获端口。TAP 设备可用于以太网网络中常用的光纤和连接器。如果您的 Infiniband 硬件使用相同的硬件，那么您应该也可以在那里使用相同的 TAP 设备。至少是被动的。

一旦镜像/窃听的流量到达您的捕获端口，您就可以使用标准捕获工具，例如 tcpdump。

对于 Infiniband 有[ibdump](https://github.com/Mellanox/ibdump)，但是，根据您使用的 Infiniband 软件（开源 OFED 与专有的 Mellanox OFED）和主机通道适配器 (HCA)，您可能也可以使用tcpdump[来捕获 Infiniband 流量](https://community.mellanox.com/s/article/how-to-dump-rdma-traffic-using-the-inbox-tcpdump-tool--connectx-4-x).

# c# - 在 C# 中的某个时间间隔后启动一个进程？

> ID：12607687
> 
> 赞同：4
> 
> 时间：2012-09-26T18:00:32.847
> 
> 标签：c#

我有 ac# wpf 应用程序，在 main() 方法中，我检查某个条件，如果为真，我运行另一个进程，但是，我需要在某个超时后启动该进程。因此，例如：

```
override OnStartUp()

    {
           if(condition == true)
           {
                ProcessStartInfo p = new ProcessStartInfo("filePath");
                p.Start(); // This should wait for like say 5 seconds and then start.
                  return;   // This will exit the current program.
            }
    } 
```

我可以使用 Thread.Sleep() 但这也会导致当前程序进入睡眠状态。所以，换句话说，我希望当前程序立即终止，然后新进程在 5 秒后启动。

谢谢！

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:04:03.747

如果第一个进程创建了第三个程序会怎样。第一个程序立即退出，而第三个程序将简单地休眠 5 秒钟，然后将启动您的第二个程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:03:52.083

你有几个选择：

1.  修改正在启动的进程并将延迟放在那里。您甚至可以等待“父母已结束”而不是固定时间。
2.  Windows 内置计划任务
3.  使用 sleep 命令然后运行程序的批处理文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T18:18:55.873

您可以使用 Task Scheduler api 并设置一个时间任务，该任务将在接下来的 5 秒后启动应用程序。Nice 托管包装器：taskscheduler.codeplex.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:05:48.580

您需要创建一个新线程。在这个线程中，您可以使用 Thread.Sleep 而不会阻塞您的程序。

```
public class MyThread
{
   public static void DoIt()
   {
      Thread.Sleep(100);
      // DO what you need here
   }
}
override OnStartUp()
{
    if(condition == true)
    {
       ThreadStart myThread = new MyThread(wt.DoIt);
       Thread myThread = new Thread(myThread);
       myThread.Start();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:06:49.533

我可以推荐非常强大的

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

满足您的所有日程安排需求。

# java - JTree '节点标题已编辑' 侦听器

> ID：12607688
> 
> 赞同：0
> 
> 时间：2012-09-26T18:00:37.430
> 
> 标签：java, listener, jtree

我有一个带有自定义树节点的 JTree，我需要它在树注释标题被编辑后触发一个事件。到目前为止，我有这个：

```
tree.addTreeSelectionListener(new TreeSelectionListener() {
            public void valueChanged(TreeSelectionEvent e) {
                MyTreeNode node = (MyTreeNode) tree.getLastSelectedPathComponent();

                if (node == null) {
                    return;
                }
                //insert the new title in database
        }); 
```

但是，每次更改选择时都会触发。我需要在节点标题值发生更改时触发它，以便我可以在数据库中更新它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:36:18.433

a TreeSelectionListener listens, when the selection changes. 你想要的是一个EditListener，对吧？

那么您可以使用 getCellEditor 获取编辑器：http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTree.html#getCellEditor [(](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTree.html#getCellEditor) )

然后在 CellEditor 上添加一个侦听器： [http](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/CellEditor.html#addCellEditorListener(javax.swing.event.CellEditorListener) ://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/CellEditor.html#addCellEditorListener(javax.swing.event.CellEditorListener )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:03:27.527

我再次找到了解决方案。创建了一个自定义 TreeModelListener：

```
class MyTreeModelListener implements TreeModelListener {
public void treeNodesChanged(TreeModelEvent e) {
    MyTreeNode node;
    node = (MyTreeNode)
             (e.getTreePath().getLastPathComponent());

    /*
     * If the event lists children, then the changed
     * node is the child of the node we have already
     * gotten.  Otherwise, the changed node and the
     * specified node are the same.
     */
    try {
        int index = e.getChildIndices()[0];
        node = (MyTreeNode)
               (node.getChildAt(index));
    } catch (NullPointerException exc) {}

    System.out.println("The user has finished editing the node.");
    System.out.println("New value: " + node.getUserObject());
}
public void treeNodesInserted(TreeModelEvent e) {
}
public void treeNodesRemoved(TreeModelEvent e) {
}
public void treeStructureChanged(TreeModelEvent e) {
} 
```

}

并将其添加到树中：

```
DefaultTreeModel treeModel = new DefaultTreeModel(rootNode);
treeModel.addTreeModelListener(new MyTreeModelListener());

tree = new JTree(treeModel); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T19:30:34.497

将控制器（或具有控制流逻辑的另一个对象）注册到您的 MyTreeNode 对象。使用观察者模式并让控制器接收更改的实例。然后控制器可以将更改的值添加到 DB 中。

# oracle - 通过提示输入相关值来连接不相关的表

> ID：12607693
> 
> 赞同：0
> 
> 时间：2012-09-26T18:00:59.567
> 
> 标签：oracle, join, cartesian

我在使用 Business Objects 进行查询的 oracle 数据库中有两个不相关的表，Activity 和 Schedules。我可以将任何活动与任何时间表配对，但我希望它在查询中得到提示。表格如下：

```
Activity_Name
  Bodyweights
  Dosing
  Health Check

Schedule
  Twice A Day
  Daily
  Weekly 
```

而且我希望能够运行一个带有提示的查询，每个活动都会提示一个时间表。我最终认为这是一种可能性：

```
Activity Schedule
     Activity        Schedule
     --------        --------
     Bodyweights     Weekly
     Dosing          Twice A Day
     Health Check    Twice A Day 
```

活动列表将是一个提示可用活动的查询。我会在第二个的 Where 子句中使用这些结果，并提示每个时间表。

# ruby - 位数组 - 所有可能的组合

> ID：12607707
> 
> 赞同：0
> 
> 时间：2012-09-26T18:01:37.927
> 
> 标签：ruby

我有 0 和 1 的数组。我需要一个返回“下一个”数组的函数。像这样的东西：

```
f([0,0,0,0]) -> [0,0,0,1]
f([0,0,0,1]) -> [0,0,1,0]
f([0,1,1,1]) -> [1,0,0,0] 
```

是否有任何库函数或者我需要自己编码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:10:35.097

Ruby 包含一种在二进制和 base 10 之间转换的简单方法。

```
"0010".to_i(2)
=> 2

13.to_s(2)
=> "1101" 
```

所以做你需要的一个简单的方法是

```
def f(a)
  (a.join.to_i(2) + 1).to_s(2).split("").map{ |v| v.to_i }
end 
```

这是添加两个 nbit 数字的方法。

```
def nbit_addition(a, b)
  bit1 = toBits(a)
  bit2 = toBits(b)
  bitLength = bit1.length > bit2.length ? bit1.length : bit2.length
  bit3 = []
  for i in 0...bitLength
    bit1[i] = 0 if bit1[i].nil? 
    bit2[i] = 0 if bit2[i].nil? 
    bit3[i] = 0 if bit3[i].nil?
    bit3[i] += (bit1[i] + bit2[i])
    if bit3[i] > 1 
      bit3[i + 1] = 0 if bit3[i + 1].nil?
      bit3[i] %= 2
      bit3[i + 1] += 1
    end 
  end 
  bit3.join.to_s.reverse.to_i(2)
end 

def toBits(value)
  bit = []
  value.to_s(2).reverse.split(//).each { |b| bit << b.to_i } 
  return bit 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:54:52.530

如果您想生成所有可能的组合（如标题所示），那么它们实际上是排列（重复）。

```
f = [0,1].repeated_permutation(4)
16.times {p f.next} 
```

输出：

```
[0, 0, 0, 0]
[0, 0, 0, 1]
[0, 0, 1, 0]
[0, 0, 1, 1]
[0, 1, 0, 0]
[0, 1, 0, 1]
[0, 1, 1, 0]
[0, 1, 1, 1]
[1, 0, 0, 0]
[1, 0, 0, 1]
[1, 0, 1, 0]
[1, 0, 1, 1]
[1, 1, 0, 0]
[1, 1, 0, 1]
[1, 1, 1, 0]
[1, 1, 1, 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:11:11.920

将位数组转换为数字非常简单：

```
[0,1,1,1].inject(0) { |number,bit| number * 2 + bit }
 => 7 
```

当然很容易得到下一个数字：

```
7.succ
 => 8 
```

...并且很容易将其转换回位数组：

```
8.to_s(2).chars.map(&:to_i)
 => [1, 0, 0, 0] 
```

也就是说，如果你必须这样做，你可能应该重新考虑为什么你首先有一个位数组。`8`是比 更合理的数字表示`[1, 0, 0, 0]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:11:12.163

```
class Array
  def binary_succ(lindex=nil)
    lindex ||= size - 1    
    if lindex >= 0
      if self[lindex] == 0 then self[lindex] = 1
      else self[lindex] = 0; binary_succ(lindex-1) end
    end
    self
  end
end

[0,1,1,1].binary_succ #=> [1,0,0,0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:12:47.733

我很无聊，所以这是一个不涉及对数组进行字符串化的解决方案

```
def succ arr
  overflow = false
  rev = arr.reverse
  rev[0] += 1
  rev.map do |el|
    el += 1 if overflow
    case el
    when 0, 1
      overflow = false
      el
    when 2
      overflow = true
      0
    end
  end.reverse
end

succ [0,0,0,0] # => [0, 0, 0, 1]
succ [0,0,0,1] # => [0, 0, 1, 0]
succ [0,1,1,1] # => [1, 0, 0, 0] 
```

# jquery-mobile - 淘汰赛，jquery mobile listview - 点击获取id

> ID：12607710
> 
> 赞同：0
> 
> 时间：2012-09-26T18:01:47.163
> 
> 标签：jquery-mobile, knockout.js

我有一个如下的列表视图：

```
 <ul data-inset="true" data-filter="true" data-bind="foreach: growers" data-role="listview" id="ulGrowerList">
          <li><a data-bind="click: $parent.setSelectedClassToGrowerList, attr: {id: growerId}"><span data-bind="text: growerName, attr: {id: growerId}, click: $parent.setSelectedClassToGrowerList" /></a></li>
      </ul> 
```

我的 setSelectedClassToGrowerList 看起来像这样：

```
 self.setSelectedClassToGrowerList = function (item, event) {

    $(ulGrowerList).closest('ul').find('a').removeClass('highlight');
    $(ulGrowerList).closest('ul').find('.selected').remove();

    $(event.target).toggleClass("highlight");
    if ($(event.target).hasClass("highlight")) {
      $(event.target).append("<span class='selected'>Selected</span>");
      //console.log(event.target.id);
      replaceByValue('GrowerID', event.target.id);
      postjson();

      //update GrowerInfo 
      $.getJSON("Grower/GetGrower", function (allData) {
        self.GrowerName(allData.Name);
        self.GrowerCompany(allData.CompanyName);
        self.GrowerAddress(allData.Address);
        self.ShowGrowerCompany(allData.ShowCompany);
        self.GrowerID(allData.ID);
      });

    } else {
      $(event.target).find(".selected").remove();
    } 
```

如您所见，我将 setSelectedClassToGrowerList 绑定到 和 标记，因为单击文本（跨度）没有采取所需的操作。现在，问题是，当我单击文本本身时，不显示“选定”文本。我正在寻找的功能与此类似：http: [//jsfiddle.net/czqXm/1/](http://jsfiddle.net/czqXm/1/)除了能够选择多个已经在工作的项目。

我使用淘汰赛和 jquery mobile 的次数越多，我就越倾向于得出它们不是最佳组合的结论（叹气！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:29:10.717

好的。我认为这是一个重复处理程序问题。

发生的事情是，当您单击文本时，因为它在 SPAN 上有一个单独的单击处理程序，在单击处理程序*内部*，实际上正在注册两个单击事件……第一个使“已选择”出现，第二个使它再次消失。

我认为您可能可以简化对此的绑定

```
<li><a data-bind="click: $parent.setSelectedClassToGrowerList, 
                  attr: {id: growerId}, 
                  text: growerName"></a></li> 
```

...但是看看[这个小提琴](http://jsfiddle.net/WsyDT/2/)

# java - Java Swing 空白 JFrame 即将推出？

> ID：12607714
> 
> 赞同：2
> 
> 时间：2012-09-26T18:02:00.347
> 
> 标签：java, eclipse, swing, jframe

我是新手，想知道为什么有时我的应用程序显示为空白，有时它会显示组件。似乎是零星的。没有抛出异常或类似的东西。它只是经常以空白 JFrame 的形式出现。有时当我关闭应用程序并再次运行它时，它会正确显示组件，但它主要显示为空白。我在代码中做错了吗？如果重要的话，我正在使用 Eclipse IDE。这是代码：

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

import javax.swing.*;

public class Main extends JFrame implements ActionListener {
    private static final long serialVersionUID = 1L;
    JRadioButton randomRadioButton;
    JRadioButton uniqueRadioButton;
    JRadioButton participationRadioButton;
    ArrayList<Student> allStudents;
    JFrame mainFrame;

    public Main(){
        allStudents = new ArrayList<Student>();
        processAllStudents();
        mainFrame = new JFrame();
        mainFrame.setVisible(true);
        mainFrame.setSize(250, 400);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel componentHolder = new JPanel();
        componentHolder.setLayout(new GridLayout(5,1));

        JLabel titleText = new JLabel("                     Randomizer");
        componentHolder.add(titleText);
        JButton picker = new JButton("Pick a Student");
        JFileChooser filePick = new JFileChooser();
        filePick.addActionListener(this);

        ButtonGroup allRadioButtons = new ButtonGroup();
        randomRadioButton = new JRadioButton("Completely Random");
        uniqueRadioButton = new JRadioButton("Unique");
        participationRadioButton = new JRadioButton("Complete Participation");

        allRadioButtons.add(randomRadioButton);
        allRadioButtons.add(uniqueRadioButton);
        allRadioButtons.add(participationRadioButton);

        componentHolder.add(randomRadioButton);
        componentHolder.add(uniqueRadioButton);
        componentHolder.add(participationRadioButton);

        picker.addActionListener(this);

        componentHolder.add(picker);
        componentHolder.add(filePick);
        mainFrame.add(componentHolder);
    }

    public void actionPerformed(ActionEvent e){
        if(e.getActionCommand().equals("Pick a Student")){
            if(randomRadioButton.isSelected()){
                Student result = getStudentRandom();
                result.increment();
                String resultString = new String(result.getName() + ", " + result.getFrequency());
                System.out.println(resultString);
                JLabel resultLabel = new JLabel(resultString);
                JOptionPane.showMessageDialog(mainFrame, resultLabel);
            }
            else if(uniqueRadioButton.isSelected()){
                Student firstStudent = getStudentRandom();
                Student secondStudent = getStudentRandom();
                Student result;
                if(firstStudent.getName().equals(secondStudent.getName())){
                    result = secondStudent;
                }
                else{
                    result = firstStudent;
                }
                result.increment();
                String resultString = new String(result.getName() + ", " + result.getFrequency());
                System.out.println(resultString);
                JLabel resultLabel = new JLabel(resultString);
                JOptionPane.showMessageDialog(mainFrame, resultLabel);
            }
            else if(participationRadioButton.isSelected()){
                Student result = selectStudentParticipant();
                result.increment();
                JOptionPane.showMessageDialog(mainFrame, result.getName() + ", " + result.getFrequency());
            }

        } else System.out.println("Error.");

    }
    public void processAllStudents(){
        File f = new File("Test.txt");
        Scanner scanFile = null;
        try {
            scanFile = new Scanner(f);
        } catch (FileNotFoundException e) {
            System.out.println("File Not Found");
        }
        while(scanFile.hasNext()){
            String name = scanFile.next();
            int frequency = scanFile.nextInt();
            Student s = new Student(name, frequency);
            allStudents.add(s);
        }
    }
    public Student getStudentRandom(){
        int result = (int) (Math.random() * allStudents.size());
        return allStudents.get(result);
    }
    public Student selectStudentParticipant(){
        Student temp = null;    //Start of bubble sort algorithm

        for(int i = 0; i < allStudents.size() - 1; i++){
            Student firstStudent = allStudents.get(i);
            Student secondStudent = allStudents.get(i+1);
            if(firstStudent.getFrequency() > secondStudent.getFrequency()){
                temp = firstStudent;
                firstStudent = secondStudent;
                secondStudent = temp;
            }
        }

        //End of bubble sort algorithm. Data structure now sorted increasing

        int firstRandom = (int) (Math.random() * (allStudents.size()/2) + 0.2 * allStudents.size());    //Likely to be bigger
        int secondRandom = (int) (Math.random() * (allStudents.size()/2));
        int randomIndex = 0;    //Used to represent a random index

        if(firstRandom > secondRandom){ //More likely. Selects from first half of list
            randomIndex = (int) (Math.random() * allStudents.size()/2);
        }

        else if(firstRandom < secondRandom){    //Possible, but less likely
            randomIndex = (int) ((Math.random() * allStudents.size()/2) + allStudents.size()/2);
        }

        else{   //If the two random numbers are the same
            randomIndex = (int) (Math.random() * allStudents.size()/2);
        }

        return allStudents.get(randomIndex);

    }
    public static void main(String[] args){
        new Main();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:04:04.587

`setVisible(true)`必须是 Main 方法中调用的最后一个方法。否则不会在 JFrame 上呈现任何内容

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T18:04:28.800

> 为什么有时我的应用程序显示为空白，有时它显示组件。似乎是零星的。

这不是零星的，当您错过一个`frame.pack()`告诉框架打包其所有组件的电话时，就会发生这种情况

执行以下操作，框架应显示正常：

```
mainFrame.add(componentHolder);
mainFrame.pack();
mainFrame.setVisible(true); 
```

# generics - 声明一个接受具有泛型类型的元组参数的函数

> ID：12607715
> 
> 赞同：1
> 
> 时间：2012-09-26T18:02:12.857
> 
> 标签：generics, f#

这是我编写的代码片段：

```
let Foo (a : (int * int) seq) =  ();;
val Foo : seq<int * int> -> unit

let inline Bar (a : (a' * int) seq) = ();;
let Bar (a : (a' * int) seq) =
--------------^^
stdin(8,15): error FS0039: The type 'a'' is not defined
> 
```

我的意图是`Bar`应该是一个函数，我可以将具有不同类型的元组传递给它，例如`(string * int)`or `(float * int)`。为什么我不能这样定义我的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:11:15.960

勾号 (') 出现在类型变量之前，而不是之后（也就是说，您要使用`'a`，而不是`a'`）。

此外，您不太可能需要`inline`在声明中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:30:14.370

你真的需要一个类型注释吗？这更清洁并且具有相同的类型：

```
let Bar a =
  for c, d in a do
    printfn "%A, %d" c d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:08:29.863

您可以使用 <> 使函数显式泛型以引入泛型类型。

```
let Bar<'a> (a: ('a * int) seq) = () 
```

# emacs - 在 emacs 中设置 SLIME

> ID：12607716
> 
> 赞同：12
> 
> 时间：2012-09-26T18:02:13.373
> 
> 标签：emacs, lisp, common-lisp, slime

我试图安装 SLIME。我下载了压缩包，根据 README 文件，我必须将这段代码放在我的 Emacs 配置文件中：

```
(add-to-list 'load-path "~/hacking/lisp/slime/")  ; your SLIME directory
(setq inferior-lisp-program "/opt/sbcl/bin/sbcl") ; your Lisp system
(require 'slime)
(slime-setup) 
```

设置 SLIME 目录很简单，但是 Lisp“系统”呢？我如何找到它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-26T19:33:06.050

一些 Linux 预装了 CMUCL，但由于您似乎想要使用 SBCL，因此您需要安装它。

在终端或 Emacs 中`M-x``shell`。如果您使用的是类 Debian 发行版，您可以使用 apt-get 或 aptitude 与以下内容：

```
$ sudo apt-get install sbcl 
```

或者

```
$ sudo aptitude install sbcl 
```

在类 RHEL 发行版上：

```
$ sudo yum install sbcl 
```

SBCL 安装好后，可以设置`inferior-lisp-program`为“sbcl”。

另外，我建议通过[quicklisp-slime-helper安装 SLIME](https://github.com/quicklisp/quicklisp-slime-helper)

您需要安装一些您喜欢的 Lisp（为此目的，让它成为 SBCL，如上所述），然后，在同一个 shell 中执行以下操作：

（假设您在类似 Debian 的 Linux 上）

```
$ sudo apt-get install wget
$ cd ~/Downloads
$ wget http://beta.quicklisp.org/quicklisp.lisp
$ sbcl --load ./quicklisp.lisp 
```

等到你看到 Lisp shell 提示符，

```
* (quicklisp-quickstart:install)
* (ql:add-to-init-file)
* (ql:quickload "quicklisp-slime-helper")
* (quit) 
```

现在你又回到了普通的 shell 中。启动 Emacs（如果尚未打开）。`C-f x``~/.emacs`. 将下面的行添加到它（而不是您在上面发布的内容）：

```
(load (expand-file-name "~/quicklisp/slime-helper.el"))
(setq inferior-lisp-program "sbcl") 
```

或者将“sbcl”替换为您安装的 Lisp 实现。

查看[Quicklisp](http://www.quicklisp.org/beta/#installation)文档以获取更多信息。你会发现无论如何你都会在以后使用 Quicklisp，所以从一开始就将它全部集中在一个地方是很有用的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-23T06:28:44.137

最佳答案有点老了。

现在 emacs 有一个官方的包管理器。您可以通过 MELPA 存储库安装 slime。首先[设置 MELPA](http://melpa.org/#/getting-started)，然后`M-x package-install RET slime RET`.

之后，您可以设置您`inferior-lisp-program`喜欢的最佳答案。

# java - 如何在 Struts 2 上使用 Spring Security 3？

> ID：12607719
> 
> 赞同：2
> 
> 时间：2012-09-26T18:02:16.610
> 
> 标签：java, struts2, spring-security

我已经阅读了很多关于在 Struts 2 上使用 Spring Security 3 的教程。但我无法让它工作：/。

我找不到关于在 Struts 2 上实现此框架的“虚拟分步指南”。

这是我所拥有的：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
   <display-name>cv</display-name>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>example/HelloWorld.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

安全.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context/spring-context-2.5.xsd"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
          http://www.springframework.org/schema/context/spring-context-2.5.xsd http://www.springframework.org/schema/context/spring-context-2.5.xsd/spring-spring-context-2.5.xsd-3.1.1.RELEASE.xsd
">

<?xml version="1.0" encoding="UTF-8"?>

<b:beans xmlns="http://www.springframework.org/schema/security"
xmlns:b="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/security

http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<http realm="Project Realm" auto-config="true" use-expressions="true">
    <intercept-url pattern="/auth/**" filters="none"/>
    <intercept-url pattern="/**" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')"/>
    <form-login login-page="/auth/login.jsp" authentication-failure-url="/auth/login.jsp?login_error=1"/>
    <logout logout-success-url="/auth/login.jsp"/>
    <remember-me />
</http>

<http>
    <intercept-url pattern="/login*" filters="none" />
    <intercept-url pattern="/css/**" filters="none" />
    <intercept-url pattern="/img/**" filters="none" />
    <intercept-url pattern="/search.action*" access="ROLE_ADMIN" /><!-- Never reach -->
    <intercept-url pattern="/user/**" access="ROLE_ADMIN" /><!-- Never reach -->
    <intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />           
    <form-login login-page="/login.action" />
    <logout logout-url="/logout.action" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="admin" authorities="ROLE_ADMIN"/>
            <user name="customer" password="customer" authorities="ROLE_USER"/>
        </user-service>
    </authentication-provider>
</authentication-manager>

</b:beans>

</beans> 
```

还有我的 HelloWorld.jsp

```
<body>
        <h1>Welcome!</h1><br />
        <sec:authorize access="isAnonymous()">
         This session will be visible to an admin only.<br/>
         You are an Administrator.<br/>
        </sec:authorize>
        <sec:authorize access="hasRole('ROLE_USER')">
         This session will be visible to an Customer only.<br/>
         You are an Customer.<br/>
        </sec:authorize>
        ${HelloMessage}<br />
        <a href="<c:url value="/j_spring_security_logout"/>">Logout</a>
    </body> 
```

我想使用显示该文本块的标签“isAnonymous”来测试权限的工作原理，但我无法使其工作

:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:09:20.133

您需要将 Spring Security 的过滤器链添加到 web.xml。

```
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这在您的 Struts 过滤器之后进行。这将允许 Spring Security 在 Struts 收到请求之前检查/阻止请求。

假设用户被允许访问内容 Spring Security 将设置一个 SecurityContext 对象，该对象将使 JSP 标记工作。

# performance - 当每个字符需要单独放置和格式化时，如何快速渲染文本？

> ID：12607720
> 
> 赞同：1
> 
> 时间：2012-09-26T18:02:19.350
> 
> 标签：performance, delphi, text-rendering

我尝试在屏幕上显示格式化文本。首先解析非常简单的 HTML 文本（有 b、u、i 之类的标签），然后使用`Canvas.TextOut`函数以适当的位置和字体呈现每个字符。

我注意到的第一件事是，画布上每个单独字符的渲染都相当慢。整个句子的渲染要快得多。很明显，当画布被迫重新绘制时，当表单在屏幕上移动时。

一种解决方案是用均匀的字体对字符进行聚类并立即渲染它们。但是，当格式丰富时，它不会有太大帮助。此外，我需要字符是离散的实体，可以以任何方式呈现。例如，没有 WinAPI 支持文本对齐 taJustify 或块写入...

另一种方法是在位图上渲染，或者明智地使用`ClipRect`TCanvas 的属性（我还没有尝试过）。

无论如何，当在 TRichEdit 中显示相同格式的文本时，重绘操作不会造成时间损失。另一个简单的例子是所有主要的浏览器，它们显示大量格式化文本没有问题......他们是否像我一样渲染每个字符，但他们做得更有效？？？我不知道。

那么你知道一些加速应用程序的方法吗（格式化文本渲染？）。

感谢您的想法...

示例代码：（使TForm尽可能大，用鼠标抓住它并在屏幕下向下拖动它。当你将它向上移动时，你会看到“跳跃”的运动）

```
procedure TForm1.FormPaint(Sender: TObject);
var i, w, h, j:integer;
    s:string;
    switch:Boolean;
begin
   w:=0;
   h:=0;
   s:='';
   for j:=0 to 5 do
       for i:=65 to 90 do s:=s + Char(i);

   switch:=False; // set true to see the difference

   if switch then
     begin
     for j:=0 to 70 do begin
         for i := 1 to Length(s) do
         begin
         Form1.Canvas.TextOut(50+ w,h +70 , s[i]);
         w:=w +  Form1.Canvas.TextWidth(s[i]);
         end;
         w:=0;
         h:=h+15;
         end;
     end
    else
      begin
      for j:=0 to 70 do begin
       Form1.Canvas.TextOut(50+ w,h +70 , s);
       w:=w +  Form1.Canvas.TextWidth(s);  // not optimalized just for comparison
       w:=0;                               // not optimalized just for comparison
       h:=h+15;
       end;
      end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:33:18.060

使用分析器（例如 AQTime）来查找代码实际花费时间的位置。花费最多时间的可能不是它`TextOut()`自己。您一次通过`String`一个字符进行索引，将每个字符传递给`TextOut()`and `TextWidth()`。这些方法都不接受`Char`参数作为输入，它们只接受`String`输入，因此 RTL 花费精力分配和释放内存中的大量临时`String`s，具体取决于源`String`的长度。我见过类似杀死循环性能的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:20:01.993

为避免闪烁，具有最佳性能并仍具有所有高级文本渲染功能（如字距调整），答案是使用临时位图。

在 Windows 中绘制文本非常快，但显示预先计算的位图会快得多。

您可以划分布局以仅呈现文本的显示部分。或者尝试将您的文本拆分为文本“框”（就像[伟大的 TeX 引擎](https://tex.stackexchange.com/questions/10841/should-i-read-donald-knuths-the-texbook)所做的那样），使用每个框的宽度缓存。但是 Windows 本身会进行这种缓存，因此只有在您发现*真正的*瓶颈时才使用这种技术，通过对整个代码进行适当的分析。

不要重新发明轮子。在真实内容上，您会发现文本渲染比想象的要复杂得多，例如，如果您混合使用语言和布局（例如阿拉伯语和英语）。对于这样复杂的工作，您最好依靠 Windows，例如它的[UniScribe API 。](http://delphi-ce.blogspot.fr/2007/08/uniscribe-and-delphi.html)当我们制作我们的开源 pdf 引擎时，[我们尽可能地重复使用它](http://blog.synopse.info/post/2010/05/06/Synopse-PDF-engine-1.7.2)。

例如，FireMonkey 遭受重新发明轮子的困扰，并且在呈现复杂的文本内容时失败。所以使用现有的 API 是恕我直言的最佳途径......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:32:27.147

在我的电脑上，渲染到位图然后将其绘制到画布上的速度大约是原来的两倍。好吧，慢版本变得快两倍。快速版本保持不变。

另一种可能有效的优化。您还可以将字符宽度预先计算到一个数组中，这样您就不必经常调用 canvas.TextWidth()。

保持这样的变量

```
widths:array[char] of byte; 
```

像这样填写：

```
for c := low(widths) to high(widths) do
  widths[c] := Canvas.TextWidth(char(c)); 
```

填充这个 65536 元素数组很慢，所以最好只创建一个 65..90 元素数组，并放弃 unicode 支持。

另一件事.. 调用 Winapi.Windows.TextOut() 比 canvas.TextOut() 快。

你实际上可以赢得很多。

```
 Winapi.Windows.TextOut(bmp.Canvas.Handle, w, h, @s[i], 1); 
```

您的代码的修改版本：

```
// set up of off-screen bitmap.. needs to be resized when the form resizes. 
procedure TForm1.FormCreate(Sender: TObject);
begin
  bmp := TBitmap.Create;
  bmp.SetSize(width,height);
end; 
```

这是

```
procedure TForm36.PaintIt2;
var h,i,j,w: Integer; s: string;
begin
  w := 0;  h := 0;  s := '';

  for j := 0 to 5 do
    for i := 65 to 90 do
      s := s + Char(i);

  bmp.Canvas.Brush.Color := Color;
  bmp.Canvas.FillRect(bmp.Canvas.ClipRect);
  if Checkbox1.Checked then
  begin
    for j := 0 to 70 do
    begin
      for i := 1 to Length(s) do
      begin
        Winapi.Windows.TextOut(bmp.Canvas.Handle, w, h, @s[i], 1);
        w := w + widths[s[i]];
      end;
      w := 0; h := h + 15;
    end;
  end
  else
    for j := 0 to 70 do
    begin
      bmp.Canvas.TextOut(w, h, s);
      w := 0; h := h + 15;
    end;
  canvas.Draw(0,0,bmp);
end; 
```

我用这个程序计时了性能：

```
procedure TForm1.Button2Click(Sender: TObject);
var i : Integer; const iterations=300;
begin
  with TStopwatch.StartNew do
  begin
    for I := 1 to iterations do
      PaintIt2;
    Caption := IntToStr(Elapsed.Ticks div iterations);
  end;
end; 
```

最后一点：

我已经尝试禁用 cleartype/anti-aliasing，但奇怪的是，这使得渲染速度变慢了两倍！这就是我关闭抗锯齿的方式：

```
 tagLOGFONT: TLogFont;

  GetObject(
    bmp.Canvas.Font.Handle,
    SizeOf(TLogFont),
    @tagLOGFONT);
  tagLOGFONT.lfQuality  := NONANTIALIASED_QUALITY;
  bmp.Canvas.Font.Handle := CreateFontIndirect(tagLOGFONT); 
```

# asp.net-mvc - 如何在 ASP.NET MVC API 控制器中获取用户 IP

> ID：12607723
> 
> 赞同：17
> 
> 时间：2012-09-26T18:02:27.763
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我已经尝试过，`Request.UserHostAddress;`但是 API 控制器在请求中没有 UserHostAddress。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T11:37:59.920

```
IP = ((HttpContextBase)request.Properties["MS_HttpContext"]).Request.UserHostAddress; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-20T04:38:41.660

我正在使用以下代码，它对我有用....

```
string ipAddress =   System.Web.HttpContext.Current.Request.UserHostAddress; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-27T14:53:42.887

据此[，](http://forums.asp.net/t/1773976.aspx/1)更完整的方法是：

```
private string GetClientIp(HttpRequestMessage request)
{
    if (request.Properties.ContainsKey("MS_HttpContext"))
    {
        return ((HttpContext)request.Properties["MS_HttpContext"]).Request.UserHostAddress;
    }
    else if (request.Properties.ContainsKey(RemoteEndpointMessageProperty.Name))
    {
        RemoteEndpointMessageProperty prop;
        prop = (RemoteEndpointMessageProperty)this.Request.Properties[RemoteEndpointMessageProperty.Name];
        return prop.Address;
    }
    else
    {
        return null;
    }
} 
```

过去，在 MVC 3 项目（不是 API）上，我们曾经使用以下内容：

```
string IPAddress = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

if (String.IsNullOrEmpty(IPAddress))
    IPAddress = Request.ServerVariables["REMOTE_ADDR"]; 
```

# java - 为什么在运行时找不到公共类？

> ID：12607724
> 
> 赞同：1
> 
> 时间：2012-09-26T18:02:32.620
> 
> 标签：java, apache, runtime-error, apache-commons

在 Google 上进行了一场艰苦的战斗后，我找到了一种下载和设置 Java 的 Apache Commons API 的方法（所有这些只是为了包装一大段文本：P）。正确创建我的 CLASSPATH 后，我的编译器（用于命令行的 mingw）能够访问该库并编译我的文件。但是，当我运行它时，会出现运行时错误：

```
Exception in thread "AWT-EventQueue-1" java.lang.NoClassDefFoundError: org/apach
e/commons/lang3/text/WordUtils 
```

我是否忘记在某处声明 Apache 类？

有问题的代码片段：

```
String strWrap = WordUtils.wrap("A really really really really really long sentence.", 50);
b.drawString(strWrap,20,20); 
```

我的进口声明：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import org.apache.commons.lang3.text.*; 
```

顺便提一下，CLASSPATH 被设置为环境变量，并且`.jar`来自 Apache 的文件不包含在项目的其余部分中，我将它放在一个单独的目录中，因为我计划将它用于多个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:18:03.480

检查正确给出的[类路径](http://download.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)。
如果从 中运行 java 类，则`command line`需要添加（*当前目录*）点 (.)。

```
java YourClass -cp . 
```

**更新：**如果您使用的是 Applet，请参阅此[小程序参考](http://mindprod.com/jgloss/applet.html)

> Applet 类旨在从 applet 的 CODEBASE（如果不存在 CODEBASE 标记，则为 HTML 文件的目录）加载，而不是从 CLASSPATH 加载。如果您在 CLASSPATH 中的目录中有小程序类，则这些类将被允许绕过正常的小程序安全限制。

看到这个[环境参考](http://stuff.mit.edu/afs/athena/software/java_v1.1.6/www/environment.html)， [appletviewer](http://mindprod.com/jgloss/appletviewer.html)

**详细说明：（**参考[）](http://www.ericgiguere.com/articles/deploying-java-applets.html)一些
浏览器可以运行Java小程序。他们通过在浏览器中内置一个成熟的 Java 解释器或作为浏览器扩展（或插件）加载来做到这一点。**请注意，浏览器使用的 Java 解释器可能会也可能不会尊重 CLASSPATH 环境变量的设置**，具体取决于您使用的浏览器。这会影响下载小程序时发生的情况。

使用该标记将 Java 小程序嵌入到 HTML 页面中，如下所示：

```
<applet code="main.class" height="100" width="100"></applet> 
```

当浏览器看到这个标签时，它会执行以下操作：

1.  如果 Java 解释器尚未运行，则启动它。
2.  在页面上保留给定的空间量 (100x100) 并在该空间中创建一个 Java 容器。
3.  下载文件`main.class`并确保它扩展`java.applet.Applet`（它本身扩展了 java.awt.Panel）。下载是使用简单的 GET 请求完成的，就像下载图像一样。
4.  将小程序添加为容器的子项。
5.  调用`init()`applet 上的方法，然后调用`show()`方法。

# ocr - 如何“OCR”我的电表的图片？

> ID：12607730
> 
> 赞同：4
> 
> 时间：2012-09-26T18:03:11.297
> 
> 标签：ocr

下面是我的电表读数 52425.5（大致）的图片：

![在此处输入图像描述](../Images/60fb8d1f81478e96b9c5e9c3251a8b3e.png)

什么程序/技术可以帮助我自动读表？笔记：

*   这是更清洁的图像之一。许多图像具有静态。我可以忽略（让程序说“ERR”）带有太多静态的图片。

*   相机有一个固定支架，但每个表盘的中间（亮银色点）在照片之间上下移动（因为垂直同步不同？）。表盘中心（因此整个图片）也在图片之间左右移动一点，但幅度不大。

*   更多图片和一些代码： [https ://github.com/barrycarter/bcapps/tree/master/ELECREAD](https://github.com/barrycarter/bcapps/tree/master/ELECREAD)

*   到目前为止我的方法：

    *   将图片分成单独的表盘。

    *   找到每个表盘的中心（即“最亮点”）

    *   查看围绕中心具有不同半径的圆圈，并找到每个圆圈的最暗角度。

    *   用你发现的最暗的角度做一些事情（还不确定是什么）来获得读数。

*   我知道有些设备可以监视您的电表并记录/广播他们看到的“周期”数（每个周期 = 大多数电表上的 7.5 瓦时）。然而，这些设备价格昂贵，如果错过了一些读数，就无法“赶上”。

有什么想法吗？

更新：它远非完美，但[https://github.com/barrycarter/bcapps/blob/master/ELECREAD/bc-elec-read.pl](https://github.com/barrycarter/bcapps/blob/master/ELECREAD/bc-elec-read.pl)现在正确读取 100 个测试图像中的 6 个，错误读取 100 个测试中的 8 个图像，并拒绝其他 86 个测试图像（包括下面的一个）为“不可读”。在实际实践中（并且在知道以前的可靠读数时），它的效果要好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:09:34.450

看看opencv

> OpenCV（开源计算机视觉）是一个用于实时计算机视觉的编程函数库。

[http://opencv.org/](http://opencv.org/)

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

# multithreading - 如何在主线程上执行回调

> ID：12607733
> 
> 赞同：2
> 
> 时间：2012-09-26T18:03:23.590
> 
> 标签：multithreading, qt, signals-slots

我将一个对象实例传递给一个不透明的模块，该模块在我的对象上执行 SLOT 方法（回调）。调用模块在不同的线程上。我需要在我的主线程上执行这些方法。我以为我可以用信号和槽来做到这一点，但信号方法仍在调用者线程上执行。我认为我不应该使用 moveToThread() 将我的对象移动到调用者线程 - 没有一种机制可以向我的应用程序主线程发出信号吗？

```
MyClass::MyClass(...)
{
   OtherClass::getInstance()->setCallback(this);
   connect(this, SIGNAL(mySignalToMainThread()), this, SLOT(doThisOnMainThread()));
}

// Public slot, called by OtherClass on its own thread.
void MyClass::someCallback() 
{
   emit mySignalToMainThread();
}

void MyClass::doThisOnMainThread()
{
   // AHHH! I am still on callers thread.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:56:29.913

起初，我认为从 MyClass 所在的线程上下文之外的线程上下文发射信号可能是一个问题。但是，[Qt 线程文档指出](https://doc.qt.io/archives/qt-4.8/threads-qobject.html)：

> ...您可以安全地从 QThread::run() 实现中发出信号，因为信号发射是线程安全的。

这几乎打消了这个想法。而且，您正在使用 a `Qt::AutoConnection`，[文档指出](https://doc.qt.io/archives/qt-4.8/qt.html#ConnectionType-enum)：

> 如果信号是从与接收对象不同的线程发出的，则信号被排队，表现为 Qt::QueuedConnection。否则，槽被直接调用，表现为 Qt::DirectConnection。连接类型在信号发出时确定。

最后一点特别重要。如果您要编写此代码：

```
void MyClass::someCallback() 
{
   Q_ASSERT(QThread::currentThread() != this->thread());
   emit mySignalToMainThread();
}

void MyClass::doThisOnMainThread()
{
   Q_ASSERT(QThread::currentThread() == this->thread());
} 
```

我希望没有断言失败，但你建议你有一个。我不得不得出结论，要么 Qt 文档是错误的，要么这个问题比你提到的更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:06:39.223

它对我有用。也许将您的实现与我在下面的实现进行比较，看看它可能会有所不同。我试图尽可能地遵循您的约定，猜测缺少的细节：

**my_class.h**

```
class MyClass : public QObject {
  Q_OBJECT

public:
  explicit MyClass(QObject *parent = 0);

signals:
  void mySignalToMainThread();

public slots:
  void someCallback();
  void doThisOnMainThread();
}; 
```

**my_class.cpp**

```
MyClass::MyClass(QObject *parent) :
  QObject(parent) {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
  OtherClass::getInstance().setCallback(this);
  connect(this, SIGNAL(mySignalToMainThread()), SLOT(doThisOnMainThread()));
}

void MyClass::someCallback() {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
  emit mySignalToMainThread();
}

void MyClass::doThisOnMainThread() {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
} 
```

**other_class.h**

```
class OtherClass : public QObject {
  Q_OBJECT

public:
  static OtherClass& getInstance();
  void setCallback(MyClass *cb);

public slots:
  void doCallback();

private:
  explicit OtherClass(QObject *parent = 0);

  MyClass *cb_;
}; 
```

**other_class.cpp**

```
OtherClass::OtherClass(QObject *parent) : QObject(parent) {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
}

OtherClass& OtherClass::getInstance() {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
  static OtherClass singleton;
  return singleton;
}

void OtherClass::doCallback() {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
  cb_->someCallback();
}

void OtherClass::setCallback(MyClass *cb) {
  std::cout << Q_FUNC_INFO <<  QThread::currentThreadId() << std::endl;
  cb_ = cb;
} 
```

**主文件**

```
int main (int argc, char **argv) {
  QApplication app(argc, argv);

  MyClass c;

  QThread other;
  OtherClass::getInstance().moveToThread(&other);
  other.connect(&other, SIGNAL(started()),
                &OtherClass::getInstance(), SLOT(doCallback()));
  other.start();

  QMainWindow w;
  w.show();

  return app.exec();
} 
```

**样本输出：**

```
__thiscall MyClass::MyClass(class QObject *)00001108
class OtherClass &__cdecl OtherClass::getInstance(void)00001108
__thiscall OtherClass::OtherClass(class QObject *)00001108
void __thiscall OtherClass::setCallback(class MyClass *)00001108
class OtherClass &__cdecl OtherClass::getInstance(void)00001108
class OtherClass &__cdecl OtherClass::getInstance(void)00001108
void __thiscall OtherClass::doCallback(void)000015AC
void __thiscall MyClass::someCallback(void)000015AC
void __thiscall MyClass::doThisOnMainThread(void)00001108 
```

# c# - 关于 int 和 double 过载的问题

> ID：12607735
> 
> 赞同：2
> 
> 时间：2012-09-26T18:03:29.050
> 
> 标签：c#, overloading

我有 2 个方法，intMethod 和 doubleMethod，它们完全相同，除了 intMethod 采用 int 数组参数，而 doubleMethod 采用 double 数组参数。

我知道我可以使用重载来使用相同的方法名称，但是，我最终还是得到了 2 个几乎相同的方法，只是它们的参数不同。无论如何我可以将 intMethod 和 doubleMethod 组合成一种方法吗？

如果是这样，你能提供一些示例代码吗？我可以通过一些示例代码更好地遵循。谢谢

编辑：人们要求我发布我的方法，然后你去：

我有一个相同的方法，readDataDouble，它的数据数组是 double[][]

基本上这种方法读取一个 CSV 文件并将数据转换为 int 格式。第一行是时间，第一列是日期。

```
 public static void readDataInt(string value, ref int[][] data, ref DateTime[] timeframe, ref DateTime[] date)
    {
        string inputFile = "D:\\temp.csv";
        string[][] temp = null;

        if (File.Exists(inputFile))
        {
            string[] proRataVolumeFile = File.ReadAllLines(inputFile);
            temp = new string[proRataVolumeFile.Length][];

            for (int i = 0; i < proRataVolumeFile.Length; i++)
            {
                temp[i] = proRataVolumeFile[i].Split(',');
            }
        }

              //convert the string to int

        date = new DateTime[temp.Length - 1];
        timeframe = new DateTime[temp[0].Length - 1];
        data = new int[temp.Length - 1][];

        for (int i = 1; i < temp.Length; i++)
        {
            data[i - 1] = new int[temp[i].Length - 1];

            for (int j = 1; j < temp[i].Length; j++)
            {
                if (temp[i][j].Length > 0)
                    data[i - 1][j - 1] = Convert.ToInt32(temp[i][j]);
            }
        }

        for (int i = 1; i < temp.Length; i++)
        {
            date[i - 1] = Convert.ToDateTime(temp[i][0]);
        }

        for (int j = 1; j < temp[0].Length; j++)
        {
            timeframe[j - 1] = DateTime.Parse(temp[0][j]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:05:30.407

这在很大程度上取决于方法本身的作用。

如果该方法可以用共享接口来编写，例如`IComparable<T>`，您可以将其设为[通用方法](http://msdn.microsoft.com/en-us/library/twcad0zb.aspx)：

```
void SomeMethod<T>(T[] values) where T : IComparable<T>
{
    // Do stuff here
} 
```

但是，这将更具限制性，因为您只能使用由通用约束定义的方法或属性。它适用于需要比较值或检查相等性等的事情，但不适用于“通用数学”，因为没有可以工作的共享接口（例如理论`IArithmetic<T>`接口）。

编辑：在您的情况下，您应该能够使用受限于[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)实现的通用方法：

```
public static void ReadData<T>(string value, ref T[][] data, ref DateTime[] timeframe, ref DateTime[] date) where T : IConvertible
{ 
```

* * *

另一种选择是声明要使用的方法`dynamic`而不是特定类型：

```
dynamic SomeMethod(dynamic[] values)
{
    dynamic result = values[0];
    for (int i = 1; i < values.Length; ++i)
         result = result + values[i]; // You can use normal operators now
    return result;
} 
```

这适用于任何类型，但检查有效地转移到运行时，因为它使用动态绑定。如果你传递了一个不能正常工作的类型，你会得到运行时异常（而不是编译时检查）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:05:19.580

您可以使用[generic](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)，简单的 Swap 方法可以帮助理解如何通过重载 Swap 将不同的类型传递给 Swap 方法。

```
static void Swap<T>(ref T lhs, ref T rhs)
{
  T temp;
  temp = lhs;
  lhs = rhs;
  rhs = temp;
} 
```

你将如何调用 int

```
 int a = 2;
 int b = 3;
 Swap<int>(ref a, ref b); 
```

你将如何要求加倍

```
 double a = 2.3;
 double b = 5.7;
 Swap<double>(ref a, ref b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:26:56.370

看到您的示例，使用泛型和 a 删除大部分重复项相当容易`Func`，这是一种方法；

```
 public static void ReadDataInt(string value, out int[][] data, 
                         out DateTime[] timeframe, out DateTime[] date)
    {
        ReadData(value, out data, out timeframe, out date, Convert.ToInt32);
    }

    public static void ReadDataDouble(string value, out double[][] data, 
                         out DateTime[] timeframe, out DateTime[] date)
    {
        ReadData(value, out data, out timeframe, out date, Convert.ToDouble);
    }

    private static void ReadData<T>(string value, out T[][] data, 
                          out DateTime[] timeframe, out DateTime[] date, 
                          Func<string, T> converter)
    {
        ...your method goes here with some very minor changes below.

        // Generic instead of int/double
        data = new T[temp.Length - 1][];         
        ...
        // Generic instead of int/double
        data[i - 1] = new T[temp[i].Length - 1];
        ...
        // Use a func instead of the hard coded Convert.
        if (temp[i][j].Length > 0)
            data[i - 1][j - 1] = converter(temp[i][j]); 
```

当然，您可能还可以进行更多重构，但这应该可以解决几乎相同方法的具体问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:16:13.637

您可以使用泛型，将数组转换为列表，然后创建一个泛型方法来处理您的数据，如下所示：

```
 int[] ints = {1, 2, 3 };
    List<int> listInts = ints.ToList();

    MyMethod<int>(listInts);

    private static void MyMethod<T>(List<T> genericList)
    {
        // do you work
    } 
```

# vector - Box2d 比较碰撞

> ID：12607737
> 
> 赞同：0
> 
> 时间：2012-09-26T18:03:30.860
> 
> 标签：vector, box2d, collision

在我的应用程序中，当两个物体发生碰撞时，我必须根据它们的碰撞速度和碰撞容差来决定是否损坏一个物体。物体可以从任何方向碰撞。我对向量操作的了解很少。我不知道如何设置公差，然后比较它们的速度和公差。任何人都可以提供有关设置容差并进行比较的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:20:14.267

最简单的方法是取它们的速度之间的差异，例如。

```
b2Vec2 velDiff = body1->GetLinearVelocity() - body2->GetLinearVelocity();
float collisionSpeed = velDiff.Length(); 
```

您可能还需要考虑相关物体的质量，因为较重的物体之间的碰撞会产生更多的能量。

对于像圆形或盒子这样的简单形状，这通常就足够了，尤其是当它们直接碰撞时。对于更长的薄形状，或者物体在远离质心的一点碰撞，或者它们显着旋转的地方，你可能会发现它是不准确的。

一种更准确的方法是检查 Box2D 计算出的将物体分开的碰撞反应脉冲的大小。您可以通过在碰撞回调中实现 PostSolve 函数并查看 normalImpulse 组件的大小来发现这一点。

# sql-server - 在 SSIS 中导入 Excel 工作表迫使我至少保留一张工作表

> ID：12607742
> 
> 赞同：2
> 
> 时间：2012-09-26T18:03:48.253
> 
> 标签：sql-server, sql-server-2008, ssis

当我构建一个 SSIS 包以通过迭代将 Excel 电子表格导入文件夹中时，似乎我必须至少保留一个 Excel 电子表格来保留 Excel 源数据流项。

Foreach 循环容器迭代器找到适合数据流项知道的架构的新电子表格并不重要，包根本不会在 Visual Studio 中编译。

我目前发现自己保留了一个名为“KeepMe.xlsx”的文件，并使用 C# 脚本将要导入的正确 Excel 工作表列表（意味着除了 KeepMe.xlsx 之外的所有工作表）作为变量枚举器传递给 Foreach 循环容器。

我怎样才能绕过这个艰苦的步骤并将传入的文件夹保持为空，而不会在运行包时遇到任何问题？

这也只是一个编译器问题，这意味着一旦部署了包，它就不会抛出相同的异常？据我记得，SSIS 包总是在执行时进行验证，或者这可以被覆盖吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:47:41.497

在“连接管理器”窗格中，选择您的 Excel 连接。然后在“属性”窗格中，将 DelayValidation 属性更改为 True。

如果您需要修改内部数据流，您可能仍需要一个示例文件来指向。我只是通过编辑变量值并将其用于我的连接字符串来设置它。

# sql - T-SQL 按 LastUpdateDateTime 选择顶级类别

> ID：12607743
> 
> 赞同：0
> 
> 时间：2012-09-26T18:03:49.800
> 
> 标签：sql, sql-server, tsql

我想要一种更优雅的方式来按 LastUpdatedDateTime 降序选择下表中的顶级类别。基本上我只想按 CategoryID 查看每个 Category 的最新单行。

我可以通过执行以下操作来实现...

```
SELECT Category,
   MAX(LastUpdateDateTime) as LastUpdateDateTime
INTO #t
FROM Settings
WHERE CatalogID = 123
GROUP BY Category
ORDER BY Category

SELECT s.*
FROM Settings s
INNER JOIN #t t
ON s.Category = t.Category
AND s.LastUpdateDateTime = t.LastUpdateDateTime 
```

--> 设置表

```
CREATE TABLE [dbo].[Settings](
[ID] [int] IDENTITY(1,1) NOT NULL,
[CatalogID] [int] NOT NULL,
[Category] [varchar](50) NOT NULL,
[Facings] [bit] NOT NULL,
[Quantity] [bit] NOT NULL,
[LastUpdateDateTime] [datetime] NOT NULL,
 CONSTRAINT [PK_Settings_1] PRIMARY KEY CLUSTERED 
 (
[ID] ASC,
[CatalogID] ASC,
[Category] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

这很简单，只是找人为我指出正确的方向，以便更有效地做到这一点。我有什么工作。我想重构一下。

感谢您的关注。

-B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:08:20.363

子查询怎么样：

```
select s1.*
from settings s1
inner join
(
  select category, max(LastUpdateDateTime) as LastUpdateDateTime
  from settings
  where catalogid = 123
  group by category
) s2
  on s1.category = s2.category
  and s1.LastUpdateDateTime = s2.LastUpdateDateTime 
```

甚至使用 CTE：

```
;with cte as
(
  select *, 
    row_number() over(partition by catalogid 
                      order by LastUpdateDateTime desc) rn
  from settings
  where catalogid = 123
)
select *
from cte
where rn = 1 
```

# html - 渲染html文档

> ID：12607752
> 
> 赞同：2
> 
> 时间：2012-09-26T18:04:10.750
> 
> 标签：html, browser, document

我有页面的 html 源代码，我需要对这些页面在浏览器中的外观进行屏幕截图。

我不想使用 .net 类 WebBrowser 或 WebKit，因为它们正在处理用户事件并且使用它们真的很慢。我需要能够并行可视化 100 个不同的 html 文档。

任何人都可以推荐方法吗？

问候沃伊切赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:32:26.197

您可以在浏览器中打开 html 源代码，例如在创建截图的服务器上，如下所示：

```
Process.Start("IExplore.exe", "C:\\myPath\\myFile.htm"); 
```

然后你可以创建一个截图，例如在这篇文章的帮助下：[捕获活动窗口的截图？](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)

之后，您可以将图像保存或流式传输到您喜欢的任何地方。希望这可以帮助 ：）

干杯!

# android - 显示具有自动调整的初始屏幕图像

> ID：12607756
> 
> 赞同：29
> 
> 时间：2012-09-26T18:04:25.030
> 
> 标签：android, xamarin.android, splash-screen, aspect-ratio

我正在使用以下样式显示用 MonoDroid 编写的 android 应用程序的启动画面。但是，它似乎会获取图像并将其最大化以适应整个屏幕，同时弄乱纵横比。因此，图像看起来巨大而可怕。

有没有办法让它最大化，但保持纵横比仍然看起来不错？

```
<style name="Theme.Splash" parent="android:Theme">
  <item name="android:windowBackground">@drawable/splashscreenimage</item>
  <item name="android:windowNoTitle">true</item>
</style> 
```

这是 C# 中的活动，它创建启动屏幕并进入登录。

```
 [Activity(MainLauncher = true, Theme = "@style/Theme.Splash", NoHistory = true)]
  public class SplashScreenActivity : Activity
  {
    protected override void OnCreate(Bundle bundle)
    {
      base.OnCreate(bundle);

      // Start our real activity
      StartActivity(typeof(LoginActivity));
    }
  } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T22:39:25.437

Android 中有几种类型的可绘制对象，包括实际位图、九个补丁和 XML 文件。尝试使用 XML 文件包装您的图像文件，该文件为其提供属性，然后将 XML 文件用作可绘制文件而不是源图像。

假设您的 xml 文件名为 scaled_background，而您的原始图像只是 background.png：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:gravity="center"
android:src="@drawable/background" /> 
```

与其将背景设置为引用`@drawable/background`，不如将其设置为引用 XML 文件：`@drawable/scaled_background`在本例中。[Drawable 文档](http://developer.android.com/guide/topics/resources/drawable-resource.html)中提到了缩放模式的详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-11T21:02:32.823

> 它似乎会拍摄图像并将其最大化以适应整个屏幕，同时弄乱纵横比。因此，图像看起来巨大而可怕。
> 
> 有没有办法让它最大化，但保持纵横比仍然看起来不错？

图像被放大的原因是因为您使用的图像的**像素**高于您正在测试应用程序的设备屏幕的分辨率。为了解决这个问题，最好的方法是为**不同的设备屏幕**创建适当大小（像素）的图像然后将它们相应地放入**可绘制**文件（drawable-ldpi、drawable-mdpi、drawable-hdpi 等）中。

以下是 Google 提供的各种显示器的*最小屏幕尺寸*列表（均以像素为单位）：-

* * *

适用于**Android 移动设备**

LDPI- 426 x 320

MDPI- 470 x 320

HDPI- 640 x 480

XHDPI- 960 x 720

* * *

适用于**Android 平板设备**

LDPI- 200 x 320

MDPI- 320 x 480

HDPI- 480 x 800

XHDPI- 720 x 1280

* * *

现在在 res/drawable 中创建一个**XML drawable**，它将在主题（Theme.Splash）中**使用**`layer-list`. 图像被加载`<bitmap>`并使用*重力属性***居中**对齐。

 *```
<!-- background_splash.xml -->
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:drawable="@color/gray"/>

    <item>
        <bitmap
            android:gravity="center"
            android:src="@drawable/splashscreenimage"/>
    </item>

</layer-list> 
```

现在修改您的**样式** ***(Theme.Splash)***并将*background_splash.xml*设置为主题中启动活动的*背景*。

```
<style name="Theme.Splash" parent="android:Theme">
    <item name="android:windowBackground">@drawable/background_splash.xml</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

* * *

这样，图像应设置在中心并保持纵横比。

**注意：**对于图像大小调整，您可以使用 Adob​​e Photoshop（我发现它更容易使用）。必须进行一些试验才能获得所需的启动画面的正确图像尺寸。

According to preference, you may also use **9 Patch image** so that the image's border can stretch to fit the size of the screen without affecting the static area of the image.

* * *

***Reference Links :***

*Building Splash Screen:* [https://plus.google.com/+AndroidDevelopers/posts/Z1Wwainpjhd](https://plus.google.com/+AndroidDevelopers/posts/Z1Wwainpjhd)

*Splash Screen Image sizes:* [android splash screen sizes for ldpi,mdpi, hdpi, xhdpi displays ? - eg : 1024X768 pixels for ldpi](https://stackoverflow.com/q/13487124/7550472)*

# qt - Qt ENUMS - setProperty 隐式转换

> ID：12607760
> 
> 赞同：2
> 
> 时间：2012-09-26T18:04:31.373
> 
> 标签：qt, properties, enums, metaclass

考虑以下类：

```
class foo : public QObject {
  Q_OBJECT 
  Q_ENUMS(E)
  Q_PROPERTY(E x READ x WRITE setx)

  public:
    enum E {
      a = 0,
      b = 1,
      c = 2
    };
}

foo f; 
f->setProperty("x", 2); 
```

不向 setx 提供映射的枚举值。

有没有办法启用这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:59:18.927

您仍然需要实际的 get 和 set 方法：

```
class Foo : public QObject {
  Q_OBJECT
  Q_ENUMS(E)
  Q_PROPERTY(E x READ x WRITE set_x)

  public:
    enum E {
      a = 0,
      b = 1,
      c = 2
    };

    E x() const { return x_; }
    void set_x(E value) { x_ = value; }

private:
    E x_;
}; 
```

这现在可以工作了：

```
int main (int argc, char **argv) {
  QCoreApplication app(argc, argv);

  Foo f;

  f.setProperty("x", Foo::c);
  std::cout << f.property("x").toInt() << std::endl;  // 2

  f.setProperty("x", 0);  // Foo:a will also work
  std::cout << f.property("x").toInt() << std::endl; // 0
} 
```

# jquery - Instagram API：未捕获的类型错误

> ID：12607764
> 
> 赞同：0
> 
> 时间：2012-09-26T18:04:38.067
> 
> 标签：jquery, api, instagram

尽管我真的不知道为什么，但我收到以下错误：未捕获的类型错误：无法读取未定义的属性“id”

这是引发错误的代码块：

```
//get elseCount
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "https://api.instagram.com/v1/tags/crookedspaces/media/recent/?count=100&access_token=MYTOKEN",
    success: function(data) {
        confirm("Else Count running");
        for (var e = 0; e < imageCount; e++) {
            var igUID = data.data[e].user.id;
            if(igUID !== "16741082") {
                //confirm("Else count: " + elseCount + ".");
                //console.log("Else portion of code ran " + elseCount + " time(s).");
                ++elseCount;
            }
        }
        console.log("Else count:" + elseCount + ".");                
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:07:15.993

看起来您没有正确读取您的 json 对象..

**console.log(data)**是什么样的？

看起来你必须像这样读取数据

```
data.data[0].user.id   // To access the first item in the array 
```

如果您想使用用户的任何其他 id，则将 1 替换为该索引..

要迭代和使用这些值，您可以在 daata.data 上使用 $.each 循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:21:49.227

它正在从不同的用户那里获取数据

所以使用这个 data.data[0].user.id

如果你愿意，你可以将索引放在一个循环中，但首先尝试上面它应该可以工作。

也将 Replace for (var e = 0; e < imageCount; e++) 替换为

```
for (var e = 0; e < data.data.length; e++) 
```

# java - Spring 应用程序最简单的 main() 方法是什么？

> ID：12607766
> 
> 赞同：2
> 
> 时间：2012-09-26T18:04:49.627
> 
> 标签：java, spring, main

我写了以下内容，但它立即退出：

```
public static void main(String[] args) {
    new ClassPathXmlApplicationContext("/springtests/test01.xml");
} 
```

`test01.xml`包含多个带有一些线程（守护进程）的 bean，这些线程（守护进程）连接到网络等。

怎么等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:09:20.050

您所做的只是在这里创建一个对象。您需要检索 bean，然后使用它们。例如

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("/springtests/test01.xml");
MyClass myObj= MyClass.class.cast(ctx.getBean("myBeanName"));         
myObj.doStuff(); 
```

如果您需要更多帮助，请发布 test01.xml 中的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:20:12.083

尽管我同意其他答案中的大多数建议，但我认为您的主要方法是可以的。您唯一需要更改的是至少使您的一个工作线程成为非守护程序。

来自 Thread.setDaemon Java 文档：

> 当唯一运行的线程都是守护线程时，Java 虚拟机退出。

还要确保在 bean 的 init 方法（或 afterPropertiesSet）期间启动所有线程，并且不需要启动 bean（实现生命周期接口）。您对所有 bean 进行编码的方式将被初始化但不会启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:23:05.313

> 怎么等？

我使用了类似以下模式的东西。我的`Main`线程启动上下文，然后等待其他人调用`Main.shutdownLatch.countDown()`命令告诉它关闭上下文并退出。我通常使用 JMX 命令来执行此操作。

```
public static CountDownLatch shutdownLatch = new CountDownLatch(1);
public static void main(String[] args) {
    ApplicationContext context =
       new ClassPathXmlApplicationContext("/springtests/test01.xml");
    try {
        shutdownLatch.await();
    } finally {
        context.close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:09:28.623

你可以调用`context.registerShutdownHook()`确保[applicationContext中的beans被正确关闭](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-shutdown)，但是如果applicationContext只启动守护线程，你仍然需要确保主线程不退出。

一个更好的策略是`main()`从它可以调用的上下文中检索一些 bean `bean.startApp()`，以启动事情 - 或者至少有一个在上下文中启动的线程是非守护程序的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T13:23:22.250

你可以让你的bean实现，`ApplicationListener<ContextStartedEvent>`即：

```
@Override
public final void onApplicationEvent(ContextStartedEvent event) {... 
```

也许还有`ExitCodeGenerator`：

```
@Override
public int getExitCode() { 
```

那么你的主要方法可能是：

```
public static void main(String[] args) {
    try (ConfigurableApplicationContext context = SpringApplication.run(AppConfig.class, args)) {
        context.start();
        System.exit(SpringApplication.exit(context));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-11T23:45:15.290

初始化弹簧上下文后，请在单独的线程中执行逻辑。随着新线程的启动，可以等待一个条件，主线程将完成，而您的逻辑仍在另一个线程中运行。该线程可以通过 JMX 更新变量值来停止。

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("/springtests/test01.xml");
MyClass myObj= MyClass.class.cast(ctx.getBean("myBeanName"));  

ExecutorService executor= Executors.newSingleThreadExecutor();
        executor.submit(new Runnable() {

            @Override
            public void run() {
//Update the value of this variable via jmx
while(<SomeAtomicBooleanValueCheck>)
{
                myObj.doStuff();
}
                            }
        }) 
```

# java - 当 JS 验证返回 true 时将表单值传递给 java 类

> ID：12607767
> 
> 赞同：0
> 
> 时间：2012-09-26T18:04:50.253
> 
> 标签：java, javascript, html, jsp

我想知道当 JavaScript 表单验证返回 true 时，如何将表单值从 jsp 页面中的 html 传递到 Java 类。

HTML 代码：

```
<form id="loginForm" onsubmit="return loginValidation()>
 <p class="error" id="liusrError"></p>
 <label for="usr">Username :</label>
 <br /> 
 <input type="text" name="liusr" id="liusr"> 
 <br />
 <p class="error" id="lipwdError"></p>
 <label for="pwd">Password :</label> <br /> 
 <input type="password" name="lipwd" id="lipwd">
 <br /> 
 <a id="fgtpwd" href="url">Forgot your password?</a> 
 <br /> 
 <input type="submit" value="Log In" id="logIn">
</form> 
```

JavaScript：

```
function loginValidation(){
 var pwd = document.getElementById("lipwd").value;
 var usr = document.getElementById("liusr").value;
 var error = false;

 if(pwd == null || pwd == ""){
  document.getElementById("lipwdError").innerHTML = "Please enter a valid password";
  error = true;
 }else{
  document.getElementById("lipwdError").innerHTML = " ";
 }

 if(usr == null || usr==""){
  document.getElementById("liusrError").innerHTML = "Please enter a valid username";
  error = true;
 }else{
  document.getElementById("liusrError").innerHTML = " ";
 }

 return error;
} 
```

编辑：

我想知道如何使用它`<% if ( request.getParameter("liusr") != null ) { %>`来将表单中输入的值发送到我的 Java 类，只有当 JavaScript 函数`loginValidation`返回 true 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:19:15.017

验证完成后，您可能希望将其`<form>`实际内容发布到 URL：

```
<form id="loginForm" onsubmit="return loginValidation()" 
    method="POST" action="/login"> 
```

然后你的 Java 类应该被映射来处理 POST 请求`/login`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:07:47.243

如果您希望您的表单提交行为取决于您自己的功能，您必须使用：

```
onsubmit="return yourfunction()" 
```

当您使用 onsubmit="yourfunction" 时，它不会影响默认行为，因为您的函数返回一个值，但在这种情况下 onsubmit 并不关心它:)

所以你的代码应该是这样的：

```
<form id="loginForm" onsubmit="return loginValidation()> 
```

# shell - 使用 awk 的最长行

> ID：12607776
> 
> 赞同：4
> 
> 时间：2012-09-26T18:05:18.940
> 
> 标签：shell, unix, awk

有人可以显示，如何使用 awk 命令来识别文本文件中最长的行。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T19:47:01.023

要打印最长的行：

```
awk 'length > m { m = length; a = $0 } END { print a }' input-file 
```

简单地按行号识别最长的行：

```
awk 'length > m { m = length; a = NR } END { print a }' input-file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:08:35.573

```
awk '{ if (length($0) > longest) longest = length($0); } END { print longest }' 
```

# asp.net-mvc-4 - MVC4 和“没有为此对象定义的无参数构造函数”。使用 Unity 注入依赖项时出错？

> ID：12607783
> 
> 赞同：1
> 
> 时间：2012-09-26T18:05:59.600
> 
> 标签：asp.net-mvc-4, unity-container, visual-studio-2012

我不知道为什么 Unity 没有注入，或者某些东西忽略了我在构造函数中有参数的事实。我看到了这篇[文章](https://stackoverflow.com/questions/12311479/asp-net-mvc-4-ninject-mvc-3-no-parameterless-constructor-defined-for-this-ob)，但它更多地谈论了 NinJect，但让我相信 Unity 和 Vs2012 可能存在类似的问题。我知道 Unity 正在工作，因为在我的 Application_Start 代码中，在我的统一注册之后，我从统一解析一个接口并取回所有需要的对象。我只是不知道为什么我的控制器的带参数的构造函数被忽略了。我也用统一注册控制器。当我尝试点击那个控制器时，我得到了`No parameterless constructor defined for this object.`错误。

我很好奇是否有其他人遇到过同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:33:12.927

我必须向[Steven](https://stackoverflow.com/users/264697/steven)提供道具，因为他引导我朝着正确的方向前进，但基本上，我使用一种方法将我的解析器注册到[ApiController](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)，而不是使用 SetResolver 方法将它注册到标准控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T21:03:17.460

我有同样的问题。我已经安装了 Unity，然后是 Unity.Mvc4。我卸载了所有与 Unity 相关的东西，只重新安装了 Unity.Mvc4，一切都像宣传的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T07:56:16.897

对于 Unity 中的此错误，请转到 Global.asax 并编写以下代码。初始化引导程序。

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        Bootstrapper.Initialise();

    } 
```

# jquery - jquery 倒计时极地时钟在 IE9 或 8 中不起作用

> ID：12607786
> 
> 赞同：0
> 
> 时间：2012-09-26T18:06:02.457
> 
> 标签：jquery, internet-explorer-9, countdown

我正在使用一个 jquery 倒数计时器，它可以在任何地方工作，即使在 IE7 中，但在 IE9 或 IE8 中却不行。我一直在绞尽脑汁，无法弄清楚问题所在。应该旋转的 div 不是，是我的猜测，但我不明白为什么它会在所有地方的 IE7 中工作，但不是 IE9。如果给定时间单位的剩余时间超过一半，则显示绿色圆圈的一半，如果少于一半，则消失并仅留下灰色背景。

您可以在此处查看测试页面：http: [//tiffanyisrael.com/construction/](http://tiffanyisrael.com/construction/)

我还设置了一个 jsfiddle：http: [//jsfiddle.net/Cx2ut/1/](http://jsfiddle.net/Cx2ut/1/)

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:25:30.367

好吧，我想通了 IE9，现在我必须想通 IE8 :(

`else if(element.css('ms-transform')!==undefined) element.css('ms-transform',rotate);` 这会在元素中查找 ms-transform 并将其与旋转角度相加，ms-transform 是 IE9 旋转元素的方式

这是更新jsfiddle：http: [//jsfiddle.net/Cx2ut/3/](http://jsfiddle.net/Cx2ut/3/)

一个 IE8 修复有望很快到来！

# django - django - request.POST 丢失？

> ID：12607787
> 
> 赞同：0
> 
> 时间：2012-09-26T18:06:08.223
> 
> 标签：django, django-forms

所以我在这个答案中看到：

```
http://stackoverflow.com/a/11072057/1061426 
```

有人说：

> 更改此行：
> 
> ```
> form = StatementForm(request.POST, initial={'time': d.strftime("%Y-%m-%d %H:%M:%S"), 'user':loggedin_user, 'views':0}) 
> ```
> 
> 为了这：
> 
> ```
> form = StatementForm(initial={'time': d.strftime("%Y-%m-%d %H:%M:%S"),'user':loggedin_user, 'views':0}) 
> ```

包含 request.POST 和不包含有什么区别？或者，更重要的是 - 如果值 X*未*在 request.POST 中设置，但*包含*在初始数组中，那么 is_valid() 方法会看到 X 的什么值？

编辑：我想我要问的是〜在上面优先吗？如果添加了 request.POST 和初始值，初始值是否会覆盖 request.POST 值？是否可以覆盖“空”值？
（在我涉及的问题中，当方法是 get 时，作者错误地使用 request.POST 为 StatementForm 播种，这给他带来了问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:15:25.923

`initial` is an argument used to set the initial value of the form at runtime.

Now, `request.POST` is used to bind a form to post data. For example, while submitting a form from browser using `POST` all the relevant fields would be assigned to the `form` object that it can find in `request.POST`

If X is not set in the form, the value is taken from the initial, if present.

You can read up about [initial here](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

# asp.net-mvc - 在同一个解决方案上拥有两个相关的 MVC 项目是否正确？

> ID：12607790
> 
> 赞同：1
> 
> 时间：2012-09-26T18:06:22.687
> 
> 标签：asp.net-mvc, visual-studio, projects-and-solutions

我在 Visual Studio 以及项目和解决方案管理方面没有经验，所以如果我的方向正确或完全偏离基础，我想请你指导。

我即将开始开发两个将使用相同业务层的 ASP.NET MVC 应用程序：**Site1**是一个巨大的 Intranet 站点，**Site2**是一个基于身份验证的网站，我们公司的客户可以在其中访问一些信息。**Site2将公开****Site1**功能的一小部分，并将具有非常不同的布局。

经过一番思考，我以这种方式构建了我的解决方案：

**公司**（解决方案）

*   **Company.Core：**实体、存储库、服务
*   **Company.Core.Tests**
*   **Company.MVC1：**内网，引用Company.Core
*   **Company.MVC2：**客户网站，参考 Company.Core

我以这种方式组织我的项目是正确的还是我应该做不同的事情？我愿意接受建议...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:10:27.767

如果您正在使用 ASP.NET MVC 2 或更高版本，您可以更喜欢将小型项目的[区域](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)用作大型项目的一部分。

Areas 提供了将您的大型项目变成项目的小分区的方法，该分区为`views`每个Area 提供......`model``controller`

我个人觉得它在大型项目中非常有用.....

# css - 背景图像在重复时清晰，否则模糊

> ID：12607791
> 
> 赞同：0
> 
> 时间：2012-09-26T18:06:23.743
> 
> 标签：css, image, background

[小提琴](http://jsfiddle.net/kCBDH/2/)_

我有 3 个背景图像，它们都是 10 像素高和 181 像素宽。在一个 181px 宽和可变高度的元素内部，我将图像 1 放在元素的顶部，将图像 2 放在元素的底部，并且图像 3 一直向下重复。这是代码：

```
#sidemenu li a.currentpage {
    background:     url(images/sm-urhere_top.png) no-repeat center top,
            url(images/sm-urhere_bottom.png) no-repeat center bottom,
            url(images/sm-urhere_bg.png) repeat-y center top;
    } 
```

sm-urhere_top.png 和 sm-urhere_bottom.png 都有些模糊（我有点喜欢这种效果），但 images/sm-urhere_bg.png 很清晰。其实如果我把sm-urhere_top.png或者sm-urhere_bottom.png换成sm-urhere_bg.png，只有不重复的时候才会模糊。我使用相同的程序制作了所有三张图像，它们的大小相同，并且我以相同的压缩方式保存了它们。是什么赋予了？

编辑：它似乎只发生在 Chrome 中，而不是在 Firefox 中。chrome是否有理由仅在不重复的情况下才会模糊图像？有没有办法模糊 chrome 中的重复图像？

提前致谢。

这是元素的 HTML：

```
`<ul class="normal">`
`    <li><a href="#" title="This is the description." class="currentpage">Current Page</a></li>`
`</ul>` 
```

好吧，我想我想通了 - 有点。顶部和底部图像具有圆角。出于某种原因，chrome 会看到角落的细节并模糊图像以使其看起来更好。为了解决这个问题，我在中间图像中添加了一些离散的细节，瞧。

仍然不明白为什么如果不重复，chrome 会模糊同一图像。但是它就是这样啊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T16:03:55.890

我遇到了同样的问题，这让我疯狂了 1 个小时……谷歌只指出了效果……而不是错误 :)

因此，为了将来参考，它似乎只有在放大某些 png 背景（如菜单或按钮的角）时才会变得模糊难看，即使在 110% 时也是如此。

我看不出这有什么意义，但这对我来说是个问题。

# c# - 计算 Windows 中特定进程的上下文切换

> ID：12607795
> 
> 赞同：1
> 
> 时间：2012-09-26T18:06:30.920
> 
> 标签：c#, c++, windows, process, cpu

我想做的是编写一个小程序，它可以持续计算特定进程在足够小的时间单位内经历的上下文切换的数量。我在“Process Explorer”软件中观察到了这个功能，所以我知道这绝对是可能的。

不幸的是，我对如何开始编写代码知之甚少，并且到目前为止还无法在网上找到任何有用的代码片段。因此，一个实现每个进程和每单位时间实时上下文切换计数的小型工作示例对我来说将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:22:03.783

这是一种方法 - 这将每秒打印记事本的线程 0 使用的上下文切换的数量（您可以在 CounterPathBuffer 初始化中替换您想要的任何进程和线程号）：

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <stdio.h>
#include <conio.h>
#include <pdh.h>
#include <pdhmsg.h>

#pragma comment(lib, "pdh.lib")
using namespace std;
CONST ULONG SAMPLE_INTERVAL_MS    = 1000;
CONST PWSTR BROWSE_DIALOG_CAPTION = L"Select a counter to monitor.";

void wmain(void)
{
    PDH_STATUS Status;
    HQUERY Query = NULL;
    HCOUNTER Counter;
    PDH_FMT_COUNTERVALUE DisplayValue;
    DWORD CounterType;
    SYSTEMTIME SampleTime;
    PDH_BROWSE_DLG_CONFIG BrowseDlgData;
    WCHAR CounterPathBuffer[PDH_MAX_COUNTER_PATH] = L"\\\\ComputerNameGoesHere\\Thread(notepad/0)\\Context Switches/sec";

    //
    // Create a query.
    //

    Status = PdhOpenQuery(NULL, NULL, &Query);
    if (Status != ERROR_SUCCESS) 
    {
       wprintf(L"\nPdhOpenQuery failed with status 0x%x.", Status);
       goto Cleanup;
    }

    //
    // Initialize the browser dialog window settings.
    //

    ZeroMemory(&BrowseDlgData, sizeof(PDH_BROWSE_DLG_CONFIG));

    BrowseDlgData.bIncludeInstanceIndex = FALSE;
    BrowseDlgData.bSingleCounterPerAdd = TRUE;
    BrowseDlgData.bSingleCounterPerDialog = TRUE;
    BrowseDlgData.bLocalCountersOnly = FALSE;
    BrowseDlgData.bWildCardInstances = TRUE;
    BrowseDlgData.bHideDetailBox = TRUE;
    BrowseDlgData.bInitializePath = FALSE;
    BrowseDlgData.bDisableMachineSelection = FALSE;
    BrowseDlgData.bIncludeCostlyObjects = FALSE;
    BrowseDlgData.bShowObjectBrowser = FALSE;
    BrowseDlgData.hWndOwner = NULL;
    BrowseDlgData.szReturnPathBuffer = CounterPathBuffer;
    BrowseDlgData.cchReturnPathLength = PDH_MAX_COUNTER_PATH;
    BrowseDlgData.pCallBack = NULL;
    BrowseDlgData.dwCallBackArg = 0;
    BrowseDlgData.CallBackStatus = ERROR_SUCCESS;
    BrowseDlgData.dwDefaultDetailLevel = PERF_DETAIL_WIZARD;
    BrowseDlgData.szDialogBoxCaption = BROWSE_DIALOG_CAPTION;

    //
    // Add the selected counter to the query.
    //

    Status = PdhAddCounter(Query, CounterPathBuffer, 0, &Counter);
    if (Status != ERROR_SUCCESS) 
    {
        wprintf(L"\nPdhAddCounter failed with status 0x%x.", Status);
        goto Cleanup;
    }

    //
    // Most counters require two sample values to display a formatted value.
    // PDH stores the current sample value and the previously collected
    // sample value. This call retrieves the first value that will be used
    // by PdhGetFormattedCounterValue in the first iteration of the loop
    // Note that this value is lost if the counter does not require two
    // values to compute a displayable value.
    //

    Status = PdhCollectQueryData(Query);
    if (Status != ERROR_SUCCESS) 
    {
        wprintf(L"\nPdhCollectQueryData failed with 0x%x.\n", Status);
        goto Cleanup;
    }

    //
    // Print counter values until a key is pressed.
    //

    while (!_kbhit()) 
    {
        Sleep(SAMPLE_INTERVAL_MS);

        GetLocalTime(&SampleTime);

        Status = PdhCollectQueryData(Query);
        if (Status != ERROR_SUCCESS) 
        {
            wprintf(L"\nPdhCollectQueryData failed with status 0x%x.", Status);
        }

        wprintf(L"\n\"%2.2d/%2.2d/%4.4d %2.2d:%2.2d:%2.2d.%3.3d\"",
                SampleTime.wMonth,
                SampleTime.wDay,
                SampleTime.wYear,
                SampleTime.wHour,
                SampleTime.wMinute,
                SampleTime.wSecond,
                SampleTime.wMilliseconds);

        //
        // Compute a displayable value for the counter.
        //

        Status = PdhGetFormattedCounterValue(Counter,
                                             PDH_FMT_DOUBLE,
                                             &CounterType,
                                             &DisplayValue);
        if (Status != ERROR_SUCCESS) 
        {
            wprintf(L"\nPdhGetFormattedCounterValue failed with status 0x%x.", Status);
            goto Cleanup;
        }

        wprintf(L",\"%.20g\"", DisplayValue.doubleValue);
    }

Cleanup:

    //
    // Close the query.
    //

    if (Query) 
    {
       PdhCloseQuery(Query);
    }

    int x;
    cin >>x;
} 
```

大部分代码来自以下来源：[msdn.microsoft.com/en-us/library/aa371886%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa371886%28v=vs.85%29.aspx)。我想缩短对上下文切换的连续检查之间的时间（使其少于一秒）。如果有人对如何做到这一点有任何想法，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:43:44.503

如果您愿意，ETW（Windows 事件跟踪）将为您提供有关上下文切换的更深入的信息。代码可能比访问性能计数器要复杂得多。

初始链接：[Windows 7 中的核心操作系统事件](http://msdn.microsoft.com/en-us/magazine/ee412263.aspx)和[Windows 性能工具包技术参考](http://msdn.microsoft.com/en-us/library/hh852027.aspx)

搜索词：“ETW 上下文切换”、“xperf”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:43:31.390

在网上稍微搜索了一下，我发现了一个叫做“ [Performance Counters](http://msdn.microsoft.com/en-us/library/aa373083%28VS.85%29.aspx) ”的东西，你可以提供计数器数据，也可以使用它来消费计数器数据。就您而言，我相信您想从性能计数器中读取数据。

您可以使用注册表接口或 PDH 接口来使用性能数据。PDH 界面比注册表界面更易于使用，建议用于大多数性能数据收集任务。PDH 接口本质上是注册表接口提供的功能的更高级别抽象。

[这是 Microsoft 关于Monitoring Context Switches](http://technet.microsoft.com/en-us/library/cc938606.aspx)的另一篇文章。

# templates - cms 添加我自己的风格

> ID：12607797
> 
> 赞同：0
> 
> 时间：2012-09-26T18:06:41.907
> 
> 标签：templates, content-management-system, cmsmadesimple

我有一个可用于移动设备的网站（目前，但我会在未来寻找 PC），可以[通过点击这里找到](http://m.xclo.co.uk)

现在。这个想法是我想要的，但是在添加新促销时有点烦人，因为我目前正在手动编辑页面。

我知道 CMS 并尝试过其中一些，但每次我进入管理面板时，都会要求我选择一个新模板（joomla 1.5、wordpress、concrete5 exe）。

我怎样才能拥有它，以便我可以使用我当前的布局作为模板并从那里配置它？

我目前安装了简单的 cms。

多谢。

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:54:08.930

在您的 CMS Made Simple 管理区域：转到布局、模板。

选择添加新模板。系统将向您展示一个非常基本的标准 HTML 布局，其中包含基本的 CMSMS 标签，例如站点名称为 {sitename}。

编辑显示的 HTML，使其与您的布局相匹配。

为模板命名。按提交。

在“布局，模板”屏幕中，单击“默认”列下的勾号，这将使您的模板成为所有页面的默认模板。

转到布局、样式表并选择添加样式表。添加名称并粘贴到您的 CSS 中。按提交。

返回布局，模板屏幕，单击模板的附加样式表按钮。从下拉列表中选择您刚刚创建的新样式表，然后单击“添加样式表”。

确保您至少有一个页面（在内容、页面中）并查看您的站点。

# ios - UIImageView 不遵循设备方向

> ID：12607807
> 
> 赞同：0
> 
> 时间：2012-09-26T18:07:23.157
> 
> 标签：ios, uiimageview, uiinterfaceorientation

我有一个带有几个子视图的滚动视图。子视图定义如下：

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGRect rect = imageView.frame;
rect.size.height = screenRect.size.height;
rect.size.width = screenRect.size.width;
imageView.frame = screenRect;
[scrollView addSubview:imageView]; 
```

这工作正常，直到我将界面方向更改为横向。imageView 仍处于纵向模式，将图像切成两半。我应该怎么做才能将纵向高度和宽度更改为横向高度和宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:21:52.420

在您的代码中添加这一行并检查：

```
[imageView setAutoresizesSubviews:YES];
[imageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

[imageView setAutoresizesSubviews:YES];
[imageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; 
```

也检查这个[链接](http://userflex.wordpress.com/2011/09/22/autoresize-uiview-orientation/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:08:57.940

几个想法：

1.  而不是`[[UIScreen mainScreen] bounds]`，我使用`self.view.bounds`. 这 (a) 将排除状态栏、导航栏等内容；(b) 旋转时，宽度和高度会自动更新以反映新的尺寸。

2.  如果您希望为您调整图像视图的大小，通常将其设置`autoresizingMask`为`UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleWidth`.

3.  您可能想要检查您的图像视图`contentMode`并将其设置为类似这样的东西，`UIViewContentModeScaleAspectFit`以便始终显示您的整个图像。这样，如果您有肖像图像，它将始终以纵向显示而不会失真，不会被截断。

4.  如果您不喜欢旋转设备时图像视图本身已被调整为横向的事实，您可以`viewWillLayoutSubviews`在 iOS5 中重置其框架（在 iOS4 中，使用`willAnimateRotationToInterfaceOrientation`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:12:14.333

您需要监听 UIDeviceOrientationDidChangeNotification

在这里阅读更多相关信息：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

检测到更改后，再次调用相同的代码。

# php - 在 Wordpress 中输出 3 个最新帖子

> ID：12607811
> 
> 赞同：0
> 
> 时间：2012-09-26T18:07:47.977
> 
> 标签：php, wordpress

我想知道是否有人新如何在 Wordpress 中显示 3 个最新帖子？任何帮助将非常感激。

只是帖子的缩略图输出3次怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:12:22.403

WordPress 有一个内置功能来获取最近的帖子。

```
wp_get_recent_posts( $args ) ; 
```

`$args`是您需要传递的参数。要获取最近发布的三个帖子，您可以这样做：

```
$args = array('numberposts' => 3, 'post_status' => 'publish');
$recent_posts = wp_get_recent_posts( $args ) ;

print_r($recent_posts); 
```

[您可以在此链接wp_get_recent_posts](http://codex.wordpress.org/Function_Reference/wp_get_recent_posts)上获取更多信息

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:16:46.017

您可以使用[query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

例如，在主页上，您通常会看到最新的 10 个帖子。如果您只想显示 3 个帖子（并且不关心分页），您可以像这样使用 query_posts()：

query_posts('posts_per_page=3');

希望这有帮助！

# facebook - 电子邮件许可

> ID：12607813
> 
> 赞同：1
> 
> 时间：2012-09-26T18:07:50.067
> 
> 标签：facebook, email, facebook-php-sdk

我正在尝试从 Facebook 帐户获取用户电子邮件。

[http://instanceof.ru/scr/2012/09/26/26.09.2012-22.05.01.png](http://instanceof.ru/scr/2012/09/26/26.09.2012-22.05.01.png) - 这是权限设置

```
 require 'facebook/src/facebook.php';
$facebook = new Facebook(array(
    'appId' => 'xxxxxxx',
    'secret' => 'xxxxxxxx',
    'cookie' => true
));
$user = $facebook->getUser();

if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        //echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
        $user = null;
    }

}

var_dump($user_profile);exit; 
```

但是输出中没有电子邮件

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:01:08.583

获取用户的电子邮件需要用户在授权中的许可。在您的授权中尝试以下操作：

```
if (!$fbUser) {
        $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => 'email',
                'redirect_uri' => 'YOUR REDIRECT URL GOES HERE'
            )
        );
        echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
        exit;
    } 
```

# android - RequestFocus 错误：KeyEvent：ACTION_UP 但键未按下

> ID：12607820
> 
> 赞同：2
> 
> 时间：2012-09-26T18:08:20.653
> 
> 标签：android

我有一些适用于 EditText 字段的代码，但是当我更改焦点时会记录此错误（根据需要更改焦点）：

```
InputEventConsistencyVerifier      KeyEvent: ACTION_UP but key was not  down 
```

有人可以解释为什么吗？

我阅读了创建此错误的 InputEventConsistencyVerifier 源，但我不明白它是如何发生的。我尝试删除 list.requestFocus()。但如果没有那条线，焦点将停留在 EditText 字段上。但是，删除该行确实消除了日志中的错误。

```
public class AddDeleteActivity extends FragmentActivity {

private final String TAG = "AddDeleteName";

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    Log.e(TAG, "about to load fragment");

    setContentView(R.layout.add_delete_child_layout);

    Log.e(TAG, "finished loading fragment");

    final EditText nameTextField = (EditText) findViewById(R.id.new_child);

    nameTextField
            .setOnEditorActionListener(new OnEditorActionListener() {

                @Override
˚               public boolean onEditorAction(TextView v, int    actionId,
                        KeyEvent event) {

                    Log.e(TAG, "onEditorAction: " + actionId);

                    String name = nameTextField.getText()
                            .toString();

                    Log.e(TAG, " name: " + name);

                    InputMethodManager inputManager = (InputMethodManager) v
                            .getContext().getSystemService(
                                    Context.INPUT_METHOD_SERVICE);
                    inputManager.hideSoftInputFromWindow(
                            v.getWindowToken(), 0);

                    Log.e(TAG, "change focus to List");
                    View list = findViewById(R.id.modchild_fragment);

 /*** FOLLOWING LINE GENERATES ERROR *****/
                    list.requestFocus();

                    return false;
                }
            });

}

} 
```

.xml：

```
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/modchild_fragment"
    android:name="com.projectx.control.AddDeleteChild"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</fragment>

<EditText
    android:id="@+id/new_child"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="enter launch codes"
    android:imeOptions="actionDone"
    android:inputType="text"
    android:singleLine="true" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:35:34.323

`list.requestFocus`首先，您可能希望使用而不是调用，`nameTextField.clearFocus`因为它更准确地传达了您正在尝试做的事情。

现在，我不知道这个特定错误的所有细节，但我的猜测是`onEditorAction`TextView 在它处理`ACTION_DOWN`或`ACTION_UP`事件消息的过程中同步调用它。调用`requestFocus`其他地方可能会破坏按键的正常事件流。同样，这只是一个猜测。

您可以做的是将您的`list.requestFocus`调用包装在一个`Runnable`中，然后使用[`Handler.post(Runnable)`](https://developer.android.com/reference/android/os/Handler.html#post(java.lang.Runnable)). 一个常见的模式是在你的 UI 类（例如片段或活动）中保存一个包含处理程序的私有字段，用于以下内容：

```
Handler mHandler = new Handler();
...
mHandler.post(...); 
```

这将使当前事件/消息完成处理并仅执行 Runnable（在这种情况下，`list.requestFocus`在处理所有其他当前发布的消息之后调用（通常只有几毫秒）。

正如我上面所说，尝试使用`clearFocus`。

# algorithm - 由 1 组成的最大矩形

> ID：12607823
> 
> 赞同：2
> 
> 时间：2012-09-26T18:08:25.637
> 
> 标签：algorithm, rectangles

> **可能重复：**
> [在 N×N 二进制矩阵中查找仅包含零的最大矩形](https://stackoverflow.com/questions/2478447/find-largest-rectangle-containing-only-zeros-in-an-nn-binary-matrix)

这是一个用 0 和 1 填充的 *m 矩阵。我需要找到由 1 组成的最大矩形。由 0 组成的最大矩形是等效的，因为我可以使用 0 而不是 1。因此在此示例中，8x8 矩阵： 最大的矩形是从 (2,0) 开始并以对角线结束于 (7,1) 的子矩阵，具有 12 个 1 .

```
10011110
10011110
11100010
11100010
11100000
11001111
11000000
11000000 
```

这不是家庭作业。这是我准备面试的问题之一。

我想出了以下解决方案。从 (0,0) 开始，对于每个元素，如果可能，尝试对角线，从而检查在两个方向上形成特定矩形的其他元素（比如对角线端是 2,2 我会检查 2,1 和 1,2对于 1s)，否则根据存在的 1s 向左或向右移动。如果矩形被扩展，则用矩形中包含的当前 1 数标记单元格。

你会怎么接近？你觉得我的解决方案怎么样？

# bash - 将每个文件移动到自己的目录中

> ID：12607828
> 
> 赞同：3
> 
> 时间：2012-09-26T18:08:39.037
> 
> 标签：bash

我正在尝试编写一个脚本，其中我在一个目录中有多个文件，但我想为每个具有特定扩展名的文件创建一个目录（目录名称中没有文件扩展名）并将每个文件移动到他们自己的目录中，然后对各自目录中的每个文件执行某些操作。我对此真的很陌生，所以就我所知，它不起作用，所以任何帮助都将不胜感激！

```
for file in *;
     do
        if  [ $file=[$.sff]] ; then
          mkdir ${$file/.sff/""/}
          mv $file ${file/.sff/""/}/
            fi
        for $file in $file/
              do { ......
            }
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:17:10.703

您不需要 if 语句或 case 语句。做就是了：

```
die() { echo "$*" >&2; exit 1; }
for file in *; do
  dir=${file%.*}
  test -d $dir || mkdir $dir  # or just mkdir -p $dir
  test -f $dir && die "$dir exists and is a file!"
  mv $file $dir
done
for dir in *; do ...; done  # Do something in each directory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:21:49.790

```
for file in *.*
do
  dir=${file%.*}
  mkdir "$dir"
  newfile=$dir/$file
  mv "$file" "$newfile"
  ... do something with "$newfile"
done 
```

# ruby-on-rails - ActiveResource 如何从具有单数名称的 REST API 中获取资源？

> ID：12607833
> 
> 赞同：9
> 
> 时间：2012-09-26T18:09:10.527
> 
> 标签：ruby-on-rails, api, rest, activeresource

我正在尝试从具有如下 API 的第三方库中获取数据：

`https://foo.com/user.json?username=<USERNAME>`

我不知道如何强制 ActiveResource 使用“user.json”而不是“users.json”。是否可以？

我让它与reactive_resources gem一起工作......有没有办法在纯ActiveResources中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T18:25:01.627

```
class User < ActiveResource::Base
  self.element_name = "user"
end 
```

接下来，您将询问如何从 URL 中获取一个看起来 ActiveResource 为 //foo.com/user.json 而不是 //foo.com/user/.json 的元素

```
User.find(:one, :from => "https://foo.com/user.json?username=#{<USERNAME>}" 
```

*编辑以回应评论*

*有没有办法做到这一点，而不必每次我想使用 find() 时都输入请求的完整 URL？*

一种方法是在类中定义一个方法来为您执行完整的 URL。

```
class User < ActiveResource::Base
  self.element_name = "user"

  def self.find_by_username(username)
    find(:one, :from => "https://foo.com/user.json?username=#{username}"
  end

  def find
    self.class.find(:one, :from => "https://foo.com/user.json?username=#{username}"
  end
end 
```

另一种方法是重新定义 element_path。

```
class User < ActiveResource::Base
  self.element_name = "user"

  def self.element_path(id, prefix_options = {}, options = {})
    "https://foo.com/user.json?username=#{prefix_options["user_id"]}"
  end
end 
```

有些人称之为猴子补丁，另一些人称之为面向对象编程。我说当你进入代码或使用 Ruby 的动态特性来改变基本行为时，它只是猴子补丁，这是在面向对象编程中做事的一种完全合法的方式。然而，Ruby 社区并没有大量使用 OOP，几乎忽略了继承，而支持更松散（且表现不佳）的混入，并且仅使用鸭子类型来实现多态性。

不得不使用 ActiveResource 来构建一个无法重新定义 Web 服务以接受 ActiveResource 约定的 URL 的问题是许多人改用 HTTParty 的原因。“*如果非要建URL，还不如用HTTParty。* ”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-25T18:58:04.690

如果您只需要摆脱 URL 中的资源名称复数形式，请覆盖`collection_name`：

```
class User < ActiveResource::Base
  self.element_name = "user"

  def self.collection_name
    element_name
  end
end 
```

# javascript - JQuery：传递带或不带大括号的回调方法给出不同的结果

> ID：12607836
> 
> 赞同：-1
> 
> 时间：2012-09-26T18:09:21.510
> 
> 标签：javascript, jquery, jquery-callback

我有来自 JQuery 的 W3Schools 示例的代码块。[在 W3Schools 上试试](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_hide_show)。我只在 hide 方法调用中添加了一个回调。

第一个案例

```
 <!DOCTYPE html> <html> <head> <script src="jquery.js"></script> <script> function sayHello(){ alert('hello sit'); }

$(document).ready(function(){   $("button").click(function(){
    $("p").hide(100,sayHello);   }); });

</script> </head> <body> <button>Hide</button> <p>This is a paragraph with little content.</p> <p>This is another small paragraph.</p> </body> </html> 
```

第二种情况是

```
 <!DOCTYPE html> <html> <head> <script src="jquery.js"></script> <script> function sayHello(){ alert('hello sit'); }

$(document).ready(function(){   $("button").click(function(){
    $("p").hide(100,sayHello());   }); });

</script> </head> <body> <button>Hide</button> <p>This is a paragraph with little content.</p> <p>This is another small paragraph.</p> </body> </html> 
```

两者的唯一区别是使用或不使用大括号传递回调函数。

在第一种情况下，单击隐藏按钮时，我会收到两次问候警报。在第二种情况下，我只收到一次你好警报。我希望警报在这两种情况下都只会出现一次，因为无论是否使用大括号调用零参数函数都无关紧要。

我想了解为什么在不带括号的情况下传递函数名称时它会调用两次回调函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:11:45.290

在第二种情况下，你传递了评估的*结果*`sayHello()`，而在第一种情况下，你传递了*实际的函数* `sayHello`。

所以因为`sayHello`显示一个警报，它会在执行后立即显示警报。在第一种情况下，它在`hide`完成时执行（作为回调），而在第二种情况下，它在您设置调用时执行`hide()`（可能在隐藏实际发生之前）。

~~不知道为什么它执行两次，但是~~ **（见下文）**不带括号的版本（版本 1）可能是您正在寻找的版本，如果您希望它执行一次`hide()`完成。

**更新：**

它显示警报两次的原因是您打`hide()`了两次电话。您有两个不同的`<p>`元素，并且`.hide()`依次为它们中的每一个被调用（并且同样依次为每个元素执行回调）。我猜如果您添加第三个`<p>`标签，它会第三次发出警报。

来自[JQuery 文档](http://api.jquery.com/hide/)：

> 如果为多个元素设置了动画，请务必注意，每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。

您可能希望将您的元素包含在父元素（如 a `<div>`）中并隐藏它而不是每个单独的`<p>`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:16:52.617

两者的称呼完全不同。第一个将函数的引用作为第二个参数传递给`hide`函数。但是，第二个调用您的`sayHello`函数并将调用结果作为第二个参数传递给`hide`函数。该`sayHello`函数在您被调用之前`hide`被调用。

# node.js - 使用 Everyauth 实现 OpenId 的示例

> ID：12607837
> 
> 赞同：1
> 
> 时间：2012-09-26T18:09:25.400
> 
> 标签：node.js, openid, passport.js, everyauth

我希望使用 Everyauth 在 Node.js 服务器上实现 OpenID，并且我正在寻找一个示例来指导我，因为我对 Javascript 和 Node 还很陌生。我知道everyauth 文档，但是，如果我可以玩一个项目/示例，我将不胜感激。

对于 Passport，我在这里找到了很好的例子：

*   [https://github.com/jaredhanson/passport-openid/tree/master/examples/signon](https://github.com/jaredhanson/passport-openid/tree/master/examples/signon)
*   [https://gist.github.com/2963889](https://gist.github.com/2963889)

但是对于 Everyauth 有什么等价的吗？

问候，

# hibernate - JPQL 和继承

> ID：12607841
> 
> 赞同：2
> 
> 时间：2012-09-26T18:09:43.800
> 
> 标签：hibernate, jpa

假设我有 3 个抽象超类`SuperA`：`SuperB`和`SuperC`. 假设这些超类中的每一个都有很多更具体的实现，并且所有超类都用`@Inheritance(strategy = InheritanceType.JOINED)`.

更详细：

*   `Aa`<-`SuperA`并且有一个`SuperB`（`bbs`属性）的列表；
*   `Bb`<-`SuperB`并且有一个`SuperC`（`ccs`属性）的列表；
*   `Cc`<-`SuperC`并且有一个`foo`属性。

然后，当我尝试如下查询时，我收到一条错误消息，指出它找不到`foo`type 中的属性`SuperC`。`Bb`有一个抽象类型的列表，我不能改变它。所以，我不知道如何使查询工作。

```
select a from Aa a left outer join a.bbs b where b.ccs.foo = :foo 
```

任何提示都会有所帮助。提前致谢。

* * *

编辑：

顺便说一句：例外：

`org.hibernate.exception.SQLGrammarException: Unknown column 'cc3_1_.foo' in 'where clause'`

* * *

编辑2：

如果我不使用 Hibernate，我会查找 JPA 文档，并找到[一些可行的方法。](http://wiki.eclipse.org/EclipseLink/Development/JPA/QueryDownCast)

* * *

编辑3：

我将其更改为使用两个 SQL。首先，我根据`foo`属性找到 C 的 id，然后我只做与 id 比较的查询。

这里的问题是，每次我想要这个时我都必须执行 2 个 SQL……但是，至少它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:39:56.303

您需要再加入一个抄送列表，然后就可以了：

```
select a from Aa a left outer join a.bbs b join b.ccs c where c.foo = :foo 
```

由于 ccs 是一个列表，因此您不能以这种方式“取消引用”它的属性，如果可以的话，您不需要连接，您可以简单地编写：`a.bbs.ccs.foo` **但事实并非如此**，因此您需要像我上面写的那样加入列表。

# updatepanel - 从 gridview 单元格更新面板触发器

> ID：12607843
> 
> 赞同：0
> 
> 时间：2012-09-26T18:09:47.160
> 
> 标签：updatepanel

当我单击 gridview 行中的按钮时，我的更新面板不会触发。th RowCommand 是错误的触发事件吗？那是在按钮图像单击时运行的代码。

```
<fieldset style="width:750px;">   
    <legend>Update Pending Registrations</legend>
        <asp:UpdatePanel ID="updtPendingUsers" runat="server">
            <ContentTemplate>
                <asp:Label ID="lblgvPending" runat="server" Visible="False"></asp:Label>
                <asp:GridView ID="gvPendingUsers" runat="server" AutoGenerateColumns="False"
                              CssClass="mGrid" DataKeyNames="userid">
                </asp:GridView>
                <asp:EntityDataSource ID="edsPendingUsers" runat="server" ConnectionString="name=enerteckEntities"
                                      DefaultContainerName="enerteckEntities" EnableFlattening="False"
                                      EntitySetName="pendingusers">
                </asp:EntityDataSource>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="gvPendingUsers" EventName="RowCommand" />
            </Triggers>       
        </asp:UpdatePanel>       
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:52:29.777

尝试设置`UpdateMode="Conditional"`和`ChildrenAsTriggers="False"`更新面板。

还要从`EventName`触发器中删除属性，然后重试。

# javascript - JavaScript 对象声明语法 - 变量名作为属性

> ID：12607845
> 
> 赞同：15
> 
> 时间：2012-09-26T18:09:54.700
> 
> 标签：javascript, object, syntax

JavaScript 为您提供了许多声明对象的方法。当您手头有大部分可用数据时，最方便的（在我看来）如下：

```
var person = {
    name: 'John',
    age: 23
}; // "object literal syntax" 
```

这种语法的一个奇怪之处在于它与此相同：

```
var person = {
    'name': 'John',
    'age': 23
}; // "object literal syntax" 
```

也就是说，您可以在属性名称中使用引号或省略它们。

将其与设置单个属性的工作方式进行比较时，您有两个选择：

```
person.birthday = "January 12"; // "dot syntax" 
```

或者

```
person['birthday'] = "January 12"; // "array syntax" 
```

“点语法”仅在右操作数是实际属性名称时才有效。如果要使用变量作为属性名称，则必须使用“数组语法”，即：

```
var prop = "birthday";
person[prop] = "January 12"; 
```

现在，是否可以在“对象文字语法”中为属性名称使用变量？由于引用属性名称并不重要，因此似乎没有一种明显的方法可以在那里使用变量。我正在寻找这样的东西：

```
var prop = "birthday";
var person = {
    name: 'John',
    age: 23,
    (prop): 'January 12'
}; 
```

在这里，我使用 (prop) 作为虚构语法，用于表示这是一个变量而不是文字字符串。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T18:14:18.487

不，这不起作用，这就是为什么如果您要动态设置属性名称，建议并使用类似数组的表示法。

```
var k='propertyname';
object[k]="value"; 
```

这在使用点表示法从变量中设置索引或属性名称时有效，这是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-14T07:46:46.947

ES6 现在允许这样做：

```
var obj = {
  [prop]: 'value'
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T21:16:47.370

对于需要替换点语法的人，其中键是对象而不是字符串（例如嵌套在父对象中），这里有一些解决方法：

```
var developers = {
    person: {
        'name': 'John',
        'age': 23
    },
    anarchist: (function(){ var a = {};
        a['name'] = 'John';
        a['age'] = 23;
        a[false] = false;
        a[1] = 1;
        a[window] = window;
    return a; })(),
    conformist: _.object([
        ['name', 'John'],
        ['age', 23],
        [false, false],
        [1, 1],
        [window, window]
    ])
};

// console.log(developers); // <- to see var dump in Firebug 
```

anarchist 元素使用一个[自执行函数](http://www.jspatterns.com/self-executing-functions/)，在调用后收集垃圾，如果你可以在你的站点中包含 underscore.js，conformist 元素使用[_.object()函数。](http://underscorejs.org/#object)

我希望内置的 Object() 和 Array() 函数允许像 underscore.js 那样传递键和值:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T18:24:08.190

您不能对对象执行此操作，但如果您考虑使用构造函数，它可能看起来像这样：

```
var prop = "birthday";
var Person = function() {
    this.name = "Bob";
    this[prop] = "January 12";
};
var bob = new Person(); 
```

当然，这里仍然有数组表示法，但也许你还是喜欢这种方法 :)

# javascript - 生成页面后将 target _blank 添加到链接

> ID：12607852
> 
> 赞同：0
> 
> 时间：2012-09-26T18:10:27.033
> 
> 标签：javascript, jquery

我有一个我写的工具，它从用户那里获取 Word 文档（文章），将它们放入我们的网站模板中，然后将它们上传到我们的测试网络服务器。

当他们从 Word 复制和粘贴文章时，他们希望所有链接都在新窗口中打开。

有没有办法做到这一点？我可以向从中创建文章的网站模板添加一个功能。

编辑：您的建议很棒，但是，我忽略的一件事是向所有标签添加目标空白属性会使点击进入新窗口。这是我的页面之一：

[http://www.pachamber.org/newsroom/articles/2012/PA%20Chamber%20unveils%20results%20of%2022nd%20Pennsylvania%20Economic%20Survey.php](http://www.pachamber.org/newsroom/articles/2012/PA%20Chamber%20unveils%20results%20of%2022nd%20Pennsylvania%20Economic%20Survey.php)

我可以将其限制为 div 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:12:33.557

***jQuery***

```
$(document).ready(function(){
    $('#yourDiv a').attr('target', '_blank');
}); 
```

***Vanilla JS***（如果这是您页面上唯一的 JS，因此您不必加载 jQuery）

```
var myDiv = document.getElementById('mydiv');
var links = myDiv.getElementsByTagName('a');

for( var i = 0, len = links.length; i < len; i++ ) {
   links[i].target = "_blank";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:12:28.367

所以你想`target`为所有链接添加一个属性，给它一个值`_blank`。这很容易：

```
 $("a").attr({target:'_blank'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T18:12:52.503

```
$('#divWithWordLinks a').attr('target', '_blank'); 
```

编辑：见[小提琴](http://jsfiddle.net/9twcn/)。

# android - ACTION_SET_ALARM 在 Galaxy SII 中不起作用

> ID：12607861
> 
> 赞同：0
> 
> 时间：2012-09-26T18:10:41.433
> 
> 标签：android, android-intent, alarm, galaxy

我正在尝试在设备的闹钟应用程序中设置新的闹钟`Intent(AlarmClock.ACTION_SET_ALARM)`。它适用于我尝试的所有手机。但在 Galaxy S2 中它不起作用。该意图打开一个空的黑屏时钟应用程序，而不是闹钟应用程序。

编码：

```
Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
    i.putExtra(AlarmClock.EXTRA_HOUR, hour);
    i.putExtra(AlarmClock.EXTRA_MINUTES, minutes);
    i.putExtra(AlarmClock.EXTRA_MESSAGE,personalMessage);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        i.putExtra(AlarmClock.EXTRA_SKIP_UI, true);
    }
    startActivity(i); 
```

如果我直接打开应用程序（`com.sec.android.app.clockpackage.ClockPackage`, `setClassName`，所有这些东西），我可以打开正确的应用程序但不设置警报。

编码：

```
String packageName = "com.sec.android.app.clockpackage";  
    String className = "com.sec.android.app.clockpackage.ClockPackage";  
    Intent internetIntent = new Intent(AlarmClock.ACTION_SET_ALARM);
    internetIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    internetIntent.setClassName(packageName, className);
    internetIntent.putExtra(AlarmClock.EXTRA_HOUR, hour);
    internetIntent.putExtra(AlarmClock.EXTRA_MINUTES, minutes);
    internetIntent.putExtra(AlarmClock.EXTRA_MESSAGE,personalMessage);
    startActivity(internetIntent); 
```

有谁知道？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:00:51.623

我遇到了同样的问题。

尝试这个：

```
private void setAlarmNow() {
    GregorianCalendar cal = new GregorianCalendar();
    int hour = cal.get(Calendar.HOUR_OF_DAY);
    int minute = cal.get(Calendar.MINUTE)+1;//to make sure it won't be set at the next day
    intent = new Intent(AlarmClock.ACTION_SET_ALARM);
    intent.putExtra(AlarmClock.EXTRA_HOUR, hour);
    intent.putExtra(AlarmClock.EXTRA_MINUTES, minute);
    intent.putExtra(AlarmClock.EXTRA_SKIP_UI, true);    

    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);

    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);   
    Log.d(TAG, "Backup alarm geset.");
} 
```

# android - 将多个自定义 LinearLayouts 添加到 LinearLayout，仅首先显示

> ID：12607869
> 
> 赞同：0
> 
> 时间：2012-09-26T18:11:03.410
> 
> 标签：android, custom-component

因此，每次单击按钮时，我仍在尝试添加 LinearLayout。

现在我发现的方式只显示我添加的第一个，所有其他的似乎都没有添加或不在活动的可见表面上。

首先，我的类CustomLinearLayout

```
public class CustomLinearLayout extends LinearLayout{

    public View v1, v2, v3, v4;
    public CheckBox cb;
    public TextView tv1, tv2;
    public EditText et1, et2;

    public CustomLinearLayout(int set, Context context){
        super(context);
        setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        cb = new CheckBox(context);
        cb.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 2));

        tv1 = new TextView(context);
        tv1.setText(" Set " + set);
        tv1.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 2));

        v1 = new View(context);
        v1.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 1));

        et1 = new EditText(context);
        et1.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 2));

        v2 = new View(context);
        v2.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 1));

        tv2 = new TextView(context);
        tv2.setText(":");

        v3 = new View(context);
        v3.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 1));

        et2 = new EditText(context);
        et1.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 2));

        v4 = new View(context);
        v4.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT, 1));

        addView(cb);
        addView(tv1);
        addView(v2);
        addView(et1);
        addView(v3);
        addView(tv2);
        addView(v1);
        addView(et2);
        addView(v4);
    }
} 
```

我的布局 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lin_ppe2_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="5dp"
    android:paddingBottom="5dp"
    android:paddingLeft="15dp"
    android:paddingRight="15dp" 
    android:orientation="vertical">
    <TextView style="@style/TextHeader"
        android:id="@+id/tv_ppe2_header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/title_pingpong_entry"
        />

      <Button 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="+"
        android:onClick="onClickAddNewSet"
        />
</LinearLayout> 
```

和活动本身

```
public class ChallengeActivity extends Activity {

    Vector<CustomLinearLayout> layouts = new Vector<CustomLinearLayout>();
    int counter = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_pingpong_entry2);

        for(int i=1; i<8; i++){
            layouts.add(new CustomLinearLayout(i, this));
        }
    }

    public void onClickAddNewSet(View v){
        LinearLayout lin = (LinearLayout)findViewById(R.id.lin_ppe2_main);
        lin.addView(layouts.elementAt(counter));
        counter++;
    }
} 
```

以下是我多次单击后得到的结果，无论多久（布局本身还没有设计得很好，但这是次要的）：

![在此处输入图像描述](../Images/1dc8cd18096ba0688351464dd17577ab.png)

我认为由于它是一个方向=垂直的线性布局，它应该自动将每个新视图添加到最后一个视图下方。为什么不这样做？为什么第一个布局工作正常，但在第二个之后什么都没有显示？我还尝试将方向设置：垂直于 CustomLinearLayout，但随后什么也没有出现。

**更新：** 按照建议，我尝试使用 hierarchyviewer。当我尝试添加第二个视图时，我收到以下错误消息：

```
09-26 18:40:54.489: E/AndroidRuntime(7341): FATAL EXCEPTION: main
09-26 18:40:54.489: E/AndroidRuntime(7341): java.lang.IllegalStateException: Could not execute method of the activity
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.View$1.onClick(View.java:2144)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.View.performClick(View.java:2485)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.View$PerformClick.run(View.java:9080)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.os.Handler.handleCallback(Handler.java:587)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.os.Looper.loop(Looper.java:123)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at java.lang.reflect.Method.invoke(Method.java:507)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at dalvik.system.NativeStart.main(Native Method)
09-26 18:40:54.489: E/AndroidRuntime(7341): Caused by: java.lang.reflect.InvocationTargetException
09-26 18:40:54.489: E/AndroidRuntime(7341):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at java.lang.reflect.Method.invoke(Method.java:507)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.View$1.onClick(View.java:2139)
09-26 18:40:54.489: E/AndroidRuntime(7341):     ... 11 more
09-26 18:40:54.489: E/AndroidRuntime(7341): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.ViewGroup.addView(ViewGroup.java:1828)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at android.view.ViewGroup.addView(ViewGroup.java:1808)
09-26 18:40:54.489: E/AndroidRuntime(7341):     at challenge.main.ChallengeActivity.onClickAddNewSet(ChallengeActivity.java:49)
09-26 18:40:54.489: E/AndroidRuntime(7341):     ... 14 more 
```

添加一个自定义布局后，hierarchyviewer 说如下（红色标记的是自定义视图），在应用程序第二次崩溃之后。

![在此处输入图像描述](../Images/2eaa912f6a577c919fb3c798205602da.png)

# string - fscanf 使用宏固定字符串大小

> ID：12607876
> 
> 赞同：2
> 
> 时间：2012-09-26T18:11:34.487
> 
> 标签：string, gcc, macros, scanf

我想使用 fscanf（使用 gcc 的 C 代码）从文件中解析一个 ip。所以，我想做：

```
char myip[INET_ADDRSTRLEN];
fscanf(file, "%16s", myip); 
```

但是，我不想硬编码数字 16，所以我尝试使用宏，但它不起作用。

```
#define _STRIFY(x) #x
char myip[INET_ADDRSTRLEN];
fscanf(file, "%" _STRIFY(INET_ADDRSTRLEN) "s", myip); 
```

这是我得到的错误

```
unknown conversion character type 'N' format 
```

那么我的代码有什么问题？

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:18:00.453

这个怎么样？

```
char format[14];
sprintf(format, "%%%ds", INET_ADDRSTRLEN-1);
fscanf(file, format, myip); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:17:45.187

用这个：

```
#define stringify_1(x...)  #x
#define stringify(x...)    stringify_1(x)

char myip[INET_ADDRSTRLEN];
fscanf(file, "%" stringify(INET_ADDRSTRLEN) "s", myip); 
```

这些是 Linux 内核中使用的类似字符串化函数的宏。

在我的评论中看到，如果您对缓冲区大小和转换规范中的大小使用相同的值，那么您很容易受到缓冲区溢出的影响。例如`INET_ADDRSTRLEN + 1`在缓冲区声明中使用以避免溢出的可能性。

# windows - TideSDK Windows 发布超时错误

> ID：12607880
> 
> 赞同：0
> 
> 时间：2012-09-26T18:11:41.023
> 
> 标签：windows, titanium, tidesdk

我使用 TiDev Community 和 TideSDK 1.2.0 RC4，但是在开始编译 Windows 版本应用程序时出现超时错误。它进行2周。以前这没有错误。有什么变化？

我的系统是Windows7 x32，build 7600。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:43:06.503

查看回溯或获得有关您所做工作的其他详细信息会很有帮助。TiDev 作为一个即将结束其有用生命周期的应用程序。我相信你的问题是你可能试图通过网络生产包。虽然 TiDev 有网络打包的选项，但 Appcelerator（曾经运行该服务）表示他们不会长期维护它。

我们目前正在开发 TideBuilder 应用程序，它将在不久的将来取代 TiDev。我们可以选择如何替换网络打包服务，但目前专注于发布 1.3.0-beta。在此之前，我们目前建议使用命令行实用程序 tibuild 来创建捆绑包。

如果您需要更多信息，或者您认为问题可能不同，请提供一些其他详细信息，以便我们进一步帮助您。

# objective-c - 你能以编程方式调用siri吗？

> ID：12607883
> 
> 赞同：4
> 
> 时间：2012-09-26T18:11:43.560
> 
> 标签：objective-c, ios, cocoa-touch

我想创建一个带有自定义按钮的 UITextView 子类来调用 Siri（用于其语音到文本的文本输入）。这可能吗？我不介意是否显示键盘，我只想提供我自己的按钮来打开 Siri。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:13:06.933

不幸的是，你不能这样做（从 iOS 6.0 开始）。使用 Siri 的唯一方法是使用`UITextFields`并让用户通过向 Siri 听写来输入文本。

# windows - 用于 Windows 的 Perl 编译器

> ID：12607889
> 
> 赞同：0
> 
> 时间：2012-09-26T18:12:19.707
> 
> 标签：windows, perl, compiler-construction, module, executable

我正在尝试在 Windows 7 x64 SP1 上编译 Perl 脚本，以便它可以在没有安装 Perl 的计算机上运行。我尝试了 tinyperl、Perl2Exe、perl 开发工具包，但无法编译该文件。我想我会在我需要但不知道如何做的可执行文件中包含模块。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:22:23.637

你所说的可以用 来完成`pp`，这是`PAR::Packer`图书馆的一部分。就我而言，我从来没有成功地使用 64 位 perl，所以我的建议是使用 32 位 perl 发行版（ActivePerl 或 Strawberry perl 就可以了）。要使用 pp，请从 cpan 安装 PAR::Packer，安装 Windows 版本的 gcc (miniGW) 并指示您的 Perl 使用该编译器。在这里可以找到关于如何将 miniGW 与 Perl 集成的相当过时（但有效）的指南[：](http://panospace.wordpress.com/2008/06/25/perl-in-windows/) . 要了解 pp 是否适合您（如果不是，则没有什么可以完成您的工作）检查[模块的相应 cpan 页面](http://search.cpan.org/~autrijus/PAR-0.85_01/script/pp)

# javascript - 如何在 window.load 之前获得计算的 CSS 样式？

> ID：12607894
> 
> 赞同：2
> 
> 时间：2012-09-26T18:12:35.283
> 
> 标签：javascript, jquery, document-ready, computed-style, window-load

我有一个自定义幻灯片页面，其中包含数百张大图片的标记。此外，还有一个布局调整，单靠 CSS 无法完成，需要 javascript。该调整取决于几个页面元素的计算 CSS 样式。

这是问题所在：获得计算的 CSS 样式`(document).ready`似乎不起作用。这很有意义，因为当仅注册 DOM 时，还没有发生布局/绘制。

`(window).load`是显而易见的答案。但在这种情况下，等待时间`(window).load`长得令人抓狂，因为下载所有 100 多张大图像实际上需要 30 秒（在慢速连接上更长！）。原则上这对幻灯片来说很好，因为一旦加载了前两个图像，幻灯片就开始可用，早在加载*所有*图像之前。问题是，我希望脚本化的 CSS 布局更正也发生在那个时候。

为了检查正在加载的 imgs，我使用[了 imageLoaded](https://github.com/desandro/imagesloaded)，这很棒，并且在`load`与 imgs 一起使用时解决了 jquery 事件的问题。但是如何检查页面元素（例如 div）上的“加载”类事件（以及计算样式的可用性）？（我意识到 div 不会触发加载事件。）原则上，两者之间是否存在可靠的跨浏览器 DOM 事件，`(document).ready`并且`(window).load`我可以在一组特定元素上侦听以获取计算样式？还是我被迫在这两个时间极端之间做出选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:26:02.630

# 在 CSS 加载时

> **来源：** [https ://stackoverflow.com/a/12570580/1292652](https://stackoverflow.com/a/12570580/1292652)

向要检查的 CSS 文件添加唯一的参考样式，如下所示：

```
#ensure-cssload-0 {
  display: none;
} 
```

然后，使用 JS 函数 ,`cssLoad()`反复检查 CSS 是否已下载（不确定这是否与实际绘制/渲染 CSS 时有显着差异）：

```
var onCssLoad = function (options, callback) {
    var body = $("body");
    var div = document.createElement(constants.TAG_DIV);
    for (var key in options) {
        if (options.hasOwnProperty(key)) {
            if (key.toLowerCase() === "css") {
                continue;
            }
            div[key] = options[key];
        }
    }

    var css = options.css;
    if (css) {
        body.appendChild(div);
        var handle = -1;
        handle = window.setInterval(function () {
            var match = true;
            for (var key in css) {
                if (css.hasOwnProperty(key)) {
                    match = match && utils.getStyle(div, key) === css[key];
                }
            }

            if (match === true) {
                window.clearTimeout(handle);
                body.removeChild(div);
                callback();
            }
        }, 100);
    }
} 
```

您可以将其用作：

```
onCssLoad({
    "id": <insert element CSS applies to>,
     css: <insert sample CSS styles>
}, function () {
    console.log("CSS loaded, you can show the slideshow now :)");
}); 
```

# 关于 CSS 计算

> **来源：** [http ://atomicrobotdesign.com/blog/javascript/get-the-style-property-of-an-element-using-javascript/](http://atomicrobotdesign.com/blog/javascript/get-the-style-property-of-an-element-using-javascript/)

先前的解决方案仅告诉 CSS 文件是否已被*'downloaded'*，而在您的问题中您提到您需要知道元素的样式何时已被*'computed'*或*'rendered'*或*'painted'*。我希望这可以解决这个问题。

向要检查的 CSS 文件添加唯一的参考样式，如下所示：

```
#ensure-cssload-0 {
  ignored-property: 'computed';
} 
```

现在，使用`getPropertyValue`and`getComputedStyle`来检查 CSS：

```
function getStyle(elem, prop) {
    return window.getComputedStyle(elem, null).getPropertyValue(prop);
} 
```

现在，只需使用`while`带有回调的循环：

```
function checkStyle(elem, prop, callback) {
    while ( getStyle(elem, prop) !== 'computed' ) {
        // see explanation below
    }
    callback()
} 
```

由于[JavaScript 没有`pass`语句](https://stackoverflow.com/questions/10727025/javascript-pass "关于 JavaScript 中缺少“pass”语句的问题")（[就像在 Python 中一样](http://docs.python.org/release/2.5.2/ref/pass.html "`pass` 语句的 Python 文档规范")），我们使用空代码块。

如果您想检索应用于元素的*所有CSS 样式（***警告：**这也会显示继承的样式），请查看[这个 SO answer](https://stackoverflow.com/a/5830517/1292652 "另一个深入研究更多细节的SO答案")。

# 避免 while() 循环

通常不建议使用 while 循环检查任何内容，因为它~~挂起浏览器~~不让 JavaScript 线程做任何其他事情（现在所有的浏览器都是多线程的，参见[这个漫画](http://www.google.com/googlebooks/chrome/big_30.html)）。

这是[Chuck 建议](https://stackoverflow.com/questions/12607894/how-to-get-a-computed-css-style-before-window-load/12608618#comment17061291_12608618)的，这个解决方案要好得多：

```
function checkStyle(elem, prop, callback) {
    if ( getStyle(elem, prop) !== 'computed' ) {
        // see explanation below
        window.setTimeout( function() {checkStyle(elem, prop, callback);}, 100 )
    } else {
        callback()
    }
} 
```

这要好得多。现在该函数每 100 毫秒异步检查一次（您可以根据需要更改此值）。在设置超时时包装函数是必要的，因为`setTimeout()`还不允许传递任何参数。

希望这有帮助。有关更多链接，请参阅这篇文章的源代码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:33:05.663

您可以使用 DOMContentLoaded 事件。它在 dom 树准备好并应用样式时触发。window.load 在加载所有图像和脚本时触发。

如果你使用 jQuery，你可以使用这个：

```
$(function(){
 // this fn not waiting for images
  $('.selector-class')[0].style ;// this is your computed style OR...
  $('.selector-class').css(); // json representation of style;
}); 
```

如果页面上没有 jQuery ...在现代浏览器中，您可以使用以下代码：

```
document.addEventListener( "DOMContentLoaded", function(){
  var computedStyle = document.querySelector('#yourElementId').style ; 
}) 
```

**YatharthROCK**在下面添加了非常精确的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:02:06.993

我的[另一个答案](https://stackoverflow.com/a/12608078/1292652) ~~仅在*下载*CSS 文件时告诉您，而在您的问题中您提到您需要知道元素的样式何时被*计算*或*渲染*或*绘制*-~~已经更新。

~~我希望这能解决这个问题（我不想将它与另一个答案合并，因为我觉得它从不同的角度攻击......）~~ 我改变了主意，请参阅编辑。

> **来源：** [http ://atomicrobotdesign.com/blog/javascript/get-the-style-property-of-an-element-using-javascript/](http://atomicrobotdesign.com/blog/javascript/get-the-style-property-of-an-element-using-javascript/)

向要检查的 CSS 文件添加唯一的参考样式，如下所示：

```
#ensure-cssload-0 {
  ignored-property: 'computed';
} 
```

现在，使用`getPropertyValue`and`getComputedStyle`来检查 CSS：

```
function getStyle(elem, prop) {
    return window.getComputedStyle(elem, null).getPropertyValue(prop);
} 
```

现在，只需使用`while`带有回调的循环：

```
function checkStyle(elem, prop, callback) {
    while ( getStyle(elem, prop) !== 'computed' ) {
        // see explanation below
    }
    callback()
} 
```

由于[JavaScript 没有`pass`语句](https://stackoverflow.com/questions/10727025/javascript-pass)（[就像在 Python 中一样](http://docs.python.org/release/2.5.2/ref/pass.html)），我们使用空代码块。

如果您想检索应用于元素的*所有CSS 样式（***警告：**这也将显示继承的样式），请查看[此 SO 答案](https://stackoverflow.com/a/5830517/1292652)

# c# - 无法让 XmlDocument.SelectNodes 检索我的任何节点？

> ID：12607895
> 
> 赞同：19
> 
> 时间：2012-09-26T18:12:36.657
> 
> 标签：c#, .net, xml, xpath, xmldocument

我正在尝试解析 XML 文档。有问题的文档是一个 AppxManifest 文件。

示例文档如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/2010/manifest" xmlns:build="http://schemas.microsoft.com/developer/appx/2012/build" IgnorableNamespaces="build">
  <Identity Name="uytury" Publisher="hygj" Version="1.0.0.12" ProcessorArchitecture="neutral" />
  <Properties>
    <DisplayName>jhjj</DisplayName>
    <PublisherDisplayName>bhhjb</PublisherDisplayName>
    <Logo>Assets\StoreLogo.png</Logo>
  </Properties>
  <Prerequisites>
    <OSMinVersion>6.2.1</OSMinVersion>
    <OSMaxVersionTested>6.2.1</OSMaxVersionTested>
  </Prerequisites>
  <Resources>
    <Resource Language="EN" />
  </Resources>
  <Applications>
    <Application Id="App" Executable="gfg.exe" EntryPoint="gfg.App">
      <VisualElements DisplayName="fdsf" Logo="Assets\Logo.png" SmallLogo="Assets\SmallLogo.png" Description="gfdsg" ForegroundText="light" BackgroundColor="#2672EC">
        <DefaultTile ShowName="allLogos" WideLogo="Assets\WideLogo.png" ShortName="gfdsg" />
        <SplashScreen Image="Assets\SplashScreen.png" BackgroundColor="#2672EC" />
        <InitialRotationPreference>
          <Rotation Preference="portrait" />
          <Rotation Preference="landscape" />
          <Rotation Preference="portraitFlipped" />
          <Rotation Preference="landscapeFlipped" />
        </InitialRotationPreference>
      </VisualElements>
      <Extensions>
        <Extension Category="windows.search" />
        <Extension Category="windows.shareTarget">
          <ShareTarget>
            <DataFormat>Text</DataFormat>
          </ShareTarget>
        </Extension>
      </Extensions>
    </Application>
  </Applications>
  <build:Metadata>
    <build:Item Name="TargetFrameworkMoniker" Value=".NETCore,Version=v4.5" />
    <build:Item Name="VisualStudio" Version="11.0" />
    <build:Item Name="OperatingSystem" Version="6.2.9200.16384 (win8_rtm.120725-1247)" />
    <build:Item Name="Microsoft.Build.AppxPackage.dll" Version="11.0.50727.1" />
    <build:Item Name="Microsoft.Windows.UI.Xaml.Build.Tasks.dll" Version="11.0.50727.1" />
  </build:Metadata>
</Package> 
```

我尝试像这样解析它：

```
var xml=new XmlDocument();
xml.Load(myfile);
var mgr=new XmlNamespaceManager(xml.NameTable);
mgr.AddNamespace("", "http://schemas.microsoft.com/appx/2010/manifest");
var nodes=xml.SelectNodes("Applications"); 
```

但是，在我执行此操作后，`nodes`将永远不会包含任何内容。xml 文档已加载等。using`SelectNodes("//*")`按预期返回每个节点。我的问题是什么？

我还尝试了该 XPath 查询的许多变体，例如

*   `/Package/Applications/Application`
*   `Applications/Application`
*   `Applications/*`

不过，似乎没有任何东西可以检索单个节点。理想情况下，我希望节点包含所有`Application`节点

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-26T18:16:41.507

您必须专门使用 xml 命名空间来选择它们。考虑

```
"//*[local-name()='Applications']/*[local-name()='Application']" 
```

在您的情况下，此代码也可能运行良好：

```
var doc = new XmlDocument();
doc.LoadXml(xml);
var nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("a", "http://schemas.microsoft.com/appx/2010/manifest");
var nodes = doc.SelectNodes("//a:Applications/a:Application",nsmgr); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T18:31:40.173

您需要在 NamespaceManager 和 XPaths 中为命名空间指定前缀。请注意，除了 XPath 和命名空间管理器之间的前缀*之外，前缀不需要匹配任何内容。

```
var xml=new XmlDocument();
xml.Load(myfile);
var mgr=new XmlNamespaceManager(xml.NameTable);
mgr.AddNamespace("a", "http://schemas.microsoft.com/appx/2010/manifest");
mgr.AddNamespace("bar", "http://schemas.microsoft.com/developer/appx/2012/build");
var nodes=xml.SelectNodes("//a:Applications", mgr); 
```

正如其他答案所指出的那样，接受任何命名空间的 XPath 是另一种选择。

*) 即在您的特定示例中有 2 个命名空间“默认”（请注意，默认前缀与空命名空间不同）和“构建”。因此，当您定义命名空间管理器时，您需要为每个命名空间指定一个前缀（如果您需要在两者中定位节点），但前缀可以是任意字符串（对前缀有效但不能为空）。即，使用“a”作为“默认”命名空间，使用“bar”作为映射到 XML 中“build”的命名空间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-11T18:38:35.637

不是在这种特殊情况下，但一般情况下，如果实际 XML 中的命名空间 URN 与用于将命名空间添加到命名空间管理器的名称不完全相同（例如：缺少尾部斜杠），并且在 XPath 中指定了前缀，查询可能会返回`null`。

如果 XML 中的命名空间 URN 不可靠，则语法

```
"//*[local-name()='tag']" 
```

将工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T18:29:44.713

你可能需要阅读这个

*   [http://msdn.microsoft.com/en-us/library/hcebdtae%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/hcebdtae%28v=vs.90%29.aspx)

这是你的代码：

```
var xml = new XmlDocument();
xml.Load("myXMLFile1.xml");
var mgr = new XmlNamespaceManager(xml.NameTable);
mgr.AddNamespace("", "http://schemas.microsoft.com/appx/2010/manifest");
XmlNode root = xml.DocumentElement;
var nodes = root.SelectNodes("//*[local-name()='Applications']/*[local-name()='Application']"); 
```

# android - Wrapper Application 远程启动和停止android上的应用程序

> ID：12607896
> 
> 赞同：2
> 
> 时间：2012-09-26T18:12:44.853
> 
> 标签：android

所以我需要一些帮助。我正在学习android开发，我需要创建一个包装应用程序，这样我就可以远程启动和停止我的android手机上预装的应用程序，也可以停止它。这可能吗？你认为这需要多长时间。另外，我不确定从哪里开始，所以如果你们中的任何人都可以提供任何提示或链接到教程或建议，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T00:44:37.360

好吧，我可能会迟到回答您的问题，但我也尝试这样做，然后搜索了很多答案，找到了您的帖子并决定回复我发现的内容。

以下源代码是可以帮助您在后台管理应用程序的应用程序的源代码。 [https://github.com/ndagrawal/android-autostarts](https://github.com/ndagrawal/android-autostarts)

此应用程序确实有助于在启动时启动我们的应用程序，并在启动时的启动过程之后停止其他应用程序。

以下是我得到答案的链接： [https ://android.stackexchange.com/questions/30332/how-can-i-stop-applications-and-services-from-running](https://android.stackexchange.com/questions/30332/how-can-i-stop-applications-and-services-from-running)

# javascript - 尝试确定如何监视或附加异步函数的成功调用

> ID：12607897
> 
> 赞同：0
> 
> 时间：2012-09-26T18:12:45.180
> 
> 标签：javascript, jquery, ajax

我有一个调用异步函数的函数。我的示例使用 ajax，但它实际上是异步的。

我正在尝试在 ajax 调用的成功中添加其他信息。

发生的顺序：

-my 函数被调用，参数是 $.ajax 调用。

-我的函数需要在 $.ajax.success 调用中添加 1 行代码

我的代码如下所示：

```
function myFunct(settings, callback){
   if(!callback)return;
   var x = 100;
   //here is where i have issues, as i want 
   //to be able to adjust the success function
   // to also have 1 line of code, a decrementer.
   //I want to do something like settings.success = "x--;" + settings.success;

   callback(settings);

   //I also wasnt sure if you could wrap 'callback' 
   //with a success function when the inner success function executes
} 
```

示例调用：

```
 var settings = "";//settings of the ajax call.
 myFunct(settings, function(x){ $.ajax(x);}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:17:50.430

如果您确保回调始终返回一个承诺对象，您可以使用`.done()`

```
function myFunct( settings, callback ) {
    if (!callback) return;
    var x = 100;

    callback(settings).done(function(){
        x--;
    });
}
var settings = { url: "foobar.php" };
myFunct( settings, function(x) {
    return $.ajax(x);
}) 
```

可以肯定的`var x = 100`是，这只是一个例子，对吗？就目前而言，它将超出范围并且毫无意义。

# php - 将值设置为 NULL 而不是 'NULL'

> ID：12607909
> 
> 赞同：0
> 
> 时间：2012-09-26T18:13:43.140
> 
> 标签：php, mysql, sql

我有一个将 varhcars 和整数添加到数据库行中的函数

```
public function addItem($id, $site, $price, $quantity, $condition, 
   $sellerName, $sellerRating, $sellerLocation, $description, $link){

   $q = "INSERT INTO tbl_items VALUES(
      '$id',
      '$site',
      $price, 
      $quantity, 
      '$condition',
      '$sellerName',
      $sellerRating,
     '$sellerLocation',
     '$description',
     '$link',
     ".time().")";

  return mysql_query($q, $this->connection);    
} 
```

在某些情况下，我可能决定将 varchar 值设置为 NULL，但问题是如果我将字符串 NULL 作为参数发送，它将始终被视为字符串。

例如

```
addItem("id1", "site1", 100, NULL, "NULL", "NULL", "NULL", "NULL", "NULL", "NULL",); 
```

如何避免 NULL 在我的查询中被视为字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:15:10.237

简单的。**不要引用它**，因为`'NULL'`它始终是一个字符串，并且`NULL`是..好吧，NULL。

如何？使用占位符，也就是准备语句。

这将处理任何引用（根据需要）*并*防止 SQL 注入攻击。赢。

请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)其中包含有关编写安全查询的信息，并具有 mysqli 和 PDO 方法的示例。

# php - 我如何从基于 php 会话的数组中回显总项目数量。

> ID：12607910
> 
> 赞同：0
> 
> 时间：2012-09-26T18:13:45.357
> 
> 标签：php, arrays, session, cart

我一生都无法理解我是如何获得物品总量的。我一直在按照本教程建立一个网上商店。[http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial](http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial)

一切似乎都在本教程中工作。但我需要将商品总数添加到我的购物车中。该代码正在创建一个具有 id 和数量编号的数组作为存储在 SESSION['cart'] 中的数组。我一直在搞乱 FOREACH 代码，但我只能得到购物车中一项的总数，即数组的总数。但我需要总数量的总和，而不是行的总和。

非常感谢您在正确方向上的任何帮助。

工作代码：

```
$product_id = $_GET[id];     //the product id from the URL 
$action     = $_GET[action]; //the action from the URL
if($product_id && !productExists($product_id)) {
   die("Error. Product Doesn't Exist");
}
switch($action) {   //decide what to do
case "add":
$_SESSION['cart'][$product_id]++; //add one to the quantity of the product with id $product_id 
break;
case "remove":
$_SESSION['cart'][$product_id]--; //remove one from the quantity of the product with id $product_id 
if($_SESSION['cart'][$product_id] == 0) unset($_SESSION['cart'][$product_id]);
break;
case "empty":
unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
break;
}

if($_SESSION['cart']) { //if the cart isn't empty
//show the cart
echo "<table border='1' padding=\"3\" width=\"40%\">";
   foreach($_SESSION['cart'] as $product_id => $quantity) {
   $sql = sprintf("SELECT productName, productImg, price FROM products WHERE id = %d;", $product_id);
$result = mysql_query($sql);
if(mysql_num_rows($result) > 0) {
list($productName, $productImg, $price) = mysql_fetch_row($result);
$arrayquantity = is_array($_SESSION['cart']) ? count($_SESSION['cart']) : 0;
$line_cost = $price * $quantity;        //work out the line cost
$total = $total + $line_cost;           //add to the total cost
}else{
//you have no items
}
function productExists($product_id) {
$sql = sprintf("SELECT * FROM products WHERE id = %d;", $product_id); 
return mysql_num_rows(mysql_query($sql)) > 0;
} 
```

我已经尝试了以下但它只是导致“0”

```
if(isset($_SESSION['cart']) AND is_array(@$_SESSION['cart'])){
   foreach($_SESSION['cart'] AS $itemquantity){
   $totalquantity = $totalquantity + $itemquantity['quantity'];
   }
}
else{
$totalquantity = 0;
}
echo $totalquantity; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:35:40.593

尝试类似：

```
 if(isset($_SESSION['cart']) && is_array($_SESSION['cart'])) {
        $totalquantity = 0;
        foreach($_SESSION['cart'] AS $productId => $itemQuanity) {
            $totalquantity = $totalquantity + $itemQuanity;
        }
  }
  else {
       $totalquantity = 0;
  }
  echo $totalquantity; 
```

您可以将 foreach($_SESSION['cart'] AS $productId => $itemQuanity){ 替换为 foreach($_SESSION['cart'] AS $itemQuanity){ 因为您不需要密钥（这里的密钥是产品 ID） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:16:03.737

几个变化：`AND`是合乎逻辑的，你需要`&&`用于条件检查。另外，参数中`is_array()`不应该有 a `@`。

```
 if(isset($_SESSION['cart']) && is_array($_SESSION['cart'])){ //change this line
     $totalquantity = 0;
     foreach($_SESSION['cart'] AS $itemquantity){
       $totalquantity +=  $itemquantity['quantity']; // and this line, just shorthand of ur line
      }
      }
     else{
     $totalquantity = 0;
     }
     echo $totalquantity; 
```

# ios - Xcode- 通过 SFTP 将应用程序上传到 iOS 设备

> ID：12607914
> 
> 赞同：3
> 
> 时间：2012-09-26T18:14:05.253
> 
> 标签：ios, xcode, debugging, jailbreak, iphone-privateapi

嗨，我正在尝试将应用程序上传到我的 iPad，（iOS 5.1） - 越狱，

它是一个网络搜索应用程序，我使用的是私有 API，据我所知，我需要将我的应用程序的构建版本放在设备`/Applications`文件夹中！

（可以说我已经弄清楚了这个过程，使用cyberduck）

到目前为止一切顺利，一切正常！

但是每次我更新我的应用程序上的代码时，我需要替换哪些文件？只有`/Applications`目录中的那些或`/User/Applications/`. . . ? atm 每次我更新我的代码时，似乎代码不会更新，直到我重新启动设备

在我重新启动之前，我通过 Xcode 收到以下错误：

> 具有给定捆绑标识符的系统应用程序已安装在设备上，无法替换。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:59:37.210

仅仅因为您使用私有 API 并不意味着您总是需要在`/Applications`. 这取决于*哪些*私有 API 以及您要执行的操作。系统应用程序和通过 Cydia 分发的应用程序通常安装在`/Applications`. 普通的 3rd-party App Store 应用程序（我们的）安装在`/var/mobile/Applications`(`/User/Applications`是指向 的链接`/var/mobile/Applications`，所以这两个是相同的位置)。

因此，默认情况下，Xcode 不会在 /Applications 中安装应用程序。它会将应用程序安装在`/var/mobile/Applications`.

如果您手动将应用程序放入`/Applications`，然后尝试从 Xcode 再次构建并运行它，Xcode 将在 中看到版本`/Applications/MyAppName.app`，即使它试图安装到`/var/mobile/Applications/*/MyAppName.app`，它也会根据捆绑标识符（在应用程序的 Info.plist 文件中指定）。

`/Applications`因此，您不能在和中安装具有相同捆绑标识符的应用程序`/var/mobile/Applications`。我会选择你想要的地方。

如果您希望您的应用在 中`/Applications`，请使用脚本安装它（例如，使用 SFTP）。如果你想要你的应用程序`/var/mobile/Applications`，那么你可以直接从 Xcode构建**和运行。**

至于需要重新启动，那应该是没有必要的。您可能需要`ssh`进入您的设备，然后发出`uicache`命令：

```
ssh mobile@iphone
uicache 
```

或者

```
ssh root@iphone
su mobile -c uicache 
```

让 SpringBoard 识别新安装的应用程序。如果您直接从 Xcode 运行，则没有必要，但如果您从 Xcode 构建，然后运行（SFTP）安装脚本，那么您可能需要运行`uicache`.

希望这可以帮助。

**编辑：**我没有涉及编写要从 Xcode 中调用的自定义构建后脚本/步骤的问题。因此，当我在上述答案中提到从 Xcode 运行时，我指的是 Xcode 工作的默认模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:32:01.837

是的，并非所有私有 API 都需要管理权限；即 Apple80211 功能虽然（在我的情况下）。

将应用程序上传到根文件夹时

*   构建归档应用程序：（发布构建）
*   导航到默认构建路径
*   /Users/“用户”/Library/Developer/Xcode/DerivedData/“应用程序名称”/Build/Products/Debug-iphoneos/
*   构建文件在上面的目录中，“ApplicationName.app”
*   将此文件上传到根应用程序目录 /Application
*   （不适用 /Private/Var/Mobile/Application）
*   使用 SSH 访问 iOS 设备的文件目录
*   使用 SFT 协议进行文件传输——（Cyber​​Duck 是一款不错的软件）

通常在 Xcode 中按下“运行”按钮会将应用程序安装到 /Var/mobile/applications 目录，但是，如果 Xcode 检测到应用程序已经存在于 /Applications，那么它只会使用后者。

因此：当您更新代码时。. . . - 您必须创建一个新版本！（如上所述） - 从 /Applications 中删除文件夹“ApplicationName” - 并将您的（新）更新版本（ApplicationName.app）放入 /Applications 目录

Stumbler，是尝试上述步骤的绝佳示例；Stumbler 使用要求应用程序位于 /Applications 内的 Apple80211 功能；对代码稍作改动并尝试上述步骤。. . . 代码可在：http: [//blog.guvenergokce.com/iphone-wireless-scanner-ios5/170/](http://blog.guvenergokce.com/iphone-wireless-scanner-ios5/170/)

希望这可以帮助一些人！

塔斯基

# testing - 有什么方法可以查看 Jmeter 的“查看结果表”监听器中的延迟？

> ID：12607915
> 
> 赞同：1
> 
> 时间：2012-09-26T18:14:09.347
> 
> 标签：testing, jmeter, qa, performance-testing

有什么方法可以查看 Jmeter 的“查看结果表”侦听器中的延迟（lt）列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:40:43.330

从 JMeter 2.7 开始，答案是否定的。

我创建了一个增强请求：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53941](https://issues.apache.org/bugzilla/show_bug.cgi?id=53941)

并修复它。

在官方 2.8 发布之前，您可以使用 nightly build：

*   [http://jmeter.apache.org/nightly.html](http://jmeter.apache.org/nightly.html)

阅读构建 JMeter 段落。

# unix - UNIX sendmail 中的格式化 excel 附件

> ID：12607919
> 
> 赞同：0
> 
> 时间：2012-09-26T18:14:33.827
> 
> 标签：unix

是否可以发送一个 excel 附件，其中一些行以红色突出显示？

目前我正在使用以下编码格式（类似）发送计划 excel 附件：

```
(
 echo "From: $MAILFROM"
 echo "To: $MAILTO"
 echo "Subject: $SUBJECT"
 echo "MIME-Version: 1.0"
 echo "Content-Type: multipart/mixed; boundary=\"-$MAILPART\""
 echo "---$MAILPART"
 echo "Content-Type: text/html"
 echo "Content-Disposition: inline"
 cat $BODY
 echo "---$MAILPART"
 echo 'Content-Type: application/pdf; name="'$(basename $ATTACH)'"'
 echo "Content-Transfer-Encoding: base64"
 echo 'Content-Disposition: attachment; filename="'$(basename $ATTACH)'"'
 uuencode -m $ATTACH $(basename $ATTACH)
 echo "---$MAILPART--"
) | /usr/sbin/sendmail $MAILTO 
```

有没有办法在上面的代码中添加一些东西来达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:19:34.863

无论您在 excel 文件中的单元格是什么颜色，您都可以使用相同的脚本发送任何类型的文件，只需对脚本稍作更改：

```
(
 echo "From: $MAILFROM"
 echo "To: $MAILTO"
 echo "Subject: $SUBJECT"
 echo "MIME-Version: 1.0"
 echo "Content-Type: multipart/mixed; boundary=\"-$MAILPART\""
 echo "---$MAILPART"
 echo "Content-Type: text/html"
 echo "Content-Disposition: inline"
 cat $BODY
 echo "---$MAILPART"
 echo 'Content-Type: application/octet-stream; name="'$(basename $ATTACH)'"'
 echo "Content-Transfer-Encoding: base64"
 echo 'Content-Disposition: attachment; filename="'$(basename $ATTACH)'"'
 uuencode -m $ATTACH $(basename $ATTACH)
 echo "---$MAILPART--"
) | /usr/sbin/sendmail $MAILTO 
```

# c# - 如何使用报表查看器从 asp 网页打开 ssrs 报表

> ID：12607920
> 
> 赞同：9
> 
> 时间：2012-09-26T18:14:38.207
> 
> 标签：c#, asp.net, ssrs-2008

我正在尝试使用 ReportViewer 在我的网页上打开一个 ssrs 报告。对于 Report Serverl URL，我有：

```
http://db_servers/ReportsServer_SENSORSQLSERVER 
```

对于我的报告路径，我有：

```
http://db_servers/ReportsServer_SENSORSQLSERVER/Pages/ReportViewer.aspx?%2fCustomer1&rs:Command=Render. 
```

我浏览了许多有关如何添加 URL 的网站和教程，但仍然收到错误消息：我的链接长度必须低于 260 个字符。(rsInvalidItemPath)。我还想提一下，我的报表服务器处于本机模式。我的报表服务器位于另一台计算机上，因此我确保报表查看器上的处理模式是远程的。每当我访问 surver url 时，我都可以清楚地看到我的报告列表，当我点击报告时，我也可以看到它，因此我知道我的 url 是正确的。我尝试在我的报告路径 URL 前添加一个斜杠，将“2%f”替换为一个空格。似乎没有任何效果。任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T18:26:49.800

您需要分离出服务器的 URL、报告路径并将参数添加到参数数组中。

这是一个示例：

```
 protected void Page_Init(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        // Set the processing mode for the ReportViewer to Remote
        reportViewer.ProcessingMode = ProcessingMode.Remote;

        ServerReport serverReport = reportViewer.ServerReport;

        // Set the report server URL and report path
        serverReport.ReportServerUrl =
            new Uri("http://<Server Name>/reportserver");
        serverReport.ReportPath =
            "/AdventureWorks Sample Reports/Sales Order Detail";

        // Create the sales order number report parameter
        ReportParameter salesOrderNumber = new ReportParameter();
        salesOrderNumber.Name = "SalesOrderNumber";
        salesOrderNumber.Values.Add("SO43661");

        // Set the report parameters for the report
        reportViewer.ServerReport.SetParameters(
            new ReportParameter[] { salesOrderNumber });
    }
} 
```

以上取自[Using the WebForms ReportViewer Control](http://msdn.microsoft.com/en-us/library/aa337091.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:48:10.593

您应该替换`"2%f"`by `"/"`。

问题在于您的 ReportPath 属性，例如：

`%2fCustomer1`->`/Customer1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-27T20:06:44.097

这是一个旧的，但我为客户撞到了它。要获取报表 URL，我发现最简单的方法是通过 SSMS 连接到运行报表服务器的 SQL 实例，然后打开 ReportServer 数据库，并在目录表中查询路径字段。

# .net - 无法在.net中取出Oracle的参数

> ID：12607923
> 
> 赞同：0
> 
> 时间：2012-09-26T18:14:53.573
> 
> 标签：.net, plsql

正如我在标题中所说，问题是 - 程序的 oracle 参数在 .net 中为空，尽管此参数是在 pl/sql 测试中分配的。输出参数数据类型是 nvarchar2。我尝试将此值更改为 int，并且效果很好。但我需要从程序中返回文本！！！问题是什么？顺便说一句，我使用 Oracle.DataAccess.Client；这是代码：

```
private void OKButton_Click(object sender, EventArgs e)
{
    float cur_rate;
    decimal value;
    if (!String.IsNullOrEmpty(RateTxtBox.Text) && decimal.TryParse(RateTxtBox.Text, out value))
    {
    cur_rate = float.Parse(RateTxtBox.Text);
    con = new OracleConnection(conStr);
    con.Open();
    cmd = con.CreateCommand();
    cmd.BindByName = true;
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = schema_name + ".CACCRUEMENT_INS";
    cmd.Parameters.Add("p_check_info_id", OracleDbType.Int32, header_id, ParameterDirection.Input);
    cmd.Parameters.Add("p_calculate_on", OracleDbType.Date, DateTime.Parse(dateTimePicker1.Text), ParameterDirection.Input);
    cmd.Parameters.Add("p_curr_id", OracleDbType.Decimal, CurrencyCombobox.SelectedValue, ParameterDirection.Input);
    cmd.Parameters.Add("p_cur_rate", OracleDbType.Decimal, Decimal.Parse(RateTxtBox.Text), ParameterDirection.Input);
    cmd.Parameters.Add("p_result", OracleDbType.NVarchar2).Direction = ParameterDirection.Output;
    //cmd.Parameters.Add("p_result", OracleDbType.NVarchar2,ParameterDirection.Output);
    cmd.ExecuteNonQuery();
    string result = cmd.Parameters["p_result"].Value.ToString();
    MessageBox.Show(result);
    Thread.Sleep(2);
    this.Close();
    }
    else
    {
        MessageBox.Show("Invalid data format!");
    }
} 
```

* * *

pl/sql 程序：

```
create or replace procedure CACCRUEMENT_INS(
p_check_info_id in number,
p_calculate_on in date,
p_curr_id in number,
p_cur_rate in number,
p_result out varchar2
) is

v_Accruemtnt number;
v_rate number;
v_cur_rate_in_check_info number;
Last_accruemet_date date;
monthes_bwn_last_adj_n_chck number;
next_check date;
check_info_rate number;
begin
select c.next_check 
into next_check 
from check_info c 
where c.id_check_info = p_check_info_id;
begin 
  select max(c.calculate_on) 
  into Last_accruemet_date 
  from Caccruement c 
  where c.fk_check_info = p_check_info_id
  group by c.fk_check_info;
  exception when no_data_found then
  begin 
    select max(c.calculate_on_date) 
    into Last_accruemet_date 
    from check_info_lines  c 
    where c.fk_check_info = p_check_info_id 
    group by c.fk_check_info;
  exception when no_data_found then
    p_result:='Adjustment is not calculated!';
    goto l_EndOfLoop;
  end;   
end;
select ci.curency_rate 
into check_info_rate from check_info ci where ci.id_check_info = p_check_info_id;
select c.rate 
into v_rate 
from Check_Info c 
where c.id_check_info = p_check_info_id;
monthes_bwn_last_adj_n_chck:=MONTHS_BETWEEN(next_check,Last_accruemet_date);
IF(monthes_bwn_last_adj_n_chck>round(MONTHS_BETWEEN(p_calculate_on,Last_accruemet_date),3))
THEN
  select c.curency_rate 
  into v_cur_rate_in_check_info 
  from check_info c 
  where c.id_check_info = p_check_info_id;
  --v_rate:=round((v_rate/v_cur_rate_in_check_info),3);  
v_Accruemtnt := round(v_rate/check_info_rate * MONTHS_BETWEEN(p_calculate_on, Last_accruemet_date)*p_cur_rate,3) ;
insert 
into CAccruement(Id_Accruemtnt,Calculate_On,Accruemtnt,Fk_Check_Info,Cu_Id,Cu_Rate,Calculation_Date,Accruemtnt_Kzt) 
values (accruement_seq.nextval,p_calculate_on,round(v_Accruemtnt/p_cur_rate,3),p_check_info_id,p_curr_id,p_cur_rate,Sysdate,v_Accruemtnt);
update check_info c 
set c.total_accumulated = c.total_accumulated+v_Accruemtnt 
where c.id_check_info = p_check_info_id;
END IF; 
 COMMIT; 
 p_result:='Operation complited successfully';
 update_total_accumulated(p_check_info_id);
<<l_EndOfLoop>>
  ROLLBACK;
  EXCEPTION
WHEN OTHERS
THEN
  DBMS_OUTPUT.PUT_LINE(SQLERRM);
  ROLLBACK;    
end CACCRUEMENT_INS; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:50:04.240

*   首先尝试使用 db 类型`Varchar2`而不是`NVarchar2`

    前任。

```
    cmd.Parameters.Add("p_result", OracleDbType.NVarchar2,ParameterDirection.Output);

```

*   其次，如果您仍然没有获得价值，请尝试以下方法将其取回

```
    var value = cmd.Parameters["p_result"].Value;
    var str = (OracleString) 值；
    str.值；//这是字符串

```

# android - 想要将联系人类型转换为字符串

> ID：12607927
> 
> 赞同：0
> 
> 时间：2012-09-26T18:15:10.260
> 
> 标签：android, android-layout, listview

```
List<Contact> contacts = db.getAllContacts();
        for (Contact cn : contacts) {
            String log = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber();
        Log.d("Name: ", log);

        } 
```

它是**在 Logcat 中返回用户**列表的实际代码， 我想用**ListView在 Android 屏幕上显示它**

帮帮我

我在 XML 中创建了 ListView

```
ListView listview = (ListView)findViewById(R.id.listView1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:29:44.230

有几种不同的方法可以做到这一点。

* * *

我假设 Contact 是您的自定义类，实现 toString() 方法：

```
@Override
public String toString() {
    return "Id: " + getID() + " ,Name: " + getName() + " ,Phone: " + getPhoneNumber();
} 
```

然后使用：

```
ArrayAdapter<Contact> adapter = new ArrayAdapter<Contact>(this, android.R.layout.simple_list_item_1, contacts);
listview.setAdapter(adapter); 
```

（最终，您应该使用自定义布局而不是内置的 . 来更改文本的呈现方式`simple_list_item_1.xml`。）

* * *

如果`db.getAllContacts();`将 Cursor 转换为`List<Contact>`考虑跳过此步骤并改用 SimpleCursorAdapter。

# c# - 无法扩展 facebook 访问令牌

> ID：12607929
> 
> 赞同：0
> 
> 时间：2012-09-26T18:15:18.743
> 
> 标签：c#, facebook, facebook-c#-sdk

我正在尝试扩展我的 facebook 访问令牌，以下是我所做的。但是，我无法延长令牌，当我检查 facebook accesstoken 调试器时，它仍然显示令牌将在一小时内到期。

有任何想法吗？

```
 private string appId = "my app id";
    private string appSecret = "my app secret";
    private string returnUrl = "http://localhost:1868/callback";
    private string _scope = "user_about_me,publish_stream,user_videos,user_photos";

    [Test]
    public void GetFacebookLoginUrl()
    {
        var fb = new FacebookClient();
        dynamic result = fb.GetLoginUrl(
            new
                {
                    client_id = appId,
                    client_secret = appSecret,
                    redirect_uri = returnUrl,
                    response_type = "code",
                    scope = _scope
                }
            );
    }

    [Test]
    public void exchangeCodeForAccessToken()
    {
        var fb = new FacebookClient();
        dynamic result = fb.Get("oauth/access_token", new
        {
            client_id = appId,
            client_secret = appSecret,
            redirect_uri = returnUrl,
            code = "got the code after user accepts the request"
        });
    }

    [Test]
    public void ExtendExpiryTimeOfAccessToken()
    {
        var fb = new FacebookClient();
        dynamic result = fb.Get("oauth/access_token", new
        {
            client_id = appId,
            client_secret = appSecret,
            grant_type = "fb_exchange_token",
            fb_exchange_token = "token from preview method"
        });
    } 
```

**解决方案**

从用户帐户中取消对应用程序的授权后，一切都开始变得有意义。需要注意的一件事是，上面的代码实际上得到了一个“长寿命”的访问令牌，有效期为 60 天，并且不能延长。

如果使用[Facebook 客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/ "Facebook 客户端身份验证")，则可以使用“ExtendExpiryTimeOfAccessToken”示例对其进行扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:38:18.893

如果您最初开始开发应用程序并在离线访问折旧之前的几个月前登录，您可能会受到此错误的影响。

[https://developers.facebook.com/bugs/341793929223330](https://developers.facebook.com/bugs/341793929223330)

如果您受到影响，您需要取消对应用程序的授权，然后重试，这不会影响新用户。

# jqgrid - jqGrid - 禁用特定列的重新排序

> ID：12607931
> 
> 赞同：1
> 
> 时间：2012-09-26T18:15:23.613
> 
> 标签：jqgrid

我有一个启用了网格级“可排序”选项的 jqGrid。这让我可以拖动列来重新排序，这很棒。但我想阻止用户使用一个特定的列执行此操作，而其他列不受影响。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:34:20.837

我觉得你的问题很有趣，所以我制作[了相应的演示](http://www.ok-soft-gmbh.com/jqGrid/sortablecolumns2.htm)来演示解决方案。在演示中，第一列“日期”无法排序。

我建议您阅读关于关闭主题的另外两个旧答案：[this](https://stackoverflow.com/a/2775577/315935)和[this](https://stackoverflow.com/a/9045125/315935)。我的建议是基于同样的想法。

如果使用 jqGrid 的选项，则有内部 jqGrid 方法[sortableColumns](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.jqueryui.js#L52)将在内部使用`sortable: true`。该`sortableColumns`方法使用 jQuery Sortable 来实现并初始化`items`具有`id="list"`值“>th:not(:has(#jqgh_list_cb,#jqgh_list_rn,#jqgh_list_subgrid),:hidden)”的网格选项。它使列和`"cb"`不可排序。如果您使用 jqGrid 选项，则可以在网格中插入列，或者。同样，如果您拥有该列，则该列元素的相应 id 将是。所以可以使用以下选项`"rn"``"subgrid"``multiselect: true``rownumbers: true``subGrid: true``name: "invdate"``jqgh_list_invdate``sortable`

```
sortable: {
    options: {
        items: ">th:not(:has(#jqgh_list_cb,#jqgh_list_invdate,#jqgh_list_rn,#jqgh_list_subgrid),:hidden)"
    }
} 
```

使`"invdate"`列不可排序。

# java - Java 中的 3DES 结果产生与 3DES iOS 版本不同的结果

> ID：12607937
> 
> 赞同：0
> 
> 时间：2012-09-26T18:15:54.750
> 
> 标签：java, ios, algorithm, encryption, 3des

我真的真的……真的需要帮助…………

**-更新-**

我需要帮助，因为与 iOS 3DES 函数相比，我的 java 函数给了我不同的结果。我发布了来自 ios 和 java 的代码；当指定明文为“tutor.1”且 MD5 密钥为“spO13+QLZCRAe93pIXMXLg==”（显然，MD5 对两者相同）时的结果。

**JAVA 3DES**（简短而简单）

```
public static String encrypt(String plaintext, String enctoken){

    if(enctoken == null)
        enctoken = "sfdjf48mdfdf3054";

    String encrypted = null; 

    byte[] plaintextByte = EncodingUtils.getBytes(plaintext,"UTF-8");

    byte[] hash = Connessione.md5(enctoken);

    Log.i("ENCRYPT", "MD5: "+Base64.encodeToString(hash, 0));

    try {
        Cipher cipher = Cipher.getInstance("DESEDE/ECB/PKCS5Padding");
        SecretKeySpec myKey = new SecretKeySpec(hash,"DESede");

        cipher.init(Cipher.ENCRYPT_MODE, myKey); 

        try {
            byte[] encryptedPlainText = cipher.doFinal(plaintextByte);

            encrypted = Base64.encodeToString(encryptedPlainText, 0);

            Log.i("ENCRYPT", "Pwd encrypted: "+encrypted);

            return encrypted;

        } catch (IllegalBlockSizeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BadPaddingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       

    return "";
} 
```

结果：*R4mXAaHcFxM=*

**IOS 3DES - 再次更新**

```
// key value in parameters is MD5 value! It is the same for both version

+ (NSString *) encrypt:(NSString *) dataToEncrypt withKey:(NSString*) key{    

NSData *data = [dataToEncrypt dataUsingEncoding:NSUTF8StringEncoding];
NSData *mData = [key dataUsingEncoding:NSUTF8StringEncoding];

CCCryptorStatus ccStatus = kCCSuccess;

// Begin to calculate bytesNeeded....
size_t bytesNeeded = 0;

ccStatus = CCCrypt(kCCEncrypt,
                   kCCAlgorithm3DES,
                   kCCOptionECBMode | kCCOptionPKCS7Padding,
                   [mData bytes],
                   [mData length],
                   nil,
                   [data bytes],
                   [data length],
                   NULL,
                   0,
                   &bytesNeeded);

if(kCCBufferTooSmall != ccStatus){

    NSLog(@"Here it must return BUFFER TOO SMALL !!");
    return nil;
}

// .....End
// Now i do the real Crypting

char* cypherBytes = malloc(bytesNeeded);
size_t bufferLength = bytesNeeded;

if(NULL == cypherBytes)
    NSLog(@"cypherBytes NULL");

ccStatus = CCCrypt(kCCEncrypt,
                   kCCAlgorithm3DES,
                   kCCOptionECBMode | kCCOptionPKCS7Padding,
                   [mData bytes],
                   [mData length],
                   nil,
                   [data bytes],
                   [data length],
                   cypherBytes,
                   bufferLength,
                   &bytesNeeded);

if(kCCSuccess != ccStatus){
    NSLog(@"kCCSuccess NO!");
    return nil;
}

return [Base64 encode:[NSData dataWithBytes:cypherBytes length:bufferLength]]; 
```

}

结果：*YBAva5J2khY=*

我需要 iOS 版本返回与 Java 版本相同的结果。

我在这里找到了 Base64 类：[http ://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)

我做错了什么？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:46:50.263

Ok, I started off easier, using DES encryption. Also, I'm skipping the Base64 and the hashing on the key - all of these are easily added once you're sure that the encryption is working properly, and they can be added one at a time.

Here's the iOS code:

```
#import <UIKit/UIKit.h>
#import <CommonCrypto/CommonCrypto.h>
#import <CommonCrypto/CommonCryptor.h>

int main(int argc, char *argv[])
{
    @autoreleasepool {

            BOOL encryptOrDecrypt = kCCEncrypt;
            NSString *plainText = @"abcdefghijklmnop";
            NSString *key = @"01234567";

            const void *vplainText;
            size_t plainTextBufferSize;

            NSData *tempData = [plainText dataUsingEncoding:NSASCIIStringEncoding];
            plainTextBufferSize = [tempData length];
            vplainText =  [tempData bytes];

            CCCryptorStatus ccStatus;
            uint8_t *bufferPtr = NULL;
            size_t bufferPtrSize = 0;
            size_t movedBytes = 0;

            bufferPtrSize = [plainText length];
            if (bufferPtrSize % 8) {
                bufferPtrSize += 8 - (bufferPtrSize % 8);
            }

//            bufferPtrSize = (plainTextBufferSize + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);
            bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t) + 1);   // To null-terminate a string if req'd
            memset((void *)bufferPtr, 0x0, bufferPtrSize+1);

            NSData *_keyData = [key dataUsingEncoding:NSASCIIStringEncoding];

            NSLog(@"key byte is %s", [_keyData bytes]);

            // Initialization vector; dummy in this case 0's.
            // uint8_t iv[kCCBlockSize3DES];
            // memset((void *) iv, 0x0, (size_t) sizeof(iv));

            ccStatus = CCCrypt(encryptOrDecrypt,
                                   kCCAlgorithmDES,
                                   kCCOptionECBMode, //kCCOptionPKCS7Padding | kCCOptionECBMode,
                                   (const void *)[_keyData bytes], //key
                                   kCCKeySizeDES,
                                   nil,  //iv,
                                   vplainText,  //plainText,
                                   plainTextBufferSize,
                                   (void *)bufferPtr,
                                   bufferPtrSize,
                                   &movedBytes);

            //if (ccStatus == kCCSuccess) NSLog(@"SUCCESS");
            /*else*/
            switch (ccStatus) {
                case kCCParamError:
                    NSLog(@"PARAM ERROR");
                    break;
                case kCCBufferTooSmall:
                    NSLog(@"BUFFER TOO SMALL");
                    break;
                case kCCMemoryFailure:
                    NSLog(@"MEMORY FAILURE");
                    break;
                case kCCAlignmentError:
                    NSLog(@"ALIGNMENT ERROR");
                    break;
                case kCCDecodeError:
                    NSLog(@"DECODE ERROR");
                    break;
                case kCCUnimplemented:
                    NSLog(@"UNIMPLEMENTED");
                    break;
                default:
                    NSLog(@"encrypt seems to have worked");
                    break;
            }

            for (size_t i=0; i<movedBytes; i++) {
                printf("%02x ", (int) bufferPtr[i]);
            }
            printf("\n");

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([FAAppDelegate class]));
    }
} 
```

And here's the Java code:

```
import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Arrays;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import javax.xml.bind.DatatypeConverter;

public class DesRun {
    /**
     * @param args
     */
    public static void main(String[] args) {
        String theKey = "01234567";
        String message = "abcdefghijklmnop";
        Cipher ecipher, dcipher;
         try {
            // generate secret key using DES algorithm
             SecretKeySpec key = new SecretKeySpec(theKey.getBytes("UTF-8"), "DES");

                 ecipher = Cipher.getInstance("DES");
                 dcipher = Cipher.getInstance("DES");

                 // initialize the ciphers with the given key
                 ecipher.init(Cipher.ENCRYPT_MODE, key);
                 dcipher.init(Cipher.DECRYPT_MODE, key);

                 byte[] encrypted = ecipher.doFinal(message.getBytes("UTF-8"));
                 System.out.println(DatatypeConverter.printHexBinary(encrypted));
                 String decrypted = new String(dcipher.doFinal(encrypted), "UTF-8");

                 System.out.println("Decrypted: " + decrypted);

             }
             catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }
} 
```

Both print out the hex bytes of the encrypted data, and they agree.

Now it should be (relatively) easy to move to 3DES.

Only once you've got 3DES agreeing on both iOS and Java would I start to add hashing on the keys.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:24:00.690

Error found. keydata encoding was different

# android - 怎么去上一个活动？

> ID：12607942
> 
> 赞同：0
> 
> 时间：2012-09-26T18:16:21.890
> 
> 标签：android

此代码不会转到以前的活动，当单击按钮时应该这样做：当前活动到另一个活动。如果我写完成（）；工作正常，但我的代码有什么问题？在我的第三个活动`AgAppAskPinForTransaction` 中，当我按下后退按钮时不会转到`agappmenu.class`（上一个活动）。这段代码有什么问题？怎么去上一个活动？我不想使用“ `finish();`”我只想关闭当前活动并在单击按钮时转到上一个活动？

```
public class LoginScreen extends Activity  {

       Intent i = new Intent(this.getApplicationContext(), AgAppMenu.class);

         MyBean bean = new MyBean();
         bean.set2DArray(xmlRespone);
         Bundle b = new Bundle();
            b.putSerializable("mybean", bean);
            i.putExtra("obj", b);
            startActivity(i);

              public class AgAppMenu extends Activity {

            Intent intent = new Intent(AgAppMenu.this,  
   AgAppAskPinForTransaction.class);

 Bundle bundle = new Bundle();
    bundle.putString("mno", "MIN");
    intent.putExtras(bundle);

startActivity(intent);
   }

         public class AgAppAskPinForTransaction extends Activity{

             btngoback.setOnClickListener(new OnClickListener()
{
public void onClick(View v)

{
Intent intent = new Intent(AgAppMenu.this,          
     AgAppAskPinForTransaction.class);
    startActivity(intent);

      }

                                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:19:19.617

```
Intent i = getIntent();
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActvitiy(i); 
```

编辑：把它放在活动 3 中

```
@Override 
public void onBackPressed () 
{
     startActivity(new Intent(this, Activity1.class);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:26:26.827

尝试开始您以前的活动，例如

```
Intent i = new Intent(context, MyFourActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
startActvitiy(i); 
```

并阅读`Intent`您发送的新覆盖 `onNewIntent`方法`AppMenu Activity`

# sql - 在 SQL 中提取 XML 数据 - 过多的交叉应用语句

> ID：12607943
> 
> 赞同：3
> 
> 时间：2012-09-26T18:16:22.703
> 
> 标签：sql, xml, singleton, cross-apply

我有一个包含声明详细信息的 xml 文档：

```
<Statement>
<Id />

<Invoices>
    <Invoice>
        <Id />
        <Date />
        <AmountDue />
        etc.
    </Invoice>

    <Invoice>
        <Id />
        <Date />
        <AmountDue />
        etc.
    </Invoice>

    <Invoice>
        <Id />
        <Date />
        <AmountDue />
        etc.
    </Invoice>
</Invoices>

</Statement> 
```

这适用于声明特定细节：

```
SET @statementId = @xml.value('(Id)[1]', 'UNIQUEIDENTIFIER'); 
```

但它需要一个单例，并且只返回第一个值。我需要发票的所有值，而不仅仅是第一个值，所以单例不起作用。

我可以使用这样的交叉应用语句获取信息：

```
SELECT 
@statementId AS STATEMENT_ID
Id.value('.', 'uniqueidentifier') AS INVOICE_ID
Date.value('.', 'smalldatetime') AS INVOICE_DATE
Due.value('.', 'decimal') AS INVOICE_AMOUNT_DUE

FROM @xml.nodes('Statement') A(S)
cross apply S.nodes('Invoices/Invoice') B(InvoiceD)
cross apply InvoiceD.nodes('Id') C(Id)
cross apply InvoiceD.nodes('Date') D(Date)
cross apply InvoiceD.nodes('AmountDue') E(Due) 
```

这将返回报表中每个发票的 ID、日期和金额 - 完美。

当我尝试提取所有发票详细信息时，我的问题就出现了。我目前有七个交叉应用语句，我收到以下消息：

> “查询处理器耗尽了内部资源，无法生成查询计划。这是一种罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您相信您错误地收到了此消息，请联系客户支持服务以获取更多信息。”

我想要做的是有一个交叉申请发票并缩小选择语句中的确切字段，但除非我使用'。我必须让语句返回一个单例，并且我没有得到我需要的所有数据。

我已经对在 select 语句中指定命名空间进行了一些研究，但是所有示例都将命名空间设置为 http 地址而不是 xml 文档中的节点，并且使用这种方法我还没有得到任何返回。

我正在寻找的结果是这样的，但有更多的发票详细信息：

```
STATEMENT_ID      INVOICE_ID      INVOICE_DATE      INVOICE_AMOUNT_DUE     ...
Statement-1-Id    Invoice-1-Id    Invoice-1-Date    Invoice-1-AmountDue    ...
Statement-1-Id    Invoice-2-Id    Invoice-2-Date    Invoice-2-AmountDue    ...
Statement-1-Id    Invoice-3-Id    Invoice-3-Date    Invoice-3-AmountDue    ... 
```

我应该从这里去哪里？

编辑：我删除了一些不必要的信息。获取所有发票特定的详细信息是我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:15:09.703

```
select @XML.value('(Statement/Id/text())[1]', 'uniqueidentifier') as StatementId, 
       T.N.value('(Id/text())[1]', 'uniqueidentifier') as InvoiceId,
       T.N.value('(Date/text())[1]', 'smalldatetime') as InvoiceDate,
       T.N.value('(AmountDue/text())[1]', 'decimal') as AmountDue
from @XML.nodes('/Statement/Invoices/Invoice') as T(N) 
```

`.nodes`会将您的 XML 分解为行，以便每一行都`T.N`指向自己的 Invoice 节点。在该节点上只有一个`Id`节点，因此获取指定单例的值是可行的`Id[1]`。

你可以使用`Id[1]`or`(Id/text())[1]`但后者会给你一个更有效的执行计划。

# android - android旋转处理

> ID：12607945
> 
> 赞同：0
> 
> 时间：2012-09-26T18:16:31.843
> 
> 标签：android, testing

`onDestroy()`旋转屏幕时保证会被调用吗？

我听说可以定义`onConfigurationChanged()`以更改此默认行为。用那种方法通常会写什么？还有什么其他方法可以改变默认的旋转行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:27:43.110

`onDestroy()`旋转屏幕时保证会被调用吗？

是的

[onConfigurationChanged()](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)将针对您想要自己处理的任何配置更改调用（您在清单中的 configChanges 下声明这些配置）。我认为最好的办法是完全避免这种情况。

您可以通过为您的活动设置方向来禁用清单中的旋转，例如“纵向”或“横向”

[通常，如果方向可以更改，您将希望使用onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)保存并恢复一些数据，然后在 onCreate 中恢复数据

# java - setShapesVisible 的类比

> ID：12607952
> 
> 赞同：1
> 
> 时间：2012-09-26T18:17:14.313
> 
> 标签：java, jfreechart

嗨，我需要让图表上的点可见，但 setShapesVisiable 方法现在已弃用。可能有人知道这种方法的类似物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:19:17.277

ou我找到答案））

我们需要使用 setSeriesShapesVisible 方法。

# mysql - 内连接 + 计数 + 分组依据

> ID：12607953
> 
> 赞同：0
> 
> 时间：2012-09-26T18:17:19.073
> 
> 标签：mysql, count, group-by, inner-join

我无法计算/分组内部连接的结果

我有两张桌子

1.  `results_dump`: 其中有两列: `email`and `result`(结果值可以是`open`or `bounce`)

2.  `all_data`: 其中包含三列`email`：`full_name`和`address`

第一个目标是查询 result_dump 表并计算和分组结果`"open"`针对特定`email`.

此查询效果很好：

```
SELECT `email`, COUNT(*) AS count
FROM `result_dump`
WHERE `date` = "open" 
GROUP BY `email`
HAVING COUNT(*) > 3
ORDER BY count DESC 
```

第二个目标是获取这些结果（任何“打开”超过 3 次的人）并输入“全名”和“地址”，这样我就可以获得有关谁打开电子邮件 3 次以上的详细信息。

我有这个查询，它可以将数据放在一起 - 但我不知道如何获取`COUNT`和使用？`HAVING``ORDER``INNER JOIN`

```
SELECT *
FROM all_data
INNER JOIN result_dump ON 
all_data.email = result_dump.email
where `result` = "open" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:22:36.857

```
SELECT email,name,count(*)
FROM all_data
INNER JOIN result_dump ON 
all_data.email = result_dump.email
where `result` = "open" 
group by result_dump.email
having count(*)>3
ORDER by count DESC 
```

这个我觉得没什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:27:04.840

尝试以下查询：

```
SELECT * FROM all_data AS a
INNER JOIN 
(SELECT * FROM result_dump where email IN 
                                    (SELECT `email`
                                     FROM `result_dump`
                                     WHERE `date` = "open" 
                                     GROUP BY `email`
                                     HAVING count(email) >3
                                     ORDER BY count(email) DESC)) AS b
ON a.email = b.email
WHERE b.`result` = "open" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-12T12:31:57.997

**这是工作正常...！**试试这个。。

```
SELECT title.title
       ,count(*)
       ,title.production_year
       ,title.id as movie_id
       ,title.flag as language
       ,movie_info.info
FROM title INNER JOIN movie_info ON title.id=movie_info.movie_id; 
```

# bash - 将文件夹动态符号链接到其他文件夹的正确方法

> ID：12607957
> 
> 赞同：1
> 
> 时间：2012-09-26T18:17:33.423
> 
> 标签：bash, shell

我有一个包含我的应用程序的文件夹。然后我在另一个目录中拥有灵活数量的文件夹，称为“站点”。它看起来像这样：

```
+ -Application
+ -- Test.html
+ -- CSS
+ --- Style.css

+ -Sites 
+ --Site1
+ --Site2 
```

我想将应用程序文件夹中的所有文件符号链接到站点文件夹下的每个文件夹中。因此，最终结果将如下所示：

```
+ -Sites 
+ --Site1
+ -- Test.html
+ -- CSS
+ --- Style.css
+ --Site2
+ -- Test.html
+ -- CSS
+ --- Style.css 
```

所以我认为第一步是循环在 Sites 文件夹中找到的所有文件夹，然后对文件夹中的所有内容执行符号链接。我不能真正编码，但从我的阅读来看，这样的东西可能是一个起点？

```
find ./* -type d |
while read LINE
do
        echo ln -s /absolute/path/to/files/* "$LINE"
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:10:14.713

```
for dir in Sites/*; do
    cd "$dir" && ln -s ../../Application/* . && cd -
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:51:36.113

它非常简单直观。你可以让它进入每个站点并执行：

```
ln -s ../../Application/* . 
```

您可以使用 AWK（从根目录）为所有“站点”运行它：

```
ls -l | awk '$1 ~ /d.*/ && $NF !~ /Application/ && NF > 5 {system("cd "$NF" ; ln -s ../../Application/* .");}' - 
```

描述：列出文件，获取目录（/d.*/），忽略应用程序文件夹，转到每个文件夹（cd $NF）并执行“魔术线”。

# json - 带有 JSON 正文的 Mule ESB HTTP 帖子

> ID：12607958
> 
> 赞同：2
> 
> 时间：2012-09-26T18:17:37.373
> 
> 标签：json, http, post, mule

我很难弄清楚如何在请求正文中使用 JSON 进行 HTTP POST。我的流程示例发布在下面。我有一个轮询 POJO 的轮询器，它在轮询时生成一个 JSON。然后，我需要获取这个 JSON 并在正文中使用它向外部 REST 服务执行 HTTP POST。Apache HTTP 客户端等效项是为我的 JSON 消息设置一个字符串实体，并将标头内容类型设置为 application/json。我将如何在 Mule 中执行此操作？在此先感谢您的帮助。

```
<flow name="flow1" doc:name="flow1">
    <poll frequency="100000">
        <logger message="starting" level="INFO" doc:name="Logger"/>
    </poll>
    <component class="JavaJSONGeneratorClass" doc:name="ReferenceToJavaClass"/>
    <echo-component doc:name="Echo"/>
    <http:outbound-endpoint exchange-pattern="request-response" host="xxx.xxx.xxx.xxx" port="8080" path="path/to/service" doc:name="HTTP"/>
    <logger level="INFO" doc:name="Logger"/>
    <byte-array-to-string-transformer doc:name="Byte Array to String"/>
    <echo-component doc:name="Echo"/>
</flow> 
```

Java 类会做这样的事情：

```
import java.io.Serializable;

import org.mule.api.MuleEventContext;
import org.mule.api.MuleMessage;
import org.mule.api.lifecycle.Callable;
import org.mule.module.client.MuleClient;

public class JSONGenerator implements Callable, Serializable 
{

@Override
public Object onCall(MuleEventContext eventContext) throws Exception 
{

    String json = generateSomeJson(some_parameter);

    return json;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:36:11.673

您可能只是忘记将 contentType 属性设置为您的 http 出站端点，该端点应如下所示：

```
<http:outbound-endpoint exchange-pattern="request-response" host="xxx.xxx.xxx.xxx" port="8080" path="path/to/service" doc:name="HTTP" contentType="application/json"/> 
```

mule 还为 Json 提供了 OOTB 解决方案，例如用于 EE 版本的[object-to-json-transformer](http://www.mulesoft.org/documentation/display/MULE3USER/Native+Support+for+JSON)或 [DataMapper](http://www.mulesoft.org/documentation/display/MULE3STUDIO/DataMapper+Transformer+Reference)，因此我建议尽可能使用其中一种而不是自定义的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:02:36.153

您缺少 http 方法，请尝试以下操作：

`<http:outbound-endpoint exchange-pattern="request-response" host="xxx.xxx.xxx.xxx" port="8080" path="path/to/service" doc:name="HTTP" method="POST"/>`

# ios - 从 InterfaceBuilder 修改 UINavigationViewController 的 UIToolBar

> ID：12607960
> 
> 赞同：0
> 
> 时间：2012-09-26T18:17:42.380
> 
> 标签：ios, cocoa-touch, interface-builder

我有一个`UINavigationViewController`，并且从 InterfaceBuilder 我添加了一个 ToolBar 单击 Attributes Inspector / Navigation Controller / Shows Toolbar

我`RootViewController`现在显示一个带有单个按钮的工具栏，但由于某种原因我无法修改它。单击工具栏选择底层`RootViewController`，我可以通过拖放添加按钮，但我无法选择现有按钮（因此无法修改或重命名它们）。

如何`UINavigationViewController's`从 InterfaceBuilder 修改 ToolBar 项？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:31:34.493

在 Interface Builder 中，如果您单击 .xib 中的工具栏，它可能不会选择您的工具栏按钮，而是选择整个工具栏。尝试在设计视图左侧的大纲视图中查找工具栏，然后单击按钮将其选中。

# c# - http post请求崩溃

> ID：12607962
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:17:46.263
> 
> 标签：c#, java, http, request

我正在尝试执行一些发布请求，我审查了该网站，因为它有一些敏感数据。这是代码：

```
 HttpClient httpclient = new DefaultHttpClient();   
    HttpPost httppost = new HttpPost("http://www.someaddress.com"); 
        // Add your data   
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);   
        nameValuePairs.add(new BasicNameValuePair("sdata", ""));

        try {
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));
                Log.d("MyTag", "works till here.");
                try {
                    HttpResponse response = httpclient.execute(httppost);
                   // String responseBody = EntityUtils.toString(response.getEntity());
             //       Log.d("MyTag", responseBody);
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } 
```

它在那条线上崩溃：

```
 HttpResponse response = httpclient.execute(httppost); 
```

这是对我来说真的什么都没说的logcat：http: [//pastebin.com/F0YAiNLD](http://pastebin.com/F0YAiNLD)

可能是什么问题呢？为什么会崩溃？我正在尝试将此 C# 代码翻译成 JAVA。C# 代码有效，但 JAVA 代码无效。

这是 C# 代码：

```
 System.Text.UTF8Encoding encoding=new System.Text.UTF8Encoding();
    string pData = "";
    byte[] sdata = encoding.GetBytes(pData);
    HttpWebRequest request = new HttpWebRequest(new Uri("http://www.someaddress.com"));
    request.ContentType="application/x-www-form-urlencoded";
    request.ContentLength = sdata.Length;
    Stream nStream=request.GetRequestStream();
    nStream.Write(sdata,0,sdata.Length);
    nStream.Close();
    HttpWebResponse response = 
    (HttpWebResponse) request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:21:02.317

我不是 Android 开发人员，但在 Google 上对“Android NetworkOnMainThreadException”的简单搜索表明，[当您尝试在主事件线程上执行网络操作时会引发此异常](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)（名称非常自描述），[而您应该在后台线程上进行这些类型的网络调用](http://www.techblogistech.com/2011/11/how-to-fix-the-android-networkonmainthreadexception/)。

通常在 GUI 应用程序中，在可能阻塞的主线程中执行工作（例如网络 HTTP 调用）是一个坏主意，因为它会阻塞主动画循环。

# ruby-on-rails-3 - 使用两部分格式渲染部分

> ID：12607972
> 
> 赞同：0
> 
> 时间：2012-09-26T18:18:25.670
> 
> 标签：ruby-on-rails-3

在 Ajax 驱动程序 Rails 3 应用程序中，I 控制器可以根据上下文返回不同的视图。

例如：

```
/users.json 
```

现在将返回列出用户的完整 HTML 页面：

```
/users.json?partial=listing 
```

将返回部分 HTML 页面。

现在我想知道使用两部分格式说明符，它将上面的内容更改为：

```
/users.json 
```

第一个不会改变，但第二个会变成：

```
/users.listing.json 
```

我觉得部分参数在某种程度上是格式的一部分，至少是返回数据的表示形式，这在某种程度上是格式的用途。就像`jquery.min.js`which 仍然是 javascript，但以另一种表示形式。

问题是如何在 Rails 3 中以优雅的方式实现这一点。这个想法是能够`respond_to`在我的控制器中使用类似的东西。我还需要能够生成网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T23:15:21.903

我结束了使用：

```
/users.json?output=fielda,fieldb 
```

过滤输出。

# java - 在开发基于 Java 的 API 时我应该记住哪些方面

> ID：12607974
> 
> 赞同：2
> 
> 时间：2012-09-26T18:18:40.043
> 
> 标签：java, design-patterns

我正在经历开发基于（Selenium2）Webdriver 的 API 的痛苦，这是我的困境。

我基本上有4个包：

```
com.example.qa.pageobject
com.exmaple.qa.setup
com.example.qa.test
com.example.qa.utils 
```

在`com.example.qa.test`，我有测试类“使用”其他包中的类。

我最终采用了以下测试方法。

```
@Test
    public void testScenario16786() {
        Login login = new Login();
        login.setUp();
        AddSingleDomain asd = new AddSingleDomain();
        asd.addSingleDomain();
        AddARecord ar = new AddARecord();
        ar.AddARecordTest();

    } 
```

现在，这似乎是用 Java 开发的一个非常糟糕的例子，这几乎看起来是程序化的。还有其他方法吗？在设计 API 时，是否有一些我需要注意的规则，这些规则将被其他人使用？我确信这在某种程度上是一个经典问题并且之前已经解决了，我只想知道解决这个问题的许多方法是什么，例如：

一种解决方案，可能是使用工厂模式，并基于一个键，实例化一个特定的类，这很好，但有没有更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:56:03.717

您的测试课程必须是程序性的 - 一组可重复的步骤，这很好。通常推荐的方法是使用 Page Object 模式，selenium 也提供了一个 PageFactory 对象来帮助你（见页尾）： [page objects](http://code.google.com/p/selenium/wiki/PageObjects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:27:57.197

您可能会发现[Joshua Bloch 的演示文稿“如何设计一个好的 API 及其重要性”](http://www.infoq.com/presentations/effective-api-design)很有帮助。

# powershell - Powershell脚本未执行

> ID：12607981
> 
> 赞同：0
> 
> 时间：2012-09-26T18:19:16.323
> 
> 标签：powershell, powershell-2.0

我有一个带有输入参数（int）的powershell脚本。然后脚本会根据这个输入参数更新服务的状态。我一直在使用 powergui 编辑器完成这项任务。

powergui 窗口的屏幕截图

![在此处输入图像描述](../Images/a3181ac4c7a2b60e08dd80c8eb03d555.png)

![在此处输入图像描述](../Images/14f2622e3df9cc02082e8f5bbf2a42b0.png)

每当我尝试从 powershell 文件的命令行运行脚本时， powershell 都没有报告任何内容。没有输出..什么都没有。
来自 powershell 窗口的屏幕截图

![在此处输入图像描述](../Images/272d741e6dc836ba31fbdc49732facc5.png) 你能告诉我这里可能会发生什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:07:56.687

也许您从命令行调用了程序*services.exe 。*您可能会尝试重命名您的函数。

您可能已经知道以下内容，但是您是否在调用函数之前解析了您的 powershell 脚本？这是将您的功能包含到外壳中的必要条件。您必须先调用*D:\ps>.\myScript.ps*才能使用该函数。

# python - 避免在具有嵌入式 Python + C 扩展的应用程序中重复 msvcr90.dll？

> ID：12607985
> 
> 赞同：2
> 
> 时间：2012-09-26T18:19:22.130
> 
> 标签：python, python-extensions, python-embedding, msvcr90.dll

我正在分发一个嵌入 Python 2.7 的 Windows 应用程序（技术：包括带有 DLL 和 Lib 文件夹的 python27.dll + 'Python27' 目录，以及我的 .exe）。我还包括一个使用 C 扩展（基本上是 DLL 的 .pyd 文件）的自定义 Python 包。

我知道我需要有版本 9.0.21022.8 的 msvcr90.dll 和相关的清单。我可以将 msvcr90.dll + manifest 放在我的 .exe 文件旁边，**我可以正常工作**，没有问题。但是为了使用我的自定义 Python 包，我发现我*还*需要在与包的 .pyd 文件相同的级别包含 msvcr90.dll + manifest（如果它们不存在，则应用程序在 PyImport_ImportModule 期间崩溃）。我不明白为什么 .pyds 无法“看到”位于树上方的 msvcr90.dll。

我知道我可以（可能）通过在目标机器上运行 MS Visual C Redistributable 包来绕过这个......这实际上安装了 MSVCR DLL + 清单，因此它在系统范围内可用。但是我不想要求我的用户运行它，也不想尝试将其安装在正确的位置并自己处理版本控制等。

# jquery - Javascript / PHP / Ajax / Json：保护：在输出到浏览器之前转义用户提交的字符串

> ID：12607988
> 
> 赞同：2
> 
> 时间：2012-09-26T18:19:23.867
> 
> 标签：jquery, escaping

我的头脑与这个爆炸，我正在寻找一个简洁的一步一步来转义用户提交的数据，然后再输出到其他用户的浏览器。

流程： 1) 用户 1 提交带有文本字段的 ajax 表单 (jquery)，以 JSON 格式发送。2) PHP 使用 mysqli_real_escape_string() 对字符串进行转义并将其放入数据库中。3) 用户 2 加载一个页面，该页面通过 jquery ajax 请求请求数据，接收为 JSON。该字符串在表单的选择框中显示为一个选项。

我想确保用户 1 不能提交恶意 javascript 或 html - 换句话说，我希望所有字符都被正确转义。我想要有关实现此目标的步骤的指导，下面的代码需要更改什么？

提交表格时：（没有转义）

```
$.ajax({
    url: '/ajax/insert.php', dataType: 'json',
    data: {str: $("input").val()}, success: function(){}
)}; 
```

PHP插入数据库：（转义）

```
mysqli_query(
    "insert into tbl (str) values ('"
        .mysqli_real_escape_string($link, $_REQUEST['str'])
    ."')"); 
```

JQuery获取字符串，放入下拉列表（简化）（在这里转义？）：

```
$.ajax({
    url: '/ajax/get.php', dataType: 'json',
    data: {}, 
    success: function(json){
        $("select").html("<option>" + json.str + "</option>");
    }
}); 
```

用于从数据库中检索的 PHP（在这里转义？）：

```
$res = mysqli_query($link, "select str from tbl where X");
echo json_encode(mysqli_fetch_assoc($res)); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:13:43.690

我决定这样做：

```
$.ajax({
    url: '/ajax/get.php', dataType: 'json',
    data: {}, 
    success: function(json){
        var options = $("select");
        options.html("");
        $.each(json, function(i, v){
            options.append($("<option />").val(v.item_id).text(v.str));
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:30:09.313

另外的选择：

当您将新数据插入数据库时​​，请使用过滤，例如：

```
 /**
     * "Clean" posted vars from special characters with ENT_QUOTES
     */
function filter_spec($str_filter_value)
{
        if(!is_array($str_filter_value))
        {
        $str_filter_value = htmlspecialchars($str_filter_value, ENT_QUOTES);
        $str_filter_value = addslashes($str_filter_value);
        return $str_filter_value;
        }
}

    /**
     * Decode special characters in string encoded with filter_spec() (htmlspecialchars())
     * WARNING: If $safe = false This will decode all special characters to normal state
     * THE SAFE WAY: $safe = true will return the output in safe way. Default option is $safe=true.
     */
function filter_spec_decode($str_filter_value, $safe=true)
{
    if(!is_array($str_filter_value))
    {
        if($safe == true)
        {$str_filter_value = str_replace('&amp;', '&', $str_filter_value);}
        elseif ($safe == false)
        {$str_filter_value = htmlspecialchars_decode($str_filter_value, ENT_QUOTES);}
        $str_filter_value = stripslashes($str_filter_value);
        return stripslashes($str_filter_value);
    }
} 
```

您的 INSERT 字符串更新应该是：

```
$strToInsert = filter_spec($_REQUEST['str']); 
```

您的数据库中的输出代码应该是：

```
$strFromDB = filter_spec_decode($res['str']); // This is with safe enabled 
```

希望这可以帮助！

# html - mediaelement.js 广播流 inf Firefox

> ID：12607989
> 
> 赞同：0
> 
> 时间：2012-09-26T18:19:27.007
> 
> 标签：html, firefox, mp3, mediaelement.js, shoutcast

我想使用 mediaelement 播放广播网络广播流。

问题是 Firefox 不支持 html5 mp3。添加故障保护闪存播放器或任何其他解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:29:56.213

mediaelement.js 有一个内置的 Flash 播放器作为后备。你有什么问题？

对于我们的 Shoutcast 流，我们使用“http://255.255.0.0/;stream.nsv”作为音频源（当然，使用真实的 IP 地址）。分号是必需的，它告诉 Shoutcast 将流而不是管理页面传送到浏览器。

# ios - 在 Finder 中更改文件后，Xcode 无法自行定位文件

> ID：12607990
> 
> 赞同：0
> 
> 时间：2012-09-26T18:19:28.123
> 
> 标签：ios, xcode, finder

我将 xcode 项目文件夹中的一些文件移动到 finder 窗口中的子文件夹，以使项目中的文件有序。移动文件后，它不会在 xcode 中更新。相反，这些文件在 xcode 项目导航器中以红色显示。所以我必须在查找器中找到每个文件并每次都给出路径。有没有办法让 xcode 找到在其查找器位置复制或移动的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:01:13.427

将这些文件拖到 Xcode 的组和文件中。

![在此处输入图像描述](../Images/99614da8d5c53d2302e2597f7221a4da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:28:03.903

您可以通过将文件夹从 Finder 拖到您的项目中来将文件夹添加到 Xcode 项目中。您将在 Project Navigator 中看到该文件夹​​以蓝色显示，在 File Inspector 中，该文件夹被列为“绝对路径”而不是“相对于组”。当您在 Finder 中修改此文件夹时，它将在 Xcode 中更新。

# android - 摩托罗拉设备上设置的 Android 应用程序共享选项

> ID：12607991
> 
> 赞同：0
> 
> 时间：2012-09-26T18:19:28.687
> 
> 标签：android, settings, share

似乎某些 Android 设备具有共享选项。当用户转到设置应用程序并单击任何应用程序时可用。单击后，用户可以选择通过电子邮件或短信分享 Android 市场链接和短消息。到目前为止，我只在摩托罗拉设备上看到了这一点。我试图在没有任何运气的情况下更改消息。

我已经查看了 Settings 和 ApplicationInfo 但没有任何帮助。有什么建议吗？![在此处输入图像描述](../Images/ac1f5c49631ebe36acf1701e33185f91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:38:57.510

“分享”按钮不是标准 Android 的一部分。我怀疑您对该按钮的行为有任何控制权。如果您认为这是摩托罗拉的一项功能，您可以考虑在 MOTODEV 支持板上询问。

# php - UTF8 编码的字符串在 MySQL 中未正确显示

> ID：12607995
> 
> 赞同：2
> 
> 时间：2012-09-26T18:19:42.180
> 
> 标签：php, mysql, html, character-encoding

所以我编写了一个爬虫程序，用 charset utf8 从网站上抓取信息和数据。但是当我尝试将内容存储到 MySQL 中时，一些特殊字符（例如西班牙字母）在 MySQL 中没有正确显示。

这是我所做的：

1.  放入`header("Content-Type: text/html; charset=utf-8")`PHP
2.  将 MySQL 中的所有字符集设置为`utf8-unicode-ci`
3.  连接时有`$conn->query("SET NAMES 'utf8'")`这个
4.  仔细检查我解析的 html 是用 utf-8 编码的

那么这里有哪些潜在的问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:41:03.200

首先检查数据库中的数据是否存储错误，在这种情况下，问题出在您的爬虫上。否则问题出在您的演示文稿中。

为了测试这一点，我建议您使用专用的 mysql 客户端（例如命令行客户端）来检查数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:50:28.797

也许您使用不应管理多字节字符的函数编写爬虫代码。
例如 strlen 而不是 mb_strlen。

尝试放置：

```
mb_internal_encoding("UTF-8"); 
```

作为你的 php coce 的第一行，然后检查你是否必须在它们各自的 mb 版本中转换一些函数。看看[多字节字符串参考](http://php.net/manual/en/book.mbstring.php)

作为最后的机会，您可以在将字符串插入 mysql 之前使用[iconv 函数。](http://php.net/manual/it/function.iconv.php)
比如：

```
$utf8_string = iconv(iconv_get_encoding($string), "UTF-8", $string); 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:59:45.420

我记得我在处理 UTF8 问题时不遗余力，直到我开始将它添加到我的标题中：

```
setlocale(LC_ALL, 'en_US.UTF-8'); 
```

# java - Java - 等于和哈希码

> ID：12607996
> 
> 赞同：1
> 
> 时间：2012-09-26T18:19:59.423
> 
> 标签：java, equals, hashcode

我正在考虑`Set`在 Java 中使用 BusinessObjects。我的意图是，在每个集合中，每个业务对象应该只有一个实例，但一个业务对象可以在多个集合之间共享。所以，举个例子：

```
BO1 - instance of BusinessObject1
BO11 - instance of BusinessObject1
BO2 - instance of BusinessObject2 
```

这是对的

[BO1、BO2] 或 [BO1]

但这不是 [BO1, BO11]

因为我想确保这是强制执行的，所以我想像这样指定一个 AbstractBusinessObject：

```
public abstract class AbstractBusinessObject {

    @Override
    public int hashCode() {
        return this.getClass().getName().hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (obj != null)
            return this.getClass() == obj.getClass();
        return false;
    }
} 
```

你认为这是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:22:37.323

为什么不简单地使用枚举？您可以使用`Enum`业务对象和`EnumSet`业务对象。

```
public enum Day {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,
    THURSDAY, FRIDAY, SATURDAY;
    static final EnumSet<Day> weekend = EnumSet.of(SATURDAY,SUNDAY);
} 
```

教程[在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

现在，如果您的业务对象不是为上述目的而设计的，那么只需以正常方式实现 equals 和 hashcode。HashSet add 方法无论如何都会忽略重复项。

这个[链接](http://www.javaworld.com/community/?q=node/1006)讨论了equals和hashcode合约。

对于业务对象，一般规则是相等的，并且需要使用您的业务对象 PK 来实现哈希码。

Like For Employee 对象，员工编号可以被视为业务密钥，而 pk 可以不同，因此 equals 和 hashcode 应该基于员工编号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:24:11.440

不，这是个坏主意。这实际上并不能阻止代码的不同部分执行

```
BusinessObject bo1 = new BusinessObject();
bo1.setId(1);
bo1.setName("foo");

BusinessObject bo1copy = new BusinessObject();
bo1copy.setId(1);
bo1copy.setName("bar"); 
```

因此具有具有不同字段值的相同“业务对象”的两个副本。

您的 equals() 实现还将所有实例`BusinessObject`视为具有相同的值（`bo1.equals(bo1copy) == true`在上面的代码中），这将在任何类型的集合中使用它。

如果您需要控制在程序中实例化的某种类型的实例数量，那么只需实例化对象的一个​​实例即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:26:00.270

将所有业务对象放入一个 HashSet。HashSet 中不能有重复项（通过 equals 方法），因此如果将 B1、B11 和 B2 放入 HashSet，它将包含 B1 和 B2。

您应该覆盖 BusinessObject 中的 equals 和 hashCode 方法，以使用那些使 BusinessObject 唯一的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:40:27.143

如果由于某种原因您不能遵循 AmitD 的建议并使用 Enums，那么您可以使用在标记界面上键入的 Maps 而不是 Sets。

我不知道这会解决什么问题，但是...

1.  创建一个新的 Marker 界面
2.  让您的每个业务对象类实现它
3.  在您想要收集如您所描述的每个地方，使用

    ```
    Map<Class<? extends Marker>, Marker> soloBOMap = // whatever concrete map;
    soloBOMap.put(bo.getClass(), bo); 
    ```

有点奇怪; 我敢肯定。

# algorithm - 如何证明 BFS 有向图遍历算法是可终止的？

> ID：12607999
> 
> 赞同：0
> 
> 时间：2012-09-26T18:20:15.413
> 
> 标签：algorithm

如何证明 BFS 有向图遍历算法是**可终止**的？[（我从这里](http://en.wikipedia.org/wiki/Breadth-first_search)复制伪代码）输入：图 G 和 G 的根 v

```
 procedure BFS(G,v):
      create a queue Q
      enqueue v onto Q
      mark v
      while Q is not empty:
          t ← Q.dequeue()
          if t is what we are looking for:
              return t
          for all edges e in G.incidentEdges(t) do
             o ← G.opposite(t,e)
             if o is not marked:
                  mark o
                  enqueue o onto Q 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:24:26.683

每个节点最多被访问（标记）一次，因此在最坏的情况下，您将标记所有节点，然后算法将终止。