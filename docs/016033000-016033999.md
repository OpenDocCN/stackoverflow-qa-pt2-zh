# StackOverflow 问答 16033000-16033999

# android - google analytics crash report only shows first line of stacktrace

> ID：16033001
> 
> 赞同：6
> 
> 时间：2013-04-16T09:10:53.877
> 
> 标签：android, google-analytics, crash-reports

My application uses Google Analytics to track exceptions and crashes (among other thigs). I use this function to get the stacktrace:

```
public static void sendErrorReportViaGoogleAnalytics(Exception e) {

    e.printStackTrace();
    Tracker myTracker = EasyTracker.getTracker();
    myTracker.sendException(getDescription(e), false);
}

public static String getDescription(Exception t) {

    final StringBuilder result = new StringBuilder();
    result.append(t.toString());
    result.append(',');
    String oneElement;

    for (StackTraceElement element : t.getStackTrace()) {
        oneElement = element.toString();
        result.append(oneElement);
        result.append(",");
    }

    return result.toString();
} 
```

This works fine, when talking about exceptions, I just call sendErrorReportViaGoogleAnalytics() in the catch part of my exception handling codes, but when it comes to crashes, I only get one line of the stacktrace, like

```
Binary XML file line #11: Error inflating class fragment 
```

I set

```
<bool name="ga_reportUncaughtExceptions">true</bool> 
```

in analytics.xml, as I'm using EasyTracker.

What should I do to get the full stacktrace in case of crashes as well?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T12:11:58.060

刚遇到这个问题。只需将给定的代码粘贴到项目的 BaseApplication.onCreate() 方法或其他位置，即可为未捕获的异常设置自定义 ExceptionReporter。不要忘记在analytics.xml 中声明给定的标志。

```
<bool name="ga_reportUncaughtExceptions">true</bool> 
```

自定义未捕获异常报告器：

```
ExceptionReporter myHandler =
        new ExceptionReporter(EasyTracker.getInstance(this), GAServiceManager.getInstance(),
                              Thread.getDefaultUncaughtExceptionHandler(), this);

    StandardExceptionParser exceptionParser =
            new StandardExceptionParser(getApplicationContext(), null) {
                    @Override
                    public String getDescription(String threadName, Throwable t) {
                        return "{" + threadName + "} " + Log.getStackTraceString(t);
                    }
                };

    myHandler.setExceptionParser(exceptionParser);

    // Make myHandler the new default uncaught exception handler.
    Thread.setDefaultUncaughtExceptionHandler(myHandler); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T11:15:49.480

由于您没有描述您实际为捕获崩溃所做的工作，因此我只能将您发送到文档： [https ://developers.google.com/analytics/devguides/collection/android/v2/exceptions](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions)

如果您使用 EasyTracker，您可以声明：

```
<bool name="ga_reportUncaughtExceptions">true</bool> 
```

否则，您可以按照描述实现 ExceptionReporter 类并将其附加到您的线程。

# excel - Open, run embedded macro, save, close, repeat for folder of .xslm files

> ID：16033002
> 
> 赞同：1
> 
> 时间：2013-04-16T09:10:57.253
> 
> 标签：excel, vba

I am trying to run a macro that is embedded in each of 100 files without manually opening, running, saving, and closing them. The macro is only in the "target" files that I would like to run.

I found this [SO question](https://stackoverflow.com/questions/14766238/run-same-excel-macro-on-multiple-excel-files) on how to do this and gotten it to work locally.

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ThisWorkbook.Path
    Wildcard = "Target*.xlsm"
    Filename = Dir(Pathname & "\" & Wildcard)
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & "\" & Filename)
        DoWork wb
        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub

Sub DoWork(wb As Workbook)
    With wb
        'Do your work here
        .Worksheets(1).Range("A1").Value = "Goodbye World!"
    End With
End Sub 
```

I put this VBA script in "Controller.xlsm" and I can run the `DoWork()` macro on a folder of target files with names like "Target1.xlsm", "Target2.xlsm", and so on. But I would like to replace `DoWork()` with a macro that is only in each of the targets (all the same macro, which calls software on this machine). I tried replacing `DoWork()` with things like `OtherMacro` and `Filename!OtherMacro`, but neither work (where `OtherMacro` is the identical macro in each of the "Target*.xlsm" files).

Is this possible? Can I run the macro in "Target*.xlsm" while looping through using a macro in "Controller.xlsm"?

It seems there's also the option to run the macro in "Target*.xlsm" and the others on open. If the macro in "Target*.xlsm" files requires 2 hours to run, will this cause problems? That is, will the macr in "Controller.xlsm" try to save and close "Target*.xlsm" before the work is done? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:40:29.330

我对添加为评论的链接进行了尝试，它可以工作，但确实需要您更改安全权限。如果您知道宏的名称及其位置（模块名称），您应该可以使用`Application.Run`.

我尝试不指定模块名称，但它一直给我一个错误。

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ThisWorkbook.Path
    Wildcard = "Target*.xlsm"
    Filename = Dir(Pathname & "\" & Wildcard)
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & "\" & Filename)
        Application.Run wb.name & "!Module1.DoStuff"
        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub 
```

我确信`Application.Run`它像任何其他 VBA 子程序一样工作，并且它会在执行下一个命令之前等待它完成，但是因为似乎没有办法返回一个值，它可能不是？（您正在同一个 excel 实例中打开一个新工作簿，所以我认为应该没问题）

只需重新阅读您的问题，我认为您有同样的问题，如果可以修改您的宏，您可以删除循环并改用队列。让宏要么返回一个值以指示其完成，要么使用上面的代码调用主表中的子表来执行下一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:02:57.057

我认为您不需要指定宏所在的模块。这应该有效：

```
Application.Run "'" & wb.name & "'!DoStuff" 
```

请注意，工作簿名称必须用单引号引起来。而且我认为目标工作簿中的宏必须是公共的。

# linux - Shell 脚本问题

> ID：16033004
> 
> 赞同：1
> 
> 时间：2013-04-16T09:11:02.890
> 
> 标签：linux, shell

我正在编写一个 shell 脚本来使我开发的应用程序在 Linux 上作为服务运行。当我使用**./smpp-daemon.sh start**时，我编写的 shell 脚本运行良好。但是，当我想使用以下语法时：**sh smpp-daemon.sh start**我收到以下错误：/srv/smpp/bin/smpp-daemon.sh: 26: /srv/smpp/bin/smpp-daemon.sh ：函数：未找到/srv/smpp/bin/smpp-daemon.sh：27：本地：不在函数中。

这是外壳脚本：

```
#!/bin/bash
#
# Unity SMPP Daemon script
#
# Arsene Tochemey GANDOTE

# Set this to your Java installation
JAVA_HOME=/usr/lib/jvm/java-7-oracle

appNameLo="smpp"                               # application name with the first letter in lowercase
appName="SMPP"                                 # application name
osUser="root"                                    # OS user name for the service
osGroup="root"                                  # OS group name for the service
appHome="/srv/$appNameLo"                       # home directory of the service application
osUserHome="/$osUser"                           # home directory of the service user
appLogFile="/var/log/$appNameLo.log"                    # log file for StdOut/StdErr
maxShutdownTime=15                                  # maximum number of seconds to wait for the daemon to terminate normally
pidFile="/var/run/$appNameLo.pid"                   # name of PID file (PID = process ID number)
javaCommand="java"                                  # name of the Java launcher without the path
javaExe="$JAVA_HOME/bin/$javaCommand"               # file name of the Java application launcher executable
javaArgs="-jar $appHome/smsgh-smpp.jar"            # arguments for Java launcher
javaCommandLine="$javaExe $javaArgs"                # command line to start the Java service application
javaCommandLineKeyword="smsgh-smpp.jar"              # a keyword that occurs on the command line, used to detect an already running service process and to distinguish it from others

# Makes the file $1 writable by the group $osGroup.
function makeFileWritable {
   local filename="$1"
   touch $filename || return 1
   chgrp $osGroup $filename || return 1
   chmod g+w $filename || return 1
   return 0;
}

# Returns 0 if the process with PID $1 is running.
function checkProcessIsRunning {
   local pid="$1"
   if [ -z "$pid" -o "$pid" == " " ]; then return 1; fi
   if [ ! -e /proc/$pid ]; then return 1; fi
   return 0;
}

# Returns 0 if the process with PID $1 is our Java service process.
function checkProcessIsOurService {
   local pid="$1"
   if [ "$(ps -p $pid --no-headers -o comm)" != "$javaCommand" ]; then return 1; fi
   grep -q --binary -F "$javaCommandLineKeyword" /proc/$pid/cmdline
   if [ $? -ne 0 ]; then return 1; fi
   return 0;
}

# Returns 0 when the service is running and sets the variable $pid to the PID.
function getServicePID {
   if [ ! -f $pidFile ]; then return 1; fi
   pid="$(<$pidFile)"
   checkProcessIsRunning $pid || return 1
   checkProcessIsOurService $pid || return 1
   return 0;
}

function startServiceProcess {
   cd $appHome || return 1
   rm -f $pidFile
   makeFileWritable $pidFile || return 1
   makeFileWritable $appLogFile || return 1
   cmd="nohup $javaCommandLine >>$appLogFile 2>&1 & echo \$! >$pidFile"
   su -m $osUser -s $SHELL -c "$cmd" || return 1
   sleep 0.1
   pid="$(<$pidFile)"
   if checkProcessIsRunning $pid; then :; else
      echo -ne "\n$appName start failed, see logfile."
      return 1
   fi
   return 0; 
}

function stopServiceProcess {
   kill $pid || return 1
   for ((i=0; i<maxShutdownTime*10; i++)); do
      checkProcessIsRunning $pid
      if [ $? -ne 0 ]; then
         rm -f $pidFile
         return 0
         fi
      sleep 0.1
      done
   echo -e "\n$appName did not terminate within $maxShutdownTime seconds, sending SIGKILL..."
   kill -s KILL $pid || return 1
   local killWaitTime=15
   for ((i=0; i<killWaitTime*10; i++)); do
      checkProcessIsRunning $pid
      if [ $? -ne 0 ]; then
         rm -f $pidFile
         return 0
         fi
      sleep 0.1
      done
   echo "Error: $appName could not be stopped within $maxShutdownTime+$killWaitTime seconds!"
   return 1; 
}

function startService {
   getServicePID
   if [ $? -eq 0 ]; then echo -n "$appName is already running"; RETVAL=0; return 0; fi
   echo -n "Starting $appName   "
   startServiceProcess
   if [ $? -ne 0 ]; then RETVAL=1; echo "failed"; return 1; fi
   echo "started PID=$pid"
   RETVAL=0
   return 0; 
}

function stopService {
   getServicePID
   if [ $? -ne 0 ]; then echo -n "$appName is not running"; RETVAL=0; echo ""; return 0; fi
   echo -n "Stopping $appName   "
   stopServiceProcess
   if [ $? -ne 0 ]; then RETVAL=1; echo "failed"; return 1; fi
   echo "stopped PID=$pid"
   RETVAL=0
   return 0; 
}

function checkServiceStatus {
   echo -n "Checking for $appName:   "
   if getServicePID; then
  echo "running PID=$pid"
  RETVAL=0
   else
  echo "stopped"
  RETVAL=3
   fi
   return 0; 
}

function main {
   RETVAL=0
   case "$1" in
      start)                                               # starts the Java program as a Linux service
         startService
         ;;
      stop)                                                # stops the Java program service
         stopService
         ;;
      restart)                                             # stops and restarts the service
         stopService && startService
         ;;
      status)                                              # displays the service status
         checkServiceStatus
         ;;
      *)
         echo "Usage: $0 {start|stop|restart|status}"
         exit 1
         ;;
      esac
   exit $RETVAL
}

main $1 
```

请提供帮助，因为我不是 shell 脚本极客。我只能绕道而行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:17:42.180

这个问题是双重的：

1.  Bash 不在`sh`Debian、Ubuntu 等系统上，因此当您使用`sh`. Debian 使用`dash`for`sh`代替。
2.  事实上，`local`关键字不是标准的 POSIX sh。Dash 认为这是一个函数调用。

简单的解决方法：不要使用本地，确保您的变量名称是唯一的。Sh 脚本不是我的强项，但据我所知，`local`在您的情况下，只需删除有问题的关键字就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:20:08.817

运行 as`./script`使用“shebang”行中所述的 shell `#!`，或者如果不存在这样的行，则使用您的默认 shell - 后者很可能是 Bash。

运行 as`sh script`会覆盖默认的 /shebang shell，并使用 Bourne shell 代替 - 或者，更有可能是向后兼容模式下的 Bash。

如果您的脚本使用 Bash-isms（如`local`），则它们在第二种情况下将不起作用。

你当然可以打电话`bash script`...

# web - “项目已在环境外修改，请按重新加载从磁盘加载更新项目”

> ID：16033005
> 
> 赞同：6
> 
> 时间：2013-04-16T09:11:03.690
> 
> 标签：web, publish, webdeploy

我正在尝试使用 webdeploy 在 VS2012 中发布网站。我可以发布，但它不断给我以下信息：

“项目已在环境外修改，按reload从磁盘加载更新项目”

我可以使用相同的设置成功发布一个 asp.net web api。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T14:12:29.653

我也在为此苦苦挣扎，发现[这个类似问题的公认答案](https://stackoverflow.com/a/12166009/1036274)解决了我的问题。

具体来说：我关闭了 VS，重命名了我的 .suo 文件，然后重新打开了解决方案。VS 重新生成了一个 .suo 文件（大约是旧文件的一半）。发布时不再有“在外部修改...”消息！

# ruby-on-rails - 如何检查字符串是否包含数组中的所有字符串？

> ID：16033008
> 
> 赞同：0
> 
> 时间：2013-04-16T09:11:09.913
> 
> 标签：ruby-on-rails, ruby, rspec, matcher

我有

```
last_email_sent.body.should include "Company Name"
last_email_sent.body.should include "SomeCompany"
last_email_sent.body.should include "Email"
last_email_sent.body.should include "test@test.pl" 
```

我想用数组替换它

```
last_email_sent.body.should include ["test@test.pl", "Email"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:36:01.513

你可以简单地循环：

```
["test@test.pl", "Email"].each { |str| last_email_sent.body.should include str } 
```

或者，如果您喜欢匹配器语法，请编写自己的匹配器：

```
RSpec::Matchers.define :include_all do |include_items|
  match do |given|
    @errors = include_items.reject { |item| given.include?(item) }
    @errors.empty?
  end

  failure_message_for_should do |given|
    "did not include \"#{@errors.join('\", \"')}\""
  end

  failure_message_for_should_not do |given|
     "everything was included"
  end

  description do |given|
    "includes all of #{include_items.join(', ')}"
  end
end 
```

像这样调用它：

```
last_email_sent.body.should include_all ["test@test.pl", "Email"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:26:57.333

试试这个

```
["test@test.pl", "Email"].all?{ |str| last_email_sent.body[str] }.should == true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:36:45.953

我喜欢将这样的数组放在实用程序方法中：

**规范/支持/实用程序.rb**

```
def email_body_elements
  ["Company Name", "Some Company", "Email", "test@test.pl"]
end 
```

**规格/your_spec.rb**

```
email_body_elements.each do |element|
  last_email_sent.body.should include element
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:27:43.773

如果`last_email_sent.body`恰好是`Company Name SomeCompany test@test.pl Email`：

```
last_email_sent.body.should include ["Company Name", "SomeCompany", "test@test.pl", "Email"].join(" ") 
```

# sql - 在 SQL 中使用 WHERE 语句排除结果

> ID：16033011
> 
> 赞同：-3
> 
> 时间：2013-04-16T09:11:30.233
> 
> 标签：sql, oracle-adf, jdeveloper

我有一个复杂的查询来显示不同商店的一些产品。我试图排除一些结果，但我无法做到。我有一张看起来像这样的桌子：

```
ProName     ProColor     ProSize      ShopName      ShopAddress
Pro1        col1         10           Shop1         Address1
Pro2        col2         12           Shop2         Address2
Pro3        col3         12           Shop1         Address1
Pro3        col3         12           Shop2         Address2 
```

和查询（必不可少）：

```
SELECT Products.ProId, Products.ProName, Products.ProColor, Products.ProSize, Shop.ShopId, Shop.ShopName, Shop.ShopAddress Stock.StockId, Stock.StoProId, Stock.StoShopId
FROM Products, Shop, Stock
WHERE ((Stock.StoProId = Products.ProId) AND (Stock.StoShopId = Shop.ShopId)) 
```

上表有 4 列。当 Product 和 Color 和 Size 相等，但我在不同的商店有产品时，我只想在表格中显示一次（不管 ShopName 显示，但只有一个）：

```
ProName     ProColor     ProSize      ShopName      ShopAddress
Pro1        col1         10           Shop1         Address1
Pro2        col2         12           Shop2         Address2
Pro3        col3         12           Shop1         Address1 
```

请问，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:24:25.093

请求末尾的简单 GROUP BY 子句应该可以工作

```
GROUP BY Products.ProColor, Products.ProSize 
```

但这是一个奇怪的查询。

# javascript - 为什么响应结果为零，谷歌地图 v3？

> ID：16033012
> 
> 赞同：0
> 
> 时间：2013-04-16T09:11:36.030
> 
> 标签：javascript, google-maps-api-3

我在这里遇到了一个小问题，我想在我的谷歌地图 v3 上的点之间画一条线，当我给它 2 点时，响应中的状态结果是好的，但是当我发送 3 点或更多点时，结果是零，这是一个示例：

```
 <!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html {
    height: 100%
}

body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0
}
</style>

<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var map;
    var marker;
    var firstLat;
    var firstLng;
    var secondLat;
    var secondLng;
    var latitude = 31.9565783;
    var longitude = 35.945695;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var amman = new google.maps.LatLng(latitude, longitude);
        var myOptions = {
            zoom : 10,
            center : amman,
            mapTypeId : google.maps.MapTypeId.ROADMAP

        }

        map = new google.maps.Map(document.getElementById("map_canvas"),
                myOptions);
        directionsDisplay.setMap(map);
        marker = new google.maps.Marker({
            position : amman,
            map : map,

        });
        console.log('before mM');
            //Here is the line that send the points to the map.
        moveMarker(32.024851, 35.877249, 31.56, 35.56, []);
        console.log('after mM');

    }
    function calcRoute(startLat, startLng, endLat, endLng, wayLoc) {

        console.log('enter calcRoute');
        console.log('startLat' + startLat);
        console.log('startLng' + startLng);
        console.log('endLat' + endLat);
        console.log('endLng' + endLng);
        var start = new google.maps.LatLng(startLat, startLng);
        //          document.getElementById('start').value;
        var end = new google.maps.LatLng(endLat, endLng);
        //          document.getElementById('end').value;
        console.log('start if stat');
        var waypts = [];
        if (wayLoc != null) {
            console.log('start for stat');
            for ( var i = 0; i < wayLoc.length; i++) {
                var pts = [];
                console.log(i + '1in for stat');
                console.log(wayLoc[i]);
                pts = wayLoc[i].split(":");
                console.log(i + '2in for stat');
                var latPoint = pts[0];
                console.log(i + '3in for stat');
                var lngPoint = pts[1];
                console.log(i + '4in for stat');
                var point = new google.maps.LatLng(latPoint, lngPoint);
                console.log('point' + point);
                console.log(i + '5in for stat');
                waypts.push({
                    location : point,
                    stopover : true
                });
                console.log(i + '6in for stat');
                console.log(start);
                console.log(end);
                console.log(waypts);
            }
        }
        console.log('verify req.');
        var request = {
            origin : start,
            destination : end,
            waypoints : waypts,
            optimizeWaypoints : true,
            travelMode : google.maps.DirectionsTravelMode.DRIVING
        };
        console.log(start);
        console.log(end);
        console.log(waypts);
        console.log('verify DS');
        directionsService.route(request, function(response, status) {
            console.log('in response');
            console.log('status:' + status);

            if (status == google.maps.DirectionsStatus.OK) {
                console.log('status ok');
                console.log(response);
                directionsDisplay.setDirections(response);
                console.log('set Dir done');
                var route = response.routes[0];
                var summaryPanel = document.getElementById('directions_panel');
                summaryPanel.innerHTML = '';
                // For each route, display summary information.
                for ( var i = 0; i < route.legs.length; i++) {
                    var routeSegment = i + 1;
                    summaryPanel.innerHTML += '<b>Route Segment: '
                            + routeSegment + '</b><br>';
                    summaryPanel.innerHTML += route.legs[i].start_address
                            + ' to ';
                    summaryPanel.innerHTML += route.legs[i].end_address
                            + '<br>';
                    summaryPanel.innerHTML += route.legs[i].distance.text
                            + '<br><br>';
                    console.log(summaryPanel.innerHTML);
                }
            }
            //          
            //  if (status == google.maps.DirectionsStatus.INVALID_REQUEST) {
            //              console.log("INVALID_REQUEST");
            //          }
            //          if (status == google.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED) {
            //              console.log("MAX_WAYPOINTS_EXCEEDED");
            //          }
            //          if (status == google.maps.DirectionsStatus.NOT_FOUND) {
            //              console.log("NOT_FOUND");
            //          }
            //          if (status == google.maps.DirectionsStatus.OVER - QUERY_LIMIT) {
            //              console.log("OVER - QUERY_LIMIT");
            //          }
            //          if (status == google.maps.DirectionsStatus.REQUEST_DENIED) {
            //              console.log("REQUEST_DENIED");
            //          }
            //          if (status == google.maps.DirectionsStatus.UNKNOWN_ERROR) {
            //              console.log("UNKNOWN_ERROR");
            //          }
            //          if (status == google.maps.DirectionsStatus.ZERO_RESULTS) {
            //              console.log("ZERO_RESULTS");
            //          }
            console.log('response is done');
        });
        console.log('calcRoute is Done');
    }

    function centerAt(latitude, longitude) {
        myLatlng = new google.maps.LatLng(latitude, longitude);
        map.panTo(myLatlng);
    }

    function moveMarker(startLat, startLng, endLat, endLng, wayLoc) {

        console.log(startLat);
        marker.setPosition(new google.maps.LatLng(startLat, startLng));
        map.panTo(new google.maps.LatLng(startLat, startLng));
        latitude = latitude;
        longitude = longitude;
        console.log('wayLoc: ' + wayLoc);
        calcRoute(startLat, startLng, endLat, endLng, wayLoc);

    };
</script>
<body onload="initialize();">
    <div id="map_canvas" style="width: 75%; height: 100%; float: left;"></div>

    <div id="control_panel"
        style="float: left; width: 25%; text-align: left; padding-top: 20px">

        <div id="directions_panel"
            style="margin: 20px; background-color: #FFEE77;"></div>
    </div>

</body>
</html> 
```

当我调用此方法时： moveMarker(32.024851, 35.877249, 31.56, 35.56, []); 变化是：moveMarker(32.024851, 35.877249, 31.56, 35.56, ['32.321654:35.456321, 32.12:35.12']);

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:10:44.510

这两个路点距离道路不够近，DirectionsService 无法找到开车前往的路。

[http://www.geocodezip.com/v3_example_geo2.asp?zoom=8&waypts=yes&addr1=(32.024851,35.877249)&addr2=(31.56,35.56)&waypt=(32.321654,35.456321)&waypt=(32.12,35.12)&geocode=1& 2](http://www.geocodezip.com/v3_example_geo2.asp?zoom=8&waypts=yes&addr1=(32.024851,35.877249)&addr2=(31.56,35.56)&waypt=(32.321654,35.456321)&waypt=(32.12,35.12)&geocode=1&geocode=2)

# php - fos 用户捆绑用户角色

> ID：16033013
> 
> 赞同：0
> 
> 时间：2013-04-16T09:11:40.167
> 
> 标签：php, symfony

我正在使用 fos 用户包，我想添加两个角色 role_admin 和 role_user。

我应该在 securitiy.yml 中执行此操作吗？

```
role_hierarchy:
        ROLE_ADMIN:       ROLE_USER 
```

第二个问题是我的数据库中的用户表中没有角色列。那么如何处理角色，或者我应该在我的表中添加一个列角色？更准确地说：如果我不向表示角色的实体 User 添加属性，我们怎么知道呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:45:48.717

是的，如果你想为你的用户添加一些角色，你必须这样做`security.yml`

但是，如果您正确扩展了 FOSUserBundle（通过创建扩展 FOSUserBundle baseUser 类的用户实体），您应该将该列放入您的数据库架构中。

此外，请记住 FOSUserBundle 提供了 CLI 工具，用于在您创建要使用的用户以及将角色创建到`security.yml`文件中后，为特定用户添加角色

# python - 如何在其派生类中覆盖列表的切片功能

> ID：16033017
> 
> 赞同：25
> 
> 时间：2013-04-16T09:11:45.157
> 
> 标签：python, list, overriding

我做了一个如下的课程：

```
class MyList(list):
    def __init__(self, lst):
        self.list = lst 
```

我希望在 MyList 中覆盖切片功能

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-16T09:13:28.990

您需要提供 custom和[`__getitem__()`](http://docs.python.org/reference/datamodel.html#object.__getitem__)hooks 。[`__setitem__`](http://docs.python.org/reference/datamodel.html#object.__setitem__)[`__delitem__`](http://docs.python.org/2/reference/datamodel.html#object.__delitem__)

这些在对列表进行切片时传递一个[切片对象](http://docs.python.org/library/functions.html#slice)；这些具有`start`,`stop`和`step`属性。但是，这些值可以是`None`, 以表示默认值。考虑到当您使用负步幅时默认值实际上会发生变化！

但是，它们也有一个[`slice.indices()`方法](https://docs.python.org/reference/datamodel.html#slice.indices)，当给定一个长度时，它会产生一个`(start, stop, step)`适合`range()`对象的值的元组。此方法处理诸如以负步幅进行切片且没有开始或停止索引等令人讨厌的细节：

```
def __getitem__(self, key):
    if isinstance(key, slice):
        indices = range(*key.indices(len(self.list)))
        return [self.list[i] for i in indices]
    return self.list[key] 
```

或者，对于您的情况：

```
def __getitem__(self, key):
    return self.list[key] 
```

因为 a`list`可以直接取`slice`对象。

在 Python 2 中，[`list.__getslice__`](https://docs.python.org/2/reference/datamodel.html#object.__getslice__)如果实现了没有跨步的切片（因此只有开始和停止索引），则调用它，并且内置`list`类型实现了它，因此您也必须覆盖它；对您的方法的简单委托`__getitem__`应该可以：

```
def __getslice__(self, i, j):
    return self.__getitem__(slice(i, j)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T09:13:50.663

```
class MyList(list):
    def __init__(self, lst):
        self.list = lst 
```

没有多大意义......`self`是列表对象本身，并且此时它已经创建，也许您想要覆盖`__new__`，但是您可能不需要触摸它。无论如何，您想像这样覆盖`__getitem__`：

```
def __getitem__(self, val):
    if isinstance( val, slice):
        # do stuff here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-04T19:42:11.703

正如[@Martijn Pieters](https://stackoverflow.com/a/16033058/14041921)和[@jamylak](https://stackoverflow.com/a/16033070/14041921)所说，您需要实现该`__getitem__`方法。

一般来说，如果一个人想要覆盖它的超类的切片功能，并继续使用已经使用超类的超类方法`__getitem__`，只需将其拆分为案例，并从两个世界中受益。

例如：

```
import pandas as pd

class SubFrame(pd.DataFrame):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

    def __getitem__(self, item):
        if isinstance(item, slice):
            # your implementation
            print("'My slicing'")
            return SubFrame(super().__getitem__(item))
        else:
            return super().__getitem__(item) 
```

现在你可以这样做：

```
>>> sf = SubFrame({'A': (10,20,30,40,50)})
>>> sf[1:-2]
'My slicing'
    A
1  20
2  30
>>> type(sf[1:-2])
<class '__main__.SubFrame'> 
```

并且`[]`仍然会打电话给超级的`__getitem__`

```
>>> sf['A']  # super's __getitem__
0    10
1    20
2    30
3    40
4    50
Name: A, dtype: int64
>>> type(sf['A'])
<class 'pandas.core.series.Series'> 
```

# jquery - SoundCloud 自定义播放器安装

> ID：16033026
> 
> 赞同：0
> 
> 时间：2013-04-16T09:11:59.663
> 
> 标签：jquery, html, css, soundcloud

我阅读了此处的“快速入门”指南 [https://github.com/soundcloud/soundcloud-custom-player/wiki#wiki-quick-start](https://github.com/soundcloud/soundcloud-custom-player/wiki#wiki-quick-start)并按照说明放置 HTML 代码以生成自定义播放器，如下所示 `<a href="http://soundcloud.com/matas/hobnotropic" class="sc-player-minimal">My new dub track</a>`但输出只是一个文本链接。在这里查看[http://soundcloudtest.virb.com/soundcloud](http://soundcloudtest.virb.com/soundcloud)

我已将播放器 css 文件放入主题布局的“head”部分：

![在此处输入图像描述](https://i.stack.imgur.com/6JTDN.jpg)

然后将脚本标签放置在主题布局的“正文”部分中：

![在此处输入图像描述](https://i.stack.imgur.com/Iwb3t.jpg)

我可能做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:28:37.153

您的示例链接现在似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:31:58.920

通过将“head”部分中的css链接和html代码从更改为来解决播放器`sc-player-minimal.css`错误`sc-player.css`

# clojure - 将 2 元组 (x,y) 的列表排序到 Clojure 中的集合排序图中

> ID：16033031
> 
> 赞同：0
> 
> 时间：2013-04-16T09:12:21.790
> 
> 标签：clojure

我正在尝试`sorted-map`使用`sorted-set`以下功能创建一个`list-of-xy->sorted-map-of-sets`：

```
(def in
  '([1 9] [1 8] [1 7]
     [2 1] [2 2] [2 3]
     [2 1] [2 2] [2 3]
     [2 1] [2 2] [2 3]))

(def out
  (into (sorted-map)
    {1 (sorted-set 9 8 7)
     2 (sorted-set 1 2 3)}))

(defn list-of-xy->sorted-map-of-sorted-sets [list-of-xy]
  "Take a list (or lazy-seq) of 2-tuple and return a sorted-map of sorted-sets"
  (reduce ????? list-of-xy))

; should return true
(= (list-of-xy->sorted-map-of-sorted-sets in) out) 
```

到目前为止，我尝试`out`分两步创建：

```
(def int1
    (group-by #(first %) in))
;=> { 1 [[1 9] [1 8] [1 7]],
;     2 [[2 1] [2 2] [2 3] [2 1] [2 2] [2 3] [2 1] [2 2] [2 3]]}

(def int2
    (flatten
      (map
        #(let [[x xys] %]
           (list x (sorted-set (map last xys))))
        int1)))
;=> (1 #{7 8 9} 2 #{1 2 3}) ; <-- this is not a sorted-map (yet!) 
```

`in --> out`将性能作为优先事项进行转型的更好方法是什么？

* * *

**顺便提一句**

@Ankur 回答被接受。这是迄今为止更快的解决方案。

对于我的实际问题，`(update-in acc [x] conj y)`@amalloy 解决方案 (+1) 开辟了通往`reduced`via的道路`get-in`。我正在使用的减少功能是：

```
(fn [a [x y]]
  (if-not (get-in a [x y])
    (update-in a [x] conj y)
    (reduced a))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:44:44.757

```
(= out (into (sorted-map)
             (map (fn [[k v]]
                    [k (apply sorted-set (map second v))])
                  (group-by first in)))) 
```

让我知道这是否通过了您的性能测试:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:57:50.350

```
(defn list-of-xy->sorted-map-of-sorted-sets [list-of-xy]
  (let [conj (fnil conj (sorted-set))]
    (reduce (fn [acc [x y]]
              (update-in acc [x] conj y))
            (sorted-map)
            list-of-xy))) 
```

# objective-c - Tagging and sorting core-data, many-to-many

> ID：16033039
> 
> 赞同：0
> 
> 时间：2013-04-16T09:12:38.027
> 
> 标签：objective-c, macos, core-data, tags

I'm trying to create a tag based sorting system. So far I have a many-to-many relationship between 'tag <<->> movies'. What I want is to be able to sort the movies different in different tags. How do I do this? Will core-data do this automatically when I check the ordered button in xcode?

image: [https://www.dropbox.com/s/y44p3o1m0vrrezi/preview.png](https://www.dropbox.com/s/y44p3o1m0vrrezi/preview.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:02:47.160

要解决这个问题，您必须在之间插入一个新实体`MSTag`并`MSMovie`调用例如`MSTaggedMovieDisplayOrder`：

```
MSTag <->> MSTaggedMovieDisplayOrder <<-> MSMovie 
```

`displayOrder`然后使用 type 向新实体添加一个属性`Integer`。

由于这种结构处理起来比较重，我建议创建一个`Manager`类来管理：

1.  标记电影
2.  取消标记电影
3.  列出特定标签的所有标签电影
4.  列出特定电影的所有标签
5.  将标记的电影从显示顺序移动到新的显示顺序

有了这个，你应该很高兴。

# java - 为什么我的 java“GRect”类不能在 eclipse 上工作？

> ID：16033043
> 
> 赞同：0
> 
> 时间：2013-04-16T09:12:56.113
> 
> 标签：java, applet, acm-java-libraries

当我尝试在 Eclipse 上测试运行以下代码时，Java 小程序出现了，并且只显示了一个正方形。但它没有显示 (rect2) 矩形

```
GRect Rect2 = new GRect (300, 75, 200, 100) ;
Rect2.setFilled (true) ; 
Rect2.setColor (Color.RED) ; 
add (Rect2) ; 
```

或（GLabel）“你好世界”。

```
 GLabel Label = new GLabel ("Hello, world, 100, 75") ;     
   Label.setFont(new Font("Courier New", Font.ITALIC, 12));    
   Label.setColor (Color.RED);    add (Label) ; 
```

整个代码：

```
import acm.graphics.*; 
import acm.program.* ; 
import java.awt.* ; 

public class Test extends GraphicsProgram  {
    private static final long serialVersionUID = 3365078119967111934L;

    public void run () { 
        GLabel Label = new GLabel ("Hello, world, 100, 75") ; 
        Label.setFont(new Font("Courier New", Font.ITALIC, 12));
        Label.setColor (Color.RED);
        add (Label) ; 

        GRect Rect1 = new GRect (10, 10, 50, 50) ;
        add(Rect1) ; 

        GRect Rect2 = new GRect (300, 75, 200, 100) ;
        Rect2.setFilled (true) ; 
        Rect2.setColor (Color.RED) ; 
        add (Rect2) ; 
    }     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T20:17:55.123

矩形是在原始窗口之外绘制的。如果您只是拖动小程序窗口使其变大，您将看到一个实心的红色矩形。

所以我给你的解决方案是简单地设置窗口的初始大小：

```
setSize(800, 800); 
```

并且您的 GLabel 的参数是错误的。这样做：

```
GLabel Label = new GLabel ("Hello world", 100, 75) ; 
```

# hibernate - Infinispan with Hibernate：更新后对象不会添加到缓存或删除

> ID：16033047
> 
> 赞同：3
> 
> 时间：2013-04-16T09:13:00.177
> 
> 标签：hibernate, second-level-cache, infinispan

目前，我们的 Infinispan 二级缓存存在一些问题。我们准备了两个测试用例：

1) 新创建的对象不放在二级缓存中。我们在第一个事务中创建一个新对象（TestEntity）。我们看到它没有放在二级缓存中，即使我们刷新它。当我们关闭事务（容器管理）并创建第二个事务时，新创建的对象仍然没有在二级缓存中找到，但是如果我们加载它，我们会在数据库中找到它。所以我们确信它是在第一个事务中创建和提交的。但是为什么第一个事务关闭后新创建的对象没有放入二级缓存呢？

2）刷新后从二级缓存中删除更新的对象我们正在从数据库中加载一个实体，因此它在二级缓存中。现在我们正在更新这个加载实体的属性并进行刷新。如果我们再次检查二级缓存，实体不再被缓存。为什么在更新 + 刷新后它会从缓存中删除，我们如何防止这种情况发生？

案例一：代码：

```
private static String tmpInsId = " ";
public void onMessages(final Message[] messageBulk) {
 boolean isInCache = this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, tmpInsId);
 System.out.println("+++++ new TestEntity (" + tmpInsId + "): " + isInCache);
 if (!isInCache) {
  final TestEntity ri = this.entityManager.find(TestEntity.class, tmpInsId);
  if (ri != null) {
   System.out.println("+++++ new TestEntity (" + tmpInsId + "): Loaded!");
   isInCache = this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, tmpInsId);
   if (!isInCache) {
    System.out.println("+++++ new TestEntity (" + tmpInsId + "): Not in cache!"); // shouldn't be possible
   }
   else {
    System.out.println("+++++ new TestEntity (" + tmpInsId + "): Cached!");
   }
  }
  else {
   tmpInsId = ("TMP" + String.valueOf(System.currentTimeMillis()) + "0000000000").substring(0, 16);
   final TestEntity tmp = new TestEntity(tmpInsId, 0L, "N", "N", new Date());
   this.entityManager.persist(tmp);
   System.out.println("+++++ new TestEntity (" + tmpInsId + "): "
     + this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, tmpInsId));
   this.entityManager.flush();
   System.out.println("+++++ new TestEntity (" + tmpInsId + "): "
     + this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, tmpInsId));
   this.entityManager.find(TestEntity.class, tmpInsId);
   System.out.println("+++++ new TestEntity (" + tmpInsId + "): "
     + this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, tmpInsId));
  }
 } 
```

日志输出第一笔交易：

```
17:54:30,730 INFO [stdout] (default-threads - 2) +++++ new TestEntity ( ): false
17:54:30,745 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): false
17:54:30,761 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): false
17:54:30,761 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): false 
```

日志输出第二个事务：

```
17:55:00,058 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): false
17:55:00,058 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): Loaded!
17:55:00,058 INFO [stdout] (default-threads - 2) +++++ new TestEntity (TMP1366041270730): Cached! 
```

案例 2：准备：预加载实体“TMP0000000000043”，它已经在数据库中

代码：

```
 System.out.println(" TestEntity          : " + this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, "TMP0000000000043"));
 testEntity().setLstUpdTmstmp(currentTimestamp);
 this.entityManager.flush();
 System.out.println(" TestEntity          : " + this.entityManager.getEntityManagerFactory().getCache().contains(TestEntity.class, "TMP0000000000043")); 
```

日志输出：17:21:17,685 INFO [stdout] (default-threads - 6) LifecycleEngine TestEntity : true 17:21:17,857 INFO [stdout] (default-threads - 6) LifecycleEngine TestEntity : false 我们使用以下设置： - EAP-6.0.1 - Hibernate 4.2 - EAP-6.0.1 提供的 Infinispan 作为二级缓存

子系统配置：

```
<subsystem xmlns="urn:jboss:domain:infinispan:1.3"> 
<cache-container name="hibernate" default-cache="local-query" module="org.jboss.as.jpa.hibernate:4">
<local-cache name="entity">
<transaction mode="NON_XA"/>
<eviction strategy="LRU" max-entries="10000"/>
<expiration max-idle="100000"/>
</local-cache>
<local-cache name="local-query">
<transaction mode="NONE"/>
<eviction strategy="LRU" max-entries="10000"/>
<expiration max-idle="100000"/>
</local-cache>
<local-cache name="timestamps">
<transaction mode="NONE"/>
<eviction strategy="NONE"/>
</local-cache>
</cache-container>
</subsystem> 
```

启用二级缓存：

```
<property name="hibernate.cache.use_second_level_cache" value="true" />
<property name="hibernate.cache.use_query_cache" value="true" />
<property name="javax.persistence.sharedCache.mode" value="ENABLE_SELECTIVE" />
<property name="hibernate.cache.default_cache_concurrency_strategy" value="transactional" <property
<property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/> 
```

实体上的注释是：

```
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL) 
```

# python - python 2.5中对象的大小

> ID：16033053
> 
> 赞同：0
> 
> 时间：2013-04-16T09:13:14.960
> 
> 标签：python, python-2.5

在 python 2.6 及更高版本中，您可以执行以下操作`sys.getsizeof`：

```
>>> import sys
>>> sys.getsizeof("abc")
40 
```

有没有办法在 python 2.5 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:21:30.237

不，在 Python 2.5 或更早版本中没有可用的大小信息。

您必须从[issue 2898](http://bugs.python.org/issue2898)向后移植（C 代码）补丁。

# java - 如何从 MySQL 读取和保存图像

> ID：16033056
> 
> 赞同：0
> 
> 时间：2013-04-16T09:13:27.960
> 
> 标签：java, mysql, image, blob

我要做的是将图像插入到 MySQL 表中，然后获取图像数据（保存为 blob 类型）并将其写入某个文件位置的文件中。

到目前为止，我有以下代码从表中读取图像数据并将其写入图像文件：

```
package imageReadWrite;

import dbConnection.testConnection;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.sql.*;

public class BlobImageReadWeite {
    testConnection db = new testConnection();

    public String GetImage() {
        String result = "";
        try {
            db.connect();
            System.out.println("this is for test connection");
            String Banner_chk = "Select * from banner_file where image_name is not null and status='Active' order by upload_dt DESC LIMIT 1";
            ResultSet rs_Banner_chk = db.execSQL(Banner_chk);
            if (rs_Banner_chk.next()) {
                System.out.println(rs_Banner_chk.getString("image_name"));

                Blob blob = rs_Banner_chk.getBlob("image");
                File image = new File("test.png");
                FileOutputStream fos = new FileOutputStream(image);

                byte[] buffer = new byte[1024];

                // Get the binary stream of our BLOB data
                InputStream is = rs_Banner_chk.getBinaryStream("image");
                while (is.read(buffer) > 0) {
                    fos.write(buffer);
                }

                fos.close();
            }

            db.close();
        } catch (Exception e) {
            System.out.println(e);
        }

        return result;
    }

    public static void main(String[] args) {
        BlobImageReadWeite obj1 = new BlobImageReadWeite();
        obj1.GetImage();
    }
} 
```

问题是生成的图像文件未打开。

我正在使用以下代码将图像插入数据库

```
 package promocode;
import java.awt.Toolkit;
import java.io.*;
import java.util.*;
import java.util.Date;
import java.text.*;
import java.sql.*;
import java.util.Vector;
import javax.imageio.*;
import javax.swing.ImageIcon;
import java.awt.*;

import db.connection;

public class ImageReader {
connection db=new connection();
public String fileupload(String flname,String user,String promo_rad)throws      IOException, SQLException,ParseException{

String line=null;

 String line1 = null;
 String fval = "";
 String fval_temp = "";
 String flog,fileflag;
 String sqlst1 = "";
 String sqlst2 = "";
 String res = "false";
 int er_count=0;
 int cor_count=0;
 String error_message="";
 String chk1="";
 String chk2="";
 String chk3="";
 String chk4="";

 System.out.println("the path is"+flname);
 System.out.println(promo_rad);
 String filename1="";
 filename1=flname.substring(flname.lastIndexOf("\\")+1) ;
 System.out.println(filename1);

try {

Image img=Toolkit.getDefaultToolkit().getImage(flname);
ImageIcon icon=new ImageIcon(img);
int height=icon.getIconHeight();
int  width=icon.getIconWidth();
System.out.println("the image height is "+height+" and the image width is "+width);
File file = new File(flname);
FileInputStream fs = new FileInputStream(file);

db.connect();
if(width == 260 && height == 187){

sqlst2="insert into banner_file (image_name,image, FileType,Status, userid,image_flag,upload_dt,height,width) values ('"+filename1+"','"+fs+"','jpg','Active','"+user+"','"+promo_rad+"',now(),'"+height+"','"+width+"')";
System.out.println(sqlst2);
db.updateSQL(sqlst2);
res="true";
}

    }catch(Exception e){
        System.out.println(e);

    }
finally{

db.close();
}

return res;

}
    public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

        ImageReader obj1=new ImageReader();
        String fn = "C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\webapps\\aircel-billpay\\online_images\\Ganesha13.jpg";
        String result = obj1.fileupload(fn,"internalpromo","yes");
        System.out.println(result); 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:25:37.367

换个试试

```
InputStream is = rs_Banner_chk.getBinaryStream("image"); 
```

和

```
InputStream is = blob.getBinaryStream("image"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:56:08.457

的返回值`is.read(buffer)`表示读取了多少字节，可能不是`buffer`. 您忽略了该返回值，并且您正在写出`buffer`每次循环迭代的全部内容。如果您检查文件的大小，您可能会发现它大于数据库中二进制数据的大小。

考虑使用 java.nio.file 包，而不是 File 和 FileOutputStream：

```
Path image = Paths.get("test.png");
Files.copy(rs_Banner_chk.getBinaryStream("image"), image); 
```

# vb.net - 异步等待超时

> ID：16033062
> 
> 赞同：2
> 
> 时间：2013-04-16T09:13:36.257
> 
> 标签：vb.net, .net-4.5, async-await

我正在编写一个简单的方法来验证网页 url 是否真实并返回 True 或 False。

在 .NET 4.5 中使用新的异步等待函数现在看起来非常简单，但是如何为异步设置超时？

```
''' <summary>
''' Returns True if a webpage is valid.
''' </summary>
''' <param name="url">Url of the webpage.</param>
Private Async Function VailiateWebpageAsync(url As String) As Task(Of Boolean)       
    Dim httpRequest As HttpWebRequest
    Dim httpResponse As HttpWebResponse

    httpRequest = CType(WebRequest.Create(url), HttpWebRequest)
    httpRequest.Method = "HEAD" 'same as GET but does not return message body in the response

    Try
        httpResponse = CType(Await httpRequest.GetResponseAsync, HttpWebResponse)
    Catch ex As Exception
        httpResponse = Nothing
    End Try

    If Not IsNothing(httpResponse) Then
        If httpResponse.StatusCode = HttpStatusCode.OK Then
            httpResponse.Dispose()
            Return True
        End If
    End If

    If Not IsNothing(httpResponse) Then httpResponse.Dispose()
    Return False
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T18:29:38.793

根据作者的评论，我认为他希望能够使任何异步超时。这是我在 .NET 4 上使用的获得 10 秒超时的方法。.NET 4.5 的语法会略有不同，因为它们用`TaskEx`类替换了类上的静态方法`Task`。

```
 var getUserTask = serviceAgent.GetAuthenticatedUser();
        var completedTask = await TaskEx.WhenAny(getUserTask, TaskEx.Delay(10000));

        if (completedTask != getUserTask)
        {
            Log.Error("Unable to contact MasterDataService to retrieve current user");
            MessageBox.Show("Unable to contact the server to retrieve your user account.  Please try again or contact support.");
            Application.Current.Shutdown();
        } 
```

此代码将启动`GetAuthenticatedUser`异步任务，但不会保留在那条线上，因为那里没有`await`。相反，它移动到下一行并等待getUserTask**或**10 秒延迟。无论哪个先完成，都会导致该行`await`返回。`Task`我们可以通过检查返回的`TaskEx.WhenAny`或通过查询`getUserTask`并查看其状态来确定是否发生超时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:16:29.777

`HttpWebRequest`有一个`Timeout`可以设置的属性：

[*MSDN：HttpWebRequest.Timeout*](http://msdn.microsoft.com/en-gb/library/system.net.httpwebrequest.timeout.aspx)

如果超时，`WebException`将抛出a 并设置您可以捕获和处理的[`Status`](http://msdn.microsoft.com/en-gb/library/system.net.webexceptionstatus.aspx)属性。`Timeout`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:16:27.823

在进行调用之前，以毫秒为单位设置超时值：

```
myHttpWebRequest.Timeout = 1234 
```

详情在[这里](http://msdn.microsoft.com/en-GB/library/system.net.httpwebrequest.timeout.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T18:48:38.527

您需要通过自己实现超时`Task.Delay`。

请注意，对于异步调用，该`HttpWebRequest.Timeout`属性被*忽略。*在 MSDN 中有明确的说明：

====================================

Timeout 属性对使用 BeginGetResponse 或 BeginGetRequestStream 方法发出的异步请求没有影响。

在异步请求的情况下，客户端应用程序实现自己的超时机制。请参阅 BeginGetResponse 方法中的示例。

====================================

# c# - C# WinForm Sql 连接和命令执行

> ID：16033071
> 
> 赞同：-2
> 
> 时间：2013-04-16T09:13:53.257
> 
> 标签：c#, sql, winforms, sql-server-2008, command-execution

我很快就要开始一个项目，我将创建一个程序，允许用户为我正在构建的游戏创建服务器。除了我正在处理的其他事情之外，服务器程序还必须将玩家的信息更新到 Microsoft SQL Server 2008。我在表单上使用 System.Data 和 System.Data.SqlClient，但**我不知道如果每个人的计算机上都有 SqlClient 并且我不想以后有麻烦。**

我应该以某种方式将 SqlClient dll 添加到主文件夹吗？我以前在我的一个 WinForms 上使用过它。但是，如果是，也请告诉我在哪里可以找到 System.Data.SqlClient 的 DLL 文件。我找到了 System.Data 但没有找到 SqlClient dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:10:13.770

`System.Data.SqlClient`是`System.Data`程序集中的命名空间。

就您的架构而言。您将需要一个提供 SQL Server 实例的主机，但您可以提供一个 Web 前端，它不能很好地显示呈现的 html，但提供一个报告可用服务器 IP 地址的文本流，您也可以为此提供身份验证。这样客户端仍然不需要直接访问数据库。您可以从网站提供注册，或者如果您确实需要在客户端上进行注册，那么您可以向您的网站提交 http 帖子或替代提交，并让网站注册客户端。

将您的实际数据保留在网站/服务器层之后并使用内置技术来保护您的客户数据非常重要。

# php - 在一个代码上运行多个站点

> ID：16033073
> 
> 赞同：-2
> 
> 时间：2013-04-16T09:13:56.577
> 
> 标签：php, .htaccess

我们有一个在 8 个不同国家运行相同站点的网络代码。但是，我们不会向用户披露这些信息。以下是我们处理主题的方式。/httpdocs/themes/www.sitename.com/default/ 和在 htaccess 中，我们跳过带有 RewriteRule 的 www.sitename.com 部分，用户只能在他的浏览器位置看到 /httpdocs/themes/default。

这工作正常，但我们添加的站点越多，当我们需要在开发服务器和本地开发 PC 上创建此环境时，它就会出现问题。

我们如何处理这个地址定位问题。删除 htaccess 行并将所有内容放在配置文件中更容易，但它剥夺了我们已经实现的某种技巧。

**更多信息**

这是htaccess规则。 `RewriteRule ^resources/image/(.*)$ resources/%{HTTP_HOST}/upload/image/$1 [L]`

现在在本地，它变为文件夹 /resources/localsite/image 而在实时 /resources/www.sitename.com/image 上。

因此，由于我们通过 htacess 处理，因此该规则不适用于 Local。我所说的技巧是用户/管理员不知道我们在一个代码中很好地处理了这些站点。

**尝试在 Vhost 中编写命令**

在 Plesk 下的 vhost.conf create 中编写了此命令。

```
<If "%{SERVER_NAME} = 'www.sitename.com'">
       SetEnv ThemePath www.sitename.com
</If> 
```

但得到了错误。

```
Starting httpd: Syntax error on line 23 of vhost.conf: Invalid command <If,
perhaps misspelled or defined by a module not included in the  server configuration 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:01:21.193

您需要将以下内容放入您的 Apache vhost 配置中。我没有在 .htaccess 文件中对此进行测试，但我想不出任何明显的原因为什么这不起作用：

```
SetEnvIf HOST ^www.somesite.com$ NONWWWURL=1 
SetEnvIf HOST ^somesite.com$ NONWWWURL=0 
```

我相信这应该可以实现您的目标。

# c# - LINQ - 使用条件过滤重复项

> ID：16033080
> 
> 赞同：4
> 
> 时间：2013-04-16T09:14:24.417
> 
> 标签：c#, .net, linq, sql-server-2008, visual-studio-lightswitch

我正在开发一个 .NET 应用程序，我需要根据条件过滤来自 SQL Server 2008 的数据。我的数据结构如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/6WTYd.png)

结果应按Key进行分组和排序。默认情况下，每个Key都应该返回Revision为null的行，但是如果设置了revisionParameter，则应该返回具有相应Revision号的行。如果参数为 2，则输出应为：

```
abc     2     FALSE
def    null   TRUE
ghj     2     FALSE
klm    null   TRUE 
```

如何在 LINQ 中完成此操作？谢谢

编辑：对lazyberezovsky的回应：您的LINQ表达式重写为lambda：

```
partial void RuleEntriesByUserSaveId_PreprocessQuery(int? UserSaveId, ref IQueryable<RuleEntry> query)
{
query = query.Where(re => re.Revision == null || re.Revision == value)
             .GroupBy(re => re.Key)
             .Select(g => g.FirstOrDefault(x => x.Revision != null) ?? g.First());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:25:13.750

```
from r in Table
where !r.Revision.HasValue || r.Revision.Value == value
group r by r.Key into g
select g.FirstOrDefault(x => x.Revision.HasValue) ?? g.First() 
```

这将选择修订版等于`null`或等于指定值的记录。按键分组后，我们尝试找到任何具有修订值的记录（该值将等于过滤器）。如果没有修订记录，我们只取组中的第一条记录。

# java - 带有 && 的 if 语句，其中第一个条件需要在测试第二个条件之前为真

> ID：16033085
> 
> 赞同：3
> 
> 时间：2013-04-16T09:14:30.257
> 
> 标签：java, if-statement, conditional-statements

抱歉，如果这是重复的，但我什至想不出一种方法来搜索它。我不确定要问这个问题的术语，所以我将解决我的问题。

从我的测试来看，似乎 if 语句将在尝试转到数组 [10] 之前退出。我总是这样吗？意思是，如果我的 if 语句中有一个 && 并且左侧为假，它会在测试第二个之前总是退出吗？就此而言，它会总是先测试左边吗？

```
public static void main(String[] args) {
        boolean [] array = new boolean [10];
        Arrays.fill(array, true);
        int i = 10;
        if(i < array.length && array[i]){
            System.out.println("WhoHoo!");
        }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T09:18:48.377

From the [Java Tutorials](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html) on operators:

> The && and || operators perform Conditional-AND and Conditional-OR operations on two boolean expressions. These operators exhibit "short-circuiting" behavior, which means that the second operand is evaluated only if needed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:18:35.923

是的。如果左边为假，它将终止条件。因为如果你把`&&`那么所有的条件都必须为真，如果任何一个条件变为假，那么就没有必要再进一步了。所以它在条件得到时终止`false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:16:01.000

> 如果我的 if 语句中有 && 并且左侧为假，它会在测试第二个之前总是退出吗？

是的。如果左侧为假，则无需检查右侧，因为当您有：

```
if(a && b) { ... } 
```

如果，那么无论是什么`!a`，整个语句都被评估为*假*`b`。

如果`a`，那么它将继续评估下一个。

总而言之，请始终记住[这一点](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)：

> **...仅在需要时才**评估第二个操作数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:16:15.197

**如果第一个条件评估为true**，它只会评估第二个条件。

评估从左侧开始，当评估为错误时，不会发生进一步的评估。

# python - 是否可以在 python 中处理 SIGKILL？

> ID：16033087
> 
> 赞同：2
> 
> 时间：2013-04-16T09:14:41.750
> 
> 标签：python, ipc, subprocess, wrapper, sigkill

哎哟！我有一个 python 包装器，它收集一些命令行选项，将它们的子集嵌入到文件中，并通过将文件名作为输入传递并将剩余的命令行选项作为选项传递来调用子进程。然后它处理输出并以不同的格式打印出来。子进程是这样​​调用的：

```
# generate cfg file
cfg_file = open(cfg_file_name, "w")
...

# call executable
command = "./%s -time %s -model %s" % (executable, args.time, args.model)
if args.branching != None:
    command += " -branching %s" % args.branching
command += " %s" % (cfg_file_name)

output = run_and_report(command)

# process output
... 
```

其中`run_and_report`定义为：

```
def run_and_report(cmd):

    """Run command on the shell, report stdout, stderr"""
    proc = run(cmd)
    proc.wait()
    output = "".join(map(lambda x: x.rstrip(), proc.stdout))
    return output 
```

并且`run`作为

```
def run(cmd):
    """Open process"""
    return Popen(cmd, shell=True, stdout=PIPE, stderr=PIPE, close_fds=True) 
```

包装器本身由更高级别的过程以类似的方式调用，该过程不时需要杀死它产生的一些包装器进程。我的问题是，有时杀死包装器似乎会离开`executable`运行，所以包装器被有效地杀死，但底层进程不是。但是，据我所知，不可能像处理其他中断那样在 python 中捕获 SIGKILL ，有没有人知道一种方法来确保底层进程被杀死？

谢谢，
图努兹

# ruby-on-rails - 轨道应用程序。设计视图中的多个表单

> ID：16033088
> 
> 赞同：0
> 
> 时间：2013-04-16T09:14:41.903
> 
> 标签：ruby-on-rails, forms, view, devise

目前查看/设计/注册/编辑有一种更改密码的形式。我希望它有多种形式，比如一种用于更改密码，一种用于更改用户名……等等。

我试图添加另一个表单，但是当我尝试提交它时，名称表单告诉我应该输入当前密码。（这是来自其他表单的字段）如何隔离表单？这是创建表单的方式：

```
 <div class="center">
      <div class="devise-controller">
        <%= form_for(resource, :as => resource_name,
                               :url => registration_path(resource_name),
                               :html => { :method => :put }) do |f| %>
          # some fields here...
          <%= f.submit "Update" %>
        <%end%>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:50:31.187

您好，请参阅以下链接以创建多表单：

[http://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

或者

[http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=comments](http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=comments)

# hibernate - 休眠实体导出

> ID：16033089
> 
> 赞同：0
> 
> 时间：2013-04-16T09:14:42.673
> 
> 标签：hibernate, graph, export, metamodel

我的任务是通过休眠导出数据库。起点是我模型中的任何实体。所选实体必须浏览其所有引用对象并将其存储在我的目标模型中（与源模型相同）。你有什么想法来解决这个任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:22:59.600

为第一个数据库和第二个数据库创建一个 Hibernate 项目。然后创建另一个项目，将其他两个项目作为依赖项。在第三个项目中，您可以为每个相应的数据库引用休眠实例的会话，执行从一个数据模型移动到另一个数据模型所需的逻辑。

# windows-phone-7 - Windows phone 中的全景导航

> ID：16033090
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:14:46.400
> 
> 标签：windows-phone-7, navigation, panorama-control

这是一个非常快速的问题，但我在 Google 中找了 2 天没有任何结果......

如何在全景屏幕之间导航？只有一页，所以我想这不起作用：

```
NavigationService.Navigate(new Uri("MainPage.xaml", UriKind.Relative)); 
```

否则：如何更改将在手机显示屏上显示的全景图位置？或者如何更改将要显示的全景项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:54:55.073

PANORAMA_CONTROL.DefaultItem = PANORAMA_CONTROL.Items[1]；由于您将项目设置为列表中的第一个，因此它会导致项目有点重新排列，但除此之外，这是一种可接受的方式，因为它实际上会将项目带到用户面前.

# java - 如何在 Swing 应用程序中包含 shapefile

> ID：16033096
> 
> 赞同：0
> 
> 时间：2013-04-16T09:15:15.550
> 
> 标签：java, swing, geotools

我是基于 gis 的项目的新手。我正在使用 netbeans IDE 来包含我的 shapefile，并且我确信我已经导入了必要的 jar 来包含 shapefile。但它不起作用。当我运行我的应用程序时，我在 simplefeaturesource 方法中得到一个空指针异常。在此我包括我的程序

```
public class Quickstart {

    /**
     * GeoTools Quickstart demo application. Prompts the user for a shapefile and displays its
     * contents on the screen in a map frame
     */
    public static void main(String[] args) throws Exception {
        // display a data store file chooser dialog for shapefiles
        File file = JFileDataStoreChooser.showOpenFile("shp", null);
        if (file == null) {
            return;
        }

        FileDataStore store = FileDataStoreFinder.getDataStore(file);
        SimpleFeatureSource featureSource = store.getFeatureSource();

        // Create a map content and add our shapefile to it
        MapContent map = new MapContent();
        map.setTitle("Quickstart");

        Style style = SLD.createSimpleStyle(featureSource.getSchema());
        Layer layer = new FeatureLayer(featureSource, style);
        map.addLayer(layer);

        // Now display the map
        JMapFrame.showMap(map);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:13:43.890

根据[我发现的函数或方法定义](http://docs.geotools.org/latest/javadocs/org/geotools/data/FileDataStoreFinder.html#getDataStore-java.net.URL-)：

> ```
> public static FileDataStore getDataStore(File file)
>                                   throws IOException 
> ```
> 
> 依次检查每个可用的数据源实现并返回第一个声称支持给定文件的实现。
> 
> 参数：
> 
> *   文件 - 文件
> 
> 返回：
> 声称处理所需资源的第一个数据源，如果找不到，则返回 null。

现在在它失败的情况下，它将返回 null 在这种情况下，store 将在上面的代码中等于 null。由于未使用 if 语句检查 store 以判断它是否为 null 继续进行，而只是声明和初始化，并且您只希望获得最好的结果，因此下一行将产生空指针异常。

这是我对你的代码的看法。尝试调试它，看看 store 是否等于 null 或在前面的行上使用 if 语句。

# java - Defina a default type mapping on Hibernate 4

> ID：16033097
> 
> 赞同：4
> 
> 时间：2013-04-16T09:15:17.317
> 
> 标签：java, hibernate, mapping, uuid

I need to define/override the default hibernate mapping to solve the problem of the java.util.UUID default mapping.

I've been looking at several comments related to this topic: Here [Postgresql UUID supported by Hibernate?](https://stackoverflow.com/questions/4495233/postgresql-uuid-supported-by-hibernate) and [Postgres + Hibernate + Java UUID](https://stackoverflow.com/questions/760649/postgres-hibernate-java-uuid?lq=1) and [Persisting UUID in PostgreSQL using JPA](https://stackoverflow.com/questions/11284359/persisting-uuid-in-postgresql-using-jpa?rq=1) and and Hibernate documentation.

However the easier solution of annotate; something like @Type(type="pg-uuid"), does not works for me since i need to run with different databases (e.g. H2)

So what i need is to "register org.hibernate.type.PostgresUUIDType as the default Hibernate type mapping for all attributes exposed as java.util.UUID" as has been said in several of the comments.

Sadly after checking the documentation i still don't get exactly how to do it.

Could you, please, explain or point me to a more detailed information about how to override the default type mapping in Hibernate 4.2?

Thanks, and regards,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:31:24.703

我发现的最佳解决方案是定义一个自定义类型，该类型将根据环境变量进行切换，类似于此处所做的：

[https://zorq.net/b/2012/04/21/switching-hibernates-uuid-type-mapping-per-database/](https://zorq.net/b/2012/04/21/switching-hibernates-uuid-type-mapping-per-database/)

所以我定义了一个 MyUuid 类，用 @Type(type="whatever") 注释实体中的相关 UUID 字段，并且在实体级别，我定义了新的映射

@TypeDef(name="whatever", defaultForType = UUID.class, typeClass = MyUuid.class)

# php - 使用 local_cert 使用带有 SoapClient 的 WebService

> ID：16033098
> 
> 赞同：0
> 
> 时间：2013-04-16T09:15:21.123
> 
> 标签：php, soap, soap-client, ws-security

大家好 :) 我有一个启用了传入请求签名的 Axis2 WebService（Rampart 模块`Signature`在`InflowSecurity`设置中使用）。我正在尝试使用本地证书在 PHP 中调用它：

```
$client = new SoapClient(
    "http://localhost:8081/axis2/services/SomeWebService?wsdl", 
    array(
        "local_cert" => "C:\ws\MyProject\php\cert.pem",
        "trace" => 1));

var_dump($client->__soapCall(
    "someFunction", 
    array("someParameter" => "blabla"))); // line X 
```

cert.pem 的内容：

```
-----BEGIN CERTIFICATE-----
....
-----END CERTIFICATE----- 
```

这是我得到的错误：

```
Fatal error: Uncaught SoapFault exception: [soapenv:Server] 
org.apache.ws.security.components.crypto.Merlin cannot create instance in 
C:\ws\MyProject\php\index.php:X 
```

问题是`org.apache.ws.security.components.crypto.Merlin`服务器端异常（我也在服务器日志中得到）；但是当我删除`"local_cert" => "C:\ws\MyProject\php\cert.pem"`或更改它时，`"local_cert" => "C:\ws\MyProject\php\thereisnofilehere.pem"`我得到了完全相同的错误。

这告诉我 PHP 根本不使用证书。或者，我在这里遗漏了什么？如何确保 PHP 使用证书对请求进行签名？

# android - Android Intent.ACTION_SCREEN_OFF and Intent.ACTION_USER_PRESENT how to register it

> ID：16033100
> 
> 赞同：4
> 
> 时间：2013-04-16T09:15:24.240
> 
> 标签：android

```
Activity has leaked IntentReceiver ScreenReceiver that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

in main activity I have

```
 // Register receiver that handles screen on and screen off logic
 final IntentFilter intentScreenfilter = new IntentFilter(Intent.ACTION_SCREEN_ON);
 intentScreenfilter.addAction(Intent.ACTION_SCREEN_OFF);
 intentScreenfilter.addAction(Intent.ACTION_USER_PRESENT);
 screenReceiver = new ScreenReceiver(); 
```

and when application is closed I get this message.

```
ACTION_SCREEN_OFF 
```

AND

```
ACTION_SCREEN_ON 
```

can not be registered in AndroidManifest but only programatically. What can I do? I don't want to use Service because if service is running all day this is not good for battery. What is the solution? How to use this receivers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:35:01.433

您不能从 android manifest 文件中注册这些接收器。它根本不支持。唯一的方法是长时间运行服务并在服务中注册这些接收器。所以如果你真的想使用

```
ACTION_SCREEN_ON 
```

和

```
ACTION_SCREEN_OFF 
```

然后你必须使用服务

# wpf - WPF TextBlock 的 CharacterSpacing

> ID：16033101
> 
> 赞同：1
> 
> 时间：2013-04-16T09:15:27.397
> 
> 标签：wpf, textblock

由于 Silverlight 5 TextBlock 有一个 CharacterSpacing 属性，允许在字符之间添加额外的空间。有没有办法在 WPF 中做同样的事情？

# iphone - Last weekday of the month with NSDateComponents

> ID：16033103
> 
> 赞同：1
> 
> 时间：2013-04-16T09:15:30.320
> 
> 标签：iphone, ios, cocoa-touch, nsdate, nsdatecomponents

`NSDateComponents` and `NSCalendar` have a feature to get the n'th weekday of the month with the `NSWeekdayOrdinalCalendarUnit` using `NSCalendarUnit`.

For example the *2nd monday of the month*.

It's awesome but, **I need to check if a certain instance of `NSDate` is the last or second last weekday of the month.** I can't think of a neat way to do this. I hope there is a simple trick that does not require you to loop through all the mondays of the whole month.

Do you guys have any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:20:17.463

只需添加 7 天（使用`NSCalendar`'s `dateByAddingComponents:toDate:options:`）并检查生成的月份是否相同。

# c# - SQL Server 2008：更新增量逻辑困难

> ID：16033106
> 
> 赞同：3
> 
> 时间：2013-04-16T09:15:39.520
> 
> 标签：c#, sql, sql-server-2008

使用 SQL Server 2008、Visual Studio 2012 C#.NET4.5、win-forms

我有一个数据网格，其中包含 20 条记录，他们的字段称为“NewPareto”，该字段包含 1-20 作为整数，基本上是联赛得分。请注意，此字段必须允许空值。

如果网格中的用户将位置 9 更改为位置 3，我需要一个查询来在更新的位置之后重新处理记录，基本上我想简单地增加 1。

但是我发现这不起作用，因为过去 9 总是有一个差距，如果我说任何大于 3 的东西，那么已经存在一个 3。

我正在考虑将原来的 3 更改为 4，然后说增量 > 4。但这仍然不能解决 9，最重要的是，将低数字交换为高数字时，逻辑似乎不起作用。

我尝试了一些最新的查询也不起作用。

```
ALTER PROCEDURE [dbo].[IncrimentPareto]
    @pg varchar(255),
    @Pareto int,
    @paretostatic int
AS
   ;With cte as
   (select top 1000000 * 
    from ParetoMain 
    where PG = @pg and 
          NewPareto > @paretostatic and 
          NewPareto is not null
    order by Sales desc )
   UPDATE cte 
   SET @Pareto = NewPareto = @Pareto +1 
```

这几乎可行，但现在仍然存在两个 3，并且它仅在位置 8 之后有效，因为 9 不存在。

希望你的头不会像我的一样疲惫。

摘要：在某个位置上移或下移联盟后，对具有新联盟编号的记录进行排序的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:02:33.837

您可以使用单个更新语句来执行此操作，该语句仅使用 row_number 函数更新帕累托更改的行，以及一些明智的子查询：

```
DECLARE @from int = 9, @to int = 3

UPDATE MainPareto 
SET pareto = m.new_pareto
FROM (
    SELECT pKey, -- this is your primary key for the table
    new_pareto = row_number() 
    over(ORDER BY   CASE WHEN pareto = @from THEN @to ELSE pareto END, 
                    CASE WHEN pareto = @from THEN 0 ELSE 1 END)
    FROM MainPareto
    -- put in any conditions that you want to restrict the scores by.
    WHERE PG = @pg AND pareto IS NOT NULL
    -- end condtions
) as m
INNER JOIN MainPareto ON MainPareto.pKey = m.pKey
WHERE MainPareto.pareto <> m.new_pareto 
```

“row_number() over”的 order by 子句按新的排列顺序排列，优先于新条目。如果您希望较旧的保持领先，请交换第二个 order by 子句的 0 和 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:44:57.630

您也可以将选项与 CTE 和 ROW_NUMBER() 排名函数一起使用

```
DECLARE @Pareto int = 2,
        @NewPareto int = 5
;WITH cte AS
 ( 
  SELECT ID, ROW_NUMBER() OVER (ORDER BY CASE WHEN Pareto = @Pareto THEN @NewPareto ELSE Pareto END) AS Pareto, Col1
  FROM dbo.test87
  WHERE Pareto != @Pareto
  ),cte2 AS
 (
  SELECT ID, Pareto, @NewPareto AS NewPareto, Col1
  FROM dbo.test87
  WHERE Pareto = @Pareto  
  UNION ALL
  SELECT ID, Pareto, CASE WHEN Pareto >= @NewPareto THEN Pareto + 1 ELSE Pareto END, Col1
  FROM cte
  )
  UPDATE t
  SET t.Pareto = c.NewPareto
  FROM dbo.test87 t JOIN cte2 c ON t.ID = c.ID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/fb937/1)上的演示[](http://sqlfiddle.com/#!3/fb937/1)

# asp.net - 索引 1 为负数或高于行数

> ID：16033107
> 
> 赞同：2
> 
> 时间：2013-04-16T09:15:39.843
> 
> 标签：asp.net, data-binding

```
DataView dv = ds.Tables["Unit"].DefaultView;
dv.RowFilter = SqlWhere;
dv.Sort = SortList.SelectedValue.ToString();
PagedDataSource page = new PagedDataSource();
page.DataSource = dv;
page.AllowPaging = true;
page.PageSize = Int32.Parse(ResultList.SelectedValue);
page.CurrentPageIndex = CurrentPage;
lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of " +
                                                        page.PageCount.ToString();
// Disable Prev or Next buttons if necessary
cmdPrev.Enabled = !page.IsFirstPage;
cmdNext.Enabled = !page.IsLastPage;
invList.DataSource = page;
invList.DataBind();
public int CurrentPage
{
    get
    {
        // look for current page in ViewState
        object o = this.ViewState["_CurrentPage"];
        if (o == null)
            return 0; // default page index of 0
        else
            return (int)o;
    }

    set
    {
        this.ViewState["_CurrentPage"] = value;
    }
} 
```

但它现在显示这样的错误`invList.DataBind();`

```
Index 4 is either negative or above rows count. 
```

**描述**

```
 An unhandled exception occurred during the execution of the current web request. 
 Please review the stack trace for more information about the error and where it 
 originated in the code. 
```

**异常详情**

```
System.IndexOutOfRangeException: Index 1 is either negative or above rows count. 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T10:38:15.287

看起来 invList.DataBind 正在设置的绑定指的是诸如 dv 之类的视图。这是一个猜测，因为它会在您的代码中的其他地方。

对于要在简单控件中显示的多行表中的数据，绑定需要知道要使用哪一行，此错误表示确定行的任何内容都返回“索引 4”（第 5 行...索引开始于0) 表中有 4 行或更少的行。

检查您的行导航，尤其是在更改基础表的内容后，确保其当前行设置为有效数字。

# iphone - IOS 应用程序及其存储在设备上的数据的大小限制

> ID：16033112
> 
> 赞同：3
> 
> 时间：2013-04-16T09:16:00.633
> 
> 标签：iphone, ios

开发一个IOS应用程序来播放视频，从服务器下载视频。在安装期间应用程序大小低于 20 MB，安装后用户可以通过 WiFi 连接从服务器下载视频文件（大小 512 MB）。

我需要下载大约 5 个视频。

有大小限制吗？或取决于设备可用的存储空间？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T09:25:26.583

没有限制。

当可用空间小于 200 MB 且为 0 MB 时，用户将收到警报。

当您填满所有设备内存并尝试写入更多内容时，您的应用程序将崩溃。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-16T09:30:02.837

据我所知没有限制。

但请注意，您在应用程序中下载和存储的所有文件都必须标记为“不要在 iCloud 中备份”——否则当您将二进制文件提交到商店时，Apple 会拒绝您的二进制文件。

请参阅 [Apple 文档](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)和 [从 iCloud 备份中排除文件](https://stackoverflow.com/questions/12093774/excluding-files-from-icloud-backup)

# asp.net - 如何使用 jquery ajax 延长会话超时

> ID：16033115
> 
> 赞同：1
> 
> 时间：2013-04-16T09:16:11.047
> 
> 标签：asp.net, jquery, session-timeout

我有一个网页，上面有一个可编辑的 jquery 网格。我将它与 asp.net 网络表单一起使用。Web 表单身份验证设置为 20 分钟后超时。有时，用户需要更新网格上的大量数据，一旦点击保存，网站往往已经超时，用户丢失数据。

我想知道当用户在网格上仍然处于活动状态时，我们可以在 javascript 中触发某些东西来防止 Web 表单身份验证超时和服务器会话超时吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:13:39.573

检查链接[jQuery Timer](https://stackoverflow.com/questions/2295049/call-js-function-using-jquery-timer)。您可以在 jQuery 中创建一个计时器。如果您的默认超时时间为 20 分钟，请设置计时器以在 15~18 分钟后向服务器调用 ajax 调用。这个调用什么都不做。但是，一旦您进行 ajax 调用，它就会将会话设置为另外 20 分钟。因此，只要用户将数据上传到网格，您就可以通过这种方式保持会话处于活动状态。

# python - 使用 Open CV 进行相机校准

> ID：16033122
> 
> 赞同：0
> 
> 时间：2013-04-16T09:16:23.343
> 
> 标签：python, opencv, camera-calibration

我尝试用 python 和 opnecv 校准相机。我使用视频文件而不是网络摄像头直播。

除了最后一步，一切似乎都正常。这是：

```
print "now get ready, camera is switching on"
while(1):
    image=cv.QueryFrame(capture)
            t = cv.CloneImage(image);
    cv.ShowImage( "Calibration", image )
    cv.Remap( t, image, mapx, mapy )
    cv.ShowImage("Undistort", image)
    c = cv.WaitKey(33)
    if(c == 1048688):       # enter 'p' key to pause for some time
        cv.WaitKey(2000)
    elif c==1048603:        # enter esc key to exit
        break

print "everything is fine" 
```

在那里我收到以下错误：

```
Traceback (most recent call last):
  File "V:\Studenten\Christian_Fuerstenhoefer\02_Kamerakalibrierung\openCV\camCalib.py", line 137, in <module>
    t = cv.CloneImage(image);
TypeError: Argument 'image' must be IplImage 
```

我已经检查了打印类型（图像）。然后它说无。

有谁知道如何解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:28:21.410

您不检查流的结尾（每个视频都有结尾..）

```
while(1):
    image=cv.QueryFrame(capture)
    if image==None:
        break 
```

# perl - 使用 perl 的多部分 POST 未获取所需的结果

> ID：16033133
> 
> 赞同：1
> 
> 时间：2013-04-16T09:16:53.893
> 
> 标签：perl, post, multipart

我正在尝试使用使用多部分实体的 API。我想我缺少一些东西。

我目前的代码如下：

```
#!/usr/bin/perl

 #$request = $ua->request($request);
#my $results=$ua->request($request);
$content = $request->content; 

#print "Content-type: application/xml\n\n"; 

print $content; 
exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:43:19.083

您必须将要创建的内容类型添加到 POST 的参数中，并提供文件名作为数组引用。这应该有效：

```
my $request=(POST 'http://servername/test.jsp', 
    Content_Type => 'form-data',
    Content      => [
        appGUID         => "Test",
        userId          => "User",
        password        => "<Password>",
        bugId           => "12345678",
        fileDescription => "trying to attach a file",
        external        => "false",
        Filedata        => [ "Path" ],
    ],
); 
```

# css - 简化嵌套 div 的 CSS

> ID：16033137
> 
> 赞同：1
> 
> 时间：2013-04-16T09:17:10.487
> 
> 标签：css, html

我有一个这样的DOM：

```
<div class='container'>
  <div class='visual'>
    indent indicator
  </div>
  <div class='nomove'>
    text in this class is always left-aligned
  </div>
  <div class='container'>
    <div class='visual'>
      indent indicator
    </div>
    <div class='nomove'>
      text in this class is always left-aligned
    </div>
    <!-- more container nesting possible -->
  </div>
</div> 
```

CSS是

```
.container .visual {
    margin-left:20px;
}
.container .container .visual {
    margin-left:40px;
}
.container .container .container .visual {
    margin-left:60px;
} 
```

这必须针对每个深度级别进行，这当然是愚蠢的。

这是一个[jsfiddle](http://jsfiddle.net/TMAXa/4/)（更新：更多结构，更多文本行）

有没有更简单的解决方案可以维护树状 HTML 并具有相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:49:10.793

我知道这不是一个非常优雅的解决方案：

```
.container{
    padding:20px 0 0 20px;
}

.nomove {
    position:absolute;
    left:10px;
} 
```

[演示](http://jsfiddle.net/pavloschris/TMAXa/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:19:30.923

您可以删除一些`container`类并简单地依赖三个`visual`类。

**HTML**

```
<div>
  <div class='visual1'>
    indent indicator
  </div>
  <div class='nomove'>
    text in this class is always left-aligned
  </div>
  <div>
    <div class='visual2'>
      indent indicator
    </div>
    <div class='nomove'>
      text in this class is always left-aligned
    </div>
    <div>
      <div class='visual3'>
        indent indicator
      </div>
      <div class='nomove'>
        text in this class is always left-aligned
      </div>
      <!-- more nested containers possible -->
    </div>
  </div>
</div> 
```

**CSS**

```
.visual1 {
    margin-left:20px;
}
.visual2 {
    margin-left:40px;
}
.visual3 {
    margin-left:60px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:28:34.407

你可以这样做：http: [//jsfiddle.net/TMAXa/3/](http://jsfiddle.net/TMAXa/3/)

这是从@KevinBowersox 所说的。但是如果您在 CSS 上有增量，则不需要使用尽可能多的 HTML 代码。

```
<div class='visual1'>
    indent indicator
</div>
<div class='nomove'>
    text in this class is always left-aligned
</div>

<div class='visual2'>
    indent indicator
</div>
<div class='nomove'>
    text in this class is always left-aligned
</div>

<div class='visual3'>
    indent indicator
</div>
<div class='nomove'>
    text in this class is always left-aligned
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:37:27.713

此代码工作正常：

```
<html>
<head>
<style type="text/css">
    .container {
        margin-left: 20px;  
    }

    .nomove {
        position:absolute;
        left: 0px;
    width: 100px;
    }

    .dummie {
        color:transparent;
        width: 100px;
    }
}
</style>
</head>
<body>
<div class="container">
    <div class="visual">indent indicator</div>
    <div class="nomove">text in this class is always left-aligned</div>
    <div class="dummie">text in this class is always left-aligned</div>
    <div class='container'>
        <div class='visual'>indent indicator</div>
        <div class='nomove'>text in this class is always left-aligned text in this class is always left-aligned text in this class is always left-aligned text in this class is always left-aligned</div>
        <div class="dummie">text in this class is always left-aligned text in this class is always left-aligned text in this class is always left-aligned text in this class is always left-aligned</div>
    </div>
</div>
</body>
</html> 
```

.nomove div 与 position:absolute 和 left:0px 一起移动到左侧。虚拟 div 在两个 div 之间产生间隙，因为 position:absolute 没有高度。

PS：对不起我的英语；）

编辑：

现在 dummie 和 nomove div 具有相同的文本、相同的宽度，但 dummie 是透明的。

# jsp - 在 glassfish 应用服务器 3.1.2.2 版本中运行 Web 应用程序时出现异常

> ID：16033138
> 
> 赞同：0
> 
> 时间：2013-04-16T09:17:13.183
> 
> 标签：jsp, web-applications, glassfish-3

我开发了一个网络应用程序。它已成功部署在 Glassfish 服务器 3.1.2.2 中，但在执行时出现如下异常：

```
HTTP Status 500 -
descriptionThe server encountered an internal error () that prevented it from fulfilling this request. 
javax.servlet.ServletException: org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP    
PWC6197: An error occurred at line: 100 in the jsp file: /inOrganicLeftOutViewDetails.jsp 
org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP  
PWC6197: An error occurred at line: 100 in the jsp file: /inOrganicLeftOutViewDetails.jsp  
PWC6199: Generated servlet error:  
cannot find symbol  
  symbol:   class lang  
  location: package java  
PWC6199: Generated servlet error:  
cannot find symbol  
  symbol:   variable _jspx_temp0    
  location: class org.apache.jsp.inOrganicLeftOutViewDetails_jsp 
```

# sqlite - 是否可以将最近的 SQLite 移植到 VxWorks 6.8？

> ID：16033139
> 
> 赞同：1
> 
> 时间：2013-04-16T09:17:20.730
> 
> 标签：sqlite, vxworks

我在尝试将最近的 SQLite 源代码移植到 VxWorks 6.8 时遇到了困难。架构是PPC。

我做了一个单独的主题（[在 VxWorks 上将 SQLite 集成到 RTP 应用程序时围绕 pthreads 崩溃](https://stackoverflow.com/questions/15970387/crash-around-pthreads-while-integrating-sqlite-into-rtp-application-on-vxworks)）来提供有关我目前遇到的特定问题的所有详细信息。但看起来问题太具体了，需要一定的经验（将 C 代码移植到不同的平台、pthread、SQLite、VxWorks 知识）。

所以，我决定只是确认它是可行的。我的意思是它肯定是可行的，但我需要知道有人在合理的时间范围内实际上已经成功了。

请仅在您自己完成此操作后回复。没有一般性建议，例如：“VxWorks 是 POSIX，SQLite 是 C - 应该不是问题”。

对版主：我不是要重复我的问题。如果没有出现建设性的答案，我只是将其关闭并打算关闭。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:25:35.413

好的，我已经弄清楚了——这是 dosFS 中的问题。我将闪存格式化为 HRFS 并且能够运行 SQLite。

我在移植过程中遇到了一些移植问题，这实际上是依赖于平台的。熟悉 POSIX 函数的人应该能够弄清楚。

我想dosFS有问题。所以现在我会坚持使用 HRFS。

如果对移植本身有任何疑问 - 请联系我，我可能有相同的问题并已修复。

仅供参考，我使用的是 PPC 和 VxWorks 6.8。

问候

# java - 在休眠会话中禁用过滤器

> ID：16033144
> 
> 赞同：3
> 
> 时间：2013-04-16T09:17:24.833
> 
> 标签：java, hibernate, hibernate-filters

我创建了一个过滤器来申请特定 bean 的会话。每次获取会话时，我都会启用过滤器：

```
@Override
protected final Session getHibernateSession() {
   enableFilter("filterName",
         "parameterName", "parameterValue");
   return super.getHibernateSession();
} 
```

现在我希望对于特定查询，不需要启用此过滤器。存在禁用过滤器的选项，但我无法找到合适的位置来执行此操作。我试过了：

```
DetachedCriteria criteria = criteria();
// some restrictions and projections
disableFilter("filterName")
return find(criteria); 
```

问题是，当 find(criteria) 被触发时，再次获取休眠会话，从而启用过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-19T20:01:23.807

我认为您已经创建了单独的方法来启用和禁用过滤器。

您必须在 find(criteria) 方法本身中禁用过滤器。而不是这样做：

```
getHibernateSession().createQuery(somequery); 
```

你将不得不做这样的事情：

```
Session session = getHibernateSession();
session.disableFilter("filterName");
session.createQuery(somequery); 
```

这应该有效。我还找到了一个可以提供帮助的链接： [https ://www.tikalk.com/posts/2013/01/28/how-to-activate-and-deactivate-hibernate-filters/](https://www.tikalk.com/posts/2013/01/28/how-to-activate-and-deactivate-hibernate-filters/)

# c# - 如何根据属性获取集合中的值

> ID：16033145
> 
> 赞同：1
> 
> 时间：2013-04-16T09:17:25.327
> 
> 标签：c#, .net, sql, sql-server, sql-server-2008

我正在使用 SMO 视图集合，并希望根据其“TABLE_NAME”属性从该集合中提取视图，即以下 SQL 查询中的 TABLE_NAME 列：

```
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.VIEWS 
```

执行上述查询后，假设我已将表名存储在名为`name`.

如何返回具有该名称的视图？我尝试了以下方法，但是它不检查视图名称，而是检查 TABLE_SCHEMA + TABLE_NAME：

```
currentDatabase.Views[name]; 
```

例如，如果我想获得一个名称为“Testing”的视图，则该集合在调用时不会返回任何内容，`currentDatabase.Views["Testing"]`因为该视图将被存储`[Schema].[Testing]`为例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:38:03.087

设法自己解决了问题。如果有人遇到同样的问题，View 集合有一个重载选项，您可以在其中指定名称和架构，如下所示：

```
currentDatabase.Views[name, schema]; 
```

# ruby-on-rails - Facebook OAuthException 代码 191 - 无效重定向（有时）

> ID：16033150
> 
> 赞同：0
> 
> 时间：2013-04-16T09:17:54.297
> 
> 标签：ruby-on-rails, facebook, oauth-2.0

我为此失眠了很多，真的不知道如何解决它。

该错误仅影响我的一些用户，有时是在他们已经注册并想再次使用 Facebook 登录之后。我的一位用户提交了以下出色的屏幕截图，其中显示了错误和链接 - 当我从我的计算机上尝试此操作时，它可以使用任何语言都没有问题。

![截屏](https://i.stack.imgur.com/3ik9w.jpg) 按钮上的链接是：

```
http://www.thestudentranking.com/users/auth/facebook?locale=en 
```

**路由.rb**

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", :registrations => "users/registrations"}
devise_for :users 
```

**在 Facebook 中设置** ![Facebook 应用程序设置](https://i.stack.imgur.com/qORrM.png)

我不确定接下来我可以尝试什么来解决这个问题。我在 SO 上阅读了很多答案，但这些似乎没有帮助。这一定是一个常见的错误，很想知道我做错了什么。

**更新** 我尝试将应用程序详细信息和网站网址设置为以下内容，并将检查这是否有效。 ![尝试](https://i.stack.imgur.com/hWxSm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:44:13.650

您需要正确配置回调。我在 GitHub 上为此上传了一个示例应用程序，其中包括带有屏幕截图的应用程序配置。请通过这个例子：[Omni_share_example](https://github.com/sonianand11/omniauth_share_example)。希望对您有所帮助。

# c++ - 这个表达式在 C++ 中是什么意思

> ID：16033151
> 
> 赞同：0
> 
> 时间：2013-04-16T09:18:03.487
> 
> 标签：c++, opencv

我曾经在 opencv 代码中遇到过这个表达式：

```
Mat bimage = image >= sliderPos; 
```

已知`sliderPos`是一个整数。

请问这是什么意思。

提前致谢

加法：当然类型`image`是`cv::Mat`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:27:50.180

不知道 的类型很难判断`image`，但根据 OpenCV 文档，我认为这条线转换`image`为黑白图像，`sliderPos`用作确定哪些像素将是黑色的阈值。

从[关于矩阵的 OpenCV 文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#matrix-expressions)：

> 比较：A cmpop B、A cmpop alpha、alpha cmpop A，其中 cmpop 是以下之一：>、>=、==、!=、<=、<。比较的结果是一个 8 位单通道掩码，其元素设置为 255（如果特定元素或元素对满足条件）或 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:20:46.607

表达方式

```
Mat bimage = image >= sliderPos; 
```

测试是否`image`大于或等于`sliderPos`（通常产生 a `bool`）并将测试结果分配给新创建`bimage`的类型变量`Mat`。

如果`>=`运算符重载 for `(decltype(image), int)`，它可能不会产生`bool`. 如果是这种情况，请查看类型的文档以`image`获取详细信息。在任何情况下，它都会产生一些东西，从中`Mat`可以构造 a 。

# git - 通过命令行在 Git 提交消息中使用撇号（单引号）

> ID：16033158
> 
> 赞同：68
> 
> 时间：2013-04-16T09:18:23.393
> 
> 标签：git, bash, escaping

我正试图[更进一步](https://stackoverflow.com/questions/5131948/use-of-an-exclamation-mark-in-a-git-commit-message-via-the-command-line)。这如何在标准的 Bash shell 中工作？

```
git commit -m 'cracked enigma's code' 
```

这可以简单地通过反斜杠转义来完成，如下所示？

```
git commit -m 'cracked enigma\'s code' 
```

此外，如何使用双引号？还通过反斜杠转义？那会是最好的方法吗？有什么好的替代方法吗？

```
git commit -m 'cracked the "real" enigma's code' 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-16T09:24:54.090

使用双引号：

```
git commit -m "cracked enigma's code" 
```

或者，如果您的消息包含其他特殊字符，请仅对单引号使用双引号或反斜杠：

```
git commit -m 'cracked $enigma'"'"'s code'
git commit -m 'cracked $enigma'\''s code' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-16T09:24:03.903

`'`如果您的提交是双引号，则无需转义该字符。

```
git commit -m "cracked enigma's code" 
```

**编辑**：无论如何，当您在提交消息中添加一些特殊字符时，我更喜欢在编辑器（如 nano 或 vim）中进行编辑，无需`-m`选项即可提交。

```
git commit 
```

然后输入消息并退出。它更舒适，而不是考虑如何转义所有这些引号和双引号。

# javascript - 尝试在 JQuery 中使用 fnAddTr() 在数据表中添加新行

> ID：16033161
> 
> 赞同：1
> 
> 时间：2013-04-16T09:18:30.340
> 
> 标签：javascript, jquery, datatables

我正在尝试向已创建的数据表添加新行，但如果在添加我调用的行之前`fnClearTable()`我收到 404 NOT FOUND 错误，如果我在它根本不起作用之前不清除表，这里是代码：

```
table = $("#elem_info_table").dataTable( {
  "bServerSide": true,
  "aaSorting": [[ 0, "desc" ]],
  "bJQueryUI": true,
  "bAutoWidth": false
 } );
table.fnClearTable();
table.fnAddTr($('<tr onClick="zoomElem(this)" style="background-color:'+color+'"><td>'+colorSquema[element]["element"]+"</td><td>"+colorSquema[element]["measurement"]+'</td><td><img src='+imgSrc+'radiolog/images/icon-ok.png/></td></tr>')[0]); 
```

PS：我将此脚本用于 fnAddTr 函数[https://code.google.com/p/regimun/source/browse/trunk/media/js/dataTables.fnAddTr.js?r=81](https://code.google.com/p/regimun/source/browse/trunk/media/js/dataTables.fnAddTr.js?r=81)

# listview - Wicket ListView - 通过文本字段刷新下拉选择

> ID：16033162
> 
> 赞同：0
> 
> 时间：2013-04-16T09:18:32.157
> 
> 标签：listview, wicket, dropdownchoice

我创建了一个列表视图，它将在表视图中显示记录数，并且列表视图内部包含一个文本字段和一个下拉选择字段。

我需要实现的是文本字段的 onchange 以默认下拉选项中特定记录的值。但是似乎在使用以下代码时，当它只有1条记录要更新时，它可以工作，但是当存在多条记录时，它会失败。需要帮忙！提前致谢。

示例代码：

```
new ListView("list", getItemList()) {
    protected void populateItem(ListItem item) {
        final Sl qv = (Sl) item.getModelObject();
        item.setModel(new CompoundPropertyModel(qv));

        ratio = new TextField("ratio");
        item.add(ratio);
        ratio.setOutputMarkupId(true);

        ratio.add(new AjaxFormComponentUpdatingBehavior("onkeyup") {
            @Override
            protected void onUpdate(AjaxRequestTarget target) {
                getProperties().put("rating" + Sl.getid(), "Strong");
                target.addComponent(rating);
            }
        });

        rating = new DropDownChoice("rating", getDdlmodels().get(item.getIndex()), ratingList);
        item.add(rating);
        rating.setOutputMarkupId(true);
    }
} 
```

注意：以 ValueMap 属性为键的 PropertyModel (DdlModels) 已用于获取和设置下拉选择的值。在文本字段的 onchange 中，propertyModel 已经更新，但是即使我添加了用于 ajax 刷新的下拉选项也没有被刷新/重新渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:54:12.680

问题是您将所有文本字段“绑定”到最后一个“评级”，因为它是您班级的私人成员。

当调用“onUpdate”行为时，它将使用在填充项方法范围之外声明的评级成员，因此是在列表视图的最后一次迭代中分配的成员。

这就是为什么它适用于一张唱片。您当前的实现应该仅适用于最后“行”。

“评级”变量应**在填充项方法**中声明。

# javascript - Javascript 计算 - onchange 为空？WordPress

> ID：16033167
> 
> 赞同：0
> 
> 时间：2013-04-16T09:18:46.660
> 
> 标签：javascript, html, wordpress

我的表单计算在我的 jsfiddle 中工作，但是在我的 wordpress 页面中，它显示`Uncaught TypeError: Cannot set property 'onchange' of null`. 我的页面在加载时没有加载该功能吗？

（标题中的javascript）

```
function doTotal(form) {
    var a = (+form.halfday1.value);
    var b = (+form.fullday1.value);

    form.total1.value = a + b ;
}
document.getElementById("quote").onchange = function (){doTotal(this)}; 
```

[http://jsfiddle.net/2666c/](http://jsfiddle.net/2666c/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:49:06.853

你的代码没有运行，因为它试图找到`<element id="quote"/>`没有这样的元素。您需要将代码放在此元素下。或者在[文档加载](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)事件上运行它。例如：

```
jQuery(document).ready(function($){
    jQuery('#quote').change(function (){doTotal(this)});
}); 
```

# javascript - Jstree 还记得选择吗？

> ID：16033171
> 
> 赞同：0
> 
> 时间：2013-04-16T09:18:53.207
> 
> 标签：javascript, jquery, jstree

我正在使用 li 和 ul 标签加载 jstree。现在我想记住用户所做的选择，并将其存储在一些 json 中以供以后使用。

例如jstree之后加载了一些值，我想用未选择的值重新加载同一棵树，然后树变短并且只显示那些未选择的值，然后用户再次切换回完整视图单击某个按钮，现在我想确保用户在短视图中选择的值也出现在全视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:33:14.957

我记住选择的方式是，继续并存储您的 id

*   如果您想在将来使用节点，只需使用 style 隐藏您想要隐藏的 id，display:none。

    我希望这有帮助。

# mips - 在 MIPS 上得到错误的 epc

> ID：16033172
> 
> 赞同：1
> 
> 时间：2013-04-16T09:18:54.177
> 
> 标签：mips, cpu-registers

我知道 MIPS 在分支延迟发生时会得到错误的 epc 寄存器值，并且 epc = fault_address - 4。但是现在，我经常得到错误的 EPC 值，它甚至不在 .text 段中，例如 0xb6000000，这有什么问题?? 谢谢你的提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:56:48.973

CPU 对程序中区域的边界一无所知`.text`。它只是实现了一个 2^32 字节的地址空间。

错误编程的跳转可能会转到 2^32 字节地址空间内的任何地址。跳转指令本身不会导致任何异常——事实上，*MIPS32® 程序员架构第二卷：MIPS32® 指令集*明确声明跳转（`J, JR, JALR`）指令不会触发任何异常。

当处理器从错误编程的跳转目的地开始执行时，可能是在未初始化的内存中，接下来发生的事情取决于该内存的内容。如果未初始化的内存充满了“随机”数据，则该数据将被解释为处理器将执行的指令，直到找到非法指令或指令触发其他异常为止。

# url - 重定向到页面而不重新加载

> ID：16033177
> 
> 赞同：3
> 
> 时间：2013-04-16T09:19:02.873
> 
> 标签：url, redirect, angularjs, reload

我有一个非常接近默认种子应用程序的 Angular.js 应用程序：

**应用程序.js**

```
angular.module('wegush', ['wegush.filters', 'wegush.services', 'wegush.directives', 'wegush.controllers', 'wegush.models', 'notifierModule'])
    .config(['$routeProvider', function($routeProvider) {
        $routeProvider.when('/', { templateUrl: 'home', controller: 'HomeController' });
        $routeProvider.when('/login', { templateUrl: 'login', controller: 'LoginController' });
        $routeProvider.when('/register', { templateUrl: 'register', controller: 'RegisterController' });
        $routeProvider.otherwise({redirectTo: '/'});
    }]) 
```

**索引.html**

```
<ul class="menu">
    <li><a href="#/">Home</a></li>
    <li><a href="#/login">Login</a></li>
    <li><a href="#/register">Register</a></li>
</ul>

<div ng-view></div> 
```

在其中一项服务中，我使用该`$location`服务将用户重定向到给定页面：

```
$location.path('/'); 
```

但是，当我这样做时，它会重新加载整个应用程序，而不是简单地在内部显示相关视图`ng-view`（就像我单击上面的菜单链接之一时那样）。

那么有什么技巧可以`$location`显示正确的视图但不重新加载页面？

# php - Doctrine Extensions [Sluggable] 完整性约束违规：列 slug 不是唯一的

> ID：16033180
> 
> 赞同：0
> 
> 时间：2013-04-16T09:19:17.063
> 
> 标签：php, doctrine-orm, doctrine-extensions

我在这样的类之间使用继承：

车辆---汽车----跑车

车辆---卡车---卡车机器

我的类 Vehicle 具有实体注释和双向关系（多对多）。

对于 Car 和 Truck，我的 slug 不一样，是使用每个类的不同字段生成的。

我的课程：

[https://github.com/VasMozart/DoctrineExtensions/tree/master/tests/Gedmo/Sluggable/Fixture/Inheritance2](https://github.com/VasMozart/DoctrineExtensions/tree/master/tests/Gedmo/Sluggable/Fixture/Inheritance2)

和我的测试 [https://github.com/VasMozart/DoctrineExtensions/blob/master/tests/Gedmo/Sluggable/Inheritance2Test.php](https://github.com/VasMozart/DoctrineExtensions/blob/master/tests/Gedmo/Sluggable/Inheritance2Test.php)

如果我实例化“汽车”我的 slug 工作，但如果我实例化“SportCar”我得到：“违反完整性约束：列 slug 不是唯一的”

谢谢，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:57:14.153

这是一个问题（当持久化蛞蝓时，类名不同）

[https://github.com/l3pp4rd/DoctrineExtensions/issues/667](https://github.com/l3pp4rd/DoctrineExtensions/issues/667)

# objective-c - 如何在 kal 日历中进行更改以显示来自 json webservice 的事件

> ID：16033182
> 
> 赞同：0
> 
> 时间：2013-04-16T09:19:20.237
> 
> 标签：objective-c, ios6, xcode4.5, kal

嗨，我正在创建一个 iphone 应用程序，我在其中使用日历来显示事件。为此，我在我的项目中使用了 kal calender api [https://github.com/klazuka/Kal](https://github.com/klazuka/Kal)，我需要根据开始日期和结束显示事件来自 json webservice 的日期，所以我必须在 kal 日历项目中进行更改，以便我可以调用我的开始日期和结束日期并显示该日期的事件。请提供代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:47:30.380

Kal git 中的 Holiday Example 是一个很好的起点。它还从 JSON 中获取事件并将其显示在 KalViewController tableView 中。

**编辑：** 我可以告诉你我做了什么，我必须在 Kal calenderView 中显示本地日历以及 JSON 事件

所以我没有更改 Kal 的任何实现来获取本机事件，但我确实为服务器事件添加了我自己的获取方法并将两个数组组合在一起。

我是这样做的，我使用了 nativeCal 示例并使用了与我的 kal 数据源相同的 eventkitDatasource.m

然后，在 KalViewDelegate 协议方法中

```
- (void)didSelectDate:(KalDate *)date 
```

我发送请求从服务器获取所选日期的事件，从服务器接收事件数组，然后将这些对象添加到 eventkitDatasource.m 中的数组，并在

```
- (NSArray *)eventsFrom:(NSDate *)fromDate to:(NSDate *)toDate 
```

从本地日历和服务器事件返回事件。

这是我对方法的实现

```
- (NSArray *)eventsFrom:(NSDate *)fromDate to:(NSDate *)toDate
{
NSMutableArray *matches = [NSMutableArray array];
for (Meeting *meeting in events)
{
    if (IsDateBetweenInclusive(meeting.startDate, fromDate, toDate)){
        [matches addObject:meeting];
    }
}
if([arrServerEvents count]>0){
    [matches addObjectsFromArray:arrServerEvents];
}

return matches;
} 
```

您还可以看到，我在这里创建了一个公共会议类，它具有 Ekevent 和我的服务器事件的属性。在将 EKEvents 更改为我的公共类对象

```
- (void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate{ 
```

方法，然后将这些对象添加到 eventkitDatasource.m 的本机事件数组中。

希望我足够清楚。

# c# - 文件名大小限制是多少

> ID：16033183
> 
> 赞同：0
> 
> 时间：2013-04-16T09:19:20.250
> 
> 标签：c#, asp.net, io

我想重命名上传到我的网站的图像文件并给它们一些描述。我正在使用 ASP.NET、C#，当然还有 Windows 主机。文件名将包含 Unicode 字符。在这些条件下，文件名大小限制是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:21:28.353

> 文件名的各个组成部分（即路径上的每个子目录和最终文件名）限制为 255 个字符，总路径长度限制为大约 32,000 个字符。

[资源](https://stackoverflow.com/questions/265769/maximum-filename-length-in-ntfs-windows-xp-and-windows-vista)

[MSDN 更多阅读](http://msdn.microsoft.com/en-us/library/aa365247.aspx)

但是，问题更多是由于浏览器，因为完整的 URL 仅限于多个字符，并且每个浏览器都不同。这里的一些帖子建议您应该[限制为 2000 个字符。](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers/417184#417184)

要阅读有关浏览器限制的更多信息，我[建议您阅读此处，](http://wiert.me/2010/04/20/maximum-url-lengths/)但请注意以备将来校对，**我在这里所做的评论和我引用的帖子将变得过时。您需要在阅读本文时进行自己的研究！**

# python - 在 Python 中返回不同的类型

> ID：16033190
> 
> 赞同：-2
> 
> 时间：2013-04-16T09:19:33.937
> 
> 标签：python, string, integer, return, comma

菜鸟问题，但是：假设你有一个，等于 90；b，等于 100；你想返回“90 小于 100”你如何让它返回（不打印）“90 小于 100”而不是“a 小于 b”

我试过使用逗号，但这样做不正确，它返回“（90，”小于“，100）”我猜你必须将a和b转换为字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:20:55.743

```
>>> a = 90
>>> b = 100
>>> '{0} is less than {1}'.format(*sorted([a, b]))
'90 is less than 100' 
```

如果您已经知道一个比另一个大，这会简单得多

```
'{0} is less than {1}'.format(a, b) 
```

使用时您不需要将任何变量转换为字符串，`.format`这就是它如此出色的原因！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:25:33.973

```
def main():    
    a = 90
    b = 100
    msg = foo(a,b)
    print msg

def foo(a,b):

    if a < b:
        msg = "a = %d is less than b = %d " % (a,b)
        return (msg)
    elif a> b:
        msg = "b = %d is less than a = %d " % (b,a)
        return (msg)
    else:
        msg = "a = %d is eual to a = %d " % (a,b)
        return (msg) 

if __name__=="__main__": main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:28:30.203

您可以像这样返回一个元组：

```
def func():
    # do stuff
    return (90, 'is less than', 100) 
```

然后你可以通过做类似的事情来获得这些

```
value1, text, value2 = func() 
```

value1 将等于 90，text 将等于“小于”，最后 value2 将等于 100

这是一种方法。这是另一个返回字典。

```
def func():
    # do stuff
    return {'a': 90,
            'text': 'is less than',
            'b': 100} 
```

然后你可以这样使用它：

```
ret = func()
print ret['a'] # prints 90
print ret['text'] # prints is less than
print ret['b'] # prints 100 
```

有很多方法可以做这样的事情。你甚至可以为此创建一个特定的对象。这取决于您希望如何使用您的数据

# c++ - C++：我的程序无法编译，我不知道为什么。我想我错过了一个图书馆......？简单的答案

> ID：16033191
> 
> 赞同：0
> 
> 时间：2013-04-16T09:19:44.240
> 
> 标签：c++, class, structure

这不是家庭作业。我正在为我的新编码课程复习我的基本 C++ 知识，并且我在搞乱他在其中一张幻灯片中给出的结构示例。下面是我的代码：

```
#include <iostream>
using namespace std;

struct PERSON
{
    string name;
    int age;
};

PERSON get_person(void)
{
    PERSON temp;
    cin >> temp.name;
    cin >>temp.age;
    return(temp);
}

int main(void)
{
    PERSON me;
    me= get_person();
    cout<<me.name;
    cin.get();
} 
```

//它不会识别“>>”和“<<”并且不会编译。我认为这是因为我使用的是结构并且在代码的开头没有包含某些内容。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:41:02.473

`string`不是 C++ 中的原始类型。`string`是一个类，您正在`string`代码中创建该类的对象。( ) 类在 C++ STL（标准模板库）中实现`string`。[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)

[这](http://en.cppreference.com/w/)是官方的 C++ 标准库文档。您可以在 C++ 标准库、函数、类等中找到有关头文件的信息。我建议不要访问 cplusplus.com，因为它在某些地方有错误的文档。

此外，[这里](http://en.cppreference.com/w/cpp/header)是 C++ 标准库中所有可用头文件的快速链接，并附有每个头文件的简要说明。

编辑：

要回答实际问题（我在评论中做了）：`#include <string>`放在`#include <iostream>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:32:48.993

您必须包括以下声明

```
 #include <string> 
```

# excel - Excel在编辑时丢失小数

> ID：16033192
> 
> 赞同：0
> 
> 时间：2013-04-16T09:19:47.803
> 
> 标签：excel, formatting

我的 excel 数据发生了一些奇怪的事情。

我有一个格式为 mm:ss,00 的时间列表，因此 00:38,25 表示 38 秒和 250 毫秒。

但是当我选择其中一个单元格时，公式栏会显示 00:00:38 如果我想编辑让我们说 00:40,25 我不能因为 ,25 只是消失在下界。

那么我该怎么做才能使公式栏显示单元格中的实际内容？

这是一些屏幕

![在此处输入图像描述](https://i.stack.imgur.com/RCpq9.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:31:05.153

时间在公式栏中的显示方式由您的区域设置 [自定义 > 时间] 控制。至少在我的 Excel 版本中，我可以将其更改为显示 AM 或 PM，但我无法添加毫秒，因此可能无法在编辑栏中显示。

您只需重新键入新的时间值即可进行编辑

# asp.net-mvc - EF5 ASP.NET MVC 4 Linq 查询不返回任何内容和模型属性 null -> 代码优先

> ID：16033195
> 
> 赞同：0
> 
> 时间：2013-04-16T09:20:00.493
> 
> 标签：asp.net-mvc, entity-framework, code-first, datamapper

我无法为每个客户将我的借出物品链接到我的图书馆。当它通过“AddToLibrary”方法时它做得很好，但是在检索它时，medialibrary 是空的，并且查询`IEnumerable<Item> ItemsOnLoan method`返回 null。这是一个非常基本的 ASP.NET MVC 4 应用程序，我对此很陌生，所以我可能错过了一些愚蠢的东西。

我只想能够将一个项目添加到外借项目表中，让每个客户的外借项目列表出现在他们的个人库中（在模型中定义），然后检索他们的项目列表。以下是所有代码，我使用的是代码优先方法。谢谢 ：）

模型

```
public class Customer
{
        public int Id { get; set; }
        public string ForeName { get; set; }
        public string SurName { get; set; }
        public Address address { get; set; }
        public string Email { get; set; }
        public string Telephone { get; set; }
        public string Mobile { get; set; }
        public List<LoanedItem> Library { get; set; }

        public Customer()
        {

            if (Library == null || Library.Count == 0)
            {
                Library = new List<LoanedItem>();
            }
        }

        public IEnumerable<Item> ItemsOnLoan
        {
            get
            {
                var items = (from i in Library
                             where i.Customer.Id == this.Id
                             select i).OfType<item>();
                return items;
            }
        }
} 
```

外借物品型号

```
public class LoanedItem
{
    public int? Id { get; set; }
    public Customer Customer { get; set; }
    public MediaItem Item { get; set; }
} 
```

ItemController --> 添加到库方法

```
public ActionResult AddToLibrary(int id)
{

    Item libraryItem = db.Items.Find(id);
    Customer c = db.Customers.Find(1);
    LoanedItem newLoanGame = new LoanedItem()
    {
        Customer = c,
        Item = libraryItem
    };
    db.LoanedItems.Add(newLoanGame);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

客户控制器

```
public ActionResult ViewProfile(int id = 1)
{
    Customer c = db.Customers.Find(id);
    if (c == null)
    {
        return HttpNotFound();
    }
    return View(c);
}
public ActionResult GetLibraryItems(int id = 1)
{
    var items = db.Customers.Find(id).ItemsOnLoan;
    return View(items);
} 
```

语境

```
public class LibraryContext : DbContext
{
    public DbSet<Address> Addresses { get; set; }
    public DbSet<Customer> Customers { get; set; }
    public DbSet<LoanedItem> LoanedItems { get; set; }
    public DbSet<Item> Items { get; set; }

    public LibraryContext()
        : base("LbContext")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new CustomerConfiguration());
        modelBuilder.Configurations.Add(new LoanedItemConfiguration());
        modelBuilder.Entity<Item>();
        modelBuilder.Entity<Address>();

        base.OnModelCreating(modelBuilder);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:45:58.937

假设启用了代理生成，请尝试以下操作：

```
public class Customer
{
    public int Id { get; set; }
    public string ForeName { get; set; }
    public string SurName { get; set; }
    public Address address { get; set; }
    public string Email { get; set; }
    public string Telephone { get; set; }
    public string Mobile { get; set; }
    public virtual ICollection<LoanedItem> ItemsOnLoan { get; set; }

    public Customer()
    {
    }
} 
```

使用它来访问：

```
public ActionResult GetLibraryItems(int id = 1)
{
    var customer = db.Customers.Find(id);
    if (customer != null)
    {
        var items = customer.ItemsOnLoan;
        return View(items);
    }
    //handle not found or throw an exception
    throw new Exception();
} 
```

[单击此链接](http://buildstarted.com/2010/08/11/entity-framework-and-lazy-loading/)以获取有关代理和延迟加载的更多信息。

# db2 - db2 重组表

> ID：16033196
> 
> 赞同：10
> 
> 时间：2013-04-16T09:20:08.763
> 
> 标签：db2

当我更改**db2**中的表时，我必须重新组织它，以便执行下一个查询：

```
Call Sysproc.admin_cmd ('reorg Table myTable'); 
```

我正在寻找适当的解决方案来在更改表时重新组织表，或者在进行各种修改后重新组织所有模式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:25:54.210

`REORG`您可以通过查看以下内容来确定表格何时需要[`SYSIBMADM.ADMINTABINFO`](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.rtn.doc/doc/r0052897.html)：

```
select tabschema, tabname
  from sysibmadm.admintabinfo
 where reorg_pending = 'Y' 
```

您可能还想查看该`NUM_REORG_REC_ALTERS`列，因为这可能会向您显示由于各种语句而不*需要重组的其他表。*`ALTER TABLE`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T13:55:36.723

重组操作类似于硬盘中的碎片整理。它释放页面中的空白空间，最终它可以根据索引重新组织数据。根据功能，它创建压缩字典并压缩数据。

如您所见，重组操作是一项管理任务，并不是每次修改数据都需要。数据库可以在没有重组的情况下运行。

为了解决这个问题，DB2 包含了自动备份等自主功能，但这并不能回答您自己的问题。这只会在需要的表上触发重组。

*   要显式重组表，您需要执行命令 reorg [http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001966。 html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001966.html)
*   或通过 admin_cmd [http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.rtn.doc/doc/r0023582.html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.rtn.doc/doc/r0023582.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:31:28.810

在 db2 配置中，我们有：

自动重组 (AUTO_REORG) = OFF

我们可以将 auto_reorg 设置为 on

# c++ - int8_t 和 int64_t 的最小值

> ID：16033201
> 
> 赞同：5
> 
> 时间：2013-04-16T09:20:23.240
> 
> 标签：c++

关于在 中找到的那些定义`stdint.h`，我希望测试一个函数，用于将 的向量`int8_t`或 的向量转换为 的`int64_t`向量`std::string`。

这是我的测试：

```
TEST(TestAlgorithms, toStringForInt8)
{
    std::vector<int8_t> input = boost::assign::list_of(-128)(0)(127);
    Container container(input);
    EXPECT_TRUE(boost::apply_visitor(ToString(),container) == boost::assign::list_of("-128")("0")("127"));
}

TEST(TestAlgorithms, toStringForInt64)
{
    std::vector<int64_t> input = boost::assign::list_of(-9223372036854775808)(0)(9223372036854775807);
    Container container(input);
    EXPECT_TRUE(boost::apply_visitor(ToString(),container) == boost::assign::list_of("-9223372036854775808")("0")("9223372036854775807"));
} 
```

但是，我在 Visual Studio 中收到了一条警告：

```
std::vector<int64_t> input = boost::assign::list_of(-9223372036854775808)(0)(9223372036854775807); 
```

如下：

```
warning C4146: unary minus operator applied to unsigned type, result still unsigned 
```

如果我将 -9223372036854775808 更改为 -9223372036854775807，警告就会消失。

这里有什么问题？关于我的原始代码，测试通过了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T09:25:01.003

就像编译器说的那样，`-9223372036854775808`它不是一个有效`-`的数字，因为 和 数字是分开处理的。

您可以尝试 `-9223372036854775807 - 1`或`std::numeric_limits<int64_t>::min()`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:26:45.573

问题是整数文字不是负数。so`-42`不是具有负值的文字，而是`-`应用于文字的运算符`42`。

在这种情况下，`9223372036854775808`超出 的范围`int64_t`，因此将被赋予无符号类型。由于模运算的魔力，您仍然可以对它取反，将其分配给`int64_t`，并最终得到您期望的结果；但是编译器会警告您有关无符号否定（如果您告诉它），因为这通常是错误的结果。

您可以通过使用来避免警告（并使代码更明显正确）`std::numeric_limits<int64_t>::min()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:27:20.140

更改`-9223372036854775808`为`-9223372036854775807-1`。

问题在于它`-9223372036854775808`不是，`-9223372036854775808`而是不能适应带符号的 64 位类型（十进制整数常量默认是带符号的类型），所以它变成了无符号的。对无符号类型应用否定是可疑的，因此会发出警告。`-(9223372036854775808)``9223372036854775808``-`

# c# - 通过 Web 服务将数据插入数据库时 自动更新文本框文本

> ID：16033204
> 
> 赞同：0
> 
> 时间：2013-04-16T09:20:30.293
> 
> 标签：c#, winforms, web-services, textbox

我有一个 Web 服务，它通过一个 Web 方法和另一个显示数据库数据的 Web 方法将数据插入 SQL Server 数据库。我制作了一个 Windows 窗体应用程序，它显示了来自 web 服务的数据，编码是：

```
private void Form1_Load(object sender, EventArgs e)
    {
        Web_Reference.Service1 service = new Web_Reference.Service1();
        dataGridView1.DataSource = service.connectoToSql();
    } 
```

我还没有为文本框编码，但我希望当客户端使用 HTTP POST 将数据插入数据库时​​，文本框文本必须自动填充更新的数据，用户应该无需每次都单击刷新按钮和然后。

有没有办法解决这个问题？任何人都可以为此提供任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:55:30.440

你的问题有几个机会。

1.  当将新记录插入表中时，计时器会在所有时间间隔内“检查”。

    如果是 -> 更新表格 ex.( `dataGridView1.DataSource = service.connectoToSql()`;)

2.  使用网络服务的“推送通知”系统（在我看来已经更好）

3.  网络套接字...等

这是一个粗略的例子，我会说最简单的方法“定时器”......但是，下面的例子适用于微软的 sql 服务器和用 C# 编码的应用程序。用你的小信息不可能做得更好..：

```
public static int Main() 
{
       /* Adds the event and the event handler for the method that will 
          process the timer event to the timer. */
       myTimer.Tick += new EventHandler(TimerEventProcessor);

       // Sets the timer interval to 5 seconds.
       myTimer.Interval = 5000;
       myTimer.Start();

}
//Function called every half second
private void TimerEventProcessor(object sender, EventArgs e) 
{ 
    //Update the dataBase every half second
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        SqlCommand cmd = new SqlCommand(command, connection);
        MytextBox.Text = sqlCommand.ExecuteScalar();
        connection.Close();
        connection.Close();
    }
} 
```

我添加了一张图片以获得最佳解释： ![在此处输入图像描述](https://i.stack.imgur.com/ILq7d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:56:18.037

这对我有帮助，虽然效果最好，但它非常简单：我添加了一个计时器并在页面加载时启动它。我删除了 datagridview 并获取了 DataTable 并在计时器单击事件中加载了来自 Web 服务响应的所有数据，并用所需的数据填充了每个文本框。

现在发生的情况是，当客户端通过 HTTP POST 插入数据时，它会以当前日期时间插入表中，并且应用程序每秒显示最新数据。这是我所要求的。完全的！

我希望这篇文章将来对其他用户有所帮助。

```
 private void Form1_Load(object sender, EventArgs e)
    {            
        timer1.Start();            
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        Web_Reference.Service1 service = new Web_Reference.Service1();
        DataTable dt = service.GetData();

        textBox1.Text = dt.Rows[0]["Current_Amount"].ToString();
        textBox2.Text = dt.Rows[0]["Current_Qty"].ToString();
        textBox3.Text = dt.Rows[0]["Rate"].ToString();            
    } 
```

# jquery - 如何在编写的插件中包含外部 jQuery 插件

> ID：16033208
> 
> 赞同：0
> 
> 时间：2013-04-16T09:20:47.513
> 
> 标签：jquery, jquery-plugins, include

我正在编写一个需要使用另一个插件的[jQuery](http://jquery.com)插件。目前我这样解决这个问题：

```
<script src="otherPlugin.js"></script>
<script src="myPlugin.js"></script> 
```

这很好用。但是，我的插件不能像这样独立存在是一个问题吗？

```
<script src="myPlugin.js"></script> 
```

这是我的第一个 jQuery 插件，所以我不确定这是否是不好的做法。例如，我知道在编写[Perl](http://perl.org/)模块时，模块作者会包含他们需要的所有模块，这样用户就不必担心了。在 jQuery 中没有类似的方法可以做到这一点吗？（我想不会，因为用户需要在他们的服务器上拥有该文件）。

我在[这里](https://stackoverflow.com/questions/3732068/how-to-include-an-external-plugin-inside-of-another-jquery-plugin-being-authored)找到了这个解决方案，但是这是指如何通过 url 包含另一个插件，这不是我想要的。

将另一个 jQuery 插件与我自己的插件一起使用的正确方法是什么？如果不包含该文件，仅仅抛出一个错误就足够了吗？谢谢！

# .net - 在 Visual Studio 中调试时如何查看所有 Session 键/值对？

> ID：16033218
> 
> 赞同：5
> 
> 时间：2013-04-16T09:21:10.960
> 
> 标签：.net, asp.net-mvc, visual-studio, debugging, session

在 Visual Studio (.Net MVC4) 中调试时，是否可以一次查看所有[Controller.Session](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.session%28v=vs.98%29.aspx)键/值？我可以通过键入QuickWatch 并展开“结果视图”来查看所有**键。**`Session`例如：

```
 Results View
    [0] "IsPlaced"  
    [1] "FromSLC"   
    [2] "PersonalId"    
    [3] "FullName" 
```

[我知道可以像这样](https://stackoverflow.com/questions/2549424/how-to-view-session-variables-in-visual-studio-2008-debugger#answer-2549510)检查单个值，但无法同时获取**所有键和值**的列表。这肯定是可能的，无论是在 QuickWatch 还是在即时窗口中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:54:45.360

**想法A** 您可以在会话对象上创建一个扩展方法，以您需要的方式打印其内容。然后在即时窗口中调用此方法或向其添加监视。

**想法 B** 您还可以创建一个自定义可视化工具，按照您的意图显示您的会话对象。这里有一个基础指南：http: [//msdn.microsoft.com/en-us/library/ms164759.aspx](http://msdn.microsoft.com/en-us/library/ms164759.aspx)

这也意味着将代码添加到您的项目中，但就像扩展方法一样，它将保留在一个非常明确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:12:35.920

我没有看到一个简单的方法来做到这一点，最好的办法是编写一个方法，接收 HttpSessionState 并将其转换为字典，然后从 QuickWatch 窗口调用该方法。一个更复杂的解决方案是为 HttpSessionState编写您自己的[DebuggerTypeProxy](http://msdn.microsoft.com/en-us/library/d8eyd8zc.aspx)[并将其放入您的 autoexp.cs](http://blogs.msdn.com/b/calvin_hsia/archive/2007/10/02/5256045.aspx)文件中，这种方法的优点是它可以跨不同的应用程序工作，并且不会强迫您使用以下代码弄脏您的解决方案仅用于调试。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-25T10:41:08.230

尝试添加命名空间：

```
using System.Diagnostics; 
```

在创建会话的页面中，添加以下内容：

```
Debug.Write(Session["your session value or text"]); 
```

# parsing - 使用 ANTLR 3 解析由两个句点分隔的浮点数和范围

> ID：16033219
> 
> 赞同：1
> 
> 时间：2013-04-16T09:21:12.937
> 
> 标签：parsing, antlr, antlr3

我正在为具有两个当前“冲突”功能的 DSL 开发解析器：

1.  浮点数，如`123.4`.
2.  指定的范围如`ID[2..5]`(ID 被定义为`'a'..'z'+`并且无关紧要。部分 '[2..5]' 最重要。

应该解析它的测试语法如下所示：

```
grammar DotTest;

span returns [double value] 
  : ID'['e=INT'..'f=INT']' { /*some code to process the values*/ $value = (double)(Int32.Parse($e.text) + Int32.Parse($f.text)); } ;

num returns [double value]
  : DOUBLE {$value = double.Parse($DOUBLE.text); } ;

INT     : '0'..'9'+ ;
DOUBLE  : '0'..'9'+'.''0'..'9'+ ;
ID      : 'a'..'z'+ ;

WS      :   ( ' ' | '\t' | '\r' | '\n' ) {$channel=HIDDEN;} ; 
```

**问题：**规则`span`无法正确解析其输入，因为它与`DOUBLE`令牌冲突。词法分析器尝试匹配`2..5`为 a`DOUBLE`并失败。这是它在 ANTLR Works 中的外观：

![不匹配的令牌异常。](https://i.stack.imgur.com/BNWTL.png)

解决此冲突并正确解析两个`INT`s 的`span`正确方法是什么？

**PS**我使用的是 ANTLR 3 而不是 ANTLR 4，因为我要生成一个 C# 解析器，目前在 ANTLR 4 中没有实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:53:52.180

[这个解决方案](https://stackoverflow.com/a/8642352/532647)（第二个语法）工作正常。在我将词法分析器规则转换为以下内容后：

```
NUM : (INT RNG)=> INT {$type=INT;}  

    | (DOUBLE)=> DOUBLE {$type=DOUBLE;}

    | INT {$type=INT;};

fragment INT :  '0'..'9'+ ;
fragment DOUBLE :   '0'..'9'+'.''0'..'9'+ ;

RNG: '..' ; 
```

解析间隔之类的`1..2`开始工作顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:09:09.273

您在上面发布的规则与运营商`DOUBLE`不冲突，因为以下规则至少包含一位数字。以下替代定义实际上会发生冲突：`..``'0'..'9'+``'.'``DOUBLE`

```
DOUBLE : '0'..'9'+ '.' '0'..'9'*; 
```

我怀疑您在 ANTLRWorks 中使用了解释器，众所周知，它在许多情况下会给出不正确的结果。

# bash - 检查脚本是否已被重定向

> ID：16033221
> 
> 赞同：2
> 
> 时间：2013-04-16T09:21:16.977
> 
> 标签：bash, shell, io-redirection

`bash`如果输出显示在终端中，或者如果它被重定向到文件，我有一个脚本必须以不同的方式运行。它必须做这样的事情（`myscript.sh`）：

```
if [ redirected_to_terminal ] ; then
    flag="--color"
else
    flag="--no-color"
fi

grunt $flag 
```

这将被称为：

```
./myscript.sh 
```

或者像这样：

```
./myscript.sh > /tmp/log.txt 
```

并且将`stdout`在脚本中检测到重定向。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:26:05.523

您可以使用`-t`bash 的选项：

```
 -t fd  True if file descriptor fd is open and refers to a terminal. 
```

并像这样检查：

```
if [[ -t 1 ]]; then
 # console is attached
else 
 # Redirected to somewhere
fi 
```

# php - 更新在另一个表中找到记录的表

> ID：16033224
> 
> 赞同：0
> 
> 时间：2013-04-16T09:21:28.570
> 
> 标签：php, mysql

我真的在努力实现这一目标，并希望有人可以帮助我。我有现有的功能和查询：

```
公共函数 setStockAndPrice($product_id) {
  $query = $this->db->query('UPDATE' . DB_PREFIX . 'product SET 数量 = 0, price = 0.00 WHERE product_id = ' . (int)$product_id)
}
```

这可行，但是当我实际上希望它仅在该产品存在于另一个表中时将产品设置为零时，它将所有产品设置为零。

即，在解释性方面：

```
公共函数 setStockAndPrice($product_id) {
  $query = $this->db->query('UPDATE ' . DB_PREFIX . 'product SET quantity = 0, price = 0.00 WHERE product_id = ' . (int)$product_id AND product_id 存在于 CustomerProducts)
}
```

我不熟悉连接，但我不确定是否需要在这里使用连接，因为查询似乎比这更简单。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:27:17.513

```
 public function setStockAndPrice($product_id) {
  $query = $this->db->query('UPDATE ' . DB_PREFIX . 'product SET quantity = 0, price = 0.00 WHERE product_id = ' . (int)$product_id ." AND product_id =(select DISTINCT(product_id) from CustomerProducts where product_id= $product_id)" )
  } 
```

这可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:34:15.913

```
public function setStockAndPrice($product_id) {
      $query = $this->db->query('UPDATE ' . DB_PREFIX . '.product p, ' . DB_PREFIX . '.CustomerProducts cp SET p.quantity = 0, p.price = 0.00 WHERE p.product_id = ' . (int)$product_id . ' AND p.product_id = cp.product_id');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:32:07.210

使用这将适用于您没有分配`db.product`并确保您在字符串中编写查询然后执行。

你看到你查询，通过删除评论

```
public function setStockAndPrice($product_id) {
  $query_string = "UPDATE " . DB_PREFIX . ".product SET quantity = '0', price = '0.00' WHERE product_id = '$product_id'";

  // echo "Query : " . $query_string;

  $query = $this->db->query($query_string);
} 
```

# mysql - 将 MVC 与 MySql 一起使用

> ID：16033228
> 
> 赞同：0
> 
> 时间：2013-04-16T09:21:41.133
> 
> 标签：mysql, asp.net-mvc-3, entity-framework

我想将 MVC 框架和 EntityFramework 与 MySql 一起使用。但是当我尝试选择 Datasource 来更改数据库和提供程序时，MySql 数据库没有显示。那么我该如何选择MySql数据库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:23:26.573

[您应该从http://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)下载 mysql 连接器，然后将 dll-s 添加到您的项目并使用数据适配器。

或者教程中有另一种方法

[http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-entity-framework-winform-data-source.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-entity-framework-winform-data-source.html)

[http://www.codeproject.com/Tips/426790/Using-MySQL-with-Entity-Framework](http://www.codeproject.com/Tips/426790/Using-MySQL-with-Entity-Framework)

# javascript - 如何计算旋转矩形的碰撞

> ID：16033229
> 
> 赞同：2
> 
> 时间：2013-04-16T09:21:41.477
> 
> 标签：javascript, rotation, collision

我尝试计算旋转矩形边缘的碰撞。

这是关于 jsFiddle 的示例：http: [//jsfiddle.net/XgHxx/](http://jsfiddle.net/XgHxx/)

像这样的东西：

```
if( mask.x < img.x * rotate_Factor ) mask.x = img.x * rotate_Factor ; 
```

如您所见，我的碰撞仅适用于未旋转的图像。而且我希望矩形即使在旋转时也位于图像内部。

谢谢，莫滕曼。

ps.：我举了一个我认为如何计算的例子：![RotatedImgColl](https://i.stack.imgur.com/gmuPj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:13:14.843

看起来它已经得到了回答：看到这个问题[如何检查 2 个旋转矩形之间的交集？](https://stackoverflow.com/questions/10962379/how-to-check-intersection-between-2-rotated-rectangles)，还有一个答案提供了JS实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:52:07.863

从我薄弱的数学头脑中思考，您可以通过找出蒙版的任何角点是否包含在图像的边界线中来检查。

您可以通过计算图像的线方程（基于其位置）来做到这一点，然后检查蒙版的任何角点是否位于任何边界上，然后停止框在该方向上的移动角点正在触及边界。

只是几个数学公式。

在 jquery 中可能有更好的方法来执行此操作，但上述解决方案不需要任何库:)

# excel - 无法在工作簿关闭时更改应用程序设置

> ID：16033234
> 
> 赞同：1
> 
> 时间：2013-04-16T09:21:59.753
> 
> 标签：excel, vba

我在用户窗体上有一个退出按钮。如果用户单击它，我希望它将 Excel 的设置返回为其原始值，然后关闭工作簿。退出按钮中的代码如下：

```
Unload Me

If g_Released Then
    ThisWorkbook.Close savechanges:=False
End If 
```

Workbook_BeforeClose 事件中的代码是：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

Dim bSaved As Boolean

bSaved = ThisWorkbook.Saved 
ActiveWindow.DisplayWorkbookTabs = True

'more code here 
```

最后一行不会显示工作簿选项卡。在代码中，我还尝试设置诸如此类的东西`Application.DisplayFormulaBar = True`，但它们都没有任何影响。似乎这些属性以某种方式被迫进入只读状态，但我不知道为什么。

编辑：这是完整的代码。

```
Private Sub Workbook_Open()

InitialiseVariables
Application.ScreenUpdating = False
HideExcelUI Application, False, True, False, "Some Company", "Budgeting Module Release 0.1", ThisWorkbook.Path & "\Logo.ico"
HideWorksheetsUI False, False, False
wsBackground.Select

With Application
    .WindowState = xlNormal
    .Height = frmMain.Height
    .Width = frmMain.Width
End With

Application.ScreenUpdating = True
DisplayFormInCenter frmMain

End Sub

Public Sub InitialiseVariables()

g_tDBfolder = ThisWorkbook.Path & "\"
Set g_cn = New ADODB.Connection

With g_cn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .Properties("Data Source") = g_tDBfolder & g_tDBname
    .Open
End With

g_ScenarioIsSaved = True
g_ScenarioID = CLng([Scenario_ID])
Set g_rBudgetYear = [BudgetYear]
Set g_rStartMonth = [StartMonth]
Set g_rDealerName = [DealerName]
Set g_rScenario = [Scenario]

End Sub

Public Sub HideExcelUI(ByRef xlApp As Excel.Application, _
                        ByVal ShowFormulaBar As Boolean, ByVal ShowScrollBars As Boolean, ByVal ShowStatusBar As Boolean, _
                        Optional ByVal strApplicationCaption As String, Optional ByVal strWindowCaption As String, Optional ByVal strIcoFile As String)

With xlApp
    .ExecuteExcel4Macro "SHOW.TOOLBAR(""RIBBON"",FALSE)"
    .DisplayFormulaBar = ShowFormulaBar
    .DisplayScrollBars = ShowScrollBars
    .DisplayStatusBar = ShowStatusBar

    If strApplicationCaption <> "" Then
        .Caption = strApplicationCaption
    End If

    If strWindowCaption <> "" Then
        .Windows(1).Caption = strWindowCaption
    End If

    If strIcoFile <> "" Then
        SetIcon strIcoFile, 0
    End If

End With

End Sub

Public Sub HideWorksheetsUI(ByVal ShowGridlines As Boolean, ByVal ShowHeadings As Boolean, ByVal ShowWorkbookTabs As Boolean)

Dim ws As Worksheet, wsCurrent As Worksheet

Application.ScreenUpdating = False
Set wsCurrent = ActiveSheet

For Each ws In ThisWorkbook.Worksheets
    ws.Activate

    With ActiveWindow
        .DisplayGridlines = False
        .DisplayHeadings = False
        .DisplayWorkbookTabs = False
        .Caption = ""
    End With

Next

wsCurrent.Activate
Application.ScreenUpdating = True

End Sub

Public Sub DisplayFormInCenter(ByVal objForm As Object, Optional ByVal bModeless As Boolean)

With objForm
    .startupposition = 0
    .Left = Application.Left + (0.5 * Application.Width) - (0.5 * .Width)
    .Top = Application.Top + (0.5 * Application.Height) - (0.5 * .Height)

    If bModeless Then
        .Show vbModeless
    Else
        .Show
    End If

End With

End Sub

Private Sub ExitButton_Click()

Unload Me

If g_Released Then
    ThisWorkbook.Close savechanges:=False
End If

End Sub

Private Sub Workbook_BeforeClose(Cancel As Boolean)

Dim bSaved As Boolean, Success As Boolean
Dim UserResponse As Long

bSaved = ThisWorkbook.Saved
ActiveWindow.DisplayWorkbookTabs = True

If g_Released Then

    If Not g_ScenarioIsSaved Then
        UserResponse = MsgBox(Prompt:="There are unsaved changes in the current budget. Save changes?", Buttons:=vbYesNoCancel)

        If UserResponse = vbYes Then
            Success = SaveInputs(ActiveSheet)

            If Not Success Then
                MsgBox "Unexpected error. All inputs were not saved. Please contact vendor."
            End If

        ElseIf UserResponse = vbNo Then
            'Go ahead and close
        Else
            Cancel = True
        End If

    End If

End If

ResetIconToExcel
ThisWorkbook.Saved = bSaved

End Sub 
```

# php - MySQL：从列表中选择列包含元素的行

> ID：16033239
> 
> 赞同：5
> 
> 时间：2013-04-16T09:22:18.227
> 
> 标签：php, mysql, sql

我正在尝试从表中选择所有行，其中列包含列表中的元素：类似于

```
Select * from `table` where `column` (contains anything from {£,$,%,^,&,...,/}) 
```

这基本上是一个非法的字符检查。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T09:25:17.623

对于 MySQL，您可以使用[`REGEXP`](http://dev.mysql.com/doc/refman/5.7/en/regexp.html)或[`RLIKE`](http://dev.mysql.com/doc/refman/5.7/en/regexp.html)检查特定列的模式匹配。在您的情况下，以下示例可能有效：

```
SELECT * FROM `table` WHERE `column` REGEXP '[\£\$\%\^\&]'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:24:59.427

您可以`LIKE`用于模式匹配，

```
SELECT  *
FROM    `table`
WHERE   `column` LIKE '%£%' OR
        `column` LIKE '%$%' OR
        `column` LIKE '%\%%' OR
        `column` LIKE '%&%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:31:06.323

如果我理解正确，您想要所有具有非字母数字字符的行，即除数字和字母之外

```
SELECT * FROM `table` WHERE `column` REGEXP '^[^a-zA-Z0-9]+$' 
```

内部字符类意味着否定，而`^`在`[ ]`正则表达式开头的外部指定列值的开始。`$`实现字符串值的结尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:39:59.907

```
SELECT * FROM table WHERE column LIKE '%\%%' OR column LIKE '%$%' OR column LIKE '%&%'; 
```

...ETC。'%char%' 表示某处有 char，'%char' 表示 char 在字符串的末尾，'char%' 表示它在开头。'%\%%' 表示搜索到的字符（%）是 mysql 使用的特殊字符，'\' 是必须的。

# graph - 区域堆叠顺序和工具提示

> ID：16033247
> 
> 赞同：1
> 
> 时间：2013-04-16T09:22:36.767
> 
> 标签：graph, highcharts, time-series

我正在制作堆积面积图。A系列应该在B系列之下

由于无法颠倒堆叠顺序，我不得不颠倒系列顺序，以便 chart.series[0] 是系列 B 和 chart.series [1](http://jsfiddle.net/3fd6L/)系列 A。

我可以颠倒图例的顺序，将 A 系列放在 B 系列之前。

但是我仍然对共享工具提示有问题，其中系列 A 显示在系列 B 下方。

有没有改变工具提示顺序的解决方案？

```
$(document).ready(function() { 
var char_option={chart:{type:null,
renderTo:"container",
zoomType:"xy",
marginTop:100,
height:500,
margin:{marginLeft:0},
backgroundColor:"transparent"},    
tooltip:{xDateFormat:"%d\/%m\/%Y %H:%M",
shared:true,
crosshairs:{color:"orange",
width:1},
snap:50,
formatter:null,
useHTML:true,
backgroundColor:"rgba(241,243,248,0.85)"},
title:null,
legend:{reversed:true},
xAxis:[{gridLineWidth:null,
gridLineDashStyle:"Dash",
type:"datetime",
gridLineColor:"#C0D0E0",
plotBands:[],
plotLines:[],
title:[],
minRange:600000,
maxPadding:0.05,
opposite:false,
lineColor:"#C0D0E0",
lineWidth:0,
tickColor:"#C0D0E0",
tickInterval:null,
tickPosition:"outside",
pointPadding:null,
groupPadding:null,
borderWidth:null,
formatter:null,
endOnTick:null,
categories:null,
reversed:false,
tickLength:5,
minTickInterval:null,
min:1364947200000,
max:1365033600000}],
yAxis:[{gridLineWidth:1,
gridLineDashStyle:"Solid",
type:"linear",
labels:{formatter:function() {return this.value;}},
title:{text:"Temps (ms)"},
min:null,
max:null,
gridLineColor:"#C0D0E0",
plotBands:[],
plotLines:[],
minRange:null,
maxPadding:0.05,
opposite:false,
lineColor:"#C0D0E0",
lineWidth:0,
tickColor:"#C0D0E0",
tickInterval:null,
tickPosition:"outside",
pointPadding:null,
groupPadding:null,
borderWidth:null,
formatter:null,
endOnTick:null,
categories:null,
reversed:false,
tickLength:5,
minTickInterval:null},
{gridLineWidth:1,
gridLineDashStyle:"Solid",
type:"linear",
labels:{enabled:true},
title:{text:"nbr Anomalies"},
min:null,
max:null,
gridLineColor:"transparent",
plotBands:[],
plotLines:[],
minRange:null,
maxPadding:0.05,
opposite:true,
lineColor:"#FF0000",
lineWidth:0,
tickColor:"#00FF00",
tickInterval:null,
tickPosition:"outside",
pointPadding:0,
groupPadding:0,
borderWidth:0,
formatter:null,
endOnTick:null,
categories:null,
reversed:false,
tickLength:0,
minTickInterval:1}],
plotOptions:{area:{marker:{enabled:true,
radius:1},
lineWidth:1,
connectNulls:false,
shadow:false,
fillOpacity:0.3,
zIndex:1},
areaspline:{marker:{enabled:false},
lineWidth:1,
connectNulls:false,
shadow:false,
fillOpacity:0.3,
zIndex:1},
series:{connectNulls:false,
marker:{lineColor:"orange",
states:{hover:{fillColor:"orange",
radius:1}}}},
line:{marker:{enabled:true,
radius:1},
lineWidth:1,
connectNulls:0,
shadow:false,
fillOpacity:0.3,
zIndex:1},
column:{pointPlacement:"on",
marker:{enabled:true},
borderWidth:1,
shadow:false,
fillOpacity:0.3,
zIndex:0}},
series:[{data:[{x:1364983200000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364992200000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364995800000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365003000000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365004800000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365005700000,
y:1,
localTmin:1364947200000,
localTmax:1365033600000,
DayTimestamp:1364947200000}],
xAxis:0,
yAxis:1,
index:0,
name:"Anomalies",
type:"column",
color:"rgba(193,50,50,0.7)",
zIndex:0,
stacking:"normal",
legend:null,
borderWidth:1,
fillOpacity:0.3,
borderColor:"rgba(216,28,28,0.5)",
pointPadding:0,
groupPadding:null,
dataLabels:[],
tooltip:null,
marker:{enabled:false},
showInLegend:true,
point:{events:{click:function(event){ NewOpenDetail(event) }}},
turboThreshold:1500},
{data:[{x:1364947200000,
y:3063,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364948100000,
y:2156.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364949000000,
y:1546.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364949900000,
y:1937.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364950800000,
y:1593.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364951700000,
y:2078,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364952600000,
y:1906,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364953500000,
y:1703,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364954400000,
y:1891,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364955300000,
y:1711,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364956200000,
y:2109,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364957100000,
y:2008,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364958000000,
y:1781.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364958900000,
y:2000,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364959800000,
y:1672,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364960700000,
y:2000,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364961600000,
y:1531,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364962500000,
y:1485,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364963400000,
y:3367,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364964300000,
y:1687.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364965200000,
y:1929.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364966100000,
y:2015.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364967000000,
y:1640.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364967900000,
y:2500,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364968800000,
y:1765.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364969700000,
y:1789,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364970600000,
y:2383,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364971500000,
y:3359.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364972400000,
y:1742.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364973300000,
y:1844,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364974200000,
y:4101.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364975100000,
y:2062.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364976000000,
y:1719,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364976900000,
y:2008,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364977800000,
y:1476.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364978700000,
y:1570,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364979600000,
y:1726,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364980500000,
y:3477,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364981400000,
y:10735,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364982300000,
y:1609,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364983200000,
y:3531,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364984100000,
y:2859.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364985000000,
y:1547,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364985900000,
y:1766,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364986800000,
y:2445.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364987700000,
y:1406,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364988600000,
y:2922,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364989500000,
y:2696,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364990400000,
y:1414,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364991300000,
y:5109.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364992200000,
y:4797,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364993100000,
y:7491.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364994000000,
y:1719,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364994900000,
y:3883,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364995800000,
y:1469,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364996700000,
y:1484.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364997600000,
y:1523.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364998500000,
y:1633,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364999400000,
y:2374.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365000300000,
y:2047,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365001200000,
y:2508,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365002100000,
y:5343.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365003000000,
y:2000,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365003900000,
y:2133,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365004800000,
y:1688,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365005700000,
y:2047,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365006600000,
y:2851.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365007500000,
y:1906,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365008400000,
y:1750,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365009300000,
y:2758,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365010200000,
y:2336.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365011100000,
y:1586,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365012000000,
y:1750,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365012900000,
y:2031,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365013800000,
y:1820.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365014700000,
y:1460.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365015600000,
y:1601.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365016500000,
y:2054.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365017400000,
y:1562,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365018300000,
y:1929.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365019200000,
y:1859.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365020100000,
y:1976.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365021000000,
y:2062.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365021900000,
y:1555,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365022800000,
y:2562.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365023700000,
y:2484.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365024600000,
y:6023.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365025500000,
y:14460.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365026400000,
y:3257.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365027300000,
y:4679.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365028200000,
y:1672,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365029100000,
y:2093.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365030000000,
y:2078.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365030900000,
y:2062.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365031800000,
y:1679.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365032700000,
y:2062.5,
localTmin:1364947200000,
localTmax:1365033600000,
DayTimestamp:1364947200000}],
xAxis:0,
yAxis:0,
index:0,
name:"2 - Contacts",
type:"area",
color:"#0700A5",
zIndex:1,
stacking:"normal",
legend:null,
borderWidth:null,
fillOpacity:0.3,
borderColor:null,
pointPadding:null,
groupPadding:null,
dataLabels:[],
tooltip:{useHTML:true,
valueSuffix:" ms",
pointFormat:"<div class='cartouche'><div style='background-color:{series.color};height:10px;width:10px;float:left;'></div><span>{series.name}: <b>{point.y}</span></div>"},
marker:{enabled:false},
showInLegend:true,
point:{events:{click:function(event){ NewOpenDetail(event) }}},
turboThreshold:1500},
{data:[{x:1364947200000,
y:11132.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364948100000,
y:8664.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364949000000,
y:8656,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364949900000,
y:8242.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364950800000,
y:7874.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364951700000,
y:8562.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364952600000,
y:9648.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364953500000,
y:8563,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364954400000,
y:9531,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364955300000,
y:7843.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364956200000,
y:7578,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364957100000,
y:8219,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364958000000,
y:7398.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364958900000,
y:10328,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364959800000,
y:7961.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364960700000,
y:8953,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364961600000,
y:7688,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364962500000,
y:8609.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364963400000,
y:7874.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364964300000,
y:7992,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364965200000,
y:8171.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364966100000,
y:8835.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364967000000,
y:8180,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364967900000,
y:7719,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364968800000,
y:8641,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364969700000,
y:9468.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364970600000,
y:7460.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364971500000,
y:10578,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364972400000,
y:7523.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364973300000,
y:7391,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364974200000,
y:11734,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364975100000,
y:7547,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364976000000,
y:8187.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364976900000,
y:8390.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364977800000,
y:7679.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364978700000,
y:8602,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364979600000,
y:6734.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364980500000,
y:8945,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364981400000,
y:11860,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364982300000,
y:8406,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364983200000,
y:14031,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364984100000,
y:12039,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364985000000,
y:9078,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364985900000,
y:6516,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364986800000,
y:8109,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364987700000,
y:7516,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364988600000,
y:13992,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364989500000,
y:12617.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364990400000,
y:7804.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364991300000,
y:8453,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364992200000,
y:11101.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364993100000,
y:6414,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364994000000,
y:7195.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364994900000,
y:7679.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364995800000,
y:9453,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364996700000,
y:8922,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364997600000,
y:10000,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364998500000,
y:11226.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1364999400000,
y:8171.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365000300000,
y:13250,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365001200000,
y:7929.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365002100000,
y:10125,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365003000000,
y:9156,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365003900000,
y:8445.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365004800000,
y:14421,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365005700000,
y:6656,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365006600000,
y:8507.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365007500000,
y:10843.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365008400000,
y:9211,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365009300000,
y:9320,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365010200000,
y:8656.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365011100000,
y:6570.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365012000000,
y:7601.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365012900000,
y:9609.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365013800000,
y:7625,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365014700000,
y:7601.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365015600000,
y:6453,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365016500000,
y:9328.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365017400000,
y:8313,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365018300000,
y:6367,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365019200000,
y:8156,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365020100000,
y:9492.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365021000000,
y:7195,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365021900000,
y:7203,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365022800000,
y:7719,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365023700000,
y:8828.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365024600000,
y:7164,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365025500000,
y:6656.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365026400000,
y:8242,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365027300000,
y:7344,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365028200000,
y:7359,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365029100000,
y:8507.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365030000000,
y:9132.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365030900000,
y:8281.5,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365031800000,
y:8016,
localTmin:1364947200000,
localTmax:1365033600000,
},
{x:1365032700000,
y:8367,
localTmin:1364947200000,
localTmax:1365033600000,
DayTimestamp:1364947200000}],
xAxis:0,
yAxis:0,
index:0,
name:"1 - http:\/\/www.groupe.caisse-epargne.fr\/",
type:"area",
color:"#564EFF",
zIndex:1,
stacking:"normal",
legend:null,
borderWidth:null,
fillOpacity:0.3,
borderColor:null,
pointPadding:null,
groupPadding:null,
dataLabels:[],
tooltip:{useHTML:true,
valueSuffix:" ms",
pointFormat:"<div class='cartouche'><div style='background-color:{series.color};height:10px;width:10px;float:left;'></div><span>{series.name}: <b>{point.y}</span></div>"},
marker:{enabled:false},
showInLegend:true,
point:{events:{click:function(event){ NewOpenDetail(event) }}},
turboThreshold:1500}],
colors:["#FFC000",
"#FF8300",
"#4B41FF",
"#8DC6FF",
"#AB0000",
"#615EB0",
"#FCE151",
"#FFBA00",
"#FF9724",
"#E39810",
"#DF5300",
"#F10000",
"#94211A",
"#4A411B",
"#015F1B",
"#298A2F",
"#869420",
"#83803B",
"#806460",
"#782FA7",
"#7309DB",
"#5900B0",
"#FFC000",
"#FF8300",
"#4B41FF",
"#8DC6FF",
"#AB0000",
"#615EB0",
"#FCE151",
"#FFBA00",
"#FF9724",
"#E39810",
"#DF5300",
"#F10000",
"#94211A",
"#4A411B",
"#015F1B",
"#298A2F",
"#869420",
"#83803B",
"#806460",
"#782FA7",
"#7309DB",
"#5900B0"]}
chart = new Highcharts.Chart(char_option);
}) 
```

小提琴[**`here`**](http://jsfiddle.net/3fd6L/)

# php - Ext.require php文件

> ID：16033250
> 
> 赞同：2
> 
> 时间：2013-04-16T09:22:43.490
> 
> 标签：php, extjs

我有一个生成 js 的 php 文件。当我尝试：

```
ext.require('path/file.php'); 
```

我得到错误：

```
Error: [Ext.Loader] Failed loading synchronously via XHR: 'path/file/php.js'; please verify that the file exists. XHR status code: 404 
```

问题是我有 file.php 和 ext 试图获取 file/php.js

我怎样才能让它尝试获取正确的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:51:32.690

你可以：

1.  在 Ext.Loader 配置中为您的文件别名设置路径：

    ```
    Ext.Loader.setPath({
        'someAlias': 'path/file.php'
    });
    Ext.require('someAlias'); 
    ```

2.  使用[Ext.Loader.loadScript()](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.Loader-method-loadScript)：

    ```
    Ext.Loader.loadScript({
        url: 'path/file.php'
    }); 
    ```

# javascript - TypeError：无法读取 null 的属性“控制台”

> ID：16033252
> 
> 赞同：9
> 
> 时间：2013-04-16T09:22:49.740
> 
> 标签：javascript

这是从第三方库中提取的有罪片段：

```
function hasConsoleLogger() {
    return window.console && window.console.log;
} 
```

没有什么花哨的，但它令人惊讶地返回： `TypeError: Cannot read property 'console' of null`

它在浏览器上下文 (Chrome) 中执行，因此不涉及 Node.js 非窗口内容。

我已经检查了潜在的恶意`delete window`或`window = null`没有成功。

发生此错误的应用程序使用友好 iFrame 和 document.write() 调用运行。

不幸的是，我无法提供该问题的任何演示链接。

所以我想我的问题是**“如何在浏览器中错误地使窗口对象无效或无法访问？”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:28:51.803

当窗口关闭时，Chrome 首先设置`window.console`为`null`，然后设置为`window`。

`window`通过创建一个从不同上下文引用的函数，以下代码将可靠地重现错误：

```
var w = window.open('/');
// Using document.write to run code in the context of the other window
w.document.write('<script>opener.func = function(){return window;};</script>');
w.close();
// Naive timer to wait for Garbage collection
setTimeout(function() {
    console.log(func() === null); // true
}, 100); 
```

# java - 使用 LLRP 连接到 RFID

> ID：16033256
> 
> 赞同：0
> 
> 时间：2013-04-16T09:23:03.110
> 
> 标签：java, socket.io, rfid

我有一个 UHF 无源 RFID 阅读器，阅读器带有 C# SDK.dll，它符合国际 ISO 18000\EPC G2 标准。

问题是当我尝试使用提供的 SDK 作为 TCP 客户端连接到阅读器时，我能够连接到阅读器，但是当我通过 LLRP 接口连接到阅读器时，我无法连接

我正在开发 java RFID 应用程序。但解决方案也可以来自其他语言。

下面是更多细节的代码

```
import org.llrp.ltk.net.LLRPConnection;
import org.llrp.ltk.net.LLRPConnectionAttemptFailedException;
import org.llrp.ltk.net.LLRPConnector;
import org.llrp.ltk.net.LLRPEndpoint;
import org.llrp.ltk.types.LLRPMessage;

public class LLRPEndPoint implements LLRPEndpoint {

        public static void main(String[] args) {
            LLRPEndPoint endpoint = new LLRPEndPoint();
        }

        public LLRPEndPoint() {
            LLRPConnection connection = new LLRPConnector(this, "192.168.0.100",5000);
            try {
                ((LLRPConnector) connection).connect();
            } catch (LLRPConnectionAttemptFailedException e1) {
                e1.printStackTrace();
                System.exit(1);
            }
        }
         @Override
        public void errorOccured(String message) {
             System.out.println(message);
        }
        @Override
        public void messageReceived(LLRPMessage message) {
            System.out.println(message.getResponseType());
        }
} 
```

当我运行这个程序时，我得到**LLRPConnectionAttemptFailedException**。我在端口 5000 上的 IP 192.186.0.100 上运行阅读器。我使用 SDK 提供的阅读器验证了这一点

简而言之，我只是想要一种与 LLRP 阅读器一起工作的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-12T06:58:36.703

先说第一件事。
**您的 RFID 阅读器是否支持 LLRP？**

*   ***如果没有***，那么您的程序就处于死胡同，没有更多的可能性要求供应商支持您。
*   ***如果是***，那么您需要使用 LLRP Client 而不是 LLRP Endpoint 连接 RFID 阅读器。
*   LLRP 的默认端口号是**5084(non-secured)**、**5085(secured over TLS)**。
*   **在 LLRP 客户端模式下**，您只需要提供阅读器的**IP 地址**和阅读器的**端口号**。
*   **在 LLRP 端点模式下**，您只需要在任何您想监听的地方提供**系统 IP 地址**和**系统端口号。**
*   两种通信方式不同。LLRP 客户端是像您的程序一样启动的应用程序。LLRP Endpoint 是阅读器启动的，就像您的阅读器将启动连接一样。两者都将在 TCP 层上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:31:59.460

也许您可以在这里尝试代码示例：[http ://learn.impinj.com/articles/en_US/RFID/Creating-RFID-Applications-with-Java/](http://learn.impinj.com/articles/en_US/RFID/Creating-RFID-Applications-with-Java/)

这篇文章将向您展示如何创建一个读取标签的 Java LTK“Hello World”应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T14:33:57.647

Java LTK 是一个开源软件项目，可以在支持 LLRP 的阅读器上开发 RFID 应用程序。尽管 Java LTK 不是 Impinj 软件产品，但它与 Speedway Revolution 阅读器配合得非常好。这篇文章将向您展示如何创建一个读取标签的 Java LTK“Hello World”应用程序：

[https://support.impinj.com/hc/communities/public/questions/201883748-How-do-I-create-RFID-applications-with-Java-](https://support.impinj.com/hc/communities/public/questions/201883748-How-do-I-create-RFID-applications-with-Java-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T17:09:51.087

问题是阅读器 RFID 默认停止了服务 llrp

您需要激活服务 llrp。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-05T13:30:39.927

您应该在设备上运行 LLRP 服务器。设备可能有网页界面，您可以通过网页界面查看 LLRP 服务器的状态。

LLRP 的默认端口号是 5084。

# batch-file - 检查多个 Windows 服务器上的远程文件是否存在

> ID：16033257
> 
> 赞同：1
> 
> 时间：2013-04-16T09:23:03.267
> 
> 标签：batch-file, windows-authentication, unc, windows-scripting

我需要检查多个远程 Windows 服务器（在 LAN 中）上的文件状态（现有？或上次修改日期）。这些文件可通过 UNC 路径访问。远程 PC 需要用户名和密码。最好是某种脚本。

我不是系统管理员，但我的老板要求我这样做，因为这些 PC 都是 SQL Server 的主机，并且文件是数据库的备份。我是一名 SQL Server 数据库开发人员。我试图用 T-SQL 来做，但发现它不适合做这个（尽管可能是可行的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:55:44.287

创建一个批处理文件，例如（比如说`check.bat`）：

```
@echo off

set list=server1 server2 server3 server4 serverN

for %%s in (%list%) do (
    echo Logging in to %%s
    net use \\%%s\shared /user:mydomain\myuser password    

    echo Checking file existence on %%s
    if exist \\%%s\shared\file.txt (
        echo File exist on %%s
    ) else (
        echo File does NOT exist on %%s
    )

    echo Logging out
    net use \\%%s\shared /delete
) 
```

有关`net use`命令的详细信息，请参阅问题[Mapping a network drive without hardcoding a drive letter in a batch file](https://stackoverflow.com/q/3716422/850848)的公认答案。

# jmeter - 如何从 Jmeter 负载测试结果中分析和发现性能问题？

> ID：16033263
> 
> 赞同：0
> 
> 时间：2013-04-16T09:23:37.403
> 
> 标签：jmeter

我已经使用 Jmeter 为简单的登录场景对 100 个并发用户进行了负载测试。但我无法从负载测试结果中说出问题所在。为了从结果中找出性能问题，我考虑了哪些参数？

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T16:53:10.637

为了找到由 Jmeter 测试触发的性能瓶颈，您确实需要监控目标主机本身，查看 CPU 使用情况、内存使用情况、堆空间使用情况等。此外，您需要评估特定主机的行为Jmeter 请求调用的服务。

换句话说，Jmeter 可以帮助您创建一个负载/性能/压力测试场景，该场景将在您的应用程序中遇到性能瓶颈，但是对这些瓶颈来源的分析实际上最好作为单独的系统和应用程序监控活动来处理，而Jmeter 测试正在运行。

# c++ - Intel AVX：为什么双精度浮点变量没有 256 位版本的点积？

> ID：16033266
> 
> 赞同：6
> 
> 时间：2013-04-16T09:23:48.027
> 
> 标签：c++, performance, simd, avx

在[关于 SO 的另一个问题中，](https://stackoverflow.com/questions/10454150/intel-avx-256-bits-version-of-dot-product-for-double-precision-floating-point)我们尝试（并成功）找到了一种替换 AVX 缺失指令的方法：

```
 __m256d _mm256_dp_pd(__m256d m1, __m256d m2, const int mask); 
```

任何人都知道这条指令丢失的原因吗？部分答案[在这里](http://www.amdzone.com/phpbb3/viewtopic.php?f=532&t=139130)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T10:35:46.130

这个和其他各种 AVX 限制的根本原因是架构上 AVX 只是并排的两个 SSE 执行单元 - 您会注意到几乎没有 AVX 指令在向量的两个 128 位半之间的边界上水平运行（这在 ) 的情况下特别烦人`vpalignr`。通常，您实际上只需并行执行两个 128 位 SSE 操作，这对于大多数仅以元素方式操作的指令很有用，但不如正确的 256 位 SIMD 实现有用。

# drupal - Drupal 7 在我的网站上任何我想要的地方添加图像

> ID：16033267
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:23:52.720
> 
> 标签：drupal

我想在我的 Drupal 7 网站上的特定位置添加 3 个国家标志。单击 iamge 时，它​​应该打开一个链接。不能使用块，因为我的主题没有我需要放置这些图像的区域。我的问题是 1\. 使用什么代码？2.我应该将该代码放在哪个文件中？page.tpl.php ？样式.css ?

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:43:03.340

很多种方法。正如 pamatt 所说，您可以将实际内容放入您的 page.tpl.php 中，但它会出现在所有页面上。在这种情况下添加一个类甚至一个 ID，然后如果您需要使用 css 在其他页面上隐藏这些图像，您可以隐藏这些图像。

检查 Firebug 中的代码，检查 body 标签，然后将其中一个添加到您可能想要隐藏图像的任何页面。

喜欢：

```
body.section-about .myThreeImages {display:none;} 
```

例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:17:38.247

您可以创建自己的区域并为其分配块。有关指南，您可以阅读[http://drupal.org/node/171205](http://drupal.org/node/171205)和[http://drupal.org/node/171224](http://drupal.org/node/171224)。

# three.js - geometry.materials[0][0].shading: 三个 JS 属性 0 未定义

> ID：16033268
> 
> 赞同：0
> 
> 时间：2013-04-16T09:23:55.617
> 
> 标签：three.js, undefined

我想在三个 JS 中为我​​的 3D 模型添加一些阴影。

我正在使用这段代码：

```
var loader = new THREE.JSONLoader();
          loader.load("peer.js", createScene);

          function createScene( geometry ) {
            geometry.materials[0][0].shading = THREE.FlatShading;
            geometry.materials[0][0].morphTargets = true;

            var material = new THREE.MeshFaceMaterial();
            //var material =  new THREE.MeshLambertMaterial({color: 0|(0xffffff*Math.random())})                
            var cube = new THREE.Mesh( geometry, material );
            cube.scale.set(50, 50, 50);
            cube.position.z = -50;
            m.model.matrixAutoUpdate = false;
            m.model.add(cube);
            scene.add(m.model);
        } 
```

我收到错误消息“无法读取未定义的属性 0”。它与这条线有关：geometry.materials[0][0].shading = THREE.FlatShading; 而且我认为 [0][0] 必须在其他方面进行更改，只是我不知道是什么，因为我不知道 [0][0] 代表什么。有人知道如何解决这个问题吗？

# jquery - jQuery $.each 真的很慢

> ID：16033271
> 
> 赞同：1
> 
> 时间：2013-04-16T09:24:04.560
> 
> 标签：jquery, ajax, internet-explorer

我正在尝试使用 and 构建一个动态组合框`$.each`，`$('<OPTION>')`但是在 IE 上真的很慢（在服务器响应后需要 3/4 分钟来呈现数据）在 firefox 和其他浏览器上很好。

这是我构建组合的代码

```
var sel = ('#myDynCmb');
$.each(dataCollection, function(key,_value) {
    sel.append($("<OPTION>").val(key).text(_value));
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:43:09.437

dom 操作通常很慢，特别是当您附加到 dom 时。

一个好的做法是将所有的 html 放入一个 var 并将这个 var 的内容附加到 dom 中，这会导致一个 dom 操作，这要快得多

```
var htmlToAppend = "<select>";
$.each(dataCollection, function(key,_value) {
    select += "<option value="+key+">"+_value+"</option>";
});
htmlToAppend += "</select>";
$('#myDynCmb').empty().append(htmlToAppend); 
```

类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:34:34.710

这可能是 IE 上的渲染问题（通常在 DOM 操作上很慢）。

你可以尝试这样的事情：

```
var dummyList = $("<select />");
$.each(dataCollection, function(key,_value) {
    dummyList.append($("<option />").val(key).text(_value));
});
$('#myDynCmb').empty().append(dummyList.find('option')); 
```

因此，您将选项加载到虚拟列表中（不在 DOM 中），然后将所有元素添加到列表中（在 DOM 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:38:57.957

尝试所有解决方案，但它仍然慢得令人尴尬，所以我必须将其切换到经典 javascript，新选项，它现在超级快

# mysql - MySQL删除具有某个变量的所有行

> ID：16033274
> 
> 赞同：1
> 
> 时间：2013-04-16T09:24:14.187
> 
> 标签：mysql

所以我运行一个产品，但帐户过期并用完数据库空间。我将如何删除所有“付费”值设置为 0 的帐户？（帐户到期时，该值设置为 0）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:25:00.360

`delete from table where paid=0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:25:29.397

像这样的东西？

```
DELETE FROM table WHERE paid=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:35:57.687

如果**付费栏**有一个`NULL`值怎么办，我想你想把它读为**0**

因此`Query`

```
DELETE FROM table 
WHERE COALESCE(paid,0)=0 
```

**[使用 NULL 工作](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)**

# c# - 尝试使用 webgrid 对控制器进行单元测试时，HttpContext 为空

> ID：16033276
> 
> 赞同：2
> 
> 时间：2013-04-16T09:24:18.563
> 
> 标签：c#, asp.net-mvc-3, unit-testing

我正在尝试使用 webgrid 对控制器进行单元测试

```
var grid = new WebGrid(ajaxUpdateContainerId: "container-grid",ajaxUpdateCallback: "setArrows",  canSort: true); 
```

我总是收到这个错误

```
System.ArgumentNullException: Value cannot be null.
Parameter name: httpContext 
```

这是我的测试方法

```
 var mockContext = CreateMockContext();
    UserController target = new UserController();
    target.ControllerContext = new ControllerContext();
    target.ControllerContext.HttpContext = mockContext.Http.Object;
    Nullable<int> page = new Nullable<int>();
    string sort = "CreatedDate";
    string sortdir = "ASC";
    ActionResult actual;
    actual = target.Payments(page, sort, sortdir);
    Assert.IsNotNull(actual); 
```

这是我的 CreateMockContext 方法

```
public UnitTestBase CreateMockContext()
        {
            this.RoutingRequestContext = new Mock<RequestContext>(MockBehavior.Loose);
            this.ActionExecuting = new Mock<ActionExecutingContext>(MockBehavior.Loose);
            this.Http = new Mock<HttpContextBase>(MockBehavior.Loose);
            this.Server = new Mock<HttpServerUtilityBase>(MockBehavior.Loose);
            this.Response = new Mock<HttpResponseBase>(MockBehavior.Loose);
            this.Request = new Mock<HttpRequestBase>(MockBehavior.Loose);
            this.Session = new Mock<HttpSessionStateBase>(MockBehavior.Loose);
            this.Cookies = new HttpCookieCollection();

            this.RoutingRequestContext.SetupGet(c => c.HttpContext).Returns(this.Http.Object);
            this.ActionExecuting.SetupGet(c => c.HttpContext).Returns(this.Http.Object);
            this.Http.SetupGet(c => c.Request).Returns(this.Request.Object);
            this.Http.SetupGet(c => c.Response).Returns(this.Response.Object);
            this.Http.SetupGet(c => c.Server).Returns(this.Server.Object);
            this.Http.SetupGet(c => c.Session).Returns(this.Session.Object);
            this.Http.SetupGet(p => p.User.Identity.Name).Returns("admin");
            this.Http.SetupGet(p => p.Request.IsAuthenticated).Returns(true);
            this.Request.Setup(c => c.Cookies).Returns(Cookies);
            return this;
        } 
```

我可以很好地测试其他控制器。只有带有 webgrid 的控制器会失败。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:49:39.983

您`WebGrid`在控制器中实例化是否有原因？似乎基于[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)，您可以将`WebGrid`实例化移动到控制器的视图中，并从其逻辑中删除该依赖项。这肯定会使编写单元测试更加容易。

# java - 使用java和opencv进行图像处理

> ID：16033279
> 
> 赞同：0
> 
> 时间：2013-04-16T09:24:24.183
> 
> 标签：java, image, opencv, image-processing

我必须使用 java 和 opencv 库做一个图像处理项目。我会知道在哪里可以找到有用的信息，因为我发现的最多的是将 opencv 与 C 一起使用，而不是与 java 一起使用。我还想知道将缓冲图像转换为另一种图像的最佳图像格式是什么。

好吧，在我的项目中，我需要拍摄快照并从白板上识别一些磁铁，然后获取它们的位置并将它们保存在一个数组中。问题是我已经开始了该项目，但它不起作用，因为我拍摄的图像是缓冲图像，并且必须将其转换为另一种格式。我读过 bufferedimage 是访问像素信息的最佳选择，但它的工作速度很慢。我想将这种格式（缓冲图像）转换成另一种格式，我发现的其他可能是 cvMat 和 IplImage。还有其他适合使用的格式吗？或者如果不是，什么是更好的 cvMat 或 IplImage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:24:49.320

您可以[从设置环境](https://stackoverflow.com/a/13139808/176769)开始构建 Java/OpenCV 应用程序。我刚刚分享的参考使用了 JavaCV，它是 OpenCV API 的第 3 方 Java 包装器。

[将](https://stackoverflow.com/questions/8368078/java-bufferedimage-to-iplimage) [BufferedImage 转换为 IplImage](https://stackoverflow.com/a/8906931/176769)或[Mat](https://stackoverflow.com/a/15095653/176769)很容易。

可以使用[边界框](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/)来隔离对象。[OpenCV 有一个](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/bounding_rects_circles/bounding_rects_circles.html)使用`Mat`.

如果您需要访问像素，`IplImage`可以查看[此线程](https://stackoverflow.com/a/15721754/176769)。

# iphone - 在 iphone 应用程序中只填充一次数组

> ID：16033289
> 
> 赞同：0
> 
> 时间：2013-04-16T09:24:51.737
> 
> 标签：iphone, ipad, nsmutablearray

我在视图中填充数组确实加载方法，但问题是每次加载视图时它都会一次又一次地添加相同的内容，如果第一次加载视图，那么它应该在数组中添加内容而不是第二次重复。这是我的代码：

```
 for (int i=0;i<5;i++) {

            Coffee*obj=[appDelegate.coffeeArray objectAtIndex:i];

            NSLog(@"This is working %d",i);

            [appDelegate.arrayOne addObject:obj];   
    }

    for (int a=5;a<8;a++) {

        Coffee*obj=[appDelegate.coffeeArray objectAtIndex:a];

        [appDelegate.arrayTwo addObject:obj];   
    } 
```

我正在从另一个数组填充两个数组，但是如果我们从一个视图移动到另一个视图并再次返回，它会重复值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:27:54.180

首先检查它是否有任何值，然后从数组中删除所有数据，如下所示..

```
 if ([appDelegate.arrayOne count]>0) {
         [appDelegate.arrayOne removeAllObjects];
   }

   if ([appDelegate.arrayTwo count]>0) {
         [appDelegate.arrayTwo removeAllObjects];
   }

   for (int i=0;i<5;i++) {

            Coffee*obj=[appDelegate.coffeeArray objectAtIndex:i];

            NSLog(@"This is working %d",i);

            [appDelegate.arrayOne addObject:obj];   
    }

    for (int a=5;a<8;a++) {

        Coffee*obj=[appDelegate.coffeeArray objectAtIndex:a];

        [appDelegate.arrayTwo addObject:obj];   
    } 
```

并在该数组中添加..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T09:28:01.203

假设您在向 Array 添加对象之前使用可用于 Array的`NSMutableArray`use方法。[结帐文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)`removeAllObjects`

# c# - 从列表框控件构建 SQL IN 语句

> ID：16033291
> 
> 赞同：0
> 
> 时间：2013-04-16T09:24:57.917
> 
> 标签：c#, asp.net, foreach, stringbuilder, sql-in

我正在尝试使用构建 SQL 查询`StringBuilder`，但我在尝试执行部分`WHERE`子句时陷入困境。

我有一个包含一堆值的列表框，并允许多项选择。我需要遍历选定的项目，然后放入`IN`类似...的语句中

```
WHERE SOME_FIELD IN ('Value','NextValue','AnotherValue') 
```

到目前为止，我已经编写了这样的代码......

```
if (lstSalesGroup.SelectedItem != null)
{
    selectQuery.Append("AND SALES_GROUP IN (");
    foreach (ListItem item in lstSalesGroup.Items)
    {
        if (item.Selected)
            selectQuery.Append("'" + item.Value + "',");
    }
    selectQuery.Append(")");
} 
```

我需要测试该项目是否是循环中的最后一个项目，以便它不会在关闭“）”之前放置“，”。

我怎样才能做到这一点？或者，如果有更好的方法来构建这部分查询，请提出建议，我还在学习，我们都必须从某个地方开始！:)

最终这将是一个零件搜索的查询。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:35:22.673

有几种方法可以做到这一点。

您可以使用[string.TrimEnd](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)从字符串中删除多余的逗号，也可以使用[string.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)创建一个新字符串，例如

```
string InPartQuery = string.Join(",", lstSalesGroup.Items
                                          .Cast<ListItem>()
                                          .Where(t => t.Selected)
                                          .Select(r => "'" + r.Value + "'")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:31:33.873

你可以用`String.Join`一些`Linq`

为了清楚起见，我将代码放在变量中。

```
if (lstSalesGroup.SelectedItem != null)
{
    var queryStr = "AND SALES_GROUP IN ({0})";
    var selectedItemValues = (from itm in lstSalesGroup.Items.Cast<ListItem>()
                              where itm.Selected
                              select String.Format("'{0}'", itm));
    selectQuery.Append(String.Format(queryStr, String.Join(",", selectedItemValues)));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:33:23.503

尝试使用 linq

```
selectQuery.Append("AND SALES_GROUP IN (");

selectQuery.Append(string.Join(",", lstSalesGroup.Items.Select(i => "'" + i.Value + "'")));    

selectQuery.Append(")"); 
```

这将解决您的问题，但是您在此处遇到了 SQL 注入问题。我强烈建议您在查询中使用参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:30:31.607

尝试这个：

```
if (lstSalesGroup.SelectedItem != null)
{
    selectQuery.Append("AND SALES_GROUP IN (");
    var local = lstSalesGroup.Items.Where(c => c.Selected)
                       .Select(c => "'"+c.Value+"'")
                       .Aggregate((c,n) => c+ ", "+n);

   selectQuery.Append(local);            
   selectQuery.Append(")");
} 
```

查看[此](http://code.msdn.microsoft.com/LINQ-Aggregate-Operators-c51b3869)示例以获取有关该`.Aggragate(...)`方法的更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-26T12:39:07.117

```
Dim s As String = "'"
    For i = 0 To ListBox1.Items.Count - 1
        s = s & ListBox1.Items.Item(i) & "','"
    Next 
```

# android - 适用于 Android 记事本的 Google Drive SDK 示例

> ID：16033299
> 
> 赞同：2
> 
> 时间：2013-04-16T09:25:12.657
> 
> 标签：android, google-drive-api, google-play-services

有没有人设法让 Android 的 Google Drive Notepad 示例工作？我按照 Google 开发人员页面中的说明进行操作，但无法收到启动 Google Play 服务对话框以进行授权的通知。

应用程序按预期启动，方法何时启动

```
credential.getToken(); 
```

被调用，`UserRecoverableAuthException`引发异常。我希望会显示一个授权对话框，但没有任何反应。我从状态栏中拉下通知列表，点击此应用程序创建的通知，再次没有任何反应。

当我点击“最近使用的应用程序”按钮时，我可以在列表中看到“Google Play 服务”，但它的内容为空（空白和黑色）。点击它什么也没做，除了我被带回我的主屏幕。

对此有任何想法吗？

我尝试了另一个示例应用程序“快速启动驱动器”，这个应用程序按预期工作。正如我所料，出现了一个授权对话框。

更多信息，目标设备是运行 OS 4.2.2 的 Nexus 7。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:29:32.027

要授权 Google Drive API，您必须捕获 UserRecoverableException 并触发意图以获得授权对话框。

```
 try{
         .... 

  } catch (UserRecoverableAuthIOException e) {
          Intent intent = e.getIntent();
         startActivityForResult(intent, REQUEST_AUTHORIZATION_FOLDER);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:54:56.910

Gabriele Mariotti，您的解决方案似乎更好，但在这种情况下无法使用。确实，该类不是一个活动，并且不能调用 startActivityForResult 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:59:42.977

我有同样的问题，我解决了：

```
credential.setSelectedAccountName(accountName);
AccountManager accountManager = (AccountManager) context.getSystemService(Context.ACCOUNT_SERVICE);
Account[] accounts = accountManager.getAccountsByType("com.google");
Account account = null;
for(Account a : accounts){
    if(a.name.equals(accountName)){
        account = a;
        break;
    }
}

if(account != null){
    String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";
    accountManager.getAuthToken(account, AUTH_TOKEN_TYPE, null, true, null, null);

    service = getDriveService(credential);
} 
```

# php - 关于 PHP 回声的 onblur 和 onfucus

> ID：16033301
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:25:14.177
> 
> 标签：php, html, onblur, onfocus

这是我的 PHP 代码的一部分，其中有一个回显，它将打印一些 HTML 代码，带有`onblur`and`onfocus`条件。此代码在其外部`echo`但不在其内部时有效。
我已经尝试`input`在我的代码（`Username`字段）中的第一个添加双引号，但它仍然不起作用......有什么
想法吗？！

```
elseif ($_GET['register'] == "true"){ echo "

    <div class='index_register'>
        Register to Play or <a href='login.php'>login</a>
        <p></p>
        <!-- Registration Form -->
        <form action='?do=register' method='post' autocomplete='off'>
            <input class=\"input_reg\" type=\"text\" name=\"username\" size=\"40\" maxlength=\"12\" value=\"Username\" onblur=\"if (this.value == \"\") {this.value = \"Username\";}\" onfocus=\"if (this.value == \"Username\") {this.value = \"\";}\">
            <input class='input_reg' type='text' name='email' size='40' maxlength='50' value='Email Address' onblur='if (this.value == '') {this.value = 'Email Address';}' onfocus='if (this.value == 'Email Address') {this.value = '';}'>
            <input class='input_reg' type='password' name='password' size='40' maxlength='12' value='Password' onblur='if (this.value == '') {this.value = 'Password';}' onfocus='if (this.value == 'Password') {this.value = '';}'>
            <input class='submit' type='submit' value='Register' name='Register'>
        </form>
    </div>

"; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:28:55.663

> 此代码在 echo 之外但不在其内部时有效。

然后不要使用回声

```
elseif ($_GET['register'] == "true"){ 
?>
    <div class='index_register'>
        Register to Play or <a href='login.php'>login</a>
        <p></p>
        <!-- Registration Form -->
        <form action='?do=register' method='post' autocomplete='off'>
...
        </form>
    </div>
<?
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:27:09.933

这是你需要的。您需要**正确地** `escape quotes`在 onblur/onfocus 内部：

在 php 代码中试试这个：

`<input class=\"input_reg\" type=\"text\" name=\"username\" size=\"40\" maxlength=\"12\" value=\"Username\" onblur='if (this.value == \"\") {this.value = \"Username\";}' onfocus='if (this.value == \"Username\") {this.value = \"\";}'>`

.

`<input class='input_reg' type='text' name='email' size='40' maxlength='50' value='Email Address' onblur='if (this.value == \"\") {this.value = \"Email Address\";}' onfocus='if (this.value == \"Email Address\") {this.value = \"\";}'>`

.

`<input class='input_reg' type='password' name='password' size='40' maxlength='12' value='Password' onblur='if (this.value == \"\") {this.value = \"Password\";}' onfocus='if (this.value == \"Password\") {this.value = \"\";}'>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:56:43.860

在您的情况[`heredoc`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)或[`nowdoc`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)语法是首选时，当您输出大块时：

```
<?php
echo <<<HTM
    <div class='index_register'>
        Register to Play or <a href='login.php'>login</a>
        <p></p>
        <!-- Registration Form -->
        <form action='?do=register' method='post' autocomplete='off'>
            <input class='input_reg' type='text' name='username' size='40' maxlength='12' value='Username' onblur='if (this.value == "") {this.value = "Username";}' onfocus='if (this.value == "Username") {this.value = "";}'>
            <input class='input_reg' type='text' name='email' size='40' maxlength='50' value='Email Address' onblur='if (this.value == "") {this.value = "Email Address";}' onfocus='if (this.value == "Email Address") {this.value = "";}'>
            <input class='input_reg' type='password' name='password' size='40' maxlength='12' value='Password' onblur='if (this.value == "") {this.value = "Password";}' onfocus='if (this.value == "Password") {this.value = "";}'>
            <input class='submit' type='submit' value='Register' name='Register'>
        </form>
    </div>
HTM;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T21:17:01.087

如果您使用 Heredoc 系统，则不必转义引号。我使用了嵌入了 JavaScript 的 Heredoc，就好像我使用的是纯 HTML 一样，并且一切正常。

# css - Bootstrap Typeahead 结果转变

> ID：16033302
> 
> 赞同：0
> 
> 时间：2013-04-16T09:25:14.653
> 
> 标签：css, twitter-bootstrap, typeahead.js

我不太确定如何解决这个问题，因为我不希望它在输入字母时发生变化。 [http://ch1n3s3.ch.funpic.de/try.php](http://ch1n3s3.ch.funpic.de/try.php) 在那里你可以看到我的问题演示。只需输入 A、B 或 C。

您有任何可能的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:31:21.887

一旦显示 li 元素，搜索的宽度就会增加，将搜索推向左侧。添加这个 css，它为搜索指定一个固定的宽度。

```
.form-search{
   width: 195px;
} 
```

# objective-c - cellForRowAtIndexPath 没有调用。数组计数返回的次数，为什么？

> ID：16033309
> 
> 赞同：0
> 
> 时间：2013-04-16T09:25:26.897
> 
> 标签：objective-c, uitableview, nsarray

我面临新问题。在我的应用程序中，我使用 NSXmlParser 获取数据。

解析数据后，我手动创建 UITableview。

这是我的代码，

```
 -(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
parser = [[NSXMLParser alloc]initWithData:self.cData];
parser.delegate = self ;
[parser parse];
tableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 20, 320, 460) style:UITableViewStylePlain];
tableView.dataSource = self;
tableView.delegate = self;

[self.view addSubview:tableView];
} 
```

这是我的代表方法

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {
    return 1;
  }
  -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
    return eventName.count;
  }
   -(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
  {

  }
   -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
      {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
     cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];

     }

    for (int i=0; i < eventName.count; i++)
   {
       cell.textLabel.text = [eventName objectAtIndex:i];
       NSLog(@"%@",cell.textLabel.text);
    }
   return cell;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:35:44.697

而不是签`i`入`for loop`，删除`for loop`并寻找`indexPath.row`in-

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    ...
    cell.textLabel.text = [eventName objectAtIndex:indexPath.row];
    ...
} 
```

它将被调用的次数与返回的值一样多 -

`-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{}`

# git - Git - PC 上的 GitHub 帐户和 Atlassian Stash 帐户

> ID：16033310
> 
> 赞同：0
> 
> 时间：2013-04-16T09:25:28.023
> 
> 标签：git, github, bitbucket-server

这里和网上有很多关于多个“GitHub”帐户的问题......

但是我有一个问题，我需要使用两个 Git 解决方案；

*   我需要在 GitHub 帐户上工作，已经设置和工作。
*   我们正在迁移到另一个 Git 提供商 Atlassian Stash，所以目前我需要同时处理这两个问题。

原谅我作为 WebDev 的无知，我尽量远离系统设置和命令提示符。

但据我了解，“Git”而不是“GitHub”是使用全局凭据和配置在本地管理的。

所以运行这些命令会让我离开 GitHub；git config --global user.name "Will Hancock" git config --global user.email "will.hancock@webtekkers.com"

这是一个想法......如果我在两者上使用相同的电子邮件和相同的密码，那会起作用吗？！？就像一个 Git 凭证一样，那么 repo 是基于每个 repo 配置的吗？

我理解正确吗？！？

我不愿意“乱七八糟”并玩一玩，因为这些不是我的回购，我今天需要能够工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T13:22:15.833

听起来您想更改 git 存储库远程连接。在 github 上克隆到本地计算机时，本地 git-repo 中的远程连接是“源”远程。您需要将其指向 Stash 而不是 GitHub。除此之外，你应该没问题。

`git remote set-url origin "git://your.stash.repo.domain/yourproject.git"`

git 远程帮助：http: [//gitref.org/remotes/#remote](http://gitref.org/remotes/#remote)

# java - 使用 apache POI 读取 excel 2003 文件 - FileNotFound

> ID：16033312
> 
> 赞同：1
> 
> 时间：2013-04-16T09:25:29.490
> 
> 标签：java, apache-poi, xls

我正在编写一些代码来将 Excel 文件导入数据库。这些文件可能很大（数千行），所以我使用的是事件 API。POI 版本为 3.9

我正在打开这样的文件： FileInputStream fin = new FileInputStream(file);

```
//create record listener
HSSFRecordListener mainListener =  new HSSFRecordListener("aaa.xls");
// create a new org.apache.poi.poifs.filesystem.Filesystem
POIFSFileSystem poifs = new POIFSFileSystem(fin);
// get the Workbook (excel part) stream in a InputStream
din = poifs.createDocumentInputStream("Workbook"); 
```

有些文件在最后一行抛出 FileNotFoundException。事实上，如果我用 7zip 打开这些文件，就没有`Workbook`条目，而是有`Book`。

如果找不到，我试图通过打开`Book`条目来解决这个问题。`Workbook`

```
try {
    din = poifs.createDocumentInputStream("Workbook");
} catch (FileNotFoundException e) {
    try {
        din = poifs.createDocumentInputStream("Book");
    } catch (FileNotFoundException e1) {                    
        FileNotFoundException e2 = new FileNotFoundException("Neither Workbook nor Book found in file!");                    
        e2.initCause(e1);
        throw e2;
    }
} 
```

这导致另一个异常：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.apache.poi.hssf.record.RecordFormatException: Unable to construct record instance
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

org.apache.poi.hssf.record.RecordFormatException: Unable to construct record instance
    org.apache.poi.hssf.record.RecordFactory$ReflectionConstructorRecordCreator.create(RecordFactory.java:65)
    org.apache.poi.hssf.record.RecordFactory.createSingleRecord(RecordFactory.java:301)
    org.apache.poi.hssf.record.RecordFactoryInputStream$StreamEncryptionInfo.<init>(RecordFactoryInputStream.java:65)
    org.apache.poi.hssf.record.RecordFactoryInputStream.<init>(RecordFactoryInputStream.java:182)
    org.apache.poi.hssf.eventusermodel.HSSFEventFactory.genericProcessEvents(HSSFEventFactory.java:139)
    org.apache.poi.hssf.eventusermodel.HSSFEventFactory.processEvents(HSSFEventFactory.java:106)
    pl.veracomp.service.SpreadsheetImportService.process(SpreadsheetImportService.java:369)
    pl.veracomp.controller.uploadController.onSubmit(uploadController.java:57)
    org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
    org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

org.apache.poi.hssf.record.RecordFormatException: Not enough data (0) to read requested (2) bytes
    org.apache.poi.hssf.record.RecordInputStream.checkRecordPosition(RecordInputStream.java:216)
    org.apache.poi.hssf.record.RecordInputStream.readShort(RecordInputStream.java:233)
    org.apache.poi.hssf.record.InterfaceHdrRecord.<init>(InterfaceHdrRecord.java:43)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    org.apache.poi.hssf.record.RecordFactory$ReflectionConstructorRecordCreator.create(RecordFactory.java:57)
    org.apache.poi.hssf.record.RecordFactory.createSingleRecord(RecordFactory.java:301)
    org.apache.poi.hssf.record.RecordFactoryInputStream$StreamEncryptionInfo.<init>(RecordFactoryInputStream.java:65)
    org.apache.poi.hssf.record.RecordFactoryInputStream.<init>(RecordFactoryInputStream.java:182)
    org.apache.poi.hssf.eventusermodel.HSSFEventFactory.genericProcessEvents(HSSFEventFactory.java:139)
    org.apache.poi.hssf.eventusermodel.HSSFEventFactory.processEvents(HSSFEventFactory.java:106)
    pl.veracomp.service.SpreadsheetImportService.process(SpreadsheetImportService.java:369)
    pl.veracomp.controller.uploadController.onSubmit(uploadController.java:57)
    org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
    org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

谷歌有一些关于POI 3.2 和 3.7 中的已**修复**错误的信息，这些错误与异常有关`Not enough data (0) to read requested (2) bytes`，但似乎是另一回事。

相同的文件可以在 Excel 2007 中成功打开。当我使用 手动保存它们时`Save As=>Excel 97/2003`，7zip 显示`Book`条目已替换为`Workbook`，我可以使用 Apache POI 成功导入它们。

有没有人发现这个问题？如何解决它？

**编辑**

问题是当我尝试打开以 Microsoft Excel 5.0/95 文件格式保存的文件时。

要重现此问题，请创建新电子表格，输入任何数据，然后另存为 => Microsoft Excel 5.0/95 工作簿 (*.xls)。

有什么方法可以使用 apache POI 读取这种格式，还是我必须强制我的用户在上传之前升级他们的工作簿？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-04T22:18:19.410

更一般地说，从 POI 的角度来看，OpenOffice 或 LibreOffice 可能以比 MS Office 更好的质量编写旧的 MS Office 格式文档。当 POI 无法将 97 版本的 .xls 文件读取为 HSSFWorkbook 时，我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-08T15:31:59.673

在您提出问题时，Apache POI 没有其他解决方案。好消息是现在有！

在新版本的 Apache POI 中，如果您调用`HSSFWorkbook`或`WorkbookFactory`使用这些旧文件之一，您将得到更有帮助的[OldExcelFormatException](https://poi.apache.org/apidocs/org/apache/poi/hssf/OldExcelFormatException.html) throw

如果您想从这些文件中获取一些信息，那么[OldExcelExtractor](https://poi.apache.org/apidocs/org/apache/poi/hssf/extractor/OldExcelExtractor.html)能够从包括 Excel 95（和更早版本！）在内的格式中获取文本和数字。

为了支持这一点，还有一些`Record`类，所以你可以做一些基于事件的解析来更详细地处理它们。虽然没有友好的 UserModel 支持

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-06T17:32:51.347

这是版本问题：文件是旧版本。要确认这一点，请使用新版本的 Excel 打开您的文件，修改它，保存并重试。

# php - 如何在 JRoute() 中使用 javascript 变量？

> ID：16033313
> 
> 赞同：0
> 
> 时间：2013-04-16T09:25:31.427
> 
> 标签：php, javascript, jquery, joomla, joomla2.5

```
function getProduct(category)
{
    document.galaxy.action = '<?php echo JRoute::_('index.php?option=com_virtuemart&view=category&virtuemart_category_id='+ category) ?>';
    document.getElementById('galaxy').submit();
} 
```

我如何在 JRoute 中使用 JavaScript 变量“(category)”。

帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:34:56.010

尝试在末尾连接`php`并注意引号`"`：

```
function getProduct(category){
    document.galaxy.action = "<?php echo JRoute::_('index.php?option=
        com_virtuemart&view=category&virtuemart_category_id='"+category+"') ?>";
    document.getElementById('galaxy').submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:28:45.677

```
function getProduct(category)
{
    document.galaxy.action = '<?php echo JRoute::_("index.php?option=com_virtuemart&view=category&virtuemart_category_id="'+ category+') ?>';
    document.getElementById('galaxy').submit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-31T05:13:38.247

```
function deleteItem() {
    var item_id = jQuery(this).attr('data-item-id');
    if (confirm("<?php echo JText::_('COM_CN_REPORTS_DELETE_MESSAGE'); ?>")) {
        window.location.href = '<?php echo JRoute::_("index.php?option=com_cn_reports&task=commoverrideform.remove&id='%2Bitem_id%2B'", false, 2); ?>';
    }
} 
```

在浏览器中格式化为

```
function deleteItem() {
    var item_id = jQuery(this).attr('data-item-id');
    if (confirm("Are you sure that you want delete this item?")) {
        window.location.href = 'http://cnbeta2.me/index.php?option=com_cn_reports&task=commoverrideform.remove&id='+item_id+'&Itemid=262';
    }
} 
```

# jquery - jQuery中jsonp响应的POST请求

> ID：16033314
> 
> 赞同：1
> 
> 时间：2013-04-16T09:25:32.717
> 
> 标签：jquery, ajax, html, post, jsonp

我正在开发一个 HTML5 应用程序。在我的应用程序中，有一页用于发布用户评论。有一个提交按钮。我得到以下一组值 {BrandId,ForumId,Title,Description}，需要为 POST 请求附加 url 字符串。在我的提交方法中，我为 ajax POST 调用编写了代码，

```
 $.ajax({  
        type:"POST",        
        url: "myURL",  // the appended url with above 4 values
        dataType: "jsonp", 
        success: function(result)
        { 
           alert("success in posting data");
         } 

    }); 
```

但这并没有显示“成功”。谁能指导我成功实现将数据发布到服务器的发布请求。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:38:54.277

如果您想通过将数据附加到您的 url 来提交数据，则需要执行 get 请求。

如果您想使用示例中的发布请求，您需要告诉 ajax 函数要发送哪些数据

# c++ - 一个很好的字符串比较算法（比如 Total Commander 比较）

> ID：16033320
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:25:55.827
> 
> 标签：c++, string, algorithm, compare, string-comparison

我想在 C++ 中创建一个字符串比较脚本。
Total Commander 文件比较功能相当不错：

![总指挥官样本](https://i.stack.imgur.com/zLmQH.jpg)

这个算法是如何工作的？
有人可以分享这个功能的片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:30:55.583

我不能告诉你，总司令是做什么的。也许有人可以拆开它并尝试追踪技术。

但是一个常见的算法是这个：

[http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)

一种字符串搜索算法。它肯定也有助于比较。

另请参阅这篇文章： [c++ 字符串比较算法](https://stackoverflow.com/questions/12824184/c-string-compare-algorithm)

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:46:15.660

您可以使用 diff 或 LCS 算法进行这种比较。

下面是它的一个简单的 C 实现：

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

int lcs(const char* s1, const char* s2)
{
  size_t l1 = strlen(s1), l2 = strlen(s2);
  size_t sz = (l1 + 1) * (l2 + 1) * sizeof(size_t);
  size_t w = l2 + 1;
  size_t* dpt;
  size_t i1, i2;

  if (sz / (l1 + 1) / (l2 + 1) != sizeof(size_t) ||
      (dpt = malloc(sz)) == NULL)
  {
    printf("Not enough memory\n");
    return EXIT_FAILURE;
  }

  for (i1 = 0; i1 <= l1; i1++)
    dpt[w * i1 + 0] = 0;
  for (i2 = 0; i2 <= l2; i2++)
    dpt[w * 0 + i2] = 0;

  for (i1 = 1; i1 <= l1; i1++)
    for (i2 = 1; i2 <= l2; i2++)
    {
      if (s1[l1 - i1] == s2[l2 - i2])
      {
        dpt[w * i1 + i2] = dpt[w * (i1 - 1) + (i2 - 1)] + 1;
      }
      else if (dpt[w * (i1 - 1) + i2] > dpt[w * i1 + (i2 - 1)])
      {
        dpt[w * i1 + i2] = dpt[w * (i1 - 1) + i2];
      }
      else
      {
        dpt[w * i1 + i2] = dpt[w * i1 + (i2 - 1)];
      }
    }

  i1 = l1; i2 = l2;
  for (;;)
  {
    if ((i1 > 0) && (i2 > 0) && (s1[l1 - i1] == s2[l2 - i2]))
    {
      printf("%c", s1[l1 - i1]);
      i1--; i2--; continue;
    }
    else
    {
      if (i1 > 0 &&
          (i2 == 0 || dpt[w * (i1 - 1) + i2] >= dpt[w * i1 + (i2 - 1)]))
      {
        printf("-%c", s1[l1 - i1]);
        i1--; continue;
      }
      else if (i2 > 0 &&
               (i1 == 0 || dpt[w * (i1 - 1) + i2] < dpt[w * i1 + (i2 - 1)]))
      {
        printf("+%c", s2[l2 - i2]);
        i2--; continue;
      }
    }

    break;
  }
  printf("\n");

  free(dpt);
  return EXIT_SUCCESS;
}

int main(int argc, char** argv)
{
  const char *s1, *s2;
  if (argc == 3)
  {
    s1 = argv[1]; s2 = argv[2];
  }
  else
  {
    printf("Usage:\n  lcs-diff.exe <string1> <string2>\n\n");
    s1 = "I ate apple on yesterday"; s2 = "I eat apple yesterday";
    printf("Sample comparison:\n\n  \"%s\" vs \"%s\":\n\n", s1, s2);
  }

  return lcs(s1, s2);
} 
```

输出（[ideone](http://ideone.com/EP19R6)）：

```
Usage:
  lcs-diff.exe <string1> <string2>

Sample comparison:

  "I ate apple on yesterday" vs "I eat apple yesterday":

I +eat-e apple -o-n- yesterday 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:41:31.157

从头开始，我会这样处理这个问题（伪代码）：

```
String[] sarr1 = string1.split();

for (int i1 =0; i1<sarr1.length; i1++) {
  if (!string2.contains(sarr[i1]) {
    markWordRed(string1, sarr[i1]);
  }
}

String[] sarr2 = string2.split();
for (int i2 =0; i2<sarr2.length; i2++) {
  if (!string1.contains(sarr[i2]) {
    markWordRed(string2, sarr[i2]);
  }
} 
```

从那个开始可以另外：

*   检查单词的顺序，不仅是它们是否存在

*   检查每个未找到的单词与第二个字符串中所有未找到的单词的相似性并显示字母差异

# tinymce - 删除 TinyMCE 4 中的菜单和状态栏

> ID：16033321
> 
> 赞同：123
> 
> 时间：2013-04-16T09:26:00.327
> 
> 标签：tinymce

我正在尝试从 TinyMCE 4 中删除菜单和状态栏，因为我想设置一个非常基本的编辑器。这可能吗？

TinyMCE 3 的文档似乎不相关，我找不到版本 4 的任何内容。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-04-16T09:45:08.413

我查看了源代码，很明显：

```
tinyMCE.init({
    menubar:false,
    statusbar: false,
        //etc
}) 
```

这将删除两者。

您还可以通过指定一串启用的菜单来自定义默认菜单栏的哪些部分可见 - 例如`menubar: 'file edit'`

您可以像这样定义自己的菜单：

```
menu : {    
    test: {title: 'Test Menu', items: 'newdocument'} 
},
menubar: 'test' 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-09-21T11:51:56.783

如果要从顶部删除整个菜单栏

```
tinymce.init({
    menubar: false,

}); 
```

但是，如果您想要带有一些子菜单的自定义菜单栏

```
tinymce.init({
    menu: {
        file: {title: 'File', items: 'newdocument'},
        edit: {title: 'Edit', items: 'undo redo | cut copy paste pastetext | selectall'},
        insert: {title: 'Insert', items: 'link media | template hr'},
        view: {title: 'View', items: 'visualaid'},
        format: {title: 'Format', items: 'bold italic underline strikethrough superscript subscript | formats | removeformat'},
        table: {title: 'Table', items: 'inserttable tableprops deletetable | cell row column'},
        tools: {title: 'Tools', items: 'spellchecker code'}
    }
}); 
```

有关更多帮助，请参阅[TinyMCE](http://www.tinymce.com/wiki.php/Configuration:menu)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-11T07:29:17.187

So, It is clearly metioned in their docs that to make the values to false.

```
 tinymce.init({
    menubar: false,
    branding: false,
    statusbar: false,
   }) 
```

***In the latest update to v5*** You can display menubar as such

```
 tinymce.init({
     menu: {
      edit: { title: 'Edit', items: 'undo redo | cut copy paste pastetext | selectall searchreplace' },
      insert: { title: 'Insert', items: 'image link charmap pagebreak' },
      format: { title: 'Format', items: 'bold italic underline strikethrough superscript subscript | formats | removeformat' },
      table: { title: 'Table', items: 'inserttable tableprops deletetable | cell row column' }
    },
    menubar: 'edit insert format table',
}); 
```

see [https://www.tiny.cloud/docs/](https://www.tiny.cloud/docs/) for more details

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-24T22:33:07.157

如果你想要一个完全干净的文本框，你可以禁用所有的栏，包括“工具栏”：

```
tinymce.init({
            selector:'textarea',
            branding: false,
            menubar:false,
            statusbar: false,
            toolbar: false,
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-24T14:08:49.920

在社区版中，我认为您不允许隐藏状态栏（由 Tiny 提供支持）品牌部分。

[https://www.tiny.cloud/docs-4x/configure/editor-appearance/#branding](https://www.tiny.cloud/docs-4x/configure/editor-appearance/#branding)

# android - ScrollView 使自定义布局不可见

> ID：16033329
> 
> 赞同：6
> 
> 时间：2013-04-16T09:26:42.690
> 
> 标签：android, layout, viewgroup

我做了一个自定义`Viewgroup`，我需要在我的应用程序中使用它，但我需要把它放在一个`ScrollView`. 当布局仅使用我的自定义进行`ViewGroup`时，一切正常，但是当我将其放入时，我`ScrollView`什么都看不到。我的布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <com.example.test.CustomLayout
        android:id="@+id/layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </com.example.test.CustomLayout>

</ScrollView> 
```

我的观点组：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            /* do something and call for each child             
                    View v = getChildAt(i);
                    v.measure(wspec, hspec);
                    */

        setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));

    }

    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub
        //do something and call layout on every child 
    } 
```

更新：我的 CustomLayout 类

```
public class CustomLayout extends ViewGroup{

    /*My params*/

    public CustomLayout(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public CustomLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub
            //do something and call layout on every child 
    }

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
                /* do something and call for each child             
                        View v = getChildAt(i);
                        v.measure(wspec, hspec);
                        */

            setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));

    }

} 
```

更新 2：对不起，但我做了一些其他尝试，看起来如果我在 onMeasure 方法的滚动视图中有视图组，我得到 heightMeasureSpec = 0，然后如果我将视图组放在任何其他布局中，我得到一个整数。也许这会有所帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:07:58.080

我明白了，我必须自己测量 Viewgroup，否则我根本没有高度。
所以：

```
int heightMeasured = 0;
/*for each child get height and
heightMeasured += childHeight;*/

//If I am in a scrollview i got heightmeasurespec == 0, so
if(heightMeasureSpec == 0){
heightMeasureSpec = MeasureSpec.makeMeasureSpec(heightMeasured, MeasureSpec.AT_MOST);
}

setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(this.getSuggestedMinimumHeight(), heightMeasureSpec)); 
```

现在对我来说它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:32:04.837

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" > 
```

尝试将 android:layout_height 更改为 match_parent

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:06:06.650

您正在使用`wrap_content`的高度：

```
<com.example.test.CustomLayout
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" > 
```

由于没有内容，这将解析为 0px afaik - 尝试为您的组件提供默认的最小高度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-25T07:40:43.673

检查这将完美无缺！

```
 public class MaxHeightScrollView extends ScrollView {

    public static int DEFAULT_MAX_HEIGHT = -1;
    private int maxHeight = DEFAULT_MAX_HEIGHT;

    public MaxHeightScrollView(Context context) {
        super(context);
    }

    public MaxHeightScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        TypedArray a = context.getTheme().obtainStyledAttributes(
                attrs,
                R.styleable.ScrollMaxHeight,
                0, 0);
        try {
            setMaxHeight(a.getInt(R.styleable.ScrollMaxHeight_maxHeight, 0));
        } finally {
            a.recycle();
        }
    }

    public MaxHeightScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        try {
            int heightSize = MeasureSpec.getSize(heightMeasureSpec);
            if (maxHeight != DEFAULT_MAX_HEIGHT
                    && heightSize > maxHeight) {
                heightSize = maxHeight;
                heightMeasureSpec = MeasureSpec.makeMeasureSpec(heightSize, MeasureSpec.AT_MOST);
                getLayoutParams().height = heightSize;

            } else {
                heightMeasureSpec = MeasureSpec.makeMeasureSpec(heightSize, MeasureSpec.AT_MOST);
                setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec)
                        , getDefaultSize(this.getSuggestedMinimumHeight(), heightMeasureSpec));
            }

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    public void setMaxHeight(int maxHeight) {
        this.maxHeight = maxHeight;
    }

} 
```

在值文件夹中制作`attr.xml`并添加以下代码

```
<resources>
   <declare-styleable name="ScrollMaxHeight">
        <attr name="maxHeight" format="integer"/>
    </declare-styleable>
</resources> 
```

像这样使用

```
<com.yourapppackage.customviews.MaxHeightScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:maxHeight="200"
    android:fadeScrollbars="false"
    android:gravity="center_horizontal">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        ...........
         ............
    </LinearLayout>

</com.yourapppackage.customviews.MaxHeightScrollView> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T09:40:27.740

你也在下面使用这个构造器，对吧？因为这是您在 xml 中创建视图时调用的方法。

```
public CustomLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
        // Do your stuff
} 
```

# java - 使用 servlet 连接到数据库

> ID：16033330
> 
> 赞同：0
> 
> 时间：2013-04-16T09:26:45.080
> 
> 标签：java, servlets, ant

我正在尝试使用 servlet 制作一个简单的应用程序，在该应用程序中我从用户那里检索数据，例如姓名、姓氏、年龄和电话号码，然后在插入后将其存储在数据库中，但我在执行此操作时遇到了困难，因为在编译和使用 ant 进行部署我没有收到任何错误，但是在单击表单中的提交按钮后，我收到了一个错误。我不知道问题的原因是什么。在编译和部署之前，我的 lib 文件夹中都有我的 servlet 和数据库 jar 文件，但在部署后只有一个 jar 文件被正确部署。非常感谢任何启示。先感谢您。我在想也许应该修改我的 build.xml 以便我的两个 jars 文件都可以正确部署。我收到以下错误。

我已经包含了我的 build.xml 文件。

* * *

指导系统 201103

```
<property name="name" value="servlet"/>
<property name="project.code" value="servlet"/>
<property name="project.name" value="servlet"/>
<property name="version" value="1.00.00"/>

<!--*** Source properties ***-->
<property name="src" location="src"/>
<property name="src-main" location="${src}/main"/>  
<property name="src-main.java" location="${src-main}/java"/>
<property name="src-main.resources" location="${src-main}/resources"/>
<property name="src-main.webapp" location="${src-main}/webapp"/>
<property name="src-test" location="${src}/test"/>      
<property name="src-test.java" location="${src-test}/java"/>
<property name="src-test.resources" location="${src-test}/resources"/>

<property name="lib" location="lib"/>

<!--*** Target properties ***-->
<property name="target" location="target"/>
<property name="build" location="${target}/build"/>
<property name="build.classes" location="${build}/classes"/>
<property name="deploy" location="${target}/deploy"/>
<property name="ide" location="${target}/ide"/>

<!--*** Tomcat Properties ***-->
<property name="tomcat-webapps" location="C:\apache-tomcat-7.0.37-windows-x64\apache-tomcat-7.0.37\webapps"/>

<!--*** Deploy properties ***-->
<property name="tomcat.deploy.dir" location="${tomcat-webapps}"/>

    <!--*** Classpath settings ***-->
<path id="classpath">
    <fileset dir="${lib}">
        <include name="**/*.jar"/>

    </fileset>
    <pathelement path="${build}/classes"/>
</path>

<!--***************************************************************************************************************
  * Target: Help (Default)
  ***************************************************************************************************************-->
<target name="help" description="Gives help on all tasks in this build file">
    <echo>Run "ant -projecthelp" or "ant -p" for a list of valid targets for this ant buildfile."</echo>
</target>

<!--***************************************************************************************************************
  * Target: createTempDirs
  ***************************************************************************************************************-->
<target name="init:create-temp-dirs" description="Creates all relevant temporary directoriees. Typically only used the first time these directories need to be created.">
    <mkdir dir="${target}"/>
    <mkdir dir="${build}"/>
    <mkdir dir="${build.classes}"/>
    <mkdir dir="${deploy}"/>
    <mkdir dir="${ide}"/>
    <mkdir dir="${ide}/classes"/>
</target>

<!--***************************************************************************************************************
  * Target: Clean
  ***************************************************************************************************************-->
<target name="clean" description="Deletes all relevant files and directories eg. build classes, build directories.">
    <!-- Kill the build directory -->
    <delete dir="${build}" />

    <!-- Delete backup files, if necessary -->

    <!-- Delete all temporary files, if necessary -->
</target>

<!--***************************************************************************************************************
  * Target: prepare
  ***************************************************************************************************************-->
<target name="prepare" depends="init:create-temp-dirs" description="Creates all relevant dirs, expand jars, etc.">
    <mkdir dir="${build}"/>
    <mkdir dir="${build.classes}"/>
</target>

<!--***************************************************************************************************************
  * Target: java
  ***************************************************************************************************************-->
<target name="_compile" depends="prepare" >
    <javac srcdir="${src-main.java}" destdir="${build.classes}">
        <classpath refid="classpath"/>
        <include name="**/*.java"/>
    </javac>
    <!-- copy all relevant confirguration files -->
    <copy todir="${build.classes}/resources">
        <fileset dir="${src-main}/resources"/>
    </copy>
    <!-- copy all file in root java directory. -->
    <copy todir="${build.classes}">
        <fileset dir="${src-main.java}" includes="*.*"/>
    </copy>
</target>

<target name="compile" depends="clean, _compile" 
          description="Does a clean Java compile ie. all previous built classes are first deleted and then a full recompile takes place." />
<target name="compile:fast" depends="_compile"
        description="Does a Java compile only on changed files. Previously compiled files are left untouched." />

<!--***************************************************************************************************************
  * Target: war related
  ***************************************************************************************************************-->
<property name="deploy.warfile.name" value="${deploy}/${project.name}.war"/>

<!-- Do a WAR build from the given build directory. No Hibernate build is done. -->
<target name="war:build" description="Creates the War file for this project.">
    <!--<delete file="${deploy.warfile.name}" />-->
    <war destfile="${deploy.warfile.name}" webxml="${src-main.webapp}/WEB-INF/web.xml">
        <classes dir="${build.classes}" />
        <webinf dir="${src-main.webapp}/WEB-INF" />
        <fileset dir="${src-main.webapp}" excludes="WEB-INF/**/*.*" />
        <lib dir="${lib}" includes="**/*.jar" excludes="servlet*.jar, jsp*.jar, javax*.jar" />
    </war>
</target>

<!-- Do a WAR Build and Deploy To Tomcat -->
<target name="war:deploy" depends="war:build" description="Builds the war file (war:build) and deploys it to Tomcat.">
    <copy file="${deploy.warfile.name}" todir="${tomcat.deploy.dir}" />
</target> 
```

![在此处输入图像描述](https://i.stack.imgur.com/mltCp.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:15:43.087

请分享您的**build.xml**。我认为您创建战争文件的任务不是在战争中复制 jar 文件。

```
<target name="war" depends="build" description="War up the compiled classes into ${package.file.war}">
    <war destfile="${package.file.war}">
        <fileset dir="build" includes="**" excludes="**/*.java"/>       
    </war>
</target> 
```

[编辑]您的构建文件没有问题。确保您的源代码包含此语句

```
Class.forName("com.mysql.jdbc.Driver"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:30:04.290

`WEB-INF/lib`您的文件夹中没有 mysql-connector jar 文件

确保您准备好以下物品

1）在`WEB-INF/lib`文件夹中复制粘贴您使用的所有jar依赖项

2）在`WEB-INF/classes`文件夹中你应该有你的 .class 文件

3) 将您的`index.html`或 index.jsp 文件放在 Web 应用程序的根文件夹中

4）并将您的 web.xml 放在`WEB-INF`文件夹中

`MySQL\MySQL Tools for 5.0\java\lib`您可以在文件夹中找到所需的jar文件

# c# - 始终保持控制在首位

> ID：16033335
> 
> 赞同：3
> 
> 时间：2013-04-16T09:26:50.960
> 
> 标签：c#, .net, winforms, z-order

是否有可能让一个 control ( `Panel`) 始终凌驾于所有其他控件之上，即使它们也使用`Control.BringToFront()`?

我已经厌倦了使用`BringToFront`它自己，但是如果这个控件下的另一个控件也使用这个命令，这似乎失去了它的有效性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T11:09:16.963

如果您尝试解释您要达到的目标，这将有所帮助。然后我们可能能够更好地说服你，你做错了什么:)

无论如何，无论你做什么技巧，其他控件可能会使用相同的技巧来覆盖你。

您可以领先一步，例如通过处理父控件的`Layout`事件来强制您的控件回到前面。当子控件的 Z 顺序发生更改时，将触发该`Layout`事件（除其他外）。

```
private void Form1_Layout(object sender, LayoutEventArgs e)
{
    panel1.BringToFront();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T11:49:32.377

处理这个问题的一个肮脏的方法是设置一个计时器，每次它滴答作响时使用控件上的 .BringToFront() 方法，您还可以添加多个您希望执行此操作的控件，并且可以按照您喜欢的方式排列它们。

# asp.net - 在后台访问 ASP.NET 会话

> ID：16033344
> 
> 赞同：0
> 
> 时间：2013-04-16T09:27:03.893
> 
> 标签：asp.net, asp.net-mvc

我`Session`在我的 Asp.NET 代码中设置如下：

```
public class MyController : Controller
{
    public ActionResult Index()
    {
        Session["AdminID"] = id;

        return View();
    }
} 
```

但是现在我想`Session`在一个不在`Controller`项目后台的文件中访问它。 **这可能吗？**

某某 像这样：

```
public class MyClass
{
    public int Foo()
    {
        return Session["AdminID"]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:28:48.090

使用`HttpContext.Current.Session`：

```
using System.Web;

// ...

public int Foo()
{
  return (int)HttpContext.Current.Session["AdminID"];
} 
```

# backbone.js - 有什么方法可以等待调用回调，直到多个骨干集合同步？

> ID：16033346
> 
> 赞同：9
> 
> 时间：2013-04-16T09:27:06.513
> 
> 标签：backbone.js, collections

如果 collectionA 和 collectionB 都触发了“同步”事件，我想运行 view.render()。像这样的东西。

```
collectionA = new CollectionA();
collectionB = new CollectionB();

view.listenTo([collectionA, collectionB], 'sync', view.render);

collectionA.fetch(); // do not call view.render yet.
collectionB.fetch(): // call view.render after fetch. 
```

我知道有一种方法可以像这个答案一样使用 $.when() 或 _.after() 。 [如何同步多个 Backbone.js 获取？](https://stackoverflow.com/questions/12168587/how-to-synchronize-multiple-backbone-js-fetches)

但我认为这些都不是事件驱动的方式。Backbone.js 上是否有任何事件驱动的方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T10:37:38.087

您可以使用下划线[`after`](http://underscorejs.org/#after)方法的组合，仅在回调被多次调用时执行回调，并[`Backbone.Events.once`](http://backbonejs.org/#Events-once)确保您不会过早触发处理程序，如果其中一个集合触发两个`sync`事件，而不是每个触发一个事件：

```
var callback = _.after(2, view.render);
collectionA.once('sync', callback, view);
collectionB.once('sync', callback, view); 
```

或者你可以将逻辑包装到一个实用函数中，这样你就可以将它与可变数量的事件源一起使用：

```
function onceAll(eventSources, eventName, handler, context) {
  handler = _.after(eventSources.length, handler);
  context = context || this;
  _.each(eventSources, function(source) {
      source.once(eventName, handler, context);
  });
} 
```

用法：

```
onceAll([collectionA, collectionB], 'sync', view.render, view); 
```

/未经测试的代码示例。

# python - GraphViz - 使用 python 在节点/边的分类列表之上生成图形？

> ID：16033348
> 
> 赞同：0
> 
> 时间：2013-04-16T09:27:12.800
> 
> 标签：python, graph, graphviz, pygraphviz

我有一个相互关联的项目列表，我知道他们最终会构建一个图表，但数据没有以任何方式排序。

```
PMO-100 -> SA-300
SA-100 -> SA-300
SA-100 -> SA-200
PMO-100 -> SA-100 
```

在graphViz api的python示例中，我意识到如果您知道它是顶级节点并且可以向下运行并构建所有关系，您几乎可以生成一个图形。

因为我得到了一个分类列表（我只知道它是一个图表，因为所有关系都是从一个点计算出来的） - 有没有办法在这些数据之上构建一个图表？

**更新：**对这个问题的第一条评论表明我没有正确解释我所追求的。实际上，以下代码为您提供了正确的图表：

```
gr = pydot.Dot(graph_type='digraph')
    for link in graph.links:
        edge = pydot.Edge(link.outwardIssue.key, link.inwardIssue.key)
        gr.add_edge(edge)
    gr.write('graph.png',format='png') 
```

我的问题真的是 - 我如何为单个节点着色或更改特定边缘的箭头类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:10:41.220

无需为 graphviz 识别顶部节点。只需添加所有节点和边，然后让它完成其余的工作。例如：

```
import pydot
graph = pydot.Dot('graphname', graph_type='digraph') 
pmo100 = pydot.Node("PMO-100")
sa300 = pydot.Node("SA-300")
sa100 = pydot.Node("SA-100")
sa200 = pydot.Node("SA-200")
graph.add_edge(pydot.Edge(pmo100, sa300))
graph.add_edge(pydot.Edge(sa100, sa300))
graph.add_edge(pydot.Edge(sa100, sa200))
graph.add_edge(pydot.Edge(pmo100, sa100))
graph.write_png('example1_graph.png') 
```

这将产生以下图像：

![结果](https://i.stack.imgur.com/IJxg0.png)

[您可以在http://pythonhaven.wordpress.com/2009/12/09/generating_graphs_with_pydot/](http://pythonhaven.wordpress.com/2009/12/09/generating_graphs_with_pydot/)找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T13:09:56.523

如何更改节点的颜色：

node.attr["color"] = '红色'

改变箭头的形状，同样的方法

edge.attr["箭头"] = "..."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T01:26:35.983

试用[pygraph](http://github.com/iamaziz/pygraph)包，它会根据关系语句（数据）生成有向图。不管数据是否排序。

因此（如您的情况）如果我们有以下数据（在三元关系中），则很容易生成相应的图表：

### 第一种方式

```
s1 = "PMO-100 -> SA-300"
s2 = "SA-100 -> SA-300"
s3 = "SA-100 -> SA-200"
s4 = "PMO-100 -> SA-100"

from pygraph.dgraph import PyGraph

g = PyGraph()

g.add_relation(s1)
g.add_relation(s2)
g.add_relation(s3)
g.add_relation(s4)

g.draw_graph(label=False) 
```

它将产生：

![在此处输入图像描述](https://i.stack.imgur.com/qs0Dx.png)

或者您甚至可以从文件中读取关系。

### 第二种方式

说，你有`data.txt`：

```
PMO-100 -> SA-300
SA-100 -> SA-300
SA-100 -> SA-200
PMO-100 -> SA-100 
```

在 4 loc 中更容易：

```
from pygraph.dgraph import PyGraph

g = PyGraph()

g.file_relations("data.txt")

g.draw_graph(label=False) 
```

两种方式的结果都是一样的：

![在此处输入图像描述](https://i.stack.imgur.com/qs0Dx.png)

# xml - 根据标签值拆分 XML

> ID：16033351
> 
> 赞同：2
> 
> 时间：2013-04-16T09:27:22.853
> 
> 标签：xml, perl, tags

嗨，我有一个 XML，我希望根据其中的标签值将其拆分为多个 XML。

例子：-

```
<HEADER>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>78011DAC8</TAG2> 
<TAG3>US78011DAC83</TAG3> 
</ROOT>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>78011DAD6</TAG2> 
<TAG3>US78011DAD66</TAG3> 
</ROOT>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>B06983611</TAG2> 
<TAG3>GB0009075325</TAG3> 
</ROOT>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>B06983629</TAG2> 
<TAG3>GB0009081828</TAG3> 
</ROOT>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>BRS038D62</TAG2> 
<TAG3>FR0010050559</TAG3> 
</ROOT>
<ROOT>
<TAG1>ABC</TAG1> 
<TAG2>BRS49ESZ5</TAG2> 
<TAG3>GB00B1Z5HQ14</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>B06983637</TAG2> 
<TAG3>GB0008983024</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS26Y2R4</TAG2> 
<TAG3>GB00B128DH60</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS1JW2X3</TAG2> 
<TAG3>FR0010235176</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS1JW2Y1</TAG2> 
<TAG3>GB00B0CNHZ09</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS3BP9P2</TAG2> 
<TAG3>GB00B1L6W962</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS7FFAV6</TAG2> 
<TAG3>GB00B3D4VD98</TAG3> 
</ROOT> 
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>B0A07E1X7</TAG2> 
<TAG3>GB0031790826</TAG3> 
</ROOT>
<ROOT>
<TAG1>DEF</TAG1> 
<TAG2>BRS1Z0T57</TAG2> 
<TAG3>GB00B0V3WQ75</TAG3> 
</ROOT>
<ROOT>
<TAG1>XYZ</TAG1> 
<TAG2>BRS9ZDYJ6</TAG2> 
<TAG3>FR0010899765</TAG3> 
</ROOT>
<ROOT>
<TAG1>XYZ</TAG1> 
<TAG2>BRS8ANE14</TAG2> 
<TAG3>DE0001030526</TAG3> 
</ROOT>
<ROOT>
<TAG1>XYZ</TAG1> 
<TAG2>BRS22TXL8</TAG2> 
<TAG3>DE0001030500</TAG3> 
</ROOT>
<ROOT>
<TAG1>XYZ</TAG1> 
<TAG2>BRS5LHPB7</TAG2> 
<TAG3>GB00B24FFM16</TAG3> 
</ROOT>
<ROOT>
<TAG1>XYZ</TAG1> 
<TAG2>B06983223</TAG2> 
<TAG3>GB0008932666</TAG3> 
</ROOT>
</HEADER> 
```

在上面的示例中，我需要检查 TAG1 值，如果它与下一个 TAG1 值匹配，则不应拆分，如果不匹配，则应拆分为新的 XML 文件...

感谢你的帮助 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:42:43.787

这是使用 XML::Twig 执行此操作的一种相对简单的方法。保存在内存中的最大大小是一个完整的子文件，以防这很重要（可能会做得更好，`ROOT`在内存中最多保留 1 个）。

```
#!/usr/bin/perl

use strict;
use warnings;

use autodie qw( open);

use XML::Twig;

my $in_file = $ARGV[0];

my $out_file= "$in_file.p";
my $i="01";
my $current_tag1='';

my $twig=XML::Twig->new(   
    twig_handlers => { 
       ROOT => sub { my( $t, $root)= @_;
                     $current_tag1||= $root->field( 'TAG1');      # initialize current tag if needed

                     if( $root->field( 'TAG1') ne $current_tag1)  # found a break in the value of TAG1 
                       { 
                         $root->cut;                              # get the new root out of the way
                         $t->print_to_file( $out_file. $i++);     # output the part
                         $t->purge;                               # remove the content of the part
                         $root->paste( first_child => $t->root);  # put the new root back in place

                         $current_tag1=  $root->field( 'TAG1'); 
                       }
                   }
    },
    keep_spaces => 1, # to keep line returns
);

$twig->parsefile($in_file);
$twig->print_to_file( $out_file . $i); # output the last part 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:46:30.637

Atlast 我找到了修复.. 下面是检查计数和标签值的代码..

```
#!/usr/bin/perl

use strict;
use warnings;

use autodie qw( open);

use XML::Twig;

my $in_file = $ARGV[0];

my $out_file= "$in_file.p";
my $i="01";
my $current_tag1='';
my $previous_tag1 = '';
my $nb_root_in_file  =0;
my $MIN_ROOT_IN_FILE = 5;

my $twig=XML::Twig->new(   
twig_handlers => { 
   ROOT => sub { my( $t, $root)= @_;
   $current_tag1||= $root->field( 'TAG1');      # initialize current tag if needed
   $nb_root_in_file++;
   if( $nb_root_in_file > $MIN_ROOT_IN_FILE && $root->field( 'TAG1') ne $current_tag1)  # found a break in the value of TAG1 
                   { 
                     $root->cut;                   # get the new root out of the way
                     $t->print_to_file( $out_file. $i++);     # output the part
                     $t->purge;                       # remove the content of the part
              $root->paste( first_child => $t->root);  # put the new root back in place
                     $current_tag1=  $root->field( 'TAG1'); 
                     $nb_root_in_file =0;
                   }
                    $previous_tag1 = $current_tag1;
               }
 },
keep_spaces => 1, # to keep line returns
 );

 $twig->parsefile($in_file);
  $twig->print_to_file( $out_file . $i); # output the last part 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:34:51.427

也许你可以用

```
use XML::Simple;

my $xml = XMLin($your_xml); 
```

然后像

```
if ($xml->{HEADER}->[0]->{ROOT}->{TAG1} == $xml->{HEADER}->[1]->{ROOT}->{TAG1}) { ... } 
```

我实际上不知道即将发布的 xml struc

# php - 调用 joomla 的条件模型

> ID：16033352
> 
> 赞同：1
> 
> 时间：2013-04-16T09:27:23.217
> 
> 标签：php, joomla

如何仅在调用的布局上激活 joomla 模型。我有以下网址结构

```
/index.php?option=com_mycomponent&view=my_view&layout=edit&id=3 
```

如果`layout=edit`应该调用模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:32:42.450

检查视图中的布局：

```
if (JFactory::getApplication()->input->getWord('layout') == 'edit')
{
  // call your model here
} 
```

[Retrieving_request_data_using_JInput](http://docs.joomla.org/Retrieving_request_data_using_JInput)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:32:49.103

你可以通过调用这个来做到这一点：

```
/index.php?option=com_mycomponent&task=my_view.edit&id=3 
```

# php - preg_match 获取文本

> ID：16033356
> 
> 赞同：3
> 
> 时间：2013-04-16T09:27:31.967
> 
> 标签：php, regex, preg-match-all

我有[test.php](http://inviatapenet.gethost.ro/sop/test.php) 和[test1.php](http://inviatapenet.gethost.ro/sop/test1.php)我有这个 php 代码运行

```
<?php 
$Text=file_get_contents("http://inviatapenet.gethost.ro/sop/test.php");
 preg_match_all('~fid="(.*?)"~si',$Text,$Match);
 $fid=$Match[1][1];
 echo $fid;
?> 
```

我想做的是从 test.php 中获取文本

从这个 fid='gty5etrf' JavaScript 我只需要 fid 的内容

```
<script type='text/javascript'>fid='gty5etrf'; v_width=620; v_height=490;</script><script type='text/javascript' src='http://www.reyhq.com/player.js'></script> 
```

在 test1.php 我只需要显示内容

```
gty5etrf 
```

我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:32:38.220

您可以尝试该表达式`fid\=\'([^\']+)\'`，因为`[^\']+`它以正确的方式使表达式非贪婪，而且该表达式是错误的，因为它正在寻找双引号而不是单引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:33:09.707

```
 preg_match_all('/fid=\'([^\']+)\'/',$Text,$Match); 
```

你的正则表达式是错误的。首先，您正在寻找`fid="..."`而不是`fid='...'`. 其次，使用，正则表达式将匹配比 属性`.*`末尾更远的​​任何字符。`fid`

这是完整的代码：

```
preg_match_all('/fid=\'([^\']+)\'/',$Text,$Match);
$fid=$Match[1][0];
echo $fid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:35:33.573

这应该是

```
$fid=$Match[1][0]; 
```

代替 ：

```
$fid=$Match[1][1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:31:28.210

一个简短的模式：

```
$pattern = '~\bfid\s*=\s*["\']\K\w+~'; 
```

或长模式：

```
$pattern = '~<script[^>]*>(?:[^f<]+|\Bf+|f(?!id\b)|<+(?!/script>))*+\bfid\s*=\s*(["\'])\K[^"\']+(?=\1)~'; 
```

结果与

```
preg_match($pattern, $Text, $match);
$fid = $match[0]; 
```

短模式查找如下序列：

```
fid='somechars
fid  = "somecchars 
```

长模式做同样的事情，但也会检查你是否在脚本标签之间。

* * *

使用 XPath：

```
$html = <<<'EOD'
<script type='text/javascript'>fid='gty5etrf'; v_width=620; v_height=490;</script><script type='text/javascript' src='http://www.reyhq.com/player.js'></script>
EOD;

$dom = new DOMDocument;
libxml_use_internal_errors(true);
$dom->loadHTML($html);
$xp = new DOMXPath($dom);
$query = <<<'EOD'
    substring-before(
        substring-after(
            //script[contains(., "fid='")],
            "fid='"
        ),
        "'"
    )
EOD;

echo $xp->evaluate($query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:37:50.817

里面的匹配字符串`''`：`'(?:[^\\']*|\\.)*'`

里面的匹配字符串`""`：`"(?:[^\\"]*|\\.)*"`

他们两个（忽略空格）：`fid\s*=\s*('(?:[^\\']*|\\.)*'|"(?:[^\\"]*|\\.)*")`

并为 php 转义：

```
$regexp = '~fid\\s*=\\s*(\'(?:[^\\\\\']*|\\\\.)*\'|"(?:[^\\\\"]*|\\\\.)*")~'; 
```

即使这样，这也将正确处理：

```
fid  = 'foo\'s bar'; 
```

# android - 如何从服务器检索多张图片并一张一张显示

> ID：16033361
> 
> 赞同：0
> 
> 时间：2013-04-16T09:27:51.073
> 
> 标签：android

在我的应用程序中，我需要从服务器流式传输视频和图像。如果视频不可用，则应检索图像并将其显示在照片库中。我成功地完成了这部分，但一次只能使用一张图像。但是这种方法很慢，因为它需要很长时间才能加载下一张图像。

我想要做的是传递 4 个 url（在本示例中，4 是要从服务器检索的图像总数），但通过使用`Onclicklistener`. 请有任何建议。我应该如何进行？谢谢

```
public class Imageviewing extends Activity implements  OnGestureListener{

    private static final String TAG = null;
    ImageView imView;
    String imageUrl="<myServerlink>";
    Random r= new Random();
    String urilink;
    private GestureDetector myGesture ;
    private static final int SWIPE_MIN_DISTANCE = 75;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_imageviewing);

        Intent intent = getIntent();
        // setContentView(R.layout.);
        // String

        urilink = intent.getExtras().getString("videouri");
        Log.e(TAG, urilink.toString());
        Button bt3= (Button)findViewById(R.id.get_imagebt);
        bt3.setOnClickListener(getImgListener);
        imView = (ImageView)findViewById(R.id.imview);
        myGesture = new GestureDetector(this);

    }
    View.OnClickListener getImgListener = new View.OnClickListener()
    {

          @Override
          public void onClick(View view) {

              finish();
          }

    };

    @Override
    public boolean onTouchEvent(MotionEvent event){
        return myGesture.onTouchEvent(event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_imageviewing, menu);
        return true;
    }

     Bitmap bmImg;
        void downloadFile(String fileUrl){
              URL myFileUrl =null;          
              try {
                   myFileUrl= new URL(fileUrl);
              } catch (MalformedURLException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
              }
              try {
                   HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
                   conn.setDoInput(true);
                   conn.connect();
                   InputStream is = conn.getInputStream();

                   bmImg = BitmapFactory.decodeStream(is);
                   imView.setImageBitmap(bmImg);
                   Log.i("im url","Image to Imageview");
              } catch (IOException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
              }
         }

        @Override
        public boolean onDown(MotionEvent arg0) {
            // TODO Auto-generated method stub
            return false;
        }
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            // TODO Auto-generated method stub
            try {
                //do not do anything if the swipe does not reach a certain length of distance
               // if (Math.abs(e1.getY() - e2.getY()) &gt; SWIPE_MAX_OFF_PATH)
                   // return false;
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;

                // right to left swipe
                //if(e1.getX() - e2.getX() &gt; SWIPE_MIN_DISTANCE &amp;&amp; Math.abs(velocityX) &gt; SWIPE_THRESHOLD_VELOCITY) {

                if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    int i = r.nextInt(5-1)+1;
                    downloadFile(imageUrl+urilink+"-"+i+".jpg");
                    Log.i("im url",imageUrl+urilink+"-"+i+".jpg");
                    return false;

                }
               /* // left to right swipe
                else if (e2.getX() - e1.getX() &gt; SWIPE_MIN_DISTANCE &amp;&amp; Math.abs(velocityX) &gt; SWIPE_THRESHOLD_VELOCITY) {
                    ViewHistory();
                }*/
            } catch (Exception e) {
                // nothing
            }
            return false;

        }
        @Override
        public void onLongPress(MotionEvent arg0) {
            // TODO Auto-generated method stub

        }
        @Override
        public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
                float arg3) {
            // TODO Auto-generated method stub
            return false;
        }
        @Override
        public void onShowPress(MotionEvent arg0) {
            // TODO Auto-generated method stub

        }
        @Override
        public boolean onSingleTapUp(MotionEvent arg0) {
            // TODO Auto-generated method stub
            return false;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:40:10.237

有关如何使用所谓的延迟加载有效加载多个图像的示例，请参阅此问题。

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

# android - 在 Android 和 iOS 之间共享字符串

> ID：16033362
> 
> 赞同：1
> 
> 时间：2013-04-16T09:27:51.897
> 
> 标签：android, ios, resources

我正在寻找在原生 Android 和 iOS 开发之间共享 ui 字符串的选项。有什么想法或工具吗？

编辑：我基本上想对所有 UI 元素（如按钮、消息等）使用相同的字符串，以便两个应用程序是平等的，并且只在一个地方维护字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:37:53.493

您可以使用[JSON](http://www.json.org/)。这是一种非常标准的格式，iOS 和 Android 都能很好地处理它。对于您冷落的每种语言，表格中都有一个文件

```
{ "key1": "value1", "key2": "value2"} 
```

在 iOS 中你会得到一个 NSDictionary （可变与否，如你所愿）

# javascript - bxslider幻灯片过渡难度

> ID：16033366
> 
> 赞同：0
> 
> 时间：2013-04-16T09:27:56.070
> 
> 标签：javascript, jquery, html, jquery-plugins

我目前正在使用 jQuery 插件[isoSlider](http://iosscripts.com/iosslider/)，我正在尝试创建一个延迟幻灯片转换延迟，就像幻灯片[Kenzo](https://www.kenzo.com/en/)一样，当图像滑入中心时会有轻微的延迟。

根据 BXslide 网站上的文档，我找不到任何可以让我执行此操作的选项功能。

[我的滑块示例](http://iamnatesmithen.com/dev/iosslider%202/_demos/_examples/7-Centered-Slides/2-Background-Images/)

```
$(document).ready(function() {

            $('.iosSlider').iosSlider({
                snapToChildren: true,
                desktopClickDrag: true,
                infiniteSlider: true,
                snapSlideCenter: true,
                scrollbarMargin: '0',
                scrollbarBorderRadius: '0',
                keyboardControls: true,
                //autoSlide: true,
                scrollbar: true,
                navNextSelector: $('.next'),
                navPrevSelector: $('.prev'),
                navSlideSelector: $('.selectors .item'),
                onSlideChange: slideChange,
                stageCSS: {
                    overflow: 'visible'
                }
            });

        }); 
```

有谁知道如何做到这一点？

# asp.net - 底层提供程序在使用 WCF 打开时失败？

> ID：16033369
> 
> 赞同：1
> 
> 时间：2013-04-16T09:28:08.097
> 
> 标签：asp.net, sql-server, wcf

嗨，我正在尝试通过 WCF 获取顾问列表，因为我收到了标题中提到的这个错误，所以我会在调试时告诉你所有代码，这样你就可以跟踪错误的位置，

当我在负载上运行表单时，

```
 private void LoadData()
    {
        try
        {
            CIService.CIServiceClient serv = new CIServiceClient();
            serv.GetConsultantListCompleted += new EventHandler<GetConsultantListCompletedEventArgs>(serv_GetConsultantListCompleted);
            serv.GetConsultantListAsync();
            serv.Close();
        }
        catch (Exception ex)
        {
            string error = "<script language=javascript>alert('Failed to Load Consultants at PageLoad \r\n" + ex.StackTrace + "');</script>";
            if (!ClientScript.IsClientScriptBlockRegistered("ConLoadErr"))
                ClientScript.RegisterClientScriptBlock(Page.GetType(), "ConLoadErr", error);  
        }
    }

 public ConsultantService():base(connectionString)
        {

        }

    public DataAccessBase(string connectionString)
        {
            this.sqlCommand = new SqlCommand();
            this.sqlConnection = new SqlConnection(connectionString);
            this.sqlCommand.Connection = this.sqlConnection;
            this.commandType = System.Data.CommandType.Text;
        }

  List<Consultant> ICIService.GetConsultantList()
        {
            ConsultantService service = new ConsultantService();
            return service.GetConsultantList();
        }

    public List<Consultant> GetConsultantList()
        {
            DataAccessManager.SystemSetup sysSetup = new SystemSetup();
            return sysSetup.GetConsultantList();
        }

 public List<Consultant> GetConsultantList()
        {
            InspectionEntities dbContext = new InspectionEntities();
            return dbContext.Consultants.ToList();
        }

    public InspectionEntities() : 
                base("name=InspectionEntities", "InspectionEntities")
        {
            this.OnContextCreated();
        }

  public List<Consultant> GetConsultantList()
        {
            InspectionEntities dbContext = new InspectionEntities();
            return dbContext.Consultants.ToList();
        } 
```

再次返回它时，它会在“return dbContext.Consultants.ToList();”上给出错误

```
Inner Exception ({"A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)"}) 
```

和

```
Stack Trace

   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   at System.Data.EntityClient.EntityConnection.Open()
   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at DataAccessManager.SystemSetup.GetConsultantList() in G:\Design Scoring\DataAccessManager\SystemSetup.cs:line 42
   at InspectionServices.ConsultantService.GetConsultantList() in G:\Design Scoring\InspectionServices\Services\ConsultantService.cs:line 112
   at InspectionServices.CIService.InspectionServices.ICIService.GetConsultantList() in G:\Design Scoring\InspectionServices\CIService.cs:line 253
   at SyncInvokeGetConsultantList(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
```

希望你的建议

谢谢

编辑：还有一件事我想提一下，在这个应用程序的其他形式上，我正在从 db 获取数据而没有任何错误

# html - Zope (ZPT) 重叠标签

> ID：16033371
> 
> 赞同：2
> 
> 时间：2013-04-16T09:28:17.353
> 
> 标签：html, zope, template-tal, zpt, template-metal

我尝试在 Zope 页面模板中使用 TAL 创建打开`div`标签条件并关闭`div`另一个条件中的标签，但不允许重叠标签。

这是我的代码：

```
<div id="notaccordion">                                                                                      
    <tal:x repeat="item python:range(26)">                                                                                                                         
        <tal:x define="global block_name python:current.values()[0]['block_name']">         

            <tal:x condition="python:isDone">                                                                               
                </div>                                                                                  
            </tal:x>    

            <tal:x condition="python:not isDone">                                                                                     
                <tal:x replace="python:block_name">                                                                                                                                             
                </tal:x>                                                                                                       
                <div>                                                                                                                                                                                                                                                                                                                                         
            </tal:x>  

        </tal:x>                                                                     
     </tal:x>                                                                                                                              
 </div> 
```

重要的部分是：

```
 <tal:x condition="python:isDone">                                                                               
                </div>                                                                                  
            </tal:x> 
```

这是错误。

```
Compilation failed
zope.tal.taldefs.TALError: TAL attributes on <tal:x> require explicit </tal:x> 
```

我尝试使用 Python 脚本，但它也不起作用。

```
<div id="notaccordion">                                                                                      
    <tal:x repeat="item python:range(26)">                                                                                                                         
        <tal:x define="global block_name python:current.values()[0]['block_name']">         

            <tal:x condition="python:isDone">                                                                               
                <tal:x content="python:context[close_div]()">
                </tal:x>                                                                                           
            </tal:x>    

            <tal:x condition="python:not isDone">
                <tal:x replace="python:block_name">                                                                                                                                                         
                </tal:x>                                                                                                       
                <tal:x content="python:context[open_div]()">
                </tal:x>                                                                                                                                                                                                                                                                                                                                                
            </tal:x>  

        </tal:x>                                                                     
    </tal:x>                                                                                                                              
</div> 
```

使用`close_div`脚本：

```
print '</div>'
return printed 
```

它返回`&lt;/div&gt;`而不是`</div>`

如果你想知道我为什么这样做。我有一个需要显示的树结构。由于我（认为我）不能递归地执行此操作，因此我尝试使用 LIFO 列表来模拟它。并且`current`是我当前的节点。

我试图实现这一点（节点是dict的dict ...用作树）：

```
lifo = list()
lifo.append([node, False])

while lifo:
    current, isDone = lifo[-1]
    block = current.keys()[0]
    if isDone:
        print '</div>'
        lifo.pop()
    else:
        lifo[-1][1] = True
        print '<div>'
        print block
        children = current[block].get('children', {})
        if children:
            for childBlock, childValue in children.items():
                lifo.append([{childBlock:childValue}, False]) 
```

任何帮助或建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:50:31.117

页面模板必须是有效的 XML，因此您不能随意包含标签。树结构最好递归处理（可能使用宏片段）：

```
<metal:recurse define-macro="list">
  <ul>
    <li tal:repeat="el elements">
      <span tal:content="el/id">element id</span>
      <metal:block tal:condition="el/children"
                   tal:define="elements el/children">
        <div metal:use-macro="template/macros/list" />
      </metal:recurse>
    </li>
  </ul>
</metal:recurse> 
```

例如，Plone 导航 portlet 还为每个级别使用[单独的宏模板，调用自身来呈现子级（](https://github.com/plone/plone.app.portlets/blob/master/plone/app/portlets/portlets/navigation_recurse.pt)`recurse` *是*相同的模板）。

对于使用`open_div`or`close_div`脚本的特定方法，您需要[标记内容值`structure`](http://docs.zope.org/zope2/zope2book/AdvZPT.html#inserting-structure)以防止发生自动 HTML 转义：

```
<tal:x content="structure python:context[open_div]()"> 
```

# java - Java BufferedWriter 未正确处理选项卡空间

> ID：16033374
> 
> 赞同：-4
> 
> 时间：2013-04-16T09:28:19.197
> 
> 标签：java, file-io

```
BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new ByteArrayOutputStream(), encoding)); 

public void write(final List<Column> columnsList) throws IOException {
        String data = null;
        int length = columnsList.size();
        int writeIndex = 0;
        for (Column cd : columnsList) {
            data = cd.getData();            
            writer.write(data);
            writer.write(getDelimiter()); // it will return '\t'
        }
        writer.write("\n");
    } 
```

上面的代码没有将制表符空间放在文件中，实际上它写的是`\t`文件中。当我用硬编码的“\t”写文件时，它确实写了制表符空间。但我收到了来自 web 端的“\t”分隔符。我只是选择这个分隔符并与作家一起写作。但是当我在记事本中打开文件时，“\t”实际上是写入文件而不是TAB SPACE

我正在用其他方法关闭作者，所以不用担心关闭作者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:05:19.180

好吧，我很确定`getDelimiter()`会返回两个字符的“\t”。

您可以通过以下方式验证它`getDelimiter().toCharArray();`

**简单的解决方案是使用如下代码片段**

```
if (getDelimiter().equalsIgnoreCase("\\t")) then use String.valueOf('\t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:37:39.590

您不初始化 BufferedWriter 对象。这是一个如何使用bufferedwriter在java中写入文件的[示例](http://www.mkyong.com/java/how-to-write-to-file-in-java-bufferedwriter-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:37:47.570

刚刚也试了一下。

工作正常！检查this [how to use "tab space" while writing in text file](https://stackoverflow.com/questions/2585337/how-to-use-tab-space-while-writing-in-text-file) post你可能需要一些配置。

发布整个方法以获取更多信息

```
FileWriter fstream = new FileWriter("bot.txt", true); //true tells to append data.
BufferedWriter out = new BufferedWriter(fstream);

out.write("bbb" + "\t"+"aaa");
out.close();` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:34:17.037

检查这个问题，也许你在初始化 BufferedWriter 之前遗漏了一些东西

[在文本文件中写入时如何使用“制表符空间”](https://stackoverflow.com/questions/2585337/how-to-use-tab-space-while-writing-in-text-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:35:30.223

您的编写器定义不完整，因此我们不知道您使用的是哪个底层流/编写器。

这个例子对我有用：

```
BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(System.out));
writer.write("a");
writer.write("\t");
writer.write("b");
writer.close(); 
```

它在“a”和“b”之间打印一个制表符。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-16T09:33:08.597

你应该打电话给 writer.close();

你来弄吧？

# sql-server-2008 - 当前事务无法提交，也无法支持写入日志文件的操作。回滚事务

> ID：16033375
> 
> 赞同：5
> 
> 时间：2013-04-16T09:28:19.823
> 
> 标签：sql-server-2008

从下面的代码中，我们在 raiseerror 处遇到异常 - 当前事务无法提交，并且无法支持写入日志文件的操作。回滚事务。

```
IF @insertOrUdate = 'D'
BEGIN

    -- DescType depends on CorrectionType and is also a protected sync table, 
    --  it needs to be cleared out before we can remove this type
    IF EXISTS(
        SELECT TOP 1 * 
        FROM [dbo].[DescType]
        WHERE 
            [CorrectionTypeId] = @correctionTypeId

    )
    BEGIN
    PRINT 'raise error'
        RAISERROR('Dependent Desc Role Type Rollups must be removed prior to removing a type that they depend on', 16, 1)

        PRINT 'after raise error'
    END

    -- Delete protected Sync record
    DELETE FROM [dbo].[CorrectionType] WHERE [CorrectionTypeId] = @correctionTypeId;

END; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T05:43:02.190

因为您将`SET XACT_ABORT ON' when you do your`RAISERROR() `you're setting the`XACT_STATE` 设置为 -1，这意味着您无法对数据库执行任何可提交的工作，您只能回滚您的事务。

使用 temp procs 和上面的触发器之一的示例：

```
create proc #a 
as
--This is the proxy for the parent proc
begin try
begin tran
    exec #b
commit tran
end try
begin catch
    if @@trancount > 0 rollback
    select error_message();
end catch

go

create proc #b
as
set xact_abort on; 

begin try;
    DISABLE TRIGGER [dbo].[trg_dml_CorrectionType_InsteadOfDelete] ON [dbo].[CorrectionType];
    --Check  state
    select xact_state() one;

    raiserror('Error!', 16,1)

    --This one doesn't run of course
    select xact_state() two
end try
begin catch
    select xact_state() three;
    select error_message() as msgprior;

ENABLE TRIGGER [dbo].[trg_dml_CorrectionType_InsteadOfDelete] ON [dbo].[CorrectionType];

    --This doesn't run either, new error
    select xact_state() four;

    --if @@trancount > 0 rollback transaction;
    declare @error nvarchar(2500)
    select @error = error_message()
    raiserror(@error, 16,1);
end catch

GO

exec #a 
```

你有几个选择，我相信：

1.  将此过程的 XACT_ABORT 设置为 OFF。这应该处理此特定场景的 XACT_STATE 问题，并且您的 ROLLBACK 应该处理您的触发器问题。
2.  将您的启用/禁用触发器移动到您的父进程并完全在事务之外处理它们。他们不需要依赖于您在此子进程中的其他操作；无论如何，您总是禁用/启用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T11:15:33.927

就我而言，这被证明是环境问题：分布式事务协调器服务已停止。重新启动此 Windows 服务为我们解决了问题。

# java - 如何在eclipse indigo的调试透视图中删除类文件编辑器

> ID：16033382
> 
> 赞同：1
> 
> 时间：2013-04-16T09:28:33.360
> 
> 标签：java, android, opencv, javacv

我正在尝试在 Eclipse 中运行眼睛检测应用程序。我知道它可以在我的安卓设备上运行。

但是，当我尝试在合适的位置设置 System.out.println 时，它完全跳过它们并启动了活动。另外，当我尝试调试应用程序时（设置断点后，它一直显示找不到类文件编辑器源。我相信这是由于调试器没有找到库源代码。我能做什么。我只关心对于我的 println，但是这个类文件编辑器不断弹出。我该如何停止它。这是代码。

```
package com.googlecode.javacv.eyepreview;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ImageFormat;
import android.graphics.Paint;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.FrameLayout;
import java.io.File;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.util.List;
import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.cpp.opencv_objdetect;

import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_objdetect.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;

// ----------------------------------------------------------------------

public class EyePreview extends Activity {
    private FrameLayout layout;
    private EyeView eyeView;
    private Preview mPreview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

        // Hide the window title.
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // Create our Preview view and set it as the content of our activity.
        try {
            layout = new FrameLayout(this);
            eyeView = new EyeView(this);
            mPreview = new Preview(this, eyeView);
            layout.addView(mPreview);
            layout.addView(eyeView);
            setContentView(layout);
        } catch (IOException e) {
            e.printStackTrace();
            new AlertDialog.Builder(this).setMessage(e.getMessage()).create().show();
        }
    }
}

// ----------------------------------------------------------------------

class EyeView extends View implements Camera.PreviewCallback {
    public static final int SUBSAMPLING_FACTOR = 4;

    private IplImage grayImage;
    private CvHaarClassifierCascade classifier;
    private CvMemStorage storage;
    private CvSeq eyes;

    public EyeView(EyePreview context) throws IOException {
         super(context);

        // Load the classifier file from Java resources.
        File classifierFile = Loader.extractResource(getClass(),
            "/com/googlecode/javacv/eyepreview/haarcascade_eye.xml",
            context.getCacheDir(), "classifier", ".xml");
        if (classifierFile == null || classifierFile.length() <= 0) {
            throw new IOException("Could not extract the classifier file from Java resource.");
        }

        // Preload the opencv_objdetect module to work around a known bug.
        Loader.load(opencv_objdetect.class);
        classifier = new CvHaarClassifierCascade(cvLoad(classifierFile.getAbsolutePath()));
        classifierFile.delete();
        if (classifier.isNull()) {
            throw new IOException("Could not load the classifier file.");
        }
        storage = CvMemStorage.create();
    }
    public void IrisDetection(){

    }
    public void onPreviewFrame(final byte[] data, final Camera camera) {
        try {
            Camera.Size size = camera.getParameters().getPreviewSize();
            processImage(data, size.width, size.height);
            camera.addCallbackBuffer(data);
        } catch (RuntimeException e) {
            // The camera has probably just been released, ignore.
        }
    }

    protected void processImage(byte[] data, int width, int height) {
        // First, downsample our image and convert it into a grayscale IplImage
        int f = SUBSAMPLING_FACTOR;
        if (grayImage == null || grayImage.width() != width/f || grayImage.height() != height/f) {
            grayImage = IplImage.create(width/f, height/f, IPL_DEPTH_8U, 1);
        }
        int imageWidth  = grayImage.width();
        System.out.println("imageWidth=" + imageWidth + "\n");
        int imageHeight = grayImage.height();
        System.out.println("imageheight" + imageHeight + "\n");
        int dataStride = f*width;
        System.out.println("dataStride=" + dataStride + "\n");
        int imageStride = grayImage.widthStep();
        System.out.println("imageStride" + imageStride + "\n");
        ByteBuffer imageBuffer = grayImage.getByteBuffer();
        for (int y = 0; y < imageHeight; y++) {
            int dataLine = y*dataStride;
            int imageLine = y*imageStride;
            for (int x = 0; x < imageWidth; x++) {
                imageBuffer.put(imageLine + x, data[dataLine + f*x]);
            }
        }

        eyes = cvHaarDetectObjects(grayImage, classifier, storage, 1.1, 3, CV_HAAR_DO_CANNY_PRUNING);
        postInvalidate();
        cvClearMemStorage(storage);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        paint.setTextSize(20);

        String s = "EyePreview - This side up.";
        float textWidth = paint.measureText(s);
        canvas.drawText(s, (getWidth()-textWidth)/2, 20, paint);

        if (eyes != null) {
            paint.setStrokeWidth(2);
            paint.setStyle(Paint.Style.STROKE);
            float scaleX = (float)getWidth()/grayImage.width();
            float scaleY = (float)getHeight()/grayImage.height();
            int total = eyes.total();
            for (int i = 0; i < total; i++) {
                CvRect r = new CvRect(cvGetSeqElem(eyes, i));
                int x = r.x(), y = r.y(), w = r.width(), h = r.height();
                canvas.drawRect(x*scaleX, y*scaleY, (x+w)*scaleX, (y+h)*scaleY, paint);
            }
        }
    }
}

// ----------------------------------------------------------------------

class Preview extends SurfaceView implements SurfaceHolder.Callback {
    SurfaceHolder mHolder;
    Camera mCamera;
    Camera.PreviewCallback previewCallback;

    Preview(Context context, Camera.PreviewCallback previewCallback) {
        super(context);
        this.previewCallback = previewCallback;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        mCamera = Camera.open();
        try {
           mCamera.setPreviewDisplay(holder);
        } catch (IOException exception) {
            mCamera.release();
            mCamera = null;
            // TODO: add more exception handling logic here
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.05;
        double targetRatio = (double) w / h;
        if (sizes == null) return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = mCamera.getParameters();

        List<Size> sizes = parameters.getSupportedPreviewSizes();
        Size optimalSize = getOptimalPreviewSize(sizes, w, h);
        parameters.setPreviewSize(optimalSize.width, optimalSize.height);

        mCamera.setParameters(parameters);
        if (previewCallback != null) {
            mCamera.setPreviewCallbackWithBuffer(previewCallback);
            Camera.Size size = parameters.getPreviewSize();
            byte[] data = new byte[size.width*size.height*
                    ImageFormat.getBitsPerPixel(parameters.getPreviewFormat())/8];
            mCamera.addCallbackBuffer(data);
        }
        mCamera.startPreview();
    }

} 
```

如果有人可以帮助我，我将不胜感激。

# c++ - 如何知道用于构建 linux 的 gcc 版本？

> ID：16033385
> 
> 赞同：8
> 
> 时间：2013-04-16T09:28:41.817
> 
> 标签：c++, c, linux, gcc, openwrt

我使用 OpenWRT。它是嵌入式系统的 linux 发行版

我想知道用于编译linux的gcc版本

我在网上做了一些研究，但没有结果。

我尝试对 linux OpenWRT 中的一些现有二进制文件执行这些命令（如 wget）

```
strings -a <default binary> | grep "GCC"
strings -a <default binary> | grep "gcc" 
```

但我没有得到任何结果

即便是

```
strings -a  /lib/libgcc_s.so.1 | grep  "gcc"
strings -a /lib/libuClibc-0.9.30.1.so | grep   "gcc" 
```

不给出任何结果

有没有办法知道使用 gcc 构建整个 linux（对于用户空间和内核空间）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T09:40:27.097

对于程序，如果您的系统正在使用 ELF，它会出现在`.comment`ELF 可执行文件部分。

```
$猫main.c
int main() { }
$ gcc main.c
$ objdump -s -j .comment a.out

a.out：文件格式elf64-x86-64

.comment 部分的内容：
 0000 00474343 3a202844 65626961 6e20342e .GCC: (Debian 4.
 0010 372e322d 35292034 2e372e32 00474343 7.2-5) 4.7.2.GCC
 0020 3a202844 65626961 6e20342e 342e372d : (Debian 4.4.7-
 0030 33292034 2e342e37 00 3) 4.4.7。       

```

用于编译内核的编译器可从 中的字符串获得`/proc/version`，例如：

```
$ 猫 /proc/版本
Linux 版本 3.8.5 (...) (gcc 版本 4.7.2 (Debian 4.7.2-5) ) ...

```

## 一个主要的警告

该`.comment`部分是可选的。当可执行文件捆绑到一个包中时，许多发行版会将其从可执行文件中剥离。该部分将放置在单独的调试包中。

例如，在我的系统上：

```
$ objdump -s -j .comment /usr/lib/x86_64-linux-gnu/libcurl.so.4.2.0
/usr/lib/x86_64-linux-gnu/libcurl.so.4.2.0：文件格式elf64-x86-64

objdump：-j 选项中提到的“.comment”部分，但在任何输入中都找不到
文件

```

安装`libcurl3-dbg`软件包后，我们通过 GNU 调试链接获得带有剥离部分的图像：

```
$ objdump -s -j .comment \
    /usr/lib/debug/.build-id/8c/4ae0ad17a4e76bab47c487047490061bd49de3.debug

/usr/lib/debug/.build-id/8c/4ae0ad17a4e76bab47c487047490061bd49de3.debug：
    文件格式 elf64-x86-64

.comment 部分的内容：
 0000 4743433a 20284465 6269616e 20342e37 GCC：（Debian 4.7
 0010 2e322d35 2920342e 372e3200 .2-5) 4.7.2。    

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T09:58:23.737

为了构建 OpenWRT 工作区，您使用了主 gcc：

```
gcc --version 
```

对于交叉编译，所有需要的工具都位于您的 openwrt 构建目录下。

编译时使用的 gcc 可以在`staging directory`OpenWRT 中找到。转到您的 openwrt 主目录并`toolchain`在暂存目录下查找目录。在这里，您将找到一个`bin`目录，所有交叉编译工具都位于该目录中。例如`ar71xx`：

```
$ ./staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/bin/mips-openwrt-linux-gcc --version
mips-openwrt-linux-gcc (OpenWrt/Linaro GCC 4.6-2013.05 r57678) 4.6.4 
```

# sql - SQLite 查询以匹配列中的文本字符串

> ID：16033395
> 
> 赞同：9
> 
> 时间：2013-04-16T09:29:12.950
> 
> 标签：sql, sqlite

我有一个包含 CSV 格式文本的数据库列。示例单元格如下所示：

```
Audi,Ford,Chevy,BMW,Toyota 
```

我想生成一个与字符串“BMW”匹配的任何列的查询。我怎样才能在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-16T09:33:37.003

您可以使用通配符：`%`

```
select * from table 
where name like '%BMW%' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T09:32:18.700

我想你正在寻找类似的东西

```
SELECT * FROM Table
WHERE Column LIKE '%BMW%' 
```

% 是 LIKE 语句的通配符。

更多信息可以在[这里找到](http://www.w3schools.com/sql/sql_wildcards.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:30:37.780

```
select * from table where name like '%BMW%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:52:19.500

另一种方式...

```
--Create Table 2 :
Create Table #Table1
(
    Roll_No INT, 
    Student_Address Varchar(200)
)
Go

-- Insert Values into #Table1: 
Insert into #Table1 Values ('1','1st Street')
Insert into #Table1 Values ('2','2rd Street')
Insert into #Table1 Values ('3','3rd Street')
Insert into #Table1 Values ('4','4th Road')
Insert into #Table1 Values ('5','5th Street')
Insert into #Table1 Values ('6','6th Street')
Insert into #Table1 Values ('7','7th Street')
Insert into #Table1 Values ('8','8th Wing')

--Query
Select * from #Table1 where CharIndex('Street',Student_Address) > 0

--Clean Up:
Drop table #Table1 
```

# android - Gridview 滚动不起作用（太慢了）

> ID：16033406
> 
> 赞同：0
> 
> 时间：2013-04-16T09:29:59.997
> 
> 标签：android, android-gridview, android-scroll, android-gridlayout

我有一个网格视图，它显示了 SD 卡中的一些图像，它显示正确，但只有当我滚动它时才一次又一次地加载图像，这就是为什么滚动太慢我不知道为什么每次滚动时它都会加载图像（未在屏幕内显示的图像。）

我的代码

```
 // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (c.moveToFirst())
        {
            do 
            {          
                if (convertView == null) 
                {             
                    convertView = mInflater.inflate(R.layout.grid_row_view, null);
                    holder = new ViewHolder();
                    holder.ImgThumb  = (ImageView) convertView.findViewById(R.id.imgThumb);
                    holder.Viewcover = (ImageView) convertView.findViewById(R.id.cover);
                    holder.PdfUrl    = (TextView) convertView.findViewById(R.id.hiddenPdfUrl);
                    convertView.setTag(holder);
                } 
                else 
                {
                    holder = (ViewHolder) convertView.getTag();
                }

                String imagePath = Environment.getExternalStorageDirectory().toString() + "/ICA Faculty/";

                holder.ImgThumb.setImageDrawable(Drawable.createFromPath(imagePath + imgUrl.get(position)));
                holder.Viewcover.setImageResource(R.drawable.book_cover);
                holder.PdfUrl.setText(pdfUrl.get(position));

            }  while (c.moveToNext());
        }

        return convertView;        
    } 

    private class ViewHolder {
        ImageView ImgThumb;
        ImageView Viewcover;
        TextView PdfUrl;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:38:49.260

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    //final boolean result = ( position == 0 ) ? c.moveToFirst() : c.moveToNext();

    if (c.moveToPosition(position))
    {
        if (convertView == null) 
        {             
            convertView = mInflater.inflate(R.layout.grid_row_view, null);
            holder = new ViewHolder();
            holder.ImgThumb  = (ImageView) convertView.findViewById(R.id.imgThumb);
            holder.Viewcover = (ImageView) convertView.findViewById(R.id.cover);
            holder.PdfUrl    = (TextView) convertView.findViewById(R.id.hiddenPdfUrl);
            convertView.setTag(holder);
        } 
        else 
        {
            holder = (ViewHolder) convertView.getTag();
        }

        String imagePath = Environment.getExternalStorageDirectory().toString() + "/ICA Faculty/";

        holder.ImgThumb.setImageDrawable(Drawable.createFromPath(imagePath + imgUrl.get(position)));
        holder.Viewcover.setImageResource(R.drawable.book_cover);
        holder.PdfUrl.setText(pdfUrl.get(position));

    }
    return convertView;
} 
```

`getCount`还有你的适配器返回的内部方法`c.getCount();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:40:08.907

那是因为您正在为每个图像加载**所有**图像......如果您使用光标，请考虑使用 SimpleCursorAdapter。

# php - 如何更改 php.ini 中的设置以在 html 文件中包含 php 脚本？

> ID：16033411
> 
> 赞同：0
> 
> 时间：2013-04-16T09:30:23.280
> 
> 标签：php, html

我需要在我的 html 文件中包含 php 脚本。我联系了我的服务器人员，他们说我需要更改根文件夹中 php.ini 的设置。（godaddy 的服务器）我需要知道我需要在 php.ini 文件中进行的设置，或者如果有其他方法可以这样做，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:33:25.967

他们骗了你。
没有 php.ini 可以帮助您控制 html 文件。这是网络服务器的配置责任。

而且，严格来说，无论如何你都不应该这样做。
PHP 是 PHP 而 HTML 是 HTML。

如果您想在其中使用 PHP，请将您的 html 文件重命名为 php

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:36:41.357

使用以下行创建一个 .htaccess（在根目录中）文件：

```
AddType application/x-httpd-php .html .htm 
```

这使您可以将所有 .html 文件作为 .php 文件运行。

**附言**

许多托管服务提供商使用的大多数共享托管服务都禁用了 CGI。如果是这种情况，您应该要求您的提供商启用它。

# javascript - 需要将字符串数据中的所有超链接更改为另一个值

> ID：16033412
> 
> 赞同：0
> 
> 时间：2013-04-16T09:30:28.423
> 
> 标签：javascript, jquery

我有一个字符串中的链接列表。

```
var data='<ol>
     <li><a href="#/getpage/getData/1">A Christmas Carol</a></li>
     <li><a href="#/getpage/getData/2">Copyright</a></li>    
     </ol>' 
```

需要使用 javascript 或 jquery 将字符串中的所有链接更改为以下格式。

```
data = '<ol>
  <li><a href="getCurrentPage(1)">A Christmas Carol</a></li>
  <li><a href="getCurrentPage(2)">Copyright</a></li>    
  </ol>' 
```

任何人都可以在这方面帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:41:07.533

尝试：

```
var data='<ol><li><a href="#/getpage/getData/1">A Christmas Carol</a></li><li><a href="#/getpage/getData/2">Copyright</a></li></ol>'
var el = $("<div>"+ data + "</div>");
el.find('li').each(function(i) {
    $(this).find('a').attr('href' , "getCurrentPage("+(i+1)+")");
});

data = el.html();
alert(data); 
```

[样品小提琴](http://jsfiddle.net/VhRFD/)

对于未排序的字符串；

```
var data='<ol><li><a href="#/getpage/getData/1">A Christmas Carol</a></li><li><a href="#/getpage/getData/2">Copyright</a></li></ol>'
var el = $("<div>"+ data + "</div>");
el.find('li').each(function(i) {
    var num = $(this).find('a').attr('href').replace('#/getpage/getData/','');
   $(this).find('a').attr('href' , "getCurrentPage("+ num +")");
});
alert(el.html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:46:55.207

我觉得你已经找到了解决办法。只是我花了一些时间在这上面，我想分享我的解决方案。如果您不同意我的解决方案，我不会介意。如果您只看一下解决方案，我一定会很感激。

这是小提琴。[http://jsfiddle.net/ardeezstyle/ARPzA/](http://jsfiddle.net/ardeezstyle/ARPzA/)

```
$('body').append('<div/>').find('div:last').addClass('temp');
$('.temp').html(data);
$('.temp a[href^="#/getpage/getData/"]').each(function(){
    var href = $(this).attr("href");
    var id = href.replace('#/getpage/getData/','');
    $(this).attr('href', 'getCurrentPage(' + id + ')');
});

data=$('.temp').html();

$('.temp').text(data); 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:43:10.863

也许你可以尝试：

```
// use Regex to reformat the data
var myregex = new RegExp('<a href="#/getpage/getData/([0-9]+)">', 'g'); // g means "global", i.e. match all
var formated_data = data.replace(myregex, '<a href="getCurrentPage($1)">') // $1 is replaced by the content of the 1st parenthetis of the regex 
```

这将在 "#/getpage/getData/" + 任何整数形式下找到所有带有 href 的 "a" 标签，并在 "getCurrentPage("+上面的整数+") 形式下用带有 href 的 "a" 标签替换它们”。您也可以只匹配href，而不考虑“a”标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:36:16.413

您好，您可以使用以下脚本。

```
$("a").each(function(){
  var href=$(this).attr("href");
  $(this).attr("href","getCurrentPage("+href.substring(href.lenght-1,href.length)+")");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T10:08:08.187

```
$('a[href^="#/getpage/getData/"]').each(function(){
    var href = $(this).attr("href");
    var id = href.replace('#/getpage/getData/','');
    $(this).attr('href', 'getCurrentPage(' + id + ')');
}); 
```

[你可以在这里](http://jsfiddle.net/jsWMj/1/)试试。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-16T09:35:18.143

使用 javascript 的替换功能，[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

# ios - 在 iOS 设备上滚动时，元素的 z-index 不起作用

> ID：16033416
> 
> 赞同：26
> 
> 时间：2013-04-16T09:30:38.150
> 
> 标签：ios, css, scroll, z-index, css-position

我的布局相当简单，一个重复的背景元素，几个垂直空间（道路）和一些水平的桥梁和一辆小汽车，当你滚动时应该在它们下面行驶。

在我的 Mac 上一切正常，但在 iOS 设备上——我的测试设备是：iOS 6.1 上的 iPhone 4，iOS 6.1.3 上的 iPad 2——`z-index`当滚动事件处于活动状态时，它不会被兑现。

这意味着当您滚动时，前往 的汽车`position: fixed`正在`window`桥上移动（桥的高度`z-index`高于“汽车”），而不是`z-index`使桥变得更高，并且在非 iOS 浏览器上使汽车在桥下行驶。

这似乎是一个简单的分层问题，但即使使用非常简化的测试用例，错误仍然很明显。

**测试用例： http: [//plnkr.co/EAE5AdJqJiuXgSsrfTWH](http://plnkr.co/EAE5AdJqJiuXgSsrfTWH)** *（在 iPad 上全屏查看以避免与演示内容无关的 iframe 滚动问题）*

有谁知道代码有什么问题会导致`z-index`滚动处于活动状态时无法工作？

**注意：**这发生在 Chrome for iOS 和本机 Mobile Safari 上。

* * *

[这是我在上面链接到的简化测试用例](http://plnkr.co/EAE5AdJqJiuXgSsrfTWH)上运行的代码位，以防有人可以在不打开演示的情况下指出修复。

* * *

**HTML：**

```
<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <div class="car"></div>

    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
    <div class="bridge"></div>
    <div class="street"></div>
  </body>

</html> 
```

* * *

CSS：

```
body {
  /* Adds the 'road' as a background image. */
  background: #8BA341 url("http://f.cl.ly/items/1r2g152h2J2g3m1e1V08/road.png") repeat-y top center;
  margin:     0;
  padding:    0;
} 

.car {
  /* The car's position is fixed so that it scrolls along with you. */
  position:   fixed;
  top:        5%;
  left:       52%;
  width:      220px;
  height:     330px;
  background: #BD6C31;
  z-index:    1;
}
.street {
  /* Empty in the example, just used to space things out a bit. */
  position:   relative;
  height:     500px;
}
.bridge {
  /* A bridge crossing the main road. The car should drive under it. */
  position:   relative;
  height:     353px;
  /* Image of repeating road. */
  background: url("http://f.cl.ly/items/0u0p2k3z45242n1w3A0A/bridge-road.png") repeat-x center left;
  /* Higher z-index than car. */
  z-index:    2;
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-08-14T18:58:50.020

我相信经过多次试验和错误后我已经解决了这个问题。我所做的是`webkit transform`在桥上添加一个。这允许正 z-index 数字（汽车在 10，坑洼在 1，桥在 20）：

新的 CSS：

```
.bridge {
  -webkit-transform: translate3d(0,0,0);
} 
```

将翻译添加到不同的桥似乎不仅可以修复之前的闪烁，还可以让您立即滚动而不会有任何延迟。

在[全屏](http://run.plnkr.co/EPrKw1rKqXz2TFY4/)或[完整的 Plunker](http://plnkr.co/edit/Uhy9Srh240MiEOCY4Mwh)中查看。在 iPad iOS 6.0.1 上测试。

# e-commerce - 从 CIM 记录实施 Authorize.net ARB

> ID：16033418
> 
> 赞同：1
> 
> 时间：2013-04-16T09:30:52.157
> 
> 标签：e-commerce, authorize.net, authorize.net-cim, authorize.net-arb

我正在实施一个具有实时支付和定期支付功能的支付系统。

对于我正在使用的即时付款`CIM`，它可以与客户资料、付款资料和运输信息等配合使用。

现在我正在尝试从该 CIM 记录创建一个定期计费计划，而不是`ARB api`再次使用。

是否可以使用通过**编程**而不是从商家帐户手动方式创建的记录来实施`ARB`时间表。`CIM`

 **请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:44:08.090

无法通过 API（如果有的话）从 CIM 配置文件创建订阅 ARB。**

# ios - 如何使用javascript在html中显示从objectiove C接收的参数

> ID：16033421
> 
> 赞同：0
> 
> 时间：2013-04-16T09:30:58.910
> 
> 标签：ios, objective-c, uiwebview

我的javascript方法是从objective c调用的，我试图将从objective接收到的值放在html的文本框中。起初它来了，但随后页面被刷新，文本框失去了价值

```
function square(val)
{
alert('Entered value is ="+val);
document.getElementById('txtshow').value=val; 
}

piece of code written in objective c from where i am calling javascript is-
(i am calling this javascript on button's click)

-(IBAction)btnResultClicked:(id)sender
{
 NSString *function=[NSSTring stringWithhFormat:@"square(%d)",val];
 [webView loadHTMLSt5ring:strFile baseURL:nil];
 [webView stringByEvaluatingJavaScriptFromString:function];
 webView.backgroundColor=[UIColor clearColor];
 [self.view addSubView:webView];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:47:23.090

当您在其上执行 javascript 时，似乎`strFile`尚未加载到 webView，也许您可​​以在 web 视图完成加载后尝试执行 javascript：

```
- (void) webViewDidFinishLoad:(UIWebView *)webView {
    NSString *function=[NSSTring stringWithhFormat:@"square(%d)",val];
    [webView stringByEvaluatingJavaScriptFromString:function];
} 
```

# java - 没有xml的textview可点击

> ID：16033424
> 
> 赞同：1
> 
> 时间：2013-04-16T09:31:08.580
> 
> 标签：java, android, click, textview

我正在尝试使 textview 可点击。我有 50 个文本视图，所以我用 java 代码创建它们。问题是我不知道如何让它们可点击。如果我使用 XMl，那会很容易，因为这个问题被问了很多。

这是我的代码：

```
package com.example.goo;

import android.app.Activity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Calendrier extends Activity implements OnClickListener{

    LinearLayout linear;
    TextView[] textViewArray = new TextView[50];
    TextView[] textViewArray2 = new TextView[50];
    LinearLayout[] layoutArray = new LinearLayout[50];
    ScrollView SV;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        

        SV = new ScrollView(this);          
        linear = new LinearLayout(this);

        //Crée et Affiche les 50 textview sur lesquelles on cliquera
        for (int i = 0; i < 50; i++) {
            textViewArray[i] = new TextView(this);
            textViewArray[i].isClickable();
            textViewArray[i].setText("Journée" + (i+1));
            linear.addView(textViewArray[i]);
        }

        //Création de 50 textview qui seront cette fois ajoutés dans leur layout perso
        for (int i = 0; i < 50; i++) {
            textViewArray2[i] = new TextView(this);
            textViewArray2[i].setText("Journée" + (i+1));
        }

        //Création 50 layout 
        for (int i = 0; i < 50; i++) {
            layoutArray[i] = new LinearLayout(this);
        }

        for (int i = 0; i < 50; i++) {
            layoutArray[i].addView(textViewArray2[i]);
        }

        linear.setOrientation(LinearLayout.VERTICAL);

        SV.addView(linear);
        setContentView(SV);   
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        //What should I do here ?
        //I'd like if I click on the textview n°1, the layout I create before ( layoutArray[i] = new LinearLayout(this); ) appears
        if (dialog == textViewArray[0]){
                System.out.println("this text never prints :( ");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:37:05.133

你忘记

```
textViewArray[i].setOnClickListener(this); 
```

并且，您使用 DialogInterface 中的 OnClickListener。这是错误的。您必须将 View.OnClickListener 与 textview 一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:38:47.197

首先使用 [`View.OnClickListener`](http://developer.android.com/reference/android/view/View.OnClickListener.html)而不是`DialogInterface.OnClickListener`. 然后你可以使用

```
textViewArray[i].setOnClickListener(this); 
```

# android - 如何为android中静态创建的单选按钮编写onclick动作？

> ID：16033425
> 
> 赞同：1
> 
> 时间：2013-04-16T09:31:10.543
> 
> 标签：android

我正在开发 android 测验应用程序。在我的屏幕上，我正在使用下一步按钮显示一个问题和选项（静态 4 个单选按钮）。即，当再次单击下一个按钮时，将显示下一个问题及其选项。其实我有一个字符串

```
 str = |ques1@opid1@option1@opid2@option2@opid3@option3@opid4@opotion4|ques2@opid1@option1@opid2@option2@opid3@option3@opid4@opotion4|ques3@opid1@option1@opid2@option2@opid3@option3@opid4@opotion4 
```

现在我用“|”分割了str数组 并将数据存储到str1中。所以，

str1[1] = ques1@opid1@option1@opid2@option2@opid3@option3@opid4 str1[2] = ques2@opid1@option1@opid2@option2@opid3@option3@opid4 .........

```
Now again I splitted the str1 array with "@" and stored the data in str2.
So,

 str2[0] = ques1
          str2[1] = opid1
    str2[2] = option1
    str2[3] = opid2
    str2[4] = option2
    str2[5] = opid3
    str2[6] = option3
    str2[7] = opid4
    str2[8] = option4

So after getting these values i am setting it to 
tv.setText(str2[0]);
answer1.setText(str2[2]);
answer2.setText(str2[4]);
answer3.setText(str2[6]);
answer4.setText(str2[8]); 
```

然后在下一个按钮单击操作中，我编写了以下代码。

```
int i = 1;
public void next(View v) {

    if (i < str1.length - 1) {
        i++;
        str3 = str1[i].trim().split("[@]");             
        tv.setText(str3[0]);            
        answers.check(-1);
        answer1.setText(str3[2]);
        answer2.setText(str3[4]);
        answer3.setText(str3[6]);
        answer4.setText(str3[8]);       
    } 
```

现在到这里一切都很好。我的下一个要求是获取选定的选项值并将其存储在一个数组中。此外，我需要将选项 id 值设置为选中的单选按钮并再次获取该 id 值。即假设第一个问题我选择了第二个单选按钮，所以我想将该选项 id 设置为 radiobtn.setid(opid2) 并希望获得该选定的单选按钮 id。由于我静态地保留了单选按钮，因此我不知道如何设置和获取单选按钮的 id 以及如何将 onclick 操作写入单选按钮。我正在为此苦苦挣扎。请任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:34:44.477

你可以试试下面的

```
if(rd.isChecked()==true) // rd is the radio button
 {
  String selected =rd.getText().toString();// get the radio button text

 } 
```

要设置 id，您可以使用 rd.setId(intvalue) 并获取 id rd.getId()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:48:51.677

请像这样使用。

```
 if(arg0==btnnext)
    {
    Log.v(TAG+"onClick", "onClick method call");
    //btnback.setVisibility(View.VISIBLE);

    if(rboption1.isChecked())
    {
        Log.v(TAG+".onClick", "option 1 selected");

        check=1;
    }
    else if(rboption2.isChecked())
    {
        Log.v(TAG+".onClick", "option 2 selected");
        check=2;
    }
    else if(rboption3.isChecked())
    {
        Log.v(TAG+".onClick", "option 3 selected");
        check=3;
    }

    else if(rboption4.isChecked())
    {
        Log.v(TAG+".onClick", "option 4 selected");
        check=4;
    }

    else
    {
        Log.v(TAG+".onClick", "No any option is selected");
        check=0;
    }

    if(Integer.parseInt(answer1)==check)
    {
        correctans++;
        Log.v(TAG+"onClick", "Correct answer are:" + correctans);
    }
    else if(check == 0)
    {
        unattempted++;
        Log.v(TAG+"onClick", "unattempted questions:" + unattempted);

    }
    else 
    {
        incorrectans++;
        Log.v(TAG+"onClick", "Wrong answer are:" + incorrectans);
    }

    atempted= correctans+incorrectans;
    attemptedquestions.setText("Attempted : "+atempted);
    // insert into table where that select the 

    index++;

    if(i++ < (list1.size()-1))
    {
        questionanswerbean=list1.get(i);
        Question=questionanswerbean.getQuestion_text();
        Option1=questionanswerbean.getAnswer_choice_1();
        Option2=questionanswerbean.getAnswer_choice_2();
        Option3=questionanswerbean.getAnswer_choice_3();
        Option4=questionanswerbean.getAnswer_choice_4();
            Log.v(TAG+".Oncraete", "Viewing Question ->" + Question);
            Log.v(TAG+".Oncraete", "Viewing Option1 ->" + Option1);
            Log.v(TAG+".Oncraete", "Viewing Option2 ->" + Option2);
            Log.v(TAG+".Oncraete", "Viewing Option3 ->" + Option3);
            Log.v(TAG+".Oncraete", "Viewing Option4 ->" + Option4);

               if ((Question != null) && !Question.trim().equals("")) {
                    question.setText("Question: " +index +":     " + Question.trim());
                }

                if ((Option1 != null) && !Option1.trim().equals("")) {

                    rboption1.setText(Option1.trim());
                }

                if ((Option2 != null) && !Option2.trim().equals("")) {

                    rboption2.setText(Option2.trim());
                }

                if ((Option3 != null) && !Option3.trim().equals("")) {

                    rboption3.setText(Option3.trim());
                }
                if ((Option4 != null) && !Option4.trim().equals("")) {

                    rboption4.setText(Option4.trim());
                }   

                radiogroup.clearCheck();

            } 
```

# c# - 从文件夹中选择图像，然后将其显示在选择列表中或仅显示

> ID：16033427
> 
> 赞同：1
> 
> 时间：2013-04-16T09:31:17.067
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

大家好，我在这方面真的很新！

我已经被困在这里很长时间了。请我真的需要你的帮助。谢谢！

我的问题是。如何将我的所有图像显示到 MVC 中的选择列表或下拉列表中，然后将其发布到网站上？我有一个带有 PicID、PicTitle 等的数据库。

我想显示或显示该文件夹中的图像，然后可以选择一张图片，然后将其显示在视图中。

在我的创建视图中，我有：

```
<h2>Create</h2> 
```

@using (Html.BeginForm()) { @Html.ValidationSummary(true)

```
<fieldset>
    <legend>Picture</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.PicTitle)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PicTitle)
        @Html.ValidationMessageFor(model => model.PicTitle)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PicUrl)
    </div>
    <div class="editor-field">
        @Html.Action(Model.PicID)
        @Html.ValidationMessageFor(model => model.PicID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PicAltText)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PicAltText)
        @Html.ValidationMessageFor(model => model.PicAltText)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PicDesc)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PicDesc)
        @Html.ValidationMessageFor(model => model.PicDesc)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PicPrio)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PicPrio)
        @Html.ValidationMessageFor(model => model.PicPrio)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.CatID, "Category")
    </div>
    <div class="editor-field">
        @Html.DropDownList("CatID", String.Empty)
        @Html.ValidationMessageFor(model => model.CatID)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

在我的控制器中：

```
 public ActionResult Create()
    {
        ViewBag.CatID = new SelectList(db.Categories, "CatID", "CatName");
        return View();
    }

    //
    // POST: /Picture/Create

    [HttpPost]
    public ActionResult Create(Picture picture, HttpPostedFileBase file)
    {
        if (file != null && file.ContentLength > 0)
        {
            var FileName = string.Format("{0}.{1}", Guid.NewGuid(), file.ContentType);
            var path = Path.Combine(Server.MapPath("~/Images_upload"), FileName);
            file.SaveAs(path);
        }
        if (ModelState.IsValid)
        {
            db.Pictures.AddObject(picture);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.CategoryID = new SelectList(db.Pictures, "PicID", "PicTitle", picture.PicID);
        return View(picture);
    } 
```

请帮助我并感谢所有人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:13:28.217

1) 更改 SQL 表以存储图像的路径：

![在此处输入图像描述](https://i.stack.imgur.com/ELR1w.jpg)

2）创建一个**模型**，您可以在 SQL 中从图片表中检索数据并填充一个`SelectList`属性（这将用于在下拉列表中显示您的图像）

```
public class Image
{
    public SelectList ImageList { get; set; }

    public Image()
    {
        ImageList = GetImages();
    }

    public SelectList GetImages()
    {
        var list = new List<SelectListItem>();
        string connection = ConfigurationManager.ConnectionStrings["imageConnection"].ConnectionString;

        using (var con = new SqlConnection(connection))
        {
            con.Open();
            using (var command = new SqlCommand("SELECT * FROM Picture", con))
            {
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    string title = reader[1] as string;
                    string imagePath = reader[2] as string;
                    list.Add(new SelectListItem() { Text = title, Value = imagePath });
                }
            }
            con.Close();
        }
        return new SelectList(list,"Value","Text");
    }
} 
```

3)**控制器**：

```
public class ImagesController : Controller
{
    public ViewResult ShowImages()
    {
        Image image = new Image();
        return View(image);
    }
} 
```

4）**查看**：

```
@model MvcApplication1.Models.Image

@{
    ViewBag.Title = "Images";
}

<script src="../../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#ImageList").change(function () {
            var imagePath = $("#ImageList").val();
            $("#image").attr('src', imagePath)
        });
        $("#ImageList").trigger('change');
    });
</script>
@Html.DropDownList("ImageList")
<img alt="image" id="image" style="width:200px;height:200px;" /> 
```

**输出：**

![在此处输入图像描述](https://i.stack.imgur.com/C3iMP.jpg)

如果您没有正确理解，我已经在[Google Drive](https://docs.google.com/file/d/0B0iPiW5jXDdPNmxITEJQRG1zTjg/edit?usp=sharing)上上传了一个示例项目（只需单击文件->下载）

# c - printf中变量的递增和递减

> ID：16033433
> 
> 赞同：1
> 
> 时间：2013-04-16T09:31:37.027
> 
> 标签：c

我写了一个简单的程序，`int a = 10`我期待的 o/p 是`10 9 9`

```
 printf("a++:%d \t a:%d \t --a: %d \n", a++, a, --a); 
```

但是得到的o/p是`9 10 10`

我写了另一个类似的 printf`printf(" a:%d \t --a: %d \n", a, --a);`

我得到的 o/p 是`9 9`

谁能解释一下这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:34:34.707

您正在经历*未定义的行为*，因为有多个具有副作用的表达式，中间没有[序列点](http://en.wikipedia.org/wiki/Sequence_point)。

无法保证评估函数参数的顺序，因此无法在这里“期望”某些东西（除非您编写了编译器）。

# embedded - 如何从源代码安装 cmake 但没有 GUI(X11)

> ID：16033436
> 
> 赞同：1
> 
> 时间：2013-04-16T09:31:51.557
> 
> 标签：embedded, cmake

我想在嵌入式系统中构建一些包（我不需要 GUI）。它缺乏内存，所以没有GUI。但是，一些使用 cmake 的软件包。而cmake强迫我使用X11。我不需要QT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:47:20.543

当您`cmake`为构建配置的源树时，您是否尝试过使用：

```
./configure --no-qt-gui 
```

. 这个对我有用。

# javascript - 将 `enter` 选择合并到 `update` 选择中

> ID：16033438
> 
> 赞同：5
> 
> 时间：2013-04-16T09:32:02.567
> 
> 标签：javascript, d3.js

[D3 文档](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)说：

> 当您追加或插入时，输入选择会合并到更新选择中。这种方法减少了输入和更新之间的代码重复。您现在可以在输入节点后将它们应用于更新选择，而不是将运算符分别应用于输入和更新选择。在极少数情况下，您只想在更新节点上运行运算符，您可以在输入新节点之前在更新选择上运行它们。

我不明白第一句话中短语的含义`merge into`。有人可以解释一下吗？（也许我错过了与一些标准数据库术语的联系？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:41:38.783

这意味着在您对选择应用`append`or`insert`操作后`enter`，其元素将成为`update`选择的一部分。也就是说，您增加了`update`选择的大小。正如文档所说，这样做的目的是减少代码重复。添加新元素后，必须设置各种属性（例如大小、颜色、位置）。必须为在许多情况下更新的元素设置相同的属性，并且可以使用相同的代码。

等效的数据库将从不同的表 (`enter`和`update`) 中选择行，然后对从中选择的行应用一些操作以`enter`将它们添加到`update`. 这个类比并不完全有效，但它可以帮助你理解发生了什么。

# javascript - Javascript Navigator OSCPU 未定义

> ID：16033445
> 
> 赞同：3
> 
> 时间：2013-04-16T09:32:09.463
> 
> 标签：javascript, internet-explorer, navigator

导航器的 oscpu 属性在 XP IE7 和 WIN7 IE9 机器上抛出 undefined。其他属性，如`platform`etc 工作正常。

```
 alert(navigator.oscpu); 
```

我想知道 Javascript 如何识别 Windows 的版本（Windows Xp、7 或 8）

有人可以帮忙吗？

**编辑：**

得到了答案

`navigator.appVersion`返回这样的东西......

4.0（兼容；MSIE 7.0；MSBrowserIE7；**Windows NT 5.1**；.NET CLR 1.0.3705；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；MS- RTC LM 8；.NET4.0C；.NET4.0E；dmx:m；mty:p；slx:mi.by.as；ssx:NonCitrix)

所以在这个

**Windows NT 5.1**表示**Windows XP**。如果是**Windows NT 6.1**，则意味着**Windows 7** ；如果是**Windows NT 6.2**，则意味着**Windows 8**等。

希望这可以帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:42:20.950

在 Internet Explorer 中，使用：

```
alert(navigator.cpuClass); // CPU info
alert(navigator.platform); // Operating System 
```

它不是标准的一部分，我们不应该依赖它。

参考：

1.  [http://help.dottoro.com/ljlhiaix.php](http://help.dottoro.com/ljlhiaix.php)
2.  [MDN 上的 window.navigator.oscpu](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.oscpu)

# sql-server - SQL Server - 在一列上的 GROUP BY

> ID：16033448
> 
> 赞同：19
> 
> 时间：2013-04-16T09:32:17.137
> 
> 标签：sql-server, group-by

我正在尝试从订单视图中获取订单。在我看来，我确实有一些具有完全相同值的行，但我想将这些值分组到 orderid 上并取该订单数量的总和。

我的视图结果如下：

```
 Order_id   Customer_id   Article_id   Delivery_date   Quantity
 ---------------------------------------------------------------------------
 PR10.001   11            20.001a      17-04-2013      1
 PR10.001   11            20.001a      17-04-2013      1
 PR10.001   11            20.001a      17-04-2013      1
 PR13.001   15            41.022b      19-04-2013      1
 PR13.001   15            41.022b      19-04-2013      1 
```

我想做类似的事情：

```
SELECT Order_id, Customer_id Article_id, Delivery_date, sum(Quantity)
FROM Orders
GROUP BY Order_id 
```

得到类似的东西：

```
 Order_id   Customer_id   Article_id   Delivery_date   Quantity
 ---------------------------------------------------------------------------
 PR10.001   11            20.001a      17-04-2013      3
 PR13.001   15            41.022b      19-04-2013      2 
```

但我知道不可能按一列分组，否则您会收到以下消息：

> [...] 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

是否有另一种可能性或解决方法可以按 SQL Server 中的一个特定列进行分组？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-16T09:38:57.417

您可以使用[`CTE`](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)with [`SUM(Quantity)OVER(PARTITION BY Order_id)`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)+[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)从订单组中选择所需的行：

```
WITH cte 
     AS (SELECT order_id, 
                customer_id, 
                article_id, 
                delivery_date, 
                quantity=Sum(quantity) 
                           OVER( 
                             partition BY order_id), 
                rn = Row_number() 
                       OVER( 
                         partition BY order_id 
                         ORDER BY delivery_date ASC) 
         FROM   orders) 
SELECT order_id, 
       customer_id, 
       article_id, 
       delivery_date, 
       quantity 
FROM   cte 
WHERE  rn = 1 
```

[**演示**](http://sqlfiddle.com/#!3/c0c82/2/0)

~~但是，您想要的结果似乎不正确~~（问题已编辑）

这是我的结果：

```
ORDER_ID    CUSTOMER_ID ARTICLE_ID  DELIVERY_DATE   QUANTITY
PR10.001    11          20.001a         17-04-2013  3
PR13.001    15          41.022b         19-04-2013  2 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T09:38:05.730

假设其他列在功能上依赖于分组列，最简单的答案是

一个。也按其他列分组：

```
SELECT Order_id, Customer_id, Article_id, Delivery_date, sum(Quantity)
FROM Orders
GROUP BY Order_id, Customer_id, Article_id, Delivery_date 
```

或者

湾。使用聚合函数，例如`max`：

```
SELECT Order_id, max(Customer_id), max(Article_id), max(Delivery_date), sum(Quantity)
FROM Orders
GROUP BY Order_id 
```

我个人的偏好是第二种方法，因为我认为它比第一种更清楚地表明分组实际需要哪些项目，而不是仅仅对哪些项目进行分组以解决未分组/未聚合的列问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:05:07.440

I have used similar kind of table as yours. names would be different jsu to test it fast. Please refer to the following query. Modify names as you require.

```
select ordid,customerid,articleid,SUM(cast(quantity as numeric)) quantity from test_stack group by ordid,customerid,articleid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:48:45.823

在您的场景中，对具有不同 Article_id 的 Order_id 进行分组似乎不正确。您的预期结果似乎是错误的。它应该是：

PR10.001 有两个 Article_id 20.001a、41.022b 和总量 4（不是 3）

您是否期望获得每个 Order_id 的总数量但也保留不同的列，然后您需要决定预期结果？就像是：

```
 Order_id   Customer_id   Article_id            Delivery_date   Quantity
 ---------------------------------------------------------------------------
 PR10.001   11            20.001a, 41.022b      17-04-2013      4
 PR13.001   15            41.022b               19-04-2013      2 
```

# ruby-on-rails - rails迁移一一

> ID：16033451
> 
> 赞同：3
> 
> 时间：2013-04-16T09:32:22.820
> 
> 标签：ruby-on-rails, ruby, migration

是否有可能一次运行一个迁移？

我有一堆迁移文件，整个迁移在我的本地机器（使用 PostgreSQL）上运行没有问题。

当我部署（服务器使用 MySQL）时，整个迁移没有成功。

因此，我想重置数据库并一一运行迁移，以查看不一致出现的位置。

PS问题似乎与复数有关：脚本无法从表NNN中删除列**order_id**，实际上包含**order_id**列。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T10:01:09.410

Rails 3.0 引入`rake db:forward`了接受`STEP`参数：

```
rake db:forward STEP=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:07:36.190

通过传递`STEP=number`参数可以一个一个地运行迁移。

```
rake db:forward STEP=1 # edited as per Stefan's suggestion
rake db:rollback STEP=1 
```

# jsf - 使用 Richfaces 3.3.3 Final 的 IE9 中的 Ajax 请求问题

> ID：16033452
> 
> 赞同：4
> 
> 时间：2013-04-16T09:32:32.327
> 
> 标签：jsf, richfaces

我使用的是richfaces 3.3.3 Final和JSF 2.0，有时任何ajax请求都会出现脚本错误

" SCRIPT87：无效参数。

3_3_3.Finalorg.ajax4jsf.javascript.AjaxScript，第 143 行字符 96"

它只出现在 IE 9 中。刷新页面后它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:59:04.860

暂时我通过替换以下行来解决问题。它工作正常。

在 richfaces-impl.jar 中找到文件 AJAX.js

位置：/org/ajax4jsf/javascript/scripts/AJAX.js

行号 1398

```
 oldnode.outerHTML = new XMLSerializer().serializeToString(newnode); 
```

并将其替换为

```
 if (typeof window.XMLSerializer != "undefined") 
   {
      oldnode.outerHTML = new XMLSerializer().serializeToString(newnode);
   } 
   else if (typeof xmlNode.xml != "undefined") 
   {
      oldnode.outerHTML = xmlNode.xml;
   } 
```

行号 1627

```
 dst.setAttribute(attr,value); 
```

并通过添加 try, catch 替换

```
try 
{
        dst.setAttribute(attr, value);
    }
catch (err) 
{
        //alert('Error');
    } 
```

（或者）

制作 AJAX.js 文件的副本并修改上述行并将此文件包含到您的主页中，以替换旧文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:32:55.270

RichFaces 3.x 不支持 IE9。有关更多详细信息，请参阅此答案： [https ://stackoverflow.com/a/7326359/854386](https://stackoverflow.com/a/7326359/854386)

# java - 如何映射表的类（@ManyToMany）之间的关系

> ID：16033461
> 
> 赞同：1
> 
> 时间：2013-04-16T09:32:49.653
> 
> 标签：java, hibernate, jpa, orm, hibernate-annotations

如何为唯一表映射三个类@ManyToMany 单向之间的关系？

关系是这样的：

*   项目有很多任务
*   许多任务有许多特定的活动（标准） - 每个任务都有许多特定的活动
*   任务和活动是数据库的标准配置。

所以，当我创建一个项目时，我会选择一些任务和一些任务的活动。

我想像这样创建一个表（project_task_activity_map）：

```
 project_id     task_id    activity_id
    1            2           3
    1            2           4
    2            1           2
    2            1           1
    2            2           3
    2            3           5 
```

如何映射类 Project ？

参考链接：

[见订单表](http://www.solarisedesign.co.uk/multiple-tables-with-unique-ids-mysql-joins-and-normalization/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:49:59.107

我认为层次结构喜欢

项目 | 任务 | 活动

项目与活动之间没有直接关系。

最好为任务和活动创建多对多表，仅将项目保持为主。总共 4 个表 - 项目 - 任务 - 活动 - TaskActivityMapping

第四个表将由 Hibernate 通过 Embadable 映射 Task 和 Activity 创建。

# iphone - 安全警告：“请将上面的 URL 视为您的密码，不要与任何人共享。在 ios

> ID：16033462
> 
> 赞同：1
> 
> 时间：2013-04-16T09:32:52.893
> 
> 标签：iphone, ios, facebook, facebook-graph-api, social-networking

我正在开发包含 facebook 登录的应用程序。使用 Facebook 登录后，我需要转到本机应用程序和应用程序应该显示 Facebook 中存在的用户名和图像。但是当我使用 facebook 登录时，它显示“安全警告:"请把上面的网址当作您的密码对待，不要与任何人分享。在 ios 中”，& 没有回到我的原生应用程序。任何人都可以解决这个问题。我正在使用 Facebook Graph api 来处理 Facebook 问题。

在 AppDelegate 中：

```
-(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{ 
  return [[_viewController facebook] handleOpenURL:url]; 
}
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation { 
  return [[_viewController facebook] handleOpenURL:url]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:07:02.997

我的 ios 应用程序遇到了同样的问题，这就是我为解决问题所做的工作。我在我的应用程序中找到了以下 url，并将连接从 http 更改为 https。

较早的网址： http: [//www.facebook.com/connect/login_success.html](http://www.facebook.com/connect/login_success.html)

更改网址：[https ://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T13:45:26.127

根据 Zack24 于 4 月 24 日解决。

这是我的 webView loadRequest URL。请注意 redirect_uri 的 https。

[https://graph.facebook.com/oauth/authorize?client_id=147261088671924&redirect_uri=https://www.facebook.com/connect/login_success.html&display=touch&type=user_agent&scope=read_stream,publish_stream](https://graph.facebook.com/oauth/authorize?client_id=147261088671924&redirect_uri=https://www.facebook.com/connect/login_success.html&display=touch&type=user_agent&scope=read_stream,publish_stream)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T09:44:00.310

我找到了一种解决方案。我希望它对你有用。

只需将此 UIWebViewDelegate 方法粘贴到您的 FbGraph.m 文件中......

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if([request.URL.relativeString hasPrefix:@"https://www.facebook.com/connect/login_success.html" ])
        self.webView.hidden=TRUE;
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T10:35:20.160

除了实施：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation` 
```

您必须将`URL Types > URL Schemes`值添加到您的应用程序列表中：您的应用程序 ID`fb1234567890`在哪里。`1234567890`

请参阅第 5 项：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

# ruby-on-rails - 在 Rails 中查询多级关联

> ID：16033463
> 
> 赞同：0
> 
> 时间：2013-04-16T09:32:59.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有如下关联：位置类

```
class Location < ActiveRecord::Base
  has_many :items
end 
```

物品类别

```
class Item < ActiveRecord::Base
  belongs_to :location
  belongs_to :category
end 
```

类别类

```
class category < ActiveRecord::Base
  has_many :items
end 
```

现在我想查询 Location.categories （显示所有类别的位置项目）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:40:10.190

它应该像这样简单：

```
class Location < ActiveRecord::Base
  has_many :items
  has_many :categories, :through => :items
end 
```

# c - snprintf - 安全风险

> ID：16033468
> 
> 赞同：1
> 
> 时间：2013-04-16T09:33:08.610
> 
> 标签：c, linux, security, posix, printf

[unwind](https://stackoverflow.com/users/28169/unwind)对[我上一个问题](https://stackoverflow.com/questions/16011359/snprintf-format-not-a-string-literal-and-no-format-arguments-warning)的回答引出了另一个问题。我曾经问过关于

```
const char *INTERFACE        = "wlan0";
struct ifreq ifr;
memset(&ifr, 0, sizeof(ifr));
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), INTERFACE); 
```

[放松](https://stackoverflow.com/users/28169/unwind)回复为

> 值得警告，因为它可能存在安全风险，如果字符串参数在运行时可更改，则 % 可能会“潜入”，这将导致问题。因此，最好将格式化字符串硬编码为“做你想做的事”。

我想知道如何在运行时更改字符串参数？

编辑：为了更清楚，谁能给我一个例子如何在运行时更改字符串参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:40:49.270

`unwind`无疑是指`INTERFACE`变量。

如果出于某种原因您询问用户他们应该使用哪个界面（使用类似`fscanf()`可写缓冲区之类的东西）并且他们进入`"wlan0 %s"`，那么所有的地狱都可能会崩溃，因为您会遇到有效执行的情况：

```
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), "wlan0 %s"); 
```

*没有*与`%s`格式字符串中的相对应的额外参数。

防止这种情况的方法是使用：

```
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), "%s", INTERFACE); 
```

因此，篡夺`INTERFACE`者除了更改放入的内容外，不会对该声明产生任何影响`ifr.ifr_name`。

在您的特定情况下：

```
#include <stdio.h>
#include <net/if.h>
#include <string.h>

int main(int argc,char *argv[]){
    const char *INTERFACE        = "wlan0";
    struct ifreq ifr;

    memset(&ifr, 0, sizeof(ifr));
    snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), INTERFACE);

  return 0;
} 
```

你仍然完全可以控制，`INTERFACE`所以没有危险，但编译器没有进行那种级别的分析——它只知道非文字格式的字符串是一种风险。

# ios - 在一个 UIView 中选择多个 UITableView 中的行

> ID：16033472
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:33:12.880
> 
> 标签：ios, xcode, uitableview

我有多个`UITableview`s 合二为一`UIView`。

我怎样才能实现以下目标：

> 如果在一个表中选择了一行，那么其他表中的行也将被选中。

这会进入`didSelectRowAtIndexPath`方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:40:42.677

那么在委托本身返回执行操作的表视图引用所以检查设置表视图的出口并比较以查找哪个表视图已执行操作

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

这`tableView`是发生动作的表

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T09:37:21.457

只需使用 tableView 参数：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

所以，你只需要比较 tableView 变量：

```
if (tableView == self.tableView1)
...
else if (tableView == self.tableView2)
... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T09:43:55.330

我可能会误解这个问题，因为关于找出使用哪个表视图有三个答案。但是您想要的是在所有表格视图中选择同一行，不是吗？然后使用：

`– selectRowAtIndexPath:animated:scrollPosition:`.

对于您的所有表格视图`didSelectRow:atIndexPath:`

# perl - 如何使用 for...each 循环重置多个 Perl 哈希？

> ID：16033479
> 
> 赞同：3
> 
> 时间：2013-04-16T09:33:42.380
> 
> 标签：perl

我需要在 mod_perl 脚本中重置一些全局哈希变量。

这有效 - 如此处所述：[https ://stackoverflow.com/a/4090870](https://stackoverflow.com/a/4090870)

```
$_ = '' for ($a, $b, $c);
$_ = 0 for ($d, $e, $f); 
```

这似乎不起作用：

```
$_ = () for (%a, %b, %c); 
```

为什么它不适用于哈希？可以做到吗？数组呢？

（我通常会尝试对变量进行作用域，所以上述内容不是必需的，但在这种情况下，恐怕它必须是这样的。另外，我可能对 for...each 循环如何工作有一些基本的了解Perl，请赐教。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:37:41.090

你可以通过参考来做到这一点：

```
%$_ = () for (\%a, \%b, \%c); 
```

但这并不能回答您关于为什么没有参考就无法工作的问题：

将散列放入您的`for (%h)`-statement 时，散列会在*list context 中*隐式评估。

（编辑：我最初说的是标量上下文，后来意识到它是列表上下文并改编了答案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T21:41:59.680

你做的工作比你必须做的多。无需循环变量。

```
$_ = '' for ($a, $b, $c);
$_ = 0 for ($d, $e, $f); 
```

```
($a,$b,$c) = ('') x 3; # ... = ('','','')
($d,$e,$f) = (0) x 3; # ... = (0,0,0) 
```

当然，如果您想将它们设置为[`undef`](http://perldoc.perl.org/functions/undef.html "perldoc -f undef")

```
($a,$b,$c) = (); # set them to undef 
```

循环变量的唯一原因是，如果您是在代表其他范围的子例程中执行此操作。

```
sub fill{
  my $fill = shift;
  $_ = $fill for @_;
  return;
}

{
  fill( 0, my($d,$e,$f) ); # my($d,$e,$f) = (0) x 3;
} 
```

* * *

类似地，而不是通过哈希引用列表：

```
%$_ = () for \(%a, %b, %c);
# or
%$_ = () for (\%a, \%b, \%c); 
```

只需将它们设置为空列表即可。

```
(%a,%b,%c) = (); 
```

* * *

如果您正确设置变量的范围，您应该很少需要这样做。

```
my(%a,%b,%c); # <== wrong

sub exmpl{
  (%a,%b,%c) = (); # <==

  # do something with them
  ...
} 
```

```
sub exmpl{
  my (%a,%b,%c); # <== correct

  # do something with them
  ...
} 
```

# android - Gcm 没有被接收

> ID：16033480
> 
> 赞同：1
> 
> 时间：2013-04-16T09:33:43.847
> 
> 标签：android

我正在开发一个使用 Google Cloud Messaging 使用推送通知来通知 android 应用程序的项目。我已经用 PHP 实现了应用程序服务器。当我运行 android 应用程序时，设备从 GCM 服务器获取注册 ID，并将注册 ID 发送到 PHP 服务器（应用程序服务器）。但我从服务器得到以下 httpresponse ：

```
{
    "multicast_id": 7015234441922271670,
    "success": 1,
    "failure": 0,
    "canonical_ids": 0,
    "results": [{
        "message_id": "0:1344007383866721%2adac3a0ad8b3148"
    }]
} 
```

但消息未传递到设备。任何建议请。

如果有人有上述问题，请检查下面它可能对你有帮助

最后我找到了解决方案在服务器端，只要应用程序表现良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。

GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。

如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T12:02:10.710

如果有人有上述问题，请检查下面它可能对你有帮助

最后我找到了解决方案在服务器端，只要应用程序表现良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。

GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。

如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:44:13.517

这可以帮助您[PushNotification](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)使用您的包名 检查您`Androidmanifest.xml`的 GCM 通知

```
 <uses-permission android:name="yourpackege.permission.C2D_MESSAGE" />

    <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="yourpackege" />
            </intent-filter>
        </receiver> 
```

# iphone - 我正在使用“DrawLinearGradient”函数绘制渐变线。但是我使用的 2 种颜色并没有在一条线上平均划分

> ID：16033481
> 
> 赞同：0
> 
> 时间：2013-04-16T09:33:45.320
> 
> 标签：iphone, ios, xamarin.ios

我正在使用“DrawLinearGradient”函数绘制渐变线。但是我使用的 2 种颜色并没有在一条线上平均划分。

```
CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB();
CGColor[] colors = {UIColor.Red.CGColor,UIColor.Green.CGColor};
float[] locations = {0.0f,0.5f,0.5f,1.0f};

CGGradient gradient = new CGGradient(colorSpace,colors,locations);
ColorMessage.FontSize = width;
context.SetLineWidth(width);
context.SaveState();
context.Clip();

context.DrawLinearGradient(gradient,penVertices[0],penVertices[count-1],0);

context.StrokePath();
gradient.Dispose();
colorSpace.Dispose();
context.RestoreState(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:07:40.597

我假设 Mono 实现与原始 C 实现具有相同的要求。

从`CGGradientCreateWithColors(colorSpace, colors, locations[])`（应该对应`new CGGradient(colorSpace,colors,locations);`于 Mono）的文档中，您可以阅读

> 数组应包含与`locations`数组相同数量的项目`colors`。

但是，在您的代码中，您传递*了两种*颜色但*有四个*位置。

既然您说的是“在直线上平均分配”，您可能应该将两种颜色重复两次。

```
CGColor[] colors = {UIColor.Red.CGColor, UIColor.Red.CGColor, UIColor.Green.CGColor ,UIColor.Green.CGColor};
float[] locations = {0.0f,0.5f,0.5f,1.0f}; 
```

# jquery - Microsoft JScript 运行时错误：选项卡小部件实例没有此类方法“选择”

> ID：16033490
> 
> 赞同：17
> 
> 时间：2013-04-16T09:34:12.517
> 
> 标签：jquery, jquery-ui, jquery-tabs

我需要在单击 html 按钮时为 jquery 选项卡**选择特定的选项卡功能。**我正在使用`jquery.1.9.1.js`和`jquery-ui-1.10.2.custom.js`归档。我已经实现了下面的代码，但对我不起作用。

```
<script language="javascript" type="text/javascript">
 $("#ui-tabs").tabs();
 function SelectTab() { // bind click event to link
                 $('#ui-tabs').tabs('select', 2); // switch to third tab
                 return false;
             }
 </script>
<div id="ui-tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">Tab1 content </div>
<div id="tabs-2">Tab2 content </div>
<div id="tabs-3">Tab3 content </div>
</div><a id="next" class="button-style" href="#" onclick="return SelectTab();">Select Tab</a> 
```

`$('#ui-tabs').tabs('select', 2);`问题是函数中的语句`SelectTab`给了我错误`Microsoft JScript runtime error: no such method 'select' for tabs widget instance`。单击它们时正常选择选项卡工作正常。但是从函数调用完成时它不起作用。实施中出了什么问题或是否缺少任何文件？请建议。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-16T09:55:35.330

此版本中没有`select`jQuery UI 选项卡的方法。要使您的功能正常工作，您需要将代码更改为；

```
$('#ui-tabs').tabs( "option", "active", 2 ); 
```

请阅读[http://api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active)了解更多信息。

```
// getter
var active = $( ".selector" ).tabs( "option", "active" );

// setter
$( ".selector" ).tabs( "option", "active", 1 ); 
```

查看这个小[jsFiddle](http://jsfiddle.net/sFhpU/)以了解它的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T17:23:07.287

如果您想创建单独的链接以打开您网站上的标签，您可以使用下面的函数并调用它

```
<div onclick="changeToTab(targetTabNumber)"> mylinkText </div>

function changeToTab(ID){
    var $tabs = $('#tabs').tabs();
    $tabs.tabs( "option", "active", ID );
    return false;
} 
```

第一个目标地址为 0，第二个目标地址为 1，依此类推。当然，div 可以是任何允许 onclick 的东西。

# c++ - 可生成 xml 输出的 unix 上 c++ 的代码复杂性分析

> ID：16033491
> 
> 赞同：1
> 
> 时间：2013-04-16T09:34:15.400
> 
> 标签：c++, c, xml, unix, complexity-theory

我正在寻找可以在 unix 上运行并以 xml 文件形式生成输出的 c++ 代码复杂性分析工具。像这样的东西：http: [//www.blunck.info/ccm.html](http://www.blunck.info/ccm.html) 这个工具适用于windows，但我需要在unix上运行的东西。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:50:18.303

你可以试试 pmccabe ( [http://parisc-linux.org/~bame/pmccabe/](http://parisc-linux.org/~bame/pmccabe/) )。它在预处理之前对代码进行操作 - 因此可能无法始终正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:28:42.957

您实际上也可以在 Unix 上运行 ccm 二进制文件。你只需要安装[mono](http://www.go-mono.com/mono-downloads/download.html)，然后像这样调用 ccm ：

```
mono ./CCM.exe <config details> 
```

但是，您必须从 Windows 手动复制 CCM.exe 和 CCMEngine.dll，因为没有单独的包。

[1](http://www.go-mono.com/mono-downloads/download.html) [http://www.blunck.se/ccm.html](http://www.blunck.se/ccm.html)

# activerecord - Yii - Active Record 关系 Has_Many 问题

> ID：16033493
> 
> 赞同：0
> 
> 时间：2013-04-16T09:34:15.623
> 
> 标签：activerecord, yii, has-many

我是 Yii 的新手，在建立 AR 关系时遇到了麻烦。我使用过 Rails Active Record，但无法在 Yii 中设置简单的关系。

恰当的例子是 2 个模型，Business 和 BusinessDescription，其中 1 个 Business 可以有 N 个 BusinessDescriptions。

我将 MySQL 与 MyIsam 引擎一起使用，并在名为 business_id 的 BusinessDescription 中声明了一个 FK。

业务关系：

```
public function relations()
{
    return array(
                 'businessdescription' => array(self::HAS_MANY, 'businessdescription', 'business_id'),
    );
} 
```

业务描述关系：

```
public function relations()
    {
        return array(
                    'business' => array(self::BELONGS_TO, 'business', 'business_id'),
        );
    } 
```

在我的索引操作中的网站控制器中，我正在执行以下操作：

```
$business= Business::model()->findByPk(1);
$b_desc = $business->description;
$test_relation = $business->businessdescription; 
```

这要么给我`Property "Business.description" is not defined.`，要么如果我在业务模型中声明它，就像`public $descriptin`它在我 *var_dump* 时返回 null 一样。

我想要的只是从协会中获取记录。

问候并感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:50:12.487

更正：这必须返回数组

```
foreach($model as $val){
echo $val->attribute;
} 
```

像这样使用：

```
$business= Business::model()->findByPk(1);
$b_desc = $business->businessdescription->description; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:06:58.243

由于`businessdescription`是一个`HAS_MANY`关系，它将返回一个数组，例如：

```
foreach ($business->businessdescription as $bdesc)
{
  echo $bdesc->description;
} 
```

PS：MyIsam 不支持 FK，你应该使用 InnoDB

# ios - 使用 CALayer 显示 CGPaths 会影响 iOS 中的性能吗？

> ID：16033496
> 
> 赞同：0
> 
> 时间：2013-04-16T09:34:17.577
> 
> 标签：ios, uiview, core-animation, calayer

我在 iOS 中使用 CGPath 绘制一些线条、曲线和省略号。我想为线条和曲线的渲染设置动画。

假设我想为视图中的 25 条曲线设置动画。使用 CALayer 为曲线设置动画是可用的最佳解决方案吗？

如果创建 25 层来显示 25 行，会不会对内存造成负担。我假设使用带有填充和描边等方法的贝塞尔路径进行简单绘图比使用 CAlayer 消耗更少的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:48:36.623

从聊天中可以明显看出，OP 希望对路径进行动画处理，就好像它们被绘制一样，而不是对路径如何变化进行动画处理。

我推荐阅读[Ole Begemann 的用 CAShapeLayer 绘制 CGPath 动画，](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer/)它解释了如何做到这一点。简而言之，动画`strokeEnd`形状层的属性。

* * *

从聊天：

> **A：**当您说“我想为线条和曲线的渲染设置动画”时，您的意思是像有人用钢笔画它们一样绘制它们吗？oleb.net/blog/2010/12/…</p>
> 
> **问：**好的，谢谢大卫..我希望它与您发布的链接类似..
> 
> **- 答：**第二个？
> 
> **问：**是的第二个..我希望曲线从开始位置到结束位置都有动画..谢谢你的好意。

# javascript - Rapahel js paper.print() 以百分比形式指定位置

> ID：16033504
> 
> 赞同：0
> 
> 时间：2013-04-16T09:34:44.100
> 
> 标签：javascript, jquery, raphael

我正在使用 raphaeljs 为网站创建 SVG 编辑器，我不能使用以像素为单位的固定位置，因为需要从 iphone、ipad 等访问相同的网页。所以`paper.print(120,120,"Hello","font-name",80);` 不能使用，我需要一些`paper.print("3%","4%","Hello","font-name",80);` 不支持的东西拉斐尔图书馆我想，有什么建议，我怎样才能实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:27:05.070

开始考虑百分比而不是像素。在您“介绍”您的编辑器之前，您需要响应地找到您的编辑器。假设您的编辑器的标准宽度为 400 像素，而您的文本为 420 像素，这两个位置都将距左边距 X 像素。您可以将第一个参数替换为 X +20 值。您需要做的就是确定加载时视口的宽度，以确定跨设备编辑器的第一个参数。这是一个始终适合设备视口（甚至是 iPod）的轮播示例。它使用相同的技术.. [对向量的响应性](http://www.irunmywebsite.com/visualdesign/ffc.php)

# syntax - 如何在 yml 文件中使用内部引用

> ID：16033507
> 
> 赞同：3
> 
> 时间：2013-04-16T09:34:53.633
> 
> 标签：syntax, yaml

我有一个像这样的 yml 文件：

```
jvm_config: 
  tomcat_port: 1066
  jvm_opts: "-Dcom.sun.management.jmxremote.port=10667" 
```

并想拥有这样的东西。

```
jvm_config: 
  tomcat_port: 1066
  jvm_opts: "-Dcom.sun.management.jmxremote.port=${tomcat_port}7" 
```

在 xml 中它可以工作，但如何在 yml 中执行？

# sql - 其中 {table1.field} *= {table2.field} 语法

> ID：16033518
> 
> 赞同：2
> 
> 时间：2013-04-16T09:35:23.900
> 
> 标签：sql, sybase

我刚刚拿起了几周前某人写的一条 SQL 语句（似乎没有人知道是谁）。

作为语句的一部分，在`WHERE`子句中，它们具有以下内容：`{table1.field} *= {table2.samefield}`.

这里到底发生了什么？我假设某种连接，但是什么连接以及为什么，一般来说，为什么有人会把它放在`WHERE`子句中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:39:43.463

这似乎是 Sybase 的外部连接注释：

> 在结果中包括第一个表中的所有行，而不仅仅是连接列匹配的行。

请参阅： [Sybase 文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug145.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:47:07.380

它是 SyBase 连接运算符，相当于更传统的`LEFT OUTER JOIN`（或更常见的`LEFT JOIN`.

参考： [SyBooks Online -`WHERE`子句](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug21.htm)

> *=
> 
> 在结果中包括第一个表中的所有行，而不仅仅是连接列匹配的行。

与`=*`which is a `RIGHT OUTER JOIN`(或更常见的`RIGHT JOIN`) 相反。

# java - 编写 HQL 语句

> ID：16033520
> 
> 赞同：0
> 
> 时间：2013-04-16T09:35:28.933
> 
> 标签：java, hibernate, hql

嗨，我有 3 个表的数据库员工：

```
mysql> describe person;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| person_id  | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| date       | datetime     | YES  |     | NULL    |                |
| first_name | varchar(255) | YES  |     | NULL    |                |
| last_name  | varchar(255) | YES  |     | NULL    |                |
| position   | varchar(255) | YES  |     | NULL    |                |
| salary     | double       | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> describe department;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| department_id | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| dept_name     | varchar(255) | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+

mysql> describe department_person;
+---------------+------------+------+-----+---------+-------+
| Field         | Type       | Null | Key | Default | Extra |
+---------------+------------+------+-----+---------+-------+
| department_id | bigint(20) | NO   | PRI | NULL    |       |
| person_id     | bigint(20) | NO   | PRI | NULL    |       |
+---------------+------------+------+-----+---------+-------+ 
```

我想编写 HQL 语句以使用**person.lastName从****department.dept_name**获取数据。我已经使用以下代码来提取此数据，但没有运气：

 **```
public List<Person> findByDepartment(){
        Session session =
                HiberUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<Person> result = session.createQuery("select d.dept_name from Person p " +
            "join p.Department d where p.id = 'Andreas'").list();
        for(Person a : result) {
            Hibernate.initialize(a.getDepartmentList());
        }
        session.getTransaction().commit();
        return result;

    } 
```

你能帮忙正确地编写 HQL 查询吗？

**UPD**

**人.java**

```
**@ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JoinTable(name = "department_person", joinColumns = { 
        @JoinColumn(name = "person_id", nullable = false, updatable = false) }, 
        inverseJoinColumns = { @JoinColumn(name = "department_id", 
                nullable = false, updatable = false) })
private Set<Department> departmentList = new HashSet<Department>();** 
```

**部门.java**

```
@ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinTable(name = "department_person", joinColumns = { 
            @JoinColumn(name = "department_id", nullable = false, updatable = false) }, 
            inverseJoinColumns = { @JoinColumn(name = "person_id", 
                    nullable = false, updatable = false) })
    private Set<Person> personList; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:59:43.453

此查询应该有效：

```
Query query = getSessionFactory().getCurrentSession().createQuery("SELECT d.personList FROM Department d WHERE d.departmentName = :departmentName");
query.setParameter("departmentName", departmentName);
List<Person> resultList = query.getResultList(); 
```

感谢hibernate，您不需要关心连接表。让我知道它是否不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:03:34.447

首先，您的映射是错误的。你这里有一个多对多的双向关联，所以一方必须是所有者，并使用@JoinTable 定义映射，另一方必须是反方，并使用 mappedBy 属性。如果您希望此人成为所有者，则映射应为：

```
@ManyToMany
@JoinTable(name = "department_person", 
           joinColumns = { @JoinColumn(name = "person_id") }, 
           inverseJoinColumns = { @JoinColumn(name = "department_id") })
private Set<Department> departmentList = new HashSet<Department>();

...

@ManyToMany(mappedBy = "departmentList")
private Set<Person> personList; 
```

请注意 LAZY 是 toMany 关联的默认值，并且 cascade = ALL 对于多对多关联没有多大意义。

那么您必须了解 HQL 使用实体和属性名称，而不是表和列名称。您还必须意识到，如果您选择部门名称，您将获得部门名称列表，而不是人员列表。

因此，如果您想获取给定部门名称的人员列表，您应该使用

```
select distinct p from Person p
join p.departmentList d 
where d.name = :departmentName 
```**

# html - HTML 电子邮件中的内嵌边框样式

> ID：16033521
> 
> 赞同：5
> 
> 时间：2013-04-16T09:35:29.993
> 
> 标签：html, css, html-email

我正在处理响应式 HTML 电子邮件，并且我在 Gmail 中仅在 IE 中出现渲染问题（必须如此！）它在其他 27 个客户端变体中运行良好。我们需要支持

我在这里设置了一个小提琴：http: [//jsfiddle.net/39gzj/](http://jsfiddle.net/39gzj/)

现在，如果您查看代码，您将看到有一个灰色边框，然后包含另一个白色边框。出于某种奇怪的原因，资源管理器中的 Gmail 根本不会显示此边框，除了注册底部底部的边框。我认为这与我对边框进行编码的方式有关（我要关闭其他人的代码，我只对此做了一些小的改动），因为边框已按如下方式完成：

```
border-left-style:solid;border-left-width:1px;border-left-color:#fff; 
```

所以我改变了灰色和白色边界的声明方式如下：

```
border-left-style: 1px solid #fff; 
```

但这没有任何区别。这让我发疯，所以如果可以，请提供帮助。我认为这可能与宽度有关？但是在玩过这个之后，它就解决了所有其他客户端的问题。任何帮助将不胜感激，因为我可能很快就会把头撞到我的电脑屏幕上。

欣赏这段代码包含疯狂的内联样式，但这当然是 HTML 电子邮件的本质。

更新：删除元素上的白色内边框会`<td>`呈现灰色边框。这与我错误地设置宽度有关吗？

更新 2：这是 IE9 中的错误呈现。并且仅适用于 Gmail。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:05:20.517

你的问题是边框在桌子上。您往往会发现电子邮件客户端不喜欢这样。我解决它的方法是在表格中放置表格，有点像这样：

```
<table width="600" cellpadding="0" cellspacing="0" border="0"> 
<tr>
<td width="600" valign="top" align="center" bgcolor="#CCCCCC">
    <img src="spacer.gif" width="1px" height="1px" style="border:0px; display:block;">
    <table width="598" cellpadding="0" cellspacing="0" border="0" bgcolor="#FFFFFF">
    <tr>
    <td width="598" align="left">
    Text Here
    </td>
    </tr>
    </table>
    <img src="spacer.gif" width="1px" height="1px" style="border:0px; display:block;">
</td>
</tr>
</table>
    <br/><br/><br/>
<table width="600" cellpadding="0" cellspacing="1" border="0" bgcolor="#CCCCCC"> 
<tr>
<td width="600" valign="top" align="left" bgcolor="#FFFFFF">
    Text Here
</td>
</tr>
</table> 
```

这是 a: [jsfiddle](http://jsfiddle.net/9P8cj/1/)上的代码 我已经创建了 2 种不同的方法来获得类似的效果。您可以选择最适合自己的一种。

我还看到您使用了一些电子邮件客户端不喜欢的 max-width，这可能是您的问题。这是 css 类的campaignmonitor 指南以及您应该使用和不应该使用的内容：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T17:22:24.817

我在电子邮件中的表格上使用以下内容并且没有问题。

`border-left: 2px #000000 solid;border-right: 2px #000000 solid;`

I've tested in multiple browsers & email clients. Make sure your styles are inline, make sure you haven't got a differing border on any outer tables, as Outlook etc. seem to inherit from the parent `TD`

The problem I had with IE9 and Gmail which stood out to me was that it rendered the responsive version of my email, so check your media queries. The way to solve this is to add CSS so if you have `<td width="600">` you need to make sure it becomes `<td width="600" style="width:600px;">`

# c# - 如何为 .NET 安装吊床 API 库

> ID：16033524
> 
> 赞同：-3
> 
> 时间：2013-04-16T09:35:31.700
> 
> 标签：c#, .net, hammock

我无法在 Visual Studio 中为 .NET 安装吊床 API 库，我已经安装了 NuGet，但不知道如何从下面的位置安装吊床，以便我可以在我的项目中使用它。

```
https://github.com/danielcrenna/hammock 
```

我正在使用视觉工作室 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:47:07.073

在您的解决方案资源管理器中：

参考 -> 管理 Nuget 包

在左侧单击在线。

在右上角，在搜索字段内输入吊床。

点击安装。

# iphone - 如何正确保留对 ActionSheet 委托使用的对象的引用？

> ID：16033526
> 
> 赞同：0
> 
> 时间：2013-04-16T09:35:36.153
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

我经常遇到引用对象的情况。

我必须用 UIActionSheet 询问用户如何处理它。

所以我使用那个动作表，但是在用户点击一行后，我有用户的意愿，但没有引用该对象。

我通常在我的视图控制器中使用一个属性来保持对对象的引用，但我发现这个设计真的很糟糕......

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:57:40.567

您可以使用将您的 UIActionSheet 实例与对象关联`objc_setAssociatedObject`，然后在您的 UIActionSheet 委托方法中检索对象`objc_getAssociatedObject`。

苹果文档：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_getAssociatedObject](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_getAssociatedObject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:49:34.217

我不确定您的实现以及您的对象中有什么样的数据，但您可以使用单例设计模式、创建共享实例并在 UIActionSheet 委托方法中执行任何所需的操作。

# ruby-on-rails - ransack 在搜索查询中指定时区

> ID：16033530
> 
> 赞同：2
> 
> 时间：2013-04-16T09:36:02.233
> 
> 标签：ruby-on-rails, ruby, search, timezone, ransack

我正在尝试找到一种方法，让我可以告诉 ransack 在涉及日期或日期范围的查询中使用特定时区。例如，ransack 默认使用 UTC 进行日期时间搜索，我想使用 PST 时区执行查询，我该怎么做？有任何黑客或配置吗？以下是生成的示例查询。

SELECT DISTINCT "orders".* FROM "orders" LEFT OUTER JOIN "customers" ON "customers"."id" = "orders"."customer_id" LEFT OUTER JOIN "payments" ON "payments"."order_id" = "orders "."id" 左外连接 "order_lines" ON "order_lines"."order_id" = "orders"."id" WHERE "orders"."test_transaction" = 'f' AND (("orders"."created_at" > = '2012-11-03 07:00:00.000000' AND "orders"."created_at" <= '2012-11-05 06:59:59.000000'))

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:34:07.440

不确定 Ransack 的细节，但通常如果您将 UTC 日期存储在数据库中，那么您应该按 UTC 值进行查询。

如果您的查询日期是太平洋时间，则在将它们传递到您的查询之前将它们转换为 UTC。您可以使用诸如[timezone](https://rubygems.org/gems/timezone)、 [TZInfo](http://tzinfo.rubyforge.org/)或[ActiveSupport::TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)之类的 Ruby gem来进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T00:27:19.837

它有点脏但有效

```
current_zone = Time.zone.name # Get default time zone
Time.zone = "UTC" #Change to whatever time zone you want. 
@search = Model.search(params[:q]) 
@objects = @search.result
Time.zone = current_zone #Set default time zone 
```

[在http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local_to_utc](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local_to_utc)检查时区

# jqgrid - 将 JQGrid 中的 Cell 值作为参数传递

> ID：16033531
> 
> 赞同：0
> 
> 时间：2013-04-16T09:36:08.110
> 
> 标签：jqgrid, jqgrid-formatter

我有一个如下的 JQGrid。

```
{ name: 'Name', index: 'Name', align: 'left', title:false },
{ name: 'User', index: 'User', align: 'left', formatter:'showlink', formatoptions:{baseLinkUrl:'/APP/URL.htm', addParam: '&userName=' +100}, title:false }, 
```

最后，我传递了一个数字 100。这是硬编码的。第二行是一个超链接。单击它会重定向到其他页面并传递一个值。但我需要发送名称列中存在的值。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:08:24.647

解决问题的最简单方法是使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)而不是[预定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter#predefined_format_types) `showlink`。

如果您有其中的列，`colModel`那么`name: "Name"`您需要创建与`src`构造的链接，`"/APP/URL.htm?userName=<Name>"`您可以执行以下操作

```
{ name: 'Name', title: false },
{ name: 'User', title: false,
    formatter: function (cellvalue, options, rowObject) {
        return '<a src="/APP/URL.htm?userName=' + rowObject.Name + '">' +
            cellvalue + "</a>";
    }} 
```

格式化程序的代码取决于您用于填充网格的数据格式以及您是否使用`loadonce: true`。在您的情况下`rowObject`可能是数组，并且要访问`Name`您应该替换`rowObject.Name`为索引，例如`rowObject[1]`.

或者，您可以使用`formatter: "dynamicLink"`可以从[此处](https://github.com/OlegKi/jqGrid-plugins/blob/master/jQuery.jqGrid.dynamicLink.js)获取的内容（请参阅[答案](https://stackoverflow.com/a/9048483/315935)和[另一个](https://stackoverflow.com/a/9913599/315935)以获取使用示例）。

# php - PHP - 通用用户友好的错误消息

> ID：16033534
> 
> 赞同：4
> 
> 时间：2013-04-16T09:36:21.573
> 
> 标签：php

目前，我的 PHP 页面上有以下内容：

```
error_reporting( E_ALL | E_STRICT );
ini_set('display_errors', 1); 
```

当出现问题时，是否有推荐的方法用更用户友好的消息替换它？但同时，在某处记录服务器上的错误？

因此，我不想显示完整的错误消息，而是希望用户知道出了问题，并且会尽快纠正。发生的完整错误被记录在后台而不向用户显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:43:47.123

错误来自两个来源：

1.  您的脚本处于您没有预料到的情况。
2.  你的脚本无法控制的东西是错误的。

**第一种**错误来自程序中的错误，需要在那里修复。例子是：

*   在非对象上调用方法（例如在 a`string`或 an上`int`）
*   将错误类型的参数传递给函数（例如将 a 传递`bool`给[`mysqli_query`](http://www.php.net/manual/en/mysqli.query.php)）。

`display_errors`在开发系统上，打开并没有错。在生产服务器上，关闭`display_errors`然后再打开[`log_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.log-errors)。这会将错误记录到您的 Web 服务器的日志中。通过实现自己的错误处理程序并将其注册到[`set_error_handler`](http://www.php.net/manual/en/function.set-error-handler.php).

**第二种**错误超出了您的脚本的控制范围，因此您的脚本必须准备好优雅地处理它们。例子是：

*   数据库系统已关闭。
*   您尝试访问的文件不存在。

要处理这些错误，请阅读您使用的每个函数和方法的文档，确定调用何时会失败并采取相应措施。[例外情况](http://php.net/manual/en/language.exceptions.php)可能会对您有所帮助。

不恰当地处理第二种错误通常会导致第一种错误。例如，如果您不检查是否[`mysqli_connect`](http://www.php.net/manual/en/mysqli.construct.php)实际建立了数据库连接（第二种错误），则以下调用[`mysqli_query`](http://www.php.net/manual/en/mysqli.query.php)将产生第一种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:00:48.407

我建议您将所有 php 错误/警告/通知转换为异常并像处理任何异常一样处理异常。这在 php 中是可能的，并且使错误处理比默认方式更优雅：

```
set_error_handler( function( $num, $msg, $file, $line ) {
  # take into account the '@' operators ( or remove this line and ignore them ):
  if ( error_reporting() === 0 ) return false;
  throw new \ErrorException( $msg, $num, 0, $file, $line );
});
// stolen from my blog @ http://codehackit.blogspot.be/2012/01/php-errorswarningsnotices-to-exceptions.html 
```

然后你可以将你的整个索引/控制器方法包装成一个 try catch：

```
try {
  # request handler.. 
} catch ( ErrorException $e ) {
  # tell the user something went wrong and save $e->getMessage() into a custom log file
} 
```

这给了你很大的灵活性，当然还有嵌套 try/catch 的可能性。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:40:06.517

在服务器上记录可以通过[记录错误](http://php.net/manual/en/function.error-log.php)来完成，但我认为没有任何明智的方法可以将这些错误转换为用户友好的消息。而且不应该有办法。

您的应用程序不应产生任何 PHP 错误。如果是这样，您唯一可以（并且应该）做的就是向用户显示出现意外错误的消息。

用户友好的错误消息是您自己创建的消息，通过抛出某些异常或其他形式的错误处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:47:58.993

是的，您可以使用[set_error_handler](http://www.php.net/manual/en/function.set-error-handler.php)来调用用户定义的函数，并且通过将它与[trigger_error](http://php.net/manual/en/function.trigger-error.php)一起使用，您可以获得自定义错误消息。

*检查示例 #1在*[set_error_handler](http://www.php.net/manual/en/function.set-error-handler.php)页面上使用 set_error_handler() 和 trigger_error() 处理错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:48:39.817

不幸的是，您无法捕获编译时错误，因此 PHP 错误处理功能无法捕获代码中的任何语法错误。

您可以使用`register_shutdown_function`,`set_error_handler`和`set_exception_handler`来自定义错误行为。

我用它来制作更加用户友好的错误消息，并让用户可以选择发送带有他的操作描述的错误报告等。

例子：

```
function myExceptionHandler($e){
    //Debug data to display to the user in error.php.
    $_SESSION['error_dump'] = print_r($e,true);
    header('Location: error.php');
}
set_exception_handler('myExceptionHandler'); 
```

# javascript - javascript - 在 window.onerror 上获取正确的滚动位置

> ID：16033536
> 
> 赞同：1
> 
> 时间：2013-04-16T09:36:26.197
> 
> 标签：javascript, scroll, onerror

我试图在一个自定义框中显示错误，其中包含一些信息（行号，文件名......），在一个覆盖页面正文并避免与框外元素交互的 DIV 内。

这是 DIV 的 CSS：

```
overlayStyle = {
    'position': 'absolute',
    'top': '0px',
    'left': '0px',
    'height': '100%',
    'width': '100%',
    'backgroundColor': 'rgba(199,199,199,0.7)',
    'display': 'block',
    'zIndex': '1000',
    'textAlign': 'center',
    'paddingTop': '5%'
} 
```

我正在通过对文档的 HEAD 部分中不存在的文件进行 AJAX 调用来测试这一点，因此该框在文档加载时打开。这是 onerror 处理程序：

```
window.onerror = function ( msg, url, line ) {
    error ( msg, url, line );
    return true;
} 
```

这是创建盒子的脚本的一部分：

```
var root = document.documentElement.scrollTop ? document.documentElement : document.body;
root.scrollTop = 0;

document.body.style.overflow = 'hidden'; 
```

在这里，我将文档滚动到顶部，以便仅显示具有 0,0 坐标的覆盖 DIV。

如果我关闭错误框，向下滚动页面并发送 F5，页面重新加载滚动到底部，但覆盖的 DIV 位于 0,0，所以我只看到它的底部。

那是因为 scrollTop 位置（我也试过 window.scrollY）是 0 所以 root.scrollTop = 0; 不会产生任何效果。

有什么方法可以正确定位 DIV（请不要使用 jQuery）？

这是完整的代码：

```
function error ( msg, url, line ) {
    var overlay = document.createElement ( 'DIV' ),
    scrollPos = 0,
    root = document.documentElement.scrollTop ? document.documentElement : document.body,
    overlayId = 'divErrorOverlay',
    overlayStyle = {
            'position': 'absolute',
            'top': '0px',
            'left': '0px',
            'height': '100%',
            'width': '100%',
            'backgroundColor': 'rgba(199,199,199,0.7)',
            'display': 'block',
            'zIndex': '1000',
            'textAlign': 'center',
            'paddingTop': '5%'
    },
    errHead = null,
    errBody = null;

    overlay.setAttribute ( 'id', overlayId );
    for ( var i in overlayStyle ) overlay.style [ i ] = overlayStyle [ i ];

    scrollPos = root.scrollTop; //I use this to restore position when box is closed
    root.scrollTop = 0;

    document.body.appendChild ( overlay );
    document.body.style.overflow = 'hidden';

    //Calls to methods that creates header and body
} 
```

# android - 如何在 android 设备中使用 googlePlay 检查已安装的应用程序

> ID：16033543
> 
> 赞同：0
> 
> 时间：2013-04-16T09:36:45.843
> 
> 标签：android

如何检查是否从 Google Play 商店（通过单击安装按钮）或下载的 .apk 文件安装了任何 android 应用程序并将其安装在设备中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:40:00.913

从 Google Play 安装时，您将`com.android.vending.INSTALL_REFERRER`在安装过程中收到广播。只需为此[创建一个广播接收器](http://n3vrax.wordpress.com/2011/07/15/listen-for-install-referrer-broadcast-message-get-referrer-on-install/)`SharedPreferences`，并在您的行中有一个布尔值，`fromGooglePlay`您可以在接收器中将其设置为 true。

但是，我认为您无法为其他应用商店（如亚马逊）提供类似的接收器。

此外，这不适用于 Android 3.1 及更高版本，因为至少未启动一次的应用程序没有资格接收广播。

但是，您可以尝试另一种解决方案：

在您的应用程序中，在某处有一个常量布尔值，例如`GOOGLE_PLAY_BUILD`. 在为 Google Play 构建 apk 时，将其设置为`true`，在构建用于手动分发的 apk 时，将其设置为`false`。然后只需在运行时检查它的值，并采取相应的行动。

此外，还有一个[getInstallerPackageName()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)方法`PackageManager`可用于此目的。但是，此值不可靠，可能会被篡改。

# prolog - 在 Prolog 中实现一个简单的聚类算法

> ID：16033545
> 
> 赞同：2
> 
> 时间：2013-04-16T09:36:49.110
> 
> 标签：prolog, cluster-analysis

我的目标是在 Prolog 中实现一个简单的聚类算法。

假设您有一定数量的位置。每个位置都有一个特定的 ID，它们看起来像“位置（X，Y，ID）”。

我有以下想法：基本上，您获取第一个 ID 及其位置，然后将此 ID 添加到列表中。然后，将此 ID 的位置与所有其他可能的位置进行比较。然后，每个位置与原始位置在一定距离内的 ID 也会添加到列表中。下一步是对已添加到列表中的所有新 ID 执行完全相同的操作。然后对上一步中添加的 ID 执行相同的操作，等等。

在没有更多可能性之后，您将拥有一个形成集群的 ID 列表。例如 1、2、3、6 和 8。

对于您从 ID 1 开始的第一个集群。通常，您将从 ID 2 开始并检查该集群是哪个集群。但它已经在第一个集群中，没有理由再看这个。就像我们也不必查看值 3、6 和 8 一样。因为我们只知道查看这些 ID 会给出完全相同的集群。

所以我如何想象有一个谓词返回列表列表，基本上是所有集群。该谓词使用另一个实际生成单个集群的谓词。

我已经尝试了一些东西，但它并没有真正起作用。

可能的位置列表：

```
position(1,1,1)
position(3,2,2)
position(2,4,3)
position(4,6,4)
position(5,4,5)
position(10,3,6)
position(12,2,7)
position(13,6,8)
position(16,2,9) 
```

假设距离为 3，则应该有四个集群。1、2、3、4和5；6和7；8个；9.

首先是一个简单的谓词，它检查两个 ID 是否在一定距离内：

```
checkDistance(ID1,ID2,Distance) :-
    position(X1,Y1,ID1),
    position(X2,Y2,ID2),
    abs(X2 - X1) =< Distance,
    abs(Y2 - Y1) =< Distance. 
```

以下代码创建一个接近初始 ID 的 ID 列表：

```
compareAllPos(ID,Val,[],Distance) :- 
    \+ checkDistance(ID,Val,Distance).

compareAllPos(ID,Val,[Val|LS],Distance) :-
    checkDistance(ID,Val,Distance),
    Val2 is Val+1,
    compareAllPos(ID,Val2,LS,Distance). 
```

它提供以下输出：

```
?- compareAllPos(1,1,List,3).
List = [1, 2, 3] ; 
```

这仅解决了第一部分。现在我必须检查添加到列表中的每个值。我通过添加另一个 compareAllPos 来做到这一点：

```
compareAllPos(ID,Val,[Val|LS],Distance) :-
    checkDistance(ID,Val,Distance),
    Val2 is Val+1,
    append(LS1,LS2,LS),
    compareAllPos(Val,1,LS1,Distance),
    compareAllPos(ID,Val2,LS2,Distance). 
```

下一个问题是程序现在陷入无限循环，因此需要检查以确保尚未看到 ID。

我有以下想法：

```
compareAllPos2(ID,Val,_,[],Distance) :- 
    \+ checkDistance(ID,Val,Distance).

compareAllPos2(ID,_,Visited,[],_) :-
    member(ID,Visited).

compareAllPos2(ID,Val,Visited,[Val|LS],Distance) :-
    checkDistance(ID,Val,Distance),
    Val2 is Val+1,
    append(LS1,LS2,LS),
    append(ID,Visited,Visited1),
    compareAllPos2(Val,1,Visited1,LS1,Distance),
    append([],Visited1,Visited2),
    compareAllPos2(ID,Val2,Visited2,LS2,Distance). 
```

我会使用以下行来调用它：

```
compareAllPos2(1,1,[],List,3). 
```

**这就是我卡住的地方。**上面的代码不能正常工作，我还没有找到解决这个问题的正确方法。如果该代码有效，它应该返回一个基于 ID 的单个集群。最后一步是查看其他可能的集群。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:09:44.927

添加最后一个 compareAllPos/4 后，你会得到

```
?- compareAllPos(1,1,List,3).
List = [1, 2, 3] ;
List = [1, 2, 3, 1, 2, 3, 4, 5] ;
List = [1, 2, 3, 1, 2, 3, 4, 5] ;
List = [1, 2, 3, 1, 2, 3, 4, 5] ;
List = [1, 2, 3, 1, 2, 3, 4, 5] ;
List = [1, 2, 3, 1, 2, 1, 2, 3, 3|...] ;
List = [1, 2, 3, 1, 2, 1, 2, 3, 3|...] ;
... 
```

我认为可能是循环的原因，你应该让它更简单。我会写

```
checkDistance(ID1,ID2,Distance) :-
    position(X1,Y1,ID1),
    position(X2,Y2,ID2),
    ID1 \= ID2,
    abs(X2 - X1) =< Distance,
    abs(Y2 - Y1) =< Distance.

clusters(Distance, Cs) :-
    once(position(_,_,First)),
    clusters(Distance, First, [], Cs).

clusters(Distance, Pivot, SoFar, Cs) :-
    findall(Tentative,
        (   pos_not_clustered(SoFar, Tentative),
            checkDistance(Pivot, Tentative, Distance)
        ),
        Cluster),
    Updated = [[Pivot|Cluster]|SoFar],
    (   pos_not_clustered(Updated, NextPivot)
    ->  clusters(Distance, NextPivot, Updated, Cs)
    ;   Cs = Updated
    ).

pos_not_clustered(Clusters, ID) :-
    position(_,_,ID),
    maplist(not_member(ID), Clusters).

not_member(E, L) :- \+ memberchk(E, L). 
```

因为它产生

```
?- clusters(3,C).
C = [[9], [6, 7, 8], [4, 5], [1, 2, 3]]. 
```

*编辑*抱歉有错误的代码，我已经改成了这个

```
clusters(Distance, Cs) :-
    once(position(_,_,First)),
    clusters(Distance, [[First]], Cs).

clusters(Distance, SoFar, Cs) :-
    (   pos_not_clustered(SoFar, Tentative),
        add_to_cluster(SoFar, Tentative, Distance, Updated)
    ->  clusters(Distance, Updated, Cs)
    ;   Cs = SoFar
    ).

pos_not_clustered(Clusters, ID) :-
    position(_,_,ID),
    maplist(not_member(ID), Clusters).

not_member(E, L) :- \+ memberchk(E, L).

add_to_cluster([C|Cs], Tentative, Distance, Updated) :-
    member(Id, C),
    checkDistance(Id, Tentative, Distance), !,
    Updated = [[Tentative|C]|Cs].
add_to_cluster([C|Cs], Tentative, Distance, [C|Rs]) :-
    add_to_cluster(Cs, Tentative, Distance, Rs).
add_to_cluster([], Tentative, _Distance, [[Tentative]]). 
```

现在我明白了

```
?- clusters(3,C).
C = [[5, 4, 3, 2, 1], [8, 7, 6], [9]]. 
```

# graph - neo4j cypher：过滤基于节点属性的变量子字符串

> ID：16033546
> 
> 赞同：1
> 
> 时间：2013-04-16T09:36:59.457
> 
> 标签：graph, neo4j, cypher

我需要在两个节点之间创建，其中第一个节点具有一些字符串属性（`keyword`例如命名），第二个节点具有属性（命名为“文本”），“文本”属性包含以下内容的值`keyword`：

```
start node1=node(0),node2=node(1) 
match node1-[r:RELATED_TO]->node2 
where node1.prop1.substring(node2.prop2) create unique r 
return r 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:37:19.220

您需要一个 CONTAINS 或 node1.prop1.indexOf(node2.prop2) 函数，但该函数尚不存在。您能否在 neo4j 中提出一个问题，[https://github.com/neo4j/neo4j/issues](https://github.com/neo4j/neo4j/issues)，或者提供一个拉取请求并实施它？

# java - Jsoup 无法正确解析指向 HTML 的链接

> ID：16033547
> 
> 赞同：0
> 
> 时间：2013-04-16T09:37:02.673
> 
> 标签：java, jsoup

我一直在将 Jsoup 与 Google 搜索博客一起使用，一切正常，但是当我使用另一个网站时，例如[WhosTalkin，](http://www.whostalkin.com/search?q=boston&x=0&y=0)我无法提取结果数据和链接。我的代码：

```
Connection.Response response = null;
    String url = "http://www.whostalkin.com/search?q=boston&x=0&y=0";
        // 
        try {
             response = Jsoup.connect(url)
                        .userAgent("Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31")
                        .timeout(10000)
                        .execute();
        } catch (IOException e) {
             System.out.println("io - "+e);
        }
        // get page title
        Document doc = response.parse();
        String title = doc.title();
        System.out.println("Page Title: " + title +"\n"); 
```

这里是我提取数据的部分：

```
Elements links = doc.getElementsByTag("h3");
        for (Element link : links) { 
            System.out.println("\nTitle: " + link.select("a").attr("title"));
            System.out.println("Result: " + link.select("a").attr("href"));
            } 
```

当我只是想确保 Jsoup 无法正确解析 HTML 时，我使用了[Try Jsoup](http://try.jsoup.org/)并获取 URL，当我使用浏览器检查它时，他给了我与代码不匹配的 HTML 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:00:27.070

您没有使用正确的选择器。寻找`drill`CSS 类。更容易接触元素。

```
Elements elementsByClass = parse.getElementsByClass("drill");
for (Element link : elementsByClass)
{
    List<Node> childNodes = link.childNodes();
    System.out.println("Title: " + childNodes.get(1));
    System.out.println("Result: " + childNodes.get(0).attr("src"));
} 
```

**印刷**

```
Title:  Backtype
Result: http://www.whostalkin.com/img/backtype.png

Title:  FriendFeed
Result: http://www.whostalkin.com/img/friendfeed.png

... 
```

# angularjs - angularjs从指令调用模态对话框

> ID：16033554
> 
> 赞同：0
> 
> 时间：2013-04-16T09:37:21.877
> 
> 标签：angularjs, angularjs-directive, angular-ui-bootstrap

我创建了一个指令来打开一个模式对话框。这是代码：

**[编辑]** JSFIDDLE：http: [//jsfiddle.net/graphicsxp/fcQZk/8/](http://jsfiddle.net/graphicsxp/fcQZk/8/)

问题：关闭按钮不会关闭模式。

```
angular.module('person.directives').
directive("person", function($dialog) {
return {
    restrict: "E",
    templateUrl: "person/views/person.html",
    replace: true,
    scope: {
        myPerson: '='
    },
    link: function (scope, element, attrs) {

    },
    controller: function ($scope)
    {            
        $scope.opts = {
            backdrop: true,
            keyboard: true,
            backdropClick: true,
            templateUrl: 'person/views/searchPerson.html'
        };

        $scope.openDialog = function () {
            var d = $dialog.dialog($scope.opts);
            d.open().then(function (result) {
                if (result) {
                    alert('dialog closed with result: ' + result);
                }
            });
        }
    }
} 
```

});

这很好用。现在，在对话框中，我使用了另一个指令：

```
 <search-person></search-person> 
```

和js：

```
angular.module('person.directives').directive("searchPerson", function ($dialog) {
return {
    restrict: "E",
    template: "<div>some template</div>",
    scope: {},
    link: function (scope, element, attrs) {

    },
    controller: function ($scope)
    {
        $scope.close = function (result)
        {
            $dialog.close(result);
        }
    }
}
}); 
```

但是 $dialog.close(result) 没有做任何事情。我注意到 $scope.close 为空。我怀疑这与注射有关。我将 $dialog 注入到 searchPerson 指令中，而我想我应该使用从 person 指令打开的对话框。我只是不知道...有什么想法吗？

**[编辑 2]**

我已经用指令 searchPerson 替换了模态的模板。现在我没有范围问题（请参阅更新的 jsfiddle）。但是关闭按钮仍然不起作用！错误是：

```
Object #<Object> has no method 'close' 
```

似乎 $dialog 没有在 searchPerson 指令中正确注入....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:14:07.727

我认为函数参数中的 $dialog 是“$dialog”服务，而不是对话对象的实例。这就是为什么没有关闭方法的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T02:24:14.103

我也有类似的需求，所以我只是将对话框的控制器（我称之为“dialogController”）插入到 $scope.opts 对象中。像这样：

```
.directive('infoDialog', function($dialog) {
    return {
        restrict: 'A',
        link: function(scope, elm, attrs) {
            elm.bind('click', function() {
                scope.$apply(function() {
                    var info = { title:   attrs.title, content: attrs.content };
                    scope.openDialog(info);
                });
            })
        },
        controller: function($scope) {
            var dialogController = function($scope, dialog, info) {
                $scope.close = function(){ dialog.close(); };
                if(info){ $scope.info = info; }
            };

            $scope.opts = {
                backdrop:       true,
                keyboard:       false,
                backdropClick:  true,
                backdropFade:   false,
                resolve: { },
                controller:     dialogController,
                templateUrl: 'partials/dialogs/blank.html'
            };

            $scope.openDialog = function (info) {
                $scope.opts.resolve.info = function(){ return info; };
                var d = $dialog.dialog($scope.opts);
                d.open();
            }
        }
    };
}); 
```

@Sam，我看到您已经解决了这个问题，但是这段代码可能对其他人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:21:18.380

@Joe，实际上它是对话对象，而不是 $dialog 服务。在这种情况下，$dialog 服务的 open() 方法会向分配的控制器注入对对话框的引用。

经过大量的摆弄，我通过将整个模态移动到 searchPerson 指令本身来解决问题。他们共享同一个控制器，这很好。

# c++ - 如果两个数字都指向同一位置，则在不使用额外空间的情况下交换两个数字不起作用？

> ID：16033555
> 
> 赞同：0
> 
> 时间：2013-04-16T09:37:22.567
> 
> 标签：c++, c

最近我遇到了这个问题，**写一个函数来交换两个数字而不使用额外的空间？**该函数可以有两种方式：

```
int swap ( int *a, int* b)
{
    *a = *a+*b;
    *b = *a-*b;
    *a = *a-*b;
} 
```

另一种方式是异或运算：

```
int swap ( int *a, int* b)
{
    *a = *a^*b;
    *b = *a^*b;
    *a = *a^*b;
} 
```

即使这两个函数都是一个好主意，但如果 a 和 b 都指向一个内存位置，它们将无法工作？如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:44:05.660

这个问题在数学上很明显。

```
int swap ( int *a, int* b)
{
    *a = *a+*b;
    *b = *a-*b;
    *a = *a-*b;
} 
```

当`a`和`b`指向同一个地方然后，上面的代码变成

```
*a = *a + *a; // *a = 2 x (*a)
*b = *a - *a; // = 0
*a = *a - *a; // = 0 
```

因此，两者`*a`和`*b`都为零。因此，您应该使用以下方法处理它`if`：

```
int swap ( int *a, int* b)
{
    if (a!=b)
    {
      *a = *a+*b;
      *b = *a-*b;
      *a = *a-*b;
    }
} 
```

*版本也一样`xor`。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:40:16.137

```
#define SWAP(a, b) (((a) == (b)) || (((a) ^= (b)), ((b) ^= (a)), ((a) ^= (b)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:58:46.267

为什么*有人*会在不使用额外空间的情况下交换两个数字？

哪个虐待狂会给你足够的空间容纳两个而不是三个？

你为什么称它为“空间”呢？这只是第三个数字，没有必要提到一个巨大的、真空的地方。

使用临时的算法在交换操作的数量上使用 O(1) 空间。数字的长度为 O(n)，但给定处理器不友好的 n，位旋转和算术长度很可能也是如此。

如果您没有足够的空间容纳一个简单的数字，那么您只是用完了空间。在那种情况下，我看不出你可以从交换中去哪里。

为什么不首先将这两个数字存储在适当的位置？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T09:44:57.743

你可以试试这个，a=a+b; b=ab; a=ab;

# testing - 应用程序负载和内容测试

> ID：16033556
> 
> 赞同：2
> 
> 时间：2013-04-16T09:37:25.520
> 
> 标签：testing, vaadin, load-testing

我正在寻找一些可以轻松使用的工具（我必须学习它的工作原理并在 1-2 天内使用它）并且可以模拟用户输入具有以下类型的 Web 应用程序： - 慢慢观看网页内容的人 -用户在没有阅读内容的情况下从一个目录“跳转”到另一个目录 - 用户在网站上提供产品后检查产品 - 尝试输入管理内容的人 - 尝试输入应用程序不可访问部分的人 - 尝试输入不存在的内容的人

非常重要的是能够检查用户看到的是他应该看到的（例如错误消息，“您无权进入”，页面用户如何看到哪些元素，他在主页上看到了多少产品等.)

哪种工具最适合呢？我用 Vaadin，这个技术有什么用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:23:05.513

我认为在 1-2 天内学习如何使用和部署一个新的测试工具是非常乐观的！我不相信您将能够在那个时间范围内针对除异常简单的应用程序之外的任何东西部署*任何测试工具。*

那说：

我们已经使用[Apache JMeter](http://jmeter.apache.org/)（Apache 2 许可）对我们的 Vaadin 应用程序执行了一些负载测试；有关如何开始使用 JMeter 和 Vaadin 的更多详细信息，请参阅[本文。](https://vaadin.com/wiki/-/wiki/Main/JMeter%20Testing)

我们使用 [QFTest](http://qfs.de)（商业许可）对我们的 Vaadin 应用程序执行功能测试。

您还可以使用[Vaadin 的 TestBench](https://vaadin.com/add-ons/testbench)（商业许可证）来执行功能测试——我想您可能可以使用它执行某种低级负载测试。Testbench 建立在[Selenium](http://docs.seleniumhq.org/)（Apache 2 许可证）之上——具有专门针对 Vaadin 应用程序的特定钩子和扩展。这些钩子非常重要，您可能最终不得不自己重新实现它们。

我们使用 QFTest 是因为我们拥有丰富的使用经验，并且也使用它来测试我们的 Swing 应用程序。它提供了一个非常复杂的 UI，使您无需编写太多代码即可构建测试（尽管最终您*正在*编写代码）——这为一些不喜欢在代码中思考的 QA 分析师提供了生产力。

所有这些工具实际上都需要您将 HTML ID 分配给应用程序¹中的组件，以便为它开发测试；没有 id 或其他形式的标识符——我们也使用了 CSS 类——很难使测试可重复。[1]

* * *

¹使用 Vaadin 6 的[Paintable#setDebugId](https://vaadin.com/api/6.8.9/com/vaadin/terminal/Paintable.html#setDebugId%28java.lang.String%29) 或 Vaadin 7 的[Component#setId](https://vaadin.com/api/7.0.3/com/vaadin/ui/Component.html#setId%28java.lang.String%29)

# jquery - 可拖放的事件不会在不同的选项卡上触发

> ID：16033557
> 
> 赞同：0
> 
> 时间：2013-04-16T09:37:26.503
> 
> 标签：jquery, jquery-ui-tabs, jquery-ui-sortable, jquery-ui-droppable

当我尝试连接由选项卡分隔的 2 个列表时，over 事件不会在第二个选项卡上的列表上触发。

这是我的 HTML

```
<div id="TabSet" class="tabs">
    <ul>
        <li class="tab"><a href="#tabs-1">Nunc tincidunt</a></li>
        <li class="tab"><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
        <div style="padding: 10px;">
            <ul class="list" id="list1">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <ul class="list" id="list2">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <br style="clear: both;" />
        </div>
    </div>
    <div id="tabs-2">
        <div style="padding: 10px;">
            <ul class="list" id="list3">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <ul class="list" id="list4">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <br style="clear: both;" />
        </div>
    </div>
</div> 
```

和 javascript

```
$(function() {
    $(".list").sortable({
        connectWith: ".list"
    }).disableSelection();

    var $tabs = $(".tabs").tabs();

    //for changing tab on over
    $(".tab").droppable({
        over: function(event, ui) {
            var $item = $(this);
            $tabs.tabs("select", $item.find("a").attr("href"));
        }
    });

    $(".list").droppable({
        over: function(event, ui) {
            var $item = $(this);
            $item.addClass('ui-state-highlight');
            console.log($item.closest('ul').attr('id'));
        },
        out: function(event, ui) {
            var $item = $(this);
            $item.removeClass('ui-state-highlight');
            ui.draggable.appendTo('#TabSet').show('slow');
        }
    });
}); 
```

我在[jsfiddle](http://jsfiddle.net/8BLr6/2/)创建了一个工作示例。

当您在第一个选项卡上的列表中拖动项目时，列表会突出显示，而在第二个选项卡上则不是这种情况。更奇怪的是，当我打印悬停列表的 id 时，我从第一个选项卡而不是第二个选项卡获取 id。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:44:24.983

在摆弄了几天并最终在这里询问后，我找到了解决自己问题的方法。在此处发布以帮助其他用户。

诀窍是不使用 droppable，而是使用 sortable 提供的事件。

我之前确实尝试过，但是当您切换选项卡时助手会丢失，解决方案是使用 appendto 并将助手设置为克隆。它并没有真正被克隆，但它是一个未记录的功能。

的HTML

```
<div id="TabSet" class="tabs">
    <ul>
        <li class="tab"><a href="#tabs-1">Nunc tincidunt</a></li>
        <li class="tab"><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
        <div style="padding: 10px;">
            <ul class="list" id="list1">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <ul class="list" id="list2">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <br style="clear: both;" />
        </div>
    </div>
    <div id="tabs-2">
        <div style="padding: 10px;">
            <ul class="list" id="list3">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <ul class="list" id="list4">
                <li class="ui-state-default">Item 1</li>
                <li class="ui-state-default">Item 2</li>
            </ul>
            <br style="clear: both;" />
        </div>
    </div>
</div> 
```

和 javascript

```
$(function() {

    $(".list").sortable({
        connectWith: ".list",
        appendTo: document.body,
        helper: 'clone',
        over: function(event, ui) {
            var $item = $(this);
            $item.addClass('ui-state-highlight');
        },
        out: function(event, ui) {
            var $item = $(this);
            $item.removeClass('ui-state-highlight');
        }
    }).disableSelection();

    //for changing tab on over
    $(".tab").droppable({
        over: function(event, ui) {
            var $item = $(this);
            $tabs.tabs("select", $item.find("a").attr("href"));
        }
    });

    var $tabs = $(".tabs").tabs();
}); 
```

[jsfiddle](http://jsfiddle.net/8BLr6/4/)上的工作示例。

**编辑** 发现我之前的示例不适用于嵌套选项卡，解决方案是将选项卡连接到可排序的选项卡并防止拖动选项卡并放置在选项卡上。

[jsfiddle](http://jsfiddle.net/8BLr6/6/)上的嵌套选项卡工作示例。

# c# - 如何在建立与数据库的连接时识别连接抛出异常

> ID：16033560
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:37:37.210
> 
> 标签：c#, asp.net

我的 web.config 中有多个数据库的连接，因此有很多连接字符串 - 当我尝试运行该网站时出现错误

“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问服务器...”

如何确定此列表中的哪个连接导致异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:40:29.300

如果您在抛出异常时在调试中运行代码，那么 Visual Studio 应该会中断，允许您检查连接元素以查看它是哪一个以及您使用的连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:41:19.113

在调试模式下，等到出现异常。在 conn.Open() 或在您的捕获中获取异常，查看连接字符串，利润。

# nfc - 如何使用 android 设备读取 at90sc 12872rcft 卡

> ID：16033565
> 
> 赞同：0
> 
> 时间：2013-04-16T09:37:45.333
> 
> 标签：nfc

我必须开发一个概念验证应用程序，能够读取基于 Atmel at90sc 12872rcft 的智能卡。这些卡与 ISO/IEC 14443B 兼容。

我创建了一个简单的应用程序，它能够读取 14443A 卡上的序列号，但甚至无法识别 14443B 卡在手机的范围内。我正在使用带有操作系统版本 4.1.2 的 nexus S。

有没有读过这些卡片的经验愿意分享经验的人？

谢谢，

安东内洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:00:42.717

就 ISO14443-B 标签而言，Nexus-S 的天线性能非常差。

对于您的概念证明，您可以尝试以下方法来提高天线性能：

*   打开后盖。在左上角，您可以看到连接到 Nexus-S 的 NFC 天线的两个触点。天线本身粘在您刚刚取下的盖子的背面。

*   取一根细线，大约。20 到 25 厘米。用它做一个线圈（三个绕组很好）。直径在 4 到 5 厘米之间。将其连接到 NFC 天线引脚。确保线圈没有位于任何金属部件（如蓄电池或显示器等）。

*   运行您的测试程序并将标签展示给您的贫民窟天线。您现在很可能现在能够检测到您的 ISO14443-B 标签，并使用 IsoDep 接口与之对话。

天线是电容耦合的，因此您甚至可以将其短接而不会对 NFC 芯片造成任何损害。

# java - 在消息驱动 Bean 中动态配置 MappedName 注解

> ID：16033568
> 
> 赞同：6
> 
> 时间：2013-04-16T09:37:48.127
> 
> 标签：java, jakarta-ee, annotations, ejb-3.0, message-driven-bean

使用消息驱动 BEans 时，接收消息的目标名称在注解中硬编码`@MessageDriven(mappedName = "someDestinationName")`

有没有办法在运行时添加这些信息？Bellow 是一个示例消息驱动 Bean 类。

```
package mdb.beans;

import javax.ejb.ActivationConfigProperty;
import javax.ejb.MessageDriven;
import javax.jms.Message;
import javax.jms.MessageListener;

@MessageDriven(mappedName = "someDestinationName", activationConfig =
{
    @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue =   "Auto-acknowledge"),
    @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue")
})
public class MDBSample implements MessageListener 
{    
    public MDBSample() 
    {
        // constructor
    }

    @Override
    public void onMessage(Message message) 
    {
        // logic when message received
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T07:49:29.160

据我所知，不，你不能那样做。

因为，目的地（它是一个字符串）和 bean（它是一个类）的耦合是在部署时完成**的**，所以您不能以编程方式更改目的地。

也许有重新绑定的技巧；我的意思是强制容器释放 MDB，然后更改目标并重新初始化（通过依赖注入，然后发布构造步骤等），但我怀疑应用程序服务器会允许这样做。

摘自 JSR-318（EJB 3.1 规范）；

> **5.4.17 消息驱动 Bean 与目的地或端点的关联**
> 
> 当 bean 部署在容器中时，消息驱动的 bean 与目标或端点相关联。将消息驱动的 bean 与目的地或端点相关联是 Deployer 的责任。
> 
> **5.4.17.1 JMS 消息驱动 Bean**
> 
> 当 bean 部署在容器中时，JMS 消息驱动 bean 与 JMS 目标（队列或主题）相关联。将消息驱动的 bean 与队列或主题相关联是 Deployer 的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-24T11:13:18.147

您可以在应用程序启动时通过从系统变量中注入值来实现这一点。

我们在 Thorntail (2.6.0) 中引入了以下设置`project-defaults.yml`：

```
thorntail:
  ee:
    annotation-property-replacement: true 
```

然后从以下位置引用配置参数`MessageDrivenBean`：

```
@ActivationConfigProperty(
   propertyName = "destination",
   propertyValue = "java:/jms/queue/${configuration.customer}.queue")
   ... 
```

`configuration.customer`启动时设置的系统变量在哪里。

# c++ - 如何从 cpp_dec_float_50 转换为 cpp_int？一般关于浮点数？

> ID：16033578
> 
> 赞同：3
> 
> 时间：2013-04-16T09:38:19.173
> 
> 标签：c++, boost, floating-point

我的基本目标是减去两个应该是等效的浮点数。考虑一下：-

```
float x=1;
float a=x/30-x/40;    
float b=x/30;
b-=x/40;
std::cout<<a-b<<std::endl; 
```

我应该得到零。但我没有。相反，我得到了大约 10^(-10) 的极少数数量。

现在，有两种选择：-

首先，我想用有理表达式代替分数（即处理分子和分母），然后将最终的有理表达式转换为分数。我通过 Boost.rational 做到了这一点。我使用 cpp_int 来存储分子和分母，因为分子和分母可能会变得很大。它工作正常。但问题是我正在制作的程序需要很多时间。我认为这是因为必须处理巨大的整数。

其次，有人建议我尝试定点算术。我不太擅长。所以，我不确定定点算术是否也会给出正确的答案？我在想的是这个-> 假设我希望我的减法结果正确到第 50 个精度。因此，通过将小数点乘以适当的 10 次方，我得到小数点左侧的 50 位数字。删除小数部分并将其转换为 cpp_int。我用两个花车做这个。然后对这些 cpp_int 进行减法运算。两个问题：- 首先，我无法将 cpp_float_dec_50 转换为 cpp_int。Boost 不允许直接进行这种（有损）转换。其次，我对这种方法完全没有信心。

所以，最后两个问题：- 如何将 cpp_float_dec_50 转换为 cpp_int？到目前为止，在问题中提出的上下文中，哪种方法是最好的两个减去两个浮点数？

谢谢。很抱歉，如果其中任何一个问题被认为是非常愚蠢或愚蠢的问题。我还在学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T11:20:33.707

您需要决定是否需要精确的表示。如果 10^-10 误差太大，那么您可能需要精确性。我可以说定点表示并不比内置类型本身好；如果您扩展其精度和功能，您将获得一个多精度库:)。

我可以推荐[boost::multiprecision](http://www.boost.org/doc/libs/1_55_0/libs/multiprecision/doc/html/index.html)，并且发现它相当简单，尽管因为它是一个 boost 模板库，所以需要一些额外的努力来寻找编译器错误。数字转换只是工作，当然没有“免费午餐”；如果使用错误，您的结果与内置数字一样容易混淆。

要记住的事情：

*   性能是精度的函数。控制住它！
*   随着时间的推移测量您的精度。例如，重复乘法可能会无限制地增加精度。消除数学中不必要的转换。
*   许多函数（例如 trig、log、exp、...）没有为有理数实现。在需要放弃并接受受控错误（通过使用浮点类型）之前，您只能如此小心地绕过此类数学。
*   您可以根据其精度要求分离您的程序。例如，在 2D 中渲染时，转换为视图空间 (-1..1)，然后您可以将值截断为浮点并以良好的速度运行。
*   boost::multiprecision 有许多提高性能的后端（尽管它们不会修复精度控制中的错误）

我对我的 boost mp 类型使用以下定义。就我而言，我发现关闭表达式模板会更快。

```
namespace mp = boost::multiprecision;
typedef mp::number<mp::cpp_int_backend<>, mp::et_off>       int_mp;
typedef mp::number<mp::cpp_rational_backend, mp::et_off>    rational_mp;
typedef mp::number<mp::cpp_dec_float<0>, mp::et_off>        float_mp;  // 0 means 'unlimited' 
```

# ruby-on-rails - 如何在rails应用程序中获取heroku调度通知（如facebook）？

> ID：16033579
> 
> 赞同：0
> 
> 时间：2013-04-16T09:38:29.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, notifications

我在我的 Rails 应用程序中使用 Heroku 调度。我有一个应用程序，用户可以在其中创建具有开始日期和结束日期的任务。还有一个待处理的选项卡，其中列出了所有待处理的任务。现在我正在使用 Heroku 调度来检查未完成的任务（当前日期 > 目标日期），并通过一封电子邮件通知将其自动发送到待处理选项卡。

现在我想在我的应用程序中添加一个通知，如果用户登录，那么他可以通过一个通知查看所有未完成（或待处理）的任务。

如何在我的应用程序中添加 heroku 调度通知？

# math - 从一组点中找到多项式函数

> ID：16033580
> 
> 赞同：0
> 
> 时间：2013-04-16T09:38:29.920
> 
> 标签：math, linear-algebra, point, polynomial-math

我有很多点集。都有 ax 和 ay 坐标。我需要的是在 vb.net 中找出一个尽可能接近地描述这些点的多项式函数。有人知道如何做到这一点吗？

每组有18分！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:01:14.153

这是一个众所周知的问题，根据您的需求，有许多解决方案。使用切比雪夫多项式是一种流行的解决方案。这一切都取决于你的观点的性质：虽然你可以很高兴地强制出一个最小阶拟合（在你的情况下是十七阶），但它通常会剧烈振荡，并且可能不是你想要的。您需要的平滑程度取决于问题。

在 Matlab、Mathematica 甚至 Python 中，有一些方法可以做这种事情：

*   [需要使用切比雪夫多项式基础拟合多项式](https://stackoverflow.com/questions/11993722/need-to-fit-polynomial-using-chebyshev-polynomial-basis)
*   [迭代多项式乘法——Python中的切比雪夫多项式](https://stackoverflow.com/questions/5888092/iterative-polynomial-multiplication-chebyshev-polynomials-in-python)

您可能必须在 VB.net 中自行开发。从阅读[维基百科](http://en.wikipedia.org/wiki/Polynomial_interpolation)开始；如果您只想实现这些东西，那么数学并不是特别繁重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:50:37.977

这不是特定于语言的问题，并且可能没有 API 可以帮助您直接解决此问题。

但是，可以将问题建模为求解线性系统，希望您可以从一些线性代数库中获得一些帮助。

看看[这里](https://en.wikipedia.org/wiki/System_of_linear_equations#Solving_a_linear_system)。

# iphone - iPhone 5 视网膜显示 2x 图像

> ID：16033582
> 
> 赞同：3
> 
> 时间：2013-04-16T09:38:35.553
> 
> 标签：iphone, ios, objective-c

为了将 iPhone 迁移到 Retina 设备，我们必须准备具有双倍尺寸分辨率的图像并将其命名为“@2x”，以便 IOS 将自动在 Retina 设备中使用 2x 图像。

我的问题是，如果我违反规则并创建三倍尺寸（或大于两倍尺寸）的图像，但将其命名为“@2x”作为 Apple 法规状态，该怎么办。Apple 会拒绝我的应用程序上传到 AppStore 吗？

我这样做的原因是当我设置背景图像时，我做了如下：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed: @"background.png"]]; 
```

在 iPhone 5 的视网膜显示屏中，双倍尺寸的图像无法正确融入背景，因为 iPhone 5 的高度不仅仅是双倍尺寸，它就像双倍尺寸加上额外的像素。这就是为什么我想将背景图像自定义为大于两倍大小的原因。

我真的不想在我的应用程序中添加额外的代码来手动检查设备类型并加载相应的图像，因为 IOS 有更好和方便的方法。

我担心在这种情况下苹果会拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:06:49.963

如果您创建“错误”尺寸/分辨率的图像，Apple 不会拒绝您的应用程序。但是，这样做通常没有意义。

`@2x`表示分辨率，iPhone 4/4S 和 iPhone 5 的分辨率相同。唯一的区别是屏幕的高度。

此外，您应该将 a`UIImageView`用于大型背景图像（更好的内存管理和性能）。

将此添加到您的类文件或项目的前缀文件中：

```
#define deviceIsIPhone5 ([UIScreen mainScreen].applicationFrame.size.height == 568 ? YES : NO) 
```

在你的`viewDidLoad`（或类似的地方）：

```
if (deviceIsIPhone5) 
{
    self.backgroundImage.image = [UIImage imageNamed:@"background-568h@2x.png"];
} 
else
{
    self.backgroundImage.image = [UIImage imageNamed:@"background@2x.png"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T10:27:24.127

不，该应用程序不会被拒绝。

像你所做的那样，这不是一个好方法。当您的应用在非视网膜硬件上运行时，将使用普通图像，而每当您使用视网膜硬件时，将自动使用@2x 图像。

给出两个图像是空闲的。

# ios - 如何使用Core Plot避免某个物理区域中的轴标签

> ID：16033583
> 
> 赞同：0
> 
> 时间：2013-04-16T09:38:36.097
> 
> 标签：ios, core-plot

我正在使用 Core Plot 随时间绘制图表，当前将 x 轴的 labelingPolicy 设置为`CPTAxisLabelingPolicyAutomatic`. 但是，我想使用右下角来绘制图像。所以我需要防止情节在该区域绘制标签。我考虑过使用 labelExclusionRanges，但这需要从物理大小映射到时间值范围。有没有更简单的方法来实现我的目标？

尝试将 Eric 的答案翻译成代码给我一个图像，但它现在放置在 x 轴旁边，而我真的希望它在 x 轴*标签*的右侧。它也部分脱离了图表的主机视图......

[更新：需要设置 layer.frame 才能真正看到图像。]

```
- (void)annotateXAxisOfGraph:(CPTGraph *)graph withImage:(CPTImage *)image
{
    CPTBorderedLayer *layer = [[[CPTBorderedLayer alloc] init] autorelease];
    layer.fill = [CPTFill fillWithImage:image];
    layer.frame = CGRectMake(0.0f, 0.0f, 40.0f, 40.0f);
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTLayerAnnotation *layerAnnotation = [[[CPTLayerAnnotation alloc] initWithAnchorLayer:axisSet.xAxis] autorelease];
    layerAnnotation.contentLayer = layer;
    layerAnnotation.rectAnchor = CPTRectAnchorBottomRight;
    [graph addAnnotation:layerAnnotation];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:18:12.970

制作 a`CPTBorderedLayer`并使用您的图像制作其`fill`. 将此图层用作图层注释的内容图层，并将注释附加到图形的所需位置。

# c# - 如何转换字典 > 到词典 >?

> ID：16033589
> 
> 赞同：2
> 
> 时间：2013-04-16T09:38:45.713
> 
> 标签：c#, .net, performance, dictionary, ienumerable

我有一个返回`IDictionary<TKey, List<TValue> >`.
我有另一个需要`IDictionary<TKey, IEnumerable<TValue> >`.

我需要将第一个函数的返回值传递给第二个函数。
编译器不想将第一个隐式转换为第二个。那么如何在 O(1) 中将第一个转换为第二个呢？

我总是可以写一个转换函数

```
public static IDictionary<TKey, IEnumerable<TValue>> ToIEnumerable<TKey, TValue>(this IDictionary<TKey, List<TValue>> source)
{
    return source.ToDictionary(s => s.Key, s => s.Value.AsEnumerable());
} 
```

但我很确定这不是 O(1)，更像是 O(log n)。

这里有一个相关问题：[嵌套接口：Cast IDictionary< TKey, IList< TValue >> to IDictionary< TKey, IEnumerable < TValue>>？](https://stackoverflow.com/questions/10399568/nested-interfaces-cast-idictionarytkey-ilisttvalue-to-idictionarytkey-ie?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:03:16.117

考虑您的第二个功能，即

```
 takes a IDictionary<TKey, IEnumerable<TValue> > 
```

现在，如果你给我 a `IDictionary<TKey, IEnumerable<TValue>>`，我应该能够做的一件事就是将其中一个键的值设置为 a `new TValue[]`，对吧？毕竟， a`TValue[]`是一个`IEnumerable<TValue>`，所以它满足约束。

但是，如果你给我的东西是（在界面下面） a `IDictionary<TKey, List<TValue>>`，我绝对*不应该*被允许将 a 的值设置为 a `TValue[]`，因为 a`TValue[]`不是 a `List<TValue>`！

当然，这正是您所链接的问题中的问题。

现在，如果您很高兴只**阅读**我传递给您的参数，那么您有一个从字典移动到 的潜在解决方案[`ILookup<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/bb534291.aspx)，这有点像从键到值*列表的**只读*字典。如果您的方法分别返回和接受，当然没有问题。*`ILookup<TKey, TValue>`*

# xcode - MFMailComposeViewController - 只读视图

> ID：16033599
> 
> 赞同：0
> 
> 时间：2013-04-16T09:39:21.370
> 
> 标签：xcode, security, email

我了解 Apple 不希望来自应用程序的潜在垃圾邮件。

我理解询问用户是否真的想发送电子邮件的必要性。

但我们至少不能阻止他改变内容吗？

我需要这个，因为我的应用程序将使用户能够发送日志并最终将 db 文件发送到支持服务，就像许多桌面应用程序通过一次确认发送崩溃报告一样。

我知道我可以使用 Web 服务来请求服务器为我发送电子邮件，但由于我的应用程序是内部公司的应用程序，所涉及的安全性非常严格，不允许这样做。

**所以问题是：**

有没有办法从 iOS 应用程序发送电子邮件而不允许用户更改收件人、标题或内容？

* * *

更新：我需要用户看到他只能选择确认或取消邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-21T16:23:36.393

我的解决方案是在部分视图上添加一个带有 lightText UIColor 的 UIView。我做到了，所以我只能按取消或发送。

我没有向它添加任何自动调整大小的蒙版，因为我的应用程序只是纵向的。因此，如果您需要支持横向，您也需要添加它。

```
 MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
    UIView *blanket = [[UIView alloc] init];
    CGRect blanketFrame = mailController.view.frame;
    blanketFrame.size.height -= 40;
    blanketFrame.origin.y += 40;
    blanket.frame = blanketFrame;
    blanket.backgroundColor = [UIColor lightTextColor];
    [mailController.view addSubview:blanket]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:32:37.247

如果您需要用户只能选择取消或发送，似乎答案是否定的

# video - 视频中的 Popcorn.js 循环

> ID：16033600
> 
> 赞同：1
> 
> 时间：2013-04-16T09:39:30.560
> 
> 标签：video, html5-video, popcornjs

我正在使用 Popcorn.js 制作交互式视频，但我对 JavaScript 还是很陌生。我正在尝试循环播放视频中的特定部分。我正在尝试一个 if 语句，当达到当前时间时，当前时间将被设置回来。不幸的是，这不起作用。

```
function loop() {
    var video = document.getElementById('video');
    if (video.currentTime = 82)
    { 
        (video.currentTime = 77)
    }
} 
```

你们中有人有建议/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:06:48.353

所以，我面前没有任何东西可以验证这一点，但你应该可以通过附加到`timeupdate`事件来做到这一点。你应该可以这样做：

```
document.getElementById('video').timeupdate = function () {
    var video = document.getElementById('video');
    if (video.currentTime == 82) {
        video.currentTime = 77
    }
}; 
```

您可以在与整个应用程序相关的任何地方执行此操作。

# android - 如何在 Android 中使用 Fragments

> ID：16033602
> 
> 赞同：17
> 
> 时间：2013-04-16T09:39:38.473
> 
> 标签：android, android-fragments

编辑 ::: 请参考下面我的回答...

问题：：：

我对在 Android 中使用 Fragments 非常陌生，我完全搞砸了。

我只是想构建一个使用片段的简单示例应用程序。我的情况是，我的主要活动中有两个片段。第一个片段有一个编辑文本和一个按钮。第二个片段有一个文本视图。当我在编辑文本中输入名称并单击按钮时，第二个片段中的文本视图应显示在第一个片段的编辑文本中输入的名称。

我正在使用片段的静态分配（在 XML 中分配片段）。

请参阅下面的 XML 文件和代码...

activity_main.XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/fragment_content_1"
        android:name="com.example.fragmentexample.fragment_fragment_1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </fragment>

    <fragment
        android:id="@+id/fragment_content_2"
        android:name="com.example.fragmentexample.fragment_fragment_2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <!-- Preview: layout=@layout/fragment_basic -->
    </fragment>

</LinearLayout> 
```

fragment_fragment_1.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/edtxtPersonName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btnSayHi"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Say Hi" />

</LinearLayout> 
```

fragment_fragment_2.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtViewResult"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="I will say Hi" />

</LinearLayout> 
```

Java 文件 :::

MainActivity.Java

```
 public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    } 
```

片段_1.Java

```
public class Fragment_1 extends Fragment{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub      

        View view = inflater.inflate(R.layout.fragment_fragment_1, container, false);

        final EditText edtxtPersonName_Fragment = (EditText) view.findViewById(R.id.edtxtPersonName);
        Button btnSayHi_Fragment = (Button) view.findViewById(R.id.btnSayHi);

        btnSayHi_Fragment.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String name = edtxtPersonName_Fragment.getText().toString();

                FragmentManager fm = getFragmentManager();
                Fragment_2 f2 = (Fragment_2) fm.findFragmentById(R.id.fragment_content_2);

                if(f2 != null && f2.isInLayout())
                {
                    f2.setName(name);
                }

                Activity activity = getActivity();

                if(activity != null)
                {
                    Toast.makeText(activity, "Say&ing Hi in Progress...", Toast.LENGTH_LONG).show();
                }
            }
        });

        return view;

    }

} 
```

片段_2.Java

```
public class Fragment_2 extends Fragment{

    View view;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        view = inflater.inflate(R.layout.fragment_fragment_2, container, false);        
        return view;
    }

    public void setName(String name)
    {
        TextView txtName = (TextView) view.findViewById(R.id.txtViewResult);
        txtName.setText("Hi " + name);
    }

} 
```

当我运行应用程序时，有很多异常.. 这是 logcat 跟踪..

```
04-16 15:06:48.781: E/AndroidRuntime(420): FATAL EXCEPTION: main
04-16 15:06:48.781: E/AndroidRuntime(420): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentexample/com.example.fragmentexample.MainActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.os.Looper.loop(Looper.java:132)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread.main(ActivityThread.java:4123)
04-16 15:06:48.781: E/AndroidRuntime(420):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 15:06:48.781: E/AndroidRuntime(420):  at java.lang.reflect.Method.invoke(Method.java:491)
04-16 15:06:48.781: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-16 15:06:48.781: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-16 15:06:48.781: E/AndroidRuntime(420):  at dalvik.system.NativeStart.main(Native Method)
04-16 15:06:48.781: E/AndroidRuntime(420): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-16 15:06:48.781: E/AndroidRuntime(420):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Activity.setContentView(Activity.java:1786)
04-16 15:06:48.781: E/AndroidRuntime(420):  at com.example.fragmentexample.MainActivity.onCreate(MainActivity.java:12)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Activity.performCreate(Activity.java:4397)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
04-16 15:06:48.781: E/AndroidRuntime(420):  ... 11 more
04-16 15:06:48.781: E/AndroidRuntime(420): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.fragmentexample.fragment_fragment_1: make sure class name exists, is public, and has an empty constructor that is public
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Fragment.instantiate(Fragment.java:567)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Fragment.instantiate(Fragment.java:535)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Activity.onCreateView(Activity.java:4168)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
04-16 15:06:48.781: E/AndroidRuntime(420):  ... 21 more
04-16 15:06:48.781: E/AndroidRuntime(420): Caused by: java.lang.ClassNotFoundException: com.example.fragmentexample.fragment_fragment_1 in loader dalvik.system.PathClassLoader[/data/app/com.example.fragmentexample-1.apk]
04-16 15:06:48.781: E/AndroidRuntime(420):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
04-16 15:06:48.781: E/AndroidRuntime(420):  at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
04-16 15:06:48.781: E/AndroidRuntime(420):  at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
04-16 15:06:48.781: E/AndroidRuntime(420):  at android.app.Fragment.instantiate(Fragment.java:557)
04-16 15:06:48.781: E/AndroidRuntime(420):  ... 24 more 
```

我已经看到了有关如何执行此操作的示例，但无法弄清楚。请指出我做错的地区，也请张贴正确的做法。

非常感谢您的时间...

编辑 ：：：

我已更改 MainActivity.java 以扩展 FragmentActivity 而不是 Activity 并且还更改了 activity_main.xml 中的 android:name 值以指向 Java 文件而不是片段...

我得到以下异常:::

```
04-16 15:29:43.821: E/AndroidRuntime(563): FATAL EXCEPTION: main
04-16 15:29:43.821: E/AndroidRuntime(563): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentexample/com.example.fragmentexample.MainActivity}: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.os.Looper.loop(Looper.java:132)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread.main(ActivityThread.java:4123)
04-16 15:29:43.821: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 15:29:43.821: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:491)
04-16 15:29:43.821: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-16 15:29:43.821: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-16 15:29:43.821: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
04-16 15:29:43.821: E/AndroidRuntime(563): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class fragment
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-16 15:29:43.821: E/AndroidRuntime(563):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.Activity.setContentView(Activity.java:1786)
04-16 15:29:43.821: E/AndroidRuntime(563):  at com.example.fragmentexample.MainActivity.onCreate(MainActivity.java:13)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.Activity.performCreate(Activity.java:4397)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
04-16 15:29:43.821: E/AndroidRuntime(563):  ... 11 more
04-16 15:29:43.821: E/AndroidRuntime(563): Caused by: java.lang.ClassCastException: com.example.fragmentexample.Fragment_1 cannot be cast to android.support.v4.app.Fragment
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.support.v4.app.Fragment.instantiate(Fragment.java:394)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
04-16 15:29:43.821: E/AndroidRuntime(563):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:660)
04-16 15:29:43.821: E/AndroidRuntime(563):  ... 21 more 
```

这是 activity_main.xml 更改后的 XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/fragment_content_1"
        android:name="com.example.fragmentexample.Fragment_1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </fragment>

    <fragment
        android:id="@+id/fragment_content_2"
        android:name="com.example.fragmentexample.Fragment_2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <!-- Preview: layout=@layout/fragment_basic -->
    </fragment>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T10:20:37.313

Okie...终于找到了解决方案。大概，变化不大。

看看下面的代码...

**activity_main.XML**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/fragment_content_1"
        android:name="com.example.fragmentexample.Fragment_1"
        android:layout_width="0dip"
        android:layout_weight="0.50"
        android:layout_height="fill_parent" >
    </fragment>

    <fragment
        android:id="@+id/fragment_content_2"
        android:name="com.example.fragmentexample.Fragment_2"
        android:layout_width="0dip"
        android:layout_weight="0.50"
        android:layout_height="fill_parent" >

        <!-- Preview: layout=@layout/fragment_basic -->
    </fragment>

</LinearLayout> 
```

fragment_fragment_1 和 fragment_fragment_2 的布局保持不变。

**片段_1.Java**

```
public class Fragment_1 extends Fragment{

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // TODO Auto-generated method stub      

            View view = inflater.inflate(R.layout.fragment_fragment_1, container, false);

            final EditText edtxtPersonName_Fragment = (EditText) view.findViewById(R.id.edtxtPersonName);
            Button btnSayHi_Fragment = (Button) view.findViewById(R.id.btnSayHi);

            btnSayHi_Fragment.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String name = edtxtPersonName_Fragment.getText().toString();

                    FragmentManager fm = getFragmentManager();
                    Fragment_2 f2 = (Fragment_2) fm.findFragmentById(R.id.fragment_content_2);

                    if(f2 != null && f2.isInLayout())
                    {
                        f2.setName(name);
                    }

                    Activity activity = getActivity();

                    if(activity != null)
                    {
                        Toast.makeText(activity, "Say&ing Hi in Progress...", Toast.LENGTH_LONG).show();
                    }
                }
            });

            return view;

        }

    } 
```

**片段_2.Java**

```
public class Fragment_2 extends Fragment{

    View view;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        view = inflater.inflate(R.layout.fragment_fragment_2, container, false);        
        return view;
    }

    public void setName(String name)
    {
        TextView txtName = (TextView) view.findViewById(R.id.txtViewResult);
        txtName.setText("Hi " + name);
    }

} 
```

**这是屏幕截图...**

![在此处输入图像描述](https://i.stack.imgur.com/FQw3Z.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:45:35.147

您需要向 Fragments 添加一个空的公共构造函数，就像堆栈跟踪中所说的那样：

```
public class Fragment_2 extends Fragment{

    public Frament_2() {
        //BLAH!
    }

    // The rest of your code

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-01T15:32:45.020

这是两个 Fragment 之间通信的经典案例。
但让我们先介绍更基本的东西。

**碎片的骨架**

> 第一个片段
> 
> 编辑文本
> 按钮

```
public class FirstFragment extends Fragment{

      private EditText editext;
      private Button button;

      public static FirstFragment getInstance(){  
           return new FirstFragment();
      }

      public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle bundle){
           View view = inflater.inflate(R.Layout.fragment1,parent,false);
           editext = (EditText)view.findViewById(R.id.editText)
           button = (Button)view.findViewById(R.id.button)
           return view;               

      }

} 
```

> 第二片段
> 
> 文本视图

```
public class SecondFragment extends Fragment{

      private TextView textView;

      public static SecondFragment getInstance(){  
           return new SecondFragment();
      }

      public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle bundle){
           View view = inflater.inflate(R.Layout.fragment2,parent,false);
           textView = (TextView)view.findViewById(R.id.editText)
           return view;               

      }

      public void showMessage(String msg)
      {
           textView.setText(msg)
      }

} 
```

**如何创建片段实例**

```
FirstFragment fragmne1 = FirstFragment.getInstance();
SecondFragment fragmne1 = SecondFragment.getInstance(); 
```

**如何在活动中添加它们？**

```
getSupportFragmentManager()
         .beginTransaction()
         .add(R.id.placeholder1,fragment1,"TAG1")
         .add(R.id.placeholder2,fragment2,"TAG2")
         .commit(); 
```

## 现在是通讯部分

**创建接口**

```
public interface FragmentListener{
     public void buttonClicked();
} 
```

**在Activity中实现这个接口并覆盖方法**

```
public MyActivity extends AppcompatActivity implements MyFragmentListener{

     @Override
     public void buttonClicked(){
          fragment2.showMessage(String msg);
     }

} 
```

**从 Fragment 发送数据**

1.  在 FirstFragment 中初始化监听器
2.  在按钮单击时调用接口方法。

> FirstFragment 的最终结构

```
public class FirstFragment extends Fragment{

      private EditText editext;
      private Button button;
      private MyFragmentListener listener;

      public static FirstFragment getInstance(){  
           return new FirstFragment();
      }

      public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle bundle){
           View view = inflater.inflate(R.Layout.fragment1,parent,false);
           editext = (EditText)view.findViewById(R.id.editText)
           button = (Button)view.findViewById(R.id.button)

           // button click method 
           listener.buttonClicked(editText.getText().toString());

           return view;               

      }

      @Override 
      public void onAttach(Context context){
           listener = (MyFragmentListener)context;
      }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:18:07.457

请按如下方式编辑您的 activity_main.XML AS。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

<fragment
    android:id="@+id/fragment_content_1"
    android:name="com.example.fragmentexample.fragment_fragment_1"
    class="com.example.fragmentexample.fragment_fragment_1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</fragment>

<fragment
    android:id="@+id/fragment_content_2"
    android:name="com.example.fragmentexample.fragment_fragment_2"
    class="com.example.fragmentexample.fragment_fragment_2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <!-- Preview: layout=@layout/fragment_basic -->
</fragment>
</LinearLayout> 
```

# android - Android中的片段外观问题

> ID：16033607
> 
> 赞同：0
> 
> 时间：2013-04-16T09:39:49.577
> 
> 标签：android, fragment, show

我目前正在学习 android 片段编程几个小时，但是我的片段没有出现。我没有收到任何错误。调试显示片段类的 onCreateView() 从未被调用。

这是我的主要布局 activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<LinearLayout
    android:id="@+id/FragCont"
    android:layout_width="100dp"
    android:layout_height="200dp"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@+id/textView1"
    android:orientation="vertical" >

</LinearLayout> 
```

这是我的主要活动：

```
package k.myApp;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;

import android.os.Bundle;
import android.app.Activity;
import android.app.FragmentTransaction;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {

SherlockFragment Fragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    CentralData.getDataSource().open();
    CentralData.getDataSource().close();

    FragmentShowNotes fsn = new FragmentShowNotes();
    FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(R.id.FragCont, fsn);
    transaction.commit();
}
} 
```

这是我的片段类，FragmentShowNotes.java: package k.myApp;

```
import org.holoeverywhere.LayoutInflater;

import android.app.Fragment;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;

public class FragmentShowNotes extends Fragment{

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
        return inflater.inflate(R.layout.frag_show_notes, container, false);
}
} 
```

最后但并非最不重要的是我的片段布局，frag_show_notes.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Dies ist das ShowNotesFragment" />

</LinearLayout> 
```

有人知道出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:43:49.767

尝试

```
getSupportFragmentManager (you use SherlockActionBar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:14:47.513

谢谢大家的帮助！现在我编写了一个新项目，只有片段，没有 Holoeverwhere，它工作了。

我的项目中的错误在片段类中：我导入了 org.holoeverywhere.LayoutInflater，将其更改为 android.view.LayoutInflater 解决了它。我希望这不会影响旧设备上的 Holo 风格，但我相信不会:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:48:07.360

试试这样

```
getSupportFragmentManager().beginTransaction().add(android.R.id.content, fsn).commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:56:19.110

另一种方法是将您的 Linearlayout 替换为 com.actionbarsherlock.app.SherlockFragment.FragmentShowNotes

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-11T14:52:03.030

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.example.ripa.chatapplication.FriendsFragment">

    <android.support.v7.widget.RecyclerView
        android:id="@+id/friends_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </android.support.v7.widget.RecyclerView>

</RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content">

    <de.hdodenhof.circleimageview.CircleImageView
        android:layout_width="90sp"
        android:layout_height="90sp"
        android:src="@drawable/index"
        android:id="@+id/user_single_image" />

    <TextView
        android:id="@+id/user_single_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentEnd="true"
        android:layout_alignParentTop="true"
        android:layout_marginEnd="50dp"
        android:layout_marginTop="11dp"
        android:text="Display Name"
        android:textColor="#000000"
        android:textSize="25sp" />

    <TextView
        android:id="@+id/user_single_status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/user_single_image"
        android:layout_alignEnd="@+id/user_single_name"
        android:layout_marginBottom="12dp"
        android:text="@string/user_default_status"
        android:textColor="#000000"
        android:textSize="20sp" />

</RelativeLayout>

package com.example.ripa.chatapplication;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.firebase.ui.database.FirebaseRecyclerAdapter;
import com.google.firebase.auth.FirebaseAuth;
import com.google.firebase.database.DataSnapshot;
import com.google.firebase.database.DatabaseError;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import com.google.firebase.database.ValueEventListener;

import java.util.jar.Attributes;

/**
 * A simple {@link Fragment} subclass.
 */
public class FriendsFragment extends Fragment {
    private RecyclerView mFriendsList;
    private DatabaseReference mUsersDatabase;
    private DatabaseReference mFriendsDatabase;
    private String mCurrent_user_id;
    private FirebaseAuth mAuth;
    private View mMainView;

    public FriendsFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        mMainView = inflater.inflate(R.layout.fragment_friends, container, false);

        mFriendsList =(RecyclerView)mMainView.findViewById(R.id.friends_list);
        mAuth =FirebaseAuth.getInstance();
        mCurrent_user_id =  mAuth.getCurrentUser().getUid();
        mFriendsDatabase = FirebaseDatabase.getInstance().getReference().child("Friends").child(mCurrent_user_id);
        mUsersDatabase = FirebaseDatabase.getInstance().getReference().child("Users");

        mFriendsList.setHasFixedSize(true);
        mFriendsList.setLayoutManager(new LinearLayoutManager(getContext()));

        return mMainView;

    }

    @Override
    public void onStart() {
        super.onStart();

        FirebaseRecyclerAdapter<Friends, FriendsViewHolder> FriendsRecylerViewAdapter = new FirebaseRecyclerAdapter<Friends, FriendsViewHolder>(

                Friends.class,
                R.id.users_single_layout,
                FriendsViewHolder.class,
                mFriendsDatabase

        ) {
            @Override
            protected void populateViewHolder(final FriendsViewHolder friendsViewHolder, Friends friends, int i) {

                friendsViewHolder.setDate(friends.getDate());

                String list_user_id =getRef(i).getKey();
                mUsersDatabase.child(list_user_id).addValueEventListener(new ValueEventListener() {
                    @Override
                    public void onDataChange(DataSnapshot dataSnapshot) {

                        String userName = dataSnapshot.child("name").getValue().toString();
                        String userThumb =dataSnapshot.child("thumb_image").getValue().toString();

                        friendsViewHolder.setName(userName);

                    }

                    @Override
                    public void onCancelled(DatabaseError databaseError) {

                    }
                });

            }
        };
        mFriendsList.setAdapter(FriendsRecylerViewAdapter);

    }

    public static class FriendsViewHolder extends RecyclerView.ViewHolder{
         View mView;

        public FriendsViewHolder(View itemView) {
            super(itemView);
            mView = itemView;

        }

        public void setDate(String date){

            TextView userNameView =(TextView) mView.findViewById(R.id.user_single_status);
            userNameView.setText(date);

        }

        public  void setName(String name){

            TextView userNameView =(TextView) mView.findViewById(R.id.user_single_name);
            userNameView.setText(name);

        }
    }
} 
```

# java - weblogic.application.ModuleException: Context path '' is already in use by the module: / application:

> ID：16033609
> 
> 赞同：11
> 
> 时间：2013-04-16T09:39:54.547
> 
> 标签：java, webserver, weblogic, weblogic12c

When i am trying to run weblogic server 12c , it is throwing this error and is unable to start.

```
 <Apr 16, 2013 2:42:57 PM IST> <Warning> <HTTP> <BEA-101384> <WLServlet annotation is deprecated, please use servlet 3.0 annotation instead. App:acsportal@acs-portal.war, Class:oracle.adfinternal.view.faces.activedata.AdsServlet>
    <Apr 16, 2013 2:42:58 PM IST> <Error> <Deployer> <BEA-149205> <Failed to initialize the application "acsportal" due to error weblogic.application.ModuleException: Context path '' is already in use by the module: / application: acs-portal
    weblogic.application.ModuleException: Context path '' is already in use by the module: / application: acs-portal
            at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:732)
            at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:188)
            at weblogic.application.internal.ExtensibleModuleWrapper.prepare(ExtensibleModuleWrapper.java:83)
            at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:100)
            at weblogic.application.internal.flow.ModuleStateDriver$1.next(ModuleStateDriver.java:172)
            Truncated. see log file for complete stacktrace

Caused By: weblogic.application.ModuleException: Context path '' is already in use by the module: / application: acs-portal

            at weblogic.servlet.internal.WebAppModule.validateContextPath(WebAppModule.java:1392)
            at weblogic.servlet.internal.WebAppModule.registerWebApp(WebAppModule.java:1238)
            at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:723)
            at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:188)
            at weblogic.application.internal.ExtensibleModuleWrapper.prepare(ExtensibleModuleWrapper.java:83)
            Truncated. see log file for complete stacktrace 
```

After this error, the server hanged at this point

```
<Apr 16, 2013 2:43:58 PM IST> <Warning> <WorkManager> <BEA-002919> <Unable to find a Work Manager with name wm/ProvisionWorkManager. Dispatch policy wm/ProvisionWorkManager will map to the default Work Manager for the application acs-portal> 
```

and is not starting after this line kindly help how to resolve this error.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-27T12:36:12.477

1.  Stop the weblogic server
2.  Remove all war files from the 'autodeploy' folder in weblogic.
3.  Then start the weblogic server again
4.  After that type the URL "http:// localhost:7001/console/" in browser
5.  Go to " Configure applications" link
6.  Then select previous projects and the go stop -> When work completes

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-06T14:00:51.477

1.  Go to Weblogic's `config.xml`
2.  Locate all `<app-deployment>` sections.
3.  Delete them (you may want to backup it somewhere).

In my case it was more than thirty instances of our application:

```
<app-deployment>
    <name>deploy_ear_ear_exploded</name>
    <target>AdminServer</target>
    <module-type>ear</module-type>
    <source-path>*path_to_application*</source-path>
    <security-dd-model>DDOnly</security-dd-model>
  </app-deployment> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-08T08:44:25.783

For me works:

1) Uninstall all previous deployments (all ears)

2) Stop de server

3) Go to user_projects/domains/base_domain/servers/AdminServer/tmp and delete all content in this folder (you can back up the content)

4) Start and deploy

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-14T09:57:03.223

1.  Start the server
2.  Go to deployments ( [http://localhost:7001/console/console.portal?_nfpb=true&_pageLabel=AppDeploymentsControlPage](http://localhost:7001/console/console.portal?_nfpb=true&_pageLabel=AppDeploymentsControlPage) )
3.  Remove war deployments
4.  Then restart, it should works

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T15:02:07.497

I also had this issue with the following message :

```
Context path '/geff' is already in use by the module: /geff application: geff 
```

I went to WebLogic Server --> Deployments. Here I had the 'geff' deployment. I deleted it, went into Eclipse --> 'Servers' view --> 'Add and Remove' on my server --> 'Add' the deployment I want.

And then it was solved.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T22:48:09.880

It happens to me because I manually deployed wls-cat.war in localhost:7001/console. But actually it's not necessary. When I tried to visit localhost:7001/wls-cat, weblogic is deploying wls-cat.war automatically. While the path '/wls-cat' has been occupied by the manually deployed wls-cat.war, it failed by the error:

> Problem occurred while dispatching servlet request.
> 
> ......
> 
> Caused By: weblogic.application.ModuleException: Context path '/wls-cat' is already in use by the module: wls-cat.war application: wls-cat

To fix it, just delete the manually deployed one(s), and visit localhost:7001/wls-cat Weblogic will deploy it.

So I suppose the main reason this error happens is the path has been used by another application. Check all the deployed applications in your console and delete them or change their package names.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-04T19:29:20.773

You may use the configuration wizard and recreate the Server. For the integrated server I deleted the whole DefaultDomain folder and JDeveloper recreate the Web Server again.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-08T12:00:11.000

use command: **docker system prune** Than just build and run all the containers again

# ruby-on-rails-3 - delay_job 更新查询无限运行

> ID：16033610
> 
> 赞同：13
> 
> 时间：2013-04-16T09:39:57.470
> 
> 标签：ruby-on-rails-3, delayed-job

我在我的 rails 应用程序中使用delayed_job 和delayed_job_active_record 来执行后台作业。我们正在使用基于队列的delayed_job。为了启动延迟，我使用以下命令。

```
RAILS_ENV=staging script/delayed_job -i=1 --queue=queue_name start 
```

问题是下面的查询无限触发。

```
SQL (0.4ms)  UPDATE `delayed_jobs` SET `locked_at` = '2013-04-16 09:27:23', `locked_by` = 'delayed_job.=2 host:ip-10-204-210-77 pid:2168' WHERE `delayed_jobs`.`queue` IN ('queue_name') AND ((run_at <= '2013-04-16 09:27:23' AND (locked_at IS NULL OR locked_at < '2013-04-16 05:27:23') OR locked_by = 'delayed_job.=2 host:ip-10-204-210-77 pid:2168') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 
```

delay_job 计数为零。因此，应用程序非常慢，并且页面在很多地方都没有加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T18:08:30.787

我认为您的意思是`delayed_job` *轮询过于频繁*（顺便说一下`5`，默认情况下是每秒一次）-我知道这会填满您的日志，并且*似乎*“无限”.. :)

如果这就是您的意思，那么我建议您运行无用的[gem](https://github.com/lostboy/workless)。它只会`delayed_job`根据需要开始。许多人使用它来防止他们的[Heroku](https://www.heroku.com/) worker dynos 闲置，但它在`development`模式下也能正常工作。

请注意，如果您使用[delay_job_active_record](https://github.com/collectiveidea/delayed_job_active_record)，您还需要添加`gem 'daemons'`到您的`Gemfile`( [daemons](https://rubygems.org/gems/daemons) )。请参阅 的[运行作业部分`delayed_job`](https://github.com/collectiveidea/delayed_job)。

因此，您`Gemfile`将包含：

```
gem 'delayed_job_active_record'
gem 'daemons'
gem 'workless' 
```

如果您需要更多指导，请在下面的评论中告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-01T18:11:38.047

我不得不使用 AR 的`silence`方法，只需在`[path/to/delayed_job_active_record/gem]/delayed_job_active_record-[any.latest.version]/lib/delayed/backend/active_record.rb`第 68 行左右更改文件：

```
count = ready_scope.limit(1).update_all(:locked_at => now, :locked_by => worker.name) 
```

至

```
count = silence {ready_scope.limit(1).update_all(:locked_at => now, :locked_by => worker.name)} 
```

肮脏的解决方案，我知道，但它有效......欢迎提出更好的包装，但对我来说，`Job.reserve`方法足够大，可以杀死任何想法来覆盖它`config/initializers`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T09:19:59.227

所以这是一个专门为 Postgres 设计的查询。请参阅[https://github.com/collectiveidea/delayed_job_active_record/blob/master/lib/delayed/backend/active_record.rb#L57](https://github.com/collectiveidea/delayed_job_active_record/blob/master/lib/delayed/backend/active_record.rb#L57)了解为什么必须这样。

延迟作业的想法确实是它会定期查询数据库，因此只要工作人员正在运行，您问题中的查询就会被触发。这应该每秒发生一次，我无法想象这会对您的应用程序的性能产生重大影响。

您是否在非常有限的硬件上运行，例如非常小的虚拟机？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-05T09:45:49.150

> 我遇到了同样的问题，我通过在队列字段上添加索引来解决它。

```
def self.up
  create_table :delayed_jobs, :force => true do |table|
  # Add index on queue field
  add_index :delayed_jobs, [:queue], :name => 'delayed_jobs_queue'
end 
```

有关更多信息，请访问以下文档[http://himarsh.org/cautions-on-delayed-jobs/](http://himarsh.org/cautions-on-delayed-jobs/)

# php - 使用 cookie 提交 PHP 后保留表单值

> ID：16033612
> 
> 赞同：1
> 
> 时间：2013-04-16T09:40:00.120
> 
> 标签：php, forms, cookies

我正在寻找一种在使用 cookie 提交后保留表单值的方法（在转到 page2 并返回 page_form 之后）。我真的很努力，但我需要你们帮助。

我试过了，但没有用

```
<? php
if (isset($_POST['Infos_test']))
{
$expire = 8*3600; 
setcookie("Infos_test", $_POST['from']&|&$_POST['area_html'], time()+$expire);  
}
?> 
```

......

```
<?php
if (isset($_COOKIE['Infos_test']))
{
$Infos_test = explode("&|&", $_COOKIE['Infos_test']); 
}
?> 
```

......

```
<input type="text" name="from" style="width:350px"  value="<?php echo $Info_test[0]; ?>"/>

<textarea valign="top" name="area_html" style="width:350px; height:150px; resize:none;" /><?php echo $Info_test[1]; ?></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:43:27.323

我更喜欢在 cookie 之前使用 SESSION 变量。这是一个示例代码：

在表单接收页面上：

```
session_start();
$_SESSION['from'] = $_POST['from'];
$_SESSION['area_html'] = $_POST['area_html']; 
```

然后在您的其他页面上：

```
<?php session_start(); ?>
<!-- here is your html header etc -->
From: <?php echo $_SESSION['from']; ?><br>
Area HTML: <?php echo $_SESSION['area_html']; ?> 
```

请注意，该`session_start();`部分必须在任何其他 HTML 输出之前声明。

表单的 HTML 语法应为：

```
<input type="text" name="from" style="width:350px" value="<?php echo $_SESSION['from']; ?>" />
<textarea valign="top" name="area_html"><?php echo $_SESSION['area_html']; ?></textarea> 
```

请注意 INPUT 标记的类型以及如何将值插入 TEXTAREA 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:43:41.133

`$_SESSION`您可以使用变量而不是 cookie在 php 会话中保存表单值。

这里有几个教程可以帮助您做到这一点。

[会话_php 1](http://www.w3schools.com/php/php_sessions.asp) [会话_php 2](http://www.php.net/manual/en/intro.session.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:12:21.427

只需复制并粘贴此代码`test.php`并运行并刷新它.. 你就会明白它是如何工作的。

```
<?php
if (isset($_POST['sub'])) {

    echo "Values from POST <br />";
    echo "<pre>";
        print_r($_POST);
    echo "</pre>";

    $post_arr = $_POST;

    echo "<pre>";
        print_r($post_arr);
    echo "</pre>";

    echo "<pre>";
        print_r(serialize($post_arr));
    echo "</pre>";

    $expire = 8*3600; 
    setcookie("Cookie_Info", serialize($post_arr), time()+$expire); 

}

if (isset($_COOKIE['Cookie_Info'])) {
    $data = unserialize($_COOKIE['Cookie_Info']);
} else {
    $data = array(
        'from' => '',
        'area_html' => ''
    );
    /* in above array add what ever fields in a form with same field name */

}

echo "This is what we get from cookie";
echo "<pre>";
    print_r($data);
echo "</pre>";

?>

To view Cookie, it need browser refres one time <br />

<form name="test_form" method="post">

<input type="text" name="from" value="<?php echo $data['from']; ?>" /> <br />
<textarea rows="3" name="area_html" ><?php echo $data['area_html']; ?></textarea> <br />
<input type="submit" name="sub" value="Submit" />

</form> 
```

# blackberry - 黑莓 - 禁用剪切、复制和粘贴选项并禁用屏幕截图选项

> ID：16033615
> 
> 赞同：0
> 
> 时间：2013-04-16T09:40:03.390
> 
> 标签：blackberry, blackberry-jde

在我的黑莓应用程序中，我想禁用 edittext 和其他 html 内容上的剪切、复制和粘贴选项。而且我还需要禁用捕获应用程序中屏幕的屏幕截图。

谢谢明杜斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:26:24.580

尝试这个 -

```
super(NO_VERTICAL_SCROLL | 262144); // 262144 NO_SYSTEM_MENU_ITEMS 
```

这将隐藏默认菜单项。另请参阅以下[链接](http://supportforums.blackberry.com/t5/Java-Development/4-7-Removing-Switch-application-menu-item/td-p/241967)

# apache-flex - 如何将图标添加到 Adob e Flex 移动项目中的视图列表

> ID：16033616
> 
> 赞同：0
> 
> 时间：2013-04-16T09:40:04.890
> 
> 标签：apache-flex, list, icons, adobe, arraycollection

我想在我的 flex 移动项目中的视图列表中添加一个图标。我不确定如何处理这个问题。这是代码行，下面是视图的图像。

```
 <s:List id="calcList" width="100%" height="98%" alternatingItemColors="[#0099999,#990000]"
            change="calcList_changeHandler(event)" color="#FFFAF0" contentBackgroundColor="#fffdd0"
            fontWeight="normal" labelField="name" textAlign="left" >

        <s:dataProvider>

            <s:ArrayCollection id="calcListCollection">  
                <fx:Object viewID="A1c" name="A1c " category="Medical"/>
                <fx:Object viewID="BMI" name="BMI " category="Fitness"/>
                <fx:Object viewID="GPA" name="GPA " category="Education"/>
                <fx:Object viewID="Tip" name="Tip " category="Personal" />

            </s:ArrayCollection>
        </s:dataProvider>
    </s:List> 
```

![在此处输入图像描述](https://i.stack.imgur.com/jnVQ5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:23:56.570

创建了一个名为 MyIconRenderer.mxml 的 .MXML 组件

```
<!--?xml version="1.0" encoding="utf-8"?-->
   <s:IconItemRenderer
   xmlns:fx="http://ns.adobe.com/mxml/2009"
   xmlns:s="library://ns.adobe.com/flex/spark"
   iconField="icon"
   labelField="name"
   messageField="category"
   iconWidth="45"
   iconHeight="45"
/> 
```

然后通过调用渲染的项目“MyIconRenderer”在数组列表中实现代码，如下所示：

```
 itemRenderer="MyIconRenderer" 
```

然后将图标属性传递给您选择的列表的数组集合。

# mysql - Propel ORM 在一次保存中添加多对多关系数据

> ID：16033624
> 
> 赞同：2
> 
> 时间：2013-04-16T09:40:18.503
> 
> 标签：mysql, many-to-many, propel, relation

我有一个 Post 和 category 模型与 category_post 表有多对多的关系

在实际场景中，我想添加一个具有多个现有类别 ID 的帖子，例如

帖子有

```
 $postobj = new Post();
   $postobj->setTitle("First title");
   $postobj->setContent("First title"); 
```

我也有现有的带有 id 的类别

```
 $category_id = array(8,9,17,39) 
```

我想将上述类别的帖子保存在一个保存功能中，例如

```
 $postobj->save(); 
```

我不知道我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:23:54.543

好的，所以在测试之后，看起来 Propel 将在一个事务中执行如下代码，但不是一个数据库命中。这可能是使用 Propel 执行此操作的最有效方法，但是：

```
$postobj = new Post();
$postobj->setTitle("First title");
$postobj->setContent("First title");

$category_id = array(8,9,17,39)
for ($i=0,$l=sizeof($category_id); $i<$l; ++$i) {
  $cp = new CategoryPost();
  $cp->setPost($postobj);
  $cp->setCategoryId($category_id[$i]);
  $postobj->addCategoryPost($cp);
}
$postobj->save(); // this will save the Post AND the CategoryPost objects 
```

**更新** 如果您想将此代码放入允许您传递一些数据并保存它的辅助函数中，那么您可以这样做（**警告：这是未经测试的，小心**）：

```
class Post extends BasePost
{
  public function saveAllData($data, PropelPDO $con = null) {
    // might want to do some audits on input..
    $this->fromArray($data); // catches most data

    // add relationships
    if (isset($data['categoryIds']) && is_array($data['categoryIds'])) {
      for ($i=0,$l=sizeof($data['categoryIds']); $i<$l; ++$i) {
        $cp = new CategoryPost();
        $cp->setPost($this);
        $cp->setCategoryId($data['categoryIds'][$i]);
        $this->addCategoryPost($cp);
      }
    }

    // do the save
    // NOTE: you might want to do validations first, etc
    return $this->save($con);
  }
} 
```

然后你会像这样从你的脚本中调用它：

```
...
$data = array(
  "ColumnName"=>"value", // NOTE: the ColumnName must match the Propel column
  ...
  "CategoryIds"=>array(2,3,4,5)
);
$post = new Post();
$post->saveAllData($data); // careful, this could throw Exceptions 
```

# rest - Jersey 与 javax Servlet 发生冲突

> ID：16033631
> 
> 赞同：6
> 
> 时间：2013-04-16T09:40:29.550
> 
> 标签：rest, intellij-idea, jersey, web.xml

我正在使用 Jersey 和 Maven 设置一个简单的 REST 服务。对于大于 1.8 的 Jersey 版本，IntelliJ 中的 web.xml 会抛出此错误：

```
'com.sun.jersey.spi.container.servlet.ServletContainer' is not assignable to 'javax.servlet.Servlet' 
```

有谁知道如何解决这个问题以使用最新版本的泽西岛？

这是 web.xml

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     version="2.5">

<display-name>R Proxy</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/r-proxy-log4j.properties</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Jersey configuration -->
<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.fao.fenix.r.proxy.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>

<!-- Jersey configuration -->
<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-14T11:52:56.247

对于所有有相同问题的人 - 那是因为您的类路径中没有 servlet api。只需将 servlet-api 依赖项添加到您的项目中，一切都会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T18:03:42.057

我也在调查这个。这是我发现的，希望它可以帮助其他人：

1.  您的 web.xml 中可能有错误的 servlet 类。对于 Jersey 2.0 及更高版本，您应该使用组“org.glassfish”而不是旧的“com.sun.jersey”。所以，在你的 web.xml 中，你应该有：

    > ```
    > <servlet>
    >     ...
    >     <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    > </servlet> 
    > ```

2.  当我在同一个项目中无意中使用不同版本的 Jersey 时，我也遇到过这个问题。我的项目确实通过 Maven 导入了 Jersey 1.9 包，但我的代码编辑器在项目类路径上有不同版本的 Jersey。清理你的类路径，重新导入你需要的东西并检查你的 Jersey 版本，它可能会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T00:43:27.077

该错误对应于您必须添加所占用的依赖项`com.sun.jersey.spi.container.servlet.ServletContainer`

![在此处输入图像描述](https://i.stack.imgur.com/n1oeE.png)

# c# - 从数据库中删除项目的双重确认？

> ID：16033632
> 
> 赞同：1
> 
> 时间：2013-04-16T09:40:31.690
> 
> 标签：c#, javascript, asp.net, web-applications, web

我想从 DB .hard delete 中删除一个按钮单击的大量记录。我的要求是在删除之前提示用户两次。1.要删除吗？？通过我已经完成的确认框 2.从按钮中的 cs 页面单击“你确定要删除 500 个项目”

```
<asp:Button ID="btnReviewAll" Visible="false" runat="server" Text="Review All" 
                        CssClass="button" ToolTip="Click to Review All" OnClick="btnReviewAll_Click" OnClientClick="javascript:return  confirm('Are you sure want to Review all Closed Items??');" /> 
```

在按钮中单击 .cs 页面我正在获取记录计数 ..如何提示用户继续并显示在任何确认框中。

```
protected void btnReviewAll_Click(object sender, EventArgs e)
        {
            try
            {
               List<Items> lstWorkItems = objBPC.GetCurrentWorkItems();
               //what to write here

            }
            catch (System.Exception ex)
            {
                Utils.DisplayMasterError(this.Page.Master, ex);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:51:04.273

尝试使用javascript函数

```
<asp:Button ID="btnReviewAll" 
Visible="false" 
runat="server" 
Text="Review All" 
CssClass="button" 
ToolTip="Click to Review All" 
OnClick="btnReviewAll_Click" 
OnClientClick="javascript:confirmation();" />

<script>
function confirmation() {

    var yes = confirm("Are you sure want to delete that");

    if (yes) {

        var confirmyes = confirm("do you want to confirm delte");

        if (confirmyes) {
            return true;
        }

    }
    return false;

}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T13:23:39.003

在尝试进行双重确认时发现了这一点。Rafee 发布的代码似乎不起作用。W3C 声明`The confirm() method returns true if the user clicked "OK", and false otherwise.`

所以这就是我用的；

```
 $('.disableConfirm').on('click', function(){

        if ( confirm('Confirm 1') ) {

            if ( confirm('Confirm 2') ){
                return true;
            }

        }
        return false;

    }); 
```

# asp.net - 如何在asp.net中打印部分页面

> ID：16033634
> 
> 赞同：7
> 
> 时间：2013-04-16T09:40:32.877
> 
> 标签：asp.net, printing

我有一个包含 div 的模式弹出窗口。我有一个按钮让用户打印该 div 的内容。window.print 打印整个页面。如何只打印 div 的内容。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T10:06:20.433

使用这个脚本

```
<script language="javascript" type="text/javascript">
    function CallPrint(strid) {
        var prtContent = document.getElementById(strid);
        var WinPrint = window.open('', '', 'letf=0,top=0,width=800,height=100,toolbar=0,scrollbars=0,status=0,dir=ltr');
        WinPrint.document.write(prtContent.innerHTML);
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
        WinPrint.close();
        prtContent.innerHTML = strOldOne;
    }
</script> 
```

并从按钮调用它

```
 <asp:button id="BtnPrint" runat="server" onclientclick="javascript:CallPrint('bill');" text="Print" xmlns:asp="#unknown" /> 
```

你的 div 也应该有名字 (bill)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T10:12:43.607

这段代码可以帮助你..

HTML 代码：

```
 <div id="printarea">

    //content you want to print
    </div>

    <input id="btnprint" type="button" onclick="PrintDiv()" value="Print" /></center> 
```

这是 javascript

```
 <script type="text/javascript">

            function PrintDiv() {
                var divToPrint = document.getElementById('printarea');
                var popupWin = window.open('', '_blank', 'width=300,height=400,location=no,left=200px');
                popupWin.document.open();
                popupWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</html>');
                popupWin.document.close();
            }
         </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:46:26.920

尝试这个：

```
function printdiv(printpage)
{
  var headstr = "<html><head><title></title></head><body>";
  var footstr = "</body>";
  var newstr = document.all.item(printpage).innerHTML;
  var oldstr = document.body.innerHTML;
  document.body.innerHTML = headstr+newstr+footstr;
  window.print();
  document.body.innerHTML = oldstr;
  return false;
} 
```

`printpage`参数是你的 div id。

来源：微软论坛：[http ://forums.asp.net/t/1261525.aspx/1](http://forums.asp.net/t/1261525.aspx/1)

# ios - viewWillAppear 未按预期调用

> ID：16033639
> 
> 赞同：0
> 
> 时间：2013-04-16T09:40:50.990
> 
> 标签：ios

在我的应用程序中，视图中输入字段中的数据不断变化，因此每次将视图带到屏幕上时，我都需要运行一个函数来对显示的内容进行排序。

我找到了-(void)viewWillAppear，但是当我按下“返回”按钮时，它不会被调用，该按钮会出于某种原因从我的 NavController 中触发我的 segue。我已经阅读了一些关于此的主题，在我看来，它的内部工作方式有点模棱两可。

每次在屏幕上显示视图时，如何强制触发函数？

代码基本上很简单

。H

```
@interface view1 : UIViewController 
```

.m

```
// ... do stuff in viewDidLoad
//     I added below, but the code never runs through it.
-(void)viewDidAppear
{
    [self.view setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:26:54.410

您的方法签名错误 - 正确的方法是：

```
- (void)viewDidAppear:(BOOL)animated 
```

您不会收到任何错误，因为您始终可以定义自己的方法，而且它不像在协议中那样。

# c# - 使用和组织 DTO 的 REST 架构

> ID：16033646
> 
> 赞同：1
> 
> 时间：2013-04-16T09:41:05.383
> 
> 标签：c#, rest, dto

对于开发 REST Web 服务，有 5 个基本用例（如我所见）

```
/api/entities        - GET
/api/entities/{id}   - GET
/api/entities        - POST
/api/entities/{id}   - PUT
/api/entities/{id}   - DELETE 
```

DTO 提供了与 Web 服务交互所需的数据的最佳表示。

我喜欢这两个概念，但我苦苦挣扎的是如何组织 DTO 与它们如何与特定 Web 服务交互。

每个 Web 服务是否应该只有一个 DTO？例子：

```
EntityDto
    - Property1
    - Property2
    - Property3
    - Property4
    - Property5 
```

还是每个用例都应该有一个 DTO？例子：

```
GetEntityDto 
   - Property1
   - Property2
   - Property3
   - Property4
   - Property5

AddEntityDto
   - Property2
   - Property3
   - Property4
   - Property5

EditEntityDto
   - Property4
   - Property5 
```

如果您只能更新 2 个属性，我认为为什么要发送所有 5 个？

处理与 REST Web 服务相关的 DTO 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:57:59.213

我想我会问自己的问题是：我是否想针对网络带宽优化我的 API 并将其耦合到 HTTP 方法，或者我是否想将我的 API 公开为一个简单的模型以允许消费者（当前和未来）更大他们如何实现对 API 的使用的自由度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:06:39.757

我几乎总是根据需要开发 DTO。使用 .NET 匿名类型和/或 AutoMapper 等映射实用程序可以轻松完成。DTO 与 UI 高度耦合，您几乎无法通过预先设计它们来优化您的开发，而无需确切知道您的 UI 会是什么样子。唯一的例外是删除，您只需要 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T10:14:16.100

您是对的 您可以创建针对视图自定义的 DTO，例如查询将仅显示在列表中的实体列表只能具有名称、ID 和图像，但详细信息页面可能需要包含更多的 DTO来自同一实体的属性。DTO 取决于您的端点和动词。在一对多或多对多关系的情况下，POST 可能要求您发送甚至可能不在实体中的数据，例如类别 ID。通常在多对多关系的情况下，您会在返回数据时省略链接以避免递归/循环引用。

# capybara - Capybara 断言选择了所需值的下拉菜单不起作用

> ID：16033651
> 
> 赞同：1
> 
> 时间：2013-04-16T09:41:25.523
> 
> 标签：capybara, html-select

```
$ruby --version
ruby 1.9.3dev (2011-09-23 revision 33323) [i686-linux]

gem 'rails', '3.2.9'

group :test do
  gem 'cucumber-rails', require: false
  gem 'capybara', '~> 2.0.3'
  gem 'rspec-rails'
  gem 'database_cleaner'
  gem 'factory_girl'
  gem "ffaker"
  gem "capybara-firebug", "~> 1.3.0"
  gem 'ruby-debug19'
end 
```

在我的黄瓜步骤之一中，我试图断言下拉元素（<select> 标记）具有使用 Capybara API 和以下代码选择的特定选项。

```
 within('#myForm') do
    page.has_select?("#event_type", selected: @event_type).should be_true
  end 
```

但是我收到此错误：

```
 expected: true value
   got: false (RSpec::Expectations::ExpectationNotMetError) 
```

**我在我的场景中使用 (capybara-firebug) 的@firebug**标签检查了 DOM ，发现在下拉列表中选择了所需的选项（由 @event_type 持有）但是在 DOM 中没有添加“selected”属性到我猜是导致期望失败的选择标签。

我在这里找到了类似的参考：[https](https://github.com/jnicklas/capybara/issues/171) ://github.com/jnicklas/capybara/issues/171 ，其中提到了有修复的提交，但我猜该提交没有合并到我正在使用的水豚版本中。我正在尝试挖掘源代码并发现[https://github.com/jnicklas/capybara/issues/171](https://github.com/jnicklas/capybara/issues/171)中提到的修复程序 不存在于 Capybara 的代码库中。

任何机构都可以让我知道如何断言选择标签选择了特定选项吗？

注意：在没有任何版本的 Gem 文件中使用 capybara 时：

```
gem 'capybara' 
```

Capybara 版本 2.1.0 已启动安装，但失败并出现错误：

```
capybara requires Ruby version >= 1.9.3 
```

虽然我有所需的红宝石版本。

以下是输出

```
 $ rvm info
  ruby-1.9.3-rc1:

system:
  uname:       "Linux jigneshgohel-Inspiron-N5110 3.2.0-40-generic-pae #64-Ubuntu SMP Mon Mar 25 21:44:41 UTC 2013 i686 i686 i386 GNU/Linux"
  bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
  zsh:         " => not installed"

rvm:
  version:      "rvm 1.13.4 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
  updated:      "11 months 4 days 14 hours 20 minutes 18 seconds ago"

ruby:
  interpreter:  "ruby"
  version:      "1.9.3dev"
  date:         "2011-09-23"
  platform:     "i686-linux"
  patchlevel:   "2011-09-23 revision 33323"
  full_version: "ruby 1.9.3dev (2011-09-23 revision 33323) [i686-linux]"

homes:
  gem:          "/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1"
  ruby:         "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1"

binaries:
  ruby:         "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby"
  irb:          "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1/bin/irb"
  gem:          "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1/bin/gem"
  rake:         "/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1/bin/rake"

environment:
  PATH:         "/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1/bin:/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1@global/bin:/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1/bin:/home/jigneshgohel/.rvm/bin:/usr/local/heroku/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/media/work/Environment/Languages/Java/jdk1.7.0_04/bin:/media/work/Environment/BuildTools/apache-maven-3.0.4/bin:/media/work/Environment/BuildTools/apache-ant-1.8.3/bin"
  GEM_HOME:     "/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1"
  GEM_PATH:     "/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1:/home/jigneshgohel/.rvm/gems/ruby-1.9.3-rc1@global"
  MY_RUBY_HOME: "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1"
  IRBRC:        "/home/jigneshgohel/.rvm/rubies/ruby-1.9.3-rc1/.irbrc"
  RUBYOPT:      ""
  gemset:       " 
```

以下是输出：

```
 $rvm list
  rvm rubies

  =* ruby-1.9.3-rc1 [ i686 ]

  # => - current
  # =* - current && default
  #  * - default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T02:34:38.207

I don't use cucumber, but in you example

```
within('#myForm') do
  page.has_select?("#event_type", selected: @event_type).should be_true
end 
```

it depends on your dom, but you don't have to use '#' in the id selector here, and 'selected:' should be the text in the option, not the value.

so it should be (assuming @event_type is what you are displaying for the text)

```
within('#myForm') do
  page.has_select?("event_type", selected: @event_type).should be_true
end 
```

or i'd prefer

```
page.should have_select('event_type', selected: @event_type) 
```

# jboss6.x - oracle.jdbc.driver.T4CConnection 不能强制转换为 oracle.jdbc.OracleConnection

> ID：16033652
> 
> 赞同：4
> 
> 时间：2013-04-16T09:41:28.943
> 
> 标签：jboss6.x, jdbc-odbc

```
WrappedConnectionJDK6 wrapped = (WrappedConnectionJDK6) dbStrategy.getConnection();
            Connection underlyingConn = wrapped.getUnderlyingConnection();
            OracleConnection oracleConn = (OracleConnection)underlyingConn; 
```

最后一行给出错误 -

```
> ERROR
> [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/web].[resteasy-servlet]]
> (http-/0.0.0.0:8080-1) Servlet.service() for servlet resteasy-servlet
> threw exception: org.jboss.resteasy.spi.UnhandledException:
> java.lang.ClassCastException: oracle.jdbc.driver.T4CConnection cannot
> be cast to oracle.jdbc.OracleConnection 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:58:25.183

AFAIK T4CConnection 应该实现 oracle.jdbc.OracleConnection。恕我直言，您有 2 个驱动程序实现，一个在应用程序服务器上，一个在您的项目依赖项中，必须存在类加载问题，因为检索到的驱动程序实现由共享类加载器加载，并且您尝试将其转换为由 webApp 加载的类类加载器。

您可以确保您的 web-app 依赖项与服务器提供的实现相同，或者在打包时从 web 应用程序中排除依赖项。

如果您使用的是 maven，只需将范围设置为`provided`.

# perl - perl config::scoped，可以打印未定义的值吗？

> ID：16033661
> 
> 赞同：0
> 
> 时间：2013-04-16T09:41:46.773
> 
> 标签：perl, config

我想在我的 perl 代码中使用 Config::scoped 模块。

这是我的配置：

```
http_db{
          user      = 'xxx';
          pass = 'aaa';
          dbname = 'data';
          host = 'dataserver.company.cz';
} 
```

当我使用：

```
 my $cs          = Config::Scoped->new( file => $config);
    my $cfg_hash    = $cs->parse;
    .
    .
    .
    print $cfg_hash->{http_db}{user};  # prints xxx;
    if ( defined( $cfg_hash->{http_dp}{user} ) ) {
          print "defined"; # does not print
    else{
          print "undefined"; # prints
    } 
```

我希望 if 条件得到满足，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:40:14.993

如果您的代码正是您在此处包含的内容，那是因为一个简单的错字。

您的 print 语句`http_db`正确使用密钥，但您的`if`语句使用`http_dp`.

# java - 如果仅访问线程安全对象，Java中的方法是否是线程安全的？

> ID：16033662
> 
> 赞同：1
> 
> 时间：2013-04-16T09:42:02.197
> 
> 标签：java, thread-safety

假设使用声明为**线程安全**的 Java 类的对象（例如[`HttpClient`](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpClient.html)来自*Apache Commons*），如下所示：

```
public class MyClass{
    private HttpClient myClient;

    public HttpClient getClient(){
      return myClient;
    }
} 
```

`getClient()`方法线程安全吗，因为`myClient`它是*线程安全*的，我只返回它，或者我必须声明它，`synchronized`或者我需要使用 a`Lock`来声明它是线程安全的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:45:21.347

您不需要声明同步的东西，因为 getClient 不会为不同的 getClient 调用返回不同的值

# sql-server - 如何将数据库中的这三个查询组合到一个视图中

> ID：16033664
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:09.627
> 
> 标签：sql-server, database, view

如何将这三个查询合并为一个，以便可以从此查询创建单个视图？

```
CREATE VIEW v1 AS
SELECT rp.ProjectName, rp.TaxRegime, rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey FROM ReportProfiles rp
WHERE rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey IS NOT NULL
GROUP BY rp.ProjectName, rp.TaxRegime, rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey

CREATE VIEW v2 AS
SELECT vd.Year, vd.Data, r.ReportPrimaryKey FROM VectorData vd, Reports r
WHERE vd.FK_Vector = r.Pretax_VectorID AND vd.Data != 0 AND LEN(r.Name) < 1

SELECT v1.ProjectName, v1.TaxRegime, v2.Year, FORMAT(v2.Data, 'N', 'nb-NO') FROM v1, v2
WHERE v1.CashflowReportProfilePrimaryKey_ReportPrimaryKey = v2.ReportPrimaryKey
ORDER BY v1.ProjectName, v2.Year 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:55:32.407

您可以像这样使用 CTE 并将其用作新视图的主体：

```
Create View View1 as 
with  v1 AS
    (
    SELECT 
        rp.ProjectName, 
        rp.TaxRegime, 
        rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey 
    FROM ReportProfiles rp
    WHERE rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey IS NOT NULL
    GROUP BY rp.ProjectName, rp.TaxRegime, rp.CashflowReportProfilePrimaryKey_ReportPrimaryKey
    )
    , v2 AS
    (
    SELECT 
        vd.Year, 
        vd.Data, 
        r.ReportPrimaryKey 
    FROM VectorData vd, Reports r
    WHERE vd.FK_Vector = r.Pretax_VectorID AND vd.Data != 0 AND LEN(r.Name) < 1
    )
    SELECT 
        v1.ProjectName,
        v1.TaxRegime, 
        v2.Year, 
        FORMAT(v2.Data, 'N', 'nb-NO') 
    FROM v1, v2
    WHERE v1.CashflowReportProfilePrimaryKey_ReportPrimaryKey = v2.ReportPrimaryKey
    ORDER BY v1.ProjectName, v2.Year 
```

# c# - C++ vs C#，性能方面的选择（VS2010）

> ID：16033665
> 
> 赞同：6
> 
> 时间：2013-04-16T09:42:10.897
> 
> 标签：c#, c++

我正在开发一种用于读取、处理和显示数据的工具。我对我在 C++/C# 之间的选择感到困惑。我只做过 C++ 控制台编程。没有 GUI 或没有 C#。

*我将使用 VS2010（必修）。*

我在网上做了很多阅读。我知道在高性能方面，C++ 是最佳选择。我会列出我需要的：

1.  图形用户界面
2.  读取文件（一个文件大约 25 MB，一次可能使用总共大约 5000 张图像进行进一步处理）
3.  处理数据。主要是数学运算。
4.  显示数据。这些可能又是沉重的数据。（〜GB）。我正在考虑为此使用OpenGL。

我从 VC++ 下的 Windows 窗体应用程序开始。我做了一个图形用户界面，它相当快。我在读取文件时遇到了一些问题。我周围的大多数人都在使用 MFC（基于对话框）。但他们主要从事固件编程。他们建议我应该在 MFC 中开发。但我意识到我的生产力下降了。

现在由我决定使用什么。所以我的问题是：对于这个工具应该执行的任务，是否值得去 MFC 或更好我转向 C#（或 C++ CLR）。如果我在性能方面获得显着改善，时间并不是最大的问题。

这是开发的第一部分。之后，它需要扩展。牢记这一点，什么对未来的前景更好。（如果此信息有用，我们可能需要使用 CUDA 进行处理。）

我希望我很清楚。如果需要，请保持温和并询问更多细节。

编辑：

感谢您的明确答复。正在读取的数据是二进制图像（25 MB~ -35 MB~ 每个）。成千上万的图像被堆叠和处理（不是一次全部，而是逐个像素）。我已经在 MATLAB 中实现了它，所以我对这个过程有一个很好的了解。主要对数据进行统计分析和傅里叶分析。最后生成点云。我正在考虑使用 PCL（C++ 中的点云库）。这些不是很大，因为我现在正在 MATLAb 中显示。将来，文件可能会变得更大，因此我们正在迁移到 C++/C# 环境。显示的数据需要具有诸如选择点和显示选项以显示该特定点的属性/绘图等功能。*图形显示并不重，但更重要的是选择特征的能力。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T10:03:20.593

除非您长时间谈论大量数据，否则 C# 和 C++ 将提供几乎相似的性能。在大多数情况下，C++ 可以比 C# 提供几分之一秒的时间。所以它在任何日常应用中都不是一个很大的优势。

然而，在终极性能绝对关键的情况下，例如驱动程序或视频游戏，获得的毫秒数和 C++ 提供的手动内存控制是一个明显的优势。对于其他一切，C# 通常更容易编写和调试。托管代码意味着您在大多数情况下不必处理任何内存分配或释放。我也认为它提供了很多“更干净”的代码文件。

.NET 中的 GUI 在 WinForms 或 WPF 中完成。大多数人可能会将您指向 WPF 作为明显的选择，因为它是一种更年轻的技术，其中一个主要优势是通过 DirectX 绘制，这意味着高端计算机将更快地绘制界面。

但是，如果您计划在 3D 中显示大量自定义信息，您可能会发现直接向 DirectX/OpenGL 请求编码要容易得多。然后，您可以使用 SlimDX 之类的包装器让您的生活更轻松。但是您应该知道，如果您以前从未处理过此类代码，那么学习编写任何面向 DirectX 或 OpenGL 的代码确实不是一件容易的事。仅着色器本身就是一个非常特殊的世界。

如果您可以提供有关正在处理的数据以及您计划显示它的方式的更完整信息，我们可以为您提供更完整的解决方案。

更新：

在这种情况下，我的猜测是，您不会发现 C# 和 C++ 之间的性能差异很大，如果您使用外部库进行某些计算，则更是如此。C# 和 C++ 都可以使用相同的库。如果图形计算如此繁重，最好的方法很可能是通过 DirectX/OpenGL 将它们传输到 GPU，但这只有在您考虑进行数分钟甚至数小时的密集计算时才会如此。所以使用 C# 可能会更容易和更快。

# php - PHP中的并行线程

> ID：16033666
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:12.870
> 
> 标签：php, parallel-processing

我有一个托管在 Windows Azure 上的虚拟机，并在上面设置了一个 LAMP 堆栈。该网站允许用户创建相册和上传图片。这些图像存储在 Windows azure blob 存储中。由于图像可能很大，我将文件分成块，然后按如下方式上传：

```
$blockMaxSize = 2*1024*1024; //2MB
            $fileSize = $_FILES['Filedata']['size'];
            $numOfBlocks = $fileSize/$blockMaxSize;
            $currentFileIndex = 0;
            $blockId=1;
            $blocklist = new BlockList();
            while($numOfBlocks>0)
            {
                $content = file_get_contents($_FILES['Filedata']['tmp_name'],NULL,NULL,$currentFileIndex,$blockMaxSize);
                $currentFileIndex+=$blockMaxSize;
                $numOfBlocks-=1; //Read the current block.

                //upload the block
                $blobRestProxy->createBlobBlock(Actual_Image, $blobName, md5($blockId),$content);
                $blocklist->addLatestEntry(md5($blockId));
                $blockId++;
            }

            $blobRestProxy->commitBlobBlocks(Actual_Image, $blobName, $blocklist->getEntries()); 
```

对于大于 5Mb 左右的文件，这可能需要很长时间。我正在寻找方式或执行并行上传到 blob 存储以加快上传速度。我正在考虑创建一个包含文件数据的*$content*数组，然后并行上传这些内容。我阅读了*exec*和 *pcntl_fork* 但是 fork 在服务器上被禁用，我不确定我是否可以使用 exec 来执行命令。

是否可以在 PHP 中执行此操作？也许使用[POSIX](http://www.php.net/manual/en/intro.posix.php)线程。

不确定是否需要此信息，但虚拟机有 4 个内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:44:09.153

PHP 没有对多线程的内置支持。

不过，您可以使用类似 John Lim 发布的方法：

[http://phplens.com/phpeverywhere/?q=node/view/254](http://phplens.com/phpeverywhere/?q=node/view/254)

不是很健壮，但它应该为您提供一些多任务处理。

在此处查看此代码

```
if (1) {  /* SAMPLE USAGE BELOW */

$fp1 = JobStartAsync('localhost','/jobs/j1.php');
$fp2 = JobStartAsync('localhost','/jobs/j2.php');

while (true) {
    sleep(1);

    $r1 = JobPollAsync($fp1);
    $r2 = JobPollAsync($fp2);

    if ($r1 === false && $r2 === false) break;

    echo "<b>r1 = </b>$r1<br>";
    echo "<b>r2 = </b>$r2<hr>";
    flush(); @ob_flush();
}

echo "<h3>Jobs Complete</h3>";
} 
```

您可以像这样添加文件以进行并行处理。

# python - 使用 Python 将消息参数插入 MySQL 数据库

> ID：16033671
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:33.117
> 
> 标签：python, mysql

这是我用来尝试将数据插入 MySQL 数据库的一些代码。

break_down(s) 是我用来解析消息参数的函数。这些参数正在根据需要进行解析。

但是，当我尝试插入这些值时，即使我正在使用提交，它们也不会保存在 MySQL 数据库中。为什么是这样？

```
def break_down(s):
    c=s.count('<')
    if c==9:
            res = re.findall('< (.*?) >', s)
            for index in res:
                print index,item
    elif c==7 or c==3:
            temp=parsing(s)
            pprint(list(temp))
    else:
        flag=0
        c=s.count(':')
        if c==8:
            res=s.split(' : ')
            res=[item.strip() for item in s.split(':')]
            for index, item in enumerate(res):
                print index, item
            results = [float(x) for x in s.split(' ') if x.count('.') == 1]
            pprint(results)
            dbinsert(res[0],res[1],res[2],res[3],results[0],results[1],results[2],results[3],flag)
        if c==7:
            flag=1
            res=s.split(' : ')
            res=[item.strip() for item in s.split(':')]
            for index, item in enumerate(res):
                print index, item
            results = [float(x) for x in s.split(' ') if x.count('.') == 1]
            pprint(results)
            dbinsert(res[0],res[1],res[2],res[3],results[0],results[1],results[2],results[3],flag)

def parsing(s):
        for t in s.split('<'):
            for u in t.strip().split('>',1):
                if u.strip(): yield u.strip()

def dbinsert(a,b,c,d,e,f,g,h,flag):
 import MySQLdb
 db = MySQLdb.Connect(host="127.0.0.1", port=3306, user="root", passwd="root", db="ups")
 print "In dbinsert"
 cursor = db.cursor()
 try:
  if flag==0:
   sql = """INSERT INTO data(F1,
          F2, F3, F4, F5, F6, F7, F8)
          VALUES (a.value,b.value,c.value,d.value,e.value,f.value,g.value,h.value)"""
   cursor.execute(sql)
   db.commit()
  elif flag==1:
   sql = """INSERT INTO data(F1,
          F2, F3, F4, F5, F6, F7, F8)
          VALUES (a,b,c,,e,f,g,h)"""
   cursor.execute(sql)
   db.commit()
 except:
  db.rollback()
  db.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:53:06.357

您没有在查询中传递任何参数，您执行的查询包含文字`a.value, b.value, ...`or `a, b, ...`，数据库当然不知道与它有任何关系。

要使其工作，您需要以下内容：

```
sql = """INSERT INTO data(F1, F2, F3, ...) VALUES (%s, %s, %s, ...)"""
cursor.execute(sql, (a, b, c, ...)) 
```

这将在执行之前正确转义值并将它们绑定到查询。

# bash - 如何将（在 bash 中）标准输出通过管道传输到变量，并将标准错误传输到命令

> ID：16033673
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:37.683
> 
> 标签：bash, stdout, pipe, stderr

我有这样的管道：

```
VAR=`command1 | command2 | etc...` 
```

我希望，如果管道成功完成，输出将保存在 中`VAR`，否则，如果管道在管道的任何点失败，则将错误发送到命令。该命令然后以某种格式将错误写入某个文件。类似的东西（但这不起作用）：

```
VAR=`{ command1 | command2 | etc... ; } 2> err_command` 
```

我尝试过其他组合：

```
|& err_command
2>&1 | err_command 
```

但是它们不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:50:30.093

尝试使用进程替换。

```
VAR=`{ command1 | command2 | etc... ; } 2> >(err_command)` 
```

# date - 将带有格式的日期字段设置为潜在客户 SDK CRM 对象

> ID：16033676
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:42.017
> 
> 标签：date, datetime, dynamics-crm-2011, dynamics-crm, crm

我正在尝试将 bithday 日期设置为主要实体 crm sdk。

```
var tmplead = new myservice.lead { 
                emailaddress1 = "dum@dum.com", firstname = "Dany Paredes" , 
                new_fechadenacimiento = 
                  Convert.ToDateTime("01/02/1973",new CultureInfo("es-ES")) 
              }; 
```

但是 tmplead.new_fechanacimiento 删除了迄今为止的一天，我如何设置文化并使用确切的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:14:48.333

您可以`ToLocalTime()`在转换日期后添加，CRM 2011 将日期保留为 UTC 格式。

```
var tmplead = new myservice.lead {
    emailaddress1 = "dum@dum.com",
    firstname = "Dany Paredes" ,
    new_fechadenacimiento = 
      Convert.ToDateTime("01/02/1973",new CultureInfo("es-ES")).ToLocalTime()
}; 
```

# c# - 从中继器控件中的 Sublayout 调用 Page 的 Codebehind 方法

> ID：16033677
> 
> 赞同：0
> 
> 时间：2013-04-16T09:42:43.060
> 
> 标签：c#, asp.net, sitecore, repeater, sitecore6

我正在尝试从子布局中实际的转发器控件调用页面的代码隐藏方法。

## 问题

`sc:fieldrenderer`效果很好并在页面源上呈现，但似乎`<%# method(data) %>`无法正常工作并按页面源上的方式打印。

## 描述

我已经从这里下载了 sitecore 包 - **[Sitecore jQuery Content Slider](http://www.fuseit.com/en/FuseITBlog/2012/June/Sitecore%20jQuery%20Content%20Slider.aspx)**，它提供了[zip sitecore 安装](http://downloads.fuseit.com/FreeDownloads/FuseITContentSlider-1.2.zip)

而中继器语法有点像这样

**子布局（部分）语法**

```
<asp:repeater runat="server" id="repeater">
<itemtemplate>
    <li>
        <div style="background: url("
            <%# GetImageUrl(Container.DataItem) %>); height:
            <%# Height %>px;">

            <div style="padding:"
                <%# GetTopMargin(Container.DataItem) %>px 0px 0px
                <%# GetLeftMargin(Container.DataItem) %>px; width:
                <# GetTextWidth(Container.DataItem) %>px; text-align:
                <%# GetTextAlignment(Container.DataItem) %>;">
                <div class="title">
                    <sc:fieldrenderer fieldname="Title" item=''
                        <%# Container.DataItem %>' runat="server"></sc:fieldrenderer>
                </div>

                <div class="text">
                    <sc:fieldrenderer fieldname="Text" item=''
                        <%# Container.DataItem %>' runat="server"></sc:fieldrenderer>
                </div>

                <div class="link">
                    <sc:fieldrenderer fieldname="URL" item=''
                        <%# Container.DataItem %>' runat="server"></sc:fieldrenderer>
                </div>
            </div>

        </div>
    </li>
</itemtemplate>
</asp:repeater> 
```

**子布局代码后面**

```
 public string GetImageUrl(object itm)
    {
        Item item = (Item)itm;
        ImageField image = item.Fields["Image"];

        if (image != null)
        {
            MediaItem i = image.MediaItem;

            if (i == null)
            {
                return string.Empty;    
            }

            string u = Sitecore.Resources.Media.MediaManager.GetMediaUrl(i);

            u = HttpUtility.UrlPathEncode(u);

            return string.Concat("", u);
        }

        return string.Empty;
    } 
```

## 输出

```
<div style="background: url(<%# GetImageUrl(Container.DataItem) %>); height:<%# Height %>px;">

<div style="padding:"<%# GetTopMargin(Container.DataItem) %>px 0px 0px <%# GetLeftMargin(Container.DataItem) %>px; width: <# GetTextWidth(Container.DataItem) %>px; text-align:<%# GetTextAlignment(Container.DataItem) %>;">
    <div class="title">
        Untitled Item
    </div>

    <div class="text">
        Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum
    </div>

    <div class="link">
        <a title="Lorem-Ipsum">Learn about Lorem Ipsum</a>
    </div>
</div>

</div> 
```

## 预期产出

诸如此类的服务器标记`<%# GetImageUrl(Container.DataItem) %>`应解析为来自 page behind 方法的值。我已经尝试了我的方法，但无法使这个可行..我什至尝试`typesThatShouldNotBeExpanded`在 web.config 中为转发器评论和取消评论`<type>System.Web.UI.WebControls.Repeater</type>`

## 问题

> 如何解决这里的**问题**，或者我应该更改为转发器`ItemDataBound`事件等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:54:28.087

Imo，以这种方式进行数据绑定是糟糕的设计。我会做的（如果你这样做，你肯定会解决你的“问题”）是`FindControl`在`ItemDataBound`转发器的情况下使用并将你的数据绑定到找到的控件。

`asp:Panel`您可以使用控件并在其上设置属性，而不是 DIV 元素`Style`（尽管我强烈建议您使用 CSS 类来保持它的可维护性）

如果有人可以格式化此答案，将不胜感激（使用移动设备）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:48:48.360

我知道这已经被回答和接受，但你也有一个错字：

```
<# GetTextWidth(Container.DataItem) %>px; text-align: 
```

应该

```
<%# GetTextWidth(Container.DataItem) %>px; text-align: 
```

# javascript - 正则表达式问题 - 替换浮点数，而不是 int

> ID：16033678
> 
> 赞同：1
> 
> 时间：2013-04-16T09:42:50.097
> 
> 标签：javascript, regex

我想删除除浮动之外的所有内容：

```
string = "1 south african rand is 0.11044" 
```

我这样做是这样的：

```
reg = /[^\d+.\d+]/g
console.log string.replace(reg, '') 
```

那日志

```
10.11044 
```

那是错误的，我只想要 xxxx.xxxxxx 部分。1 不是浮点数，所以它不应该是其中的一部分？

我应该怎么刷？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:49:51.920

试试这个

```
^((?!\d+\.\d+).)* 
```

有关更多详细信息，请参阅此答案：[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:49:58.380

以下正则表达式应该为您匹配浮点数（对于提供的示例）：

```
/(-?\d*\.\d+)/ 
```

取代：

```
console.log (string.replace(/(-?\d*\.\d+)/, '')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:51:11.913

我在下面的正则表达式中使用了正面的 (?<=..)

```
\.\d+(?<=\d) 
```

使用这个正则表达式并用''替换下面的值。结果将是 1 23 33 3

```
1 23 33.2000 3.4445 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:52:12.653

```
var reg = /\d+\.\d+/g
var str = "1 south african rand is 0.11044";
var onlyFloats = str.match(reg).join(" ");
console.log(onlyFloats) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:52:36.533

尝试这个

```
string = "1 south african rand is 0.11044"
reg = /(\d+\.\d+)/g;
string.match(reg); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-02T00:12:30.673

我会使用这个正则表达式：

```
(0|([1-9][0-9]*))?\.(0|([1-9][0-9]*)) 
```

`(0|([1-9][0-9]*))?`匹配可选整数部分，匹配`\.`点，最后`(0|([1-9][0-9]*))`匹配强制小数部分。它成功用于：

*   `.5`
*   `0.5`
*   `0.0`
*   `0.1`
*   `0.5foo`
*   `31.41592`

它失败了：

*   `00.5`
*   `100`
*   `nice`
*   `2.`

锚定版本：

```
^(0|([1-9][0-9]*))?\.(0|([1-9][0-9]*))$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-01T07:29:59.290

```
/**
 * @param $string
 * @return string
 * 
 * output
 * a.a.a.a.a.a.   => 0.0
 * 1.1.1.1.1.1\.   => 1.11111
 * 2a$2.45&.wer.4 => 22.454 
 */
function stringToFlout($string) {
    $parts = explode('.', $string);

    for ($i = 0; $i < count($parts); $i++) {
        $parts[$i] = preg_replace('/[^0-9]/', '', $parts[$i]);
    }

    $left = $parts[0];
    if (empty($left))
        $left = 0;

    $float[] = $left;

    unset($parts[0]);
    $right = implode('', $parts);
    if (empty($right))
        $right = 0;

    $float[] = $right;

    return implode('.', $float);
} 
```

# iphone - 使用日期属性的年份和月份过滤 coredata 中的数据

> ID：16033680
> 
> 赞同：0
> 
> 时间：2013-04-16T09:43:00.843
> 
> 标签：iphone, objective-c, core-data

假设我有带有日期和标题的 coredata 实体。我知道我们可以使用 NSPredicate 从核心数据中过滤数据。但我想根据日期属性的月份和年份过滤数据。可以通过 NSpredicate 实现吗？如果有怎么办？

# android - 如何在android中使透明活动窗口始终位于顶部？

> ID：16033684
> 
> 赞同：6
> 
> 时间：2013-04-16T09:43:10.343
> 
> 标签：android, android-activity

我创建了一个透明活动 A。在此，我使用表面视图来播放视频。我可以触摸这个活动A背后的应用程序和活动。但是当我点击另一个应用程序时，活动A会进入后台并以不正确的方式关闭。如果您单击其他应用程序，我想让活动 A 始终保持在屏幕顶部。我尝试了许多标志，但没有一个工作正常。如果想知道如何使活动窗口始终保持在顶部？

请分享您的建议和想法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:31:58.010

您可以使用`WindowManager.addView()`将自定义视图添加到窗口，并且可以`WindowManager.LayoutParams`为视图设置属性。

这是一个示例：

```
private WindowManager wm=null;
private WindowManager.LayoutParams wmParams=null;

private MyCustomView myView=null;

private void createView(){
    myView = new MyCustomView(getApplicationContext());
    wm = (WindowManager)getApplicationContext().getSystemService(Context.WINDOW_SERVICE);
    wmParams = new WindowManager.LayoutParams();

    /**
     * Window type: phone.  These are non-application windows providing
     * user interaction with the phone (in particular incoming calls).
     * These windows are normally placed above all applications, but behind
     * the status bar.
     */
    wmParams.type=LayoutParams.TYPE_PHONE;
    wmParams.flags=LayoutParams.FLAG_NOT_TOUCH_MODAL | LayoutParams.FLAG_NOT_FOCUSABLE;
    wmParams.gravity=Gravity.LEFT|Gravity.TOP; 
    wmParams.x=0;
    wmParams.y=0;
    wmParams.width=40;
    wmParams.height=40;
    wm.addView(myView, wmParams);
} 
```

不要忘记在 AndroidManifest.xml 中添加权限：

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
```

然后，您可以在所有应用程序中做任何您想做的事情`MyCustomView`。

# visual-studio-2012 - 从 TFS 团队项目中删除特定类型的所有文件

> ID：16033687
> 
> 赞同：2
> 
> 时间：2013-04-16T09:43:19.110
> 
> 标签：visual-studio-2012, tfs

我们已将大量项目从 SourceSafe 迁移到 TFS 2012。我们已使用[迁移工具](http://visualstudiogallery.msdn.microsoft.com/867f310a-db30-4228-bbad-7b9af0089282)成功迁移了所有项目及其历史记录。但发现 SourceSafe 特定的项目文件 *.vssscc 已保留在原处。我们想要一种简单的方法来删除所有这些文件。

因此**，是否有一种简单的方法可以从 TFS 团队项目中删除所有“vssscc”类型的文件**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:31:57.970

当项目规范不是文件夹时，递归选项适用于与给定名称（或通配符）匹配的所有文件。所以在这种情况下：

```
tf delete /recursive *.vssscc 
```

应该等待删除有问题的文件。

# assembly - 我无法理解以下用于 powerpc 架构的 gnu 汇编代码

> ID：16033689
> 
> 赞同：0
> 
> 时间：2013-04-16T09:43:26.207
> 
> 标签：assembly, gnu-assembler, powerpc

```
#define START_GOT \
 .section ".got2","aw";\
.LCTOC1 = .+32768 
```

.LCTOC1是指令吗**？**为什么会有一个**。****+32768**之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:45:13.243

（`.`点）是一个[特殊符号](http://sourceware.org/binutils/docs/as/Dot.html#Dot)，表示当前行正在组装的位置。

因此，表达式的`.+32768`意思是“从这里开始 32 KB”，并且该值被赋予符号名称`.LCTOC1`。

请注意，[`.section`](http://tigcc.ticalc.org/doc/gnuasm.html#SEC119)宏定义中的指令可能会更改 的值`.`，即当前位置，因为它开始了一个名为 的新部分`.got2`。该`"aw"`参数仅意味着“可写”（`a`被忽略）。

# opengl - glTexImage2D 可以达到什么样的数据速率？

> ID：16033695
> 
> 赞同：2
> 
> 时间：2013-04-16T09:43:42.960
> 
> 标签：opengl

我正在使用 OpenGL 对图像进行调整，所以我需要这种工作流程：

1.  上传图像数据到显卡
2.  变换图像
3.  将结果下载回主存

每一步都会停止，直到上一步完成。这可以。我需要尽快完成所有这些步骤。与其他操作多路复用对我来说不是一个改进；我需要尽快完成*这张*图片。

现在，2 真的很快，3 也不错，很可能是因为结果是原始图像的缩略图——小得多。

1是我的瓶颈。我测量了在 1.2 秒内上传 20MB 的图像数据。这让我达到了 16MB/s 的速度。在 Internet 的其他地方，我读到有人[期望 5.5GB/s，但对 2.5GB/s 感到失望](http://www.opengl.org/discussion_boards/showthread.php/178159-The-speed-of-uploading-textures-seems-slow)。

我是`glTexImage2D`直接使用还是通过[PBO](https://stackoverflow.com/questions/9863969/updating-a-texture-in-opengl-with-glteximage2d)来做都没关系。我都试过了，没有测量出任何区别。这是有道理的，因为我没有与任何东西进行多路复用。对于我的管道，无论如何我都无法在不立即停止的情况下使用 PBO。

我能想到的剩下的解释是：我的系统就是这么慢。我的显卡是 NVIDIA GPU GeForce GTX 285 (GT200)，通过 16x PCI-Express 连接。我测得的 16MB/s 是不是和这个速度一样快，还是我忽略了什么？是否存在可以让我测量最大数据速率的实用程序（通常用于 Ubuntu/Linux）？

得出系统这么慢的结论让我感到不舒服。毕竟，我的网络接口速度非常快（1Gb/s ~ 125MB/s），并且只有 cat-5e 电缆可以实现这一点。

* * *

更多细节：`glTexImage2D`案例非常简单：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, image.width, image.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, rawData); 
```

仅对这条线计时即可测量 ~1200ms。

如前所述，我还将其翻译为使用 PBO：

```
GLuint pbo = 0;
glGenBuffers(1, &pbo);
glBindBuffer(GL_PIXEL_UNPACK_BUFFER, pbo);
glBufferData(GL_PIXEL_UNPACK_BUFFER, data_size, pixels, GL_STREAM_DRAW);
glTexImage2D(target, level, internalformat, width, height, border, format, type, 0);
glBindBuffer(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
glDeleteBuffers(1, &pbo); 
```

我也尝试过内存映射：

```
glBufferData(GL_PIXEL_UNPACK_BUFFER, data_size, 0, GL_STREAM_DRAW);
GLubyte* ptr = (GLubyte*)glMapBufferARB(GL_PIXEL_UNPACK_BUFFER, GL_WRITE_ONLY);
std::copy(pixels, pixels+data_size, ptr);
glUnmapBuffer(GL_PIXEL_UNPACK_BUFFER); 
```

任何解决方案之间的时间没有明显差异。

* * *

上传纹理数据时，我应该期望什么样的数据速率？

我的设置 16MB/s 合理吗？（我觉得“不”。如果是，请告诉我！）

是否有一个工具可以用来验证这是我的系统的速度，从而证明我的代码是正确的，或者肯定将责任归咎于我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:25:19.457

不，我并没有因为期待更高的数据传输率而疯狂。

我的错误是我将数据上传的时间安排在了太高的抽象级别，所以我无意中包含`new Uint8Array(image.buffer)`了我的时间安排。在一个时间里，我看到这个调用需要 1190 毫秒，而`glTexImage2D`需要 10 毫秒。

下一次的教训：在特定的 C 调用之前和之后在准确的行上进行计时。直到那时我才发现问题所在。

非常感谢@ChristianRau 帮助我完成调试。

# jquery - 多个事件的承诺或延迟（使用自定义事件）

> ID：16033699
> 
> 赞同：0
> 
> 时间：2013-04-16T09:43:50.670
> 
> 标签：jquery

我有一个名为`render`. 我的应用程序的许多松散耦合的组件都绑定到它，并且在事件触发后它们会重新呈现自己。

现在我想在所有渲染完成后执行一个函数（伪代码）：

```
triggerEvent("render");

when(renderingComplete).then(alert("Hurray!")); 
```

我怎样才能做到这一点？我需要在哪里创建/返回延期？

（另一件事可能会变得棘手：据我了解，函数需要返回一个`deferred`-object，但我的`render()`-functions 还需要返回 HTML 代码才能让我的渲染系统工作:-S）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:39:33.167

假设您想使用异步函数进行渲染（解释为什么需要延迟对象），您可以使用如下内容：

```
function render(args) {
  var def = $.Deferred();

  // call async function to render, example using ajax
  // if you could use ajax then you wouldnt need to create your own deferred 
  $.post(url,data)
    .done(function (data) {
      def.resolve(data);
    })
    .fail(function (e) {
      def.reject(e);
    });

  // Return promise that can be used to capture success or failure of rendering
  return def.promise();
}

render().done(function (data) {
  // data has whatever was passed in resolve(data)
}).fail(function (e) {
  // handle error
}); 
```

最大的问题是如何实现用于呈现 html 的异步函数。如果它可以用 ajax 完成，那么它就变成了一个微不足道的问题，因为 jquery ajax 函数返回一个延迟对象（参见示例中的 $.post）。

但是，如果渲染不是异步的，并且您想要的是在渲染完成后启动一个事件，那么它应该可以通过添加一个新的自定义事件来实现，该事件在您的渲染函数结束时触发，生成的 html 为一个参数/属性，如果你愿意的话，一个“afterRender”自定义事件。

# c++ - .cpp 文件中的两个命名空间用于比较

> ID：16033700
> 
> 赞同：0
> 
> 时间：2013-04-16T09:43:53.037
> 
> 标签：c++, namespaces, fixed-point

我正在做定点实现，我正在运行测试，我试图用 cmath 标头的操作精度来检查我的定点操作的精度。

所以这是我在 test.cpp 中的代码

```
#include <fixed_point_header.h>
#include <stdio.h>

int main()
{
    float fp1 = 3.14159;
    float fp2 = 4.1723;
    float fp3,fp4,fp5,fp6;
    fp3 = fp1+fp2;
    fp4 = fp1-fp2;
    fp5 = fp1*fp2;
    fp6 = fp1/fp2;

    printf("float fixed point summation data ==%f\n",fp3);
    printf("float fixed point difference data ==%f\n",fp4);
    printf("float fixed point multiplied data ==%f\n",fp5);
    printf("float fixed point divided data ==%f\n",fp6);
} 
```

上面的代码测试得很好，但现在我需要计算相同的操作并在同一个 test.cpp 文件中查看 cmath 标头的结果。那么我该如何继续，是否可以使用两个命名空间（我的头文件的一个命名空间，一个命名空间 std）？

喜欢

```
#include <fixed_point_header.h>
#include <stdio.h>
#include <math.h>

using namespace fp;

    int main() {

   ...// do the fixedpoint operations here

   }
   using namespace std;

   int main() {

  ...// do the cmath operations here

   } 
```

是否有可能像上面的代码一样，有人可以帮助如何继续它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:30:24.670

根据您的评论回答：

fixed_point_header.h 的内容：

```
namespace fp // This places your function inside the fp namespace
{
   float pow(float base, float exp)
   {
      return 0; // Replace with your algorithm
   }
} 
```

源文件：

```
#include <iostream>
#include <cmath>
#include "fixed_point_header.h"

int main()
{
   float f1 = 2.0;
   float f2 = 3.0;
   std::cout << pow(f1, f2) << std::endl;     // from cmath
   std::cout << fp::pow(f1, f2) << std::endl; // from your header
   return 0;
} 
```

输出：

```
8
0 
```

# image - 我可以在 R 中将图像绘制为 PDF 文件吗？

> ID：16033703
> 
> 赞同：3
> 
> 时间：2013-04-16T09:43:57.440
> 
> 标签：image, r, pdf

有没有办法将图像加载到 R 中并以 pdf 格式输出？

我知道如何绘制到 pdf 并且我尝试使用 raster 和 jpeg 包，但它们不会输出图像。

目的是我正在构建一个 PDF 图表包，并希望在页面上有一个徽标。

有人知道另一种方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:55:42.303

光栅对此没有任何问题：

```
library(raster)
r <- brick(file.path(R.home(), "doc", "html", "logo.jpg"))
pdf("a.pdf")
plotRGB(r)
dev.off() 
```

请注意，如果要将 image() 用于大型栅格，最好设置 useRaster = TRUE （栅格默认对其对象执行此操作，或直接使用 rasterImage() ）以避免非常大的 PDF 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T10:06:05.840

我从 Matloff 的书“R 编程的艺术”（第 63 页，试试 Google 书籍）中借用：

```
library(pixmap)
logo <- read.pnm("filename") # the file has to be in PPM format
pdf("path/filename.pdf")
plot(logo)
dev.off() 
```

或者，您可以尝试使用`addlogo()`同一个包中的函数，允许徽标坐标似乎很有希望，尽管我没有时间彻底测试它。您可以使用其中一种在线转换器将 JPG（或任何您拥有的）转换为 PPM。

另外，请参阅[this](https://stackoverflow.com/questions/8048984/plot-as-bitmap-in-pdf?rq=1)和[this](https://stackoverflow.com/questions/7597081/combining-vector-and-bitmap-graphics-in-a-pdf) thread，它们都处理类似的问题。那里提供的答案要详细得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T21:40:57.413

试试`biOps`CRAN 的软件包。

```
# Read image
im = readJpeg('path/to/image')
# Save to pdf
pdf('path/to/pdf')
plot(im)
dev.off(); 
```

以我的经验，这比我用过的其他软件包快一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:49:10.550

像这样 -

```
m = matrix(rnorm(100), 10, 10)
pdf("image.pdf")
image(m)
dev.off() 
```

# database - 在 Hibernate 中将字符串数组添加到数据库

> ID：16033704
> 
> 赞同：1
> 
> 时间：2013-04-16T09:43:59.623
> 
> 标签：database, spring, hibernate, spring-mvc

我是 Hibernate 框架的初学者，现在我将 Spring 和 Hibernate 集成到一个项目中。我运行它没问题，但它有一些我不明白为什么。问题是：

我在这里描述了 bean 类：

```
@Entity
@Table(name = "Sample")
public class Sample {
    private int id;
    private String firstName;
    private String lastName;
    private String sex;
    private String[] interests;

@Id
@GeneratedValue
@Column(name = "id")
public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

@Column(name = "firstName")
public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

@Column(name = "lastName")
public String getLastName() {
    return lastName;
}

public void setSex(String sex) {
    this.sex = sex;
}

@Column(name = "sex")
public String getSex() {
    return sex;
}

public void setInterests(String[] interests) {
    this.interests = interests;
}

@Column(name = "interests")
public String[] getInterests() {
    return interests;
}
} 
```

在这个类中，你看，我的兴趣字段是字符串数组，它显示了许多复选框。

在 DAO 中，当控制器调用将对象保存到数据库时，我只是使用`hibernateTemplate.saveOrUpdate(sample)`Spring 中的类来持久化对象。

如果数据库使用默认字符集，则可以，运行并且没有任何错误，但是当我在数据库系统中选择表时，它会显示一个不可读的字符串，类似于`¬í ur [Ljava.lang.String;­ÒVçé{G xp t Quidditcht Herbology`. 我认为当我想读取和填充对象时，Hibernate 给出了拆分的“占位符”。

但问题是如果数据库系统使用 utf8 字符集，它就无法运行，并抛出类似于`Incorrect string value: '\xAC\xED\x00\x05ur...' for column 'interests' at row 1`

我认为是因为具有 utf8 字符集的数据库不支持该字符串。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:49:30.467

您当前的代码正在尝试保留在兴趣数组上调用 toString 的结果。

您需要设置 getInterests 以返回格式化的字符串或映射到不同的表作为单对多关系。由于您可能想从 DB 中填充兴趣，我会推荐第二个选项（我有 annoate do 字段，但您可以轻松地将其更改为使用 getter，实际上我应该对我的 getter 进行注释）：

```
 @OneToMany(mappedBy = "sample", cascade = CascadeType.ALL)    
    private List<Interests> interests; 
```

兴趣可能是这样的

```
 @Column(nullable = false, unique = false, length = 256)
    private String text;

    @ManyToOne
    @JoinColumn(nullable = false)
    private Sample sample; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:36:28.073

我看过你的代码，我认为在“ `interests`”字段中你想存储数组中的任何值，并且在从数据库中检索时相同。您需要使用`enum`某种功能但不知道您的数据库是否支持？我在我的一个项目中具有相同的功能，并且我们`enum`在数据库中使用了 DB，它是 PostgreSQL。如果您的数据库不支持，`enum`那么您必须使用`OneToMany`并且必须为兴趣创建单独的表以进行映射。

# java - Java - 遍历列表中的每两个元素

> ID：16033711
> 
> 赞同：9
> 
> 时间：2013-04-16T09:44:13.867
> 
> 标签：java, iterator

在同时处理 2 个元素的同时迭代列表的最佳方法是什么？

例子：

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
for(int i = 0; i < strings.size(); i++){
    String first = strings.get(i);
    String second = null;
    if(strings.size() > i + 1){
        second = strings.get(i + 1);
    }
    System.out.println("First [" + first + "] - Second [" + second + "]");
} 
```

结果是：

```
First [item 1] - Second [item 2]
First [item 2] - Second [item 3]
First [item 3] - Second [item 4]
First [item 4] - Second [null] 
```

我想实现：

```
First [item 1] - Second [item 2]
First [item 3] - Second [item 4] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T09:47:30.037

只需增加`i`2：

```
for(int i = 0; i < strings.size() - 2; i += 2) {
    String first = strings.get(i);
    String second = strings.get(i+1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-20T19:24:39.353

我使用 Java8 BiConsumer 创建了以下方法：

```
public static <T> void tupleIterator(Iterable<T> iterable, BiConsumer<T, T> consumer) {
    Iterator<T> it = iterable.iterator();
    if(!it.hasNext()) return;
    T first = it.next();

    while(it.hasNext()) {
        T next = it.next();
        consumer.accept(first, next);
        first = next;
    }
} 
```

像这样使用它：

```
List<String> myIterable = Arrays.asList("1", "2", "3");
tupleIterator(myIterable, (obj1, obj2) -> {
    System.out.println(obj1 + " " + obj2);
}); 
```

这将输出：

```
1 2
2 3 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-16T09:45:19.553

您需要修改并增加`i`第二个值，修改语句：

```
second = strings.get(i + 1); 
```

至

```
second = strings.get(++i); 
```

这也会增加`i`，因为这似乎是所需的行为。

所以你的代码是：

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
for(int i = 0; i < strings.size(); i++){
    String first = strings.get(i);
    String second = null;
    if(strings.size() > i + 1){
        second = strings.get(++i); //Change here
    }
    System.out.println("First [" + first + "] - Second [" + second + "]");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-16T09:48:51.697

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");    
int i = 0;  
for(; i < strings.size() - 1; i+=2){  
    String first = strings.get(i);  
    String second =  strings.get(i + 1);  
    System.out.println("First [" + first + "] - Second [" + second + "]");  
}  
//For odd sized lists
if(i < strings.size()){         
    System.out.println("First [" + strings.get(i) + "]");  
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T09:47:10.173

如果在每次迭代中将 i 增加 2 会怎样？应该这样做...否则考虑在实际循环中增加 i

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-16T10:18:53.007

我们当然应该为一般情况提供解决方案;-)

```
public static void main(String[] args) {
    List<Integer> list = Arrays.asList(new Integer[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 });
    for (Pair<Integer> p : Pair.over(list)) {
        System.out.printf("%d, %d\n", p.first, p.second);
    }
}

static class Pair<T> {
    T first;

    T second;

    public Pair(T first, T second) {
        this.first = first;
        this.second = second;
    }

    public static <T> Iterable<Pair<T>> over(Collection<T> collection) {
        return new PairWise<T>(collection);
    }

    private static class PairWise<T> implements Iterable<Pair<T>>, Iterator<Pair<T>> {

        final Iterator<T> iterator;

        PairWise(Collection<T> collection) {
            super();
            this.iterator = collection.iterator();
        }

        @Override
        public Iterator<Pair<T>> iterator() {
            return this;
        }

        @Override
        public boolean hasNext() {
            return iterator.hasNext();
        }

        @Override
        public Pair<T> next() {
            T first = null;
            T second = null;
            if (iterator.hasNext())
                first = iterator.next();
            else
                throw new NoSuchElementException();
            if (iterator.hasNext())
                second = iterator.next();
            return new Pair<T>(first, second);
        }

        @Override
        public void remove() {
            throw new UnsupportedOperationException();
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-03T05:28:32.450

您可以避免使用[Iterator](http://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html)进行索引；这适用于任何[Iterable](http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html)，而不仅仅是列表。只需获取一个迭代器并在每次循环迭代中将其递增两次：

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
Iterator<String> stringsIterator = strings.iterator();
while (stringsIterator.hasNext()) {
  String first = stringsIterator.next();
  String second = stringsIterator.next();
  System.out.println("First [" + first + "] - Second [" + second + "]");
} 
```

这假设一个偶数长度的列表，`NoSuchElementException`如果它是奇数长度，则在最后一次传递。您可以通过多种方式处理此问题：

*   使用`try`- `catch`;
*   有一个保护子句，可以预先检查长度是否相等；
*   在获取第二个元素之前检查。

检查第二个元素：

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3");
Iterator<String> stringsIterator = strings.iterator();
while (stringsIterator.hasNext()) {
  String first = stringsIterator.next();
  String second = stringIterator.hasNext() ? stringIterator.next() : null;
  System.out.println("First [" + first + "] - Second [" + second + "]");
} 
```

迭代器会使一些人感到困惑，因此您还可以使用带有分支的 for-each 循环和用于奇偶校验的辅助触发器变​​量。这更糟糕，因为它使循环的逻辑变得更加复杂，以简化迭代：与其每次通过循环执行一次操作，按顺序且没有分支，而是必须经过两次并在心理上进行分支。请注意，如果它的长度为奇数，则会跳过最后一个元素；`isFirst`如果也想处理这些情况，可以在事后添加检查。

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
boolean isFirst = true;
String first = null;
String second = null;
for (String string : strings) {
  if (isFirst) {
    first = string;
    isFirst = false;
  } else {
    second = string;
    isFirst = true;
    System.out.println("First [" + first + "] - Second [" + second + "]");
  }
} 
```

最后，请注意，所有这些迭代器和辅助变量都有多余的范围（它们仅用于循环本身，因此它们会污染本地环境）：它们可以包装在块中以限制范围，尽管通常会考虑生成的嵌套比超出范围更糟糕：

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
{
  Iterator<String> stringsIterator = strings.iterator();
  while (stringsIterator.hasNext()) {
    String first = stringsIterator.next();
    String second = stringsIterator.next();
    System.out.println("First [" + first + "] - Second [" + second + "]");
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-03T08:35:10.203

现在在 Java 8 中，通过使用[https://github.com/wapatesh/fig](https://github.com/wapatesh/fig)

你可以写：

```
seq.forEachSlice(2, (values)->{
    // [1,2]  [3, 4]
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-16T09:48:08.897

```
for(int i = 0; i < strings.size(); i++){
    String first = strings.get(i++);
    String second = null;
    if(strings.size() > i){
        second = strings.get(i);
    }
    System.out.println("First [" + first + "] - Second [" + second + "]");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-16T09:57:03.053

为了提高性能，我建议您只计算一个列表的大小，而不是在每个新循环中创建一个新字符串。

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
int length = strings.size();
String first, second = null;
for(int i = 0; i < length; i += 2){
    ...
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-16T09:50:29.007

```
List<String> strings = Arrays.asList("item 1", "item 2", "item 3", "item 4");
for(int i = 0; i < strings.size(); i++){
    if(i½2 = 0){
        String first = strings.get(i);
        System.out.print("First [" + first + "] ");
    }else{
         String second = strings.get(i + 1);
         System.out.println("- Second [" + second + "]");
    }
} 
```

# r - 从格子图中删除异常值（splom）

> ID：16033715
> 
> 赞同：2
> 
> 时间：2013-04-16T09:44:28.267
> 
> 标签：r, lattice, outliers

我想将一些数据绘制为带有格子的散点图矩阵。但是，数据包含一些异常值。这导致主要数据的图非常压缩。我想从图中删除异常值。一个观测值可以是一个测量变量的异常值，但不能是另一个测量变量的异常值，因此矩阵中的每个散点图都需要计算要移除的异常值。由于异常值构成了大约 10,000 个观测值中的最大 10 个观测值，我正在考虑简单地删除每个变量值最低的 10 个观测值（异常值通常是那些处于更负方向的观测值）。我知道我必须修改面板功能，但我不知道该怎么做。另外，我的下面板是一个 hexbinplot，所以它也应该被修改，我希望这能以同样的方式工作。

MWE：

```
require(lattice)
require(hexbin)
data(iris)

iris.out <- iris
iris.out[2,1] <- 1
iris.out[3,1] <- .2
iris.out[4,2] <- .1
iris.out[5,2] <- .2

splom(~iris.out[1:4], groups = Species, data = iris,
  lower.panel = function(...,groups){
    panel.hexbinplot(xbins = 20,
                     colramp = function(n){heat.ob(n, beg=15, end=225)},...,groups=NULL)
  },
  diag.panel = function(x,...){
    yrng <- current.panel.limits()$ylim
    d <- density(x, na.rm = TRUE)
    d$y <- with(d, yrng[1] + 0.95 * diff(yrng) * y / max(y))
    panel.lines(d, col = "darkgrey")
    diag.panel.splom(x, ...)
  } 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T23:45:20.150

也许我有一个部分解决方案。对于双变量图，我删除了 x 和 y 中由最低 10 个观察值定义的异常值。此外，“组”因素仅在上面板中实现。

```
splom(~iris.out[1:4],
  lower.panel=function(x,y,...){
    x.out=order(x,decreasing=FALSE)[1:10]
    y.out=order(x,decreasing=FALSE)[1:10]
    out=c(x.out,y.out)
    x=x[-out]
    y=y[-out]
    panel.hexbinplot(x,y, xbins =20,colramp = function(n){heat.ob(n, beg=15, end=225)},...)
  },
  diag.panel = function(x,...){
    x=x[-order(x,decreasing=FALSE)[1:10]]
    yrng <- current.panel.limits()$ylim
    d <- density(x, na.rm = TRUE)
    d$y <- with(d, yrng[1] + 0.95 * diff(yrng) * y / max(y))
    panel.lines(d, col = "darkgrey")
    diag.panel.splom(x, ...)
  },
  upper.panel=function(x,y,groups=iris$Species,...){
    x.out=order(x,decreasing=FALSE)[1:10]
    y.out=order(x,decreasing=FALSE)[1:10]
    out=c(x.out,y.out)
    x=x[-out]
    y=y[-out]
    panel.splom(x,y,groups=iris$Species,...)
  }
) 
```

# extjs4.1 - extjs4.1 表单重置，排除某些属性

> ID：16033717
> 
> 赞同：1
> 
> 时间：2013-04-16T09:44:35.553
> 
> 标签：extjs4.1

我可以通过这种方式重置表格

```
 var form = Ext.getCmp('formId');
        form.getForm().reset(); 
```

但我想重置我的表单排除一个`textfield`。

此文本字段名称为`'name'`。

```
form.getForm().reset().exclude('name'); 
```

可能吗。

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T08:29:26.167

每个表单域都有`reset`方法。因此，您可以查询除“名称”之外的所有字段并`reset`在每个查询字段上执行：

```
// the following query will search for all form fields
// and will exclude fields that have field name set to "name"
var fields = form.query('[isFormField][name!="name"]');

for (var i = 0, len = fields.length; i < len; i++) {
    fields[i].reset();
} 
```

查看[演示](http://jsfiddle.net/molecule/mhFTQ/)。

# c - 在 2ch PCM 上添加 440HZ 音调（合并 PCM，噪声叠加）

> ID：16033718
> 
> 赞同：2
> 
> 时间：2013-04-16T09:44:40.447
> 
> 标签：c, merge, pcm

我想在 a 上添加一些噪音

```
44100 Hz
2 channel
16 bit
interleaved PCM 
```

我正在生成 1 秒的 440Hz 噪声并将其存储在噪声缓冲区中：

```
#define SAMPLING_RATE 44100
int *noise_buffer;

void generate_440(int *buffer) {
    int pos;  // sample number we're on
    float volume = 0.1;  // 0 to 1.0, one being the loudest

    for (pos = 0; pos < SAMPLING_RATE; pos++) {
        float a = (2 * 3.14159) * pos / (SAMPLING_RATE / 440.0);
        float v = sin(a) * volume;

        // convert from [-1.0,1.0] to [-32768,32767]:
        buffer[pos] = remap_level_to_signed_16_bit(v);
    }
}
..
noise_buffer = (int *) malloc(SAMPLING_RATE * sizeof(int));
generate_440(noise_buffer); 
```

并以这种方式将其添加到我的 PCM 流中：

```
int count = read(file_fd, buffer, len);
int bytesPerSample = 4;
int samples = count / bytesPerSample, c, currentSample;
for (currentSample = 0; currentSample < samples; currentSample++) {
    samplesWritten++;
    memcpy(buffer+(currentSample * bytesPerSample), noise_buffer+((samplesWritten%SAMPLING_RATE)), bytesPerSample);
} 
```

`buffer`这可行，但它用（响亮的）440Hz 音调替换了原始 PCM 。

然后尝试将原始 PCM 与噪声“合并”，因此可以通过这种方式（而不是 memcpy）听到带有噪声覆盖的原始音频：

```
for (c = 0; c < bytesPerSample; c++) {
    *(buffer+(currentSample * bytesPerSample) + c)=(*(buffer+(currentSample * bytesPerSample) + c)+*(noise_buffer+((samplesWritten%SAMPLING_RATE)) + c)) / 2;
} 
```

但它会发出奇怪的声音。我认为问题与2个频道有关？可悲的是，我还不熟悉音频数据。

有人可以帮助我或将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:29:57.780

这是我添加两个信号的方法：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <limits.h>

#define SAMPLING_RATE 44100

int remap_level_to_signed_16_bit(float v)
{
  if (v >= 1)
    return 32767;

  if (v <= -1)
    return -32767;

  return v * 32767;
}

void generate_freq(int *buffer, size_t count, float volume, float freq)
{
  size_t pos; // sample number we're on

  for (pos = 0; pos < count; pos++) {
    float a = 2 * 3.14159f * freq * pos / SAMPLING_RATE;
    float v = sin(a) * volume;
    // convert from [-1.0,1.0] to [-32767,32767]:
    buffer[pos] = remap_level_to_signed_16_bit(v);
  }
}

void generate_noise(int *buffer, size_t count, float volume)
{
  size_t pos; // sample number we're on

  for (pos = 0; pos < count; pos++) {
    // random number [-1.0,1.0]
    float v = (rand() - RAND_MAX / 2.0f) * 2 / RAND_MAX * volume;
    // convert from [-1.0,1.0] to [-32767,32767]:
    buffer[pos] = remap_level_to_signed_16_bit(v);
  }
}

int add_two_16_bit_samples(int a, int b)
{
  int sum;

  // add a and b avoiding overflow
  if (a >= 0 && b >= 0) {
    if (a > INT_MAX - b) // mathematically equivalent to if (a + b > INT_MAX)
      sum = INT_MAX; // limit sum at INT_MAX if overflow
    else
      sum = a + b;
  } else if (a < 0 && b < 0) {
    if (a < INT_MIN - b) // mathematically equivalent to if (a + b < INT_MIN)
      sum = INT_MIN; // limit sum at INT_MIN if overflow
    else
      sum = a + b;
  } else {
    sum = a + b;
  }

  // limit sum to [-32767,32767]
  if (sum > 32767)
    sum = 32767;

  if (sum < -32767)
    sum = -32767;

  return sum;
}

void add_16_bit_samples(int *destination, const int* source, size_t count)
{
  for (; count--; destination++, source++) {
    *destination = add_two_16_bit_samples(*destination, *source);
  }
}

int save_16_bit_samples(const char* name, int* buf, size_t count, int stereo)
{
  FILE* f = fopen(name, "wb");
  int res = -1; // failure by default

  if (f != NULL) {

    while (count) {
      // convert sample to 2's complement unsigned representation
      unsigned v = *buf++;

      // separate it into 8-bit parts
      unsigned char c[2];
      c[0] = v & 0xFF; // LSB
      c[1] = (v >> 8) & 0xFF; // MSB

      // save it as little endian
      if (fwrite(c, 1, 2, f) != 2)
        break;

      // do once more if stereo
      if (stereo)
        if (fwrite(c, 1, 2, f) != 2)
          break;

      count--;
    }

    if (count == 0)
      res = 0; // success if all samples written out

    fclose(f);
  }

  return res;
}

int main(void)
{
  int* buf_440 = malloc(SAMPLING_RATE * sizeof(int));
  int* buf_noise = malloc(SAMPLING_RATE * sizeof(int));

  if (buf_440 == NULL || buf_noise == NULL) {
    printf("failed to allocate memory for samples\n");
    return EXIT_FAILURE;
  }

  generate_freq(buf_440, SAMPLING_RATE, 0.1f/*volume*/, 440.0f/*freq*/);
  generate_noise(buf_noise, SAMPLING_RATE, 0.01f/*volume*/);

  add_16_bit_samples(buf_440, buf_noise, SAMPLING_RATE);

  if (save_16_bit_samples("440noise.pcm", buf_440, SAMPLING_RATE, 1/*stereo*/)) {
    printf("failed to save samples to file\n");
    return EXIT_FAILURE;
  }

  return EXIT_SUCCESS;
} 
```

# c++ - 检查类型是否被声明为元类型系统（对于 SFINAE）

> ID：16033719
> 
> 赞同：6
> 
> 时间：2013-04-16T09:44:43.653
> 
> 标签：c++, qt, sfinae, typetraits, enable-if

为了区分使用 SFINAE`t`类型的参数的大小写`T`，我想知道语句是否

```
QVariant::fromValue(t); 
```

和/或

```
QVariant::value<T>(); 
```

编译。如果一个编译，另一个也编译，除非你破解元类型系统。当且仅当`T`已使用`Q_DECLARE_METATYPE(T)`.

非常简单的使用示例，当且仅当元类型系统支持时，一个人想通过简单地 qDebugging 一个变体包装的等效项来打印值的类型（我不需要这个，但这以最小的形式显示了问题例子）：

```
template<class T>  // enable if T NOT registered in the Qt meta type system
void print(const T &t) {
    qDebug() << t;
}

template<class T>  // enable if T registered in the Qt meta type system
void print(const T &t) {
    qDebug() << QVariant::fromValue<T>();
} 
```

我知道这样做的几种（但相似的）可能性，但它们都引入了一些辅助结构、复杂的 enable_if 等。现在我知道`QTypeInfo`，我想已经提供了类似“在 Qt 元类型系统中声明的” “类型特征。然而，这个类没有记录，因此不建议在长期和生产代码中使用它，因为它可能会在 Qt 版本之间发生变化。

`T`如果QVariant 支持类型，是否有一种非常简单的方法（比使用“检查器”+ enable_if 更简单）来检查 SFINAE 专业化？

请注意，该解决方案仍应可在不同 Qt 版本之间*移植*（Qt4 和 Qt5 可能使用不同的`QTypeInfo`定义）。但是，我使用 C++11，所以我可以访问`std::enable_if`例如。

“不可移植”的方式是使用`QMetaTypeId2<T>::Defined`in an的内部定义`enable_if`（它是一个定义为 0 或 1 的枚举值）。因此，一个可行的解决方案是：

```
template<class T>
typename std::enable_if<!QMetaTypeId2<T>::Defined>::type
print(const T &t) {
    qDebug() << t;
}

template<class T>
typename std::enable_if<QMetaTypeId2<T>::Defined>::type
print(const T &t) {
    qDebug() << QVariant::fromValue<T>();
} 
```

然而，由于`QMetaTypeId2`没有记录并且只是内部的东西，它不应该出现在客户端代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:39:17.263

您应该声明一个可以帮助您的包装器。我能想到的最好的方法是根据Qt的[版本有几个定义：](http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#QT_VERSION)

```
template<typename T>
struct is_registered
{
    enum
    {
        value = 
#if QT_VERSION >= 0x050000 // Qt 5.0.0
            QMetaTypeId2<T>::Defined
#elif QT_VERSION >= 0x040000 // Qt 4.0.0
            QMetaTypeId2<T>::Defined
#endif
    };
}; 
```

这不是美学，但这是功能性的，在您的代码中您可以使用`is_registered<T>::value`而不必担心 Qt 的版本。另外，我目前没有 Qt5，所以我不能告诉你`QMetaTypeId2<T>::Defined`它是否正确（尽管我认为它是正确的）。

* * *

无法用于`qMetaTypeId<T>()`检查类型是否已注册。事实上，表达式`qMetaTypeId<T>()`总是有效的，不管是什么类型。如果未注册，则函数的*主体*将无法编译（更准确地说：在 Qt 4 和 5（目前）中，`qMetaTypeId<T>()`仅在未注册类型时调用另一个无法编译的函数。因此，您不能使用 SFINAE 对其进行测试。结果，leemes 在他（现已删除）答案中给出的代码[将无法按预期工作](http://ideone.com/jcv6a2)。

代码是：

```
struct _test_is_declared_metatype
{
    template<class T>
    static auto test(T* t) -> decltype(qMetaTypeId<T>(), std::true_type());

    static std::false_type test(...);
};

template<class T>
struct is_declared_metatype : decltype(_test_is_declared_metatype::test<T>(0))
{
}; 
```

为什么这行不通？其目的是因为调用`qMetaTypeId<T>()`未注册的类型会导致编译错误，*“SFINAE 将在未注册类型时排除第一个函数”*。这里的问题是它`qMetaTypeId<T>()`始终是一个有效的表达式，`qMetaTypeId<T>(), std::true_type()`也是如此，并且`decltype(qMetaTypeId<T>(), std::true_type())`是完美定义的（使用 value `std::true_type`）。
这是因为 stem 的编译错误`qMetaTypeId<T>()`源于函数的*主体*，而不是其原型（顺便说一下，只有在声明并正确调用了函数中的函数时，代码才会编译`decltype`，例如，非模板函数没有模板参数）。
因此，因为这种过载`test()`比可变参数更具体，它总是被选中，因此它总是“返回”类型已注册；您可以在以下测试代码中看到它：

```
// ----------------------------------------------------------
// qmetatype.h simplification -------------------------------
// ----------------------------------------------------------

template<typename T>
struct metatype
{
 enum { defined = 0 };
};

template<typename T>
struct metatype2
{
 enum { defined = metatype<T>::defined };
 static inline int id() { return metatype<T>::id(); }
};

template <typename T>
inline int metatypeId(
    T * /* dummy */ = 0
)
{
    return metatype2<T>::id();
}

#define register_meta_type( _type_ )  \
 template<>                           \
 struct metatype< _type_ >            \
 {                                    \
  enum { defined = 1 };               \
  static int id()                     \
  {                                   \
   /* Run-time registration in Qt */  \
   return __COUNTER__;                \
  };                                  \
 };

// ----------------------------------------------------------
// ----------------------------------------------------------
// ----------------------------------------------------------

class TestA {};
register_meta_type(TestA)

class TestB {};

class TestC {};
register_meta_type(TestC)

class TestD {};

#include <type_traits>

struct _test_is_declared_metatype
{
 /*
   metatypeId<T>() is always a valid expression. So this overload is
   always taken
 */
    template<class T>
    static auto test(T* t) -> decltype(metatypeId<T>(), std::true_type());

    static std::false_type test(...);
};

template<class T>
struct is_declared_metatype : decltype(_test_is_declared_metatype::test<T>(0))
{
};

#include <iostream>
#define PRINT_DEF( _type_ )  std::cout << #_type_ << " registered ? " << is_declared_metatype< _type_ >::value << "\n";
int main()
{
 std::cout << std::boolalpha;
 PRINT_DEF(TestA);
 PRINT_DEF(TestB);
 PRINT_DEF(TestC);
 PRINT_DEF(TestD);
} 
```

您可能想了解[更多关于 SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)的信息。此外，您可以[在此处](http://pastebin.com/nQSvy0XB)[阅读`qmetatype.h`](http://pastebin.com/nQSvy0XB)。

# iphone - 音频文件无法在设备上运行，但在模拟器上运行

> ID：16033723
> 
> 赞同：1
> 
> 时间：2013-04-16T09:44:53.143
> 
> 标签：iphone, ipad, audio, video, ios-simulator

我在 iphone 应用程序中播放音频，但问题是它在模拟器上运行良好，但在设备上不起作用这是我的代码，它只是在运行此代码时关闭应用程序。

```
 NSString*thePath=[[NSBundle mainBundle] pathForResource:fileName ofType:@"MP3"];
    NSURL*url=[NSURL fileURLWithPath:thePath];

    //NSURL *url = [NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/productivo/1.mp3"];
    mp = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    [[mp moviePlayer] prepareToPlay];
    [[mp moviePlayer] setUseApplicationAudioSession:NO];
    [[mp moviePlayer] setShouldAutoplay:YES];
    [[mp moviePlayer] setControlStyle:2];
    [[mp moviePlayer] setRepeatMode:MPMovieRepeatModeOne];
    [self presentMoviePlayerViewControllerAnimated:mp]; 
```

这是视频代码，它也适用于模拟器，但不适用于 iphone

```
 NSString*thePath=[[NSBundle mainBundle] pathForResource:fileName ofType:@"MP4"];
    NSURL*url=[NSURL fileURLWithPath:thePath];
    //NSURL *url = [NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/productivo/1.mp4"];
    mp = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    [[mp moviePlayer] prepareToPlay];
    [[mp moviePlayer] setUseApplicationAudioSession:NO];
    [[mp moviePlayer] setShouldAutoplay:YES];
    [[mp moviePlayer] setControlStyle:2];
    [[mp moviePlayer] setRepeatMode:MPMovieRepeatModeOne];
    [self presentMoviePlayerViewControllerAnimated:mp]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-05T09:53:02.840

首先添加 AVFoundation.framework 并添加以下代码。

在 .h 文件中

```
#import <AVFoundation/AVFoundation.h> 
```

和 .m 文件

```
 [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:47:53.160

试试这个代码...

```
NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
theAudio.delegate=self;
[theAudio play]; 
```

首先检查文件是否存储在您的项目文件夹中，并且该变量不是`nil`。

另请查看此链接[play-mp3-files-with-iphone-sdk](https://stackoverflow.com/questions/1973902/play-mp3-files-with-iphone-sdk)

本教程[如何在 iPhone 中播放音频和视频](http://iphoneapp-dev.blogspot.in/2011/07/how-to-play-audio-and-video-in-iphone.html)

**更新：**

```
MPMoviePlayerViewController *Mpplayer =[[MPMoviePlayerViewController alloc] initWithContentURL: [url standardizedURL]];
Mpplayer.moviePlayer.movieSourceType = MPMovieSourceTypeUnknown;  
[self presentModalViewController:Mpplayer animated:YES];
[[Mpplayer moviePlayer] play]; 
```

# c++ - 互斥锁可以挂起执行吗？

> ID：16033725
> 
> 赞同：2
> 
> 时间：2013-04-16T09:45:00.600
> 
> 标签：c++, locking, deadlock, boost-mutex

我对认真使用互斥锁还很陌生。

在各个地方实现了几个互斥锁后，我意识到程序执行挂起（而不是退出）。我尝试调试它（在 Eclipse 环境中），但我无法找到明确的原因（或者至少我不知道如何找到一个）但是，我现在知道程序在尝试锁定后挂起几次迭代成功地在同一个地方锁定。

这里有一些代码：

```
void xxx::receiveModule(timeslice now)
{
    //check if you have received anything in the incoming buffer
    if(!isIncomingDirty())// <- has a mutex inside
        {
            return;
        }
//...
}

bool &yyy::isIncomingDirty() {
    boost::unique_lock< boost::shared_mutex > lock(*Communicator_Mutexes[2]));//<-this will cause hang after a few calls
    return incomingIsDirty;
    } 
```

我不知道死锁发生时会显示什么行为。1-这是一个僵局吗？

2-您会在哪里检查以查找原因？

3-同一互斥锁的递归锁定或嵌套锁定会导致这种情况吗？

这个可能是题外话：

4-I 在类之间交换互斥锁，以供不同线程在其方法中使用。这是一种常见的做法吗？允许这样的事情吗？

非常感谢您的意见和解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:46:46.763

谢谢大家的友好评论。如您所见，问题很广泛，问题可能是由您所说的许多原因引起的。就我而言，正是`recursive locking`这导致了僵局。

一种解决方案是使用`boost::recursive_mutex`. 但是当我可以选择第二种解决方案时为什么要使用它：*首先避免递归锁定*
这就是我所做的，因此问题解决了。

再次感谢

# c++ - 首先调用哪个构造函数

> ID：16033729
> 
> 赞同：2
> 
> 时间：2013-04-16T09:45:20.323
> 
> 标签：c++, exception, constructor

以下代码来自 . 作者试图告诉我们，通过将一切都变成对象，我们可以防止资源泄漏。我的问题：为什么“猫”和“狗”的构造函数比“用户资源”的构造函数更早被调用？

```
//: C07:Wrapped.cpp
// Safe, atomic pointers
#include <fstream>
#include <cstdlib>
using namespace std;
ofstream out("wrapped.out");
// Simplified. Yours may have other arguments.
template<class T, int sz = 1> class PWrap {
    T* ptr;
public:
    class RangeError {}; // Exception class
    PWrap() {
        ptr = new T[sz];
        out << "PWrap constructor" << endl;
    }
    ~PWrap() {
        delete []ptr;
        out << "PWrap destructor" << endl;
    }
    T& operator[](int i) throw(RangeError) {
        if(i >= 0 && i < sz) return ptr[i];
        throw RangeError();
    }
};
class Cat {
public:
    Cat() { out << "Cat()" << endl; }
    ~Cat() { out << "~Cat()" << endl; }
    void g() {}
};
class Dog {
public:
    void* operator new[](size_t sz) {
        out << "allocating an Dog" << endl;
        throw int(47);
    }
    void operator delete[](void* p) {
        out << "deallocating an Dog" << endl;
        ::delete p;
    }
};
class UseResources {
    PWrap<Cat, 3> Bonk;
    PWrap<Dog> Og;
public:
    UseResources() : Bonk(), Og() {
        out << "UseResources()" << endl;
    }
    ~UseResources() {
        out << "~UseResources()" << endl;
    }
    void f() { Bonk[1].g(); }
};
int main() {
    try {
        UseResources ur;
    } catch(int) {
        out << "inside handler" << endl;
    } catch(...) {
    out << "inside catch(...)" << endl;
    }
} ///:~ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:52:08.327

> 为什么 'cat' 和 'dog' 的构造函数比 'useresources' 的构造函数更早被调用？

它们在进入构造函数的**主体**`UseResources`之前被调用。

`UseResources`有两个数据成员，它们是`PWrap<>`类模板的实例化。的构造函数`PWrap<T>`实例化了许多类型的对象`T`：

```
ptr = new T[sz]; 
```

从而导致对`T`(`Cat`或`Dog`，在您的情况下) 的构造函数进行相应数量的调用。

由于您的`PWrap`对象是 的数据成员`UseResources`，因此它们的构造函数在输入构造函数的主体之前执行`UseResources`。这就是 C++ 中对象构造的工作原理。

这背后的基本原理是确保当进入构造函数的主体时，所有子对象（包括基础子对象和*成员*子对象 - 例如`Bonk`和`Og`）的构造函数都已完成。

这样，构造函数可以依赖于使用有效的子对象，其类不变量在执行时已经建立。

这是 C++11 标准的第 12.6.2/10 段描述该过程的方式：

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> — 首先，并且仅对于最派生类 (1.8) 的构造函数，虚拟基类按照它们在基类的有向无环图的深度优先从左到右遍历中出现的顺序进行初始化，其中“左-to-right”是派生类基类说明符列表中基类的出现顺序。
> 
> — 然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。
> 
> —**然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）**。
> 
> —**最后，执行构造函数体的复合语句**。
> 
> [*注意*：声明顺序是为了确保基子对象和成员子对象以初始化的相反顺序被销毁。——<em>尾注]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:24:55.403

构造函数调用顺序为：

1.  基类。
2.  成员，按它们出现在标题中的顺序
3.  类构造函数。

UseResources 类在调用构造函数的主体之前被“构造”，因为它具有大小，并且成员变量具有正确的地址。然而，它们还没有完全建成。

构造函数的主体可以假定它的所有成员都已经完全构造（调用了它们的构造函数），因此必须按此顺序调用它们。

因此，Bonk 和 Og 在 UseResources 之前按顺序调用了它们的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:59:59.277

在代码段中：

```
 UseResources() : Bonk(), Og() {
      out << "UseResources()" << endl;
   } 
```

实际上，您在构造 Bonk 和 Og 成员之前调用 UseResources 构造函数，但稍后只是将日志外流

# iphone - 通过代码使用 UIPasteboard 将 .gif 图像复制到剪贴板 [iOS]

> ID：16033733
> 
> 赞同：10
> 
> 时间：2013-04-16T09:45:25.427
> 
> 标签：iphone, ios, objective-c, animated-gif, uipasteboard

我想将 .gif 图像复制到剪贴板，以便用户可以将该 gif 图像从应用程序粘贴到邮件等...

我努力了 ：-

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://fc05.deviantart.net/fs37/f/2008/283/a/b/KaleidoCoils_animated__gif_by_1389AD.gif"]];
UIPasteboard *pasteBoard=[UIPasteboard generalPasteboard];
[pasteBoard setImage:[UIImage imageWithData:data]]; 
```

但它以 .png 而不是 .gif 的格式复制。如何将 .gif 图像及其动画复制到剪贴板，可用作其他应用程序中的粘贴选项？

应用程序[https://itunes.apple.com/us/app/animated-3d-emoji+emoticons/id429348043?mt=8](https://itunes.apple.com/us/app/animated-3d-emoji+emoticons/id429348043?mt=8)已经这样做了。

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T09:57:17.627

我找到了相同的解决方案：-

这是帮助我的代码：-

```
@import MobileCoreServices;

NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://fc05.deviantart.net/fs37/f/2008/283/a/b/KaleidoCoils_animated__gif_by_1389AD.gif"]];
UIPasteboard *pasteBoard=[UIPasteboard generalPasteboard];
[pasteBoard setData:data forPasteboardType:(__bridge NSString *)kUTTypeGIF]; 
```

`@"com.compuserve.gif"`来自[http://www.escape.gr/manuals/qdrop/UTI.html](http://www.escape.gr/manuals/qdrop/UTI.html)

希望这可以帮助某人... :)

# javascript - 在标签更改时调用 javascript 方法

> ID：16033735
> 
> 赞同：0
> 
> 时间：2013-04-16T09:45:28.603
> 
> 标签：javascript, html

目前正在编写 HTML 代码以显示选项卡，如前所述。我想知道每次选项卡更改时如何调用函数，因为方法显示不同的数据。该方法是`box()`每次选项卡更改时调用方法，因为当我单击下一个选项卡时，当我返回该选项卡时选项卡上的数据会分散，因为选项卡上的数据是使用 c# 中的局部视图添加的

### Javascript代码

```
$(document).ready(function () {
    $('#tabs div').hide(); // Hide all divs
    $('#tabs div:first').show(); // Show the first div
    $('#tabs ul li:first').addClass('active'); // Set the class for active state

    $('#tabs ul li a').click(function () { // When link is clicked
        $('#tabs ul li').removeClass('active'); // Remove active class from links
        $(this).parent().addClass('active'); //Set parent of clicked link class to active
        var currentTab = $(this).attr('href'); // Set currentTab to value of href attribute
        $('#tabs div').hide(); // Hide all divs
        $(currentTab).show(); // Show div with id equal to variable currentTab
        return false;
    });
}); 
```

### HTML 代码

```
<div id="tabs" style="margin:0px; padding:0px;">
    <br />
    <ul>
        <li class="active">
            <a href="#tab-1">Google Analytics</a>               
        </li>
        <li class="">
            <a href="#tab-2">Facebook</a>
        </li>
        <li class="">
            <a href="#tab-3">YouTube</a>
        </li>
    </ul>   
    <div id="tab1" style="display: block; margin:0px;"></div>
    <div id="tab-2" style="display: none;"></div>
    <div id="tab-3" style="display: none;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:49:14.907

尝试 ：

```
$("#tabs").on("click", "li", function(){
  //Your stuff
  //with $(this) is the clicked li
}) 
```

# javascript - insertHTML unwraps div while inserting when selection is inside a node

> ID：16033737
> 
> 赞同：2
> 
> 时间：2013-04-16T09:45:29.873
> 
> 标签：javascript, contenteditable

在 contenteditable 元素中，当使用命令 insertHTML 调用 execCommand 时，如果选择位于节点内，命令将展开插入的 html 段周围的 div 标记。

示例 HTML 代码块如下：

```
<div id="editable" contenteditable="true">
    <div>Some text</div>
    <div>Yet another</div>
    <div>and other</div>
</div>
<input id="insert" type="button" value="Insert Segment"> 
```

并让javascript处理插入如下

```
$('#insert').on('mousedown', function (e) { //that is to save selection on blur
    e.preventDefault(); 
}).on('click', function () { // this inserts the sample html segment
    document.execCommand('insertHTML', false, 
    '<div class="new-segment">Text inside Segment</div>');
}); 
```

[http://jsfiddle.net/TE4Y6/](http://jsfiddle.net/TE4Y6/)上的实时示例遵循以下场景：

*   将插入符号放在所有内容的末尾，按回车键创建一个新行，然后按“插入段”

结果：带有灰色背景的新 div 包含插入的“文本段内”

*   将插入符号放在前三行中的任何一个内部，按“插入段”

结果：它只插入不包围 div 的段的内容

预期：灰色背景的新 div 包含插入的“文本段内”

*   将插入符号放在前三行中的任何一行的末尾，按“插入段”

结果：它只插入不包围 div 的段的内容

预期：灰色背景的新 div 包含插入的“文本段内”

*   将插入符号放在前三行中的任何一行的末尾，按回车键创建一个新行，然后按“插入段”

结果：带有灰色背景的新 div 包含插入的“文本段内”

我试图`<br>`在插入段之前自动插入它虽然插入了冗余空间，但它修复了第 3 步。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:04:11.103

You can try [Range.insertNode](https://developer.mozilla.org/en-US/docs/DOM/range.insertNode). Proof of concept: [http://jsfiddle.net/GYRLf/](http://jsfiddle.net/GYRLf/)

```
var sel = window.getSelection();
if (sel.rangeCount) {
    var range = sel.getRangeAt(0);
    range.insertNode(yourDivElement);
} 
```

A big disadvantage of this approach is that it breaks undo.

* * *

UPD. I think I found a workaround: [http://jsfiddle.net/2LCtd/](http://jsfiddle.net/2LCtd/)

```
document.execCommand('insertHTML', false,
    '<div class="new-segment">' +
        '<h6 class="killme">' + html + '</h6>' +
     '</div>'
);
$('.killme').contents().unwrap(); 
```

When you add a header inside the div WebKit stops merging the div with surroundings. And because the text content doesn't change when you later remove the header, the browser can undo correctly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T15:44:29.417

这似乎是 Chromium 的问题。您可以在[https://code.google.com/p/chromium/issues/detail?id=122062关注问题](https://code.google.com/p/chromium/issues/detail?id=122062)

# objective-c - 从详细视图推送另一个视图

> ID：16033739
> 
> 赞同：1
> 
> 时间：2013-04-16T09:45:33.477
> 
> 标签：objective-c, uinavigationcontroller, uisplitviewcontroller, ipad

我有一个大问题：在方法 didSelectRowAtIndexPath 上，self.navigationController 总是为 null。我有一个基于 SplitViewController 的项目，我想在详细信息 TableView 中选择一行时推送另一个视图。

建筑学：

```
LoginView->SplitViewController->Master
                               ->Detail->AnotherView 
```

我的 AppDelegate.m ：加载登录表单

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   

    // Initialize the app window
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    AuthentificationViewController *authentificationViewController =[[AuthentificationViewController alloc] initWithNibName:@"AuthentificationView" bundle:nil];
    self.window.rootViewController=authentificationViewController;

    [authentificationViewController setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [self.splitViewController presentModalViewController:authentificationViewController animated:YES];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

AppDelagate 的内部接口我有这些属性：

```
@property (nonatomic, retain) IBOutlet UISplitViewController *splitViewController;

@property (nonatomic, retain) IBOutlet UINavigationController *navController; 
```

方法句柄当我们单击登录表单上的取消按钮时

```
- (IBAction)btnCancel:(id)sender {

   AppDelegate* app_delegate=[[UIApplication sharedApplication] delegate];
    //self.window = [[UIApplication sharedApplication] keyWindow];
    app_delegate.window.rootViewController= app_delegate.splitViewController;

} 
```

当我们选择一行时，我们有这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

      if([indexPath row] == 0)
            {

                // show add bookmark controller

                BookmarkEditorController* bookmarkEditorController = [[[BookmarkEditorController alloc] initWithBookmark:[[ComputerBookmark alloc] initWithBaseDefaultParameters]] autorelease];

                [bookmarkEditorController setTitle:NSLocalizedString(@"Ajouter Connexion", @"Add Connection title")];
                [self.navigationController pushViewController:bookmarkEditorController animated:YES];

} 
```

但是当我选择一行并且 navigationController 为 nil 时什么都没有发生，请问我该如何解决？

提前致谢

编辑：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      UIViewController *localdetailViewController =nil;
       if([indexPath row] == 0)
        {

            // show add bookmark controller

            BookmarkEditorController* bookmarkEditorController = [[[BookmarkEditorController alloc] initWithBookmark:[[ComputerBookmark alloc] initWithBaseDefaultParameters]] autorelease];

            [bookmarkEditorController setTitle:NSLocalizedString(@"Ajouter Connexion", @"Add Connection title")];

            localdetailViewController=bookmarkEditorController;
             AppDelegate *delegate =[[UIApplication sharedApplication] delegate];

            NSArray *viewControllers=[[NSArray alloc] initWithObjects: [delegate.splitViewController.viewControllers objectAtIndex:0],bookmarkEditorController,nil];
            delegate.splitViewController.viewControllers=viewControllers;

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:52:44.610

看看这个[链接](http://remapps.net/2011/01/25/split-view-controller-switching-detail-view-controllers/) ，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {   
UIViewController* myVCToReplace = nil;
  if(indexPath.row == 1)
       myVCToReplace = [myVC1 alloc]init];
  else
       myVCToReplace = [myVC2 alloc]init]; 

  NSMutableArray* array = [[NSMutableArray alloc] initWithArray:MySplitVC.viewControllers];
      [arr replaceObjectAtIndex:1 withObject:myReplacementVC];
      MySplitVC.viewControllers = arr;
      [arr release]; 
```

# jquery - jCrop 调整大小的图像

> ID：16033745
> 
> 赞同：5
> 
> 时间：2013-04-16T09:45:47.467
> 
> 标签：jquery, asp.net, css, jcrop

我正在`max-width`为要在页面上显示的图像设置 css 属性。但是，这会破坏 jCrop。左边是我选择的。右边是我裁剪后裁剪的内容。我在这里使用了这个例子。

[http://www.mikesdotnetting.com/Article/95/Upload-and-Crop-Images-with-jQuery-JCrop-and-ASP.NET](http://www.mikesdotnetting.com/Article/95/Upload-and-Crop-Images-with-jQuery-JCrop-and-ASP.NET)

![这是我选择的](https://i.stack.imgur.com/HCaUv.png) ![这是实际裁剪的](https://i.stack.imgur.com/2NYYV.png)

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T09:14:40.623

jcrop 在固定最大宽度的情况下运行良好。我也测试过那个。可能您正在裁剪错误的区域，如右方所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T15:47:51.223

您可以为 Jcrop 配置最大宽度和高度

```
$( "#cropsource" ).Jcrop({ boxWidth: 800, boxHeight: 500 }); 
```

# linux-device-driver - 如何找出占用我的 GPIO 的 Linux 驱动程序？

> ID：16033748
> 
> 赞同：32
> 
> 时间：2013-04-16T09:45:52.280
> 
> 标签：linux-device-driver, gpio

我的板上有一个作为 GPIO 复用的焊盘。当我尝试通过 /sys/class/gpio/export 导出它时，我得到

```
-sh: echo: write error: Device or resource busy 
```

我的猜测是在我得到这个机会之前，其他一些司机正在请求这个垫子。我怎样才能知道什么是保留它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-05-13T17:04:25.380

在边界设备内核上，也许还有其他内核上，您可以使用它`cat /sys/kernel/debug/gpio`来获取映射的 gpio 列表、它们的状态以及分配时给出的名称。您可以 grep 内核源代码以获取名称并找出是哪个模块获取了它。

```
root@nitrogen6x:/opt# cat /sys/kernel/debug/gpio 
GPIOs 0-31, platform/209c000.gpio, 209c000.gpio:
 gpio-2   (flexcan-trx-stby    ) out lo    
 gpio-17  (DISP_SCL            ) out lo    

GPIOs 32-63, platform/20a0000.gpio, 20a0000.gpio:
 gpio-33  (sysfs               ) out lo    
 gpio-35  (sysfs               ) in  hi    
 gpio-36  (sysfs               ) in  hi    
 gpio-37  (DISP_SDI            ) out lo    
 gpio-38  (219c000.usdhc cd    ) in  hi    

GPIOs 64-95, platform/20a4000.gpio, 20a4000.gpio:
 gpio-83  (spi_imx             ) out lo    
 gpio-86  (usb_otg_vbus        ) out lo    

GPIOs 96-127, platform/20a8000.gpio, 20a8000.gpio:
 gpio-101 (sysfs               ) in  hi    
 gpio-116 (rst-gpios           ) out lo    

GPIOs 128-159, platform/20ac000.gpio, 20ac000.gpio:

GPIOs 160-191, platform/20b0000.gpio, 20b0000.gpio:
 gpio-175 (wlan-en             ) out lo    
 gpio-176 (bt_rfkill_reset     ) out lo    

GPIOs 192-223, platform/20b4000.gpio, 20b4000.gpio:
 gpio-192 (2198000.usdhc cd    ) in  lo    
 gpio-204 (ehci_reset_gpio     ) out lo    
 gpio-205 (sysfs               ) in  lo 
```

'

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-10T15:26:07.723

如果您尝试使用`cat /sys/kernel/debug/gpio`但它不起作用，请先尝试：

```
mount -t debugfs debugfs /sys/kernel/debug 
```

然后使用上述`cat`命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T11:35:04.293

我们最终使用了另一个 GPIO 引脚。i.mx6 有 7 个 GPIO 控制器，每个控制器有 32 个引脚，并且一些控制器只是简单地给出了看似无处的 I/O 错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-03T10:19:46.187

您可以使用“lsof”命令列出打开的文件。事实上，gpio 文件是常规文件。（例如/sys/class/gpio/gpio242/value）。
此外，您应该确保将正确的内核模块（使用 insmod 或 modprobe）加载到内存中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-02T11:08:36.197

`/sys/kernel/debug/gpio`是[旧版 GPIO 接口](https://www.kernel.org/doc/html/v5.15/driver-api/gpio/legacy.html)的一部分，可能不存在于较新的内核上。替代品是[libgpio-tools](https://git.kernel.org/pub/scm/libs/libgpiod/libgpiod.git/tree/README)`gpioinfo`工具；这些工具使用较新的[字符设备接口](https://www.kernel.org/doc/html/v5.15/driver-api/gpio/driver.html)来处理 gpios。

如果使用[buildroot](https://buildroot.org)，启用`BR2_PACKAGE_LIBGPIOD`和`BR2_PACKAGE_LIBGPIOD_TOOLS`.

```
buildroot:~ $ gpiodetect
gpiochip0 [30200000.gpio] (32 lines)
gpiochip1 [30210000.gpio] (32 lines)
gpiochip2 [30220000.gpio] (32 lines)
gpiochip3 [30230000.gpio] (32 lines)
gpiochip4 [30240000.gpio] (32 lines)
gpiochip5 [0-0023] (16 lines)

buildroot:~ $ gpioinfo
gpiochip0 - 32 lines:
    line   0:      unnamed       unused   input  active-high 
    line   1:      unnamed       unused   input  active-high 
    line   2:      unnamed       unused   input  active-high 
    line   3:      unnamed       unused   input  active-high 
    line   4:      unnamed       unused   input  active-high 
    line   5:      unnamed       unused   input  active-high 
    line   6:      unnamed "pci_usb_sel" output active-high [used]
    line   7:      unnamed       "dio0"   input  active-high [used]
    line   8:      unnamed       unused   input  active-high 
    line   9:      unnamed       "dio1"   input  active-high [used]
    line  10:      unnamed "regulator-usb-otg1" output active-high [used]
(...) 
```

# android - 我应该用什么在android中异步访问网络？

> ID：16033749
> 
> 赞同：2
> 
> 时间：2013-04-16T09:45:56.137
> 
> 标签：android, android-asynctask, robospice

我`AsyncTask`在我的应用程序中实现了一个并遇到了异常，例如`IllegalArgumentException`. 我问了关于堆栈溢出的问题，有人说我不应该`AsyncTask`在应用程序中使用，原因如下。

*   AsyncTasks 不遵循 Activity 实例的生命周期
*   内存泄漏问题
*   您的任务进度将丢失

我被推荐 Robospice 并被告知考虑这个线程 [`AsyncTask`并不是在 Android 上创建网络请求的最佳工具。使用 RoboSpace](https://stackoverflow.com/a/13147992/693752)

谁能告诉我异步使用接入网络的最佳选择是什么？我应该使用什么`AsyncTask`或 RoboSpice？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T23:02:44.120

根据[Google IO 的这个人的](http://www.youtube.com/watch?v=xHXn3Kg2IQE)说法，使用 AsyncTask 进行网络**并不是一条可行的路**。他可能会以令人讨厌和居高临下的语气进行演讲，但仍然有一些优点。

IMO 主要使用的库是[android-async-http](http://loopj.com/android-async-http/)和[robospice](https://github.com/octo-online/robospice/)。

免责声明：我还没有尝试过其中任何一个。虽然我更喜欢 android-async-http 的 API，但似乎 Robospice 是最近开发的并且支持更好的库。

我最终可能会滚动自己的扩展`IntentService`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:55:24.883

这是一个 Android 异步 Http 客户端库文件来完成这些工作。试试。

[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:00:12.973

我在所有应用程序中都使用 AsyncTask。没问题。

片段 [http://pastebin.com/EDZtKy3M中的示例](http://pastebin.com/EDZtKy3M)

CustomTask 的自定义实现示例库 [http://pastebin.com/F18hRXr6](http://pastebin.com/F18hRXr6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:55:56.747

我一直在为几个项目使用 AsyncTasks，但从未遇到过这样的问题。尽管如此，正如 Snicolas 在该帖子中所说，如果您使用 AsyncTasks 进行**长时间运行的**操作，可能会出现问题（注意粗体字）。

因此，如果您正在做短期操作，请尝试 AsyncTasks，否则我会尝试 Robospice。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:58:18.177

一个 asyncTask 实例只能使用一次，如果要执行第二个请求必须再次调用 new()

# c++ - 具有原始类型的 C++ const 修饰符

> ID：16033751
> 
> 赞同：11
> 
> 时间：2013-04-16T09:45:59.373
> 
> 标签：c++

我应该注意`const`使用原始类型的修饰符吗？哪一个在语法上更正确，为什么？

第一个版本：

```
float Foo::bar(float a, float b)
{
    return (a + b) / 2.0f;
} 
```

第二个版本：

```
const float Foo::bar(const float a, const float b)
{
    return (a + b) / 2.0f;
} 
```

第三版：

```
float Foo::bar(const float a, const float b)
{
    return (a + b) / 2.0f;
} 
```

我知道原始类型的变量在传递给某个方法时会被复制，但是哪种方法更清楚？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T09:49:41.590

我会说第三个版本是最“正确”的。

您告诉编译器参数是`const`，这是正确的，因为您没有修改它们。这可以帮助编译器优化传递参数以及计算。

并且返回类型不是`const`因为调用者可能想要修改返回值。如果调用者不想修改返回值，则由调用者将其分配给`const`变量。

我也会添加`const`到函数声明中，因为该函数不会修改对象中的任何内容：

```
float Foo::bar(const float a, const float b) const 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T10:17:11.780

首先，您提供的所有定义在语法上都是正确的。如果它们编译，那么它们在语法上是正确的。

`const`参数限定符只有一个目的：防止函数体修改限定`const`参数。

在您的示例代码的特定情况下，该方法`Foo::bar`不会修改参数，因此使用`const`限定符没有任何效果。

但是，您可能希望`const`在所有情况下都使用默认值，并且仅在您希望允许修改的情况下将其删除。因此，将其应用于参数`Foo::bar`是一个好主意。我认为这是一种很好的做法，尽管我承认我很少使用它，因为它会产生一点噪音，这可能会降低可读性。

另一件需要考虑的事情是，对于原始类型，或者更准确地说，不是指针或不包含指针的类型，修改按值传递的参数（即不是通过引用）不会有任何副作用：这些类型的参数确实起作用作为初始化的局部变量（这可能很方便，但也可能令人困惑）。对于指针，任何对指向数据的修改都会泄露给外界。*这是在指针和类型的指向部分*`const`使用限定符的另一个很好的理由。

 *总而言之，`const`尽可能多地使用限定符将有助于使代码不易出错，还可以帮助编译器优化生成的程序。

但是，如果这些类型描述了适合 CPU 寄存器的值（通常是这种情况），则使用这些类型的引用不应产生任何重大变化，

因此，该方法的所有三个版本都应该归结为相同的生成汇编代码。

在原始返回类型的特定情况下，这无关紧要。返回值可以来回转换为`const`合格的。

其他人也提到了`const`限定符对函数本身的兴趣。虽然超出了最初的问题范围，但我还要说，在可能的情况下（例如 for `Foo::bar`）将函数限定为 确实更好`const`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:50:26.600

第 2 版和第 3 版完全没有区别。选择一个最短的类型:)

1号和3号有一点区别。如果您害怕不小心修改`a`和`b`在函数内部，您可能更喜欢第 3 个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:52:18.577

简短的回答：没关系。

长答案：因为您按值传递两个参数并按值返回参数。其中任何一个都很好，但您会更常见地看到第一个版本。

如果您通过引用传递（正如其他人所建议的那样），那么它确实很重要，您应该使用 const-reference。但是，通过引用传递原始类型并没有真正给您带来任何优势或意义（如果它是 const 引用）。这样做的原因是，与通过引用传递基本类型相比，按值传递基本类型不会产生任何开销。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T09:53:30.630

我要说的是，对于原语，实际复制它们可能会更有效。当你传递一个引用时，编译器仍然必须传递堆栈上的字节，然后必须取消引用地址以获取内容。

此外，按值传递克服了与传递的内存有关的任何可能的并发性/波动性问题。

这是“不要尝试在这里优化”的情况。

通过 const 返回是风格。我通常不这样做，其他人更喜欢以防万一有人用返回的值做某事。接下来，您会发现人们通过 r 值引用返回它们...

我通常会选择你的第一个选项。另一种选择是按值传递（不必使用 const）并按 const 值返回。*

# datetime - 为什么 ServiceStack 默认 Html 快照视图使用 DateTime.UtcNow 显示日期？

> ID：16033753
> 
> 赞同：0
> 
> 时间：2013-04-16T09:46:05.093
> 
> 标签：datetime, servicestack, utc

当我通过浏览器查看我的 ServiceStack 端点时，我会在一个方便的 HTML 表中获得非常有用的数据快照。标题看起来像这样：

`Snapshot of EndPoint generated by ServiceStack on DateTime`

显示的`DateTime`似乎是`UTC`格式，我正在尝试找出原因。在英国，现在是英国夏令时 (UTC +1)，所以 ServiceStack 总是显示错误的时间。

源代码在这里：[https ://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Formats/HtmlFormat.cs#L63](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Formats/HtmlFormat.cs#L63)

我的问题是：

**这是一个小错误，还是我不知道以 UTC 显示日期和时间的另一个原因？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:28:20.917

日期总是以 UTC格式传输， [ServiceStack 的 HTML5 报告格式](https://github.com/ServiceStack/ServiceStack/wiki/HTML5ReportFormat)的目的是以人性化的格式显示来自 Web 服务的数据。

# javascript - 使用 jQuery 重构 UI 回调

> ID：16033755
> 
> 赞同：0
> 
> 时间：2013-04-16T09:46:08.407
> 
> 标签：javascript, jquery, refactoring

我刚刚用 jQuery 做了一个幻灯片，查看了“下一张幻灯片”和“上一张幻灯片”按钮的代码，我意识到它们几乎是一样的，除了几个功能发生了变化。

我认为这可以被重构以提高效率，但我不确定如何。

有人可以告诉我怎么做吗？

```
//UI Binding
$nextbutton.on("click", function(){

    //Blocking control
    if (slideshowBlocked) return;
    slideshowBlocked = true;

    //Get active slide
    var $active = $slides.filter(".active");
    //Get new Slied
    var $newSlide = $active.next(".slide");
    if (!$newSlide.length){
        $newSlide = $slides.first();
    }

    //Prepare new slide beneath the active
    $newSlide.css({
        "z-index": 5,
        "display": "block"
    });

    //Fade out the active
    $active.fadeOut(function(){
        //Update states and CSS properties
        $(this).removeClass("active");
        $newSlide.addClass("active").css( "z-index", 10);;

        //Unblock slideshow
        slideshowBlocked = false;
    });
});
$prevbutton.on("click", function(){

    //Blocking control
    if (slideshowBlocked) return;
    slideshowBlocked = true;

    //Get active slide
    var $active = $slides.filter(".active");
    //Get new Slied
    var $newSlide = $active.prev(".slide");
    if (!$newSlide.length){
        $newSlide = $slides.last();
    }

    //Prepare new slide beneath the active
    $newSlide.css({
        "z-index": 5,
        "display": "block"
    });

    //Fade out the active
    $active.fadeOut(function(){
        //Update states and CSS properties
        $(this).removeClass("active");
        $newSlide.addClass("active").css( "z-index", 10);;

        //Unblock slideshow
        slideshowBlocked = false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:17:23.407

鉴于，正如您所说，这两个函数基本上都在做同样的事情，您可以使用工厂函数并传入您想要的选项。不需要基于字符串的逻辑 - 只需使用适当的函数名称。

```
function slide (direction, fallback) {
    return function () {
        //Blocking control
        if (slideshowBlocked) return;
        slideshowBlocked = true;

        //Get active slide
        var $active = $slides.filter(".active");

        //Get new slide
        var $newSlide = $active[direction](".slide");
        if (!$newSlide.length) {
            $newSlide = $slides[fallback]();
        }

        //Prepare new slide beneath the active
        $newSlide.css({
            "z-index": 5,
            "display": "block"
        });

        //Fade out the active
        $active.fadeOut(function(){
            //Update states and CSS properties
            $(this).removeClass("active");
            $newSlide.addClass("active").css( "z-index", 10);

            //Unblock slideshow
            slideshowBlocked = false;
        });
    }
}

$nextbutton.on('click', slide('next', 'first'));
$prevbutton.on('click', slide('prev', 'last')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:59:51.253

没有看到你的 DOM，我不能更精确，但它基本上是这样的：

与其使用 $nextbutton 和 $prevbutton，不如使用更通用的触发器。例如，如果两者都是按钮或链接，则在该级别的按钮或链接上触发。例如，**如果**您的触发器类似于

```
<ul class="controls">
    <li><a class="prev">Previous</a></li>
    <li><a class="next">Next</a></li>
</ul> 
```

然后绑定到`.controls a`而不是`.prev`and `.next`。

然后两者都可以使用完全相同的代码，除了：

```
//Get new Slide
var $newSlide = $active.next(".slide");
if (!$newSlide.length){
    $newSlide = $slides.first();
} 
```

相反，您必须执行以下操作：

```
//Get new Slide
var isPrev = $(this).hasClass(theNameOfClassOnPrevControl);
var $newSlide = isPrev ? $active.prev(".slide") : $active.next(".slide");
if (!$newSlide.length){
    $newSlide = isPrev ? $slides.last() : $slides.first();
} 
```

希望有帮助。让我知道是否有任何需要澄清的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:07:37.410

不是最优雅的方式，但这至少调用一个函数而不是两个。

```
var nextOrPrevious = function (nextOrPrevious) {
        if (slideshowBlocked) return;
        slideshowBlocked = true;

        //Get active slide
        var $active = $slides.filter(".active");
        //Get new Slied
        var $newSlide;
        if (nextOrPrevious === "next") {
            $newSlide = $active.next(".slide");
        } else if (nextOrPrevious === "previous") {
            $newSlide = $active.prev(".slide");
        } else {
            console.log("Wrong argument");
        }

        if (!$newSlide.length) {
            if (nextOrPrevious === "previous") {
                $newSlide = $slides.last();
            } else if (nextOrPrevious === "next") {
                $newSlide = $slides.next();
            }else {
            console.log("Wrong argument");
        }
        } 

        //Prepare new slide beneath the active
        $newSlide.css({
            "z-index": 5,
            "display": "block"
        });

        //Fade out the active
        $active.fadeOut(function () {
            //Update states and CSS properties
            $(this).removeClass("active");
            $newSlide.addClass("active").css("z-index", 10);;

            //Unblock slideshow
            slideshowBlocked = false;
        });
    };
$nextbutton.on("click", nextOrPrevious("next"));
$prevbutton.on("click", nextOrPrevious("previous")); 
```

# java - 如何在 Eclipse8.6 的 swing 库中找到 JFrame？

> ID：16033760
> 
> 赞同：0
> 
> 时间：2013-04-16T09:46:24.250
> 
> 标签：java, eclipse, swing, jframe

我知道我有 swing 库，因为我可以通过编程方式添加 JFrame。但是，我无法在 Eclipse 中使用 New > Other > Swing 等添加 JFrame，因为我的其他向导中没有 Swing 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:05:30.660

Eclipse 中没有这样的向导。您需要使用插件扩展 Eclipse 以获得类似的功能。

以前只有一个可用于 Eclipse，即[Visual Editor](http://wiki.eclipse.org/VE)，但它已被弃用，将被[WindowBuilder](http://www.eclipse.org/windowbuilder/)取代。与此同时，还有更多可用的 GUI 构建插件：[请参见此处](https://stackoverflow.com/questions/29426/best-gui-designer-for-eclipse)。

没有提到的一个插件是[Swing GUI Designer](http://marketplace.eclipse.org/content/swing-gui-designer)，以前称为 Matisse4MyEclipse。在此插件的评论中，您会发现一些对其他 GUI 构建器/设计器插件的引用。

# symfony - 在 symfony 2.1 中根据子实体创建表单/s

> ID：16033764
> 
> 赞同：1
> 
> 时间：2013-04-16T09:46:32.120
> 
> 标签：symfony, symfony-2.1, symfony-forms

我是 Symfony 的新手。现在我正在为一个实体创建表单，但我需要创建任何表单来编辑子实体。

例如，如果我在这种关系中有`contact`实体并`phone_numbers`作为子实体。

如何在同一页面中编辑此联系人的此电话号码？我需要创建任何表格，因为 phone_numbers 有这个联系人？我怎样才能做到这一点？

任何线索或参考手册就足够了！！我会研究一下

提前致谢。

# mysql - mysql 是否会在选择、更新或删除时锁定表？

> ID：16033768
> 
> 赞同：6
> 
> 时间：2013-04-16T09:46:39.150
> 
> 标签：mysql, locking

我有几个关于 MySQL 表的问题`lock`。如果有人回答，我将不胜感激:)

1.  MySQL 在以下情况下是否会自动锁定表：

    *   `SELECT id FROM members;`
    *   `UPDATE members SET name = 'john' WHERE id = 7;`
2.  这两者有什么区别：

    *   `LOCK TABLE items READ ; SELECT * FROM 'items;`
    *   `SELECT * FROM 'items';`
3.  出于某种原因，我的印象是 MySQL 在必要的情况下会自动锁定表！如何检查锁定何时以及如何发生？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:05:36.923

1.a) 不需要锁
1.b) 锁定表（myisam 引擎），或者如果您使用 innodb 引擎，则您有行级锁定

2.a) 为读操作锁定表（直到这个锁被释放，没有写操作发生）
2.b) 不需要锁

正如 Lithu TV 建议的那样，请阅读文档[以](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)获取所有用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:07:39.800

1.  据我所知，在 mysql 中，表不会自动锁定。但这取决于你使用什么。例如，使用 SqlTransaction，受影响的表将被锁定，直到您提交或回滚。

2.  一个。您首先锁定表，这将确保在您读取表时，没有其他人可以锁定它以写入并且您会遇到死锁；） b。在某些特殊情况下，表上的锁可能会阻止您读取表，因此 sql 失败。

3.  使用 "SHOW OPEN TABLES" ，您将看到所有可用的表及其锁定状态。由于您要排除的系统表，这有点复杂，例如：

> ```
> $sql = "SHOW OPEN TABLES FROM '".$db_name."'
> WHERE In_use > 0
> AND
> 'Table' IN (";
> 
> $tables = count($array_tables_names);
> for($i = 0; $i < $tables; $i++):
> $sql .= "'".$array_tables_names[$i]."'";
> if($i < ($tables-1)) $sql .= ",";
> endfor;
> 
> $sql .= ")"; 
> ```

更多关于锁的信息可以在这里找到：http: [//dev.mysql.com/doc/refman/5.1/en//lock-tables.html](http://dev.mysql.com/doc/refman/5.1/en//lock-tables.html)

# c# - MVVM 光从 ViewModel 发送消息到 View

> ID：16033778
> 
> 赞同：5
> 
> 时间：2013-04-16T09:47:12.957
> 
> 标签：c#, mvvm, messenger

我对 MVVM light 非常陌生，并且在使用 Messenger 时遇到了一些问题。

我试图从 ViewModel 向 View 发送消息，但这对我不起作用，我尝试过查看帖子和示例代码，但我认为我缺少一些非常简单的东西..感谢您的帮助..

在我的 ViewModel 中，我发送一条消息

```
Messenger.Default.Send(new ClearNewProjectSettingsMessage()); 
```

这是我的 Message 类，我真的不知道该放什么，因为一切都在我的 View 类中

```
public class ClearNewProjectSettingsMessage
{
    public ClearNewProjectSettingsMessage()
    {

    }
} 
```

我在 Views 构造函数中注册了消息：

```
Messenger.Default.Register<ClearNewProjectSettingsMessage>(
            this,
            () => ClearSettings()
); 
```

不幸的是，这无法编译，所以我尝试了这个：

```
Messenger.Default.Register<ClearNewProjectSettingsMessage>(this,ClearSettings); 
```

但是还是不行。。

这是我要调用的方法（在视图中）：

```
private void ClearSettings()
{
        passwordBox.Clear();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:55:24.513

Now I have not ever used MVVM Light Messenger, but as with any event aggregator/message bus, it makes sense so that the handler method takes in the object *that it handles* as an argument:

I have checked the source code and the registration looks as follows:

```
public virtual void Register<TMessage>(object recipient, Action<TMessage> action) 
```

With that in mind, this definition:

```
private void HandleClearSettings(ClearNewProjectSettingsMessage message)
{
} 
```

should fix your registration:

```
Messenger.Default.Register<ClearNewProjectSettingsMessage>(this, HandleClearSettings); 
```

# joomla - joomla-database下joomla2.5编程中的create table语法

> ID：16033779
> 
> 赞同：0
> 
> 时间：2013-04-16T09:47:14.387
> 
> 标签：joomla, joomla2.5, joomla-extensions

```
$db = JFactory::getDBO();
$query = $db->getQuery(true);
$query->CREATE TABLE IF NOT EXISTS `tbl_employee` ( `employee_id` int(10) NOT NULL, `name` varchar(50) NOT NULL, `email_id` varchar(40) NOT NULL, `contact_number` int(20) NOT NULL, `address` varchar(300) NOT NULL, `date_of_birth` date NOT NULL, `nationality` varchar(20) NOT NULL, `gender` varchar(10) NOT NULL, `date_of_joining` date NOT NULL, `employee_group_id` int(10) NOT NULL, `cast` varchar(20) NOT NULL, `religion` varchar(20) NOT NULL, `marital_status` varchar(20) NOT NULL, `nominee_name` varchar(60) NOT NULL, `father_name` varchar(60) NOT NULL, `mother_name` varchar(60) NOT NULL, PRIMARY KEY (`employee_id`), KEY `employee_group_id` (`employee_group_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
$db->setQuery($query); 
```

它产生错误

> SCREAM：错误抑制忽略（！）解析错误：语法错误，C:\wamp\www\joomla\components\com_lmeinstaler\views\lmeinstaler\tmpl\default.php 中的意外 'TABLE' (T_STRING) 在第 7 行

谁能告诉我错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:49:25.150

尝试使用以下方法创建表：

```
$db = JFactory::getDBO();
$query = "CREATE TABLE IF NOT EXISTS `#__employee` ( `employee_id` int(10) NOT NULL, `name` varchar(50) NOT NULL, `email_id` varchar(40) NOT NULL, `contact_number` int(20) NOT NULL, `address` varchar(300) NOT NULL, `date_of_birth` date NOT NULL, `nationality` varchar(20) NOT NULL, `gender` varchar(10) NOT NULL, `date_of_joining` date NOT NULL, `employee_group_id` int(10) NOT NULL, `cast` varchar(20) NOT NULL, `religion` varchar(20) NOT NULL, `marital_status` varchar(20) NOT NULL, `nominee_name` varchar(60) NOT NULL, `father_name` varchar(60) NOT NULL, `mother_name` varchar(60) NOT NULL, PRIMARY KEY (`employee_id`), KEY `employee_group_id` (`employee_group_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;";
$db->setQuery($query);
$db->query(); 
```

做了一些小的调整，主要是添加数据库前缀

# jquery - 使用 jQuery 显示/隐藏特定的 div

> ID：16033783
> 
> 赞同：0
> 
> 时间：2013-04-16T09:47:24.357
> 
> 标签：jquery, html, twig

我在树枝模板中使用 jQuery 来显示或隐藏某些 div。为了解释上下文，我有一个评论区，我只想在用户点击某个链接时显示评论表单。但是，这些 div 是通过“for”循环生成的（因为每个评论都有一个链接来回答这个特定的评论）。然后我必须为每个答案 div 和他各自的链接设置特定的 id。这看起来并不难，但我被卡住了，我真的不明白为什么......我不确定我是否清楚所以这是我的代码：

枝条：

```
{% for commentaire in article.commentaires %}
<div>
    // display comment

    {% for reponse in commentaire.reponses %}
        // display answer
    {% endfor %}

        <a id="lien-reponse[{{ commentaire.id }}]" class="lien-reponse" href="#">Répondre au commentaire</a>
        <div id="div-lien-reponse[{{ commentaire.id }}]" style="display:none">
            // form to answer the comment
        </div>
</div>
{% endfor %} 
```

在这段代码中，我想在用户单击链接 #lien-reponse[xx] 时显示 div #div-lien-reponse[xx]。这是查询代码：

查询：

```
$('.lien-reponse').click(function(event) {
 var id = $(this).attr("id");
 $('#'+id).hide();
 $('#div-'+id).show("slow");
 event.preventDefault();
}); 
```

但是当我点击链接时，它在页面上没有做任何事情（但是url上没有出现#，所以我猜对jquery函数的调用是好的）。我不太擅长 jQuery，所以也许我错过了一些非常明显的东西，或者是一种更简单的方法来做到这一点。

在此先感谢您的帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:57:02.333

如果您使用 Symfony2 和 Twig，只需确保在 jQuery 之后调用您的脚本！

```
{% block javascripts %}
    <script src='http://code.jquery.com/jquery-latest.min.js'></script>
    <!--<script src='{{ asset('bundles/yourbundle/js/jquery-1.9.1.min.js') }}'></script>-->
    <script>
        $(document).ready(function ($) {
            $(document).on('click', '.lien-reponse', function(event) { // equivalent to $('.lien-reponse').click()
                event.preventDefault();
                $(this).hide();
                $(this).next().show('slow');
                // You can also chain your jQuery dom manipulation:
                // $(this).hide().next().show('slow');
            });
        });
    </script>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:51:20.917

首先...**由于您的 id 具有`[]`字符，您需要转义以在选择器中使用它**...所以我认为如果您使用它会更好`next()`.. 如果 div 总是在链接旁边

```
$(function(){  //document.ready function 
  $('.lien-reponse').click(function(event) {
     $(this).next().show('slow');  // OR $(this).next('div').show('slow');
     event.preventDefault();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:53:22.843

您不需要跟踪所有这些 id。请改用 DOM。

```
$('.lien-reponse').click(function(event) {
    $(this).next("div").toggle();
} 
```

# function - Haskell 错误 - 无法匹配预期类型

> ID：16033785
> 
> 赞同：4
> 
> 时间：2013-04-16T09:47:29.503
> 
> 标签：function, haskell, types

我想编写一个用于构建随机数列表的函数，这是我编写的代码

```
buildlist :: Int -> Int -> [Int]
buildlist n m = do
    seed <- getStdGen
    let l = randomRs (0, m) seed
    let list = take n l
    return list 
```

然后是错误

```
 Couldn't match expected type `[t0]' with actual type `IO StdGen'
In a stmt of a 'do' block: seed <- getStdGen
In the expression:
  do { seed <- getStdGen;
       let l = randomRs ... seed;
       let list = take n l;
       return list }
In an equation for `buildlist':
    buildlist n m
      = do { seed <- getStdGen;
             let l = ...;
             let list = ...;
             .... } 
```

ps.haskell 与 c、java、ruby 如此不同，以至于我觉得我已经神经质地学习了编码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:50:03.327

因为您使用的是 IO ( `getStdGen`)，所以整个函数必须在`IO`monad 中。将返回类型更改为

```
buildList :: Int -> Int -> IO [Int] 
```

*一定*要读一本好书:-)

# mysql - 为什么 WHERE IN 运行速度极慢

> ID：16033791
> 
> 赞同：0
> 
> 时间：2013-04-16T09:47:41.090
> 
> 标签：mysql, search

我一直在使用以下查询一段时间，但随着结果数据库的增长，它变得缓慢到无法使用的程度。任何人都可以提出另一种方法吗？

我在 c.name 和 r.scope 上有全文索引

```
SELECT * FROM results r 
        INNER JOIN categories c on r.id = c.result_id 
        INNER JOIN tags t on r.id = t.result_id 
        WHERE c.name in ('purchase', 'single_family', 'other')

        AND ( r.scope = 'all' OR r.scope = 'hi' )
        AND published = 1
    GROUP BY r.id
        HAVING COUNT(c.c_id) >= 3
        ORDER BY r.usefulness DESC
        LIMIT 8 OFFSET 0 
```

任何帮助将非常感激。谢谢！

编辑：这是解释的结果

```
 id    select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  c   range   nameindex,name  nameindex   767     NULL    10036   Using where; Using temporary; Using filesort
1   SIMPLE  t   ALL     NULL    NULL    NULL    NULL    10229   Using where; Using join buffer
1   SIMPLE  r   eq_ref  PRIMARY,scope   PRIMARY     4   rfw.t.result_id     1   Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:54:20.290

更新：查询创建索引

CREATE INDEX name ON categories (name);

* * *

使用 Explain 语句，explain 的输出将帮助您决定哪一列需要索引和其他有用信息。

如[mysql 文档](http://dev.mysql.com/doc/refman/5.5/en/explain.html)中所述：

> 当您在 SELECT 语句之前加上关键字 EXPLAIN 时，MySQL 会显示来自优化器的有关查询执行计划的信息。也就是说，MySQL 解释了它将如何处理该语句，包括有关表如何连接以及以何种顺序连接的信息。

运行这个：

```
 EXPLAIN SELECT * FROM results r 
    INNER JOIN categories c on r.id = c.result_id 
    INNER JOIN tags t on r.id = t.result_id 
    WHERE c.name in ('purchase', 'single_family', 'other')

    AND ( r.scope = 'all' OR r.scope = 'hi' )
    AND published = 1
GROUP BY r.id
    HAVING COUNT(c.c_id) >= 3
    ORDER BY r.usefulness DESC
    LIMIT 8 OFFSET 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:56:49.267

当你想让你的查询更快时，你可以做 3 件事：

*   添加索引`c.name`（慢查询表明您没有任何索引）
*   添加`count`到`categories`（上面有索引），它将包含缓存的数据
    `WHERE c.count >= 3` 将只获取有限数量的结果
    `HAVING COUNT() >= 3`必须在返回之前获取所有结果
*   如果可能，请使用`WHERE c.id IN (...)` 而不是`WHERE c.name in ('...)`...
    `id`= `identification`= PRIMARY KEY，这就是它的本意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:52:03.937

您在这里不需要`fulltext`索引；常规索引是 mySQL 将要用于该字段的内容。

全文索引旨在与全文搜索（即`MATCH .. AGAINST`查询）一起使用；`IN ()`它与简单的等号或查询无关。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T09:51:27.713

1) 仅选择您的答案列所必需的。2）设置正确的表索引。您也可以使用获取一些信息`EXPLAIN SELECT ...`

# python - python烧瓶登录：current_user保持匿名

> ID：16033792
> 
> 赞同：3
> 
> 时间：2013-04-16T09:47:41.177
> 
> 标签：python, flask, flask-login

我正在使用烧瓶登录并出现此问题。

登录功能运行如下：

```
@api.route('/login', methods=['POST'])
def login():
    if current_user.is_authenticated():
        return jsonify(flag='success')
    username = request.form.get('username')
    password = request.form.get('password')
    if username and password:
        user, authenticated = fsUser.authenticate(username, password)
        if user and authenticated:
            if login_user(user, remember='y'):
                print 'is authenticated: ',current_user.is_authenticated()
                return jsonify(flag='success')

    current_app.logger.debug('login(api) failed, username: %s.' % username)
    return jsonify(flag='fail', msg='Sorry, try again.') 
```

代码工作得很好。即使返回标志='成功'，它也能正常运行。我已经检查并看到它创建了会话。除了 current_user 仍然是匿名的之外，所有工作都很好。所以 current_user.is_authenticated() 仍然返回失败。

而且我不知道在哪里检查，有人可以帮助我吗？

PS 用户对象是由 SQLAlchemy 从 SQL 数据库中获取的。如果这可能是问题的根源，我也可以在稍作修改后提供 model.py。

编辑：我的用户回调定义：

```
@login_manager.user_loader
def load_user(id):
  user = cache.get(id)
  if not user:
    user = User.get_by_id(id)
    cache.set(id, user, 20*60)
  return user 
```

我打印出来检查，上面的用户返回是正确的，它只是 current_user 仍然是默认的匿名对象

用户类：

```
class User(db.Model, UserMixin):

    __tablename__ = 'my_users'

    id = Column('user_id', db.Integer, primary_key=True)
    level = Column('user_level', db.Integer, nullable=False)
    name = Column('user_name', db.String(255))
    email = Column('user_email', db.String(255), nullable=False, unique=True)

    # ===============================================================
    # Users

    # ================================================================
    # Password
    _password = Column('user_password', db.String, nullable=False)

    def _get_password(self):
        return self._password

    def _set_password(self, password):
        self._password = generate_password_hash(password)
    # Hide password encryption by exposing password field only.
    password = db.synonym('_password',
                          descriptor=property(_get_password,
                                              _set_password))

    def check_password(self, password):
        if self.password is None:
            return False
        return check_password_hash(self.password, password)

    def is_authenticated(self):
      return True

    def is_active(self):
      return True

    def is_anonymous(self):
      return False

    def get_id(self):
      return unicode(self.id)

    def find_user(self):
      return unicode('hahaha@gmail.com') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-15T06:31:14.317

我完全忘记了这一点。实际上是因为我们使用了多缓存服务器。因此，有时在此服务器中登录的用户不会缓存在其他服务器中。使用哨兵redis解决。

# java - 链表上的冒泡排序实现

> ID：16033800
> 
> 赞同：0
> 
> 时间：2013-04-16T09:48:06.203
> 
> 标签：java, linked-list, bubble-sort

我必须在链接列表而不是数组上实现 BubbleSort 算法。我是java新手，所以我真的不知道如何将它放入代码中。但我试了一下，这就是我得到的：

*单节点.java*

```
public class SinglyNode
{
public Object names;
public SinglyNode next;

public SinglyNode (Object name1)
{
    names = name1;
}

public SinglyNode (Object name2, SinglyNode next1)
{
    names = name2;
    next = next1;
}

Object getObject()
{
    return names;
}

SinglyNode getNext()
{
    return next;
}

void displayLink()
{
    System.out.print("{" + names + "}");
}
} 
```

*LinkList.java*我认为我的问题出在方法上。我不知道如何实现 BubbleSort，所以它会按升序对对象名称进行排序。

```
public class LinkList
{
SinglyNode first;

public boolean isEmpty()
{
    return (first == null);
}

void insertFirst(Object name1)
{
    SinglyNode newNode1 = new SinglyNode(name1);
    newNode1.next = first;
    first = newNode1;
}

SinglyNode delete(Object name2)
{
    SinglyNode temp = first;
    first = first.next;
    return temp;
}

void display()
{
    System.out.print("LIST: \n");
    SinglyNode current = first;
    while(current != null)
    {
        current.displayLink(); // print data
        current = current.next; // move to next link
    }
    System.out.println("\n");
}
//////////////////////////////////////////////////////    
void bubbleSort()
{ 
    Object n = first;
    Object temp = first;

    if (na.compareTo(first) < first.compareTo(na))
    {
        temp = na.compareTo(first);
    } else {
        temp = first.compareTo(na);
    }
    System.out.println(temp);

}

private void swap(Object one, Object two)
{ 
    Object temp = one.names;
    one.names = two.names;
    two.names = temp; 
}
} 
```

*单链表.java*

```
public class SinglyLinkList
{
public static void main (String args[])
{
    LinkList list = new LinkList();

    list.insertFirst("Squirtle");
    list.insertFirst("Bulbasaur");
    list.insertFirst("Charmander");
    list.insertFirst("Pichu");
    list.insertFirst("Ghastly");
    list.insertFirst("Mewtwo");
    list.insertFirst("Dialga");

    list.display();
    list.bubbleSort();
    list.display();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:08:14.740

在您的列表中，有一个大小字段将有助于存储列表中元素的数量。还要创建类`SinglyNode implement Comparable`，以便`compareTo`方法按照您的意愿运行。Single LinkedList 中两个元素的就地交换实际上是相当复杂的，而且性能真的很糟糕！

```
public void bubbleSort
{
  for (int i = 0; i < size; i++)
  {
    for (int j = i; j < size; j++)
    {
       if (elementAt(j).compareTo(elementAt(j+1)) > 0)
       {
          swap(j, j + 1);
       }
    }
  }
}

public SinglyNode elementAt(int index)
{
   SinglyNode temp = first;

   for (int i = 0, i < index; i++)
   {
      temp = temp.getNext();
   }

   return temp;
}

public void swap(int firstIndex, int secondIndex)
{
   SinglyNode secondNext = elementAt(secondIndex).getNext();       
   SinglyNode second = elementAt(secondIndex);
   SinglyNode first = elementAt(first);
   SinglyNode firstPrevious = elementAt(first - 1);

   firstPrevious.setNext(second);
   first.setNext(secondNext);
   second.setNext(first);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:57:13.183

由于是家庭作业/作业，我会给出提示而不是直接解决方案。冒泡排序可以抽象为这两个操作：对集合的迭代和交换元素。这些操作使用数组或链表实现不同，但算法是相同的。你有迭代`display`，现在你需要实现交换然后做（非常抽象的伪代码：

```
iterate {
 iterate {
  if el.Compare(elNext) > 0 {
    swap(el, el.Next);
  }
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:51:58.550

您需要在 SingleNode 中实现 Comparable 接口，并在实现中使用字符串比较方法。就像是：

```
public void compareTo(SinglyNode node){
    return this.names.toString.compareTo(node.getNames().toString());
} 
```

或者更好的是`this.names.compareTo(node.getNames());`

但是，我不只是使用 Object 类，而是对这些通配符对象使用 Comparable 接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:55:49.900

1）您需要实现 Comparable

2）你还需要在bubblesort中使用swap方法。目前您没有使用它，它只会比较两个对象而不在实际列表中交换它们。

使用Comparable的[教程](http://www.onjava.com/pub/a/onjava/2003/03/12/java_comp.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-21T00:54:56.810

示例链表冒泡排序不使用 elementAt() 函数模拟随机访问，而是通过节点之间的链接进行操作，因此时间复杂度为 O(n^2) 而不是更糟。“end”用于跟踪列表末尾的排序节点从哪里开始。我使用了问题中的示例代码，并没有费心将类更改为可比较的，而是使用 toString() 进行比较。我使用了一个虚拟节点来简化代码。

```
void bubbleSort()
{ 
    if(first == null)
        return;
    SinglyNode dmy = new SinglyNode("dummy");  // dummy node
    dmy.next = first;
    // end == null or first sorted node at end of list
    SinglyNode end = null;
    int swap;
    do{
        swap = 0;
        SinglyNode prv = dmy;           // previous node
        while(true){
            SinglyNode cur = prv.next;  // current node
            SinglyNode nxt = cur.next;  // next node
            if(nxt == end){             // if at end node
                end = cur;              //  update end = cur
                break;                  //  and break
            }
            // if out of order, swap nodes
            if(cur.names.toString().compareTo(nxt.names.toString()) > 0){
                cur.next = nxt.next;
                nxt.next = cur;
                prv.next = nxt;
                swap = 1;
            }
            prv = prv.next;             // advance to next node
        }
    }while(swap != 0);                  // repeat untl no swaps
    first = dmy.next;                   // update first
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-10-14T00:28:32.303

对于冒泡排序，两个循环都必须从 0 开始。该算法的某些版本在外循环所在的位置开始内循环。这样做会导致某些数据出现问题。

如果...您有一个数组，其中包含您想要排序的以下内容：

23,3,1,2,3,4,5

如果两个循环都从 0 开始，则排序后的数组将是：1、2、3、3、4、5、23

但如果内循环从 j=i 开始，排序后的数组将是 23、1、2、3、3、4、5。这是因为内循环从其后的第一个元素（将是 3）继续移动将 23 放在正确的位置，并且永远不知道将 3 放在哪里

# windows - 如何推出用 VB6 编写的 ActiveX 控件的新版本

> ID：16033802
> 
> 赞同：6
> 
> 时间：2013-04-16T09:48:08.110
> 
> 标签：windows, internet-explorer, vb6, activex

我必须维护一个用 VB6 编写的旧的活动 x 控件。

当我们为其开发了一些新功能时，我现在需要向用户推出这个新版本。如何以最不显眼的方式做到这一点？

控件是这样嵌入的

```
<OBJECT classid="clsid:..." CODEBASE="activex/plugin/myOCX.CAB#version=1,0,0,42">
    <PARAM name="RunOnLoad" value="true"></PARAM>
    [...]
</OBJECT> 
```

不，当我将 更改`#version`为实际的 ( `1,0,0,80`) 时，它不会改变任何内容。IE 仍然加载旧版本（我可以通过一个提醒 OCX 版本的功能来检查）。

只有当我从我的机器中删除 OCX 然后加载页面时，它才会打印出新版本。

显然，用户不能也不应该这样做。所以问题仍然存在：一旦将新版本部署到服务器，我如何才能有效地*强制我的用户使用新版本？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:13:26.903

当您从机器中删除现有版本后，IE 会成功下载并安装组件，这完全取决于版本控制。在这一点上，我可以想到几种情况。

### 场景 1：错误的 .INF 文件

打开您的 .CAB 文件。您将在里面看到 .INF 文件。打开此 .INF 文件并找到`[<component name>.ocx]`部分。检查值`FileVersion=...`，应该是`FileVersion=1,0,0,80`。我发现如果您通过打包和部署向导之前生成的 .BAT 脚本更新现有的 .CAB 文件，此值*不会自动更新。*

### 场景二：构建过程污染的测试环境

我能想到的另一种情况是，您正在用于构建新版本控件的同一台机器上进行测试。在这种情况下，您的控件可以由构建过程注册。在这里它有助于理解[COM 激活是如何工作的？](http://blogs.msdn.com/b/larryosterman/archive/2004/10/12/241420.aspx)不过，在构建服务器以外的机器上进行测试总是一个好主意。

**可能性 1**：构建过程在注册表项`AppID`下创建了命名值`HCKR\CLSID\{clsid}`

根据[KB167597](http://support.microsoft.com/kb/167597/en-us)：

> 在伪代码中，以下是为`<OBJECT>`标签控制组件下载的方式：

```
 Check the Registry for CLSID
   If CLSID of OBJECT is NOT found in the registry
      Download OBJECT
   Else If no #Version specified in CODEBASE tag
      Use OBJECT installed on system
   Else
      Check InprocServer32 key for location of installed component
      If File version of installed component < CODEBASE #Version Tag
         Download OBJECT 
```

> 上述序列有几个例外。如果在 CLSID 下找到 AppID 键，则该组件通常注册为通过 DCOM 运行并且不会更新。此外，Installed Version 密钥优先于文件版本。这用于 Java 类和非 PE（可移植可执行）文件。

`AppID`要确认这个想法，请检查您用于测试的机器上的组件是否存在注册表值。您的用户很可能不会在他们的机器上`AppID`设置。`CLSID`当然，除非您的组件至少在另一种不同的场景中使用。Larry Osterman 有一篇博客文章[您何时需要在 COM 注册中使用 APPID？](http://blogs.msdn.com/b/larryosterman/archive/2006/01/04/509436.aspx)如果您不确定是什么，还请查看[此 MSDN 博客文章](http://blogs.msdn.com/b/jigarme/archive/2007/10/09/what-is-appid.aspx)`AppID`。

如何确定是否`AppID`设置为 a `CLSID`？打开注册表编辑器`regedt32`，并检查`HKEY_CLASSES_ROOT\CLSID\{<clsid>}`键下的值。查找`AppId`类型的命名值`REG_SZ`。

**可能性 2**`HCKR\CLSID\{clsid}\InprocServer32` ：构建过程更改了注册表项的默认值

检查注册表项的默认值 ( `(Default)`) 。`HCKR\CLSID\{clsid}\InprocServer32`如果它指向您用作组件编译过程输出的位置，那么它很可能是在构建期间设置的（除非您将构建结果直接放在`C:\WINDOWS\Downloaded Program Files`我真的怀疑的地方）。操作系统使用此值来确定在 COM 组件激活时使用什么二进制文件。使用网页运行`regsvr32 /u <path to the .ocx created during compilation>`并重新运行测试。

* * *

如果没有任何帮助，您需要更仔细地调查该问题。启动[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，要求它跟踪 IE 进程的注册表和文件系统活动，并查看 IE 如何决定（不）更新您的控件。收集的跟踪中的有趣信息应该在您的控件的注册表查询之后立即开始`CLSID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:54:11.170

最好只是破坏兼容性。

打开`Project Properties`并从`Component`选项卡中更改`Version Compatibility`为`No Compatibility`. 编译，然后更改您的`clsid`以匹配新的。

# iphone - 保持 ios 应用程序登录的最佳方法是什么？

> ID：16033807
> 
> 赞同：1
> 
> 时间：2013-04-16T09:48:32.667
> 
> 标签：iphone, ios, objective-c, security, authentication

我正在开发一个需要与服务器通信的 ios 应用程序。当用户第一次启动应用程序时，系统会提示他输入用户名和密码。一旦他通过身份验证，我想让他保持登录状态，直到他明确退出。

在 Apple 文档中挖掘了几个小时后，我可以指出两种方法来实现这个想法： <1> 使用 http 基本/摘要身份验证。用户通过身份验证后，我将用户名和密码保存在钥匙串中。每当服务器需要认证时，通过实现**connection:didReceiveAuthenticationChallenge:**函数，app 可以加载用户名和密码，并构造合法**[的 NSURLCredential](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1)**。当然可以，但是每个请求都必须经过一次身份验证并经常传输用户机密。

<2> 使用http cookie 一旦用户通过身份验证，服务器响应cookie 中的唯一令牌。取决于特性**[URL 加载系统会自动发送任何适合 NSURLRequest 的存储 cookie](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html)**。我不确定用户杀死应用程序时cookie是否会丢失。

你觉得这两种方法都行吗？哪一个更好？有没有其他方法可以做同样的事情？

我注意到许多客户（twitter/facebook/...）保持用户登录，他们使用什么方法？谢谢;

顺便说一句，我已将用户名和密码保存在钥匙串中，但要保持登录状态，我认为还有更多工作要做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:45:03.157

试试这个并将您的身份验证用户名密码保存在 NSUserDefaults 中。它在全球范围内提供应用。

为了保存你的数据试试这个

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:isValid forKey:@"Username"];
[defaults setObject:accessLevel forKey:@"Password"]; 
```

为了获取数据，试试这个

```
NSUserDefaults *defaultsCheck = [NSUserDefaults standardUserDefaults];
NSString  * userIDCheck = [defaultsCheck objectForKey:@"Username"];
NSString *accessLevelCheck = [defaultsCheck objectForKey:@"Password"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:53:57.897

我不关心cookie存储。但是当您添加用户名和密码时`keychain`，您必须`clean up`在应用程序获取时使用钥匙串`uninstalled`。否则`keychain`，即使您的应用程序被卸载，它也可能会保留。因为`keychain`有密钥对存储，但没有基于应用程序的存储。您可以`NSUserDefault`用来存储登录详细信息。我认为这是一个更好的方法来做到这一点..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:59:10.317

试试这个钥匙串：

[钥匙串示例代码](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797)

你也可以使用 NSUserDefault

# unix - 合并多个文本文件中的列

> ID：16033812
> 
> 赞同：0
> 
> 时间：2013-04-16T09:48:48.620
> 
> 标签：unix, merge, edit, text-processing

我有几个这种格式的文本文件

文件1：

```
ID1 field1 field2
ID2 field1 field2
ID3 field1 field2
ID4 
ID5 field1 field2
ID6 field1 field2 
```

文件2：

```
 ID1 field3 field4
    ID2 field3 field4
    ID3 
    ID4 field3 field4
    ID5 field3 field4
    ID6 field3 field4 
```

如您所见，某些行中可能缺少字段。我想要做的是通过unix语言下的ID列将所有文本文件合并在一起。

我的输出应该是这样的：输出文件：

```
ID1 field1 field2 field3 field4 field5 ... etc
ID2 field1 field2 field3 field4 field5 ... etc
ID3 field1 field2 inserted string field5 ... etc
ID4 inserted string field3 field4 field5 ... etc
ID5 field1 field2 field3 field4 field5 ... etc
ID6 field1 field2 field3 field4 field5 ... etc 
```

我尝试了不同的命令，但我通常以不同的行数结束。我很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:51:08.047

```
join file1 file12 -t $'inserted ' 
```

# python - Gentoo Dropbox CLI

> ID：16033821
> 
> 赞同：1
> 
> 时间：2013-04-16T09:49:05.840
> 
> 标签：python, linux, unicode, dropbox, gentoo

尝试使用 python 脚本通过命令行管理我的保管箱，当我尝试运行它时，我得到以下信息

```
-> ~/bin/dropbox.py help     
  File "/home/jcostanzo/bin/dropbox.py", line 50
    INFO = u"Dropbox is the easiest way to share and store your files online. Want to learn more? Head to"
                                                                                                         ^
SyntaxError: invalid syntax 
```

这是我的python版本

```
-> python --version
Python 3.2.3 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:25:34.660

看起来这个脚本在你的 Python 版本中不起作用。

u'unicode' 语法适用于 Python 2.x，同样适用于 Python 3.3。

另请参阅[在 python 3 和 2 中工作的 Unicode 文字](https://stackoverflow.com/q/6625782/2153784) 和[Python 3.3 中的新增功能](http://docs.python.org/3/whatsnew/3.3.html)。

# meteor - Meteor.js - 暂时阻止模板重新渲染（禁用反应性）

> ID：16033828
> 
> 赞同：3
> 
> 时间：2013-04-16T09:49:15.667
> 
> 标签：meteor

我的应用程序中有一个页面，其中包含用户正在处理的项目列表。

当他们想要添加一个新项目时，我会显示一个模式表单来获取项目的名称。

如果他们单击“确定”，我将创建项目并使用 Meteor.Router 重定向到 /project/[new project id]。

但是，就在重定向之前，我会在用户的项目列表中自动看到新项目名称。

我想避免这种不必要的重新渲染，这会导致更新内容的短暂闪烁。

有没有办法防止我的项目列表的模板重新呈现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:12:36.583

您可以将包含此内容的 html 放入一个`{{#constant}}`块中。[关于常量的文档](http://docs.meteor.com/#constant)

例如

```
{{#constant}}
    {{#each ...}}
    ....
    {{/each}}
{{/constant}} 
```

另一种选择是禁用模板助手中的反应性，例如，如果你有

```
Template.home.mydata = function() { return MyCollection.find() } 
```

将此更改为`reactive:false`用作选项

```
Template.home.mydata = function() { return MyCollection.find({}, {reactive:false}) } 
```

这样会显示初始更改，但不会使用任何更新，因此不会重新渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T21:46:49.397

我发现在调用方法后在事件处理程序中使用取消会取消反应链。

```
Template.questionTeaser.events({
  "click .vote_add": function(event, template){
    Meteor.call('vote_add', this._id, this.session)

    // This cancels the chain of reactivity.
    return false
  },
}) 
```

我将它用于以下用例：

用户会看到按投票排序的问题列表 用户可以投票 投票后，列表会重新呈现/排序，但在页面右侧有倒计时，因此用户知道他不能点击一秒钟。

# node.js - 如何调试 Node + Socket.io CPU 问题

> ID：16033834
> 
> 赞同：12
> 
> 时间：2013-04-16T09:49:33.293
> 
> 标签：node.js, debugging, memory-leaks, websocket, cpu-usage

我们正在使用 Express 3 运行 Node Socket.io 服务器。该服务器使用[Forever](https://github.com/nodejitsu/forever)进行监控。服务运行良好，但 CPU 整天都在增长，直到达到 90%+，然后突然回落到 ~20%，如下图所示。我相信下降是由永远重启应用程序引起的。

![CPU 行为](https://i.stack.imgur.com/jZhAt.png)

我想知道的是；

*   可能导致 Node.js 应用程序出现这种行为的典型因素是什么？
*   有哪些工具/方法可用于调试节点应用程序中的内存泄漏/CPU 占用？

我认为这可能与 Socket.io 在用户断开连接后不清理资源有关，尽管文档说 Socket.io 会自动管理这个。

任何帮助将不胜感激，这个问题使管理我们的服务器变得非常困难。我一周前在Serverfault上发布了这个问题，但没有收到回复，所以我认为这里可能会更好。

**更新：**经过更多研究，CPU 似乎与连接数没有直接关系。我们的临界质量似乎约为 1500 个并发连接，如下所示：

*   xhr 轮询：767
*   网络套接字：692
*   jsonppolling：80

有时我们可以在只有 500 个连接的情况下达到 100% 的 CPU，而其他时候只有 1500 个连接。我知道发送消息的速度有很大的影响，但是速度是相当一致的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T07:34:06.463

我没有那么有经验，但您的 CPU 延迟的主要原因可能是：

1.  **代码执行时间**：如果您有多个循环，请考虑为它们提供更少的数据来提取/提取。
2.  ****并发连接**：我也遇到了这个问题，一个人可以打开 3-4 个浏览器选项卡/窗口，因此请尝试为每个用户 NB 建立 1 个并发连接。你可以使用会话**

 **如果我有什么想法，我会尝试编辑这个答案，你可以看到下面的链接，了解 Nodejs 上的服务器压力测试。

[链接在这里](http://weblog.bocoup.com/node-stress-test-analysis/)

希望它可以帮助你。**

# android - actionbarsherlock 4.3 和滑动菜单集成

> ID：16033855
> 
> 赞同：0
> 
> 时间：2013-04-16T09:50:32.283
> 
> 标签：android, actionbarsherlock, slidingmenu

使用[滑动菜单](https://github.com/jfeinstein10/SlidingMenu)和新的[actionbarsherlock](http://actionbarsherlock.com/download.html)我在`jar mixmatch: Fix dependencies`处理示例项目时遇到问题`sliding menu`。有谁知道发生了什么？？

我也确实看到了这个[教程](http://www.youtube.com/watch?v=rs9mSnWDlZo)，但我仍然遇到一个非常奇怪的错误。请帮忙。如果除了这个库之外还有另一种简单的方法来实现*facebook* ，请发布`sliding menu`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:58:43.740

请使用此[链接](https://github.com/akotoe/android-slide-out-menu.git)

快照：

![在此处输入图像描述](https://i.stack.imgur.com/JMSJK.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:59:31.213

Actionbarsherlock 里面有支持库。如果支持库也在您的主项目中，这可能会导致冲突。

从项目的 libs 目录中删除 android-support-v4.jar 以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:57:59.560

我猜这两个库都包含 android-support-v4.jar （也可能是您自己的项目），它应该只在构建路径中出现一次。将 jar 放入您自己的项目中，将其从 lib-project 的构建路径中删除并编辑它们的构建路径以在您自己的项目中使用该 jar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:41:11.000

只要主项目的构建路径中只有一个支持库，SlidingMenu 和 ActionbarSherlock 都可以在自己的构建路径中拥有自己的支持库。

检查项目的构建路径/库/Android 依赖项，那里应该只有一个 android-support-v4.jar 文件（从哪个项目支持库导入并不重要）。如果有重复的支持库，请从构建路径中删除多余的支持库，然后尝试一下。

# ruby-on-rails - Rails：使用新记录存储 GPS 坐标

> ID：16033857
> 
> 赞同：2
> 
> 时间：2013-04-16T09:50:41.540
> 
> 标签：ruby-on-rails, gps

我正在尝试在我的 rails 应用程序中获取浏览器 GPS 坐标（在带有 GPS 的移动设备上），并在创建新记录时保存它们。有可能吗？怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:15:35.340

您可以使用 html5 地理定位，看看这个例子[http://html5demos.com/geo](http://html5demos.com/geo)。

或者你可以获取请求ip，并通过一些服务进行地理定位，但是这种方法不是很准确。

看看这个名为`geocoder` [http://www.rubygeocoder.com/的伟大宝石](http://www.rubygeocoder.com/)

# ios - 地图可能不会缩小这么远

> ID：16033859
> 
> 赞同：0
> 
> 时间：2013-04-16T09:50:45.670
> 
> 标签：ios, objective-c, mkmapview, zooming, mapkit

简单的问题：

是否可以进行最大缩放级别？例如

```
region.span.latitudeDelta = 0.02;
region.span.longitudeDelta = 0.02; 
```

我不想做静态的。考虑最大可能的缩放级别。
我应该在哪里定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:54:56.033

是的，是的，只需实现委托方法`mapView:regionDidChangeAnimated:`，我就是这样做的：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    if (mapView.region.span.longitudeDelta < YOUR_VALUE) {
        MKCoordinateRegion initialRegion;
        initialRegion.center = mapView.region.center;
        initialRegion.span.latitudeDelta = YOUR_VALUE;
        initialRegion.span.longitudeDelta = YOUR_VALUE;
        MKCoordinateRegion adjustedRegion = [mapView regionThatFits:initialRegion];

        [mapView setRegion:adjustedRegion animated:animated];
        [mapView regionThatFits:adjustedRegion];
    }
} 
```

# php - 阅读 PDF 时弄乱了特殊字符

> ID：16033861
> 
> 赞同：1
> 
> 时间：2013-04-16T09:50:52.690
> 
> 标签：php, pdf, web-deployment, tcpdf

我正在使用一个小的 PHP 类（pdf2text）来打开和阅读“文本”PDF。

目前我无法让它正确处理 è、ä、ö、ü 等特殊字符。我尝试将标头设置为 UTF-8 并将接收数据编码为 UTF-8，但它们仍然无法正确显示。

该课程可以在这里找到：http: [//pastebin.com/PSmu03nH](http://pastebin.com/PSmu03nH)

如果有人有任何进一步的想法甚至解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:15:32.227

*简而言之：*

您使用的**PDF2Text**类忽略了 PDF 规范[ISO-32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的很大一部分。它仅适用于非常特殊的情况。

如您的问题中所述，要稍微改善解码特殊字符（变音符号、重音字符等）的结果，您可能需要根据[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的Annex D *Character Sets and Encodings*添加翻译。

*详细地：*

**decodePDF 遍历**PDF 中的对象并选择流对象。在这里，它完全忽略了这些对象是否仍在使用中（即在文档中经常看到来自所有修订的修订流）。

从这些流中，它使用*Length1*、*Type*或*SubType*键删除所有内容。（好的）意图是删除包含页面内容以外的其他内容的流。不幸的结果是对象流也被删除了。对象流是自 PDF 1.5 以来 PDF 规范的一部分，并捆绑了多个其他任何类型的对象，包括流；它们提供比常规顶级对象更好的压缩属性。因此，使用此功能的文档内容在这里丢失。

在剩余的流中，它检查它们是否包含文本对象。如果它们包含文本对象**BT** ... **ET**，则这些对象的内部内容由*getDirtyTexts*处理。如果没有，则由*getCharTransformations*处理。

**getDirtyTexts**收集文本运算符**TJ**和**Tj**的字符串参数；一方面，这意味着它忽略了文本运算符**'**和**"**的参数，此外还忽略了有关这些字符串如何相互定位的任何信息。广泛使用字距调整信息的文档内容和使用此类操作的文档的内容而不是字符串中的空格来分隔单词, 因此以后可能完全不可读. 此外, 选择字体的操作在这里被丢弃 --- 但由于流根本没有连接到它们各自的资源对象, 字体信息无法匹配无论如何...

**getCharTransformations**假定流是**ToUnicode**映射流，并将所有这些流的所有映射添加到*单个*映射中。作为多个*ToUnicode*流，如果存在，很可能属于不同的字体并且可能具有完全不同的映射，将它们全部放在一个映射中会丢失大量映射信息，除非所讨论的字体被安排为具有不重叠的字符标识符范围。 ..他们为什么要这样做！

现在**decodePDF**调用**getTextUsingTransformations**来处理这两个方法的结果。它遍历*getDirtyTexts*提取的字符串。*如果它们是十六进制编码的，它们将被解码，然后使用getCharTransformations*提取的映射进行翻译。如果它们不是十六进制编码的，它们将按原样复制而无需任何进一步的翻译。

因此，十六进制编码字符串的内容是根据一些 ToUnicode 映射解释的，该映射可能是也可能不是与它们一起使用的相应字体相关联的编码，并且非十六进制编码字符串的内容按原样使用，完全忽略它们各自字体的编码。

因此，从本质上讲，该类唯一可以成功使用的 PDF 必须对与非十六进制编码字符串一起使用的字体使用标准编码（直到字符代码 127 的标准编码是 ASCII-ish）和具有相同编码的编码与十六进制编码字符串一起使用的字体的字符代码范围重叠的映射。

要稍微改进从非十六进制编码字符串中解码特殊字符的结果，您可能需要根据[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的Annex D *Character Sets and Encodings*添加翻译。

# perl - Perl：Net::SNMP 不向 gmail 发送电子邮件，但正常的 'mail -s' 是

> ID：16033866
> 
> 赞同：1
> 
> 时间：2013-04-16T09:51:05.807
> 
> 标签：perl, email, smtp, gmail

我编写了一个 Perl 脚本（在机器 A 上），它将邮件发送到另一台服务器（机器 B），然后将其退回（使用 procmail 或其他转发机制，取决于机器 B），然后机器 A 上的脚本测量往返时间。

这在很长一段时间内都可以正常工作，但由于某种原因，当机器 B 为 GMAIL 时，它已停止工作。

这是我调试它的方法：

1.  我尝试使用命令行中的“mail -s”发送类似的消息，并且邮件传递没有任何问题 - 所以邮件中继不是问题。

    ```
    mailbounce@machineA.com:~$mail -s 'Round Trip Test 1366102726' mailbouncexxxxx@gmail.com
    A simple test message From The Mail Round Trip Monitor...
    .
    cc:
    mailbounce@machineA.com:~$ 
    ```

2.  接下来，我将“to：”地址更改为我拥有的另一台机器，以查看脚本是否有效。它对另一台服务器（不是gmail）没有问题

3.  接下来，我将脚本恢复为原始参数。我在端口 25 上启动了一个 tcpdump 并运行了脚本，然后也使用命令行发送了邮件。在 Wireshark 中分析数据包捕获并执行“Follow TCP Stream”时，输出如下：

**使用脚本（未交付）：**

```
 220 mail.out.com ESMTP Exim 4.74 Tue, 16 Apr 2013 10:58:36 +0200
    EHLO machineA.domain.com
    250-mail.out.com Hello machineA.domain.com [10.184.55.248]
    250-SIZE 13631488
    250-PIPELINING
    250 HELP
    MAIL FROM:<mailbounce@ machineA.domain.com>
    250 OK
    RCPT TO:<mailbouncexxxxx@gmail.com>
    250 Accepted
    DATA
    354 Enter message, ending with "." on a line by itself
    To: mailbouncexxxxx@gmail.com
    Subject: Round Trip Test 1366102726

    A simple test message From The Mail Round Trip Monitor...
    .
    250 OK id=1US1im-000Lr0-Qd
    QUIT
    221 mail.out.com closing connection 
```

**使用命令行（交付成功）：**

```
 220 mail.out.com ESMTP Exim 4.74 Tue, 16 Apr 2013 10:59:02 +0200
    EHLO machineA.domain.com
    250-mail.out.com Hello machineA.domain.com [10.184.55.248]
    250-SIZE 13631488
    250-PIPELINING
    250 HELP
    MAIL From:<mailbounce@machineA.domain.com> SIZE=635
    250 OK
    RCPT To:<mailbouncexxxxx@gmail.com>
    DATA
    250 Accepted
    354 Enter message, ending with "." on a line by itself
    Received: from machineA.domain.com (localhost.localdomain [127.0.0.1])
    .by machineA.domain.com (8.13.8/8.13.8) with ESMTP id r3G8x0jq015631
    .for <mailbouncexxxxx@gmail.com>; Tue, 16 Apr 2013 10:59:00 +0200
    Received: (from mailbounce@localhost)
    .by machineA.domain.com (8.13.8/8.13.8/Submit) id r3G8wxGJ015622
    .for mailbouncexxxxx@gmail.com; Tue, 16 Apr 2013 10:58:59 +0200
    Date: Tue, 16 Apr 2013 10:58:59 +0200
    From: mailbounce User <mailbounce@machineA.domain.com>
    Message-Id: <201304160858.r3G8wxGJ015622@machineA.domain.com>
    To: mailbouncexxxxx@gmail.com
    Subject: test2

    test
    .
    250 OK id=1US1jC-000LvF-OQ
    QUIT
    221 mail.out.com closing connection 
```

根据我在上面看到的，这应该可以顺利工作吗？我也检查了 gmail 帐户中的“垃圾邮件”文件夹，但没有运气

为什么使用 Net::SMTP 而不是使用命令行...通过相同的 SMTP 中继时我的邮件无法投递？我已经没有地方可以看了。

笔记：

1.  在创建这个问题之前，我查看了[如何调试我的 Net::SMTP Perl 程序？](https://stackoverflow.com/questions/1657478/how-can-i-debug-my-netsmtp-perl-program). 我没有在互联网上找到任何其他相关信息。

2.  上面的主机名、电子邮件帐户和 IP 地址是虚构的 - 这就是从输入/输出中修改的所有内容

# javascript - 如何通过 id 删除标记？

> ID：16033869
> 
> 赞同：0
> 
> 时间：2013-04-16T09:51:11.600
> 
> 标签：javascript, google-maps, google-maps-markers

如果在该位置放置了五个标记（不同的 id），并且尝试通过 id 删除单个标记..

第一个用户在文本字段中输入 id，当按下删除链接时，在文本字段中插入适合 id 的标记删除...这是我的添加标记代码...

```
function initialize() {
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
   makeRequest('get_locations.php', function(data) { //makeRequest is function to load data coordinat from db..... success!!

        var data = JSON.parse(data.responseText);

     for (var i=0;i<data.lenght;i++){

       var myLatlng = new google.maps.LatLng(data[i]['latitude'], data[i]['longitude']);
       var marker = new google.maps.Marker({
            id:i,
            position: myLatlng,
            title:"Dari db :" + data[i]['tempat']
        });

        marker.setMap(map);

     }

    });
} 
```

我怎么能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:28:59.330

您最好将标记分配给数组，然后将它们作为一个组添加。

这样，您可以简单地遍历所述数组并按 Id 删除标记，然后再将标记添加回地图。

希望这可以帮助。

# statistics - 随机抽样以提高压力估计的准确性？

> ID：16033871
> 
> 赞同：1
> 
> 时间：2013-04-16T09:51:16.823
> 
> 标签：statistics, simulation, interpolation, random-sample, approximation

在我们的模拟中，我们有一个基本的 2D 网格，闭合曲线（红线）可以在该网格上移动。网格单元根据其中心的位置被着色为曲线内部（绿色）或曲线外部（蓝色），并且每个状态变量（例如压力）可以具有不同的值。对于域中的任何给定点，我们可以准确地知道它是在内部还是外部，并且插值可以给出该点的特定状态（即，此信息比仅使用以单元为中心的笛卡尔网格更具体）。

![网格的卡通](https://i.stack.imgur.com/3Q3bJ.png)

我们正在尝试对曲线内的“峰值”压力进行稳健的测量（例如，峰值可能是前 1% 值的平均值）。

目前，我们只取单元格中心值的最大值，但正如您在图像中看到的那样，每次曲线移动时，这都会给我们带来非常大的差异。我正在尝试评估不同的选项，但我不确定它们的有效性，特别是如果有我们可以使用的统计技术。

我们考虑过的选项：

1.  `N*N*num_of_2D_cells`在整个网格上随机抽取点样本
2.  对于每个 2D 单元，随机抽取`N*N`点样本
3.  将每个 2d 单元格细分为`N*N`更小的单元格并计算它们以单元格为中心的值

然而，随着`N`规模的扩大，这些方法应该会收敛，但是我们的 2D 网格可以有超过 1e7 个单元；因此，计算时间对大小设置了上限`N`。

有没有人有经验——或者知道一组处理——这类问题的文献？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:12:03.107

问题陈述（从样本中了解前 1% 的基本人口的平均值）**听起来与[预测区间](http://en.wikipedia.org/wiki/Prediction_interval#Non-parametric_methods)**有关。我想这方面的任何具体问题最好在[http://stats.stackexchange.com](http://stats.stackexchange.com)提出。

您是否知道**压力值的分布**，或者可能是某些边界，例如距离点之间的压力差`x`总是低于`y`，或类似的东西？这可以大大简化抽样方法。

就您提出的选项而言，您可以**调整选项 #3 并使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)来近似曲线的形状**（使用 2d 单元格）。然后，您可以**从（大约）曲线内的那些单元格中随机抽样，其频率与它们的面积成正比**。这样做可以避免在不位于曲线内的区域中取样（这将是浪费精力），并且还可以避免进一步细分（几乎）完全包含在曲线中的单元格。最后，它应该为您提供来自（大约）曲线内的无偏随机样本，然后您可以在该样本上计算统计数据。

# c# - 如何识别 Jpeg 图像是双色调的

> ID：16033876
> 
> 赞同：0
> 
> 时间：2013-04-16T09:51:27.423
> 
> 标签：c#, image

我是在 c# 中使用图像的新手。

我这样做了：

```
private bool IsBitonal(string FilePath)
{
    Bitmap bitmap = new Bitmap(FilePath);
    return (bitmap.PixelFormat == PixelFormat.Format1bppIndexed)   
} 
```

这适用于 .png 文件，但不适用于 .jpeg 文件，有人可以帮我吗？

是否有任何解决方案来查找图像是否是双色的？

我使用了 Loding 图形的东西，它也不适用于我。

```
 private bool IsBitonal(string filePath)
 {
        bool isBitonal = false;
        try
        {
            Bitmap bitmap = new Bitmap(filePath);
            Graphics graphics = Graphics.FromImage(bitmap);
        }
        catch (Exception ex)
        {
            isBitonal = true;
        }
        return isBitonal;
  } 
```

是的，我从 [Tomaz](https://stackoverflow.com/users/1821029/tomasz) Answer那里得到了解决方案

这是我在 C# 中的答案：

```
public bool IsBitonal(Bitmap YourCurrentBitmap)
    {
        Color c;
        long Eadges = 0;
        long Others = 0;
        for (int i = 0; i < YourCurrentBitmap.Width; i++)
        {
            for (int j = 0; j < YourCurrentBitmap.Height; j++)
            {
                c = YourCurrentBitmap.GetPixel(i, j);
                if (!(c.R == c.G && c.G == c.B)) return false;

                if (c.R <= 16||c.R >= 255-16)
                    Eadges++;
                else
                    Others++;
            }
        }
         double proportion = Eadges / (double)Others;
        // here is estimation based on you requirement you can change
         return proportion > 10;;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:12:27.790

根据定义，JPEG 图像以颜色定义。由于压缩伪影，即使以 JPEG 格式保存并重新读取的双色调图像也永远不会是双色调的。

您所能做的就是进行一些估计，例如创建一个直方图并手动检查（有一些错误）值是否沿着它的边缘分布。

编辑：

这应该是一种计算直方图的快速方法。如果您更喜欢（慢得多）但更简单的方法，则可以对图片中的每个像素使用 getPixel() 。

基于： [http ://aforge.googlecode.com/svn/tags/AForge-1.5.0/Sources/Imaging/ImageStatisticsHSL.cs](http://aforge.googlecode.com/svn/tags/AForge-1.5.0/Sources/Imaging/ImageStatisticsHSL.cs)

```
 private int[] getHistogram( BitmapData imageData )
    {
        int width = imageData.Width;
        int height = imageData.Height;
        int offset = imageData.Stride - width * 3;

        int[] l = new int[256];

        unsafe
        {
            byte * p = (byte *) imageData.Scan0.ToPointer( );

            // for each line
            for ( int y = 0; y < height; y++ )
            {
                // for each pixel
                for ( int x = 0; x < width; x++, p += 3 )
                {
                    int bright = p[RGB.R] + p[RGB.G] + p[RGB.B];
                    bright /= 3;

                    l[bright]++;
                }
                p += offset;
            }
        }

        return l; 
    } 
```

我目前无法对其进行测试，但您应该很容易理解这个想法。您始终可以使用 AForge.NJET 之类的库来生成直方图。

获得直方图后，您应该检查所有值是否都位于两个点附近。

```
int[] hist = getHistogram(imageData); 
```

`hist[n]`是亮度为“n”的像素数（范围从 0 到 255）

对于理想图像，所有像素都是白色或黑色，因此 hist[0] 和 hist[255] 将被设置，所有其他值将为零。相反，所有值将分布在 0 和 255 附近。例如，您可以计算黑白像素与其他像素的比例。

```
int eadges = 0; // black, white or very close to black/white
int others = 0;

for(int i =0; i<hist.length; i++)
{
   if(i < 16 || i > 255-16) eadges += hist[i];
   else others += hist[i];     
}

double proportion = eadges/(double)others;
return proportion > 10; 
```

16 和 10 只是示例 - 您可以选择其他数字以获得不同的检测精度。

如果您愿意，您应该能够轻松找到有关直方图和其他计算方法的更多信息。首先查看直方图的 Google Image 结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:03:17.180

与 PNG 图像相反，JPEG 图像不能是双色调的，因为它编码颜色信息的方式。你可以在这里阅读更多信息：[http ://en.wikipedia.org/wiki/JPEG](http://en.wikipedia.org/wiki/JPEG)

我想您可以计算图片中不同颜色的数量来确定它是否是双色调的，但是 JPEG 伪影（即边缘周围的颜色溢出）会给出不正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:07:05.620

最简单的方法：尝试将您的图像转换为 PNG，然后运行您的代码。

编辑：加载为图形应该可以解决问题，不是吗？

# jakarta-ee - Primefaces 组件在 websphere 8.5 中不起作用

> ID：16033878
> 
> 赞同：3
> 
> 时间：2013-04-16T09:51:32.663
> 
> 标签：jakarta-ee, jsf-2, primefaces, websphere, ibm-rad

我正在使用**IBM RAD 8.5.1**创建一个 JSF 2 项目并在**websphere 8.5上运行它**

我使用了**文件 > 新建 > Web 项目向导** ，并添加了 JSF 和 Primefaces，如下所示：

**Java 构建路径 > 添加外部 Jar**

*   **jsf-api-2.1.7.jar (com.sun.faces)**
*   **jsf-impl-2.1.7.jar (com.sun.faces)**
*   **primefaces-3.3.1.jar**

**项目方面**是：

*   **动态网页模块 3**
*   **Java 1.6**
*   **JavaScript 1**
*   **JavaServer Faces 2**
*   **JSTL 1.1**
*   **WebSphere Web（共存）8.5**
*   **WebSphere Web（扩展）8.5**

**xhtml**页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:p="http://primefaces.org/ui" 
    xmlns:pretty="http://ocpsoft.com/prettyfaces" 
    xmlns:sec="http://www.springframework.org/security/tags"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">    
<h:head>
    <title> Welcome </title>
</h:head>

 <h:body>

   <p:layout fullPage="true">

    <p:layoutUnit position="north" size="100" header="Top" resizable="true" closable="true" collapsible="true">
        <h:outputText value="North unit content." />
    </p:layoutUnit>

    <p:layoutUnit position="south" size="100" header="Bottom" resizable="true" closable="true" collapsible="true">
        <h:outputText value="South unit content." />
    </p:layoutUnit>

    <p:layoutUnit position="west" size="200" header="Left" resizable="true" closable="true" collapsible="true">
        <h:outputText value="West unit content." />
    </p:layoutUnit>

    <p:layoutUnit position="east" size="200" header="Right" resizable="true" closable="true" collapsible="true" effect="drop">
        <h:outputText value="Right unit content." />
    </p:layoutUnit>

    <p:layoutUnit position="center">
        <h:form>
            This fullPage layout consists of five different layoutUnits which are resizable and closable by default.

        </h:form>
    </p:layoutUnit>

 </p:layout>

 </h:body>        

</html> 
```

*   **网页.xml**：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

        <display-name>vip</display-name>
        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
            <enabled>true</enabled>
            <async-supported>false</async-supported>
        </servlet>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>
            /faces/*</url-pattern>
        </servlet-mapping>

        <welcome-file-list>
         <welcome-file>
         pages/hello.xhtml
         </welcome-file>
        </welcome-file-list>

    </web-app> 
    ```

在 IE 9 上运行项目时，primefaces 组件未呈现，我只获取中心**layoutUnit的文本**

请告知如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:15:59.833

请确保您的 Primefaces jar 应位于构建路径中的 Web 应用程序库中。最简单的方法就是将 primeface jar 文件复制并粘贴到 Web 项目中的 /WebContent/WEB-INF/lib 中。实施后请检查您的编辑器/IDE，同时键入 p: 如果您看到 p:{all tags} 则它是正确实施的

# mysql - TYPO3 和 MySQL 数据库在不同的服务器上

> ID：16033893
> 
> 赞同：3
> 
> 时间：2013-04-16T09:52:08.320
> 
> 标签：mysql, typo3, ssh-tunnel

TYPO3 (6.0) 和 MySQL 是否可以在单独的服务器上运行，TYPO3 通过 SSH 隧道连接到数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:30:34.867

这应该是可能的。但是，这取决于您的网络托管服务商如何管理来自远程服务器的访问。对于 TYPO3 4.x，它是这样的`localconf.php`：

```
$typo_db_username = 'mysql_user';
$typo_db_password = 'mysql_password';
$typo_db_host = '127.0.0.1:12345';
$typo_db = 'mysql_dbname'; 
```

对于 TYPO3 > 6.x，它位于`LocalConfiguration.php`：

```
return array(
  [...]
  'DB' => array(
  'database' => 'mysql_dbname',
  'host' => '127.0.0.1:12345',
  'password' => 'mysql_password',
  'username' => 'mysql_user',
  ),
  [...]
); 
```

`12345`您用于设置隧道的本地端口在哪里：

```
ssh -L 12345:127.0.0.1:3306 ssh_user@remoteserver.com 
```

在大多数服务器上，您可以`localhost`使用`127.0.0.1`.
恕我直言，安全瓶颈是远程 MySQL 服务器如何处理传入连接。我想您也可以通过安装工具进行设置。

**编辑**：根据评论的提示更改了主机。

# perl - DBIx::Class 和 PostgreSQL 的重复索引名称

> ID：16033897
> 
> 赞同：0
> 
> 时间：2013-04-16T09:52:18.063
> 
> 标签：perl, postgresql, dbix-class

我有一个现有的 MySQL 数据库，我正在尝试使用以下步骤迁移到 PostgreSQL。数据库相当简单——它有一些外键和其他约束，但没有触发器、过程等。

1.  用于从现有 MySQL 数据库`DBIx::Class::Schema::Loader`生成一组类。`Result`
2.  使用这些`Result`类为 PostgreSQL 生成一组`CREATE TABLE`语句。
3.  运行用于设置表的`CREATE TABLE`语句`psql`（我还没有导入数据）。

我使用的脚本如下（删除了凭据和数据库名称）：

```
#!/usr/bin/perl

use Modern::Perl;
use DBIx::Class::Schema::Loader qw/ make_schema_at /;

my $dsn = 'dbi:mysql:dbname=database';
my $user = '';
my $pass = '';

make_schema_at(
  'MyDB::Schema',
  { debug => 1, dump_directory => './lib' },
  [ $dsn, $user, $pass
  ],
);

my $schema = MyDB::Schema->connect($dsn, $user, $pass);
$schema->create_ddl_dir(['PostgreSQL'], '0.1', './', undef, { add_drop_table => 0 }); 
```

脚本成功运行，`Result`类和`.sql`文件（包含所有`CREATE TABLE`语句）看起来都符合我的预期。

但是，有几个表有一个`slug`列被标记为`UNIQUE`原始 MySQL 模式，并导致以下行作为`CREATE TABLE`语句的一部分：

```
"slug" character varying(50) NOT NULL,
CONSTRAINT "slug" UNIQUE ("slug") 
```

当我尝试导入数据（使用`psql < tables.sql`）时，我在每个表上都收到以下错误，在第一个表`slug`之后有一个唯一列：

```
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "slug" for table "mytable"
ERROR:  relation "slug" already exists 
```

我的理解是索引名称在给定数据库中必须是唯一的。MySQL 没有这个问题，因为我只是在`slug VARCHAR(50) NOT NULL UNIQUE`没有指定索引名称的情况下声明。

有没有办法让`DBIx::Class`（或函数使用`SQL::Translator`的`create_ddl_dir`）在它输出的数据中生成一个唯一的索引名称？我并不特别关心索引的名称——尽管基于表名的东西是明智的。我查看了文档，但看不到任何允许这样做的参数。

我可以在导入文件之前手动编辑每个约束`.sql`，但是有超过 250 个表和很多冲突——而且每次我调整迁移过程并且必须重新生成类和 SQL 时，我都必须这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:36:53.790

最后，解决此问题的唯一自动化方法是使用 Perl 脚本，该脚本通过解析每个名称的输出`SQL::Translator`并附`_$i`加到每个名称，强制每个约束名称（以及自动索引）是唯一的，`$i`每次新约束时递增见过。

代码如下 - 假设您将通过管道传输模式`STDIN`：

```
#!/usr/bin/perl

use Modern::Perl;

my $i = 1;

while (my $line = <>)
{
  if ($line =~ m/CONSTRAINT\s+"([a-zA-Z_]+)"\s+UNIQUE\s+\("([a-zA-Z_]+)"\)/)
  {    
    my $constraint_name = $1 . '_' . $i;
    my $column_name = $2;

    my $replace_str = 'CONSTRAINT "' . $constraint_name . '" UNIQUE ("' . $column_name . '")';

    $line =~ s/CONSTRAINT\s+"([a-zA-Z_]+)"\s+UNIQUE\s+\("([a-zA-Z_]+)"\)/$replace_str/;
    $i++;
  }

  print $line;
} 
```

# android - 安卓模拟器的IP地址是什么，

> ID：16033900
> 
> 赞同：4
> 
> 时间：2013-04-16T09:52:30.920
> 
> 标签：android

android模拟器的IP地址是什么，根据我在互联网上找到的几个信息，127.0.0.1、10.0.0.2或10.0.015从Web服务器（apache）调用模拟器。模拟器的端口是固定的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T09:56:57.560

*   `10.0.2.1`- 路由器/网关地址
*   `10.0.2.2`- 主机环回接口的特殊别名（即`127.0.0.1`在您的开发机器上）
*   `10.0.2.3`- 第一个 DNS 服务器
*   `10.0.2.4`// `10.0.2.5`-`10.0.2.6`可选的第二、第三和第四个DNS服务器（如果有）
*   `10.0.2.15`- 模拟设备自己的网络/以太网接口
*   `127.0.0.1`- 模拟设备自己的环回接口

[http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T09:56:19.810

**使用此方法，您将获得 100% 正确的 android 模拟器 IP 地址**

获取你的模拟器的IP地址

转到 adb shell 并键入此命令

```
adb shell
ifconfig eth0 
```

![在此处输入图像描述](https://i.stack.imgur.com/jlioW.jpg)

运行此命令后，我得到

**IP : 10.0.2.15**

**面具：255.255.255.0**

这对我有用。我也在为一个网络应用程序工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:54:20.347

Android 模拟器的外部 IP 地址为 10.0.2.2。

来源：[链接](http://developer.android.com/tools/devices/emulator.html#networkaddresses)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:55:51.770

使用`adb shell`命令行登录您的设备并运行`netcfg`以查看其网络配置。现在你也是面向未来的。不要给男人一条鱼..教他如何钓鱼：D

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T10:17:01.967

尝试寻找“HttpHost”类。 [http://developer.android.com/reference/org/apache/http/HttpHost.html](http://developer.android.com/reference/org/apache/http/HttpHost.html)

# wordpress - Wordpress 暴力攻击，如何修复

> ID：16033904
> 
> 赞同：0
> 
> 时间：2013-04-16T09:52:50.720
> 
> 标签：wordpress

我有 bin 阅读有关 wordpress 网站上的这种暴力攻击（例如这里[http://blog.cloudflare.com/patching-the-internet-fixing-the-wordpress-br](http://blog.cloudflare.com/patching-the-internet-fixing-the-wordpress-br)）我有 bin google-ing 一段时间但是还有一些问题需要回答。

*   我的 wordpress 网站不允许我访问 wp-admin 但将我重定向到错误页面，这是否意味着我的网站已被 bin 黑客入侵？
*   我今天需要什么才能访问我的 wp-admin 站点

最好的,约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:07:14.887

检查您的 Cpanel 日志，并确认您的博客是否已被入侵。如果是更改相关问题，请撤消您所做的所有更改，您也可以尝试通过删除 Cpanel 中的主题目录来恢复。在此之前在 CPANEL 中备份您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T07:23:33.690

只需检查您的 cpanel 是否有 Wp_admin 页面。如果它不存在，您的网站已被入侵。在这种情况下，如果您备份了您的整个站点。只需在您的服务器上上传您的 wp_admin 页面。

# java - 将 ImageIcon 添加到数组中的特定 JPanel

> ID：16033907
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:53:06.497
> 
> 标签：java, swing, jpanel, grid-layout, imageicon

我已经重新开始我的国际象棋游戏，现在面临着新的问题。就像我试图在问题标题中解释的那样；

我做了 64 个方格，就像通常的棋盘一样。它们由一个数组给出数字，现在我想在棋盘上的 3 号方格中添加一块。

我的代码：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Frame;
import java.awt.GridLayout;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Chess extends JPanel implements config {

/**
 * @param <MyMethods>
 * @param args
 */

public static void main(String[] args) {

    int[] squareArray;

    squareArray = new int[64];

    int i = 0;

    JFrame frame = new JFrame("Chessboard");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new GridLayout(SQUARE / ROWS, 0, 2, 2));

    for (i = 0; i < SQUARE; i++) {
        squareArray[i] = i;
        JPanel b = new JPanel(new BorderLayout());

        frame.add(b);

        int row = (i / 8) % 2;

        if (row == 0) {
            b.setBackground(i % 2 == 0 ? config.P1Color : config.P2Color);
        } else {
            b.setBackground(i % 2 == 0 ? config.P2Color : config.P1Color);
        }

        frame.setSize(800, 800);
        frame.setVisible(true);
    }

    JLabel piece = new JLabel(new ImageIcon("pawn.png"));
    JPanel panel = (JPanel) i.getComponent(3);
    panel.add(piece);
}

} 
```

错误发生在代码底部的“ **JPanel panel = (JPanel) i.getComponent(3); ”处。**错误是这样的；“*我无法解决*”。

我有一种感觉，我把这里的事情搞砸了，开始处理我没有能力处理的事情。我的猜测是 getComponent 是访问数组的错误方法，或者**i** .getComponent(3) 是使用错误的变量。

非常感谢所有帮助，如果我忘记在此处添加内容，请随时问我。我必须承认我很抱歉问了这些愚蠢的问题，但我发现理解 Java 并使用它真的非常非常困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:00:57.443

```
for (i = 0; i < SQUARE; i++) {
        squareArray[i] = i;
        JPanel b = new JPanel(new BorderLayout());  // ... 
```

名称不佳`b`的被定义为该循环的本地。尽管..

```
JPanel panel = (JPanel) b.getComponent(3); 
```

是在循环结束之后，在访问变量所需的范围之外。

# c++ - 二项式堆 - 实现运行太慢

> ID：16033909
> 
> 赞同：1
> 
> 时间：2013-04-16T09:53:07.950
> 
> 标签：c++

我正在实现二项式堆。我已经或多或少地工作了，但我不明白为什么它这么慢。这是由于我实施 mergeHeaps 的方式造成的吗？作为一系列“if”和“else if”语句来处理不同的条件？另一个问题是 deleteTree 不起作用。任何建议将不胜感激......

```
#include "pqueue-binomial-heap.h"
#include <cmath>
#include <bitset>
using namespace std;

BinomialHeapPQueue::BinomialHeapPQueue() {
    carry = NULL;
}

BinomialHeapPQueue::~BinomialHeapPQueue() {
}

string BinomialHeapPQueue::peek() const {
    int key = findKey();
    node *keynode = heap.get(key);
    string nextword = keynode->word;
    return nextword;
}

string BinomialHeapPQueue::extractMin() {
    int key = findKey();
    node *keynode = heap.get(key);
    string nextword = keynode->word;
    deleteNode(key);
    mergeHeaps();
    return nextword;
}

void BinomialHeapPQueue::enqueue(const string& elem) {
    node *newnode = new node;
    newnode->word = elem;
    if (heap.size() == 0) {
        heap.push_back(NULL);
    }
    newheap.push_back(newnode);
    mergeHeaps();
    logSize++;
}

int BinomialHeapPQueue::findKey() const {
    int minimum = 0;
    string minstring = "zzzzzzzzz";
    for (int i = 0; i < heap.size(); i++) {
        node *check = heap.get(i);
        if (check != NULL) {
        string checkstring = check->word;
        if (checkstring < minstring) {
            minimum = i;
            }
        }
    }
    return minimum;
}

void BinomialHeapPQueue::deleteNode(int key) {
    node *dnode = heap.get(key);
    newheap = dnode->children;
    dnode = NULL;
    logSize--;
    mergeHeaps();
}

void BinomialHeapPQueue::mergeHeaps() {
    int i = 0;

    while (i < heap.size() && i < newheap.size()) {
        node *currentp = heap.get(i);// node from heap
        node *currentq = newheap.get(i);// node from the newheap being merged into heap

        if (currentp == NULL && currentq == NULL && carry == NULL) {
            heap.set(i, NULL);
            i++;
        }
        else if (currentp != NULL && currentq != NULL && carry != NULL) {
            heap.set(i, currentp);
            carry = mergeTree(carry, currentq);
                if (i >= heap.size() - 1) {// extend vector/s if reaching the end and there's still something being carried.
                    heap.add(NULL);
            }
                if (i >= newheap.size() -1) {// better to do it this way than make one vector same size as the other- then enqueue gets expensive
                    newheap.add(NULL);
            }
            i++;
        }
        else if (currentp == NULL && currentq == NULL && carry != NULL) {
            heap.set(i, carry);
            carry = NULL;
            //deleteTree(carry); comment out deleteTree because it's not working right now.
            //carry = NULL;
            i++;
        }
        else if (currentp != NULL && currentq != NULL && carry == NULL) {
            carry = mergeTree(currentp, currentq);
            heap.set(i, NULL);
                if (i >= heap.size() - 1) {
                    heap.add(NULL);
            }
                if (i >= newheap.size() -1) {
                    newheap.add(NULL);
            }
            i++;
        }
        else if (currentp == NULL && currentq != NULL && carry != NULL) {
            carry = mergeTree(currentq, carry);
            heap.set(i, NULL);
                if (i >= heap.size() - 1) {
                    heap.add(NULL);
            }
                if (i >= newheap.size() -1) {
                    newheap.add(NULL);
            }
            i++;
        }
        else if (currentp != NULL && currentq == NULL && carry != NULL) {
            carry = mergeTree(currentp, carry);
            heap.set(i, NULL);
                if (i >= heap.size() - 1) {
                    heap.add(NULL);
            }
                if (i >= newheap.size() -1) {
                    newheap.add(NULL);
            }
            i++;
        }
        else if (currentp != NULL && currentq == NULL && carry == NULL) {
            i++;
        }
        else if (currentp == NULL && currentq != NULL && carry == NULL) {
            heap.set(i, currentq);
            i++;
        }
    }
    newheap.clear();

}

void BinomialHeapPQueue::deleteTree(node *tree) {
    if (tree == NULL) return;

    int size = tree->children.size();
    if (size > 0) {
    for (int i = 0; i < size; i++) {
        node *nexttree = tree->children.get(i);
        delete tree;
        deleteTree(nexttree);
        }
    }
    return;
}

void BinomialHeapPQueue::deleteVector(Vector<node *> &vec) {
    int vecsize = vec.size();
    for (int i = 0; i < vecsize; i++) {
        if (vec.get(i) != NULL) {
            node *startnode = vec.get(i);
            deleteTree(startnode);
        }
    }
    vec.clear();
}

BinomialHeapPQueue *BinomialHeapPQueue::merge(BinomialHeapPQueue *one, BinomialHeapPQueue *two) {

    return new BinomialHeapPQueue();
}

BinomialHeapPQueue::node *BinomialHeapPQueue::mergeTree(node *currentp, node *currentq) {
    string root1 = currentp->word;
    string root2 = currentq->word;
        if (root1 <= root2) {
            return addSubTree(currentp, currentq);
    }
        else {
            return addSubTree(currentq, currentp);
    }
}

BinomialHeapPQueue::node *BinomialHeapPQueue::addSubTree(node *root, node *add) {
    root->children.add(add);
    return root;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:58:55.040

我认为这是您的代码的缓慢部分：

```
while (i < heap.size() && i < newheap.size()) {
    node *currentp = heap.get(i);// node from heap
    node *currentq = newheap.get(i);// 
```

`get()`列表中的时间复杂度不是恒定的，它是线性的。

使用此代码，合并操作的时间复杂度从 O(log n) 变为 O(log ² n)。

# meteor - 帐户包在陨石 0.5.9 测试版本中不起作用

> ID：16033918
> 
> 赞同：0
> 
> 时间：2013-04-16T09:53:34.933
> 
> 标签：meteor, release, accounts

自 0.5.1 发布以来，我一直在研究流星。现在有了 0.6.x 版本，我的一些功能不再起作用了......使用 Meteor --release 我只能模拟 0.6.0，但不能模拟 0.5.7 ......我尝试使用陨石

```
mrt create test --tag v0.5.9 
```

并且它在创建的测试文件夹中正确启动。但是帐户密码包不起作用。创建一个新帐户或登录只是加载...

任何人的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:09:26.017

这听起来有点像[流星 0.6.0 版本中的变量作用域](http://www.meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)引入的问题。从 Meteor 版本 0.6.0 开始，文件变量被本地化为该文件。这意味着其他文件无法访问其他文件变量/函数，除非该变量/函数是全局的。

您需要查找以下列形式声明的变量：

```
var data = true; 
```

并将其更改为

```
data = true; 
```

函数也是如此。如果你有

```
function xyz() {...} 
```

您需要将其更改为

```
xyz = function() {...} 
```

一旦你在你的代码中解决这个问题，它应该可以工作。请记住，Meteor 0.6.0 中的这一更改还可以帮助您更好地组织文件并保持代码更简洁。因此，您可以仅将必要的功能设为全局并模块化您的流星应用程序。

# android - Sqlite Next 奇怪的 Android

> ID：16033922
> 
> 赞同：0
> 
> 时间：2013-04-16T09:53:47.030
> 
> 标签：android, sqlite, counter, back, next

我有这个查询要在我的数据库中移动

```
Select data1,data2 From Table Where counter <"+somenumber+" and  order by counter DESC 
```

这是为了向后移动，我也有，但没有向前移动的 desc。问题是这样的：68,69,70,7,71。为什么要这样做？它在 71 之前达到 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:12:52.497

正如 Selvin 建议的那样，将您的列更改为保留 Integer 类型，然后您`order by`将正常工作。或者这样做：

```
Select data1,data2 From Table Where CAST(counter as integer) < 10 order by CAST(counter AS INTEGER) DESC ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:17:24.937

嘿检查列类型 Text/varchar/not numeric 列，还有一件事查询不正确

`Select data1,data2 From Table Where condition1 and condition2 order by counter DESC`

# html - 用于粘性页脚的 css 没有出现在正确的位置

> ID：16033923
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:53:49.377
> 
> 标签：html, css

我想创建粘性页脚，下面是我正在使用的 css 代码，但是页脚没有出现在正确的位置，或者它出现在页面的左侧，或者与其他 div 元素重叠，错误在哪里

html代码

```
 <div id="wrap">
        <div id="header">
            <div id="logo"></div>
            <div id="nav"></div>
        </div>
        <div id="mid">
            <div id="clogin"></div>
            <div id="roll"></div>
        </div>
        <div id="main">
            <div id="advt"></div>
            <div id="content"></div>
            <div id="right"></div>
        </div>
<div id="footer"></div>
    </div> 
```

CSS代码

```
html, body { height: 100%; }
html,body{
font: 12px/170% 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, arial, Sans-Serif;
margin: 0;
padding: 0;
background-color: #ffffff;
color: #000000;
}
body{ overflow-x: hidden;}
/* Headers */
h1, h2, h3, h4 {
font: bold 1em/1.5em Georgia, 'Times New Roman', Times, serif;
color: #555;
margin: 10px 20px 7px 20px;  
}
h1 { font-size: 3.7em; font-weight: normal; letter-spacing: -2px; }
h2 { font-size: 2.8em; font-weight: normal; }
h3 { font-size: 2.2em; font-weight: normal; letter-spacing: -0.5px; padding-top: 15px; }
h4 { font-size: 1.4em; }

/* start - table */
table {
border-collapse: collapse;
margin: 10px 10px;
}
tr.altrow { background: #F9F9F9;    }
th, td {
text-align: left;           
border-width: 1px;
border-style: solid;
}
th {
color: #555;
background: #F0FBFF; 
padding: .8em 1em;  
border-color: #D8EBF5 #D8EBF5 #B9DBEE #D8EBF5;  
}
td {
border-color: #EFEFEF;  
padding: .7em 1em;  
}   
/* end - table */
/*form elements */
form{
margin: 0px 0px; 
padding: 0px 0px; 
}

form table{
margin: 5px 10px; 
padding:0px; 
border: 1px solid #F0F0F0;
border-collapse: collapse;
}
form p {
border-bottom: 1px solid #E6E6E6;
padding: 12px 0 5px 0;  margin: 0;  
color: #666666;
}
form div{
margin: 5px 10px;
}
p {
font-size: 12 px;
}

/* ------------------------------------------
LAYOUT
------------------------------------------- */ 
#wrap{

width: 1000px;
margin: 0 auto;
text-align: left;
/*height: 100%;*/
/*height: 1000px;*/
min-height: 100%;

}

/* header */
#header{
position: relative;
width: inherit;
height: 117px;
}
#logo{
width: 287px;
height: 117px;
float: left;                
}
#logo h1 {
margin: 0; padding: 15px 0px;
font: bold 52px 'Trebuchet MS', 'Helvetica Neue', Arial, Sans-Serif;  
letter-spacing: -5px;
color: #ff3646;
}
#logo p#slogan {
position: absolute;
font-family: Georgia, 'Times New Roman', Times, serif;
font-weight: bold;
font-size: 13px;
line-height: 1.8em;
font-style: italic;
letter-spacing: -.3px;
color: #CFCFCF; 

/* change the values of top and left to adjust the position */
top: 62px; left: 7px;       
}
input.button {
width: auto;height: 26px;
color: #ffffff; font: bold;
background: url(../images/Candidate--Login---button.jpg);
border: none;
padding: 5px;
}
.button:hover{
border: inset;
}
input.sbutton {
width: 55px;height: 20px;
color: #000000; font: bold;
background: url(../images/Search.jpg);
border: none;
}
.sbutton:hover{color: #ffffff;}

/* Navigation */
#nav{
float: right;
width: 708px;
height: 117px;
background: #ffffff url(../images/Main-Header.jpg);
margin: 0px;padding: 0 px;
}
#nav .rclick{
position: relative;
left: 500px;top: 40px;
background: url(../images/Employer.jpg) no-repeat;
color: #FFFFFF;
font-size: 1.14em;
}
#nav .rclick a:link,a:visited{text-decoration: blink;}
#nav .rclick a:hover,a:link:active{ text-decoration: underline;}
#menu{
position: absolute;top: 80px;
width: auto;
height: auto;
}
#nav1, .nav1, #nav1 .nav1 li { margin:0px; padding:0px; }
#nav1 li {float:left; display:inline; cursor:pointer; list-style:none; padding: 5px 15px 10px 15px; text-transform: uppercase; font: bold 14px 'Trebuchet MS', Arial, Sans-Serif; position:relative;}
#nav1 li ul.first {left:-1px; top:100%;}

li, li a {color:#66FFFF; text-decoration:none;}
#nav1 .nav1 li { width:100%; text-indent:10px; line-height:30px; margin-right:10px; border-top:1px #000 solid; border-bottom:1px #000 solid;
border-left:none; border-right:none; background:#70B8FF;}
#nav li a {display:block; width:inherit; height:inherit;}

ul.nav1 { display:none; }
#nav li:hover > a, #nav1 li:hover { color:#0047B2; background:#52F3FF; }
li:hover > .nav1 { display:block; position:absolute; width:200px; top:-2px; left:50%; z-index:1000; border:1px #000 solid; }
li:hover { position:relative; z-index:2000; }

#container{
position: absolute;
top: 117px;
width: 998px;
height: auto;
border: solid #E6E6E6 1px;
margin: 5px;}
/*middle*/
#mid{
position: absolute;
top: 117px;
width: inherit;
height: 246px;
}
#clogin{
margin-top: 5px;
margin-right: 5px;
width: 287px;
height: 246px;
background-image: url(../images/Candidate--Login.jpg);
background-repeat: no-repeat;
}
#clogin h3{
margin: 0px;padding: 5px 0 0 0;
font: 22px 'Trebuchet MS', 'Helvetica Neue', Arial, Sans-Serif; color: #FFFFFF; text-align: center;

}
#clogin .logn table,tr{
/*border: hidden;*/
margin: 5px auto;
background: none;
}
.logn td{border: 0;}
.logn a:link,a:visited{
color: #ffffff;text-decoration: none;
}
.logn a:hover{color: red;}
#roll{
margin-top: 5px;
position: absolute;top: 0px;
left: 293px;
width: 707px;
height: 241px;
background-image: url(../images/main-Branding.jpg);
float: right;
}
#main{
position: absolute;
top: 368px;
width: inherit;
height: 450px;
}

/* advertisement */
#advt{
width: 292px;
height: auto;
margin: 0px;
}
#advt .img-block{
float: left;
width: 265px;   
margin: 10px 0 0 25px;
padding: 10px 0 0 0;
display: inline;
    }
#advt .imag-block img{
background: #FFF;
border: 1px solid #DFEAF0;
padding: 5px;
}
#advt label.adlabel{

float: left; color: #66FFFF;
font-size: 1.6em; font: bold; margin: 25px 20px 0 60px;padding: 0px 5px;

}

#content{
position: absolute;
left: 292px;top: 0px;
width: 561px;
height: auto;

}
#content .searchbag{
width: 551px;
margin: 2px 30px 5px 0px;
padding: 5px 0 10px 10px;
background: url(../images/Search-Assignment.jpg) no-repeat;

}
#content .searchbag input{
margin: 0px 5px 2px 10px;
}
#content label.slabel{
color: #66FFFF;
font: bold; font-size: 1.15em;
margin: 5px 120px 0 20px;}
#content p{margin: 10px 10px;}
#right{
position: absolute;
top: 16px;right: 0px;
width: 146px;
height: 400px;
}
#right .box1{background-image: url(../images/advt-box-1.jpg); background-repeat: no-repeat; height: 94px; position: relative; left: 10px; top: 5px;}
#right .box2{background-image: url(../images/advt-box-2.jpg); background-repeat: no-repeat; height: 94px;position: relative; left: 10px; top: 5px;}
#right .box3{background-image: url(../images/advt-box-3.jpg); background-repeat: no-repeat; height: 94px;position: relative; left: 10px; top: 5px;}
#right label.showno{font-size: 1.5em; color: #006B00; position: relative; top: 20px; left: 5px;}
#right div.show{font-size: 3.7em;color: #006B00; padding: 5px; position: relative; top: 10px; left: 20px;}
.clear {clear: both;}
#footer{               
position: relative;
bottom:0;
width:inherit;
height:30px;   /* Height of the footer */
background:#6cf;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:56:20.530

习惯了这个代码的粘性页脚

**CSS**

```
html, body {
height: 100%;
}
.wrapper {
min-height: 100%;
height: auto !important;
height: 100%; background:red;
margin: 0 auto -4em;
}
.footer, .push {
height: 4em; 
}

.footer{
    background:green;} 
```

**HTML**

```
<div class="wrapper">
    <p>Your website content here.</p>
    <div class="push"></div>
</div>
<div class="footer">
    <p>Copyright (c) 2008</p>
</div> 
```

**[现场演示](http://jsfiddle.net/rohitazad/Aw2Nq/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:16:18.113

要将页脚粘贴在底部并与您应该使用的其他元素重叠

```
#footer{               
    position: fixed; // To stay fixed
    bottom:0;
    left: 0; // To stick to the left
    z-index: 99; // For overlapping elements
    width:inherit;
    height:30px;   /* Height of the footer */
    background:red;
} 
```

# python - 在 Python 中设置特定的正则表达式

> ID：16033926
> 
> 赞同：-3
> 
> 时间：2013-04-16T09:53:59.153
> 
> 标签：python, regex

我是 Python 新手，我需要一个正则表达式来检索此格式的标题和链接：

```
<a href="anything" class="anything" title="Size: anything">anything</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:56:04.867

使用一个像样的 HTML 解析器会好得多。使用具有[大量文档的](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) - 例如：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(input)

for link in soup.find_all('a', class_='anything'):
    print link['href'], link.text 
```

这会找到所有`<a>`具有 class 的元素`anything`，然后打印它们的 URL 和链接文本。

正则表达式通常*不是*解析 HTML 的工具。

# jquery - 为什么href值在拖放时复制到输入类型=文本？

> ID：16033929
> 
> 赞同：0
> 
> 时间：2013-04-16T09:54:09.123
> 
> 标签：jquery, html, browser, href

```
<a href="javascript: void(0)" onclick="clearTextbox('#search_by_userid')" title="Clear User Id"> User Id :</a> 
<span><input id="search_by_userid" type="text" value="" onkeypress="keyDownEvent(event,'#show_history_call_logs','#search_by_userid');"/></span> 
```

[看到它在行动](http://jsfiddle.net/7qPNZ/2/)

当我单击链接并拖动到任何文本框或文本区域时，它会将 href 的值复制到该输入，为什么这样做？

我知道我可以通过做`$("#id").attr('readonly', true).css('cursor', 'text');`或只是避免这种情况，`readonly`但在这种情况下，我不希望它“只读”

**链接是否有任何属性可以避免复制？**或者我想错了:(

# r - 用 r 在不同尺度上绘制脉冲响应

> ID：16033930
> 
> 赞同：1
> 
> 时间：2013-04-16T09:54:11.717
> 
> 标签：r

目前我正在使用 R 中的 vars 包。

```
library(vars)
data(Canada)

var.2c <- VAR(Canada, p = 2, type = "const")
plot(irf(var.2c, impulse = "e", response = c("prod", "rw", "U"), boot = 
  T)) 
```

如您所见，每个图都有相同的 Y 尺度。如何用单个缩放替换这种统一缩放？在我自己的数据集中，我遇到的问题是某些脉冲响应的范围为 [0.80:-0.80]，而其他的范围为 0.001 到 -0.001。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:55:01.963

取决于您要显示的内容。小心在图表上混合比例或比例数据，因为它很容易误导读者。那么，您自担风险，:-)，这里有两种可能性。

首先，手动重新调整数据，即标准化每个 y 数据向量。

其次，如果结果属于两个基本的缩放类别，则将一组绘制在左侧 y 轴上，另一组绘制在次要（右侧）y 轴上。签出`?par`和`?axis`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T06:34:50.047

你可以试试我的代码：plot.varirfGM(x, plot.type='multiple', nc=2，mar.multi = c(0, 4, 2, 1), oma.multi = c(6, 2, 4 , 2))

[结果示例](https://i.stack.imgur.com/YIvuH.png)

```
 plot.varirfGM=
function (x, plot.type = c("multiple", "single"), names = NULL, 
          main = NULL, sub = NULL, lty = NULL, lwd = NULL, col = NULL, 
          ylim = NULL, ylab = NULL, xlab = NULL, nc, 
          mar.multi = c(0, 4, 0, 4), oma.multi = c(6, 4, 6, 4), adj.mtext = NA, 
          padj.mtext = NA, col.mtext = NA, ...) 
{
  op <- par(no.readonly = TRUE)
  on.exit(par(op))
  plot.type <- match.arg(plot.type)
  inames <- x$impulse
  rnames <- x$response
  if (is.null(names)) {
    names <- inames
  }
  else {
    names <- as.character(names)
    if (!(all(names %in% inames))) {
      warning("\nInvalid variable name(s) supplied, using first variable.\n")
      inames <- inames[1]
    }
    else {
      inames <- names
    }
  }
  nvi <- length(inames)
  nvr <- length(rnames)
  ifelse(is.null(lty), lty <- c(1, 1, 2, 2), lty <- rep(lty, 
                                                        4)[1:4])
  ifelse(is.null(lwd), lwd <- c(1, 1, 1, 1), lwd <- rep(lwd, 
                                                        4)[1:4])
  ifelse(is.null(col), col <- c("black", "gray", "red", "red"), 
         col <- rep(col, 4)[1:4])

###1\. dataplot function ########
   dataplot <- function(x, iname) {
    impulses <- x$irf[[iname]]
    range <- range(impulses)
    upper <- NULL
    lower <- NULL
    if (x$boot) {
      upper <- x$Upper[[iname]]
      lower <- x$Lower[[iname]]
      range <- range(cbind(impulses, upper, lower))
      rangeList=getRespRangeList(x,iname) ############## rangelist
      #print(rangeList)
    }
    if ((x$model == "varest") || (x$model == "vec2var")) {
      if (x$ortho) {
        text1 <- paste("Orthogonal Impulse Response from", 
                       iname, sep = " ")
      }
      else {
        text1 <- paste("Impulse Response from", iname, 
                       sep = " ")
      }
    }
    else if (x$model == "svarest") {
      text1 <- paste("SVAR Impulse Response from", iname, 
                     sep = " ")
    }
    else if (x$model == "svecest") {
      text1 <- paste("SVECM Impulse Response from", iname, 
                     sep = " ")
    }
    if (x$cumulative) 
      text1 <- paste(text1, "(cumulative)", sep = " ")
    text2 <- ""
    if (x$boot) 
      text2 <- paste((1 - x$ci) * 100, "% Bootstrap CI, ", 
                     x$runs, "runs")
    result <- list(impulses = impulses, upper = upper, lower = lower, 
                   range = range, text1 = text1, text2 = text2, rangeList=rangeList)
    return(result)
   }

###2\. plot.single function ########
  plot.single <- function(x, iname, rname, ...) {
    ifelse(is.null(main), main <- x$text1, main <- main)
    ifelse(is.null(sub), sub <- x$text2, sub <- sub)
    xy <- xy.coords(x$impulse[, rname])
    ifelse(is.null(ylab), ylabel <- rname, ylabel <- ylab)
    ifelse(is.null(xlab), xlabel <- "", xlabel <- xlab)
    ifelse(is.null(ylim), ylim <- x$range, ylim <- ylim) #ylim assignment
    plot(xy, type = "l", ylim = ylim, col = col[1], lty = lty[1], 
         lwd = lwd[1], axes = FALSE, ylab = paste(ylabel), 
         xlab = paste(xlab), ...)
    title(main = main, sub = sub, ...)
    axis(1, at = xy$x, labels = c(0:(length(xy$x) - 1)))
    axis(2, ...)
    box()
    if (!is.null(x$upper)) 
      lines(x$upper[, rname], col = col[3], lty = lty[3], 
            lwd = lwd[3])
    if (!is.null(x$lower)) 
      lines(x$lower[, rname], col = col[3], lty = lty[3], 
            lwd = lwd[3])
    abline(h = 0, col = col[2], lty = lty[2], lwd = lwd[2])
  }

### 3\. plot.multiple function ## 
  plot.multiple <- function(dp, nc = nc, ...) {
    #print(dp$rangeList)
    x <- dp$impulses
    y <- dp$upper
    z <- dp$lower
    ifelse(is.null(main), main <- dp$text1, main <- main)
    ifelse(is.null(sub), sub <- dp$text2, sub <- sub)
    ifelse(is.null(ylim), ylim <- dp$range, ylim <- ylim) #ylim assignment
    range <- range(c(x, y, z)) #unique range for each response in a dp$impulse
    rangeList=dp$rangeList
    nvr <- ncol(x)
    if (missing(nc)) {
      nc <- ifelse(nvr > 4, 2, 1)
    }
    nr <- ceiling(nvr/nc)
    par(mfrow = c(nr, nc), mar = mar.multi, oma = oma.multi)
    if (nr > 1) {
      for (i in 1:(nvr - nc)) {
        ylimL=dp$rangeList[i,]################## ylim rangeList
        #print(ylimL) #print("ylimL i")
        ifelse(is.null(ylab), ylabel <- colnames(x)[i], 
               ylabel <- ylab)
        xy <- xy.coords(x[, i])
        plot(xy, axes = FALSE, type = "l", ylab = ylabel, 
             ylim = ylimL, col = col[1], lty = lty[1], lwd = lwd[1], 
             ...)
        axis(2, at = pretty(rangeList[i,]))
        abline(h = 0, col = "red")
        if (!is.null(y)) 
          lines(y[, i], col = col[3], lty = lty[3], lwd = lwd[3])
        if (!is.null(z)) 
          lines(z[, i], col = col[3], lty = lty[3], lwd = lwd[3])
        box()
      }
      for (j in (nvr - nc + 1):nvr) {
        ylimL=dp$rangeList[j,]
        #print(ylimL) #;print("ylimL j")
        ifelse(is.null(ylab), ylabel <- colnames(x)[j], 
               ylabel <- ylab)
        xy <- xy.coords(x[, j])
        plot(xy, axes = FALSE, type = "l", ylab = ylabel, 
             ylim = ylimL, col = col[1], lty = lty[1], lwd = lwd[1], 
             ...)
        axis(2, at = pretty(rangeList[j,]))
        axis(1, at = pretty(1:(nrow(x))) ) #labels = c(0:(nrow(x) - 1))
        box()
        abline(h = 0, col = "red")
        if (!is.null(y)) 
          lines(y[, j], col = col[3], lty = lty[3], lwd = lwd[3])
        if (!is.null(z)) 
          lines(z[, j], col = col[3], lty = lty[3], lwd = lwd[3])
      }
      mtext(main, 3, line = 2, outer = TRUE, adj = adj.mtext, 
            padj = padj.mtext, col = col.mtext, ...)
      mtext(sub, 1, line = 4, outer = TRUE, adj = adj.mtext, 
            padj = padj.mtext, col = col.mtext, ...)
    }
    else {
      for (j in 1:nvr) {
        ylimL=dp$rangeList[j,] #ylimL
        ifelse(is.null(ylab), ylabel <- colnames(x)[j], 
               ylabel <- ylab)
        xy <- xy.coords(x[, j])
        plot(xy, type = "l", ylab = ylabel, ylim = ylimL, ##ylimL
             col = col[1], lty = lty[1], lwd = lwd[1], ...)
        if (!is.null(y)) 
          lines(y[, j], col = col[3], lty = lty[3], lwd = lwd[3])
        if (!is.null(z)) 
          lines(z[, j], col = col[3], lty = lty[3], lwd = lwd[3])
        abline(h = 0, col = "red")
      }
      mtext(main, 3, line = 2, outer = TRUE, adj = adj.mtext, 
            padj = padj.mtext, col = col.mtext, ...)
      mtext(sub, 1, line = 4, outer = TRUE, adj = adj.mtext, 
            padj = padj.mtext, col = col.mtext, ...)
    }
  }
  if (plot.type == "single") {
    for (i in 1:nvi) {
      dp <- dataplot(x, iname = inames[i])
      for (j in 1:nvr) {
        plot.single(dp, iname = inames[i], rname = rnames[j], 
                    ...)
        if (nvr > 1) 
          par(ask = FALSE) #edit
      }
    }
  }
  if (plot.type == "multiple") {
    for (i in 1:nvi) {
      dp <- dataplot(x, iname = inames[i])
      plot.multiple(dp, nc = nc, ...)
      if (nvi > 1) 
        par(ask = FALSE) #edit
    }
  }
}

getRespRangeList=function(irfResults,iname){
  impulse=irfResults$irf[[iname]] #employment as impulses
  upper <- irfResults$Upper[[iname]]
  lower=irfResults$Lower[[iname]]
  rangeList=matrix(ncol = 2)
  for (r in colnames(impulse)){
    row=range(c(lower[,c(r)], impulse[,c(r)], upper[,c(r)]))
    rangeList=rbind(rangeList, row)
  }
  rangeList=rangeList[-1,]
  return(rangeList)
} 
```

# amazon-ec2 - 我可以将 Amazon ELB 用于我的 RDS 实例以实现负载平衡吗？

> ID：16033940
> 
> 赞同：7
> 
> 时间：2013-04-16T09:54:34.907
> 
> 标签：amazon-ec2, load-testing, amazon-rds, amazon-elb

我有两个问题：

1.  我可以在我的 RDS 实例上使用 ELB 进行负载均衡吗？
2.  我可以在 EC2 实例上安装多个服务器并为所有服务器运行单个 ELB 实例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:26:48.583

1-如果您的意思是只有一个 RDS 实例，那么在它前面的负载均衡请求没有意义。如果您的意思是拥有多个 RDS 实例，那么负载平衡请求也没有多大意义，因为您的数据库服务器很可能在给定时间点拥有不同的数据。我可以看到这条规则的唯一例外是如果您有只读 RDS 实例。在这种情况下，您可能会受益于在它们前面放置 ELB。如果您的应用程序是写密集型的，您应该坚持使用更大的 RDS 实例或迁移到 noSQL 数据库。不要尝试将请求负载平衡到读/写 DMBS，因为您将不得不自己处理同步和许多其他（重要）方面。

2-是的，这是完全可行的。当然，对于 Web 服务器。通常不适用于 DBMS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-06T06:41:02.777

1.  尽管将 ELB 连接到 RDS 的原因有很多，但 AWS 目前不提供将 ELB 连接到 RDS 的功能。ELB 仅适用于 EC2 实例。

2.  是/否，您可以在 EC2 实例上安装不同的服务，但不能在 EC2 实例上安装具有不同端口的相同服务。ELB 负载均衡 相同的服务到相同的端口，但它可以在一个 ELB 上提供多种服务。它还仅提供一种健康检查功能，因此如果作为健康检查点的一项服务死亡，则所有其他服务将同时被 ELB 阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-31T01:19:38.810

对于问题 1，我可以想到两个选项。一种是将数据库放入 EC2 实例中，方法是将其放入该实例的 AMI。您需要将写入写入所有数据库，或者让它们共享驻留在 EFS 中的数据。另一种选择是使用 Route 53 和私有托管区域在 RDS 实例之间提供负载平衡。同样，如果他们使用 EBS，则需要对所有数据库进行所有写入，除非数据库驻留在 EFS 中。

最终，您将需要尝试不同的配置并评估性能，以了解哪种配置最适合您的特定要求。

对于问题 2，我不明白您在问什么，因为我认为服务器和 EC2 实例之间存在一对一的关系。它们之间有什么区别，因此您将一件事称为服务器，将另一件事称为 EC2 实例？ELB 在同一 VPC 和区域内的多个可用区上工作。

# ios - 从 icloud 转换传入数据的问题

> ID：16033941
> 
> 赞同：1
> 
> 时间：2013-04-16T09:54:37.100
> 
> 标签：ios, icloud

我想在我的应用程序中读取存储在 icloud 中的数据，但在以下方法中出现异常

```
-(BOOL)loadFromContents:(id)contents ofType:(NSString *)typeName error:(NSError **)outError
{
    if (contents != nil && [contents length]>0)
    {
        NSString * pString = [[NSString alloc] initWithData:contents 
                                                   encoding:NSUTF8StringEncoding];
    }
} 
```

将内容转换为 NSString 时出现异常。它会导致应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:18:42.807

我发现了我的错误，我在从 icloud 读取数据时犯了一个错误....

以前读取数据我使用了 UIDocument 类“readFromURL:url error:&error”方法，

但现在我用以下方法替换了这个调用。

```
[documentclassObj openWithCompletionHandler:^(BOOL success) {

}]; 
```

现在它工作正常......

# android - Android Fragments-Activity 模型

> ID：16033942
> 
> 赞同：0
> 
> 时间：2013-04-16T09:54:43.977
> 
> 标签：android, android-fragments

我对 Android 和片段与活动的想法有点陌生。

我试图在某种程度上模拟当前 Twitter 应用程序的 UI。我看到第一个屏幕是`ViewPager`带有标签 +的`ListView`。单击列表项时，有时会显示其他一些屏幕，关注、个人资料、推文。这些屏幕没有原始屏幕所具有的选项卡。

这些新屏幕是单独的活动，其中包含片段的单独活动，控制所有非选项卡式屏幕的单独单个活动，还是持有选项卡的原始活动和控制所有片段的查看器？什么是最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:36:26.900

我不会直接回复关于推特应用程序的问题，而是教你如何自己检查。

每次启动一个新活动时，整个屏幕都会随着活动更改动画而改变。这意味着，每当它是一个新活动时，您都会看到 ActionBar 飞离屏幕并进入一个新活动。

如果它们是带有片段的单个屏幕，我们不检查代码就无法知道，但根据我的经验，如果他们不使用它，他们做错了，你当然不想遵循他们的步骤。

根据当前的做法，我很可能会为通用应用程序（推文、详细信息、用户信息等）编写一个活动，可能还有一些用于登录、关于、设置等的活动。应用程序在片段中实现，这些片段可以根据需要进行更改。

希望这可以帮助。

# javascript - 在 Symfony2 中使用 Twig 作为 JavaScript 的资产过滤器

> ID：16033947
> 
> 赞同：3
> 
> 时间：2013-04-16T09:54:55.807
> 
> 标签：javascript, symfony, twig, assetic

有没有办法将 Twig 用作资产过滤器？

我想做的是让 Twig 将我的 JavaScript 文件解析为 Twig 模板，然后将它们传递给 Assetic，以便它们在生产中组合和缩小。

您可能会在想为什么我首先要这样做，所以让我跳到一个例子。

* * *

我正在用 JavaScript 制作游戏引擎，我需要有几个“类”的两个版本。一个版本供用户使用，另一个版本供编辑器使用。其中一个类的一个例子是单例**World**。

此类的用户版本可能如下所示：

```
var World = function()
{
    // bunch of 'private' variables and functions inside closure
    var _initialised = false;
    var _worldData;
    ...

    // public functions
    this.init = function(){...}
    this.update = function(){...}
    ...
} 
```

此类的编辑器版本可能如下所示：

```
var World = function()
{
    // bunch of 'private' variables and functions inside closure
    var _initialised = false;
    var _worldData;
    ...

    // bunch of new private variables and functions for editing
    var _editorserver;
    ...

    // public functions
    this.init = function(){...}
    this.update = function(){...}
    ...

    // public functions that edit the world
    this.addEntity = function(){...}
    this.removeEntity = function(){...}
    ...
} 
```

使用经典的 OO 继承，我们可以将**World**定义为一个类，然后用另一个类**EditableWorld**扩展它。然而，使用 JavaScript 中的原型继承只会继承公共函数，如果您甚至尝试扩展现有实例，您将无法访问闭包内的变量和函数。

树枝来救援！

使用 Twig，我们可以将多个块添加到文件中的任何类，然后创建另一个文件，用一些扩展名定义相同的类，然后包含*该*文件。

因此，让我们再次将我们的基础**World**类视为 Twig 模板。

```
// world.js.twig
var World = function()
{
    // bunch of 'private' variables and functions inside closure
    var _initialised = false;
    var _worldData;
    ...

    {% block extended_privates %}{% endblock %}

    // public functions
    this.init = function(){...}
    this.update = function(){...}
    ...

    {% block extended_publics %}{% endblock %}
} 
```

还有我们的扩展版本。

```
// editableworld.js.twig
{% extends "EngineBundle::world.js.twig" %}
var World = function()
{
    // bunch of 'private' variables and functions inside closure
    var _initialised = false;
    var _worldData;
    ...

    {% block extended_privates %}
    // bunch of new private variables and functions for editing
    var _editorserver;
    ...
    {% endblock %}

    // public functions
    this.init = function(){...}
    this.update = function(){...}
    ...

    {% block extended_publics %}
    // public functions that edit the world
    this.addEntity = function(){...}
    this.removeEntity = function(){...}
    ...
    {% endblock %}
} 
```

* * *

现在问题来了：我如何让 Assetic 使用 Twig 作为过滤器，以便我可以执行以下操作：

```
// user version of twig template
// gameengine.html.twig

{% javascripts filter="js_twig_filter"
"@EngineBundle/Resources/public/js/world.js.twig"
%}
<script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %}

// editor version of twig template
// gameeditor.html.twig

{% javascripts filter="js_twig_filter"
"@EngineBundle/Resources/public/js/editableworld.js.twig"
%}
<script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %} 
```

您可能想到的一个直接解决方案是完全放弃闭包，只将我所有的变量和函数公开，并在应该是私有的前面加上下划线。但是对我来说，这不是一个有效的解决方案，因为我不仅仅是在创建一个库。游戏引擎需要从最终用户关闭所有内部结构，以阻止所有想要篡改正在运行的引擎的确定用户（并且对于那些用户，我有服务器验证以确保来自受感染客户端的非法操作不要通过服务器发送给其他客户端）。

感谢您的支持，我希望有人可以帮助我（在我想到这个可能的解决方案之前，我已经把头撞在墙上几天了，现在正在尝试其他想法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T09:19:42.960

您需要首先渲染（在控制器中）所有 *.js.twig 文件并将它们保存为 *.js 文件（使用`file_put_contents()`资源树中某处的函数）。然后将 *.js 文件加载到您的资产过滤器中。

此外，您还有很多优雅地支持 JavaScript 中的 OOP 的库/语言/帮助程序（例如 CoffeeScript、Backbone.js、Underscore.js 等）

祝你好运！

# javascript - Jquery停止传播不起作用

> ID：16033952
> 
> 赞同：1
> 
> 时间：2013-04-16T09:55:10.523
> 
> 标签：javascript, jquery, slider, jquery-slider, stoppropagation

我的页面上有一个图像滑块。我想编写一个上一个和下一个按钮。我相信我的代码是正确的，但由于某种原因 event.stopPropagation 不起作用。

```
<div class="slider-wrapper">

    <div id="slider"> 

     <img id="1" class="slider-image" data-image-num="1" src="images/slider/Pictures/Heaslip.jpg" alt="Overflow: Hidden No More" />
     <img id="2" class="slider-image" data-image-num="2" src="images/slider/Pictures/BOD.jpg"  alt="HTML Captions" />
     <img id="3" class="slider-image" data-image-num="3" src="images/slider/Pictures/Kidney.jpg" alt="and more features" />
     <img id="4" class="slider-image" data-image-num="4" src="images/slider/Pictures/kearney.jpg" alt="and more features" />

    </div>

    <div id="slider-nav">

        <a href="#" class="left" onclick="prev(); return false;">Previous</a>
        <a href="#" class="right" onclick="next(); return false;">Next</a>

    </div>

</div> 
```

jQuery

```
function prev(event){
 event.stopPropagation();
 var newSlide = sliderInt - 1;
 showSlide(newSlide);
} 
```

上一个按钮 .left 仍然导致浏览器跳回页面顶部。我假设 event.stopPropagation 阻止了这种情况的发生。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T09:10:05.063

如果您仍然想知道，`event.preventDefault()`您正在寻找什么，这会阻止浏览器应用默认链接行为。

# javascript - 外部分配值时，更改事件不适用于文本框

> ID：16033953
> 
> 赞同：2
> 
> 时间：2013-04-16T09:55:11.307
> 
> 标签：javascript, jquery, onclick, onchange

我有一个文本框和一个按钮。当我单击按钮时，它会在文本框中设置某些值。每当文本框的值发生更改时，我都想提交页面。

请[在这里查看](http://jsfiddle.net/soumyazyx/GTpRC/4/)

HTML：

```
<input type='text' class="set" size=50>
<input type="button" id="click" value="Click" /> 
```

查询：

```
$(document).ready(function () {
    $("input").change(function () {
        alert("Changed!");
    });
    $("#click").click(function () {
        $('.set').val('Why am I not getting the alert saying  - Changed! ');
    });
}); 
```

我可以在编辑文本框内容时触发更改事件。我知道当文本框失去焦点时会触发更改事件。当我通过按钮单击更改值时，情况并非如此。

我已经看到了以指定时间间隔（例如 0.1 秒）监视文本框以进行更改的答案。

有没有其他方法可以做到这一点。谢谢。

***编辑 - 1*** *在我的原始帖子*中不清楚*。*

我的要求是在输入框内容发生更改时触发事件 - 不一定是通过单击按钮。我添加了一个按钮只是为了解释问题。更改可能是由于任何原因。

所以，代码（在按钮点击功能内）

```
$('.set').val('Hello').change(); 
```

不会解决问题。希望这次我清楚。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:56:53.710

`change()`使用函数设置值后手动触发事件。

```
$(document).ready(function () {
    $("input").change(function () {
        alert("Changed!");
    });
    $("#click").click(function () {
        $('.set').val('Why am I not getting the alert saying  - Changed! ');
        $('.set').change();  //Manual fire of event.
    });
}); 
```

**工作示例** [http://jsfiddle.net/RUdu2/](http://jsfiddle.net/RUdu2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:06:22.367

当您设置或更改文本输入链的值时，您需要这样做`.change()`：

```
 $("#click").click(function () {
    $('.set').val('Why am I not getting the alert saying  - Changed! ').change();
  }); //-------------------------------------this one here-------------^^^^^^^^^ 
```

因此，每当您以这种方式设置输入值时，都会在单击后立即触发更改事件。

* * *

可能这会有所帮助

```
$("input").on('change keyup', function () {
    alert("Changed!");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:57:44.520

以编程方式更改输入的值不会触发其更改事件。您必须在更改其值的同时使用`.trigger('change')`（或仅）自己执行此操作：`.change()`

```
$('.set').val('Why am I not getting the alert saying  - Changed! ').trigger('change'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:05:34.663

```
$(document).ready(function () {
    $("input").change(function () {
        Submitform();//Function for submitting form
    });
    $("#click").click(function () {
        $('.set').val('Why am I not getting the alert saying  - Changed! ');
        Submitform();//Function for submitting form
    });
}); 
```

提交表单的功能

```
function Submitform(){
$("#YourformId").submit();//Submits your form
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:57:56.390

您正在以`.set`编程方式更改 的值，因此该事件不会触发。您必须手动触发它：

```
$('.set').val('Why am I not getting the alert saying  - Changed! ').change(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-29T07:41:54.103

你可以实现

```
$('.element').val('value').change(function(){
      $("#form").submit();
}); 
```

[http://jsfiddle.net/senstar2/CHjL5/5/](http://jsfiddle.net/senstar2/CHjL5/5/)

# php - 网站管理员显示带有 %5C%22 参数的重复网址

> ID：16033954
> 
> 赞同：4
> 
> 时间：2013-04-16T09:55:13.413
> 
> 标签：php, .htaccess, url, duplicates, joomla1.5

根据网站管理员，没有 sef url 的 joomla 网站在大部分 url 之间显示 %5C%22。由于这个网站管理员显示重复的网址

重复网址，如网站管理员中所示

```
 http://www.xyz.com/%5C%22/index.php?option=com_newcar&view=price&Itemid=2
  http://www.xyz.com/%5C%22/index.php?option=com_newcar&view=details&Itemid=2&id=41&vid=39 
```

当点击它们时，url 结果是：-

```
 http://www.xyz.com/%5C"/index.php?option=com_newcar&view=price&Itemid=2
  http://www.xyz.com/%5C"/index.php?option=com_newcar&view=details&Itemid=2&id=41&vid=39 
```

尝试了几种 htaccess 组合

```
 RewriteCond %{REQUEST_URI} ^.*/%5C%22.*$
   RewriteRule .*  index.php     [R=301,L]

   RewriteCond %{REQUEST_URI} ^.*/%5C".*$
   RewriteRule .*  index.php     [R=301,L] 
```

但无法删除

正确的网址是

```
 http://www.xyz.com/index.php?option=com_newcar&view=price&Itemid=2
  http://www.xyz.com/index.php?option=com_newcar&view=details&Itemid=2&id=41&vid=39 
```

有什么建议么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:14:12.017

%5c 代表一个 \ 字符。由于您看到 %5c%22 相当于 \" ，因此如果 " 出现在用双引号引起来的字符串中，它将在 php 程序中转义。我怀疑创建 url 的任何东西都有一个不正确的转义字符（也许字符串是用单引号引起来的）。您需要追踪 php 错误的位置，修复后，这个问题应该会消失。

# ios - 如何从单元格 tableView 转到下一页到 2 页

> ID：16033955
> 
> 赞同：0
> 
> 时间：2013-04-16T09:55:14.743
> 
> 标签：ios, objective-c, uitableview, nsmutablearray

我创建了一个名为 ViewControll 的页面，即 tableview。我从 url 读取 2 组 NSString 并将其存储在 NSMutableArray 中。（名称：文件和文件夹）并且两个数组都存储一个具有名称的数组：（全部）此 NSMutableArray 显示在根页面（ViewController）中

我有两个页面的名称：（TabelViewController & DetailViewController）TabelViewController 用于文件夹数组，DetailViewController 用于文件数组。

如果该单元格来自文件夹数组，我想何时单击单元格，则转到 TableViewController 页面，否则，如果该单元格来自文件数组，则转到 DetailViewController 页面。

这是我的代码，但不起作用！！！： **ViewController.h**

```
@interface ViewController : UITableViewController
{
    NSMutableArray *folder;
    NSMutableArray *file;
    NSMutableArray *all;
    NSInteger folderNumber,fileNumber;
}
@property (nonatomic,strong) IBOutlet UITableView *tables;
@end 
```

**视图控制器.m**

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *Number1 = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.101/mamal/filemanager.php?dir=root&filenum"]];
     fileNumber = [Number1 integerValue];

    NSString *Number2 = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.101/mamal/filemanager.php?dir=root&foldernum"]];
     folderNumber = [Number2 integerValue];

    NSLog(@"file: %d & folder: %d",fileNumber,folderNumber);

    for (int i=0; i < folderNumber; i++)
    {
        NSString *folderName = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/filemanager.php?dir=root&folder=%d&name",i]]];
        if (!folder)
        {
            folder = [NSMutableArray array];
        }
        [folder addObject:folderName];
    }

    for (int j=0; j < fileNumber; j++)
    {
        NSString *fileName = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/mamal/filemanager.php?dir=root&file=%d&name",j]]];
        NSLog(@"%@",fileName);
        if (!file)
        {
            file = [NSMutableArray array];
        }
        [file addObject:fileName];
    } 
    all = [[NSMutableArray alloc]init];
    [all addObjectsFromArray:folder];
    [all addObjectsFromArray:file];    
}
#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return all.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    cell.textLabel.text = [all objectAtIndex:indexPath.row];

    return cell;
}
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%d",indexPath.row+1);

    if (indexPath.row+1 <= folderNumber)
        {

            TableViewController *tab = [[TableViewController alloc]init];
            [self.navigationController pushViewController:tab animated:YES];
        }
    else
    {
        if (indexPath.row+1 > folderNumber)
        {
            DetailViewController *detail = [[DetailViewController alloc]init];
            [self.navigationController pushViewController:detail animated:YES];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:59:52.233

`-initWithNibName:bundle:`是 UIViewController 的指定初始化器。

```
TableViewController *vc = [[TableViewController alloc] initWithNibName:@"TableViewController" bundle:nil]; 
```

对视图控制器使用这种初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:06:44.133

尝试这个

在单个文件夹和文件数组中搜索所选名称

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
  if([folder containsObject:[all objectAtIndex:indexPath.row])
    {
       TableViewController *tableVC = [storyboard instantiateViewControllerWithIdentifier:@"TableViewController"]; 
       [self.navigationController pushViewController:tableVC animated:YES]; 
    }
  else
    {
       DetailViewController *detail = [storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];
       [self.navigationController pushViewController:detail animated:YES]; 
    }
} 
```

# android - 视图分页器内的 MapView

> ID：16033958
> 
> 赞同：2
> 
> 时间：2013-04-16T09:55:20.510
> 
> 标签：android, android-mapview, android-viewpager

我有一个带有一些页面的 viewPager：其中一个是 WebView（下面的代码中的“案例 0”）。问题在于，显示的是一个空白页面，而不是可视化地图。我的实现有什么问题？

编辑：清除代码

我的代码

```
@Override
public Object instantiateItem(View container, int position) {
    Context context = container.getContext();
    prepareViews();

    m_mapView = new MapView(context, null);
    m_mapView.setBuiltInZoomControls(true);
    m_mapView.setMultiTouchControls(false);
    mapController = this.m_mapView.getController();

    LinearLayout layout = new LinearLayout(context);
    switch (position) {
    case 0:
        layout.addView(m_mapView);

       break;
    case 1:
        ...
       break;
    case 2:
        ...
        break;
    }
    ((ViewPager) container).addView(layout, 0); 
    return layout;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:30:35.873

在 ViewPager 的教程中，它的布局被夸大了。

```
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    resId = profileLayouts[position];
    View view = inflater.inflate(resId, null); 
```

在您的情况下，您可以使用布局变量来执行此操作。充气后，您可以对其进行操作，添加地图，然后添加视图。

```
 ((ViewPager) collection).addView(view, 0); 
    return view; 
```

# php - 如何在标题中使用单独的复选框选择/取消选择生成的复选框行

> ID：16033961
> 
> 赞同：0
> 
> 时间：2013-04-16T09:55:24.623
> 
> 标签：php

有人可以帮我写代码吗，下面的代码将在查询后生成行，每行都有自己的复选框...我在标题中也有一个复选框...我想要检查或选择所有行只有标题中的复选框，但同时我仍然应该能够每行选择一个复选框

```
echo "<table width='auto' cellpadding='1px' cellspacing='0px' border=1 align='center'>
<tr>
<th align='center'><input name=checkall type=checkbox value='' /></th>
<th align='center'>Remedy Ticket No.</th>
<th align='center'>Phone/Incident No.</th>
<th align='center'>Category 2</th>
<th align='center'>Category 3</th>
<th align='center'>Status</th>
<th align='center'>Create Date</th>
<th align='center'>Severity</th>
<th align='center'>Ban Type</th>
<th align='center'>Resolved Date</th>
</tr>"; 

while($info = mysql_fetch_array($myData)) 
{ 
echo "<form action='getdata.php' method='post'>";

echo"<tr>"; 
echo "<td align='center'>" . "<input type=checkbox name=checkbox value=" . " </td>";
echo  "<td align='center'>" . $info['ars_no'] . "<input type=hidden name=ars_no value=" . $info['ars_no'] . " </td>";
echo  "<td align='center'>" . $info['phone_number'] . "<input type=hidden name=phone_number value=" . $info['phone_number'] . " size='11' maxlength='11' /> </td>"; 
echo  "<td align='center'>" . $info['category_1'] . "<input type=hidden name=category_1 value=" . $info['category_1'] . "' /> </td>"; 
echo  "<td align='center'>" . $info['category_2'] . "<input type=hidden name=category_2 value=" . $info['category_2'] . "' /> </td>";
echo  "<td align='center'>" . $info['status'] . "<input type=hidden name=status value=" . $info['status'] . "' /> </td>"; 
echo  "<td align='center'>" . $info['create_date'] . "<input type=hidden name=create_date value=" . $info['create_date'] . "' /> </td>";
echo  "<td align='center'>" . $info['trouble_type_priority'] . "<input type=hidden name=trouble_type_priority value=" . $info['trouble_type_priority'] . " size='1' maxlength='1' /> </td>"; 
echo  "<td align='center'>" . $info['ban_type'] . "<input type=hidden name=ban_type value=" . $info['ban_type'] . " size='1' maxlength='1' /> </td>";
echo  "<td align='center'>" . "<input type=text name=resolved_date value=" . $info['resolved_date'] . " size='8' maxlength='8' /> </td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:00:03.307

用这个

```
$('input[name=checkall]').click(function(){
    var checked = $('input[name=checkall]').is(':checked');
    if (checked) {
        $('input:checkbox').attr('checked','checked');
    } else {
        $('input:checkbox').attr('checked','');
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:02:18.223

为此，您将需要使用 javascript。复选框将如下所示：

```
<input name="CheckAll" type="checkbox" id="CheckAll" value="Y"  onClick="ClickCheckAll(this);"> 
```

动态创建的复选框应如下所示：

```
<td align="center"><input type="checkbox" name="chkDel[]"  id="chkDel<?=$i;?>"  value="<?=$info["ars_no"];?>"></td> 
```

然后使用这个javascript：

```
<script language="JavaScript">  
function ClickCheckAll(vol)  
{  

var i=1;  
for(i=1;i<=document.frmMain.hdnCount.value;i++)  
{  
if(vol.checked == true)  
{  
eval("document.frmMain.chkDel"+i+".checked=true");  
}  
else  
{  
eval("document.frmMain.chkDel"+i+".checked=false");  
}  
}  
}  
</script> 
```

您还必须将您的 while 循环更改为：

```
<?php 
$i = 0;  
while($objResult = mysql_fetch_array($objQuery))  
{  
$i++;  
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:03:54.130

您可以为此使用**[jQuery 。](http://jquery.com/)**

在这里，您必须检查两个条件；当检查主复选框以及所有子检查框时检查时。因此，当检查主复选框时，应检查所有复选框。同样，当所有子复选框都被选中时，主复选框也应该被选中。你必须照顾这两种情况。

有两种方法：

**方法1（使用复选框名称）**

```
jQuery(document).ready(function () {
  jQuery("input[name=checkall]").click(function () {
    jQuery('input[name=checkall]').attr('checked', this.checked);
    jQuery('input[name=checkbox]').attr('checked', this.checked);
  });

  // if all checkbox are selected, check the selectall checkbox
  // and viceversa
  jQuery("input[name=checkbox]").click(function(){

    if(jQuery("input[name=checkbox]").length == jQuery("input[name=checkbox]:checked").length) {
        jQuery("input[name=checkall]").attr("checked", "checked");
    } else {
        jQuery("input[name=checkall]").removeAttr("checked");
    }
  });
}); 
```

**方法2（使用复选框类）**

您必须为主标题复选框添加一个类，并为所有其他复选框添加另一个类。所以你的脚本将是：

```
jQuery(".selectall").click(function () {
    jQuery('.selectall').attr('checked', this.checked);
    jQuery('.child_checkbox').attr('checked', this.checked);
});

// if all checkbox are selected, check the selectall checkbox
// and viceversa
jQuery(".child_checkbox").click(function(){

    if(jQuery(".child_checkbox").length == jQuery(".child_checkbox:checked").length) {
        jQuery(".selectall").attr("checked", "checked");
    } else {
        jQuery(".selectall").removeAttr("checked");
    }
}); 
```

现在将类 selectall 添加到您的主复选框，并将类 child_checkbox 添加到循环中的所有子复选框。所以你的 HTML 将是

```
echo "<table width='auto' cellpadding='1px' cellspacing='0px' border=1 align='center'>
<tr>
<th align='center'><input name='checkall' type='checkbox' value='' class='selectall'/></th>
<th align='center'>Remedy Ticket No.</th>
<th align='center'>Phone/Incident No.</th>
<th align='center'>Category 2</th>
<th align='center'>Category 3</th>
<th align='center'>Status</th>
<th align='center'>Create Date</th>
<th align='center'>Severity</th>
<th align='center'>Ban Type</th>
<th align='center'>Resolved Date</th>
</tr>"; 

while($info = mysql_fetch_array($myData)) 
{ 
echo "<form action='getdata.php' method='post'>";

    echo"<tr>"; 
    echo "<td align='center'>" . "<input type='checkbox' name='checkbox' value='' class='child_checkbox'/></td>";
    echo  "<td align='center'>" . $info['ars_no'] . "<input type=hidden name=ars_no value=" . $info['ars_no'] . " </td>";
    echo  "<td align='center'>" . $info['phone_number'] . "<input type=hidden name=phone_number value=" . $info['phone_number'] . " size='11' maxlength='11' /> </td>"; 
    echo  "<td align='center'>" . $info['category_1'] . "<input type=hidden name=category_1 value=" . $info['category_1'] . "' /> </td>"; 
    echo  "<td align='center'>" . $info['category_2'] . "<input type=hidden name=category_2 value=" . $info['category_2'] . "' /> </td>";
    echo  "<td align='center'>" . $info['status'] . "<input type=hidden name=status value=" . $info['status'] . "' /> </td>"; 
    echo  "<td align='center'>" . $info['create_date'] . "<input type=hidden name=create_date value=" . $info['create_date'] . "' /> </td>";
    echo  "<td align='center'>" . $info['trouble_type_priority'] . "<input type=hidden name=trouble_type_priority value=" . $info['trouble_type_priority'] . " size='1' maxlength='1' /> </td>"; 
    echo  "<td align='center'>" . $info['ban_type'] . "<input type=hidden name=ban_type value=" . $info['ban_type'] . " size='1' maxlength='1' /> </td>";
    echo "</tr>"; 
} 
```

**更新 ：**

我认为您使用的是最新版本的 jQuery，即**[jQuery 1.9.1](http://code.jquery.com/jquery-1.9.1.min.js)**。所以脚本中的方法发生了变化。而不是`attr` 你必须使用`prop`. attr 方法已被折旧。您可以查看此链接以获取有关该**[jQuery attr-vs-prop的更多信息](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop)**

因此，您的方法 1 脚本**（使用复选框名称）**应更改为：

```
jQuery(document).ready(function () {
  jQuery("input[name=checkall]").click(function () {
    jQuery('input[name=checkall]').prop('checked', this.checked);
    jQuery('input[name=checkbox]').prop('checked', this.checked);
  });

  // if all checkbox are selected, check the selectall checkbox
  // and viceversa
  jQuery("input[name=checkbox]").click(function(){

    if(jQuery("input[name=checkbox]").length == jQuery("input[name=checkbox]:checked").length) {
        jQuery("input[name=checkall]").prop("checked", true);
    } else {
        jQuery("input[name=checkall]").prop("checked", false);
    }
  });
}); 
```

如果您使用的是类**方法 2（使用复选框类）**，那么它应该是：

```
jQuery(document).ready(function () {
    jQuery(".selectall").click(function () {
        jQuery('.selectall').prop('checked', this.checked);
        jQuery('.child_checkbox').prop('checked', this.checked);
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    jQuery(".child_checkbox").click(function(){

        if(jQuery(".child_checkbox").length == jQuery(".child_checkbox:checked").length) {
            jQuery(".selectall").prop("checked", true);
        } else {
            jQuery(".selectall").prop("checked", false);
        }
    });
}); 
```

另外请正确格式化您的 HTML 似乎缺少输入属性值的引号。即使它不严格但最好遵循。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T10:06:02.193

**尝试使用 jQuery。**

*   将 id 添加到标题复选框： `<input id="checkall" type="checkbox" value='' />`
*   将类添加到其他复选框： `<input class="chkBox" type="checkbox" value='' />`
*   添加指向 jQuery 库的链接

    `<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

*   将 JS 片段添加到您的页面

    ```
    <script language="Javascript">
    $(function () {
        $('#checkall').on('click', function () {
            $('.chkBox').attr('checked', true);
        });
    });
    </script> 
    ```

# pentaho - 水壶里的勺子不能在窗户里跑

> ID：16033964
> 
> 赞同：0
> 
> 时间：2013-04-16T09:55:26.403
> 
> 标签：pentaho, kettle

我正在尝试运行水壶。我运行spoon.bat。它正确地找到环境变量并启动launcher.jar。启动器屏幕显示几秒钟后它消失并且没有任何反应。

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T20:08:09.317

将此添加到 Spoon.bat 文件中：

```
"-Duser.region=US" "-Duser.language=en" 
```

后：

```
"-XX:MaxPermSize=256m" 
```

可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T05:43:55.537

检查spoon.bat。确保是否为 xmlx 变量分配了足够的内存（至少 512 mb）。

# jsf - 阻止登录用户查看页面，但允许匿名用户

> ID：16033971
> 
> 赞同：0
> 
> 时间：2013-04-16T09:55:39.960
> 
> 标签：jsf, jakarta-ee

使用 Java-EE 6、JSF2、Glassfish 3.1。

将用户重定向到某些页面的最佳方法是什么，例如当他们已经登录时的“登录”页面？

我将在我不希望登录用户访问的每个页面中使用以下内容：

```
<f:metadata>
    <f:event type="preRenderView" listener="#{aBean.checkIfLoggedInAndRedirect()}" />
</f:metadata> 
```

有没有更优雅的方法？

类似于匿名用户的安全约束，因此没有其他角色（即登录用户）可以查看这些页面。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T02:13:31.697

没有其他更好的建议，我在不想让登录用户看到的每个页面上都使用了以下内容。不是最可靠的实现（因为页面仍然存在）。

```
 <c:if test="#{request.remoteUser != null}">
            <meta http-equiv="refresh" content="0; url=/home" /> 
        </c:if> 
```

# c++ - 如何根据模板类中的 T 初始化类型的静态 const 成员？

> ID：16033978
> 
> 赞同：3
> 
> 时间：2013-04-16T09:56:08.847
> 
> 标签：c++, templates

给定以下课程

```
template <class T>
class A {
    static const B<T> member;
}; 
```

如何分别`member`为每个类实例化`A<T>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T10:00:28.400

简单的。与任何其他静态非整数类型一样。

```
template <class T>
class A {
    static const B<T> member;
};

template <class T>
const B<T> A<T>::member/*(optional-args)*/; 
```

为了对不同类型的成员进行不同的分配`T`，您必须使用[模板特化](http://msdn.microsoft.com/en-us/library/c401y1kb(v=vs.80).aspx)。

要启动模板特化，您必须使用以下语法：

```
template<>
// ... explicit definition 
```

显式定义的语法与以下语法基本相同：

```
template <class T>
const B<T> A<T>::member/*(optional-args)*/; 
```

除了，而不是`template <class T>`，您使用`template<>`，并且在哪里`T`，您放置了实际类型。

例如：

```
template<>
const B<type> A<type>::member(args); 
```

**注意：**如果您希望在这种情况下使用模板专业化调用默认构造函数，请参阅下面的编辑。

您可以替换`type`任何您想要的类型。有了这个，您可以为每种可能的类型提供不同的参数。尽管如果您过于专业，您应该考虑您的设计是否真的适合使用模板。

[在这里](http://ideone.com/GmGlbv)它在行动（在线），随意克隆和玩弄它。

我想我会提到声明必须是模板类所在的位置。换句话说，如果在头文件中声明了，则还必须在头文件中`A`声明分配。`member`您也可以在声明模板类的头文件中使用内联文件 (.inl) 和`#include`.inl 文件。

# 编辑：

似乎在 C++98 中，如果引用成员变量，则以下调用默认构造函数的语法在 GCC 或 clang 下无法编译：

```
 template <>
 const B<type> A<type>::member/*()*/; 
```

其中 type 是任何类型。

但是，以下内容会：

```
 template <class T>
 const B<T> A<T>::member/*()*/; 
```

我不确定这是一个错误，还是语法不正确。我建议改为执行以下操作：

```
 template <>
 const B<type> A<type>::member = B<type>(); 
```

或者，如果您使用的是 C++11，则可以使用大括号来调用默认构造函数，如下所示：

```
 template <>
 const B<type> A<type>::member{}; 
```

如果你使用普通括号，编译器会认为它是`A<type>`类中的一个静态函数，如果你不使用括号，你会得到一个`undefined reference to 'A<type>::member'`链接器错误。你可以[在这里](http://ideone.com/j9xM0N)看到。

[这](https://chat.stackoverflow.com/transcript/message/8882945#8882945)是 Aaron 和我发现这个错误的讨论。

# html - 表格单元格中画布下方的空间

> ID：16033982
> 
> 赞同：1
> 
> 时间：2013-04-16T09:56:13.340
> 
> 标签：html, css, html-table

我有一个问题，其中`100%`表格单元格中具有高度的图像或画布使该单元格增长。

这是整个页面：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <table><tr><td id=t style="width:50px;height:50px;background:green;">
      <canvas id=c style="width:100%;height:100%;margin:0;padding:0"></canvas>
  </td></tr></table>
  <script>
    console.log($('#t').height());
  </script>
</body>
</html> 
```

我希望`50`在控制台中看到，但它会记录`55`.

[这可以在这里测试](http://dystroy.org/stackoverflow/questionSOcell.html)。

这个页面是[我在 jsbin.com 上制作的小提琴](http://jsbin.com/adagit/3/edit)的确切内容，它记录了预期的`50`.

有人可以解释一下到底有什么区别，更重要的是，如何确保我的单元格不会像它那样增长，所以它的高度就像它的内容一样是 50 px，就像 jsbin 中的情况一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:02:11.540

添加您的画布样式

```
<canvas style="display:block"></canvas> 
```

这只是因为画布的默认大小比预期的要大。

# javascript - 我的单选按钮不会响应悬停

> ID：16033983
> 
> 赞同：0
> 
> 时间：2013-04-16T09:56:17.810
> 
> 标签：javascript, css, html

所以我想要得到的是当你悬停单词 span 时，会出现一个图像。但是，当我悬停时，什么也没有发生。我已经尝试了所有技术来做到这一点，但没有成功。

HTML：

```
<div href="javascript:void();" onClick="document.getElementById('avThemes').style.display='block';">
    <input type="radio" name="theme" value="available" id="available" onclick="" /> Available Themes
</div><br />
<div id="avThemes"> 
    <span id="container1"><input type="radio" name="theme" value="greenWaves" id="greenWaves" />
        <a id="gw">Green Waves</a>
    </span>
    <span id="container2"><input type="radio" name="theme" value="purpleLove" id="purpleLove" />Purple Love</span>
</div>
<br />
<img src="images/themes/greenWaves/preview.gif" id="preview1" class="preview" />
<img src="images/themes/purpleLove/preview.gif" id="preview2" class="preview" /> 
```

CSS：

```
#avThemes {
    display: none;
}

#preview1, #preview2 {
    display: none;
    position: absolute;
    top: 500px;
    left: 20px;
}

#container1:hover #preview1{
    display: block;
} 
```

我也尝试过使用它也失败了。有人可以帮我解决这个问题吗？谢谢！

```
$('#container1').mouseover(function() {
        $('#preview1').fadeIn("slow");
      });
$('#container1').mouseleave(function() {
        $('#preview1').fadeOut("slow");
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:27:35.803

尝试这个.....

HTML

```
<input type="radio" name="theme" value="available" id="available" onclick="" /> 
 Available 
 Themes<br />
 <div id="avThemes">
<span id="container1"><input type="radio" name="subtheme" value="greenWaves"
id="greenWaves" /><a id="gw">Green Waves</a></span>
 </div>
<img src="images/themes/greenWaves/preview.gif" id="preview1" class="preview" /> 
```

css

```
 #avThemes {
 display: none;
  }

#preview1, #preview2 {
display:none;
} 
```

javascript

```
 $('#available').click(function() {
  $('#avThemes').show();
  });

 $('#container1').mouseover(function() {
//alert("fdf");
    $('#preview1').fadeIn("slow");
  });
  $('#container1').mouseleave(function() {
    $('#preview1').fadeOut("slow");
  }); 
```

[这里](http://jsfiddle.net/SYw25/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:03:34.023

May try this -

```
 $(document).on("mouseenter","#container1",function(){

                   //Implementation

                   }); 
```

# iphone - 将 .ics 文件导入 iOS 用户日历

> ID：16033991
> 
> 赞同：3
> 
> 时间：2013-04-16T09:56:43.620
> 
> 标签：iphone, ios, objective-c, xcode, ekevent

我正在尝试将 .ics 文件添加到用户日历。我已经尝试使用 UIDocumentInteractionController 来执行此操作，但这仅显示预览窗口而不是添加事件的视图，就像您使用 iPhone 邮件应用程序打开 .ics 文件时所做的那样。这是我的代码：

```
 NSString * filePath =
[[NSBundle mainBundle]
 pathForResource:@"myCal" ofType:@"ics"];

self.documentController =
[UIDocumentInteractionController
 interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];

self.documentController.delegate = self;

[self.documentController presentPreviewAnimated:YES]; 
```

我究竟做错了什么？或者有没有办法以编程方式将 .ics 文件的事件添加到日历中（而不是创建许多 EKEvents）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-13T12:17:43.383

使用[MXLCalendarManager](https://github.com/KiranPanesar/MXLCalendarManager)。一组用于解析和处理`iCalendar`( `.ICS`) 文件的类。`VEVENT`该框架可以解析 iCalendar 文件并将所有对象提取到`MXLCalendarEvent`项目中。然后，通过运行 checkDate: 或 checkDay:month:year，您可以查看事件是否发生在某一天。

# sql - 获取明天的日期

> ID：16033993
> 
> 赞同：26
> 
> 时间：2013-04-16T09:56:44.110
> 
> 标签：sql, sql-server

我试图在 sql 语句中获取明天的日期以进行日期比较，但它不起作用。

下面是我的代码：

```
select * 
from tblcalendarentries
where convert(varchar,tblcalendarentries.[Start Time],101) 
      = convert(varchar, GETDATE() +1, 101) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-16T10:00:40.297

要获取明天的日期，您可以使用以下代码将 1 天添加到当前系统日期：

```
SELECT DATEADD(day, 1, GETDATE()) 
```

> [**获取日期（）**](http://msdn.microsoft.com/en-gb/library/ms188383.aspx)
> 
> 将当前数据库系统时间戳作为日期时间值返回，不带数据库时区偏移量。此值源自运行 SQL Server 实例的计算机的操作系统。
> 
> [**DATEADD（日期部分，数字，日期）**](http://msdn.microsoft.com/en-us/library/ms186819.aspx)
> 
> 返回指定的日期，并将指定的数字间隔（有符号整数）添加到该日期的指定日期部分。

因此，将其添加到`WHERE`子句中的代码中：

```
WHERE CONVERT(VARCHAR, tblcalendarentries.[Start Time], 101) = 
      CONVERT(VARCHAR, DATEADD(DAY, 1, GETDATE()), 101); 
```

首先，`GETDATE()`将以以下格式为您提供今天的日期：

```
2013-04-16 10:10:02.047 
```

然后使用`DATEADD()`, 允许您从指定日期添加（或根据需要减去）日期或时间间隔。所以间隔可以是：年、月、日、小时、分钟等。

**使用时区？**

如果您正在使用跨时区的系统，您可能还需要考虑使用`GETUTCDATE()`：

> [**GETUTCDATE()**](https://docs.microsoft.com/en-us/sql/t-sql/functions/getutcdate-transact-sql)
> 
> 以日期时间值的形式返回当前数据库系统时间戳。不包括数据库时区偏移量。此值表示当前的 UTC 时间（协调世界时）。此值源自运行 SQL Server 实例的计算机的操作系统。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T10:03:38.273

Try the below:

```
SELECT GETDATE() + 1 
```

This adds one day to current date

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T10:02:07.523

Specify size of `varchar` in `convert()`

```
where convert(varchar(11),tblcalendarentries.[Start Time],101) = convert(varchar(11), GETDATE() +1, 101) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T10:21:31.337

我会写：

```
where
  DATEADD(day,DATEDIFF(day,0,tblcalendarentries.[Start Time]),0) =
  DATEADD(day,DATEDIFF(day,0,GETDATE()),1) 
```

这避免了将日期完全转换为字符串，同时也从两个值中删除了时间部分。