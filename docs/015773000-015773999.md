# StackOverflow 问答 15773000-15773999

# php - 用 PHP 翻译一个大网站

> ID：15773002
> 
> 赞同：0
> 
> 时间：2013-04-02T19:44:56.040
> 
> 标签：php, translation, translate

目前，我正在开发一个非常大的项目，有很多页面，我正在考虑用 PHP 翻译所有页面的最佳、最快的方法。我一直在寻找Po Edit，但实际上我不喜欢它。还有其他翻译页面的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:52:23.717

我在我的网站上执行此操作的方式是使用单独的 php“语言”文件和关联数组。

```
<?php
    //english file - lang.english.php
    $language = array(
        "hello" => "hello",
        "today" => "today",
    );
?>

<?php
    //welsh file = lang.welsh.php
    $language = array(
        "hello" => "helo",
        "today" => "heddiw",
    );
?> 
```

然后只需`include()`lang.english.php 或 lang.welsh.php，具体取决于用户选择并`<?php $language["hello"]; ?>`在您的 html 中使用的语言来引用翻译。

此方法假设您知道每种语言的翻译，创建这些语言文件可能需要很长时间，但是一旦您完成了一个，添加更多就变得非常容易。

# c# - 错误处理整个类

> ID：15773004
> 
> 赞同：0
> 
> 时间：2013-04-02T19:45:00.273
> 
> 标签：c#, winforms, error-handling, try-catch

我继承了一个使用某些 3rd 方软件的 Winforms 程序，我看不到它的源代码。当调用此代码中的方法时，它应该连接到软件检查的阅读器。不幸的是，连接似乎不时断开，隐藏的功能导致程序静默失败。有没有一种方法可以处理对此类方法的每次调用，而无需对每个方法都使用 try catch？

该软件看起来像这样，使用了 Reader 类，以便我们可以跨多个模块访问同一个阅读器：

```
public class Reader
{
   private ThirdPartyReader thirdPartyReader;

   public ObjectReport QueryObjects()
   {
      return thirdPartyReader.QueryObjects();
   }

   public Settings QuerySettings()
   {
      return thirdPartyReader.QuerySettings();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:16:54.203

```
 public static class Extensions
    {
        public static TResult Try<TObject, TResult>(this TObject source, Func<TObject, TResult> method, string message = null)
        {
            try
            {
                return method(source);
            }
            catch (Exception e)
            {
                //Some Logging or whatever, optionally using the message parameter;
                return default(TResult);
            }
        }
    } 
```

用法：

```
 var reader = new ThirdPartyReader();
        var objects = reader.Try(x => x.QueryObjects());
        var settings = reader.Try(x => x.QuerySettings(), "Error Reading Settings"); 
```

实际上并没有那么不同，因为您仍然需要执行 reader.Try()，而不仅仅是调用方法，但它是一种非常缩写的语法。

# c# - 使用 BlockingCollection 作为消息队列的响应式框架

> ID：15773008
> 
> 赞同：13
> 
> 时间：2013-04-02T19:45:13.383
> 
> 标签：c#, system.reactive

我最近一直在使用响应式框架做一些工作，到目前为止我一直非常喜欢它。我正在考虑用一些过滤的 IObservable 替换传统的轮询消息队列，以清理我的服务器操作。以旧的方式，我处理进入服务器的消息是这样的：

```
// Start spinning the process message loop
   Task.Factory.StartNew(() =>
   {
       while (true)
       {
           Command command = m_CommandQueue.Take();
           ProcessMessage(command);
       }
   }, TaskCreationOptions.LongRunning); 
```

这导致连续轮询线程将来自客户端的命令委托给 ProcessMessage 方法，在该方法中我有一系列 if/else-if 语句，这些语句确定命令的类型并根据其类型委托工作

我将使用 Reactive 的事件驱动系统替换它，为此我编写了以下代码：

```
 private BlockingCollection<BesiegedMessage> m_MessageQueue = new BlockingCollection<BesiegedMessage>();
 private IObservable<BesiegedMessage> m_MessagePublisher;

 m_MessagePublisher = m_MessageQueue
       .GetConsumingEnumerable()
       .ToObservable(TaskPoolScheduler.Default);

        // All generic Server messages (containing no properties) will be processed here
 IDisposable genericServerMessageSubscriber = m_MessagePublisher
       .Where(message => message is GenericServerMessage)
       .Subscribe(message =>
       {
           // do something with the generic server message here
       } 
```

我的问题是，虽然这可行，但使用阻塞集合作为这样的 IObservable 的支持是一种好习惯吗？我没有看到 Take() 曾经以这种方式调用过，这让我认为消息会堆积在队列中而不会在处理后被删除？

将主题作为后备集合来驱动将接收这些消息的过滤后的 IObservable 会更有效吗？还有什么我在这里遗漏的可能有利于这个系统的架构的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-26T21:30:43.447

这是一个完整的工作示例，在 Visual Studio 2012 下测试。

1.  创建一个新的 C# 控制台应用程序。
2.  右键单击您的项目，选择“管理 NuGet 包”，然后添加“反应式扩展 - 主库”。

添加此 C# 代码：

```
using System;
using System.Collections.Concurrent;
using System.Reactive.Concurrency;
using System.Reactive.Linq;
namespace DemoRX
{
    class Program
    {
        static void Main(string[] args)
        {
            BlockingCollection<string> myQueue = new BlockingCollection<string>();
            {                
                IObservable<string> ob = myQueue.
                  GetConsumingEnumerable().
                  ToObservable(TaskPoolScheduler.Default);

                ob.Subscribe(p =>
                {
                    // This handler will get called whenever 
                    // anything appears on myQueue in the future.
                    Console.Write("Consuming: {0}\n",p);                    
                });
            }
            // Now, adding items to myQueue will trigger the item to be consumed
            // in the predefined handler.
            myQueue.Add("a");
            myQueue.Add("b");
            myQueue.Add("c");           
            Console.Write("[any key to exit]\n");
            Console.ReadKey();
        }
    }
} 
```

您将在控制台上看到：

```
[any key to exit]
Consuming: a
Consuming: b
Consuming: c 
```

使用 RX 的真正好处是您可以使用 LINQ 的全部功能来过滤掉任何不需要的消息。例如，添加一个`.Where`按“a”过滤的子句，然后观察会发生什么：

```
ob.Where(o => (o == "a")).Subscribe(p =>
{
    // This will get called whenever something appears on myQueue.
    Console.Write("Consuming: {0}\n",p);                    
}); 
```

## 哲学笔记

与启动专用线程来轮询队列相比，此方法的优势在于，您不必担心程序退出后正确处理线程。这意味着您不必为 IDisposable 或 CancellationToken 操心（在处理 BlockingCollection 时总是需要这样做，否则您的程序可能会因拒绝死亡的线程而挂起退出）。

相信我，编写完全健壮的代码来处理来自 BlockingCollection 的事件并不像您想象的那么容易。我更喜欢使用 RX 方法，如上所示，因为它更简洁、更健壮、代码更少，并且您可以使用 LINQ 进行过滤。

## 潜伏

我对这种方法的速度感到惊讶。

在我的 Xeon X5650 @ 2.67Ghz 上，处理 1000 万个事件需要 5 秒，每个事件大约需要 0.5 微秒。将项目放入 BlockingCollection 需要 4.5 秒，因此 RX 将它们取出并处理它们的速度几乎与它们进入时一样快。

## 穿线

在我所有的测试中，RX 只启动了一个线程来处理队列中的任务。

这意味着我们有一个非常好的模式：我们可以使用 RX 从多个线程收集传入数据，将它们放入共享队列中，然后在单个线程上处理队列内容（根据定义，这是线程安全的）。

这种模式在处理多线程代码时消除了很多麻烦，通过队列将数据的生产者和消费者解耦，其中生产者可以是多线程的，消费者是单线程的，因此是线程安全的。这就是使 Erlang 如此健壮的概念。有关此模式的更多信息，请参阅[多线程变得非常简单](http://blog.deprogramandis.co.uk/2013/05/29/multi-threading-made-ridiculously-simple/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T22:52:14.627

这是直接从我的后部提取的东西 - 任何真正的解决方案都将在**很大程度上**取决于您的实际使用情况，但这里是“有史以来最便宜的伪消息队列系统”：

想法/动机：

*   故意曝光`IObservable<T>`这样的订阅者可以进行他们想要的任何过滤/交叉订阅
*   整个队列是无类型的，但是`Register`是`Publish`类型安全的（ish）
*   YMMV 及其`Publish()`所在位置 - 尝试移动它
*   通常`Subject`是禁止的，尽管在这种情况下它确实会产生一些简单的代码。
*   也可以将注册“内部化”以实际进行订阅，但随后队列将需要管理`IDisposables`创建的 - 呸，让您的消费者处理它！

编码：

```
public class TheCheapestPubSubEver
{    
    private Subject<object> _inner = new Subject<object>();

    public IObservable<T> Register<T>()
    {
        return _inner.OfType<T>().Publish().RefCount();
    }
    public void Publish<T>(T message)
    {
        _inner.OnNext(message);
    }
} 
```

用法：

```
void Main()
{
    var queue = new TheCheapestPubSubEver();

    var ofString = queue.Register<string>();
    var ofInt = queue.Register<int>();

    using(ofInt.Subscribe(i => Console.WriteLine("An int! {0}", i)))
    using(ofString.Subscribe(s => Console.WriteLine("A string! {0}", s)))
    {
        queue.Publish("Foo");
        queue.Publish(1);
        Console.ReadLine();
    }
} 
```

输出：

```
A string! Foo
An int! 1 
```

**然而**，这并没有严格执行“消费消费者”——特定类型的多个寄存器会导致多个观察者调用——即：

```
var queue = new TheCheapestPubSubEver();

var ofString = queue.Register<string>();
var anotherOfString = queue.Register<string>();
var ofInt = queue.Register<int>();

using(ofInt.Subscribe(i => Console.WriteLine("An int! {0}", i)))
using(ofString.Subscribe(s => Console.WriteLine("A string! {0}", s)))
using(anotherOfString.Subscribe(s => Console.WriteLine("Another string! {0}", s)))

{
    queue.Publish("Foo");
    queue.Publish(1);
    Console.ReadLine();
} 
```

结果是：

```
A string! Foo
Another string! Foo
An int! 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T22:08:23.130

我没有`BlockingCollection`在这种情况下使用过 - 所以我在“推测” - 你应该运行它来批准，反驳。

`BlockingCollection`可能只会使这里的事情更加复杂（或提供很少的帮助）。看看[乔恩的这篇文章](https://stackoverflow.com/questions/7528173/multiple-consumers-and-querying-a-c-sharp-blockingcollection/7528233#7528233)- 只是为了确认。`GetConsumingEnumerable`将为您提供可枚举的“每个订阅者”。最终使他们筋疲力尽 - Rx 需要考虑的事情。

此外，`IEnumerable<>.ToObservable`“源”进一步变平。当它起作用时（你可以查找源代码——我更推荐使用 Rx）——每个订阅者都会创建一个自己的“枚举器”——所以所有人都会得到他们自己版本的提要。我真的不确定，在这样的 Observable 场景中是如何实现的。

无论如何-如果您想提供应用程序范围的消息-IMO，您需要以`Subject`其他形式介绍或声明（例如发布等）。从这个意义上说，我认为 BlockingCollection 不会有任何帮助 - 但同样，最好你自己尝试一下。

## 注意（哲学的）

如果您想组合消息类型，或组合不同的来源 - 例如在更“真实世界”的场景中 - 它会变得更加复杂。我必须说它变得非常有趣。

注意将它们“扎根”到单一共享流中（并避免 Jer 正确建议的内容）。

我建议你不要试图逃避使用`Subject`. 对于你所需要的，那是你的朋友——不管所有与无状态相关的讨论以及主题有多糟糕——你实际上都有一个状态（并且你需要一个“状态”）——Rx 在“事后”开始，所以你无论如何享受它的好处。

我鼓励你这样做，因为我喜欢它的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T11:48:29.213

我的问题是我们已经将一个队列（我通常将它与一个消费者的破坏性读取联系起来，特别是如果您使用 BlockingCollection 时）变成广播（发送给现在正在收听的任何人和每个人）。

这似乎是两个相互矛盾的想法。

我已经看到这样做了，但它随后被丢弃，因为它是“对错误问题的正确解决方案”。

# c# - 将 iTextSharp 文档加载到 MemoryStream 中

> ID：15773012
> 
> 赞同：1
> 
> 时间：2013-04-02T19:45:23.950
> 
> 标签：c#, asp.net, itextsharp

我正在开发一个 ASP.NET 应用程序，我必须根据在页面上动态创建的表格作为电子邮件附件发送 PDF。所以我有一个函数可以将 PDF 创建为 iTextSharp Document 并返回它。如果我只是尝试保存此文档，它可以正常工作，但我在尝试将其作为 Stream 时遇到了麻烦。我已经尝试了几件事，但我总是在某个时候卡住。

我试图序列化它，但似乎 Document 不可序列化。然后我尝试使用 PdfCopy，但我不知道如何具体使用它来解决我的问题。

现在的代码是这样的：

```
//Table,string,string,Stream
//This document returns fine
Document document = Utils.GeneratePDF(table, lastBook, lastDate, Response.OutputStream);

using (MemoryStream ms = new MemoryStream())
{
    PdfCopy copy = new PdfCopy(document, ms);
    //Need something here to copy from one to another! OR to make document as Stream      
    ms.Position = 0;
    //Email, Subject, Stream
    Utils.SendMail(email, lastBook + " - " + lastDate, ms);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:29:52.997

尽量避免传递本地 iTextSharp 对象。传递流、文件或字节。我现在没有 IDE，但您应该可以执行以下操作：

```
byte[] Bytes;
using(MemoryStream ms = new MemoryStream()){
    Utils.GeneratePDF(table, lastBook, lastDate, ms);
    Bytes = ms.ToArray();
} 
```

然后，您可以更改您`Utils.SendMail()`的接受字节数组或[将其包装在另一个流中](https://stackoverflow.com/q/4736155/231316)。

**编辑**

你*也*可以在你的代码中做这样的事情：

```
using(MemoryStream ms = new MemoryStream()){
    Utils.GeneratePDF(table, lastBook, lastDate, ms);
    ms.Position = 0;
    Utils.SendMail(email, lastBook + " - " + lastDate, ms);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:14:04.060

我过去通过执行以下操作来做到这一点：

```
 using (Document doc = new Document())
        {
            MemoryStream msPDFData = new MemoryStream();
            PdfWriter writer = PdfWriter.GetInstance(doc, msPDFData);
            doc.Open();
            doc.Add(new Paragraph("I'm a pdf!");
        } 
```

如果您需要访问原始数据，您也可以这样做

```
byte[] pdfData = msPDFData.ToArray(); 
```

# python - 从 iOS 切换 python 布尔值

> ID：15773013
> 
> 赞同：1
> 
> 时间：2013-04-02T19:45:28.097
> 
> 标签：python, ios, objective-c

我正在关注这个：[http](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server) ://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server教程。

我让这些东西工作得很好，并且在这方面完全是个菜鸟，我一生都无法弄清楚如何将 Python 布尔值添加到教程中提到的“chatserver.py”文档中，粘贴在下面。

我不仅想添加一个，还想用一个按钮从 iPhone 应用程序切换它，然后从服务器请求知道它。

比如，一个切换布尔值的按钮（如何发送切换消息）以及如何询问服务器布尔值的状态是什么

为这个非常开放的问题道歉。

这是当前服务器：（Uber 复杂，哇！）

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class IphoneChat(Protocol):
def connectionMade(self):
    #self.transport.write("""connected""")
    self.factory.clients.append(self)
    print "clients are ", self.factory.clients

def connectionLost(self, reason):
    self.factory.clients.remove(self)

def dataReceived(self, data):
    #print "data is ", data
    a = data.split(':')
    if len(a) > 1:
        command = a[0]
        content = a[1]

        msg = ""
        if command == "iam":
            self.name = content
            msg = self.name + " has joined"

        elif command == "msg":
            msg = self.name + ": " + content

        print msg

        for c in self.factory.clients:
            c.message(msg)

def message(self, message):
    self.transport.write(message + '\n')

factory = Factory()
factory.protocol = IphoneChat
factory.clients = []

reactor.listenTCP(80, factory)
print "Iphone Chat server started"
reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:55:35.510

首先，您必须确定您是在谈论每个连接的单独布尔值，还是每个人的共享值，或者介于两者之间的某个值（例如，每个*用户*都有一个单独的布尔值，一旦他们使用 登录就可以使用`iam`）。

我将为每个连接创建它，我将通过将其存储为`Protocol`实例属性来实现。您可以通过将其存储为模块全局或类属性等来使其全局共享`Protocol`。如果您想要更花哨的东西，您将需要一个全局/类/等。某种映射。

```
def connectionMade(self):
    #self.transport.write("""connected""")
    self.factory.clients.append(self)
    print "clients are ", self.factory.clients
    self.boolean_flag = False

def dataReceived(self, data):
    ...
    if command == "iam":
        self.name = content
        msg = self.name + " has joined"
    elif command = "set":
        self.boolean_flag = True
        msg = self.name + " has set his flag"
    elif command = "clear":
        self.boolean_flag = False
        msg = self.name + " has cleared his flag"
    elif command = "get":
        self.message("Your flag is {}\n".format(self.boolean_flag))
        msg = self.name + " has checked his flag"
    ... 
```

这里的所有都是它的。

* * *

但是，值得注意的是，您的代码一开始根本无法工作。

您已经创建了一个通用的`internet.protocol`. 这意味着`dataReceived`只要有一些字节进来，你就会被调用。这些字节可能是半条消息，也可能是半条消息。所以，我可能会发送给你`"iam:abarnert"`then `"msg:hello"`，但你会看到，比如说，`"ia"`， then `"m:abarnertmsg:h"`，然后`"ello"`。

最糟糕的是，当您在一台计算机或某些类型的 LAN 上测试这一切时，它实际上*似乎*工作 - 一侧的每个发送都被接收到另一侧的接收。但是一旦你把它放到互联网上，它就会完全失败。

这就是为什么 Twisted 提供了一堆稍高级别的协议来做，例如，换行符，或网络字符串，或任何你想要的。但是，如果您只使用最低级别的原始互联网协议，您必须自己处理缓冲和定界以及所有这些事情。你不想这样做。

# rebol - Rebol、扩展和函数命名

> ID：15773026
> 
> 赞同：6
> 
> 时间：2013-04-02T19:46:07.663
> 
> 标签：rebol

我正在为 Rebol 3 (posix/fann/math) 做一些扩展。

为了避免全局命名空间污染，我使用简单的前缀源标识符导出函数。例如：`POSIX-FORK`for[`fork`](http://linux.die.net/man/3/fork)或`POSIX-NANOSLEEP`for [nanosleep](http://linux.die.net/man/3/nanosleep)。

有没有更好的方法或官方 Rebol 命名约定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T00:22:22.597

这是 Rebol 导出的非常标准的命名约定，尽管它们在代码中当然应该是小写的。当指代聊天客户端或网站中无法显示类似`this`. 您通常不会在 Rebol 代码中将任何单词大写，除非它们用于其他用途。

但是，如果您想避免全局命名空间污染，请使用`options: [private]`标头声明您的扩展模块。这将使您的模块的导出仅由模块或脚本导入，这些模块或脚本使用`import`或`needs`标头显式请求它们。这尤其适用于导出低级 C 类 API 的模块或扩展，这些 API 最好仅由实现高级包装器的模块导入。最好记住扩展的模块部分是一个完整的 Rebol 模块，通常最好将高级包装代码放在那里，根本不导出类 C 函数，让它们供内部使用。

另一个技巧是，当您导出常量或枚举值时，最好将它们放在模块中的一个对象中，然后导出该对象。这样您就不会导出到全局命名空间，并且可以保护单词不被修改。

另一个技巧是根本不导出东西并让人们使用该`import`函数导入您的模块。除非您将模块的单词标记为隐藏，否则即使它们没有导出，它们仍然可用。不过在大多数情况下这有点不方便，所以最好使用私有模块。您还可以导出您的高级 API 而*不是*导出您的低级 API，因此如果有人想使用低级 API，则可以导入它。

在这里查看有关如何使用模块和扩展的更全面的答案：[Rebol 模块中的单词是如何绑定的？](https://stackoverflow.com/questions/14420942/how-are-words-bound-within-a-rebol-module/14552755#14552755)

# django - 正确的 QuerySet 查询

> ID：15773029
> 
> 赞同：0
> 
> 时间：2013-04-02T19:46:10.443
> 
> 标签：django, django-models, django-queryset

我在 Django 中有两个模型：其中一个是一堆条目，另一个模型是链接表 - 它基本上将一个条目映射到另一个，所以它有一个 entry_a_id 和一个 entry_b_id 字段......我如何编写一个 QuerySet查询以正确选择第一个条目的相关字段，然后选择第二个？

=== 编辑 ===

这是一个例子：

```
class Nodes(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=45)
    description = models.CharField(max_length=255)

class Links(models.Model):
    id = models.AutoField(primary_key=True)
    node_a_id = models.ForeignKey('Nodes')
    node_b_id = models.ForeignKey('Nodes') 
```

因此，按照上述（或输入），我希望能够根据模型弄清楚如何获得, `node_a_id`, `name`, `description`,`node_b_id`的`name`最终结果。如果您希望我进一步澄清，请告诉我。`description``Links`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:24:15.930

我可能误解了，但我走了。有一个`Link`对象：

```
>>> link = Links.objects.all()[0] 
```

您自动可以访问您的对外关系 (`node_a_id`和`node_b_id`) 的字段。有了它，您可以执行以下操作：

```
>>> link = Links.objects.all()[0]
>>> link.node_a_id.id
1
>>> link.node_a_id.name
'Name for node A'
>>> link.node_a_id.description
'Description for node B'
>>> link.node_b_id.id
2
>>> link.node_b_id.name
'Name for node B'
>>> link.node_b_id.description
'Description for node B' 
```

作为旁注，使用`id`自动递增主键字段是没有意义的，因为您可以免费获得它：[AutoField](https://docs.djangoproject.com/en/dev/ref/models/fields/#autofield)和[Automatic primary key fields](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)

# ruby-on-rails - 获取 FactoryGirl 中的 belongs_to 关联以正常工作

> ID：15773042
> 
> 赞同：1
> 
> 时间：2013-04-02T19:46:34.913
> 
> 标签：ruby-on-rails, ruby, mongoid, factory-bot

我正试图让 FactoryGirl 中的关联发挥作用，而他们只是……没有。我基本上得到了这个：

```
class Foo
  include Mongoid::Document

  belongs_to :bar
end

class Bar
  include Mongoid::Document

  has_many :foos
end

FactoryGirl.define do
  factory :foo, class => Foo do
    bar
  end

  factory :bar, class => Bar do
  end
end 
```

至少文档让我相信……但是在我的测试中，我有

```
a_foo=FactoryGirl.create :foo
a_foo.bar # Hooray! It's an associated object
Foo.where( _id: a_foo._id ).includes( :bar ).first.bar # This is nil! 
```

为什么最后一行的关联值为零？我不需要它，因为正在测试的实际代码做同样的事情，并且它有权期望它工作......我错过了为什么这不能正常工作？也许与急切加载有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:00:15.990

您的代码实际上适用于 FactoryGirl 4.2.0、Mongoid 3.0.9。但是当我在禁用 identitymap 的情况下运行 mongoid 时遇到了类似的问题（这是默认行为）。如果没有 identitymap，您可以在数据库中有两个不同的 ruby​​ 对象表示同一个文档，彼此不同步。因此，例如，如果您`autosave`关闭，这可能会导致您看到的问题。

尝试自己将您的简化代码粘贴到 rails 控制台——如果它有效，那么您可能在配对真实代码时改变了一些重要的东西。（很抱歉指出了明显的问题，但是您的工厂代码中有语法错误这一事实让我认为您实际上并没有测试您的示例代码。）

# python - 删除matplotlib中子图上的重叠刻度线

> ID：15773049
> 
> 赞同：10
> 
> 时间：2013-04-02T19:47:16.377
> 
> 标签：python, matplotlib, plot

我使用以下函数创建了以下一组子图：

```
def create31fig(size,xlabel,ylabel,title=None):
    fig = plt.figure(figsize=(size,size))
    ax1 = fig.add_subplot(311)
    ax2 = fig.add_subplot(312)
    ax3 = fig.add_subplot(313)
    plt.subplots_adjust(hspace=0.001)
    plt.subplots_adjust(wspace=0.001)
    ax1.set_xticklabels([])
    ax2.set_xticklabels([])
    xticklabels = ax1.get_xticklabels()+ ax2.get_xticklabels()
    plt.setp(xticklabels, visible=False)
    ax1.set_title(title)
    ax2.set_ylabel(ylabel)
    ax3.set_xlabel(xlabel)
    return ax1,ax2,ax3 
```

如何确保 subplot(312) 的顶部和底部不与其邻居重叠？谢谢。

![子情节](https://i.stack.imgur.com/pjAPs.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T20:09:17.063

在ticker 模块中有一个名为[MaxNLocator](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.MaxNLocator)的类，它可以采用修剪kwarg。
使用它，您可以删除第二个和第三个子图的最上面的刻度：

```
import matplotlib.pyplot as plt
from matplotlib.ticker import MaxNLocator # added 

def create31fig(size,xlabel,ylabel,title=None):
    fig = plt.figure(figsize=(size,size))
    ax1 = fig.add_subplot(311)
    ax2 = fig.add_subplot(312)
    ax3 = fig.add_subplot(313)
    plt.subplots_adjust(hspace=0.001)
    plt.subplots_adjust(wspace=0.001)
    ax1.set_xticklabels([])
    ax2.set_xticklabels([])
    xticklabels = ax1.get_xticklabels() + ax2.get_xticklabels()
    plt.setp(xticklabels, visible=False)
    ax1.set_title(title)
    nbins = len(ax1.get_xticklabels()) # added 
    ax2.yaxis.set_major_locator(MaxNLocator(nbins=nbins, prune='upper')) # added 
    ax2.set_ylabel(ylabel)
    ax3.yaxis.set_major_locator(MaxNLocator(nbins=nbins,prune='upper')) # added 
    ax3.set_xlabel(xlabel)
    return ax1,ax2,ax3

create31fig(5,'xlabel','ylabel',title='test') 
```

进行这些调整后的示例图像：

![在此处输入图像描述](https://i.stack.imgur.com/Y05gt.png)

旁白：如果最低子图中重叠的 x 和 y 标签是一个问题，请考虑“修剪”其中之一。

# c++ - 递归排列、Ellis Horowitz 算法和数据结构混淆。

> ID：15773051
> 
> 赞同：1
> 
> 时间：2013-04-02T19:47:18.473
> 
> 标签：c++, algorithm, data-structures, recursion, non-recursive

我是大学第一年的初学者程序员。我的导师要求我们对递归算法进行一些研究，并使其不递归。不管我尝试了多少，这似乎是不可能的。问题是

> A 是一个字符串（例如 A = "hello"），作为抽象的交换，将第 k 个字符与 A 的第 i 个字符交换，例如 CALL 交换（"hello", 2, 3) 将更改为 "你好”到“hlelo”）。

这个想法是打印出所有可能的排列 C++ 中的版本读取

```
void perm(char*a, const int k, const int n)
{
  if(k==n)
  {
    cout << a;
  }
  else
  {
    for (i=k;i<=n;i++)
    {
      interchange(a, k, i);
      perm(a, k+1, n)
    }
  }
 } 
```

我的导师更喜欢使用一种叫做 ADL 的语言，这种语言似乎只出现在 Horowitz 的《算法和数据结构》一书中。他在 ADL 中提出了这个问题，所以我也会添加该代码，它很容易理解。

```
proc perm(IN a, IN k, IN n)
  if k=n then
    print(a)
  else
    {
     for i <- k to n do
       call interchange(a,k,i)
       call perm( a, k+1, n)
     end
    }
end 
```

感谢任何可以提供帮助的人。马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:53:02.567

递归算法只是一种*使用堆栈*的算法。

递归允许您将[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)用作数据堆栈。

任何采用这种形式的递归函数：

```
void perm(char*a, const int k, const int n)
{
   // check if your code should return

   // make a recursive call with new data
} 
```

可以改成这样：

```
void perm(char*a, const int k, const int n)
{
   // Create a stack, push (a,k,n)

   while ( /* stack isn't empty */ )
   {
       // check if stack should be *popped* (instead of returning)

       // Put new data on the stack (instead of recursing)
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:52:06.310

这是一个提示，无需为您做功课。当你沿着字符串走，查看第 i 个字符时，你处于三种可能的状态之一：

*   我 == k
*   我 == n
*   别的

在这三种情况下，您分别打印什么？

# alfresco - 如何在freemarker中读取复选框/单选值？

> ID：15773052
> 
> 赞同：2
> 
> 时间：2013-04-02T19:47:19.283
> 
> 标签：alfresco, freemarker, alfresco-share

我正在露天使用共享表单，并尝试从表单中读取勾选的复选框和选中的单选按钮的值。我使用这些输入控件扩展了用户创建和用户配置文件表单，但到目前为止，我未能成功读取所述控件的文本值。下面是一段代码：

```
 <div class="row">
    <span class="label"><input id="${el}-input-spokenEnglish" type="checkbox" name="spokenLanguages" value="${msg("label.anglais"!"")?html}" />&nbsp;${msg("label.anglais")}</span>
    <span class="label"><input id="${el}-input-spokenSpanish" type="checkbox" name="spokenLanguages" value="${msg("label.espagnol"!"")?html}" />&nbsp;${msg("label.espagnol")}</span>
    <span class="label"><input id="${el}-input-spokenGerman" type="checkbox" name="spokenLanguages" value="${msg("label.allemand"!"")?html}" />&nbsp;${msg("label.allemand")}</span>
    <span class="label"><input id="${el}-input-spokenChinese" type="checkbox" name="spokenLanguages" value="${msg("label.chinois"!"")?html}" />&nbsp;${msg("label.chinois")}</span>
    <br/>
        <span class="label">${msg("label.otherLanguages")} : </span>
        <span class="input"><input id="${el}-input-spokenLanguages" type="text" size="30" maxlength="256" value="" <@immutablefield field="spokenLanugages" /> /> </span>

 </div> 
```

不幸的是，到目前为止，我从返回的任何东西中一无所获，并且很高兴对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:37:55.687

如果您查看**userprofile.get.html.ftl**，您将看到以下代码段：

```
 <script type="text/javascript">//<![CDATA[
   var userProfile = new Alfresco.UserProfile("${args.htmlid}").setOptions(
   { 
```

这意味着它触发了来自 Alfresco 的客户端 JS 文件，在本例中为**profile.js**（参见头文件）。所以仅仅添加一些输入字段是不够的。您需要扩展客户端 JS 文件。

在 onEditProfile 函数中，它获取 Dom 元素。

但这只是为了显示“保存后”的实际字段。

在 profile.js 中，您将看到：`form.setSubmitAsJSON(true);`您有一个 json 对象，您可以从中获取字段。

在**userprofile.post.json.ftl**中，它在 user.properties 上做了一个循环：

```
for (var i=0; i<names.length(); i++)
      {
         var field = names.get(i);

         // look and set simple text input values
         var index = field.indexOf("-input-");
         if (index != -1)
         {
            user.properties[field.substring(index + 7)] = json.get(field);
         }
         // apply person description content field
         else if (field.indexOf("-text-biography") != -1)
         {
            user.properties["persondescription"] = json.get(field);
         }
      }
      user.save(); 
```

这可能意味着您尚未使用新属性扩展**cm:person对象的内容模型。**

# eclipse - 当文件移动到其他位置时如何在eclipse中自动更新资源链接

> ID：15773053
> 
> 赞同：0
> 
> 时间：2013-04-02T19:47:22.337
> 
> 标签：eclipse, jsp

我已经使用文件->导入->常规->存档文件在eclipse中导入了网站模板。模板包含html文件以及包含CSS Javascript等的资源文件夹。我想将html文件放在用户文件夹中，资源文件放在user_resource文件夹中. 但我得到的问题是eclipse不会自动将html文件中的链接更新到资源文件。我是否手动更新HTML文件中的所有链接，或者当文件移动到其他位置时有没有像dreamweaver这样的方法来更新链接？例如我有链接

```
<link href="user/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" /> 
```

它应该自动更新为

```
<link href="../user_resource/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" /> 
```

当资产文件夹移动到 user_resource 文件夹时。

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:38:03.490

我没有太多使用dreamweaver。但我发现如果有人知道如何使用 Dreamweaver，这些链接可能有助于解决问题。试试看...

[http://www.whoi.edu/services/stad/classes/DreamWeaver/movingfilesfolders.html](http://www.whoi.edu/services/stad/classes/DreamWeaver/movingfilesfolders.html)

[http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c3ea.html](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7c3ea.html)

# ios - 在 100% 高度的 div 中垂直居中 div 在 Mobile Safari 上不起作用

> ID：15773063
> 
> 赞同：0
> 
> 时间：2013-04-02T19:47:51.503
> 
> 标签：ios, css, mobile-safari, sass

我正在尝试将一个 div 放在另一个 div 中，该 div 延伸到屏幕的整个高度并将其垂直居中，如下所示：

[预览 http://f.cl.ly/items/1a3L46453f0D271V1O2w/Schermafbeelding%202013-04-02%20om%2021.37.25.png](http://f.cl.ly/items/1a3L46453f0D271V1O2w/Schermafbeelding%202013-04-02%20om%2021.37.25.png)

大图是全屏div，白条是垂直居中的div。下面的解决方案在我尝试过的所有可能的计算机和浏览器上都能正常工作……除了 Mobile Safari。出于某种原因，Mobile Safari（至少在 iPad 上）决定将嵌套 div 放在页面下方 50% 而不是其父 div 下方 50%。

HTML：

```
<div class="band full">
    <div class="band">
        *content*
    </div>
</div> 
```

SCSS（删除了不相关的标签）：

```
div.band{ //General styling for div.band elements
    margin: 0px;
    padding: 80px 0px;
    width: 100%;

    &.full{ //Style the parent div
        height: 100%;
    }

    div.band{ //Style the nested div
        position: relative;
        top: 50%;
        margin-top: -200px;
        padding: 20px 0px;
        height: 400px;
    }
} 
```

我有一种唠叨的感觉，这是 Mobile Safari 中的一个错误。我当然希望不是。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:08:12.903

看一下这个。未在移动设备上测试，但应该可以工作

HTML

```
<div class="panel">
 <div class="panelInner">
  <div class="box">
   <div class="boxInner">hi there</div>
  </div>
 </div>
</div> 
```

CSS

```
html {
min-height: 100%;
height: 100%;
}

body {
height: 100%;
margin: 0;
}

.panelInner {
padding: 40px;
text-align: center;
display: table-cell;
vertical-align: middle;
}

.box {
height: 200px;
background: #999;
display: table;
width: 100%;
}

.boxInner {
display: table-cell;
vertical-align: middle;
} 
```

这是一个[小提琴](http://jsfiddle.net/cardeo/XuHQH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:28:09.567

我确实尽了最大努力以干净的方式解决了这个问题，但是我进行了更多测试，这显然是 Mobile Safari 渲染引擎中的一个错误。我决定用一个公认的肮脏的 jQuery hack 来解决它，但至少它现在可以工作了。

我的页面有一张这样的全屏照片，顶部中间有一条带，页面底部有另一张。最上面的问题很容易解决：只需使用绝对定位而不是相对定位（无论如何都是相对于页面顶部的定位）。另一方面，底部带的“顶部”属性必须在将其定位设置为绝对位置后根据页面的高度重新计算。我通过将“top”属性设置为此解决了这个问题：从页面顶部到底部带的垂直偏移量+（全屏带的高度以/2为中心）。

或以代码形式：

```
$(window).load(function() { //Wait until the page is fully loaded
    if (navigator.userAgent.match(/(iPod|iPhone|iPad)/)) { //If the user is using an iDevice
        $('div.band#top div.band').css('position', 'absolute');
        $('div.band#bottom div.band').css('position', 'absolute');
        $('div.band#bottom div.band').css('top', $('div.band#bottom').offset().top + ($('div.band#bottom').height() / 2));
    }
}); 
```

# iphone - 在 iPhone/Cocos2d 上调用下一个函数之前，如何等到图像渲染到屏幕上？

> ID：15773068
> 
> 赞同：0
> 
> 时间：2013-04-02T19:48:22.003
> 
> 标签：iphone, objective-c, cocos2d-iphone

在继续之前是否要等到 CCSprite 实际呈现到屏幕上？或者可能是一个带有回调的方法来检查精灵何时完成渲染到屏幕？

我不能使用动作序列，因为在执行此任务时所有动作都被暂停。

* * *

我解释的不是很清楚。我会尝试更好一点。我将图像添加到图层，然后调用方法。但是在图像加载并呈现到屏幕之前，该方法已经被调用并完成。

```
CCSprite* aSprite = [CCSprite spriteWithFile:@"anImage.png"];  
[aLayer addChild:aSprite z:1];

//need application to hold here till image is rendered;

[self aMethod]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:56:16.557

尝试 ：

```
-(void) draw {
    [super draw];
    [self doWhateverButDoItQuick];
} 
```

对于该类的每个实例，这将在特定绘制感兴趣的精灵之后调用。无论您在那里做什么，如果花费太多时间，最终都会降低您的 FPS。假设您当前以 60 FPS 运行，并且您的完整周期需要 12 毫秒，那么您有大约 4 毫秒的时间来完成该任务而不影响 FPS。如果您过火，您的 FPS 将立即降至 30。

# android - 由于配置错误，Android 应用无法在新版本的 Play 商店上更新

> ID：15773071
> 
> 赞同：0
> 
> 时间：2013-04-02T19:48:38.350
> 
> 标签：android, google-play, google-tv, android-market-filtering

为文字墙道歉。[如本问题](https://stackoverflow.com/questions/12467464/multiple-apks-single-listing-of-app-for-google-tv-and-android-phone-tablet-on-p)所述，我的公司在 Play 商店中对多个 apk 使用单个列表。用于这两个 apk 的包名称是 com.company.xyz。我们的 GTV 应用的当前版本是 1203010007，手机/平板应用的当前版本是 1714010016。

我们要发布 Android 手机应用程序的更新 (1714010017)。我可以在旧版本的 Play 商店上上传手机 apk，但是当我尝试在新版本的 Play 商店上提交相同的内容时，它会引发以下错误。当我切换到新版本的 Play 商店时，这些错误已经出现了一段时间。

*由于以下原因，无法发布此配置：*

所有可能收到版本 1714010016 的设备都将收到版本 1714010017。API 级别在 12+ 范围内的设备有资格收到版本 1203010007，该版本针对更高的 API 级别进行了优化，但实际上收到版本 1714010017，因为它具有更高的版本代码。这会发生在

*   包含 [normal, large, xlarge] 和
*   包含任何 [armeabi] 和
*   包含所有 [android.hardware.screen.LANDSCAPE、android.hardware.TOUCHSCREEN、com.google.android.TV] 的功能。

从 API 级别 8-11 升级到 API 级别 12+ 的设备将有资格接收版本 1203010007，该版本针对更高的 API 级别进行了优化，但实际上会收到版本 1714010017，因为它具有更高的版本代码。这会发生在

*   包含 [normal, large, xlarge] 和
*   包含任何 [armeabi] 和
*   包含所有 [android.hardware.screen.LANDSCAPE、android.hardware.TOUCHSCREEN、com.google.android.TV] 的功能。

API 级别在 12+ 范围内的设备有资格接收版本 1203010007，该版本针对更高的 API 级别进行了优化，但实际上接收的是版本 1714010016，因为它具有更高的版本代码。这会发生在

*   包含 [normal, large, xlarge] 和
*   包含任何 [armeabi] 和
*   包含所有 [android.hardware.screen.LANDSCAPE、android.hardware.TOUCHSCREEN、com.google.android.TV] 的功能。

从 API 级别 8-11 升级到 API 级别 12+ 的设备将有资格接收版本 1203010007，该版本针对更高的 API 级别进行了优化，但实际上会收到版本 1714010016，因为它具有更高的版本代码。这会发生在

*   包含 [normal, large, xlarge] 和
*   包含任何 [armeabi] 和
*   包含所有 [android.hardware.screen.LANDSCAPE、android.hardware.TOUCHSCREEN、com.google.android.TV] 的功能。

**TL;DR：**由于应用版本代码或 API 级别的冲突，某些设备有资格收到错误的 apk 列表。

有关如何解决此问题的任何建议？

新版 Google Play 商店于 2013 年 4 月 15 日生效，此后我无法再使用旧版本上传更新。此时为 GTV 和 Android 手机/平板电脑单独列出是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:04:47.660

如果您参考[http://developer.android.com/google/play/publishing/multiple-apks.html#SupportedFilters](http://developer.android.com/google/play/publishing/multiple-apks.html#SupportedFilters)，您将看到：

“需要更高 API 级别的 APK 必须有更高的版本代码。”

因此，这意味着您需要相应地更改版本发布策略。

# php - mysql_fetch_row 获取列而不是行

> ID：15773076
> 
> 赞同：0
> 
> 时间：2013-04-02T19:49:07.277
> 
> 标签：php, mysql

我正在尝试使用 mysql_fetch_row 从数据库中获取各个行，但是当我回显它时，它将列作为行例如 $row_columns[0] 是第 1 列，$row_columns[1] 是第 2 列，请允许我显示你我正在使用的代码。

```
mysql_select_db($database_Takeaway, $Takeaway);
    $query_columns = "SELECT * FROM `rest_site` WHERE linkid = '$rest_id'";
    $columns = mysql_query($query_columns, $Takeaway) or die(mysql_error());
    $row_columns = mysql_fetch_row($columns); 
```

并显示它。

```
echo($row_columns[0]) 
```

我试过

> print_r($row_columns)

这就是反馈以下内容

> 数组 ( [0] => 1001 [1] => [2] => [3] => 0 [4] => [5] => 1837 [6] => 测试标题 [7] => 测试文本 [ 8] => [9] => [10] => )

以上是所有 1 行数据，而我需要它是单独的列，所以我可以执行以下操作。

```
echo $row_columns[0]['name']
echo $row_columns[0]['postcode'] 
```

我已经对此进行了大量搜索，但似乎找不到任何有帮助的东西，我检查了 php.net 以及一般的谷歌搜索，当然还有 Stack Overflow，所以非常感谢你在这方面的帮助。

我希望我已经把问题说清楚了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:57:49.430

您应该使用`mysql_fetch_assoc()`列名来获取结果。

此外，如果您不将其放入循环中，您将始终只收到第一行查询。更好的用法是：

```
mysql_select_db($database_Takeaway, $Takeaway);
$query_columns = "SELECT * FROM `rest_site` WHERE linkid = '$rest_id'";
$columns = mysql_query($query_columns, $Takeaway) or die(mysql_error());
while ($row_columns = mysql_fetch_assoc($columns)) {
    echo $row_columns["name"];  
    echo $row_columns["postcode"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:56:07.527

`mysql_fetch_row`只是一个枚举数组。

您正在寻找`mysql_fetch_array`关联和枚举数组的结果，以便您可以使用字符串文字数组索引。

您还应该查看 mysqli 或 PDO，因为从 PHP 5.5 开始不推荐使用 mysql。

链接：[mysql_fetch_array 文档](http://www.php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T19:52:54.917

`SELECT *`没有正确的陈述，您最好列出您需要的所有列。使它们明确也有助于我们回答您的问题。

另外，请始终对查询的输入进行转义！`mysql_real_escape_string()`

作为猜测，我认为您错过了获取查询结果始终必须逐行获取的事实。你知道你需要一个循环吗？

此外，如果您想拥有列名，请使用`mysql_fetch_assoc()`.

# sql - 通过触发器从 pl/sql 中的多个表中更新记录

> ID：15773080
> 
> 赞同：0
> 
> 时间：2013-04-02T19:49:19.057
> 
> 标签：sql, plsql

我正在寻求有关触发器的帮助。

我有如下表格。

```
CREATE TABLE Autorzy(Id_autora numeric(5), Imie varchar(15), Nazwisko varchar(20), constraint auth_pk PRIMARY KEY (Id_autora));
CREATE TABLE Ksiazki(ISBN numeric(10) PRIMARY KEY, Wydawca varchar(30), Tytul varchar(70), Rok numeric(4));
CREATE TABLE Autorstwa (ISBN numeric(10) references Ksiazki, Id_autora numeric(5) references Autorzy);
CREATE TABLE Tematy (Nrtematu numeric(4) PRIMARY KEY, Nazwa varchar(20), Wyjasnienie varchar (100));
CREATE TABLE Na_temat( ISBN numeric(10) references Ksiazki, Nrtematu numeric(10) references Tematy);

create sequence id_autora_seq
 start with     1
 increment by   1
;

create sequence isbn_seq
  start with    1
  increment by  1
; 
```

我必须为表 Autorzy、Ksiazki 和 Autorstwa 实现插入。

我已经准备好插入如下

```
insert into Autorzy 
values( Id_autora_seq.nextval, 'Jan', 'Mak');
insert into Ksiazki
values (isbn_seq.nextval, 'ABC', 'Poradnik', 2010); 
```

我不知道如何更新 Autorstwa 表。

我尝试使用如下触发器

```
create or replace 
trigger Autorstwa_auth  
   after insert or update on keiishi.Autorzy
   for each row 
begin  
   insert into Autorstwa (Id_autora)
   values (:new.id_autora);
end;

create or replace 
trigger Autorstwa_ks 
  after insert or update on keiishi.Ksiazki
  for each row 
begin  
   insert into Autorstwa (ISBN)
   values (:new.ISBN);
end; 
```

它在 Autorstwa 表中创建了两行，这对我来说是不可接受的。

谁能解释我如何触发多个表的更新？

或者其他一些方法我怎么能做到？

提前致谢。

此致

启石

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:31:05.433

您可以尝试使用 MERGE 语句重写触发器。我会做一个，你可以做另一个。:-)

```
CREATE OR REPLACE TRIGGER AUTORSTWA_AUTH
   AFTER INSERT OR UPDATE ON KEIISHI.AUTORZY
   FOR EACH ROW
BEGIN
   MERGE INTO AUTORSTWA a
     USING(SELECT :NEW.ID_AUTORA FROM DUAL) d
       ON (a.ID_AUTORA = d.ID_AUTORA)
     WHEN NOT MATCHED THEN
       INSERT (ID_AUTORA)
         VALUES (:NEW.ID_AUTORA);
END AUTORSTWA_AUTH; 
```

以这种方式编写，MERGE 语句只会在不存在匹配行的情况下将一行插入到 AUTORSTWA_AUTH 中。如果您对另一个触发器执行相同操作，则应该只为给定的键值插入一行。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:59:48.453

我认为您设置的关系不正确。为了使用触发器更新第三个表，对于第一个和第二个表的值，两者之间应该存在关系，或者应该有一个表连接第一个和第二个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:14:06.527

我将表 Autorstwa 更改为

```
CREATE TABLE Autorstwa (ISBN numeric(10) references Ksiazki(ISBN), Id_autora numeric(5) references Autorzy(Id_Autora), constraint pk_auto PRIMARY KEY (ISBN, Id_autora)); 
```

至于在该表中插入新值，最后我使用了普通插入

```
insert into Autorstwa
select max(ISBN), max(Id_Autora) from Ksiazki , Autorzy 
```

所以我可以从 Ksiazki 和 Autorzy 那里得到最新的价值。

对于我的需要没问题

目前，我没有时间为此制作程序，但我会制作一个并将其发布在这里，当我有空闲时间时

再次感谢大家的建议：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-29T20:37:53.983

这个对我有用

```
CREATE OR REPLACE VIEW new_book AS
   SELECT k.ISBN, k.Wydawca, k.Tytul, k.Rok,
            a.Id_Autora, a.Imie, a.Nazwisko
   FROM Autorzy a, Ksiazki k, Autorstwa au
   WHERE a.id_autora = (SELECT au.Id_Autora FROM Autorstwa au WHERE au.ISBN = (SELECT k.ISBN FROM Ksiazki k));

CREATE OR REPLACE TRIGGER new_book_insert
   INSTEAD OF INSERT ON new_book
   DECLARE
     duplicate_info EXCEPTION;
     PRAGMA EXCEPTION_INIT (duplicate_info, -00001);
   BEGIN

     INSERT INTO Autorzy (Id_Autora, Imie, Nazwisko)
     VALUES (
     :new.Id_Autora,
     :new.Imie,
     :new.Nazwisko);

    INSERT INTO Ksiazki (ISBN, Wydawca, Tytul, Rok)
   VALUES (
     :new.ISBN,
     :new.Wydawca,
     :new.Tytul,
     :new.Rok);

    INSERT INTO Autorstwa (ISBN, Id_Autora)
   VALUES (
     :new.ISBN,
     :new.Id_Autora);
   EXCEPTION
     WHEN duplicate_info THEN
       RAISE_APPLICATION_ERROR (
         num=> -20107,
         msg=> 'Duplicate Id_Autora or ISBN');
   END new_book_insert; 
```

# asp.net-mvc-4 - 瞥见图标不出现

> ID：15773083
> 
> 赞同：1
> 
> 时间：2013-04-02T19:49:29.917
> 
> 标签：asp.net-mvc-4, glimpse

我正在尝试将 Glimpse 用于 MVC 4。我的问题是，尽管我已按照[Glimpse 站点上的安装说明进行操作](http://getglimpse.com/Help/Installation)，但 Glimpse 图标并未出现在我的站点上。

基本上我创建了一个新的 MVC 4 项目并添加了 NuGet 包 Glimpse.MVC4。这是我的 web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="glimpse" type="Glimpse.Core.Configuration.Section, Glimpse.Core" />
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <!-- Glimpse: This can be commented in to add additional data to the Trace tab when using WebForms
        <trace writeToDiagnosticsTrace="true" enabled="true" pageOutput="false"/> -->
    <httpModules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" />
    </httpModules>
    <httpHandlers>
      <add path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <add name="Glimpse" path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" preCondition="integratedMode" />
    </handlers>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" preCondition="integratedMode" />
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
    <!-- If you are having issues with Glimpse, please include this. It will help us figure out whats going on. -->
      <logging level="Trace" />
  </glimpse>
</configuration> 
```

当我运行我的网站时，我导航到`http://localhost:12345/glimpse.axd`并单击该`Turn On Glimpse`按钮，该按钮看起来会在我的网站上创建一个 cookie（我通过 Chrome 开发人员工具栏看到）。当我导航回页面时，`http://12345`我没有看到页面右下角出现任何图标，如说明中所述。

我查看了有关此场景的各种 StackOverflow 问题，但很多都提到了旧`/Glimpse/Config`的做事方式。由于我没有做任何不寻常的事情，我想知道我是否错过了一步？

编辑：

嗯，我没有注意到我打开了日志记录。好的，现在事情更清楚了：

```
2013-04-02 21:42:09.5624 | DEBUG | get_Binders method of type 'System.Web.Mvc.Async.AsyncControllerActionInvoker' is not proxyable. | 
    2013-04-02 21:42:09.5624 | DEBUG | set_Binders method of type 'System.Web.Mvc.Async.AsyncControllerActionInvoker' is not proxyable. | 
    2013-04-02 21:42:09.5624 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.Async.AsyncControllerActionInvoker'. | 
    2013-04-02 21:42:09.6064 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IActionFilter'. | 
    2013-04-02 21:42:09.6064 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IResultFilter'. | 
    2013-04-02 21:42:09.6064 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IAuthorizationFilter'. | 
    2013-04-02 21:42:09.6064 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IExceptionFilter'. | 
    2013-04-02 21:42:09.6064 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IExceptionFilter'. | 
    2013-04-02 21:42:09.6364 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IValueProvider'. | 
    2013-04-02 21:42:09.6364 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IUnvalidatedValueProvider'. | 
    2013-04-02 21:42:09.6364 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IValueProvider'. | 
    2013-04-02 21:42:09.6364 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IUnvalidatedValueProvider'. | 
    2013-04-02 21:42:09.6504 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IValueProvider'. | 
    2013-04-02 21:42:10.0504 | DEBUG | Methods inspected via proxy generation hook on type 'System.Web.Mvc.IView'. | 
    2013-04-02 21:42:10.0504 | INFO | Replaced IView of type 'System.Web.Mvc.RazorView', named 'Index', with proxy implementation. | 
    2013-04-02 21:42:10.2524 | WARN | Unable to locate '</body>' with content encoding 'Unicode (UTF-8)'. Response may be compressed. | 
    2013-04-02 21:42:13.6916 | DEBUG | RuntimePolicy set to 'ExecuteResourceOnly' by IRuntimePolicy of type 'Glimpse.Core.Policy.GlimpseResourcePolicy' during RuntimeEvent 'ExecuteResource'. | 
    2013-04-02 21:42:15.0587 | DEBUG | RuntimePolicy set to 'ExecuteResourceOnly' by IRuntimePolicy of type 'Glimpse.Core.Policy.GlimpseResourcePolicy' during RuntimeEvent 'ExecuteResource'. | 
    2013-04-02 21:42:17.4918 | INFO | Replaced IView of type 'System.Web.Mvc.RazorView', named 'Index', with proxy implementation. | 
    2013-04-02 21:42:17.4918 | WARN | Unable to locate '</body>' with content encoding 'Unicode (UTF-8)'. Response may be compressed. | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:45:48.140

我只是`<body>`在 HTML 中丢失了一个标签。一旦我添加了缺少的标签，该图标就会出现。

# java - Java 无法连接到我的 MySQL 数据库

> ID：15773084
> 
> 赞同：0
> 
> 时间：2013-04-02T19:49:30.587
> 
> 标签：java, mysql, connect

我一直在尝试连接到我的 MySQL 数据库，但它不会连接到它。运行我的应用程序时，我使用 mysql-java-connector.jar 运行它，但它仍然无法工作。

这是我正在使用的连接方法：

```
public static void createConnection() {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();//opens class
            String IP="localhost:3306";//connection ip
            String DB="SECRET";//database name
            String User="SECRET";//username
            String Pass="SECRET"; //password
            con = DriverManager.getConnection("jdbc:mysql://"+IP +"/"+DB, User, Pass); //creates connection
            stmt = con.createStatement();
        } catch (Exception e) {//catches if connection failed
            System.out.println("Connection to SQL database failed!");//tells you it failed @ the run.bat
            e.printStackTrace();
        }
    } 
```

变量：

```
 public static Connection con = null;
  public static Statement stmt;
  public static boolean connectionMade; 
```

这是我尝试连接到我的数据库时遇到的错误：

```
java.sql.SQLException: Access denied for user 'daniel_voteuser'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:925)
    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1704)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1250)Connection to SQL database failed!

    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2465)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:822)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.rs.database.mysql.impl.Highscores.createConnection(Highscores.java:34)
    at com.rs.Launcher.main(Launcher.java:113)` 
```

谁能帮我解决这个错误？几天来我一直试图解决这个问题，但我还没有成功:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:54:20.990

异常消息描述了正在发生的事情。

这不是语法错误，而是身份验证失败的情况：您的用户-密码组合无效，或者用户没有使用数据库的权限。

* * *

## 可能的解决方案

**步骤 1.**检查是否可以在 MySQL 控制台中使用数据库

由于您在 工作`localhost`，我假设您可以使用您的用户名和密码输入 MySQL。因此，在终端中：

```
$ mysql -h localhost -u YourUser -pYourPassword 
```

如果这失败了，那么`YourUser`或者`YourPassword`是错误的。如果一切顺利并且您看到 MySQL 提示符，请尝试以下操作：

```
mysql> use YourDatabase; 
```

然后尝试一些`select`查询，以确保您可以使用数据库。

**步骤 2.**向您的用户授予权限

如果您不能使用数据库，那么您必须授予`YourUser`使用数据库的权限。以 root 身份登录 MySQL 并授予以下权限`YourUser`：

```
mysql> grant all on YourDatabase.* to 'YourUser'@'localhost' 
```

查看参考手册以了解`grant`.

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:58:05.947

您可以尝试以下语法来创建连接作为替代：

```
con = DriverManager.getConnection("jdbc:mysql://"
    + MYSQL_SERVER + ":3306" + "/" + MYSQL_DB_NAME 
    + "?user=" + MYSQL_USERNAME
    + "&password=" + MYSQL_PASSWORD); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T20:57:52.710

这是我成功使用的：

```
public void connectToDatabase( String username, String password, String lastname)
{
    Connection connection = null;
    String url = "jdbc:mysql://localhost:3306/javabase";
        try 
        {
            System.out.println("Connecting database...");
            connection = DriverManager.getConnection(url, username, password);
            System.out.println("Database connected!");
            Statement stmt = connection.createStatement();
            String query = "select firstname from user where lastName like \"" + lastname + "\"";
            ResultSet rs = stmt.executeQuery(query);

            int columns = rs.getMetaData().getColumnCount();
                    message = new StringBuilder();

                    while (rs.next()) 
                    {
                    for (int i = 1; i <= columns; i++) 
                    {
                            message.append(rs.getString(i) + " ");
                    }
                    message.append("\n");
                    }

                    System.out.println(message);  // print table contents          
        } 
        catch (SQLException e) 
        {
            throw new RuntimeException("Cannot connect the database!", e);
        }       
        finally 
        {
            System.out.println("Closing the connection.");
            if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
        } 
```

我通过不同的方法传递用户名、密码和查询的内容，但您可以在适合您的任何地方定义它们。

# c# - 如何移动/排列所有桌面窗口？（即“显示 Windows 堆叠”

> ID：15773085
> 
> 赞同：2
> 
> 时间：2013-04-02T19:49:31.057
> 
> 标签：c#, windows, winapi

是否可以在 C# 中（使用 Win32 API 或其他）以编程方式排列所有打开的应用程序窗口？

例如，在 Windows 7 中，如果您右键单击任务栏，则会有一个名为“显示堆叠的窗口”和“并排显示窗口”的选项。

这正是我试图通过代码复制的内容。

为了进一步解释，我想遍历所有打开的应用程序，显示主窗口，然后将其与所有其他打开的应用程序窗口一起排列在桌面/监视器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:59:52.860

您正在寻找的功能是[`TileWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633554.aspx). 一些例子：

```
TileWindows(NULL, MDITILE_HORIZONTAL, NULL, 0, NULL); // "Show windows stacked"
TileWindows(NULL, MDITILE_VERTICAL, NULL, 0, NULL); // "Show windows side-by-side" 
```

如果你想级联窗口，你可以使用[`CascadeWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632674.aspx)：

```
CascadeWindows(NULL, MDITILE_ZORDER, NULL, 0, NULL); // "Cascade windows" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:52:18.090

是的，你可以使用 windows API 来做，看看这个链接，它解释了如何使用一些函数，包括那些让你枚举所有打开的窗口的函数

[http://www.c-sharpcorner.com/UploadFile/shrijeetnair/win32api12062005005528AM/win32api.aspx](http://www.c-sharpcorner.com/UploadFile/shrijeetnair/win32api12062005005528AM/win32api.aspx)

在这里你有一个功能可以让你调整和移动一个窗口

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534(v=vs.85).aspx)

# sqlite - InstallShield 2011 可以根据体系结构在文件的两个版本之间进行选择吗？

> ID：15773087
> 
> 赞同：0
> 
> 时间：2013-04-02T19:49:36.010
> 
> 标签：sqlite, installshield-2011

我正在尝试为可以安装在 x86 或 x64 架构上的 Web 服务构建安装程序。作为我们服务的一部分，我们使用 SQLite3.dll，并且该 dll 是特定于体系结构的。我需要安装程序根据服务器的体系结构复制正确版本的 dll。这可能吗？如果是这样，怎么做？

谷歌搜索已经发现了一些关于镜像功能/组件集的复杂想法，但我不禁认为应该有一种更简单的方法来根据架构标志在一个源文件夹位置和另一个源文件夹位置之间进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:46:31.400

正确答案很大程度上取决于您要完成的工作。

如果您只有一个整体 32 位软件包，恰好在与机器匹配的平台上提供了一个 DLL，您需要将它的每个平台变体放在不同的组件中，并调整这些组件，以便正确的一个是在运行时安装。有关您的条件的基础，请参见例如属性[Msix64](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370522.aspx)。

如果您尝试制作两个包，其中一个是 32 位并包含 x86 DLL，另一个是 64 位并包含 x64 DLL，您应该追求不同功能的镜像组件（因此您可以使用[Release Flags](http://helpnet.flexerasoftware.com/installshield17helplib/IHelpReleaseFlags.htm)排除您不需要的集合）和发布视图中的两种不同产品配置。或者，您可以创建两个镜像项目。

请注意，不建议仅使用[路径变量覆盖](http://helpnet.flexerasoftware.com/installshield17helplib/IReleasePathVarOverrides.htm)来为同一组件选择不同的构建源，因为您生成的组件适用于不同的平台。这意味着他们应该使用不同的组件代码，尽管如果两个安装最终都在同一台机器上，这通常只是一个问题。

# r - ffdfappend 崩溃 R

> ID：15773090
> 
> 赞同：0
> 
> 时间：2013-04-02T19:49:44.463
> 
> 标签：r, flat-file

我是一个 R 新手，但我正在尝试使用 acast、ff、ffbase 包来创建一个相当大的 R 对象（5 mil 行 x ~17k cols）——在引入并保存了 SQLServer 数据集之后融化成更小的数据框块（当然，不能用一个简单的融化和 dcast 创建这个对象）。所有的块都有相同的列。当我到达 ffdfappend 时，R 崩溃 - Windows 崩溃（R for Windows GUI 前端已停止工作）。在这一点上，我的主要问题是，我是否正确使用了 ffdfappend？

Windows Server 2008 - 64 位 R 2.15.3 - 64 位

我的“分块”代码：

```
library(RODBC);
library(reshape2);
library(ff);
library(ffbase);

db <- odbcConnect(foo);

#agg function used in the acast
iSequence <- function(x){
 if(is.na(min(x))) {
  return('N');
 } else {
  if(min(x) == 1) {
   return('P');
  } else {
   return('S');
  }
 }
}

#pull in data from SS
data.raw <- sqlQuery(db,"
SELECT 
key
,type
,val
FROM table
WHERE val IS NOT NULL
",stringsAsFactors=FALSE);

#melt
data.melt <- melt(data.raw,id=c("key","type"),measure="val");

#get list of unique first 4 digits of key - good enough granularity for chunk
data.char <- unique(substr(data.melt$key,1,4));

#create list where the chunked casts will reside
data.df.list <- vector("list",length(data.char));

#get list of unique column names
data.type.unique <- unique(data.melt$type);

#chunk counter
chunk.count <- 1;

#cast by chunk 
for(i in data.char) {
 print(paste(chunk.count, '/', length(data.char)));
 tempcast <- acast(data.melt[substr(data.melt$key,1,4)==i,],key~type,fun.aggregate=iSequence);
 #create list item with all N
 templist <- matrix(
  data="N",
  nrow=nrow(tempcast),
  ncol=length(data.type.unique),
  dimnames=list(rownames(tempcast),data.type.unique)
 );
 #replace columns that are in data.type.unique but not in tempcast
 templist[,which(data.type.unique %in% colnames(tempcast))] <- tempcast;
 #put into final cast list
 data.df.list[[i]] <- as.data.frame(templist);
 rm(tempcast);
 rm(templist);
 gc();
 chunk.count <- chunk.count + 1;
} 
```

所以现在我有了所有的块，很棒（数据看起来很好，有效等）。当我在两个块上测试 ffdfappend 时（这些值有效），R 崩溃：

```
#this works 
#unsort is in there because I get an error saying this is sorted otherwise
t1 <- NULL;
t1 <- unsort(ffdfappend(t1,data.df.list[["1174"]]));
t2 <- NULL;
t2 <- unsort(ffdfappend(t2,data.df.list[["1175"]]));

#this crashes R
t1 <- ffdfappend(t2,t1); 
```

我正确使用 ffdfappend 吗？谢谢！

# c# - 在 C# 中避免使用小数的默认舍入行为

> ID：15773093
> 
> 赞同：1
> 
> 时间：2013-04-02T19:49:54.307
> 
> 标签：c#, jquery, decimal, jquery-ui-sortable

上下文：我正在使用`Sortable`.

```
 $("#sortable").sortable({
       update: function (e,ui) 
       {
         nextItemPrio=parseFloat(ui.item.next().find("input[name='Priority']").val().replace(",", "."));
         prevItemPrio = parseFloat(ui.item.prev().find("input[name='Priority']").val().replace(",", "."));
         currentItemPrio = parseFloat(ui.item.find("input[name='Priority']").val().replace(",", "."));
                   if ((nextItemPrio < currentItemPrio && prevItemPrio < currentItemPrio)
          || (nextItemPrio > currentItemPrio && prevItemPrio > currentItemPrio)) {

                    ui.item.find("input[name='Priority']").val((prevItemPrio + nextItemPrio) / 2.0);

                } 
```

在控制器中，我有：

```
 public ActionResult UpdatePicturePriority(int id, string newpriority)
      {
        var a = _PictureRepo.GetById(id);
        decimal convertDecimal = Convert.ToDecimal(newpriority.Replace(".", ","),);
        a.Priority = convertDecimal;
        _PictureRepo.Update(a);
        return Json(true);
    } 
```

经过几次排序（潜水）后，我得到了一些类似的数字，但当我将值发布到控制器（MVC 应用程序）时 `0,0023565`，它似乎已转换为。`0`我不想要这个，因为我的代码在几次分割后就不起作用了。我不希望我的数字四舍五入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:33:45.273

看起来你的十进制转换在你的控制器中不起作用。

```
decimal convertDecimal = Convert.ToDecimal(newpriority.Replace(".", ","),); 
```

您在上面的代码行中将小数点 (.) 替换为逗号 (,)。这是什么原因？

如果无法进行转换，则 Convert.ToDecimal 方法将默认为 0，因此是 0 的原因。

这是来自 Microsoft 的示例，请更改格式提供程序或使用默认小数位 (.)

```
using System;
using System.Globalization;

public class Example
{
   public static void Main()
   {
      string[] values = { "123456789", "12345.6789", "12 345,6789",
                          "123,456.789", "123 456,789", "123,456,789.0123",
                          "123 456 789,0123" };
      CultureInfo[] cultures = { new CultureInfo("en-US"),
                                 new CultureInfo("fr-FR") }; 

      foreach (CultureInfo culture in cultures)
      {
         Console.WriteLine("String -> Decimal Conversion Using the {0} Culture",
                           culture.Name);
         foreach (string value in values)
         {
            Console.Write("{0,20}  ->  ", value);
            try {
               Console.WriteLine(Convert.ToDecimal(value, culture));
            }
            catch (FormatException) {
               Console.WriteLine("FormatException");
            }
         }
         Console.WriteLine();
      }                     
   }
}
// The example displays the following output: 
//       String -> Decimal Conversion Using the en-US Culture 
//                  123456789  ->  123456789 
//                 12345.6789  ->  12345.6789 
//                12 345,6789  ->  FormatException 
//                123,456.789  ->  123456.789 
//                123 456,789  ->  FormatException 
//           123,456,789.0123  ->  123456789.0123 
//           123 456 789,0123  ->  FormatException 
//        
//       String -> Decimal Conversion Using the fr-FR Culture 
//                  123456789  ->  123456789 
//                 12345.6789  ->  FormatException 
//                12 345,6789  ->  12345.6789 
//                123,456.789  ->  FormatException 
//                123 456,789  ->  123456.789 
//           123,456,789.0123  ->  FormatException 
//           123 456 789,0123  ->  123456789.0123 
```

# php - 更新会话用户的值？

> ID：15773098
> 
> 赞同：1
> 
> 时间：2013-04-02T19:50:29.677
> 
> 标签：php, javascript, sql

我创建了一个函数，它应该在运行时仅将会话用户的章节值更新为 1，这是我创建并存储在一个名为**chapcomp.php**的文件中的函数：

```
<?php
$con = (my connection info is here)

$sql = "UPDATE users
SET chapter= '1'
WHERE username="'.$_SESSION['username'].'""

mysql_query($sql,$con);
?> 
```

下面我发布了我的函数来调用 php sql 查询：

```
function ChapComp() {
var xmlHttp = null;

xmlHttp = new XMLHttpRequest();
xmlHttp.open( "GET", "chapcomp.php", false );
xmlHttp.send( null );
// return xmlHttp.responseText; 
```

我使用这个按钮来调用函数：

```
<br><a href='#' onclick='ChapComp();'>Complete Chapter One!</a><br> 
```

现在，当我单击按钮时，什么也没有发生，我的数据库中的章节 INT 值没有改变。我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:13:57.637

正如 ionutvmi 所说，您不能从浏览器运行任何类型的 PHP 程序。

Javascript 在您的浏览器（或任何其他 js 解释器）中使用，与服务器无关，服务器是您存储数据（您的用户表）、运行 php 程序和任何其他服务器端相关操作的地方。

**[这是一个很好的帖子，解释了差异](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:01:35.663

```
"UPDATE users
    SET chapter='1'
    WHERE username='".$_SESSION['username']."'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:36:33.397

据我所知，您正在尝试使用错误的 js 调用 php 函数。

如果您想调用一些 php 代码，请将其存储在另一个文件中并使用 javascript 向该文件发出请求。

PS: session_start(); 应放置在任何输出之前

编辑：这是一个简短的例子

```
function ChapComp()
{
var xmlHttp = null;

xmlHttp = new XMLHttpRequest();
xmlHttp.open( "GET", "somepage.php", false );
xmlHttp.send( null );
// return xmlHttp.responseText;
} 
```

你在哪里`somepage.php`运行你的 sql 查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:14:25.420

已实现，它会执行您尝试执行的操作（在 chrome 中检查）：

file1：**view.html**和下一个内容（你应该完善你的 html）：

```
<script type="text/javascript">
function ChapComp() {
 var xmlHttp = null;
 xmlHttp = new XMLHttpRequest();
 xmlHttp.open( "GET", "chapcomp.php", false );
 xmlHttp.send( null );
}
</script>
<br><a href='#' onclick='ChapComp();'>Complete Chapter One!</a><br> 
```

文件 2 ：**chapcomp.php**和下一个内容：

```
<?php
session_start();
// TODO: remove next line
$_SESSION['username'] = 'test';

$con = mysql_connect( 'localhost', 'dbuser', 'dbpassword') or die('Could not connect to mysql server.' );
mysql_select_db('db_name', $con) or die('Could not select database.');

$sql = "UPDATE users
SET chapter= '1'
WHERE username='".$_SESSION['username']."'";

$result = mysql_query($sql, $con);
?> 
```

请删除

```
 $_SESSION['username'] = 'test'; 
```

我假设 $_SESSION['username'] 在您的情况下不为空。

# c - Visual Studio 命令提示符正在关闭

> ID：15773100
> 
> 赞同：0
> 
> 时间：2013-04-02T19:50:38.863
> 
> 标签：c, visual-studio-2010, visual-studio-2012

我想在`windows8` `x64`. 但是当我点击那个（`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat`）打开几秒钟然后关闭时。什么是问题？

```
Edit: 
```

它是`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:52:53.363

您应该启动一个命令提示符（通过在开始菜单中单击它或运行`cmd.exe`），然后`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat`在该命令提示符中运行。

（如果您只是双击 a `.bat`，它将运行，然后命令提示符将关闭 - 这是正常的 Windows 行为。）

# c# - 更新 wpf 中的 UI 元素

> ID：15773102
> 
> 赞同：2
> 
> 时间：2013-04-02T19:50:42.113
> 
> 标签：c#, wpf, multithreading

我正在尝试在 wpf 中为冒泡排序算法设置动画。为此，我编写了以下代码。代码正在编译。问题是当我单击排序按钮时，它没有更新 UI 元素。我在**swapData**方法中遇到问题。

**编辑：**

当我单击排序按钮时 UI 冻结。但是当我单击排序按钮时，我希望它显示换行。

![在此处输入图像描述](https://i.stack.imgur.com/1b2yA.jpg)

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections;
using System.Threading;
using System.ComponentModel;
using System.Windows.Threading;

namespace Sorting
{

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public struct SwapIndex
        {
            public int i; public int j;
        };
        delegate void UIswap(int i, int j);
        const int scale = 4;
        const int size = 50;
        Int32[] data = new Int32[size];
        bool Working = false;
        Line[] lines = new Line[size];
        public MainWindow()
        {
            InitializeComponent();
            this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
        }

        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            Draw();
        }
        private void Draw()
        {
            canvas1.Children.Clear();
            for (int i = 0; i < data.Length; i++)
            {
                data[i] = i;
                lines[i] = new Line()
                {
                    X1 = 0,
                    Y1 = i * scale,
                    X2 = i * scale,
                    Y2 = i * scale,
                    StrokeThickness = 2,
                    Stroke = new SolidColorBrush(Colors.Black)
                };
                canvas1.Children.Add(lines[i]);
            }
        }

        private void Sort_Click(object sender, RoutedEventArgs e)
        {
            if (Working) return;
            Working = true;
            Thread T1 = new Thread(new ThreadStart(BubbleSimple));
            T1.Start();

        }
        void BubbleSimple()
        {
            bool flag = false;
            do
            {
                flag = false;
                for (int i = 0; i < data.Length - 1; i++)
                {
                    if (data[i] > data[i + 1])
                    {
                        flag = true;
                        swapData(i, i + 1);
                    }
                }
            } while (flag);
            Working = false;
        }

        private void swapData(int i, int j)
        {

            UIswap swap = (i1, j1) =>
                {
                    double temp;
                    temp = lines[i1].X2;
                    lines[i1].X2 = lines[j1].X2;
                    lines[j1].X2 = temp;
                };
            canvas1.Dispatcher.BeginInvoke(swap, new object[] { i, j });
        }
        void Randomize(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker bw = (BackgroundWorker)sender;
            Random R = new Random();
            for (int i = 0; i < data.Length; i++)
            {
                int j = R.Next(data.Length);
                bw.ReportProgress(1, new SwapIndex() { i = i, j = j });
            }
        }
        void SwapLine(object sender, ProgressChangedEventArgs e)
        {
            int i = ((SwapIndex)e.UserState).i;
            int j = ((SwapIndex)e.UserState).j;
            int t = data[i];
            data[i] = data[j];
            data[j] = t;

            double temp;
            temp = lines[i].X2;
            lines[i].X2 = lines[j].X2;
            lines[j].X2 = temp;
        }
        private void Suffle_Click(object sender, RoutedEventArgs e)
        {
            if (Working) return;
            Working = true;
            BackgroundWorker bw = new BackgroundWorker();
            bw.WorkerReportsProgress = true;
            bw.WorkerSupportsCancellation = false;
            bw.DoWork += new DoWorkEventHandler(Randomize);
            bw.ProgressChanged += new ProgressChangedEventHandler(SwapLine);
            bw.RunWorkerCompleted += delegate(object s1, RunWorkerCompletedEventArgs e1)
            {
                Working = false;
            };
            bw.RunWorkerAsync();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:42:23.713

要回答这个问题，我们必须回到 WPF 101。

你会想用你的“行”而不是你在这里做的所有工作来做数据绑定。这不是winforms。您在 WPF 中进行绑定，并且绑定会为您完成*所有这些工作*。

首先，您需要使用数据对象而不是行。

```
public class DataLine
{
    private const double _Scale = 4.0;
    public double Length { get; set; }
    public double DisplayLength { get { return Length * _Scale; } }
} 
```

然后将 ObservableCollection 添加到您的窗口类

```
public ObservableCollection<DataLine> _Data = new ObservableCollection<DataLine>();
public ObservableCollection<DataLine> Data
{
    get { return _Data; }
} 
```

然后，您将绑定 ItemsSource 到 Window 的 xaml 中的控件上

```
<ItemsControl Grid.Row="2" ItemsSource="{Binding Data}"/> 
```

然后添加一个DataTemplate

```
<ItemsControl Grid.Row="2" ItemsSource="{Binding Data}">
    <ItemsControl.Resources>
        <DataTemplate DataType="{x:Type local:DataLine}">
            <Line X1="0" X2="{Binding DisplayLength}" Y1="{Binding DisplayLength}" Y2="{Binding Length}"/>
        </DataTemplate>
    </ItemsControl.Resources>
</ItemsControl> 
```

这支配着 UI。现在，重新排列行所需要做的就是重新排列类中的 Data 数组。

```
private void swapData(int i, int j)
{
    int nMax = Math.Max(i, j);
    int nMin = Math.Min(i, j);

    DataLine tempMax = Data[nMax];
    DataLine tempMin = Data[nMin];

    Action swap = () =>
    {
        Data.RemoveAt(nMax);
        Data.RemoveAt(nMin);
        Data.Insert(nMin, tempMax);
        Data.Insert(nMax, tempMin);
    };

    Dispatcher.Invoke(swap, null);
} 
```

现在只需在每次交换之间等待，然后在单独的线程中进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:48:54.780

正如其他人提到的那样，数据绑定会更好，但是为了在不完全重写代码的情况下向您展示哪里出了问题，这是我想出的：

```
public partial class MainWindow : Window
{
    public struct SwapIndex
    {
        public int i; public int j;
    };
    delegate void UIswap(int i, int j);
    const int scale = 4;
    const int size = 50;
    Int32[] data = new Int32[size];
    bool Working = false;
    Line[] lines = new Line[size];
    public MainWindow()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        Draw();
    }
    private void Draw()
    {
        canvas1.Children.Clear();
        for (int i = 0; i < data.Length; i++)
        {
            data[i] = i;
            lines[i] = new Line()
            {
                X1 = 0,
                Y1 = i * scale,
                X2 = i * scale,
                Y2 = i * scale,
                StrokeThickness = 2,
                Stroke = new SolidColorBrush(Colors.Black)
            };
            canvas1.Children.Add(lines[i]);
        }
    }

    private void Sort_Click(object sender, RoutedEventArgs e)
    {
        if (Working) return;
        Working = true;
        Thread T1 = new Thread(new ThreadStart(BubbleSimple));
        T1.Start();

    }
    void BubbleSimple()
    {
        bool flag = false;
        do
        {
            flag = false;
            for (int i = 0; i < data.Length - 1; i++)
            {
                if (data[i] > data[i + 1])
                {
                    flag = true;
                    swapData(i, i + 1);
                }

                Thread.Sleep(10);
            }
        } while (flag);
        Working = false;
    }

    private void swapData(int i, int j)
    {
        var temp = data[i];
        data[i] = data[j];
        data[j] = temp;

        UIswap swap = (i1, j1) =>
        {
            var tempd = lines[i1].X2;
            lines[i1].X2 = lines[j1].X2;
            lines[j1].X2 = tempd;
        };

        canvas1.Dispatcher.BeginInvoke(swap, new object[] { i, j });
    }

    void Randomize(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker bw = (BackgroundWorker)sender;
        Random R = new Random();
        for (int i = 0; i < data.Length; i++)
        {
            int j = R.Next(data.Length);
            bw.ReportProgress(1, new SwapIndex() { i = i, j = j });
        }
    }
    void SwapLine(object sender, ProgressChangedEventArgs e)
    {
        int i = ((SwapIndex)e.UserState).i;
        int j = ((SwapIndex)e.UserState).j;
        int t = data[i];
        data[i] = data[j];
        data[j] = t;

        double temp;
        temp = lines[i].X2;
        lines[i].X2 = lines[j].X2;
        lines[j].X2 = temp;
    }
    private void Suffle_Click(object sender, RoutedEventArgs e)
    {
        if (Working) return;
        Working = true;
        BackgroundWorker bw = new BackgroundWorker();
        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = false;
        bw.DoWork += new DoWorkEventHandler(Randomize);
        bw.ProgressChanged += new ProgressChangedEventHandler(SwapLine);
        bw.RunWorkerCompleted += delegate(object s1, RunWorkerCompletedEventArgs e1)
        {
            Working = false;
        };
        bw.RunWorkerAsync();
    }
} 
```

您最大的问题是算法交换了行，但没有交换数据，因此它处于无限循环中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:39:00.217

您需要了解在 WPF 中处理 UI 的方式，这就是所谓的 MVVM：

```
<Window x:Class="MiscSamples.WrongCode"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WrongCode" Height="300" Width="300">
    <DockPanel>
        <Button Click="Sort" Content="Sort" DockPanel.Dock="Top"/>
        <Button Click="Shuffle" Content="Shuffle" DockPanel.Dock="Top"/>
        <ItemsControl ItemsSource="{Binding}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Line X1="0" Y1="0" X2="{Binding Length}" Y2="0"
                          Stroke="Black" StrokeThickness="2" Margin="0,2,0,2"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DockPanel>
</Window> 
```

代码背后：

```
public partial class WrongCode : Window
    {
        public ObservableCollection<LineModel> Lines { get; set; }

        public WrongCode()
        {
            InitializeComponent();
            Lines = new ObservableCollection<LineModel>();
            DataContext = Lines;
        }

        private void Sort(object sender, RoutedEventArgs e)
        {
            SortTimer = new Timer(x => SortItem(), null, 0, 100);
        }

        private void SortItem()
        {
            //Implement your sort algorithm here by
            //Modifying the ObservableCollection in this way:
            //Lines.Move(index1, index2);

            //This example is just moving the lines randomly without any sort order
            var index1 = rnd.Next(0, Lines.Count - 1);
            var index2 = rnd.Next(0, Lines.Count - 1);

            Dispatcher.BeginInvoke((Action) (() => Lines.Move(index1, index2)));
        }

        public static System.Threading.Timer SortTimer;
        public static Random rnd = new Random();

        private void Shuffle(object sender, RoutedEventArgs e)
        {
            if (SortTimer != null)
                SortTimer.Dispose();

            Lines.Clear();

            Enumerable.Range(0, rnd.Next(50, 60))
                      .Select(x => new LineModel()
                          {
                              Length = rnd.Next(1, 100)
                          })
                      .ToList()
                      .ForEach(Lines.Add);

        }
    }

    public class LineModel
    {
        public int Length { get; set; }
    } 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/YWgcL.png)

这里需要注意的要点：

*   我正在使用`ItemsControl`“绘制”屏幕上的项目。当您需要`Items`在 WPF 中显示多个时，这是正确的方法，无论这些项目是什么。实际上，在 WPF 中，所有能够显示多个 Item 的 UI 元素（例如`ListBox`、`ComboBox`、`Menu`等）都是从`ItemsControl`.
*   **我绝不会在代码中操作 UI 元素**。在 WPF 中，大多数时候这是完全没有必要的。同样，[UI 不是数据。数据就是数据。用户界面就是用户界面。](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)，因此您不能将 UI 元素视为数据，因为它们不是。
*   请注意，我正在使用 an`ObservableCollection<T>`来存储这些项目。这是一种特殊类型的集合，每当在其内部添加/删除/移动项目时都会通知。WPF 绑定框架侦听这些事件并自动更新 UI。

# php - 检测 cPanel / WHM 当前是否在 PHP 中运行？

> ID：15773105
> 
> 赞同：0
> 
> 时间：2013-04-02T19:50:53.950
> 
> 标签：php, backup, cpanel, whm

我在 WHM 中运行良好的全自动备份，我现在正在实现一个脚本来自动将内容下载到数据库，但是它们不能很好地结合在一起。

我正在尝试汇总数十个提要，其中许多提要包含数千个项目，因此理想情况下，我希望这是一个全天候运行的过程，以刷新所有提要，仅此一项就没有问题。

但是，由于提要和备份需要大量磁盘使用，负载和 I/O 等待时间变得越来越荒谬，所以我希望有一种方法可以检测（最好在 PHP 中）备份当前是否正在运行 pause发生这种情况时的提要处理。

我可以玩弄备份/馈送时间，这样它们就不会重合，但是备份似乎需要 2 到 10 个小时，所以这真的不理想。

我可以检测 WHM 当前是否正在运行备份吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:16:38.560

如果您已经知道键入`top`using时显示的备份过程的名称`SSH`，那么我认为您可以使用`ps aux | grep your_process_name`with `BASH`using `SSH`。

您也可以使用 PHP 调用此命令，有关此的更多信息：[从 PHP 运行 Bash 命令](https://stackoverflow.com/questions/11052162/run-bash-command-from-php)

# time - r5rs 中的时间或线程函数

> ID：15773108
> 
> 赞同：0
> 
> 时间：2013-04-02T19:51:02.577
> 
> 标签：time, scheme, racket, sleep, r5rs

我制作了一个游戏，它使用时间来计算重力对时间（速度和运动）的影响。虽然游戏主要使用 r5rs 函数，但我使用`thread`,`sleep`和其他函数来更新和记住时间，这些函数在球拍中定义。现在我想让 te 游戏在只有 r5rs 可用的微控制器上运行。是否可以仅使用 r5rs 制作类似的东西？

这是我目前使用的代码（使用球拍功能）：

```
(define (make-timer)
  (define time 0) 
  (define wait-time (/ 1 CPU_FREQ))  
  (define timer-thread
    (thread (lambda ()
              (let loop ()
                (sleep wait-time)
                (set! time (+ 1 time))
                (loop)))))

  (define (dispatch msg)
    (cond ((eq? msg 'time) time)
          ((eq? msg 'start)
           (thread-resume timer-thread))
          ((eq? msg 'restart)
           (set! time 0)
           (thread-resume timer-thread))
          ((eq? msg 'reset)
           (thread-suspend timer-thread)
           (set! time 0))
          ((eq? msg 'stop) (thread-suspend timer-thread))
          ((eq? msg 'set-period!)
           (lambda (period)
             (set! wait-time (* (+ period 1) (/ 1 CPU_FREQ)))))
          ))
  (thread-suspend timer-thread)
  (set! time 0)
  dispatch) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:13:10.757

不，在 R5RS 中没有线程原语（检查规范的[索引](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-15.html#%_chap_Temp_11)以查看可用的过程）。而且它不能仅根据 R5RS 来实现，因为在某些时候您必须访问本机操作系统调用。

# sql-server-2008-r2 - 这两个 MDX 查询是否应该返回相同的结果？

> ID：15773109
> 
> 赞同：0
> 
> 时间：2013-04-02T19:51:08.983
> 
> 标签：sql-server-2008-r2, ssas, mdx

我有两个 MDX 查询（其基础来自 Excel 的 CUBEVALUE() 函数）。我希望这两个查询的输出是相同的，但事实并非如此。

考虑这个帐户结构：

```
some accounts ...
  Account A
      Account B
      Account C
      Account D
      Account E
other accounts ... 
```

我的客户维度是使用客户智能定义的——它也是一个父/子维度。

**查询一：**

```
SELECT [Measures].[Actual] ON 0 
FROM [MYSYSTEM] 
WHERE (
    {[Account].[Accounts].&[Account B], [Account].[Accounts].&[Account C]}, 
    [Time].[Year - Month].&[2011-12-01T00:00:00]
) 
```

返回**帐户 A**（是，父级）的聚合 [Measures].[Actual] 值，而不是指定时间间隔内帐户 B 和 C 的值。

**查询 2：**

```
SELECT [Measures].[Actual] ON 0 
FROM [MYSYSTEM] 
WHERE 
    { 
    ([Account].[Accounts].&[Account B], [Time].[Year - Month].&[2011-12-01T00:00:00]),
    ([Account].[Accounts].&[Account C], [Time].[Year - Month].&[2011-12-01T00:00:00])
    } 
```

返回我期望的值——指定时间间隔内账户 B 和 C 的 [Measures].[Actual] 值。

我的问题是——关于 MDX 作为一种语言，我在概念上是否遗漏了什么？我认为这些查询通常应该返回相同的值是错误的吗？这是否表明我在设置帐户维度时存在缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:37:28.440

我认为这与你的维度有关，我用我的多维数据集复制了查询，两次都得到了相同的结果：

```
select [Measures].[Amount] on 0,
[Account].[Account Type].[Account Type] on 1
from [Cube]
where (
{[Account].[Accounts].&[4],[Account].[Accounts].&[5]}
,[Date].[Calendar].[Month].&[2002]&[11]
)

select [Measures].[Amount] on 0,
[Account].[Account Type].[Account Type] on 1
from [Cube]
 where {
([Account].[Accounts].&[4],[Date].[Calendar].[Month].&[2002]&[11]),
([Account].[Accounts].&[5],[Date].[Calendar].[Month].&[2002]&[11])
} 
```

这可能与使用帐户情报有关吗？ [http://msdn.microsoft.com/en-us/library/ms174759(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms174759(v=sql.100).aspx) 我自己没用过..

# iphone - 为绘图应用程序实现橡皮擦功能

> ID：15773117
> 
> 赞同：0
> 
> 时间：2013-04-02T19:51:39.683
> 
> 标签：iphone, ios, uiimageview, drawing

我在 ray wenderlich 的网站上关注这个关于使用 UIKit 创建一个简单的绘图应用程序的精彩教程。 [http://www.raywenderlich.com/18840/how-to-make-a-simple-drawing-app-with-uikit](http://www.raywenderlich.com/18840/how-to-make-a-simple-drawing-app-with-uikit)

该教程很棒，一切正常。我遇到的问题是，在创建橡皮擦功能时，ray 提出的解决方案是使用与背景颜色相同的画笔。对我来说，这似乎不是一个很好的解决方案。如果背景不是像渐变那样的纯色或像许多涂色书应用程序中那样的任何图像怎么办？

所以基本上问题是：有没有办法从给定位置的 UIImageView 中删除颜色（可能将该区域中的所有像素转换为透明）？

任何帮助或指示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:05:52.037

使用画笔但颜色使用：

```
[UIColor clearColor] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:43:24.623

经过长时间的搜索后，我在我的应用程序中遇到了同样的问题，我找到了解决这个问题的简单方法。

我只是使用了触摸方法`UIViewController`

以下是我的方法，

**代码：-**

```
 #pragma mark touches stuff...

 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        lastTouch = [touch locationInView:self.editedImageView];
    }

    - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        currentTouch = [touch locationInView:self.editedImageView];

        CGFloat brushSize;
        if (isEraser) 
        {
            brushSize=eraser;
        }
        else
        {
            brushSize=mark;
        }
        CGColorRef strokeColor = [UIColor whiteColor].CGColor;

        UIGraphicsBeginImageContext(self.editedImageView.frame.size);
        CGContextRef context = UIGraphicsGetCurrentContext();
        [self.editedImageView.image drawInRect:CGRectMake(0, 0, self.editedImageView.frame.size.width, self.editedImageView.frame.size.height)];
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, brushSize);
        if (isEraser) {

            CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor colorWithPatternImage:self.im].CGColor);
        }  
        else
        {
            CGContextSetStrokeColorWithColor(context, strokeColor);
            CGContextSetBlendMode(context, kCGBlendModeClear); 
        }
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
        CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
        CGContextStrokePath(context);
        self.editedImageView.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        lastTouch = [touch locationInView:self.editedImageView];
    }

    - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {

    } 
```

**输入：**

```
self.editedImageView.image = "Your Custom image";

self.im    =   "Your Custom image"; 
```

**您的问题的简单解决方案是：-**

```
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor colorWithPatternImage:self.im].CGColor); 
```

**笔记：**

这不会取消它再次绘制图像

**更新：-**

```
 self.im    =   "Your Custom image"; 
```

这将是这样的......

```
-(void)eraserConfigure
{
    UIImageView *resizeImage=[[[UIImageView alloc]initWithImage:editedImage]autorelease];
    /*UIImage */self.im=[UIImage imageFromView:resizeImage scaledToSize:CGSizeMake(self.editedImageView.frame.size.width, self.editedImageView.frame.size.height)];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T17:19:22.633

我可以使用以下代码解决问题：

```
CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeClear); 
```

[参考](https://stackoverflow.com/questions/5939096/erasing-after-drawing-with-cgcontext/9043950#9043950)

# c# - 使用 PrincipalSearcher 获取 DFS 共享

> ID：15773119
> 
> 赞同：1
> 
> 时间：2013-04-02T19:51:42.133
> 
> 标签：c#, winforms, active-directory, microsoft-distributed-file-system

我正在尝试以 Windows 形式将代码从 VB 改编为 C#。我仍在尝试总体上了解 DFS 的想法，以及如何从 Windows 窗体中操作它。

VB 使用该`GetObject("LDAP://RootDSE")`功能在 Active Directory 中搜索使用`DirectorySearcher`. 我已经调整了使用相同对象的其他函数`UserPrincipal`从用户 id 返回 a ，以及检查 Group 是否已经存在（使用 a `GroupPrincipal`）。这些通常是这样的：

```
public static UserPrincipal GetUserPrincipal(string userId) {
    PrincipalContext context = new PrincipalContext(ContextType.Domain);
    UserPrincipal user = new UserPrincipal(context);
    user.Name = userId;
    PrincipalSearcher searcher = new PrincipalSearcher(user);
    return searcher.FindOne() as UserPrincipal;
} 
```

但是，我找不到任何包含我正在使用的关键字的文档，但我正在尝试获取 DFS 命名空间的目录列表（我认为）。

这是VB中的（修改后的）代码：

```
Public Function GetDfsNamespaces() As List(Of String)
    Dim objRootDSE = GetObject("LDAP://RootDSE")
    Dim domain As String = objRootDSE.Get("DefaultNamingContext")
    Dim entry As New DirectoryEntry("LDAP://CN=DFs-Configuration,CN=System," & domain)
    Dim searcher As New DirectorySearcher(entry)
    searcher.PropertiesToLoad.Add("cn")
    searcher.Filter = "(objectClass=msDFS-NamespaceAnchor)"
    searcher.SearchScope = SearchScope.Subtree
    Dim results As SearchResultCollection = searcher.FindAll()
    Dim strResults As New List(Of String)
    For Each result In results
        strResults.Add(result.Properties("cn")(0))
    Next
    return strResults
End Function 
```

我尝试查看 的源代码`UserPrincipal`，`GroupPrincipal`但`ComputerPrincipal`无法弄清楚如何扩展`Principal`对象以获取目录或其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:17:01.543

前两行应该是这样的：

```
 string domain;
        using (DirectoryEntry rootDSE = new DirectoryEntry("LDAP://RootDSE"))
        {
            domain = rootDSE.Properties["defaultNamingContext"].Value.ToString();
        } 
```

其余代码应该可以直接转换。

# jquery - 如何根据单选按钮选择在 JSP 中显示特定的隐藏表单？

> ID：15773122
> 
> 赞同：1
> 
> 时间：2013-04-02T19:51:48.630
> 
> 标签：jquery, jsp, radio-button

我想根据从多个单选按钮选项中选择的单选按钮在 JSP 中显示特定的隐藏表单。有没有特定的Jquery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:55:36.307

一种可能的解决方案：使用选择器 :checked

```
if ($('input:checked').val() == 'Milk') 
```

查看[JSFiddle上的工作示例](http://jsfiddle.net/mUmTk/)

# scala - 如何在单独的线程中运行代码？

> ID：15773123
> 
> 赞同：8
> 
> 时间：2013-04-02T19:51:52.393
> 
> 标签：scala

我想生成一个线程并在该线程中运行代码。Scala中有哪些选项？

示例用法如下所示：

```
Thread.currentThread setName "MyThread"

val myThreadExecutor = ???

val threadNamePromise = Promise[String]

future {
  myThreadExecutor run {
    val threadName = "MySpecialThread"
    Thread.currentThread setName threadName
    threadNamePromise success threadName
  }
}

Await.result(threadNamePromise.future, Duration.Inf)

future {
  myThreadExecutor run {
    println(Thread.currentThread.getName) // MySpecialThread
  }
}

future {
  myThreadExecutor run {
    println(Thread.currentThread.getName) // MySpecialThread
  }
}

println(Thread.currentThread.getName)   // MyThread 
```

我可以使用内置的 Scala 库中的任何内容吗？

## 编辑

我更新了片段以更好地反映意图

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:50:32.020

就在这里。您可以使用`scala.concurrent`标准库中的。更具体地说，您可以使用期货 - 高度可组合的异步计算。

```
import java.util.concurrent.Executors
import concurrent.{ExecutionContext, Await, Future}
import concurrent.duration._

object Main extends App {

  // single threaded execution context
  implicit val context = ExecutionContext.fromExecutor(Executors.newSingleThreadExecutor())

  val f = Future {
    println("Running asynchronously on another thread")
  }

  f.onComplete { _ =>
    println("Running when the future completes")
  }

  Await.ready(f, 5.seconds) // block synchronously for this future to complete

} 
```

Futures 在执行上下文中运行，这是线程池的抽象。此上下文可以隐式传递。在上面的示例中，我们使用了一个由 Scala 库定义的全局变量——但是您可以通过分配许多执行上下文来控制程序的这一方面。

该片段仅执行您要求的操作 - 同时运行代码。然而，future 远不止于此——它们允许您异步计算值、组合多个future 以获得它们之间存在依赖关系的结果，或者并行计算。

这是一个介绍：[http ://docs.scala-lang.org/overviews/core/futures.html](http://docs.scala-lang.org/overviews/core/futures.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:30:37.990

使用[@alexwriteshere 的答案](https://stackoverflow.com/a/15773992/596816)作为基础，我创建了这个实现：

```
import java.util.concurrent.Executors
import scala.concurrent.future
import scala.concurrent.JavaConversions.asExecutionContext

class ApplicationThread {
  protected implicit val context = 
    asExecutionContext(Executors.newSingleThreadExecutor())

  def run(code: => Unit) = future(code)
} 
```

* * *

**更新**

感谢@Dth 指出这是现代版本：

```
import java.util.concurrent.Executors
import scala.concurrent.{ExecutionContext, Future}

class ApplicationThread {
  protected implicit val context = 
    ExecutionContext.fromExecutorService(Executors.newSingleThreadExecutor())

  def run(code: => Unit) = Future(code)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:45:04.817

除了标准并发库之外，还有更多。例如，有`com.twitter`/`util-core`库可以让您执行以下操作：

```
val pool = FuturePool.unboundedPool
pool {
   <code>
} 
```

您的示例如下所示：

```
Thread.currentThread setName "MyThread"

// because you have to be using a single-threaded one to get the same name
val pool = FuturePool(Executors.newSingleThreadExecutor())

pool {
  Thread.currentThread setName "MySpecialThread"
}

pool {
  println(Thread.currentThread.getName) // MySpecialThread
}

println(Thread.currentThread.getName) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-25T21:45:22.617

基于[@EECOLOR](https://stackoverflow.com/users/596816/eecolor)的[回答](https://stackoverflow.com/a/15774778/5125206)，这是一个通用的、可重用的方法，它在单独的线程上执行任意代码：

```
import scala.concurrent.Future
import scala.concurrent.ExecutionContext.Implicits.global

def executeParallelTask[T](code: => T): Future[T] = Future(code) 
```

# c# - 从第 1 行标题中查找列，并获取列号 (Excel.interop?

> ID：15773125
> 
> 赞同：0
> 
> 时间：2013-04-02T19:51:55.833
> 
> 标签：c#, excel

如果我有一个像

姓名、年龄、身份证；

彼得, 35, 123456;

有没有办法让我通过在第 1 行中搜索年龄或类似方法来定位年龄是第 2 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:55:53.137

从 MSDN 检查 Excel 中的字符串搜索示例：http: [//msdn.microsoft.com/en-us/library/e4x1k99a.aspx](http://msdn.microsoft.com/en-us/library/e4x1k99a.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:08:49.177

您可以做的是遍历 excel 工作表中的每一列，并为每个名称/值对创建一个字典。例如，0 将映射到 Name，1 将映射到 age，2 将映射到 ID。从这里，您可以遍历每一行，并为该行中的每一列查找名称值对（基于列 ID）。从那里，您将能够确定年龄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:11:31.780

`Is there a way for me to locate that age is column numner 2, by searching for age in row 1, or similar?`

是的。假设这些行确实以您指定的格式保存，用逗号分隔，您可以轻松使用字符串的 Split 方法和 Linq 的 Select 方法：

```
 string row = "Name, age, ID";
        int columnNum = Array.IndexOf(row.Split(',')
                                .Select(x => x.Trim()).ToArray(), "age") + 1; 
```

解释：

`row.Split(',')`- 此方法将字符串拆分为字符串数组：{ "Name", "age", "ID" }

`.Select(x => x.Trim()).ToArray()`- 此表达式使用 LINQ 消除列 Name 中所有不必要的空格（方法 Trim() 删除字符串开头和结尾的空格）。

`Array.IndexOf`- 此方法在数组中查找所需值（“年龄”）的索引。

C# 中的索引从零开始。即“姓名”的索引为0，“年龄”的索引实际上为1（以此类推）。为了解决这个问题，我只需将“IndexOf”返回的数字加 1。

我强烈推荐阅读任何 C# 基础教程。一切都在那里:)

# python - 如何在 python homebrew 中更改 boost 的链接版本？

> ID：15773127
> 
> 赞同：1
> 
> 时间：2013-04-02T19:51:56.940
> 
> 标签：python, boost, homebrew, mapnik

我正在尝试将 mapnik 与我的 mac os x 10.8.3 上由 homebrew 完成的 python 安装一起使用。这是问题所在：

```
otool -L $(brew list boost | grep 'python.*.dylib')
/usr/local/Cellar/boost/1.53.0/lib/libboost_python-mt.dylib:
    /usr/local/lib/libboost_python-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/opt/python/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.0)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

如您所见，它指向`/usr/local/opt/python`... 这是完全错误的（这是苹果提供的默认 python，我不打算使用它）。

我怎样才能改变这个？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:47:50.060

我终于做到了。方法如下：

我运行了这个命令：

```
brew rm $(brew deps mapnik --with-cairo)
brew rm mapnik
brew rm boost
brew update
brew doctor
brew install --with-icu --build-from-source boost
brew install mapnik --with-cairo 
```

现在，命令`otool -L $(brew list boost | grep 'python.*.dylib')`仍然显示：

```
/usr/local/Cellar/boost/1.53.0/lib/libboost_python-mt.dylib:
    /usr/local/lib/libboost_python-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.0)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

这是完整的线程：[https ://github.com/mxcl/homebrew/issues/16144](https://github.com/mxcl/homebrew/issues/16144)

# c# - WPF 错误：“找不到管理 FrameworkElement 或 Framework...”

> ID：15773128
> 
> 赞同：2
> 
> 时间：2013-04-02T19:51:57.387
> 
> 标签：c#, wpf, canvas, frameworkelement

我收到以下错误：

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=图像路径；数据项=空；目标元素是“VisualBrush”（HashCode=52892165）；目标属性是“视觉”（类型“视觉”）

我正在尝试为我的(Named SearchTextBox) 属性设置一个`Canvas`类型，以便控件显示它。这包装了图标的路径。当我尝试运行它时，我看不到图标，我得到：`MainWindow``WPF Control``ImagePath``Canvas`

> System.Windows.Data 错误：2。

这是我的代码：

我的 WPF 控件：

搜索文本框.cs：

```
 public static readonly DependencyProperty ImagePathProperty =
            DependencyProperty.Register(
                        "ImagePath",
                        typeof(Canvas),
                        typeof(SearchTextBox));

 public Canvas ImagePath
    {
        get { return (Canvas)GetValue(ImagePathProperty); }
        set { SetValue(ImagePathProperty, value); }
    } 
```

通用的.xaml

```
 <Border x:Name="PART_SearchIconBorder"
                      Grid.Column="2"
                      VerticalAlignment="Stretch"
                      HorizontalAlignment="Stretch"
                      BorderBrush="{StaticResource SearchTextBox_SearchIconBorder}">
                            <Rectangle 
                                Width="15"
                                Height="15">
                                <Rectangle.Fill>
                                    <VisualBrush Stretch="Fill"
                                        Visual="{Binding ImagePath}" />
                                </Rectangle.Fill>
                            </Rectangle> 
```

我的观点：

```
<Controls:MetroWindow x:Class="TestUI.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:l="clr-namespace:UIControls;assembly=SearchTextBox"
    xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    Title="Window1" Height="423" Width="487">
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Resources/Icons.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />

        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>

<Grid>                      //----appbar_add is the canvas 
    <l:SearchTextBox ImagePath="{StaticResource appbar_add}" Height="39" Margin="118,52,116,0" VerticalAlignment="Top" Name="m_txtTest"  />
    <TextBox Margin="118,0,116,68" Name="m_txtSearchContent" Height="65" VerticalAlignment="Bottom" />
    <TextBlock HorizontalAlignment="Left" Margin="118,0,0,139" Width="107" Text="Search content" FontSize="14" Height="20" VerticalAlignment="Bottom" />
</Grid> 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:15:54.630

我假设 Generic.xaml 中的内容是`ControlTemplate`类的一部分`SearchTextBox`。由于它是一个控件模板，因此您需要使用`TemplateBinding`绑定到应用该模板的控件的属性。所以，改变：

```
Visual="{Binding ImagePath}" 
```

至

```
Visual="{TemplateBinding ImagePath}" 
```

# asp.net - VideoJS错误ie9 mp4

> ID：15773135
> 
> 赞同：1
> 
> 时间：2013-04-02T19:52:17.270
> 
> 标签：asp.net, asp.net-mvc-4, html5-video, video.js

我有一个提供 mp4 的 asp.net MVC 4 控制器，

```
public ActionResult GetVideoForEvent(int eventId)
    {
        var videoPath = "pathToVideo";
        var videoFileInfo = new FileInfo(videoPath);

        return new RangeFilePathResult("video/mp4", videoFileInfo.FullName, videoFileInfo.LastWriteTimeUtc, videoFileInfo.Length);
    } 
```

还有一个部分视图中的视频播放器，

```
@model int
    <link href="https://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/c/video.js"></script>

    <video class="video-js vjs-default-skin" controls autoplay preload="none" width="320" height="256" data-setup="{}"  >
        <source type="video/mp4" src="@Url.Action("GetVideoForEvent", new { eventId = Model})">
    </video> 
```

这适用于 ie8 和 ie10，但不适用于 ie9。只有在使用 videojs 时才会出现问题，如果我只使用`<video>`视频播放的 html5。此外，如果我将源更改为直接链接到 iis 上的文件，视频就会播放。

来自 ie9 控制台的输出：

```
LOG:  
LOG: Video Error[object Object] 
```

使用videojs时导致错误的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T12:58:30.787

我有同样的问题。检查您的 mp4 文件的 MIME 类型是否正确以及视频是否正确编码。

[我发现这个](http://blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to-debug.aspx)网站上的调试指南很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:13:00.997

我找到了一种解决方法。如果浏览器是 ie 8，则仅使用 videojs，视频在 ie8、9、10 和 Google chrome 上播放。

视频播放器在每个浏览器上看起来确实不同。

```
<!--[if lt IE 9]>
    <link href="https://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/c/video.js"></script>
<![endif]--> 
```

# php - exec 和 shell_exec 在 php 中不起作用

> ID：15773139
> 
> 赞同：1
> 
> 时间：2013-04-02T19:52:29.527
> 
> 标签：php, shell, permissions, exec, shell-exec

我遇到了 exec 和 shell_exec 的问题，我查看了这里的每个帖子，但似乎找不到问题。我正在使用的代码：

```
chdir('/');
$handle = shell_exec("/usr/bin/php /home/donor/public_html/batch/testlaunch.php 2>&1");
echo $handle .":". gettype($handle) . "\n";
$read = fread($handle, 2096);
echo $read; 
```

屏幕如下所示：

```
...
X-Powered-By: PHP/5.3.21 Content-type: text/html (repeated about 100 times)
X-Powered-By: PHP/5.3.21 Content-type: text/html 
PHP Warning: shell_exec() [function.shell-exec]: Unable to execute '/usr/bin/php /home/donor/public_html/batch/testlaunch.php 2>&1' in /home/donor/public_html/batch/test.php on line 4 X-Powered-By: PHP/5.3.21 Content-type: text/html 
Warning: shell_exec() [function.shell-exec]: Unable to execute '/usr/bin/php /home/donor/public_html/batch/testlaunch.php 2>&1' in /home/donor/public_html/batch/test.php on line 4
:boolean PHP Warning: fread() expects parameter 1 to be resource, boolean given in /home/donor/public_html/batch/test.php on line 6 
Warning: fread() expects parameter 1 to be resource, boolean given in /home/donor/public_html/batch/test.php on line 6
:string PHP Warning: fread() expects parameter 1 to be resource, string given in /home/donor/public_html/batch/test.php on line 6 (repeated another 100ish times) 
```

PHP 安全模式已关闭。文件所在文件夹的权限 .../batch/ 和 /usr/bin/php 都设置为 755。除了 php 之外，所有文件的用户都是相同的（php 文件用户是 root）。php.ini 文件中没有禁用任何内容。在 CLI 中运行良好。和简单的命令，例如`whoami`和`ls`工作正常。我觉得我错过了什么

编辑：尝试了 cpattersonv1 所说的并得到：

```
X-Powered-By: PHP/5.3.21 Content-type: text/html sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable X-Powered-By: PHP/5.3.21 Content-type: text/html sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable sh: fork: retry: Resource temporarily unavailable sh: fork: Resource temporarily unavailable X-Powered-By: PHP/5.3.21 Content-type: text/html 2540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

编辑 2：有谁知道为什么它看起来不止一次地尝试命令？

编辑 3：我将命令放在 .sh 文件中并尝试运行它。在 CLI 中工作，但在 php 中再次不起作用

```
chdir('/');
$handle = exec(". /home/donor/public_html/batch/test.sh"); 
```

我得到相同的输出；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:10:34.860

尝试 passthru intead，这样如果需要一段时间，执行就没有任何限制：

```
<?php

 passthru("/usr/bin/php /home/donor/public_html/batch/testlaunch.php 2>&1",$pass_result);
 echo $pass_result; 

?> 
```

或这个：

```
<?php

 passthru("/usr/bin/php /home/donor/public_html/batch/testlaunch.php",$pass_result,$error);
 echo $pass_result; 
 echo $error; 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:57:11.537

显然我使用了错误的 php 文件/路径 >< 像个傻瓜一样感谢各位的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T10:20:24.900

虽然这是一篇旧帖子，但这是我对其他用户的回答。

1.  将目录更改为可执行路径
2.  在没有可执行文件路径的情况下调用 shell_exec()
3.  将目录恢复到原始目录（这样代码的其他部分就不会受到阻碍）。

例子

```
$current_dir = getcwd();
$executable_dir = "\executables\";
chdir($executable_dir);

$output1 = shell_exec("executable.exe file_to_run.ext $parameter_to_pass");
var_dump($output1);

chdir($current_dir); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T20:11:24.853

尝试将您的网络服务器用户添加到对批处理目录具有 rw 权限的组。以 root 身份或使用 sudo：

```
usermod -G groupname username 
```

然后在批处理目录上：

```
chmod -R g+w batch 
```

# jquery - 更新 D3 图表导致图表重复

> ID：15773140
> 
> 赞同：2
> 
> 时间：2013-04-02T19:52:31.097
> 
> 标签：jquery, d3.js, getjson

在单击按钮后，我试图将 JSON 数据更新到 D3 直方图，这真是太费时间了。

虽然我解决了按钮单击以更新问题，但 D3 javascript 现在每次单击按钮都会附加一个图表，从而导致图表重复，而不是简单地更新数据。

我知道`append()`每次触发点击事件都会在 D3 代码中调用它，但我该如何解决这个问题，所以每次点击只有一个图表更新数据？

```
console.log('chart.js loaded');

$(document).ready(function() {

  var vimeoVideoId = $('p#vimeoVideoId').text();
  var api = 'http://localhost:3001/videos/' + vimeoVideoId + '/json';

  function initData() {
    $('#all-notes').click(function() {
      getData();
    });
  }

  function getData() {
    $.getJSON(api, draw);
  }

  function draw(json) {

    data = json;
    var duration = data.duration;

    var timeToSec = function(data) {
      notes = [];
      // convert min:sec to seconds
      for(i=0; i < data.notes.length; i++) {
        var min_sec = data.notes[i].timecode;
        var tt = min_sec.split(':');
        var seconds = tt[0]*60+tt[1]*1;
        notes.push(seconds);
      }
      return notes;
    };

    noteTimes = timeToSec(data);
    console.log(noteTimes);

    // Formatters for counts and times (converting numbers to Dates).
    var formatCount = d3.format(",.0f"),
        formatTime = d3.time.format("%H:%M"),
        formatMinutes = function(d) { return formatTime(new Date(2012, 0, 1, 0, d)); };

    var margin = {top: 10, right: 20, bottom: 30, left: 20},
        width = 550;
        height = 285;

    var x = d3.scale.linear()
        .domain([0, duration])
        // .domain([0, d3.max(noteTimes)])
        .range([0, width]);

    // Generate a histogram using twenty uniformly-spaced bins.
    var data = d3.layout.histogram()
        .bins(x.ticks(50))
        (noteTimes);

    var y = d3.scale.linear()
        .domain([0, d3.max(data, function(d) { return d.y; })])
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .tickFormat(formatMinutes);

    var svg = d3.select("#chartSet").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var bar = svg.selectAll(".bar")
        .data(data)
      .enter().append("g")
        .attr("class", "bar")
        .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

    bar.append("rect")
        .attr("x", 1)
        .attr("width", x(data[0].dx) - 1)
        .attr("height", function(d) { return height - y(d.y); });

    bar.append("text")
        .attr("dy", ".75em")
        .attr("y", 6)
        .attr("x", x(data[0].dx) / 2)
        .attr("text-anchor", "middle")
        .text(function(d) { return formatCount(d.y); });

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);
  }

  initData();

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:35:24.663

要处理创建和更新，您必须重新组织`draw`函数的编写方式。

```
function draw(json) {

   // Initialization (few wasted CPU cycles)
   // ...

   // Update hook
   var svg = d3.select("#chartSet").data([data]);

   // Enter hook
   var svgEnter = svg.enter();

   // Enter cycle
   svgEnter.append("svg")
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // Update cycle
    svg
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);

    // Exit cycle (not really needed here)
    svg.exit().remove();

    // Update hook
    var bar = svg.selectAll(".bar")
        .data(data)

    // Enter hook
    var barEnter = bar.enter();

    // Enter cycle
    var barG_Enter = barEnter
                        .append("g")
                        .attr("class", "bar")
    barG_Enter
        .append("rect")
        .attr("x", 1);

    barG_Enter
        .append("text")
        .attr("dy", ".75em")
        .attr("y", 6)
        .attr("text-anchor", "middle");

    // Update cycle
    bar.attr("transform", function(d) { 
        return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

    bar.select("rect")
        .attr("width", x(data[0].dx) - 1)
        .attr("height", function(d) { return height - y(d.y); });

    bar.select("text")
        .attr("x", x(data[0].dx) / 2)
        .text(function(d) { return formatCount(d.y); });

    // Exit cycle
    bar.exit().remove();

    // Enter cycle
    svgEnter.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    // Update cycle
    svg.select('g.x.axis')
        .call(xAxis);
} 
```

这种[经典的进入-更新-退出](http://mbostock.github.com/d3/tutorial/circle.html)模式在[这篇关于制作可重用图](http://bost.ocks.org/mike/chart/)的文章中得到了改进。这个答案很大程度上借鉴了这种模式。

通过使用闭包的稍微好一点的实现，您将能够节省每次初始化时浪费的几个 CPU 周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:01:08.350

您可以在单击按钮时调用的函数之外创建 SVG，也可以检查它是否存在，如果不存在则仅添加它。也就是说，像

```
var svg = d3.select("svg");
if(svg.empty()) {
    // code for appending svg
} 
```

同样的事情也适用于函数末尾附加 x 轴的代码块。对于条形图，除了输入选择之外，您需要做的就是处理更新和退出选择，即设置尺寸并可能根据新数据删除元素。

# iphone - UITableViewController 不更新内容是我应用手动排序

> ID：15773141
> 
> 赞同：0
> 
> 时间：2013-04-02T19:52:52.027
> 
> 标签：iphone, ios, uitableview, sorting, nsindexpath

使用 UITableViewController，我在其中显示一些根据制造年份排序的产品。每当用户连续点击（每行代表一个产品）时，就会显示一个新视图来编辑相同的产品。

因此，如果用户更改了制造年份，则保存后它应该显示在适当位置的主表视图中（即相应地再次排序）。为了实现这一点，我在....中调用 sort() 方法。这里 sort 方法返回 NSMutableArray 类型的对象。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Sort the records based on number of days.
    sortedProducts = [DTOConverter sort:unsortedProducts];

    return [sortedProducts count];
} 
```

但问题是，在表格视图中，在我反弹整个视图之前，我仍然在该特定行中拥有旧值，然后它会填充新的更新值。

如果添加了新产品，也会发生同样的事情。请纠正我做错的地方，我确信这个问题可能与 indexPath 有关，但我不知道如何解决它。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:56:17.293

更新 tableview 数据调用

```
[tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:56:30.573

您必须使用以下方法之一刷新表或单个行：

*   重新加载数据
*   reloadRowsAtIndexPaths:withRowAnimation
*   reloadSections:withRowAnimation
*   重新加载SectionIndexTitles

请参阅每种方法的文档：[UITableView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableView)

注意：如果你只更新一行，不要调用[tableView reloadData]。不必重新加载表中的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:56:16.540

您可能必须在从 tableview 加载的新视图中设置委托，然后设置 tableviewcontroller 以实现该新视图控制器的委托方法。然后从该委托方法调用重新加载数据这是委托的示例：[委托示例](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)

# python - 在第二次出现没有字符串切片的字符之前选择一个子字符串

> ID：15773145
> 
> 赞同：-1
> 
> 时间：2013-04-02T19:52:57.870
> 
> 标签：python, substring

如何使用 python 选择仅包含第二个冒号之前的字符的子字符串？例如，假设我有一个字符串 ABC*01:02:03:04 和另一个字符串 A*101:23:444。如何在不使用字符串拼接器的情况下从上述字符串中提取子字符串 A*01:02 和 ABC*101:23，即类似于 mystring[:5] 的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:01:26.363

你可以写

```
':'.join('ABC*01:02:03:04'.split(':')[:2]) 
```

它使用拼接，但它为您提供前两组而不是固定数量的字符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:57:36.083

您可以使用正则表达式。

```
import re
re.match(r'(.*?:.*?):.*', 'ABC*01:02:03:04').groups()[0]
-> 'ABC*01:02'
re.match(r'(.*?:.*?):.*', 'A*01:02:03:0').groups()[0]
-> 'A*01:02' 
```

# java - ANTLR 语言 - 未创建树（EOF - 语法错误）

> ID：15773146
> 
> 赞同：0
> 
> 时间：2013-04-02T19:53:01.917
> 
> 标签：java, tree, antlr, token, grammar

我在以下语言定义中显然有一个错误：

```
grammar Hello;

object  :
ALL* NAME ALL* '{' 
    (ALL* | (ALL* NAME ALL* NAME)* | (ALL* object)*)*
'}' ALL*;

ALL     :
(~('{' | '}' | '"'))+ -> skip;      // All but braces and double quotes

NAME    :
'"' ALL* '"'; 
```

当我尝试读取文件或直接添加内容（使用`run.bat Hello object -gui`）时，解析器给我一个**语法错误**：`mismatched input '<EOF>' expecting NAME`. 而且我只有一个带有单个节点的树：'object'。

这是Java源代码：

```
public static void main(String[] args) throws Exception {
    HelloLexer lexer = new HelloLexer(new ANTLRFileStream("gamemodes.txt"));
    TokenStream tokenStream = new CommonTokenStream(lexer);
    HelloParser parser = new HelloParser(tokenStream);

    System.out.println(lexer.getAllTokens().size());

    parser.setBuildParseTree(true);

    // Tree Creation
    RuleContext tree = parser.object();
    tree.inspect(parser);
} 
```

最后，文件结构（在任何地方都有一些空格/字符（没有大括号和双引号））：

```
...
"objName"
{
    ...
    "innerObjName1"
    {
        "firstProperty"  "firstResult"
        ...
        "secondProp"     ""
    }

    "innerObjName2"
    {
        "firstProperty"  "firstResult"
        "secondProp"     ""
    }
}
... 
```

**注意**：我在 Windows 上。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:03:10.920

`reportAttemptingFullContext`不是错误。它只是让您知道 ANTLR 4 正在使用其内部实现部分，该部分使用完整的解析上下文来确保准确性。包含该消息是因为完整上下文算法比它首先尝试的 SLL 算法慢一点。

**编辑：**如果您使用的是非标准发行版，您可能需要指定以下选项以确保构建解析树。此选项在官方发行版中默认为 true。

```
parser.setBuildParseTree(true); 
```

**编辑 2：**涵盖语法问题。

这是`object`原始语法中的规则，只有格式更改。

```
object // intermediate form 1
    :   ALL* NAME ALL* '{' 
        (   ALL*
        |   (ALL* NAME ALL* NAME)*
        |   (ALL* object)*
        )*
        '}' ALL*
    ; 
```

这个规则是高度模糊的。作为一个简单的示例，请注意以下修改后的语法实际上将匹配相同的输入。

```
object // intermediate form 2
    :   ALL* NAME ALL* '{' 
        (   ALL
        |   ALL* NAME ALL* NAME
        |   ALL* object
        )*
        '}' ALL*
    ; 
```

另一个简化从 2 个 alt 中删除了不必要的`ALL*`前缀。

```
object // final form
    :   ALL* NAME ALL* '{' 
        (   ALL
        |   NAME ALL* NAME
        |   object
        )*
        '}' ALL*
    ; 
```

作为最后的更改，我将创建一个`entry`以显式结尾的规则`EOF`：

```
entry : object EOF; 
```

要解析您的输入，请调用`entry()`而不是`object()`确保解析您的所有输入。如果您需要该`ObjectContext`对象，可以通过调用`EntryContext.object()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:15:04.123

当您`skip`使用词法分析器规则时，您不得在解析器规则中使用它。

尝试这样的事情：

```
grammar Hello;

parse
 : object EOF
 ;

object
 : NAME (OBRACE object+ CBRACE | NAME)
 ;

NAME   : '"' ~["{}]* '"';
OBRACE : '{';
CBRACE : '}';
OTHER  : ~["{}]+ -> skip; 
```

# wcf - 事件驱动的设计编排

> ID：15773151
> 
> 赞同：1
> 
> 时间：2013-04-02T19:53:09.690
> 
> 标签：wcf, events, architecture, domain-driven-design, orchestration

我有一个关于事件驱动设计架构的问题。

我有一个包含许多域服务的服务器应用程序。每个服务都是 WCF 服务，我希望这些服务通过我创建的专用 pub-sub 基础结构使用引发事件进行通信。

现在一切正常，但我有一个关于编排的问题..

我有一个管理器服务，它接受来自消费者的调用并启动进程，向组件 A 发送消息，组件 A 又向组件 B 发送消息，依此类推。

最终，其中一些服务会为管理器服务引发事件，该服务不会保持传入请求的状态。

编排或管理此流程的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:00:38.970

尤其看一下[NServiceBus](http://nservicebus.com/)和[NServiceBus sagas](http://support.nservicebus.com/customer/portal/articles/860458-sagas-in-nservicebus)。saga（NSB 中的含义更类似于“流程管理器”）维护状态并通过某个 ID 关联消息。在您的情况下，经理服务是一种传奇。它应该维护它管理的每个进程的状态。此状态应由相关 ID 键入，以便由组件之间发送的所有消息共享。

# batch-file - 删除除命令行中没有扩展名的文件以外的所有文件

> ID：15773157
> 
> 赞同：3
> 
> 时间：2013-04-02T19:53:27.527
> 
> 标签：batch-file, cmd, wildcard, delete-file

我有一个将日志转储到文件夹的应用程序。它将文件写入不带扩展名的最新文件，每个旧版本都会在末尾附加一个 .1、.2、.3 等。

例子：

```
Filename   
Filename.1  
Filename.2  
Filename.3 
```

我想写一个删除“ `filename.?`”的基本脚本，但是每当我写类似的东西时

```
del /s "Filename.?" 
```

或者

```
del /s "filename.*" 
```

它会删除具有该文件名的所有内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:00:32.343

如果您不介意暂时重命名文件，您可以这样做：

```
ren filename filename_keep
del filename.*
ren filename_keep filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:17:38.170

为了好玩，写了一个小python脚本。

```
import os

for f in os.listdir('.'):
    if os.path.isfile(f):
        if '.' in f:
            os.remove(f) 
```

只需弹出一个 python shell 并运行它，就像一个魅力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:17:41.613

假设是 Windows，把它放在一个名为“exclude_delete.bat”的文件中：

```
@echo off & setlocal

if "%1"=="" goto :syntax

set wildcard=%1

for %%f in (%wildcard%) do (
  if not "%%~xf"=="" (
    echo Deleting: %%f
    del "%%f"
  ) else (
    echo Keeping: %%f
  )
)

goto :eof

:syntax
echo. Syntax: %0 ^<wildcard^>
echo.
echo. Example: to delete every file "Filename.*" except "Filename":
echo.   %0 Filename.* 
```

# javascript - 从页面 URL 获取 Open Graph 对象 ID

> ID：15773165
> 
> 赞同：3
> 
> 时间：2013-04-02T19:54:06.953
> 
> 标签：javascript, json, facebook-opengraph

如何从页面本身获取与页面配对的 Facebook 对象 ID？

例如，我直接询问对象 ID 325186347604922，得到：

```
<pre>
{
  "url": ".../ricetta-bigne_salati.htm", 
  "type": "ricettepercucinare:recipe", 
  "title": "Bignè salati", 
  "image": [
    {
      "url": ".../magazine/wp-content/uploads/2013/03/101-150x150.jpg", 
      "width": 150, 
      "height": 150
    }
  ], 
  "description": "Gli ingredienti e la procedura per preparare la ricetta Bignè salati.", 
  "data": {
    "course": "Antipasto", 
    "foreign_id": 130400
  }, 
  "updated_time": "2013-03-28T10:12:17+0000", 
  "id": "325186347604922", 
  "application": {
    "id": "118665634826424", 
    "name": "Ricettepercucinare.com", 
    "url": "https://www.facebook.com/apps/application.php?id=118665634826424"
  }
}</pre> 
```

但是，例如，这个页面[http://www.ricettepercucinare.com/ricetta-bigne_salati.htm](http://www.ricettepercucinare.com/ricetta-bigne_salati.htm)如何知道它自己的 ID？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:03:50.043

目前无法从 URL 中查找对象 ID - 尽管应该可以。

应该可以使用：

```
http://graph.facebook.com/?id=http://www.ricettepercucinare.com/ricetta-bigne_salati.htm 
```

但这不起作用。

请在developers.facebook.com/bugs 提出错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T18:07:00.127

这家伙的解决方案怎么样：[http ://blog.odbol.com/?p=9](http://blog.odbol.com/?p=9)

```
function facebookGetIdForUrl(url, callback) {
  //see http://developers.facebook.com/docs/reference/fql/object_url/
  FB.api({
    method: 'fql.query',
    query: "SELECT id FROM object_url WHERE url = '" + url + "'"
  }, function(response) {
    callback(response[0].id);
  });
}

facebookGetIdForUrl("http://facebook.com", function (id) {
  alert("Facebook ID = " + id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T17:15:22.453

使用 FQL 是可能的：

```
select id, url from object_url where url in ('http://www.watchth.is/movies/9166-baraka') 
```

[在 Graph API Explorer 中查看它](https://developers.facebook.com/tools/explorer/?fql=select%20id,%20url%20from%20object_url%20where%20url%20in%20%28%27http://www.watchth.is/movies/9166-baraka%27%29)，或者直接使用这个 ajax 调用：`https://graph.facebook.com/fql?q=select%20id%2C%20url%20from%20object_url%20where%20url%20in%20('http%3A%2F%2Fwww.watchth.is%2Fmovies%2F9166-baraka')&format=json&suppress_http_code=1`

[感谢 Rees 对类似问题的回答](https://stackoverflow.com/questions/9474037/i-have-16-000-urls-i-need-to-get-the-facebook-graph-id-of-each-one)

# java - ON DUPLICATE KEY UPDATE 的 Prepared Statement 语法（参数数量错误）

> ID：15773167
> 
> 赞同：6
> 
> 时间：2013-04-02T19:54:13.307
> 
> 标签：java, mysql, sql-update, prepared-statement, on-duplicate-key

这是我想要做的。如果主键（entity_id）存在，我想插入该表或更新记录。我只是遇到了 SQL 语法的问题。它不会让我拥有比第一个“值”数量更多的参数，所以我收到以下错误：

参数索引超出范围（7 > 参数数量，即 6）。

```
int insertOrUpdateSuccess = MyDBSyncher.UPDATE("INSERT INTO " + DB_NAME + ".entities " +
    "(`entity_id`, `wai_type`, `wai_id`, `character_id`, `looted`, `creation_time`) " +
    "VALUES ((?), (?), (?), (?), (?), (?)) " +
    "ON DUPLICATE KEY UPDATE " +
    "`wai_type`='(?)', `wai_id`='(?)', `character_id`='(?)', `looted`='(?)'", 
    new String[]{tmpEntityId, values[0], values[1], values[2], values[3], values[4],
    values[0], values[1], values[2], values[3]}); 
```

[我认为这](https://stackoverflow.com/questions/14089055/pdo-prepared-statements-for-insert-and-on-duplicate-key-update-with-named-placeh)与我所要求的有点相似，但我无法根据我的需要对其进行解释。很抱歉可能发布重复。

哦，这是我的代码中的 UPDATE() 函数：

```
public static int UPDATE(String updateStatement, String[] params){
    try {
        if(!conn.isClosed()) {
            logger.trace("Successfully connected to MySQL server using TCP/IP - " + conn);

            stat = conn.prepareStatement(updateStatement);
            for (int i = 0; i < params.length; i++){
                stat.setString(i+1, params[i]);
            }
            return stat.executeUpdate();
        }
    } catch(SQLException eSQL) {
        logger.fatal(eSQL.getMessage());
    }
    return -1;
} 
```

感谢您对此的任何帮助。:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-03-27T06:05:00.963

为什么不只是摆脱将绑定参数放在跟随查询的重复值本身中：

```
INSERT INTO mytable (col1, col2, col3) VALUES (?, ?, ?)
ON DUPLICATE KEY UPDATE col1=?, col2=?, col3=?; 
```

可以重写为：

```
INSERT INTO mytable (col1, col2, col3) VALUES (?, ?, ?)
ON DUPLICATE KEY UPDATE col1=VALUES(col1), col2=VALUES(col2), col3=VALUES(col3); 
```

IMO 应该更喜欢第 2 次而不是第 1 次，因为：

*   不使用查询中“ON DUPLICATE KEY UPDATE”部分的绑定参数意味着您不必编写额外的代码（或在您的情况下进行迭代）来绑定它们

*   编写更少的代码意味着发生绑定错误（错别字等）的机会更少

*   它具有更好的可读性

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T20:23:46.193

在 a 的上下文中`PreparedStatement`，字符`?`是一个绑定参数，稍后将被某个值替换（使用 setter）。如果您在引号中使用它，则该语句将其视为文字，而不是被替换。您查询的这一部分：

```
"`wai_type`='(?)', `wai_id`='(?)', `character_id`='(?)', `looted`='(?)'", 
```

设置`wai_type`为`(?)`，这不是您想要的。摆脱单引号。实际上，也可以摆脱```角色。

# apache - 两个虚拟主机都默认

> ID：15773169
> 
> 赞同：0
> 
> 时间：2013-04-02T19:54:24.370
> 
> 标签：apache, xampp, virtualhost

我正在尝试将虚拟主机添加到 xampp 服务器，但似乎我遗漏了一些东西，因为第二个站点没有显示，而是显示了 localhost。我不知道这些设置有什么问题：

```
NameVirtualHost *:80
<VirtualHost *:80>
    DocumentRoot "C:/xampp/htdocs"
    ServerName localhost
  </VirtualHost>
  <VirtualHost *:80>
    DocumentRoot "c:/xampp/htdocs/site1/public"
    ServerName site1
     <Directory "C:/xampp/htdocs/site1/public">
         AllowOverride All
         Order allow,deny
         Allow from all
         Options all
    </Directory>
</VirtualHost> 
```

我将虚拟主机添加到主机文件中：

```
127.0.0.1       localhost   site1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:02:06.963

也许尝试添加

```
127.0.0.1 site1.local 
```

到您的主机文件（在 Windows C:\windows\system32\drivers\etc\hosts 上）

保存文件并确保从控制面板重新启动 xampp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:54:56.670

是的，只需使用 Mike 的解决方案，不要忘记取消注释行

```
#Include /Applications/XAMPP/etc/extra/httpd-vhosts.conf 
```

在您的 httpd.conf 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:02:34.903

试试这个：

在您的`httpd-vhosts.conf`文件中：

```
<VirtualHost localhost>
    DocumentRoot "C:\xampp\htdocs"
    ServerName localhost
</VirtualHost>

<VirtualHost site1>
    DocumentRoot "c:\xampp\htdocs\site1\public"
    ServerName site1
    <Directory "C:\xampp\htdocs\site1\public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Order Allow,Deny
        Allow from all
    </Directory>
</VirtualHost> 
```

在你的`hosts`文件中：

```
127.0.0.1 localhost
127.0.0.1 site1 
```

**我在这里做了什么：**

*   `*:80`我没有使用 ，而是使用主机名。这给了它一种更直接的匹配方法。
*   我已经用反斜杠交换了所有正斜杠。这并没有真正的区别，但 Windows 使用反斜杠 - 这只是一个经验法则。
*   我已删除`NameVirtualHost`，因为据我目前所知，它没有任何区别，因此已贬值。未来的版本可能会将其识别为未知密钥。

# c# - 未加载已部署的 Outlook 插件 2007

> ID：15773171
> 
> 赞同：2
> 
> 时间：2013-04-02T19:54:37.083
> 
> 标签：c#, winforms, add-in, outlook-addin, outlook-2007

这是我的第一个插件项目，我有一个很大的问题。

我创建了一个插件项目，它在开发计算机上运行良好，但是当我将它部署到测试计算机时，插件不显示新的命令栏和按钮，但它位于“活动插件”中。我按照他们在 Microsoft MSDN 中所说的那样进行了项目设置，按照他们所说的添加了一个注册表项并遵循了所有基本步骤，那么为什么插件在我的计算机上部署时工作正常，但在测试计算机上却没有？插件项目适用于 Outlook 2007，我使用的是 Visual Studio 2010。

# java - 将数组列表转换为数组

> ID：15773172
> 
> 赞同：-2
> 
> 时间：2013-04-02T19:54:39.910
> 
> 标签：java, arrays, arraylist

我有一个 Arraylist，我想将其转换为数组。我正在使用这个：

```
double[] array = new double[list.size()];
double [] array = list.toArray(new double[list.size()]); 
```

但是，它不起作用。知道如何解决吗？提前致谢。它似乎返回对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:57:35.780

为了将 a 转换`List<Double>`为 a`double[]`或任何您需要原始类型的东西，除了执行传统`for`循环（或调用执行传统循环的第三方库方法`for`，例如 Guava's [`Doubles.toArray`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Doubles.html#toArray%28java.util.Collection%29)）之外别无选择。

```
double[] array = new double[list.size()];
for (int i = 0; i < list.size(); i++) {
  array[i] = list.get(i);
} 
```

或者，你可以做

```
Double[] array = list.toArray(new Double[list.size()]); 
```

这将为您提供 boxed`Double`的数组，无论如何这可能足以满足您的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:58:07.400

List 不能包含原始类型。假设它包含 的实例`Double`，唯一的方法是遍历列表并拆箱每个元素（希望列表中没有 null）：

```
double[] array = new double[list.size()];
int i = 0;
for (Double d : list) {
    array[i] = d;
    i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:57:31.727

它应该是：

```
Double[] array = new Double[list.size()];
list.toArray(array); // fill the array 
```

如果您想要一个基元数组，请遍历数组中的每个元素：

```
double[] array = new double[list.size()];
for(int i = 0; i < list.size(); i++) array[i] = list.get(i).doubleValue(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:59:06.293

请阅读 java 文档：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)

HTH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T19:59:39.570

使用 Object Double 而不是原始的 double：

```
ArrayList<Double> list = new ArrayList<Double>();
...add data
Double[] array=list.toArray(new Double[list.size()]); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-02T13:40:14.943

```
 StringBuffer strBuffer = new StringBuffer();
        for(Object o:list){
            strBuffer.append(o);
        }
        double []x = new double[]{strBuffer.toString()}; 
```

我认为这应该有效

# jquery - .ajax - 附加的成功数据被复制

> ID：15773176
> 
> 赞同：0
> 
> 时间：2013-04-02T19:54:49.327
> 
> 标签：jquery, ajax

我正在使用 .ajax 获取一些数据，然后将数据附加到 html 元素。现在，有两个音频帖子和数据正在被检索。但是发生了什么，下面代码中的方法是将两个帖子中的帖子数据附加到每个帖子中。比如说，帖子 A 有来自帖子 A 和 B 的数据。帖子 B 有来自帖子 A 和 B 的数据。我在导致这种情况的代码中遗漏了什么？

```
$('.audio.post').each(function() {
    var audiopostID = $(this).attr('data-postID');

    $(this).find('.standard-player').hide();

    var audioPath = '/api/read/json?id=' + audiopostID;

    $.ajax({
        url: audioPath,
        dataType: 'jsonp',
        timeout: 5000,
        success: function(data) {
            audioSrc = data.posts[0]['audio-player'];
            audioURL = decodeURIComponent(/audio_file=(.*)&color/.exec(audioSrc)[1]);
            //console.log(audioURL);

            $('.custom-player').append('<audio preload="none" controls>');
            $('audio').append($('<source>').attr({
                src: audioURL,
                type: 'audio/mpeg'
            }));
        }
    });
}); 
```

在控制台 ( [http://cl.ly/O0pk](http://cl.ly/O0pk) ) 中查看元素时，每个帖子都有两个标签，`<audio>`第一个`<audio>`标签有两个`<source>`标签。对于这里的松鼠描述，我深表歉意。只是想更好地理解 .ajax 的用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:01:07.520

如果你不想给他们一个 id，你可以跟踪当前的音频：

```
$('.audio.post').each(function() {
    var audiopostID = $(this).attr('data-postID');
    var $thatAudio = $(this).closest('audio'); // Or however you can navigate to it

    $(this).find('.standard-player').hide();

    var audioPath = '/api/read/json?id=' + audiopostID;

    $.ajax({
        url: audioPath,
        dataType: 'jsonp',
        timeout: 5000,
        success: function(data) {
            audioSrc = data.posts[0]['audio-player'];
            audioURL = decodeURIComponent(/audio_file=(.*)&color/.exec(audioSrc)[1]);
            //console.log(audioURL);

            $('.custom-player').append('<audio preload="none" controls>');
            $thatAudio.append($('<source>').attr({
                src: audioURL,
                type: 'audio/mpeg'
            }));
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:58:03.787

`$('audio').append`

jQuery 翻译：“我将在 DOM 中查找*所有* `audio`元素并将这些内容附加到它们。

给你的`audio`元素一个唯一的 ID 来解决这个问题。

# windows - 如何修改我的开发环境以创建网络驱动器别名？

> ID：15773180
> 
> 赞同：1
> 
> 时间：2013-04-02T19:55:31.793
> 
> 标签：windows, alias

免责声明：这个问题跨越了编码和超级用户领域之间的奇怪边界。我什至不确定要使用什么术语来表达我所要求的一半，所以请耐心等待...

我正在为远程客户端开发一种签入/签出类型的功能，他们想要在用户的本地计算机和中央网络位置之间来回移动一些文件。他们希望网络位置是可配置的。在过去几周的开发过程中，我们将配置目录设置为简单的“C:\Storage”，用于初始测试目的，我在开发环境的 C: 驱动器上创建了一个 Storage 目录。

今天我得到了他们想要开始使用的网络配置。我希望他们使用映射的网络驱动器，这样我就可以将相同的字母映射到我的本地驱动器，并让我的开发环境继续使用他们的新配置文件工作。不幸的是，他们想要使用的路径使用“\machinename\dir\dir\dir...”直接指向他们内部网络上的某些机器。

是否有某种方法可以设置我的开发环境，以便当我遇到他们的网络路径时使用`DirectoryInfo`或任何它将解析为本地目录？如果它是一个映射的网络驱动器，我可以`subst`在命令提示符下使用它们将它们的字母指向我本地驱动器上的一个目录，但是使用这个完整路径，我不知道如何做类似的事情或者是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:51:19.463

现在我更好地理解了你的问题：

如果您想使用 UNC 路径访问本地计算机，则需要设置一个共享，这听起来像是您已经拥有的。然后您可以通过以下方式访问它：

```
\\localhost\c$\dir\dir 
```

希望这足以让您在开发方面完成工作。

# windows - 用于最小化其他应用程序的批处理文件

> ID：15773184
> 
> 赞同：10
> 
> 时间：2013-04-02T19:55:40.687
> 
> 标签：windows, firefox, vbscript, batch-file

我怎样才能有一个打开应用程序的 bat 文件，让我们称之为 firefox.exe。我将如何调用 bat 文件或任何其他脚本，即 vbs 以最小化应用程序，即 firefox.exe，然后让我们说一两分钟后关闭它。请注意这`start\min`不起作用？下面是我的脚本的一个示例/部分？请帮忙吗？

```
"C:\Program Files\Mozilla Firefox\firefox.exe"  -tray 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T20:21:46.483

尝试：

```
start /min "" firefox 
```

.. 或（如果 FireFox 是您的默认浏览器）：

```
start /min "" "http://google.com" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:00:58.363

正确的参数是`-turbo`，但它早已过时并且可能不起作用。

`start "path\firefox.exe http://example.com/file.html" /MIN`

可能会更好。

编辑：哎呀，它已经被建议了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:01:05.223

您是否尝试过：
启动 /min C:\Program Files\Mozilla Firefox\firefox.exe

使用正斜杠？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T05:59:22.573

以下是我使用名为 nircmd 的命令行工具解决问题的方法，我使用 hide 参数隐藏了 firefox，它确实可以完美运行。请参阅代码示例。

```
START "" "C:\Program Files\Mozilla Firefox\firefox.exe" -P "america" -no-remote http://hakikahost.com error.html
"nircmd.exe" win hide process "firefox.exe" 
```

nircmd 的链接...[链接](http://www.nirsoft.net/utils/nircmd.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T22:03:33.747

在这`Firefox`方面是相当有问题的。这是我能达到的最好的锻炼`VBScript`。

```
Firefox = """c:\path to\firefox.exe"""
Set oShell = CreateObject("WScript.Shell")
Set oFFox  = oShell.Exec(Firefox)

WScript.Sleep 1000
oShell.AppActivate oFFox.ProcessID

WScript.Sleep 1000
oShell.SendKeys "% (n)" ' minimize (Alt+SpaceBar,n)

WScript.Sleep 10 * 1000 ' wait 10 seconds
'next AppActivate call need Full and Exact title
oShell.AppActivate "Mozilla Firefox Start Page - Mozilla Firefox"

WScript.Sleep 1000
'oShell.SendKeys "% (r)"  ' restore (Alt+SpaceBar,r)
oShell.SendKeys "%{F4}"  ' close (Alt+F4) 
```

**PS**实际上， restore 命令是多余的（我注释掉了那行）。

**请注意**，我还没有使用`oShell.AppActivate oFFox.ProcessID`，`oFFox.Terminate`因为在最小化过程之后都对我不起作用，因此我使用标题`AppActivate`来`SendKeys`关闭应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T07:03:26.513

你看过[https://tn123.org/mintrayr/](https://tn123.org/mintrayr/)插件吗？这样可以尽量减少firefox的尝试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-09T18:23:54.817

尝试使用[***windowMode.bat***](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/.net/c/windowMode.bat)：

```
call windwoMode -title "Mozilla Firefox" -mode minimized 
```

尽管您需要知道要最小化的窗口的起始字母。

# ruby - rails改变部分集合渲染的路径

> ID：15773185
> 
> 赞同：4
> 
> 时间：2013-04-02T19:55:44.453
> 
> 标签：ruby, ruby-on-rails-3, partial-views, sti

我有一个 STI 关系，其中对话由消息和图像组成。

现在，当我去渲染它们时，我使用：

```
<%= render conversation %> 
```

效果很好。它找到给定对象的给定模板并呈现它。

现在对于我的移动网站，我现在只想使用相同的东西，它应该会说：

```
/mobile/message/_message.html.erb 
```

代替

```
/message/_message.html.erb 
```

所以在我的控制器中我说：

```
if mobile?
  prepend_view_path "mobile"
end 
```

确实会调用它，并且它“预先设置了我的视图路径”，当我这样做时我可以看到它正在工作：

```
raise view_paths.inspect 
```

但是现在当我做我的

```
<%= render conversation %> 
```

它仍在默认位置，即 /views/ 中查找部分

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T20:19:29.980

好吧，这应该可行，但令人沮丧的是不优雅：

```
<% conversation.each do |c| %>
  <% c_class = c.class.to_s.downcase.underscore %>
  <%= render :partial => "mobile/#{c_class}/#{c_class}", :object => c %>
<% end %> 
```

# c++ - 使用 boost::python 调用一个 C++ 函数，该函数将指针指向一个数组

> ID：15773186
> 
> 赞同：2
> 
> 时间：2013-04-02T19:55:45.483
> 
> 标签：c++, python, pointers, boost-python

我想调用一个 C++ 函数，该函数使用 boost::python 获取指向 Python 列表中的数组的指针。我有这样的解决方案：

```
//A function that takes a pointer to an array
void doSomething( int const n, double * a)
{
    for ( std::size_t i=0; i<n; ++i)
        a[i] += 1.;
}  

//My solution 
std::vector<double> add1 (std::vector<double> vec)
{
    doSomething(vec.size(),vec.data());
    return vec;
}

//boost::python registration 
#include <boost/python.hpp>
BOOST_PYTHON_MODULE(vector2)
{
    using namespace boost::python;
    def("doSomething", doSomething);
    def("add1", &add1);

    class_<std::vector<double> >("VectorOfDouble")
        .def(vector_indexing_suite<std::vector<double> >());
} 
```

在 Python 中有效：

```
>>> import vector2
>>> lint=[1,2,3,4]
>>> old_vector = vector2.VectorOfDouble()
>>> old_vector.extend(arg for arg in lint)
>>> new_vector=vector2.add1(old_vector)
>>> print list(old_vector)
[1.0, 2.0, 3.0, 4.0]
>>> print list(new_vector)
[2.0, 3.0, 4.0, 5.0] 
```

但是，这需要将原始列表复制到新列表中。由于我正在使用的数组非常大，我宁愿避免这种情况。像这样对我的解决方案进行修改不会返回任何错误，但不会修改原始对象：

```
//My solution 
void add1 (std::vector<double> vec)
{
    doSomething(vec.size(),vec.data());
} 
```

在[蟒蛇](http://en.wikipedia.org/wiki/Python_%28programming_language%29)：

```
>>> import vector2
>>> lint=[1,2,3,4]
>>> old_vector = vector2.VectorOfDouble()
>>> old_vector.extend(arg for arg in lint)
>>> print list(old_vector)
[1.0, 2.0, 3.0, 4.0]
>>> vector2.add1(old_vector) 
>>> print list(old_vector)
[1.0, 2.0, 3.0, 4.0] 
```

有没有办法调用 doSomething 并修改原始向量而不创建新向量？

顺便说一句，根据另一篇文章的建议，我还尝试编写一个简单的包装器来获取指向向量第一个元素的指针：

```
std::string * pointer (std::string& p)
{
    return &p;
} 
```

但似乎任何返回指针的函数的[Boost](http://en.wikipedia.org/wiki/Boost_%28C++_libraries%29)注册都会在编译时产生非常长的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:11:15.490

请注意，您将 std::vector 作为副本。

您是否尝试过将其作为参考并查看结果会怎样？

```
// take by reference
void add1 (std::vector<double>& vec)
{
    doSomething(vec.size(),vec.data());
} 
```

# smalltalk - 如何更改子变形位置

> ID：15773188
> 
> 赞同：5
> 
> 时间：2013-04-02T19:55:47.467
> 
> 标签：smalltalk, pharo, squeak, morphic

我有两个变形，一个在另一个。

```
a:= Morph new.
b:= Morph new. 
a addMorph: b. 
a openInWorld. 
```

但是当我想通过执行 b position: 100@100 来更改 b 的位置时，它永远不会显示更改，那么我在这里缺少什么？还是以某种方式跟踪b的位置是a的责任？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:49:39.557

这应该有效：

```
| morph1 morph2 |

morph1 := Morph new.
morph1 color: Color red.
morph1 extent: 200@200.

morph2 := Morph new.
morph2 color: Color green.
morph2 extent: 50@50.

morph1 addMorph: morph2.
morph2 position: 100@100.
morph1 openInWorld. 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/sWhpP.png)

请注意，位置是绝对的，如果您想要相对位置，您必须执行以下操作：

```
morph2 position: (morph1 position + (100@100)) 
```

如果您将变形添加到窗口，您可以查看 SystemWindow #addMorph:fullFrame: 它提供了更好的定位子变形的可能性。Morph 也实现了#addMorph:fullFrame: 但不知何故这在Pharo 2.0 中似乎对我不起作用。

看一下：[Pharo collaborActive 书](http://book.pharo-project.org/book/LanguageAndLibraries/GUI/PolymorphTutorial/Layout/ "Pharo 合作书") 和示例 2 中 Pharo 的 Basic Widgets 章节。

# r - 删除矩阵中的 NA/NaN/Inf

> ID：15773189
> 
> 赞同：19
> 
> 时间：2013-04-02T19:55:48.703
> 
> 标签：r, matrix, rows, na

我想尝试两件事：

1.  如何删除包含 NA/NaN/Inf 的行
2.  如何将数据点的值从 NA/NaN/Inf 设置为 0。

到目前为止，我已经尝试使用以下 NA 值，但收到警告。

```
> eg <- data[rowSums(is.na(data)) == 0,] 
```

> ```
>  Error in rowSums(is.na(data)) : 
>        'x' must be an array of at least two dimensions
>      In addition: Warning message:
>      In is.na(data) : is.na() applied to non-(list or vector) of type 'closure' 
> ```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-02T20:17:33.890

我想我会用我喜欢的方法把我的帽子扔进戒指：

```
# sample data
m <- matrix(c(1,2,NA,NaN,1,Inf,-1,1,9,3),5)
# remove all rows with non-finite values
m[!rowSums(!is.finite(m)),]
# replace all non-finite values with 0
m[!is.finite(m)] <- 0 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-02T20:00:06.513

```
library(functional)
m[apply(m, 1, Compose(is.finite, all)),] 
```

示范：

```
m <- matrix(c(1,2,3,NA,4,5), 3)
m
##      [,1] [,2]
## [1,]    1   NA
## [2,]    2    4
## [3,]    3    5

m[apply(m, 1, Compose(is.finite, all)),]
##      [,1] [,2]
## [1,]    2    4
## [2,]    3    5 
```

注： `Compose(is.finite, all)`相当于`function(x) all(is.finite(x))`

要将值设置为 0，请使用矩阵索引：

```
m[!is.finite(m)] <- 0
m
##      [,1] [,2]
## [1,]    1    0
## [2,]    2    4
## [3,]    3    5 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-20T15:02:35.677

NaRV.omit(x) 是我对问题 1 的首选选项。助记符 NaRV 的意思是“不是常规值”。

```
require(IDPmisc)
m <- matrix(c(1,2,3,NA,5, NaN, 7, 8, 9, Inf, 11, 12, -Inf, 14, 15), 5)
> m
     [,1] [,2] [,3]
[1,]    1  NaN   11
[2,]    2    7   12
[3,]    3    8 -Inf
[4,]   NA    9   14
[5,]    5  Inf   15
> NaRV.omit(m)
     [,1] [,2] [,3]
[1,]    2    7   12
attr(,"na.action")
[1] 1 3 4 5
attr(,"class")
[1] "omit" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-02T20:10:18.370

只是另一种方式（对于第一个问题）：

```
m <- structure(c(1, 2, 3, NA, 4, 5, Inf, 5, 6, NaN, 7, 8), 
              .Dim = c(4L, 3L))
#      [,1] [,2] [,3]
# [1,]    1    4    6
# [2,]    2    5  NaN
# [3,]    3  Inf    7
# [4,]   NA    5    8

m[complete.cases(m * 0), , drop=FALSE]
#      [,1] [,2] [,3]
# [1,]    1    4    6 
```

除了马修对第二部分的回答之外，我想不出其他任何东西。

# algorithm - 在 O(n) 时间内添加方阵？

> ID：15773190
> 
> 赞同：0
> 
> 时间：2013-04-02T19:55:54.500
> 
> 标签：algorithm, matrix, complexity-theory

假设我们有两个大小相同的方阵`n`，分别命名为`A`和`B`。

`A`并`B`共享其主对角线中的每个条目都是相同值的属性（即`A[0,0] = A[1,1] = A[2,2] ... = A[n,n]`和`B[0,0] = B[1,1] = B[2,2] ... = B[n,n]`）。

有没有办法表示`A`并且`B`可以在 O(n) 时间内而不是 O(n^2) 时间内将它们相加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:58:20.507

**一般来说：没有。**

对于`n`x`n`矩阵，有`n^2`要填充的输出值；这需要`O(n^2)`时间。

**在你的情况下：不。**

即使`O(n)`输入/输出值是相关的，`O(n^2)`那也是独立的。所以没有任何表示可以减少下面的整体运行时间`O(n^2)`。

**但...**

为了减少运行时间，有必要（但不一定足够）将依赖值的数量增加到`O(n^2)`. 显然，这是否可能取决于特定场景......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:26:30.170

为了补充 Oli Cherlesworth 的回答，我想指出，在**sparse matrices 的特定情况下**，您通常可以获得`O(n)`.

例如，如果您碰巧*知道*您的矩阵是对角的，那么您也*知道*生成的矩阵将是对角的，因此您只需要计算`n`值。类似地，可以在 中添加波段矩阵，`O(n)`以及更多“随机”稀疏矩阵。通常，在稀疏矩阵中，每行非零元素的数量或多或少是恒定的（例如，您可以从有限元计算或图邻接矩阵等中获得这些元素），因此，使用适当的表示，例如“[压缩行存储](http://de.wikipedia.org/wiki/Compressed_Row_Storage)”或“压缩列存储”，您最终将使用`O(n)`运算来添加两个矩阵。

还特别提到了次线性随机算法，它只建议您知道与实际解决方案“不太远”的最终值，直至随机误差。

# php - 获取某些值的 MySql 代码

> ID：15773201
> 
> 赞同：-2
> 
> 时间：2013-04-02T19:56:19.153
> 
> 标签：php, mysql

假设我在 MySql 数据库中有这个表。

> ```
> -------------------
> ID ||  Name  || Job
> -------------------
> 1  ||  Joe   || A
> 2  || Alice  || B
> 3  || John   || A 
> ```

我需要选择值 Joe 和 John 的代码，因为他们有相似的工作并将值存储在 PHP 变量中，比如说`$i1 = Joe`和`$i2 = John`，请记住，我的表中有数百行，所以`$i`最多可以有数百行.

这是可行的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:15:52.013

这是一个检索数组中所有信息的简单函数：

```
 function getStatuts(){  
           $sql = "SELECT Id,Name,Job FROM yourTable "; 
           $items = mysqli_query($sql); 

           while ($obj = mysql_fetch_object($items)) {
               $array[$obj->id]['id'] = $obj->id;
               $array[$obj->id]['level'] = $obj->level;
               $array[$obj->id]['maxlines'] = $obj->maxlines;
        } 
        return $array;
    }

    echo '<pre>';
       print_r(getStatuts());
    echo '</pre>'; 
```

# php - 我是否必须再次发送带有 304 Not Modified 标头的 ETag？

> ID：15773214
> 
> 赞同：1
> 
> 时间：2013-04-02T19:57:17.990
> 
> 标签：php, http, http-status-code-304, etag

当奇怪的事情发生时，我正在使用 PHP，使用 ETags、IF_NONE_MATCH 等。我编写了下面的代码，用于检查 IF_NONE_MATCH。如果它与我的 ETag 匹配，我会发送一个 304 响应标头。如果没有，我会发送其他标题告诉浏览器缓存页面，以及我的 ETag。我期望获得一次页面，然后一直获得 304。相反，我得到了一次页面，然后是 304，然后是页面，然后是 304，等等。当我检查 Chrome 的标题视图时，我看到如果我没有在 304 代码中再次设置 ETag，它不会下次我收到该页面时，将其发送回其请求标头中。这是正常行为还是只是 Chrome？难道我做错了什么？

这是代码：

```
<?php
    $etag = '89453fo245tyu5o423ty5349gu0p34';

    if (isset($_SERVER['HTTP_IF_NONE_MATCH']) && 
                                  $_SERVER['HTTP_IF_NONE_MATCH'] == $etag) {
         header('', true, 304);
    } else {
         header('Expires: Fri, 06 Apr 2013 23:59:59 03:00 GMT');
         header('Pragma: cache');
         header('Cache-Control: public, must-revalidate, max-age=0');
         header('ETag: ' . $etag);
         echo 'new page';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:23:28.910

我认为问题出在您的标头调用中。使用正确的标题调用，[如this answer中](https://stackoverflow.com/questions/2000092/header-use-in-php)所述，一切都应该没问题：

```
header('HTTP/1.1 304 Not Modified'); 
```

另请记住，如果您按 F5 刷新页面，您的浏览器可能会忽略缓存并直接访问网络服务器。为了测试，我会添加一个指向同一页面的链接，或者只需单击浏览器地址栏并按 Enter。

# javascript - SharePoint 2010 异步更新中断用于内联编辑的日期选择器

> ID：15773217
> 
> 赞同：1
> 
> 时间：2013-04-02T19:57:25.950
> 
> 标签：javascript, sharepoint, asynchronous, datepicker, reload

问题是两个部分来解决当前问题并研究可能的解决方法。

**当前问题 - 异步**

我正在使用启用了内联编辑的 DVWP webpart。有几个日期字段具有 javascript datepicker 框。当我启用异步更新时，会出现日期选择器图标，但激活该框的 javascript 失败。错误只是“预期对象”，没有很好的代码参考。

是否有解决方案/修复程序可以让日期选择器再次工作？

**解决方法 - JavaScript**

作为一种解决方法，我尝试使用 location.reload javascript，但问题是因为内联编辑页面被视为表单，并且每次页面尝试刷新时我都会收到无处不在的“重试或取消”提示（其中用户觉得很烦人）。这是我正在使用的代码：

```
<script type="text/JavaScript">
<!--
_spBodyOnLoadFunctionNames.push("timedRefresh(60000)");
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script> 
```

因此，如果我无法解决上述异步问题，是否可以使用某种修改过的 location.reload 脚本，它会省略“重试”或“取消”的提示，例如推荐的这一行代码，但我无法使用超时长度：

```
window.opener.location.href = window.opener.location; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-01T08:31:16.247

setTimeout 期望执行一个函数，而不是 JavaScript 代码字符串。

这一行： setTimeout("location.reload(true);",timeoutPeriod);

应该是：setTimeout(function(){location.reload(true);}, timeoutPeriod);

# ruby-on-rails - 无法访问以 rails 形式传递给控制器 的 hidden_ field_tag 值

> ID：15773222
> 
> 赞同：1
> 
> 时间：2013-04-02T19:57:37.383
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，它有两个主要视图：概览视图和序列视图。用户可以在任一视图中输入数据。我对两个视图都使用相同的表单助手，但我希望创建操作中的 redirect_to 尊重用户的上下文。所以我传递了一个名为“track”的 hidden_​​field_tag。

我似乎无法在我的控制器中访问“track”的值。

这是表格：

```
<%= form_for([@mission, @mission.stickies.build]) do |f| %>
<div class="field">
    <%= f.text_field :name, :size => 60 %>
    <%= f.hidden_field :kind, :value => kind %>
    <%= hidden_field_tag :track, :value => track %>
    <class="actions"> 
        <br><%= f.submit "Add to " + kind.pluralize.capitalize %>
        </div>
<% end %> 
```

这就是我在其中一种观点中所说的：

```
<%= render :partial => "stickies/form" , :locals => { :kind => "driver", :track => 'main' } %> 
```

这是参数转储（来自不同的调用）：

```
{"utf8"=>"✓",
 "authenticity_token"=>"N3IXwNQosOfxw1ZcpfFPOLPKzHbvNyaBhAiP3ftT9GY=",
 "sticky"=>{"name"=>"Tesssksjd argghh.",
 "kind"=>"success"},
 "track"=>"{:value=>\"sequence\"}",
 "commit"=>"Add to Successes",
 "mission_id"=>"32"} 
```

这是我的创建控制器中的相关代码：

```
if params[:track][:value] == "main" then
    redirect_to mission_path(@mission) + '#' + @sticky.kind.pluralize
    elsif params[:track][:value] == "sequence" then
    redirect_to mission_stickies_path(@mission, :kind => @sticky.kind)
end 
```

我似乎找不到语法、比较器或任何我需要访问由“track”=>“{:value=>\”sequence\“}”表示的值的东西。

任何帮助或指示将不胜感激。我是 Rails 和 Ruby 的新手，这是我的第一个应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:02:15.647

不要用 写它`:value => track`，而是这样做：

```
 <%= hidden_field_tag :track, track %> 
```

并使用`params[:track]`

# c# - 传递对象引用

> ID：15773226
> 
> 赞同：0
> 
> 时间：2013-04-02T19:57:52.147
> 
> 标签：c#

我有一个对象，其中包含它保持最新的其他对象。如果我将这些子对象中的一个传递给另一个类的构造函数，这是否保留为指针，并且与正在更新的对象相同？

在下面的代码存根中，我使用了 EventDetails 对象。我不需要在 ResultsTreeViewEvent 中修改它。

```
EventDetails eventDetails = raceDay.GetEvent(meeting, race);
ResultsTreeViewEvent newEvent = new ResultsTreeViewEvent(meet.name, eventDetails, ref treeView, fullPage, true);

public class ResultsTreeViewEvent
{
    public EventDetails race = null;

    public ResultsTreeViewEvent(String aMeetingName, EventDetails aRace, ref TreeView aTreeView, Boolean aFullPage, Boolean aShowMultiLegResults)
    {
        race = aRace;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T19:59:23.587

> 如果我将这些子对象中的一个传递给另一个类的构造函数，这是否保留为指针，并且与正在更新的对象相同？

好吧，它被保留为*参考*- 如果对象通过任何参考更新，这些更改确实可以通过其他参考看到，是的。你*不需要*为此使用`ref`。（目前尚不清楚您要尝试做什么`aTreeView`，但您几乎可以肯定不想要或不需要参考。）

引用和指针在某些方面非常相似，但[又不相同](http://blogs.msdn.com/b/ericlippert/archive/2009/02/17/references-are-not-addresses.aspx)。（C#*确实*有指针，在不安全的代码中，但你很少会使用它们。）

有关更多信息，请参阅我关于[引用和值类型](http://pobox.com/~skeet/csharp/references.html)以及[C#](http://pobox.com/~skeet/csharp/parameters.html)中的参数传递的文章。

# memory-management - 地理编码器 - GC_CONCURRENT FREED

> ID：15773227
> 
> 赞同：0
> 
> 时间：2013-04-02T19:57:55.647
> 
> 标签：memory-management, for-loop, garbage-collection, geocoding, logcat

我刚刚开始了我的第一个主要项目 - 一个简单的防盗应用程序，当我的手机被发短信时，如果它包含某个字符串，它会向原始地址发送一条短信，告诉它位置和电话的地址。但是，我设法向原始地址发送了一条短信，说明了我的经度、纬度和准确度，还有一个指向显示位置的谷歌地图的链接。但是，我尝试应用将手机地址发送回原始地址的功能，但是当我尝试添加此功能时，我的 Logcat 精神恍惚，显示所有这些 GC_CONCURRENT FREED 和 GC_CONCURRENT BLOCKED - 显示大约 10 个第二。这使我的手机锁定并且任务管理器不得不强制停止该应用程序。所以问题是，到底是什么问题，

这是我的 MainActivity，没有太多进展，只是一个按钮向自己发送带有特定字符串的消息 - 比继续发送消息并执行它更容易。

```
package com.SMS;

import android.app.Activity;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    Button btnSendSMS;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
                setTheme(android.R.style.Theme_Black_NoTitleBar);
        setContentView(R.layout.activity_main);

        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        btnSendSMS.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                sendSMS("07923368279", "hi");

            }
        });
    }

    private void sendSMS(String phoneNumber, String message) {

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
} 
```

现在这是我的 SMSReceiver 类——魔法发生的地方。好吧，所有错误都来自哪里。这个类，接收短信，检查字符串，然后找到我的手机。在我添加地理编码器之前，一切都很顺利。

```
package com.SMS;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;

public class SMSReceiver extends BroadcastReceiver {

IntentFilter intentFilter;

LocationManager locationManager;
LocationListener locationListener;

@Override
public void onReceive(Context context, Intent intent) 
{   
    //--get the sms message passed in--
    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String str = "";
    String add = "";
    if (bundle != null) 
    {
        //--- retrieve the sms message received
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i=0; i<msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);

            str += "SMS from " + msgs[i].getOriginatingAddress(); 
            str += " : ";
            str += msgs[i ].getMessageBody().toString(); 
            str += "\n";
            if(str.contains("hi"))
            { 
                locationManager =  (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
                locationListener = new MyLocationListener();
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
                Location loc = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

                double Longitude = (double) loc.getLongitude();
                double Latitude = (double) loc.getLatitude();
                int Accuracy = (int) loc.getAccuracy();

                Geocoder geoCoder = new Geocoder(context, Locale.getDefault());
                try 
                {
                    List <Address> addresses = geoCoder.getFromLocation(Latitude, Longitude, 1);

                    if (addresses.size() > 0)
                    {
                        for (int i1=0; i1<addresses.get(0).getMaxAddressLineIndex(); i++)
                            add = addresses.get(0).getAddressLine(i1) + "\n";
                    }
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
                      //--display the new sms message
                sendSMS(msgs[i].getOriginatingAddress(), "Location Found! \nLatitude : " + Latitude + "\nLongitude : " + Longitude + "\nAccuracy : " + Accuracy + "m" + add +  "\nhttp://maps.google.com/maps?q=loc:" + Latitude + "," + Longitude);
                }
            }
        }
    }

    private void sendSMS(String phoneNumber, String message) {

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
}

class MyLocationListener implements LocationListener 
{

    @Override
    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();
        loc.getAccuracy();

    }

    @Override
    public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

    }

} 
```

我的清单 - 不要认为它与它有任何关系，但以防万一你需要它。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SMS"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.SMS.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SMSReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>

    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COURSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.LOCATION" />

</manifest> 
```

最后 - 我的 logcat 错误。

```
04-02 20:42:37.655: D/dalvikvm(19046): GC_CONCURRENT freed 511K, 9% free 8771K/9580K, paused 1ms+2ms, total 16ms
04-02 20:42:37.655: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 11ms
04-02 20:42:37.695: D/dalvikvm(19046): GC_CONCURRENT freed 511K, 9% free 8772K/9580K, paused 2ms+3ms, total 24ms
04-02 20:42:37.695: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 18ms
04-02 20:42:37.745: D/dalvikvm(19046): GC_CONCURRENT freed 512K, 9% free 8771K/9580K, paused 2ms+4ms, total 34ms
04-02 20:42:37.745: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 27ms
04-02 20:42:37.755: D/overlay(158): Unset pipe=VG0 dpy=0; Unset pipe=VG1 dpy=0; Unset pipe=RGB1 dpy=0; 
04-02 20:42:37.795: D/dalvikvm(19046): GC_CONCURRENT freed 511K, 9% free 8771K/9580K, paused 3ms+4ms, total 34ms
04-02 20:42:37.795: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 27ms
04-02 20:42:37.845: D/dalvikvm(19046): GC_CONCURRENT freed 512K, 9% free 8771K/9580K, paused 3ms+3ms, total 34ms
04-02 20:42:37.845: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 27ms
04-02 20:42:37.905: D/dalvikvm(19046): GC_CONCURRENT freed 512K, 9% free 8771K/9580K, paused 3ms+2ms, total 31ms
04-02 20:42:37.905: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 20ms
04-02 20:42:37.945: D/dalvikvm(19046): GC_CONCURRENT freed 511K, 9% free 8771K/9580K, paused 2ms+2ms, total 19ms
04-02 20:42:37.945: D/dalvikvm(19046): WAIT_FOR_CONCURRENT_GC blocked 6ms
04-02 20:42:38.005: D/dalvikvm(19046): GC_CONCURRENT freed 512K, 9% free 8771K/9580K, paused 4ms+1ms, total 34ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T16:50:42.203

```
for (int i1=0; i1<addresses.get(0).getMaxAddressLineIndex(); i++) 
```

你有一个永远不会结束的循环。“i1”变量用作循环变量，但您正在更新“i”变量。

# drupal - 如何防止我的 adwords URL 在 Drupal 7 上被编码？

> ID：15773232
> 
> 赞同：1
> 
> 时间：2013-04-02T19:58:10.883
> 
> 标签：drupal, urlencode, google-ads-api

我的 Drupal 7 网站的 adwords 链接让我度过了一段可怕的时光。当链接来自 google adwords 时，URL（特别是查询字符串）是 url 编码的，并使页面变为 404。有没有办法阻止 Drupal 对 adwords url 进行编码？

今天一整天都在整理这个……这就是我所知道的。

大约一半的广告效果很好。广告格式如下：

[http://www.example.com/land/BAG2?_kk=%7Bkeyword%7D&_kt=1bc345c5d-c3459-43451-a483-82cc74e986a7](http://www.example.com/land/BAG2?_kk=%7Bkeyword%7D&_kt=1bc345c5d-c3459-43451-a483-82cc74e986a7)

但是，另一半会像这样格式化并在 Drupal 7 站点上触发 404 错误。

[http://www.example.com/land/BAG2%3F_kk%3D%257Bkeyword%257D%26_kt%3D1bc345c5d-c3459-43451-a483-82cc74e986a7](http://www.example.com/land/BAG2%3F_kk%3D%257Bkeyword%257D%26_kt%3D1bc345c5d-c3459-43451-a483-82cc74e986a7)

起初我认为这可能是对 URL 进行重定向编码，但我不认为是这种情况。

一半工作一半不工作怎么办？

非常感谢您可能有的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T10:21:06.047

我之前遇到过这个问题，我必须在 apache 的**重写**规则中添加一个 [NE] （无转义）标志，以防止将这些字符转换为十六进制代码。

# xcode - Xcode，使用断点单步执行我自己的代码

> ID：15773243
> 
> 赞同：1
> 
> 时间：2013-04-02T19:59:00.853
> 
> 标签：xcode, debugging

通常，这是可行的，但除了我自己的代码之外，还有很多机器代码，这并不能真正帮助我调试自己的程序逻辑。

有没有办法只通过我自己的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:34:43.067

![在此处输入图像描述](https://i.stack.imgur.com/b4Mbc.png) 首先在要开始跳过的地方放一个断点。断点之后，使用此按钮可以跳过代码。播放按钮会一直运行到下一个断点

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T20:11:57.210

您可能希望`next`在调试器 UI 中使用命令或“跳过”按钮，而不是`step`“步入”，以避免在调试时单步执行每个函数。当然，您可能仍想单步执行自己的函数，但`next`会让您跨过框架函数，而不是深入研究它们的程序集。

# jquery - jQuery 验证单选按钮

> ID：15773244
> 
> 赞同：0
> 
> 时间：2013-04-02T19:59:04.213
> 
> 标签：jquery, validation

我在验证是否选中了一组单选按钮时遇到了一些问题。我需要我的表单能够检查其中一个单选按钮是否被选中。

```
}else if(question_pos==6){
        if(($('input[name=baseline_20]:checked') || $('input[name=baseline_21]:checked') )) {
        return true;
    }else{
        return false;
    } 
```

我需要它，以便检查baseline_20是否检查了它的任何一个子无线电，exebaseline20_0，baseline20_1等等......，或baseline20_0，baseline20_1......它所在的表格称为form6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:13:53.850

你累了吗

```
$("input[name='baseline_20']:checked").length > 0 
```

# spring - 使用 Spring MVC 在浏览器新窗口中显示存储在网络服务器上的 PDF 文件

> ID：15773247
> 
> 赞同：2
> 
> 时间：2013-04-02T19:59:13.120
> 
> 标签：spring, model-view-controller, view, pdfview

我需要在浏览器中显示 PDF 文件。我使用 Spring MVC。有没有办法在不使用 AbstractPdfView 的情况下做到这一点？我不想在运行时呈现 PDF。所有的 PDF 文件都将存储在我的网络服务器中。

这是我正在使用的代码。但这会直接下载文件，而不是在浏览器中显示。

```
@RequestMapping(value = "/download" , method = RequestMethod.GET)
public void doDownload(HttpServletRequest request,
       HttpServletResponse response) throws IOException {

   // get absolute path of the application
   ServletContext context = request.getSession().getServletContext();
   String appPath = context.getRealPath("");
   String filename= request.getParameter("filename");
   filePath = getDownloadFilePath(lessonName);

   // construct the complete absolute path of the file
   String fullPath = appPath + filePath;       
   File downloadFile = new File(fullPath);
   FileInputStream inputStream = new FileInputStream(downloadFile);

   // get MIME type of the file
   String mimeType = context.getMimeType(fullPath);
   if (mimeType == null) {
       // set to binary type if MIME mapping not found
       mimeType = "application/pdf";
   }
   System.out.println("MIME type: " + mimeType);

   String headerKey = "Content-Disposition";

   response.addHeader("Content-Disposition", "attachment;filename=report.pdf");
   response.setContentType("application/pdf");

   // get output stream of the response
   OutputStream outStream = response.getOutputStream();

   byte[] buffer = new byte[BUFFER_SIZE];
   int bytesRead = -1;

   // write bytes read from the input stream into the output stream
   while ((bytesRead = inputStream.read(buffer)) != -1) {
       outStream.write(buffer, 0, bytesRead);
   }

   inputStream.close();
   outStream.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:03:02.633

删除线

```
response.addHeader("Content-Disposition", "attachment;filename=report.pdf"); 
```

这一行准确地告诉浏览器显示下载/保存对话框，而不是直接显示 PDF。

哦，确保在 finally 块中关闭输入系统。

# asp.net - 为什么 oledb dataadapter 没有从 vb.net 中的 access 数据库中获取任何数据？

> ID：15773248
> 
> 赞同：1
> 
> 时间：2013-04-02T19:59:13.310
> 
> 标签：asp.net, vb.net, ms-access-2007, oledbdataadapter

我遇到了一个非常特殊的问题。我正在使用 ms access 2007 在 asp .net vb 中工作

为了获取数据，我使用以下代码片段

```
 connection = utility.GetConnection()
        Dim command As New OleDbCommand(sQuery, connection)
        Dim adapter As New OleDbDataAdapter(sQuery, connection)
        Dim dt As New DataTable()
        adapter.SelectCommand = command
        adapter.Fill(dt) 
```

当我使用没有 where 子句的查询时，它可以工作。即 IT 获取所有行并填充数据表。但是当 sQuery 带有 where 子句时，dt.Rows.Count 总是给出 0。即没有从数据库中获取数据。我说这是一个更特殊的问题，因为在调试时我复制了带有 where 子句的 sQuery 并在 ms 访问中运行，它正在返回数据。我不明白我错过了什么。我正在显示为 sQuery 生成的查询

```
 SELECT * FROM ORDER_VIEW WHERE 1 = 1 (I don have any problem with that) 
```

但是当 sQuery 有

```
 SELECT * FROM ORDER_VIEW WHERE 1 = 1 AND ITEM_ID_NO LIKE '011*' 
```

它在 ms 访问中获取行，但是 adapter.Fill(dt) 行不会用任何行填充数据表

我被这个问题困住了，提前感谢任何建议和解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:17:16.817

使用 OleDB 提供程序时，请尝试使用`'011%'`而不是`'011*'`.

我相信 OleDB 引擎使用`%`Access 引擎使用该字符的通配符`*`。它归结为提供者。

# c - 使用 emscripten 找不到 Windows.h

> ID：15773253
> 
> 赞同：3
> 
> 时间：2013-04-02T19:59:28.367
> 
> 标签：c, windows, llvm, file-not-found

我正在尝试在 Windows 上使用 Emscripten 在 javascript 中转换 C 库。我使用[这里](https://github.com/kripken/emscripten/wiki/Tutorial)的教程来设置 emscripten 和 LLVM/Clang 以开始使用。我用 Visual Studio 2010 编译 LLVM。clang 的版本是：

clang 3.2 版 (tags/RELEASE_32/final)
目标：i686-pc-win32
线程模型：posix

在命令行上，我编写了这一行来编译我的文件：

C:\emscripten> **python emcc -v \mypath\myfile.c**

这是输出，最终是我得到的错误（以及我寻求帮助的原因......）

```
emcc: compiling to bitcode
emcc: compiling source file:  \mypath\myfile.c
emcc running: C:\llvm\build\bin\release\clang -m32 -U__i386__ -U__x86_64__ -U__i
386 -U__x86_64 -Ui386 -Ux86_64 -U__SSE__ -U__SSE2__ -U__MMX__ -UX87_DOUBLE_ROUND
ING -UHAVE_GCC_ASM_FOR_X87 -DEMSCRIPTEN -U__STRICT_ANSI__ -U__CYGWIN__ -D__STDC_
_ -Xclang -triple=i386-pc-linux-gnu -D__IEEE_LITTLE_ENDIAN -fno-math-errno -fno-
ms-compatibility -nostdinc -Xclang -nobuiltininc -Xclang -nostdsysteminc -Xclang
 -isystemC:\emscripten\system\local\include -Xclang -isystemC:\emscripten\system
\include\libcxx -Xclang -isystemC:\emscripten\system\include -Xclang -isystemC:\
emscripten\system\include\emscripten -Xclang -isystemC:\emscripten\system\includ
e\bsd -Xclang -isystemC:\emscripten\system\include\libc -Xclang -isystemC:\emscr
ipten\system\lib\libcxxabi\include -Xclang -isystemC:\emscripten\system\include\
gfx -Xclang -isystemC:\emscripten\system\include\net -Xclang -isystemC:\emscript
en\system\include\SDL -U__APPLE__ -U__linux__ -D_LIBCPP_HAS_NO_DELETED_FUNCTIONS
 -v -emit-llvm -c \mypath\myfile.c -o C:\tempo\tmpn8yiq5\myfile_0.o
clang version 3.2 (tags/RELEASE_32/final)
Target: i686-pc-win32
Thread model: posix
 "C:/llvm/build/bin/release/clang.exe" -cc1 -triple i686-pc-win32 -emit-llvm-bc
-disable-free -disable-llvm-verifier -main-file-name myfile.c -mrelocation-mod
el static -mdisable-fp-elim -masm-verbose -mconstructor-aliases -target-cpu pent
ium4 -momit-leaf-frame-pointer -v -coverage-file "C:\\tempo\\tmpn8yiq5\\myfile_0
.o" -nostdsysteminc -nobuiltininc -resource-dir "C:/llvm/build/bin/release\\..
\\lib\\clang\\3.2" -U __i386__ -U __x86_64__ -U __i386 -U __x86_64 -U i386 -U x8
6_64 -U __SSE__ -U __SSE2__ -U __MMX__ -U X87_DOUBLE_ROUNDING -U HAVE_GCC_ASM_FO
R_X87 -D EMSCRIPTEN -U __STRICT_ANSI__ -U __CYGWIN__ -D __STDC__ -D __IEEE_LITTL
E_ENDIAN -U __APPLE__ -U __linux__ -D _LIBCPP_HAS_NO_DELETED_FUNCTIONS -fmodule-
cache-path "C:\\Users\\SS\\AppData\\Local\\Temp\\clang-module-cache" -ferror-lim
it 19 -fmessage-length 80 -mstackrealign -fms-extensions -fmsc-version=1300 -fde
layed-template-parsing -fobjc-runtime=gcc -fobjc-default-synthesize-properties -
fdiagnostics-show-option -fcolor-diagnostics -triple=i386-pc-linux-gnu -nobuilti
ninc -nostdsysteminc "-isystemC:\\emscripten\\system\\local\\include" "-isystemC
:\\emscripten\\system\\include\\libcxx" "-isystemC:\\emscripten\\system\\include
" "-isystemC:\\emscripten\\system\\include\\emscripten" "-isystemC:\\emscripten\
\system\\include\\bsd" "-isystemC:\\emscripten\\system\\include\\libc" "-isystem
C:\\emscripten\\system\\lib\\libcxxabi\\include" "-isystemC:\\emscripten\\system
\\include\\gfx" "-isystemC:\\emscripten\\system\\include\\net" "-isystemC:\\emsc
ripten\\system\\include\\SDL" -o "C:\\tempo\\tmpn8yiq5\\myfile_0.o" -x c "\\mypa
th\\myfile.c"
clang -cc1 version 3.2 based upon LLVM 3.2svn default target i686-pc-win32
ignoring nonexistent directory "C:\emscripten\system\local\include"
#include "..." search starts here:
#include <...> search starts here:
 C:\emscripten\system\include\libcxx
 C:\emscripten\system\include
 C:\emscripten\system\include\emscripten
 C:\emscripten\system\include\bsd
 C:\emscripten\system\include\libc
 C:\emscripten\system\lib\libcxxabi\include
 C:\emscripten\system\include\gfx
 C:\emscripten\system\include\net
 C:\emscripten\system\include\SDL
End of search list.
\mypath\myfile.c:4:10: fatal error: 'windows.h'
      file not found
#include <windows.h>
         ^
1 error generated.
emcc: compiler frontend failed to generate LLVM bitcode, halting 
```

C文件不使用任何MFC，据我了解，clang 3.2版应该能够使用标准的windows API。我检查了是否可以找到 Windows.h，它位于 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Include

我是否遗漏了某些内容，例如指定我正在使用 Win32 编译的配置或标志？我还注意到在 llvm 存储库中，有一个位于 lib/Support/Windows 中的 Windows.h 文件，但我不知道它的用途是什么。这看起来像是某种可移植性包装器，可以使用来自不同库的标准 C++。

我不知道从那里去哪里，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-01T13:44:32.063

Emscripten 没有所需的 Javascript 文件端口，例如`windows.h`OSX 的 Cocoa。

唯一的解决方案是将您的代码移植到 SDL，因为 SDL 在 emscripten 中可用，因此在其标头中可用。

# arrays - 如何将 int 数组存储到 MIPS 中的局部变量中？

> ID：15773264
> 
> 赞同：0
> 
> 时间：2013-04-02T19:59:59.463
> 
> 标签：arrays, integer, int, mips, memory-address

在 MIPS 中，如果我有一个数组 newInt (4,5,6)，我如何将它作为整数 456 存储到寄存器中（如 $s0）？

如果我尝试做 la $s0,newInt 它只是打印出地址，但我希望 $s0 从字面上包含在 newInt 中找到的所有数字作为 1 个单个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:05:01.390

假设数组中的所有项目都有个位数，您必须：

*   用 0初始化`$s0`，以及其他一些寄存器，例如`$s1`用 0
*   重复直到所有数组都被读取：

    `$s0 = $s0 * 10 + newInt[$s1]`

    `$s1 = $s1 + 1` （实际上，如果它是一个整数数组，它将是`+4`）

# vba - Excel 2007 VBA 将多个工作表合并为 1，并带有列偏移

> ID：15773271
> 
> 赞同：0
> 
> 时间：2013-04-02T20:00:18.927
> 
> 标签：vba, excel-2007

我找到了很多关于如何在合并工作表时排除列标题的答案，但是在复制初始工作表后我找不到关于如何排除列 A 的任何答案。请帮忙。警告：我对 VBA 很陌生，我可能做了一些愚蠢的事情，但我已经尝试了 2 天来完成这项工作。在结束 if 语句之前，我不断收到最后两行代码的错误。我第一次发布问题，所以建议是否有更好的方法来做到这一点。

我想要的简单描述：

*   **注意**：所有工作表始终有 365 行，工作表数和列数各不相同。
*   拿一张表并将数据复制到新的“主”表，所有列和所有行
*   所有其他工作表将具有完全相同的 A 列，但需要通过未知数量的列将 B 添加到主工作表中的下一个空列。

**示例**：
工作表 1 有 365 行，只有 A 列和 B 列工作表 2 有 365 行，A 到 D 列有数据 新主工作表有 365 行，包含工作表 1 和工作表 2 中的 B 到 H 列的所有内容将添加到主表作为 C 到 E 列

**这是我的代码：**

```
Dim ws As Worksheet
Dim wsMain As Worksheet
Dim DataRng As Range
Dim Col As Long
Dim Cnt As Integer

Application.DisplayAlerts = False
On Error Resume Next
Sheets("Report").Delete
Sheets("Wex").Delete
Sheets("C Locs").Delete
Application.DisplayAlerts = True
On Error GoTo 0
Sheets.Add().Name = "Master"

Application.ScreenUpdating = False

Cnt = 1

Set wsMain = Worksheets("Master")
For Each ws In ThisWorkbook.Worksheets

If ws.Name <> wsMain.Name Then
If Cnt = 1 Then
Set DataRng = ws.Cells(1, 1).CurrentRegion
DataRng.Copy wsMain.Cells(1, Cnt)
Else: Col = wsMain.Cells(1, Columns.Count).End(xlToLeft).Column + 1

DataRng.Offset(0, 1).Resize(DataRng.Rows.Count, DataRng.Columns.Count - 1).Copy ActiveSheet.Cells(1, Col)

End If
End If
Cnt = Cnt + 1
Next ws

Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:01:04.033

```
For Each ws In ThisWorkbook.Worksheets

    If ws.Name <> wsMain.Name Then
        If Cnt = 1 Then
            Set DataRng = ws.Cells(1, 1).CurrentRegion
            DataRng.Copy wsMain.Cells(1, 1)
        Else
            With ws.Cells(1, 1).CurrentRegion
                Set DataRng = .Resize(.Rows.Count, .Columns.Count - 1).Offset(0, 1)
                DataRng.Copy wsMain.Cells(1, Columns.Count).End(xlToLeft).Offset(0, 1)
            End With
        End If

        Cnt = Cnt + 1
    End If

Next ws 
```

# php - Symfony 2.2 扩展 ExceptionController

> ID：15773273
> 
> 赞同：8
> 
> 时间：2013-04-02T20:00:29.473
> 
> 标签：php, symfony, exception-handling, symfony-2.2

这个问题与[以下更改](https://github.com/symfony/symfony/commit/35d63df044cba20cdf441963ca85a7f4d51200cc)有关（Symfony 2.2 版本的一部分）：

**第1部分**

在 2.2 之前的 Symfony 中，我重写`ExceptionController`以显示一些自定义错误页面。

我是通过以下方式做到的：

```
parameters:
       twig.exception_listener.controller: My\CustomBundle\CustomExceptionController::showAction 
```

现在，升级到 2.2 后，我不能再这样做了，因为在生成异常时会抛出异常（不是双关语）：

> ExceptionController::__construct() 必须是 Twig_Environment 的一个实例，没有给出，在...中调用

由于`ExceptionController`现在是一项服务，我该如何覆盖它，以及我需要在旧代码中进行哪些更改？

我在自定义类中所做的只是更改了 showAction 方法中的模板引用：

```
$template = new TemplateReference('TwigBundle', 'Exception', $name, $format, 'twig'); 
```

**第2部分**

由于`ExceptionController`不再 extends `ContainerAware`，我如何到达当前容器？实施就够了`ContainerAwareInterface`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T20:40:03.217

你应该改变几个：

1.  您需要在您的自定义异常控制器中**继承。`ExceptionController`**
2.  您需要**覆盖`twig.controller.exception.class`参数**。正如您在[服务文件](https://github.com/symfony/symfony/commit/35d63df044cba20cdf441963ca85a7f4d51200cc#L3R116)中看到的，它使用`twig.controller.exception.class`参数来标识异常控制器类。现在用你的类覆盖它：

    ```
    parameters:
        twig.controller.exception.class: My\CustomBundle\CustomExceptionController 
    ```

3.  您需要编辑签名`showAction`以遵循[新签名](https://github.com/symfony/symfony/commit/35d63df044cba20cdf441963ca85a7f4d51200cc#L1R48)

    > 由于`ExceptionController`不再 extends `ContainerAware`，我如何到达当前容器？实施就够了`ContainerAwareInterface`吗？

不，服务不应该*永远*注入容器。您应该在构造函数中注入您需要的服务，就像对`Twig_Environment`服务所做的那样。

在 Exception 控制器中，您可以访问`$this->twig`twig 服务的属性。并且新的签名得到一个`$request`参数，来获取请求。我不认为你需要更多。（你也得到`$this->debug`）

# ios - 当我的 UITableView 尝试加载时，为什么会出现无法出列的错误消息？

> ID：15773275
> 
> 赞同：16
> 
> 时间：2013-04-02T20:00:34.717
> 
> 标签：ios, objective-c, uitableview

我收到以下错误：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使具有标识符 FontCell 的单元格出列 - 必须为标识符注册一个 nib 或类或连接故事板中的原型单元格”

我不确定我做错了什么。我设置了单元格标识符（以编程方式，因为它不是通过 Interface Builder 创建的）并执行了我认为应该在委托方法中执行的所有操作，但是当我尝试加载 UITableView 时仍然出现该错误。

这是相关代码（值得注意的是，我将 UITableViewCell 子类化为自定义选项）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.fonts.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"FontCell";

    FontCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    if (!cell) {
        cell = [[FontCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"FontCell"];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    int row = indexPath.row;

    cell.fontFamilyLabel.text = self.fonts[row];

    return cell;
} 
```

这是我在子类 UITableViewCell (FontCell) 中更改的唯一方法：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.fontFamilyLabel = [[UILabel alloc] initWithFrame:CGRectMake(5, 5, 200, 20)];
        self.fontFamilyLabel.textAlignment = NSTextAlignmentCenter;

        [self.contentView addSubview:self.fontFamilyLabel];
    }
    return self;
} 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-02T20:05:15.297

最简单的解决方法是将其更改为与您当前的代码一样，如果您使用此方法`FontCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];` ，您必须检查以确保`cell`不是。`nil`

* * *

或者，您可以在绑定到的表级别注册`UINib`或`Class``@"FontCell"`

例如（上`viewDidLoad`）：

```
[self.tableView registerClass: [FontCell class] forCellReuseIdentifier:@"FontCell"]; 
```

然后你可以做

```
FontCell *cell = [tableView dequeueReusableCellWithIdentifier:@"FontCell" forIndexPath:indexPath]; 
```

这种方法的好处是您知道您的单元格永远不会是`nil`，因此您可以立即开始修改它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:06:25.763

您正在使用该`dequeueReusableCellWithIdentifier:forIndexPath:`方法。该方法的文档说明了这一点：

```
You must register a class or nib file using the registerNib:forCellReuseIdentifier: or registerClass:forCellReuseIdentifier: method before calling this method. 
```

所以在这里

```
[self.tableView registerClass: [FontCell class] forReuseIdentifier: @"FontCell"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T05:31:31.267

我也遇到了这样的问题，我找到的解决方法是：

转到项目导航器并选择“ViewController.h”。附加

```
 <UITableViewDelegate, UITableViewDataSource> 
```

在“UIViewController”之后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-12T16:05:54.000

如果像我一样使用表格视图（不是表格视图控制器），则默认情况下不会出现单元格。

在情节提要中选择表格视图 打开属性检查器 将原型单元格从 0 更改为 1 选择新显示的表格单元格 在属性检查器中将标识符设置为“FontCell”

# json - Jackson JSON 动态忽略属性

> ID：15773276
> 
> 赞同：2
> 
> 时间：2013-04-02T20:00:35.690
> 
> 标签：json, jackson

我有以下课程 -

**员工**

```
公共类员工{

    私人字符串名；
    私人字符串姓氏；
    私人字符串电子邮件地址；
    私人字符串 ssn ;
}

```

**工资单**

```
公共类工资{

    // 不同的工资单相关字段

    私人雇员 emp ;

}

```

**人力资源**

```
公共类人力资源{

    // 不同的 HR 相关字段

    私人雇员 emp ;

}

```

现在，当我序列化我的 Payroll 类时，我不想从 Employee 类中序列化我的 ssn 字段。

当我序列化我的 HR 类时，我不想从 Employee 类序列化我的 emailAddress 字段。

如何使用 Jackson JSON API 从序列化中动态排除字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:02:18.867

> 如何使用 Jackson JSON API 从序列化中动态排除字段？

这似乎是应用[JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews)的主要候选人。

```
public class Employee {

    private String firstName;
    private String lastName;
    @JsonView(Views.Payroll.class) private String emailAddress; 
    @JsonView(Views.HR.class) private String ssn;
}

public class Payroll {
    // snip

    @JsonView(Views.Payroll.class)
    private Employee emp;
}

public class HR {
    // snip

    @JsonView(Views.HR.class)
    private Employee emp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T19:33:17.597

我在下面回答以与客户阅读器动态反序列化。序列化时可以与作家做类似的事情以忽略。

[Jackson 动态更改 JsonIgnore](https://stackoverflow.com/questions/8179986/jackson-change-jsonignore-dynamically/68837998#68837998)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T11:16:16.427

您可以在 JsonFilter 的帮助下实现这一点。

1.  注释要过滤的类，如下所示：

```
@JsonFilter("employeeFilter")
public class Employee {

    private String firstName ;
    private String lastName ;
    private String emailAddress ; 
    private String ssn ;
} 
```

2.  创建一个名为 FilterBeanService 的服务（或其他任何东西）

```
@Service
public class FilterBeanService {

    // fields is an array of field names you wish not to sned in your response
    // beanFilterName is value you give when you annotage your bean class
    // dataSet is the data you want to filter
    public static MappingJacksonValue filterBean(String[] fields, String beanFilterName, Object dataSet ) {
        SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.serializeAllExcept(fields);
        FilterProvider filterProvider = new SimpleFilterProvider().addFilter(beanFilterName, filter);
        MappingJacksonValue jacksonValue = new MappingJacksonValue(dataSet);
        jacksonValue.setFilters(filterProvider);
        return jacksonValue;
    }
} 
```

3.  在您的控制器中，您可以过滤您不想要的文件

```
@GetMapping("/whatever")
public ResponseEntity<MappingJacksonValue> getSomething(){
   List<Employee> employees = eventRepo.findAll();
   String[] fields = {"ssn"};
   MappingJacksonValue jacksonValue = FilterBeanService.filterBean(fields, "employeeFilter", employees);
   return jacksonValue;
} 
```

# linux - 由于在 linux shell 中执行程序，我得到“dquote>”

> ID：15773278
> 
> 赞同：87
> 
> 时间：2013-04-02T20:00:42.043
> 
> 标签：linux, shell, quotes

当我在 Linux shell 中执行脚本时，我得到以下输出：

```
dquote> 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-02T20:02:05.917

这意味着您已经执行了一行代码，其中只有一个双引号字符，如下所示：

```
echo "Hello 
```

外壳正在等待另一个报价。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2020-12-13T12:29:28.387

如果你有一个`!`带引号的字符串，`password="this1smyp4ssword!"`它也会以`dquote>`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-01-30T22:04:23.967

当您在终端上有“ ***dquote>*** **”时，不用担心**，只需按键盘上的双引号按钮即可**退出**：

```
" 
```

**截图示例：**

[![在此处输入图像描述](https://i.stack.imgur.com/8xrZI.png)](https://i.stack.imgur.com/8xrZI.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-07T13:29:46.750

```
dquote> 
```

上面的提示肯定意味着您必须取消引用引号的开头，即`"`，用另一个引号：`"`。

请`"`在`dquote>`提示符中写一个字母ie another:。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2022-01-29T15:20:37.327

shell 正在等待未完成命令的另一个引用。

CTRL+G 将离开该状态并撤消命令。

输入 " 并按 enter 是另一种离开的方式，但它会执行您可能输入错误的内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-28T03:22:58.950

如果我们在密码中有感叹号，例如 password="passwordhas!symbol" 它也会以`dquote>`

要摆脱`dquote`，请使用单引号，如下所示。密码='密码有！符号'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-03T09:58:31.540

注意：检查你的行中的双引号是普通的 ASCII 双引号。

我从一封电子邮件中截取了一条命令，并收到了“dquote>”提示。事实证明，文本编辑器已将最后的双引号替换为双反引号，看起来几乎相同。如有疑问，请删除并重新键入所有双引号。

# haskell - 使用镜头库组成部分吸气剂

> ID：15773280
> 
> 赞同：9
> 
> 时间：2013-04-02T20:00:52.683
> 
> 标签：haskell, lenses

我正在使用镜头包，并一直认为必须有一个简单的解决方案来解决以下问题。假设我`At`在其值类型上有一些地图（或任何实例）和一个镜头，即

```
aMap :: Map Int a
aLens :: Simple Lens a b 
```

我想要一个吸气剂

```
g :: Getter (Map Int a) (Maybe b) 
```

这是因为我经常想做这样的事情

```
x :: Maybe b
x = aMap^.at 3.g.aLens 
```

当然，预期的语义是`Just`当您在`at`查找和`Nothing`其他情况下执行此操作时会获得一个值。

当一个人正在设置而不是让`traverse`作品代替时`g`，即

```
newMap = at 3.traverse.aLens .~ whatever $ aMap 
```

但不是当你得到。是否有一些我刚刚错过的内置镜头库，或者是否有另一种简单的方法可以在单个表达式中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:37:48.587

我在尝试用`at`.

如果你不需要`at`这里的插入/删除行为，那么使用`ix`呢？

```
x :: Maybe b
x = aMap ^? ix 3 . aLens 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:03:02.913

我设法想出了

```
x :: Maybe b
x = aMap^.at 3 <&> (^.aLens) 
```

这有点令人困惑，不*完全*是我想要的，但可以完成工作。

# c - 访问可执行文件中的#ident 信息？

> ID：15773282
> 
> 赞同：2
> 
> 时间：2013-04-02T20:00:57.957
> 
> 标签：c, linux, gcc

gcc（和其他编译器）[支持](http://gcc.gnu.org/onlinedocs/cpp/Other-Directives.html#Other-Directives)#ident 预处理器指令：

> '#ident' 指令接受一个参数，一个字符串常量。在某些系统上，该字符串常量被复制到目标文件的一个特殊段中。在其他系统上，该指令被忽略。“#sccs”指令是“#ident”的同义词。

我看到（使用十六进制转储），例如将其添加到源文件中：

```
#ident "Hello there !" 
```

该字符串嵌入到可执行文件中。

现在，是否有任何工具（readelf、objdump、gdb 或其他）可以提取/查看这些字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:22:56.603

如果您安装了 RCS，我认为该`ident`命令会显示它们。这假设您以传统方式格式化它们：`$keyword: value $`.

如果没有这个关键字，将 ident 字符串放入二进制文件的传统方法是将它们放入静态变量中，例如

```
static char const rcsid[] =
"$Id: f.c,v 5.4 1993/11/09 17:40:15 eggert Exp $"; 
```

这样做的问题是您会收到有关未使用变量的警告，编译器可能会将它们优化掉。因此，您必须在代码中虚假使用变量来防止这种情况。此外，如果将 ident 字符串放在头文件中，它们必须遵循命名约定以避免冲突。

我找不到`#ident`放置它们的规范。我怀疑它们只是卡在纯数据部分的某个地方，因此可以像上面的字符串一样找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:23:59.307

`strings -a`会找到它——还有很多其他的东西。（实验表明`strings`没有`-a`找不到它；显然它没有存储在数据部分中。）

顾名思义`#sccs`，它最初旨在与旧的 SCCS 版本控制系统一起使用，该系统可以在文件签出时扩展文件中的关键字。您可以对稍微更现代的 RCS 和 CVS 系统执行类似的操作，它们具有不同的关键字语法。我不记得 SCCS 的详细信息，但对于 RCS 或 CVS，您可以使用以下内容：

```
#ident "$Header:$" 
```

这将在 RCS 或 CVS 结账时扩展到，例如，

```
#ident $Header: /path/to/foo.txt,v 1.6 2013/04/02 20:21:33 yourname Exp $ 
```

然后，您可以使用该`ident`命令来查找类似的字符串，即使在二进制文件中也是如此。（`ident`是 RCS 的一部分，而不是 CVS。）

即使您不使用 RCS 或 CVS，您仍然可以使用相同的关键字语法：

```
#ident "$Header: anything you like here$" 
```

（但如果您将文件签入 RCS 或 CVS 存储库，您的文本可能会被破坏。）

# forms - 如何恢复自动创建表单列表和 DPR 初始化代码之间的同步？

> ID：15773289
> 
> 赞同：3
> 
> 时间：2013-04-02T20:01:21.507
> 
> 标签：forms, delphi

我有一个 D2006 应用程序，其中 DPR 文件进行了多次编辑（是的，我知道 - 你不应该弄乱 DPR 文件）以适应诸如启动屏幕之类的东西，防止启动应用程序的第二个实例，处理在创建任何表单之前需要处理的命令行选项等。

有一天，我注意到项目选项中的自动创建表单列表是空的——但 DPR 文件中仍然有创建某些表单的代码。

如果我尝试恢复应从对话框自动创建的所有表单，它会抱怨`Error - Call to Application->CreateForm is missing or incorrect`并且不执行任何操作。

*   除了从头开始重建 DPR 之外，如何恢复此连接？
*   手动添加`CreateForm`调用是否安全？
*   是否有关于您可以在 DPR 文件中执行的操作的任何记录规则？
*   我怀疑 DPR 中的 try..except 和 if..else 子句让 Delphi 感到不安。将尽可能多的功能转移到一个单独的单元并调用它们会有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:05:00.977

我还没有真正看到任何关于在 DPR 文件中可以做什么的记录规则，因为我想没有严格的规则。

当您创建“表单”应用程序时，问题就开始了。（我注意到控制台或非 GUI 应用程序没有问题）。
IDE 将在您向其添加新表单或 DataModule 时自动更改 DPR，假设您要自动创建它们。

如果它有很多代码/编译器指令/if-blocks/try-catch 块等，这可能会弄乱你的 DPR...

所以我会告诉你*我的*规则是什么，并且简短地说： **尽可能简单。**

我的 DPR 仅包含对某些初始化代码的调用，并且仅自动创建主窗体：

```
MyAppInit; // in AppInit unit
Application.Initialize;
Application.CreateForm(TMainForm, MainForm);
Application.Run; 
```

但是，在**使用**部分中，我添加（或保留 IDE 添加的内容）我的应用程序使用的所有表单（以及与应用程序相关的单元）——这在我想要`view->forms`或`view-units`.
事实上，当我向应用程序添加一个新表单时，我做的第一件事就是去 DPR 并删除该行：

```
Application.CreateForm(TMyNewForm, MyNewForm); 
```

**注意**（编辑）：IDE 可以配置为不自动创建表单（不会`Application.CreateForm`在 DPR 中创建条目）。在旧版本的 Delphi 中，此选项位于：`Tools/Environment Options/Preferences -> Auto create forms`. 在较新的版本中：`Tools/Options/VCL Designer/Module creation options -> Auto create forms & data modules`.

*在运行时，我会在需要时*动态创建所有表单，并在不再需要时销毁它们。DataModules/Splash (etc...) 在 MainForm.OnCreate 事件上创建。

在过去的几年里，这种方法对我很有效，*我*维护了一个大规模的数据库应用程序。这可能不会涵盖*所有*情况，但它可以满足我的需求。

* * *

PS：*“手动添加 CreateForm 调用是否安全”* - 是的。*但是，如果您真的需要*它们由应用程序自动创建，请三思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:37:58.130

由于 Delphi 拥有 .DPR，因此[我将启动逻辑放入每个项目的单独单元中](https://stackoverflow.com/questions/6762194/how-to-prevent-delphi-modifying-its-dpr-project-source-unexpectedly/6767221#6767221)。

这非常有效，.DPR 中只需要很少的条目。

由于该单元`Application.CreateForm`也控制逻辑，因此 IDE 有一个空列表：我很好。

.DPR 中剩下的唯一内容是：

*   `uses`指示哪些模块是您的项目的一部分的大
*   `Main`在启动逻辑单元中调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:12:15.887

恕我直言，您实际上并不需要 Delphi 的 AutoCreate 表单，但可能在临时测试项目中。

而 dpr 只是另一个源代码文件，您应该在其中编写代码以使事情发生（或阻止它发生），所以如果您丢失了 sincronization，请不要担心，恕我直言，如果无法阅读，这是错误的你的帕斯卡代码正常工作。

如果您仍想从 DPR 创建一些表单，请将 Application.CreateForm 或 TMyForm.Create 调用手动添加到文件中，AFAIK 没有禁止这样做的规则。

# linux - Ubuntu 上的 SCALA_HOME 在哪里？

> ID：15773293
> 
> 赞同：32
> 
> 时间：2013-04-02T20:01:42.340
> 
> 标签：linux, scala, ubuntu-12.04

我使用以下命令在 Ubuntu 上安装了 Scala

```
sudo apt-get install scala 

~$ which scala
/usr/bin/scala

~$ whereis scala
scala: /usr/bin/scala /usr/bin/X11/scala /usr/share/man/man1/scala.1.gz

~$ scala -version
Scala code runner version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL 
```

我的问题是我应该在变量 SCALA_HOME 中放入什么？/usr/bin ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-01T16:06:56.400

今天我使用“apt-get install scala”安装了 scala，并确认 scala jar 文件位于`/usr/share/java`

您应该能够将其设置`SCALA_HOME`为`/usr/share/java`并使其全部正常工作。我假设您想使用 NetBeans，因此您需要在 .profile（或 .bash_profile）中而不是在 .bashrc 中设置 SCALA_HOME，因为除非您从命令行启动，否则 NetBeans 不会看到 .bashrc 中设置的任何变量

```
$ find / -maxdepth 6 -iname \*scala\*jar 2> /dev/null
/usr/share/java/scala-dbc.jar
/usr/share/java/scala-partest.jar
/usr/share/java/scala-partest-2.9.1.jar
/usr/share/java/scala-dbc-2.9.1.jar
/usr/share/java/scalacheck.jar
/usr/share/java/scalap.jar
/usr/share/java/scala-library-2.9.1.jar
/usr/share/java/scala-compiler-2.9.1.jar
/usr/share/java/scala-library.jar
/usr/share/java/scalacheck-2.9.1.jar
/usr/share/java/scala-compiler.jar
/usr/share/java/scala-swing-2.9.1.jar
/usr/share/java/scalap-2.9.1.jar
/usr/share/java/scala-swing.jar 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-23T22:31:18.093

对我来说：`/usr/share/java/scala` 我通过这样做来确定这一点 `dpkg -L scala`

这假设您使用 APT 安装 scala。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-09T14:08:22.977

截至今天，我找不到一种简单（可靠）的方法来设置它。

根据 Alex（在上面的评论中）从 tarball（从 scala-lang.org 下载）安装到 /location/of/scala/untar

然后我设置`export SCALA_HOME=/location/of/scala/untar`了我`.bashrc` 现在的一切工作！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-05T13:02:09.430

我有同样的问题，我做了一些挖掘考虑到你正在使用 sudo dpkg -i scala-2.11.4.deb; 已下载 debian 软件包的位置

SCALA_HOME 应该是 /usr/share/scala；这是基于以下

*   /usr/bin/scala 是到 /usr/share/scala/bin/scala 的符号链接
*   /usr/bin/X11/scala 也是到 /usr/share/scala/bin/scala 的符号链接

我看到 scala 包的方式安装在 /usr/share/scala 中，它应该是你的 SCALA_HOME

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-14T09:14:54.333

如果你安装了 Scala 使用

`$apt-get install scala`

然后，在成功安装后查看它的安装位置，运行

```
which scala 
```

如果此命令向您显示 scala 二进制文件的路径。现在运行

```
pwd 
```

现在将 SCALA_HOME 路径导出到这些环境文件中的任何一个

> ~/.bashrc

或者

> /etc/profile

```
export SCALA_HOME=<output of pwd> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-05T05:57:48.550

我`/usr/local/share`在 scala 下载站点上安装了未解压的 scala。

在我的`.bashrc`中，我放置了以下行：

```
export PATH="/usr/local/share/scala-2.11.8/bin:$PATH" 
```

无论我在哪个目录中，都可以在终端上很好地工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-07-27T19:12:04.413

SCALA_HOME 应该是安装 scala 的目录。例如，此目录的名称可能是 scala-2.9.2。

# html - 您在哪里设置 Padrino 中的访问控制标头

> ID：15773295
> 
> 赞同：0
> 
> 时间：2013-04-02T20:01:58.040
> 
> 标签：html, ruby, access-control, padrino

在 Ruby on Rails 中，您可以将访问控制标头放在应用程序控制器中。帕德里诺呢？你把它们放在哪里？我已经尝试将它们放在控制器的方法中，我需要使用不同的标头和 app.rb 内部，但它没有锻炼......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:52:43.253

正如 Nikhil 所提到的，自己设置响应标头是一种很好的方法，可以控制正在发生的事情。

如果您将它们放在 app.rb 中的 before 块中，它们将应用于您的应用程序中的每条路线，我猜这就是您要在这里实现的目标。

请注意您授予的权限。我发现[这个 MDN 指南](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#The_HTTP_response_headers)是 CORS 标头的绝佳资源。

# git - 为什么在更新版本时会出现合并冲突？

> ID：15773303
> 
> 赞同：4
> 
> 时间：2013-04-02T20:02:26.120
> 
> 标签：git, version-control

我正在使用 git/github 开发一个 PHP 项目来维护我的项目。我正在遵循一个简单的分支模型（master、dev、hotfix-、feature-、release）。我的应用程序包含一个配置文件 (config.php)，我在其中定义了版本号。最近，我不得不做一个修补程序。我从 master 分支了 hotfix 分支，进行了更改，然后升级了版本（例如：1.1.2 到 1.1.3）。当我将修补程序合并回 master 时，我没有任何问题。当我将修补程序分支合并到 dev 时，我在版本号行与我的配置文件发生了合并冲突。在我的开发分支中，我有一个不同的版本号，所以我假设这就是导致冲突的原因。以后如何避免这种情况？我是否需要在不同的时间和/或分支更新版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:53:55.620

您可以使用“我们的”或“他们的”策略来告诉 got 如何自行解决冲突，但我认为您不能在特定行上使用这些策略。您可能希望避免开发人员必须更新版本号，而是在 git-hook 上执行此操作。

谷歌搜索出现了这个：[http ://cd34.com/blog/programming/using-git-to-generate-an-automatic-version-number/](http://cd34.com/blog/programming/using-git-to-generate-an-automatic-version-number/)

编辑：或者，您可以简单地标记版本号并让 git 完全忽略它。您是否在部署过程中将令牌替换为某个派生版本号 - 增量或基于 git SHA1 或其他数字。

有趣的话题，这是我真正需要尽快为我的团队做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:11:24.360

不，合并时您无法避免这种情况 - 对同一文件中同一行的两次更改最终会发生冲突。

您是否考虑过使用cherry-picks 来避免选择版本凹凸？另一种选择不是对版本进行硬编码，而是从 git 自动派生它（例如，发布分支根据提交次数获取数字，而修补程序分支根据分支名称获取后缀）

# git - 识别文件来自哪个远程存储库

> ID：15773304
> 
> 赞同：0
> 
> 时间：2013-04-02T20:02:31.833
> 
> 标签：git

如果我使用 git 并使用 sparse checkout 从单独的存储库中提取单个目录，那么事后有什么方法可以告诉该文件来自哪个存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:32:08.443

为了能够进行稀疏检出，您需要编辑文件*.git/info/sparse-checkout*以便您应该能够在那里找到它。

# ruby-on-rails - Ruby on Rails 从设计 gem 中的键中寻找价值

> ID：15773305
> 
> 赞同：0
> 
> 时间：2013-04-02T20:02:34.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, customization, custom-component

我是 ruby​​ on rails 的新手，我在我的应用程序上安装了设计。我想知道如果给出了值，我可以在哪里自定义值`views/devise/registrations/new.html.erb`

例如：

```
 <%= f.input :password_confirmation, :required => true %> 
```

这给出了一个输入和一个标签，标签是`* Password confirmation`。如何自定义此标签和输入字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:07:28.673

`<%= f.input :password_confirmation, :required => true, :label => 'something', :class => 'something' %>`

在 CSS 中定义 something 类，你会没事的。

当然，通过直接从设计中复制或使用其生成器来生成部分。我通常从设计回购中复制它们，因为我不太喜欢生成器，有时它们会生成我什至不需要或不想要的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:07:39.840

```
rails generate devise:views users 
```

您需要先生成部分。之后，您可以使用这些生成的文件来覆盖默认文件。此外，第一次从头开始构建身份验证可能会更好，以便更好地理解该过程。

[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

# android - 二次贝塞尔曲线的控制点

> ID：15773306
> 
> 赞同：0
> 
> 时间：2013-04-02T20:02:36.787
> 
> 标签：android

我是 Android API 的新手，我正在开发一个应用程序，其中我有一个 curveTool 对象，它应该首先画一条线，当你第二次触摸屏幕时，基本上创建一个控制点并根据之前绘制的线曲线控制点。所以基本上我有：

```
public void touchStart(MotionEvent event) {
    points = new ArrayList<PointF>();
    points.add(new PointF(event.getX(), event.getY()));
} 
```

它创建了起点，我有：

```
public void touchEnd(MotionEvent event) {
    points.add(new PointF(event.getX(), event.getY()));
} 
```

我在哪里创建线的端点，但我不确定如何使用`quadTo()`方法实现控制点并基于它制作线曲线。还有第三种方法：

```
public void touchMove(MotionEvent event) {
    points.add(new PointF(event.getX(), event.getY()));
} 
```

我不断加分的地方。

最后我使用以下方法绘制：

```
public void drawPreview(Canvas canvas) {
    paint = new Paint();
    paint.setAntiAlias(true);
    paint.setStyle(Style.STROKE);
    paint.setColor(Color.BLUE);
} 
```

我知道缺少很多代码，但我不确定如何实现它。我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:49:25.693

为了使用 quadTo，您必须创建一个 Path 对象，在 Path 上调用 quadTo，然后将路径绘制到画布上。

# regex - 正则表达式匹配最多 2 位小数的值

> ID：15773309
> 
> 赞同：4
> 
> 时间：2013-04-02T20:02:45.227
> 
> 标签：regex

我只想在“。”之前有 1 到 5 位数字。以及“.”后面的 0 到 2 位数字。这就是我到目前为止的正则表达式。

```
^\d{1,5}\.?\d{0,2}$

1.00 -- match
11.01 -- match
111.10 -- match
1111.52 -- match
11111.23 -- match
.12 -- no match ... want to match
123456 -- match ... don't want to match because can take up to 5 integers before decimal
1234567 -- match ... don't want to match because can take up to 5 integers before decimal 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T20:06:31.913

我认为您需要在带小数点的数字和不带小数点的数字之间进行替代：

```
^\d{1,5}|\d{0,5}\.\d{1,2}$ 
```

**编辑：**

感谢 user1884032 指出缺少的括号：

```
^(\d{1,5}|\d{0,5}\.\d{1,2})$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:06:43.913

```
 /^(\d{0,5}\.\d{1,2}|\d{1,5})$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:04:20.470

你需要这个：

```
^\d{1,5}\.\d{0,2}$ 
```

我已经删除了`?`，这使点成为可选的。

说你想匹配`.12`与你的规范相矛盾——点前没有 1-5 位数字。你的意思是`{0-5}`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-06T16:36:27.763

迟到总比不到好：

```
^([\d]{0,5})(\.[\d]{1,2})?$ 
```

两组：

*   一个匹配从 0 到 5 位，
*   另一个从 1 到 2 位小数，允许`0.12`为`.12`.

简单而完美:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T06:07:00.517

我在 python3 中实现的最简单的方法是 -

```
import re

p = re.compile(r'^\d{2}.\d{2}')
print(p.findall('12.59, 11.789, 10.6 lords a-leaping')) 
```

输出 -`['12.59']`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-02T20:04:43.317

有两个单独的问题：

1.  如果要匹配“.”之前的 0 到 5 位数字。所以你需要第一部分来`d{0,5}`代替`d{1,5}`.

2.  而不是有一个可选的“。” 后面跟着两个字符，你应该有“。” 如果它后面有字符，但如果它后面没有字符则没有点。使用以下内容，如果最后两位出现在“。”之后，您只会得到七位数。

    `^\(d{0,5}\.\d{0,2})|(d{0,5}\.?)$`

意思是

0-5
  位数字，然后是小数点，然后是 0-2 位数字
或
  0-5 位数字，后跟可选的小数点

此格式还将检测您未在测试中列出的该范围内的合法数字，例如`12345.`和`0.12`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-02T20:19:26.717

试试这个：

```
/^\d{0,5}\.\d{0,2}$/ 
```

# macos - 如何在 NSTableView 上放置 NSButton

> ID：15773316
> 
> 赞同：5
> 
> 时间：2013-04-02T20:03:14.360
> 
> 标签：macos, cocoa, nstableview

![按钮后面什么都没有](https://i.stack.imgur.com/30JEA.png) ![表已加载](https://i.stack.imgur.com/JzzzP.png) ![后面有表格的按钮](https://i.stack.imgur.com/pSDCV.png)

1) 按钮后面没有表格 2) 表格已加载 3) 滚动后

如果我在 NSTableView 上放置一个按钮，我会在滚动后留下工件。有谁知道如何解决这一问题？

我目前的解决方案是将带有表格的部分分成 2 部分。下部是背景中的禁用按钮。

![我现在的解决方案](https://i.stack.imgur.com/oKm70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T16:42:43.233

试试 NSScrollView 方法 `- (void)addFloatingSubview:(NSView *)view forAxis:(NSEventGestureAxis)axis` 所有的 tableviews 通常都应该在一个 ScrollView 里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T12:51:55.927

我有一个类似的问题并解决了它，请参阅[Why does an NSTextField leave artifacts over an NSTableView when the table scrolls?](https://stackoverflow.com/questions/22171410/why-does-an-nstextfield-leave-artifacts-over-an-nstableview-when-the-table-scrol) . 本质上，OSX 将绘制表格的内容并让父滚动视图**移动**缓存的内容，从而避免重绘以提高性能。通过子类化父滚动视图，可以强制刷新挂钩该`reflectScrolledClipView:`方法的表。然后整个表格，包括覆盖，将在每次滚动时重新绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T17:00:40.383

这是因为滚动视图设置为在滚动时复制其内容，并且仅重绘新发现的部分作为性能优化。要关闭它，请使用

```
myTableView.enclosingScrollView.contentView.copiesOnScroll = NO; 
```

尽管这会使滚动使用更多 CPU（您也可以在 XIB 中执行此操作，查找“滚动时复制”复选框）。

可能更好的方法是切换滚动视图和按钮以支持图层：

```
myTableView.enclosingScrollView.wantsLayer = YES;
myButtonView.wantsLayer = YES; 
```

（同样，您可以在 XIB 文件的“图层”检查器中设置此项，您可以在其中单击每个视图旁边的复选框以为其赋予一个图层）现在，滚动视图将仅从其自己的图层复制内容（没有不再包括您的按钮）。此外，现在文本视图的所有合成都将在显卡中完成。这适用于不透明按钮，但是，如果您将文本放在其自己图层中的透明背景上（例如，如果您有一个带标题的透明按钮），您将失去亚像素抗锯齿。

# symfony - 与中间表的教义关系

> ID：15773319
> 
> 赞同：1
> 
> 时间：2013-04-02T20:03:29.027
> 
> 标签：symfony, doctrine

我有一个`Product`和`Category`实体，它可以工作并且看起来像这样：[教义2：在一对多的双向关系中，如何从反面保存？](https://stackoverflow.com/questions/10618514/doctrine2-in-a-one-to-many-bidirectional-relationship-how-to-save-from-the-inv)

但实际上我有三个表：

产品：

```
id | ... 
```

类别：

```
id | ... 
```

产品分类：

```
product_id | category_id 
```

如何更改我的两个实体以使用中间表？还是我应该创建第三个实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T02:27:25.163

你可能想看看这个： http: [//www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html](http://www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html)

# windbg - 如何将windbg设置为提升应用程序的事后调试器？

> ID：15773320
> 
> 赞同：1
> 
> 时间：2013-04-02T20:03:44.213
> 
> 标签：windbg

我已将 windbg 注册为事后调试（通过`-I`命令行开关），并且对于非提升的应用程序都可以正常工作。但是，如果提升的应用程序崩溃、`windbg`启动并显示“无法附加到进程。访问被拒绝”错误。是否有可能以某种方式进行配置`windbg`，使其可以作为提升应用程序的事后调试器工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:20:38.147

由于您提到它是 x64 系统上的 x86 应用程序，因此您需要在 Wow6432Node 中设置这些注册表项：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows NT\CurrentVersion\AeDebug]
"UserDebuggerHotKey"=dword:00000000
"Debugger"="\"C:\\debuggers\\windbg.exe\" -p %ld -e %ld -g"
"Auto"="1" 
```

请注意，这些都是字符串值 ( `REG_SZ`)，我假设 windbg.exe 安装在`C:\debuggers`. 根据需要进行更改。

# python - 用Python在手机和服务器之间发送彩信的API？

> ID：15773321
> 
> 赞同：1
> 
> 时间：2013-04-02T20:03:48.900
> 
> 标签：python, sms, mms

我想在手机和中央服务器之间发送彩信/短信。最初，我想到了 Twilio，但看起来它们不支持彩信。

它们是我可以使用的同时支持 MMS 和 SMS 的 API 吗？最好使用 Python，但 Java 或 Ruby 也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:24:47.223

如果您正在寻找与[Twilio](http://www.twilio.com)类似的服务，可以[使用 Mogreet](http://www.mogreet.com)。我没有亲自使用过它们，所以我不能保证它们的可靠性，但似乎有相当多的追随者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T00:14:14.140

来自 Twilio 的 Ricky 在这里。我知道您的问题已经过时，但想为任何偶然发现此问题的人更新，我们去年在美国和加拿大的长代码上添加了对 MMS 的支持。

[如果您想使用我们的Python 库](https://www.twilio.com/docs/python/install)发送彩信，您可以使用以下代码：

```
message = client.messages.create(to="+12316851234", from_="+15555555555",
                                     body="Hello there!",
                                     media_url=['https://demo.twilio.com/owl.png', 'https://demo.twilio.com/logo.png']) 
```

或者，如果您正在寻找更复杂的东西，我会推荐这篇关于我的好朋友 Greg 如何[教他的狗使用 Python 和 Arduino Yun 向他发送 MMS 自拍的](https://www.twilio.com/blog/2015/03/how-my-dog-sends-selfies.html)帖子。

# css - div放置问题

> ID：15773322
> 
> 赞同：0
> 
> 时间：2013-04-02T20:03:49.657
> 
> 标签：css, html

我有这个 jsFiddle：http: [//jsfiddle.net/pqCGd/](http://jsfiddle.net/pqCGd/)。

它包含一个`messages`包含 div 的大 div `message`。这些`message`div 是自动生成的，但为了这个示例和简单性，我省略了此类 div 的自动生成，并提供了一个消息 div 的示例。

在`message`div 里面有 4 个 div 孩子：

1.  `dir`其中包含一个图像：我目前正在为此使用一个测试图像
2.  `a`其中包含3组数据，顶部`p`标签包含一个相当长的字符串，因此它比其他`p`标签小
3.  `b`其中包含另外 3 组数据，这次最后一个`p`标签相当长，需要较小的字体大小
4.  `c`它只包含一个名为的按钮`view`

**问题**：如果您查看`a`,`b`或`c`，您可能会注意到 div 似乎因为缺少其他词而“下降”。除了 div 之外，每个元素的 div 的 y 位置似乎都是关闭的`dir`。它们应与相同的 y 位置并排。如果您在看到这种影响时遇到问题，您可以使用 Google Chrome 的“检查元素”工具并找到这些标签的位置。在元素检查器中将鼠标悬停在它们上方应该会显示一个蓝色框，显示 div 的封装大小和位置。你应该看到`a`低于`dir`，`b`低于`a`，`c`低于`b`。也应该出现`button`在 div 边界之间（部分显示）。

**我想要什么：** 我需要让 divs:`a`和y 位置与 y 位置`b`相同。最好用CSS。`c``dir`

*请注意：*谷歌浏览器是我的测试目标。所以不要担心 IE 或任何其他浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:10:03.640

这是一个`{vertical-align: top}`应用于 .a、.b 和 .c 的示例。也许这就是你所追求的。

[http://jsfiddle.net/isherwood/pqCGd/1/](http://jsfiddle.net/isherwood/pqCGd/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:13:44.877

希望我理解正确。您可以添加`float: left;`到`div.message div`. 所以他们会并排坐在一起。

[检查这个小提琴](http://jsfiddle.net/pqCGd/2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T20:18:30.760

如果您需要在页面加载后更改它，您可以使用此代码在 jQuery 中更改它

```
var offset = $(".dir").offset();
$(".a").offset({ top: offset.top});
$(".b").offset({ top: offset.top});
$(".c").offset({ top: offset.top}); 
```

这是结果 [http://jsfiddle.net/ekvU9/1/](http://jsfiddle.net/ekvU9/1/)

请注意， .offset() 获取与文档相关的位置，因此您可以确定偏移量在所有浏览器中都是正确的。

# tsql - Sybase ASE 80 个字符限制

> ID：15773326
> 
> 赞同：0
> 
> 时间：2013-04-02T20:04:00.463
> 
> 标签：tsql, sap-ase

使用`SELECT`或`PRINT`打印长度超过 80 个字符的字符串将导致换行。

有没有办法打印超过 80 个字符的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:49:17.063

`PRINT`本身不换行，但 isql[默认换行为 80 个字符](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.utility/html/utility/utility14.htm)；你可以用`-w`开关改变它。

# ios - 我应该将 Core Data 用于移动购物应用程序吗？

> ID：15773328
> 
> 赞同：1
> 
> 时间：2013-04-02T20:04:04.847
> 
> 标签：ios, objective-c, core-data, persistence, backend

我目前正在开发一个移动购物 iOS 应用程序，该应用程序连接到 RoR 的后端以接收其所有数据。

您是否会推荐核心数据作为存储持久数据的一种方式，例如

*   用户信息 + Auth 令牌（保持登录状态）
*   项目的照片，因此它们不必在每次实例化视图/应用程序退出并重新打开（缓存）时从网络加载。
    *   这些照片将显示在多个表格视图和描述页面中

如果您不建议使用核心数据。您会说哪些其他选项最适合在这种情况下使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:35:14.993

您的要点描述了一些简单的偏好项目，然后是图像缓存方案。我看不到使用核心数据甚至 sql lite 的理由。（核心数据，顺便说一句，学习曲线陡峭。）您最好使用 NSUserDefaults 作为身份验证令牌，然后实现基于文件的图像缓存机制。由于 url 是唯一的，因此通过对 url 进行散列来创建文件名。当您获取图像时，生成基于哈希的文件名并首先查看它是否在文件系统中，如果没有则通过网络获取并存储以供下次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:08:55.937

我会利用 CoreData 进行缓存。您可以轻松地将图像存储为 NSData 对象。对于您的 Auth 令牌，您可能需要考虑使用钥匙串。查看[钥匙串服务文档](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)。

# java - 特殊字符的正则表达式

> ID：15773329
> 
> 赞同：1
> 
> 时间：2013-04-02T20:04:09.707
> 
> 标签：java, regex

我正在尝试编写正则表达式来检查文本段落中的特殊字符（包括'script'和'javascript'关键字），使用：

```
"(script)|(javascript)|([/'()&<>^~`|\"])" 
```

但是，如果我将字母与它混合，这将不起作用。假设我输入`<`，它会检测到，但如果我输入`<s`ir 不会检测到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:32:34.423

试试这个：

```
".*(script|javascript|[/'()&<>^~`|\"]).*" 
```

我`.*`在正则表达式之前和之后添加了一个。

意思是：

*   零个或多个任意字符
*   后跟任何特殊字符（或模式）
*   后跟零个或多个任意字符

这应该允许您的正则表达式匹配这样的模式：

```
aaaa<
aaaa<a
<aaaaa
<
xscript
scriptx
xxscriptxx 
```

* * *

这是另一种方法：

```
static final Pattern INVALID_CHARS = Pattern.compile("[/'()&<>^~`|\"]");

boolean isInvalid(String s) {
    if (s.indexOf("javascript") != -1) {
        return true;
    }
    if (s.indexOf("script") != -1) {
        return true;
    }
    if (INVALID_CHARS.matcher(s).find()) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:12:21.480

它不会检测到'<s'，因为它不是设计的。

所要做的就是匹配“javascript”的一个实例、“script”的一个实例或这些特殊字符之一。

如果你想让它检测 '<s; 你需要使用 * 或 +... 之类的

```
((script)|(javascript)|([/'()&<>^~`|\"]))+ 
```

虽然这不会匹配 '<s'，但它会匹配 '<script'

# python - 如何在 python 中使用 dict 构建带有 boto 和 amazon ec2 的多维数组？

> ID：15773338
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:04:45.797
> 
> 标签：python, amazon-web-services, amazon-ec2, boto

我正在尝试使用 python 和 boto 从 Amazon EC2 打印实例和 IP 列表。

我习惯了 PHP 漂亮的多维数组和类似的 JSON 语法，但我在 python 中遇到了很多麻烦。我尝试使用 AutoVivification，如 **[在 Python 中初始化字典字典的最佳方法是什么？](https://stackoverflow.com/questions/651794/whats-the-best-way-to-initialize-a-dict-of-dicts-in-python)**但我没有运气访问其中的对象。

这是我的代码：

```
import sys
import os
import boto
import string
import urllib2
from pprint import pprint
from inspect import getmembers
from datetime import datetime

class AutoVivification(dict):
    """Implementation of perl's autovivification feature."""
    def __getitem__(self, item):
        try:
            return dict.__getitem__(self, item)
        except KeyError:
            value = self[item] = type(self)()
            return value

conn = boto.connect_ec2_endpoint(ec2_url, AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
tags = conn.get_all_tags()
myInstances = AutoVivification()

for tag in tags:
    if ( tag.res_type == 'instance' and tag.name == 'Name'):
        if( tag.res_id ):
            myInstances[tag.res_id]['myid'] = tag.res_id
            myInstances[tag.res_id]['name'] = tag.value

addrs = conn.get_all_addresses()
for a in addrs:
    if( a.instance_id ):
      myInstances[a.instance_id]['ip'] = a.public_ip

pprint( myInstances )

for i in myInstances:
    print i.name.rjust(25), i.myid 
```

如果我这样做了，`pprint( myInstances )`那么我可以看到我创建的多维字典，但我无法访问子数组`i.myid`- 我收到如下错误：

```
AttributeError: 'unicode' object has no attribute 'myid'
AttributeError: 'unicode' object has no attribute 'name' 
```

做`pprint( myInstances)`给了我类似的东西：

```
{u'i-08148364': {'myid': u'i-18243322', 'name': u'nagios', 'ip': u'1.2.3.4'}} 
```

所以我不明白为什么我无法访问这些项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:08:01.177

您的问题只是您尝试访问这些项目的方式：

```
for i in myInstances:
    # i iterates over the KEYS in myInstances
    print i.name.rjust(25), i.myid 
```

对于 中的每个**键**，这都会尝试`myInstances`打印`i.name.rjust(25)`等等。您想要的是访问给定键的**值**（并使用正确的 Python 语法来访问字典元素）：

```
for i in myInstances:
    # i iterates over the KEYS in myInstances
    print myInstances[i]["name"].rjust(25), myInstances[i]["myid"] 
```

或者，如果您根本不需要键，只需首先迭代值：

```
for i in myInstances.values():
    # i iterates over the VALUES in myInstances
    print i["name"].rjust(25), i["myid"] 
```

或者最后，根据请求，如果您真的想一次迭代键和值：

```
for k, v in myInstances.iteritems():
    print k, v["name"].rjust(25), v["myid"] 
```

# c - 为什么在链表初始化中使用指向函数的指针？

> ID：15773339
> 
> 赞同：3
> 
> 时间：2013-04-02T20:04:48.617
> 
> 标签：c, algorithm, data-structures

我正在读一本关于算法的书，作者用这段代码定义了双向链表：

```
void dlist_init(DList *list, void (*destroy)(void *data)); 
```

这里用函数指针销毁函数有什么用？我们不能稍后在任何列表上调用 destroy() 函数吗？为什么在初始化期间传递指向它的指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:06:23.487

函数指针被传递给初始化函数，以便列表函数知道如何销毁列表条目。列表函数旨在对各种条目进行操作，因此需要“告诉”它们如何销毁此列表将具有的特定条目。

# php - 带有 Javascript 的 PHP 变量

> ID：15773344
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:05:06.577
> 
> 标签：php, javascript

我想编写检查几个条件的 PHP 代码，然后在加载的页面上触发 JavaScript。

php文件是：

```
$jwplayer= "<script>jwplayer('video1').setup({playlist:$file});</script>";
$url2= "http://$_SERVER[HTTP_HOST]/index.php";
$url3= "http://$_SERVER[HTTP_HOST]/index3.php";
$url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
if($url2==$url) {
  $file= "/media/video.xml";
  echo $jwplayer;
}
 if($url3==$url) {
  $file= "/media/video2.xml";
  echo $jwplayer;
} 
```

我正在使用 PHP include 来包含上述代码。

如果页面的 URL 等于`$url2`上面的值，那么我希望更新播放列表。这可以通过设置`$file`为“/media/video.xml”并执行我试图包含的所需 JavaScript 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:10:23.883

试试这个：

```
$file= "/media/default.xml";

$url = "http://" . $_SERVER[HTTP_HOST] . $_SERVER[REQUEST_URI];
$url2= "http://$_SERVER[HTTP_HOST]/index.php";

if($url2==$url) {
    $file= "/media/video.xml";
}

$jwplayer= "<script>jwplayer(\"video1\").setup({playlist:".$file."});</script>";
echo $jwplayer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:13:18.453

我将从修复您的语法错误开始，然后从那里开始：

```
function jwPlayer($xml) {
    echo("<script>jwplayer('video1').setup({playlist:'$xml'});</script>");
}
$url2= "http://" . $_SERVER["HTTP_HOST"] . "/index.php";
$url = "http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"];
if($url2 == $url) {
    $file= "/media/video.xml";
    jwPlayer($file);
} else {
    jwPlayer("path/to/other/file.xml");
} 
```

在使用后定义变量只会给您带来问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:12:54.850

也许像这样

```
$file = "somefile.xml";
$url2= "http://$_SERVER[HTTP_HOST]/index.php";
$url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]"; 
if($url2==$url) 
    $file= "/media/video.xml";
$jwplayer= "<script>jwplayer(\"video1\").setup({playlist:$file});</script>";
echo $jwplayer; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T20:25:41.520

试试这个..

```
$url2= "http://$_SERVER[HTTP_HOST]/index.php";
$url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";

if($url2==$url) {
  $file= "/media/video.xml";
  echo $jwplayer= "<script>jwplayer("video1").setup({playlist:$file});</script>";
} 
```

在您的代码中，您似乎试图通过回显脚本来获取 $file 的值。

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T20:35:34.777

这段代码中有一些错误。

在你分配这个字符串的那一刻，变量`$file`是未定义的，你必须先定义它。

```
$jwplayer= "<script>jwplayer('video1').setup({playlist:$file});</script>" 
```

在 javascript 对象文字上，您必须引用一个字符串。如果不这样做，变量的内容`$file`将成为未定义的 javascript 变量。

```
{playlist:"$file"} //playlist is a string 
```

试试这个

```
$url2 = "http://$_SERVER[HTTP_HOST]/index.php";
$url = "http://" . $_SERVER[HTTP_HOST] . $_SERVER[REQUEST_URI];
if($url2==$url) {
    $file= "/media/video.xml";
    $jwplayer= "<script>jwplayer('video1').setup({playlist:'$file'});</script>";
    echo $jwplayer;
} 
```

我不确定“恒定”是什么意思，但我会做这样的事情，但我不能确定这是否适用于实际问题中提供的少量信息。

```
<?php
    $url2 = "http://$_SERVER[HTTP_HOST]/index.php";
    $url = "http://" . $_SERVER[HTTP_HOST] . $_SERVER[REQUEST_URI];
    $file = "";
    if($url2==$url) {
        $file = "/media/video.xml";
    }
?>

<script>
jwplayer('video1').setup({playlist:'<?=$file>'});
</script> 
```

# php - PHPunit 和 Mockery：找不到方法

> ID：15773347
> 
> 赞同：1
> 
> 时间：2013-04-02T20:05:35.563
> 
> 标签：php, phpunit, mockery

我在使用 PHPunit 和 Mockery 时遇到问题。出于某种原因，PHPunit 说`onFoo`我在 Mockery 中定义的方法不存在。

```
public function testReturnsTheCorrectValueWithClass()
{
    $listener = \Mockery::mock('FooListener');
    $listener->shouldReceive('onFoo')
             ->once()
             ->andReturn('foo');

    $this->eventManager->attach('foo.class', array($listener, 'onFoo'));

    $this->assertTrue($this->eventManager->dispatch('foo.class') === 'foo');
} 
```

有谁知道这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:51:22.760

我找到了问题的解决方案！它与我的测试代码无关，但与我的 EventManager 获取模拟对象的方式有关。我创建了一个新的模拟对象实例，而不是仅仅使用现有的。

不过感谢大家的帮助！

# php - 替换字符串中的占位符变量

> ID：15773349
> 
> 赞同：17
> 
> 时间：2013-04-02T20:05:40.323
> 
> 标签：php, preg-match

刚刚完成这个功能。基本上，它假设查看一个字符串并尝试找到任何占位符变量，这些变量将放置在两个大括号之间`{}`。它获取大括号之间的值，并使用它来查看应该匹配键的数组。然后它将字符串中的大括号变量替换为匹配键的数组中的值。

虽然它有一些问题。首先是当我`var_dump($matches)`将结果放入数组中时。所以我必须使用两个`foreach()`来获得正确的数据。

我也觉得它很重，我一直在寻找它试图让它变得更好，但我有点难过。我错过了什么优化？

```
function dynStr($str,$vars) {
    preg_match_all("/\{[A-Z0-9_]+\}+/", $str, $matches);
    foreach($matches as $match_group) {
        foreach($match_group as $match) {
            $match = str_replace("}", "", $match);
            $match = str_replace("{", "", $match);
            $match = strtolower($match);
            $allowed = array_keys($vars);
            $match_up = strtoupper($match);
            $str = (in_array($match, $allowed)) ? str_replace("{".$match_up."}", $vars[$match], $str) : str_replace("{".$match_up."}", '', $str);
        }
    }
    return $str;
}

$variables = array("first_name"=>"John","last_name"=>"Smith","status"=>"won");
$string = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you {STATUS} the competition.';
echo dynStr($string,$variables);
//Would output: 'Dear John Smith, we wanted to tell you that you won the competition.' 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-02T20:29:01.823

我认为对于这样一个简单的任务，您不需要使用 RegEx：

```
$variables = array("first_name"=>"John","last_name"=>"Smith","status"=>"won");
$string = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you {STATUS} the competition.';

foreach($variables as $key => $value){
    $string = str_replace('{'.strtoupper($key).'}', $value, $string);
}

echo $string; // Dear John Smith, we wanted to tell you that you won the competition. 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-16T11:13:29.700

我希望我加入派对还不算太晚——我会这样做：

```
function template_substitution($template, $data)
{
    $placeholders = array_map(function ($placeholder) {
        return strtoupper("{{$placeholder}}");
    }, array_keys($data));

    return strtr($template, array_combine($placeholders, $data));
}

$variables = array(
    'first_name' => 'John',
    'last_name' => 'Smith',
    'status' => 'won',
);

$string = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you have {STATUS} the competition.';

echo template_substitution($string, $variables); 
```

而且，如果您有任何机会可以使您的`$variables`密钥与您的占位符完全匹配，那么解决方案将变得非常简单：

```
$variables = array(
    '{FIRST_NAME}' => 'John',
    '{LAST_NAME}' => 'Smith',
    '{STATUS}' => 'won',
);

$string = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you have {STATUS} the competition.';

echo strtr($string, $variables); 
```

（参见PHP 手册中的[strtr()](http://www.php.net/manual/en/function.strtr.php)。）

考虑到 PHP 语言的性质，我相信这种方法应该会在该线程中列出的所有方法中产生最佳性能。

* * *

**编辑：**在 7 年后重新审视这个答案后，我注意到我这边有一个潜在的危险疏忽，另一位用户也[指出了](https://stackoverflow.com/questions/15773349/replacing-placeholder-variables-in-a-string/38176815#38176815)这一点。一定要以赞成票的形式拍拍他们的后背！

如果您对此答案在此编辑之前的样子感兴趣，请查看[修订历史记录](https://stackoverflow.com/posts/18272025/revisions)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-02T20:18:04.147

我认为你可以大大简化你的代码，这样（除非我误解了一些要求）：

```
$allowed = array("first_name"=>"John","last_name"=>"Smith","status"=>"won");

$resultString = preg_replace_callback(

    // the pattern, no need to escape curly brackets
    // uses a group (the parentheses) that will be captured in $matches[ 1 ]
    '/{([A-Z0-9_]+)}/',

    // the callback, uses $allowed array of possible variables
    function( $matches ) use ( $allowed )
    {
        $key = strtolower( $matches[ 1 ] );
        // return the complete match (captures in $matches[ 0 ]) if no allowed value is found
        return array_key_exists( $key, $allowed ) ? $allowed[ $key ] : $matches[ 0 ];
    },

    // the input string
    $yourString
); 
```

PS.：如果要从输入字符串中删除不允许的占位符，请替换

```
return array_key_exists( $key, $allowed ) ? $allowed[ $key ] : $matches[ 0 ]; 
```

和

```
return array_key_exists( $key, $allowed ) ? $allowed[ $key ] : ''; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-04T04:06:55.800

只是提醒未来登陆此页面的人：使用`foreach`循环和/或方法的所有答案（包括接受的**答案**`str_replace`）都容易用.**`Johnny won`**

 **体面的 Dabbler 的`preg_replace_callback`方法和 U-D13 的第二个选项（但不是第一个）是目前发布的唯一一个不受此影响的方法，但是由于我没有足够的声誉来添加评论，所以我会写出来我猜是一个完全不同的答案。

如果您的替换值包含用户输入，则更安全的解决方案是使用该`strtr`函数，而不是`str_replace`避免重新替换可能出现在您的值中的任何占位符。

```
$string = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you {STATUS} the competition.';
$variables = array(
    "first_name"=>"John",
    // Note the value here
    "last_name"=>"{STATUS}",
    "status"=>"won"
);

// bonus one-liner for transforming the placeholders
// but it's ugly enough I broke it up into multiple lines anyway :)
$replacement = array_combine(
    array_map(function($k) { return '{'.strtoupper($k).'}'; }, array_keys($variables)),
    array_values($variables)
);

echo strtr($string, $replacement); 
```

输出：`Dear John {STATUS}, we wanted to tell you that you won the competition.` 而 str_replace 输出：`Dear John won, we wanted to tell you that you won the competition.`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-02T20:35:37.767

这是我使用的功能：

```
function searchAndReplace($search, $replace){
    preg_match_all("/\{(.+?)\}/", $search, $matches);

    if (isset($matches[1]) && count($matches[1]) > 0){
        foreach ($matches[1] as $key => $value) {
            if (array_key_exists($value, $replace)){
                $search = preg_replace("/\{$value\}/", $replace[$value], $search);
            }
        }
    }
    return $search;
}

$array = array(
'FIRST_NAME' => 'John',
'LAST_NAME' => 'Smith',
'STATUS' => 'won'
);

$paragraph = 'Dear {FIRST_NAME} {LAST_NAME}, we wanted to tell you that you {STATUS} the competition.';

// outputs: Dear John Smith, we wanted to tell you that you won the competition. 
```

只需将一些文本传递给它以搜索，以及一个包含替换的数组。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-17T08:02:48.760

```
/**
   replace placeholders with object
**/
$user = new stdClass();
$user->first_name = 'Nick';
$user->last_name = 'Trom';

$message = 'This is a {{first_name}} of a user. The user\'s {{first_name}} is replaced as well as the user\'s {{last_name}}.';

preg_match_all('/{{([0-9A-Za-z_]+)}}/', $message, $matches);

foreach($matches[1] as $match)
{
    if(isset($user->$match))
        $rep = $user->$match;
    else
        $rep = '';

    $message = str_replace('{{'.$match.'}}', $rep, $message);
}

echo $message; 
```**

# jsf - JSF Managed bean 中 List 的初始化

> ID：15773350
> 
> 赞同：12
> 
> 时间：2013-04-02T20:05:42.427
> 
> 标签：jsf, jsf-2, arraylist, java-ee-6

我有一个关于 POJO 中 List 初始化的问题，因为它遵循下一个代码：

```
public class Person {

 //other fields...
 private List<String> friends=new ArrayList<>();

     public List<String> getFriends() {
        return friends;
     }
     public void setFriends(List<String> friends) {
        this.friends = friends;
    }

} 
```

或者像这样更好并且在其他类中有初始化（例如Bean（JSF））

```
public class Person {

 //other fields...
 private List<String> friends;

     public List<String> getFriends() {
        return friends;
     }
     public void setFriends(List<String> friends) {
        this.friends = friends;
    }

} 
```

所以我的问题是哪种方法更好？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T20:53:22.680

如果它是您所说的托管 bean，则应该在带有注释的方法中执行此操作 `@PostConstruct`

```
public class Person {
    private List<String> friends;
    @PostConstruct
    public void init(){
         friends = new ArrayList<String>();
    }

    //getter and setter...
} 
```

1.  在 JSF 的上下文中，通常不赞成在 getter 和 setter 中进行任何初始化的做法。查看[为什么 JSF 多次调用 getter](https://stackoverflow.com/q/2090033/1065197)

2.  此外，[根据 的 API`@PostConstruct`](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)，合约指定了安全特性，并保证如果在这样注释的方法中抛出异常，则不应将 bean 投入使用。普通构造函数没有这样的保证。

3.  在托管 bean 中，注入在构建后立即发生。这意味着您在构造函数中执行的任何操作都不能依赖于任何注入的资源（通过`@ManagedProperty`）。而在`@PostConstruct`方法中，您将可以访问托管 bean 上声明的所有资源

编辑：重要的是要注意any*只能有一个* ，所以所有重要的初始化都应该在那里发生。`@PostConstruct``@ManagedBean`

还值得注意的是，虽然该`@PostConstruct`方法是初始化支持 bean 变量 / 的理想位置`List`，但它对托管 bean 的范围有影响

1.  `@RequestScoped`：在带有此注解的托管 bean 中，每次提交相关的 JSF 视图都会调用该方法。每个请求都会销毁并重新创建一个`@RequestScoped`bean，这意味着根据您的设置，`@PostConstruct`在每个请求期间初始化的列表可能会重置为空值或默认值。在某些情况下，由于重新初始化列表 mid-JSF 请求，可能会发生转换错误。

2.  `@ViewScoped`：在带有此注解的托管 bean 中，**当且仅当**您正在处理该bean的同一个实例时，才能保证该`@PostConstruct`方法运行一次。如果 viewscoped bean 被销毁并重新创建，则该方法将再次运行。**`@ViewScoped``@PostConstruct`**

***   `@SessionScoped`: 带有此注解的 bean 被创建一次，并一直保持活动状态，直到用户的 HTTP 会话结束。在这种情况下，`@PostConstruct`方法保证运行一次且只运行一次，直到 bean 被销毁** 

 **也可以看看

*   [https://stackoverflow.com/a/3406631/1530938](https://stackoverflow.com/a/3406631/1530938)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:11:15.170

我建议这样做：

```
public class Person {
     //other fields...
     private List<String> friends=new ArrayList<>();

     // returns a copy to protect original list
     public List<String> getFriends() {
        Collections.unmodifiableList(new ArrayList<>(friends));
     }
     public void addFriend(String> friend) {
        this.friends.add(friend);
     }
     public void addFriends(List<String> friends) {
        this.friends.addAll(friends);
     }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T20:09:20.153

在我看来，最好在构造函数中处理它。如果使用默认构造函数，则在构造函数中初始化列表。

```
public Person() {
    friends = new ArrayList<>();
} 
```

如果使用了接受参数的构造函数，则让调用类传入一个列表。

```
public Person(ArrayList<> friends) {
    this.friends = friends;//friends
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T20:11:52.790

我的建议，在 getter 中添加一个空检查：

```
public class Person {
  //other fields...
  private List<String> friends;

  public List<String> getFriends() {
     if (this.friends == null) friends = new ArrayList<String>();
     return friends;
  }
} 
```

但也要注意我省略了 setter。相反，在任何客户端代码中，调用如下：

```
personInstance.getFriends().add("Some Item"); 
```

或者，如果您有完整的列表要添加：

```
personInstance.getFriends().addAll(someStringCollection); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T20:10:09.563

这取决于。通常第一种方式更可取，因为您可能希望稍后将某些内容添加到集合中。如果您不知道您的集合是否已初始化，您必须每次都检查它。**

# google-chrome - 谷歌浏览器扩展程序可以闪烁操作系统样式警报吗？

> ID：15773351
> 
> 赞同：1
> 
> 时间：2013-04-02T20:05:42.770
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

例如，无论哪个应用程序正在运行，咆哮都会在右上角闪烁一条消息。Skype 使 Dock 中的图标带有一个带有许多新消息的小红点。反正有没有写一个 chrome 扩展来拥有这种类型的功能？也就是说，我想编写一个可以在浏览器中运行的聊天系统，但也可以在用户关闭我的网站选项卡时通知用户，甚至在 chrome 未运行时通知用户。

除了基于浏览器的客户端之外，我还可以编写本机客户端，但这是工作量的两倍。（如果您使用本机窗口的客户端而不是仅使用 OSX，则将工作增加三倍，但谁会这样做？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:33:39.883

Chrome 可以创建“桌面通知”参见[文档](http://developer.chrome.com/extensions/notifications.html)

如果您创建“后台进程”，也可以在关闭 chrome 时显示通知。[这个问题/答案](https://stackoverflow.com/q/12839128/212869)可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:21:17.900

[Chrome 支持W3C 桌面通知标准](http://www.html5rocks.com/en/tutorials/notifications/quick/)的纯文本版本。Chrome 大约在一年前弃用了 HTML 版本，并且很快就会停止支持它。在 Chrome 中查看的任何网页和任何 Chrome 扩展程序都可以使用此 API。

[丰富](https://plus.google.com/100132233764003563318/posts/J4GZGvAggTU)的通知 API可用于 Chrome 扩展程序和打包的应用程序。到今天为止，它只是开发渠道，并且正在迅速迭代。它已在 ChromeOS 和 Windows 上实现，Mac 正在开发中。Linux 目前委托给 W3C 实现。API 不是 W3C HTML 桌面通知的 1:1 替代品，但它确实为常见用例提供了许多布局选项。

# llvm - llvm中的分析使用错误

> ID：15773352
> 
> 赞同：1
> 
> 时间：2013-04-02T20:05:44.320
> 
> 标签：llvm

这是我尝试使用我的通行证中的 DomFrontier 信息时得到的结果：

```
opt: /home/smriti/Thesis/llvm/include/llvm/PassAnalysisSupport.h:214:
AnalysisType && llvm::Pass::getAnalysisID(AnalysisID) const [AnalysisType = llvm::DominanceFrontier]:
Assertion `ResultPass && "getAnalysis*() called on an analysis that was not " "'required' by pass!"' failed` 
```

我把它放在我的 pass 中，它来自模块 pass：

```
virtual void getAnalysisUsage(AnalysisUsage &AU) const {AU.addRequired<DominanceFrontier>();} 
```

我的 runOnFunction 包含以下内容：

```
DominanceFrontier& DF = getAnalysis<DominanceFrontier>(FF); 
```

如果我对这些有问题，请告诉我？或者如果问题出在其他地方，我应该附上通行证的整个代码吗？

# emacs - 在 org-babel src 块中缩进代码

> ID：15773354
> 
> 赞同：14
> 
> 时间：2013-04-02T20:05:51.770
> 
> 标签：emacs, org-mode, org-babel

在 org-mode 文件中，代码如下：

```
#+begin_src emacs-lisp
(add-to-list 'org-tab-before-tab-emulation-hook
             (lambda ()
               (when (within-the-body-of-a-begin-src-block)
                 (indent-for-tab-command--as-if-in-lisp-mode))))
#+end_src 
```

我希望 TAB 键缩进代码，就像它在 lisp 模式下的缓冲区中一样。

我需要的是：

*   一种判断光标是否在 src 块内的方法。它不需要在标题行本身上触发，因为在这种情况下应该发生默认的组织折叠。
*   一种根据标头中指定的模式（在本例中为 emacs-lisp）缩进代码的方法。

Org 已经可以根据模式语法高亮 src 块，并且 TAB 钩子在那里。这看起来可行。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-01T20:23:39.230

从 Emacs 24.1 开始，您现在可以设置以下选项：

```
(setq org-src-tab-acts-natively t) 
```

...这应该处理所有 src 块。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-11T06:45:36.240

只需将点移动到代码块中并按 Cc '

这将在 elisp 模式下弹出一个缓冲区，语法高亮显示所有...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T19:31:49.967

这是一个粗略的解决方案：

```
(defun indent-org-src-block-line ()
  "Indent the current line of emacs lisp code."
  (interactive)
  (let ((info (org-babel-get-src-block-info 'light)))
    (when info
      (let ((lang (nth 0 info)))
        (when (string= lang "emacs-lisp")
          (let ((indent-line-function 'lisp-indent-line))
            (indent-for-tab-command)))))))

(add-to-list 'org-tab-before-tab-emulation-hook
             'indent-org-src-block-line) 
```

它只处理 emacs-lisp 块。我只测试了 src 块未缩进（不是 org 默认值）。

通常很难让一种模式在另一种模式中工作——许多键盘命令会发生冲突。但是一些更基本的笔画，比如缩进的制表符、换行符、注释（org 会用 # 注释 lisp 代码，这是错误的）似乎可以使它们起作用并且会产生最大的影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-01T14:30:03.560

```
(defun my/org-cleanup ()
  (interactive)
  (org-edit-special)
  (indent-buffer)
  (org-edit-src-exit)) 
```

应该这样做，其中 `indent-buffer' 定义为：

```
(defun indent-buffer ()
  (interactive)
  (indent-region (point-min) (point-max))) 
```

# grails - Grails 应用程序自杀

> ID：15773357
> 
> 赞同：1
> 
> 时间：2013-04-02T20:05:57.630
> 
> 标签：grails

我刚刚有机会试驾了一周的 VPS，并决定在上面尝试 Grails。问题是，它会自行关闭。

细节：

*   VPS - 512MB 内存，Ubuntu 12.10 x64（x64 没有特别的原因）
*   甲骨文 Java 7u17
*   最新的 GVM 0.9.5
*   圣杯 2.2.1

我所做的是遵循本教程[http://grails.org/Quick+Start](http://grails.org/Quick+Start)，这是非常基础的。一切都很顺利，直到我做到了`grails run-app`。

初始化完成后，显示运行了5s左右，我什至可以开始加载页面，但它突然出现`Killed`在终端中。这是终端显示的内容：

```
root@jp:/var/grails/my-project# grails run-app
| Running Grails application
Killed 
```

在那段时间里没有任何输入。关于这个问题的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:04:57.553

`run-app`在本地开发时，您应该只使用该命令运行 Grails 。这背后的原因是因为 run-app 启动您的 Grails 应用程序时有很多动态行为，这对于快速开发非常有用，但在实际服务器上运行时性能却很糟糕。

请参阅 Grails 的用户指南，了解如何最好地部署您的应用程序：

[http://grails.org/doc/latest/guide/gettingStarted.html#deployingAnApplication](http://grails.org/doc/latest/guide/gettingStarted.html#deployingAnApplication)

正如上述文档所述，运行 Grails 应用程序的正确方法是将其嵌入到 servlet 容器中。Tomcat 是一个很好的起点，因为 Grails 在本地运行时默认使用它。根据您的环境，您可能还需要使用 servlet 容器的 VM 标志（同样，文档在此处给出了一些建议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T09:21:14.950

如果命令在您的终端上立即被杀死，您可以重定向命令的输出。

```
grails run-app > output.txt 
```

然后打开 output.txt 并从那里你可以剖析问题。就我而言，我得到了一个不正确的 JAVA_HOME 目录。希望能帮助到你。

# python - 识别可迭代对象的停止迭代

> ID：15773358
> 
> 赞同：2
> 
> 时间：2013-04-02T20:06:02.550
> 
> 标签：python

我有 2 个生成器并使用下一个方法和 while 循环来处理它，如下所示，

代码

```
while end_of_loop = 'n':
    try:
        table1_row = next(table1_generator)
        table2_row = next(table2_generator)
    except StopIteration:
        end_of_loop = 'y' 
```

如何识别哪个迭代器对象没有行？

我试图比较 2 个表，每个表行都在生成器对象中。

```
def _compare(self):
        end_of_table = 'N'

        try:
            while end_of_table =='N':
                try:
                    if self.table1_key == self.table2_key:
                        print 'same key'
                        self.table1_row = next(self.table1_generator)
                        self._convert_table1_key_fields()
                        self.table2_row = next(self.table2_generator)
                        self._convert_table2_key_fields()
                    elif self.table1_key > self.table2_key:
                        self.table2_row = next(self.table1_generator)
                        self._convert_table2_key_fields()
                    elif self.table1_key < self.table2_key:
                        self.table1_row = next(self.table2_generator)
                        self._convert_table1_key_fields()
                except StopIteration as e:
                    print e.args
                    print 'IterError'
                    end_of_table = 'y'

        except StopIteration:
            print 'Next Iteration' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:09:37.530

您可以提供第二个“哨兵”值`next`：

```
sentinel = object()
while end_of_loop = 'n':

    table1_row = next(table1_generator,sentinel)
    table2_row = next(table2_generator,sentinel)

    #I don't account for the case where they could be exhausted at 
    #the same time.  It's easy to add that if it matters though.
    if table1_row is sentinel:
       print "table1_generator gave up first"
       #"break" might be more appropriate ... 
       #(Unless there more to the loop than this.)
       end_of_loop = 'y'    
    elif table2_row is sentinel:
       print "table2_generator gave up first"
       end_of_loop = 'y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:09:11.517

您没有提供有关上下文或您实际尝试做的事情的详细信息，但听起来[itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)可能对您的情况有用（并且更多pythonic）。您可以填写`Nones`或其他合适的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:19:09.183

我想不出一个用例（愿意分享吗？），但我会尝试包装`next`到我自己的函数中：

```
def mynext(it):
    try:
        return next(it)
    except StopIteration:
        raise StopIteration(it) 
```

然后，例如，

```
a = iter([1,2,3,4,5])
b = iter([4,5,6,7])

try:
    while True:
        print mynext(a)
        print mynext(b)
except StopIteration as e:
    if e.args[0] == a: print 'a ended' 
    if e.args[0] == b: print 'b ended' 
```

# nuget - 脱机时创建 NuGet 包

> ID：15773363
> 
> 赞同：1
> 
> 时间：2013-04-02T20:06:29.797
> 
> 标签：nuget, packages, offline

我想从办公室 Intranet 上的计算机创建 NuGet 包，但会阻止所有与 Internet 的连接。

NuGetPackageExplorer.application 和 NuGet.exe 都会显示“无法建立连接，因为目标计算机主动拒绝它”的异常。

安装包工作正常，因为我们有一个本地网络文件夹，其中包含我们使用的 .nupkg 包。

有没有可以用来在该机器上创建 NuGet 包的工具？

**更新**：我为此在 codeplex 上创建了一个问题： [https ://nuget.codeplex.com/workitem/3196](https://nuget.codeplex.com/workitem/3196)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:06:34.070

我最终做的是[从 CodePlex 下载源代码](http://nuget.codeplex.com/SourceControl/BrowseLatest)，进入 CommandLine 项目，删除 UpdateCommand.cs，并重建项目。然后我抓取了我重命名为 NuGetOffline.exe 的 exe，并将它与 NuGet.Core.dll 一起放在路径中的某个位置。

**更新**

NuGet的[下载页面](https://nuget.codeplex.com/releases)没有当前版本的 NuGet.exe。在撰写本文时，页面上的三个下载都没有离线工作，其他下载有多个版本的 Nuget.Tools，但没有当前版本的 NuGet.exe。转到[此处](https://nuget.org/nuget.exe)获取 nuget.exe。使用它而不是那个自定义构建。

下载页面上的 Package Explorer 链接只是可以脱机工作的 ClickOnce 安装程序。您需要在[此处](https://npe.codeplex.com/releases)找到本地可执行文件。

我无法让“启用 NuGet 包还原”在 Intranet 上工作。 [这个关闭的工作项](https://nuget.codeplex.com/workitem/2390)描述了问题。最后一条评论说“2.0 不应再遇到这个问题”，但我使用的是 NuGet 包管理器 2.2.400116.9051。

# javascript - 清除 cookie 并尝试登录

> ID：15773365
> 
> 赞同：0
> 
> 时间：2013-04-02T20:06:34.710
> 
> 标签：javascript, jquery, iframe, cross-domain

我有一个使用弹出窗口的登录功能（全部使用 jQuery 插件），一旦登录完成，就会使用用户信息设置 cookie，并且用户已登录。登录使用 iframe 进行，该 iframe 访问受保护的页面并使用有效的用户凭据。当我清除 cookie 时，iframe 不再能够访问受保护的页面，并且我在 JavaScript 中看到权限被拒绝错误。在检测到用户清除 cookie 后，是否有通用的解决方案来清除 iframe 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:12:27.497

即使您可以在 Javascript 中收听，我也不相信存在“cookie 已被清除”。如果 iFrame 被隐藏并且错误无关紧要，您可以简单地将引发权限被拒绝错误的代码包装在 try/catch 块中，并显示用户友好的“您已被注销”消息。

# php - PHP验证查询字符串if语句

> ID：15773367
> 
> 赞同：0
> 
> 时间：2013-04-02T20:06:37.890
> 
> 标签：php, validation, if-statement, query-string

这似乎应该很容易，但我一辈子都无法让它工作，我正在检查查询字符串中的一个变量，如果它返回是，它会重定向到一个新页面。如果它返回 no 我希望它在表单上方显示错误消息。

我的问题是显示错误消息，它在 var=Yes 时重定向，但是当它给我 var=no 时，我无法让它显示错误消息。如果我将 $errormsg 替换为 header(..); 它有效，所以我知道这不是我的 if 语句。

```
if (isset($_GET['var'])) {
            $var = $_GET['var'];
            $errormsg = '';
            if ($var == 'Yes') {
                header( 'Location: http://www.google.com' ); exit;
            }
            else if ($var == 'no') {
                $errormsg = 'This is an error message.';
            }

        }; 
```

这是表单上方的错误消息：

```
<div class="errormsg"><?php echo $errormsg; ?></div> 
```

我的 PHP 能力有限，我无法弄清楚我做错了什么，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:19:08.533

尝试直接在 if 块下回显 $errormsg 而不使用任何 HTML。看看你的文字是否被退回。

认为您也可以从最后一个花括号中删除那个半冒号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:14:54.320

我的猜测是 $var 没有返回您所期望的（可能是“否”而不是 mjayt 在评论中建议的“否”。

第一步是调试，并确定 $var 实际返回的内容。尝试简单的打印语句并从那里开始。

# jquery - 用jquery填写进度条表单

> ID：15773369
> 
> 赞同：3
> 
> 时间：2013-04-02T20:06:44.553
> 
> 标签：jquery, progress-bar

我正在尝试创建一个进度条，该进度条会随着表格的填写而增加。例如，如果我有 5 个输入。每个输入都需要填写才能达到 100% 我的目标是在表单达到 100% 时激活一个按钮。

我的想法是做一堆 if blank 使其值为 0，但如果不是，则它的值为 10，或某个任意数字。

然后我只需将这些值相加即可完成进度条。

我不确定如何设置这些值以便我可以将它们相加，或者这甚至是正确的方法。我不知道该去哪里。这是代码：

```
<form>
One<input id="1" type="name" name="name"><br />
Two<input id="2" type="name" name="name"><br />
Three<input id="3" type="name" name="else"><br />
Four<input id="4" type="name" name="name"><br />
Five<input id="5" type="name" name="name"><br />

</form>

<div id="progressbar"></div>

$(function() {
$( "#progressbar" ).progressbar({
  value: 37
});

});

$(function(){
 if ( $('#1').val() == '' ){value == 0};
 } else {
     value == 10;  };
if ( $('#2').val() == '' ){value == 0};
 } else {
     value == 10;  };
if ( $('#3').val() == '' ){value == 0};
 } else {
     value == 10;  };
if ( $('#4').val() == '' ){value == 0};
 } else {
     value == 10;  };
if ( $('#5').val() == '' ){value == 0};
 } else {
     value == 10;  };
}); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:46:54.420

HTML：

```
<form>
One<input id="1" type="name" name="name" data-pbVal="60"><br />
Two<input id="2" type="name" name="name" data-pbVal="5"><br />
Three<input id="3" type="name" name="name" data-pbVal="5"><br />
Four<input id="4" type="name" name="name" data-pbVal="0"><br />
Five<input id="5" type="name" name="name" data-pbVal="30"><br />
</form>
<div id="progressbar"></div> 
```

Javascript：

```
$(function() {
$( "#progressbar" ).progressbar({
  value: 0
});

//Register this function to fire whenever a value changes in one of the input elements
$("form input").change(function() {
    var pbVal = 0;
    //For each input element, count the value on the data-pbVal element and add it to the total
    $("form input").each(function(index) {
        if($(this).val().length > 0) {
            pbVal += $(this).data('pbVal');
        }
    });
    $( "#progressbar" ).progressbar( "option", "value", pbVal );
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:35:11.820

HTML：

```
<form>
One<input id="1" type="name" name="name" class='moo'><br />
Two<input id="2" type="name" name="name" class='moo'><br />
Three<input id="3" type="name" name="else" class='moo'><br />
Four<input id="4" type="name" name="name" class='moo'><br />
Five<input id="5" type="name" name="name" class='moo'><br />
</form>
<div id="progressbar"></div> 
```

Javascript：

```
$(function() {
$( "#progressbar" ).progressbar({
  value: 0
});

$(".moo").change(function() {
    var pbVal = 0;
    if ($("#1").val().length > 0) pbVal += 20;
    if ($("#2").val().length > 0) pbVal += 20;
    if ($("#3").val().length > 0) pbVal += 20;
    if ($("#4").val().length > 0) pbVal += 20;
    if ($("#5").val().length > 0) pbVal += 20;
    $( "#progressbar" ).progressbar( "option", "value", pbVal );
    return false;
}); 
```

});

# coldfusion - Coldfusion 10 错误：无法存储作业...因为已存在具有此标识的作业

> ID：15773372
> 
> 赞同：2
> 
> 时间：2013-04-02T20:06:57.230
> 
> 标签：coldfusion, coldfusion-10

我在过去几天运行良好的 CF10 应用程序上突然出现以下错误，但现在只显示此错误：

***无法存储作业：'SERVERSCHEDULETASK#$%^DEFAULT.job_CHECKQUOTEEXPIRATION'，因为已存在具有此标识的作业。***

计划代码如下所示：

```
<cfschedule action = "update" 
    task = "CheckQuoteExpiration"  
    operation = "HTTPRequest" 
    url = "#application.Config.scheduleTaskUrl#CheckQuotesExpiration" 
    startDate = "2012-01-01" 
    startTime = "11:59 PM" 
    interval = "daily" 
    requestTimeOut = "600"> 
```

据我所知，尝试重新创建计划任务时可能会出错，但为什么呢？我该如何解决这个问题？

[我想补充一点，这发生在 Hostek 的共享托管环境中]

谢谢

# email - 调用未定义函数 bp_core_get_user_email() - Buddypress 问题

> ID：15773375
> 
> 赞同：0
> 
> 时间：2013-04-02T20:07:06.057
> 
> 标签：email, buddypress

我在尝试检索使用 Buddypress 登录的用户的电子邮件时遇到问题。这是我的代码：

```
 global $bp; 
    echo bp_core_get_user_email($bp->loggedin_user->id); 
```

这是我打开php页面时弹出的错误消息：

“致命错误：在第 4 行的 /home/user/public_html/useremail.php 中调用未定义函数 bp_core_get_user_email()”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:43:40.057

获取电子邮件的其他选项：

$user_active = wp_get_current_user();

$user_mail = $user_active->user_email;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:34:45.613

您是否在文件中加载了 WordPress 和 BuddyPress `useremail.php`？我看到它与 wp-config.php 级别相同。要使其了解有关 WP/BP 功能的任何信息，您至少需要执行以下操作：

`include ('./wp-load.php');`

否则，在您的情况下，每次使用非标准 php 函数时，php 文件都会出错。

但**真正**的方法是使用WP - 创建：

1) 一个插件，将处理对特定 url 的所有请求

*或者*

2) 在 WP dahsboard 中使用特定的页面模板创建一个页面，在其模板文件中，您可以编写您需要或想要的任何代码。

# json - BigQuery 对 JSON 数组导入的支持

> ID：15773377
> 
> 赞同：0
> 
> 时间：2013-04-02T20:07:24.727
> 
> 标签：json, google-app-engine, google-bigquery, google-cloud-storage

我有一个存储在 JSON 中的项目列表。目前，BigQuery 似乎不支持 JSON 数组。我有以下 JSON：

```
[
    {
        "purchaseId": "f7c67e39-5382-4d08-a308-0e4657143c44",
        "platform": "googleplay",
        "createdAt": 1364226047214,
        "type": "currency",
        "purchaseDate": 1364225968000,
        "updatedAt": 1364226052634
    },
    {
        "purchaseId": "f7c67e39-5382-4d08-a308-0e4657143c44",
        "platform": "googleplay",
        "createdAt": 1364226047214,
        "type": "currency",
        "purchaseDate": 1364225968000,
        "updatedAt": 1364226052634
    },
    {
        "purchaseId": "f7c67e39-5382-4d08-a308-0e4657143c44",
        "platform": "googleplay",
        "createdAt": 1364226047214,
        "type": "currency",
        "purchaseDate": 1364225968000,
        "updatedAt": 1364226052634
    }
] 
```

我收到以下错误：

```
 Line:1 / Column:1, Expected '{' found '[' 
```

类似以下的内容将是无效的 JSON：

```
 {
        "purchaseId": "f7c67e39-5382-4d08-a308-0e4657143c44",
        "platform": "googleplay",
        "createdAt": 1364226047214,
        "type": "currency",
        "purchaseDate": 1364225968000,
        "updatedAt": 1364226052634
    },
    {
        "purchaseId": "f7c67e39-5382-4d08-a308-0e4657143c44",
        "platform": "googleplay",
        "createdAt": 1364226047214,
        "type": "currency",
        "purchaseDate": 1364225968000,
        "updatedAt": 1364226052634
    } 
```

那么，对 JSON 中的项目进行分组的最佳方式是什么，然后 BigQuery 可以轻松地使用这些项目呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:10:50.120

我相信输入在技术上是无效的 JSON。它被称为“换行符分隔的 JSON”。每行必须是一个独立的 JSON 字典，末尾有一个换行符。行间没有逗号。

# java - 如何将背景图片添加到 JMenu 屏幕？

> ID：15773383
> 
> 赞同：0
> 
> 时间：2013-04-02T20:08:01.007
> 
> 标签：java, swing, image, jmenu

所以我想知道是否有添加图片作为 jmenu 的背景，我指的不是 JMenu 栏，而是它下方的实际屏幕。我在网上看了很长时间，似乎找不到任何解决我问题的方法。任何帮助/解决方案将不胜感激。再一次，我试图找到一种方法来打印图片，而不是在 JMenu 栏上，而是在它下方的空间上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:34:19.060

> 再一次，我试图找到一种方法来打印图片，而不是在 JMenu 栏上，而是在它下方的空间上。

我想你的意思是`content pane`. 请参阅[使用顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)以了解一些术语。

如果这是您的意思，请查看[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:16:11.343

我假设你的意思是`JMenuItem`？[DreamInCode.net 上](http://www.dreamincode.net/forums/topic/205525-jmenuitem-background/)有一篇文章讨论了将图像添加到`JMenuItem`. 您所要做的就是扩展`JMenuItem`并覆盖它的`paintComponent()`方法。

[*Dogstopper*](http://www.dreamincode.net/forums/user/97990-dogstopper/)的解决方案：

```
public CustomMenuItem(){
        this.setOpaque(true);
        i = new ImageIcon(getClass().getResource("/Img/BackGround.png")).getImage();
        System.out.println(i);
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(i, 0, 0, this);

} 
```

# css - Chrome 26“检查元素”复制粘贴问题

> ID：15773386
> 
> 赞同：1
> 
> 时间：2013-04-02T20:08:06.993
> 
> 标签：css, google-chrome, inspect

出于某种原因，我无法将 css 代码粘贴到“检查元素”窗口。

假设我想测试“font-weight:bold; color: red”并将其粘贴到 element.style，结果如下： ![](https://i.stack.imgur.com/BUJTA.png)

如您所见，仅粘贴了“字体粗细”。

这真的很烦人，因为我习惯于按原样粘贴代码......特别是如果我正在尝试教程中的几种样式或我在这里找到的问题的解决方案。

难道只有我一个？我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:19:10.630

该错误是已知的，将在下一个版本中修复：

[https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-developer-tools/RC3i6GW2h28](https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-developer-tools/RC3i6GW2h28)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:15:01.743

您始终可以在线编辑样式以进行测试：

右键单击标记。单击“添加属性”。键入`style="`ctrl+ v`"`

不确定是否有更优雅的解决方案。 `element.style`无论如何只是添加一个`style=""`属性。

# java - jFlex 错误：类抛出 java.io.IOException

> ID：15773387
> 
> 赞同：6
> 
> 时间：2013-04-02T20:08:07.977
> 
> 标签：java, lexical-analysis, jflex

我编写了一个非常简单的文件，其规范如下所示来标记单词：

```
%%
%class Lexer
%unicode

WORD = [^\r\n\t ]

%%
{WORD}  {System.out.println("Word is:"+yytext());}

.       {System.out.println("Bad character: "+ yytext());} 
```

以下是我运行的命令：

```
jflex hindi.jlex
javac Lexer.java 
```

我收到以下错误：

```
Lexer.java:442: cannot find symbol
symbol  : class Yytoken
location: class Lexer
  public Yytoken yylex() throws java.io.IOException {
     ^
1 error 
```

任何帮助表示赞赏。

另外，我检查了`Lexer.java`文件，其中没有任何`main`功能。这就是这个错误的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:36:46.393

如果要独立检查词法分析器（没有解析器），请将以下内容添加到用户代码部分：

```
%standalone 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T13:49:53.420

那些使用 byaccj 并收到此错误的人应该添加`%byaccj`一行而不是`%standalone`在该`%class Lexer`行下方

# javascript - 如何连接谷歌地图中的两点..？

> ID：15773388
> 
> 赞同：4
> 
> 时间：2013-04-02T20:08:12.373
> 
> 标签：javascript, google-maps, google-maps-api-3

```
 function createLine()
{

        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(7.5653, 80.4303);
        var mapOptions = {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("directionpanel"), mapOptions);

        var address = document.getElementById('startvalue').value;
        var address2 = document.getElementById('endvalue').value;

        var temp, temp2;

        geocoder.geocode({ 'address': address }, function (results, status) {
            temp = results[0].geometry.location;
        });
        geocoder.geocode({ 'address': address2 }, function (results, status) {
            temp2 = results[0].geometry.location;
        });

        var route = [
          new google.maps.LatLng(temp),
          new google.maps.LatLng(temp2)
        ];

    var polyline = new google.maps.Polyline({
        path: route,
        strokeColor: "#ff0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
    });

    polyline.setMap(map);

} 
```

我想画一条直线来连接两个点，我不会计算那条线的距离。我尝试使用此代码连接点的任何方式，但它不起作用。请帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:58:31.443

地理编码是异步的。尝试这样的事情（从第一个回调中调用第二个地理编码器操作，在第二个回调中使用两者的结果）。

```
function createLine()
{

    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(7.5653, 80.4303);
    var mapOptions = {
        zoom: 8,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("directionpanel"), mapOptions);

    var address = document.getElementById('startvalue').value;
    var address2 = document.getElementById('endvalue').value;

    var temp, temp2;

    geocoder.geocode({ 'address': address }, function (results, status) {
        temp = results[0].geometry.location;
        geocoder.geocode({ 'address': address2 }, function (results, status) {
            temp2 = results[0].geometry.location;

        var route = [
          temp,
          temp2
        ];

        var polyline = new google.maps.Polyline({
            path: route,
            strokeColor: "#ff0000",
            strokeOpacity: 0.6,
            strokeWeight: 5
        });

        polyline.setMap(map);
        });
    });
} 
```

[工作示例](http://www.geocodezip.com/v3_SO_drawLineFromGeocodedResults.html)

[![结果地图的屏幕截图](https://i.stack.imgur.com/GP9k1.png)](https://i.stack.imgur.com/GP9k1.png)

**代码片段：**

```
var geocoder;
var map;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(7.5653, 80.4303);
  var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), mapOptions);

  createLine();
}

function createLine() {

  var address = document.getElementById('startvalue').value;
  var address2 = document.getElementById('endvalue').value;

  var temp, temp2;

  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status != "OK") alert("geocode of address:" + address + " failed, status=" + status);
    temp = results[0].geometry.location;
    document.getElementById('results').innerHTML += temp.toUrlValue() + "<br>";
    geocoder.geocode({
      'address': address2
    }, function(results, status) {
      if (status != "OK") alert("geocode of address:" + address + " failed, status=" + status);
      temp2 = results[0].geometry.location;
      document.getElementById('results').innerHTML += temp2.toUrlValue() + "<br>";

      var route = [
        temp,
        temp2
      ];

      var polyline = new google.maps.Polyline({
        path: route,
        strokeColor: "#ff0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
      });

      var lengthInMeters = google.maps.geometry.spherical.computeLength(polyline.getPath());
      // alert("polyline is "+lengthInMeters+" long");            
      document.getElementById('results').innerHTML += "Polyline is " + lengthInMeters + " meters long<br>";

      polyline.setMap(map);
      var bounds = new google.maps.LatLngBounds();
      bounds.extend(temp);
      bounds.extend(temp2);
      map.fitBounds(bounds);
    });
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map {
  margin: 0;
  padding: 0;
  height: 100%;
}
```

```
<input id="startvalue" type="text" width="90" value="Megaswewa, Sri Lanka"></input>
<input id="endvalue" type="text" width="90" value="Kandy, Sri Lanka"></input>
<input type="button" value="Geocode" onclick="createLine()"></input>
<div id="map" style="width:600px;height:500px;"></div>
<div id="results"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&libraries=geometry"></script>
```

# php - 此操作需要开发者密钥

> ID：15773392
> 
> 赞同：1
> 
> 时间：2013-04-02T20:08:41.447
> 
> 标签：php, youtube-api

我找不到“此操作所需的开发人员密钥”问题的解决方案。

这是我的代码：

```
require_once 'Zend/Loader.php'; // the Zend dir must be in your include_path
Zend_Loader::loadClass('Zend_Gdata_YouTube');
$yt = new Zend_Gdata_YouTube();

Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin'); 

$authenticationURL= 'https://www.google.com/accounts/ClientLogin';
$httpClient = 
  Zend_Gdata_ClientLogin::getHttpClient(
              $username = '************@gmail.com',
              $password = '************',
              $service = 'youtube',
              $client = null,
              $source = '************', // a short string identifying your application
              $loginToken = null,
              $loginCaptcha = null,
              $authenticationURL);

// Note that this example creates an unversioned service object.
// You do not need to specify a version number to upload content
// since the upload behavior is the same for all API versions.
$yt = new Zend_Gdata_YouTube($httpClient);

// create a new VideoEntry object
$myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

// create a new Zend_Gdata_App_MediaFileSource object
$filesource = $yt->newMediaFileSource('asd.avi');
$filesource->setContentType('video/x-ms-wmv');
// set slug header
$filesource->setSlug('asd.avi');

// add the filesource to the video entry
$myVideoEntry->setMediaSource($filesource);

$myVideoEntry->setVideoTitle('My Test Movie');
$myVideoEntry->setVideoDescription('My Test Movie');
// The category must be a valid YouTube category!
$myVideoEntry->setVideoCategory('Autos');

// Set keywords. Please note that this must be a comma-separated string
// and that individual keywords cannot contain whitespace
$myVideoEntry->SetVideoTags('cars, funny');

// set some developer tags -- this is optional
// (see Searching by Developer Tags for more details)
$myVideoEntry->setVideoDeveloperTags(array('mydevtag', 'anotherdevtag'));

// set the video's location -- this is also optional
$yt->registerPackage('Zend_Gdata_Geo');
$yt->registerPackage('Zend_Gdata_Geo_Extension');
$where = $yt->newGeoRssWhere();
$position = $yt->newGmlPos('37.0 -122.0');
$where->point = $yt->newGmlPoint($position);
$myVideoEntry->setWhere($where);

// upload URI for the currently authenticated user
$uploadUrl = 'http://uploads.gdata.youtube.com/feeds/api/users/default/uploads';

// try to upload the video, catching a Zend_Gdata_App_HttpException, 
// if available, or just a regular Zend_Gdata_App_Exception otherwise
try {
  $newEntry = $yt->insertEntry($myVideoEntry, $uploadUrl, 'Zend_Gdata_YouTube_VideoEntry');
} catch (Zend_Gdata_App_HttpException $httpException) {
  echo $httpException->getRawResponseBody();
} catch (Zend_Gdata_App_Exception $e) {
    echo $e->getMessage();
} 
```

我尝试将我的 devkey 与以下几行一起使用，但我需要把它放在哪里？

```
$developerKey = 'ABC123 ... ';
$applicationId = 'Video uploader v1';
$clientId = 'My video upload client - v1';

$yt = new Zend_Gdata_YouTube($httpClient, $applicationId, $clientId, $developerKey); 
```

我试图找到一个完整的 PHP 代码来将视频上传到 youtube，但没有找到任何东西............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:23:59.437

代替

```
$yt = new Zend_Gdata_YouTube($httpClient); 
```

您需要执行以下操作：

```
$yt = new Zend_Gdata_YouTube($httpClient, $applicationId, $clientId, $developerKey); 
```

请注意，$applicationId 和 $clientId 都必须是有效的 id。除非已经可用，否则您可以在此处创建应用程序和客户端 ID：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

您可以通过在此处注册获取您的开发者密钥：[https ://code.google.com/apis/youtube/dashboard/gwt/index.html#settings](https://code.google.com/apis/youtube/dashboard/gwt/index.html#settings)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:26:28.480

### **如何获得开发者密钥**

开发者密钥可以通过在 Google YouTube API 中创建产品来获得。

登录您的[Google 帐户](https://accounts.google.com/ServiceLogin?service=youtubepartnersyn&passive=true&nui=1&continue=https://code.google.com/apis/youtube/dashboard/gwt/&followup=https://code.google.com/apis/youtube/dashboard/gwt/)：

![第1步](https://i.stack.imgur.com/GRlLP.png)

如果您是第一次，它会自动将您重定向到创建开发者资料：

![第2步](https://i.stack.imgur.com/L6YH4.png)

创建您的开发人员资料后，继续创建产品，它可能是您想要的一切。

![第三步](https://i.stack.imgur.com/cleDL.png)

创建产品后，您将在经过审查的文本框中获得开发人员密钥（“此处为开发人员密钥”）

![第4步](https://i.stack.imgur.com/yDh9q.png)

将其复制到您的代码中，如果您使用的是 API 的第 3 版，则可以在此处获取客户端密钥。

### **如何获取客户 ID**

为了获得客户端 ID，您需要在 Google API 的控制台中创建一个 API 项目。

[Google API 的控制台](https://code.google.com/apis/console/)

登录后会看到这个页面！按创建项目并创建您的项目：

![2步1](https://i.stack.imgur.com/pTtND.png)

它会自动为您创建项目，现在您需要选择要使用的服务。如果您要使用 YouTube，请选择 YouTube 数据 API。

![2步2](https://i.stack.imgur.com/e58dK.png)

现在您将能够进入 API 访问选项卡。在那里创建一个 OAuth ID。

![2步3](https://i.stack.imgur.com/9aWMf.png)

输入您的产品信息：

![2步4](https://i.stack.imgur.com/cdWwM.png)

选择它的类型：

![2步5](https://i.stack.imgur.com/Ckvpu.png)

获取您的客户 ID！:D

![2步6](https://i.stack.imgur.com/uEBJM.png)

# objective-c - ABPeoplePickerView 警告 NSImage compositeToPoint:operation:] 在 MacOSX 10.8 中已弃用

> ID：15773393
> 
> 赞同：0
> 
> 时间：2013-04-02T20:08:43.457
> 
> 标签：objective-c, xcode, addressbook, abpeoplepickerview

使用 Mac OS 10.8.3 和 xCode 4.6.1 并使用 ABPeoplePickerView 和一个非常简单的 Cocoa App 和 XIB 使用 ABPeoplePickerView 会导致来自 ABPeoplePickerView 的运行时警告：

*2013-04-02 21:58:36.848 AddressbookTest[4462:303] ** * 警告：-[NSImage compositeToPoint:operation:] 在 MacOSX 10.8 及更高版本中已弃用。请改用 -[NSImage drawAtPoint:fromRect:operation:fraction:]。*

但我无法更改 Apple 本身的课程 crCeated。苹果漏洞？任何解决方法可以避免这种情况或简单地忽略运行时警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:11:35.460

忽略它。如果您想就此骚扰通讯簿团队，请使用 bugreport.apple.com，但这不是必需的。

# javascript - 如何将对象引用传递给 Javascript/jQuery 中的函数？

> ID：15773394
> 
> 赞同：0
> 
> 时间：2013-04-02T20:08:45.197
> 
> 标签：javascript, jquery

我正在制作的数据工具中有两个功能 -`showEditDv(object)`和`editDv(object)`. 如果您还没有猜到，`Dv`代表数据值。`showEditDv`当您单击编辑数据图标时调用。它会生成一个[Opentip](http://www.opentip.org/)工具提示，（将）允许您编辑数据，调用方式如下：`showEditDv(this);`在 onclick 属性中。这是该函数的代码（不，实际中没有内联注释）：

```
function showEditDv(object) {
    var name = $(object).attr("data-name"); // string(name) now holds the name of the data value
    var input = new Opentip($(object), {target: null, showOn: null, hideTrigger: "closeButton"});
    input.setContent("<label>Name:</label><input type='text' value='" + name + "' class='dv-add-name' /><label>Value:</label>input type='text' class='dv-add-value' value='" + data[name] + "' /><button onclick='editDv(" + $(object) /*<-- problem */ + ");'>Apply</button>");
    input.show();
} 
```

`editDv()`当“应用”按钮调用该函数时，就会出现问题。因为对象在字符串中被引用（我认为！），对象引用被打印为`[object Object]`，并且该函数无法隐藏 Opentip，因为它没有引用。这是代码`editDv()`：

```
function editDv(object) {
    var input = $(object).data("opentips")[0]; // data("opentips") is an array of objects
    input.hide();
} 
```

所以我的问题是：如何将`input`对象从`showEditDv`to`editDv`作为参数传递，或者是否有更好的方法来完全做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:17:39.987

不要使用 onclick 事件调用内联函数，而是使用 jQuerys .on() 函数：

像这样：

```
function showEditDv(object) {
    var name = $(object).data("name"); // use .data()
    var input = new Opentip($(object), {target: null, showOn: null, hideTrigger: "closeButton"});
    input.setContent("<label>Name:</label><input type='text' value='" + name + "' class='dv-add-name' /><label>Value:</label>input type='text' class='dv-add-value' value='" + data[name] + "' /><button class='callEditDv'>Apply</button>");
    input.show();
} 
```

和

```
$('.callEditDv').on('click', function() {
    // access the button like this: $(this)
}); 
```

# ruby-on-rails - rails nested_forms 错误和逻辑

> ID：15773399
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:05.147
> 
> 标签：ruby-on-rails, nested-forms

我正在尝试将一些字段添加到我的嵌套表单中。我已经包含了 gem `nested_forms`( [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form) )。

对于我的预建地图，它工作正常，但我无法添加新字段。

我的控制器：

```
def new
  @people = Person.all
  @vehicles = Vehicle.all
  @roles = Role.all
  @pratice_people = []
  @people.each do |a|
    if a.at1 == true
      @pratice_people << a
    end
  end
  @practice = Practice.new
  @pratice_people.count.times { @practice.uebung_maps.build }
  render action: "new"
end 
```

和我的表格：

```
 <% @runs = 0 %>
 <%= f.fields_for :uebung_maps do |map| %>
   <tr>
     <%= map.hidden_field :role_id, :id => "role_id_#{@runs}"  %>
     <%= map.hidden_field :vehicle_id, :id => "vehicle_id_#{@runs}"  %>
     <%= map.hidden_field :person_id , :value => @pratice_people[@runs].id %><br/>
     <td><%= @pratice_people[@runs].name %></td>
     <td><%= map.select :role_id,  options_from_collection_for_select(@roles, :id, :name), :include_blank => true %></td>
     <td><%= map.select :vehicle_id,  options_from_collection_for_select(@vehicles, :id, :name), :include_blank => true %></td>
     <td><%= map.text_field :time %></td>
   </tr>
   <% @runs += 1 %>
 <% end %>

<%= f.link_to_add "+" , :uebung_maps %> 
```

如果我尝试访问该页面，我会收到以下错误报告

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

我是否必须（或如何）创建一个重新运行的逻辑`Practice.uebung_maps.build?`，因为我认为这是在`nested_forms`gem 中完成的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:38:13.267

首先，确保模型创建正确。

```
class Practice < ActiveRecord::Base
   has_many :uebung_maps
   accepts_nested_attributes_for :uebung_maps
end

class UebungMap < ActiveRecord::Base

end 
```

其次，确保`form_for`正确嵌套

```
<%= nested_form_for @practice do |f| %>
  <%= f.fields_for :uebung_maps do |uebung_maps_form| %>
    <%= uebung_maps_form.text_field :time %>
  <% end %>
  <p><%= f.link_to_add "+", :uebung_maps %></p>
<% end %> 
```

# jquery - 无效的 JSON 响应？

> ID：15773401
> 
> 赞同：1
> 
> 时间：2013-04-02T20:09:06.030
> 
> 标签：jquery, ajax, json, post

我有一个页面可以做一些事情，然后输出一个 JSON 响应。这个页面是从 jQuery Ajax 调用中调用的，但是当我在 Firefox 中检查帖子时，我得到了我不理解的 Invalid JSON。

这是页面的代码

```
Write("{status: 'ERROR', StatusCode: '" + result.StatusCode + "',payload: ''}"); 
```

输出看起来像这样（对我来说看起来不错？）

```
{status: 'ERROR', StatusCode: '200',payload: ''} 
```

这是我的 AJAX 调用

```
$.ajax({
            type:"POST",
            url: copyBUURL,
            data: { action: "copy_bu", bu_id: selected_bu.id, bu_name: selected_bu.name, new_parent: new_parent_bu.id, new_parent_name: new_parent_bu.name, new_name: $("#bu_name").val(), from_name: $("#bu_fromname").val(), email: $("#bu_email").val() },
            contentType:"application/x-www-form-urlencoded; charset=utf-8",
            dataType:"json",
            success:function(data){
                if(!data)
                {
                    alert("There was an error processing your request");
                    return false;
                }
                $("#createBtn").removeAttr("disabled");
                $("#cancelBtn").removeAttr("disabled");

                console.log("Data response: " + JSON.stringify(data));

                //xhr_users Landing Page
                showUrlInDialog('https://pages.umusic-mail.com//page.aspx?QS=472529ec60bdf32a5a46a47dceedf4ab0793800df7757ecbd2298ad0f8bc85eb&bu_id=' + data.bu_id + '&bu_name=' + data.bu_name);

                if (data.status == "OK") {

                    $("#msgBox").css("height", "80px");
                    $("#result").html("The Business Unit was successfully copied!<br /><br />Users will be assigned very shortly. (You will see a dialog window pop up in this page).");
                    $("#loader").attr("src", "https://dl.dropbox.com/u/417891/aeg-checkmark.png").css("display", "inline");
                    hideContainer();
                    resetForm();
                    $("#business_units").jstree("refresh");
                } else if (data.status.toUpperCase() == "ERROR") {
                    displayError(data.payload);
                    $("#msgBox").attr("class", "msgBoxOff");
                    $("#result").html("");
                    $("#loader").css("display", "none");
                } else {
                    // something way wrong
                }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                console.log(xhr.status);
                console.log(thrownError);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:13:00.960

您需要在这样的所有内容周围加上双引号：

```
{
    "status": "ERROR",
    "StatusCode": "200",
    "payload": ""
} 
```

或这个：

```
{
    "status": "ERROR",
    "StatusCode": 200,
    "payload": ""
} 
```

如果你想`StatusCode`成为一个整数。
此外，如果您将来遇到问题，请考虑使用[JSONLint](http://jsonlint.com/)来验证您的 json。

# c# - 多线程和任务问题

> ID：15773402
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:06.753
> 
> 标签：c#, multithreading

这是我第一次在一个项目中尝试多个线程，所以请耐心等待。这个想法是这样的。我有一堆需要转换为 pdf 的文件。我正在使用 itextsharp 为我进行转换。迭代运行时，程序运行良好但速度较慢。

我有一个需要转换的项目列表。我把那个列表分成两个列表。

```
 for (int i = 0; i < essaylist.Count / 2; i++)
                {                        
                    frontessay.Add(essaylist[i]);
                    try
                    {
                        backessay.Add(essaylist[essaylist.Count - i]);
                    }
                    catch(Exception e)
                    {
                    }
                }
                if (essaylist.Count > 1)
                {
                    var essay1 = new Essay();
                    Thread t1 = new Thread(() => essay1.StartThread(frontessay));
                    Thread t2 = new Thread(() => essay1.StartThread(backessay));

                    t1.Start();
                    t2.Start();

                    t1.Join();
                    t2.Join();
                }
                else
                {
                    var essay1 = new Essay();
                    essay1.GenerateEssays(essaylist[1]);
                } 
```

然后我创建了 2 个运行此代码的线程

```
 public void StartThread(List<Essay> essaylist)
    {
        var essay = new Essay();
        List<System.Threading.Tasks.Task> tasklist = new List<System.Threading.Tasks.Task>();
        int threadcount = 7;
        Boolean threadcomplete = false;
        int counter = 0;
        for (int i = 0; i < essaylist.Count; i++)
        {               
            essay = essaylist[i];
            var task1 = System.Threading.Tasks.Task.Factory.StartNew(() => essay.GenerateEssays(essay));
            tasklist.Add(task1);
            counter++;
            if (tasklist.Count % threadcount == 0)
            {
                tasklist.ForEach(t => t.Wait());
                //counter = 0;
                tasklist = new List<System.Threading.Tasks.Task>();
                threadcomplete = true;
            }
            Thread.Sleep(100);
        }
        tasklist.ForEach(t => t.Wait());
        Thread.Sleep(100);
    } 
```

对于大多数文件，代码按应有的方式运行。但是，例如，我有 155 个项目需要转换。当程序完成并查看结果时，我有 149 个项目而不是 155 个。看起来结果类似于总 = 列表 - 线程数。在这种情况下，它是 7。关于如何纠正这个问题的任何想法？我是否正确地执行线程/任务？

此外，essay.GenerateEssays 代码是将信息从 db 转换为实际 pdf 的实际 itextsharp。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:18:38.867

[使用TPL](http://msdn.microsoft.com/en-us/library/dd537609%28v=vs.100%29.aspx)怎么样。看来你所有的代码都可以用这个替换

```
Parallel.ForEach(essaylist, essay =>
{
    YourAction(essay);
}); 
```

# java - 尝试从 JSP 访问 Action 方法时出现 struts2 NoSuchMethodException

> ID：15773406
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:17.730
> 
> 标签：java, jsp, url, struts2

Struts2新手在这里。我有一个 JSP 文件，它有一个链接到一个名为“authenticate”的动作的锚点。当我点击锚点时，我收到一条错误消息：`java.lang.NoSuchMethodException: mypackage.DisplayStuff.authenticate() java.lang.Class.getMethod(Unknown Source)`

这是我的 struts.xml

```
<package name="default" extends="struts-default" namespace="/">
    <action name="display" method="authenticate"
        class="mypackage.DisplayStuff">
        <result name="error">Boo.jsp</result>
        <result name="success">Yay.jsp</result>

    </action>
</package> 
```

这是我的操作文件：

```
package mypackage;

public class DisplayStuff {           
    public String authenticate() {
        return "success";
    }

} 
```

最后，在我的 JSP 中，我有这个锚点：

```
<a href="<s:url action="display"/>">click here</a> 
```

有趣的部分是，如果我将我的方法重命名为默认的“执行”，我不会收到此错误。我不应该能够在我的`DisplayStuff`操作中调用任何方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:17:37.840

有几种可能性。

错误消息引用了一个不同的包，我的第一个猜测是你没有部署最新版本的代码：`struts.DisplayStuff.authenticate`不是它的配置方式。

第二个猜测是 Struts 2 插件（如“约定”）与您的配置混淆的问题。

但是，如果没有更多细节，很难对此进行更多思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:18:28.850

这应该是

```
<a href="<s:url action="display" method="authenticate"/>">click here</a> 
```

# api - Windows Phone 的 Twitter API 升级

> ID：15773414
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:39.997
> 
> 标签：api, windows-phone-7, twitter

我的应用程序中有推特海报，它使用**oAuth 1.0**，它将很快退休并且将无法使用。我必须将我的 API 升级到**1.1**。Twitter 开发中心表示，如果您的应用程序使用了 oAuth，您只需更新您的**API 端点即可轻松交易到****1.1 。***API端点到底是什么？*

 ***在这里，我很难理解 API 端点。我认为我的异步后调用 URL 必须升级。

**这是我认为可能包含答案的相关代码；**

```
private void btnPostTweet_Click(object sender, RoutedEventArgs e)
    {
        namebocx.Text = userScreenName;
        if (txtBoxNewTweet.Text.Trim().Length == 0) { return; }

        var credentials = new OAuthCredentials
        {
            Type = OAuthType.ProtectedResource,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            Token = this.accessToken,
            TokenSecret = this.accessTokenSecret,
            Version = "1.0"
        };

        var restClient = new RestClient
        {
            Authority = TwitterSettings.StatusUpdateUrl,
            HasElevatedPermissions = true,
            Credentials = credentials,
            Method = WebMethod.Post
        };

        restClient.AddHeader("Content-Type", "application/x-www-form-urlencoded");

        // Create a Rest Request and fire it
        var restRequest = new RestRequest
        {
            Path = "1/statuses/update.xml?status=" + txtBoxNewTweet.Text //Here must be endpoint of Api??
        };

        var ByteData = Encoding.UTF8.GetBytes(txtBoxNewTweet.Text);
        restRequest.AddPostContent(ByteData);
        restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback));
    }
} 
```

**这也是身份验证设置：**

```
public class TwitterSettings
{
    public static string RequestTokenUri = "https://api.twitter.com/oauth/request_token";
    public static string AuthorizeUri = "https://api.twitter.com/oauth/authorize";
    public static string AccessTokenUri = "https://api.twitter.com/oauth/access_token";

    public static string CallbackUri = "http://www.google.com";

    public static string StatusUpdateUrl { get { return "http://api.twitter.com"; } }

    public static string consumerKey = "myconsumerkeyhere";
    public static string consumerKeySecret = "myconsumersecrethere";

    public static string oAuthVersion = "1.0a";
} 
```

这里 twitter 说我用这个代替而不是写在我的代码中； **[https://api.twitter.com/1.1/statuses/update.json](https://api.twitter.com/1.1/statuses/update.json)** 和这里告诉的一些参数 -->> [https://dev.twitter.com/docs/api/1.1/post/statuses/update](https://dev.twitter.com/docs/api/1.1/post/statuses/update)

我应该如何更新我的 API 端点，我需要做什么样的改变？

如果你能帮助我，我真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:48:50.477

你可以改变这个：

```
Path = "1/statuses/update.xml?status=" + txtBoxNewTweet.Text 
//Here must be endpoint of Api?? 
```

对此：

```
Path = "1.1/statuses/update.json?status=" + txtBoxNewTweet.Text 
//Here must be endpoint of Api?? 
```***

# html - Wordpress 自定义文本字段

> ID：15773415
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:46.163
> 
> 标签：html, wordpress

我对wordpress有点陌生。我怎样才能使这三个领域：

![在此处输入图像描述](https://i.stack.imgur.com/uVKJa.png)

使用wordpress可以编辑吗？

我宁愿不通过创建 wordpress 帖子和分配类别来做到这一点，什么是“正确”的做法？

谢谢！

# c# - 自定义 ObservableLinkedList 不会绑定在我的 Windows 商店应用程序中

> ID：15773417
> 
> 赞同：0
> 
> 时间：2013-04-02T20:09:50.670
> 
> 标签：c#, .net, xaml, windows-runtime, windows-store-apps

我有这个自定义的可观察集合

```
 public class ObservableLinkedList<T> : INotifyPropertyChanged, INotifyCollectionChanged, IEnumerable<T>, ICollection<T>, ICollection, IEnumerable
{
    public event NotifyCollectionChangedEventHandler CollectionChanged;
    public event PropertyChangedEventHandler PropertyChanged;
    private LinkedList<T> _list = new LinkedList<T>();

    public ObservableLinkedList()
    {

    }

    public void Clear()
    {
        _list.Clear();
    }

    public void Add(T artist)
    {
        _list.AddLast(artist);
    }

    public Model.Artist Find(string p)
    {
        return null;
    }

    public int Count()
    {
        return _list.Count();
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _list.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return _list.GetEnumerator();
    }

    public bool Contains(T item)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    int ICollection<T>.Count
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsReadOnly
    {
        get { throw new NotImplementedException(); }
    }

    public bool Remove(T item)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(Array array, int index)
    {
        throw new NotImplementedException();
    }

    int ICollection.Count
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsSynchronized
    {
        get { throw new NotImplementedException(); }
    }

    public object SyncRoot
    {
        get { throw new NotImplementedException(); }
    }
} 
```

在某些 XAML 中绑定：

```
 <Page.DataContext>
    <viewModel:SearchViewModel/>
</Page.DataContext> 
```

GridView 是这样的数据绑定

```
<GridView ItemsSource="{Binding Path=Artists}" Grid.Row="1"> 
```

我的 SearchViewModel 在哪里分发我的 ObservableLinkedList，但 UI 永远不会得到更新。可怕的是，如果我用官方的 ObservableCollection 替换我的 ObservableLinkedList，那么它就可以正常工作。

CollectionChanged 和 PropertyChanged 始终为空。我已经在 clear 方法、构造函数和 add 方法中使用断点检查了这一点。

有人可以告诉我如何正确实施吗？一定有什么办法。事实上，您甚至不必告诉我如何实现这一点，您只需向我指出一个方向，有人告诉我如何在头盔下完成绑定。或者如何从 XAML 中获取更多调试信息。

我试图消除每种方法中的所有异常抛出和中断。

谢谢，马丁插槽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:50:19.327

由于您基本上将项目存储在私有链表中，因此您需要自己引发适当的事件。

例如：

```
public void Add(T artist)
{
    _list.AddLast(artist);
     if (CollectionChanged != null) {
         CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, Item));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:34:15.607

我没有时间粘贴我所有的代码。如果我这样做，并且只粘贴相关的点点滴滴，我认为很多人会认为这个问题很长。

我实际上已经解决了这个问题。我已将代码更改为：

```
 public class ObservableLinkedList<T> : Collection<T>, INotifyPropertyChanged, INotifyCollectionChanged
{
    public event NotifyCollectionChangedEventHandler CollectionChanged;
    public event PropertyChangedEventHandler PropertyChanged;
    private LinkedList<T> _list = new LinkedList<T>();

    public ObservableLinkedList()
    {

    }

    public void Clear()
    {
        _list.Clear();
    }

    public int Count()
    {
        return _list.Count();
    }

    public void Add(T artist)
    {
        _list.AddLast(artist);
    }

    public Model.Artist Find(string p)
    {
        return null;
    }
} 
```

在所有方法中放置断点，我可以看到当 UI 已初始化并看到解决绑定时，CollectionChanged 不再为空，表明 UI 知道集合。看起来 GridView 想要一个集合而不是接口。我试图实现 Collection 的所有接口，但没有编译代码的运气（这有点奇怪）。编译器抱怨有两个 Add 方法。我觉得这有点奇怪，但从来没有少过。从 Collection 继承解决了这个问题。现在我只需要实现正确的通知。

# java - 在构造函数上使用带有时间戳的 JPA SELECT NEW 时出错

> ID：15773424
> 
> 赞同：3
> 
> 时间：2013-04-02T20:10:18.720
> 
> 标签：java, hibernate, jpa

我有以下 JPA 查询：

```
SELECT NEW test.vo.HappyVO(o.acid, o.dest, o.dep, o.time) FROM HappyTable1 o 
```

我的 HappyVO 有以下构造函数：

```
public HappyVO(String a, String b, String c, java.sql.Timestamp e) 
```

当我运行此查询时，我收到以下错误：

```
 org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [test.vo.HappyVO] 
```

如果我将构造函数更改为

```
public HappyVO(String a, String b, String c, Object e) 
```

错误不会发生，变量*e*是 java.sql.Timestamp 的一个实例

忘了提我使用的是 MySQL 数据库，该列是时间戳类型，HappyTable1 中声明的时间字段类型是 java.sql.Timestamp

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:54:10.307

它看起来很像这个已知的 Hibernate 错误：[https ://hibernate.atlassian.net/browse/HHH-4179](https://hibernate.atlassian.net/browse/HHH-4179)

建议的解决方法是在 POJO 构造函数中使用 Date 类型。

# matlab - 如何使用 MATLAB 的“等值面”函数创建三角球体

> ID：15773433
> 
> 赞同：4
> 
> 时间：2013-04-02T20:10:47.553
> 
> 标签：matlab, grid, mesh, geometry-surface

如何创建一个三角形的球体，每个三角形的面都具有相同的面积。

我想要这样的东西

[http://imageshack.us/a/img198/5041/71183923.png](http://imageshack.us/a/img198/5041/71183923.png)

我搜索并看到我可以使用`isosurface`MATLAB 的功能，但是三角形的面积和形状不相等，它们本质上是正方形，用正方形对角线一分为二。

这是我的代码：

```
>> [X,Y,Z] = meshgrid(-10:10,-10:10,-10:10);
>> V = sqrt(X.^2+Y.^2+Z.^2);
>> fv = isosurface(X,Y,Z,V)
>> p = patch(fv);
>> set(p,'EdgeColor','g') 
```

结果如下：

[http://imageshack.us/a/img818/7125/72103297.png](http://imageshack.us/a/img818/7125/72103297.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:06:15.630

我不确定`isosurface`，但您可以使用`delaunay`，例如：

```
[x y z]=sphere(40);
tri = delaunay(x(:),y(:),z(:));
h=trisurf(tri,x,y,z); 
axis square
set(h,'FaceColor',[0 0 0], 'EdgeColor',[0.4 0.4 0.4]);
view(15,30); 
```

![在此处输入图像描述](https://i.stack.imgur.com/IEsi1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:14:49.713

从文件交换中使用此功能

```
function [p, t] = TriSphere(N, R)
% TRISPHERE: Returns the triangulated model of a sphere using the
% icosaedron subdivision method.
%
% INPUT:
% N (integer number) indicates the number of subdivisions,
%   it can assumes values between 0-inf. The greater N the better will look
%   the surface but the more time will be spent in surface costruction and
%   more triangles will be put in the output model.
%
% OUTPUT:
% In p (nx3) and t(mx3) we can find points and triangles indexes
% of the model. The sphere is supposed to be of unit radius and centered in
% (0,0,0). To obtain spheres centered in different location, or with
% different radius, is just necessary a traslation and a scaling
% trasformation. These operation are not perfomed by this code beacuse it is
% extrimely convinient, in order of time perfomances, to do this operation
% out of the function avoiding to call the costruction step each time.
%
% NOTE:
% This function is more efficient than the matlab command sphere in
% terms of dimension fo the model/ accuracy of recostruction. This due to
% well traingulated model that requires a minor number of patches for the
% same geometrical recostruction accuracy. Possible improvement are possible
% in time execution and model subdivision flexibilty.
%
% EXAMPLE:
%
%  N=5;
%
%  [p,t] = TriSphere(N);
%
%  figure(1) axis equal hold on trisurf(t,p(:,1),p(:,2),p(:,3)); axis vis3d
%  view(3)

% Author: Giaccari Luigi Created:25/04/2009%
% For info/bugs/questions/suggestions : giaccariluigi@msn.com
% ORIGINAL NAME: BUILDSPHERE
%
% Adjusted by Rody Oldenhuis (speed/readability)

    % error traps
    error(nargchk(1,1,nargin));
    error(nargoutchk(1,2,nargout));
    if ~isscalar(N)
        error('Buildsphere:N_mustbe_scalar',...
            'Input N must be a scalar.');
    end    
    if round(N) ~= N
        error('Buildsphere:N_mustbe_scalar',...
            'Input N must be an integer value.');
    end

    % Coordinates have been taken from Jon Leech' files

    % Twelve vertices of icosahedron on unit sphere
    tau = 0.8506508083520400; % t   = (1+sqrt(5))/2, tau = t/sqrt(1+t^2)
    one = 0.5257311121191336; % one = 1/sqrt(1+t^2)  (unit sphere)    
    p = [
        +tau  +one  +0     % ZA
        -tau  +one  +0     % ZB
        -tau  -one  +0     % ZC
        +tau  -one  +0     % ZD
        +one  +0    +tau   % YA
        +one  +0    -tau   % YB
        -one  +0    -tau   % YC
        -one  +0    +tau   % YD
        +0    +tau  +one   % XA
        +0    -tau  +one   % XB
        +0    -tau  -one   % XC
        +0    +tau  -one]; % XD

    % Structure for unit icosahedron
    t = [  
         5  8  9 
         5 10  8 
         6 12  7 
         6  7 11 
         1  4  5 
         1  6  4 
         3  2  8 
         3  7  2 
         9 12  1 
         9  2 12 
        10  4 11 
        10 11  3 
         9  1  5 
        12  6  1 
         5  4 10 
         6 11  4 
         8  2  9 
         7 12  2 
         8 10  3 
         7  3 11 ];

    % possible quick exit
    if N == 0, return, end

    % load pre-generated trispheres (up to 8 now...)
    if N <= 8
        S = load(['TriSphere', num2str(N), '.mat'],'pts','idx');
        p = S.pts; t = S.idx; 
        if nargin == 2, p = p*R; end
        return
    else
        % if even more is requested (why on Earth would you?!), make sure to START 
        % from the maximum pre-loadable trisphere
        S = load('TriSphere8.mat','pts','idx');
        p = S.pts; t = S.idx; clear S; N0 = 10;
    end

    % how many triangles/vertices do we have? 
    nt = size(t,1); np = size(p,1); totp = np;    
    % calculate the final number of points    
    for ii=N0:N, totp = 4*totp - 6; end    
    % initialize points array
    p = [p; zeros(totp-12, 3)];

    % determine the appropriate class for the triangulation indices
    numbits   = 2^ceil(log(log(totp+1)/log(2))/log(2));
    castToInt = ['uint',num2str(numbits)];

    % issue warning when required
    if numbits > 64
        warning('TriSphere:too_many_notes',...
            ['Given number of iterations would require a %s class to accurately ',...
            'represent the triangulation indices. Using double instead; Expect ',...
            'strange results!']);
        castToInt = @double;
    else
        castToInt = str2func(castToInt);
    end

    % refine icosahedron N times
    for ii = N0:N
        % initialize inner loop
        told  = t;
        t = zeros(nt*4, 3);
        % Use sparse. Yes, its slower in a loop, but for N = 6 the size is
        % already ~10,000x10,000, growing by a factor of 4 with every
        % increasing N; its simply too memory intensive to use zeros().
        peMap = sparse(np,np); 
        ct    = 1;        
        % loop trough all old triangles        
        for j = 1:nt

            % some helper variables
            p1 = told(j,1);
            p2 = told(j,2);
            p3 = told(j,3);
            x1 = p(p1,1); x2 = p(p2,1); x3 = p(p3,1);
            y1 = p(p1,2); y2 = p(p2,2); y3 = p(p3,2);
            z1 = p(p1,3); z2 = p(p2,3); z3 = p(p3,3);

            % first edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p1 < p2, p1m = p1; p2m = p2; else p2m = p1; p1m = p2; end

            % If the point does not exist yet, calculate the new point            
            p4 = peMap(p1m,p2m);
            if p4 == 0
                np = np+1;
                p4 = np;
                peMap(p1m,p2m) = np;%#ok
                p(np,1) = (x1+x2)/2;
                p(np,2) = (y1+y2)/2; 
                p(np,3) = (z1+z2)/2;
            end

            % second edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p2 < p3; p2m = p2; p3m = p3; else p2m = p3; p3m = p2; end

            % If the point does not exist yet, calculate the new point
            p5 = peMap(p2m,p3m);
            if p5 == 0
                np = np+1;
                p5 = np;
                peMap(p2m,p3m) = np;%#ok
                p(np,1) = (x2+x3)/2; 
                p(np,2) = (y2+y3)/2; 
                p(np,3) = (z2+z3)/2;
            end

            % third edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p1 < p3; p1m = p1; p3m = p3; else p3m = p1; p1m = p3; end

            % If the point does not exist yet, calculate the new point            
            p6 = peMap(p1m,p3m);
            if p6 == 0
                np = np+1;
                p6 = np;
                peMap(p1m,p3m) = np;%#ok
                p(np,1) = (x1+x3)/2; 
                p(np,2) = (y1+y3)/2;
                p(np,3) = (z1+z3)/2;                
            end

            % allocate new triangles
            %   refine indexing
            %          p1
            %          /\
            %         /t1\
            %      p6/____\p4
            %       /\    /\
            %      /t4\t2/t3\
            %     /____\/____\
            %    p3    p5     p2            
            t(ct,1) = p1; t(ct,2) = p4; t(ct,3) = p6; ct = ct+1;            
            t(ct,1) = p4; t(ct,2) = p5; t(ct,3) = p6; ct = ct+1;
            t(ct,1) = p4; t(ct,2) = p2; t(ct,3) = p5; ct = ct+1;            
            t(ct,1) = p6; t(ct,2) = p5; t(ct,3) = p3; ct = ct+1;

        end % end subloop
        % update number of triangles
        nt = ct-1;         
    end % end main loop

    % normalize all points to 1 (or R)
    p = bsxfun(@rdivide, p, sqrt(sum(p.^2,2)));
    if (nargin == 2), p = p*R; end
    % convert t to proper integer class
    t = castToInt(t);    

end % funciton TriSphere 
```

# ide - 如何使 PHPStorm 按定义处理函数？

> ID：15773434
> 
> 赞同：3
> 
> 时间：2013-04-02T20:10:52.083
> 
> 标签：ide, phpstorm

double_metaphone() 函数在 PECL 扩展中定义，因此 PHPStorm 无法看到它被定义。我不希望看到任何关于此的警告。我假设我可以让 PHPStorm 将此函数调用视为通过某种注释定义的，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:16:42.757

您需要所谓的“存根文件”：

1.  创建一个`.php`文件并将其放置在您的项目中的**任何位置**（无论是项目本身......还是作为外部库（`Settings | PHP | Include paths`） - 没关系，只要 PhpStorm 可以在这个项目中看到它）。

2.  添加该函数定义，就像在 PHP 本身中所做的那样：描述所有参数、返回类型等，然后将函数体留空。

    文档是可选的：您拥有的文档越多，对 PhpStorm 和您就越有用：IDE 可以警告您有关无效参数类型、不正确的返回类型使用、在为该函数使用代码完成时建议适当类型的变量等等

3.  就是这样

这正是所有已知的 PHP 函数/类/等首先在 PhpStorm 中完成的方式：只需`Ctrl + Click`在任何标准函数/类/常量上，然后自己查看即可。

**一个例子：**标准`bin2hex`函数是如何定义的（早在 2013 年）：

```
<?php
/**
 * (PHP 4, PHP 5)<br/>
 * Convert binary data into hexadecimal representation
 * @link http://php.net/manual/en/function.bin2hex.php
 *
 * @param string $str A character.
 * @return string the hexadecimal representation of the given string.
 */
function bin2hex ($str) {} 
```

您可以在这个官方仓库中查看所有当前的 PhpStorm 存根（以及 IDE 用于完成 PHP 的其他帮助文件）：[https ://github.com/JetBrains/phpstorm-stubs](https://github.com/JetBrains/phpstorm-stubs)

# c# - 设置孩子的 Visible=false 但保留父母的 AutoScrollbars

> ID：15773435
> 
> 赞同：2
> 
> 时间：2013-04-02T20:10:52.887
> 
> 标签：c#, .net, winforms

假设您有一个`Panel1`, 上面有一个`Panel2`, 部分超出了`Panel1`'s bounds 所以滚动条出现在`Panel1`.

如何`Panel2`在保持`Panel1`Scrollbars 原样的同时使其不可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:22:01.297

然后你必须自己做：

```
panel1.AutoScroll = false;
panel1.AutoScrollMinSize = new Size(panel2.Right, panel2.Bottom); 
```

# java - Matcher 在类似于 regexp 模式的文本中找不到任何内容

> ID：15773437
> 
> 赞同：0
> 
> 时间：2013-04-02T20:10:53.700
> 
> 标签：java, regex

每次我需要使用正则表达式时，我都会遇到类似的问题。他们只是不适合我，我不知道我做错了什么。

我有一个文本行：

> 插入基（db）arg（*任何可能的 int*）；

这样的行也可能在末尾包含注释。我需要的是找到这样的行。这是我尝试这样做的方法：

```
@Test
public void test() {
    String UPDATE_REGEXP = "insert into base (db) arg (\\d*+)";
    String sample = "insert into base (db) arg (100);";
    Pattern pattern = Pattern.compile(UPDATE_REGEXP);

    Matcher matcher = pattern.matcher(sample);

    if(matcher.find()) {
        System.out.println(matcher.group());
    } else {
        fail();
    }
} 
```

我还尝试过最简单的正则表达式：

> String UPDATE_REGEXP = "插入基础 (db) arg";

但是这个测试总是失败。我的错在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:12:41.517

您需要转义括号，因为它们是RegEx 中的[特殊字符](http://www.regular-expressions.info/characters.html#special)（例如，它们用于创建[组](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#cg)）。尝试

```
String UPDATE_REGEXP = "insert into base \\(db\\) arg \\(\\d*+\\)"; 
```

# maven - 我如何在 Maven 生成的 jar 中包含 /main/groovy 类

> ID：15773439
> 
> 赞同：1
> 
> 时间：2013-04-02T20:10:55.887
> 
> 标签：maven

我想制作一个我的 maven 项目的 jar，其中还包括 /main/groovy 路径下存在的 groovy 类。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T13:12:12.957

使用 GMavenPlus 的[addSources](http://groovy.github.io/GMavenPlus/addSources-mojo.html)目标、GMaven 的 addsource 目标或[Build Helper Maven Plugin](http://mojo.codehaus.org/build-helper-maven-plugin/)。

# ios - 如何识别显示为空括号的空 NSData 对象？

> ID：15773440
> 
> 赞同：7
> 
> 时间：2013-04-02T20:10:57.990
> 
> 标签：ios, nsdata, gamekit, null, gkturnbasedmatch

我正在处理 Game Kit 的 GKTurnBasedMatch 类（请参阅[此线程](https://stackoverflow.com/questions/15373903/removing-a-gkturnbasedmatch-which-is-in-an-invalid-state/15725033)）中的一个损坏问题，该问题有时会导致无效的游戏状态，并带有损坏的 matchData。

因此，作为一种解决方法，我正在创建一种方法来识别这些无效匹配，以便我可以适当地处理它们。损坏的 matchData 似乎是执行此操作的好方法。但是，到目前为止，我一直无法识别它们。当我这样做时：

```
// "match" is an existing GKTurnBasedMatch object
NSLog(@"match data is: %@",[match matchData]);
NSLog(@"match data is nil? %@",[match matchData] == nil ? @"YES" : @"NO");
NSLog(@"match data equals empty nsdata? %@",[match matchData] == [NSData data] ? @"YES" : @"NO"); 
```

我得到以下信息：

```
match data is: <>
match data is nil? NO
match data equals empty nsdata? NO 
```

所以匹配数据显示为一对空括号“<>”，我希望可以将其标识为**nil**，但显然不是。

顺便说一句，我将此 matchData 存储在核心数据实体中，位于 NSData 属性下。当我保存 NSManagedObjectContext，然后 NSLog NSManagedObject 以查看其中的内容时，有问题的 NSData 属性*仍然*显示为“<>”！

但是，如果我随后创建一个*新*的NSManagedObjectContext，从中检索相同的 NSManagedObject，*然后*NSLog 其值，则 NSData 属性现在显示为**nil**。

因此，在某些时候，核心数据似乎正在将属性“清理”为它的 poper **nil**值。我的问题是，当我将它添加到核心数据存储时，我实际上需要在该点*之前*将该值标识为**nil 。**

 ** * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T20:16:25.243

您正在对最后一个案例中的对象实例进行比较。这两个实例都可能为空，结果将不正确。

试试这个：

```
 NSLog(@"match data equals empty nsdata? %@",[[match matchData] length] == 0 ? @"YES" : @"NO"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:16:05.400

`[NSData data]`返回一个新`NSData`对象，它永远不会 == 现有对象。要检查它是否为空 NSData：

```
[[match matchData] isKindOfClass:[NSData class]] && match.length == 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:32:58.883

CoreData 不会更改您在`NSManagedObject`实例上设置的值。您必须设置一个空`NSData`值。

要检查它是否为空数据，请检查其`length`属性。为空时应为 0。*

# flash - 将 Flash AS2 数组拆分为单个变量

> ID：15773454
> 
> 赞同：1
> 
> 时间：2013-04-02T20:11:30.490
> 
> 标签：flash, variables, split, actionscript-2

我的字符串：s5_1
基本上，我想拆分字符串，使其产生两个变量，一个为“s5”，另一个为“1”。

例如

```
variable1 = "0";
variable2 = "0";
var mystring:String = "s5_1";
//SPLIT CODE HERE
trace(variable1); //this will trace "s5"
trace(variable2); //this will trace "1" 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:26:22.420

的`split`方法`String`将基于分隔符将字符串拆分为字符串数组：

```
variable1 = "0";
variable2 = "0";
var mystring:String = "s5_1";
var parts = mystring.split("_");
variable1 = parts[0];
variable2 = parts[1];
trace(variable1); //this will trace "s5"
trace(variable2); //this will trace "1" 
```

# jquery - 从父 div 获取子 div

> ID：15773455
> 
> 赞同：0
> 
> 时间：2013-04-02T20:11:31.093
> 
> 标签：jquery

我的问题是如何从元素的父 div 中获取子 div？像这样：

```
<div class="parent">
    <div class="child"></div>
    <button class="getchild"></button>
</div> 
```

如何通过点击按钮从 div“父”中获取 div“子”？（或任何其他行动）

obs：通过 $(".child") 获取元素不是一个选项，因为页面中有很多其他具有相同类的类似 div。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:13:15.363

您可以使用`siblings()`. 这将获得与当前元素处于同一级别的元素。[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

这是它的工作原理：http: [//jsfiddle.net/4EayF/](http://jsfiddle.net/4EayF/)。不确定你的交易是什么。

```
$('.getchild').on('click', function(){
   var child = $(this).siblings('.child');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:13:38.327

从按钮的点击处理程序：

```
$(this).parents('.parent').find('.child') 
```

# iphone - Xcode说单元测试过去的通知，但OCMock测试实际上失败了

> ID：15773460
> 
> 赞同：0
> 
> 时间：2013-04-02T20:11:39.960
> 
> 标签：iphone, ios, xcode, unit-testing

我正在运行测试以验证是否在 OCMockObject 上调用了方法。我预计它会失败，并且在问题导航器中它确实显示它失败了，但是通知中心正在弹出（在所有测试完成运行之前）并说测试成功。

我意识到这很可能是一个线程问题，因为我每次运行的一个测试都会从一个巨大的 JSON 文件中读取，解析然后运行测试以确认解析。我打赌这会减慢测试速度，但我认为单元测试运行程序会解释这一点，显然它不是而且可能只认为 OCUnit 测试通过（实际上我使用的是第 3 方流利的断言库不使用 OCUnit 方法）。

实际问题：有没有办法让单元测试运行器等待所有方法完成？我也没有在测试内部或正在测试的代码中进行任何类型的线程化。

# mysql - 按顺序选择

> ID：15773466
> 
> 赞同：0
> 
> 时间：2013-04-02T20:12:14.557
> 
> 标签：mysql

有两个表：图像和汽车。它们通过一对多的单向关系链接。我想做类似画廊的东西：同时只加载一张汽车照片，其他照片可通过链接 [1]、[2]、[3]、...

**问题**：但是我怎样才能按顺序拉照片。这意味着我不知道图像的 ID（它们可能是 10、23、...）和/例如，我不知道应该通过 [3] 链接提取哪个图像。

**附言**。我通过命令拉图像：`SELECT * FROM image WHERE car_id_fk=?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:16:10.293

使用限制 - 将第二个数字保持为 1，并将第一个数字放入选定的链接 - 1

```
select * from image where card_id_fk=? limit 0,1 
```

# svn - SVN重组

> ID：15773473
> 
> 赞同：4
> 
> 时间：2013-04-02T20:12:48.893
> 
> 标签：svn, visualsvn-server, svnadmin

我知道这个问题已被问过几次，我在这里找到了答案并尝试过，但我无法让它工作，所以寻求一些帮助。

在 Windows 上使用 VisualSVN Server 2.5.8。

我最初设置的存储库结构如下：

![svnrepos](https://i.stack.imgur.com/MIZW2.png)
这意味着`D:\SVN Repositories\` 每个存储库都在它自己的文件夹中 ![目录](https://i.stack.imgur.com/H1QRQ.png)

我终于开始意识到这不是很有条理，因为我最多有 34 个存储库/文件夹，我想尝试清理它，如下所示：

![svn3](https://i.stack.imgur.com/yKOku.png)

在这里使用以前的问题，我了解了 SVNADMIN 转储和加载。因此，作为测试，我尝试了以下方法：

```
svnadmin dump "D:\SVN Repositories\AndroidDebtDestroyer" > D:\Dump1.dump 
```

然后我尝试使用以下命令将其加载到新目录中：

```
svnadmin load "D:\SVN Repositories\Android\AndroidDebtDestroyer" < D:\Dump1.dump 
```

这不起作用，给我一个错误：

> svnadmin: E720003: Can't open file 'D:\SVN Repositories\Android\AndroidDebtDestroyer\format': 系统找不到指定的路径。

我也尝试过添加 --parent-dir 命令，但这也没有用。

不幸的是，拖动在 VisualSVN 管理器中不起作用，我不能只是将 repos 拖放到新文件夹中，所以我不知道如何做到这一点？TortoiseSVN 可以做到这一点吗？我不熟悉 svn 的命令行

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T22:36:00.233

在此之前，`svnadmin load`您必须创建存储库。

`svnadmin create "D:\SVN Repositories\Android\AndroidDebtDestroyer"`

我没有使用过视觉 svn 服务器，很抱歉我无法说明它是如何工作的。

虽然我必须说我宁愿在顶层拥有 30 多个存储库而不是嵌套方法。我记得名字，但不记得路径……这些是人们经常输入的东西。

# elasticsearch - elasticsearch客户端线程安全

> ID：15773476
> 
> 赞同：7
> 
> 时间：2013-04-02T20:13:00.460
> 
> 标签：elasticsearch

我正在编写一个查询插件，它将为给定的关键字构建查询并将其传递给弹性搜索客户端进行处理。

我的处理程序类扩展了 BaseRestHandler，并且我在处理程序的构造函数中注入了 Client 对象。

```
@Inject
protected QueryHandler(Settings settings, Client client, RestController controller) {
    super(settings, client);
    controller.registerHandler(GET, "/_query/{queryBuilder}", this);
} 
```

我想知道在 handleRequest() 方法中使用相同的客户端对象是否是线程安全的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T20:15:15.297

看起来客户端的任何实现都是线程安全的。在这里查看@kimchy 的答案：http: [//elasticsearch-users.115913.n3.nabble.com/Is-NodeClient-thread-safe-td2816264.html](http://elasticsearch-users.115913.n3.nabble.com/Is-NodeClient-thread-safe-td2816264.html)

# erlang - 每当我有一个非依赖异步函数时，是否应该在 Erlang 中使用 spawn？

> ID：15773478
> 
> 赞同：2
> 
> 时间：2013-04-02T20:13:03.170
> 
> 标签：erlang

如果我有一个可以在没有任何依赖关系的情况下异步执行的函数并且没有其他函数直接需要它的结果，我应该使用 spawn 吗？在我的场景中，我想继续使用消息队列，因此生成会重新定义我的阻塞循环，但是如果在其他情况下我可以尽可能多地分发函数调用，这会对我的应用程序产生负面影响吗？

总的来说，使用 Spawn 的优缺点是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T23:58:47.790

与操作系统进程或线程不同，Erlang 进程的重量非常轻。启动、停止和调度新进程的开销最小。您应该能够根据需要生成尽可能多的它们（每个 vm 的最大值为数十万）。Erlang 实现的 Actor 模型允许您考虑并行实际发生的事情并编写程序来直接表达。如果可以避免，请避免使用工作队列使您的逻辑复杂化。

只要符合逻辑就生成一个流程，并仅在必要时进行优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:23:17.173

首先想到的是参数的大小。它们将从您当前的流程复制到新流程，如果参数很大，则可能效率低下。

另一个可能出现的问题是，虚拟机的进程数量如此之多，以至于您的系统将变得无响应。您可以通过使用工作进程池或特殊监控进程来解决此问题，这些进程仅允许有限数量的此类进程工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T07:30:57.860

*所以产卵会减轻我的阻塞循环*

如果您处于循环将收到许多需要独立操作的消息的情况，请不要犹豫并为每个消息处理生成新进程，这样您将利用计算机的多核功能（如果有）。正如 kjw0188 所说，Erlang 进程的重量非常轻，如果系统达到并行进程数的限制（假设您正在执行合理的代码），则应用程序更有可能使节点的能力过载。

# windows - 加入命令行语句

> ID：15773484
> 
> 赞同：0
> 
> 时间：2013-04-02T20:13:16.837
> 
> 标签：windows, batch-file, cmd, directory

我基本上需要从 Windows 命令行的目录中获取文件名列表，并获取每个文件名并将其与另一个命令行语句结合起来。

```
D:\Data 
file1.txt
file2.txt 
```

将文件与：

```
copy file1.txt file3.txt
copy file2.txt file4.txt 
```

* * *

我知道以上可能没有意义。我试图从概念上理解如何完成任务。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:55:29.760

这将遍历 d:\data 中的所有文件并为每个`for`文件写出类似的内容。`copy file1.txt targetname.txt`我不知道您想如何形成目标文件的名称，但我认为这至少可以回答您关于如何对文件夹中的每个文件执行某些操作的问题。

```
setlocal enabledelayedexpansion
for /f %%f in ('dir "d:\data" /b /a-d') do (
    set filename=%%f
    echo Do something with !filename!
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:46:52.190

假设您`file1.txt ... file4.txt`在当前目录中，请尝试以下操作：

```
@echo off &setlocal enabledelayedexpansion
for /f "delims=" %%i in ('dir /a-d /b /on file?.txt') do (
    set "file1=!file2!"
    set "file2=!file3!"
    set "file3=%%~i"
    if not "!file1!"=="" echo copy !file1! !file3!
) 
```

输出是：

```
copy file1.txt file3.txt
copy file2.txt file4.txt 
```

# c# - MVC 4.0 控制器找不到种子数据

> ID：15773488
> 
> 赞同：1
> 
> 时间：2013-04-02T20:13:31.280
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我正在尝试使用 SQL Server 4.0 作为数据库引擎为 MVC 4 项目播种数据，并以 Microsoft MVC 音乐商店教程为例。我已经设置了种子和数据库上下文模型，但控制器无法找到数据。我已经验证了数据库文件是在 App_Data 中创建的，并验证了 SetIntitializer 在 Application_Start 中的设置是否正确。这是我的代码：

种子数据：

```
namespace RationalMethodApp.Models
{
    public class StartData : CreateDatabaseIfNotExists<RationalMethodEntities>
    {
        protected override void Seed(RationalMethodEntities context)
        {
            new List<Basin>
            {
                new Basin {
                    basinId = 1,                                    // attempting to force a key value, will remove
                    Name = "Replace me with a real basin",
                    Location = "In a real location",
                    drainageArea = 0.0M
                }
            }.ForEach(b => context.Basins.Add(b)); 
```

控制器：

```
 public ActionResult Index(int? bsnId)
        {
            if (bsnId == null)                    // here to force a key value, will change
                bsnId = 1;

            var basin = rmDb.Basins.Find(bsnId);

            return View(basin);
        } 
```

上下文类是：

```
namespace RationalMethodApp.Models
{
    public class RationalMethodEntities : DbContext
    {
        public DbSet<Basin> Basins { get; set; }
        public DbSet<SubArea> SubAreas { get; set; }
        public DbSet<IdfCurve> IdfCurves { get; set; }
        public DbSet<Analysis> Analyses { get; set; }
        public DbSet<FlowSegment> FlowSegments { get; set; }
        public DbSet<SheetFlowN> SheetFlowNs { get; set; }
        public DbSet<RunoffCoefficient> RunoffCoefficients { get; set; }
        public DbSet<StormFrequency> stormFrequencies { get; set; }
    } 
```

}

调试器告诉我，.Find 之后控制器中的“盆地”对象仍然为空。这一定是我忽略的一个简单、基本的事情，但我可以在网上找到的所有帮助都假设提问者知道他们在做什么——在我的情况下不是这样！我还检查了[实体框架数据库种子没有种子](https://stackoverflow.com/questions/15389839/entity-framework-database-seed-doesnt-seed)的讨论， 但这似乎不是答案。请忍受一个完全的菜鸟问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:25:10.800

您没有显示**种子**的完整代码，所以我不能确定，但​​您可能缺少**Context.Changes()**。

你也写了

```
public class StartData : CreateDatabaseIfNotExists<RationalMethodEntities> 
```

如果您在应用程序启动之前不删除数据库，它不会做任何事情，因为数据库已经存在。

你可以使用：

```
public class StartData : DropCreateDatabaseAlways <RationalMethodEntities> 
```

每次开始或

```
public class StartData : DropCreateDatabaseAlways <DropCreateDatabaseIfModelChanges > 
```

在模型更改时删除 db（这对于开发的开始非常有用）

调试：删除您的数据库，终止您的应用程序服务器（使其返回到应用程序启动），在您的种子中设置断点。启动调试，如果它进入种子，请在 SaveChange() 之后检查数据是否在其中。

# android - 少量数据是否应该存储在 Android 的数据库中？

> ID：15773492
> 
> 赞同：0
> 
> 时间：2013-04-02T20:13:43.007
> 
> 标签：android, database

如果我正在创建一个 Android 应用程序，例如存储闹钟时间和信息，最好将这些信息放入数据库、写入文件或用户首选项。我只会访问该数据以创建警报列表以及在编辑特定警报时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:26:54.093

就个人而言，为此创建数据库的开销太大了。写入文件，好吧，这取决于，但这似乎是一个很好的方法。我假设你不知道会有多少人。如果它是一个固定的小数字，您可以使用首选项。

我倾向于选择不依赖任何其他正常工作的最简单方法:)

# xml - XSLT - 超链接基于其属性的 XML 元素

> ID：15773501
> 
> 赞同：0
> 
> 时间：2013-04-02T20:13:57.523
> 
> 标签：xml, xslt, hyperlink

我有以下存储电影和演员的 XML：

```
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movie movieID="1">
    <cast>
        <actors>
            <actor actorID="1">
                <name>Bob</name>
            </actor>
            <actor actorID="2">
                <name>John</name>
            </actor>
            <actor>
                <name>Mike</name>
            </actor>
        </actors>
    </cast>
</movie>

</movies> 
```

前两个演员有一个具有唯一值的属性“actorID”。第三个演员没有属性。我想将前两个演员的名字显示为超链接，并将第三个演员的名字显示为纯文本。

这是我的 XSLT：

```
<xsl:template match="/">
    <xsl:apply-templates select="movies/movie" />
</xsl:template>

<xsl:template match="movie">    
    <xsl:text>Actors: </xsl:text>
    <xsl:apply-templates select="cast/actors/actor[@actorID]/name"/>
</xsl:template>

<xsl:template match="actor[@actorID]/name">
    <xsl:element name="a">
        <xsl:attribute name="href">www.mywebsite.com</xsl:attribute>
        <xsl:value-of select="." />
    </xsl:element>
    <xsl:element name="br" />
</xsl:template>

<xsl:template match="actor/name">
    <xsl:value-of select="." />
    <xsl:element name="br" />
</xsl:template> 
```

我得到的输出是 Bob 和 John 显示为纯文本，而 Mike 根本没有显示。因此，它的作用与我想要实现的目标完全相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:49:04.400

你的 XPath 在这里：

```
<xsl:apply-templates select="cast/actors/actor[@actorID]/name"/> 
```

导致模板仅应用于具有`actorID`属性的演员。相反，听起来这是您应该使用的：

```
<xsl:apply-templates select="cast/actors/actor/name"/> 
```

然后 XSLT 应该像您期望的那样运行。

**作为旁注**，我建议在 XSLT 中使用文字元素，除非需要使用`xsl:element`：

```
<xsl:template match="actor[@actorID]/name">
    <a href="http://www.mywebsite.com">
        <xsl:value-of select="." />
    </a>
    <br />
</xsl:template>

<xsl:template match="actor/name">
    <xsl:value-of select="." />
    <br />
</xsl:template> 
```

它使 XSLT 更容易阅读恕我直言。如果需要在属性中包含值，可以使用属性值模板：

```
<a href="http://www.mywebsite.com/actors?id={../@actorID}"> 
```

# linux - Bash读取txt文件并存储在数组中

> ID：15773507
> 
> 赞同：4
> 
> 时间：2013-04-02T20:14:29.320
> 
> 标签：linux, bash, loops, if-statement

我正在编写我的第一个 Bash 脚本，我对 C 和 C# 有一定的经验，所以我认为程序的逻辑是正确的，只是语法太复杂了，因为显然有很多不同的方法可以编写相同的东西！

这是脚本，它只是检查参数（字符串）是否包含在某个文件中。如果是这样，它将文件的每一行存储在一个数组中，并将该数组的一项写入文件中。我确信必须有更简单的方法来实现这一点，但我想用 bash 循环做一些练习

```
#!/bin/bash

NOME=$1
c=0

#IF NAME IS FOUND IN THE PHONEBOOK THEN STORE EACH LINE OF THE FILE INTO ARRAY
#ONCE THE ARRAY IS DONE GET THE INDEX OF MATCHING NAME AND RETURN ARRAY[INDEX+1]

if grep "$NOME" /root/phonebook.txt ; then
        echo "CREATING ARRAY"
        while read line
        do
                myArray[$c]=$line # store line
                c=$(expr $c + 1) # increase counter by 1
        done < /root/phonebook.txt

else
        echo "Name not found"
fi

c=0
for i in myArray;
        do
              if   myArray[$i]="$NOME" ;  then
                 echo ${myArray[i+1]} >> /root/numbertocall.txt
              fi

done 
```

此代码仅返回`myArray`( `myArray[2]`) 的第二项或文件的第二行，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:22:18.193

第一部分（构建数组的地方）看起来不错，但第二部分有几个严重的错误：

*   `for i in myArray;`-- 这将执行一次循环，将 $i 设置为“myArray”。在这种情况下，您希望 $i 遍历 myArray 的索引，因此您需要使用

    ```
    for i in "${!myArray[@]}" 
    ```

    或者

    ```
    for ((i=0; i<${#a[@]}; i++)) 
    ```

    （虽然我通常更喜欢第一个，因为它适用于非连续和关联数组）。

    此外，您不需要`;`除非`do`在同一行上（在 shell 中，`;`它主要等同于换行符，因此在行尾使用分号是多余的）。

*   `if myArray[$i]="$NOME" ; then`-- 该`if`语句接受一个命令，因此将被`myArray[$i]="$NOME"`视为一个赋值命令，这根本不是你想要的。为了比较字符串，您可以使用`test`命令或其同义词`[`

    ```
    if [ "${myArray[i]}" = "$NOME" ]; then 
    ```

    或 bash 条件表达式

    ```
    if [[ "${myArray[i]}" = "$NOME" ]]; then 
    ```

    两者非常相似，但条件表达式的语法更简洁（例如，在测试命令中，`>`重定向输出，while`\>`是字符串比较；在`[[ ]]`plain`>`中是比较）。

    在任何一种情况下，您都需要为 myArray 使用适当的`$`表达式，否则它将被解释为文字。另一方面，在 "${myArray[i]}"之前*不需要*a ，因为它位于数字表达式上下文中，因此会自动扩展。`$``i`

    最后，请注意元素之间的空格是绝对需要的——在 shell 中，空格是非常重要的分隔符，而不仅仅是为了便于阅读，就像它们通常在 c 中那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T02:51:44.803

1.-这是你写的小调整

```
#!/bin/bash

NOME=$1

#IF NAME IS FOUND IN THE PHONE-BOOK **THEN** READ THE PHONE BOOK LINES INTO AN ARRAY VARIABLE
#ONCE THE ARRAY IS COMPLETED, GET THE INDEX OF MATCHING LINE AND RETURN ARRAY[INDEX+1]

c=0
if grep "$NOME" /root/phonebook.txt ; then

       echo "CREATING ARRAY...."
       IFS= while read -r line    #IFS= in case you want to preserve leading and trailing spaces
       do
             myArray[c]=$line     # put line in the array
             c=$((c+1))           # increase counter by 1
       done < /root/phonebook.txt

       for i in ${!myArray[@]}; do
             if  myArray[i]="$NOME" ;  then
                 echo ${myArray[i+1]} >> /root/numbertocall.txt
             fi
       done

else
       echo "Name not found"
fi 
```

2.-但您也可以像这样读取数组并停止循环：

```
#!/bin/bash

NOME=$1

c=0
if grep "$NOME" /root/phonebook.txt ; then

       echo "CREATING ARRAY...."
       readarray myArray < /root/phonebook.txt

       for i in ${!myArray[@]}; do
             if  myArray[i]="$NOME" ;  then
                 echo ${myArray[i+1]} >> /root/numbertocall.txt
                 break            # stop looping
             fi
       done

else
       echo "Name not found"
fi
exit 0 
```

3.-以下改进了事情。假设 a)$NAME 与包含它的整行匹配，并且 b) 在找到 $NOME 之后总是有一行，这将起作用；如果不是（如果 $NOME 可以是电话簿中的最后一行），那么你需要做一些小的调整。

```
!/bin/bash
PHONEBOOK="/root/phonebook.txt"
NUMBERTOCALL="/root/numbertocall.txt"
NOME="$1"
myline=""

myline=$(grep -A1 "$NOME" "$PHONEBOOK" | sed '1d')

if [ -z "$myline" ]; then 
      echo "Name not found :-("

else
      echo -n "$NOME FOUND.... "
      echo "$myline" >> "$NUMBERTOCALL"
      echo  " .... AND SAVED! :-)"

fi
exit 0 
```

# xpages - Domino 9 / Dojo 1.8 - 没有默认值的日期时间选择器

> ID：15773508
> 
> 赞同：2
> 
> 时间：2013-04-02T20:14:31.680
> 
> 标签：xpages

我想要一个没有默认值的日期时间选择器控件。似乎不可能了:-(

要重现，请创建一个空白 XPage 并放置一个 Date Time Picker 控件。在浏览器中打开 XPage，您将看到它默认为今天。

我没有找到任何方法将默认值设置为空值。我尝试将所有属性/数据/默认设置为 0、null、空字符串等 - 不走运。

我尝试了带有 value:'' 的 data-dojo-probs 属性，这将默认设置为 1970-1-1，但不是空白。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:56:52.230

这是 ND9 中的一个已知问题，报告为 SPR DEGN966F5V。

该问题的解决方法（来自 SPR）是在 postCreate 函数中修改小部件原型，以防止值被重置。

```
require([ 
        "dojo/_base/lang", 
        "ibm/xsp/widget/layout/DateTextBox", 
        "ibm/xsp/widget/layout/TimeTextBox", 
        "ibm/xsp/widget/layout/DateTimeTextBox" 
], function(lang, DateTextBox, TimeTextBox, DateTimeTextBox){ 
        var a = {}; 
        lang.mixin(a, { 
                postCreate: function(){ 
                        this.inherited(arguments); 
                } 
        }); 
        DateTextBox.extend(a); 
        TimeTextBox.extend(a); 
        DateTimeTextBox.extend(a); 
}); 
```

这是它工作的一个例子。

```
<?xml version="1.0" encoding="UTF-8"?> 
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"> 
        <xp:this.resources> 
                <xp:script clientSide="true"> 
                        <xp:this.contents><![CDATA[ 
require([ 
        "dojo/_base/lang", 
        "ibm/xsp/widget/layout/DateTextBox" 
], function(lang, DateTextBox){ 
        var a = {}; 
        lang.mixin(a, { 
                startup: function(){ 
                        this.inherited(arguments); 
                        this.set("value", null); 
                } 
        }); 
        DateTextBox.extend(a); 
}); 
]]></xp:this.contents> 
                </xp:script> 
        </xp:this.resources> 

        <xp:inputText id="inputText1" value="#{sessionScope.inputText1}"> 
                <xp:this.converter> 
                        <xp:convertDateTime type="date" /> 
                </xp:this.converter> 
                <xp:dateTimeHelper /> 
        </xp:inputText> 
</xp:view> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:38:06.087

我不知道它在注释 9 中是如何工作的，但您可以使用 CSJS 将其删除，例如：

```
var field= dojo.byId('#{id:field}')
field.value =""; 
```

希望能帮助到你..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T15:33:25.873

在应用程序中，我之前使用以下代码在 dateTimeHelper 上应用了 dojoType：

```
<xp:dateTimeHelper id="dateTimeHelper1" dojoType="dijit.form.DateTextBox">
</xp:dateTimeHelper> 
```

这是为了解决以前 Domino 版本中的一个问题，即在某些风格的 IE 中选择选择器后页面会立即刷新。

此代码似乎在 R9 上运行良好，无需变通方法。

# parsing - 将 url_encoded_fmt_stream_map 解码为有效的 Url

> ID：15773511
> 
> 赞同：4
> 
> 时间：2013-04-02T20:14:39.103
> 
> 标签：parsing, url, youtube, uri

我使用 url_encoded_fmt_stream_map 来获取 Youtube VideoStream“url”列表。我想使用这些 url 在我的 VideoView 中显示 Youtube 视频。

我的方法几乎返回一个包含字符串的字符串数组，如下所示：

> sig=3E0D90E459ADEF9F88553D716B9275930A8AA418.AD0319F9287244E34CCA97F7DE245C0606DD46C5&itag=45&fallback_host=tc.v22.cache5.c.youtube.com&url=http%3A%2F%2Fr4---sn-uigxx50n-8pxl.c.youtube.com%2Fvideoplayback%3Fsparams%3Dcp%252Cid% 252Cip%252Cipbits%252Citag%252Cratebypass%252Csource%252Cupn%252Cexpire%26id%3D4e6580527662c67d%26cp%3DU0hVSVlQV19FUENONV9RSkFIOnZ3SkZXb3hfdUdp%26source%3Dyoutube%26fexp%3D919110%252C913564%252C916624%252C932000%252C906383%252C902000%252C919512%252C929903%252C931202%252C900821%252C900823% 252C931203%252C931401%252C909419%252C913566%252C908529%252C930807%252C919373%252C930803%252C906836%252C920201%252C929602%252C930101%252C930603%252C900824%252C910223%26ms%3Dau%26mv%3Dm%26mt%3D1364933359%26sver%3D3%26itag%3D45% 26key%3Dyt1%26ip%3D178.115.248。80%26newshard%3Dyes%26upn%3DNLMBgU-0oUc%26expire%3D1364959706%26ipbits%3D8%26ratebypass%3Dyes&quality=hd720&type=video%2Fwebm%3B+codecs%3D%22vp8.0%2C+vorbis%22

如果你仔细看，你会发现这个字符串实际上包含了有效的信息。不幸的是，我不知道如何从中提取有效的网址。

我该怎么做？

如果我使用上面的字符串创建一个 URI 并将其添加到我的 VideoView，则会出现一条消息“无法播放此视频”。弹出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T01:46:38.890

您可能知道，youtube 链接如下所示：

```
http://r6---sn-nhpax-ua8l.c.youtube.com/videoplayback?algorithm=throttle-factor&burst=40&cp=U0hVTFlTUV9HUUNONV9RTVVCOkk4ams1XzRlZUpq&cpn=qAthIxAZB16Q6_qB&expire=1367983127&factor=1.25&fexp=927900%2C919357%2C921716%2C916623%2C922911%2C931009%2C932000%2C932004%2C906383%2C904479%2C901208%2C925714%2C929119%2C931202%2C900821%2C900823%2C912518%2C911416%2C930807%2C919373%2C906836%2C926403%2C900824%2C912711%2C929606%2C910075&id=932a6c200e40b791&ip=84.228.249.95&ipbits=8&itag=34&key=yt1&ms=au&mt=1367957244&mv=m&newshard=yes&ratebypass=yes&signature=7E86D1813AE13CEB544CFF3749FBD042FF50EE91.AF7D6D9DCF286D291825630E733B3407683C46C9&source=youtube&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire&sver=3&upn=t0jDC5Yk7Go 
```

正如您所说，我们需要的所有参数都显示在您的字符串中。

我们需要从您的字符串中提取 2 个重要参数：url 和签名。

链接最终应如下所示：url + "&signature=" + sig。

您可以查看我的代码，其中我从 youtube 链接中提取了所有可用的链接。它是用 java 编写的，适用于 android 应用程序：[link](https://stackoverflow.com/questions/13537202/play-high-quality-youtube-videos-using-videoview#comment19679509_13537202)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-09-03T16:34:50.547

感谢你的付出。

我通过**坚持官方 YouTube API**解决了这个问题。另请参阅此问题：

**[获取包含参数的 YouTube 视频 ID](https://stackoverflow.com/questions/15741234/getting-youtube-video-id-including-parameters)**

# ember.js - 您如何使用新的 EmberJS 路由器指定视图？

> ID：15773512
> 
> 赞同：0
> 
> 时间：2013-04-02T20:14:47.203
> 
> 标签：ember.js, ember-router

试图转移到 Ember 1.0.0-rc2，这个我还没有解决（下面的语法是 CoffeeScript）：

```
App.Router.map(() ->
  @route('EditPrices', path: '/redigera')
) 
```

我将如何指定此路由应使用 App.Views.EditPrices.EditPricesView，而不仅仅是 App.EditPricesView？我尝试将“Views.EditPrices.EditPrices”指定为 this.route() 方法的第一个参数，但这绝对没有给我任何信息 - 没有错误消息，没有警告，但它不会呈现任何内容......

我想出的一个非常丑陋的解决方法是：

```
App.EditPricesView = App.Views.EditPrices.EditPricesView 
```

...但显然，必须有更好的方法？并且请不要告诉我将所有视图都放在根（App）对象中；这根本不是一个选择......

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:07:53.490

是的，Ember 希望将视图放置在 App 根目录中。你的解决方法是最好的，我能想到的。唯一的其他选择是在路由的 renderTemplate 挂钩中使用[渲染](http://emberjs.com/api/classes/Ember.Route.html#method_render)，但这需要更多代码：

```
App.PostRoute = App.Route.extend({
  renderTemplate: function() {
    this.render('myPost', {   // the view to render
      into: 'index',          // the template to render into
      outlet: 'detail',       // the name of the outlet in that template
      controller: 'blogPost'  // the controller to use for the template
    });
  }
}); 
```

# jquery - 这是我应该如何在 JavaScript 中解码来自服务器的字符串吗？

> ID：15773515
> 
> 赞同：1
> 
> 时间：2013-04-02T20:14:54.847
> 
> 标签：jquery, html, json, encoding, antixsslibrary

我从 ASP.NET Web 服务接收 JSON 数据，该服务已使用 Microsoft 的 AntiXSS 库 ( `Encoder.HtmlEncode()`) 进行了 HtmlEncoded，然后通过 jQuery Ajax 调用以 JSON 形式返回。

我正在使用这些数据填充编辑表单输入，如下所示：`$('descriptionTextBox').val(object.Description);`

其他时候，我可能只是将它作为 Html 附加到按预期显示数据的页面：`$('descriptionSpan').html(object.Description);`

显然，如果字符串最初包含 Html 或编码的字符，这会导致表单输入显示编码数据。要解码数据以在输入中显示，我使用以下内容：

```
function decodeHtml(encodedStr) {
    return $("<div/>").html(encodedStr).text();
} 
```

像这样`$('descriptionTextBox').val(decodeHtml(object.Description));`

这是应该使用 JavaScript 在表单/输入上设置编码数据的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:19:42.203

是的，我认为这很好。有关解码包含 html 实体的字符串的另一种方法，请查看以下答案：[https](https://stackoverflow.com/a/9609450/240324) ://stackoverflow.com/a/9609450/240324 。

我个人更喜欢这种方法，因为它不会创建一个 html 元素来解码字符串，但是你的方法没有问题。

# jquery - 动画容器时jQuery可拖动没有突出显示

> ID：15773520
> 
> 赞同：1
> 
> 时间：2013-04-02T20:15:14.293
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

所以我有两列，可拖动的，另一列带有可放置的。我让它按照我想要的方式工作，即当可拖动开始时，将容器滑到左边，显示可放置的列。

然而，当 droppable 列滑过时……除非你用力摇动可拖动的 droppables，否则 droppables 不会突出显示。

[这是一个 jsFiddle 来说明这个问题。](http://jsfiddle.net/R2hMC/)

javascript

```
$('#first_list > ul > li').draggable({
    revert:true,
    helper:  function () {
        var helper = $('<div class="helper">' + $(this).clone().html() + '</div>');
        return helper.appendTo('body').css({'zIndex':5});
    },
    start:function(event,ui) {
        $('#inner-container').animate({left:'-200px'},'fast');
    },
    stop:function(event,ui) {
        $('#inner-container').animate({left:'0'},'fast');
    }
});

$('#second_list li').droppable({
    hoverClass:'active_drop',
    drop:function(event,ui) {
        $('#result_list').append('<li>' + ui.helper.text() + ' on ' + $(this).text() + '</li>');
    }
    });
}); 
```

html

```
<div id="container">
<div id="inner-container">
    <div class="column" id="first_list">
        <ul>
            <li><span></span> First</li>
            <li><span></span> Second</li>
            <li><span></span> Third</li>
            <li><span></span> Fourth</li>
        </ul>
    </div>
    <div class="column" id="second_list">
        <ul>
            <li><span></span> First</li>
            <li><span></span> Second</li>
            <li><span></span> Third</li>
            <li><span></span> Fourth</li>
            </ul>
        </div>
    </div>
</div>
<ul id="result_list"></ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T14:47:34.897

这个问题有点老了，但由于它没有一个公认的答案，这里是：`refreshPositions`在可拖动对象中设置选项来`true`解决问题。

根据 API（[http://api.jqueryui.com/draggable/#option-refreshPositions](http://api.jqueryui.com/draggable/#option-refreshPositions)）：

> 如果设置为`true`，则在每次鼠标移动时计算所有可放置位置。*警告：这解决了高度动态页面上的问题，但会显着降低性能。*

这是带有选项集的更新 JSFiddle：http: [//jsfiddle.net/R2hMC/1/](http://jsfiddle.net/R2hMC/1/)

# sql - 启用自动提交时，显式提交可以吗？

> ID：15773526
> 
> 赞同：1
> 
> 时间：2013-04-02T20:15:28.230
> 
> 标签：sql, oracle

我已经搜索了一段时间，找不到这个。我正在使用 Oracle 并且有一个类似于以下的 For 循环：

```
BEGIN
  FOR YEARIDs IN (SELECT DISTINCT YEARID From MyTable)
  LOOP
    UPDATE (
              SELECT    ......
            )
    SET     MyFlag = 1;
    COMMIT;  -- Added
  END LOOP;
END; 
```

AutoCommit 已打开，但在整个 FOR 循环完成之前似乎不会发生提交。因此，我在上面的代码中添加了 Commit 语句。这会导致任何意外结果，还是违反任何最佳实践？（即，当 AutoCommit 打开时，我不应该明确调用提交吗？）

谢谢，斯科特

编辑：哎呀...我使用 Oracle 11g 和 Oracle SQL Developer 作为客户端。

编辑：谢谢你的回复，到目前为止。在查询运行的时间点，正在生成和调整数据。不应有其他连接尝试访问数据。至于为什么我如此频繁地提交，在开发过程中，我对数据的子集运行查询并且查询运行得很好。该表包含大约 1400 万条记录，我正在测试大约 100k 条记录。该查询相当复杂，针对该子集运行大约 5 分钟。当我开始对整个表运行它时，查询运行了 14 多个小时并且无法更新任何记录。我的理论是持有这么多撤消信息可能会消耗开发服务器上的所有可用资源。如果我经常提交，那么撤消信息可以被释放和重用。是的，它很慢。但是如果查询真的会完成，即使需要一整夜，也可以将其移至测试服务器。（并且性能调整可以在以后进行。）这个截止日期早就过去了。（在错过最后期限后，我被请来帮忙。我的专业领域不是甲骨文。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:30:16.183

在循环内提​​交通常是一个坏主意（允许任何工具自动提交也是如此）。

在循环内提​​交会使编写可重新启动的代码变得更加困难。如果在 3 次迭代后遇到错误会发生什么？您现在已经成功提交了 2 个`UPDATE`语句的结果。据推测，您需要找出更新了哪些行并编写代码来反转更新，或者您必须添加代码以避免尝试更新这两个成功`yearid`值的数据。这当然是可能的。但这涉及编写一堆代码来跟踪您的进度，并且通常会使您的代码更加复杂。

在循环内提​​交会使您的代码慢得多。提交通常是一项相当昂贵的操作。因此，循环执行它通常是一个坏主意。如果您只有几十个循环迭代，那么问题就不大了。但是，如果您有数百或数千次迭代，您很容易最终将大部分时间都花在提交上。

在循环内提​​交会大大增加导致 ORA-01555 错误的风险。您的查询`MyTable`需要读取一致的数据视图。但是，如果您在循环内提​​交，您就是在告诉 Oracle 您的会话不再需要旧`UNDO`数据。如果 Oracle 碰巧清除`UNDO`了循环后续迭代所需的数据，则会出现错误。然后你又要处理不可重新启动的代码，你已经成功地经历了 N 次迭代，但你不知道哪些年份已经被处理或哪些需要被处理。

在循环内提​​交会产生数据一致性问题。例如，如果某个其他会话正在运行报告，这些报告很容易看到部分更新的数据，这通常意味着数据将不一致。如果 3 年的数据发生了变化，而其他年份没有发生变化，则很难理解报告，并且人员（或流程）很容易做出错误的决定。

在循环内提​​交也会降低代码的可重用性。如果您的代码包含提交（或回滚，而不是您在块内建立的保存点），则它不能被任何其他不希望其事务提交的代码调用。这导致人们试图在没有事务控制的情况下重新实现您的逻辑，或者错误地违反事务完整性，这不可避免地导致他们构建引入数据一致性问题的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T22:37:28.333

DBMS_PARALLEL_EXECUTE 是奇妙的功能之一，我们一直在使用具有 mn 行且没有任何中断的大型表。

这确保了高可用性、可重新启动性并利用了并行处理。

看到这个 [https://oracle-base.com/articles/11g/dbms_parallel_execute_11gR2](https://oracle-base.com/articles/11g/dbms_parallel_execute_11gR2)

我认为在定期间隔（比如 1000 - 10000 行，取决于行大小）之后提交数据没有任何问题。事实上，对于大数据迁移/回扫，建议分块并提交以避免'ORA-01555 Snapshot Too Old'。

这也可以防止在基表上锁定更长的时间。

正如其他人所评论的那样，这里不需要“自动提交”......

# c++ - C++ 表单应用程序不更新文本框

> ID：15773528
> 
> 赞同：0
> 
> 时间：2013-04-02T20:15:30.237
> 
> 标签：c++, forms, textbox, updating

我有一个简单的 Windows 窗体应用程序，我正在查询在另一台计算机上运行的服务器应用程序。查询工作正常，但我无法将结果显示到文本框。我在 for 循环中测试它，它只将最后一个结果写入文本框，即使我在查询之间使用 Thread::Sleep 5 秒。我如何让它每次都将结果写入文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:21:35.147

每次更新后在表单上调用 refresh() 方法，它将显示出来。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)

# java - JSON 解析返回 org.json.JSONException：icon_url 没有值

> ID：15773531
> 
> 赞同：1
> 
> 时间：2013-04-02T20:15:40.160
> 
> 标签：java, android, json

这就是我正在做的事情。

我的 Android 应用程序中有一个 GetWeather 类，其中有一个构造函数，当我实例化如下对象时，我将当前城市和州传递给该构造函数。

```
GetWeather weather = new GetWeather(city_send,state_code); 
```

然后，构造函数使用所需的城市、州和 API 凭据 ping API URL，以接收天气数据 json 作为响应。我正在尝试从 json 中读取特定值，即 icon_url 从 url 获取内容并显示它。正如现在的代码所示，我收到了很好的响应，但是当我尝试从 json 中提取 icon_url 的特定数据时，我收到了一个 logcat 警告 -`org.json.JSONException: No value for icon_url`

这是我班级的代码 -

```
package com.mypackage.android;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.UnsupportedEncodingException;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;

public class GetWeather {

    private static String WEATHER_URL = "http://api.wunderground.com/api/my_api_key/conditions/q/";
    public String weather;
    public String temperature_string;
    public Bitmap weather_icon;

    public GetWeather(String city, String state){

        city = city.replaceAll(" ", "_");
        //construct post URL
        final String GET_WEATHER_URL = WEATHER_URL + state + "/" + city + ".json";  
        new Thread(new Runnable()
        {
            public void run()
            {
                String request = GET_WEATHER_URL;
                HttpResponse rp = null;
                JSONObject jObject = null;
                try {
                    rp = (new DefaultHttpClient()).execute(new HttpPost(request));
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                if (rp != null && rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
                    Log.i("Get Weather", "Success");
                    HttpEntity entity = rp.getEntity();
                    InputStream is = null;
                    try {
                        is = entity.getContent();
                    } catch (IllegalStateException e2) {
                        e2.printStackTrace();
                    } catch (IOException e2) {
                        e2.printStackTrace();
                    } catch (NullPointerException n1){
                        n1.printStackTrace();
                    }
                    final char[] buffer = new char[0x10000];
                    StringBuilder out = new StringBuilder();
                    Reader in = null;
                    String json_string_response = null;
                    try {
                        in = new InputStreamReader(is, "UTF-8");
                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    } catch (NullPointerException n1){
                        n1.printStackTrace();
                    }
                    int read = 0;
                    do {
                        try {
                            read = in.read(buffer, 0, buffer.length);
                        } catch (IOException e) {
                            e.printStackTrace();
                        } catch (NullPointerException n1){
                            n1.printStackTrace();
                        }
                        if (read>0) {
                            out.append(buffer, 0, read);
                        }
                    } while (read>=0);

                    try {
                        is.close();
                        json_string_response = out.toString();
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }
                    try {
                        jObject = new JSONObject(json_string_response);
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                    try {
            /*Here is where I try to get the data from the json for specific keys but it says no value found*/          
                        weather = jObject.getString("weather");
                        temperature_string = jObject.getString("temperature_string");
                        String icon_url = jObject.getString("icon_url");        
                        weather_icon = get_weather_icon(icon_url);
                    } catch (JSONException e4) {
                        // TODO Auto-generated catch block
                        e4.printStackTrace();
                    }
                }else{
                        String response = rp.toString().toString();
                        Log.e("Get Weather", response);
                }

            }
        }).start();     
    }

    public static Bitmap get_weather_icon(String url){
        Bitmap bitmap = null;
        InputStream in = null;
        BufferedOutputStream out = null;

        try {

            bitmap = BitmapFactory.decodeStream((InputStream)new URL(url).getContent());

        } catch (MalformedURLException e) {
              e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }

        return bitmap;

    }

} 
```

我从 API 调用中提取并按照上面的代码处理的 jObject 的值如下 - （这是纽约的天气数据）

```
{"response":{"features":{"conditions":1},"termsofService":"http:\/\/www.wunderground.com\/weather\/api\/d\/terms.html","version":"0.1"},"current_observation":{"precip_1hr_metric":" 0","wind_gust_mph":0,"precip_today_metric":"0","pressure_trend":"-","forecast_url":"http:\/\/www.wunderground.com\/US\/NY\/New_York.html","history_url":"http:\/\/www.wunderground.com\/weatherstation\/WXDailyHistory.asp?ID=KNYNEWYO64","estimated":{},"windchill_string":"42 F (6 C)","weather":"Scattered Clouds","station_id":"KNYNEWYO64","UV":"5","wind_gust_kph":0,"observation_epoch":"1364930056","precip_1hr_in":"-999.00","feelslike_string":"42 F (6 C)","observation_time":"Last Updated on April 2, 3:14 PM EDT","temp_f":46.2,"local_tz_long":"America\/New_York","relative_humidity":"29%","temp_c":7.9,"image":{"title":"Weather Underground","url":"http:\/\/icons-ak.wxug.com\/graphics\/wu2\/logo_130x80.png","link":"http:\/\/www.wunderground.com"},"solarradiation":"","visibility_mi":"10.0","observation_location":{"full":"Hells Kitchen, 48th St, NYC, New York, New York","elevation":"66 ft","state":"New York","longitude":"-73.989212","latitude":"40.762157","country_iso3166":"US","country":"US","city":"Hells Kitchen, 48th St, NYC, New York"},"heat_index_c":"NA","wind_mph":7.8,"precip_today_string":"0.00 in (0 mm)","feelslike_f":"42","observation_time_rfc822":"Tue, 02 Apr 2013 15:14:16 -0400","feelslike_c":"6","heat_index_f":"NA","heat_index_string":"NA","ob_url":"http:\/\/www.wunderground.com\/cgi-bin\/findweather\/getForecast?query=40.762157,-73.989212","dewpoint_string":"16 F (-9 C)","local_tz_offset":"-0400","wind_kph":12.6,"windchill_f":"42","windchill_c":"6","pressure_in":"29.96","wind_degrees":202,"dewpoint_c":-9,"pressure_mb":"1015","icon":"partlycloudy","local_time_rfc822":"Tue, 02 Apr 2013 15:24:21 -0400","precip_1hr_string":"-999.00 in ( 0 mm)","icon_url":"http:\/\/icons-ak.wxug.com\/i\/c\/k\/partlycloudy.gif","wind_dir":"SSW","dewpoint_f":16,"display_location":{"zip":"10001","full":"New York, NY","elevation":"17.00000000","state":"NY","longitude":"-73.99700928","latitude":"40.75013351","state_name":"New York","country_iso3166":"US","country":"US","city":"New York"},"visibility_km":"16.1","temperature_string":"46.2 F (7.9 C)","local_tz_short":"EDT","local_epoch":"1364930661","wind_string":"From the SSW at 7.8 MPH","precip_today_in":"0.00"}} 
```

您可能会看到我正在寻找的值在解析的响应中，为什么我无法得到它或者为什么我得到警告没有找到值？我做错了什么或者我可以从json中提取以下值吗？

```
"weather":"Scattered Clouds"
"temperature_string":"46.2 F (7.9 C)"
"icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif" 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:22:34.560

试试这个

```
JSONObject obj= new JSONObject(json_string_response);
JSONArray array=obj.getJSONArray("response")
 jObject = array.getJSONObject("current_observation");

    weather = jObject.getString("weather");
    temperature_string = jObject.getString("temperature_string");
   String icon_url = jObject.getString("icon_url"); 
```

# php - Codeigniting 不会获取我的数据？

> ID：15773533
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:15:42.257
> 
> 标签：php, codeigniter

我是全新的，并且已经阅读了关于 codeigniter 的教程。

我的问题是我不断得到这个：

```
 A PHP Error was encountered

 Severity: Notice

 Message: Undefined variable: data

 Filename: views/welcome_message.php

 Line Number: 70 
```

我的控制器“welcome.php”：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

   class Welcome extends CI_Controller {

public function index()
{
    $data = array();
    $data['title'] = "Hello world";
    $this->load->view('welcome_message', $data);
}

 } 
```

我的看法是

我在视图加载中使用“$data”，但我不断收到此消息，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:18:35.337

您放入`$data`控制器内部的键将成为视图中的变量（带有[`extract()`](http://www.php.net/manual/en/function.extract.php)）。因此，在您的示例中，：

```
// controller
$data['title'] = 'hello world'; 
```

在您的视图中将显示为：

```
// view
<?php print $title ?> 
```

您不需要`$data`在视图中为所有内容添加前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:18:41.370

`$data`只是“高速公路”——数据到达视图的路线。从技术上讲，它只是一个用于将变量集传输到视图的数组。

一旦数据在视图中，您可以通过`$data`'s 键引用它。因此，在您的情况下，在视图中，您会将标题引用为`$title`.

这个数组可以任意命名，但约定是使用`data`.

所以，在我的控制器中，我可以这样做：

```
$stuff['title'] = "This is my title";
$this->load->view('my_view', $stuff); 
```

在视图中：

```
echo $title;//echo's out "This is my title" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:19:38.240

您的视图可能正在尝试使用 $data... 未定义，因为它在发送到视图的数组中不作为 $data['data'] 存在。

# facebook - Facebook Like Button 贴在墙上覆盖文章

> ID：15773538
> 
> 赞同：0
> 
> 时间：2013-04-02T20:16:00.390
> 
> 标签：facebook, facebook-like, facebook-likebox

我这里有点问题。

我的网页上的 Facebook 点赞按钮，当他们点击点赞按钮时，他们将有一个覆盖弹出窗口，说要将其发布在他们的墙上，正常的应该是这样的

![在此处输入图像描述](https://i.stack.imgur.com/xUqgH.png)

但是当我点击它之后，我的它就消失了，我什至不能点击它或在它上面做任何事情。

![在此处输入图像描述](https://i.stack.imgur.com/0u5hq.png)

我不知道如何解决这个问题，因为我不确定这是代码问题还是页面布局问题。

```
 <li><div class="fb-like" data-href="<?php the_permalink(); ?>" data-send="false" data-layout="box_count" data-width="55" data-show-faces="false"></div></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:38:49.533

使用 Firebug 检查您的页面，找到 Facebook 覆盖元素并检查更改`z-index`此元素是否会修复它。如果是，只需将规则添加到您自己的带有`!important`属性的 CSS 中。几个月前我遇到过这种问题，对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:36:21.283

我实际上是通过使用这些来修复的。

```
.fb_iframe_widget_lift {
    z-index: 1;
}

.entry {
    line-height: 1.5;
}

.content iframe {
    max-width: 1200%;
}

.entry p {
    padding-top: 1em;
    padding-bottom: 1em;
}

.entry img {
    max-width: 100%;
}

.entry h1, .entry h2, .entry h3, .entry h4, .entry h5, .entry h6 {
    margin-bottom: 15px;
    line-height: 1em;
    font-family: Helvetica;
    font-weight: normal;
} 
```

# java - 在运行时添加方法，该方法依赖于同一类中带有注释的方法

> ID：15773540
> 
> 赞同：0
> 
> 时间：2013-04-02T20:16:05.603
> 
> 标签：java, reflection, annotations, runtime

目前我的听众需要一个开关树来调用内部方法。

```
public class Car{

   public void listener(String e){
      if(e.equals("Honk"))
        this.blowHorn();
   }

   @Honk
   private void blowHorn(){...}

} 
```

是否可以利用反射和方法注释，以便可以在运行时生成侦听器方法？它将根据输入是否等于方法注释进行切换。这比使用普通反射更好，因为它减少了开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:48:14.783

************************用反思回答**************************

首先，您将这样声明您的新注释：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface CarListener{
    public String carAction();
} 
```

因此，在您的班级 Car 中，您将拥有：

```
public class Car {

    //Here you´ll be looking at all the methods  you have in the class Car (I´d advice to 
    // put them in another class, so as to keep it clean, I didn´t do it here in order to
    // explain it better. These methods have the corresponding annotation you created

    public void listener(String e) { 
        Method[] methods = Car.class.getMethods();
            for(Method method:methods) {

        //Now that you have all the methods all you need is to figure which one you want
        // you´ll do that according to the "e" string, which represents the car action (for 
        // example "Honk") I´d also advice you to rename that too.

            if(rightMethod(method, e))

                //Now that you have found it, then you invoke the method, "call it"
                // which is what you wre doing in the previos code with "this.blowHorn()"

                return invokeMethod(method);
        }
        //This will help you in case you did NOT find the correct method, it´s just help 
        // if you don´t put it in it won´t break your code
        // fun fact about RuntimExceptions: you don´t have to declare them, meaning
        // you dont have to add them as "throws" or catch

        throw new RuntimeException("No listener found for car Action"+e);
    }

    private boolean rightMethod(Method method, String expression) {

    //First if asks if the method found has an annoation present, and if it does
    // then it asks if it corresponds to the annoation you created

        if (method.isAnnotationPresent(NewAnnotationInterfaceName.class))

    //if the method in fact has the annotation created all you are doing is asking what
    // carAction is associated to that method, you do that with the .carAction()

            return method.getAnnotation(NewAnnotationInterfaceName.class).carAction().equals(expression);
        return false;
    }

    //Now all you have to do is invoke it :) This just follows how to invoke a method
    // I won´t explain it

    private void  invokeMethod(Method method) {
        try {
            return method.invoke(Car.class.newInstance(), new Object[]{});
        } catch (InstantiationException | IllegalAccessException
                 | InvocationTargetException | IllegalArgumentException ex) {
            Logger.getLogger(Car.class.getName()).log(Level.SEVERE, null, ex);
        }
        throw new RuntimeException("Could not invoke method");
    }

    @CarListener(carAction= "Honk")
    public void blowHorn() {  
        ...
    }

     @CarListener(carAction= "SomethingElse")
    public void someOtherAction() {  
        ...
    }

} 
```

希望有帮助！

*******************用Hashmap和命令设计回答****************************

```
public abstract class CarAction {

    public abstract void execute(Car car){};

}

public class HonkAction extends CarAction{

    @Override
    public void execute(Car car) {
           car.blowHorn();
    }    

}

public class Car {

    private HashMap<String, CarAction> carActions;

    public Car() {
        ...
        initializeCarActions();
    }

    public void initializeCarActions() {
        this.carActions = new HashMap<>();
        this.carActions.put("Honk", new HonkAction());
        ...
    }

    public void listener(String e) {
        CarAction action = this.carActions.get(e);
        if(action!=null) action.execute(this);
    }

} 
```

如果您要使用这种方式，我建议有人注入 HashMap，这样 Car 就不必依赖 CarActions（只是抽象类），要么使用一个类，要么使用 Guice。此外，如果所有 carAction 只需要“Car”即可执行，这也有效。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:20:37.783

```
public listener(String e){
      if(e.equals("Honk"))
        this.blowHorn();
   } 
```

不是正确的 Java 方法签名。

同样，如果您使用反射，则不需要“动态”生成侦听器方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:44:48.967

如果你真的想用注解来做到这一点，你可以这样做：

```
public void listener(String e) {
    for (Method m : this.getClass().getDeclaredMethods()) {
        for (Annotation a : m.getDeclaredAnnotations()) {
            if (a.getClass().getSimpleName().equals(e)) {
                m.setAccessible(true); // Need to do this so we can run private methods
                m.invoke(this);
            }
        }
    }
} 
```

这将使用名称与给定名称匹配的注释调用每个方法。坚持这种通用设计，我建议进行两项核心改进：

*   通过执行上述操作预先构建注释 <-> 方法映射，但将其存储在注释名称 -> 方法哈希映射中，而不是调用它

*   以注释的实例而不是字符串（`listener(Class<? extends Annotation> annotation)`而不是`listener(String e)`），这样您就可以将输入与方法上的注释进行比较，而不是必须提取名称并比较字符串，这看起来特别讨厌。

不过，这不是一个很棒的设计。更典型的是，您要么将它们硬核为一系列简单的 if 语句（如果有少量选项），要么如果有很多选项，您将使用命令模式之类的东西（将每个可调用方法封装到一个对象中） )，让每个命令在创建时注册自己的名称，然后将它们存储在地图中，然后您可以从中查找以找到相关命令。

# ios - 在后台根据时间激活本地通知

> ID：15773544
> 
> 赞同：2
> 
> 时间：2013-04-02T20:16:12.273
> 
> 标签：ios, objective-c, uilocalnotification

所以我有一个包含重复间隔本地通知的应用程序，我想添加一个在睡眠时间暂停通知的功能。

到目前为止，我已经为用户创建了两个日期选择器来指定他们想要停止重复间隔的时间以及自动重新启动的时间。我为他们添加了一个 uiswitch 来激活睡眠模式或忽略该功能。

现在，我将如何让我的主要 uipickerview -（他们从这里选择通知）来收听 uiswitch（如果它打开），然后它在来自我的第一个 datepicker 的时间暂停通知并重新启动通知来自第二个日期选择器的时间？

我已经设置了我的日期选择器和我的 uiswitch，但不知道如何用我的 uipickerview 实现它。它应该在 DidSelectRow 的方法下吗？还是 appdelegate 中的方法（例如 DidEnterBackground）？

请询问您是否需要更多信息或代码来理解这个想法并帮助我。谢谢。

添加在：

这是我为日期选择器准备的代码，但是，我只是缺少将其正确添加到我的选择器视图的连接。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
dateFormatter.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter.timeStyle=NSDateFormatterShortStyle;
dateFormatter.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString=[dateFormatter stringFromDate:startTime.date];
NSLog(@"Start time is %@",dateTimeString);

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc]init];
dateFormatter2.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter2.timeStyle=NSDateFormatterShortStyle;
dateFormatter2.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString2=[dateFormatter2 stringFromDate:endTime.date];
NSLog(@"End time is %@",dateTimeString2); 
```

我也有这段代码来比较时间：

```
if ([[NSDate date] isEqualToDate:startTime.date]) {
NSLog(@"currentDate is equal to startTime"); 
}

if ([[NSDate date] isEqualToDate:endTime.date]) {
NSLog(@"currentDate is equal to endTime"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:56:48.060

iOS 不支持在两个特定日期/时间之间发布本地重复通知。此外，与基于地理的通知不同，当不在前台时，应用程序不会收到触发通知的警报。所以我们需要通过在用户没有睡着的时候创建许多单独的通知来解决这个问题。

请按照以下步骤创建基本解决方案：

1.  将您的控件连接到视图控制器标题中的 IBOutlets：

    **SomeViewController.h：**

    ```
    @interface SomeViewController : UIViewController

    @property (weak, nonatomic) IBOutlet UISwitch *sleepToggleSwitch;
    @property (weak, nonatomic) IBOutlet UIDatePicker *notificationIgnoreStartTime;
    @property (weak, nonatomic) IBOutlet UIDatePicker *notificationIgnoreEndTime;
    @property (weak, nonatomic) IBOutlet UIPickerView *notificationTypePickerView;

    @end 
    ```

2.  在视图控制器的实现文件中创建 IBAction 方法并连接每个控件（两个 UIDatePickers、一个 UISwitch 和一个 UIPickerView）。每个方法都应该调用私有方法`startUserOptionInteractionTimer`。

    **SomeViewController.m：**

    ```
    - (IBAction)noNotificationPeriodStartDateChanged:(id)sender
    {
        [self startUserOptionInteractionTimer];
    }

    - (IBAction)noNotificationPeriodEndDateChanged:(id)sender
    {
        [self startUserOptionInteractionTimer];
    }

    - (IBAction)sleepToggleSwitchToggled:(id)sender
    {
        [self startUserOptionInteractionTimer];
    }

    - (IBAction)notificationTypeChanged:(id)sender
    {
        [self startUserOptionInteractionTimer];
    } 
    ```

3.  在`startUserOptionInteractionTimer`私有方法中，我们（重新）启动一个 NSTimer。我们在这里使用了一个计时器，这样如果用户更改日期或快速切换开关（他们可能会这样做），您就不会连续快速地关闭和设置通知。（NSTimer 属性`userOptionInteractionTimer`应该在实现文件的接口延续中声明）。

    **SomeViewController.m：**

    ```
    - (void)startUserOptionInteractionTimer
    {
        // Remove any existing timer
        [self.userOptionInteractionTimer invalidate];
        self.userOptionInteractionTimer = [NSTimer scheduledTimerWithTimeInterval:4.f
                                                                           target:self
                                                                         selector:@selector(setupNotifications)
                                                                         userInfo:nil
                                                                          repeats:NO];
    } 
    ```

4.  创建另一个私有方法来拆除预先存在的通知并设置新的通知。

    在此处设置通知取决于您希望通知用户的时间和频率。假设您想每小时通知您的用户并且用户启用了睡眠功能，那么您将为每天重复的每小时设置 14-18 个通知（取决于用户睡眠时间）。

    **SomeViewController.m：**

    ```
    - (void)setupNotifications
    {
        [[UIApplication sharedApplication] cancelAllLocalNotifications];

        // Read the notification type from the notification type picker view
        NSInteger row = [self.notificationTypePickerView selectedRowInComponent:0]; // Assumes there is only one component in the picker view.
        NSString *notificationType = [self.notificationList objectAtIndex:row]; // Where notificationList is the array storing the list of notification strings that appear in the picker view.

        // If the user has turned the sleep feature on (via the UISwitch):
        if (self.sleepToggleSwitch.on) {
            // Set the first notification to start after the user selected 'noNotificationPeriodEndDate' and repeat daily.
            // Add 1 hour to the notification date
            // Do while the notification date < the user selected 'noNotificationPeriodStartDate' ...
            //     Create the notification and set to repeat daily
            //     Add 1 hour to the notification date
            // Loop
        } else {
            // Set up 24 repeating daily notifications each one hour apart.
        }
    } 
    ```

    请记住，单个应用程序最多只能创建 64 个通知（重复通知计为一个），因此，如果您希望通知在几天或几周内的不同时间触发，您可能需要重新考虑您的设计小的。

5.  在 NSUserDefaults 中加载和存储用户选择的首选项：

    **SomeViewController.m：**

    ```
    - (void)viewDidLoad
    {
        [super viewDidLoad];

        // Load the user defaults
        NSDate *sleepStartDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"SleepStartDate"];
        self.notificationIgnoreStartTime.date = sleepStartDate ? sleepStartDate : [NSDate date];
        NSDate *sleepEndDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"SleepEndDate"];
        self.notificationIgnoreEndTime.date = sleepEndDate ? sleepEndDate : [NSDate date];
        self.sleepToggleSwitch.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"SleepEnabled"];

        // Watch for when the app leaves the foreground
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationWillResignActive)
                                                     name:UIApplicationWillResignActiveNotification object:nil];
    }

    - (void)applicationWillResignActive
    {
        // If the timer is still waiting, fire it so the notifications are setup correctly before the app enters the background.
        if (self.userOptionInteractionTimer.isValid)
            [self.userOptionInteractionTimer fire];

        // Store the user's selections in NSUserDefaults
        [[NSUserDefaults standardUserDefaults] setObject:self.notificationIgnoreStartTime.date forKey:@"SleepStartDate"];
        [[NSUserDefaults standardUserDefaults] setObject:self.notificationIgnoreEndTime.date forKey:@"SleepEndDate"];
        [[NSUserDefaults standardUserDefaults] setBool:self.sleepToggleSwitch.on forKey:@"SleepEnabled"];
    } 
    ```

    另外，请注意，如果应用程序即将进入后台（即离开前台）并且计时器仍在计时，我们会强制它触发，以便在计时器被操作系统杀死之前设置通知。

6.  请记住为您的所有日期选择器视图和所有 IBActions 以及您的选择器视图的委托和数据源连接代理 IBAction。还要记住设置您的委托和数据源方法，以便填充选择器视图。

7.  就是这样！

上述设计将确保在正确的时间触发通知，无论应用程序是在前台、后台还是终止。（但是，如果在收到通知时应用程序在前台，用户将不会收到通知。相反，`application:didReceiveLocalNotification:`会调用 appDelegate）。

显然，上面的代码不是“准备好执行”，但你应该能够填补空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:03:02.683

在 a或 the中`UISwitch`设置一个可以在任何地方检查的属性，可能会激活和停用 Picker（userInteractionEnabled 等）。`plist``NSUserDefaults`

还连接了`UISwitch`一个`IBAction`方法，`ValueChanged`以便能够始终切换状态。

进一步使用只是更新时间的`DidSelectRowAtIndexPath:`方法`UIPickerView`（也可以将它们保存在一个`plist`或者`NSUserDefaults`如果您需要它们在多个地方。
或者您将属性用作类属性（静态）^^

对于自动检查，我将只使用在`NSTimer`60 秒内循环运行`AppDelegate`的事件，并触发一个事件来检查它是否可以继续或返回，或者如果你想触发它已经在这里检查（可以扩展以确保你正在触发事件不是在一分钟内的任何地方，而是在 00 秒）。
检查您是否可以开火的样本对于该州来说可能看起来像这样

startSilentTimePicker : 晚上 10:30
stopSilentTimePicker : 早上 7:15
activitySwitch : on

```
// filtered date by only time
NSDateComponents *startComps = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:[startSilentTimePicker date]];
NSDateComponents *endComps = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:[stopSilentTimePicker date]];
NSDateComponents *currentComps = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:[NSDate date]];

if([[startComps date] laterDate:[currentComps date]] == [currentComps date] || 
[[endComps date] earlierDate:[currentComps date]] == [currentComps date])
{
    // set the value, that tells you beeing in silent time, set a return from the methode or invert to fire notification here
} 
```

没有用我的代码实际测试过它，但我正在使用类似的东西。如果您遗漏了什么，请告诉我，也许我可以完成；）

# xml - 如何访问 upcdatabase.org API？

> ID：15773545
> 
> 赞同：4
> 
> 时间：2013-04-02T20:16:15.887
> 
> 标签：xml, json, web-services, barcode

我正在开发一个接受 UPC 条形码并在线搜索产品描述的 Java 项目。

我正在尝试访问 upcdatabase.org API。该站点指示您将以下 URL 用于带有产品信息的 JSON 响应：

格式：upcdatabase.org/api/json/APIKEY/BARCODE

例如：[http ://upcdatabase.org/api/json/2316e70001a2757dc55dc64ce0465787/0111222333446](http://upcdatabase.org/api/json/2316e70001a2757dc55dc64ce0465787/0111222333446)

这对他们的测试产品非常有效，但不适用于我提供的任何真实条形码。当我尝试真正的产品时，我得到了这个： {"valid":"false","re​​ason":"Code not found in database."}

但是，当我在他们的网络界面上的文本框中输入相同的条形码时，它发现产品很好。

他们提到他们将 API 服务移至 api.upcdatabase.org，但没有提供任何有关如何访问该站点的文档。

有没有人熟悉这个网站的 API 可能现在发生了什么？

以下是我迄今为止尝试过的一些条形码：016000275164 031200016058 024100440689

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:36:25.877

看起来 UPC 数据库 API 希望将所有 UPC 代码填充到 13 位，必要时使用前导零。所以你的示例代码

024100440689

...需要填充到：

0024100440689

看看你从向[http://upcdatabase.org/api/json/2316e70001a2757dc55dc64ce0465787/0024100440689发出请求得到了什么](http://upcdatabase.org/api/json/2316e70001a2757dc55dc64ce0465787/0024100440689)

# python - 让 Skein 使用 Python

> ID：15773546
> 
> 赞同：0
> 
> 时间：2013-04-02T20:16:21.190
> 
> 标签：python, skein

我已经尝试了一段时间了。在我终于从[这里](http://pythonhosted.org/pyskein/download.html)安装了 Skein for python 之后。我不断收到以下错误：

> from _skein import skein256、skein512、skein1024、threefish 导入错误：DLL 加载失败：%1 不是有效的 Win32 应用程序。

再次尝试使用 32 位版本的 Python 会导致此错误：

> DLL 加载失败：找不到指定的模块。

我现在不确定该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:38:59.823

你有安装64位版本的python吗？试试32位。

# ruby - Ruby 类实例变量与类变量

> ID：15773552
> 
> 赞同：200
> 
> 时间：2013-04-02T20:17:00.707
> 
> 标签：ruby, instance-variables, class-variables, class-instance-variables

我阅读了[https://stackoverflow.com/questions/826734/when-do-ruby-instance-variables-get-set](http://archive.today/dCYNj)但我对何时使用类实例变量有两种想法。

类变量由一个类的所有对象共享，实例变量属于一个对象。如果我们有类变量，就没有多少空间可以使用类实例变量了。

有人可以解释这两者之间的区别以及何时使用它们吗？

这是一个代码示例：

```
class S
  @@k = 23
  @s = 15
  def self.s
    @s
  end
  def self.k
     @@k
  end

end
p S.s #15
p S.k #23 
```

**更新：**我现在明白了！类实例变量不沿继承链传递。

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2013-04-02T20:24:29.753

类的实例变量：

```
class Parent
  @things = []
  def self.things
    @things
  end
  def things
    self.class.things
  end
end

class Child < Parent
  @things = []
end

Parent.things << :car
Child.things  << :doll
mom = Parent.new
dad = Parent.new

p Parent.things #=> [:car]
p Child.things  #=> [:doll]
p mom.things    #=> [:car]
p dad.things    #=> [:car] 
```

类变量：

```
class Parent
  @@things = []
  def self.things
    @@things
  end
  def things
    @@things
  end
end

class Child < Parent
end

Parent.things << :car
Child.things  << :doll

p Parent.things #=> [:car,:doll]
p Child.things  #=> [:car,:doll]

mom = Parent.new
dad = Parent.new
son1 = Child.new
son2 = Child.new
daughter = Child.new

[ mom, dad, son1, son2, daughter ].each{ |person| p person.things }
#=> [:car, :doll]
#=> [:car, :doll]
#=> [:car, :doll]
#=> [:car, :doll]
#=> [:car, :doll] 
```

使用类上的实例变量（而不是该类的实例），您可以存储该类共有的内容，而无需子类也自动获取它们（反之亦然）。使用类变量，您可以方便地不必`self.class`从实例对象写入，并且（如果需要）您还可以在整个类层次结构中自动共享。

* * *

将这些合并到一个示例中，该示例还涵盖了实例上的实例变量：

```
class Parent
  @@family_things = []    # Shared between class and subclasses
  @shared_things  = []    # Specific to this class

  def self.family_things
    @@family_things
  end
  def self.shared_things
    @shared_things
  end

  attr_accessor :my_things
  def initialize
    @my_things = []       # Just for me
  end
  def family_things
    self.class.family_things
  end
  def shared_things
    self.class.shared_things
  end
end

class Child < Parent
  @shared_things = []
end 
```

然后在行动：

```
mama = Parent.new
papa = Parent.new
joey = Child.new
suzy = Child.new

Parent.family_things << :house
papa.family_things   << :vacuum
mama.shared_things   << :car
papa.shared_things   << :blender
papa.my_things       << :quadcopter
joey.my_things       << :bike
suzy.my_things       << :doll
joey.shared_things   << :puzzle
suzy.shared_things   << :blocks

p Parent.family_things #=> [:house, :vacuum]
p Child.family_things  #=> [:house, :vacuum]
p papa.family_things   #=> [:house, :vacuum]
p mama.family_things   #=> [:house, :vacuum]
p joey.family_things   #=> [:house, :vacuum]
p suzy.family_things   #=> [:house, :vacuum]

p Parent.shared_things #=> [:car, :blender]
p papa.shared_things   #=> [:car, :blender]
p mama.shared_things   #=> [:car, :blender]
p Child.shared_things  #=> [:puzzle, :blocks]  
p joey.shared_things   #=> [:puzzle, :blocks]
p suzy.shared_things   #=> [:puzzle, :blocks]

p papa.my_things       #=> [:quadcopter]
p mama.my_things       #=> []
p joey.my_things       #=> [:bike]
p suzy.my_things       #=> [:doll] 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-06-08T10:44:08.707

[来源](https://stackoverflow.com/questions/15773552/ruby-class-instance-variable-vs-class-variable/15773671)

**实例方法的可用性**

*   类实例变量仅对类方法可用，对实例方法不可用。
*   类变量可用于实例方法和类方法。

**可继承性**

*   类实例变量在继承链中丢失。
*   类变量不是。

```
class Vars

  @class_ins_var = "class instance variable value"  #class instance variable
  @@class_var = "class variable value" #class  variable

  def self.class_method
    puts @class_ins_var
    puts @@class_var
  end

  def instance_method
    puts @class_ins_var
    puts @@class_var
  end
end

Vars.class_method

puts "see the difference"

obj = Vars.new

obj.instance_method

class VarsChild < Vars

end

VarsChild.class_method 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-04-02T20:23:29.060

我相信主要（唯一？）不同的是继承：

```
class T < S
end

p T.k
=> 23

S.k = 24
p T.k
=> 24

p T.s
=> nil 
```

类变量由所有“类实例”（即子类）共享，而类实例变量仅特定于该类。但是，如果您从不打算扩展您的课程，则差异纯粹是学术上的。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-02-01T15:07:23.703

正如其他人所说，类变量在给定类及其子类之间共享。类实例变量只属于一个类；它的子类是分开的。

为什么会存在这种行为？好吧，Ruby 中的一切都是对象——甚至是类。这意味着每个类都有一个对应于它的类的对象`Class`（或者更确切地说，是 的子类）。`Class`（当你说 时`class Foo`，你实际上是在声明一个常量`Foo`并为其分配一个类对象。）每个 Ruby 对象都可以有实例变量，所以类对象也可以有实例变量。

问题是，类对象上的实例变量的行为方式并不像您通常希望类变量的行为方式那样。您通常希望在超类中定义的类变量与其子类共享，但这不是实例变量的工作方式——子类有自己的类对象，而该类对象有自己的实例变量。因此，他们引入了具有您更可能想要的行为的单独的类变量。

换句话说，类实例变量是 Ruby 设计的一种意外。你可能不应该使用它们，除非你特别知道它们是你要找的东西。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-04-02T04:16:13.303

虽然使用类变量似乎很有用，因为类变量在子类之间共享，并且可以在单例和实例方法中引用，但存在一个明显的缺点。它们是共享的，因此子类可以更改类变量的值，而基类也会受到更改的影响，这通常是不受欢迎的行为：

```
class C
  @@c = 'c'
  def self.c_val
    @@c
  end
end

C.c_val
 => "c" 

class D < C
end

D.instance_eval do 
  def change_c_val
    @@c = 'd'
  end
end
 => :change_c_val 

D.change_c_val
(irb):12: warning: class variable access from toplevel
 => "d" 

C.c_val
 => "d" 
```

Rails 引入了一个方便的方法，称为 class_attribute。顾名思义，它声明了一个类级属性，其值可由子类继承。class_attribute 值可以在单例方法和实例方法中访问，就像类变量一样。然而，在 Rails 中使用 class_attribute 的巨大好处是子类可以改变自己的值，并且不会影响父类。

```
class C
  class_attribute :c
  self.c = 'c'
end

 C.c
 => "c" 

class D < C
end

D.c = 'd'
 => "d" 

 C.c
 => "c" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-07-30T18:06:21.000

[Ruby官方FAQ：类变量和类实例变量有什么区别？](https://www.ruby-lang.org/en/documentation/faq/8/)

主要区别在于与继承有关的行为：类变量在一个类及其所有子类之间共享，而类实例变量只属于一个特定的类。

类变量在某种程度上可以看作是继承层次结构中的全局变量，具有全局变量带来的所有问题。例如，一个类变量可能（意外地）被它的任何子类重新分配，影响所有其他类：

```
class Woof

  @@sound = "woof"

  def self.sound
    @@sound
  end
end

Woof.sound  # => "woof"

class LoudWoof < Woof
  @@sound = "WOOF"
end

LoudWoof.sound  # => "WOOF"
Woof.sound      # => "WOOF" (!) 
```

或者，一个祖先类可能稍后被重新打开和更改，可能会产生令人惊讶的效果：

```
class Foo

  @@var = "foo"

  def self.var
    @@var
  end
end

Foo.var  # => "foo" (as expected)

class Object
  @@var = "object"
end

Foo.var  # => "object" (!) 
```

因此，除非您确切知道自己在做什么并且明确需要这种行为，否则最好使用类实例变量。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-12T19:40:44.907

对于那些具有 C++ 背景的人，您可能有兴趣与 C++ 等价物进行比较：

```
class S
{
private: // this is not quite true, in Ruby you can still access these
  static int    k = 23;
  int           s = 15;

public:
  int get_s() { return s; }
  static int get_k() { return k; }

};

std::cerr << S::k() << "\n";

S instance;
std::cerr << instance.s() << "\n";
std::cerr << instance.k() << "\n"; 
```

正如我们所见，`k`是一个`static`like 变量。这 100% 像一个全局变量，只是它归类*所有*（*范围*正确）。这使得更容易避免类似命名的变量之间的冲突。与任何全局变量一样，该变量只有一个实例，并且对其进行修改始终对所有人可见。

另一方面，`s`是对象特定的值。每个对象都有自己的值实例。在 C++ 中，您必须创建一个实例才能访问该变量。在 Ruby 中，类定义本身就是类的一个实例（在 JavaScript 中，这称为原型），因此您可以`s`从类中访问而无需额外的实例化。可以修改类实例，但修改`s`将特定于每个实例（每个类型的对象`S`）。所以修改一个不会改变另一个的值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-02T17:11:40.997

### 显示的简单示例

*   ***类变量的***可继承*性*
****   ***类实例变量**的*封装*****

 ******注意：使用`class << self`是一种方便，而不是必须在此块内的所有方法前面加上`self.`注意：`class << self`修改`self`后它指向*元类*（`Parent`请参阅[https://stackoverflow.com/a/38041660/960184](https://stackoverflow.com/a/38041660/960184)）

### 示例代码

```
class Parent
  class << self
    attr_reader :class_instance_var

    def class_instance_var=(value)
      @class_instance_var="set by #{self.name} to #{value}"
    end

    def class_var
      @@class_var
    end

    def class_var=(value)
      @@class_var = "set by #{self.name} to #{value}"
    end
  end
end

class Child < Parent
end

# use the instance separately in parent and subclass
puts "\n* Exercising class instance variable setters
* Setting Parent and Child class instance variables differently
* Parent.class_instance_var = 1000\n* Child.class_instance_var = 2000\n\n"

Parent.class_instance_var = 1000
Child.class_instance_var = 2000
puts "Parent.class_instance_var=(#{Parent.class_instance_var})"
puts "Child.class_instance_var=(#{Child.class_instance_var})"

# set class variable in via parent (changes both in parent and subclass)
puts "\n* Exercising Parent class variable setter
* Set class variable value to 3000 using parent, it changes in Child also
* Parent.class_var = 3000\n\n"

Parent.class_var = 3000
puts "Parent.class_var=(#{Parent.class_var})"
puts "Child.class_var=(#{Child.class_var})"

# set class variable in via subclass (changes both in parent and subclass)
puts "\n* Exercising Child class variable setter
* Set class variable value to 5000 using child, it changes in Parent also
* Child.class_var = 5000\n\n"

Child.class_var = 5000
puts "Parent.class_var=(#{Parent.class_var})"
puts "Child.class_var=(#{Child.class_var})" 
```

### 使用 ruby​​ v3.0.2 输出

```
* Exercising class instance variable setters
* Setting Parent and Child class instance variables differently
* Parent.class_instance_var = 1000
* Child.class_instance_var = 2000

Parent.class_instance_var=(set by Parent to 1000)
Child.class_instance_var=(set by Child to 2000)

* Exercising Parent class variable setter
* Set class variable value to 3000 using parent, it changes in Child also
* Parent.class_var = 3000

Parent.class_var=(set by Parent to 3000)
Child.class_var=(set by Parent to 3000)

* Exercising Child class variable setter
* Set class variable value to 5000 using child, it changes in Parent also
* Child.class_var = 5000

Parent.class_var=(set by Child to 5000)
Child.class_var=(set by Child to 5000) 
```******

# c# - System.load(dll) 在 C# 中的实现是什么？

> ID：15773555
> 
> 赞同：0
> 
> 时间：2013-04-02T20:17:09.747
> 
> 标签：c#, java

我正在学习 java 的路上，我想知道 C# 中的 System.load(dll) 并行/实现是什么。它像“使用”语句吗？我是 ac# 开发人员，所以也许通过一个例子，我会更好地理解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:18:23.177

**在 java** :to Load a Java Native/Dynamic Library (DLL) 中，[请参见以下示例：](http://www.chilkatsoft.com/java-loadLibrary-Windows.asp)

```
import com.chilkatsoft.CkZip;

public class Test {

  static {
    try {
        System.load("C:/chilkatJava/chilkat.dll");
    } catch (UnsatisfiedLinkError e) {
      System.err.println("Native code library failed to load.\n" + e);
      System.exit(1);
    }
  }

  public static void main(String argv[]) 
  {
    CkZip zip = new CkZip();
    System.out.println(zip.version());    
  }
} 
```

**在 C# 中**：试试这个链接答案：[https ://stackoverflow.com/a/1087851/1743852](https://stackoverflow.com/a/1087851/1743852)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:22:22.480

在 C# 中，您可以使用反射在运行时动态加载库：

```
System.Reflection.Assembly myDllAssembly = 
   System.Reflection.Assembly.LoadFile("%MyDLLPath%\\MyDLL.dll"); 
```

之后，您将能够从该组合中搜索类型：

```
System.Type MyDLLFormType = myDllAssembly.GetType("MyDLLNamespace.MyDLLForm"); 
```

并创建该类型的对象：

```
Form MyDLLFormInstance = (Form)myDllAssembly.CreateInstance("MyDLLNamespace.MyDLLForm"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:24:46.617

在 C# 中，您不能加载本机 dll，而是 P/Invoke 它们！

> P/Invoke 或 Pinvoke 代表平台调用服务。PInvoke 是 Microsoft .NET Frameowrk 的一项功能，它允许开发人员调用动态链接库 (DLL) 中的本机代码。Pinvoking 时，.NET 框架（或公共语言例程）将加载 DLL 并自动处理类型转换。P/Invoke 最常见的用途是使用仅包含在 Win32 API 中的 Windows 功能。Windows 中的 API 非常广泛，只有部分功能封装在 .NET 库中。

# javascript - jquery怎么知道go是什么

> ID：15773566
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:17:49.530
> 
> 标签：javascript, jquery, jquery-animate

[在 www 上找到的 jsfiddle 示例](http://jsfiddle.net/RPSzb/2/)

jquery 怎么知道 go 是什么？

```
$('#myDiv').animate({  textIndent: 0 }, {
    step: function(go) {
      $(this).css('-moz-transform','rotateY('+go+'deg)');
      $(this).css('-webkit-transform','rotateY('+go+'deg)');
      $(this).css('-o-transform','rotateY('+go+'deg)');
      $(this).css('transform','rotateY('+go+'deg)');
    },
    duration: 1000,
    complete: function(){ alert('done') }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:19:44.460

`go`只是函数参数的名称。根据[jQuery 文档](http://api.jquery.com/animate/)

> **阶跃函数**
> 
> 第二个版本`.animate()`提供了一个`step`选项——在动画的每一步触发的回调函数。此函数对于启用自定义动画类型或更改正在发生的动画很有用。它接受两个参数（`now`和`fx`），并将其设置为动画的 DOM 元素。
> 
> *   `now`: 每一步动画属性的数值
> *   fx：对`jQuery.fx`原型对象的引用，其中包含许多属性，例如`elem`动画元素，`start`动画`end`属性的第一个和最后一个值，以及 `prop`被动画的属性。

`go`参数名称也是如此`now`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:25:44.527

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

“步骤”是一个特定的动画选项。“step”的参数之一是元素当前在其动画中的值。

当您在 jQuery 中制作动画时，它会在起点和终点之间移动。中间的位由 jQuery 计算并传递。

因此它知道“go”是什么，因为它只是一个由动画函数创建的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:25:58.237

此动画使用`textIndent`正方形上的属性来围绕 y 轴旋转正方形。

该`textIndent`属性在 CSS 中定义为开始，`180px`动画设置会将`textIndent`值减小到`0`。在从 180 减少到 0 的每一步中，该值**[`step`](http://api.jquery.com/animate/#step)**作为参数的`go`参数传递给函数。然后，该值用于使用 CSS 变换围绕 y 轴旋转正方形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T20:26:14.443

jQuery`step`选项允许您定义一个回调函数，该函数接受两个参数并在动画的每个“步骤”上调用。您已将回调函数定义为仅采用一个参数（您已将其命名为`go`），而您忽略了第二个参数。您创建的回调函数称为 an`anonymous function`并且您可以将参数命名为您喜欢的任何名称。

你可以在这里阅读更多关于它的信息：[.animate()](http://api.jquery.com/animate/)

# javascript - 将事件委托给画布并在处理程序中检索元素

> ID：15773569
> 
> 赞同：1
> 
> 时间：2013-04-02T20:17:54.430
> 
> 标签：javascript, jquery, html, svg, raphael

我正在使用**Raphaël**绘制**图形（网络）**，因为**节点**被表示并显示为圆圈。用户可以通过点击画布来**动态添加节点**，然后将新构建的`Element`对象推入一个`Set`，也推入一个模型对象，其中存储了一些关于刚刚创建的节点的宝贵数据。

**当用户将鼠标指针移到**节点上时，我想在每个节点附近**显示模型中提到的数据**。我希望避免的是在创建时在每个节点上创建一个新事件。我想**将事件委托给画布**，以便为每个节点提供一个全局处理程序。

 ****我已经创建了这样的处理程序并将事件附加到它：

```
var Paper    = Raphael('Graph',600,600),
    $Canvas  = $(Paper.canvas),
    onMouseOver = function(e){
      // Wish to have an Element object
    }

$Canvas.on('mouseover','circle',onMouseOver); 
```

该事件和处理程序工作正常，因为它只在圆圈上触发。

我怎样才能检索或**将它作为一个`Element`对象**，并访问它`.data()`和每个关联？我必须在我的 中搜索它`Set`吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:32:08.633

假设您的集合中的元素由 Raphaël 标识，`Element.id`那么当您创建新元素时，您可以将等效的 id 分配给 DOM 节点

```
newElement = Paper.circle(x, y, r);
newElement.node.id = newElement.id; 
```

然后在您的鼠标悬停处理程序中，您可以从`event.target`

```
onMouseOver = function(e){
  var elemId = e.target.id;
  //find your element in the set by this id to get the precious data
} 
```****

# python - 试图根据一列中的值屏蔽 2D numpy 数组

> ID：15773570
> 
> 赞同：3
> 
> 时间：2013-04-02T20:18:00.187
> 
> 标签：python, numpy

我有以下数组：

```
[[    6\.           105\.             2\.             8.09841881]
[    6\.           105\.             4\.             9.34220351]
[    6\.           105\.             6\.             9.97663435]
[    6\.          1001\.             2\.             9.57108242]
[    6\.          1001\.             4\.            12.22355794]
[    6\.          1001\.             6\.            13.57295942]
[   12\.          1001\.             2\.            12.37474466]
[   12\.          1001\.             4\.            17.45334004]
[   12\.          1001\.             6\.            19.88499289]
[   18\.          1007\.             2\.            16.09076561]
[   18\.          1007\.             4\.            23.43742275]
[   18\.          1007\.             6\.            27.73041646]] 
```

我试图只提取第一个元素是六的行

```
print ma.MaskedArray(a, mask=(np.ones_like(a)*(a[:,0]==6.0)).T) 
```

我从问题“[根据一列中的值屏蔽 2D numpy 数组](https://stackoverflow.com/questions/4625744/mask-a-2d-numpy-array-based-on-values-in-one-column)”得到。但是，我得到

```
File "./Prova.py", line 170, in <module>
print ma.MaskedArray(a, mask=(np.ones_like(a)*(a[:,0]==6.0)).T)
ValueError: operands could not be broadcast together with shapes (12,4) (12) 
```

你知道为什么这不起作用吗？

这个问题可能很愚蠢，但由于我刚开始编写python，请多多包涵。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:21:40.200

设置一些要处理的测试数据：

```
>>> a = np.arange(12*4).reshape((12,4)) 
```

首先，我们为掩码数组“分配”空间：

```
>>> mask = np.empty(a.shape,dtype=bool) 
```

现在我们不能`a == 6`直接从第一列分配给它，因为它们不是正确的形状：

```
>>> mask[:,:] = a[:,0] == 6
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: operands could not be broadcast together with shapes (12,4) (12) 
```

但是我们可以通过简单地插入一个 newaxis 来广播我们的第一列`a`直到正确的形状，这样它就变成了一个二维数组：

```
>>> mask[:,:] = (a[:,0] == 6)[:,np.newaxis] 
```

如我们所见，我们的掩码现在是正确的。

```
>>> mask
array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [False, False, False, False],
       [False, False, False, False],
       [False, False, False, False],
       [False, False, False, False],
       [False, False, False, False],
       [False, False, False, False],
       [False, False, False, False]], dtype=bool) 
```

现在我们只需制作我们的蒙面数组并坐下来享受:)。

```
>>> ma.MaskedArray(a,mask=mask)
masked_array(data =
 [[-- -- -- --]
 [-- -- -- --]
 [-- -- -- --]
 [-- -- -- --]
 [-- -- -- --]
 [20 21 22 23]
 [24 25 26 27]
 [28 29 30 31]
 [32 33 34 35]
 [36 37 38 39]
 [40 41 42 43]
 [44 45 46 47]],
             mask =
 [[ True  True  True  True]
 [ True  True  True  True]
 [ True  True  True  True]
 [ True  True  True  True]
 [ True  True  True  True]
 [False False False False]
 [False False False False]
 [False False False False]
 [False False False False]
 [False False False False]
 [False False False False]
 [False False False False]],
       fill_value = 999999) 
```

# ruby - 如何从 Ruby 返回哈希 FQL 查询

> ID：15773578
> 
> 赞同：1
> 
> 时间：2013-04-02T20:18:20.100
> 
> 标签：ruby, facebook, hash, facebook-fql, koala

我是新来的，对 Ruby 非常陌生，所以我会尽力提出一个好问题。基本上我正在尝试编写一个返回用户被邀请参加的 Facebook 事件的应用程序。很简单。问题是它不断返回这样的所有内容

```
[{"name"=>"SPB Presents An Evening With Demetri Martin"}], [{"name"=>"Say \"Pi\" to Passover!"}] 
```

我只想要密钥的值。我尝试使用 ["name"] 并查看基本的 Ruby 教程，但每次都会遇到无数错误。

这是我的代码：

家庭控制器：

```
def index
if session["fb_access_token"].present?
    @fql = Koala::Facebook::API.new(session["fb_access_token"])
    @invites = @fql.fql_query("SELECT eid FROM event_member WHERE uid = me()")
end

def names(eid)
if session["fb_access_token"].present?
    @fql = Koala::Facebook::API.new(session["fb_access_token"])
    @fql.fql_query("SELECT name FROM event WHERE eid = #{eid}")
end
end 
```

主页视图

```
<% if @invites %>
        <% for invite in @invites %>
                <p><%=h names(h invite["eid"])%></p>
<% end >
<% end > 
```

非常感谢您的帮助！另外，如果有人有更好的方法来构建它，那么我不必在视图中做太多工作，或者如何为控制器中的每个循环做得更好，那也很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:27:17.333

如果有人好奇，我想出了我的问题。fql 查询将所有内容存储在一个数组中，其中包含一个“位置”哈希，因此每次我显示查询时它都会显示该数组。这是我的修复：

```
def names(eid)
  if session["fb_access_token"].present?
  @fql = Koala::Facebook::API.new(session["fb_access_token"])
  @hashmap = @fql.fql_query("SELECT name FROM event WHERE eid = #{eid}")
  @name = @hashmap[0]["name"] 
```

现在我将数组中的第一个对象拉到索引 0 处，并使用键“名称”。像魅力一样工作！

# java - 读取和打印 IFF 文件的内容适用于 Windows，但不适用于 Linux

> ID：15773582
> 
> 赞同：0
> 
> 时间：2013-04-02T20:18:33.487
> 
> 标签：java, linux, windows, file, netbeans

我在使用 Java 时遇到了一点跨平台问题。

我正在使用以下代码

```
String get = JOptionPane.showInputDialog(null, "Iff Location?");
String output = new Scanner(new File(get)).useDelimiter("\\Z").next();
System.out.println(output); 
```

从 .IFF 文件中读取并将内容打印到控制台。

在 Windows 中它可以完美运行，但是在 Linux 中它会导致以下错误。

```
Exception in thread "main" java.io.FileNotFoundException: /media/44CC4D34CC4D2212/TreList/datatables/buff/buff.iff  (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at java.util.Scanner.<init>(Scanner.java:656)
at iffreader.IffReader.main(IffReader.java:23)
Java Result: 1 
```

# android - 如何找出什么意图回调引用了什么

> ID：15773587
> 
> 赞同：1
> 
> 时间：2013-04-02T20:18:55.440
> 
> 标签：android, list, android-intent, camera, adapter

这听起来可能很愚蠢，但我无法理解它。

我有一个自定义 ListAdapter，它用我的模型构建的图像、文本和其他内容填充行。现在我希望当您单击该列表中的（任何）图像时，相机将打开并且用户应该能够拍照，然后单击的图像应该显示使用相机拍摄的照片。得到它？

现在在适配器中我只是做这样的事情：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ...stuff...
    ImageView image = (ImageView) elementView.findViewById(R.id.element_image);
    image.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            ((Activity) context).startActivityForResult(takePicture, 0);
        }
    ...other stuff...
}); 
```

我为每个 ImageView 添加了一个 onClick 选项，可以打开相机并让用户拍照。问题是上下文（我的 MainActivity）在方法“onActivityResult”上获得了回调，但我怎么知道哪个回调属于哪个 ImageView？

```
 protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) 
```

是否可以在意图内发送参考？**或者它应该如何知道哪个意图调用属于哪个 ImageView？**

我希望你能理解我的问题。否则就问吧。先感谢您 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:22:47.713

一个快速简便的解决方案是将`position`您的 存储`ListAdapter`在`SharedPreference`. 在 you`onActivityResult`中，您可以`SharedPreference`再次提取它，以了解请求的是哪一个：

```
@Override
public void onClick(View v) {

    // Store in shared preferences
    SharedPreferences sharedPref = getSharedPreferences("FileName",MODE_PRIVATE);
    SharedPreferences.Editor prefEditor = sharedPref.edit();
    prefEditor.putInt("position_in_adapter",position);
    prefEditor.commit();

    Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    ((Activity) context).startActivityForResult(takePicture, 0);
} 
```

而不是你的活动结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent){

    SharedPreferences sharedPref = context.getSharedPreferences("FileName",MODE_PRIVATE);

    // Extract again
    int position= sharedPref.getInt("position_in_adapter", -1);
} 
```

编辑：另一种选择是使用您的 requestCode 作为您的职位。例如

```
startActivityForResult(takePicture, position); 
```

并在您的 onActivityResult 中再次提取它：

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent){
    // requestCode is the position in your adapter
} 
```

# android - 以编程方式显示软键盘时如何捕获键事件？

> ID：15773588
> 
> 赞同：1
> 
> 时间：2013-04-02T20:18:58.477
> 
> 标签：android, android-canvas, android-edittext, android-softkeyboard

我正在尝试在`Canvas`. 由于我需要显示软键盘来编写文本，我`EditText`在我的 Activity 中添加了一个宽度为 0 的内容。我还实现了一个 TextWatcher 来获取输入到`EditText`. 有了这个技巧，我可以随时使用以下代码显示软键盘：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(myEditText, InputMethodManager.SHOW_IMPLICIT); 
```

像这样，我能够知道用户在写什么，并在我的`Canvas`.

现在......当用户想要停止书写（或者说，将文本固定在画布中）时，这变得很棘手。我认为他可以按“Enter”。所以我试图实现一些方法来捕捉关键事件。到目前为止没有任何成功。

这是我的实际代码。当我想开始写作时调用此方法。“编辑”是一个`EditText`.

```
public void handleUp(final Paint myPaint) {
                edit.setFocusable(true);
                edit.setFocusableInTouchMode(true);
                edit.requestFocus();
                edit.addTextChangedListener(new Watcher());
                edit.setImeOptions(EditorInfo.IME_ACTION_GO);
                edit.setOnEditorActionListener(new OnEditorActionListener() {
                    public boolean onEditorAction(TextView arg0, int arg1, KeyEvent arg2) {
                        Log.d("MyApp", "key pressed");
                        Paint localPaint = new Paint();
                        mCanvas.drawText(edit.getText().toString(), mX, mY, localPaint);
                        return false;
                    }
                });
                edit.setOnKeyListener(new OnKeyListener() {
                    public boolean onKey(View v, int keyCode, KeyEvent event) {

                        Log.d("MyApp", "key pressed");
                        if (keyCode == KeyEvent.ACTION_DOWN) {
                            Paint localPaint = new Paint();
                            mCanvas.drawText(edit.getText().toString(), mX, mY, localPaint);
                            return true;
                        }
                        return false;
                    }
                });
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.showSoftInput(edit, InputMethodManager.SHOW_IMPLICIT);

            } 
```

当我调试我的应用程序时，我从来没有达到我设置的检查点，`Log()`也看不到我的日志中的任何消息。我在 StackOverFlow 上看到了很多帖子，其中使用了这种实现，我不知道为什么它在这里失败。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:34:30.623

取自文档：

```
public void setOnKeyListener (View.OnKeyListener l)
Added in API level 1
Register a callback to be invoked when a hardware key is pressed in this view. Key presses    in software input methods will generally not trigger the methods of this listener. 
```

所以你应该寻找另一个听众。

我最好的猜测是使用这个：

```
public void setOnEditorActionListener (TextView.OnEditorActionListener l)
Added in API level 3
Set a special listener to be called when an action is performed on the text view. This   will be called when the enter key is pressed, or when an action supplied to the IME is selected by the user. Setting this means that the normal hard key event will not insert a newline into the text view, even if it is multi-line; holding down the ALT modifier will, however, allow the user to insert a newline character. 
```

但是我在文档中看到的所有方法都没有提到有关软键输入的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:47:24.150

您覆盖 dispatchKeyEvent 以获取 Enter 键

```
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    if (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)
    {
        // Do whatever you want
    }

    return super.dispatchKeyEvent(event);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T11:13:21.177

好的，所以最后没有任何效果的原因是因为我`EditText`的宽度为 0。当我将宽度和高度设置为 1 时`View.INVISIBLE`。在这种情况下将可见性设置为不起作用。

顺便说一句，三个 Listener（OnEditorActionListener、OnKeyListener 和 Overriding dispatchKeyEvent）获取回调。但我会使用`OnEditorActionListener`，因为它是唯一一个只有一个回调的。另外两个有几个回调，这是有问题的。

# java - 未找到 HttpClient 间歇性页面

> ID：15773591
> 
> 赞同：1
> 
> 时间：2013-04-02T20:19:08.433
> 
> 标签：java, apache-httpclient-4.x

我使用以下代码并多次运行该方法，有几次我在 GZIP 中得到了我所期望的响应，而其他几次我得到了完全不同的响应（未找到非 GZIP 页面）。但是，如果我使用 Mozilla 或 IE 多次下载相同的 URL，我始终会得到相同的 GZIP 响应。

这是我尝试访问的服务器的错误，还是我需要设置任何参数以获得一致的响应？

我要下载的网址[如下](http://www.walmart.com/navigation6.xml.gz)，你能告诉我吗？

```
public static byte[] dowloadURL(URL urlToDownload) {

    InputStream iStream = null;
    byte[] urlBytes = null;

    try {

        //HttpClient httpClient = new HttpClient();
        org.apache.http.client.
        HttpClient httpClient = new DefaultHttpClient();

        HttpGet httpget = new HttpGet(urlToDownload.toString());

        HttpResponse response  = httpClient.execute(httpget);

        iStream = response.getEntity().getContent();

        urlBytes = IOUtils.toByteArray(iStream);
        String responseString = new String(urlBytes);
        System.out.println(" >>> The response  string for " +urlToDownload.toString()+  " is "   +responseString);

    } catch (IOException e) {
        System.err.printf("Failed while reading bytes from %s: %s",
                urlToDownload.toExternalForm(), e.getMessage());
        e.printStackTrace();
        // Perform any other exception handling that's appropriate.
    } finally {
        if (iStream != null) {
            try {
                iStream.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    return urlBytes;
} 
```

# date - XSLT 在当前节点之外添加新节点

> ID：15773593
> 
> 赞同：0
> 
> 时间：2013-04-02T20:19:09.597
> 
> 标签：date, xslt, comparison, xslt-2.0

我正在尝试根据日期比较添加一个新元素。如果父 DATE 在过去 7 天内，我想添加一个新元素。我编写了代码来进行日期比较，但我很难弄清楚把它放在哪里。目前，它在重新格式化父 DATE 的模板中，但这会导致我在 date 元素中的新元素。有没有办法在当前元素之外创建一个新元素？谢谢。

我的输入

```
<?xml version="1.0" encoding="UTF-8"?>
<NOTICES>
    <PRESOL>
        <DATE>03012013</DATE>
        <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
        <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
        <LOCATION><![CDATA[CGS-WO]]></LOCATION>
        <ZIP>97232</ZIP>
        <CHANGES>
            <MOD>
                <DATE>01112013</DATE>
                <COUNTRY>US</COUNTRY>
            </MOD>
        </CHANGES>
     </PRESOL>
    <COMBINE>
        <DATE>03012013</DATE>
        <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
        <OFFICE><![CDATA[Air Force Materiel Command]]></OFFICE>
        <LOCATION><![CDATA[Tinker OC-ALC - (Central Contracting)]]></LOCATION>
        <ZIP>73145-3015</ZIP>
    </COMBINE>
    <COMBINE>
        <DATE>03052013</DATE>
        <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
        <OFFICE><![CDATA[Military Sealift Command]]></OFFICE>
        <LOCATION><![CDATA[MSC Norfolk]]></LOCATION>
    </COMBINE>
    <COMBINE>
         <DATE>03292013</DATE>
         <AGENCY><![CDATA[Department of Veterans Affairs]]></AGENCY>
         <OFFICE><![CDATA[Grand Junction VAMC)]]></OFFICE>
         <LOCATION><![CDATA[Veterans Affairs Medical Center]]></LOCATION>
    </COMBINE>
    <PRESOL>
        <DATE>03302013</DATE>
        <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
        <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
        <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
        <CHANGES>
             <MOD>
                 <DATE>01112013</DATE>
                 <COUNTRY>US</COUNTRY>
             </MOD>
             <MOD>
                 <DATE>01112013</DATE>
                 <COUNTRY>UK</COUNTRY>
             </MOD>
             <MOD>
                 <DATE>01142013</DATE>
                 <COUNTRY>JAPAN</COUNTRY>
             </MOD>
         </CHANGES>
     </PRESOL>
     <FAIROPP>
         <DATE>04012013</DATE>
         <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
         <OFFICE><![CDATA[Bureau of Medicine and Surgery]]></OFFICE>
         <LOCATION><![CDATA[NH Camp Pendleton]]></LOCATION>
         <ZIP>92055</ZIP>
         <CHANGES>
             <MOD>
                  <DATE>02122011</DATE>
                  <COUNTRY>JAPAN</COUNTRY>
             </MOD>
         </CHANGES>
    </FAIROPP>
</NOTICES> 
```

期望的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<NOTICES>
    <PRESOL>
        <DATE>03012013</DATE>
        <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
        <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
        <LOCATION><![CDATA[CGS-WO]]></LOCATION>
        <ZIP>97232</ZIP>
        <CHANGES>
            <MOD>
                <DATE>01112013</DATE>
                <COUNTRY>US</COUNTRY>
            </MOD>
        </CHANGES>
     </PRESOL>
    <COMBINE>
        <DATE>03012013</DATE>
        <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
        <OFFICE><![CDATA[Air Force Materiel Command]]></OFFICE>
        <LOCATION><![CDATA[Tinker OC-ALC  -  (Central Contracting)]]></LOCATION>
        <ZIP>73145-3015</ZIP>
    </COMBINE>
    <COMBINE>
        <DATE>03052013</DATE>
        <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
        <OFFICE><![CDATA[Military Sealift Command]]></OFFICE>
        <LOCATION><![CDATA[MSC Norfolk]]></LOCATION>
    </COMBINE>
    <COMBINE>
         <DATE>03292013</DATE>
         **<mostrecent>YES</mostrecent>**
         <AGENCY><![CDATA[Department of Veterans Affairs]]></AGENCY>
         <OFFICE><![CDATA[Grand Junction VAMC)]]></OFFICE>
         <LOCATION><![CDATA[Veterans Affairs Medical Center]]></LOCATION>
    </COMBINE>
    <PRESOL>
        <DATE>03302013</DATE>
        **<mostrecent>YES</mostrecent>**
        <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
        <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
        <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
        <CHANGES>
             <MOD>
                 <DATE>01112013</DATE>
                 <COUNTRY>US</COUNTRY>
             </MOD>
             <MOD>
                 <DATE>01112013</DATE>
                 <COUNTRY>UK</COUNTRY>
             </MOD>
             <MOD>
                 <DATE>01142013</DATE>
                 <COUNTRY>JAPAN</COUNTRY>
             </MOD>
         </CHANGES>
     </PRESOL>
     <FAIROPP>
         <DATE>04012013</DATE>
         **<mostrecent>YES</mostrecent>**
         <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
         <OFFICE><![CDATA[Bureau of Medicine and Surgery]]></OFFICE>
         <LOCATION><![CDATA[NH Camp Pendleton]]></LOCATION>
         <ZIP>92055</ZIP>
         <CHANGES>
             <MOD>
                  <DATE>02122011</DATE>
                  <COUNTRY>JAPAN</COUNTRY>
             </MOD>
         </CHANGES>
    </FAIROPP>
</NOTICES> 
```

我的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
        exclude-result-prefixes="xs">
    <xsl:output omit-xml-declaration="yes" indent="yes" cdata-section-elements="AGENCY DESC CLASSCOD CONTACT DATE NAICS LINK OFFADD OFFICE SUBJECT ZIP AGENCY ZIP"/>
    <xsl:strip-space elements="*"/>
    <xsl:variable name="backdate1" select="current-date() -7*xs:dayTimeDuration('P1D')"/>
    <xsl:variable name="backdate" select="xs:date(substring($backdate1, 1, 10))"/>
    <!-- copy all nodes -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="DATE/text()">
<!-- format DATE mm/dd/yyyy -->
        <xsl:value-of select="concat(substring(., 1, 2), '/', substring(., 3, 2), '/', substring(., 5, 4))"/>
    **<!-- add new node mostrecent if date is within the last 7 days -->
        <xsl:variable name="subtract_date" select="days-from-duration(xs:date(concat(substring(., 5, 4), '-', substring(., 1, 2), '-', substring(., 3, 2))) - xs:date(substring($backdate1, 1, 10)))"/>
        <xsl:if test="$subtract_date &gt;= 0">
        <xsl:text disable-output-escaping="yes">&lt;</xsl:text>
        <xsl:text disable-output-escaping="yes">mostrecent</xsl:text>
        <xsl:text disable-output-escaping="yes">&gt;</xsl:text>
        <xsl:text disable-output-escaping="yes">&lt;/</xsl:text>
        <xsl:text disable-output-escaping="yes">mostrecent</xsl:text>
        <xsl:text disable-output-escaping="yes">&gt;</xsl:text>
        </xsl:if>**
    </xsl:template>

    <!-- keep only the parent date node and delete all children date nodes -->
    <xsl:template match="DATE[../ancestor::*/DATE]"/>

    <!-- add new node type to each child node -->
    <xsl:template match="NOTICES/child::node()">
    <xsl:text disable-output-escaping="yes">&lt;</xsl:text><xsl:value-of select="name(.)"/><xsl:text disable-output-escaping="yes">&gt;</xsl:text>
    <xsl:apply-templates select="@*|node()"/>
        <type>
            <xsl:value-of select ="name(.)"/>
        </type>
    <xsl:text disable-output-escaping="yes">&lt;/</xsl:text><xsl:value-of select="name(.)"/><xsl:text disable-output-escaping="yes">&gt;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:59:34.500

如果匹配 DATE 元素而不是其文本节点，则可以执行此操作：

```
 <xsl:template match="DATE">
        <xsl:variable name="dStr" select="string(.)" />
        <xsl:variable name="bdStr" select="string($backdate1)" />
        <!-- format DATE mm/dd/yyyy -->
        <xsl:copy>
          <xsl:value-of select="concat(substring($dStr, 1, 2), '/', 
                                       substring($dStr, 3, 2), '/', 
                                       substring($dStr, 5, 4))"/>
        </xsl:copy>
        <!-- add new node mostrecent if date is within the last 7 days -->
        <xsl:variable name="subtract_date" 
                      select="days-from-duration(xs:date(
                                          concat(substring($dStr, 5, 4), '-', 
                                                 substring($dStr, 1, 2), '-', 
                                                 substring($dStr, 3, 2))) - 
                              xs:date(substring($bdStr, 1, 10)))"/>
        <xsl:if test="$subtract_date &gt;= 0">
          <mostrecent>YES</mostrecent>
        </xsl:if>
    </xsl:template> 
```

# sql - 查询、子查询并用作子查询中的变量

> ID：15773594
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:19:10.273
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services

是否不能使用“as [item] 然后在查询中使用 item 变量。

例如：

```
select c.category as [category],c.orderby as [CatOrder], m.masterno, m.master
,-- select OUT (select count(*) from    rentalitem       ri  with (nolock), 
            rentalitemstatus ris with (nolock), 
            rentalstatus     rs  with (nolock)
    where   ri.rentalitemid    = ris.rentalitemid
            and   ris.rentalstatusid = rs.rentalstatusid
            and   ri.masterid        = m.masterid
            and   rs.statustype     in ('OUT', 'INTRANSIT', 'ONTRUCK'))  as [qtyout] 
,-- select OWNED owned=
(select top 1 mwq.qty                                           
    from    masterwhqty mwq                                              
    where   mwq.masterid    = m.masterid) 

, -([owned]-[qtyout]) as [Variance]

from master m 
    inner join category c on c.categoryid=m.categoryid and c.categoryid=@category
    inner join inventorydepartment d on c.inventorydepartment=@department 
```

在计算方差时，我似乎无法使用 qtyout 或拥有。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:06:28.827

您还可以使用表变量，然后像您在上面尝试做的那样引用该表变量......这是[MSDN中的一个示例](http://msdn.microsoft.com/en-us/library/ms188927.aspx)

```
USE AdventureWorks2012;
GO
DECLARE @MyTableVar table(
    EmpID int NOT NULL,
    OldVacationHours int,
    NewVacationHours int,
    ModifiedDate datetime);
UPDATE TOP (10) HumanResources.Employee
SET VacationHours = VacationHours * 1.25,
    ModifiedDate = GETDATE() 
OUTPUT inserted.BusinessEntityID,
       deleted.VacationHours,
       inserted.VacationHours,
       inserted.ModifiedDate
INTO @MyTableVar;
--Display the result set of the table variable.
SELECT EmpID, OldVacationHours, NewVacationHours, ModifiedDate
FROM @MyTableVar;
GO
--Display the result set of the table.
SELECT TOP (10) BusinessEntityID, VacationHours, ModifiedDate
FROM HumanResources.Employee;
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:29:06.150

需要将您的计算字段移动到子查询中，然后在外部查询中通过它们的别名使用它们。

```
select subquery.*, -([owned]-[qtyout]) as [Variance]
from
(
    select c.category as [category],c.orderby as [CatOrder], m.masterno, m.master
    ,-- select OUT (select count(*) from    rentalitem       ri  with (nolock), 
                rentalitemstatus ris with (nolock), 
                rentalstatus     rs  with (nolock)
        where   ri.rentalitemid    = ris.rentalitemid
                and   ris.rentalstatusid = rs.rentalstatusid
                and   ri.masterid        = m.masterid
                and   rs.statustype     in ('OUT', 'INTRANSIT', 'ONTRUCK'))  as [qtyout] 
    ,-- select OWNED owned=
    (select top 1 mwq.qty                                           
        from    masterwhqty mwq                                              
        where   mwq.masterid    = m.masterid) as [owned]

    from master m 
        inner join category c on c.categoryid=m.categoryid and c.categoryid=@category
        inner join inventorydepartment d on c.inventorydepartment=@department
) as subquery 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:29:14.507

您需要使用子查询：

```
select t.*,
       ([owned]-[qtyout]) as [Variance]
from (<something like your query here
     ) t 
```

您查询，即使没有评论，也不太有意义（`select OUT (select . . .`例如）。但是，您的问题的答案是在子查询或 CTE 中定义基本变量，然后随后使用它们。

而且，您将差异称为“差异”。正如您所知，您正在重新定义该术语的统计含义（[http://en.wikipedia.org/wiki/Variance](http://en.wikipedia.org/wiki/Variance)），它基于差异的平方。

# c# - 客户端生成的 ID，PK 是带有父级的复合键。NHibernate 不高兴。备择方案？

> ID：15773596
> 
> 赞同：0
> 
> 时间：2013-04-02T20:19:13.800
> 
> 标签：c#, nhibernate, nhibernate-mapping, composite-key

我正在开发一个将数据传回数据库的客户端应用程序。客户端可以创建 PlaylistItem 类型的对象。在创建 PlaylistItem 时，我不会等待数据库以生成的 ID 进行响应。相反，我让客户端生成 ID，但将 PlaylistItem 写入数据库，PK 为 { PlaylistID, PlaylistItemID }。PlaylistID 由服务器生成。[在与 Jon Skeet 讨论了一下之后，我采用了这种方法](https://stackoverflow.com/questions/14613584/can-a-client-ever-reliably-generate-a-pk-for-an-object-being-written-to-a-db)

现在，我正试图让 NHibernate 中的事情发生变化，但我遇到了一些非常严重的问题。我读到的所有资源都在说，“NHibernate 强烈反对使用复合键。只有在你使用遗留数据库时才使用它们。” 我不是在处理遗留数据库，所以我认为我应该做出改变。但是，我不知道在这种情况下我的替代方案是什么。

这是 PlaylistItem 的 NHibernate 映射和对应的类：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Streamus" namespace="Streamus.Backend.Domain">

  <class name="PlaylistItem" table="[PlaylistItems]" lazy="false" >
    <composite-id>
      <key-property name="Id" />
      <key-property name="PlaylistId"/>
    </composite-id>

    <property name="Title" not-null="true" />

    <many-to-one name="Playlist" column="PlaylistId"/>
  </class>

</hibernate-mapping>

[DataContract]
public class PlaylistItem
{
    [DataMember(Name = "playlistId")]
    public Guid PlaylistId
    {
        get { return Playlist.Id; }
        set { Playlist.Id = value; }
    }

    public Playlist Playlist { get; set; }

    [DataMember(Name = "id")]
    public Guid Id { get; set; }

    //  Store Title on PlaylistItem as well as on Video because user might want to rename PlaylistItem.
    [DataMember(Name = "title")]
    public string Title { get; set; }

    public PlaylistItem()
    {
        //  Id shall be generated by the client. This is OK because it is composite key with 
        //  PlaylistId which is generated by the server. 
        Id = Guid.Empty;
        Title = string.Empty;
    }

    private int? _oldHashCode;
    public override int GetHashCode()
    {
        // Once we have a hash code we'll never change it
        if (_oldHashCode.HasValue)
            return _oldHashCode.Value;

        bool thisIsTransient = Equals(Id, Guid.Empty);

        // When this instance is transient, we use the base GetHashCode()
        // and remember it, so an instance can NEVER change its hash code.
        if (thisIsTransient)
        {
            _oldHashCode = base.GetHashCode();
            return _oldHashCode.Value;
        }
        return Id.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        PlaylistItem other = obj as PlaylistItem;
        if (other == null)
            return false;

        // handle the case of comparing two NEW objects
        bool otherIsTransient = Equals(other.Id, Guid.Empty);
        bool thisIsTransient = Equals(Id, Guid.Empty);
        if (otherIsTransient && thisIsTransient)
            return ReferenceEquals(other, this);

        return other.Id.Equals(Id);
    }
} 
```

NHibernate 抛出异常并显示错误消息“Invalid index n for this SqlParameterCollection with Count=n”。我知道当 hbm.xml 文件中有重复声明时会出现这种情况。据我了解，这是因为我将 PlaylistId 定义为键属性，并且再次以多对一关系定义。

我在这里有什么选择？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:02:01.460

您可以使用 a`key-many-to-one`而不是`key-property`，即

```
<class name="PlaylistItem" table="[PlaylistItems]" lazy="false" >
  <composite-id>
    <key-property name="Id" />
    <key-many-to-one name="Playlist" column="PlaylistId"/>
  </composite-id>

  <property name="Title" not-null="true" />

</class> 
```

然后你的课看起来像......

```
[DataContract]
public class PlaylistItem
{
  // Your composite key...
  [DataMember(Name = "id")]
  public Guid Id { get; set; }    
  public Playlist Playlist { get; set; }

  //  Store Title on PlaylistItem as well as on Video because user might want to rename PlaylistItem.
  [DataMember(Name = "title")]
  public string Title { get; set; }

  // rest of class...
} 
```

# css - 在浏览器调整大小时防止图像环绕（移动）

> ID：15773597
> 
> 赞同：0
> 
> 时间：2013-04-02T20:19:14.030
> 
> 标签：css, css-float, positioning

在我的主页上，我有一个在浏览器调整大小时移动或环绕的图像。我只想更改它，以便在浏览器很小的情况下从右侧剪切图像。

我尝试了几件事无济于事：

1.  移除 div id 上的 float`right`和 on 上的相对定位`right-image`

2.  尝试最小宽度为 div id`right`

3.  以百分比给出高度，宽度

4.  添加了视口设置。

在模板中，图像被放置在`main`类似的外部：

```
<body>
    <div id = "main"> 
        <div id = "left">
            <div id="left-title">Tag Line</div>
            <div id="left-blurb">
                 Some blurb
            </div>
        <div id='left-signup'> SignUp! button</div>
    </div>

    <div id = "right">
        <div id = "right-image"></div>     <--- Image
    </div>

</body> 
```

相关的CSS：

```
body    {
    margin: 0 auto;
    height: auto;
    overflow-x: hidden;
}
#main   {
    float: center;
    width: 950px;
    overflow: visible;
    height: auto;
    margin: 0 auto;
}
#left {
    float: left;
    width: 500px;
    display: inline-block;
}
#left-title {
    font-size: 3.4em;
    margin: 25px 0px 20px 15px;
}
#left-blurb {
    margin: 0px 20px 10px 15px;
}
#left-signup {
    margin: 0px 0px 0px 90px;
}
#right {
    float: right;
    width: 600px;
    height: 400px;
    margin-top: -10px;
    display: inline-block;
}
#right-image {
    height: 100%;
    width: 100%;
    position: relative; 
    left: -50px; 
    top: 0px; 
    background: url(my_photo.jpg) no-repeat;
    -moz-background-size: cover;
    background-size: cover;
    z-index: 0;
} 
```

我认为这是与问题相关的css。但如果还不够，我说的网站是[https://www.mathnuggets.com](https://www.mathnuggets.com)

将欣赏任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:26:01.913

当您的文档大小小于一定数量的像素时，您可以添加媒体查询以将其从文档中删除。

```
@media screen and (max-width:480px) {
    #right-image{
       display: none;
     }
} 
```

否则，您也可以使用相同的方法调整其位置，只需根据窗口大小调整其位置即可。我在您的代码中看到的问题是您使用了 -10px 边距，这导致它与您的其他元素重叠，因此您可以简单地针对某些视口大小进行更改。

此外，您可能需要考虑将您的大小调整方法从使用像素的绝对值改为使用百分比，以便您的图像可以随着视口的变化而稍微弯曲。

这个网站有很多很棒的资源，我认为可以帮助您使用现有的设计，以便它可以根据需要更具响应性：http: [//blog.teamtreehouse.com/beginners-guide-to-responsive-web-design](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:30:51.260

如果你使用

```
position: absolute; 
```

对于 ID=right div，它永远不会低于 left div

# jquery - jQuery表格行选择设置选定值

> ID：15773603
> 
> 赞同：0
> 
> 时间：2013-04-02T20:19:34.370
> 
> 标签：jquery

我有一个表，其中有一个名为 .tablesorter-filter 的类，第 5 行我想设置选择框的选定值而不是输入框。我怎样才能做到这一点？

```
$('.tablesorter-filter').eq(0).val('e'+d.id);
$('.tablesorter-filter').eq(1).val(d.tm_entry);
$('.tablesorter-filter').eq(2).val(d.loc_city);
$('.tablesorter-filter').eq(3).val(d.loc_state);
$('.tablesorter-filter').eq(4).val(d.loc_zip);
$('.tablesorter-filter').eq(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:23:14.940

### 重要但不是答案：

请不要一遍又一遍地使用类选择器。像那样不断地查询 DOM 很糟糕，而且真的很慢。请做：

```
var $myNode = $('.tablesorter-filter');
$myNode.eq(0).val('e'+d.id);
$myNode.eq(1).val(d.tm_entry);
$myNode.eq(2).val(d.loc_city);
$myNode.eq(3).val(d.loc_state);
$myNode.eq(4).val(d.loc_zip);
$myNode.eq(5); 
```

### 答案：

选择框将作为正常输入工作，因此您可以这样做

```
$("#yourselect").val(yourval) 
```

它应该自动选择您的值。

所以假设 $myNode.eq(5) 是你的选择，你可以这样做：

```
 $myNode.eq(5).val(d.selectval); 
```

小提琴：http: [//jsfiddle.net/vApqq/](http://jsfiddle.net/vApqq/)

# sql - SQL添加日期范围帮助请

> ID：15773610
> 
> 赞同：0
> 
> 时间：2013-04-02T20:20:04.587
> 
> 标签：sql, delphi

我正在使用

```
 Select Customer.QuoteID, Quote.QuoteID
    From Customer, Quote
   Where Customer.QuoteID=Quote.QuoteID
Order By Quote.QuoteID 
```

然后我想指定一个日期范围 (Quote.CreationDate) 或至少显示大于 2013 年 3 月 31 日的日期，但我不确定如何添加它？

我希望最终在 Delphi 中使用一个对话框来选择日期范围......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:24:54.787

要按日期范围限制，您可以执行以下操作：

```
Select Customer.QuoteID, Quote.QuoteID 
From Customer, Quote 
Where Customer.QuoteID = Quote.QuoteID 
  and Quote.CreationDate between :date_from and :date_to
Order By Quote.QuoteID 
```

您的日期参数`:date_from`在哪里？`:date_to`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:23:49.233

您可以将这些添加到 where 子句中：

```
Select Customer.QuoteID, Quote.QuoteID
From Customer, Quote
Where Customer.QuoteID=Quote.QuoteID
  And Quote.CreationDate > '2013-03-31'
Order By Quote.QuoteID 
```

这里是标准的 ANSI 连接语法，通常是首选的，在这种情况下我发现它更容易阅读：

```
Select Customer.QuoteID, Quote.QuoteID
From Customer
Inner Join Quote On Customer.QuoteID = Quote.QuoteID
Where Quote.CreationDate > '2013-03-31'
Order By Quote.QuoteID 
```

或者，如果您正在寻找两个日期之间的范围：

```
Select Customer.QuoteID, Quote.QuoteID
From Customer
Inner Join Quote On Customer.QuoteID = Quote.QuoteID
Where Quote.CreationDate >= '2013-03-31' 
  AND Quote.CreationDate <= '2013-04-02'
Order By Quote.QuoteID 
```

最后，在某些 RDBMS 平台上，您也可以使用[`BETWEEN`运算符](http://msdn.microsoft.com/en-us/library/ms187922.aspx)，但我上一个示例中的语法将始终有效。

# image - simplepie：在多页进纸页面中使用我自己的缩略图

> ID：15773612
> 
> 赞同：1
> 
> 时间：2013-04-02T20:20:29.843
> 
> 标签：image, feed, simplepie

我一直在到处寻找，但没有找到问题的答案：如何在多页进纸页面中使用我自己的缩略图？如果我忽略了答案，那将是由于我提前道歉的错误搜索键。

到目前为止，我有以下代码（不多）：

```
<?php
include_once('autoloader.php');
include_once('idn/idna_convert.class.php');

date_default_timezone_set('Europe/Amsterdam');
setlocale(LC_TIME, 'nld_nld');

$feed = new SimplePie();
$urls = (array(
    'http://myfeedurla.com' => 'descriptiona', 
    'http://myfeedurlb.com' => 'descriptionb',
    'http://myfeedurlc.com' => 'descriptionc'
    ));
$feed->set_feed_url(array_keys($urls)); // this should get parse only the URLS
$feed->set_cache_location('cache/');
$feed->init();

$feed->handle_content_type();
?>

// As from here I'm using the standard simplepie code to show multiple feeds and order them by day

      <?php

      // Set up some variables we'll use.
      $stored_date = '';
      $list_open = false;

      // Go through all of the items in the feed
      foreach ($feed->get_items() as $item) 
      {
        // What is the date of the current feed item?
        $item_date = $item->get_date('M jS');

        // Is the item's date the same as what is already stored?
        // - Yes? Don't display it again because we've already displayed it for this date.
        // - No? So we have something different.  We should display that.
        if ($stored_date != $item_date)
        {
            // If there was already a list open from a previous iteration of the loop, close it
            if ($list_open)
            {
                echo '</ol>' . "\r\n";
            }

            // Since they're different, let's replace the old stored date with the new one
            $stored_date = $item_date;

            // Display it on the page, and start a new list
            echo '<h1>' . $item->get_local_date('%A %d %B %Y') . '</h1><hr>' . "\r\n";
            echo '<ol>' . "\r\n";

            // Let the next loop know that a list is already open, so that it will know to close it.
            $list_open = true;
        }

        // Display the feed item however you want...
        echo '<li>' . $item->get_local_date('%H:%M') . ' | <h4><a href="' . $item->get_permalink() . '">' . $item->get_title() . '</a></h4></li>' . "\r\n";
      }
      ?> 
```

我想在 HTML 中的某处添加 'img scr=" . . "' 等。它应该只引用名称为 'descriptiona'.png 和 'descriptionb'.png 等的图像，每个提要。这可能吗？如果是，如何？

如果我应该更清楚，请不要犹豫。在此先感谢您的帮助！此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:13:23.923

好的，到目前为止我有一个解决方案 :) 我在 img 文件名中使用各个提要的标题。我添加了以下代码：

```
<img src="images/' . $item->get_feed()->get_title() . '.png" width="12" height="12" /> 
```

现在我只希望提要不会在他们的标题中使用 / 或其他东西......如果有人有更好的方法来做到这一点，例如。通过能够为每个提要添加个人标题，这将是非常受欢迎的。

# c# - 管理任务列表

> ID：15773613
> 
> 赞同：2
> 
> 时间：2013-04-02T20:20:32.400
> 
> 标签：c#, .net, visual-studio-2012

我想创建一个通用任务列表。此列表可能适用于一个或多个 C# 文件。我希望我可以创建一个 Readme.txt 并拥有：

```
//TODO: Controller/Action1 and Controller/Action2 should have input that looks like a div
//TODO: Some funky thing
//TODO: blah 
```

但是，“任务列表”窗口不会发现这一点。相反，我有一个`generalNotes.cs`包含各种 TODO 列表的文件。这样我就可以在我的任务列表窗口中看到结果。把它放到一个空`.cs`文件中感觉有点傻。是否有任何内置支持来跟踪一般任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:31:22.580

> 是否有任何内置支持来跟踪一般任务？

我不知道是否有通用的方法，但是如果您想继续在项目中使用文本文件：

1.  右键单击您的任务文本文件
2.  选择属性
3.  在“构建操作”下拉列表中选择“编译”

您`TODOs`现在将出现在“评论”下拉菜单下的任务列表中。

编辑添加：这适用于 VS2012 Ultimate。其他版本，YMMV。

# html - 在编写响应式设计时，为同一页面元素使用多个标记是否被认为是可接受的做法？

> ID：15773618
> 
> 赞同：2
> 
> 时间：2013-04-02T20:21:03.450
> 
> 标签：html, css, responsive-design, media-queries

我正在编写一个响应式设计，它具有基于屏幕分辨率的几种不同导航布局（ps 我无法控制我工作的设计决策）。

我发现仅通过 CSS 更改来实现不同的布局非常困难。但我也不喜欢在许多地方为相同元素使用重复标记的想法，因为这看起来很丑陋，因为原因或维护以及可能对 SEO 产生不良影响（尽管除了默认值之外的所有内容都将设置为在页面加载时不显示） .

无论如何，对此有何想法？这样做是否非常违反良好做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:27:31.990

是的，这样做完全没问题，请确保将媒体查询放在 CSS 的底部，以便最后加载这些样式，在我看来，您可以做的最聪明的事情是使用带有行和列的网格系统和然后说当您进行媒体查询时，您可以只显示所有列的宽度和 100%，这将堆叠您使用的每个 div，然后是的，对于您的导航，您需要为媒体查询重写一些元素类和 id，但是在移动版本上使用网格并使列的宽度为 100%。

这是我构建的网格简单网格系统，您可以看到我将如何进行导航，

```
/* GRID */

*,*:before,*:after {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.layout-row {
    margin: 0 auto;
    width: 96em;

    zoom: 1;
}
.layout-row .layout-row { width: auto;}

.layout-row:before, .layout-row:after {
    display: block;
    visibility: hidden;
    height: 0;
    content: "\0020";    
}

.layout-row:after { clear: both;}

.layout-column {
    position: relative;
    display: inline;
    float: left;
    padding: 1em ;
}

.layout-column .layout-column { padding: 0;}

.one { width: 8.33333%;}

.two { width: 16.66667%;}

.three { width: 25%;}

.four { width: 33.33333%;}

.five { width: 41.66667%;}

.six { width: 50%;}

.seven { width: 58.33333%;}

.eight { width: 66.66667%;}

.nine { width: 75%;}

.ten { width: 83.33333%;}

.eleven { width: 91.66667%;}

.twelve { width: 100%;}

/* MODULES */

.layout-navigation { margin: -2em 0 0;}

.layout-navigation li {
    float: left;
    padding: 3em .75em .5em;
    text-align: center;
}

/* MOBILE MEDIA QUERY */

@media only screen and (max-width: 480px) {

.layout-row { width: 48em;}

.layout-column { width: 100%;}

.hide-mobile { display: none;}

.layout-navigation li {
    float: none;
    padding: 1em;
    background: #F3F3F3;
    text-align: left;
}
} 
```

# java - Java webapps 安全约束和自定义安全提供程序

> ID：15773619
> 
> 赞同：0
> 
> 时间：2013-04-02T20:21:08.630
> 
> 标签：java, tomcat, jax-rs, resteasy

我正在使用 Resteasy 创建一个宁静的 Web 服务。我需要做的一件事是使用标准 HTTP 身份验证请求来保护服务。棘手的部分是该服务是多租户的，需要使用其中一个路径参数来确定安全领域。

此链接有很多[典型的](http://java.dzone.com/articles/understanding-web-security)文章描述了设置单租户服务。我找不到的是要配置什么，以及要实现哪些接口来描述我自己的安全性，它基于路径参数 + HTTP 身份验证方法中的用户名。

我设想在调用任何应用程序逻辑之前，tomcat/resteasy 将使用 HttpServletRequest 调用 SecurityProvider（或其他）接口，并让我抛出 401 或返回传递给 JAX-RS 处理程序的 SecurityContext。在该例程中，我将检查路径参数，并根据 Basic/Digest/Form 中给出的参数+用户名+密码进行确定。

有这样的野兽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:26:08.783

我想我会更新这个，因为关于这个问题的活动很少。

看起来没有内置功能可以执行我的设想，因此我扩展了 RestEasy servlet 并在我的覆盖中添加了安全检查，然后将控制权交还给普通的 RestEasy servlet。

似乎运作良好。

# java - Jpanels 未按定义的大小显示

> ID：15773624
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:21:34.870
> 
> 标签：java, swing, layout, jpanel, layout-manager

您好，在尝试构建我的 Java GUI 时，我一直遇到 JPanel 不断调整大小的问题，或者它们只是显示为折叠的小方块。我使用 setSize() 方法定义了每个 JPanel 的大小。

这就是我得到的

![输出](https://i.stack.imgur.com/zCo5Q.png)

这更多的是我想要构建的

![小样](https://i.stack.imgur.com/WemsU.png)

这是我的代码。我想我的问题是如何阻止 JPanel 调整大小并坚持由 setSize() 方法定义的宽度。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.InetAddress;
import javaQuery.j2ee.GeoLocation;

import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class iPerf extends JFrame implements ActionListener{

private static final int JFrame_W = 437;
private static final int JFrame_H = 586;
private static final int titlePanel_W = 437;
private static final int titlePanel_H = 46;
private static final int locationPanel_W = 437;
private static final int locationPanel_H = 46;
private static final int buttonPanel_W = 437;
private static final int buttonPanel_H = 47;
private static final int resultsPanel_W = 437;
private static final int resultsPanel_H = 444;
private static final int outputPanel_W = 371;
private static final int outputPanel_H = 172;
JPanel titlePanel = new JPanel();
JPanel locationPanel = new JPanel();
JPanel buttonPanel = new JPanel();
JPanel resultsPanel = new JPanel();
JPanel pingResultsPanel = new JPanel();
JPanel iperfResultsPanel = new JPanel();

JLabel iperfTitle = new JLabel("iPerf");
JLabel cityTitleLabel =  new JLabel("City");
JLabel cityResultLabel = new JLabel("");
JLabel countryTitleLabel =  new JLabel("Country");
JLabel countryResultLabel = new JLabel("");
JLabel latitudeTitleLabel =  new JLabel("Latitude");
JLabel latitudeResultLabel = new JLabel("");
JLabel longitudeTitleLabel =  new JLabel("Longitude");
JLabel longitudeResultLabel = new JLabel("");

JScrollPane pingResultsScrollPane = new JScrollPane();
JScrollPane iPerfResultsScrollPane = new JScrollPane();

String results;
JTextArea label = new JTextArea(results);

JButton runButton = new JButton("Run iPerf");

public static void main(String[] args){
    iPerf w = new iPerf( );
    w.setVisible(true);
    w.setResizable(false);
    w.setExtendedState(JFrame.MAXIMIZED_BOTH);

}

public iPerf() {
    super();
    setSize(JFrame_W, JFrame_H);
    setTitle("iPerf"); 
    setLayout(new  FlowLayout());
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Title Panel
    titlePanel.setSize(titlePanel_W, titlePanel_H);
    titlePanel.setBackground(Color.darkGray);
    titlePanel.add(iperfTitle);
    add(titlePanel);

    //Location Panel
    locationPanel.setSize(locationPanel_W, locationPanel_H);
    locationPanel.setBackground(Color.LIGHT_GRAY);
    locationPanel.setLayout(new GridLayout(2, 4));
    locationPanel.add(cityTitleLabel);
    locationPanel.add(countryTitleLabel);
    locationPanel.add(latitudeTitleLabel);
    locationPanel.add(longitudeTitleLabel);
    locationPanel.add(cityResultLabel);
    locationPanel.add(countryResultLabel);
    locationPanel.add(latitudeResultLabel);
    locationPanel.add(longitudeResultLabel);
    add(locationPanel);

    //Button Panel
    buttonPanel.setSize(buttonPanel_W, buttonPanel_H);
    buttonPanel.setBackground(Color.LIGHT_GRAY);
    buttonPanel.setLayout(new FlowLayout());
    runButton.addActionListener(this);
    buttonPanel.add(runButton);
    add(buttonPanel);

    //Results Panel
    resultsPanel.setSize(resultsPanel_W, resultsPanel_H);
    resultsPanel.setBackground(Color.darkGray);
    resultsPanel.setLayout(new FlowLayout());
    pingResultsPanel.setSize(outputPanel_W, outputPanel_H);
    pingResultsPanel.setBackground(Color.WHITE);
    pingResultsPanel.setLayout(new FlowLayout());
    iperfResultsPanel.setSize(outputPanel_W, outputPanel_H);
    iperfResultsPanel.setBackground(Color.WHITE);
    iperfResultsPanel.setLayout(new FlowLayout());
    iPerfResultsScrollPane.setViewportView(label);
    iperfResultsPanel.add(iPerfResultsScrollPane);

    resultsPanel.add(pingResultsPanel);
    resultsPanel.add(iperfResultsPanel);
    add(resultsPanel);

    }

public void actionPerformed(ActionEvent e) {
    String buttonString = e.getActionCommand();

    if (buttonString.equals("Run iPerf")) {
        System.out.println(buttonString + "it works!");

        runIperfEastTCP iperfEastTCPThread = new runIperfEastTCP();
        getLocation locationThread = new getLocation();
        runPing pingThread = new runPing();

        iperfEastTCPThread.start();
        locationThread.start();
        pingThread.start();
    }
}

private class runPing extends Thread {
    public void run() {
        try {
            String line;
            Process p = Runtime.getRuntime().exec("/sbin/ping -c 4 www.google.com");
            BufferedReader input = new BufferedReader(
                new InputStreamReader(p.getInputStream()));

            while ((line = input.readLine()) != null) {
                results += line + "\n";
                label.setText(results);
                System.out.println(line);
            }

            input.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

private class runIperfEastTCP extends Thread {
    public void run() {
        try {
            String line = "";
            Process p;

            p = Runtime.getRuntime().exec("/usr/local/bin/iperf -c 184.72.222.65 -p 5001 -w 64k -P 4 -i 1 -t 10 -f k");
            BufferedReader input = new BufferedReader(
                    new InputStreamReader(p.getInputStream()));

            while ((line = input.readLine()) != null) {
                results += line + "\n";
                label.setText(results);
                System.out.println(line);
            }

            input.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

private class getLocation extends Thread {
    public void run() {
        try {
            InetAddress thisIP = InetAddress.getLocalHost();

            GeoLocation _gl = new GeoLocation();

            _gl.GetGeoLocation(thisIP);
            String IP = _gl.IP;
            String Country = _gl.Country;
            String City = _gl.City;
            String Latitude = _gl.Latitude;
            String Longitude = _gl.Longitude;

            cityResultLabel.setText(City);
            countryResultLabel.setText(Country);
            latitudeResultLabel.setText(Latitude);
            longitudeResultLabel.setText(Longitude);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:29:09.163

1.  不要调用`setSize(...)`任何组件。
2.  `getPreferredSize()`如果您绝对需要设置大小，请考虑覆盖，但要*非常*谨慎地使用它。
3.  您没有正确使用布局管理器。阅读布局管理器教程，因为它将解释并显示您需要知道的所有内容。
4.  您需要`pack()`在将所有组件添加到 JFrame 之后并将其设置为可见或定位它之前调用您的 JFrame。

例如，您可以...

*   考虑使用 BoxLayout 作为整体结构
*   顶部可以使用文本居中的 JLabel。
*   JLabels 和 JButton 的下一部分可以使用 BorderLayout
*   BorderLayout 可以容纳在 BorderLayout.CENTER 位置包含四个标签/字段的 JPanel，
*   同样的 JPanel 可以使用 GridBagLayout。
*   持有 JButton 的 JPanel 可以使用 FlowLayout 并位于使用 JPanel 的 BorderLayout 的 BorderLayout.SOUTH 或 PAGE_END 位置。
*   接下来 JPanel 可以使用带有边框和间隙的 GridLayout。
*   ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:28:18.083

尝试使用另一个 LayoutManager，例如 GridLayout。

# xml - XSLT 命名空间前缀引发处理器错误

> ID：15773630
> 
> 赞同：1
> 
> 时间：2013-04-02T20:21:52.837
> 
> 标签：xml, xslt

我正在尝试组合一些 XML 文件并将它们之间的命名空间分开，并且遇到了一些问题。我能够在 SO 上找到的所有内容看起来都像这样（XSLT）：

```
<xsl:for-each select="sbn:fieldName">
   <xsl:element name="sbn:{name()}">
      <xsl:value-of select="text()"/>
   </xsl:element>
</xsl:for-each> 
```

我想`sbn:`在输出中保留命名空间前缀，这有效（至少，它显示在结果文档中），但尽管如此，处理器还是抛出了一堆`sbn:`无效元素名称的警告......尽管事实上元素名称实际上在输出中正确结束为`sbn:fieldName`.

还有其他方法可以做到这一点吗？我不想`xmlns`在每个元素上都有这个属性。我使用 Oxygen 和 Saxon6.5.5 作为处理器，尽管在我尝试过的所有其他处理器（Xalan 和 libxslt Mac 命令行版本）上都会遇到相同的错误。

（你可能会问：如果输出没问题，我为什么要关心？问得好！我现在在 Oxygen 中对一个小文件运行转换，但目标是转换一个百万行的 XML 文件并从使用命令行，`xsltproc`这样我就没有氧气的内存开销，因为我需要所有我能得到的内存来运行转换。）

**编辑**：更多细节。

这是我正在尝试处理的文件的精简版本。

```
<collection xmlns="http://www.example.com/ns/foo">
    <record>
        <fieldName>
            <subA>some text</subA>
            <subB>more text</subB>
        </fieldName>
    </record>
</collection> 
```

以及样式表的精简版本，显示了问题。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:sbn="http://www.example.com/ns/foo"
   xmlns:bar="http://www.example.com/ns/bar"
   version="1.0">

   <xsl:template match="//sbn:record">
    <xsl:for-each select="sbn:fieldName/node()">
       <xsl:element name="sbn:{local-name()}">
          <xsl:value-of select="text()"/>
       </xsl:element>
    </xsl:for-each>
   </xsl:template>

</xsl:stylesheet> 
```

这给出了 xsltproc 错误：`runtime error: file tiny.xslt line 8 element element xsl:element: The effective name 'sbn:' is not a valid QName.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:28:24.673

我认为问题在于您正在使用`sbn:fieldName/node()`- 它也匹配没有名称的文本节点 - 因此出现错误。

这对我有用：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:sbn="http://www.example.com/ns/foo"
   xmlns:bar="http://www.example.com/ns/bar"
   version="1.0">

   <xsl:template match="//sbn:record">
    <xsl:for-each select="sbn:fieldName/*">
       <xsl:element name="{name()}" namespace="{namespace-uri()}">
          <xsl:value-of select="text()"/>
       </xsl:element>
    </xsl:for-each>
   </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:46:41.827

该函数返回*带有前缀*`name()`的节点的名称，因此在这种情况下计算结果为。相反，如果要确保在输出中使用前缀，则应该使用它：*`sbn:{name()}``sbn:sbn:fieldName``sbn:`*

 *```
<xsl:element name="sbn:{local-name()}"> 
```

或以下任一项，如果您想重用输入中使用的任何前缀：

```
<xsl:element name="{name()}"> 
```

或者

```
<xsl:copy>
  <!-- (Whatever content you want) -->
</xsl:copy> 
```*

# gnuplot - gnuplot：3d 绘制电磁波函数

> ID：15773632
> 
> 赞同：0
> 
> 时间：2013-04-02T20:21:58.233
> 
> 标签：gnuplot

可以用gnuplot做到这一点吗？这张图片上的东西（链接）

[http://i.stack.imgur.com/mZ3M0.gif](http://i.stack.imgur.com/mZ3M0.gif)

我似乎无法独立设置 x = sin(y) 和 z = sin(y)。寻求帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:56:14.943

是的！你很幸运，我上周发现了这一点。这是我使用的 gnuplot 代码：

```
#!/usr/bin/env gnuplot

reset

set term png lw 2
set out 'test.png'

set style data lines

# Set x,y,z ranges
set xr [0:10]
set yr [-2:2]
set zr [-2:2]

# Rotates so that plots have a nice orientation.
# To get parameters, plot in interactive terminal and use 'show view' command.
set view 45,30,1,1

set arrow from 0,0,0 to 10,0,0

unset border
unset tics

splot '+' u 1:(0):(sin($1))  t 'E', \
      '+' u 1:(-sin($1)):(0) t 'B' 
```

这是我得到的数字：

![在此处输入图像描述](https://i.stack.imgur.com/cQyEj.png)

我没有标签，但您可以使用`set label`更多箭头来重现您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:05:31.863

您还可以参数化地定义这样的曲线：

```
set parametric
splot u,0,sin(u) title 'E',\
      u,-sin(u),0 title 'B' 
```

请注意，`u`here 并不是`using`您经常看到的简写。 `u`是 gnuplot 在参数“s”绘图中使用的虚拟变量。

# php - 如何使用 PHP 包装器在 kendoui 中嵌套小部件？

> ID：15773633
> 
> 赞同：0
> 
> 时间：2013-04-02T20:21:59.803
> 
> 标签：php, jquery, checkbox, treeview, kendo-ui

我编写了一个代码，以便在树视图中使用手册。

```
div id="treview-back">
<?php

$treeview = new \Kendo\UI\TreeView('treeview');

// helper function that creates TreeViewItem with imageUrl
function ImageTreeViewItem($text) {
    $item = new \Kendo\UI\TreeViewItem($text);
    return $item;
}

$msg = ImageTreeViewItem('Message');
$msg->addItem(
            ImageTreeViewItem('New Message'),
            ImageTreeViewItem('Replay')
        );    
$msg->expanded(true);
$inbox = ImageTreeViewItem('Home');
$inbox->expanded(TRUE);
$inbox->addItem($msg);

$dataSource = new \Kendo\Data\HierarchicalDataSource();

// add root-level nodes as datasource data
$dataSource->data(array($inbox));
$treeview->dataSource($dataSource);

echo $treeview->render();
?></div> 
```

我需要添加一个拆分器小部件，我该怎么做？说明书上没找到。为什么，如果我添加此代码

```
 <script type="text/javascript">$("#treeview").kendoTreeView({
    checkboxes: true
 });</script> 
```

TreeView 消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:51:09.697

代码的结构与您为`tree`.

```
<div id="outer-splitter">
    <?php
    $treeview = new \Kendo\UI\TreeView('treeview');

    // helper function that creates TreeViewItem with imageUrl
    function ImageTreeViewItem($text) {
        $item = new \Kendo\UI\TreeViewItem($text);
        return $item;
    }

    $msg = ImageTreeViewItem('Message');
    $msg->addItem(ImageTreeViewItem('New Message'), ImageTreeViewItem('Replay'));
    $msg->expanded(true);
    $inbox = ImageTreeViewItem('Home');
    $inbox->expanded(TRUE);
    $inbox->addItem($msg);

    $dataSource = new \Kendo\Data\HierarchicalDataSource();

    // add root-level nodes as datasource data
    $dataSource->data(array($inbox));
    $treeview->dataSource($dataSource);

    // Create Left Pane
    $leftPane = new \Kendo\UI\SplitterPane();
    $leftPane->attr("id", "left-pane")->collapsible(true)->size(220)->content($treeview->render());

    // Create Right Pane
    $rightPane = new \Kendo\UI\SplitterPane();
    $rightPane->attr("id", "right-pane")->collapsible(true)->size(220)->startContent();
    ?>

    <div>
        Right pane
    </div>

    <?php
    $rightPane->endContent();

    // create outer splitter
    $splitter = new \Kendo\UI\Splitter('splitter');
    $splitter->orientation("horizontal");
    $splitter->addPane($leftPane);
    $splitter->addPane($rightPane);

    echo $splitter->render();
    ?>
</div> 
```

您需要`\Kendo\UI\Splitter`用于配置`Splitter, setting its`内容`。在这里我使用：

*   `orientation`用于设置窗格的方向。`horizontal`表示它们是水平平铺的。
*   `addPane`允许您添加`\Kendo\Ui\SplitterPane`.
*   在`\Kendo\Ui\SplitterPane`中，我用于`content`在内部添加另一个小部件定义，`startContent`并`endContent`用于分隔 HTML 块的开始和结束。

[你可以在这里](http://docs.kendoui.com/getting-started/using-kendo-with/php/widgets/splitter/overview)找到非常好的信息。

您的代码使拆分器消失，因为这是使用 Kendo UI 小部件（纯 JavaScript，不使用 PHP 包装器）的不同方式，并且在那段代码中您没有定义*新*TreeView 的内容。

# magento - Oscommerce 2.3 使用 Magmi 导入 Magento 1.7 我该怎么做？

> ID：15773637
> 
> 赞同：0
> 
> 时间：2013-04-02T20:22:17.360
> 
> 标签：magento, import, export, oscommerce, magmi

我在我的域上安装了 magmi，magento 在一个文件夹中全新安装。Oscommerce 是根。我什至不知道从哪里开始 magmi！以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:24:16.087

看看这个 MAGMI WIKI 是否对您有帮助...
[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page)

# xpath - 将 XPath 与 CasperJS QuerySelectorAll 一起使用不起作用

> ID：15773640
> 
> 赞同：6
> 
> 时间：2013-04-02T20:22:27.860
> 
> 标签：xpath, css-selectors, web-scraping, casperjs, selectors-api

出于某种原因，当我尝试运行以下代码时：

```
var casper = require('casper').create(); 
var x = require('casper').selectXPath;
var links = [];

casper.start('http://www.website.com');

function getLinks() {
    var links = document.querySelectorAll(x('//*[@id="horizontalList"]/li[@class="paddingRight6"]/a');
    return Array.prototype.map.call(links, function(e) {
        return e.getAttribute('href')
    });
}

casper.then(function() {
    links = this.evaluate(getLinks);
    this.echo(links);
}

casper.run(); 
```

返回一个空对象，但是当我将相同的 xpath 选择器与 thenClick 方法结合使用时，一切正常，并且 url 发生了变化。为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T20:22:27.860

因此，事实证明 querySelectorAll 方法实际上并不支持 XPath。事实上，它根本不是来自 casperjs，而是受浏览器支持，这就是它接受 CSS3 选择器而不是 XPath 的原因。我很难弄清楚这一点，所以我想我会提出这个问题，以防其他人遇到这个问题。您必须在 casperjs 中为此使用 CSS3 选择器，因此该行：

```
var links = document.querySelectorAll(x('//*[@id="horizontalList"]/li[@class="paddingRight6"]/a'); 
```

需要改为：

```
var links = document.querySelectorAll('ul#horizontalList li.paddingRight6 a'); 
```

快乐的黑客

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T17:57:21.150

下面的函数适用于我的 Xpath。

```
function getLinks() {   
var links =__utils__.getElementsByXPath('//*[@id="horizontalList"]/li[@class="paddingRight6"]/a');
    return Array.prototype.map.call(links, function(e) {
    return e.getAttribute('href');
});
} 
```

# php - PDO MySQL INSERT 在将数据插入数据库之前删除文件扩展名

> ID：15773642
> 
> 赞同：3
> 
> 时间：2013-04-02T20:22:28.217
> 
> 标签：php, mysql, pdo

好的。我有一段时间没有使用堆栈交换，所以请耐心等待。我对此进行了详尽的研究，但找不到答案。

一般来说，我是 PDO 语句的新手，并且正在将它用于我正在开发的站点，该站点将包含一个图像上传器。现在，我有这个功能：

```
function addImage($listing_id, $location) {
    $sql = $this->connection->prepare("INSERT INTO images (listing_id, location) VALUES (?, ?)");
      $sql->execute(array($listing_id, $location));
   } 
```

现在，`$location`进入这个函数是正确的——它是一个图像位置，例如`C:\image.png`或`http://test.com/image.jpg`。在这一点上是正确的。但是，在插入时，图像扩展名将被清理，仅输入`"C:\image"`或`"http://test.com/image"`进入数据库，这当然是稍后我需要使用该信息来获取和/或修改图像时的问题。我认为这与 PDO 中的 sql 注入预防有关吗？我真的不知道。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:18:32.820

数据库字段的大小必须足够大以容纳输入的数据。IE Varchar(30) 必须足够大以保存图片的路径。无限制地尝试 Varchar。

# java - 如何在 TestNG 中重试整个测试类？

> ID：15773644
> 
> 赞同：0
> 
> 时间：2013-04-02T20:22:46.030
> 
> 标签：java, testing, testng

我有一个这样的测试用例：

```
@Listeners({RetryListener.class})
public class TestClass {
    @Test
    public void test1() throws Exception {
        //something
    }
    @Test(dependsOnMethods = "test1")
    public void test2() throws Exception {
        //something
    }
    @Test(dependsOnMethods = "test2")
    public void test3() throws Exception {
        //something
    }
} 
```

如您所见，测试存在依赖关系。一旦测试有任何问题，我想重试整个测试类。

有没有办法在 TestNG 中做到这一点？

我的`RetryListener`样子是这样的：

```
public class RetryListener extends TestListenerAdapter {

    private int count = 0;

    @Override
    public void onTestFailure(ITestResult result) {
        if (result.getMethod().getRetryAnalyzer() != null) {
            Reporter.setCurrentTestResult(result);

            if(result.getMethod().getRetryAnalyzer().retry(result)) {
                count++;
                result.setStatus(ITestResult.SKIP);
                System.out.println("Error in " + result.getName() + " with status "
                        + result.getStatus()+ " Retrying " + count + " of 3 times");
                System.out.println("Setting test run attempt status to Skipped");
            } else {
                count = 0;
                System.out.println("Retry limit exceeded for " + result.getName());
            }

            Reporter.setCurrentTestResult(null);
        }
    }

    @Override
    public void onTestSuccess(ITestResult result) {
        count = 0;
    }
} 
```

# iphone - 触摸时更改详细信息披露指示器图像

> ID：15773647
> 
> 赞同：2
> 
> 时间：2013-04-02T20:23:04.400
> 
> 标签：iphone, ios, objective-c, uitableview

`UITableViewCellAccessoryDetailDisclosureButton`是否可以通过触摸更改图像？

我想让我在 tableView 中的行有一个空圆圈来代替详细信息披露按钮。当我点击这个空圆圈按钮时，我想用另一个包含复选标记的图像更改空圆圈的图像。然后在大约半秒的延迟后，我想用`-accessoryButtonTappedForRowWithIndexPath`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:52:14.057

那么首先你必须将你的单元格的accessoriesView设置为一个自定义的UIView，可能是一个UIButton......

```
UIImage *uncheckedImage = [UIImage imageNamed:@"Unchecked.png"];
UIImage *checkedImage = [UIImage imageNamed:@"Checked.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(44.0, 44.0, image.size.width, image.size.height);
[button addTarget:self action:@selector(tapButton:) forControlEvents:UIControlEventTouchUpInside];
[button setImage:uncheckedImage forState:UIControlStateNormal];
[button setImage:checkedImage forState:UIControlStateSelected];
cell.accessoryView = button; 
```

在您的 tapButton: 方法中，您希望对图像应用必要的更改并执行附件ButtonTappedAtIndexPath。我会避免延迟，或者您可以使用调度计时器...

```
- (void)tapButton:(UIButton *)button {
  [button setSelected:!button.selected];
  UITableViewCell *cell = [button superview];
  NSIndexPath *indexPath = [tableView indexPathForCell:cell];
  [self tableView:tableView accessoryButtonTappedForRowWithIndexPath:indexPath];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:46:01.807

根据您的评论，您已经在创建自己的按钮并将其设置为单元格的`accessoryView`.

创建按钮时，将其选定状态的图像设置为您的复选标记图像：

```
[button setImage:checkmarkImage forState:UIControlStateSelected]; 
```

点击按钮时，将其状态设置为选中，以便显示复选标记：

```
- (IBAction)buttonWasTapped:(id)sender event:(UIEvent *)event {
    UIButton *button = sender;
    button.selected = YES; 
```

然后，禁用用户交互，以便用户在延迟期间不能做任何其他事情：

```
 [[UIApplication sharedApplication] beginIgnoringInteractionEvents]; 
```

获取包含被触摸按钮的单元格的索引路径：

```
 UITouch *touch = [[event touchesForView:button] anyObject];
    NSIndexPath *indexPath = [tableView indexPathForRowAtPoint:
        [touch locationInView:tableView]]; 
```

最后，安排一个块在延迟后运行。在该块中，重新启用用户交互并向自己发送一条包含索引路径的消息：

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.5 * NSEC_PER_SEC),
        dispatch_get_main_queue(),
    ^{
        [[UIApplication sharedApplication] endIgnoringInteractionEvents];
        [self accessoryButtonTappedForRowAtIndexPath:indexPath];
    });
} 
```

# ant - 最终的 JUnit/Parallel/ANT 问题

> ID：15773648
> 
> 赞同：2
> 
> 时间：2013-04-02T20:23:09.997
> 
> 标签：ant, junit, parallel-processing, junit4

考虑到 Test1.java 和 Test2.java 内部有一个测试方法，通过 ANT 并行运行 Test1.java 和 Test2.java 的最简洁方法是什么。如果场景是一个具有多种测试方法的类怎么办？如何动态选择要执行的那些？并为所有执行的事情提供报告。我到处都看到了这一点，但还没有看到指向这些问题的可靠答案。

# api - 是否有返回指定作者的所有评论的 WordPress API 或提要？

> ID：15773650
> 
> 赞同：1
> 
> 时间：2013-04-02T20:23:15.953
> 
> 标签：api, wordpress

我正在寻找一种方法来访问由特定用户撰写的所有评论。我知道无论用户如何（[http://example.com/comments/feed/](http://example.com/comments/feed/)），所有评论都有一个提要，但是有没有办法将评论限制为某个用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:24:53.803

该`get_comments()`函数允许您传入要过滤的参数数组 - [http://codex.wordpress.org/Function_Reference/get_comments](http://codex.wordpress.org/Function_Reference/get_comments)

要获取 user_ID 1 的所有评论，您可以使用：

```
$args = array( 'ID' => 1 );
$comments = get_comments( $args ); 
```

结果将是一组符合您的搜索条件的评论对象。您可以一次使用多个过滤器，例如将用户 ID 与状态结合使用。

# perl - 取消引用传递给子例程的哈希引用

> ID：15773654
> 
> 赞同：1
> 
> 时间：2013-04-02T20:23:24.377
> 
> 标签：perl

我正在研究一些示例代码，并试图弄清楚为什么它可以与 $args 周围的括号一起使用。没有它，我就无法获得价值。

```
sub random_dice{
  my ($args) = @_;
  my $number_of_rolls = $args->{number_of_rolls} || 6;
  ...
}

# I don't understand why it works with the brackets around $args
my $r = random_dice({number_of_rolls=>5}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:27:09.353

它之所以有效，是因为您将匿名哈希传递给您的 random_dice 子例程。

```
my ($args) = @_; # sets $args as element of @_. Not as an array 
```

$args 现在是对哈希的引用

```
$args = {
   number_of_rolls => 5
}; 
```

这通常用作在 Perl 中具有命名参数的方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:30:27.060

像这样：

```
my $args = @_; 
```

赋值是在**标量上下文中**进行的，因此 $args 被赋值为 1（数组中的元素数）。

但是像这样：

```
my ($args) = @_; 
```

分配是在**列表上下文中**进行的。右侧数组中的值被解包并分配给左侧数组的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:34:10.830

如果你想使用更简单的

```
my $r = random_dice( number_of_rolls => 5 ); 
```

潜艇必须改为

```
sub random_dice{
  my %args = @_;
  my $number_of_rolls = $args{number_of_rolls} || 6;
  ...
} 
```

# javascript - 修改highslide弹出窗口的“X”关闭按钮

> ID：15773655
> 
> 赞同：0
> 
> 时间：2013-04-02T20:23:26.560
> 
> 标签：javascript, jquery, highcharts, highslide

我将 highslide 与 highcharts 结合使用，并且我想修改关闭按钮，更具体地说，我想在用户单击该“X”按钮时调用一个附加函数。

当我检查那个“X”按钮时，我在控制台中得到了这个

```
<a href="#" title="Close (esc)" onclick="return hs.close(this)"><span>Close</span></a> 
```

我想做这样的事情

```
<a href="#" title="Close (esc)" onclick="return hs.close(this);myotherfunction();"><span>Close</span></a> 
```

但我无法找到该代码的位置。

除了要手动覆盖的 highslide.config.js 之外，我还尝试将其添加到 html 文件本身的标题中，但它没有奏效。

```
hs.registerOverlay({
   html: '<div class="closebutton" onclick="return hs.close(this)" title="Close"></div>',
   position: 'top right',
   fade: 2 // fading the semi-transparent overlay looks bad in IE
}); 
```

有人可以帮帮我吗？

///////////////////////////////// 更新感谢 Jeff B，我能够使用如下所示的代码完成所需的任务（尽管 Jeff B 显示的示例也适用）：

```
cursor: 'pointer',
point: {
    events: {
        click: function(event) {
            hs.htmlExpand(null, {
                pageOrigin: {
                    x: this.pageX,
                    y: this.pageY
                },
                headingText: this.ticker,
                maincontentText: '<b>Detail:</b> ' + this.info,
                width: 250
            });

            alert('function goes here');

            hs.Expander.prototype.onBeforeClose = function(sender) {
                alert('function goes here');
            }               
        },
    }
}, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:29:41.200

为什么要修改按钮？Highslide 提供了一个`onBeforeClose`原型：

```
hs.Expander.prototype.onBeforeClose = function (sender) {
   myotherfunction();
} 
```

`onAfterClose`如果您想要不同的时间，还有一个原型。

[onBeforeClose 文档](http://highslide.com/ref/hs.Expander.prototype.onBeforeClose)

演示：http: [//jsfiddle.net/xjKFp/](http://jsfiddle.net/xjKFp/)

# python - Python，递归广度优先搜索

> ID：15773661
> 
> 赞同：2
> 
> 时间：2013-04-02T20:23:49.267
> 
> 标签：python, path-finding, breadth-first-search

我正在尝试找到网格上的最短路径（元组列表列表）到目前为止我已经得到了这个：

```
def planPath(self, x, y, goal, board):
    visited = []
    path = []
    def pathFinder(curr):
        visited.append(curr)
        neighbors = None
        if curr == goal:
            visited.append(curr)
            return curr
        neighbors = [neighbor for neighbor in curr.neighbors if type(neighbor) is not Land.Water and neighbor not in visited]
        neighbors.sort(key=lambda neighbor:  abs(neighbor.location[0] - goal.location[0]) + abs(neighbor.location[1] - goal.location[1]) + abs(neighbor.elevation - goal.elevation), reverse=False) 
```

x,y 是当前位置，很明显，而 board 就是，整个板子。当时的想法是它会是递归的。对于每个呼叫，我都会获取当前节点的邻居，过滤掉水（无法通过）和访问过的。然后按最接近目标的排序。接下来，我想进行广度优先搜索。所以我会扩展所有的邻居，然后扩展他们的每个邻居等等。每个分支都会继续运行，直到它们没有邻居，它们将返回 None 并完成。然后最终结果是唯一返回的将是第一个到达目标的分支，即最短的分支。有谁知道我该怎么做？

我在想这个：

```
for neighbor in neighbors:
    next = pathFinder(neighbor)
    if next:
        visited.append(cure)
        return curr
    else: return None 
```

但是，如果我错了，请纠正我，但这会导致深度优先搜索，而不是广度。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2014-11-06T06:26:05.413

以下是可以帮助您的伪代码

```
BFS(v)
    let neighbors be the set of all neighbours of vertex v
    for neighbor in neighbors:
        if neighbor is not visited:
            visit neighbour
    for neighbor in neighbors:
        recurisvely call BFS(neighbor) 
```

# symfony - Symfony2 Doctrine Expr '不为空'

> ID：15773662
> 
> 赞同：37
> 
> 时间：2013-04-02T20:23:51.970
> 
> 标签：symfony, doctrine-orm

我将**FormType**用于我的**实体**，并设置了一个[实体字段](http://symfony.com/doc/2.1/reference/forms/types/entity.html)。我需要两个`Where`子句`And`，并且从我在[Query Builder page](http://docs.doctrine-project.org/en/2.0.x/reference/query-builder.html)上阅读的内容来看，这至少是我应该这样做的：

```
'query_builder' => function ($er){
    $qb = $er->createQueryBuilder('p');
    $qb
        ->where($qb->expr()->andx(
            $qb->expr()->in('p', '?1'),
            $qb->expr()->not(
                $qb->expr()->eq('p.location', 'NULL')
            )
        ))
        ->setParameter(1, $this->totalScope)
    ;
    return $qb;
}, 
```

但是，`not(eq('col', 'NULL'))`并没有达到预期的结果，事实上，错误：

> 错误：预期文字，得到 'NULL'

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-03T07:37:55.757

您可以使用[`isNotNull`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Query/Expr.php#L459-L468)：

```
'query_builder' => function ($er){
    $qb = $er->createQueryBuilder('p');
    $qb
        ->where($qb->expr()->andx(
            $qb->expr()->in('p', '?1'),
            $qb->expr()->isNotNull('p.location')
        ))
        ->setParameter(1, $this->totalScope);

    return $qb;
}, 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-03-21T13:53:38.017

您还可以在您的 queryBuilder 中使用 DQL，这在 IMO 中不那么*丑陋*。

来自控制器的快速而肮脏的示例：

```
$repo = $this->getDoctrine()->getRepository('AcmeBundle:Transaction');
$query = $repo->createQueryBuilder('t')
    ->where('t.timestamp > :timestamp')
    ->andWhere('t.pinNumber IS NOT NULL')
    ->setParameter('timestamp', new \DateTime('1 day ago'))
    ->getQuery()
; 
```

我估计更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T12:24:09.883

您可以使用 QueryBuilder 来查找结果，

```
 $query=$this->dm->createQueryBuilder('AppBundle:DocumentName')
                 ->field('fieldName')->notEqual(null);

 $data=$query->getQuery()->execute(); 
```

# html - 电子邮件模板：outlook.com 上的表单和输入不起作用

> ID：15773667
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:24:05.097
> 
> 标签：html, css, email, outlook.com

众所周知，Outlook.com 正在接管 Hotmail。电子邮件模板中的 HTML 表单和输入字段不再适用于 Outlook.com。其中的问题包括：

*   表格不能提交
*   输入文本字段看起来很奇怪
*   无法选择输入单选
*   ETC

在 Outlook.com 的电子邮件模板中解决此问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:29:35.043

`FORM`s 不能用于电子邮件。您会发现它们在许多邮件客户端上被剥离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:18:41.007

我知道这不是您想要的答案，但我认为支持大多数电子邮件客户端的最佳解决方案是在电子邮件之外为无法填写表格的用户提供一个链接电子邮件。

一般来说，对 HTML 电子邮件中的表单的支持并不是最好的，从这张图表来看，Hotmail 似乎以前不受支持，所以我不认为在不久的将来会改变。

[http://www.campaignmonitor.com/resources/will-it-work/forms/](http://www.campaignmonitor.com/resources/will-it-work/forms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T17:27:10.383

同意，HTML 电子邮件中并不普遍支持表单。

*   补充阅读：[http ://www.emailology.org/](http://www.emailology.org/)

# events - 一个条件，多个事件

> ID：15773668
> 
> 赞同：4
> 
> 时间：2013-04-02T20:24:06.503
> 
> 标签：events, vbscript, conditional-statements

我试图弄清楚如何使用.vbs 仅在一个条件下发生多个事件。（这里我尝试使用 case 语句。）是否有这样的命令，或者我必须为每一行重写命令？（这将通过在前面的代码行中激活它来在记事本上键入。）

```
 msgbox("I was woundering how old you are.")
    age=inputbox("Type age here.",,"")
    Select Case age
    Case age>24
        x=age-24
        WshShell.SendKeys "I see you are "&x&" years older than me."
        WshShell.SendKeys "{ENTER}"
    Case age<24
        x=24-age
        WshShell.SendKeys "I see you are "&x&" years younger than me."
        WshShell.SendKeys "{ENTER}"
    Case age=24
        WshShell.SendKeys "Wow were the same age!"
        WshShell.SendKeys "{ENTER} "
    End Select 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T06:56:33.243

我想你正在寻找`Select Case True`一个增强的`Select Case`开关使用：

```
age = inputbox("I was wondering how old you are.")

Select Case True
    ' first handle incorrect input
    Case (not IsNumeric(age))
        WshShell.SendKeys "You silly, you have to enter a number.{ENTER}"
    ' You can combine cases with a comma:
    Case (age<3), (age>120)
        WshShell.SendKeys "No, no. I don't think that is correct.{ENTER}"

    ' Now evaluate correct cases
    Case (age>24)
        WshShell.SendKeys "I see you are " & age - 24 & " years older than me.{ENTER}"
    Case (age<24)
        WshShell.SendKeys "I see you are " & 24 - age &" years younger than me.{ENTER}"
    Case (age=24)
        WshShell.SendKeys "Wow were the same age!{ENTER}"

    ' Alternatively you can use the Case Else to capture all rest cases
    Case Else
        ' But as all other cases handling the input this should never be reached for this snippet
        WshShell.SendKeys "Woah, how do you get here? The Universe Collapse Sequence is now initiated.{ENTER}"

End Select 
```

我添加了一些额外的案例来向您展示这种增强型开关的强大功能。与陈述相反`If a And b Then`，逗号的情况是短路的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T22:28:12.260

将冗余代码封装在过程或函数中。此外，不同的控制结构可能更适合您正在应用的检查类型：

```
If age>24 Then
  TypeResponse "I see you are " & (age-24) & " years older than me."
ElseIf age<24 Then
  TypeResponse "I see you are " & (24-age) & " years younger than me."
ElseIf age=24 Then
  TypeResponse "Wow were the same age!"
End If

Sub TypeResponse(text)
  WshShell.SendKeys text & "{ENTER}"
End Sub 
```

# wpf - 将禁用的列表框背景更改为灰色

> ID：15773669
> 
> 赞同：5
> 
> 时间：2013-04-02T20:24:24.490
> 
> 标签：wpf, background, triggers, listbox, controltemplate

我有一个`ListBox`在禁用时需要变灰的。根据用户请求，仅禁用它是不够的，但它也必须以不同的方式出现。*耸耸肩* 我在其他几个地方看过并遵循了这些例子，似乎它应该工作，但它没有。以下是我查看的一些示例：[Example1](https://stackoverflow.com/questions/9084425/disabling-listbox-is-not-changing-background-color-in-style)，[Example2](https://stackoverflow.com/questions/2594714/change-background-color-of-disabled-listbox-in-windows-classic-theme)。

这是我的代码：

```
<Style x:Key="ListBoxStyle" TargetType="ListBox">
 <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBox}">
                <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="BorderBrush" Value="Black"></Setter>
                        <Setter Property="Foreground" Value="LightGray"></Setter>
                            <Setter Property="Background" Value="LightGray"></Setter>
                        <Setter Property="BorderBrush" Value="LightGray"></Setter>
                    </Trigger>
                 </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>                 
 </Style> 
```

这似乎相当简单。我成功地完成了相同的基本`ComboBox`过程`TextBox`。谁能帮我看看我的代码哪里错了？如何正确地做到这一点的一个例子会很棒。上面列出的第一个示例似乎正是我所需要的，但正确的答案是“唯一的方法是覆盖模板”，这对我没有帮助。

我已经尝试了几种简单的解决方案。由于我们正在使用几个不同的资源字典，因此其他一些样式可能会影响这一点。有谁知道什么是追踪这个的好方法？

**编辑：** 我对整个解决方案进行了搜索，唯一使用 ListBox 的地方是我的部分，唯一设置样式的地方是我设置的样式。根据[MSDN](http://msdn.microsoft.com/en-us/library/ms754242.aspx)，ListBox 没有“部分”，因此在为其他控件设置样式的过程中，我不可能无意中设置了 ListBox 的一部分。没有样式，当我禁用 ListBox 时，它被冻结但没有文本可见，并且具有默认背景。当我尝试应用 Property="Background" Value="LightGray" 时，它似乎是隐藏的（即什么都不可见）。如果有人知道它为什么会这样做或如何完成我的任务，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-12T22:06:41.143

sa_ddam213 的回答对我不起作用，所以我想我会添加我发现我必须做的事情。就我而言，我设置了透明背景，但是当我禁用该框时，它会变成灰色。当控件被禁用时，我希望能够控制列表框的背景，这就是我发现的工作。

注意：对于您的情况，您需要将透明颜色更改为您想要的任何灰色阴影。
注意2：这可能仅在您没有更改列表框模板的情况下才有效。（更改数据模板是可以的）。

```
<ListBox.Style>
    <Style TargetType="{x:Type ListBox}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
        </Style.Resources>
    </Style>
</ListBox.Style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-10T20:06:41.613

这两个答案对我都不起作用，所以我找到了一个解决方案，它覆盖了对我有用的 ControlTemplate：

```
 <Style TargetType="{x:Type ListBox}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ListBox}">
                            <Grid Width="Auto" Height="Auto">
                                <Border x:Name="Border" 
                                        BorderThickness="1"/>
                                <ScrollViewer Focusable="false" IsTabStop="False" HorizontalScrollBarVisibility="Disabled">
                                    <StackPanel IsItemsHost="true"/>
                                </ScrollViewer>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter TargetName="Border" Property="Border.Background" Value="{StaticResource DisabledBackgroundBrush}"/>
                                </Trigger>
                                <Trigger Property="IsGrouping" Value="true">
                                    <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Background" Value="{StaticResource DefaultBackground}"/>
            </Style> 
```

这对我有帮助：[https ://social.msdn.microsoft.com/Forums/vstudio/en-US/4b033268-864e-488c-b371-80818daf7f71/can-i-override-the-disabled-background-color-for- a-listbox?forum=wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/4b033268-864e-488c-b371-80818daf7f71/can-i-override-the-disabled-background-color-for-a-listbox?forum=wpf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T21:18:24.237

我认为您不需要覆盖`ControlTemplate`，只需为我添加一个`Style.Trigger`工作正常。

例子：

```
 <ListBox>
        <ListBox.Style>
            <Style TargetType="{x:Type ListBox}">
                <Style.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="LightGray" />
                        <Setter Property="Background" Value="LightGray" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ListBox.Style>
    </ListBox> 
```

# node.js - 使用网络接口的 node.js HTTP 请求

> ID：15773672
> 
> 赞同：4
> 
> 时间：2013-04-02T20:24:35.223
> 
> 标签：node.js, request

我有几个具有不同 IP 地址的网络接口。如何使用 node.js 模块**请求**（[https://github.com/mikeal/request](https://github.com/mikeal/request)）通过这些 IP 向站点发出 http 请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:35:16.647

在 nodejs`http`模块中，有一个`localAddress`选项可以与[`http.request()`](http://nodejs.org/api/http.html#http_http_request_options_callback).

> `localAddress`：用于绑定网络连接的本地接口。

我没有使用您所指的模块，但如果它只是将选项传递给`http`模块，我看不出它不应该工作的原因。

# vb.net - 如何让VB.NET拒绝自动声明FOR循环变量？

> ID：15773673
> 
> 赞同：1
> 
> 时间：2013-04-02T20:24:38.097
> 
> 标签：vb.net

我正在维护一个具有以下代码的项目：

```
For i = 1 to 9
    <do stuff>
Next 
```

这在开发机器上工作正常，但当它被推送到生产服务器时失败，抱怨`i`未声明。事实上，这是真的；如果我添加以下作业：

```
i = 5
For i = 1 to 9
    <do stuff>
Next 
```

然后生产机器和开发机器都无法运行它，说这`i`是未声明的。

是什么让开发机器允许`i`在`For`循环中未声明，我该如何禁用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:30:02.967

这是一个称为本地类型推断的功能。有了它，您可以在不指定类型的情况下声明变量：

```
' Variable num is an Integer. 
Dim num = 5

' Variable dbl is a Double. 
Dim dbl = 4.113

' Variable str is a String. 
Dim str = "abc" 

' Variable pList is an array of Process objects. 
Dim pList = Process.GetProcesses()

' Variable i is an Integer. 
For i = 1 To 10
    Console.WriteLine(i)
Next 
```

您可以使用[`Option Infer Off`语句](http://msdn.microsoft.com/en-us/library/bb384665.aspx)作为文件中的第一行或整个项目禁用它：

*   单击*解决方案资源管理器*中的项目。
*   通过单击*视图*菜单上的*属性页*打开*项目设计器。*
***   在*编译*选项卡的*选项推断*框中，单击*关闭*。**

# python - 使用 URL 语法发送参数

> ID：15773676
> 
> 赞同：0
> 
> 时间：2013-04-02T20:24:44.783
> 
> 标签：python, django, url, audio, audio-player

我正在尝试在 Django 1.5 中使用音频播放器 Timeside。处理加载播放器的 JavaScript 函数接收这组参数，

加载播放器.js

```
loadPlayer function (analizerUrl, soundUrl, soundImgSize, itemId, visualizers,   CurrentUserName, isStaffOrSuperuser) 
```

在我的模板中是以下处理启动的脚本

```
{% If item.file %}
  loadPlayer('{% url 'item-analyze-xml' item.public_id %}',
          "{% url 'item-export' item.public_id,"mp3" %}", undefined, '{{item.id}}', visualizers,
          CURRENT_USER_NAME,  //undefined if !user.is_authenticated
          true); //true because superuser
{% Endif%} 
```

网址配置如下

```
url(r'^archives/items/download/(?P<public_id>[A-Za-z0-9._-]+)\.(?P<extension>'
        + export_extensions + ')$',
    item_view.item_export,
    name="item-export"),

url(r'^archives/items/(?P<public_id>[A-Za-z0-9._-]+)/analyze/xml/$',
    item_view.item_analyze_xml,
    name="item-analyze-xml"), 
```

这在 Django 1.4 中有效，尝试更新以在 1.5 版中使用。问题是我不能在这里发送参数 MP3

```
"{% url 'item-export' item.public_id,"mp3" %}", 
```

视图 item_export 是这样的：

```
def item_export(self, request, public_id, extension): 
```

当播放器加载时，我收到以下错误：

```
Could not parse the remainder: ',' from 'pista.public_id,' 
```

在 Django 1.5 上哪个是正确的语法？

使用 name 和 equal 解决了这一步

```
{% url 'item-export' public_id=item.public_id extension="mp3" %} 
```

似乎它正在工作，但我有一个新错误：

```
NoReverseMatch at /pista/1/

Reverse for 'item-analyze-xml' with arguments '()' and keyword arguments '{u'public_id': ''}' not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:17:16.030

我不想回答我自己的问题，但我一直在寻找和尝试很多，我找到了解决方案。

```
{% Url 'impromusic-item-export' item.id 'mp3'%} 
```

第一个引号是指 url 的名称（每个人都知道）， item.id 可以是变量，取决于对象，但如果我用引号将它写出来，它将是一个字符串，它不接受我们分配的任何值。这是我经过 5 个小时的搜索后得出的结论，但我可能是错的 :) 希望你能理解我

# c# - 如何在异步回发期间重定向浏览器？

> ID：15773680
> 
> 赞同：2
> 
> 时间：2013-04-02T20:24:49.060
> 
> 标签：c#, asp.net, asp.net-ajax, postback, asp.net-3.5

# **场景**

我有一个 ASP.NET 项目，它使用自定义授权/身份验证方法（与使用表单/Windows 身份验证等相比）。在每次*安全*页面加载时，都会执行以下代码：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if (!IsLoggedIn)
    {
        HttpContext.Current.Response.Redirect("~/Login/", true);
    }
} 
```

这段代码主要检查用户是否*仍然*登录（没有过期的 ASP.NET 会话，没有注销等）；如果用户未登录，则将其`Response.Redirect()`发送到登录页面。

当用户请求一个完整的页面（通过链接或直接 URL）时，此方案**工作得非常好。**使用**异步回**发时会出现问题！

我有一个嵌套在 中的按钮`<asp:UpdatePanel>`，单击时会导致异步回发。此按钮更新`<asp:Label />`. 例如：

```
<!-- the button -->
<asp:LinkButton ID="MyButton" CausesValidation="false" Text="My Button" OnClick="MyButton_Click" runat="server" />

<!-- the label -->
<asp:Label ID="MyLabel" runat="server" /> 
```

```
protected void MyButton_Click(Object sender, EventArgs e)
{
    MyLabel.Text = DateTime.Now.ToString();
} 
```

# **问题**

当异步回发正在执行并且`IsLoggedIn`为 false 时，请求将被*重定向*到登录页面。现在，ASP.NET 框架需要一个特定的响应（而不是 HTML 页面）；因此，抛出以下错误：

[![在此处输入图像描述](https://i.stack.imgur.com/zZx1L.png)](https://i.stack.imgur.com/zZx1L.png)

# **问题**

**我该如何解决这个问题？如何在异步回发期间强制整个页面从代码隐藏重定向到特定地址？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:53:05.083

虽然[Kenneth 的回答](https://stackoverflow.com/a/15775541/238722)是适当的重定向方法，但我需要一些更*自定义*的东西。

在异步回发期间，我需要模拟[`Response.Redirect("path", true)`](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx)-**`true`**参数*（指示当前页面的执行是否应该终止）*是我需要复制的**重要内容！**简单地使用`Response.End()`after`ScriptManager.RegisterClientScriptBlock()`是行不通的，因为这样就不会有任何响应发送回浏览器。

通过分析服务器对异步回发的响应，我使用了以下技巧（使用 模拟响应`Response.Write`）：

```
String jsRedirect = String.Format("window.location.pathname = '{0}';", VirtualPathUtility.ToAbsolute(url));

Response.Write(
    // required parameters!
    "0|asyncPostBackControlIDs|||" +
    "0|postBackControlIDs|||" +
    "0|updatePanelIDs|||" +
    "0|childUpdatePanelIDs|||" +
    "0|panelsToRefreshIDs|||" +

    // your custom JavaScript
    String.Format("{0}|scriptBlock|ScriptContentNoTags|{1}|", jsRedirect.Length, jsRedirect)
);
Response.Flush();
Response.End(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T22:25:30.550

如果您想从代码隐藏触发，您可以这样做：

```
if (ScriptManager.GetCurrent(Page).IsInAsyncPostBack) {
    ScriptManager.RegisterStartupScript(updatepanelid, typeof(string), "redirect", "window.location = 'http://www.google.com';", true);
} else {
    Response.Redirect("http://www.google.com");
} 
```

另请注意，如果您使用`window.open()`，将打开一个弹出窗口（可能会或可能不会被阻止）。如果你使用`window.location = "someurl";`它只会做一个客户端重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:28:09.190

这里有一些术语误解。“异步回发”在技术上根本不是回发；它是一个`xmlHttpRequest`. 如果您想在此处进行重定向，则必须使用 ajax 回调函数在 javascript 中完成`window.open()`。

我不确定你将如何使用 asp.net AJAX 来实现它。在服务器上执行 xmlHttpRequest 代码期间，*不可能*重定向客户端（澄清 - 您*可以*重定向，但您响应的 html 将（如您的情况）被 asp.NET 的 javascript ajax 代码错误地解析。

使用 jQuery，这将是一个伪解决方案。

```
$.ajax({
    success: function(data) {
        if (data == 'redirect') {
            window.open('yourRedirectUrl');
        }
    }
}); 
```

# radio-button - 遍历多个单选按钮

> ID：15773684
> 
> 赞同：0
> 
> 时间：2013-04-02T20:24:57.287
> 
> 标签：radio-button

在 C# WinForms 我有几个单选按钮，在我的代码中它看起来像这样：

```
public void Adjust_id()
{
    if (radio_button_0.Checked)
        (database.Record).active_id = 0;
    else if (radio_button_1.Checked)
        (database.Record).active_id = 1;
    else if (radio_button_2.Checked)
        (database.Record).active_id = 2;
    else if (radio_button_3.Checked)
        (database.Record).active_id = 3;
    else if (radio_button_4.Checked)
        (database.Record).active_id = 4;
    else if (radio_button_5.Checked)
        (database.Record).active_id = 5;
    else if (radio_button_6.Checked)
        (database.Record).active_id = 6;
    else if (radio_button_7.Checked)
        (database.Record).active_id = 7;
    else if (radio_button_8.Checked)
        (database.Record).active_id = 8;
    else if (radio_button_9.Checked)
        (database.Record).active_id = 9;
    else if (radio_button_A.Checked)
        (database.Record).active_id = 10;
    else if (radio_button_B.Checked)
        (database.Record).active_id = 11;
    else if (radio_button_C.Checked)
        (database.Record).active_id = 12;
    else if (radio_button_D.Checked)
        (database.Record).active_id = 13;
    else if (radio_button_E.Checked)
        (database.Record).active_id = 14;
    else if (radio_button_F.Checked)
        (database.Record).active_id = 15;
} 
```

在我看来，这很丑陋。有没有更好的方法来缩短此代码？我不知道如何遍历那些单选按钮...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:01:32.103

您可以使用 case 语句，但我认为这不是您想要的。

看这个。我将单选按钮创建为动态的。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        Dictionary<int, RadioButton> RadioButtons = new Dictionary<int,RadioButton>();
        public Form1()
        {
            InitializeComponent();

            for (int i = 0; i < 10; i++)
            {
                int j = i * 30;
                CreateRadioButton(i, j);
            }
            CheckRadioButton(2);
        }

        public void CheckRadioButton(int active_id)
        {
            RadioButton singRB = RadioButtons[active_id];
            singRB.Checked = true;
        }

        public void CreateRadioButton(int name, int topAdd)
        {
            RadioButton RB = new RadioButton();
            RB.Left = 20;
            RB.Top = 30 + topAdd;
            RB.Width = 300;
            RB.Height = 30;
            RB.Text = String.Format("I am a Dynamic RadioButton {0}", name);
            RB.Name = String.Format("RadioButton{0}", name);
            RadioButtons.Add(name, RB);
            Controls.Add(RB);
        }
    }
} 
```

# string - 将双精度转换为字符串时在小数点前保留零

> ID：15773690
> 
> 赞同：4
> 
> 时间：2013-04-02T20:25:33.483
> 
> 标签：string, vb6, double

使用 VB6，当我有一个双精度值时，`i = -0.1`如果我将它转换为一个字符串，`strTemp = Str(i)`我会丢失小数点前的前导 0 并最终得到`-.1`

当值<1时，如何保留小数点前的前导0？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T23:24:37.997

使用格式化功能。

```
strtemp = Format(i, "0.####") 
```

0 & # 是占位符。如果不存在其他值（包括前导零和尾随零），0 将在该位置放置一个零。# 将值放入该位置，但没有前导零或尾随零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:16:58.923

作为替代方案，您可以使用`FormatNumber`. 在下面的示例中，中间数字（在本例中为 4）是小数点后所需的位数。有关此功能的更多信息[这里](http://www.vb6.us/tutorials/formatting-numbers-currency-and-percents-vb)

```
strTemp = FormatNumber (i,4,vbTrue) 
```

两个函数的输出之间存在一些差异。根据您的要求，您可以使用其中一种。玩弄每个功能，以了解哪个功能最适合您的要求。

# ruby - 我无法弄清楚为什么我收到错误“无法将 nil 转换为字符串”

> ID：15773691
> 
> 赞同：0
> 
> 时间：2013-04-02T20:25:34.400
> 
> 标签：ruby

```
puts 'Please enter your age '
age=gets.chomp
age=age.to_i

if  age >=18
division='in the adult '

elsif age >=12
division='in the junior '

elsif age >=5
division='in the novice '

else    
puts 'We are sorry, but you are ineligible to play in the league at this time.'

end
puts 'Congratulations! You are '+division+'league.'

sleep 5 
```

我得到的错误是这样的：

```
We are sorry, but you are ineligible to play in the league at this time.
:18:in `+': can't convert nil into String (TypeError)
:18:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:28:01.323

您收到该消息是因为`division`它是 nil。如果您的条件都不满足，则会显示“我们很抱歉”消息，但不会为`division`变量分配任何值。

您可以通过以下方式摆脱它：

```
puts 'Congratulations! You are '+division+'league.' unless division.nil? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:30:52.373

这是因为您没有进行初始化`division`，因此它被设置为 nil.Initialize 除法，如下所示：

```
division = 'in no' 
```

在 else 块中或在第一个 if 之前执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:54:00.103

只是为了展示您的代码如何更像 Ruby：

```
print 'Please enter your age: '
age = gets.chomp.to_i

division = case 
          when age >= 18
            'adult'

          when age >= 12
            'junior'

          when age >=5
            'novice' 

          else    
            nil

          end

if division
  puts "Congratulations! You are in the #{ division } league."
else
  puts 'We are sorry, but you are ineligible to play in the league at this time.'
end 
```

我敢肯定它可能会更紧，但这就是我的做法。此外，由于代码检查是否`division`已设置，因此它不会返回您看到的错误。

# php - 从提交按钮获取数据，显示文本文件，明文框

> ID：15773694
> 
> 赞同：0
> 
> 时间：2013-04-02T20:25:44.967
> 
> 标签：php, html, text, form-submit

我的需求对我来说有点复杂，但对许多人来说很容易..

这就是我想要的，在我的表单中我有 3 个对象，文本框、提交按钮和显示区域。

用户必须在文本框中输入一些详细信息并按下提交按钮，详细信息必须显示在下面的显示区域（显示框）中。显示详细信息后，文本框必须为空。用户不能或不应编辑显示区域中的详细信息。

这是我尝试过的，

1.  输入文本，点击提交按钮-数据将保存在文本文件1

2.  以附加模式打开文本文件2，将文本文件1添加到文本文件2中

3.  显示文本文件 2，明文文件 1（供下次使用）

![在此处输入图像描述](https://i.stack.imgur.com/E3uzu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:23:28.727

其漂亮的基本 HTML + Javascript 。无论如何这里的代码:)

```
<html>
<head>
<script>
function display()
{
document.getElementById("displayarea").innerHTML = document.getElementById("myinput").value;    
document.getElementById("myinput").value = "";
}
</script>
</head>

<body>
<input type="text" name="myinput" id="myinput">
<input type="button" value="Submit" name="submit" id="submit" onClick="display()"/>
<div id="displayarea">Sample Text. This data will disappear if you press button</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:21:13.890

```
//view.php
<?php

if (isset($_POST['submit'])
{
$text = $_POST['text1'];
echo $text;
echo "<br />";
}
echo "<form action= '' method='post'>
Text Box: &nbsp; <input type='text' name='text1' />
<input type='submit' name='submit' />
</form>";

?> 
```

# c++ - 简单的 AVL 树删除仅在某些时候有效

> ID：15773705
> 
> 赞同：1
> 
> 时间：2013-04-02T20:26:17.090
> 
> 标签：c++, pointers, tree, avl-tree

我正在研究 AVL 树。似乎 my remove 仅在某些时候正常工作。我建了一棵看起来像这样的树

```
 f
        /   \
       e     j
      /    /   \
     a    h     s 
```

通过按顺序插入`f e h s j a`。我知道它在插入和平衡方面工作正常。

当我删除`a`, or `j`, or `h`, or `s`, or`e`时，一切正常。如果我删除`f`，那么它会替换`f`为`h`，这是正确的，但我会丢失`j`and `s`。

这是第一个被调用的函数。

```
 void remove(const ItemType& item)
    {
        if(root == NULL)
            return;
        else
        {
            remove(root, item);
        }
    }; 
```

第一个函数调用这个函数递归地找到正确的节点。

```
 void remove(Node<ItemType>* & node, const ItemType& item)
    {
        if(item > node->item)
        {
            if (node->rightChild == NULL)
            {
                return; // there is nothing here to remove
            }
            else
            {
                // recurse to next node
                remove(node->rightChild, item);
            }
        }
        else if (item < node->item)
        {
            if (node->leftChild == NULL)
            {
                return; // there is nothing here to remove
            }
            else
            {
                // recurse to next node
                remove(node->leftChild, item);
            }
        }
        else if (node->item == item)
        {
            remove(node);
        }

        if (node != NULL)
            node->updateHeight();
    }; 
```

这是要调用的最后一个函数。这是删除和交换完成的地方。

```
 void remove(Node<ItemType>* & node)
    {
        if (node->rightChild == NULL && node->leftChild == NULL)
        {
            delete node;
            node = NULL;
        }
        else if (node->rightChild == NULL)
        {
            Node<ItemType>* temp = node;
            node = node->leftChild;
            delete temp;
        }
        else
        {
            Node<ItemType>* & temp = node->rightChild;
            while (temp->leftChild != NULL)
                temp = temp->leftChild;

            node->item = temp->item;
            delete temp;
            temp = NULL;
        }

        if(node != NULL)
            node->initializeHeight();
    }; 
```

我想知道它是否与线条有关

```
 Node<ItemType>* & temp = node->rightChild;
            while (temp->leftChild != NULL)
                temp = temp->leftChild;

            node->item = temp->item;
            delete temp;
            temp = NULL; 
```

并且临时指针的行为是我不熟悉的，或者我的整个实现是错误的。我知道丢失的节点在某处，因为我的内存泄漏告诉我丢失的那两个节点永远不会被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:39:57.467

> 我想知道它是否与线条有关

是的。`Node<ItemType>* & temp = node->rightChild;`说`temp`是 的别名`node->rightChild`。所以`while`循环修改`node->rightChild`了，你失去了原来的右孩子的句柄。

取一个普通的指针，沿着右子树向下走，直到到达它最小成员的父节点。然后获取最小成员的值将其复制到`node->item`中，并删除父级的左孩子。

# twitter-bootstrap - angularjs中的LOV

> ID：15773706
> 
> 赞同：0
> 
> 时间：2013-04-02T20:26:19.923
> 
> 标签：twitter-bootstrap, angularjs, lov

angularjs中是否有支持LOV（值列表）的组件？我的问题是这样的，我有 2 个组合框，第一个有太多的项目，所以我决定通过引导程序提前向用户提供建议，在用户从组合 1 中选择组合项目后，组合 2 将加载一些数据取决于组合1。

本质上，我想用 Angular js 创建著名的 state-city 组件。

谢谢

编辑：

好的，我发现这些组件很有希望，

[AngularUI Select2](http://angular-ui.github.com/) , [Select2](http://ivaynberg.github.com/select2/) ,[引导组合框](https://github.com/danielfarrell/bootstrap-combobox)

我想我可以让它工作，但现在我没有时间尝试它。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:43:55.257

您应该阅读[文档](http://docs.angularjs.org/api)和[指南](http://docs.angularjs.org/guide)。

简单的使用[`ng-model`](http://docs.angularjs.org/api/ng.directive%3angModel)和[`$watch`](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)改变。在更改时，请求状态为[`$resource`](http://docs.angularjs.org/api/ngResource.%24resource).

阅读文档。如果您仍然无法弄清楚如何实现它，请再次在此处发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T23:50:11.767

您可以尝试使用 usint lov-typeahead，它是一个 angularjs 指令，它使用 twitter 的 typeahead 实现值列表：[https](https://github.com/mihaigiurgeanu/lov-typeahead) ://github.com/mihaigiurgeanu/lov-typeahead 。

如果你使用 bower，你可以安装它：

```
bower install lov-typeahead --save 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:07:34.400

根据第一个组合的值在第二个组合中使用过滤器怎么样？

[http://docs.angularjs.org/tutorial/step_03](http://docs.angularjs.org/tutorial/step_03)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-20T22:43:17.707

也许这个指令也会有帮助：

[https://github.com/rolandocc/lov-angular-directive](https://github.com/rolandocc/lov-angular-directive)

# c++ - 类模板中的重载运算符

> ID：15773708
> 
> 赞同：2
> 
> 时间：2013-04-02T20:26:27.387
> 
> 标签：c++, class, templates, operator-overloading, overloading

我写了一个类模板，但运算符只有在两种类型相同时才起作用。我不知道如何定义头文件和 cpp 文件中的类型。这是我的代码：

头文件：

```
ArrayList& operator=(ArrayList const&); 
```

cpp文件：

```
template <class T>
ArrayList<T>& ArrayList<T>::operator=(ArrayList<T> const& other) {
    if (this != &other) {
        delete [] Array;
        Array = new T [other.lenght];
        lenght = other.lenght;
        std::copy(other.Array, other.Array+lenght, Array);
    }
    return *this;
} 
```

如果我将 a 和 b 定义为 int，则 a=b 有效。但如果我将 a 定义为 char，则 a=b 不起作用。如何解决这个问题？

编辑::

正如巴里所说，我们必须改变语法。而且我必须在 .cpp 文件末尾更改我的实例化（我使用单独的 .h 和 .cpp 文件）。但问题出在这部分

```
 if (this != &other) {
    delete [] Array;
    Array = new T [other.lenght];
    lenght = other.lenght;
    std::copy(other.Array, other.Array+lenght, Array);
} 
```

但我不知道问题出在哪里，如果我在上面发表评论，一切正常，但是......

我得到了这些错误：

错误 C2440：“！=”：无法从“const ArrayList *”转换为“ArrayList *const”

错误 C2248：“ArrayList::lenght”：无法访问在“ArrayList”类中​​声明的私有成员（3 次）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:28:09.600

在您的标题中，而不是：

```
ArrayList& operator=(ArrayList const&); 
```

做了

```
template <typename U>
ArrayList& operator=(ArrayList<U> const&); 
```

那应该接受右侧的任何类型的 U 。同样，cpp 文件应该使用这个很棒的结构：

```
template <typename T>
template <typename U>
ArrayList<T>& ArrayList<T>::operator=(ArrayList<U> const& other) {
    // clearly uninteresting details here
    return *this;
} 
```

# javascript - Rails 渲染部分取决于集合选择的值

> ID：15773713
> 
> 赞同：2
> 
> 时间：2013-04-02T20:26:41.107
> 
> 标签：javascript, html, ruby-on-rails, ruby, coffeescript

我正在开发一个基于分类的网站，我想让表单适应 javascript 输入的分类类型。

例如，我有很多类型，即。汽车 && 手机

我有三个下拉菜单，它们使用咖啡脚本根据先前的输入进行过滤（代码将包含在下面）。

我希望表单根据最后一个框中的选定值加载部分内容。

看看下面的例子。

第一个下拉列表是类别，然后是子类别，然后是子子类别。

我希望在选择最后一个框“游戏”时加载部分“_games.html.erb”

![一个例子](https://i.imgur.com/QHRvGSS.png)

我用于隐藏和过滤下拉菜单的咖啡脚本如下

```
 jQuery ->
  $('#classified_tag_list').autocomplete
    source: $('#classified_tag_list').data('autocomplete-source')

  $('#classified_sub_category_id').hide()
  $('#classified_sub_sub_category_id').hide()
  sub_category = $('#classified_sub_category_id').html()

  $('#classified_category_id').change ->
    category = $('#classified_category_id :selected').text()
    options = $(sub_category).filter("optgroup[label='#{category}']").html()
    if (options)
      $('#classified_sub_category_id').html(options)
      $('#classified_sub_category_id').show()
      $('#classified_sub_sub_category_id').empty()

    else
      if(not category == 'Please select a category')
        $('#classified_sub_category_id').parent().hide()
        $('#classified_sub_sub_category_id').parent().hide()
      $('#classified_sub_category_id').empty()
      $('#classified_sub_category_id').empty()
      $('#classified_sub_sub_category_id').empty()
      $('#classified_sub_sub_category_id').empty()

  suburbs = $('#classified_sub_sub_category_id').html()
  $('#classified_sub_category_id').change ->
    city = $('#classified_sub_category_id :selected').text()
    options = $(suburbs).filter("optgroup[label='#{city}']").html()
    if (options)
      $('#classified_sub_sub_category_id').html(options)
      $('#classified_sub_sub_category_id').show()
    else
      $('#classified_sub_sub_category_id').empty()
      $('#classified_sub_sub_category_id').hide() 
```

那么如何根据最后一个下拉列表的值使用 javascript 加载部分？

[编辑]

我查看了[基于选择框的动态部分 - Rails 2.3.5](https://stackoverflow.com/questions/14592642/dynamic-partial-based-on-select-box-rails-2-3-5)

这就是我所拥有的

```
_form.html.erb

    <script type="text/javascript">
$(document).ready(function() {
  $('#classified_sub_sub_category_id').change(function() {
    $.ajax({ url: '/classifieds/form_partial/'+ this.value });
  });
});
</script> 
```

* * *

```
routes.rb

  resources :classifieds do
    match "/form_partial/:id" => "classifieds#form_partial" 
  end 
```

* * *

```
classifieds_controller.rb

def form_partial
  @category = Category.find(params[:id])
end 
```

* * *

```
form_partial.js.erb

 <% if @category == 1 %>
   $('#classified_sub_sub_category_id').after('<div id="product_partial"><%= escape_javascript render('/forms/cars') %></div>');
 <% else %>
   $('#classified_sub_sub_category_id').after('<div id="product_partial"><%= escape_javascript render('/forms/cars') %></div>');
<% end %> 
```

* * *

但这给出了错误

```
undefined method `render' for #<#<Class:0xa0805fc>:0xb574788>
  (in /home/james/hustle/app/assets/javascripts/form_partial.js.erb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T22:17:43.903

Luís Ramalho 根据评论修复了我的愚蠢

> 发生错误是因为您将文件 form_partial.js.erb 放在资产>文件夹中。尝试移至视图文件夹。——路易斯·拉马略

# git - 使用 GitHub GUI 提交和同步，一切都消失了

> ID：15773716
> 
> 赞同：2
> 
> 时间：2013-04-02T20:26:45.153
> 
> 标签：git, github, push, sync, github-for-windows

因此，在 GitHubGUI 中，像往常一样，我进行了更改，然后单击`Commit&Sync`了一会儿，弹出了“合并冲突”对话框，然后一切都消失了，我将最新的更改与远程存储库同步。

我所做的一切都消失了。

这发生在`commit&sync`我试图修复合并错误后不断单击之后，但这次实际上一切都消失了，就像我刚刚完成一个`pull`命令并且 git 不会捕获我的提交一样。

有什么方法可以恢复这些提交的文件吗？GUI 首先提交它们，然后推送它们。所以我认为它必须去某个地方哈哈。

编辑：
做过：

```
git reflog show
ae0217a HEAD@{1}: rebase finished: returning to refs/heads/master
ae0217a HEAD@{2}: checkout: moving from master to a....(edited letters)
2729389 HEAD@{3}: commit: First side menu change : changed size, colors, and added icons
2bf6181 HEAD@{4}: pull: Fast-forward 
```

所以“ `commit`”是打开的，`HEAD@{3}`但我如何回到它或让我的更改出现`master`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:31:05.977

不得不做：

git reset --hard HEAD{3}

回到我“消失”的承诺。

[https://www.kernel.org/pub/software/scm/git/docs/git-reset.html](https://www.kernel.org/pub/software/scm/git/docs/git-reset.html)

# python - Python：仅打印结果

> ID：15773722
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:00.230
> 
> 标签：python

```
import os
def find_method(name):
        i = 0
        found_dic = { "$_GET":[], "$_POST":[], "include":[], "require":[], "mysql_query":[], "SELECT":[], "system":[], "exec":[], "passthru":[], "readfile":[], "fopen":[], "eval":[] }

        for x in file(name, "r"):
                i += 1
                for key in found_dic:
                        if x.strip().find(key) != -1:
                                found_dic[key].append("LINE:"+str(i)+":" + x.strip())

        print "="*20, name, "="*20
        for key in found_dic:
                if found_dic[key]:
                        print " ", "-"*10, key, "-"*10
                        for r in found_dic[key]:
                               print "  ",r

def search(dirname):
        flist = os.listdir(dirname)
        for f in flist:
                next = os.path.join(dirname, f)
                if os.path.isdir(next):
                        search(next)
                else:
                        doFileWork(next)

def doFileWork(filename):
        ext = os.path.splitext(filename)[-1]
        #if ext == '.html': print filename
        if ext == '.php':
               # print "target:" + filename
                find_method(filename) 
```

1.  我怎样才能只打印结果。即使文件中没有任何结果，它也会打印文件的所有名称。如果它有任何结果，我想制作打印文件名

2.  这是关于搜索单词，但它显示每个单词都包含喜欢（搜索包含）然后它还在句子中找到单词并打印所有句子我只想找到句子中不包含的单词“include”。这真的很难解释..我希望能理解.. srry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:50:59.190

我希望这就是你所要求的：

```
for i, line in enumerate(file(name, "r")):
    found = False
    for key in found_dic:
        if key in line.strip():
            found_dic[key].append("LINE:"+str(i)+":" + key)
            found = True

    if found:
        print "="*20, name, "="*20
        for key in found_dic:
            if found_dic[key]:
                print " ", "-"*10, key, "-"*10
                for r in found_dic[key]:
                    print "  ",r 
```

如果您只想在实际找到某些东西时打印名称，则必须检查是否找到了某些东西。此外，您只在第 5 行连接 key，因为 key 是您搜索的内容。而且您只想添加您搜索的内容。

进一步的变化：我在第 i 行使用了 enumerate 函数，它比增加你拥有的 i 更容易和更易读。

我还在第 10 行更改了条件。在这里使用 in 关键字是更简单易读的方式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:58:10.400

看起来第一个打印命令的缩进可能有问题，您正在打印“名称”，但它在 for 循环之外。

尝试填充您的字典，然后按照以下方式打印字典：

```
with open(your_file) as f:
    found_dic = {}
    key = 'your_key'

    # populate the dictionary
    found_dic[key] = [i for i in f if key in i and i not in found_dic] 
```

以此为起点，希望您可以根据需要将结果格式化为字典。只有包含“键”的行才会出现在 found_dic 中，因此您应该能够以您喜欢的任何格式将它们打印出来。

希望这可以帮助

# c++ - 如何正确调用此函数？

> ID：15773724
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:10.000
> 
> 标签：c++

我无法调用此函数。它应该将名称从“First Mid Last”重新格式化为“Last，First MidInitial”（如果中间名可用，否则只是“Last，First）。虽然如果我将函数类型更改为字符串，它会给出不同的错误列表：

```
In function âvoid getData(StudentType*, int)â:
71:43: error: invalid use of void expression 
```

有人有什么建议吗？

* * *

程序文件

* * *

```
using namespace std;
#include "StudentType.h"
#include <iostream>
#include <iomanip>
#include <fstream>
#include <climits>
#include <string>

const int MAX_STDS = 20;

void getData(StudentType[], int&);

void sortData(StudentType[], int&);

void getFormat(string& name);

void computeAverages(StudentType[], int&);

void printData(StudentType[], int&);

int main () {

StudentType students[MAX_STDS];
StudentType();
int n;

getData(students, n);
sortData(students, n);
computeAverages(students, n);
printData(students, n);

return 0;
}

void getData(StudentType students[], int n){
    ifstream fin;
    int grade;
    string filename, name;
    bool done = false;

    cout << "Enter filename: ";
    cin >> filename;
    fin.open(filename.c_str());
    while(true) {
       try {
         fin.open(filename.c_str());
         if(!fin) {
            throw(string("Could not open " + filename + "."));
         }
         break;
       }
       catch (string s) {
          cout << s << endl;
          cout << "Enter a different file name: ";
          cin >> filename;
       }
    }
    n=0;
    while(n<MAX_STDS && getline(fin, name)) {
       students[n].setName(getFormat(name));
       for(int i = 0; i < NUM_GRDS; ++i) {
          fin >> grade;
          students[n].setGrade(grade, i);
       }
       getline(fin, name);
       ++n;
    }
}

void printData(StudentType students[], int n) {
    for(int i = 0; i < n; ++i) {
       students[i].printLine();
    }
}

void computeAverages(StudentType students[], int n) {
    for(int i = 0; i < n; ++i) {
       students[i].computeAverage();
    }
}

void sortData(StudentType students[], int n) {
    for(int i=0; i<n-1; i++) {
       for(int j=0; j < n-1-i; ++j) {
          if(students[j].getName() > students[j+1].getName()) {
             swap(students[j], students[j+1]);
          }
       }
    }
}

void getFormat(string name) {
    string first;
    string middle;
    string last;
    char n, m;
    int size = 0;
    n = name.find(' ');
    first = name.substr(0, n);
    m = name.find(' ', n + 1);
    size = name.size();
    if (m != string::npos) {
       middle = name.substr(n+1, m-(n+1));
       last = name.substr(m+1, size - (m+1));
    }
    else {
       middle = "";
       last = name.substr(n + 1, size - (n + 1));
    }
    name = last + ", " + first;
    if (middle != "") {
       name = (name + ' ') + middle[0];
    }
} 
```

* * *

头文件

* * *

```
#ifndef STUDENTTYPE__H
#define STUDENTTYPE__H

#include <string>
#include<iostream>

const int NUM_GRDS = 10;

class StudentType {
   public:
      StudentType();
      void setName(std::string);
      void setGrade(int, int);
      void computeAverage();
      std::string getName() const;
      void printLine(std::ostream& = std::cout) const;
   private:
      std::string name;
      int grades[NUM_GRDS];
      float avg;
};

#endif 
```

* * *

实施文件

* * *

```
#include "StudentType.h"
#include <iomanip>

StudentType::StudentType(){
    name = "";
    for(int i =0; i <NUM_GRDS; ++i){
       grades[i] = 0;
    }
    avg = 0.0;
}

void StudentType::setName(std::string newName){
    name = newName;
}

void StudentType::setGrade(int grade, int num){
    grades[num] = grade;
}

void StudentType::computeAverage(){
    float total = 0;
    for(int i = 0; i<NUM_GRDS; ++i){
       total += grades[i];
    }
    avg = total/NUM_GRDS;
}

std::string StudentType::getName() const{
    return name;
}

void StudentType::printLine(std::ostream& out) const {
//    out.setf(ios::left);
//    out.setf(ios::fixed);
//    out.setf(ios::showpoint);
    out << "\n" << std::setw(25) << "Student" << std::setw(50)
        << "Grades" << std::setw(10) << "Average" << std::endl;
    out << "_____________________________________________________________________________________" << std::endl;
    out << std::left << std::setw(25) << name << std::right << ' ';
    for(int i = 0; i < NUM_GRDS; ++i){
    out << std::setw(5) << grades[i] << ' ';
    }
    out << std::setprecision(2) << std::setw(6) << avg << std::endl;
}

int main (){

return 0;
} 
```

* * *

程序编译后我的输出应该是这样的......

* * *

```
Enter file name: grades.dat

Student                  Grades                                            Average
________________________________________________________________________________________
Last, First              90   80   70   60   50   40   30   20   10   0    45.00
Last, First              40   40   40   40   40   40   40   40   40   40   40.00
Last, First              54   98   65   32   21   87   54   65   98   32   60.60
Flames, Blood A          9    8    7    6    5    4    3    2    1    0    4.50
Bottoms, Car             32   65   98   87   54   24   56   89   78   68   65.10
Guitars, Dean            10   10   10   10   10   10   10   10   10   10   10.00
Honer, Ruth T            78   56   12   23   45   89   31   64   97   79   57.40
Hot, Zepher R            12   54   87   89   56   32   51   46   97   31   55.50
.
.
. 
```

输入文件应具有此格式并包含 20 多个学生用于测试目的：g0、g1、...g9 应为 0 到 100 的 10 个等级

```
First Middle Last
g0 g1 g2 g3 g4 g5 g6 g7 g8 g9
First Last
g0 g1 g2 g3 g4 g5 g6 g7 g8 g9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:42:51.423

该错误表明您正在滥用返回类型为 void 的函数。

在您的示例中，您可以看到这一行：

```
students[n].setName(getFormat(name)); 
```

根据定义，*getFormat()*函数返回 void 并且 setName 方法期待*std::string*。

*此外，我发现main()*的多个定义将无法链接。查看学生类型实现文件的末尾。

# ios - 如何重新加载 UIView？

> ID：15773725
> 
> 赞同：3
> 
> 时间：2013-04-02T20:27:10.983
> 
> 标签：ios, objective-c, ios6

我有一个 UIView Graph，它带有 main 方法和一些其他绘制各种东西的方法。当应用程序启动时，视图绘制得很好，我没有问题。但是当我尝试使用按钮（位于同一个 UIView 上）重绘一些东西时，我得到了错误：

```
CGContextDrawPath: invalid context 0x0 
```

按钮未调用主 drawRect 方法。另外，如果我尝试使用：

```
[self setNeedsDisplay:YES]; 
```

我得到错误：

viewcontroller 没有可见的@interface 声明选择器“setNeedsDisplay”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:17:11.033

`setNeedsDisplay`不适用于子视图....它仅适用于 viewController 的视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:55:12.207

Try to use this method

```
- (void)setNeedsLayout 
```

[setNeedsLayout](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/setNeedsLayout) from developer.apple.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:30:28.913

您正在调用实例，而您需要在其`setNeedsDisplay`上`UIViewController`调用它`UIView`。

```
[self.view setNeedsDisplay:YES]; 
```

# mongodb - Mongorestore：ns 名称太长，最大大小为 128

> ID：15773726
> 
> 赞同：8
> 
> 时间：2013-04-02T20:27:12.703
> 
> 标签：mongodb, mongorestore

我的 Mongo 数据库很少有自定义名称的索引，因为它们中的字段太多，无法自动生成名称而不会因“ns name too long”错误而失败。

当我尝试使用 mongorestore 从备份中恢复此数据库时 - 它失败并出现此错误（“ns 名称太长，最大大小为 128”）。似乎 mongorestore 试图根据它们的内容生成索引名称，而不是仅仅恢复数据库中实际使用的任何名称。

到目前为止，我想出的唯一解决方案是将 mongorestore 与 --noIndexRestore 一起使用，然后手动重新创建所有索引，但这显然是一种糟糕的方法。有没有更好的方法来解决这个问题？

我在使用 MongoDB 2.4.1 时遇到了这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T18:53:22.447

`mongorestore`在重新创建转储期间存在的索引时使用相同的名称。您可以在 2.2 及更高版本的 .metadata.json 文件中查看这些名称，在 2.2 之前，这些名称在 .system.indexes.bson 文件中（它在 BSON 中，因此您可以使用`bsondump`命令检查它）。

我发现您可能会收到此错误的一种方法是，如果您要恢复到不同名称的数据库或集合，并且新名称比原始名称长。如果您使用原始数据库名称和集合名称，将使用原始索引名称（自定义或默认），然后它将是合法名称。

# c++ - 哈希表模板化实现的问题

> ID：15773727
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:14.610
> 
> 标签：c++, hashtable

我必须创建一个模板化的哈希表，但是每当我尝试编译它时，我都会收到几个错误，说有未声明的标识符，并且模板不是类型名。问题出在 hashTable 类中。

```
//Author: Angelo Todaro
//hashTable.h
//File for the implementation of the hash table

#include "person.h"
#include "student.h"
#include "administrator.h"
#include "faculty.h"
#include <list>

using namespace std;
#ifndef hashTable_H
#define hashTable_H

template<class T, typename T2, typename T3>
class hashTable{
public:
    /*Default Constructor
    *Constructs an object of the hashTable class*/
    hashTable();

    /*Default Destructor
    *Destructs an object of the hashTable class*/
    ~hashTable();

    /*Accessor Method for size of table
    *Provides user access to the value of the size of the table*/
    T getSize() const;

    /*Modifier Method for size of table
    *Provides the user access to change the value of the size of the table*/
    void setSize(T newSize);

    /*getEntry
    *Retrieves an entry from the table based on the key*/
    T2 getEntry(T3 searchEntry);

    /*putEntry
    *Puts a new entry in its proper location in the table*/
    void putEntry(T2 newEntry);

    /*removeEntry
    *Removes an entry from its location in the table*/
    void removeEntry(T3 searchEntry);

private:
    T size;
    list<T2> table[size];
    list<T2>::iterator iter;

    /*hashKey
    *Hashes the given key in order to find its location in the table*/
    T hashKey(T3 key);

};

#endif

//Implementation section

    /*Default Constructor
    *Constructs an object of the hashTable class*/
    template<typename T, typename T2, typename T3>
    hashTable<T,T2,T3>::hashTable(){

    }

    /*Default Destructor
    *Destructs an object of the hashTable class*/
    template<typename T, typename T2, typename T3>
    hashTable<T,T2,T3>::~hashTable(){

    }

    /*Accessor Method for size of table
    *Provides user access to the value of the size of the table*/
    template<typename T, class T2, class T3>
    T hashTable<T,T2,T3>::getSize() const{
        return size;
    }

    /*Modifier Method for size of table
    *Provides the user access to change the value of the size of the table*/
    template<typename T, typename T2, typename T3>
    void hashTable<T,T2,T3>::setSize(T newSize){
        size = newSize;
    }

    /*getEntry
    *Retrieves an entry from the table based on the key*/
    template<typename T, typename T2, typename T3>
    T2 hashTable<T,T2,T3>::getEntry(T3 searchEntry){
        int key = hashKey(searchEntry);
        if(table[key]==NULL)
        {
            return -1;
        }
        else
        {
            while(iter != table[key].end() || searchEntry != *iter->getKey())
                iter++;
            if(iter == table[key].end() && searchEntry != *iter->getKey())
            {
                return -1;
            }
            else
            {
                *iter->print();
            }
        }
    }

    /*putEntry
    *Puts a new entry in its proper location in the table*/
    template<typename T, typename T2, typename T3>
    void hashTable<T,T2,T3>::putEntry(T2 newEntry){
        int key = hashKey(newEntry->getKey());
        table[key].push_back(newEntry);
    }

    /*removeEntry
    *Removes an entry from its location in the table*/
    template<typename T, typename T2, typename T3>
    void hashTable<T,T2,T3>::removeEntry(T3 searchEntry){
        int key = hashKey(searchEntry);
        while(iter != table[key].end() || searchEntry != *iter->getKey())
            iter++;
        if(*iter->getKey() == searchEntry)
            table[key].erase(iter);
        else
            cout << "Can not delete Person (M" << number << "), NOT found!" << endl;
    }

    /*hashKey
    *Hashes the given key in order to find its location in the table*/
    template<typename T, typename T2, typename T3>
    T hashTable<T,T2,T3>::hashKey(T3 key){
            return key/1000;
    } 
```

这是我收到的错误

```
1>------ Build started: Project: lab12, Configuration: Debug Win32 ------
1>Build started 4/2/2013 3:20:56 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\lab12.unsuccessfulbuild".
1>ClCompile:
1>  recordsOffice.cpp
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2327: 'hashTable<T,T2,T3>::size' : is not a type name, static, or enumerator
1>          c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(57) : see reference to class template instantiation 'hashTable<T,T2,T3>' being compiled
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2065: 'size' : undeclared identifier
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): warning C4346: 'std::list<T2>::iterator' : dependent name is not a type
1>          prefix with 'typename' to indicate a type
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): error C2146: syntax error : missing ';' before identifier 'iter'
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2327: 'hashTable<T,T2,T3>::size' : is not a type name, static, or enumerator
1>          with
1>          [
1>              T=int,
1>              T2=Person,
1>              T3=int
1>          ]
1>          c:\users\angelo\google drive\advanced data structures\lab12\lab12\recordsoffice.h(35) : see reference to class template instantiation 'hashTable<T,T2,T3>' being compiled
1>          with
1>          [
1>              T=int,
1>              T2=Person,
1>              T3=int
1>          ]
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2065: 'size' : undeclared identifier
1>  lab12-main.cpp
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2327: 'hashTable<T,T2,T3>::size' : is not a type name, static, or enumerator
1>          c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(57) : see reference to class template instantiation 'hashTable<T,T2,T3>' being compiled
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2065: 'size' : undeclared identifier
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): warning C4346: 'std::list<T2>::iterator' : dependent name is not a type
1>          prefix with 'typename' to indicate a type
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): error C2146: syntax error : missing ';' before identifier 'iter'
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(51): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2327: 'hashTable<T,T2,T3>::size' : is not a type name, static, or enumerator
1>          with
1>          [
1>              T=int,
1>              T2=Person,
1>              T3=int
1>          ]
1>          c:\users\angelo\google drive\advanced data structures\lab12\lab12\recordsoffice.h(35) : see reference to class template instantiation 'hashTable<T,T2,T3>' being compiled
1>          with
1>          [
1>              T=int,
1>              T2=Person,
1>              T3=int
1>          ]
1>c:\users\angelo\google drive\advanced data structures\lab12\lab12\hashtable.h(50): error C2065: 'size' : undeclared identifier
1>  Generating Code...
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.84
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:47:17.053

问题就在这里

```
private:
    T size;
    list<T2> table[size]; 
    list<T2>::iterator iter; 
```

**1 这是错误的。**

```
list<T2> table[size]; 
```

这不是列表的声明方式。即使这是一个普通数组，你也不能`size`在那里使用，因为 size 不是`static`. 编译器不知道`size`创建实例`hashTable`以分配数组时的值。

应该只是

```
list<T2> table; 
```

**2 这需要类型名**

```
list<T2>::iterator iter; 
```

编译器需要知道您正在声明`iter`并且 a 需要类型说明符。您可以通过在声明中添加 typename 来帮助他。

应该

```
typename list<T2>::iterator iter; 
```

所以总结一下

```
T size;
list<T2> table;  // HERE
typename list<T2>::iterator iter; // HERE 
```

如果你想要一**组列表**（不是一个列表）。您可以使用列表的向量（而不是数组）。

```
vector< list<T2> > table;   OR
list< list<T2> > table; 
```

（取决于您的需要。[有关容器的更多信息](http://www.cplusplus.com/reference/stl/)）

但要小心这一点。复制这些对象可能很昂贵。尽可能通过引用传递或使用指针。

# sql-server - 使用 SQL 'LIKE' 语句

> ID：15773728
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:20.673
> 
> 标签：sql-server, sql-like

我正在尝试根据在文本框中输入的内容从 SQL 数据库中提取一些数据。所有这些都有效，但是我在构建我想要的查询时遇到了一些麻烦。

我的查询是这样的：

```
select emp.firstname, emp.lastname, emp.EmployeeNo, jc.Department

from EmployeeMaster emp

    inner join JobClass jc on emp.jobclass = jc.JobClass

where emp.firstname LIKE 'Joe P Smith' AND emp.lastname LIKE 'Joe P Smith' 
```

来自网页的输入将采用“Joe P Smith”的格式，这是我无法控制的。在数据库中，“名字”存储为“Joe P”，“姓氏”存储为“Smith”。我需要如何更改查询以返回正确的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:32:21.020

你可以试试

```
MS SQL Server:
... where rtrim(emp.firstname) + ' ' + rtrim(emp.lastname) = string_being_passed

DB2, Oracle: 
... where trim(emp.firstname) || ' ' || trim(emp.lastname) = string_being_passed 
```

但是名字很难（“不平凡”）。要处理像“John P. Smith”这样的变体，您可能需要一个商业名称匹配产品。

注意：根据数据、列的类型以及数据库处理尾随空格的方式，您可能不需要`trim`or `rtrim`（如有疑问，请将它们留在那里）。真正的等价物`trim(str)`是`ltrim(rtrim(str))`但`rtrim`可能就足够了，除非您需要担心数据库数据中的前导空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:47:04.630

以下不是 100% 完美的解决方案，而是在大多数情况下都有效的折衷方案，也许您可​​以接受：

如果您不介意同时查找`Joe Smith` **和** `Joe P Smith`，则可以忽略中间的字母/名称：
使用空格分隔用户输入，但仅使用第一个和最后一个单词，而忽略中间的那些。

无论用户输入`Joe Smith`,`Joe P Smith`还是`Joe Jack John Smith`，您只需使用`Joe`and`Smith`并生成以下 SQL：

```
where emp.firstname LIKE 'Joe%' AND emp.lastname LIKE '%Smith' 
```

需要注意的是，当`Joe Smith`和`Joe P Smith` **all** `Joe Jack John Smith`实际存在于数据库中时，查询将返回所有三个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:33:37.273

连接两列。

```
Where firstname+' '+lastname like 'John smith' 
```

编辑：如果“John p”没有存储为名字，只有“John”，那么你还有其他问题。您可能会错误地假设所有名称都是一个单词并将所有内容子串到第一个空格，但随后您消除了诸如“Mary Ann”之类的名称

# ruby - 脑筋急转弯储物柜打开还是关闭？在红宝石

> ID：15773729
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:24.917
> 
> 标签：ruby

尝试编写经典的脑筋急转弯储物柜问题（打开/关闭 100 个储物柜的问题）。当我运行我编写的代码时，它并没有给出 10 个打开的储物柜的正确答案，而是说所有储物柜都已关闭。我想我在循环中遗漏了一些东西……有什么建议吗？谢谢。

```
 def lockerproblem
      j = 0
      lockers = []

      while j < 100
       lockers << "open"
       j += 1
      end 

       a = 1
       i = 0

       while a <= 100
       while i < 100
        if ( i + 1 ) % a == 0
          if lockers[i] == "open"
            lockers[i] = "closed"
          else
            lockers[i] = "open"
          end
        end
        i += 1
      end
      a += 1
    end

    lockers[3] = "open"

    lockers.each do |text|
      puts text
    end
  end

  lockerproblem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:07:14.017

您可以通过进行三个更改来获得正确的答案：

*   `i`需要在每次迭代开始时重置为 0`a`
*   储物柜应该开始`closed`
*   删除多余的`lockers[3] = "open"`行

更新后的代码：

```
def lockerproblem
    j = 0
    lockers = []

    while j < 100
        lockers << "closed"
        j += 1
    end

    a = 1
    i = 0

    while a <= 100
        i = 0
        while i < 100
            if ( i + 1 ) % a == 0

              if lockers[i] == "open"

                lockers[i] = "closed"
              else

                lockers[i] = "open"
              end
            end
            i += 1
        end
        a += 1
    end

    lockers.each do |text|
        puts text
    end
end

lockerproblem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:41:26.440

考虑这个数组初始化：

```
lockers = ["open"] * 100 
```

想想你的`i`变量：什么时候设置为 0？这对内循环意味着什么？例如，

```
a, b = 0, 0
while a < 2
  while b < 2
    puts "a=#{a}, b=#{b}"
    b += 1
  end
  a += 1
end 
```

输出：

```
a=0, b=0
a=0, b=1 
```

换句话说，你*看*不到：

```
a=0, b=0
a=0, b=1
a=1, b=0
a=1, b=1 
```

为什么？因为`b`递增到`2`, 永远不会重置，内部循环只执行一次。也许您将初始值设置`i`在错误的位置，其中“错误”表示“在外循环之外”。

最后，打开第四个储物柜 ( `locker[3]`) 将抛出结果。

有一些小的调整可以使代码更容易理解（哎呀`open?`，为了这个小例子，我什至可以在 String 上定义一个方法），但这应该足以让你得到你期望的答案。

* * *

这种猴子补丁并不总是一个好主意，尤其是在 Ruby 内部。但它允许一些简单和漂亮的东西像这样：

```
> lockers.find_all(&:closed?).size
=> 10 
```

# visual-studio-2012 - 在visual studio 2012中映射域名

> ID：15773730
> 
> 赞同：1
> 
> 时间：2013-04-02T20:27:29.047
> 
> 标签：visual-studio-2012, localhost

有没有办法将域名映射到本地项目而不是使用 localhost？

我需要在本地解析一个实时网址以用于开发目的

# php - 通过 PhpMyAdmin 的 SSH 隧道

> ID：15773731
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:34.643
> 
> 标签：php, ssh, nginx, phpmyadmin

我知道这是一个重复的问题，但我尝试了很多资源，但没有一个对我有用。我的公司有一个我通过 SSH 连接到的 Amazon Bastian 服务器。从那里，我可以通过 SSH 访问各种 IP 地址来管理数据库。我希望这些数据库在 phpmyadmin 中可用。据我所知，这是：

1.  通过 putty SSH 进入亚马逊主服务器。使用端口 3307 的隧道，当我访问 localhost:3307 时，我收到一条消息“欢迎使用 nginx！”。我认为这意味着我已连接到亚马逊。

2.  我在这里尝试了额外的主机配置说明：http: [//shallop.com/2011/04/howto-use-phpmyadmin-to-remote-admin-mysql-dbs-via-ssh-tunnel/](http://shallop.com/2011/04/howto-use-phpmyadmin-to-remote-admin-mysql-dbs-via-ssh-tunnel/)

当我重新启动 phpmyadmin 并尝试我的新连接字符串时，它只是挂起。我在哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:55:04.523

您的问题中缺少一些信息，因此我将做出一些假设：

*   您正在本地网络服务器上运行 phpmyadmin
*   您想在这台机器上创建隧道以连接到只能通过您的 Amazon Bastian 服务器访问的远程 mysql 服务器

那么这应该取决于你如何设置端口转发，因为你越来越欢迎使用 nginx！听起来您已将端口 3307 转发到远程计算机上的端口 80。

试试这个 ssh 命令：

```
$ ssh -N <username>@<Bastian server IP> -L 3307:<internal ip of mysql server>:3306 
```

*   -N 表示您不想执行任何命令（只是端口转发）
*   3307是要转发的本地端口
*   是 Bastian 服务器可以用来连接 MySQL 服务器的 IP
*   3306 是 MySQL 在远程机器上运行的端口

现在在本地机器上运行以下命令：

```
$ telnet localhost 3307 
```

你应该看到你输出的mysql版本号，一些随机字符，然后是mysql_native_password，然后连接将关闭。

然后，您应该能够将 phpmyadmin 配置为使用 localhost 和端口 3307 连接到您的远程服务器。

# javascript - Javascript Web App 在 IE 中不起作用

> ID：15773732
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:36.313
> 
> 标签：javascript, internet-explorer, browser

所以我早些时候制作了这个网络应用程序，终于解决了所有的错误......所以我想。我不做任何编程，所以这真的是我第一次尝试 javascript，现在我迷路了。我的应用程序在 Chrome 和 Firefox 中运行良好，但在 IE 中没有任何反应。如果您在 IE 中启动调试模式，它可以工作，但普通用户显然不会这样做。

链接到应用程序[http://www.nst.com/voltdropcalc.asp](http://www.nst.com/voltdropcalc.asp)

如果有人需要，我会发布代码。似乎这是一个简单的解决方法，但我没有开始尝试解决它的知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:31:07.387

删除或注释掉 JavaScript 中的 console.log 语句，除非控制台打开，否则 IE 会阻塞它们。

例如第 569 行：`console.log(volts, acdc, amps, length, awg, ohm);`

# c# - 哪个通用快速集合（集合）提供 getIndexFromValue 或类似功能？

> ID：15773733
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:39.643
> 
> 标签：c#, collections, set

我需要一个集合（没有重复值）并提供快速插入时间。我还需要能够获得一个值的索引。

伪代码：

```
Set.Insert(value)
Set.GetIndex(value) 
```

值相对于其他值的位置无关紧要，不需要排序。

是否有提供此功能的 C# 通用集合？或者有没有办法通过组合不同的集合类型来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:38:04.950

您可以使用`HashSet<T>` 它不允许重复并且速度很快。 [http://msdn.microsoft.com/en-us/library/bb359438.aspx](http://msdn.microsoft.com/en-us/library/bb359438.aspx)
如果要获取值的索引，可以将 转换`HashSet`为数组并使用`Array.IndexOf(value)`; 但是，`HashSet`允许您将值本身用作索引，因此您可能不再需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:45:51.623

我不确定你为什么需要这样做`id = search[key]`，如果这是理想的，但我会把它扔在这里......

你可以试试[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。

这并不理想（就您的搜索而言） - 但在内部它保留了`IndexOfKey`您所需要的方法。基本上，它是一个基于`ArrayList`保留一系列项目的实现+您可以`Dictionary<>`快速访问等。

来源很容易找到（但出于显而易见的原因，我不会在此处链接它）-您可以使用它-或对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:58:09.513

你可以围绕两个字典做一个包装器

```
class MySet<T> {
    Dictionary<T,int> valToIndex;
    Dictionary<int,T> indexToVal;
    int curIndex;
    Add(T newItem) {
        curIndex++;
        valToIndex.Add(newItem, curIndex);
        indexToVal.Add(curIndex, newItem);
    }
    T this[int index] {
       get {
           return indexToVal[index];
       }
    }
    GetIndexOf(T value) {
        return valToIndex[value];
    }
} 
```

当然这并不完整，但你明白了。您可能想要添加更多错误检查。

# javascript - Google Maps Javascript API - 如何删除与成人相关的搜索结果

> ID：15773735
> 
> 赞同：1
> 
> 时间：2013-04-02T20:27:43.220
> 
> 标签：javascript, google-maps, google-maps-api-3

几个月前，我使用 google maps javascript api 开发了一个地图应用程序，到目前为止它运行良好，没有来自我们的客户的投诉。

但是，最近我们收到了一项投诉，称我们的地图显示了与成人相关的地点内容。我想完全删除这些结果。我们的应用程序已部署到数百个客户端，因此仅根据其 id 删除位置标记对我们来说是行不通的。

理想情况下，我想设置一个不搜索的某些关键字列表 - （即“性”、“脱衣舞俱乐部”等 - 酒吧很好。）

现在，我们正在使用关键字列表，例如......艺术画廊、保龄球联盟、赌场、健身房、电影出租、电影院、博物馆、夜总会、公园、水疗中心、体育场、动物园......我们的娱乐部分。一些与成人相关的地方正在这些地方出现。（可能在电影出租或夜总会中）

请记住，我们的应用在此处使用**javascript** api Places 库：[https ://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

我考虑过做这样的事情的想法......

if (results[i].name.search(/sex/i) == -1){if (results[i].name.search(/strip club/i) == -1){做点什么}}

但这不是一个非常全面的选择，因为很多东西仍然可以通过。

有人对我如何解决这个问题有任何见解吗？我认为没有任何本机 javascript maps api 选项。我们没有使用 JSON，所以我认为我们不能使用“正常”搜索查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:18:55.040

好的，我认为没有任何本地方法可以做到这一点，但我会分享我所做的作为一种解决方法，以防万一其他人偶然发现这个问题......

```
<cfif entertainmentFilter EQ 0>
    <cfset Entertainment_sub = 'Art Galleries,Bowling Allies,Casinos,Gyms,Movie Rentals,Movie Theaters,Museums,Night Clubs,Parks,Spas,Stadiums,Zoos'>
<cfelse>
    <cfset Entertainment_sub = 'Art Galleries,Bowling Allies,Gyms,Movie Theaters,Museums,Parks,Spas,Stadiums,Zoos'>
</cfif> 
```

我在这里使用 Coldfusion 进行设置，但它是一个简单的条件语句，可以使用任何语言进行设置。基本上只有一个“过滤器”变量，当设置为 1 时会删除任何更有可能找到成人内容的搜索词。

# python - 比较python中的旋转列表

> ID：15773738
> 
> 赞同：2
> 
> 时间：2013-04-02T20:27:56.747
> 
> 标签：python, readability

我正在尝试比较两个列表以确定一个是否是另一个的旋转（循环排列），例如：

```
a = [1, 2, 3]
b = [1, 2, 3] or [2, 3, 1] or [3, 1, 2] 
```

都是匹配的，而：

```
b = [3, 2, 1] is not 
```

为此，我有以下代码：

```
def _matching_lists(a, b):
    return not [i for i, j in zip(a,b) if i != j]

def _compare_rotated_lists(a, b):
    rotations = [b[i:] + b[:i] for i in range(len(b))]
    matches = [i for i in range(len(rotations)) if _matching_lists(a, rotations[i])]
    return matches 
```

这会建立一个 b 的所有可能旋转的列表，然后比较每一个。是否可以在不建立中间列表的情况下做到这一点？性能并不重要，因为列表通常只有四个项目长。我主要关心的是代码的清晰度。

列表将始终具有相同的长度。

最佳答案（保留匹配轮换列表）似乎是：

```
def _compare_rotated_lists(a, b):
    return [i for i in range(len(b)) if a == b[i:] + b[:i]] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:33:56.397

您不需要该功能`_matching_lists`，因为您可以使用`==`：

```
>>> [1,2,3] == [1,2,3]
True
>>> [1,2,3] == [3,1,2]
False 
```

我建议[`any()`](http://docs.python.org/3/library/functions.html#any)在找到匹配项后立即返回，并使用生成器表达式来避免在内存中构造旋转列表：

```
def _compare_rotated_lists(a, b):
    """Return `True` if the list `a` is equal to a rotation of the list `b`."""
    return any(a == b[i:] + b[:i] for i in range(len(b))) 
```

您可能会考虑检查列表的长度是否相同，以快速拒绝简单的情况。

```
 return len(a) == len(b) and any(a == b[i:] + b[:i] for i in range(len(b))) 
```

正如评论中所讨论的，如果您知道 和 的元素是`a`可`b`散列的，您可以使用以下方法进行初始比较[`collections.Counter`](http://docs.python.org/3/library/collections.html#collections.Counter)：

```
 return Counter(a) == Counter(b) and any(a == b[i:] + b[:i] for i in range(len(b))) 
```

如果您知道 和 的元素`a`具有`b`可比性，则可以使用以下方法进行初始比较`sorted`：

```
 return sorted(a) == sorted(b) and any(a == b[i:] + b[:i] for i in range(len(b))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:42:43.413

如果我理解正确，您想查找是否`b`是 的排列`a`，但不`a`反转？有一个非常简单、易读且通用的解决方案：

```
>>> from itertools import permutations 
>>> a = (1, 2, 3)
>>> b = (3, 1, 2)
>>> c = (3, 2, 1)
>>> results = set(permutations(a)) - set((a, tuple(sorted(a, reverse=True))))
>>> b in results
True
>>> c in results
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:54:02.973

怎么样：

```
def canon(seq):
    n = seq.index(min(seq))
    return seq[n:] + seq[:n]

def is_rotation(a, b):
    return canon(a) == canon(b)

print is_rotation('abcd', 'cdab') # True
print is_rotation('abcd', 'cdba') # False 
```

无需生成*所有*旋转来确定两个列表是否相互旋转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T20:42:34.993

我用几个例子测试了这段代码，它运行良好。

```
def compare(a,b):
firstInA = a[0]
firstInB = b.index(firstInA)
secondInA = a[1]
secondInB = b.index(secondInA)
if (secondInB == firstInB + 1) or (secondInB == 0 and firstInB == 2):
    return True
else:
    return False 
```

我试过：

```
a = [1,2,3]
b = [1,2,3]
print(compare(a,b))
c = [1,2,3]
d = [3,1,2]
print(compare(c,d))
e = [1,2,3]
f = [3,2,1]
print(compare(e,f)) 
```

他们返回`True`, `True`,`False` 这仅适用于大小为 3 的列表。如果您想要更多，请在`if`语句中添加thirdInA 和thirdInB，并且您总是需要比列表的长度少一个，因为如果您知道除了一个到位，那么就只剩下最后一个了。

# scala - 将 Map[A,B] 转换为 Map[B, Set[A]] 并再次转换回来

> ID：15773739
> 
> 赞同：0
> 
> 时间：2013-04-02T20:27:59.583
> 
> 标签：scala

我有一个游戏板，它被建模为 Map[Location,Player]。对于某些计算，我想将其转换为 Map[Player,Set[Location]]。例如，如果我们简化并使用符号来表示键和值，我想将其转换为：

```
Map('a -> 'X, 'b -> 'O, 'c -> 'X, 'd -> 'O) 
```

进入这个：

```
Map('O -> Set('b, 'd), 'X -> Set('a, 'c)) 
```

（我在写这个问题时想出了一个解决方案，贴在下面。希望对此发表评论。也许还有其他更好的方法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:51:50.963

分组后，您可以使用`mapValues`：

```
m.groupBy(_._2).mapValues(_.keySet) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:27:59.583

回答自己，因为我在写问题时想出了一个相当优雅的解决方案：

```
grid.groupBy(_._2).map(x => x._1 -> x._2.keySet) 
```

有兴趣听听是否有更好的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T20:42:49.330

```
m.foldLeft(Map.empty[Symbol, Set[Symbol]].withDefaultValue(Set.empty)) { case (acc, (k, v)) => acc.updated(v, acc(v) + k) } 
```

# c# - 从asp.net c#设置style.display

> ID：15773744
> 
> 赞同：3
> 
> 时间：2013-04-02T20:28:12.177
> 
> 标签：c#, javascript, asp.net

我在 ASP.NET 网页中使用面板来隐藏或显示控件选择以响应客户端按钮单击。简单脚本切换可见性

```
<script>
    function SetToAddSurvey() {

    var x = document.getElementById("NewSurveyPanel");
    if (x.style.display == "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
}
</script> 
```

我现在需要在数据库事务之后切换服务器端的显示属性。我知道我不能使用代码

```
NewSurveyPanel.visible = false; 
```

因为它会导致控件不被渲染，并且上面的 jscript 在下次调用时会失败。

```
NewSurveyPanel.Attributes["display"] = "block"; 
```

也不起作用。

有一个简单的解决方案吗？

塔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:30:27.483

试试这个

```
NewSurveyPanel.Attributes["style"] = "display: none"; 
```

或者

```
NewSurveyPanel.Attributes["style"] = "visibility: hidden"; 
```

这样做是为了像这样呈现开始标签：

```
<div ....... style="display: none" ....> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:30:52.383

使用 CSS 类：

```
.hidden {
   display: none;
} 
```

……

```
 NewSurveyPanel.CssClass = "hidden"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:30:43.983

**代码背后**

```
NewSurveyPanel.Attributes["style"] = "display: block"; 
```

**ASPX**

```
<asp:Panel ID="NewSurveyPanel" runat="server">
    test
</asp:Panel>
<asp:Button runat="server" OnClientClick="SetToAddSurvey(); return false;" />
<script>
    function SetToAddSurvey() {

        var x = document.getElementById("<%= NewSurveyPanel.ClientID%>");
        alert(x);
        if (x.style.display == "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
</script> 
```

# php - 没有 Zend ACL 的 Zend Navigation 权限

> ID：15773745
> 
> 赞同：0
> 
> 时间：2013-04-02T20:28:15.467
> 
> 标签：php, zend-framework, acl, zend-navigation, zend-acl

好的，我有一个代码可以生成如下的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
    <nav>
        <main>
            <label>Home</label>
            <alias>main</alias>
            <uri>/</uri>
            <privilege>
                <super_admin>super_admin</super_admin>
                <reg_user>reg_user</reg_user>
            </privilege>
            <status>active</status>
            <sprite>sprite.png</sprite>
            <pages>
                <article>
                    <label>Article</label>
                    <alias>article</alias>
                    <uri>/article</uri>
                    <privilege>
                        <super_admin>super_admin</super_admin>
                        <reg_user>reg_user</reg_user>
                    </privilege>
                    <status>active</status>
                    <pages>
                        <insert>
                            <label>Insert</label>
                            <alias>insert</alias>
                            <uri>/article/insert</uri>
                            <privilege>
                                <super_admin>super_admin</super_admin>
                            </privilege>
                            <status>active</status>
                        </insert>
                        [...]
                    </pages>
                </article>
                [...]
            </pages>
        </main>
    </nav>
</configdata> 
```

我的问题是我的 URI 不是 Zend Acl 的形式，因为我点击了[这个链接](https://stackoverflow.com/questions/887947/get-all-modules-controllers-and-actions-from-a-zend-framework-application#answer-1189292)，帮助我获取了所有 URI，管理每个组的权限（在上面的代码中命名为 super_admin 和 reg_user）并将它们保存在数据库。

问题是现在，我想呈现一个菜单，其中仅包含特定组可访问的特定项目。这意味着，使用上面的 XML，如果我使用**super_admin**输入，我将有一个像这样的菜单：

```
- Home
    - Article
        - Insert 
```

如果我使用**reg_user**输入，我的菜单应该是：

```
- Home
    - Article 
```

我怎样才能做到这一点？

我正在使用 Zend Framework 1.11.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:58:01.370

如果你想在没有 Zend ACL 的情况下这样做，我建议为菜单编写自己的部分。然后您使用 xml 文件中的菜单项权限检查当前用户角色（可能存储在 Zend_Registry 中）。

在这里您可以看到如何使用自定义菜单部分[https://stackoverflow.com/a/1255289/760866](https://stackoverflow.com/a/1255289/760866)

您可以像这样读取自定义 xml 属性：

```
$properties = new Zend_Config($page->GetCustomProperties());
$privilege = $properties->privilege; 
```

希望有帮助！

# ssas - SSAS 数据挖掘：测试和训练数据集...请解释

> ID：15773748
> 
> 赞同：1
> 
> 时间：2013-04-02T20:28:29.400
> 
> 标签：ssas

有人可以解释当您拆分数据集进行测试和训练时会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:41:08.623

简而言之，您的数据挖掘模型的准确性是通过根据您的训练集进行预测来评估的，该训练集的结果在测试集中是已知的。

[有关数据挖掘模型测试和验证的更多信息 (MSDN)](http://technet.microsoft.com/en-us/library/ms174493.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T22:10:44.337

为了能够测试您构建的预测分析模型，您需要将数据集分成两组：训练数据集和测试数据集。这些数据集应该是随机选择的，并且应该是实际人口的良好代表。

```
Similar data should be used for both the training and test datasets.

Normally the training dataset is significantly larger than the test dataset.

Using the test dataset helps you avoid errors such as overfitting.

The trained model is run against test data to see how well the model will perform. 
```

[更多信息](http://www.dummies.com/programming/big-data/data-science/how-to-test-the-predictive-analysis-model/)

# javascript - 删除嵌套字段的 Javascript 引发错误

> ID：15773749
> 
> 赞同：0
> 
> 时间：2013-04-02T20:28:31.380
> 
> 标签：javascript, ruby-on-rails-3

我是 Rails 和 Javascript 的菜鸟。[在遵循 Ryan Bates 的 Railscasts 196](http://railscasts.com/episodes/196-nested-model-form-part-1)和[197](http://railscasts.com/episodes/197-nested-model-form-part-2)（嵌套模型表单）时，我制作了一个具有嵌套属性的应用程序。

在我使用复选框删除字段之前，一切正常。但是当我在我的 _question_fields.html.erb 中使用它时：

`<%= link_to_function 'remove', 'remove_fields(this)' %>`

和 /assets/javascripts/application.js 中的这个 javascript 函数：

```
function remove_fields(link) {
  $(link).previous("input[type=hidden]").value = "1";
  $(link).up(".fields").hide();
} 
```

没发生什么事。我已确保将`<%= javascript_include_tag "application" %>`其包含在`views/layouts/application.html.erb`

当我单击删除链接时，Firefox (Firebug) 和 Chrome (Built-in) 上的 Javascript 控制台会引发此错误。

```
Uncaught ReferenceError: $ is not defined 
```

我错过了一些非常基本的东西吗？任何帮助，将不胜感激。我正在使用 Ruby 1.9.3、Rails 3.2.3 和 Mongoid 3.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:09:48.170

[好的，解决方案（如bfavaretto](https://stackoverflow.com/questions/15773749/javascript-to-remove-nested-fields-throws-error?noredirect=1#comment22422859_15773749)所指出的）很简单。我们需要使用`prototype`gem 并将它的引用添加到`application.js`.

**1）在你的`Gemfile`，添加：**

```
gem 'prototype-rails'
# You might want to comment out #gem 'jquery-rails' 
```

**2) 在`application.js`中，最重要的是，添加：**

```
//= require prototype
//= require prototype_ujs
//= require effects
//= require dragdrop
//= require controls 
```

**3）确保这一行被删除/评论`config/enviroments/development.rb`：**

```
#config.action_view.debug_rjs = true 
```

**4) 运行 Bundler 并重启 Rails Server**

```
$ bundle install
$ rails s         # This is important! 
```

# python - 面向对象的python构造函数和类方法

> ID：15773751
> 
> 赞同：0
> 
> 时间：2013-04-02T20:28:42.100
> 
> 标签：python, class, methods

```
#!/usr/bin/env python

class SportsCar(object):

        def __init__(self,make,colour):
                self.make = make
                self.colour = colour
                self.horn = "BEEEEEEEEPPPPPPP"

        def honk(self):
                #now we can make some noise!
                print self.make,'  ',self.colour,'  ',self.horn
                print "Done "

mycar = SportsCar('Honda','silver')
#print mycar.make 
#print mycar.colour

print mycar.honk()

print "Good Bye!!" 
```

上述代码的输出如下所示。

```
Honda    silver    BEEEEEEEEPPPPPPP
Done 
None
Good Bye!! 
```

输出的前两行

```
Honda    silver    BEEEEEEEEPPPPPPP
Done 
```

这是由 mycar.honk() 打印的。

我也明白第4行

```
Good Bye!! 
```

我不明白第三行中的“无”从何而来？有人可以解释一下吗？

还有另一个相关的问题

declerations 之间有什么区别

```
class SportsCar: 
```

和

```
class SportsCar(object): 
```

我一直在不同的地方看到这两种说法。？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T20:29:48.037

默认情况下，函数*总是*有一个返回值`None`。

您正在打印方法的返回值`.honk()`，这是默认值`None`：

```
print mycar.honk() 
```

你可以在`mycar.honk()` *没有*`print`声明的情况下打电话。该方法自己打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:32:01.257

您没有在 honk 方法中返回任何内容，因此默认情况下它返回 None 。

# grails - 在 Grails 中注入开发人员特定的设置

> ID：15773755
> 
> 赞同：2
> 
> 时间：2013-04-02T20:29:01.917
> 
> 标签：grails, configuration

现在我们的 grails 应用程序的 conf 中有一个 DataSource.groovy 文件。它有这样的设置...

```
 development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:mysql://localhost/mydb?useUnicode=yes&characterEncoding=UTF-8"
            username = "user"
            password = "password"
        }
    } 
```

当不同的开发人员将为其数据库使用不同的主机/用户名/密码时，在不更改此文件并尝试记住不签入对源代码控制的更改的情况下交换每个开发人员设置的好方法是什么？随着应用程序的增长，需要在不同开发人员的机器上更改的设置数量也会增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:54:04.657

我设置了我的开发环境来查找包含用户名和密码的环境变量，这些变量是由开发人员在运行之前创建的`grails run-app`。

```
 development {
        dataSource {
          //dbCreate = "update" // one of 'create', 'create-drop','update'
            url = "jdbc:oracle:thin:@myserver:1521:SID"
            username = System.env.grails_user
            password = System.env.grails_password
            dialect = org.hibernate.dialect.OracleDialect
        }
    } 
```

为了防止混淆，我在文件的开头放了以下注释块（我们在 Windows 中开发）。

```
/***********************************************************************
 * The development and test environments expect to find the database
 * username and password in the following system environment variables.
 *
 *   grails_user
 *   grails_password
 *
 * Before trying grails run-app or grails test, be sure to set the
 * variables.  In Windows, you can type the following.
 *
 *   set grails_user=<your username>
 *   set grails_password=<your password>
 *   grails run-app
 *
 * The system will remember the password as long as you don't close the
 * cmd window.
 *
 **********************************************************************/ 
```

这有点麻烦，但是将密码从我们的源代码和修订控制系统中排除是值得的。

# iphone - iOS BLAS - 加速框架差的矩阵乘法性能

> ID：15773762
> 
> 赞同：1
> 
> 时间：2013-04-02T20:29:27.190
> 
> 标签：iphone, matrix, simd, lapack, blas

我正在为 iPhone 实现基于切线距离的 OCR 解决方案，它严重依赖于大小为 253x7 的浮点矩阵的快速乘法。为了概念验证，我实现了自己的简单矩阵例程，如下所示：

```
Matrix operator*(const Matrix& matrix) const {
    if(cols != matrix.rows) throw "cant multiply!";

    Matrix result(rows, matrix.cols);
    for(int i = 0; i < result.rows; i++){
        for(int j = 0; j < result.cols; j++){
            T tmp = 0;
            for(int k = 0; k < cols; k++){
                tmp += at(i,k) * matrix.at(k,j);
            }
            result.at(i,j) = tmp;
        }
    }

    return result;
} 
```

如您所见，它非常基本。在 PoC 表现良好之后，我决定通过合并[Accelerate Framework](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/BLAS_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40009457)的矩阵乘法（大概使用 SIMD 和其他花哨的东西来完成繁重的工作......）进一步推动性能限制：

```
Matrix operator*(const Matrix& m) const {
    if(cols != m.rows) throw "cant multiply!";

    Matrix result(rows,m.cols);

    cblas_dgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans, rows, m.cols, cols, 1, matrix, cols, m.matrix, m.cols, 1, result.matrix, result.cols);

    return result;
} 
```

令人震惊（至少对我而言），上面的代码将矩阵相乘花费了两倍的时间！我尝试使用单精度而不是双精度，因为我怀疑它与 CPU 的字长有关（32 位浮点数与 32 位 ARM 上的 64 位双精度），但没有性能提升......

我究竟做错了什么？我的 253x7 矩阵是否太小而无法在幼稚的实现中显着提升性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:02:48.710

几个问题：

1.  253 x 7 乘以多大的矩阵？如果你正在做，比如说，253x7 * 7x1，那么一个通用的乘法例程将把大部分时间花在修边代码上，而经过调整的库几乎没有什么能比一个简单的实现更快地做到这一点.

2.  你在什么硬件上计时，什么 iOS 版本？特别是对于双精度，较旧的硬件和较旧的 iOS 版本在性能方面更受限制。例如，在 Cortex-A8 上，双精度算术是完全非流水线的，因此库几乎无法击败幼稚的实现。

如果另一个矩阵不是小得离谱，并且硬件是最新的，请提交一个错误（意外的低性能*绝对*是一个错误）。具有高纵横比的小矩阵很难在通用矩阵乘法中快速制作，但它仍然是一个很好的 bug。

如果硬件/iOS 版本较旧，您可能仍想使用 Accelerate，因为它应该在较新的硬件/软件上表现得更好。

如果另一个矩阵很小，那么可能没什么可做的。ARM 上没有双精度 SIMD，矩阵太小而无法从缓存阻塞中受益，矩阵的维度也太小而无法从循环展开中受益。

* * *

如果您*先验地*知道您的矩阵将恰好是 253x7 * 7x???，那么通过完全展开矩阵乘法的内部维度，您应该能够比简单的实现和任何通用库做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:44:20.363

基本上，是的。“x7”部分可能太小而无法使 CBLAS 的开销值得。进行函数调用的成本，加上 CBLAS 函数为您提供的所有灵活性，需要一段时间才能弥补。每次您传递一个选项时，`CblasNoTrans`请记住其中有一个`if()`管理该选项的选项。`cblas_dgemm`特别是累加到 C 中，因此它必须读取前一个结果元素，应用乘法，然后在存储之前加法。这是很多额外的工作。

您可能想尝试 vDSP 功能而不是 CBLAS。`vDSP_mmul`有点简单，不会累积到结果中。我`vDSP_*`在小型数据集（几千个元素）上运气不错。

也就是说，我的经验是，幼稚的 C 实现通常可以在小型数据集上相当快。避免函数调用是一个巨大的好处。说到这一点，请确保您的`at()`呼叫是内联的。否则，您将在循环中浪费大量时间。您可以通过使用指针加法在矩阵中连续移动而不是乘法（通过 随机访问需要`[]`）来加速 C 实现。在这么小的矩阵上，它可能值得，也可能不值得；您必须进行一些分析。查看汇编程序的输出很有启发性。

请记住，您绝对必须在设备上分析这些内容。模拟器中的性能无关紧要。不仅仅是模拟器更快；这是完全不同的。在模拟器上快得多的东西在设备上可能要慢得多。

# sql-server - 没有聚合的 SQL Server 2012 PIVOT

> ID：15773765
> 
> 赞同：11
> 
> 时间：2013-04-02T20:29:43.213
> 
> 标签：sql-server, tsql, pivot, sql-server-2012

我有以下示例数据：

```
Id    Name     Category
-----------------------
1     Joe       A
2     Joe       B
3     Joe       D
4     Mary      A
5     Mary      C
6     Mary      D 
```

我想显示一个人所属的类别，如下所示：

```
Name   CategoryA  CategoryB  CategoryC  CategoryD
--------------------------------------------------
Joe       X          X                     X
Mary      X                     X          X 
```

1 和 0 可以用来代替 X 和空白。

对我来说，这听起来像是一个 PIVOT 问题。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-02T20:33:03.003

有几种方法可以转换数据。有些使用聚合函数，有些则不使用。但即使您正在旋转字符串，您仍然可以应用聚合。

**与 CASE 聚合：**

```
select name,
  max(case when category = 'A' then 'X' else '' end) CategoryA,
  max(case when category = 'B' then 'X' else '' end) CategoryB,
  max(case when category = 'C' then 'X' else '' end) CategoryC,
  max(case when category = 'D' then 'X' else '' end) CategoryD
from yourtable 
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/174a6/15)

**静态枢轴：**

`PIVOT`即使值是字符串，您仍然可以使用该函数来转换数据。如果您有已知数量的类别，则可以对查询进行硬编码：

```
select name, 
  coalesce(A, '') CategoryA, 
  coalesce(B, '') CategoryB, 
  coalesce(C, '') CategoryC, 
  coalesce(C, '') CategoryD
from
(
  select name, category, 'X' flag
  from yourtable
) d
pivot
(
  max(flag)
  for category in (A, B, C, D)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/174a6/16)。

**动态枢轴：**

如果您有未知数量的类别，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(category) 
                    from yourtable
                    group by category
                    order by category
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT  ', coalesce(' + QUOTENAME(category)+', '''') as '+QUOTENAME('Category'+category)
                    from yourtable
                    group by category
                    order by category
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name, ' + @colsNull + ' 
              from 
             (
                select name, category, ''X'' flag
                from yourtable
            ) x
            pivot 
            (
                max(flag)
                for category in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/174a6/17)。

**多个连接：**

```
select c1.name,
  case when c1.category is not null then 'X' else '' end as CategoryA,
  case when c2.category is not null then 'X' else '' end as CategoryB,
  case when c3.category is not null then 'X' else '' end as CategoryC,
  case when c4.category is not null then 'X' else '' end as CategoryD
from yourtable c1
left join yourtable c2
  on c1.name = c2.name
  and c2.category = 'B'
left join yourtable c3
  on c1.name = c3.name
  and c3.category = 'C'
left join yourtable c4
  on c1.name = c4.name
  and c4.category = 'D'
where c1.category = 'A' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/174a6/19)

所有查询都会给出结果：

```
| NAME | CATEGORYA | CATEGORYB | CATEGORYC | CATEGORYD |
--------------------------------------------------------
|  Joe |         X |         X |           |         X |
| Mary |         X |           |         X |         X | 
```

# php - 使用javascript在onload期间隐藏php创建的div

> ID：15773773
> 
> 赞同：0
> 
> 时间：2013-04-02T20:30:22.293
> 
> 标签：php, javascript, html, onload

我在页面加载时运行下面的 javascript 函数 shoh() 来隐藏 div。这适用于 html 硬编码的 div，但似乎不适用于通过 php 创建的 div。我是否正确假设 javascript 在 php 创建 div 之前首先运行，这就是为什么它们没有被隐藏？如果是这样，有没有其他方法可以在创建这些 div 后隐藏它们？如果禁用javascript，它们需要默认显示吗？

与 onload 一起运行的代码：

```
<script type="text/javascript">
function closeAllDivs() {
  shoh('g1');
  shoh('g2');
  shoh('g3');
  shoh('g4');
    }   
</script>
<BODY onLoad="closeAllDivs();"> 
```

隐藏div的javascript：

```
function shoh(id) { 

if (document.getElementById) { // DOM3 = IE5, NS6
    if (document.getElementById(id).style.display == "none"){
        document.getElementById(id).style.display = 'block';
        filter(("img"+id),'imgin');         
    } else {
        filter(("img"+id),'imgout');
        document.getElementById(id).style.display = 'none';         
    }   
} else { 
    if (document.layers) {  
        if (document.id.display == "none"){
            document.id.display = 'block';
            filter(("img"+id),'imgin');
        } else {
            filter(("img"+id),'imgout');    
            document.id.display = 'none';
        }
    } else {
        if (document.all.id.style.visibility == "none"){
            document.all.id.style.display = 'block';
        } else {
            filter(("img"+id),'imgout');
            document.all.id.style.display = 'none';
        }
    }
  }
} 
```

创建 div 的 php 代码：

```
for ($i=0; $i < count($this->items); $i++){
  <div style="display: block;" id="g<? echo $i ?>">
  ... code that displays items
  </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:45:10.340

php 是否制作了 div 或者它们是否被硬编码并不重要——当 HTML 进入浏览器时，它已经是同样的事情了。服务器处理 PHP - 当它离开服务器并前往浏览器时，不再有 PHP。

我建议使用`window.onload`而不是`<body onload="">`

```
window.onload = function() {
    closeAllDivs();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:06:52.720

感谢 Wolfman Joe 让我知道问题可能与事情的顺序无关。这告诉我 shoh() 函数可能失败并因此中断执行......所以关闭 div 的代码从未执行过。解决方案是对 shoh() 函数进行检查，以首先确保 div 存在，然后再尝试更改其属性。事实证明，并不是所有的 div $i 都被创建了。

```
function shoh(id) { 
  if (document.getElementById) { // DOM3 = IE5, NS6
    if (document.getElementById(id)){
        if (document.getElementById(id).style.display == "none"){
            document.getElementById(id).style.display = 'block';
            filter(("img"+id),'imgin');         
        } else {
            filter(("img"+id),'imgout');
            document.getElementById(id).style.display = 'none';         
        }   
    }   
  }
} 
```

# javascript - 在 CouchDB 中使用数组键过滤

> ID：15773777
> 
> 赞同：3
> 
> 时间：2013-04-02T20:30:29.843
> 
> 标签：javascript, filter, nosql, key, couchdb

我想通过一个值过滤文档，该值包含返回我制作的设计视图的键字段中的数组。

```
// _design/products/_view/all
function(doc) {
    if (doc.type && doc.type == 'producto'){
        emit([doc.created, doc.user], doc);
    }
} 
```

结果：

```
{"total_rows":3,"offset":0,"rows":[
{"id":"64243f77b5135758d1f0d55c250001f5","key":[1364931254000,"samuelb1311"],"value":{"_id":"64243f77b5135758d1f0d55c250001f5","_rev":"3-50f67780d6388f3aad469dbdd1081b9e","nombre":"limon ","precio":250,"user":"samuelb1311","created":1364931254000,"type":"producto"}},
{"id":"64243f77b5135758d1f0d55c2500058e","key":[1364931381000,"samuel123"],"value":{"_id":"64243f77b5135758d1f0d55c2500058e","_rev":"3-c1f893af011ee5a3687b0a9eeedc3467","nombre":"lima ","precio":360,"user":"samuel123","created":1364931381000,"type":"producto"}},
{"id":"64243f77b5135758d1f0d55c25000e7a","key":[1364931447000,"samuelb1311"],"value":{"_id":"64243f77b5135758d1f0d55c25000e7a","_rev":"3-2b05730dfcf3407b7335ec029e5cfdc5","nombre":"naranja ","precio":25,"user":"samuelb1311","created":1364931447000,"type":"producto"}}
]}

```

我需要键中的日期来按从第一个插入到最后一个插入的升序和降序对信息进行排序，反之亦然。
那么，如何按用户过滤信息，例如用户“samuelb1311”或用户“samuel123”？
我尝试了 startkey 和 endkey 之类的东西，但这对我不起作用，那是返回空响应。
谢谢你能给我带来的一些信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:36:04.123

您需要颠倒顺序或时间戳和用户，以便能够仅获取某个用户的条目。那是因为当你想使用 startkey/endkey 时，你只能从 key 排序的条目中得到一个连续的范围。然后像这样使用 startkey 和 endkey：

```
startkey=["foo"]&endkey=["foo","a"] 
```

看看[http://wiki.apache.org/couchdb/View_collat​​ion?](http://wiki.apache.org/couchdb/View_collation?action=show&redirect=ViewCollation) action=show&redirect=ViewCollat​​ion 。

# telerik - Sitecore 的富文本编辑器的内部链接管理器能否记住您最后的位置？

> ID：15773787
> 
> 赞同：4
> 
> 时间：2013-04-02T20:31:01.130
> 
> 标签：telerik, sitecore, sitecore6, radeditor

## 问题

是否可以记住最后链接的项目并在下次使用“*插入链接”*对话框时选择该项目？

## 背景

我们的 Sitecore 内容编辑器使用富文本编辑器 (Telerik RadEditor) 来编辑我们网站上的 HTML 内容。有时他们需要在同一页面上创建多个位于相似区域的链接（例如，几个不同的相关文章）。目前，当他们单击“插入链接”按钮时，他们会被带到“*插入链接”*对话框，并在内容树中选择当前项目。他们浏览到他们想要链接的项目，然后单击*链接*。然后他们去创建另一个链接，它会再次打开*插入链接*对话框到当前项目，而不是他们刚刚链接的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:20:12.897

我找到的解决方案需要更改`Website\sitecore\shell\Controls\Rich Text Editor\RichText Commands.js`文件并且只要您不重新加载页面就可以工作。**通过将信息存储在cookie**中而不是使用变量**prevId**来编辑其他页面时，您可以轻松地将其扩展为工作。

首先，您需要在文件开头定义变量：

```
var prevId = null; 
```

每次插入 Sitecore 链接时，我们都会将最后选择的项目 ID 分配给该变量。

第二步是在选择链接后扩展`scInsertSitecoreLink`函数以分配`prevId`变量：

```
function scInsertSitecoreLink(sender, returnValue) {

    if (!returnValue) {
        return;
    }

    prevId = returnValue.url.match(/id\=[a-fA-F0-9]{32}/g);
    if (prevId) {
        prevId = prevId[0].substr(3);
    }

    ... rest of the scInsertSitecoreLink goes here 
```

最后一步是修改`RadEditorCommandList["InsertSitecoreLink"]`它使用`prevId`变量值的函数，如果它在尝试分配`scItemID`保存当前项目 id 之前设置：

```
RadEditorCommandList["InsertSitecoreLink"] = function(commandName, editor, args) {\

    ... here goes the original code of the function up to 
    if (!id) { 
        ... and the code in the bracket
    }

    ... and now we try to assign the prevId which was set after the last link was chosen
    if(!id && prevId) {
        id = prevId;
    }

    ... and here goes the rest of the function
    if (!id) {
        id = scItemID;
    } 
```

# cuda - CUDA 共享内存在调试时不排他性阻塞

> ID：15773790
> 
> 赞同：3
> 
> 时间：2013-04-02T20:31:10.253
> 
> 标签：cuda, shared-memory, nsight

基本上，我很难准确理解这里出了什么问题。

共享内存在调试时似乎没有以块独占方式运行。正常运行代码时，不会打印任何内容。但是，如果我尝试对其进行调试，则会在块之间共享共享内存并到达 print 语句。

这是一个示例，显然这不是非常有用的代码，但它在我的系统上重现了该问题。难道我做错了什么？这是调试器的错误还是预期行为？

```
__global__ 
void test()
{
    __shared__ int result[1];
    if (blockIdx.x == 0 && blockIdx.y == 0 && blockIdx.z == 0)
        result[0] = 4444;
    else
    {
        if (result[0] == 4444)
            printf("This should never print if shared memory is unique\n");
    }
} 
```

并启动它：

```
test<<<dim3(8,8,1), dim3(8,8,1)>>>(); 
```

我也完全有可能完全误解了共享内存。

谢谢您的帮助。

**其他信息：** 我使用的是 GTX 460。为项目设置了 Compute_20 和 sm_20。我正在使用 nsight 3.0 预览版在 Visual Studio 2010 中编写代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:53:38.020

两者之间有一个微妙但重要的区别

> 块之间共享共享内存并到达打印语句

和

> 共享内存被连续的块重用并且到达打印语句

你假设前者，但后者是真正发生的事情。

除了第一个块之外，您的代码正在从未初始化的内存中读取。这本身就是未定义的行为。C++（和 CUDA）不保证静态声明的内存在进入或超出范围时设置为任何值。你不能指望它`result`不会有 4444 的值，尤其是当它可能存储在与可能已将其设置为 4444 值的前一个块相同的共享暂存空间中时。

代码的整个前提和这个问题都是有缺陷的，你不应该从你看到的结果中得出任何结论，即未定义的行为是未定义的。

# android - 来自 url 的 android MediaPlayer 使它听起来更响亮/放大（不仅仅是音量）

> ID：15773792
> 
> 赞同：1
> 
> 时间：2013-04-02T20:31:23.287
> 
> 标签：android, android-mediaplayer

我使用 android MediaPlayer 类从 url 播放 mp3 文件。

（一切正常）

我想放大声音，让它听起来更响亮。

**我的意思不是仅仅提高设备音量**，而是实际放大声音。

即使以损失一些质量为代价。

（我希望它在代码中完成，而不是使用 3rd 方软件）也许使用某种 java 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:35:16.143

`MediaPlayer`对此没有开箱即用的方法。做你想做的事情确实朝着音频操纵的方向发展。这意味着，您应该获取`byte stream`并修改它以满足您的需要。例如，阅读 MP3 规范并尝试提高幅度。

更好的方法是使用专业的桌面编辑程序编辑您当前的 mp3 文件，并以通常的方式播放文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:37:53.373

根据我的理解，MediaPlayer 中可能不允许直接这样做，您可能需要一些 mp3 操作算法或库来执行此操作。我正在研究这个，但您可以使用以下内容作为起点：

*   [音效](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html)

看起来你不应该直接使用，而是它的子类之一：

1.  [均衡器](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)
2.  [虚拟器](http://developer.android.com/reference/android/media/audiofx/Virtualizer.html)
3.  [低音增强](http://developer.android.com/reference/android/media/audiofx/BassBoost.html)
4.  [预置动词](http://developer.android.com/reference/android/media/audiofx/PresetReverb.html)
5.  [环境混响](http://developer.android.com/reference/android/media/audiofx/EnvironmentalReverb.html)

也许它会帮助你，但我不完全确定如何实现它。会调查的。

# php - 使用 php server self 进行表单操作？

> ID：15773793
> 
> 赞同：1
> 
> 时间：2013-04-02T20:31:29.567
> 
> 标签：php, mysql

我有一个配置文件页面，它使用 php 包含来获取页面上显示的 reviews.php 和 posts.php。

页面reviews.php有一个表单，我试图让这个表单提交/使用操作php服务器自我但是当我出于某种原因这样做时，它会忽略页面reviews.php上的mysql查询，而不是将其插入它将表 ptb_reviews 插入到 ptb_posts 中。所以这里的问题是它在posts.php上执行查询，我不知道为什么会这样，有人可以帮我吗？

这是reviews.php 页面

```
<?php ob_start(); ?>
 <?php 
// check if the review form has been sent
if(isset($_POST['review_content']))
{
    $content = $_POST['review_content'];
        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $content = stripslashes($content);
        }
        //We check if all the fields are filled
        if($_POST['review_content']!='')
        {

            {
            $sql = "INSERT INTO ptb_reviews (id, from_user_id, to_user_id, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$profile_id."', '".$content."');";
            mysql_query($sql, $connection);

            $_SESSION['message']="<div class=\"infobox-wallpost\"><strong>Thank You</strong> - Your review has been sent to the Escort and is awaiting approval.</div><div class=\"infobox-close4\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

        } }
}

?> 
<div class="reviewcontent">
 <?php
$profile_bits = get_profile_bits();
while ($profile = mysql_fetch_array($profile_bits)) { ?>  
<?php if ($user['account_type'] == "Escort"){
?>
<?php
 $days = $reviews['date_added'];

function days_from_date2($days) {

       $age = date_diff(date_create($days), date_create('now'))->d;  
       return $age;
}

?>

<div class="reviewcontent1">
<?php
    $reviews_set = get_reviews();
    ?>
    <br/>
    <h3><span class="underline"><?php echo "".$profile['display_name'].""; ?>'s Latest Reviews</span></h3>
    <br/> 

    <?php
    if(mysql_num_rows($reviews_set) > 0) {
        while ($reviews = mysql_fetch_array($reviews_set)) {
            $age = days_from_date($reviews['date_added']);
            ?>
            <div class="review_box" id="reviewcase">
             <div class="review-content2">
             <?php echo "{$reviews['content']}"; ?>
             </div>
             <div class="message_pic2">
             <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\"  src=\"data/photos/{$reviews['from_user_id']}/_default.jpg\"></a>";?>

             </div>

             <div class="reviews_footer2">
             <?php echo "Posted by {$reviews['display_name']}"; ?>&nbsp;<?
        $datetime1 = new DateTime();
        $datetime2 = new DateTime ($reviews['date_added']);
        $interval = $datetime1->diff($datetime2);
        $mdhms = explode('-',$interval->format('%m-%d-%H-%i-%s'));

$labels = Array(' months', ' days', ' hours', ' minutes', ' seconds');
$i = 0;
foreach($mdhms as $t){
  if($t > 0) break;
  $i+=1;
}
        echo "about ".$t.$labels[$i]." ago"; ?>

          </div>

             </div>

             <?
$account_type = account_type();
while ($acctype = mysql_fetch_array($account_type)) 

 if ($acctype['account_type'] == 'Client')  { 

 echo "
 <div class=\"add_review_text\">add a review now</div>";

    } ?>

             <?
        }

        }else{

    if (!logged_in()) {

echo "
<div class=\"review_box_example\"><div class=\"example_review_pic\"><img width=50px height= 50px src=\"data/photos/0/post.jpg\"/>
</div><div class=\"example_review_text2\">{$profile['display_name']}, you were fantastic!<br/>I can not wait to meet with you again, you were very professional and made me feel very comfortable.<br/><br/>John x</div><div class=\"example_review_pic2\"></div></div><div class=\"example_box_container2\"><div class=\"review_example_arrow2\"></div><div class=\"review_example_box2\"></div><div class=\"review_example_text2\"><strong>Here's an Example</strong></div></div>";

    }else{

    if (logged_in()) {

echo "
<div class=\"review_box_example\"><div class=\"example_review_pic\"><img width=50px height= 50px src=\"data/photos/0/post.jpg\"/>
</div><div class=\"example_review_text2\">{$profile['display_name']}, you were fantastic!<br/>I can not wait to meet with you again, you were very professional and made me feel very comfortable.<br/><br/>John x</div><div class=\"example_review_pic2\"></div></div><div class=\"example_box_container2\"><div class=\"review_example_arrow2\"></div><div class=\"review_example_box2\"></div><div class=\"review_example_text2\"><strong>Here's an Example</strong></div></div>"; ?>

<?
$account_type = account_type();
while ($acctype = mysql_fetch_array($account_type)) 

 if ($acctype['account_type'] == 'Client')  { 

 echo "
 <div class=\"add_review_text\">add a review now</div>";

    } ?>

    <?

    $account_type = account_type();

     if ($acctype['account_type'] == 'Escort') {
echo "<div class=\"infobox-noreviews\"><i>{$profile['display_name']} doesn't currently have any posts on his wall.<br/>Why not post a comment to his wall now.</i></div>";

 }

        }

?>

<?

}  }
?>
<?php

{?>      

<? } } } ?>

</div>
</div>

<div class="reviewcontent2">

i love me 
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
<textarea name="review_content" id="review_content" maxlength="180" cols="33" rows="5" class="review_input_box2" style="resize: none;"></textarea>
<input name="add_review" type="image" src="http://www.playtimeboys.com/assets/img/icons/save-edit.png" BORDER="0" ALT="SUBMIT!"class="review_submit4" /></form>

</div>

<script>
    $(".reviewcontent2").hide();

    $('.add_review_text').click(function () {
        if ($('.reviewcontent1').is(":visible")) {
             $(".reviewcontent1").fadeOut(300);
             $('.reviewcontent2').delay(400).fadeIn(300);

        } else if ($('.reviewcontent2').is(":visible")) {
            $('.reviewcontent2').fadeOut(300);
            $('.reviewcontent1').delay(400).fadeIn(300);

        }
    });
</script>
<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:37:01.393

要将表单提交到当前页面，这似乎是您正在尝试执行的操作，只需指定一个空操作：

```
<form action="" method="post"> 
```

该表单现在将提交到与当前页面相同的 URL。

# ruby-on-rails-3 - 存储在数据库中的 Rails 会话

> ID：15773796
> 
> 赞同：3
> 
> 时间：2013-04-02T20:31:47.053
> 
> 标签：ruby-on-rails-3, session

我有一个显示事件列表的页面。单击事件时，它会将您带到登录页面，并将会话 ID 与页面一起保存。当我转到下一页时，它总是发送最后一个会话变量。

```
<% @events.each do |e| %>
<%= link_to e.event_name, sessions_new_path %>
<%= e.event_start %> - <%= e.event_stop %>
<% session[:event_id] = e.id %>
<%= session[:event_id] %>
<br>
<% end %> 
```

这表明 session[:event_id] 存在并且它存储在变量中，但是当我单击链接时，它将发送循环的最后一个 session[:event_id]。任何想法都会有所帮助。我正在考虑将变量传递到下一页或将其存储到数据库单元中的选项，但不确定会话如何存储在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:17:35.007

假设您使用 ActiveRecord 支持的数据库，您可以通过编辑 your_app/config/initializers/session_store.rb 来配置应用程序以将会话存储在数据库中：

```
YourApp::Application.config.session_store :active_record_store 
```

确保注释掉或删除该行：

```
# YourApp::Application.config.session_store :cookie_store, :key => '_your_app_session' 
```

此外，还有一些 auth gem 可以在登录后将用户重定向到受保护的页面。如果您还没有，请查看[Devise](https://github.com/plataformatec/devise)和/或[authlogic](https://github.com/binarylogic/authlogic)。就个人而言，我更喜欢设计。

# jquery - Highcharts 条形图 - 如何设置最小条形宽度/长度

> ID：15773799
> 
> 赞同：5
> 
> 时间：2013-04-02T20:32:01.927
> 
> 标签：jquery, highcharts

如果特定值相对于最大值非常小，我们在整个应用程序中都会遇到条形图无法呈现的问题。以下 jsFiddle 说明了这个问题：

[http://jsfiddle.net/yahsukram/dQHQf/](http://jsfiddle.net/yahsukram/dQHQf/)

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'bar'
        },
        title: {
            text: null
        },
        xAxis: {
            title: {
                text: null
            },
            labels: {
                enabled: false
            }
        },
        yAxis: {
            min: -50000,
            max: 5000000,
            title: {
                text: null
            }
        },
        tooltip: {
            enabled: false
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false
        },
        series: [{
            categories: ['John', 'Jane', 'Bob', 'Bill', 'Jesus'],
            data: [5000000, 20000, 200, -50000, -10000]
        }]
    });
}); 
```

请注意，200 和 -10000 的条形根本不渲染。有没有办法将最小宽度设置为 2 或 3 像素？我已经尝试了几件事并四处搜索，但没有找到任何真正解决这个问题的东西。我们有很多不同的图表展示了这种行为，并且根据我们获取的数据类型，上/下值可能会发生巨大变化。

增加容器的宽度不是一种选择，因为我们正在以列格式呈现许多图表，这给了我们有限的空间。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:45:07.803

我认为您想要的选项是 minPointLength：

```
plotOptions: {
            bar: {
                minPointLength:5,
                dataLabels: {
                    enabled: true
                }
            } 
```

# mysql - 在 CONCAT_WS 之前订购

> ID：15773804
> 
> 赞同：1
> 
> 时间：2013-04-02T20:32:18.190
> 
> 标签：mysql, concatenation

我有一个包含 3 个电话列的表，我需要运行一些魔术来尝试获取一些电话号码可以在它们之间匹配的记录，问题是电话号码可能在 2 个记录之间的不同字段上。

所以我认为带有 3 个电话号码的规范字符串应该允许我进行比较，问题在于规范化过程。有没有办法做到这一点？我正在添加一个片段来说明我需要做什么。

表是：

```
╔═════╦══════════╦══════════╦══════════╗
║ ID  ║  Phone1  ║  Phone2  ║  Phone3  ║
╠═════╬══════════╬══════════╬══════════╣
║ 123 ║ 555-1234 ║ 666-1235 ║          ║
║ 124 ║ 666-1235 ║          ║ 555-1234 ║
║ 125 ║ 555-8520 ║ 777-7410 ║ 444-9999 ║
╚═════╩══════════╩══════════╩══════════╝ 
```

我要寻找的结果是

```
╔═════╦══════════════════════════════╗
║ ID  ║         ConcatPhones         ║
╠═════╬══════════════════════════════╣
║ 123 ║ 555-1234||666-1235           ║
║ 124 ║ 555-1234||666-1235           ║
║ 125 ║ 444-9999||555-8520||777-7410 ║
╚═════╩══════════════════════════════╝ 
```

无论如何，我可以通过简单的 CONCAT_WS 变体或高效的存储过程来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:46:50.660

如果值确实为 NULL 且不为空，则以下内容应该有效：

```
select id,
       concat_ws('||', Phone1, Phone2, Phone3)
from t 
```

参考在[这里](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)：

> CONCAT_WS() 不会跳过空字符串。但是，它会跳过分隔符参数之后的任何 NULL 值。

为了处理订购，我会选择：

```
select id,
       group_concat(phone Separator '||' order by phone) as ConcatPhones
from (select t.id,
             (case when nums.n = 1 then phone1
                   when nums.n = 2 then phone2
                   when nums.n = 3 then phone3
              end) as phone
       from t cross join
            (select 1 as n union all select 2 union all select 3) nums
     ) p
where phone is not null
group by id 
```

这将过滤掉任何没有电话号码的 id。

你也可以用一个巨大的`case`声明来做到这一点，尽管这似乎是一场噩梦：

```
select t.id,
       (case when phone1 < phone2 and phone2 < phone3 then concat_ws('||', phone1, phone2, phone3)
             when phone1 < phone3 and phone3 < phone2 then concat_ws('||', phone1, phone3, phone2)
              . . .  through the remaining 4 permuatiations when all three are present
             when phone1 is null and phone2 < phone3 then concat_ws('||', phone2, phone3)
             . . . through the remaining 5 permutuations when one is NULL
             when phone1 is null and phone2 is null then phone3
              . . . through the remaining 2 permutations when two are NULL
        end) as ConcatPhones
from t 
```

这样更有效率。3个电话号码是可行的。我不想和他们五个打交道。

# curl - NSS：未找到客户端证书（未指定昵称）？

> ID：15773806
> 
> 赞同：27
> 
> 时间：2013-04-02T20:32:23.110
> 
> 标签：curl, openssl, centos, libcurl, centos6

我正在尝试通过 Centos 6 系统上的 PHP curl 访问第三方服务，该系统附带针对 NSS 而不是 OpenSSL 编译的 curl 和 libcurl。

这给我带来了问题，每次我尝试访问该服务时都会收到此错误`NSS: client certificate not found (nickname not specified)`。

我的理解是我需要在 NSS 数据库中安装证书。

我正在寻找有关如何执行此操作的分步说明（请记住，我需要它来处理从 Nginx 服务器调用的 PHP curl 函数）

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-10T15:19:42.753

尝试在证书文件名前加上“./”，或使用完整路径。从 curl 联机帮助页：

> 如果 curl 是针对 NSS SSL 库构建的，则此选项 [--cert] 可以告诉 curl 在环境变量 SSL_DIR（或默认情况下 /etc/pki/nssdb）定义的 NSS 数据库中使用的证书昵称。如果 NSS PEM PKCS#11 模块 (lib-nsspem.so) 可用，则可以加载 PEM 文件。**如果要使用当前目录中的文件，请在其前面加上“./”前缀，以免与昵称混淆。**

（强调我的）

或者，这里有一些导入 NSS 证书数据库的说明，虽然我没有使用它们： [http ://rcritten.fedorapeople.org/nss_compat_ossl.html](http://rcritten.fedorapeople.org/nss_compat_ossl.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-08T08:47:23.110

我在 Centos 7 上遇到了同样的问题。调试后它与超时有关。

因此，如果您看到此问题并使用`curl_setopt($curl, CURLOPT_TIMEOUT_MS, 300);` 则检查需要多长时间。如果它在您的超时期限附近。那是问题所在，与任何证书无关。

在超时的情况下，我期待 Curl 会出现一些超时错误，但这似乎没有发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T16:20:42.333

当我尝试访问使用简单密码身份验证的 FTPS 服务器时输入错误密码时，我收到了与 curl 相同的错误消息。它与证书无关。

# c# - 更快地加载 asp.net 数据网格

> ID：15773807
> 
> 赞同：0
> 
> 时间：2013-04-02T20:32:27.150
> 
> 标签：c#, asp.net

我有一个 asp.net 数据网格，它会提取大量数据并需要一些时间来加载。

有没有办法让它加载更快。

我可以分页..在初始页面加载时显示前 10 条记录，然后休息。

# sublimetext2 - 将文件 (foo.txt) 插入到插入位置的打开文件 (bar.txt) 中

> ID：15773814
> 
> 赞同：2
> 
> 时间：2013-04-02T20:32:51.560
> 
> 标签：sublimetext2, sublimetext

请问，将文件（foo.txt）插入到插入位置的打开文件（bar.txt）中的最佳方法是什么？

最好有一个打开文件对话框来选择要插入的任何内容。

文字处理等价物在此处为“插入文件”。

这是 的替代品`foo.sublime-snippet`，它可以链接到其他地方的表单文件：

```
import sublime, sublime_plugin    

class InsertFileCommand(sublime_plugin.TextCommand):
    def run(self, edit):    

        v = self.view    

        template = open('foo.txt').read()    

        print template    

        v.run_command("insert_snippet", {"contents": template}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:26:36.847

从文本命令中，您可以访问当前视图。您可以使用 获取光标位置`self.view.sel()`。我不知道如何在 python 中做 gui 的东西，但你可以使用快速面板（类似于[FuzzyFileNav](https://github.com/facelessuser/FuzzyFileNav)）进行文件选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:58:22.180

这是我对[https://github.com/mneuhaus/SublimeFileTemplates](https://github.com/mneuhaus/SublimeFileTemplates)的非官方修改，它允许我`insert-a-file-here`使用快速面板。它适用于 OSX 操作系统（运行 Mountain Lion）。

到目前为止，我看到的唯一缺点是无法正确翻译`\\`表单文件中的双斜杠——它只是作为单斜杠插入`\`。在我的 LaTex 表单文件中，双斜杠`\\`表示行尾，如果前面有`~`. 解决方法是在实际表单文件中的每次出现处插入一个额外的斜线（即，放置三个斜线，但要理解运行插件时只会插入两个斜线）。表单文件需要是 LF 结尾，我使用的是 UTF-8 编码——CR 结尾没有正确翻译。稍作修改，也可以有多个表单文件目录和/或文件类型。

```
import sublime, sublime_plugin
import os    

class InsertFileCommand(sublime_plugin.WindowCommand):    

    def run(self):
        self.find_templates()
        self.window.show_quick_panel(self.templates, self.template_selected)

    def find_templates(self):
        self.templates = []
        self.template_paths = []    

        for root, dirnames, filenames in os.walk('/path_to_forms_directory'):
            for filename in filenames:
                if filename.endswith(".tex"): # extension of form files
                    self.template_paths.append(os.path.join(root, filename))
                    self.templates.append(os.path.basename(root) + ": " + os.path.splitext(filename)[0])    

    def template_selected(self, selected_index):
        if selected_index != -1:
            self.template_path = self.template_paths[selected_index]    

            print "\n" * 25
            print "----------------------------------------------------------------------------------------\n"
            print ("Inserting File:  " + self.template_path + "\n")
            print "----------------------------------------------------------------------------------------\n"    

            template = open(self.template_path).read()    

            print template    

            view = self.window.run_command("insert_snippet", {'contents': template})    

            sublime.status_message("Inserted File: %s" % self.template_path) 
```

# iphone - 故事板 UIScrollView contentSize？

> ID：15773815
> 
> 赞同：15
> 
> 时间：2013-04-02T20:32:52.973
> 
> 标签：iphone, objective-c, ipad, uiscrollview, storyboard

我觉得我已经触及了阻止这个的每一个可能的原因，但是我的故事板中有一个 UIScrollView 连接了一个插座，在 viewDidLoad 我设置了 contentSize 以便我可以滚动（是的，比我的帧大小更大）！

但是，无论我更改什么，我都无法滚动！我的滚动视图中有几个文本字段并启用了弹跳功能，因此我可以看到，在测试它的上下移动时，我的子视图在其中，但是无论我将 contentSize 设置为什么，我都无法滚动。

有什么我可能遗漏/应该检查的吗？这是故事板中使用 UIScrollView 的已知问题吗？

更奇怪的是，我可以做这样的事情： `[scrollView setBackgroundColor:[UIColor blueColor]];`而且我有一个蓝色的滚动视图！但设置内容大小失败。

## 编辑

我唯一的代码（否则滚动视图只是放入情节提要视图控制器）：

```
-(void)viewDidAppear:(BOOL)animated
{
    [scrollView setContentSize:CGSizeMake(320, 640)];
} 
```

记录的帧，按预期出现：

```
width: 320.00
height: 504.00 
```

## 编辑 2

事实证明，在我的故事板中删除滚动视图的任何子视图都可以让它滚动得很好。如果我通过情节提要向它添加任何子视图，即使是一个空白的全新 UIButton，它也不会应用 contentSize/允许滚动。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-01-24T09:58:56.107

使用 ViewDidLayoutSubview

```
- (void)viewDidLayoutSubviews
{
    [_scrollView setContentSize:CGSizeMake(320, 500)];
} 
```

UIViewController 的方法调用顺序如下

*   从笔尖醒来
*   viewDidLoad
*   视图将出现
*   viewWillLayoutSubviews
*   viewDidLayoutSubviews
*   viewDidAppear

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T20:41:33.167

viewDidLoad 不是放置依赖于 IB 对象帧大小的代码的好地方。如果您在 viewDidLoad 中记录滚动视图的 contentSize，您将看到它是 (0,0)。将代码（设置内容大小的位置）移动到 viewDidAppear，它将正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T20:40:23.077

检查这些

*   已启用用户交互
*   已连接插座
*   包含的内容大小大于界限
*   滚动启用

例如

```
scrollView.contentSize = CGSizeMake(320, 640); 
```

我的故事板看起来像这样的滚动视图[工作]

![在此处输入图像描述](https://i.stack.imgur.com/1ZeG2.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-29T09:30:08.390

问题很可能与自动布局有关。UIScrollView 在使用 AutoLayout 时需要特别注意。

快速修复 - 将滚动的子视图之一绑定到它的超级视图（滚动视图）的顶部和底部空间。

长话短说：关于 SO 的问题： [UIScrollView 不滚动，无论 contentSize 大](https://stackoverflow.com/questions/21273585/uiscrollview-not-scrolling-regardless-of-large-contentsize/21274071#21274071)， [UIScrollView 都不会滚动，即使在设置了内容大小之后](https://stackoverflow.com/questions/12925571/uiscrollview-will-not-scroll-even-after-content-size-set)， [UIScrollView 也不使用自动布局约束](https://stackoverflow.com/questions/13499467/uiscrollview-doesnt-use-autolayout-constraints)

苹果的文档： [https ://developer.apple.com/library/ios/technotes/tn2154/_index.html](https://developer.apple.com/library/ios/technotes/tn2154/_index.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-28T23:10:11.053

我在**viewDidAppear**中有完全相同的代码行，但它**不起作用**

将其移至**viewDidLayoutSubviews**并正常**工作**。

```
[scrollView setContentSize:CGSizeMake(320, 500)]; 
```

感谢trick14的回答。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-19T02:57:05.097

Trip14 的回答对我有用。我迅速将其编码为：

```
override func viewDidLayoutSubviews() {

          (self.view as! UIScrollView).contentSize = CGSizeMake(600, 600)
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T21:24:05.420

这似乎是一个类似的问题。[其他故事](https://stackoverflow.com/questions/12846351/uiscrollview-contentsize-not-working)

这可能是故事板中的自动布局或约束的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-14T10:04:02.230

故事板的最佳方式：

[![按照图片，最好的方式](https://i.stack.imgur.com/Wz1Un.png)](https://i.stack.imgur.com/Wz1Un.png)

# java - 计算每个字符

> ID：15773819
> 
> 赞同：-1
> 
> 时间：2013-04-02T20:33:02.520
> 
> 标签：java, arrays

注意：对于计数器数组，每个 UTF-16 字符一个，记录每个字符的使用情况。
对于我正在编写的程序，我试图计算特定单词中的每个字符。到目前为止，我有，

```
 public void tally(String word)   
   {  
      if ((word == null) || (word.length() == 0))
      return;

   (Insert here)

   } 
```

因为我有“在此处插入”的地方是我试图统计特定单词中的每个字符的地方。有谁知道简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:36:19.167

*   创建地图
*   从第一个 char 开始对每个字符，检查该字符键是否存在于 map 中，如果存在，则将该键的值加一。
*   如果不存在，则插入字符作为键，值作为一。完成后，打印地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:30:04.873

```
public void tally(String word)   
{  
      int count;
      if (word == null)
      {
           return count;
      }
      else
      {
           char[] ca;
           ca = word.toCharArray();
           for(int i = 0; i < ca.length; i++)
           {
                 count++;
           }
           return count;
      } 
```

这将显示单词中总共有多少个字母。我认为，从此，您可以完成其余的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:40:00.050

这看起来像家庭作业，所以我会给出一些简短的指示

*   [您可以使用toCharArray](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#toCharArray%28%29)将字符串拆分为字符
*   [您可以使用for each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)遍历数组
*   您可以将值存储在[HashMap中](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

# zk - 在另一个 eclipse 项目中访问 zk 国际化标签

> ID：15773822
> 
> 赞同：0
> 
> 时间：2013-04-02T20:33:22.980
> 
> 标签：zk

我的 Eclipse 工作区中有多个项目，并希望在它们之间共享 i3-labels 文件以进行国际化。如何将国际化标签移动到另一个项目的文件夹 (commonProject) 中并查看它们？

现在在 zk.xml 我有：

```
<system-config>
    <label-location>/commonProject/labels/i3-label_es_MX.properties</label-location>
    <label-location>/commonProject/labels/i3-label_fr_FR.properties</label-location>
    <label-location>/commonProject/labels/i3-label.properties</label-location>
</system-config> 
```

但我无法访问标签。（我得到一个空指针）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:48:25.957

您当前的路径是相对 servlet 路径，但 servlet
不会加载您的标签，因为它们没有部署。
您可以添加系统路径，从数据库或 URL 加载标签，
如[ZK-Doc](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Internationalization/Labels#Loading_Labels_from_Multiple_Resources)中所述。

所以它看起来像

```
<system-config>
    <label-location>file:///path/to/my/projects/commonProject/labels/i3-label_es_MX.properties</label-location>
    <label-location>file:///path/to/my/projects/commonProject/labels/i3-label_fr_FR.properties</label-location>
    <label-location>file:///path/to/my/projects/commonProject/labels/i3-label.properties</label-location>
</system-config> 
```

# ruby-on-rails - Ruby on rails：JSON::ParserError 和 instagram 的 500 内部服务器错误

> ID：15773827
> 
> 赞同：0
> 
> 时间：2013-04-02T20:33:41.983
> 
> 标签：ruby-on-rails, json, http

我正在使用 instagram ruby​​ gem。如果我在下面做超过 2 个请求，我得到的错误是什么。

现在，对于前两个请求，它显示了这个

```
Processing by HomesController#index as JS
Processing by HomesController#index as */* 
```

因此，当第三个请求现在发生时，它会误入（如上所述）这个

```
 Completed 500 Internal Server Error in 4525ms

JSON::ParserError (757: unexpected token at '<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" class="hl-en not-logged-in ">
<head>
    <meta charset="UTF-8" />
    <title>Page Not Found &bull; Instagram</title>

    <meta name="robots" content="noimageindex" />

    <link rel="Shortcut Icon" type="image/x-icon" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/images/ico/favicon.ico" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <link rel="apple-touch-icon-precomposed" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/images/ico/apple-touch-icon-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/images/ico/apple-touch-icon-72x72-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/images/ico/apple-touch-icon-114x114-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/images/ico/apple-touch-icon-144x144-precomposed.png" />

    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

        <script type="text/javascript" src="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/scripts/jquery.js"></script>
        <script type="text/javascript" src="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/scripts/bluebar.js"></script>

        <script type="text/javascript" src="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/cache/strings/strings_en.js"></script>
        <script>
window._csrf_token = 'NOTPROVIDED';
window._jscalls = [

];
</script>

<script type="text/javascript" src="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/cache/polyfills/polyfill_old.js"></script>
<script data-main="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/cache/modules/main.js" src="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/scripts/require.js"></script>

        <link rel="stylesheet" type="text/css" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/cache/bluebar/bluebar_new.css" />

    <link rel="stylesheet" type="text/css" href="//d36xtkk24g8jdx.cloudfront.net/bluebar/f4f8a28/cache/distillery/dialog-main.css"/>

</head>
<body class=" p-error dialog-404">

<div class="root">

    <div class="page">

                <header class="top-bar top-bar-new">
    <div class="top-bar-wrapper">
        <h1 class="logo"><a href="/">Instagram</a></h1>

        <div class="top-bar-left">
            <ul class="top-bar-actions">
                <li>
                    <a class="top-bar-home" href="/" label=Home><i></i></a>
                </li>
            </ul>
            <div class="top-bar-search" id="top-bar-search">
                &nbsp;
            </div>
        </div>

        <div class="top-bar-right account-state" id="top_bar_right">
            <ul class="top-bar-actions">

                <li id="link_profile" class="link-signin">
                    <a href="javascript:;" class="loginLink">
                        <i></i>
                        <strong>Log in</strong>
                    </a>
                </li>

            </ul>

          </div>
    </div>
</header> <!-- .top-bar -->

        <div class="main">

    <div class="error-container">

    <h2>Page Not Found</h2>

    <p>This page could not be found.<br />You might have followed an incorrect link.</p>

    </div>

        </div> <!-- .main -->

    </div> <!-- .page -->

    <footer class="page-footer" role="contentinfo">
        <div class="wrapper">
            <nav>
                <ul>
                    <li><a href="/about/us/">About us</a></li>
                    <li><a href="http://help.instagram.com/">Support</a></li>
                    <li><a href="http://blog.instagram.com/">Blog</a></li>
                    <li><a href="/developer/">API</a></li>
                    <li><a href="/about/jobs/">Jobs</a></li>
                    <li><a href="/about/legal/privacy/">Privacy</a></li>
                    <li><a href="/about/legal/terms/">Terms</a></li>
                </ul>
            </nav>

            <p class="copyright">&copy; 2013 Instagram</p>
        </div>
    </footer>

<div id="reactModalMountPoint"></div>
</div> <!-- .root -->

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18105282-1']);
    _gaq.push(['_setDomainName', 'none']);
    _gaq.push(['_setAllowLinker', true]);

    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

</body>
</html>' 
```

我认为标题有问题？既然我是通过ajax来做这个过程的，我怎么能强制它通过JS来处理呢？因为这似乎在这里工作我相信。

这是我的ajax代码

```
{
            $.ajax({
            url: /home,
            method: "post",
            data: {
                // data goes here
            },
            success: function(html)
            {
                if(html)
                {       

                            // html goes here
                }else
                {
                   // html goes here</center>');
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:36:03.293

我认为如果您在特定时间执行多个请求，instagram 会阻止您的请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:37:23.383

Instagram is serving up an error page instead of the JSON you expect. You need to check the response's status code (in this case it would be 404 instead of 200) to find out if the payload is JSON or HTML in the case of the error page.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T07:09:48.500

经过这么多的工作，我发现我的案例是因为 JSON 数据内容中的某些东西正在搞砸事情。那是我的情况（我也讨厌 500 状态对错误如此含糊）

# php - 表单提交后PHP重定向到上传页面？

> ID：15773839
> 
> 赞同：1
> 
> 时间：2013-04-02T20:34:20.693
> 
> 标签：php, mysql, header

在这个程序中，用户正在将照片上传到 MYSQL。Photoid 是自动递增的。一旦用户提交表单，下面的代码就会采取行动。我希望将用户重定向到刚刚上传照片的页面。我怎样才能将他重定向到`photopage.php?photoid=???`.

```
 $addaphoto_query = "INSERT INTO `photosite`.`photos` (id, photoid, title, description) VALUES ('$id', '', '$title', '$description')";

    if ($run_addaphoto = mysqli_query($connect, $addaphoto_query){
         header('Location: photopage.php?photoid=???');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:37:00.443

您需要使用 PHP 函数[`mysqli_insert_id()`](http://php.net/manual/en/mysqli.insert-id.php)。这将为您提供照片 ID。

```
if ($run_addaphoto = mysqli_query($connect, $addaphoto_query){
    header('Location: photopage.php?photoid=' . mysqli_insert_id());
} 
```

如果您想知道，`mysqli_insert_id()`无论您获得多少流量都是安全的。[有关此 SO 问题的更多阅读。](https://stackoverflow.com/questions/9315200/is-it-possible-for-mysqli-insert-id-to-return-an-incorrect-id-in-high-traffic-ap)

**[来自 MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/getting-unique-id.html)**

> 对于 LAST_INSERT_ID()，最近生成的 ID 在每个连接的基础上维护在服务器中。它不会被其他客户端更改。如果您使用非魔术值（即非 NULL 且非 0 的值）更新另一个 AUTO_INCREMENT 列，它甚至不会更改。从多个客户端同时使用 LAST_INSERT_ID() 和 AUTO_INCREMENT 列是完全有效的。每个客户端都将收到客户端执行的最后一条语句的最后插入 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:37:41.047

您可以使用[mysqli_insert_id()](http://www.php.net/manual/en/mysqli.insert-id.php)来获取您刚刚插入的 id。

```
 $addaphoto_query = "INSERT INTO `photosite`.`photos` (id, photoid, title, description) VALUES      ('$id', '', '$title', '$description')";

    if ($run_addaphoto = mysqli_query($connect, $addaphoto_query){
         header('Location: photopage.php?photoid='.mysqli_insert_id().');
    } 
```

# jakarta-ee - ConcurrencyManagementType.BEAN 和 LockType.READ 之间的区别？

> ID：15773840
> 
> 赞同：1
> 
> 时间：2013-04-02T20:34:20.860
> 
> 标签：jakarta-ee, concurrency, singleton

比较这个 Java EE 企业 javabean：

```
@Singleton
@ConcurrencyManagement(ConcurrencyManagementType.BEAN)
public class BMC {} 
```

..用这个bean：

```
@Singleton
@ConcurrencyManagement(ConcurrencyManagementType.CONTAINER)
@Lock(LockType.READ)
public class CMC {} 
```

因为容器管理的并发是默认的，所以可以像这样重写第二个 bean：

```
@Singleton
@Lock(LockType.READ)
public class CMC {} 
```

因此，这当然让我感到奇怪。有什么不同？我可以**1)**像在课堂上一样关闭容器管理的并发性`BMC`，或者我可以**2)**使用容器管理的并发性，但像在课堂上那样使用读锁注释`CMC`类。`CMC`只要我不在类声明的某处放置写锁，该类就有效地关闭了他的容器管理的并发控制。

有人可以说我演示的两个构造之间存在技术差异吗？是否有任何论据为什么一种构造比另一种更好或更受青睐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T23:49:47.123

根据[LockType.WRITE javadoc](http://docs.oracle.com/javaee/6/api/javax/ejb/LockType.html#WRITE) Using LockType.READ 确实创建了一个锁。此锁允许执行具有 READ 锁的其他方法，但会阻止任何具有 WRITE 锁的方法运行，直到 READ 锁被释放。

肯定会有一些与创建 READ 锁相关的开销（可能很小且不明显），除非使用容器管理的并发，否则您不会遇到这些开销。

对于不同的人或不同的情况或不同的优先事项，哪个更好可能有不同的答案。

# grails - Grails 在检索数据时呈现加载页面

> ID：15773843
> 
> 赞同：0
> 
> 时间：2013-04-02T20:34:31.473
> 
> 标签：grails, grails-2.0, grails-controller

我有一个 Web 应用程序需要一段时间来加载初始页面。主屏幕有很多数据和多个数据源，因此加载时间比我想要的要长。

我想立即呈现一个启动画面，而控制器继续获取页面的数据。

我的控制器伪代码看起来像这样（我知道渲染两次是行不通的，但这是我想要发生的）：

```
 def index() {
          render view: 'MyTempView'
          methods to go get data
          render view: 'expectedView' model: [all my data]
  } 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:38:52.603

您可以显示启动画面并使用 ajax 获取数据。当 ajax 调用返回 data/html 时，您只需隐藏启动 div 并显示数据。

# controls - OpenLayers - 重新定位缩放和平移控件

> ID：15773845
> 
> 赞同：2
> 
> 时间：2013-04-02T20:34:48.227
> 
> 标签：controls, openlayers, options, styling

我正在尝试将地图上的 PanPanel 和 ZoomPanel 控件重新定位到左下角而不是左上角。我看到我可以添加选项，但正如我所尝试的那样，即使调整了窗口大小，我也找不到一种方法让它保持在左下角。

当我告诉他们相对于左下角重新定位时，我也不确定如何告诉他们像往常一样堆叠。

我更改了组成两个面板的图像，所以现在平移和缩放面板之间的空间比我想要的要大，所以我也试图让它们彼此靠近。

除了研究在控件上使用选项之外，我还尝试为围绕两个面板的 div 的 id 创建样式，但 div 中 id 的值是“OpenLayers.Map_2_OpenLayers_Container”，其中包含一个“。” . 据我所知，这不是样式的合法标识。无论如何，它没有工作。最重要的是，我认为我不能相信这个名字总是一样的，随着时间的推移，这个页面上的持续工作会导致很多添加。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T16:01:40.913

以防万一这可能对其他人有用。我正在使用 OpenLayers 3，我想将缩放控件移动到地图的右侧。我的地图附加到具有“tm-openlayers-map”类值的元素并移动缩放控件我使用了以下 css/sass

```
.tm-openlayer-map

   //change the colour of the map buttons
   button {
       background: $title-bar;
   }

   .ol-zoom {
      top: 0.5em;
      right: 0.5em;
      left: auto;
      //move the tooltips to the left of the now right aligned buttons
      .ol-has-tooltip:hover [role=tooltip] {
          left: -5.5em;
          border-radius: 4px 0 0 4px;
       }
      .ol-zoom-out.ol-has-tooltip:hover [role=tooltip]{
          left: -6.2em;
       }
    }
  //make sure the rotate controls included by default with an opacity of 0 don't
  //block clicks intended for the '+' button
  .ol-rotate {
     visibility: hidden;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:33:56.340

所以我发现了问题。首先，我没有将顶部设置为自动。由于它在 style.css 文件中设置为 10px，当我在 style.css 文件中将其更改为自动底部工作时。但是后来我的css文件不起作用。我找到了一个用于 Pan 和 Zoom 的 OpenLayers 示例，最终发现我所做的与他们所做的不同之处在于我没有在页面开头显式加载 style.css 文件。因此，似乎 OpenLayers Map 在创建时会导致 style.css 文件在读取我的 css 之后被延迟读取，因此它覆盖了我的覆盖。当我进行早期加载（页面开头）时，它运行良好。

似乎在我创建地图图层时创建的属性控件必须读取当前的 CSS，因为尚未在页面上创建地图，因此我不需要进行早期加载。如果我删除了早期加载，它仍然会从我的 css 文件中进行更改。但是删除早期加载会导致 Pan 和 Zoom 控件不再响应我的更改，所以我认为这意味着 Map 对象在 style.css 文件的后期加载之后读取样式，此时该文件已经被覆盖我的CSS。

去搞清楚...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:56:43.907

尝试：

```
new OpenLayers.Control.YourControlXXXX({
    moveTo: function (px) {
        if ((px != null) && (this.div != null)) {
            this.div.style.left = yourLeft + "px";
            this.div.style.bottom = (yourBottom+controlHeigth) + "px";
        }
    },
    ... other options
}) 
```

嗯！我看到这些控件比我想象的更现代，由 CSS 定位，所以尝试：

```
.olControlPanPanel {
    bottom: 55px; /* not 0px */
    top: auto;
} 
```

`div.olControlPanPanel {...`注意：如果您不确定 OL 的 de css 加载位置，请尝试 as：强制 CSS 的优先级。

# javascript - 来自输入的 javascript 值

> ID：15773846
> 
> 赞同：0
> 
> 时间：2013-04-02T20:34:52.710
> 
> 标签：javascript, input

```
<script type="text/javascript">
        function changeText2(){
            var userInput = document.getElementById('userInput').value;
            var lnk = document.getElementById('lnk');
            lnk.href = "https://www.facebook.com/sharer/sharer.php?u=http://facebook.com/" + userInput;
            lnk.innerHTML = lnk.href;
        }
        </script>

    <a href="" id=lnk></a> <br>
    <input type='text' id='userInput' value='' /> <br>
    <input type='button' onclick='changeText2()' value='Go'/> 
```

我在某个网站上找到了该代码，我想显示一个 img 而不是 url ...我是 javascript 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:43:03.987

像这样的东西应该工作：

```
<a href="" id="fbLink" style="display:none;">
  <img src="YOUR_IMAGE_HERE.jpg"/>
</a>
<input type='text' id='userInput' value='' onchange="shLink()"/>
<script>
  function shLink(){
    if(document.getElementById("userInput").value!=""){
      if(document.getElementById("fbLink").style.display=="none"){
        document.getElementById("fbLink").style.display="";
        document.getElementById("fbLink").href="https://www.facebook.com/sharer/sharer.php?u=http://facebook.com/"+document.getElementById("userInput").value;
      }
    }else{
      document.getElementById("fbLink").style.display="";
      document.getElementById("fbLink").href="";
    }
  }
<script> 
```

如果在您的输入中输入了值，该脚本将切换链接的显示。当输入值改变时会调用它（`onchange`）。或者，您可以`onkeypress`在用户在您的输入中键入内容时调用该函数。

# html - 无法使用 css3 对图像悬停产生淡入淡出效果

> ID：15773850
> 
> 赞同：0
> 
> 时间：2013-04-02T20:35:01.213
> 
> 标签：html, css

我有 css3 之类的：

```
.fadeInDown {
    -webkit-animation-name: fadeInDown;
    -moz-animation-name: fadeInDown;
    -o-animation-name: fadeInDown;
    animation-name: fadeInDown;
}
img.fadeInDown:hover{
   -webkit-transform-origin: top center;
   -moz-transform-origin: top center;
   -o-transform-origin: top center;
   transform-origin: top center;
   -webkit-animation: fadeInDown 1s ease-in-out;
   -moz-animation: fadeInDown 2s ease-in-out;
   -o-animation: fadeInDown 2s ease-in-out;
   animation: fadeInDown 2s ease-in-out;
} 
```

应用于

```
<a  href="#" target="_blank" title="bing">
   <img class="fadeInDown" src="http://www.consortemarketing.com/wp-content/uploads/2011/10/bing-logo.png" /> 
</a> 
```

但是没有动画任何东西，你能看看[小提琴并帮我解决](http://jsfiddle.net/JXYZn/1/)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:23:05.513

首先，如果主要使用某些动画效果不佳，`:hover`因为它需要您在元素移动时将鼠标保持在元素上。

rollOut 和 fadeInDown 在页面加载或与其他元素交互时更好地使用。

第二个激活动画，`:hover`设置如下：

```
.swing:hover{
   -webkit-transform-origin: top center;
   -moz-transform-origin: top center;
   -o-transform-origin: top center;
   transform-origin: top center;
   -webkit-animation: swing 2s ease-in-out;
   -moz-animation: swing 2s ease-in-out;
   -o-animation: swing 2s ease-in-out;
   animation: swing 2s ease-in-out;
} 
```

然后只需将`.swing`类添加到您想要摆动的元素。

如果您希望所有图像在悬停时摆动：

```
 img:hover{
   -webkit-animation: swing 2s ease-in-out;
   -moz-animation: swing 2s ease-in-out;
   -o-animation: swing 2s ease-in-out;
   animation: swing 2s ease-in-out;
   } 
```

这是[jsFiddle](http://jsfiddle.net/apaul34208/JXYZn/2/) Happy 动画。

# php - Linux 服务器上的内部服务器错误 (500) 和 PHP max_execution_time

> ID：15773859
> 
> 赞同：0
> 
> 时间：2013-04-02T20:35:28.133
> 
> 标签：php, linux, apache, centos

我有一个需要处理 1 到 5 个小时的 php 脚本（向我们的客户发送时事通讯）。我都试过了`set_time_limit(2000);`，`ini_set('max_execution_time', 360000);`但都不管用。它们可以在 XAMPP 本地服务器上完美运行，但不能在我们的专用服务器（Unix 和 Apache）上运行。我还将 Apache 超时更改为 300（即 50），但在脚本运行 30 秒后，它返回：

> 内部服务器错误页面（错误 500）

我不知道是否还有其他地方可以超时和/或为什么服务器不支持`ini_set()`or`set_time_limit()`功能。我们使用 Unix CentOS 6 和 Plesk 11.9 作为服务器。我还更改了默认的 php.ini `max_execution_time`，它可以工作......

我阅读了很多文章和论坛，但我不知道为什么会发生这种情况。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T17:47:22.237

// 添加，在你的 php 文件头或配置中

```
ini_set('max_execution_time','256'); //max_execution_time','0' <- unlimited time
ini_set('memory_limit','512M'); 
```

干得好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:38:00.363

更好的方法是使用`ini_set()`或`set_time_limit()`在向客户发送新闻通讯的脚本顶部...您不应该尝试主配置文件...而且，正如上面有人建议的那样，cron 作业非常适合这种情况。 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:22:12.467

感谢您的回答和评论。我设置了 cron 作业，它运行良好。我也尝试过 chunk-chunk（每块 150 封电子邮件）的方法，而且这种方法也有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T02:30:27.417

如果您使用 Vps：编辑您的 php.ini 文件：

```
max_execution_time = 256
memory_limit = 512M 
```

然后，运行命令行重启apache

```
service httpd restart 
```

或者头文件

```
ini_set('max_execution_time','256');
ini_set('memory_limit','512M'); 
```

祝你好运！

# c# - 试图理解与 BeginInvoke() 一起使用的模式

> ID：15773863
> 
> 赞同：0
> 
> 时间：2013-04-02T20:35:40.290
> 
> 标签：c#, wpf, asynchronous

我有两个 TextBlock，我在 Canvas 上连续定位。第一种情况很好：

```
TextBlock text1 = new TextBlock();
text1.Text = "Not ";
text1.FontSize = 18;
Canvas.SetTop(text1, 20);
Canvas.SetLeft(text1, 20);
canvas.Children.Add(text1);

TextBlock text2 = new TextBlock();
text2.Text = "bad!";
text2.FontSize = 18;
Canvas.SetTop(text2, 20);
canvas.Dispatcher.BeginInvoke(DispatcherPriority.Background, 
  new DispatcherOperationCallback(delegate(Object state)
  {
    Canvas.SetLeft(text2, 20 + text1.ActualWidth);
    return null;
  }
  ), null);
canvas.Children.Add(text2); 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/nWBjb.jpg)

但是，不使用 BeginInvoke() 的第二种情况失败了：

```
TextBlock text1 = new TextBlock();
text1.Text = "Not ";
text1.FontSize = 18;
Canvas.SetTop(text1, 20);
Canvas.SetLeft(text1, 20);
canvas.Children.Add(text1);

TextBlock text2 = new TextBlock();
text2.Text = "bad!";
text2.FontSize = 18;
Canvas.SetTop(text2, 20);
Canvas.SetLeft(text2, 20 + text1.ActualWidth); // ActualWidth is zero.
canvas.Children.Add(text2); 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/a88BA.jpg)

现在，我知道在第二种情况下，WPF 渲染还没有发生。我的问题很简单：**在这种情况下，我需要知道 UI 控件的实际坐标值，这些坐标值只有在渲染发生后才可用？**

（例如，使用 BeginInvoke() 的方法是一个好的解决方案吗？是否应该将整个代码包含在一个巨大的 BeginInvoke() 中？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:55:48.843

要回答您的问题：

`Dispatcher.BeginInvoke()`将调度程序的“待处理作业”队列中的操作排队。这允许它能够处理添加的第一个 UI 元素，并在继续执行代码之前运行`Layout`和传递。`Render`

因此，当你的代码运行时，第一个 TextBlock 的大小已经计算出来了，你可以得到它。

*同样，我不知道您要做什么，但在代码中创建 UI 元素通常是设计不佳的标志。WPF 不是 winforms，WPF 方式与在 winforms 中做任何事情所需的可怕黑客完全不同。*

编辑：

这是我使用 a`WrapPanel`和 some的方法`RenderTransform`：

```
<Window x:Class="MiscSamples.MovingWords"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MovingWords" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Thumb DragDelta="Thumb_DragDelta" Margin="2">
                    <Thumb.Template>
                        <ControlTemplate>
                            <TextBlock Text="{Binding Text}" 
                                       FontSize="{Binding FontSize}" 
                                       Foreground="{Binding Color}"/>
                        </ControlTemplate>
                    </Thumb.Template>
                    <Thumb.RenderTransform>
                        <TranslateTransform X="{Binding OffsetX}" Y="{Binding OffsetY}"/>
                    </Thumb.RenderTransform>
                </Thumb>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
public partial class MovingWords : Window
{
    public ObservableCollection<MovingWordModel> Words { get; set; }

    public MovingWords()
    {
        InitializeComponent();

        Words = new ObservableCollection<MovingWordModel>
            {
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "Hello!!"},
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "This"},
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "is"},
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "the"},
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "Power"},
                new MovingWordModel() {Color = "Black", FontSize = 18, Text = "of"},
                new MovingWordModel() {Color = "Blue", FontSize = 18, Text = "WPF"},
            };

        DataContext = Words;
    }

    private void Thumb_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
    {
        var thumb = sender as Thumb;
        if (thumb == null)
            return;

        var word = thumb.DataContext as MovingWordModel;

        if (word == null)
            return;

        word.OffsetX += e.HorizontalChange;
        word.OffsetY += e.VerticalChange;
    }
} 
```

数据模型：

```
public class MovingWordModel:PropertyChangedBase
{
    public string Text { get; set; }

    public int FontSize { get; set; }

    public string Color { get; set; }

    private double _offsetX;
    public Double OffsetX
    {
        get { return _offsetX; }
        set
        {
            _offsetX = value;
            OnPropertyChanged("OffsetX");
        }
    }

    private double _offsetY;
    public double OffsetY
    {
        get { return _offsetY; }
        set
        {
            _offsetY = value;
            OnPropertyChanged("OffsetY");
        }
    }
} 
```

属性更改基础：

```
 public class PropertyChangedBase:INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

您可以单击并拖动单词以移动它们。

请注意，拖动的值将存储在`OffsetX`和`OffsetY`属性中。这种方法的唯一问题是您在某种程度上失去了分辨率独立性，因为偏移值实际上会将单词从其默认位置移动（由 确定`WrapPanel`，因此它们可能会根据`WrapPanel`自身的大小而变化） .

# python - 使用 Python 检查任意用户是否在管理员组中

> ID：15773868
> 
> 赞同：3
> 
> 时间：2013-04-02T20:36:08.217
> 
> 标签：python, windows, python-2.7, admin, ctypes

有没有办法检查任何给定用户是否在管理员组中？

我知道如何检查*当前*用户是否是管理员，使用：

```
import ctypes
print ctypes.windll.shell32.IsUserAnAdmin() 
```

但是，如果我以 userA 身份登录，我想知道 userZed 是否具有管理员权限。

任何指针或建议都会有所帮助，看来我无法找到关于 ctypes.windll.shell32 的任何文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:21:13.637

这是一个包含执行此操作的代码的网站：

[http://skippylovesmalorie.wordpress.com/tag/python-windows/](http://skippylovesmalorie.wordpress.com/tag/python-windows/)

我测试了它并且它有效。可以如下使用，注意字符串必须是**unicode**否则登录会失败：

蟒蛇 2.7：

```
print(user_is_admin(u"johndoe", u"password123", u"MYDOMAIN")) 
```

Python 3.x：

```
print(user_is_admin("johndoe", "password123", "MYDOMAIN")) 
```

这是代码，以供将来参考：

```
import ctypes
import ctypes.wintypes

def current_user_is_admin():
    return user_token_is_admin(0)

def user_is_admin(username, password, domain=None):
    """note that username, password, and domain should all be unicode"""

    LOGON32_LOGON_NETWORK = 3
    LOGON32_PROVIDER_DEFAULT = 0
    token = ctypes.wintypes.HANDLE()
    if ctypes.windll.advapi32.LogonUserW(username, domain, password,
            LOGON32_LOGON_NETWORK, LOGON32_PROVIDER_DEFAULT, ctypes.byref(token)) == 0:
        raise Exception("user logon failed")

    try:
        return user_token_is_admin(token)
    finally:
        ctypes.windll.kernel32.CloseHandle(token)

def user_token_is_admin(user_token):
    """
    using the win32 api, determine if the user with token user_token has administrator rights
    """
    class SID_IDENTIFIER_AUTHORITY(ctypes.Structure):
        _fields_ = [
            ("byte0", ctypes.c_byte),
            ("byte1", ctypes.c_byte),
            ("byte2", ctypes.c_byte),
            ("byte3", ctypes.c_byte),
            ("byte4", ctypes.c_byte),
            ("byte5", ctypes.c_byte),
        ]
    nt_authority = SID_IDENTIFIER_AUTHORITY()
    nt_authority.byte5 = 5

    SECURITY_BUILTIN_DOMAIN_RID = 0x20
    DOMAIN_ALIAS_RID_ADMINS = 0x220
    administrators_group = ctypes.c_void_p()
    if ctypes.windll.advapi32.AllocateAndInitializeSid(ctypes.byref(nt_authority), 2,
        SECURITY_BUILTIN_DOMAIN_RID, DOMAIN_ALIAS_RID_ADMINS,
        0, 0, 0, 0, 0, 0, ctypes.byref(administrators_group)) == 0:
        raise Exception("AllocateAndInitializeSid failed")

    try:
        is_admin = ctypes.wintypes.BOOL()
        if ctypes.windll.advapi32.CheckTokenMembership(
                user_token, administrators_group, ctypes.byref(is_admin)) == 0:
            raise Exception("CheckTokenMembership failed")
        return is_admin.value != 0

    finally:
        ctypes.windll.advapi32.FreeSid(administrators_group) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T20:02:01.260

```
import win32net

def if_user_in_group(group, member):
    members = win32net.NetLocalGroupGetMembers(None, group, 1)
    return member.lower() in list(map(lambda d: d['name'].lower(), members[0])) 

# Function usage
print(if_user_in_group('SOME_GROUP', 'SOME_USER')) 
```

当然，在您的情况下，“SOME_GROUP”应该是“管理员”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T18:12:54.927

没有真正的方法可以知道给定用户是否具有管理员权限（可能具有域管理员权限，可能是本地管理员组的任意组本身的成员）。唯一确定的方法是模拟用户，但您需要用户的密码。一旦你成为用户，你可以检查你是否可以写入 system32 文件夹（检查你是否是管理员的简单方法......或者 FS ACL 坏了哈哈）或检查任何需要管理员权限的东西，比如写将注册表项放入 HKLM，然后将其删除。

如果您只想了解当前用户是否在本地管理员组中，我为此制作了一个包，其中提供了许多功能

安装

```
pip install windows_tools.users 
```

用法：

```
import windows_tools.users as users

# if no user is given, current one is used
is_admin = is_user_local_admin('myuser')
print(is_admin) 
```

**确保给定用户具有管理员权限的更长答案（仍然需要用户密码）**

我的包可以模拟，因此您可能需要通过执行以下操作来检查您是否拥有完整的管理员权限：

```
pip install windows_tools.impersonate
pip install windows_tools.securityprivilege 
```

例子

```
import ctypes
from windows_tools import impersonate
from windows_tools import users
from windows_tools import securityprivilege

with impersonate.ImpersonateWin32Sec(
        domain=".", username='someuser', password='somepassword'
    ):
    print(users.whoami())
    try:
        securityprivilege.enable_privilege("SeSecurityPrivilege")
        securityprivilege.disable_privilege("SeSecurityPrivilege")
        print('Yay, I have admin superpowers')
    except ctypes.WinError:
        print('Nope, I am a simple mortal') 
```

# c++ - 使用 C++ 的 SFML 平台游戏

> ID：15773870
> 
> 赞同：1
> 
> 时间：2013-04-02T20:36:17.763
> 
> 标签：c++, sfml

嘿，我目前正在制作一个 sfml 平台游戏并打算使用地图图块，但是在实现我的地图类之后，它出现了一个未处理的异常。我先调用初始化函数，然后在最后调用drawmap。这是代码..

```
 void Map::Initialise(const char *filename)
{
     std::ifstream openfile(filename);
    if(openfile.is_open())
    {
        std::string tempLine;
        std::getline(openfile, tempLine);

        tempLine.erase(std::remove (tempLine.begin(), tempLine.end(), ' '), tempLine.end());
        MapX = tempLine.length();

        openfile.seekg(0, std::ios::beg);

        while(!openfile.eof())
        {

            openfile >> MapFile[loadCountX][loadCountY];
            loadCountX++;
            if(loadCountX >= MapX)
            {
                loadCountX = 0;
                loadCountY++;
            }
        }
        MapY = loadCountY;
    }

}

void Map::DrawMap(sf::RenderWindow &Window)
{
    sf::Shape rect = sf::Shape::Rectangle(0, 0, BLOCKSIZE, BLOCKSIZE, sf::Color(255, 255, 255, 255));
    sf::Color rectCol;
    for(int i = 0; i < MapX; i++)
    {
        for(int j = 0; j < MapY; j++)
        {
            if(MapFile[i][j] == 0)
                rectCol = sf::Color(44, 117, 255);
            else if (MapFile[i][j] == 1)
                rectCol = sf::Color(255, 100, 17);

            rect.SetPosition(i * BLOCKSIZE, j * BLOCKSIZE);
            rect.SetColor(rectCol);
            Window.Draw(rect);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:41:09.580

您的文件循环很糟糕，使用`eof`循环可能会导致未定义的行为，并且通常是文件循环的一种糟糕方法。而是遵循此结构的循环：

```
fileIn >> data
//while fileIn object is good
while(fileIn) {
    //handle data variable
    fileIn >> data; //re-read data in
} 
```

如果您想在读取下一个变量之前操作和处理您的数据，那么您正在做相反的事情。因此，您的文件到达 eof，但您尝试最后一次读取数据并处理它，这会引发您的异常。

扩展我上面所说的：

```
openfile >> MapFile[loadCountX][loadCountY];

//while your input stream is still good
while(openfile)
        {
        //handle your file data
            loadCountX++;
            if(loadCountX >= MapX)
            {
                loadCountX = 0;
                loadCountY++;
            }
        //now read in again AFTER
        openfile >> MapFile[loadCountX][loadCountY];
        } 
```

应该正确读入和存储数据。

# ruby-on-rails - 如何干掉 Rails 的 RSpec 测试

> ID：15773874
> 
> 赞同：2
> 
> 时间：2013-04-02T20:36:39.697
> 
> 标签：ruby-on-rails, ruby, rspec

我正在学习 RSpec，但我不禁注意到我的代码中有很多重复。以下只是许多其他示例中的两个示例。有没有一种方法可以创建共享测试而不必检查每个单独的属性？

```
 describe "validation" do
    describe "user_id" do
      it "should not be blank or nil" do
        @comment.user_id = nil
        @comment.should_not be_valid
        @comment.user_id = " "
        @comment.should_not be_valid
      end

      it "should an integer" do
        @comment.user_id = "a"
        @comment.should_not be_valid        
      end
    end

    describe "post_id" do
      it "should not be blank or nil" do
        @comment.post_id = nil
        @comment.should_not be_valid
        @comment.post_id = " "
        @comment.should_not be_valid
      end

      it "should an integer" do
        @comment.post_id = "a"
        @comment.should_not be_valid        
      end      
    end
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:37:50.073

你可以试试这个：[https ://github.com/thoughtbot/shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers)

它为您的模型提供了许多简单的匹配器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T00:28:42.823

在第一个`describe`块中，您可以将主题设置为`@comment.user_id`：

```
describe "validation" do
  describe "user_id" do
    before { @comment = Comment.create } # or however you want to initialize your comment     
                                         # (FactoryGirl is commonly used)
    subject { @comment.user_id }

    it "should not be blank or nil" do
      before { @comment.user_id = nil }           #I edited this to make it clearer.
      it { should_not be_valid }

      before { @comment.user_id = " " }
      it { should_not be_valid }
    end
    ... 
```

我认为这会使它变干一些并使其更具可读性。显然，您可以将其余部分从我这里的内容中提取出来。

* * *

编辑：这不会保存很多字符（实际上你最后会输入更多），但它确实消除了`@comment.{attrbute} = whatever`规范文件本身中的重复。您可以为每个分配定义一个助手，如下所示：

```
/spec/helpers/comment_spec_helper.rb
def user_id nil
  @comment.user_id = nil
end

.... 
```

并为每个属性执行此操作。然后在你的规范中：

```
 subject { @comment.user_id }

    it "should not be blank" do
      before { user_id nil }         
      it { should_not be_valid }

    it "should not be nil" do
     ... 
```

不利的一面是，您必须为帮助程序中的每个属性都这样做，最后您要做的工作更多。但是，如果您主要关心的是消除规范文件中的重复，这将有所帮助。

我不知道这是多么地道。我通常在规范文件中启动新对象以进行验证测试，（并且我的 spec_helper 通常处理多步骤过程，例如单击下拉菜单、填写文本，然后单击“提交”），但也许您的验证比我通常拥有的要多。

* * *

更新

我正在做一个项目，只是翻阅了我参加的 Codeschool 的 RSpec 课程的笔记，我想我会建议共享示例。他们给出的例子是：

```
describe Zombie do
  it_behaves_like ‘the undead’, Zombie.new
end

describe Vampire do
  it_behaves_like ‘the undead’, Vampire.new
end

shared_examples_for ‘the undead’ do |undead|
  it ‘does not have a pulse’ do
    undead.pulse.should == false
  end
end 
```

这似乎适用，但您必须牢记某些[约定](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)以确保加载您的共享示例。

这真的会让你的代码变干，但我个人会有点担心可读性。我想如果你为你的共享示例使用一个足够描述性的名称，你会没事的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:03:49.627

您可以使用工厂（例如 FactoryGirl）：

```
build(:comment, user_id: nil).should_not be_valid 
```

# android - BlackjackGTV 示例 - OutOfMemory

> ID：15773875
> 
> 赞同：0
> 
> 时间：2013-04-02T20:36:43.423
> 
> 标签：android, google-tv

我正在尝试让二十一点 Google TV 样本在 Vizio Co-Star (Google TV) 上运行。[我从https://code.google.com/p/googletv-android-samples/](https://code.google.com/p/googletv-android-samples/)下载了示例代码，但是当我将它部署到 Vizio 时，出现 OutOfMemory 错误。

有人让二十一点 GTV 样本工作吗？

全栈跟踪：

04-02 13:32:56.364：E/dalvikvm-heap(4027)：78655376 字节分配内存不足。04-02 13:32:56.374: E/AndroidRuntime(4027): 致命异常: main 04-02 13:32:56.374: E/AndroidRuntime(4027): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. google.android.tv.blackjack/com.google.android.tv.blackjack.BlackJackTableActivity}：android.view.InflateException：二进制 XML 文件第 17 行：膨胀类 04-02 13:32:56.374 时出错：E/AndroidRuntime（ 4027): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 04-02 13:32:56.374: E/AndroidRuntime(4027): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1852) 04 -02 13:32:56.374: E/AndroidRuntime(4027): 在 android.app.ActivityThread.access$500(ActivityThread.java:124) 04-02 13:32:56.374: E/AndroidRuntime(4027): 在 android.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:24:01.457

如果您打开布局文件并从源中删除 android:background="@drawable/green_background" 那么它将为您工作。最近发生了内存分区更改，并且示例尚未更新以减少其内存占用（例如，大位图图像）

# php - 用 SMTP 脚本替换 mail() 脚本

> ID：15773878
> 
> 赞同：0
> 
> 时间：2013-04-02T20:36:59.910
> 
> 标签：php, smtp

PHP 的`mail()`功能已停止发送我的电子邮件。我与我的服务提供商交谈，他们说我必须使用 SMTP，但我不是专业的 php 开发人员。他们试图提供一点帮助，他们为我提供了一个脚本，当用户提交表单时，它会向我发送电子邮件，但我的旧表单用于向我发送电子邮件数据以及确认电子邮件给客户.

我已经管理了一些如何为客户发送确认电子邮件的新脚本，但我不知道如何使用此脚本发送电子邮件，你能告诉我应该添加什么以使其工作吗？

```
if(isset($_POST['submit']))

{

$title         = $_POST['title'];
$name          = $_POST['name'];
$surname       = $_POST['surname'];
$phone         = $_POST['phone'];
$visitor_email = $_POST['email'];
$address       = $_POST['address'];
$postcode      = $_POST['postcode'];
$state         = $_POST['us'];
$details       = $_POST['details'];
$reasons       = $_POST['re'];
$content       = $_POST['message'];

require("class.phpmailer.php");

$mail = new PHPMailer();

//Your SMTP servers details

// set mailer to use SMTP
$mail->IsSMTP();

// specify main and backup server or localhost / your mail server yourmailserver.com
$mail->Host = "xxxxxx.example.com";  

// turn on SMTP authentication
$mail->SMTPAuth = true;     

// SMTP username
$mail->Username = "me@xxxxx.com";  

$mail->Password = "**********"; // SMTP password
//It should be same as that of the SMTP user

$redirect_url = "http://".$_SERVER['SERVER_NAME']; //Redirect URL after submit the form

//$mail->From = $mail->Username;    //Default From email same as smtp user
$mail->FromName = "Admin";

//Email address where you wish to receive/collect those emails.
$mail->AddAddress($visitor_email, ""); 

$mail->WordWrap = 50;// set word wrap to 50 characters
$mail->IsHTML(true);// set email format to HTML

$mail->Subject = 'You have mail from: www.example.com';

// ** Build the Message
$message = "<h4><b>We received your query</b></h4><br/><br/>";
$message .="Thankyou for contacting example.net.<br/>";
$message .="<br>";
$message .="Regards,<br/>";
$message .="admin";

$mail->Body    = $message;

//header("Location: thank-you.html");
if(!$mail->Send())
{
    header('Location: thank-you.html');
  // echo "Message could not be sent. <p>";
  // echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

header('Location: thank-you.html');

}
else{
    header('Location:  contact-us.html');   
}
?>

// ******** Second update 
<?
ob_start();
if(isset($_POST['submit']))

{

$title         = $_POST['title'];
$name          = $_POST['name'];
$surname       = $_POST['surname'];
$phone         = $_POST['phone'];
$visitor_email = $_POST['email'];
$address       = $_POST['address'];
$postcode      = $_POST['postcode'];
$state         = $_POST['us'];
$details       = $_POST['details'];
$reasons       = $_POST['re'];
$content       = $_POST['message'];

require("class.phpmailer.php");

$mail = new PHPMailer();

//Your SMTP servers details

// set mailer to use SMTP
$mail->IsSMTP();

// specify main and backup server or localhost / your mail server yourmailserver.com
$mail->Host = "xxx.example.net";  

// turn on SMTP authentication
$mail->SMTPAuth = true;     

// SMTP username
$mail->Username = "*****@example.net";  

$mail->Password = "********"; // SMTP password
//It should be same as that of the SMTP user

$redirect_url = "http://".$_SERVER['SERVER_NAME']; //Redirect URL after submit the form

//$mail->From = $mail->Username;    //Default From email same as smtp user
$mail->FromName = "Admin vueproperty";

$mail->AddAddress($visitor_email, ""); //Email address where you wish to receive/collect those emails.
//$mail->AddCC($_POST['email']); // ** Client email
$mail->WordWrap = 50;// set word wrap to 50 characters
$mail->IsHTML(true);// set email format to HTML

$mail->Subject = 'You have mail from: www.exmple.net';

// ** Build the Message
$message = "<h4><b>We received your query</b></h4><br/><br/>";
$message .="Thank you for contacting example.net.  A property consultant will be in contact with you asap.<br/>";
$message .="<br>";
$message .="Regards,<br/>";
$message .="The example Team";

$mail->Body    = $message;

//header("Location: thank-you.html");

if($mail->Send())
{
    $body  = "Name: $name<br/>";
    $body .= "Phone: $phone<br/>";
    $body .= "Email: $visitor_email<br/>";
    $mail->AddAddress('xphpxmysql@gmail.com', "MINE");
    if($mail->Send()){
        header('Location: thank-you.html');
        exit;
    }
}

}

?>
// ******** Third update 
<?
ob_start();
if(isset($_POST['submit']))

{

$title         = $_POST['title'];
$name          = $_POST['name'];
$surname       = $_POST['surname'];
$phone         = $_POST['phone'];
$visitor_email = $_POST['email'];
$address       = $_POST['address'];
$postcode      = $_POST['postcode'];
$state         = $_POST['us'];
$details       = $_POST['details'];
$reasons       = $_POST['re'];
$content       = $_POST['message'];

require("class.phpmailer.php");

$mail = new PHPMailer();

//Your SMTP servers details

// set mailer to use SMTP
$mail->IsSMTP();

// specify main and backup server or localhost / your mail server yourmailserver.com
$mail->Host = "xxx.example.net";  

// turn on SMTP authentication
$mail->SMTPAuth = true;     

// SMTP username
$mail->Username = "*****@example.net";  

$mail->Password = "********"; // SMTP password
//It should be same as that of the SMTP user

$redirect_url = "http://".$_SERVER['SERVER_NAME']; //Redirect URL after submit the form

//$mail->From = $mail->Username;    //Default From email same as smtp user
$mail->FromName = "Admin vueproperty";

$mail->AddAddress($visitor_email, ""); //Email address where you wish to receive/collect those emails.
//$mail->AddCC($_POST['email']); // ** Client email
$mail->WordWrap = 50;// set word wrap to 50 characters
$mail->IsHTML(true);// set email format to HTML

$mail->Subject = 'You have mail from: www.exmple.net';

// ** Build the Message
$message = "<h4><b>We received your query</b></h4><br/><br/>";
$message .="Thank you for contacting example.net.  A property consultant will be in contact with you asap.<br/>";
$message .="<br>";
$message .="Regards,<br/>";
$message .="The example Team";

$mail->Body    = $message;

//header("Location: thank-you.html");

if($mail->Send())
{
    $body = "Name: " . $name . "<br/>"; 
    $body .= "Phone: " . $phone . "<br/>"; 
    $body .= "Email: ". $visitor_email . "<br/>"; 
    $mail->body = $body; 
    $mail->AddAddress('xphpxmysql@gmail.com', "MINE"); 
    if($mail->Send())
    {
        header('Location: thank-you.html'); 
        exit;
    }

}

}

?> 
```

// ***** *****第五次更新

```
<?
ob_start();
if(isset($_POST['submit']))

{

$title         = $_POST['title'];
$name          = $_POST['name'];
$surname       = $_POST['surname'];
$phone         = $_POST['phone'];
$visitor_email = $_POST['email'];
$address       = $_POST['address'];
$postcode      = $_POST['postcode'];
$state         = $_POST['us'];
$details       = $_POST['details'];
$reasons       = $_POST['re'];
$content       = $_POST['message'];

require("class.phpmailer.php");

$mail = new PHPMailer();

//Your SMTP servers details

// set mailer to use SMTP
$mail->IsSMTP();

// specify main and backup server or localhost / your mail server yourmailserver.com
$mail->Host = "xxx.example.net";  

// turn on SMTP authentication
$mail->SMTPAuth = true;     

// SMTP username
$mail->Username = "*****@example.net";  

$mail->Password = "********"; // SMTP password
//It should be same as that of the SMTP user

$redirect_url = "http://".$_SERVER['SERVER_NAME']; //Redirect URL after submit the form

//$mail->From = $mail->Username;    //Default From email same as smtp user
$mail->FromName = "Admin vueproperty";

$mail->AddAddress($visitor_email, ""); //Email address where you wish to receive/collect those emails.
//$mail->AddCC($_POST['email']); // ** Client email
$mail->WordWrap = 50;// set word wrap to 50 characters
$mail->IsHTML(true);// set email format to HTML

$mail->Subject = 'You have mail from: www.exmple.net';

// ** Build the Message
$message = "<h4><b>We received your query</b></h4><br/><br/>";
$message .="Thank you for contacting example.net.  A property consultant will be in contact with you asap.<br/>";
$message .="<br>";
$message .="Regards,<br/>";
$message .="The example Team";

$mail->Body    = $message;

if($mail->Send())
{
    $body = "Name: " . $name . "<br/>"; 
    $body .= "Phone: " . $phone . "<br/>"; 
    $body .= "Email: ". $visitor_email . "<br/>"; 
    $mail->Body = $body; 
    $mail->AddAddress('xphpxmysql@gmail.com', "MINE"); 
    if($mail->Send())
    {
        header('Location: thank-you.html'); 
        exit;
    }

} 
```

}

```
?> 
```

//// ***** ** *****第六次更新现在它正在工作它正在工作

```
 <?
    ob_start();
    if(isset($_POST['submit']))

    {

    $title         = $_POST['title'];
    $name          = $_POST['name'];
    $surname       = $_POST['surname'];
    $phone         = $_POST['phone'];
    $visitor_email = $_POST['email'];
    $address       = $_POST['address'];
    $postcode      = $_POST['postcode'];
    $state         = $_POST['us'];
    $details       = $_POST['details'];
    $reasons       = $_POST['re'];
    $content       = $_POST['message'];

    require("class.phpmailer.php");

    $mail = new PHPMailer();

    //Your SMTP servers details

    // set mailer to use SMTP
    $mail->IsSMTP();

    // specify main and backup server or localhost / your mail server yourmailserver.com
    $mail->Host = "xxx.example.net";  

    // turn on SMTP authentication
    $mail->SMTPAuth = true;     

    // SMTP username
    $mail->Username = "*****@example.net";  

    $mail->Password = "********"; // SMTP password
    //It should be same as that of the SMTP user

    $redirect_url = "http://".$_SERVER['SERVER_NAME']; //Redirect URL after submit the form

    //$mail->From = $mail->Username;    //Default From email same as smtp user
    $mail->FromName = "Admin vueproperty";

    $mail->AddAddress($visitor_email, ""); //Email address where you wish to receive/collect those emails.
    //$mail->AddCC($_POST['email']); // ** Client email
    $mail->WordWrap = 50;// set word wrap to 50 characters
    $mail->IsHTML(true);// set email format to HTML

    $mail->Subject = 'You have mail from: www.exmple.net';

    // ** Build the Message
    $message = "<h4><b>We received your query</b></h4><br/><br/>";
    $message .="Thank you for contacting example.net.  A property consultant will be in contact with you asap.<br/>";
    $message .="<br>";
    $message .="Regards,<br/>";
    $message .="The example Team";

    $mail->Body    = $message;

    $mail->Send();
        $mail->ClearAllRecipients();
        $body = "Name: " . $name . "<br/>"; 
        $body .= "Phone: " . $phone . "<br/>"; 
        $body .= "Email: ". $visitor_email . "<br/>"; 
        $mail->Body = $body; 
        $mail->AddAddress('xphpxmysql@gmail.com', ""); 
        if($mail->Send())
        {
        $mail->ClearAllRecipients();
        header('Location: thank-you.html'); 
        exit;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:01:05.973

如果我完全理解你的问题。您可以将电子邮件发送给您的客户，但您也想将其发送给您。

如果是这样的话。添加另一个接待员`$mail->AddAddress($visitor_email, "MY_CLIENT");`

编辑：首先得到第二行的红色。

```
 if($mail->Send()){$message = "ALL REQUIRED DATA YOU WANT TO SEND TO YOURSELF";$mail->AddAddress('YOUREMAIL@EXAMPLE.COM', "MINE");if($mail->Send()){header('Location: thank-you.html');exit;}} 
```

# c - 通过指针索引到 char 数组时出现分段错误

> ID：15773880
> 
> 赞同：1
> 
> 时间：2013-04-02T20:37:00.587
> 
> 标签：c, arrays, pointers, segmentation-fault

我的代码在访问数组元素时导致分段错误，即使该元素已经被访问而没有问题。

```
int charToInt(char a)
{
    int b;
    if(isdigit(a))
    {   
        b = a - '0' - 1;
    }
    if(isalpha(a))
    {
        b = a - 65; 
    }
    return b;   
}

int validPosition(char **array, int r, int c, char* position, int slots)
{
    int i,k;
    if(strlen(position) == 5)
    {
        if(!isalpha(position[0]) || !isdigit(position[1]) || position[2]!=' ' || (position[3]!='N' && position[3]!='E' && position[3]!='W' && position[3]!='S')) //lathos gramma
        {
            printf("\n%s", "Invalid answear.This is an example of a valid answear: A5 N");
            return 2;
        }
        if( charToInt(position[0]) > r - 1 || charToInt(position[1]) > c - 1  )//ama vgainei eksw apo ta oria
        {
            printf("\n%s", "The position you choosed is out of the bountries...");
            return 2;
        }
        printf("\n%s%c%s","position[3] is: ",position[3], " but it doesn't work >_<"); // position[3] is N 
        if(position[3] == 'N') //the problem is here <~~~~~~~~~~~~~~~~~~~<
        {
            printf("\n%s", "come on");
            if(charToInt(position[0]) + slots < r)
            {
                for(i=charToInt(position[0])-1; i<charToInt(position[0])+slots; i++)
                {
                     if(array[i-1][charToInt(position[1])-1] != '.')
                     {
                         printf("\n%s", "The position you choosed is not valid because there is oneother ship there");
                         return 2;
                     }
                }
            }
            else
            {
                printf("\n%s", "The ship is going out of the bountries...");
                return 2;
            }
        }
    }
} 
```

当`position`持有字符串`"A9 N"`时，`printf`正确输出`'N'`为`position[3]`。但是，由于某种原因，当它尝试执行`if(position[3] == 'N')`时，会发生分段错误。

示例程序运行：

```
定位示例：G3 E

航空母舰（5个地方），给出位置和方向：A9 N

1

位置[3] 是：N 但它不起作用>_<
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:14:27.617

好吧，根据您的更新，您似乎遇到了各种各样的问题。为了将来参考，实际上添加（可能是简化的）代码显示您如何调用相关函数比尝试在评论中使用散文描述它更好。试图帮助你的人会减少猜测。

如果我正确阅读了您的评论，则调用的代码`validPosition`如下所示：

```
// "r and c are 9 and 9 in the specific example(rows columns)."
int rows = 9;
int columns = 9;

// "slots=5."
int slots = 5;

// "array is a 2d array and it contains characters(created with malloc)."
char **array = malloc(rows * columns * sizeof(char));

// "i created char position[10] in the function that called this function"
char position[10];
// "and with fgets(position, 10, stdin); i putted A9 N inside it."
fgets(position, 10, stdin);

validPosition(array, rows, columns, position, slots); 
```

第一个问题是您对数组分配的描述（如果我误解了您的评论并且这实际上不是您在做什么，我深表歉意）。对于与两个下标操作一起使用的动态大小的二维数组，它看起来应该类似于下面的代码（`array[index1][index2]`，因为它在 中`validPosition`）。当您以这种方式访问​​它们时，指针指向指针 ( `char **array`) 的行为与固定大小的多维数组 ( ) 不同。`array[SIZE1][SIZE2]`

```
// each entry in array should be a pointer to an array of char
char **array = malloc(rows * sizeof(char*));
for(i = 0; i < rows; i++)
    array[i] = malloc(columns * sizeof(char)); 
```

您还需要小心在`fgets`调用后使用位置。您应该检查返回值以确保它不是`NULL`（指示`EOF`或错误情况）。在这种情况下，字符串可能不会被`\0`终止。事实上，所有元素可能仍然未初始化（假设您在调用之前没有初始化它们）。这可能导致未定义的行为。

下一个问题是它`validPosition`不会在每个代码路径上都返回一个值。一个例子是如果`strlen(position) != 5`。另一种是如果您进入`for`循环并且`array[i-1][charToInt(position[1])-1] != '.'`永远不会为真（即，船舶放置被认为是有效的）。

一个说英语的人对一个希腊作者说这话很奇怪，让我们忽略国际化，只关注默认的 C 本地化。因此，对 position[0] 的检查就足够了，尽管您可能会考虑允许您的用户也使用小写字母。但是，当`position[1]`从`1`-based转换为`0`-based 时，您没有考虑它是 的情况`'0'`，这将导致`charToInt`返回`-1`。此外，您错误地在 . 的第二个数组下标中再次进行减法`array[i-1][charToInt(position[1])-1]`。

同样，正如 Jite 和 BLUEPIXY 所指出的，您正在对 的结果进行*两次*额外的减法`charToInt(position[0])`：一个在 for 循环初始化程序 ( `i=charToInt(position[0])-1`) 中，一个在 的第一个数组下标中`array[i-1][charToInt(position[1])-1]`。

一旦你解决了这个问题，你可能会发现你有时会错误地告诉用户他们的选择是无效的。这是因为您正在检查`charToInt(position[0]) + slots < r`而不是`<= r`.

正如我在评论中提到的，其中一种访问`array`很可能是您违反分段的罪魁祸首，而不是`position[3] == 'N'`. 您看不到输出的原因`printf("\n%s", "come on");`是您`stdout`似乎是行缓冲的，并且没有行尾来刷新它。它通常会在*正常*程序终止时自动刷新，但是您会出现段错误，因此不会发生这种情况。

最后，这些只是我注意到的语义错误。从风格上讲，代码也有待改进。例如，您似乎将要使用与您的子句类似的逻辑来实现`else if(position[3] == 'E'`、`else if(position[3] == 'W'`和子句。这增加了您因错误地复制和粘贴而引入错误的可能性，并且当您需要在四个地方而不是一个地方进行更改时也会增加您的工作量。`else if(position[3] == 'S'``if(position[3] == 'N'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:59:08.420

也许是分段错误`array[i-1][charToInt(position[1])-1]`

i: `charToInt(position[0])-1`: charToInt('A') - 1 : -1 <- 数组越界

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:53:00.813

由于术语“分段错误”我相信你在 Linux 机器上。使用[gdb](http://www.gnu.org/software/gdb/)查找错误原因。以下是步骤。

1.  使用附加的 -g 标志进行编译（例如 gcc -g my_prog.c）
2.  运行调试器：gdb a.out
3.  使用“列表”命令查找断点行（例如，函数的第一行）
4.  在该行上设置断点： b 25 （如果 25 是该行）
5.  使用“运行”命令运行程序
6.  使用命令 'next' 执行下一行代码

现在执行将在该行暂停，您可以检查内存、打印变量内容和其他内容。但通常您想确定执行失败的行以及哪个变量中的内容。

稍微玩一下内存，您就会很容易找到问题所在。就个人而言，我的代码不适用于 gdb 支持。

# mysql - 在这个 where 子句中顺序是否重要？

> ID：15773887
> 
> 赞同：2
> 
> 时间：2013-04-02T20:37:33.027
> 
> 标签：mysql

通过更改 WHERE 条件的顺序，我得到了不同的结果，但我不明白为什么：

```
SELECT 
    ...

WHERE (
    -- Ramps that start this month
    (r.start_dte > ? AND r.start_dte <= ?)

    OR

    -- Ramps that end this month and have no follow-up.
    (r.end_dte >= ? AND r.end_dte <= ? AND r.id = m.latestId)
)

-- Throw out expired schedules or contracts
AND (s.term_dte > r.start_dte or s.term_dte is null)
AND (c.term_dte > r.start_dte or c.term_dte is null)

-- Throw out a ramp if its end date is before its start date
AND (r.end_dte > r.start_dte)

AND s.name not like '%zz%' 
```

我的意图是满足前两个条件中的一个（斜坡必须在本月开始，或者本月结束并且没有后续行动），并满足所有其他条件。这不是我写的吗？

我知道事情没有正常工作，因为我得到的结果违反了倒数第二个`AND`条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:51:11.103

关于您的第一个问题：是的，对我而言，您的查询对于您的规范而言似乎是正确的。

对于您的第二个问题，我建议您重写您的条件，使其符合数字线顺序（左侧的较小日期/值）：

```
...
WHERE (
    -- Ramps that start this month
    (? < r.start_dte AND r.start_dte <= ?)

    OR

    -- Ramps that end this month and have no follow-up.
    (? <= r.end_dte AND r.end_dte <= ? AND r.id = m.latestId)
)

-- Throw out expired schedules or contracts
AND (r.start_dte < s.term_dte or s.term_dte is null)  -- condition (3)
AND (r.start_dte < c.term_dte or c.term_dte is null)

-- Throw out a ramp if its end date is before its start date
AND (r.start_dte < s.term_dte)  -- condition (5)

AND s.name not like '%zz%' 
```

现在您可以看到条件 (3) 比条件 (5) 弱，因此**要么**(3) 是多余的，可以省略**，要么**(5) 太强而错误地过滤掉结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:04:43.643

我的问题是在第五条

```
AND (r.start_dte < r.end_dte) 
```

我忘了这`r.end_dte`可能是空的。这给了我奇怪的结果。我把它改成

```
AND (r.start_dte < r.end_dte OR r.end_dte is null) 
```

# ios - UILabel won't adjust height to fit content

> ID：15773888
> 
> 赞同：1
> 
> 时间：2013-04-02T20:37:37.887
> 
> 标签：ios, objective-c

我无法让这个动态标签根据内容调整其高度。它记录了正确的信息，但标签始终是相同的高度。有任何想法吗？

```
 self.descriptionLabel.text = string;
        self.descriptionLabel.adjustsFontSizeToFitWidth = YES;

        self.descriptionLabel.numberOfLines=0;
        CGSize maximumLabelSize = CGSizeMake(296,9999);

        CGSize expectedLabelSize = [string sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] constrainedToSize:maximumLabelSize lineBreakMode:NSLineBreakByWordWrapping];

        //adjust the label the the new height.
        CGRect newFrame = self.descriptionLabel.frame;
        newFrame.size.height = expectedLabelSize.height;
        NSLog(@"the height %f", newFrame.size.height);
        self.descriptionLabel.frame = newFrame; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:22:42.240

```
 CGSize constraintSize = CGSizeMake(requiredWidth, MAXFLOAT);

        CGSize labelSize = [requiredLableText sizeWithFont:requiredFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

        returned size will give u the dynamic height of the UILabel 
```

# svn - SVNAnt 提交问题

> ID：15773891
> 
> 赞同：0
> 
> 时间：2013-04-02T20:37:46.067
> 
> 标签：svn, ant, svnkit, svnant

我有一个具有以下设置的 ant build.xml 文件：

```
<typedef resource="org/tigris/subversion/svnant/svnantlib.xml"
 classpathref="svnant.classpath"/>

<svnSetting id="svn.settings" username="${svn.username}" password="${svn.pw}" 
javahl="false" svnkit="true" failonerror="true"/>

<target name="commit">
   <svn refid="svn.settings">
        <commit file="${webcontent}/version.properties"
            message="commit version from build.xml by ${user.name}"
        />
    </svn>

</target> 
```

运行 ant 构建会生成以下输出：

```
[svn] Using svnkit
[svn] <Commit> started ...
[svn] commit -m "commit version from build.xml by username" -N C:/path/to/WebContent/version.properties 
```

但它永远不会结束。只是挂在那个声明上。我最终不得不终止构建并清理 svn 目录，因为 WebContent 目录被 SvnKit 设置为锁定

客户端存储库是 svn 版本 1.6，我使用的是 svnant 版本 1.3.1 Ant 版本是 1.7.1

这有什么关系？

为什么它从不抛出错误或停止？

SvnKit 是否只有 SVN 版本 1.7+？

编辑：

所以我又搞砸了一点。如果我运行构建并且文件没有任何更改，则构建继续

```
 [svn] <Commit> finished. 
```

但是，如果我对文件进行任何编辑并运行构建，它就会挂起。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:46:35.320

感谢@ChadNouis，我终于发现我在加载它们的属性文件之前设置了我的 svn 用户名和 pw。

它挂起是因为存储库需要用户名/密码，但没有提供。

似乎服务器会拒绝或客户端会意识到已经超时，但这就是问题所在。

有问题的配置：

```
<typedef resource="org/tigris/subversion/svnant/svnantlib.xml"
 classpathref="svnant.classpath"/>

<!-- create svnSetting from properties...that don't exist yet -->
<svnSetting id="svn.settings" username="${svn.username}" password="${svn.pw}" 
javahl="false" svnkit="true" failonerror="true"/>

<!-- properties file loaded after svnSetting created...d'oh -->
<property file="svn-credentials.properties"/>

<target name="commit">
   <svn refid="svn.settings">
        <commit file="${webcontent}/version.properties"
            message="commit version from build.xml by ${user.name}"
        />
    </svn>

</target> 
```

# google-app-engine - 在本地环境中重定向后，我应该期待过时的结果吗？

> ID：15773892
> 
> 赞同：7
> 
> 时间：2013-04-02T20:37:47.427
> 
> 标签：google-app-engine, google-cloud-datastore, browser-cache, app-engine-ndb

将新实体发布到数据存储后，我将页面重定向到一个新 URL，该 URL 列出了该组中的所有实体。当我重定向时，页面显示陈旧的结果，我必须重新加载才能查看数据存储中的新实体列表。

我知道最终的一致性。这就是我看到陈旧结果的原因吗？

例如，

我的数据存储区有一个用户 - 用户 1 然后，在一个表单中，我添加了一个用户 - 用户 2 这个实体被放入数据存储区，然后我重定向到一个新的 url，即“get/users”

在重定向上，我只看到用户 1，但如果我刷新页面，我会看到用户 2。我可以保证或帮助防止过时的结果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T22:48:26.210

是的，正如您所说，这是由“最终一致性”引起的。

我有几个建议：

1.  使用 AJAX。使用重定向会导致不必要的额外工作：
    *   额外的（不必要的）HTTP 请求（网络带宽、延迟、服务器资源、移动数据成本等）
    *   一个额外的（不必要的）数据存储查询以确认您已经知道的内容
2.  使用 JavaScript 更新在 XMLHttpRequest 成功时向用户显示的用户列表；不要执行另一个查询。
3.  如果你真的需要用户对象，你可以从数据存储中按键获取（不是查询），这将是高度一致的。
4.  如果你真的想要一个强一致的查询，使用一个**祖先查询**，它是强一致的。在成功响应中将该查询的结果发回并相应地更新您的 UI。
    *   注意：使用祖先查询需要一个实体组，限制为 ~ 1 写入/秒；例如，此速率足以记录博客文章的评论，但可能不足以在您的应用程序中创建新用户

# javascript - JSON 响应未定义：使用 XMLHttpRequest

> ID：15773898
> 
> 赞同：0
> 
> 时间：2013-04-02T20:37:55.130
> 
> 标签：javascript, json, get, xmlhttprequest

我正在使用 XMLHTTPRequest 来获取 JSON 响应。当我在 Firebug 中查看 Response 选项卡时，它会显示我在[jsonlint](http://jsonlint.com)上验证过的 JSON 对象。当我尝试访问对象的属性时，我得到

> 类型错误：obj 未定义

我已经研究了几个小时，但未能找到可行的解决方案。

代码：

```
function getState(light) {
  var txt = execute('GET', 'http://' + bridge + '/api/' + hash + '/lights/' + light);
  var obj = eval('(' + txt + ')');
  //var obj = JSON.parse(txt);
  //this gives me "SyntaxError: JSON.parse: unexpected character"
  console.log(obj.name);
}

function execute($method, $url, $message) { //used for both PUT and GET requests
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open($method, $url, true)
  xmlhttp.send($message);
  console.log(xmlhttp.response);
  return xmlhttp.response;
} 
```

在 Firebug Response 选项卡中，表示 GET 请求的响应：200 OK -4ms

```
{
  "state": {
    "on": false,
    "bri": 200,
    "hue": 8664,
    "sat": 140,
    "xy": [0.4932, 0.3832],
    "ct": 428,
    "alert": "none",
    "effect": "none",
    "colormode": "hs",
    "reachable": true
  },
  "type": "Extended color light",
  "name": "Left rear living room 1",
  "modelid": "LCT001",
  "swversion": "65003148",
  "pointsymbol": {
    "1": "none",
    "2": "none",
    "3": "none",
    "4": "none",
    "5": "none",
    "6": "none",
    "7": "none",
    "8": "none"
  }
} 
```

当我调用 getState 函数（在页面加载时）时，console.log 声称 xmlhttp.response 是一个空字符串。对 'txt' 和 'obj' 执行 typeof 会返回未定义。我正在尝试访问对象元素，例如：

`obj.name`和`obj.state.on`

我是使用 JSON 和 XMLHttpRequest 的新手——我的代码基于其他人最初创建的模板。我对我在程序中其他地方使用的 PUT 请求没有任何问题，使用上述功能，但似乎无法让 GET 请求正常工作。

如果我遗漏了任何重要信息，请告诉我。感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:02:03.527

您的 XML HTTP 请求设置为异步的（即脚本不会等到收到响应并在 HTTP 请求在后台发生时继续执行）。

`xmlhttp.response`这意味着在您归还它之前没有足够的时间。结果，正如错误消息所说，`txt`未定义所以未定义。`obj`

更改`xmlhttp.open`调用，使调用是同步的（即脚本等到收到 HTTP 响应后再继续）：

```
xmlhttp.open($method, $url, false); // true => asynchronous, false => synchronous 
```

# c# - ASP.Net UpdatePanel 未更新，部分回发触发

> ID：15773899
> 
> 赞同：0
> 
> 时间：2013-04-02T20:37:58.790
> 
> 标签：c#, asp.net, ajax, updatepanel

所以我已经被这个问题困住了好几个小时，搜索了论坛，尝试了人们建议的一切，但我就是无法让它工作。

我有一个（相当大的）网络表单。表单上的某处是一个 updatePanel，其中包含一个 CuteSoft Ajax Uploader 控件。当上传文件时，该控件在我的代码中调用一个函数 - 这工作正常。在该函数中，我对 updatePanel 中的内容进行了一些更改（添加缩略图等），但是这些更改永远不会反映在前端。

这是表格（去掉了不相关的部分）：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="VehicleSubmissionWizard.ascx.cs"
    Inherits="MaxAdmin.UserControls.VehicleSubmissionWizard" %>
...
<div id="template3" style="display: none;">
    <div class="top-section">
        <div id="column-left">
            ...
        <div id="column-right">
            ...
    <form runat="server" id="form1" action="">
    <%--Panel 1--%>
    <asp:Panel runat="server" ID="pnlSubmissionWizard1">
        ...
    </asp:Panel>
    <%--/Panel 1--%>
    <%--Panel 2--%>
    <asp:Panel runat="server" ID="pnlSubmissionWizard2">
        ...
            <h2>
                Vehicle images</h2>
            <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true"
                AjaxFrameworkMode="Enabled" ClientIDMode="Static" EnableViewState="true" LoadScriptsBeforeUI="true"
                ScriptMode="Auto" ViewStateMode="Enabled">
            </asp:ScriptManager>
            <asp:UpdatePanel runat="server" EnableViewState="false" ID="upImageUpload" UpdateMode="Conditional">
                <Triggers>
                    <%--                    <asp:AsyncPostBackTrigger ControlID="Uploader" 
                           EventName="FileUploaded" />
                    --%>
                </Triggers>
                <ContentTemplate>
                    <input id="hdnImages" class="imagesUpload" type="hidden" />
                    <asp:HiddenField ID="hdn" runat="server" />
                    <CuteWebUI:Uploader ID="Uploader" runat="server" EnableViewState="false" MaxFilesLimit="3"
                        MaxFilesLimitMsg="Please upload a maximum of 3 photos" InsertButtonStyle-Width="280px"
                        MultipleFilesUpload="true" InsertText="Upload Photos [Max 3 Photos at up to 4mb each]"
                        OnFileUploaded="Uploader_FileUploaded" OnUploadCompleted="Uploader_Complete">
                        <ValidateOption MaxSizeKB="4096" AllowedFileExtensions="jpg,gif,png" />
                    </CuteWebUI:Uploader>
                    <div id="attachmentsDiv">
                        <CuteWebUI:UploadAttachments EnableViewState="false" runat="server" ID="Attachments"
                            MaxFilesLimit="3" Visible="false">
                            <ValidateOption MaxSizeKB="4096" AllowedFileExtensions="jpg,gif,png" />
                        </CuteWebUI:UploadAttachments>
                    </div>
                    <br />
                    <asp:Panel ID="pnlImageDetails_1" runat="server" CssClass="display_none" Style="float: left;
                        margin-bottom: 0">
                        <div class="uploadedImage" style="clear: both; float: left; margin: 5px 20px 5px 75px;">
                            <div style="text-align: center">
                                <asp:Image ID="imgUploadedImage1" runat="server" />
                            </div>
                            <div style="text-align: center">
                                <asp:LinkButton ID="btnRemoveImage_1" runat="server" OnCommand="RemoveImage_Click"
                                    CommandName="1" Text="Remove Image" CssClass="RemoveLinkButton" Style="margin-left: 15px;" />
                            </div>
                        </div>
                    </asp:Panel>
                    <asp:Panel ID="pnlImageDetails_2" runat="server" CssClass="display_none" Style="float: left;">
                        <div class="uploadedImage" style="clear: both; float: left; margin: 5px 20px 5px 20px;">
                            <div style="text-align: center">
                                <asp:Image ID="imgUploadedImage2" runat="server" />
                            </div>
                            <div style="text-align: center">
                                <asp:LinkButton ID="btnRemoveImage_2" runat="server" OnCommand="RemoveImage_Click"
                                    CommandName="2" Text="Remove Image" CssClass="RemoveLinkButton" Style="margin-left: 15px;" />
                            </div>
                        </div>
                    </asp:Panel>
                    <asp:Panel ID="pnlImageDetails_3" runat="server" CssClass="display_none" Style="float: left;">
                        <div class="uploadedImage" style="clear: both; float: left; margin: 5px 20px 5px 20px;">
                            <div style="text-align: center">
                                <asp:Image ID="imgUploadedImage3" runat="server" />
                            </div>
                            <div style="text-align: center">
                                <asp:LinkButton ID="btnRemoveImage_3" runat="server" OnCommand="RemoveImage_Click"
                                    CommandName="3" Text="Remove Image" CssClass="RemoveLinkButton" Style="margin-left: 15px;" />
                            </div>
                        </div>
                    </asp:Panel>
                    <script language="javascript" type="text/javascript">
                        var Image_Count = $('#<%= hdn.ClientID %>').val(); 
                    </script>
                </ContentTemplate>
            </asp:UpdatePanel>
            ...
    </asp:Panel>
    <%-- / Panel 2--%>
    <%--Panel 3--%>
    <asp:Panel runat="server" ID="pnlSubmissionWizard3">
        ...
    </asp:Panel>
    <%-- / Panel 3--%>
    <%-- Panel 4--%>
    <asp:Panel Visible="false" runat="server" ID="pnlSubmissionWizard4">
        ...
    </asp:Panel>
    <%-- / Panel 4--%>
    </form>
    ...
</div> 
```

代码隐藏看起来像这样：

...

```
 protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            //Uploader.FileUploaded += new CuteWebUI.UploaderEventHandler(Uploader_FileUploaded);
            Uploader.FileUploaded += Uploader_FileUploaded;
            Uploader.UploadCompleted += Uploader_Complete;
            Attachments.AttachmentRemoveClicked += Attachments_AttachmentRemoveClicked;
            Attachments.InsertButton.Style["display"] = "none";
            ((HiddenField)FindControl("hdn")).Value = "0";
        }

...

        protected void Uploader_FileUploaded(object sender, CuteWebUI.UploaderEventArgs args)
        {
            ...

                using (System.IO.Stream stream = args.OpenStream())
                {
                    // Check if file already exists - seems to do each image twice for some reason...
                    foreach (var ph in Photos)
                        if (String.Equals(ph.FileName, args.FileName))
                            return;

                    ...

                    // Show image thumbnail
                    ShowUploadedPhotoDetails(p, ImageCount);
                }
            }
            catch (Exception ex)
            {
               ...
            }
        }

    private void ShowUploadedPhotoDetails(Photo photo, int imageNo)
    {
        if (imageNo <= 3)
        {
            var imagePanel = (Panel)FindControl(String.Concat("pnlImageDetails_", imageNo));
            imagePanel.CssClass = "display_block";
            imagePanel.Visible = true;

            var uploadedImage = (System.Web.UI.WebControls.Image)FindControl(String.Concat("imgUploadedImage", imageNo));
            uploadedImage.ImageUrl = photo.ImageUrlThumb;
            uploadedImage.Visible = true;
            uploadedImage.CssClass = "CSS_CLASS";
        }
    }

        protected void Uploader_Complete(object sender, CuteWebUI.UploaderEventArgs[] args)
        {
            Uploader uploader = (Uploader)sender;
            uploader.InsertButton.Enabled = (Photos.Count < 3);

            // Force updatePanel to update
            upImageUpload.Update();
        } 
```

因此，当上传图像时，上述两个函数都会触发。图像数据很好。调试分配给控件的值（例如：ImageUrl、CssClass 等）表明它们已正确分配给控件。但是这些值永远不会在前端刷新。

有什么我错过的想法吗？

非常感谢格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:13:04.117

呸，我明白了！！！基本上我重建了整个表格，一步一步繁琐的小步骤。虽然我不确切知道是什么阻止了它的工作，但我怀疑它可能是由表单其他部分的按钮上设置的以下属性引起的：

```
PostbackUrl = ".." 
```

将其添加回我的工作表单会导致 updatePanel 中断..但是从我原来的损坏表单中删除它并不能修复它，所以那里可能还有其他东西。

没有更改任何代码，因此它与事件排序等无关（尽管 TheGeekYouNeed 是个好主意。

这是一个从 Asp.Net 2.0 更新到 4.0 的项目。也许升级中的某些东西搞砸了。谁知道呢，反正至少它是固定的。呸！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-13T22:30:29.963

如果 UpdatePanel 中有任何错误，包括 div 标签格式不正确等，则可能不会刷新面板。如果您没有让 UpdatePanel 刷新并且您已经尝试了所有常见的事情 .Update() 等，那么请检查您的 UpdatePanel 内容是否存在任何问题，它应该可以解决它。

# apache2 - 如何将 .php 文件的请求重定向到 Apache 2.4 中所有虚拟主机的 PHP-FPM？

> ID：15773901
> 
> 赞同：4
> 
> 时间：2013-04-02T20:38:04.043
> 
> 标签：apache2, php

在[Apache 2.2](http://httpd.apache.org/docs/2.2/)中，将指向物理 .php 文件的所有请求转发到[PHP-FPM](http://php-fpm.org/)如下：

LoadModule [fastcgi_module](http://www.fastcgi.com/) modules/mod_fastcgi.so

```
FastCGIExternalServer /usr/sbin/php-fpm -socket /usr/local/php/lib/php.sock -idle-timeout 900
AddHandler php-fastcgi .php
Action php-fastcgi /usr/sbin/php-fpm.fcgi
ScriptAlias /usr/sbin/php-fpm.fcgi /usr/sbin/php-fpm 
```

但在[Apache 2.4](http://httpd.apache.org/docs/2.4/)中有所不同，我正在关注[Apache Wiki](http://wiki.apache.org/httpd/PHP-FPM)中的教程，但我不理解为所有虚拟主机启用 PHP，而不是每个虚拟主机。

我在 PHP 文档中搜索，没有提到在 Apache 2.4 上安装：

*   [在 Unix 系统上的 Apache 2.x 上安装 PHP](http://www.php.net/manual/en/install.unix.apache2.php)
*   [PHP-FPM 安装](http://www.php.net/manual/en/install.fpm.install.php)
*   [PHP-FPM 文档](http://php-fpm.org/wiki/Documentation)

顺便提一下，感谢+蝶木子的解决方案是：

```
<IfModule mod_fastcgi.c>
    DirectoryIndex index.php index.shtml index.cgi index.html index.htm
    AddHandler php5-fcgi .php
    Action php5-fcgi /php5-fcgi
    Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
    FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -socket /var/lib/php/php.sock  -idle-timeout 900 -pass-header Authorization
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:56:46.133

也许这会帮助你。这是我设置 Apache 2.4 / mod_fastcgi / PHP-FPM -> [https://gist.github.com/diemuzi/3849349的工作配置](https://gist.github.com/diemuzi/3849349)

# c++ - C++ 中的当前日期和时间

> ID：15773903
> 
> 赞同：1
> 
> 时间：2013-04-02T20:38:12.287
> 
> 标签：c++, date, time

为什么此函数在正确显示 PST 和 UTC 时返回 Eastern_Daylight_Time 而不是 EDT？示例 - 2012-09-27@10:07:10(Eastern_Daylight_Time) 和 2013-03-28@07:07:27(PDT)

```
 std::string cur_date_time()
{
  static char buf[256]= {0};
  time_t curtime= time (NULL); //Get the current time
  struct tm *p_loctime=localtime(&curtime);//Convert it to local time representation

  // Format local time in a nice format. 
  strftime(buf, 255, "%Y-%m-%d@%H:%M:%S(%Z)", p_loctime);
  return std::string(buf);
} 
```

我可以做一些有一种标准格式的事情吗？例如 EDT 和 PDT 或 Eastern_Daylight_Time 和 Pacific_Daylight_Time

# php - 上传的pdf文件的真实性

> ID：15773906
> 
> 赞同：1
> 
> 时间：2013-04-02T20:38:26.273
> 
> 标签：php, pdf, file-upload, security

我的服务器必须只接受 pdf 文件。我正在使用 php 上传文件。目前，我正在检查文件是否以 %PDF 开头，以确保上传的文件确实是 pdf 文件。是否有其他检查以确保 100%（或至少非常强烈）它是 pdf 文件。恶意用户可以上传以 %PDF 开头的可执行文件吗？我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:59:29.140

您可以使用 PECL[`FileInfo`](http://www.php.net/manual/en/ref.fileinfo.php)扩展来检测 MIME 类型。（但我怀疑，在内部，它只是做你已经在做的同样的事情。）或者，你可以[`FPDI`](http://www.setasign.de/products/pdf-php-solutions/fpdi/)用来查看你是否可以成功读取文件。不过，对于 PDF 文件，我认为嵌入式恶意软件比命名错误的可执行文件更令人担忧。每当您接受来自用户的上传时，运行文件[`ClamAV`](http://www.clamav.net/lang/en/)或类似文件可能是个好主意。

# sql-server - 如何从图形界面查看脚本日志？

> ID：15773907
> 
> 赞同：3
> 
> 时间：2013-04-02T20:38:38.267
> 
> 标签：sql-server, user-interface, editor, sql-server-2012

我在 MS SQL Server 2012 中创建了一个数据库，现在我正在创建简单的表。

我知道您可以通过带有下拉框的图形表单格式或通过实际脚本创建表格。

我的问题是：SQL Server 2012 是否具有在您以图形格式创建表时正在构建的脚本生成器？就像在 Dreamweaver 中使用 WYSIWYG 界面一样，它在编辑器中以 HTML 格式生成脚本。

当我在手动下拉框中创建表格时，我觉得逐步了解脚本中发生的事情会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:54:03.453

您应该会看到一个脚本图标，当您将鼠标悬停在它上面时，它会在您制作表格或更改表格后显示“生成脚本”或“将表格编写为”。如果单击它们，您将以图形形式看到您所做的工作，但以脚本形式显示。这应该可以帮助您了解如何生成 T-SQL 代码以以图形形式执行相同的操作。

# java - Android：资产文件夹中的图片用于循环显示目的

> ID：15773910
> 
> 赞同：0
> 
> 时间：2013-04-02T20:38:52.417
> 
> 标签：java, android, image

我似乎找不到确切的解决方案，所以我在下面谦虚地寻求帮助。

我想检查资产文件夹并有一个循环来检查前缀为“pic”的图片数量，如“pic1.jpg”、“pic2.jpg”等。

有没有一种有效的方法来做到这一点？检查资产文件夹中带有前缀“pic”的图片数量并收集图片文件，以便我可以动态知道要显示/预览/渲染的图片数量。

在此先感谢，请原谅我可能写的任何无知，仍然有点绿色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:00:40.720

您的问题是对此的扩展： [如何扫描 Java 中的文件夹？](https://stackoverflow.com/questions/189094/how-to-scan-a-folder-in-java)

java.io.File API 提供了一个方法，该方法接受[java.io.FilenameFilter](http://docs.oracle.com/javase/6/docs/api/java/io/FilenameFilter.html)并返回文件和目录列表。

使用 FilenameFilter 为过滤器类提供一个方法：

```
boolean accept(File dir, String name) 
```

过滤你想要的文件。也许是这样的：

```
public class NameFilter implements FilenameFilter {

  private String prefix;

  public NameFilter(String prefix) {
    this.prefix = prefix;
  }

  public boolean accept(File dir, String name) {
    return name.startsWith(prefix);
  }
} 
```

希望这可以帮助。

# android - 如果ListView有项目和子项目，如何在ListView的选定行中获取文本

> ID：15773914
> 
> 赞同：1
> 
> 时间：2013-04-02T20:39:04.683
> 
> 标签：android

我有一个列表视图

```
ListView poiList = (ListView) findViewById(R.id.poiList); 
```

我用它填充它

```
SimpleAdapter adapter = new SimpleAdapter(this, data,
                        android.R.layout.simple_list_item_2,
                        new String[] {"name", "dist"},
                        new int[] {android.R.id.text1,
                                   android.R.id.text2});
        poiList.setAdapter(adapter); 
```

使用这个 SimpleAdapter，ListView 中的每一行都有一个项目和一个子项目。一切都很完美。

现在我为我的 ListView 实现 onItemClick：

```
poiList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            String poiName = ((TextView)view).getText().toString();
}
 } 
```

但我无法获得我选择的行中的文本。我认为该行中不止一个 TextView （项目和子项目）。我如何参考它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:00:52.833

正如我在您发布问题时评论的那样，您应该使用：

```
((TextView)(view.findViewById(android.R.id.text1))).getText().toString() 
```

因为`View`不是它`TextView`本身，而是列表项的`View`。

顺便说一句，很高兴它解决了你的问题。干杯。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-03T15:16:11.973

要使其完整：

```
String selectedFromList = ((TextView (view.findViewById(android.R.id.text1))).getText().toString(); 
```

# matlab - Matlab - 以秒和毫秒读取金融时间序列

> ID：15773915
> 
> 赞同：0
> 
> 时间：2013-04-02T20:39:13.510
> 
> 标签：matlab, csv, time-series, financial

我有包含秒和毫秒的财务数据文件 (CSV)。将其解析为 Matlab (R2012A) 时，我只得到几小时和几分钟。

我无法从 Matlab 文档中理解如何格式化它以包含全部时间。

这个文件：

13 年 3 月 20 日：10：11.111 457.42 199 13
年 3 月 21 日：49：00.222 457.5 100
13 年 3 月 22 日：50：00.333 457.5499 100

matlab命令和输出

> > fts1 = ascii2fts('C:\MatlabTest.csv')

fts1 =

```
desc:  C:\MatlabTest.csv
freq:  Unknown (0)

'dates:  (3)'    'times:  (3)'    'series1:  (3)'    'series2:  (3)'
'20-Mar-2013'    '10:10'          [     457.4200]    [          199]
'21-Mar-2013'    '12:49'          [     457.5000]    [          100]
'22-Mar-2013'    '23:50'          [     457.5499]    [          100] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:28:44.183

[`ascii2fts`](http://www.mathworks.co.uk/help/finance/ascii2fts.html)创建一个`fints`对象。[Matlab 文档](http://www.mathworks.co.uk/help/finance/fints.html)表明它对时间信息的支持仅限于 hh:mm - 即小时和分钟。

恐怕如果您想获得比分钟更精确的时间分辨率（即：秒或毫秒），您将不得不放弃现有的 Matlab 工具箱代码并编写自己的代码。

# unix - 尝试使用 X 命令从 SAS EG 运行 UNIX 命令

> ID：15773916
> 
> 赞同：0
> 
> 时间：2013-04-02T20:39:26.377
> 
> 标签：unix, sas

这是我遵循的步骤...... 1）创建了一个shell脚本/fbrms01/dev/projects/Err_check.sh，其中包含以下代码......

```
Y=`date +'%Y'`
  M=`date +'%m'`
  D=`date +'%d'`
  today=$Y.$M.$D
  echo $today
  ls -l /fbrms01/dev/projects/tadis003/*_"$today"*.log | xargs grep "ERROR:" >         /fbrms01/dev/projects/tadis003/log_error.dat 
```

2）在 UNIX 上运行 shell 脚本，它运行良好，并创建了符合我需要的 .dat 文件。

```
$sh Err_check.sh 
```

3) 使用 X 命令在 SAS 上运行该 shell 脚本...都试过了

```
X '/fbrms01/dev/projects/tadis003/sh Err_check.sh';
  X 'sh Err_check.sh'; 
```

但它不是创建 .dat 文件....知道我在哪里做错了....谢谢，山姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:46:09.077

```
/*STEP1:Created a .sh file with following code on unix 
    Y=`date +'%Y'`
    M=`date +'%m'`
    D=`date +'%d'`
    today=$Y.$M.$D
    ls -1 /fbrms01/dev/Logs/JB_*_"$today"_*.log | xargs grep -l "ERROR:" >> /fbrms01/dev/projects/tadis003/log_error.dat*/

/*STEP2:Run the shell script using X command*/
X 'sh /fbrms01/dev/projects/tadis003/log_error.sh'; 
```

# c++ - `const`ness、引用和函数调用

> ID：15773917
> 
> 赞同：0
> 
> 时间：2013-04-02T20:39:33.247
> 
> 标签：c++, pointers, inheritance, reference

```
class Foo{};

class BarParent
{
    Foo* p_foo;

    public:
    BarParent(Foo * const p_x) //OR BarParent(Foo const * x) OR BarParent(Foo * x)
                             //OR (Foo const * const x)
    {
        p_foo = x;
    }
};

class BarChild: public BarParent
{
    public:
    BarChild(const Foo& x)
    : BarParent(& x){}
}; 
```

我的意图是：在使用ctor时指向`x`with 。有没有办法这样做。`p_foo``BarChild`

我已经为`BarParent`ctor 尝试了所有可能的签名，但没有运气。

***摘要：***由于某种原因，我混淆了将（指向非`const`对象的指针）`const`）打破`const`限制的事实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:55:27.383

我为您提供两种选择：

1.  要么您真的希望`BarChild`构造函数采用 a `const Foo&`，在这种情况下，您需要坚持您永远不会允许`Foo`修改对象的承诺。为此，两者`p_x`和都`p_foo`必须是`const Foo*`（即指向 的指针`const Foo`）。如果它是指向非的指针`const` `Foo`，那么您将有效地允许修改对象，从而违反您的承诺。

    ```
    class BarParent
    {
        const Foo* p_foo;

        public:
        BarParent(const Foo* p_x)
        {
            p_foo = x;
        }
    }; 
    ```

2.  或者，您确实想保留 a`Foo*`而不是 a `const Foo*`，因此`BarChild`构造函数应该采用 a`Foo&`而不是 a `const Foo&`。这样，您就不会在保留 object 方面撒谎`const`。

    ```
    class BarChild: public BarParent
    {
        public:
        BarChild(Foo& x)
        : BarParent(& x){}
    }; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:58:20.240

您误解了 a`const Foo&`是什么。

A`const Foo&`是对变量的别名或引用，您永远无法通过该变量对其进行修改（不使用`const_cast`或 C 风格的强制转换）。这不仅仅是“现在”不修改它的承诺，而且还承诺你告诉这个变量的每个人都不会修改它。

如果你想存储一个指向这个数据的指针以便以后修改它，你不应该把它当作一个`const Foo&`，而是一个`Foo&`。

所以要修复你的代码，重写`BarChild`如下：

```
class Foo{};

class BarParent
{
  Foo* p_foo;

  public:
    BarParent(Foo * p_x):
      p_foo(p_x)
    {}
};

class BarChild: public BarParent
{
  public:
  BarChild(Foo& x):
    BarParent(& x)
  {}
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:40:54.207

您可以使用以下方法抛弃 const-ness `const_cast`：

```
p_foo = const_cast<Foo *>x; 
```

但这通常是一个**坏主意**，原因有两个：

*   const 正确性的全部意义在于记录/强制执行关于谁可以修改什么的某些期望。 `const_cast`颠覆了这一点。

*   在某些情况下，您甚至可能会释放**未定义的行为**（即，修改实际上是`const`通过非`const`指针的底层对象）。

一般来说，首先要找到一种避免需要这样做的方法（我无法提出任何具体建议，因为我不知道您的用例是什么）。

# asp.net - ASP.NET Web 服务导致 Adob e Flex/AIR 应用程序中的内存泄漏

> ID：15773919
> 
> 赞同：1
> 
> 时间：2013-04-02T20:39:40.673
> 
> 标签：asp.net, ios, apache-flex, air, adobe

我们已经为新发布的软件产品发布了一个基本的 iOS 应用程序（使用 FB 4.6 使用 Adob​​e Flex/AIR 构建），我的任务是对应用程序进行增强，从本质上使其功能更加符合要求。

我做了很多改进，一路上取得了不同程度的成功。但是，我离题了。

我发现应用程序中似乎存在严重的内存泄漏，直到现在才被发现。

该应用程序的初始版本并没有做很多事情，但对于大多数用途来说已经足够了。但是现在它包含了更多的功能，我在测试中注意到它在 iPad 上有点迟钝。我将其归结为设备问题，并猜测第一代 iPad 不如新 iPad 强大。

我们在同事的 iPad 3 上测试了该应用程序，发现了同样的速度问题。我通过 FB 的分析器运行该应用程序，发现它似乎使用了非常多的内存。当然，这个应用程序是针对移动平台的，并且分析器在 Windows 的 Flash Player 中运行该应用程序，但我认为这是问题所在。

应用程序中出现的第一个视图只是一个登录屏幕。我在应用程序启动时查看了图表，内存使用率一直很低，然后突然飙升至 120MB。这是没有用户输入的。登录或切换视图会使使用量翻倍，甚至三倍，而且永远不会下降。

我承认，也许我没有像我应该意识到的那样意识到资源使用，但我一直在尝试清除对象，比如我去的。

大多数后端功能是通过调用用 ASP.NET 编写的 Web 服务来完成的。使用 Web 服务向导将 Web 服务插入 Flash Builder...例如，URL 将是[http://www.mydomain.com/MyWebService.asmx?WSDL](http://www.mydomain.com/MyWebService.asmx?WSDL)

第一个“主页”视图不会调用任何 Web 服务功能，除非用户实际执行了某些操作，例如按下按钮。我从视图的“fx:Declarations”部分取出 Web 服务声明，并注释掉对它的所有引用，然后再次尝试分析器。

这一次，使用量上限为 2MB。这是一个天文数字的差异。

分析器显示 99% 的内存被“XML”类使用，这让我相信 Web 服务是问题所在。似乎视图在启动时正在查询 Web 服务，并且为此使用了大量内存。

我在这里错过了什么吗？有没有更有效的方法从 AIR 应用程序调用 Web 服务？我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:31:17.240

我想我终于想通了！！

这篇文章是为可能遇到相同问题的其他人提供的公共服务。

我不确定为什么 Web 服务会导致这样的内存使用高峰，但我能够解决它。在我的情况下，使用量仍然飙升至略低于 120MB，但不同的是，当我切换视图时，它不会像以前那样翻倍/翻倍。

感谢艾米带领我朝着正确的方向前进。我基本上把所有的声明等都取出来了，然后在应用程序 MXML 文件中公开声明，就像这样。

```
public var ws:WebService = new WebService();

protected function viewnavigatorapplication1_preinitializeHandler(event:FlexEvent):void
{
    ws.loadWSDL("http://www.mydomain.com/MyWebService.asmx?WSDL");
} 
```

那么在你看来...

```
private var serviceOperation:AbstractOperation;
private var myToken:AsyncToken;

private function getData():void
{
    var firstName:String = "John";
    var lastName:String = "Smith";        

    serviceOperation = this.parentApplication.ws.getOperation("MyFunction");
    serviceOperation.addEventListener(FaultEvent.FAULT, fault);
    serviceOperation.addEventListener(ResultEvent.RESULT, result);

    myToken = serviceOperation.send(firstName, lastName);
}

public function result(data:Object):void
{
    switch(data.token)
    {
        case myToken:
            processResults(data);
            break;
        default:
            break;
    }
} 
```

显然，当您完成它们时，请确保移除事件侦听器并将您的对象引用设置为 null。为了安全起见，我这样做是为了令牌和操作。

我还没有彻底测试应用程序的内存使用情况，但乍一看，它并没有呈指数级增长，而且我相信我什至看到它在垃圾收集开始时下降了。

# heroku - 可以分配给一个 Heroku 应用程序的最大域数？

> ID：15773920
> 
> 赞同：5
> 
> 时间：2013-04-02T20:39:42.570
> 
> 标签：heroku, dns

我正在与一位客户讨论一个项目，该客户希望他的用户通过自己的域名访问该应用程序，如果他们愿意的话……</p>

**可以分配给一个 Heroku 应用程序的自定义域的数量是否有限制？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:21:35.083

您可以在应用程序上添加的域数量没有限制，来自[docs](https://devcenter.heroku.com/articles/custom-domains#heroku-setup)：

```
You can add any number of domains to a single app 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-01-15T09:22:16.477

[Heroku 文档](https://devcenter.heroku.com/articles/custom-domains#rules-on-adding-domains)现在规定每个应用程序限制为 1,000 个自定义域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-08T19:24:52.247

根据[Heroku 的文档](https://devcenter.heroku.com/articles/custom-domains#rules-on-adding-domains)，现在每个应用程序的限制是 10,000 个自定义域。

# c# - 管道操作员，它是如何工作的？

> ID：15773924
> 
> 赞同：3
> 
> 时间：2013-04-02T20:40:05.860
> 
> 标签：c#, pipe, operator-keyword

所以我刚才乱七八糟，把这个写了出来：

```
 int i = 0|1|2|3|4|5|6|7|8|9|10;

        Console.WriteLine(i.ToString());
        Console.Read(); 
```

这输出 15。为什么它输出 15？管道操作员是做什么的？

你能给我一个实际使用的例子吗？

我明白这似乎是一个毫无意义的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T20:44:00.073

这是按[位或运算符](http://msdn.microsoft.com/en-us/library/kxszd0kx%28v=vs.110%29.aspx)

OR 运算符的基本真值表是：

```
 A  B  A|B
  0  0   0
  0  1   1
  1  0   1
  1  1   1 
```

因此，以二进制形式分析您的案例`0|1|2|3|4|5|6|7|8|9|10`，即：

```
 0 = 0b00000 
 1 = 0b00001 
 2 = 0b00010 
 3 = 0b00011 
 4 = 0b00100 
 5 = 0b00101 
 6 = 0b00110
 7 = 0b00111 
 8 = 0b01000 
 9 = 0b01001 
10 = 0b01010
------------
15 = 0b01111 
```

**延伸阅读**

*   [位运算](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:48:33.913

`|`是 C#（和许多其他语言）中的按位 OR 运算符。两位之间的 OR 操作如下所示：

```
0 | 0 = 0
1 | 0 = 1
0 | 1 = 1
1 | 1 = 1 
```

所以十进制 1 | 2变成01 | 二进制的 10，结果为 11（十进制的 3），如下所示：

```
01
10
--
11 
```

按位或是累积运算，因此：

```
 0 = 00000 
 1 = 00001 
 2 = 00010 
 3 = 00011 
 4 = 00100 
 5 = 00101 
 6 = 00110
 7 = 00111 
 8 = 01000 
 9 = 01001 
10 = 01010
------------
15 = 01111 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:47:56.917

您正在对这些数字的二进制表示进行按位或。二进制中的数字 0 到 10 如下所示：

```
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010 
```

如果您要对所有这些数字的每个数字执行 OR，您最终会得到`1111`- 十进制的 15。

# xcode - 为 Mac OS X 编译 Stackmob iOS SDK

> ID：15773925
> 
> 赞同：1
> 
> 时间：2013-04-02T20:40:06.130
> 
> 标签：xcode, cocoa, stackmob

我下载了`StackMob iOS SDK`. 我可以`StackMob-v.1.4.0`从源代码编译以在 iOS 项目中使用（这很酷），但我真的很想看看我是否可以让它在 OS X 上运行。通过 github 问题跟踪器查看，看起来一些修复程序已放入允许它为 OS X 构建。

源代码由一个带有`iOS-sdk`和的工作区组成`cocoapods proj`。

我尝试改变：

```
Targets > StackMob-iOS-SDK > Base SDK to 10.8
Targets > StackMob-iOS-SDK > Architecture to Standard (64) 
```

我删除了带有 AppKit 的 UIKit、带有 CoreServices 的 MobileCoreServices。

[https://github.com/stackmob/stackmob-ios-sdk](https://github.com/stackmob/stackmob-ios-sdk)

我现在非常迷茫，如果有人能指出我将项目编译到 OSX 的正确方向，那就太好了。

谢谢！马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:52:19.257

**更新**

从 Stackmob iOS SDK 2.0 开始，以下 cocoapods 更改已集成到主 pods 文件中，因此您不再需要进行这些更改来为 MacOSX 编译。

**原始答案**

如果您使用的是 cocoapods，那么有一种方法可以破解它来工作。编辑：

`~/.cocoapods/master/StackMob/1.4.0/StackMob.podspec`

并替换：

```
s.platform = :ios, '5.0' 
```

和：

```
s.ios.deployment_target = '5.0'
s.ios.frameworks = 'MobileCoreServices'
s.osx.deployment_target = '10.7'
s.osx.frameworks = 'CoreServices' 
```

并替换：

```
s.frameworks = 'CoreData', 'CoreLocation', 'Security', 'SystemConfiguration', 'MobileCoreServices' 
```

和：

```
s.frameworks = 'CoreData', 'CoreLocation', 'Security', 'SystemConfiguration' 
```

现在，如果您在 Podfile 中使用以下内容进行 pod 安装，您应该会获得一个有效的 SDK。

```
platform :osx, '10.7' 
```

请注意，我自己只使用了 SMDataStore API，它似乎工作正常。例如，我没有尝试过 CoreData。

# mysql - 如何将我的 mysql 数据库从 phpmyadmin 推送到 heroku 的 cleardb？

> ID：15773926
> 
> 赞同：5
> 
> 时间：2013-04-02T20:40:06.013
> 
> 标签：mysql, heroku, phpmyadmin

我正在使用 WAMP 服务器来运行我的 php 应用程序。我在 phpmyadmin 中有一个数据库 BOOK。我怎样才能将这些数据推送到heroku。我已经使用 add on 将 cleardb 添加到我的应用程序中。

heroku config 也显示数据库 url。

我试过

```
db:push mysql://root@localhost/BOOK 
```

但它没有用。

错误 -->

```
 Failed to connect to database:
 Sequel::AdapterNotFound -> LoadError: cannot load such file -- mysql 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:10:50.717

ClearDB 建议使用`mysql`和`mysqldump`来导入数据。来自ClearDB.com 上的[常见问题解答：](http://www.cleardb.com/developers/help/faq)

```
For importing data into your MySQL database, we recommend that you use both the mysql command line client as well as the mysqldump database backup utility. 
```

导入的语法是这样的：

```
$ mysql <dbname> -u <username> -p<password> < <file.sql> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-11T21:22:38.097

如果本地没有安装mysql，在终端输入“mysql”必然会出现“command not found”。MAMP 提供[命令行语法](http://blog-en.mamp.info/2009/08/using-mysql-command-line-with-mamp.html)来解决此问题。因此，如果我们不想更改 $PATH 以直接使用 'mysql' 命令（在我看来，如果我们只使用命令行 mysql 来进行数据库迁移，真的没有必要），我们可以运行以下导入语法：

```
$/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot -u username -h hostname -p < exported_sql_file.sql 
```

CLI 将提示输入密码。然后将exported_sql_file.sql 中的数据库导入clearDB。如何获取导入语法的“用户名”、“主机名”和“密码”，请参考[本教程获取帮助](https://scotch.io/@phalconVee/deploying-a-php-and-mysql-web-app-with-heroku)。

# asp.net-mvc - ASP MVC3 视图模型在回发到编辑方法时从集合对象中丢失数据

> ID：15773929
> 
> 赞同：2
> 
> 时间：2013-04-02T20:40:23.497
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, postback, viewmodel

我的 ASP MVC3 视图模型在 Edit 方法加载这个特定页面时工作得很好，但是当用户点击保存并执行回发时，两个集合对象 ( `List<T>`) 中包含的所有信息都丢失了。有任何想法吗？

这是视图中的代码。这会正确加载所有代理信息（ID 和状态代码）

```
 @for (int i = 0; i < Model.Fixed.Count; i++)
    {           

        if(!String.IsNullOrWhiteSpace(Model.Fixed[i].AgentId))
        {
           fixedRow++;

           if (fixedRow > 2)
           {
               var rowId = "row" + fixedRow.ToString() + "F";
               <tr id=rowId class="noSee">
                    <td>
                        @Html.DropDownListFor(model => model.Fixed[i].StateCode,
                         (SelectList)ViewBag.StateCodeList, Model.Fixed[i].StateCode)
                    </td>
                    <td>
                        @Html.EditorFor(model => model.Fixed[i].AgentId)
                        @Html.ValidationMessageFor(model => model.Fixed[i].AgentId)
                    </td>
                    @if(fixedRow > 1)
                    {
                        var send = "MoreFixed(" + (fixedRow + 1).ToString() + ");";
                        var dataId = "plus" + fixedRow.ToString() + "F;";
                        <td id=@dataId  class="more" onclick=@send>+</td>
                    }
               </tr> 
           }
           else
           {
                <tr>
                    <td>
                        @Html.DropDownListFor(model => model.Fixed[i].StateCode,
                         (SelectList)ViewBag.StateCodeList, Model.Fixed[i].StateCode)
                    </td>
                    <td>
                        @Html.EditorFor(model => model.Fixed[i].AgentId)
                        @Html.ValidationMessageFor(model => model.Fixed[i].AgentId)
                    </td>
                    @if(fixedRow > 1)
                    {
                        var send = "MoreFixed(" + (fixedRow + 1).ToString() + ");";
                        var id = "plus" + fixedRow.ToString() + "F;";
                        <td id=@id class="more" onclick=@send>+</td>
                    }

                </tr> 
           }        
        }
    } 
```

这是来自视图模型的代码

```
public class BankListViewModel
{
    public int ID { get; set; }
    public string BankName { get; set; }
    public string Tier { get; set; }
    public string SpecialNotes { get; set; }
    public string WelcomLetterReq { get; set; }

    public List<BankListAgentId> Fixed { get; set; }
    public List<BankListAgentId> Variable { get; set; }
    public List<BankListAttachments> Attachments { get; set; }

    public BankListViewModel()
    {
        //Initialize Fixed and Variable stat Lists
        Fixed = new List<BankListAgentId>();
        Variable = new List<BankListAgentId>();

        Models.BankListAgentId agentId = new BankListAgentId();

        for (int i = 0; i < 5; i++)
        {
            Fixed.Add(agentId);
            Variable.Add(agentId);                
        }

        //Initialize attachment Lists
        Attachments = new List<BankListAttachments>();
        Attachments.Add(new BankListAttachments());
    }
} 
```

这是接收回发的控制器方法。同样，当页面加载时， `GET`Edit 方法从数据库中收集所有适当的信息，并将视图模型正确地返回给视图。

```
 [HttpPost]
    public ActionResult Edit(BankListViewModel viewModel)
    {
        if (ModelState.IsValid)
        {
            List<BankListAgentId> agentId = new List<BankListAgentId>();
            List<BankListAttachments> attachments = new List<BankListAttachments>();
            BankListMaster master = new BankListMaster();

            master = decipherViewModel(viewModel, out agentId, out attachments);

            db.Entry(master).State = EntityState.Modified;
            db.SaveChanges();

            return RedirectToAction("Index");
        }
        ViewBag.ID = new SelectList(db.BankListAgentId, "ID", "FixedOrVariable", viewModel.ID);
        return View(viewModel);
    } 

    private BankListMaster decipherViewModel(BankListViewModel viewModel, out List<BankListAgentId> agentId, out List<BankListAttachments> attachments)    
    {
        //Initialize
        BankListMaster banklistmaster = new BankListMaster();
        agentId = new List<BankListAgentId>();
        attachments = new List<BankListAttachments>();

        viewModel.BankName = banklistmaster.BankName;
        viewModel.SpecialNotes = banklistmaster.SpecialNotes;
        viewModel.Tier = banklistmaster.Tier;

        foreach (var item in viewModel.Fixed)
        {
            item.ID = viewModel.ID;
            agentId.Add(item);
        }

        foreach (var item in viewModel.Variable)
        {
            item.ID = viewModel.ID;
            agentId.Add(item); 
        }

        foreach (var item in viewModel.Attachments)
        {
            item.ID = viewModel.ID;
            attachments.Add(item);
        }

        return banklistmaster;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T21:01:51.730

唯一返回到控制器的是 Html 表单字段字段。就是这样。如果您不将信息放在表单域（输入、选择、文本区域等）中，则不会回发。

如果您想要回发该数据，则必须将其放置在隐藏字段中。在回发时简单地在数据库中查找该数据可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:53:22.013

这些值不会提交回控制器。提交的是您在视图中使用集合中的值创建的下拉列表中的选择，因为下拉列表位于您重新提交的表单中。

# php - 获取引号之间的字符串

> ID：15773931
> 
> 赞同：-4
> 
> 时间：2013-04-02T20:40:26.253
> 
> 标签：php, regex, string

我有一个包含双引号或单引号的字符串。我需要做的是在引用之间回显所有内容：

```
 $str = "'abc de', xye, jhy, jjou";
 $str2 = "\"abc de\", xye, jhy, jjou"; 
```

我不介意使用正则表达式（preg_match）或任何其他 php 内置函数。

请指教。

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:51:16.883

使用[`preg_match_all`](http://php.net/manual/en/function.preg-match.php)：

```
$str = "'abc de', xye, \"jhy\", blah blah 'bob' \"gfofgok\", jjou";
preg_match_all('/".*?"|\'.*?\'/', $str, $matches);
print_r($matches); 
```

这将返回：

```
Array ( 
   [0] => Array ( 
      [0] => 'abc de' 
      [1] => "jhy" 
      [2] => 'bob' 
      [3] => "gfofgok" 
   )
) 
```

正则表达式的解释：

```
"   -> Match a double quote
.*  -> Match zero or more of any character
?"  -> Match as a non-greedy match until the next double quote
|   -> or
\'  -> Match a single quote
.*  -> Match zero or more of any character
?\' -> Match as non-greedy match until the next single quote. 
```

`$matches[0]`包含单引号或双引号内的所有字符串的数组也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:46:58.553

正则表达式并不是那么复杂，即使它们在开始时看起来很吓人看看教程或它的文档它会清楚很多

根据您的问题，请查看此内容并在使用之前尝试了解它

```
 $str = "'abc de', xye, jhy, jjou";
 $str2 = "\"abc de\", xye, jhy, jjou";
$match = $match2 = array();
preg_match("/'(.+)'/", $str, $match);
preg_match("/\"(.+)\"/", $str2, $match2);
print_r($match);
print_r($match2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:46:11.633

对于这种情况，您可以使用[explode](http://php.net/manual/en/function.explode.php)内置函数：

```
function getBetween($string){
  //explode the string
    $exploded=explode("'",$string);
  //print using foreach loop or in any way you want
    foreach($exploded as $explode){
      echo $explode.'<br/>';
    } 
} 
```

# maven - Flyway 可以执行不被视为迁移的 SQL 脚本吗？

> ID：15773932
> 
> 赞同：5
> 
> 时间：2013-04-02T20:40:29.380
> 
> 标签：maven, flyway, sql-scripts

我们想使用 Flyway 进行数据库迁移。除了我们的迁移脚本之外，我们还需要执行一些不应被视为迁移的脚本（并且不需要在 schema_version 表中进行跟踪）。一个示例是执行包含仅与开发环境相关的配置数据或测试数据的脚本。我们仍然希望使用 flyway-maven-plugin 来执行这些 SQL 脚本，而不是在我的 flyway-maven-plugin 之前/之后运行的不同 maven 插件。

[关于flyway 的迁移前和迁移后脚本，](https://stackoverflow.com/questions/7219584/pre-and-post-migration-scripts-for-flyway)有人提出了类似的问题。如果实现了此功能，它也可以满足我们的需求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:09:12.497

借助 Flyway 对从多个位置加载脚本的支持，您可以进行配置，使其仅在某些环境中加载一组参考或测试数据，而在其他环境中不加载。

您必须为这些脚本提供一个版本，但这不应该是一个太大的问题，因为它们无论如何都依赖于存在的底层数据库结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T13:34:06.230

对于必须在数据库中的*系统数据*，例如查找表，这些可以由正常的迁移脚本处理。原因是它们与数据库结构和应用程序代码齐头并进。您可以使用命名约定来轻松区分系统数据脚本和 DDL 脚本。

对于*测试数据*，您可能需要考虑使用[flyway-test-extensions](https://code.google.com/p/flyway-test-extensions/)。

# linux - 向用户授予权限/更改所有者

> ID：15773933
> 
> 赞同：0
> 
> 时间：2013-04-02T20:40:35.003
> 
> 标签：linux, permissions

我有两个文件夹`/opt/tom`，`/opt/test/`并且具有以下权限：

```
drwxr-xr-x. 2 root root 4096 Apr  2 16:23 tom
drwxr-xr-x. 2 root root 4096 Apr  2 16:16 test 
```

如何将权限授予被调用的用户`john`，使其看起来像这样？

```
drwxr-sr-x 3 john root 4096 Dec  5 13:22 tom
drwxrwxrwx 3 john root 4096 Apr  1 16:45 test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:58:44.320

要更改用户，请使用（作为 root 或 with `sudo`）：

```
chown john tom test 
```

设置权限：

```
chmod 777 /opt/test
chmod 2755 /opt/tom 
```

（2 将设置 SGID 位）

您始终可以添加`-R`开关，因此这将是一个递归更改。值得补充的是，通常为目录设置 SUID/SGID 位会使在该目录中创建的新文件继承此选项。

# c# - 使用委托作为方法执行队列？

> ID：15773934
> 
> 赞同：1
> 
> 时间：2013-04-02T20:40:41.887
> 
> 标签：c#, xna-4.0

这个问题与 XNA 4.0 游戏有关，因此它自然会有一个简单的游戏执行循环：

```
Init()
Load()
Update()
Draw() 
```

等等

我希望使这个循环尽可能干净，我一直在脑海中计划它，我想在实际集成它之前写下我想要完成的事情。委托作为一种方法队列有多实用？

```
Init()
  initQueue(RequiredArgs)
Load()
  loadQueue(RequiredArgs) 
```

等等

我会根据需要将方法添加到队列中，可能会创建多个委托，因此我不必向我的委托添加 100 个参数并一起执行多个共享相似参数的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:02:36.663

代表集合（通常是队列）的一般概念没有错。这是消息循环的合理实现。

值得注意的是，如果消息可以从多个线程添加到队列中，则将其`BlockingCollection`用作队列的集合可能是有意义的，这样对集合的多线程访问就不会出现问题。

具体来说，集合的类型可以是`BlockingCollection<Action>`. 无需管理允许任何其他代表签名。任何输出都与您无关，也没有任何参数可以提供。如果有人希望调用具有参数的方法，他们可以使用函数来修复参数（可能使用 lambda，例如`() => someFunction(param1, param2);`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:55:49.817

据我了解，您有几个选择。

首先，制作一个`List<Action>`或其他包含您的代表的列表。这样您就可以通过代表找到自己的方式。

至于参数，您可以：

a) 让它接受一个`List`, `Array`, 或`params`作为输入（这些将是对象类型）。这允许每周定义的无限值输入。您的功能只需要知道哪个是哪个，并希望上帝您插入了正确的功能。我不会推荐这个，除非你不能这样做......

b）创建一个基本抽象类，用作`Base Settings`所有委托函数调用。然后为每个需要特定事物的委托创建专门的继承类。这可能更耗时，但从长远来看是值得的（为了维护和可读性）。

# asp.net - 拖放后检索中继器项目

> ID：15773935
> 
> 赞同：3
> 
> 时间：2013-04-02T20:40:42.377
> 
> 标签：asp.net, drag-and-drop, repeater

我有两个包含项目集合的转发器。在我的页面上，可以将项目从一个中继器拖到另一个中继器。如何访问转发器中现在的项目？在后面的代码中，转发器的值与第一次加载页面时的值相同。这甚至可能吗？

如果这有帮助，两个中继器都在下面的 div 中。

```
<div class="container" style="height:400px; overflow: auto; border: 1px solid #000000;" ondrop="drop(this, event)" ondragenter="return false" ondragover="return false">
    <asp:Repeater runat="server" ID="interfaceRepeater">
        <ItemTemplate>
                <div class="interfaceitem" style="width: 200px" id="<%# Eval("MAC") %>" draggable="true" ondragstart="drag(this, event)">
                <b>Interface <%# Eval("ID") %></b><br />
                Client ID: <%# Eval("MAC") %><br />
                Client Type: <%# Eval("ClientType") %>
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

# c++ - Makefile 无法编译文件

> ID：15773937
> 
> 赞同：1
> 
> 时间：2013-04-02T20:40:52.853
> 
> 标签：c++, netbeans, makefile

Netbeans 7.3 gcc 4.5.3

我已经查看了这个问题的一些答案，但我没有看到我的具体情况。

Netbeans 生成的makefile 似乎是正确的。Netbeans 终端窗口中给出的输出给出了一个`No rule to make target ReadList.cpp`，这似乎是错误的。我不知道发生了什么事。

输出窗口显示：

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/c/home/skidmarks/Projects/SLIP/slip'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin_4.x-Windows/slip.exe
make[2]: Entering directory `/c/home/skidmarks/Projects/SLIP/slip'
make[2]: *** No rule to make target `ReadList.cpp', needed by `build/Debug/Cygwin_4.x-Windows/ReadList.o'.  Stop.
make[2]: Leaving directory `/c/home/skidmarks/Projects/SLIP/slip'
nbproject/Makefile-Debug.mk:94: recipe for target `.build-conf' failed
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/c/home/skidmarks/Projects/SLIP/slip'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 375ms) 
```

使用的makefile显示：

```
${OBJECTDIR}/SlipReadList.o: SlipReadList.cpp 
    ${MKDIR} -p ${OBJECTDIR}
    ${RM} $@.d
    $(COMPILE.cc) -g -w -MMD -MP -MF $@.d -o ${OBJECTDIR}/SlipReadList.o SlipReadList.cpp 
```

makefile 看起来是正确的并且适用于其他文件。我已验证 .cpp 和 .h 文件位于同一目录中，并且与其他成功编译的文件位于同一目录中。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:52:53.400

```
make[2]: *** No rule to make target `ReadList.cpp', needed by `build/Debug/Cygwin 
```

现在看看你的make文件：

```
${OBJECTDIR}/SlipReadList.o: SlipReadList.cpp 
```

您最初有*readlist.cpp*，但生成文件需要*SlipReadList.cpp*。因此，编译器不知道如何处理*readlist.cpp*。一个简单的解决方法是将文件的命名更改为 SlipReadList.cpp

# asp.net - Kendo UI MVC 4：窗口内的表单验证不会触发

> ID：15773938
> 
> 赞同：2
> 
> 时间：2013-04-02T20:40:53.853
> 
> 标签：asp.net, asp.net-mvc, kendo-ui

使用 ASP.NET MVC 4，我声明了一个窗口，其中包含通过 LoadContentFrom() 加载的内部内容（表单）：

```
@(Html.Kendo().Window()
      .Name("windowAttachClient")
      .Title("Attach Client")
      .LoadContentFrom("MyAction", "ManageUser", new {a= Model.a})
      ) 
```

窗口显示正常，内容表单加载并工作，但客户端验证不起作用。注意我在 Web.Config 中设置了验证：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

如果我将内容从外部操作移动并在页面上将它们硬编码到窗口中，则验证工作。

有没有办法让一个窗口在由 LoadContentFrom() 加载的内容中有一个表单，与客户端验证一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:55:43.797

我猜这是因为内容被注入到页面中，您需要处理加载事件，然后告诉验证器在将新表单加载到 dom 后对其进行解析。另一个快速选择是将窗口切换到 iframe 模式。

```
 .Iframe(true) 
```

# javascript - Javascript 随机颜色生成器，但偏爱强烈的颜色

> ID：15773947
> 
> 赞同：0
> 
> 时间：2013-04-02T20:41:45.143
> 
> 标签：javascript, colors

我目前正在使用以下内容在javascript中生成随机十六进制颜色：

```
function getColor(){
     return '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
} 
```

每次生成这些颜色中的一种时，它们都会被推入一个数组：

```
var colors = new Array(); 
```

我希望 getColor 函数始终首先从“整体”​​颜色中选择。例如“红色”(#FF0000) 和“黄色”(#FFFF00)，并且只有在通过检查颜色数组确认所有这些“完整”颜色已经被采用后，它才应该继续提供更模糊/混合的颜色，例如如“GreenYellow”（#ADFF2F）等。

所以本质上，该函数最终应该用每种基于十六进制的颜色填充颜色数组，从最强的颜色（我描述为“整体”颜色）开始，然后转向较弱的“混合”颜色，最后以黑色结束因为它将被认为是最不可取的。

不幸的是，我真的不知道从哪里开始，除了按照我想要的确切顺序提供完整的颜色数组，然后遍历它们。

这似乎更像是用大锤敲碎坚果。任何其他更优雅的解决方案将不胜感激。

提前致谢。

**请注意：**我知道我在这里使用的术语并不正确，但希望人们能理解我所说的“整体”颜色是什么意思。我实在想不出更好的表达方式。

**编辑：**了解一些需要这个的原因可能会有所帮助。这些颜色将用于在视觉上识别开始于同一组的项目，因为用户将它们自己分组在一起。大多数时候只有几组，平均可能多达 20-30 组。因此，在使用可能看起来更相似的颜色之前，先使用清晰可见并相互区分的强烈颜色是有意义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:55:59.320

生成看起来不同的颜色更多的是关于人类的感知而不是数学。在 RGB 值中相隔相同距离的某些颜色对看起来比其他颜色对更相似。

即便如此，我认为您不想在 RGB 中解决这个问题。相反，请尝试在 HSL 或 HSV 中生成颜色：[http ://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

这允许控制色调、饱和度和亮度，这更接近人类对颜色的感知属性。然后，您可以通过改变其他属性不变的色调来生成颜色。

```
// assume hue is in degrees here
// think of hue like a circle with each angle a different color.
red     = hsv(0,   1, 1);
green   = hsv(120, 1, 1);
blue    = hsv(240, 1, 1); 
```

然后，您可以开始更紧密地细分色调空间。

```
yellow  = hsv(60,  1, 1);
cyan    = hsv(180, 1, 1);
magenta = hsv(300, 1, 1); 
```

一旦色调接近接近，降低饱和度或亮度，然后再做一次。

```
// run through all hues again but with half the value
darkRed = hsv(0, 1, 0.5);

// run through all hues again but with half the saturation
lightRed = hsv(0, 0.5, 1);

// run through all hues again but with half the value and half the saturation
desatRad = hsv(0, 0.5, 0.5); 
```

然后您甚至可以将饱和度/值空间细分为 0.25 和 0.75。我所描述的是一种递归算法的策略，它生成尽可能独特的颜色，首先返回最大胆/最亮的颜色。而且它*也不是随机*的，因为它不需要。

你所需要的只是一个 hsv/hsl 到 javascript 中的十六进制库，我敢肯定在某个地方有一个，还有一些数学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:00:03.430

如果您将色块减少到 256 种或更少颜色会更容易，前提是该颜色数量足够，因为人眼很难区分 #0000FF 和 #0000FE。

我不确定我是否理解您在该数组上需要不重复的颜色，如果是这样，您将需要检查以前的值以获得唯一的颜色。

# devise - 设计 Omniauth 控制器呈现 404

> ID：15773949
> 
> 赞同：3
> 
> 时间：2013-04-02T20:41:49.340
> 
> 标签：devise, omniauth

# 第一种情况

## 控制器

```
class Api::V1::AuthsController < Devise::OmniauthCallbacksController
  def twitter; end

  private

  def callback
    user = User.find_or_authenticate_by_oauth(request.env["omniauth.auth"], session['beta_signup_token'])

    if session['beta_signup_token'] 
      render json: {redirect: :complete_profile}
    else
      render json: {redirect: :stories}
    end
  end
end 
```

## 路线

```
 namespace :api do
    namespace :v1 do
      devise_scope :user do
        match 'auth/:provider' => 'auths#passthru', constraints: { format: :json }
        match 'auth/:provider/callback', to: 'auths#callback', constraints: { format: :json }
      end
    end
  end 
```

## 回复

```
Started GET "/api/v1/auth/twitter.json" for 127.0.0.1 at 2013-04-02 14:43:32 -0500
Processing by Api::V1::AuthsController#passthru as JSON
  Parameters: {"provider"=>"twitter"}
  Rendered text template (0.0ms)
Completed 404 Not Found in 4ms (Views: 0.5ms | ActiveRecord: 0.0ms) 
```

# 第二种情况

## 控制器

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  before_filter :handle_authentication

  def facebook
  end

  def twitter
  end

  def linkedin
  end

  private

  def handle_authentication
    user = User.find_or_authenticate_by_oauth(request.env["omniauth.auth"],  session['beta_signup_token'])

    if session['beta_signup_token'] 
      redirect_to setup_profile_beta_invite_url(session['beta_signup_token'])
    else
      sign_in_and_redirect
    end
  end
end 
```

## 路线

```
devise_for :users, constraints: { format: :html },
  :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

## 回复

```
(twitter) Callback phase initiated.

Started GET "/users/auth/twitter" for 127.0.0.1 at 2013-04-02 15:40:04 -0500 
```

# 我的问题

如何使第一个响应与第二个响应相同？我想在第一个中，没有调用 Twitter 策略，为什么？

我认为我的另一个[问题](https://stackoverflow.com/q/15756523/1197775)是相关的

# c++ - 继承类上的运算符重载

> ID：15773952
> 
> 赞同：1
> 
> 时间：2013-04-02T20:42:03.217
> 
> 标签：c++, inheritance, stream, operator-overloading

这里有2个班

```
class B
{
private:
    int x;
public:
    friend std::istream& operator>>(std::istream& in, B& obj)
    {
        in >> obj.x;
        return in;
    }
};

class D: public B
{
private:
    int y;
public:
    friend std::istream& operator>>(std::istream& in, D& obj)
    {
        //?
    }
}; 
```

有什么方法可以重载`>>`D 类中的运算符，以便它能够访问 B 中的元素 x？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:45:12.773

> 有什么方法可以覆盖 D 类中的 >> 运算符，以便他能够访问 B 中的元素 x？

不要`x`私信。

通过将其设为私有，您明确表示对它的访问仅限`class B`于其朋友。从您的问题来看，您似乎不希望那样。

如果是`protected`，您可以将其作为`obj.x`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:49:31.923

根据您似乎正在尝试做的事情，您也可以这样做：

```
class B
{
private:
    int x;
public:
    friend std::istream& operator>>(std::istream& in, B& obj)
    {
        in >> obj.x;
        return in;
    }
};

class D: public B
{
private:
    int y;
public:
    friend std::istream& operator>>(std::istream& in, D& obj)
    {
        B* cast = static_cast<B*>(&D); //create pointer to base class
        in >> *B; //this calls the operator>> function of the base class
    }
}; 
```

尽管无论如何可能还有其他原因需要`x`保护而不是私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:04:07.030

x 需要保护。否则不能直接从 D 访问。

```
class B
{
protected:
    int x; 
```

然后你可以做

```
class D: public B
{
private:
    int y;
public:
    friend std::istream& operator>>(std::istream& in, D& obj)
    {
        in >> obj.x;
        return in;
    }
}; 
```

# javascript - 通过JQuery提交表单时如何获得点击提交按钮

> ID：15773957
> 
> 赞同：6
> 
> 时间：2013-04-02T20:42:20.967
> 
> 标签：javascript, jquery, html, forms, form-submit

我有一个带有 2 个提交按钮的表单。

```
<form class="myForm">
     <!-- Some Inputs Here -->
     <input type="submit" name="firstSubmit" value="first submit" />
     <input type="submit" name="secondSubmit" value="second submit" />
</form> 
```

我通过 JQuery 提交此表单。

```
$(".myForm").submit(function(){
      var submitButton = ? //I need to catch the submit button that was clicked
}); 
```

我怎么知道点击了哪个提交按钮？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T20:43:53.083

```
$('input[type="submit"]').on('click', function(){
      $('.myForm').data('button', this.name);
});

$(".myForm").on('submit', function(){
  var submitButton = $(this).data('button') || $('input[type="submit"]').get(0).name;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-04-08T21:25:38.003

现在`submitter`提交事件中有一个标准属性。
已经在 Firefox 中实现了！

```
document.addEventListener('submit',function(e){
    console.log(e.submitter)
}) 
```

在 jQuery 中，您只需编写

```
$(".myForm").on('submit', function(e){
  e.originalEvent.submitter
}); 
```

对于不支持它的浏览器，请使用此 polyfill：

```
!function(){
    var lastBtn = null
    document.addEventListener('click',function(e){
        if (!e.target.closest) return;
        lastBtn = e.target.closest('button, input[type=submit]');
    }, true);
    document.addEventListener('submit',function(e){
        if (e.submitter) return;
        var canditates = [document.activeElement, lastBtn];
        for (var i=0; i < canditates.length; i++) {
            var candidate = canditates[i];
            if (!candidate) continue;
            if (!candidate.form) continue;
            if (!candidate.matches('button, input[type=button], input[type=image]')) continue;
            e.submitter = candidate;
            return;
        }
        e.submitter = e.target.querySelector('button, input[type=button], input[type=image]')
    }, true);
}(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-25T08:42:09.800

试试这个：

```
$(".myForm").submit(function(){
      var submitButton = $(":focus", this);
}); 
```

# python - 将循环附加到不同的列表中

> ID：15773963
> 
> 赞同：0
> 
> 时间：2013-04-02T20:42:40.663
> 
> 标签：python, list, loops

假设我有这些值的列表：

```
['1', '91', '70', '2', '84', '69', '3', '86', '68', '4', '84', '68', '5', '83', '70', '6', '80', '68', '7', '86', '73', '8', '89', '71', '9', '84', '67', '10', '83', '65', '11', '80', '66', '12', '86', '63', '13', '90', '69', '14', '91', '72', '15', '91', '72', '16', '88', '72', '17', '97', '76', '18', '89', '70', '19', '74', '66', '20', '71', '64', '21', '74', '61', '22', '84', '61', '23', '86', '66', '24', '91', '68', '25', '83', '65', '26', '84', '66', '27', '79', '64', '28', '72', '63', '29', '73', '64', '30', '81', '63', '31', '73', '63'] 
```

我如何将每个第一个元素超过三个并将其附加到另一个列表中？例如，1，然后 2，然后 3...`[1,2,3....31]`

然后分别是第二个`[91, 84, 86,......73]`

第三个也是一样`[70, 69, 68......63]`

任何帮助都会很棒？

我现在正在使用循环并尝试将值附加到不同的列表中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T20:44:39.987

使用步长值对列表进行切片：

```
values = ['1', '91', '70', '2', '84', '69', '3', '86', '68', '4', '84', '68', 
          '5', '83', '70', '6', '80', '68', '7', '86', '73', '8', '89', '71', 
          '9', '84', '67', '10', '83', '65', '11', '80', '66', '12', '86',
          '63', '13', '90', '69', '14', '91', '72', '15', '91', '72', '16',
          '88', '72', '17', '97', '76', '18', '89', '70', '19', '74', '66',
          '20', '71', '64', '21', '74', '61', '22', '84', '61', '23', '86',
          '66', '24', '91', '68', '25', '83', '65', '26', '84', '66', '27',
          '79', '64', '28', '72', '63', '29', '73', '64', '30', '81', '63',
          '31', '73', '63']

values0 = values[0::3]
values1 = values[1::3]
values2 = values[2::3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:48:22.177

您可以使用逐步切片：

```
every_third = values[0::3]
every_third_plus_one = values[1::3]
every_third_plus_two = values[2::3] 
```

...或更一般地说，在一次通话中：

```
def separate_list(a, stepsize):
    '''Separate list a into a number of lists by stepping through 
    at the given stepsize.'''
    return [a[s::stepsize] for s in xrange(stepsize)]
print separate_list(values, 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:09:32.043

另外的选择：

```
a, b, c = zip(*zip(*[iter(values)]*3)) 
```

# c - 如何快速重绘图像缓冲区

> ID：15773965
> 
> 赞同：2
> 
> 时间：2013-04-02T20:42:48.200
> 
> 标签：c, gtk, cairo, xorg

我正在开发某种音频应用程序，我需要在其中显示一些图表。想一想：高帧率的实时类似 Oscillope 的图像。

我只需要以高帧率显示一些图形缓冲区。最好> 60fps而不需要太多时间。我现在实现它的方式太慢了。我只能以 800x800 像素的分辨率获得 10fps。绘图不是问题，Xorg 一直在占用。

我现在使用的方法是创建一个`cairo_image_surface`然后在`cairo_images_surface`需要更改的像素处操作数据（这非常快）

因为我正在编程类似示波器的东西，所以我不需要一直重绘所有像素。所以画东西不是很慢。

我认为缓慢的部分是我需要打电话`cairo_set_source_surface()`来实际显示一些东西。

代码中最重要部分的摘要。`on_plot_event`每次有新的音频样本准备好显示时调用。

```
static gboolean on_plot_event(GtkWidget *widget,cairo_t *cr,gpointer user_data){
    cairo_set_source_surface(cr,crsurfplot,0,0);
    cairo_paint(cr);
    return FALSE;
}

int doplot(jack_default_audio_sample_t *in,jack_nframes_t nframes){
    cairo_surface_flush(crsurfplot);
    char *p;
    unsigned char *pixstart;
    pixstart = plotdata;
 //drawing stuff, manipulate pixels at pixstart
    cairo_surface_mark_dirty(crsurfplot);
    if(drawcount%10 ==0){
    gdk_threads_enter();
    gtk_widget_queue_draw(window);
    gdk_threads_leave();
    }
}

int main(int argc,char *argv[]){
    gdk_threads_init();
    gtk_init (&argc, &argv);
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    window2 = gtk_window_new (GTK_WINDOW_TOPLEVEL);

    plotstride = cairo_format_stride_for_width (CAIRO_FORMAT_RGB24,plotwidth);
    plotdata = malloc (16000000);
    crsurfplot = cairo_image_surface_create_for_data    (plotdata,CAIRO_FORMAT_RGB24,plotwidth,plotheight,plotstride);
    plotdata = cairo_image_surface_get_data(crsurfplot);    

    plot = gtk_drawing_area_new();  
    gtk_container_add(GTK_CONTAINER(window),plot);

    g_signal_connect(G_OBJECT(plot),"draw",G_CALLBACK(on_plot_event),NULL);
    g_signal_connect(G_OBJECT(plot),"configure-event",G_CALLBACK(on_confev),NULL);

    gtk_widget_show_all (window);
    gtk_widget_show (window2);
    printf("test\n");

    crplot=gdk_cairo_create(gtk_widget_get_window(plot));
    cairo_set_source_surface(crplot,crsurfplot,0,0);

    gtk_main ();

    jack_client_close(client);
    return 0;

} 
```

用开罗不可能创造出我想要的东西吗？我应该改用openGL还是类似的东西？还是我只是做错了什么？

编辑：到目前为止添加了指向我丑陋程序的链接。 [http://ubuntuone.com/4dphKneXOgQPTR8fZydKpo](http://ubuntuone.com/4dphKneXOgQPTR8fZydKpo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:52:23.803

> 我现在使用的方法是创建一个 cairo_image_surface，然后在需要更改的像素处操作 cairo_images_surface 中的数据（这非常快）
> 
> 因为我正在编程类似示波器的东西，所以我不需要一直重绘所有像素。所以画东西不是很慢。

在我遇到的 99.9% 的图形应用程序（更大的显示器和帧速率）中，我不同意在背景中用所有复杂的精灵、条形等重绘图片，而不是一次全部翻转。即使这听起来违反直觉，我建议，你应该试试这个

* * *

开罗应该能够处理你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:20:07.890

使用 cairo_surface_create_similar_image() 而不是创建新的图像表面可能会更快。这允许 cairo 使用共享内存，这将大大加快图像的上传速度。

（当然，当你不调用 cairo_set_source_surface() 时它会更快：在这种情况下，cairo 不必上传图像表面，但可以告诉 X11 服务器“用黑色填充所有内容”）

另外，为什么会出现以下情况？只需使用 cairo_image_surface_create() 而不是调用 malloc() 和 ...create_for_data()。

```
plotdata = malloc (16000000);
crsurfplot = cairo_image_surface_create_for_data    (plotdata,CAIRO_FORMAT_RGB24,plotwidth,plotheight,plotstride);
plotdata = cairo_image_surface_get_data(crsurfplot); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:29:48.767

关闭`GtkWidget`绘图区域的双缓冲系统可能会有所帮助。

```
gtk_widget_set_double_buffered (GTK_WIDGET (plot), FALSE); 
```

这将阻止 Gtk 在将图像绘制到窗口之前引入中间步骤。

[gtk_widget_set_double_buffered 文档](http://people.gnome.org/~shaunm/girdoc/C/Gtk.Widget.set_double_buffered.html)

# ember.js - Ember.js 的入门片段为每个导航重复模板

> ID：15773966
> 
> 赞同：3
> 
> 时间：2013-04-02T20:42:48.813
> 
> 标签：ember.js

我最近一直在学习 Ember，我一直在玩他们网站指南部分中的示例，但我遇到了以下片段的问题：

1) Javascript

```
App = Ember.Application.create();

App.Person = Ember.Object.extend({
  firstName: null,
  lastName: null,

  fullName: function() {
    return this.get('firstName') +
           " " + this.get('lastName');
  }.property('firstName', 'lastName')
});

App.ApplicationRoute = Ember.Route.extend({
  model: function() {
    var people = [
      App.Person.create({
        firstName: "Tom",
        lastName: "Dale"
      }),
      App.Person.create({
        firstName: "Yehuda",
        lastName: "Katz"
      })
    ];
    return people;
  }
}); 
```

2）HTML

```
<script type="text/x-handlebars">
  <h1>People</h1>

  <ul>
  {{#each model}}
    <li>Hello, <b>{{fullName}}</b>!</li>
  {{/each}}
  </ul>
</script> 
```

当我导航到该网站时，它会按预期正确显示页面和名称。然后我导航到 localhost:80/#，它会复制模板，以便所有内容都显示两次。当我使用浏览器的箭头控件来回导航时，每次都会在页面底部附加/复制模板。

老实说，我不明白为什么会这样。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:14:07.340

当您到达带有动态段的路线时，模型挂钩就会启动，如下所示的更像是 ember-esk

```
App = Ember.Application.create();

App.Person = Ember.Object.extend({
  firstName: null,
  lastName: null,

  fullName: function() {
    return this.get('firstName') +
           " " + this.get('lastName');
  }.property('firstName', 'lastName')
}).reopenClass({
  people: [],
  find: function() {
    this.people.clear(); //so find doesn't create duplicates each time
    var first = App.Person.create({ firstName: "Tom", lastName: "Dale" });
    var last = App.Person.create({ firstName: "Yehuda", lastName: "Katz" });
    this.people.pushObject(first);
    this.people.pushObject(last);
    return this.people;
  }
});

App.ApplicationRoute = Ember.Route.extend({
  model: function() {
    return App.Person.find();
  }
}); 
```

此外，您通常不会使用基本应用程序模板/视图/控制器/路由中的“模型”，因此创建一个简单的模型并让该路由执行 find() 可能更有意义（以避免重复问题你遇到了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:28:20.280

在 Ember.js[**讨论论坛**](http://discuss.emberjs.com/t/getting-started-snippet-question/851/2)上发布了另一个建议。归功于用户 teddyzeenny。

> 在应用程序路由中返回模型会导致重新渲染。最好使用 IndexRoute 而不是 ApplicationRoute。

1) Javascript

```
App = Ember.Application.create();

App.Person = Ember.Object.extend({
  firstName: null,
  lastName: null,

  fullName: function() {
    return this.get('firstName') +
           " " + this.get('lastName');
  }.property('firstName', 'lastName')
});

App.IndexRoute = Ember.Route.extend({
  model: function() {
    var people = [
      App.Person.create({
        firstName: "Tom",
        lastName: "Dale"
      }),
      App.Person.create({
        firstName: "Yehuda",
        lastName: "Katz"
      })
    ];
    return people;
  }
}); 
```

2）HTML

```
<script type="text/x-handlebars">
  {{outlet}}
</script>

<script type="text/x-handlebars" id="index">
  <h1>People</h1>

  <ul>
  {{#each model}}
    <li>Hello, <b>{{fullName}}</b>!</li>
  {{/each}}
  </ul>
</script> 
```

在他提出的拉取请求中进行了更多讨论：

> 在 ApplicationRoute 中返回模型可能会导致应用程序模板在某些情况下重新渲染（[如此处所述](http://discuss.emberjs.com/t/getting-started-snippet-question/851/2)）。
> 
> 应用程序模板永远不应该重新渲染，因为它附加到正文中，因此在重新渲染时会导致重复的模板。
> 
> 这个 PR 还添加了一个 {{outlet}}，由于有些人使用这个示例作为起点，准备好一个 outlet 将使他们更容易在示例的基础上进行构建。

# go - 为什么在 Go 的 if 语句中创建结构是非法的？

> ID：15773969
> 
> 赞同：10
> 
> 时间：2013-04-02T20:42:53.237
> 
> 标签：go

Go 抱怨在 if 语句中实例化结构。为什么？是否有不涉及临时变量或新函数的正确语法？

```
type Auth struct {
    Username    string
    Password    string
}

func main() {
    auth := Auth { Username : "abc", Password : "123" }

    if auth == Auth {Username: "abc", Password: "123"} {
        fmt.Println(auth)
    }
} 
```

错误（在 if 语句行）：语法错误：意外 :，期待 := 或 = 或逗号

这会产生相同的错误：

```
if auth2 := Auth {Username: "abc", Password: "123"}; auth == auth2 {
            fmt.Println(auth)
} 
```

这按预期工作：

```
auth2 := Auth {Username: "abc", Password: "123"};
if  auth == auth2 {
        fmt.Println(auth)
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T20:49:30.847

您必须用括号括住 == 的右侧。否则 go 会认为 '{' 是 'if' 块的开始。以下代码工作正常：

```
package main

import "fmt"

type Auth struct {
    Username    string
    Password    string
}

func main() {
    auth := Auth { Username : "abc", Password : "123" }
    if auth == (Auth {Username: "abc", Password: "123"}) {
        fmt.Println(auth)
    }
}

// Output: {abc 123} 
```

# c++ - 有条件地跳过 dll 依赖项

> ID：15773971
> 
> 赞同：0
> 
> 时间：2013-04-02T20:43:17.483
> 
> 标签：c++, c, visual-studio-2012, bluetooth, windows-server-2012

我正在编写一个 Win8 桌面应用程序来使用 Visual Studio 2012 监控蓝牙状态（以及其他功能）。我在项目属性中指定了 Bthprops.lib -> 附加依赖项。我用蓝牙代码构建了一个 DLL，并从 C# 项目中调用它。

在 Win8 上一切正常。但是，当我的应用程序在 Windows Server 2012 上运行时，在启动时我无法加载 DLL，因为 win server 2012 不支持蓝牙并且没有依赖的 bthprops.cpl。

由于我希望我的应用程序可以在多个平台上运行（并且不希望用户安装其他组件），因此在平台没有所需的依赖文件的情况下，我希望应用程序能够启动，跳过执行蓝牙代码，并执行其余功能。

这可能吗？我将如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:47:12.427

我担心您必须使用[LoadLibrary()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)动态加载 dll 。这样，您就不必依赖启动了。此外，您可以检查加载是否成功。如果没有，则未安装该组件。这使得误用延迟加载机制成为可取的做法。

在这种情况下，您不使用库文件。相反，您只需使用头文件或使用[GetProcAddress()找到适当的 dll 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)

# python - 美丽的汤无法解析这个 HTML

> ID：15773977
> 
> 赞同：1
> 
> 时间：2013-04-02T20:43:43.470
> 
> 标签：python, html, beautifulsoup, html-parsing

我们使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)成功地解析了许多网站，但有一些给我们带来了问题。一个例子是这个页面：

[http://www.designsponge.com/2013/04/biz-ladies-how-to-use-networking-to-improve-your-search-engine-rankings.html](http://www.designsponge.com/2013/04/biz-ladies-how-to-use-networking-to-improve-your-search-engine-rankings.html)

我们正在为美丽的汤提供确切的来源，但它返回一个发育不良的 HTML 字符串，虽然没有错误......

**代码：**

```
soup = BeautifulSoup(site_html)
print str(soup.html) 
```

**结果：**

```
<html class="no-js" lang="en"> <!--&lt;![endif]--> </html> 
```

我正在尝试确定是什么绊倒了它，但是在查看 html 源代码时没有任何反应。有没有人有一些见识？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:50:41.030

尝试不同的解析器，页面可以用`html5lib`解析器解析：

```
>>> soup = BeautifulSoup(r.content, 'html5')
>>> len(soup.find_all('li'))
97 
```

并非所有解析器都可以同等对待损坏的 HTML。

# php - 代码点火器致命错误 ActiveRecord

> ID：15773981
> 
> 赞同：0
> 
> 时间：2013-04-02T20:44:03.703
> 
> 标签：php, mysql, codeigniter, activerecord

我有以下代码已经完美运行了几个月，但突然之间它停止了工作。我检查了正在运行的查询，它工作正常并获得了预期的结果。

这是代码：

```
$this->db->where('user', $user);
$this->db->select_max('id', 'max_id');
$query1 = $this->db->get('offers');

$result = $query1->row(); 
```

这是错误：

```
Fatal error: Call to a member function row() on a non-object 
```

# sql-server - IN @variable 不允许选择多个类别

> ID：15773983
> 
> 赞同：0
> 
> 时间：2013-04-02T20:44:10.443
> 
> 标签：sql-server, reporting-services

我目前在 MS 报表生成器中生成的以下查询不允许我选择部门内的所有类别。当我选择一个特定的类别时，它似乎有效，但不适用于所有类别。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:07:37.943

为此，您必须使用动态 SQl。或者将值发送到报告使用的表格中。或者使用存储过程作为源并使用拆分函数将值放入临时表中。你试图以你试图做的方式去做的事情是根本不可能的。

而且，如果您正在编写报告查询，则需要停止使用相关子查询，因为它们逐行运行，并且在报告中往往包含大量数据时速度非常慢。

# javascript - JS 库创建类似谷歌消费者晴雨表的数据地图？

> ID：15773985
> 
> 赞同：0
> 
> 时间：2013-04-02T20:44:21.980
> 
> 标签：javascript, data-visualization

有哪些 javascript 库或小部件可以生成类似于 Google Consumer Barameter 中使用的数据地图：http: [//www.consumerbarometer.com/#? app=explore](http://www.consumerbarometer.com/#?app=explore)

我对将层次结构显示为嵌套环上的一系列链接节点的数据映射特别感兴趣——（这种类型的映射叫什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:14:49.833

D3 是一个 JavaScript 库，可让您绘制数据驱动的图形：[http ://d3js.org/](http://d3js.org/)

但还有很多东西等着你去发现：

*   [http://selection.datavisualization.ch/](http://selection.datavisualization.ch/)
*   [http://www.elisa-dbi.co.uk/blog/38-tools-for-beautiful-data-visualisations/](http://www.elisa-dbi.co.uk/blog/38-tools-for-beautiful-data-visualisations/)

选择你最喜欢的并开始编码

## 更新

我不确定图形的类型是如何被调用的，但您正在寻找的术语可能是其中之一：

*   Reingold–Tilford 树：[http ://bl.ocks.org/mbostock/4063550](http://bl.ocks.org/mbostock/4063550)
*   环形集群： http: [//mbostock.github.com/d3/talk/20111018/cluster.html](http://mbostock.github.com/d3/talk/20111018/cluster.html)

# php - 如何将三个 div 的倍数放入列表项中？

> ID：15773987
> 
> 赞同：0
> 
> 时间：2013-04-02T20:44:32.883
> 
> 标签：php

我有在无尽的 div 中输出的内容。我想在一个列表项中包含三个的复数，如下所示：

```
<li>
   <div>content</div>
   <div>content</div>
   <div>content</div>
</li>
<li>
   <div>content</div>
   <div>content</div>
   <div>content</div>
</li> 
```

我正在尝试使用以下代码来实现这一点，但由于某种原因它不起作用 - 它只是将每个 div 包围在自己的 li 中：

```
$i = 1;
if($setting) {
    echo '<li>';
    echo '<div>My div</div>';
    if ($i % 3 == 0) { 
        echo '</li><li>'; 
        }
    $i++;
    }
    echo '</li>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:10:26.010

没有你的循环，很难说你做错了什么。

但这里有一个解决方案。

```
$numOfDivs = 12;

for ($thisDiv=0; $thisDiv < $numOfDivs; $thisDiv++) {
    if ($thisDiv==0) echo '<li>';
    else if ($thisDiv%3==0) echo '</li><li>';
    echo '<div>My Div</div>';
    if ($thisDiv == $numOfDivs-1) echo '</li>';
} 
```

请记住，这会产生所需的输出，但所需的输出是无效的 HTML。

# openoffice-calc - 在 OpenOffice Calc 中查找数据列的均值和标准差

> ID：15773991
> 
> 赞同：2
> 
> 时间：2013-04-02T20:44:57.057
> 
> 标签：openoffice-calc, mean, standard-deviation

我在 Calc 电子表格中有几个数据列，每个列有 400 到 500 个条目。对于这些列中的每一个，我只想能够找到平均值和标准差，但不知道如何进行。

有人可以指导我一步一步地用简单而不是技术语言来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:55:39.247

**在 Openoffice 中计算标准差：**

1.  将输入数字放在 A1 到 A10 列的单独单元格中。

2.  将文本：`=stdev`放在一个单元格中。OpenOffice 应该会弹出一些东西来询问您的参数是什么。双击弹出窗口中的 STDEV 并按照说明进行操作，或者当它提示您选择输入时，使用鼠标选择 A1 到 A10 列

3.  当您按下回车键时，您将计算出标准偏差。使用 OpenOffice 函数执行相同的操作来获取平均值：`average`.

实时调频：

[http://wiki.openoffice.org/wiki/Documentation/How_Tos/Calc:_AVERAGE_function](http://wiki.openoffice.org/wiki/Documentation/How_Tos/Calc:_AVERAGE_function)

[http://wiki.openoffice.org/wiki/Documentation/How_Tos/Calc:_STDEV_function](http://wiki.openoffice.org/wiki/Documentation/How_Tos/Calc:_STDEV_function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T05:52:46.523

正在寻找类似问题的解决方案，通过网站和我自己的修补找到了一个；所以回来分享我学到的东西。

如果您的列有标题，在我的情况下`Price/Gal`，您可以将其用作列的名称，这样您就可以找到整列的平均值，而无需定义范围。

所以在我的具体情况下：

```
=ROUND(AVERAGE('Price/Gal');3) 
```

..有效地将标题为“价格/加仑”的整个列的平均值四舍五入到小数点后第三位。

在您使用`/` *（公式函数）*之类的符号的情况下，您必须记住使用撇号，就好像它的标题是`pricegal`Calc 会在您键入时修复公式，但是当`Price/Gal`Calc 混淆时。这就是我的方式想通了..我给它命名`pricegal`，然后重命名它`Price/Gal`，Calc也修复了公式..使用撇号，向我暗示我做错了什么。

或者，假设当您选择一整行时，在左上角的下拉菜单中`A1:A1048576`，您可以重命名该列。 .虽然如果你没有标题，我猜这就是这样做的方式。（那个来自其他地方，但对以后看的人可能有用）