# StackOverflow 问答 12742000-12742999

# android - Android - 访问 Http 客户端时出现 android.os.NetworkOnMainThreadException

> ID：12742001
> 
> 赞同：0
> 
> 时间：2012-10-05T07:59:33.237
> 
> 标签：android, web-services, http, thread-exceptions

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

当我运行我的android应用程序时，我得到了android.os.NetworkOnMainThreadException，这是什么原因。我该如何修复它。这是我的代码

```
public class Login extends Activity {

private Button btnLogin;
private EditText txtusername;
private EditText txtPassword;
public String username;
public String password;
public boolean doLogin = false;
Intent intent;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.login);

    btnLogin = (Button) findViewById(R.id.btnLogin);
    txtusername = (EditText) findViewById(R.id.txtuserName);
    txtPassword = (EditText) findViewById(R.id.txtPassword);
    btnLogin.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            username = txtusername.getText().toString();
            password = txtPassword.getText().toString();

            if (username.equals("") || password.equals("")) {

                AlertDialog alert = new AlertDialog.Builder(Login.this)
                        .create();
                alert.setMessage("Username or Password can not be Empty");
                alert.setButton("OK",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                            }
                        });

                alert.setIcon(R.drawable.loginlogo);
                alert.show();

            }

            else {

                HttpAsync httpasync = new HttpAsync();

                httpasync.execute(new String[] { "http://www.diskonbanget.com/bni/login/login.php" });

            }

        }

    });

}

private class HttpAsync extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        String str = null;
        try {

            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://www.diskonbanget.com/bni/login/login.php");
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    2);
            nameValuePairs
                    .add(new BasicNameValuePair("username", username));
            nameValuePairs
                    .add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request

            HttpResponse response = httpclient.execute(httppost);

            str = inputStreamToString(response.getEntity().getContent())
                    .toString();

        } catch (Exception e) {
            return str;
        }
        return str;
    }

    @Override
    protected void onPostExecute(String result) {
        String str = result;

        if (str.toString().equalsIgnoreCase("false")) {

            AlertDialog alert = new AlertDialog.Builder(Login.this)
                    .create();
            alert.setMessage("Please enter valid username & Password");
            alert.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                }
            });

            alert.setIcon(R.drawable.loginlogo);
            alert.show();

        }

        else if (str.toString().equalsIgnoreCase("null")) {
            AlertDialog alert = new AlertDialog.Builder(Login.this)
                    .create();
            alert.setMessage("Can not Connect to the server.please make sure your internet is Switch on  ");
            alert.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                }
            });
            alert.setIcon(R.drawable.loginlogo);
            alert.show();
        }

        else {

            intent = new Intent(Login.this, MainMenu.class);
            intent.putExtra("photo", str);
            intent.putExtra("username", str);   
            getApplicationContext().startActivity(intent);

        }

    }

}

private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }
        return total;

    } catch (Exception e) {

        return null;
    }

} 
```

请有人帮助我。android version3.2，尝试使用 XOOM2 模拟器运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:01:35.553

原因是您的登录方法在 ui 线程中建立了 http 连接，您应该在单独的线程中执行此操作或使用[AsynchTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

您可以将上下文传递给任务，然后：

```
protected void onPostExecute(Void result) {
   Intent showContent = new Intent(context, yourActivity.class);
   context.startActivity(showContent);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:12:45.030

我不建议这样做，但您可以使用它进行测试。请参阅@imran khan 了解良好做法。
将此添加到您的 onCreate() 方法中以绕过检查。

```
if( Build.VERSION.SDK_INT >= 9){
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 
} 
```

# mysql - 从第一条记录返回记录，得到需要返回的记录数

> ID：12742005
> 
> 赞同：0
> 
> 时间：2012-10-05T07:59:42.767
> 
> 标签：mysql

好吧，我真的不知道如何在标题中解释这一点，但这就是我想要的。

首先，我确实有 5 条记录

```
id | name  |
------------
1  | ringo |
------------
2  | nashi |
------------
3  | momo  |
------------
4  | manga |
------------
5  | tokyo | 
```

现在我在开始查询的行上生成一个随机数。例如，我得到一个随机数 4，所以我将得到第 4 行和第 5 行。但我的问题是每个查询都需要 4 条记录。所以这意味着我将回到第一条记录并获取前两行。

**如果我的查询结果缺少我想要的记录数，是否有任何可能的方法可以返回第一行？**

这是[MySQL 中的 Select from nth record 等](https://stackoverflow.com/questions/12740714/select-from-nth-record-and-so-on-in-mysql)相关问题，它显示了我到目前为止所做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:56:40.983

如果您首先按大于 pivot 的记录对表进行排序`id`，然后按对表进行排序，则`id`您只需要`LIMIT`前四个记录的结果集：

```
SELECT * FROM my_table ORDER BY id >= 4 DESC, id LIMIT 4 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/12ed5/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:13:52.410

这就是我要做的。

```
SELECT * FROM `your_table`
WHERE `id` >= 3 /* 3 is some random number */
UNION
SELECT * FROM `your_table`
WHERE `id` < 5
LIMIT 4 
```

**编辑：** eggyal 在他的评论中提出的问题值得考虑。我对这个选项的建议如下。

```
SELECT * FROM `your_table`
WHERE `id` >= 3 /* 3 is some random number */
UNION
SELECT * FROM (
    SELECT * FROM `your_table` LIMIT 4
) a
LIMIT 4 
```

# git - git - 无法解决代理“0”错误

> ID：12742008
> 
> 赞同：1
> 
> 时间：2012-10-05T07:59:52.020
> 
> 标签：git, proxy

当我尝试将代码更改推送到 git 时收到此错误 -

```
error: Couldn't resolve proxy '0' while accessing https://github.com/pavanred/Radar-chart-utility-.git/info/refs
fatal: HTTP request failed 
```

几天前我可以推送到 git，我不知道为什么它突然停止工作？

我已经搜索了互联网，但我找不到任何答案。我在我的家庭网络中工作并且我没有代理服务器，我可以从互联网上获得的所有帮助都建议我提供我的代理信息，但我没有。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-02T20:48:53.470

首先，确保取消设置任何代理：

```
cd /path/to/repo

git config --unset http.proxy
git config --unset https.proxy

git config --global --unset http.proxy
git config --global --unset https.proxy 
```

其次，在 Windows（7 或 10）上，要在 CMD 中进行测试，请键入：

```
set HTTP_PROXY=
set HTTPS_PROXY= 
```

然后再试一次。

# reporting - BIRT：添加多个类别 (X) 系列

> ID：12742010
> 
> 赞同：0
> 
> 时间：2012-10-05T08:00:00.453
> 
> 标签：reporting, business-intelligence, birt

我有一个包含 4 列的数据集，每列显示一个季度的拒绝次数。第 5 列显示了这些值所属的团队。

是否可以在 x 轴上添加 4 个固定点，每个固定点属于这些列之一？然后我可以将团队添加为 Y 系列。我想及时看到每个团队的演变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:03:00.863

我通过编写一个（非常短，非常简单）循环来解决这个问题，该循环从提到的四个列中取出值，一次一个，然后创建四行。

因此，这些行基本上包含原始行中的团队（重复 4 次）和拒绝次数。所以现在我有四行，而不是一个团队和四个号码的行，每行一个团队和一个号码。

我在报告脚本中完成了这一切（在“获取”下）。试试看，真的很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:20:47.663

看看这个例子： http: [//www.birt-exchange.org/org/devshare/designing-birt-reports/1553-use-column-names-as-chart-xaxis/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1553-use-column-names-as-chart-xaxis/)

# c# - 如何保护您的资源，例如用户上传的照片

> ID：12742020
> 
> 赞同：1
> 
> 时间：2012-10-05T08:00:48.273
> 
> 标签：c#, asp.net, .net, c#-4.0, asp.net-4.0

我有一些用户上传的 PDF，它们保存在硬盘上。这些 PDF 实际上应该只有上传的用户才能看到。但目前它并不安全。如果有人猜到 PDF 的名称，其他人也可以查看它。

例如：`http://www.something.com/PDFs/abcghjiekm.PDF`

这是一个安全威胁。我想做的是有某种逻辑来处理对这些 PDF 的请求，并将其与我的数据库进行比较，以查看该 PDF 是否实际上属于请求它的用户。我怎样才能做到这一点？

**编辑：**我无法使用 FileStream，因为我的网站已经启动并正在运行。我不想更改所有代码库并进入每个 aspx 页面来寻找访问 PDF 的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:09:17.953

您可以通过 IIS 中的特殊 HttpHandler 而不是 StaticFile-Handler 来处理 PDF 并检查访问权限。

如果您使用的是 MVC，那么 /PFDs/{file}.pdf 之类的路由和控制器返回 Content 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:16:37.803

您还可以使用某种隐匿性安全性，这种安全性较低，但更易于实施。例如，您可以将 PDF 保存在诸如 PDFs//abcghjiekm.PDF 之类的文件夹中，其中 guid 是上传用户的用户 ID。这种方式猜测给定文件的正确路径要困难得多。

如果您确实需要保护私人用户数据免受未经授权的访问，我不会推荐这种方法，但如果您想要实现的只是某种错误保护（这样用户就不会错误地访问彼此的文件）这应该这样做。

如果您需要真正的安全性 - 我建议您按照 Grumbler85 的建议进行操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T08:02:46.230

我认为您应该使用 Sql Server 2008 及更高版本的一部分的 FileStream 来存储这些文件。 [http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)

使用它，文件区域存储在磁盘上，但在特殊的地方。你没有问题，即当有人想要更改任何文件时。

# git - 用户的 Gitlab 工作流程和配置

> ID：12742023
> 
> 赞同：4
> 
> 时间：2012-10-05T08:00:51.267
> 
> 标签：git, gitolite, gitlab

## 背景/信息

我在 ubuntu 12.04 上安装了 gitlab，如官方页面所述： [https ://github.com/gitlabhq/gitlabhq/blob/stable/doc/installation.md](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/installation.md)

安装后，我可以使用`http://machine_ip:3000`凭据访问 Web 界面：

admin@local.host

5iveL!fe

在我的机器上，我有以下用户： - git（在教程中设置为没有密码） - gitlab（在教程中设置为自动） - my_username（我作为 root 使用的普通用户）

在 gitlab 的 Web 界面中，当请求时，我在 my_username 上生成了一个公共 rsa 密钥并将其粘贴到那里。

然后，我继续使用 git init 和 git remote add origin 在 /home/my_username/test 中创建一个存储库，如教程中所述。当我尝试推送我的提交时，我收到以下错误：

```
To git@localhost:test.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@localhost:test.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我告诉你这一切是为了更好地理解我试图实现的目标以及我收到的错误消息。

## 问题

在开发人员的机器上，我安装了 putty、pageant、puttygen 和 msysgit。我在 gitlab 的界面中生成了一个与新用户关联的密钥。此外，我将 GIT_SSH 设置为使用 plink 以便让 msysgit 使用选美（它为连接提供密钥）。

我可以不使用密码连接到 git@machine_ip，因此密钥被添加到 git 中的 authorized_keys 中。

但是，当我尝试使用源位置 git@machine_ip:test.git 克隆存储库时，我收到以下错误消息：

```
fatal: 'test.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我不知道我在这里做错了什么。我应该做一些不同的事情吗（创建一个新项目，以不同​​的方式设置存储库，在 gitlab 中添加一个新用户及其密钥）等等。

你能提供一些帮助吗？

## 更新信息

我通过使用交钥匙 gitlab 设备重新安装机器然后升级（我承认有点忙）gitlab 解决了这个问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:22:39.160

我将首先通过 GitLab 接口本身声明 repo 测试，然后克隆该 repo。
（而不是在本地初始化一个 repo，并尝试推送它）

正如[OP rsavu](https://stackoverflow.com/users/504478/rsavu)提到的，使用[交钥匙 GitLab 设备](http://www.turnkeylinux.org/gitlab)并升级 GitLab 足以解决问题。

# java - 使用java套接字拒绝连接？

> ID：12742030
> 
> 赞同：0
> 
> 时间：2012-10-05T08:01:24.967
> 
> 标签：java, sockets, tcp

我正在使用一个简单的程序连接到服务器：

就这个：

```
 public static void main(String[] args) throws Exception {
        String sentence;
        String modsent;

        //input Stream
        BufferedReader fromclient = new BufferedReader(new InputStreamReader(System.in));
        //client Socket
        Socket clientsock = new Socket("stockholm.serverdhse2.se", 9000);
        //output Stream attached to socket
        DataOutputStream serverout = new DataOutputStream(clientsock.getOutputStream());
        //input from Server
        BufferedReader fromserver = new BufferedReader(new InputStreamReader(clientsock.getInputStream()));

        sentence = fromclient.readLine();

        serverout.writeBytes(sentence + "\n");

        modsent = fromserver.readLine();

        System.out.println("From Server: " + modsent);

        clientsock.close();
    }

} 
```

但现在我得到了例外：

```
Exception in thread "main" java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at register.main(register.java:22) 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:16:50.670

也许它只能通过网络中的范围 dns 服务器访问，请使用 nmap 进行检查：

nmap -A 斯德哥尔摩.serverdhse2.se -p 9000

给我一个：

无法解析给定的主机名/IP：stockholm.serverdhse2.se。

要确保它是一个 dns 问题，请尝试使用 ip。如果与您获得的 ip 成功连接：“dns 问题”

# android - 当用户在 Android 上启动内置摄像头时，如何在后台自动启动我的应用程序

> ID：12742033
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:01:32.173
> 
> 标签：android, camera, android-camera

我想在Android上编写应用程序，当用户启动内置相机时在后台启动（重要的是：内置相机，而不是应用程序）并在用户拍照后执行一些操作。这是真的吗？如果是，如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:43:01.217

我怀疑这是否可能。android 没有提供任何机制来向系统广播 Camera 已启动。此外，您无法修改屏幕上显示的内容，因为相机应用程序处于命令状态。唯一的出路是让 MediaScanner 和 FileObserver 检查何时在 DCIM/Camera/ 文件夹中创建新图片并让您的应用程序采取相应的行动

# javascript - 间隔一段时间后一张接一张地显示图像

> ID：12742034
> 
> 赞同：2
> 
> 时间：2012-10-05T08:01:33.677
> 
> 标签：javascript, html

我是前端开发的新人，我面临的一个主要问题是我有 3 张图像放在彼此上，现在我想移动一张图像，所以另一张图像出现然后它消失了，第三张图像出现在一些之后时间间隔。

我想在我的网站的同一位置上放置三张图片，但只想在一段时间后一张接一张地看到这三张图片。请帮助我如何做到这一点？

我可以使用 marquee 属性或 javascript 吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:03:29.813

**非 jQuery 选项**

如果您不想走 jquery 路线，可以尝试[http://www.menucool.com/javascript-image-slider](http://www.menucool.com/javascript-image-slider)。设置同样简单，您只需确保您的图像位于 id 为的 div 中，`slider`并且该 div 与您的图像之一具有相同的尺寸。

* * *

**jQuery 选项**

[jQuery 循环插件](http://jquery.malsup.com/cycle/)将帮助您实现这一点。它需要 jquery 才能工作，但不需要太多设置即可创建简单的幻灯片幻灯片。

看看[“超级基本”演示](http://jquery.malsup.com/cycle/basic.html)：

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
}); 
```

如果你想要一些更花哨的东西，它有[很多选择。](http://jquery.malsup.com/cycle/options.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:24:31.700

在这里你可以使用纯 JavaScript 解决方案：

**编辑**我添加了图像旋转...查看实时示例（下面的链接）

```
<script>

    var current = 0;
    var rotator_obj = null;

    var images_array = new Array();
    images_array[0] = "rotator_1";
    images_array[1] = "rotator_2";
    images_array[2] = "rotator_3";

    var rotate_them = setInterval(function(){rotating()},4000);

    function rotating(){

        rotator_obj = document.getElementById(images_array[current]);

        if(current != 0) {

            var rotator_obj_pass = document.getElementById(images_array[current-1]);
            rotator_obj_pass.style.left = "-320px";

        }
        else {

            rotator_obj.style.left = "-320px";

        }

        var slideit = setInterval(function(){change_position(rotator_obj)},30);

        current++;

        if (current == images_array.length+1) {

            var rotator_obj_passed = document.getElementById(images_array[current-2]);
            rotator_obj_passed.style.left = "-320px";
            current = 0;
            rotating();

        }

    }

    function change_position(rotator_obj, type) {

        var intleft = parseInt(rotator_obj.style.left);

        if (intleft != 0) {

            rotator_obj.style.left = intleft + 32 + "px";

        }
        else if (intleft == 0) {

            clearInterval(slideit);

        }

    }

</script>

<style>

    #rotate_outer {

        position: absolute;
        top: 50%;
        left: 50%;
        width: 320px;
        height: 240px;
        margin-top: -120px;
        margin-left: -160px;
        overflow: hidden;

    }

    #rotate_outer img {

        position: absolute;
        top: 0px;
        left: 0px;

    }

</style>

<html>
<head>
</head>
<body onload="rotating();">

    <div id="rotate_outer">
        <img src="0.jpg" id="rotator_1"  style="left: -320px;" />
        <img src="1.jpg" id="rotator_2"  style="left: -320px;" />
        <img src="2.jpg" id="rotator_3"  style="left: -320px;" />
    </div>

</body>
</html> 
```

**还有一个工作示例：**
[http ://simplestudio.rs/yard/rotate/rotate.html](http://simplestudio.rs/yard/rotate/rotate.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:13:04.297

```
arrayImageSource= ["Image1","Image2","Image3"];

setInterval(cycle, 2000);
var count = 0;

function cycle()
{
  image.src = arrayImageSource[count]
  count = (count === 2) ? 0 : count + 1;
}​ 
```

也许是这样的？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T08:13:55.817

如果您的目标是良好的过渡和效果，我建议使用名为“jqFancyTransitions”的图像滑块

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T08:25:10.547

```
<html>
<head>
<script type="text/javascript">
    window.onload = function(){
        window.displayImgCount = 0;
        function cycleImage(){
            if (displayImgCount !== 0) {
                document.getElementById("img" + displayImgCount).style.display = "none";
            }
            displayImgCount = displayImgCount === 3 ? 1 : displayImgCount + 1;
            document.getElementById("img" + displayImgCount).style.display = "block";
            setTimeout(cycleImage, 1000);
        }
        cycleImage();
    }
</script>
</head>
<body>
    <img id="img1" src="./img1.png" style="display: none">
    <img id="img2" src="./img2.png" style="display: none">
    <img id="img3" src="./img3.png" style="display: none">
</body>
</html>​ 
```

小提琴：http: [//jsfiddle.net/SReject/F7haV/](http://jsfiddle.net/SReject/F7haV/)

# postgresql - 确定输入数组 plpgsql 的大小

> ID：12742037
> 
> 赞同：1
> 
> 时间：2012-10-05T08:01:41.827
> 
> 标签：postgresql, plpgsql

我有一个以整数 [] 作为输入的 plpgsql 函数。

整个设置可以在这个问题中找到： [Passing a record as function argument PL/pgSQL](https://stackoverflow.com/questions/12716024/passing-a-record-as-function-argument-pl-pgsql)

简短版本：我有一个从书籍到作者的 n 到 m 关系，带有一个名为 books_author 的链接表。我现在有一个看起来像这样的函数：

```
 create function f_insert_books(title varchar, isbn varchar, publisher varchar,  
      author_id integer[]) returns void as $$
      begin
      --insert book
      --insert link to authors into the books_author table
      end;
    $$ language plpgsql; 
```

我现在想将 number_of_authors 添加到书中。是否有一种简单的方法来确定 author_id 数组的大小，或者您是否建议将“number_of_authors int”作为输入参数传递？

我找到了这个建议，但我有点担心这种方法的性能。所以也许有一些更容易/更快的东西。 [http://archives.postgresql.org/pgsql-sql/2000-06/msg00169.php](http://archives.postgresql.org/pgsql-sql/2000-06/msg00169.php)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T08:28:26.613

使用[`array_length`](http://www.postgresql.org/docs/current/static/functions-array.html)：

```
SELECT array_length( ARRAY[1,2,3], 1 ); 
```

第二个参数是您感兴趣的维度。大多数数组是一维的，因此在大多数情况下 1 是正确的值。

如果您实际上是在查找`text`数组中所有字符串的长度，请使用`array_to_string`with `length`：

```
SELECT length(array_to_string( ARRAY['a','bb','ccc'], '' )); 
```

顺便说一句，您链接到的文章已有 12 年历史，似乎已完全过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T15:22:57.417

还有一个函数可以获取数组的长度 - [`cardinality`](https://www.postgresql.org/docs/current/static/functions-array.html)：

```
SELECT cardinality(ARRAY[1,2,3]); 
```

对于简单的一维数组，它的工作方式相同，不需要在[`array_length`](https://www.postgresql.org/docs/current/static/functions-array.html)函数中传递任何额外的参数，例如数组维度。

# objective-c - 代表没有得到零

> ID：12742039
> 
> 赞同：0
> 
> 时间：2012-10-05T08:01:55.060
> 
> 标签：objective-c, ios, delegation

我正在开发一个执行图像延迟加载的项目。当 imagedownloader 下载图像时，它会将消息发送给它的代理来处理图像。但是，当它的委托（视图控制器）从内存中释放时，我不希望 imagedownloader 类将消息发送给它的委托，因为它已经死了。我需要知道什么时候可以将 imagedownloader 的委托设置为零？我的目标设置为 iOS4.0，所以我不能使用弱引用。我有许多存储在字典中的 imagedownloader 实例，准备向他们的代表发送完成消息。我必须将所有这些存储实例的委托设置为零。现在我正在做'

```
-(void)viewWillDisappear:(BOOL)animated
{
    for(imagedownloader *imagedownloaderObj in dict)
    {
        imagedownloaderObj.delegate = nil;
    }

    [super viewWillDisAppear:animated]
} 
```

但它在循环中崩溃。请帮助任何人......对不起我的英语不好但我希望你明白这是我的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:13:44.383

您的代码中有问题 - 您正在枚举一个字典，该字典枚举了它的键，而不是它的对象。相反，你想做：

```
for(ImageDownloader *imageDownloader in [imageDownloaderDictionary allValues])
{
    if (imageDownloader.delegate == self)
        imageDownloader.delegate = nil;
} //note - I've adjusted naming to match Objective-C style conventions. It fits in better with the framework code now. 
```

另外，我会说改为这样做`dealloc`。我不知道`viewWillDisappear:`在释放之前你总是会得到一个方法，在早期版本的 iOS（包括 iOS4）上你当然不能保证。此外，如果您返回该视图，您也不想浪费时间再次下载图像。

# c++ - 跨dll延迟加载

> ID：12742041
> 
> 赞同：0
> 
> 时间：2012-10-05T08:02:04.300
> 
> 标签：c++, windows, dll, global-variables

我有一个应用程序加载依赖于我想要自定义加载的其他 dll 的 dll。我遇到的问题是我在一个 dll 中对 __pfnDliFailureHook2 的定义在加载其他 dll 时不会被继承。将 vairable 定义为 dllexport 会给我一个重新定义错误，因为它已经在 delayhlp.cpp 中定义而没有相应的 dllimport。跨 dll 定义像这样的一致全局变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:52:31.937

如果所有 DLL 共享相同的 C++ 运行时，那么它们将共享相同的失败挂钩。但是，似乎一些涉及的 ​​DLL 不共享运行时。这意味着您根本无法将故障挂钩强加到这样的 DLL 上。

> 跨 DLL 定义像这样的一致全局变量的正确方法是什么？

没有办法做到这一点。如果 DLL 要共享一个全局变量，它们必须全部合作才能这样做。你不能从外面强加它。每个 DLL 都必须选择加入。

# mysql - 优先从mysql数据库中删除重复索引

> ID：12742043
> 
> 赞同：2
> 
> 时间：2012-10-05T08:02:08.793
> 
> 标签：mysql, indexing, foreign-keys, database-optimization

我正在制定一个优化我的数据库索引的程序，这将花费我很长时间。所以我想确认这样做是否可行？并没有已经完成，否则想要得到它。

1.  我想从所有表中读取所有索引。
2.  我想删除作为主键的字段的所有其他索引
3.  做完以上。仍被索引为唯一的字段。我想删除所有其他索引
4.  既不是主要的也不是唯一的字段。我只想在每个索引上保留一个索引并删除所有其他索引

我很好奇为什么MYSQL允许主键字段上的唯一索引？它可以产生任何有用的差异吗？

**问题**：我需要指导/查询/程序来删除所有无用的索引以及我上面提到的 4 点中提到的层次结构

**更新 1：**我将[**在 SQLFiddle 上**](http://sqlfiddle.com/#!2/5f438/9)更新我的工作。目前它才刚刚开始。但是，您可以在此链接上看到有四个字段和 8 个索引。我只想要其中的 3 个，而放弃所有其他的。我只需要第一，第三和第四。根据我以上4点。

**更新 2**：我得到了 eggayal 的出色回答。他给出的第一个链接是纯sql解决方案。我[**在 Link2**](http://sqlfiddle.com/#!2/8ba8a/4)尝试过。它给了我不想要的输出。[**可以通过在此处查看 Link1**](http://sqlfiddle.com/#!2/8ba8a/2)来比较 link2 的输出[](http://sqlfiddle.com/#!2/8ba8a/2)

 ****期望的输出是**

```
    COLUMN_NAMES REDUNDANT_INDEXES
1 auth_id `auth_id_3`,`auth_id_2`,`auth_id`
2 id `id_2`,`id_3`
3 主题`subject_1`

```

**[**Link2**](http://sqlfiddle.com/#!2/8ba8a/4)**中查询输出的**错误[](http://sqlfiddle.com/#!2/8ba8a/4)**

 ****`auth_id_4`第 1 行：auth_id 未显示为冗余索引，因为它与同一字段上的唯一键无关（比较） 。但我需要它，因为当同一列也有唯一索引时我不需要这个索引

Row2 ：当某些列上存在主键索引时，我想说所有其他索引都是多余的

第 3 行：好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:42:44.130

Roland Bouman 写了一篇关于这个主题的[博客文章，展示了一个纯 SQL 解决方案。](http://www.oreillynet.com/databases/blog/2006/09/_finding_redundant_indexes_usi.html)

Google 上的[快速搜索](http://www.google.com/search?q=mysql+duplicate+index+finder)也引起了人们的注意：

*   [`DuplicateIndexFinder.java`](http://www.jroller.com/dschneller/resource/DuplicateIndexFinder.java);
*   一个用 Perl 编写的类似工具，它是[maatkit](http://code.google.com/p/maatkit/)的一部分，现在是[Percona Toolkit](http://www.percona.com/software/percona-toolkit/)；和
*   [`mysqlindexanalyzer`](http://code.google.com/p/mysqlindexanalyzer/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:53:13.127

我在c#中做了一个应用程序。它会根据您的优先级删除重复的索引，希望对您有所帮助

它可能需要很多改进，但我知道的是......它不会一次只删除那些涉及主（复合）和外键的重复索引（这通常不是好方法）

[**这是带有源的完整应用程序的下载链接**](https://khukkw.bn1.livefilestore.com/y1pBkAeYW4Ge77Vmx4qDzRk-vn2P6fR5iYnze6hAWPMYYjzs4uibX9dJ4WcHnD-s2iR0YsS8DRaaCK6xyHwlqMXng/duplicateIndexRemover.rar?download&psid=1)

以下是上述链接的主文件

```
using System;
using System.Data;
using MySql.Data.MySqlClient;
using System.Collections.Generic;

namespace duplicateIndexRemover
{
public class duplicateIndexRemover
{

    static List<string> toDrop;
    public string main(System.Windows.Forms.DataGridView dgv, System.Windows.Forms.DataGridView dgv1, string dbName)
    {            
        try
        {
            toDrop = new List<string>();
            List<table> tbs = new List<table>();
            DataTable dt1 = new DataTable();
            string cnStr = "SERVER=localhost;DATABASE=" + dbName + ";UID=root;";
            MySqlConnection conn = new MySqlConnection(cnStr);
            MySqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = @"SELECT Table_Name,Column_Name,Index_Name,NON_UNIQUE
            FROM information_schema.STATISTICS
            WHERE table_schema = '" + dbName + "' order by Table_Name,Column_Name,Index_Name";
            MySqlDataAdapter adp = new MySqlDataAdapter(cmd);
            DataTable dt = new DataTable();
            adp.Fill(dt);
            dgv.DataSource = dt;
            for (int i = 0; i < dt.Columns.Count - 1; i++)
                dt1.Columns.Add(dt.Columns[i].ColumnName);

            table tb = new table();
            column cl = new column();
            index dx = new index();
            tb.nam = dt.Rows[0][0].ToString();
            cl = addColumn(dt, tb, 0);
            tbs.Add(tb);

            for (int i = 1; i < dt.Rows.Count; i++)
            {
                if (tb.nam != dt.Rows[i][0].ToString())
                {
                    // 1st column of (current) t_th table
                    tb = new table();
                    tb.nam = dt.Rows[i][0].ToString();
                    cl = addColumn(dt, tb, i);
                    tbs.Add(tb);
                }
                else
                {
                    if (cl.nam != dt.Rows[i][1].ToString())
                        cl = addColumn(dt, tb, i);
                    else
                    {

                        // Duplicate Indices
                        // But this one may be primary/unique key
                        // Then it would not be good to make a drop statement for this index here
                        // It may be improvable, but i can not apply as well condition here if it is not primary key
                        addIndex(dt, cl, i);
                    }
                }
            }
            makeDropStatements(tbs, dt1);

            dgv1.DataSource = dt1;
            cmd.Connection.Open();
            for (int i = 0; i < toDrop.Count; i++)
            {
                cmd.CommandText = toDrop[i];
                try
                {
                    cmd.ExecuteScalar();
                }
                catch//(Exception ex)
                {
                    //System.Windows.Forms.MessageBox.Show("Table : " + dt1.Rows[i][0] + " Column : " + dt1.Rows[i][1] + "\n\n" + ex.Message);
                }
            }

            cmd.CommandText = @"select table_name from information_schema.STATISTICS
            WHERE table_schema = '" + dbName + "' group by table_name,column_name";
            DataTable dg = new DataTable();
            adp.Fill(dg);

            string msg = " Total Number of Indices : " + dt.Rows.Count;
            msg += "\t Droppable Indices : " + toDrop.Count;
            msg += "\t Total Number of Indexed Columns : " + dg.Rows.Count;
            return msg;
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.Message);
            return ex.Message;
        }
    }

    private static column addColumn(DataTable dt, table tb, int i)
    {
        column cl = new column();
        // 1st index of i_th column of t_th table
        cl.nam = dt.Rows[i][1].ToString();
        addIndex(dt, cl, i);
        tb.cols.Add(cl);
        return cl;
    }

    private static void addIndex(DataTable dt, column cl, int i)
    {
        index dx = new index();
        dx.nam = dt.Rows[i][2].ToString();
        dx.non_unique = Convert.ToBoolean(dt.Rows[i][3]);
        cl.indices.Add(dx);
    }

    private static void makeDropStatements(List<table> tbs, DataTable dt1)
    {
        bool chekd;
        List<index> temp;
        for (int t = 0; t < tbs.Count; t++)
        {                
            for (int i = 0; i < tbs[t].cols.Count; i++)
            {                    
                temp = tbs[t].cols[i].indices;
                if (temp.Count > 1)
                {

                    chekd = false;
                    for (int j = 0; j < temp.Count; j++)
                    {
                        if (temp[j].nam == "PRIMARY")
                        {
                            getToDropIndices(tbs[t].nam, tbs[t].cols[i].nam, temp, j, dt1);
                            chekd = true;
                            break;
                        }
                    }
                    if (!chekd)
                    {
                        for (int j = 0; j < temp.Count; j++)
                        {
                            if (!temp[j].non_unique)
                            {
                                getToDropIndices(tbs[t].nam, tbs[t].cols[i].nam, temp, j, dt1);
                                chekd = true;
                                break;
                            }
                        }
                    }
                    if (!chekd)
                    {
                        getToDropIndices(tbs[t].nam, tbs[t].cols[i].nam, temp, 0, dt1);
                        chekd = true;
                        break;
                    }
                }
            }
        }
    }

    private static void getToDropIndices(string tbl, string col, List<index> sublist, int nt, DataTable dt1)
    {
        for (int j = 0; j < nt; j++)
        {
            toDrop.Add("alter table `" + tbl + "` drop index " + sublist[j].nam);
            dt1.Rows.Add(dt1.NewRow());
            int r = dt1.Rows.Count - 1;
            dt1.Rows[r][0] = tbl;
            dt1.Rows[r][1] = col;
            dt1.Rows[r][2] = sublist[j].nam;
        }
        for (int j = nt + 1; j < sublist.Count; j++)
        {
            toDrop.Add("alter table `" + tbl + "` drop index " + sublist[j].nam);
            dt1.Rows.Add(dt1.NewRow());
            int r = dt1.Rows.Count - 1;
            dt1.Rows[r][0] = tbl;
            dt1.Rows[r][1] = col;
            dt1.Rows[r][2] = sublist[j].nam;
        }
    }
}

public class table
{
    public List<column> cols =new List<column>();
    public string nam = "";
}

public class column
{
    public List<index> indices = new List<index>();
    public string nam = "";
}

public class index
{
    public string nam = "";
    public bool non_unique;
}
} 
```

您可以忽略/删除它们仅用于显示您的索引的网格视图。你只需要调用 main 函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:21:29.107

根据我在链接中看到的内容，似乎确实有许多无关索引，例如：

```
KEY `auth_id_2` (`auth_id`),
KEY `auth_id_4` (`auth_id`),
KEY `auth_id_5` (`auth_id`),
KEY `auth_id_6` (`auth_id`) 
```

我想也许它们是以不同的方式建造的。例如，一个可能是 BTREE，另一个可能是 HASH，这可能会达到某种目的。但是根据SHOW，它们都是一样的。删除多余的相同的应该不是问题。

例如，拥有所有这三个是有目的的：

```
KEY `articleid` (`artid`),
KEY `artSub` (`artSub`),
KEY `comments_ibfk_3` (`artSub`,`artid`) 
```

在两列上构建索引不一定与在一个列上构建两个单独的索引相同。******

# css - 将 Twitter Bootstrap 样式应用于 CodeMirror？

> ID：12742058
> 
> 赞同：11
> 
> 时间：2012-10-05T08:03:11.270
> 
> 标签：css, twitter-bootstrap, code-editor

我有一个带有文本区域的表单，用户可以在其中编写一些代码。我正在用[CodeMirror](http://codemirror.net/)代码编辑器框替换该文本区域，因此我想对其应用 Bootstrap 样式。

这是表单现在的样子，除了代码编辑器之外的所有表单元素都有 Bootstrap 样式：![在此处输入图像描述](../Images/94072f3d36a1f160319503428315551f.png)

所以特别是，我认为我需要在鼠标悬停时给代码编辑器提供圆角、边框、正确的宽度（input-xxlarge）和蓝色高亮。

我该怎么做呢？除了手动复制必要的 CSS 之外，还有其他方法吗？

# 更新

我尝试从 Bootstrap 复制 textarea CSS，当我在代码编辑器中单击时，除了焦点 CSS 之外，一切看起来都很好。这就是我得到的：

![在此处输入图像描述](../Images/a9e01a4da3fbef0756f8fa9fcf7abb79.png)

亮点在内部，而不是外部。任何想法我如何解决这个问题？

这是我通过从 Bootstrap 复制添加的 CSS：

```
 .CodeMirror {
      line-height: 1.3em;
      font-family: monospace;

      /* Necessary so the scrollbar can be absolutely positioned within the wrapper on Lion. */
      position: relative;
      /* This prevents unwanted scrollbars from showing up on the body and wrapper in IE. */
      overflow: hidden;
      background-color: white;
      width: 530px;

      /* Copied from Bootstrap's textarea */
      display: inline-block;
      padding: 4px 6px;
      margin-bottom: 9px;
      color: #555555;
      border: 1px solid #ccc;
      -webkit-border-radius: 3px;
      -moz-border-radius: 3px;
      border-radius: 3px;
      -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
      -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
      -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
      -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
      -ms-transition: border linear 0.2s, box-shadow linear 0.2s;
      -o-transition: border linear 0.2s, box-shadow linear 0.2s;
      transition: border linear 0.2s, box-shadow linear 0.2s;  
    }

    .CodeMirror-focused {
      /* Copied from Bootstrap's textarea */
      border-color: rgba(82, 168, 236, 0.8);
      outline: 0;
      outline: thin dotted \9;
      /* IE6-9 */

      -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
         -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
              box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);  
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-31T23:55:27.813

**代码镜像和引导（v3 和 v4）：**
样式尚不支持验证状态（has-error、has-warning、has-success）

```
.CodeMirror {
  /* Bootstrap Settings */
  box-sizing: border-box;
  margin: 0;
  font: inherit;
  overflow: auto;
  font-family: inherit;
  display: block;
  width: 100%;
  padding: 6px 12px;
  font-size: 14px;
  line-height: 1.42857143;
  color: #555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075); /* Bootstrap 3 */
  box-shadow: none; /* Bootstrap 4 */
  transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
  /* Code Mirror Settings */
  font-family: monospace;
  position: relative;
  overflow: hidden;
}

.CodeMirror-focused {
  /* Bootstrap Settings */
  border-color: #66afe9;
  outline: 0;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6); /* Bootstrap 3 */
  box-shadow: 0 0 0 .2rem rgba(0, 123, 255, .25); /* Bootstrap 4 */
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T08:07:35.297

CodeMirror 隐藏了原始元素`textarea`并创建了一个（相当复杂的）`div`元素`pre`结构。`div`您可以设置最外层的样式`.CodeMirror`以达到相同的效果。

这将需要自定义 CodeMirror 样式表或为类/元素添加您自己的样式。如果您使用 LESS 构建 Bootstrap，可能有一种方法可以应用 mixin 来避免重复`textarea`样式，尽管重复的数量可能很少。

# c# - C# 中的 NativeMethods 类有什么作用？

> ID：12742061
> 
> 赞同：4
> 
> 时间：2012-10-05T08:03:15.730
> 
> 标签：c#, pinvoke, native-methods

> **可能重复：**
> [类 NativeMethods 是否在 .NET 中专门处理？](https://stackoverflow.com/questions/1445117/is-the-class-nativemethods-handled-specially-in-net)

我正在开发一个 C# 项目，该项目为某些功能调用了一些非托管 C++ 代码。我发现了 fxCop，它抱怨我包含非托管库中的函数的方式。

它建议使用此处解释的 NativeMethods 类之一：

[http://msdn.microsoft.com/en-us/library/ms182161%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms182161%28v=vs.80%29.aspx)

我读过它，但我不能说我理解它的确切作用以及使用它的好处。如果有人可以向我解释“此类不会抑制堆栈遍历以获得非托管代码权限”的含义，我会非常高兴。和“此类抑制非托管代码权限的堆栈遍历。”

**编辑：**我真正想知道的是它如何影响我的代码。我已经阅读了 MSDN 上的内容，显然这对某些人来说已经足够了，但对我来说太高了，我无法理解。这就是为什么我要求进行一些详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:07:39.450

本文的 Visual Studio 2012 版本包含更多解释，

[http://msdn.microsoft.com/en-us/library/ms182161(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms182161(v=vs.110).aspx)

> 要修复违反此规则的行为，请将方法移至相应的 NativeMethods 类。对于大多数应用程序，将 P/Invokes 移至名为 NativeMethods 的新类就足够了。
> 
> 但是，如果您正在开发用于其他应用程序的库，您应该考虑定义另外两个称为 SafeNativeMethods 和 UnsafeNativeMethods 的类。这些类类似于 NativeMethods 类；但是，它们使用称为 SuppressUnmanagedCodeSecurityAttribute 的特殊属性进行标记。应用此属性时，运行时不会执行完整的堆栈遍历以确保所有调用者都具有 UnmanagedCode 权限。运行时通常在启动时检查此权限。由于不执行检查，因此可以大大提高对这些非托管方法的调用性能，还可以使权限有限的代码能够调用这些方法。
> 
> 但是，您应该非常小心地使用此属性。如果实施不正确，可能会产生严重的安全隐患。
> 
> 有关如何实现这些方法的信息，请参阅 NativeMethods 示例、SafeNativeMethods 示例和 UnsafeNativeMethods 示例。

# ios - 如何从 SQLite 加载分组注释点

> ID：12742062
> 
> 赞同：0
> 
> 时间：2012-10-05T08:03:23.077
> 
> 标签：ios, sqlite, mapkit

我有一个包含 16000 个注释的数据库。当用户缩小时，加载的点太多，点重叠。我找到了一个带有代码的过滤器，但我只想从 SQL 加载一些点，而不是全部加载并在之后过滤它。我不知道iOS或其他解决方案中是否有存储过程。

这是我的代码

```
iphoneScaleFactorLatitude = 3.3;
    float iphoneScaleFactorLongitude = 6.38;
    float latDelta  = self.mapView.region.span.latitudeDelta/iphoneScaleFactorLatitude;
    float longDelta = self.mapView.region.span.longitudeDelta/iphoneScaleFactorLongitude;

    NSMutableArray *shopsToShow = [[NSMutableArray alloc] initWithCapacity:0];
        for (int i=0; i<[placesToFilter count]; i++) {
            MKPointAnnotation *checkingLocation   = [placesToFilter objectAtIndex:i];
            CLLocationDegrees latitude  = [checkingLocation coordinate].latitude;
            CLLocationDegrees longitude = [checkingLocation coordinate].longitude;

            bool found=FALSE;

            for (MKPointAnnotation *tempPlacemark in shopsToShow) {
                if(fabs([tempPlacemark coordinate].latitude-latitude) < latDelta &&
                   fabs([tempPlacemark coordinate].longitude-longitude) <longDelta ){
                    [self.mapView removeAnnotation:checkingLocation];
                    found = TRUE;
                    break;
                }
            }

            if (!found){
                [shopsToShow addObject:checkingLocation];
                [self.mapView addAnnotation:checkingLocation];
            }
        } 
```

但是他们加载了太多的点，我的问题是我不想加载所有的点，因为每次我都必须使用算法来排序。

# xml - 从 xml 文件中获取数据

> ID：12742078
> 
> 赞同：1
> 
> 时间：2012-10-05T08:05:18.337
> 
> 标签：xml

我有以下 2 个 xml 文件（fruit.xml 和 toy.xml）。我想使用 xquery 检索日本国家生产的水果和玩具。

预期的结果应该是下面的玩具需要在水果之前先列出来。

```
 <JapanProduct>
    <Prod type="Toy">Digimon<Prod>
    <Prod type="Toy">Doll<Prod>
    <Prod type="Fruit">Peach<Prod>
</JapanProduct> 
```

下面是我编写的 xquery 代码，目前卡在这里。我怎样才能产生如上所述的预期结果？

```
for $f in doc("Fruit.xml")//Produce
for $t in doc("Toy.xml")//Produce

where $f[Country="Japan"] and $t[Country="Japan"]
return element JapanProduct {attribute Prod{if ($f[country=Japan"])then } 
```

```
Fruit.XML
<fruitsOrigin>
  <Produce>      
     <Country>Australia</Country>
     <Prod>Kiwi</Prod>
     <Size>M</Size>
  </Produce>
  <Produce>
     <Country>China</Country>
     <Prod>Pear</Prod>
     <Size>M</Size>    
  </Produce>
  <Produce>
     <Country>Japan</Country>
     <Prod>Peach</Prod>
     <Size>L</Size> 
  </Produce>   
</fruitsOrigin>

Toy.XML
<ToyMaker>
   <Produce>
     <Country>Australia</Country>
     <Prod>Lego</Prod>
     <cost>$15</cost>
   </Produce>
   <Produce>
     <Country>Japan</Country>
     <Prod>Doll</Prod>
     <cost>$20</cost>      
   </Produce>
   <Produce>
     <Country>Japan</Country>
     <Prod>Digimon</Prod>
     <cost>$17</cost>
   </Produce>
</ToyMaker> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:51:07.430

下面的作品..

```
<JapanProduct>
{
for $t in doc("Toy.xml")//Produce
  where $t[Country='Japan'] 
  order by $t
  return 
    <Prod type="Toy">{$t/Prod/string()}</Prod>

}
{
for $f in doc("Fruit.xml")//Produce
  where $f[Country='Japan'] 
  order by $f
  return 
    <Prod type="Fruit">{$f/Prod/string()}</Prod>

}
</JapanProduct> 
```

你可以在这里试试[http://basex.org/products/live-demo/](http://basex.org/products/live-demo/)

# cakephp - 在 hasOne 关系中保存相应的数据

> ID：12742079
> 
> 赞同：0
> 
> 时间：2012-10-05T08:05:19.307
> 
> 标签：cakephp, cakephp-2.1

正如我在其他帖子中所读到的，与第一个模型相关的表的 id 必须由表单中的隐藏字段设置。

```
echo $form->input('Gallery.id', array('type'=>'hidden', 'value'=>$showcase['Gallery']['id'])); 
```

（请参阅[更新 hasone 关系行为异常（cakephp）](https://stackoverflow.com/questions/2037352/update-hasone-relation-behaves-strangely-cakephp)中的问题）

但这并没有那么冒险，因为任何人都可以编辑这个隐藏字段值，并且另一个数据集会被更新。

尝试使用与 hasOne / belongsTo 关系关联的 2 个模型更新整个数据集时，避免此类安全问题的最佳选择是什么？

谢谢

最好的斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:30:21.033

您可以切换到使用 UUID。只需要将您的主键和外键更改为 char(36)，然后 cake 会完成剩下的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:59:39.300

第一个选项是在保存时进行多个查询和检查

第二个选项是[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#form-tampering-prevention](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#form-tampering-prevention)

因此，无论哪种方法在您的特定情况下最有效...

# node.js - 如何在 TypeScript 文件中要求 NodeJS？

> ID：12742082
> 
> 赞同：116
> 
> 时间：2012-10-05T08:05:52.080
> 
> 标签：node.js, typescript

如何`node_modules`从类中加载常规 NodeJS 模块（来自）`TypeScript`？

当我尝试编译`.ts`包含以下内容的文件时：

```
var sampleModule = require('modulename'); 
```

编译器提示我不能在这个范围内使用 require。（该行位于文件的开头）。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-05T08:26:40.210

当找不到符号时，Typescript 总是会抱怨。编译器带有一组默认定义`window`，`document`这些定义在一个名为`lib.d.ts`. 如果我在这个文件中做一个 grep ，`require`我找不到函数的定义`require`。因此，我们必须自己告诉编译器这个函数将在运行时使用以下`declare`语法存在：

```
declare function require(name:string);
var sampleModule = require('modulename'); 
```

在我的系统上，这编译得很好。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-02-03T07:47:12.270

正确的语法是：

```
import sampleModule = require('modulename'); 
```

或者

```
import * as sampleModule from 'modulename'; 
```

然后用`--module commonjs`.

如果包没有附带`index.d.ts`文件并且它`package.json`没有`"typings"`属性，`tsc`则会吠叫它不知道`'modulename'`指的是什么。为此，您需要在[http://definitelytyped.org/](http://definitelytyped.org/)`.d.ts`上为它找到一个文件，或者自己编写一个。

如果您正在为 Node.js 编写代码，您还需要`node.d.ts`来自[http://definitelytyped.org/](http://definitelytyped.org/)的文件。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2017-10-18T21:20:06.917

最好的解决方案是获取 Node 类型定义的副本。这将解决各种依赖问题，不仅`require()`. 这以前是使用类似的包完成的`typings`，但正如 Mike Chamberlain 所提到的，不推荐使用 Typings。现代的方式是这样做的：

```
npm install --save-dev @types/node 
```

它不仅会修复编译器错误，还会将 Node API 的定义添加到您的 IDE。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-29T09:42:56.477

使用类型从 TypeScript 访问节点函数：

```
typings install env~node --global 
```

如果你没有打字安装它：

```
npm install typings --global 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T05:17:34.597

加载打字稿模块时，我使用带有扩展名的模块名称，即“.ts”

`const sampleModule = require('modulename.ts');`

仅供参考，在我的情况下，“node”命令（v14.17.1）直接使用“.ts”文件而不生成“*.js”文件。

# haskell - Haskell 中的 GUI 编程 - Ubuntu 上的安装问题

> ID：12742085
> 
> 赞同：2
> 
> 时间：2012-10-05T08:06:00.753
> 
> 标签：haskell, gtk2hs, wxhaskell

是否有仍然是最新的 GUI 包？

我今天尝试同时安装 wxHaskell 和 gtk2hs，但都因我无法解决的依赖项而失败（wxHaskell 找不到一些 wxWidget 库，并且在尝试 gade 教程时 gtk2hs 在我安装的缺少的 pkg-config libglade2-0 上失败）。

我想这只是我不了解 linux/cabal/package 安装的一些问题，但是是否有最新的教程如何开始（安装）一些用于 Haskell 的 GUI 库？

以下是错误：

```
carsten@Carsten-VirtualBox:~$ cabal install glade
Resolving dependencies...
[1 of 2] Compiling SetupWrapper     ( /tmp/glade-0.12.1-12934/glade-0.12.1/SetupWrapper.hs, /tmp/glade-0.12.1-12934/glade-0.12.1/dist/setup/SetupWrapper.o )
[2 of 2] Compiling Main             ( /tmp/glade-0.12.1-12934/glade-0.12.1/Setup.hs, /tmp/glade-0.12.1-12934/glade-0.12.1/dist/setup/Main.o )
Linking /tmp/glade-0.12.1-12934/glade-0.12.1/dist/setup/setup ...
[1 of 2] Compiling Gtk2HsSetup      ( Gtk2HsSetup.hs, dist/setup-wrapper/Gtk2HsSetup.o )
[2 of 2] Compiling Main             ( SetupMain.hs, dist/setup-wrapper/Main.o )
Linking dist/setup-wrapper/setup ...
Configuring glade-0.12.1...
setup: The pkg-config package libglade-2.0 version >=2.0.0 is required but it
could not be found.
cabal: Error: some packages failed to install:
glade-0.12.1 failed during the configure step. The exception was:
ExitFailure 1 
```

和

```
carsten@Carsten-VirtualBox:~$ cabal install wxc
Resolving dependencies...
[1 of 1] Compiling Main             ( /tmp/wxc-0.90.0.4-13078/wxc-0.90.0.4/Setup.hs, /tmp/wxc-0.90.0.4-13078/wxc-0.90.0.4/dist/setup/Main.o )
Linking /tmp/wxc-0.90.0.4-13078/wxc-0.90.0.4/dist/setup/setup ...
Configuring wxc-0.90.0.4...

  Warning: No config found to match: /usr/bin/wx-config --version=2.9 --version-full
           in /usr/lib/x86_64-linux-gnu/wx/config
  If you require this configuration, please install the desired
  library build.  If this is part of an automated configuration
  test and no other errors occur, you may safely ignore it.
  You may use wx-config --list to see all configs available in
  the default prefix.

setup: failed
cabal: Error: some packages failed to install:
wxc-0.90.0.4 failed during the configure step. The exception was:
ExitFailure 1 
```

这真的让我很沮丧-也许有人可以在这里帮助我-谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:11:53.030

我正在运行 12.04，一切正常。你确定你安装了 libglade2-dev 吗？那应该解决它。来自 ArchLinux 的我一开始遇到了同样的问题，当时我不知道有单独的开发库，我不记得在 Arch 中必须这样做。

# django - Django admin，静态文件使用错误的目录

> ID：12742091
> 
> 赞同：1
> 
> 时间：2012-10-05T08:06:20.930
> 
> 标签：django, settings

我正在使用 django 1.4，当我在设置中有这个时：

```
STATIC_URL = '/_s/'
STATICFILES_DIRS = (
    ('admin', '/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static/admin'),
) 
```

然后访问`/_s/admin/css/base.css`Django 尝试从不同的路径加载它并写入：

```
"/usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/css/base.css" does not exist 
```

为什么会发生这种情况？

 **我使用**的 UPD**`./manage.py runcserver 0.0.0.0:8001`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:18:43.883

`STATICFILES_DIRS`用于收集静态文件，`./manage.py collectstatic`. 它告诉 Django 要查看哪些文件夹，以便将所有静态文件放在一个位置。

当提供静态文件时，Django 只会查找`STATIC_ROOT`.

[官方文档](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-dirs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:06:55.847

问题出在

```
./manage.py runcserver 0.0.0.0:8001 
```

我使用了并发服务器，而不是默认的 django 调试服务器（我认为它们都以相同的方式工作（线程除外））

但事实并非如此=(

**UPD**
从 1.4 开始你可以使用 django 调试服务器，它默认是多线程的。**

# php - 带有数字标签的PHP json解码

> ID：12742094
> 
> 赞同：0
> 
> 时间：2012-10-05T08:06:35.757
> 
> 标签：php, json, youtube

> **可能重复：**
> [如何访问具有整数等名称的对象属性？](https://stackoverflow.com/questions/10333016/how-to-access-object-properties-with-names-like-integers)

我尝试通过以下代码从 youtube data api 解码 json 结果：

```
 $url="http://gdata.youtube.com/feeds/api/videos/$id?v=2&alt=jsonc";
    echo "$url".'<BR>';
    $json = file_get_contents($url,0,null,null);
    $json_output = json_decode($json);
    $items=$json_output -> data;

    $content = "{$items->content->1}";
    echo $content.'<BR>'; 
```

一切正常，但最后两行。有人可以帮忙吗？

这是json结果：

```
 {"apiVersion":"2.1","data":{"id":"9jDg3Dh28rE","uploaded":"2012-10-04T03:45:49.000Z",
........
 "content":{"5":"http://www.youtube.com/v/9jDg3Dh28rE?version=3&f=videos&app=youtube_gdata",
 "1":"rtsp://v5.cache8.c.youtube.com/CiILENy73wIaGQmx8nY43OAw9hMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",
 "6":"rtsp://v5.cache4.c.youtube.com/CiILENy73wIaGQmx8nY43OAw9hMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"},"duration":2403,......}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:07:44.417

您需要将数字属性包装起来`{}`才能访问它。

```
$content = $items->content->{1}; 
```

而且您也不需要使用如下双引号：

```
$thumbnail = "{$items->thumbnail->sqDefault}"; 
```

这应该只是

```
$thumbnail = $items->thumbnail->sqDefault; 
```

# objective-c - 来自同一文件的不同 md5 总和

> ID：12742095
> 
> 赞同：4
> 
> 时间：2012-10-05T08:06:42.210
> 
> 标签：objective-c, ios, xcode, md5

我正在从 iphone 画廊的视频文件中计算 md5 总和。每次我选择同一个文件时，它都有不同的 md5 总和。我还检查了以字节为单位的数据长度，它保持不变。所以我的问题是——为什么？这是我尝试制作的多种方法中的一种代码。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{   
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if ([mediaType isEqualToString:@"public.movie"])
    {
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        videoData = [NSData dataWithContentsOfURL:videoURL];
        [videoData retain];
        NSLog(@"VIDEO DATA MD5: %@", [videoData md5]);
        NSLog(@"VIDEO DATA LEN: %d", videoData.length);
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

[MD5方法的实现](http://mobiledevelopertips.com/core-services/create-md5-hash-from-nsstring-nsdata-or-file.html)：

```
#import <CommonCrypto/CommonDigest.h>

@implementation NSData(MD5)

- (NSString*)MD5
{
  // Create byte array of unsigned chars
  unsigned char md5Buffer[CC_MD5_DIGEST_LENGTH];

  // Create 16 byte MD5 hash value, store in buffer
  CC_MD5(self.bytes, self.length, md5Buffer);

  // Convert unsigned char buffer to NSString of hex values
  NSMutableString *output = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];
  for(int i = 0; i < CC_MD5_DIGEST_LENGTH; i++) 
    [output appendFormat:@"%02x",md5Buffer[i]];

  return output;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-19T02:11:04.220

我可以确认这种行为。无论选择何种散列函数（我尝试过 MD5、SHA1 和 SHA256），都会发生这种情况。

问题似乎是`NSData`。`NSData`我从**完全相同的文件**创建两个实例，然后使用`[data1 isEqualTo:data2]`它返回 true。但是，通过`CC_SHA1`散列算法运行它们会为每个返回不同的散列。

要解决此问题，请删除`NSData`. 相反，使用较低级别的 C API 打开文件。这是 C 语言中的一个示例。请注意“创建”约定——您负责在`char*`完成后释放返回的缓冲区。使用这种方法每次都会产生一个相同的哈希值。

```
char* _Nullable createBufferWithContentsOfFileAndReportLength(NSString* _Nonnull fileToScan, long* _Nullable length)
{
    char const *pathToFile = [fileToScan cStringUsingEncoding:NSUTF8StringEncoding];

    FILE *file = fopen(pathToFile, "r");
    if (file == NULL) {
        NSLog(@"Unable to open file: %@", fileToScan);
        return NULL;
    }

    //
    //  Get the file length.
    //  'fileLength' will be the number of bytes in the file. It will not include a null terminator or EOF. Some UTF8 characters require more than one byte, so we
    //  can't guarantee that fileLength is also the number of characters.
    //  NOTE: We don't use the fseek()/ftell()/rewind approach because it's not secure. See CERT FIO19-C advisory for details.
    //
    int fd = fileno(file);
    if (fd < 0) {
        NSLog(@"Unable to get a file descriptor for: %@", fileToScan);
        fclose(file);
        return NULL;
    }
    struct stat statBuffer;
    if (fstat(fd, &statBuffer) == -1) {
        NSLog(@"Unable to retrieve stats about this file: %@", fileToScan);
        fclose(file);
        return NULL;
    }
    long fileLength = statBuffer.st_size;

    char *buffer = malloc(sizeof(char) * (fileLength + 1));     // enough memory to read the entire file, plus a spot for the null terminator
    if (buffer == NULL) {
        NSLog(@"Unable to allocate memory for: %@", fileToScan);
        fclose(file);
        return NULL;
    }

    fread(buffer, fileLength, sizeof(char), file);
    buffer[fileLength] = '\0';                              // No +1; this is zero-indexed. If fileLength is 5 characters, the 5th slot in the array needs to be the null terminator.
    fclose(file);

    if (length != NULL) {
        *length = fileLength + 1;
    }

    return buffer;
} 
```

# eclipse - 如何进入 Eclipse 中的核心 java 类方法？

> ID：12742097
> 
> 赞同：6
> 
> 时间：2012-10-05T08:06:48.163
> 
> 标签：eclipse, debugging, java

嗨，我将在 Java 中进行更多研究，所以我想看看程序是如何在核心类中执行的。例如，我想知道`String.chatAt()`是如何实现的，所以我设置了断点并尝试进入调试模式。但是我失败了，我在第二行设置了 bp 程序命中它，我用 step into 它仍然继续到第三行。

```
String a = "1231231241241";
char b = a.charAt(0);
System.out.println(b); 
```

我认为它应该进入源并显示“找不到源”，然后给我一个附加源文件的机会，对吗？但是为什么进不去呢？我只能使用`ctrl+right`单击方法进入源并附加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:10:41.440

可能是您的 Eclipse 未设置为使用 JDK 运行，它可能改为使用 JRE 运行。
检查[此链接](http://www.avajava.com/tutorials/lessons/how-do-i-view-and-debug-jdk-source-code-in-eclipse.html)。
另外，我可能会建议您尝试使用[Maven](http://maven.apache.org/)来管理您的 Java 项目，当您掌握它时，它会让生活变得更加轻松。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T13:31:52.273

很可能，您已激活“分步过滤”功能。

调试时，当调试器进入您并不真正感兴趣的内部结构的琐碎类时，有时会有点烦人。因此，您可以配置“步骤过滤器”。作为步骤过滤器添加的类或包将被“Step into”操作忽略。

如果你想配置哪些类/包应该包含在步骤过滤器中，你可以去：
`Window --> Preferences --> Java --> Debug --> Step Filtering`
我的猜测是你在`java.*`那里定义了一个包过滤器，这意味着调试器将永远不会进入一个包中以开头的任何类“爪哇”。如果您希望能够进入，请取消选中此包过滤器`java.lang.String`

或者，如果您想完全激活/停用步进过滤，您可以通过单击`Use step filtering` 调试视图中的按钮来执行此操作，如下所示：

![切换步骤过滤](../Images/6aac2d340254e25473f6ddee6a8ac299.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T08:12:46.183

为了能够查看您在项目中使用的库代码，您应该通过附加源代码和 JavaDoc 来配置构建路径。

[源查找](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdebug%2Fref-editsourcelookup.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:26:30.123

好像您没有设置“源附件”。转到首选项 -> Java -> 已安装的 JRE。选择您使用的 JRE 并单击“编辑”，然后通过选择 jar 并单击“源附件”将源附件设置为 jdk 附带的 src.zip :)。您可以通过 shift-click 选择它们同时对所有 jar 执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-28T18:10:27.800

例如，在这段**System.out.println("test")**代码中，如果您想进入 System 类，只需单击 System 并单击 F3，如果您尚未附加源代码，您将被重定向到附加源代码。只需附上jdk的src文件夹

# java - 将 google guice 应用于方法依赖项

> ID：12742099
> 
> 赞同：0
> 
> 时间：2012-10-05T08:07:03.623
> 
> 标签：java, guice

考虑以下 servlet 代码：

```
public class AddDevice extends JsonServlet {
    private static final long serialVersionUID = 1L;

    @Override
    protected void doGet(final JsonServletRequest request,
            final JsonServletResponse response) throws ServletException,
            IOException {
        try {
            final DeviceEntity device = new DeviceEntity();

            device.type =
                    FleetManagerDatabaseHelper
                            .deviceTypesAccessor()
                            .queryForId(Integer.valueOf(
                                    request.getParameter(DeviceTypeEntity._ID)));

            device.sn = request.getParameter(DeviceEntity._SN);
            device.status = Long.valueOf(0);

            FleetManagerDatabaseHelper.devicesAccessor().create(device);
        }
        catch (final SQLException e) {
            throw new ServletException("device already exists");
        }
    }
} 
```

此代码取决于 DeviceEntity 和 FleetManagerDatabaseHelper 类。现在，我想为它编写一个测试，检查创建的实体是否填充了正确的类型、sn 和状态值。为此，我可以创建一个 FleetManagerDatabaseHelperMockup 类。

您将如何在此处应用 Google Guice（或其他东西）并进行最少的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:28:16.623

您的第一步是设计依赖注入——避免构造函数和静态方法，而是采用您需要的实例。看起来这些类型是`Provider<DeviceEntity>`、`DevicesAccessor`和`DeviceTypesAccessor`。

`Provider`是[一个非常简单的 Guice 接口](http://code.google.com/p/google-guice/wiki/InjectingProviders)，它通过单个无参数方法提供其类型参数中的任何类的实例`get()`。如果你已经绑定`Foo`，Guice 会自动知道如何绑定`Provider<Foo>`。如果您的实例很昂贵，或者如果您在 servlet 的整个生命周期中需要多个实例（就像您所做的那样），这将非常有用。

重构依赖注入后，您的类将如下所示：

```
public class AddDevice extends JsonServlet {
  private static final long serialVersionUID = 1L;

  private final Provider<DeviceEntity> deviceEntityProvider;
  private final DevicesAccessor devicesAccessor;
  private final DeviceTypesAccessor deviceTypesAccessor;

  @Inject
  public AddDevice(Provider<DeviceEntity> deviceEntityProvider,
      DevicesAccessor devicesAccessor,
      DeviceTypesAccessor deviceTypesAccessor>) {
    this.deviceEntityProvider = deviceEntityProvider;
    this.devicesAccessor = devicesAccessor;
    this.deviceTypesAccessor = deviceTypesAccessor;
  }

  @Override
  protected void doGet(final JsonServletRequest request,
      final JsonServletResponse response) throws ServletException,
      IOException {
    try {
      final DeviceEntity device = deviceEntityProvider.get();

      device.type = deviceTypesAccessor.queryForId(
          Integer.valueOf(request.getParameter(DeviceTypeEntity._ID)));
      device.sn = request.getParameter(DeviceEntity._SN)
      device.status = Long.valueOf(0);

      devicesAccessor.create(device);
    } catch (final SQLException e) {
      throw new ServletException("device already exists");
    }
  }
} 
```

此时，通过传入一个跟踪它返回的实例的 Provider 以及一个模拟 DevicesAccessor 和一个模拟 DeviceTypesAccessor 来编写测试非常容易。（我推荐[Mockito](http://code.google.com/p/mockito/)。）如果您编写自己的 Provider 接口并删除`@Inject`，您甚至不需要使用 Guice；在您的测试中，您可以继续使用该构造函数，但您希望使用如下构造函数来满足 Java EE：

```
public AddDevice() {
  this(new NewDeviceEntityProvider(),
      FleetManagerDatabaseHelper.deviceTypesAccessor(),
      FleetManagerDatabaseHelper.devicesAccessor());
}

private class NewDeviceEntityProvider implements Provider<DeviceEntity> {
  @Override public DeviceEntity get() {
    return new DeviceEntity();
  }
} 
```

但是，如果您确实想使用 Guice 删除该样板，只需编写一个 Guice `Module`。您的模块需要将 DeviceTypesAccessor 和 DevicesAccessor 绑定到 FleetManagerDatabaseHelper 将返回的实例；Guice 会看到它有一个无参数的构造函数，并且`DeviceEntity`能够自动注入。（如果您希望我扩展它的外观，请发表评论。）`DeviceEntity``Provider<DeviceEntity>``Module`

希望这可以帮助！

# java - NoClassDefFoundError休眠标准导出jar

> ID：12742102
> 
> 赞同：1
> 
> 时间：2012-10-05T08:07:28.803
> 
> 标签：java, hibernate, export, manifest

我正在尝试导出一个使用休眠的 java 独立类。这是一个非常简单的读取/插入过程。我被这个错误困住了

```
C:\Users\Admin\Desktop>java -jar ImportDatiMeteo2.jar
Exception in thread "main" java.lang.NoClassDefFoundError: org/hibernate/criteri
on/Criterion
        at openplan.openergy.standalone.ImportDati.main(ImportDati.java:24)
Caused by: java.lang.ClassNotFoundException: org.hibernate.criterion.Criterion
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 1 more 
```

我在想这可能是一个清单文件问题，所以我检查了。我觉得没问题。

```
Manifest-Version: 1.0
Class-Path: lib/antlr-2.7.6rc1.jar lib/asm-attrs.jar lib/asm.jar 
 lib/c3p0-0.8.5.2.jar lib/cglib-2.1.3.jar lib/cleanimports.jar 
 lib/commons-collections-2.1.1.jar lib/commons-logging-1.0.4.jar lib/concurrent-1.3.2.jar
 lib/connector.jar lib/dom4j-1.6.1.jar lib/ehcache-1.1.jar lib/hibernate3.jar
 lib/jaas.jar lib/jacc-1_0-fr.jar lib/jaxen-1.1-beta-7.jar
 lib/jdbc2_0-stdext.jar lib/jgroups-2.2.7.jar lib/jta.jar lib/log4j-1.2.11.jar
 lib/log4j-1.2.9.jar lib/oscache-2.1.jar lib/proxool-0.8.3.jar
 lib/swarmcache-1.0rc2.jar lib/xerces-2.6.2.jar lib/xml-apis.jar  
Created-By: 1.6.0_21 (Sun Microsystems Inc.)
Main-Class: openplan.openergy.standalone.ImportDati 
```

在我的 Eclipse 中，所有项目都正常工作，有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:13:01.427

当您从命令行运行它时，您需要在类路径中添加这些库：

```
C:\> java -classpath <referenced-jars> -jar ImportDatiMeteo2.jar 
```

> 在 myEclipse 中，所有项目都正常工作，有人知道问题出在哪里吗？

--> 因为 Eclipse 会处理您的类路径并在您的类路径中添加库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:46:41.053

请检查`Library handling`Eclipse 导出对话框中的选项。在我这边，它可以与`Extract required libraries into generated JAR`选择的休眠一起正常工作。

# c# - 如何在 GridControl 中最适合（所有列）

> ID：12742105
> 
> 赞同：1
> 
> 时间：2012-10-05T08:07:39.713
> 
> 标签：c#, devexpress, gridcontrol

加载表单时如何最适合网格控件中的所有列。当我右键单击网格控件的标题时，我确实有一个如下图所示的按钮，但与此相反，我希望在加载表单时自动触发此事件。我不想通过右键单击网格控件的标题并单击“最适合（所有列）”按钮以最适合所有列来执行此操作。 ![在此处输入图像描述](../Images/701c8cd8a40442de30e66c172efd7f98.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:30:31.750

我就是这样做的。

```
if (view is GridView)
{
   // auto best fit...
   (view as GridView).BestFitMaxRowCount = 5000;   // just to avoid to many compares
   (view as GridView).BestFitColumns();
   foreach (GridColumn item in (view as GridView).Columns) // reduce the width of very wide columns
   {
      item.Width = (item.Width > 1000) ? 1000 : item.Width;
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T17:28:29.810

以下代码 BestFit All Columns 前提是所有列的 FixedWidth 设置为 False

```
GridView.BestFitColumns(); 
```

# llvm - LLVM中的Union Type是如何派生的

> ID：12742109
> 
> 赞同：5
> 
> 时间：2012-10-05T08:07:52.657
> 
> 标签：llvm, unions

```
union u{
 char ch[41];
 int b[10];  
}un; 
```

LLVM 编译为此

```
%union.u = type { [10 x i32], [4 x i8] } 
```

和这个

```
union un{
  struct s{
    int a;
    float f;
    double d;
  }st;

  int intArr[10];
}uno; 
```

编译为此

```
%union.un = type { %struct.s, [24 x i8] }
%struct.s = type { i32, float, double } 
```

任何人都可以解释联合类型是如何派生的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T06:06:31.960

第一个成员只是联合中最对齐的成员（如果有多个这样的成员，它会任意选择一个），并附加一个 i8 数组以使其大小正确。

# c# - @Value 不工作

> ID：12742110
> 
> 赞同：0
> 
> 时间：2012-10-05T08:07:55.067
> 
> 标签：c#, asp.net, asp.net-mvc, razor

我正在使用 mvc 编辑器功能，但似乎 @something 不起作用。我不知道为什么。

```
@Html.EditorFor(model => model.Password, new { @Value = "xxx" }) 
```

这采用模型值而不是“xxx”。

非常感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:09:45.190

您不需要在 Value 前面加上 @。因为你已经在 Html 前面有了它。删除它，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:22:54.723

您必须删除第二个@。如果你希望你的价值来自模型，你必须写这样的东西，

```
@Html.EditorFor(model => model.Password, new { value = Model.Password}) 
```

在任何一种情况下，您都必须在值之前删除第二个 @

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:16:46.067

`@Value`适用于`TextBoxFor`但不是`EditorFor`（因为它是通用的......）。

# spring - 弹簧绑定的语法使用标签

> ID：12742114
> 
> 赞同：0
> 
> 时间：2012-10-05T08:08:12.243
> 
> 标签：spring, jsp, spring-mvc, jsp-tags

为了绑定普通文本框，我们可以将代码放置为：

```
<spring:bind path="ImageId">

                    <input type="text"  name="${status.expression}" value="${status.value}" id="imageId"  />

</spring:bind> 
```

但是如果输入类型是文件，那么绑定的语法是什么？`${status.expression}`和的位置是`${status.value}`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:17:39.750

我认为这是不可能的，因为 HTML 规范出于安全目的阻止了文件上传控件的设置（想象添加一个带有一些关键文件的隐藏预设）

# jsp - netbeans中的Ejb Home界面

> ID：12742115
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:08:17.793
> 
> 标签：jsp, netbeans, ejb, ejb-3.0

我是 EJB 新手，我正在使用 Netbean IDE。我能够创建会话 bean 远程接口但无法创建 Home 接口，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:17:43.720

Well, if you're able to create remote interface, so I'm just curious why you are not able to create local interface.

It is as simple as it is, your local interface should look like this:

```
@Local
public interface MyLocalBean {
   void someMethod();
} 
```

Annotated your interface with `@Local` annotation from `javax.ejb` package and here you go, you have local (home) interface.

# ios - 应用内购买拒绝和新 IPA

> ID：12742118
> 
> 赞同：0
> 
> 时间：2012-10-05T08:08:34.347
> 
> 标签：ios, in-app-purchase

我正在为一个客户使用应用内购买的 iOS 应用程序，我已经向他提交了 .ipa，他想要执行提交过程。申请被拒绝。以下来自苹果的消息

来自苹果。缺少 IAP

我们无法完成对您应用的审核，因为您的一项或多项应用内购买尚未提交审核。

请务必采取行动并提交您的应用内购买并在 iTunes Connect 中上传新的二进制文件。在 iTunes Connect 开发人员指南中了解有关提交应用内购买以供审核的更多信息。

一旦您提交了应用内购买并上传了新的二进制文件，我们就可以继续您的审核。

我的问题是我应该创建一个新的 .ipa 并将其发送给我的客户，然后他可以将应用内购买设置为“等待审核”还是应该使用旧的 .ipa ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:17:05.707

您的客户必须确保他正确设置了 IAP，准备好进行审核，然后将它们正确地包含在他尝试上传到 iTunesConnect 的**新应用程序版本中。**

# design-patterns - 缓存模式

> ID：12742122
> 
> 赞同：1
> 
> 时间：2012-10-05T08:09:05.580
> 
> 标签：design-patterns, caching

如果我必须创建一个 Web 服务来提供对字典的访问，我想最好不要在每个请求上触发 SQL 查询，而是将先前的结果保存在内存中并仅在没有条目时访问数据库要求到现在。

但这样一来，我的字典就会增加，并以内存中的完整 SQL 表结束。

我正在根据每个条目的使用频率寻找一种字典的清洁模式。但是“最后访问时间”不是一个好方法，也不是命中数，因为它会随着时间的推移而增长，并且不能反映我的字典条目的平均当前使用情况。

有没有办法知道要丢弃哪些条目以尽可能多地避免数据库访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:11:52.170

最常见的是“LRU”，它代表“最近最少使用”。这是您所指的“最后访问时间”，在实践中效果很好。

维基百科有很多不同策略的例子，也许你可以找到一个适合你的： [http ://en.wikipedia.org/wiki/Cache_algorithms#Examples](http://en.wikipedia.org/wiki/Cache_algorithms#Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:23:45.907

“我的字典将增加并以内存中的完整 SQL 表结束” - 你如何在内存中定义完整的 SQL 表。您可以定义固定的内存大小吗？如果是，那么您可能会创建一个固定大小的优先级队列。弹出的第一个元素应该是最不常被点击的元素，您可以通过使用 Comparable/Comparator Interface 来做到这一点。当队列已满并且您必须插入传入元素时，只需触发 queue.pop() 然后插入传入元素。这样你就可以继续清洁最不常用的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:14:41.940

有许多开源产品正好解决了这个问题。对于高负载站点，我对[memcached](http://memcached.org/)和[redis](http://redis.io/)有很好的经验。

# twitter-bootstrap - 引导缩略图调整大小 - li 元素的奇怪行为

> ID：12742123
> 
> 赞同：0
> 
> 时间：2012-10-05T08:09:06.237
> 
> 标签：twitter-bootstrap, thumbnails

嘿，我将干净的引导程序粘贴到我的主题文件夹中，但缩略图调整大小有奇怪的问题。
`li`调整大小奇怪：

![http://i49.tinypic.com/muwl83.png](../Images/8655a991f50dfa89ce15812f223827a0.png)

看看`li`元素发生了什么 - 图像大小正确调整，但`li`宽度为 100%。

此问题仅出现在手机等小屏幕上。iPad 分辨率工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:19:34.270

我在使用默认引导程序的移动版本上遇到了同样的问题，我做了一些小技巧。

```
 @media (max-width: 480px) {
   .thumbnail {
      display: block;
      padding: 4px;
      line-height: 20px;
      border: 1px solid #ddd;
      width: 200px;
      height: 100px;
      margin-left: auto;
      margin-right: auto;
   }
} 
```

# java - 在 Ubuntu 12.04 上构建 OpenJDK7

> ID：12742128
> 
> 赞同：0
> 
> 时间：2012-10-05T08:09:33.440
> 
> 标签：java, build, ubuntu-12.04, openjdk

我已按照所有推荐的步骤在我的 Ubuntu 12.04 实例上构建 openJDK7（[openJDK 构建示例](http://gleamynode.net/articles/2296/)），但在 Java 热点编译中仍然失败，并出现给定错误：

```
In file included from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/prims/methodHandles.hpp:32:0,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/ci/ciMethod.hpp:33,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/code/debugInfoRec.hpp:30,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/ci/ciEnv.hpp:31,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/ci/ciConstant.hpp:29,
             from /home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/precompiled.hpp:36:

/home/ubuntu/openjdk-build-sandbox/openJDK7/hotspot/src/share/vm/runtime/interfaceSupport.hpp:430:0: error: "__LEAF" redefined [-Werror]
/usr/include/x86_64-linux-gnu/sys/cdefs.h:44:0: note: this is the location of the previous definition
cc1plus: all warnings being treated as errors 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:16:12.057

这是一个已知错误：[https](https://bugs.launchpad.net/ubuntu/+source/openjdk-7/+bug/935346) ://bugs.launchpad.net/ubuntu/+source/openjdk-7/+bug/935346 （包括修复）。

# iphone - 指南 2.16 下的 iPhone 应用程序拒绝

> ID：12742129
> 
> 赞同：2
> 
> 时间：2012-10-05T08:09:40.973
> 
> 标签：iphone, appstore-approval

这是我的应用第二次因为 GPS 背景键而被拒绝。这是我正在使用的代码：

```
-(void)stopGPS{
[self.locationManagerAll stopUpdatingLocation];
self.locationManagerAll.delegate = nil;
locationManagerAll = nil;
self.cloop = 1;

NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setValue:[NSNumber numberWithBool:NO] forKey:@"UpdateLocation"];
[prefs setValue:[NSNumber numberWithInt:0] forKey:@"updationTime"];
[prefs synchronize];
[set.gpsOnOff setOn:NO];
[set.settingsTable reloadData];
[self stopThread];
}
-(void)startGPS{

if ([CLLocationManager locationServicesEnabled]){
    if(self.locationManagerAll == nil){
        self.locationManagerAll = [[CLLocationManager alloc] init];
        self.locationManagerAll.delegate = self;
    }
    self.locationManagerAll.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    self.locationManagerAll.distanceFilter = kCLDistanceFilterNone;
    [self.locationManagerAll startUpdatingLocation];

}else {
    [set.gpsOnOff setOn:NO];
    [set.settingsTable reloadData];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled" 
                                                    message:@"To re-enable, please go to   Settings and turn on Location Service for this app." 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles:nil];
    [alert show];
    [alert release]; 
}
} 
```

以上这些函数用于启动或停止 GPS 定位，以下是 GPS 定位的实现：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
if ([oldLocation.timestamp timeIntervalSinceNow] < - 5) return;
if (newLocation.horizontalAccuracy > 5.0) return;
if (newLocation.coordinate.latitude == oldLocation.coordinate.latitude && newLocation.coordinate.longitude == oldLocation.coordinate.longitude) return;
NSString *currentLatitude = [[NSString alloc] 
                             initWithFormat:@"%f", 
                             newLocation.coordinate.latitude];
NSString *currentLongitude = [[NSString alloc] 
                              initWithFormat:@"%f",
                              newLocation.coordinate.longitude];
[prefs setValue:currentLatitude forKey:@"UpdateLocationLati"];
[prefs setValue:currentLongitude forKey:@"UpdateLocationLongi"];
[prefs synchronize];
[currentLatitude release];
[currentLongitude release];
if (self.cloop == 1) {
    /*UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Current location saved." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
     [alert show];
     [alert release]; */

    self.cloop = 0;
    [prefs setValue:[NSNumber numberWithInt:60] forKey:@"updationTime"];
    [prefs setValue:[NSNumber numberWithBool:YES] forKey:@"UpdateLocation"];
    [prefs synchronize];
    [set.gpsOnOff setOn:YES];
    [set.settingsTable reloadData];
    [self startThread];
}
}
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error{
if ([error code] != kCLErrorLocationUnknown) {
    [self stopGPS];
    UIAlertView *alert = [[UIAlertView alloc] init];
    [alert setTitle:@"Location"];
    [alert setMessage:@"Unable to get current location"];
    [alert setDelegate:self.set];
    [alert addButtonWithTitle:@"Cancel"];
    [alert addButtonWithTitle:@"Retry"];
    [alert show];
    [alert release];

}
} 
```

我还使用了一个计时器线程，它每秒更新一次服务器上的位置。当应用程序进入后台时计时器停止，我正在使用此代码来处理此问题：

```
- (void)applicationDidEnterBackground:(UIApplication *)application{
/*
 Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.*/
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4
    if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
        UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance

        __block UIBackgroundTaskIdentifier background_task; //Create a task object
        background_task = [application beginBackgroundTaskWithExpirationHandler: ^{
            [application endBackgroundTask:background_task]; 
            //Tell the system that we are done with the tasks
            background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
            //System will be shutting down the app at any point in time now
        }];
        //Background tasks require you to use asyncrous tasks
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            //Perform your tasks that your application requires                
            //I do what i need to do here.... synchronously...                
            NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
            if ([[prefs objectForKey:@"updationTime"] intValue] > 0 && [[prefs objectForKey:@"UpdateLocation"] boolValue]) {
                self.backgroundTimer = [NSTimer timerWithTimeInterval:[[prefs objectForKey:@"updationTime"] intValue] target:self selector:@selector(backgroundTriggerTimer) userInfo:nil repeats:YES];
                NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
                [runLoop addTimer:backgroundTimer forMode:NSRunLoopCommonModes];
                [runLoop run];
            }
            [application endBackgroundTask:background_task]; 
            //End the task so the system knows that you are done with what you need to perform
            background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
        });
    }else if (![[UIDevice currentDevice] isMultitaskingSupported]) {
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        if ([[prefs objectForKey:@"UpdateLocation"] boolValue]){
            [self stopGPS];
        }
    }
}else if (![[UIDevice currentDevice] isMultitaskingSupported]) {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    if ([[prefs objectForKey:@"UpdateLocation"] boolValue]){
        [self stopGPS];
    }
}
} 
```

这是我正在使用的线程代码：

```
-(void)startThread
{
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
if ([[prefs objectForKey:@"UpdateLocation"] boolValue]) {
    self.updateLocation = [[NSThread alloc] initWithTarget:self selector:@selector(setUpTimerThread) object:nil];
    [self.updateLocation start];
}
}
-(void)stopThread{
[self.updateLocation cancel];
updateLocation = nil;
[self.gpsTimer invalidate];
}
-(void)setUpTimerThread
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

if ([[prefs objectForKey:@"updationTime"] intValue] > 0) {
    self.gpsTimer = [NSTimer timerWithTimeInterval:[[prefs objectForKey:@"updationTime"] intValue] target:self selector:@selector(triggerTimer) userInfo:nil repeats:YES];
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
    [runLoop addTimer:gpsTimer forMode:NSRunLoopCommonModes];
    [runLoop run];
}
[pool release];
}
-(void)triggerTimer
{
NSLog(@"***Timer Called after seconds**");
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *location = [[[NSString alloc] initWithFormat:@"%f_%f",[[prefs objectForKey:@"UpdateLocationLati"] doubleValue], [[prefs objectForKey:@"UpdateLocationLongi"] doubleValue]] autorelease];
NSString *urlGen = [[[NSString alloc] initWithFormat:@"%@%d/%@",[prefs objectForKey:@"update_user_location"],[[prefs objectForKey:@"USERID"] intValue], location] autorelease];
NSLog(@"urlGen: %@", urlGen);
NSString *rt = [JSONModel stringWithUrl:urlGen];
if (self.alertLoop == 1) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"GPS location has been sent. This alert message will only prompt you once." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    self.alertLoop = 0;
}
NSLog(@"UPDATE LOCATION : %d", [rt intValue]);
} 
```

我完全糊涂了。我不知道我是否错过了什么。任何机构都可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:14:20.030

看起来您并没有错过什么，但 2.16 被拒绝的可能原因之一是 iTunesConnect 中应用程序元的应用程序描述中没有 GPS 电池警告 - “继续使用 GPS 可能会缩短电池寿命”或类似的东西那。

# iphone - 从仅横向视图返回到纵向应用程序

> ID：12742134
> 
> 赞同：0
> 
> 时间：2012-10-05T08:10:04.853
> 
> 标签：iphone, ios, video, streaming, orientation

我有一个只能在纵向模式下工作的应用程序，但是，有一个视图需要同时支持纵向和横向模式。每当我从这个视图返回时，应用程序的其余部分就会一团糟。

需要支持两个方向的视图包含用于播放实时流的 webview。

简单的设置 shouldAutorotateToInterfaceOrientation 不起作用。呈现模态视图控制器的技巧也没有。删除和插入根视图的技巧也不起作用。

我害怕使用 [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait] （实际上有效），因为它是私有 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:18:32.743

我有一个应用程序可以在纵向上运行，只有一个带有全屏照片的视图支持横向。所以我以模态方式在我的 FullscreenViewController.m 中呈现这个全屏视图

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return ([[UIApplication sharedApplication] statusBarOrientation]);
} 
```

希望这会有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:20:30.833

您可以使用`[[UIDevice currentDevice] setOrientation:orientation]`in`viewWillAppear:`或`viewDidAppear:`强制应用旋转到所需的方向。但是，这是私人电话，不确定 Apple 是否会批准您的应用程序 :)（我的应用程序已获得批准）。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:00:53.363

实际上，这里提到的删除和插入窗口视图的第一个视图的方法确实有效！ [仅 iOS 纵向应用程序从 UIWebview youtube 以横向返回](https://stackoverflow.com/questions/9666877/ios-portrait-only-app-returns-from-uiwebview-youtube-in-landscape)

我只需要出于某种原因不要在窗口子视图中要求第一个视图。我需要自己提供根视图。

所以我的解决方案是在支持两个方向的视图控制器中实现以下方法：

```
-(void)viewWillAppear:(BOOL)animated
{
    m_b_avoid_landscape_orinetation = NO;

    [super viewWillAppear:animated];
}

-(void)viewWillDisappear:(BOOL)animated
{
    m_b_avoid_landscape_orinetation = YES;

    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    [[self getTabBar].view removeFromSuperview];
    [window addSubview:[self getTabBar].view];

    [super viewWillDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
{
    if (m_b_avoid_landscape_orinetation)
        return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
    else
        return YES;
} 
```

[self getTabBar] 提供了我的自定义标签栏，它作为窗口子视图中的第一个视图。

**编辑**因此，对于 iOS 6，它不再起作用了。我使用了插入和删除模态对话框的解决方案，如其他地方提到的新的supportedInterfaceOrientations 方法。

```
-(void)goBack
{
    m_b_avoid_landscpae_orinetation = YES;

    UIViewController *viewController = [[UIViewController alloc] init];
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    [window.rootViewController presentViewController:viewController animated:NO completion:^{
        [viewController dismissModalViewControllerAnimated:NO];
    }];

    [self.navigationController popViewControllerAnimated:YES];
}

-(NSUInteger)supportedInterfaceOrientations
{
    if (m_b_avoid_landscpae_orinetation)
        return UIInterfaceOrientationMaskPortrait;

    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T20:57:55.303

```
//
//  ViewController.h
//  CustomNavigationController
//
//  Created by Durul Dalkanat on 11/05/15.
//  Copyright (c) 2015 Durul Dalkanat. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

- (IBAction)showLandscapeViewButtonClicked:(id)sender;

@end

//
//  ViewController.m
//  CustomNavigationController
//
//  Created by Durul Dalkanat on 11/05/15.
//  Copyright (c) 2015 Durul Dalkanat. All rights reserved.
//

#import "ViewController.h"
#import "LandscapeView.h"
#import "CustomNavigationControllerViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
  [super viewDidLoad];
  // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning {
  [super didReceiveMemoryWarning];
  // Dispose of any resources that can be recreated.
}

- (IBAction)showLandscapeViewButtonClicked:(id)sender {

  LandscapeView *landscape = [[LandscapeView alloc]initWithNibName:@"LandscapeView" bundle:nil];
  CustomNavigationControllerViewController *nav = [[CustomNavigationControllerViewController alloc]initWithRootViewController:landscape];
  nav.navigationBarHidden = true;
  [self presentViewController:nav animated:YES completion:^{

  }];

}

#pragma mark handeling rotation

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
  return UIInterfaceOrientationPortrait;
}
- (BOOL)shouldAutorotate
{
  return NO;
}
- (NSUInteger)supportedInterfaceOrientations
{
  BOOL atLeastIOS6 = [[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0;
  if(atLeastIOS6)
  {
    return UIInterfaceOrientationMaskPortrait;
  }
  else{
    return UIInterfaceOrientationPortrait;
  }
}

@end

And Insert a New ViewController with Xib. After please change freeform.

//
//  LandscapeView.h
//  CustomNavigationController
//
//  Created by Durul Dalkanat on 11/05/15.
//  Copyright (c) 2015 Durul Dalkanat. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface LandscapeView : UIViewController

@end
//
//  LandscapeView.m
//  CustomNavigationController
//
//  Created by Durul Dalkanat on 11/05/15.
//  Copyright (c) 2015 Durul Dalkanat. All rights reserved.
//

#import "LandscapeView.h"

@interface LandscapeView ()

@end

@implementation LandscapeView

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*

#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end

//
//  CustomNavigationControllerViewController.m
//
//
//  Created by Durul Dalkanat
//

#import <UIKit/UIKit.h>

@interface CustomNavigationControllerViewController : UINavigationController

@end

//
//  CustomNavigationControllerViewController.m
//
//
//  Created by Durul Dalkanat
//

#import "CustomNavigationControllerViewController.h"

@interface CustomNavigationControllerViewController ()

@end

@implementation CustomNavigationControllerViewController

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;

}

@end 
```

# delphi - Delphi 7：如何获得2个地址之间的距离

> ID：12742136
> 
> 赞同：1
> 
> 时间：2012-10-05T08:10:09.590
> 
> 标签：delphi, maps, delphi-7, distance

我正在为一家（假）快递公司编写一个德尔福程序作为一个项目。我需要的是收件人和快递员位置之间的距离。所以我可以计算出应该使用哪种运输方式。

如何做到这一点？通过谷歌地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:54:40.610

您需要使用[谷歌距离矩阵服务](https://developers.google.com/maps/documentation/javascript/distancematrix)

看看[这个问题](https://stackoverflow.com/questions/10843029/google-maps-non-web-access)有关如何使用它的详细信息

# magento - 在 Magento 中过滤网格

> ID：12742140
> 
> 赞同：1
> 
> 时间：2012-10-05T08:10:36.387
> 
> 标签：magento, filter, grid, adminhtml

我在 magento 中创建了一个自定义网格，显示保存的视频 url 及其工作。但我只想显示`urlid`例如在哪里的记录`3`。这是我的`_prepareCollection`功能

```
protected function _prepareCollection()
{
    // Get and set the collection for the grid
    $collection = Mage::getResourceModel('drecomm_productvideo/video_collection');
    //what should i put in here, addFieldtoSelect?
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

我的网格扩展自该类`Mage_Adminhtml_Block_Widget_Grid`中没有功能。`addFieldToFilter`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:40:43.960

首先，如果您想为您的集合创建一个永久过滤器（这意味着您将无法从网格视图中删除它），您应该使用`addFieldToFilter`您的集合对象。这个方法不是`grid`类的一部分，它是集合类的一部分。

```
$collection = Mage::getResourceModel('drecomm_productvideo/video_collection')
    ->addFieldToFilter('urlid', 3); 
```

现在，如果您只想为您的集合添加一个*默认*过滤器（这意味着它将从一开始就应用它，但您将能够重置它并查看所有条目），您应该使用`setDefaultFilter()`网格块的方法。

```
protected function _construct()
{
    parent::_construct();

    //... your code
    $this->setDefaultFilter(array('urlid' => 3));
} 
```

# c++ - OpenGL 计算着色器调用

> ID：12742142
> 
> 赞同：6
> 
> 时间：2012-10-05T08:10:56.840
> 
> 标签：c++, opengl, gpgpu, compute-shader

我有一个与新计算着色器相关的问题。我目前正在研究粒子系统。我将所有粒子存储在着色器存储缓冲区中，以便在计算着色器中访问它们。然后我派出一个一维工作组。

```
#define WORK_GROUP_SIZE 128
_shaderManager->useProgram("computeProg");
glDispatchCompute((_numParticles/WORK_GROUP_SIZE), 1, 1);
glMemoryBarrier(GL_SHADER_STORAGE_BARRIER_BIT); 
```

我的计算着色器：

```
#version 430
struct particle{
         vec4 currentPos;
         vec4 oldPos;
};

layout(std430, binding=0) buffer particles{
         struct particle p[];
};

layout (local_size_x = 128, local_size_y = 1, local_size_z = 1) in;
void main(){
         uint gid = gl_GlobalInvocationID.x;

         p[gid].currentPos.x += 100;
} 
```

但不知何故，并非所有粒子都受到影响。我正在以与此示例中相同的方式执行此操作，但它不起作用。[http://education.siggraph.org/media/conference/S2012_Materials/ComputeShader_6pp.pdf](http://education.siggraph.org/media/conference/S2012_Materials/ComputeShader_6pp.pdf)

编辑：

在我调用 glMemoryBarrier(GL_SHADER_STORAGE_BARRIER_BIT) 之后，我继续这样：

```
_shaderManager->useProgram("shaderProg"); 
glBindBuffer(GL_ARRAY_BUFFER, shaderStorageBufferID); 
glVertexPointer(4,GL_FLOAT,sizeof(glm::vec4), (void*)0);
glEnableClientState(GL_VERTEX_ARRAY); 
glDrawArrays(GL_POINTS, 0, _numParticles); 
glDisableClientState(GL_VERTEX_ARRAY); 
```

那么在这种情况下哪个位适合使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T08:56:21.763

你有你的[障碍](http://www.opengl.org/wiki/GLAPI/glMemoryBarrier)。这是一个常见的问题。

您提供给屏障的位描述了您打算如何*使用写入的数据*，而不是如何写入数据。`GL_SHADER_STORAGE_BARRIER_BIT`仅当您有一些进程通过图像加载/存储（或存储缓冲区/原子计数器）写入缓冲区对象，然后使用存储缓冲区读取该缓冲区对象数据时才适用。

由于您将缓冲区作为顶点属性数组缓冲区读取，因此您应该使用巧妙的标题`GL_VERTEX_ATTRIB_ARRAY_BARRIER_BIT`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:57:41.090

我解决了这个问题。问题只是我派出的工作组的数量。numParticles/WORK_GROUP_SIZE 将被四舍五入，因为这两个变量都是整数。这导致具有不同数量粒子的分派工作组太少。

当我得到 1000 个粒子时，只有 1000/128 = 7 个工作组被调度。每个工作组的大小为 128。这意味着我得到 7*128 = 896 个线程，因此 104 个粒子根本不会移动。由于 numParticles%128 的范围可能在 0...128 之间，我刚刚又派出了一个工作组：

```
glDispatchCompute((_numParticles/WORK_GROUP_SIZE)+1, 1, 1); 
```

从现在开始，每一个粒子都会移动。:)

# email - 假邮件检测在 google、yahoo、hotmail 中失败

> ID：12742145
> 
> 赞同：2
> 
> 时间：2012-10-05T08:10:59.727
> 
> 标签：email, gmail, hotmail

垃圾邮件检测中使用的参数是什么？我的意思是可以从一些 fakemailserver.com 服务器向 gmail 发送电子邮件，然后邮件直接进入收件箱，我在 Goole、Yahoo 和 Hotmail 上进行了测试。从免费 smtp 服务器发送的来自 xyz@yahoo.com 的假邮件直接进入了 gmail 收件箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:20:48.660

这取决于垃圾邮件过滤器。使用的因素包括地址、源 IP、主题、文本内容、类似消息的数量、内容的格式和对外部 HTTP 资源的引用的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T09:06:10.393

Gmail、Yahoo 邮件和所有其他邮件服务提供商使用他们自己的秘密过滤算法。但是我们可以做的是检测假邮件 - 1.仔细阅读邮件的内容。假邮件有可疑的内容。2.检查邮件的标题部分，如果邮件来自域@gmail.com，那么它应该来自gmail服务器。

# c# - 计算 BinarySearch 的比较次数

> ID：12742151
> 
> 赞同：5
> 
> 时间：2012-10-05T08:11:33.340
> 
> 标签：c#, algorithm, search, count

我的任务是创建两个单独的程序，一个我已经完成的线性搜索程序和一个二分搜索程序。这些程序还必须计算在搜索过程中进行的比较次数。我的线性搜索程序已经计算了比较次数，而我的二进制搜索程序却不能。二进制搜索的代码如下所示：

```
using System;
using System.Collections.Generic;

public class Example
{
public static void Main()
{

    Console.WriteLine("Input number you would like to search for");

    String Look_for = Console.ReadLine();

    int Lookfor;

    int.TryParse(Look_for, out Lookfor);

    {
        List<int> numbers = new List<int>();

        numbers.Add(1); 
        numbers.Add(2); 
        numbers.Add(3); 
        numbers.Add(4); 
        numbers.Add(5); 
        numbers.Add(6); 
        numbers.Add(7); 
        numbers.Add(8); 

        Console.WriteLine();
        foreach (int number in numbers)
        {
            Console.WriteLine(number);
        }

        int answer = numbers.BinarySearch(Lookfor);

        Console.WriteLine("The numbers was found at:");

        Console.WriteLine(answer);

    }
 }
} 
```

如果有人能告诉我如何修改它以计算比较，将不胜感激。

非常感谢，马修。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:19:51.907

实现一个[`IComparer<int>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)计算比较的：

```
private class CountComparer : IComparer<int> {

  public int Count { get; private set; }

  public CountComparer() {
    Count = 0;
  }

  public int Compare(int x, int y) {
    Count++;
    return x.CompareTo(y);
  }

} 
```

[然后在需要比较器的重载`BinarySearch`](http://msdn.microsoft.com/en-us/library/ftfdbfx6.aspx)中将其用作比较[器](http://msdn.microsoft.com/en-us/library/ftfdbfx6.aspx)：

```
CountComparer comparer = new CountComparer();
int answer = numbers.BinarySearch(Lookfor, comparer); 
```

然后比较器包含计数：

```
Console.WriteLine("The binary search made {0} comparisons.", comparer.Count); 
```

* * *

奖励：任何可比较类型的通用计数比较器：

```
private class CountComparer<T> : IComparer<T> where T : IComparable<T> {

  public int Count { get; private set; }

  public CountComparer() {
    Count = 0;
  }

  public int Compare(T x, T y) {
    Count++;
    return x.CompareTo(y);
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:17:47.580

您可以编写一个自定义[`IComparer<int>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)来计算它的使用次数，然后在您的搜索方法中使用它。（或者`IEqualityComparer<int>`我想你的线性搜索的自定义。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T08:39:30.097

您可以使用此扩展方法（基于[此答案](https://stackoverflow.com/a/504683/706456)的代码）

```
public static class ListEx
{
    public static Tuple<int, int> BinarySearchWithCount<T>(
        this IList<T> list, T key)
    {
        int min = 0;
        int max = list.Count - 1;
        int counter = 0;

        while (min <= max)
        {
            counter++;
            int mid = (min + max) / 2;
            int comparison = Comparer<T>.Default.Compare(list[mid], key);
            if (comparison == 0)
            {
                return new Tuple<int, int>(mid, counter);
            }
            if (comparison < 0)
            {
                min = mid + 1;
            }
            else
            {
                max = mid - 1;
            }
        }

        return new Tuple<int, int>(~min, counter);
    }
}

//Which returns a tuple with the item and a number of comparisons. 
//Here is how you can use it:

class Program
{
    static void Main(string[] args)
    {
        var numbers = new List<int>();
        numbers.AddRange(Enumerable.Range(0, 100000));

        var answer = numbers.BinarySearchWithCount(2);
        Console.WriteLine("item: " + answer.Item1);   // item: 2
        Console.WriteLine("count: " + answer.Item2);  // count: 15

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:19:15.803

这是某种家庭作业吗？该`List<T>.BinarySearch`方法不提供此类信息。

如果您想要比较次数，您要么必须编写自己的`IComparer`二进制搜索，要么仍然使用 .NET 方法并根据列表的长度和元素的位置计算计数。

# java - IllegalMonitorStateException injava

> ID：12742156
> 
> 赞同：0
> 
> 时间：2012-10-05T08:12:00.943
> 
> 标签：java, multithreading

嗨，我正在尝试使用 Java 套接字编程制作多人游戏。我的服务器正在使用多线程环境。问题是，我希望当两个玩家都连接到服务器时，他们可以继续前进，否则不会......因为这个原因我使用循环运行 2 次并接受来自两个客户端的连接。在循环中我使用线程对象并调用它的等待方法。当循环完成时，我调用 obj.notifyALl 方法，以便当前线程和上一个线程三人应该醒来，他们将开始工作但我得到了这个例外......欢迎任何想法或建议......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:15:44.133

简而言之：您正在等待或通知您尚未同步的对象。

从[Object.wait()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)

> 当前线程必须拥有该对象的监视器。线程释放此监视器的所有权并等待，直到另一个线程通过调用 notify 方法或 notifyAll 方法通知在此对象的监视器上等待的线程唤醒。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。
> 
> 在一个参数版本中，中断和虚假唤醒是可能的，并且应该始终在循环中使用此方法：

```
 synchronized (obj) {
     while (<condition does not hold>)
         obj.wait();
     ... // Perform action appropriate to condition
 } 
```

> IllegalMonitorStateException - 如果当前线程不是对象监视器的所有者。

恕我直言，您可能应该使用[并发库](http://docs.oracle.com/javase/tutorial/essential/concurrency/)而不是等待/通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:14:18.813

线程应该调用`obj.wait()`才能`obj.notifyAll()`工作。它应该从`synchronized`块中调用。

```
synchronized (obj) {
   //While condition is not true wait
} 
```

[Javadoc #IllegalMonitorStateException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalMonitorStateException.html)

> 抛出以指示线程已尝试在对象的监视器上等待，或通知其他线程在对象的监视器上等待而不拥有指定的监视器。

# python - Matplotlib x 轴仅将实际值显示为标签

> ID：12742161
> 
> 赞同：3
> 
> 时间：2012-10-05T08:12:27.827
> 
> 标签：python, matplotlib

我用于 matplotlib 绘图的数据在 x 轴周围分布不均。例如，在下面的示例中，x 轴值为 [0.001, 0.0033, 0.0066, 0.01, 0.033, 0.066, 0.1, 0.33]。是否可以让 x 轴仅在这些特定值处绘制代码和标签，而不是显示 0 到 0.35 之间的偶数范围？

![示例图](../Images/bfd42bc207ee647849b33295a444c0e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:37:48.283

假设您正在使用该`pyplot`界面，您可以使用该`pyplot.xticks`功能将 x 刻度设置为您喜欢的任何内容。所以你可以这样做`pyplot.xticks([0.001, 0.0033, 0.0066, 0.01, 0.033, 0.066, 0.1, 0.33])`。

# gwt - 使用 GWT 拖放图像

> ID：12742171
> 
> 赞同：0
> 
> 时间：2012-10-05T08:13:10.600
> 
> 标签：gwt, drag-and-drop

我知道这个问题遍布互联网，但是我有特定的需求。我的图像至少在 JAVA 代码中是一些对象。我需要拖动的图像来通知另一个图像（我将第一个图像放在上面的那个）执行了这样的操作。

基本上我需要处理拖放操作执行时拖放的图像和图像的实例

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:20:41.697

`gwt-dnd` [虽然我没有尝试过您的特定需求，但我们一直在使用库](http://code.google.com/p/gwt-dnd/)在 GWT 中使用其他小部件类型进行拖放。我希望它也对你有用。

干杯，

# database - 如何在 J2me 中保存批量数据以供离线使用？

> ID：12742176
> 
> 赞同：0
> 
> 时间：2012-10-05T08:13:48.597
> 
> 标签：database, java-me

我正在开发一个 J2ME 应用程序，我想在其中以 DB 的形式将大量数据存储在移动内存中。存储和检索大量数据的最佳方法是什么。所有的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:14:21.417

将其保存在[RMS RecordStore中或使用](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/rms/RecordStore.html)[JSR 75](http://www.jarvana.com/jarvana/view/org/microemu/microemu-jsr-75/2.0.2/microemu-jsr-75-2.0.2-javadoc.jar!/index.html)将其保存到文件中。

# actionscript-3 - 在 actionscript 3 中表示 9999999999999999

> ID：12742177
> 
> 赞同：4
> 
> 时间：2012-10-05T08:13:50.863
> 
> 标签：actionscript-3, numbers

我尝试将 10 ^(16) - 1 存储在一个`Number`变量中：

```
var n:Number = 9999999999999999 
```

但存储的值`n`最终为 10000000000000000 或 10 ^(17)。

如何在动作脚本 3 中表示 10 ^(16) - 1？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T08:30:14.713

您已经用完了 Number 类型的精度功能，因此您必须设计自己的方法来存储具有所需精度的这么大的数字。操作长算术的最常见方法之一是使用字符串作为数据持有者，另一种是使用整数向量，每个位置代表基于 2^32 的系统的“大数字”。鉴于 AS3 的限制，我会说整数向量会更快，尽管使用基于字符串的方法显示长数字会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-08T03:41:55.860

看到“数字”类型可以容纳比您尝试输入的多几个数字，我认为这更像是一个误判。9,999,999,999,999,999 实际上是 10^17 - 1，老实说，我猜你有一些括号错误或者没有完全正确地解析方程，也许你想要的 (10^16) - 1 最终执行为 10^(16 -1)。当有这样的方程式时，我倾向于更加谨慎地犯错，并且有时会放入比我需要的更多的括号。我想我曾经对 AS3 中的操作顺序有过不好的体验，现在在编码时对此感到很强迫。

我知道这个问题已经很老了，但我觉得它可以使用一些澄清。Number 类型可以容纳我认为 18,446,744,073,709,551,616 是 64 位的，正如我在搜索互联网时发现的那样。这也是 20 位数，所以绰绰有余。

# ruby-on-rails - 如何通过多个 has_many :through？

> ID：12742180
> 
> 赞同：0
> 
> 时间：2012-10-05T08:13:53.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through, has-many-polymorphs

我需要访问一个信息，该信息存储了我正在查询的两个关系。

```
class Information < ActiveRecord::Base
  ...
  belongs_to :information_type, polymorphic: true
  ...
end

class InformationTypeOne < ActiveRecord::Base
  ...
  belongs_to :location
  has_one :information, as: :information_type
  ...
end

class InformationTypeTwo < ActiveRecord::Base
  ...
  belongs_to :location
  has_one :information, as: :information_type
  ...
end

class Location < ActiveRecord::Base
   has_many :information_type_ones
   has_many :information_type_twos
end 
```

所以我想做的是找到属于一个位置的所有信息，无论它是什么 InformationType。

最好的情况是`Information.where(location: 'Location A')`

任何人都知道如何实现这一点？

- - 更新 - -

通过添加以下内容，我至少设法获得了属于信息的位置：

`delegate :location, to: :information_type`

如果我现在能以某种方式完成这项工作：

`Information.where(location: 1)`

我会很高兴的。任何人？:)

# code-analysis - TFS 构建中的声纳

> ID：12742183
> 
> 赞同：2
> 
> 时间：2012-10-05T08:14:02.930
> 
> 标签：code-analysis, sonarqube

我想在每次触发构建时将声纳运行器与 TFS 2010 构建集成以进行分析。

如何实现这一点，是否可以与构建并行运行分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:34:47.143

我们使用 Jenkins CI 成功地做到了这一点。

*   首先安装[TFS 客户端](http://download.microsoft.com/download/9/8/7/987D6B7C-F577-4297-8F60-E4B6A9EA4BF9/TEE-CLC-10.0.0.zip)。
*   在 Jenkins 上安装[TFS 插件。](https://wiki.jenkins-ci.org/display/JENKINS/Team+Foundation+Server+Plugin)
*   在 Jenkins 设置上配置 TFS 客户端。例子：`C:\Microsoft\TEE-CLC-10.0.0\tf.cmd`

与并行分析工作得很好。

# c# - 想要从 DataTable Date 列中删除时间

> ID：12742184
> 
> 赞同：2
> 
> 时间：2012-10-05T08:14:05.963
> 
> 标签：c#, c#-4.0, date, datetime, datatable

```
 DataTable dt = TypeConveriontHelper.ConvretExcelToDataTable(SourceAppFilePath);

    string targetPath = BatchFolderPath + @"\" + "TRANSACT.INX";
    StreamWriter wrtr = null;
    wrtr = new StreamWriter(targetPath);
    for (int x = 0; x < dt.Rows.Count; x++)
    {
        string rowString = "";
        for (int y = 0; y < dt.Columns.Count; y++)
        {
            if (y == dt.Columns.Count - 1)
            {
                rowString += "\"" + dt.Rows[x][y].ToString() + "\"";
            }
            else
            {
                rowString += "\"" + dt.Rows[x][y].ToString() + "\"~";
            }
        }           
        rowString = rowString.Replace("\"", String.Empty).Trim();
        wrtr.WriteLine(rowString);

    }
    wrtr.Close();
    wrtr.Dispose(); 
```

数据表返回“日期”列，其中包括时间和日期。但我只需要显示日期。给我一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:16:16.853

```
DateTime dateAndTime = DateTime.Parse(string);
DateTime dateOnly = dateAndTime.Date; 
```

或[DateTime.ToShortDateString](http://msdn.microsoft.com/ru-ru/library/system.datetime.toshortdatestring.aspx)

```
String dateString = dateAndTime.ToShortDateString(); 
```

或[自定义日期和时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
dateAndTime.ToString("MMMM dd, yyyy"); 
```

对于您的代码：

```
 StringBuilder rowString = new StringBuilder();
    int dateTimeColumn = 3;
    for (int y = 0; y < dt.Columns.Count; y++)
    {
        string cellValue = dt.Rows[x][y].ToString();
        if(y == dateTimeColumn)
        {
            DateTime dateAndTime = DateTime.Parse(cellValue);
            cellValue = dateAndTime.ToShortDateString();
        }
        rowString.Append(cellValue);
        if (y != dt.Columns.Count - 1)
        {
            rowString.Append("~");
        }
    }
    wrtr.WriteLine(rowString.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:21:42.060

```
rowString += "\"" + DateTime.Parse(dt.Rows[x][y]).ToString("dd/MM/yyyy") + "\""; 
```

或完全实现，如：

```
DataTable dt = TypeConveriontHelper.ConvretExcelToDataTable(SourceAppFilePath);

        string targetPath = BatchFolderPath + @"\" + "TRANSACT.INX";
        StreamWriter wrtr = null;
        wrtr = new StreamWriter(targetPath);
        for (int x = 0; x < dt.Rows.Count; x++)
        {
            string rowString = "";
            for (int y = 0; y < dt.Columns.Count; y++)
            {
                string dateTimeString = dt.Rows[x][y].ToString();
                DateTime dateTime;

                if (DateTime.TryParse(dateTimeString, out dateTime))
                {
                    string formattedDate = dateTime.ToString("dd/MM/yyyy");

                    if (y == dt.Columns.Count - 1)
                    {
                        rowString += "\"" + formattedDate + "\"";
                    }
                    else
                    {
                        rowString += "\"" + formattedDate + "\"~";
                    }
                }
            }
            rowString = rowString.Replace("\"", String.Empty).Trim();
            wrtr.WriteLine(rowString);

        }
        wrtr.Close();
        wrtr.Dispose(); 
```

就像米歇尔说的，请参阅[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)以获取完整参考

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:04:31.450

我已经这样做了，不管里面的类型是什么`DataTable`，我也用 LINQ 完成了它，因为你使代码更短了。无法确定您是否放入了分隔符，如果不是，则只需将其替换为`@"\"`string.empty 或空格 - 它基本上只是将列值合并为一个字符串以用于输出。

这是我使用的：

```
 var dt = new DataTable();
  dt.Columns.Add("SomeDateField");
  dt.Columns.Add("OtherField");
  dt.Columns.Add("AnotherOtherField");
  dt.Rows.Add(DateTime.Now, "Test", "Test");

  var rowStrings = dt.Rows.Cast<DataRow>().Select(x => String.Join(@"\", dt.Columns.Cast<DataColumn>().Select(y =>
  {
    DateTime dateOut = new DateTime();
    if (DateTime.TryParse(x[y.ColumnName].ToString(), out dateOut))
      return dateOut.ToShortDateString();
    else
      return x[y.ColumnName];
  }).ToArray())).ToList(); 
```

如果列值可以解析为字符串，则使用字符串的“ToShortDate”。

我也倾向于使用“Using”而不是手动处置作者，即使有异常，它也会为您调用处置。

```
 using (StreamWriter wrtr = new StreamWriter(""))
  {
    foreach (string rowString in rowStrings)
    {
      wrtr.WriteLine(rowString);
    }
  } 
```

# android - 安装apk“打开”和“完成”按钮显示后，点击打开按钮它没有添加类别作为启动器

> ID：12742185
> 
> 赞同：7
> 
> 时间：2012-10-05T08:14:07.597
> 
> 标签：android, android-intent

Android 问题：此问题仅在安装并单击打开按钮后第一次出现，在使用启动器图标启动应用程序后，问题将永远不会出现。

*   重现问题的步骤。

    1.  安装任何 .apk 文件
    2.  安装后，您将获得两个按钮“打开”和“完成”。
    3.  Onclick 打开按钮它正在打开/启动应用程序。
    4.  现在在您的应用程序中导航并转到任何其他屏幕，例如第二个屏幕，第三个屏幕。
    5.  现在，按 Home 并将应用程序置于后台（意味着进入暂停状态）。
    6.  现在转到应用程序列表单击同一应用程序的启动器图标。
*   发生了什么。

    1.  它是从第一个屏幕的起点启动相同的应用程序。
    2.  它必须在第三个屏幕上恢复正在运行的应用程序。
    3.  现在按返回并从第二次启动应用程序的第一个屏幕出来。
    4.  它显示第一次运行应用程序的第三个屏幕。

我已经向您解释了安装后的一般行为并使用打开按钮启动应用程序。在我的应用程序中，它创建了 2 次启动应用程序的不一致状态。

*   你认为正确的行为应该是什么。

    1.  申请必须恢复。
    2.  应用程序不得处于不一致的状态。

我有一些日志..

*   单击“打开”按钮日志：

10-04 21:45:28.703：INFO/ActivityManager(243)：开始活动：Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.test/.TestnewversionActivity } 来自 pid 15146。

“请参阅以上意图中未添加任何类别”

*   单击“启动器”图标的日志：

10-04 21:46:46.109: INFO/ActivityManager(243): 开始活动: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.test/ .TestnewversionActivity } 来自 pid 428

“请参阅上面意图中添加的类别”。

如果有人告诉我如何解决此问题或告诉我如何在“打开”按钮单击时将类别添加为 android.intent.category.LAUNCHER，那么问题将解决。

我试图在应用程序启动、oncreate 和许多地方添加类别。intent.addCategory("android.intent.category.LAUNCHER"); 还尝试使用 IntentFilter、PackageManager。

这个问题存在于每部 Android 手机中。

我在 HTC-SENSE Android 版本 2.3.3 上记录了日志

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T06:43:00.877

请将代码添加到 onCreate

```
if (isTaskRoot()) {
    final Intent intent = getIntent();
    final String intentAction = intent.getAction();
    if (!intent.hasCategory(Intent.CATEGORY_LAUNCHER) &&
            intentAction != null && intentAction.equals(Intent.ACTION_MAIN)) {
        finish();
        System.exit(0);
    }
} 
```

# php - PHP 条件语句内部/嵌套在单引号中

> ID：12742186
> 
> 赞同：1
> 
> 时间：2012-10-05T08:14:11.877
> 
> 标签：php, conditional-operator

对此提前道歉。但我难住了。

如果我有单引号 '' 并在这些引号内放置一个 PHP 值。

```
<?php $MyStatement = 'I want to echo '. $Value . ' now'; ?> 
```

那也行，

但是如果我想在引号内做一个条件语句..

```
//Generated Config
header("Content-Type: text/plain");

$GeneratedConf ='if ($SomeProfile['SOMEVALUE_ENABLE']!=NULL) {
SOMEVALUEXML="'. $SomeProfile['SOMEVALUE_ENABLE'] .'"
}';

echo $GeneratedConf; 
```

因此，如果 $SOMEVALUE_ENABLE==NULL 我想隐藏 { } 运算符中的任何内容..

抱歉更新晚了

道歉并感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:15:54.997

您可以使用三元运算符：

```
<?php $MyStatement = 'I want to echo '. (!empty($Value) ? $Value : 'Empty') . ' now'; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:15:51.673

试试这个方法：

```
<?php $MyStatement = 'I want to echo '. is_null($Value) ? 'Empty' : $Value . ' now'; ?> 
```

# regex - Mongohub 正则表达式错误

> ID：12742187
> 
> 赞同：1
> 
> 时间：2012-10-05T08:14:18.017
> 
> 标签：regex, mongodb

只是一个简短的问题：使用rockmongo，我可以执行如下查询

{name: /test/i} 它将在名称字段中找到所有包含“test”的结果。

Mongohub 只是告诉我：当前解析器上下文中的意外字符 - "{"name": /test/}"

mongohub 不支持正则表达式吗？我在[https://github.com/fotonauts/MongoHub-Mac上使用叉子](https://github.com/fotonauts/MongoHub-Mac)

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:58:01.017

您可以使用正则表达式，但必须使用严格的 json 格式：[http ://www.mongodb.org/display/DOCS/Mongo+Extended+JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)

到目前为止，这是原始分叉的唯一回归。我希望有足够的时间来实现tengen格式。

见：[https ://github.com/fotonauts/MongoHub-Mac/issues/46](https://github.com/fotonauts/MongoHub-Mac/issues/46)

# android - onResume 后加载过程中触发的 OnClick 按钮事件

> ID：12742190
> 
> 赞同：0
> 
> 时间：2012-10-05T08:14:22.360
> 
> 标签：android, button, click, clickable, onresume

我的一个 Android 应用程序遇到了一个奇怪的问题。我会解释自己：

*   我有一个 SplashScreen（有点）这是一项活动。基本上，它会停留 1 秒，然后在此时间之后调用处理程序。这个处理程序启动 my `HomeActivity`，它扩展了`RoboActivity`（Roboguice API）。

*   在这次发布期间，我在堆栈跟踪中看到 Roboguice 正在初始化，我的班级也是如此。因此启动`HomeActivity`（在 SplashScreen 等待 1 秒之后）需要 1-2 秒。

*   所以基本上，这就是我遇到的问题。在这 1-2 秒的加载过程中，SplashScreen 是最前面显示的，并且`HomeActivity`仅在这 2 秒后出现。如果用户在这几秒钟内点击屏幕，`HomeActivity`就会触发事件。这意味着如果您单击 SplashScreen 并等待，当`HomeActivity`将显示时，您将听到单击声音，并且位于用户单击位置的按钮将触发。

我觉得这对用户来说非常令人不安。所以，此刻，我试图：

*   通过添加停用 xml 布局中的按钮

    ```
     android:enabled="false"
                android:clickable="false" 
    ```

*   通过添加 onResume 函数重新激活按钮：

    ```
    button.setEnabled(true);
    button.setClickable(true); 
    ```

*   我在堆栈跟踪中看到`OnClickListener`在`onResume`. 所以此时，按钮被重新启用，所以它点击了。我也尝试过 postOnResume，它也不起作用。

您是否经历过与我现在相同的行为？知道如何解决吗？

# jquery - 跳过文档。准备在浏览器后退按钮时被调用

> ID：12742193
> 
> 赞同：0
> 
> 时间：2012-10-05T08:14:32.890
> 
> 标签：jquery, asp.net, internet-explorer, webforms

有没有一种方法可以限制 document.ready 功能在从浏览器后退按钮加载页面时。

显然该页面是从浏览器缓存中加载的。

请建议任何解决方法。

注意：我尝试使用 Javascript.NavationMode = 'fast' 来跳过这个。正如文档所说，它仅适用于 Opera。我需要在 IE+ 中解决这个问题。

# user-interface - 不关注可编辑的 SelectOneMenue

> ID：12742194
> 
> 赞同：1
> 
> 时间：2012-10-05T08:14:35.030
> 
> 标签：user-interface, jsf-2, primefaces

我的表单中有一个 selectOneMenu。该组件是可编辑的。如果我将焦点放在组件的 selectOneMenu 上，`<tab>`则该组件是不可编辑的。我必须单击框以更改值。下拉列表也不是通过输入事件打开的。我必须点击下拉按钮...这里有一些代码片段：

```
 <p:selectOneMenu value="#{hoursView.selectedHourlyRate}"
                    id="hourlyRate" editable="true" scrollHeight="250"
                    validatorMessage="#{msg.valHourlyRate}"
                    converterMessage="#{msg.conHourlyRate}"
                    converter="doubleConverter" style="width:50%">
                    <f:selectItems value="#{hoursView.hourlyRateList}" id="test"
                        var="hourlyRate" itemLabel="#{hourlyRate.valueOut()}"
                        itemValue="#{hourlyRate.value}" />
                </p:selectOneMenu> 
```

如何通过关注 ? 来编辑组件的值`<tab>`？

# sql-server-2005 - 将 2 个一列语句组合成 1 个两列语句

> ID：12742197
> 
> 赞同：0
> 
> 时间：2012-10-05T08:14:43.603
> 
> 标签：sql-server-2005

假设我有两个选择语句（这只是一个示例。数据也可以是文本）：

```
 S1        S2
| 1 |    | a |
| 2 |    | b |  
| 3 |    | c |
| 4 |    | d |
| 5 |    | e | 
```

我怎样才能将它们“粘合”到一个语句中，但每列都像这样：

```
 S1         S2          S3
| 1 |     | a |     | 1   a |
| 2 |     | b |     | 2   b |  
| 3 |  +  | c |  =  | 3   c |  
| 4 |     | d |     | 4   d |
| 5 |     | e |     | 5   e | 
```

如果这是可能的，它会抵抗这样的 null 或空语句吗？：

```
 S1         S2           S3
| 1 |     |NULL|     | 1  NULL|
| 2 |                | 2  NULL|
| 3 |  +          =  | 3  NULL|
| 4 |                | 4  NULL|
| 5 |                | 5  NULL| 
```

这两个语句没有键，但在行上确实属于彼此（除非其中一个为空）。

我知道这可以使用 while 循环、游标和临时表来完成。问题是我需要它快速并且不要使用那么多资源，因为这个语句会被触发很多。也许你们中的一些人知道一个巧妙的技巧来实现这一点，或者有一个如何解决它的建议？

**这是做什么用的？：** 这个解决方案的用途是一个日志系统，它需要获取触发器表 UPDATED 和 INSERTED，将每一行转换为 XML 部分并将它们放入带有 XML 值或 null 的临时表中（取决于对该特定表的更改操作）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:12:55.053

根据您的其他评论，也许这样的事情可能会有所帮助。

```
Select Row_Number() Over(Order By S1.Value) as LeftRow, S1.Value as LeftValue Into #TempTable
Select LeftRow, LeftValue, RightRow, RightValue From #TempTable
Inner Join (Select Row_Number() Over(Order By S2.Value) as RightRow, S2.Value as RightValue) rightTable
On LeftRow = RightRow
Drop Table #TempTable 
```

也许 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:21:12.483

希望我理解这个问题，但如果你想将两列合并为一列，你可以使用

```
SELECT CONCAT(ColumnA, ColumnB) AS ColumnZ
FROM Table 
```

不确定 sql 2005 是否支持 CONCAT 方法，但如果不支持，则需要使用诸如 (expression + expression) 之类的语法

# asp.net-mvc - 从 Azure 网站取消发布 MVC 4 项目

> ID：12742201
> 
> 赞同：4
> 
> 时间：2012-10-05T08:15:21.060
> 
> 标签：asp.net-mvc, asp.net-mvc-4, azure, azure-web-app-service

我在 Windows Azure 上创建了一个新网站，并在那里使用 Internet 应用程序模板部署了一个标准 MVC 4 项目。我想我可能在尝试解决另一个问题的 NuGet 包上犯了一些错误。我创建了一个新项目并使用相同的发布配置文件发布了它。现在我得到这个错误：

*找到与名为“Home”的控制器匹配的多种类型。如果为该请求提供服务的路由 ( `'{controller}/{action}/{id}'`) 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

'Home' 的请求找到了以下匹配的控制器： MyCoolWebsite.Controllers.HomeController NewWebsite.Controllers.HomeController *

显然，现在这两个项目并存，这造成了可以理解的问题。如何在不删除并在 Azure 上重新创建整个网站的情况下转储旧项目？我已经搜索了整个门户，即使是旧版本，但没有找到任何东西。据我所知，甚至无法从管理门户实际查看网站上安装的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T19:56:50.410

从 Visual Studio 发布时，您可以选择在发布前删除目标文件。如果您还没有弄清楚这一点，应该可以帮助您。:)

![对话框](../Images/50164688bec8888d75cc3c0c41f9139f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T18:48:49.480

除了发布之外，还有多种方法可以管理 Azure Web App 上的内容，包括 FTP、Kudu 和各种 API。

最简单的方法可能是通过 Kudu。转到`https://<yourwebapp>.scm.azurewebsites.net`并打开一个调试控制台（wither CMD 或 Powershell 都可以）。您可以`rmdir`从那里使用类似的命令，或者您可以浏览浏览器窗口中显示的文件树，然后单击要删除的文件夹上的删除图标。

[![酷都截图](../Images/c0c172158e8f73d50a9c9b048b3883e9.png)](https://i.stack.imgur.com/irpoQ.png)

# opencv - 从 CvHoughCircles 获取更多信息

> ID：12742202
> 
> 赞同：1
> 
> 时间：2012-10-05T08:15:23.373
> 
> 标签：opencv, geometry, hough-transform, opencvdotnet

我正在使用 OpenCV 的[HoughCircles](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=houghcircles#houghcircles)函数。

除了圆心和半径的有序列表之外，还有什么方法可以获得有关结果的更多信息？

我想得到每个圆圈的分数，也许还有霍夫空间矩阵本身

我正在使用 openCvdotnet C# 包装器，但我并不反对修改包装器。

我尝试实现自己的霍夫梯度圆变换，但结果不如原生 openCV 函数强大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:24:09.317

很简单，不，没有。我过去需要这样的东西，并决定实现我自己的（基于免费提供的 matlab 示例之一）比修改 opencv 代码更简单。

# c# - c#泛型类定义解释

> ID：12742203
> 
> 赞同：2
> 
> 时间：2012-10-05T08:15:24.870
> 
> 标签：c#, .net, generics

有人可以解释以下类声明。我被分配去理解一段代码并解释它的各个部分。我无法理解此类声明。看看有没有人可以帮忙。

```
class AnimalWorld<T> : IAnimalWorld where T : IContinentFactory, new()
{
    private IHerbivore _herbivore;
    private ICarnivore _carnivore;
    private T _factory;

    /// <summary>
    /// Contructor of Animalworld
    /// </summary>
    public AnimalWorld()
    {
        // Create new continent factory
        _factory = new T();

        // Factory creates carnivores and herbivores
        _carnivore = _factory.CreateCarnivore();
        _herbivore = _factory.CreateHerbivore();
    }

    /// <summary>
    /// Runs the foodchain, that is, carnivores are eating herbivores.
    /// </summary>
    public void RunFoodChain()
    {
        _carnivore.Eat(_herbivore);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:21:03.070

> T : IContinentFactory, new()

1.  T 必须从 IContinentFactory 继承
2.  T 必须有无参数构造函数。

更多信息：http `new()`: [//msdn.microsoft.com/en-us/library/sd2w2ew5.aspx](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:19:11.167

首先，AnimalWorld 是一个泛型类（属于 T），它应该实现 IAnimalWorld 接口。

“where”关键字之后是对 T 类型的约束，表示 T 必须实现 IContintentFactory 并具有不需要参数的公共构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:17:34.277

它说 T 必须是 IContinentFactory 类型并且必须有一个空的构造函数。

该代码的好处是：

*   new()：你可以访问构造函数并在你的类中实例化一个新的 T。
*   IContinentFactory：使用 T 对象时，您可以访问在该接口中声明的所有元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:04:39.773

这个类代表一个动物世界。这个世界被分成几大洲（由`T`通用参数表示）。

当您创建一个 new`AnimalWorld`时，该类要求您通过提供一个`T`具有空构造函数（`new()`约束）的类（泛型参数）并实现接口`IContinentFactory`（the `IContinentFactory`）来指定您所在的大陆。

让我们举个例子：`AnimalWorld<Europe> = new AnimalWorld<Europe>()`如果`Europe`定义如下：

```
class Europe : IContinentFactory
{
  // Don't forget the new() constructor
  Europe()
  {
     //...//
  }

  // Here IContinentFactory implementation 
  public IHerbivore CreateHerbivore()
  {
    //...//
  }

  // Here IContinentFactory implementation 
  public ICarnivore CreateCarnivore()
  {
    //...//
  }
} 
```

除此之外，`AnimalWorld<T>`从接口派生`IAnimalWorld`

# android - opengl ES OES vs EXT？

> ID：12742208
> 
> 赞同：6
> 
> 时间：2012-10-05T08:15:35.007
> 
> 标签：android, opengl-es, android-manifest, opengl-es-2.0, google-play

我对 OES 和 EXT 的含义有点困惑？我知道 EXT（openGL 扩展）是特定于显卡供应商的，它可能在手机上受支持，也许不支持。但是 OES 呢？它是否与 EXT 相同，或者如果手机支持特定版本的 openGL ES（比如 2.0），是否支持这些？

假设我想在 android 商店中过滤掉不支持某些 OES 扩展的手机，我如何在清单中指定它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:30:47.317

所有扩展都是“图形卡供应商特定的”，因为它们可能会或可能不会被任何特定硬件支持。OES 扩展很像桌面 GL 领域中的 ARB 扩展：它们是由负责维护 OpenGL ES 的 Khronos 小组编写的扩展。EXT 扩展由一个或多个供应商编写，他们认为该功能适用​​于他们自己以外的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:09:11.113

您可能无法在 android 清单中进行 OES 扩展。正如 Nicol 指出的那样，扩展是特定于图形供应商的，您必须使用[glGetString(GL_EXTENSIONS)](http://www.khronos.org/opengles/sdk/1.1/docs/man/glGetString.xml)函数在运行时查询扩展的存在，该函数将为您提供硬件支持的以空格分隔的 OES 扩展字符串。

# asp.net - ASP.Net 自定义 dll 适用于 Win 7 但不适用于 Win Server 2008

> ID：12742209
> 
> 赞同：0
> 
> 时间：2012-10-05T08:15:36.103
> 
> 标签：asp.net, dll, windows-7, windows-server-2008, dllimport

我正在开发一个新项目，它使用旧项目中的旧 dll 文件来加密密码。您将一个字符串传递给一个函数，它会返回一个加密的字符串。

现在，当我在我的 Win 7 机器上进行本地测试时，它可以正常工作，但是当我将它放在我的 Win Server 2008 上时，它就不起作用了。起初它在尝试在 64 位上运行 32 位时出错，但我只是在 IIS 应用程序池中将“启用 32 位应用程序”设置为 true，然后它停止给出错误，但现在它得到了到它必须返回加密字符串的行，它只是坐在那里直到它给出超时：“连接已重置”。但是没有黄屏死机。

我使用了一个程序“dependency walker”来查看 dll 使用什么，从那里我可以看到我引用了使用 kernerlBase.dll 的 kernerl32.dll（这个 kernelBase.dll 存在于我的 Win 7 机器上，但不在 Win Server 上） . 以防万一我在重建旧项目后尝试从 dll 中返回一些静态字符串，例如“错误”，但没有任何返回。仍然超时，似乎它甚至没有转到我用来加密字符串的函数。

我用这个...

```
[DllImport("MD5CriptUnix.dll")]
public static extern string md5_crypt(string pass, string salt); 
```

...导入 dll 并使用它，它再次在我的机器上工作，我认为它在服务器上工作，因为没有显示错误

# javascript - Javascript 跟踪事件

> ID：12742214
> 
> 赞同：0
> 
> 时间：2012-10-05T08:15:54.460
> 
> 标签：javascript, html, events, dom

有没有办法跟踪在给定时刻触发的事件？

我正在考虑像[Visual Event 2这样的脚本](http://www.sprymedia.co.uk/article/Visual+Event+2)

我想在日志中记录所有事件及其链接功能。

提前致谢。

# graph-algorithm - 无向图中最大可能的 3 团（三角形）数的公式

> ID：12742218
> 
> 赞同：2
> 
> 时间：2012-10-05T08:16:17.633
> 
> 标签：graph-algorithm

正如问题所述。我似乎无法弄清楚与纸笔结果相对应的公式。我正在寻找一个公式来给我在无向图中最大可能的三角形数量。

三角形定义为路径长度为 3 的节点的任何连接，它们形成一个循环。例如，如果我有一个 1<->2<->3<->1 的图是一个三角形（<-> 是一个无向连接）。如果不清楚什么是三角形，第 2 页的顶部有一个图形显示在此上下文中三角形是什么[http://arxiv.org/pdf/1202.5230v1.pdf](http://arxiv.org/pdf/1202.5230v1.pdf)。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:21:40.340

C(3,n) 应该可以。基本上，您需要整个图形节点集中的 3 个组合。

编辑：由于 omegamath 想要获利，因此链接现在已关闭，我必须进一步解释。C(m,n) 是 N 个不同元素中的 M 个元素的可能组合的数量，并且等于`(N!)/(M!*(N-M)!)`其中`!`是阶乘运算，即`N! = 1*2*3*...*N`。

`C(3,n) = (N*(N-1)*(N-2))/(1*2*3)`

# apache - Apache bench 因高并发用户而变慢

> ID：12742230
> 
> 赞同：1
> 
> 时间：2012-10-05T08:17:06.440
> 
> 标签：apache

当并发用户约为 55 时，我的 apache 似乎变慢了
当我提出这个请求时：
ab -c55 -n1000 "http://office.zensis.com:7999/test"
我得到这个结果：
每秒请求数：50.74 [#/秒]（平均）

像 45 或 65 这样的值比 55 慢是不是
意味着我只能在并发用户约为 55 时才能达到最佳性能？
但我可以看到 CPU 负载低于 10%。
此外，我的服务器配置是这样的：
Intel Xero 2.40 Ghz
8Gb ram

# java - 正则表达式匹配字符串中单引号或双引号之间的单词

> ID：12742232
> 
> 赞同：1
> 
> 时间：2012-10-05T08:17:14.727
> 
> 标签：java, regex

我正在寻找正确的正则表达式来为我提供以下结果：

*   它需要对单/双引号包围的单词进行分组
*   当字符串中没有其他单引号时，它需要继续打印单引号
*   当没有被单引号/双引号包围时 - 按空格分割

我目前有：

```
Pattern pattern = Pattern.compile("[^\\s\"']+|\"([^\"]*)\"|'([^']*)'"); 
```

...但以下示例并不完全有效。谁能帮我解决这个问题？

**例子：**

*   富吧
    *   组1：富
    *   组2：酒吧
    *   描述：空间分割
*   “富吧”
    *   group1: 富吧
    *   描述：被双引号包围，所以分组 foo 和 bar，但不要打印双引号
*   '富吧'
    *   group1: 富吧
    *   描述：同上，但用单引号
*   '富吧
    *   组1：'富
    *   组2：酒吧
    *   描述：按空格分割并保留单引号
*   “'富吧”
    *   group1: '富吧
    *   描述：被双引号包围，所以将 'foo 和 bar 分组并保留单引号
*   富吧'
    *   组1：富
    *   组2：酒吧'
*   富吧”
    *   组1：富
    *   组2：酒吧”
*   “foo bar” “堆栈溢出”
    *   group1: 富吧
    *   group2：堆栈溢出
*   “foo' bar” “堆栈溢出” 你怎么办
    *   group1: foo' 酒吧
    *   group2：堆栈溢出
    *   第三组：如何
    *   组4：做
    *   第五组：你
    *   第六组：做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:51:25.383

我不确定你是否可以在一次`Matcher.match`调用中做到这一点，但你可以通过循环来做到这一点。
这段代码通过`Matcher.find()`重复使用解决了上面提到的所有情况：

```
Pattern pattern = Pattern.compile("\"([^\"]+)\"|'([^']+)'|\\S+");
List<String> testStrings = Arrays.asList("foo bar", "\"foo bar\"","'foo bar'", "'foo bar", "\"'foo bar\"", "foo bar'", "foo bar\"", "\"foo bar\" \"stack overflow\"", "\"foo' bar\" \"stack overflow\" how do you do");
for (String testString : testStrings) {
    int count = 1;
    Matcher matcher = pattern.matcher(testString);
    System.out.format("* %s%n", testString);
    while (matcher.find()) {
        System.out.format("\t* group%d: %s%n", count++, matcher.group(1) == null ? matcher.group(2) == null ? matcher.group() : matcher.group(2) : matcher.group(1));
    }
} 
```

这打印：

```
* foo bar
    * group1: foo
    * group2: bar
* "foo bar"
    * group1: foo bar
* 'foo bar'
    * group1: foo bar
* 'foo bar
    * group1: 'foo
    * group2: bar
* "'foo bar"
    * group1: 'foo bar
* foo bar'
    * group1: foo
    * group2: bar'
* foo bar"
    * group1: foo
    * group2: bar"
* "foo bar" "stack overflow"
    * group1: foo bar
    * group2: stack overflow
* "foo' bar" "stack overflow" how do you do
    * group1: foo' bar
    * group2: stack overflow
    * group3: how
    * group4: do
    * group5: you
    * group6: do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:20:29.950

每当你有配对（让它成为引号或大括号）时，你就会离开正则表达式的领域并进入需要解析器的语法领域。

我会给你[这个问题的最终答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

更新：

多一点解释。

语法通常表示为：

```
construct -> [set of constructs or terminals] 
```

例如，对于引号

```
doblequotedstring := " simplequotedstring "
simplequotedstring := string ' string
                      | string '
                      | ' string
                      | ' 
```

这是一个简单的例子；将有适当的语法示例在互联网上引用。

我为此使用了 aflex 和 ajacc（对于 Ada；在 Java 中存在 jflex 和 jjacc）。您将标识符列表传递给 aflex，生成一个输出，将该输出和语法传递给 ajacc，然后您将获得一个 Ada 解析器。由于我使用它们已经很长时间了，我不知道是否有更简化的解决方案，但基本上它需要相同的输入。

# php - PHP+MongoDB动态查询——添加条件运算符

> ID：12742237
> 
> 赞同：0
> 
> 时间：2012-10-05T08:17:32.447
> 
> 标签：php, mongodb, dynamicquery

我正在使用 mongoDB 中的动态查询，以这种方式使用它们：

```
$query['clicks'] = array('$gt' => 6);
$query['lang'] = "de";

$cursor = $collection->find($query); 
```

这个问题非常简单明了：如何添加“或”条件？例如让“lang”都为“de”或“fr”；

因为现在，Mongo 暗示“clicks”和“lang”之间存在 AND。那么我如何构造点击次数 > 6 && ( lang == 'de' || lang == 'fr' )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:03:52.033

```
 $cond=array();
          $cond=array_merge($cond,array("clicks" => array('$gt' =>6)));
          $cond=array_merge($cond,array("$or" => array(array("lang" =>'de'),array("lang" =>'fr'))));

    $cursor = $collection->find($cond);

----------------------------

    another way is : 
       $cond=array();
          $cond=array_merge($cond,array("clicks" => array('$gt' =>6)));
          $cond=array_merge($cond,array("$in" => array('de','fr')));

    $cursor = $collection->find($cond); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:07:06.697

您可以尝试如下

```
$query['clicks'] = array('$gt' => 6);
$query['$or'] = array(array('lang' => 'de'), array('lang' => 'fr'));
$cursor = $collection->find($query); 
```

如何添加 $in 运算符

```
$query['clicks'] = array('$gt' => 6);
$query['$or'] = array(array('lang' => 'de'), array('lang' => 'fr'));
$query['_id'] = array('$in' => array(new mongoId('506d95bc5c73952c14000002'), new mongoId('506d95bc5c73952c14000003')));

$cursor = $collection->find($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:20:36.233

`$or`很好，但对索引不太友好，尤其是当您开始进入更多样化的范围时。对索引更友好的方法是`$in`：

```
$db->collection->find(array('clicks' => array('$gt' => 6), 
    'lang' => array('$in' => array('fr', 'de')))); 
```

有时这往往会更有效地使用索引。

另请注意，nested`$or`目前不使用索引，但`$or`可以使用多个索引计划，这意味着这样的查询：

```
$db->collection->find(array('clicks' => array('$gt' => 6), '$or' => array(
    array('lang' => 'fr'), arrray('lang' => 'de')
)) 
```

可以使用多个索引，但在这种情况下它是无用的，因为它只遍历一个字段，所以更好用`$in`。

# ios - 保持 UIScrollView 的子视图不受滚动视图内容偏移的影响

> ID：12742240
> 
> 赞同：0
> 
> 时间：2012-10-05T08:17:37.193
> 
> 标签：ios, uiview

我有一个 UIView 作为 UIScrollView 的子视图。UIView 的高度为 50，UIScrollView 的高度为 500。

我想在滚动视图中从 50 滚动到 500，同时将 UIView 的位置锁定在滚动视图的顶部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T01:53:43.133

在 UIView 和 UIScrollView 之外的另一个视图之间添加“固定垂直空间”约束，以在 UIScrollView 滚动时将 UIView 锁定到位。

见这里：[https ://developer.apple.com/library/ios/releasenotes/General/RN-iOSSDK-6_0/index.html](https://developer.apple.com/library/ios/releasenotes/General/RN-iOSSDK-6_0/index.html)

在上面的链接中，查看 UIKit 的注释 -> UIScrollView 的 Autolayout 支持

从 iOS 发行说明中复制粘贴：“请注意，您可以通过在视图和滚动视图子树之外的视图之间创建约束来使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上，例如滚动视图的超级视图”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:29:52.493

您可以根据滚动视图的当前内容偏移量实现子视图的`scrollViewDidScroll:`委托方法并更改子视图的框架。`UIScrollView`

# c# - Transaction 和 TransactionScope 隔离

> ID：12742241
> 
> 赞同：2
> 
> 时间：2012-10-05T08:17:37.977
> 
> 标签：c#, linq, transactions, sql-server-ce

我必须在我的数据库中添加很多信息。添加此信息大约需要 5-7 分钟。我需要添加交易。

我试过这个：

```
try { 
    db.Connection.Open();
    db.Transaction = db.Connection.BeginTransaction(); 
    UpdateTable1();
    UpdateBigTable2();
    ...
    db.Transaction.Commit(); 
} catch {
    db.Transaction.Rollback();  
} 
```

但是当我的数据库正在更新时，我无法读取或使用我的数据库做任何事情。

我试图设置`IsolationLevel`，但没有任何帮助。

我试过这个：

```
using (var ts = new TransactionScope()) {
    UpdateTable1();
    ts.Complete();
} 
```

但程序在 2-3 分钟后崩溃。

这个解决方案也没有帮助：

```
var transactionOptions = new TransactionOptions();
transactionOptions.IsolationLevel = System.Transactions.IsolationLevel.Serializable;
transactionOptions.Timeout = TimeSpan.MaxValue;
using (var ts = new TransactionScope(TransactionScopeOption.Required, transactionOptions))
{
    ...
} 
```

我可以访问我的数据库，当它更新时，如果我设置`TransactionScopeOption.Suppress` 但在这种情况下事务不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:21:56.703

是的，如果您启动一个操作大量记录的事务，并且需要很长时间才能完成，那么直接结果是竞争操作将被阻止。对于“可序列化”事务*尤其*如此，因为它们占用的锁最多（包括键范围锁等）。这是交易的性质；它是 ACID 中的 I。

选项：

*   不要在一笔巨额交易中做所有事情
*   让您的读取操作有意读取*过去*的锁（这是非常双刃剑 - 可以，但可能会导致大问题 - 谨慎处理） - 例如`NOLOCK`或`READ UNCOMMITTED`.
*   在完整的 SQL 服务器（不是 CE）上，尝试使用快照隔离

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:23:29.813

```
using (var trans = new TransactionScope(
 TransactionScopeOption.Required, 
    new TransactionOptions
    {
        IsolationLevel = IsolationLevel.ReadUncommitted
    }
))
{
    // Your LINQ to SQL query goes here where you read some data from DB
} 
```

在更新表（插入、删除或更新）时，它们会被锁定，因此如果要读取尚未提交的数据，则可以使用 Transaction IsolationLevel.ReadUncommitted 来允许脏读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T12:09:39.990

你试过这个吗？

```
transactionOptions.Timeout = TransactionManager.MaximumTimeout; 
```

# android - 在 android 的画布上移动图像（就像 photowonder 应用程序）

> ID：12742243
> 
> 赞同：0
> 
> 时间：2012-10-05T08:17:41.550
> 
> 标签：android

我正在尝试将图像移动到画布上，以便可以将其放置在我喜欢的位置，并且在画布上具有首选尺寸。我现在可以将图像放置在画布上的预定义位置，但我需要控制用户根据需要在画布上移动它。请查看 photowonder 应用程序以清楚地了解我的问题，他们提供了在图像上添加配件的功能，用户可以将配件放置在他们喜欢的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:15:01.620

将您的位置变量放在全局范围内。实现 touchListener 或其他任何东西并更新这些全局变量。在 onDraw 中使用这些位置变量。

# python - 按下按钮时wxpython刷新窗口

> ID：12742245
> 
> 赞同：2
> 
> 时间：2012-10-05T08:17:48.297
> 
> 标签：python, button, wxpython, python-2.7, refresh

我的 Python 程序遇到了一些问题。基本上，它是一个非常非常简单的文件管理器。

我一直试图让它在文件夹之间移动（用户单击一个文件夹，程序刷新显示并显示文件夹的内容）。

我遇到的问题是我似乎无法获得刷新显示的按钮，然后在单击时用新的文件夹和文件填充它。

这是我正在使用的代码，它在 Linux 上。

```
import wx
import fileBrowser

class interface(wx.Frame):

    def __init__(self, parent, id):
        '''(object, int) --> None
        Set up wx python in a frame and displays it and contents defined in this function on the screen.'''

        wx.Frame.__init__(self, parent, id, "Bronto", size = (800, 600))
        panel = wx.Panel(self)
        self.createPanels()
        contents = fileBrowser.print_items("/")
        wx.StaticText(panel, -1, "/", (50, 10))
        col = 50
        row = 50
        for items in contents:
            name       = items
            col, row   = self.makeIcons(panel, (800, 600), name, col, row)

    def makeIcons(self, panel, param, name, col, row):
        '''(object, object) --> None
        Place a button on the window that uses an image as its icon.'''

        pic = wx.Image("folder.png", wx.BITMAP_TYPE_PNG).ConvertToBitmap()
        self.button  = wx.BitmapButton(panel, -1, pic, pos = (col, row))
        wx.StaticText(panel, -1, name, (col + 10, row + 40))
        self.Bind(wx.EVT_BUTTON, self.displayContents, self.button)
        self.button.SetDefault()

        if(col < 600):
            return col + 90, row
        else:
            col = 50
            return col, row + 80

    def createPanels(self):
        '''(object) --> None
        Create and place both menu and status bars on the window.'''

        status     = self.CreateStatusBar()
        menubar    = wx.MenuBar()
        File       = wx.Menu()
        Edit       = wx.Menu()

        menubar.Append(File,"File")
        menubar.Append(Edit, "Edit")
        new = wx.MenuItem(File, 101, '&New\tCtrl+N', 'Creates a new document')
        File.AppendItem(new)
        self.Bind(wx.EVT_MENU, self.NewApplication, id=101)
        self.SetMenuBar(menubar)

    def NewApplication(self, event):
        app = wx.PySimpleApp()
        frame = interface(parent = None, id =1)

        frame.Show()
        app.MainLoop()

    def displayContents(self, event):
        '''(event) --> None
        Display the contents of the folder clicked on'''

        #self.panel.Destroy();
        #self.panel = wx.Panel(self)
        self.Refresh(True)
        contents = fileBrowser.print_items("/home")
        col = 50
        row = 50
        for items in contents:
            name       = items
            wx.Yield()
            col, row   = self.makeIcons(panel, (800, 600), name, col, row)

if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = interface(parent = None, id =1)

    frame.Show()
    app.MainLoop() 
```

这是fileBrower程序（目前我只看文件夹，但我稍后会更改它）

```
import os
import os.path

def print_items(d):
    '''(str) -> NoneType
    Print the list of files and directories in directory d, recursively,
    prefixing each with indentation.'''

    icons = []
    #print out the names of files and subdirectories
    for filename in os.listdir(d):
        subitem = os.path.join(d, filename)
        if os.path.isdir(subitem):
            print filename
            icons.append(filename)

    return icons 
```

@pthonm：我添加了你建议的代码，但它似乎没有用新东西更新它（虽然它确实清除了窗口）

编辑：好的，我几乎让它工作了。我可以使用 self.Refresh(True) 让它显示内容，但它只有在我不使用 self.panel.Destroy() 方法时才有效。那么，关于如何摆脱按钮和文本的任何建议（请参阅 displayContents 方法了解我添加的内容）？

EDIT2：我让它工作。我所做的是，我将它添加到我的 displayContents 方法中。不过，这可能不是最好的方法。

```
def displayContents(self, event):
    '''(event) --> None
    Display the contents of the folder clicked on'''

    self.panel.Destroy();
    self.panel = wx.Panel(self)
    self.createPanels()
    self.Update()
    wx.StaticText(self.panel, -1, location, (50, 10))
    contents = fileBrowser.print_items("/home/gum/Documents")
    col = 50
    row = 50
    for directory,name in contents.iteritems():
        col, row   = self.makeIcons(self.panel, (800, 600), name, col, row) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:37:11.607

我认为问题在于你

*   为每个文件夹创建新面板
*   不要删除旧面板

我建议您将旧面板保存在某处并每次`self.panel`调用。`self.panel.Destroy();self.panel = wx.Panel(self)`

更好的选择是使用`wx.ListCtrl`，捕获`EVT_LIST_ITEM_ACTIVATED`然后删除列表并用项目填充它：

```
__init__:
self.ListCtrl = wx.ListCtrl(self)
self.listCtrl.InsertColumn(0, 'name')
self.Bind(wx.EVT_LIST_ITEM_ACTIVATED, self.OnChangeFolder, self.listCtrl)
self.il = wx.ImageList(16, 16)
self.il.Add(wx.Image("folder.png", wx.BITMAP_TYPE_PNG).ConvertToBitmap())
self.listCtrl.AssignImageList(self.il)
self.folders = fileBrowser.print_items("/home/gum/Documents")
self.UpdateList()
UpdateList:
self.listCtrl.DeleteAllItems()
for index, item in enumerate(self.folders):
    self.listCtrl.Append((item, ))
    self.listCtrl.SetItemImage(index, 0)
    # 0 is the ImageList index, change it for other icons
OnChangeFolder:
self.folders = file.Browser.print_items(self.listCtrl.GetFocusedItem().GetText())
self.UpdateList 
```

顺便说一句，wx 风格表明方法和类也是 CamelCased，只是你知道 :)

# php - 添加单选按钮

> ID：12742250
> 
> 赞同：1
> 
> 时间：2012-10-05T08:18:05.430
> 
> 标签：php, mysql, radio-button

我的电脑老师要我做一个简单的 php mySql 数据库多项选择测验，但现在我被卡住了。我已经制作了 input-form.php。因此，当他进入页面时，他可以输入问题和多项选择答案。到目前为止，我的工作是 input-form.php 和 quiz1.php，它们显示数据库中的内容。我现在需要有关如何使用多项选择答案旁边的单选按钮的帮助，以便学生可以阅读问题并单击正确的答案。在他们阅读并单击那里的选项后，当他们点击提交时，它将向老师发送一封测试电子邮件，其中包含问题和多项选择答案以及他们选择的答案。

测试：

```
What process determines the identity of a user? 
A. Authentication 
B. tt4ert4t 
C. 4tt4t 
D. 4tt4 

Which of the following user account types can create other user accounts? 
A. uyiyuiy 
B. iuyiuiiu 
C. Administrator 
D. uykuykuyikuy 

To which of the following groups does a standard user in Windows 2000 belong by default? (Select two.) 
A. Limited Users 
B. Power Users 
C. Restricted Users 
D. Users 
```

等等 ....

php代码：

```
<?php

// connect to your MySQL database here 
require_once "db_connect.php"; 

// Build the sql command string 
$sqlCommand = "SELECT `question`, `a`, `b`, `c`, `d` FROM `quiz1`"; 
// Execute the query here now 
$query = mysql_query($sqlCommand) or die (mysql_error()); 
// Output the data here using a while loop, the loop will return all members 
while ($row = mysql_fetch_array($query)) { 
// Gather all $row values into local variables for easier usage in output
$question = $row["question"];
$a = $row["a"];
$b = $row["b"];
$c = $row["c"];
$d = $row["d"];

// echo the output to browser 
echo "$question
<br />A. $a 
<br />B. $b 
<br />C. $c
<br />D. $d
<br /><hr />"; 
  } 
 // Free the result set if it is large 
 mysql_free_result($query);  
 // close mysql connection 
 mysql_close(); 

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:21:50.500

单选按钮按名称分组。第一个答案的示例：什么过程确定用户的身份？

```
<p>What process determines the identitiy of a user?</p>
<ol>
    <li><label><input type="radio" name="q1" value="1">Authentication</label></li>
    <li><label><input type="radio" name="q1" value="2">tt4ert4t</label></li>
    <li><label><input type="radio" name="q1" value="3">4tt4t</label></li>
    <li><label><input type="radio" name="q1" value="4">4tt4</label></li>
</ol> 
```

`<label>`当您单击标签本身并选择单选按钮时，拥有该元素会提供很好的免费功能（试试看！）。此外，该`<ol>`元素定义了一个有序列表。

* * *

对于有多个选项的问题，`<input type="checkbox">`应使用 a 而不是`radio`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:20:42.227

您应该对多个答案使用复选框：

```
echo "$question
<br /><input type='checkbox' name='answer[]' value='$a' />A. $a 
<br /><input type='checkbox' name='answer[]' value='$b' />B. $b 
<br /><input type='checkbox' name='answer[]' value='$c' />C. $c
<br /><input type='checkbox' name='answer[]' value='$d' />D. $d
<br /><hr />"; 
```

或多个问题：

```
name='answer[$id][]' // where $id is the id of the question. 
```

在下一页上，您将获得一个`$_POST['answer']`包含所有选定答案的数组。

# javafx-2 - JavaFX：节点失去了它的父节点

> ID：12742251
> 
> 赞同：0
> 
> 时间：2012-10-05T08:18:09.630
> 
> 标签：javafx-2

我正在尝试制作一个棘手的（愚蠢的 mb？）算法来在打开的应用程序窗口之间传递参数。我在做什么：

1.  我有一个带有必要字段的窗格扩展类。这将是“门”。
2.  调用控制器从 FXML 加载节点树，将其作为子节点附加到“门”对象
3.  然后创建并显示一个以“门”为根节点的新场景。
4.  新窗口控制器引用了 FXML 根节点（“门”的直接子节点），他需要做的就是在其上使用 .getParent() 来获取“门”。

但到底是什么！它返回空！我究竟做错了什么？我应该通过 FXMLLoader 设置不同的控制器吗？

将消息流从一个控制器组织到另一个控制器的正确方法是什么？

以下是代码块： 主应用程序类：

```
private void handleMenuVisibility(ActionEvent event) throws IOException
{
    Parent root = FXMLLoader.load(getClass().getResource("/ContextMenus/Visibility.fxml"));
    final AttributedWrapper aw = new AttributedWrapper();
    aw.getChildren().add(root);
    Scene scene = new Scene(aw);
    Stage stage = new Stage();
    stage.setScene(scene);
    stage.show();
} 
```

和调用的窗口控制器：

```
public void initialize(URL url, ResourceBundle rb) {
AttributedWrapper aw = (AttributedWrapper) anchorPane.getParent();
} 
```

*upd：* AttributedWrapper 是一个扩展 javafx.scene.layout.Pane 的类

**主要更新：** 在这里找到一些信息：[如何将在 FXML Controller1 中创建的对象传递给内部 FXML 控件的 Controller2](https://stackoverflow.com/q/9717852/1711975) 我使用我的属性包装器作为 FXML 文件的根节点，通常它可以工作。但是问题仍然存在于调用的控制器初始化中。我从主应用程序控制器发送到调用的参数不可用。功能

```
 public void initialize(URL url, ResourceBundle rb) 
```

恰好在执行 FXMLLoader.load() 时以及在我将数据放入包装器之前开始。

以下是要点： 主应用程序

```
final AttributedWrapper aw = FXMLLoader.load(getClass().getResource("/ContextMenus/Visibility.fxml"));
Scene scene = new Scene(aw);
Stage stage = new Stage();
stage.setScene(scene);
    aw.writeParam("key1", "value1");
    stage.show() 
```

被调用的控制器

```
@FXML private AttributedWrapper aw;
public void initialize(URL url, ResourceBundle rb) {
System.out.println(aw.readParam("key1"));
anchorPane.writeParam("key2", "value2");
} 
```

关闭调用的窗口后，我读取了“key2”参数并且没问题，但是从调用的窗口读取“key1”返回null。

在这里传递参数的正确方法是什么？或者我能做的就是制作静态字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:25:45.500

问题是`public void initialize(URL url, ResourceBundle rb)`在 FXMLLoader 调用期间正在调用该方法：

```
Parent root = FXMLLoader.load(getClass().getResource("/ContextMenus/Visibility.fxml")); 
```

因此您的父母尚未设置。

有几种方法可以解决这个问题：

1.  将初始化逻辑移动到单独的方法中并手动调用它：

    ```
    FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("/ContextMenus/Visibility.fxml"));
    Parent root = fxmlLoader.load();
    controller = (MyController) fxmlLoader.getController();
    final AttributedWrapper aw = new AttributedWrapper();
    aw.getChildren().add(root);
    controller.doMyInit(); 
    ```

2.  使用您的“主要更新”方法，但再次 - 在设置参数后调用自定义初始化。

3.  添加侦听器`anchorPane.parentProperty()`并执行初始化，然后 Parent 变为 not `null`。

    ```
    root.parentProperty().addListener(new ChangeListener<Parent>() {

        @Override
        public void changed(ObservableValue<? extends Parent> ov, Parent oldP, Parent newP) {
            if (newP != null && oldP == null) {
                System.out.println("my parent is " + newP);
            }
        }
    }); 
    ```

# android - setAlpha(int a) 在线程内使用时不起作用

> ID：12742254
> 
> 赞同：2
> 
> 时间：2012-10-05T08:18:35.667
> 
> 标签：android, android-animation, android-ui

我正在尝试使用 setAlpha(int a) 方法更改视图 Alpha，但它没有效果，并且还尝试在相同但相同的结果上执行 alpha 动画！请帮忙。这是代码的一部分..

```
public void run() {
            runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        myImage.setAlpha(1);
                    }
                });

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T08:32:21.497

我不知道您尝试使用哪些值，但该方法采用 0 到 255 之间的值，其中 255 完全不透明，根据[这个答案](https://stackoverflow.com/a/5153891/734079)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T06:10:58.543

尝试这个：

```
myImage.getBackground().setAlpha(100); 
```

# php - 常规数据库——MySql

> ID：12742257
> 
> 赞同：0
> 
> 时间：2012-10-05T08:18:49.857
> 
> 标签：php, mysql, sql

MySql 数据；

```
   ID Fname Lname     
+--------+-------------+------------+
+ 1 + 埃姆雷 + 姓氏 +
+ 2 + 名字 2 + 姓氏 2 +
+ 3 + 姓名 E3 + 姓 E3 +
+ 1980 + nAmE3 + suRNamE3 +
+--------+-------------+------------+

```

我想要：

```
   ID Fname Lname     
+--------+-------------+------------+
+ 1 + 埃姆雷 + 姓氏 +
+ 2 + 姓名 2 + 姓氏 2 +
+ 3 + 姓名 3 + 姓氏 3 +
+ 1980 + 姓名 4 + 姓氏 4 +
+--------+-------------+------------+

```

如何进行编辑过程？- 可以使用 SQL 查询吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:22:09.590

试着模拟一下，

```
SELECT CONCAT(UPPER(SUBSTRING(Fname, 1, 1)), LOWER(SUBSTRING(Fname FROM 2))) AS properFirstName,
       CONCAT(UPPER(SUBSTRING(Lname, 1, 1)), LOWER(SUBSTRING(Lname FROM 2))) AS properLastName
FROM table1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/43d01/1)

```
UPDATE tableName
SET Fname = CONCAT(UPPER(SUBSTRING(Fname, 1, 1)), LOWER(SUBSTRING(Fname FROM 2))),
    LName = CONCAT(UPPER(SUBSTRING(Fname, 1, 1)), LOWER(SUBSTRING(Fname FROM 2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:26:48.497

你可以使用类似的东西：

```
UPDATE table
SET Fname = CONCAT(UCASE(LEFT(Fname, 1)), LCASE(SUBSTRING(Fname, 2))),
    Fname = CONCAT(UCASE(LEFT(Lname, 1)), LCASE(SUBSTRING(Lname, 2))); 
```

这应该更新您的所有价值：

1.  世界将成为世界
2.  帮助将保持帮助
3.  稍后见1 将变为 稍后见1

**我建议您先在备用表上试用它，然后再在主表上使用它**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:40:17.160

检查这是工作。

字符串的第一个字母转大写

更新`table`集`field`= CONCAT(UPPER(LEFT( `field`, 1)), SUBSTRING( `field`, 2))

如果你想让所有其他字符小写：

更新`table`集`field`= CONCAT(UPPER(LEFT( `field`, 1)), LOWER(SUBSTRING( `field`, 2)))

# git - git svn - 我可以同时使用 git 和 svn 吗？git和svn之间不需要交互

> ID：12742263
> 
> 赞同：37
> 
> 时间：2012-10-05T08:19:06.633
> 
> 标签：git, svn

我正在做一个开发项目。

公司正在使用`SVN`，所以对于 main `commit`，`checkout`应该通过`SVN`.

但是，我不喜欢`SVN`并且是`git`用户。因为只有当我认为我的代码很好时，我才会向公司承诺`SVN`，所以我想将其`git`用作我自己的历史记录器。

我不需要使用 git 来做事`SVN`，反之亦然。

我可以同时使用 SVN 和 git 对相同的代码进行版本控制吗？**他们之间没有互动。**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-05T08:27:41.343

您可以使用`git svn clone <SVN repo URL>`. 该代码将作为 git 存储库提供。你可以在那里做你的工作，并随心所欲地进行本地提交。有一个命令行选项可以获得“浅层”签出而不是整个存储库，这通常很有用。我忘记是什么了。

任何时候，你想运行相当于`svn update`, 做一个`git svn rebase`. 这将获取您上次同步后签入 SVN 的新提交，然后将您的更改重新定位到新提示。

当您准备好提交时，请执行`git svn dcommit`. 这会将您所有的新提交一一发送到 svn。您还可以将本地提交压缩为一个，然后通过先执行本地变基然后执行 svn dcommit 来发送。这应该在初始分支上完成（通常`master`）。

您从 subversion 签出然后在 git 本地工作这一事实意味着它们之间存在“交互”，因此您的最后一条语句无效。

# php - dom 将元素保存到字符串

> ID：12742264
> 
> 赞同：0
> 
> 时间：2012-10-05T08:19:08.203
> 
> 标签：php, xml, string, dom, var

我试图将一个 XML 对象放入一个数组中，但我得到一个空数组，但我不知道为什么。

```
<?php

$string = '<?xml version="1.0" encoding="UTF-8"?>
            <confgs>
            # System Settings #
            ############################################################
            ## Login Account Settings

            ADMIN_ID="<confg rang="0" soort="veld" name="config1" />"
            ADMIN_ID="<confg rang="1" soort="veld" name="config2" />"
            ADMIN_PASS="PKXUT1xxRoutIT"
            USER_ID="<confg rang="2" soort="veld" name="config3" />"
            USER_PASS="<confg rang="3" soort="optie" opties="opt1~opt2~opt3" name="config4" />"
            ## Time Adjust Settings
            TIME_ZONE="60"
            DST_ENABLE="Y"
            MAC_ADRES="<confg rang="4" soort="veld" name="config5" />"
            DST_START_MONTH="3"
            DST_START_ORDINAL_DAY="<stconfg rang="1" soort="veld" name="stanconf1" />"
            DST_START_ORDINAL_DAY="<confg rang="8" soort="optie" opties="deze~die~endit~optie~extra" name="kijkhetwerkt" />"
            DST_START_ORDINAL_DAY="5"
            DST_START_ORDINAL_DAY="<stconfg rang="2" soort="veld" name="stanconf2" />"
            DST_START_ORDINAL_DAY="<confg rang="5" soort="veld" name="config6" />"
            DST_START_ORDINAL_DAY="<confg rang="6" soort="optie" opties="dit~dat~bibobla" name="slelect" />"
            IETS_CONF_ORDINAL_CFG="<confg rang="7" soort="veld" name="ditveld" />"
            IETS_CONF_ORDINAL_CFG="<confg rang="9" soort="veld" name="hallo" />"
            </confgs>
          ';

    error_reporting(E_ALL ^ E_NOTICE);
    $dom = new DOMDocument();
    $dom->preserveWhiteSpace = false;
    $dom->loadXML($string);
    $confg = $dom->getElementsByTagName('confg');

    $form = array();
    $a = 0;

    foreach($confg as $configuratie){
        $a++;
        $form[$a] = $dom->saveXML($configuratie);
    }

print_r($form);
    ?> 
```

这就是我得到的：

数组 ( [1] => [2] => [3] => [4] => [5] => [6] => [7] => [8] => [9] => [10] =>)

有些东西告诉我，我的代码循环通过所有 10 个元素，所以它必须在那里我如何抓住它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:24:05.860

那是因为`<confg ... />`它们现在是 HTML 元素，不能在浏览器中显示，因为它们只是 HTML 标记。

如果您查看源代码，您将看到它们。

# c# - 为什么异常管理代码很臭？

> ID：12742267
> 
> 赞同：3
> 
> 时间：2012-10-05T08:19:15.757
> 
> 标签：c#, exception, exception-handling

为什么不建议（在最佳实践意义上）从入口点管理系统的所有异常。

```
class Program
    {
        static void Main(string[] args)
        {
              try
              {
                 [...]//all the program stuff
              }catch(Exception ex)
              {
                    [...]
              }
        }
    } 
```

**编辑：** 第二点，它是否会改变性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:23:19.073

不建议您*在可以实际以有用的方式处理异常的地方捕获异常*。

如果您对异常无能为力，但崩溃，您的解决方案有效，但请考虑例如丢失的文件给您一个异常。您是否愿意通过“OpenFile”方法中的对话框（或者在这种情况下可能是您打开文件的方法的一部分）来处理它，并可能让用户有机会在继续之前浏览到文件所在的位置，或者会你宁愿把它扔回main，除了“log and crash”之外别无选择？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:52:05.020

这种方法：

*   不强调在正确的地方捕获预期的异常，即在它们发生的相同上下文中可以处理它们的地方。
*   不会在另一个线程上捕获异常，因此它不会在多线程环境中工作。
*   不会捕获许多 Windows 窗体异常，因为它们被 .NET Framework 拦截。
*   吞下所有异常，除非进程损坏。这不是一个好方法，因为当您不理解异常时，您不应该吞下它。

更好的方法是在特定于上下文的方法中捕获*预期*的异常，在这种方法中，大多数知识都可用于正确处理它们。要捕获*意外*异常，您的 Main 方法可能如下所示：

```
// Event handler for handling all UI thread exceptions.
Application.ThreadException += 
    new ThreadExceptionEventHandler(App_UiThreadException);

// Force all Windows Forms errors to go through our handler.
// NB In .NET 4, this doesn't apply when the process state is corrupted.
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

// Event handler for handling all non-UI thread exceptions. 
AppDomain.CurrentDomain.UnhandledException += new 
    UnhandledExceptionEventHandler(App_NonUiThreadException);

// Run the application. 
```

# android - Android：将列表视图项设置为“选定”（突出显示）

> ID：12742269
> 
> 赞同：11
> 
> 时间：2012-10-05T08:19:22.123
> 
> 标签：android, listview, selector, highlight

在我的应用程序中，我想做类似于平板电脑上的 gmail 应用程序的操作，左侧是项目列表，右侧是包含该项目内容的片段，例如对于 gmail 应用程序，此内容是在选择后下载的. 在我单击一个项目后，我希望它保持突出显示，直到我当然更改了选择。我达到了一个可行的点，但只有当我在同一个项目上单击两次时，所以首先我单击，选择有效，然后该项目返回其“默认”状态，如果我再次单击它，选择器（用于选定状态）可见。

这是我到目前为止所拥有的：

1) 选择器 (listitem_background.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/solid_white" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/listitem_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/listitem_focused" android:state_selected="true"/>

</selector> 
```

2）对于列表项的顶部线性布局：

```
android:background="@drawable/listitem_background" 
```

（我也尝试将其设置为列表选择器）

3）这是列表视图：

```
<ListView
    android:id="@+id/my_list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice"
    android:dividerHeight="1dp"
    android:drawSelectorOnTop="true"
    android:fadeScrollbars="true"
    android:fastScrollEnabled="true"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:scrollbarFadeDuration="100"
    android:scrollbars="vertical" /> 
```

4）在代码部分我试着玩这个：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    view.setSelected(true);
    ...
} 
```

[编辑] 事实上，我注意到在屏幕右侧提交片段后选择丢失了。如果我不提交片段，它就像一个魅力......我想我在选择器中需要这样的东西：

```
<item android:drawable="@drawable/listitem_focused" android:state_activated="true" android:state_focused="false"/> 
```

但显然不是这个……

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-05T10:18:38.063

好的，终于得到我的答案了。

这个想法是在选择器中使用 state_activated 和

```
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE) 
```

在代码中，或

```
android:choiceMode="singleChoice" 
```

在xml中，当然

这就是选择器的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/solid_white" android:state_activated="false"/>
    <item android:drawable="@drawable/solid_white" android:state_activated="false" android:state_pressed="false"/>
    <item android:drawable="@drawable/listitem_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/listitem_focused" android:state_activated="true"/>

</selector> 
```

列表项布局应该是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/listitem_background"
    android:orientation="vertical" >
...
<LinearLayout/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-03T21:31:53.473

我遇到了同样的问题，然后我只需要在我的项目视图 xml 中添加一个简单的行。

`android:background="?android:attr/activatedBackgroundIndicator"`

[这篇文章](https://stackoverflow.com/questions/15741857/androids-selector-for-selected-item-does-not-work/18037464#18037464)可能会有所帮助

# asp.net-mvc-3 - 渲染视图时，模型不会仅更新 viewbag

> ID：12742272
> 
> 赞同：2
> 
> 时间：2012-10-05T08:19:31.767
> 
> 标签：asp.net-mvc-3

所以....我的控制器中有一个动作，它基本上复制当前模型并基于该副本返回一个新视图。为了通知用户这是一个副本，我通过 viewbag 附加一条消息，说明它是一个副本。一切似乎都在工作，直到我注意到渲染新视图时使用的不是副本，而是原始视图，但另一方面，视图包已更新，因此显示了消息。

嗯，不知道这是否可以理解，所以我也会尝试用一些伪代码来说明我的意思：

## 模型

```
public class Model{
    [ScaffoldColumn(false)]
    [HiddenInput(DisplayValue = false)]
    public Guid Id { get; set; }

    public string Name { get; set; }
} 
```

## 看法

```
<input type="submit" name="Copy" value="@_("Copy")"/> 
```

## 控制器

```
public ActionResult Copy(model) {
    ViewBag.Message = _("This is a copy.");
    var clone = model.Clone();
    return View("Index", clone);
} 
```

我很难理解这一点，因此非常感谢任何帮助/提示/指针。

哦，我已经多次单步执行代码，以确保克隆确实是克隆。唯一区分它们的是 Id 属性，这是控制器中的新属性，但是当视图呈现时，它又回到了旧的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:23:50.997

您需要`ModelState`在返回克隆之前清除集合，因为 HtmlHelpers 更喜欢重用发布的数据：

```
public ActionResult Copy(model) {
    ViewBag.Message = _("This is a copy.");
    var clone = model.Clone();
    ModelState.Clear();
    return View("Index", clone);
} 
```

您可以在这篇文章中阅读有关此功能的更多信息：[ASP.NET MVC Postbacks and HtmlHelper Controls ignoring Model Changes](http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes)。

# cocoa - 从 finder 拖放到 WebView

> ID：12742276
> 
> 赞同：5
> 
> 时间：2012-10-05T08:20:06.137
> 
> 标签：cocoa, webview, drag-and-drop

我在编辑模式下使用 WebView。我已经从 WebUIDelegate Procotol 实现了这个方法：

```
- (void)webView:(WebView *)sender willPerformDragDestinationAction:(WebDragDestinationAction)action forDraggingInfo:(id < NSDraggingInfo >)draggingInfo 
```

并用它来捕捉我的 WebView 上的元素滴。当我检测到从我的应用程序外部拖动并包含图片的文件时，我会在此方法中构建 img DOM 元素并将其添加到我的文档中。

这很好用，但正如方法名称所暗示的那样，我只被告知会发生拖动，我无法控制它。

由于 Finder 总是进行文件拖动操作，所以在编辑模式下将文件拖放到 WebView 上时通常会发生的情况是 webview 显示文件的路径。

我最终将文件路径字符串添加到我的 webview 和图像中，但我想阻止添加文本。

有没有办法在不继承 webview 的情况下配置它？

我试过了，虽然它有效，但它破坏了很多其他的东西，比如插入符号移动等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T14:06:47.040

自己回答这个以获得改变！

```
- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender
{

    if ([sender draggingSource] == nil)
    {

        NSPasteboard *pboard = [sender draggingPasteboard];

        if ( [[pboard types] containsObject:NSFilenamesPboardType] ) {
            NSURL* fileURL;
            fileURL=[NSURL URLFromPasteboard: [sender draggingPasteboard]];

            NSArray *dragTypes = [NSArray arrayWithObject:NSFileContentsPboardType];
            [[sender draggingPasteboard] declareTypes:dragTypes owner:nil];

            NSImage *content = [[NSImage alloc] initWithContentsOfURL:fileURL];
            [[sender draggingPasteboard] setData:[content TIFFRepresentation] forType:NSPasteboardTypeTIFF];
        }
    }

    return [super performDragOperation:sender];

} 
```

实际上，我所做的确实是子类化 WebView 并拦截 performDragOperation 以更改拖动粘贴板的内容，如果拖动源在我的应用程序之外并且不包含图像而只包含文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T22:18:20.680

我遇到了同样的问题。

我发现子类化视图是将图像数据插入粘贴板的最佳位置。以下是我对多个文件的处理方式：

```
- (BOOL) performDragOperation:(id<NSDraggingInfo>)sender {

    if ( [sender draggingSource] == nil ) {

        NSPasteboard *pboard = [sender draggingPasteboard];

        NSArray *classes = @[ [NSURL class] ];
        NSDictionary *options = @{ NSPasteboardURLReadingFileURLsOnlyKey: [NSNumber numberWithBool:YES],
                                   NSPasteboardURLReadingContentsConformToTypesKey: [NSImage imageTypes] };

        NSArray *fileURLs = [pboard readObjectsForClasses:classes options:options];

        if ( fileURLs ) {

            NSMutableArray *images = [NSMutableArray arrayWithCapacity:[fileURLs count]];

            for ( NSURL *fileURL in fileURLs )
                [images addObject:[[NSImage alloc] initWithContentsOfURL:fileURL]];

            [pboard declareTypes:[NSImage imageTypes] owner:nil];
            [pboard clearContents]; [pboard writeObjects:images];           
        }

    } return [super performDragOperation:sender];
} 
```

我注意到的是以下顺序：
1\. WebView 捕获拖动操作。
2\. 内部 WebCore 创建的文档片段
3\. 节点被插入到 DOMRange
4\. 编辑委托被调用
5\. 最后 UI 委托被调用，它已经来不及做任何事情

另外，我建议通过 UI Delegate 设置以下内容：

```
- (NSUInteger) webView:(WebView *)webView dragDestinationActionMaskForDraggingInfo:(id <NSDraggingInfo>)draggingInfo {

    return WebDragDestinationActionEdit;
} 
```

好的，现在是我遇到的问题，我真的希望你能给我一个答案。当我选择一个文件时没有问题。当我选择多个文件时，我会得到它们并将它们全部正确地添加到粘贴板中。即使当我到达 (5) 的 UIDelegate 并检查 draggingPasteboard 的计数时，我也得到了预期的结果。但不幸的是，文档片段只被创建一次，同样只有一个节点被插入。

任何想法如何创建多个片段以便它们都可以插入？

先感谢您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T12:14:57.230

先前回复的固定版本，此代码适用于在 web 视图中拖动的多个图像。

```
- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender
{
    if ( [sender draggingSource] == nil )
    {
        NSPasteboard *pboard = [sender draggingPasteboard];
        NSArray *classes = @[ [NSURL class] ];
        NSDictionary *options = @{ NSPasteboardURLReadingFileURLsOnlyKey: [NSNumber numberWithBool:YES],
                                   NSPasteboardURLReadingContentsConformToTypesKey: [NSImage imageTypes] };
        NSArray *fileURLs = [pboard readObjectsForClasses:classes options:options];

        if(fileURLs)
        {   
            NSArray* filenames = [pboard propertyListForType: NSFilenamesPboardType];
            NSMutableString* html = [NSMutableString string];

            for(NSString* filename in filenames) {
                [html appendFormat: @"<img src=\"%@\"/>", [[[NSURL alloc] initFileURLWithPath: filename] absoluteString]];
            }

            [pboard declareTypes: [NSArray arrayWithObject: NSHTMLPboardType] owner: self];
            [pboard setString: html forType: NSHTMLPboardType];
        }

    } return [super performDragOperation:sender];
} 
```

# android - 实现 onChildClickListener

> ID：12742280
> 
> 赞同：0
> 
> 时间：2012-10-05T08:20:27.923
> 
> 标签：android, android-listview, android-view

我正在使用自定义可扩展列表视图，并且适配器不在我的活动范围内。在我的活动中，我可以很好地设置 onclicklistener

```
 mTopicsExpandListView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            Log.i("MEAT", "This child row was clicked!");
            return false;
        }
    }); 
```

但是为了避免需要使用静态变量，在不久的将来，我希望能够在适配器本身中使用实现 OnChildClickListener

```
public class MExpandableListAdapter extends BaseExpandableListAdapter implements OnChildClickListener {
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    Log.i("MEAT", "This child row was clicked!");
    return false;
} 
```

但后者什么也不做。第二种情况有什么不同吗？IsChildSelectable 设置为 true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:46:38.173

您仍然需要将新课程连接到：

在您的活动中，您需要：

```
mTopicsExpandListView.setOnChildClickListener(new MExpandableListAdapter()); 
```

你这样做了吗？

# java - 如何将 WebSocket 与 Jetty 嵌入式自定义服务器一起使用

> ID：12742283
> 
> 赞同：0
> 
> 时间：2012-10-05T08:20:40.513
> 
> 标签：java, xml, websocket, xmpp

我是 StackOverflow 的新手。我已经搜索了该主题，但没有找到任何真正相关的内容。

基本上我需要为我们公司开发一个网络“支持聊天”系统。我知道那里有很多可用的解决方案，但我们需要 Java 中的自定义解决方案。我们需要建立一个支持聊天网络系统，访问该网站的用户可以使用聊天请求支持，另一方面，我们有“n”个代理来处理请求。为了商业智能的目的，我们需要在 Cassandra 集群中存储每一段对话。我们需要用 Java（服务器端）和 JavaScript+JQuery（客户端）开发解决方案。

**编辑：** 在检查了许多基于 XMPP 的解决方案之后（很多都非常陈旧且不再受支持），我可能会使用类似 XMPP 的自定义协议，它只涵盖我们需要的功能。开发解决方案 WebSocket 似乎是最合适的技术。

问题是，从哪里开始？我用谷歌搜索，但对如何在 Jetty 中使用 WebSocket 几乎一无所知。有链接吗？任何资源？

基本上我的想法是：

*   基于Jetty Embedded的聊天服务器
*   需要与服务器通信的 Web 应用程序 (JQuery) 的小型前端。
*   通信基于WebSocket避免轮询（真正的问题）
*   基于 WebSocket 的 XML 的 XMPP 样式协议。但这不是问题。

如何将 WebSocket 与 Jetty 嵌入的自定义服务器和 Web 应用程序一起使用的问题。

**ADD** 正如许多人所指出的，WebSocket 不能很好地支持通用用途。相反，AJAX 是一种更自然的解决方案，但这意味着使用轮询。我找到了一些关于如何规避长轮询问题的示例，但我无法找到基于 JQuery 的坚如磐石的实现，它能够：

1.  可用时使用 WebSocket

2.  否则，使用基于 JQuery 的长轮询

我认为现在问题更清楚了。抱歉我之前的“谈论”风格问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:52:33.370

我使用了大气框架（https://github.com/Atmosphere/atmosphere）。他们在这里提供了几个与聊天相关的示例：[https ://github.com/Atmosphere/atmosphere/tree/master/samples](https://github.com/Atmosphere/atmosphere/tree/master/samples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:54:50.800

我不建议您将 Websocket 用于支持系统，因为有很多人使用 Internet Explorer 尚不支持它，并且可能永远不会在 Windows 7 之前的 Windows 版本上支持它：http: [//caniuse.com /websockets](http://caniuse.com/websockets)

你说你想在客户端使用“Java+JQuery”。你确定你没有混淆 Java 和 JavaScript 吗？这些技术与[冰茶](http://en.wikipedia.org/wiki/Iced_tea)和[长岛冰茶](http://en.wikipedia.org/wiki/Long_Island_iced_tea)一样多。

当你真的想使用 Java 时，你不需要使用 WebSockets，因为 Java 小程序可以使用普通的 TCP 或 UDP 套接字与服务器通信。

当您指的是 JavaScript 时，我建议您创建一个基于 AJAX 的解决方案，因为它得到了更广泛的支持，并且您不需要 WebSockets 的实时性能来进行聊天应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:02:18.120

您可能想查看[Openfire 的 Fastpath 插件（服务和网络聊天）](http://www.igniterealtime.org/projects/openfire/plugins.jsp)。这是一个基于 XMPP 的解决方案，旨在支持您的用例。它是开源和基于 Java 的，因此您可以轻松地对其进行扩展以满足您的目的。

[Smack](http://www.igniterealtime.org/projects/smack/index.jsp)还支持基于 Java 客户端的解决方案（在工作组包下）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:50:20.483

如果不需要使用 XML，我想建议[Bristleback Server](http://bristleback.pl)。您可以选择 Jetty 作为 WebSocket 协议引擎。目前 Bristleback 使用 JSON 作为消息格式，因此这可能是您的限制。使用 Bristleback，您可以轻松定义消息的接收者，并且无需使用低级 WebSockets 协议组件即可完成所有工作。还提供了客户端（使用 jQuery）库。在我们的网站上，您可以找到一些示例和教程（不断扩展）。

全面披露：我是 Bristleback Server 的共同创造者之一。

# javascript - Selenium DOM 定位器的语义如何工作？

> ID：12742287
> 
> 赞同：2
> 
> 时间：2012-10-05T08:20:51.667
> 
> 标签：javascript, dom, selenium

我试图理解 Selenium DOM 定位器的语义。文档指出，它们基本上是评估以获取目标元素的 Javascript 表达式。但是，如果我尝试评估 eg `document.div[0].button[2]`（从[这些示例](http://marakana.com/bookshelf/selenium_tutorial/locators.html#_dom)中），我只会得到`Error: TypeError: document.div is undefined`.

那个例子无效吗？这是一种过时的 DOM 导航方式，它在现代浏览器中不再支持，但被 Selenium 模拟以实现向后兼容性？有没有关于这种语法如何工作的文档？

请注意，我并没有尝试*使用*DOM 定位器 - 我很清楚使用 CSS 或 id 甚至 XPath 更干净。但是，我需要了解它们的语义，这样我才能编写代码，将常见的 DOM 定位器转换为 XPath 定位器，以便在 WebDriver 中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:50:24.223

我会分享我对 DOM 定位器的理解。有几种 DOM 缩写：

```
gEBI - getElementById
gEBTN - getElementsByTagName 
```

Xpath 定位器和 css 选择器用于 selenium web 驱动程序的上下文中，而 DOM 定位器用于 javascript 的上下文中（即，要正确使用 DOM 定位器定位元素，您应该`JavascriptExecutor`首先包装 DOM 定位器）

**用法示例：**

```
Whole web page         document.documentElement
Whole web page body    document.body
Element <E> by absolute reference     document.body.childNodes[i]...childNodes[j]
Element <E> by relative reference     document.gEBTN('E')[0]   

document.getElementById('TestTable')
First <E> child     document.getEBTN('E')[0]
Last <E> child      document.gEBTN(E)[document.gEBTN(E).length-1]   

Second <E> child              document.getEBTN('E')[1]
Second-to-last <E> child      document.gEBTN(E)[document.gEBTN(E).length-2]
Parent of element <E>         document.gEBTN('E')[0].parentNode   

Descendant <E> of element with id I using specific path   
document.gEBI('I')…gEBTN('E')[0]      

Descendant <E> of element with id I using unspecified path
document.gEBI('I').gEBTN('E')[0] 
```

因此，如果您想完成这项工作，我们应该调用 jsExecutor。它类似于：

```
JavascriptExecutor js = (JavascriptExecutor) driver;
String script = "return document.getElementById('example');";
WebElement exampleDiv = (WebElement) js.executeScript(script);
exampleDiv.getText(); 
```

另外关于你的问题，我在[这里找到了一段解释](https://stackoverflow.com/questions/6129355/element-locator-use-in-selenium-xpath-css-dom)

希望现在更清楚一点）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:40:56.990

这里对 Selenium 中的一些 DOM 命令有一个很好的概述：

[http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/](http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)

它也谈论了很多关于其他选择器的内容，但与其他选择器相比，它可能有助于查看命令的外观。它也提供了一个基本的 eugene 上面谈到的 PDF 文件。

# c# - 分享文字，即失踪

> ID：12742289
> 
> 赞同：1
> 
> 时间：2012-10-05T08:20:55.910
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我正在使用“共享”通过电子邮件发送文本（字符串）。

我共享的数据是这样创建的：

```
string data = "Log Data\n" + "========\n";

data += "Log Type   : " + log.LogType.ToString() + "\n";

data += "Date/Time:   " + log.TimeStamp.ToString( "MM/dd/yy - HH:mm:ss" ) + "\n";

data += "Result:      " + log.Result.ToString() + "\n";

data += "Value1:      " + log.Value1 + "     Value2:      " + log.Value2 + "\n";

data += "Note:        " + log.Note + "\n\n"; 
```

数据已准备好并通过电子邮件发送。但是，在我发送（通过 Windows 8 邮件程序）或接收方 GMail 之前，“\n”都没有被正确解释。

发送端呈现的数据如下所示：

```
Log Data ======== Log Type : ToDo Date/Time: 06/05/12 - 08:00:00 Result: Normal Value1: 170 Value2: 0 Note: note 1 
```

ShareTextHandler 是这样的：

数据请求请求 = e.Request;

```
request.Data.Properties.Title = "Share Data: ";

request.Data.Properties.Description = "Send Data to an email address";

request.Data.SetText( data ); 
```

Windows 8 中的“\n”是否已更改？或者 SetText 会做些什么来删除它？

艾坦B

更新....

你好，

试图用 HTML 做到这一点：

用 HTML 尝试了一些测试数据，如下所示： private string PrepareShareData() { string CR = System.Environment.NewLine; 字符串数据 = string.Empty;

```
 data += "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Final//EN\">" + CR;
        data += "<html>" + CR;
        data += "<body>" + CR;
        data += "<p>" + CR;
        data += "Log Data" + "<br/>" + CR;
        data += "========" + "<br/>" + CR;
        data += "Line 1" + "<br/>" + CR;
        data += "Line 2" + "<br/>" + CR;
        data += "<p>" + CR;
        data += "</body>" + CR;
        data += "</html>" + CR;

        return data;
        } 
```

不工作...

也试过：

```
 private string PrepareShareData()
        {
        string CR = System.Environment.NewLine;
        string data = string.Empty;

        data += "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Final//EN\">";
        data += "<html>";
        data += "<body>";
        data += "<p>";
        data += "Log Data" + "<br/>";
        data += "========" + "<br/>";
        data += "Line 1" + "<br/>";
        data += "Line 2" + "<br/>";
        data += "<p>";
        data += "</body>";
        data += "</html>";

        return data;
        } 
```

也没有工作....

我确实用记事本创建了一个 .HTML 文件，效果很好：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Final//EN">
<html>
<body>
<p>
Log Data<br/>
========<br/>
Line 1<br/>
Line 2<br/>
</p>
</body>
</html> 
```

HTML 是否也存在邮件问题，或者我的 HTML 错误？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:02:13.177

用过的：

```
var htmlFormat = Windows.ApplicationModel.DataTransfer.HtmlFormatHelper.CreateHtmlFormat( data );
request.Data.SetHtmlFormat( htmlFormat ); 
```

数据在哪里：

```
 string data = string.Empty;
        string BR = @"<br/>";
        data += @"<html>";
        data += @"<head><title>";
        data += @"<title>";
        data += @"Log Data<br/>";
        data += @"========<br/>";
        data += @"</title>";
        data += @"</head>";
        data += @"<body>";
        data += @"Date/Time:   " + log.TimeStamp.ToString( "MM/dd/yy - HH:mm:ss" ) + BR;
        data += @"Note:        " + log.Note + BR + BR;
        data += @"</body>";
        data += @"</html>"; 
```

解决微软问题的工作量太大......

艾坦B

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:12:44.923

尝试 args.Request.Data.SetHtmlFormat(HtmlFormatHelper.CreateHtmlFormat(html));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:32:06.367

首先，作为一般经验法则，我们应该始终使用 StringBuilder 对象将字符串附加在一起。这样做的原因是：字符串变量是不可变的，所以每次我们添加一个“+”号时，我们实际上最终都会创建一个全新的字符串变量实例。

```
string data = string.Empty;
data += "Some Text Creates 1 variable";
data += "This creates a second variable" + "and this a third";
return data; 
```

更适合作为

```
StringBuilder builder = new StringBuilder()

builder.Append("Some Text Creates 1 variable");
builder.Append("Since we havent yet created a string no 2nd variable is created");
builder.AppendLine("Should create a return before this line");
builder.AppendLine(Environment.NewLine);
builder.AppendLine("Should have an empty line above it");
return builder.ToString();
// only creates 1 string variable 
```

或者您可以将单个变量包装在所描述的 HTML 编码方法中

```
return System.Net.WebUtillity.UrlEncode(builder.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:11:33.087

Environment.Newline 肯定是朝着正确方向迈出的一步，但我不知道它是否能解决您的问题。

这是 Consumer Preview 中内置邮件应用程序中的一个问题（我还没有检查它是否在 RTM 中得到修复）。我注意到它似乎不想尊重换行符。我通过编写一个小的虚拟共享目标来确认正在发送正确的数据，并确保文本正确呈现并且它是正确的。也许您可以在共享请求中发送 HTML - 邮件支持 HTML 以及文本。

# java - Java 字符串 - UTF 和字节表示

> ID：12742291
> 
> 赞同：1
> 
> 时间：2012-10-05T08:20:59.313
> 
> 标签：java, string, encoding

我想知道它的 java String 和字节表示。我有一个以 UTF-16 little endian 编码的文件，当我在 hexeditor 中查看它时，我可以看到

```
ff fe 61 00 f3 00 61 00 00 
```

现在，当我使用

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(fileName),"UTF-16"));
    StringBuilder builder = new StringBuilder();
    String line;

    while ((line = reader.readLine()) != null)
        builder.append(line);
    System.out.println(Arrays.toString(builder.toString().getBytes())); 
```

我可以在输出中看到

```
[97, -13, 97] 
```

如果我正在打印字节，为什么我看不到在我的 hexeditor 中可以看到的零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:30:33.467

这是因为 Java 不会将 UTF-16 格式的字符串保存在内存中，这会很浪费，并且因为 getBytes 返回默认系统字符集（在您的机器上可能不是 UTF-16）[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#getBytes%28%29)中的字符串。正确的重载将是 getBytes("UTF-16") - 这样您应该会在末尾看到 0 填充，并且可能在开头看到 BOM (ff fe)。

# html - CSS：评级栏上的礼物

> ID：12742296
> 
> 赞同：-3
> 
> 时间：2012-10-05T08:21:29.173
> 
> 标签：html, css, gif, ratingbar

我想把这个： http: [//livepipe.net/control/rating](http://livepipe.net/control/rating)一个评级栏 CSS，我唯一的问题是 image.gif。任何人都可以帮助我吗？如果我尝试构建它，我会使用 gif 动画：在时间间隔内变化的圆圈，而不是当你点击它们时。如果有人可以上传示例或解释如何正确构建这种类型的 gif，将不胜感激。

[http://livepipe.net/control/rating](http://livepipe.net/control/rating)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:42:47.740

如果您查看该网页的来源，您会看到[这是](http://livepipe.net/stylesheets/rating.gif)用于评级的图像。

它是一个单独的 .gif，没有动画。为了控制要显示的选择，他定义了一些 CSS 类，如下所示：

```
.rating_container a {  
    float:left;  
    display:block;  
    width:25px;  
    height:25px;  
    border:0;  
    background-image:url("/stylesheets/rating.gif");  
} 

.rating_container a.rating_off {  
    background-position:0 0px;  
} 

.rating_container a.rating_half {  
    background-position:0 -25px;  
} 

.rating_container a.rating_on {  
     background-position:0 -50px;  
 } 

.rating_container a.rating_selected {  
     background-position:0 -75px;  
} 
```

`<a>`具有该类的元素中的每个标签`rating_container`都会自动将整个评分表设置为其背景图像。由于宽度/高度被强制为 25 x 25，它只会显示它的一小部分。然后，他`<a>`根据评分单独设置课程。例如，当评级设置为，`<a class='rating_on'>`匹配的 CSS 将图像背景位置在 y 轴上更改 -50px，这会导致 25x25`<a>`窗口显示不同的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:28:50.833

您不需要一张图片，而是多张图片：

*   评级关闭
*   rating_half
*   rating_on
*   rating_selected

然后在未选择任何内容时显示 5 次 rating_off 选择 2 时显示 2 次 rating_on 和 3 次 rating_off ... 当您未完全选择选项时使用 rating_half ...

当用户将鼠标悬停在评级上时（在他选择之前）使用 rating_selected

**您不需要任何动画 GIF**

# spring - 有没有办法对休眠本机查询做出反应

> ID：12742298
> 
> 赞同：2
> 
> 时间：2012-10-05T08:21:29.740
> 
> 标签：spring, hibernate, nativequery

我正在使用 Spring 和 Hibernate 开发 Web 应用程序。在某种情况下，我想撤销用户对数据库的写访问权限。因此，我已经实现`EventListeners`了对我感兴趣的事件作出反应。但是，该应用程序也使用了一些`NativeQueries`似乎被我能想到的`Listeners`和任何`Interceptor`我能想到的事件。

我正在使用 Spring 3.0.5 和休眠 3.6.8。

有没有办法在不实现我自己的`NativeQuery`类的情况下对这些本机查询做出反应（`EntityManager`上帝知道我需要多少类才能让整个事情再次工作）？

# spring - 登录处理网址

> ID：12742299
> 
> 赞同：0
> 
> 时间：2012-10-05T08:21:31.347
> 
> 标签：spring, spring-security

我注意到很多人配置 Spring Security`form-login`如下

```
<form-login login-processing-url="/static/j_spring_security_check" login-page="/login"     
authentication-failure-url="/login?login_error=t"/> 
```

默认`login-processing-url`是`/j_spring_security_check`那么为什么要通过添加来更改它`/static`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:35:17.953

在功能方面没有区别。只是 Spring 框架非常灵活，可以让您轻松更改各种配置。当您想隐藏您正在使用 Spring Security 的事实时，它会很有用，方法是更改​​为不同的 url（没有 Spring it it）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T08:28:17.123

Adding To Umesh's answer and quoting it from Spring Security Book

> It may be obvious, but if we only wanted to add a custom login page, we would only need to specify the login-page attribute. We would then create our login form using the default values for the remaining attributes. However, it is often a good practice to override the values of anything visible to users, to prevent exposing that we are using Spring Security. Revealing what frameworks we are using is a type of "information leakage", making it easier for attackers to determine potential holes in our security.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T09:48:31.990

如果您仍然对使用登录处理 URL 感兴趣，我们可以更改默认 URL。因此，如果您当时在 http 标签中定义了模式， j_spring_security 将失败。因此，当我们根据模式进行限制时，它非常有用。

# jquery - Jquery UI：自动完成多个值，search.php 做什么？

> ID：12742308
> 
> 赞同：0
> 
> 时间：2012-10-05T08:22:04.133
> 
> 标签：jquery, jquery-ui

这个 Jquery UI 确实是我需要的：http: [//jqueryui.com/demos/autocomplete/#multiple-remote](http://jqueryui.com/demos/autocomplete/#multiple-remote)但是在查看了它的源代码之后，我想知道这一行中的 search.php 是做什么的？

```
source: function( request, response ) {
$.getJSON( "search.php", {
term: extractLast( request.term )
}, response );
}, 
```

我没有看到关于那个 search.php 的任何文档，我相信在 search.php 上只有这样的 MySQL SELECT 是不够的。因为我认为 jQuery UI 是以 JSON 格式读取的。不是这样的普通 MySQL 结果：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM SomeTable");

while($row = mysql_fetch_array($result))
  {
    *** I don't know what to do about this data, I think it should be converted 
    *** into JSON format. but how?
  }

mysql_close($con);
?> 
```

**jQuery UI 自动完成的另一个问题**是用户能够编辑自动完成结果并提交到服务器。例如，如果我在演示页面上键入“ca”并选择“Cattle Egret”。我仍然可以将结果编辑成这样的“Catle Eret”。

如何“锁定”jQuery UI 结果，使用户无法编辑但可以删除？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:27:31.287

当然，search.php 上不会有任何信息，因为这取决于您如何进行搜索。但它应该包含一个类似 SQL SELECT 的语句！

您可以像这样简单地输出查询的某些列：

```
$data = array();
while($row = mysql_fetch_array($result)) {
    $data[] = row['interesting_column'] ;
    // you can of course output multiple comlumns if you're interested in them
}

echo json_encode($data);
flush(); 
```

这应该返回一个 JSON 数组，其中包含来自 db 的列。

# ruby-on-rails - Rails - 如何获取匹配其他条件的记录ID

> ID：12742310
> 
> 赞同：0
> 
> 时间：2012-10-05T08:22:05.190
> 
> 标签：ruby-on-rails

我有一个类别表，并且基于知道类别名称（它是唯一的），我希望能够获得 ID。

在rails控制台中我试过

```
cat = Category.where("name = ?", "Food") 
```

成功找到了对象，但是键入 cat[:id] 给了我“TypeError：无法将符号转换为整数”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:25:12.680

尝试`find_by_name`改用。

```
cat = Category.find_by_name('Food')
puts cat.id 
```

`where`返回一个数组（嗯，类似数组）对象。因此，您可以改用`cat = Category.where('name = ?', 'Food').first`. find 方法会做同样的事情，但看起来也更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:26:23.723

```
cat = Category.where("name = ?", "Food").first
id = cat.id 
```

# c# - listview 只显示一项

> ID：12742311
> 
> 赞同：0
> 
> 时间：2012-10-05T08:22:07.923
> 
> 标签：c#, android, listview, xamarin.android

我想从 foreach 循环中添加项目。我的问题是，无论添加多少，我都只能看到一项。我在下面制作了一个示例代码，其中包含我的问题。从我的布局开始。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:focusableInTouchMode="true">

  <ScrollView android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:focusableInTouchMode="true">

      <TextView
          android:textSize="10pt"
          android:id="@+id/HeaderLbl"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
         />

      <TextView
            android:textSize="7pt"
            android:id="@+id/ErrorLbl"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#ffff0000"
            />
      <Spinner
          android:id="@+id/OrderSpinner"
          android:layout_height="wrap_content"
          android:layout_width="fill_parent"
               >
      </Spinner>

      <TextView
            android:textSize="8pt"
            android:id="@+id/OrderRef"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
           />

      <TextView
            android:textSize="7pt"
            android:id="@+id/OrderDateTime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
           />

      <TextView
            android:textSize="7pt"
            android:id="@+id/OrderCustomer"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
           />

      <TextView
            android:textSize="7pt"
            android:id="@+id/OrderInnerComment"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
           />

      <Spinner
          android:id="@+id/ArticleSpinner"
          android:layout_height="wrap_content"
          android:layout_width="fill_parent"
               >
      </Spinner>

      <ListView
        android:id="@+id/OperationsListView"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
          >
      </ListView>

    </LinearLayout>
  </ScrollView>
</LinearLayout> 
```

在这里，我模拟了我的 foreach 循环，向其中添加了项目。

```
ArrayAdapter CalculationAdapter = new ArrayAdapter(this, Android.Resource.Layout.SimpleListItem1);
    ListView OperationsListView = FindViewById<ListView>(Resource.Id.OperationsListView);

        for (int i = 0; i < 3; i++)
        {
            CalculationAdapter.Add(i.ToString());
        }

        OperationsListView.Adapter = CalculationAdapter; 
```

非常感谢您的帮助！谢谢你。

编辑：我认为滚动视图是问题所在。

```
<ScrollView android:id="@+id/ScrollView01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
> 
```

我删除了它，然后它工作了:) 不明白为什么.. [我怎样才能将 ListView 放入 ScrollView 而不会崩溃？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing) Mabye这可以帮助任何其他有同样问题的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:28:39.677

使用它来设置适配器到列表视图

```
 OperationsListView.setAdapter(CalculationAdapter); 
```

这会将值设置为列表视图

我不确定是否`ListView OperationsListView = FindViewById<ListView>(Resource.Id.OperationsListView);`

是正确的

尝试这个

```
 OperationsListView = (ListView) findViewById(your id ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:57:29.980

我想你`notifyDataSetChanged();`最后不见了。 `CalculationAdapter.notifyDataSetChanged();`

# c# - 用 html 标签包围 Eval

> ID：12742313
> 
> 赞同：1
> 
> 时间：2012-10-05T08:22:12.857
> 
> 标签：c#, asp.net, html, concatenation

请帮忙！！我已经搜索了几个小时，但也许解决方案非常明显，我完全忽略了它:(

我有一个绑定到 sql 表的列表视图。该表包含一堆仅包含“T”或 NULL 值的字段，最后两个字段除外，其中包含用于用户评论的自由类型文本。

对于 T/NULL 值 - 列表视图配置为不显示空单元格，并且在存在“T”值的地方，它将显示自定义文本并为下一项创建换行符。此语法正是这样做的：

```
<asp:Label ID="LymeLabel" runat="server" Text='<%# Eval("Lyme","Lyme Disease<br />") %>' /> 
```

但是，我希望最后两个字段（自由类型文本）以段落样式显示，段落标记围绕 Eval 语句。标签必须构成 Eval 的一部分，以便在单元格为空时它们不会呈现空白。我的想法是这样做，但它不起作用 - 空格以任何一种方式显示：

```
<asp:Label ID="OtherCommentLabel" runat="server" Text='<%# "<p>"+Eval("OtherComment")+"</p>" %>' /> 
```

我猜 ""+ ... +" " 不在乎中间有什么或不在中间.. 但如何解决呢？必须有一个非常简单的解决方案，即使问这个我也觉得很愚蠢。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:26:31.200

根据描述，您根本不需要`asp:Label`。为什么不把它包装`Eval()`在一个`P`标签中呢？

```
<p><%# Eval("Lyme","Lyme Disease") %></p> 
```

即使标签有效，您也不想要生成的标记（标签内的段落没有意义）。

如果项目为空，要处理显示/隐藏，您可以执行以下操作：

```
<ItemTemplate>
    <p runat="server" visible='<%#!string.IsNullOrEmpty(Eval("OtherComment"))%>'>
        <%# Eval("Lyme","Lyme Disease") %>
    </p>
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:42:58.873

空白会出现，因为 p 不是 Eval 的一部分；`<p>Eval()</p>`.

不确定是否优雅，但您可以将 Eval 包装在一个方法中：

```
public string ParagraphIfData(string input)
{ 
    if(!string.IsNullOrEmpty(input))
        return "<p>" + input + "</p>";
    return "";
} 
```

然后：

```
<%# ParagraphIfData(Eval("Lyme","Lyme Disease")) %> 
```

# drupal-7 - Drupal 分类视图覆盖特定内容的路径

> ID：12742316
> 
> 赞同：0
> 
> 时间：2012-10-05T08:22:33.227
> 
> 标签：drupal-7, views, drupal-views, drupal-taxonomy

我在这里开始有点绝望了。我有以下结构（Drupal 7）：

*   我使用分类菜单来建立菜单链接，
*   taxonomy_term 默认（页面）视图用于覆盖 drupal 的 taxonomy/term/% 路径

除此之外，我使用 menu_block 模块（但我怀疑这很重要）。我想要达到的目标：

*   我需要按类别（分类术语）构建节点浏览器，但它有例外 - 例如，ID 为 850 的分类术语（分类/术语/850）必须具有与其他术语不同的内容结构。是否可以使用这些异常覆盖默认视图显示？我尝试使用此路径创建另一个显示，但结果是“未找到”。我还考虑过使用块而不是页面显示，但这种解决方案对我来说似乎不是 Drupal 的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:08:39.423

与普通文章相比，我在尝试使用不同的出版物显示/结构时遇到了同样的问题。

我所做的，为该特定分类创建了一个单独的视图，例如*taxonomy/term/850*，并且在视图路径中我输入了“ *taxonomy/term/850* ”（在这种情况下）

这导致它覆盖*分类/术语/％*

并根据我的需要以不同的方式显示。

# python - 图表 barh matplotlib - 重叠条

> ID：12742317
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:22:38.373
> 
> 标签：python, matplotlib

我是 matplotlib 的新用户，我对图表 barh 有疑问：重叠条。绘制图表时，条形图重叠，我没有找到原因。在我看来，问题在于重新调整图表的大小。我重新调整它的大小，因为将来我将插入标题、图例和 x、y 描述。我尝试了一些解决方案，但我有一个解决方案！这是我的代码：

```
 import matplotlib.pyplot as plt
    import matplotlib.font_manager as fm
    from matplotlib.colors import LightSource
    from matplotlib.artist import Artist
    import numpy as np
    from decimal import *
    import datetime
    #Size
    width = 360
    height = 240
    dpi = 80.0
    colors = ['#be1e2d',
            '#666699',
            '#92d5ea',
            '#ee8310',
            '#8d10ee',
            '#5a3b16',
            '#26a4ed',
            '#f45a90',
            '#e9e744']
    #Data
    columns = ['2005','2006']
    data = [[2.6,3.5],[2, 1.5]]
    linewidth = 1
    N = len(columns)

    ind = np.arange(N)  
    #Re-Size
    rdata = len(data) if columns is None else len(columns)
    heightColumn = height*1.0 / (rdata) / (len(columns))
    heightColumn = heightColumn/dpi
    fig = plt.figure(1, figsize=(width/dpi,height/dpi),facecolor='w')
    ax = fig.add_axes([0.2, 0.3, 0.6, 0.5])
    #Draw
    tupleRects = ()
    idxColor = 0 
    valPositionCol = ind
    for dat in data:
        rects = plt.barh(valPositionCol, dat, heightColumn, color=colors[idxColor], alpha=0.8,  
                         linewidth=linewidth)
        valPositionCol=valPositionCol+heightColumn
        idxColor += 1
        if idxColor==9:
            idxColor = 0
        tupleRects += (rects,)
    plt.show() 
```

谢谢

* * *

代码是一样的，但我改变了数据（`columns[]`e `data[]`）：

```
import matplotlib.pyplot as plt
import matplotlib.font_manager as fm

from matplotlib.colors import LightSource
import numpy as np
from decimal import *
import datetime
#Size
width = 360
height = 240
dpi = 80.0
colors = ['#be1e2d',
            '#666699',
            '#92d5ea',
            '#ee8310',
            '#8d10ee',
            '#5a3b16',
            '#26a4ed',
            '#f45a90',
            '#e9e744']
#Data
columns = ['2005','2006']
data = [[1.5, 1.5], [1.5,1.5], [1.5,1.5]]
linewidth = 1
N = len(columns)

ind = np.arange(N)  
#Re-Size
height_of_group = .9

heightColumn = height_of_group / (len(columns))
fig = plt.figure(1, figsize=(width/dpi,height/dpi),facecolor='w')
ax = fig.add_axes([0.2, 0.3, 0.6, 0.5])
#Draw

tupleRects = ()
idxColor = 0 
valPositionCol = ind
for dat in data:
    rects = plt.barh(valPositionCol, dat, heightColumn, color=colors[idxColor], alpha=0.8,  
                     linewidth=linewidth)
    valPositionCol=valPositionCol+heightColumn
    idxColor += 1
    if idxColor==9:
        idxColor = 0
    tupleRects += (rects,)
plt.show() 
```

问题是我有可变数据，我必须找到一个稳定的算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:50:28.300

我认为您误解了高度（[doc](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.barh)）的含义。单位是轴单位，而不是像素。

```
heightColumn = height*1.0 / (rdata) / (len(columns))
heightColumn = heightColumn/dpi 
```

至

```
height_of_group = .9
heightColumn = height_of_group / (len(data))
#heightColumn = heightColumn/dpi 
```

将得到不重叠的条，组之间只有一点额外的空间。您可以通过`height_of_group`放大或缩小来调整组之间的间距，只要它小于`1`。

# visual-studio-2010 - `FormsAuthentication.SignOut();` 不适用于 IIS `Windows Authentication` 选项已启用

> ID：12742319
> 
> 赞同：1
> 
> 时间：2012-10-05T08:22:45.177
> 
> 标签：visual-studio-2010, authentication

我的 Visual Studio 2010 C# Web 应用程序中有以下代码。Web 应用程序已`Windows Authentication`在 IIS 中启用。

```
<script runat="server">
  void Signout_Click(object sender, EventArgs e)
  {
    FormsAuthentication.SignOut();
    Response.Redirect("WebForm1.aspx");
  }
</script>

<body>
    <form id="form1" runat="server">
    <div>
        <span class="style1"><strong>

        <asp:HyperLink ID="Link_Home" runat="server" NavigateUrl="~/WebForm1.aspx">Home</asp:HyperLink> &nbsp;|
        <asp:Button ID="Submit1" OnClick="Signout_Click" Text="Sign Out" runat="server" />

        </strong></span><br />
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

但是，我注意到这`FormsAuthentication.SignOut();`似乎不起作用。这是因为当我单击按钮时。假设注销并清除当前用户，以便当另一个用户来到此页面时，它应该提示输入密码。

但是，当我打开另一个选项卡并输入 Web 应用程序 url 时，它没有提示我输入用户名或密码。只有当 Web 浏览器关闭并使用 Web 应用程序 url 再次打开时，它才会提示我输入用户名和密码。

感谢是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T05:14:56.543

我使用以下代码注销并重定向到登录页面。

```
try {
   document.execCommand("ClearAuthenticationCache");
}
catch (e) { }
window.location.replace("login.aspx"); 
```

更多细节和参考如下：

1.  [ASP.NET Windows 身份验证注销](https://stackoverflow.com/questions/1067263/asp-net-windows-authentication-logout)

2.  [如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# mysql - 是否可以在 MySQL 中将 DECIMAL 转换为 DOUBLE？

> ID：12742322
> 
> 赞同：8
> 
> 时间：2012-10-05T08:22:51.090
> 
> 标签：mysql, casting, double, decimal

我知道所有的数字含义，即浮点格式固有的可能的舍入问题，但在我的情况下，我有一些`DECIMAL`列`MySQL`，我想`DOUBLE`在查询中直接转换为直接`MySQL`而不是下游。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-07T11:31:47.960

`SELECT my_decimal_field + 0E0 FROM my_table`

MySQL手册中的以下引用解释了它是如何工作的：

[9.1.2 数字文字](https://dev.mysql.com/doc/refman/8.0/en/number-literals.html)

> 数字文字包括精确值（整数和十进制）文字和近似值（浮点）文字。
> 
> 以科学记数法表示的带有尾数和指数的数字是近似值数字。

[12.22.3 表达式处理](https://dev.mysql.com/doc/refman/5.7/en/precision-math-expressions.html)

> 数值表达式的处理取决于表达式包含的值类型：
> 
> *   如果存在任何近似值，则表达式是近似的，并使用浮点算术进行评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-22T11:47:13.423

由于 MySQL 内置`CAST`函数的限制，只能使用您自己的用户定义的强制转换函数转换`DECIMAL`为。`DOUBLE`

示例用例：

`SELECT castDecimalAsDouble(0.000000000000000000100000000000);`

结果：`1e-23`

```
CREATE DEFINER=`root`@`localhost` FUNCTION `castDecimalAsDouble`(
decimalInput DECIMAL(65,30) ) RETURNS double
DETERMINISTIC
BEGIN
DECLARE doubleOutput DOUBLE;

SET doubleOutput = decimalInput;

RETURN doubleOutput;
END
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-06T16:46:12.783

`DOUBLE`如果您进行计算并且例如想要在第三位数字中，似乎不可能将其转换为会`ROUND()`带来`DECIMAL 12,2`问题。如果您的和是 DECIMAL 12,2 字段，使用`ROUND(foo * bar,2)`将忽略额外的数字。`foo``bar`

也就是说，你可以做这样的事情来让它工作：

```
ROUND(CAST(foo AS DECIMAL(30,15)*CAST(bar AS DECIMAL(30,15)),2) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-18T18:33:09.307

DECIMAL*可以*节省空间。例如，`DECIMAL(4,2)`只占用 2 个字节。 `FLOAT`需要4个；`DOUBLE`需要 8 个。

至于原始问题，只需执行以下操作：

```
ALTER TABLE t MODIFY COLUMN c DOUBLE ...; 
```

（“...”应该包括您已经拥有的其他内容，例如`NOT NULL`。）

# java - 从备份恢复我的代码后，我再次强制关闭，无法弄清楚出了什么问题

> ID：12742325
> 
> 赞同：0
> 
> 时间：2012-10-05T08:23:01.913
> 
> 标签：java, android, nullpointerexception, forceclose

当我的笔记本电脑死机时，我丢失了所有代码。没有康复的希望。从备份重建我的应用程序后，除了强制关闭，我什么也没得到，没有错误。我尝试研究并阅读日志。

日志猫：

```
10-05 04:01:09.858: W/dalvikvm(4257): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
10-05 04:01:09.858: E/AndroidRuntime(4257): FATAL EXCEPTION: main
10-05 04:01:09.858: E/AndroidRuntime(4257): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hyperspacemg.showstopper/com.hyperspacemg.showstopper.MainActivity}: java.lang.NullPointerException
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.os.Looper.loop(Looper.java:130)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread.main(ActivityThread.java:3835)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at java.lang.reflect.Method.invokeNative(Native Method)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at java.lang.reflect.Method.invoke(Method.java:507)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at dalvik.system.NativeStart.main(Native Method)
10-05 04:01:09.858: E/AndroidRuntime(4257): Caused by: java.lang.NullPointerException
10-05 04:01:09.858: E/AndroidRuntime(4257):     at com.hyperspacemg.showstopper.MainActivity.onCreate(MainActivity.java:131)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-05 04:01:09.858: E/AndroidRuntime(4257):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
10-05 04:01:09.858: E/AndroidRuntime(4257):     ... 11 more 
```

如果您需要我的代码，请告诉我，StackOverflow 说我有太多代码要发布...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:41:25.157

它仍然是已从 GUI 中删除的代码，但仍留在活动中。删除与 Null 值“side”相关的所有代码（我在第 284 行遗漏了一些代码）修复了它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T09:03:21.243

请关闭其他项目并清理项目。这将解决它。

# cloud-foundry - VCAP 路由器：404 - 未找到目标

> ID：12742327
> 
> 赞同：0
> 
> 时间：2012-10-05T08:23:16.267
> 
> 标签：cloud-foundry, vmc

我在 Virturalbox（Ubuntu 11.10 服务器版本）中安装的单节点 cloudfoundry 有一些问题

我成功安装了 cloudfoundry 并将我的第一个用 ruby​​ 编写的应用程序推送到了 cloudfoundry

当我检查时，`vmc apps`我可以看到我的应用程序“正在运行”，但是当我尝试从外部连接时（主机操作系统）

我`192.168.11.51`输入了浏览器的 url（这是我的 vm 的 ip 地址），它只显示

> VCAP 路由器：404 - 未找到目标

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:23:05.913

我怀疑这是dns的问题。要知道将请求路由到哪个应用程序，CF 基本上需要查看 Host: 标头。

所以你应该做的是确保你的虚拟机的外部 IP 被称为 *.vcap.me

# android - 如何使原生 android 应用程序在一个活动中表现得像 web 应用程序？

> ID：12742334
> 
> 赞同：0
> 
> 时间：2012-10-05T08:23:41.973
> 
> 标签：android

我有一个本机 android 应用程序，其中有两个活动，第一个活动包含一个按钮，并且在按钮操作时我想启动第二个活动。秒活动的内容将来自网站。**是否可以使第二个活动表现得像 webapp ？**

如果我在这种情况下使用 WebView，它会在活动中显示网站，但是当我尝试与网站交互时，它会要求在我不想要的浏览器中打开它。我想在活动中与网站进行交互。

任何帮助将不胜感激。万分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:44:05.653

使用下面的代码...在 WebView 本身而不是浏览器中打开链接...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view);       
    WebView engine = (WebView) findViewById(R.id.web_view);
    engine.loadUrl("https://play.google.com/store?hl=en");
    engine.setWebViewClient( new HelloWebViewClient() );
} 

 private class HelloWebViewClient extends WebViewClient {

  @Override
  public boolean shouldOverrideUrlLoading( WebView view, String url ) {                 

     return false;
  }
} 
```

有关更多详细信息，请参阅此链接... [WebView 不应在浏览器中打开链接](https://stackoverflow.com/questions/12477214/webview-should-not-open-links-in-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:26:29.583

我认为如果您在创建 Webview 时设置 baseURL 属性，您将得到您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:34:03.843

创建您自己的 Webview，您可以在其中覆盖默认行为：

```
private class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

# ruby-on-rails - Rails 3 路由

> ID：12742335
> 
> 赞同：1
> 
> 时间：2012-10-05T08:23:44.237
> 
> 标签：ruby-on-rails, routing, rake

我有一个奇怪的问题。我正在使用带有脚手架的导轨来创建 CRUD 和其他东西。然后我添加了一个名为 cnt 的函数，它应该给我表格条目的计数。例如 Albums.count 用于密码。但是今天早上，整个路由都指向那个页面。当我尝试访问 xxx/elements 时，我被链接到了 /cntalbums。

看起来像一个路由的东西 - 这是我的 routes.rb：

```
Something::Application.routes.draw do
  resources :albums
  get "home/index"
  resources :elements
  root :to => 'home#index'
end 
```

就这样。我删除了cnt的视图，我删除了位于a​​lbums_controller中的方法。所以没有 friggn 点剩下，在哪里实现 cnt。但似乎每个 GET 都链接到该页面。我在我的日志中得到了这个：

```
Started GET "/albums" for xxxx at Fri Oct 05 09:54:42 +0200 2012
Processing by AlbumsController#cnt as HTML
Parameters: {"cntalbums"=>"albums"}
Completed 500 Internal Server Error in 47ms

ActionView::MissingTemplate (Missing template albums/cnt, application/cnt with {:formats=>[:html], :locale=>[:en], :handlers=>[:erb, :builder]}. Searched in:
* "/kunden/nnax.de/webseiten/entwicklung/poezy/app/views"
):
 app/controllers/albums_controller.rb:18:in `cnt' 
```

我有：

```
match ':cntalbums' => 'albums#cnt', :as => 'cnt_albums', :via => :get 
```

前; 但我已经删除了。所以我没有任何线索，为什么我看不到我的专辑、元素等。最后： rake routes 给了我：

```
albums GET    /albums(.:format)            albums#index
         POST   /albums(.:format)            albums#create
new_album GET    /albums/new(.:format)        albums#new
edit_album GET    /albums/:id/edit(.:format)   albums#edit
     album GET    /albums/:id(.:format)        albums#show
         PUT    /albums/:id(.:format)        albums#update
         DELETE /albums/:id(.:format)        albums#destroy
elements GET    /elements(.:format)          elements#index
         POST   /elements(.:format)          elements#create
new_element GET    /elements/new(.:format)      elements#new
 edit_element GET    /elements/:id/edit(.:format) elements#edit
   element GET    /elements/:id(.:format)      elements#show
         PUT    /elements/:id(.:format)      elements#update
         DELETE /elements/:id(.:format)      elements#destroy
    home_index GET    /home/index(.:format)        home#index
    root        /                            home#index 
```

所以我的理解很清楚；我想去专辑或元素，它进入了拟合控制器的功能。但它总是试图到达 AlbumsController#cnt

尽管该功能甚至不再存在

任何提示？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:33:41.820

尝试这个

```
Something::Application.routes.draw do
 resources :albums
 ...
 match ':cntalbums' => 'albums#cnt', :as => 'cnt_albums', :via => :get
 ...
 get "home/index"
 resources :elements
 root :to => 'home#index'
end 
```

因为铁路路线是先到先得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:28:08.300

Rails 路由是先来先路由的，所以如果 CNT 规则高于一切，Rails 会路由它。看着规矩

```
match ':cntalbums' => 'albums#cnt', :as => 'cnt_albums', :via => :get 
```

请注意，任何 URL 都将与此匹配。该路径`/hello/world`将导致`:cntalbums => "hello/world"`.

如果你已经从你的路由中删除了该行但仍然被它路由，你确定你已经重新启动了你的 Rails 服务器吗？（甚至可以尝试清除浏览器的缓存，但这应该不是问题）

# c# - 在 GridRowCommand 上更新网格视图的数据源

> ID：12742338
> 
> 赞同：0
> 
> 时间：2012-10-05T08:23:58.283
> 
> 标签：c#, asp.net, gridview

如何在 rowcommand 上更新 gridview 的数据源。我有一个 TemplateField 作为按钮，并且在 Datasource 中有一个 Bool 变量 IsClicked 来记录按钮是否曾经被点击过。如果单击按钮并将更新的数据源分配给网格，我需要将 IsClicked 值更新为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:31:26.533

您可以尝试使用此代码

```
void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    //You can try with Command Name.
    if(e.CommandName=="Update")
    {
      .....  
    }

    //You can also try with sender parameter
    var control = (Button)sender;
    if(control.Id = "YourId")
    {
      .....
    } 
} 
```

# search - 如何在 Elasticsearch 中排序然后应用限制过滤器

> ID：12742341
> 
> 赞同：1
> 
> 时间：2012-10-05T08:24:14.950
> 
> 标签：search, lucene, elasticsearch

我想根据特定字段对结果进行[排序，然后应用](http://www.elasticsearch.org/guide/reference/api/search/sort.html)[限制](http://www.elasticsearch.org/guide/reference/query-dsl/limit-filter.html)过滤器。

一个简单的常见示例是 SQL 查询，例如`select name from users order by name limit 100`返回限制为 100 的排序结果。

我在 Elasticsearch 中尝试了同样的方法。然而，这并没有发生。它首先应用限制，然后进行排序，这给了我不想要的结果。谁能指出我做错了什么？这是我目前正在使用的查询。

```
{
  "sort": [
    "full_name"
  ],
  "filter": {
    "limit": {
      "value": 100
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:07:19.083

在 ElasticSearch 中使用“大小”怎么样？[http://www.elasticsearch.org/guide/reference/api/search/from-size.html](http://www.elasticsearch.org/guide/reference/api/search/from-size.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T19:12:03.980

限制过滤器首先对每个分片起作用，然后将结果合并到其中一个节点上。如果你有多个分片，那会产生有趣的结果。我认为，正如 Gabbar 已经提到的，您正在寻找的是“大小”参数。

# android - Android获取所有ListView项目的截图

> ID：12742343
> 
> 赞同：22
> 
> 时间：2012-10-05T08:24:26.210
> 
> 标签：android, screenshot

```
View v = rootView.findViewById(R.id.layout1);
if (v != null) {
    v.buildDrawingCache();
    Bitmap bitmap = v.getDrawingCache();
    canvas.drawBitmap(bitmap, dummyMatrix, null);
    v.destroyDrawingCache();   
} 
```

我有这个代码。但我需要截取我所有的 ListView 项目，但如果我的 listview 的项目比屏幕上可见的项目多，则当项目大于可见矩形时，此代码不会捕获。

如何正确捕获我的 ListView？

**我创建的新工作代码**

```
public static Bitmap getWholeListViewItemsToBitmap() {

    ListView listview    = MyActivity.mFocusedListView;
    ListAdapter adapter  = listview.getAdapter(); 
    int itemscount       = adapter.getCount();
    int allitemsheight   = 0;
    List<Bitmap> bmps    = new ArrayList<Bitmap>();

    for (int i = 0; i < itemscount; i++) {

        View childView      = adapter.getView(i, null, listview);
        childView.measure(MeasureSpec.makeMeasureSpec(listview.getWidth(), MeasureSpec.EXACTLY), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

        childView.layout(0, 0, childView.getMeasuredWidth(), childView.getMeasuredHeight());
        childView.setDrawingCacheEnabled(true);
        childView.buildDrawingCache();
        bmps.add(childView.getDrawingCache());
        allitemsheight+=childView.getMeasuredHeight();
    }

    Bitmap bigbitmap    = Bitmap.createBitmap(listview.getMeasuredWidth(), allitemsheight, Bitmap.Config.ARGB_8888);
    Canvas bigcanvas    = new Canvas(bigbitmap);

    Paint paint = new Paint();
    int iHeight = 0;

    for (int i = 0; i < bmps.size(); i++) {
        Bitmap bmp = bmps.get(i);
        bigcanvas.drawBitmap(bmp, 0, iHeight, paint);
        iHeight+=bmp.getHeight();

        bmp.recycle();
        bmp=null;
    }

    return bigbitmap;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-18T14:23:16.027

工作代码：

```
public static Bitmap getWholeListViewItemsToBitmap() {

    ListView listview    = MyActivity.mFocusedListView;
    ListAdapter adapter  = listview.getAdapter(); 
    int itemscount       = adapter.getCount();
    int allitemsheight   = 0;
    List<Bitmap> bmps    = new ArrayList<Bitmap>();

    for (int i = 0; i < itemscount; i++) {

        View childView      = adapter.getView(i, null, listview);
        childView.measure(MeasureSpec.makeMeasureSpec(listview.getWidth(), MeasureSpec.EXACTLY), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

        childView.layout(0, 0, childView.getMeasuredWidth(), childView.getMeasuredHeight());
        childView.setDrawingCacheEnabled(true);
        childView.buildDrawingCache();
        bmps.add(childView.getDrawingCache());
        allitemsheight+=childView.getMeasuredHeight();
    }

    Bitmap bigbitmap    = Bitmap.createBitmap(listview.getMeasuredWidth(), allitemsheight, Bitmap.Config.ARGB_8888);
    Canvas bigcanvas    = new Canvas(bigbitmap);

    Paint paint = new Paint();
    int iHeight = 0;

    for (int i = 0; i < bmps.size(); i++) {
        Bitmap bmp = bmps.get(i);
        bigcanvas.drawBitmap(bmp, 0, iHeight, paint);
        iHeight+=bmp.getHeight();

        bmp.recycle();
        bmp=null;
    }

    return bigbitmap;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-14T06:20:18.710

虽然不可能对尚未渲染的内容（如 ListView 的屏幕外项目）进行屏幕截图，但您可以制作多个屏幕截图，在每个镜头之间滚动内容，然后加入图像。这是一个可以为您自动执行此操作的工具：[https ://github.com/PGSSoft/scrollscreenshot](https://github.com/PGSSoft/scrollscreenshot)

![插图](../Images/7fe7cc1853b00040f00a2a247b36ac6a.png)

免责声明：我是这个工具的作者，它是由[我的雇主](http://www.pgs-soft.com)出版的。欢迎提出功能要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:20:13.607

使用此函数获取列表视图的位图

```
public Bitmap getBitmapFromView(View view) {

Bitmap returnedBitmap = Bitmap.createBitmap(view.getMeasuredWidth(),
              view.getMeasuredHeight() , Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(returnedBitmap);
Drawable bgDrawable = view.getBackground();
if (bgDrawable != null)
    bgDrawable.draw(canvas);
else
    canvas.drawColor(Color.WHITE);
view.draw(canvas);
        return returnedBitmap;
} 
```

用这个作为

```
Bitmap b = getBitmapFromView(your listview object here); 
```

并根据需要使用此位图

希望帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-09T10:40:38.413

如果您生成的位图具有黑色背景。这是因为您查看无法从 xml 文件中获取颜色。所以设置视图的颜色

```
View v = adapter.getView(i, null, listview);
            v.measure(View.MeasureSpec.makeMeasureSpec(listview.getWidth(), View.MeasureSpec.EXACTLY),
                    View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
            v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());
            v.setDrawingCacheEnabled(true);
            v.buildDrawingCache(true);
            v.setBackgroundColor(Color.parseColor("#F08080"));
            bmps.add(v.getDrawingCache(true));
            allitemsheight += v.getMeasuredHeight(); 
```

# java - JPA/Hibernate + HQL/JPQL：使用 BigDecimal 参数选择 DTO

> ID：12742345
> 
> 赞同：2
> 
> 时间：2012-10-05T08:24:29.743
> 
> 标签：java, hibernate, jpa, hql, jpql

我们使用 JPA 和 hibernate 作为实现。假设我有以下 DTO：

```
public class SupplierInfoDto{
   private String supplierName;
   private BigDecimal remainingFinances;

   public SupplierInfoDto(String supplierName, BigDecimal remainingFinances){
       this.supplierName = supplierName;
       this.remainingFinances = remainingFinances;
   }

   // getters / setters
} 
```

我似乎无法休眠以正确找到此构造函数。我首先尝试了以下查询（模型比这更复杂，我最终需要获取一些聚合（不是直接在实体上），这就是我获取 DTO 而不是实体的原因）：

```
SELECT NEW com.company.dto.SupplierInfoDto(s.name, f.remaining)
FROM Supplier s INNER JOIN Finances f
WHERE s.id = :SupplierId 
```

但是，我得到一个 `org.hibernate.hql.ast.QuerySyntaxException: Unable to locate appropriate constructor on class`例外。

我从中选择的`remaining`列在 MSSQL 中存储为浮点数（我知道，我知道钱永远不应该存储为浮点数，但这是一个现有系统，我不能只更改此数据类型）..

作为测试，我尝试了以下查询，但有与上述相同的异常：

```
SELECT NEW com.company.dto.SupplierInfoDto(s.name, NEW java.math.BigDecimal(10))
FROM Supplier s
WHERE s.id = :SupplierId 
```

所以我的问题是：如何让 hibernate/JPA 为上面的两个查询找到合适的构造函数？

**更新：**该`remaining`属性在财务实体上属于 double 类型（不是我的决定）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:00:22.277

我不确定为什么 BigDecimal ctor 没有被识别但是你可以重载你的构造函数

如果你有

```
public SupplierInfoDto(String s, Double d) {
   this(s, new BigDecimal(String.valueOf(d)));
}

public SupplierInfoDto(String s, BigDecimal bd) {
   //set fields
} 
```

并不是说如果您使用 BigDecimal double 构造函数，则该数字基于双精度数，因此仍然可能存在舍入错误。通常最好使用 BigDecimal 字符串 contstrctor

例如

```
new BigDecimal("0.1") 
```

比更精确

```
new BigDecimal(0.1d) 
```

[这篇](http://rayfd.me/2007/04/26/the-evil-bigdecimal-constructor/)文章解释了这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-15T04:38:07.477

试试这个：

```
CAST(f.remaining AS big_decimal) 
```

根据[https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/queryhql.html](https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/queryhql.html)：</p>

> cast(... as ...)，其中第二个参数是***Hibernate 类型***的名称，如果底层数据库支持 ANSI cast() 和 extract()，则为 extract(... from ...)

和[https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/type/package-summary.html](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/type/package-summary.html)

> BigDecimalType ***big_decimal***：将 SQL NUMERIC 映射到 java.math.BigDecimal 的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:56:14.907

```
class named X  with a constructor that takes two parameters. The types of the parameters from the SELECT clause must match the signature defined in the class.

Syntax for the SELECT clause:

select_clause ::= SELECT [DISTINCT] select_expression
    {, select_expression}*
    select_expression ::=
    single_valued_path_expression |
    aggregate_expression |
    identification_variable |
    OBJECT(identification_variable) |
    constructor_expression
    constructor_expression ::=
    NEW constructor_name ( constructor_item {, constructor_item}* )
    constructor_item ::= single_valued_path_expression |
    aggregate_expression
    aggregate_expression ::=
    { AVG | MAX | MIN | SUM }
    ([DISTINCT] state_field_path_expression) |
    COUNT ([DISTINCT] identification_variable |
    state_field_path_expression |
    single_valued_association_path_expression) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:59:23.457

为什么不使用 java.lang.Number 作为构造函数参数，并根据参数的 .floatValue() / doubleValue() 创建 BigDecimal 字段。

# php - 具有错误字符容差的最长公共子串

> ID：12742348
> 
> 赞同：4
> 
> 时间：2012-10-05T08:24:50.873
> 
> 标签：php, string-matching, levenshtein-distance, longest-substring

我在这里找到了一个脚本，在查找最低公共子字符串时效果很好。

但是，我需要它来容忍一些不正确/缺失的字符。我希望能够输入所需的相似度百分比，或者指定允许的缺失/错误字符数。

例如，我想找到这个字符串：

**大黄色校车**

在这个字符串里面：

**那天下午他们坐上了大黄校车**

这是我目前正在使用的代码：

```
function longest_common_substring($words) {
    $words = array_map('strtolower', array_map('trim', $words));
    $sort_by_strlen = create_function('$a, $b', 'if (strlen($a) == strlen($b)) { return strcmp($a, $b); } return (strlen($a) < strlen($b)) ? -1 : 1;');
    usort($words, $sort_by_strlen);

    // We have to assume that each string has something in common with the first
    // string (post sort), we just need to figure out what the longest common
    // string is. If any string DOES NOT have something in common with the first
    // string, return false.
    $longest_common_substring = array();
    $shortest_string = str_split(array_shift($words));

    while (sizeof($shortest_string)) {
        array_unshift($longest_common_substring, '');
        foreach ($shortest_string as $ci => $char) {
            foreach ($words as $wi => $word) {
                if (!strstr($word, $longest_common_substring[0] . $char)) {
                    // No match
                    break 2;
                }
            }
            // we found the current char in each word, so add it to the first longest_common_substring element,
            // then start checking again using the next char as well
            $longest_common_substring[0].= $char;
        }
        // We've finished looping through the entire shortest_string.
        // Remove the first char and start all over. Do this until there are no more
        // chars to search on.
        array_shift($shortest_string);
    }

    // If we made it here then we've run through everything
    usort($longest_common_substring, $sort_by_strlen);

    return array_pop($longest_common_substring);
} 
```

任何帮助深表感谢。

**更新**

PHP levenshtein 函数限制为 255 个字符，而我正在搜索的一些干草堆是 1000 多个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:38:55.423

将其写为第二个答案，因为它根本不是基于我以前的（坏的）答案。

此代码基于[http://en.wikipedia.org/wiki/Wagner%E2%80%93Fischer_algorithm](http://en.wikipedia.org/wiki/Wagner%E2%80%93Fischer_algorithm)和[http://en.wikipedia.org/wiki/Approximate_string_matching#Problem_formulation_and_algorithms](http://en.wikipedia.org/wiki/Approximate_string_matching#Problem_formulation_and_algorithms)

给定$needle，它返回$haystack 的一个（可能是几个）最小levenshtein 子字符串。现在，levenshtein 距离只是编辑距离的一种度量，它实际上可能并不适合您的需求。在这个度量上，'hte' 更接近于 'he' 而不是 'the'。我放入的一些示例显示了这种技术的局限性。我相信这比我之前给出的答案要可靠得多，但请告诉我它对您的工作原理。

```
// utility function - returns the key of the array minimum
function array_min_key($arr)
{
    $min_key = null;
    $min = PHP_INT_MAX;
    foreach($arr as $k => $v) {
        if ($v < $min) {
            $min = $v;
            $min_key = $k;
        }
    }
    return $min_key;
}

// Calculate the edit distance between two strings
function edit_distance($string1, $string2)
{
    $m = strlen($string1);
    $n = strlen($string2);
    $d = array();

    // the distance from '' to substr(string,$i)
    for($i=0;$i<=$m;$i++) $d[$i][0] = $i;
    for($i=0;$i<=$n;$i++) $d[0][$i] = $i;

    // fill-in the edit distance matrix
    for($j=1; $j<=$n; $j++)
    {
        for($i=1; $i<=$m; $i++)
        {
            // Using, for example, the levenshtein distance as edit distance
            list($p_i,$p_j,$cost) = levenshtein_weighting($i,$j,$d,$string1,$string2);
            $d[$i][$j] = $d[$p_i][$p_j]+$cost;
        }
    }

    return $d[$m][$n];
}

// Helper function for edit_distance()
function levenshtein_weighting($i,$j,$d,$string1,$string2)
{
    // if the two letters are equal, cost is 0
    if($string1[$i-1] === $string2[$j-1]) {
        return array($i-1,$j-1,0);
    }

    // cost we assign each operation
    $cost['delete'] = 1;
    $cost['insert'] = 1;
    $cost['substitute'] = 1;

    // cost of operation + cost to get to the substring we perform it on
    $total_cost['delete'] = $d[$i-1][$j] + $cost['delete'];
    $total_cost['insert'] = $d[$i][$j-1] + $cost['insert'];
    $total_cost['substitute'] = $d[$i-1][$j-1] + $cost['substitute'];

    // return the parent array keys of $d and the operation's cost
    $min_key = array_min_key($total_cost);
    if ($min_key == 'delete') {
        return array($i-1,$j,$cost['delete']);
    } elseif($min_key == 'insert') {
        return array($i,$j-1,$cost['insert']);
    } else {
        return array($i-1,$j-1,$cost['substitute']);
    }
}

// attempt to find the substring of $haystack most closely matching $needle
function shortest_edit_substring($needle, $haystack)
{
    // initialize edit distance matrix
    $m = strlen($needle);
    $n = strlen($haystack);
    $d = array();
    for($i=0;$i<=$m;$i++) {
        $d[$i][0] = $i;
        $backtrace[$i][0] = null;
    }
    // instead of strlen, we initialize the top row to all 0's
    for($i=0;$i<=$n;$i++) {
        $d[0][$i] = 0;
        $backtrace[0][$i] = null;
    }

    // same as the edit_distance calculation, but keep track of how we got there
    for($j=1; $j<=$n; $j++)
    {
        for($i=1; $i<=$m; $i++)
        {
            list($p_i,$p_j,$cost) = levenshtein_weighting($i,$j,$d,$needle,$haystack);
            $d[$i][$j] = $d[$p_i][$p_j]+$cost;
            $backtrace[$i][$j] = array($p_i,$p_j);
        }
    }

    // now find the minimum at the bottom row
    $min_key = array_min_key($d[$m]);
    $current = array($m,$min_key);
    $parent = $backtrace[$m][$min_key];

    // trace up path to the top row
    while(! is_null($parent)) {
        $current = $parent;
        $parent = $backtrace[$current[0]][$current[1]];
    }

    // and take a substring based on those results
    $start = $current[1];
    $end = $min_key;
    return substr($haystack,$start,$end-$start);
}

// some testing
$data = array( array('foo',' foo'), array('fat','far'), array('dat burn','rugburn'));
$data[] = array('big yellow school bus','they rode the bigyellow schook bus that afternoon');
$data[] = array('bus','they rode the bigyellow schook bus that afternoon');
$data[] = array('big','they rode the bigyellow schook bus that afternoon');
$data[] = array('nook','they rode the bigyellow schook bus that afternoon');
$data[] = array('they','console, controller and games are all in very good condition, only played occasionally. includes power cable, controller charge cable and audio cable. smoke free house. pes 2011 super street fighter');
$data[] = array('controker','console, controller and games are all in very good condition, only played occasionally. includes power cable, controller charge cable and audio cable. smoke free house. pes 2011 super street fighter');

foreach($data as $dat) {
    $substring = shortest_edit_substring($dat[0],$dat[1]);
    $dist = edit_distance($dat[0],$substring);
    printf("Found |%s| in |%s|, matching |%s| with edit distance %d\n",$substring,$dat[1],$dat[0],$dist);
} 
```

# jaxb - 使用 @XmlAnyElement 注释时的 JAXB MOXy Binder 问题

> ID：12742355
> 
> 赞同：1
> 
> 时间：2012-10-05T08:25:39.047
> 
> 标签：jaxb, eclipselink, moxy

在 MOXy 中使用 Binder 实现时遇到问题。
这是输入 XML 文档 (input.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <unmapped />
</root> 
```

现在，这里是用于将 XML 解组为 Binder 实例然后从相应的 Java 对象更新 XML 的源代码：

```
JAXBContext context = JAXBContext.newInstance(Input.class);

DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = documentBuilderFactory.newDocumentBuilder();
Document document = builder.parse(new File("input.xml"));

Binder<Node> binder = context.createBinder(Node.class);
Input input = (Input) binder.unmarshal(document);

binder.updateXML(input); 
```

最后，非常简单的 Input 类文件：

```
@XmlRootElement(name = "root")
public class Input {
    @XmlAnyElement
    protected Object[] elements;
} 
```

调用该`updateXML()`方法时，会抛出以下异常：

```
java.lang.NullPointerException
at org.eclipse.persistence.internal.jaxb.DomHandlerConverter.convertObjectValueToDataValue(DomHandlerConverter.java:97) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:06:26.587

我们已经能够确认这个问题，看起来这将是一个非常快速的解决方案。您可以使用下面的链接来跟踪我们在此问题上的进展。

*   [http://bugs.eclipse.org/391237](http://bugs.eclipse.org/391237)

* * *

**更新**

EclipseLink 2.5.0 流中已检入一个修复程序，可从以下位置获取每晚下载：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

我们还签入了对 EclipseLink 2.4.2 流的修复。从 2012 年 10 月 12 日开始，可以从上述位置获取每晚下载。

# javascript - 复选框的状态看起来更新了，但实际上并没有更新

> ID：12742357
> 
> 赞同：0
> 
> 时间：2012-10-05T08:25:45.370
> 
> 标签：javascript, jquery, html

我有奇怪的问题。我正在为 Magento 开发一些东西。我添加了链接“选择所有类别”并添加了一个 jQuery 事件以在我单击它时检查所有复选框。它工作得很好，但不知何故 html 没有更新，Magento 看不到所有输入都被选中。但是当我手动单击一个复选框时，它会更新 html（我正在查看控制台）并且 Magento 保存按钮工作得很好。

如何解决这个问题？我不确定我还应该做什么来执行更新 html。看起来它可以工作（选中复选框），但请查看控制台和 html。必须更新 HTML。

我创建了 jsfiddle：[这里](http://jsfiddle.net/hWGEZ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:47:54.977

试试这个：

```
.attr('checked', 'checked'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:32:17.463

只需选中所有复选框，就像[**这样**](http://jsfiddle.net/gnel/hWGEZ/1/)。

您的`is(':checked')`IF 语句似乎是错误的，因为它应该包含在 an 中，`.each()`因此它适用于所有复选框，请在我链接的小提琴上尝试更简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:34:04.920

你试过`prop('checked', true);`代替`prop('checked', 'checked');`吗？这就是我在所有例子中看到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T08:40:27.147

我想到了。这是Magento的问题。Magento 不使用这种形式，它使用隐藏输入并收集选定的复选框。无论如何都会赞成所有答案。谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T08:41:54.650

你可以使用类似的东西：

```
// custom jQuery added
jQuery(function() {
    var to_check = false;       
    jQuery(".select-all-categories").click(function(){
        if (!to_check)
            to_check = true;
        else
            to_check = false;

        jQuery("#banner-categories input[type=checkbox]").each(function(){
            if (!to_check)      
                jQuery(this).removeAttr("checked");
            else  
                jQuery(this).attr("checked","checked");
        });          
        return false;
    });
}); 
```

代码可以优化

# java - 在Android中将数据传递到寻呼机适配器内的片段中的问题

> ID：12742360
> 
> 赞同：0
> 
> 时间：2012-10-05T08:25:45.693
> 
> 标签：java, android, android-fragments, android-fragmentactivity

这是我用于加载片段的视图寻呼机适配器。在 getItem() 方法中，我尝试使用传递给该函数的索引动态插入值。我在 productData 中有所有数据。但它总是获取

```
 productData.get(0).get("name") 
```

进入所有的片段。索引值被正确地传递到片段中。我验证过了。而且productData里面的数据也是正确的。这里的问题在哪里？

```
 public class ProductViewPagerAdapter extends FragmentPagerAdapter {
    public ProductViewPagerAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int i) {            
        Fragment fragment = new ProductViewFragment();
        Bundle args = new Bundle();
        args.putInt("number", i + 1);
        args.putString("name", productData.get(i).get("name"));
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 10;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return "test1";
            case 1: return "2";
            case 2: return "3";
            case 3: return "4";
        }
        return null;
    }     

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:32:05.750

问题是您只有一个`HashMap`. 即使您不断更改 中的数据`HashMap`，该列表`productItems`也只包含 10 个对单个 . 的引用`HashMap`。所以最后，它将包含最终数据集的 10 个副本。

您想要做的是`HashMap`为每个循环迭代创建一个新的。这是修改后的代码：

```
public ArrayList<HashMap<String,String>> getData(AsyncTask<Void, Void, Void> asynctask, String query) throws URISyntaxException
{
    api_url += query;
    //  Log.v("API url",api_url);
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(api_url); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_PRODUCT);
    ArrayList<HashMap<String, String>> productItems = new ArrayList<HashMap<String, String>>();
    for (int i = 0; i < 10; i++) {
        Element e = (Element) nl.item(i);           
        // adding each child node to HashMap key => value
        HashMap<String, String> map = new HashMap<String, String>();
        map.put(KEY_PROD_NAME, e.getAttribute(KEY_PROD_NAME));
        map.put(KEY_ID, e.getAttribute(KEY_MER_ID));
        map.put(KEY_PRICE, e.getAttribute(KEY_MER_PRICE));      
        Log.v("fsd:",e.getAttribute(KEY_PROD_NAME));
        // adding HashList to ArrayList
        productItems.add(map);      
    }       
    return productItems;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:15:40.490

就是这样，

```
public ArrayList<HashMap<String, String>> productItems = new ArrayList<HashMap<String, String>>();
public HashMap<String, String> map = new HashMap<String, String>();

public ArrayList<HashMap<String,String>> getData(AsyncTask<Void, Void, Void> asynctask, String query) throws URISyntaxException
{   
        api_url += query;
        //  Log.v("API url",api_url);
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(api_url); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList nl = doc.getElementsByTagName(KEY_PRODUCT);
    for (int i = 0; i < 10; i++) {          
        Element e = (Element) nl.item(i);           
        // adding each child node to HashMap key => value
        map.put(KEY_PROD_NAME, e.getAttribute(KEY_PROD_NAME));
        map.put(KEY_ID, e.getAttribute(KEY_MER_ID));
        map.put(KEY_PRICE, e.getAttribute(KEY_MER_PRICE));      
        Log.v("fsd:",e.getAttribute(KEY_PROD_NAME));
        // adding HashList to ArrayList
        productItems.add(map);      
    }       
    return productItems;    
} 
```

# java - 如何在 Java 中配置和使用 KStem？

> ID：12742361
> 
> 赞同：0
> 
> 时间：2012-10-05T08:26:04.967
> 
> 标签：java, solr, lucene, stemming

我想阻止我文档中的单词，并把注意力集中在 KStem 上。我在 Eclipse 中工作，并通过将 lucene-core jar 文件下载到 lib 文件夹并将其添加到构建路径来配置 Lucene。我同样对 KStem jar 文件执行此操作。但是，我找不到任何关于如何在我的 java 代码中使用 KStem 库的示例或文档。我是否需要为此设置 Solr - 不完全确定它的用途。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:14:06.643

您只需将 KStem 配置为由您的架构中的 Lucene / SOLR 拾取（在将包含您的文档内容的字段类型中），并且只发送文档以从您的代码中进行索引。其余的魔法（包括标记化/词干提取/停用词删除等）发生在 Lucene / SOLR 内部（取决于您将它们配置为应用于文档的处理步骤）。请参阅如何在 SOLR 中配置 KStem：[http ://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/Kstem](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/Kstem)

简而言之，Lucene 是强大的索引和检索库，在 SOLR 内部使用，而 SOLR 又是成熟的搜索服务器。

如果您需要分面搜索、自动完成、分片、复制等功能，请安装和配置 Solr。如果不是，例如，如果您的目标是拥有一些相对较小的文档索引，可以快速重新构建，并且您希望在自己的应用程序中组织搜索，那么使用 Lucene 作为 java 库。

如何在自己的代码中使用 KStemmer：

```
private final KStemmer stemmer = new KStemmer();
// char[] term = ...
stemmer.stem(term, len); 
```

您必须自己将文档内容拆分为术语列表。

这是在 Lucene 中使用 KStemmer 的方式：http: [//svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src/java/org/apache/lucene/analysis/en/KStemFilter .java](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src/java/org/apache/lucene/analysis/en/KStemFilter.java)

请注意，KStemmer 类是 Lucene 当前主干 (org.apache.lucene.analysis.en) 的一部分：http: [//svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src /java/org/apache/lucene/analysis/en/KStemmer.java](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src/java/org/apache/lucene/analysis/en/KStemmer.java)

# objective-c - Objective-C - 正确的初始化方法

> ID：12742362
> 
> 赞同：1
> 
> 时间：2012-10-05T08:26:08.643
> 
> 标签：objective-c, cocoa, init

我进行了子类`UITableViewCell`化，并在其中`- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier`设置了一些实例变量，如下所示：

```
_image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]] 
```

我没有使用任何访问器，因为 Apple 建议不要在 和 中使用访问`init`器`dealloc`。

到目前为止，一切都很好。我的问题是在我设置了要为图像设置的 _image`userInteractionEnabled`之后`YES`。我应该使用 getter 还是应该直接使用 ivar？

```
self.image.userInteractionEnabled = YES; 
```

或者

```
_image.userInteractionEnabled = YES; 
```

首选使用哪种风格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:31:02.393

建议仍然成立：直接在 init 中使用 ivar。如果您曾经在该属性上实现自定义访问器（现在或以后，此处或子类化时），您可能会遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:42:11.810

[第三种选择](http://tvtropes.org/pmwiki/pmwiki.php/Main/TakeAThirdOption)：将图像分配给局部变量，`userInteractionEnabled`使用它完全设置（例如，它的），然后将其分配给局部变量中的实例变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T08:29:24.807

由于这是一个属性值，self.image... 更正确，它将确保发送所有通知，并且如果有其他任何东西正在观察该对象是否运行。如果您使用 _image... 则不会发送任何通知。

# android - 确保屏幕方向固定为纵向并且永不更改

> ID：12742364
> 
> 赞同：1
> 
> 时间：2012-10-05T08:26:19.503
> 
> 标签：android, android-activity, orientation

我希望我的 Android 应用程序只实例化一次它的主屏幕活动。我正在适当地管理后台堆栈以实现此目的，但刚刚在应用程序启动时发现了一个方向问题。

从视觉上看，这种方向变化只在模拟器上显示出来。（可能运行速度太快而无法在设备上观察到）。

这是发生的事情::->

```
activity.onCreate()
activity.onDestroy()
activity.onCreate() 
```

这个顺序是有道理的，并且是由方向的变化引起的。（对我来说）没有意义的是它发生了，因为我做了以下事情来防止方向改变::->

AndroidManifest.xml 包含

```
android:screenOrientation="portrait" 
```

对于我的所有活动和主屏幕活动 onCreate() 方法，我正在调用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

那么为什么我会改变方向呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:28:45.360

添加`android:screenOrientation="portrait"`清单文件，在其中声明您的活动，如下所示

```
<activity android:name=".yourActivity"
          ....
          android:screenOrientation="portrait"/> 
```

如果你想使用 java 代码试试

```
setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

在您`setContentView`参加活动之前`onCreate()`

看[这里](https://stackoverflow.com/questions/582185/android-disable-landscape-mode/12618558#12618558)

# javascript - JavaScript：我如何在构造函数中使用函数

> ID：12742369
> 
> 赞同：0
> 
> 时间：2012-10-05T08:26:29.873
> 
> 标签：javascript

以下代码不起作用：

```
function CClass() {
   myFunc(); //says it doesnt know about myFunc
}

CClass.prototype = {
   myFunc: function () {}
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:30:42.113

`myFunc`不在全局范围内。

你应该使用

```
function CClass() {
   this.myFunc(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:30:32.920

试试这个：

```
function CClass() {
   this.myFunc();    
} 
```

并在这里看到它的实际效果：

[http://jsfiddle.net/N9wem/](http://jsfiddle.net/N9wem/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:30:36.040

```
CClass.prototype.myFunc = function(){
    alert("myFunc")
};

function CClass() {
   this.myFunc();
}

c = new CClass()
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:37:01.023

你想这样做吗？

```
function CClass() {
   this.myFunc()
}

CClass.prototype = {
   myFunc: function () { 
      alert('hello from prototype');
  }
};

var cc = new CClass();   // hello from prototype 
```

# linux - openssl 在命令行中设置私钥的密码

> ID：12742372
> 
> 赞同：0
> 
> 时间：2012-10-05T08:26:46.223
> 
> 标签：linux, openssl

我正在尝试通过 openssl 工具加密一些数据，问题是如何在此命令中为 private.key 设置密码：

```
openssl smime -sign -signer /var/www/protected/keys/ym.pem -inkey /var/www/protected/keys/ym.key -nochain -nocerts -outform PEM -nodetach 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:06:52.693

对于那些面临同样问题的人：以这种方式从私钥中删除密码：

```
openssl rsa -in privateKey.pem -out newPrivateKey.pem 
```

# php - 如何在 Magento 中删除类别中的产品分配？

> ID：12742377
> 
> 赞同：1
> 
> 时间：2012-10-05T08:26:58.310
> 
> 标签：php, magento, assign

我正在遍历 Magento 中的产品列表。我确实分配了新的类别 ID，`setCategoryIds()`但不会删除旧的分配。就像产品 A 属于 X 类一样。现在我想要 A 属于 Y 类和 Z 类，并且不在 X 中。我做了一个 setCategoryIds(Y,Z)，现在产品在 X、Y 和 Z 中。

如何在不使用 SOAP API 的情况下以编程方式删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:13:41.327

实际上，`setCategoryIds`应该重置所有以前的类别，如果它们不在设置的类别中。我创建了一个测试 shell 脚本**test.php**来测试它：

```
<?php
require_once 'abstract.php';

/**
 * Magento Test Assignment Script
 *
 * @category    Mage
 * @package     Mage_Shell
 */
class Mage_Shell_Test extends Mage_Shell_Abstract
{
    /**
     * Run script
     *
     */
    public function run()
    {
        $productId = $this->getArg('product');
        $catIdsString = $this->getArg('categories');
        $catIds = explode(',', $catIdsString);
        /** @var $product Mage_Catalog_Model_Product */
        $product = Mage::getModel('catalog/product')->load($productId);
        $product->setCategoryIds($catIds);
        $product->save();
        print_r($product->getCategoryIds());
    }

    /**
     * Retrieve Usage Help Message
     *
     */
    public function usageHelp()
    {
        return <<<USAGE
Usage:  php -f test.php -- [options]
        php -f test.php -- --product 1 --categories 3,4

  --product <product>       Product Id
  --categories <categories> Categories to assign, comma separated
  help                      This help

USAGE;
    }
}

$shell = new Mage_Shell_Test();
$shell->run(); 
```

您可以将其插入您的`shell`文件夹并尝试运行关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:30:25.500

试试这个：

```
$proxy = new SoapClient('http://magentohost/api/soap/?wsdl');
$sessionId = $proxy->login('apiUser', 'apiKey');

$categoryId = 5; // Put here your category id
$storeId = 1; // You can add store level

$assignedProducts = $proxy->call($sessionId, 'category.assignedProducts', array($categoryId, $storeId));
var_dump($assignedProducts); // Will output assigned products.

// Assign product
$proxy->call($sessionId, 'category.assignProduct', array($categoryId, 'someProductSku', 5));

// Update product assignment postion
$proxy->call($sessionId, 'category.updateProduct', array($categoryId, 'someProductSku', 25));

// Remove product assignment
$proxy->call($sessionId, 'category.removeProduct', array($categoryId, 'someProductSku')); 
```

按照这个链接：[看这里](http://www.magentocommerce.com/api/soap/catalog/catalogCategory/catalogCategory.html)

# android - 错误 java.lang.ClassCastException: android.view.ViewGroup$LayoutParams

> ID：12742392
> 
> 赞同：-4
> 
> 时间：2012-10-05T08:28:18.693
> 
> 标签：android, android-layout, gridview

我已经开始工作 android 应用程序，我设计的布局`RelativeLayout`是 的父级`GridView`，我只是想以`LayoutParams`编程方式设置`GridView`。

下面是我的布局和代码，我在做什么：

布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >

      <RelativeLayout
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/relativeLayout"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content" 
          android:background="#FFFFFF">

       <GridView
           xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/gridview"
           android:layout_width="fill_parent"
           android:layout_height="510dp"
           android:gravity="center"
           android:horizontalSpacing="@dimen/image_grid_hspacing"
           android:numColumns="@integer/grid_num_cols"
           android:stretchMode="columnWidth"
           android:verticalSpacing="@dimen/image_grid_vspacing"
           android:background="#FFFFFF" />   

       </RelativeLayout>
    </ScrollView> 
```

代码 ：

```
GridView gridview = (GridView) rootView.findViewById (R.id.gridview);
gridview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 300)); 
```

当我启动我的应用程序时，它总是崩溃并且错误 logcat 说

**错误 java.lang.ClassCastException: android.view.ViewGroup$LayoutParams**

对不起一个愚蠢的问题，我不知道它抛出异常的原因。请分享您对例外情况的可能性的问题的看法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:39:59.817

您只放置存在于所有 ViewGroup 对象中的 LayoutParams。所以需要说清楚ViewGroup对象`GridView`属于哪个。

您更改代码如下，

```
GridView gridview = (GridView) rootView.findViewById (R.id.gridview);
gridview.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, 300)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:38:40.333

从您的 xml 布局的外观来看，您`GridView`拥有它的父级 a `RelativeLayout`，因此您必须使用`RelativeLayout.LayoutParams`：

```
gridview.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, 300)); 
```

此外，如果孩子不能安装在屏幕上，请避免将`GridView`in a`ScrollView`用作自己的滚动句柄。`GridView`

# python - 推荐Python GUI程序/模块/站点

> ID：12742396
> 
> 赞同：0
> 
> 时间：2012-10-05T08:28:37.963
> 
> 标签：python, user-interface, python-3.x

学习Python有一段时间了，感觉已经掌握了基础。我想开始在 Python 中使用 GUI 制作一些项目，但我不知道从哪里开始学习。任何人都可以向我推荐一个教如何制作 GUI 的网站，或者一个包含制作它们所需功能等的 python 模块，甚至是一个用于制作 python GUI 的第三方程序/debian linux 包（我有一个树莓派）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:36:31.670

看看[http://wiki.python.org/moin/GuiProgramming](http://wiki.python.org/moin/GuiProgramming)和[http://wiki.python.org/moin/GUI%20Programming%20in%20Python](http://wiki.python.org/moin/GUI%20Programming%20in%20Python)。您已将您的问题标记为 python-3.x，因此您必须检查自己这些框架中的哪些已为 Python 3.x 做好了准备。如果 Python 2.x 也是一个选项，我会选择[wxPython](http://www.wxpython.org/)。[这](http://wiki.wxpython.org/Getting%20Started)是入门页面。

# sql-server - 嗨，我需要此 SQL Server 的解决方案

> ID：12742398
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:28:40.403
> 
> 标签：sql-server, reporting-services

我在 SSRS 中有一个分组的表，问题是其中一行有大量数据，其内容流向下一页，边框没有出现在底部，标题也没有出现在这些页面中。 ...

我怎样才能得到那个溢出的行和标题的底部边框..?????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:33:20.353

是martix还是tablix？？？
如果是矩阵，请转到 Tablix 属性并按照以下说明进行操作

# mysql - 使用 COUNT 时改进 MySQL 删除查询

> ID：12742406
> 
> 赞同：0
> 
> 时间：2012-10-05T08:29:13.753
> 
> 标签：mysql, count, sql-delete

我发现以下查询导致了一些瓶颈（执行时间超过 40 秒！）

```
DELETE FROM doctors 
WHERE (SELECT COUNT(loc_id) 
       FROM locations 
       WHERE locations.loc_doctor = doctors.doc_id) = 0 AND 
       doctors.doc_user = $myVar 
```

我想问题出在该`(SELECT COUNT(loc_id) FROM locations WHERE locations.loc_doctor = doctors.doc_id) = 0`部分，对吗？有没有办法改进它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:34:24.443

这应该快一点：

```
DELETE FROM doctors WHERE doctors.doc_user = $myVar AND NOT EXISTS (SELECT 1 FROM locations WHERE locations.loc_doctor = doctors.doc_id LIMIT 1) 
```

因为你数 0 实际上是一张`NOT EXISTS`支票。您还应该考虑为 locations.loc_doctor 列创建索引（如果您还没有索引）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:41:21.720

我建议从外部连接中删除：

```
DELETE doctors
FROM doctors LEFT JOIN locations
   ON locations.loc_doctor = doctors.doc_id
WHERE locations.loc_id IS NULL
AND doctors.doc_user = $myVar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:46:57.400

我想为@tpeczek 答案添加**限制。**

```
DELETE FROM doctors WHERE doctors.doc_user = $myVar AND NOT EXISTS (SELECT * FROM locations WHERE locations.loc_doctor = doctors.doc_id limit 1) 
```

# java - 即使使用关键字“after”，AOP 方面也会在给定方法之前执行？

> ID：12742409
> 
> 赞同：1
> 
> 时间：2012-10-05T08:29:29.253
> 
> 标签：java, spring, aop, aspect

我正在尝试与 AOP 取得联系。因此我写了一个小helloworld，但它没有按我的意愿工作。

在方面我使用关键字“之后”，但如果调用给定的方法，“方面” - 方法在连接点之前执行！？有人知道为什么吗？

其他任何东西都可以正常工作！（没有例外！）

```
<bean id="myAspectBean" class="hello.world.MyAspect">

    </bean>

    <bean id="helloBean" class="hello.world.Hello">
        <property name="first" value="Hello"/>
        <property name="second" value="World!"/>
    </bean>

    <aop:config>
        <aop:aspect ref="myAspectBean">
            <aop:pointcut id="pc" expression="execution(* sayHello(..))"/>
            <aop:after pointcut-ref="pc" method="doit" />
        </aop:aspect>
    </aop:config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:43:28.333

我只是没有调试..

输出是缓冲的，所以文本出现在“Hello world！”之前，但之后调用该方法..

# php - 将默认语言设置为英语

> ID：12742410
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:29:31.107
> 
> 标签：php, get, default, lang

我正在使用这个脚本：

```
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
switch ($lang){
    case "nl":
        //echo "PAGE FR";
        include("talen/nl.php");//include check session FR
        break;
    case "es":
        //echo "PAGE IT";
        include("talen/es.php");
        break;
    case "en":
        //echo "PAGE EN";
        include("talen/en.php");
        break;        
    default:
        //echo "PAGE EN - Setting Default";
        include("talen/en.php");//include EN in all other cases of different lang detection
        break;
} 
```

但是当我将浏览器语言设置为“af”时，它没有获得默认的英语语言......

我怎样才能做到这一点？

编辑：

因为我没有案例“af”它没有显示任何东西......

当没有像“af”这样的情况时，我希望默认为“en”，但这不起作用

编辑2：

我现在正在使用这个：

```
<?
$accept_lang = $_SERVER['HTTP_ACCEPT_LANGUAGE'];
$accept_lang = str_replace(' ', '', $accept_lang);

$arr = explode(',', $accept_lang);

$lang = "en";
$q = 0;

if (count($arr) > 0) {
    foreach ($arr as $a) {
    $l = explode(';', $a);

    if (count($l) == 1) {
        $l[1] = 'q=1';  
    }

    $l[1] = str_replace('q=', '', $l[1]);

    if ($l[1] > $q) {
        $q = $l[1];
    $lang = $l[0];  
    }
}
}

$lang = preg_replace('/-(.*)/', '', $lang);

switch ($lang){
    case "nl":
        //echo "PAGE FR";
        include("talen/nl.php");//include check session FR
        break;
    case "es":
        //echo "PAGE IT";
        include("talen/es.php");
        break;
    case "en":
        //echo "PAGE EN";
        include("talen/en.php");
        break;        
    default:
        //echo "PAGE EN - Setting Default";
        include("talen/en.php");//include EN in all other cases of different lang detection
}
?> 
```

但是我的 $lang 仍然设置为“af”而不是默认的“en”

编辑 3：

谢谢你的帮助：

当我尝试使用这个：

```
print $_SERVER['HTTP_ACCEPT_LANGUAGE'];
switch ($lang){
    case "nl":
        //echo "PAGE FR";
        print("nl");//include check session FR
        break;
    case "es":
        //echo "PAGE IT";
        print("es");
        break;
    case "en":
        //echo "PAGE EN";
        print("en");
        break;        
    default:
        //echo "PAGE EN - Setting Default";
        print("en");//include EN in all other cases of different lang detection
        break; 
} 
```

它打印出这个：

af,nl;q=0.8,en;q=0.5,en-us;q=0.3en

但我仍然得到“af”..如何

只是为了让你知道......我将我的浏览器语言设置为“af”来测试它......只是你知道......但它应该用你的 sript 加载默认值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:43:01.327

你应该使用我前段时间写的这个脚本，它检查具有最佳数量值的语言：

```
$accept_lang = $_SERVER['HTTP_ACCEPT_LANGUAGE'];
$accept_lang = str_replace(' ', '', $accept_lang);

$arr = explode(',', $accept_lang);

$lang = 'en';
$q = 0;

if (count($arr) > 0) {
    foreach ($arr as $a) {
    $l = explode(';', $a);

    if (count($l) == 1) {
        $l[1] = 'q=1';  
    }

    $l[1] = str_replace('q=', '', $l[1]);

    if ($l[1] > $q) {
        $q = $l[1];
    $lang = $l[0];  
    }
}
}

$lang = preg_replace('/-(.*)/', '', $lang); 
```

`$lang`然后你可以像你一样切换（） 。

不过，省略`break;`on default: case。

**编辑**：

我`$lang = 'de';`改为`$lang = 'en';`. `HTTP_ACCEPT_LANGUAGE`如果为空，这是采用的默认语言。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-05T08:35:29.973

试着做一个思考。删除**休息；**从默认情况下。

# iphone - 导航标题/项目在操作表 clickedButtonAtIndex 中切换选项卡栏项目时消失？

> ID：12742413
> 
> 赞同：2
> 
> 时间：2012-10-05T08:29:43.660
> 
> 标签：iphone, objective-c, ios, xcode

我真的把头发拉出来了。

我在我的第一个标签栏项目中的第一个视图控制器上显示一个操作表，当我点击确定时，我正在使用以下代码切换到另一个标签栏项目中的另一个视图。

```
- (void)actionSheet:(UIActionSheet *)actionSheet 
                             clickedButtonAtIndex:(NSInteger)buttonIndex  {

          self.tabBarController.selectedIndex = 1;
} 
```

*（我将视图控制器分配给导航控制器，然后分配给我的应用程序委托中的选项卡，对每个选项卡重复该过程）。*

从第二个标签返回时，当我点击第一个标签项时，**标题和信息按钮消失了**。

如果我在第一个选项卡内转到导航堆栈中的下一个视图并返回，则标题会返回。

这是我的第一个视图，我即将点击信息按钮。

![在此处输入图像描述](../Images/7d4f68d3b3259a6743d676bb732722f1.png)

这显示了一个操作表

![在此处输入图像描述](../Images/826479c3c8375f91be20624357786bee.png)

是的，我确实需要所有按钮，点击第二个按钮

![在此处输入图像描述](../Images/6aa23fe0d5a71a20154d1cb3d6b562c3.png)

好的，它把我切换到第二个标签。现在我点击标签一。

![在此处输入图像描述](../Images/158478b630ea555b1bab1129aed27b15.png)

我所有的导航项目都不见了！！！

我还尝试使用...添加标签作为标题

```
self.navigationItem.titleView 
```

但是，这也丢失了。

我的理论是，在我的操作表 clickedButtonAtIndex 事件（我在其中运行 selectedIndex）中，该事件在切换到下一个选项卡之前没有正确完成。

这是场景

有什么建议么 ？

由于这是一个如此复杂的问题，我创建了一个 [示例项目](http://www.kidsmaskfactory.com/code/TabBug.zip)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:51:04.033

获取此[示例代码](http://dl.dropbox.com/u/77219201/TestTabSwitchAlertBug.zip)...然后运行。我没有这样的问题

# jquery - 使用 Google Analytics 和多个域跟踪预订

> ID：12742416
> 
> 赞同：0
> 
> 时间：2012-10-05T08:30:01.770
> 
> 标签：jquery, iframe, seo, google-analytics, fancybox

我想使用 Google 分析跟踪多个域。详细地说，我有一个在花式框中打开的预订表格。此预订表单作为 iFrame 从另一个域（预订工具提供商）加载。这就是我打开fancybox的方式：

```
<script type="text/javascript">
  $(function(){

    $("#fancylink").fancybox({
        'type'    :    'iframe',
        'width' : 700,
        'height' : 450,
        'autoScale' : false
    });    

    $("#fancylink").trigger('click');

  });
</script>

<a href="https://booking.tool.com/path/CODE?languageCode=en#http://www.maindomain.com/offers/booking.html" target="_blank" id="fancylink">Booking</a> 
```

现在应该在 Google Analytics 中跟踪预订。我读[了这篇](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames)关于跟踪 iFrame 的文章。

在标题中我有这个：

```
<script type="text/javascript"> 
var _gaq = _gaq || []; 
_gaq.push(['_setAccount', 'UA-1234567-1']); 
_gaq.push(['_trackPageview']); 
_gaq.push(['_trackPageLoadTime']); 
_gaq.push(['_setDomainName', 'maindomain.com']);
_gaq.push(['_setAllowLinker', true]);
(function() { 
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; 
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; 
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
})(); 
</script> 
```

在正文中，我有这段代码：

```
<script type="text/javascript">
_gaq.push(function() {
  var pageTracker = _gat._getTrackerByName();
  var iframe = document.getElementById('fancybox-frame');
  if(iframe){
    iframe.src = pageTracker._getLinkerUrl('https://booking.tool.com/path/CODE?languageCode=en');
  }
});
</script> 
```

现在我得到了跟踪不起作用的信息。目前，Google Analytics（分析）中不显示任何预订（只有未内置此类代码的旧购买）。目标是查看购买的金额，哪些文章等等。如何才能做到这一点？根据预订工具供应商的说法，一切都是为 Google Analytics 设置的。所以问题应该在我这边。

我的问题：

外观应该如何`getLinkerUrl`？应该是：

*   [https://booking.tool.com](https://booking.tool.com)（其他域）
*   [https://booking.tool.com/path/CODE?languageCode=en](https://booking.tool.com/path/CODE?languageCode=en)（目前使用的网址）
*   [https://booking.tool.com/path/CODE?languageCode=en#http://www.maindomain.com/offers/booking.html（iFrame](https://booking.tool.com/path/CODE?languageCode=en#http://www.maindomain.com/offers/booking.html) URL）

第二张贴代码在正文中的位置是否正确？它应该在标题中吗？它适用于fancybox吗？我做错了什么？

**编辑：**

iFrame 中第一步的 Google 代码：

```
<script type="text/javascript">
    var _gaq = _gaq || [];

    _gaq.push(

        ['_setAccount', 'UA-7654321-1'],
        ['_setDomainName', 'tool.com'],
        ['_setAllowLinker', true],
        ['_trackPageview', '/booking/CheckAvailability']
    ,
        ['b._setAccount', 'UA-424242-11'],
        ['b._setDomainName', 'tool.com'],
        ['b._setAllowLinker', true],
        ['b._setCustomVar', 1,  'HotelID',  'SOME_ID',  3 ],
        ['b._setCustomVar', 2,  'PageName', 'CheckAvailability',                3 ],
        ['b._setCustomVar', 3,  'searchId', '',                 3 ],
        ['b._trackPageview', '/booking/CheckAvailability']

    );

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

iFrame 中最后一步的 Google 代码：

```
var _gaq = _gaq || [];
_gaq.push(
    ['_setAccount', 'UA-7654321-1'],
    ['_setDomainName', 'tool.com'],
    ['_setAllowLinker', true],
    ['_trackPageview', '/booking/BookingConfirmation'],
    ['_addTrans',
        'xyzabc', // order ID - required = reservationNumber
        'Shop', // affiliation or store name
        '800.00', // total - required = totalPrice
        '0', // tax (always 0 - we don't model that)
        '0', // shipping (always 0 - we don't model that)
        'Test', // guest city
        '', // state or province
        'DE' // guest country
    ],
    ['_addItem',
        'xyzabc', // order ID - required = reservationNumber
        'W3 - Wohnstudio III', // SKU/code - required = room code + room name
        'RateCode: SOME_PACKAGE_CODE, PromotionCode: ', // product name = rate code + promotioncode
        'Adults: 2, '
        +'Children: 0', // category or variation = 3 adults, 2 children
        '800.0', // unit price - required = price per night per room
        '1' // quantity - required = room nights
    ],
    ['_trackTrans']
    ,
    ['b._setAccount', 'UA-424242-11'],
    ['b._setDomainName', 'tool.com'],
    ['b._setAllowLinker', true],
    ['b._setCustomVar', 1, 'HotelID', 'SOME_ID', 2 ],
    ['b._setCustomVar', 2, 'PageName', 'BookingConfirmation', 3 ],
    ['b._setCustomVar', 3, 'searchId', '', 3 ],
    ['b._trackPageview', '/booking/BookingConfirmation'],
    ['b._addTrans',
        'xyzabc', // order ID - required = reservationNumber
        'SOME_ID', // affiliation or store name
        '800.00', // total - required = totalPrice
        '0', // tax (always 0 - we don't model that)
        '0', // shipping (always 0 - we don't model that)
        'Test', // guest city
        '', // state or province
        'DE' // guest country
    ],
    ['b._addItem',
        'abcxyz', // order ID - required = reservationNumber
        'W3 - Wohnstudio III', // SKU/code - required = room code + room name
        'RateCode: SOME_PACKAGE_CODE, PromotionCode: ', // product name = rate code + promotioncode
        'Adults: 2, '
        +'Children: 0', // category or variation = 3 adults, 2 children
        '800.0', // unit price - required = price per night per room
        '1' // quantity - required = room nights
    ],
    ['b._trackTrans']
);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = 'https://ssl.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

在最后一步，URL 更改为类似这样的内容

[https://booking.tool.com/path/CODE?languageCode=de&package_1=SOME_PACKAGE_CODE#http://www.maindomain.com/offers/booking.html?package=SOME_PACKAGE_CODE](https://booking.tool.com/path/CODE?languageCode=de&package_1=SOME_PACKAGE_CODE#http://www.maindomain.com/offers/booking.html?package=SOME_PACKAGE_CODE)

**编辑2：**

现在我做了这个

```
_gaq.push(function() {
  alert('test');
  var pageTracker = _gat._getTrackerByName();
  var iframe = document.getElementById('fancybox-frame');
  if(iframe){
    iframe.src = pageTracker._getLinkerUrl('<?php echo $link ?>');
    alert(iframe.src);
  }
}); 
```

我得到一个像

```
https://booking.tool.com/path/CODE?languageCode=en&__utma=60254466.192665702.4731206331.1344939538.1394680734.162&__utmb=60254466.7.9.1349681089757&__utmc=60312227&__utmx=-&__utmz=60254466.4731206661.2.4.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)&__utmv=-&__utmk=518158905 
```

如果没有第一个警报，我永远不会收到第二个警报。因此，我认为迈克的假设是正确的。我应该投入`beforeLoad`什么？打开 iFrame 时，我没有看到 Firebug 出现任何错误。在 Google Analytics 中，我只能看到一页条目`/toolprovider/BookingConfirmation`。

**编辑3：**

现在我使用以下代码：

```
$("#bookingLink").click(function() {
    var url = this.href;
    var pageTracker = _gat._getTrackerByName();
    $('#fancylink').attr('href', pageTracker._getLinkerUrl(url));
    $('#fancylink').trigger('click');
    return false;
}); 
```

但是在`_gaq.push`函数中他找不到 iFrame。即使我`fancylink`直接点击也找不到iFrame。我也用这段代码试过

```
 $('#fancylink').fancybox({
    'type'    :    'iframe',
    'width' : 700,
    'height' : 450,
    'autoScale' : false,
    'beforeLoad' : function() {
        var url = $('bookingLink').attr('href');
        var pageTracker = _gat._getTrackerByName();
        $('#fancylink').attr('href', pageTracker._getLinkerUrl(url));
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:59:25.297

首先：您是否看到任何 /booking/CheckAvailability 和/或 /booking/BookingConfirmation 页面显示在 Google Analytics 的内容 > 网站内容 > 所有页面报告中？如果没有，请仔细检查 Chrome 开发人员工具或 Firebug 的 JavaScript 控制台中显示的语法错误。

第二：我会在设置 iframe.src 后发出警报——我怀疑当那段代码运行时，fancyBox iframe 还不可用，所以跨域数据永远不会附加到 URL 上。

```
if(iframe){
  iframe.src = pageTracker._getLinkerUrl('https://booking.tool.com/path/CODE?languageCode=en');
  alert(iframe.src);
} 
```

fancyBox 确实有一个`beforeLoad`可能有用的回调——你能发布更多关于你如何打开覆盖的细节/片段吗？

编辑：更熟悉 fancyBox 的人可能会使用 beforeLoad 回调来更改链接上的 URL，因为它用于 iFrame 源......不幸的是，那不是我；）

我会尝试使用第二个 URL，并在单击第一个 URL 时在其上设置 href & trigger fancyBox。就像是：

```
<a href="https://booking.tool.com/..." target="_blank" id="bookingLink">Booking</a>
<a href="" id="fancyLink" style="display:none"></a>
<script type="text/javascript">
jQuery(function($){
    $("#bookingLink").click(function(e) {
        var url = this.href;
        var pageTracker = _gat._getTrackerByName();
        $('#fancylink').href = pageTracker._getLinkerUrl(url);
        $("#fancylink").trigger('click');
        e.preventDefault();
    });
});
</script> 
```

# javascript - JavaScript Consultation needed with (in HTML5 context)

> ID：12742422
> 
> 赞同：2
> 
> 时间：2012-10-05T08:30:26.317
> 
> 标签：javascript, image, html, canvas

It is a hobby project with a friend, but since I will invest in it (for UI/UX design) I need to be sure about feasability. I am a programmer myself but I do not consider being experienced with JS and HTML5.

[Description]

I will be doing this kind of project BUT in JS and Html5 not Flash or Silverlight. Here is the list of questions about feasabilities with JavaScript and HTML5: [https://www.greetingbee.com/card-studio.aspx](https://www.greetingbee.com/card-studio.aspx)

*   we drag drop and manipulate images and in the end we want to save the greeting card (the composed surface) as image file...

    1.  how to do it without canvas? to printscreen or generate an image of specific area of html composition (DOM)

    2.  how to do it with canvas? keeping in mind performance ?

*   using SVG and/or PNG for keeping quality of shapes of greeting cards againts resizing etc.. any suggestions and tools recommendations

*   is there a JS script that could be used to make browser support some HTML5 features if it is not supporting some things, like make browser emulate and support :)), I do not like this question myself but who knows ))

I know its abit unusual case but we all might benefit if those answers find solutions and tips.

I share these links which have some sort of solutions: www.stackoverflow.com/questions/12652769/rendering-html-elements-to-canvas/12660867#12660867

I know about html2Canvas which is said to be not so perfect, and Modernizer script that help to determine html5 features with browser

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:39:56.447

I don't know how to do it without canvases but with them there is `toDataURL` method. You can read about it here: [http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

If You want to save image on server-side you could send data returned by `toDataURL()` to your server through AJAX or smthing like that.

As for second question about emulation of HTML5 there is a piece of code which enables you to use canvas tag on old IEs [http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/)

# c# - c#复制/移动到锁定的文件/流

> ID：12742431
> 
> 赞同：0
> 
> 时间：2012-10-05T08:30:57.257
> 
> 标签：c#, file, stream, locking

我需要有关如何锁定文件、复制文件、修改副本以及将副本保存回原始文件的帮助，而原始文件仍处于锁定状态。

这是当前流程：用户打开文件，应用程序将其复制到临时文件夹中并使用以下行锁定原始文件

```
_lockStream = new FileStream(Path, FileMode.Open, FileAccess.ReadWrite, FileShare.Read); 
```

然后在将临时文件保存回原始文件时，目前我正在使用以下例程（目标 = _lockStream，源 = 临时文件的流）：

```
public static void Copy(Stream source, Stream destination, int bufferSize)
    {
        int readed = 0;

        byte[] buffer = new byte[bufferSize];

        destination.SetLength(source.Length);
        destination.Position = 0;

        while ((readed = source.Read(buffer, 0, buffer.Length)) > 0)
        {
            destination.Write(buffer, 0, readed);
        }
        destination.Flush();
    } 
```

我更喜欢使用 File.Copy ，但我不知道如何使它与锁定的文件一起工作，即使文件被应用程序锁定。而且，更糟糕的是，我的方法不安全，如果应用程序或系统在中间崩溃，则原始文件已损坏。我认为更正确的方法是复制到同一个文件夹，然后移动（或只是移动），但我不知道如何保持对原始文件的锁定。

所以，现在为了安全起见，我释放文件锁，并使用 File.Copy，然后再次获取锁。它可以工作，但是文件在几毫秒内被解锁并且可以被其他进程锁定。

做这些事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:37:33.957

为了使您的方法安全，您可以像这样使用 TransactionScope：

```
using(var scope = new TransactionScope())
{               
    Copy(source, destination, buffersize);
    scope.Complete();
} 
```

# google-drive-api - 在 Google Drive api 中插入/复制文件

> ID：12742435
> 
> 赞同：2
> 
> 时间：2012-10-05T08:31:11.583
> 
> 标签：google-drive-api

Dropbox 有 Copy_ref api，可以轻松地将相同的文件上传给多个用户。我在 Google Drive api 中找不到这种功能。是否可以使用副本将相同的文件上传到不同用户的帐户，而不是从我的服务器上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T04:46:51.063

我认为没有办法做到这一点。相反，您可以使用 Drive SDK 具有的共享功能。通过共享，您可以将文件副本创建到其他帐户中。

```
 private static Permission insertPermission(Drive service, String fileId,
  String value, String type, String role) {
Permission newPermission = new Permission();

newPermission.setValue(value);
newPermission.setType(type);
newPermission.setRole(role);
try {
  return service.permissions().insert(fileId, newPermission).execute();
} catch (IOException e) {
  System.out.println("An error occurred: " + e);
}
return null; 
```

其中 setValue 用于指定用户帐户，type 用于帐户类型（用户或组），role 是权限。你可以参考这个[Drive Permission](https://developers.google.com/drive/v2/reference/permissions/insert)

# popup - 如何关闭 Liferay 中的弹出窗口？

> ID：12742436
> 
> 赞同：3
> 
> 时间：2012-10-05T08:31:14.473
> 
> 标签：popup, liferay, liferay-6

我使用以下代码在弹出窗口上加载 WebContent 编辑 portlet：

```
<liferay-ui:icon
    image="edit"
    label="true"
    message="news-edit-url"
    url="${oneNews.newsEditUrl}"
    /> 
```

编辑网址：

```
taglibEditURL = "javascript:Liferay.Util.openWindow({dialog: {width: 960}," + 
    "id: '" + renderResponse.getNamespace() + "'," +
    "title: '" + LanguageUtil.format(request.getLocale(), "edit-x", HtmlUtil.escape(assetRenderer.getTitle(request.getLocale()))) + "'," +
    "uri:'" + HtmlUtil.escapeURL(editPortletURLString) + "'});"; 
```

保存或发布内容时，将在弹出窗口中加载 portlet。我希望关闭弹出窗口并刷新带有 editURL 链接的 portlet。

有关此的任何帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T10:21:54.093

这是关闭弹出窗口的代码，它应该存在于打开弹出窗口的父页面中：

***Liferay 6.1版***

```
Liferay.provide(
        window,
        '<portlet:namespace />closePopup',
        function(popupIdToClose) {

            var A = AUI();

            A.DialogManager.closeByChild('#' + popupIdToClose);
        },
        ['aui-base','aui-dialog','aui-dialog-iframe']
    ); 
```

***Liferay 6.2 版***

```
Liferay.provide(
    window,
    '<portlet:namespace/>closePopup',
        function(popupIdToClose) {

            var popupDialog = Liferay.Util.Window.getById(popupIdToClose);

            popupDialog.destroy();
        },
        ['liferay-util-window']
    ); 
```

这是刷新打开弹出窗口的 portlet 的代码。这应该出现在打​​开弹出窗口的父页面中：

```
Liferay.provide(
        window,
        '<portlet:namespace />refreshPortlet',
        function() {

            <%-- refreshing the portlet [Liferay.Util.getOpener().] --%>
            var curPortletBoundaryId = '#p_p_id<portlet:namespace />';

            Liferay.Portlet.refresh(curPortletBoundaryId);
        },
        ['aui-dialog','aui-dialog-iframe']
    ); 
```

如何调用`closePopup`&`refreshPortlet`函数由您决定。一种方法是您可以让弹出窗口刷新并`closePopup`仅在成功处理请求时从弹出窗口本身调用函数，然后`refreshPortlet`也从弹出窗口调用该函数。

这是一个代码片段，可以帮助您从弹出窗口调用父页面函数：

```
Liferay.Util.getOpener().<portlet:namespace />closePopup(popupIdToClose);
Liferay.Util.getOpener().<portlet:namespace />refreshPortlet(); 
```

**与打开弹出窗口时使用的相同，如下所示`popupIdToClose`：`id`**

```
taglibEditURL = "javascript:"
                +   Liferay.Util.openWindow({"
                +       "dialog: {width: 960},"
                +       "id: '" + renderResponse.getNamespace() + "'," // This is the "popupIdToClose"
                +       "title: '" + LanguageUtil.format(request.getLocale(), "edit-x", HtmlUtil.escape(assetRenderer.getTitle(request.getLocale()))) + "',"
                +       "uri:'" + HtmlUtil.escapeURL(editPortletURLString)
                +       "'}"
                +   ");"; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T18:18:11.077

用于 6.2 版本的 AUI taglib 解决方案。不需要额外的JS。

```
<aui:button cssClass="close-panel" type="cancel" value="close" /> 
```

重要的部分是***`cssClass="close-panel"`***。

# firefox - 带有自动填充功能的 Knockoutjs 密码绑定在 Firefox 中不起作用

> ID：12742438
> 
> 赞同：5
> 
> 时间：2012-10-05T08:31:18.883
> 
> 标签：firefox, passwords, knockout.js, viewmodel

在带有字段用户/密码的表单中进行绑定设置。但是当用户在 Firefox 中使用记住密码时，绑定不会更新，并且 viewModel 属性为空。

无论如何强制从Element绑定到viewModel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:35:24.050

这是 Knockout 中的一个已知问题，并且已经在[github 上提出了一个关于它](https://github.com/SteveSanderson/knockout/issues/648)的问题。

# node.js - Nodejs req.sessionID 在重定向后偶尔会发生变化

> ID：12742448
> 
> 赞同：4
> 
> 时间：2012-10-05T08:32:01.753
> 
> 标签：node.js, express, session-cookies, sessionid

我正在使用 nodejs、express 和 connect-memcaced 来处理我的会话。我制作了一个每次都能完美执行的登录脚本，设置会话数据并将用户标记为已登录，然后将他重定向回他登录的页面。有时（并非总是）发生的情况是，在他被重定向并且页面加载cookies sessionID 更改之后，用户当然不再登录。我未能找到发生这种情况的原因以及为什么它不会每次都发生。

登录功能的代码片段：

```
DB.getOne('User',{filters:{'primary':{email:req.body.email}}}, function(err,data){
  if(data[0] && data[0].active == 1){
    var encodedPass = self.encodePass(req.body.pass,req.body.email);
    if(encodedPass == data[0].pass){
      req.session.pr.user = data[0];
      req.session.pr.user.status = true; 
      res.writeHead(302, {
        'Location': goTo 
      });
      res.end();
    }
  }
}); 
```

直接查看 memcached，我可以看到它执行得很好，并且数据始终保存在原始 sessionID 下的 memcached 中。由于某种原因，重定向必须更改 sessionID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:11:50.060

当我没有注意到我已经重新启动了开发服务器时，我经常发现这种情况发生在我身上。请记住，会话 cookie 存储在内存中，因此当服务器重新启动时，所有会话都将被遗忘，并且会自动为用户分配一个新会话。

# java - 抽象类上的 UnmarshalException

> ID：12742460
> 
> 赞同：2
> 
> 时间：2012-10-05T08:33:00.220
> 
> 标签：java, xml, inheritance, jaxb, moxy

我在 glassfish 3.1.1 上运行的 web 服务有问题，但在 glassfish 3.1.2.2 上运行失败

```
@XmlSeeAlso({
B.class,
BId.class,
C.class,
CId.class
})
public abstract class A {
private Id id;
}

public abstract class Id {

}

public class B extends A {}

public class C extends A {}

public class BId extends Id {}

public class CId extends Id {} 
```

B 类在运行时得到一个 BId，C 是一个 CId。

我还有其他几个地方，我有抽象类，并且 web 服务序列化工作得很好，我在生成的 xml 中看到了一个 xsi:type 限定符。但是，在这种情况下，没有添加 xsi:type 限定符，我得到类似：

```
<a xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="B">
    <id>
         ...
    </id>
    ...
</a> 
```

因此解组无法识别 id 的类型，并尝试实例化抽象 Id 而不是子类。

我最好的猜测是，这是添加到 glassfish 3.1.2 中的 eclipselink moxy 中的一个错误（但可能是错误的）有人知道如何解决这个问题吗？

我已经尝试添加更多 @XmlSeeAlso 标签，但这并没有帮助。我还尝试使用@XmlRootElement 和@XmlElementRef，但我无法让它在为A 生成的存根上生成getId() 方法。我生成的web 服务存根只有类A 上的getBId 和getCId 方法，而不是a getId 返回基本类型。

# c++ - 将定义转换为 BOOST_PP_TUPLE 或 BOOST_PP_SEQ

> ID：12742461
> 
> 赞同：1
> 
> 时间：2012-10-05T08:33:00.443
> 
> 标签：c++, boost, boost-preprocessor

是否可以转换`#define Name Alex`为`BOOST_PP_SEQ like (A)(l)(e)(x)`or `BOOST_PP_TUPLE (A,l,e,x)`？对我更有用（`'A')('l')('e')('x')`或`('A','l','e','x')`分别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:20:28.130

不，这是不可能的。您不能在预处理器中迭代或拆分令牌的字符。

# visualization - Gnuplot：（高血压数据点）：根据时间绘制两个点，它们之间的差异

> ID：12742464
> 
> 赞同：1
> 
> 时间：2012-10-05T08:33:30.020
> 
> 标签：visualization, gnuplot

我刚被诊断出患有高血压，需要 a) 现在定期检查我的血压并记录下来 b) 吃药。你无法帮助我解决 b)，但我需要你的帮助来解决 a)。

我需要记录我的血压，因此我需要每天读取一些读数。我的日志如下所示：

```
20121001 0801 175 101
20121001 0802 Pill
20121001 1017 125 91
20121001 1537 121 101
20121001 1907 117 89
20121002 0758 191 111
20121002 0759 Pill
20121002 1003 117 98
(...) 
```

你能帮我用一个`gnuplot`配置文件来读取上述两个数据点，将它们与时间（`%Y%m%d %H%M`）绘制出来吗？

这里需要注意的是线条“ `... Pill`”，我想在情节中显示为一个点、一条垂直线或类似的东西（它们只是在我服用药丸时显示）。

另外，我不太确定这是否可能，我想可视化数据点 1 和数据点 2 之间的差异，即。`175-101=74`在第一行。

这将极大地帮助我想象我的药丸是否（如果是，何时）开始起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:20:24.443

我创建了以下`bash`脚本。使用您的日志文件名作为参数运行它：

```
#! /bin/bash -e
input=$1
start=$(head -n1 "$input")
start=${start:0:9}0000
end=$(tail -n1 "$input")
end=${end:0:9}2359

gnuplot <<EOF
set terminal png
set output 'bp.png'
set xdata time
set timefmt '%Y%m%d %H%M'
set xrange ['$start':'$end']
plot '< grep -v Pill "$input"' using 1:(\$3-\$4):3:4 with errorbars pt 2 title 'Pressure', \
     '< grep    Pill "$input"' using 1:(100) with points lw 2 pt 7 title 'Pill'
EOF
(($?)) && exit 1
display bp.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:18:31.873

我将回答你问题的第二部分。因此，我更新了您的文件以记录一些内容。

```
 1  20121001 0801 175 101
 2  20121001 0802 Pill
 3  20121001 1017 125 91
 4  20121001 1537 121 101
 5  20121001 1907 117 89
 6  20121002 0758 191 111
 7  20121002 0759 Pill
 8  20121002 1003 117 98 
```

gnuplot 脚本看起来像这样

```
plot "< grep -v Pill meas2" using 1:($4-$5) with line, \
     "< grep Pill meas2" using 1:($2*0) ps 10 pt 8 
```

选择不包含的输入行的`Pill`位置。您可以使用`$4-$5`来执行计算。另一个图在水平轴上绘制了一个符号，表示药丸在该线上的时间。

对于第一部分，我发现了一些提示：[http ://t16web.lanl.gov/Kawano/gnuplot/datetime-e.html](http://t16web.lanl.gov/Kawano/gnuplot/datetime-e.html)

# c# - 继承：根据具体对象在运行时调用正确的方法

> ID：12742465
> 
> 赞同：2
> 
> 时间：2012-10-05T08:33:30.193
> 
> 标签：c#, inheritance

我有以下课程：

```
public class Person
{
}

public class Employee : Person
{
}

public class Customer : Person
{
} 
```

使用这些类的一些方法：

```
public class OtherClass
{
    public void DoSomething(Employee e)
    {
    }

    public void DoSomething(Customer c)
    {
    }
} 
```

来电：

```
// People = Collection<Person>.
foreach (var p in People)
    DoSomething(p); // Should call the right method at runtime and "see" if it´s an Employee or a Customer. 
```

编译器不允许这样做。我如何实现这个场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:36:24.097

这里最简单的方法是多态，即

```
public class Person
{
    public virtual void DoSomething() {} // perhaps abstract?
}

public class Employee : Person
{
    public override void DoSomething() {...}
}

public class Customer : Person
{
    public override void DoSomething() {...}
} 
```

并使用：

```
foreach (var p in People)
    p.DoSomething(); 
```

* * *

然而！如果这不可能，那么作弊：

```
foreach (var p in People)
    DoSomething((dynamic)p); // TADA! 
```

* * *

另一种选择是自己检查类型：

```
public void DoSomething(Person p)
{
    Employee e = p as Employee;
    if(e != null) DoSomething(e);
    else {
        Customer c = p as Customer;
        if(c != null) DoSomething(c);
    }
} 
```

# eclipse - 无法解析 org.apache.maven.archetypes 的版本

> ID：12742467
> 
> 赞同：25
> 
> 时间：2012-10-05T08:33:37.040
> 
> 标签：eclipse, maven, m2eclipse

我已经在本地机器上配置了 maven3.0.3。已安装 m2e eclipse 插件。但是当我尝试使用 maven-archetype-webapp 创建一个新的 maven 项目时，我得到以下异常。

```
 Could not resolve archetype org.apache.maven.archetypes:maven-archetype-webapp:RELEASE    from any of the configured repositories.
 Could not resolve artifact org.apache.maven.archetypes:maven-archetype- webapp:pom:RELEASE
 Failed to resolve version for org.apache.maven.archetypes:maven-archetype- webapp:pom:RELEASE: Could not find metadata org.apache.maven.archetypes:maven-archetype- webapp/maven-metadata.xml in local ([HOME]/.m2/repository)
 Failed to resolve version for org.apache.maven.archetypes:maven-archetype-  webapp:pom:RELEASE: Could not find metadata org.apache.maven.archetypes:maven-archetype-  webapp/maven-metadata.xml in local ([HOME]/.m2/repository) 
```

我在代理后面做了一些处理，代理配置在 `{HOME}/.m2/settings.xml and M2_HOME/conf/settings.xml.`

原型生成命令在命令行中运行良好。它通过代理下载了依赖项。

任何帮助是极大的赞赏。

编辑 05-10-2012 在 Eclipse 中创建新的 Maven Web 项目时，原型“maven-archetype-webapp”版本显示为 RELEASE。无论如何，这有联系吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-03T13:52:34.777

我有同样的问题。我通过将 Maven[原型目录](http://maven.apache.org/archetype/maven-archetype-plugin/specification/archetype-catalog.html)添加到 Eclipse 来修复它。步骤如下：

1.  打开窗口 > 首选项
2.  打开 Maven > 原型
3.  单击“添加远程目录”并添加以下内容：
    *   目录文件：[http ://repo1.maven.org/maven2/archetype-catalog.xml](http://repo1.maven.org/maven2/archetype-catalog.xml)
    *   说明：maven目录

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T13:08:58.443

我发现以下[教程](http://www.javahotchocolate.com/tutorials/maven.html)非常有用。

Step1：用于创建web应用的maven命令：mvn archetype:generate -DgroupId=test.aasweb -DartifactId=TestWebApp -DarchetypeArtifactId=maven-archetype-webapp

Step2：将以下条目添加到项目的 pom.xml 中。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.0.2</version>
    <configuration>
    <source>1.6</source>
    <target>1.6</target>
    </configuration>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <configuration>
    <wtpapplicationxml>true</wtpapplicationxml>
    <wtpversion>1.5</wtpversion>
    <downloadSources>true</downloadSources>
    <downloadJavadocs>true</downloadJavadocs>
        <classpathContainers>
            <classpathContainer>
                org.eclipse.jst.j2ee.internal.web.container
            </classpathContainer>
            <classpathContainer>
                org.eclipse.jst.j2ee.internal.module.container
            </classpathContainer>
        /classpathContainers>
        <additionalProjectFacets>
            <jst.web>2.5</jst.web>
            <jst.jsf>1.2</jst.jsf>
        </additionalProjectFacets>
    </configuration>
</plugin> 
```

Step3：运行maven命令转换成eclipse工程格式。mvn eclipse:clean eclipse:eclipse

Step4：将项目作为Existing Maven project导入到eclipse中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-12T11:37:24.677

如果您使用的是 eclipse，您可以按照此处的步骤（[maven in 5 min not working](https://stackoverflow.com/questions/5704010/maven-in-5-min-not-working)）获取您的代理信息。完成后，请按照以下步骤操作：

1.  转到 Maven 安装文件夹`C:\apache-maven-3.1.0\conf\`
2.  复制`settings.xml`到`C:\Users\[UserFolder]\.m2`
3.  `settings.xml`根据您从上述链接获得的信息修改代理。

    > ```
    > <proxy>
    >   <active>true</active>
    >   <protocol>http</protocol>
    >   <host>your proxy</host>
    >   <port>your port</port>
    > </proxy> 
    > ```

4.  打开日食

5.  转到：Windows > 首选项 > Maven > 用户设置

6.  浏览发件人`settings.xml`文件`.m2`夹

7.  点击`Update Settings`

8.  点击`Reindex`

9.  应用更改并单击`OK`

您现在可以尝试在 Eclipse 中创建 Maven 项目

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-22T14:23:37.587

仔细阅读原因。

“无法解析 org.apache.maven.archetypes:maven-archetype-webapp:pom:RELEASE 的版本：在本地找不到元数据 org.apache.maven.archetypes:maven-archetype-webapp/ **maven-metadata.xml** ”

所以您需要做的就是将[maven-metadata.xml](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml)下载 到您的 {HOME}.m2\repository

而已。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-13T18:41:09.887

您确实需要在用户设置下链接一个 settings.xml（位于 maven 下的首选项中）

但是，如果这不能解决问题，就像你们中的许多人一样。您还必须删除目录：

.m2/repository/org/apache/maven/archetypes/maven-archetype-quickstart

然后退出eclipse并重试。

这就是解决我的问题的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-28T12:57:25.293

转到 Windows-> 首选项-> Maven -> 用户设置

选择Maven的settings.xml

重启 Eclipse

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-17T08:22:18.610

这是100％的工作：

*   删除桌面>用户中存在的 .m2 文件夹
*   将您的电脑连接到互联网
*   再次创建您的 Maven 项目

就是这样，希望对你有帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-23T17:17:04.767

创建新的用户环境变量：

```
MAVEN_HOME=D:\apache-maven-3.5.3

MAVEN=D:\apache-maven-3.5.3\bin

MAVEN_OPTS=-Xms256m -Xmx512m 
```

在下面的路径变量（系统变量）中附加：

```
;D:\apache-maven-3.5.3\bin; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-28T07:13:07.007

无需执行上述所有冗长步骤。

只需删除 c:\Users\.m2\Repository\org 文件夹

Maven 会自动下载它需要的东西

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-20T15:15:48.447

解决我的问题的正确方法如下。希望对其他人有所帮助。错误信息。

`Could not resolve archetype org.apache.maven.archetypes:maven-archetype-webapp:1.0 from any of the configured repositories. Could not resolve artifact org.apache.maven.archetypes:maven-archetype-webapp:pom:1.0 Failure to transfer org.apache.maven.archetypes:maven-archetype-webapp:pom:1.0`

1.  删除~/.m2/repository/org/Apache/maven/archetypes目录下的maven-archetype-webapp:1.0

2.  [从http://maven.ibiblio.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/](http://maven.ibiblio.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/)下载 maven-archetype-webapp:1.0 和 maven-archetype-webapp-1.0.pom

3.  执行 mvn install:install-file -DgroupId=org.apache.maven.archetypes -DartifactId=maven-archetype-quickstart -Dversion=1.1 -Dpackaging=jar -Dfile= 此处填写maven-archetype-webapp-1.0的路径。

4.  尝试建立webapp的maven项目，测试问题是否解决。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-22T10:20:34.640

我也有同样的问题，但搜索后解决了这个问题。转到菜单--> 窗口--> 首选项--> maven--> 安装--> 添加--> 代替安装主目录添加安装 maven 的目录的路径--> 完成--> 检查一盒新添加的内容-->应用-->确定。现在创建新的 Maven 项目，但请记住尝试使用不同的组 ID 和工件 ID。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-09T14:00:34.617

我从 [这里](https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-quickstart/1.1/)下载了 jar 和 pom 并将它们放在这里：

```
\.m2\repository\org\apache\maven\archetypes\maven-archetype-quickstart\1.1\ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-11T10:23:35.780

我也遇到了同样的错误....而且我发现我的互联网连接已关闭，因此 eclipse 无法下载 webapps 原型的存储库，当我获得互联网连接时，我刚刚使用 webapps 原型再次创建了 maven 项目，并且我的 eclipse 下载了存储库及其完毕...

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-04T13:11:46.323

我简单地使用以下步骤：

创建 Maven 项目 -> 选中复选框 -> “创建一个简单的项目（跳过原型选择）”

这个对我有用

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-07-25T13:45:12.843

这对我有用：- 导航到 windows-> 首选项-> maven 并检查“下载工件源”并单击应用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-29T21:55:34.563

我从命令行 Maven 构建时遇到了类似的问题。我最终通过在 maven 参数中添加 -U 来克服这个错误。

根据您在 settings.xml 中设置源存储库配置的方式，有时 Maven 无法下载特定的工件，因此它假定无法下载工件，即使您更改了一些可以让 Maven 可见的设置如果它只是尝试过的神器。-U 强制 Maven 再次查看。

现在您需要确保 Maven 正在寻找的工件至少在您的 settings.xml 引用的存储库之一中。要确定，请运行

```
mvn help:effective-settings 
```

从您尝试构建的模块的目录中。这应该会为您提供 Maven 用于查找工件的存储库的完整列表。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-05-27T08:08:12.333

试试看，它适用于=我刚刚从下面的位置删除了“archetypes”文件夹

C:\Users\Lenovo.m2\repository\org\apache\maven

但是您可以更改以下内容进行实验 - 下载最新的 Maven 二进制 zip，添加到您的 C:\ 驱动器并更改以下内容....

[![在此处输入图像描述](../Images/8dc7e5d834ba35979384a1a380a90c01.png)](https://i.stack.imgur.com/uaqRP.png)

[![在此处输入图像描述](../Images/15622083b1db03377fde5f3a19ac0275.png)](https://i.stack.imgur.com/SB154.png)

[![在此处输入图像描述](../Images/3ade391f74586f7c1f28b3103b250de3.png)](https://i.stack.imgur.com/ZTd9D.png)

更改代理

```
 <proxy>
          <id>optional</id>
          <active>true</active>
          <protocol>http</protocol>
          <username></username>
          <password></password>
          <host>10.23.73.253</host>
          <port>8080</port>
          <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
        </proxy> 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-10-30T09:55:29.600

我遇到了同样的问题，我只通过在 Eclipse 中添加远程目录来解决它转到 Window -> Preferences -> Maven -> Archetypes ->单击添加远程目录，然后将在该粘贴
[http://repo.maven 中打开一个窗口。该目录文件中的apache.org/maven2/archetype-catalog.xml](http://repo.maven.apache.org/maven2/archetype-catalog.xml) 然后点击 ok restart eclipse 现在一切正常

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2014-06-13T14:46:24.900

问题也可能来自您没有设置`MAVEN_HOME`环境变量。因此，嵌入在 Eclipse 中的 Maven 无法完成下载原型的工作。请检查该变量是否已预先设置。

# c++ - 如何使用映射 C++ 中的值获取匹配键

> ID：12742472
> 
> 赞同：13
> 
> 时间：2012-10-05T08:33:48.983
> 
> 标签：c++, stl, map, struct

我有一个结构作为值类型的地图

```
map<int id, struct_t*> table

struct_t
{
int prev;
int wt;
string name;
} 
```

仅使用 prev，我需要找到相应的 id。提前非常感谢！

编辑：

```
int key=0;
for(auto it = table.begin(); it != table.end(); ++it)
{
     if(table[(*it).first].prev == ?)
} 
```

这是我的地图数据的样子：

```
id    prev abundance  thing
1573  -1      0       book
1864  1573    39      beds
2075  1864    41      tray
1760  2075    46      cups 
```

对于每个 id，我需要找到 NEXT 匹配的 id。因此，对于上一列中的 1573，我需要找到一个匹配的“id”，即 1864。此外，std::next 不起作用，因为数据集不一定在下一个元素中具有匹配的 id。希望这会有所帮助！

请帮帮我！！！我的老板已经对我花这么多时间学习 C++ 感到失望（已经 3 周了！）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T08:50:44.310

如果您有一个现代编译器（支持 lambdas），您可以执行以下操作：

```
const int prevToFind = 10;
auto findResult = std::find_if(std::begin(table), std::end(table), [&](const std::pair<int, struct_t*> &pair)
{
    return pair.second->prev == prevToFind;
});

int foundKey = 0; // You might want to initialise this to a value you know is invalid in your map
struct_t *foundValue = nullptr
if (findResult != std::end(table))
{
    foundKey = findResult->first;
    foundValue = findResult->second;

    // Now do something with the key or value!
} 
```

如果您有较旧的编译器，请告诉我，我可以更新示例以改用谓词类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T08:43:54.800

简单的循环可以做到：

```
#include <map>
#include <string>
#include <iostream>

int main()
{
   std::map<int, std::string> m = {
      std::make_pair(0, "zero"), std::make_pair(1, "one"), std::make_pair(2, "two")
   };

   int key = 0;
   for (auto &i : m) {
      if (i.second == "two") {
         key = i.first;
         break; // to stop searching
      }
   }

   std::cout << key << std::endl;
} 
```

当然，您需要设置自己的 if 语句进行搜索。请注意，提升双向地图可能是一个解决方案（[boost::bimap](http://www.boost.org/doc/libs/1_46_1/libs/bimap/doc/html/index.html "boost::bimap")）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-05T08:53:16.950

循环遍历地图当然可以解决问题，但您可能需要考虑使用第二张地图作为索引：

```
map<int,int> table_idx; 
```

每当您向其中添加新条目时，`table`您也需要更新`table_idx`，存储`id`对应于每个`prev`. `table_idx`然后将允许您反向查找`id`in log(N) 时间：

```
int prev_for_id = table_idx[id]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T08:55:39.597

我感觉你是一个初学者，所以如果你能告诉我们你想做什么会很好，因为也许你正在尝试解决一个错误的问题。
如前所述，地图设计为按键搜索，而不是按值搜索。
话虽如此，如果您坚持以这种方式搜索地图，您可能会想查看**Boost Bimap**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-19T13:51:11.243

是否无法使用以下内容生成反向**映射**：

```
typedef std::map<int, struct_t*> map_t;
typedef std::map<struct_t*, int> reverse_map_t;

reverse_map_t get_reverse( map_t m )
{
    reverse_map_t r;
    for( const auto& p: m )
    {
        r[p.second] = p.first;
    }
    return r;
} 
```

# entity-framework - 使用实体框架代码最有效地处理创建、更新、删除

> ID：12742473
> 
> 赞同：29
> 
> 时间：2012-10-05T08:33:53.280
> 
> 标签：entity-framework, ef-code-first, dbcontext, entity-framework-5

> **注意：**我使用的是实体框架版本 5

在我的通用存储库中，我有`Add`,`Edit`和`Delete`方法如下：

```
public class EntityRepository<T> : IEntityRepository<T>
    where T : class, IEntity, new() {

    readonly DbContext _entitiesContext;

    public EntityRepository(DbContext entitiesContext) {

        if (entitiesContext == null) {

            throw new ArgumentNullException("entitiesContext");
        }

        _entitiesContext = entitiesContext;
    }

    //...

    public virtual void Add(T entity) {

        DbEntityEntry dbEntityEntry = _entitiesContext.Entry<T>(entity);
        if (dbEntityEntry.State != EntityState.Detached) {

            dbEntityEntry.State = EntityState.Added;
        }
        else {

            _entitiesContext.Set<T>().Add(entity);
        }
    }

    public virtual void Edit(T entity) {

        DbEntityEntry dbEntityEntry = _entitiesContext.Entry<T>(entity);
        if (dbEntityEntry.State == EntityState.Detached) {

            _entitiesContext.Set<T>().Attach(entity);
        }

        dbEntityEntry.State = EntityState.Modified;
    }

    public virtual void Delete(T entity) {

        DbEntityEntry dbEntityEntry = _entitiesContext.Entry<T>(entity);
        if (dbEntityEntry.State != EntityState.Detached) {

            dbEntityEntry.State = EntityState.Deleted;
        }
        else {

            DbSet dbSet = _entitiesContext.Set<T>();
            dbSet.Attach(entity);
            dbSet.Remove(entity);
        }
    }
} 
```

您认为这些方法是否实施得很好？尤其是`Add`方法。`Add`执行以下方法会更好吗？

```
public virtual void Add(T entity) {

    DbEntityEntry dbEntityEntry = _entitiesContext.Entry<T>(entity);
    if (dbEntityEntry.State == EntityState.Detached) {

        _entitiesContext.Set<T>().Attach(entity);
    }

    dbEntityEntry.State = EntityState.Added;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-05T09:00:12.643

**添加：**

```
public bool Add<E>(E entity) where E : class
        {
            DataContext.Entry(entity).State = System.Data.EntityState.Added;
            Save();
        } 
```

**对于更新：**

```
 public bool Update<E>(E entity) where E : class
        {
            DataContext.Entry(entity).State = System.Data.EntityState.Modified;
            Save();
        } 
```

**对于删除：**

```
 public bool Delete<E>(E entity) where E : class
        {
            DataContext.Entry(entity).State = System.Data.EntityState.Deleted;
            Save();
        } 
```

还有一个返回 true 或 false 的私有`Save()`方法，因此您可以根据结果在控制器中轻松回退

```
private bool Save()
        {
            return DataContext.SaveChanges() > 0;                
        } 
```

这只是我的通用存储库的一部分。它在企业应用程序中效果很好。

**更新：**

> 分离只影响传递给方法的特定对象。如果要分离的对象在对象上下文中有相关对象，则这些对象不会被分离。

EF 会在设置实体状态或被`SaveChanges()`调用时自动在图中附加分离的对象。

我真的不知道为什么需要从上下文中分离对象。您还可以使用`AsNoTracking()`从数据库中加载实体，而无需首先将它们附加到上下文中。

# android - Android DNS 需要预热吗？

> ID：12742475
> 
> 赞同：6
> 
> 时间：2012-10-05T08:33:56.603
> 
> 标签：android, dns, android-networking

从[Android java.net.UnknownHostException: Host is unresolved (strategy question)](https://stackoverflow.com/questions/3293659/android-java-net-unknownhostexception-host-is-unresolved-strategy-question)等旧帖子中，建议使用以下代码：

```
 try {
      InetAddress i = InetAddress.getByName(URLName);
    } catch (UnknownHostException e1) {
      e1.printStackTrace();
    } 
```

那么这是否意味着当设备中没有缓存 DNS 条目时，例如在启动后，它会`java.net.UnknownHostException: Host`第一次返回，即使是有效的 DNS 也是如此？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:42:06.463

这取决于安卓的版本。

如果您有 Internet 连接并且您的应用程序在清单文件中声明它需要 Internet 访问，那么地址应该可以毫无问题地解析。

[http://developer.android.com/reference/java/net/InetAddress.html](http://developer.android.com/reference/java/net/InetAddress.html)

```
在 Android 4.0 (Ice Cream Sandwich) 及更早版本中，DNS 缓存由
InetAddress 和 C 库，这意味着无法接受 DNS TTL
正确。在以后的版本中，缓存仅由 C 库和 DNS TTL 完成
很荣幸。
```

因此，如果您要求的地址不超过*生存时间*，缓存会回答。如果它不在缓存中或已过期，则操作系统将尝试通过转到 DNS 服务器来找到它。仅当您的 Internet 连接未启动或没有 DNS 响应时引发异常，而不是在缓存请求失败时引发。

也就是说，如果您正在为较旧的 android 编写应用程序，那么这个问题可能仍然会困扰您。

有办法处理：
[Android：Flush DNS](https://stackoverflow.com/questions/2101762/android-flush-dns)

# apache-flex - 编译选项时发现不同的行为 - keep-generated-actionscript (SDK 4.6.0)

> ID：12742476
> 
> 赞同：1
> 
> 时间：2012-10-05T08:33:56.797
> 
> 标签：apache-flex, flex4.6, bindable

如果 [Bindable] 属性被覆盖，是否需要在子类中添加 [Bindable] 元标记？

## 父类

[可绑定] public get enabled: Boolean public set enabled(value:Boolean)

## 子类

公共覆盖设置启用（值：布尔）

我尝试使用 SDK 4.6.0 编译上述代码。如果元数据[Bindable]缺失，如果修改了property-enabled，就无法检测到property-enabled的变化。仅当设置了编译器选项 - keep-generated-actionscript = true 时才发现问题。如果编译器选项-keep-generated-actionscript = false，则找不到问题，即使元数据[Bindable]缺失也能检测到属性的变化。

你知道为什么吗？？？

# mysql - 第二次查询后如何在 Joomla 中使用 getNumRows()

> ID：12742482
> 
> 赞同：2
> 
> 时间：2012-10-05T08:34:05.760
> 
> 标签：mysql, joomla2.5

我正在 Joomla 环境中开发一个 php 脚本，它查询同一个表/数据库两次。每次我都需要知道是否找到任何匹配项。

似乎最好的方法是使用 getNumRows()。Joomla 文档对其使用非常具体：

> 其他结果集方法 getNumRows()
> 
> getNumRows() 将返回最后一个查询找到并等待读取的结果行数。要从 getNumRows() 获取结果，您必须在查询之后和检索任何结果之前运行它。

我在我的脚本中遵循这一点。在第一个查询没有问题，但第二个查询总是抛出一个警告 - 很可能是因为第二次 getNumRows() 调用是在从第一个查询检索结果之后 - 这不符合 Joomla 要求。

任何想法如何解决？非常感谢！

我的脚本中有问题的部分内容如下：

```
$db = JFactory::getDBO();
$query = "SELECT * FROM #__art_mobiles WHERE user_agent_header='$ua'";
$db->setQuery($query);
$rowsAG = $db->getNumRows();
$replyAG = $db->loadRow();

if ($rowsAG == 0) {

//if no match check www.handsetdetection.com
//see https://www.handsetdetection.com/properties/vendormodel for current list of models in database together with headers
echo "not in local database - try external<br/>";  
$prod = '';

if ($hd3->siteDetect()) {

    $replyHD = $hd3->getReply();

    $man = $replyHD['hd_specs']['general_vendor'];
    $dev = $replyHD['hd_specs']['general_model'];
    $os = $replyHD['hd_specs']['general_platform'];
    echo "found in handsetdetection.com database<br/>";

    //check for provisional match in local database
    $query = "SELECT * FROM #__art_mobiles WHERE manufacturer='$man' AND device='$dev'";
    $db->setQuery($query);
    $rowsAGprov = $db->getNumRows();
    $replyAGprov = $db->loadRow();

    if ($rowsAGprov == 0) { **[ETC]** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:57:32.443

我认为这可能是使用`$db->loadRow();`as`getNumRows`依赖于已执行查询的问题。

例如，您可以尝试：

```
$db = JFactory::getDBO();
$query = "SELECT * FROM #__art_mobiles WHERE user_agent_header='$ua'";
$db->setQuery($query);
$replyAG = $db->query();
$rowsAG = $db->getNumRows(); 
```

和：

```
$query = "SELECT * FROM #__art_mobiles WHERE manufacturer='$man' AND device='$dev'";
$db->setQuery($query);
$replyAGprov = $db->query();
$rowsAGprov = $db->getNumRows(); 
```

虽然我不确定从查询返回的结果和 loadRow 之间的差异是什么/是否存在差异。值得尝试并看看这是否有效。

或者，如果您仅用于查看记录是否存在，则可以改为对变量`getNumRows`进行某种检查。`$replyAG`如果没有结果，再次尝试查看 loadRow 返回的内容可能是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:58:21.557

在编写查询之前，您需要添加以下代码：

```
$query = $db->getQuery(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T09:41:15.730

你需要使用

```
$db = JFactory::getDbo();
$query = $db->getQuery(true)
            ->select($db->qn(array('id')))
            ->from($db->qn('#__social_notifications'))
            ->where($db->qn('status') . ' = ' . $db->q(0));
$db->setQuery($query);
$db->execute();
$resultData = $db->getNumRows(); 
```

# file - 识别 AWK 中的重叠范围

> ID：12742484
> 
> 赞同：1
> 
> 时间：2012-10-05T08:34:16.017
> 
> 标签：file, text, awk, comparison, match

我有一个包含 3 列行（制表符分隔）的文件，例如：

```
2 45 100 
```

还有一个包含 3 列行（制表符分隔）的第二个文件，例如：

```
2 10 200 
```

如果两个文件中的 $1 匹配并且文件 1 中的 $2-$3 之间的范围与文件 2 中的 $2-$3 的范围完全相交，我想要一个匹配行的 awk 命令。它可以在文件 2 中的值范围内或者文件2中的范围可以在文件1中的范围内，或者它们可以只是部分重叠。范围之间的任何类型的相交都将被视为匹配，然后在文件 3 中打印该行。

我当前的代码仅在 $1 和 $2 或 $3 匹配时才匹配，但不适用于范围在彼此内时，因为在这些情况下精确数字不匹配。

```
 awk '
        BEGIN {
            FS = "\t";
        }
        FILENAME == ARGV[1] {
            pair[ $1, $2, $3 ] = 1;
            next;
        }
        {
            if ( pair[ $1, $2, $3 ] == 1 ) {
                print $1 $2 $3;
            }
        } 
```

示例输入：

文件1：

```
1 10 23
2 30 50
6 100 110
8 20 25 
```

文件2：

```
1 5 15
10 30 50
2 10 100
8 22 24 
```

这里第 1 行（file1）匹配第 1 行（file2），因为第一列匹配并且范围 10-15 在两个范围之间重叠 第 2 行（file1）匹配第 3 行（file2），因为第一列匹配并且 30-50 的范围在范围内10-100。第 4 行（file1）匹配第 4 行（file2），因为第一列匹配并且 22-24 范围在两者中重叠。因此输出将是 file2 中的第 1,2 和 4 行打印在新的输出文件中。

希望这些例子有所帮助。

非常感谢您的帮助。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:27:03.767

`join`如果您使用命令按第一个字段（$1）合并两个文件，这很容易：

如果您只想将 file2 行作为输出：

```
join --nocheck-order <(sort -n file1) <(sort -n file2) | awk '{if ($2 >= $4 && $2 <= $5 || $3 >= $4 && $3 <= $5 || $4 >= $2 && $4 <= $3 || $5 >= $2 && $5 <= $3) {print $1" "$4" "$5;}}' - 
```

使用您的输入文件，我得到了以下输出：

```
1 5 15
2 10 100
8 22 24 
```

# java - 在一台 Windows 机器上运行多个 Tomcat 实例

> ID：12742485
> 
> 赞同：1
> 
> 时间：2012-10-05T08:34:16.153
> 
> 标签：java, tomcat6

我下载`apache-tomcat-6.0.35`并放在`tomcat`文件夹中。

我确实对此： [http ://builddeploy.blogspot.com/2010/02/running-multiple-tomcat-instances-on.html](http://builddeploy.blogspot.com/2010/02/running-multiple-tomcat-instances-on.html)

我的tomcat目录结构是

```
 tomcat
     apache-tomcat-6.0.35  
           bin,conf,lib,logs,temp,webapps,work   //Folders name
     tomcatclpl
           bin,conf,logs,temp,webapps,work  //Folders name
     tomcatmass
           bin,conf,logs,temp,webapps,work   //Folders name 
```

和`apache-tomcat-6.0.35's server.xml file port is 8085`

`<Server port="8005" shutdown="SHUTDOWN">`

和

`<Connector port="8005" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />`

`tomcatclpl's conf - server.xml file` 我改变了以下

`<Server port="8205" shutdown="SHUTDOWN">`

和

`<Connector port="8282" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />` 和 `<Connector port="8209" protocol="AJP/1.3" redirectPort="8443" />`

像 tomcatmass 一样，我也将端口更改为`8383`.

我的 starup.bat 文件是：

```
 @echo off
@echo Tomcat CLPL Service
set "CATALINA_BASE = C:\Tomcat\tomcatclpl"
set "CATALINA_HOME=C:\Tomcat\apache-tomcat-6.0.35"
C:\Tomcat\tomcatclpl\bin\startup.bat 
```

当我在 cmd 行中运行时；

```
C:\Tomcat\tomcatclpl>startup.bat
Tomcat MASS Service
Using CATALINA_BASE:   "C:\Tomcat\tomcatclpl"
Using CATALINA_HOME:   "C:\Tomcat\tomcatclpl"
Using CATALINA_TMPDIR: "C:\Tomcat\tomcatclpl\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.6.0_01"
Using CLASSPATH:       "C:\Tomcat\tomcatclpl\bin\bootstrap.jar"
C:\Tomcat\tomcatclpl> 
```

此 `bootstrap.jar 文件未启动。请帮帮我。

由于`CATALINA_BASE & CATALINA_HOME`采取相同路径的原因，我无法解决此问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:01:28.143

我解决问题。首先我们应该启动默认的 tomcat 服务器。然后只需要启动实例服务器

```
 @echo off
 @echo Tomcat CLPL Service
 set "CATALINA_HOME=C:\Tomcat\apache-tomcat-6.0.35"
 set "CATALINA_BASE=C:\Tomcat\tomcatclpl"
 C:\Tomcat\apache-tomcat-6.0.35\bin\startup.bat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:46:52.823

```
edit startup.bat
set CATALINA_BASE=..
set CATALINA_HOME=@catalina.home@
set CATALINA_OPTS=-server -Xms@jvm.minmemory@m -Xmx@jvm.maxmemory@m
"%CATALINA_HOME%\bin\catalina" run %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

[有关使用 CATALINA_BASE 配置单独实例](http://mail-archives.apache.org/mod_mbox/tomcat-users/200505.mbox/%3C427A6C44.8030707@objektpark.de%3E)的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:22:38.423

```
@echo off
@echo Tomcat CLPL Service
set CATALINA_BASE="C:\Tomcat\tomcatclpl"
set CATALINA_HOME="C:\Tomcat\apache-tomcat-6.0.35"
C:\Tomcat\tomcatclpl\bin\startup.bat 
```

这是我通常设置环境变量的方式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-07T13:05:15.773

让我填写这个；

*   您将 tomcat zip 解压缩两次，放入两个不同的文件夹
*   以管理员身份打开命令提示符
*   导航到“tomcat1”\bin\
*   运行服务安装tomcat1
*   导航到“tomcat2”\bin\
*   在命令行上调用：设置“CATALINA_HOME=C:\path\to\tomcat2\”
*   运行服务安装tomcat2

现在您将在您的环境中看到两个服务（services.msc）。每个由 X 调用的都是 1 或 2：“Apache Tomcat tomcatX”。它们具有正确的 base/home 变量并且应该指向正确的 lib\ 文件夹（因此 bootstrap.jar 可用于启动服务器）。

问题是，您可以使用该工具来控制服务的 tomcat6w.exe。它只会在默认服务器上运行（至少对我来说），即安装的第一个服务。为了绕过这个并有机会为 java 环境定义变量，我们需要使用 regedit.exe 查找内容

*   导航注册表：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\tomcat1\Parameters\Java
*   设置选项/Xms/Xmx
*   找出其余的（在同一棵树中找到 tomcat2）

# iphone - 如何从推送通知中获取文本字符串？

> ID：12742489
> 
> 赞同：0
> 
> 时间：2012-10-05T08:34:43.887
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，我在其中接收来自服务器的推送通知。现在我要去视图控制器显示消息。在 tableview 中加载相同的消息。所以这不是问题。现在我收到两个各种消息，一个是链接，另一个是之前的消息。如果它是一个链接，我想在 saffari 中打开它，不需要像往常一样去 tableview。有人可以帮我实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:12:34.697

当您单击推送通知时，您会在函数中获得字典 - `didReceiveRemoteNotification:`

试试这个代码： -

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
    {
        NSLog(@"remote notification: %@",[userInfo description]);

        if (userInfo)
        {
            if ([[userInfo allKeys] containsObject:@"aps"])
            {
                if([[[userInfo objectForKey:@"aps"] allKeys] containsObject:@"alert"])
                {
                    if([[[userInfo objectForKey:@"aps"] allKeys] containsObject:@"alert"])
                    {
                        NSString *urlString = [[userInfo objectForKey:@"aps"] objectForKey:@"alert"];
                        NSURL *url = [NSURL URLWithString:urlString];

                        if(url)     
                        {
                            [[UIApplication sharedApplication]openURL:url];  // open in the safari...
                        }

                        else
                        {
                            //  use the message in table view

                        }

                    }

                }
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:11:38.497

推送通知与您的应用程序相关联，因此简而言之，您的应用程序无法直接打开 safari 的推送通知。但是，一种解决方法可能是这样的：

*   用户响应通知（即在锁定屏幕上滑动打开它）
*   您的应用程序打开，通知中的数据被传递到您的应用程序 `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中。然后，您可以像这样询问传入的数据

    ```
    NSDictionary *dictionary = [launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];

    // If dictionary is not nil, then your app is launched due to a push notification
    if (dictionary != nil) {

        NSDictionary *payload = [tmpDic objectForKey:@"aps"]; 
    } 
    ```

*   获得有效负载后，查看内容，如果是 URL，则调用 safari URL 方案，并传入 URL。像这样

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString: <URL from payload>]];`

这将帮助您实现您想要做的事情，但这可能意味着用户会在操作系统将它们切换到 safari 之前先短暂地看到您的应用程序。

附带说明，您为什么要这样做？您的用户不应该从通知中启动随机 URL，我认为 Apple 不会太喜欢这样。也许他们应该首先在您的应用程序中看到有关 URL 的一些信息，然后选择是否要在 safari 中打开它？

# java - 如何从 Eclipse 添加到 svn 所有 *.class 文件

> ID：12742490
> 
> 赞同：2
> 
> 时间：2012-10-05T08:34:53.483
> 
> 标签：java, eclipse, svn, subclipse

我在eclipse中有java项目。并在svn中同步。

![Java 项目](../Images/f18abe27f47a7b39773f489bd51a52b9.png)

在导航器视图中，我看不到同步类文件。如何添加所有 *.class 文件以上传到 svn：

![班级](../Images/8d4b933e2aa6af7aebfb84d5718b7272.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:49:51.660

除非您有特定的理由希望将编译后的代码存储在版本控制中，否则我不会费心尝试添加`.class`文件。Eclipse*可能*允许您以某种方式添加它们，但如果这样做，可能会故意使其变得困难。不过，没有理由不能从命令行手动添加它们。

相反，我会确保将您的构建脚本（ant、maven 或其他）签入存储库，并以确定性和可重复的方式构建您的类文件。例如，确保指定编译器的版本，以便您的编译器的当前版本成为此时使用此源代码重复构建的要求。

# validation - FluentValidation 和 GreaterThanOrEqualTo 规则，值为 0

> ID：12742495
> 
> 赞同：1
> 
> 时间：2012-10-05T08:35:15.090
> 
> 标签：validation, fluentvalidation

我有一个 fluentvalidation 问题（版本 3.4.6.0 和 fluentvalidation.MVC4，jQuery 验证 1.9.0.1），当值为 0 时验证将失败，它不应该。这是我的代码和失败的测试。

```
public class SomeModel
{
    public string Id { get; set; }
    public decimal Price { get; set; }
}

public class EditMachineValidator : AbstractValidator<SomeModel>
{
    public SomeModelValidator()
    {
        RuleFor(x => x.Price).NotEmpty();
        RuleFor(x => x.Price).GreaterThanOrEqualTo(0m);
    }
}

[Fact]
public void Should_Not_Have_Error_When_Price_Is_Zero()
{
    var validator = SomeModelValidator();
    validator.ShouldNotHaveValidationErrorFor(x => x.Price, 0m);
} 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:13:32.853

经过一些测试， `GreaterThanOrEqualTo`是没有问题的。

它来自

```
RuleFor(x => x.Price).NotEmpty(); 
```

作为一个`0`值被认为是`empty`！如果您删除它，它将起作用。

# java - 两个数据库的结果集比较

> ID：12742498
> 
> 赞同：-1
> 
> 时间：2012-10-05T08:35:19.747
> 
> 标签：java

我如何比较来自两个不同数据库的两个结果集。我在 sybase 中有一个表，在 oracle 中有同一个表，现在我将 oracle 表数据传输到 sybase 表。现在我必须编写一个 java 程序，它将比较两个结果集并查找是否缺少任何数据。如果是这样，则更新 excel 中丢失的数据。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:52:12.930

如果您确实知道**如何迭代**单个`ResultSet`对象，那么您可以逐个元素地比较这两个结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:49:11.023

如果您在 SyBase 中同时拥有这两个表，为什么要使用 Java？这实际上是 SQL 最适合的任务 :-)

我假设这些表在结构上是相同的并且有一个合理的主键？如果是这样，这只是在两个表之间进行左右外连接的问题，并且你有区别......

干杯，

# ruby-on-rails - Rails：如何在视图中访问控制器中声明的实例变量？

> ID：12742499
> 
> 赞同：2
> 
> 时间：2012-10-05T08:35:21.220
> 
> 标签：ruby-on-rails, ruby

Ruby 实例变量可供单个对象访问。但是在 Rails 中，如果我在控制器中声明一个实例变量，它仍然可以在视图中访问。这背后的架构是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:39:30.830

好吧，您的控制器调用`render`它来呈现您的模板。因此，模板代码正在控制器实例的范围内运行。因此，您可以使用任何声明的实例变量。

# iphone - uipickerview 在 iPhone 的倒计时模式下添加第二个字段

> ID：12742501
> 
> 赞同：2
> 
> 时间：2012-10-05T08:35:25.010
> 
> 标签：iphone, uidatepicker

我有以格式显示倒数计时器的功能，但是当 uidatepicker 处于倒数计时器模式时，它只显示 HH:MM。

```
how i can add a extra field for second in uidatepickerview. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T23:42:12.040

> 我如何在 uidatepickerview 中为第二个添加一个额外的字段。

你不能。 `UIDatePicker`仅在倒计时模式下显示小时和分钟。如果您还需要显示秒数，则必须使用`UIPickerView`.

与往常一样，您应该提交[增强请求](https://bugreport.apple.com)以请求此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:44:45.273

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
return 2;
} 
```

它将在您的选择器视图中创建部分。

# user-interface - 处理 + Arduino + 串口 + Cp5.listbox

> ID：12742503
> 
> 赞同：0
> 
> 时间：2012-10-05T08:35:27.180
> 
> 标签：user-interface, listbox, serial-port, arduino, processing

我想创建一个包含串行端口列表的“列表框”（使用 controlP5 GUI 库）：目标是创建一个使用处理与 Arduino Uno 通信的独立应用程序，独立于我要使用的操作系统（ win、mac 或 linux），并选择（使用“列表框”）正确的串行端口以与 Arduino 通信。可能吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:28:44.100

```
ControlP5 cp5 = new ControlP5(this);
ListBox listBox = cp5.addListBox("serialPorts");
Serial serial;
String[] ports = Serial.list();
for (int i=0; i<ports.length; i++) {
    listBox.addItem(ports[i]);
}

void controlEvent(ControlEvent theEvent) {
    if(theEvent.isGroup() && theEvent.name().equals("myList")){
        int val = (int)theEvent.group().value();
        serial = new Serial(this, ports[val], 9600);
    }
} 
```

未经测试，但这是基本思想......

# arduino - Arduino ADK Blink 示例有时不闪烁

> ID：12742506
> 
> 赞同：0
> 
> 时间：2012-10-05T08:35:38.007
> 
> 标签：arduino

我有 arduino uno 与 itead usbshield 连接。我正在从 android 手机接收数据，只有当我打开串行监视器时它才会闪烁，否则它不会闪烁。如何独立闪烁。它与打开串行监视器有什么关系......？

我用pin 13来闪烁它...请指导我...

这是代码..

```
void loop()
{
Usb.Task();
if(adk.isReady()) {
uint8_t msg[1];
uint16_t len = sizeof(msg);
uint8_t rcode = adk.RcvData(&len, msg);
if(rcode && rcode != hrNAK)
  USBTRACE2("Data rcv. :", rcode);
  if(len > 0) {
  Serial.print(F("\r\nData Packet: "));
  Serial.print(msg[0]);
  digitalWrite(LED,msg[0] ? HIGH : LOW);
  }
}
else
digitalWrite(LED, LOW);
} 
```

问候维诺德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:02:39.757

LED连接到哪个引脚？我的猜测是它连接到引脚 13

针脚 13 也连接到串行端口。当串行端口发生任何数据传输时，引脚 13 会闪烁。

# jquery - HTML 5 页面上的多个 Canvas 元素

> ID：12742509
> 
> 赞同：2
> 
> 时间：2012-10-05T08:35:50.457
> 
> 标签：jquery, html, jquery-plugins, html5-canvas

我可以在 HTML 5 页面上有多个画布，每个画布上都有一个图像吗？我基本上需要在我的应用程序的所有图像上使用[JS 操作插件](http://joelb.me/jsmanipulate/)，这个插件需要图像在画布上。

在其中有多个画布和一个图像会影响或减慢页面的性能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:16:27.917

是的，您可以拥有多个画布元素。您的页面的性能不会因为有多个画布而受到影响。影响你表现的是画布的重绘。至于图像，决定性能的是必须进行多少重绘。

您可以在以下位置阅读更多内容：[单个页面上的 HTML5 多个画​​布](https://stackoverflow.com/questions/4020910/html5-multiple-canvas-on-a-single-page)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:35:32.433

Canvas 元素的重绘速度非常快。它比 SVG 快得多，这使得它作为 Web 开发的绘图工具非常有效。

您可以根据需要使用任意数量的画布，它们不应对您的页面性能产生负面影响。

此外，画布元素是在整个页面中加载的，但是加载图像和绘制到画布中的代码*通常*是在页面完全加载*后*执行的，所以唯一会降低页面性能的就是你在不同的画布中执行的操作元素，而不是您在页面中使用的那些元素的数量。此外，如果您在页面加载后开始绘图，无论您在画布元素上做什么，因为当您开始绘图时页面将完全加载。

请记住，javascript 用于在画布上绘图。如果您使用繁重的过程来制作绘图，您会发现一幅画布绘图会阻塞另一幅，直到完成。尝试以更少阻塞的方式构建您的绘图代码，以避免这种情况。

# asp.net - 如何在 MVC3 中运行每个页面加载的方法？

> ID：12742512
> 
> 赞同：5
> 
> 时间：2012-10-05T08:35:54.267
> 
> 标签：asp.net, asp.net-mvc-3, pageload

对于 WebForms，如果我想在每次页面加载时运行一个方法，那么我会`Page_Load()`在主 Master Page 的方法中调用这个方法。

使用 MVC3 时是否有替代方案，也许是更好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T08:39:59.210

你可以创建一个类基控制器

```
 public class BaseController : Controller
{

    public BaseController()
    { 
        // your code here
    }
} 
```

并让您的每个新控制器都像基本控制器一样

```
public class MyController: BaseController 
```

我还发现 basecontroller 对于存储我在其他控制器中需要很多的其他功能非常有用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T08:40:14.620

我认为在 MVC 中最合适的方法是使用[过滤器](http://msdn.microsoft.com/en-us/library/dd410209%28v=vs.100%29.aspx)
MSDN 提供了很好的描述，网上有很多关于它们的文章和解释，比如[这个](http://msdn.microsoft.com/en-us/magazine/gg232768.aspx)

**编辑** [此](http://weblogs.asp.net/gunnarpeipman/archive/2010/08/15/asp-net-mvc-3-global-action-filters.aspx)示例甚至更好：它提供了一个简单的操作过滤器，然后在 global.asax 中注册，并在每个请求上执行，然后执行相关控制器中的实际操作。这样的概念允许您访问请求对象，并在实际控制器执行之前修改您想要的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:37:40.567

您可以将代码放在控制器的构造函数中。像这样：

```
public class FooController : Controller
{
    public FooController()
    {
        doThings();
    } 
```

# php - 如何在 zendframework 2 中应用 order by 子句？

> ID：12742513
> 
> 赞同：0
> 
> 时间：2012-10-05T08:35:58.573
> 
> 标签：php, zend-framework, zend-framework2

在 Zendframework 1 中，我们在模型中使用以下代码来应用 where 和 order by 子句：

```
$this->select()
     ->where('WHERE CLAUSE')
     ->order('ORDER FIELDS'); 
```

但在 Zendframework 2 中，它已更改为：

```
$this->select('WHERE CLAUSE'); 
```

我不知道如何将 order by 子句应用于我的选择对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:14:02.137

实际上有几种方法可以在 ZF2 中实现 where 子句，最“书呆子”的一种是

```
$select = $this->select();

$where = function(Where $clause) {
  $clause->like('username', 'foo%');
};

$select->where($where); 
```

至于其他，和ZF1一样

```
$select->order('id DESC'); 
```

[在 \Zend\Db\Sql](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html#order)的官方文档中阅读更多关于可能性的信息

# vb.net - 在继承类中修改选择案例的最佳方法

> ID：12742515
> 
> 赞同：1
> 
> 时间：2012-10-05T08:36:09.417
> 
> 标签：vb.net, inheritance

我正在解析具有两个属性（`Key`和`Value`）的值数组。

根据关键字`Key`调用某些函数来测试`Value`.

麻烦的是，我的任务是为新项目修改一些项目的关键字。它们共享 90% 的关键字，但有些是每个项目独有的，有些是常见的，但需要调用其他函数。

目前代码如下所示：

```
Public Structure Options
    Public Property Key
    Public Property Value
End Structure

Public Sub CheckPresentation(OptionsList as List(of Options))
    for each Elem in Optionslist
        select case elem.key
            case 1
                if elem.Value<>"bla" then
                    logger.info("bla")
                end if
            case 2
                 ...
            case 99
                 ...
       end select
    next
End Sub 
```

我首先想简单地构建一个新类并继承旧类。但是由于所有的逻辑都在选择的情况下，这将需要完全重建并有大量的代码重叠。有人知道如何更好地构建它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:23:37.620

您应该为每个关键字创建一个方法。

例如，为您`case 1`创建以下方法：

```
Sub LogIfNotBla(elem As Options)
    If elem.Value<>"bla" Then
        logger.info("bla")
    End If
End Sub 
```

对每个关键字执行此操作。

然后，创建一个映射，使用字典将每个关键字映射到其处理程序：

```
Dim handler = new Dictionary(Of Int32, Action(Of Options)) From 
{ 
    {1,  AddressOf LogIfNotBla},
    {2,  AddressOf Foo},
    {99, AddressOf FooBar}
} 
```

而不是你的巨大`Select Case`，只需使用查找来调用正确的方法：

```
Public Sub CheckPresentation(OptionsList as List(of Options))
    For Each elem in Optionslist
        handler(Elem.Key)(elem)
    Next
End Sub 
```

* * *

现在您可以通过两种方式更改行为：

**覆盖**：

标记方法`overridable`并在子类中覆盖它们：

```
Overrides Sub LogIfNotBla(elem As Options)
    If elem.Value<>"bla" And SomeThingElse Then
        SomeOtherLogger.info("bla")
    End If
End Sub 
```

**重新配置**

更改`handler`字典以对特定关键字调用其他方法：

```
handler(1) = AddressOf AnotherMethodInsteadOfLogIfNotBla 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:01:59.707

您始终可以调用基类的默认行为方法。例如，假设您只想覆盖键 1、4 和 72 的行为，您可以在派生类中执行此操作：

```
Public Overrides Sub CheckPresentation(OptionsList as List(of Options))
    For Each Elem In Optionslist
        Select Case elem.key
            Case 1
                ...
            Case 4
                ...
            Case 72
                ...
            Case Else
                MyBase.CheckPresentation(OptionsList)
        End Select
    Next
End Sub 
```

# vim - 在vim中实时编辑html代码并在pyqt4的QWebView中显示

> ID：12742516
> 
> 赞同：0
> 
> 时间：2012-10-05T08:36:11.643
> 
> 标签：vim, pyqt4

我喜欢在 vim 中编辑 html 代码，但查看效果很费力。我需要保存文件，在浏览器中打开 html 文件，这很浪费时间。我不喜欢用 dw 编码，没有 vim 功能。然后我想开发一个工具，使用 pyqt4 的 QwebView 来监控 vim 在内存中的缓冲区。因此，当我在 vim 中编码时，QwebView 可以在我输入代码时立即显示效果，这可能吗？就像这个[实时 html 编辑器](http://htmledit.squarefree.com/)一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:06:04.647

[该插件](https://github.com/suan/vim-instant-markdown)进行实时降价渲染和浏览器刷新。你可以把它当作灵感的来源。

# jquery - 是否可以使用 jQuery 来检查元素是否是动态创建的？

> ID：12742521
> 
> 赞同：2
> 
> 时间：2012-10-05T08:36:42.770
> 
> 标签：jquery

我正在使用 jQuery 将新`<option>`标签附加到`<select>`字段，在某些情况下，我需要在不知道它们的值的情况下删除这些选项。
是否可以删除 jQuery 创建的所有选项，同时保持原始选项不变？

我能想到的唯一方法是检查它们不是我想要保留的值。希望有更简单，更快的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:41:01.033

一旦元素被插入到 DOM 中，它们都是相等的；没有可以检查的神奇“动态创建”标志。

当然，您始终可以创建自己的方法来执行此操作。例如，您可以将`"data-dynamic"`HTML 属性或`dynamic`CSS 类添加到动态创建的选项中，然后根据它们进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:46:36.350

您可以将属性添加到标签并对其进行过滤。例如，您可以使它们成为类的一部分`appended`并以这种方式删除它们。[参见这个 fiddle](http://jsfiddle.net/Calavoow/P4Spn/)的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:47:10.333

如果您已经创建了所有动态元素，那么您可以使用[HTML5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)在元素上存储一小段元数据，以使这变得微不足道。

例如，

```
element.attr("data-dynamic", "true"); 
```

然后，您可以通过以下方式找到所有动态元素：

```
$('*[data-dynamic="true"]') 
```

当然，如果您知道这可能会出现在哪种类型的元素上，您可以使其更高效：

```
$('option[data-dynamic="true"]') 
```

这还有更多用途，例如将数据存储在非动态创建的 HTML 中以供 JavaScript 以后使用。

**注意：**虽然它是 HTML5，但它在大多数浏览器 (IE4+) 中都有效，因为它与获取任何属性相同，但不同之处在于它被认为是具有 HTML5 文档类型的有效 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T14:15:59.023

它很脏，但这里有；

```
$(function() {
    var myselects = $('#myselectelement');
    var myoptions = myselects.html();
    // now we know the state of the select on ready
    var resetopts = function(sel, opt)
    {
        sel.html(opt);
    }
    // call resetopts(myselects, myoptions) when you want to reset. 
}); 
```

这样您就不会添加任何额外的标记。虽然有内存成本。

我有办法用 DOM 元素做到这一点，但上面的内容很难在触摸屏上从内存中输入。

# c# - EditorFor AdditionalViewData 不起作用

> ID：12742524
> 
> 赞同：0
> 
> 时间：2012-10-05T08:36:57.593
> 
> 标签：c#, asp.net, asp.net-mvc, razor

我有 ：

```
@Html.EditorFor(model => model.name) 
```

这将显示我的用户名，但我想覆盖此名称。所以我尝试了这个：

```
@Html.EditorFor(model => model.Password, new { value = "othertext"} ) 
```

但这不起作用，我总是有我的用户名。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:52:18.097

EditorFor 上的“附加视图数据”参数设置您的编辑器模板使用的新视图数据。它不会像您在这里使用的那样渲染“额外的对象”。

据我了解，您尝试设置`htmlAttributes`：

```
@Html.TextBoxFor(model => model.Password, new { value = "xxx" }) 
```

# javascript - 在javascript中使用查找长度解析json并使用索引值进行切换

> ID：12742527
> 
> 赞同：0
> 
> 时间：2012-10-05T08:37:07.250
> 
> 标签：javascript, jquery, json

```
"slider":
[{
    "album":{
        "name":"album 0",
        "title":"title 0",
        "description":"desc 0"
    },
    "album":{
        "name":"album 1",
        "title":"title 1",
        "description":"desc 1"
    },
    "album":{
        "name":"album 2",
        "title":"title 2",
        "description":"desc 2"
    }
  }]
} 
```

我想找到专辑的长度，我想切换到具有索引值的专辑。

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:42:25.307

如果你有

```
var slider= {
  "albums": [ 
    {
        "name":"album 0",
        "title":"title 0",
        "description":"desc 0"
    },
    {   "name":"album 1",
        "title":"title 1",
        "description":"desc 1"
    },
    {
        "name":"album 2",
        "title":"title 2",
        "description":"desc 2"
    }
  ]
} 
```

然后 slider.albums[1].name 会给你“专辑 1”

* * *

**更新** 所以在一个for循环中：

```
var albums = slider.albums;
for (var i=0,n=albums.length, album;i<n;i++) { 
  album = albums[i];
  alert((i+1)+":"+album.name+" - " + album.title);
} 
```

[演示](http://jsfiddle.net/mplungjan/S4TTx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:43:38.403

我会选择一个类似的结构：

```
"slider":[
    {
        "name":"album 0",
        "title":"title 0",
        "description":"desc 0"
    },
    {
        "name":"album 1",
        "title":"title 1",
        "description":"desc 1"
    },
    {
        "name":"album 2",
        "title":"title 2",
        "description":"desc 2"
    }
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:47:24.890

您对 JSON 建模的方式不正确。目前，您有 3 个具有相同标识符（专辑）的键。您应该改为将其更改为数组。

这是一个关于如何做到这一点的好例子：

```
var slider = {
    "albums":
    [
        {
            "name":"album 0",
            "title":"title 0",
            "description":"desc 0"
        },
        {
            "name":"album 1",
            "title":"title 1",
            "description":"desc 1"
        },
        {
            "name":"album 2",
            "title":"title 2",
            "description":"desc 2"
        }
    ]
}

slider.albums.length 
```

# grails - 未关闭的 GSP 表达式：Grails GSP 引擎无法解析嵌套的 GSP 表达式

> ID：12742531
> 
> 赞同：0
> 
> 时间：2012-10-05T08:37:19.160
> 
> 标签：grails, groovy, gsp

我需要创建一个自定义gsp，其域模型设计如下

```
class Question {

    SortedSet<Choice> choiceCollection;

    static hasMany = [choiceCollection:Choice]
    static mappping = {
        choiceCollection(joinTable:false)
    }

} 
```

每个问题对象都有五个选项。所以，我创建了以下代码片段

**创建.gsp**

```
<g:each var="i" in="${(1..5)}">
    <div class="fieldcontain  required">
    <label for="description">
            Option ${i}.
            <span class="required-indicator">*</span>
        </label>
        <g:textArea name="choiceCollection[${i}].description" cols="40" rows="5" maxlength="2000" value="${questionInstance?.choiceCollection[${i}]?.description}"/>
    </div>
</g:each> 
```

尽管 Grails GSP 引擎抱怨*Unclosed GSP 表达式*不正确 - g:textArea 如上所示已关闭 - 但我相信真正的问题是表达式

```
${questionInstance?.choiceCollection[${i}]?.description} 
```

其中涉及嵌套的 GSP 表达式。

问题：我是否缺少某些功能？如果是这样，我应该怎么做才能克服我的障碍？

Grails 版本：2.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:41:21.407

不应该

```
${questionInstance?.choiceCollection[${i}]?.description} 
```

是

```
${questionInstance?.choiceCollection[ i ]?.description} 
```

* * *

设置位：

尝试类似：

```
<g:each var="choice" status="i" in="${questionInstance?.choiceCollection}"> 
```

所以`i`仍然包含您的索引，但`choice`包含您想要使用的内容`questionInstance?.choiceCollection[${i}]`

# iphone - UINavigationController 堆栈

> ID：12742532
> 
> 赞同：1
> 
> 时间：2012-10-05T08:37:22.500
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

Instapaper 和 Twitterrific 等应用程序启动到不是其导航堆栈根视图的视图。我们知道这一点是因为初始视图已经有一个后退按钮。Instapaper 推出了一个深度（Instapaper > 稍后阅读）和 Twitterific 两个深度（帐户 > 帐户 > 所有推文）。

`pushViewController:animated:`使用 Storyboard（可能是或）实现此行为的最有效/推荐的方法是什么，`performSegueWithIdentifier:sender:`以及如何在考虑新的状态恢复 API 的同时实现这一目标，以减少我想要呈现的视图与视图之间发生冲突的机会状态恢复过程想要呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:57:19.027

您不能仅通过 Storyboards 启动 segue，您必须编写代码。通过编写代码，我的意思是您可能想要使用`UINavigationController`'`-setViewControllers:animated:`方法，因为 segues 通常用于制作漂亮的动画过渡，而不是初始 UI 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:06:15.957

如果视图控制器是层次结构中的第二个，我只需从其方法中调用`UINavigationController`'s `- (void)pushViewController:animated:`(with )。如果它更深，那么而不是推动。`animated:NO``viewDidLoad``- (void)setViewControllers:`

# c++ - 如何创建一个返回数组的函数

> ID：12742533
> 
> 赞同：1
> 
> 时间：2012-10-05T08:37:22.363
> 
> 标签：c++, arrays, visual-c++, c++11

我想知道如何对一个返回一个数组的函数进行原型设计，该数组也接受一个数组。在对数组进行原型设计后，我该如何实现它

这个对吗？

```
coffee* getData(*coffe);

int main() {
    coffee cf[256];
    coffee FinalCoffee[256];
    FinalCoffee=getData(cf);
}

coffee getData(coffee objcf[]) {
    for(int i=0;i<SIZE;i++) {
        objcf[i].brand="nescafe";
    }
    return coffee;
} 
```

请在这方面给我建议。我需要能够取回数组，以便我可以将更新后的数组传递给另一个函数来处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:42:10.063

您的代码甚至没有匹配的声明和函数定义。这行不通。

但以下是：

```
std::vector<coffee> getData(std::vector<coffee> const& objs) {
    std::vector<coffee> result;
    // Do something to fill result
    return result;
} 
```

但是，如果像在您的示例中那样，您想要*操作*原始数组，而不是返回一个新数组，那么根本没有返回值并将参数作为非常量引用传递会更有意义：

```
void manipulateData(std::vector<coffee>& objs) {
    for (auto& obj : objs)
        obj.brand = "nescafe";
} 
```

根据经验，尽量避免使用 C 数组，而使用 C++ 标准库容器。这将使您的生活变得*更加*轻松。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T09:31:33.587

您可以在 C++ 中执行此操作。参考救援。前面有丑陋的语法，推荐使用 typedef：

```
#include <iostream>
using namespace std;

template<size_t N>
int (&f(int(&A)[N])) [N] {
        for(auto& i: A) i +=10;
        return A; 
} 

int main() {
        int A[3] = {1,2,3};
        auto& AA = f(A);
        for(auto i: AA)   cout << i << "\n";
} 
```

但是，正如 Konrad Rudolph 指出的那样，您实际上不需要从 f() 返回任何内容，您的数组已就地修改。而且您的功能可以更简单：
`void f(int (&A)[N])`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T08:42:54.360

首先，函数头的声明（原型）和定义（实现）是不同的：

```
coffee* getData(*coffe); 
```

相对

```
coffee getData(coffee objcf[]) 
```

最后一个甚至不返回指针。

至于您的问题，您的原型说`getData`返回一个*指针*，但您将它分配给一个*数组*。这行不通。而是声明`FinalCoffee`为指针：

```
coffee cf[256];
coffee* FinalCoffee;
FinalCoffee=getData(cf); 
```

但是，您实际上并不需要那个。当`getData`修改作为参数传递的数组时，这些修改也将在`cf`数组中，因为数组作为引用传递。

# android - 如何使用jquery获取html页面的源代码

> ID：12742534
> 
> 赞同：0
> 
> 时间：2012-10-05T08:37:23.127
> 
> 标签：android, jquery, html, cordova

在 android phonegap 应用程序中，我需要使用 javascript 或 jquery 从 index1.html 获取 index2.html 的脚本。

这是 index1.html 代码：

```
 function nextpage(){

   $.get('index2.html', function(data) {
          $('#div').html(data);
          alert('Load was performed.');
        });
     }

      <input type="button" value="button1" onclick="nextpage()"/> 
      <div id="div"></div> 
```

这是 index2.html 代码：

```
function return1()
     {
 alert("welcome to index2.html");
 var data={ "firstName": "John", "lastName": "Doe", "age": 25 };
     }

     <input type="button" value="welcome" onclick="return1()"/> 
```

从这段代码中，我从 index2.html 获得了“欢迎”按钮，并附加在 index1.html 的 #div 中。但是我需要在 #div 中附加 return1() 并需要获取警报（“欢迎使用 index2.html “）。这是html页面功能响应。如何做到这一点。请帮助我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:14:35.930

附加 index2.html 后，我将在您的代码中添加 return1() 函数。

```
function nextpage(){

   $.get('index2.html', function(data) {
          $('#div').html(data);
          alert('Load was performed.');

              return1(); //call this function to show alert

        });
     } 
```

# qt - Q_PROPERTY 并且没有成员错误

> ID：12742539
> 
> 赞同：1
> 
> 时间：2012-10-05T08:37:43.763
> 
> 标签：qt, qt4

我看不出我做错了什么。我正在尝试在一个类中创建一些属性（就像我之前所做的那样），但这次我收到错误*“类 Foo 没有名为 MyProp 的成员”*

标题是：

```
#ifndef P_H
#define P_H

#include <QObject>

class P : public QObject
{
    Q_OBJECT
    Q_PROPERTY(int Prop READ getProp WRITE setProp)
  public:
    explicit P(QObject *parent = 0);

    int getProp() const;
    void setProp(int nP);
  private:
    int m_p;
};

#endif // P_H 
```

cpp文件是：

```
#include "p.h"

P::P(QObject *parent) :
  QObject(parent)
{
}

int P::getProp() const
{
  return m_p;
}

void P::setProp(int nP)
{
  m_p = nP;
} 
```

但是当我尝试使用 foobar.PI 得到错误*类 P 没有名为 P 的成员*。我一直在阅读[Qt 文档](http://qt-project.org/doc/qt-4.8/properties.html)，但看不出有什么区别。有谁看到我做错了什么？

我正在使用 Qt Creator 2.4.1 和 Qt 4.8。

[... 编辑 ...]

这是我尝试使用它的方式：

```
#include "p.h"

int main(int argc, char *argv[])
{
  P c;

  c.Prop = 2;

  return 0;
} 
```

这是我能想到的最简单的例子，我得到了同样的错误。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:52:50.623

你需要像这样使用它：

```
P c;
c.setProperty("Prop", 42);  // set the property
c.property("Prop");         // retrieve the property 
```

# scheduled-tasks - schtasks /更改

> ID：12742540
> 
> 赞同：0
> 
> 时间：2012-10-05T08:37:47.540
> 
> 标签：scheduled-tasks, scheduling, windows-server-2008-r2, windows-task-scheduler

我不想将重复时间从一项任务从 5 分钟更改为 1 分钟。任务在那里：

文件夹： \

主机名：ZSERVER

任务名称：\Check_IIS_Server

下次运行时间：04.10.2012 16:30:45

状态：准备就绪

登录模式：交互/后台

上次运行时间：04.10.2012 16:25:45

最后结果：0

作者：WACKER\createuser

要运行的任务：powershell.exe powershell.exe -Noninteractive -Command "&{C:\Logfiles_Poly\Check_IIS_Server.ps1}"

开始于：不适用

评论：不适用

计划任务状态：已启用

空闲时间：禁用

电源管理：电池模式停止，电池不启动

以用户身份运行：WACKER\Adminuser

如果未重新安排，则删除任务：已启用

如果运行 X 小时和 X 分钟，则停止任务：01:00:00

计划：此格式不提供计划数据。

时间表类型：每日

开始时间：不适用

开始日期：不适用

结束日期：不适用

天数：每 1 天

月数：不适用

重复：每：0 小时，5 分钟

重复：直到：时间：无

重复：直到：持续时间：24 小时，0 分钟

重复：如果仍在运行则停止：禁用

现在我的更改命令是，我不想将重复时间编辑为一分钟：

C:\Users\username>schtasks /change /tn "Check_IIS_Server_Poly" /ri 1 错误：参数不正确。

为什么我无法通过命令编辑此作业？

谢谢，霍斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:43:58.770

您需要提供任务的完整路径，在您的情况下它将是`\Check_IIS_Server`. 我在这里看不到任何其他可能有问题的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T05:51:36.987

我创建了一个重复时间为一分钟的任务（schtasks /change /mo 1 /tn “Test”）并编辑其他设置 manuell。霍斯特

# powerpoint - 将 Enterprise Architect (UML) 文件（和其他文件）转换为图像

> ID：12742547
> 
> 赞同：1
> 
> 时间：2012-10-05T08:38:24.953
> 
> 标签：powerpoint, enterprise-architect, file-conversion

虽然我使用 Doxygen 已经有好几年了，但还有很多其他方法可以用来创建文档：PowerPoint 文件、Word 文件、UML 文件。尽管每种文件类型都有其优势（例如 PowerPoint 易于创建并且非常适合演示），但这很快会导致大量不同的文件、位于不同的位置且没有概览。

我现在想将所有这些文件合并到一个入口点。我的想法是使用 Doxygen 生成包含源代码文档的 HTML 文件，并在 Doxygen 中编写概述文档（就像 Qt 一样），并包含基于其他文件的图像。我也在尝试自动化整个系统。

我现在正在寻找一种将这些其他文件转换为图像的方法，因此我的自动化系统可以将这些图像包含在生成的 HTML 中（最后包含在生成的 QCH（Qt 帮助）文件中）。

对于 PowerPoint，我找到了一些工具，但我似乎没有让免费的工具正常工作，而且商业工具的试用版在我的一些 PPTX 文件上失败。

对于 Enterprise Architect，我没有找到自动生成图像的方法。

有人知道如何从 Enterprise Architect 文件和 PowerPoint 文件自动生成图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:51:53.467

找到了。

企业架构师有一个 Java 存档 (eaapi.jar)，您可以使用它从 Java 访问 EAP 文件。

您需要做的是获取存储库，打开文件并从中获取所有顶级包（我已省略此示例中的所有错误处理代码）：

```
org.sparx.Repository repo = new org.sparx.Repository();
org.sparx.Project project = repo.GetProjectInterface();
repo.OpenFile(args[0]);
org.sparx.Collection packages = repo.GetModels(); 
```

然后遍历所有包并调用您自己的方法（因为您需要递归调用自己）：

```
for (short i=0;i<packages.GetCount();i++)
   {
   org.sparx.Package pack = (org.sparx.Package)packages.GetAt(i);
   handlePackage (project, pack, currentdir);
   } 
```

然后在该方法中，循环所有图表并生成图像，并递归循环所有子包：

```
public static void handlePackage (org.sparx.Project project, org.sparx.Package pack, String output)
   {
   for (org.sparx.Diagram diagram : pack.GetDiagrams())
      {
      project.PutDiagramImageToFile (diagram.GetDiagramGUID(), output + diagram.GetName() + ".png", 1);
      }
   for (org.sparx.Package subpack : pack.GetPackages())
      {
      handlePackage(project,subpack,output);
      }
   } 
```

就是这样。

一些陷阱：

*   您必须将完全限定的路径传递给 OpenFile 方法。即使文件在您的本地文件夹中，您仍然必须传递完整路径。
*   输出文件相同

# eclipse - 如何像 Netbeans 一样在 Eclipse PDT 中远程保存？

> ID：12742550
> 
> 赞同：1
> 
> 时间：2012-10-05T08:38:46.917
> 
> 标签：eclipse, netbeans, eclipse-pdt, remote-server

Eclipse 远程保存有问题。

我已经使用 Netbeans 2 年了，我的项目存储在本地和远程测试服务器中。

当我在 Netbeans 中打开、更改和保存文件时，它还会将文件保存（覆盖）到远程位置。

此处描述了 Netbeans 的配置：[Netbeans Remote Sync](https://blogs.oracle.com/netbeansphp/entry/remote_synchronization)

另一件事是来自 SVN 的签出代码在我的本地，我只从本地提交，从不从远程提交，我的意思是我仅将远程服务器用于测试目的。

由于其他原因，我决定切换Eclipse，但我无法成功准备类似的开发环境。

我尝试了远程资源管理器，它很复杂，我找不到解决问题的方法。使用 Ant 有一些建议，我认为这很容易。Ant 对我来说更重要。

我愿意接受任何建议，以准备我上面在 Netbeans 案例中描述的类似开发环境。

问候...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T06:44:12.397

指向 NetBeans 页面的链接仅显示 localhost 连接的设置。
远程连接需要远程机器上的 ftp 服务器。

**首先，我将展示 localhost 连接的 Eclipse 设置。**

文件 -- 新建 -- PHP 项目。

项目名称：**SwitchLoc**

点击

![在此处输入图像描述](../Images/06b81a8721702f4dd1d09d19956528e4.png)

文件夹 -- 下一个

![在此处输入图像描述](../Images/3eaf848970e5dac8b246502439293b75.png)

如图所示设置。点击**浏览**

![在此处输入图像描述](../Images/3c8deb0cd9a3c2f71fe299c52a1f792a.png)

**创建一个新的连接。**

如图所示设置。单击**下一步**

![在此处输入图像描述](../Images/1151e7b1e99ee83a1048b5f691797a75.png)

仅查看发生了什么：单击**下一步或完成**

![在此处输入图像描述](../Images/94578d72278224c741159b5e8b6b60b4.png)

回到 Connection 选择**刚刚创建**的那个。

![在此处输入图像描述](../Images/97e240869e6ca8192ef931f2857d1410.png)

在您的 www 根目录下选择一个文件夹。

![在此处输入图像描述](../Images/aad322091119855008672a64fa45f8a3.png)

**创建一个新的 php 文件**
右击**Switch** new -- PHP File -- echo.php

![在此处输入图像描述](../Images/04a54ff8349a4e8dabf5ab55c3ea276d.png)

Richt 点击 echo.php -- Properties -- Run/Debug Settings -- **New** -- PHP Web Page

如图所示设置。点击**浏览**

![在此处输入图像描述](../Images/3b70b7ace0d8d07fc37dc5e2942221e8.png)

取消选中**自动生成**并更改**URL**

![在此处输入图像描述](../Images/0aaa8b23f54a99b28eea29706f7d96b3.png)

如图所示，切换到 Tab **Common Settings。**
点击**确定**

![在此处输入图像描述](../Images/d2f7ca45454ea03422e52ba8668db9e6.png)

开始**调试**
选择`switch-local`

![在此处输入图像描述](../Images/6f56faf74d1331d41f698c0384e2cae6.png)

**输出**

![在此处输入图像描述](../Images/b010dc5d61c21d10429b04f2a67f39c2.png)

**下一步：**`Remote Server`使用 FTP 和远程调试创建远程连接。

**在续集中进行。**

# ajax - 未调用 AJAX 成功处理程序

> ID：12742553
> 
> 赞同：0
> 
> 时间：2012-10-05T08:39:09.277
> 
> 标签：ajax, jquery, playframework-1.x

我正在尝试从我的本地计算机对 Heroku 上的 Play 应用程序执行 AJAX 请求。目前，`'complete'`和`'error'`处理程序正在被调用，但不是`'success'`. 在 Opera 和 Firefox 中，我的响应标头是：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-Type: application/json; charset=utf-8
Server: Play! Framework;1.2.4;prod
Set-Cookie: PLAY_FLASH=;Expires=Fri, 5-Oct-12 08:22:46 GMT;Path=/
Set-Cookie: PLAY_ERRORS=;Expires=Fri, 5-Oct-12 08:22:46 GMT;Path=/
Set-Cookie: PLAY_SESSION=;Expires=Fri, 5-Oct-12 08:22:46 GMT;Path=/
Content-Length: 2295
Connection: keep-alive 
```

Opera 还显示返回的 JSON 对象

这是我的代码：

```
var url = "http://myurl.com"

$.ajax({
    'complete': function (jqXHR, status) {
        console.log('Complete!');
        console.log(status);
        console.log(jqXHR.getAllResponseHeaders());
    },
    'dataType': "application/json",
    'error': function (jqXHR, status, error) {
        console.log('Error!');
        console.log(status);
        console.log(error);
    },
    'success': function (data, status, jqXHR) {
        console.log('Success!');
        console.log(status);
        console.log(data);
    },
    'type': 'GET',
    'url': url
}); 
```

其他类似的问题建议将数据类型更改为文本或完全删除它：两者都不起作用。我已经在[J​​SONLint](http://jsonlint.com/)成功验证了返回的 JSON 对象。

控制台日志是：

```
Error!
error

Complete!
error 
```

我不确定它是否已链接，但该`getAllResponseHeaders()`函数返回一个空字符串。

这是跨域错误吗？

欢迎任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:49:23.687

[在这里](https://stackoverflow.com/questions/4840825/ajax-with-jquery-200-ok-but-not-success)，他们认为这确实是一个跨域错误。

# java - 不使用库 (Java) 发送推送通知 apns

> ID：12742556
> 
> 赞同：2
> 
> 时间：2012-10-05T08:39:12.990
> 
> 标签：java, ios, apple-push-notifications, jdk1.4

有人可以在不使用任何 apns libray（japns/java apns）的情况下给我一个关于推送通知的示例代码（Java）吗？我将使用 jdk1.4（为什么我不能使用 japns/java apns）。提前致谢

# c# - 在 win 8 应用程序中未发现“搜索窗格”元素异常

> ID：12742558
> 
> 赞同：5
> 
> 时间：2012-10-05T08:39:18.080
> 
> 标签：c#

我正在尝试在 Visual Studio 2012 中开发一个实现搜索合同的 win 8 应用程序。为了启用搜索功能，我添加了“搜索窗格”元素。但是在运行应用程序时出现异常

```
"Element not found. (Exception from HRESULT: 0x80070490)" 
```

对于代码 -

```
this.searchPane = SearchPane.GetForCurrentView() 
```

谁能告诉我这是什么问题和解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:11:54.557

此类问题通常发生在 XAML 标记中。确保您的页面标记文件中的一切正常，搜索窗格元素以适当的方式描述，没有多余或缺失的属性。

# c# - c# foreach 带有 add 的语句对我来说超级慢？

> ID：12742562
> 
> 赞同：0
> 
> 时间：2012-10-05T08:39:33.577
> 
> 标签：c#, .net

想知道是否有人可以解释我们的绘图代码中这个奇怪的小优化是怎么回事。我们用第二个代码替换了第一个小代码，并获得了巨大的速度提升（4400 滴答声 -> 15 个滴答声，使用秒表类）

```
// Add all the visible sprites to the list
m_renderOrder.Clear();
foreach (CSpriteInternalData sprite in m_InternalData)
{
    if (!sprite.m_bRender) continue;
    m_renderOrder.Add(sprite);
} 
```

换成...

```
// Add all the visible sprites to the list
m_renderOrder.Clear();
renderOrderCount = 0;
for (int i = 0; i < m_numSprites; i++ )
{
    if (m_InternalData[i].m_bRender)
        m_renderOrder[renderOrderCount++] = m_InternalData[i];
} 
```

我看起来是最简单的小改动，对于速度的如此巨大的提升。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:49:00.733

如果`CSpriteInternalData`是 a `struct`，即值类型，则每次将该类型的值分配给变量时，都会完成一个副本。

```
MyStruct a = new MyStruct(50);
MyStruct b = a; //a is copied to b;
a.Value = 10;
Console.WriteLine(b.Value); //still 10, has a separate copy of value 
```

如果结构体小且可移植，这不是什么大问题，但如果结构体很大，它们可能会变慢。`Foreach`创建一个从集合中重复分配值的变量，因此如果`CSpriteInternalData`是 a `struct`，则每个变量依次复制到`sprite`变量中，这可能需要一些时间。

此外，当您`Add`将项目添加到`m_renderOrder`集合时，该行会调用结构的另一个副本，但我猜其中只有少数`m_bRender`设置了标志，因此不会花费太多时间。

如果这是减速/加速的原因，我会全心全意地建议您更改`CSpriteInternalData`为使用引用行为的类，并且只复制引用，而不是整个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:45:55.660

foreach 始终创建由 GetEnumerator 方法返回的枚举器的实例，并且该枚举器还在 foreach 循环的整个生命周期中保持状态。然后它反复调用枚举器上的 Next() 对象，并为它返回的每个对象运行您的代码。

您可以创建自己的模拟器以防万一。但是当执行时间很重要时，最好使用 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:54:35.707

foreach 循环的目的略有不同。它用于迭代一些实现 IEnumerable 的集合。它的性能要慢得多。

供您参考

[http://www.codeproject.com/Articles/6759/FOREACH-Vs-FOR-C](http://www.codeproject.com/Articles/6759/FOREACH-Vs-FOR-C)

# c# - 创建 xlsx 文件

> ID：12742569
> 
> 赞同：0
> 
> 时间：2012-10-05T08:40:05.077
> 
> 标签：c#, .net, excel, xlsx

我基本上是在创建一个 xlsx 文件，但是在使用该文件时出现错误，如下所示。

> System.IO.FileFormatException：存档文件的大小不能为 0。

我试过的方式。

```
string file = "c:\\DoneDone61.xlsx";

using(File.Create(file))
{

} 
```

我也无法手动打开excel文件，因为它说文件已损坏。

感谢您提前回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:52:33.033

您认为“空白”的 Excel 文件不仅仅是其中没有数据的文件（这是您正在创建的文件）。您可以通过在 Excel 中手动创建文档，然后在记事本中打开它来亲自查看。你会注意到它里面实际上有数据。该数据用于存储有关名为“Sheet1”、“Sheet2”和“Sheet3”的三个空白工作表的信息。此外，还有一些标题信息，因此任何查看文件的程序都知道它实际上是一个压缩文件（根据 Excel 文件格式）。因此，如您所见，即使是一个非常空的 excel 文件仍然包含一些数据。

如果你想使用 C# 创建一个空白的 Excel 文档，你有两个不错的选择：

1.  使用允许您实际创建 Excel 文档的库，该文档负责正确创建文件。查看[Microsoft OpenXML SDK](https://www.microsoft.com/en-us/download/details.aspx?id=5124)或[ExcelPackage 之类](http://excelpackage.codeplex.com/)的内容。
2.  创建一个空的 Excel 文档，将其存储在某个地方，当您想“创建”一个新的空 Excel 文档时，只需复制此文件即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:43:17.023

这个 ...

```
using(File.Create(filePath))
{
} 
```

... 创建一个空文件。阅读：*真的是空的（=> 0 字节*）而不是带有 XLSX 骨架的空 XLSX：ZIP 容器、文件头、样式定义......

你到底期待什么？

**编辑：** 如果你想创建一个空的 XLSX 文件（比如“右键单击鼠标 > 新建 > 新建 Microsoft Excel”），你必须使用这样的模板，......并将其写入磁盘。

为此，您必须将此模板文件与您的应用程序一起部署，然后执行`File.Copy(source, dest)`, 或将其集成为*资源*并将资源内容写入磁盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:51:45.637

您需要使用的是[Interop.Excel](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)命名空间。这是来自[msdn的指南](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T18:21:52.127

请使用这个...它有点 hacky 但无法使用 InterOp 获得更好的方法来做到这一点

```
 public static void CreateEmptyXLSXFile(string FilePath)
    {
        FileStream MyStream = new FileStream(FilePath, FileMode.CreateNew,     FileAccess.ReadWrite);
        MyStream.Write(ExcelDocumentsInterOps.GetEmptyXSLXFileBytes(), 0, ExcelDocumentsInterOps.GetEmptyXSLXFileBytes().Length);
        MyStream.Flush();
        MyStream.Close();
        MyStream.Dispose();
        MyStream = null;
    }

    /// <summary>
    /// Returns the bytes for an empty xslx file
    /// </summary>
    /// <returns></returns>
    public static byte[] GetEmptyXSLXFileBytes()
    {
        string TheSting = "UEsDBBQABgAIAAAAIQBYVsaPYAEAABgFAAATANoBW0NvbnRlbnRfVHlwZXNdLnhtbCCi1gEooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMyUTU7DMBCF90jcIfIWJW6LhBBK2gU/S+iiHMDYk8aqY1set7S3Z5LQSqAQqYQFm0SRNe+9+WacfLGvTbKDgNrZgk2zCUvASqe0XRfsdfWU3rIEo7BKGGehYAdAtphfXuSrgwdMqNpiwaoY/R3nKCuoBWbOg6WT0oVaRPoMa+6F3Ig18NlkcsOlsxFsTGOjweb5CwUIWkGyFCE+i5p8+N7wSGrQPacZ6bHkvitsvAsmvDdaikjJ+c6qb66pK0stQTm5rckra8WuGhX+oyHGgwEcbYU+gFBYAcTaZJ3o0fkBSrE1MXncE4EOegCD57X2CTOjyrZ9rLTHAYdhdsNM3l3YvDm3+WsqDZ2sFtoec/ctAU1vGZxHTrMeHQAa5ApU6kkSQtRwYtbnTQvY9N6OEXn7mo3O8HU1TvpDDHpyXP+THONv5S94nHZCugDngzjenaa6ZxN4+1+bfwAAAP//AwBQSwMEFAAGAAgAAAAhALVVMCP1AAAATAIAAAsAzgFfcmVscy8ucmVscyCiygEooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIySz07DMAzG70i8Q+T76m5ICKGlu0xIuyFUHsAk7h+1jaMkQPf2hAOCSmPb0fbnzz9b3u7maVQfHGIvTsO6KEGxM2J712p4rZ9WD6BiImdpFMcajhxhV93ebF94pJSbYtf7qLKLixq6lPwjYjQdTxQL8exypZEwUcphaNGTGahl3JTlPYa/HlAtPNXBaggHeweqPvo8+bK3NE1veC/mfWKXToxAnhM7y3blQ2YLqc/bqJpCy0mDFfOc0xHJ+yJjA54m2lxP9P+2OHEiS4nQSODzPN+Kc0Dr64Eun2ip+L3OPOKnhOFNZPhhwcUPVF8AAAD//wMAUEsDBBQABgAIAAAAIQC7gUTa8AAAAEcDAAAaAAgBeGwvX3JlbHMvd29ya2Jvb2sueG1sLnJlbHMgogQBKKAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8ks1qwzAQhO+FvIPYe7y205YSIudSCrmW9AGEvf4htiS02x+/fYULbgPBvYRcBKNFMx+r2e2/hl59UODOWQ1ZkoIiW7qqs42Gt+PL+gkUi7GV6Z0lDSMx7IvV3e6VeiPxEbedZxVdLGtoRfwWkcuWBsOJ82TjpHZhMBJlaNCb8mQawjxNHzH89YDizFMdKg3hUG1AHUcfk//3dnXdlfTsyveBrFyIwE8XTtwSSTQ1oSHRMF8xTpNNEokBL8PkN4bJl2CyG8NkSzAP14RhGfvYs/mPfvRS/P014yW2l37TJ4nTOa8Az+pffAMAAP//AwBQSwMEFAAGAAgAAAAhAC/wCOVdAQAAcAIAAA8AAAB4bC93b3JrYm9vay54bWyMUstOwzAQvCPxD5bvNO+IVk0qIUD0gpCA9mziTWPVsSPbIe3fs07UUgQHTrvjnYxnx1muDq0kn2Cs0Kqg0SykBFSluVC7gr6/Pd7cUmIdU5xJraCgR7B0VV5fLQdt9h9a7wkKKFvQxrluEQS2aqBldqY7UDiptWmZQ2h2ge0MMG4bANfKIA7DPGiZUHRSWJj/aOi6FhXc66pvQblJxIBkDu3bRnSWlstaSNhMGxHWdc+sRd8HSYlk1j1w4YAXNEWoB/hxYPrurhfST7Mwo0F5XvLFEA4166V7w/VO6phXnMZx7pk+io2AwX5/5CE5bIXieihokmO0xxOaIxjGyVZw16BSkiTZ6ewJxK5xBc3TyUZwoT7mh7eMlahxuVefaYQP5esa/WNvFgIbs+aRt/eLHV+wsT+z4z/ZyQUb+zM78exgFEdLFZMVJuXLaCJOs2g+Mk4/S/kFAAD//wMAUEsDBBQABgAIAAAAIQDppiW4ggYAAFMbAAATAAAAeGwvdGhlbWUvdGhlbWUxLnhtbOxZT2/bNhS/D9h3IHRvbSe2Gwd1itixm61NG8Ruhx5pmZZYU6JA0kl9G9rjgAHDumGXAbvtMGwr0AK7dJ8mW4etA/oV9khKshjLS9IGG9bVh0Qif3z/3+MjdfXag4ihQyIk5XHbq12ueojEPh/TOGh7d4b9SxsekgrHY8x4TNrenEjv2tb7713FmyokEUGwPpabuO2FSiWblYr0YRjLyzwhMcxNuIiwglcRVMYCHwHdiFXWqtVmJcI09lCMIyB7ezKhPkFDTdLbyoj3GLzGSuoBn4mBJk2cFQY7ntY0Qs5llwl0iFnbAz5jfjQkD5SHGJYKJtpe1fy8ytbVCt5MFzG1Ym1hXd/80nXpgvF0zfAUwShnWuvXW1d2cvoGwNQyrtfrdXu1nJ4BYN8HTa0sRZr1/katk9EsgOzjMu1utVGtu/gC/fUlmVudTqfRSmWxRA3IPtaX8BvVZn17zcEbkMU3lvD1zna323TwBmTxzSV8/0qrWXfxBhQyGk+X0Nqh/X5KPYdMONsthW8AfKOawhcoiIY8ujSLCY/VqliL8H0u+gDQQIYVjZGaJ2SCfYjiLo5GgmLNAG8SXJixQ75cGtK8kPQFTVTb+zDBkBELeq+ef//q+VP06vmT44fPjh/+dPzo0fHDHy0tZ+EujoPiwpfffvbn1x+jP55+8/LxF+V4WcT/+sMnv/z8eTkQMmgh0Ysvn/z27MmLrz79/bvHJfBtgUdF+JBGRKJb5Agd8Ah0M4ZxJScjcb4VwxBTZwUOgXYJ6Z4KHeCtOWZluA5xjXdXQPEoA16f3XdkHYRipmgJ5xth5AD3OGcdLkoNcEPzKlh4OIuDcuZiVsQdYHxYxruLY8e1vVkCVTMLSsf23ZA4Yu4zHCsckJgopOf4lJAS7e5R6th1j/qCSz5R6B5FHUxLTTKkIyeQFot2aQR+mZfpDK52bLN3F3U4K9N6hxy6SEgIzEqEHxLmmPE6nikclZEc4ogVDX4Tq7BMyMFc+EVcTyrwdEAYR70xkbJszW0B+hacfgNDvSp1+x6bRy5SKDoto3kTc15E7vBpN8RRUoYd0DgsYj+QUwhRjPa5KoPvcTdD9Dv4Accr3X2XEsfdpxeCOzRwRFoEiJ6ZCe1LKNRO/Y1o/HfFmFGoxjYG3hXjtrcNW1NZSuyeKMGrcP/BwruDZ/E+gVhf3nje1d13ddd76+vuqlw+a7VdFFiovbp5sH2x6ZKjlU3yhDI2UHNGbkrTJ0vYLMZ9GNTrzAGR5IemJITHtLg7uEBgswYJrj6iKhyEOIEeu+ZpIoFMSQcSJVzC2c4Ml9LWeOjTlT0ZNvSZwdYDidUeH9vhdT2cHQ1yMmbLCcz5M2O0rgmcldn6lZQoqP06zGpaqDNzqxnRTKlzuOUqgw+XVYPB3JrQhSDoXcDKTTiia9ZwNsGMjLXd7QacucV44SJdJEM8JqmPtN7LPqoZJ2WxYi4DIHZKfKTPeadYrcCtpcm+AbezOKnIrr6CXea9N/FSFsELL+m8PZGOLC4mJ4vRUdtrNdYaHvJx0vYmcKyFxygBr0vd+GEWwN2Qr4QN+1OT2WT5wputTDE3CWpwU2HtvqSwUwcSIdUOlqENDTOVhgCLNScr/1oDzHpRCthIfw0p1jcgGP41KcCOrmvJZEJ8VXR2YUTbzr6mpZTPFBGDcHyERmwmDjC4X4cq6DOmEm4nTEXQL3CVpq1tptzinCZd8QLL4Ow4ZkmI03KrUzTLZAs3eZzLYN4K4oFupbIb5c6vikn5C1KlGMb/M1X0fgLXBetj7QEfbnIFRjpf2x4XKuRQhZKQ+n0BjYOpHRAtcB0L0xBUcJ9s/gtyqP/bnLM0TFrDqU8d0AAJCvuRCgUh+1CWTPSdQqyW7l2WJEsJmYgqiCsTK/aIHBI21DWwqfd2D4UQ6qaapGXA4E7Gn/ueZtAo0E1OMd+cGpLvvTYH/unOxyYzKOXWYdPQZPbPRSzZVe16szzbe4uK6IlFm1XPsgKYFbaCVpr2rynCObdaW7GWNF5rZMKBF5c1hsG8IUrg0gfpP7D/UeEz+3FCb6hDfgC1FcG3Bk0Mwgai+pJtPJAukHZwBI2THbTBpElZ06atk7ZatllfcKeb8z1hbC3ZWfx9TmPnzZnLzsnFizR2amHH1nZspanBsydTFIYm2UHGOMZ81Sp+eOKj++DoHbjinzElTTDBZyWBofUcmDyA5LcczdKtvwAAAP//AwBQSwMEFAAGAAgAAAAhAKCDxK6jAQAAZAMAAA0AAAB4bC9zdHlsZXMueG1spFPBatwwEL0X8g9C90a7Cw1tsZ1DYSGQlEC20KtsyV7BaGSk8bLu12dkO97dUw69WE9PM2+eZuTi8exBnGxMLmApt/cbKSw2wTjsSvnnsP/6XYpEGo2GgLaUo03ysbr7UiQawb4drSXBEphKeSTqfyqVmqP1Ot2H3iKftCF6TbyNnUp9tNqknORB7TabB+W1Q1kVbUBKogkDErtYiKpI/8RJAzNbqaqiCRCiIJZnIxOD2ts54pcGV0eXw1rtHYwzvcvE5GiJ8w5DzKTKJZclcZIDWA3ssgEmqqLXRDbinjdiwYex5/LI3ZhlprhPoruox+3u21WCmgpWRR2i4e5fX32mqgJsS2w0uu6YVwo9f+tAFDwD43QXUAND9ZGxAL5OYwHe8oT+tjfa51bg4Peenkwpeda5CR+QL7LAWW/eZP1rtVn7v2XFub3VZ8Ur2zem1/Iiz7uUv/OTArlKiHpwQA5vBafrs6Y5X1qwyRMgXfPLzc1Zq3AnjG31AHRYD0t5wS/WuMH/WKNe3SnQJFHKC37Ok9o+TFNO6+9RvQMAAP//AwBQSwMEFAAGAAgAAAAhALhKSy0TAQAAtwEAABgAAAB4bC93b3Jrc2hlZXRzL3NoZWV0My54bWyMUMFKxDAQvQv+Q5i7TVdZlaXtIiyLHgQR9Z5tJ23YJBOSWVf/3rRlF8GLt3l5b17mvWr95az4xJgM+RoWRQkCfUud8X0N72/bq3sQiZXvlCWPNXxjgnVzeVEdKe7TgMgiO/hUw8AcVlKmdkCnUkEBfWY0Rac4w9jLFCKqblpyVl6X5a10yniYHVbxPx6ktWlxQ+3BoefZJKJVnO9PgwkJmqozmRsDiYi6hocFyKaavv0weEy/ZjGm2BHtR+Kpq6EcpfKPdjuleImiQ60Oll/p+IimHzhXtjy7bxSrvB5Uj88q9sYnYVFnTVncgYizfpqZwvS6BLEjZnInNOSCMBdRFjcgNBGfwHjWufLmBwAA//8DAFBLAwQUAAYACAAAACEAuEpLLRMBAAC3AQAAGAAAAHhsL3dvcmtzaGVldHMvc2hlZXQyLnhtbIxQwUrEMBC9C/5DmLtNV1mVpe0iLIseBBH1nm0nbdgkE5JZV//etGUXwYu3eXlvXua9av3lrPjEmAz5GhZFCQJ9S53xfQ3vb9urexCJle+UJY81fGOCdXN5UR0p7tOAyCI7+FTDwBxWUqZ2QKdSQQF9ZjRFpzjD2MsUIqpuWnJWXpflrXTKeJgdVvE/HqS1aXFD7cGh59kkolWc70+DCQmaqjOZGwOJiLqGhwXIppq+/TB4TL9mMabYEe1H4qmroRyl8o92O6V4iaJDrQ6WX+n4iKYfOFe2PLtvFKu8HlSPzyr2xidhUWdNWdyBiLN+mpnC9LoEsSNmcic05IIwF1EWNyA0EZ/AeNa58uYHAAD//wMAUEsDBBQABgAIAAAAIQAHXzjTHgEAAMcBAAAYAAAAeGwvd29ya3NoZWV0cy9zaGVldDEueG1sjFFNa8MwDL0P9h+M7ovTjW6jJCmDUrbDYOzr7iRyYmpbwVbX7d/PSWgZ9LKbPt570pOK9bez4gtDNORLWGQ5CPQNtcZ3JXy8b6/uQURWvlWWPJbwgxHW1eVFcaCwiz0ii6TgYwk987CSMjY9OhUzGtCnjqbgFKc0dDIOAVU7kZyV13l+K50yHmaFVfiPBmltGtxQs3foeRYJaBWn/WNvhghV0ZrUGw2JgLqEhwXIqpjGfho8xD+xYFW/ocWGsU3uQYyuaqLdCHxKpXykyjPudnL1EkSLWu0tv9LhEU3XcxJZnqZtFKtEH1SHzyp0xkdhUSdMnt2BCDN+ipmGqboEURMzuWPWp4NhOkye3YDQRHxMxrVOL6h+AQAA//8DAFBLAwQUAAYACAAAACEAEBUPF0EBAABfAgAAEQAIAWRvY1Byb3BzL2NvcmUueG1sIKIEASigAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlJLLTsMwEEX3SPxD5H3iuBFQWUkqHqqEShESRTx2lj1tI2LHsg1p/x7n0TSobFh67p0zd0ZOZztZBt9gbFGpDJEoRgEoXolCbTL0spqHUxRYx5RgZaUgQ3uwaJafn6VcU14ZeDKVBuMKsIEnKUu5ztDWOU0xtnwLktnIO5QX15WRzPmn2WDN+CfbAJ7E8SWW4JhgjuEGGOqBiHqk4ANSf5myBQiOoQQJyllMIoKPXgdG2j8bWmXklIXba79TH3fMFrwTB/fOFoOxruuoTtoYPj/Bb8uH53bVsFDNrTigPBWccgPMVSZfPr7fLxbXKR7VmvuVzLqlP/W6AHGzP9pOJU9rw3dIEIGPQ7vwB+U1ub1bzVE+iUkSEhKS6YpcUUJoQj6ayb/6m3hdQfbz/0O8mI6IB0Ce4pMvkf8AAAD//wMAUEsDBBQABgAIAAAAIQCcPLtYiwEAADQDAAAQAAgBZG9jUHJvcHMvYXBwLnhtbCCiBAEooAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJyTQU/jMBCF70j7HyLfqdOCEKocIwSLOCyiUlv2bJxJY+HakWeIWn49k0Sl6bJ72ZzG856ePo8n6ma39VkLCV0MhZhOcpFBsLF0YVOI9erh/FpkSCaUxscAhdgDihv940wtUmwgkQPMOCJgIWqiZi4l2hq2BicsB1aqmLaG+Jg2MlaVs3Af7fsWAslZnl9J2BGEEsrz5itQDInzlv43tIy248OX1b5hYK1um8Y7a4hvqZ+cTRFjRdnPnQWv5FhUTLcE+54c7XWu5PioltZ4uONgXRmPoOSxoR7BdENbGJdQq5bmLViKKUP3wWObiezVIHQ4hWhNciYQY3W24dDXvkFK+ndMb1gDECrJhqHZl2PvuHaX+qI3cHFq7AIGEBZOEVeOPOBztTCJ/kJ8MSbuGQbeAWfZ8U3HfF+kvTT7tzSQjm/VD4r5/iD65cIbrptVvDcEh4mfNtWyNglKfqSDfmyoRx528l3IXW3CBsqD57vQ7cfL8BPo6WyS89evxaGn5HHd9ScAAAD//wMAUEsBAi0AFAAGAAgAAAAhAFhWxo9gAQAAGAUAABMAAAAAAAAAAAAAAAAAAAAAAFtDb250ZW50X1R5cGVzXS54bWxQSwECLQAUAAYACAAAACEAtVUwI/UAAABMAgAACwAAAAAAAAAAAAAAAABrAwAAX3JlbHMvLnJlbHNQSwECLQAUAAYACAAAACEAu4FE2vAAAABHAwAAGgAAAAAAAAAAAAAAAABXBgAAeGwvX3JlbHMvd29ya2Jvb2sueG1sLnJlbHNQSwECLQAUAAYACAAAACEAL/AI5V0BAABwAgAADwAAAAAAAAAAAAAAAACHCAAAeGwvd29ya2Jvb2sueG1sUEsBAi0AFAAGAAgAAAAhAOmmJbiCBgAAUxsAABMAAAAAAAAAAAAAAAAAEQoAAHhsL3RoZW1lL3RoZW1lMS54bWxQSwECLQAUAAYACAAAACEAoIPErqMBAABkAwAADQAAAAAAAAAAAAAAAADEEAAAeGwvc3R5bGVzLnhtbFBLAQItABQABgAIAAAAIQC4SkstEwEAALcBAAAYAAAAAAAAAAAAAAAAAJISAAB4bC93b3Jrc2hlZXRzL3NoZWV0My54bWxQSwECLQAUAAYACAAAACEAuEpLLRMBAAC3AQAAGAAAAAAAAAAAAAAAAADbEwAAeGwvd29ya3NoZWV0cy9zaGVldDIueG1sUEsBAi0AFAAGAAgAAAAhAAdfONMeAQAAxwEAABgAAAAAAAAAAAAAAAAAJBUAAHhsL3dvcmtzaGVldHMvc2hlZXQxLnhtbFBLAQItABQABgAIAAAAIQAQFQ8XQQEAAF8CAAARAAAAAAAAAAAAAAAAAHgWAABkb2NQcm9wcy9jb3JlLnhtbFBLAQItABQABgAIAAAAIQCcPLtYiwEAADQDAAAQAAAAAAAAAAAAAAAAAPAYAABkb2NQcm9wcy9hcHAueG1sUEsFBgAAAAALAAsAygIAALEbAAAAAA==";
        return Convert.FromBase64String(TheSting);

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T07:59:50.113

在 .NET 中处理与电子表格相关的任务时，您可以使用这个名为[SpreadsheetLight的](http://www.nuget.org/packages/SpreadsheetLight/)*开源库*来编写一个 excel 文件（特别是，如果您想在某些时候编写内容）。

[如果您更喜欢通过 Nuget](http://www.nuget.org/packages/SpreadsheetLight/)将其添加为包，您可以说：

> 安装包电子表格Light

之后，通过[GenerateReport() 示例](http://spreadsheetlight.com/sample-code/)：

```
// this one creates an empty workbook
using (SLDocument sl = new SLDocument())
{
    // sl.SetCellValue("B3", "I love ASP.NET MVC");
    sl.SaveAs("c:\\DoneDone61.xlsx");
} 
```

另请参阅他们的[教程](http://spreadsheetlight.com/tutorial/)以获取更多有趣的东西。

# php - 将 IF 语句嵌套在数组中？

> ID：12742570
> 
> 赞同：0
> 
> 时间：2012-10-05T08:40:06.667
> 
> 标签：php, arrays, wordpress

我有一个数组如下

```
<?php
$args = array(
"post_author_url" => "no",
"thumbnail_custom_field" => "image",
"post_include" => get_user_meta($userID, 'member_owner', true),
"layout_mode" => "multi_column","layout_num_cols" => "3");
special_recent_posts($args);
?> 
```

这很好用，但我想对其中一个项目设置条件

`"thumbnail_custom_field" => "image",`

`"image"`可能不存在，所以我需要一个后备，所以它显示正常。

例如：

```
<?php if ( get_post_meta($post->ID, 'image', true)) {
echo 'image'
} else { 
echo 'image-fallback'
?> 
```

`image`作为这个 IF 语句的结果，我怎样才能在数组中设置标签？我是否在数组之前将其设为字符串？还是我将 IF 语句直接放入数组中？寻找一些专家指导..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:40:50.933

尝试以下操作：

```
<?php
$args = array(
"post_author_url" => "no",
"thumbnail_custom_field" => ((get_post_meta($post->ID, 'image', true))?'image':'image-fallback'),
"post_include" => get_user_meta($userID, 'member_owner', true),
"layout_mode" => "multi_column","layout_num_cols" => "3");
special_recent_posts($args);
?> 
```

表达式 (expr1) ? (expr2) : (expr3) 如果 expr1 的计算结果为 TRUE，则计算为 expr2，如果 expr1 的计算结果为 FALSE，则计算 expr3。查找“三元运算符”。

# validation - Asp.Net Mvc 4 验证机制

> ID：12742574
> 
> 赞同：1
> 
> 时间：2012-10-05T08:40:19.333
> 
> 标签：validation, asp.net-mvc-4, modelbinders, business-rules

Asp.Net Mvc 4 中验证的最佳机制是什么，

我的意思是在属性级别（必需、长度等）和业务级别（根据业务规则进行验证）进行验证，

选择 ModelBinder（为某些自定义类型实现一些自定义 ModelBinder）在业务级别验证模型是不是一个坏主意？

# less - Simpless 不会自动编译

> ID：12742575
> 
> 赞同：0
> 
> 时间：2012-10-05T08:40:26.300
> 
> 标签：less

我的 simpleLESS 样式表已停止自动编译。如果我打开实际的简单程序并单击刷新图标，它会毫无问题地构建它们。

但是当我保存它们时，它就停止了收听。有人知道如何让simpleLESS再听一遍吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T00:19:02.643

好吧，我在wearekiss.com 与 SimpLESS 技术支持人员取得了联系，他们说“我有时也注意到这一点。当我从 SimpLESS 中删除索引 LESS 文件并重新启动应用程序时，它似乎又可以工作了。 "

我试过了，它失败了，所以我卸载并重新安装了 SimpLESS，然后重新索引文件，现在它又可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T16:05:14.667

如果您缺少变量声明，Simpless 不会警告您......它只是不会编译，这真的很令人困惑，因为 in 会警告您其他错误。似乎 Simpless 刚刚停止工作。

你应该做的是在这里粘贴你的代码：[http](http://winless.org/online-less-compiler) : //winless.org/online-less-compiler 找到你没有声明的变量，然后在原始 LESS 文件中修复它，然后 SimpLESS 将继续正常工作。

# javascript - Javascript 函数在 firefox 和 chrome 中有效，但在 IE9 中无效

> ID：12742580
> 
> 赞同：0
> 
> 时间：2012-10-05T08:40:50.080
> 
> 标签：javascript, html, firefox, google-chrome, internet-explorer-9

我在 javascript 中有一些简单的函数，它们在除 IE9 之外的大多数浏览器中都能正常工作。我听说 Ie9 对逗号等很挑剔。但我找不到任何明显的问题。你们中的任何人都可以解释一下吗？完整代码如下

```
 <script type="text/javascript">

      document.addEventListener("DOMContentLoaded", load, false);

      function load() {
        //dom loaded

        var elUserId = document.getElementById("user_id"); 
        var elPasswordId = document.getElementById("password");
        var elLoginMsg = document.getElementById("usernameMsg");
        var elPasswordMsg = document.getElementById("passwordMsg");
        var elIncreaseFontSize = document.getElementById("increaseFont");
        var elResetFontSize = document.getElementById("resetFont");
        var elChangeContrast = document.getElementById("changeContrast");
        var elResetContrast = document.getElementById("resetContrast");
        var logInbox = document.getElementById("loginBox");
        var helpWithBB = document.getElementById("helpWithBB");
        var fontUp = '135%';
        var fontReset = '100%';
        var black = '#000000';
        var white = '#ffffff';
        var divReset ='415px';
        var divChange ='525px';
        var txtSizeChange ='40.5em';
        var txtReset ='42em';

        elLoginMsg.style.display ='none';
        elPasswordMsg.style.display = 'none';

        elPasswordId.addEventListener("focus", function(){
            showText(elPasswordMsg);
        }, false);

        elUserId.addEventListener("click", function(){
            showText(elLoginMsg);
        }, false);

        elResetFontSize.addEventListener("click", function(){
        //pass size change and element affected to be manipulated
        //resetTextSize(fontReset,logInbox,elPasswordMsg);
        changeTextSize(fontReset,logInbox,elPasswordMsg,divReset,txtReset);
        });

        elChangeContrast.addEventListener("click", function(){
        //pass size change and element affected to be manipulated
        changeContrast(logInbox, helpWithBB, black, white);
        });

        elResetContrast.addEventListener("click", function(){
        document.location.reload(true);
        });

        elIncreaseFontSize.addEventListener("click", function(){
        //pass size change and element affected to be manipulated
        changeTextSize(fontUp,logInbox,elPasswordMsg,divChange,txtSizeChange);
        });

        function changeContrast(mainDiv, secDiv, txtColor, bkColor){

        secDiv.style.background = bkColor;
        mainDiv.style.background = bkColor;

        showText(elPasswordMsg);
        showText(elLoginMsg);

        elLoginMsg.style.color = txtColor;
        elPasswordMsg.style.color = txtColor;

            var anchors = document.getElementsByTagName('a');
            for(var i = 0; i < anchors.length; i++) {
            anchors[i].style.color = txtColor;
            }

            var para = document.getElementsByTagName('p');
            for(var i = 0; i < anchors.length; i++) {
            para[i].style.color = txtColor;
            }
        }

        function changeTextSize(fontUp, elDiv, msg, divH, msgT){
        document.body.style.fontSize=fontUp;
        elDiv.style.height = divH;
        msg.style.top = msgT;
        }

        function showText(id){
            id.style.display ='block';
        }

      }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:52:37.007

您`useCapture`在某些调用中缺少第三个参数 ( )，`addEventListener()`但除此之外没有任何明显错误。我知道 Firefox`addEventListener()`在去年才开始支持没有第三个参数，所以 IE 9 可能不支持它。

**更新**

这个理论就这么多。IE 9 中的两个参数似乎很好：http: [//jsfiddle.net/xZRy7/](http://jsfiddle.net/xZRy7/)

# r - 是否有任何云服务提供 RHadoop 框架而不仅仅是 Hadoop？

> ID：12742584
> 
> 赞同：2
> 
> 时间：2012-10-05T08:41:02.793
> 
> 标签：r, hadoop, cloud

因为，我现在正在开发一个 POC 应用程序，所以我更喜欢免费服务，因为如果概念最终没有成功，花钱在一个想法上是没有意义的。

PS：我做了一个谷歌检查，但大多数服务目前只提供 Hadoop 而不是 RHadoop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:52:56.270

本文提供了有关在 Amazon EC2 上设置 RHadoop 的幻灯片的链接：

[http://blog.revolutionanalytics.com/2012/03/r-and-hadoop-step-by-step-tutorials.html](http://blog.revolutionanalytics.com/2012/03/r-and-hadoop-step-by-step-tutorials.html)

# knockout.js - 使用敲除绑定

> ID：12742585
> 
> 赞同：0
> 
> 时间：2012-10-05T08:41:05.557
> 
> 标签：knockout.js, knockout-mvc

我有数据库值“活动”从 sql 查询返回 true 和 false 值。我希望复选框应该在什么时候打勾，什么时候`active =true`不打勾`active=false`。我在 php 中使用了 mvc 模型

我该怎么办？它是一个 php 页面。

```
 <div class="datagrid">
    <table class="table table-hover table-bordered" id="additionaltable">
        <thead>
            <tr>
                <th class="span1">
                    Questions
                </th>
                <th class="span1">
                    Active
                </th>
            </tr>
        </thead>
        <tbody data-bind="foreach: items">
            <tr data-id="value:id">
                <td data-bind="text:question">
                </td>
                <td>
                    <input type="checkbox" data-bind="checked: active" />
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

我还有 1 个查询……表格加载了数据……点击表格中的数据，值应该显示在文本框中……该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:30:15.653

你排队——

```
<td data-bind="text:question">
</td> 
```

不会工作。您必须将文本绑定到跨度才能获得所需的行为。

```
<td> 
   <span data-bind="text:question"></span>
</td> 
```

[我在http://jsfiddle.net/photo_tom/kBKzv/4/](http://jsfiddle.net/photo_tom/kBKzv/4/)上整理了一个工作示例

# cakephp - PHPWord 创建一个多表

> ID：12742590
> 
> 赞同：2
> 
> 时间：2012-10-05T08:41:25.943
> 
> 标签：cakephp, phpword

我正在使用 PHPWord... 我在文档的上部创建一个表格，然后在文档的中间部分创建我的第二个表格。现在发生的事情是两个表合并......是否有一个结束标记，如 html 中的结束标记表？或者使用 PHPWord 创建新表的最佳方法是什么？蒂亚：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T08:49:08.063

只需在两个表格之间添加一个空段落

$section->addText("");

```
include('includes/PHPWord.php');
include('includes/PHPWord/Writer/Word2007.php');

$word = new PHPWord();

$styleTable = array('borderColor'=>'006699',
              'borderSize'=>6,
              'cellMargin'=>50);
$styleFirstRow = array('bgColor'=>'66BBFF');
$word->addTableStyle('myTable', $styleTable, $styleFirstRow);

$word->setDefaultFontName('Tahoma');
$word->setDefaultFontSize(10);

$section = $word->createSection();

$table = $section->addTable();

$table->addRow(200);
$table->addCell(1200)->addText("Col 1");
$table->addCell(1200)->addText("Col 2");
$table->addCell(1200)->addText("Col 3");
$table->addCell(1200)->addText("Col 4");
$table->addCell(1200)->addText("Col 5");

$table->addRow(200);
$table->addCell(1200)->addText("Col 1");
$table->addCell(1200)->addText("Col 2");
$table->addCell(1200)->addText("Col 3");
$table->addCell(1200)->addText("Col 4");
$table->addCell(1200)->addText("Col 5");

$section->addText("");

$table = $section->addTable();

$table->addRow(200);
$table->addCell(1200)->addText("Col 1");
$table->addCell(1200)->addText("Col 2");
$table->addCell(1200)->addText("Col 3");
$table->addCell(1200)->addText("Col 4");
$table->addCell(1200)->addText("Col 5");

$table->addRow(200);
$table->addCell(1200)->addText("Col 1");
$table->addCell(1200)->addText("Col 2");
$table->addCell(1200)->addText("Col 3");
$table->addCell(1200)->addText("Col 4");
$table->addCell(1200)->addText("Col 5");

$objWriter = PHPWord_IOFactory::createWriter($word,'Word2007');
$objWriter->save("test.docx"); 
```

# cocos2d-iphone - 将精灵旋转到原始精灵位置

> ID：12742593
> 
> 赞同：0
> 
> 时间：2012-10-05T08:41:29.863
> 
> 标签：cocos2d-iphone, rotation, sprite

好的，让我试着解释一下……
所以我有一个玩家，可以将不同的物体举过头顶。
现在他抬起物体，因为它们在他面前，倾斜 - 倒置 - 等等我需要物体在抬起时返回到它们的原始位置。
有没有办法通过锚点做到这一点？我知道默认锚点是`ccp(0.5f, 0.5f)`中心，如果我将锚点设置为左下角，我将如何将旋转返回到该点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:46:38.570

所有旋转都是相对于节点的锚点（在您的情况下为精灵）完成的。旋转的默认值为0。无论锚点节点使用什么值，旋转属性的零值都会将其返回到初始状态（我是指开始任何旋转之前的状态）。

# java - 从没有解析器的简单 html 字符串中提取 src 图像字段

> ID：12742594
> 
> 赞同：1
> 
> 时间：2012-10-05T08:41:33.377
> 
> 标签：java, android, regex

我有这样的html字符串：

```
<img src="mysrc" width="128" height="92" border="0" alt="alt" /><p><strong>... 
```

我想提取 mysrc。我不想使用 html 解析器，因为我只需要处理简单的 html 字符串...有没有一种有效的方法来仅使用字符串/正则表达式来提取源字段？或者也许使用android默认的xml解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:54:11.490

正则表达式，您可以尝试：`"(?<=<img src=\")[^\"]*"`

例子：

```
@Test
    public void testX() {
        final String s = "<img src=\"mysrc\" width=\"128\" height=\"92\"...";
        final String regex = "(?<=<img src=\")[^\"]*";
        final Pattern p = Pattern.compile(regex);
        final Matcher m = p.matcher(s);
        while (m.find()) {
            System.out.println(m.group());
        }

    } 
```

会给你

```
mysrc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:50:44.407

你可以做一些事情，比如

```
String text = "<img src=\"mysrc\" width=\"128\" height=\"92\" border=\"0\" alt=\"alt\" /><p><strong>";

text = text.substring(text.indexOf("src=\""));
text = text.substring("src=\"".length());
text = text.substring(0, text.indexOf("\""));
System.out.println(text); 
```

有效，可能，有效，可能没有那么多

# javascript - 使用 JavaScript 显示 HTML 文本框中剩余的字符数

> ID：12742595
> 
> 赞同：41
> 
> 时间：2012-10-05T08:41:37.743
> 
> 标签：javascript, textarea

这是我的代码：

```
function textCounter(field, countfield, maxlimit) {
    if (field.value.length > maxlimit) {
        field.value = field.value.substring(0, 160);
        field.blur();
        field.focus();
        return false;
    } else {
        countfield.value = maxlimit - field.value.length;
    }
} 
```

如何显示某个文本框中剩余的字符数，限制为 160？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-05T11:31:52.707

[动态 HTML 元素函数](https://jsfiddle.net/dilipsassy/udv521cL/22/)[这里](http://www.java-samples.com/showtutorial.php?tutorialid=733)的代码稍作修改和简化：

```
<input disabled  maxlength="3" size="3" value="10" id="counter">
<textarea onkeyup="textCounter(this,'counter',10);" id="message">
</textarea>
<script>
function textCounter(field,field2,maxlimit)
{
 var countfield = document.getElementById(field2);
 if ( field.value.length > maxlimit ) {
  field.value = field.value.substring( 0, maxlimit );
  return false;
 } else {
  countfield.value = maxlimit - field.value.length;
 }
}
</script> 
```

希望这可以帮助！

小费：

将代码与您的页面合并时，请确保在脚本（Javascript 函数）之前首先加载 HTML 元素（`textarea`、`input`）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-05T08:49:51.937

您可以将按键事件与输入框绑定，`false`如果字符超过 160 个则返回将解决问题[jsfiddle](http://jsfiddle.net/r34gM/1/)。

JavaScript：

```
$('textarea').keypress(function(){

    if(this.value.length > 160){
        return false;
    }

    $("#remainingC").html("Remaining characters : " + (160 - this.value.length));
});​ 
```

HTML

```
<textarea></textarea>​
<span id='remainingC'></span> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-09T00:42:56.587

下面包括一个简单的工作 JS/HTML 实现，当输入被删除时，它会正确更新剩余的字符。

布局和功能需要 Bootstrap 和 JQuery 才能匹配。（*根据包含的代码片段在 JQuery 2.1.1 上测试*）。

确保包含 JS 代码，以便在 HTML 之后加载它。如果您有任何问题，请给我留言。

### 乐代码：

```
$(document).ready(function() {
  var len = 0;
  var maxchar = 200;

  $( '#my-input' ).keyup(function(){
    len = this.value.length
    if(len > maxchar){
        return false;
    }
    else if (len > 0) {
        $( "#remainingC" ).html( "Remaining characters: " +( maxchar - len ) );
    }
    else {
        $( "#remainingC" ).html( "Remaining characters: " +( maxchar ) );
    }
  })
});
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<div class="row">
  <div class="col-sm-6 form-group">
    <label>Textarea</label>
    <textarea placeholder="Enter the textarea input here.. (limited to 200 characters)" rows="3" class="form-control" name="my-name" id="my-input" maxlength="200"></textarea><span id='remainingC'></span>
  </div>
</div> <!--row-->
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-05T08:58:39.307

只需在事件上注册一个 Eventhandler`keydown`并检查该函数上输入字段的长度并将其写入单独的元素。

请参阅**[演示](http://jsfiddle.net/poikl/AvH3Q/)**。

```
var maxchar = 160;
var i = document.getElementById("textinput");
var c = document.getElementById("count");
c.innerHTML = maxchar;

i.addEventListener("keydown",count);

function count(e){
    var len =  i.value.length;
    if (len >= maxchar){
       e.preventDefault();
    } else{
       c.innerHTML = maxchar - len-1;   
    }
}
​ 
```

您也应该检查服务器上的长度，因为 Javascript 可能被禁用或者用户想要故意做一些讨厌的事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-20T13:27:46.303

尝试这个

**HTML**

```
<textarea id="textarea" rows="8" cols="50" maxlength="100" ></textarea>
<div id="feedback"></div> 
```

**JS**

```
$(document).ready(function() {
        var max = 1000;
        $('#feedback').html(max + 'characters remaining');

        $('#textarea').keyup(function() {
            var text_length = $('#textarea').val().length;
            var text_remaining = max - text_length;

            $('#feedback').html(text_remaining + ' characters remaining');
        });
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T08:44:05.690

这种方法怎么样，它将问题分为两部分：

*   使用 jQuery，它在 下方显示一个递减计数器`textarea`，当它达到零时变为红色，但仍允许用户键入。
*   `textarea`如果聊天者的数量大于 160 ，我使用单独的字符串长度验证器（服务器和客户端）来实际阻止提交表单。

我`textarea`的 id 为`Message`，`span`我在其中显示剩余字符数的 id 为`counter`。`error`当剩余字符数达到零时，将应用css 类。

```
var charactersAllowed = 160;

$(document).ready(function () {
    $('#Message').keyup(function () {
        var left = charactersAllowed - $(this).val().length;
        if (left < 0) {
            $('#counter').addClass('error');
            left = 0;
        }
        else {
            $('#counter').removeClass('error');
        }
        $('#counter').text('Characters left: ' + left);
    });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T08:59:43.863

例如尝试以下代码：

**[jsfiddle.net](http://jsfiddle.net/7ktFX/)**中的工作代码

对于 textArea，使用这个：

```
<textarea id="txtBox"></textarea>
...
... 
```

对于文本框，使用这个：

```
<input type="text" id="txtBox"/>
<br>
<input type="text" id="counterBox"/>
<script>
 var txtBoxRef = document.querySelector("#txtBox");
 var counterRef = document.querySelector("#counterBox");
 txtBoxRef.addEventListener("keydown",function(){
  var remLength = 0;
  remLength = 160 - parseInt(txtBoxRef.value.length);
  if(remLength < 0)
   {
    txtBoxRef.value = txtBoxRef.value.substring(0, 160);
    return false;
   }
  counterRef.value = remLength + " characters remaining...";
 },true);
</script> 
```

希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-26T09:21:34.040

在此处尝试此代码...这是使用 javascript onKeyUp() 函数完成的...

```
<script>
function toCount(entrance,exit,text,characters) {  
var entranceObj=document.getElementById(entrance);  
var exitObj=document.getElementById(exit);  
var length=characters - entranceObj.value.length;  
if(length <= 0) {  
length=0;  
text='<span class="disable"> '+text+' <\/span>';  
entranceObj.value=entranceObj.value.substr(0,characters);  
}  
exitObj.innerHTML = text.replace("{CHAR}",length);  
}
</script> 
```

[textarea 计数器演示](http://jsfiddle.net/4epdC/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-13T05:25:35.677

HTML：

```
 <form>
  <textarea id='text' maxlength='10'></textarea>
  <div id='msg'>10 characters left</div>
  <div id='lastChar'></div>
</form> 
```

JS：

```
function charCount() {
  var textEntered = document.getElementById('text').value;
  var msg = document.getElementById('msg');
  var counter = (10-(textEntered.length));
  msg.textContent = counter+' characters left';
}

var el = document.getElementById('text');
el.addEventListener('keyup',charCount,false); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-01T09:06:51.073

我需要类似的东西，我在 jquery 的帮助下给出的解决方案是：

```
<textarea class="textlimited" data-textcounterid="counter1" maxlength="30">text</textarea>
<span class='textcounter' id="counter1"></span> 
```

使用此脚本：

```
// the selector below will catch the keyup events of elements decorated with class textlimited and have a maxlength
$('.textlimited[maxlength]').keyup(function(){
     //get the fields limit
    var maxLength = $(this).attr("maxlength");

    // check if the limit is passed
    if(this.value.length > maxLength){
        return false;
    }

    // find the counter element by the id specified in the source input element
    var counterElement = $(".textcounter#" + $(this).data("textcounterid"));
    // update counter 's text
    counterElement.html((maxLength - this.value.length) + " chars left");
}); 
```

现场演示[在这里](https://jsfiddle.net/cnom/ou1r9a6k/)

# php - 打印中的日期格式问题

> ID：12742597
> 
> 赞同：-5
> 
> 时间：2012-10-05T08:41:40.657
> 
> 标签：php, sql

> **可能重复：**
> [使用 php 格式化 mysql 日期时间](https://stackoverflow.com/questions/136782/format-mysql-datetime-with-php)

我有这个查询：

```
$sql="SELECT job_id,job,job2,start_date,end_date ".
     "FROM pianificazione WHERE job_id='$selected_jobs'"; 
```

结束日期在数据库中是 DATE 格式，但我需要以 dmY 格式打印它是我打印它的位置：

```
echo "<td><input type='text'id='end_date'  class='datepicker'  ".
         "title='D-MMM-YYYY' name='end_date[$i]' value='".
          $rows['end_date']. "' /></td>"; 
```

你能帮我解决这个问题吗？谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:44:57.440

可以直接在mysql查询中使用

```
DATE_FORMAT(end_date,'%d-%m-%Y') 
```

**更新：**

```
DATE_FORMAT(end_date,'%d-%m-%Y') as end_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:44:05.197

要将 DATE 格式 $date 转换为`d-m-Y`格式日期，请使用如下 PHP[`date()`](http://php.net/manual/de/function.date.php)函数：

```
$date = date("d-m-Y", strtotime($date)); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-05T08:44:20.547

```
$date = substr($date_original, 8, 2).'-'.substr($date_original, 5, 2).'-'.substr($date_original, 0, 4); 
```

# java - JDOM 解析器插入#FIXED 手动属性

> ID：12742605
> 
> 赞同：2
> 
> 时间：2012-10-05T08:42:10.220
> 
> 标签：java, xml, dom

我有问题：

当我使用 org.jdom 解析器从令人兴奋的源代码构建 xml 时，它会插入手动属性，其值在 DTD 文件中标记为 # **FIXED**，但在源 xml 中未指定这些属性。

如何防止它将这些默认的**#FIXED**值插入到 xml 中？例如：源 XML

```
<head type="myhead">my table</head> 
```

DOM 解析器后的结果 XML：

```
<head type="myhead" is-search="true">my table</head> 
```

如您所见，`is-search`缺少属性:(

**已解决：** 添加了这一行

```
setFeature("http://xml.org/sax/features/validation", false);
setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false); 
```

# ajax - $.ajax 获取请求

> ID：12742609
> 
> 赞同：0
> 
> 时间：2012-10-05T08:42:32.357
> 
> 标签：ajax, jquery

嗨，有没有办法从帖子中获取请求，以便我可以打印它？

例如，我想得到这个（登录服务器）。

```
/App/user/?email=phe@mail.com&dob=Fri Oct 05 2012 10:23:25 GMT+0200 (CEST)&childPortions=&tips=on&firstName=] 
```

我知道有这方面的工具，但我现在对此并不感兴趣。

```
$.ajax({
    type: 'POST',
    url: "/App/user/",
    data: profile,
    cache: false,
    success: function(data){            
       $(".response-container").html(JSON.stringify(data, null, 2));
    }

}); 
```

这看起来很有趣（jQuery.param()）

data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，或 {key1: 'value1', key2: 'value2'} 形式的映射。如果使用后一种形式，则数据在发送之前使用 jQuery.param() 转换为查询字符串。可以通过将 processData 设置为 false 来规避此处理。如果您希望将 XML 对象发送到服务器，则该处理可能是不可取的；在这种情况下，将 contentType 选项从 application/x-www-form-urlencoded 更改为更合适的 MIME 类型。

编辑： .ajaxSend 永远不会被执行。调用成功函数。这怎么会发生？

```
$(document).ajaxSend(function(e, jqXhr, options) {
    alert("hallo");
});
$.ajax({
    type: 'POST',
    url: "/App/user/",
    data: profile,
    cache: false,
    success: function(data){            
       console.log("ajax sent!")
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:48:16.420

您可以使用`.ajaxSend`全局事件处理程序在将所有 AJAX 请求发送到服务器之前对其进行处理。传递给事件处理程序的参数提供了您需要的所有信息。

**[活生生的例子](http://jsfiddle.net/4G3bD/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:47:41.980

当然有一种方法可以在服务器端获取请求数据。如何 - 取决于您使用的后端类型（PHP、JSP、ASP.NET、DJANGO....）

在 PHP 中，您可以检查`$_SERVER['QUERY_STRING']`或`$_POST`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:52:16.807

在 C# 中，您可以使用

```
Request.RawUrl 
```

# javascript - Mac 上 Chrome 的画布问题

> ID：12742614
> 
> 赞同：5
> 
> 时间：2012-10-05T08:42:44.993
> 
> 标签：javascript, macos, html, google-chrome

我一直在寻找为什么在画布元素上的旋转矩形的绘制、擦除和重绘在 mac 上的 google chrome 中不起作用的原因。

我需要这个，因为我想在画布上呈现悬停覆盖。

我创建了一个代表我的代码的小提琴：[链接](http://jsfiddle.net/z8f2f/23/)

html:

```
<canvas id="canvas"  width="400" height="165" style="left: 0px; top: 0px; background-color:red;"></canvas> 
```

Javascript：

```
var canvas =null;
var ctx;
var target;

$(function() {
        canvas=document.getElementById('canvas');
        ctx = canvas.getContext('2d');
        target = { h:81, id:"i1_2", isempty:false, r:-11.64, w:60, x:143, y:19, zindex:2};
});

function drawRectangle() {
        ctx.save();
        ctx.translate(target.x, target.y);
        ctx.fillStyle = "green";
        ctx.strokeStyle = "blue";
        ctx.globalAlpha = 0.40;
        ctx.rotate(target.r / 180 * Math.PI); //NO Rotation => It works!
        ctx.fillRect(0,0,target.w,target.h);
        ctx.restore();   
}

function clearRectangle() {
    ctx.clearRect(0,0,400,165);
} 
```

这适用于 Windows 和 Mac 上的所有浏览器，Mac 上的 Chrome 除外。

当我注释掉该行时

```
// ctx.rotate(angle); 
```

矩形被绘制在画布上。（当然没有旋转）

我做错什么了吗？或者这可能是 Chrome 中的一个错误？

编辑：可能不是 Chrome 中的错误，因为此测试页面适用于 Mac 上的 chrome：

[http://www.html5canvastutorials.com/demos/advanced/html5_canvas_transform_rotate/](http://www.html5canvastutorials.com/demos/advanced/html5_canvas_transform_rotate/)

编辑 2：我一直在对此进行更多研究，发现此问题已记录：[链接](http://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&groupby=&sort=&id=129732)

我在那里测试小提琴并添加了更多带有旋转画布元素的测试：[链接](http://jsfiddle.net/Dz4BJ/17/) 阅读那里的信息，当您在较小的画布上绘图时，问题已“解决”。

在这里查看我的小提琴结果： ![结果不好](../Images/643b08a75ad7f58039ba23ddcf2c179b.png)

当我在上面的小提琴中更改画布的大小时，使它们仅小 1 像素。然后结果就ok了。

![好结果](../Images/d06e4150f3e0c1b79967468642c0ec9b.png)

最终结论：看来我可以画一次旋转的矩形。但是当我使用 clearRect 方法擦除画布时，我无法再次绘制矩形。只有当画布的大小足够大时才会发生这种情况。（大于 65600 像素）

你们有谁知道这个解决方案，所以我可以在 Mac 上使用 chrome 在画布上绘制和重绘矩形？

我快疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:28:51.777

从您所做的研究来看，您已经知道这是一个浏览器错误，因此您本身无法修复它。但是，您可以通过使用彼此相邻的较小画布并在每个画布上绘制不同的偏移量来解决此问题，以便对齐形状的边缘。

从代码的角度来看，它并不完全好，但在视觉上它看起来是一样的，它应该可以解决这个错误。

我已经修改了你的小提琴来演示：http: [//jsfiddle.net/z8f2f/35/](http://jsfiddle.net/z8f2f/35/)

# sharepoint - 如何在 sharepoint 2010 中向列表发送电子邮件 - 默认情况下，系统上不允许使用列表电子邮件

> ID：12742621
> 
> 赞同：1
> 
> 时间：2012-10-05T08:43:11.390
> 
> 标签：sharepoint, sharepoint-2010

我在 sharepoint 2010 自定义列表（自定义信息路径表单）中有一个要求。

我想向自定义列表发送电子邮件

我要映射的以下字段

主题 - 标题

从 Outlook 2010 中的 ID - 提交者

Outlook 2010 中的邮件正文 - 说明

附件 - 附件

开始日期 - 收到日期

我应该使用什么工具？构建的一些输入会有所帮助。

# android - 如何在android的ScrollView中使textview焦点像Edittext Focus？

> ID：12742624
> 
> 赞同：0
> 
> 时间：2012-10-05T08:43:18.583
> 
> 标签：android, android-layout

我正在开发带有一些edittext 和一些textviews 的应用程序。这些都在滚动视图中。当触摸edittext时，软键出现，视图自动调整。选定的编辑文本出现在软键上方。当单击 textview 时，我将显示一些隐藏视图（线性布局包含 3 个按钮），这些视图覆盖了我选择的 textview 字段。我不知道如何提供与 edittext 相同的功能，可以将我选择的 textview 移动到我的自定义弹出窗口上方。请建议我有什么方法可以在滚动视图中为 textview 提供像 edittext 这样的焦点功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:46:48.697

`EditText`并且`TextView`非常相似。我看到硬编码到[EditText.java](http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/java/android/widget/EditText.java)中的唯一区别是将可编辑默认设置为 true，这是您手动设置的。除此之外，`EditText` [风格](http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/res/res/values/styles.xml)是：

```
<style name="Widget.EditText">
    <item name="android:focusable">true</item>
    <item name="android:focusableInTouchMode">true</item>
    <item name="android:clickable">true</item>
    <item name="android:background">@android:drawable/edit_text</item>
    <item name="android:textAppearance">?android:attr/textAppearanceMediumInverse</item>
    <item name="android:textColor">@android:color/primary_text_light</item>
    <item name="android:gravity">center_vertical</item>
</style> 
```

引用自[禁用 EditText 可编辑性和焦点（如 TextView）](https://stackoverflow.com/questions/5359420/disable-edittext-editability-and-focus-like-textview)

并且`TextView`是：

```
<style name="Widget.TextView">
    <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
</style> 
```

我的猜测是那`@android:drawable/edit_text`是橙色框的来源。事实上，[它包含](http://android.git.kernel.org/?p=platform/frameworks/base.git;a=blob;f=core/res/res/drawable/edit_text.xml)：

```
<item android:state_pressed="true" android:drawable="@drawable/textfield_pressed"/> 
```

最简单的方法可能是将其背景设置为默认值：

`android:background="@android:drawable/textfield_default"`

# conditional-statements - 两个TYPO3 globalVar是一样的

> ID：12742625
> 
> 赞同：0
> 
> 时间：2012-10-05T08:43:25.647
> 
> 标签：conditional-statements, typo3, typoscript

我在 TypoScript 中有这种情况：

```
[globalVar = TSFE:fe_user|sesData|get_car = TSFE:fe_user|sesData|return_car]
   # Do nothing 
[else]
   plugin.Tx_Formhandler.settings.predef.formhandler-multistep-forms-rent-a-car {
      markers.master_input_price_out_town1 = TEXT
      markers.master_input_price_out_town1.value = Zwrot samochodu:

      markers.master_input_price_out_town2 = CONTENT
      markers.master_input_price_out_town2 {
        table = tx_pricelist_additional_price
        select {
          pidInList = 44
          orderBy = uid
          selectFields = uid, return_another_department
          # possible conditions
           where = ( hidden='0' AND deleted='0')
        } 
        renderObj = COA
        renderObj {
          #value  
          1 = TEXT
          1.insertData = 1 
          1.data = field: return_another_department      
          1.stdWrap.prioriCalc = 1
          1.wrap = <div>|</div>
        }
      }
   }
[global] 
```

因为在 TS 中没有像`!=`我使用`[else]`条件这样的想法，但是`CODE`即使在`get_car`和`return_car`相同时也会执行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:02:30.023

TypoScript 不应该被认为是高级编程语言，因此尝试准备越来越复杂的条件将很快将您带入死胡同。

尽管您没有指定 s 任务是什么，但我建议您考虑编写自定义扩展，无论如何，如果不需要，您最好在使用`CODE`时编写至少自定义条件，以便您可以使用更复杂的运算符，[检查文档，在底部](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/4/)。`localconf.php``userFunc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:21:31.070

我以其他方式制作了这个：

```
[globalString = TSFE:fe_user|sesData|get_car = *] && [globalString = TSFE:fe_user|sesData|return_car = *] 
   CODE
[global] 
```

和

```
[globalVar = TSFE:fe_user|sesData|get_car = City] && [globalVar = TSFE:fe_user|sesData|return_car = City] 
   CODE for "Do nothing"
[global] 
```

感谢您的任何建议！

# python - 比较列表值

> ID：12742635
> 
> 赞同：1
> 
> 时间：2012-10-05T08:44:08.733
> 
> 标签：python, list

如何修改此代码以允许我使用`last_coordinates`列表与当前`coordinates`列表进行比较，以便我可以调用一个方法，例如`activate()`当这两个列表之间的值存在差异时？

```
HOST = '59.191.193.59'
PORT = 5555

coordinates = []

def connect():   
    globals()['client_socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

def update_coordinates():
    screen_width = 0
    screen_height = 0
    while True:
        try:
            client_socket.send("loc\n")
            data = client_socket.recv(8192)
        except:
            connect();
            continue;

        globals()['coordinates'] = data.split()

        if(not(coordinates[-1] == "eom" and coordinates[0] == "start")):
            continue

        if (screen_width != int(coordinates[2])):
        screen_width = int(coordinates[2])
                screen_height = int(coordinates[3])
        return

Thread(target=update_coordinates).start()
connect()
update_coordinates()
while True:
    #compare new and previous coordinates then activate method?
    activate() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:38:25.413

您需要在模块范围内初始化 last_coordinates

```
last_coordinates = ['start', 0, 0] 
```

稍后在您收到数据后，添加类似以下代码的内容：

```
globals()['coordinates'] = data.split()
if last_coordinates[0] != coordinates[0] or \
   last_coordinates[1] != coordinates[1] or \
   last_coordinates[2] != coordinates[2]:
   # Do something useful here

# this line copies your coordinates into last_coordinates
last_coordinates = coordinates[:] 
```

正如其他人在评论中指出的那样，您的代码还有其他问题。例如，上面片段中的第一行最好改写为：

```
 global coordinates
 coordinates = data.split() 
```

但是你可能仍然遇到线程问题。

# sockets - 从 Linux 内核获取套接字的详细信息

> ID：12742641
> 
> 赞同：1
> 
> 时间：2012-10-05T08:44:56.863
> 
> 标签：sockets, linux-kernel

我有一个用户空间应用程序，它创建了几个原始套接字（具有不同协议的 AF_INET 和 AF_PACKET 系列）。为了帮助调试，我需要以编程方式显示这些套接字的详细信息（例如，在这些套接字处排队的字节数/数据包数）。

我尝试使用 FIONREAD ioctl 和带有 MSG_PEEK 标志的 recv，但是这两个都只给了我在套接字中排队的第一个数据包的字节数。

所以看来我需要阅读“/proc/PID/net/raw”文件来获取我需要的详细信息。 **Q1：有没有更好的方法？**

Linux 内核只将 AF_INET 系列的套接字添加到其原始套接字哈希表中，而不是 AF_PACKET 系列的套接字。因此，“/proc/PID/net/raw”文件中仅列出了 AF_INET 系列的套接字。 **Q2：有什么方法可以获取AF_PACKET 家族的sockets 的详细信息吗？**

通过读取“/proc/PID/net/raw”文件，我可以获得内核发送和接收队列中的字节数。 **Q3：我能以某种方式获得排队的数据包数量吗？**

任何帮助将不胜感激。

ps：我的程序是用 C 语言编写的，但我也很乐意查看其他语言的代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T09:29:12.610

这是对问题 #2 的回应。

不，不可能获得 AF_PACKET 系列套接字的详细信息（至少不能通过 Linux 内核）。这是因为对于 AF_PACKET 系列的套接字，内核中的整个协议栈都被跳过，数据包被直接传递给创建套接字的用户空间应用程序。

# php - 如何获取 ajax 事件的当前加载百分比？

> ID：12742646
> 
> 赞同：3
> 
> 时间：2012-10-05T08:45:15.757
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [在 $.ajax 调用上创建一个进度条](https://stackoverflow.com/questions/12638010/create-a-progress-bar-on-ajax-call)

我的问题很简单，我需要获取 XMLHttpRequest 的实时加载百分比（我使用的是 Jquery 的`post()`系统），这样我就可以用我的进度条显示它。

我没有设法找到如何做到这一点，我找到了一些使用 php 的方法`flush()`，但我不相信

因此，如果有人知道获取百分比的简单方法，那么我可以显示当前的加载进度...

XMLHttpRequest 正在返回 html 代码，它是页面的一部分，我在 div 中显示它。我想在那个 div 中放一个进度条，直到我得到所有的数据......

**编辑：我没有上传任何东西，只是将 id 发送到 php 脚本并取回 html 数据。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:53:21.087

**post 事件只有三种处理方法，即 .error()、.success() 和 .complete()，因此我们无法处理，但可能有替代解决方案，以预测该事件的时间消耗并使用 HTML 5组件进度条使用时间间隔增加其值，并在完成时将其值设置为 100。**

[增加 HTML 5 价值的演示](http://jsfiddle.net/fJxGG/1/)

# android - 活动是否有“刷新”能力？

> ID：12742647
> 
> 赞同：0
> 
> 时间：2012-10-05T08:45:19.960
> 
> 标签：android, refresh

我有一个活动，在 onCreate() 方法中有一些实例和一些基本操作.. 现在我想刷新（再次调用 onCreate() ？？？）我在特定按钮单击时的活动，这可能吗？

我是通过这种方式做到的。。

this.onCreate(null);

但效果不佳 帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:46:49.290

您可以将所有这些操作放在一个方法中，然后在按钮单击和`onCreate`..时调用此方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:46:58.603

只需将您的逻辑从`onCreate`另一种方法中移出，例如`init`. 然后`init`从两者`onCreate`和您的按钮单击处理程序调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:49:15.960

创建您自己的方法并将代码从 onCreate 包装到此方法。在 onCreate 以及您想要的任何地方调用此方法（例如在您的情况下单击按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:49:37.787

基本上，您需要为此重新启动当前活动。

这是重新启动活动的代码：

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T08:53:00.003

更好的选择是将您的代码放入`onResume()`. 每次您的活动在`onResume()`前台时都会调用它，您也可以直接`onResume()`在按钮单击事件上调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T12:38:18.763

选项1：

最好将逻辑保留在 oncreate() 函数之外，然后从 oncreate 函数和活动刷新按钮调用逻辑。

选项 2：

完成活动并开始相同的活动。

# android - 捕获的 Android XML 解析器异常

> ID：12742650
> 
> 赞同：2
> 
> 时间：2012-10-05T08:45:36.880
> 
> 标签：android, xml-parsing

有人可以检查代码。我的 XMLParser 捕获了一个异常。我正在尝试使用带有列表视图的标签片段，使用 XML Parser 来解析来自远程数据库的结果。

MainActivity.java

```
public class MainActivity extends SherlockFragmentActivity implements TabListener {
    private Fragment mFragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(true);

        //mFragment = new AppleFragment();

        Tab tab = actionBar.newTab()
                .setText("Apple")
                .setTabListener(this)
                .setIcon(R.drawable.apple);

        actionBar.addTab(tab);

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
         if (mFragment == null) {
                mFragment = new AppleFragment();
                ft.add(android.R.id.content, mFragment);
            } else {
                ft.attach(mFragment);
            }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

AppleFragment.java

```
public class AppleFragment extends SherlockListFragment{

        static final String URL = "http://api.androidhive.info/pizza/?format=xml";
        // XML node keys
        static final String KEY_ITEM = "item"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_NAME = "name";
        static final String KEY_COST = "cost";
        static final String KEY_DESC = "description";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        return super.onCreateView(inflater, container, savedInstanceState);

        }

        public void onActivityCreated(Bundle savedInstanceState) {

            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);
            }

            ListAdapter adapter = new SimpleAdapter(getActivity(), menuItems,
                    R.layout.list_item,
                    new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                            R.id.name, R.id.desciption, R.id.cost });

            setListAdapter(adapter);    

        }
} 
```

XMLParser.java

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

日志猫：

```
10-05 16:36:50.453: E/AndroidRuntime(20162): FATAL EXCEPTION: main
10-05 16:36:50.453: E/AndroidRuntime(20162): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: android.os.NetworkOnMainThreadException
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.os.Looper.loop(Looper.java:137)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread.main(ActivityThread.java:4512)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at java.lang.reflect.Method.invokeNative(Native Method)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at java.lang.reflect.Method.invoke(Method.java:511)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at dalvik.system.NativeStart.main(Native Method)
10-05 16:36:50.453: E/AndroidRuntime(20162): Caused by: android.os.NetworkOnMainThreadException
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at in.wptrafficanalyzer.actionbarsherlocknavtab.XMLParser.getXmlFromUrl(XMLParser.java:45)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment.onCreateView(AppleFragment.java:38)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1136)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.Activity.performStart(Activity.java:4475)
10-05 16:36:50.453: E/AndroidRuntime(20162):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1943)
10-05 16:36:50.453: E/AndroidRuntime(20162):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:48:46.213

您正在主线程上运行网络操作。使用异步任务在后台线程中运行网络操作（在后台线程中进行 xml 解析）。这就是你得到 android.os.NetworkOnMainThreadException 的原因。

在这样的异步任务中解析它：

```
class XMLParsingTask extends AsyncTask<String, Void, RSSFeed> {

    protected void onPreExecute() {
    //show a progress dialog to the user or something
    }

    protected void doInBackground(String... urls) {
        //Parse your XML here
    }

    protected void onPostExecute() {
        //do something with your parsed xml here and dismiss the progress dialog
    }
 }

 new RXMLParsingTask().execute(null); 
```

如果您不知道如何使用异步任务，这里有一些教程供您参考：

[http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

这里是官方文档：[https ://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:52:27.007

将您的网络逻辑从主线程移动到单独的线程，从 Android 3.0 开始，我们需要在单独的线程上执行所有与网络相关的代码。

# asp.net-mvc - 用于 Sql 视图的 Fluent Nhibernate 映射

> ID：12742651
> 
> 赞同：12
> 
> 时间：2012-10-05T08:45:37.803
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我在带有 c# 的 asp.net mvc3 中使用 Fluent Nhibernate

我正在按照以下方式生成和映射一个类

**映射**

```
using FluentNHibernate.Mapping;
using Com.Web.Domain;

   namespace Com.Web.Mapping
      {
         public class CompanyMap : ClassMap<Company>
        {
             public CompanyMap()
            {
               Id(x => x.id);
               Map(x => x.Name);
              }
          }
       } 
```

**班级**

```
 using System.Collections.Generic;
     using System;

      namespace Com.Web.Domain
      {

          public class Company
         {

          public virtual int id { get; set; }
          public virtual string Name{get;set}

           }

        } 
```

并在配置文件中

```
 private static void InitializeSessionFactory()
    {

       _sessionFactory = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                          .ConnectionString(local)

            )
            .Mappings(m =>
                      m.FluentMappings
                          .AddFromAssemblyOf<Company>())
            .ExposeConfiguration(cfg => new SchemaExport(cfg)
            .Create(false, false))  // this is intentionally set false , bcz i dont want to regenerate table when application starts every time 
            .BuildSessionFactory();

    } 
```

现在问题来了，我在 sql 中创建一个视图，看起来像这样

**Sql 视图**

```
CREATE VIEW [FeaturedCompanies] AS

   SELECT COUNT(Company.id) As Count FROM Company
   WHERE Name='Alias' 
```

我想在我的代码中使用这个视图，就像我正在使用的一样，但我该怎么做，我搜索了很多，但在谷歌上一无所获

请帮助我并提前感谢

**到目前为止尝试了什么**

**班级**

```
public class FeaturedCompany
{
    public virtual int id { get; set; }
    public virtual int name { get; set; }
    public virtual int count { get; set; }
} 
```

**映射**

```
public class FeaturedCompanyMap : ClassMap<FeaturedCompany>
  {
 public FeaturedCompanyMap()
 {
    Table("FeaturedCompanies");
    ReadOnly();
   Id(x => x.id);
   Map(x => x.name);
   Map(x => x.count);
 }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-05T08:59:30.420

视图的映射方式与表的映射方式相同，只是您应该放入`Readonly()`映射以防止意外写入。例子：

```
public class FeaturedCompanyMap : ClassMap<FeaturedCompany>
{
    public FeaturedCompanyMap ()
    {
       Table("FeaturedCompanies");
       ReadOnly();

       Id(x => x.Id);
       Map(x => x.Name);
       Map(x => x.Count);
    }
} 
```

更新：获取计数

```
var results = session.Query<FeaturedCompany>().Where(filter).List();

foreach(var row in results.Select(r => "Alias: " + r.Name + "  Occurence: " + r.Count))
{
    // print row to screen
} 
```

# java - jsoup ：提取两个之间的标签

> ID：12742652
> 
> 赞同：1
> 
> 时间：2012-10-05T08:45:45.057
> 
> 标签：java, jsoup

这是我的代码。

```
<table width="100%" cellspacing="0" border="0" cellspadding="20">
    <tbody>
    <tr>
        <td valign="top" height="50px" align="center">
            <span class="footer">Contact Sue Simmons on: tel:
            <strong>+44 (0)1727 864806     
                <a href="mailto:info@aoec.com">info@aoec.com</a>
                <a href="http://www.aoec.com">www.aoec.com</a>
            </strong>
            </span>
            <br>
            <a href="https://twitter.com/theaoec/">
                <img class="style2" border="0" src="http://www.aoec.com/Images/Icons/twitter.png" alt="Twitter">
            </a>
            <a href="http://www.linkedin.com/groups/AoEC-2429085">
                <img class="style2" border="0" src="http://www.aoec.com/Images/Icons/linkedIn.png" alt="LinkedIn">
            </a>
        </td>
    </tr>
    </tbody>
</table> 
```

我想找出两个图像标签之间的标签。我尝试使用 nextSiblingElement() 但它不起作用，因为`<a>`标签会导致问题。

在上面的代码中，我输入了如下所述的代码

```
Document cc = Jsoup.parse(html);

Elements imageElements = cc.select("img"); 
```

现在我在提取它时得到第一个标签。所以我想用下一个检查这两个图像是否由 td、p、div 分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:55:26.157

试试[JSoup](http://jsoup.org/)，强烈推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:12:28.833

您的图像标签之间没有任何内容。它们位于“a”标签内。

请在您的问题中添加您想要获得的文本。

# android - IO 异常客户端/服务器套接字

> ID：12742655
> 
> 赞同：0
> 
> 时间：2012-10-05T08:46:08.227
> 
> 标签：android, client-server, android-wireless

我正在编写一个客户端/服务器程序来通过我自己的本地互联网无线网络发送数据。在客户端，我写了这个片段

```
private static final int TCP_SERVER_PORT = 63400
    try {
        // provide a client side TCP socket

        Socket s = new Socket("192.168.1.102", TCP_SERVER_PORT);
            ... 
```

它抛出一个 IOException。我添加了 INTERNET 权限。我正在加入本地 DSL 互联网 wifi 网络。是路由器的原因吗？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:53:33.000

192.168.1.102 上的 63400 端口是否打开？

尝试

```
telnet 192.168.1.102 63400 
```

如果它返回任何东西，那么端口是打开的，问题出在其他地方。如果它说“名称或服务未知”，那么没有人在听 @ 192.168.1.102:63400

编辑：刚刚注意到 android 标签。不知道你是否在 android 上有 shell/telnet，但你可以在 PC 上使用这个方法，包括 windows 和 linux shell

# java - Java 如何在 Applet 模式下使用这么多内存？

> ID：12742657
> 
> 赞同：2
> 
> 时间：2012-10-05T08:46:22.897
> 
> 标签：java, memory, soap

我一直在编写一个要部署在浏览器中的 Java swing 小程序（对于小程序来说，ios 是很正常的，当然）。它使用 Java 2D

无论如何，我有一个用于开发目的的测试工具，它作为桌面应用程序运行。

基于完全相同的测试数据，Test Harness 版本的堆总大小为 18 Meg；这是基于在 Java 2D 画布上绘制大约 7000 个对象，大概有 30,000 个坐标对，加上其他零碎，因此 18 Meg 堆很大，但几乎可以理解。应用程序总大小为 40 兆。

现在我通过 IBM Websphere 运行与 Applet 完全相同的代码。

插件的内存增量上升到大约 160Meg！不知何故，相同的 java 代码正在设法使用 10 倍的内存。

我的老 CBM64 程序员对第一个数字并没有特别印象 - 它是一个数量级的 IMO 臃肿，但第二个是惊人的 - 有人知道什么可能会使用这么多内存吗？我正在使用 VisualVM，它有助于将 Object、char[] 和 String 之类的东西作为内存猪，我的课程都没有接近。

有趣的是，Float 和 Double 似乎占用了完全相同的内存量（每个 16 字节）。

我现在的主要猜测是使用 SOAP 进行数据检索导致内存使用量激增，并且由于未知的原因，SOAP XML 被保留而不是 GC'd。

还有其他人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:41:36.997

找到它 - 或其中一点。

当您使用 Axis 1.3 进行 SOAP 调用（首先获取数据）时，它不会释放 SOAP XML，直到下一次调用。

不幸的是，在这种情况下，只有一个初始数据填充调用，因此 Axis 一直挂在大约 150Meg 的 XML 上。足够简单的解决方法，进行第二次“空”调用以清除它。GC 后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:55:23.200

JVM 总是分配一个大于它需要或实际上可能在任何给定时间使用的内存池。任何对 JVM 内存使用的外部测量都可能具有误导性。

JVM 这样做有几个相当合理的原因：

*   当垃圾收集器有更多空间来分配/移动对象时，它可以使垃圾收集器更有效地运行
*   即使 GC 清除了一些空间，在假设程序可能再次需要它的情况下保留空间是有意义的
*   GC 通过懒惰地收集垃圾来避免不必要的工作——除非 GC 被迫执行收集，否则旧对象可以在堆上存在相当长的一段时间。这些物体没有造成任何伤害——如果需要，以后可以回收空间。

你可能只是看到了这种行为的结果。除非您确实遇到问题（例如 OutOfMemoryError - 这可能表明您有内存泄漏），否则不要担心。

ps Float和Double对象都占用16个字节的原因很可能是a）它们有一个对象头，b）然后填充它们以确保缓存行/内存寻址对齐。如果你在一个数组中包含很多浮点数/双精度数，那么你会发现它们分别占用 4 和 8 个字节。

# c++ - 解析对临时函数对象的调用中的歧义

> ID：12742658
> 
> 赞同：1
> 
> 时间：2012-10-05T08:46:31.003
> 
> 标签：c++, constructor, arguments, most-vexing-parse, function-object

我怀疑在下面的代码中，由于最棘手的解析问题，使用构造函数参数和函数调用运算符参数调用临时函数对象在某种程度上是模棱两可的。

```
#include <iostream>

class Fun
{
public:
        explicit Fun(int i): v_(i) {}

        void operator()(int j) const 
        { 
                std::cout << (v_ + j) << "\n"; 
        }

private:
        int v_; 
};

int main()
{
        int a = 1;
        int b = 2;

        Fun(a)(b);   // ERROR: conflicting declaration 'Fun a'
        (Fun(a))(b); // OK: prints 3
        return 0;
} 
```

在[Ideone](http://ideone.com/rQjVj)上输出。

添加括号之类`(Fun(a))(b)`的问题可以解决，但我不太明白如何`Fun(a)(b)`将其解析为声明`Fun a`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:52:02.170

不幸的是`Fun(a)(b);`，可以将其解析为`Fun a(b);`声明，而不是临时对象。

查看[最令人头疼的解析](https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:53:28.460

理解函数声明语法的简单示例：

```
#include <iostream>

void (foo)(int a) {
   std::cout << a << std::endl;
}

int main() {
   foo(5);
} 
```

所以在你的情况下，你必须使用这个：

```
Fun(a).operator()(b); 
(Fun(a))(b); 
```

# sql - 聚合多个条件：转换为单个查询

> ID：12742659
> 
> 赞同：1
> 
> 时间：2012-10-05T08:46:32.003
> 
> 标签：sql, ruby-on-rails, postgresql, aggregate-functions

给定表格：

`reservations (id, place_id, confirmed_at, paid_at)` 和 `places (id, name)`

我需要返回可以分别表示以下查询的聚合：

```
-- Confirmed
SELECT places.id, places.name, COUNT(reservations.*) as total_confirmed
FROM reservations
  INNER JOIN places ON places.id = reservations.place_id
WHERE
  reservations.confirmed_at IS NOT NULL
GROUP BY places.id, places.name

--  Paid
SELECT places.id, places.name, COUNT(reservations.*) as total_paid
FROM reservations
  INNER JOIN places ON places.id = reservations.place_id
WHERE
  reservations.paid_at IS NOT NULL
GROUP BY places.id, places.name

-- Paid Uncofirmed
SELECT places.id, places.name, COUNT(reservations.*) as total_paid_unconfirmed
FROM reservations
  INNER JOIN places ON places.id = reservations.place_id
WHERE
  reservations.paid_at IS NOT NULL AND reservations.confirmed_at IS NULL
GROUP BY places.id, places.name 
```

如何**将这些查询重写为一个**并返回所有必要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:51:16.987

```
SELECT places.id, places.name,
sum(case when (reservations.confirmed_at IS NOT NULL) then 1 else 0 end) as total_confirmed,
sum(case when (reservations.paid_at  IS NOT NULL) then 1 else 0 end) as total_paid,
sum(case when  (reservations.paid_at IS NOT NULL AND reservations.confirmed_at IS NULL) then 1 else 0 end) as total_confirmed_paid
FROM reservations
  INNER JOIN places ON places.id = reservations.place_id
GROUP BY places.id, places.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:52:34.747

我更喜欢这样的查询，因为如果有些`places`还没有`reservation`或可能已经有多个预订怎么办。仍然可以安全地计算`SUM`.

```
SELECT  d.*, a.total_confirmed, b.total_paid, c.total_paid_unconfirmed
FROM    places d
        LEFT JOIN
        (
            SELECT places.id, places.name, COUNT(reservations.*) as total_confirmed
            FROM reservations
              INNER JOIN places ON places.id = reservations.place_id
            WHERE
              reservations.confirmed_at IS NOT NULL
            GROUP BY places.id, places.name
        ) a ON d.id = a.id
        LEFT JOIN
        (
            SELECT places.id, places.name, COUNT(reservations.*) as total_paid
            FROM reservations
              INNER JOIN places ON places.id = reservations.place_id
            WHERE
              reservations.paid_at IS NOT NULL
            GROUP BY places.id, places.name
        ) b ON d.id = b.id
        LEFT JOIN
        (
            SELECT places.id, places.name, COUNT(reservations.*) as total_paid_unconfirmed
            FROM reservations
              INNER JOIN places ON places.id = reservations.place_id
            WHERE
              reservations.paid_at IS NOT NULL AND reservations.confirmed_at IS NULL
            GROUP BY places.id, places.name
        ) c ON d.id = c.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:00:51.523

这些查询可以使用联合组合在一起，但在联合中，所有查询必须返回相同的结果集，因为所有查询的输出必须相同。这可以按如下方式完成：

```
SELECT places.id, places.name,'total_confirmed' as totalType, COUNT(reservations.*) as total
FROM reservations   INNER JOIN places ON places.id = reservations.place_id 
WHERE   reservations.confirmed_at IS NOT NULL 
GROUP BY places.id, places.name  
union all
SELECT places.id, places.name,'total_paid' as totalType, COUNT(reservations.*) as total
FROM reservations   INNER JOIN places ON places.id = reservations.place_id 
WHERE   reservations.paid_at IS NOT NULL 
GROUP BY places.id, places.name  
union all
SELECT places.id, places.name,'total_paid_unconfirmed' as totalType, COUNT(reservations.*) as total
FROM reservations   INNER JOIN places ON places.id = reservations.place_id 
WHERE   reservations.paid_at IS NOT NULL AND reservations.confirmed_at IS NULL 
GROUP BY places.id, places.name 
```

# c# - 如何在线程中捕获正确的变量

> ID：12742662
> 
> 赞同：2
> 
> 时间：2012-10-05T08:46:38.067
> 
> 标签：c#, multithreading

为什么会发生这种情况？

你启动一个线程，它运行一个类。

在那个类里面有一个for循环，在for循环里面有一个“写入消息框”和另一个类。

为什么我写的顺序和类（哪个先发生）会影响我的数据的准确性？

（这是线程正在运行的类内部）

```
int atPDFNumber= 0
foreach (var z in q)
        {
                atPDFNumber++;

                convertToImage(z.FullName);

                txtboxtest.BeginInvoke(
            ((Action)(() => txtboxtest.Text += atPDFNumber.ToString())));
} 
```

该输出给了我一些重叠的值。输出是

运行 1 : 1 2 3 4 5 6 7 8 9 10 11 12 13 14

运行 2：1 **3 3** 4 5 6 7 8 9 10 11 12 13 14

运行 2：1 2 3 4 5 6 7 8 9 **11 11** 12 13 14

在哪里以正确的顺序运行它们

```
foreach (var z in q)
            {
                    atPDFNumber++;

                txtboxtest.BeginInvoke(
                ((Action)(() => txtboxtest.Text += atPDFNumber.ToString())));

               convertToImage(z.FullName); 
```

为什么会这样？可能是我在 ConvertToImage 类中使用的外部方法也在运行一个线程。在这种情况下，我将如何“暂停”我的线程以等待 ConvertToImage 完成......

否则，我不知道为什么这个线程会这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:56:16.630

这是一个竞赛条件。您创建一个闭包：

```
() => txtboxtest.Text += atPDFNumber.ToString() 
```

在后台，编译器创建匿名类，如下所示：

```
class Closure
{
    public int? adPDFNumber;
    public void Call() {
        txtboxtest.Text += atPDFNumber.ToString();
    }
} 
```

并使用它：

```
var closure = new Closure();
closure.atPDFNumber = atPDFNumber;
txtboxtest.BeginInvoke(closure.Call); 
```

BeginInvoke 实际上在 GUI 线程中调用方法 Call，当它发生时，变量 atPDFNumber 可能已经增加。您必须在闭包中传递临时变量：

```
 var tmp = atPDFNumber++;
 txtboxtest.BeginInvoke(() => txtboxtest.Text += tmp.ToString()); 
```

**更新：** 这种令人困惑的行为在最新版本的 C# 语言中发生了变化。在 C# 5 中，您可以安全地在 lambda 中使用循环变量，并且您的代码示例可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T08:51:52.297

您的操作是捕获 atPDFNumber 变量的值，而不是它的当前值。在您的示例中，如果您将 atPDFNumber 分配给局部变量并将其传递给您的操作，它将按预期工作。

```
int atPDFNumber = 0; 
foreach (var z in q)
{
    atPDFNumber++; 
    convertToImage(z.FullName);
    int currentValue = atPDFNumber;
    txtboxtest.BeginInvoke(((Action)(() => txtboxtest.Text += currentValue.ToString())));
} 
```

* * *

在这里您可以找到有关[C# 中的变量捕获的信息](http://blogs.msdn.com/b/matt/archive/2008/03/01/understanding-variable-capturing-in-c.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:56:46.080

您的第二个样品与您的第一个样品有相同的问题，但是由于处理的位置，您会看到更少的问题。无法控制 txtboxtest.Text += atPDFNumber.ToString() 何时运行以及线程在运行时是否不中断。如果您制作更大的测试集，您会看到与运行 2 和 3 相同的结果。

您看到的问题称为[Race condition](http://en.wikipedia.org/wiki/Race_condition)。您必须使您的委托线程安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:54:59.517

如果要等待另一个线程，可以使用[Thread.Join()方法。](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)

但我认为问题在于闭包，请阅读更多关于[闭包](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)的信息。

# android - Android GridView 中的图像发生变化。如何？

> ID：12742666
> 
> 赞同：2
> 
> 时间：2012-10-05T08:46:49.033
> 
> 标签：android, image, gridview, dynamic

> 我正在为我的应用程序使用标准的 gridview 源。我面临的问题是，当我在 gridview 中滚动图像时，图像每次都会动态变化，在位置上有错误的图像。以下是我使用的代码供参考......

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Set up an array of the Thumbnail Image ID column we want
    String[] projection = {MediaStore.Images.Thumbnails._ID};
    // Create the cursor pointing to the SDCard
    cursor = managedQuery( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
            projection, // Which columns to return
            null,       // Return all rows
            null,
            MediaStore.Images.Thumbnails.IMAGE_ID);
    // Get the column index of the Thumbnails Image ID
    columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);

    GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            // Sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), ImageSelection.class);
            // passing array index
            i.putExtra("imageIndex_from_Activity", position);
            startActivity(i);

        }
    }); 
```

**> 图像适配器类**

```
 private class ImageAdapter extends BaseAdapter {

    private Context context;

    public ImageAdapter(Context localContext) {
        context = localContext;
    }

    public int getCount() {
        return cursor.getCount();
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView picturesView;
        if (convertView == null) {
            picturesView = new ImageView(context);
            // Move cursor to current position
            cursor.moveToPosition(position);
            // Get the current value for the requested column
            int imageID = cursor.getInt(columnIndex);
            // Set the content of the image based on the provided URI
            picturesView.setImageURI(Uri.withAppendedPath(
                    MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID));
            picturesView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            picturesView.setPadding(5, 5, 5, 5);
            picturesView.setLayoutParams(new GridView.LayoutParams(80, 80));
        }
        else {
            picturesView = (ImageView)convertView;
        }
        return picturesView;
    }
} 
```

> 附上截图， 1.滚动之前 2.向下滚动并再次向上滚动。

![滚动前](../Images/5f6a10da22eee23cdc74746390b92a69.png)

![再次向上滚动时](../Images/33bdb6fea1b54a5276bd6b3e9e329285.png)

> 为什么顺序变了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:11:35.167

您只是在新视图上设置图像。

请执行下列操作：

```
if (convertView == null) {
    picturesView = new ImageView(context);
    picturesView.setScaleType(ImageView.ScaleType.FIT_CENTER);
    picturesView.setPadding(5, 5, 5, 5);
    picturesView.setLayoutParams(new GridView.LayoutParams(80, 80));    
} else {
    picturesView = (ImageView)convertView;
}
// Move cursor to current position
cursor.moveToPosition(position);
// Get the current value for the requested column
int imageID = cursor.getInt(columnIndex);
// Set the content of the image based on the provided URI
picturesView.setImageURI(Uri.withAppendedPath(
MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:07:47.583

您的问题是，当您使用 convertView 时，它会从第一条记录中存储旧数据。转换视图用于避免资源的布局膨胀，这会花费您的时间和内存。您应该使用旧的膨胀视图，但设置新数据。

```
public View getView(int position, View convertView, ViewGroup parent) {  
    ImageView picturesView;  
    if (convertView == null) {  
        picturesView = new ImageView(context);  
    }  
    else {  
        picturesView = (ImageView)convertView;  
    } 
       cursor.moveToPosition(position);  
        // Get the current value for the requested column  
        int imageID = cursor.getInt(columnIndex);  
        // Set the content of the image based on the provided URI  
        picturesView.setImageURI(Uri.withAppendedPath(  
                MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID));  
        picturesView.setScaleType(ImageView.ScaleType.FIT_CENTER);  
        picturesView.setPadding(5, 5, 5, 5);  
        picturesView.setLayoutParams(new GridView.LayoutParams(80, 80));  
    return picturesView;  
} 
```

# java - Java 正则表达式性能：不情愿的量词或字符类？

> ID：12742676
> 
> 赞同：5
> 
> 时间：2012-10-05T08:47:23.553
> 
> 标签：java, regex

其中哪一个性能更高，或者（如果等效）哪个读得更好？我正在尝试匹配一对括号内的所有内容。

```
Pattern p1 = Pattern.compile("\\([^)]*\\)");
Pattern p2 = Pattern.compile("\\(.*?\\)"); 
```

对我来说，第二个读起来更好，但使用了可能令人困惑的不情愿量词，我不确定这是否会导致性能损失。

**编辑**

不要错过表明这更好的答案：

```
Pattern p3 = Pattern.compile("\\([^)]*+\\)"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:59:18.870

`\([^)]*\)`会更快，尽管如果输入很小则不明显。当您使用`[^)]*`所有格时，可能会获得更好的收益：`[^)]*+`。这样，正则表达式引擎将不会跟踪所有字符`[^)]*`匹配，以防它需要回溯（在 的情况下不会发生`[^)]*\)`）。使模式具有所有格会导致正则表达式引擎*不*记得该模式匹配的字符。

同样，这可能并不明显，但是如果您的输入变大（r），我很确定^*`.*?` and之间的差异`[^)]*`小于 and 之间`[^)]*`的差异`[^)]*+`。

^*运行一些基准测试来确定！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:54:18.107

`p2`与非贪婪方式相比，这种方式具有更好的性能，但会导致回溯。

```
Pattern p1 = Pattern.compile("\\([^)]*\\)"); 
```

看看[这篇文章](http://blog.stevenlevithan.com/archives/greedy-lazy-performance)。

# java - 如何解决此错误 (GWT)

> ID：12742680
> 
> 赞同：5
> 
> 时间：2012-10-05T08:47:35.787
> 
> 标签：java, gwt, runtime-error

运行我的应用程序后出现此错误。编译过程中没有错误。此外，没有其他应用程序正在运行。

> 在端口 8888 [WARN] 上启动 Jetty 失败 SelectChannelConnector@127.0.0.1:8888 java.net.BindException：地址已在使用中：在 sun.nio.ch.Net.bind（本机方法）处绑定 sun.nio.ch.ServerSocketChannelImpl .bind(Unknown Source) at sun.nio.ch.ServerSocketAdaptor.bind(Unknown Source) at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:205) 等等...... ...
> 
> 端口 127.0.0.1:8888 已被使用；您可能还有另一个会话处于活动状态

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T08:54:56.937

问题是已经有一个服务器在该端口地址上运行。如果您从 Eclipse 启动 gwt 应用程序，请确保您终止打开的进程。对于调试模式的更改，选择进程堆栈的顶部并停止/终止应用程序进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:52:46.010

其他一些进程正在使用端口 8888。使用 GWT DevMode 参数`-port 8889`（或任何其他适合您的端口），您应该没问题。

您可以使用`netstat -p`（或显示进程名称的操作系统变体）来确定端口 8888 上的内容。

干杯，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T08:58:24.033

抛出异常是因为您试图绑定到已被另一个进程使用的端口。

从命令行使用 netstat -a 将显示打开端口的列表以及正在使用它们的进程。比你能杀死它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:53:59.893

这意味着指定的端口号已被其他应用程序使用。尝试更改端点发布者的端口号。

例如像这样使用

```
 127.0.0.0:8889 
```

我们可以使用类似的端口来避免绑定异常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T08:54:28.427

在开发模式窗口中，确保停止并关闭所有启动如果您找不到开发模式，请尝试窗口>显示视图>其他。搜索开发模式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T21:33:14.617

作为附录，当我知道没有另一个进程在运行时，我遇到了这个问题。我还使用 -bindAddress 将我的应用程序公开给其他主机。当我的 DHCP 租约到期时，我的机器获得了不同的 IP。GWT 将无法绑定到旧地址报告为“地址已在使用中”。

显然我是在诱惑命运，但我仍然想发布这个以防它绊倒别人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-20T16:17:36.057

简单的。打开您的运行配置，选择服务器，然后选择自动选择未使用的端口。申请，好的

# django - manage.py syncdb 无法创建表，因为它们不存在

> ID：12742681
> 
> 赞同：2
> 
> 时间：2012-10-05T08:47:39.837
> 
> 标签：django

我有一个奇怪的行为，`syncdb`我知道它在过去有效。自上次执行以来，`syncdb`我对模型进行了更改，但更改很少，主要是在模型中添加了列。`syncdb`现在无法创建表，因为它还不存在。我真的不明白为什么。

我的 django 项目有两个包。我调用的第一个包`remusdb`或多或少是一个`django.db.models.Model`用于数据库通信的独立应用程序。对于使用我的`remusdb`包的应用程序，我编写了一个示例`settings.py`文件，看起来像

```
REMUSDB_DB_ID   = "remusdb"
DATABASES = {
        'default': {
            # django.db needs a "default" database
            # make django.db happy.
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME':   '/dev/null',
        },

        REMUSDB_DB_ID: {
            'ENGINE': 'django.db.backends.postgresql_psycopg2',
            'NAME':   'remusdb',
            'OPTIONS': { 'autocommit': True },
        }
}
DATABASE_ROUTERS= [ "remusdb.RemusDBRouter" ]
SECRET_KEY = "Make.here.something.random"
INSTALLED_APPS = (
        'remusdb'
) 
```

这个想法是这个应用程序可以确定一个具有自定义名称的数据库，如果您包含`remusdb`在 django projetc 中，那么您不需要通过`remusdb`在默认数据库中创建 -databases 来混淆数据库。因此，我还编写了一个数据库路由器，`REMUSDB_DB_ID`每当您使用来自`remusdb.models`.

这作为一个独立的应用程序非常有用，我没有任何问题。我什至创建了运行命令的小脚本，`manage.py`如`syncdb`,`shell`和`sqlall`.

```
#!/usr/bin/env python
# filename: remusdb_syncdb

import sys
import os
import re

if __name__ == "__main__":
    if len(sys.argv) != 2:
        t  = "Usage: %s settings-unix-path\n" % sys.argv[0]
        t += "\n"
        t += "settings-unix-path       The path of the settings module\n"
        t += "                         in Unix-path format.\n\n"
        t += "NOTE: DO NOT USE %s if you are using RemusDB\n" % sys.argv[0]
        t += "inside of a Django application. In this case please call\n"
        t += "python manage.py syncdb && \\\n"
        t += "    python manage.py syncdb --database=<your database name>"
        sys.exit(t)

    settings_list = sys.argv[1].split("/")
    mod_settings  = settings_list[-1]

    del settings_list[-1]
    settings_path = '/'.join(settings_list)
    if settings_path == "":
        settings_path = "."

    mod_settings = re.sub(r'\.py$', "", mod_settings)

    sys.path.append(settings_path)

    os.environ.setdefault("DJANGO_SETTINGS_MODULE", mod_settings)
    from django.core.management import execute_from_command_line
    from django.conf import settings

    argv = [sys.argv[0], "syncdb", "--database=%s" % settings.REMUSDB_DB_ID]
    execute_from_command_line(argv) 
```

调用`remusdb_syncdb <path to settings>/settings.py`数据库被创建，我可以使用我的应用程序。

现在我想`remusdb`在我的 django 项目中使用它，它有自己的数据库，我不想与`remusdb`. 我必须`settings.py`根据上面的示例更改文件，它看起来像这样：

```
... the usual stuff
REMUSDB_DB_ID   = "remusdb"
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'remusweb',                     # Or path to database file if using sqlite3.
    },

    REMUSDB_DB_ID: {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'
        'NAME':   'remusdbdev',                             # Name of DB or path if sqlite is used as engine
        'OPTIONS': { 'autocommit': True },
    }
}
DATABASE_ROUTERS= [ "remusdb.RemusDBRouter" ]
...
INSTALLED_APPS = (
    ...
    'remusdb',
    'monitor'
)
... 
```

当我第一次添加`remusdb`作为 django 项目的依赖项时，我创建了数据库`createdb remusdbdev`并执行，然后创建`python manage.py syncdb --database=remusdb`了表`remusdbdev`。

在开发 django 应用程序两个月后，我不得不在其中的一些表中添加列，`remusdb`并且我不想自己执行 sql 代码。所以我制作`dropdb remusdbdev`并运行`python manage.py syncdb --database=remusdb`现在生成这个错误：

```
 File "/home/shaoran/devpython/lib/python2.6/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation "remus_process" does not exist
LINE 1: ..."."last_stop", "remus_process"."last_change" FROM "remus_pro... 
```

好吧，当然它还不存在，关键`syncdb`是它创建了表。有趣的是，如果我`remusdb_syncdb`使用 django 的设置执行（从我的独立应用程序）（我必须暂时删除 in 中的`monitor`行`INSTALLED_APPS`）然后`syncdb`创建表。之后`python manage.py syncdb`不再失败。

我在这里错过了什么吗？为什么我过去能够执行`manage.py syncdb --database=remusdb`，现在却出现这个奇怪的错误？

* * *

在提交之前阅读我的问题时，我想到了我是如何开始 django 项目的。我创建了 django 项目并添加了工作`settings.py`所需的更改`remusdb`。*然后*我`syncdb`第一次执行。现在我有了第二个包，`monitor`它有视图和模板。所以我再次删除了数据库，再次创建它，这次我暂时`'monitor'`从`INSTALLED_APPS`. 然后我执行`python manage.py syncdb --database=remusdb`并运行没有问题。下次我重复这些步骤但我没有暂时删除该`'monitor'`行并返回错误。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:06:22.220

我认为你也应该尝试在上面`'monitor'`移动。它可能会解决问题。`'remusdb'``INSTALLED_APPS`

IE

```
 INSTALLED_APPS = (
        ...
        'monitor',
        'remusdb'
    ) 
```

# objective-c - 不知何故 NSUserdefaults 保存不起作用

> ID：12742684
> 
> 赞同：0
> 
> 时间：2012-10-05T08:47:49.937
> 
> 标签：objective-c, xcode

在`class 1`我保存`int`转换为 a`string`时，在`class 2`我尝试加载此字符串时，由于某种原因它不起作用，当我将从文本框中取出的字符串写入`loadString`文本框时`class 2`，文本框保持为空。当我在`class 1`文本框中做同样的事情时变成“1”。

1.m级

```
- (void)viewDidLoad
{
[super viewDidLoad];
countForString = 1;
saveString = [[NSString alloc]initWithFormat:@"%i", countForString];
[self SaveTextBox:saveString :@"Number"];
}

-(void)SaveTextBox:(NSString*)string :(NSString*)stringsave
{
NSString *savestring = string;
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:savestring forKey:stringsave];
[defaults synchronize];
} 
```

2.m级

```
- (void)viewDidLoad
{
[super viewDidLoad];
[self loadString:@"Number":teamString];
tbTeamPlayer.text = teamString;
}

-(void)loadString:(NSString *)location:(NSString *)saveInString
{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadstring = [defaults objectForKey:location];
saveInString = loadstring;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:55:18.160

您确实需要处理命名变量，并使用参数命名。它是 ObjC 中最好的功能之一。

据我了解，您的问题是您认为这会`saveInString = loadstring;`返回一些东西。它不是。当方法被调用时，变量的指针被复制。

对于返回值，使用返回值。

我强烈建议从一本关于 Objective C 的好书开始，因为这段代码在语言方面存在很大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:52:19.653

`loadString:location:`不会改变 的值`saveInString`，它所做的只是覆盖局部变量。您需要返回字符串并设置该值，例如

```
tbTeamPlayer.text = [self loadString:someLocation]; 
```

并将 loadString 更改为：

```
- (NSString *)loadString:(NSString *)location
{
    return [[NSUserDefaults standardUserDefaults] stringForKey:location];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:58:58.863

在您的 loadString 方法中，创建了**saveInString的****新引用**。因此它**不能反映对原始参考的任何新修改**。

 ****请参阅[nsstring-returns-empty-from-a-return-method](https://stackoverflow.com/questions/12636127/nsstring-returns-empty-from-a-return-method/12636326#12636326)链接。****

# asp.net-mvc - 如何在 MVC 中停止多个路由匹配？

> ID：12742688
> 
> 赞同：3
> 
> 时间：2012-10-05T08:48:07.213
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我是 MVC 新手，但我正在尝试创建 MVC Web API，但我遇到了路由问题。

我正在尝试使用以下 URL 模式：

```
/api/venue/1999          // doesn't work
/api/venue/1999/images/  // works 
```

第二个 URL 模式工作正常，但如果我尝试访问第一个，我会收到一条错误消息：

> 找到与请求匹配的多个操作： VenuefinderWebAPI.Controllers.VenueController 类型上的 VenuefinderWebAPI.Models.Venue Get(Int32) System.String[] Images(Int32) 类型 VenuefinderWebAPI.Controllers.VenueController

我不确定是我的路由错误（多个匹配）还是我的控制器类中的某些东西。如何解决这个问题？

在我的 webApiConfig 我有这个：

```
config.Routes.MapHttpRoute(
    name: "VenueImages",
    routeTemplate: "api/venue/{venueID}/images/",
    defaults: new { controller="Venue", action = "images" }
);

config.Routes.MapHttpRoute(
    name: "VenueDefault",
    routeTemplate: "api/venue/{venueID}",
    defaults: new { controller = "Venue" }
); 
```

VenueController.cs 有：

```
// GET api/venue/5
public Venue Get(int venueID)
{
  // code
}

and 
[HttpGet]
[ActionName("images")]
string[] Images(int venueID)
{
   // code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:31:35.813

您可以尝试添加一个默认操作，如下所示：

```
config.Routes.MapHttpRoute(
    name: "VenueDefault",
    routeTemplate: "api/venue/{venueID}",
    defaults: new { controller = "Venue", action = "Venue" },
    new { venueID = @"\d+" }
); 
```

请注意，我还在场地 ID 上添加了一个约束，因此它只匹配整数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:00:23.960

试试这个...

更改您的场地控制器：

```
public string Get(int venueID)
{
    // code
}

[HttpGet]
public string[] Images(int venueID)
{
    // code
} 
```

改变你的路线：

```
config.Routes.MapHttpRoute(
    name: "VenueDefault",
    routeTemplate: "api/venue/{venueID}/{action}",
    defaults: new { controller = "Venue", action = "get" },
    constraints: new { venueID = @"\d+" }
); 
```

*添加了迈克对路线的约束。

--- 上面做了什么 ---
路由匹配 url，其中的venueID 是一个数字，除非另有说明，否则 action 方法默认为 get 方法。

请记住，操作方法是您在控制器中的方法。

# c# - TextBlock 中的 C# 超链接：单击它时没有任何反应

> ID：12742690
> 
> 赞同：23
> 
> 时间：2012-10-05T08:48:14.057
> 
> 标签：c#, wpf, hyperlink, textblock, navigateuri

在我的 C# 独立应用程序中，我想让用户单击可以启动他们喜欢的浏览器的链接。

```
System.Windows.Controls.TextBlock text = new TextBlock();
Run run = new Run("Link Text");

Hyperlink link = new Hyperlink(run);
link.NavigateUri = new Uri("http://w3.org");
text.Inlines.Add(link); 
```

链接显示正确。

当我将鼠标移到它上面时，链接变为红色。

问题：当我点击它时，什么也没有发生。

我是不是忘记了什么？我是否需要实现某种方法才能真正让链接打开？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T08:59:48.107

您需要处理超链接的`RequestNavigate`事件。这是一个快速的方法：

```
link.RequestNavigate += (sender, e) =>
{
    System.Diagnostics.Process.Start(e.Uri.ToString());
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T09:01:35.083

您正在处理“Hyperlink.RequestNavigate”事件吗？当用户在 WPF 窗口中单击超链接时，它不会自动打开具有在其 NavigateUri 属性中指定的 URI 的浏览器。

在您的代码隐藏中，您可以执行以下操作：

```
link.RequestNavigate += LinkOnRequestNavigate;

private void LinkOnRequestNavigate(object sender, RequestNavigateEventArgs e)
{
    System.Diagnostics.Process.Start(e.Uri.ToString());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-04T15:19:47.140

您可以在 App.xaml.cs 中创建一个全局超链接处理程序

```
protected override void OnStartup(StartupEventArgs e) {
    EventManager.RegisterClassHandler(
        typeof(System.Windows.Documents.Hyperlink),
        System.Windows.Documents.Hyperlink.RequestNavigateEvent,
        new System.Windows.Navigation.RequestNavigateEventHandler(
            (sender, en) => Process.Start(new ProcessStartInfo(
                en.Uri.ToString()
            ) { UseShellExecute = true })
        )
    );
    base.OnStartup(e);
} 
```

这假定所有 NavigateUri 属性都引用您要启动的内容，但您始终可以让处理程序处理边缘情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-16T21:57:06.657

对于 .Net Core 中的用户，您执行此操作的方式已经改变。基于这个[答案](https://stackoverflow.com/a/43232486/10227808)和[这个](https://stackoverflow.com/a/66066710/10227808)。

```
link.RequestNavigate += (sender, e) =>
{
    var url = e.Uri.ToString();
    Process.Start(new ProcessStartInfo(url)
    { 
        UseShellExecute = true 
    });
}; 
```

# node.js - 基于环境覆盖 express/node 应用程序的 config.js 变量

> ID：12742692
> 
> 赞同：2
> 
> 时间：2012-10-05T08:48:22.900
> 
> 标签：node.js, configuration, express

我有一个 config.js，其中设置了所有变量。

我想创建一个 config.global.js 并让 config.production.js 覆盖其中一些，而 config.development.js 覆盖其中一些。

这是一个示例 config.development.js：

```
var config = {};    

config.env = 'development';
config.hostname = 'example.dev';
config.appname = 'Example.com';
config.site_url = 'http://example.dev:8080';

module.exports = config; 
```

我想我可以在 config.development.js （和 config.production.js ）中这样做来覆盖：

```
var config = require('config.global.js');

config.env = 'development';
config.hostname = 'example.dev';
config.appname = 'Example.com';
config.site_url = 'http://example.dev:8080';

module.exports = config; 
```

然后在 app.js 中，我可以这样做：

```
var cfg = require('config.' + ( process.ENV.APP_ENV || 'development' ) + '.js');
app.set('domain', cfg.hostname); 
```

还有哪些其他方法可以定义应用程序配置变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:11:41.533

为什么不使用一个包含所有环境设置的 JSON 文件。当您引入更多环境时，您的方法可能无法很好地扩展。您可以通过查找 NODE_ENV 属性并使用它从您的环境中选择一组属性来获得正确的一组属性。

前段时间，我在[Bootstraping a Node.js App for Dev/Prod Environment](http://himanshu.gilani.info/blog/2012/09/26/bootstraping-a-node-dot-js-app-for-dev-slash-prod-environment/)中写了一篇关于它的博客。具体操作方法请阅读“**在测试期间模拟生产环境**”的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T02:18:51.463

如果您遵循 hemanshu 的建议并使用单个配置文件，则可以使用原型继承来避免重复：

```
var config = {};    

config.base = {};
config.base.env = 'development';
config.base.hostname = 'example.dev';
config.base.appname = 'Example.com';
config.base.site_url = 'http://example.dev:8080';

config.development = Object.create(config.base);
config.development.debugLevel = 'high';
...

config.production = Object.create(config.base);
config.production.debugLevel = 'low';
...

module.exports = config; 
```

`Object.create()`是一个 ES5 函数，它使用指定的原型创建一个新的空对象。

# java - 在 @RequestMapping 的值中使用或不使用前导斜线。需要官方文档或指向 Spring 源代码？

> ID：12742695
> 
> 赞同：32
> 
> 时间：2012-10-05T08:48:39.667
> 
> 标签：java, spring, spring-mvc

我参与的项目中我发现了以下内容：

```
@RequestMapping(value = "事件/...");
@RequestMapping(value = "/events/...");

```

（在方法级别注释之前有和没有斜线）。

我执行搜索：

```
站点：http://static.springsource.org/spring/docs/3.1.x 斜线

```

并阅读这些链接：

*   [http://forum.springsource.org/showthread.php?130753-Various-Spring-MVC-RequestMapping-configuration-questions](http://forum.springsource.org/showthread.php?130753-Various-Spring-MVC-RequestMapping-configuration-questions)
*   [各种 Spring MVC RequestMapping 配置问题](https://stackoverflow.com/questions/12712232/various-spring-mvc-requestmapping-configuration-questions)
*   [@RequestMapping 中预斜线的处理](https://stackoverflow.com/questions/6984474/handling-of-pre-slash-in-requestmapping)
*   [https://www.rfc-editor.org/rfc/rfc6570](https://www.rfc-editor.org/rfc/rfc6570)

但是这些来源都没有回答为什么允许跳过斜线。官方 Spring 文档总是显示带有斜杠的示例......

需要指向官方文档或 Spring 资源。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-05T10:08:53.677

没关系：如果路径不是以 an 开头，`/`那么 Spring (DefaultAnnotationHandlerMapping) 会添加它。

请参见`String[] determineUrlsForHandler(String beanName)`Class `DefaultAnnotationHandlerMapping`line 122 (Spring 3.1.2) 的方法（即针对类级别）

```
String[] methodLevelPatterns = determineUrlsForHandlerMethods(handlerType, true);
for (String typeLevelPattern : typeLevelPatterns) {
    if (!typeLevelPattern.startsWith("/")) {
            typeLevelPattern = "/" + typeLevelPattern;
    } 
```

请参见`String[] determineUrlsForHandler(Class<?> handlerType, final boolean hasTypeLevelMapping))`Class `DefaultAnnotationHandlerMapping`line 182 (Spring 3.1.2) 的方法（即方法级别）

```
String[] mappedPatterns = mapping.value();
if (mappedPatterns.length > 0) {
for (String mappedPattern : mappedPatterns) {
    if (!hasTypeLevelMapping && !mappedPattern.startsWith("/")) {
        mappedPattern = "/" + mappedPattern;
    } 
```

# java - 在卡片布局内定位组件

> ID：12742696
> 
> 赞同：3
> 
> 时间：2012-10-05T08:48:43.610
> 
> 标签：java, swing, awt, layout-manager, cardlayout

我有一个主框架，我想使用卡片布局在中心位置显示我的 NewUser 类的对象。这是我的主类

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutDemo implements ItemListener {
JPanel cards; //a panel that uses CardLayout
final static String BUTTONPANEL = "Card with JButtons";
final static String TEXTPANEL = "Card with JTextField";

public void addComponentToPane(Container pane) {
    //Put the JComboBox in a JPanel to get a nicer look.
    JPanel comboBoxPane = new JPanel(); //use FlowLayout
    String comboBoxItems[] = { BUTTONPANEL, TEXTPANEL };
    JComboBox cb = new JComboBox(comboBoxItems);
    cb.setEditable(false);
    cb.addItemListener(this);
    comboBoxPane.add(cb);

    //Create the "cards".
    NewUser newUser = new NewUser();

    JPanel card1 = new JPanel();
    card1.add(new JButton("Button 1"));
    card1.add(new JButton("Button 2"));
    card1.add(new JButton("Button 3"));

    JPanel card2 = new NewUser();

    //Create the panel that contains the "cards".
    cards = new JPanel(new CardLayout());
    cards.add(card1, BUTTONPANEL);
    cards.add(card2, TEXTPANEL);

    pane.add(comboBoxPane, BorderLayout.PAGE_START);
    pane.add(cards, BorderLayout.CENTER);
}

public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.show(cards, (String)evt.getItem());
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event dispatch thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("CardLayoutDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    CardLayoutDemo demo = new CardLayoutDemo();
    demo.addComponentToPane(frame.getContentPane());

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    /* Use an appropriate Look and Feel */
    try {
        //UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
    } catch (UnsupportedLookAndFeelException ex) {
        ex.printStackTrace();
    } catch (IllegalAccessException ex) {
        ex.printStackTrace();
    } catch (InstantiationException ex) {
        ex.printStackTrace();
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
    }
    /* Turn off metal's use of bold fonts */
    UIManager.put("swing.boldMetal", Boolean.FALSE);

    //Schedule a job for the event dispatch thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
} 
```

这是我的 NewUser 类

```
import java.awt.Dimension;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

public class NewUser extends JPanel {

private static final long serialVersionUID = 1L;
private JLabel lblUsername, lblPassword, lblConfirmMsg;
private JPasswordField txtPassword, txtCPassword;
private JTextField txtUsername, txtName;
private JButton btnSave, btnCancel;
JPanel panelNewUser;

Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();

public NewUser() {

    this.setSize(350, 270);
    this.setLocation((screen.width - 500) / 2, ((screen.height - 350) / 2));
    this.setLayout(null);
    panelNewUser= this;
    lblUsername = new JLabel("Username");
    lblPassword = new JLabel("Password");
    lblConfirmMsg = new JLabel("Re-enter Password");
    txtName = new JTextField();

    txtUsername = new JTextField();
    txtPassword = new JPasswordField();
    txtCPassword = new JPasswordField();
    btnSave = new JButton("Save");
    btnCancel = new JButton("Cancel");

    lblUsername.setBounds(30, 30, 100, 25);
    this.add(lblUsername);
    txtUsername.setBounds(150, 30, 150, 25);
    this.add(txtUsername);
    lblPassword.setBounds(30, 70, 100, 25);
    this.add(lblPassword);
    txtPassword.setBounds(150, 70, 150, 25);
    this.add(txtPassword);
    lblConfirmMsg.setBounds(30, 110, 110, 25);
    this.add(lblConfirmMsg);
    txtCPassword.setBounds(150, 110, 150, 25);
    this.add(txtCPassword);
    btnSave.setBounds(60, 155, 100, 25);
    this.add(btnSave);
    btnCancel.setBounds(180, 155, 100, 25);
    this.add(btnCancel);

    txtName.addKeyListener(new KeyAdapter() {

        public void keyTyped(KeyEvent e) {
            char c = e.getKeyChar();
            if (!(Character.isLetter(c) || (c == KeyEvent.VK_BACK_SPACE)
                    || (c == KeyEvent.VK_SPACE) || (c == KeyEvent.VK_DELETE))) {
                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Invalid Character",
                        "ERROR", JOptionPane.ERROR_MESSAGE);
                e.consume();
            }
        }
    });
    txtUsername.addKeyListener(new KeyAdapter() {

        public void keyTyped(KeyEvent e) {
            char c = e.getKeyChar();
            if (!(Character.isLetter(c) || (c == KeyEvent.VK_BACK_SPACE)
                    || (Character.isDigit(c)) || (c == KeyEvent.VK_DELETE))) {
                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Invalid Character",
                        "ERROR", JOptionPane.ERROR_MESSAGE);
                e.consume();
            }
        }
    });
    btnCancel.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(ActionEvent e) {
            resetField();
            panelNewUser.setVisible(false);
        System.out.println("hello");
        }
    });
    btnSave.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(ActionEvent e) {

            //DatabaseHelper databaseHelper = new DatabaseHelper();
            if (txtUsername.getText() == null
                    || txtUsername.getText().equals("")) {
                JOptionPane.showMessageDialog(null, "Enter Username",
                        "Missing fields", JOptionPane.DEFAULT_OPTION);
                txtUsername.requestFocus();
                return;
            }
            if (txtPassword.getPassword() == null
                    || txtPassword.getPassword().equals("")) {
                JOptionPane.showMessageDialog(null, "Enter Password",
                        "Missing fields", JOptionPane.DEFAULT_OPTION);
                txtPassword.requestFocus();
                return;
            }
            if (txtCPassword.getPassword() == null
                    || txtCPassword.getPassword().equals("")) {
                JOptionPane.showMessageDialog(null,
                        "Confirm your password", "Missing fields",
                        JOptionPane.DEFAULT_OPTION);
                txtCPassword.requestFocus();
                return;
            }
            if (!txtPassword.getText()
                    .equals(txtPassword.getText())) {
                JOptionPane.showMessageDialog(null,
                        "Passwords do not match.", "ERROR",
                        JOptionPane.DEFAULT_OPTION);
                txtCPassword.requestFocus();
                return;
            }

                if (true) {
                    JOptionPane.showMessageDialog(null,
                            "A new user is created", "SUCCESS",
                            JOptionPane.DEFAULT_OPTION);
                    resetField();
                }

        }
    });

    }// constructor closed

//action listener

public void resetField()
{

    txtUsername.setText("");
    txtCPassword.setText("");
    txtPassword.setText("");
}
}// class closed 
```

我希望 NewUser 的对象显示在主类的中心位置

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:33:06.320

欢迎来到图形用户界面设计的世界，字体大小、屏幕分辨率和 DPI 让您开发出令人惊叹的令人惊叹的 UI，永远无法与最终用户相提并论……

现在，你有两个选择。用你的余生来尝试遇到每一个奇怪的边缘情况，在这个过程中重新发明轮子，一个以[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)的名义为你提供的轮子（对不起，如果听起来是虚构的，但大多数人们在 Swing 中的问题可以通过理解布局管理器来解决：P）。

您可能想通读[Using Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)和[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

![在此处输入图像描述](../Images/b1c5b17ec52c28bc5d764b47cd0d50db.png)

```
public class TestLayout02 {

    public static void main(String[] args) {
        new TestLayout02();
    }

    public TestLayout02() {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                /* Use an appropriate Look and Feel */
                try {
                    //UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
                    UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
                } catch (UnsupportedLookAndFeelException ex) {
                    ex.printStackTrace();
                } catch (IllegalAccessException ex) {
                    ex.printStackTrace();
                } catch (InstantiationException ex) {
                    ex.printStackTrace();
                } catch (ClassNotFoundException ex) {
                    ex.printStackTrace();
                }
                /* Turn off metal's use of bold fonts */
                UIManager.put("swing.boldMetal", Boolean.FALSE);

                //Schedule a job for the event dispatch thread:
                //creating and showing this application's GUI.
                createAndShowGUI();
            }
        });
    }

    public class CardLayoutDemo implements ItemListener {

        JPanel cards; //a panel that uses CardLayout
        final static String BUTTONPANEL = "Card with JButtons";
        final static String TEXTPANEL = "Card with JTextField";

        public void addComponentToPane(Container pane) {
            //Put the JComboBox in a JPanel to get a nicer look.
            JPanel comboBoxPane = new JPanel(); //use FlowLayout
            String comboBoxItems[] = {BUTTONPANEL, TEXTPANEL};
            JComboBox cb = new JComboBox(comboBoxItems);
            cb.setEditable(false);
            cb.addItemListener(this);
            comboBoxPane.add(cb);

            //Create the "cards".
            NewUser newUser = new NewUser();

            JPanel card1 = new JPanel();
            card1.add(new JButton("Button 1"));
            card1.add(new JButton("Button 2"));
            card1.add(new JButton("Button 3"));

            JPanel card2 = new NewUser();

            //Create the panel that contains the "cards".
            cards = new JPanel(new CardLayout());
            cards.add(card1, BUTTONPANEL);
            cards.add(card2, TEXTPANEL);

            pane.add(comboBoxPane, BorderLayout.PAGE_START);
            pane.add(cards, BorderLayout.CENTER);
        }

        public void itemStateChanged(ItemEvent evt) {
            CardLayout cl = (CardLayout) (cards.getLayout());
            cl.show(cards, (String) evt.getItem());
        }
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event dispatch thread.
     */
    protected void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("CardLayoutDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        CardLayoutDemo demo = new CardLayoutDemo();
        demo.addComponentToPane(frame.getContentPane());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public class NewUser extends JPanel {

        private static final long serialVersionUID = 1L;
        private JLabel lblUsername, lblPassword, lblConfirmMsg;
        private JPasswordField txtPassword, txtCPassword;
        private JTextField txtUsername, txtName;
        private JButton btnSave, btnCancel;
        JPanel panelNewUser;
        Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();

        public NewUser() {

//            this.setSize(350, 270);
//            this.setLocation((screen.width - 500) / 2, ((screen.height - 350) / 2));
//            this.setLayout(null);

            setLayout(new GridBagLayout());

            panelNewUser = this;
            lblUsername = new JLabel("Username");
            lblPassword = new JLabel("Password");
            lblConfirmMsg = new JLabel("Re-enter Password");
            txtName = new JTextField();

            txtUsername = new JTextField(12);
            txtPassword = new JPasswordField(12);
            txtCPassword = new JPasswordField(12);
            btnSave = new JButton("Save");
            btnCancel = new JButton("Cancel");

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.WEST;

//            lblUsername.setBounds(30, 30, 100, 25);
            this.add(lblUsername, gbc);
//            txtUsername.setBounds(150, 30, 150, 25);
            gbc.gridx++;
            this.add(txtUsername, gbc);
//            lblPassword.setBounds(30, 70, 100, 25);
            gbc.gridx = 0;
            gbc.gridy++;
            this.add(lblPassword, gbc);
//            txtPassword.setBounds(150, 70, 150, 25);
            gbc.gridx++;
            this.add(txtPassword, gbc);
//            lblConfirmMsg.setBounds(30, 110, 110, 25);
            gbc.gridx = 0;
            gbc.gridy++;
            this.add(lblConfirmMsg, gbc);
//            txtCPassword.setBounds(150, 110, 150, 25);
            gbc.gridx++;
            this.add(txtCPassword, gbc);
//            btnSave.setBounds(60, 155, 100, 25);
            gbc.gridx = 0;
            gbc.gridy++;
            gbc.anchor = GridBagConstraints.CENTER;
            this.add(btnSave, gbc);
//            btnCancel.setBounds(180, 155, 100, 25);
            gbc.gridx++;
            this.add(btnCancel, gbc);

            // This is a bad idea, use a DocumentFilter
            txtName.addKeyListener(new KeyAdapter() {
                public void keyTyped(KeyEvent e) {
                    char c = e.getKeyChar();
                    if (!(Character.isLetter(c) || (c == KeyEvent.VK_BACK_SPACE)
                                    || (c == KeyEvent.VK_SPACE) || (c == KeyEvent.VK_DELETE))) {
                        getToolkit().beep();
                        JOptionPane.showMessageDialog(null, "Invalid Character",
                                        "ERROR", JOptionPane.ERROR_MESSAGE);
                        e.consume();
                    }
                }
            });
            // This is a bad idea, use a DocumentFilter
            txtUsername.addKeyListener(new KeyAdapter() {
                public void keyTyped(KeyEvent e) {
                    char c = e.getKeyChar();
                    if (!(Character.isLetter(c) || (c == KeyEvent.VK_BACK_SPACE)
                                    || (Character.isDigit(c)) || (c == KeyEvent.VK_DELETE))) {
                        getToolkit().beep();
                        JOptionPane.showMessageDialog(null, "Invalid Character",
                                        "ERROR", JOptionPane.ERROR_MESSAGE);
                        e.consume();
                    }
                }
            });
            btnCancel.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    resetField();
                    panelNewUser.setVisible(false);
                    System.out.println("hello");
                }
            });
            btnSave.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(ActionEvent e) {

                    //DatabaseHelper databaseHelper = new DatabaseHelper();
                    if (txtUsername.getText() == null
                                    || txtUsername.getText().equals("")) {
                        JOptionPane.showMessageDialog(null, "Enter Username",
                                        "Missing fields", JOptionPane.DEFAULT_OPTION);
                        txtUsername.requestFocus();
                        return;
                    }
                    if (txtPassword.getPassword() == null
                                    || txtPassword.getPassword().equals("")) {
                        JOptionPane.showMessageDialog(null, "Enter Password",
                                        "Missing fields", JOptionPane.DEFAULT_OPTION);
                        txtPassword.requestFocus();
                        return;
                    }
                    if (txtCPassword.getPassword() == null
                                    || txtCPassword.getPassword().equals("")) {
                        JOptionPane.showMessageDialog(null,
                                        "Confirm your password", "Missing fields",
                                        JOptionPane.DEFAULT_OPTION);
                        txtCPassword.requestFocus();
                        return;
                    }
                    if (!txtPassword.getText()
                                    .equals(txtPassword.getText())) {
                        JOptionPane.showMessageDialog(null,
                                        "Passwords do not match.", "ERROR",
                                        JOptionPane.DEFAULT_OPTION);
                        txtCPassword.requestFocus();
                        return;
                    }

                    if (true) {
                        JOptionPane.showMessageDialog(null,
                                        "A new user is created", "SUCCESS",
                                        JOptionPane.DEFAULT_OPTION);
                        resetField();
                    }

                }
            });

        }// constructor closed

//action listener
        public void resetField() {

            txtUsername.setText("");
            txtCPassword.setText("");
            txtPassword.setText("");
        }
    }// class closed
} 
```

您可能还想通读[DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)。

如果您更喜欢手动操作，则需要附加一个`ComponentListener`并监视`componentResized`事件并再次重新布局所有组件。

您还需要查看[FontMetrics](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html)，以便正确考虑系统之间字体大小的差异......

# apache-flex - SharedObjectBean（Swiz 框架）的客户端持久性问题

> ID：12742704
> 
> 赞同：1
> 
> 时间：2012-10-05T08:49:07.590
> 
> 标签：apache-flex, swiz

我在我的 flex 应用程序中使用 Swiz 框架。我正在使用 SharedObjectBean 进行客户端持久性。它工作正常，但问题是当我关闭浏览器并再次重新启动应用程序时，客户端持久性不起作用。保存会话时，在 AppData 文件夹中创建了一个扩展名为 .sol 的文件。但是当我关闭浏览器时，该文件将被删除。

有人可以帮助我在关闭浏览器后让客户端持久性地重新启动应用程序吗？

# java - 用于类鱿鱼文件系统分层数据结构的 Java API

> ID：12742713
> 
> 赞同：3
> 
> 时间：2012-10-05T08:49:33.340
> 
> 标签：java, data-structures, filesystems, squid

是否有任何Java系统（API）可以提交“文档”（二进制内容）并将其存储在分层结构的文件系统中，就像squid（Web代理）存储缓存资源一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:32:58.953

[Apache 的 JackRabbit 是你所追求的吗？](http://jackrabbit.apache.org/)

# utf-8 - windows-1250转utf8时避免双重转换

> ID：12742717
> 
> 赞同：1
> 
> 时间：2012-10-05T08:49:41.417
> 
> 标签：utf-8, iconv

> **可能重复：**
> [如何在只有部分错误的编码之间转换文件？](https://stackoverflow.com/questions/12726517/how-do-i-convert-files-between-encodings-where-only-some-of-them-are-wrong)

我使用以下命令将文件夹中的 .srt 文件从 windows-1250 转换为 utf-8

```
for /f "delims=" %%a IN (' dir C:\utf_check\*.srt /b /s ') do %iconv% -s -f windows-1250 -t utf-8 < %%a > %%a.txt 
```

但是我有一个问题，如果文件已经是 utf-8 iconv 打破插入奇怪字符的文件。有没有办法先检测是utf-8还是ascii然后转换它？我尝试了翻转，enca，encov，重新编码但没有成功。

我使用的是 Windows 2003 服务器，我也安装了 cygwin，也许这会有所帮助。

例如：这是在 utf-8 *Aşezaţi-vă 中找到的文本。* 这是 iconv 再次转换*AĹźezaĹŁi-vÄ 之后的文本。*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:57:58.610

windows-1250 编码中的任何合理文本都不会是有效的 utf-8。因为 utf-8 中表示超出 ASCII 范围的字符的字节对应于 windows-1250 中没有意义的字符序列。因此，您需要首先检查文件是否为有效的 utf-8，如果不是，则进行转换。

您可以使用事实，如果 iconv 无法进行转换，则会失败（错误级别为 1）。因此，您首先运行`iconv -f utf-8 -t utf-8`，如果失败，请运行`iconv -f windows-1250 -t utf-8`.

*请注意，这仅适用于确定某些东西*是 utf-8 还是旧编码，但您无法区分各种旧编码，因为对于所有 windows-any 编码，有效字符的范围是相同或大部分相同，所以你d 必须做一些更高级的启发式方法，可能涉及拼写检查。

# c++ - C++ #pragma 预处理器能否/应该驻留在函数中

> ID：12742725
> 
> 赞同：0
> 
> 时间：2012-10-05T08:50:16.013
> 
> 标签：c++, winapi, linker, pragma, common-controls

简而言之，我想制作一个嵌入视觉样式清单和链接到`ComCtl32.lib`版本 6（如果可用）的函数。这基本上是我希望做的：

```
void InitVivify() {
    // Embed visual style XML manifest
    #pragma comment(linker,                           \
        "\"/manifestdependency:type='Win32'"          \
        "   name='Microsoft.Windows.Common-Controls'" \
        "   version='6.0.0.0'"                        \
        "   processorArchitecture='*'"                \
        "   publicKeyToken='6595b64144ccf1df'"        \
        "   language='*'\""                           \
    )

    // Link common controls library
    #pragma comment(lib, "ComCtl32.lib")

    // Initialize controls used
    INITCOMMONCONTROLSEX InitCtrlEx;
    InitCtrlEx.dwSize = sizeof(INITCOMMONCONTROLSEX);
    InitCtrlEx.dwICC = ICC_LISTVIEW_CLASSES | ICC_TAB_CLASSES | ICC_USEREX_CLASSES;
    InitCommonControlsEx(&InitCtrlEx);
} 
```

我意识到这可能不是好的做法，但它有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:56:12.310

Pragma 指令是预处理器指令。
它们导致实现以实现定义的方式运行。
所以它是有效的，但不被鼓励。

C++11 标准：

**16.6 Pragma 指令 [cpp.pragma]**

> 1 形式的预处理指令
> 
> ```
> # pragma pp-tokensopt new-line 
> ```
> 
> 导致实现以实现定义的方式运行。该行为可能会导致翻译失败或导致翻译器或生成的程序以不合格的方式运行。任何未被实现识别的编译指示都会被忽略。

# javascript - Jasmine：如何获取当前测试的名称

> ID：12742726
> 
> 赞同：26
> 
> 时间：2012-10-05T08:50:17.073
> 
> 标签：javascript, unit-testing, jasmine

有没有办法获取当前正在运行的测试的名称？

一些（高度简化的）代码可能有助于解释。我想避免重复`"test1" / "test2"`调用`performTest`：

```
describe("some bogus tests", function () {

    function performTest(uniqueName, speed) {
        var result = functionUnderTest(uniqueName, speed);
        expect(result).toBeTruthy();
    }

    it("test1", function () {
        performTest("test1", "fast");
    });

    it("test2", function () {
        performTest("test2", "slow");
    });
}); 
```

* * *

**更新** 我看到我需要的信息在：

```
jasmine.currentEnv_.currentSpec.description 
```

或者可能更好：

```
jasmine.getEnv().currentSpec.description 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T07:47:30.517

```
jasmine.getEnv().currentSpec.description 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-06T01:28:41.113

它并不漂亮（引入了一个全局变量），但您可以使用自定义报告器来做到这一点：

```
// current-spec-reporter.js

global.currentSpec = null;

class CurrentSpecReporter {

  specStarted(spec) {
    global.currentSpec = spec;
  }

  specDone() {
    global.currentSpec = null;
  }

}

module.exports = CurrentSpecReporter; 
```

添加其他记者时将其添加到茉莉花中...

```
const CurrentSpecReporter = require('./current-spec-reporter.js');
// ...
jasmine.getEnv().addReporter(new CurrentSpecReporter()); 
```

然后根据需要在测试/设置期间提取测试名称...

```
 it('Should have an accessible description', () => {
    expect(global.currentSpec.description).toBe('Should have an accessible description');
  } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-17T08:45:40.953

对于尝试在 Jasmine 2 中执行此操作的任何人：您可以对声明进行细微更改，但可以修复它。而不是仅仅做：

```
it("name for it", function() {}); 
```

定义`it`为变量：

```
var spec = it("name for it", function() {
   console.log(spec.description); // prints "name for it"
}); 
```

这不需要插件并且可以与标准 Jasmine 一起使用。

# iphone - Bing Api 不适合我

> ID：12742727
> 
> 赞同：6
> 
> 时间：2012-10-05T08:50:19.337
> 
> 标签：iphone, ios, bing

我正在使用 Bing Api，我的问题非常基本。我已经生成了 App 密钥，但是在控制台的输出中出现错误。

我将它用于 JSON 响应

```
NSString *urlString=[NSString stringWithFormat:@"%@%@%@%@",
    @"http://api.search.live.net/json.aspx?Appid=xxxxxxxaxkOatx66TB+CX8qJUIZw=&query=",
    text,@"sources=web&web.offset=",offValue];

NSLog(@"%@",urlString);

NSURL *url=[NSURL URLWithString:urlString];
NSData *data=[NSData dataWithContentsOfURL:url]; 
```

我打印响应时的输出是

```
SearchResponse =     {
    Errors =         (
                    {
            Code = 1002;
            HelpUrl = "http://msdn.microsoft.com/en-us/library/dd251042.aspx";
            Message = "Parameter has invalid value.";
            Parameter = "SearchRequest.AppId";
            Value = "zKHS8Fm WcwlhCFh8oYWcs VyUYddig=";
        }
    );
    Query =         {
        SearchTerms = iphone;
    };
    Version = "2.2";
}; 
```

}

这个错误背后的原因是什么？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:28:25.437

您正在阅读的服务器请求中发送的参数包含拼写错误。请给出类似于服务器实现的正确名称。只需要求服务器代码团队提供请求参数名称，并给出正确的命名约定。它将解决问题。请求应该是键值对，而不是所有值用逗号分隔的字符串。请给出正确的请求格式。

# c++ - 派生重载运算符，但仅对相同类型进行操作

> ID：12742728
> 
> 赞同：0
> 
> 时间：2012-10-05T08:50:24.933
> 
> 标签：c++, oop, class, operator-overloading, code-reuse

假设我有一个基类和两个派生自它的类：

```
class Base
{
protected:
    double value;
public:
    virtual ~Base();

    Base(double value) : value(value) {}
    Base(const Base& B) { value=B.value; }

    Base operator+ (const Base& B) const { 
        return Base(value+B.value); 
    }

};

class final Derived1 : public Base {
public:
    Derived1(double value) : Base(value) {}
};

class final Derived2 : public Base {
public:
    Derived2(double value) : Base(value) {}
}; 
```

我想完成以下任务：

```
int main(int argc, char *argv[])
{
    Derived1 a = Derived1(4.0);
    Derived2 b = Derived2(3.0);

    a+a; // this should return a Derived1 object
    b+b; // this should return a Derived2 object

    a+b; // this should FAIL AT COMPILE TIME

    return 0;
} 
```

换句话说，我想保证继承`operator+`只对与调用实例*相同类型的对象进行操作。*

我如何干净地做到这一点？我发现自己为每个类重新定义了运算符：

```
class final Derived1 : public Base {
    ...
    Derived1 operator+ (const Derived1& D1) const {
        return Derived1(value+D1.value);
    }
    ...
};

class final Derived2 : public Base {
    ...            
    Derived2 operator+ (const Derived2& D1) const {
        return Derived2(value+D1.value);
    }
    ...
}; 
```

但这只是一种痛苦。此外，对我来说，重用代码似乎并不合适。

在这里使用的正确技术是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:00:17.427

如果您可以确定`Derived1`并且`Derived2`是叶子类（即没有其他类可以从它们派生），您可以使用[奇怪的重复模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)来做到这一点：

```
template <typename T>
class BaseWithAddition : public Base {
    T operator+(T const& rhs) const {
        return T(value + rhs.value);
    }
};

class final Derived1 : public BaseWithAddition<Derived1> {
    // blah blah
};

class final Derived2 : public BaseWithAddition<Derived2> {
    // blah blah
}; 
```

（`final`是一个 C++11 特性，可以防止进一步推导。）

如果您允许派生`Derived1`，`Derived2`那么您会遇到麻烦：

```
class Derived3 : public Derived1 {};
Derived3 d3;
Derived1 d1;
Derived1& d3_disguised = d3;
d1 + d3_disguised; // oooops, this is allowed 
```

在编译时没有办法阻止这种情况。而且即使你想允许它，在没有[多次 dispatch](http://en.wikipedia.org/wiki/Multimethods)的情况下也不容易为这个操作获得体面的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:28:04.140

您可以使用专门的模板函数来添加值。不幸的是，这个技巧不适用于运算符：如果类型不同，它会失败，并返回正确的类型：

```
#include <type_traits>
class Base;
template <class Derived>
Derived add(const Derived& l, const Derived& r, 
            typename std::enable_if<std::is_base_of<Base,Derived>::value>::type* = NULL);

class Base
{
 ...
    template <class Derived>
    friend Derived add(const Derived& l, const Derived& r, 
       typename std::enable_if<std::is_base_of<Base,Derived>::value>::type* = NULL);
};

template <class Derived>
Derived add(const Derived& l, const Derived& r, 
 typename std::enable_if<std::is_base_of<Base,Derived>::value>::type* = NULL) 
{ 
    return l.value + r.value; 
} 
```

它的工作证明：

```
int main() {
   int a = 0;
   a = a + a;
   Derived1 d11(0), d12(0);
   Derived2 d21(0), d22(0);
   add(d11, d12);
   add(d21, d22);
   add(d12, d22); // here it fails to compile...
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-05T09:02:18.933

只要`value`仅在基类中定义，并且操作不需要访问任何派生成员，您就可以只定义基运算符并让隐式类型转换处理其余部分。对于不同类型的错误，使用基于枚举的系统来跟踪类型，然后做一个简单的比较来检查无效条件可能是值得的。

```
enum eTypeEnum {BASE, DER1, DER2};

class Base {
public:
  virtual ~Base(){}

  Base(double value) : eType(BASE),value(value) {}
  Base(const Base& B) { value=B.value; }

  Base operator+ (const Base& B) const {
    if (eType != B.eType) return -1; //error condition
    return Base(value+B.value);
  }
  double getVal(){return value;}
protected:
  eTypeEnum eType;
  double value;
};

class Derived1 : public Base {
public:
  Derived1(double value) : Base(value) {eType = DER1;}
};

class Derived2 : public Base {
public:
  Derived2(double value) : Base(value) {eType = DER2;}
};

int main() {
  int tmp;
  Derived1 a(4.0);
  Derived2 b(3.0);
  Base c(2.0);

  cout << "aa:" << (a+a).getVal();     // 8
  cout << "\nbb:" << (b+b).getVal();   // 6
  cout << "\nba:" << (b+a).getVal();   // 7
  cout << "\nab:"<< (a+b).getVal();    // 7

  cout << "\ncc:"<< (c+c).getVal();    // 4
  cout << "\nac:"<< (a+c).getVal();    // 6
  cout << "\nbc:" << (b+c).getVal();   // 5
  cout << "\nabc:" << (a+b+c).getVal();// 9
  cout << endl;
  cin >> tmp;
  return 0;
} 
```

输出： aa:8 bb:6 ba:-1 ab:-1 cc:4 ac:-1 bc:-1 abc:1

我看到的唯一问题是，当将多个操作链接在一起时，铸造搞砸了处理。在这里，`a+b+c`432 的评估结果是`(a+b)+c`该`a+b`位经历了错误条件（返回 -1），但被转换为`Base`让`(-1)+c`返回“1”的 a。

# javascript - UI手风琴js全部关闭

> ID：12742730
> 
> 赞同：-3
> 
> 时间：2012-10-05T08:50:35.297
> 
> 标签：javascript, jquery-ui, tabs, accordion

谁能帮我这个js代码？我想要所有的手风琴关闭。我阅读了所有答案，但您的方法不起作用。任何人都可以为所有关闭的标签更正此代码吗？

```
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"1.8.21",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})})(jQuery);; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:40:27.313

您需要对手风琴元素执行以下操作：

```
$(function() {
   $( "#accordion" ).accordion({
      collapsible: true,
      active: false
   });
}); 
```

使用`collapsible: true`（[文档](http://jqueryui.com/demos/accordion/#option-collapsible)）我们将您的手风琴设置为允许我们关闭部分，并且使用`active: false`（[文档](http://jqueryui.com/demos/accordion/#option-active)）我们对手风琴说“我们不希望在开始时打开任何部分”

编辑：

我认为您应该在这里更改代码：

```
(function(a,b){a.widget("ui.accordion",
{options:{active:0,animated:"slide",autoHeight:!0,
clearStyle:!1,collapsible:0,[...] 
```

只是更改`collapsible:!1`为`collapsible:0`. 其余代码必须保持不变（我不知道它在做什么）。这段代码在开头。

# wpf - 如何在拖动拇指时捕获 MouseEnter？

> ID：12742732
> 
> 赞同：3
> 
> 时间：2012-10-05T08:50:35.280
> 
> 标签：wpf, drag-and-drop, slider

我有一个拇指（包含一个文本块）和一个画布内的边框。Thumb 接收到拖动事件，并且正在正确拖动。

我需要的是在 Thumb 拖动时在 Border 上捕获 MouseEnter 事件。

问题是 MouseEnter 在 DragCompleted 事件之后被触发（在释放鼠标按钮之后）。当鼠标按钮按下时，我如何知道鼠标何时进入边框？

xml:

```
<Grid>
<Canvas Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Canvas Name="dragTarget">
        <Thumb
            DragStarted="Thumb_DragStarted" 
            DragDelta="Thumb_DragDelta"
            DragCompleted="Thumb_DragCompleted">
            <Thumb.Template>
                <ControlTemplate>
                    <TextBlock
                        Text="Some Text"
                        Foreground="White"
                        Background="DimGray"/>
                </ControlTemplate>
            </Thumb.Template>
        </Thumb>
    </Canvas>
    <Border Width="100" Height="100" Margin="50,50,0,0" 
        BorderBrush="AliceBlue" BorderThickness="1" Background="Silver"
        MouseEnter="Border_MouseEnter"/>
</Canvas> 
```

Xaml.cs：

```
bool isDragging = false;
double x = 0;
double y = 0;

private void Border_MouseEnter(object sender, MouseEventArgs e)
{
    if(isDragging)
        Title = "Captured";
}

private void Thumb_DragStarted(object sender, System.Windows.Controls.Primitives.DragStartedEventArgs e)
{
    isDragging = true;
    x = e.HorizontalOffset;
    y = e.VerticalOffset;
}

private void Thumb_DragCompleted(object sender, System.Windows.Controls.Primitives.DragCompletedEventArgs e)
{
    isDragging = false;
}

private void Thumb_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
{
    x += e.HorizontalChange;
    y += e.VerticalChange;
    dragTarget.Margin = new Thickness(x , y , 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:30:51.787

拖动时会捕获鼠标，因此您可能不会收到消息。

在 Thumb_DragDelta 事件中，使用边框获取鼠标位置。它将相对于边界。检查鼠标点是否在边界内。

```
Point point = Mouse.GetPosition(border);

Rect rect = new Rect(0, 0, border.ActualWidth, border.ActualHeight);
Boolean mouseInBorder = rect.Contains(point);

if (mouseInBorder && !mouseLastInBorder)
{
    // Mouse enter "event";
}
if (!mouseInBorder && mouseLastInBorder)
{
    // Mouse exit "event";
}
mouseLastInBorder = mouseInBorder; 
```

# java - JAVA设置/从多个（UDP）中选择特定的NIC

> ID：12742733
> 
> 赞同：9
> 
> 时间：2012-10-05T08:50:37.377
> 
> 标签：java, udp, set, datagram, nic

我正在尝试在 JAVA 中发送带有数据报的 UDP，并且我的机器有几个具有不同 IP 的 NIC。

如何设置我希望从哪个 NIC 发送数据包？（假设我的机器上有不止一个？？）

编辑我

我没有使用 Socket，我使用的是 DatagramSocket 并尝试像这样进行绑定：

```
/*binding */
        DatagramSocket ds = new DatagramSocket(1111);
        NetworkInterface nif = NetworkInterface.getByIndex(nicIndex);
        Enumeration<InetAddress> nifAddresses = nif.getInetAddresses();
        ds.bind(new InetSocketAddress(nifAddresses.nextElement(), 0)); 
```

但是当我这样做时，我无法再连接（或无法获取数据包..）。问题是我有 2 个 NIC，但一个用于内部网络，另一个用于 Internet .. 我需要我的所有服务器数据只在内部一个..

编辑二

为了澄清 。这个应用程序是一个服务器 - 并且 SERVER 有 2 个 NICS。一个局域网，一个用于广域网。

对我来说，另一种方法是以某种方式指定 ROUTING - 意思是告诉每个数据包确切地使用哪个 NIC ..

如何在 JAVA 中做这样的路由？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-30T08:52:36.380

我刚遇到你同样的问题。解决问题并没有立即解决，但最后我写了一些对您有用的代码：

```
//set Network Interface
        NetworkInterface nif = NetworkInterface.getByName("tun0");
        if(nif==null){
            System.err.println("Error getting the Network Interface");
            return;
        }
        System.out.println("Preparing to using the interface: "+nif.getName());
        Enumeration<InetAddress> nifAddresses = nif.getInetAddresses();
        InetSocketAddress inetAddr= new InetSocketAddress(nifAddresses.nextElement(),0);

        //socket.bind(new InetSocketAddress(nifAddresses.nextElement(), 0));
        DatagramSocket socket = new DatagramSocket(inetAddr);
        System.out.println("Interface setted"); 
```

我使用了很多输出来确保代码正常工作并且看起来像这样做，我仍在努力，但我想这足以解决你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:04:11.813

该类`Socket`有一个带参数的[构造](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#Socket%28java.lang.String,%20int,%20java.net.InetAddress,%20int%29)`localAddr`函数。这可能适用于你？

**编辑：** 1）不要在Java中进行路由，将其留给操作系统。

2) 我相信您访问过[All About Datagrams](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)吗？

3）服务器可以绑定到`0.0.0.0`（即机器上的任何IP），如果你只在`DatagramSocket`构造函数中指定一个端口，或者如果你选择构造函数它可以绑定到一个特定的接口，就会发生`DatagramSocket(int port, InetAddress laddr)`这种情况——这就是你应该做的！

4) 客户端然后发送它需要发送的任何内容，服务器可以使用在 3) 中创建的套接字和 packet.getAddress()/packet.getPort() 目标进行响应。

干杯，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T00:57:51.697

这是我使用的大部分完整代码。就我而言，我知道我的连接使用的 IP 地址前缀。您可能需要查找接口的名称并将其与存储在配置文件中的值进行比较。

请注意使用 MulticastSocket 而不是 DatagramSocket，因此 setNetworkInterface 方法可用于绑定所需的接口。由于 MulticastSocket 是 DatagramSocket 的子类，因此切换通常不会引起任何问题。

```
@Override
public void connect() throws InterruptedException
{

    NetworkInterface iFace;

    iFace = findNetworkInterface();

    connectControlBoard(iFace);

    connectUTBoards(iFace);

}//end of Capulin1::connect
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// Capulin1:findNetworkInterface
//
// Finds the network interface for communication with the remotes. Returns
// null if no suitable interface found.
//
// The first interface which is connected and has an IP address beginning with
// 169.254.*.* is returned.
//
// NOTE: If more than one interface is connected and has a 169.254.*.*
// IP address, the first one in the list will be returned. Will need to add
// code to further differentiate the interfaces if such a set up is to be
// used. Internet connections will typically not have such an IP address, so
// a second interface connected to the Internet will not cause a problem with
// the existing code.
//
// If a network interface is not specified for the connection, Java will
// choose the first one it finds. The TCP/IP protocol seems to work even if
// the wrong interface is chosen. However, the UDP broadcasts for wake up calls
// will not work unless the socket is bound to the appropriate interface.
//
// If multiple interface adapters are present, enabled, and running (such as
// an Internet connection), it can cause the UDP broadcasts to fail.
//

public NetworkInterface findNetworkInterface()
{

    logger.logMessage("");

    NetworkInterface iFace = null;

    try{
        logger.logMessage("Full list of Network Interfaces:" + "\n");
        for (Enumeration<NetworkInterface> en =
              NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {

            NetworkInterface intf = en.nextElement();
            logger.logMessage("    " + intf.getName() + " " +
                                                intf.getDisplayName() + "\n");

            for (Enumeration<InetAddress> enumIpAddr =
                     intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) {

                String ipAddr = enumIpAddr.nextElement().toString();

                logger.logMessage("        " + ipAddr + "\n");

                if(ipAddr.startsWith("/169.254")){
                    iFace = intf;
                    logger.logMessage("==>> Binding to this adapter...\n");
                }
            }
        }
    }
    catch (SocketException e) {
        logger.logMessage(" (error retrieving network interface list)" + "\n");
    }

    return(iFace);

}//end of Capulin1::findNetworkInterface
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// Capulin1::connectControlBoards
//

public void connectControlBoard(NetworkInterface pNetworkInterface)
                                                    throws InterruptedException
{

    logger.logMessage("Broadcasting greeting to all Control boards...\n");

    MulticastSocket socket;

    try{
        socket = new MulticastSocket(4445);
        if (pNetworkInterface != null) {
            try{
                socket.setNetworkInterface(pNetworkInterface);
            }catch (IOException e) {}//let system bind to default interface
        }

    }
    catch (IOException e) {
        logSevere(e.getMessage() + " - Error: 204");
        logger.logMessage("Couldn't create Control broadcast socket.\n");
        return;
    }

...use the socket here... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:28:19.667

来自 Tutorial docs [Here](http://docs.oracle.com/javase/tutorial/networking/nifs/definition.html)，“要发送数据，系统会确定使用哪个接口。但是，如果您有偏好或需要指定要使用的 NIC，您可以向系统查询适当的接口并在您要使用的界面。”

NetworkInterFaces 可以通过编程方式访问，
Enumeration en = NetworkInterface.getNetworkInterfaces();

迭代每个你可以获得与之关联的 InetAddress 并使用 InetAddress 来构造你的数据报套接字。
这个问题有很好的信息 -[如何从 Java 枚举所有启用的 NIC 卡的 IP 地址？](https://stackoverflow.com/questions/494465/how-to-enumerate-ip-addresses-of-all-enabled-nic-cards-from-java)

希望有帮助，

# javascript - 如何使可编辑 HTML 表格中的表格单元格仅接受数字（无字母）？

> ID：12742738
> 
> 赞同：0
> 
> 时间：2012-10-05T08:50:47.120
> 
> 标签：javascript, jquery, html, html-table, edit

我正在使用 HTML5、JavaScript、JQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:01:47.517

jQuery 1.7 中有一个[$.isNumeric()](http://api.jquery.com/jQuery.isNumeric/)函数，否则你必须用 Javascript 编写你自己的函数——已经[有一些答案](https://stackoverflow.com/questions/9716468/is-there-any-function-like-isnumeric-in-javascript-to-validate-numbers)了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:03:36.750

[我认为您的问题与问题](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)非常相似，但可能会有更好的答案。以下[小提琴](http://jsfiddle.net/eSdYn/)适用于您的情况。我使用了与上述问题相同的代码

```
$(document).ready(function() {
    $(".only-numbers").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
         if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
              // Allow: Ctrl+A
             (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
             (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
    }
}); 
```

});

# javascript - 是否可以在 Coldfusion 服务器端将 HTML 标记编译为可模板化的 javascript？

> ID：12742741
> 
> 赞同：0
> 
> 时间：2012-10-05T08:51:04.117
> 
> 标签：javascript, templates, coldfusion, compilation, server-side

我一直在研究 Javascript 模板引擎，试图找到一种让标准模板在线/离线可用的方法。

目前我有点卡在[dustjs/linkedIn](https://github.com/linkedin/dustjs)，这需要服务器端将模板预编译到`js`文件中——因为我正在使用`Coldfusion8`.

在 Coldfusion 中运行 Javascript 时有一些可用的稀疏链接（[示例](http://www.bennadel.com/blog/1766-Running-Javascript-In-ColdFusion-With-CFGroovy-And-Rhino.htm)）。所以：

**问题：**
Coldfusion 中是否有易于使用的 Javascript？我不是在谈论`toScript`我们的`<cfoutput><script>alert("hello")></cfoutput>`，我想在 cfscheduled 任务中在服务器上运行一个 javascript 函数，比如dustjs 编译器，以获取 HTML 模板并从中编译它们：

```
 Hello {name}! You have {count} new messages. 
```

对此：

```
(function() {
    dust.register("demo", body_0);

    function body_0(chk, ctx) {
    return chk.write("Hello ").reference(ctx.get("name"), ctx, "h").write("! You have ").reference(ctx.get("count"), ctx, "h").write(" new messages.");
    }
    return body_0;
})(); 
```

这是在dustJS [compiler.js](https://github.com/linkedin/dustjs/blob/master/lib/compiler.js)文件中完成的（我认为......）。如果不可能，除了创建将标记更改为已编译 javascript 的“coldfusion 编译器”之外，还有哪些其他选择？

谢谢你的一些建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:14:41.530

看看[CFgroovy](http://www.barneyb.com/barneyblog/projects/cfgroovy2/)。尽管针对的是 groovy，但它确实是 CF 使用 Java 的通用脚本功能的一种方式 (JSR-223) 您应该能够通过它启动 Rhino 并运行您的代码。事实上，Ben Nadel 有[一篇关于这样做](http://www.bennadel.com/blog/1766-Running-Javascript-In-ColdFusion-With-CFGroovy-And-Rhino.htm)的文章。

或者，您可以将 node 放在您的服务器上并使用 cfexecute 运行 node 来编译您的模板。

如果你让它工作，我会考虑不按计划进行编译。也许尝试以下方法之一：

*   如果您有已定义的构建过程，则将其作为构建的一部分进行编译。
*   按需编译，因此您的脚本 URL 可能是 script.cfm?script=whatever.js 并具有 CF 检查日期并编译模板或
*   使用 DirectoryWatcher 事件网关来监视您的脚本文件夹并在更改时进行编译。

我最喜欢第三个选项，因为它只会在更改时编译，这可能是您想要的。

# java - Weblogic Stuck Thread on native 方法，RNI.initializeClass

> ID：12742748
> 
> 赞同：1
> 
> 时间：2012-10-05T08:51:22.830
> 
> 标签：java, multithreading, jsf, weblogic

我们正在使用带有 jrockit 1.6 64 位的 Weblogic 10.3.2，我们的应用程序正在使用 jboss seam 框架。卡住的线程数量正在稳步增加。这些卡住的线程只是在等待，它们没有花费任何 cpu 周期。所有卡住线程的堆栈跟踪都是相同的，它们的状态是 native_waiting。

最后一个 java 方法调用是 `com/sun/faces/application/ViewHandlerImpl.renderView(ViewHandlerImpl.java:186)`. 这是 ViewHandlerImpl 类的第 186 行的源代码；

```
 WriteBehindStateWriter stateWriter =
          new WriteBehindStateWriter(response.getWriter(),
                                     context,
                                     bufSize); 
```

此电子邮件附有完整的堆栈跟踪。这是一些卡住线程的堆栈跟踪；

```
"[STUCK] ExecuteThread: '29' for queue: 'weblogic.kernel.Default (self-tuning)'" id=127 idx=0x230 tid=6974 prio=1 alive, native_waiting, daemon
    at pthread_cond_wait@@GLIBC_2.3.2+185(:0)@0x3820a0aee9
    at eventTimedWaitNoTransitionImpl+71(event.c:90)@0x2b1ffc771ec8
    at syncWaitForSignalNoTransition+65(synchronization.c:28)@0x2b1ffc904312
    at innerNativeDoWait+1112(nativelock.c:614)@0x2b1ffc893f99
    at nativeWait+54(nativelock.c:721)@0x2b1ffc8942a7
    at clsEnsureInitialized+378(class.c:222)@0x2b1ffc72c61b
    at RJNI_jrockit_vm_RNI_initializeClass+19(trampoline.c:106)@0x2b1ffc90aba4
    at jrockit/vm/RNI.initializeClass(J)V(Native Method)
    at com/sun/faces/application/ViewHandlerImpl.renderView(ViewHandlerImpl.java:186)
    at org/jboss/seam/jsf/SeamViewHandler.renderView(SeamViewHandler.java:87)
    at com/sun/facelets/FaceletViewHandler.renderView(FaceletViewHandler.java:547)[optimized]
    at org/ajax4jsf/application/ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)[inlined]
    at org/ajax4jsf/application/AjaxViewHandler.renderView(AjaxViewHandler.java:176)[optimized]
    at com/sun/faces/lifecycle/RenderResponsePhase.execute(RenderResponsePhase.java:109)[optimized]
    at com/sun/faces/lifecycle/Phase.doPhase(Phase.java:100)[optimized]

"[STUCK] ExecuteThread: '28' for queue: 'weblogic.kernel.Default (self-tuning)'" id=126 idx=0x22c tid=6973 prio=1 alive, native_waiting, daemon
    at pthread_cond_wait@@GLIBC_2.3.2+185(:0)@0x3820a0aee9
    at eventTimedWaitNoTransitionImpl+71(event.c:90)@0x2b1ffc771ec8
    at syncWaitForSignalNoTransition+65(synchronization.c:28)@0x2b1ffc904312
    at innerNativeDoWait+1112(nativelock.c:614)@0x2b1ffc893f99
    at nativeWait+54(nativelock.c:721)@0x2b1ffc8942a7
    at clsEnsureInitialized+378(class.c:222)@0x2b1ffc72c61b
    at RJNI_jrockit_vm_RNI_initializeClass+19(trampoline.c:106)@0x2b1ffc90aba4
    at jrockit/vm/RNI.initializeClass(J)V(Native Method)
    at com/sun/faces/application/ViewHandlerImpl.renderView(ViewHandlerImpl.java:186)
    at org/jboss/seam/jsf/SeamViewHandler.renderView(SeamViewHandler.java:87)
    at com/sun/facelets/FaceletViewHandler.renderView(FaceletViewHandler.java:547)[optimized]
    at org/ajax4jsf/application/ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)[inlined]
    at org/ajax4jsf/application/AjaxViewHandler.renderView(AjaxViewHandler.java:176)[optimized]
    at com/sun/faces/lifecycle/RenderResponsePhase.execute(RenderResponsePhase.java:109)[optimized]
    at com/sun/faces/lifecycle/Phase.doPhase(Phase.java:100)[optimized]
    at com/sun/faces/lifecycle/LifecycleImpl.render(LifecycleImpl.java:139)[optimized]
    at javax/faces/webapp/FacesServlet.service(FacesServlet.java:266)[optimized]
    at weblogic/servlet/internal/StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)[optimized]
    at weblogic/servlet/internal/StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)[inlined]
    at weblogic/servlet/internal/ServletStubImpl.execute(ServletStubImpl.java:292)[optimized] 
```

你知道为什么这些线程在等待吗？...

# jquery - 输入是变化，但 .change() 没有运行

> ID：12742751
> 
> 赞同：0
> 
> 时间：2012-10-05T08:51:29.220
> 
> 标签：jquery, function, input, onchange

我正在动态创建一个表格，表格中的单元格是图像，每个图像都有价值。单击图库中的 img 后，它将图像发送/复制到另一个表格单元格，并将值发送到 INPUT。我正在检查这个输入的变化，我可以看到每次点击值都在变化但`.change()`没有运行之后，应该是什么问题。

```
$(document).ready(function() {
    var most;
    var clickedTableCellAll;

    var korpusMaterialNeed = 0;
    $("#korpusChoose").on('click', '#TableKorpusGaleria tbody td', function() {
        var clickedTableCell = $(this).text();
        var clickedTableCellAll = $(this).html();
        most = $.inArray(clickedTableCell, korpusArray);
        clickedId = helperArray[most].id;
        $("#helper_input_01").val(clickedId);
        $("#helper_input_02").val(most);
        cellClick(most, helperArray);

        var setKorpusArray = $('#createTableKorpus > tbody > tr').map(function() {
            return $(this).children().map(function() {
                return $(this);
            });
        });
        setSelectedCell = $("#helper_input_03").val();
        var countSection = $('#createTableKorpus > tbody > tr > td').length;
        var korpusId = most;
        setKorpusArray[1][setSelectedCell].html(clickedTableCellAll);
        console.log('===============================');

        korpusMaterialNeed = (clickedKorpus(korpusId)) / 10000;
        $("#priestor_mat_0" + (setSelectedCell)).val(korpusMaterialNeed);
        console.log('input: ' + $("#priestor_mat_0" + (setSelectedCell)).val());

    });

    function cellClick(most, helperArray) {
        var korpusId = most;
        clickedKorpus(korpusId);
    }

    function clickedKorpus(korpusId) {
        var currentKorpusCount = helperArray[korpusId].metadesc;
        var currentKorpusPlus = helperArray[korpusId].metakey;

        var sirka = $("#param_sirka").val();
        var widthValues = calcWidthInterval(sirka);
        var ddlText = $("#pocet_priestorov option:selected").text();

        var widthSect = 0;

        var newestOptions = calcSectionWidth(widthValues, sirka);
        var currentKorpMaterial = 0;
        var currentKorpusMaterial = 0;

        $.each(newestOptions, function(i, value) {
            if (value.all == ddlText) {
                widthSect = value.val;
                currentKorpusMaterial = ($("#param_hlbka").val() * widthSect) * currentKorpusCount;

                //          return currentKorpusMaterial;
            }
            else {
                console.log('clickedKorpus >>> ERROR');
            }
            //  var currentKorpMaterial = currentKorpusMaterial;
            console.log('currentKorpusMaterial' + currentKorpusMaterial);
            return currentKorpusMaterial;

        });
        console.log('korpusId >>> clickedKorpus >>>' + korpusId);

        var currentKorpMaterial = currentKorpusMaterial;
        console.log('currentKorpMaterial' + currentKorpMaterial);

        return currentKorpMaterial;
    }

    $('#userForm').on('change', '#priestor_mat_01', function() {

        alert('hi');
    });

    $("input#priestor_mat_01").change(function() {

        alert('hi');
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:58:03.527

以编程方式更新输入的值（例如使用`.val()`函数）不会触发`change`函数。您还需要使用以下函数以编程方式触发该`.trigger()`函数：

```
$("#priestor_mat_0" + (setSelectedCell)).val(korpusMaterialNeed).trigger('change'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:58:43.783

当您以编程方式更改值时，它不会触发`change`事件，`change()`像这样更改值后调用

```
$('input').val(NEW_VAL).change() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T08:59:55.413

插入后调用事件处理程序：

```
$('#someinput').change(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:04:41.277

在这种情况下，必须触发事件更改。`.val()`不会触发更改事件。像这样链接它`.change()`-

> ```
>  $('input').val("value").change(); 
> ```

这将触发绑定到输入的更改事件处理程序。

# java - 在 taglib 文件中未检测到文档的语法约束（DTD 或 XML 模式）

> ID：12742753
> 
> 赞同：3
> 
> 时间：2012-10-05T08:51:34.823
> 
> 标签：java, xml, taglib

日食伽利略

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib xmlns="http://java.sun.com/xml/ns/javaee"
        xmns:xsi="http://www.w3.org/2001/XMLSchema-instance"         
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee/webjsptaglibrary_2_0.xsd" 
        version="2.0">
</taglib> 
```

我怎样才能摆脱警告？应用程序工作正常，看起来像一个 IDE 问题或什么的。我知道我可以禁用警告检查，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:55:54.540

改变：

```
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee/webjsptaglibrary_2_0.xsd" 
```

到

```
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/webjsptaglibrary_2_0.xsd" 
```

确保`xsd`通过[http://java.sun.com/xml/ns/javaee/webjsptaglibrary_2_0.xsd](http://java.sun.com/xml/ns/javaee/webjsptaglibrary_2_0.xsd) 可用。在这种情况下，它不可用。

# c# - 转换错误

> ID：12742755
> 
> 赞同：1
> 
> 时间：2012-10-05T08:51:43.730
> 
> 标签：c#, sql, parameters

有人可以告诉我为什么我得到以下错误，当我运行我的代码时，我不确定我的 sql 语句是否有问题，因为这似乎没问题，但我在下面添加了它，以便我可以得到一个第二个意见

“从字符串转换日期/时间时转换失败”

```
public static int GetConveyorProductionCount(string machineNameV, string StartTimeV, string EndTimeV)
    {

        try
        {
            int count;

            SqlParameter param01 = new SqlParameter("@param01", SqlDbType.VarChar, 5);
            param01.Value = machineNameV;

            SqlParameter param02 = new SqlParameter("@param02", SqlDbType.VarChar, 5);
            param02.Value = StartTimeV;

            SqlParameter param03 = new SqlParameter("@param03", SqlDbType.VarChar, 5);
            param03.Value = EndTimeV;

            SqlCommand getConveyorProductionSC = new SqlCommand("SELECT cast([" + machineNameV + "] as int) FROM VWCONVEYORPRODUCTION WHERE([DA_TE] BETWEEN @param02 AND @param03)", myConnection);

            getConveyorProductionSC.Parameters.Add(param01);
            getConveyorProductionSC.Parameters.Add(param02);
            getConveyorProductionSC.Parameters.Add(param03);

            myConnection.Open();
            object result = getConveyorProductionSC.ExecuteScalar();
            myConnection.Close();

            if (result == DBNull.Value)
            {
                count = 0;
            }
            else
            {
                count = Convert.ToInt32(result);
            }

            return count;
        }
        catch (Exception e)
        {
            throw new Exception("Error retrieving the Conveyor production count. Error: " + e.Message);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:01:41.240

除了这段代码的大量其他问题之外

```
SqlParameter param02 = new SqlParameter("@param02", SqlDbType.DateTime);
param02.Value = StartTimeV;
SqlParameter param03 = new SqlParameter("@param03", SqlDbType.DateTime);
param03.Value = EndTimeV; 
```

会是一个好的开始 假设表中的 DA_TE 列当然是日期时间？当然，您还需要将它们作为 DateTimes 传递

不过，我确实赞扬您使用参数化查询。

如果是我，我的代码看起来像

```
public static int GetConveyorProductionCount(string machineNameV, DateTime StartTimeV, DateTime EndTimeV)
{
  {
  using (SqlConnection connection = new SqlConnection(myConnectionString))
  {
    connection.Open();
    using(SqlCommand command = new SqlCommand(String.Format(CultureInfo.InvariantCulture, "SELECT cast([{0}] as int) FROM VWCONVEYORPRODUCTION WHERE([DA_TE] BETWEEN @StartDate AND @EndDate)", machineNameV), connection);            
    {
      command.Parameters.AddWithValue("StartDate",StartTimeV);
      command.Parameters.AddWithValue("EndDate",EndTimeV);
      object result = command.ExecuteScalar();
      if (result == DBNull.Value)
      {
        return 0;
      }
      else
      {
        return (Int32)result;
      }
    }
  }
} 
```

您创建的任何实现 IDisposable 的苍蝇都放在 using 块中。

除非您正在执行显式事务，或者关闭连接缓存，否则不要保留 Ado.Net 数据库连接。

将 DateTimes 作为 DateTimes 传递

给你的变量起一个像样的名字，param02 没有任何意义，并且 count 具有误导性。

在需要之前不要创建东西

你对异常所做的事情我个人不会费心在这段代码中陷入困境，尤其是在扔掉有关异常的所有有用细节之后再次抛出它。

如果你想这样做，定义一个 CustomException，然后抛出 new MyCustomException("Error retrieving the Conveyor production count.",e);

这样，如果需要，您将能够捕获此特定异常，但您将拥有整个异常链和所有堆栈跟踪。

最后但并非最不重要的一点是，将包括我在内的所有编码示例都视为是由村里白痴的厚表弟构建的。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:01:50.590

我认为您的问题是您的 VWCONVEYORPRODUCTION 表中的 DA_TE 列是 sql 日期类型。所以这意味着你的参数也应该是日期类型。

```
public static int GetConveyorProductionCount(string machineNameV, DateTime StartTimeV, DateTime EndTimeV)
    {
    enter code here
        try
        {
            int count;

            SqlParameter param01 = new SqlParameter("@param01", SqlDbType.VarChar, 5);
            param01.Value = machineNameV;

            SqlParameter param02 = new SqlParameter("@param02", SqlDbType.date);
            param02.Value = StartTimeV;

            SqlParameter param03 = new SqlParameter("@param03", SqlDbType.date);
            param03.Value = EndTimeV;

            SqlCommand getConveyorProductionSC = new SqlCommand("SELECT cast([" + machineNameV + "] as int) FROM VWCONVEYORPRODUCTION WHERE([DA_TE] BETWEEN @param02 AND @param03)", myConnection);

            getConveyorProductionSC.Parameters.Add(param01);
            getConveyorProductionSC.Parameters.Add(param02);
            getConveyorProductionSC.Parameters.Add(param03);

            myConnection.Open();
            object result = getConveyorProductionSC.ExecuteScalar();
            myConnection.Close();

            if (result == DBNull.Value)
            {
                count = 0;
            }
            else
            {
                count = Convert.ToInt32(result);
            }

            return count;
        }
        catch (Exception e)
        {
            throw new Exception("Error retrieving the Conveyor production count. Error: " + e.Message);
        } 
```

`DateTime.ParseExact()`如果您需要在调用此函数之前将字符串转换为 DateTimes，请使用此选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T08:57:00.150

我的理论是作为 DateTime 传递的字符串格式不正确。

看看下面的例子

[工作价值的 SQL Fiddle DEMO](http://www.sqlfiddle.com/#!3/d41d8/4965/0)

[破值的 SQL Fiddle DEMO](http://www.sqlfiddle.com/#!3/d41d8/4966)

使用*01 Ja 2012*的第二个示例（注意**Ja**而不是**Jan**）产生错误消息

> 从字符串转换日期和/或时间时转换失败

# magento - Magento adminhtml子菜单不起作用

> ID：12742763
> 
> 赞同：1
> 
> 时间：2012-10-05T08:52:14.407
> 
> 标签：magento, submenu, magento-1.7, adminhtml

这个问题把我们逼疯了，已经几个小时了，什么也没有，我在尝试访问第二个子菜单时遇到 404 错误，**关键字**之一。我确定错误应该在控制器或布局中，但我找不到它。我正在发布我的配置、控制器和布局文件。如果需要更多也可以添加，但我认为这些就足够了。我正在使用 AlanStorm 的 CommerceBug，并且块和网格都正确加载。

这是我的不同文件代码：

**配置文件**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Dts_Allpages>
            <version>0.1.0</version>
        </Dts_Allpages>
    </modules>
    <global>
        <models>
            <allpages>
                <class>Dts_Allpages_Model</class>
                <resourceModel>allpages_resource</resourceModel>
            </allpages>
            <allpages_resource>
                <class>Dts_Allpages_Model_Resource</class>
                <entities>
                    <referencedpages>
                        <table>referencedpages</table>
                    </referencedpages>
                    <keywords>
                        <table>keywords</table>
                    </keywords>
                </entities>
            </allpages_resource>
        </models>
        <events>
            <controller_action_predispatch>
                <observers>
                    <controller_action_before>
                        <class>allpages/observer</class>
                        <method>saveReferrer</method>
                    </controller_action_before>
                </observers>
            </controller_action_predispatch>
        </events>
        <helpers>
            <allpages>
                <class>Dts_Allpages_Helper</class>
            </allpages>
        </helpers>
        <resources>
            <allpages_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </allpages_write>
            <allpages_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </allpages_read>
        </resources>
        <blocks>
          <allpages>
            <class>Dts_Allpages_Block</class>
          </allpages>
        </blocks>
    </global>
    <admin>
        <routers>
            <allpages>
                <use>admin</use>
                    <args>
                        <module>Dts_Allpages</module>
                        <frontName>allpages</frontName>
                    </args>
            </allpages>
        </routers>
    </admin>
    <adminhtml>
        <menu>
          <allpagesmainmenu translate="title" module="allpages">
            <title>AllPages</title>
            <sort_order>100</sort_order>
            <children>
              <allpages module="allpages">
                <title>Keywords administration</title>
                <sort_order>0</sort_order>
                <children>
                    <references translate="title">
                        <title>References</title>
                        <sort_order>10</sort_order>
                        <action>allpages/adminhtml_allpagesbackend</action>
                    </references>
                    <keywords translate="title">
                        <title>Keywords</title>
                        <sort_order>20</sort_order>
                        <action>allpages/adminhtml_keywordsbackend</action>
                    </keywords>
                </children>
              </allpages>
            </children>
          </allpagesmainmenu>
        </menu>
        <acl>
          <resources>
            <admin>
              <children>
                <allpagesmainmenu translate="title" module="allpages">
                  <title>All Pages</title>
                  <children>
                    <allpages translate="title">
                        <title>Keywords administration</title>
                        <children>
                            <references translate="title">
                                <title>References</title>
                                <sort_order>10</sort_order>
                            </references>
                            <keywords translate="title">
                                <title>Keywords</title>
                                <sort_order>20</sort_order>
                            </keywords>
                        </children>
                    </allpages>
                  </children>
                </allpagesmainmenu>
              </children>
            </admin>
          </resources>
        </acl>
        <layout>
          <updates>
            <allpages>
              <file>allpages.xml</file>
            </allpages>
          </updates>
        </layout>
    </adminhtml>
</config> 
```

**关键词backendController.php**

```
<?php
class Dts_Allpages_Adminhtml_KeywordsbackendController extends Mage_Adminhtml_Controller_Action
{
    public function indexAction()
    {
        $this->loadLayout();
        $this->_title($this->__("Administrador de keywords"));
        $this->renderLayout();
    }
} 
```

布局，**allpages.xml**

```
<?xml version="1.0"?>
<layout version="0.1.0">
  <allpages_adminhtml_allpagesbackend_index>
      <reference name="content">
          <block type="allpages/adminhtml_allpagesbackend" name="allpagesbackend"/>
      </reference>
  </allpages_adminhtml_allpagesbackend_index>
  <allpages_adminhtml_allpagesbackend_edit>
      <reference name="content">
          <block type="allpages/adminhtml_allpagesbackend_edit" name="allpagesbackend_edit" />
      </reference>
  </allpages_adminhtml_allpagesbackend_edit>
  <allpages_adminhtml_keywordsbackend_index>
      <reference name="content">
          <block type="allpages/adminhtml_keywordsbackend" name="keywordsbackend"/>
      </reference>
  </allpages_adminhtml_keywordsbackend_index>
  <allpages_adminhtml_keywordsbackend_edit>
        <reference name="content">
            <block type="allpages/adminhtml_keywordsbackend_edit" name="keywordsbackend_edit" />
        </reference>
  </allpages_adminhtml_keywordsbackend_edit>
</layout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:43:07.807

一切都很好。问题出在文件名上，因为我不知道控制器名称是*KeywordsbackendController.php* **.php**，当然也找不到文件。但奇怪的是，我没有任何例外或类似情况。好吧，Magento 模糊的内部结构，我已经习惯了。

# c++ - 如何让列表控件中的单元格有边框？

> ID：12742770
> 
> 赞同：0
> 
> 时间：2012-10-05T08:52:29.600
> 
> 标签：c++, mfc

我需要得到这样的东西： ![在此处输入图像描述](../Images/175edc578457e27bbfbe5790354440d6.png)

但是我一直在寻找解决方案 2 个小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:55:01.077

这些线条只是要设置的附加样式：

```
DWORD dwStyle = m_list.GetExtendedStyle();
dwStyle |= LVS_EX_GRIDLINES;
m_list.SetExtendedStyle(dwStyle); 
```

# javascript - 获取脚本以等待文件对话返回

> ID：12742774
> 
> 赞同：6
> 
> 时间：2012-10-05T08:52:35.620
> 
> 标签：javascript, jquery

我有一个网页，我想提示用户上传文件，但我不想显示该`<input type="file"/>`元素。

我有一个触发文件对话框显示的按钮，但代码不会等待对话框返回。

当文件对话返回时，是否有一个我可以挂钩的事件？还有什么我没有想到的吗？

这就是我目前所拥有的，它使用警报来阻止代码。我想要一些不那么老套的东西。

```
function importValues(e)
{
    var f = document.getElementById('file');
    f.click();
    alert('loading'); //hack to make the code wait for the user to choose a file before making the ajax call
    var formdata = new FormData(jQuery('#frmImport')[0]);
    jQuery.ajax({
        url: 'importFile',
        type: 'POST',
        data: formdata,
        chache: false,
        contentType: false,
        processData: false,
    });
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T09:22:19.500

我认为您需要重构代码并处理本机文件上传事件。
如果你有一些像文件对话框这样的元素

```
<input type="file" name="file" id="file" /> 
```

然后你可以连接到它的[事件](http://msdn.microsoft.com/en-us/library/ie/ms535263%28v=vs.85%29.aspx)，特别是`onchange`

```
$(function(){
    $("#file").change(function(e){ alert('selected') });
});​ 
```

[jsFiddle](http://jsfiddle.net/Q5Vt9/)

# vim - 在 Vim CLI 中，是否可以模仿 ":browse old" 并创建菜单？

> ID：12742775
> 
> 赞同：0
> 
> 时间：2012-10-05T08:52:36.447
> 
> 标签：vim

在 Vim CLI（使用脚本，不依赖插件）中，是否可以模仿：

```
:browse old 
```

并创建一个编号菜单（egof 脚本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:47:57.200

也许你正在寻找[`inputlist`](http://vimdoc.sourceforge.net/htmldoc/eval.html#inputlist%28%29)？

```
 " build your list in whatever way is appropriate for your task
let somelist = map(range(1,&lines-2), '"Item #".v:val')

let numberedlist = map(copy(somelist), 'string(v:key+1).": ".v:val')
let chosen = inputlist(['Pick an item:'] + numberedlist)
if 0 < chosen && chosen < len(somelist)
  echo 'User chose item #' . chosen . ': <<<' . somelist[chosen-1] . '>>>'
else
  echo 'Invalid selection!'
endif 
```

# php - 无论我尝试什么都没有错误报告

> ID：12742777
> 
> 赞同：2
> 
> 时间：2012-10-05T08:52:37.910
> 
> 标签：php

> **可能重复：**
> [PHP：如何启用错误报告？](https://stackoverflow.com/questions/6575482/php-how-do-i-enable-error-reporting)

昨天我有这个问题： [当类在 php 代码中时没有任何显示](https://stackoverflow.com/questions/12731847/nothing-shows-up-when-class-is-in-php-code#comment17196650_12731847)

通常我在自己的主机上工作，但现在我切换了，我没有意识到我关闭了错误报告。现在我试着穿上它。我没有访问根目录的权限，所以我创建了自己的 ini.php，这有关系吗？在 ini.php 我试过：

```
php_flag    display_errors          on
php_flag    display_startup_errors  on
php_value   error_reporting         2047 
```

但是没有出现错误，网站也没有出现。然后我尝试了.htaccess，如果我记得正确的话，它可以在每个文件夹中。

.htaccess 有：

```
php_value error_reporting 6143 
```

但是没有错误，也没有网站了。

还尝试了 .htacces ：

```
<IfModule mod_php5.c>
  display_errors 1
</IfModule> 
```

这使：

> 该脚本无法正确执行。常见原因可能是文件以非 ASCII 格式上传，或者解释器的路径（例如：#!/usr/bin/perl）丢失或设置不正确。

然后我尝试了 php 文件：

```
<?php
error_reporting(64);
require('test.txt');
?> 
```

显示没有错误还尝试过：

ini_set('display_errors', 1);

仍然没有错误，也没有网站:(

有谁知道我能做什么？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:58:36.193

尝试

```
error_reporting(-1);
ini_set('display_errors',1);
ini_set('display_startup_errors',1); 
```

尽管这个问题已经被问过很多次了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:00:19.727

看看手册[http://php.net/manual/en/ini.list.php](http://de3.php.net/manual/en/ini.list.php)

```
error_reporting NULL    PHP_INI_ALL
display_errors  "1" PHP_INI_ALL 
```

要对其进行测试，请尝试以下操作：

```
<?php
  ini_set('error_reporting',E_ALL);
  ini_set('display_errors',1);
  echo $notExistingVar;
  phpinfo();
?> 
```

# android - 为 ImageView 设置透明背景以覆盖我的应用主题

> ID：12742779
> 
> 赞同：1
> 
> 时间：2012-10-05T08:52:41.883
> 
> 标签：android, android-layout, android-intent, android-widget, android-theme

我通过在我的***AndroidManifest.xml***中定义，为我的应用程序应用了一个**主题**，如下所示：`android:theme`

 ***AndroidManifest.xml：**

```
<application
        android:label="@string/app_name"
        android:theme="@style/Theme.MyTheme" >
        <activity
            android:name=".MainActivity"
            ...
            ...
        </activity>
        ...
</application> 
```

在**主题.xml 中：**

```
<style name="Theme.MyTheme" parent="@android:style/Theme.Holo">
   <item name="android:windowBackground">@drawable/blue_bg_img</item>
</style> 
```

正如您在上面看到的`MyTheme`，我已将蓝色图像应用为我的应用程序`windowBackground`。因此，我的应用程序中的每个视图元素都将具有此蓝色图像背景。

但是我有一个 ImageView 元素，我不想拥有这个蓝色`windowBackground`，相反，我想为它设置一个透明的背景。**我试过了：**

```
myImageView.setBackgroundColor(Color.TRANSPARENT); 
```

但是我的应用主题中定义的蓝色图像仍在显示。似乎我无法覆盖我定义的应用程序主题。如何在我的应用程序中为一个 View 元素覆盖我的主题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:57:25.570

如果屏幕的背景是蓝色的，如果你将 ImageView 背景设置为透明，你会得到蓝色！尝试将其设置为黑色，或您希望看到的任何其他颜色！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:31:07.387

最后，我设法自己解决了这个问题，方法是降低 ImageView 元素的高度，直到蓝色背景不可见。如果其他人有其他解决方案，我很高兴看到。*

# c# - Winforms，Scintilla - 保存快捷方式将's'信插入编辑器

> ID：12742782
> 
> 赞同：3
> 
> 时间：2012-10-05T08:52:50.483
> 
> 标签：c#, winforms, shortcut, scintilla

我编写用于编辑 sql 程序的小应用程序并使用出色的[ScintillaNET](http://scintillanet.codeplex.com/)代码编辑器控件。我为保存文件定义了一个 Ctrl+S 快捷方式：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.Control | Keys.S))
    {
            saveToolStripButton_Click(this.saveToolStripButton, null);
    }
    else if (keyData == (Keys.Control | Keys.O))
            openToolStripButton_Click(this.openToolStripButton, null);
    else if (keyData == (Keys.Control | Keys.N))
            newToolStripButton_Click(this.newToolStripButton, null);
    else if (keyData == (Keys.Control | Keys.W))
    {
            if (this.tabControl2.SelectedTab != null)
                    (this.tabControl2.SelectedTab as WorkspaceControl).closeSelectedFile();
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

当我只是重新保存旧文件时，一切正常，但是当它的新文件 - 在 SaveFileDialog 关闭并保存文件之后 - 字母“s”被添加到我的编辑器的末尾。我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:55:08.947

正在添加“s”，因为`base.ProcessCmdKey`即使不需要它也会被调用。

如果您想阻止对击键的进一步处理，只需确保`true`在适当的地方返回即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T12:36:48.233

您可以使用`key_down`闪烁控制事件：

```
 private void scintilla_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.S && e.Control)
        {
            // Saving ...
            e.SuppressKeyPress = true;
        }
    } 
```

# c++ - 将带有图像的 HTML 文件导出到 Excel 单个 XLS 文件？

> ID：12742784
> 
> 赞同：0
> 
> 时间：2012-10-05T08:52:53.593
> 
> 标签：c++, excel, automation, ole

我正在尝试使用 C++ OLE 自动化将带有图片的 HTML 文件导出到 Excel。

代码示例：

```
#import "\\alpha\sdk\mso\office12\mso.dll" rename( "RGB", "MSORGB" ) rename("DocumentProperties", "MSODocumentProperties") rename("SearchPath", "MSOSearchPath")
using namespace Office;
#import "\\alpha\sdk\mso\office12\VBE6EXT.OLB" rename( "RGB", "MSORGB" ) rename("EOF", "EndOfFile")
using namespace VBIDE;
#import "\\alpha\sdk\mso\office12\excel.exe" rename( "DialogBox", "ExcelDialogBox" ) rename( "RGB", "ExcelRGB" ) rename( "CopyFile", "ExcelCopyFile" ) rename( "ReplaceText", "ExcelReplaceText" ) no_auto_exclude
#import "\\alpha\sdk\mso\office12\msword.olb" rename( "DialogBox", "WordDialogBox" ) rename( "RGB", "WordRGB" ) rename( "CopyFile", "WordCopyFile" ) rename( "ReplaceText", "WordReplaceText" ) rename( "ExitWindows", "WordExitWindows" ) rename( "FindText", "WordFindText" ) no_auto_exclude

// Create Excle application OLE obj...
Excel::_ApplicationPtr pApplication;
HRESULT hRes = pApplication.CreateInstance(_T("Excel.Application"));
if (hRes==S_OK) {
    pApplication->PutDisplayAlerts(MAKELCID(MAKELANGID(LANG_NEUTRAL,SUBLANG_NEUTRAL), SORT_DEFAULT), VARIANT_FALSE);
    pApplication->PutCopyObjectsWithCells(MAKELCID(MAKELANGID(LANG_NEUTRAL,SUBLANG_NEUTRAL), SORT_DEFAULT), VARIANT_TRUE);

    // Open prepeared for export HTML file
    Excel::_WorkbookPtr pBook = pApplication->Workbooks->Open( _bstr_t(szHTMLPath), _variant_t((long)Excel::xlUpdateLinksAlways), vtMissing, vtMissing/*_variant_t((long)Excel::xlHtml)*/ );
    if (pBook!=NULL) {
        //Save opened HTML file as XSL file
        hRes = pBook->SaveAs(_bstr_t(szXLSPath), _variant_t((long)Excel::xlWorkbookNormal), vtMissing, vtMissing, vtMissing, vtMissing, Excel::xlNoChange, _variant_t((long)Excel::xlLocalSessionChanges), _variant_t(false));
        if (hRes==S_OK) {
            // All is ok
        }
        pBook->Close();
    }
    pApplication->Quit();
} 
```

不幸的是，html代码中的img图片并没有转换成**嵌入的图片**，而是在**外部链接的图片**中。如何转换图像以将它们作为嵌入对象在 XLS 文件内部存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:30:20.447

[微软论坛上的](http://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/0579f931-9ec6-426d-a74f-fc8399f2ff54)简短谈话允许形成或多或少的工作代码。

```
Excel::ShapesPtr pShapes = Excel::_WorksheetPtr(pBook->Worksheets->Item[1])->Shapes;
for (long nIndex=1; nIndex<=pShapes->GetCount(); nIndex++)
{
    Excel::ShapePtr pShape = pShapes->Item(nIndex);

    const Office::MsoShapeType nType = pShape->Type;
    switch (nType)
    {
    case Office::msoLinkedPicture:      
        {
            const float rLeft       = pShape->Left;
            const float rTop        = pShape->Top;
            const float rWidth      = pShape->Width;
            const float rHeight     = pShape->Height;
            const _bstr_t szPath    = pShape->AlternativeText;

            Excel::ShapePtr pNewShape = pShapes->AddPicture(szPath, Office::msoFalse, Office::msoTrue, rLeft, rTop, rWidth, rHeight);
            if (pNewShape)
            {
                pShape->Delete(); 
                nIndex = 0;
            }
        }
        break;
    }
} 
```

# aspectj - aop.xml 的自定义位置

> ID：12742791
> 
> 赞同：1
> 
> 时间：2012-10-05T08:53:16.643
> 
> 标签：aspectj

有一个系统属性可以为 aspectJ aop.xml 配置提供自定义位置。

-D org.aspectj.weaver.loadtime.configuration=META-INF/myaop.xml

我可以将此位置作为应用程序 WAR 之外某处的绝对位置提供吗？当我尝试时它没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:03:04.420

查看 AspectJ 1.7.1 的源代码，您似乎可以为您的 aop.xml 提供文件 URL。可能也适用于早期版本，我还没有检查过。

所以像 -Dorg.aspectj.weaver.loadtime.configuration=file://path/to/aop.xml 这样的东西应该可以工作。

# android - 我的 Xml 设计不适用于所有 android 设备？

> ID：12742792
> 
> 赞同：4
> 
> 时间：2012-10-05T08:53:16.897
> 
> 标签：android, xml, compatibility

在我的项目中，我的设计在我的 android HTC 2.3.4 中运行良好，但在 4.0.1 上我的屏幕没有显示完整（一些设计从底部切割）。为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T08:58:26.130

由于您尚未发布任何代码，我将简要介绍一下 android 布局和资源。

您必须为您的应用程序创建多个资源。Android 有 4 种分辨率（ldpi、mdpi、hdpi 和 xhdpi）和 4 种通用屏幕尺寸（小、中、大和特大）。因此，您必须制作 4 种布局（如果您不打算支持平板电脑，则必须制作 3 种布局，因为平板电脑属于超大类别）以支持屏幕尺寸。

这是一个一般指南：

将小、中、大和特大的布局放在 res/ 文件夹中，如下所示：

```
res/layout/sample_layout.xml             // default layout
res/layout-small/sample_layout.xml       // layout for small screen size
res/layout-large/sample_layout.xml       // layout for large screen size
res/layout-xlarge/sample_layout.xml      // layout for extra large screen size 
```

你也可以使用

`res/layout-land/sample_layout.xml`适用于所有屏幕尺寸的横向，或者您可以将特定屏幕尺寸的横向布局定位为`res/layout-medium-land/sample_layout.xml`

请注意，所有布局都具有相同的名称。

准备好布局后，还需要注意图像分辨率

再次在您的 res/ 文件夹中添加如下图像：

```
res/drawable-ldpi/sample_image.png         // low density
res/drawable-mdpi/sample_image.png         // medium density
res/drawable-hdpi/sample_image.png         // high density
res/drawable-xhdpi/sample_image.png        // extra high density 
```

再一次，所有图像都具有相同的名称。

设计图像的一般准则是：

```
ldpi is 0.75x dimensions of mdpi
hdpi is 1.5x dimensions of mdpi
xhdpi is 2x dimensinons of mdpi 
```

通常，我为 320x480 屏幕设计 mdpi 图像，然后按照上述规则将尺寸相乘以获得其他分辨率的图像。

Android 将根据设备自动选择布局和图像的最佳组合。例如，对于高分辨率中等尺寸设备，将向用户显示布局中等和高密度的图像。

确保为所有这些组合创建模拟器并彻底测试您的应用程序。这是官方文档以获取更多信息：

[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-04T07:06:55.650

在这里，我向您发送了有关设备屏幕和密度的文档，它将帮助您了解哪个设备将从哪个文件夹中获取图像...！![安卓屏幕尺寸和密度](../Images/f31d45a5396d90762cf1e235def1369b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:01:30.233

一种布局并不总是适用于所有不同的屏幕尺寸。由于 android 至少有 4 种不同的屏幕尺寸（小、中、大、特大），您要么需要以智能的方式使用 dp（像素密度），要么为每个屏幕分辨率设置不同的布局（我个人推荐）

您这样做的方法是为您想要的每种布局类型创建文件夹，如下所示。引用自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)：例如，以下是应用程序中的资源目录列表，该应用程序为不同的屏幕尺寸和不同的位图可绘制介质提供不同的布局设计，高和超高密度屏幕。

res/layout/my_layout.xml // 正常屏幕尺寸的布局（“默认”）

res/layout-small/my_layout.xml // 小屏幕布局

res/layout-large/my_layout.xml // 大屏幕布局

res/layout-xlarge/my_layout.xml // 超大屏幕的布局

res/layout-xlarge-land/my_layout.xml // 横向超大布局

你也可以只使用

```
<supports-screens android:smallScreens="false" 
```

在您的清单中，以便选择您希望它在哪些屏幕尺寸上可用。但是如果他们有不同尺寸的屏幕，人们将根本无法从商店下载它

# video - 切换到全屏时是否可以禁用 html5 视频控件？

> ID：12742793
> 
> 赞同：2
> 
> 时间：2012-10-05T08:53:18.800
> 
> 标签：video, custom-controls, html5-video, fullscreen, addeventlistener

我的要求是永远不要显示控件。但是当我切换到全屏时，控件会自动启用。有没有办法使它们失效？

我尝试通过 javascript (video.controls=false) 禁用但徒劳无功，而相同的代码在我程序的另一部分工作正常。

我在 webkitfullscreenchange 侦听器处理程序中包含了控件禁用代码。处理程序在全屏按钮单击时被调用，但控件并未被禁用。

PS我在用户按钮点击时启用全屏。

这是我的 webkitfullscreenchange 监听器代码：

```
document.addEventListener('webkitfullscreenchange', function() {
    video.controls = false;
    console.log('webkitfullscreenchange event fired');      
}, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:52:26.443

我猜以下应该在css中工作

```
ul.vjs-controls > li.vjs-fullscreen-control { display: none; } 
```

# apache-flex - 如何在 Chrome 中禁用 Flash Player 自动更新？

> ID：12742795
> 
> 赞同：3
> 
> 时间：2012-10-05T08:53:24.383
> 
> 标签：apache-flex, google-chrome, flash

有谁知道如何禁用 Chrome 随附的 Flash Player 的自动更新？问题是，当您禁用它时（因为您想启用手动安装的），每次 Chrome 更新时都会重新启用它。

作为开发人员，这非常烦人，因为调试播放器被非调试播放器取代。如果您希望您的用户使用特定版本的 Flash Player 而不是内置版本，这也是一个问题。

我可以找到有关禁用内置插件 [1] 的信息，但找不到有关禁用自动更新的信息。

[1] [http://support.google.com/chrome/bin/answer.py?hl=en&answer=108086](http://support.google.com/chrome/bin/answer.py?hl=en&answer=108086)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T20:56:55.723

我在开发频道（针对 OSX）上使用 Chrome，当我收到更新时，Pepper Flash 仍然处于禁用状态。

[http://www.chromium.org/getting-involved/dev-channel](http://www.chromium.org/getting-involved/dev-channel)

# sql - 将行更改为列

> ID：12742799
> 
> 赞同：0
> 
> 时间：2012-10-05T08:53:40.453
> 
> 标签：sql, sql-server-2008, tsql

我有这个查询：

```
SELECT     
   dbo.[Values].Value, dbo.Definition.FieldName, dbo.Definition.DefinitionID
FROM         
   dbo.Records AS R 
INNER JOIN
   dbo.[Values] ON R.RecordID = dbo.[Values].RecordID 
INNER JOIN
   dbo.Definition ON dbo.[Values].DefinitionID = dbo.Definition.DefinitionID 
```

结果是：

```
Value   FieldName   DefinitionID
1   test new    6
4   abc 6
0   test new    7
0   abc 7
34  test new    8
910 abc 8 
```

等等

我试图得到这个：

```
test new | abc | DefinitionID
1           4     6
0           0     7
34          910   8 
```

我试图改变这一点，但没有成功。列`dbo.[Values].Value`是类型`nvarchar(MAX)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:57:49.923

```
select [test new],[abc],DefinitionID
from
(
   -- your query here
SELECT     dbo.[Values].Value, dbo.Definition.FieldName, dbo.Definition.DefinitionID 
FROM         dbo.Records AS R INNER JOIN 
                      dbo.[Values] ON R.RecordID = dbo.[Values].RecordID INNER JOIN 
                      dbo.Definition ON dbo.[Values].DefinitionID = dbo.Definition.DefinitionID 
) src
PIVOT
(MAX(Value) for FieldName in ([test new],[abc])) p 
```

# javascript - 在圆上均匀分布点的算法（壳模型 - 化学）

> ID：12742802
> 
> 赞同：1
> 
> 时间：2012-10-05T08:53:46.913
> 
> 标签：javascript, algorithm, chemistry

我想创建一个插画脚本，将点放在一个圆圈周围。

假设给定了壳，但我需要一种方法来在 n 大小的圆圈上均匀分布一定数量的点（电子）。例如，第一个圆圈上有 2 个点，第二个圆圈上有 8 个，等等。

[这是一个例子](http://en.wikipedia.org/w/index.php?title=File%3aElectron_shell_051_Antimony.svg&page=1)

重新表述我的问题：我最多有 7 个圈子都设置好了。我如何分散这些圆圈上的点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:03:33.220

由于整个圆是`2 * PI`弧度，圆心在 (0, 0) 并且假设您有点`n`，您必须将第 i 个点放在坐标 x =`R * cos(i * 2 * PI / n)`和 y =`R * sin(i * 2 * PI / n)`上，因为`i = 0..n-1`其中`R`是当前圆的半径。

这都是关于[极坐标系的](http://en.wikipedia.org/wiki/Polar_coordinate_system)

# asp.net-mvc - ASP.NET MVC 4 中的 Web Api 中的路由

> ID：12742803
> 
> 赞同：7
> 
> 时间：2012-10-05T08:53:51.127
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

我正在使用带有 ASP.NET MVC 4 的 web api。

我有以下命名控制器

*   客户控制器：控制器
*   客户ApiController：ApiController

早些时候我`CustomerApiController`被命名`CustomersController`为访问它，我只需输入以下网址

> > **本地主机/api/客户**

但现在我必须将 api 控制器名称保留为`CustomerApiController`. 我希望能够使用`localhost/api/Customers`我必须进行的更改来使用相同的方法？

我尝试在`RouteConfig.cs`文件中进行一些更改。我尝试将以下内容添加到 RegisterRoutes 方法，但它们都不起作用。

```
routes.MapHttpRoute(
            name: "API Default",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

routes.MapRoute(
            name: "Customers",
            url: "api/customer/",
            defaults: new { controller = "CustomerApi", action = "Get", id = UrlParameter.Optional }
        ); 
```

请有人指导我。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T09:50:36.760

好吧，您的代码中有两个问题。您正在使用 MapRoute 而不是 MapHttpRoute。您还应该将更详细的路线放在第一位，这样它就不会被更通用的路线所吞噬：

```
routes.MapHttpRoute(
    name: "Customer",
    url: "api/Customer/{id}",
    defaults: new { controller = "CustomerApi", action = "Get", id = UrlParameter.Optional }
); 

routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

现在，如果您希望您的解决方案更通用（当您有更多需要像这样修改的控制器时），您可以使用自定义`HttpControllerRouteHandler`来转换传入的控制器名称，这样您就可以保持默认路由。

首先，您需要创建自定义`HttpControllerRouteHandler`：

```
public class CustomHttpControllerRouteHandler : HttpControllerRouteHandler
{
    protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        requestContext.RouteData.Values["controller"] = requestContext.RouteData.Values["controller"].ToString() + "Api";

        return base.GetHttpHandler(requestContext);
    }
} 
```

现在您可以像这样注册您的 HttpRoute：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
).RouteHandler = new CustomHttpControllerRouteHandler(); 
```

这样，当您将*Customer*放入 URL 时，引擎会将其视为*CustomerApi*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:59:24.530

您可以扩展[DefaultHttpControllerSelector](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.defaulthttpcontrollerselector%28v=vs.108%29.aspx)并覆盖 GetControllerName 以应用自定义规则。默认实现只是从路由数据中返回“控制器”变量的值。自定义实现可以将其映射到其他值。请参阅[路由和操作选择](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)。

# python - 在 python v.3 中打印数字列表

> ID：12742806
> 
> 赞同：6
> 
> 时间：2012-10-05T08:54:10.703
> 
> 标签：python, python-3.x

我正在使用 Python 3.2.3 版。我试图连续打印一个数字列表，打印命令似乎总是在一行中打印一个数字。

例子

```
numbers = [1, 2, 3, 4, 5];
for num in numbers:
    print("\t ", num) 
```

输出是：

```
1

2
... 
```

所需的输出是 1 2 3 4 5

我会很感激你的帮助。Ps 我在这里搜索了网络，大多数问题都与 Python 2.7 有关。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T08:56:24.680

使用`end`参数来抑制（或替换）自动 EOL 输出：

```
print("\t ", num, end='') 
```

或者，您可能应该只使用：

```
print('\t'.join(map(str, [1, 2, 3, 4, 5]))) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-06T18:41:06.250

除了其他答案之外，现在 print 是一个函数，还有一种巧妙的方法：

```
print(*numbers, sep='\t') 
```

与您的原始代码不同，这不会在第一个数字之前放置一个制表符。如果你想要那个额外的标签，最简单的方法就是在数字之前放一个空白项，这样它就会创建一个额外的标签分隔符：

```
print('', *numbers, sep='\t') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T08:55:55.913

您可以使用`.join()`制表符加入它们：

```
>>> numbers = [1, 2, 3, 4, 5]
>>> print('\t'.join(map(str, numbers)))
1   2   3   4   5 
```

`map(str, numbers)`与 相同`[str(n) for n in numbers]`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T08:58:29.907

您可以使用`sys.stdout.write()`而不是`print()`，它将立即将您的输出发送到输出流，并且没有换行符。

这具有丑陋的缺点和不一次将整个字符串存储在内存中的优点。（`join`如果您的阵列非常非常大，该方法会使您的计算机崩溃。）

# java - Oracle DB连接错误：包被密封

> ID：12742809
> 
> 赞同：2
> 
> 时间：2012-10-05T08:54:26.163
> 
> 标签：java, sql, oracle, jdbc

在尝试执行 sql 查询时出现异常：

> java.lang.SecurityException：密封违规：包 oracle.jdbc.driver 已密封

看起来很精简，jdbc 驱动程序之间存在冲突。有没有人遇到过这样的问题？谢谢。

# eclipse - Glassfish 3.1 使用 Eclipse 进行远程调试

> ID：12742811
> 
> 赞同：0
> 
> 时间：2012-10-05T08:54:29.300
> 
> 标签：eclipse, glassfish

我已经在远程 Glassfish 服务器上部署了我的 WAR（不是 Eclipse 运行的同一台机器），并且想使用 Eclipse 进行远程调试。

以下是我遵循的步骤：

1) 在 Glassfish 中启用调试 ( start-domain --user admin --debug shopserver-grp01 ) 在服务器实例的 JVM 设置中启用调试。

2）在Eclipse中启动Debug“Remote Java Application”并成功连接到Glassfish服务器的jdb端口。

3) 将视角更改为“调试”，我可以看到连接成功并且正在运行服务器线程。

4) 在我的服务类中切换了一些断点。

5) 打开浏览器并使用一些参数访问我的 REST 服务。

但是 Eclipse 不会在标记的断点处暂停？

有小费吗 ？构建时有什么特殊的编译器参数吗？我使用 Maven。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:04:04.593

您无法调试在没有调试信息的情况下编译的 Java 类。如果该类不包含此信息，则您无法在运行时调试该类。这是一个特殊的编译器选项，用于减少类大小和防止调试。

您能否检查一下 glassfish 是否包含此信息。

[确定 .class 文件是否使用调试信息编译？](https://stackoverflow.com/questions/1508235/determine-whether-class-file-was-compiled-with-debug-info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:00:29.787

您能否尝试另一个 Java IDE 或调试器来消除 Eclipse 调试器被窃听的可能性？

# scala - inputRadioButton - When options attribute contains HTML code

> ID：12742813
> 
> 赞同：2
> 
> 时间：2012-10-05T08:54:35.867
> 
> 标签：scala, playframework, playframework-2.0

我想在我的表单模板中使用`@inputRadioGroup`帮助器（在[此处找到）：](http://www.playframework.org/documentation/api/2.0.3/scala/index.html#views.html.helper.inputRadioGroup%24)

```
@inputRadioGroup(
          contactForm("gender"),·
          options = options("M"->"Male","F"->"Female")) 
```

好吧，一切都好。但我想使用`icon/image`而不是`text`. 类似的东西（使用 twitter bootstrap css）：

```
@inputRadioGroup(
          contactForm("gender"),·
          options = options("M"->"<i class="icon-user"></i>","F"->"<i class="icon-user"></i>")) 
```

好吧，在这种情况下，生成的 html 代码是：

```
<label for="gender_M">
&amp;lt;i class=&amp;quot;icon-user&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;
</label> 
```

图标 html 被转义。不显示图标。我怎样才能用这个助手来发展我的想法？

注意：我尝试使用`Html()`方法，但遇到了同样的问题。以下 Scala 行代码：

```
options("M"->Html("<i class=\"icon-user\"></i>").text) 
```

生成以下 HTML 代码：

```
<label for="gender_M">&lt;i class=&quot;icon-user&quot;&gt;&lt;/i&gt;</label> 
```

浏览器中的渲染是：

```
<i class="icon-info-sign"></i> 
```

没有显示图标，因为 html 转义......有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:44:29.573

覆盖默认字段帮助器，例如，通过`inputRadioButton.scala.html`在`views.utils`包中创建具有以下内容的文件（根据需要进行修改）：

```
@(field: play.api.data.Field, options: Seq[(String,String)], args: (Symbol,Any)*)(implicit handler: helper.FieldConstructor, lang: play.api.i18n.Lang)

@helper.input(field, args:_*) { (id, name, value, htmlArgs) =>
  <span class="buttonset" id="@id">
    @options.map { v =>
      <input type="radio" id="@(id)_@v._1" name="@name" value="@v._1" @(if(value == Some(v._1)) "checked" else "") @toHtmlArgs(htmlArgs)>
      <label for="@(id)_@v._1">@Html(v._2)</label>
    }
  </span>
} 
```

然后当你想在你的字段模板中显示时：

```
@import helper._
@import views.utils.inputRadioButton 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:04:15.220

如果您需要将类应用于生成的标签标签，那么您就不走运了。创建 radioButtonGroup 的代码本身就是一个 scala 模板——它看起来像这样：

```
@input(field, args:_*) { (id, name, value, htmlArgs) =>
  <span class="buttonset" id="@id">
    @options.map { v =>
      <input type="radio" id="@(id)_@v._1" name="@name" value="@v._1" @(if(value == Some(v._1)) "checked" else "") @toHtmlArgs(htmlArgs)>
      <label for="@(id)_@v._1">@v._2</label>
    }
  </span>
} 
```

如您所见，标签标签填充了选项标签，这是一个将被转义的字符串。您可以使用具有如下选择器的 CSS 规则设置背景图像：

```
span.buttonset#fieldId label: 
```

[或者，您可以手动创建 HTML，或者根据文档](http://www.playframework.org/documentation/2.0.4/ScalaFormHelpers)编写自己的帮助程序。

# objective-c - 表视图无/不更新

> ID：12742815
> 
> 赞同：2
> 
> 时间：2012-10-05T08:54:56.437
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个只有一个单元格的表格视图。当我调用一个方法时，我尝试刷新它并且文本标签的文本应该改变。但是它不会，它只有在视图重新出现时才会改变。

我`NSLog()`在很多地方添加了正确的方法和条件

我尝试了几件事：

```
reloadData
setNeedsDisplay
setNeedsLayout
reloadCell
reloadRowsAtIndexPaths: withRowAnimation: 
```

但是**没有任何**效果，我知道我的`UITableViewDataSource`代码没有问题，因为它被正确调用了。

这是我能给你的最合适的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    tableView.scrollEnabled = NO;

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier: @"cell"];

    if (cell) {

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        if ([[TravelLogViewController locationArray] count]) {

            NSDictionary *flight = [NSDictionary dictionaryWithObjectsAndKeys:[[TravelLogViewController locationArray] lastObject], @"name", [[TravelLogViewController dateArray] lastObject], @"date", [[TravelLogViewController milesGainedIndex] lastObject], @"miles", nil];

            cell.detailTextLabel.textColor = [UIColor blackColor];

            cell.textLabel.numberOfLines = 2;
            cell.detailTextLabel.numberOfLines = 2;

            cell.textLabel.font = [UIFont fontWithName:@"Avenir" size: 14.0];
            cell.detailTextLabel.font = [UIFont fontWithName:@"Avenir" size: 12.0];

            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            cell.textLabel.text = [flight objectForKey: @"name"];

            cell.detailTextLabel.text = [NSString stringWithFormat:@"Flight Date: %@, Miles Gained: %.1f", [flight objectForKey: @"date"], [[flight objectForKey: @"miles"] doubleValue]];

            cell.backgroundColor = [UIColor colorWithWhite:0.92 alpha:1];
            //        cell.backgroundColor = [UIColor clearColor];
        }
        else {

// This gets called when I want it to, but the textLabel text or detailTextLabel text is not changed

            cell.detailTextLabel.text = nil;
            cell.textLabel.text = nil;
            cell.textLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size: 18.0];
            cell.textLabel.text = @"\n\n                 No Flights";
        }
    }

    return cell;
} 
```

更新：

我正在使用 ARC，并且在尝试更新单元格时发现表格视图为零，但是我已经修改了单元格并且不知道为什么！

我没有在任何地方取消或释放我的表格视图，它仍然应该被分配

顺便说一句，我有一个标签栏控制器

更新：

我现在已经开始赏金，一个多星期后，我真的觉得这个问题需要更多的关注和答案，我已经多次检查我的代码，我**看**不出为什么表格视图没有更新 / is `nil`。

更新：

好的，我忘了提到用户可以滑动删除单元格。当他这样做时，它实际上并没有**删除**单元格，它只是更改了它的文本（即它没有更新的部分）。一旦用户滑动删除，我输入日志`viewDidLoad`并且`viewDidAppear`表格视图似乎是有效的......这是我的代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

if (editingStyle == UITableViewCellEditingStyleDelete) {

    TravelLogViewController *travel = [[TravelLogViewController alloc] init];
    [travel manuallyDeleteTopCellData]; // Deletes some data in other view controller and calls the method `proceedWithDeletion`
}
}
- (void)proceedWithDeletion {

// Method is called from another view controller

NSLog(@"%@", mostRecentFlight.description); // NIL HERE

[mostRecentFlight reloadData];
[mostRecentFlight setNeedsDisplay];
[mostRecentFlight setNeedsLayout];

} 
```

**TravelLogViewController**

```
- (void)manuallyDeleteTopCell {

[TheMileIndexViewController deductDesiredMilesToIndex: [[milesGainedIndex lastObject] floatValue]];

[locationArray removeLastObject];

[milesGainedIndex removeLastObject];

[dateArray removeLastObject];

MenuMileIndexViewController *menu = [[MenuMileIndexViewController alloc] init];
[menu proceedWithDeletion];

} 
```

总而言之，一个视图加载/出现，表格视图是有效的。当用户滑动删除时，它**实际上**并没有删除该行，它只是调用另一个视图控制器调用的`TravelLogViewController`方法调用`manuallyDeleteTopCellData`它删除一些数据，然后该方法调用我的原始视图控制器中的另一个方法，调用`proceedWithDeletion`它应该重新加载表视图的位置，但没有（问题）。这样做的原因是因为在`proceedWithDeletion`table view 中是 nil，但是为什么呢！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:08:48.610

这是一个没有任何代码的盲拍，但是，如果你使用`dequeueReusableCellWithIdentifier`，它可能会导致问题。如果您有一个单元格，则可以每次在您的单元格中创建它，`cellForRowAtIndexPath`而不是重复使用已创建的单元格。这么小的桌子不会影响性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T20:43:14.117

我几乎可以确认问题不在您正在寻找或描述的区域。

我从头开始创建了一个示例项目，只需放置一个`UITableView`触发`UIButton`a`[table reloadData]`并翻转布尔值的 a 和 a ：

```
BOOL toggle = NO;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier: @"cell"];

    if (cell) {

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        if (toggle )
        {
            NSDictionary *flight = @{@"name" : @"Bob",
                                 @"date" : @"Yesterday",
                                 @"miles" : @"3" };

            cell.textLabel.text = [flight objectForKey: @"name"];
            cell.textLabel.numberOfLines = 2;

            cell.detailTextLabel.numberOfLines = 2;
            cell.detailTextLabel.textColor = [UIColor blackColor];
            cell.detailTextLabel.text = [NSString stringWithFormat:@"Flight Date: %@, Miles Gained: %.1f", [flight objectForKey: @"date"], [[flight objectForKey: @"miles"] doubleValue]];

        } else {

            cell.textLabel.text = @"blank label";
            cell.detailTextLabel.text = @"blank detail";
        }
    }
    return cell;
}

- (IBAction)toggleValue:(id)sender
{
    toggle = !toggle;
    NSLog( @"toggle is now %@", (toggle) ? @"YES" : @"NO" );

    [tv reloadData];
} 
```

通过引用布尔值`tableView:cellForRowAtIndexPath:`并使用您提供的代码，您可以看到行在`[table reloadData]`调用时确实按预期更新。

您可以在此处下载示例项目 (35KB)：[http ://rdas.me/SampleProject.zip](http://rdas.me/SampleProject.zip)

我希望这对你有帮助。如果没有别的，它应该可以帮助您隔离问题实际上可能存在的位置。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T19:55:18.637

在您的实现中`manuallyDeleteTopCell`，此时`TravelLogViewController`您实例化一个新`MenuMileIndexViewController`的：

```
MenuMileIndexViewController *menu = [[MenuMileIndexViewController alloc] init];
[menu proceedWithDeletion]; 
```

这是一个不同的控制器，既不正确初始化也不负责屏幕上的视图。特别是，它不具有相同的`mostRecentFlight`属性。为了`TravelLogViewController`调用您的原始控制器，您需要将其作为参数传递给`manuallyDeleteTopCell`并调用该控制器，例如如下

```
- (void)manuallyDeleteTopCell:(MenuMileIndexViewController *)origin {
    [TheMileIndexViewController deductDesiredMilesToIndex: [[milesGainedIndex lastObject] floatValue]];

    [locationArray removeLastObject];
    [milesGainedIndex removeLastObject];
    [dateArray removeLastObject];

    [origin proceedWithDeletion];
} 
```

并将调用代码改写如下：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        TravelLogViewController *travel = [[TravelLogViewController alloc] init];
        [travel manuallyDeleteTopCellData:self];
} 
```

以前的建议：

1.  确保您已在 Interface Builder 中正确设置了插座。您在评论中说您这样做了，但在另一点您说您正在使用标签栏控制器。确保您在常规视图控制器（即 的子类`UIViewController`）上设置插座，该控制器当前可见并包含在您正在使用的实例的`viewControllers`属性中。**不要子类**化（请参阅明确禁止它的[Apple 文档）。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)**[检查]**`UITabBarController`**`UITabBarController`**

***   在调用此方法时，实现`viewDidLoad`常规视图控制器的方法和`NSLog`属性`self.tableView`以验证它是否为非`nil`。**[检查]**

    *   在of中写一条`@synthesize mostRecentFlight = _mostRecentFlight;`语句，并在. 或者，手动实现属性的方法并在此方法内设置断点。如果调用 setter 会触发此断点，这将帮助您找到属性设置为的时间。`@implementation``TravelLogViewController``@interface``setMostRecentFlight:``mostRecentFlight``nil`

    *   假设在步骤 2 的方法中属性不是 nil `viewDidLoad`，请查看对象的**地址**（描述的开头表示`(UITableView *) $1 = 0xXXXXXXXX`为`0xXXXXXXXX`地址）。稍后在代码中（当属性为 nil 时）设置要在其中使用对象的断点。在调试器中键入`po 0xXXXXXXXX`（使用上面的适当地址）。你得到什么回应？** 

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T05:48:02.590

此代码可能是您的问题的根源：

```
MenuMileIndexViewController *menu = [[MenuMileIndexViewController alloc] init];
[menu proceedWithDeletion]; 
```

您正在创建一个全新的`MenuMileIndexViewController`，而不是访问已经存在的实例，这是我认为您想要做的。这个新实例将无法访问存储在`mostRecentFlight`. 在内部`-manuallyDeleteTopCell`，您需要对调用`MenuMileIndexViewController`实例的引用。

它可能就像传递`self`并`-manuallyDeleteTopCellData`使用该变量以随后调用一样简单`-proceedWithDeletion`。例如：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        TravelLogViewController *travel = [[TravelLogViewController alloc] init];
        [travel manuallyDeleteTopCellData:self];
    }
}

- (void)manuallyDeleteTopCell:(id)sender {
    [TheMileIndexViewController deductDesiredMilesToIndex: [[milesGainedIndex lastObject] floatValue]];
    [locationArray removeLastObject];
    [milesGainedIndex removeLastObject];
    [dateArray removeLastObject];
    // MenuMileIndexViewController *menu = [[MenuMileIndexViewController alloc] init];
    [sender proceedWithDeletion];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T09:03:08.447

我通常使用以下代码：

```
[_myTable beginUpdates];

[... update my cell, adding / removing / changing them ...];

[_myTable endUpdates]; 
```

从 5.0 版开始，它适用于我的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T13:05:42.523

根据您的评论，`tableView`您调用的变量`reloadData`是`nil`.

造成这种情况的常见原因是在使用 nib 的情况下缺少指向 IBOutlet 的链接、带有 ARC 的弱 ivar 或使用同名的局部变量屏蔽 ivar。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T16:53:24.307

我在您的代码中找不到任何错误。但是，请确保您设置表视图数据源和委托（应设置在 viewDidLoad/viewDidAppear/viewWillAppear 中的某处）：

```
[tableView setDelegate:self];
[tableView setDataSource:self]; 
```

在此之后，确保从委托方法返回需要显示的行数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [yourDataSource count];
} 
```

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T05:06:57.727

我想注意一下。如果您正在使用情节提要，则无需分配单元格。这段代码就足够了：

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {`

 ````
UITableViewCell *cell = [tableView 
  dequeueReusableCellWithIdentifier:@"PlayerCell"];
Player *player = [self.players objectAtIndex:indexPath.row];
cell.textLabel.text = player.name;
cell.detailTextLabel.text = player.game;
return cell; 
```` 

`}`**

# c# - 在 Excel 中为工作表 2 设置标题

> ID：12742824
> 
> 赞同：1
> 
> 时间：2012-10-05T08:55:16.080
> 
> 标签：c#, excel, header, worksheet

我在为我的工作表 2 设置标题时遇到了一些问题

这是我的代码：

```
 Excel.Application xlApp1 = new Excel.Application();
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet1 = new Excel.Worksheet();
            Excel.Worksheet xlWorkSheet2 = new Excel.Worksheet();
            object misValue = System.Reflection.Missing.Value;

            xlWorkBook = xlApp1.Workbooks.Add(misValue);
            xlWorkSheet1 = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); // Sheet1
            xlWorkSheet1.Name = "XX";
            xlWorkSheet2 = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(2); // Sheet2
            xlWorkSheet2.Name = "YY";

            Excel.Range headerRange = xlApp1.get_Range("A1", "V1");
            headerRange.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;

            for (int i = 1; i < dataGridView1.Columns.Count + 1; i++)
            {

                xlApp1.Cells[1, i] = dataGridView1.Columns[i - 1].HeaderText;

            } 
```

我应该为工作表 2 的新标题创建新的 Excel 应用程序吗？但我没有任何意义。有人可以帮我吗？谢谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:35:16.377

您可以写入任何您想要的单元格，包括标题单元格。只需选择要在其中插入标题的工作表。

```
Excel.Range headerRange = xlWorkSheet1.get_Range("A1", "V1");
headerRange.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;
headerRange.Value = "Header text 1";

headerRange = xlWorkSheet2.get_Range("A1", "V1");
headerRange.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;
headerRange.Value = "Header text 2"; 
```

# java - 在 jpa 中保存对象之前如何知道 id

> ID：12742826
> 
> 赞同：17
> 
> 时间：2012-10-05T08:55:18.393
> 
> 标签：java, oracle, jpa, jpa-2.0

我有一个新对象。我想在保存之前知道 id 。可能吗？或者还有另一种方法？我使用 jpa 作为 orm 和 oracle 作为数据库。

```
@Id
@Basic(optional = false)
@Column(name = "ID", nullable = false)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "woTypeSeq")
private Long id; 
```

我的实体中有一个代码字段。如果用户没有为该`code`字段输入值，我想将代码设置为实体的 ID。如果我坚持实体，当然我可以获取 id 并将代码值设置为 id，但这是额外的查询数据库。

我想做这样的事情

```
if(entity.getCode()==null) {
   entity.setCode(entity.getId);
   jpaDao.saveOrUpdate(entity);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T16:44:11.627

经过长时间的研究，我终于找到了解决方案。

事实上，如果你在jpa中使用***sequence generator***，在将它保存到数据库之前，你肯定无法获得实体的id，因为下一个id将由数据库sequence分配。

***如果您使用自定义生成器***，则有一种获取 id 的方法，您可以在保存之前获取 id。这是简单的实现：

```
public class CustomGenerator extends IdentityGenerator implements Configurable {

    private IdentifierGenerator defaultGenerator;

    public Serializable generate(SessionImplementor session, Object object) throws HibernateException {
        Long idValue = (Long)defaultGenerator.generate(session, object);
        //idValue will be assigned your entity id
        return idValue;
    }

    @Override
    public void configure(Type type, Properties params, Dialect d) throws MappingException {
        DefaultIdentifierGeneratorFactory dd = new DefaultIdentifierGeneratorFactory();
        dd.setDialect(d);
        defaultGenerator = dd.createIdentifierGenerator("sequence", type, params);
    }
} 
```

将 CustomGenerator 用于 id 字段：

```
@Id
@Basic(optional = false)
@Column(name = "ID", nullable = false)
@GenericGenerator(name = "seq_id", strategy = "com.yoncabt.abys.core.listener.CustomGenerator", parameters = { @Parameter(name = "sequence", value = "II_FIRM_DOC_PRM_SEQ") })
@GeneratedValue(generator = "seq_id")
private Long id; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-05T09:02:09.447

使用 @GeneratedValue 类型 ID，您无法提前知道该值（在实际编写之前）。然而，一旦你持久化你的 Bean，id 字段将被填充到该 bean 实例中，你可以获取它而无需对其进行额外的查询。换句话说：

```
MyEntiry myEnt = new MyEntity(); //the id field is null now
entityManager.persist(myEnt);//the id field is populated in myEnt now
Long id = myEnt.getId(); 
```

此外，根据您`EntityManager`的配置方式，您可能还需要先提交事务（手动），然后才能获取该 ID。

# 根据评论更新

如果您想在保存和/或更新实体之前拦截并对其执行某些操作，您可以使用 JPA LifeCycle Listeners（如果您使用的是 JPA 版本 2）：[使用侦听器和回调处理 JPA 生命周期事件](http://www.objectdb.com/java/jpa/persistence/event)。

基本上你可以在你的bean中创建一个方法，用and`validate()`注释它 并在其中进行验证（如果代码为空，则将其设置为id的值）`@PrePersist``@PreUpdate`

# 每第二条评论更新

是的，老实说我刚才才想到：如果 id 是自动生成的，它可能会在 pre-persist 事件之后被填充，这样当你的 pre-persist 代码被执行时，你仍然不知道 id 是什么（您可能还注意到，在示例中，您链接到的 id 不是自动生成的，而是手动设置的）。在这种情况下，您可以做的是向您的实体添加一个布尔字段（带有注释，`@Transient`因此它不会被持久化）调用`isCodeEmpty`（如果没有特别初始化，默认情况下为 false）。然后在`@PrePersist`带注释的方法中检查代码字段的值是否为空，如果是，则将布尔值设置为 true。然后你重构你的`setId(...)`方法，这样（除了设置 id 字段）它会检查这个布尔值，如果为真，则将 code 字段的值设置为 id 字段的值：

```
public class YourEntity {

@Transient
private boolean isCodeEmpty;

public void setId(Whatever id) {
 this.id = id;
 if(isCodeEmpty) {
  this.code = id;
  //if necessary:
  //this.isCodeEmpty = false;
 }
}

@PrePersist
public void validate() {
 if(code == null || code.isEmpty()) {
  isCodeEmpty = true;
 }

}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-05T17:38:44.987

这是对我有用的解决方案：

```
 @Id
    @GeneratedValue( strategy = GenerationType.SEQUENCE, generator = "my_seq" )
    @SequenceGenerator( name = "my_seq", sequenceName = "my_seq" )
    @Access( AccessType.PROPERTY )
    private Long id;

    @Column( name = "CODE", nullable = false, updatable = false )
    private Long code;

    public void setId(Long id) {
        this.id = id;
        if (code == null) {
            code = id;
        }
    } 
```

重要的部分是放置`@javax.persistence.Access( AccessType.PROPERTY )`注解，这使得 Hibernate 使用 getter 和 setter 来访问 id 字段。没有它，当@Id 注解直接放在字段上而不是字段 getter 上时，Hibernate 使用基于字段的访问策略（不使用 getter 和 setter）。链接：[https ://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/chapters/domain/access.htmlhiber](https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/chapters/domain/access.htmlhiber)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T09:03:02.740

只需按照以下步骤操作，您将在完成交易之前获得 ID。

第一步通过使用名为`@EntityListeners`.

```
@Id
@Basic(optional = false)
@Column(name = "ID", nullable = false)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "woTypeSeq")
@EntityListeners(SomeLinstener.class)
private Long id; 
```

第二步

```
public class SomeLinstener{

    @PostPersist
    public void userPostPersist(YourEntity obj) {

        try {
            obj.getId();
        }catch(Exception e) {

        }
    } 
```

这将为您提供一个由您的生成器生成的 id，您可以在需要的地方重用它，这将在单个事务中提供。

希望这对其他人有帮助。

# c# - 在 Windows 8 Metro 中检测到没有导航

> ID：12742827
> 
> 赞同：0
> 
> 时间：2012-10-05T08:55:22.617
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我正在开发我的第一个 Windows 8 应用程序。我需要检测用户是否在 3 分钟后停止导航并重定向到主页。

你有任何想法如何做到这一点（我在这个应用程序中使用 XAML）？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:32:09.307

*   `OnNavigatedTo`在你的函数中启动一个计时器。
*   重置`OnNavigatedFrom`函数中的计时器。
*   当计时器到期时，导航回来

您可以使用`DispatcherTimer`：

```
 DispatcherTimer timer = new DispatcherTimer();
    timer.Interval = TimeSpan.FromMinutes(3);
    timer.Tick += (s,e) => GoBack();
    timer.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:59:29.600

有两种方法。

首先是使用[Reactive Extensions](http://rxwiki.wikidot.com/101samples#toc32)。

```
private static void Main()
{
    Console.WriteLine(DateTime.Now);

    // create a single event in 10 seconds time
    var observable = Observable.Timer(TimeSpan.FromSeconds(10)).Timestamp();

    // raise exception if no event received within 9 seconds
    var observableWithTimeout = Observable.Timeout(observable, TimeSpan.FromSeconds(9));

    using (observableWithTimeout.Subscribe(
        x => Console.WriteLine("{0}: {1}", x.Value, x.Timestamp), 
        ex => Console.WriteLine("{0} {1}", ex.Message, DateTime.Now)))
    {
        Console.WriteLine("Press any key to unsubscribe");
        Console.ReadKey();
    }

    Console.WriteLine("Press any key to exit");
    Console.ReadKey();
} 
```

第二种方法是创建一个计时器，用于检查当前日期与您记录上次导航活动的日期。它的效率远低于 RX，但您可能更喜欢它。我会将计时器放在 App.XAML.cs 中，以便为您全局处理。那样更容​​易。

```
var _Timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(1) };
_Timer.Tick += (s, args) =>
{
    if (m_LastNavigationDate.Add(TimeSpan.FromMinutes(3)) < DateTime.Now)
        RaiseTimeout();
};
_Timer.Start(); 
```

要么会工作

# sql - SQL/Oracle：在具有两个索引的表上使用 OR 选择

> ID：12742833
> 
> 赞同：1
> 
> 时间：2012-10-05T08:55:41.217
> 
> 标签：sql, oracle, indices

我在 Oracle DB 中有一个表，它有两个索引，一个用于表字段 A，一个用于表字段 B。现在我需要选择在字段 A 中具有特定值或在字段 B 中具有另一个特定值的所有记录。

为了使用索引，我当然可以在字段 A 上进行一个 SELECT，然后在字段 B 上进行另一个 SELECT。所以我可以确保两个索引都被使用。

但是，我宁愿使用一个 SELECT 并且 WHERE 子句中的两个字段都与 OR 连接。在这种情况下以及如上所述的设置中，您是否知道 Oracle 是否足够聪明以利用我的两个索引，或者这不可能，所以我应该坚持使用这两个 SELECT 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:00:20.260

您可以使用 a `UNION`（或者`UNION ALL`如果您不想消除重复项）。

```
select ... from myTable where A = <something>
UNION [ALL]
select ... from myTable where B = <something> 
```

或者，您可以将其与 OR 结合在一个查询中，如您所描述的，并查看查询计划以查看索引是否真的被排除在外。

Oracle 有一个非常聪明的优化器，使 SQL***声明性***的全部意义在于，您然后花时间告诉数据库您想要**什么**，并让数据库决定**如何**最好地获得它（必须说一个相当响亮的警告，因为在很多情况下你可以强制优化器做出错误的选择：但根据我的经验，你往往比其他数据库更晚地达到这个障碍）。

在您的情况下，Oracle 可能会做的是检查：

*   存在哪些索引
*   基数，即特定索引的不同值的“分布”
*   统计数据，多少数据等。

然后做出明智的决定。并且该决定将基于执行查询时的当前数据（或至少是上次更新统计信息的时间）。因此可以使用提示来强制使用索引，但这样做可能会阻止 Oracle 在*以后*找到通过数据的最有效路径，此时数据看起来大不相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:01:05.983

通常，尝试以强制 Oracle 使用索引的方式来设计您的 select 语句是一个坏主意，因为您不太可能确切地知道 Oracle 将如何实际使用优化器中的索引。

如果需要，您可以强制 Oracle 使用索引（带有提示），但优化器通常会做得更好。

# python - 在 SQLAlchemy 中映射可选并获取正确的主键

> ID：12742838
> 
> 赞同：0
> 
> 时间：2012-10-05T08:55:56.000
> 
> 标签：python, orm, group-by, sqlalchemy, primary-key

我有这样的表：

```
from sqlalchemy import Column, Integer, select
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

class Blah(Base):
    __tablename__ = 'Blah'
    container_id = Column(Integer, primary_key=True)
    blah_id = Column(Integer, primary_key=True)
    gprop = Column(Integer, index=True, nullable=False)

class GProp(Base):
    __table__ = select([
        Blah.container_id, Blah.gprop
    ]).group_by(
        Blah.container_id, Blah.gprop
    ).alias() 
```

因为它`GProp.__table__.primary_key`拿起了`container_id`列，但我找不到使`gprop`列成为主键的一部分的方法。这打破了我的查询，SQLAlchemy 只会`GProp`为每个容器加载一个。

到目前为止未成功的修复：添加`Column`属性是被禁止的，因为它重新定义了现有的列，添加一个`PrimaryKeyConstraint`to`__table_args__`没有效果，并且猴子补丁`__table__.primary_key`被错误的断言捕获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:25:00.330

好的，正在添加

```
__mapper_args__ = dict(primary_key=[__table__.c.container_id, __table__.c.gprop]) 
```

做这项工作，即使它没有反映在`__table__.primary_key`.

# apache - 重定向除重定向页面和图像之外的所有内容

> ID：12742839
> 
> 赞同：0
> 
> 时间：2012-10-05T08:55:57.690
> 
> 标签：apache, .htaccess, mod-rewrite

例如，我正在尝试将所有页面临时重定向到另一个维护页面，但我显然不希望它被重定向到的页面被重定向，我也不希望图像被重定向。

我有以下但我得到一个内部服务器错误..（我也允许我的 IP）

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REMOTE_HOST} !^123\.45\.67\.89
RewriteCond %{REQUEST_URI} !^/message.php
RewriteCond %{REQUEST_URI} !^*\.(png|jpg|jpeg|gif)
RewriteRule ^(.*)$ /message.php [R=302,L] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:28:54.463

正如汤姆指出的那样，您的 RewriteCond “开始于”`^`模式`!^*\.(png|jpg|jpeg|gif)`需要一个点

`!^.*\.(png|jpg|jpeg|gif)`

或者相反，您可以使用“结尾”匹配`$`而不是使用通配符匹配开始，例如

```
RewriteCond %{REQUEST_URI} !\.(png|jpg|jpeg|gif)$ 
```

# c++ - 使用 rapidjson 检索 JSON 字符串中的嵌套对象

> ID：12742840
> 
> 赞同：16
> 
> 时间：2012-10-05T08:56:03.747
> 
> 标签：c++, json, rapidjson

我需要在 JSON 字符串中检索嵌套对象，我正在尝试使用 rapidjson 来完成。我发现的只是如何检索数组和基本类型，而不是子对象。我创建了以下玩具示例，它给出了一个错误：

```
rapidjson::Document document;
std::string test =  " { \"a\": { \"z\" : 21 } } ";
std::cout << test << std::endl;
if ( document.Parse<0>( test.c_str() ).HasParseError() ) {
    std::cout << "Parsing error" << std::endl;
} else {
    if ( document[ "a" ].IsObject() ) {
        std::cout << "OK" << std::endl;
        std::cout << document[ "a" ].GetString() << std::endl;
    }
} 
```

这是执行时的输出：

```
{ "a": { "z" : 21 } } 
OK
JSONTest: ../rapidjson/document.h:441: const typename Encoding::Ch* rapidjson::GenericValue<Encoding, Allocator>::GetString() const [with Encoding = rapidjson::UTF8<char>, Allocator = rapidjson::MemoryPoolAllocator<rapidjson::CrtAllocator>]: Assertion `IsString()' failed. Aborted 
```

如何检索内部对象以继续解析？谢谢。

**编辑**：我需要的是获取内部对象的字符串表示，这样我就可以调用另一个函数来解析它。

**编辑 2**：允许将内部对象作为字符串检索的代码：

```
rapidjson::Document document;
std::string test =  "{\"a\":{\"z\":21}} ";
if ( document.Parse<0>( test.c_str() ).HasParseError() ) {
    std::cout << "Error parsing" << std::endl;
} else {
    if ( document[ "a" ].IsObject() ) {
        rapidjson::StringBuffer sb;
        rapidjson::Writer<rapidjson::StringBuffer> writer( sb );
        document[ "a" ].Accept( writer );
        std::cout << sb.GetString() << std::endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T09:39:16.670

您需要手动遍历对象的成员，因为 GetString() 仅适用于字符串成员，而 document["a"] 是一个对象。您需要使用 MemberIterator 变量遍历该对象的成员。我有超过 15 年没有使用 C* 的经验，所以我只能大致了解它应该如何工作：

```
for (MemberIterator m = document["a"].MemberBegin(); m != document["a"].MemberEnd(); ++m) {
    std::cout << m.name << " " << (m.IsNumber()?m.GetNumber():m.GetString()) << endl;
} 
```

此外，您可能想查看 Accept() 方法，它似乎返回您给它的对象的 JSON 字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T14:53:24.387

如果元素是一个对象，您可以使用 [] 访问子属性：

```
for (SizeType i = 0; i < layers.Size(); i++){   
  cout << layers[i]["name"].GetString() << endl;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-22T12:09:32.377

在 rapidjson - [JSON Pointers](http://miloyip.github.io/rapidjson/md_doc_pointer.html)中实现了另一种很棒的方法。它们具有实验状态，根据文档应包含在 v.1.1 中。无论如何，这种方法看起来像 XML 的 XPATH，所以要获得嵌套值，我们可以使用如下语法

```
Value* tmpValue = GetValueByPointer(doc, "/result/job/blob"); 
```

我尝试了这个功能，在我看来这比迭代器更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-28T00:58:52.303

```
GenericObject doc2 = document["a"].GetObjectW();
int z = doc2["z"].GetInt(); 
```

一种使用用于 c++ 的 rapidJson lib 解析 json 内嵌套对象的简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T12:18:27.113

您可以使用指针来获取子对象：

```
Value& a = *GetValueByPointer(document, "/a");
int z = a["z"].GetInt(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-05T16:41:02.503

这是一个将嵌套对象作为`rapidjson::Document`对象的示例代码。

```
Document get_nested(Document &d, std::string key){
rapidjson::StringBuffer buffer;
const char *key_ctr = key.c_str();

assert(d[key_ctr].IsObject());

rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);
d[key_ctr].Accept(writer);

rapidjson::Document result;
rapidjson::StringStream s(buffer.GetString());
result.ParseStream(s);

return result;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-07T09:00:37.057

您还可以使用 Document 的指针：

```
Document *document= new Document();
document->parse( test.c_str()); 
```

并放入 Value 指针并使用它

```
Value *val= document;
val = &(*val)["a"];
val = &(*val)["z"];
cout << val->GetString(); 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-03-30T14:04:09.083

这是我最近在做的事情：

```
void enter(const Value &obj, size_t indent = 0) { //print JSON tree

if (obj.IsObject()) { //check if object
    for (Value::ConstMemberIterator itr = obj.MemberBegin(); itr != obj.MemberEnd(); ++itr) {   //iterate through object   
        const Value& objName = obj[itr->name.GetString()]; //make object value

        for (size_t i = 0; i != indent; ++i) //indent
            cout << " ";

        cout << itr->name.GetString() << ": "; //key name

        if (itr->value.IsNumber()) //if integer
            std::cout << itr->value.GetInt() ;

        else if (itr->value.IsString()) //if string
            std::cout << itr->value.GetString();

        else if (itr->value.IsBool()) //if bool
            std::cout << itr->value.GetBool();

        else if (itr->value.IsArray()){ //if array

            for (SizeType i = 0; i < itr->value.Size(); i++) {
                if (itr->value[i].IsNumber()) //if array value integer
                    std::cout << itr->value[i].GetInt() ;

                else if (itr->value[i].IsString()) //if array value string
                    std::cout << itr->value[i].GetString() ;

                else if (itr->value[i].IsBool()) //if array value bool
                    std::cout << itr->value[i].GetBool() ;

                else if (itr->value[i].IsObject()){ //if array value object
                    cout << "\n  ";
                    const Value& m = itr->value[i]; 
                    for (auto& v : m.GetObject()) { //iterate through array object
                        if (m[v.name.GetString()].IsString()) //if array object value is string
                            cout << v.name.GetString() << ": " <<   m[v.name.GetString()].GetString();
                        else //if array object value is integer
                            cout << v.name.GetString() << ": "  <<  m[v.name.GetString()].GetInt();

                       cout <<  "\t"; //indent
                    }
                }
                cout <<  "\t"; //indent
            }
        }

        cout << endl; 
        enter(objName, indent + 1); //if couldn't find in object, enter object and repeat process recursively 
    }     
}
} 
```

这可以处理任何类型的 JSON 树。您所要做的就是像这样传递一个值：

```
Value v = document.GetObject();
Value& m= v;
enter(m); 
```

你完成了！

# wordpress - 如何使用 git-svn 向我的 Wordpress 插件添加标题图像？

> ID：12742842
> 
> 赞同：3
> 
> 时间：2012-10-05T08:56:10.280
> 
> 标签：wordpress, git-svn

我正在尝试使用[标题图像自定义技巧](http://make.wordpress.org/core/2011/12/21/been-giving-a-lot-of-thought-to-how/)，它允许 wordpress 插件开发人员在他的 Wordpress 目录插件页面上显示自定义标题图像。

为此，我需要在 svn 下的插件根目录中创建一个“assets”目录（与主干和分支处于同一级别），并将我的图像放在那里。[您可以通过 Yoast 插件](http://plugins.svn.wordpress.org/wordpress-seo/)查看 SEO 的结构。问题是我想使用 git-svn 来实现这一点，而不是 svn。

我已经设置了一个 git/svn repo 并成功推送到 svn trunk 上，甚至创建了一个标签。我可以看到在 svn repo 上为我创建了[assets](http://plugins.svn.wordpress.org/grayscale/)目录，但我不知道如何在目录中添加文件。

问题是“资产”目录超出了 svn 标准布局，无法通过分支访问。我想我将不得不以某种方式指定非标准布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T13:25:36.643

聚会迟到了，但希望这对某人有所帮助。

您可以这样做，但您需要在单独的分支上管理资产文件夹。

`http://plugins.svn.wordpress.org/{plugin}/assets` 这将允许您通过设置单独的遥控器直接推送更改。

假设您已经在本地设置了插件`git svn`，为 assets url 创建了一个新配置；

```
$ git config --add svn-remote.assets.url http://plugins.svn.wordpress.org/{plugin}/assets
$ git config --add svn-remote.assets.fetch :refs/remotes/assets
$ git svn fetch -r HEAD assets
$ git checkout remotes/assets
$ git checkout -b assets 
```

您现在位于一个名为的新分支上，该分支`assets`仅包含资产文件夹内容。进行编辑、提交，然后使用`git svn dcommit`将您的资产文件夹向上推。

然后只需切换回您的`master`分支，您就完成了。

# 3d - fmodex 3d 问题

> ID：12742849
> 
> 赞同：1
> 
> 时间：2012-10-05T08:56:21.823
> 
> 标签：3d, distance

我最近尝试在我的 OpenGL 程序中使用 fmodex 3D 声音库，但我遇到了一些问题。我在我的 3D 世界中放置了一个扬声器，但无论距离有多远，声音都不会衰减源和相机。我也有感觉，当我移动相机时，声音在我的 2 个扬声器（左右）之间切换，我不知道这是否有任何意义！

这里有一些代码：

```
SoundManager.h

FMOD_SYSTEM *system;
std::vector<Sound*> sounds;
FMOD_VECTOR listenerp;
FMOD_VECTOR velocityp;
FMOD_VECTOR forwardp;
FMOD_VECTOR upp;

//initialisation
FMOD_System_Create(&system);
FMOD_System_Init(system, 32, FMOD_INIT_3D_RIGHTHANDED, NULL);

//update
FMOD_System_Set3DListenerAttributes(system,0, &listenerp, 0, &forwardp, &upp);
FMOD_System_Update(system);

Sound.h
FMOD_SOUND *son;
FMOD_SYSTEM* system;
FMOD_CHANNEL * channel;
FMOD_VECTOR position;
FMOD_VECTOR velocity;

//creating sound
FMOD_RESULT resultat = FMOD_System_CreateSound(system, "data/sounds/forest.wav",     FMOD_3D, 0, &son);

 //playing sound
    FMOD_System_PlaySound(system, FMOD_CHANNEL_FREE, son, true, &channel);
    FMOD_Channel_Set3DAttributes(channel,&position, 0);
    FMOD_Channel_SetPaused(channel,false); 
```

我正在更新相机的位置和每帧的来源。如果有人有想法，我将非常感谢！:)

# java - 如何返回随机字符串数组Java

> ID：12742858
> 
> 赞同：2
> 
> 时间：2012-10-05T08:56:55.117
> 
> 标签：java

我对 Java 很陌生，所以这对大多数人来说似乎太容易了……这完全错了吗？我的问题是如何编写一个方法`selectRandom(String[] names)`，它从给定的数组中返回一个随机选择的名称。

应该以相等的概率选择每个名称。

```
public static String selectRandom(String[] names)    
{    
    String num = names[0]; 
    int[]newArray = new int[names.length];
    for(int i =0; i<names.length;i++)
    {
      Random r = new Random();
      int ranNum= r.nextInt(names.length)+1;
      num = names[ranNum];
    }
    return num;  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:00:18.317

您可以简单地生成一个不超过数组大小的随机数，并获取该索引处的值。

```
public static String selectRandom(String[] names) {
    if (name != null && names.length > 0) {
        Random r = new Random();
        return names[r.nextInt(names.length)];
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T09:01:15.647

```
public static String selectRandom(String[] names)    
{    
      Random r = new Random();
      int ranNum= r.nextInt(names.length);
      return names[ranNum];

} 
```

您不需要方法中的大部分代码。也许你应该尝试这样的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:03:27.113

随机选择一个索引，返回对应`String`的 in `names`。有一个[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)类可以在 java 中获取随机数。还要检查[nextInt](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29)方法。

```
public static String selectRandom(String[] names)    
{    
   Random rand = new Random();
   int index = rand.nextInt(names.length);
   return names[index];
} 
```

# php - 如何更新字段以将值添加到现有值？

> ID：12742863
> 
> 赞同：33
> 
> 时间：2012-10-05T08:57:16.957
> 
> 标签：php, mysql, sql

如何更新字段以将值添加到现有值？
例如我有

表名：`table`

```
id   credit
1      4
2      5
3      3 
```

有没有办法简单地为信用增加价值？
像

```
UPDATE table SET credit = '+7' WHERE id='1' 
```

我想把 7 加到 4，这样 credit=11 where id='1'
怎么做？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-05T08:58:36.600

```
UPDATE table SET credit = credit + 7 WHERE id = 1 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-05T08:58:25.113

这只是一个简单的`UPDATE`. 试试下面的。

```
UPDATE tableName
SET Credit = Credit + 7
WHERE ID = 1 
```

注意`ID = 1`和`ID = '1'`与服务器自动解析它是一样的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-05T08:58:31.683

只需使用`credit = credit + 7`代替`credit = '+7'`in`UPDATE`语句

```
UPDATE tablename SET credit = credit + 7 WHERE id = 1 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!9/0101b/1)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-05T08:58:32.117

试试这个代码

```
UPDATE table SET credit = credit + 7 WHERE id='1' 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-05T09:01:39.267

试试这个...

```
UPDATE table SET credit = credit + 7 WHERE id = 1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T09:30:32.647

'+' 是一个运算符，所以你需要提供它需要的参数。'+' 运算符是二元运算符，因此我们需要使用语法为其提供两个参数

```
 value1+value2 
```

虽然它可能通过写入'+7'来获取许多数据类型的参数，但你只是发送一个字符串值“+7”替换你以前的值

所以你最好使用

```
UPDATE table SET credit = '+7' WHERE id='1' 
```

不要将“+”运算符与其他增量运算符混淆

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-28T20:02:38.817

我想添加一个“ON DUPLICATE KEY UPDATE”示例（基于@hims056 的回答）。我找到了这个答案，但需要'ON DUP ...'，所以我想不妨把它贴在这里。

```
INSERT INTO table1 
(`id`, `credit`)
VALUES (1, 4)
ON DUPLICATE KEY UPDATE
`credit` = `credit` + 7; 
```

[在此处查看 SQL Fiddle](http://sqlfiddle.com/#!2/9f3af/1/0)

# android - 动态增加相对布局的高度

> ID：12742867
> 
> 赞同：0
> 
> 时间：2012-10-05T08:57:22.060
> 
> 标签：android, android-layout, layout, android-relativelayout

我的列表有一个列表适配器。列表项是通过膨胀具有 50dp 高度的相对布局的布局来创建的。我想将相对布局的高度更改为在方向横向上包装内容，在纵向上为 50 dp。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:00:56.327

定义另一个具有相同名称的布局`/layout-land`并更改`layout_height`为包装内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:01:02.270

您可以创建两个不同的布局文件，将纵向布局放在 res/layout/ 文件夹中，将横向布局放在 res/layout-land 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:01:29.393

`res`在称为`layout-land`横向模式的文件夹中创建一个文件夹。在该文件夹中，将高度为 wrap-content 的 xml 文件重写。在布局文件夹的 xml 中，将高度保持为 50 dp。

示例：假设您在`abc.xml`内部`res\layout`有给定的相对布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="50">"
     <!--Other code -->
</RelativeLayout > 
```

如下所示`abc.xml`在里面创建：`res\layou-land`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content">"
         <!--Other code -->
 </RelativeLayout > 
```

如果您在横向或纵向，Android 首先在 -port 或 -land 目录中查找布局文件，如果未找到，则回退到默认布局目录。

[您可以在此处](http://developer.android.com/guide/topics/resources/providing-resources.html)阅读有关提供替代资源的信息。除了陆地和港口，还有更多的选择。

# php - 使用 jQuery 将 JSON 数组分配给多个选择框

> ID：12742870
> 
> 赞同：0
> 
> 时间：2012-10-05T08:57:32.420
> 
> 标签：php, jquery, html, json, select

我通过 AJAX 将 PHP 数组发送到 json 数组。PHP 数组是一个多维数组，在 JSON 中也是如此。如何将该数组分配给多选选择框？我正在使用下面的代码，尽管 JSON 获取数组并将其分配给 html 页面上的单个编辑框。除了 towns 之外，一切都有效，它是一个多维数组，edit_town 是一个

```
 // JSON CODE:
  // Edit an existing attorney:
$("input[name='editAttorneyBtn']").click(function() {

    var providerID = $(this).attr("rel");
    $.post("www/scripts/ajax/getAttorney.php",{id : providerID},function(data) {
        if(data.response == true) {
            var info = data.info;
            $("input[name='edit_name']").val(info.name);
                            $("input[name='edit_attorney']").val(info.attorney);
                            $("input[name='edit_telephone']").val(info.telephone);
                            $("textarea[name='edit_attorney_description']").val(info.description);
                            $("textarea[name='edit_attorney_description']").ckeditor(ckConfig);
                            $("input[name='edit_fax']").val(info.fax);
                            $("input[name='edit_email']").val(info.email);
                            $("input[name='edit_physical1']").val(info.physical1);
                            $("input[name='edit_physical2']").val(info.physical2);
                            $("input[name='edit_physical3']").val(info.physical3);
                            $("input[name='edit_town']").val(info.town);
                            $("input[name='edit_status']").val(info.status);
            $("input[name='edit_AttorneyID']").val(providerID);
                            $("select[name='edit_status']").val(info.status);
                            $("select[name='edit_town']").val(info.town);
            $("#editAttorneyContainer").dialog({width: 600, title: "EDIT ATTORNEY:"});
        } else {
            $("<div />").dialog("An error has occured retrieving this attorney information.");
            return false;
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:21:25.007

正如 Wroniasty 所说，我的输入应该是一个选择 :)

# c++ - 从 std::tuple 成员中删除引用

> ID：12742877
> 
> 赞同：4
> 
> 时间：2012-10-05T08:57:45.720
> 
> 标签：c++, visual-studio-2010, tuples, std

我在 stl 元组的帮助下为一些变量实现了保存/恢复功能，如下所示：

```
double a = 1, b = 2;
int c = 3;
auto tupleRef = std::make_tuple(std::ref(a), std::ref(b), std::ref(c));

// here I'm saving current state of a, b, c
std::tuple<double, double, int> saved = tupleRef;

//here goes block of code, where a, b, and c get spoiled
......................
//

//now I'm restoring initial state of a, b, c
tupleRef = savedTuple; 
```

这段代码运行良好。但不是显式指定元组成员类型

```
std::tuple<double, double, int> saved = tupleRef; 
```

我宁愿从所有 tupleRef 成员中删除引用，如下所示

```
auto saved = remove_ref_from_tuple_members(tupleRef); 
```

我相信可以为此编写“remove_ref_from_tuple_members”模板。

感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T09:03:41.247

简单类型别名可用于应用于`std::remove_reference`元组中的所有类型。

```
template <typename... T>
using tuple_with_removed_refs = std::tuple<typename std::remove_reference<T>::type...>; 
```

有了这个，您现在可以编写函数模板：

```
template <typename... T>
tuple_with_removed_refs remove_ref_from_tuple_members(std::tuple<T...> const& t) {
    return tuple_with_removed_refs { t };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:57:56.500

感谢 R. Martinho Fernandes，我能够修改他的代码以在 Visual Studio 中编译，其中元组被硬编码为具有 10 种类型的模板，其中未使用的类型为空结构。

```
#define _RR_(x) typename std::remove_reference<x>::type
#define _no_ref_tuple_  std::tuple<_RR_(T0), _RR_(T1), _RR_(T2), _RR_(T3), _RR_(T4), _RR_(T5), _RR_(T6), _RR_(T7), _RR_(T8), _RR_(T9)>

template <typename T0, typename T1, typename T2, typename T3, typename T4, typename T5, typename T6, typename T7, typename T8, typename T9>
_no_ref_tuple_ map_remove_ref(std::tuple<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9> const& t) 
{
    return _no_ref_tuple_(t);
} 
```

我也认为将引用绑定到元组中

```
auto tupleRef = std::make_tuple(std::ref(x_0), ..., std::ref(x_n)); 
```

可以不那么冗长：

```
auto tupleRef = std::forward_as_tuple(x_0, ..., x_n); 
```

但这又在 VS 中不起作用，因为没有 std::forward_as_tuple。

# java - 如何在 jBoss 7.x 的 Arquillian 测试中设置 p6spy 驱动程序？

> ID：12742881
> 
> 赞同：2
> 
> 时间：2012-10-05T08:58:08.480
> 
> 标签：java, integration-testing, jboss7.x, jboss-arquillian, p6spy

除了在

```
JBOSS_HOME/modules/com/p6spy/main 
```

补充`p6spy.jar`说`module.xml`：

```
<module xmlns="urn:jboss:module:1.0" name="com.p6spy">
  <resources>
    <resource-root path="p6spy.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
  </dependencies>
</module> 
```

在下面编辑`standalone-full.xml`和添加一个条目`datasources/drivers`：

```
<driver name="p6spy" module="com.p6spy">
  <xa-datasource-class>com.p6spy.engine.spy.P6SpyDriver</xa-datasource-class>
</driver> 
```

在中添加模块依赖项`jboss-deployment-structure.xml`：

```
<module name="com.p6spy"/> 
```

将数据源定义中的原始驱动程序替换为`p6spy`我仍然收到此错误：

```
Caused by: java.lang.Exception:
  {"JBAS014771: Services with missing/unavailable dependencies" => 
    ["jboss.data-source.jboss/datasources/MyDsjboss.jdbc-driver.p6spyMissing
      [jboss.data-source.jboss/datasources/MyDsjboss.jdbc-driver.p6spy]"
    ]} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-12T13:56:49.323

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:06:17.990

不幸的是，p6spy 似乎不支持上述 JBoss 7.x 配置所需的XA 数据源[(1)](http://sourceforge.net/projects/p6spy/forums/forum/162085/topic/3062868) [(2) 。](https://github.com/p6spy/p6spy/issues/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T09:37:51.947

几件事，

首先，您需要找到 p6spy 使用的所有依赖项，我可以从 pom 中看到，它使用 gnu-regexp 并且使用了 regexp。JBoss 不会自动添加它们，可能还有更多。在 jboss-deployment-structure.xml 和清单中添加这些。

其次，需要将 spy.properties 文件添加到资源中。

有一段时间，我尝试将 HornetQ 的 JMSBridge 与 SAR 模块连接起来。但这只是一个 MBean，现在您有了依赖项 jar 和一个属性文件。

[SAR 模块](http://middlewaremagic.com/jboss/?p=1081)

希望这会有所帮助，祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T16:57:40.213

首先，您需要 JBOSS 类路径中的 spy.properties 文件。由于默认的 JBoss 类路径指向 tools.jar 和 run.jar，您可能需要更新您的 jboss 类路径。前任：

```
set JBOSS_CLASSPATH=E:\jboss-1.1.1\server\directoryX 
```

假设此目录中的 spy.properties X

如果您将其定义为定义其他 jdbc 驱动程序的方式，则将为您的连接池激活 P6Spy。例如，在您的数据源定义中：

```
 <jndi-name>"your jndi name"</jndi-name>
<connection-url>"conn url"</connection-url>
**<driver-class>com.p6spy.engine.spy.P6SpyDriver</driver-class>**

    <user-name>"uid"</user-name>
    <password>"pswd"</password>
    <!-- pool sizes--> 
```

祝你好运。

# dreamweaver - Dreamweaver 代码不工作

> ID：12742883
> 
> 赞同：2
> 
> 时间：2012-10-05T08:58:15.757
> 
> 标签：dreamweaver

我首先将文件保存为 template.php

我创建了一个名为“包含”的文件夹

我创建了两个文件，“header.php”和“footer.php”

这是我正在切割的代码：

```
<!-- start page -->
<div id="page">

    <img src="images/bookshelf.jpg"
        alt="Bookshop Logo"
        id="logoImage" name="logoImage"
        width="800" height="110"/>

  <!-- start content -->
  <div id="content">
    <h1>Welcome to <?php echo $pagetitle?></h1>
  </div>
  <!-- end content -->
</div>
<!-- end page -->

</body>
</html> 
```

我删除了以下代码：

```
<!-- start page -->
<div id="page">

    <img src="images/bookshelf.jpg"
        alt="Bookshop Logo"
        id="logoImage" name="logoImage"
        width="800" height="110"/>

  <!-- start content -->
  <div id="content"> 
```

我打开 header.php

我将所有内容替换为我剪切的上述内容。

我保存 header.php

我返回 template.php 并剪切以下内容并将其粘贴到 footer.php 中，替换那里的代码：

```
<h1>Welcome to <?php echo $pagetitle?></h1>
  </div>
  <!-- end content -->
</div>
<!-- end page --> 
```

我保存更改并返回模板文件。

在这个阶段，有人告诉我第 5 行存在语法错误。“在您修复此错误之前，代码提示可能无法正常工作”。

在这个阶段，我的图形与课程讲师的不同，这是不应该的。

他只剩下一个棕色背景上的小音符。我还有一个 jpeg 显示。

现在我添加命令以包含页眉和页脚，如下所示：

在添加阶段，`<?php include("); ?>`应该有一个自动建议浏览，这发生在讲师身上，但对我没有，所以我输入（“includes/header.php”）；?>

到了这个时候，当我进入实时取景时，我得到了一个没有任何内容的白色页面，与讲师的页面完全不同。非常令人沮丧，因为我正在使用视频遵循这些步骤并且无法理解我在做什么不同。我已经这样做了两次，结果都失败了。

该练习在 CS4 中演示。我正在使用 CS5。这有什么关系吗？

对不起。到目前为止，我一直在使用设计视图，这是我转向非常令人生畏的代码的开始。我希望我提出问题的方式对您理解它没有用处。

请为我慢慢解释。我不是专业人士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:45:41.903

这篇文章可能已经不需要回答了，但是当我遇到它时，我想我会把帽子扔进擂台并尝试提供帮助。

这可能是一个过于简单的建议，但如果您将文件（header.php 和 footer.php）创建到名为 include 的子文件夹中，但图像仍保留在根目录中，那么您还必须调整您所在文件的位置指向（因为它们保留在 parent/images 文件夹中，该文件夹不再是您所包含文件的本地位置 - 将`<img src="images/bookshelf.jpg"`两个包含文件的部分更改为`<img src="../images/bookshelf.jpg"`.

请注意，此处的更改是为了指示查看者图像实际上位于名为 images 的子目录中的上一级目录。

关于“代码提示”，这可能只是一个必须启用代码提示的简单问题？查看 ：

*   编辑 -> 首选项
*   选项
*   启用代码提示

已开启。

希望有帮助！

# database-design - 使用 Neo4j 时应注意哪些事项？

> ID：12742884
> 
> 赞同：0
> 
> 时间：2012-10-05T08:58:16.567
> 
> 标签：database-design, neo4j

**我们知道Neo4j**是一个**基于图形的 NoSql 数据库**。但有时我们决定在我们的应用程序中使用 Neo4j，但发现它带来的问题比解决问题要多。我们应该如何设计neo4j数据库，它会是一个很好的用途？

**首先：**

1.  更喜欢使用 Neo4j，而您的结构更基于图形，例如社交网络。
2.  避免针对不同情况制作多个数据库，例如[链接中出现的问题](https://stackoverflow.com/questions/12673331/migrate-data-from-neo4j-to-sql)
3.  更喜欢使用自己生成的 NodeId 来识别节点。

# internet-explorer - Internet Explorer 中的脚本大写字符渲染

> ID：12742900
> 
> 赞同：1
> 
> 时间：2012-10-05T08:58:57.467
> 
> 标签：internet-explorer, fonts, special-characters, webpage-rendering

Script Capital H 看起来与 Internet Explorer 中的 chrome 和 firefox 非常不同，以至于几乎难以辨认。无论如何让它看起来一样或至少提高字符的易读性？

这是角色的一个例子。如果您在 ie 和 firefox/chrome 中打开链接，您可以看到差异。 [http://graphemica.com/%E2%84%8B](http://graphemica.com/%E2%84%8B)

无论我是使用 unicode 编码还是简单地将实际字符粘贴到标记中，字符呈现都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:45:54.073

原因是不同浏览器的默认字体不同，而脚本大写H在不同字体下的设计也有较大差异。手写体字母应该类似于手写字母，并且笔迹变化很大。

如果您的页面在 CSS 中声明了要使用的某些字体，那么如果该字符未包含在您声明的字体中，则无论如何浏览器都将被迫使用其他字体。因此，您应该编写一个已知包含可接受形状的字符的字体列表，并为包含该字符的元素声明该列表。例如，您可以使用

```
<span class=special>&#x210b;</span> 
```

使用 CSS 代码

```
.special { Lucida Sans Unicode, Segoe UI Symbol, DejaVu Sans } 
```

也许还有更长的清单；参看。字体覆盖信息（不详尽，但有用）：[http ://www.fileformat.info/info/unicode/char/210b/fontsupport.htm](http://www.fileformat.info/info/unicode/char/210b/fontsupport.htm)

您提到的页面有`font-family: "Times","Times New Roman","serif","sans-serif"`，但是由于这两种特定字体都不包含该字符，因此使用了名为 serif 和 sans-serif 的字体（这些名称不能用引号引起来，以便将它们视为 CSS 定义的通用名称！），所以浏览器回退到其最低默认字体。这会有所不同，并且可能取决于浏览器设置。

请记住`line-height`为所有元素设置，以避免由于同一行上不同字体的字符各自使用自己的默认行高渲染而导致的问题。

更多信息：在 HTM L[中使用特殊字符的指南。](http://www.cs.tut.fi/~jkorpela/html/characters.html)

# android - LocationManager 从不触发，纬度和经度

> ID：12742902
> 
> 赞同：0
> 
> 时间：2012-10-05T08:59:05.990
> 
> 标签：android, broadcastreceiver, android-location

我需要获取当前位置，将它们保存到 a`Bundle`并将它们转发到 a `BroadCastReceiver`，这将每 5 秒触发一次。这就是我构建代码的方式

```
public class GPSServiceActivity extends Activity {

public Bundle locationBundle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    locationBundle = new Bundle();
    Calendar cal = Calendar.getInstance();

    getCurrentLocation();

    Intent intent = new Intent(GPSServiceActivity.this, GPSHandler.class);
    intent.putExtra("Latitude", locationBundle.getDouble("Latitude"));
    intent.putExtra("Longitude", locationBundle.getDouble("Longitude"));
    // In reality, you would want to have a static variable for the request
    // code instead of 192837
    PendingIntent sender = PendingIntent.getBroadcast(this, 192837, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    // Get the AlarmManager service
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
    am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 5000,
            sender);
}

public void getCurrentLocation() {
    LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
            5000, 0, mlocListener);

}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc) {

        double Latitude = loc.getLatitude();
        double Longitude = loc.getLongitude();

        locationBundle.putDouble("Longitude", Longitude);
        locationBundle.putDouble("Latitude", Latitude);

    }

    public void onProviderDisabled(String arg0) {

    }

    public void onProviderEnabled(String arg0) {

    }

    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {

    }
} 
```

}

我的`Manifest.xml`

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

经过一段时间的代码调试，我发现`MyLocationListener`永远不会触发，`Bundle locationBundle`它只包含两个值为 0.0 和 0.0 的双精度数。有人可以给我一个关于如何启动和运行的提示吗？

**编辑**

仅出于测试目的，我编写了此代码

```
List<String> providers = mlocManager.getAllProviders();

        if(providers.size() > 0) {
            for(int i = 0; i < providers.size(); i++) {
                Log.i("Providers: ", providers.get(i).toString());
            }
        }
        else
            Log.i("Providers: ", "No providers"); 
```

这输出

```
network
gps
passive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:43:38.127

```
MyLocationOverlay 
```

它是[谷歌地图 API中的方法](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay#drawMyLocation%28android.graphics.Canvas,%20com.google.android.maps.MapView,%20android.location.Location,%20com.google.android.maps.GeoPoint,%20long%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:24:38.037

您可以检查是否启用了提供程序。如果没有，请用户启用。检查 updateLocationRequest 调用中的最后一个参数。什么是 mlocListener？它是您的位置侦听器类（MyLocationListener）的对象吗？

# ruby - ruby 解析/静态代码分析框架

> ID：12742903
> 
> 赞同：3
> 
> 时间：2012-10-05T08:59:10.930
> 
> 标签：ruby, parsing, parser-generator

我目前正在寻找一个允许我解析 ruby​​ 代码并将代码转换为[具体语法树](http://en.wikipedia.org/wiki/Parse_tree)的框架。

我看过[Rubyparser](https://github.com/seattlerb/ruby_parser)，这是我感兴趣的方向，但它给了我一个抽象语法树。

另一种方法是拆开一个构建 CST 的工具（可能是 Pelusa 或类似的东西）。

你有什么建议吗？它应该是用 Ruby 编写的，所以我不能使用原始的 Ruby 解析器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:43:58.167

我不确定你到底想做什么，但看看[Treetop](http://treetop.rubyforge.org/)，它会让你定义一个语法文件，并将语法编译成 Ruby 中的解析器。它是一个 PEG 解析器，因此它也比传统的 LALR 解析器更容易使用。

这是一个解析一点 Ruby 的示例（当然，您必须扩展语法以满足您的需求，这可能很困难，因为 Ruby 解析起来相当复杂）：

```
require 'treetop'
Treetop.load_from_string DATA.read

parser = TestParser.new

p parser.parse('def func
   6 + 5
end')

__END__
grammar Test
   rule function
      'def' space function_name function_body 'end'
   end
   rule function_name
      [A-Za-z]+
   end
   rule function_body
      space expression space
   end
   rule expression
      '6 + 5'
   end
   rule space
      [\t \n]+
   end
end 
```

解析这个返回一个 AST：

```
SyntaxNode+Function0 offset=0, "...ef func\n   6 + 5\nend" (space,function_name,function_body):
  SyntaxNode offset=0, "def"
  SyntaxNode offset=3, " ":
    SyntaxNode offset=3, " "
  SyntaxNode offset=4, "func":
    SyntaxNode offset=4, "f"
    SyntaxNode offset=5, "u"
    SyntaxNode offset=6, "n"
    SyntaxNode offset=7, "c"
  SyntaxNode+FunctionBody0 offset=8, "\n   6 + 5\n" (space1,expression,space2):
    SyntaxNode offset=8, "\n   ":
      SyntaxNode offset=8, "\n"
      SyntaxNode offset=9, " "
      SyntaxNode offset=10, " "
      SyntaxNode offset=11, " "
    SyntaxNode offset=12, "6 + 5"
    SyntaxNode offset=17, "\n":
      SyntaxNode offset=17, "\n"
  SyntaxNode offset=18, "end" 
```

`tt`此外，您可以使用命令行工具将树顶语法文件编译为 Ruby 代码。

```
tt test.treetop -o test-treetop.rb 
```

# deployment - 通过不同环境推广 SSRS 报告 - 数据源

> ID：12742905
> 
> 赞同：2
> 
> 时间：2012-10-05T08:59:21.060
> 
> 标签：deployment, ssrs-2008, reporting-services

在我们的基础架构中，我们有一个 UAT、PreProd（暂存区）和 Prod（实时）环境。我显然被锁定只能在我们的 UAT 环境中创建报告。我的问题是，在 SSRS 报告中创建数据源时，您显然会在其中附加服务器名称，因此我将添加我们的 UAT 服务器。当它被提升到我们的 PreProd 环境时，我如何确保这个服务器名称选择我们的 PreProd 服务器并且没有嵌入 UAT 服务器名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:26:49.357

尝试以下步骤：

1.  创建共享数据源，例如“SharedDataSource”

2.  将此共享数据源作为您处理和/或由源代码存储库控制的所有报表项目的一部分

3.  确保此“SharedDataSource”部署在所有 3 个服务器上，即 UAT、PreProd 和 Prod。在这些服务器中的每一个上，数据源都指向具有适当凭据的正确服务器。
4.  现在，当您处理报表项目时，为您处理的每个报表创建一个报表数据源，例如 RptDataSource，它使用“使用共享数据源引用”选项并指向 SharedDataSource。这样，您将拥有另一层间接提供灵活性。

你完成了。创建报告...将它们部署在 UAT 服务器上..对其进行测试...将它们提升到 PreProd 并重复该过程...最后到 Prod。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:30:16.427

不要使用嵌入数据源，而是使用共享数据源。参考此链接以获取更多详细信息 [链接](http://msdn.microsoft.com/en-us/library/ms155845(v=sql.100).aspx)

# java - 字符串标记化

> ID：12742907
> 
> 赞同：-4
> 
> 时间：2012-10-05T08:59:24.817
> 
> 标签：java, string

我想将字符串标记`private String requestDate="12/12/2012 02:02:23 AM";`为

> 12122012_020223am_

如何使用 stringTokenizer 实现这一点？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:04:45.230

```
requestDate = requestDate.replaceAll("/", "");
requestDate = requestDate.replaceAll(" ", "_");
requestDate = requestDate.replaceAll(":", ""); 
```

会给你12122012_020223_AM

然后 requestDate = requestDate.toLowerCase()

会给12122012_020223_am

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:30:22.767

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
Date date = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a").parse(requestDate);
String output = new SimpleDateFormat("MMddyyyy_hhmmssa_").format(date);
output = output.toLowerCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:07:41.120

如果你想要 StringTokenise 这样的事情应该这样做

```
@Test
public void test() {
    StringTokenizer stringTokenizer = new StringTokenizer("ab/c/d EF", "/");
    StringBuilder b = new StringBuilder();
    while (stringTokenizer.hasMoreTokens()) {
        StringTokenizer stringTokenizer2 = new StringTokenizer(stringTokenizer.nextToken(), " ");
        while (stringTokenizer2.hasMoreTokens()) {
            b.append(stringTokenizer2.nextToken().toLowerCase());
            b.append("_");
        }
    }
    assertEquals("ab_c_d_ef_", b.toString());
} 
```

StringTokenizer[构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String%29)之一采用字符串和分隔符

# c# - Rx 订阅（）回调问题

> ID：12742909
> 
> 赞同：0
> 
> 时间：2012-10-05T08:59:32.833
> 
> 标签：c#, system.reactive

我正在使用 Reactive Extensions 创建匿名 Observable 来执行 Web 请求，对其进行后处理并返回一些值。这种技术帮助我将价值获取的机制与使用这些值的其他类区分开来。Web 请求经常执行，因此有一个计时器可以使用这种技术构造和调用请求。我构建 Observable 如下：

```
Observable.FromAsyncPattern<WebResponse>(getRequest.BeginGetResponse, getRequest.EndGetResponse) 
```

实际上，端点并不总是可用的。在 web 请求超时的情况下，`Subscribe()`方法中指定的回调永远不会被调用。我正在使用`Timeout()`Rx 扩展来处理这种情况。我也在做请求结果的后处理。这是我为解决该问题而实施的一段仿真代码：

```
var request = HttpWebRequest.Create("http://10.5.5.137/unreachable_endpoint");
var obs = Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse)();
var disposable = obs.Select(res => res.ContentLength).Timeout(TimeSpan.FromSeconds(2)).Subscribe(...) 
```

然后我实现了处理方法的返回值`Subscribe()`以从 Observable 取消订阅回调委托。实际上我有一个三元组的集合`<IObservable obs, IDisposable disp, bool RequestComplete>`。`Subscribe()`方法回调设置`RequestComplete = true`，并且随着时间的推移，如果不再需要所有一次性用品，它们就会被处置，即已经调用了回调。一切似乎都很好，但我注意到收藏在不断增长，我不知道为什么。

所以我实现了这种情况的仿真。此代码没有处理部分 - 我将其替换为简单的请求计数器：

```
public static class RequestCounter
{
    private static object syncRoot = new object();

    private static int count = 0;

    public static void Increment()
    {
        lock (syncRoot)
        {
            count++;
        }
    }

    public static void Decrement()
    {
        lock (syncRoot)
        {
            count--;
        }
    }

    public static int RequestCount
    {
        get { return count; }
    }
} 
```

这是测试本身：

```
public void RunTest()
    {
        while (true)
        {
            var request = HttpWebRequest.Create("http://10.5.5.137/unreachable_endpoint");
            var obs = Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse)();
            RequestCounter.Increment();
            var disposable = obs.Select(res => res.ContentLength).Timeout(TimeSpan.FromSeconds(2)).Subscribe(
                res =>
                {
                    RequestCounter.Decrement();
                    Console.WriteLine("Pending requests count: {0}", RequestCounter.RequestCount);
                },
                ex =>
                {
                    RequestCounter.Decrement();
                    Console.WriteLine("Pending requests count: {0}", RequestCounter.RequestCount);
                },
                () =>
                {
                });
        }
    } 
```

在网络请求计数器增加之前。请求超时后，它会递减。但是请求计数器会无限增长。你能解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:36:39.187

对可观察序列的订阅是异步的。您的 while 循环会尽可能快地运行。增量将超过延迟的减量。

如果您将 Rx v2.0 与 .NET 4.5 一起使用，您可以使用 await 来运行您的循环，并在上一个请求完成时继续执行以下迭代：

```
while (true)
{
    var obs = ...;

    RequestCounter.Increment();

    await obs.Select(...).Timeout(...);

    RequestCounter.Decrement();

    Console.WriteLine(...);
} 
```

更大的问题是，如果请求完成，您为什么要尝试处理订阅？当序列达到终端状态（OnError、OnCompleted）时，Rx 会自行清理，因此您似乎可以简单地将 IDisposable 对象放在地板上而不必担心这些。

# email - 调用黑莓短信和电子邮件应用程序的问题

> ID：12742912
> 
> 赞同：1
> 
> 时间：2012-10-05T08:59:46.890
> 
> 标签：email, blackberry, sms

要调用黑莓短信应用程序，我使用了这段代码

```
MessageConnection mc = null;
try {
    mc = (MessageConnection)Connector.open( "sms://" );
    mc.close();
} catch (IOException e) {
    e.printStackTrace();
}
TextMessage m = (TextMessage)mc.newMessage( MessageConnection.TEXT_MESSAGE );
m.setAddress( "sms://984" );
m.setPayloadText("SMS content");
Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(m)); 
```

问题是我能够调用`SMS`应用程序。**问题是，**默认情况下，在黑莓短信应用程序中，我可以看到两个`to`选项。**

我也提到了这个

[http://docs.blackberry.com/en/developers/deliverables/11935/Create_new_populated_text_msg_565424_11.jsp](http://docs.blackberry.com/en/developers/deliverables/11935/Create_new_populated_text_msg_565424_11.jsp)

谁能告诉我在哪里做错了？为了调用电子邮件应用程序，我使用了此代码。

```
MessageArguments msgArgs = new MessageArguments(MessageArguments.ARG_NEW, 
                                                "a@gmail.com", 
                                                "h", 
                                                "hai");
Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, msgArgs); 
```

为此，我也遇到了同样的问题。调用电子邮件应用程序，但该应用程序有**两个*** *To`* * 选项。

请帮助解决这个问题。

# shell - 识别字符串上的数字 (SHELL)

> ID：12742915
> 
> 赞同：0
> 
> 时间：2012-10-05T08:59:57.873
> 
> 标签：shell

我正在尝试做一个算法来识别字符串上的数字并将这些数字放在一个变量上。例如“abc 123”在变量上保存 123。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:08:17.327

假设您只需要第一个数字：

```
myNumber="$(printf %s "$myString" | grep -Eo '[[:digit:]]+' | head -1)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:18:35.477

因为一个字符串可以有更多的数字段，所以我会选择 sed：

```
sed 's/[^0-9]//g'

kent$  echo "foo 0 abc 123 foo 456"|sed 's/[^0-9]//g' 
0123456 
```

我希望这是你想要的。

哦，忘记了“保存到变量”部分：

```
kent$  number=$(echo "foo 0 abc 123 foo 456"|sed 's/[^0-9]//g')

kent$  echo $number
0123456 
```

# ruby-on-rails - Ruby on Rails：validates_format_of 中的数字除外

> ID：12742928
> 
> 赞同：1
> 
> 时间：2012-10-05T09:00:29.170
> 
> 标签：ruby-on-rails, ruby, regex

我正在尝试验证文本输入。我注意到，如果文本字段中有任何空格，它会失败。

```
validates_format_of :role, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters" 
```

我需要更改什么以允许空格？谢谢

更新：

将问题更改为除数字以外的任何内容，因为我需要在文本字段中允许特殊字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:06:56.767

只需在要匹配的字符上添加一个空格（此时`a-z`和`A-Z`）。因此

```
/\A[a-zA-Z ]+\Z/ 
```

请注意，`\s`它将匹配*任何*空白字符（包括制表符和换行符）。

**更新**

要允许除数字之外的所有内容，您可以使用“否定字符类”，它是通过`^`在方括号的开头放置一个插入符号来实现的：

```
/\A[^0-9]+\Z/ 
```

或者，因为`\d`(for "digit") 等价于`[0-9]`,

```
/\A[^\d]+\Z/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T09:03:44.063

Ruby 正则表达式支持`\s`作为空白字符。所以你应该能够将它添加到你的角色类中。

```
:with => /\A[a-zA-Z\s]+\z/ 
```

证明：

```
/\A[a-zA-Z\s]+\z/ =~ 'hello world' #=> true
/\A[a-zA-Z]+\z/   =~ 'hello world' #=> false 
```

# nopcommerce - Nopcommerce - 如何在一行中显示属于同一组的产品规格属性

> ID：12742929
> 
> 赞同：0
> 
> 时间：2012-10-05T09:00:31.227
> 
> 标签：nopcommerce

我正在使用 nopCommerce 2.65。考虑在多个位置（一对多）提供特定产品。nopCommerce 允许您创建规范属性并为每个产品多次添加。所以我可以做到这一点，

```
Product A : Location: London
Product A : Location: Paris
Product A : Location: Tokyo 
```

**但是在产品详细信息视图中。它显示为：**

```
Product A
Location: London
Location: Paris
Location: Tokyo 
```

**我希望它显示为**

```
Product A
Locations: London,Paris,Tokyo 
```

有没有人这样做过，如何指导如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:56:20.243

编辑视图：`Views/Catalog/ProductSpecifications.cshtml`。

# asp.net - EditItemTemplate：一个条件绑定

> ID：12742932
> 
> 赞同：2
> 
> 时间：2012-10-05T09:00:42.710
> 
> 标签：asp.net, gridview, edititemtemplate

根据特定的行值（类型），我必须在 EditTemplateField 内使用 TextBox 或 DropDownlist（只有其中一个）。如何在 EditItemTemplate 内有条件地绑定控件，以便告诉 UpdateMethod 哪个控件是“值”字段要考虑的？

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label ID="LabelType" runat="server" Text='<%# Eval("Type") %>'></asp:Label>
    </ItemTemplate>
    <EditItemTemplate>
        <asp:Label ID="LabelType" runat="server" Text='<%# Eval("Type") %>'></asp:Label>
    </EditItemTemplate>
</asp:TemplateField>
<asp:TemplateField >
    <ItemTemplate>
        <asp:Label ID="LabelValue" runat="server" Text='<%# Eval("Value") %>'></asp:Label>
    </ItemTemplate>
    <EditItemTemplate>
        <div style="text-align:center">
            <asp:TextBox ID="TextBoxValue" runat="server" Text='<%# Bind("Value") %>'></asp:TextBox>
            <asp:DropDownList ID="DropDownListValue" runat="server" SelectedValue='<%# Bind("Value") %>'>
            </asp:DropDownList>
        </div>
    </EditItemTemplate>
</asp:TemplateField> 
```

GridView 的 UpdateMethod 将“Value”作为输入参数，它必须能够决定是从 DropDownListValue 还是 TextBoxValue 中获取。

```
<asp:ObjectDataSource ID="ODSResults" runat="server" 
    SelectMethod="GetDataByIdDevice" 
    TypeName="DataSetSWCTableAdapters.DispositivoParametro_TableAdapter" 
    UpdateMethod="Save">
    <SelectParameters>
        <asp:QueryStringParameter Name="IdDevice" QueryStringField="id" Type="Int32" />
        <asp:ProfileParameter Name="Culture" PropertyName="Cultura" Type="String" />
        <asp:Parameter Name="ParameterCode" Type="String" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="IdDevice" Type="Int32" />
        <asp:Parameter Name="IdParameter" Type="Int32" />
        <asp:Parameter Name="Value" Type="Int64" />
    </UpdateParameters>
</asp:ObjectDataSource> 
```

我试图隐藏/显示控件 TextBoxValue 和 DropDownListValue（使用属性“Visible”），但它不起作用：UI 很好，但 UpdateMethod 总是接收 0 作为输入值（我猜是空字符串转换的结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:37:45.460

简单使用`RowDatabound Event`Gridview 应该可以解决您的问题...请参阅下面的代码...

```
 protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
     {
         if (e.Row.RowType == DataControlRowType.DataRow)
         { 
            if( e.Row.RowState==DataControlRowState.Edit)
               {
                  DropDownList drpctrl =(DropDownList)e.Row.Cells[CellIndex].FindControl("DropDownListValue");
                  TextBox  txtCntrl=(TextBox )e.Row.Cells[CellIndex].FindControl("TextBoxValue");
                  if(YuorCondition)
                    {
                        drpctrl.Visible=true/false;
                        txtCntrl.Visible=true/false;

                        ODSResults.UpdateMethod = "Save";
                        ODSResults.InputParameters.Clear(); 
                        ODSResults.InputParameters.Add("IdDevice", "Value1");
                                  ODSResults.InputParameters.Add("IdParameter", "Value2");
                        ODSResults.InputParameters.Add("Value", dropdownValue/Textbox Value);
                    }
               }

         }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:35:11.713

尝试这个

标记

```
<asp:TextBox ID="TextBoxValue" runat="server" 
        Text='<%# Bind("Value") %>'
        Visible='<%# ShouldTextBoxBeVisible(Bind("Type")) %>'>
</asp:TextBox>
<asp:DropDownList ID="DropDownListValue" runat="server" 
        SelectedValue='<%# Bind("Value") %>'
        Visible='<%# ShouldDropDownBeVisible(Bind("Type")) %>'>
</asp:DropDownList> 
```

代码隐藏

```
protected bool ShouldTextBoxBeVisible(object objType)
{
    return (objType != null && objType.ToString() == "TextBoxVisibleType");
}
protected bool ShouldDropDownBeVisible(object objType)
{
    return (objType != null && objType.ToString() == "DropDownVisibleType");
} 
```

# jquery - getJSON jQuery 工作位顺序错误

> ID：12742939
> 
> 赞同：0
> 
> 时间：2012-10-05T09:01:00.250
> 
> 标签：jquery, ajax, razor

我有一个 jQuery/JavaSCript 函数：

```
function CheckPostcode() {
    // if checkbox is checked then hide and return true
    // if checkbox is not checked (visible or not) then check postcode is known via Ajax call
    // if not known then display the checkbox and return false
    //
    if ($('#perinatalWomanView_AcceptUnknownPostcode').is(':checked')) {
        $("#AcceptUnknownPostcode").hide();
        return true;
    }
    $.getJSON('@Url.Action("PostcodeCheck", "AjaxValidation", new { area = "" })', { postcode: $('#perinatalWomanView_Postcode').val() }, function (result) {
        if (result.postcodeFound == true) {    // executes SECOND
            $("#AcceptUnknownPostcode").hide();
            return true;
        }
        $("#AcceptUnknownPostcode").show();
        return false;
    });
    return false;    // executes FIRST
} //CheckPostcode 
```

这似乎是正确的，但是 AJAX getJSON 响应不按顺序运行（我分别使用 Firebug 和警报来检查这一点）。我已经对代码进行了注释以显示执行顺序。Ajax 调用正确执行。

我错过了什么 - 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:03:52.283

## 这是正常行为

这是正常行为，因为 AJAX 本质上是**异步**的，这就是 AJAX 中的**A**所代表的含义。

这意味着从外部资源（服务器）请求内容将并行工作，当收到结果时，您可以处理它们，但不能指望它们按顺序工作。

## 错误修复

对于有顺序意识的人来说，有一个简单（但很糟糕）的解决方法：使 AJAX 调用同步。`$.getJSON`等于`$.ajax`它只是有一些预定义的参数；`$.ajax`接受的参数之一`async`是默认情况下为 true，将您的`$.getJSON`调用替换为等效`$.ajax`调用，只需添加`async: false`参数即可。

顺便说一句：jQuery 已弃用此参数，我对当前的 jQuery 版本并不是最新的，但它可能已经从 API 中删除。

## 好容易修复

否则（推荐）了解事件驱动的环境。它们不依赖于顺序的事物，但它们提供`callback`了在事件触发时要执行的函数——这意味着您需要处理的数据在声明时不可用，但在稍后的时刻可用。

如果你`callback`为一个事件声明一个`click`// jQuery 将存储的内容保存在某个地方，并且仅在（并且如果）事件被触发时执行它`hover`。它不会立即执行它，如果您不/ /任何它根本不会执行它。`focus``callback``click``hover``focus`

与 AJAX 相同，您给 jQuery 一个回调函数，以便在服务器完成传输响应后立即运行。

顺便说一句：这个修复在架构上并不容易在任何地方使用，如果只有一层处理该数据，它就可以工作，如果有更多并且涉及逻辑，它会变得混乱。

## 更好更复杂的修复

这应该让你走得笔直而狭窄，再也不会偏离它了。

您可以创建自己的事件，命名为您喜欢的任何名称。附加要在触发该事件时执行的事件处理程序。

您只需告诉 AJAX 请求触发该事件并传递事件变量。您已经设置的事件处理程序将被调用，其余的就是诗歌。

```
$('body').bind('my_event', function(event) {
    results_from_ajax = event.data;
});

$.getJSON(function(server_results) {
    $('body').trigger('my_event', server_results);
}); 
```

如果您查看[触发器](http://api.jquery.com/trigger/)函数，您会发现您可以定义一些额外的参数以发送到事件处理程序。

如果您查看事件对象的结构，它包含 event.type - 事件的名称，event.target - 触发它的对象， event.data - 触发传递的数据，以及许多其他有用（或不有用）的信息.

## 可能是最好的修复

有一些更新的功能我还没有读过（没有深入了解），据我了解，它们提供了一个基础设施，用于对一些尚不可用的信息应用操作，这些操作将在之后的某个时间应用数据变得可用。

[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

我无法解释这一点，因为我没有使用它并且除了上面可能错误的解释之外对它一无所知。如果有人有这方面的要点，请赐教。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:03:55.920

$.ajax 是异步调用。所以它不会阻止以下代码的执行。这就是为什么`return false`会在 $.ajax 完成之前执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:04:18.660

AJAX 调用异步执行，这意味着 getJSON 函数立即返回并继续执行下一行代码。您将不得不重新考虑您的逻辑，因为您的外部函数将在 AJAX 完成之前返回。

更好的想法是有一个从你的完整处理程序中调用的完成函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:06:26.010

最后一个`return false;`在您的回调函数之外。这就是它首先执行的原因，我认为你根本不应该从这个函数返回 true 或 false，但可能在收到结果时对 DOM 做一些事情。

# c - 叮叮当当参考？

> ID：12742948
> 
> 赞同：0
> 
> 时间：2012-10-05T09:01:34.003
> 
> 标签：c

我的功能是发出“悬空参考”警告，即：

```
int mode_pos = 0, mode;
static char *s;
char buffer[FAT_BUFFER + 1];

chan->i_mode = chan->mode;
buffer[0] = 0;
s = buffer;
mode = chan->mode;

if (!mode)
        return NULL;
        ^^^^^^^^^^^^ 
```

在返回给调用者时，与局部变量 'buffer' 关联的堆栈内存地址仍由全局变量 's' 引用。这将是一个悬空的参考

这严重吗？真正纠正它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:07:27.550

你似乎有设计问题，在这里。如果`s`真的只在那个函数内部使用并且无条件地设置为`buffer`，那么拥有它根本没有意义`static`。如果是这样，这个悬空引用也不是一个非常危险的引用，但最好清理你的代码以避免意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:04:34.673

是的，这很严重。
它会导致**未定义的行为**。的生命周期`buffer`仅限于函数的范围（`{`，`}`），它可能/可能不会超出函数体。它有时似乎可以工作，有时可能会失败。它不能保证工作，你会期望你的程序以定义的方式工作。所以应该避免它。

您需要以`buffer`这种方式进行定义，以使其生命周期超出函数体。有两种方法可以做到这一点：

1.  您使用动态内存分配`malloc()`（调用者应该记住`free()`它）或
2.  声明`buffer`为`static`本地。

# visual-studio-2010 - 带有 IE9 的 Visual Studio：调试窗口顺序混乱

> ID：12742958
> 
> 赞同：1
> 
> 时间：2012-10-05T09:02:08.237
> 
> 标签：visual-studio-2010, internet-explorer-9

我刚刚“升级”到 IE9。我正在运行 VS2010，我曾经对快速监视窗口及其工作方式非常满意。现在，当我尝试调试窗口时，变量和方法都混在一起了。有没有什么办法解决这一问题？

![在此处输入图像描述](../Images/488b18f716c5b89edf0be680df4d2d99.png)

这让调试变得非常痛苦，因为我可以看到没有任何顺序。甚至不按字母顺序。

# playframework - 如何在 Play 上处理 JSONP！1.2.4

> ID：12742962
> 
> 赞同：0
> 
> 时间：2012-10-05T09:02:15.787
> 
> 标签：playframework, jsonp, playframework-1.x

我正在尝试向我的 Play 发送跨域请求！从我的本地机器上的 Heroku 应用程序，因此需要使用 JSONP。

您如何使用 Play 1.2.4 在服务器端处理 JSONP？

欢迎所有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:57:24.757

我用[了这个](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/JTEHkEpcmPg)，它似乎工作正常。

# jquery - 数据转换适用于tag ，但不适用于按钮 onClick

> ID：12742964
> 
> 赞同：1
> 
> 时间：2012-10-05T09:02:20.600
> 
> 标签：jquery, jquery-mobile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:28:46.720

改成`type="submit"`如下`type="button"`：

```
<input id="Submit1" type="button" value="Login" data-role="button" onclick="location.href='#details';" data-transition="slide" data-inline="true" data-theme="b" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:10:39.527

# delphi - 在 Delphi 中将对象强制转换为父类

> ID：12742965
> 
> 赞同：1
> 
> 时间：2012-10-05T09:02:22.190
> 
> 标签：delphi, class, parent

给定以下类层次结构：

```
TClass1 = class
end;

TClass2a = class(TClass1)
end;

TClass2b = class(TClass1)
end; 
```

我使用以下重载过程对它们进行操作

```
procedure DoSomething(AObj : TClass1); overload;
begin
  // ...Do something for TClass1
end

procedure DoSomething(AObj : TClass2a); overload;
begin
  // Do something as parent class
  DoSomething(TClass1(AObj))

  // ...Do something for TClass2a
end

procedure DoSomething(AObj : TClass2b); overload;
begin
  // Do something as parent class
  DoSomething(TClass1(AObj))

  // ...Do something for TClass2b
end 
```

如何动态地将每个参数转换为其父类，而不是对其进行硬编码？
我想替换这个：

```
// Do something as parent class
DoSomething(TClass1(AObj)) 
```

用更通用的东西，像这样

```
// Do something as parent class
DoSomething(AObj.ClassParent(AObj)) 
```

**更新：**在这种情况下，DoSomething 过程必须位于类层次结构之外。我无法反转结构，因此无法利用类继承和多态性。
此外，这只是一个例子。我希望得到专注于核心问题的答案：**如何**在运行时将对象强制转换为其父类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:05:51.373

> 在这种情况下，DoSomething 过程必须位于类层次结构之外。我无法反转结构，因此无法利用类继承和多态性。此外，这只是一个例子。我想关注核心问题：如何在运行时将对象强制转换为其父类。

理解这一点的关键是 Delphi 是一种静态类型语言。还要记住，您正在调用非多态过程。这意味着参数的类型是在编译时确定的。重载决议基于该类型。因此，重载决议发生在编译时。

所以，你的例子：

```
DoSomething(TClass1(AObj)) 
```

做你想做的，因为参数的类型在编译时是已知的。根本不可能做出类似的东西

```
DoSomething(AObj.ClassParent(AObj)) 
```

做你想做的，因为参数的类型必须在编译时知道。

> 如何在运行时将对象强制转换为其父类？

这是问题的症结所在。强制转换不是运行时构造，而是编译时构造。所以简单的答案是您不能将对象强制转换为它的运行时类型。

如果您不能使用多态调度，那么您唯一的选择是硬编码强制转换。Cosmin 的答案中的示例显示了如何以一种非常有用的方式做到这一点，但事实仍然是重载在编译时得到解决。根本没有办法逃避。

* * *

您在评论中询问 RTTI 是否可以在这里提供帮助。好吧，它不会帮助您解决已经讨论过的任何强制转换或重载解决方案。但是，它可以帮助您避免大量样板硬编码强制转换。这是一个简单的例子：

```
program Project1;

{$APPTYPE CONSOLE}

uses
  System.TypInfo,System.Rtti;

type
  TClass1 = class
  end;
  TClass1Class = class of TClass1;

  TClass2a = class(TClass1)
  end;

  TClass2b = class(TClass1)
  end;

type
  TClass1Dispatcher = class
  private
    class var Context: TRttiContext;
  public
    class procedure DoSomething_TClass1(AObj: TClass1);
    class procedure DoSomething_TClass2a(AObj: TClass2a);
    class procedure DoSomething_TClass2b(AObj: TClass2b);
    class procedure DoSomething(AObj: TClass1; AClass: TClass1Class); overload;
    class procedure DoSomething(AObj: TClass1); overload;
  end;

class procedure TClass1Dispatcher.DoSomething_TClass1(AObj: TClass1);
begin
  Writeln('DoSomething_TClass1');
end;

class procedure TClass1Dispatcher.DoSomething_TClass2a(AObj: TClass2a);
begin
  Writeln('DoSomething_TClass2a');
end;

class procedure TClass1Dispatcher.DoSomething_TClass2b(AObj: TClass2b);
begin
  Writeln('DoSomething_TClass2b');
end;

class procedure TClass1Dispatcher.DoSomething(AObj: TClass1; AClass: TClass1Class);
var
  LType: TRttiType;
  LMethod: TRttiMethod;
begin
  if AClass<>TClass1 then
    DoSomething(AObj, TClass1Class(AClass.ClassParent));
  LType := Context.GetType(TypeInfo(TClass1Dispatcher));
  LMethod := LType.GetMethod('DoSomething_'+AClass.ClassName);
  LMethod.Invoke(Self, [AObj]);
end;

class procedure TClass1Dispatcher.DoSomething(AObj: TClass1);
begin
  DoSomething(AObj, TClass1Class(AObj.ClassType));
end;

begin
  TClass1Dispatcher.DoSomething(TClass1.Create);
  TClass1Dispatcher.DoSomething(TClass2a.Create);
  TClass1Dispatcher.DoSomething(TClass2b.Create);
  Readln;
end. 
```

输出：

```
DoSomething_TClass1
DoSomething_TClass1
DoSomething_TClass2a
DoSomething_TClass1
DoSomething_TClass2b

```

显然，这种方法依赖于您遵循命名约定。

这种方法相对于硬编码转换变体的主要好处之一是调用继承方法的顺序由类层次结构决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T09:34:49.373

`overload`仅在编译时有用，它允许编译器根据作为参数传递的对象的类型选择最合适的方法。您不能`overload`在运行时使用该机制来动态进行调用，因为到那时，代码已经编译并且已经选择了一个重载过程。就您所知，调用的*正确*方法（基于“重载”逻辑）甚至可能不可用：如果编译器从未为任何事情选择重载方法，则链接器可能已丢弃。因此，您不能使用 RTTI，因为该方法可能根本不存在于可执行文件中，除非您已经硬编码了对它的调用。

你唯一的选择是做一些硬编码。我会创建一个方法，它需要两个参数，一个要操作的对象和一个`TClass`参数，如下所示：

```
procedure Dispatcher(Obj: TClass1);
var AsClass: TClass;
begin
  AsClass := Obj.ClassType;
  while Assigned(AsClass) do
  begin
    // Hard-coded dispatch for the type in AsClass.
    if AsClass.InheritsFrom(TClass3) then
      DoSomething(TClass3(Obj))
    else if AsClass.InheritsFrom(TClass2) then
      DoSomething(TClass2(Obj))
    else if AsClass.InheritsFrom(TClass1) then
      DoSomething(TClass1(Obj));

    // This emulates the "inherited" call in normal polymorphic OOP.
    // We're simply recursively calling the dispatcher for the parent of AsClass.
    AsClass := AsClass.ClassParent;
  end;
end; 
```

给定一个类型为 的对象`TClass3`，此过程将调用`DoSomething`3 次，每个继承级别调用一次。由于硬编码的演员表，它将选择适当的重载版本。

示例代码：

```
var X1: TClass1;
begin
  X1 := TClass3.Create;
  Dispatcher(X1); // This will call all 3 versions of DoSomething, in order.
end; 
```

由于代码并没有真正将`overloaded`关键字用于任何有用的东西，我会放弃它的使用，为所有方法提供不同的名称，因此 Dispatcher 方法中的代码如下所示：

```
procedure Dispatcher(Obj: Tobject);
var AsClass: TClass;
begin
  AsClass := Obj.ClassType;
  if AsClass.InheritsFrom(TClass3) then
    DoSomething_Class3(TClass3(Obj))
  else if AsClass.InheritsFrom(TClass2) then
    DoSomething_Class2(TClass2(Obj))
  else if AsClass.InheritsFrom(TClass1) then
    DoSomething_Class1(TClass1(Obj));

  if AsClass.ClassParent <> nil then
    Dispatcher(Obj, AsClass.ClassParent);
end; 
```

从长远来看，这种变体更安全，因为它不依赖于编译器魔法。例如，在第一个变体中，如果您决定删除适用于类型参数的重载过程，`TClass2`但您忘记`TClass2()`在 Dispatcher 中删除带有强制转换的调用，您将获得两次对重载方法的调用接受`TClass1`参数，因为这将是现在使用的最佳匹配：

```
DoSomething(TClass2(Obj)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T11:54:07.843

还没有人提到虚拟类方法。尽管您的问题的字面答案仍然是“不，这是不可能的”，但您可以编写这样的代码：

```
type
  TClass1 = class
  end;

  TClass2a = class(TClass1)
  end;

  TClass2b = class(TClass1)
  end;

type
  TSomething1 = class
    class procedure DoSomething(AObj : TClass1); virtual;
  end;

  TSomething2a = class(TSomething1)
    class procedure DoSomething(AObj : TClass1); override;
  end;

  TSomething2b = class(TSomething1)
    class procedure DoSomething(AObj : TClass1); override;
  end;

{ TSomething1 }

class procedure TSomething1.DoSomething(AObj: TClass1);
begin
  ShowMessage(AObj.ClassName);
end;

{ TSomething2a }

class procedure TSomething2a.DoSomething(AObj: TClass1);
begin
  inherited;
  ShowMessage('2A');
end;

{ TSomething2b }

class procedure TSomething2b.DoSomething(AObj: TClass1);
begin
  inherited;
  ShowMessage('2B');
end; 
```

# pthreads - pthread 条件信号不锁定互斥体

> ID：12742970
> 
> 赞同：0
> 
> 时间：2012-10-05T09:02:59.687
> 
> 标签：pthreads, signals, mutex, race-condition

我的互斥锁似乎已解锁。我的代码看起来像这样（不是实际代码）（使用 pthread）：

```
 thread
    {
    int id=...;
    //locked aditional mutex _m2
    mutex_lock(&_m);
    varx=valuex;//irelevant
    print("th%d signaling listener",id);
    cond_signal(&_c);
    print("th%d signaled listener",id);
    mutex_unlock(&_m);
    //unlocked additional mutex _m2
    }

 listener
    {
    tc=0
    mutex_lock(&_m);
    while(tc<threadcount)
        {
        cond_wait(&_c,&_m);
        print("working");
        tc++
        work;
        }
    mutex_unlock(&_m);
    } 
```

正常（预测）输出：

```
 th0 signaling listener;
    working;
    th0 signaled listener;

    th1 signaling listener;
    working;
    th1 signaled listener; 
```

我的输出：

```
 0 signaling listener;
    working;
    0 signaled listener;

    1 signaling listener;
    1 signaled listener; 
```

..所以线程跳过（侦听器不执行也不锁定_m）打印输出

我已经用 helgrind (full) 对其进行了分析，我没有错误，但我的应用程序在侦听器处停止，因为根据他的说法，他正在等待所有人完成。

注意：监听器是可加入的。额外的互斥锁 _m2 没有帮助。线程分离。我有大约 800 个分离的线程来避免堆栈问题，最多同时使用 50 个使用信号量来限制线程数。代码适用于 3-4 个线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:26:29.293

`pthread_cond_signal()`不解锁任何互斥锁。它不应该（没有互斥体传递给它）。如果至少有一个线程正在等待条件变量发出信号，则该线程将在它可以重新获取它传递给的互斥锁时被调度`pthread_cond_wait()`。

在您的情况下，您的侦听器似乎正在等待`_s`与其他线程信号（ ）不同的条件（ `_c`）。

如果你解决了这个问题，你还会遇到这样一个问题，即在等待条件变量的线程和发出信号的线程之间似乎没有任何共享状态。看起来你的`tc`计数器实际上应该是一个共享变量，受`_m`互斥锁保护。然后你的线程会做：

```
pthread_mutex_lock(&_m);
tc++;
if (tc >= threadcount)
    pthread_cond_signal(&_c);
pthread_mutex_unlock(&_m); 
```

听众会这样做：

```
pthread_mutex_lock(&_m);
while (tc < threadcount)
    pthread_mutex_wait(&_c, &_m);
pthread_mutex_unlock(&_m); 
```

然后，只有在所有线程都命中信号代码后，侦听器才会继续，这似乎是您所追求的。

或者，您可以使用`pthread_barrier_wait()`，这似乎是您正在实施的。

# c# - 从 XML 字符串到数据网格视图或数据表的特定元素 (C#)

> ID：12742972
> 
> 赞同：0
> 
> 时间：2012-10-05T09:03:04.033
> 
> 标签：c#, xml, linq, datagridview, datatable

我最近才开始使用 XML 字符串。我现在正在做的是使用网络服务从数据库中提取记录。它返回以下输出：

```
<?xml version="1.0" encoding="utf-16"?>
<Records count="2">
    <Metadata>
        <FieldDefinitions>
          <FieldDefinition id="13597" name="Statement" alias="Statement" />
          <FieldDefinition id="13598" name="Response" alias="Response" />
        </FieldDefinitions>
    </Metadata>
    <Record contentId="154321" moduleId="409">
        <Field id="13597" type="1">&lt;p&gt;This is a database record&lt;/p&gt;</Field>
        <Field id="13598" type="1">&lt;p&gt;This is a record&lt;/p&gt;</Field>
    </Record>
    <Record contentId="154755" moduleId="409">
        <Field id="13597" type="1">&lt;p&gt;This is another database record&lt;/p&gt;</Field>
        <Field id="13598" type="1">&lt;p&gt;And another corresponding record&lt;/p&gt;</Field>
    </Record>
</Records> 
```

我想要实现的是一个将显示给用户的数据表/数据网格视图。这将是这样的：

```
|    Statement    |    Response    |
|This is a datab..| This is a corr.|
|This is another..| And another....| 
```

我试过以下代码：

```
 private void WriteDataGrid(string xml)
    {
        DataSet ds = new DataSet();
        XmlTextReader reader = new XmlTextReader(xml, XmlNodeType.Document, null);
        ds.ReadXml(reader);
        dataGridView1.DataSource = ds;
        dataGridView1.DataMember = "Field";
    } 
```

然而，它只设法获得了这个：

```
|    id | type  | Field_Text       |
|13597  | 1     | This is a...     |
|13598  | 1     | This is a corr...|
|13597  | 1     | This is anoth... |
|13598  | 1     | And anothe...    | 
```

我计划使用 xml 中的字段 id 创建唯一列，然后根据包含的值设置行的值。但我不确定我应该如何去做。有人可以帮忙吗？还是有更好的方法让我实现我想要做的事情？

我知道如果元素是唯一的会容易得多，但我无法以任何方式更改 Web 服务的输出。

任何帮助将非常感激。

**编辑：**

我刚刚意识到我忽略了在字段文本中添加 XML 字符串将包含 HTML 标记和标记（特别是*< p > </ p >*）（*< > &等）。*有人对我如何在将它们写入数据表之前删除/转义/解码它们有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:23:37.763

// XMLFile.xml 文件包含服务的 xml 响应。最终输出是 dt1 ，其中包含您想要的格式的数据。

```
 DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        ds.ReadXml(Server.MapPath("~/XMLFile.xml"));
        dt = ds.Tables[5];

        var query = from s in dt.AsEnumerable()
                    group s by s.Field<string>("id") into g
                    select new { id = g.Key, field_text = g.ToList(),Count=g.ToList().Count };

        DataTable dt1 = new DataTable();
        int maxRowid=0;
        foreach (var obj in query)
        {
            dt1.Columns.Add(obj.id);
            if(obj.Count>maxRowid)
            {
                maxRowid=obj.Count;
            }

        }

        // Add Rows to table         
        for (int count = 0; count < maxRowid; count++)
        {
            dt1.Rows.Add("", "");
        }

        int i = 0;
        foreach (var obj in query)
        {
            int j = 0;
            foreach (var dr in obj.field_text)
            {
                dt1.Rows[j][i] = ((DataRow)dr)["field_text"];
                j++;
            }
            i++;

        } 
```

# dynamics-crm-2011 - 如何在 MS Dynamics CRM 2011 中存储配置设置？

> ID：12742988
> 
> 赞同：1
> 
> 时间：2012-10-05T09:03:52.870
> 
> 标签：dynamics-crm-2011

我是 MS 动态 CRM 的新手，并且希望存储用户凭据（如 userid），这与您在 web.config 文件或 ASP.NET 中的会话中存储的内容非常相似，因此在创建新的潜在客户或联系人时，我可以使用商店凭据，所以我可以使用商店凭据向我的外部应用程序添加相同的潜在客户或联系人。所以请告诉我如何存储用户凭据？或提供解释相同示例的链接。还详细说明存储配置设置的所有步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:30:35.083

一种巧妙的方法是在 CRM 中创建自定义实体。您将能够在其中保存所有配置数据，包括凭据。您可以限制仅指定用户访问实体。这个解决方案的缺点是您需要创建 DataContext 并从 db 查询信息。另一种方法是使用 .NET 部分类，该类将在未受版本控制的文件中保存敏感数据，这样整个开发团队可以为每个开发环境使用不同的凭据。第三种方式是在插件注册时传递凭证，但我没有使用过这种方式，我认为它的缺点太多（您需要为每个注册步骤提供凭证）。祝你好运！

# c# - WCF 服务无端点

> ID：12742996
> 
> 赞同：2
> 
> 时间：2012-10-05T09:04:21.513
> 
> 标签：c#, wcf, wcf-client

当我运行 WCF 测试客户端时，出现错误：

> 错误：无法从 localhost:52875/ControllersInfo.svc 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。
> 元数据包含无法解析的引用：localhost:52875/ControllersInfo.svc'。在 localhost:52875/ControllersInfo.svc 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

这是我的`web.config`文件

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint helpEnabled="true" automaticFormatSelectionEnabled="true" />
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service name="dev_FineReceiptsService.ControllersInfo">
        <endpoint kind="webHttpEndpoint" contract="dev_FineReceiptsService.IControllersInfo" />
      </service>
    </services>
  </system.serviceModel>
  <connectionStrings>
    <add name="FineReceiptsTestEntities" connectionString="metadata=res://*/FineTest.csdl|res://*/FineTest.ssdl|res://*/FineTest.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=msdev01;Initial Catalog=FineReceiptsTest;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

谁能告诉我我做错了什么？

我试图找到类似的问题，但没有一个对我有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:10:15.137

您的服务是基于 REST 的服务（因为您指定了`webHttpBinding`）。

然而，WCF 测试客户端是一个**基于 SOAP 的**测试工具——你可以用它来测试**SOAP**服务——`basicHttpBinding`等等`wsHttpBinding`。

但是你**不能**使用基于 SOAP 的 WCF 测试客户端来测试你的基于 REST 的 WCF 服务……那是行不通的。使用普通的网络浏览器，可能结合 Fiddler 或类似的东西来测试你的 REST 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:10:20.933

元数据端点公开描述**SOAP**服务的 WSDL + XSD。不支持为 REST 公开元数据。由于您使用的是 webHttpEndpoint，因此您不能使用 WCFTestClient。要测试 Rest 服务，可以使用[RestSharp或 Browser。](http://restsharp.org/)

如果您需要通过简化配置将元数据添加到 SOAP 服务，您需要添加以下行为：

```
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

# internet-explorer - TinyMce 在 IE9 中没有表现

> ID：12742997
> 
> 赞同：1
> 
> 时间：2012-10-05T09:04:26.520
> 
> 标签：internet-explorer, cross-browser, tinymce

我有 TinyMce 版本 3.4.8 和 IE9。

当我在 tinymce 编辑器中输入文本时，它会在字母之间插入空格。这是一个问题，因为我稍后会使用 tinymce 中输入的值在数据库中进行搜索。因此，在 IE9 中，我总是没有得到任何结果，因为它正在使用空格进行搜索。

可能是什么问题？我想可能是 IE9 和 tinymce 之间的编码问题或兼容性，但我在 Google 上找不到任何相关信息。