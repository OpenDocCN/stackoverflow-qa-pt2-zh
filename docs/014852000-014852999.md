# StackOverflow 问答 14852000-14852999

# sql-server-2008 - 将整个星期的日期显示为星期六

> ID：14852001
> 
> 赞同：0
> 
> 时间：2013-02-13T11:00:59.773
> 
> 标签：sql-server-2008

我在这个网站上得到了一年中所有星期的代码，如下所示，我应该填充星期日期，开始日期为星期六，结束日期为星期五。当一周结束时，它应该进入下一周的日期。我怎么能做到这一点，请帮助我。

```
 DECLARE @Year INT=2013;  
  DECLARE @start DATE;  
 --DECLARE @WK INT=2  
 SET @start = DATEADD(YEAR, @Year-1900, 0);  

  ;WITH n AS  
  (  
  SELECT TOP (366) -- in case of leap year  
  TDate = DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)  
  FROM sys.all_objects          
  ),  
   x AS  
  (  
  SELECT md = MIN(TDate) FROM n  
  WHERE DATEPART(WEEKDAY, TDate) = 7 -- assuming DATEFIRST is SATURDAY  
  ),  
  y(TDate,wk) AS   
  (  
  SELECT n.TDate,  ((DATEPART(DAYOFYEAR,n.TDate)-                                         
  DATEDIFF(DAY, @start,x.md)-1)/7)+1  
  FROM n CROSS JOIN x  
  WHERE n.TDate >= x.md  
  AND n.TDate < DATEADD(YEAR, 1, @start)  
  )  
  SELECT [date] = TDate, [week] = wk
  FROM y WHERE wk < 53
  ORDER BY [date]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:24:09.190

不太确定你在问什么，但根据你上面的查询，这将给出周数，基于星期六是一周的第一天，2013 年：

```
DECLARE @Year INT=2013;  
DECLARE @start DATE;  

SET @start = DATEADD(YEAR, @Year-1900, 0);  

SET DATEFIRST 6; -- Set start of week as Saturday

WITH n AS  
(  
SELECT TOP (366) -- in case of leap year  
TDate = DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)  
FROM sys.all_objects          
)
select TDate
  , DATEPART(WEEK,TDate)
from n
where year(TDate) = 2013; 
```

**编辑：**

因此，根据各种评论和答案，我*认为*这里需要的是，对于给定的一天，返回同一周的所有天，星期六作为一周的第一天。所以是这样的：

```
set datefirst 6; -- make sure first day of week is Saturday

declare @date date = getdate(); -- change date as required here

with daysOfWeek as
(
  select [date] = dateadd(dd, -datepart(dw, @date) + 1, @date)
  union all
  select [date] = dateadd(dd, 1, [date])
  from daysOfWeek
  where [date] < dateadd(dd, -datepart(dw, @date) + 7, @date)
)
select [date], dayOfWeek = datename(dw, [date])
from daysOfWeek 
```

这给出了结果：

![在此处输入图像描述](../Images/7addfac210ecf8e3522a5369d39d37a1.png)

我认为这是这里需要的吗？

**第二次编辑：**

首先，创建函数：

```
create function dbo.weekDates (@date date)
returns @dates table ([date] date, [dayofweek] varchar(9))
as
begin

  with daysOfWeek as
  (
    select [date] = dateadd(dd, -datepart(dw, @date) + 1, @date)
    union all
    select [date] = dateadd(dd, 1, [date])
    from daysOfWeek
    where [date] < dateadd(dd, -datepart(dw, @date) + 7, @date)
  )
  insert into @dates ([date], [dayofweek])
  select [date], [dayOfWeek] = datename(dw, [date])
  from daysOfWeek;

  return

end

go 
```

使用功能：

```
set datefirst 6 -- Set Saturday as first day of week
select * from dbo.weekDates (getdate()) -- Change input parameter as required 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:50:26.570

我已经实现了显示周日期，但它正在显示下周日期我想显示当前周日期，这里开始日是星期六，结束日是星期五

```
ALTER FUNCTION GetCurrentWeek()
    RETURNS @TWeek TABLE (TWeek NVARCHAR(20))
    AS
    BEGIN
    DECLARE @Year INT= DATEPART(YEAR,GETDATE());
    DECLARE @start DATE;
    SET @start = DATEADD(YEAR, @Year-1900, 0);

   ;WITH n AS
   (
    SELECT TOP (366) -- in case of leap year
    TDate = DATEADD(DAY, ROW_NUMBER() OVER (ORDER BY name)-1, @start)
    FROM sys.all_objects
    ),
    x AS 
    (
   SELECT md = MIN(TDate) FROM n 
   WHERE DATEPART(WEEKDAY, TDate) = 7 -- assuming DATEFIRST is SATURDAY
   ),
   y(TDate,wk) AS
   (
   SELECT n.TDate, ((DATEPART(DAYOFYEAR, n.TDate) 
   -   DATEDIFF(DAY, @start, x.md)-1)/7)   + 1
  FROM n CROSS JOIN x
  WHERE n.TDate >= x.md
  AND n.TDate < DATEADD(YEAR, 1, @start)
  )
  INSERT  @TWeek
   SELECT [date] = TDate
   FROM y WHERE wk =DATEPART(wk, GetDate())
    ORDER BY [date];
    RETURN;

   END 
```

# ios - 启用分页时如何扩展 UICollectionView contentSize？

> ID：14852004
> 
> 赞同：27
> 
> 时间：2013-02-13T11:01:09.503
> 
> 标签：ios, uiscrollview, uicollectionview

我正在制作一个`UICollectionView`启用了分页机制的简单程序，一切正常。但是，当滚动到最后一页时，单元格的数量在屏幕上并不完全可见，并且最后一页包含上一页的一些单元格。

如何展开`contentSize`，`UICollectionView`使最后一页不包含上一页的任何单元格？

[这里](https://github.com/lequysang/github_zip/blob/master/DragCollectionViewCell.zip)的一个例子：`UICollectionView`水平滚动 6 个单元格，这样：

*   **第 1 页：**

    `cell0 - cell1 - cell2 - cell3`

*   **第2页：**

    `cell4 - cell5`意料之中，但出乎意料

    `cell2 - cell3 - cell4 - cell5`

如何改变它？

**概括：**

我想设置

`collectionView.contentSize = numberOfPage * collectionView.frame`

**不是**

`collectionView.contentSize = numberOfCell * (cellFrame + spacing)`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-25T20:45:04.737

您需要子类`UICollectionViewLayout`化并覆盖该`collectionViewContentSize`方法。我进行了子类`UICollectionViewFlowLayout`化，因此我不必重新编写所有布局代码。

我正在构建一个 4x4 网格，所以我的方法如下所示：

```
- (CGSize)collectionViewContentSize
{    
    NSInteger itemCount = [self.collectionView numberOfItemsInSection:0];
    NSInteger pages = ceil(itemCount / 16.0);

    return CGSizeMake(320 * pages, self.collectionView.frame.size.height);
} 
```

旁注，当您使用自定义布局时，您将无法在 Interface Builder 中设置某些显示属性。您可以在`init`自定义 UICollectionViewLayout 子类的方法中以编程方式设置它们。这是我的参考：

```
- (id)init
{
    self = [super init];
    if (self) {
        [self setup];
    }

    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self) {
        [self setup];
    }

    return self;
}

- (void)setup
{
    self.itemSize = CGSizeMake(65.0f, 65.0f);
    self.minimumLineSpacing = 15;
    self.sectionInset = UIEdgeInsetsMake(7.5f, 7.5f, 30.0f, 7.5f);
    [self setScrollDirection:UICollectionViewScrollDirectionHorizontal];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T12:26:52.233

用于水平分页

```
if(CollectionView.pagingEnabled)
{

    int numberOfPages = floor(collectionView.contentSize.width /
                      collectionView.frame.size.width) + 1;
                             CGFloat 
    float requierdWidth=self.collectionView.frame.size.width*numberOfPages;

    self.Layout.footerReferenceSize=CGSizeMake(requierdWidth-self.collectionView.contentSize.width,0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T17:19:36.467

答案很有效，尽管对于我们的代码，我们每页只有一个部分。所以这意味着我们的布局类的覆盖只是

```
-(CGSize) collectionViewContentSize {
    return CGSizeMake(CGRectGetWidth(self.collectionView.frame) * 
                 [self.collectionView numberOfSections],
                 CGRectGetHeight(self.collectionView.frame)) ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:15:51.303

我认为您必须子类`UICollectionViewLayout`化并创建自定义布局来管理此类问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T11:56:09.923

您可以使用`viewDidLayoutSubviews:`方法调整内容。当集合视图和所有单元格放置在 中时，将调用此方法`view`，以便您可以调整单元格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-12T21:55:36.643

我有一个不需要任何子类化的答案。

在 -viewDidLoad 中，计算每页将拥有多少项目以及将拥有多少页。将这些值存储在属性中。

```
 self.numberOfItemsPerPage = NumberOfRows * NumberOfColumns;
    self.numberOfPages = ceilf((CGFloat)self.items.count / (CGFloat)self.numberOfItemsPerPage); 
```

然后在 -collectionView:numberOfItemsInSection: 中撒谎：

```
 return self.numberOfItemsPerPage * self.numberOfPages; 
```

你当然会拥有比内容更多的单元格，对吧？所以在 -collectionView:cellForItemAtIndexPath: 中只为额外的单元格返回 nil ：

```
 if (indexPath.item > [self.items count] - 1) {
    //We have no more items, so return nil. This is to trick it to display actual full pages.
    return nil;
    } 
```

你去：完整的，可滚动的最后一页。在我看来，水平滚动模式应该默认为这个。

# sql - 基于列名的sql更新

> ID：14852005
> 
> 赞同：7
> 
> 时间：2013-02-13T11:01:10.767
> 
> 标签：sql, sql-server, tsql, unpivot

我有个问题。

我有`T1`, `T2`,`T_Join`表。

`T_Join`：第一列：（`ID`唯一）例如：10,11,12,13。第二列：`CODE`，它包含与 的列名相同的属性`T2`。例如：类型、来源、部分、重要性。这些由`ID`中的标识`T1`。据此，属性“源”的 ID 为 11。

```
ID  CODE
10  type
11  source
12  section
13  importance 
```

在表中`T1`，第一列是`data_ID`不唯一的：1020、1020、1020、1022、1022、1022、1023、1023、1028、1028、1028、1035、1035 等。

第二列是来自 的 ID `T_Join`。在这个例子中 4 ID 可以属于 1 `data_ID`，这些声明，其中的值出现在第三列（VALUE）中：

```
data_ID  ID  VALUE  
1020     10  1
1020     11  123
1020     12  9
1020     13  4
1022     10  2
1022     12  15
1023     10  2
1023     11  108
1023     13  2
1028     12  20 
```

...

表示 ID 为 1020 的项目是第 1 类，来自第 123 号源，此 ID 标识的真实对象存储在第 9 节中，具有第 4 级重要性。

现在，我有一张桌子 T2。第一列与 T1 中的 data_ID 相同。在此表中，这些是唯一的。其他列：（多么令人惊讶！）类型、来源、部分、重要性。（实际上，不仅有四个属性，而且至少有五十个！）所以表格看起来像这样：

```
data_ID  type  source  section  importance
1020     1     123     9        2
1022     1     95      3        5
1023     2     108     21       4
1028     1     147     17       5 
```

T2 包含较新的数据。我想用这些更新 T1.VALUE 列。按照我上面的示例，更新后的 T1 应如下所示：

```
data_ID  ID  VALUE  
1020     10  1
1020     11  123
1020     12  9
1020     13  2
1022     10  1
1022     12  3
1023     10  2
1023     11  108
1023     13  4
1028     12  17
... 
```

因此，在 data_ID 1020 处，重要性为 4，然后变为 2，因为在 T1 中，ID 为 13，它指的是 T_Join 表中的属性“重要性”，依此类推。我想以这种方式更新所有数据。我不是 SQL 专家，但我设法创建了以下代码：

```
update T1 set VALUE = 
(select * from T2 
 inner join T_Join on ID=
(SELECT 
    c.name 
FROM
    sys.objects o
INNER JOIN
    sys.columns c
ON
    c.object_id = o.object_id
AND o.name = 'T2') 
where T1.data_ID = T2.data_ID and T2.ID = T_Join.ID)

from T1
inner join T2 on T1.data_ID = T2.data_ID
inner join T_Join on T1.ID = T_Join.ID

select * from T1 
```

但它不起作用，错误消息：

> *Msg 116, Level 16, State 1, Line 16 当子查询没有用 EXISTS 引入时，只能在选择列表中指定一个表达式。*

我试图用 CURSOR 语句和声明的变量（基于建议）来解决它，但它也不起作用。

请，如果有人知道我该如何解决这个问题（以最简单的方式），请尽可能详细地回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:21:30.460

您当前设计的问题是您有一个规范化的表和一个非规范化的表，您需要执行更新。

首先，您需要对表格进行反规范化，该`T2`表格将获取列并将其转换为行。在 SQL Server 2005+ 中，他们介绍了[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将为您执行此操作的功能。

第一步是`SELECT`从行到行的`T2`数据`T_Join`。`SELECT`声明是：

```
select j.id,
  j.code,
  u.data_id,
  u.value
from T_Join j
inner join
(
  select data_id, col, value
  from T2
  unpivot
  (
    value
    for col in (type, source, section, importance)
  ) unpiv
) u
  on j.code = u.col 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e2407/11)。这将获取您的列数据并将其转换为给出结果的行：

```
| ID |       CODE | DATA_ID | VALUE |
-------------------------------------
| 10 |       type |    1020 |     1 |
| 11 |     source |    1020 |   123 |
| 12 |    section |    1020 |     9 |
| 13 | importance |    1020 |     2 |
| 10 |       type |    1022 |     1 |
| 11 |     source |    1022 |    95 |
| 12 |    section |    1022 |     3 |
| 13 | importance |    1022 |     5 |
| 10 |       type |    1023 |     2 |
| 11 |     source |    1023 |   108 |
| 12 |    section |    1023 |    21 |
| 13 | importance |    1023 |     4 |
| 10 |       type |    1028 |     1 |
| 11 |     source |    1028 |   147 |
| 12 |    section |    1028 |    17 |
| 13 | importance |    1028 |     5 | 
```

一旦数据采用该格式，您就可以在`UPDATE`语句中使用它：

```
update t1
set t1.value = t.value
from t1
inner join
(
  select j.id,
    j.code,
    u.data_id,
    u.value
  from T_Join j
  inner join
  (
    select data_id, col, value
    from T2
    unpivot
    (
      value
      for col in (type, source, section, importance)
    ) unpiv
  ) u
    on j.code = u.col
) t
  on t1.data_id = t.data_id
  and t1.id = t.id; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e2407/8)。

您说的下一个问题是您需要*unpivot*大约 50 列。如果是这种情况，那么您可以使用动态 SQL 将列列表转换为行。您的动态 SQL 脚本将是：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('T2') and
               C.name not in ('data_ID')
         for xml path('')), 1, 1, '')

set @query 
  = 'update t1
     set t1.value = t.value
     from t1
     inner join
     (
       select j.id,
         j.code,
         u.data_id,
         u.value
       from T_Join j
       inner join
       (
         select data_id, col, value
         from T2
         unpivot
         (
           value
           for col in ('+@colsUnpivot+')
         ) unpiv
       ) u
         on j.code = u.col
     ) t
       on t1.data_id = t.data_id
       and t1.id = t.id;'

exec(@query); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e2407/10)。

代码将更新`T1`为以下结果：

```
| DATA_ID | ID | VALUE |
------------------------
|    1020 | 10 |     1 |
|    1020 | 11 |   123 |
|    1020 | 12 |     9 |
|    1020 | 13 |     2 |
|    1022 | 10 |     1 |
|    1022 | 12 |     3 |
|    1023 | 10 |     2 |
|    1023 | 11 |   108 |
|    1023 | 13 |     4 |
|    1028 | 12 |    17 | 
```

# php - 如何在谷歌地图中计算选定区域的经度和纬度？

> ID：14852007
> 
> 赞同：1
> 
> 时间：2013-02-13T11:01:15.993
> 
> 标签：php, javascript, jquery, google-maps

我正在使用谷歌地图 API 集成。我需要从该地图中的特定选定区域获取纬度和经度。在我的脚本中基于谷歌地图中的选定区域。

```
 function clearSelection() {
        if (selectedShape) {
          selectedShape.setEditable(false);
          selectedShape = null;
        }
      }

      function setSelection(shape) {
        clearSelection();
        selectedShape = shape;
        shape.setEditable(true);
        selectColor(shape.get('fillColor') || shape.get('strokeColor'));
      }

      function deleteSelectedShape() {
        if (selectedShape) {
          selectedShape.setMap(null);
        }
      }

      function selectColor(color) {
        selectedColor = color;
        for (var i = 0; i < colors.length; ++i) {
          var currColor = colors[i];
          colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
        }

        // Retrieves the current options from the drawing manager and replaces the
        // stroke or fill color as appropriate.
        var polylineOptions = drawingManager.get('polylineOptions');
        polylineOptions.strokeColor = color;
        drawingManager.set('polylineOptions', polylineOptions);

        var rectangleOptions = drawingManager.get('rectangleOptions');
        rectangleOptions.fillColor = color;
        drawingManager.set('rectangleOptions', rectangleOptions);

        var circleOptions = drawingManager.get('circleOptions');
        circleOptions.fillColor = color;
        drawingManager.set('circleOptions', circleOptions);

        var polygonOptions = drawingManager.get('polygonOptions');
        polygonOptions.fillColor = color;
        drawingManager.set('polygonOptions', polygonOptions);
      }

      function setSelectedShapeColor(color) {
        if (selectedShape) {
          if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
            selectedShape.set('strokeColor', color);
          } else {
            selectedShape.set('fillColor', color);
          }
        }
      }

      function makeColorButton(color) {
        var button = document.createElement('span');
        button.className = 'color-button';
        button.style.backgroundColor = color;
        google.maps.event.addDomListener(button, 'click', function() {
          selectColor(color);
          setSelectedShapeColor(color);
        });

        return button;
      }

       function buildColorPalette() {
         var colorPalette = document.getElementById('color-palette');
         for (var i = 0; i < colors.length; ++i) {
           var currColor = colors[i];
           var colorButton = makeColorButton(currColor);
           colorPalette.appendChild(colorButton);
           colorButtons[currColor] = colorButton;
         }
         selectColor(colors[0]);
       }

      function initialize() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: new google.maps.LatLng(22.344, 114.048),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          disableDefaultUI: true,
          zoomControl: true
        });

        var polyOptions = {
          strokeWeight: 0,
          fillOpacity: 0.45,
          editable: true
        };
        // Creates a drawing manager attached to the map that allows the user to draw
        // markers, lines, and shapes.
        drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.POLYGON,
          markerOptions: {
            draggable: true
          },
          polylineOptions: {
            editable: true
          },
          rectangleOptions: polyOptions,
          circleOptions: polyOptions,
          polygonOptions: polyOptions,
          map: map
        });

        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
            if (e.type != google.maps.drawing.OverlayType.MARKER) {
            // Switch back to non-drawing mode after drawing a shape.
            drawingManager.setDrawingMode(null);

            // Add an event listener that selects the newly-drawn shape when the user
            // mouses down on it.
            var newShape = e.overlay;
            newShape.type = e.type;
            google.maps.event.addListener(newShape, 'click', function() {
              setSelection(newShape);
            });
            setSelection(newShape);
          }
        });

        // Clear the current selection when the drawing mode is changed, or when the
        // map is clicked.
        google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
        google.maps.event.addListener(map, 'click', clearSelection);
        google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);

        buildColorPalette();
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<p> <div id="map" style="width:980px;height:480px;"></div></p> 
```

在该脚本中，我已经在谷歌地图中创建了选定区域。但我需要获取该特定选定区域的经度和纬度。如何获取选定区域（城市和国家）的值？

![在此处输入图像描述](../Images/ff808b55178424b48b83972a10aa6046.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:33:56.487

您无法使用 Google Maps API 获取任意多边形内的所有城市和国家。您可以使用 Google Maps API v3（或[网络服务）使用](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)[反向地理编码](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)器获取单个点的城市和国家，但任意多边形将是无限数量的请求，并且会受到配额和速率限制。如果您在支持地理查询的数据库中有自己的地理数据源（例如来自[geonames](http://www.geonames.org/)），则可以将多边形的顶点发送到您的服务器并检索该多边形中的位置。

# windows-7 - Windows 7 文件夹名称提高最大字符长度

> ID：14852008
> 
> 赞同：0
> 
> 时间：2013-02-13T11:01:21.717
> 
> 标签：windows-7, directory

我想改进 Windows 7 文件夹名称字符长度。默认字符长度为 260。您对这个问题有什么建议吗？

# ruby-on-rails-3.2 - Capistrano 部署错误

> ID：14852011
> 
> 赞同：0
> 
> 时间：2013-02-13T11:01:29.193
> 
> 标签：ruby-on-rails-3.2, capistrano

我是 ruby​​ 应用程序部署的新手。

我正在尝试在 Capistrano 上部署名为“bookshop”的应用程序。我已经在 github 上上传了我的应用程序，链接为“git@github.com:my_account_name/bookshop.git”

当我执行“cap deploy:setup”时，出现以下错误：

```
servers: ["localhost"]
connection failed for: localhost (Errno::ECONNREFUSED: Connection refused - connect(2)) 
```

任何帮助，将不胜感激

我的“deployment.rb”文件：

```
set :application, "bookshop"

set :domain,"localhost"
server domain, :web, :app

default_run_options[:pty]= true
set :use_sudo, false

set :aplication,"localhost"

set :scm, :git
set :user, 'bookshop.com'
set :deploy_to, "/home/www/bookshop"
set :repository, "git@github.com:my_account_name/bookshop.git"

role :web, "localhost"                          # Your HTTP #server, Apache/etc
role :app, "localhost"                          # This may be the #same as your `Web` server
role :db,  "localhost", :primary => true # This is where #Rails migrations will run

 namespace :deploy do
   task :start do ; end
   task :stop do ; end
   task :restart, :roles => :app, :except => { :no_release => true } do
     run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
   end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:50:15.747

确保您的机器中启用了 ssh 代理。

# java - 字节[] 到字符串 {100,25,28,-122,-26,94,-3,-26}

> ID：14852016
> 
> 赞同：0
> 
> 时间：2013-02-13T11:01:46.977
> 
> 标签：java, byte

如何将此 byte[] 转换为 String ：

```
byte[] mytest = new byte[] {100,25,28,-122,-26,94,-3,-26}; 
```

我明白了：`"d��^�"`当我使用：

```
new String( mytest , "UTF-8" ) 
```

这是用于创建密钥的代码java：

```
m_key = new javax.crypto.spec.SecretKeySpec(new byte[] {100,25,28,-122,-26,94,-3,-26}, "DES"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:58:08.860

为了将字节数组解码为 ASCII 之类的东西，您需要知道它的原始编码。否则，您需要将其视为二进制文件。

注意：Base64 旨在跨网络传输二进制数据。

我建议对您的字节数组进行 Base64 编码。然后在您的 PHP 代码中将 Base64 字符串解码回 UTF-8 字符串。

在 Java 中，以下是如何对字节数组进行 Base64 编码，然后将其解码回 UTF-8：

```
import org.apache.commons.codec.binary.Base64;

public class MyTest {
    public static void main(String[] args) throws Exception {
        byte[] byteArray = new byte[] {100,25,28,-122,-26,94,-3,-26};
        System.out.println("To UTF-8 string: " + new String(byteArray, "UTF-8"));

        byte[] base64 = Base64.encodeBase64(byteArray);
        System.out.println("To Base64 string: " + new String(base64, "UTF-8"));

        byte[] decoded = Base64.decodeBase64(base64);
        System.out.println("Back to UTF-8 string: " + new String(decoded, "UTF-8"));

        /* the decoded byte array is the same as the original byte array */
        for (int i = 0; i < decoded.length; i++) {
            assert byteArray[i] == decoded[i];
        }
    }
}
```

上述代码的输出是：

```
转为 UTF-8 字符串：d��^�
转 Base64 字符串：ZBkchuZe/eY=
返回 UTF-8 字符串：d��^�</pre>

因此，如果您想在 PHP 代码中使用相同的二进制数据，请将 Base64 字符串剪切并粘贴到您的 PHP 代码中，然后将其解码回 UTF-8。像这样的东西：

```
<?php
$str = 'ZBkchuZe/eY=';
$key = base64_decode($str);
echo $key;
?>
```

我不使用 PHP 编码，但您应该能够使用此方法解码 Base64：http:
 [//php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

上面的代码应该将原始二进制数据回显为 UTF-8（尽管带有有趣的字符）。关键是`$key`变量中看起来很有趣的字符串表示的二进制数据与 Java 字节数组中的二进制数据相同：

```
d��^�</pre>

您应该能够将`$key`变量传递到您的 PHP 加密方法中。

```

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:19:23.700

以你这样做的方式，海事组织毫无意义。您正在创建一个以 byte[] 作为参数的新字符串。我不认为该函数应该解析。所以你最终得到的是很多垃圾。但是一点谷歌搜索让我明白了这一点： [http ://www.mkyong.com/java/how-do-convert-byte-array-to-string-in-java/](http://www.mkyong.com/java/how-do-convert-byte-array-to-string-in-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:38:50.127

m_key.getEncoded() 会给你想要的结果。

Javadocs - [SecretKeySpec](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/SecretKeySpec.html)

如果没有，您必须识别用于编码的密钥提供程序（这导致您现在拥有的字节数组）并解码。

# java - 创建 xlsx 文件时出错

> ID：14852025
> 
> 赞同：-2
> 
> 时间：2013-02-13T11:02:25.087
> 
> 标签：java, excel

我在创建 xlsx 文件时遇到错误。任何人都可以帮助我。

```
while(fromData.hasNext()){
    fromMessage =  fromData.next();
    messageRow2 = XSSFCellUtil.getRow(messageRowNum++, sheet1);
    XSSFCell errorCell2 = messageRow2.createCell(2);
    errorCell2.setCellValue(fromMessage);
    errorCell2.setCellStyle(styles.get("string"));
    errorCell2.setCellStyle(styles.get("wrap"));
    if(!(fromData.hasNext())){
        messageRowNum =tempMessageRowNum;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T11:03:52.563

我找不到对 XSSFCellUtil 的任何引用。我的建议是使用 SS 模型，因为它同时支持 XSSF 和 HSSF，并且为了获取行，只需通过调用 getRow(int rownum) 从工作表中检索它。

[http://poi.apache.org/spreadsheet/converting.html](http://poi.apache.org/spreadsheet/converting.html)这里有一些例子

# ios - 将文本字段的值与目标 c 中的数组内容匹配

> ID：14852026
> 
> 赞同：0
> 
> 时间：2013-02-13T11:02:25.753
> 
> 标签：ios, objective-c, nsarray, nspredicate

我有一些数组，其内容是从 db 中选取的。我想将我在“searchTextField”中输入的文本与从 DB 中获取的那些数组的内容相匹配。

**例如：**我的数组包含，`myArray={'bat man','bat and ball','ball'};` 如果我在“searchTextField”中输入了“bat”；它必须在数组中显示匹配文本的索引（在本例中为索引 0 和 1）。

我怎样才能做到这一点..等待你的帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:25:57.860

```
NSMutableArray *tempArray = [NSMutableArray arrayWithObjects:@"bat man",@"bat and ball",@"ball", nil];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] 'bat'"];
NSArray *result = [tempArray filteredArrayUsingPredicate:predicate]; 
```

`result`数组将包含过滤后的对象，从那里你可以得到索引：

> [tempArray indexOfObject:/*结果数组中的对象，一一*/]

`contains[c]`意味着搜索将不区分大小写。有关谓词的更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)

**编辑**

将 textField 的委托设置为 self。在此之前转到 YourFile.h，添加`UITextFieldDelegate`. 现在`textFieldShouldReturn`这样做：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];

    NSMutableArray *tempArray = [NSMutableArray arrayWithObjects:@"bat man",@"bat and ball",@"ball", nil];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",textField.text];
    NSArray *result = [tempArray filteredArrayUsingPredicate:predicate];

    return YES;
} 
```

# jquery - 悬停时出现菜单，如推特

> ID：14852035
> 
> 赞同：0
> 
> 时间：2013-02-13T11:02:43.023
> 
> 标签：jquery, ruby-on-rails-3, twitter, menu, jquery-hover

我正在做我自己的小书签项目。我正在使用rails 3.2.11，当将鼠标悬停在推文上时，我想添加一个类似推特的菜单，一个小菜单会显示在它的正下方。好吧，如果你曾经使用过 twitter，你就会明白我的意思。

我已经尝试了一些事情，但我无法开始工作。

[jQuery API](http://api.jquery.com/hover/)

任何帮助将不胜感激......当我完成它时，我将开源，只是因为我认为在旅途中拥有所有书签会很棒，我在一周内使用 4 台不同的电脑，我总是忘记东西。

提前致谢。

![小书签](../Images/4d18766636f1f01571bda409d98320ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:07:39.317

您可以`.bind` 用来显示您的菜单[这](http://api.jquery.com/bind/)是链接。

```
$('#elementId or .className').bind('mouseenter',function(){
//Your code to show the menu
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:06:59.837

你可以看看 Twitter Bootstrap，它包含许多用于创建网站的 CSS/JS 实用程序。

他们有[Tooltip](http://twitter.github.com/bootstrap/javascript.html#tooltips)插件或[Popover](http://twitter.github.com/bootstrap/javascript.html#popovers)插件。

干杯，

# c# - LiveLoginResult.Status 未知？

> ID：14852037
> 
> 赞同：8
> 
> 时间：2013-02-13T11:03:03.733
> 
> 标签：c#, .net, windows-8, windows-store-apps

我正在尝试使用代码来确定用户是否已经登录？

```
LiveAuthClient LCAuth = new LiveAuthClient();

LiveLoginResult LCLoginResult = await LCAuth.InitializeAsync(); 
```

即使用户已经登录，它也会返回未知。

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T06:42:36.703

```
LiveAuthClient authCilent = new LiveAuthClient();

LiveLoginResult loginResult;

loginResult = authCilent.InitializeAsync().Result;

if (loginResult.Status == LiveConnectSessionStatus.Connected)
{
   /* 
   Also use loginResult.Session as the Session which you will require to use live services by creating LiveConnectClient instance as follows.
   */

   // LiveConnectClient liveClient = new LiveConnectClient(loginResult.Session);

   // Write the logic you want by using liveClient instance
} 
```

我试过这个片段，它对我有用。干杯

# c - 您打算如何在 C 项目中包含文件？

> ID：14852038
> 
> 赞同：-2
> 
> 时间：2013-02-13T11:03:04.293
> 
> 标签：c, include

我有三个文件。

```
trees.h
// a bunch of typedefs and function prototypes
#include <trees.c>

trees.c
// a bunch of function bodies

main.c
#include <trees.h> 
```

这是不对的，因为trees.c 中的每个函数都给我关于trees.h 中定义的类型的“未定义类型”错误。我已经尝试了所有我能想到的配置 - 包括来自 main 的trees.c，包括来自trees.c 的trees.h，在trees.h 的末尾包括trees.c，在trees.h 的开头包括它。 .我能想到的每种包含的组合，每个组合都会给出一组不同的错误。有时是多个定义，有时是未定义的函数......

那么这究竟是如何工作的呢？我在哪些文件中放了什么，我要包含哪些文件以及在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:05:31.790

像这样：

```
trees.h
// a bunch of typedefs and function declarations (prototypes)

trees.c
#include <trees.h>
// a bunch of function definitions (bodies)

main.c
#include <trees.h> 
```

**解释：**

`#include`基本上与将整个包含文件复制到此文件（放置`#include`.

因此，包含`trees.h`in`main.c`允许该文件了解`trees.c`.

包含`trees.h`in`trees.c`允许使用 in 较低的函数，这也是指定`trees.c`使用 in 的定义等的地方。`trees.c`

您也可能不知道创建多个对象并将它们链接起来，请参阅 Joachim Pileborg 的回答。

**（非常丑陋的）替代方案是：**

```
trees.h
// a bunch of typedefs and function declarations (prototypes)

trees.c
#include <trees.h>
// a bunch of function definitions (bodies)

main.c
#include <trees.c> 
```

然后你只需要编译`main`. 但是对于任何几个`.c`文件的项目，这变得不切实际。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:05:40.140

您将每个源文件编译为目标文件，然后将这些目标文件链接在一起以形成最终的可执行文件。如果您使用例如 GCC 并在命令行上编译，您可以将两个源文件放在命令行中，GCC 会为您处理它：

```
$ gcc main.c tree.c -o tree 
```

上面的命令告诉`gcc`编译和链接文件`main.c`，`tree.c`并命名输出可执行文件`tree`。您也可以将源文件单独编译成目标文件，然后手动将它们链接在一起：

```
$ gcc -c main.c -o main.o
$ gcc -c tree.c -o tree.o
$ gcc main.o tree.o -o tree 
```

在上面的命令中，该`-c`选项告诉`gcc`创建一个目标文件，该`-o`选项告诉`gcc`该目标文件的名称。最后一个命令获取这些目标文件并创建最终的可执行文件并为其命名（使用`-o`选项）`tree`。

在源文件中，您包含所需的标头，而不是相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:51:08.463

它不起作用的原因是因为您必须使用“extern”来定义在与标准不同的包含文件中声明的变量或函数。您还应该将所有头文件保存为 *.h。因此，假设您在 tree.h 中定义了结构“树”：

```
#include <tree.h>

int main() {
    extern tree; /* Get variable 'tree' declared in tree.h */
    extern make_tree(void); /* Get function make_tree() declared in tree.h */

    make_tree(); /* Call function */
    return (0); /* End */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:06:52.397

首先不包括实现 ( `.c`) 文件。仅包含头`.h`文件 ( )。只要您需要在其中声明的类型或函数，就包括它们。为避免多次声明，请使用包含警卫（无论它们是什么 - 只需 google 即可）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T11:07:30.887

要走的路是将头文件trees.h包含在trees.c中，然后将trees.c包含在main.c中

看看这个线程[here](https://stackoverflow.com/questions/276386/how-to-structure-includes-in-c)

# android - 适用于 Android 和 iOS 的视频/音频框架

> ID：14852059
> 
> 赞同：4
> 
> 时间：2013-02-13T11:04:40.590
> 
> 标签：android, ios, avfoundation, video-processing

我想为 iOS 和 Android 开发像 iMovie 这样的应用程序。对于 iOS，我将使用原生 AVFoundation 框架。

在 Android 上用于视频/音频和图像处理/编辑/创建的最佳框架是什么？

它也可以是 iOS 和 Android 的跨平台框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:20:45.647

你的问题不清楚你在问什么。仍然根据我的搜索和知识，链接可以帮助你[http://www.windriver.com.cn/mobile/pdf/08_Android_Multimedia_Framework_Overview.pdf](http://www.windriver.com.cn/mobile/pdf/08_Android_Multimedia_Framework_Overview.pdf) 或[http://netgna.it.ubi.pt/files/2011-GREENNETSb .pdf](http://netgna.it.ubi.pt/files/2011-GREENNETSb.pdf)

# java - 调用 servlet 后的不同 url

> ID：14852061
> 
> 赞同：0
> 
> 时间：2013-02-13T11:04:54.940
> 
> 标签：java, servlets, forwarding, requestdispatcher

我有一个 servlet 做一些事情，当它完成后将一些事情放入请求中，然后调用另一个 servlet，该 servlet 又调用一个 jsp 页面。我写代码：

第一个 servlet (InserisciLezione)

```
 request.getRequestDispatcher("/TakeDates").forward(request, response); 
```

第二个 servlet (TakeDates)

```
 RequestDispatcher dispatcher = request
            .getRequestDispatcher("GestioneCalendario.jsp");
    dispatcher.forward(request, response); 
```

这可以正常工作，但问题是在页面的 url 中我还没有：

```
 http://localhost:8080/Spinning/InserisciLezione?data=20-02-2013 
```

如果我刷新页面，第一个 servlet 会再次被调用，我不想要这个。我想拥有

```
 http://localhost:8080/Spinning/GestioneCalendario.jsp 
```

为什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:13:17.527

如果我的记忆很好（我已经很长时间没有使用原始 servlet），那么您应该使用重定向而不是转发。

您可以使用 response.sendRedirect(url) 方法。

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:21:43.850

您可以使用`sendRedirect`而不是`forward`

### 向前

1.  转发发生在服务器端，服务器将相同的请求转发到另一个资源。
2.  在这种情况下，相同的请求被转发到另一个资源，因此所有请求参数和请求属性都将可用，没有 req,ans resp servlet1 的对象，您无法获取 ser1 和 ser2 的值
    **注意：**
    转发需要调用在响应提交给客户端之前，否则您最终会遇到异常。
    **限制：**
    您不能在上下文之外转发请求，因此请求应该在您的站点中。
    **优点：**
    在性能方面它会更快一些，因为第二次调用是在不知道容器的情况下进行的，并且不会有客户端到服务器的往返。

### 重定向

1.  它发生在浏览器端，服务器向`http`浏览器发送状态代码 302，因此浏览器发出新请求。重定向需要从浏览器到服务器的多一次往返。
2.  它是一个新请求，因此旧的参数和属性将不可用。
    ***优点：***
    您也可以访问上下文之外的 servlet，因此您可以调用其他网站中的 servlet。
    **限制：**
    往返性能有点慢，而且

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:22:40.120

RequestDispacher 接口提供了将请求分派到另一个资源的功能，它可以是 html、servlet 或 jsp。这个接口也可以用来包含另一个资源的内容。它是servlet协作的方式之一。

在你的情况下，你得到这个

```
http://localhost:8080/Spinning/GestioneCalendario.jsp 
```

因为这个 servlet

```
 RequestDispatcher dispatcher = request
            .getRequestDispatcher("GestioneCalendario.jsp");
    dispatcher.forward(request, response); 
```

**页面刷新将始终将您重定向到您使用过的 servlet 的 url。就像调用 ajax 事件一样。**

无论如何我可以看到你不需要使用转发方法，尝试使用

```
response.sendRedirect(your_url); 
```

# c++ - QVector 要显示在列表（小部件或模型）上的对象？

> ID：14852064
> 
> 赞同：0
> 
> 时间：2013-02-13T11:05:08.840
> 
> 标签：c++, qt

所以我得到了一个 Qvector，其中包含一个“联系人”类的对象......到目前为止，联系人类看起来像这样：

```
class contact {
        QString firstName;
        QString lastName;
        QString email;
        QString age;
        QString imgSrc;

public:
   contact();
   contact(QString fName, QString lname, QString emailAdd, QString new_Age, QString img);
   QString getPerson(); // return  "James Smith 34" which i add to listwidget   
}; 
```

那很简单，我遇到的问题是我以列表格式显示这些数据的最有效方法，即

亚当·斯密 34

约翰·史密斯 43

我应该使用基本列表小部件吗？（考虑到我必须将信息按升序和降序排序......

还是我使用列表视图？但是哪个型号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:23:05.780

您将拥有子类`QAbstractTableModel`以提供模型接口来读取联系信息，请在[此处](http://qt-project.org/doc/qt-4.8/QAbstractTableModel.html#details)阅读文档。由于您只是显示文本，因此您无需打扰代表。

默认值`QTableView`应该足够了，记得实现表[头数据方法](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#headerData)，`QAbstractTableModel`否则你不会在视图中看到列标题标签。

要提供排序功能，您需要`QSortFilterProxyModel`在模型和视图之间提供自定义。[文档](http://qt-project.org/doc/qt-4.8/qsortfilterproxymodel.html#details)提供了如何使用它的很好的示例。

Qt 的[MVC 框架](http://qt-project.org/doc/qt-4.8/model-view-programming.html)一开始可能会让人望而生畏，但是一旦您了解了它的模块化结构，您就会清楚地知道您需要做什么才能获得某些功能。它*非常*强大，但有一点学习曲线。

# python - 使用记事本作为数据库的 Tkinter 登录

> ID：14852066
> 
> 赞同：1
> 
> 时间：2013-02-13T11:05:16.927
> 
> 标签：python, tkinter

```
def btnClick(self):
    filereader = open("Login.txt", 'r+')
    dataload = filereader.readlines()
    UN=self.entr1.get()
    PW=self.entr2.get()
    for line in dataload:
        (username,password) = line.split('|')
        UN2 = username
        PW2 = password
        if (UN==UN2) & (PW==PW2):
            tkMessageBox.showinfo("Success", "Successfully login!")
            self.main()
        else:
            tkMessageBox.showinfo("Error", "Incorrect login credentials!")
            self.clear()
    filereader.close()
    return 
```

当用户单击登录按钮时，我有上面的事件代码，我使用记事本作为数据库，这是里面的数据

> 用户|1234
> 管理员|1234

我认为我的代码是正确的，但是当我运行它时，即使我输入了正确的数据，它也总是说不正确。你能帮我找出我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:14:43.917

您应该能够使用一个简单的`print`语句来输出您从文件中读取的值，并将它们与您实际输入的值进行比较。

* * *

由于`.readlines()`不会去除换行符，因此您从文件中读取的行/密码总是以`\n`字符结尾。

你应该删除它；一个简单的方法是调用`replace('\n', '')`or `rstrip('\n')`：

```
(username,password) = line.replace('\n', '').split('|') 
```

或使用

```
filereader.read().splitlines() 
```

代替`filereader.readlines()`

# android - 如何防止屏幕方向更改从相机意图返回（SGS3）

> ID：14852069
> 
> 赞同：3
> 
> 时间：2013-02-13T11:05:29.043
> 
> 标签：android, android-alertdialog, android-orientation, orientation-changes

在我的应用程序中，我使用 ImgButton 调用第二个 Activity，它在 onClick() 上调用相机意图。拍完照片后，回到我的活动中，我会显示一个警报对话框，用户可以在其中选择是否再拍一张照片。在我的清单中，我将第二个 Activity 的方向锁定为纵向，因为如果我旋转设备，AlertBox 就会消失：

```
<activity android:name="SecondActivity"
            android:screenOrientation="portrait"></activity> 
```

在我的清单中，我还添加了：

```
android:configChanges="orientation|keyboardHidden" 
```

对于全屏模式

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

如果我拍照并从纵向模式关闭相机意图（不旋转设备），则 2 个不同的设备会出现问题：

HTC Desire：一切正常，如果我从相机返回到我的活动，我会保存应用程序状态并恢复它们：D

Galaxy S3*：sgs3 上的摄像头似乎在横向模式下默认运行？因此，如果您返回我的活动，我的活动显示的内容是在横向模式下眨眼，并立即返回纵向模式。但是 AlertDialog 在方向更改之前显示，因此 AlertDialog 在不需要的旋转之前消失（所以我在横向模式下只看到 AlertBox 0,1 秒，然后它消失并且旋转切换回纵向模式）...

如果我从横向模式结束相机意图，无论在哪个设备上，问题与 sgs3 * 上的问题相同。

从相机返回到我的活动后，如何防止屏幕旋转？在这种不受欢迎的方向改变后，我可以简单地显示警报框吗？如果是这样，我该怎么做？还是有其他解决方法？

感谢和抱歉我的英语不好... xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:28:15.843

我自己解决了我的问题：我只是把

> 警报对话框[...].show();

进入`onResume()`活动，所以如果我从相机意图返回到我的活动，AlertDialog 会随着屏幕旋转而不是消失。

这会导致错误`WindowManager`

> “[包名]泄露的窗口......”

但最后它按我的意愿工作，应用程序不会崩溃......

不确定这是否是最好和正确的解决方案，但它有效。

# c# - Visual Studio 在将数据源添加到报告时重新启动

> ID：14852080
> 
> 赞同：0
> 
> 时间：2013-02-13T11:05:53.817
> 
> 标签：c#, reportviewer, report-viewer2010

当我尝试将数据源添加到我的 report.rdlc 文件时，我的 Visual Studio 正在重新启动。我使用 VS 2010 和 reportviewer 控件和实体数据模型作为数据库连接模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:13:03.863

试用 Visual Studio 诊断工具 [Visual Studio 诊断工具](http://visualstudiogallery.msdn.microsoft.com/e8649e35-26b1-4e73-b427-c2886a0705f4/)

# ios - UIScrollView、UITableView 和约束问题

> ID：14852082
> 
> 赞同：0
> 
> 时间：2013-02-13T11:06:01.400
> 
> 标签：ios, uitableview, uiscrollview, constraints

我有一个`UIScrollView`我想为 iPhone 4 和 5 保持相同`UITableView`的尺寸，当然只有低的应该改变尺寸。

**UIScrollView** ![UIScrollView 约束](../Images/b7401f91921d6c0db430ac509628ebe5.png)

**UITableView** ![UITableView 约束](../Images/039b68326cf93c84ef127772ab9da60a.png)

问题是，当我将大小更改为**Retina 3.5 Full Screen**时，我得到了这个：

![问题](../Images/392b1db18385e8ae8cc5705f976fe2e9.png)

我不能很好地理解约束是如何获得我想要的结果的。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:19:21.733

问题是您有固定`height`的约束，`UITableView`并且正在计算考虑到距离 tableView 约束的距离。您必须从菜单：Editor/Pin/Height中*PIN*的, 。`height``UIScrollView`*`height``scrollView`*

# mercurial - 由于错误的合并基础，mercurial 中的合并问题：发生了什么？

> ID：14852085
> 
> 赞同：1
> 
> 时间：2013-02-13T11:06:16.847
> 
> 标签：mercurial, merge, ancestor

我有一个存储库，其中两个修订版（14321 和 14319）共享一个父级（14318） - 两个变更集都是14318 的**直接子**级。然而，修订集查询`ancestor(14321, 14319)`不返回 14318，而是返回一个更旧的变更集 *。**发生了什么？*

TortoiseHg 中的屏幕截图：

![显示查询祖先的奇数结果的图表 (14321, 14319)](../Images/0fdab486fe9609e5cf827d93b049a165.png)

**背景：**我最近遇到了奇怪的合并冲突，结果证明是由 mercurial 试图重新应用已经合并的更改引起的。我能够将其追踪到一个奇怪的合并基础选择，这导致两个头都包含相同的更改-但我不明白为什么会发生这种情况以及将来如何防止它（我选择了 DVCS 部分是为了避免首先是这些问题......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:40:33.490

图片显示不是一个，而是两个共同的祖先。因此，它看起来像一个纵横交错的合并案例，其中合并问题源于选择一个或另一个共同祖先。

参考：

*   [https://bz.mercurial-scm.org/show_bug.cgi?id=1327#c18](https://bz.mercurial-scm.org/show_bug.cgi?id=1327#c18)
*   [http://www.gelato.unsw.edu.au/archives/git/0504/2279.html](http://www.gelato.unsw.edu.au/archives/git/0504/2279.html)
*   [http://wiki.vestasys.org/MergingFuture/Food4Thought/TrickyCases](http://wiki.vestasys.org/MergingFuture/Food4Thought/TrickyCases)
*   [http://revctrl.org/CrissCrossMerge?action=recall&rev=11](http://revctrl.org/CrissCrossMerge?action=recall&rev=11)

有一个新的合并算法提案（[https://www.mercurial-scm.org/wiki/ConsensusMerge](https://www.mercurial-scm.org/wiki/ConsensusMerge)）。然而，自从 Mercurial 的 2.3 sprint 以来，这个话题就被卡住了。

~~为了减少此类问题，我建议您建立一个客户端-服务器拓扑，以便开发人员只与官方存储库合并。也许 rebase 也可以提供帮助。~~

交叉合并是这样的：

```
 B --- D
  / \   / \
 /   \ /   \ 
A     X     F 
 \   / \   /
  \ /   \ /
   C --- E 
```

在你的情况下，它是：

```
 B
-----------o----               } stable/production
      C     \   \       F
------o------o---\------o      } default
       \     D    \    /
        -----------o---        } feature
                   E

A = ?
B = 14318
C = 14294
D = 14319
E = 14321
F = ? 
```

要产生`F`，有两种可能的电路：`B-D-E-F`和`C-D-E-F`。Mercurial 选择了后者。

如果您没有合并生产和功能分支，您可以避免交叉。修补程序可能已通过默认分支传播到功能分支。日志将是：

```
 B
-----------o               } stable/production
      C     \       F
------o------o------o      } default
       \    D \    /
        -------o---        } feature
               E 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:02:12.133

对于合并集的共同祖先的错误碱基检测，已知一个[弱点](http://kiln.stackexchange.com/questions/2983/what-is-the-algorithm-or-decision-process-used-by-mercurial-during-merge/2987#2987)：

如果任何合并集包含与合并编辑*无关的内容，则可能是错误的*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T13:11:35.320

我猜，祖先是 14294。由于您的两个新提交都是合并，因此您现在有多个祖先，这使得选择模棱两可。

不幸的是，没有办法告诉 mercurial 使用哪个潜在的祖先。

# android - 是什么导致我的 Android 应用程序出现这些错误？

> ID：14852087
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:06:22.243
> 
> 标签：android, xmlhttprequest

我在 LogCat 上收到这些错误：

```
02-13 18:52:12.742: E/AndroidRuntime(428): FATAL EXCEPTION: main
02-13 18:52:12.742: E/AndroidRuntime(428): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thesis.menubook/com.thesis.menubook.MenuMain}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.os.Looper.loop(Looper.java:132)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread.main(ActivityThread.java:4025)
02-13 18:52:12.742: E/AndroidRuntime(428):  at java.lang.reflect.Method.invokeNative(Native Method)
02-13 18:52:12.742: E/AndroidRuntime(428):  at java.lang.reflect.Method.invoke(Method.java:491)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-13 18:52:12.742: E/AndroidRuntime(428):  at dalvik.system.NativeStart.main(Native Method)
02-13 18:52:12.742: E/AndroidRuntime(428): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.Activity.setContentView(Activity.java:1780)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.thesis.menubook.MenuMain.onCreate(MenuMain.java:16)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
02-13 18:52:12.742: E/AndroidRuntime(428):  ... 11 more
02-13 18:52:12.742: E/AndroidRuntime(428): Caused by: android.os.NetworkOnMainThreadException
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
02-13 18:52:12.742: E/AndroidRuntime(428):  at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:368)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:208)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:431)
02-13 18:52:12.742: E/AndroidRuntime(428):  at java.net.Socket.connect(Socket.java:901)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-13 18:52:12.742: E/AndroidRuntime(428):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.thesis.menubook.JSONParser.makeHttpRequest(JSONParser.java:62)
02-13 18:52:12.742: E/AndroidRuntime(428):  at com.thesis.menubook.MenuCategory.onCreate(MenuCategory.java:41)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:702)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:905)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:983)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.app.Activity.onCreateView(Activity.java:4141)
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
02-13 18:52:12.742: E/AndroidRuntime(428):  ... 20 more
02-13 18:52:13.241: D/dalvikvm(428): GC_CONCURRENT freed 335K, 6% free 7443K/7879K, paused 10ms+10ms
02-13 18:52:23.632: I/Process(428): Sending signal. PID: 428 SIG: 9 
```

我猜这个特定的行导致我的应用程序强制关闭：

```
02-13 18:52:12.742: E/AndroidRuntime(428): Caused by: android.os.NetworkOnMainThreadException
02-13 18:52:12.742: E/AndroidRuntime(428):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077) 
```

任何想法是什么原因造成的？这是我的java文件：

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.TargetApi;
import android.app.ListFragment;
import android.app.ProgressDialog;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.SimpleAdapter;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuCategory extends ListFragment {
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> categoryList;
    private ProgressDialog pDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        // LOAD CATEGORY ONTO LIST

        Bundle b = getActivity().getIntent().getExtras();
        String table_ID = b.getString("Table");
        String ipaddress = b.getString("IPAddress");

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        Log.d("IP ADDRESS", ipaddress +" ");

            //CODE FAILS HERE 

        JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectCategories.php", "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Categories: ", json.toString() + " ");

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt("success");

            if (success == 1) {
                // products found
                // Getting Array of Products

                JSONArray category_list = json.getJSONArray("category_list");

                // looping through All Products
                for (int j = 0; j < category_list.length(); j++) {
                    JSONObject c = category_list.getJSONObject(j);

                    // Storing each json item in variable
                    String category = c.getString("category");

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put("category", category);
                    int num = 1;
                    Log.d("category #"+num+"", category);
                    num++;
                    // adding HashList to ArrayList
                    if(categoryList.contains(map) != true)
                    {
                        categoryList.add(map);
                    }
                }
            } 
        } catch (JSONException e) {
            e.printStackTrace();
        }
        ArrayAdapter<ArrayList<HashMap<String, String>>> arrayAdapter = new ArrayAdapter<ArrayList<HashMap<String, String>>>(getActivity().
                getApplicationContext(), R.layout.activity_menu_category);
        arrayAdapter.add(categoryList);
        setListAdapter(arrayAdapter);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:08:41.240

使用 ASyncTask 执行网络任务。自 Honeycomb 以来，禁止在 UI 线程上进行网络请求，并使用此异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:09:09.353

您正在 Fragment 的`onCreate()`. 这是一个非常糟糕的主意，并且非常正确地导致系统抱怨。你不知道网络请求需要多长时间才能完成，同时 UI 线程被阻塞等待结果。

从[文档中](http://developer.android.com/guide/components/processes-and-threads.html)：

> 不要阻塞 UI 线程

网络活动应该发生在后台线程中。看看`ASyncTask`或`IntentService`。

# java - Struts 2 和 Hibernate 中的异常处理

> ID：14852089
> 
> 赞同：3
> 
> 时间：2013-02-13T11:06:35.940
> 
> 标签：java, hibernate, exception, struts2

假设我们在 Struts 2、Hibernate、MySQL 中开发了一个网站，并且我们在`try/catch`这里添加了几个块，这些块包含通过 Hibernate 进行的数据库调用。

**我的问题是：**

1.  在 catch 块内，我正在向记录器发送适当的消息。在这里我们不能将`System.out.println`其用作网页，还有什么可以提醒用户异常？

2.  作为测试的一部分，我更改`hibernate.cfg.xml`并输入了错误的数据库密码，以模拟数据库崩溃的场景。

**正如我所料它抛出了错误：**

```
 javax.servlet.ServletException: Filter execution threw an exception

    java.lang.NoClassDefFoundError: com_cenqua_clover/CoverageRecorder
    my.com.employee.<init>(employee.java:29)
    com.action.employeeAction.<init>(employeeAction.java:23)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:119)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:150)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:139)
    com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:109)
    com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:288)
    com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:388)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:187)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    note The full stack trace of the root cause is available in the Apache Tomcat/7.0.20 logs. 
```

从用户的角度来看，这是不可取的权利，那么如何解决这些问题。我正在使用 Eclipse Juno、Windows XP、MySQL 5.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:48:19.937

异常是程序或开发人员无法处理具有异常行为的情况的结果。在这种情况下，开发人员可以知道抛出了异常，并可以采取一些措施来解决问题。

普通用户不需要知道任何异常，但系统管理员实际上知道。因此，记录异常很好，可以进一步解决任何问题。

这在开发阶段也很有用，当开发人员需要通过打印堆栈跟踪来调试问题时，重新抛出异常。在这种情况下很少适用捕获和忽略异常。

在正常情况下，应该捕获、记录并重新抛出异常。但是在 Struts2 中，您可以通过创建默认的应用程序拦截器堆栈来处理未捕获的异常

```
<interceptor-stack name="appDefaultStack">
  <interceptor-ref name="defaultStack">
    <param name="exception.logEnabled">true</param>
    <param name="exception.logLevel">ERROR</param>
  </interceptor-ref>
</interceptor-stack> 
```

> 此应用程序未捕获的任何异常都将被记录，然后由全局异常映射处理

```
<global-exception-mappings>
  <exception-mapping exception="java.lang.Exception" result="error"/>
</global-exception-mappings>

<global-results>
  <result name="error">/error_page.jsp</result>
</global-results> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:55:33.630

用户不需要知道有数据库异常，开发人员知道。

应记录特定的异常。用户应该看到操作失败。通常，您要么通过正常的 S2 方式简单地报告这一点，例如，一条错误消息。

您还可以抛出特定于应用程序的异常并使用 S2 的声明性异常处理。

您*可以*使用声明性异常处理来处理任何或所有低级异常，但 IMO 要么太笼统，要么太乏味。

# jquery - jquery - 在上传之前检查文件扩展名

> ID：14852090
> 
> 赞同：29
> 
> 时间：2013-02-13T11:06:38.463
> 
> 标签：jquery

我正在使用 uploadify 使用**Codeigniter**上传文件。在上传文件之前，我只需要检查文件扩展名是否正确。我试过[http://jquery.bassistance.de/](http://jquery.bassistance.de/)和[http://forum.jquery.com/](http://forum.jquery.com/)

Bur没有得到正确的结果。谁能告诉我我该怎么做？

提前致谢...

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-05-05T10:30:42.037

您可以使用 JQuery 来实现这一点

**HTML**

```
 <input type="file" id="FilUploader" /> 
```

**jQuery**

```
 $("#FilUploader").change(function () {
        var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
        if ($.inArray($(this).val().split('.').pop().toLowerCase(), fileExtension) == -1) {
            alert("Only formats are allowed : "+fileExtension.join(', '));
        }
    }); 
```

更多信息请[点击这里](http://www.aspdotnet-suresh.com/2012/12/jquery-validate-file-upload-extension.html)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-13T11:51:45.933

如果您想在没有插件的情况下执行此操作，可以使用以下内容。

Javascript，使用 jQuery：

```
$(document).ready( function (){
    $("#your_form").submit( function(submitEvent) {

        // get the file name, possibly with path (depends on browser)
        var filename = $("#file_input").val();

        // Use a regular expression to trim everything before final dot
        var extension = filename.replace(/^.*\./, '');

        // Iff there is no dot anywhere in filename, we would have extension == filename,
        // so we account for this possibility now
        if (extension == filename) {
            extension = '';
        } else {
            // if there is an extension, we convert to lower case
            // (N.B. this conversion will not effect the value of the extension
            // on the file upload.)
            extension = extension.toLowerCase();
        }

        switch (extension) {
            case 'jpg':
            case 'jpeg':
            case 'png':
                alert("it's got an extension which suggests it's a PNG or JPG image (but N.B. that's only its name, so let's be sure that we, say, check the mime-type server-side!)");

            // uncomment the next line to allow the form to submitted in this case:
//          break;

            default:
                // Cancel the form submission
                submitEvent.preventDefault();
        }

  });
}); 
```

HTML：

```
<form id="your_form" method="post" enctype="multipart/form-data">
    <input id="file_input" type="file" />
    <input type="submit">
</form> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-13T11:41:39.087

我要感谢发布答案的人，但他已删除该帖子。我们可以这样做。

```
$("#yourElem").uploadify({
   'uploader': ...,
   'script': ...
    'fileExt' : '*.jpg;*.gif;', //add allowed extensions
    .....,
    'onSelect': function(e, q, f) {
        var validExtensions = ['jpg','gif']; //array of valid extensions
        var fileName = f.name;
        var fileNameExt = fileName.substr(fileName.lastIndexOf('.') + 1);
        if ($.inArray(fileNameExt, validExtensions) == -1){
           alert("Invalid file type");
           $("#yourElem").uploadifyCancel(q);
           return false;
        }
    }
}); 
```

感谢您的回答，它确实有效...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-20T13:35:31.237

这是一个用于 javascript 验证的简单代码，验证后它将清理输入文件。

```
<input type="file" id="image" accept="image/*" onChange="validate(this.value)"/>

function validate(file) {
    var ext = file.split(".");
    ext = ext[ext.length-1].toLowerCase();      
    var arrayExtensions = ["jpg" , "jpeg", "png", "bmp", "gif"];

    if (arrayExtensions.lastIndexOf(ext) == -1) {
        alert("Wrong extension type.");
        $("#image").val("");
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-01T17:30:11.220

```
 $("#file-upload").change(function () {

    var validExtensions = ["jpg","pdf","jpeg","gif","png"]
    var file = $(this).val().split('.').pop();
    if (validExtensions.indexOf(file) == -1) {
        alert("Only formats are allowed : "+validExtensions.join(', '));
    }

}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-02T09:02:44.400

```
<!DOCTYPE html>
    <html>
      <head>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script>
         jQuery(document).ready(function(){
               jQuery('.form-file input').each(function () {
                     $this = jQuery(this);
                          $this.on('change', function() {
                               var fsize = $this[0].files[0].size,
                                   ftype = $this[0].files[0].type,
                                   fname = $this[0].files[0].name,
                                   fextension = fname.substring(fname.lastIndexOf('.')+1);
                                   validExtensions = ["jpg","pdf","jpeg","gif","png","doc","docx","xls","xlsx","ppt","pptx","txt","zip","rar","gzip"];

                                if ($.inArray(fextension, validExtensions) == -1){
                                    alert("This type of files are not allowed!");
                                    this.value = "";
                                    return false;
                                }else{
                                    if(fsize > 3145728){/*1048576-1MB(You can change the size as you want)*/
                                        alert("File size too large! Please upload less than 3MB");
                                        this.value = "";
                                        return false;
                                    }
                                    return true;
                               }

                         });
             });
       });
    </script>
    </head>

<body>
    <form>
          <div class="form-file">
               <label for="file-upload" class="from-label">File Upload</label>
               <input class="form-control" name="file-upload" id="file-upload" type="file">
          </div>
    </form>
</body>

</html> 
```

这是检查文件大小和文件扩展名的完整答案。这使用了默认文件输入字段和 jQuery 库。工作示例：[https ://jsfiddle.net/9pfjq6zr/2/](https://jsfiddle.net/9pfjq6zr/2/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-23T17:02:48.193

以下代码允许上传 gif、png、jpg、jpeg 和 bmp 文件。

```
var extension = $('#your_file_id').val().split('.').pop().toLowerCase();

if($.inArray(extension, ['gif','png','jpg','jpeg','bmp']) == -1) {
    alert('Sorry, invalid extension.');
    return false;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-23T21:43:25.170

如果您不想使用`$(this).val()`，可以尝试：

```
var file_onchange = function () {
  var input = this; // avoid using 'this' directly

  if (input.files && input.files[0]) {
    var type = input.files[0].type; // image/jpg, image/png, image/jpeg...

    // allow jpg, png, jpeg, bmp, gif, ico
    var type_reg = /^image\/(jpg|png|jpeg|bmp|gif|ico)$/;

    if (type_reg.test(type)) {
      // file is ready to upload
    } else {
      alert('This file type is unsupported.');
    }
  }
};

$('#file').on('change', file_onchange); 
```

希望这可以帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-03T13:25:31.393

```
 function yourfunctionName() {
            var yourFileName = $("#yourinputfieldis").val();

            var yourFileExtension = yourFileName .replace(/^.*\./, '');
            switch (yourFileExtension ) {
                case 'pdf':
                case 'jpg':
                case 'doc':
                    $("#formId").submit();// your condition what you want to do
                    break;
                default:
                    alert('your File extension is wrong.');
                    this.value = '';
            }    
        } 
```

# xml - XSLT：组合元素而不重复

> ID：14852096
> 
> 赞同：3
> 
> 时间：2013-02-13T11:06:56.270
> 
> 标签：xml, xslt

我想做从 XML 到结合一些元素的文本的转换，但要避免输出中的重复。XML 会是这样的：

```
<A>
  <B>
    <param1>value0</param1>
    <param2>value1</param2>
  </B>
  <B>
    <param1>value2</param1>
    <param2>value3</param2>
  </B>
  <C>
    <param3>valueC1</param3>
    <D>
      <param4>value0</param4>
      <param5>value4</param5>
    </D>
    <D>
      <param4>value0</param4>
      <param5>value5</param5>
    </D>
    <D>
      <param4>value2</param4>
      <param5>value6</param5>
    </D>
  </C>
  <C>
    <param3>valueC2</param3>
    <D>
      <param4>value0</param4>
      <param5>value5</param5>
    </D>
  </C>
</A> 
```

和输出：

```
OBJECT: param1=value0, param2=value1, param3=valueC1, param4=value0;
OBJECT: param1=value2, param2=value3, param3=valueC1, param4=value2;
OBJECT: param1=value0, param2=value1, param3=valueC2, param4=value0; 
```

笔记：

*   对于每个 D 对象，使用 D.param4 = B.param1 查找与 B 对象的匹配项
*   如果有两个或多个 D 对象进入同一个 C 并与同一个 B 匹配，则只打印其中一个（在示例中，对第二个 D 对象不做任何事情，因为它会产生与第一个对象相同的行）
*   如果有两个 D 对象与相同的 B 匹配，但在不同的 C 中，则打印两者（输出示例中的第三行）

我寻找了一些类似的问题，但在同一案例中找不到任何问题。

我想这可以通过使用键来完成，但它太复杂了。

谢谢！

问候，艾尔。

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:25:52.883

鉴于您没有`param5`在输出中使用任何内容，似乎可以将问题简化为

*   对于每个 C
    *   找到与*任何*包含的 D匹配的所有*不同的*B 元素`param1``param4`
    **   对于每一个
        *   再次提取 B/param1、B/param2、currentC/param3、B/param1（但标记为 param4）*

 *这是使用模板实现这一目标的一种方法。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text" />
  <xsl:key name="BbyParam1" match="B" use="param1" />

  <xsl:template match="/">
    <xsl:apply-templates select="A/C" />
  </xsl:template>

  <xsl:template match="C">
    <xsl:apply-templates select="key('BbyParam1', D/param4)">
      <xsl:with-param name="currentC" select="." />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="B">
    <xsl:param name="currentC" />
    <xsl:text>OBJECT: param1=</xsl:text>
    <xsl:value-of select="param1" />
    <xsl:text>, param2=</xsl:text>
    <xsl:value-of select="param2" />
    <xsl:text>, param3=</xsl:text>
    <xsl:value-of select="$currentC/param3" />
    <xsl:text>, param4=</xsl:text>
    <xsl:value-of select="param1" />
    <xsl:text>&#10;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

“找到与*任何*包含的 D匹配的所有*不同的*B 元素”实际上非常简单，因为当您将节点集作为第二个参数传递给函数时，它正是这样做的 - 它返回所有节点的集合其键值是参数节点集中*任何*节点的字符串值，并且返回的节点集（作为一个集合）保证不包含重复项。`param1``param4`*`key`*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:39:09.070

这应该可以解决问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>
  <xsl:key name="kB" match="B" use="param1" />
  <xsl:key name="kD" match="D" 
           use="concat(param4, '+', generate-id(..))"/>

  <xsl:template match="/">
    <xsl:apply-templates select="A/C" />
  </xsl:template>

  <xsl:template match="C">
    <xsl:apply-templates select="D[key('kB', param4) and 
                                    generate-id() = 
                                    generate-id(key('kD', 
                                       concat(
                                          param4, 
                                          '+', 
                                          generate-id(..)
                                       )
                                    )[1])]" />
  </xsl:template>

  <xsl:template match="D">
    <xsl:value-of 
      select="concat('OBJECT: param1=', 
                     key('kB', param4)/param1, 
                     ', param2=', 
                     key('kB', param4)/param2,
                     ', param3=',
                     ../param3,
                     ', param4=',
                     param4,
                     '&#xA;')"/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的样本上运行时的输出：

```
OBJECT: param1=value0, param2=value1, param3=valueC1, param4=value0
OBJECT: param1=value2, param2=value3, param3=valueC1, param4=value2
OBJECT: param1=value0, param2=value1, param3=valueC2, param4=value0 
```***

# actionscript-3 - 如何在 ScrollPane 组件 AS3 中更改轮速？

> ID：14852099
> 
> 赞同：0
> 
> 时间：2013-02-13T11:07:00.420
> 
> 标签：actionscript-3, actionscript

有没有办法改变 ScrollPane 组件 AS3 中的轮速？

# xml - 抑制 ServiceReference .cs 文件的 Xml 警告

> ID：14852103
> 
> 赞同：7
> 
> 时间：2013-02-13T11:07:16.303
> 
> 标签：xml, visual-studio-2012, suppress-warnings, service-reference

使用`MVC4`and `VS2012`，我正在使用 a `Service Reference`，它会自动生成一个`Reference.cs`文件。当我构建时，我收到几十个警告作为错误读取

> '缺少公开可见类型或成员的 XML 注释...'

我在[这里](https://stackoverflow.com/questions/2701706/supress-warning-for-generated-c-sharp-code)找到了一个类似的答案，它引用了在这个[博客](http://lvquoc.blogspot.co.uk/2010/11/disable-xml-comment-warning-in-workflow.html)中找到的解决方法，它建议将以下修复添加到`CSProj`文件中：

```
<Target Name="XamlGeneratedCodeWarningRemoved" AfterTargets="XamlMarkupCompilePass1">
    <Exec Command="for %%f in (@(XamlGeneratedCodeFiles)) do echo #pragma warning disable > %%f.temp" />
    <Exec Command="for %%f in (@(XamlGeneratedCodeFiles)) do type %%f >> %%f.temp" />
    <Exec Command="for %%f in (@(XamlGeneratedCodeFiles)) do copy /y %%f.temp %%f" />
    <Message Text="XamlGeneratedCodeWarningRemoved: @(XamlGeneratedCodeFiles)" />
  </Target> 
```

但这似乎不适用于该`Reference.cs`文件，可能是因为它的目标是`Xaml`? 谁能告诉我如何解决此问题以使用`Reference.cs`文件或建议另一种解决此问题的方法？

我不能只`pragma disable`在自动生成的代码中添加一个或禁用`Xml`注释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:13:15.343

即时更新预生成的 .cs 文件将[导致 Visual Studio 出现各种问题，因为它将使用文件的内存副本](http://blog.jessehouwing.nl/2012/06/just-in-time-updating-of-source-files.html)。由于源代码控制集成使文件成为只读文件并要求在每次构建后签入文件，这将非常令人恼火。

您还可以通过调整其属性来使您的服务客户端成为内部的。根据您的设置，文档生成不会抱怨任何外部不可见的方法。这可能仍会触发 StyleCop、代码分析或 Resharper 警告...

所以我通常做的是，我将服务引用粘贴在他们自己的 Visual Studio 项目中，将生成的代码公开并关闭整个项目的文档生成。这还有一个优点，即您的服务引用将使用相同的绑定，而不管您将它包含在哪个项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:35:16.117

我还发现我可以在创建时设置`Service Reference`as ，这可以解决摘要问题。`Internal``Xml`

虽然这仍然给我留下了抑制`StyleCop`生成代码错误的问题，但我会为此创建一个新问题。

# c - 难以使用值集参数。下面的代码

> ID：14852107
> 
> 赞同：0
> 
> 时间：2013-02-13T11:07:31.120
> 
> 标签：c

我有以下代码片段：基本上我正在尝试使用值集方法从提取函数中获取值。以下是下面的片段

```
int extract(uint8_t *msg) 
{
    msg = get_value();
    print(msg); // I am able to print the value here.
}

int main()
{
     uint8_t msg;
     extract(&msg);
     print(msg)   // Here it is printing incorrect value..
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:09:17.200

您将 msg 作为指针传递。

```
int extract(uint8_t *msg) 
{
    msg = get_value();
    print(msg); // I am able to print the value here.
} 
```

应该

```
int extract(uint8_t *msg) 
{
    *msg = get_value();
    print(*msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:41:36.630

如果你结合所有给出的答案，你可能会得到一些工作。

您的代码中有许多错误，不清楚返回`get_value()`什么以及`print()`. 我的猜测是你的`print()`函数需要一个指针——这就是为什么`print()`起作用`extract()`——你还应该通过引用传递 msg 指针，以便它在 main 中工作。所以你可能需要这样的东西（C代码）：

```
int extract(uint8_t **msg) 
{
    (*msg) = get_value();
    print(*msg);
}

int main()
{
     uint8_t *msg;
     extract(&msg);
     print(msg)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:10:51.177

msg = get_value() 为指针赋值。您应该使用 *msg = get_value() 将值分配给 main 中定义的变量 msg。

# python - 如何调用实例函数？

> ID：14852109
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:07:37.687
> 
> 标签：python

我有一个类实例，我想调用其中一个实例函数

```
udp_action = UDPActions( application = self.application )
func = getattr( udp_action, 'udp_' + opts['cmd'] + '_fired' ) 
```

但我收到以下错误

```
Values instance has no attribute '__getitem__' 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:09:18.683

您正在使用`opts`它，就好像它是一本字典（或类似字典的对象），但事实并非如此。

它不支持该`['cmd']`表示法，导致您看到的异常。

```
In [1]: class Values(object): pass

In [2]: opts = Values()

In [3]: opts['cmd']

TypeError: 'Values' object has no attribute '__getitem__' 
```

# c# - 为什么我的 LINQ to Entities 语法不支持“Lambda”

> ID：14852122
> 
> 赞同：2
> 
> 时间：2013-02-13T11:08:20.790
> 
> 标签：c#, linq, linq-to-entities, iqueryable

当我尝试在 LINQ to Entities 中运行以下查询时出现错误：

```
public IEnumerable TestOne2()
{
    var query = this.Context.CmnAddressCities
        .Join(this.Context.CmnAddressStates, 
              p => p.StateID, q => q.StateID, 
              (p, q) => SelectSearchColumns)
        .ToList();

     return query;
}

public Expression<Func<CmnAddressCity,CmnAddressState, dynamic>>
    SelectSearchColumns = (e,r) => new
        {
            CityID = e.CityID,
            CityName = e.CityName,
            StateName=r.StateName,
        }; 
```

**错误信息：**

> LINQ to Entities 不支持 LINQ 表达式节点类型“Lambda”。

想知道为什么会出现这个错误，如何解决这个问题。

如果有任何疑问请询问，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:16:33.743

以下应该有效：

```
var query = this.Context.CmnAddressCities
                .Join(this.Context.CmnAddressStates, 
                      p => p.StateID, 
                      q => q.StateID, 
                      SelectSearchColumns)
                .ToList(); 
```

不同之处见倒数第二行。您的版本会创建一个返回表达式的表达式。EF 提供程序无法将其转换为 SQL，SQL 中表达式的等价性是什么？那是不存在的。
您只需将表达式作为参数本身传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:16:13.653

这个表达

```
(p, q) => SelectSearchColumns 
```

是一个返回表达式的表达式。尝试将其更改为`SelectSearchColumns`自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T11:17:59.317

在表达式`(p, q) => SelectSearchColumns`中，您将传递`SelectSearchColumns`给 Join 方法而不是调用它。然后查询提供程序无法将其转换为 SQL 语句，因为它是作为数据传递的，而不是被解释为调用。

你需要

```
.Join(this.Context.CmnAddressStates, 
     p => p.StateID, 
     q => q.StateID, 
     (p, q) => SelectSearchColumns(p, q)) 
```

或短版

```
.Join(this.Context.CmnAddressStates, 
     p => p.StateID, 
     q => q.StateID, 
     SelectSearchColumns) 
```

# objective-c - NSTableView 中的排序顺序

> ID：14852124
> 
> 赞同：0
> 
> 时间：2013-02-13T11:08:21.867
> 
> 标签：objective-c, cocoa, nstableview, cocoa-bindings, nssortdescriptor

我有一个数据列表，我可以通过单击列标题对其进行排序。唯一的问题是它显示如下：

```
10A
11A
12A
1A
2A
3A

etc... 
```

理想情况下，我希望它的排序如下：

```
1A
2A
3A
4A
5A
6A
7A
8A
9A
10A
11A

etc... 
```

有没有办法绕过这个默认的排序操作？

这些是我的排序描述符属性：

![排序描述符属性](../Images/b00223b9f24aef9cda3731536a858876.png)

@Monolo：

![在此处输入图像描述](../Images/894df6aeacfd63e35f79d91568a87e44.png)

```
 self.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"self"
                                                       ascending:YES
                                                      comparator:^NSComparisonResult(id obj1, id obj2) {
                                                          NSLog(@"COMPARATOR!");
                                                          return [obj1 compare:obj2
                                                                       options:NSNumericSearch];
                                                      }]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:54:34.523

通常，您要查找的排序类型可以通过 的`compare:options:`方法获得`NSString`，因此，如果您在代码中构造排序描述符并将它们放入数组控制器（以编程方式或通过从 ni​​b 文件绑定），您应该得到什么你正在寻找。

设置一个排序描述符数组，例如这样：

```
// AppDelegate.h:

@property (strong) NSArray *sortDescriptors;

//AppDelegate.m:

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"self"
                                                ascending:YES
                                               comparator:^NSComparisonResult(id obj1, id obj2) {
                                                   return [obj1 compare:obj2
                                                                options:NSNumericSearch];
                                               }]];
} 
```

因此，与其绑定到标准用户默认控制器，不如绑定到您的 App Delegate（或您更喜欢保存这些帮助对象的其他对象），然后您将获得您所追求的行为。绑定的模型键路径`sortDescriptors`使用上面的代码片段。

# cordova - iOS Phonegap/jQuery 移动应用程序在暂停/进入后台时性能下降

> ID：14852125
> 
> 赞同：1
> 
> 时间：2013-02-13T11:08:22.553
> 
> 标签：cordova, jquery-mobile

我目前正在为 iOS 编写一个 phonegap 应用程序。我正在为 UI 使用 jQuery mobile。该应用程序在新使用时运行良好（刚安装或干净打开 - 即如果应用程序已退出或设备关闭）但是当应用程序暂停/进入后台然后重新打开时，性能似乎下降了很多所以该应用程序变得几乎无法使用且无响应-您甚至无法在页面之间导航等。

我认为这个问题可能与 JQM 以及我使用多页模板而不是将每个页面拆分为单个 HTML 文件的事实有关。

有没有其他人经历过这种情况，或者有人能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:50:14.077

最后，从 JQM 多页面设置（一个包含多个页面的长 .html 文件）切换到单页面模板（每个页面有一个单独的 .html 文件）为我解决了这个问题。

现在暂停和恢复应用程序时性能没有下降 - 希望这对某人有所帮助。

# ruby - 如何按角色查找厨师节点ip

> ID：14852128
> 
> 赞同：3
> 
> 时间：2013-02-13T11:08:28.300
> 
> 标签：ruby, postgresql, ip, chef-infra, role

我有问题。我正在尝试获取一个运行 postgresql 并且是复制主机的节点 IP。所以我可以将 IP 植入到 repmgr 食谱中，这样它就会自动将其设置到 SSH 配置文件中。我需要它，因为我没有在端口 22 上运行 SSH，所以我需要自动化这个过程。

这是 configure.rb 文件：

```
template File.join(node[:repmgr][:pg_home], '.ssh/config') do
  source 'ssh_config.erb'
  mode 0644
  owner node[:repmgr][:system_user]
  group node[:repmgr][:system_user]
  variables( :hosts => Array(master_node[:ipaddress]) )
end

directory File.dirname(node[:repmgr][:config_file_path])

template node[:repmgr][:config_file_path] do
  source 'repmgr.conf.erb'
  mode 0644
end 
```

主节点 IP 地址取自属性（default.rb）：

```
default[:repmgr][:addressing][:master] = nil 
```

我需要将 nil 更改为其他内容，以便我可以获得主服务器的 IP，因此也称为从属服务器。备用服务器可以将其 IP 添加到 SSH 配置，因此它将通过我的 SSH 端口而不是默认的 22 端口进行复制。

我希望有人能提供帮助，因为我是 Ruby 的新手，而且我只知道它的基础知识。

谢谢你。我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:24:34.553

如果您使用的是[chef-server](http://wiki.opscode.com/display/chef/Chef+Server) ，那么您可以通过在 recipe 中[搜索](http://wiki.opscode.com/display/chef/Search)找到其他配置的节点。您可以按不同的属性搜索节点：例如角色、配方、环境、名称等。我希望您的**复制主**节点具有一些使其独一无二的属性，例如*postgres*配方或run_list 中的*复制主*角色。

```
nodes = search( :node, 'recipes:postgres' ) 
```

或者

```
nodes = search( :node, 'role:replication-master' ) 
```

搜索返回具有相应属性的节点数组。进而：

```
node.default[:repmgr][:addressing][:master] = nodes.first[:ipaddress] 
```

代码应该写在配方文件中，而不是属性中。

# r - 使用应用功能并选择行

> ID：14852133
> 
> 赞同：0
> 
> 时间：2013-02-13T11:09:06.833
> 
> 标签：r, apply

我有一个数据框，显示每个物种（列）的每个地块（线）的树木数量。

我有 115 种树木在列和 6264 个地块

> 头（特别是）

```
 02 03 04 05 06 07 08S 09 10 11 12P 12V 13B 13C 13G 14 15P 15S 16 17C
  600005  0  0  0  0  0  0   0  0 16  0   0   0   0   0   0  0   0  32  0   0
  600008  0  0  0  0  0  0   0  0  0  0   0   8   0   0   0  0   0   0  0   5
  600012  0  0  0  0  0  0   0  0  0  0   0   0   0   0   0  0   0   0  0   0
  600030  3  0  0  5  0  0   0  0  0  0   0   0   0   0   0  0   0   0  0   0
  600033  0  0  0  0  0  0   0  0  0  0   0   0   0   0   0  0   0   0  0   0
  600035  0  0  0  1  0  0   0  0  0  0   0   0   0   0   0  0   0   0  0   0 
```

我正在尝试计算每个地块中每种物种的比例。我试图这样做：

```
apply(esp,c(1,2), function(x){ifelse(x>0, x/sum(x)*100,0)}) 
```

我想要的是一个数据框，其中不同的图为线，物种的比例为列。

感谢您的帮助。

我回来只是为了一个愚蠢的问题：现在我的数据框包含每个地块中每个物种的比例，我想选择所有具有超过 80% 的一个物种的“纯”地块。

我知道如何为一个物种选择行：

```
pur<-prop[which(prop[,1]>80),] 
```

这行得通，给了我想要的东西，但是由于我有 115 列，我尝试使用循环来完成它：

```
for (i in 1:115){
prop[which(prop[,i]>80),]
} 
```

但效果并不好。

我也尝试过应用，但 which() 不是一个函数，所以它也不起作用。

```
apply(prop,2,which(prop[,1]>80)) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:14:49.533

这是你要找的吗？

```
esp/rowSums(esp)

         X02 X03 X04   X05 X06 X07 X08S X09       X10 X11 X12P      X12V
600005 0.000   0   0 0.000   0   0    0   0 0.3333333   0    0 0.0000000
600008 0.000   0   0 0.000   0   0    0   0 0.0000000   0    0 0.6153846
600012   NaN NaN NaN   NaN NaN NaN  NaN NaN       NaN NaN  NaN       NaN
600030 0.375   0   0 0.625   0   0    0   0 0.0000000   0    0 0.0000000
600033   NaN NaN NaN   NaN NaN NaN  NaN NaN       NaN NaN  NaN       NaN
600035 0.000   0   0 1.000   0   0    0   0 0.0000000   0    0 0.0000000
       X13B X13C X13G X14 X15P      X15S X16      X17C
600005    0    0    0   0    0 0.6666667   0 0.0000000
600008    0    0    0   0    0 0.0000000   0 0.3846154
600012  NaN  NaN  NaN NaN  NaN       NaN NaN       NaN
600030    0    0    0   0    0 0.0000000   0 0.0000000
600033  NaN  NaN  NaN NaN  NaN       NaN NaN       NaN
600035    0    0    0   0    0 0.0000000   0 0.0000000 
```

结果中的`NaN`(Not A Number) 元素显然是由于某些地块的物种总数为 0，从而导致除以零。如果您愿意，可以将这些值替换为其他值，例如：

```
res <- esp/rowSums(esp)
res <- sapply(res, function(v) {
  v[is.nan(v)] <- 0
  return(v)
})
round(res,2)

       X02 X03 X04  X05 X06 X07 X08S X09  X10 X11 X12P X12V X13B X13C X13G
[1,] 0.00   0   0 0.00   0   0    0   0 0.33   0    0 0.00    0    0    0
[2,] 0.00   0   0 0.00   0   0    0   0 0.00   0    0 0.62    0    0    0
[3,] 0.00   0   0 0.00   0   0    0   0 0.00   0    0 0.00    0    0    0
[4,] 0.38   0   0 0.62   0   0    0   0 0.00   0    0 0.00    0    0    0
[5,] 0.00   0   0 0.00   0   0    0   0 0.00   0    0 0.00    0    0    0
[6,] 0.00   0   0 1.00   0   0    0   0 0.00   0    0 0.00    0    0    0
     X14 X15P X15S X16 X17C
[1,]   0    0 0.67   0 0.00
[2,]   0    0 0.00   0 0.38
[3,]   0    0 0.00   0 0.00
[4,]   0    0 0.00   0 0.00
[5,]   0    0 0.00   0 0.00
[6,]   0    0 0.00   0 0.00 
```

# modelsim - 是否可以在 modelsim 中创建 IP 地址基数？

> ID：14852136
> 
> 赞同：0
> 
> 时间：2013-02-13T11:09:14.437
> 
> 标签：modelsim

有没有办法让ip地址字在wave窗口中以十进制点格式显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:31:29.743

据我所知，不是……但是您可以为 4 个部分创建虚拟信号（“虚拟信号……”）。
将它们显示为十进制（'-radix unsigned'）。
并使用这 4 个虚拟信号创建一个组 ('add wave ... -group ...) 。

我发现在 GUI 中创建虚拟信号和组更容易，然后在 DO 文件中自己输入（'Tools' -> 'Virtual Builder'）。

一个测试 VHDL 文件：

```
library ieee;
use ieee.std_logic_1164.all;

entity test is
end entity test;

architecture rtl of test is
    signal ip : std_logic_vector(31 downto 0) := x"AC_10_41_3D";  -- 172.16.65.61
begin  -- architecture rtl
end architecture rtl; 
```

wave.do 文件的重要部分：

```
quietly virtual signal -install /test { /test/ip(31 downto 24)} ip_3
quietly virtual signal -install /test { /test/ip(23 downto 16)} ip_2
quietly virtual signal -install /test { /test/ip(15 downto 8)} ip_1
quietly virtual signal -install /test { /test/ip(7 downto 0)} ip_0
add wave -noupdate /test/ip; # without formatting
# group the 4 parts of the IP address and display them as decimal
add wave -noupdate -expand -group {IP_formatted} -radix unsigned /test/ip_3
add wave -noupdate -expand -group {IP_formatted} -radix unsigned /test/ip_2
add wave -noupdate -expand -group {IP_formatted} -radix unsigned /test/ip_1
add wave -noupdate -expand -group {IP_formatted} -radix unsigned /test/ip_0 
```

# python - windows文件路径路径中的空格

> ID：14852140
> 
> 赞同：48
> 
> 时间：2013-02-13T11:09:21.373
> 
> 标签：python, file

我正在使用 python 进行文件操作。

我有一个文件路径：

```
filepath = "E:/ABC/SEM 2/testfiles/all.txt" 
```

当我使用 python 打开文件时，它说我：

```
IOError: No such file: 
```

但是，该文件存在于驱动器上。
这可能是因为 Windows 无法正确获取“SEM 2”，因为它包含空间。
如何处理窗口路径路径中的此类空格？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-09-03T17:19:05.767

```
path = r"C:\Users\mememe\Google Drive\Programs\Python\file.csv" 
```

关闭 r"string" 中的路径也很好的解决了这个问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-13T11:23:12.290

路径中的空格没有问题，因为您没有使用“shell”打开文件。这是一个来自 Windows 控制台的会话来证明这一点。你做错了其他事情

```
Python 2.7.2 (default, Jun 12 2011, 14:24:46) [MSC v.1500 64 bit (AMD64)] on wi
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>>
>>> os.makedirs("C:/ABC/SEM 2/testfiles")
>>> open("C:/ABC/SEM 2/testfiles/all.txt","w")
<open file 'C:/ABC/SEM 2/testfiles/all.txt', mode 'w' at 0x0000000001D95420>
>>> exit()

C:\Users\Gnibbler>dir "C:\ABC\SEM 2\testfiles"
 Volume in drive C has no label.
 Volume Serial Number is 46A0-BB64

 Directory of c:\ABC\SEM 2\testfiles

13/02/2013  10:20 PM    <DIR>          .
13/02/2013  10:20 PM    <DIR>          ..
13/02/2013  10:20 PM                 0 all.txt
               1 File(s)              0 bytes
               2 Dir(s)  78,929,309,696 bytes free

C:\Users\Gnibbler> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-13T11:17:02.227

尝试在文件路径变量中添加双引号

```
"\"E:/ABC/SEM 2/testfiles/all.txt\"" 
```

检查文件的权限或在任何情况下考虑重命名文件夹以删除空间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-13T04:21:41.000

**Mac**上的一个黑客：

```
path = '/Volumes/Public/ABY/Documents/Musiq/slumdog millonaire/Mausam and Escape.mp3'
nPath = path.replace(' ', '\\ ')
print(nPath) 
```

输出：

```
/Volumes/Public/ABY/Documents/Musiq/slumdog\ millonaire/Mausam\ and\ Escape.mp3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-07T20:52:40.077

（WINDOWS - AWS 解决方案）通过**在文件和路径周围加上三引号来**
解决 windows问题。 好处： 1) 防止被悄悄忽略的排除。 2) 包含空格的文件/文件夹将不再出现错误。

 **```
 aws_command = 'aws s3 sync """D:/""" """s3://mybucket/my folder/"  --exclude """*RECYCLE.BIN/*""" --exclude """*.cab""" --exclude """System Volume Information/*""" '

    r = subprocess.run(f"powershell.exe {aws_command}", shell=True, capture_output=True, text=True) 
```**

# maven - JBoss 7 项目库作为一个模块

> ID：14852144
> 
> 赞同：2
> 
> 时间：2013-02-13T11:09:49.070
> 
> 标签：maven, jboss, module, jboss7.x, war

我的项目之战，添加了一些maven依赖后，大小增加到32MB！

我需要减小那个尺寸。谷歌搜索我发现使用**模块**可能是一种方式。

最佳做法是什么？将每个库添加为新模块？用“所有库”创建一个模块？我什至不知道这是否可能。

所以，我有，例如：

```
<dependency>
            <groupId>net.sf.jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>5.0.0</version>
        </dependency> 
```

我想将“**提供**”添加到该依赖项中，并将 JAR 保留在 JBoss 中，而不将其包含在我的战争中。

如何？

PS：我知道它将可用于所有已部署的应用程序。很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:49:33.250

将应用程序与其库分离对我来说听起来不是一个好主意 - 您正在显着增加应用程序的上下文依赖性，并且如果不先修补其内部结构，将无法在另一台服务器上部署应用程序。这在生产环境中可能是不可能的/不允许的。

A `war`32MB ......那又怎样？如今，多出几个 MB 并不是真正的问题。具有数百 MB 的业务应用程序并不少见。

因此，在严厉警告之后，可以这样做：

转到`JBOSS_HOME/modules`目录并为工件坐标创建目录层次结构（com.example 依赖项将位于 /com/example/ 文件夹中）。

在此文件夹中，创建一个文件夹`main`。

将库`jar`放入主文件夹。

创建一个`module.xml`文件并填写它：

```
<module xmlns="urn:jboss:module:1.1" name="com.example">
    <resources>
        <resource-root path="mylib.jar"/>
    </resources>
</module> 
```

我不确定是否需要重新启动服务器。

`module`如果你的模块有它自己的依赖，你可以通过在元素中添加这样的东西来宣布它们：

```
<dependencies>
    <module name="com.example.implementation"/>
</dependencies> 
```

我建议将每个库部署在它自己的模块中（就像名字所暗示的那样；）模块化。然后，您可以单独交换它们。

# installation - 使用最新版本的 nodejs 0.8.19 安装 testacular 时出错

> ID：14852145
> 
> 赞同：1
> 
> 时间：2013-02-13T11:09:52.360
> 
> 标签：installation, karma-runner

当我运行以下命令时出现以下错误..

⚡ sudo **npm -g 安装 testacular**

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'npmlog'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at /usr/local/bin/npm:19:11
    at Object.<anonymous> (/usr/local/bin/npm:87:3)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:52:25.353

尝试重新安装 node.js - [http://nodejs.org/download/](http://nodejs.org/download/)

[在旧版本的n](https://npmjs.org/package/n)安装 node 失败后，这发生在我身上`v0.10.5`，然后我升级`n`并让它安装 node。它显然没有`npm`正确安装。

# clojure - 将选项传递给 quil 和 clojure 中的绘图函数声明。

> ID：14852147
> 
> 赞同：3
> 
> 时间：2013-02-13T11:10:11.300
> 
> 标签：clojure, draw

我是使用 Quil 和 Clojure 的初学者，并试图从一些现有的数据结构中绘制一些矩形。如果我将绘制函数定义为采用某种结构，我如何通过该结构使用 defsketch 进行绘制？

```
(defn draw [x]
  (stroke 80)
  (stroke-weight 3)
  (fill 23 181 100)
  (rect x x x x))

(defn create-sketch []
  "Automatically uses the given setup and draw functions. Magic."
  (defsketch example
    :setup setup
    :draw draw
    :size [2000 2000])) 
```

在上面的代码中（取自 Quil 的一个示例），我可以定义 draw 来获取一个随机参数 x，然后它将使用它。在定义草图时，我不知道如何传入参数。现在的`:draw draw`声明适用于具有空参数列表的函数。我已经尝试了所有我能想到的方法来传递一些 x 值。我对实际问题的了解不够，无法解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:52:12.697

quil`draw`不接受任何参数。`partial`如果您始终绘制相同的矩形列表，则评论中显示的技巧有效。如果你想要一个动画`draw`必须访问一个可变状态（例如一个`atom`）。

# c++ - 作为对象传递给 MyDataStream 流（argv[1]）的输入数据文件的格式应该是什么

> ID：14852152
> 
> 赞同：1
> 
> 时间：2013-02-13T11:10:24.557
> 
> 标签：c++, data-structures, r-tree, libspatialindex

我正在使用“libspatialindex”库来创建 R-tree 索引。我的数据是二维的，具有以下值：

```
 (1,  (1,5)),
 (19, (6,8)),
 (20, (3,8)),
 (4,  (1,9)). 
```

数据描述如下：

```
1 is a data point and it is present in the interval (1,5)
19 is a data point and it is present in the interval (6,8)
20 is a data point and it is present in the interval (3,8)
4 is a data point and it is present in the interval (1,9) 
```

我正在尝试将上述数据批量加载到 R-Tree 中。为此，我使用来自 libspatialindex 的以下测试代码。但是，我不知道作为对象传递给 * ***MyDataStream stream(argv[1]);*****的输入数据文件的格式应该是什么。***

 *我正在使用的测试代码是：

```
// Copyright (c) 2002, Marios Hadjieleftheriou
// include library header file.
#include <spatialindex/SpatialIndex.h>

using namespace SpatialIndex;

#define INSERT 1
#define DELETE 0
#define QUERY 2

class MyDataStream : public IDataStream
{
public:
    MyDataStream(std::string inputFile) : m_pNext(0)
    {
        m_fin.open(inputFile.c_str());

        if (! m_fin)
            throw Tools::IllegalArgumentException("Input file not found.");

        readNextEntry();
    }

    virtual ~MyDataStream()
    {
        if (m_pNext != 0) delete m_pNext;
    }

    virtual IData* getNext()
    {
        if (m_pNext == 0) return 0;

        RTree::Data* ret = m_pNext;
        m_pNext = 0;
        readNextEntry();
        return ret;
    }

    virtual bool hasNext()
    {
        return (m_pNext != 0);
    }

    virtual uint32_t size()
    {
        throw Tools::NotSupportedException("Operation not supported.");
    }

    virtual void rewind()
    {
        if (m_pNext != 0)
        {
            delete m_pNext;
            m_pNext = 0;
        }

        m_fin.seekg(0, std::ios::beg);
        readNextEntry();
    }

    void readNextEntry()
    {
        id_type id;
        uint32_t op;
        double low[2], high[2];

        m_fin >> op >> id >> low[0] >> low[1] >> high[0] >> high[1];

        if (m_fin.good())
        {
            if (op != INSERT)
                throw Tools::IllegalArgumentException(
                    "The data input should contain insertions only."
                );

            Region r(low, high, 2);
            m_pNext = new RTree::Data(sizeof(double), reinterpret_cast<byte*>(low), r, id);
                // Associate a bogus data array with every entry for testing purposes.
                // Once the data array is given to RTRee:Data a local copy will be created.
                // Hence, the input data array can be deleted after this operation if not
                // needed anymore.
        }
    }

    std::ifstream m_fin;
    RTree::Data* m_pNext;
};

int main(int argc, char** argv)
{
    try
    {
        if (argc != 5)
        {
            std::cerr << "Usage: " << argv[0] << " input_file tree_file capacity utilization." << std::endl;
            return -1;
        }

        std::string baseName = argv[2];
        double utilization = atof(argv[4]);

        IStorageManager* diskfile = StorageManager::createNewDiskStorageManager(baseName, 4096);
            // Create a new storage manager with the provided base name and a 4K page size.

        StorageManager::IBuffer* file = StorageManager::createNewRandomEvictionsBuffer(*diskfile, 10, false);
            // applies a main memory random buffer on top of the persistent storage manager
            // (LRU buffer, etc can be created the same way).

        MyDataStream stream(argv[1]);

        // Create and bulk load a new RTree with dimensionality 2, using "file" as
        // the StorageManager and the RSTAR splitting policy.
        id_type indexIdentifier;
        ISpatialIndex* tree = RTree::createAndBulkLoadNewRTree(
            RTree::BLM_STR, stream, *file, utilization, atoi(argv[3]), atoi(argv[3]), 2, SpatialIndex::RTree::RV_RSTAR, indexIdentifier);

        std::cerr << *tree;
        std::cerr << "Buffer hits: " << file->getHits() << std::endl;
        std::cerr << "Index ID: " << indexIdentifier << std::endl;

        bool ret = tree->isIndexValid();
        if (ret == false) std::cerr << "ERROR: Structure is invalid!" << std::endl;
        else std::cerr << "The stucture seems O.K." << std::endl;

        delete tree;
        delete file;
        delete diskfile;
            // delete the buffer first, then the storage manager
            // (otherwise the the buffer will fail trying to write the dirty entries).
    }
    catch (Tools::Exception& e)
    {
        std::cerr << "******ERROR******" << std::endl;
        std::string s = e.what();
        std::cerr << s << std::endl;
        return -1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:10:36.907

砍掉`readNextEntry`并测试一下：

```
void readNextEntry(istream& is)
{
    id_type id;
    uint32_t op;
    double low[2], high[2];

    is >> op >> id >> low[0] >> low[1] >> high[0] >> high[1];
} 
```

我们可以使用以下方法创建一个测试输入流`istringstream`：

```
bool isGood(const std::string& input) {
    std::istringstream ss(input);
    readNextEntry(ss);
    return ss.good();
} 
```

并演示：

```
int main() {
    std::cout << "Good? " << isGood("asdf qwer zxcv uyio ghjk") << std::endl;
    std::cout << "Good? " << isGood("0.0 0 0 0 0") << std::endl;
    std::cout << "Good? " << isGood("1 2 3 4 5") << std::endl;
} 
```*

# c# - 响应 Windows 8 中的输入类型

> ID：14852157
> 
> 赞同：0
> 
> 时间：2013-02-13T11:10:34.687
> 
> 标签：c#, xaml, windows-8, touch, user-input

我对 Windows 应用商店应用程序响应用户交互（触摸、鼠标、Pin、键盘）的方式有疑问。

除了使用指针，对于不同类型的输入工具是否有任何事件响应？

或仅其他事件响应特定输入（仅适用于鼠标或仅适用于触摸）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:17:33.310

[您可以在另一个线程](https://stackoverflow.com/questions/11831687/what-do-i-have-to-do-to-hook-a-pen-event-on-windows-8)上找到问题的答案。- 在 Windows 8 中，您通常不应区分 Pen、Touch 或 Mouse。更多信息[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ150606%28v=win.10%29.aspx)。- 您可以使用 KeyDown 和 KeyUp 来响应键盘输入。更多信息[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868246.aspx)。

# routing - 应用程序请求路由不路由到同一台机器

> ID：14852166
> 
> 赞同：2
> 
> 时间：2013-02-13T11:10:54.827
> 
> 标签：routing, iis-7.5, arr, iis-arr

我在我的 IIS 服务器中设置了一个 ARR。我的要求是我必须将此 ARR 服务器的请求路由到我在本地 IIS（ARR 服务器本身）中托管的应用程序之一。可能吗？

IE。假设在我的 ARR 服务器中有 Application1。然后我必须执行以下操作

Broswer -> ARR (iis server) -> Application1（它本身在 ARR 服务器中）。

如果可能的话，如何实现这样的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:42:15.307

是的你可以。

您至少需要 2 个站点来实现这一点。一个将获取请求并通过重写规则将它们路由到 ARR，另一个将是 ARR 后面的节点。

例如，考虑到您的域名是“example.com”：

```
IIS
  - Site 1 (binding: http://example.com:80)
  - Site 2 (binding: http://127.0.0.1:22001)

Rewrite Rule
  - Match All
    - {HTTP_HOST} matches example.com
    - {SERVER_PORT} does not match 22001
 - Action: Route to Farm 
```

这是进行零停机部署的一个很好的起点。如果您想了解更多信息，请查看 GitHub 上的此存储库：[https ://github.com/yosoyadri/IIS-ARR-Zero-Downtime](https://github.com/yosoyadri/IIS-ARR-Zero-Downtime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T21:20:52.570

如果你不喜欢它在同一个端口上，你也可以让它转到不同的 IP。

# command-line - 如何从命令行推送 DLNA 内容

> ID：14852170
> 
> 赞同：7
> 
> 时间：2013-02-13T11:11:11.863
> 
> 标签：command-line, upnp, dlna

我打算将广播频道与 IPTV 频道整合到我电视上的一个菜单中。问题是在不同来源之间切换是一种痛苦。所以基本上我需要在电视上创建一个菜单来选择我想观看的频道，然后将电视切换到那个频道。我知道如何创建菜单。

解决方案的另一部分是将 ITPV 频道从媒体服务器推送到电视屏幕。这是一个困难的部分。我最终安装了 gupnp 并使用它。它有效，我将能够编写应用程序。

您是否有更好的解决方案来通过 DLNA 推送内容的想法？是否有可以从命令行控制的命令行实用程序或媒体服务器？那将是一个理想的选择。

最基本的问题是如何以编程方式在渲染器上播放来自媒体服务器的资源？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-02T18:51:55.817

这显示了如何使用命令行中的 curl 来指示渲染器从 mediaServer 播放媒体。您可以轻松地从程序中发出类似的 http 请求。

[http://www.accella.net/knowledgebase/sending-a-video-content-to-a-dlnaupnp-softwaredevice-using-curl/](http://www.accella.net/knowledgebase/sending-a-video-content-to-a-dlnaupnp-softwaredevice-using-curl/)

这也是： [http ://djoepnpoep.blogspot.co.za/2015/07/command-line-dlnaupnp-av-with-curl.html](http://djoepnpoep.blogspot.co.za/2015/07/command-line-dlnaupnp-av-with-curl.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:20:06.433

> 最基本的问题是如何以编程方式在渲染器上播放来自媒体服务器的资源

**非常基本的答案是，你不能。**UPnP MediaServer 本身并不是为了能够开始向渲染器播放内容而设计的，这与 HTTP 服务器无法在浏览器首先发出至少一个请求的情况下无法在特定浏览器窗口上开始显示 HTML 的方式完全相同。所以你有两个选择：

1.  您对*“电视中的菜单”*（无论是什么）的实现能够进行 UPnP 发现并浏览媒体服务器以获取所需内容（可能在硬编码的 URL 上进行简化）。
2.  在您的网络中引入一个*UPnP 控制点*，该控制点知道如何发现和浏览媒体服务器并将*内容推*送到选定的渲染器中。我看不出有什么理由不能从命令行做到这一点，[gUPnP 似乎提供](http://jorgenmodin.net/index_html/archive/2009/12/26/list-of-open-source-dlnaupnp-av-software-devices)了足够强大的控制点的来源，您可以根据自己的需要进行调整和定制。

请注意，这两个选项都会有效地导致您的电视在 MediaServer 上发出请求并主动下载流数据。第二个选项没有隐藏的魔法，“推送”实际上意味着控制点告诉渲染器“这里是你开始下载的 URL”。

# git - 如何在不删除现有内容的情况下 git push 到 Azure

> ID：14852175
> 
> 赞同：0
> 
> 时间：2013-02-13T11:11:27.503
> 
> 标签：git, azure, azure-web-app-service

我有一个 Azure 网站，其中有一个 WordPress 网站和一些 ASPX 页面。

我第一次 git push（或 github 部署）我的 ASPX 页面时，整个 WordPress 网站都被删除了。这是出乎意料的，因为我在一个临时网站上对其进行了测试，发现 git push 并没有删除我要 ftp 的内容。事实证明，后续的 git 推送不会删除。只有最初的 git push 会被删除。

有没有办法 git push 到 Azure 而不会删除 wwwroot 目录中的任何现有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:28:50.150

您看到的行为当前是设计使然（请参阅[此处](https://github.com/projectkudu/kudu/blob/master/Kudu.Core/Deployment/DeploymentManager.cs#L532)的代码详细信息）。基本上，初始部署总是干净利落地完成的。之后，后续部署会保留动态添加的文件。

我们这样做的一个原因是，新的“空”站点包含一个 hostsstart.html 占位符文件，用户在使用 git 推送后不会期望留下该文件。

虽然我可以在这种情况下看到你的观点。如果我理解正确，您基本上是在尝试在同一个站点上运行两个不相关的 Web 应用程序：图库中的 WordPress，以及您正在 git 推送的一些 ASP.NET 应用程序。不是我们预见到的情况，但我们可以考虑。

[请在github](https://github.com/projectkudu/kudu)上打开一个问题以引起关注。

# ruby - Sinatra（机架）应用程序是否具有像 ASP.NET MVC 一样的“TempData”？

> ID：14852176
> 
> 赞同：1
> 
> 时间：2013-02-13T11:11:29.057
> 
> 标签：ruby, asp.net-mvc, sinatra, rack

在 asp.net mvc 中有一个方法叫做`TempData`用于保存临时数据。在 Sinatra 中是否有类似的东西？

**更新**：它变成**了 TempData**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:21:01.600

[这篇关于 ViewBag、ViewData 和 TempData 之间差异的文章](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)指出：

> 所有三个对象都可用作视图和控制器的属性。

和

> ViewData 是一个字典对象，您可以将数据放入其中，然后视图可以使用该对象。ViewData 是 ViewDataDictionary 类的派生类，因此您可以通过熟悉的“键/值”语法进行访问。

和

> ViewBag 对象是 ViewData 对象的包装器，允许您为 ViewBag 创建动态属性。

Sinatra 不使用 MVC 模型，它使用 Page 控制器模型。首先，这意味着 .Net 中所需的许多脚手架在 Sinatra 中没有意义。此外，因为我们使用的是 Ruby 而不是 C#（或其他），所以我们再次错过了许多所需的样板文件。

最后，在 MVC 到 Page 控制器的说法中，“控制器”基本上是一条路由。所以：

```
get "/" do
  # stuff…
  haml :index
end 
```

是一个控制器。如果我们正在寻找一个对路由和视图都可用的字典对象（因此，某种哈希），那么[根据文档](http://www.sinatrarb.com/intro#Scopes%20and%20Binding)，我们就在请求范围内。当您在请求范围内时，您可以同时使用：

*   路由中定义的实例变量。
*   助手（包括`settings`对象）
*   路由中定义的本地变量显式传递给视图。

所以这会起作用：

```
get "/" do
  @viewbag = {a: 1}
  haml :index
end

%p= @viewbag[:a]
%p
  This will display 1 
```

或这个：

```
helpers do
  def viewbag
    @viewbag ||= {}
  end
end

get "/" do
  viewbag.store :a, 1
  haml :index
end

%p= viewbag[:a]
%p
  This will display 1 
```

或这个：

```
get "/" do
  viewbag = {:a => 1}
  haml :index, :locals => {viewbag: viewbag}
end

%p= viewbag[:a]
%p
  This will display 1 
```

（不要被上面不同的语法和[Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html)对象的使用弄糊涂了）

最后，ViewBag 是动态的。好吧，Ruby Hash 也是如此，因为整个语言更加动态。

但是，我感觉你问这个问题是在寻找其他东西，因为你已经陈述了一个*实现*而不是一个*目标*。如果您想获得更好的答案，*请告诉人们您想要实现*什么以及您尝试过什么，而不仅仅是您认为应该如何完成。

# asp.net-mvc - 显示登录用户的全名（名字、姓氏）

> ID：14852177
> 
> 赞同：2
> 
> 时间：2013-02-13T11:11:37.807
> 
> 标签：asp.net-mvc

我从事 ASP.NET MVC4 解决方案。当用户登录时，我想显示他的**全**名（不是登录表单中提供的用户名）。他的**全名**（名字+姓实际存储在我数据库的用户表中）应该显示在右上角。

为了获得更好的性能，我不想在每次请求完成时都查询数据库。

如何进行？

*   将用户信息（名字、姓氏……）保存在 cookie 中？
*   保留用户信息是应用程序整个生命周期的会话变量吗？
*   将用户信息保存在“配置文件”中，如下所述：[如何分配配置文件值？](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)(*)
*   还有什么？

(*) 我认为这个解决方案对于我的使用来说有点复杂。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:50:56.947

我会用饼干。它不会像 Session 那样占用您机器上的任何内存，也不会像 Profile 那样访问数据库。只要记住在用户注销时删除 cookie。

请注意，配置文件会在您每次发出请求时访问数据库服务器。据我所知，配置文件数据不会缓存在 Web 服务器上的任何位置（除非您有自定义配置文件提供程序）。

我喜欢 cookie 的另一个原因：如果您想存储任何额外的用户信息以便快速访问，例如 UserPrimaryKey，或任何特殊的用户首选项，您可以将它们作为 JSON 存储在 cookie 中。这是一个例子：

另一个注意事项：下面的代码使用 Newtonsoft.Json（`JsonConvert`行）。它应该在 MVC4 项目中开箱即用，但对于 MVC3 项目，您可以通过 nuget 添加它。

```
public class UserCacheModel
{
    public string FullName { get; set; }
    public string Preference1 { get; set; }
    public int Preference2 { get; set; }
    public bool PreferenceN { get; set; }
}

public static class UserCacheExtensions
{
    private const string CookieName = "UserCache";

    // put the info in a cookie
    public static void UserCache(this HttpResponseBase response, UserCacheModel info)
    {
        // serialize model to json
        var json = JsonConvert.SerializeObject(info);

        // create a cookie
        var cookie = new HttpCookie(CookieName, json)
        {
            // I **think** if you omit this property, it will tell the browser
            // to delete the cookie when the user closes the browser window
            Expires = DateTime.UtcNow.AddDays(60),
        };

        // write the cookie
        response.SetCookie(cookie);
    }

    // get the info from cookie
    public static UserCacheModel UserCache(this HttpRequestBase request)
    {
        // default user cache is empty
        var json = "{}";

        // try to get user cache json from cookie
        var cookie = request.Cookies.Get(CookieName);
        if (cookie != null)
            json = cookie.Value ?? json;

        // deserialize & return the user cache info from json
        var userCache = JsonConvert.DeserializeObject<UserCacheModel>(json);
        return userCache;
    }

} 
```

有了这个，您可以像这样从控制器读取/写入 cookie 信息：

```
// set the info
public ActionResult MyAction()
{
    var fullName = MethodToGetFullName();
    var userCache = new UserCache { FullName = fullName };
    Response.UserCache(userCache);
    return Redirect... // you must redirect to set the cookie
}

// get the info
public ActionResult MyOtherAction()
{
    var userCache = Request.UserCache();
    ViewBag.FullName = userCache.FullName;
    return View();
} 
```

# javascript - html body ondblclick 获取被点击的元素

> ID：14852178
> 
> 赞同：1
> 
> 时间：2013-02-13T11:11:38.440
> 
> 标签：javascript, html

所以在我的html中我有这部分：

```
<body ondblclick="myfunc();">
<div id="id1">dasd</div>
<div id="id2">dasda</div>
</body> 
```

在javascript中，函数是：

```
function myfunc() {
    do stuff here...
} 
```

我想知道在 myfunc() 中双击是在 html 正文的哪个元素上进行的，因为我不想在每个双击的元素上触发 myfunc()

那么如何检测双击元素的 id 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:17:36.520

```
<body ondblclick="myfunc(event);">

function myfunc(e) {
    // e.target -> element that was clicked
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:20:40.337

使您的 HTML 为

```
<body ondblclick="myfunc(event);"> 
```

并使 myfunc 为：

```
function myfunc(event) {
     alert(event.target.id); //here you can get element id that is double clicked
     event.stopPropagation();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:50:21.873

```
<!doctype html>
<html>
<head>
<meta charset=utf-8>
<title>ondblclick event example</title>
<script> 
    function initElement() {
        var body = document.getElementById("bdy");
        body.ondblclick = showAlert;
    }

    function showAlert(e){
        alert(e.target.id);
    }
    window.onload = initElement;
</script>
</head>
<body id="bdy">
<div id="id1">dasd</div>
<div id="id2">dasda</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:17:02.843

您可以使用 on 或 bind 假设定义不同的事件。

```
$("#id").on("doubleClick",function () {} ); 
```

所以它会知道它的双击事件..

或者对于javascript，您可以像这样使用

```
<body ondblclick="myfunc(event);">

function myfunc(event) {
    do something..

} 
```

# java - GAE Datastore - 嵌套类的查询过滤器

> ID：14852182
> 
> 赞同：0
> 
> 时间：2013-02-13T11:11:43.260
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在使用 Java 和 GAE 数据存储来存储、管理和检索我的应用程序的一些数据。

基本上我有两个类：客户和商店。这个想法是一个客户可以关联多个商店，并且可以存在许多客户。

客户的结构是这样的：

```
<Customer>
   <id>id1</id>
       <Stores>
           <Store>
               <storeId>100</storeId>
               <city>Venice</city>
           </Store>
           <Store>
                <storeId>200</storeId>
                <city>Milan</city>
           </Store>
           <Store>
                <storeId>300</storeId>
                <city>Venice</city>
           </Store>
       </Stores>
 </Customer> 
```

正如我之前所说，可以有很多客户：

```
<Customers>
    <Customer>
       ...
    </Customer>
    <Customer>
       ...
    </Customer>
</Customers> 
```

我需要构建一个过滤器以仅获取这些客户中的一部分，将“CITY”参数传递给查询：例如，如果我想向客户展示至少有一家位于威尼斯的商店，我会做类似的事情（只是给你的想法）

```
GET Customer WHERE Customer.Store.City = 'Venice' 
```

我想得到的是在特定城市拥有商店的每个客户..而且，客户对象需要拥有这些商店！像这样：

```
<Customer>
    <id>id1</id>
       <Stores>
           <Store>
               <storeId>100</storeId>
               <city>Venice</city>
           </Store>
           <Store>
               <storeId>300</storeId>
               <city>Venice</city>
           </Store>
        </Stores>
</Customer>
<Customer>
    <id>id2</id>
       <Stores>
           <Store>
               <storeId>700</storeId>
               <city>Venice</city>
           </Store>
        </Stores>
</Customer> 
```

我可以正确获得这些商店，但我需要找到一种方法将每家商店与他的祖先客户联系起来。

```
String city = 'something';
Query query = mgr.newQuery(Store.class, "city == '"+city+"' ");
List<Store> oggetti = (List<Store>) query.execute(); 
```

关于如何做到这一点的任何想法？

我希望我足够清楚..提前谢谢，最好的问候

* * *

附加信息：

类客户：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
@Cacheable("false")
@FetchGroup(name="customerstores", members={@Persistent(name="storeList")})
public class Customer {

    @PrimaryKey
@Persistent
private String id= "";

    @Persistent
    @Unowned
private List<Store> storeList;

    //getters and setters here
    ....
} 
```

类商店：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
@Cacheable("false")
public class Store {

    @PrimaryKey
@Persistent
private String storeUniqueKey = "";

    @Persistent
    private String city = "";

    //getters and setters here
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:45:41.427

看看以下代码是否符合您的要求。

```
Query query = pm.newQuery(Customer.class);
query.declareVariables("Customer store");
query.setFilter(
    "this.stores.contains(store) && store.city == \"SomeCity\"");
Collection result = (Collection)query.execute(); 
```

# python - 根据意思比较句子

> ID：14852184
> 
> 赞同：9
> 
> 时间：2013-02-13T11:11:46.967
> 
> 标签：python, data-mining, nltk

Python 提供了`NLTK`包含大量文本和语料库的库，以及大量文本挖掘和处理方法。有什么方法可以根据句子传达的可能匹配的含义来比较句子？也就是智能句子匹配器？

例如，像**`giggling at bad jokes`**and之类的句子**`I like to laugh myself silly at poor jokes`**。两者都传达相同的含义，但句子不匹配（单词不同，`Levenstein Distance`会严重失败！）。

现在想象一下，我们有一个 API 可以公开功能，例如在[这里](http://graphwords.com/word#giggle)找到的。因此，基于此，我们有机制来找出单词**`giggle`**并**`laugh`**在它们传达的含义上匹配。**`Bad`**不会匹配到**`poor`**，因此我们可能需要添加更多层（就像它们在诸如 之类的词的上下文中匹配一样**`joke`**，因为**`bad joke`**通常与 相同**`poor joke`**，尽管**`bad person`**与**`poor person`**! 不同）。

一个主要的挑战是丢弃不会改变句子含义的东西。所以，算法应该返回第一句和这个之间相同程度的匹配：**`I like to laugh myself silly at poor jokes, even though they are completely senseless, full of crap and serious chances of heart-attack!`**

那么有了这个可用的算法，有没有这样的算法已经被构思出来了？还是我必须发明轮子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:51:04.983

您将需要更高级的主题建模算法，当然还有一些语料库来训练您的模型，这样您就可以轻松处理像咯咯笑和笑这样的同义词！

在 python 中，你可以试试这个包：[http](http://radimrehurek.com/gensim/) ://radimrehurek.com/gensim/ 我从未使用过它，但它包括经典的语义向量空间方法，如 lsa/lsi、随机投影甚至 lda。

我个人最喜欢的是随机投影，因为它更快并且仍然非常高效（不过我是在 java 中使用另一个库来做的）。

# android - 有人知道 ACTION_RF_FIELD_ON_DETECTED 吗？

> ID：14852187
> 
> 赞同：0
> 
> 时间：2013-02-13T11:11:57.087
> 
> 标签：android, broadcastreceiver, nfc, broadcast, android-broadcast

我想在我的手机进入 NFC 阅读器区域后立即使用此广播意图开始我的活动？请帮助，如果有人曾经这样做过......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:13:31.227

可以但不建议这样做。

首先， ACTION_RF_FIELD_ON_DETECTED 是受保护的意图。为了能够接收它，您必须在 etc/nfcee_access.xml 文件中将您的应用程序列入白名单。此文件授予对安全元素的访问权限，因此它不可在非 root 手机上写入。

第二：ACTION_RF_FIELD_ON_DETECTED 事件不可靠。这在源代码中有所说明，在实践中也是如此。每次手机感应到射频场时，您根本不会得到这样的意图（有技术/历史原因，我不会在这里详细解释）。

如果您可以解决这两个问题，您只需在清单中列出 ACTION_RF_FIELD_ON_DETECTED，Android 就会愉快地启动您的应用程序。

# lua - Lua Lanes 琳达

> ID：14852189
> 
> 赞同：0
> 
> 时间：2013-02-13T11:12:04.373
> 
> 标签：lua, lua-lanes

我的车道设置和运行都很好，但我无法理解 linda 的值传递，我在车道站点上找到了这段代码：

```
 linda_h:set( key, [val] )
  [val]= linda_h:get( key ) 
```

如果我设置/获取我的应用程序崩溃，那么我想知道如何为设置/获取声明表？

如果我将它用作字符串，那么 set/get 类型的工作但会在运行几次车道后崩溃：

```
 Stop = "0" --outside of lane
 -- start lane
 -- callback function in lane
 if linda_h:get( Stop ) == "1" then
  return 
 end 
```

有人在这里有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:35:53.997

该文档令人困惑，但我认为您想使用`:send`and`:receive`方法，而不是`:set`and `:get`。发送和接收使事物表现得像一个普通的队列。看起来`:get`就像接收一样，只是它没有从队列中删除，但我不确定。而且我根本想不通`:set`。

# config - 在 Symfony 2.1 的 config.yml 中添加自定义配置

> ID：14852192
> 
> 赞同：0
> 
> 时间：2013-02-13T11:12:17.510
> 
> 标签：config, symfony-2.1

我想在`config.yml` 示例中执行自定义配置参数：在`config.yml`文件中

```
security_enhancement:
     authentication:true
     authorization:true 
```

采用与配置等相同的格式`swiftmailer`。我不知道如何定义。我收到如下错误：

```
1/2 ParseException: Unable to parse in "\/var\/www\/demo\/app\/config\/config.yml" at line 217 (near "authentication:true"). 
```

我在这里错过了什么吗？是否需要添加依赖注入扩展文件？.实际上我想启用禁用身份验证，在开发模式下执行授权，这是在侦听器中实现的，可以使用`config_dev.yml`. 我不想在参数下添加。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:43:32.497

正如您正确推测的那样，您确实需要添加 DI 扩展文件，假设您的配置与特定的捆绑包相关（几乎可以肯定）。

虽然可以随意定义参数，但配置具有层次结构和验证功能。

通常，配置用于依次定义参数，但它允许在实例化之前对值进行解析和验证，以便包编写者可以就如何使用他们的服务提供更好的指导（有有意义的错误），并相信传递给它们的值。

可以在 Symfony2 文档中找到有关如何开始使用 config 组件的不错的读物：使用 config 组件[定义和处理配置文件](http://symfony.com/doc/master/components/config/definition.html)。

# c# - 避免空值的正则表达式

> ID：14852196
> 
> 赞同：-2
> 
> 时间：2013-02-13T11:12:25.923
> 
> 标签：c#, regex

我不知道如何使用正则表达式，我已经看到它们用于电子邮件验证，有什么方法可以通过使用正则表达式来限制空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:14:11.473

```
/^(.+)$/ 
```

这个正则表达式将匹配任何不为空的东西（需要一个或多个字符），但是用正则表达式检查它真的有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:13:52.743

答案是不。null 不是一个值。它表明您的指针不指向任何东西。您可以使用“断言”，或者只是 if(yourobject==null){}

# apache - HDFS namenood 格式错误“找不到主类：namenood。” 附代码

> ID：14852199
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:12:33.770
> 
> 标签：apache, hadoop, hdfs

我在格式化 Namenode 时遇到错误，如下所示，

```
[hadoop@localhost ~]$ /home/hadoop/project/hadoop-1.0.4/bin/hadoop namenood -format
Exception in thread "main" java.lang.NoClassDefFoundError: namenood
Caused by: java.lang.ClassNotFoundException: namenood
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: namenood.  Program will exit.
[hadoop@localhost ~]$ 

EDIT:

[hadoop@localhost ~]$ /home/hadoop/project/hadoop-1.0.4/bin/hadoop namenode -format
13/02/13 11:23:47 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = localhost.localdomain/127.0.0.1
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 1.0.4
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct  3 05:13:58 UTC 2012
************************************************************/
13/02/13 11:23:47 INFO util.GSet: VM type       = 32-bit
13/02/13 11:23:47 INFO util.GSet: 2% max memory = 19.33375 MB
13/02/13 11:23:47 INFO util.GSet: capacity      = 2^22 = 4194304 entries
13/02/13 11:23:47 INFO util.GSet: recommended=4194304, actual=4194304
13/02/13 11:23:48 INFO namenode.FSNamesystem: fsOwner=hadoop
13/02/13 11:23:48 INFO namenode.FSNamesystem: supergroup=supergroup
13/02/13 11:23:48 INFO namenode.FSNamesystem: isPermissionEnabled=true
13/02/13 11:23:48 INFO namenode.FSNamesystem: dfs.block.invalidate.limit=100
13/02/13 11:23:48 INFO namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
13/02/13 11:23:48 INFO namenode.NameNode: Caching file names occuring more than 10 times 
13/02/13 11:23:49 ERROR namenode.NameNode: java.io.IOException: Cannot create directory /app/hadoop/tmp/dfs/name/current
        at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.clearDirectory(Storage.java:297)
        at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1320)
        at org.apache.hadoop.hdfs.server.namenode.FSImage.format(FSImage.java:1339)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1164)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1271)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288)

13/02/13 11:23:49 INFO namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at localhost.localdomain/127.0.0.1
************************************************************/ 
```

希望你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:17:33.517

我记得应该是

```
/home/hadoop/project/hadoop-1.0.4/bin/hadoop namenode -format 
```

# php - 我将如何使用 XML 引用 flash 中的帧

> ID：14852209
> 
> 赞同：0
> 
> 时间：2013-02-13T11:13:02.297
> 
> 标签：php, mysql, xml, flash, actionscript

我有一个从 mysql 数据库读取信息的 Flash 电影，使用 PHP 创建 XML。我想使用外部动态内容来引用 Flash 电影中的不同帧。

例如，dataY 显示在单击链接到框架 Y 上的任何位置/dataX 显示在单击链接到框架 X 上的任何位置

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:10:29.980

您可以为此使用[ExternalInterface.addCallBack 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)基本上，您从 swf 中公开一个您的 javascript 代码可以调用的方法。

# javascript - preventdefault() 在 IE8 中不起作用

> ID：14852211
> 
> 赞同：0
> 
> 时间：2013-02-13T11:13:06.140
> 
> 标签：javascript, jquery, ajax, internet-explorer-8, leaflet

我正在处理一个相当大量使用ajax 的页面。所有 ajax 表单似乎在浏览器中都可以正常工作，但页面上的最后一步在 IE8 及更低版本中被破坏。

这是一个显示问题的演示页面：http: [//jolora.com/~fwm/](http://jolora.com/~fwm/)

要重现该问题，请填写最终表格（电子邮件名称等） - 地图上将显示标记列表。“请求约会”按钮应该触发一个 ajax 函数，但它实际上是在 IE7 和 IE8 中提交表单，所以它看起来 preventDefault 不起作用。

这是相关的jQuery：

```
// Request appointment
$('#map').on('submit', 'form', function(event) {
    event.preventDefault();
    var solicitorID = $(this).attr('id');
    solicitorRequest(solicitorID,applicationID);
});

function solicitorRequest(requestedSolicitor,currentApplication) {
$.ajax({
    url: siteurl + 'wp-admin/admin-ajax.php',
    data:{
        'action':'do_ajax',
        'fn':'request_solicitor',
        'solicitor': requestedSolicitor,
        'application': currentApplication       
    },
    dataType: 'JSON',
    success:function(data){
        alert('Please check your email - this success function needs improving');
    },
    error: function(errorThrown){
        alert('error');
        //console.log(errorThrown);
    }
});
} 
```

弹出窗口是使用 Leaflet 的 bindPopup 方法[http://leafletjs.com/reference.html#popup](http://leafletjs.com/reference.html#popup)构建的，这是我插入弹出窗口的内容的结构：

```
var popupContentBegin = '<form id="'
+ solicitor.id + '">'
+ '<h3>' + solicitor.name + '</h3>'
+ '<div class="contact-details">'
+ '<span class="addr">' + solicitor.address + '</span>';

var popupContentTel = '';

if(solicitor.telephone != false) {
    popupContentTel = '<span class="tel">'
    + solicitor.telephone
    + '</span>';
}

var popupContentEnd = '</div>'
+ '<button type="submit">Request appointment</button>'
+ '</form>';

var popupContent = popupContentBegin + popupContentTel + popupContentEnd;

var marker = L.marker([lat, lng], {icon: solicitorIcon}).bindPopup(popupContent, popupOptions); 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:32:10.083

尝试将您的选择器更改为：

```
$(document).on('submit', '#map form', function(event) {... 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

编辑：您需要在准备好的函数中调用此函数，以便确保 DOM 已完全加载：

```
$(function () {
  // Put code here
}); 
```

# iphone - 如何从另一个类调用类别类方法

> ID：14852220
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:13:33.420
> 
> 标签：iphone, ipad

如何从另一个类调用类别类方法

```
 @interface Event()
        {
         NSDictionary *e_Dict;
        NSString *e_String;
        }

     -(NSDictionary *)CheckEvent:(NSString *)string;
        @end

        @implementation Event

     -(NSDictionary *)CheckEvent:(NSString *)string{
       ......
.....................    
    return t_Dict; 

        } 
```

我创建了新类，即 UnitTesting

# 导入类#import“Event.h”

```
-(void)testCheckEventNilDictionary {

Event *evt = [[Event alloc]init];
NSDictionary *t_Dictionary;

t_Dictionary = [evt CheckEvent:@"string"];

} 
```

但对我来说，我无法包含 CheckEvent 方法

```
[evt CheckEvent:@""] 
```

请任何人让我知道我做错了什么？

@提前谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:38:05.830

据我所知。

如果您在`.m`文件中写入类别并导入 .h 文件，则无法从其他类访问它。

作为解决方案：

*   您需要在 .h 文件中声明您的类别。
*   在您的班级中导入您的 .m 文件（这不是一件好事）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:20:07.273

也许你必须在 categoryClass 的头文件中声明方法

即在 categoryClass.h 中声明

```
-(NSDictionary *)CheckEvent:(NSString *)string; 
```

# c# - 工厂根据字符串创建和实例化对象？

> ID：14852221
> 
> 赞同：1
> 
> 时间：2013-02-13T11:13:33.560
> 
> 标签：c#, reflection, factory-pattern

我有一个从队列中读取字符串消息并“处理它们”的请求。每条消息都有一个 4 位数的“标识符/密钥”开头，然后是日期、时间和另一个数字……从那时起，每条消息都是不同的，需要不同的处理。

我的想法是使用工厂来创建所需类型的对象，并同时调用 asbtract 构造函数。

这是一个明智的做法吗？
如果是这样……怎么办？

例如

```
1000,2013-02-13,09:00:00,492,....................
4000,2013-02-13,09:00:01,492,....................
1000,2013-02-13,09:00:02,74664,....................
4003,2013-02-13,09:00:03,1010,....................
4000,2013-02-13,09:00:04,493,.................... 
```

构建类对象

```
Message1000 : AbstractMessage, IMessageThing
Message4000 : AbstractMessage, IMessageThing
Message4003 : AbstractMessage, IMessageThing 
```

其中`AbstractMessage`包含默认构造函数和键、日期、时间、数字等属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:21:01.750

是的，您可以而且是一种正确且明智的方法。如果你可以有一个默认的构造函数，事情会发生一些变化，如果构造函数与另一个具体实现不同，也会发生变化。最简单的方法是使用无参数构造函数。有了这个先决条件，你可以有这样的东西：

```
Type t = Type.GetType(string.Format("Handlers.MyHandlers.Message{0}",messageType));
var handler = Activator.CreateInstance(t) as IMessageThing; 
```

为了将字符串传递给消息，您可以在`IMessageThing`接口中定义一个函数，让我们`Init`在创建消息后立即调用它，或者更好的是，在`AbstractMessage`类中使用一个构造函数，然后调用它像这样的激活器：

```
var handler = Activator.CreateInstance(t,body) as IMessageThing; 
```

在`AbstractMessage`调用**抽象**函数的构造函数`Init(string body)`中，每个具体的消息都需要实现自己的解析器。

添加更多错误处理，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:28:36.670

是否有意义取决于您的要求。

您可以像这样分析字符串：

```
// inside your actual factoryMethod...
var lines = ...;

foreach(var line in lines)
{
    var tokens = line.Split(',');
    // for split: you can also specify the max. amount of items if the ..... part can
    // consist of more the dots.

    CreateMessageObject(tokens); // eventually add to list of AbstractMessage or whatever
}

static FactoryClassConstructor()
{
     _typeMap = new Dictionary<string, Type>();
     _typeMap.Add("Message1000", typeof(Message1000));
     // todo: add other message types
     // you also could write a method which will use the class name of the 
     // type returned by typeof(XYZ) to assure the correct value as key
}

private Dictionary<string, Type> _typeMap;

private AbstractMessage CreateMessageObject(string[] tokens)
{
    // simple error checking
    if(tokens.Count != 5)
        // todo: error handling
        return null;

    var type = typeMap[tokens[0]];
    var instance = Activator.CreateInstance(type);

    instance.Date = DateTime.Parse(tokens[1]);
    instance.Time = DateTime.Parse(tokens[2]);
    // todo initialize other properties
} 
```

当然你仍然需要做一些错误处理，但我希望我能给你一个好的起点。

我使用字典的原因是性能。Activator.CreateInstance 不是很快，使用 Type.GetType 查找也很慢。除了在 Dictionary 中使用类型作为值之外，您还可以使用以下内容：

```
Dictionary<string, Action<IMessageThing>> _factories;
_factories = new Dictionary<string, Action<IMessageThing>>();
_factories.Add("Message1000", () => new Message1000()); 
```

并创建您的对象，您可以调用：

```
var instance = _factories["Message1000"](); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:21:09.300

一种方法是拆分字符串，`,`但将最大计数设置为 5，这应该将数字之后的所有值分组为一个值：

```
var parts = your_string.split(new char[] {','},5); 
```

然后你只需要使用`Activator.CreateInstance()`来创建你的消息实例。例如：

```
Type type = Type.GetType(String.Format("Message{0}",parts[0]));
var instance = Activator.CreateInstance(type) as IMessageThing; 
```

然后，您可以从 中填写其余属性`parts`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:21:31.430

您可以将每条消息传递给处理程序，处理程序将检查它是否可以处理这种类型的消息。如果是这样，它将解析并返回一些对象，否则它将返回例如 null 并且您将知道询问不同的处理程序。

或者您构建一个解析器，该解析器了解遵循通用格式的初始部分，然后使用查找表查找特定的消息处理程序，该处理程序将解析剩余的消息并实例化正确的类型。（将公共部分传递给它的构造函数）。

我不明白“创建所需类型的对象并调用 asbtract 构造函数”是什么意思。没有抽象构造函数之类的东西。如果您的意思是抽象基类的构造函数，则在实例化子类时不可避免地会调用它。

# python - Unicode latin1 字符串编码/解码

> ID：14852224
> 
> 赞同：3
> 
> 时间：2013-02-13T11:13:47.210
> 
> 标签：python, utf-8, character-encoding

在使用 Python (Django) ORM 从未知/旧/不一致的 Mysql 数据库中获取数据到 Postgres utf-8 db 时，我有时会收到错误的编码数据。

目标：**格雷戈里**

```
> a
u'gr\xe3\xa9gory'

> print a
grã©gory 
```

我尝试了几种解码/编码技巧但没有成功：

```
 > print a.encode('utf-8').decode('latin1')
 grÃ£Â©gory

 > print a.encode('utf-8').decode('latin1')
 grÃ£Â©gory

 > print a.decode('latin-1')
UnicodeEncodeError: 'ascii' codec can't encode characters in position 2-3: ordinal not in range(128) 
```

即使有一些 unicode_escape

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:24:45.583

我猜该字符串在某些时候被错误地转换为小写，更改`\xc3`为`\xe3`. 当它实际上是 utf-8 时，小写转换假定为 latin1 编码。

```
>>> print 'gr\xc3\xa9gory'.decode('utf8')
grégory 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-13T11:40:56.043

由于问题是较低的（），我可以解决它：

```
print a.upper().encode('latin1').lower() 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-02-13T11:20:46.370

试试这个：

```
print a.decode('latin1') 
```

# symfony - 有没有办法通过模式迁移以编程方式处理数据夹具？

> ID：14852229
> 
> 赞同：0
> 
> 时间：2013-02-13T11:13:58.457
> 
> 标签：symfony, doctrine-orm, fixtures

我正在学习 Symfony2 并且刚刚了解了教义：迁移。这听起来像是对数据库模式进行“版本化”并在生产中部署新模式的好方法。

我也一直在阅读有关用于开发的数据固定装置的信息。有没有办法以与模式迁移类似的方式对这些进行版本控制，或者我应该只使用 GIT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:43:53.723

迁移的版本必须保持在版本控制之下。如果 GIT 是您的 SCM，那很好。

# android - 使 TextView 看起来可点击，Android？

> ID：14852231
> 
> 赞同：3
> 
> 时间：2013-02-13T11:14:03.593
> 
> 标签：android

我对 Android 很陌生，我有一些疑问。

我有一个`TextView`：

```
 <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Go Back" /> 
```

我怎么让文本`Go Back`看起来像可点击的？我问的是外观和感觉。`TextView`应该显示为可点击的方式`Button`呈现。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:20:32.150

在您的可绘制文件夹中创建一个名为“mybutton.xml”的 xml 文件并编写以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true">

    <item 
        android:state_pressed="true"
        android:drawable="@drawable/mybutton2"/>
    <item
        android:drawable="@drawable/mybutton1"/>

</selector> 
```

然后将两个png添加到您的drawables文件夹中...... mybutton1.png，mybutton2.png。因此，您的按钮有 2 种不同的状态。

现在将背景设置为您的文本视图：

```
android:background="@drawable/mybutton" 
```

然后，在您的代码中，您必须设置一个 clicklistener：

```
findViewById(R.id.mytextview).setOnClickListener(new OnClickListener(){

 @Override
 public void onClick(View v) {
    //your code goes here
 }

}); 
```

仅此而已……您也可以使用形状而不是图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:18:29.133

为了使您`TextView` `clickable`只需将其添加到您的`TextView`：

```
android:clickable="true" 
```

之后，您可以`onClickListener`使用以下方法设置它：

```
 yourTextView.setOnClickListener(new OnClickListener() {

    @Override
            public void onClick(View v) {
                // do your work here
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:16:50.443

试试这个：

```
final TextView view = (TextView) findViewById(R.id.textview1);
view.setOnClickListener(new View.OnClickListener() {

 @Override
 public void onClick(View v) {
// request your webservice here. Possible use of AsyncTask and ProgressDialog
// show the result here - dialog or Toast
 }

 };); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T11:18:53.753

您也可以使用 Touchlistener：

```
textview.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                return false;
            }
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-11T06:54:18.910

就这样做

```
yourTextView.setOnClickListener(new OnClickListener() {

@Override
        public void onClick(View v) {
            // do your work here
        }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-01T16:43:10.897

你甚至不需要监听器：

```
<TextView
    android:id="@+id/needCheeseburger"
    android:clickable="true"
    android:onClick="getCheeseburger" /> 
```

然后只是：

```
public void getCheeseburger(View view) {
    Intent intent = new Intent(this, giveMeCheeseburger.class);
    startActivity(intent);
} 
```

这对我来说非常好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T11:21:12.230

像这样使用`android:clickable="true"`

文本视图

```
 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:text="Large Text" />

text.setOnClickListener(new OnClickListener() {         
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T11:27:13.697

希望充分利用你：-

```
boolean text_click =false;
TextView textview = (TextView) findViewById(R.id.textview1);
    public OnClickListener textOnClick = new OnClickListener() {

    @Override
    public void onClick(View v) {

        if (Constants.text_click) {
            textview.setBackgroundResource(R.drawable.textbox);

            text_click = false;
        } else {

            textview.setBackgroundResource(R.drawable.textboxonpress);

            text_click = true;
        }

    }
}; 
```

# ios - 如何将iOS插件添加到phonegap？

> ID：14852235
> 
> 赞同：0
> 
> 时间：2013-02-13T11:14:24.493
> 
> 标签：ios, xcode, cordova, badge

我尝试添加徽章插件，但它仍然无法正常工作。怎么做？或者可能有一个带有徽章插件的示例项目？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:04:48.050

这看起来像一个[彻底的教程](http://www.adobe.com/devnet/phonegap/articles/apple-push-notifications-with-phonegap.html)。这有帮助吗？

# actionscript-3 - AS3 SoundChannel 函数中音频的位置

> ID：14852237
> 
> 赞同：0
> 
> 时间：2013-02-13T11:14:33.760
> 
> 标签：actionscript-3, audio, air, scope, soundchannel

我遇到了变量范围的问题。我知道这一定很容易解决，但我找不到。

我需要通过函数中的声道播放声音。然后我需要另一个函数来读取声道位置。但它没有看到它，因为播放它的函数中有新的 var。如果我在函数之外播放它，我可以从另一个函数中获取位置，但如果我在函数中发出声音，那么另一个函数无法读取通道位置。我该如何解决。

编码

```
import flash.filesystem.File; 
import flash.filesystem.FileMode; 
import flash.filesystem.FileStream;

var lastPosition:Number = 0; var CrossAudio = new Sound();
CrossAudio.load(new URLRequest("Cross.mp3"));

function playCross() {

    PapaAudioChannel = CrossAudio.play();

}
bt_play.addEventListener(MouseEvent.CLICK, playA);

function playA(event:MouseEvent):void    {   
trace(PapaAudioChannel.position);  // Does not work
/// It can't doesn't recognize the PapaAudioChannel because 
 /// it began playing in another function. 

} 
```

如何获得第二个功能来查看音频的位置。我需要使用播放和暂停按钮开始播放音频，因此播放必须在函数中开始。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:30:20.403

AFAIK 声音可能会稍有延迟，因此在 play() 语句之后跟踪声音位置并不是一个好主意。

**编辑**

顺便说一句，如果是，在哪里`PapaAudioChannel`定义？*（应该是因为这是 AS3）*

如果你在一个函数中定义了一个 var，它会在函数结束时随着那个函数而死！

所以你可能想`PapaAudioChannel`在全局范围内定义：

```
import flash.filesystem.File; 
import flash.filesystem.FileMode; 
import flash.filesystem.FileStream;

var PapaAudioChannel:SoundChannel; // defines variable

var lastPosition:Number = 0; var CrossAudio = new Sound();
CrossAudio.load(new URLRequest("Cross.mp3"));

function playCross() {

    PapaAudioChannel = CrossAudio.play();

}

bt_play.addEventListener(MouseEvent.CLICK, playA);

function playA(event:MouseEvent):void {   

    trace(PapaAudioChannel.position);

} 
```

# javascript - 用于派生 RSA 私钥的数字何时应以“00”开头？

> ID：14852243
> 
> 赞同：2
> 
> 时间：2013-02-13T11:15:00.393
> 
> 标签：javascript, base64, rsa, asn.1, der

给定一个 RSA 私钥...

```
-----BEGIN RSA PRIVATE KEY-----
MIIBOgIBAAJBAMpZrx0gTluJEu6+fop1e60lwbnlBD6kHvoRx85GBhUgD8SQknjc
LcU2qqM/pV9ZX8MV8x49h2mzrmRyH7kDmpcCAwEAAQJAYf2GYMt5Rrids4IKk5CL
IPFs3FH8eT1PRvh/UvP0FBwDMZu/Q4m+3PNTM3ARQhFuCvWgCalMmZkyVx0HYRLe
4QIhAOaaQm+b/bSoHqolvVTcyfBL09rrLFZhgGkETX3R6cVRAiEA4KLdUm97YBxP
T6/jkn/P7K8SUWEO9o9u8Bif1UKQB2cCIETqoSQ92EqfW9q5wKWV/nvkDYKFehCu
vvOjp40MqPKhAiA2sPBZpbLQD5Rvvk8V1/Bzm5xGG+9csEc+RYCEl5QheQIhAKgi
Xb3zY9lqtpX/mgTIrW6RPB3GocviJOibqtpfNxRU
-----END RSA PRIVATE KEY----- 
```

无装甲，base64解码给出......

```
30 82 01 3a 02 01 00 02 41 00 ca 59 af 1d 20 4e 5b 89 12 ee be 7e 8a 75 7b ad 25 c1 b9 e5 04 3e 
a4 1e fa 11 c7 ce 46 06 15 20 0f c4 90 92 78 dc 2d c5 36 aa a3 3f a5 5f 59 5f c3 15 f3 1e 3d 87 
69 b3 ae 64 72 1f b9 03 9a 97 02 03 01 00 01 02 40 61 fd 86 60 cb 79 46 b8 9d b3 82 0a 93 90 8b 
20 f1 6c dc 51 fc 79 3d 4f 46 f8 7f 52 f3 f4 14 1c 03 31 9b bf 43 89 be dc f3 53 33 70 11 42 11 
6e 0a f5 a0 09 a9 4c 99 99 32 57 1d 07 61 12 de e1 02 21 00 e6 9a 42 6f 9b fd b4 a8 1e aa 25 bd 
54 dc c9 f0 4b d3 da eb 2c 56 61 80 69 04 4d 7d d1 e9 c5 51 02 21 00 e0 a2 dd 52 6f 7b 60 1c 4f 
4f af e3 92 7f cf ec af 12 51 61 0e f6 8f 6e f0 18 9f d5 42 90 07 67 02 20 44 ea a1 24 3d d8 4a 
9f 5b da b9 c0 a5 95 fe 7b e4 0d 82 85 7a 10 ae be f3 a3 a7 8d 0c a8 f2 a1 02 20 36 b0 f0 59 a5 
b2 d0 0f 94 6f be 4f 15 d7 f0 73 9b 9c 46 1b ef 5c b0 47 3e 45 80 84 97 94 21 79 02 21 00 a8 22 
5d bd f3 63 d9 6a b6 95 ff 9a 04 c8 ad 6e 91 3c 1d c6 a1 cb e2 24 e8 9b aa da 5f 37 14 54 
```

我从中提取了所有数字，放入一个数组中......

```
[ '00',
  '00ca59af1d204e5b8912eebe7e8a757bad25c1b9e5043ea41efa11c7ce460615200fc4909278dc2dc536aaa33fa55f595fc315f31e3d8769b3ae64721fb9039a97',
  '010001',
  '61fd8660cb7946b89db3820a93908b20f16cdc51fc793d4f46f87f52f3f4141c03319bbf4389bedcf35333701142116e0af5a009a94c999932571d076112dee1',
  '00e69a426f9bfdb4a81eaa25bd54dcc9f04bd3daeb2c56618069044d7dd1e9c551',
  '00e0a2dd526f7b601c4f4fafe3927fcfecaf1251610ef68f6ef0189fd542900767',
  '44eaa1243dd84a9f5bdab9c0a595fe7be40d82857a10aebef3a3a78d0ca8f2a1',
  '36b0f059a5b2d00f946fbe4f15d7f0739b9c461bef5cb0473e45808497942179',
  '00a8225dbdf363d96ab695ff9a04c8ad6e913c1dc6a1cbe224e89baada5f371454' 
] 
```

我不明白的是...

### 1\. 为什么提取的值有的有前导`00`，有的没有？

### 2\. 第一个值 ( `00`) 的用途是什么？这对我来说似乎是多余的。

我想知道的原因是我想在 javascript 中生成 RSA 密钥。我正在生成所需的数字，但我不知道它们什么时候应该有前导`00`s。

***编辑***

另外，我不太明白整个事情的第一部分......

```
30 82 01 3a 
```

我知道这`01 3a`是消息其余部分的长度，但我不知道`30 82`代表什么。

### 3.`30 82`解码密钥的开头是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:42:45.940

大多数答案都在这里： http: [//pumka.net/2009/12/19/reading-writing-and-converting-rsa-keys-in-pem-der-publickeyblob-and-privatekeyblob-formats/](http://pumka.net/2009/12/19/reading-writing-and-converting-rsa-keys-in-pem-der-publickeyblob-and-privatekeyblob-formats/)

1.  请注意，DER 中的许多整数值都以零字节开头。这是因为 ASN.1 标准要求如果多字节整数的第一位设置为 1，则在多字节整数的开头添加零字节。

2.  *@Gwyn 的回答后更新（[http://www.regular-expressions.info/conditional.html](http://www.regular-expressions.info/conditional.html)）*它是版本号，目前仅用于区分多素数和普通，但也将用于区分 RSA 的修订版规格

3.  来自： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb648645](http://msdn.microsoft.com/en-us/library/windows/desktop/bb648645(v=vs.85).aspx) (v=vs.85).aspx和：http: [//msdn.microsoft.com/en-us/library/ windows/桌面/bb648641(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb648641(v=vs.85).aspx)

> SEQUENCE 包含一种或多种类型的有序字段。它被编码成一个以 0x30 标记字节开头的 TLV 三元组。
> 
> ...
> 
> 如果 SEQUENCE 包含少于 128 个字节，则 TLV 三元组的 Length 字段只需要一个字节来指定内容长度。如果超过 127 个字节，长度字段的第 7 位设置为 1，第 6 到 0 位指定用于标识内容长度的附加字节数。

## 编码...

这是 javascript 代码，有点粗糙，但是如何生成 RSA 密钥的工作证明，可以使用 javascript 与 OpenSSL 互操作，以及输入密钥生成所需的数字......

```
function hex2b64(h) {
  var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var b64pad="=";

  var i;
  var c;
  var ret = "";
  for(i = 0; i+3 <= h.length; i+=3) {
    c = parseInt(h.substring(i,i+3),16);
    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);
  }
  if(i+1 == h.length) {
    c = parseInt(h.substring(i,i+1),16);
    ret += b64map.charAt(c << 2);
  }
  else if(i+2 == h.length) {
    c = parseInt(h.substring(i,i+2),16);
    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);
  }
  while((ret.length & 3) > 0) ret += b64pad;
  return ret;
}

var private_key = "-----BEGIN RSA PRIVATE KEY-----\n"+
"MIIBOgIBAAJBAMpZrx0gTluJEu6+fop1e60lwbnlBD6kHvoRx85GBhUgD8SQknjc\n"+
"LcU2qqM/pV9ZX8MV8x49h2mzrmRyH7kDmpcCAwEAAQJAYf2GYMt5Rrids4IKk5CL\n"+
"IPFs3FH8eT1PRvh/UvP0FBwDMZu/Q4m+3PNTM3ARQhFuCvWgCalMmZkyVx0HYRLe\n"+
"4QIhAOaaQm+b/bSoHqolvVTcyfBL09rrLFZhgGkETX3R6cVRAiEA4KLdUm97YBxP\n"+
"T6/jkn/P7K8SUWEO9o9u8Bif1UKQB2cCIETqoSQ92EqfW9q5wKWV/nvkDYKFehCu\n"+
"vvOjp40MqPKhAiA2sPBZpbLQD5Rvvk8V1/Bzm5xGG+9csEc+RYCEl5QheQIhAKgi\n"+
"Xb3zY9lqtpX/mgTIrW6RPB3GocviJOibqtpfNxRU\n"+
"-----END RSA PRIVATE KEY-----";

// these numbers have been extracted from the given RSA private key
numbers = ['00',
  'ca59af1d204e5b8912eebe7e8a757bad25c1b9e5043ea41efa11c7ce460615200fc4909278dc2dc536aaa33fa55f595fc315f31e3d8769b3ae64721fb9039a97',
  '010001',
  '61fd8660cb7946b89db3820a93908b20f16cdc51fc793d4f46f87f52f3f4141c03319bbf4389bedcf35333701142116e0af5a009a94c999932571d076112dee1',
  'e69a426f9bfdb4a81eaa25bd54dcc9f04bd3daeb2c56618069044d7dd1e9c551',
  'e0a2dd526f7b601c4f4fafe3927fcfecaf1251610ef68f6ef0189fd542900767',
  '44eaa1243dd84a9f5bdab9c0a595fe7be40d82857a10aebef3a3a78d0ca8f2a1',
  '36b0f059a5b2d00f946fbe4f15d7f0739b9c461bef5cb0473e45808497942179',
  'a8225dbdf363d96ab695ff9a04c8ad6e913c1dc6a1cbe224e89baada5f371454' ]

var data = ""

// loop through all the numbers
for(i in numbers){
  var item = numbers[i]

  // if the first binary bit is 1 (if the first hex pair is greater than 127)
  // add a `00` prefix, as ASN1 demands
  if(parseInt(item.match(/^../),16) > 127){ item = "00"+item }

  // calculate the length
  var len = ("0"+(item.length/2).toString(16)).replace(/.(..)/,"$1")

  // build data string, the `02` is ASN1 code for string
  data += "02"+len+item

  // can check all the input data here
  // console.log("02", len, item)
}

// calculate the length of all the data
var datalen = (data.length/2).toString(16)
// add leading `0` if required to ensure hex pairs
if(datalen.length % 2 == 1){ datalen = "0"+datalen }

// set the extra bits to define the length if required, or make it empty
var exlen = parseInt(datalen,16) >= 128 ? (datalen.length/2 + 128).toString(16) : ''

// create the full data string
var full_data = "30"+exlen+datalen+data

// encode the data
var encoded = hex2b64(full_data)

// split it into lines no longer than 64 characters
var lines = encoded.match(/.{1,64}/g)

// add the armour
lines.unshift("-----BEGIN RSA PRIVATE KEY-----")
lines.push("-----END RSA PRIVATE KEY-----")

// join it all together
var generated_key = lines.join("\n")

// check if the generated key matches the expected key
console.log(generated_key == private_key) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:15:20.017

只是回答 2，因为其他问题已经解决，第一个 00 是版本字段。[在此处](http://lapo.it/asn1js/)使用 ASN.1 解码器来解码 Base64 或十六进制以显示 9 个整数的序列。您需要检查[规格](http://www.rsa.com/rsalabs/pkcs/files/h11300-wp-pkcs-1v2-2-rsa-cryptography-standard.pdf)（请参阅 A.1.2）以了解它们是什么，虽然虽然不是确定的，但 Wikipedia[在此处提供了一些信息](http://www.cryptopp.com/wiki/Keys_and_Formats#RSA_PrivateKey)

# java - 在 AsyncTask 中为 IP 地址设置全局变量的更好方法？

> ID：14852244
> 
> 赞同：0
> 
> 时间：2013-02-13T11:15:01.920
> 
> 标签：java, android, android-asynctask

我有许多 AsyncTasks，它们的所有`doInBackground`方法都这样做：

```
Socket s = new Socket("12.345.67.89", 5555); 
```

我想设置一个它们都可以访问的全局变量，因此当我更改位置/IP 时，我不必梳理所有类文件并更改每个 IP 地址。

在我的脑海中，我想创建一个名为的类`GlobalInfo`，其中包含我可能需要共享的所有（静态？）变量，然后在每次`doInBackground`调用中：

```
GlobalInfo derp = new GlobalInfo();
GlobalInfo.getIp(); 
```

但是有没有比我每次都实例化一个新类更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:18:40.067

如果您需要这样的东西，我建议您创建一个实用程序类（如您所写），例如：

```
public static final HOST_ADDRESS = "12.345.67.89"; 
```

然后在您的所有任务（甚至所有类）中，您可以像这样使用它（不需要任何实例化）：

```
MyUtilityClass.HOST_ADDRESS 
```

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:19:53.317

创建一个静态类

```
public class GlobalInfo {
    public static final String IP_ADDRESS = "123.123.123.123";

} 
```

并通过

```
 Socket s = new Socket(GlobalInfo.IP_ADDRESS, 5555); 
```

或者

```
import static GlobalInfo.*;

Socket s = new Socket(IP_ADDRESS, 5555); 
```

因为它的静态创建只发生一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:20:05.770

您可以创建一个常量类，并将该类的成员设为静态，这样您就不需要每次都创建一个新对象。

就像是：

```
public class C {
    public static final String IP = "12.345.67.89";
    public static final int PORT = 5555;
} 
```

然后使用：

```
Socket s = new Socket(C.IP, C.PORT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:20:45.863

只需使用全局静态常量：

```
public class GlobalInfo {
    public static final String IP_ADDRESS = "12.345.67.89";
    public static final int PORT = 5555;

    private GlobalInfo(){}
} 
```

然后，您的代码变为：

```
Socket s = new Socket(GlobalInfo.IP_ADDRESS, GlobalInfo.PORT); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:06:15.397

所有其他答案都是正确的，但我个人选择创建一个包含内容的 XML 文件

```
<string name="server_ip">192.168.1.100</string> 
```

然后简单地做

```
getString(R.string.server_ip) 
```

这样，您就可以将配置设置与代码分开。

# asp.net-mvc - 从控制器继承，覆盖不同类型的保存方法

> ID：14852246
> 
> 赞同：1
> 
> 时间：2013-02-13T11:15:05.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, controller

我有一个具有“核心”版本和“定制”版本的项目。它们是单独的项目。

“定制”从“核心”继承功能，在某些情况下会覆盖方法。

例如：

我有一个看起来像这样的用户模型：

```
public class User
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后，在一个单独的程序集中，

```
public class User : Core.User
{
    public string CustomProperty { get; set; }
} 
```

然后我有一个控制器（在我的“核心”程序集中）

```
public class UserController : Controller
{
    [HttpPost]
    public ActionResult SaveUser(User user)
    {
    }
} 
```

在我的另一个项目中，我有一个继承自 Core.UserController 的 UserController：

```
public class UserController : Core.UserController
{
    [HttpPost]
    public ActionResult SaveUser(Custom.User user)
    {
    }
} 
```

显然，在我的 Global.asax 中，我映射了控制器命名空间

但是，当我点击 SaveUser 方法时，我得到

> 当前对控制器类型 UserController 的操作 SaveUser 的请求在以下操作方法之间不明确

虽然我理解这个问题，但有什么办法可以解决这个问题吗？

简而言之：

*我大部分*时间都想使用`Core.UserController`方法，但在这种情况下，我需要使用我的SaveUser 方法（因为它需要我的类型）*`Custom.UserController``Custom.User`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:35:38.777

多态性？

```
public class UserController : Controller
{
    [HttpPost]
    public virtual ActionResult SaveUser(User user)
    {
    }
}

public class UserController : Core.UserController
{
    [HttpPost]
    public override ActionResult SaveUser(User user)
    {
         var customUser = user as Custom.User;

         if(customUser != null)
         {
             //Your code here ...
         }      
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:25:17.123

如果多态性解决方案不起作用或不可接受，另一种可能的解决方法是将您的 UserController 或其操作方法重命名为稍有不同的名称：

```
public class CustomUserController : Core.UserController
{
    [HttpPost]
    public ActionResult SaveUser(Custom.User user)
    {
    }
}

public class UserController : Core.UserController
{
    [HttpPost]
    public ActionResult SaveCustomUser(Custom.User user)
    {
    }
} 
```

如果您想让路由与其他项目保持一致，您只需为此创建一个自定义路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T01:23:02.617

我今天在自己的项目中遇到了同样的问题，并遇到了您的帖子。

在我的例子中，虽然我不想改变核心控制器的*逻辑*运作方式，但我能够改变它的代码，从而改变它的修饰符关键字。在添加`virtual`到基本控制器的操作和`override`我的派生控制器的操作之后。原始控制器的动作仍然有效，我的派生控制器使用我自定义的动作，不再有模棱两可的错误。

我意识到您可能无法修改您的核心控制器，如果是这种情况，那么您需要使用其他方式来区分您的操作。动作名称、参数或其他一些解决方案，例如`ActionMethodSelectorAttribute`. 那是我第一次尝试解决这个问题，但在我走得太远之前，我发现了虚拟/覆盖解决方案。因此，不幸的是，我没有可在该路线上共享的代码。*

# git - 忽略git中修改过的文件？

> ID：14852250
> 
> 赞同：1
> 
> 时间：2013-02-13T11:15:29.343
> 
> 标签：git

我可以告诉 git 忽略它不应该接触的*跟踪文件吗？*默认操作应保护对它们的更改不会进入存储库；并且即使默认情况下`checkout --hard`也不需要重置。目前，我必须关闭我的 IDE，复制这些文件，恢复原始版本，做一些 git 工作，然后恢复保存的文件并再次启动我的 IDE。那不方便。

我有包含一些应用程序或工作台配置的仓库。由于在我的桌面上有些不同，因此这些文件有所不同。我希望 git 在`commit`或上忽略对该文件的更改`status`；如果没有特别指示，如果需要覆盖它们，我什至希望它简单地跳过这些显式命名的文件。

```
git stash 
```

似乎没有选择，因为它总是隐藏*所有*更改，我无法列出要保留的文件。如果可以的话，这不会很方便，因为在每次操作之前，我必须手动存储更多文件，然后再次取消存储以使我的应用程序再次工作。

符号链接不是一种选择，因为我在 Windows 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:45.260

我已经看到提到`git update-index --assume-unchanged <my_file>`并且快速谷歌搜索说它确实可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:52:32.003

试试`git update-index --assume-unchanged <files>`。请记住使用该`--no-assume-unchanged`标志让 Git 再次检查更改。更多在[文档](https://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T13:29:16.133

尝试 git update-index --skip-worktree 文件名

# c++ - WinbioOpensession 返回 E_ACCESSDENIED？

> ID：14852251
> 
> 赞同：2
> 
> 时间：2013-02-13T11:15:32.013
> 
> 标签：c++, windows, windows-7, biometrics, credential-providers

我在 VS2010 和 Windows 7 中编程。

我`WinBioOpenSession`从`winbio.h`

这是我的代码：

```
WINBIO_SESSION_HANDLE sessionHandle = NULL;

hr = WinBioOpenSession( 
            WINBIO_TYPE_FINGERPRINT,    
            WINBIO_POOL_SYSTEM,         
            WINBIO_FLAG_RAW,            
            NULL,                      
            0,                          
            WINBIO_DB_DEFAULT,          
            &sessionHandle             
            ); 
```

hr返回`E_ACCESSDENIED`返回码？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:47:31.703

问题是您没有检查生物识别登录选项。转到控制面板的生物识别选项并启用生物识别登录选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-05T23:04:18.883

以管理员身份运行 Visual Studio。

# php - 如果之前发送了相同的查询，JavaScript 不会更新 Internet Explorer

> ID：14852253
> 
> 赞同：0
> 
> 时间：2013-02-13T11:15:55.477
> 
> 标签：php, javascript, mysql, internet-explorer

我正在制定一个清单，用户可以在点击它的同时设置 4 个不同的选项。当您单击一次时，它是绿色并显示“ok”，再次显示灰色和“N/A”，然后是白色和空白。在它再次开始变为绿色和“OK”之后，每次我用值 1、2、3 或 0 更新我的数据库时，每种可能性。javascript 工作得很好，每次我点击 For the update of the database 时，所有浏览器中的颜色和文本都会正确更新，它也可以正常工作，直到我回到数据库中的白色或 0。我单击，它更新为 1，然后是 2，然后是 3，然后是 0，然后当你应该得到 1 时它不再更新它了。我的chrome没有这个问题。

这是Javascript代码：

```
function CheckLog(TDCheck,ID){ 
var url;
var Color;
var Status;
var Text;
xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
 {
 alert ("Browser does not support HTTP Request");
 return;
 }
 var TD = document.getElementById("TDCheck"+TDCheck);
 if(TD.style.backgroundColor == "white"){
    Color = "green";
    Status = "1";
    Text = "OK";
 }
 else if(TD.style.backgroundColor == "green"){
    Color = "grey";
    Status = "2";
    Text = "N/A";
 }
 else  if(TD.style.backgroundColor == "grey"){
    Color = "red";
    Status = "3";
    Text = "KO";
 }
 else  if(TD.style.backgroundColor == "red"){
    Color = "white";
    Status = "0";
    Text = "";
 }

url="Checklist/checklog.php";
url=url+"?ID="+ID+"&TDCHECK="+TDCheck+"&Status="+Status;
xmlHttp.onreadystatechange=stateChanged;
xmlHttp.open("GET",url,false);
xmlHttp.onreadystatechange = function()
{
       if(xmlHttp.readyState == 4 && xmlHttp.status == 200){
                  alert(xmlHttp.responseText);
         }
      }

xmlHttp.send(null);
document.getElementById("TDCheck"+TDCheck).style.backgroundColor=Color;
document.getElementById("TDCheck"+TDCheck).innerHTML=Text;
} 
```

检查日志.php：

```
<?php
try
    {
        $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
        $bdd = new PDO('mysql:host=localhost;dbname=dbname', 'database', 'password');

    }
        catch(Exception $e)
    {
        die('Erreur : '.$e->getMessage());
    }

if(isset($_GET["TDCHECK"]))
{
    $bdd->exec("update ChecklistNew SET ".$_GET["TDCHECK"]." = '".$_GET["Status"]."' WHERE ID = '".$_GET["ID"]."'");
}   

?> 
```

我已经删除了 PDO，以防万一它是问题并使用 mysql_connect，但仍然相同。通过使用响应文本，我监控我的 sql 请求，我可以看到一件事：

我先点击，查询如下：

```
update ChecklistNew SET A2 = '1' WHERE ID = '4'
then 
update ChecklistNew SET A2 = '2' WHERE ID = '4' 
```

然后，如果我用“更新 ChecklistNew SET TD = number WHERE `ID`= 'Idnum'”更新 php 文件（我在 arround 周围添加了引号`ID`）

```
update ChecklistNew SET A2 = '4' WHERE `ID` = '4'
then 
update ChecklistNew SET A2 = '0' WHERE `ID` = '4'
then
update ChecklistNew SET A2 = '1' WHERE ID = '4'
then 
update ChecklistNew SET A2 = '2' WHERE ID = '4' 
```

请注意，它保留了先前的查询。:)...我认为那里有些东西。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:44:46.660

IE 缓存了使用 GET 方法的 XMLHttpRequest，所以就是这样。

你可以做很多事情之一，最简单的是：

*   不要使用 GET 进行更新；切换到 POST 将解决您的问题；使用 send("POST", ...) 而不是 send("GET", ...)，您不需要在 PHP 端更改任何内容（因为即使对于 POST 请求，$_GET 也会填充查询参数）；
*   将随机任何内容添加到 URL。它可以像带有随机数的未使用参数一样简单。比如：url=url+"?ID="+ID+"&TDCHECK="+TDCheck+"&Status="+Status + "&random=" + Math.random()

**警告：您的 PHP 脚本非常不安全，它有多个 SQL 注入漏洞。立即修复。** （另请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:46:18.840

很简单，您的浏览器正在缓存结果。

即，如果您`Checklist/checklog.php?check=2`稍后调用并执行相同的调用（第二次执行或某事）。您的浏览器实际上不会触发服务器端脚本，因为他已经知道结果。（缓存）。因此，您的服务器端逻辑不会被执行。

作为一种解决方案，将时间戳与您的 Ajax 调用一起传递。

```
url="Checklist/checklog.php";
url=url+"?ID="+ID+"&TDCHECK="+TDCheck+"&Status="+Status + "r=" + (new Date().getTime()); 
```

这会导致每次调用的 URL 不同，并且不会缓存任何内容。（或者至少缓存没有被重用）

但请记住，您应该在执行请求之前创建随机部分 RIGHT。如果您将 URL 保存在代码中的某个位置，并重用该 URL，您将遇到同样的问题，因为它再次相等。

# sql - 使用 CTE 创建视图时出错

> ID：14852254
> 
> 赞同：13
> 
> 时间：2013-02-13T11:15:58.097
> 
> 标签：sql, view, common-table-expression

认为我很愚蠢，但我得到了错误：

> 消息 195，级别 15，状态 1，过程 VW_THIRDPARTY_SLA_REPORT_MONTHLY_GP_NONAGGREGATE，第 8 行“分区”不是公认的选项。

尝试执行以下创建视图语句时

```
CREATE VIEW [dbo].[VW_THIRDPARTY_SLA_REPORT_MONTHLY_GP_NONAGGREGATE] 
With partitioned
AS 
(Select 
B.MSH7_DateTimeOfMessage,
B.PID2x1_PatientIDExternal,
B.PID3x1_PatientIDInternal,
B.PID5x1_PatientName_FamilyName,
B.PV3x2_AssignedPatientLocation_Room,
A.OBR4x2_UniversalServiceID_Text,
A.OBX3x2_ObservationIdentifier_Text,
A.OBR24_DiagnosticServiceSectionID,
A.OBR6_RequestDateTime,
C.TestName,
C.PriceBaseline,
D.Contract,
Row_NUMBER()

OVER(Partition By [ORC3_FillerOrderNumber], [OBX3x2_ObservationIdentifier_Text] order by [ORC9_DateTimeOfTransaction]) as seq
From [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_Detail] A
LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_Header] B ON A.[DETAIL_ID] = B.[HEADER_ID]
LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_View_TFCData] C ON A.[OBR24_DiagnosticServiceSectionID] + A.[OBX3x1_ObservationIdentifier_Identifier] = C.[KEY]
LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_LocationDetail] D ON B.[PV3x1_AssignedPatientLocation_PointOfCare] = D.[PracticeCode] 

)
Select *
from partitioned  
where seq =1 
```

这是一个在存储过程中运行良好的查询，因此我对查询感到满意，只是无法将其创建为视图。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T11:31:05.503

你错过了`AS`之后的第一个[`CREATE VIEW`](http://msdn.microsoft.com/en-us/library/ms187956.aspx)：

```
CREATE VIEW [dbo].[VW_THIRDPARTY_SLA_REPORT_MONTHLY_GP_NONAGGREGATE] 
AS --- this is missing
  With partitioned
  AS 
  (
   Select 
      B.MSH7_DateTimeOfMessage,
      B.PID2x1_PatientIDExternal,
      B.PID3x1_PatientIDInternal,
      B.PID5x1_PatientName_FamilyName,
      B.PV3x2_AssignedPatientLocation_Room,
      A.OBR4x2_UniversalServiceID_Text,
      A.OBX3x2_ObservationIdentifier_Text,
      A.OBR24_DiagnosticServiceSectionID,
      A.OBR6_RequestDateTime,
      C.TestName,
      C.PriceBaseline,
      D.Contract,
      Row_NUMBER() OVER(Partition By [ORC3_FillerOrderNumber], [OBX3x2_ObservationIdentifier_Text] order by [ORC9_DateTimeOfTransaction]) as seq
   From [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_Detail] A
   LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_Header] B ON A.[DETAIL_ID] = B.[HEADER_ID]
   LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_View_TFCData] C ON A.[OBR24_DiagnosticServiceSectionID] + A.[OBX3x1_ObservationIdentifier_Identifier] = C.[KEY]
   LEFT OUTER JOIN [NWLHPathApp_DataWarehouse].[dbo].[PathologyHL7_LocationDetail] D ON B.[PV3x1_AssignedPatientLocation_PointOfCare] = D.[PracticeCode] 

   )
   Select *
   from partitioned  
   where seq =1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T11:30:53.843

你需要`AS`之后`CREATE VIEW`：

```
CREATE VIEW [dbo].[VW_THIRDPARTY_SLA_REPORT_MONTHLY_GP_NONAGGREGATE] 
AS
With partitioned ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-09T15:54:35.060

指出您似乎不能在使用 CTE 的同时添加视图列标题可能会有所帮助。（这浪费了我几分钟的时间）

```
create or replace force editionable view "MYVIEW"
  --("Field1", "Field2")
as 
with results as (
    select cal.field1,cal.field2  from mytable cal
) 
select field1,field2 from results
; 
```

如果您取消注释上面的 ("Field1", "Field2") 列声明，则会失败。

# c# - 在屏幕键盘上使用正则表达式

> ID：14852256
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:01.203
> 
> 标签：c#, .net, regex

好的，我真的被困在这里了：/。我有一个（自定义！）屏幕键盘，我想使用正则表达式。

我成功地创建了一个正则表达式，只允许`0-9`一个`comma`常规键盘。

当然，这不适用于我的屏幕键盘。

我有一个有效的代码片段......

但我还有一个空格键、一个退格键和 2 个用于移动插入符号的按钮。

当我使用下面的正则表达式代码并单击空格、退格或插入符号按钮时，我收到此错误：

```
Object reference not set to an instance of an object. 
```

我究竟做错了什么？

```
 // the regex code   
    private Control keyb = null;
    private void EditProdPriceEx_GotFocus(object sender, RoutedEventArgs e)
    {
        string AllowedChars = "[^0-9,]";
        if (Regex.IsMatch(EditProdPriceEx.Text, AllowedChars))
        {
            keyb = (Control)sender;
        }
    } 
```

空格键：

```
 private void KnopSpatie_Click(object sender, RoutedEventArgs e)
    {
        TextBox tb = keyb as TextBox;
        int selStart = tb.SelectionStart; // here is where i get the error
        string before = tb.Text.Substring(0, selStart);
        string after = tb.Text.Substring(before.Length);
        tb.Text = string.Concat(before, " ", after);
        tb.SelectionStart = before.Length + 1;
    } 
```

退格键：

```
 private void KnopWissen_Click(object sender, RoutedEventArgs e)
    {
        TextBox tb = keyb as TextBox;
        int cursorPosition = tb.SelectionStart; // here is where i get the error
        if (cursorPosition > 0)
        {
            tb.Text = tb.Text.Substring(0, cursorPosition -1) + tb.Text.Substring(cursorPosition);
            tb.SelectionStart = cursorPosition - 1;
        }
    } 
```

移动插入符号左按钮：

```
 private void KnopLinks_Click(object sender, RoutedEventArgs e)
    {
        TextBox tb = keyb as TextBox;
        if (tb.SelectionStart > 0) // here is where i get the error
        {
            int selStart = tb.SelectionStart;
            string before = tb.Text.Substring(0, selStart);
            string after = tb.Text.Substring(before.Length);
            tb.SelectionStart = before.Length - 1;
        }
    } 
```

移动插入符号右键：

```
 private void KnopRechts_Click(object sender, RoutedEventArgs e)
    {
        TextBox tb = keyb as TextBox;

        if (tb.SelectionStart >= 0) // here is where i get the error
        {
            int selStart = tb.SelectionStart;
            string before = tb.Text.Substring(0, selStart);
            string after = tb.Text.Substring(before.Length);
            tb.SelectionStart = before.Length + 1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:45:40.010

我想你必须试试这个。在第一个代码中。

```
// the regex code   
private Control keyb = null;
private void EditProdPriceEx_GotFocus(object sender, RoutedEventArgs e)
{
    string AllowedChars = "[^0-9,]";
    if (Regex.IsMatch(EditProdPriceEx.Text, AllowedChars))
    {
        keyb = (Control)sender;
    }
} 
```

您将 keyb 设为 null，并且未由您提到的任何键（空格和其他）设置，我认为这会产生参考未设置错误。你能检查一下吗？

# iphone - 提取字符串到某个字符

> ID：14852262
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:15.307
> 
> 标签：iphone, xcode4.5

我需要将字符串提取到某个单词我有这样的时间：`"2012-12-29T00:00:00"`我怎样才能将部分提取到`TO`。也就是说我不需要时间。这个字符串不是静态的。我的意思是它会像“2013-01-21T00:00:00 "

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:24:06.577

像下面这样使用

```
NSString *stingTime = @"2012-12-29T00:00:00";
if([stingTime rangeOfString:@"T"].location != NSNotFound)
    stingTime = [stingTime substringToIndex:[stingTime rangeOfString:@"T"].location];

//output
2012-12-29 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:18:39.517

这个应该是这样的...

```
NSString *string = @"2012-12-29T00:00:00";
NSRange range = [string rangeOfString:@"T0"];
if (range.location != NSNotFound){
    NSString *newString = [string substringToIndex:range.location];
    NSLog(@"NewString = %@",newString);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T11:19:52.437

您可以使用`NSString`For 例如的功能：

```
NSString *string = @"2012-12-29T00:00:00";
NSString *newString = [string substringToIndex:10]; 
```

您的 newString 将包含 2012-12-29。

希望这可以帮助。

# c++ - 有人可以解释排序和未排序优先级队列的渐近复杂性吗？

> ID：14852265
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:24.197
> 
> 标签：c++, algorithm, heap, complexity-theory, priority-queue

对于一个已排序的底层容器，为什么创建优先级队列需要 O(nlogn) 时间，而对于一个未排序的底层容器却只需要 O(n) 时间来创建？另外，为什么需要（在已排序的情况下）O(nlogn) 对优先级队列进行排序？

无论哪种情况，是否有任何有用的图表可以帮助我了解运行时间？在这些情况下使用堆会更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:34:03.877

可以使用最大堆来实现优先级队列。事实上，最大堆为我们提供了优先级队列的渐近最优实现。因此，在未排序的底层容器情况下，为了创建优先级队列，我们​​只需要从 n 个元素中创建一个堆，这可以使用[Heapify 算法](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap)在 O(n) 时间内完成。在排序的情况下，我们需要对已知为 Theta(n) 约束的元素进行完全排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:36:29.880

我认为您的问题一般无法回答，因为没有一种方法可以实现优先级队列。

它是由它能够执行的操作来定义的，并且有很多方法可以实现它，堆或 AVL 树只是有一些可能性。

您必须查看您用来回答此问题的 STL 实现选择的实现。

在 SGI 实现的文档中，它写道：

> [2] 这个限制是priority_queue 存在的唯一原因。如果对元素的迭代很重要，您可以使用按排序顺序维护的向量、集合或使用 make_heap、push_heap 和 pop_heap 维护为堆的向量。Priority_queue 实际上是作为一个随机访问容器实现的，它被维护为一个堆。使用容器适配器priority_queue而不是手动执行堆操作的唯一原因是要清楚地表明您永远不会执行任何可能违反堆不变量的操作。

所以它似乎只是按照你的建议使用了一个堆。

# git - 在 git add -A 之后克隆时某些文件夹是空的

> ID：14852266
> 
> 赞同：1
> 
> 时间：2013-02-13T11:16:25.697
> 
> 标签：git, git-clone, git-add

我在 Git 中创建了一些存储库并将存储库添加为子模块。

在子模块仓库中，我添加了内容。（文件夹和文件）。之后我做了

```
git add -A
git commit -m "message"
git push origin master. 
```

之后我尝试从其他地方克隆回购。我能够克隆回购，我可以看到所有的文件夹。但有些文件夹是空的。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:30:42.177

在子模块中推送更改是不够的。

您还需要返回父仓库，提交和推送。
否则，从父存储库中提取将提取它所知道的子模块的最后一个 SHA1（记录在[`.gitmodules`文件](http://git-scm.com/docs/gitmodules.html)及其[特殊条目](https://stackoverflow.com/questions/1992018/git-submodule-update-needed-only-initially/2227598#2227598)中，如“[没有子模块的嵌套 git 存储库？](https://stackoverflow.com/questions/2317652/nested-git-repositories-without-submodules/2317870#2317870) ”），这将是一个空的子存储库。

# php - 单击它并删除以前的值后如何更改选定的值？

> ID：14852270
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:34.700
> 
> 标签：php, jquery, ajax, codeigniter

我有一个`php`观点，我想改变

*   点击后上课

    ```
    <ul>
      <li> <a href="<?=base_url()?>home"  id="home" onclick="select_class('home');" class="shortcut-dashboard" title="Home">Home</a></li>
      <li><a href="<?=base_url()?>message"  class="shortcut-messages" id='mesg' onclick="select_class('mesg');" title="Messages">Messages</a></li>
    </ul>
    <script src="<?=base_url()?>js/libs/jquery-1.7.2.min.js"></script>
    <script type="application/javascript">
        function select_class(id){
            if(id=='mesg'){
                $('#'+id).addClass('current');
                $('#home').removeClass('current');
            }
            else{
                $('#home').addClass('current');
                $('#mesg').removeClass('current');
            }
        }
    </script> 
    ```

    如何选择所选值以使其可见并删除前一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:21:23.107

你应该`.toggleClass()`改用。

[http://api.jquery.com/toggleClass](http://api.jquery.com/toggleClass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:46:22.343

我也遇到了这个问题，但我只是更改了选定的类并将其放置到

```
<a class='current'> 
```

从 css 然后它适用于我自己尝试然后你的问题将解决并且也这样做

```
$(document).ready(function(){
    $('#shortcuts li a').each(function(index) {
        if(this.href.trim() == window.location)
            $(this).addClass("current");
    });
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:22:04.507

```
<ul id="example">
    <li>Test</li>
    <li>test 2</li>
</ul>

$('#example li').click(function(e){
    $('#example li').removeClass('current');
    $(this).addClass('current');
    e.preventDefault();
}); 
```

在这里[摆弄 http://jsfiddle.net/mRKC6/](http://jsfiddle.net/mRKC6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:24:57.177

请更改js类型

```
 <script type="application/javascript"> 
```

到

```
 <script type="text/javascript"> 
```

# c# - 我如何以编程方式重新定位 ExpandableSplitter

> ID：14852271
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:36.870
> 
> 标签：c#, .net, dotnetbar

任何人都知道如何以编程方式移动 DevComponents ExpandableSplitter？

我已经尝试过位置更改，但这并没有做任何事情。并扩大，但我想要扩大行动的相反效果。

我有一个通过拆分器展开的面板，存储在拆分器的 ExpandableControl 中。我想设置拆分器以在可用空间上完全显示 ExpandableControl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:19:15.210

我似乎找到了一些有用的东西，但底部仍然有一个我无法摆脱的最小间隙。

```
expandableSplitter2.Expanded = true;
panelTohide.Visible = false;
expandableSplitter2.Visible = false;

//to hide as much of the answer panel as possible
expandableSplitter2.MinExtra = 0;
expandableSplitter2.MaximumSize = new Size(1, 1);
expandableSplitter2.Height = 0;

expandableSplitter2.SplitPosition = this.Height; 
```

但底部仍然会有一个小缺口。

作为对 Paul Ruane 的回答，隐藏面板是`dock.fill` 顶部面板是`dock.top` 可扩展的拆分器是`dock.top`

# c# - 在MVC3中添加onsubmit事件调用JS函数

> ID：14852274
> 
> 赞同：9
> 
> 时间：2013-02-13T11:16:53.773
> 
> 标签：c#, javascript, html, asp.net-mvc, asp.net-mvc-3

我在 MVC3 项目中从表单调用 JS 方法时遇到问题：我有一个“搜索”页面，没有带有两个按钮的表单 - 搜索和取消。点击搜索运行ProductDefinition中的JS函数runSearch。

```
<div id="productSearch-dialog" class="modal fade" style="width: 1000px; display: none">
<div class="modal-header">
    <button class="close" aria-hidden="true" data-dismiss="modal" type="button">×</button>
    <h3>Search Results</h3>
</div>
<div class="modal-body" style="height: 650px;">
    <div>
        <input id="inputname" type="text" /><font class="red-font" id="lblrequired" style="display: none">*</font>
    </div>
    <div id="searchresultcontain" class="grid">
    </div>
    <div id="Pagination" class="pagination">
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" onclick="productDefinition.runSearch();">Search</button>
    <button class="btn btn-primary" data-dismiss="modal">Cancel</button>
</div> 
```

按 时如何运行这个 JS 方法（runSearch）？据我了解，这将是表单事件的 onsubmit 事件，因此我需要添加具有 onsubmit 属性的表单元素。我尝试使用 BeginForm 辅助方法包围输入字段：

```
@using (Html.BeginForm(new { onsubmit = "productDefinition.runSearch();" }))
{
    <input id="inputname" type="text" /><font class="red-font" id="lblrequired" style="display: none">*</font>
    <input type="submit" value="Submit" style="visibility: hidden" />
} 
```

但它似乎不起作用 - 当我按 Enter 时，我出于某种原因获取页面的源并到达 localhost/?onsubmit=productDefinition.runSearch() URL。
什么可能是问题的根源，我怎样才能获得与 onclick 相同的 onsubmit 行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T11:20:40.160

```
 @using (Html.BeginForm(new { onsubmit = "return runSearch();" }))

<script type="text/javascript">
    function runSearch() {
           // your logic to perform the search.
           return true;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:23:38.183

您需要使用[以下版本的 BeginForm 方法](http://msdn.microsoft.com/en-us/library/dd470539%28v=vs.108%29.aspx)来指定 html 属性。

但是，使用内联 javascript 被认为是一种不好的做法，因此我建议将 id 属性分配给您的表单，并在外部 javascript 文件中处理其提交事件。如果您在项目中使用 jQuery，这是他们文档中的一个很好的示例 - [http://api.jquery.com/submit/](http://api.jquery.com/submit/)。在 JavaSCript 计划中，它有点棘手，但仍然很容易做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T09:08:15.060

```
@model Models.Person

<script type="text/javascript">
    $(document).ready(function () {
        $('#registerInputId').click(function () {
            alert('what do you do before send? For example encrypt the password');

            $('#Password').val(CryptoJS.MD5($('#Password').val()));
        })
    });
</script>

@using (Html.BeginForm())
    {
    @Html.AntiForgeryToken()
    <div class="form-horizontal" style="display: inline-block; margin: 5% auto;">
        <div style="font-size: 18px; margin-right:2px; margin-bottom:20px; text-align:right;">Add form</div>
        @Html.ValidationSummary(true)
        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-5" })
            <div class="col-md-7">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-5" })
            <div class="col-md-7">
                @Html.EditorFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>
        </div>

        <div class="form-group" style="margin-top: 30px;">
            <div class="col-md-offset-3 col-md-6">
                <input id="registerInputId" type="submit" value="Register" class="btn btn-default" />
            </div>
        </div>
    </div>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T10:15:38.723

`Form.Id`如果`onsubmit`处理程序实现通用功能，则需要，适用于多种形式。（示例：禁用所有输入字段）

*形式*

```
@using (Html.BeginForm(new { 
    id = "form24",
    onsubmit = "return onSubmitHandler(id);" 
 })) 
```

*处理程序*

```
<script type="text/javascript">
   function onSubmitHandler(formId) { /*formId is form24 */ }
</script> 
```

# apache-flex - Flex - FileReference 上传超时

> ID：14852275
> 
> 赞同：0
> 
> 时间：2013-02-13T11:16:59.153
> 
> 标签：apache-flex, http, upload, timeout, filereference

我正在做一个`air`项目，我正在使用`FileReference`该类将文件上传到服务器。

服务器端脚本必须接收文件并做一些事情，然后回复`xml`告诉我是否一切都已消失`OK`或`KO`.

问题是，服务器端脚本通常需要超过 30 秒才能完成他的任务和回复。

如果触发了后一个超时，`DataEvent.UPLOAD_COMPLETE_DATA`则不会调度该事件，并且我无法取回服务器响应。

我怎样才能摆脱这种行为？`FileReference`我在课堂上找不到任何超时设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:28:00.197

您使用的是哪种服务器端技术？因为每种服务器端语言都有默认等待时间的选项，可以增加例如（PHP） -

```
ini_set('max_execution_time', '500') 
```

# c# - wcf 单向非阻塞操作

> ID：14852280
> 
> 赞同：1
> 
> 时间：2013-02-13T11:17:06.383
> 
> 标签：c#, .net, wcf, web-services, wcf-endpoint

我需要这样的场景：客户端向服务器发送消息，而不是等待响应，并且不在乎消息是否正确发送。

```
using(host.RemoteService client = new host.RemoteService())
{
client.Open();

cliend.SendMessage("msg");
} 
```

在防火墙打开或没有连接到 Internet 的情况下，客户端在“SendMessage”处死机。我的意思是程序停止响应。我希望程序不关心结果。我的意思是如果没有连接，我希望程序更进一步，省略“SendMessage”或类似的东西。

我该怎么办，有没有非阻塞方法的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:20:41.417

在你的服务合同中尝试这样的事情：

```
[OperationContract(IsOneWay=true)]
void Send(string message); 
```

请参阅以下链接：

[WCF 中的单向操作](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/one-way-operation-in-wcf/)

编辑：OP 已经在使用我建议的解决方案。

解决问题的建议方法 - 取自 MSDN（[单向服务](http://msdn.microsoft.com/en-us/library/ms730149%28v=vs.100%29.aspx)）：

> ## 单向操作阻塞的客户端
> 
> 重要的是要认识到，虽然一些单向应用程序会在出站数据写入网络连接后立即返回，但在某些情况下，绑定或服务的实现可能会导致 WCF 客户端阻塞使用单向操作. 在 WCF 客户端应用程序中，WCF 客户端对象在出站数据写入网络连接之前不会返回。**这适用于所有消息交换模式，包括单向操作；这意味着将数据写入传输的任何问题都会阻止客户端返回**。根据问题，结果可能是向服务发送消息时出现异常或延迟。
> 
> 您可以通过在客户端对象和客户端传输的发送操作之间插入一个缓冲区来缓解这个问题。例如，**使用异步调用或使用内存中的消息队列可以使客户端对象快速返回**。这两种方法都可能增加功能，但线程池和消息队列的大小仍然会强制执行限制。
> 
> 相反，建议您检查服务和客户端上的各种控件，然后测试您的应用程序场景以确定任一端的最佳配置。例如，如果会话的使用阻塞了服务上的消息处理，则可以将 `System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode` 属性设置为，`PerCall`以便每个消息可以由不同的服务实例处理，并设置为`ConcurrencyMode`以 `Multiple`允许多个线程一次发送消息。另一种方法是增加服务和客户端绑定的读取配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:20:53.217

修改你的属性

```
[OperationContract(IsOneWay=true)] 
```

# php - 如何使用两个数据库运行 Wordpress

> ID：14852288
> 
> 赞同：0
> 
> 时间：2013-02-13T11:17:33.670
> 
> 标签：php, database, wordpress, webserver, hosting

**服务提供商：** Godaddy

**内容管理系统：** WordPress

**允许的最大数据库大小：** 1GB

最近我从我的托管服务提供商那里收到消息，说我的共享托管数据库最大大小只能是 1GB，他们希望我减少数据库的大小，以免因为数据库过大而损坏它而不会关闭数据库。如果我不能减少它，那么他们要求将其转移到 VPS。但是 VPS 对我来说太贵了，而且我不想更改我的网站 IP 地址，如果我切换到任何其他服务提供商甚至是 VPS，就会发生这种情况。因为人们说更改 IP 地址会影响 SEO。

现在我想知道，是否可以将 WordPress 与两个数据库一起使用，因为我在该服务提供商处拥有更多免费数据库，并且还有近 20 个数据库。因此，如果我可以将一个数据库保留为以前的数据库，而将另一个数据库保留为新数据库，这将解决我的问题。

但这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:22:52.117

您可以使用 HyperDB 来做到这一点。

更多信息可以在这里找到：

> [https://wordpress.stackexchange.com/questions/11154/split-wp-install-between-2-databases](https://wordpress.stackexchange.com/questions/11154/split-wp-install-between-2-databases)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:19:55.500

> 但这可能吗？

这是可能的，但您必须设置一个全新的 Wordpress 安装。

无法将相同的 WP 安装连接到两个数据库。

# javascript - 如何在多个表中搜索？

> ID：14852290
> 
> 赞同：1
> 
> 时间：2013-02-13T11:17:40.797
> 
> 标签：javascript, html

如何在多个表中搜索？我有这段代码，但这仅适用于我的一张桌子。我一共有4张桌子。

这是我在表格中搜索“某物”的代码。

```
$(document).ready(function() {
    $('#search').keyup(function() {
        searchTable($(this).val());
    });
});

function searchTable(inputVal) {
    var table = $('#searchTable');
    table.find('tr').each(function(index, row) {
        var allCells = $(row).find('td');
        if(allCells.length > 0) {
            var found = false;
            allCells.each(function(index, td) {
                var regExp = new RegExp(inputVal, 'i');
                if(regExp.test($(td).text())) {
                    found = true;
                    return false;
                }
            });
            if(found == true) $(row).show();
            else $(row).hide();
        }
    });
} 
```

我已经剥离了我的表格以获取代码，以便它看起来更易于管理

问题在于“search tabe”只运行表 1 而不是剩余的

表格1：

```
<table class="table" id="searchTable"> 
```

表 2：

```
<table class="table" id="searchTable"> 
```

表3：

```
<table class="table" id="searchTable"> 
```

表 4：

```
<table class="table" id="searchTable"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:19:40.737

你的问题是因为ID。每个元素的 ID 必须是唯一的，因此一旦 jQuery 提取了第一个 ID，它就会停止寻找其他任何 ID。

替换`$('#searchTable')`为`$('.table')`，问题应该得到解决。

您还应该为这些表提供唯一的 ID，或者如果不使用这些 ID，则将其完全删除。

From the HTML specification: "There must not be multiple elements in a document that have the same id value." [http://www.w3.org/TR/html-markup/global-attributes.html](http://www.w3.org/TR/html-markup/global-attributes.html)

# socket.io - 捕获 socket.io 中的任何事件

> ID：14852292
> 
> 赞同：1
> 
> 时间：2013-02-13T11:17:44.393
> 
> 标签：socket.io

在我的 socket.io 应用程序中，我碰巧有几个带有类似处理程序的事件。这是一个简化的插图：

```
 socket.on('event1', function (data) {
     print "1";
  });

  socket.on('event2', function (data) {
     print "2";
  }); 
```

等等

有没有办法编写一个事件处理程序，它将捕获此类事件，并使用特定事件名称调用回调？也许是这样的：

```
 socket.on(function (event, data) {
     print event;
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T17:34:54.053

我会用`socket.io-events`它来做*你*想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:29:13.797

我遇到了和你一样的问题。到目前为止，socket.io 不支持此功能。在我的项目中，我将客户端代码从“socket.emit”更改为“socket.send”，并自己进行对象序列化。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T12:22:17.810

```
function foo(data) {
    console.log(data);
}
socket.on('event1', foo);
socket.on('event2', foo); 
```

# seo - 响应式设计和内容重复问题

> ID：14852294
> 
> 赞同：2
> 
> 时间：2013-02-13T11:17:50.910
> 
> 标签：seo, responsive-design

我正在开发响应式设计网站。我在一个 UL 中包含一个大型导航，但想在较小的屏幕上将其转换为两个 UL。从使用媒体查询的技术角度来看，这不会让我遇到问题，而是意味着相同的链接在源中出现了两次。此外，在某些页面上，我们想为较小的屏幕添加压缩内容，同样，我可以将内容的两种变体放入两个 DIV 中，根据设备的不同，总是隐藏一个。

我的问题是关于搜索引擎的，我猜这将被视为内容重复并可能导致处罚。那么最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T04:35:15.847

**重复导航 2 次不会产生真正的问题**：即使 Google 不忽略其中一个导航，也只会意味着这些链接在您的页面中具有更多的重要性。

但是对于**重复的内容**，这**是不好**的，因为另一个原因不仅仅是可能的 SEO 问题：您将提供两次相同的内容，并且会浪费带宽。如果这将是一个真正的问题，那么如果至少有一个人一直都在 CSS 上，那么也许不是`display:none`，但**如果您尝试考虑一种方式，即仅使用 CSS 就可以为不同的显示宽度提供相同的内容，这是一个更好的主意**。

# javascript - 根据索引从列表中选择项目，不包括多个项目

> ID：14852296
> 
> 赞同：2
> 
> 时间：2013-02-13T11:18:05.987
> 
> 标签：javascript, jquery, jquery-selectors, traversal

我想要一个项目列表（每个 tr 中的 td），除了某些列，比如最后一列和第二列。怎么做到呢？我可以装饰特定的 td 以使用某些属性排除，或者我可以仅根据索引排除它们。下面的示例删除了我想要的项目，虽然我实际上想附加到鼠标悬停事件但为简单起见而省略了。

这是获取除最后 2 列之外的所有列的脚本（示例不删除最后 2 列）：

```
$('table').find("tr td:not(:nth-last-child(-n+2))").remove(); 
```

我试过这个从删除中排除第二个和第三个，但它不喜欢逗号分隔的选择器（我认为你可以像这样做一个多重选择器？）：

```
$('table').find("tr td:not(:nth-last-child(2),:nth-last-child(3))").remove(); 
```

这里有一个例子在[jsfiddle](http://jsfiddle.net/m7U2m/)上。

编辑：我正在使用 javascript 1.8.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:24:18.513

您的代码工作正常，您使用的是旧版本的 jQuery (1.7)。[:nth-last-child 选择器](http://api.jquery.com/nth-last-child-selector/)是在 jQuery 1.9 中添加的。升级，它将正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:20:34.020

```
$('table').find("tr td").not(':nth-last-child(2), :nth-last-child(3)'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:24:53.360

试试下面的，

```
$('table').find("tr td::not(:eq(2)):not(:eq(1))"); 
```

我希望它会帮助你。

# macos - 如何以编程方式确定磁盘是否在 OS X 上加密？

> ID：14852298
> 
> 赞同：1
> 
> 时间：2013-02-13T11:18:15.463
> 
> 标签：macos, cocoa

给定一个卷，我如何确定它是否被加密？我发现了像 DADiskCopyDescription() 和 NSURL 的 getResourceValue:forKey:error: 这样的东西，它们提供了大量信息，但不知道卷是否加密。

即使没有用于此的公共 API，从操作系统附带的命令行工具中抓取输出也是可以接受的。我找到的最接近的是“diskutil info /dev/disk0”，但同样没有加密信息。令人讨厌的是，当您单击蓝色信息按钮时，GUI 磁盘实用程序应用程序确实会提供此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:54:22.870

您可以（ab）为此使用 IOKit。请注意，**CoreStorage Encrypted**属性并未在任何地方正式定义，因此这绝对不是公共 API。此外，您需要检查Core Storage 提供给操作系统的整个磁盘对象（例如disk1），而不是Core Storage LV 所在的分区（例如disk0s2）。

```
const char *bsdDisk = "disk1";

DASessionRef session = DASessionCreate(kCFAllocatorDefault);
DADiskRef disk = DADiskCreateFromBSDName(kCFAllocatorDefault, session, "disk1");

io_service_t diskService = DADiskCopyIOMedia(disk);
CFBooleanRef isEncrypted = IORegistryEntryCreateCFProperty(diskService,
                                                           CFSTR("CoreStorage Encrypted"),
                                                           kCFAllocatorDefault,
                                                           0);

fprintf(stdout,
        "%s %s encrypted\n",
        bsdDisk,
        (CFBooleanGetValue(isEncrypted)) ? "is" : "is not");

CFRelease(isEncrypted);
IOObjectRelease(diskService);
CFRelease(disk);
CFRelease(session); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-22T17:46:49.180

看起来此信息可使用`system_profiler -detailLevel basic`.

# c# - 无法打开在 C# 中登录请求的数据库“书籍”

> ID：14852302
> 
> 赞同：0
> 
> 时间：2013-02-13T11:18:30.967
> 
> 标签：c#, sql-server

我正在尝试以编程方式创建一个数据库并在其中创建一个表。
这是我的代码：

```
 string connectionstr = string.Format(@"Data Source=.\sqlexpress;Initial Catalog={0};Integrated Security=True", "books");
        SqlConnection myConn = new SqlConnection(connectionstr);

        DirectoryInfo dir = new DirectoryInfo(@"D:\Data");
        dir.Create();

        string str3 = @"CREATE DATABASE [books] ON  PRIMARY 
        ( NAME = N'books', FILENAME = N'D:\DATA\books.mdf' , SIZE = 3072KB , FILEGROWTH = 1024KB )   
         LOG ON 
        ( NAME = N'books_log', FILENAME = N'D:\DATA\books_log.ldf' , SIZE = 1024KB , FILEGROWTH = 10%)
        IF NOT EXISTS (SELECT name FROM sys.filegroups WHERE is_default=1 AND name = N'PRIMARY')     
        ALTER DATABASE [books] MODIFY FILEGROUP [PRIMARY] DEFAULT";

        SqlCommand myCommand = new SqlCommand(str3, myConn); 
        myConn.Open();
        myCommand.ExecuteNonQuery();
        myConn.Close(); 
```

但我收到错误：

> 无法打开登录请求的数据库“书籍”。登录失败。用户“Master-PC\Master”登录失败。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:22:26.200

好吧，阅读您的查询很明显，书籍数据库在连接时不存在。您尝试使用您的查询创建它。
更改连接字符串并连接到“主”数据库

```
string connectionstr = @"Data Source=.\sqlexpress;Initial Catalog=master;"
                       @"Integrated Security=True"; 
```

然后执行您的查询，（这将创建数据库'books'），关闭连接并使用原始的“InitialCatalog=books”字符串重新打开它

# ruby-on-rails - 使用 ruby 在 Mysql 中保存哈希并读取为哈希

> ID：14852310
> 
> 赞同：1
> 
> 时间：2013-02-13T11:18:53.780
> 
> 标签：ruby-on-rails

我的代码是这个

```
 leads_hash={"509351475764673"=>{"sc"=>0, "ct"=>#<OrderedHash {"2013-02-10"=>1}>, "ml"=>0}, "473882175995429"=>{"sc"=>0, "ct"=>0, "ml"=>0}}
    obj=User.new()
    obj.leads_hash=leads_hash

obj.save! 
```

在我定义的模型中

```
class User < ActiveRecord::Base
 serialize :leads_hash
end 
```

但它保存为字符串我该如何解决这个问题请有人帮我

~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:21:30.050

确保leads_hash在您的迁移中存储为a`text`而不是a 。`string`作为参考，请查看类似的问题：[Using Rails serialize to save hash to database](https://stackoverflow.com/questions/6694432/using-rails-serialize-to-save-hash-to-database/6702790#6702790)

# jquery - 无法在 jQuery 验证引擎中指定自定义错误

> ID：14852312
> 
> 赞同：3
> 
> 时间：2013-02-13T11:19:05.173
> 
> 标签：jquery, jquery-validation-engine

我正在摆弄[此处记录的 jQuery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)

我已经在本地下载了所有的 JS 文件。并创建了一个带有单个必需文本框字段的简单表单。

**问题 1**

我无法为此必需规则指定自定义错误（即使我已指定自定义错误消息选项）。相反，它显示默认消息“此字段是必需的”。我已经在 git 上的示例（[此处](https://github.com/posabsolute/jQuery-Validation-Engine#custom_error_messages)显示）的帮助下编写了此代码，但它不起作用。请指出哪里出错了。（我想使用 JS 对象文字而不是使用等效的 html5 属性。）

我的代码：

```
<html>
<head>      
    <script type="text/javascript" src="scripts/jquery-1.9.0.min.js"></script>      
    <script type="text/javascript" src="scripts/jquery.validationEngine-en.js"></script>        
    <script type="text/javascript" src="scripts/jquery.validationEngine.js"> </script>      
    <link type="text/css" rel="stylesheet"  href="styles/validationEngine.jquery.css"  />   
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    <script type="text/javascript">
            $(document).ready(function(){
                $("#form1").validationEngine({'custom_error_messages' : {                                
                            '#username':{
                                'required':{
                                    'message':"Hey you cannot leave this field blank."
                                }
                            }     
                        }
                    });                         
                });

    </script>
</head>
<body>
    <form id="form1">
        <br /><br />
        <h2>Form 1</h2>
        Username: <input id="#username" type="text" class="validate[required]" ></input> <br />     
    </form>
</body>
</html> 
```

**问题 2**

如何指定要应用于 JS 中的哪个元素的规则，而不是在 html 中指定类值。我宁愿拥有干净不显眼的 html，而不是在 html 中混合验证特定的东西。这可以通过[jQuery Validation 插件](http://docs.jquery.com/Plugins/Validation)实现，如下所示：

```
            $("#register-form").validate({
                规则：{
                    名字：“必填”，
                    姓氏：“必填”，
                    电子邮件： {
                        要求：真，
                        电子邮件：真实
                    },
                    密码： {
                        要求：真，
                        最小长度：5
                    },
                    同意：“需要”
                },
                消息：{
                    firstname: "请输入您的名字",
                    lastname: "请输入您的姓氏",
                    密码： {
                        required: "请提供密码",
                        minlength: "您的密码长度必须至少为 5 个字符"
                    },
                    email: "请输入有效的电子邮件地址",
                    同意：“请接受我们的政策”
                },
                提交处理程序：函数（表单）{
                    form.submit();
                }
            });

```

jQuery Validation 引擎可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T19:12:32.677

是的，有可能：[链接](https://github.com/karol-gontarski/jQuery-Validation-Engine#standard-html5-attribute-for-error-message)

例子：

```
<input type="email" name="email" id="email" data-validation-engine="validate[required,custom[email]]"
    data-errormessage-value-missing="Email is required!" 
    data-errormessage-custom-error="Let me give you a hint: someone@nowhere.com" 
    data-errormessage="This is the fall-back error message."/> 
```

另请注意，由于 JQuery 1.9 过去版本中的许多功能现在已被删除或弃用，并且几天前添加了修复，因此您可能需要下载最新版本：[jQuery.validationEngine v2.6.1](https://github.com/karol-gontarski/jQuery-Validation-Engine.git)

**编辑** 不知道他们是否更正了它，但在 .js 文件中替换

```
line28 : .live(... 
```

经过

```
line 28 : .on(... 
```

live 自 jQuery 1.9 起已被移除

**编辑：**

你犯了一个小错误：

```
<input id="**#**username" type="text" class="validate[required]" ></input> <br /> 
```

**#**应该在那里：

```
<input id="username" type="text" class="validate[required]" ></input> <br/> 
```

# c - 我们可以使用运算符“&”内联 GCC ARM 程序集的地址吗？

> ID：14852314
> 
> 赞同：1
> 
> 时间：2013-02-13T11:19:19.387
> 
> 标签：c, gcc, assembly, arm

我们可以使用运算符“&”内联 GCC ARM 程序集的地址吗？如果是，那么我有一个结构 core_regx，我需要将该结构的成员 r0 的地址传递到下面提到的代码中：

```
asm volatile("ldr r3, [%0,#0]":: "r" (&(core_reg->r0))); 
```

请检查此代码是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:46:04.303

是的，你当然可以使用**&**。但是，我建议您的汇编器说明符可能有一些问题和更好的选择。

```
asm volatile("ldr r3, %0":: "m" (core_reg->r0) : "r3"); 
```

您绝对应该将**r3**添加到 clobber 列表中。此外，说明`"m"`符可能更好。如果`core_reg`已经在 中`r0`，编译器可以使用`r0`成员的偏移量并生成代码，例如，

```
 add r0, r0, #12    ; assuming r0 is core_reg.
       ldr r3, [r0] 
```

`core_reg`编译器知道和之间的关系`core_reg->r0`。至少`"m"`适用于某些版本的`arm-xxx-gcc`. 在编译器生成的代码上运行`objdump --disassemble`以验证它正在执行您想要的操作。

**编辑：** GCC 手册有很多信息，例如[Gcc assembler constraints](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Simple-Constraints.html)、[Machine specific](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Machine-Constraints.html)和[General Info](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html)。网上有很多教程，比如[ARM assembler cookbook](http://www.ethernut.de/en/documents/arm-inline-asm.html)，是最好的之一。

# android - ADT 不会重新创建 R.java

> ID：14852321
> 
> 赞同：0
> 
> 时间：2013-02-13T11:19:47.513
> 
> 标签：android, eclipse, adt

我有一个相当大的项目要处理。在我导入它并修复项目属性后，我发现 Eclipse 不会创建 R.java。我尝试过的事情：

*   清理，重建，取消选中“自动构建”，再次重建
*   删除 gen 文件夹（Eclipse 重新创建它但没有 R.java）
*   删除gen文件夹，手动添加（同上，创建了BuildConfig，但没有R）
*   运行 Android Lint 并检查错误（一些性能警告但没有错误）

每次的结果都是一样的：

![在此处输入图像描述](../Images/09c6fbeea28fdb65b730d32864e6a820.png)

我不知道那里到底出了什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:31:39.807

您使用 SVN 作为源代码控制吗？Android 预编译器现在因为一些 SVN 文件而崩溃，解决方案是将 SVN 从 1.6 升级到 1.7，至少在我的情况下，这样做了......如果不寻找没有扩展名的文件（图像而不是 image.png ) 他们往往会混淆他...

详情请看我的[博文](https://medium.com/nemanja-kovacevic/svn-android-pre-compiler-and-mac-os-x-pita-combination-beaeff119a92)...

# android - 使用按钮和错误的 GPS 数据调用方法

> ID：14852327
> 
> 赞同：0
> 
> 时间：2013-02-13T11:20:04.193
> 
> 标签：android, button, gps

我有一个使用方法从一开始就记录数据的应用程序。我还有一个按钮，现在只显示祝酒词，但我希望它开始记录。

主要问题是，我如何启动一个方法，只使用按钮？

我的 GPS 也将我置于坦桑尼亚的 -9, 53。我不在坦桑尼亚，我在很远的地方。

任何帮助都会很棒。

谢谢。

**代码**

```
 private OnClickListener startListener = new OnClickListener() {
    public void onClick(View v) {

      Toast.makeText(getApplicationContext(), "The Start button was clicked.", Toast.LENGTH_LONG).show();

    }

public void onLocationChanged(Location arg0) {
    double Longitude = arg0.getLongitude();
    double Latitude = arg0.getLatitude();
    String Long = new DecimalFormat("##.##").format(Longitude);
    String Lat = new DecimalFormat("##.##").format(Latitude);
    location = Long + "," + Lat;
    locationText.setText(location);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:20:45.843

问题2的答案：你交换了经纬度，53，-9在爱尔兰利默里克附近。
对于问题 1：基础教程将向您展示如何调用由按钮单击触发的方法。

# node.js - node.js 奇怪的“删除”语法

> ID：14852329
> 
> 赞同：1
> 
> 时间：2013-02-13T11:20:06.477
> 
> 标签：node.js, mongodb, mongoose

删除是做什么用的？我以前没见过这样的语法，有人可以帮助我吗？代码片段非常简单，它用于 node.js ， mongoose ， mongodb

```
function _update(game, callback) {
    if (!game) {
        callback(new Error("Game must be provided."));
        return;
    }
    if (!game.gameId) {
        callback(new Error("Game id should be provided"));
        return;
    }

    var updates = (game instanceof Game) ? game.toObject() : game;
    delete updates._id;
    updates.modifiedDate = new Date();

    Game.findOneAndUpdate({"_id": game.id, "deleted" : {"$ne": true}}, updates, callback);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:22:32.120

`delete`在 JavaScript[中从对象中删除属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)。

```
var game = {
    id: 1
}

console.log(game);  // Object {id: 1}

delete game.id

console.log(game);  // undefined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:23:51.390

它用于从对象中删除属性。所以在这种情况下，它会从更新中删除 _id 属性

# sql - 搜索包含特定值的所有表

> ID：14852331
> 
> 赞同：1
> 
> 时间：2013-02-13T11:20:08.800
> 
> 标签：sql, sql-server

我想搜索所有包含特定值的表和列。

喜欢 ，

```
Select * from [All_Tables] where [AnyColumn] = 'MyValue' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:29:20.237

如果您使用的是 PL/SQl 工具，那么您可以搜索您正在寻找的对象。该工具提供了 gui，您可以在其中输入您要查找的关键字。比如说，在您的情况下，搜索“MyValue”。

# html - 无法让滚动条出现在 iframe 上

> ID：14852333
> 
> 赞同：0
> 
> 时间：2013-02-13T11:20:12.633
> 
> 标签：html, css, lightbox

我在网页上有一个信息弹出窗口。它包含一个显示信息的 iframe。我似乎无法显示垂直滚动条，因此未显示某些内容。

这是弹出窗口的 html，取自 chrome 开发工具（大概是在 jquery lightbox 挥动它的魔杖之后）：

```
 <div id="lightbox" style="z-index: 10500; top: 1030.6px; left: 0px;">
        <div id="outerImageContainer" style="background-color: rgb(255, 255, 255); width: 620px; display: block; height: 320px;">
             <div id="modalContainer" style="display: none; padding: 10px;"></div>
             <div id="frameContainer" style="padding: 10px;">
                 <iframe id="lightboxFrame" style="z-index: 10500;" frameborder="0" width="600px" height="300px" scrolling="no" src="Info.html?lang=grch&amp;item=436"></iframe>
            </div>
          <div id="imageContainer" style="display: none; padding: 10px;">
               <img id="lightboxImage" style="display: none;">
               <div id="hoverNav" style="display: none; z-index: 10500;">
                    <a id="prevLink" href="#" style="padding-top: 10px; display: none; height: 300px;"></a>
                    <a id="nextLink" href="#" style="padding-top: 10px; display: none; height: 300px;"></a>
               </div>
          </div>
          <div id="loading" style="z-index: 10500; display: none;">
               <a href="#" id="loadingLink"></a>
          </div>
      </div>
      <div id="imageDataContainer" class="clearfix" style="background-color: rgb(255, 255, 255); display: block; width: 620px;">
          <div id="imageData"><div id="frameHoverNav" style="display: block; z-index: 10500;">
            <a id="framePrevLink" href="#" style="padding-top: 10px; display: none;"></a>
            <a id="frameNextLink" href="#" style="padding-top: 10px; display: none;"></a>
        </div>
        <div id="imageDetails">
            <span id="caption" style="z-index: 10500;">&nbsp;</span>
            <span id="numberDisplay" style="display: none;"></span>
        </div>
        <div id="bottomNav">
            <a id="bottomNavClose" href="#" style="background-color: rgb(255, 255, 255);">schließen</a>
        </div>
    </div>
</div>
</div> 
```

我试过的：

*   从 iframe 中删除 scrolling="no"
*   在 iframe 上设置 scrolling="yes"
*   向灯箱元素和/或 iframe 元素添加 CSS 样式：溢出：自动
*   添加溢出：滚动到灯箱和/或 iframe 元素。
*   向所有元素添加溢出：自动
*   添加溢出：滚动到所有元素
*   在我的屏幕上说脏话
*   喝杯咖啡
*   在 SO 上发帖

我不确定这里的溢出属性是什么。引用用户的话，“它在 IE 中完美显示”，但在 FF 或 Chrome 中却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:04:37.693

尝试使用`scrolling="yes"`：

```
 <div id="lightbox" style="z-index: 10500; top: 1030.6px; left: 0px;">
        <div id="outerImageContainer" style="background-color: rgb(255, 255, 255); width: 620px; display: block; height: 320px;">
             <div id="modalContainer" style="display: none; padding: 10px;"></div>
             <div id="frameContainer" style="padding: 10px;">
                 <iframe id="lightboxFrame" style="z-index: 10500;" frameborder="0" width="600px" height="300px" scrolling="yes" src="http://en.wikipedia.org/wiki/Main_page"></iframe>
            </div>
          <div id="imageContainer" style="display: none; padding: 10px;">
               <img id="lightboxImage" style="display: none;">
               <div id="hoverNav" style="display: none; z-index: 10500;">
                    <a id="prevLink" href="#" style="padding-top: 10px; display: none; height: 300px;"></a>
                    <a id="nextLink" href="#" style="padding-top: 10px; display: none; height: 300px;"></a>
               </div>
          </div>
          <div id="loading" style="z-index: 10500; display: none;">
               <a href="#" id="loadingLink"></a>
          </div>
      </div>
      <div id="imageDataContainer" class="clearfix" style="background-color: rgb(255, 255, 255); display: block; width: 620px;">
          <div id="imageData"><div id="frameHoverNav" style="display: block; z-index: 10500;">
            <a id="framePrevLink" href="#" style="padding-top: 10px; display: none;"></a>
            <a id="frameNextLink" href="#" style="padding-top: 10px; display: none;"></a>
        </div>
        <div id="imageDetails">
            <span id="caption" style="z-index: 10500;">&nbsp;</span>
            <span id="numberDisplay" style="display: none;"></span>
        </div>
        <div id="bottomNav">
            <a id="bottomNavClose" href="#" style="background-color: rgb(255, 255, 255);">schließen</a>
        </div>
    </div>
</div> 
```

在这里查看小提琴：http: [//jsfiddle.net/f8yMB/](http://jsfiddle.net/f8yMB/)

如果不是，那么问题出在`info.html`页面上。

# netbeans - 编辑器内的行

> ID：14852334
> 
> 赞同：1
> 
> 时间：2013-02-13T11:20:17.797
> 
> 标签：netbeans

我试图从我的 Netbeans 编辑器视图中删除这一行。我不知道它的用途，我觉得它令人不安。

我怎样才能删除它？（在颜色设置中找不到）

这是一张图片：

![在此处输入图像描述](../Images/4e250bd4dd1a45fbb7b9de3764e35bbd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:46:36.823

您必须将右边距设置设置为 0。

![在此处输入图像描述](../Images/94cf0b5fda00c5afcd33ab46ddb26a64.png)

# c# - MVC项目中的授权

> ID：14852335
> 
> 赞同：2
> 
> 时间：2013-02-13T11:20:19.900
> 
> 标签：c#, asp.net-mvc, model-view-controller

我在 MVC 项目中有登录页面，我创建了授权配置。

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880"  defaultUrl="~/Home/Index"/>
    </authentication>

  <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web> 
```

如何在注册页面访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T14:27:40.100

根据您使用的 MVC 版本，我现在在 MVC3/4 中看到的常见做法是通过添加`Authorize()`为全局过滤器，然后授予对一些操作的访问权限，而不是限制对特定操作的访问，而是限制对所有操作的访问使用该属性选择操作`AllowAnonymous()`以充当不需要保护的操作的白名单。（如登录、注册等）。

**全球.asax**

```
protected void Application_Start()
{
    filters.Add(new AuthorizeAttribute());
} 
```

**AccountsController.cs**

```
[AllowAnonymous]
public ActionResult Login()
{
    //Perform login...
} 
```

然后你的**web.config**就只有这个

```
<authorization>
    <allow users="*" />
</authorization> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:01:44.880

默认情况下，您应该转到控制器的`Register()`操作方法`Account`

> // GET: /帐户/注册

根据您的 web.config：尝试将其添加到 web.config 之前的`<system.web>`标记。

```
 <location allowOverride="true" path="Account/Register">
    <system.web>
      <authorization>
        <allow users="?" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-29T17:55:15.297

对 Nick Albrecht 的 +1，但我发现“过滤器”有歧义，所以我不得不进一步挖掘。

实际上，这段代码似乎 `filters.Add(new AuthorizeAttribute());` 属于 App_Start

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new AuthorizeTokens.AuthorizeWithMessage());
    }
} 
```

并`FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)`在 Application_Start 中调用。

# iphone - xcode 子项目中的刹车点不起作用

> ID：14852336
> 
> 赞同：0
> 
> 时间：2013-02-13T11:20:25.480
> 
> 标签：iphone, ios, xcode, static, subproject

我们有静态库项目和其他“示例”项目。我将静态库项目作为子项目添加到“示例”项目以及目标依赖项。当我运行“样本”时，刹车点正常工作，但在子项目（静态库）中却没有。是否有可能以某种方式调试我的子项目，或者如果它是静态库则不可能？

**更新** 固定：

![在此处输入图像描述](../Images/096685bad031be88dd7d468b74cfd542.png)

由于某些原因，“生成调试符号”标志设置为 NO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:39:33.790

创建一个工作区并将其作为单独的项目。现在您需要在示例项目中添加静态库。因此，从子项目产品文件夹（创建您的库的位置）添加库作为参考。它也适用于调试，并且每当您为静态库构建时，更改也会反映在示例项目中。

# sql - 如何在SQL中连接两个具有相同列名的表

> ID：14852342
> 
> 赞同：-2
> 
> 时间：2013-02-13T11:20:34.417
> 
> 标签：sql

我的问题是，我有 2 个表 - 一个名为 的原始表`sequence`和一个名为 的临时表`tempt1`。`seq`默认情况下，表中的列的`sequence`所有值都为空。

该`sequence`表有以下列：

```
backuptype varchar(20),
backuptime datetime,
seq int default null 
```

现在在`tempt1`表中，我在列中有一些值`seq`，我需要在`seq`表的列中更新这些值`sequence`。

请帮我加入这两个列值并更新主表`sequence`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:27:51.697

对于`Sql-Server`，如果两个表相互关联，那么您可以加入它们并更新；

```
Update s
Set s.seq = t.seq
From sequence s join temp1 t 
     on s.keyColumn = t.relatedColumn
where not t.seq is null and s.seq is null 
```

# jquery - 带有缩略图的Listview中的jquery mobile Autodividers

> ID：14852350
> 
> 赞同：2
> 
> 时间：2013-02-13T11:20:47.243
> 
> 标签：jquery, listview, mobile, image, divider

感谢 jquery mobile，我想创建一个动态列表视图。它可以工作，但是如果我在列表视图的 li 中放置任何缩略图，则不再有自动分隔符。任何想法 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:42:12.480

您必须使用列表视图的 autodividersSelector。

看看：[jquery mobile listview autodividersSelector](https://stackoverflow.com/questions/14743781/jquery-mobile-listview-autodividersselector)

# twitter-bootstrap - 可折叠引导，显示第一个元素

> ID：14852352
> 
> 赞同：13
> 
> 时间：2013-02-13T11:20:50.600
> 
> 标签：twitter-bootstrap, collapse, bootstrap-accordion

我想展示这个可折叠手风琴的第一个元素。我在互联网上做了一些研究，但徒劳无功

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>

<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne" >
        Aller au dossier personnel d'un agent
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse" style="height: 0px; ">
      <div class="accordion-inner">
        <form action="goToAgent.do" method="post">
          <p align="center">
            <input type="hidden" value="identite" name="retour">
            <label for="nomPrenom" >
              Entrer le nom complet de l'agent:
            </label>
            <input type="text" name="nomPrenom" class="typeahead" /> <br>
            <input type="submit" value="appliquer" class="btn btn-info" />
        </form>
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Ajout d'un nouveau fonctionnaire
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        <!-- lorem -->
      </div>
    </div>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T11:25:31.557

我不认为您已经获得了手风琴工作所需的所有 HTML，除非您没有将其全部粘贴到上面。

Bootstrap 文档的第一个示例将第一个元素设置为打开：

[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)（这些文档适用于 v2.3.2，不再受到官方支持。）

我认为是“in”类将其设置为最初打开。

```
<div class="accordion" id="accordion2">
<div class="accordion-group">
<div class="accordion-heading">
<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
Collapsible Group Item #1
</a>
</div>
<div id="collapseOne" class="accordion-body collapse in">
<div class="accordion-inner">
Anim pariatur cliche...
</div>
</div>
</div>
<div class="accordion-group">
<div class="accordion-heading">
<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
Collapsible Group Item #2
</a>
</div>
<div id="collapseTwo" class="accordion-body collapse">
<div class="accordion-inner">
Anim pariatur cliche...
</div>
</div>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-13T11:29:54.747

v4 更新：

`.show`可以在元素上使用该类`.collapse`来打开它。

```
<div class="accordion" id="accordion-parent">
    <a data-toggle="collapse" href="#collapseOne"></a> 
    <div id="collapseOne" class="collapse show" data-parent="#accordion-parent"></div>
    <a data-toggle="collapse" href="#collapseTwo"></a> 
    <div id="collapseTwo" class="collapse" data-parent="#accordion-parent"></div>
</div> 
```

这是使用 v4 的相同示例：[Demo v4 (jsfiddle)](http://jsfiddle.net/Sherbrow/yYuRz/139/)

* * *

引导程序 v2

如果您将`.in`类添加到`.collapse`，它将保持打开状态：

```
<div class="accordion-group">  
  <div class="accordion-heading">  
    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">  
     Ajout d'un nouveau fonctionnaire
    </a>  
  </div>  
  <div id="collapseTwo" class="accordion-body collapse in"> 
    <div class="accordion-inner">
    </div>  
  </div>  
</div> 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/yYuRz/)

* * *

这是带有简化标记的演示：http: [//jsfiddle.net/Sherbrow/yYuRz/2/](http://jsfiddle.net/Sherbrow/yYuRz/2/)

如果要显示它，您确实需要`style="height: 0px;"`从元素中删除它。`.collapse`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-05T14:24:04.640

您还可以在第一个折叠元素上触发 clic

```
$("#accordion a:first").trigger("click"); 
```

# r - 如何在语料库中手动设置文档 ID？

> ID：14852357
> 
> 赞同：2
> 
> 时间：2013-02-13T11:21:03.190
> 
> 标签：r, tm

我正在从数据框创建一个 Copus。我将其作为 a 传递，因为`VectorSource`我只想将一列用作文本源。这项工作发现但是我需要语料库中的文档 ID 来匹配数据框中的文档 ID。文档 ID 存储在原始数据框中的单独列中。

```
df <- as.data.frame(t(rbind(c(1,3,5,7,8,10), 
                        c("text", "lots of text", "too much text", "where will it end",         "give peas a chance","help"))))
colnames(df) <- c("ids","textColumn")
library("tm")
library("lsa")
corpus <- Corpus(VectorSource(df[["textColumn"]])) 
```

运行此代码会创建一个语料库，但文档 ID 为 1-6。有什么方法可以创建文档 ID 为 1、3、5、7、8、10 的语料库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-23T10:26:44.830

我知道@user1098798 可能已经晚了，但是有一种方法可以在创建语料库时直接指定 ID。您需要将数据加载为`DataframeSource()`并将映射添加到列：

```
corpus = VCorpus(DataframeSource(df), readerControl = list(reader = readTabular(mapping = list(content = "textColumn", id = "ids")))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T11:28:32.620

好吧，一种简单但不是很优雅的方式将您的 id 分配给您的文档，可能如下：

```
for (i in 1:length(corpus)) {
   attr(corpus[[i]], "ID") <- df$ids[i]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T05:09:13.337

这是解决此问题的**qdap**方法，可以在没有循环的情况下处理它：

从一开始就使用[qdap 版本 >= 1.1.0](http://trinkerrstuff.wordpress.com/2014/02/23/qdap-1-1-0-released-on-cran/)将数据帧转换为 a`Corpus`并且将自动添加 ID 标签。

```
with(df, as.Corpus(textColumn, ids))

## <<VCorpus>>
## Metadata:  corpus specific: 0, document level (indexed): 3
## Content:  documents: 6

## Look around a bit
meta(with(df, as.Corpus(textColumn, ids)), tag="id")
inspect(with(df, as.Corpus(textColumn, ids))) 
```

# c - C中的哈希算法将16个字节值映射到2个字节值

> ID：14852361
> 
> 赞同：8
> 
> 时间：2013-02-13T11:21:13.990
> 
> 标签：c, algorithm, hashmap

我正在使用用 C 语言编程的微控制器进行电子项目。

我需要将一些 ID 及其相关信息存储在闪存 (SD) 中。这些 ID 长 16 个字节，因此有 2^128 个可能的值。尽管它们是 16 个字节，但只会使用 50000 个（唯一）值。在 SD 中存储所有可能的 (2^128) ID 在物理上是不可能的。

我只能存储 50000 个使用过的值，但是我必须遍历所有（最坏的情况）它们才能找到我需要的值。此外，必须为它们中的每一个计算一个 16 字节的值比较，这使得它非常慢。

所以我想我需要某种（哈希？）函数，将 2^128 值映射到 50000（将 16 个字节映射到 2 个字节）。很明显，一些原始值将映射到相同的值/索引。这个想法是，当我得到一个 ID 时，我应用一个哈希函数，它给我一个介于 0 和 ~50000 (0-65535) 之间的索引。使用该索引，我可以直接访问存储 ID 及其相关信息的 SD 扇区。正如我已经指出的那样，该索引将引用内存中的位置，由于某些不同的 ID 映射到相同的索引值，因此各种 ID 将共存。我必须找到正确的 ID，但它只需要几个比较而不是 50000 个原始 ID。

任何想法/意见将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:19:48.323

当然 Mat's 很好，但是，通过使用素数应该会导致更少的碰撞 where `uuid[x] == uuid[y]`(and `x!=y`)

```
uint32_t uuid[4];

uint16_t hash = 0;
for(i = 0; i < 4; i++)
{
   // hash *= 31; //next line does this, note 31 is a prime
   hash = (hash << 5) - hash;
   hash += (uuid[i] & 0xffff) ^ (uuid[i] >> 16);
} 
```

或者这个版本更好，因为它减少了前 16 位和后 16 位的异或匹配的冲突。

```
uint16_t hash = 0;
for(i = 0; i < 4; i++)
{
   hash = (hash << 5) - hash; //(*=31)
   hash += uuid[i] & 0xffff;
   hash = (hash << 5) - hash; //(*=31)
   hash += uuid[i] >> 16;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:08:58.197

由于 ID 长 16 个字节，我猜它存储在 ASCII 字符串中，所以 ELFhash 可能有效。

```
int ELFhash(char *key) {
    unsigned long h = 0;
    while(*key) {
        h = (h << 4) + *key++;
        unsigned long g = h & 0xf0000000L;
        if (g) h ^= g >> 24;
        h &= -g;
    }
    return h & M;
} 
```

其中 M 是小于 65536 或 50000 的素数。

很多ID字符串的前缀很可能是相同的，因为它们代表特定的meaaing，所以你应该更加小心防止冲突，否则链表会很长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:36:49.740

只需使用 16 MSB 的实际 ID。这很愚蠢，但是有了您的详细信息，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:28:55.413

假设您的 128 位值中的位是“均匀分布的”，您可以简单地执行以下操作：

```
 uint32_t uuid[4];

 uint16_t hash = 0;
 for(i = 0; i < 4; i++)
 {
     hash ^= (uuid[i] & 0xffff) ^ (uuid[i] >> 16);
 } 
```

可能还有其他更聪明的方法，但是这种方法非常简单，并且可能效果很好。

# selenium - 我们如何使用 chrome 浏览器和 capybara+ selenium webdriver

> ID：14852365
> 
> 赞同：2
> 
> 时间：2013-02-13T11:21:25.980
> 
> 标签：selenium, cucumber, capybara

我正在使用 gems capybara (2.0.2) cucumber (1.2.1) selenium-webdriver (2.29.0)

在我的 env.rb 中

```
Capybara.register_driver :selenium do |app|
    Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

Capybara.javascript_driver = :selenium_chrome 
```

它在现有 chrome 窗口中打开空白的新 chrome 选项卡，然后我的测试用例给出错误。

```
end of file reached (EOFError) 
```

但我的测试用例在 Firefox 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T16:39:53.373

这是一个[支持文件要点](https://gist.github.com/rosskevin/5937888)，它将为您提供所需的一切，并为您的 javascript/selenium/webkit/headless 设置提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T06:57:11.250

试试这个：

```
Capybara.register_driver :selenium do |app|
  require 'selenium-webdriver'
  profile = Selenium::WebDriver::Firefox::Profile.from_name 'selenium'
  capabilities = Selenium::WebDriver::Remote::Capabilities.firefox(:firefox_profile => profile)
  Capybara::Selenium::Driver.new(app, { :browser => :remote, :desired_capabilities => capabilities })
end 
```

# c++ - Xcode 4.6 / Clang 4.2 找不到 C++11 头文件

> ID：14852369
> 
> 赞同：5
> 
> 时间：2013-02-13T11:21:31.187
> 
> 标签：c++, xcode, c++11, clang, std

我正在尝试在 iOS 项目中包含一些 C++11 标头，但 Xcode/Clang 找不到它们。我正在尝试包括`<memory>`，`<functional>`以及其他一些。但它抱怨它在构建过程中找不到它们（尽管我右键单击并“跳转到定义”加载文件......）。如何让我的项目使用 C++11 头文件？

> 找不到词法或预处理器问题“内存”文件 找不到
> 词法或预处理器问题“功能”文件

我的项目设置是：

> C++ 语言方言 = C++11 [-std=c++11]
> C++ 标准库 = libc++（支持 C++11 的 LLVM C++ 标准库）

尝试包含标头的文件`.h`用于模板化类和实现`.h`中包含的类`.mm`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T13:18:34.973

事实证明，Clang 的错误消息没有帮助：这些文件的根包含是一个`.m`文件，编译为 Objective-C，所以我将它重命名为`.mm`, 编译为 Objective-C++，它开始工作。

# wpf - 在 wpf 数据网格中键入所选项目的列表

> ID：14852371
> 
> 赞同：8
> 
> 时间：2013-02-13T11:21:31.627
> 
> 标签：wpf, mvvm, datagrid, selecteditem

I send the selected items to a specific command when the selection changes (each item is a class X)

我将它们作为对象如何将其转换为列表？

我试过了：

```
1\. IList<x>  SelectedItemsList = obj as ObservableCollection<x>;

2\. IList<x>  SelectedItemsList = obj as IList<x>;

3\. List<x>  SelectedItemsList = obj as List<x>; 
```

它没有帮助。

这种类型的列表：`System.Windows.Controls.SelectedItemCollection`我想将其转换为我的列表：`ObservableCollection<x>/IList<x>/List<x>`（ViewModel 无法识别 wpf 的控件列表）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T11:29:20.677

该`SelectedItems`属性的类型是非泛型[IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)。您不能简单地将其转换为通用[IList<T>](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)。

但是，您可以使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)来获取一个`IEnumerable<x>`或一个`List<x>`.

```
using System.Linq;

IList list = obj as IList;
IEnumerable<x> SelectedItemsList = list.Cast<x>();
// or 
List<x> SelectedItemsList = list.Cast<x>().ToList(); 
```

# android - 一个图像跟踪器上的两个 3d 模型

> ID：14852373
> 
> 赞同：-3
> 
> 时间：2013-02-13T11:21:40.093
> 
> 标签：android, android-ndk, unity3d, augmented-reality, vuforia

我正在 Vuforia Qualcomm SDK 上开发一个 Android AR aap，为此我必须制作动画，其中一个模型会跳跃并粘在另一个模型上，类似[这样](http://www.youtube.com/watch?feature=endscreen&NR=1&v=g714VOyUpDc)的东西。每当应用程序检测到标记时，这必须发生在标记上。

我有两个问题：
1：应该使用什么工具来为模型制作动画，就像视频中显示的那样。
2：如何在一个标记（目标）上渲染两个模型，即。就像视频中的心和泰迪一样。

任何线索或链接都会有很大帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:52:51.477

[该视频](http://www.youtube.com/watch?v=R01m6A-Wli4)表明这是可能的。如果我理解正确，当网络摄像头（和代码）发现标记时，它将创建一个对象（例如视频中的龙或示例中的心脏）。如果该对象包含动画对象，并且您已勾选`Animate on create`（或类似的，我无法在工作中启动 Unity，所以我必须稍后检查），动画将开始。我想这就是你在第一点问的。如果没有，请详细说明。你不会问你想要什么作为目标。您想为您的对象设置动画吗？您想在开始时为您的对象设置动画吗？您想在标记上放置带有动画的对象吗？

对于第二部分，您可以在视频中看到`ImageTarget`正在使用的对象。在那里，他放置了一个动画对象（龙）和第二个对象，火焰。在您的情况下，您可以将 Heart-object 和 Teddy-object 添加到相同的`ImageTarget`.

# facebook - asmack 中的 MessageListener 以集成无法绑定到任何小部件的 facebook 聊天

> ID：14852374
> 
> 赞同：1
> 
> 时间：2013-02-13T11:21:40.737
> 
> 标签：facebook, xmpp, asmack

我在一个 android 应用程序中工作，我想在其中集成 facebook 聊天。为此，我使用 asmack-jse-buddycloud-2010.12.11。我能够发送和接收聊天。但我无法将它绑定到任何视图（Toast、ListView 等）。收到的消息在 MessageListener 中，我无法在任何视图中绑定它。

请查看我的代码：

```
 public void SentFBMessage(String message) {

    Chat newChat = mObjChatManager.createNewChat(
                    "-100001303337607@chat.facebook.com", new MessageListener() {
        public void processMessage(Chat chat, Message message) {
            Log.e("Received message: ", message.getBody());
               **Toast.makeText(getApplicationContext(),message.getBody(),Toast.LENGTH_LONG).show();**}
        });
    try {
            newChat.sendMessage(message);
            } catch (XMPPException e) {
                System.out.println("Error Delivering block");
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T02:50:22.717

基本上你的问题是你每次都在制作新的 MessageListener 。将侦听器放在自己的类中，每次都添加它。

```
connection.getChatManager().addChatListener(new ChatManagerListener() {
    @Override
    public void chatCreated(Chat chat, boolean b) {
        chat.addMessageListener(messageListener);
    }
}); 
```

# android - 如何将滚动视图设置为我的布局？

> ID：14852379
> 
> 赞同：1
> 
> 时间：2013-02-13T11:21:47.540
> 
> 标签：android, android-layout, scrollview

我是安卓新手。。

如何将滚动视图设置为 mu 布局？请指导我..

在我的布局中，我有四个 textview 四个单选按钮和下一个，上一个按钮，所以对于所有这些我完全想设置滚动视图。如何实现这个？

> ```
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
> xmlns:tools="http://schemas.android.com/tools"
> android:layout_width="match_parent"
> android:layout_height="match_parent"
> tools:context=".Quesans" >
>  <RadioGroup
>      android:id="@+id/rdgroup"
>      android:layout_width="fill_parent"
>      android:layout_height="wrap_content"
>      android:layout_alignParentLeft="true"
>      android:layout_below="@+id/que_txt"
>      android:layout_marginTop="38dp"
>      android:orientation="vertical" >
>      <RadioButton android:id="@+id/RB1" android:text="button1"/>
>      <RadioButton android:id="@+id/RB2" android:text="button2"/>
>      <RadioButton android:id="@+id/RB3" android:text="button3"/>
>      <RadioButton android:id="@+id/RB4" android:text="button4"/>
>  </RadioGroup>
>  <Button
>      android:id="@+id/prv_btn"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignBaseline="@+id/nxt_btn"
>      android:layout_alignBottom="@+id/nxt_btn"
>      android:layout_alignParentLeft="true"
>      android:text="Previous" />
>  <Button
>      android:id="@+id/nxt_btn"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignParentRight="true"
>      android:layout_below="@+id/rdtxt"
>      android:layout_marginRight="22dp"
>      android:layout_marginTop="34dp"
>      android:text="Next" />
>  <TextView
>      android:id="@+id/rdtxt"
>      android:layout_width="fill_parent"
>      android:layout_height="wrap_content"
>      android:layout_alignParentLeft="true"
>      android:layout_below="@+id/rdgroup"
>      android:layout_marginTop="17dp"
>      android:text="Nothing is picked" 
>      android:textColor="#0000FF"/>
>  <TextView
>      android:id="@+id/focusarea"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignRight="@+id/nxt_btn"
>      android:layout_below="@+id/nxt_btn"
>      android:layout_marginRight="20dp"
>      android:layout_marginTop="25dp"
>      android:text="" />
>  <TextView
>      android:id="@+id/soltxt"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignBaseline="@+id/focusarea"
>      android:layout_alignBottom="@+id/focusarea"
>      android:layout_alignParentLeft="true"
>      android:layout_marginLeft="32dp"
>      android:text="" />
>  <TextView
>      android:id="@+id/que_txt"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignParentLeft="true"
>      android:layout_alignParentTop="true"
>      android:layout_marginLeft="10dp"
>      android:layout_marginTop="25dp"
>      android:text="TextView" /> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:29:32.857

像这样设置它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".Quesans" >
<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="vertical"
    >
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
 <RadioGroup
     android:id="@+id/rdgroup"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/que_txt"
     android:layout_marginTop="38dp"
     android:orientation="vertical" >
     <RadioButton android:id="@+id/RB1" android:text="button1"/>
     <RadioButton android:id="@+id/RB2" android:text="button2"/>
     <RadioButton android:id="@+id/RB3" android:text="button3"/>
     <RadioButton android:id="@+id/RB4" android:text="button4"/>
 </RadioGroup>
 <Button
     android:id="@+id/prv_btn"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/nxt_btn"
     android:layout_alignBottom="@+id/nxt_btn"
     android:layout_alignParentLeft="true"
     android:text="Previous" />
 <Button
     android:id="@+id/nxt_btn"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentRight="true"
     android:layout_below="@+id/rdtxt"
     android:layout_marginRight="22dp"
     android:layout_marginTop="34dp"
     android:text="Next" />
 <TextView
     android:id="@+id/rdtxt"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/rdgroup"
     android:layout_marginTop="17dp"
     android:text="Nothing is picked" 
     android:textColor="#0000FF"/>
 <TextView
     android:id="@+id/focusarea"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignRight="@+id/nxt_btn"
     android:layout_below="@+id/nxt_btn"
     android:layout_marginRight="20dp"
     android:layout_marginTop="25dp"
     android:text="" />
 <TextView
     android:id="@+id/soltxt"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/focusarea"
     android:layout_alignBottom="@+id/focusarea"
     android:layout_alignParentLeft="true"
     android:layout_marginLeft="32dp"
     android:text="" />
 <TextView
     android:id="@+id/que_txt"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_marginLeft="10dp"
     android:layout_marginTop="25dp"
     android:text="TextView" />
</RelativeLayout>
</ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:23:46.807

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
>

<RelativeLayout 
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Quesans" >
 <RadioGroup
     android:id="@+id/rdgroup"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/que_txt"
     android:layout_marginTop="38dp"
     android:orientation="vertical" >
     <RadioButton android:id="@+id/RB1" android:text="button1"/>
     <RadioButton android:id="@+id/RB2" android:text="button2"/>
     <RadioButton android:id="@+id/RB3" android:text="button3"/>
     <RadioButton android:id="@+id/RB4" android:text="button4"/>
 </RadioGroup>
 <Button
     android:id="@+id/prv_btn"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/nxt_btn"
     android:layout_alignBottom="@+id/nxt_btn"
     android:layout_alignParentLeft="true"
     android:text="Previous" />
 <Button
     android:id="@+id/nxt_btn"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentRight="true"
     android:layout_below="@+id/rdtxt"
     android:layout_marginRight="22dp"
     android:layout_marginTop="34dp"
     android:text="Next" />
 <TextView
     android:id="@+id/rdtxt"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/rdgroup"
     android:layout_marginTop="17dp"
     android:text="Nothing is picked" 
     android:textColor="#0000FF"/>
 <TextView
     android:id="@+id/focusarea"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignRight="@+id/nxt_btn"
     android:layout_below="@+id/nxt_btn"
     android:layout_marginRight="20dp"
     android:layout_marginTop="25dp"
     android:text="" />
 <TextView
     android:id="@+id/soltxt"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/focusarea"
     android:layout_alignBottom="@+id/focusarea"
     android:layout_alignParentLeft="true"
     android:layout_marginLeft="32dp"
     android:text="" />
 <TextView
     android:id="@+id/que_txt"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_marginLeft="10dp"
     android:layout_marginTop="25dp"
     android:text="TextView" />

</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:23:35.810

您可以像 dat 一样将所有视图放入相对布局中。ScrollView 只有一个直接的孩子，这是一个补充。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

 <RelativeLayout
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".Quesans" >
 </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:24:48.703

尝试这个：

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroll" 
android:layout_width="fill_parent"

 android:layout_height="fill_parent"
 >
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Quesans" >

    //code here

   </RelativeLayout >

   </ScrollView> 
```

# growl - 当 shellscript 从 launchd 运行时，growlnotify 不显示

> ID：14852381
> 
> 赞同：1
> 
> 时间：2013-02-13T11:22:00.347
> 
> 标签：growl, growlnotify

我有一个在连接特定卷时启动的备份 bash 脚本。我使用 Lingon 创建了一个在安装卷时运行脚本的作业。我已经添加了：

growlnotify -a terminal -t "备份完成" -m "备份完成"

到我的脚本，如果我从终端手动运行脚本，但如果脚本通过守护程序启动，则 growlnotify 无法注册。任何人都可以帮助解决这个问题吗？

ps 非常基本的 bash 技能

# r - R（计算唯一出现次数）

> ID：14852385
> 
> 赞同：0
> 
> 时间：2013-02-13T11:22:06.690
> 
> 标签：r, grouping

我是 R 新手，希望做以下事情。

我在文件 1 中有数据，例如 -

```
Cookie  Bannerid
b   1
c   2
d   3
e   4
b   2
c   3
f   Blank
g   Blank
h       5 
```

文件 2 中的数据将这些bannerid 映射到bannersize（类似） -

```
BannerID    BannerSize
1           300X250
2           728X90
3           728X90
4           300X250
5               300X250 
```

我想要的输出就像

```
Banner Size       No. of cookies that show up only in that banner size
300X250           1
728X90            1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:40:15.220

我仍然不太确定我是否理解这一点。但是，这是尝试使用`data.table`.

```
require(data.table)
# assuming your data.frames are df1 and df2
dt1 <- data.table(df1)
dt2 <- data.table(df2, key="BannerID")
dt3 <- dt1[, N := .N, by="Cookies"][N == 1]
setkey(dt3, "Bannerid")
o <- na.omit(dt3[dt2])

> o
#    Bannerid Cookie BannerSize
# 1:        3      d     728X90
# 2:        4      e    300X250
# 3:        5      h    300X250

o[, .N, by=BannerSize]

#    BannerSize N
# 1:     728X90 1
# 2:    300X250 2 
```

这是你期待的吗？？

# c# - 通过 LINQ 中的联结表将表连接在一起

> ID：14852386
> 
> 赞同：4
> 
> 时间：2013-02-13T11:22:07.577
> 
> 标签：c#, linq

在多对多关系中使用三个表时，我想知道如何完成与导航属性相同的操作。

首先我有一些测试代码让我们开始：

```
var table1 = new[]
{
    new { Title = "Title1", Id = 1 },
    new { Title = "Title2", Id = 2 },
    new { Title = "Title3", Id = 3 }
};
var table2 = new[]
{
    new { GameId = 1, GenreId = 1 },
    new { GameId = 1, GenreId = 2 },
    new { GameId = 1, GenreId = 3 },
    new { GameId = 2, GenreId = 1 },
    new { GameId = 2, GenreId = 2 },
    new { GameId = 3, GenreId = 1 }
};
var table3 = new[]
{
    new { Name = "Genre1", Id = 1 },
    new { Name = "Genre2", Id = 2 },
    new { Name = "Genre3", Id = 3 }
}; 
```

例如，“table1”包含一些游戏的标题，“table3”包含一些类型，“table2”通过它们的 id 连接“table1”和“table3”。

现在我的问题是你如何最优雅地选择一个游戏列表（table1），每个游戏都有一个他们的流派列表（table3）到一个匿名类型列表中？

到目前为止，我的解决方案是：

```
var query =
    from t1 in table1
    select new
    {
        Game = t1,
        Genres =
        (
            from t2 in table2
            join t3 in table3 on t2.GenreId equals t3.Id
            where t2.GameId == t1.Id
            select t3
        ).ToList()
    };
var result = query.ToList(); 
```

理想情况下，我想避免子查询，但问题是在这种情况下是否可以避免......

我在想这样的事情：

```
var query =
    from t1 in table1
    join t2 in table2 on t1.Id equals t2.GameId
    join t3 in table3 on t2.GenreId equals t3.Id
    select new { Game = t1, Genres = t3 };
var result = query.ToList(); 
```

这当然会返回六个项目，这不是我想要的结果。

总结一下：在 LINQ 中是否可以在不使用子查询的情况下选择一个列表游戏（table1），每个游戏都有一个类型列表（table3）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:29:16.147

也许您只想将第二个查询与[`group by`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
var query =
    from t1 in table1
    join t2 in table2 on t1.Id equals t2.GameId
    join t3 in table3 on t2.GenreId equals t3.Id
    group t3 by t1 into g
    select new { Game = g.Key.Title, Genres = g.Select (x => x.Name) }; 
```

![在此处输入图像描述](../Images/28125d545cc4f608f215a4564d1b78d7.png)

（*注意：*应该很明显，但我只是用于`select new { Game = g.Key.Title, Genres = g.Select (x => x.Name) }`说明目的。要选择实际类型，请使用`select new { Game = g.Key, Genres = g }`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:31:05.607

使用`group`：

```
var query =
    from t1 in table1
    join t2 in table2 on t1.Id equals t2.GameId
    join t3 in table3 on t2.GenreId equals t3.Id
    group t3 by t1 into g
    select new { Game = g.Key, Genres = g.ToList() };

var result = query.ToList(); 
```

现在`result`是一个匿名类型的列表 where `Game`is a thing from`table1`并且`Genres`是一个来自 的事物列表`table3`。

# linux - 虚拟主机在tomcat6中不起作用

> ID：14852400
> 
> 赞同：0
> 
> 时间：2013-02-13T11:22:49.087
> 
> 标签：linux, tomcat6, virtualhost

我正在使用 Linux 12.04 Precise。我的机器上只有 sudo 权限。我创建了一个 jsp 网站并尝试在我的机器上创建虚拟主机，以便网站 url 看起来像这样区分：

```
www.myapp.com 
```

而不是

```
127.0.0.1/myapp/ 
```

因此，在浏览了互联网上的许多文章之后。像

[虚拟主机操作方法](http://tomcat.apache.org/tomcat-6.0-doc/virtual-hosting-howto.html)

我在 server.xml 中为我的虚拟主机创建了一个条目，如下所示

```
<Engine name="Catalina" defaultHost="localhost">
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">
</Host>
<Host name="www.myapp.com" appBase="libapps" unpackWARs="true"
        autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false">
</Host>
</Engine> 
```

为此，如教程中所述，我在 $CATALINA_HOME 中创建了一个名为 libapps 的目录，并将我的应用程序 war 文件放入其中。当我查看 tomcat6 的主机管理器应用程序时，它正在显示我的虚拟主机，但它无法启动。在此之前，我在更改 server.xml 时重新启动了 tomcat6。

我还能做些什么来使我的应用程序正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:34:55.487

经过长时间的互联网教程后，只需简单的步骤即可完成 :)

第 1 步：在 server.xml 中添加一个条目

```
<Host name="www.your-domain.com"  appBase="libapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">
</Host> 
```

第 2 步：在 $CATALINA_HOME 中为应用程序库创建目录

```
sudo mkdir /var/lib/tomcat6/libapps 
```

为虚拟主机配置创建以下目录

```
sudo mkdir /var/lib/tomcat6/conf/Catalina/www.your-domain.com 
```

将以下文件复制到此目录

```
host-manager.xml
manager.xml
ROOT.xml 
```

从

```
/var/lib/tomcat6/conf/Catalina/localhost 
```

目录

第 3 步：在 /etc/hosts 文件中添加一个条目

```
XX.XX.XX.XX     www.your-domain.com 
```

第 4 步：在此之后，只需使用以下命令重新启动您的 tomcat

```
sudo service tomcat6 restart 
```

第 5 步：现在，您可以通过在浏览器中输入以下 url 来访问您的新虚拟主机

```
www.your-domain.com:8080 
```

第 6 步：只需从此主机访问管理器应用程序并部署您的战争文件。:)

第 7 步：现在，如果您想从 url 中删除 ip 地址并使用一个好看的 url，例如

```
www.your-domain.com 
```

然后，您必须输入

```
/etc/apache2/httpd.conf 
```

如下所示：

```
ProxyPass / http://www.your-domain.com:8080/app-name/
ProxyPassReverse / http://www.your-domain.com:8080/app-name/ 
```

第 8 步：现在，您可以从

```
www.your-domain.com 
```

# java - 如何移动位图并为其设置动画

> ID：14852404
> 
> 赞同：1
> 
> 时间：2013-02-13T11:23:05.007
> 
> 标签：java, android

我想将位图从 X,Y 移动到新的 X',Y' 并为其设置动画。我有一个 SurfaceView 作为 Activity 的内部类，并且 SurfaceView 作为线程运行并处理画布上的所有绘图。

下面是线程的run方法：

```
public void run() 
    {
        while(threadOk == true)
        {
            if(!holder.getSurface().isValid())
                continue;

            Canvas canvas = null;
            try
            {
                canvas = holder.lockCanvas();
                letsDraw(canvas);
            }
            finally 
            {

                if (canvas != null)
                {
                    holder.unlockCanvasAndPost(canvas);
                }
            }
        }
    } 
```

这是`letsDraw(Canvas canvas)`方法：

```
public void letsDraw(Canvas canvas)
    {
        canvas.drawARGB(255, 0, 102, 0);
        canvas.drawBitmap(card.getPic(), card.getX(), card.getY(), null);
    } 
```

这`card`是一个自定义类的实例`Card(Bitmap pic, float X, float Y)`。问题是，我知道如何处理这种情况。我想将位图“移动”几个像素，并在这样做的同时为其设置动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:30:35.543

你做错了。

[这](http://www.edu4java.com/en/androidgame/androidgame2.html)是你应该做的一个例子。

基本上是为了“移动”（动画）要更新 x 和 y 坐标并重绘视图的图像。这可以通过`invalidate()`在绘制调用结束时简单地调用来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:29:51.330

我认为实现这一点的唯一方法是使用 LinearInterpolator 计算位图的 X 和 Y 位置，然后在“letsDraw”方法上绘制它。

# android - 如何检查屏幕上显示的活动

> ID：14852406
> 
> 赞同：0
> 
> 时间：2013-02-13T11:23:08.607
> 
> 标签：android, android-activity

我想从一个没有活动的类中检查哪个活动在前面（这只是另一个为我执行一些操作但不受任何活动限制的类）。

如何从此类中检查屏幕上实际显示的活动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:30:04.887

您可以使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)来获取它。以下是示例代码：

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);

 // get the info from the currently running task
 List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);

 Log.d("topActivity", "CURRENT Activity ::" + taskInfo.get(0).topActivity.getClassName());

 ComponentName componentInfo = taskInfo.get(0).topActivity;
 String packageName = componentInfo.getPackageName(); 
```

您的清单需要以下权限：

```
uses-permission android:name="android.permission.GET_TASKS" 
```

[来源](http://qtcstation.com/2011/01/getting-info-about-your-currently-running-activities/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:32:26.367

另一种方法是在自定义应用程序对象中创建一个名为“Activity lastActivityShown”的成员，并且在所有活动的所有 onCreate 中，您可以`getApplication().setLastActivityShown(this)`通过这种方式不需要权限。您还可以创建具有此逻辑的 BaseActivity 并获取所有活动扩展此。

# ruby-on-rails - 从 Windows 上的 ruby 应用程序执行 rails server

> ID：14852408
> 
> 赞同：0
> 
> 时间：2013-02-13T11:23:18.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2, ruby-1.9.3

我必须从 Ruby 脚本（版本 1.9.3）执行 Rails 服务器（Rails 版本：2.3.4，Ruby 版本：1.8.7）。我的红宝石脚本是：

```
system(start G:/app/Ruby187/bin/ruby.exe G:/app/name_app/script/server) 
```

当我启动这个脚本时，我得到了这个结果：

```
Missing the Rails 2.3.4 gem. Please `gem install -v=2.3.4 rails`, update your RAILS_GEM_VERSION setting in config/environment.rb for the Rails version you do have installed, or comment out RAILS_GEM_VERSION to use the latest version installed. 
```

但是我在 ruby​​ 解释器 1.8.7 上安装了那个 gem。实际上，如果我在提示符下执行此命令：

```
G:/app/Ruby187/bin/ruby.exe G:/app/name_app/script/server 
```

Rails 服务器启动。我检查了环境变量（因为我的脚本在 Ruby 193 上运行）但没有，输出是相同的错误。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:27:05.393

宝石的位置是否已定义？

就像是：

```
Set GEM_PATH=/Library/Ruby/Gems/1.8/:${GEM_PATH} 
```

你会想看看你的主目录或根目录下是否有 gems。你可以通过运行来做到这一点`gem environment`

（或）做`bundle install`或`gem install rails`将解决您的问题。

（或）这将是导轨问题，升级到`rails 2.3.8`

# pdf - 将 CMYK PDF 转换为专色（颜色）

> ID：14852410
> 
> 赞同：3
> 
> 时间：2013-02-13T11:23:24.433
> 
> 标签：pdf, printing, cmyk, preflight

是否可以预处理（批量）CMYK 格式的 PDF 以分离成专色？

我有一组 CMYK 格式的 PDF，但我要求它们采用 2 专色格式。

颜色是红色和黑色。黑色（K）很好，但红色点需要是洋红色和黄色的合并。

这可能吗？我更喜欢能够根据给定颜色分离斑点的东西，而不是合并颜色，因为这变得非常有限。

我查看了 adobe acrobat X pro，但这似乎并没有达到我想要的效果。我可能可以在 Photoshop 中手动完成，但对于我拥有的大量 PDF 来说，这将是一个漫长的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:55:31.450

我猜这个问题早就解决了，但只是为了完整性；是的，这是可以做到的。有许多商业工具实际上很容易做到这一点。

1）如果我没记错的话，最新版本的 Adob​​e Acrobat 实际上比以前的版本包含更多的 PDF 文件更正可能性，这意味着它应该能够做到这一点。

2）有像 callas pdfToolbox 这样的工具（警告，我隶属于这家公司/产品），可以以任何你想要的方式预处理 PDF 文件。

一般来说，尽管我认为第一个问题是为什么要通过 RGB 到 CMYK 步骤 - 可以进行这种重新映射的工具同样能够简单地从黑色和红色 RGB 直接转到两个命名的专色，避免不必要的 CMYK 转换。

顺便说一句，如果您想要获得的是一个 PDF，您可以在其中轻松关闭一种颜色（例如隐藏正确答案），那么可能有更好的方法来做到这一点。例如将所有红色文本放在一个图层上，而将所有黑色文本放在不同的图层上（或 OCG - PDF 调用它们的可选内容组）。这将使您能够随意打开或关闭彩色文本，即使在 Adob​​e Reader 之类的东西中也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:03:44.447

这是一个简单的实现，它将打印纯黑色或任何非黑色的东西。根据您的需要，它可能需要变得更复杂。在不了解更多信息的情况下，我采用了使用 exitserver 的蛮力方法。exitserver 允许重新定义 RIP 的默认操作。要将 RIP 恢复到正常操作，您需要重新启动 rip 或编写另一个出口服务器例程来取消定义服务器修改。

该例程通过发送 exitserver postscript 代码安装在 rip 中。对于 PC，这可以通过向打印机共享的 DOS 复制命令来完成。还有可以在网上找到的 sendps 程序将文件发送到设备。

```
copy redef1.ps \\127.0.0.1\psprinter 
```

这个 exitserver 例程在 userdict 中定义了一个 /setcmykcolor 函数，它将优先于系统 dict 中的 setcmykcolor。堆栈上有 4 个数字，最后一个是黑色的。返回值被复制并与零进行比较。如果黑色不为零，则将执行黑色块，否则将执行非黑色块。0 setgray=black 和 1 setgray=white，所以由于下面的块存在，黑色将打印为黑色，其他所有内容都将打印为白色。

```
%!
serverdict begin 0 exitserver
userdict begin /setcmykcolor 
{
    dup 0 ne
    {
        %black
        0 setgray
        pop pop pop pop
    }
    {
        %not black
        1 setgray
        pop pop pop pop
    }ifelse
} def end 
```

通过反转 setgray 的值，黑色将不会打印，而其他所有“非黑色”都会打印。

```
%!
serverdict begin 0 exitserver
userdict begin /setcmykcolor 
{
    dup 0 ne
    {
        %black
        1 setgray
        pop pop pop pop
    }
    {
        %not black
        0 setgray
        pop pop pop pop
    }ifelse
} def end 
```

您从哪个程序打印无关紧要。无论最后加载哪个版本的 exitserver，都将是输出打印的方式。

这是一个简单的 .ps 示例

```
%!PS-Adobe-3.0 
%%Title: mwe.ps
%%Pages: 001
%%BoundingBox: 0 0 595 842
%%EndComments
%%Page: 1 1
%%PageBoundingBox: 0 0 595 842
/Times-Roman findfont 72 scalefont setfont
0 0 0 1 setcmykcolor
0 20 moveto (black) show
0 1 0 0 setcmykcolor
0 40 moveto (not black) show
0 0 0 1 setcmykcolor
0 60 moveto (black) show
1 0 0 0 setcmykcolor
0 80 moveto (not black) show
0 0 0 1 setcmykcolor
0 100 moveto (black) show
0 1 1 0 setcmykcolor
0 120 moveto (not black) show

showpage 
```

输出将仅显示“黑色”或“非黑色”，但文本会叠印，因此您将看到未打印的任何一种颜色的重影图像。

这是一个退出服务器，用于恢复 RIP 以使用正常的 setcmykcolor

```
%!
serverdict begin 0 exitserver
userdict /setcmykcolor undef 
```

如开头所述，这是一个简单的实现，例如允许使用黑色而不是黑色。还可能有多种颜色，其中少量的黑色与颜色混合可以使简单的例程蒙骗到深红色 0 .87 。 75 .1 setcmykcolor 将被定义为黑色，它可能不应该是黑色。

# xcode - 找不到此可执行文件的有效配置文件

> ID：14852422
> 
> 赞同：2
> 
> 时间：2013-02-13T11:23:52.087
> 
> 标签：xcode, xcode4.5, ios-provisioning

安装时出现经典的 XCode 错误。

我的公司有一台新设备，我想安装其中一个应用程序（它是 iPhone 5，我需要屏幕截图）。

我开始更新配置文件，现在该应用程序不适用于任何人。

我在这里检查了我在一些线程中找到的所有内容，错误仍在继续，重新启动 XCode，然后重新启动计算机，它继续。

我删除了证书，并创建了一个新证书，在其他应用程序中尝试过并且可以工作，但它在我要安装到的应用程序中不起作用。

我还创建了一个新的 appID，一个新的配置文件，仍然无法正常工作。

![在此处输入图像描述](../Images/39064da1a6f7aa073b5acacdefc65e2f.png)

![在此处输入图像描述](../Images/c305fca9c54e23537a710bb9c62b7c8a.png)

![在此处输入图像描述](../Images/c68bb0346c2d1f9b96870c92f45e17db.png)

还有什么建议吗？

# android - 无法在Android中我的应用程序（第一页）的登录页面中实现json解析

> ID：14852424
> 
> 赞同：0
> 
> 时间：2013-02-13T11:23:56.417
> 
> 标签：android, json

我是 Android 编程新手。我浏览了 Google 提供的大部分 Android 开发者文档。这是我的问题：

我正在尝试做的事情：从我的应用程序的第一个登录页面，我试图获取位于服务器中的 json 文件并解析结果以检查登录是否成功。我无法解析以下课程中的 json。请提出问题所在。我已经检查了过去几天关于 stackoverflow 的所有其他问题，但没有太大帮助。请帮忙。

登录活动.java

```
package com.practice.serverdashboard;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.app.Service;
import android.content.Context;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity {

    public EditText username;
    private EditText password;

    private static final String TAG = "MyActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        username = (EditText) findViewById(R.id.txt_username);   
        password = (EditText) findViewById(R.id.txt_password);   

        //Showing the keypad
         InputMethodManager mgr = (InputMethodManager)this.getSystemService(Service.INPUT_METHOD_SERVICE);
         mgr.showSoftInput(username, InputMethodManager.SHOW_IMPLICIT);     
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_login, menu);
        return true;
    }

    public void callLoginService(View v)
    {
        //Hidding the keypad
        InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        mgr.hideSoftInputFromWindow(username.getWindowToken(), 0);
        mgr.hideSoftInputFromWindow(password.getWindowToken(), 0);

        String loginUrlString="http://freakageekinternaltest.com:2200/mgmt/JSP/login.jsp?userId="+username.getText()+"&pws="+password.getText();
        Log.e("log_tag", "The URL is :: "+loginUrlString);
        //calling the login URL
        //GetJson gJ=new GetJson();
        //gJ.execute(loginUrlString);
        JSONObject json=getJSONfromURL(loginUrlString);

        AlertDialog.Builder adb = new AlertDialog.Builder(
                LoginActivity.this);
                adb.setTitle("Login Service");
                adb.setMessage("Testing...");
                adb.setPositiveButton("Ok", null);
                adb.show(); 

    }

public JSONObject getJSONfromURL(String url){

    //initialize
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    //http post
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();

        Log.e("log_tag", "result is:: "+result);

    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    //try parse the string to a JSON object
    try{
            jArray = new JSONObject(result);
    }catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
    }

    AlertDialog.Builder adb = new AlertDialog.Builder(
            LoginActivity.this);
            adb.setTitle("Login Service");
            adb.setMessage("Success...");
            adb.setPositiveButton("Ok", null);
            adb.show(); 

    return jArray;
}

} 
```

这是 logcat 输出：

```
02-13 11:13:15.173: E/log_tag(6083): The URL is :: http://freakageekinternaltest.com:2200/mgmt/JSP/login.jsp?userId=test567&pws=test@pps
02-13 11:13:15.183: E/log_tag(6083): Error in http connection android.os.NetworkOnMainThreadException
02-13 11:13:15.183: E/log_tag(6083): Error converting result java.lang.NullPointerException: lock == null
02-13 11:13:15.183: E/log_tag(6083): Error parsing data org.json.JSONException: End of input at character 0 of 
```

由于 NetworkOnMainThreadException 异常（在 stackoverflow 的帮助下），我也检查了 AsyncTask。但我不知道从哪里开始以及如何在我的 LoginActivity.java 类中使用 Async 类。请帮忙。提前感谢您。

这是我试图从服务器获取并解析的 json：

```
{"LOGIN":"TRUE","userId":"Web Administrator","userAccessType":"ALL"} 
```

@gabe：谢谢你早日回复gabe。是否必须在后台进行联网操作？由于我试图从服务器获取登录详细信息，当我的应用程序坐在那里等待服务器响应时会做什么？另外，考虑到我上面的代码，如何实现 AsyncTask 类？我已经浏览了你提到的文档。但是我尝试创建一个扩展 AsyncTask 的新类。在那个类中，我在 doInBackground 方法中完成了所有网络操作，然后使用 onPostExecute 方法将结果发送回 LoginActivity.java 类。但是，由于此后台操作是在扩展 AsyncTask 类的新类上完成的，因此我无法使用 main_activity.xml 文件中定义的控件。那么如何实现这一切呢？再次感谢。

再一次问好！现在我已经按照答案中的建议修改了我的代码。

```
private class RetreiveDataAsynctask extends AsyncTask<String,Void,JSONObject> {

        @Override
        protected JSONObject doInBackground(String... loginURL) {
            JSONObject obj = getJSONfromURL(loginURL);
            return obj;
        }

        @Override
        protected void onPostExecute(JSONObject obj) {
             //Do all ur UI related stuff as this will be executing in ui thread

            super.onPostExecute(obj);
        }

    } 
```

在 onCreate 方法中，我这样调用：

```
RetreiveDataAsynctask mRetreiveData = new RetreiveDataAsynctask();
        mRetreiveData.execute(loginUrlString); 
```

但是，它在这一行给出了错误：

```
JSONObject obj = getJSONfromURL(loginURL); 
```

有人可以告诉我这段代码有什么问题吗？其余的解析函数与上面指定的相同。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:30:08.047

错误

```
Error in http connection android.os.NetworkOnMainThreadException 
```

表示您正在主线程上进行工作，但您应该在单独的线程中进行工作，因为您的网络操作**会阻塞 User Interface**。

您可以使用 a`AsyncTask`来进行网络操作。

查看[Android 中的进程和线程以](http://developer.android.com/guide/components/processes-and-threads.html)获取更多信息。

查看此 [AsyncTask 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:35:54.697

像这样制作异步任务：

```
private class RetreiveDataAsynctask extends AsyncTask<String loginUrlString, Void, JSONObject> {

    @Override
    protected Response doInBackground(Void... params) {
        JSONObject obj = getJSONfromURL( loginUrlString);
        return obj;
    }

    @Override
    protected void onPostExecute(JSONObject obj) {
         //Do all ur UI related stuff as this will be executing in ui thread

        super.onPostExecute(result);
    }

} 
```

然后在你的 OnCreate

```
RetreiveDataAsynctask mRetreiveData = new RetreiveDataAsynctask();
        mRetreiveData.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:36:10.750

尝试这个：

```
class Communicator extends AsyncTask<String, String, String> 
    {
        @Override
        protected String doInBackground(String... params) {
            //Here call the method for parsing
        }

        @Override
        protected void onPreExecute() 
        {
            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(String result) 
        {
            super.onPostExecute(result);
        }
    }

//And on callLoginService(View v) you start the AsyncTask
        //if you want to pass some value
        String values[] = { userna, passwo };
        new Communicator().execute(values); 
        //Otherwise
        new Communicator().execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:37:33.547

使用 Async Task 从 url 获取 Json .. 或在您的方法中添加以下两行

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# eclipse - 声纳日食配置中的实例错误

> ID：14852427
> 
> 赞同：0
> 
> 时间：2013-02-13T11:24:10.843
> 
> 标签：eclipse, ant, sonarqube

嗨，我在使用 ant 的 Eclipse 中使用声纳。当我尝试“与声纳关联”时，无法为项目选择任何页面。所以我去了

> '首选项-->声纳-->服务器'

n 将声纳网址设为：

> http:// 本地主机：9000
> 
> 用户名：管理员
> 
> 密码：管理员

但它显示为错误**实例**
，那么应该为声纳提供什么实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:28:27.310

您必须首先对您的项目运行 Sonar 分析并能够在浏览器中查看结果，然后才能在 Eclipse 中实际关联您的项目。

# youtube-api - YouTube 观看页面显示前贴片广告后播放器 API 问题

> ID：14852432
> 
> 赞同：0
> 
> 时间：2013-02-13T11:24:35.853
> 
> 标签：youtube-api

当浏览到 Youtube 页面（例如[http://www.youtube.com/watch?feature=endscreen&NR=1&v=BfOdWSiyWoc](http://www.youtube.com/watch?feature=endscreen&NR=1&v=BfOdWSiyWoc)）并获得前贴片广告（在剪辑本身之前显示的视频广告）时整个播放器 API 在原始视频方面都搞砸了。

例如， player.getCurrentTime() 和 player.getDuration() 在显示广告时返回广告数据，但在视频切换到所需视频后，它们继续返回 0（视频正在正确播放并且视频播放器确实显示播放了多少时间以及剪辑有多长）。顺便说一句，如果没有广告，这种行为就不会发生。

此外，如果在所需的视频中我调用 player.getVideoUrl() ，那么我会得到广告网址而不是视频网址（当然只有在有前贴片广告的情况下）。

我尝试以各种方式重置它（停止然后加载所需的视频，克隆播放器并重置它等......）但找不到可行的解决方案，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:14:59.683

根据您的问题，听起来您正在尝试使用 YouTube Player API 来控制 YouTube.com 观看页面上的播放。（如果不是这种情况，您需要编辑您的问题以澄清您实际在做什么。）

不支持使用 Player API 来控制 YouTube.com 观看页面上的播放。作为浏览器扩展的一部分，可能会一起破解某些东西，但如果这样做，预计会损坏。

Player API 仅用于控制嵌入式 YouTube 播放器在第三方网页上的播放。

# asp.net - .ASPXBrowserOverride cookie 设置为 7 天

> ID：14852433
> 
> 赞同：1
> 
> 时间：2013-02-13T11:24:37.663
> 
> 标签：asp.net, asp.net-mvc, jquery-mobile, session-cookies

我的网站具有移动和桌面视图，使用 jquery 移动 mvc 包（[http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx)）实现，它使用`HttpContext.SetOverriddenBrowser`的 ASPXBrowserOverride cookie 设置有效期为 7 天。

当我们关闭浏览器时是否可以删除此 cookie（会话 cookie 类型）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T16:12:56.860

为了解决这个问题，我们在 Global.asax.cs 的 Session_Start 中进行了以下调用：

```
HttpContext.ClearOverriddenBrowser() 
```

这使得体验表现得好像 cookie 是会话 cookie。不幸的是，这并不能让您明确控制时间长度，但我们希望它只持续一个会话，所以它对我们来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T12:51:00.993

只是为了补充...

在 ASP.NET MVC 中，如果不获取 Wrapper 类，则无法从 Global.asax 调用此方法

所以就这样做：

```
 var httpWrap = new HttpContextWrapper(HttpContext.Current);
        httpWrap.ClearOverriddenBrowser(); 
```

# c - usleep() 计算经过时间的行为很奇怪

> ID：14852434
> 
> 赞同：2
> 
> 时间：2013-02-13T11:24:43.433
> 
> 标签：c, gettimeofday, usleep

我正在使用下面的代码计算每次连续调用处理程序函数所经过的时间（以毫秒为单位）。当我使用 usleep(1000) 时，即每次通话之间的 1 毫秒时间差为 10 毫秒，而当我使用 usleep(1000000) 时，即 1 秒，每次通话之间的时间间隔令人惊讶地下降到小于 1 毫秒。以下是代码片段：

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<sys/time.h>
    #include<unistd.h>

    struct timeval start_time;
    void handler(int);

    int main()
    {
            struct timeval current_time;
            int i=0;
            gettimeofday(&start_time,0);
            gettimeofday(&current_time,0);
            printf("%012.3fms: emulationbegins\n",((current_time.tv_usec-start_time.tv_usec)/1000.0));

            while(i++<5)
            {
                    usleep(1000); // compare with usleep(1000000)
                    handler(i);
            }

            return 0;
    }

    void handler(int i)
    {
            printf("In Handler %d\n",i);
            struct timeval current_time;
            gettimeofday(&current_time,0);
            printf("%012.3fms: Handler Called\n",((current_time.tv_usec-start_time.tv_usec)/1000.0));
            return;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:28:30.753

请记住，结构的`tv_usec`字段`timeval`永远不会达到（或超过）一百万，而是增加了秒数。

您还必须在计算中使用该`tv_sec`字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:08:20.770

`usleep`被指定至少睡你给它的量，但它可以睡得更久。它休眠的时间几乎没有上限，因为如果操作系统有更重要的进程要运行，它就不必运行您的进程。

实际上，`usleep`睡眠时间的分辨率取决于操作系统使用的时钟。直到几年前，大多数类 unix 系统都使用静态 100Hz 计时器（或在某些罕见情况下为 1024Hz）来驱动这样的计时器，因此您的睡眠时间总是会四舍五入到最接近的 10 毫秒。

最近在一些系统上做了一些工作来移除静态时钟，尽管这并不是因为需要更高分辨率的睡眠，而是因为不断唤醒 cpu 以获得静态时钟滴答的事实。对功耗不利。它可能会产生提高计时器分辨率的副作用，但这反过来又会暴露应用程序中的错误，这些应用程序使用非常短的睡眠并且表现得很好。`usleep`突然间，随着///中的超时分辨率的提高，`nanosleep`那些短暂的睡眠会导致在 cpu 上旋转的应用程序一直在重新安排它们的睡眠。`poll``select`

我不确定今天的状态是什么，但是从您的 10 毫秒来看，您的系统似乎仍在为其内部计时器使用 100 赫兹时钟，或者它故意将超时减慢到 10 毫秒的分辨率以防止应用程序中断。

# android - 如何使用 dropbox-android-sync-sdk-1.0 从 sdcard 上传 zip 文件

> ID：14852436
> 
> 赞同：1
> 
> 时间：2013-02-13T11:24:46.530
> 
> 标签：android, dropbox, dropbox-api

我需要上传一个`zip`文件`sd card`以`dropbox`使用`dropbox-android-sync-sdk-1.0`. 我找不到任何上传方法。我找到了创建文件夹和文件的方法。（`dbxFs.createFolder()`和`dbxFs.create()`）。但无法找到上传现有文件的方法`sd card`。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:43:35.023

DbxFile 上的 writeFromExistingFile 方法允许您上传现有文件：

[https://www.dropbox.com/developers/sync/docs/android#com.dropbox.sync.android.DbxFile](https://www.dropbox.com/developers/sync/docs/android#com.dropbox.sync.android.DbxFile)

# python - 从fasta序列制作表格，python

> ID：14852437
> 
> 赞同：1
> 
> 时间：2013-02-13T11:24:48.657
> 
> 标签：python, bioinformatics

我有大约 500 个 fasta 格式的蛋白质序列，我是从 blastp 搜索中获得的。从这些序列中，我需要知道蛋白质名称、生物体、Uniprot ID，如果可能的话，还需要蛋白质家族，这样我就可以用这些信息建立一个表格。

有什么办法可以使用 python 做到这一点吗？一些与 Uniprot 通信的功能？如何解析 fasta 标头中的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:29:18.167

您应该看一下具有 FASTA 解析器的[Biopython 。](http://biopython.org/wiki/SeqIO)解析后可以使用[pandas](http://pandas.pydata.org/) `DataFrame`建表。如果没有示例数据片段，很难提供更详尽的答案，但应该可以使用大约 5 行代码：)

```
from Bio import SeqIO
with open("example.fasta", "rU") as handle:
    print list(SeqIO.parse(handle, "fasta")) 
```

# java - 如何使用联合运算符连接 sql 查询

> ID：14852444
> 
> 赞同：2
> 
> 时间：2013-02-13T11:25:10.260
> 
> 标签：java, mysql, sql, jdbc

```
String Query="select * from recommendation.sports WHERE feed LIKE'%"+s1+"%'

    UNION "select * from recommendation.software  WHERE feed LIKE '%"+s1+"%'

    UNION "select * from recommendation.website   WHERE feed LIKE '%"+s1+"%'

    UNION "select * from recommendation.others    WHERE feed LIKE '%"+s1+"%'

    UNION "select * from recommendation.business  WHERE feed LIKE '%"+s1+"%'"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:27:12.570

也许你的意思是这个？

```
String Query = "select * from recommendation.sports WHERE feed LIKE '%" + s1 + "%' " +
                "UNION " +
                "select * from recommendation.software  WHERE feed LIKE '%" +s1+ "%' " +
                "UNION " +
                "select * from recommendation.website   WHERE feed LIKE '%" +s1+" %' " +
                "UNION " +
                "select * from recommendation.others    WHERE feed LIKE '%"+s1+"%' " +
                "UNION " +
                "select * from recommendation.business  WHERE feed LIKE '%" +s1+ "%'" ; 
```

但我建议你`PreparedStatements`在查询上使用来避免`SQL Injection`.

```
String Query = "select * from recommendation.sports WHERE feed LIKE CONCAT('%', ?, '%') " +
                "UNION " +
                "select * from recommendation.software  WHERE feed LIKE CONCAT('%', ?, '%') " +
                "UNION " +
                "select * from recommendation.website   WHERE feed LIKE CONCAT('%', ?, '%') " +
                "UNION " +
                "select * from recommendation.others    WHERE feed LIKE CONCAT('%', ?, '%')  " +
                "UNION " +
                "select * from recommendation.business  WHERE feed LIKE CONCAT('%', ?, '%')" ;

PreparedStatement pstmt = con.prepareStatement(Query);
pstmt.setString(1, s1);
pstmt.setString(2, s1);
pstmt.setString(3, s1);
pstmt.setString(4, s1);
pstmt.setString(5, s1);
ResultSet _result = pstmt.executeQuery(); 
```

*   [JAVA PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:27:10.910

尝试这个：

```
 String Query="select * from recommendation.sports WHERE feed LIKE'%"+s1+"%'

    UNION select * from recommendation.software  WHERE feed LIKE '%"+s1+"%'

    UNION select * from recommendation.website   WHERE feed LIKE '%"+s1+"%'

    UNION select * from recommendation.others    WHERE feed LIKE '%"+s1+"%'

    UNION select * from recommendation.business  WHERE feed LIKE '%"+s1+"%'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:22:00.647

有一些小的改动，请查看。

```
String Query="select * from recommendation.sports WHERE feed LIKE \'%"+s1+"%\'

    UNION select * from recommendation.software  WHERE feed LIKE \'%"+s1+"%\'

    UNION select * from recommendation.website   WHERE feed LIKE \'%"+s1+"%\'

    UNION select * from recommendation.others    WHERE feed LIKE \'%"+s1+"%\'

    UNION select * from recommendation.business  WHERE feed LIKE \'%"+s1+"%\'"; 
```

试试这个，告诉我它是否有效。

# ios - 适用于 IOS 的摄像机本机扩展

> ID：14852446
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:16.817
> 
> 标签：ios, camera, flash-builder, air-native-extension

我正在为 iOS 构建一个本机扩展，我想在其中实现条形码扫描仪。

我遵循了[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)示例，并在本机应用程序（完整的 xcode）中尝试过它，它工作正常。

现在，我想在 Flex 移动项目中使用此代码。我已经能够创建 ANE 并将其放在 Flex Mobile 项目中，并且可以调用 ANE 的功能。

它似乎工作正常，但我的问题是我看不到你通过相机看到的东西。我的意思是，我有一个方法可以调用来启动相机并初始化捕获。我还实现了 captureOutput 委托，最奇怪的是，当我运行我的应用程序时，我可以看到 initcapture 和 captureOutput 中的日志，就像应用程序正在捕获数据一样，但在 iPad 中我看不到相机。

这是我使用的代码的一部分：

```
- (void)initCapture
{
    NSLog(@"camera view capture init");
    /*We setup the input*/
    self.device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:self.device error:nil];
    /*We setupt the output*/
    captureOutput = [[AVCaptureVideoDataOutput alloc] init];
    // If the queue is blocked when new frames are captured, those frames will be automatically dropped
    captureOutput.alwaysDiscardsLateVideoFrames = YES;
    //captureOutput.minFrameDuration = CMTimeMake(1, 10); Uncomment it to specify a minimum duration for each video frame
    [captureOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()];
    // Set the video output to store frame in BGRA (It is supposed to be faster)

    NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;
    // Set the video output to store frame in 422YpCbCr8(It is supposed to be faster)

    //************************Note this line
    NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange];

    NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key];
    [captureOutput setVideoSettings:videoSettings];

    //And we create a capture session
    self.captureSession = [[AVCaptureSession alloc] init];
    //We add input and output
    [self.captureSession addInput:captureInput];
    [self.captureSession addOutput:captureOutput];

    if ([self.captureSession canSetSessionPreset:AVCaptureSessionPreset1280x720])
    {
        NSLog(@"camera view Set preview port to 1280X720");
        self.captureSession.sessionPreset = AVCaptureSessionPreset1280x720;
    } else
        //set to 640x480 if 1280x720 not supported on device
        if ([self.captureSession canSetSessionPreset:AVCaptureSessionPreset640x480])
        {
            NSLog(@"camera view Set preview port to 640X480");
            self.captureSession.sessionPreset = AVCaptureSessionPreset640x480;
        }

    /*We add the preview layer*/

    self.prevLayer = [AVCaptureVideoPreviewLayer layerWithSession: self.captureSession];

    if ([self.prevLayer respondsToSelector:@selector(connection)])
        self.prevLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeLeft;
    else
        self.prevLayer.orientation = AVCaptureVideoOrientationLandscapeLeft;

    self.prevLayer.frame = CGRectMake(150, 0, 700, 700);
    self.prevLayer.videoGravity = AVLayerVideoGravityResizeAspect;
    [self.view.layer addSublayer: self.prevLayer];
}

- (void) startScanning {
    NSLog(@"camera view start scanning");
    self.state = LAUNCHING_CAMERA;
    [self.captureSession startRunning];
    self.prevLayer.hidden = NO;
    self.state = CAMERA;
}

#pragma mark AVCaptureSession delegate

- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    NSLog(@"camera view Capture output");
} 
```

我应该如何解决这个问题？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:15:42.050

我想我已经解决了。

代替：

```
[self.view.layer addSublayer: self.prevLayer]; 
```

我放：

```
UIViewController *mainController = [UIApplication sharedApplication].keyWindow.rootViewController;
[mainController.view.layer addSublayer: self.prevLayer]; 
```

现在，我可以在我的 flex 应用程序上看到相机了。

# authentication - 身份验证失败，Worklight-Liberty 配置文件配置为 LDAP (SSO)

> ID：14852451
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:29.617
> 
> 标签：authentication, ldap, single-sign-on, ibm-mobilefirst

当我尝试从模拟器中的 WL hybird 应用程序登录时，出现以下异常。

环境：

1) 使用默认 Liberty 概要文件和 Derby 数据库安装的 Worklight Server（505 版本）。
2) Userregistry 配置为 LDAP。LDAP 已启动并正在运行。
3) 我遵循了“模块 20.1 基于表单的身份验证”

Server.xml 配置正确：

```
 ldapRegistry id="IBMDirectoryServerLDAP" realm="defaultWIMFileBasedRealm"
        host="testserver.com" port="4389" ignoreCase="true"
        baseDN="dc=ibm,dc=com"
        bindDN="cn=xyz"
        bindPassword="xyz123"
        ldapType="IBM Tivoli Directory Server" reuseConnection="true"
        idsFilters
            userFilter="(&amp;(uid=%v)(objectclass=ePerson))"
            groupFilter="(&amp;(cn=%v)(|(objectclass=groupOfNames)(objectclass=groupOfUniqueNames)(objectclass=groupOfURLs)))"
            userIdMap="*:uid"
            groupIdMap="*:cn"
            groupMemberIdMap="ibm-allGroups:member;ibm-allGroups:uniqueMember;groupOfNames:member;groupOfUniqueNames:uniqueMember"
    ldapRegistry 
```

登录模块是：com.worklight.core.auth.ext.WebSphereLoginModule
Authenticator 是：com.worklight.core.auth.ext.WebSphereFormBasedAuthenticator

例外：

```
[RandomNumberGenerationServlet]: Initialization successful.
[2/13/13 15:37:21:349 IST] 00000049 com.worklight.core.auth.ext.WebSphereFormBasedAuthenticator  I FWLSE0055I: Not recognized.
[2/13/13 15:38:27:288 IST] 0000004b ication.internal.jaas.modules.UsernameAndPasswordLoginModule A CWWKS1100A: Authentication did not succeed for user ID wpsbind. An invalid user ID or password was specified.
[2/13/13 15:38:27:742 IST] 0000004f com.worklight.core.auth.ext.WebSphereFormBasedAuthenticator  I FWLSE0055I: Not recognized.
[2/13/13 15:38:27:746 IST] 0000004f com.worklight.core.auth.ext.WebSphereFormBasedAuthenticator  I FWLSE0055I: Not recognized.
[2/13/13 15:38:27:747 IST] 0000004f com.worklight.core.auth.impl.AuthenticationFilter            E FWLSE0048E: Unhandled exception caught: realm WASLTPARealm is not allowed to ignore request to a protected resouce in a non-success state
java.lang.IllegalStateException: realm WASLTPARealm is not allowed to ignore request to a protected resouce in a non-success state
    at com.worklight.core.auth.impl.AuthenticationContext.checkAuthentication(AuthenticationContext.java:515)
    at com.worklight.core.auth.impl.AuthenticationContext.processRealms(AuthenticationContext.java:396)
    at com.worklight.core.auth.impl.AuthenticationContext.pushCurrentResource(AuthenticationContext.java:373)
    at com.worklight.core.auth.impl.AuthenticationServiceBean.accessResource(AuthenticationServiceBean.java:63)
    at com.worklight.core.auth.impl.AuthenticationFilter.doFilter(AuthenticationFilter.java:162)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:85)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:940)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1037)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:81)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:930)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.run(DynamicVirtualHost.java:274)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:529)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:49:08.820

身份验证在 Liberty 中进行，为了让 Worklight 识别登录用户，它需要知道它。

基于表单的身份验证在这里无济于事。您可以而且应该做的是实现一个基于自定义的身份验证器，它将从 Liberty 的响应中检索包含用户信息的自定义 HTTP 标头。

您可以在以下入门培训模块中阅读有关基于自定义的身份验证的更多信息，以首先熟悉该概念：ftp: [//public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_23_ -_Custom_Authenticator_and_Login_Module.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_23_-_Custom_Authenticator_and_Login_Module.pdf)

要获得更清晰的身份验证流程“图像”，您可以查看如下所示的图表：http: [//pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/整合/r_authentication_at_the_gateway.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/integ/r_authentication_at_the_gateway.html)

# joomla - 在 Joomla 中创建具有不同级别的菜单

> ID：14852452
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:30.493
> 
> 标签：joomla, menu, module

我正在尝试使用以下菜单创建一个面向菜单的模块：

菜单店：

*   商店（类别博客）
*   *   店铺1（文章）
*   *   店铺2（文章）
*   *   3号店（文章）
*   *   4号店（文章）
*   *   5号店（文章）

我只想在我的模块中显示 5 个子菜单 shop 1 -> shop 5。当我创建模块（模块管理器/模块菜单）时，我选择“商店”作为基本项目，选择“2”作为开始级别。不幸的是，它什么也没显示。但是当我选择“1”作为开始级别并选择“2”作为结束级别时，它只显示商店。我正在使用 joomla 3

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:29:20.563

Joomla 菜单模块缓存在这些情况下无法正常工作，只需禁用模块的缓存即可。

# magento - Magento - 如何检查交叉销售产品是否存在。

> ID：14852454
> 
> 赞同：2
> 
> 时间：2013-02-13T11:25:31.970
> 
> 标签：magento, view, associations, product

在 view.phtml 中，我想检查产品是否有与之关联的交叉销售产品。

我对相关产品做了同样的事情：

```
$relatedProductsId=$_product->getRelatedProductIds();
$relatedProducts=array();
 $i=0;      
foreach($relatedProductsId as $relatedProductId)
{   

    $relatedProducts[$i] =  array(Mage::getModel('catalog/product')-   >load($relatedProductId)->getProductUrl(),
                            Mage::getModel('catalog/product')->load($relatedProductId)->getName(),
                            Mage::getModel('catalog/product')->load($relatedProductId)->getImageUrl(),
                            Mage::getModel('catalog/product')->load($relatedProductId)->getFormat()
                            );
            $i++;
} 
```

我不确定 Cross Sells 产品使用的功能是什么。请有人帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:29:44.927

你试过了吗

```
$crossSellProducts = $_product->getCrossSellProducts() 
```

?

它将返回一个交叉销售产品对象数组。

# jquery - jQuery ajax 调用多个页面非常慢

> ID：14852455
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:35.610
> 
> 标签：jquery

不确定我这里的逻辑是否不正常，或者这只是 ajax 的本质。我会尽力解释。我有一个页面可以提取一些信息（包含在 div 中的文本，其 id 为序言），然后将其附加到当前页面上的 div 中。

这是页面： [http ://www.cresser.co.uk/cresser/new-cars/](http://www.cresser.co.uk/cresser/new-cars/)

在页面完全加载之前不会触发该功能，我知道这会导致进一步的延迟，我正在调查。

但正如您将看到的那样，它是出现在车辆模型框中的红色文本。非常慢。

这是代码，就像我说的那样，我可能完全不合逻辑地这样做。

```
$('.indexList .item').each(function(){

var tempPath = $(this).attr('class').replace('item ', '').replace(' myPointer', '');

    $.ajax(
        {
            type: 'GET',
            async: true,
            url:  './' + tempPath,
            success: function(data) {
                $(data).find('#preamble').each(function(){
                $('.item.' + tempPath + ' .strapLine').append($(this).text());
                $('.item.' + tempPath + ' .strapLine').fadeIn('fast');
            });
        }
    }); 
}); 
```

只是我想做的是愚蠢的使用ajax，还是有办法加快这段代码的速度？

谢谢。

编辑。只是为了澄清一下，这不是我所困扰的整个页面的加载速度......目前。这是加载红色文本的函数的速度。IE。第一个出现到最后一个出现的时间对我来说似乎很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:34:46.397

您正在使用 AJAX 获取**11 个不同的 HTML 页面**，考虑到阻塞（使用我的连接） ，每个页面的时钟在**5 到 11 秒**之间。如果您打算使用 AJAX，最好将它与*轻量级*Web 服务一起使用。也就是说，创建一个仅使用 JSON 而不是 HTML 返回相关信息的 Web 服务。

恐怕你的瓶颈在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:37:28.473

与其对每辆汽车的页面触发 ajax 调用，不如您触发一个 ajax 调用并获取所有汽车信息，然后使用 jquery 将数据添加到 dom。

这样你只会有一个 10 秒以上的延迟。

虽然我会质疑为什么需要 10 秒才能从该页面获得回复。我猜它是导致问题的服务器端代码。数据库很大吗？您是否对数据库查询进行了计时？

就ajax而言，它很好。如果服务器端代码很快，即使进行 100 次 ajax 调用，您的页面也会更快地加载信息。

# php - PHP重定向增量循环

> ID：14852460
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:42.950
> 
> 标签：php

我试图找出一种在循环中重定向到不同 url 的方法。

例如......我有这个网址：

```
http://mydomain.com/subfolder/1 
```

我需要上面 url 末尾的 1 在循环中每次增加 1

所以它会这样做：

```
redirect here - http://mydomain.com/subfolder/1
redirect here - http://mydomain.com/subfolder/2
redirect here - http://mydomain.com/subfolder/3 
```

所以它会去：

```
while (a < 100) {
header("Location: http://mydomain.com/subfolder/" Increment number here );
} 
```

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:33:38.920

您可以在每次访问脚本时检索页面，如下所示：

```
$lastpage = basename($_SERVER[REQUEST_URI]) 
```

然后增加它并在需要时重定向到下一页。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:36:09.910

如果您有一个重写规则`/subfolder/(\d+)`，`script.php?index=$1`那么您可以尝试：

`header("Location: /subfolder/" . ($_GET["index"] + 1));`

;-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T11:42:03.443

您可以使用

```
<?php
    $myvar = Array();
    for ($i = 1; $i <= 5; ++$i) {
        echo $myvar[$i] = 'header("Location: http://mydomain.com/subfolder/'.$i.'")';
    }
?> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-13T11:33:02.580

如果 $a 是你的增量 no 那么

```
$a=1;
 while ($a < 100) {
  header("Location: http://mydomain.com/subfolder/'".$a."'");
   $a++;
  } 
```

# html - Internet Explorer 开发人员中心错误：HTML1405：无效字符：U+0000 NULL。不应使用空字符

> ID：14852462
> 
> 赞同：2
> 
> 时间：2013-02-13T11:25:51.603
> 
> 标签：html, windows, internet-explorer

我正在 Windows 8 上使用 Internet Explorer 10 测试网站。

我有这个错误，我不明白这是什么意思：

> HTML1405 “无效字符：U+0000 NULL。不应使用空字符。”

这是 Internet Explorer 开发人员中心/F12 开发人员工具控制台错误消息的文档，但没有关于如何修复错误的建议：

[http://msdn.microsoft.com/en-us/library/ie/hh180764%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ie/hh180764%28v=vs.85%29)

这个错误在网站源代码的末尾，在</html>之后但是这里什么都没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:56:58.660

发送到浏览器的 HTML 文档除了一些换行符之外，在结束标记之后还包含一个 NUL 字符 U+0000 `</html>`。我检查了使用 Rex Swain 的[HTTP 查看器](http://www.rexswain.com/httpview.html)分析[您的页面](http://www.echo-in.com/home.php)的笨拙方式，显示格式选项设置为十六进制。在结果列表的末尾，有以下行：

```
47FF0: 3C2F68746D6C3E0D 0A300D0A0D0A     </html>• •0•••• 
```

所以似乎 IE 10 就在这里，而 W3C 验证器是错误的。我不确定 W3C HTML5 CR 究竟是如何定义 HTML 源代码中允许的字符的（这似乎是通过解析算法间接说明的），但是根据 XML 规范以及以前的 HTML 规范，NUL 是不允许的。

无论如何，NUL 在那里没有任何好处，应该被删除，但另一方面，很难看出它是如何造成任何实际伤害的，尤其是当它出现在文档的结束标记之后时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:26:13.277

尝试将您的文件转换为没有 BOM 的 UTF-8，我遇到了同样的问题，为我工作！

我的文本编辑器 Notepad++ 在“编码 > 不带 BOM 的 UTF-8 编码”中有一个选项。

请参阅[没有 BOM 的 UTF-8 和 UTF-8 有什么不同？](https://stackoverflow.com/questions/2223882/whats-different-between-utf-8-and-utf-8-without-bom)了解更多信息。

# php - 将全局变量的值分配给类成员

> ID：14852463
> 
> 赞同：0
> 
> 时间：2013-02-13T11:25:52.170
> 
> 标签：php, cakephp

在一个 CakePHP 项目中工作并被困在一个地方。

配置/bootstrap.php 文件

```
Configure::write('email_info', nehal@connectech.in); 
```

Config/email.php {我的自定义电子邮件类}

```
class EmailConfig {
public $default = array(        
    'from' => Configure::read('email_info'),
    'reply' => Configure::read('email_info')    
);} 
```

我知道我只能使用“全局”关键字为类外的任何变量赋值，但是如何将配置变量赋值给数组成员的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:32:08.663

只需在方法内初始化您的属性`__construct`。PHP 在初始化属性时只接受文字。

```
class EmailConfig {
public $default = array(        
    'from' => Configure::read('email_info'),
    'reply' => Configure::read('email_info')    
);}

class EmailConfig {
  public function __construct() {   
     $this->default['from'] = Configure::read('email_info');
     $this->default['reply'] = Configure::read('email_info');
  }
} 
```

有关更多信息，请参阅此问题：[Initializing PHP class property declarations with simple expressions yield syntax error](https://stackoverflow.com/questions/2702863/initializing-php-class-property-declarations-with-simple-expressions-yields-synt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:32:25.280

我不确定，但你可以试试这个。

```
class EmailConfig {
  public $default = array(        
   'from' => ${Configure::read('email_info')},
   'reply' => ${Configure::read('email_info')}    
);} 
```

# ios - 如何从另一个 ViewController 更新 UILabel

> ID：14852469
> 
> 赞同：2
> 
> 时间：2013-02-13T11:26:07.170
> 
> 标签：ios

我正在使用 Storyboards 和 iOS 6.1，我正在启动这样的视图：

```
PropertiesViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Properties"]; 
```

`PropertiesViewController`有一个 60 像素的高度，包括一些标签等等。我想将这些视图`ScrollView`作为子视图添加到另一个视图中。这是我在做什么：

```
controller.leftLabel.text = @"Test";
controller.background.image = [UIImage imageNamed: @"someimage.png"];
controller.view.frame = CGRectMake(0, currentHeight, controller.view.frame.size.width, cellHeight);
[self.scrollView addSubview: controller.view]; 
```

leftLabel 是 a`UILabel`并且 backgorund 是`UIImageView`. 问题是视图的元素都没有在`PropertiesViewController`. `addSubview:`只是添加它的创建方式，不允许配置。

我已经检查过`NSNotificationCenter`方法，如果我没记错的话，这与更新实例无关。而且我还已经向接收器类添加了一个方法来更新`PropertiesViewController`. 那甚至没有用。

我究竟做错了什么？

**注意**：您可能会问为什么我不使用`TableView`. 必须有更多的动态资源，而且它们还不清楚。还有一件事是 ScrollView 无法使用 TableView，在某些情况下，我从未使用过 TableView，因此 scrollview 将管理滚动。

任何帮助都会很棒。

**编辑：**

根据 Kalpesh 在这里的回答，我做了什么：

在我的发件人视图控制器中：

```
PropertiesViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Properties"]; 
[[NSNotificationCenter defaultCenter] postNotificationName:@"update" object:@"Test string"];

controller.view.frame = CGRectMake(0, currentHeight, controller.view.frame.size.width, cellHeight);
 // not sure how but I can change frame successfully.
[self.scrollView addSubview: controller.view]; 
```

这是接收器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Called"); // Working fine

    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changetext:) name:@"update" object:nil]; 

     //even if set some object, nothing changed
}

- (void) changetext:(NSNotification *)notification {
    NSLog(@"Received"); // Not working
   leftLabel.text = [notification object];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:31:27.870

试试这个，当你想改变文本标签时，你必须从其他视图控制器发送通知..

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"changetext"        object:stringobj]; 
```

在主视图控制器中

```
 -(void)viewDidLoad

{
 [[NSNotificationCenter defaultCenter] removeObserver:self];
     [[NSNotificationCenter defaultCenter] addObserver:self    selector:@selector(changetext:) name:@"changetext" object:nil];

}

- (void) changetext:(NSNotification *)notification
{
   NSString * text =[notification object];
     lbl.text=text;

 } 
```

# common-lisp - 使用宏作为函数

> ID：14852472
> 
> 赞同：2
> 
> 时间：2013-02-13T11:26:35.830
> 
> 标签：common-lisp

我是 Common Lisp 的新手，所以这让我有点难过，谷歌让我失望了。

我有一个`sizzle`定义的函数

```
(defun sizzle (f &rest r) ...blah blah...) 
```

现在我只需要检查是否所有可选参数都不是零，所以我自然而然地做到了

```
(apply #'and r) 
```

...然后事实证明这`and`不是一个函数，它是一个宏（我还没有考虑到）。

所以，我的问题是，有没有办法将宏用作函数（很像上面），或者我应该只创建自己的函数来检查给定列表中的所有值是否非零？或者还有另一种我没有想到的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:32:52.083

您不能将宏用作函数（这就是为什么最好让某些东西发挥作用，这就是为什么使用编译器宏而不是常规宏进行优化的原因）。

我会使用`(every #'identity r)`or`(notany #'null r)`而不是为您的示例编写自己的`AND`函数。

# python - 关于在 python 中处理重定向

> ID：14852480
> 
> 赞同：0
> 
> 时间：2013-02-13T11:27:13.647
> 
> 标签：python, redirect, urllib2

我是 python 新手，正在尝试学习一些新模块。幸运或不幸的是，我选择了 urllib2 模块并开始将它与一个给我带来问题的 URL 一起使用。

首先，我创建了 Request 对象，然后在响应对象上调用 Read()。它失败了。结果它被重定向但错误代码仍然是200。不知道发生了什么。这是代码 -

```
def get_url_data(url):
    print "Getting URL " + url
    user_agent = "Mozilla/5.0 (Windows NT 6.0; rv:14.0) Gecko/20100101 Firefox/14.0.1"
    headers = { 'User-Agent' : user_agent }
    request = urllib2.Request(url, str(headers) )

    try:    
        response = urllib2.urlopen(request)
    except urllib2.HTTPError, e:
        print response.geturl()
        print response.info()
        print response.getcode()
        return False;
    else:
        print response
        print response.info()
        print response.getcode()
        print response.geturl()
        return response 
```

我用[http://www.chilis.com](http://www.chilis.com)调用上述函数。

我期待收到 301、302 或 303，但我看到的是 200。这是我看到的响应——

```
Getting URL http://www.chilis.com
<addinfourl at 4354349896 whose fp = <socket._fileobject object at 0x1037513d0>>
Cache-Control: private
Server: Microsoft-IIS/7.5
SPRequestGuid: 48bbff39-f8b1-46ee-a70c-bcad16725a4d
X-SharePointHealthScore: 0
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
MicrosoftSharePointTeamServices: 14.0.0.6120
X-MS-InvokeApp: 1; RequireReadOnly
Date: Wed, 13 Feb 2013 11:21:27 GMT
Connection: close
Content-Length: 0
Set-Cookie: BIGipServerpool_http_chilis.com=359791882.20480.0000; path=/

200
http://www.chilis.com/(X(1)S(q24tqizldxqlvy55rjk5va2j))/Pages/ChilisVariationRoot.aspx?AspxAutoDetectCookieSupport=1 
```

有人可以解释这个 URL 是什么以及如何处理吗？我知道我可以使用 Diveintopython.net 中的“处理重定向”部分，但在该页面上的代码中我也看到了相同的响应 200。

编辑：使用来自 DiveintoPython 的代码，我看到它是一个临时重定向。我不明白为什么代码中的 HTTP 错误代码是 200。这不应该是实际的返回代码吗？

EDIT2：现在我看得更清楚了，这根本不是一个奇怪的重定向。我正在编辑标题。

EDIT3：如果 urllib2 自动跟随重定向，我不确定为什么下面的代码没有获得 chilis.com 的首页。

```
docObj = get_url_data(url)
doc = docObj.read()
soup = BeautifulSoup(doc, 'lxml')
print(soup.prettify()) 
```

如果我使用浏览器最终被重定向到它的 URL，它就可以工作（[http://www.chilis.com/EN/Pages/home.aspx](http://www.chilis.com/EN/Pages/home.aspx)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:11:17.607

`urllib2`自动跟随重定向，因此您看到的信息来自被重定向到的页面。

如果您不希望它遵循重定向，则需要子类化`urllib2.HTTPRedirectHandler`. 这是有关如何执行此操作的相关 SO 帖子：[如何防止 Python 的 urllib(2) 遵循重定向](https://stackoverflow.com/questions/554446/how-do-i-prevent-pythons-urllib2-from-following-a-redirect/554580#554580)

关于编辑 3：看起来`www.chilis.com`需要接受 cookie。这可以使用 来实现`urllib2`，但我建议安装`requests`模块（[http://pypi.python.org/pypi/requests/](http://pypi.python.org/pypi/requests/)）。

以下似乎完全符合您的要求（没有任何错误处理）：

```
import requests

r = requests.get(url)
soup = BeautifulSoup(r.text, 'lxml')
print(soup.prettify()) 
```

# phpmyadmin - phpmyadmin 将文本从一个字段复制到另一个字段

> ID：14852482
> 
> 赞同：0
> 
> 时间：2013-02-13T11:27:15.567
> 
> 标签：phpmyadmin, copy, field

在 phpmyadmin 表 products_description 中，我想将“products_name”字段中的所有文本复制到“products_head_title_tag”字段，但如果“products_head_title_tag”字段已经有一些文本，那么我不希望它复制它。如何才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:35:31.533

在尝试之前备份您的数据：

```
update products_description set products_head_title_tag = products_name WHERE products_head_title_tag IS NULL; 
```

# python - 带有 python 后端的 Web 界面

> ID：14852483
> 
> 赞同：0
> 
> 时间：2013-02-13T11:27:17.200
> 
> 标签：python, cgi

我用 Python 开发了一个简单的应用程序（带有 Tkinter 接口）。但现在我想为此提供一个 Web 界面。我知道 python 脚本将作为 CGI 在服务器上运行。但我希望一切都发生在一个页面上，例如：

1.  有一个文本框供用户提供输入
2.  单击提交按钮时，python 脚本在输入上运行并生成输出
3.  输出显示在同一页面上，无需重新加载页面

我认为可以使用 Ajax 来做到这一点（如果这是唯一的方法，我会学习它），但是有没有更简单的方法来做到这一点？我尝试在 python 中生成前端，并将按钮链接到同一脚本中的函数，但这不起作用......

谢谢

PS：对不起，如果标题和标签有点误导......我不太确定该选择什么......

编辑：我试过这个，但它不起作用

```
#!/usr/bin/python2
import cgi

print 'Content-type: text/html'
print """
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Test</title>
    </head>
    <body>
"""

data = cgi.FieldStorage()
sometext = data['sometext'].value
if sometext != '':
    print "<p>" + sometext + "</p>"

print """
        <form action="test.py" method="post">
            <input type="text" name="sometext">
            <input type="submit">
        </form>
    </body>
</html>
""" 
```

# mysql - MySQL 联合缺少第二个查询的行

> ID：14852486
> 
> 赞同：1
> 
> 时间：2013-02-13T11:27:34.163
> 
> 标签：mysql, union, union-all

我有两个按预期分别工作的查询。当我一次使用联合来获取两个查询的结果时，不会从第二个查询中获取任何行。我的查询简化如下：

```
( select 
    tmp.inv_id AS inv_id,
    tmp.name AS inv_name,
    tmp.level AS inv_level,
    'archive' AS alarm_tpye,
    log.start_time AS start_time,
    log.end_time AS end_time 
  FROM tmp_raw_inventory AS tmp
  INNER JOIN log_alarm_archive AS log ON  tmp.inv_id=log.inv_id
  WHERE 
    log.start_time between STR_TO_DATE($date1,'%Y-%m-%d') and STR_TO_DATE($date2,'%Y-%m-%d')  OR
    log.end_time between STR_TO_DATE($date1,'%Y-%m-%d') and STR_TO_DATE($date2,'%Y-%m-%d')
) 

UNION

( select 
    tmp.inv_id AS inv_id,
    tmp.name AS inv_name,
    tmp.level AS inv_level,
    'active' AS alarm_tpye,
    log.alarm_time AS start_time,
    STR_TO_DATE($date1,'%Y-%m-%d') AS end_time 
  FROM tmp_raw_inventory AS tmp
  INNER JOIN log_alarm AS log ON  tmp.inv_id=log.inv_id
  WHERE 
    log.alarm_time between STR_TO_DATE($date1,'%Y-%m-%d') and STR_TO_DATE($date2,'%Y-%m-%d')
) 
```

$date1 和 $date2 是以正确形式传递的字符串日期参数。第一个查询的结果来了，但第二个查询的结果没有来。这些行不是唯一的，因此我使用了`UNION`. 在这次失败之后，我进行了测试，`UNION ALL`但结果没有改变。

您的帮助将不胜感激。

**更新：** 第一部分的结果如下：

```
inv_id, inv_name        , inv_level, alarm_type, start_time           , end_time
234231, 'inventory name', 'high'   , 'archive' , '2013-02-10 05:38:03', '2013-02-12 09:36:26'
234231, 'inventory name', 'high'   , 'archive' , '2013-02-10 16:10:18', '2013-02-10 17:03:13'
234231, 'inventory name', 'high'   , 'archive' , '2013-02-10 20:08:12', '2013-02-10 21:17:37' 
```

第二部分的结果如下：

```
inv_id, inv_name        , inv_level, alarm_type, start_time           , end_time
234231, 'inventory name', 'high'   , 'active' , '2013-02-10 23:27:03', '2013-02-11 00:00:00' 
```

整个查询的结果与第一部分相同。

# javascript - 'DateTime' 类型的字段 'EventDate' 不能在查询过滤器表达式中使用

> ID：14852488
> 
> 赞同：1
> 
> 时间：2013-02-13T11:27:34.803
> 
> 标签：javascript, sharepoint, sharepoint-2013

我正在尝试通过 SharePoint Web api 过滤标准日历事件，我的查询如下所示：

```
/_api/web/lists/getbytitle('calendar')/items?$filter=( EventDate  ge  datetime'2013-01-26T22:00:00Z')&$select=Title,EventDate,ID 
```

查询不起作用，我收到此错误：

> 'DateTime' 类型的字段 'EventDate' 不能在查询过滤器表达式中使用

错误详情：

```
{"error":{"code":"-1, Microsoft.SharePoint.SPException","message":{"lang":"en-US","value":"'DateTime' 类型的字段 'EventDate' ' 不能在查询过滤器表达式中使用。"},"innererror":{"message":"类型为 'DateTime' 的字段 'EventDate' 不能在查询过滤器表达式中使用。","type":"Microsoft .SharePoint.SPException","stacktrace":" at Microsoft.SharePoint.SPListItemEntityCollectionCamlQueryBuilder.CheckFieldRefUsage(SPField field, FieldRefUsage fieldRefUsage)\r\n at Microsoft.SharePoint.SPListItemEntityCollectionCamlQueryBuilder.SetFieldRef(XmlWriter writer, String fieldPath, FieldRefUsage fieldRefUsage, Action` 1 attributeAction)\r\n 在 Microsoft。SharePoint.SPListItemEntityCollectionCamlQueryBuilder.SetWhereBinaryOp(XmlWriter writer, EdmParserNode parseNode)\r\n 在 Microsoft.SharePoint.SPListItemEntityCollectionCamlQueryBuilder.SetViewQuery(SPQuery 查询, XmlWriter writer, StringBuilder sb)\r\n 在 Microsoft.SharePoint.SPListItemEntityCollectionCamlQueryBuilder.BuildCamlQuery()\r \n 在 Microsoft.SharePoint.SPListItemEntityCollectionCamlQueryBuilder..ctor（SPList 列表，RESTfulQuery restQuery，Nullable`1 itemId）\r\n 在 Microsoft.SharePoint.SPListItemEntityCollection.TryWriteAsOData（ODataWriter writer，RESTfulQuery 查询，ProxyContext proxyContext）\r\n 在Microsoft.SharePoint.Client.ServerStub.Write(Object value, Uri path, ODataWriter writer, RESTfulQuery query, ProxyContext proxyContext)\r\n 在 Microsoft.SharePoint.Client.Rest.RestRequestProcessor.Process()\r\n 在 Microsoft。SharePoint.Client.Rest.RestRequestProcessor.ProcessRequest()\r\n 在 Microsoft.SharePoint.Client.Rest.RestService.ProcessQuery(Stream inputStream, IList`1 pendingDisposableContainer)","internalexception":{"message":"该字段'DateTime' 类型的 'EventDate' 不能在查询过滤器表达式中使用。","type":"Microsoft.SharePoint.Client.InvalidClientQueryException","stacktrace":""}}}}Microsoft.SharePoint.Client.InvalidClientQueryException","stacktrace":""}}}}Microsoft.SharePoint.Client.InvalidClientQueryException","stacktrace":""}}}}

```

是否可以在过滤查询表达式中以某种方式使用 DateTime 字段类型？

更新：我发现我可以通过 ListData.svc 做到这一点，例如

```
/_vti_bin/ListData.svc/Calendar?$filter=StartTime+ge+datetime'2011-11-23' 
```

更多细节在这里 - [http://itblog.wolthaus.net/2011/12/rest-filter-datetime/](http://itblog.wolthaus.net/2011/12/rest-filter-datetime/)

我试图从 /_api/web/ 查询中删除时间部分，例如

```
/_api/web/lists/getbytitle('calendar')/items?$filter=( EventDate  ge  '2013-01-26')&$select=Title,EventDate,ID 
```

但它没有帮助，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-12T12:58:48.460

尝试 Web 服务（旧的、非 REST）端点。这就是我在我的项目中使用的。REST 端点也有许多其他 Odata 构造的问题（例如 $skip）。

```
https://.../_vti_bin/ListData.svc/Calendar?$select=Title,EventDate,ID&$filter=EventDate ge datetime'2013-01-26' 
```

# android - 在 Google Map V2 API 上绘制多个圆圈

> ID：14852491
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:27:42.667
> 
> 标签：android, google-maps

我想在谷歌地图 V2 中画圆。我试过使用地面覆盖，但它没有按我的意愿显示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-14T18:49:46.070

您可以在谷歌地图广告中添加一个圆圈，如下所示：

```
 GoogleMap gMap = ...; //get ref to gMap
    CircleOptions circleOptions = new CircleOptions();
    circleOptions.center(latLang point);
    circleOptions.fillColor(/* add fill color here */);
    circleOptions.strokeColor(/* add stoke color here*/);
    circleOptions.strokeWidth(/* stroke width here*/);

   Circle circle = this.getMap().addCircle(circleOptions); 
```

如果需要，您可以稍后使用此圆形对象将其从地图中删除。

# javascript - 无法为元素设置值

> ID：14852497
> 
> 赞同：0
> 
> 时间：2013-02-13T11:28:26.457
> 
> 标签：javascript

我试图在javascript中为元素（id ctl30_txtTextBox）设置一个值。

```
$.ajax({
     type: "POST",
     contentType: "application/json; charset=utf-8",
     url: "IndexMask.aspx/AttachBarcodeFile",
     dataType: "json",
     data: params,
     success: function() {
         $("#<%= DummyPostbackButton.ClientID %>").click();
         var someOtherName = "abc";
         var element = document.getElementById("ctl30_txtTextBox");
         element.Value = someOtherName;
         alert(element.value.toString());
     },
     error: function(request, status, error) {
         alert("Error attaching barcode file.");
     }
 }); 
```

我得到了元素，但从未设置过值。如果我在页面上设置了一个值，则会以正确的值显示警报。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:30:01.887

Javascript 是区分大小写的，所以它应该是：

```
 var element = document.getElementById("ctl30_txtTextBox");
 element.value = someOtherName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:30:20.503

```
element.Value 
```

那 `v` 是小写的。Javascript值方法名称不是`.value`方法`.Value`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:30:24.423

你可以使用 jQuery 来做到这一点：

```
$('#ctl30_txtTextBox').val(someOtherName); 
```

它应该工作。

# c# - 如何在asp.net web表单中添加弹出窗口

> ID：14852501
> 
> 赞同：0
> 
> 时间：2013-02-13T11:28:31.207
> 
> 标签：c#, javascript, asp.net, ajax

我想添加一个弹出窗口，它是我的主 asp.NET 表单的子窗口。该窗口通过用户选择的下拉列表接受信息。打开此窗口时，焦点将转到此窗口，主窗口将禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:05:37.533

使用 showModalDialog 打开弹出窗口。

```
window.showModalDialog("childpage.aspx", "", "center:yes;resizable:no;dialogHeight:480px;dialogWidth:750px;"); 
```

这将使父页面在 IE 中被禁用。

# c# - log4net 包装器中的错误文件和行

> ID：14852508
> 
> 赞同：2
> 
> 时间：2013-02-13T11:28:50.197
> 
> 标签：c#, log4net, wrapper

我写了一个 log4net 包装器

```
public class Log4NetWrapper : ILogger
{
    private readonly log4net.ILog logger;

    public Log4NetWrapper(string loggerName)
    {
        logger = log4net.LogManager.GetLogger(loggerName);
    }

    public void Debug(string message, params object[] values)
    {
        logger.DebugFormat(message, values);
    }

    public bool IsDebugEnabled {get { return logger.IsDebugEnabled; } }

    ...

} 
```

问题是我在记录时得到的行和文件是包装的，而不是消息的实际位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:41:24.860

这是设计使然，如果您对首先引发异常的行和文件感兴趣，则应记录异常对象或其堆栈跟踪成员，如果您已配置 log4net 文件附加程序以显示消息所在的文件和行是从写的，找到你的包装器是正常的，但是当记录异常和堆栈跟踪时，你会找到正确的内容。

在我们的附加程序中，我们有以下内容，所以我们甚至不显示包装类名称或文件/行......

```
<log4net>
<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
    <threshold value="ALL"/>
    <immediateFlush>true</immediateFlush>
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
    <encoding value="utf-8"/>
    <file value="D:\Axis\RPP\Logs\myLogFile.log" />
    <appendToFile value="true"/>
    <rollingStyle value="Date" />
    <maxSizeRollBackups value="30" />
    <maximumFileSize value="25MB" />
    <staticLogFileName value="true"/>
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="[%property{log4net:HostName}] - %username%newline%utcdate - %-5level - %message%newline"/>
    </layout>
</appender>

<root>
    <priority value="ALL"/>
    <appender-ref ref="FileAppender"/>
</root> 
```

# ios - iOS- UITapGestureRecognizer 提供 EXC_BAD_ACCESS

> ID：14852518
> 
> 赞同：0
> 
> 时间：2013-02-13T11:29:28.177
> 
> 标签：ios, objective-c, exc-bad-access

我想在我的自定义标题类中添加点击事件。以下是我的代码。当我单击标题区域时，它会给出 EXC_BAD_ACCESS。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        UITapGestureRecognizer *singleFingerTap =
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                                action:@selector(handleSingleTap:)];
        [self.view addGestureRecognizer:singleFingerTap];

    }

    return self;
}

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint location = [recognizer locationInView:[recognizer.view superview]];

    //Do stuff here...
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:39:50.267

```
//At View did load
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
    tapRecognizer.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:tapRecognizer];

- (void)tapDetected:(UITapGestureRecognizer *)tapRecognizer
{
   //addcodehere
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:37:49.597

如果您的自定义标头类是`UIView` 手段的子类，则使用`self`而不是`self.view`

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
tapRecognizer.numberOfTapsRequired = 1;

[self.view addGestureRecognizer:tapRecognizer];

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint location = [recognizer locationInView:[recognizer.view superview]];

//Do stuff here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:40:52.620

可能这对你有帮助......

```
 {
    UITapGestureRecognizer *tapGestureRecognizer;
    self.view.backgroundColor = [UIColor whiteColor];
    /* Create the Tap Gesture Recognizer */
    self.tapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                 initWithTarget:self action:@selector(handleTaps:)];
   self.tapGestureRecognizer.numberOfTouchesRequired = 2;

    self.tapGestureRecognizer.numberOfTapsRequired = 3;
    [self.view addGestureRecognizer:self.tapGestureRecognizer];
}
- (void) handleTaps:(UITapGestureRecognizer*)paramSender
{
    NSUInteger touchCounter = 0; for (touchCounter = 0;
                                      touchCounter < paramSender.numberOfTouchesRequired;
                                      touchCounter++)
    {
        CGPoint touchPoint =
        [paramSender locationOfTouch:touchCounter inView:paramSender.view];
        NSLog(@"Touch #%lu: %@",(unsigned long)touchCounter+1, NSStringFromCGPoint(touchPoint));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T11:41:14.647

尝试在 ViewDidLoad 中执行，而不是在 init 方法中执行。

```
- (void)viewDidLoad
{ 
    [super viewDidLoad];

    UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self
                                            action:@selector(handleSingleTap:)];
    [self.view addGestureRecognizer:singleFingerTap];
  // Do any additional setup after loading the view from its nib.
} 
```

并将此方法包含在类扩展中，

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer ; 
```

或者写在viewDidLoad之前。

# javascript - 将 D3 图形嵌入到车把模板中

> ID：14852520
> 
> 赞同：2
> 
> 时间：2013-02-13T11:29:32.817
> 
> 标签：javascript, d3.js, handlebars.js

我正在尝试将 d3 图嵌入到车把模板中，但是当我嵌入车把的对象 registryhelper 时，返回 [object SVGSVGElement] 而不是 html。

**带有车把注册表帮助器的 D3 图形**

```
 Handlebars.registerHelper('list', function() {
 svg = d3.select('p').append("svg").attr("width",w).attr("height",h);
 var rect1 =svg.append("rect").attr("x",0).attr("y",3*h/4).
 attr("width",w).attr("height",rect_1_h).style("fill",rect_1_color);
 return svg;
 }); 
```

**车把模板**

```
{{#each objects}}
 <tr>
 <td><p>{{#list}}{{/list}}</p></td>
 </tr>
 {{/each}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:40:26.510

Handlebars 正在显示对象的`toString`值`svg`。

使用`html()`方法获取 的 HTML 表示`svg`，见[https://github.com/mbostock/d3/wiki/Selections#wiki-html](https://github.com/mbostock/d3/wiki/Selections#wiki-html)

然后用于`Handlebars.SafeString`指示 Handlebars 不转义 HTML，如下所示：`return new Handlebars.SafeString(svg.html())`

但在此之前，请考虑您的示例中的一些问题：

1.  您正在使用`d3.select`这意味着，从 DOM 中选择一个元素。然后你会直接影响 DOM 中的那个元素。不像“函数”那样工作，可能你想要做的是`p`在内存中创建元素。或者，也许您可​​以在不创建 Handlebars 助手的情况下解决使用 DOM 的问题。

2.  一个小问题：添加`var`到 svg 或者您将使用全局。

# html - Internet Explorer 9 兼容模式

> ID：14852524
> 
> 赞同：0
> 
> 时间：2013-02-13T11:29:54.283
> 
> 标签：html, internet-explorer, cross-browser

我有这个 HTML，对 w3c 有效：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="ISO-8859-1">
        <title>COMUNE DI MILANO</title>
    </head>
    <body>
        <h1>Ciao Mamma</h1>
    </body>
</html> 
```

不知道为什么IE切换到兼容模式。我发现了一个强制兼容模式的元标记，但我想知道如何构建一个有效的 HTML 页面..

有人知道什么会导致切换吗？它可能取决于 Apache 版本/配置？

非常感谢，戴维德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:31:40.257

尝试检查与它一起发送的标头，看看是否有一个`X-UA-Compatible`标头被设置为不受欢迎的东西。

# php - Blackberry：如何从 java 中的 php 获取特定的参数/变量？

> ID：14852530
> 
> 赞同：0
> 
> 时间：2013-02-13T11:30:06.370
> 
> 标签：php, variables, blackberry

我是 php 新手。请问谁能指导我完成这个？我有一个 php，其中有一些变量作为标志。当这些标志设置/为真时，我会在我的黑莓中启动这些服务，否则不会。我的应用程序一直在听我的 php，当这些标志为真时，它会启动相应的服务，而其他服务则保持关闭。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:15:27.250

听起来你想要推送通知。

如果你通过“监听”一个 php 页面来做到这一点，你将不得不重复地向那个 php 页面发出请求。您可以进行长轮询，但这在手机上效果不佳……每次连接断开时，您都需要重新连接，而且自己编写所有客户端代码很麻烦。PHP 也不是用于推送通知的好语言，因为在 Web 服务器端，一旦 php 与您的黑莓机建立连接，就没有简单的方法将信息推送到 php。由于 PHP 不是多线程的（在典型的 Web 服务器配置中），您很可能会再次忙于轮询 Web 服务器磁盘上文件中的某些通知，而不仅仅是接收和处理来自消息队列或套接字/io 连接。

大多数手机开发工具包都内置了 API 来处理推送通知。据我了解，重复使用这些系统会利用现有架构，这意味着手机只连接到一台服务器，这样可以节省电池寿命。

我从未做过任何黑莓开发，但您可能应该首先搜索有关在黑莓中实现推送通知的信息/教程。

如果我错了，而您只是希望能够为您的黑莓应用程序获得配置选项，那么这很容易。您的 php 页面只是以客户端（黑莓）可以读取的任何格式（如 json、xml、key=value 等）吐出信息，黑莓对其进行解析并对其进行操作。

# java - 在运行时禁用 JComboBox 项

> ID：14852539
> 
> 赞同：5
> 
> 时间：2013-02-13T11:30:40.673
> 
> 标签：java, swing, jcombobox

1.当用户从 JComboBox 中选择项目时，我创建了一个 JComboBox 和 Jtable，它们被添加到 JTable 中。
2.我不想让用户在JComboBox中选择他之前选择过的项目。
3.所以选择的选项必须被禁用**（不可选择）**。我该怎么做？4.下面的代码在 JTable 中添加后从 JComboBox 中删除了选定的项目，但我有兴趣禁用它

```
 String getchoice=(String)selectedgames_combobox.getSelectedItem();

        DefaultTableModel gamesmodel = new DefaultTableModel(); 

        //adding selected choices from JComboBox in JTable 
        gamesmodel.addColumn("Selected Games");     
        gamesmodel.insertRow(gamesmodel.getRowCount(),new Object[]{ getchoice }) ;  

        //refreshing table
        games_table.setModel(gamesmodel);

        //removing the selected item from JComboBox
        selectedgames_combobox.removeItem(getchoice); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:35:40.073

假设您有一个列表，其中包含一些应禁用的元素，您需要更改禁用元素的外观并需要阻止用户选择这些项目。为了能够防止用户选择禁用的，您需要覆盖这样`setSelectedIndex`的方法`JComboBox`：

```
public void setSelectedIndex(int index) {
   if (!disabled_items.contains(index)) {
       super.setSelectedIndex(index);
   }
} 
```

您也可以`BasicComboBoxRenderer`像这样更改项目的颜色：

```
if (disabled_items.contains(index)) {
     setBackground(list.getBackground());
     setForeground(UIManager.getColor("Label.disabledForeground"));
} 
```

[欲知详情](http://raginggoblin.wordpress.com/2010/05/04/jcombobox-with-disabled-items/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:03:32.903

这是我的解决方案（可能有用）

```
/**
 * A ComboBox with Enabling/disabling items support
 */
public class AvailableItemComboBox extends JComboBox {
    private static final long serialVersionUID = 1L;

    // previosly chosen item
    protected int old = -1;

    /**
     * Default constructor
     */
    public AvailableItemComboBox() {
        super();
        setRenderer(new EnabledJComboBoxRenderer());    
        initializeComboBox();
    }

    /**
     * Constructor with model
     * 
     * @param model
     */
    public AvailableItemComboBox(ComboBoxModel model) {
        super(model);
        setRenderer(new EnabledJComboBoxRenderer());
        initializeComboBox();
        System.out.println("selected index is " + getSelectedIndex());
    }

    /**
     * Constructor with data
     * 
     * @param model
     */
    public AvailableItemComboBox(Available[] items) {
        super(items);
        setRenderer(new EnabledJComboBoxRenderer());
        initializeComboBox();
        System.out.println("selected index is " + getSelectedIndex());
    }

    private void initializeComboBox() {
        setSelectedIndex(findFirstAvailableItem());

        addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {    
                System.out.println("Listener called>>>>>>>>>>>>>>>>>>");                
                if (old != getSelectedIndex()) {
                    if (!((Available) getSelectedItem()).isEnabled()) {
                        setSelectedIndex(old);
                    } else {
                        old = getSelectedIndex();
                    }
                }
            }       
        });
    }

    // Finds first selecteditem and sets it as previous state
    private int findFirstAvailableItem() {
        int result = -1;

        for (int index = 0; index < this.getItemCount(); index++) {
            if (((Available)this.getItemAt(index)).isEnabled()) {
                result = index;
                break;
            }
        }

        old = result;
        return result;
    }
}

public class EnabledJComboBoxRenderer extends BasicComboBoxRenderer {
private static final long serialVersionUID = 1L;

private Color disabledColor = Color.lightGray;

/**
 * Constructs a new renderer for a JComboBox which enables/disables items
 * based upon the parameter model.
 * 
 * @param enabled
 */
public EnabledJComboBoxRenderer(){
    super();        
}

/**
 * Sets the color to render disabled items.
 *  
 * @param disabledColor
 */
public void setDisabledColor(Color disabledColor){
    this.disabledColor = disabledColor;
}

/**
 * Custom implementation to color items as enabled or disabled.
 * 
 * @inheritDoc
 */
@Override
public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
    Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);

    boolean enabled = ((Available) value).isEnabled();

    if (!enabled) {
        if (isSelected) {
            c.setBackground(UIManager.getColor("ComboBox.background"));
        } else {
            c.setBackground(super.getBackground());
        }
        c.setForeground(disabledColor);
    } else {
        c.setBackground(super.getBackground());
        c.setForeground(super.getForeground());
    }

    return c;
} 
```

}

```
public interface Available {
public boolean isEnabled();
public void setEnabled(boolean enable); 
```

}

# javascript - 如果颜色值无效 - JavaScript

> ID：14852545
> 
> 赞同：0
> 
> 时间：2013-02-13T11:30:58.827
> 
> 标签：javascript, colors, hex, rgb

如果您输入错误的代码（颜色值），我的 JavaScript 代码有问题，那么它一定是黑色的。但是当我输入像“blablabla”这样的东西时，我会输入最后一个例如：我写红色然后它会是一个红色圆圈，但是之后当我写 blablabla 时也会是红色的，我只想当我写一个错误的颜色字它会是黑色我想我必须写一个 rgb 代码所以功能会检查我写的对还是错

```
function getPos(canvas, event){

    var a = new Number();
    var b = new Number();
    var canvas= document.getElementById("can1");

    if (event.a != undefined && event.b != undefined)
    {
      a = event.a;
      b = event.b;
    }
    else
    {
      a = event.clientX + document.body.scrollLeft +
          document.documentElement.scrollLeft;
      b = event.clientY + document.body.scrollTop +
          document.documentElement.scrollTop;
    }
    a -= canvas.offsetLeft;
    b -= canvas.offsetTop;

    var ctx = canvas.getContext("2d");
    var color1 = document.getElementById('color');
    var size = document.getElementById('size');
    ctx.beginPath();

    if ( size.value > 0)
        {
        ctx.arc(a,b,size.value, 275*(Math.PI/180), 635*(Math.PI/180), false);
        }
    else
        {
        ctx.arc(a,b,15, 275*(Math.PI/180), 635*(Math.PI/180), false);
        } 

    if (color1.value.length < 0)
        {   
        ctx.fillStyle = "#000000";

        }

    else if (color1.value.length == 0) 
        {
        ctx.fillStyle = '#000000';
        }

    else
        {
        ctx.fillStyle = color1.value; 
        }

        ctx.fill();
        ctx.stroke();
        ctx.closePath();
        window.localStorage['IMG'] = canvas.toDataURL();
} 
```

我猜问题出在这里：

```
if (color1.value.length < 0)
        {   
        ctx.fillStyle = "#000000";

        }

    else if (color1.value.length == 0) 
        {
        ctx.fillStyle = '#000000';
        }

    else
        {
        ctx.fillStyle = color1.value; 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:56:11.340

您应该检查有效的十六进制或颜色名称。该解决方案由两个答案构建而成，并且是用心编写的：

*   [将颜色名称转换为十六进制代码的 Javascript 函数](https://stackoverflow.com/a/1573141/1456376)
*   [如何检查字符串是否是有效的十六进制颜色表示？](https://stackoverflow.com/a/8027444/1456376)

* * *

```
function colorNameToHex(color) {
    var colors = {
        "aliceblue":"#f0f8ff","antiquewhite":"#faebd7","aqua":"#00ffff","aquamarine":"#7fffd4","azure":"#f0ffff","beige":"#f5f5dc","bisque":"#ffe4c4","black":"#000000","blanchedalmond":"#ffebcd","blue":"#0000ff","blueviolet":"#8a2be2","brown":"#a52a2a","burlywood":"#deb887","cadetblue":"#5f9ea0","chartreuse":"#7fff00","chocolate":"#d2691e","coral":"#ff7f50","cornflowerblue":"#6495ed","cornsilk":"#fff8dc","crimson":"#dc143c","cyan":"#00ffff","darkblue":"#00008b","darkcyan":"#008b8b","darkgoldenrod":"#b8860b","darkgray":"#a9a9a9","darkgreen":"#006400","darkkhaki":"#bdb76b","darkmagenta":"#8b008b","darkolivegreen":"#556b2f","darkorange":"#ff8c00","darkorchid":"#9932cc","darkred":"#8b0000","darksalmon":"#e9967a","darkseagreen":"#8fbc8f","darkslateblue":"#483d8b","darkslategray":"#2f4f4f","darkturquoise":"#00ced1","darkviolet":"#9400d3","deeppink":"#ff1493","deepskyblue":"#00bfff","dimgray":"#696969","dodgerblue":"#1e90ff","firebrick":"#b22222","floralwhite":"#fffaf0","forestgreen":"#228b22","fuchsia":"#ff00ff","gainsboro":"#dcdcdc","ghostwhite":"#f8f8ff","gold":"#ffd700","goldenrod":"#daa520","gray":"#808080","green":"#008000","greenyellow":"#adff2f","honeydew":"#f0fff0","hotpink":"#ff69b4","indianred":"#cd5c5c","indigo":"#4b0082","ivory":"#fffff0","khaki":"#f0e68c","lavender":"#e6e6fa","lavenderblush":"#fff0f5","lawngreen":"#7cfc00","lemonchiffon":"#fffacd","lightblue":"#add8e6","lightcoral":"#f08080","lightcyan":"#e0ffff","lightgoldenrodyellow":"#fafad2","lightgrey":"#d3d3d3","lightgreen":"#90ee90","lightpink":"#ffb6c1","lightsalmon":"#ffa07a","lightseagreen":"#20b2aa","lightskyblue":"#87cefa","lightslategray":"#778899","lightsteelblue":"#b0c4de","lightyellow":"#ffffe0","lime":"#00ff00","limegreen":"#32cd32","linen":"#faf0e6","magenta":"#ff00ff","maroon":"#800000","mediumaquamarine":"#66cdaa","mediumblue":"#0000cd","mediumorchid":"#ba55d3","mediumpurple":"#9370d8","mediumseagreen":"#3cb371","mediumslateblue":"#7b68ee","mediumspringgreen":"#00fa9a","mediumturquoise":"#48d1cc","mediumvioletred":"#c71585","midnightblue":"#191970","mintcream":"#f5fffa","mistyrose":"#ffe4e1","moccasin":"#ffe4b5","navajowhite":"#ffdead","navy":"#000080","oldlace":"#fdf5e6","olive":"#808000","olivedrab":"#6b8e23","orange":"#ffa500","orangered":"#ff4500","orchid":"#da70d6","palegoldenrod":"#eee8aa","palegreen":"#98fb98","paleturquoise":"#afeeee","palevioletred":"#d87093","papayawhip":"#ffefd5","peachpuff":"#ffdab9","peru":"#cd853f","pink":"#ffc0cb","plum":"#dda0dd","powderblue":"#b0e0e6","purple":"#800080","red":"#ff0000","rosybrown":"#bc8f8f","royalblue":"#4169e1","saddlebrown":"#8b4513","salmon":"#fa8072","sandybrown":"#f4a460","seagreen":"#2e8b57","seashell":"#fff5ee","sienna":"#a0522d","silver":"#c0c0c0","skyblue":"#87ceeb","slateblue":"#6a5acd","slategray":"#708090","snow":"#fffafa","springgreen":"#00ff7f","steelblue":"#4682b4","tan":"#d2b48c","teal":"#008080","thistle":"#d8bfd8","tomato":"#ff6347","turquoise":"#40e0d0","violet":"#ee82ee","wheat":"#f5deb3","white":"#ffffff","whitesmoke":"#f5f5f5","yellow":"#ffff00","yellowgreen":"#9acd32"
    };

    if (typeof colors[color.toLowerCase()] != 'undefined')
        return colors[color.toLowerCase()];

    return false;
}

function checkHex(color) {
    return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(color);
}

var color = color1.value;

if (checkHex(color) || colorNameToHex(color)) {
    ctx.fillStyle = color;
} else {
    ctx.fillStyle = "#000000";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:52:07.477

如果您能够获得输入的彩色文本，则将其与以下格式进行比较-

```
var isValidColor  = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test('Your color code here') 
```

例如-

```
var isValidColor  = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test('#aabbcc') 
```

# css - HTML 网站向左移动

> ID：14852547
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:31:01.207
> 
> 标签：css, html, twitter-bootstrap, containers

我正在编写一个网站`http://198.175.127.18/`。在昨天很多事情都正常工作之后，该站点刚刚向左移动。我检查了所有打开的 HTML`div`并检查了 CSS。我认为问题出在容器类上，但经过数小时后我还没有弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:32:00.053

添加`margin:0 auto`到`.container`

```
.container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container {
width: 940px;
margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:45:37.903

添加**边距：0自动；**到类 .container、.navbar-static-top .container、.navbar-fixed-top .container、.navbar-fixed-bottom .container

和

将**overflow-x:hidden**添加到body 以移除水平滚动条

# sed - 澄清“sed”的用法

> ID：14852550
> 
> 赞同：0
> 
> 时间：2013-02-13T11:31:15.060
> 
> 标签：sed

我只是盲目地按照教程中的命令一次重命名多个文件夹。任何人都可以解释作为 sed 的 -e 选项参数给出的“p;s”的含义。

```
[root@LinuxD delsure]# ls
ar1  ar2  ar3  ar4  ar5  ar6  ar7
[root@LinuxD delsure]# find . -type d -name "ar*"|sed  -e "p;s/ar/AR/g"|xargs  -n2  mv
[root@LinuxD delsure]# ls
AR1  AR2  AR3  AR4  AR5  AR6  AR7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:36:41.590

-e 选项的参数是由两个命令组成的脚本。第一个是`p`，它打印纯粹的输入，第二个是标准的全局替换。所以对于输入`ar1`，这应该输出

```
ar1
AR1 
```

这个技巧的另一部分是 xargs 上的 -n2 选项，它强制它一次只使用两个参数（而不是它可以处理的尽可能多的参数，这会产生非常不同的结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:43:37.207

一个`sed`脚本（选项后面的位`-e`）可以包含多个命令，由`;`

您示例中的脚本使用`p`命令打印模式空间（即刚从输入中读取的行），然后使用`s`命令对模式空间执行替换。

默认情况下（除非模式空间被清除或`-n`为 sed 提供了选项）在处理每一行后，当前模式空间行会再次打印，因此将打印替换的结果。

编写相同内容的另一种方法是：

```
sed  -e "p" -e "s/ar/AR/g" 
```

这将命令分成两个脚本。另一种方法是：

```
sed "p;s/ar/AR/g" 
```

因为如果 sed 的唯一参数是脚本，则`-e`不需要该选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:22:30.990

bash 中的一种方式：

```
$ ls
ar6  ar7

$ find . -name 'ar*' | while IFS= read -r file; do echo mv "$file" "${file^^}"; done
mv ./ar6 ./AR6
mv ./ar7 ./AR7 
```

当您对输出感到满意时，请摆脱“回声”。

# java - 爱普生 TM-T70 Java 打印

> ID：14852552
> 
> 赞同：2
> 
> 时间：2013-02-13T11:31:21.097
> 
> 标签：java, printing, epson, javapos

我需要使用 Java 打印到 Epson TM-T70 打印机（以太网版）。我找不到有关此的文档。哪种方法最简单？也许使用[JavaPOS](http://www.javapos.com/)？有例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:37:43.477

对于我们的职位，我能够做到：

```
/* (non-Javadoc)
 * @see be.intoit.pos.epsonagent.commands.Command#execute()
 */
public void execute() throws Exception {
    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;

    StringBuilder  builder = new StringBuilder();
    builder.append(toPrint);
    builder.append(EscapeCodeUtil.createEscapeCode(10));

    PrintRequestAttributeSet aset= new HashPrintRequestAttributeSet();
    aset.add(new MediaPrintableArea(100,400,210,160,Size2DSyntax.MM));

    InputStream is = new ByteArrayInputStream(builder.toString().getBytes("UTF-8"));

    Doc mydoc = new SimpleDoc(is, flavor, null);

       PrintService defaultService = PrintServiceLookup.lookupDefaultPrintService();

        //print using default
       DocPrintJob
                 job = defaultService.createPrintJob();
                job.print(mydoc, aset);    

} 
```

util类在哪里：

```
public class EscapeCodeUtil {

public static String createEscapeCode(int ... codes)
{
    StringBuilder sb = new StringBuilder();

    for(int code : codes)
        sb.append((char) code);

    return sb.toString();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T22:15:19.960

这剪纸

```
Socket sock = new Socket(IP_printer, 9100);
PrintWriter oStream = new PrintWriter(sock.getOutputStream());
oStream.print(""+(char)29+(char)86+(char)0); 
```

# java - 是否可以从 RestEASY MessageBodyReaderInterceptor 中的 MessageBodyReaderContext 获取 @PathParam 或 @QueryParam？

> ID：14852553
> 
> 赞同：1
> 
> 时间：2013-02-13T11:31:21.573
> 
> 标签：java, rest, parameters, resteasy, interceptor

我的服务：

```
@POST
public String setData(@QueryParam("id") Long is, MyObject payload) {
...
}

or

@POST
public String setData(@PathParam("id") Long is, MyObject payload) {
...
} 
```

我在服务器上的拦截器：

```
Object read(MessageBodyReaderContext context) throws IOException, WebApplicationException {

Class mypayloadtype = context.getType;

InputStream mypayloadinpustream = context.getInputStream();

Long myidparam = ???????? // how to get the query or path param here?

} 
```

**编辑：**更具体一点：

我想做的是获取 XML 并根据参数将其存储在单独的审计系统中。也许 PreProcessInterceptor / PostProcessInterceptor 是更好的选择？

当 xml 仍可用于预处理时，是否有任何提示或替代方法来获取参数？

米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:52:00.307

我今天偶然发现了同样的问题。我需要方法中的`@PathParam`s 和`@QueryParam`s`read()`并最终得到如下内容：

```
public class MyInterceptor implements PreProcessInterceptor, MessageBodyReaderInterceptor
{
    private static ThreadLocal<UriInfo> uri = new ThreadLocal<UriInfo>();

    public ServerResponse preProcess(HttpRequest request, ResourceMethod method)
    {
         uri.set(request.getUri);
         ...
    }

    public Object read(MessageBodyReaderContext context)
    {
        String param = uri.get().getPathParameters().getFirst("myidparam");
        ...
    }
} 
```

虽然现在考虑它 - 我不太确定，如果只是使用`PreProcessInterceptor`/`PostProcessInterceptor`也会解决我的（也许是你的）问题。我明天再看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:12:29.023

我不是该主题的专家，但对我来说，`MessageBodyReaderContext`界面似乎并不真正知道它是在服务器端还是在客户端，因此它无法公开请求或其参数/路径部分等。

据我所知，这是不可能的。

如果您的代码知道它位于其余通信的服务器端，也许您可​​以使用 servlet 过滤器将请求存储在 ThreadLocal 中，然后在处理请求时从那里访问它，有点类似于`RequestContextFilter`/`RequestContextHolder`来自 spring 框架? （然后请求对象对您的服务的注释一无所知，而是必须手动从请求中提取信息。这意味着在两个地方有相同的信息，所以必须有一个更好的解决方案.. .)

**编辑**：在看了一些例子之后，我有一种模糊的感觉，如果你想读取输入流来创建一个对象并向它添加路径参数，那`MessageBodyReaderInterceptor`根本不是要走的路。而是设置 a `MessageBodyReader`which 从请求正文数据构造对象，然后将 this 传递给`public String setData(@PathParam("id") Long is, MyObject payload)`，假设此方法使用与. 的注释`@Consumes`匹配的a`@ConsumeMime`注释`MessageBodyReader`。在那里，您可以在`setData`从请求正文中读取的对象上设置缺少的 id。与此相关的一些示例似乎在这里：[How to get full REST request body using Jersey?](https://stackoverflow.com/questions/1725315/how-to-get-full-rest-request-body-using-jersey) （但对于泽西岛，不是 jBoss :-/）

但是我不确定这是否适合你，而且我也觉得我完全高估了我正确回答这个问题的能力，所以我希望有更多知识的人能提供更好的解决方案。

# authentication - 使用google js api对用户进行身份验证并获取用户的google id

> ID：14852554
> 
> 赞同：0
> 
> 时间：2013-02-13T11:31:23.250
> 
> 标签：authentication, google-api, google-api-js-client

我用这个作为参考：

[https://code.google.com/p/google-api-javascript-client/wiki/Authentication](https://code.google.com/p/google-api-javascript-client/wiki/Authentication)

我正在尝试对用户进行身份验证，然后在身份验证后获取他/她的 google_id。

我有一个名为“使用 google 登录”的按钮，当用户单击它时，它会启动一个弹出窗口，询问他/她是否要授权该应用程序。之后，当它尝试对此进行 GET 操作时，它会抛出一个错误，说“错误请求”和“400 未找到”

[https://www.googleapis.com/discovery/v1/apis/plus/v1/](https://www.googleapis.com/discovery/v1/apis/plus/v1/) ***/* **** / *** ** 400（错误请求）

我正在使用与上述 api 中描述的相同的代码。

我还交叉检查了 api 密钥和客户端 ID，但一切似乎都很好。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T21:55:26.477

您最好的选择是迁移到[Google+ 登录](https://developers.google.com/+/web/signin/)。它使用相同的 JS 客户端，但为您做了很多艰苦的工作。

# internet-explorer - 使用未标记为可导出的私钥的证书

> ID：14852556
> 
> 赞同：1
> 
> 时间：2013-02-13T11:31:28.490
> 
> 标签：internet-explorer, ssl-certificate

我想知道哪个私钥未标记为可导出的证书的用途。我看到从 Internet Explorer 向证书服务器发送证书请求时，它提供了将密钥标记为不可导出的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:34:56.000

这不是在创建证书请求时创建不可导出私钥的常见使用场景，*除非*此密钥直接发送到硬件（USB 令牌等）。然而，例如在公司环境中创建机器绑定证书时，这是可能的。在这种情况下，最好将证书标记为不可导出 - 如果机器不在了，您可以为新机器颁发新证书并阻止（撤销）之前的证书。

当您使用私钥导入现有证书时，通常会使用不可导出的密钥 - 出于安全原因设置了不可导出的标志。

# sql - 获取每个产品每月的事件数

> ID：14852564
> 
> 赞同：0
> 
> 时间：2013-02-13T11:32:01.303
> 
> 标签：sql, sql-server, pivot, grouping

我们正在使用票证跟踪系统，我想了解每月为每种产品创建多少票证的信息：

```
产品 1 月 12 日 2 月 12 日
产品 1 130 99
产品 2 13 14
产品 3 7 9
产品 4       
产品 5 13 7
产品 6 22 31
产品 7       
产品 8 10 5

```

数据库：MS SQL Server 2008 表名：incidentbase 相关字段：* Createdon (datetime) * Productname (nvarchar)

我可以使用以下 SQL 获取信息，但不能以上面显示的格式：

```
Select (convert(varchar(7), CreatedOn, 102)) as 'month', Productname as Product,  COUNT(*) as number
from Incidentbase
where createdon >= '2011-01-01'
group by Productname, (convert(varchar(7), CreatedOn, 102))
ORDER BY (convert(varchar(7), i.CreatedOn, 102)) 
```

```
月 产品编号
2011.01 产品1 1
2011.01 产品2 93
2011.01 产品3 20
2011.02 产品1 98
2011.02 产品2 23
2011.02 产品3 7

```

知道如何更改 SQL 以显示正确的分组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:36:47.930

在 SQL Server 中，您可以实现[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)从列中的行转换数据的函数：

```
select productname,
  [2011.01], 
  [2011.02]
from
(
  select ProductName,
    (convert(varchar(7), CreatedOn, 102)) as 'month'
  from Incidentbase
  where createdon >= '2011-01-01'
) src
pivot
(
  count(month)
  for month in ([2011.01], [2011.02])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e91bf/1)

如果您想要转换为列的日期数量未知，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME((convert(varchar(7), CreatedOn, 102))) 
                    from Incidentbase
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ProductName,' + @cols + ' from 
             (
                  select ProductName,
                    (convert(varchar(7), CreatedOn, 102)) as month
                  from Incidentbase
                  where createdon >= ''2011-01-01''
            ) x
            pivot 
            (
                count(month)
                for month in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e91bf/3)。

如果您想将日期传递给动态查询，那么您将使用稍微不同的代码版本：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @startdate datetime

set @startdate = '2011-01-01'

select @cols = STUFF((SELECT distinct ',' + QUOTENAME((convert(varchar(7), CreatedOn, 102))) 
                    from Incidentbase
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ProductName,' + @cols + ' from 
             (
                  select ProductName,
                    (convert(varchar(7), CreatedOn, 102)) as month
                  from Incidentbase
                  where createdon >= '+convert(varchar(10), @startdate, 120)+'
            ) x
            pivot 
            (
                count(month)
                for month in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e91bf/4)

# c# - 如何在脚本中访问 Collider 的 GameObject？

> ID：14852566
> 
> 赞同：1
> 
> 时间：2013-02-13T11:32:08.790
> 
> 标签：c#, unity3d, gameobject

我正在 Unity3d 中制作纸牌游戏。我使用 c# 以编程方式将卡片创建为游戏对象。我想知道如何使每个对象（卡片）在鼠标按钮单击时移动，我尝试使用 Raycast 对撞机，但它不起作用。我正在尝试访问父游戏对象，它是网格的整个封面，它是对撞机对象/组件，我想通过它访问子游戏对象（只是为了移动一个位置）。有没有简单的方法来解决这个问题或您有更好的方法以其他方式完成所有这些工作吗？

更新：

```
if (Input.GetMouseButton (0)) {                    
    RaycastHit hit = new RaycastHit ();
    Ray ray = Camera.main.ScreenPointToRay (Input.mousePosition);
    if (Physics.Raycast (ray, out hit)) { 
        print (hit.collider.gameObject.name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:36:05.817

我也偶然发现了这个问题，试试这个（顺便说一句，你也可以使用 GetMouseButtonUp 代替）

```
if (Input.GetMouseButtonDown (0)) 
{                    
RaycastHit hit = new RaycastHit ();
Ray ray = Camera.main.ScreenPointToRay (Input.mousePosition);
if (Physics.Raycast (ray, out hit)) { 
    print (hit.collider.transform.gameObject.name);
} 
```

}

以某种方式可以通过 Transform 访问它，它为我解决了问题！如果您想访问父级：

```
hit.collider.transform.parent.gameObject; 
```

现在 child 有点棘手：

```
// You either access it by index number
hit.collider.transform.getChild(int index);
//Or you could access some of its component ( I prefer this method)
hit.collider.GetComponentInChildren<T>(); 
```

希望我能帮上忙。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:10:48.317

`Input.GetMouseButton(0)`应该是`Input.GetMouseButtonDown(0)`。

您尝试使用`Input.GetMouseButton(0)`，它会记录鼠标按下的每一帧，而不是`Input.GetMouseButtonDown(0)`，它仅在用户单击的第一帧上注册。

示例代码：

```
if (Input.GetMouseButtonDown(0))
    print ("Pressed");
else if (Input.GetMouseButtonUp(0))
    print ("Released"); 
```

和

```
if (Input.GetMouseButton(0))
    print ("Pressed");
else
    print ("Not pressed"); 
```

如果这不能解决它，请尝试替换`if (Physics.Raycast (ray, out hit)) {`为`if (Physics.Raycast (ray, out hit, 1000)) {`

# c# - CodeContracts 不变量为假

> ID：14852567
> 
> 赞同：0
> 
> 时间：2013-02-13T11:32:09.947
> 
> 标签：c#, .net, code-contracts

VS2010 一直告诉我 CodeContract.Invariant 是错误的。我看不出这怎么可能

```
public class BankAccountIdentifierDefinitionVariation_CreateCommandArgs : ValidatedCommandArgs
{
    public string IdentifierCode {get; private set; }
    public string CountryCode {get; private set; }
    public Ems.Infrastructure.Validation.StringValidator Validator {get; private set; }

    private BankAccountIdentifierDefinitionVariation_CreateCommandArgs()
        : base() { }

    public BankAccountIdentifierDefinitionVariation_CreateCommandArgs(
        string identifierCode,
        string countryCode,
        Ems.Infrastructure.Validation.StringValidator validator)
    {
        Contract.Requires(!string.IsNullOrEmpty(identifierCode));
        Contract.Requires(!string.IsNullOrEmpty(countryCode));
        Contract.Ensures(!string.IsNullOrEmpty(this.IdentifierCode));
        Contract.Ensures(!string.IsNullOrEmpty(this.CountryCode));

        this.IdentifierCode = identifierCode;
        this.CountryCode = countryCode;
    }

    [ContractInvariantMethod]
    void ContractInvariants()
    {
        Contract.Invariant(!string.IsNullOrEmpty(IdentifierCode));
        Contract.Invariant(!string.IsNullOrEmpty(CountryCode));
    }
} 
```

警告是两个不变量都是错误的，显然情况并非如此。我还尝试了以下两种变体。

```
Contract.Ensures(!string.IsNullOrEmpty(this.IdentifierCode);
if (string.IsNullOrEmpty(identifierCode)) throw new ArgumentNullException...
this.IdentifierCode = identifierCode; 
```

并且

```
Contract.Ensures(!string.IsNullOrEmpty(this.IdentifierCode));
this.IdentifierCode = identifierCode;
if (string.IsNullOrEmpty(this.IdentifierCode)) throw new ArgumentNullException... 
```

看起来好像不变量是错误的，因为我可以通过其私有设置器更改属性的值（即使我没有。）有没有办法解决这个问题？属性必须保留属性，因为我正在序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:41:46.070

似乎静态分析器看不到无参数构造函数从未被调用。也许它的存在足以质疑你的不变量。

可以完全删除吗？如果您已经有一个构造函数，为什么还需要一个私有的无参数构造函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:47:32.617

I would expect the private default constructor to be the source of the warning, since executing that would indeed violate the invariant. However since you have a constructor defined there's nothing stopping you from deleting the default constructor. If you define at least one constructor the compiler will not emit a default contructor on your behalf and since you are never using the default constructor there's no reason to have it in the first place

# transactions - 餐饮哲学家，innodb，选择更新

> ID：14852569
> 
> 赞同：0
> 
> 时间：2013-02-13T11:32:10.443
> 
> 标签：transactions, innodb, deadlock, isolation-level

将哲学家进餐问题应用于 innodb，以及使用 select 进行更新：

1) 具有 100,000 个分叉的表，由具有单个主键（分叉）的 innodb 表表示

2) 分叉的抓取是一个更新选择，它指定了该表中 2 到 20 个主键的一些随机列表，而“抓取”正是这个随机分叉列表上相对于 100,000 个不同主键的更新选择. 顺便说一下，select 语句中键列表的顺序是随机的。

3) 有超过 5 个思考者，比如说多达 50 个“同时”的交易抓住了相交的分叉

4）思考时间是在步骤2中为主键的行更新其他列。思考时间永远不会太长。

问题：对于innodb，在上述情况下是否可能由于不公平而导致死锁或饥饿？有什么需要注意的吗？（隔离级别读取已提交。）

目的：使用该表和锁定行的主键来表示复杂更新场景的依赖关系，以便在对各种相关表（顺序一致的表）和其中的行进行一系列更新之前，确定一组依赖关系等同于步骤 1 的主键集，然后在事务开始时使用 select for update 锁定这些依赖项。（当然，在选择更新之后，我重新查询依赖项以确保它们没有改变。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:47:51.050

我不知道您所说的“不公平”是什么意思，但是是的，可能会出现僵局。示例：两个思考者尝试使用相同的叉子，例如 1 和 2，但顺序相反。所以思想家一“拿”叉子一，思想家二拿叉子二。之后，两者都会“永远”等待第二次分叉......

您可以通过订购前叉的访问权限轻松克服该问题。这样第一个思考者会拿叉子，第二个必须等待第一个思考者完成，一切都很好。

# javascript - 将javascript函数添加到jMeter

> ID：14852573
> 
> 赞同：3
> 
> 时间：2013-02-13T11:32:19.650
> 
> 标签：javascript, jmeter

我正在尝试让 javascript 函数与 jMeter 测试计划一起使用。
它用于解码字符串。

```
function decode(str) {
    var strtodecrypt = str.split("-");
    var msglength = strtodecrypt.length;
    decrypted_message = "";
    for (var position = 0; position < msglength; position++) {
        ascii_num_byte_to_decrypt = strtodecrypt[position];
        ascii_num_byte_to_decrypt = ascii_num_byte_to_decrypt / 2;
        ascii_num_byte_to_decrypt = ascii_num_byte_to_decrypt - 5;
        decrypted_byte = String.fromCharCode(ascii_num_byte_to_decrypt);
        decrypted_message += decrypted_byte;
    }
    return decrypted_message;
} 
```

我曾尝试使用 BSF 后处理器，但不知道我需要使用的确切语法是什么。我想使用此函数在其中一个 HTTP 请求中发布一个 jMeter 变量作为参数。

**编辑：** 我目前在 BSF 后处理器中使用以下脚本。`userResponse`不显示在调试采样器中。我需要添加任何参考使用`String.fromCharCode(ascii_num_byte_to_decrypt)`吗？

```
var str="142";
var strtodecrypt = str.split("-");
var msglength = strtodecrypt.length;
decrypted_message = "";

for (var position = 0; position < msglength; position++) {
    ascii_num_byte_to_decrypt = strtodecrypt[position];
    ascii_num_byte_to_decrypt = ascii_num_byte_to_decrypt / 2;
    ascii_num_byte_to_decrypt = ascii_num_byte_to_decrypt - 5;
    decrypted_byte = String.fromCharCode(ascii_num_byte_to_decrypt);
    decrypted_message += decrypted_byte;
}

vars.put("userResponse",decrypted_message); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:45:25.287

您也可以尝试使用脚本语言设置为 javascript ( )的[JSR223 Sampler 。](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler) 它将处理您的脚本（第 2 版）、变量集并在调试采样器结果中可用。`Language: JavaScript`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T15:02:14.300

您应该为此使用 WebDriver 插件。它可以配置为 IE/Firefox/Chrome 甚至 Selenium。

[这里](http://jmeter-plugins.org/wiki/WebDriverTutorial/)的文档

这是您配置[IE Web 驱动程序的方式](http://jmeter-plugins.org/wiki/InternetExplorerConfig/?utm_source=jmeter&utm_medium=helplink&utm_campaign=InternetExplorerConfig)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T13:50:56.747

对于多年后阅读的任何人：

### 可以从 BSF PostProcessor 调用 javascript 函数。

您需要在文件中比使用它的位置**更高的位置定义您的函数。**

这意味着这有效：

```
function decode(str) {
    (...... do stuff......)
    return something;
}

var bar = decode("foo");
vars.put("someVariableName", bar); 
```

然而这不起作用：

```
var bar = decode("foo"); // <--- Compile error, undefined function 'decode'
vars.put("someVariableName", bar);

function decode(str) {
    (...... do stuff......)
    return something;
} 
```

# asp.net-mvc-3 - 如何根据角色使网站可编辑与只读。

> ID：14852576
> 
> 赞同：2
> 
> 时间：2013-02-13T11:32:34.177
> 
> 标签：asp.net-mvc-3, authorization, readonly, roleprovider

我有一个有很多大视图的项目（可编辑的表格；考虑各种调查）。在试点阶段，客户需要一个可以查看所有表单和元素但不能编辑/保存的角色。

一个简单的解决方法可能是检查角色并打开/关闭提交按钮。但我希望有一些相当简单的方法可以将视图从可编辑转换为只读，而无需在每个元素上输入 HTML 的 @readonly（有超过一千个元素，从 TextBoxFor、EditorFor 到 Checkbox 和 textareas 不等）。

该项目使用三个角色：管理员、中心和患者。在有问题的控制器中，我有 [Authorize(Roles="Admin,Centre")]，但这可能需要现在进行（或者我需要添加 Patient），因为后者需要完整的只读访问权限。

关于如何在不编辑每个模型属性和/或每个剃须刀编辑器的情况下使其工作的任何想法？

项目使用 mvc3、razor、jquery 和 jQuery-ui

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T06:59:10.343

只是为了结束这个老问题，我将介绍我解决它的方式。

我不得不重载“TextBoxFor”、“CheckBoxFor”（等等），在方法的末尾添加一个用于 readOnly/disabled 的布尔参数。下面的例子：

```
 //Overload TextBoxFor with a "disabled" parameter. For use with readonly-roles
    public static IHtmlString TextBoxForRo<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes, bool disabled)
    {
        var attributes = new RouteValueDictionary();

        if (htmlAttributes != null)
        {
            foreach (System.ComponentModel.PropertyDescriptor property in System.ComponentModel.TypeDescriptor.GetProperties(htmlAttributes))
            {
                attributes.Add(property.Name.Replace('_', '-'), property.GetValue(htmlAttributes));
            }
        }

        if (disabled)
        {
            attributes["disabled"] = "disabled";
        }
        return htmlHelper.TextBoxFor(expression, attributes);
    } 
```

我必须为每种类型或表单输入执行此操作，显然我必须替换视图中的很多调用。它虽然有效，但这是我能想到的最好的解决方案。

# mysql - 在存储过程中使用 SUM() 中的 CASE 语句

> ID：14852577
> 
> 赞同：1
> 
> 时间：2013-02-13T11:32:45.510
> 
> 标签：mysql, stored-procedures

这是我的代码：

```
BEGIN

    SELECT SUM(
       CASE WHEN first_name > '' THEN 1 ELSE 0 END AS a 
       CASE WHEN last_name > '' THEN 1 ELSE 0 END AS b,             
       CASE WHEN country > '' THEN 1 ELSE 0 END AS c, 
       CASE WHEN state > '' THEN 1 ELSE 0 END AS d, 
       CASE WHEN city > '' THEN 1 ELSE 0 END AS e)
    AS total
    FROM employee_profile     
    WHERE id = user_id_in;

END 
```

这会产生以下错误：

> 您的 SQL 语法有错误检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第一行使用 near xxx 错误。

任何人都可以帮助使用正确的语法吗？

MySQL 服务器版本：5.5.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:40:45.037

`SUM`接受一个参数（/列），它对多行求和，而不是单行的多个参数（/列），这就是它不起作用的原因。

这应该有效：

```
SELECT (CASE WHEN first_name > '' THEN 1 ELSE 0 END +
        CASE WHEN last_name  > '' THEN 1 ELSE 0 END +
        CASE WHEN country    > '' THEN 1 ELSE 0 END +
        CASE WHEN state      > '' THEN 1 ELSE 0 END +
        CASE WHEN city       > '' THEN 1 ELSE 0 END) AS total
FROM employee_profile     
WHERE id = user_id_in; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:15:42.920

试试这个查询，这将非常帮助你..

```
SELECT SUM(
    CASE 
    WHEN first_name  = ''  THEN '1'
    WHEN last_name  = ''  THEN '1'
    WHEN country  = '' THEN '1'
    WHEN state  = '' THEN '1'
    ELSE '0'
  END) AS total
FROM employee_profile     
    WHERE id = user_id_in; 
```

# jquery - Webkit 动画 Div 的边框

> ID：14852578
> 
> 赞同：0
> 
> 时间：2013-02-13T11:32:48.963
> 
> 标签：jquery, webkit

我现在正在编写一个摄影师的网站。它在背景中具有相对较重的图像，具有淡入淡出效果。在画廊页面*（菜单上的“Galeri”链接）*中，当内容被动画化时，内容的边框表现得很奇怪。[这](http://oi49.tinypic.com/29upwk8.jpg)是它的屏幕截图。[你可以在这里](http://office701.com/web/sdr/)检查自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:06:55.590

我刚刚发现这是由于 CSS3 的 translate3d 功能而发生的。

# jquery - 如何在（X）关闭按钮单击事件上关闭对话框？

> ID：14852579
> 
> 赞同：2
> 
> 时间：2013-02-13T11:32:49.303
> 
> 标签：jquery, jquery-ui, jquery-mobile, listbox, jquery-dialog

我的移动网站有一些多选控件。具有少量项目（5）的多选正常显示，如多选（移动样式/格式），但项目多于 5 的多选在新页面中显示为对话框视图。出于某种原因，X 按钮没有响应并且没有 colse 效果。我应该怎么做才能使 X 按钮起作用？多选代码：

```
<div class="field ">
        <label for="offices" class="select">
            Office(s):
        </label>
        @Html.ListBoxFor(m => m.Offices, Model.ListOfOffices, new { Multiple = "multiple", data_theme = "a", data_overlay_theme = "c", inline = "true", data_native_menu = "false" })
 </div> 
```

jQuery代码：

```
$(".ui-icon-delete").click(function () {
  //$('.ui-dialog').hide(); no effect
  //$('div[data-role="dialog"]').popup("close"); no effect
  //$('div[data-role="dialog"]').dialog("close"); no effect
  //$('ui-dialog').dialog('close'); no effect
  $(this).parent().remove(); // this one close the dialog, but also remove the X button
  }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:34:50.800

您的对话框应该有一个与之关联的 ID。考虑到您的对话已正确启动，您应该能够：

```
<div id="dialog">
    <label for="offices" class="select">
        Office(s):
    </label>
    @Html.ListBoxFor(m => m.Offices, Model.ListOfOffices, new { Multiple = "multiple",  data_theme = "a", data_overlay_theme = "c", inline = "true", data_native_menu = "false" })
</div> 
```

关闭：

```
$(".ui-icon-delete").click(function () {
   $('#dialog').dialog('close');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:40:18.230

```
$("[class=field]").css({ "display" : "none" }); 
```

只需使用`.css()`jQuery 通过添加属性来隐藏该元素/节点`display:none`。

## 它会做什么？

它将从当前 HTML 树中隐藏该元素/节点，但不会将其删除。

# wpf - WPF DataGrid 仅左键单击行

> ID：14852582
> 
> 赞同：1
> 
> 时间：2013-02-13T11:32:53.127
> 
> 标签：wpf, datagrid, inputbinding

如何仅在选择行时启用数据网格的左键单击？这是一个例子：

```
<DataGrid>
    <DataGrid.InputBindings>
            <MouseBinding MouseAction="LeftDoubleClick" Command="{Binding LeftClickCommand}"/>
    </DataGrid.InputBindings>
</DataGrid> 
```

现在，当我单击数据网格中的任何行时，该命令也会执行，但我只想在单击一行时执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:00:52.350

您可以测试所选项目是否为空，这只是一种可能帮助您 XAML 的方法：

```
 <Custom1:DataGrid IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding Persons}" SelectedItem="{Binding SelectedPerson}"  >
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDoubleClick">
                <Custom:EventToCommand CommandParameter="{Binding SelectedItem, ElementName=dg}" Command="{Binding AfficheCommand, Mode=OneWay}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers> 
```

后面的代码：

```
 private PersonModel _selectedPersons = new PersonModel();
    public PersonModel SelectedPerson
    {
        set
        {
            _selectedPersons = value;
        }
    }
    public ICommand AfficheCommand
    {
        get
        {
            return new DelegateCommand(AfficheText);
        }
    }

    private void AfficheText()
    {
        if(_selectedPersons != null)
           MessageBox.Show(_selectedPersons.FirstName);

       _selectedPersons  = null;
    } 
```

我知道这不是最好的方法，而是一种方法，直到您找到更好的主意；）

# javascript - 如何在自然文档中创建树形菜单？

> ID：14852586
> 
> 赞同：2
> 
> 时间：2013-02-13T11:33:08.337
> 
> 标签：javascript, jquery, documentation

我正在使用[naturaldocs](http://www.naturaldocs.org/)为我的 jQuery Widget 生成 API 文档。

我有 2 个文件

```
Folder1
    MyScript.js
    Forlder2
       myScript1.js 
```

所以我得到了一棵这样的树。

```
 MyScript
 myScript1 
```

我需要的是

```
MyScript
     myScript1 
```

有没有办法做到这一点？

在这两个文件中，我都有一个类符号。创建树。

```
/* Class: widget1;*/  and in  myScript1 /* Class: widget2;*/ 
```

# unix - 信号处理程序的父母和孩子的行为

> ID：14852587
> 
> 赞同：13
> 
> 时间：2013-02-13T11:33:08.630
> 
> 标签：unix

在注册信号处理程序后，进程有一个“fork”调用 [for SIGINT]。通过命令行发送 SIGINT 时会发生什么？父母是否退出或孩子或两者兼而有之？父母和孩子都在运行无限的while循环。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T11:46:54.657

如果您在注册信号处理程序后这样做`fork`（无需进一步`exec*`），则将在父进程和子进程中使用相同的信号处理程序。也就是说，如果您`exit`在`SIGINT`处理程序中执行其他操作，则父母和孩子都不会退出（`SIGINT`此处与发送方式无关）。

如果您的意思是`SIGINT`从*终端*发送（`vintr`通常是字符`Ctrl+C`）：它将被使用*终端*作为控制终端的进程接收。也就是说，除非您将子或父与控制终端分离，否则两者都会`Ctrl+C`通过调用您的`SIGINT`处理程序来做出反应。

# c# - 在统一 3d 中获得准确位置

> ID：14852589
> 
> 赞同：0
> 
> 时间：2013-02-13T11:33:34.233
> 
> 标签：c#, vector, position, unity3d

我宣布

```
public Vector3 floorPosition; 
```

在班上。在我给出的开始功能中

```
floorPosition = new Vector3(0.000f,0.500f,-8.250f); 
```

我试图在 floorPosition 中实例化一个游戏对象。但是对象进来**(0.0, 0.5, -8.3)**。它会自动循环。我必须做些什么才能让游戏对象处于准确的位置。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:41:35.400

奇怪的是，如果你输入

```
 floorPosition = new Vector3(0.0f,0.5f,-8.250f);
    transform.position = floorPosition; 
```

检查员**将显示**您要求的确切位置（所以我认为您的对象实际上是在正确的位置）但 Debug.Log() 会舍入它。

# c++ - 删除 std::tuple 的第一种类型

> ID：14852593
> 
> 赞同：26
> 
> 时间：2013-02-13T11:33:43.617
> 
> 标签：c++, c++11, stdtuple

这似乎是一个非常简单的问题：如何删除 a 中的第一个（第 n 个）类型`std::tuple`？

例子：

```
typedef std::tuple<int, short, double> tuple1;
typedef std::tuple<short, double> tuple2; 
```

上述操作将转换`tuple1`为`tuple2`. 是否可以？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-13T11:38:29.463

您可以使用基于类模板的部分特化的简单类型函数：

```
#include <type_traits>
#include <tuple>

using namespace std;

template<typename T>
struct remove_first_type
{
};

template<typename T, typename... Ts>
struct remove_first_type<tuple<T, Ts...>>
{
    typedef tuple<Ts...> type;
};

int main()
{
    typedef tuple<int, bool, double> my_tuple;
    typedef remove_first_type<my_tuple>::type my_tuple_wo_first_type;

    static_assert(
        is_same<my_tuple_wo_first_type, tuple<bool, double>>::value, 
        "Error!"
        );
} 
```

此外，这个解决方案可以很容易地推广到删除第**i 个**类型的元组：

```
#include <type_traits>
#include <tuple>

using namespace std;

template<size_t I, typename T>
struct remove_ith_type
{
};

template<typename T, typename... Ts>
struct remove_ith_type<0, tuple<T, Ts...>>
{
    typedef tuple<Ts...> type;
};

template<size_t I, typename T, typename... Ts>
struct remove_ith_type<I, tuple<T, Ts...>>
{
    typedef decltype(
        tuple_cat(
            declval<tuple<T>>(),
            declval<typename remove_ith_type<I - 1, tuple<Ts...>>::type>()
            )
        ) type;
};

int main()
{
    typedef tuple<int, bool, double> my_tuple;
    typedef remove_ith_type<1, my_tuple>::type my_tuple_wo_2nd_type;

    static_assert(
        is_same<my_tuple_wo_2nd_type, tuple<int, double>>::value, 
        "Error!"
        );
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T13:06:07.323

我写了一个[提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3493.html)，该提案被 C++14 标准接受，使得任何“类元组”类型都非常容易实现，即支持`tuple_size`和`tuple_element`API 的类型：

```
template<typename T, typename Seq>
    struct tuple_cdr_impl;

template<typename T, std::size_t I0, std::size_t... I>
    struct tuple_cdr_impl<T, std::index_sequence<I0, I...>>
    {
        using type = std::tuple<typename std::tuple_element<I, T>::type...>;
    };

template<typename T>
    struct tuple_cdr
    : tuple_cdr_impl<T, std::make_index_sequence<std::tuple_size<T>::value>>
    { }; 
```

您只需几个函数就可以将元组对象转换为新类型：

```
template<typename T, std::size_t I0, std::size_t... I>
typename tuple_cdr<typename std::remove_reference<T>::type>::type
cdr_impl(T&& t, std::index_sequence<I0, I...>)
{
    return std::make_tuple(std::get<I>(t)...);
}

template<typename T>
typename tuple_cdr<typename std::remove_reference<T>::type>::type
cdr(T&& t)
{
    return cdr_impl(std::forward<T>(t),
                    std::make_index_sequence<std::tuple_size<T>::value>{});
} 
```

这将创建一个整数序列`[0,1,2,...,N)`where `N`is `tuple_size<T>::value`，然后使用`make_tuple(get<I>(t)...)`for `I`in创建一个新元组`[1,2,...,N)`

测试它：

```
using tuple1 = std::tuple<int, short, double>;
using tuple2 = std::tuple<short, double>;
using transformed = decltype(cdr(std::declval<tuple1>()));
static_assert(std::is_same<transformed, tuple2>::value, "");
static_assert(std::is_same<tuple_cdr<tuple1>::type, tuple2>::value, "");

#include <iostream>

int main()
{
    auto t = cdr(std::make_tuple(nullptr, "hello", "world"));
    std::cout << std::get<0>(t) << ", " << std::get<1>(t) << '\n';
} 
```

我对该提案的参考实现位于[https://gitlab.com/redistd/integer_seq/blob/master/integer_seq.h](https://gitlab.com/redistd/integer_seq/blob/master/integer_seq.h)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T12:14:09.237

我提出了一个与@Andy 提出的解决方案非常相似的解决方案，但是通过直接处理参数包（使用虚拟包装器）而不是在`std::tuple`. 这样，该操作也可以应用于其他可变参数模板，而不仅仅是元组：

```
#include <type_traits>
#include <tuple>

template <typename... Args> struct pack {};

template <template <typename...> class T, typename Pack>
struct unpack;

template <template <typename...> class T, typename... Args>
struct unpack<T, pack<Args...>>
{
    typedef T<Args...> type;
};

template <typename T, typename Pack>
struct prepend;

template <typename T, typename... Args>
struct prepend<T, pack<Args...>>
{
    typedef pack<T, Args...> type;
};

template <std::size_t N, typename... Args>
struct remove_nth_type;

template <std::size_t N, typename T, typename... Ts>
struct remove_nth_type<N, T, Ts...>
    : prepend<T, typename remove_nth_type<N-1, Ts...>::type>
{};

template <typename T, typename... Ts>
struct remove_nth_type<0, T, Ts...>
{
    typedef pack<Ts...> type;
};

template <typename T, int N>
struct remove_nth;

template <template <typename...> class T, int N, typename... Args>
struct remove_nth<T<Args...>, N>
{
    typedef typename
        unpack<
            T, typename 
            remove_nth_type<N, Args...>::type
        >::type type;
};

template <typename... Args>
struct my_variadic_template
{
};

int main()
{
    typedef std::tuple<int, bool, double> my_tuple;
    typedef remove_nth<my_tuple, 1>::type my_tuple_wo_2nd_type;

    static_assert(
        is_same<my_tuple_wo_2nd_type, tuple<int, double>>::value, 
        "Error!"
        );

    typedef my_variadic_template<int, double> vt;
    typedef remove_nth<vt, 0>::type vt_wo_1st_type;

    static_assert(
        is_same<vt_wo_1st_type, my_variadic_template<double>>::value, 
        "Error!"
        );
} 
```

`pack`是一个辅助结构，其唯一目的是存储模板参数包。`unpack`然后可以用于将参数解包到任意类模板中（[感谢@BenVoigt 的这个技巧](https://stackoverflow.com/a/4692107/20984)）。`prepend`只需将类型添加到包中。

`remove_nth_type`使用部分模板特化从参数包中删除第 n 个类型，将结果存储到`pack`. 最后，`remove_nth`获取任意类模板的特化，从其模板参数中删除第 n 个类型，并返回新的特化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T13:37:26.720

这是针对此任务的过度设计的`template`元编程。`tuple`它包括通过过滤器对 a 的类型进行任意重新排序/重复/删除的能力`template`：

```
#include <utility>
#include <type_traits>

template<typename... Ts> struct pack {};

template<std::size_t index, typename Pack, typename=void> struct nth_type;

template<typename T0, typename... Ts>
struct nth_type<0, pack<T0, Ts...>, void> { typedef T0 type; };

template<std::size_t index, typename T0, typename... Ts>
struct nth_type<index, pack<T0, Ts...>, typename std::enable_if<(index>0)>::type>:
  nth_type<index-1, pack<Ts...>>
{};

template<std::size_t... s> struct seq {};

template<std::size_t n, std::size_t... s>
struct make_seq:make_seq<n-1, n-1, s...> {};

template<std::size_t... s>
struct make_seq<0,s...> {
  typedef seq<s...> type;
};

template<typename T, typename Pack> struct conc_pack { typedef pack<T> type; };
template<typename T, typename... Ts> struct conc_pack<T, pack<Ts...>> { typedef pack<T, Ts...> type; };

template<std::size_t n, typename Seq> struct append;
template<std::size_t n, std::size_t... s>
struct append<n, seq<s...>> {
  typedef seq<n, s...> type;
};
template<typename S0, typename S1> struct conc;
template<std::size_t... s0, std::size_t... s1>
struct conc<seq<s0...>, seq<s1...>>
{
  typedef seq<s0..., s1...> type;
};

template<typename T, typename=void> struct value_exists:std::false_type {};

template<typename T> struct value_exists<T,
  typename std::enable_if< std::is_same<decltype(T::value),decltype(T::value)>::value >::type
>:std::true_type {};

template<typename T, typename=void> struct result_exists:std::false_type {};
template<typename T> struct result_exists<T,
  typename std::enable_if< std::is_same<typename T::result,typename T::result>::value >::type
>:std::true_type {};

template<template<std::size_t>class filter, typename Seq, typename=void>
struct filter_seq { typedef seq<> type; };

template<template<std::size_t>class filter, std::size_t s0, std::size_t... s>
struct filter_seq<filter, seq<s0, s...>, typename std::enable_if<value_exists<filter<s0>>::value>::type>
: append< filter<s0>::value, typename filter_seq<filter, seq<s...>>::type >
{};

template<template<std::size_t>class filter, std::size_t s0, std::size_t... s>
struct filter_seq<filter, seq<s0, s...>, typename std::enable_if<!value_exists<filter<s0>>::value && result_exists<filter<s0>>::value>::type>
: conc< typename filter<s0>::result, typename filter_seq<filter, seq<s...>>::type >
{};

template<template<std::size_t>class filter, std::size_t s0, std::size_t... s>
struct filter_seq<filter, seq<s0, s...>, typename std::enable_if<!value_exists<filter<s0>>::value && !result_exists<filter<s0>>::value>::type>
: filter_seq<filter, seq<s...>>
{};

template<typename Seq, typename Pack>
struct remap_pack {
  typedef pack<> type;
};

template<std::size_t s0, std::size_t... s, typename Pack>
struct remap_pack< seq<s0, s...>, Pack >
{
  typedef typename conc_pack< typename nth_type<s0, Pack>::type, typename remap_pack< seq<s...>, Pack >::type >::type type;
};

template<typename Pack>
struct get_indexes { typedef seq<> type; };

template<typename... Ts>
struct get_indexes<pack<Ts...>> {
  typedef typename make_seq< sizeof...(Ts) >::type type;
};

template<std::size_t n>
struct filter_zero_out { enum{ value = n }; };

template<>
struct filter_zero_out<0> {};

template<std::size_t n>
struct filter_zero_out_b { typedef seq<n> result; };

template<>
struct filter_zero_out_b<0> { typedef seq<> result; };

#include <iostream>

int main() {
  typedef pack< int, double, char > pack1;
  typedef pack< double, char > pack2;

  typedef filter_seq< filter_zero_out, typename get_indexes<pack1>::type >::type reindex;
  typedef filter_seq< filter_zero_out_b, typename get_indexes<pack1>::type >::type reindex_b;

  typedef typename remap_pack< reindex, pack1 >::type pack2_clone;
  typedef typename remap_pack< reindex_b, pack1 >::type pack2_clone_b;

  std::cout << std::is_same< pack2, pack2_clone >::value << "\n";
  std::cout << std::is_same< pack2, pack2_clone_b >::value << "\n";
} 
```

这里我们有一个`pack`包含任意类型列表的类型。有关如何在`tuple`and之间移动的信息，请参阅@LucTouraille 的简洁答案`pack`。

`seq`保存一系列索引。 `remap_pack`接受 a`seq`和 a ，并通过抓取 original 的第 n 个元素`pack`构建 a 结果。`pack``pack`

`filter_seq`接受`template<size_t>`functor 和 a `seq`，并使用 functor 过滤`seq`. 函子可以返回一个`::value`类型`size_t`或一个`::result`类型`seq<...>`或都不返回，允许一对一或一对多的函子。

其他一些辅助函数，如`conc`, `append`, `conc_pack`, `get_indexes`, `make_seq`,`nth_type`将事情完善。

我测试了`filter_zero_out`哪个是`::value`删除 0 的基于过滤器，`filter_zero_out_b`哪个是`::result`也删除 0 的基于过滤器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-24T13:53:37.940

除了那些疯狂的 TMP 东西，还有一个使用 C++17 STL 函数的非常简单的方法[`std::apply`](https://en.cppreference.com/w/cpp/utility/apply)：

```
#include <string>
#include <tuple>

template <class T, class... Args>
auto tail(const std::tuple<T, Args...>& t)
{
    return std::apply(
        [](const T&, const Args&... args)
        {
            return std::make_tuple(args...);
        }, t);
}

int main()
{
    // you can use it either like:
    std::tuple<int, double, std::string> t{1, 2., "3"};
    auto _2_3 = tail(t);
    // or that way:
    using tuple_t = decltype(tail(std::tuple<int, double, std::string>{}));
    static_assert(std::is_same_v<std::tuple<double, std::string>, tuple_t>);
} 
```

[演示](https://godbolt.org/z/Tdr54M)。

# webdriver - 通过testng套件运行时testng的超时注释被忽略了吗？

> ID：14852594
> 
> 赞同：0
> 
> 时间：2013-02-13T11:33:42.920
> 
> 标签：webdriver, testng

当我使用 TestNG 测试从下面的谷歌文档链接运行代码时，它工作得非常好 [https://docs.google.com/document/d/1GHNxnZdiHbpkbJ8YTTKd4608CirQhCcNg5OTLT7SOIc/edit](https://docs.google.com/document/d/1GHNxnZdiHbpkbJ8YTTKd4608CirQhCcNg5OTLT7SOIc/edit)

但是，当我通过 TestNG Suite 使用 TestNG.xml 文件从上面的谷歌文档链接运行代码时，注释 timeOut 被忽略，并且在 1000 毫秒（即 1 秒）后没有显示错误消息。TestNG.xml 代码也是用谷歌文档编写的。

请让我知道如何通过 testNG.xml 文件使 timeOut 注释工作，或者让我知道是否还有其他解决方法。我的测试版本：6.8.0.20121120_1820

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:04:35.783

它确实使测试用例失败。只是它没有显示错误消息。您可以设置`verbose=2`为一种解决方法，以查看套件标签中的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:18:00.223

正如我所看到的，您的 testNG xml 没有运行任何东西，它只知道要使用什么类。在`<class>`你失踪后：

```
<methods>
<include name="f"></include>
</methods> 
```

希望能帮助到你！

# c++ - 在 Qt 中创建的 GUI 中的滞后（由 QTime 验证）

> ID：14852597
> 
> 赞同：0
> 
> 时间：2013-02-13T11:33:54.680
> 
> 标签：c++, qt, user-interface

我`Class`在 Qt 中有一个 GUI C++，它有一个`SLOT`在`QGridLayout`. 该数组是正方形的，取决于变量 say `n`。即如果`n == 10`那么有`10x10` `QTextbox`&`QLabel`在`QGridLayout`. 基本上，当用户按下“*增加”按钮*时， 的值`n`会增加 1 & 相应地`QTextbox`&`QLabel`被创建在`SLOT`& 添加到`QGridLayout`. 当值为`n`is`15`时，更新 GUI 需要**1-2** *秒*。但是，当我使用它时`QTime`，`SLOT`它告诉我实际执行时间`SLOT`约为**100** *ms*。而在*我观察到的*调试*`QDebug`模式用于打印经过的时间，即使 GUI 没有针对更高的`n`. 我想知道为什么会有这么多延迟以及执行之后运行的内容，`SLOT`以便我可以测量相同的时间。我希望我说清楚了。如果您不能理解我的问题，请告诉我。谢谢你。*

 *实际上，我现在没有确切的代码。因此，我创建了一个示例代码，突出显示了我的代码逻辑。请忽略任何语法错误，因为我已经尽快准备好了。很抱歉:(所以这里是代码片段：

```
Class A
{
private:
    int n;
    QList <QLabel *> *labelList;
    QList <QTextEdit *> *textList;
    QGridLayout *inp;

    public slots:
        updateGUI();
}

A::updateGUI()
{
    QTime t;
    t.start();

    for(int i = 0; i < n; i++)
    {
        for(int j = 0; j < n; j++)
        {
                            int even = j%2;
            QLabel *tempLab = new QLabel();
            //some stuff for initialisation of the QLabel
            QTextEdit *tempText = new QTextEdit();
            //some stuff for initialisation of the QTextEdit
            labelList->append(tempLab);
            textList->append(tempText);
                            if(even == 0)
                inp->AddWidget(tempLab, i, j, 5, 5, Qt::AlignCenter);
            else
                                inp->AddWidget(tempText, i, j, 5, 5, Qt::AlignCenter);
        }
    }

    QDebug("%d", t.elapsed());
} 
```

PS：`QTime tobj.start()`是第1行，`SLOT`&`QDebug("%d", tobj.elapsed())`是`SLOT`Ofcourse的最后一行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:02:59.960

当您对小部件进行批量更新时，请关闭[updatesEnabled 属性](http://qt-project.org/doc/qt-4.8/qwidget.html#updatesEnabled-prop)。当您添加 (11*11-10*10) 个新按钮时，这可以防止 21 次单独更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:02:49.843

如果您发布一些具有相同问题的代码，这真的会有所帮助。当您选择让我们说 n=10 然后 n=7 时，您的插槽将如何反应？它会从布局中删除最后 3 个项目吗？如果你选择 n=7 然后 n=10，它会尝试只添加最后 3 行吗？您是否有可能没有从布局中删除项目并尝试在现有项目上添加新项目？

如果是这样 - 那么您可以使用以下命令从布局中删除所有小部件：

```
QLayoutItem* item;
while ( ( item = %your_layout_name%->takeAt( 0 ) ) != NULL ){
    delete item->widget();
}
delete item; 
```

或者您可以通过它的对象名称删除小部件（或通过句柄，存储在 QList QVector 或其他东西中）：

```
swLayout->removeWidget(myTextEdit); 
```

UPD：现在，我们有一些代码，您还需要清除 labelList 和 textList，如果我是正确的，它们存储句柄。然后，线

```
inp->AddWidget(tempLab, i, j, 5, 5, Qt::AlignCenter);
inp->AddWidget(tempText, i, j, 5, 5, Qt::AlignCenter); 
```

尝试将 tempLab 小部件添加到具有 5 高度和宽度的位置 (i,j) 的布局 inp，然后您尝试将另一个小部件 tempText 添加到同一位置，这显然是错误的

接下来，循环本身是不正确的：

```
for(int i = 0; i < n; i++)
{
    for(int j = 0; j < n; j++)
    { 
```

是你做一个这样的循环，那么你将添加这样的小部件：

```
inp->AddWidget(tempLab, i, 0, 5, 5, Qt::AlignCenter);
inp->AddWidget(tempLab, i, 1, 5, 5, Qt::AlignCenter);
inp->AddWidget(tempLab, i, n, 5, 5, Qt::AlignCenter); 
```

但是您将小部件的宽度和高度设置为 5，因此您需要以另一种方式添加小部件，否则它们将相互重叠：

```
inp->AddWidget(tempText, i*5, j*5, 5, 5, Qt::AlignCenter); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:43:32.420

0.1 秒的延迟是因为您正在创建大量小部件，然后将它们添加到网格中（每次添加小部件时，这显然有开销，其他单元格的尺寸必须随着事物的“洗牌”轮次而更新）。

那么为什么在计时器之后进一步延迟呢？插槽生成的所有绘制和调整大小事件现在都已放入事件队列中，在您的插槽执行时该队列已停止。一旦您的插槽完成，所有这些任务都需要处理。

除了其他人所说的之外，您正在做的事情有两个基本缺陷：

*   删除所有现有的小部件以添加可能的单个小部件。我认为我不需要解释这是多么低效......
*   如果您已经设法在网格中向用户显示了**100多个文本框和标签，那么***您的 UI 就失败了。* 您需要想出一种更好的方法来允许用户与所有这些数据进行交互。*

# php - 从链接运行 php 代码而无需重定向

> ID：14852599
> 
> 赞同：1
> 
> 时间：2013-02-13T11:34:01.613
> 
> 标签：php, javascript, ajax, jquery

我想在用户单击给定链接时执行 php 代码，我尝试了以下代码

```
<!DOCTYPE html>
<html>
<head>

 <script type="text/javascript" src="jquery.min.js"></script>
 <script type="text/javascript">
 function doSomething() {
 $.get("up.php");
 return false;
 }
</script>

  </head>

  <body>

  <center>
  <a href="#" onclick="doSomething();">Click Me!</a>

   </center>

   </body>
  </html> 
```

其中 up.php 是实现 android GCM 机制的 php 代码，与链接中的机制类似：[GCM with PHP (Google Cloud Messaging)](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

但不幸的是，当点击链接时没有任何反应，没有执行 php 代码，只有页面的 url 从 *****.com/test.html 更改为 *****.com/test.html# ，顺便说一句，我测试了 php 代码并且它的工作正常，所以这在 php 代码中不是问题，所以我在这里错过了什么？为什么代码没有执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:15:29.953

我找到了解决方案，我的代码中可能不包含 jquery 库的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:50:17.293

您还可以使用**[jQuery 加载](http://api.jquery.com/load/)**

```
function doSomething() {
$('#result').load('up.php', function() {
  alert('Load was performed.');
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T11:55:00.813

**当您使用时`Jquery`应该是：**

```
function doSomething(){
    $.get('up.php', function(data) {
        $('.data').html(data);
    });
} 
```

**关联**

要停止页面刷新，您可以使用 javascript void() 函数并传递参数 0。

`<a href="javascript:void(0);" onclick="return doSomething();">Click Me!</a>`

```
<div class="data"></div> 
```

**此 div 用于显示 up.php 结果。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:45:33.017

好的，首先使用 fire bug 并观察控制台和网络面板 确保浏览器正在尝试获取某些内容并且在获取时没有返回 404 或 php 错误

查看阻止默认[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/) 以停止原始链接功能的工作

如果您仍然希望他们移动到链接，请使用窗口位置或...

查看引导链接按钮

[http://twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons) （链接按钮）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T11:37:41.110

有时，您可能需要从链接中调用一些 JavaScript。通常，当用户单击链接时，浏览器会加载一个新页面（或刷新同一页面）。

这可能并不总是可取的。例如，您可能只想在用户单击链接时动态更新表单字段。

为了防止加载刷新，您可以使用 JavaScript void() 函数并传递一个参数 0（零），如下所示。

```
<a href="JavaScript:void(0);" onclick="return doSomething(); " />Click Me!</a>
```

现在，如果您想使用 href="#"，请确保 onclick 始终包含`return false;`在末尾。

**或者**

利用`href="javascript:void(0)"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T11:39:21.763

您正在使用 jquery。$.get() 将如下所示。

```
$.get('ajax/test.html', function(data) {
 $('.result').html(data);
 alert('Load was performed.');
}); 
```

如需进一步帮助，请查看[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# java - 为什么我在 Scriptella 的输出 CSV 文件上得到双引号？

> ID：14852603
> 
> 赞同：0
> 
> 时间：2013-02-13T11:34:17.980
> 
> 标签：java, oracle, csv, double-quotes, scriptella

我正面临以下问题。

使用 etl 配置文件，我从`Oracle`数据库表中加载一些数据，而不是将这些数据导出到`CSV`文件中。但是，当字段包含双引号 (") 时，此字符会重复。

我将用一个简单的例子来解释：

表 NAMES 中的字段 DESCRIPTION 包含以下内容：
**这是我的姓名的“描述”**

当我使用 CSV 驱动程序导出此表的内容时，我在 CSV 中看到以下数据：
**这是我的名字的“描述”**

ETL 配置：

> <connection id="out-names" driver="csv" url="names.csv">
> quote=
> encoding=UTF-8
> trim=true
> null_string=
> </connection>
> ...
> 
> <query connection-id="db" >
> 从名称中选择名称、描述；
> <script connection-id="out-names">
> $1;$2
> </script>
> </query>

对此有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:06:43.653

这是绝对正确的，2 x 双引号表示 CSV 术语中的一个双引号，因此这是正确的......

```
123,"This is a string",456,13-Feb-2013,"This is ""Another"" String" 
```

第二个字符串在其中有“转义”双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:09:02.220

如果要输出未转义的内容，请尝试使用文本驱动程序：

```
<connection id="out-names" driver="text" url="names.csv">
</connection>
...

<query connection-id="db">
    SELECT NAME,DESCRIPTION FROM NAMES;
    <script connection-id="out-names">
        $1;$2
    </script>
</query> 
```

# sencha-touch-2 - Sencha touch couresel 项目漂浮在另一个之上

> ID：14852605
> 
> 赞同：0
> 
> 时间：2013-02-13T11:34:20.220
> 
> 标签：sencha-touch-2, carousel

我的轮播渲染很奇怪，它不会水平加载项目，而是将它们一个接一个地加载。它看起来像这样： http: [//postimage.org/image/3tisqjl9n/](http://postimage.org/image/3tisqjl9n/)

是因为我在窗体内制作了一个旋转木马吗？在这里你可以看到我的代码：

```
config: {
    title: 'More Info',
    layout: 'fit',
    items: [
        {
            xtype: 'formpanel',
            id:"moreInfo",
            items: [
                {   
                    id: 'moreContent',
                    tpl: [
                        '<div style="border-bottom 1px solid black">',
                            '<h2 style="margin-bottom:5px;text-transform:capitalize;font-weight:bold">Project: {project}</h2>',
                        '</div>'
                    ].join(''),
                },
                { 
                    xtype: 'carousel',
                    defaults: { cls: 'card'},
                    direction: 'horizontal',
                    layout: 'fit',
                    directionLock: true,
                    items:[
                        {
                            html: "<img src='image1'>",
                        },
                        {
                            html: "<img src='image2'>",
                        },
                        {
                            html: "<img src='image3'>",
                        },
                        {
                            html: "<img src='image4'>",
                        },

                    ]
                },
                {
                    xtype: 'fieldset',
                    defaults: {
                        labelWidth: '35%'
                    },  
                    title: 'Receipts',
                    items: [
                        {
                            xtype: 'button',
                            id: 'takePicture',
                            padding: '10px',
                            text: 'Taka a picture'
                        },
                        {
                            xtype: 'textfield',
                            label: 'Price',
                            name: 'price'
                        },
                        {
                            xtype: 'textfield',
                            label: 'Vendor',
                            name: 'vendor'
                        },
                    ]
                },
                {
                    xtype: 'button',
                    id: 'receiptSave',
                    padding: '10px',
                    ui:'confirm',
                    text: 'Save'
                },
            ]
        },

    ],
}, 
```

# android - 带有警报对话框的窗口泄漏

> ID：14852606
> 
> 赞同：1
> 
> 时间：2013-02-13T11:34:23.720
> 
> 标签：android, android-alertdialog

我有一个应用程序可以查询手机的数据库以获取消息。如果光标返回其中包含消息，那么我将尝试在警报对话框中一个接一个地显示每条消息。我收到以下错误消息，表明存在窗口泄漏。

我认为这与在显示下一个之前未正确取消警报对话框有关。有谁知道我为什么会收到这个错误？

```
@Override
    protected void onResume() {
        super.onResume();
      Cursor c = nfcScannerApplication.loginValidate.queryAllFromMessage();

        Log.e(TAG, "messages in db = " +  c.getCount());

            if(c != null && c.getCount() > 0){
                c.moveToFirst();

                while(c.moveToNext()){

                final String guid = c.getString(c.getColumnIndex(LoginValidate.C_MESSAGE_GUID));
                final String message = c.getString(c.getColumnIndex(LoginValidate.C_MESSAGE_TEXT));
                final String createdAt = c.getString(c.getColumnIndex(LoginValidate.C_MESSAGE_CREATED_AT));
                final String sender = c.getString(c.getColumnIndex(LoginValidate.C_MESSAGE_SENDER));

                DateTime dt = new DateTime(createdAt);
                DateTimeFormatter fmt2 = DateTimeFormat.forPattern("H:mm d-MMM-Y");
                String date = fmt2.print(dt);

                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        this);

                    // set title
               alertDialogBuilder.setTitle("You have a new message : " );

                    // set dialog message
                    alertDialogBuilder
                        .setMessage(  "\n" + message + "\n"
                                + "From : " + sender + " at " + date + "\n"+"Click OK to confirm message read")
                        .setCancelable(false)
                        .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,int id) {

                                nfcScannerApplication.loginValidate.deleteMessage(guid);

                                Cursor c = nfcScannerApplication.loginValidate.queryAllFromMessage();
                                Log.e(TAG, "message count = " + c.getCount());

                                //send guid back to martin so he can delete message on server
                                String[] params = new String[]{guid};
                                AsyncCompleteMessage ascm = new AsyncCompleteMessage();
                                ascm.execute(params);

                                finish();

                            }
                          });

                        // create alert dialog
                        AlertDialog alertDialog = alertDialogBuilder.create(); 

                        // show it
                        alertDialog.show();

                }//end of while
            }else{

                finish();
            }

    } 
```

.

```
02-13 11:33:13.602: E/WindowManager(19605): Activity com.carefreegroup.DisplayMessageActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@418e0ac8 that was originally added here
02-13 11:33:13.602: E/WindowManager(19605): android.view.WindowLeaked: Activity com.carefreegroup.DisplayMessageActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@418e0ac8 that was originally added here
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:465)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:419)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:351)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:171)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.Window$LocalWindowManager.addView(Window.java:558)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Dialog.show(Dialog.java:282)
02-13 11:33:13.602: E/WindowManager(19605):     at com.carefreegroup.DisplayMessageActivity.onResume(DisplayMessageActivity.java:103)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1266)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Activity.performResume(Activity.java:5148)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2997)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3055)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2392)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.access$600(ActivityThread.java:151)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
02-13 11:33:13.602: E/WindowManager(19605):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 11:33:13.602: E/WindowManager(19605):     at android.os.Looper.loop(Looper.java:155)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.main(ActivityThread.java:5485)
02-13 11:33:13.602: E/WindowManager(19605):     at java.lang.reflect.Method.invokeNative(Native Method)
02-13 11:33:13.602: E/WindowManager(19605):     at java.lang.reflect.Method.invoke(Method.java:511)
02-13 11:33:13.602: E/WindowManager(19605):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
02-13 11:33:13.602: E/WindowManager(19605):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
02-13 11:33:13.602: E/WindowManager(19605):     at dalvik.system.NativeStart.main(Native Method)
02-13 11:33:13.602: E/WindowManager(19605): Activity com.carefreegroup.DisplayMessageActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4152c258 that was originally added here
02-13 11:33:13.602: E/WindowManager(19605): android.view.WindowLeaked: Activity com.carefreegroup.DisplayMessageActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4152c258 that was originally added here
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:465)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:419)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:351)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:171)
02-13 11:33:13.602: E/WindowManager(19605):     at android.view.Window$LocalWindowManager.addView(Window.java:558)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Dialog.show(Dialog.java:282)
02-13 11:33:13.602: E/WindowManager(19605):     at com.carefreegroup.DisplayMessageActivity.onResume(DisplayMessageActivity.java:103)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1266)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.Activity.performResume(Activity.java:5148)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2997)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3055)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2392)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.access$600(ActivityThread.java:151)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
02-13 11:33:13.602: E/WindowManager(19605):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 11:33:13.602: E/WindowManager(19605):     at android.os.Looper.loop(Looper.java:155)
02-13 11:33:13.602: E/WindowManager(19605):     at android.app.ActivityThread.main(ActivityThread.java:5485)
02-13 11:33:13.602: E/WindowManager(19605):     at java.lang.reflect.Method.invokeNative(Native Method)
02-13 11:33:13.602: E/WindowManager(19605):     at java.lang.reflect.Method.invoke(Method.java:511)
02-13 11:33:13.602: E/WindowManager(19605):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
02-13 11:33:13.602: E/WindowManager(19605):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
02-13 11:33:13.602: E/WindowManager(19605):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T11:40:03.177

在调用您的方法`dialog.dismiss();`之前尝试调用，如下面的代码所示。`finish()``onClick()`

```
public void onClick(DialogInterface dialog,int id) {

                            nfcScannerApplication.loginValidate.deleteMessage(guid);

                            Cursor c = nfcScannerApplication.loginValidate.queryAllFromMessage();
                            Log.e(TAG, "message count = " + c.getCount());

                            //send guid back to martin so he can delete message on server
                            String[] params = new String[]{guid};
                            AsyncCompleteMessage ascm = new AsyncCompleteMessage();
                            ascm.execute(params);

                            dialog.dismiss();
                            finish();

                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:41:05.767

退出活动后，您正试图显示一个对话框。检查此[链接。](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)

# php - 我可以在 6 个字符中受到 XSS 的攻击吗

> ID：14852608
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:34:32.877
> 
> 标签：php, xss

所以我一直在尝试让用户能够**以 HTML 颜色代码格式选择他们的背景颜色**。

然后我将自定义让他们的页面使用他们指定的背景颜色。但是我遇到了一个小问题。我不能 HTML 特殊字符他们选择的颜色代码格式，因为 HTML 不会读取它。但我不希望他们因此而对我的网站进行 XSS 攻击。我应该怎么做才能解决这个问题？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:41:58.027

如果您的用户可以选择十六进制代码，您必须检查您返回的输入是否是有效的十六进制值。

因此，您必须检查它的长度是否为 6 个字符，以及所有字符是否都是有效的十六进制数字 (0-f)。您可以使用[ctype_xdigit](http://php.net/ctype_xdigit)来执行此操作。所有其他输入值都必须被拒绝，然后您可以将默认的十六进制值作为背景颜色传递给您的着色函数。

如果您可以验证输入数据，我不明白为什么需要 html 特殊字符。

编辑：是的，您可能容易受到 6 个字符的 XSS 攻击。长度在这里并不重要。

# ios - ios - 有没有办法在情节提要中设置滚动视图的高度？

> ID：14852610
> 
> 赞同：0
> 
> 时间：2013-02-13T11:34:37.103
> 
> 标签：ios, scrollview

我有一个我正在尝试添加滚动的屏幕。我能够执行命令+选择所有元素，然后将其嵌入到滚动视图中。但是我怎么能设置故事板的滚动量呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:53:27.677

简短的回答 - 不。

你想要[`cotentSize`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentSize)的`UIScrollView`. 它定义了可滚动区域的大小——如果它大于它的实际帧大小，则滚动视图将滚动。

没有办法在使用界面生成器（即使使用记分牌）上进行设置。我一直觉得这是一种耻辱。您现在可以设置内容插图（但这不是您想要的）。

![在此处输入图像描述](../Images/99bccfa50ac3b793ed094ae3b94c7fa1.png)

你可以：

1.  在 Interface Builder 中为其创建一个 IBOutlet，然后在视图控制器的视图中设置内容大小并加载方法。或者..
2.  创建 的自定义子视图`UIScrollView`，它会自动将内容大小设置为其第一个子视图的大小。（假设滚动视图只有一个子视图）

![在此处输入图像描述](../Images/c1239bc46e2293c81bf1329edb461fa7.png)

# wcf - 无法在服务器 IE 浏览器中查看服务

> ID：14852619
> 
> 赞同：0
> 
> 时间：2013-02-13T11:35:08.983
> 
> 标签：wcf, iis-7.5, windows-server-2008

我有一个带有 net.tcp 和 http 服务器绑定的 WCF 服务。

Web.config 文件如下所示

```
 <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="tcp_Unsecured" portSharingEnabled="true">
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
    <services>
      <service name="MarketFeedServiceLibrary.Service1">
        <endpoint address="net.tcp://localhost:808/MarketFeedService/Service.svc/mexTcp"
          binding="mexTcpBinding" bindingConfiguration="" name="mexEndPoint"
          contract="IMetadataExchange" />
        <endpoint address="net.tcp://localhost:808/MarketFeedService/Service.svc/tcpService"
          binding="netTcpBinding" bindingConfiguration="tcp_Unsecured"
          name="dataEndPoint" contract="MarketFeedServiceLibrary.IService1" />
        <endpoint address="http://localhost:80/MarketFeedService/Service.svc/basicHttp"
          binding="basicHttpBinding" bindingConfiguration="" name="httpDataEndpoint"
          contract="MarketFeedServiceLibrary.IService1" />
        <endpoint address="http://localhost:80/MarketFeedService/Service.svc/mex"
          binding="mexHttpBinding" bindingConfiguration="" name="httpMexEndpoint"
          contract="MarketFeedServiceLibrary.IService1" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
       />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

我已经在本地 PC 的 IIS 中托管了该服务，如果我使用地址在 IE 中浏览 `"http://localhost/MarketFeedService/Service.svc"`，我会得到如下元数据信息

![在本地 PC 上浏览](../Images/b2eaa6cb14ee2c8f684d43a70b8efec3.png)

但是，如果我在 VPS 服务器（Windows Server 2008 IIS 7.5）上的 IIS 中托管相同的 WCF Web 服务，地址相同，我会收到以下错误，

![在 VPS 上浏览](../Images/f6ad9a05e53f1af534e8b4f099db7ecd.png)

我也可以添加本地托管服务的服务参考，但是如果我尝试使用路径“net.tcp://IPAddress/MarketFeedService/Service.svc”添加服务器的服务参考，我会收到以下错误

**无法分派消息，因为端点地址“net.tcp://IPAddress/MarketFeedService/Service.svc”处的服务对于该地址的协议不可用。**

**注意**

> 1.  Net.Tcp 端口共享服务，Net.Tcp Listener Adapter 开启
> 2.  WCF Http 和 Non-Http Activation 已安装并启用。
> 3.  为默认网站和应用程序启用了 http 和 net.tcp 协议。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:44:27.593

svc 文件类型是否在 IIS 中正确映射？ [http://msdn.microsoft.com/en-us/library/vstudio/ms752252(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms752252(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T19:18:14.810

对于那些有可能或可能不完全匹配这个问题的问题的人来说，只是另一种选择（由于防火墙，我无法查看发布的工作快照） -

我遇到了很多问题，尤其是 RESTful 服务在本地运行良好，但在服务器上崩溃和烧毁。我认为这可能是因为与根配置或注册表的配置冲突，但实际上并非如此。

您必须进入 IIS 并查看您的基本站点级别设置，将有一个名为“ISAPI 过滤器”的功能选项。

长话短说，称为 UrlScan 的特定 ISAPI 过滤器（版本可能非常，我认为当前是 3.1）是我们问题的根源。这个过滤器的作用是寻找传入请求的模式，以尝试屏蔽潜在的恶意请求。

随着技术的变化和改进，设置不熟悉的请求进来并被拒绝或重新路由。就我而言，它正在查看文件扩展名。从 ASP 扩展启动的旧 SOAP 技术已被识别/祝福 (.asmx)，但我们从未设置过 RESTful 或 WCF 服务，因此它无法识别“.svc”扩展名。

初始设置通常非常紧凑，以至于任何 http 请求都会被拒绝或重新路由，并且管理 Web 服务器的任何人都会根据需要调整文件以允许功能。

您可以转到文件位置，在同一目录中是具有该工具设置的 .ini 文件。

在该文本文件中，查找名为 [AllowExtensions] 和 [DenyExtensions] 的部分。确保将 .svc 添加到“允许”组，并确保它没有明确列在拒绝组中。

[Microsoft - 方法：使用 URLScan](https://msdn.microsoft.com/en-us/library/ff648552.aspx)

# java - 通过点阵列的 Slick2d/lwjgl 曲线

> ID：14852620
> 
> 赞同：0
> 
> 时间：2013-02-13T11:35:12.967
> 
> 标签：java, lwjgl, slick2d

我正在尝试重写游戏“Achtung, die Kurve”（注意，曲线）

现在，我遇到了一个问题：我如何绘制一条曲线，它通过 N 点（x/y 坐标）

```
for(int i = 0;i < xList.size();i++)
    {
        path.lineTo(player1.getShape().getCenterX(),player1.getShape().getCenterY());
    } 
```

^这总是会创建一条新线，所以我的 FPS 很快就达到了 10

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:44:33.927

这是一个可以用线性方程组解决的代数问题。[http://en.wikipedia.org/wiki/System_of_linear_equations](http://en.wikipedia.org/wiki/System_of_linear_equations)

通常，通过 N 个点的曲线是一个 (N-1) 次多项式。所以如果你想找到一个通过 3 个点的多项式（例如`(-1,1), (0, 3), (1, -1)`），你需要一个像这样的二次方程：`ax^2+bx+c=y`。

要找到 a、b 和 c 的值，您需要插入 x 和 y 坐标，然后求解方程组。

> a(-1)^2+b(-1)+c=1
> a(0)^2+b(0)+c=3
> a(1)^2+b(1)+c=-1

简化为

> a-b+c=1
> c=3
> a+b+c=-1

很好，我们已经有了*c=3*。结合第一个方程和第二个方程，我们可以得到

> 2a+2c=0

因为我们知道 c=3，所以这变成

> 2a+3=0

所以`a=-1.5`。

从这里我们可以将 a 和 c 的这些值放入最后一个等式中得到这个

> -1.5+b+3=-1

这给出了一个`b=-3.5`. 将 a、b 和 c 的这些值代入二次方程会得出以下结果

> -1.5x^2-3.5x+3=y

我没有仔细检查我的数学，但如果我做对了，这将给出一条穿过三个点的二次曲线。

毫无疑问，已经有一个图书馆可以做到这一点，但我很抱歉地说我不知道​​那会是什么。希望了解问题背后的数学能帮助您找到答案。

# c# - 获取 mschart 系列源数据

> ID：14852622
> 
> 赞同：1
> 
> 时间：2013-02-13T11:35:24.357
> 
> 标签：c#, .net, mschart

我有一个带有源数据的 mschart `List<Tuple<DateTime, double>>`。我通过数据绑定设置数据源：

```
chartMain.Series[id].Points.DataBind(sourceData, "Item1", "Item2", string.Empty); 
```

如何以原始格式 ( `List<Tuple<DateTime,double>>`) 检索源数据？SG。像这样：

```
List<Tuple<DateTime,double>> sourceData = chartMain.Series[id].SomeGetSourceDataMethod; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:42:18.890

预防胜于治疗，为什么要从图表中获取数据源？似乎是一种不平衡的做法。您能否仅缓存您的“sourceData”并在随后需要时从缓存中使用它，而不是尝试从图表控件中检索它？

或者您是否特别需要从图表中检索绑定数据的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:01:55.863

由于没有内置解决方案，我将原始数据源设置为系列的“标签”属性，我可以随时从中检索。

# git - git冲突保持原始上游

> ID：14852632
> 
> 赞同：3
> 
> 时间：2013-02-13T11:36:01.840
> 
> 标签：git, github

我从 github 复制了一个 repo。只是在玩了一下代码，提交了一个在本地更改的分支，现在原始代码已更新，所以我想删除我对 fork 所做的任何事情并获取上游所做的更改。

如果我这样做，我会发生冲突

```
git fetch upstream
git merge upstream/master
#Automatic merge failed; fix conflicts and then commit the result. 
```

并给出两个文件名，显示我从未做过的一些更改。

所以我做了一个 git status ，它给了我一个新的文件名（我从未制作过，但由我的上游制作）和未合并的路径：

```
#   (use "git add/rm <file>..." as appropriate to mark resolution) 
```

两个文件。

我想要所有新的变化并摧毁我的。什么可能是解决方案，为什么 GIT 要我添加一个我从未制作过的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:57:38.467

中止冲突的合并：

```
git merge --abort 
```

然后将您的本地仓库设置为与上游相同的提交，丢弃本地更改：

```
git reset --hard upstream/master 
```

至于你的问题：

> 为什么 GIT 要我添加一个我从未创建过的文件？

它没有。它告诉您解决您更改的文件中的冲突，然后`git add <file>`在这些文件上，将编辑的版本标记为已解决并可以提交。

# c# - 搜索通用类字段名称

> ID：14852638
> 
> 赞同：2
> 
> 时间：2013-02-13T11:36:26.827
> 
> 标签：c#

我有一个返回通用列表的方法。

我希望能够向此方法传递一个字符串值，该字符串值将代表类名称中的一个字段，并基于此我想按此字段对数据进行排序。我想以不同于开关的方式做到这一点。

例如;

```
private void GetList()
{
    var list = GetResearchStocks("Sedol");
}

private List<Stocks> GetResearchStocks(string orderBy = "")
{
    var currentResearchStockList = _reports.GetZeusData("tblResearchStocks");
    var researchStocklist = currentResearchStockList.AsEnumerable().ToList();
    _zeusResearchStocks = researchStocklist.Select(item => new ZEUS_ResearchStocks
        {
            Sedol = item[0].ToString(),
            StockName = item[1].ToString(),
        }
    ).ToList();

    if (orderBy != "")
    {
        return _zeusResearchStocks.OrderBy(o=>o.) ?????? < What to do here?
    }

    return _zeusResearchStocks;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:05.497

您可以使用[动态 Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)库 (DLinq)，也可以使用反射编写扩展方法以在`order`语句中使用字符串变量。

对于第二个选项，请参阅[此示例](http://ronniediaz.com/2011/05/24/orderby-string-in-linq-c-net-dynamic-sorting-of-anonymous-types/)。

# java - 如何避免在对象创建期间调用构造函数？

> ID：14852641
> 
> 赞同：1
> 
> 时间：2013-02-13T11:36:35.900
> 
> 标签：java

我想避免在 java 中创建对象期间调用构造函数（默认构造函数或用户定义的构造函数）。是否可以避免在对象创建期间调用构造函数？？？

提前致谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:41:06.300

无论您使用什么模式或策略，如果您想创建一个对象，在某些时候您都需要调用构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:37:50.587

只需将您想要避免的初始化逻辑提取到另一个名为 init 的方法中。你不能避免只调用一个构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:31:23.027

实际上，在某些情况下，可以使用 JVM 实现中的类（不属于 JRE API 并且是特定于实现的）。

这里有一个例子[http://www.javaspecialists.eu/archive/Issue175.html](http://www.javaspecialists.eu/archive/Issue175.html)

也应该可以使用 sun.misc.Unsafe.allocateInstance() (Java7)

此外，在使用 clone() 方法创建对象的副本时，构造函数显然被绕过（并且该类不会覆盖 clone 以实现与 Object.clone() 方法不同的方法）。

所有这些可能性都附带条件，如果有的话，应该小心使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:20:58.200

您可以模拟类的构造函数。它们仍然会被调用，但不会被执行。例如，下面的 JUnit+JMockit 测试就是这样做的：

```
static class CodeUnderTest
{
    private final SomeDependency someDep = new SomeDependency(123, "abc");

    int doSomething(String s)
    {
        someDep.doSomethingElse(s);
        return someDep.getValue(); 
    }
}

static final class SomeDependency
{
    SomeDependency(int i, String s) { throw new RuntimeException("won't run"); }
    int getValue() { return -1; }
}

@Test
public void mockEntireClassIncludingItsConstructors()
{
    new NonStrictExpectations() {
        @Mocked SomeDependency mockDep;
        { mockDep.getValue(); result = 123; }
    };

    int result = new CodeUnderTest().doSomething("testing");

    assertEquals(123, result);
} 
```

# javascript - 函数对已经运行的函数 JavaScript 的影响

> ID：14852647
> 
> 赞同：1
> 
> 时间：2013-02-13T11:36:50.773
> 
> 标签：javascript

所以我有一个函数可以显示来自 CSS 类的随机数图像。问题是当我运行应用程序两次时，第二个应用程序会更改第一个应用程序上的图像，而随机数不会出现在第二个应用程序中。我认为这可能是因为我没有局部变量，但是无论有没有全局变量，我都会遇到同样的问题。我可以使用 iframe，但必须有一段距离才能让它工作 Js Only 吗？

我创建了一个显示问题的 jsFiddle，只需按两次运行按钮并玩骰子，您就会看到我的问题。 [http://jsfiddle.net/dymond/gUL9U/](http://jsfiddle.net/dymond/gUL9U/)

以及创建类的函数。

```
function dicesides_func(nr){
    // go to dice-window-wrapper again
    // this could be put in a seporate functon
    var elementToAddDice=" dice-window-wrapper ",
    obj=this, // using this here that's why it's called wiht
    dice,i=0,total=0; // all the dice in this dice window
    // dicesides_func.call to set the right this context
    if(nr)
    {
        while((" "+obj.className+" ").indexOf(elementToAddDice)==-1){
            obj=obj.parentNode;
        }
        obj=obj.getElementsByTagName("ul")[2];
        var dicessides = createElementWithClass('li',nr);
        obj.appendChild(dicessides);
        // calculate total (can do in a seporate function)

        dice = obj.getElementsByTagName("li");
    }
    else
    {
        dice = document.getElementsByClassName("dice");   
    }
    for(i=0;i<dice.length;i++){
        total=total+getNumberForClass(dice[i].className);
    }
    //alert(total);

    var wrapper = document.getElementsByClassName("dice-toolbar-counter-wrapper")[0];

    while (wrapper.hasChildNodes()) {
        wrapper.removeChild(wrapper.lastChild);
    }

    var ttl = total.toString();
    var arr = [];
    for (var i = 0;i<ttl.length;i++) {
        var digit = ttl[i];
        var newelem = createElementWithClass('li',"side-" + ttl[i]);
        //alert(dice_toolbar_counter_wrapper_Li)
        wrapper.appendChild(newelem);
    } 

} 
```

# java - JList - 获取多选列表中选定元素的数量

> ID：14852648
> 
> 赞同：1
> 
> 时间：2013-02-13T11:36:53.003
> 
> 标签：java, arrays, jlist

如何从我的 jlist 中获取选定元素的数量？这样我就可以创建一个 int[] 数组并将选定的索引添加到该数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:54.310

JList.getSelectedIndices().length 会给你数组长度:) 参考 Javadocs mate

# r - 如何将函数应用于 R 中的特定对象类

> ID：14852649
> 
> 赞同：2
> 
> 时间：2013-02-13T11:36:58.987
> 
> 标签：r

我有一个带有不同类变量的大型数据框。我只想将函数应用于类因子的变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:35:38.483

尝试这样的事情：

```
lapply(data, function(x) if(is.factor(x)) foo(x) else x) 
```

# .htaccess - htaccess：如果 url 是 www.domain.com/some-string/xxx 但不是 www.domain.com/some-string-is-here，则重写

> ID：14852652
> 
> 赞同：0
> 
> 时间：2013-02-13T11:37:02.873
> 
> 标签：.htaccess, redirect

我的`htaccess`样子如下：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^some-string/$ [NC]
RewriteRule ^some-string(.*)$ http://www.domain.com$1 [R=301,L] 
```

所以来自 www.domain.com/some-string/xxx 的所有请求都应该被重定向到 www.domain.com/xxx （从子文件夹到主域）。现在我遇到的问题是一篇文章完全包含`some-string`他名字中的部分，例如 www.domain.com/some-string-is-here。结果是找不到文章。

我如何调整重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:19:43.580

`RewriteRule`更具体一点应该会有所帮助；在这种情况下，`RewriteCond`没有必要。`some-string/`因为只有以（包括）开头的请求`/`应该被重写，所以将它附加`/`到规则对我来说是诀窍：

```
RewriteEngine On
RewriteBase /
RewriteRule ^some-string/(.*)$ http://www.domain.com/$1 [R=301,L] 
```

如果您还想重写`www.domain.com/some-string`（并且只有 this 而不是`www.domain.com/some-string-more`），您可以尝试：

```
RewriteRule ^some-string(/.*)?$ http://www.domain.com$1 [R=301,L] 
```

# django - 如何在 django 中为内部应用程序翻译管理员

> ID：14852654
> 
> 赞同：0
> 
> 时间：2013-02-13T11:37:07.533
> 
> 标签：django, django-admin

我已经安装了 django-articles 应用程序，不幸的是它除了英语没有任何翻译，而且国际化支持很差（只有部分消息在 messages.po 中）。

首先，我正在尝试翻译管理界面（这对我很重要）。

但是我有一个很大的问题：我不知道 Django 是如何生成一些字段名称的，以及我应该编辑什么来翻译应用程序。

```
fieldsets = (
     (None, {'fields': ('title', 'content', 'tags', 'auto_tag', 'status')}),
     ('Relationships', {              
          'fields': ('related_articles','followup_for' ),
          'classes': ('collapse',)
      }),
.... 
```

在 admin django 中生成带有子字段“Title”、“Content”、“Tags”的块，带有子字段“Related article”的块“Relationships”、带有英文标题的“Followup for”等等。（LANGUAGE_CODE 不等于英文）

django 这在哪里发生了变化以及我如何翻译它？

附言。我尝试将 msgid“Title”（或“title”）放入 messages.po 中，编译完消息后没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:47:33.047

好像这个应用程序不支持翻译。用于翻译的字符串必须由 gettext 函数包装（参考：[https](https://docs.djangoproject.com/en/dev/topics/i18n/translation/) ://docs.djangoproject.com/en/dev/topics/i18n/translation/ ）

例如在管理员中：

```
 from django.utils.translation import ugettext as _

 ...

 fieldsets = (
 (None, {'fields': ('title', 'content', 'tags', 'auto_tag', 'status')}),
 (_('Relationships'), {              
      'fields': ('related_articles','followup_for' ),
      'classes': ('collapse',)
  }), 
```

请注意我添加的 _() 函数。

模型字段的翻译必须以相同的方式完成，例如在 models.py

```
title = models.CharField(verbose_name=_("Title")) 
```

完成后，您可以生成 .po 文件

```
./manage.py makemessages -l <language_code> 
```

有关详细信息，请参阅文档。

# eclipse - Eclipse，无法安装 PHP PDT

> ID：14852658
> 
> 赞同：1
> 
> 时间：2013-02-13T11:37:23.987
> 
> 标签：eclipse, eclipse-plugin, eclipse-pdt

我在安装此插件时遇到问题：Eclipse Juno 的 PHP 开发工具包

我正在使用最新的 Juno Eclipse，我使用菜单帮助 -> 安装软件 -> 添加链接[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)

我看到所有可用的包，我选择 PHP 开发工具包（在 Web、XML、Java EE 包下）

它试图安装，经过很长时间，我收到了这个错误，大约 49%：

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Failed to transfer artifact packed: osgi.bundle,org.apache.xerces,2.9.0.v201101211617.
Retry another mirror
Artifact not found: ftp://mirrors.neusoft.edu.cn/mirror/eclipse/releases/juno/201206270900/plugins/org.apache.xerces_2.9.0.v201101211617.jar.pack.gz.
ftp://mirrors.neusoft.edu.cn/mirror/eclipse/releases/juno/201206270900/plugins/org.apache.xerces_2.9.0.v201101211617.jar.pack.gz
Retry another mirror
Artifact not found: http://espelhos.edugraf.ufsc.br/eclipse//releases/juno/201206270900/plugins/org.apache.xerces_2.9.0.v201101211617.jar.pack.gz.
http://espelhos.edugraf.ufsc.br/eclipse//releases/juno/201206270900/plugins/org.apache.xerces_2.9.0.v201101211617.jar.pack.gz
Retry another mirror 
```

……

我尝试删除防火墙，移动 eclipse 文件夹，重试安装，下载另一个 eclipse 64/32 Juno 包，一切都没有成功

我尝试了另一个存储库：http: [//download.eclipse.org/tools/pdt/updates/nightly](http://download.eclipse.org/tools/pdt/updates/nightly)也没有成功

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:06:16.240

我在 Windows 8 上遇到了类似的错误，以管理员身份运行 Eclipse 为我解决了这个问题（右键单击可执行文件并以管理员身份运行）。

# asp.net - 如何仅检查行中绑定的不同字段的一个 RadioButton？

> ID：14852662
> 
> 赞同：0
> 
> 时间：2013-02-13T11:37:31.063
> 
> 标签：asp.net, gridview, datagridview

我有一个包含 5 列的网格，其中 3 列是不同字段的 RadioButtons。我想有一个条件只检查该行的一个单选按钮，

我的代码是

```
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="DirectPOL">
    <ItemTemplate>
        <asp:RadioButton ID="rdDirectPOL" runat="server" Checked='<%#Convert.ToBoolean(Eval("POL"))%>'/>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="DirectPOD">
    <ItemTemplate>
        <asp:RadioButton ID="rdDirectPOD" runat="server" Checked='<%# Convert.ToBoolean(Eval("POD")) %>' />
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="inDirectPOL">
    <ItemTemplate>
        <asp:RadioButton ID="rdIndirectPOL" runat="server" Checked='<%#Convert.ToBoolean(Eval("IsPOL"))%>' />
    </ItemTemplate>
</asp:TemplateField> 
```

在这样做时，我可以看到所有三个都可以一次检查，但我想一次限制为一个......，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:11:24.747

设置`GroupName`属性：

```
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="DirectPOL">
    <ItemTemplate>
        <asp:RadioButton ID="rdDirectPOL" runat="server" Checked='<%#Convert.ToBoolean(Eval("POL"))%>' 
        GroupName="Group1" />
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="DirectPOD">
    <ItemTemplate>
        <asp:RadioButton ID="rdDirectPOD" runat="server" Checked='<%# Convert.ToBoolean(Eval("POD")) %>' 
        GroupName="Group1" />
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="inDirectPOL">
    <ItemTemplate>
        <asp:RadioButton ID="rdIndirectPOL" runat="server" Checked='<%#Convert.ToBoolean(Eval("IsPOL"))%>' 
        GroupName="Group1" />
    </ItemTemplate>
</asp:TemplateField> 
```

这样，`RadioButton`每个`RadioButton`具有相同`GroupName`. 在您的情况下，您必须为每行设置一个 GroupName。

# c# - 计算算法时间

> ID：14852669
> 
> 赞同：3
> 
> 时间：2013-02-13T11:37:58.593
> 
> 标签：c#, .net, performance, algorithm, time

我有一个算法可以处理大约 2 到 4,500,000 次方的极大数字。我使用 .NET 4 中的 BigInteger 类来处理这些数字。

该算法非常简单，因为它是一个基于某些预定义标准减少较大初始数的单个循环。在每次迭代中，数字会减少大约 10 个指数，因此在下一次迭代中，4,500,000 将变为 4,499,990。

我目前每秒进行 5.16 次迭代或每次迭代 0.193798 秒。基于此，算法的总时间应该大约为 22 小时，以将指数值降至 0。

问题是，随着数量的减少，处理内存中的数字所需的时间也会减少。另外，随着指数减少到 200,000 范围，每秒的迭代次数变得巨大，每次迭代的减少量也呈指数增长。

不是让算法运行一整天，有没有一种数学方法可以根据初始起始数和每秒迭代次数来计算需要多少时间？

这将非常有帮助，因为我可以快速衡量优化尝试的改进。

考虑以下伪代码：

```
double e = 4500000; // 4,500,000.
Random r = new Random();
while (e > 0)
{
    BigInteger b = BigInteger.Power(2, e);
    double log = BigInteger.Log(b, 10);
    e -= Math.Abs(log * r.Next(1, 10));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:06:28.540

第一次重写

```
double log = BigInteger.Log(b, 10); 
```

作为

```
double log = log(2)/log(10) * e; // approx 0.3 * e 
```

然后您会注意到算法在 O(1) 次迭代后终止（每次迭代的终止机会约为 70%），您可能可以忽略除第一次迭代之外的所有成本。

算法的总成本大约`Math.Pow(2, e)`是初始指数的1 到 2 倍`e`。对于 base=2 这是一个微不足道的位移，对于其他人你需要平方和乘法

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T11:50:23.583

由于您使用的是随机，因此无法估计未知的时间！

# c# - QueueClient.Receive() 的异步方法？

> ID：14852670
> 
> 赞同：4
> 
> 时间：2013-02-13T11:38:02.143
> 
> 标签：c#, asp.net, asp.net-mvc-4, azure, azure-servicebus-queues

我正在使用服务总线连接 Web 角色和辅助角色。我的工作角色处于连续循环中，我正在使用 QueueClient.Receive() 方法接收 Web 角色发送的消息。

但是使用这种方法，如果服务总线队列上没有消息，它会等待几秒钟来接收消息，而不是移动到下一行继续执行。我希望有一些异步方法来接收消息？或者至少以某种方式设置这个等待时间？

我从 QueueClient 的 msdn 文档中找到了这个 BeginReceive 方法 [，](http://msdn.microsoft.com/en-us/library/hh293123.aspx) 我希望这将是我问题的答案，但我不知道如何使用这个方法。方法参数是异步回调和对象状态，我不知道它们是什么。

有任何想法吗？

**更新：** 感谢 Sandrino 的出色解决方案，它可以异步工作。但是异步现在给我带来了一些问题。我的 VS 崩溃了。不确定是什么问题。下面是正在使用的代码。

工人角色：

```
public override void Run()
    {
while (!IsStopped)
        {                
                // Receive the message from Web Role to upload the broadcast to queue
                BroadcastClient.BeginReceive(OnWebRoleMessageReceived, null);                    

                // Receive the message from SignalR BroadcastHub
                SignalRClient.BeginReceive(OnSignalRMessageReceived, null);                    

            }
}

public void OnWebRoleMessageReceived(IAsyncResult iar)
    {
        BrokeredMessage receivedBroadcastMessage = null;
        receivedBroadcastMessage = BroadcastClient.EndReceive(iar);

        if (receivedBroadcastMessage != null)
        {   //process message
           receivedBroadcastMessage.Complete();
        }
    }

public void OnSignalRMessageReceived(IAsyncResult iar)
    {
        BrokeredMessage receivedSignalRMessage = null;
        receivedSignalRMessage = SignalRClient.EndReceive(iar);

        if (receivedSignalRMessage != null)
        {
            //process message
           receivedSignalRMessage.Complete();

           WorkerRoleClient.Send(signalRMessage);
        }
     } 
```

我是否错过了使 VS 过度工作和崩溃的任何事情？因为在转移到 BeginReceive 之前，当我使用 QueueClient.Receive 时它工作正常并且没有崩溃。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:05:48.170

该`BeginReceive`方法是您的情况的方法。你通常会这样称呼它：

```
void SomeMethod() 
{
     ...
     client.BeginReceive(TimeSpan.FromMinutes(5), OnMessageReceived, null);
     ...
}

void OnMessageReceived(IAsyncResult iar)
{
     var msg = client.EndReceive(iar);
     if (msg != null)
     {
         var body = msg.GetBody<MyMessageType>();
         ...
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T15:07:21.153

我就是这样做的（扩展 Sandrino De Mattia 的解决方案）：

```
void SomeMethod() 
{
    ...
    client.BeginReceive(TimeSpan.FromSeconds(5), OnMessageReceived, null);
    ...
}

void OnMessageReceived(IAsyncResult iar)
{
    if(!IsStopped)
    {
        var msg = client.EndReceive(iar);
        if (msg != null)
        {
            var body = msg.GetBody<MyMessageType>();

            ... //Do something interesting with the message

            //Remove the message from the queue
            msg.Complete();

            client.BeginReceive(TimeSpan.FromSeconds(5), OnMessageReceived, null);
        }
    }
} 
```

这样我就有了一个带有停止机制的“无限循环”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T10:31:04.667

最新版本的 Azure ServiceBus SDK（[下载链接](https://www.nuget.org/packages/WindowsAzure.ServiceBus/)）全面支持异步接收消息：

```
async Task TestMethod()
{
    string connectionString = CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");

    QueueClient Client = QueueClient.CreateFromConnectionString(connectionString, "TestQueue");
    var message = await Client.ReceiveAsync();
} 
```

# database - Oracle + dbunit 抛出 AmbiguousTableNameException

> ID：14852673
> 
> 赞同：0
> 
> 时间：2013-02-13T11:38:26.257
> 
> 标签：database, oracle, dbunit

我正在使用 DBUnit 填充数据库，以便其内容在测试期间是已知内容。

我正在处理的数据库模式在一个 Oracle 11g 实例中，它们驻留在其他数据库模式中。在其中一些模式中已经定义了一个表，该表已与公共同义词相关联并且已被赋予选择权限。

当我运行定义必须如何填充数据库的 xml 时，如果 xml 文件**不**包含在多个模式中定义的表，DBUnit 会在该表上引发 AmbiguousTableNameException 异常。

我发现有 3 种解决方案可以解决此问题：

1.  使用只能访问一个数据库模式的数据库连接凭据。
2.  为 DatabaseConnection 或 DatabaseDataSourceConnection 构造函数指定架构名称。
3.  启用限定表名支持（请参阅操作方法文档）。

就我而言，我只能应用解决方案 1，但即使我采用它，我也会遇到同样的异常。

给我带来问题的表在 3 个模式中定义，我没有机会以任何方式对其采取行动。

拜托，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:38:41.940

我找到了解决方案：我在表的名称中指定了架构，并设置`true`了属性`http://www.dbunit.org/features/qualifiedTableNames`（对应于`org.dbunit.database.FEATURE_QUALIFIED_TABLE_NAMES`）。

通过这种方式，我填充表的 xml 代码如下所示：

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset>
  <SCHEMA.TABLE ID_FIELD="1" />
</dataset> 
```

其中`SCHEMA`是模式名称，`TABLE`是表名。

要设置属性，我使用了以下代码：

```
DatabaseConfig dBConfig = dBConn.getConfig(); // dBConn is a IDatabaseConnection
dBConfig.setProperty(DatabaseConfig.FEATURE_QUALIFIED_TABLE_NAMES, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-08T01:27:22.420

就我而言，

我授予用户 dba 角色，因此 dbunit 抛出 AmbiguousTableNameException。

在我撤销用户的 dba 角色后，我解决了这个问题。

```
SQL> revoke dba from username; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T10:00:47.720

在执行 Dbunits aginst Oracle DB 时，我遇到了相同的 AmbiguousTableNameException。它工作正常，有一天开始抛出错误。

根本原因：在调用存储过程时，错误地将其修改为小写。当更改为大写时，它开始工作。

我也可以通过将 shema 名称设置为 IDatabaseTester 来解决这个问题，例如 iDatabaseTester.setSchema("SCHEMANAMEINCAPS")

谢谢史密莎

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T15:54:29.147

我正在使用 SpringJDBC 和 MySQL 连接器（v8.0.17）。仅遵循[此答案](https://stackoverflow.com/a/14932264/3396045)中解释的 2 个步骤并没有帮助。

1.  首先，我必须在 spring 数据源上设置***模式。***
2.  然后我还必须将属性***“databaseTerm”***设置为***“schema”***
    *   默认情况下，它设置为“目录”，如此[处所述](https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-configuration-properties.html#databaseTerm)。
    *   我们必须设置这个属性，因为*（在 Spring 的实现中`javax.sql.DataSource`）*如果没有设置（即默认为**“catalogue”**），那么即使我们在*dataSource*`dataSource.getConnection()`上设置了它，返回的连接也不会设置*模式*。

 *```
 @Bean
   public DriverManagerDataSource cloudmcDataSource() {
      DriverManagerDataSource dataSource = new DriverManagerDataSource();
      dataSource.setDriverClassName("<driver>");
      dataSource.setUrl("<url>");
      dataSource.setUsername("<uname>");
      dataSource.setPassword("<password>");
      dataSource.setSchema("<schema_name>");

      Properties props = new Properties();
      // the following key-value pair are constants; must be set as is
      props.setProperty("databaseTerm", "schema");  
      dataSource.setConnectionProperties(props);
      return dataSource;
   } 
```

3.  不要忘记在[此处进行回答](https://stackoverflow.com/a/14932264/3396045)中解释的更改。*

# php - Magento 自定义模块 SQL 升级不起作用

> ID：14852675
> 
> 赞同：1
> 
> 时间：2013-02-13T11:38:29.150
> 
> 标签：php, sql, magento

我尝试升级我的自定义 Magento 模块，但由于某种原因它无法正常工作。

我的模块配置：

```
<?xml version="1.0"?>
<config>
    <modules>
        <MVE_CategoryAttribute>
            <version>0.1.1</version>
        </MVE_CategoryAttribute>
    </modules>
    <global>
            <resources>
                <categoryattribute_setup>
                  <setup>
                    <module>MVE_CategoryAttribute</module>
                    <class>Mage_Eav_Model_Entity_Setup</class>
                  </setup>
                  <connection>
                    <use>default_setup</use>
                  </connection>
                </categoryattribute_setup>
            </resources>
    </global>
</config> 
```

安装脚本（mysql4-install-0.1.0.php）：

```
<?php

$this->startSetup();

$this->addAttribute('catalog_category', 'imagetext', array(
    'group'         => 'General Information',
    'input'         => 'textarea',
    'type'          => 'varchar',
    'label'         => 'Tekst op afbeelding',
    'backend'       => '',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
));

$this->endSetup();

?> 
```

升级脚本（mysql4-upgrade-0.1.0-0.1.1.php）：

```
<?php   
$this->startSetup();     
$this->updateAttribute('catalog_category', 'imagetext', 'global', Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE);  
$this->endSetup();  
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:34:39.073

检查 core_resource 中模块的版本号。如果它仍然是 0.1.0，则清除您的 xml 缓存并重新启动页面，它应该运行。如果它已经是 0.1.1 并且您知道尚未应用数据库更改，请将值更改回 0.1.0，清除您的 xml 缓存并刷新页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T01:30:20.397

尝试这个：

```
<?php
$installer = $this;
$installer->startSetup();
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$setup->updateAttribute('catalog_category', 'imagetext', 'is_global', Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE);
$installer->endSetup(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T09:44:32.430

确保满足 3 个条件：

1.  您的模块版本号。core_resource 表中不存在。
2.  你有一个版本号。在模块的 etc/config.xml 文件中定义。
3.  您已经使用 yourmodule_setup 的标记名称为模块的设置/升级定义了一个全局资源

# ios - #defining 对象有什么开销？

> ID：14852677
> 
> 赞同：0
> 
> 时间：2013-02-13T11:38:34.967
> 
> 标签：ios, objective-c

我们有一个常量文件，并且希望能够为我们的应用程序添加白标签。

白色标签的一部分是定义可以由我们的客户交换的图像。

定义所有这些图像的开销是多少？

例如`#define kMPNavigationBarBackgroundImage [UIImage imageNamed:@"nav_bar"]`

是否值得`NSString`为图像名称定义常量？或者这样会好吗？

请记住，将有数百张这样的图像，此时它们是否都将加载到内存中？或者`#define`只是代码行的占位符，直到它们被调用才会运行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:44:26.813

"#define" 由编译器进行预处理，在编译之前，您的所有 kMPNavigationBarBackgroundImages 将被您的定义替换。它与运行时没有任何关系。

[http://www.cplusplus.com/doc/tutorial/preprocessor/](http://www.cplusplus.com/doc/tutorial/preprocessor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:46:14.957

简而言之，您的最后陈述是正确的；`#define`在代码中引用它之前，不会评估构成部分的代码。

也许解决这个问题的更好方法是将所有这些*资产*放入字典中，如果他们愿意，“客户”可以选择将其换出。字典会将*众所周知的名称*映射到资产文件名。

使用`#define`s 的问题在于它依赖于客户将正确的代码放入定义中，这既乏味又容易出错，例如：

```
// (Missing end quote)
#define kMPNavigationBarBackgroundImage [UIImage imageNamed:@"nav_bar] 
```

将导致不明显的编译警告。

一种更优雅的方法是提供一种方法（在某处），您只需提供*众所周知的名称*：

```
- (UIImage *)imageWithWellKnownName:(NSString *)wellKnownName; 
```

它查找资产文件名并加载它，如果无法加载文件，则抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:46:24.093

当您使用#define 定义某种常量时，它只是一个预处理器指令，告诉它替换代码中定义的文本。因此，如果您使用：

```
#define image [UIImage imageNamed:@"name"];
UIImage *myImage = image; 
```

然后在编译之前它会变成：

```
UIImage *myImage = [UIImage imageNamed:@"name"]; 
```

它只是在您使用它的任何地方被替换。

希望有帮助！

:)

# javascript - 从 html 访问 clojurescript

> ID：14852678
> 
> 赞同：0
> 
> 时间：2013-02-13T11:38:35.400
> 
> 标签：javascript, clojure, clojurescript

我正在使用 catnip/leiningen 来尝试学习 Clojure ......所以我有一个简单的网站，现在我想在我的页面中添加一个 clojure 脚本。

所以我举了一个简单的例子，但现在被困在如何从我的网站访问我的脚本上。

我的项目.clj

```
(defproject hello-world "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [compojure "1.1.5"]
                 [hiccup "1.0.2"]]
  :plugins [[lein-ring "0.8.2"]]
  :cljsbuild {:builds
              [{:source-path "src"
                :compiler
                {:output-to "resources/public/cljs/main.js"
                 :output-dir "resources/public/cljs"
                 :optimizations :simple
                 :pretty-print true}}]}
  :ring {:handler hello-world.handler/app}
  :profiles
  {:dev {:dependencies [[ring-mock "0.1.3"]]}}) 
```

handler.clj 的相关部分

```
(defn header [title]
  (html 
   [:head
    [:title title]
    [:script "/cljs/play.js"]])) 
```

如果我运行 lein ring server，则`http://localhost:8080/resources/public/cljs/main.js`. 如何映射对 js 的请求以便我的站点可以找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:04:08.417

问题出在 [:script]-tag 中，需要重写为：

```
[:script {:src "/cljs/main.js"}] 
```

或者

```
(include-js "/cljs/main.js") 
```

生成指向 javascript 文件的正确链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:54:21.953

您的 JavaScript 文件应该可以在`http://localhost:8080/cljs/main.js`not下访问`http://localhost:8080/resources/public/cljs/main.js`。否则，您的实际代码看起来还可以。

您是否运行`lein cljsbuild once`并在 下创建了一个 JavaScript 文件`/resources/public/cljs/`？

# java - 使用正则表达式拆分字符串

> ID：14852683
> 
> 赞同：1
> 
> 时间：2013-02-13T11:38:49.417
> 
> 标签：java, regex, tokenize

我想根据我在java中的正则表达式取一个字符串。假设我有一个 String `"R12T12W5P12T5L3"`
。现在我想要这样的东西：`myStr[0]="R12T12",myStr[1]="W5P12",myStr[2]=T5L3.`我想让我的正则表达式首先是一个字符，然后是一个数字，然后是一个字符，最后是一个数字。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:48:09.557

```
String s="R12T12W5P12T5L3";
    String regex = "([A-Z]\\d+){2}";
    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(s);
    while(m.find()){
        System.out.println(m.group(0));
    } 
```

这将打印

```
R12T12
W5P12
T5L3 
```

您可以将它们放入列表并在最后转换为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:48:19.867

从正则表达式到字符串构建的所有操作，在 javascript 中：

```
var str = "R12T12W5P12T5L3";
var result = str.split(/(?=[^\d]){2}/).map(function(v,i,a){
     return i%2 ? a[i-1]+v+'",' : 'myStr['+(i/2)+']="'
}).join('').slice(0,-1); 
```

结果 ：

```
myStr[0]="R12T12",myStr[1]="W5P12",myStr[2]="T5L3" 
```

# shell - Shell 脚本执行不退出

> ID：14852685
> 
> 赞同：0
> 
> 时间：2013-02-13T11:38:53.177
> 
> 标签：shell

当我以 root 用户身份执行 shell 脚本时，它可以完美执行，但是当我以普通用户（而不是 root）身份执行 shell 脚本时，shell 脚本会连续执行。是root用户还是普通用户决定shell Script的执行？

```
#!/bin/sh

s=$1      

pro=`ps -ef | grep $s | grep -v grep | grep -v test3.sh | wc -l`

if [ $pro -eq 0 ] 
then
        echo "Service $s is DOWN..."
        echo "Service $s is DOWN..." >> processlogs.txt
        echo "Starting Service $s..."
        echo "Starting Service $s..." >> processlogs.txt
        java -jar clientApplication.jar $s &

else
        echo "Service $s is Running..."
        echo "Service $s is Running..." >> processlogs.txt

fi 
```

# jquery - 在主干中创建模型结构

> ID：14852688
> 
> 赞同：0
> 
> 时间：2013-02-13T11:39:01.093
> 
> 标签：jquery, backbone.js, underscore.js

我需要创建一个具有如下结构的模型：

```
name: 'xyz',
relatives: [ {name:'abc',age:'123'},{name:'def',age:'123'}..... ] 
```

我所拥有的是一个循环，它在每次迭代中为亲属生成数据。我有一个处于这种状态的模型，例如：

```
window.Persons.name='xyz' 
```

**两个问题**

1.  如何在这个模型中推送亲属数据？我需要了解如何构建具有任何级别的嵌套对象结构的模型实例？

2.  我正在将模型的上下文设置为窗口对象，以便在我从不同视图收集数据时可以在所有视图中访问它。喜欢的名字在其他一些视图中被收集，而亲属在其他一些视图中被收集，这种情况还在继续……所以我做对了吗？或者我正在污染全局命名空间。

请说明一下，因为我确信我在这里缺乏一些基本的理解。

# php - jquery 序列化和 $.post 并在服务器端接收不完整的数组

> ID：14852689
> 
> 赞同：2
> 
> 时间：2013-02-13T11:39:02.537
> 
> 标签：php, jquery, serialization

jQuery：

```
$("#btnSaveForm").click(function(){
...
$.post('../optional/setup/processItemcn.php', $("#FormTemplate").serialize(), function(data) {
     alert(data);
});
...
}); 
```

带有表单的php：

```
<form id="FormTemplate" class="FormTemplate">
  <input type="text" name="kode_item[]" value="1" />
  <input type="text" name="kode_item[]" value="2" />
  <input type="text" name="kode_item[]" value="3" />
  .
  .
  <input type="text" name="kode_item[]" value="197" />
</form> 
```

服务器端的php：

```
$ID = $_POST["kode_item"];
$count = count($ID);   
echo "$count"; 
```

我正在尝试使用 jquery post 和序列化将所有数组数据从表单发送到服务器端。我有 kode_item = 197 个项目的总项目数组，但是在将其发送到服务器端然后我从服务器端检查并回显它 $count = 167 个项目的结果。这就是为什么我无法更新与 kode_item > 167 相关的数据，因为它不会在服务器端处理。有人有想法么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:01:52.620

尝试检查您的 php.ini 中的设置是否正确

```
; Maximum size of POST data that PHP will accept.
post_max_size = 8M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-11T05:25:13.093

我也遇到了这个问题，但没有找到解决方案，在阅读了 jQuery 文档后，我有了一个想法。

您可以使用`.serializeArray()`而不是仅`.serialize()`使用 php.ini 文件。这是我在项目中使用的代码。

```
jQuery('.modal').on('click','.saveFeature',function(){ 

        var form = jQuery('#featureForm').serializeArray();
        jQuery.ajaxSetup({
            data:{
                csrf_name:jQuery('input[name="csrf_name"]').val()
            }
        });
        var url = "<?php echo 'product/features/'.$pid;?>";
        jQuery.post(url,{form}, function(msg){
            alert(msg);
        } );
    }); 
```

提交表单后，您将获得以下格式的数据。

```
Array
(
[0] => Array
    (
        [name] => csrf_name
        [value] => 3802b11296d42e602533bf266bb800bd
    )

[1] => Array
    (
        [name] => title
        [value] => kjhkjh
    )

[2] => Array
    (
        [name] => title_icon
        [value] => fa fa-heart
    )

[3] => Array
    (
        [name] => icon_color
        [value] => #a81616
    )

[4] => Array
    (
        [name] => icon_bg_color
        [value] => #662f2f
    )

[5] => Array
    (
        [name] => description
        [value] => testb
    )

[6] => Array
    (
        [name] => box_bg_color
        [value] => #bd2222
    )

[7] => Array
    (
        [name] => box_bttm_bg
        [value] => #a61e1e
    )

) 
```

在后端处理发布数据时，我使用的是 CodeIgniter 框架。以格式组织该帖子数据，`key=>value`以便于存储数据。

```
$arry = $this->input->post('form');
    $post = [];
    //check if this is not empty and is array
    if(!empty($arry) && is_array($arry)){
        //iterate over post data and organize array in key value format.
        foreach($arry as $ar) 
        {
            $post[$ar['name']] = $ar['value'];
        }
    }

    $data = [
        'pid' => $pid,
        'title' => $post['title'],
        'icon' => $post['title_icon'],
        'icon_color' => $post['icon_color'],
        'icon_bg_color' => $post['icon_bg_color'],
        'description' => $post['description'],
        'box_bg_color' => $post['box_bg_color'],
        'box_bttm_color' => $post['box_bttm_bg'],
    ];

    $this->db->insert(TBL_PRODUCT_FEATURES, $data); 
```

如我错了请纠正我; 我刚刚分享了解决这个问题的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:54:42.463

解决方案来自我的虚拟主机技术人员。

从表单发送到服务器端的数组数据太长了，然后.. [suhosin](http://www.hardened-php.net/suhosin/)限制了将要发送的数组数据。

这种方式对我有用。将这两行添加到 php.ini：

```
suhosin.post.max_vars = 1500
suhosin.request.max_vars = 1500 
```

# security - Cookie 编码 Base64

> ID：14852693
> 
> 赞同：0
> 
> 时间：2013-02-13T11:39:13.013
> 
> 标签：security, base64, httpcookie

Cookie 可以是 base64 编码。因此，如果我捕获 pcap，有什么方法可以告诉我 cookie 是 base64 编码的吗？这里的基本原理是，看不到填充 (=) 符号，它是 base64 编码的，不能有任何填充。cookie 格式是否支持判断它是否被编码的方式，就像我们在 URI 中那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:43:33.197

如果 cookie 值中的字符在 Base64 值集的范围内，则**可以**进行 Base64 编码，您还应该检查长度，因为它必须是 4 的倍数。

# java - 使用 DB2 和 myBatis 调用 setClientInfo 时出现 AbstractMethodError

> ID：14852694
> 
> 赞同：1
> 
> 时间：2013-02-13T11:39:20.320
> 
> 标签：java, db2, mybatis

使用 DB2 和 myBatis。一些背景：我在一个表上有一个触发器，当删除一行并将该行插入历史表时应该触发，我希望删除该行的用户（不是连接用户）反映在这个列中桌子。

到目前为止，我已经编写了触发器，以便它使用 DB2 的`CLIENT_USERID`寄存器来获取用户，并且还编写了一个 myBatis 拦截器，只要`setClientInfo`在 Connection 上准备了一条语句，它就应该设置用户。

拦截器类注解如下：

```
@Intercepts({@Signature(
        type = StatementHandler.class,
        method = "prepare",
        args = {Connection.class})}) 
```

拦截有效，但是当我尝试`setClientInfo`在拦截方法 (Connection) 的参数上调用该方法时，结果证明该方法是抽象的。

有没有更简单的方法可以做到这一点，或者这会起作用吗？我该如何解决这个问题？

感谢您看这篇文章！

# .net - 在.net sql server中运行多个查询时出错

> ID：14852696
> 
> 赞同：0
> 
> 时间：2013-02-13T11:39:28.247
> 
> 标签：.net, sql-server, sql-server-2008-r2, odbc

让我们考虑以下通过 odbc 驱动程序连接 sql server 的连接字符串为

```
"Driver={SQL Server Native Client 10.0};Server=xxx.xx.xx.xx,xxxx;Database=mydata;Uid=xx;Pwd=xxxxxx;" 
```

**数据库类型：Sql server**

**驱动：sql server-ODBC原生客户端10.0**

**提供者类型：System.Data.Odbc**

我正在通过 odbc 连接执行 50 个命令...

在连接字符串 1 中的 50 前 25 和连接字符串 2 中的其余 25 中。

那里有

当我执行这些命令时，大约执行了 35 个命令，之后我得到了**错误**

```
ERROR [HY000] [Microsoft][SQL Server Native Client 10.0]Unspecified error occurred on SQL Server. Connection may have been terminated by the server. 
```

休息之后执行的所有查询和

**堆栈跟踪：**

```
 at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
   at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader, Object[] methodArguments, SQL_API odbcApiMethod)
   at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader)
   at System.Data.Odbc.OdbcCommand.ExecuteNonQuery()
   at testprovision.CommonDAL.ExecuteNonQuery(String connectionString, CommandType cmdType, String cmdText, OdbcParameter[] commandParameters) in 
```

**执行我使用的非查询循环代码**是

```
public static int ExecuteNonQuery(string connectionString, CommandType cmdType, string cmdText, params OdbcParameter[] commandParameters)
{
    int val = 0;
    OdbcCommand cmd = new OdbcCommand();
    try
    {
       using (OdbcConnection conn = new OdbcConnection(connectionString))
       {
           CommonCommand(cmd, conn, null, cmdType, cmdText, commandParameters);
           val = cmd.ExecuteNonQuery();
           cmd.Parameters.Clear();
           conn.Close();
        }
    }
    catch (Exception ex)
    {
    }
    finally
    {
        cmd.Dispose();
    }
    return val;
} 
```

我现在必须做什么才能解决问题

等待您的回复。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:19:13.040

所以你在 CommonCommand 中打开 conn ？
在我看来，这是一种不好的做法。
在一个地方打开和关闭。
现在如果 ExecuteNonQuery(); 失败它去 Catch 并且 conn 没有关闭。

试试这个模式

```
OdbcConnection conn = new OdbcConnection(connectionString);
try
{
   conn.Open();
   using (OdbcCommand cmd = conn.CreateCommand)
   {
       // do NOT have CommonCommand open the connection.  
       // change CommonCommand to not even pass the connection
       CommonCommand(cmd, null, cmdType, cmdText, commandParameters);
       val = cmd.ExecuteNonQuery();
       // cmd.Parameters.Clear();   
       // don't need to clear or dipose it will do so when it falls out of scope     
   }
}
catch (Exception ex)
{
}
finally
{
    conn.Close();
} 
```

# java - 将新对象附加到现有文件

> ID：14852697
> 
> 赞同：0
> 
> 时间：2013-02-13T11:39:28.847
> 
> 标签：java, object, serialization, objectoutputstream, objectinputstream

嗨，我在尝试将新对象附加到现有文件时遇到问题。一旦再次启动 android 应用程序，我想获取现有文件并添加新对象，然后从现有文件中读取对象...实际上，当我试图读取对象时，代码将只读取第一个对象..您可以在代码下方找到..您能帮忙吗？谢谢

使用以下方法编写对象：

```
 public void saveObject(Person p, File f){
     try
     {

         ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(f, true));
         oos.writeObject(p);
         oos.reset();
         oos.flush(); 
         oos.close();

     }
     catch(Exception ex)
     {
        Log.v("Serialization Save Error : ",ex.getMessage());
        ex.printStackTrace();
     }
} 
```

使用以下方法读取对象：

```
 public Object loadSerializedObject(File f)
{

       try {
          ObjectInputStream ois = new ObjectInputStream(new FileInputStream(f));
           try{
              Object loadedObj = null;
              while ((loadedObj = ois.readObject()) != null) {
              Log.w(this.getClass().getName(), "ReadingObjects") ;

            }
              return objects;
           }finally{
               ois.close();
           }

       } catch (StreamCorruptedException e) {
           e.printStackTrace();
       } catch (IOException e) {

           e.printStackTrace();
       } catch (ClassNotFoundException e) {
           e.printStackTrace();
       }
       return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:18:54.283

不幸的是，您不能`ObjectOutputStream`每次想要附加到流中时都创建一个新的，然后用单个流读回所有内容。在您开始编写对象之前，[构造函数](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#ObjectOutputStream%28java.io.OutputStream%29)将标头添加到底层流。您可能会看到`java.io.StreamCorruptedException: invalid type code: AC`异常，这是因为第一个标头是`0xAC`.

我不知道您要处理多少对象，但一种选择可能是读取所有对象，然后使用单个`ObjectOutputStream`. 如果有很多对象，那可能会变得昂贵。或者，您可能需要考虑通过[Externalizable](http://docs.oracle.com/javase/6/docs/api/java/io/Externalizable.html)自己手动管理序列化。但它可能会很痛苦。

# python - 多处理模块是否修复了 CPython 多核使用？

> ID：14852698
> 
> 赞同：3
> 
> 时间：2013-02-13T11:39:30.743
> 
> 标签：python, multithreading, python-3.x, multiprocessing, cpython

在 CPython 中，线程模块不使用多核，因为它使用全局解释器锁。然而，我最近从标准库中发现了[多处理模块](http://docs.python.org/3.3/library/multiprocessing.html)，据说它回避了 GIL。所以我认为使用该模块可以在 CPython 中正确利用多个核心，但我想知道我是否正确。

我需要编写一个需要充分利用多核的应用程序，但这对性能不是很重要，所以我可以用 Python 编写它，但我需要知道这个模块是否允许我使用多核？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T11:41:48.217

该`multiprocessing`库使用子进程；这些都在自己的 Python 解释器中运行。

操作系统可以并且将跨多个进程和内核调度这些进程，是的。因为每个子进程都是一个单独的 Python 解释器进程，所以 GIL 不会干扰。

# javascript - 通过边缘调整元素 (li) 的大小

> ID：14852702
> 
> 赞同：0
> 
> 时间：2013-02-13T11:40:00.977
> 
> 标签：javascript, html, css

我用一些基本代码创建了一个小提琴，请就调整大小功能、核心 Javascript ninjas 和 guru 提出建议

[http://jsfiddle.net/developer11/ZGTL3/](http://jsfiddle.net/developer11/ZGTL3/)

```
<div id="bars">
<ul id="bars_3">
<li id="bars_3_0"><a id="resizer" href="javascript:;"></a></li>
</ul>
</div> 
```

JavaScript 是

```
document.getElementById("bars_3_0").firstChild.addEventListener("mousedown", function() {
event.preventDefault();
document.addEventListener("mousemove", mousemoveHandler);
}, false);

document.addEventListener("mouseup", function() {
document.removeEventListener("mousemove", mousemoveHandler);   
});

function mousemoveHandler() {
console.log('move');   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:51:41.597

您可以尝试将标志设置为 true on`mousedown`并将其设置为 false on `mouseup`。然后，`mousemove`您可以更改元素的高度或位置以匹配当前鼠标位置。

在您的`mousemove`听众中，您可以检查您的`mousedown`标志以查看是否应该更新位置。

[此页面](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)可能会帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:12:49.033

```
document.getElementById("bars_3_0").firstChild.onmousedown = function() {
        console.log('down');
    }; 
```

希望这可以解决您在提琴手代码中的问题。

```
document.getElementById("bars_3_0").firstChild.onmousedown=function() {
document.onmousemove=mousemoveHandler
};

document.onmouseup=function() {
document.onmousemove='';   
};

function mousemoveHandler() {
console.log('move');   
} 
```

# android - Android google maps v2 mapfragment 或片段内的mapview

> ID：14852705
> 
> 赞同：3
> 
> 时间：2013-02-13T11:40:04.580
> 
> 标签：android, google-maps, maps

您好，我正在尝试使用 api v2 地图在片段内创建一个小地图视图。任何人都可以帮助了解它是如何完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:57:05.920

这个问题非常模糊，可能超出了 Stack Overflow 的范围。您应该查看 Google Play Services SDK 附带的 mapdemo 示例应用程序（请参阅[安装说明](https://developers.google.com/maps/documentation/android/intro#sample_code)），尤其是 MultiMapDemoActivity，它展示了如何使用多个 MapFragment。

# gtk - 我在 linux 中使用 gtk 开发了一个工具。它现在工作正常我想让它移植到 Windows？

> ID：14852707
> 
> 赞同：0
> 
> 时间：2013-02-13T11:40:09.213
> 
> 标签：gtk, glade, gtk2

对于那个工具，我使用 glade -3 在 linux 中构建 windows 并使用 gtk builder 导入内部代码，现在想将此工具移植到 windows xp 最好的方法是什么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:54:48.307

安装[gtk.org](http://www.gtk.org/download/index.php)上提供的 GTK-all-in-one 捆绑包。安装过程 ins 包含在捆绑包中的 README 文件中。然后，在你的 Windows 平台上安装[MinGW](http://www.mingw.org/)，并使用 mingw-get（包管理工具）来安装 msys（一个 shell）。对于 64 位版本，您可以使用[MinGW-64](http://mingw-w64.sourceforge.net/)（它是 MinGW 的一个分支）。然后，您将拥有一个在 Windows 上进行开发的平台。

我个人使用该平台和 CMake 成功构建了一些代码示例。阅读我关于[如何在 Windows 中更轻松地将 gtk 库与 cmake 链接的答案？](https://stackoverflow.com/questions/2730135/how-do-i-link-gtk-library-more-easily-with-cmake-in-windows)对于 CMake + GTK 代码示例。

# windows-phone-8 - 在 windows phone 8 应用程序中下载并解压缩 zip 文件

> ID：14852710
> 
> 赞同：2
> 
> 时间：2013-02-13T11:40:14.667
> 
> 标签：windows-phone-8, phonegap-plugins, compression

我正在开发一个 Windows Phone 8 应用程序 (phonegap)，它从我的服务器位置下载一个 zip 文件，我想在运行时在我的应用程序中解压缩这个文件以使用存档中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:14:30.613

您可以使用 3rd 方库来解压缩和提取 WP7/WP8 中的 ZIP 文件。最常见的是#ZipLib，您可以从@http://slsharpziplib.codeplex.com/ 下载 WP7[端口](http://slsharpziplib.codeplex.com/)

我个人最喜欢的库是[DotNetZip](http://dotnetzip.codeplex.com/)，它是#ZipLib 的超集，并且更稳定的 IMO。这是一个快速的代码示例：

```
 private void MyExtract()
  {
      string zipToUnpack = "C1P3SML.zip";
      string unpackDirectory = "Extracted Files";
      using (ZipFile zip1 = ZipFile.Read(zipToUnpack))
      {
          // here, we extract every entry, but we could extract conditionally
          // based on entry name, size, date, checkbox status, etc.  
          foreach (ZipEntry e in zip1)
          {
            e.Extract(unpackDirectory, ExtractExistingFileAction.OverwriteSilently);
          }
       } 
```

# haskell - 这些类似 Free 的结构有一个概括吗？

> ID：14852712
> 
> 赞同：16
> 
> 时间：2013-02-13T11:40:19.190
> 
> 标签：haskell, category-theory, free-monad

我正在玩一些类似免费的想法，发现了这个：

```
{-# LANGUAGE RankNTypes #-}

data Monoid m = Monoid { mempty :: m, mappend :: m -> m -> m }
data Generator a m = Generator { monoid :: Monoid m, singleton :: a -> m }

newtype Free f = Free { getFree :: forall s. f s -> s }

mkMonoid :: (forall s. f s -> Monoid s) -> Monoid (Free f)
mkMonoid f = Monoid {
    mempty = Free (mempty . f),
    mappend = \a b -> Free $ \s -> mappend (f s) (getFree a s) (getFree b s)
}

freeMonoid :: Monoid (Free Monoid)
freeMonoid = mkMonoid id

mkGenerator :: (forall s. f s -> Generator a s) -> Generator a (Free f)
mkGenerator f = Generator {
    monoid = mkMonoid (monoid . f),
    singleton = \x -> Free $ \s -> singleton (f s) x
}

freeGenerator :: Generator a (Free (Generator a))
freeGenerator = mkGenerator id 
```

我想找到可以编写函数的条件：

```
mkFree :: (??? f) => f (Free f) 
```

但我一直无法找到一个有意义的结构`f`（除了一个简单的结构，其中`mkFree`是 的一种方法`???`），它允许编写这个函数。特别是，如果这个结构没有提到`Free`类型，我的审美会更喜欢。

有没有人见过这样的东西？这种概括可能吗？在我还没有想到的方向上是否有一个已知的概括？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T10:22:28.780

与通用代数的链接是一个很好的起点，在阅读了一点之后，一切都到位了。我们正在寻找的是一个 F 代数：

```
type Alg f x = f x -> x 
```

对于任何 (endo)functor `f`。例如，对于 Monoid 代数，函子是：

```
data MonoidF m = MEmpty | MAppend m m deriving Functor 
```

对于任何`Monoid`情况，都有明显的幺半群​​代数：

```
monoidAlg :: Monoid m => Alg MonoidF m
monoidAlg MEmpty = mempty
monoidAlg (MAppend a b) = mappend a b 
```

现在我们可以从 free-functors 包中获取自由函子定义，并用 f-algebra 替换类约束：

```
newtype Free f a = Free { runFree :: forall b. Alg f b -> (a -> b) -> b } 
```

从某种意义上说，自由函子是将任何集合`a`转化为代数的最佳方式。这是如何：

```
unit :: a -> Free f a
unit a = Free $ \_ k -> k a 
```

这是最好的方法，因为对于`a`转换为代数的任何其他方法`b`，我们可以将自由代数中的函数赋予`b`：

```
rightAdjunct :: Functor f => Alg f b -> (a -> b) -> Free f a -> b
rightAdjunct alg k (Free f) = f alg k 
```

剩下的就是实际证明自由函子创建了一个 f 代数（这就是你所要求的）：

```
freeAlg :: Functor f => Alg f (Free f a)
freeAlg ff = Free $ \alg k -> alg (fmap (rightAdjunct alg k) ff) 
```

稍微解释一下：`ff`是类型`f (Free f a)`，我们需要构建一个`Free f a`. 如果我们可以构建一个`b`, given`alg :: f b -> b`和，我们就可以做到这一点`k :: a -> b`。因此`alg`，`ff`如果我们可以将`Free f a`它包含的每个映射到 a ，我们就可以申请`b`，但这正是and的`rightAdjunct`作用。`alg``k`

你可能已经猜到了，这`Free f`是函子上的自由单子`f`（准确地说是[教堂编码的版本。）](http://hackage.haskell.org/packages/archive/free/3.3.1/doc/html/Control-Monad-Free-Church.html)

```
instance Functor f => Monad (Free f) where
  return = unit
  m >>= f = rightAdjunct freeAlg f m 
```

# wmi - win32_NTLogEvent 时间生成格式是什么

> ID：14852716
> 
> 赞同：1
> 
> 时间：2013-02-13T11:40:37.063
> 
> 标签：wmi, event-log, win32-process

wmi“20061101185842.000000-000”中的eventlog时间生成值是什么意思。

当我使用 Windows 事件查看器时，它给出的日期和时间格式为“2/13/2013 4:05:15 PM”，但是当我在 win32_NTLogEvent 中访问它时，它给出的格式为“20061101185842.000000-000”。

请清除我的疑问...

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T16:01:30.173

WMI 使用通用时间坐标 (UTC) 格式，请尝试这些文章以获取更多信息。

*   [使用 WMI 处理日期和时间](http://technet.microsoft.com/en-us/library/ee198928.aspx)
*   [将 WMI 日期转换为标准日期时间格式](http://technet.microsoft.com/en-us/library/ee156576.aspx)
*   [WMI 日期和时间格式 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389802%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-09T15:05:14.890

您可以像这样将其转换为 DateTime：

```
ManagementDateTimeConverter.ToDateTime(yourValue); 
```

其中 yourValue 是这样的字符串：“20061101185842.000000-000”

# java - 在 Java 中双击 JTable 上的侦听器

> ID：14852719
> 
> 赞同：37
> 
> 时间：2013-02-13T11:40:42.087
> 
> 标签：java, swing, jtable, double-click, listselectionlistener

`valueChanged`我很好奇只有​​在`JTable`双击一行时如何调用覆盖的方法。现在，下面的代码片段实现了单击操作或事件箭头键来浏览人员列表并进行`JLabel`相应调整。我正在尝试做的是类似于我单击一次所做的事情，但是这次如果并且仅当双击一行`dto`时会改变，否则什么也不会发生。我该怎么做呢 ：（

```
 class ListDataUI {

    public void addListSelectionListener(ListSelectionListener listSelectionListener) {
            summaryTable.getSelectionModel().addListSelectionListener(listSelectionListener);

 public T getSelectedDTO() {
        final int selectedRowIndex = summaryTable.getSelectedRow();
        if (selectedRowIndex != -1) {
            return data.get(summaryTable.convertRowIndexToModel(selectedRowIndex));
        } else {
            return null;
        }
    }
        }
    }

    class MainMenu extends javax.swing.JFrame {
    private void initListeners() {
    searchTable.addListSelectionListener(new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {
            if (!e.getValueIsAdjusting()) {
                AcademicDTO dto = (AcademicDTO) searchTable.getSelectedDTO();
                acImgLabel.setIcon(new ImageIcon());
                label_name.setText(dto.getTitle() + " " + dto.getForename() + " " + dto.getSurname());
                label_role.setText("Role: " + dto.getRole());
                label_phone.setText("Phone: " + dto.getPhone());
                label_room.setText("Room: " + dto.getRoom());
                label_hours.setText("Hours: " + dto.getHours());
                label_mobile.setText("Mobile: " + dto.getMobile());
                if (dto.getImage() != null) {
                    acImgLabel.setIcon(new ImageIcon(dto.getImage()));
                }
            }
        }
    });
}

}

 private void initListeners() {
    contactTable.addMouseListener(new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent e) {
            ContactDTO dto = (ContactDTO) contactTable.getSelectedDTO();
            if (e.getClickCount() == 2) {
                System.out.println(dto.getForename());
            } else {
            }

        }
    });
} 
```

不确定上面的其余部分......

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-10-25T09:28:28.580

尝试这个：

```
mytable.addMouseListener(new MouseAdapter() {
    public void mousePressed(MouseEvent mouseEvent) {
        JTable table =(JTable) mouseEvent.getSource();
        Point point = mouseEvent.getPoint();
        int row = table.rowAtPoint(point);
        if (mouseEvent.getClickCount() == 2 && table.getSelectedRow() != -1) {
            // your valueChanged overridden method 
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:02:22.770

将事件处理程序的代码重新定位到宿主类中的私有方法中，然后在其中实现`MouseListener`或扩展`MouseAdapter`然后调用私有方法。第一步（即创建私有方法可帮助您从多个事件处理程序调用相同的逻辑）。

调用`MouseHandler`_`MouseEvent.getClickCount()`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-14T07:41:12.697

@MooHa 您的类 ListDataUI 应该实现 MouseListener。

# jquery - django 和 jQuery - 内联删除和记录更新

> ID：14852720
> 
> 赞同：2
> 
> 时间：2013-02-13T11:40:44.177
> 
> 标签：jquery, django

我是 django 的新手，我遇到了一些困难。我有一张包含多条（100 条）记录的表。

我想使用 jQuery 来启用记录的内联更新和删除。

### HTML：

```
<p>The current candidate list is:</p>
    <div id="display1">
        <span>
          <button class="delete_button" id="1">del</button>
        </span>
        <span style="width:50px;">
          <button class="editdiv" id="1">EDIT</button>
        </span>
        <span>
            <a href="/candidates/1/">jake wilmott</a>
        </span>
        <span>
            de vere 
        </span>
        <span>
            Nepal 
        </span>
        <span>
            hands off 
        </span>
        <span>
            connected 
        </span>
        <span>
            nice guy 
        </span>
    </div>
    <div class="noshow" id="edit1">
        <span style="width:100px;"><button class="update" id="1">update</button></span>
        <span>
            jake wilmott
        </span>
        <span style="width:220px;">
            <input class="company" type="textfield" style="width:210px;" id="new_company1" value="de vere" />
        </span>
        <span>
            <input type="text" id="new_country1" value="Nepal" />
        </span>
        <span>
            <select id="new_status1">
                <option value="no contact">no contact</option>
                <option value="hands off">hands off</option>
                <option value="ongoing">ongoing</option>
                <option value="sent email">sent email</option>
                <option value="waiting">waiting</option>
                <option value="trash">trash</option>
            </select>
        </span>
        <span>
            <input type="text" id="new_connection" value="connected" />
        </span>
        <span style="width:220px;">
            <input type="textfield" style="width:210px;" id="new_notes" value="nice guy" />
        </span>
    </div> 
```

### jQuery函数是：

```
//delete
<script>
    $(document).ready(function() {
        $(".delete_button").click(function() {
            alert('delete script')
            var id = $(this).attr('id');
            alert(id)
            $.ajax({
                type: "POST",
                 url: "/candidates/",
                data: { id:id },
                success: function(response){
                    alert(response);
                }
            });
            return false;
        });
    });
</script> 
```

`alert('delete script')`警报等等`alert(id)`。但后来它崩溃了，什么也没有发生

### 更新的 jQuery 是：

```
<script>
    $(document).ready(function() {
        $('.update').click(function() {
            alert('script now')
            var id = $(this).attr('id');
            var company = $("#new_company" + id).val()
            var country = $("#new_country" + id).val()
            var status =  $("#new_status" + id).val()
            alert(status)
            $.post('/candidates/' + id + company + country + status + '/', function() {
                alert('to here')
                //$this.replaceWith("<span class='success'>Liked</span>");
                jQuery(data["html"]).appendTo(".success");
            });
        });
    });
</script> 
```

再次`alert('script now')`并且`alert(status)`都尽职尽责地警觉，然后它再次崩溃。

### urls.py 是：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    # Examples:
    url(r'^candidates/$', 'candidates.views.index'),
    # url(r'^$', 'amore.views.index', name='index'),
    url(r'^candidates/(?P<id>\d+)/$', 'candidates.views.detail'),
    url(r'^candidates/(?P<id>\d+)/$', 'candidates.views.delete'),
    url(r'^update/(\d+)/$','candidates.views.update'), 
```

### view.py 是：

```
from django.template import Context, loader
from candidates.models import Candidates
from django.http import HttpResponse
from django.shortcuts import render_to_response, get_object_or_404

def index(request):
    return HttpResponse("Hello, world. You're at the candidate index.")

def index(request):
    data = Candidates.objects.all()[:5]
    t = loader.get_template('candidates/index.html')
    c = Context({
        'data': data,
    })
    return HttpResponse(t.render(c))

def update(request, id):
    candidate = Candidates.objects.get(pk = id)
    candidate.company = request.POST.get('company')
    candidate.country = request.POST.get('country')
    candidate.status = request.POST.get('status')
    candidate.notes = request.POST.get('notes')
    candidate.save()
    return HttpResponse('updated')

def delete(request, id):    
    candidate = Candidates.objects.get(pk = id)
    candidate.delete()
    return HttpResponse('this record has been deleted')

def detail(request, id):
    p = get_object_or_404(Candidates, pk=id)
    return render_to_response('candidates/detail.html', {'Candidates': p}) 
```

我已经搜索了数百页，但我无法解决这个问题。

所以：

1.  我究竟做错了什么？
2.  将变量传递给 jQuery 脚本中的 URL 应该是什么`views.py`
3.  文件是否`urls.py`正确？

请帮我让它工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:32:56.377

对于 jQuery，您需要以 JSON 形式返回答案，而不是 HTML。

```
def delete(request):    
    candidate = Candidates.objects.get(pk = int(request.REQUEST['id']))
    candidate.delete()
    payload = {'success': True}
    return HttpResponse(json.dumps(payload), content_type='application/json') 
```

示例 jQuery 删除

```
 //delete
 <script>
 $(document).ready(function() {
    $(".delete_button").click(function() {
        alert('delete script')
        var id = $(this).attr('id');
        alert(id)
        $.ajax({
            type: "POST",
            url: "/candidates/delete/",
            data: { id:id },
            success: function(response){
                alert(response.success);
            }
        });
        return false;
    });
}); 
```

在 urls.py

```
url(r'^candidates/delete/$', 'candidates.views.delete'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:55:24.567

有多个问题

1-适当地修复你的网址

```
url(r'^candidates/(?P<id>\d+)/$', 'candidates.views.detail'),
url(r'^candidates/delete/(?P<id>\d+)/$', 'candidates.views.delete'), #add prefix 'delete'
url(r'^update/(?P<id>\d+)/$','candidates.views.update'),  # add ?P<id> 
```

2-在 ajax 中删除，将代码更新为

```
$.ajax({
    type: "POST",
     url: "/candidates/delete/"+id, //added delete/id in url
    data: { 'id':id },              // quotes around id key 
```

3 - 同样，编写 Ajax 进行更新，而不是您编写的方式。样本

```
$.ajax({
    type: "POST",
     url: "/update/"+id, //added delete/id in url
    data: { 'id':id,             //provide post data
            'company': company,
            'status': status,
            'notes': notes
       }, 
```

# magento - Oauth Invalid auth/bad request（得到 404，预期 HTTP/1.1 20X 或重定向）

> ID：14852724
> 
> 赞同：2
> 
> 时间：2013-02-13T11:40:51.663
> 
> 标签：magento, oauth

我试图列出所有使用 rest api 的产品。我跟着这个[教程](http://www.magentocommerce.com/api/rest/introduction.html)。当我访问这个网址“ [http://yourhost.com/oauth_customer.php](http://yourhost.com/oauth_customer.php) ”时，它会将我带到授权页面，我得到了 oauth 令牌和 oauth 密钥。但是当我单击授权按钮时，我收到此错误“无效的身份验证/错误请求（得到 404，预期 HTTP/1.1 20X 或重定向）”。

***认证细节。***

启用纯文本支持

启用 RSA-SHA1 支持

启用 HMAC-SHA1 支持

请求引擎支持 php_streams、curl

源版本 $Id: oauth.c 325799 2012-05-24 21:07:51Z 下颚 $

版本 1.2.3

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T14:41:01.623

在我的情况下，我必须添加一个限制以使其工作 /api/rest/products?limit=100 但是我仍在寻找一种解决方案来检索所有产品，就像在 SOAP 调用中一样。

# jpa - 托管类型 [...] 的属性 [...] 不存在（对于具有小写/大写名称的字段

> ID：14852727
> 
> 赞同：3
> 
> 时间：2013-02-13T11:41:02.627
> 
> 标签：jpa

出现以下错误信息

```
java.lang.IllegalArgumentException: 
The attribute [eMailStatus] 
from the managed type [EntityTypeImpl@902966747:PersonJpaDao 
   [ javaType: class com.bitplan.smartCRM.jpa.PersonJpaDao descriptor: 
   RelationalDescriptor(com.bitplan.smartCRM.jpa.PersonJpaDao --> [DatabaseTable(Person)]),  
   mappings: 46]] 
is not present.
    at 
 org.eclipse.persistence.internal.jpa.metamodel.ManagedTypeImpl.getAttribute(ManagedTypeImpl.java:147) 
```

当注释和getter 和setter 存在时：

```
 /**
   * getter for xsd:string/String EMailStatus
   * @return eMailStatus
   */
  @Column(name="eMailStatus")
  public String getEMailStatus() { 
    return getPersonImpl().getEMailStatus(); 
  }

  /**
   * setter for xsd:string/String EMailStatus
   * @param peMailStatus - new value for EMailStatus
   */
  public void setEMailStatus(String peMailStatus) { 
    getPersonImpl().setEMailStatus(peMailStatus); 
  } 
```

我的假设是该字段的命名是相关的：如果该字段的第一个字母是小写字母，第二个字母是大写字母，则问题似乎显示。属性名称如：

*   社会保障号
*   电子邮件状态

还可以，但是例如

*   电子邮件状态
*   x状态

不是。

这里可能发生了什么，我该如何调试它以找出如何解决这个问题？

我猜 JavaBean 规范的大写规则是罪魁祸首，正如 [JavaBean 属性命名约定在哪里定义的评论中所概述的那样？](https://stackoverflow.com/questions/1991316/where-is-the-javabean-property-naming-convention-defined)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:43:01.880

条件查询片段：

```
Path<String> beanValue = qh.from.<String> get(beanField); 
```

必须使用 EMailStatus 而不是 eMailStatus 作为 beanField 内容来完成 - 即使属性的名称是 eMailStatus 并且由于 java bean 约定，只有 getter 具有大写字母“E”。我还没有找到原因 - 所以其他答案仍然值得赞赏。

[Introspector decapitalize 函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/beans/Introspector.html#decapitalize%28java.lang.String%29)在这里可能会有所帮助。

它还可以将列重命名为“EMailStatus”：

```
 /**
   * getter for xsd:string/String EMailStatus
   * @return eMailStatus
   */
  @Column(name="EMailStatus")
  public String getEMailStatus() { 
    return getPersonImpl().getEMailStatus(); 
  }

  /**
   * setter for xsd:string/String EMailStatus
   * @param peMailStatus - new value for EMailStatus
   */
  public void setEMailStatus(String peMailStatus) { 
    getPersonImpl().setEMailStatus(peMailStatus); 
  } 
```

# mysql - VB.NET 将 Datagrid 行慢速插入到 MySQL

> ID：14852745
> 
> 赞同：4
> 
> 时间：2013-02-13T11:41:54.240
> 
> 标签：mysql, vb.net

我有一个例程将 CSV 导入数据网格，然后只需一个 for-next 循环来插入每一行，但它的运行速度很慢，需要 18 分钟才能插入 7100 行。

现在我已经将连接调用从循环中取出，所以它只执行一次，执行插入，然后在完成时关闭。

我已经看到提到一次批量插入 100 行可能会有所帮助，但这可能需要一些复杂的例程来计算其当前最多的行，然后在这么多 100 行之后计算奇数。

有没有一种简单的方法可以说插入整个数据网格而不是没有 for/next 循环的 100 行？

正如您将在下面看到的那样，为了方便阅读，我已经分解了我的查询字符串，将它连接成一行会有很大的不同吗？在您回复时，我可能已经尝试过了：

```
 con = New MySqlConnection("Data Source=" & vardbpath & ";Database=" & vardbname & ";User ID=" & txtUsername.Text & ";Password=" & txtPassword.Text & ";")
        con.Open()

        For i = 0 To rows - 1
            Query = "INSERT into GENERAL (a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad)"
            Query &= "values ('"
            Query &= (DataGrid1.Rows(i).Cells(0).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(1).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(2).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(3).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(4).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(5).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(6).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(7).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(8).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(9).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(10).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(11).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(12).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(13).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(14).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(15).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(16).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(17).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(18).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(19).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(20).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(21).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(22).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(23).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(24).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(25).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(26).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(27).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(28).Value)
            Query &= "','" + (DataGrid1.Rows(i).Cells(29).Value)
            Query &= "')"

            Dim cmd As MySqlCommand = New MySqlCommand(Query, con)

            Try
                Dim j As Integer = cmd.ExecuteNonQuery()
                If (j > 0) Then txt_folderactivity.Text &= "Row Successfully Inserted" & vbCrLf
            Catch myerror As MySqlException
                txt_folderactivity.Text &= "Error Executing SQL command: " & myerror.Message & vbCrLf

            End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:30:42.503

无需将整个 csv 加载到数据网格中，您可以一次仅加载一个完整的屏幕（或多一点），然后在页面上重新加载页面上的其他记录，页面向下或搜索。您还可以使用虚拟模式：

[http://msdn.microsoft.com/en-us/library/ms171621.aspx](http://msdn.microsoft.com/en-us/library/ms171621.aspx)

如果你有一个巨大的查询来一次加载它，你可能想要使用 stringBuilder 而不是字符串。这可以防止另一个瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T15:02:26.987

这是因为您正在建立一个新的连接并为每一行创建一个新的`MySqlCommand`和一个新的对象。`MySqlConnection`由于一一输入许多数据，这应该会很慢。尝试更改您的代码以执行一堆 sql 命令，如下所示：

```
 Query = ""
    For i = 0 To rows - 1
        Query = "INSERT into GENERAL (a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad)"
        Query &= "values ('"
        Query &= (DataGrid1.Rows(i).Cells(0).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(1).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(2).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(3).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(4).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(5).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(6).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(7).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(8).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(9).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(10).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(11).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(12).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(13).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(14).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(15).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(16).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(17).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(18).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(19).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(20).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(21).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(22).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(23).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(24).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(25).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(26).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(27).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(28).Value)
        Query &= "','" + (DataGrid1.Rows(i).Cells(29).Value)
        Query &= "');"
    Next

    con = New MySqlConnection("Data Source=" & vardbpath & ";Database=" & vardbname & ";User ID=" & txtUsername.Text & ";Password=" & txtPassword.Text & ";")
    con.Open()
    Dim cmd As MySqlCommand = New MySqlCommand(Query, con)

    Try
        Dim j As Integer = cmd.ExecuteNonQuery()
        If (j > 0) Then txt_folderactivity.Text &= "Row Successfully Inserted" & vbCrLf
    Catch myerror As MySqlException
        txt_folderactivity.Text &= "Error Executing SQL command: " & myerror.Message & vbCrLf

    End Try 
```

# sql - SQL Server：如何使用逗号作为分隔符拆分字符串

> ID：14852747
> 
> 赞同：2
> 
> 时间：2013-02-13T11:41:56.840
> 
> 标签：sql, tsql, trim

我需要在我的数据库中填充纬度和经度列，但是原始信息存储为单个字符串

例如。

```
UDFChar1 = 41.243223,-8.183913 
```

我猜 TRIM 命令在这里会派上用场，但我不知道如何告诉它在每一半的逗号上完全停止。

我希望能够想出的是一个简单的 UPDATE 查询，如下所示：

```
UPDATE Asset
SET Lattitude = (SELECT LTRIM(UDFChar1)),
Longitude = (SELECT RTRIM(UDFChar1)) 
```

但显然在 LTRIM 和 RTRIM 部分有一些额外的工作，所以我只选择数据，而不包括 UDFChar1 中的逗号

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T11:47:17.307

请试试：

```
left(Col, charindex(',', Col)-1) 
```

和

```
right(Col, len(Col)-charindex(',', Col)) 
```

样本

```
SELECT 
    LEFT(COL, CHARINDEX(',', Col)-1) Lattitude, 
    RIGHT(COL, LEN(COL)-CHARINDEX(',', Col)) Longitude
 FROM(
    SELECT '41.243223,-8.183913' Col
)x 
```

# perl - perl 脚本的运行时内存

> ID：14852750
> 
> 赞同：0
> 
> 时间：2013-02-13T11:42:02.227
> 
> 标签：perl, memory

我有一个 perl 脚本，当我的脚本正在运行 ~ 300 个并行作业用于下载数据并且消耗大量内存时，每当一个高优先级进程出现时，它就会被自动作业杀死。我想弄清楚在运行时需要多少内存，以便我可以在调度脚本之前请求更多内存，或者如果我使用某些工具了解我的代码中占用更多内存的部分，我可以优化它的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:27:59.650

关于 OP 对这个问题的评论，如果你想尽量减少内存使用，一定要一次一行/一行地收集和附加数据。如果您一次将所有这些都收集到一个变量中，这意味着您需要一次将所有这些都保存在内存中。

关于问题本身，您可能想了解是否可以让 Perl 代码只运行一次（而不是运行 300 个单独的实例），然后`fork`创建您的个人工作进程。当您使用 时`fork`，子进程将比不相关的进程更有效地与父进程共享内存，因此您将只需要在内存中拥有 Perl 二进制文件的一份副本，而不是 300 个副本。

# java - 使用序列化在类加载器之间共享对象

> ID：14852753
> 
> 赞同：0
> 
> 时间：2013-02-13T11:42:07.377
> 
> 标签：java, serialization, classloader

我有一个测试，在自定义类加载器中加载项目的一些模块（用于测试目的）。此类对象中的一种方法将自定义对象作为参数，如果我将其从测试类（已由默认类加载器加载）传递给由我的自定义类加载器加载的对象中的方法我' m 得到类型不匹配异常。

我认为我可以避免这个问题，因为幸运的是我的自定义对象实现了 Serializable（我想从测试类中对对象进行序列化，然后在我的自定义类加载器中对其进行反序列化并将其传递给方法）。但是，由于父类加载器加载了序列化 utils 类，因此生成的对象（反序列化输出）仍然指向默认类加载器。

如何反序列化自定义类加载器中的对象？编码：

```
Class<?> serialClassDefinition = classLoader.loadClass("org.apache.commons.lang.SerializationUtils");
        final byte[] serializedDestData = SerializationUtils.serialize(sampleData);
        final Method deSerializeMethod = serialClassDefinition.getDeclaredMethod("deserialize", byte[].class);
        final Object oldSmapleData = deSerializeMethod.invoke(null, serializedSampleData);
        return (invoke(stringA, stringB, stringC, oldSampleData, isAAA)); 
```

# java - 为什么日期在不同时区以相同的毫秒数变化？

> ID：14852754
> 
> 赞同：8
> 
> 时间：2013-02-13T11:42:10.513
> 
> 标签：java, javascript, date, timezone, primefaces-extensions

我们知道 java.util.Date 的 getTime 方法返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

我注意到一个奇怪的情况如下；

系统**时区**为：**(UTC+02:00)**伊斯坦布尔

```
Date currentDate = new Date();
System.out.println(currentDate .getTime());
System.out.println(currentDate); 
```

**Java 控制台输出：**

1360753217219

2013 年 2 月 13 日星期三 13:00:17 VET

* * *

然后我的javascript插件正在使用这个长对象，如下所示；

**Javascript：**

```
console.log(new Date(1360753217219)); 
```

**浏览器控制台输出：**

日期 {2013 年 2 月 13 日星期三 13:00:17 GMT+0200（土耳其标准时间）}

* * *

不过没关系！将我的本地**时区**更改为**(UTC-04:30)**加拉加斯后，情况和小时以相同的毫秒数变化如下；

* * *

**Javascript：**

```
console.log(new Date(1360753217219)); 
```

**浏览器控制台输出：**

日期 {2013 年 2 月 13 日星期三 06:30:17 GMT-0430（委内瑞拉标准时间）}

有人可以解释一下吗？那是js的错误吗？或者更重要的是，我应该如何在 java 端处理这个问题，以在 js 端的不同时区获得相同的日期和相同的毫秒数？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T11:53:46.287

毫秒与时区无关。自格林威治标准时间 1970 年 1 月 1 日起，时间以绝对值计量。所以，这个想法是你得到毫秒，然后在事后计算出给定时区的本地时间。如果你仔细想想，这是有道理的。无论您身在何处，自 1970 年以来经过的毫秒数都是相同的。

它有点令人困惑，但不要以毫秒为单位来调整时区。每个 Date 库都有将毫秒标记转换为特定时区的本地时间的机制。

因此，如果您的具体问题是如何在服务器和客户端之间有效地传达日期（您使用的语言并不重要），那么答案是来回传递毫秒并在任一方计算出全局是完全安全的您正在谈论的特定时间，如果这对您在该时间所做的事情的背景很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:50:36.853

不是错误，这就是时区的工作方式。

如果您现在打电话给委内瑞拉的某人并问他现在几点，他会告诉您现在比土耳其的时间早 6.5 小时（根据您的示例）。

正如您所提到的，您正在处理的数字表示自 1970 年 00:00:00 **GMT**以来的毫秒数，在同一秒的加拉加斯，时间是 31.12.1969 19:30 **GMT-0430**

因此，无论多少秒后，委内瑞拉的时间仍将比格林威治标准时间早 4:30 小时。

如果您使用相同的输入（毫秒），您将无法在不同的时区获得完全相同的日期，因为这完全是错误的。

如果您想获得相同的结果，您可以将时区差异（在本例中为 6.5 小时）添加到输出中。按照 Dr.Dredel 的建议，您可能不应该混淆毫秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-18T02:57:33.957

# shopping-cart - Appixia 应用程序块视图中的长标题正在被剪切（带有...）

> ID：14852760
> 
> 赞同：0
> 
> 时间：2013-02-13T11:42:54.423
> 
> 标签：shopping-cart, appixia

我有一个 Appixia 应用程序，我正在创建一个产品轮播。轮播中的每个产品（项目）都使用`GenericStaticBlocksCellView`\`DynamicBlocksView`模块实现

我通过创建类型块`Text`并指定 Field =添加了产品标题`Title`

我还给出了块的宽度和高度，高度足以容纳几行，但如果我的标题太长，它们会在最后被切断（并出现 ...）。

如何修复我的长标题以显示所有文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:47:33.100

默认情况下，文本块仅显示单行文本。因此，如果您的标题不适合一行，它们将被缩短，无论您的块有多高。

`MultiLine`您可以使用块的属性覆盖此行为。将其设置为`true`，然后您的文本将跨越几行。

确保块足够高（​​使用`Height`属性）以容纳您需要的所有行

# java - 什么是类的参数化调用

> ID：14852765
> 
> 赞同：1
> 
> 时间：2013-02-13T11:43:23.320
> 
> 标签：java, annotations, jls

JLS 在第 9.6.1 节 ( [http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.1) ) 中说如下。

“如果在注释类型中声明的方法的返回类型不是以下之一，则这是编译时错误：原始类型、字符串、类、对 Class 的任何参数化调用、枚举类型（第 8.9 节）、注释类型，或元素类型是上述类型之一的数组类型（第 10 节）。”

什么是“类的任何参数化调用”？有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:49:54.310

从 Java 5 开始，`java.lang.Class`type 是*generic*，这意味着它可以有一个类型参数。通过文档*的参数化调用`Class`*意味着“`Class<...>`使用任何类型的参数”。您可以在同一文档中找到它的示例，例如“示例 9.6.1-2”：

```
interface Formatter {}

// Designates a formatter to pretty-print the annotated class
@interface PrettyPrinter {
    Class<? extends Formatter> value();
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^------------ Here
} 
```

# android - 从对话框中向主要活动抛出异常

> ID：14852771
> 
> 赞同：0
> 
> 时间：2013-02-13T11:43:42.963
> 
> 标签：android, exception, handle, throw

我正在编写一个 android 应用程序，必须在主要活动中捕获所有抛出的异常并向我发送电子邮件。但是在我的应用程序的某些区域，我不能只通过方法抛出异常：

示例：自定义 DialogFragment 中的 onCreateDialog() ：

```
 builder.setView(addCatLayout)
                    // Add action buttons
                    .setPositiveButton(R.string.button_ok,
                            new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog, int id) {

                                    try {
                                    // Save some data in DB here
                                    } catch (Exception e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    }
                                    dialog.dismiss();
                                }
                            })
                    .setNegativeButton(R.string.button_cancel,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int id) {
                                    // Close the dialog window
                                    dialog.dismiss();
                                }
                            });
            return builder.create(); 
```

我的问题是如何从该方法中删除 try catch 块并直接抛出要在我的主要活动中捕获的异常？我想在主要活动中只有一个 try catch 块来捕获所有异常并向我发送邮件。这可能吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:50:02.473

如果您在活动中创建对话框并希望在那里处理异常

活动：

```
protected void handleException(Exception e) {
    e.printStackTrace();
} 
```

点击：

```
@Override
public void onClick(DialogInterface dialog, int id) {
    try {
        // Save some data in DB here
    } catch (Exception e) {
        // TODO Auto-generated catch block
        handleException(e); // methods are visible to nested classes
    }
    dialog.dismiss();
 } 
```

如果您在活动之外创建对话框，那么您应该

```
public void handleException(Exception e) {
    e.printStackTrace();
} 
```

对话框创建类

```
public static void createDialog(final YourActivity activity) {

....

    @Override
    public void onClick(DialogInterface dialog, int id) {
        try {
            // Save some data in DB here
        } catch (Exception e) {
            activity.handleException(e);
        }
        dialog.dismiss();
     }

} 
```

但是这样最好让你的 Activity 实现一些接口，比如

```
public final class YourActivity implements ExceptionHandler { 
```

异常处理程序在哪里

```
public interface ExceptionHandler {
    void handleException(Exception e);
} 
```

并通过异常处理接口

```
public void createDialog(final ExceptionHandler handler) { 
```

# javascript - 如何在 html 中为任何移动设备设置图像

> ID：14852782
> 
> 赞同：0
> 
> 时间：2013-02-13T11:44:11.447
> 
> 标签：javascript, css, ajax, html

现在的问题是：不同的智能手机有不同的显示分辨率。

有例如 840x560、480x320 或 800x480。

我必须写什么作为元标记、css 等以使“每部”现代智能手机中的图像适合显示器？

我希望我的担忧得到了清楚的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:52:46.143

> img {最大宽度：100%;}

会成功的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:57:44.637

要定位特定的屏幕尺寸，您应该使用@media 查询。Plus`background-size: cover;`将使您的图像适合 .block 容器。

请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

```
@media screen and (max-width: 840px) {
    .block {
        display: block;
        width: 100%;
        height: 100%;
        background: url(/path/to/image) no-repeat center center transparent;
        background-size: cover;
    }
} 
```

# maven - 在 Spring Junit 测试用例中获取 jdbcTemplate null

> ID：14852784
> 
> 赞同：2
> 
> 时间：2013-02-13T11:44:15.750
> 
> 标签：maven, spring-mvc, junit4

我正在为 spring 3 restful 服务编写 junit 测试用例。当我尝试将它作为 junit 执行时，我将 JdbcTemplate 设为 null。我不确定我在哪里做错了。请帮我摆脱这个...

LoginServiceImpl.java 文件，

```
private NamedParameterJdbcTemplate jdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
    System.out.println("--------------"+jdbcTemplate.toString());
}

private static Map<String, AuthToken> tokenHash = new ConcurrentHashMap<String, AuthToken>();

private static String authTokenDetailsSql = "select * from authtoken where token = :token";

@Override
@RequestMapping(value = "/register", method = RequestMethod.POST)
@ResponseBody
public ServiceBean newAccount(@RequestBody Registration registration) {
    String newAccountSql = "INSERT INTO account (email,password,name) VALUES (:email,:password,:name)";
    ServiceDataBean<AuthToken> retBean = new ServiceDataBean<AuthToken>();
    try {
        System.out.println("register service calling.....");
        MapSqlParameterSource namedParameters = new MapSqlParameterSource();
        namedParameters.addValue("email", registration.getEmail());
        messageDigest = MessageDigest.getInstance("MD5");
        byte[] md5 = new byte[64];
        messageDigest.update(registration.getPassword().getBytes("iso-8859-1"), 0, registration.getPassword().length());
        md5 = messageDigest.digest();
        namedParameters.addValue("password", convertedToHex(md5));
        namedParameters.addValue("name", registration.getName());
        GeneratedKeyHolder generatedKeyHolder = new GeneratedKeyHolder();

        // TODO what to do with the updInt also check it's not -1
        int updInt = jdbcTemplate.update(newAccountSql, namedParameters, generatedKeyHolder);
        long accountId = (Long) generatedKeyHolder.getKeys().get("GENERATED_KEY");
        registration.getDevice().setOwner(registration.getId());
        fotoframz.register(registration.getDevice());
        Login login = new Login();
        login.setEmail(registration.getEmail());
        login.setPassword(registration.getPassword());
        login.setDevice(registration.getDevice());
        retBean = (ServiceDataBean<AuthToken>) this.login(login);
        System.out.println("form register");
    } catch (Throwable e) {
        retBean.setStatusCode("001");
        e.printStackTrace();
    }
    return retBean;
} 
```

我得到 jdbctemplate=null 在`int updInt = jdbcTemplate.update(newAccountSql, namedParameters, generatedKeyHolder);`

我的 applicationContext-test.xml 文件位于 src/test/resources 文件夹中..applicationContext-test.xml 文件

```
<context:component-scan base-package="net.mss.ff.services" />       
<context:property-placeholder location="classpath:/app.properties" />

<!-- <task:annotation-driven /> -->
<context:annotation-config />
<!-- <import resource="apicontroller_v1-servlet.xml"/>
<import resource="applicationContext.xml"/> -->

<bean id="photoService" class="net.mss.ff.services.core.api.impl.PhotoServiceImpl">
    <property name="rootStorageFolder" value="${storage.root}" />
</bean>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close" p:driverClassName="${jdbc.driverClassName}"
    p:url="${jdbc.url}" p:username="${jdbc.username}" p:password="${jdbc.password}" /> 
```

## LoginServiceImplTest

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/applicationContext-test.xml"})
public class LoginServiceImplTest {

LoginServiceImpl loginServiceObj = new LoginServiceImpl();
Device deviceMock;

@Autowired
private Fotoframz fotoframz;

/*private NamedParameterJdbcTemplate jdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}*/

@Before
public void setUp() throws Exception {
    //loginServiceObj = new LoginServiceImpl();
}

@After
public void tearDown() throws Exception{

}

/**
 * Test method for {@link net.mss.ff.services.core.api.impl.LoginServiceImpl#newAccount(net.mss.ff.services.core.beans.Registration)}.
 */
@Test
public void testNewAccount() {
    Registration mockRegObj = new Registration();
    deviceMock = new Device();
    deviceMock.setActive(false);
    deviceMock.setHeight(45);
    //deviceMock.setId(4568);
    deviceMock.setName("Android");
    deviceMock.setOwner(1111);
    deviceMock.setPlatform("Windows NT");
    deviceMock.setUuid("522601");
    deviceMock.setVersion("1.0");
    deviceMock.setWidth(76);
    mockRegObj.setEmail("bbb@gmail.com");
    /*mockRegObj.setId(399);*/
    mockRegObj.setName("bbb");
    mockRegObj.setPassword("BBB");
    mockRegObj.setDevice(deviceMock);
    loginServiceObj.newAccount(mockRegObj);

    //assertEquals("New Account Creation", "", "");
} 
```

任何需要在测试类中修改的东西，请告诉我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:51:37.367

在您的测试中`LoginServiceImpl loginServiceObj = new LoginServiceImpl();` ，弹簧没有实例化，因此不会应用任何注释。您需要自动装配它，或以其他方式注入它。Spring 3.2 让这种东西超级简单易用。

我的其余答案仍然很好：您尚未在 java 代码中声明或实例化 jdbctemplate。而且您还没有在 xml 文件中定义它。

你需要这个

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource">
            <ref bean="dateSource"/>
        </property>
    </bean> 
```

然后 this 作为实例变量（假设您使用注释）

```
 @Resource(name = "jdbcTemplate")
    private JdbcTemplate jdbcTemplate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:58:32.763

正如@NimChimpsky 提到的，你需要`jdbcTemplate`在你的bean xml 文件中定义你的，然后在你的实例变量中你也可以这样做。

```
@Autowired
private JdbcTemplate jdbcTemplate; 
```

# validation - Sencha Touch 2 如何限制显示未来日期的日期选择器

> ID：14852785
> 
> 赞同：2
> 
> 时间：2013-02-13T11:44:15.330
> 
> 标签：validation, extjs, datepicker, sencha-touch-2

任何人都可以帮助我限制 Sencha Touch 日期选择器不在所需的日期选择器字段中显示/允许未来的日期。

请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T17:40:27.640

它可以实现如下，

```
{
    xtype : 'datepickerfield',
    label : 'date',
    picker : {
        yearFrom : 2000
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T10:35:45.180

我通常对这样的更改使用覆盖。否则，您需要为应用程序中的所有日期选择器更改它。

```
Ext.define('App.override.picker.Date', {
    override: 'Ext.picker.Date',

    config: {
        yearFrom: 1970,
        yearTo: 2070, // you can use a fixed number or: new Date().getFullYear() + 10, 
        monthText: 'Month',
        dayText: 'Day',
        yearText: 'Year',
        slotOrder: ['month', 'day', 'year'],
        doneButton: true
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T12:31:25.573

您可以使用以下配置来限制年份输入。

```
Ext.create('Ext.picker.Date', {
    yearFrom: 2000,
    yearTo  : 2015,
    //or you can use
    minValue: new Date(1980,1,20),
    maxValue: new Date()
}); 
```

还要检查[`setYearTo()`](http://docs.sencha.com/touch/2-1/#!/api/Ext.picker.Date-method-setYearTo)和[`updateYearTo()`](http://docs.sencha.com/touch/2-1/#!/api/Ext.picker.Date-method-updateYearTo)方法。

该组件不允许限制实际的月份和日期输入，但您可以在之后对其进行验证。

# javascript - 如何使用 Javascript 或 HTML 将裁剪后的图像作为新图像获取？

> ID：14852790
> 
> 赞同：0
> 
> 时间：2013-02-13T11:44:28.577
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

在我的 Phonegap 应用程序中，当用户从图库中选择图像时，应允许用户裁剪图像，然后单击提交按钮后，该裁剪图像应转换为 .png 或 .jpeg 格式，以便我可以将此图像发送到服务器。如何使用 JavaScript 或 jquery 或 HTML5 做到这一点。我搜索了解决方案，但没有任何效果。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:55:41.857

您可以使用 HTML5 画布裁剪图像。

有关更多信息，请参阅[本教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop/)：

> 要使用 HTML5 Canvas 裁剪图像，我们可以向该方法添加六个附加参数 `drawImage()`；`sourceX`, `sourceY`, `sourceWidth`,和 . `sourceHeight`_ 这些参数定义了我们要从图像中剪切出的矩形的位置和大小。`destWidth``destHeight`

```
<script>
  context.drawImage(imageObj, sx, sy, sw, sh, dx, dy, dw, dh);
</script> 
```

**更新**：

为了以您可以发送到服务器的格式获取裁剪图像，您可以使用[canvas.toDataURL](http://msdn.microsoft.com/en-us/library/ie/ff975241.aspx)方法。（请注意，IE9 仅在您的文档实际以 IE9[文档模式](http://msdn.microsoft.com/en-us/library/cc288325.aspx)运行时才支持此功能）。

# firefox - 在 Firefox 中的任何地方暂停/播放 Youtube 视频

> ID：14852793
> 
> 赞同：0
> 
> 时间：2013-02-13T11:44:39.507
> 
> 标签：firefox, greasemonkey

我经常在 Youtube 上听音乐，但是很难快速找到 YT 标签，然后点击暂停按钮。我想知道是否有一个插件可以将暂停/播放按钮添加到我的窗口镶边，它可以找到包含 Youtube 视频的选项卡并暂停或播放它。

谢谢！

# sql - T-SQL 和案例语句

> ID：14852796
> 
> 赞同：0
> 
> 时间：2013-02-13T11:44:46.740
> 
> 标签：sql, sql-server, tsql, case

我很难找出为什么我的 t-sql 字符串会出现错误消息，如您所见，我创建了这个 sql 以从其他表中提取信息以创建容量表，但是有些不对劲，我不能弄清楚它是什么。你能帮我吗。提前致谢。

错误信息：

```
Msg 206, Level 16, State 2, Line 32
Operand type clash: int is incompatible with date 
```

SQL脚本：

```
DECLARE @PitchType_Skey INT
DECLARE @Site_Skey INT
DECLARE @Capacity INT
DECLARE @StartDate DATE
DECLARE @EndDate DATE

SET @PitchType_Skey = 1
SET @Site_Skey = 1
SET @Capacity = 0

WHILE (@Site_Skey < 127)

BEGIN
  IF @PitchType_Skey = 8

  BEGIN

    SET @PitchType_Skey = 1
    SET @Site_Skey = @Site_Skey + 1

  END

  IF (@Site_Skey < 127)

  BEGIN

    Set @Capacity = (SELECT SiteWeighting From Site Where Site_Skey = @Site_Skey)
    Set @Capacity = @Capacity * (SELECT PitchTypeWeighting From PitchType  Where PitchType_Skey = @PitchType_Skey)
    Set @Capacity = @Capacity * ((10*(100+((RAND()*40)-20)))*0.01)

    INSERT INTO Capacity2
    SELECT
      CASE
        WHEN YEAR(@StartDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2010'
        WHEN YEAR(@StartDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2011'
        WHEN YEAR(@StartDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2012'
        WHEN YEAR(@StartDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2013'
        WHEN YEAR(@StartDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2014'
        WHEN YEAR(@StartDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '01 May 2015'

        WHEN YEAR(@StartDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '1 Apr 2010'
        WHEN YEAR(@StartDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '25 Mar 2011'
        WHEN YEAR(@StartDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '10 Mar 2012'
        WHEN YEAR(@StartDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '01 Apr 2013'
        WHEN YEAR(@StartDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '01 Mar 2014'
        WHEN YEAR(@StartDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '15 Mar 2015'

        WHEN YEAR(@StartDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '1 Apr 2010'
        WHEN YEAR(@StartDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '25 Mar 2011'
        WHEN YEAR(@StartDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '10 Mar 2012'
        WHEN YEAR(@StartDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '01 Apr 2013'
        WHEN YEAR(@StartDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '01 Mar 2014'
        WHEN YEAR(@StartDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '15 Mar 2015'

        WHEN YEAR(@StartDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2010'
        WHEN YEAR(@StartDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2011'
        WHEN YEAR(@StartDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2012'
        WHEN YEAR(@StartDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2013'
        WHEN YEAR(@StartDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2014'
        WHEN YEAR(@StartDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '01 Jan 2015'

        ELSE NULL
      END as StartDate,

      CASE
        WHEN YEAR(@EndDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2010'
        WHEN YEAR(@EndDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2011'
        WHEN YEAR(@EndDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2012'
        WHEN YEAR(@EndDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2013'
        WHEN YEAR(@EndDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2014'
        WHEN YEAR(@EndDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 1 THEN '30 Sep 2015'

        WHEN YEAR(@EndDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '01 Nov 2010'
        WHEN YEAR(@EndDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '05 Nov 2011'
        WHEN YEAR(@EndDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '02 Nov 2012'
        WHEN YEAR(@EndDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '08 Nov 2013'
        WHEN YEAR(@EndDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '01 Nov 2014'
        WHEN YEAR(@EndDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 2 THEN '03 Nov 2015'

        WHEN YEAR(@EndDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '01 Nov 2010'
        WHEN YEAR(@EndDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '05 Nov 2011'
        WHEN YEAR(@EndDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '02 Nov 2012'
        WHEN YEAR(@EndDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '08 Nov 2013'
        WHEN YEAR(@EndDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '01 Nov 2014'
        WHEN YEAR(@EndDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 3 THEN '03 Nov 2015'

        WHEN YEAR(@EndDate) = 2010 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2010'
        WHEN YEAR(@EndDate) = 2011 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2011'
        WHEN YEAR(@EndDate) = 2012 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2012'
        WHEN YEAR(@EndDate) = 2013 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2013'
        WHEN YEAR(@EndDate) = 2014 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2014'
        WHEN YEAR(@EndDate) = 2015 AND (SELECT SiteWeighting FROM Site WHERE Site_Skey=@Site_Skey) = 4 THEN '31 Dec 2015'

        ELSE NULL
      END,

      ROUND(@Capacity,0) as Capacity,
      @PitchType_Skey, @Site_Skey

  END
  SET @PitchType_Skey = @PitchType_Skey + 1

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:50:41.580

您正在插入`Capacity2`表中，但没有指定将哪些值放入哪些列中。我猜这是问题的原因，它试图将您的其他整数值之一放入您的开始日期列。

您还没有发布您的架构，所以我只能猜测您的列名，但我建议您将脚本的插入部分更改为：

```
INSERT INTO Capacity2 (StartDate, EndDate, Capacity, PitchTypeKey, Site_SKey)
SELECT 
   CASE 
     WHEN ... 
```

这样一来，您想将哪个值插入到哪一列中就没有歧义了。

# google-apps-script - Google 应用程序脚本 html 模板 SyntaxError

> ID：14852797
> 
> 赞同：0
> 
> 时间：2013-02-13T11:44:55.643
> 
> 标签：google-apps-script, template-engine

这是我的谷歌应用脚​​本 html 模板的一部分：

```
<? if (filter == "ticket"){ var feedback =  sortFeedbackByDate(getRecentTicketFeedback()); }
   else if (filter == "all"){ var feedback =  sortFeedbackByDate(getAllRecentFeedback()); }
   else { var feedback = getRecentBomgarFeedback(); }
   var percHappy = getNumHappy(feedback) / feedback.length;
   var percOK = getNumOK(feedback) / feedback.length;
   var percSad = getNumSad(feedback) / feedback.length; ?> 
```

在此模板上调用 getCode() 时，此部分如下：

```
if (filter == "ticket"){ ; 
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=ticket" ; output._ =  '\">Ticket Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1" ; output._ =  '\">Bomgar Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=all" ; output._ =  '\">All Feedback</option>\n';
  output._ =  '                ';  } else if (filter == "all" { ; 
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=ticket" ; output._ =  '\">Ticket Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=all" ; output._ =  '\">All Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1" ; output._ =  '\">Bomgar Feedback</option>\n';
  output._ =  '                ';  } else { ; 
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1" ; output._ =  '\">Bomgar Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=ticket" ; output._ =  '\">Ticket Feedback</option>\n';
  output._ =  '                  <option value=\"'; output._ =  ScriptApp.getService().getUrl()+"?page=1&filter=all" ; output._ =  '\">All Feedback</option>\n';
  output._ =  '                ';  } ; 
```

如您所见，在模板中存在以下行：

```
else if (filter == "all"){ 
```

这被视为调用 getCode()

```
else if (filter == "all" { 
```

这显然会导致语法错误。我在这里犯了某种错误，还是这是 js 代码生成中的错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:14:43.547

我会说它看起来像一个错误，除了我尝试了您的代码段但没有看到错误，并且您显示的 getCode() 结果与您显示的模板代码段完全不对应。你能显示导致错误的实际代码吗？

如果您在将 getCode() 与原始模板代码匹配时遇到问题，请尝试使用 getCodeWithComments()。

# vb.net - 如何从输入框中获取 4 个输入

> ID：14852799
> 
> 赞同：0
> 
> 时间：2013-02-13T11:45:00.910
> 
> 标签：vb.net

我创建了一个表单，我希望它可以控制课程注册过程。

所以我的代码如下

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim i As Integer
    Dim InpName As String

For i = 1 To 4
    InpName = InputBox("What course do you want to register")
    If InpName = "computer literacy" Then
        TextBox1.Text = InpName
    ElseIf InpName = "engineering" Then
        TextBox1.Text = InpName
    Else
        MsgBox("We only offer computer literacy and engineering")
    End If
Next i 
```

我希望循环接受计算机知识或工程 4 次，并告诉用户计算机知识课程或工程课程已满。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:27:47.473

希望这可以帮助

```
 Dim i As Integer
        Dim InpName As String
        Dim engineering As Integer = 0
        Dim compLit As Integer = 0
        For i = 1 To 4
                InpName = InputBox("What course do you want to register")
                If InpName = "computer literacy" Then
                    compLit = compLit + 1
                    TextBox1.Text = InpName
                ElseIf InpName = "engineering" Then
                    engineering = engineering + 1
                    TextBox1.Text = InpName
                Else
                    MsgBox("We only offer computer literacy and engineering")
                End If

            If compLit = 4 Then
                MsgBox("Computer Literacy is full!")
            ElseIf engineering = 4 Then
                MsgBox("Engineering is full!")
            End If
        Next 
```

我想添加对这里发生的事情的解释。两个变量engineering 和compLit 被创建并在按钮点击时被赋予0 值。循环发生，每次正确输入其中一个值时，这些变量都会增加 1。在每个循环结束时，检查这些值是否为 4，并显示相关消息。如果其中一个不是 4，则没有消息，因为类未满。

# java - Java 的 tinybutstrong 替代品

> ID：14852800
> 
> 赞同：0
> 
> 时间：2013-02-13T11:45:01.527
> 
> 标签：java, report, template-engine, tinybutstrong, xdocreport

是否有 Java 模板引擎可以从 docx/odt 模板构建 docx/odt 报告？我已经尝试过*xdocreport*，但只有基于行和单元格的块，但我需要全表块。Java 是否有类似 PHP 的*tinybutstrong*的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:52:12.170

看看以下内容：

1.  [POI（Microsoft 文档的 Java API）](http://poi.apache.org/)
2.  [乔德转换器](http://www.artofsolving.com/opensource/jodconverter%5C)
3.  [OpenOffice.org_Developers_Guide](http://wiki.openoffice.org/wiki/Documentation/DevGuide/OpenOffice.org_Developers_Guide)

它并不便宜，但你可以试试[Aspose.Words](http://www.aspose.com/java/word-component.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:24:46.423

整个表块是什么意思？如果您希望使用 XDocReport 循环表列，则可以使用 @before-cell 和 @after-cell 使用[高级表](http://code.google.com/p/xdocreport/wiki/DocxReportingJavaMainListFieldAdvancedTable)。请参阅[DocxTableWithoutFieldsMetadataWithVelocity](http://code.google.com/p/xdocreport/source/browse/samples/fr.opensagres.xdocreport.samples.docxandvelocity/src/fr/opensagres/xdocreport/samples/docxandvelocity/?repo=samples)示例（java 和 docx）。

docx 包含：

* * *

«@before-row#foreach($d in $developers)»«$d.Name»

«@after-row#end»

«@before-cell#foreach($r in $d.Roles)»«$r.Name»«@after-cell#end»

* * *

which 为每个开发人员循环（生成行），对于每一行，它为每个单元格（动态列）循环以生成每个开发人员角色的行。

这种语法有点复杂，但您可以管理动态列。

# css - 清除 HTML 中字体路径的像素

> ID：14852801
> 
> 赞同：3
> 
> 时间：2013-02-13T11:45:05.497
> 
> 标签：css, image, fonts, html5-canvas

我想知道如何创建彩色画布，但带有字体的透明部分。我希望字体在这个画布上创建一个洞。这可能吗？如何？我的目标是创造一种图像嵌入字体的印象......

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:53:22.803

`<canvas>`为截断和此类效果提供了一种称为复合操作的东西。我相信您想要的操作称为*destination out*：

[https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)

以下是规范中的更多技术细节：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing)

我无法为您提供实际的工作代码（您的用例很少见），但您应该能够找到*globalComposite*教程，并且几乎不使用他们的代码，您就可以了解如何为您的案例应用该操作。

# javascript - 使用 angularjs 检测未保存的更改并提醒用户

> ID：14852802
> 
> 赞同：36
> 
> 时间：2013-02-13T11:45:08.387
> 
> 标签：javascript, angularjs, angularjs-directive

以下是到目前为止的代码

```
 <!doctype html>
<html ng-app>
<head>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    function Ctrl($scope) {
        var initial = {text: 'initial value'};
        $scope.myModel = angular.copy(initial);
        $scope.revert = function() {
            $scope.myModel = angular.copy(initial);
            $scope.myForm.$setPristine();
        }
    }
    </script>
</head>
<body>
    <form name="myForm" ng-controller="Ctrl">
        myModel.text: <input name="input" ng-model="myModel.text">
        <p>myModel.text = {{myModel.text}}</p>
        <p>$pristine = {{myForm.$pristine}}</p>
        <p>$dirty = {{myForm.$dirty}}</p>
        <button ng-click="revert()">Set pristine</button>
    </form>
</body>
</html> 
```

如何提醒`browser close`或`url redirect`万一有一些未保存的数据，以便用户可以决定是否继续？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-13T12:25:47.807

这样的事情应该这样做：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    function Ctrl($scope) {
        var initial = {text: 'initial value'};
        $scope.myModel = angular.copy(initial);
        $scope.revert = function() {
            $scope.myModel = angular.copy(initial);
            $scope.myForm.$setPristine();
        }
    }

    angular.module("myApp", []).directive('confirmOnExit', function() {
        return {
            link: function($scope, elem, attrs) {
                window.onbeforeunload = function(){
                    if ($scope.myForm.$dirty) {
                        return "The form is dirty, do you want to stay on the page?";
                    }
                }
                $scope.$on('$locationChangeStart', function(event, next, current) {
                    if ($scope.myForm.$dirty) {
                        if(!confirm("The form is dirty, do you want to stay on the page?")) {
                            event.preventDefault();
                        }
                    }
                });
            }
        };
    });
    </script>
</head>
<body>
    <form name="myForm" ng-controller="Ctrl" confirm-on-exit>
        myModel.text: <input name="input" ng-model="myModel.text">
        <p>myModel.text = {{myModel.text}}</p>
        <p>$pristine = {{myForm.$pristine}}</p>
        <p>$dirty = {{myForm.$dirty}}</p>
        <button ng-click="revert()">Set pristine</button>
    </form>
</body>
</html> 
```

注意，$locationChangeStart 的监听器在这个例子中没有被触发，因为在这个简单的例子中 AngularJS 不处理任何路由，但它应该在实际的 Angular 应用程序中工作。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-03-06T19:11:41.797

我扩展了@Anders 的答案，以在指令被销毁时（例如：当路由更改时）清理侦听器（解除绑定列表），并添加了一些语法糖来概括使用。

**confirmOnExit 指令**：

```
/**
 * @name confirmOnExit
 * 
 * @description
 * Prompts user while he navigating away from the current route (or, as long as this directive 
 * is not destroyed) if any unsaved form changes present.
 * 
 * @element Attribute
 * @scope
 * @param confirmOnExit Scope function which will be called on window refresh/close or AngularS $route change to
 *                          decide whether to display the prompt or not.
 * @param confirmMessageWindow Custom message to display before browser refresh or closed.
 * @param confirmMessageRoute Custom message to display before navigating to other route.
 * @param confirmMessage Custom message to display when above specific message is not set.
 * 
 * @example
 * Usage:
 * Example Controller: (using controllerAs syntax in this example)
 * 
 *      angular.module('AppModule', []).controller('pageCtrl', [function () {
 *          this.isDirty = function () {
 *              // do your logic and return 'true' to display the prompt, or 'false' otherwise.
 *              return true;
 *          };
 *      }]);
 * 
 * Template:
 * 
 *      <div confirm-on-exit="pageCtrl.isDirty()" 
 *          confirm-message-window="All your changes will be lost."
 *          confirm-message-route="All your changes will be lost. Are you sure you want to do this?">
 * 
 * @see
 * http://stackoverflow.com/a/28905954/340290
 * 
 * @author Manikanta G
 */
ngxDirectivesModule.directive('confirmOnExit', function() {
    return {
        scope: {
            confirmOnExit: '&',
            confirmMessageWindow: '@',
            confirmMessageRoute: '@',
            confirmMessage: '@'
        },
        link: function($scope, elem, attrs) {
            window.onbeforeunload = function(){
                if ($scope.confirmOnExit()) {
                    return $scope.confirmMessageWindow || $scope.confirmMessage;
                }
            }
            var $locationChangeStartUnbind = $scope.$on('$locationChangeStart', function(event, next, current) {
                if ($scope.confirmOnExit()) {
                    if(! confirm($scope.confirmMessageRoute || $scope.confirmMessage)) {
                        event.preventDefault();
                    }
                }
            });

            $scope.$on('$destroy', function() {
                window.onbeforeunload = null;
                $locationChangeStartUnbind();
            });
        }
    };
}); 
```

用法： **示例控制器**：（*在此示例中使用 controllerAs 语法）*

```
angular.module('AppModule', []).controller('pageCtrl', [function () {
    this.isDirty = function () {
        // do your logic and return 'true' to display the prompt, or 'false' otherwise.

        return true;
    };
}]); 
```

**模板**：

```
<div confirm-on-exit="pageCtrl.isDirty()" 
    confirm-message-window="All your changes will be lost." 
    confirm-message-route="All your changes will be lost. Are you sure you want to do this?"> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-09T01:10:44.893

安德斯的回答很好，但是，对于使用 Angular ui-router 的人，您应该使用`'$stateChangeStart'`而不是`'$locationChangeStart'`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-20T21:37:35.177

我修改了@Anders 答案，使指令不包含硬编码的表单名称：

```
 app.directive('confirmOnExit', function() {
        return {
            link: function($scope, elem, attrs, ctrl) {
                window.onbeforeunload = function(){
                    if ($scope[attrs["name"]].$dirty) {
                        return "Your edits will be lost.";
                    }
                }
            }
        };
    }); 
```

这是它的html代码：

```
<form name="myForm" confirm-on-exit> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-02T13:14:37.873

也许它会对某人有所帮助。 [https://github.com/umbrella-web/Angular-unsavedChanges](https://github.com/umbrella-web/Angular-unsavedChanges)

使用此服务，您可以侦听范围内任何对象的未保存更改（不仅是表单）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-16T07:23:18.713

要将[Anders Ekdahl](https://stackoverflow.com/a/14853536/940098)`$scope`的优秀答案与 Angular 1.5 组件一起使用，请在组件的控制器中注入：

```
angular
  .module('myModule')
  .component('myComponent', {
    controller: ['$routeParams', '$scope',
      function MyController($routeParams, $scope) {
        var self = this;

        $scope.$on('$locationChangeStart', function (event, next, current) {
          if (self.productEdit.$dirty && !confirm('There are unsaved changes. Would you like to close the form?')) {
            event.preventDefault();
          }
        });
      }
    ]
  }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-02T20:50:38.887

接受的答案很好，但是我在正确地处理我的表单控制器时遇到了问题，因为有些表单我使用带有属性的`form`标签，而在其他时候我使用指令。此外，如果您使用的是使用or类型模式的 typescript 样式函数，例如`name``ng-form``this``vm``<form name='$ctrl.myForm'...`

**我很惊讶没有人提到这一点，但我的解决方法是利用指令的 require 属性，让 angular 给我一个对表单控制器本身的引用。**

我已经更新了下面接受的答案以显示我的更改，请注意链接函数的 require 属性和附加参数。

```
angular.module("myApp", []).directive('confirmOnExit', function() {
        return {
            restrict: 'A',
            require: 'form',
            link: function($scope, elem, attrs, form) {
                window.onbeforeunload = function(){
                    if (form.$dirty) {
                        return "The form is dirty, do you want to stay on the page?";
                    }
                }
                $scope.$on('$locationChangeStart', function(event, next, current) {
                    if (form.$dirty) {
                        if(!confirm("The form is dirty, do you want to stay on the page?")) {
                            event.preventDefault();
                        }
                    }
                });
            }
        };
    }); 
```

有了这个，我可以保证我对表单控制器有一个很好的处理，因为如果 Angular 在元素上找不到表单控制器，它会抛出一个错误。

您还可以添加修饰符，例如**^**和**?** 例如`require='^form'`拉一个祖先表单或者`require='?form'`表单是可选的（这不会破坏指令，但您需要检查您自己是否有一个有效表单控制器的句柄）。

# file-upload - 如何将 base64 编码文件发送到 PlayFramework 服务器？

> ID：14852805
> 
> 赞同：2
> 
> 时间：2013-02-13T11:45:16.740
> 
> 标签：file-upload, filereader, playframework-2.1

我想使用新的 FileReader API 实现 FileUpload。在客户端，一切正常，我可以向服务器发送一个 PUT 请求，其中包含正确的字段，其中包含 Base64 编码的文件。

但是在服务器端，情况并不好，这是我的结果：

```
Logger.info(String.valueOf(request().body().asRaw())); // null
Logger.info(String.valueOf(request().body().asText())); // null 
```

最重要的是：

```
Logger.info(String.valueOf(request().body().isMaxSizeExceeded())); // true ! 
```

我错过了什么？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:46:13.217

我找到了我的问题的答案！

对于那些正在寻找它的人，这是答案：

您需要为您的方法添加一个 BodyParser 作为注释，并指定一个更高的 maxLength 值。

```
@BodyParser.Of(value = BodyParser.Json.class, maxLength = 1024 * 1024)
public static Result method() {
    Logger.info(String.valueOf(request().body().asJson())); // Will not be empty!
} 
```

# javascript - 执行脚本编辑器时出错：“显示 url 时出错：不支持指定的位置”

> ID：14852806
> 
> 赞同：2
> 
> 时间：2013-02-13T11:45:16.653
> 
> 标签：javascript

尝试从 Springsource 打开 Scripted 0.3 时出现以下错误

`Error showing url: The specified location is not supported`

我正在使用 Kubuntu 12.10 64 位并使用 npm ( `sudo npm install -g scripted`) 安装它，输出如下：

```
npm http GET https://registry.npmjs.org/scripted
npm http 304 https://registry.npmjs.org/scripted
npm http GET https://registry.npmjs.org/amdefine/0.0.2
npm http GET https://registry.npmjs.org/enhanced-resolve/0.4.5
npm http GET https://registry.npmjs.org/express/2.5.11
npm http GET https://registry.npmjs.org/formidable/1.0.9
npm http GET https://registry.npmjs.org/htmlparser/1.7.6
npm http GET https://registry.npmjs.org/json5/0.1.0
npm http GET https://registry.npmjs.org/node-static/0.5.9
npm http GET https://registry.npmjs.org/sockjs/0.3.1
npm http GET https://registry.npmjs.org/when/1.6.1
npm http GET https://github.com/kdvolder/websocket-multiplex/archive/master.tar.gz
npm http 304 https://registry.npmjs.org/enhanced-resolve/0.4.5
npm http 304 https://registry.npmjs.org/htmlparser/1.7.6
npm http 304 https://registry.npmjs.org/json5/0.1.0
npm http 304 https://registry.npmjs.org/node-static/0.5.9
npm WARN node-static@0.5.9 dependencies field should be hash of <name>:<version-range> pairs
npm http 304 https://registry.npmjs.org/sockjs/0.3.1
npm http 304 https://registry.npmjs.org/express/2.5.11
npm http 304 https://registry.npmjs.org/amdefine/0.0.2
npm http 304 https://registry.npmjs.org/formidable/1.0.9
npm http 304 https://registry.npmjs.org/when/1.6.1
npm http 200 https://github.com/kdvolder/websocket-multiplex/archive/master.tar.gz
npm http GET https://registry.npmjs.org/mime/1.2.4
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/mkdirp/0.3.0
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/faye-websocket/0.4.0
npm http GET https://registry.npmjs.org/rbytes/0.0.2
npm http GET https://registry.npmjs.org/node-uuid/1.3.3
npm http 304 https://registry.npmjs.org/mkdirp/0.3.0
npm http 304 https://registry.npmjs.org/mime/1.2.4
npm http 304 https://registry.npmjs.org/faye-websocket/0.4.0
npm http 304 https://registry.npmjs.org/rbytes/0.0.2
npm http 304 https://registry.npmjs.org/node-uuid/1.3.3
npm http 304 https://registry.npmjs.org/connect
npm http 304 https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/connect/-/connect-1.9.2.tgz

> rbytes@0.0.2 install /usr/local/lib/node_modules/scripted/node_modules/sockjs/node_modules/rbytes
> node-waf configure build

Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for node path                   : not found 
Checking for node prefix                 : ok /usr 
'configure' finished successfully (0.104s)
Waf: Entering directory `/usr/local/lib/node_modules/scripted/node_modules/sockjs/node_modules/rbytes/build'
[1/2] cxx: src/binding.cc -> build/Release/src/binding_1.o
npm http 200 https://registry.npmjs.org/connect/-/connect-1.9.2.tgz
[2/2] cxx_link: build/Release/src/binding_1.o -> build/Release/binding.node
Waf: Leaving directory `/usr/local/lib/node_modules/scripted/node_modules/sockjs/node_modules/rbytes/build'
'build' finished successfully (0.959s)
/usr/local/bin/scr -> /usr/local/lib/node_modules/scripted/bin/scr
/usr/local/bin/scripted -> /usr/local/lib/node_modules/scripted/bin/scripted
scripted@0.3.0 /usr/local/lib/node_modules/scripted 
├── amdefine@0.0.2
├── node-static@0.5.9
├── when@1.6.1
├── websocket-multiplex@0.1.0
├── enhanced-resolve@0.4.5
├── json5@0.1.0
├── formidable@1.0.9
├── htmlparser@1.7.6
├── sockjs@0.3.1 (node-uuid@1.3.3 faye-websocket@0.4.0 rbytes@0.0.2)
└── express@2.5.11 
```

我暂时找不到任何日志文件，有什么办法可以解决这个问题吗？

# python - 从python中的其他文件导入函数的问题

> ID：14852813
> 
> 赞同：0
> 
> 时间：2013-02-13T11:45:43.053
> 
> 标签：python

我有两个文件如下：

**文件1.py**

```
 import os

    import config
  class session():

    def __init__(self):
         self.appCoordinates = (0, 0, 1024, 768)

def startApp(self):
    session_launch = App("Packets and Protocols")
    if not session_launch.window():
        path1= "C:\\Program Files (x86)\\ABC\\XYZ\\RT900"
        ver=config.version
        path2="bin\\Rt900.exe"
        path3=os.path.join(path1,ver)
        path4=os.path.join(path3,path2)
        App.open(path4);
        wait(25)
    session_launch.focus(); wait(10) 
```

**文件2.py**

```
 import File1
    class ospf():

         def _init_(self):
                  Add = File1.session()
          self.appCoordinates = (0, 0, 1024, 768)

         def startOspf(self):
            Add.startApp() 
```

每当我尝试导入函数 ie，startApp 从 File1.py 到 File2.py。我收到以下错误消息。

“NameError：未定义全局名称‘Add’”

我能知道是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:49:31.023

您需要成为班级`Add`成员。`ospf`

像这样的东西：

```
import File1
class ospf():
     def _init_(self):
         self.Add = portadd.n2xSession()
         self.appCoordinates = (0, 0, 1024, 768)

     def startOspf(self):
         self.Add.startApp() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:59:51.510

而不是使用“添加”，只需使用“self.Add”。它使变量添加类/对象的成员。

```
>>> class Complex:
...     def __init__(self, realpart, imagpart):
...         self.r = realpart
...         self.i = imagpart
...
>>> x = Complex(3.0, -4.5)
>>> x.r, x.i
(3.0, -4.5) 
```

也许这个[链接](http://docs.python.org/2/tutorial/classes.html)有助于很好地理解“自我”的含义。

# python - 将旋转的 xticklabels 与它们各自的 xtick 对齐

> ID：14852821
> 
> 赞同：183
> 
> 时间：2013-02-13T11:46:10.417
> 
> 标签：python, matplotlib, axis-labels

检查下图的x轴。如何将标签向左移动一点，以便它们与各自的刻度对齐？

我正在使用以下方法旋转标签：

```
ax.set_xticks(xlabels_positions)
ax.set_xticklabels(xlabels, rotation=45) 
```

但是，如您所见，旋转以文本标签的中间为中心。这使得它们看起来像是向右移动了。

我试过用这个代替：

```
ax.set_xticklabels(xlabels, rotation=45, rotation_mode="anchor") 
```

...但它并没有达到我想要的效果。并且`"anchor"`似乎是`rotation_mode`参数允许的唯一值。

![例子](../Images/25d89abbec332326c7b42ae720fcbf48.png)

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2013-02-13T12:51:08.783

您可以设置刻度标签的水平对齐方式，请参见下面的示例。如果您想象一个围绕旋转标签的矩形框，您希望矩形的哪一侧与刻度点对齐？

根据您的描述，您想要： ha='right'

```
n=5

x = np.arange(n)
y = np.sin(np.linspace(-3,3,n))
xlabels = ['Ticklabel %i' % i for i in range(n)]

fig, axs = plt.subplots(1,3, figsize=(12,3))

ha = ['right', 'center', 'left']

for n, ax in enumerate(axs):
    ax.plot(x,y, 'o-')
    ax.set_title(ha[n])
    ax.set_xticks(x)
    ax.set_xticklabels(xlabels, rotation=40, ha=ha[n]) 
```

![在此处输入图像描述](../Images/fa4247e6a5dffafb6a912f26321626af.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2021-05-09T15:49:25.290

`ha='right'`不足以在**视觉**上将标签与刻度对齐：

*   对于`rotation=45`，**同时** `ha='right'`使用和`rotation_mode='anchor'`
*   `ScaledTranslation()`对于其他角度，请使用 a

* * *

## [`rotation_mode='anchor'`](https://matplotlib.org/stable/api/text_api.html#matplotlib.text.Text.set_rotation_mode)

如果旋转角度大约为 45°，请`ha='right'`结合`rotation_mode='anchor'`：

```
ax.set_xticks(ticks)
ax.set_xticklabels(labels, rotation=45, ha='right', rotation_mode='anchor') 
```

或者在 matplotlib 3.5.0+ 中，[一次设置刻度和标签](https://stackoverflow.com/a/70272740/13138364)：

```
ax.set_xticks(ticks, labels, rotation=45, ha='right', rotation_mode='anchor') 
```

[![锚定旋转](../Images/917b7e1328e940a9b03590cba6d4f38d.png)](https://i.stack.imgur.com/V1qAO.png)

* * *

## [`ScaledTranslation()`](https://stackoverflow.com/questions/14852821/aligning-rotated-xticklabels-with-their-respective-xticks/67459618#67459618)

如果旋转角度更极端（例如，70°），或者您只是想要更细粒度的控制，则锚定效果不佳。相反，[应用线性变换](https://stackoverflow.com/a/49449590/13138364)：

```
ax.set_xticks(ticks)
ax.set_xticklabels(labels, rotation=70)

# create -5pt offset in x direction
from matplotlib.transforms import ScaledTranslation
dx, dy = -5, 0
offset = ScaledTranslation(dx / fig.dpi, dy / fig.dpi, fig.dpi_scale_trans)

# apply offset to all xticklabels
for label in ax.xaxis.get_majorticklabels():
    label.set_transform(label.get_transform() + offset) 
```

[![比例平移](../Images/03a70c535ba0eb1bbbd29790427cbb60.png)](https://i.stack.imgur.com/yPr7k.png)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-11-26T19:48:14.790

旋转标签当然是可能的。请注意，这样做会降低文本的可读性。一种替代方法是使用如下代码替换标签位置：

```
import numpy as np
n=5

x = np.arange(n)
y = np.sin(np.linspace(-3,3,n))
xlabels = ['Long ticklabel %i' % i for i in range(n)]

fig, ax = plt.subplots()
ax.plot(x,y, 'o-')
ax.set_xticks(x)
labels = ax.set_xticklabels(xlabels)
for i, label in enumerate(labels):
    label.set_y(label.get_position()[1] - (i % 2) * 0.075) 
```

[![在此处输入图像描述](../Images/e6e9c091abce43211fec70f7c739f234.png)](https://i.stack.imgur.com/OK0kb.png)

有关更多背景和替代方案，请参阅[我博客上的这篇文章](https://gorelik.net/2017/11/23/how-to-make-a-graph-less-readable-rotate-the-text-labels/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-04-05T23:13:04.637

一个简单、无循环的替代方法是使用`horizontalalignment`Text 属性作为`xticks`[1] 的关键字参数。在下面的注释行中，我已强制`xticks`对齐为“正确”。

```
n=5
x = np.arange(n)
y = np.sin(np.linspace(-3,3,n))
xlabels = ['Long ticklabel %i' % i for i in range(n)]
fig, ax = plt.subplots()
ax.plot(x,y, 'o-')

plt.xticks(
        [0,1,2,3,4],
        ["this label extends way past the figure's left boundary",
        "bad motorfinger", "green", "in the age of octopus diplomacy", "x"], 
        rotation=45,
        horizontalalignment="right")    # here
plt.show() 
```

（`yticks`默认情况下已经将右边缘与刻度线对齐，但`xticks`默认情况下似乎是“中心”。）

[1]如果您搜索短语“文本属性” ，您会发现[xticks 文档中描述的内容。](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-09-18T00:05:56.553

如果您不想修改 xtick 标签，您可以使用：

`plt.xticks(rotation=45)`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2021-07-02T13:15:40.110

我显然迟到了，但有一个官方例子使用

```
plt.setp(ax.get_xticklabels(), rotation=45, ha="right", rotation_mode="anchor") 
```

旋转标签，同时保持它们与刻度线正确对齐，既干净又容易。

见：[https ://matplotlib.org/stable/gallery/images_contours_and_fields/image_annotated_heatmap.html](https://matplotlib.org/stable/gallery/images_contours_and_fields/image_annotated_heatmap.html)

# delphi - 从 adoquery 中删除重复项

> ID：14852822
> 
> 赞同：0
> 
> 时间：2013-02-13T11:46:11.493
> 
> 标签：delphi, delphi-xe2

我有一个 adoQuery，想用结果填充一个列表框，但没有重复。

```
 with Fdeptlayout.ADOQuery2 do
  begin
    sql.Clear;
         sql.BeginUpdate;
         sql.Add('SELECT');
         sql.Add(' *');
         sql.Add('FROM');
         sql.Add(' `MList`');
         sql.Add(' ORDER BY `Basic Name`');
         sql.EndUpdate;

         open;
  end;

  while not fdeptlayout.ADOquery2.EOF do
    fdeptlayout.ListBox1.Items.Add(fdeptlayout.ADOQuery2['Basic Name']);
end; 
```

目前这将 350 个项目添加到列表框中，很多重复项。这太多了。如何更改查询以从结果中删除重复项？:( 任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:52:06.207

您忘记了“下一步”。

```
 while not fdeptlayout.ADOquery2.EOF do begin
    fdeptlayout.ListBox1.Items.Add(fdeptlayout.ADOQuery2['Basic Name']);
    fdeptlayout.ADOquery2.Next;
  end; 
```

没有下一个，你会得到一个无限循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T11:49:51.450

更改查询：

```
 sql.Add('SELECT DISTINCT');
     sql.Add('  `Basic Name`');
     sql.Add('FROM');
     sql.Add(' `MList`');
     sql.Add(' ORDER BY `Basic Name`'); 
```

`DISTINCT`过滤掉重复项，并且通过仅选择您需要的字段，您可以节省大量不需要的数据。此外，记录中的其他字段可能会有所不同，从而导致 DISTINCT 工作不理想。

作为一般规则：不要`*`在查询中使用，只选择您实际需要的字段。

[编辑]

而且，正如评论中所同意的那样，`Fdeptlayout.ADOQuery2.Next`在 while 循环中调用肯定会防止您的应用程序锁定。;-)

# c# - 如何在 c# 中获取 python 关键字

> ID：14852823
> 
> 赞同：0
> 
> 时间：2013-02-13T11:46:12.590
> 
> 标签：c#, python

我正在生成`Python`脚本`c#`。但我必须知道单词是否是关键字。问题：是否有任何 c# 库可以获取 python 关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:49:33.680

不，没有。自己滚。

# ios - 为什么 cv::resize 这么慢？

> ID：14852831
> 
> 赞同：13
> 
> 时间：2013-02-13T11:46:46.277
> 
> 标签：ios, objective-c, opencv, image-processing

我正在对实时视频源进行一些边缘检测：

```
- (void)processImage:(Mat&)image;
{
        cv::resize(image, smallImage, cv::Size(288,352), 0, 0, CV_INTER_CUBIC);
        edgeDetection(smallImage);
        cv::resize(smallImage, image, image.size(), 0, 0, CV_INTER_LINEAR);
} 
```

`edgeDetection`做了一些相当繁重的工作，并且在视频帧大小为 1280x720 的情况下以相当低的帧速率运行。添加`resize`调用会*显着*降低帧速率，这与我的预期完全相反。这仅仅是因为调整大小操作很慢，还是因为我做错了什么？

`smallImage`因此在标题中声明：

```
@interface CameraController : UIViewController
<CvVideoCameraDelegate>
{
    Mat smallImage;
} 
```

它没有初始化，它工作正常。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T21:08:08.437

调整图像的大小很慢，并且您要为每个处理的帧执行两次。有几种方法可以以某种方式改进您的解决方案，但您必须提供有关您尝试解决的问题的更多详细信息。

首先，在检测边缘之前调整图像大小会导致边缘检测得到更少的信息，从而导致检测到的边缘更少——或者至少会使检测它们变得更加困难。

此外，使用的调整大小算法会影响其速度，如果我的记忆没有失败， **CV_INTER_LINEAR 是 cv::resize 最快的 - 并且您正在使用 CV_INTER_CUBIC 进行第一次调整大小。**

调整图像大小的一种**替代**方法是处理原始图像的较小区域。为此，您应该查看 opencv image **ROI's (region of interest)**。这很容易做到，你在这个网站上有很多关于这些的问题。缺点是您将只检测一个区域中的边缘而不是整个图像，这可能没问题，具体取决于问题。

如果你真的想调整图像大小，opencv 开发人员在处理较小的图像时通常会使用**pyrDown**和**pyrUp函数，而不是****resize**。我认为这是因为它更快，但是您可以肯定地对其进行测试。[此链接中有关 pyrDown 和 pyrUp 的更多信息。](http://docs.opencv.org/doc/tutorials/imgproc/pyramids/pyramids.html)

**关于 cv::resize 算法，这里是列表：**

```
INTER_NEAREST - a nearest-neighbor interpolation
INTER_LINEAR - a bilinear interpolation (used by default)
INTER_AREA - resampling using pixel area relation. It may be a preferred method for image decimation, as it gives moire’-free results. But when the image is zoomed, it is similar to the INTER_NEAREST method.
INTER_CUBIC - a bicubic interpolation over 4x4 pixel neighborhood
INTER_LANCZOS4 - a Lanczos interpolation over 8x8 pixel neighborhood 
```

不能肯定地说**INTER_LINEAR**是不是最快的，但肯定比**INTER_CUBIC**快。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-18T14:12:15.120

INTER_NEAREST 是最快且质量最差的结果。在缩小范围内，对于每个像素，它只使用离假设位置最近的像素。

INTER_LINEAR 是性能和质量的良好折衷，但它比 INTER_NEAREST 慢。

INTER_CUBIC 比 INTER_LINEAR 慢，因为它使用更多插值。

INTER_LANCZOS4 是结果质量最好的算法，但比其他算法慢。

在这里你可以找到一篇很好的比较文章：[http ://tanbakuchi.com/posts/comparison-of-openv-interpolation-algorithms/](http://tanbakuchi.com/posts/comparison-of-openv-interpolation-algorithms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T07:59:52.293

在 4 核 CPU（不是 GPU）上进行计时。

从：（1440、2560、3）到：（300、300、3）

最快到最慢：

```
INTER_NEAREST resize:  Time Taken: 0:00:00.001024
INTER_LINEAR resize:   Time Taken: 0:00:00.004321
INTER_CUBIC resize:    Time Taken: 0:00:00.007929
INTER_LANCZOS4 resize: Time Taken: 0:00:00.021042
INTER_AREA resize:     Time Taken: 0:00:00.065569 
```

# ios - 最后一行 id 在核心数据中总是返回零

> ID：14852833
> 
> 赞同：0
> 
> 时间：2013-02-13T11:46:51.367
> 
> 标签：ios, core-data, ios4, xcode4.2

```
 NSString *strMQueryupdate =[NSString stringWithFormat:@"insert into        Zpatient_info_image_note values ('%@','%@',NULL,'%@')",@"",autoNumberTextField.text,@""];

  NSManagedObjectContext *moc = [self managedObjectContext];

Patient_info_image_note *patientImageData = (Patient_info_image_note *)   [NSEntityDescription insertNewObjectForEntityForName:@"Patient_info_image_note" inManagedObjectContext:moc];

patientImageData.autonumber=autoNumberTextField.text;
patientImageData.patient_Info_Note_Image=@"";
patientImageData.noteDate=@"";
patientImageData.noteNumber=NULL;

[moc save:nil];
lastrowid=[[[[patientImageData objectID] URIRepresentation] absoluteString] intValue];

patientImageData=nil; 
```

这段代码有什么不正确的地方？作为第二个选项，我应该创建另一个库，它保存从 0 开始的整数并将其递增 1，然后将其保存到数据库中，以便下次我可以通过数组计数检索最后一个递增的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:15:36.197

如果你打印你的值，`[[[patientImageData objectID] URIRepresentation] absoluteString]`你会得到类似的东西：

> x-coredata://3BB81DA1-4516-45A0-8895-7FD710C74247/LapTime/p61

试图获得它的 intValue 会给你 0。

# php - Yii 变量在另一个函数中使用？除了会话如何实现？

> ID：14852837
> 
> 赞同：0
> 
> 时间：2013-02-13T11:46:59.840
> 
> 标签：php, yii

我在 Yii 控制器动作中使用了一些变量。现在我想在我得到服务器响应的同一个控制器的另一个操作中验证它。我不想使用会话方法。还有其他方法可以实现我的目标吗？我的一个动作是请求，另一个是服务器响应处理动作。

# jquery - jquery serializeArray 在 Safari 中不起作用

> ID：14852842
> 
> 赞同：0
> 
> 时间：2013-02-13T11:47:08.497
> 
> 标签：jquery, safari, serializearray

我正在尝试使用 JQuery 的 serializeArray 方法从一个简单的表单创建一个对象数组（从表单获取数据并缓存以供以后使用）：

```
<fieldset class="myFieldset">
    <div id="divContainer">         
        <div class="anotherdiv">
            <input type="text" name="testBox1" class="aclass" />
            <select name="testSel1" class="atestclass">
                <option value="car">car</option>
                    <option value="boat">boat</option>
                    <option value="plane">plane</option>
                </select>
            </input>
         </div>
     </div>
 </fieldset>
 <fieldset class="submit-wrap">
        <input type="submit" name="enter" id="enter" value="Enter" >
 </fieldset> 
```

我在点击时调用 serializeArray：

```
$('#enter').click(function(){       
    var testForm = jQuery('.myFieldset').serializeArray();
    alert(testForm);
}); 
```

这在 chrome ( [http://jsfiddle.net/pCELZ/](http://jsfiddle.net/pCELZ/) ) 中可以正常工作，但在 Safari 中不行。有任何想法吗？

//我的表单元素没有被禁用，我包含了'name'属性。尝试了各种 html... //在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:04:20.867

而是使用`fieldset`use `form`：

```
<form class="myFieldset">
  <div id="divContainer">         
    <div class="anotherdiv">
        <input type="text" name="testBox1" class="aclass" />
        <select name="testSel1" class="atestclass">
            <option value="car">car</option>
                <option value="boat">boat</option>
                <option value="plane">plane</option>
            </select>
        </input>
     </div>
   </div>
 </form> 
```

并在这里测试它：[**小提琴**](http://jsfiddle.net/pCELZ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:17:09.633

贾是对的。另一种方法是通过更改选择器来指定元素。

```
$('#enter').click(function(){       
    var testForm = jQuery('.myFieldset :input').serializeArray();
    console.log(testForm);
}); 
```

[在这里](http://jsfiddle.net/wfEJE/)工作小提琴

# java - 向请求添加自定义标头时出现轴 2 和壁垒问题

> ID：14852843
> 
> 赞同：1
> 
> 时间：2013-02-13T11:47:13.693
> 
> 标签：java, web-services, axis2, axis, rampart

```
<soapenv:Envelope> 
<soapenv:Header>    
      <cor:india>test</cor:india>
     </soapenv:Header>

<soapenv:Body>
.
.
</soapenv:Body>
</soapenv:Envelope>

     OMFactory omFactory =OMAbstractFactory.getOMFactory();
    OMNamespace omNamespace = omFactory.createOMNamespace("http://example.com/...", "cor");
    OMElement header = omFactory.createOMElement("india", omNamespace);
    header.setText("test");
    stub._getServiceClient().addHeader(header); 
```

我想将自定义标头添加到使用轴 2 和壁垒的肥皂请求中。但下面是我得到的例外

```
Caused by: org.apache.rampart.RampartException: Error in extracting message properties
    at org.apache.rampart.RampartMessageData.<init>(RampartMessageData.java:379)
    at org.apache.rampart.MessageBuilder.build(MessageBuilder.java:61)
    at org.apache.rampart.handler.RampartSender.invoke(RampartSender.java:65)
    ... 10 more
Caused by: org.apache.ws.security.WSSecurityException: Error in converting SOAP Envelope to Document; nested exception is: 
    java.lang.ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPHeaderBlock
    at org.apache.rampart.util.Axis2Util.getDocumentFromSOAPEnvelope(Axis2Util.java:191)
    at org.apache.rampart.RampartMessageData.<init>(RampartMessageData.java:270)
    ... 12 more
Caused by: java.lang.ClassCastException: org.apache.axiom.om.impl.llom.OMElementImpl cannot be cast to org.apache.axiom.soap.SOAPHeaderBlock
    at org.apache.rampart.util.Axis2Util.getDocumentFromSOAPEnvelope(Axis2Util.java:141)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:45:01.730

如果您尝试使用此处提供的提示添加标题[示例自定义标题](http://www.keith-chapman.org/2008/10/axis2-adding-custom-soap-headers-to.html)以及您使用壁垒参与的位置，那么您将面临上述问题。

解决方案是在 META-INF 中添加您自己的 module.xml 并在添加自定义标头的位置添加输出流

```
<module name="test" class="exampleClass">

    <OutFlow>

            <handler name="handle" class="exampleClass">
                <order phase="Security"  />
            </handler>
        </OutFlow>
</module> 
```

==================================================== =================================

```
public class exampleClass AbstractHandler implements org.apache.axis2.modules.Module {

public InvocationResponse invoke(MessageContext ctx) throws AxisFault {

SOAPEnvelope env = ctx.getEnvelope();
SOAPHeader hdr = env.getHeader();

SOAPFactory factory = (SOAPFactory) env.getOMFactory();

OMNamespace ns = factory.createOMNamespace("http://google.com", "cor");

//SOAPHeader head = factory.createSOAPHeader(env);

hdr.addHeaderBlock("india", ns).setText("value here");

return InvocationResponse.CONTINUE;
}

public void applyPolicy(Policy arg0, AxisDescription arg1) throws AxisFault {
    // TODO Auto-generated method stub

}

public boolean canSupportAssertion(Assertion arg0) {
    // TODO Auto-generated method stub
    return false;
}

public void engageNotify(AxisDescription arg0) throws AxisFault {
    // TODO Auto-generated method stub

}

public void init(ConfigurationContext arg0, AxisModule arg1) throws AxisFault {
    // TODO Auto-generated method stub

}

public void shutdown(ConfigurationContext arg0) throws AxisFault {
    // TODO Auto-generated method stub

} } 
```

==================================================== ===============================

在客户端参与你的模块之前的壁垒像

```
Options options = serviceClient.getOptions();
serviceClient.engageModule("test");

options.setProperty(RampartMessageData.KEY_RAMPART_POLICY,loadPolicy("policy.xml"));
serviceClient.engageModule("rampart");
.. 
```

..

# iphone - 在不知道子类的情况下声明 UIViewController？

> ID：14852845
> 
> 赞同：0
> 
> 时间：2013-02-13T11:47:20.073
> 
> 标签：iphone, objective-c, ipad, uiviewcontroller, declaration

假设我有一个 UIViewController 子类`ViewControllerOne`和另一个`ViewControllerTwo`.

我知道在另一种方法中我需要的类是其中之一。是否可以在方法中传递类，然后在接收到的方法中，声明一个 UIViewController 与传递的任何子类？

我想知道它是否可能而不只是做类似的事情，如果 this = this，则声明视图一，否则声明视图二。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:50:27.960

你的方法可能是：

```
- (void)myMethod:(Class)class {
    UIViewController *controller = [[class alloc] init];
} 
```

或者类似的东西。

或者，您可以在知道类是什么的地方创建控制器并将其传递给方法：

```
UIViewController *controller = [[MYViewController alloc] init];
[self myMethod:controller]; 
```

然后如果需要在方法内：

```
- (void)myMethod:(UIViewController *)controller {
    if ([controller isKindOfClass:[MYViewController class]]) {
        // Do something
    } else {
        // Do something else
    }
} 
```

希望有帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:54:52.283

乔希，除了乔治的回答，如果我理解你的话，你应该知道每个`NSObject`人都有以下方法：

```
- (BOOL)isKindOfClass:(Class)aClass 
```

所以，你可以检查这种方式

```
if ([myObject isKindOfClass:[ViewControllerOne class]])
{
     //declare here ViewControllerOne
     ViewControllerOne *myViewControllerOne = myObject;
}
else if ([myObject isKindOfClass:[ViewControllerTwo class]])
{
     //declare here ViewControllerOne
     ViewControllerTwo *myViewControllerOne = myObject;
} 
```

# javascript - 当函数没有响应时调用另一个 javascript 函数

> ID：14852846
> 
> 赞同：0
> 
> 时间：2013-02-13T11:47:19.620
> 
> 标签：javascript

我有两个 javascript 函数

```
searchButtonClicked()
hidemap() 
```

将`searchButtonClicked()`被调用`body onload`。

`searchButtonClicked()`有时没有反应。所以我想让它尝试执行 5 秒，如果它不执行我想调用`hidemap()`.

请帮忙。提前致谢。乌迪

这是功能

```
function searchButtonClicked() {
    if (inlocatorHubMode) {
    locatorHubSearch();
    }
    else {
    search();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:56:34.663

我假设 searchButtonClicked 是一个 AJAX 请求。

如果是这种情况，您可以使用 setTimeout 和回调的组合来实现您的目标。

```
var searchTimeout = null;

function searchButtonClicked(){
  searchTimeout = setTimeout(requestFailed, 5000);

  //If you're using jQuery, something like this
  $.ajax({
    url: "service.php",
    success: requestSuccess
  });

  //If you're not, something like this
  xmlhttp.onreadystatechange=(function(){
    if(xmlhttp.readyState==4 && xmlhttp.status==200){
      requestSuccess();
    }
  });  
}

function requestSuccess(){
  clearTimeout(searchTimeout);
  //Yay! It succeeded!
}

function requestFailed(){
  hideMap();
  //It didn't unfortunately =[
} 
```

**编辑：**编辑说它实际上不是 AJAX 请求。把它留在这里，以防它对某人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:33:26.117

javascript中有一个函数

```
window.setTimeout("javascript function",milliseconds); 
```

此函数等待指定的毫秒数，然后执行指定的函数。

在您的情况下，您可以在函数开始时设置超时。这样在指定的毫秒后，您的第二个函数将执行

# android - OnKeyListener OnKey 重复动作

> ID：14852847
> 
> 赞同：0
> 
> 时间：2013-02-13T11:47:22.207
> 
> 标签：android, keylistener, keyevent

我正在尝试修改用户单击“DEL”键（在屏幕键盘上）时的操作，这是代码

```
ed.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_DEL) {
                if(contadorcor == 0){
                    String output = correctOutput(String.valueOf(ed.getText()));
                    ed.setText(output);
                    ed.setSelection(num);
                    contadorcor++;
                }
            }
            contadorcor = 0;
            return false;
        }
    });

public static String correctOutput(String s) {
    String input = s;
    int pos = 0;
    for (int i = 0; i < input.length(); i++) {
            if(input.charAt(i) != ' ') {
            if(input.charAt(i) != '_') {
                pos = i;
            }
        }
    }
    String output = "";
    for (int i = 0; i < input.length(); i++) {
        if(i != pos) {
            output = output + String.valueOf(input.charAt(i));
        } else {
            output = output + "_";
        }
    }
    num = num - 2;
    return output;
} 
```

要理解我为什么这样做是因为有一个像这样的未知词“_ _ _ _ _ _ _ .....”当用户在尝试猜测时删除一个字母时，让我们说“THISIK |_ _ ... ”并想更正“K”，光标就在下一个“下划线”的开头我想删除“k”并用“下划线”替换它，然后将光标放在那里。“THISI |_ _ _ _ ....”

但是当我按下删除键时，会执行两次此操作，并删除 2 个字母。我认为它捕获了 keydown 和 keyup ，这就是它重复的原因，但我不知道如何修复它。我试图制作某种计数器，但它也不起作用

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:50:16.663

在 onKey 方法中，您有一个参数：事件。您可以执行以下操作：

```
if(event.getAction()==KeyEvent.ACTION_UP){
...
}
else if(event.getAction()==KeyEvent.ACTION_DOWN){
...
} 
```

# ruby-on-rails - 如何在 ruby 中停止 Rinda 环服务器

> ID：14852853
> 
> 赞同：0
> 
> 时间：2013-02-13T11:47:57.687
> 
> 标签：ruby-on-rails, ruby, druby

我想知道除了杀死它的进程之外，我还能如何停止 Rinda 环服务器。

我检查了我的 ruby​​ 1.9.3 附带的 ring.rb，发现 RingServer 缺少 api 来停止自己。它在 initialize() 中打开一个 UDPSocket，但它不包含任何关闭该套接字的代码。

有人知道吗？提前谢谢。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:05:27.943

Rinda 是分布式 Ruby (DRb) 的一部分，因此如果目标只是停止所有 Rinda 和其他 DRb 服务，您可以这样做：

```
DRb.stop_service 
```

如果您使用它，那么在您的 Rinda 服务代码（循环方法）中，您需要救援`DRb::DRbConnError`以避免尝试写入 TupleSpace 时出现问题，根据：[http ://www.ruby-forum.com/topic/97023](http://www.ruby-forum.com/topic/97023)

不是 Rinda 服务，但这是我测试的一个简单示例，它停止了 DRb 服务。它只是在 Ruby 1.9.3 中使用 DRb（无 Rinda），对此处的示例稍作修改：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html)

**服务器.rb**

```
#!/usr/local/bin/ruby
require 'drb/drb'
URI="druby://localhost:8787"
class StopAndGiveTimeServer
  def get_current_time
    DRb.stop_service
    return Time.now
  end
end
FRONT_OBJECT=StopAndGiveTimeServer.new
$SAFE = 1 # disable eval() and friends
DRb.start_service(URI, FRONT_OBJECT)
DRb.thread.join 
```

**客户端.rb**

```
#!/usr/local/bin/ruby
require 'drb/drb'
SERVER_URI="druby://localhost:8787"
DRb.start_service
timeserver = DRbObject.new_with_uri(SERVER_URI)
puts timeserver.get_current_time 
```

*更新*：听起来您想给环服务器打补丁以关闭套接字。

只需创建一种通过猴子补丁获取现有套接字的方法：

```
module Rinda
  class RingServer
    attr_accessor :soc
  end
end 
```

然后，您可以将 ringserver 的实例保存在实例变量中，例如`@ringserver`，并使用它来访问套接字以关闭它、设置新的套接字等。例如

```
def bind_to_different_port(port)
  begin
    @ringserver.soc.close
  rescue => e
    puts "#{e.message}\n\t#{e.backtrace.join("\n\t")}"
  end
  @ringserver.soc=UDPSocket.open
  @ringserver.soc.bind('', port)
end 
```

或者跳过 attr_accessor，只需向 RingServer 添加一个方法，然后在 RingServer 上调用一两个方法来关闭、打开、绑定套接字。

要查看它如何使用 Ruby 1.9.3 中的套接字：[https ://github.com/ruby/ruby/blob/v1_9_3_374/lib/rinda/ring.rb](https://github.com/ruby/ruby/blob/v1_9_3_374/lib/rinda/ring.rb)

# c# - Entity Framework 5.0 代码优先一对一和一对多关系

> ID：14852858
> 
> 赞同：1
> 
> 时间：2013-02-13T11:48:05.687
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-framework-5

我有两个实体- **Product**和**Picture**。这个想法是一个产品可以只有一张图片或没有图片，并且一张图片可以映射到许多产品。

```
public class Product
{
    public int Id {get; set;}

    public Picture Picture { get; set; }

    public bool Enabled { get; set; }

    public string Text { get; set; }
} 
```

**图片**实体是到另一个包含所有图片的图片实体的映射（此图片实体包含仅针对产品图片的映射），因此基本上它只包含带有 Id 的两列。

```
public class Picture
{
    public int Id {get; set;}

    public int PictureId { get; set; }
} 
```

**这是我的产品**实体模型绑定器

```
modelBuilder.Entity<Product>().HasOptional<Picture>(pr => pr.Picture); 
```

当我使用图片创建**产品**实体或将图片添加到现有实体时，在**产品表中创建的****Picture_Id**列将正确填充**图片**表中的**Id 。**问题是当我尝试检索**Product**时。**Product**实体中的**Picture**实体为空。我怀疑映射不正确。你能告诉我当我检索它时如何在**产品实体中填充****图片**实体吗？这是检索代码：

 ******```
 public Product GetProductById(int productId)
    {
        var query = from pr in _productRepository.Table
                    where pr.Id == productId
                    select pr;

        return query.FirstOrDefault();
    } 
```

* * *

**编辑：**我正在使用包含依赖注入的自定义**IRepository服务**

```
IRepository<Product> 
```

**IRepository**接口包含以下方法：

```
 void Insert(T entity);
    void Update(T entity);
    void Delete(T entity);
    IQueryable<T> Table { get; } 
```

这是**Table**的实现：

```
 public virtual IQueryable<T> Table
    {
        get
        {
            return this.Entities;
        }
    }

    private IDbSet<T> Entities
    {
        get
        {
            if (_entities == null)
                _entities = _context.Set<T>();
            return _entities;
        }
    } 
```

我无法将**.Include("Picture")**添加到**Table**，因为它是**IQueryable**。我还启用了延迟加载，但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:59:03.493

```
var products = db.Pictures.Include("Product");

public Product GetProductById(int productId)
    {
        var query = from pr in products
                    where pr.Id == productId
                    select pr;

        return query.FirstOrDefault();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:11:14.623

您应该使用 include 来加载相关实体：

```
public Product GetProductById(int productId)
{
    using (var db = new ProductContext())
    {
       var query = from pr in db.Products.Include("Picture")
                   where pr.Id == productId
                   select pr;

        return query.FirstOrDefault();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:11:43.440

我解决了这个问题。不确定这是否是正确的方法，但它有效。

我做了以下更改：

```
 public class Product
{
    public int? PictureId { get; set; }

    public int Id {get; set;}

    public Picture Picture { get; set; }

    public bool Enabled { get; set; }

    public string Text { get; set; }
}

modelBuilder.Entity<Product>().HasOptional<Picture>(pr => pr.Picture).WithMany().HasForeignKey(pr => pr .PictureId);

public Product GetProductById(int productId)
    {
        var query = from pr in _productRepository.Table
                    where pr.Id == productId
                    select pr;

        var product = query.FirstOrDefault();
        AddProductPicture(product);

        return product;
    }

private void AddProductPicture(Product product)
{
    var query = from pic in _pictureRepository.Table
                        where pic.Id == product.PictureId
                        select pic;

            product.Picture = query.FirstOrDefault();
} 
```******

# google-chrome-extension - 来自后台脚本的桌面通知

> ID：14852862
> 
> 赞同：4
> 
> 时间：2013-02-13T11:48:21.927
> 
> 标签：google-chrome-extension

我是 chrome 扩展开发的初学者。当我的后台脚本完成其某些方法时，我正在尝试显示桌面通知，但我不知道如何为此请求权限。有没有办法完成这个任务？

可以使用内容脚本来完成，但我想通过后台脚本显示通知，没有后台页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:04:59.317

您需要在 manifest.json 文件中添加通知：

```
"permissions": ["tabs", "notifications","management"] 
```

然后你可以打电话

```
webkitNotifications.createNotification('images/message48.png', title, message); 
```

# powershell - AD 嵌套组成员身份 powershell 报告

> ID：14852866
> 
> 赞同：0
> 
> 时间：2013-02-13T11:48:54.793
> 
> 标签：powershell, active-directory, reporting, powershell-3.0

我们对共享资源有以下命名约定：

```
sg_ShareName1_RO
sg_ShareName1_RW
sg_ShareName2_RO
sg_ShareName2_RW 
```

我想在 Excel/csv 中获得以下格式的报告：

```
 ShareName1    ShareName2 ...
User1    RW            NA
User2    NA            RO 
```

我正在努力将共享名称输出到 csv 文件中的行而不是列。这是我已经完成的代码：

```
 $users = GetADUser - filter {name like '*'} | sort name | select name
 $sharegroups = Get-AdGroup -filter {name like 'sg_*'} | sort name
 $shares = Get-AdGroup -filter {name like 'sg_*'} | sort name | foreach {$_} | select @{N='Share Name'; E={$_.Name.Replace('sg_', '').Replace('_', '').Replace('RO','').Replace('RW','')}} -Unique 
```

Tnen 为了避免每次都去 AD 以首先检查组成员身份，我想将每个组的成员存储在数组中

```
$sharegroupmembers = @{}
foreach ($group in $sharegroups)
{
   $sharegroupmembers[$group.name] = Get-ADGroupMember $group.name -Recursive | select name
} 
```

之后，我坚持如何根据组成员身份将共享正确投影到列、用户到行以及 RW/RO/NA 到值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:09:31.080

您的列数将是任何用户拥有的最大组成员数。这些在 $sharegroupmembers 的值中，所以：

```
$shargroupmembers.values | 
sort count |
select -last 1 
```

这就是您将拥有多少行，以及您需要在要导出的对象上创建多少共享成员属性。

# java - 在 JTextField 或 Jbutton 中显示按键计数

> ID：14852875
> 
> 赞同：0
> 
> 时间：2013-02-13T11:49:27.960
> 
> 标签：java, swing, jbutton, jtextfield, keyevent

我无法显示按键的按下次数并在 JTextField 或 JButton 中显示数字。任何人都可以帮我解决这个问题吗？

我已经显示了 KeyEvent.VK_NUMPAD3，它似乎是我遇到这样麻烦的 KeyEvent.VK_2：

我可以显示它，但每次按下键时数字都不会更新。

这是我的完整代码..有点大，但你要求它.. :)

```
 public class Display extends JFrame{

public static final int CANVAS_WIDTH = 1000;
public static final int CANVAS_HEIGHT = 450;
public static final Color LINE_COLOR = Color.BLACK;
public static final Color GROUND_COLOR = Color.GREEN;
public static final Color CANVAS_BACKGROUND = Color.CYAN;
public static final int TRANS = Color.OPAQUE;

private int x1 = CANVAS_WIDTH / 2;
private int y1 = CANVAS_HEIGHT / 2;
private int x2 = CANVAS_WIDTH /2;
private int y2 = CANVAS_HEIGHT / 2;

private int Sx1 = CANVAS_WIDTH ;
private int Sy1 = CANVAS_HEIGHT ;
private int Sy2 = CANVAS_HEIGHT ; 

private int Rx1 = CANVAS_WIDTH - CANVAS_WIDTH;
private int Ry1 = CANVAS_HEIGHT;
private int Rx2 = CANVAS_WIDTH;
private int Ry2 = CANVAS_HEIGHT ;

private int Lx1 = CANVAS_WIDTH / 2;
private int Ly1 = CANVAS_HEIGHT / 2;
private int Lx2 = CANVAS_WIDTH / 2;
private int Ly2 = CANVAS_HEIGHT / 2;

private int Mx1 = CANVAS_WIDTH / 2;
private int My1 = CANVAS_HEIGHT / 2;
private int Mx2 = CANVAS_WIDTH / 2;
private int My2 = CANVAS_HEIGHT / 2;

int[] xs = {380, 460, 460, 540, 540, 620, 500, 380};
    int[] ys = {260, 260, 250, 250, 260, 260, 205, 260};

private DrawCanvas canvas;
private JTextField Altitude;
private JTextField TASpeed;
private JLabel altButton;
private int countA = 0;
private int countS = 0;
private int Bcount1 = 0;
public String Ccount = Integer.toString(Bcount1);

public class CountUpAltitude extends AbstractAction {
      /** Constructor */
      public CountUpAltitude(String name, String shortDesc, Integer mnemonic) {
         super(name);
         putValue(SHORT_DESCRIPTION, shortDesc);
         putValue(MNEMONIC_KEY, KeyEvent.VK_3);
         Bcount1 += 1;
      }
      //RIGHT
      @Override
      public void actionPerformed(ActionEvent e) {
          addKeyListener(new KeyAdapter() {
                public void keyPressed(KeyEvent evt) {
                    switch(evt.getKeyCode()) {
                    case KeyEvent.VK_NUMPAD6:
            //original count
            countA += 5;
            Altitude.setText(countA + "");
                    }
                }
              });
      }
   }

   public class CountDownAltitude extends AbstractAction {
      /** Constructor */
      public CountDownAltitude(String name, String shortDesc, Integer mnemonic) {
         super(name);
         putValue(SHORT_DESCRIPTION, shortDesc);
         putValue(MNEMONIC_KEY, KeyEvent.VK_4);
      }
      //RIGHT
      @Override
      public void actionPerformed(ActionEvent e) {
          addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent evt) {
                switch(evt.getKeyCode()) {
                case KeyEvent.VK_NUMPAD3:
          //original count
          countA -= 5;
          Altitude.setText(countA + "");
                }
            }
          });
      }
   }

   public class CountUpTASpeed extends AbstractAction {
          /** Constructor */
          public CountUpTASpeed(String name, String shortDesc, Integer     mnemonic) {
             super(name);
             putValue(SHORT_DESCRIPTION, shortDesc);
             putValue(MNEMONIC_KEY, KeyEvent.VK_1);

          }
          //LEFT
          @Override
          public void actionPerformed(ActionEvent e) {
              addKeyListener(new KeyAdapter() {
                    public void keyPressed(KeyEvent evt) {
                        switch(evt.getKeyCode()) {
                        case KeyEvent.VK_NUMPAD4:
                //original count
                countS += 5;
                TASpeed.setText(countS + "");
                        }
                    }
                  });
          }
       }

   public class CountDownTASpeed extends AbstractAction {
          /** Constructor */
          public CountDownTASpeed(String name, String shortDesc, Integer     mnemonic) {
             super(name);
             putValue(SHORT_DESCRIPTION, shortDesc);
             putValue(MNEMONIC_KEY, KeyEvent.VK_2);
          }
          //LEFT
          @Override
          public void actionPerformed(ActionEvent e) {
              addKeyListener(new KeyAdapter() {
                public void keyPressed(KeyEvent evt) {
                    switch(evt.getKeyCode()) {
                    case KeyEvent.VK_NUMPAD1:
              //original count
              countS -= 5;
              TASpeed.setText(countS + "");
                    }
                }
              });
          }
       }

public Display() {
    canvas = new DrawCanvas();
    canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));
    canvas.setLayout(new BorderLayout());
    Container cp = getContentPane();
    cp.setLayout(new BorderLayout());

     // Create the Actions shared by the button and keys
    Action countUpAltitude = new CountUpAltitude("Count Up",
            "", new Integer(KeyEvent.VK_ENTER));
    Action countDownAltitude = new CountDownAltitude("Count Down",
            "", new Integer(KeyEvent.VK_D));

    Action countUpTASpeed = new CountUpTASpeed("Count Up",
            "", new Integer(KeyEvent.VK_ENTER));
    Action countDownTASpeed = new CountDownTASpeed("Count Down",
            "", new Integer(KeyEvent.VK_D));

      Altitude = new JTextField("0", 5);
      Altitude.setHorizontalAlignment(JTextField.CENTER);
      Altitude.setEditable(false);
      Altitude.setOpaque(false);
      Altitude.setFont(Altitude.getFont().deriveFont(25f));

      TASpeed = new JTextField("0", 5);
      TASpeed.setHorizontalAlignment(JTextField.CENTER);
      TASpeed.setEditable(false);
      TASpeed.setOpaque(false);
      TASpeed.setFont(Altitude.getFont().deriveFont(25f));

      altButton = new JLabel();
      altButton.setText(Ccount);

      canvas.add(altButton, BorderLayout.SOUTH);

      canvas.add(Altitude, BorderLayout.LINE_END);
      canvas.add(TASpeed, BorderLayout.LINE_START);

      //Invisible
      JButton btnCountUp = new JButton();
      btnCountUp.setFocusable(false);
      btnCountUp.setHideActionText(true);
//        btnCountUp.setContentAreaFilled(false);
//        btnCountUp.setBorderPainted(false);
      canvas.add(btnCountUp, BorderLayout.NORTH);
      //Invisible
      JButton btnCountDown = new JButton();
      btnCountDown.setFocusable(false);
      btnCountDown.setHideActionText(true);
    //        btnCountDown.setContentAreaFilled(false);
    //        btnCountDown.setBorderPainted(false);
      canvas.add(btnCountDown, BorderLayout.NORTH);
      // Set actions for buttons
      btnCountUp.setAction(countUpAltitude);
      btnCountDown.setAction(countDownAltitude);

      JButton btnCountUpS = new JButton();
      btnCountUpS.setFocusable(false);
      btnCountUpS.setHideActionText(true);
//        btnCountUpS.setContentAreaFilled(false);
//        btnCountUpS.setBorderPainted(false);
      canvas.add(btnCountUpS, BorderLayout.SOUTH);
      //Invisible
      JButton btnCountDownS = new JButton();
      btnCountDownS.setFocusable(false);
      btnCountDownS.setHideActionText(true);
//        btnCountDownS.setContentAreaFilled(false);
//        btnCountDownS.setBorderPainted(false);
      canvas.add(btnCountDownS, BorderLayout.SOUTH);
      // Set actions for buttons
      btnCountUpS.setAction(countUpTASpeed);
      btnCountDownS.setAction(countDownTASpeed);

    addKeyListener(new KeyAdapter() {
        public void keyPressed(KeyEvent evt) {
            switch(evt.getKeyCode()) {
            case KeyEvent.VK_LEFT:
                Rx1 -= 10;      Ry1 += 10;
                Rx2 += 10;      Ry2 -= 10;
                x1 -=10;        x2 +=10;
                Mx1 += 10;      Mx2 -= 10;
                repaint();
                break;
            case KeyEvent.VK_RIGHT:
                Rx1 -= 10;      Ry1 -= 10;
                Rx2 += 10;      Ry2 += 10;
                x1 += 10;       x2 += 10;
                Mx1 -= 10;      Mx2 += 10;
                repaint();
                break;
            case KeyEvent.VK_DOWN:
                y1 -= 10;       y2 -= 10;
                Ly1 -= 10;      Ly2 -= 10;
                Sy1 += 10;      Sy2 -= 10;
                Ry1 +=10;       Ry2 += 10;
                repaint();
                break;
            case KeyEvent.VK_UP:
                y1 += 10;       y2 += 10;
                Ly1 += 10;      Ly2 += 10;
                Sy1 -= 10;      Sy2 += 10;
                Ry1 -= 10;      Ry2 -= 10;
                repaint();
                break;
            case KeyEvent.VK_M:
                System.exit(0);
            }
        }
    });
    cp.add(canvas, BorderLayout.LINE_START);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("FLIGHT DISPLAY");
    pack();
    setVisible(true);
    requestFocus();
}

class DrawCanvas extends JPanel {
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        setBackground(CANVAS_BACKGROUND);

        g.setColor(GROUND_COLOR);
        //Draw ground Color
        g.drawRect(Sx1 - Sx1,Sy1 /2, CANVAS_WIDTH, Sy2 /2);
        g.fillRect(Sx1 - Sx1, Sy1 /2, CANVAS_WIDTH, Sy2 /2);
        g.setColor(LINE_COLOR);
        //Draw line centre horizontal
        g.drawLine(Rx1, Ry1 /2, Rx2, Ry2 /2);
        g.drawOval(x1 -15, y1 -15, 30, 30);
        g.fillOval(x1 - 5, y1 -5, 10, 10);
        //Draw line centre vertical

        //Draw line dim
        g.setColor(Color.YELLOW);
        g.fillArc(300, 0, 400, 140, 0, 180);
        g.setColor(LINE_COLOR);
        g.drawLine(Lx1 -25, Ly1 +20, Lx2 +25, Ly2 +20);
        g.drawLine(Lx1 -50, Ly1 +40, Lx2 +50, Ly2 +40);
        g.drawLine(Lx1 -25, Ly1 +60, Lx2 +25, Ly2 +60);
        g.drawLine(Lx1 -75, Ly1 +80, Lx2 +75, Ly2 +80);
        g.drawLine(Lx1 -25, Ly1 +100, Lx2 +25, Ly2 +100);
        //Draw line dim
        g.drawLine(Lx1 -25, Ly1 -20, Lx2 +25, Ly2 -20);
        g.drawLine(Lx1 -50, Ly1 -40, Lx2 +50, Ly2 -40);
        g.drawLine(Lx1 -25, Ly1 -60, Lx2 +25, Ly2 -60);
        g.drawLine(Lx1 -75, Ly1 -80, Lx2 +75, Ly2 -80);
        g.drawLine(Lx1 -25, Ly1 -100, Lx2 +25, Ly2 -100);
        //Draw polyline centre plane
        g.drawPolyline(xs, ys, 8);

        g.setColor(Color.BLACK);
        g.drawArc(300, 0, 400, 140,  0, 180);
        g.drawLine(Mx1+30, My1 + My1, Mx2, My2 - My2);
        g.drawLine(Mx1-30, My1 + My1, Mx2, My2 - My2);
        g.drawLine(Mx1, My1 + My1, Mx2, My2 - My2);

    }
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new Display();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:26:31.583

KeyEvent.VK_2 只不过是标准美国键盘上非数字键盘区域中带有数字 2 的键。

```
public static final int VK_2              = 0x32; 
```

下面的代码对我来说很好，我不希望你没有为这个键添加一个开关盒，所以你可以做一个小测试来打印所需键的 ASCII 值并找出它在键事件类。

```
public void keyPressed(KeyEvent e) {
    switch (e.getKeyCode()) {
        case KeyEvent.VK_2:
            System.out.println("Non Numpad 2");
        case KeyEvent.VK_NUMPAD3:
            System.out.println("NumPad 3");
    }
} 
```

# c# - 文件版本信息给我错误的构建部分

> ID：14852882
> 
> 赞同：0
> 
> 时间：2013-02-13T11:49:34.537
> 
> 标签：c#

我的 file.exe 文件版本是：0.0.20130211.0 但在 FileBuildPart 它显示我：10659

我该怎么办？为什么它给了我错误的构建部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:54:19.697

FileBuildPart 是一个 32 位值。

20130211 = 0x13329A3 的 LS 32 位是 0x29A3 = 10659

# c# - 将给定的 char 变量转换为字符串，在我的编码中表示它的代码

> ID：14852885
> 
> 赞同：0
> 
> 时间：2013-02-13T11:49:41.260
> 
> 标签：c#, string, encoding, char, encode

我想写一个txt文件。某些字符需要以某种方式转义：\'c1，其中 c1 是编码 1251 中字符的代码。

如何将给定的 char 变量转换为字符串，在我的编码中表示它的代码？

我找到了一种对 utf 执行此操作的方法，但对于其他 ecnodings 没有办法。对于 utf 变体，有 Char.ConvertToUtf32() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:02:42.793

```
// get the encoding
Encoding encoding = Encoding.GetEncoding(1251);

// for each character you want to encode
byte b = encoding.GetBytes("" + c)[0];
string hex = b.ToString("x");
string output = @"\'" + hex; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:00:15.863

> 如何将给定的 char 变量转换为字符串，在我的编码中表示它的代码？

尝试这样的事情：

```
 var enc = Encoding.GetEncoding("Windows-1251");

    char myCharacter = 'д'; // Cyrillic 'd'

    byte code = enc.GetBytes(new[] { myCharacter, })[0];

    Console.WriteLine(code.ToString());      // "228" (decimal)
    Console.WriteLine(code.ToString("X2"));  // "E4" (hex) 
```

# java - 针对不同屏幕尺寸的映射坐标

> ID：14852890
> 
> 赞同：1
> 
> 时间：2013-02-13T11:49:50.480
> 
> 标签：java, android

我听说有人喜欢图表，所以我花时间画了一张：D

我需要设计一个大致如下所示的活动：

![在此处输入图像描述](../Images/6f1b46285c1b55f9f72ec50d30414f28.png)

地图只是城市、地形等的图像文件。用户可以在 x-coord 和 y-coord 文本框中输入值，当它们都输入时，一个三角形图标（也是一个图像文件）会出现在地图顶部相对于地图上的坐标。对于所有地图，坐标的最小值、最大值固定为 0,0 到 10000,10000。用户可以单击三角形图标（按钮），然后将他们带到另一个活动。

设计上述内容的明智方法是什么？

就我而言，我需要考虑几件事：

1）映射相对于屏幕尺寸的坐标。一个明显的解决方法是使用 absolutelayout 并使用像素来定位三角形图标，但由于显而易见的原因，这种解决方案很糟糕。

2）在地图（图像文件）顶部放置一个按钮。在玩了一堆布局之后，我不知道如何通过 Java 来做到这一点。

我只是在寻找一个非常简单的指导，只是为了让自己朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:53:24.470

我会使用 SurfaceView。您可以在 onDraw 方法中绘制任何内容。你会得到一个 Canvas 对象来绘制，所以转换你的坐标并做你想做的事情应该不难。

看看这个教程：

[http://www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php](http://www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php)

# javascript - 函数不会删除 cookie（即使它在其他地方工作）

> ID：14852894
> 
> 赞同：0
> 
> 时间：2013-02-13T11:49:56.960
> 
> 标签：javascript, cookies

我在删除我的 JavaScript 网络应用程序中的 cookie 时遇到了一点问题。我在一个单独的函数中使用了这段代码，它工作得很好，但由于某种原因，现在它实际上并没有因为某种奇怪的原因改变 cookie 的过期时间，也许我遗漏了一些明显的东西，但这是我的代码：

```
function deletetodo(obj) {

    var checkboxID;

    // get just the ID number of the checkbox.
    checkboxID = obj.id.replace(/todo-status-/g, '');

    // to make sure it's getting the right cookie ID (which it is)
    alert(checkboxID);

    // delete that cookie with the same ID number.
    document.cookie = "todo-" + checkboxID + '=; expires=Thu, 01-Jan-1970 00:00:01 GMT;';

} 
```

这很奇怪，因为在我拥有的另一个函数中，同样的代码删除了一个 cookie，然后在函数末尾用一个小的变化替换了它。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:58:08.327

问题在于未设置路径。由于它是一个单页应用程序，我只是`path=/;`在到期日之后添加。

# c# - 在线程池中创建 Windows Phone 8 上的图像缩略图

> ID：14852897
> 
> 赞同：2
> 
> 时间：2013-02-13T11:50:03.093
> 
> 标签：c#, image-processing, windows-phone-8, threadpool

我需要在 WP8 上创建图像的缩略图，目前我遇到了困难。简而言之，我知道这样做的唯一一种方法是使用classes`System.Windows.Controls.Image`和. 我还尝试在线程池上执行缩略图创建，因为它是在线程池上运行的其他更大操作的一部分。`System.Windows.Media.Imaging.BitmapImage``System.Windows.Media.Imaging.WritableBitmap`

正如您可能已经理解的那样，即使我试图创建上述类的实例，我也会因无效的跨线程访问而失败。真的很遗憾，因为这个缩略图甚至不会在 UI 中使用，只会保存到一个文件中，然后从文件中显示出来。我的工作与 UI 线程无关，我仍然面临着这个限制。

那么有没有其他方法可以从图像流中创建缩略图（我是从 PhotoChooser 任务中获取的）？也许其他一些不需要那些 UI 绑定类的 API？尝试使用它，甚至用谷歌搜索它，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:03:19.150

好的，我想我也会把我自己的答案放在这里，因为它从不同的角度展示了事物。Justin Angel 的回答还可以，但有几个问题：

1.  当代码深入模型层并在后台线程上运行时，不可能有对 Dispatcher 的引用。
2.  我需要从该方法返回缩略图，稍后在相同的同步上下文中使用它。否则，我将不得不围绕这种创建缩略图的方法更改大量代码。

考虑到这个要求，这是我的解决方案：

```
private WriteableBitmap CreateThumbnail(Stream stream, int width, int height, SynchronizationContext uiThread)
        {
            // This hack comes from the problem that classes like BitmapImage, WritableBitmap, Image used here could 
            // only be created or accessed from the UI thread. And now this code called from the threadpool. To avoid
            // cross-thread access exceptions, I dispatch the code back to the UI thread, waiting for it to complete
            // using the Monitor and a lock object, and then return the value from the method. Quite hacky, but the only
            // way to make this work currently. It's quite stupid that MS didn't provide any classes to do image 
            // processing on the non-UI threads.
            WriteableBitmap result = null;
            var waitHandle = new object();
            lock (waitHandle)
            {
                uiThread.Post(_ => 
                {
                    lock (waitHandle)
                    {
                        var bi = new BitmapImage();
                        bi.SetSource(stream);

                        int w, h;
                        double ws = (double)width / bi.PixelWidth;
                        double hs = (double)height / bi.PixelHeight;
                        double scale = (ws > hs) ? ws : hs;
                        w = (int)(bi.PixelWidth * scale);
                        h = (int)(bi.PixelHeight * scale);

                        var im = new Image();
                        im.Stretch = Stretch.UniformToFill;
                        im.Source = bi;

                        result = new WriteableBitmap(width, height);
                        var tr = new CompositeTransform();
                        tr.CenterX = (ws > hs) ? 0 : (width - w) / 2;
                        tr.CenterY = (ws < hs) ? 0 : (height - h) / 2;
                        tr.ScaleX = scale;
                        tr.ScaleY = scale;
                        result.Render(im, tr);
                        result.Invalidate();
                        Monitor.Pulse(waitHandle);
                    }

                }, null);

                Monitor.Wait(waitHandle);
            }
            return result;
        } 
```

我仍在 UI 线程中（在视图模型中）捕获 UI 线程的 SynchronizationContext，并进一步传递它，然后我使用闭包来捕获局部变量，以便它们可用于运行的回调在 UI 线程上。我还使用 lock 和 Monitor 来同步这两个线程并等待图像准备好。

如果有的话，我会根据投票接受我或 Justin Angel 的回答。:)

**编辑：**当您在 UI 线程上时（例如，在按钮单击处理程序中），您可以获得 Dispatcher 的实例`SynchronizationContext`。`System.Threading.SynchronizationContext.Current`像这样：

```
private async void CreateThumbnailButton_Clicked(object sender, EventArgs args)
    {
        SynchronizationContext uiThread = SynchronizationContext.Current;
        var result = await Task.Factory.StartNew<WriteableBitmap>(() =>
            {
                Stream img = GetOriginalImage();// get the original image through a long synchronous operation
                return CreateThumbnail(img, 163, 163, uiThread);
            });
        await SaveThumbnailAsync(result);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:10:10.027

是的，使用 WriteableBitmap 需要访问 UI 字符串。您可能必须使用 Dispatcher 类将 UI 线程上的工作安排为工作流的一部分。

我能想到的唯一另一件事是将图像保存到手机的 MediaLibrary 并使用 Picture.GetThumbnail() 方法来获取非常低分辨率的缩略图。如果不访问 UI 线程，它可能会或可能不会工作。此外，一旦将图片添加到用户的 MediaLibrary，就无法删除这些图片，因此请注意不要向这些文件夹发送垃圾邮件。

# java - 自定义“HTTP GET 样式”请求的正则表达式

> ID：14852899
> 
> 赞同：1
> 
> 时间：2013-02-13T11:50:05.497
> 
> 标签：java, regex

我正在尝试解析（Java）自定义 GET 样式请求，我想通过正则表达式来做到这一点。
请求的格式如下：

```
GET myCommand?parameter1=value&parameter2=value&parameter3=value&parameter4=value 
```

参数的数量是可变的，但至少需要一个参数。

有人可以帮我解决这个正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:32:40.887

以下是如何使用 4 行将其全部解析为 java 变量：

```
String command = input.replaceAll("(^\\w+ )|(\\?.*)", "");
Map<String, String> params = new LinkedHashMap<String, String>();
for (String pair : input.replaceFirst(".*?\\?", "").split("&"))
    params.put(pair.split("=")[0], pair.split("=")[1]); 
```

请注意，使用 a`LinkedHashMap`以输入顺序进行迭代。

这是使用您的输入进行的一个小测试（稍作修改以具有不同的值）：

```
public static void main(String[] args) throws Exception {
    String input = "GET myCommand?parameter1=value1&parameter2=value2&parameter3=value2&parameter4=value4";
    String command = input.replaceAll("(^\\w+ )|(\\?.*)", "");
    Map<String, String> params = new LinkedHashMap<String, String>();
    for (String pair : input.replaceFirst(".*?\\?", "").split("&"))
        params.put(pair.split("=")[0], pair.split("=")[1]);
    System.out.println("Command=" + command);
    System.out.println("Params=" + params);
} 
```

输出：

```
Command=myCommand
Params={parameter1=value1, parameter2=value2, parameter3=value2, parameter4=value4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:59:11.227

`GET myCommand\?([a-z0-9]+)=(.+)(&([a-z0-9]+)=(.+))*`

现在只需`[a-z0-9]+`用正则表达式替换有效标识符，`.+`用正则表达式替换有效值，并根据您选择的语言的要求进行转义，您应该一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T07:02:55.480

以下是适用于任何带有查询参数的请求 URL 的正则表达式：`.+?(\?((\w+?=.+?)&)*\w+?=.+)?$`

这`.+?`是查询参数之前的匹配字符串。让我们打破正则表达式：`(\?((\w+?=.+?)&)*\w+?=.+)?`

`((\w+?=.+?)&)*`表示零个或多个键值对 join with`&`
`\w+?=.+`表示最后一个键值对

希望这可以帮助。如果您需要更多帮助，请告诉我。

# c# - FlipView 中的 ScollViewer

> ID：14852900
> 
> 赞同：0
> 
> 时间：2013-02-13T11:50:11.397
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml

这是重现我的问题的示例

```
<FlipView>
    <FlipView.Resources>
        <Style TargetType="FlipViewItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="FlipViewItem">
                        <ScrollViewer HorizontalAlignment="Center" VerticalAlignment="Center"
                              HorizontalContentAlignment="Center" VerticalContentAlignment="Center" >
                                <ContentPresenter />
                          </ScrollViewer>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </FlipView.Resources>
    <Rectangle Width="1366" Height="768" >
        <Rectangle.Fill>
            <LinearGradientBrush EndPoint="0,0" StartPoint="1,0">
                <GradientStop Color="White"/>
                <GradientStop Color="Black" Offset="1"/>
                <GradientStop Color="White" Offset="0.487"/>
                <GradientStop Color="Black" Offset="0.44"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
</FlipView> 
```

滚动查看器的水平偏移量将在您更改后自动设置回 0。我认为这总是发生在与flipview的滚动方向相同的方向上。但是，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:38:24.173

默认`ScrollViewer`仅在需要时滚动，并且您的矩形小于 ScrollViewer。另外 - 你只有一件物品。您可以尝试设置其样式：`Style="{StaticResource HorizontalScrollViewerStyle}"`. 就像这些：

```
<Page
    x:Class="App113.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App113"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid.Resources>
            <LinearGradientBrush
                x:Key="LibearBrush"
                EndPoint="0,0"
                StartPoint="1,1">
                <GradientStop
                    Color="White" />
                <GradientStop
                    Color="Black"
                    Offset="1" />
                <GradientStop
                    Color="White"
                    Offset="0.487" />
                <GradientStop
                    Color="Black"
                    Offset="0.44" />
            </LinearGradientBrush>
        </Grid.Resources>
        <FlipView>
            <FlipView.Resources>
                <Style
                    TargetType="FlipViewItem">
                    <Setter
                        Property="Template">
                        <Setter.Value>
                            <ControlTemplate
                                TargetType="FlipViewItem">
                                <!--Style="{StaticResource VerticalScrollViewerStyle}" is the standard alternative-->
                                <ScrollViewer
                                    Style="{StaticResource HorizontalScrollViewerStyle}"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center">
                                    <ContentPresenter />
                                </ScrollViewer>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </FlipView.Resources>
            <Rectangle
                Width="2366"
                Height="1768"
                Fill="{StaticResource LibearBrush}" />
            <Rectangle
                Width="2366"
                Height="1768"
                Fill="{StaticResource LibearBrush}" />
            <Rectangle
                Width="2366"
                Height="1768"
                Fill="{StaticResource LibearBrush}" />
        </FlipView>
    </Grid>
</Page> 
```

# delphi - 如何使 TFont 属性在对象检查器中显示为默认值？

> ID：14852904
> 
> 赞同：4
> 
> 时间：2013-02-13T11:50:23.110
> 
> 标签：delphi, custom-controls, delphi-xe

**概述**

在编写组件时，我喜欢给我发布的属性一个默认值，通过这样做，对象检查器会以粗体显示任何新更改的属性，这对于使用该组件的任何人来说都非常有用，因为他们可以轻松地识别默认值和修改值。

**例子**

下面是一个包含两个 Color 和两个 Font 属性的组件示例：

我正在`default`类结构中制作已发布的属性：

```
type
  TMyComponent = class(TComponent)
  private
    FColor: TColor;
    FColorTo: TColor;
    FFont: TFont;
    FFontHot: TFont;
    procedure SetColor(const Value: TColor);
    procedure SetColorTo(const Value: TColor);
    procedure SetFont(const Value: TFont);
    procedure SetFontHot(const Value: TFont);
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property Color: TColor read FColor write SetColor default clGreen;
    property ColorTo: TColor read FColorTo write SetColorTo default clBlue;
    property Font: TFont read FFont write SetFont; //< set default?
    property FontHot: TFont read FFontHot write SetFontHot; //< set default?
  end; 
```

和构造函数：

```
constructor TMyComponent.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);

  FColor := clGreen;
  FColorTo := clBlue;

  FFont := TFont.Create;
  FFont.Color := clRed;
  FFont.Name := 'Segoe UI';
  FFont.Size := 10;
  FFont.Style := [];

  FFontHot:= TFont.Create;
  FFontHot.Color := clNavy;
  FFontHot.Name := 'Verdana';
  FFontHot.Size := 8;
  FFontHot.Style := [fsItalic];
end;

destructor TMyComponent.Destroy;
begin
  FFont.Free;
  FFontHot.Free;

  inherited Destroy;
end; 
```

**问题**

我遇到的问题是如何将已发布的 Font 属性“标记”为默认值？

当我将组件添加到表单时，对象检查器中的两个 TFont 属性都是粗体（非默认）。如果我单击每个已发布字体旁边的椭圆，我可以看到我从构造函数中设置的值显示出来——但它们再次以粗体显示。奇怪的是，每种字体的大小值从未以粗体显示（即看起来没有变化）。

标准发布的属性可以`default`很容易地制作，但是如何使用像 TFont 这样具有子属性的类来做到这一点？

我看不到从类结构中设置默认值的方法，只能在构造函数中。即使我可以从类结构中定义默认值（这似乎是不可能的），我也怀疑它是否会起作用，因为尚未创建字体。例如（显然不起作用）：

```
published
  property FontHot: TFont read FFontHot write SetFontHot default FFontHot.Color := clRed; //< set default? 
```

那么，在将新组件添加到对象检查器时，如何使已发布的 TFont 属性显示为默认值且未更改？

我想这同样适用于其他类似于 TFont 作为子属性的类。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T12:04:47.740

对于对象属性，默认[存储说明符](http://docwiki.embarcadero.com/RADStudio/XE3/en/Properties#Storage_Specifiers)是**`stored`**. 存储后`False`（从不保存到 DFM）、`True`（始终保存）或返回的无参数函数。你需要最后一个：

```
private
  function IsFontStored: Boolean;
published
  property Font: TFont read FFont write SetFont stored IsFontStored; 
```

在`IsFontStored`函数内，您可以决定当前设置的字体是否为*默认字体*。如果是，则返回`False`。

# .net - 通过 Clickonce 创建子菜单

> ID：14852911
> 
> 赞同：1
> 
> 时间：2013-02-13T11:50:40.923
> 
> 标签：.net, clickonce, publish

众所周知，clickonce 在`Start->Programs->PublisherName->ProductName`. 但是是否可以在 之后创建子菜单`PublisherName`？例如，我有两个 clickonce 应用程序，它们当前显示在 Start->Programs 中，如下所示：

```
Start->Programs->XYZ->Application.exe // This is a trial version of the app
Start->Programs->XYZ Corporation->Application.exe // This is the full version of the app 
```

我需要将其更改为：

```
Start->Programs->XYZ Corporation->TrialVersion->Application.exe
                                |
                                ->FullVersion->Application.exe 
```

我无法得到我的意思的截图。我希望我的问题很清楚。这可以点击一次吗？

**编辑**

刚刚了解了另一个 clickonce 应用程序[Blu](http://2010.thirteen23.com/experiences/desktop/blu/)，可以从[这里](http://blu.en.softonic.com/)下载。此应用程序在`PublisherName`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:24:09.367

如果您使用的是 VS2010 或 VS2012，除了 Publisher 和 Product Name 之外，您还可以指定 Suite Name。套件名称将出现在发布者（开始下的顶部菜单条目）和产品名称之间的开始菜单上。

例如，如果您将 Company Name 设置为“MyCompany”，SuiteName 设置为“MySuite”，并将产品名称设置为“MyProduct”，您将在开始菜单下看到 MyCompany，在 MyCompany 文件夹下看到 MySuite，在 MySuite 文件夹下看到 MyProduct。

# android - .apk 文件中是否存在库文件？

> ID：14852914
> 
> 赞同：7
> 
> 时间：2013-02-13T11:50:42.407
> 
> 标签：android, apk

实际上我想知道，如果在我的应用程序的 libs 文件夹中存在任何库文件（例如 .jar 文件），那么在安装（运行）该应用程序之后，库文件是否会出现在 .apk 文件中？根据我的理解，库文件应该出现在生成的 .apk 文件中。如果我错了，请纠正我。

如果我的问题低于标准，那么非常抱歉。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:55:31.540

使用最新版本的 Android 工具，libs 文件夹中的 .jar 文件会自动包含在构建中。（请参阅[处理 Android 项目中的依赖项](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)。）所以，是的，该库包含在已编译的字节码中（而不是作为单独的文件）。

如果您在发布版本中使用 ProGuard，那么它将尝试删除任何未实际使用的代码。因此，可能是库的*某些部分*包含在最终的 .apk 中，而某些部分被删除了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:55:35.690

答案是肯定的。apk 只是您编译项目的压缩版本。例如，如果你用 winrar 打开它，你会看到里面有一切；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:00:28.200

你可以自己试试看，但是你不能直接看到生成的apk中libs文件夹下的.jar文件。库类文件全部一起编译成一个 .dex 文件。如果你反编译那个 dex 文件，你可以得到 java 代码。

# javascript - 使用 JavaScript 获取以像素为单位的字符串长度

> ID：14852925
> 
> 赞同：13
> 
> 时间：2013-02-13T11:51:08.177
> 
> 标签：javascript, string, pixels, string-length

我想知道字符串的确切长度，即“Hello World”。

它不应该是我的容器的长度。

任何帮助？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T11:53:50.543

将您的文本放入 a`<span>`并使用 JavaScript 来测量您的`<span>`.

HTML：

```
<span id="text">Dummy text</span> 
```

JavaScript：

```
var textWidth = document.getElementById("text").clientWidth; 
```

jQuery：

```
$('#text').width(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T11:53:03.963

您可以创建一些内联元素（`span`例如），将字符串设置为元素的内容（`innerHTML`），将其插入文档（附加到某个元素）并获取它的宽度（`clientWidth`）。

没有其他方法可以以像素为单位测量字符串的长度，因为它取决于字体样式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T11:53:57.753

由于字符串的像素长度会根据独立应用的 CSS 属性（例如字体、粗细和大小）而变化，因此我看不出这在 JS 中是可能的。

# c# - webbrowser control c# only invoke first time next time not working

> ID：14852926
> 
> 赞同：1
> 
> 时间：2013-02-13T11:51:09.247
> 
> 标签：c#, visual-studio-2008

我正在尝试从网站中提取一些数据，但提交按钮仅在文档完成事件中第一次调用。加载第一个提交的页面文档完成事件后不执行我的代码是

```
 private void b_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser b = sender as WebBrowser;
        string response = "";
        response = b.DocumentText;
        HtmlElement links = b.Document.GetElementById("btn1");
        links.InvokeMember("click");
        checkTrafiicButtonClick = true;
        MessageBox.Show("");
        ***// upto these working and loading second page after that i want to fill data   
           and want to submit but down line is not working and it should be work after    
           loading the page that i submitted how can i do these***

        HtmlElement tfrno = b.Document.GetElementById("TrfNo");
        tfrno.SetAttribute("value", "50012079");
        HtmlElement submitButon = b.Document.GetElementById("submitBttn");
        submitButon.InvokeMember("click");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:35:28.807

根据您的评论，您的代码将无法按预期工作。第一次单击后，网络浏览器开始异步页面加载。您应该执行以下操作：

```
private void b_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser b = sender as WebBrowser;
     if(b.Url.AbsoluteUri == "mydomain.com/page1.html")
     {
        string response = "";
        response = b.DocumentText;
        HtmlElement links = b.Document.GetElementById("btn1");
        links.InvokeMember("click");
        checkTrafiicButtonClick = true;
        MessageBox.Show("");
        return;
     }
        ***// upto these working and loading second page after that i want to fill data   
           and want to submit but down line is not working and it should be work after    
           loading the page that i submitted how can i do these***
     if(b.Url.AbsoluteUri == "mydomain.com//page2.htm")
     {
        HtmlElement tfrno = b.Document.GetElementById("TrfNo");
        tfrno.SetAttribute("value", "50012079");
        HtmlElement submitButon = b.Document.GetElementById("submitBttn");
        submitButon.InvokeMember("click");
        return;
     }
    } 
```

另请注意，页面的某些部分可以从不同的来源加载，例如在 中`iframe`，因此您必须检查正确`uri`

# jsf - ViewState 自定义保存方法 - 可以吗？

> ID：14852930
> 
> 赞同：1
> 
> 时间：2013-02-13T11:51:39.577
> 
> 标签：jsf, viewstate

`javax.faces.STATE_SAVING_METHOD`当设置为“服务器”时，JSF ViewState 中的 AFAIK 存储到 JVM 内存中。

有没有办法配置/设置自定义保存方法，例如，可以使用一些（最终是磁盘支持的）存储引擎（即 memcache / redis）来存储 ViewState ？

类似于`session.save_handler`PHP 中的自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:09:04.690

> *存储在 JVM 内存中*

更准确地说，它存储在由容器管理的 HTTP 会话中。

因此，如果您想自定义会话管理，那么只需在 servlet 容器级别进行。目前尚不清楚您使用的是哪一个，但如果是 Tomcat，请参阅“持久管理器”一章下的[管理器组件](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html)文档以获取磁盘上的会话存储。

# java - 列出不同用户的 Google 日历活动

> ID：14852932
> 
> 赞同：1
> 
> 时间：2013-02-13T11:51:42.773
> 
> 标签：java, google-api, google-calendar-api, google-api-java-client

我想使用新的[Calendar API v3](https://developers.google.com/google-apps/calendar/)列出日历事件。我已经阅读了那篇文章（[Calendar API v3, 2-legged OAuth & Java](http://googleappsdeveloper.blogspot.ch/2011/12/calendar-api-v3-2-legged-oauth-java.html)），并以同样的方式进行了身份验证。请看我的工厂：

```
import java.io.IOException;

import com.gene.herder.google.GoogleApiSettings;
import com.google.api.client.auth.oauth.OAuthHmacSigner;
import com.google.api.client.auth.oauth.OAuthParameters;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson2.JacksonFactory;
import com.google.api.services.calendar.Calendar;
import com.google.api.services.calendar.Calendar.Builder;
import com.google.api.services.calendar.CalendarRequest;
import com.google.api.services.calendar.CalendarRequestInitializer;

public final class CalendarApiFactory {

    private GoogleApiSettings settings;

    public CalendarApi createCalendarApi() {
        Calendar calendar = createBuilder(settings).build();

        CalendarApi calendarApi = new CalendarApi();
        calendarApi.setCalendar(calendar);
        return calendarApi;
    }

    private Builder createBuilder(GoogleApiSettings settings) {
        HttpTransport transport = new NetHttpTransport();
        JacksonFactory jsonFactory = new JacksonFactory();

        OAuthParameters oauthParameters = createOAuthParameters(settings);

        Builder builder = new Builder(transport, jsonFactory, oauthParameters);
        builder.setApplicationName("MY-COMPANY-MY-APP/1.0");
        builder.setCalendarRequestInitializer(new SettingsCalendarRequestInitializer(settings));
        return builder;
    }

    private OAuthParameters createOAuthParameters(GoogleApiSettings settings) {
        OAuthParameters oauthParameters = new OAuthParameters();
        oauthParameters.version = "1";
        oauthParameters.consumerKey = settings.getClientKey();
        oauthParameters.signer = createSigner(settings);
        return oauthParameters;
    }

    private OAuthHmacSigner createSigner(GoogleApiSettings settings) {
        OAuthHmacSigner signer = new OAuthHmacSigner();
        signer.clientSharedSecret = settings.getClientSecret();
        return signer;
    }

    public void setSettings(GoogleApiSettings settings) {
        this.settings = settings;
    }
}

class SettingsCalendarRequestInitializer extends CalendarRequestInitializer {

    private GoogleApiSettings settings;

    public SettingsCalendarRequestInitializer(GoogleApiSettings settings) {
        this.settings = settings;
    }

    @Override
    protected void initializeCalendarRequest(CalendarRequest<?> request) throws IOException {
        request.setKey(settings.getApiKey());
    }
} 
```

之后我`CalendarApi`以这种方式实现：

```
import java.io.IOException;

import com.google.api.client.util.ArrayMap;
import com.google.api.services.calendar.Calendar;
import com.google.api.services.calendar.Calendar.Events.Insert;
import com.google.api.services.calendar.Calendar.Events.List;
import com.google.api.services.calendar.model.Event;
import com.google.api.services.calendar.model.Events;

public class CalendarApi {

    private Calendar calendar;

    public Events listEvents(String calendarId) throws IOException {
        // Add the xoauth_requestor_id query parameter to let the API know
        // on behalf of which user the request is being made.
        ArrayMap<String, Object> customKeys = new ArrayMap<String, Object>();
        customKeys.add("xoauth_requestor_id", calendarId);

        List events = calendar.events().list("primary");
        events.setUnknownKeys(customKeys);
        return events.execute();
    }

    public void setCalendar(Calendar calendar) {
        this.calendar = calendar;
    }
} 
```

我的域配置如下所示：
**高级工具 => 管理第三方 OAuth 客户端访问** ![在此处输入图像描述](../Images/1168cc361bda9e00921005f8528170bb.png)

我的控制台 API 如下所示：

![在此处输入图像描述](../Images/4b58efa5ede08e31bb6412f598a7a24e.png)

现在，如果我使用“user1@my-company-domain.com”参数调用我的`listEvents`方法，一切正常。我可以查看指定日历中的所有事件。

但是在我传递任何其他域用户的情况下，我总是得到“无效的凭据”异常。堆栈跟踪：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Invalid Credentials",
    "reason" : "authError"
  } ],
  "message" : "Invalid Credentials"
}
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:143) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:115) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:309) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1090) ~[google-http-client-1.13.1-beta.jar:1.13.1-beta]
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:407) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:340) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:458) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
    at com.gene.herder.google.calendar.CalendarApi.listEvents(CalendarApi.java:31) ~[CalendarApi.class:na] 
```

我的 Maven 依赖项如下所示：

```
<!-- Google API -->
<dependency>
  <groupId>com.google.apis</groupId>
  <artifactId>google-api-services-calendar</artifactId>
  <version>v3-rev22-1.13.2-beta</version>
</dependency>
<dependency>
  <groupId>com.google.http-client</groupId>
  <artifactId>google-http-client-jackson2</artifactId>
  <version>1.13.1-beta</version>
</dependency>
<dependency>
  <groupId>com.google.oauth-client</groupId>
  <artifactId>google-oauth-client-jetty</artifactId>
  <version>1.13.1-beta</version>
</dependency> 
```

为什么它不起作用？我想我可以为任何我想要的用户使用该 API。我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:12:52.567

我们必须在 CPanel中启用**两腿 OAuth 访问控制选项。**使用此选项 API 可以正常工作。
您可以在以下位置找到此选项：
高级工具 => 管理 OAuth 域密钥 => 两足 OAuth 访问控制

# xml - xsd:keyref 上的验证错误

> ID：14852941
> 
> 赞同：1
> 
> 时间：2013-02-13T11:52:15.810
> 
> 标签：xml, xsd-validation, keyref

我对以下架构有问题我想将 job 元素的 jobGroup 属性与 jobGroup 元素的*name**属性*“匹配” ，但我无法通过验证来验证此成本约束

这是我的架构和应该失败的示例

```
 <?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://www.example.org/example" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           xmlns:tns="http://www.example.org/example"   
           elementFormDefault="qualified" >

    <xs:element name="cluster" type="tns:clusterType">
        <xs:keyref name="jobGroupKeyRef" refer="tns:jobGroupKey">
            <xs:selector xpath=".//job"></xs:selector>
            <xs:field xpath="@jobGroup"></xs:field>
        </xs:keyref>
        <xs:key name="jobGroupKey">
            <xs:selector xpath=".//jobGroup"></xs:selector>
            <xs:field xpath="@name"></xs:field>
        </xs:key>
    </xs:element>

    <xs:complexType name="jobType">
      <xs:attribute name="id" 
                    type="xs:positiveInteger" 
                    use="required"/>
      <xs:attribute name="submissionTime" 
                    type="xs:dateTime" 
                    use="required"/>
      <xs:attribute name="jobGroup" 
                    type="xs:string" 
                    default="default"/>
    </xs:complexType>

    <xs:complexType name="jobGroupType">
      <xs:attribute name="name" 
                    type="xs:string" 
                    use="required"/>
      <xs:attribute name="description" 
                    type="xs:string" 
                    default=""/>
    </xs:complexType>

  <xs:complexType name="clusterType">
      <xs:choice minOccurs="1" maxOccurs="unbounded">
        <xs:element name="job" 
                    type="tns:jobType"  
                    minOccurs="0" 
                    maxOccurs="unbounded"/>         
        <xs:element name="jobGroup" 
                    type="tns:jobGroupType"  
                    minOccurs="0" 
                    maxOccurs="unbounded"/>
      </xs:choice>
      <xs:attribute name="name" 
                    type="xs:string" 
                    use="required"/>
    </xs:complexType>

</xs:schema>

<cluster xmlns="http://www.example.org/example" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" 
  xs:schemaLocation="http://www.example.org/example XSDFile.xsd" 
  name="CLUSTER1" >
    <job submittedHost="HOST1" 
      id="1" 
      submissionTime="2009-03-31T17:40:35.000+02:00" 
      jobGroup="default"></job>
    <job submittedHost="HOST2" 
      id="2" 
      submissionTime="2009-03-31T17:40:35.000+02:00"  
      jobGroup="wrongName"></job>
    <jobGroup name="default" 
      description="Job Group number 1"></jobGroup>

</cluster> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:37:48.690

您忘记在选择器中使用完全限定名称。您缺少名称空间。

试试这个：

```
<xs:element name="cluster" type="tns:clusterType">
    <xs:keyref name="jobGroupKeyRef" refer="tns:jobGroupKey">
        <xs:selector xpath=".//tns:job"></xs:selector>
        <xs:field xpath="@jobGroup"></xs:field>
    </xs:keyref>
    <xs:key name="jobGroupKey">
        <xs:selector xpath=".//tns:jobGroup"></xs:selector>
        <xs:field xpath="@name"></xs:field>
    </xs:key>
</xs:element> 
```

# java - Java ProcessBuilder 调试器 Netbeans

> ID：14852943
> 
> 赞同：2
> 
> 时间：2013-02-13T11:52:21.103
> 
> 标签：java, debugging, netbeans, classnotfoundexception, processbuilder

我在 JVM 的更深层及其调试功能方面遇到了问题。我想要做的是使用 ProcessBuilder 启动一个单独的 java 程序并让它与我的主进程通信。除非我添加命令，否则一切正常

"-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=1044",

到 ProcessBuilder。

```
Class toExecute = ExampleSimulationController.class;
String javaHome = System.getProperty("java.home");
String javaBin = javaHome
        + File.separator + "bin"
        + File.separator + "java";
String classpath = System.getProperty("java.class.path");
String className = toExecute.getCanonicalName();

ProcessBuilder builder = new ProcessBuilder(javaBin, "-cp",
        "-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=1044",
         classpath, className);
builder.redirectErrorStream(true); 
```

在将此行添加到 ProcessBuilder 中（目的是为子进程添加调试功能，例如，此处：[What are Java command line options to set to allow JVM to be remote debug?](https://stackoverflow.com/questions/138511/what-are-java-command-line-options-to-set-to-allow-jvm-to-be-remotely-debugged) I get an exception when trying to read如下：

```
BufferedReader mainProcessConsoleOutput = new BufferedReader(new InputStreamReader(mainSimulation.getInputStream())); 
```

再往下：

```
if(!(line = mainProcessConsoleOutput.readLine()).equals("someText")) 
```

例外情况如下：

```
Main Process: Exception in thread "main" java.lang.NoClassDefFoundError: /Users/...[path].../build/classes
Main Process: Caused by: java.lang.ClassNotFoundException: .Users.[same_Path].build.classes
Main Process:   at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
Main Process:   at java.security.AccessController.doPrivileged(Native Method)
Main Process:   at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
Main Process:   at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
Main Process:   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
Main Process:   at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Exception in thread "main" java.lang.NullPointerException
at [PacketStructure].SimulationController.main(SimulationController.java:66) 
```

我将 Netbeans 用作 IDE，并且了解“附加调试器”并为其提供与传递给 ProcessBuilder 的命令中指定的端口相同的端口。但是，我不知道什么时候必须这样做——在我在子进程中指定断点之前？然后？到目前为止，我没有发现任何迹象表明我的子进程正在以任何方式与调试器进行通信。

对我来说似乎也很可疑的是，当我尝试从子进程的流中读取时抛出异常 - 而不是更早的某个地方。

我确实使用 ObjectInputStream 和 ObjectOutputStream 将序列化数据从一个进程传递到另一个进程，但由于我无法调试子进程，我不知道这是否是问题的潜在根源。

我使用 MacOs。

由于这个问题的解决方案超出了我对 Java Magic 的了解，请帮助我解决这个谜题。

谢谢，

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:50:01.360

在花了很多时间试图解决问题之后，我终于做到了：

```
ProcessBuilder builder = new ProcessBuilder(javaBin,"-agentlib:jdwp=transport=dt_socket,address=localhost:8000,server=n,suspend=y","-cp", classpath, className); 
```

通过在“-agentlib”命令之后添加“-cp”命令，显然类路径与类名正确匹配。

我应该知道传递命令的顺序很重要吗？

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:50:40.343

类路径值必须紧跟在类路径参数之后。

# python - 试图找出调用 win32com.client.Dispatch 的混合结果

> ID：14852948
> 
> 赞同：0
> 
> 时间：2013-02-13T11:52:37.507
> 
> 标签：python, python-3.x

我看到这篇文章[https://stackoverflow.com/a/5169864/2065006](https://stackoverflow.com/a/5169864/2065006)

所以我想我会做实验。有更多经验的人可以解释这些结果吗？

```
>>> import win32com.client
>>> shellobject = win32com.client.Dispatch("Wscript.Shell")
>>> print (shellobject.SpecialFolders("ProgramFiles"))

>>> print (shellobject.SpecialFolders("Common AppData"))

>>> print (shellobject.SpecialFolders("AppData"))
F:\Documents and Settings\Randy1\Application Data
>>> print (shellobject.SpecialFolders("My Music"))

>>> print (shellobject.SpecialFolders("MyMusic"))

>>> print (shellobject.SpecialFolders("AppData"))
F:\Documents and Settings\Randy1\Application Data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:35:40.163

根据 MSDN，[SpecialFolders 属性](http://msdn.microsoft.com/en-us/library/0ea7b5xe.aspx)。

可以使用以下特殊文件夹：

*   所有用户桌面
*   所有用户开始菜单
*   所有用户程序
*   AllUsersStartup
*   桌面
*   收藏夹
*   字体
*   我的文件
*   网罩
*   打印罩
*   程式
*   最近的
*   发送至
*   开始菜单
*   启动
*   模板

虽然上面的列表似乎不完整，例如 AppData 也是可用的。我们仍然可以得出结论：某些特殊文件夹不可用。

我们可以在*Windows Script Host*`WshShell`中试验对象，它比.*`win32com`*

 *```
var shell = new ActiveXObject("WScript.Shell");
WScript.Echo(shell.SpecialFolders("ProgramFiles"));
WScript.Echo(shell.SpecialFolders("AppData")); 
```

`shell.SpecialFolders("ProgramFiles")`也是一个空字符串。*

# ruby-on-rails - 在数据库表 Ruby on Rails 的表单元格中显示数据

> ID：14852951
> 
> 赞同：1
> 
> 时间：2013-02-13T11:52:52.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想显示表格中的一些数据并将其显示在表格单元格中。我有以下。

**控制器**

```
@data = HospitalBooking.where(:created_at => @date_range)
@stuff = [] 
@stuff[0] = [] 

index = 0 

@stuffs.each do |stuff|
  @rotated[0][index] = stuff.detail0
  index += 1
end 
```

不确定我是否以正确的方式进行了此操作，以及我将如何在我的视图中显示它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:12:36.703

如果我理解正确，您想在 html 表中显示查询结果。

这是您在控制器中的查询：

```
@data = HospitalBooking.where(:created_at => @date_range) 
```

在你看来

```
<table>                         
  <tr>                          
    <th>field1</th>
    <th>field2</th>
  </tr>
<% @data.each do |data| %>       #start loop
  <tr>
    <td><%= data.field1 %></td>  #column field1 in your database
    <td><%= data.field2 %></td>  #column field2 in your database
  </tr>
<% end %>                        #end loop
</table> 
```

# plsql - JasperReports：将金额转换为文字

> ID：14852952
> 
> 赞同：0
> 
> 时间：2013-02-13T11:52:57.363
> 
> 标签：plsql, jasper-reports, oracle-apex

我正在使用*iReport 4.7*。

我想用文字打印数量。

例如：
假设文本字段包含 1000，我想打印像“一千”。

有人告诉解决它的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:49:33.550

Process your datasource before passing it to the report.

Using ibm's [ICU4J](http://icu-project.org/apiref/icu4j/) you can convert amount into words by doing something like

```
double num = 2718;
    RuleBasedNumberFormat formatter = new RuleBasedNumberFormat(Locale.ENGLISH, RuleBasedNumberFormat.SPELLOUT);
    String result = formatter.format(num);
    System.out.println(result); 
```

Will print

`two thousand seven hundred eighteen`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:42:37.957

如果您使用的是 Oracle 数据库，请尝试以下操作：

```
SELECT TO_CHAR(TO_DATE($P{ParamName}, 'J'), 'Jsp')
FROM dual 
```

这说明了您通过的任何数字`$P{ParamName}`。您可以在主查询的`SELECT`子句中使用此 select 子句并使用它。

# php - 移入与 .htaccess 冲突的子目录

> ID：14852954
> 
> 赞同：0
> 
> 时间：2013-02-13T11:53:05.850
> 
> 标签：php, .htaccess, subdirectory

我的网站结构如下

*   网站
    *   公司/
        *   子目录/
        *   头文件.php
        *   内容.php
        *   页脚.php
    *   索引.php
    *   `.htaccess`

现在在我的`.htaccess`，我已经这样做`URL Re-writing`了`http://my_website/page/s/o`。现在我想进入子目录，但它以第一个参数为`page`，并且它没有进入子目录。我不能将子目录放在根目录（以避免重新定义模板结构）

下面是我的`.htaccess`文件

```
 AddDefaultCharset utf-8
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

DirectoryIndex index.php

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)/([^/]+)?$ index\.php?page=$1&s=$2&o=$3 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)?$ index\.php?page=$1&s=$2 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/?$ index\.php?page=$1 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})?$ index\.php?page=$1 [L]

ErrorDocument 404 /404 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:45:36.287

您需要弄清楚如何区分针对 index.php 的“真实”子目录请求。我假设您只有一组有限的实际子目录，并且这些子目录与`/page/s/o`方案不冲突。例如，如果`www.mysite.com/users/x/y`是一个有效的请求，你就不能有一个实际的`/users`子目录。

要过滤掉实际的以子目录为目标的请求，请创建一个“捕获”真实子目录的 RewriteRule 语句：

```
RewriteRule ^/realsubdir - [L]
RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)/([^/]+)?$ index\.php?page=$1&s=$2&o=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)?$ index\.php?page=$1&s=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]{3,20})/?$ index\.php?page=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]{3,20})?$ index\.php?page=$1 [L] 
```

替换部分中的破折号 (-) 表示：保持路径不变，即不发生替换。

# jquery - Rails 3.2.11 - 动态创建关联对象

> ID：14852961
> 
> 赞同：1
> 
> 时间：2013-02-13T11:53:37.800
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有以下型号：

**文档.rb**

```
class Document < ActiveRecord::Base

  belongs_to :order
  attr_accessible :docfile, :print_format, :user_comment, :paper_type
  has_attached_file :docfile,
                    :styles => {
                      :thumb => "100x100>"
                    },
                    :url => "/order_documents/:order_number/:style/:id.:extension",
                    :path => ":rails_root/public/order_documents/:order_number/:style/:id.:extension"

  validates_attachment_size :docfile, :less_than => 100.megabytes
  validates_attachment_content_type :docfile,
                                    :content_type => ['image/jpg', 'image/jpeg', 'image/png', 'application/zip', 'application/x-zip']

end 
```

**订单.rb**

```
class Order < ActiveRecord::Base

  belongs_to :user
  has_many :documents, :dependent => :destroy
  accepts_nested_attributes_for :documents, :allow_destroy => true

  DELIVERY_COMMENT_ROWS_SIZE = 2
  DELIVERY_COMMENT_COLS_SIZE = 40

  validates_associated :documents
  validates :delivery_street, :delivery_address, :presence => true

end 
```

我有**Orders_controller.rb：**

```
class OrdersController < ApplicationController

  def new
    @order = Order.new
    unless params[:add_document]
      @order.documents.build
    end
    respond_to do |format|
      format.html
      format.js
    end
  end

  def create
    @order = Order.new(params[:order])
    current_user.orders &lt;&lt; @order
    respond_to do |wants|
      if @order.save
        flash[:notice] = 'Заказ создан успешно.'
        wants.html {redirect_to my_orders_path}
        wants.xml { render :xml =&gt @order.to_xml }
      else
        wants.html { render :action => "new" }
        wants.xml {render :xml =&gt @order.errors}
      end
    end
  end

end 
```

**new.erb.html**用于“新”操作：

```
<%= form_for @order, :url => orders_path, :html => { :multipart => true } do |order| %>
  <%= order.fields_for :documents do |document| %>
    <%= render :partial => "add_document", :locals => {:document => document} %>
  <% end %>

  <div id="documents"></div>
  <%= link_to "add document...", new_order_path(:add_document => true), remote: true %>
  <%= submit_tag 'save order', :class => 'submit' %>
<% end %> 
```

和部分**_add_document.erb：**

```
 <%= document.file_field :docfile %>
 <%= document.select(:print_format, Document::PRINT_FORMAT) %>
 <%= document.select(:paper_type, Document::PAPER_TYPE) %>
 <%= document.text_area :user_comment, :rows => Document::USER_COMMENT_ROWS_SIZE, :cols => Document::USER_COMMENT_COLS_SIZE %> 
```

我在动态创建新文档时遇到问题（使用 JQuery）。我有**new.js.erb：**

```
$('<%= escape_javascript(render :partial => "add_document", :locals => { :document => @order.documents.build }) %>').appendTo($('#documents')); 
```

但得到错误：

```
ActionView::Template::Error (undefined method `file_field' for #<Document:0x695c3d0>) 
```

请帮忙。我必须将什么 jquery 代码写入文件 new.js.erb？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:39:08.123

问题在于 jQuery: 中的这段代码`:document => @order.documents.build`。

当您调用 partial 时，`:document => @order.documents.build`您传递的是`Document`对象的一个​​实例，而您真正想要传递的是一个`ActionView::Helpers::FormBuilder`对象。

您可能想查看[此答案](https://stackoverflow.com/a/4812936/1193642)，它可能会对您有所帮助。

另外，在我看来，您的 : 中有一个逻辑错误`OrdersController`：

这不应该：

```
unless params[:add_document]
  @order.documents.build
end 
```

变成这样：

```
if params[:add_document]
  @order.documents.build
end 
```

因为我认为您只想在`{:add_document => true}`传入时建立关系。

# angularjs - Angular 可重用函数

> ID：14852963
> 
> 赞同：3
> 
> 时间：2013-02-13T11:53:45.553
> 
> 标签：angularjs

我有几个指令需要在完成它们的操作后调用相同的函数。这个函数需要访问主控制器作用域，还要修改 DOM。这个函数应该如何以及在哪里声明？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T17:36:31.010

您应该使用服务，服务可以访问`$rootScope`，尽管将 DOM 修改保持在指令级别会更好，在某些情况下您可以这样做。

```
angular.module("myModule", [])
.factory("MyService", function ($rootScope) {
    return {
        myFunction: function () { // do stuff here }
    }
})
.directive("MyDirective", function (MyService) {
    return {
        link: function (scope, iElement, iAttrs) {
            // try do keep dom modification here, you have access to MyService,
            // let it do the algorithm and try to keep dom modification here.
            // PS: you can also inject $rootScope to directives.
        };
    };
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T12:58:58.637

如果此函数需要访问 Controller 的范围，我将使用指令中可访问的范围并将其作为参数传递，如下所示：

```
var MyDirective = function() {
    var linkFn = function(scope, element, attrs) { 
        callAwesomeFn(scope);
    };

    return {
        link: linkFn
    }
}; 
```

现在，放在哪里？

*   如果这是实用程序功能，我会放入一些实用程序名称空间，例如`MyFunctions.callAwesomeFn()`
*   如果这是一个需要与 Angular 管理的其他对象交互的组件 - 使用依赖注入并将其注入指令

# eclipse - Eclipse Juno - TFS 插件

> ID：14852971
> 
> 赞同：1
> 
> 时间：2013-02-13T11:54:09.967
> 
> 标签：eclipse, eclipse-plugin

我正在尝试为 Eclipse Juno 4.2 安装 TFS 插件，存储库是[http://dl.microsoft.com/eclipse/tfs](http://dl.microsoft.com/eclipse/tfs)

每次，我都会遇到这个错误：

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unable to write to repository: file:/C:/eclipse/.
Le chemin d’accès spécifié est introuvable
Unable to write to repository: file:/C:/eclipse/.
Le chemin d’accès spécifié est introuvable
Unable to read repository at http://dl.microsoft.com/eclipse/tfs/plugins/com.microsoft.tfs.checkinpolicies.build.nl1_11.0.0.201212121118.jar.
Le chemin d’accès spécifié est introuvable
Unable to write to repository: file:/C:/eclipse/.
Le chemin d’accès spécifié est introuvable
Unable to read repository at http://dl.microsoft.com/eclipse/tfs/plugins/com.microsoft.tfs.checkinpolicies.checkforcomments.nl1_11.0.0.201212121118.jar. 
```

它似乎无法写入磁盘？，我更改文件夹位置，检查文件夹上没有只读属性，将文件夹移动到 c:，或文档没有任何成功

我也尝试了另一个 Eclipse 版本（ helios ），但错误相同

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:48:12.473

最后，经过数小时的尝试和失败，我最终重新安装了 Java 运行时，最新版本是 Version 7 Update 13，而且 Magical，它就像一个魅力 :)

显示的错误消息只是找到解决方案的逻辑，但是现在它可以工作了

谢谢大家

# windows - 在文件中查找特定文本

> ID：14852977
> 
> 赞同：1
> 
> 时间：2013-02-13T11:54:31.727
> 
> 标签：windows, shell, command-line, windows-8

正如标题所说的那样简单......我认为我可以使用这些命令，因为该`find`命令在其帮助中所说的内容，但它对我不起作用。我错过了什么吗？

```
dir /s /f *.txt | find "READONLY" 
```

有了这个，我想在每个`.txt`文件中找到每个出现的单词“READONLY”。

**编辑：**在写这个问题时，我寻找建议并且`findstr`命令出现了。但它根本找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:06:44.753

我不确定您要做什么。

/F 选项对 DIR 命令无效。***更正*** *- 我被告知 /F 选项是 Windows 8 的一项功能。*忽略该问题，您的命令将尝试在 DIR 命令的输出中查找字符串 READONLY。除非文件夹或文件名在名称中包含文本“READONLY”，否则这种情况永远不会发生。

如果要列出文件内容中包含“READONLY”的文件，则：

```
findstr /s /m READONLY *.txt 
```

以上是区分大小写的。如果您想要不区分大小写，请添加该`/I`选项。

```
findstr /s /m /i READONLY *.txt 
```

如果要列出具有 READONLY 属性的文件（您不能修改它们），那么

```
dir /s /ar *.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:48:57.707

> 在每个 .txt 文件中查找每个出现的单词“READONLY”[从当前目录开始递归]

```
for /f "tokens=1 delims=" %f in ('dir/s/b *.txt') do findstr "READONLY" %f 
```

如果您在脚本中运行，请务必将 % 替换为 %%。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T11:58:29.080

尝试使用

```
grep -R 'READONLY' *.txt 
```

# javascript - 如何检测服务器是否关闭？

> ID：14852989
> 
> 赞同：1
> 
> 时间：2013-02-13T11:55:13.583
> 
> 标签：javascript, shutdown

如何在客户端访问带有javascript的页面期间检测服务器是否关闭？

具有永久保持活动标题的请求可以做到这一点，但问题是即使用户导航离开页面也会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:07:23.983

也许这有点幼稚，但是当 ajax 调用失败时，您可以计算响应标头的数量。例如，使用 jQuery，您可以这样做：

```
$.ajax( {
    'url': urlToTheServer,
    'success': function()
    {
        // server is up
    },
    'error': function( $xhr )
    {
        if( $xhr.getAllResponseHeaders().length < 1 )
        {
            // fair probability server is down
        }
    }
} ); 
```

我在我的开发盒上测试这个的方法是将上述内容包装在一个`setTimeout()`调用中（比如说，10 秒超时）。加载页面。关闭服务器。然后等待超时到期并执行ajax请求。

PS.：`$xhr.getAllResponseHeaders()`返回一个换行符分隔的标题字符串，而不是标题的数组或对象。起初我忽略了这一点，但是，这不会改变脚本的结果。如果 的字符串长度`$xhr.getAllResponseHeaders()`小于`1`，则不存在响应标头。

# ruby-on-rails - rails 3中的会话重定向问题

> ID：14852990
> 
> 赞同：1
> 
> 时间：2013-02-13T11:55:14.440
> 
> 标签：ruby-on-rails, ruby, session, redirect, heroku

我在 Rails 3 中使用会话时遇到了一点麻烦。我将首先详细介绍我的一些工作环境。

我有一个托管在 heroku 上的应用程序，假设您的 URL 是**[http://myapp.herokuapp.com](http://myapp.herokuapp.com)**

我有一个**CNAME**指向 heroku 的域，假设它是**[http://www.myapp.com](http://www.myapp.com)**

当我从我的应用程序向客户端发送一封电子邮件时，它包含一个指向应用程序受限区域的 url，那么完成的方式是：

*[http://www.myapp.com](http://www.myapp.com) -> 电子邮件 -> [http://www.myapp.com/secret](http://www.myapp.com/secret)*

但是如何将用户重定向到**[http://www.myapp.com/log_in的秘密区域](http://www.myapp.com/log_in)**

这就是问题所在：Rails 保存了应用程序的实际 URL，在本例中为*[http://myapp.herokuapp.com](http://myapp.herokuapp.com)*，登录后它将用户重定向到*[http://myapp.herokuapp.com/secret](http://myapp.herokuapp.com/secret)*！我不想要它，希望它继续在*[http://myapp.com](http://myapp.com)领域。*

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:06:08.770

尝试这个 ：

```
redirect_to secret_path( host: 'myapp.com' ) 
```

或者

```
redirect_to url_for( action: 'my_action', host: SOME_DEFAULT_HOST ) 
```

**编辑**

我不确定我是否很好地理解了您的问题-您的意思是您*将 URI 保存*在数据库中吗？

恕我直言，保存硬编码的网址可能会很麻烦。

如果可能，请尝试保存解构的 URI 部分而不是完整的字符串路径，以便`url_for`稍后将 args 发送到或任何路径助手（并根据需要对其进行调整，或者立即更新整个表以更改主机）。

如果没有，您始终可以使用您选择的任何库解析保存的 URI，然后在重定向之前对其进行调整

# lucene - 使用 Lucene 进行树搜索

> ID：14852995
> 
> 赞同：2
> 
> 时间：2013-02-13T11:55:37.317
> 
> 标签：lucene, tree, faceted-search, drilldown

我有一个描述树结构的分类索引。执行查询时，我想获取多个类别的命中数（不一定在树的同一级别）。例如，给定以下路径列表：

`[Root/Cat1, Root/Cat1/Cat12, Root/Cat3]`

我想获得这三个类别中每一个的点击数。

我一直在寻找解决方案，我知道可以发出树请求，然后通过调用获取结果`.getSubResults()`（如[API](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/facet/search/results/FacetResultNode.html#getSubResults%28%29)中所述）。但是我没有找到任何示例，我真的不知道如何实现它。到目前为止，我有以下几点：

```
 // Build query
    Query query = extendQuery(queryGenerator.generateQuery(resource));

    // Set the number of top results        
    TopScoreDocCollector tdc = TopScoreDocCollector.create(numTopDocuments, true);

    // Set a faceted search
    FacetSearchParams facetSearchParams = new FacetSearchParams();

    // Search at level of the category in interests     
    CountFacetRequest facetRequest = new CountFacetRequest(new CategoryPath("Top", '/'), numTopCategories);

    facetRequest.setResultMode(ResultMode.PER_NODE_IN_TREE);

    facetSearchParams.addFacetRequest(facetRequest);                    

    // To collect the number of hits per facet
    FacetsCollector facetsCollector = 
            new FacetsCollector(facetSearchParams, documentReader, taxonomyReader);
    try {
        // Collect the number of hits per facet
        documentSearcher
                .search(query, MultiCollector.wrap(tdc, facetsCollector));                          
        for (FacetResult res : facetsCollector.getFacetResults()){
            //this is the top lvl facet
              FacetResultNode toplvl = res.getFacetResultNode();
              System.out.println(toplvl.getLabel() + " (" + toplvl.getValue() + ")");
              for (FacetResultNode secondlvl : toplvl.getSubResults()) {
                  //second lvl facet categories
                  System.out.println("  " + secondlvl.getLabel().getComponent(1) 
                                + " (" + secondlvl.getValue() + ")");
                  for (FacetResultNode thirdlvl : secondlvl.getSubResults()) {
                      //second lvl facet categories
                      System.out.println("  " + thirdlvl.getLabel().getComponent(2) 
                                    + " (" + thirdlvl.getValue() + ")");
                  }
              }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但是，当我到达第三级时，我得到了空值。到底是怎么回事？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:59:57.503

您还必须设置：

```
facetRequest.setDepth(MAX_DEPTH_TREE); 
```