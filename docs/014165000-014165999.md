# StackOverflow 问答 14165000-14165999

# eclipselink - EclipseLink MOXy @XmlPath 移动文件后停止工作

> ID：14165006
> 
> 赞同：1
> 
> 时间：2013-01-04T21:09:05.887
> 
> 标签：eclipselink, moxy

我有这个巨大的 java 类文件，其中包含嵌套类的所有内容。在我按照我想要的方式完成所有工作后，获得了我需要的 XML 输出......我将嵌套类拆分到他们自己的类文件中。

但是，当我运行代码时，我的所有 @XmlPath 注释都将被忽略。只有来自 javax.xml.bind.annotation.* 的本机仍然有效......

好的.. wtf，所以我将所有嵌套类恢复到原来的样子，然后再次运行代码，并且@XmlPath（实际上所有MOXy 的东西都不起作用）注释都不起作用……！

我试图删除jar，关闭eclipse，重新打开，然后重新添加jar，仍然不行。

如何让 EclipseLink MOXy 再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:19:55.300

您需要确保正确配置了[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)`jaxb.properties` jar，并且在与域模型相同的包中调用了一个文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

# java - 依赖孩子的Java Swing布局？

> ID：14165010
> 
> 赞同：3
> 
> 时间：2013-01-04T21:09:15.380
> 
> 标签：java, swing, layout

我正在寻找一种简单的方法来处理以下问题：

所有 A 类物品应水平放置。所有 B 类物品应垂直布置。因此，例如：

```
AAA
乙
AA
乙
乙
AAAAAA

```

B 类项目将是具有相同行为的容器，因此整个事物将嵌套任意数量的深度。

有没有一种直接的方法来完成这个而不在 A 的集合周围放置一个容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:19:43.160

您可以使用`GridLayout`在它的行中排列 A，在它的列中排列 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T00:59:21.590

将 A 添加到 JPanel (GridLayout(1,0))

将 B 添加到 JPanel (GridLayout(0,1))

将每个 A 和 B 面板添加到 holdingPanel (BoxLayout(Y_AXIS))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:13:20.600

如果你搜索一下，你会发现一个 VerticalFlowLayout。正如我所见，您需要的是自定义布局管理器，因为您必须处理 FlowLayout 和 VarticalFlowLayout 混合。

您必须覆盖/实现基本方法：[在此处描述](http://docs.oracle.com/javase/6/docs/api/java/awt/LayoutManager.html)

我会将数据存储在二维数组/列表中作为行和列。重写 addLayoutComponent 和 removeLayoutComponent 是必须的。

我希望它有帮助！

# sdk - cognos sdk 在 cognos 安装文件夹中的位置

> ID：14165014
> 
> 赞同：3
> 
> 时间：2013-01-04T21:09:44.673
> 
> 标签：sdk, cognos

根据这篇文章， [http://www.ibm.com/developerworks/data/library/cognos/development/how_to/page565.html#download](http://www.ibm.com/developerworks/data/library/cognos/development/how_to/page565.html#download)

用于 cognos 8 的 Cognos SDK 位于文件夹中：`<cognos-directory>/sdk` 此目录在 cognos 10 中不存在。那么 SDK 组件位于何处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:46:46.097

SDK 是一个单独的组件，除了现有的 Cognos 产品安装之外，还必须下载和安装。当您将它添加到现有的 Cognos 10 安装时，它将创建并解压缩到安装根目录下的 SDK 文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-02T04:55:54.047

只是补充一下，以防有人通过搜索找到它。

该 SDK 现在包含在 Cognos 11.1.X 服务器安装中。直到这个版本，包括 11.0.X，SDK 都是单独安装的。

而且，SDK 与服务器一起安装时效果最佳。我们发现通过 Visual Studio Code 使用远程 SSH 进行开发或在我们的开发 Cognos 服务器上远程运行 Eclipse 更容易。两者都运行良好，您只需要在服务器端安装和配置它。然后，您的所有开发人员都可以使用一个实例。如果远程不可行，开发人员将需要安装和配置本地 Cognos 服务器。

# android - 在 Android 上显示 higscores 时，Scoreloop 挂在“正在连接”

> ID：14165019
> 
> 赞同：0
> 
> 时间：2013-01-04T21:10:01.880
> 
> 标签：android, libgdx, scoreloop

我尝试在 libgdx 中实现 Scoreloop。[我在这里](http://moldedbits.com/blog/2012/02/26/integrating-scoreloop-with-libgdx/)和[这里](http://rebigames.wordpress.com/2012/03/20/8-steps-for-intergrating-scoreloop-with-libgdx/)使用了一些教程。当我运行游戏并尝试使用 showcoreLoop() 显示高分时，我必须首先接受 TOS。按下“启用”（接受）窗口并显示“正在连接，请稍候”后，没有任何反应......当我最小化应用程序并重新启动它时，当我再次尝试访问高分时，我得到了 nullexception。

这里有什么帮助吗？我真的很绝望，因为几乎没有对 Scoreloop 的支持..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:53:28.227

我意识到这并不能直接回答您的问题，但从长远来看，它最终可能会为您节省大量时间。

我们在使用 Swarm（又名[SwarmConnect](http://swarmconnect.com)）作为 Android 游戏排行榜的 LibGDX 项目方面取得了一些成功。只要您在 onResume() 结束时进行初始化并记住在正确的位置调用 Swarm.setActive() 和 Swarm.setInactive()，集成就非常简单。虽然它的记录很好。

如果您访问[LibGDX 论坛](http://www.badlogicgames.com/forum)并快速搜索 SwarmConnect，您会发现很多可以提供帮助的主题链接：)。干杯!

# ruby-on-rails - 如何限制搜索结果？

> ID：14165029
> 
> 赞同：0
> 
> 时间：2013-01-04T21:10:55.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图通过作为 Communities 表中的列的genre_id 来限制结果。
但是 community_controller 的行尾显示错误。
为什么？我怎样才能解决这个问题？

**社区控制器.rb**

```
 @search = Community.search do  
            fulltext params[:search]
            paginate :page => params[:page], :per_page => 5
        end 

        @communities = @search.results

        @communities = @communities.find_by_genre_id(params[:genre]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:12:05.963

您应该观看此视频：[http ://railscasts.com/episodes/278-search-with-sunspot](http://railscasts.com/episodes/278-search-with-sunspot)

它会帮助你。

这是他使用的示例代码： 模型：article.rb

```
searchable do
  text :name, :boost => 5
  text :content, :publish_month
  text :comments do
    comments.map(&:content)
  end
  time :published_at
  string :publish_month
end

def publish_month
  published_at.strftime("%B %Y")
end 
```

搜索算法：

```
@search = Article.search do
    fulltext params[:search]
    with(:published_at).less_than(Time.zone.now)
    facet(:publish_month)
    with(:publish_month, params[:month]) if params[:month].present?
  end
  @articles = @search.results 
```

我不熟悉太阳黑子，但看起来您的错误（无法识别的字段）可以通过在模型中包含 :genre_id 来解决，如下所示：

```
searchable do
  integer :genre_id
  ...
end 
```

所以你的新搜索看起来像：

```
@search = Community.search do  
  fulltext params[:search]
  with(:genre_id, params[:genre_id])
  paginate :page => params[:page], :per_page => 5
 end 
```

# c++ - 如何转换 std::vector 字符**？

> ID：14165038
> 
> 赞同：1
> 
> 时间：2013-01-04T21:11:37.790
> 
> 标签：c++

我正在尝试将 c 字符串向量转换为 c 字符串数组。我试过这个，但它似乎不能正常工作：

```
int glfxGetProgramList(int effect, char** progList, int* count)
{
    std::vector<char*> list;
    gEffects[effect]->GetProgramList(list);
    fprintf(stderr, "Lib Output: %s\n", list[0]);
    progList = &list[0];
    int size = list.size();
    memcpy(count, &size, sizeof(int));
} 
```

从 stderr 返回的调试输出在函数内部是正确的。但是，当我在项目中使用此函数并尝试输出列表中的第一项时，它会因分段错误而崩溃。这是我项目中的代码：

```
char ** list;
int size;
glfxGetProgramList(effect, list, &size );
fprintf(stderr, "Output: %s\n", list[0]); 
```

知道我做错了什么吗？

编辑：

我想我将不得不从问题的根源开始。有一个私有地图数组，我试图从中获取名称列表。下面是 GetProgramList 的代码：

```
unsigned Effect::GetProgramList(vector<char*>& list) const
{
    for(map<string,Program*>::const_iterator it=m_programs.begin(); it!=m_programs.end(); ++it)
        list.push_back( (char*)it->first.c_str() );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:18:12.400

您可以`char**`像这样访问（但前提是您的编译器支持[C++11](http://en.wikipedia.org/wiki/C%2B%2B11)）：

```
 progList = list.data(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:12:55.147

你为什么要投？

第一个`char *`元素的地址自动为 a `char **`，无需强制转换。如果这不起作用，请发布`progList`. 如果向量为空，这将导致未定义的行为并可能导致您的应用程序崩溃。确保`list.size()`大于 0（或`!list.emty()`- 更好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:08:35.747

这：

```
 progList = &list[0]; 
```

应该可以完美运行。

但是因为：

```
std::vector<char*> list; 
```

是函数的局部变量，它仅在函数处于活动状态时有效。一旦函数返回指针变得无效（因为向量不再存在）。

我提到这一点的原因是您似乎试图在`progList`这里用作输出参数：

```
int glfxGetProgramList(int effect, char** progList, int* count)

// Because you call like this:  
glfxGetProgramList(effect, list, &size );  // The value of list will not change
                                           // as you are passing by value.

fprintf(stderr, "Output: %s\n", list[0]);  // So here list has not changed.
                                           // But also note it would not have worked
                                           // as the object you were trying to make it 
                                           // point at would have gone out of scope. 
```

不幸的是（或幸运的是）因为这些参数没有引用您在本地所做的任何更改都不会影响函数外部的原始值。

所以你需要修复几件事：

*   使向量持续时间长于对函数的调用
*   通过引用将列表传递给函数。

尝试：

```
int glfxGetProgramList(int effect, char**& progList, int* count)
                               //        ^  pass by reference
{
    static std::vector<char*> list; // Static makes the list last past the end of the function
    list.clear();                   // Now we have to clear it each time we call to make sure
                                    // that old results do not pollute the list.

    gEffects[effect]->GetProgramList(list);
    fprintf(stderr, "Lib Output: %s\n", list[0]);

    progList = &list[0];       // Value now passed correctly
                               // back to the calling function
                               // and list will still exist.

    int size = list.size();
    memcpy(count, &size, sizeof(int));  // This copies the first value out
} 
```

# sql - 不支持接口的映射，但是Linq-Sql对象已经实现了属性

> ID：14165039
> 
> 赞同：3
> 
> 时间：2013-01-04T21:11:43.243
> 
> 标签：sql, linq, linq-to-sql, interface, linq-expressions

因此，我在 VS 中从现有数据库创建了一个 DataContext (Linq-Sql)。它有一个名为 Users 的表，因此我有一个`User`对象。特别是，我想关注`UserID`和`Username`属性。

现在，我有一个界面：

```
interface IUser
{
     int Id { get; }
     string Username { get; }
} 
```

我想创建一个部分`User`类并实现`IUser`. 这样做的原因是，我可以在许多地方将任何用户视为 IUser，而不必担心精确的用户类：

```
public partial class User : IUser
{
    public int Id
    {
         get { return UserID; }
    }
} 
```

我没有实现`Username`get 属性，因为我知道实体对象已经实现了它。

当我有一个查询时，`dc.Users.SingleOrDefault(p => p.Id == 5);`我知道这是一个错误，因为它会将该调用转换为 SQL 语句，并且它会尝试查找`Id`不存在的列 - UserID 存在。所以我理解这个映射问题。

当我查询`dc.Users.SingleOrDefault(p => p.Username == "admin")`时，它也会引发错误，但`Username`确实是数据库中的现有列，所以我的印象是不需要进行自定义/附加映射。我错过了什么？

有人可以为我指出一个关于如何与 Linq 与部分类实现自定义接口作斗争的好资料吗？

**更新问题：** 在我尝试之前，有谁知道使用我们的自定义接口“装配”datacontext.designer.cs 文件（以实现类本身而不是在单独的部分类文件中）是否有效？这样做有什么后果吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-22T06:07:38.980

我在使用泛型和 LINQ 之前遇到过这个问题，我解决它的方法是更改`p.Id == 5`​​为`p.Id.Equals(5)`并且 LINQ 能够映射查询。

关于装配自动生成的代码，我已经在我的项目中这样做了，唯一的烦恼是如果你重新生成你的 DBML 文件，你必须再次输入所有的接口。我查看了为类动态添加接口并找到了这个 SO 帖子，但我还没有尝试过：

[在 C# 中动态实现接口的最佳方法是什么？](https://stackoverflow.com/questions/18134270/what-is-the-nicest-way-to-dynamically-implement-an-interface-in-c)

无论哪种方式，现在重新输入对我们来说都是一个更好的权衡，因为我们已经能够使用这种方法在我们的实现代码中删除很多重复。

不幸的是，我对 LINQ 或 .NET 的经验不足，无法解释为什么`Equals()`不起作用`==`：)

# javascript - 用 Cakefile 编译 CoffeeScript

> ID：14165040
> 
> 赞同：0
> 
> 时间：2013-01-04T21:11:43.100
> 
> 标签：javascript, compiler-construction, coffeescript

目前我用它来编译它到一个文件：

```
task 'CurrentVillage', 'Build Current Vilage', ->
  remaining = appFiles.length
  appContents = new Array remaining  
  for file, index in appFiles then do (file, index) ->
    fs.readFile "media/coffee/#{file}.coffee", 'utf8', (err, fileContents) ->
      throw err if err
      appContents[index] = fileContents
      process() if --remaining is 0
  process = ->
    fs.writeFile 'media/coffee/frontend/VillageCanvas.coffee', appContents.join('\n\n'), 'utf8', (err) ->
      throw err if err 
```

我不让它直接编译成javascript：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:26:43.167

您需要在 a 中定义您的任务`Cakefile`，然后调用该 Cakefile。将 a放入同一目录`cake build`后，从您的咖啡脚本文件所在的目录在终端中运行。`Cakefile`这是一个简单的 Cakefile 模板。它已经编写了如下所述的构建函数：http: [//twilson63.github.com/cakefile-template/](http://twilson63.github.com/cakefile-template/)

```
build = (watch, callback) ->
  if typeof watch is 'function'
    callback = watch
    watch = false

  options = ['-c', '-b', '-o', 'lib', 'src']
  options.unshift '-w' if watch
  launch 'coffee', options, callback 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:05:06.127

康纳说了什么（得到了我的赞成）。

作为替代方案，如果您想使用“atthemomentstandardjavascriptbuildtool”，您可以将[grunt.js](http://gruntjs.com/)与[grunt-coffee 插件一起使用；-)](https://github.com/avalade/grunt-coffee)

# asp.net - CSS混乱gridview按钮？

> ID：14165046
> 
> 赞同：0
> 
> 时间：2013-01-04T21:12:25.857
> 
> 标签：asp.net, css

出于某种奇怪的原因，我放置在任何 gridview 中的所有按钮看起来都缩小了（如下图所示），即使 gridview 是默认的并且没有附加 CSS。

可能是其他一些 CSS，因为我有太多代码在这里列出（下载的免费模板）？

问题可能是什么？我该如何解决？

![在此处输入图像描述](../Images/9b8e3cc214c19d94115809f5890bef53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:41:53.297

它从父或全局输入 css 文件继承了一些样式。要知道问题到底出在哪里，请使用 IE 开发工具...选择开发工具中的按钮，然后在开发工具右侧查看未划掉的样式

# c# - 强类型对象列表到动态列表

> ID：14165048
> 
> 赞同：1
> 
> 时间：2013-01-04T21:12:32.120
> 
> 标签：c#, dynamic

好的。我正在尝试将 a`List<Product>`传递给一个方法，该方法采用泛型`List<object>`并循环它们以创建`List<dynamic>`通过反射。此方法需要能够处理其他对象的列表（即：Item、Customer、Package 等）。

然后我的想法是，我将有一个通用的动态列表，我可以通过 JSON 通过网络发送。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:13:43.710

最简单的方法是只使用 LINQ 来构建一个新列表。鉴于您使用的是 .NET 4，您可以获得协方差，因此您可以使用：

```
List<object> foo = products.ToList<object>(); 
```

甚至只是：

```
List<object> foo = new List<object>(products); 
```

您不能通过*现有列表*，因为a`List<Product>`根本*不是*`List<object>`.

当然，如果你可以改变你的方法来接受一个`IEnumerable<object>`，那会因为协方差而工作得很好。如果您只是尝试从参数集合中*读取，这可能是可行的。*

请注意，尚不清楚为什么需要然后使用反射来创建`List<dynamic>`-您的方法实际上在做什么？为什么你不能只使用：

```
List<dynamic> foo = new List<dynamic>(products); 
```

# zend-framework2 - zf2, application.config -> config_glob_paths, yaml 格式

> ID：14165049
> 
> 赞同：1
> 
> 时间：2013-01-04T21:12:37.230
> 
> 标签：zend-framework2

我已经使用 YAML 格式的配置文件设置了我的洞应用程序。当涉及到 application.config 文件中 module_listener_options 的全局路径时，它会以以下堆栈跟踪结束所有乐趣：

## 应用程序配置

```
modules:
- # ... a few different modules

module_listener_options:
  config_glob_paths:
  - config/global/{,*.}{shared,private}.yaml

  module_paths:
  - # ... the module paths 
```

## 堆栈跟踪

```
Fatal error:  Uncaught exception 'Zend\Config\Exception\RuntimeException' with message 'You didn't specify a Yaml callback decoder' in /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/Config/Reader/Yaml.php:100
Stack trace:
#0 /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/Config/Factory.php(81): Zend\Config\Reader\Yaml-&gt;fromFile('config/global/d...')
#1 /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/ModuleManager/Listener/ConfigListener.php(356): Zend\Config\Factory::fromFile('config/global/d...')
#2 /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/ModuleManager/Listener/ConfigListener.php(152): Zend\ModuleManager\Listener\ConfigListener-&gt;addConfigByPath('config/global/{...', 'glob_path')
#3 [internal function]: Zend\ModuleManager\Listener\ConfigListener-&gt;onLoadModulesPost(Object(Zend\ModuleManager\ModuleEvent))
#4 /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(464): call_u in /home/erik/Projects/zf2/vendor/zendframework/zendframework/library/Zend/Config/Reader/Yaml.php on line 100 
```

我想我需要向 YAML 阅读器注入一个 YAML 解码器。我在代码的其他部分使用[Symfonys YAML 组件](http://symfony.com/doc/2.0/components/yaml.html)来完成此任务。

**所以我要问你的问题**是如何将这个解码器注入工厂？或者，如果有其他方法可以做到这一点，那么还有什么办法可以解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:05:42.930

所以我发现我可以通过将以下`init`函数添加到 Module 类来解决这个问题：

```
use Symfony\Component\Yaml\Parser as YamlParser,
    Zend\Config\Factory as ConfigFactory;

// ...

public function init()
{
  // This first line is just for the shorter yml suffix
  ConfigFactory::registerReader( 'yml', 'yaml' );

  // Adding the parser to the reader
  $decoder = new YamlParser();
  $reader  = ConfigFactory::getReaderPluginManager()->get( 'yaml' );
  $reader->setYamlDecoder( [ $decoder, 'parse' ] );
} 
```

* * *

不过，我仍然对解决此问题的替代方法非常感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:42:37.667

在文档中，他们为解析器使用了外部库

如果要使用外部 YAML 阅读器，则必须在类的构造函数中传递回调函数。例如，如果你想使用 Spyc 库

```
// include the Spyc library
require_once ('path/to/spyc.php');

$reader = new Zend\Config\Reader\Yaml(array('Spyc','YAMLLoadString'));
$data   = $reader->fromFile('/path/to/config.yaml'); 
```

您也可以不带任何参数地实例化 Zend\Config\Reader\Yaml，然后使用 setYamlDecoder() 方法指定 YAML 阅读器。

[http://framework.zend.com/manual/2.0/en/modules/zend.config.reader.html](http://framework.zend.com/manual/2.0/en/modules/zend.config.reader.html)

这个解决方案为我解决了这个问题，因为我暂时不使用任何其他 yaml 解析器

# java - 如何用java中的字典替换单词中的字符？

> ID：14165050
> 
> 赞同：-2
> 
> 时间：2013-01-04T21:12:43.390
> 
> 标签：java, string, collections, replace, character

我有话，例如：

```
it
your
reality
real
our 
```

以及某种字典，其中每个字符都由数字表示，这里是：

```
1 ij    2 abc   3 def
4 gh    5 kl    6 mn
7 prs   8 tuv   9 wxy
        0 oqz 
```

我需要的是 - 用数字表示单词，如下所示：

```
it      -> 18
your    -> 9087
reality -> 7325189
real    -> 7325
our     -> 087 
```

我知道我应该为此使用集合，但是哪一个？**我是java的新手，**所以欢迎任何例子！

**更新：**在 php 中有[str_replace](http://php.net/manual/en/function.str-replace.php)函数可以将数组作为第一个参数 - 将搜索什么，第二个参数 - 将替换什么，java中有什么函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:16:38.023

使用 a`Map<Character, Integer>`将每个字符与其数字相关联。然后遍历单词的字符，获取相应的数字，并将其附加到 StringBuilder。

您也可以简单地使用一个由 26 个元素组成的数组，其中包含与每个字母相关的数字。要获取给定字符的索引，您只需使用

```
int index = theChar - 'a'; 
```

它会更有效率，但可能会有点不可读。

# javascript - TinyMCE Spellchecker Rails 不工作

> ID：14165052
> 
> 赞同：1
> 
> 时间：2013-01-04T21:12:49.180
> 
> 标签：javascript, ruby-on-rails, tinymce

我目前正在使用[https://github.com/spohlenz/tinymce-rails](https://github.com/spohlenz/tinymce-rails)找到的 tinymce-rails gem ，我无法让拼写检查器初始化。TinyMCE 编辑器可以正常工作。

Javascript：

```
tinyMCE.init({
  mode: "specific_textareas",
  editor_selector: "tinymce",
  theme: "advanced",
  theme_advanced_toolbar_location: "top",
  theme_advanced_toolbar_align: "left",
  theme_advanced_statusbar_location: "bottom",
  theme_advanced_buttons1: "bold,italic,underline,bullist,numlist",
  theme_advanced_buttons3: "tablecontrols,fullscreen,spellchecker",
  plugins: "table,autoresize,fullscreen,spellchecker",
  width: "100%",
  height: 400,
  autoresize_min_height: 400,
  autoresize_max_height: 800,
  language:"en",
  spellchecker_languages: "+English=en"
}); 
```

erb`<%= f.text_area :completed, :class => "tinymce", :size => 500 %>`生成以下内容：

```
<body id="tinymce" class="mceContentBody " contenteditable="true" onload="window.parent.tinyMCE.get('report_completed').onLoad.dispatch();" spellcheck="false" style="overflow-y: hidden; padding-bottom: 50px;" dir="ltr"> 
```

我注意到拼写检查字段是错误的，但我不确定为什么，或者这实际上与问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:33:18.837

[这篇文章](http://webonrails.com/2008/08/08/configuring-tinymce-spellchecker-with-rails-application/)和[这篇文章](http://hasham2.blogspot.com/2008/02/getting-tinymce-30-spellchecker-to-work.html)表明它比仅仅将它添加到插件列表和设置语言更复杂一些。

两篇文章都建议使用`aspell`检查拼写，将行添加`:spellchecker_rpc_url => "/users/spellchecker",`到 TinyMCE 配置，并编写一些自定义控制器代码。

我希望这些链接对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T21:56:33.923

Possible duplicate: [TinyMCE 4.0.5 spell check not working](https://stackoverflow.com/questions/18626276/tinymce-4-0-5-spell-check-not-working/21173658#21173658)

According to what I've found elsewhere, the spellchecker plugin was powered by Google service - which has been retired. So at this time there does not appear to be an integrated TinyMCE spellchecker solution.

However, you CAN enable the browser's built-in spellchecker by doing the following:

```
tinymce.init({
    browser_spellcheck : true,
}); 
```

Be sure to remove spellchecker from your toolbar and your plugins list.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-10T09:57:55.017

只需将其添加到我的`config/tinymce.yml`

```
browser_spellcheck:
  - true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-04T11:47:11.247

我最终使用了@James Chevalier[链接](https://hasham2.blogspot.com/2008/02/getting-tinymce-30-spellchecker-to-work.html)之一中的建议，并按照[TinyMCE v4 文档](https://www.tiny.cloud/docs-4x/plugins/spellchecker/)编写了以下内容：

```
# config/routes.rb

post 'tinymce/spellcheck' 
```

```
# app/controllers/tinymce_controller.rb

class TinymceController < ApplicationController
  skip_forgery_protection

  respond_to :json

  def spellcheck
    suggestions = check_spelling_new(
      spellcheck_params[:text],
      spellcheck_params[:lang]
    )

    render json: {words: suggestions}
  end

  private

  def spellcheck_params
    params.permit(:method, :lang, :text)
  end

  def check_spelling_new(text, lang)
    suggestions = {}

    spell_check_response = `echo "#{text}" | aspell -a -l #{lang}`

    if spell_check_response.present?
      spelling_errors = spell_check_response.split(' ').slice(1..-1)

      spelling_errors.length.times do |i|
        spelling_errors[i].strip!

        if spelling_errors[i].to_s.start_with?('&')
          match_data = spelling_errors[i + 1]
          suggestion_count = spelling_errors[i + 2].to_i

          suggestions[match_data] ||= []

          suggestion_count.times do |k|
            suggestions[match_data] << spelling_errors[i + k + 4].gsub(',', '')
          end
        end
      end
    end

    suggestions
  end
end 
```

```
// tinymce.js

tinymce.init({
  ...,
  spellchecker_rpc_url: '.../tinymce/spellcheck'
}); 
```

当然，您必须安装[aspell](https://zoomadmin.com/HowToInstall/UbuntuPackage/aspell)和所需的字典。

我不建议为新项目这样做，按照@wloescher 和@Ruby Racer 所说的去做。我只为必须支持它的遗留项目这样做。

# c# - 为什么列表 闪电总是包含 0 个项目为空？

> ID：14165058
> 
> 赞同：-3
> 
> 时间：2013-01-04T21:13:10.467
> 
> 标签：c#

在 Form1 中，我在表单顶部有这个：

```
Lightnings_Extractor.PDF pdf1; 
```

然后在`Form1`我的构造函数中：

```
pdf1 = new Lightnings_Extractor.PDF(); 
```

然后在`Form1`我的底部：

```
private void deleteSelectedLightningsToolStripMenuItem_Click(object sender, EventArgs e)
{

    if (MessageBox.Show("Are you Sure you want to delete " + Lightnings_Extractor.ListBoxControl.counter +  " files ? Click Yes to Confirm and No to continue", "WinForm", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
    {

    }
    else
    {
           for (int i = 0; i < pdf1.Lightnings.Count; i++)
            {

            }
    }
} 
```

我看到`Lightnings`里面有物品。
但是当我点击：`deleteSelectedLightningsToolStripMenuItem_Click`在`Form1`我看到这`Lightnings`是空的计数 0。我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:18:13.527

和中的`LightningExtractor`对象是*不同*的对象。`Form1``Lightnings_Mode`

 *您需要传递相同的对象。*

# css - 我无法弄清楚为什么我的页面在不同的浏览器中呈现不同

> ID：14165060
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:13:12.283
> 
> 标签：css, cross-browser

我正在使用 Yahoo CSS 重置，我所有的 CSS 都使用像素值而不是像 ems 这样的相对度量。**您会注意到包含表单的 div 的右下角在 Chrome 中与在 FireFox 中的位置不同。**

看看：http: [//jsfiddle.net/rhewitt/anMmX/](http://jsfiddle.net/rhewitt/anMmX/)

**铬合金：** ![铬合金](../Images/d25df038a8f92c15a2f0ec3938a4412c.png)

**火狐** ![火狐](../Images/fb57d9ea8de5c4fa5f885c91d6ddb1bd.png)

```
/*header style*/
html{
background:url(../Images/textureslice.png) repeat;
}

body {
font-family:Georgia;
color:#93b9bb;
}

/* Links */
li a{
color:#93b9bb;
text-decoration:none;
}

li a:hover {
text-decoration:underline;
color:#6b8f91;
}

/* Navigation Structure */
#nav {
width:920px;
margin:auto;
text-align:center;
padding-top:120px;
list-style-type:none;
}

#outterBox li{
display:inline-block;
padding:0 50px;
position:relative;  
}
#linksLeft{
float:left;
border-top:3px solid #93b9bb;
border-bottom:3px solid #93b9bb;
margin:60px 0 0 25px;
padding:5px 0;
}   

#linksLeft li ul {
background-color:#93b9bb;
margin-top:10px;
border-radius:6px;
}

#amy {
clear:both;
font-weight:bold;
letter-spacing:6px;
font-size:120%;
}
#talent{
font-size:70%;
}
#logo {
    float:left;
background:url(../Images/logocropped.png) no-repeat;
height:134px;
width:160px;
}

#linksRight{
float:left;
border-top:3px solid #93b9bb;
border-bottom:3px solid #93b9bb;
margin-top:60px;
padding:5px 0;
}

/* Subnavigation menu */
#linksLeft li ul li {
display:block;
padding:10px 15px;
text-align:left;
}

#subNav a{ 
color:#FFF;
}

#subNav {
position:absolute;
left:10px;
top:15px;
z-index:999;
}

#subnavborder {
margin:10px 10px;
border: 6px solid white;
border-radius:6px;
}
#nav ul ul {
display:none;
}

#nav ul li:hover > ul {
display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:27:45.540

浏览器的文本大小设置为 > 100%（不是页面缩放）。这导致我的机器上的渲染不稳定，也解释了为什么它不能被其他人复制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T01:21:52.043

我也无法复制差异。

你清除了chrome中的缓存吗？尝试按 shift+f5 重新加载。

我认为它应该看起来像第二个屏幕截图。

[http://jsfiddle.net/xLTE4/](http://jsfiddle.net/xLTE4/)

调整按钮 css 正确属性，它在两个浏览器中都应该没问题，至少它适用于我。

还可以考虑在没有绝对定位的情况下进行这种布局。

```
#submitBtn{
    position:absolute;
    right:45px;
    top:430px;
    width:80px;
} 
```

# mysql - 我如何找到一个确切的单词而不是单词的一部分？

> ID：14165062
> 
> 赞同：3
> 
> 时间：2013-01-04T21:13:11.983
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL - 如何使用 LIKE 搜索完全匹配的单词？](https://stackoverflow.com/questions/5743177/mysql-how-to-search-for-exact-word-match-using-like)

例如，如果我试图获取带有单词“ever”的行，我可以这样做......

```
SELECT * FROM 'table' WHERE `title` LIKE %ever% 
```

但这也会为我提供带有“永远，然而，永远”字样的标题的结果。

我怎样才能只找到包含“ever”作为自己的单词的标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:15:38.577

使用[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)正则表达式`[[:<:]]word[[:>:]]`在搜索词周围使用单词边界进行匹配：

```
SELECT * FROM `table` WHERE `title` REGEXP '[[:<:]]ever[[:>:]]' 
```

请注意，默认情况下这是不区分大小写的。为了区分大小写，您需要在`BINARY`模式下匹配它：

```
SELECT * FROM `table` WHERE `title` REGEXP BINARY '[[:<:]]ever[[:>:]]' 
```

由于它不能使用索引，因此在大型表上性能可能会很差。

**编辑**：对不起，我在那里有 PCRE 边界，MySQL 不支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:19:44.580

您可以使用[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)和`[[:<:]]`和`[[:>:]]`字边界标记：

```
SELECT *
FROM table 
WHERE keywords REGEXP '[[:<:]]ever[[:>:]]' 
```

# jquery - 即使在 Ctrl-F5 之后，动态生成的 HTML 元素中的图像仍会被缓存

> ID：14165064
> 
> 赞同：0
> 
> 时间：2013-01-04T21:13:14.757
> 
> 标签：jquery, ajax, browser-cache

用IE 中的 + 或`Ctrl`Chrome中的++刷新页面后，大多数图像也会刷新，但从动态生成的 HTML 元素（通过 AJAX/jQuery）引用的少数图像则不会。动态 DOM 更新后获取的图像似乎总是命中缓存，即使页面是硬刷新的。`F5``Ctrl``Shift``R`

小提琴示例：http: [//jsfiddle.net/dhDju/4/](http://jsfiddle.net/dhDju/4/) （并使用 Chrome / IE 开发人员工具中的“网络”选项卡。）

这在 Chrome 和 IE 中是一致的 - Chrome 将显示“来自缓存”的图像请求，而 IE 根本不会显示它。似乎硬刷新不适用于页面上的后续 DOM 修改。

因此，除非我明确清除缓存，否则对这些图像的更改不会生效。

在使用 requires.js 时，我偶尔也会在脚本中看到这一点——在这种情况下，`<script>`标签也是动态生成的。

知道为什么会发生这种情况，或者如何解决？

cache-control/max-age 标头似乎对动态元素无关紧要。我的 QA 服务器没有缓存控制或过期标头，而动态元素仍然存在这个问题。我看到的主要区别是，如果没有缓存标头，“正常”`<img>`资源也将在使用 F5 或 Ctrl+R 软重新加载时使用条件 GET/304 未修改响应刷新。

我熟悉在发布后重命名文件的想法 - 这并不理想，因为这也会影响每个构建上的开发和 QA 服务器。每次构建后都必须告诉测试人员清除缓存也很烦人。所以我想知道是否有办法解决根本原因。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:18:29.853

我经常将网站版本值附加到 CSS、JS 和图像文件中。然后在更新后我可以增加版本，浏览器将加载最新的文件。例如：

```
<img src="picture.jpg?v=1.1"> 
```

# java - 抽象类的私有字段不能在子类中访问

> ID：14165066
> 
> 赞同：4
> 
> 时间：2013-01-04T21:13:18.040
> 
> 标签：java

我的类代表了我的简单游戏中的每个对象（玩家、敌人、光束等——它们都有很多共同点，比如速度、位置、dmg）。所以我创建了一个名为 Thing 的类。这是它的样子：

```
public abstract class Thing {
    private Image image;
    private float x;
    private float y;
    private float speed;
    private final int WIDTH;
    private final int HEIGHT;

    public Thing(String filename, float x, float y, float speed) {
        try {
            Image image = ImageIO.read(new File(filename));
        } catch (Exception e) {}
        this.x = x;
        this.y = y;
        this.speed = speed;
        WIDTH = image.getWidth(null);
        HEIGHT = image.getHeight(null);
    }

    //Zwraca ksztalt do sprawdzania czy contains...
    public Rectangle2D getShade() {
        return new Rectangle2D.Float(x, y, WIDTH, HEIGHT);
    }

    public Image getImage() {
        return image;
    }

    public Point2D getPoint() {
        return new Point2D.Float(x, y);
    }

    public float getX() {
        return x;
    }

    public float getY() {
        return y;
    }
} 
```

我扩展了 Player 类：

```
public class Player extends Thing {
    public Player(String filename, float x, float y, float speed) {
        super(filename, x, y, speed);
    }

    public void moveToPoint(Point2D targetPoint) {
        int targetX = (int)targetPoint.getX();
        int targetY = (int)targetPoint.getY();
        if ( ((int)x+20 < targetX+3) && ((int)x+20 > targetX-3) ) {
            return;
        }
        float distanceX = targetX - x;
        float distanceY = targetY - y;
        //Dodanie 20px wymiarow statku
        distanceX -= 20;
        distanceY -= 20;
        //Ustalenie wartosci shiftow
        float shiftX = speed;
        float shiftY = speed;
        if (abs(distanceX) > abs(distanceY)) {
            shiftY = abs(distanceY) / abs(distanceX) * speed;
        }
        if (abs(distanceY) > abs(distanceX)) {
            shiftX = abs(distanceX) / abs(distanceY) * speed;
        }
        //Zmiana kierunku shifta w zaleznosci od polozenia
        if (distanceX < 0) {
            shiftX = -shiftX;
        }
        if (distanceY < 0) {
            shiftY = -shiftY;
        }
        //Jezeli statek mialby wyjsc poza granice to przerywamy
        if ( (((int)x+shiftX < 0) || ((int)x+shiftX > 260)) || ((y+shiftY < 0) || (y+shiftY > 360)) ) {
            return;
        }
        //Zmiana pozycji gracza
        x += shiftX;
        y += shiftY;
    }
} 
```

这就是问题所在，因为我的 IDE 将 x、y 和 speed 字段标记为红色，并告诉它们无法从 Player 类中访问。我试图将它们更改为私有和默认值，但之后出现错误。我究竟做错了什么？当我从扩展 Thing 的类创建新对象时，我想复制所有字段并按照构造函数中的说明初始化它们。那么如何修复呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:15:30.783

您需要使用`getX()`等`getY()`，因为`x`,`y`是class`speed`的`private`变量`Thing`。

这`Player extends Thing`并不意味着 Player 可以访问`private`字段。`Thing`提供`public` `get... set...`访问其`private`变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T21:17:20.233

将变量`x`, `y`, 和更改`speed`为 protected 或使用访问器`getX()`, `getY()`, `getSpeed()`（`getSpeed()`在这种情况下需要添加）来解决访问问题。

将它们更改为默认值后出现的错误是您正在调用`abs(...)`而不是`Math.abs(...)`. 更改 to 的所有实例`abs(...)`以`Math.abs(...)`消除新错误。

# javascript - 在 SharePoint 2010 中取消选中“向新用户发送欢迎电子邮件”的 Chrome 扩展

> ID：14165070
> 
> 赞同：1
> 
> 时间：2013-01-04T21:13:25.737
> 
> 标签：javascript, sharepoint-2010, google-chrome-extension

我无法让这个扩展做我需要做的事情。我是 Chrome 开发的新手，所以我不知道 JavaScript 控制台中是否应该出现任何错误，但我可以告诉你，那里什么也没有出现。我不知道脚本是否正在运行，但由于错误而停止。

清单.json：

```
{
  "name": "SharePoint 2010 Welcome Email Disabler",
  "version": "1.0",
  "manifest_version": 2,

  "description": "Unchecks the 'Send welcome email to new users' checkbox when you add permissions in SharePoint 2010.",

  "content_scripts": [
    {
      "matches": ["http://omitted/*/_layouts/aclinv.aspx", "https://omitted/*/_layouts/aclinv.aspx"],
      "js": ["SP2010WelcomeEmailDisabler.user.js"],
      "all_frames": true,
      "run_at": "document_idle"
    }
  ],

  "permissions": [
    "http://omitted/"   
  ]
} 
```

SP2010WelcomeEmailDisabler.user.js：

```
document.getElementById("ctl00_PlaceHolderMain_ifsSendEmail_chkSendEmail").checked = false; 
```

我认为问题在于我希望修改的元素位于没有 src 标签的 iframe 中（javascript 加载其内容），我不确定如何处理 iframe 中的内容。

如果有人成功地做到了这一点，我很想知道如何继续。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:56:20.360

您可以尝试这样的事情，而不是尝试直接获取元素。您可以在框架集合中找到它。

```
for(var i=0;i<frames.length;i++) 
{
  var frame = frames[i];  
  if(frame.document != 'undefined' && frame.document.getElementById('ctl00_PlaceHolderMain_ifsSendEmail_chkSendEmail') != null) {
    frame.document.getElementById('ctl00_PlaceHolderMain_ifsSendEmail_chkSendEmail').checked =       false;
  } 
} 
```

# php - 使用 codeigniter 处理配置变量

> ID：14165071
> 
> 赞同：0
> 
> 时间：2013-01-04T21:13:28.610
> 
> 标签：php, codeigniter

我在 codeigniter tv 网站上观看了以下视频，并希望在各个阶段使用我的应用程序，并希望使用不同的配置变量对其进行设置，以便更易于管理。

[http://codeigniter.tv/a-9/Dynamically-distinguish-between-development-staging-and-production-servers](http://codeigniter.tv/a-9/Dynamically-distinguish-between-development-staging-and-production-servers)

问题是我相信我安装了 codeigniter 文件和我的开发服务器的位置。

这是我的文件结构。任何人都看到了这样做的更好方法，因此我不必进行多次安装，而且对于生产和开发中的 codeigniter 来说，什么都不需要。

```
/
/dev
/dev/site1
/dev/site1/application
/dev/site1/system
/dev/site1/index.php

/public_html
/public_html/application
/public_html/system
/public_html/index.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:28:34.170

只要所有相关文件和路径从开发到生产都保持不变，你就应该很好。所以，你提出的结构就可以了。

# android - 不存在这样的 acos 函数

> ID：14165073
> 
> 赞同：2
> 
> 时间：2013-01-04T21:13:42.653
> 
> 标签：android, sqlite, math, geometry, trigonometry

我有问题。我想在 android 应用程序中获取谷歌地图上最近的点。不同的点/坐标存储在 sqlite 数据库中。我必须从他们那里得到最近的 5 个。我正在使用的查询是：

```
SELECT id, ( 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < 25 ORDER BY distance LIMIT 0 , 5; 
```

但我收到一个错误，即“没有这样的功能：***acos***存在”。什么是正确的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:42:52.193

SQLite 默认不支持任何三角函数，因此您不能在 SQL 查询中使用它们。

您可以获取坐标列表并在应用程序代码中处理它，或者您可以尝试使用用户定义的函数在 SQLite 中公开 Java 的三角函数（请参阅[如何在 SQLite 中创建用户定义的函数？](https://stackoverflow.com/questions/7867099/how-to-create-a-user-defined-function-in-sqlite)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:26:50.847

您可以在 C 中创建实现三角函数的扩展，例如：

```
/* sql_trig.c */
#include "sqlite3ext.h"
SQLITE_EXTENSION_INIT1;
#include <stdlib.h>

/* this bit is required to get M_PI out of MS headers */
#if defined( _WIN32 )
#define _USE_MATH_DEFINES
#endif /* _WIN32 */

#include <math.h>

#define RADIANS(d) (( d / 180.0 ) * M_PI)

static void sql_trig_sin( sqlite3_context *ctx, int num_values, sqlite3_value **values )
{
    double a = RADIANS(sqlite3_value_double( values[0] ));
    sqlite3_result_double( ctx, sin( a ) );
}

static void sql_trig_cos( sqlite3_context *ctx, int num_values, sqlite3_value **values )
{
    double a = RADIANS(sqlite3_value_double( values[0] ));
    sqlite3_result_double( ctx, cos( a ) );
}

static void sql_trig_acos( sqlite3_context *ctx, int num_values, sqlite3_value **values )
{
    double a = sqlite3_value_double( values[0] );
    sqlite3_result_double( ctx, acos( a ) );
}

static void sql_trig_radians( sqlite3_context *ctx, int num_values, sqlite3_value **values )
{
    sqlite3_result_double( ctx, RADIANS(sqlite3_value_double( values[0] ) ));
}

int sqlite3_extension_init( sqlite3 *db, char **error, const sqlite3_api_routines *api )
{
    SQLITE_EXTENSION_INIT2(api);

    sqlite3_create_function( db, "sin",1,
        SQLITE_UTF8, NULL, &sql_trig_sin, NULL, NULL );
    sqlite3_create_function( db, "cos",1,
        SQLITE_UTF8, NULL, &sql_trig_cos, NULL, NULL );
    sqlite3_create_function( db, "acos",1,
        SQLITE_UTF8, NULL, &sql_trig_acos, NULL, NULL );

    return SQLITE_OK;
} 
```

现在您可以将其编译为共享库：

```
$ gcc -c -fPIC sql_trig.c
$ ld -shared -o sql_trig.so sql_trig.o -lm 
```

并加载它`SELECT load_extension('./sql_trig.so')`

# sql - DataGridView 和 BindingSource 计时器问题

> ID：14165078
> 
> 赞同：1
> 
> 时间：2013-01-04T21:13:52.543
> 
> 标签：sql, vb.net, timer, bindingsource

我有一个`DataGridview`显示数据的一个`TextBox`，一个允许我`BindingSource`使用 SQL 查询过滤以根据输入字符串显示数据的一个。这一切工作正常，除了一旦我过滤了我拥有`DataGridView`的计时器功能将它重置回来，所有数据都将再次显示。计时器是`1000ms`基于基础设置的，因此它将显示过滤结果一秒钟，然后恢复。

这是我的代码：

```
Imports System.Data.OleDb

Public Class Form1

    Dim duraGadgetDB As String = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source = C:\Users\Dave\Documents\duraGadget.mdb;"
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim sql As String = "SELECT * FROM duragadget"
        Dim connection As New OleDbConnection(duraGadgetDB)
        Dim dataadapter As New OleDbDataAdapter(sql, connection)
        Dim ds As New DataSet()
        connection.Open()
        dataadapter.Fill(ds, "dura")
        connection.Close()
        DataGridView1.DataSource = ds
        DataGridView1.DataMember = "dura"
        DataGridView1.Columns(5).Width = 300 
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        insert.Show()
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Dim currentRowID As Integer
        Dim scrollPosition As Integer = DataGridView1.FirstDisplayedScrollingRowIndex
        Try
            If DataGridView1.CurrentRow IsNot Nothing Then

                currentRowID = DataGridView1.CurrentRow.Index

                Dim sql As String = "SELECT * FROM duragadget"
                Dim connection As New OleDbConnection(duraGadgetDB)
                Dim dataadapter As New OleDbDataAdapter(sql, connection)
                Dim ds As New DataSet()
                connection.Open()
                dataadapter.Fill(ds, "dura")
                connection.Close()
                DataGridView1.DataSource = ds
                DataGridView1.DataMember = "dura"
                DataGridView1.CurrentCell = DataGridView1.Item(1, currentRowID)
            End If
        Catch ex As Exception

        End Try
        DataGridView1.FirstDisplayedScrollingRowIndex = scrollPosition
    End Sub

    Private Sub txtSearchOnSku_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSearchOnSku.TextChanged
        Dim currentRowID As Integer
        Dim scrollPosition As Integer = DataGridView1.FirstDisplayedScrollingRowIndex
        Try
            If DataGridView1.CurrentRow IsNot Nothing Then
                currentRowID = DataGridView1.CurrentRow.Index
                Dim sql As String = "SELECT * FROM duragadget"
                Dim connection As New OleDbConnection(duraGadgetDB)
                Dim dataadapter As New OleDbDataAdapter(sql, connection)
                Dim ds As New DataSet()
                Dim dsView As New DataView
                Dim bs As New BindingSource()
                connection.Open()
                dataadapter.Fill(ds, "dura")
                connection.Close()
                dsView = ds.Tables(0).DefaultView
                bs.DataSource = dsView
                bs.Filter = "skuNo LIKE'" & txtSearchOnSku.Text & "*'"
                DataGridView1.DataSource = bs
                DataGridView1.CurrentCell = DataGridView1.Item(1, currentRowID)
            End If
        Catch ex As Exception
        End Try
        DataGridView1.FirstDisplayedScrollingRowIndex = scrollPosition
    End Sub
End Class 
```

谁能告诉我如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:33:05.953

假设您的意思是，如果您在文本框中输入了一个值来过滤结果，那么您不希望计时器触发并取消过滤它们......

您可以在 Timer1_Tick 例程中检查 TextBox 的内容；

```
If txtSearchOnSku.Text <> "" Then Exit Sub 
```

或者您可以在 txtSearchOnSku_TextChanged 例程中禁用计时器；

```
If txtSearchOnSku.Text <> "" Then 
   Timer1.Stop
Else
   Timer1.Start
End If 
```

或者，如果您想根据您的搜索每秒更新一次结果，您可以在 Timer1_Tick 例程中包含过滤代码。

快速点，那里有很多重复的代码。将重复的代码重构到另一个子中可能是值得的。

# html - 我可以用什么替代 SVG 文字云？

> ID：14165079
> 
> 赞同：1
> 
> 时间：2013-01-04T21:13:54.280
> 
> 标签：html, svg, html5-canvas

最近，我在 Illustrator 中为一位客户设计了一个词云。它在徽标路径的彩色背景上使用大约 5,000 个白色人名，并包含一些矢量徽标。每个名字都小得离谱，我们希望能够在云端搜索并找到我们的名字。

我们已经成功地将它作为 SVG 放到网上 - 但是 20M 的文件可能会导致问题！

所以一切都会好起来的，直到我们同时达到 10,000 名访问者，并使我们所有的服务器崩溃并让每个人都超时。

那么，我们有什么替代方案可以让访问者快速、易于使用且无延迟？我们考虑 Canvas，但不确定用 [真的（关于遵循徽标路径的事情）] 自定义形状制作文字云是否简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:38:00.267

听起来您有 20Mb，因为名称是用路径存储/表示的。如果您将它们表示为文本，您将大大减小文件的大小，并使其可适当搜索。

假设每个名称有 13 个字符（包括中间的空格）、UTF-8 编码和 10,000 个名称，那么名称本身应该只占用 127Kb。您可能希望尝试传输 SVG 的背景和名称（JSON？），并使用脚本在浏览器中构建云。

编辑：即使您创建一个完全静态的 SVG，将文本表示为文本也会比使用路径节省大量空间。

# restkit - 带有嵌套数组的 RestKit 0.20 POST JSON

> ID：14165083
> 
> 赞同：4
> 
> 时间：2013-01-04T21:14:15.513
> 
> 标签：restkit

我有一个名为 Client 的对象，它看起来像这样。

```
@interface Client : NSManagedObject
    @property (nonatomic, retain) NSString * firstName;
    @property (nonatomic, retain) NSString * middleName;
    @property (nonatomic, retain) NSString * lastName;
    @property (nonatomic, retain) Styles *clientStyles;
@end 
```

Styles 是 Client 下的一个嵌套对象。这是一对一的关系。当它以 JSON 格式从服务器上下来时，它看起来像这样。

```
{
    "firstName": "",
    "middleName": "",
    "lastName": "",
    "firstStyle": {
        "styleId": 4,
        "name": "",
        "description": "",
        "stylingTime": "55 min",
        "stylingProductUsage": "A lot",
        "chemicals": "LOTS O'GEL",
        "deleted": false,
        "modifiedOn": 1357161168830
    }
} 
```

一切都在一个很好的单一对象中。我可以把它拉下来并将它映射到我的对象上没问题。当我需要将其返回给服务器时，问题就出现了。它需要采用这种格式。

```
{
    "firstName": "",
    "middleName": "",
    "lastName": "",
    "styles": [
        {
            "styleId": 4,
            "name": "",
            "description": "",
            "stylingTime": "55 min",
            "stylingProductUsage": "A lot",
            "chemicals": "LOTS O'GEL",
            "deleted": false,
            "modifiedOn": 1357161168830
        }] 
```

}

这是非常有问题的，因为返回映射的样式实体位于数组中，而不是一对一的。到目前为止，我已经把它作为我的 RKRequestDescriptor

```
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromDictionary:@{
     @"firstName": @"firstName",
     @"middleName": @"middleName",
     @"lastName": @"lastName",
 }];
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor  requestDescriptorWithMapping:requestMapping
                                                                               objectClass:[Client class]
                                                                               rootKeyPath:nil]; 
```

HECK 我如何创建映射，以便它返回一组具有一个值的 Style 对象？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:00:40.423

疯狂的猜测，但映射非常聪明，你不能做这样的事情：

```
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromDictionary:@{
     @"firstName": @"firstName",
     @"middleName": @"middleName",
     @"lastName": @"lastName",
 }];

RKObjectMapping *stylesMappingDescription = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromDictionary:@{
     @"properties": @"here"
 }];

[requestMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"styles.0" toKeyPath:@"styles" withMapping:stylesMappingDescription]];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor      requestDescriptorWithMapping:requestMapping
                                                                               objectClass:[Client class]
                                                                           rootKeyPath:nil]; 
```

（注意styles.0 as `fromKeyPath`）

# jquery - 如果输入字段为空，则删除类

> ID：14165084
> 
> 赞同：1
> 
> 时间：2013-01-04T21:14:18.140
> 
> 标签：jquery, html, css

在片段提供程序中有一个简单的函数，它执行以下操作。

*   在输入字段中查找电子邮件，>> 将电子邮件推送到 md5 哈希，然后>> 生成 Gravatar 的 url，然后通过 fadeIn() 将其嵌入到类中；

    ```
    $(document).ready(function(){

        $('.email').on('change', function(){
            var hash = hex_md5($('.email').val()); 
            $('.gravatar').attr('src', 'http://www.gravatar.com/avatar/' + hash + '?s=120').addClass('gravatar-glow').fadeIn("slow");
        });
    });

    HTML Part: <img src="" class="gravatar" style="display: none;"/> 
    ```

**问题**

*   如果电子邮件被删除，该类仍会显示，但这次它不使用电子邮件的 md5，而是显示默认的 Gravatar 图像。

我想要实现的是，如果输入字段为空，因为假设用户选择删除那里的电子邮件以使用不同的电子邮件，我想隐藏以前使用的类而不是显示默认 Gravatar 图像。

这是jQuery代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:26:20.983

您可以使用`toggleClass`，此方法接受一个布尔值，如果开关是`true`，则添加类，否则删除该类。

```
.toggleClass( className, switch ) 
```

```
$('.email').on('change', function(){
    var val = $.trim(this.value), hash = hex_md5(val); 
    $('#element').prop('src', function(){
         return val.length
                ? 'http://www.gravatar.com/avatar/' + hash + '?s=120'
                : 'default path to the image'
    }).toggleClass('.gravatar', val.length)
      .fadeIn("slow");
}); 
```

# cocoa - 调用 reloadData 时使用 NSTableView 无法满足的约束

> ID：14165087
> 
> 赞同：6
> 
> 时间：2013-01-04T21:14:48.070
> 
> 标签：cocoa, nstableview, osx-mountain-lion, autolayout

我有一个基于视图的 NSTableView，通过 10.8.2 上最新版本的 Xcode 中的界面生成器以图形方式设置表视图的 NSTableCellView。

当我在 NSTableView 上调用 -reloadData 时，它会崩溃：

```
Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x105cb8bf0 h=--& v=--& V:[NSTableRowView:0x105ca7020(0)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x10596aa30 h=--& v=-&- V:[GroupTableRowView]-(2)-|   (Names: GroupTableRowView:0x100185860, '|':NSTableRowView:0x105ca7020 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1058d9770 h=--& v=-&- V:|-(1)-[GroupTableRowView]   (Names: GroupTableRowView:0x100185860, '|':NSTableRowView:0x105ca7020 )>"
)

Will attempt to recover by breaking constraint 
<NSAutoresizingMaskLayoutConstraint:0x10596aa30 h=--& v=-&- V:[GroupTableRowView]-(2)-|   (Names: GroupTableRowView:0x100185860, '|':NSTableRowView:0x105ca7020 )> 
```

我无法关闭所涉及的任何视图的自动调整大小掩码转换，因为它们的约束由 NSTableView 管理。很明显，约束是冲突的，因为 NSTableRowView 不可能有 0 高度，同时仍然满足 GroupTableRowView 上指定超级视图（行视图？）之间强制填充的其他两个约束。我不确定如何解决这个问题，任何见解将不胜感激。谢谢！

**更新**：我找到了一种解决方法。`{0, 0}`问题是由于某种原因，当在表格视图上调用 -reloadData 时，NSTableRowView 被发送了一个帧大小。我`-setFrameSize:`在 NSTableRowView 子类中覆盖，并且仅在大小不是时将消息向上传递到响应者链`{0,0}`。

```
- (void)setFrameSize:(NSSize)newSize
{
    if (!NSEqualSizes(newSize, NSZeroSize))
        [super setFrameSize:newSize];
} 
```

要使用子类，请实现 NSTableViewDelegate 的[-tableView:rowViewForRow:](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSTableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTableViewDelegate/tableView%3arowViewForRow%3a)方法以返回自定义子类的实例。

```
- (NSTableRowView *)tableView:(NSTableView *)tableView rowViewForRow:(NSInteger)row
{
    id rowView = [[GroupTableRowView alloc] init];
    // configure any custom properties
    return rowView;
} 
```

如果表格视图完全在 IB 中设计，您可以简单地将一个新的 NSView 拖到您的表格视图中，并将其自定义类设置为您的 NSTableRowView 子类，并将其用户界面项标识符更改为`NSTableViewRowViewKey`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:44:23.587

我有同样的问题，它总是让我发疯..

我已经使用您的代码解决了它，但是使用子类`NSTableRowView`而不是`NSTableCellView`. 要自动让表格使用您的自定义行视图，请将自定义添加`NSView`到您的表格中。将其类设置为您的自定义行视图，重要的是，将其标识符设置为`NSTableViewRowViewKey`.

有了这个特殊的标识符，表格会自动将其用作行视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T21:29:01.583

我有一个类似的问题，但列宽而不是行高。`NSTableView`调用后立即在基于视图的 s的单元格上弹出无法满足的自动布局约束`reloadData`。在我的情况下，这是由于最小宽度设置`NSTableColumn`太小而无法包含单元格中约束的最小宽度。因此，对于任何有类似问题的人，我将首先验证这一点。

“有趣”的部分是，这只是 的问题`reloadData`，而不是正常布局的问题，因为对 的宽度有限制，`NSTableView`使其无法正常尝试创建这么小的单元格。但是当`reloadData`被调用时，它显然首先创建了一个新的单元格，其框架大小设置为最小列宽，然后再调整列的大小以适合（如果你有表格设置这样做）。因此，即使一切看起来工作正常，它仍然会在`reloadData`调用后立即吐出关于不可满足约束的错误，因为单元格视图的初始宽度对于填充等来说太小了。

故事的寓意是始终检查*最小* `NSTableColumn`宽度是否足够大以容纳单元格中的约束，即使您认为列永远不会那么小。IB 使修改约束变得容易，并且在更改单元格中的某些内容后很容易忘记重新检查列宽选项。

# java - 设计问题：静态与非静态实例变量

> ID：14165092
> 
> 赞同：2
> 
> 时间：2013-01-04T21:15:25.363
> 
> 标签：java, static, instance-variables

我正在设计一个地址簿，为了使我的 AddressBookApp 类工作（包括我的主要方法），我必须创建实例变量并将它们设为静态，以便我的类中的每个方法都能够访问我的姓名、电子邮件, 和 Phone 对象。我认为有更好的方法，但我很难知道那是什么。我应该在 main 方法中创建对象吗？实例变量是正确的方法吗？你们对我如何改进我的设计有什么想法吗？（如果您有任何其他与我的问题无关的设计建议，请告诉我）

这是我的 AddressBookApp 类的代码：

```
import java.util.Scanner;

public class AddressBookApp {

//Instance Variables
private static Name name;
private static Email email;
private static Phone phone;

//Constructor
public AddressBookApp() {
    name = new Name();
    email = new Email();
    phone = new Phone();
}

//Main method
public static void main(String[] args) {
    new AddressBookApp();

    System.out.println("Welcome to the Address Book Application\n");
    Scanner sc = new Scanner(System.in);

    int menuNumber;
    do {
        menu();

        menuNumber = sc.nextInt();
        System.out.println();

        if (menuNumber < 1 || menuNumber > 4){
            System.out.println("Please enter a valid menu number\n");
        } else if (menuNumber == 1) {
            printEntries();
        } else if (menuNumber == 2) {
            addEntry();
        } else if (menuNumber == 3) {
            removeEntry();
        } else {
            System.out.println("Thanks!  Goodbye.");
            sc.close();
            return;
        }

        continue;

    } while (menuNumber != 4);
    sc.close();
} 

/**
 * Prints out Main Menu
 */
public static void menu() {
    System.out.println("1 - List entries\n" + 
                       "2 - Add entry\n" +
                       "3 - Remove entry\n" +
                       "4 - Exit\n");

    System.out.print("Enter menu Number: ");
}

/**
 * Prints all entries in the Address Book
 */
public static void printEntries() {
    name.printNames();
    System.out.println();

    email.printEmails();
    System.out.println();

    phone.printPhoneNumbers();
    System.out.println();
}

/**
 * Adds an entry to the Address Book
 */
public static void addEntry() {
    Scanner sc = new Scanner(System.in);

    System.out.print("Enter Name: ");
    name.addName(sc.nextLine());

    System.out.print("Enter Email Address: ");
    email.addEmail(sc.nextLine());

    System.out.print("Enter Phone Number: ");
    phone.addPhone(sc.nextLine());

    System.out.println("\nRecord Saved.\n");
}

/**
 * Removes and entry from the Address Book
 */
public static void removeEntry() {
    Scanner sc = new Scanner(System.in);

    System.out.print("Please Enter the record number that you would like to remove: ");

    int records = sc.nextInt();
    name.removeNames(records - 1);
    email.removeEmail(records - 1);
    phone.removePhone(records - 1);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:19:56.907

`AddressBook`并且`AddressBookApp`应该是两个不同的类。`AddressBook`应该是这样的：

```
public class AddressBook {

//Instance Variables
private Name name;
private Email email;
private Phone phone;

//Constructor
public AddressBook() {
    name = new Name();
    email = new Email();
    phone = new Phone();
}

// more Constructors

public void setName(Name name) {
    this.name = name
}

public Name getName() {
    return name;
}
// more getters and setters 
```

`main()`然后，您的应用程序可以在您的方法中创建 this 的实例：

```
AddressBook book = new AddressBook();
book.setName(new Name("Jeff"));
//more operations on book 
```

您可以将对象传递`book`给您需要它的任何方法或继续创建新实例。您还可以将其作为应用程序类中的静态引用：

```
private static AddressBook book = new AddressBook();

// in your app class methods
book.burnBeforeReading(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:23:20.897

很简单，创建两个类：`Main`和`AddressBook`.

主要只有

```
public static void main(String[] args) {

new AddressBook().execute();
... 
```

`AddressBook`只有实例方法。

# google-chrome - websocket 总是会在 Chrome 中触发 onerror(undefined)，但不会在 Firefox 中触发

> ID：14165100
> 
> 赞同：1
> 
> 时间：2013-01-04T21:15:49.380
> 
> 标签：google-chrome, firefox, websocket, undefined, onerror

使用在 Cygwin 中运行的 websocket 服务器（C 程序），它执行握手和回显来自客户端的消息。

使用 Firefox（版本 13.0.1），双方可以很好地协同工作 - 握手、接收和回显。

但是对于 Chrome（版本 23.0.1271.97 m），在握手步骤之后，客户端总是触发 onerror - “undefined”，然后 onclose。

我想知道：Firefox 和 Chrome 处理 websocket 的方式有什么不同吗？

这是 HTML 代码（感谢 stackoverflow 家伙的贡献）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
        function connect() {
            var ws = new WebSocket("ws://localhost:8080/service");
            ws.onopen = function () {
                alert("About to send data");
                ws.send("Hello World"); // I WANT TO SEND THIS MESSAGE TO THE SERVER!!!!!!!!
                alert("Message sent!");
            };

            ws.onmessage = function (evt) {
                alert("About to receive data");
                var received_msg = evt.data;
                alert("Message received = "+received_msg);
            };
            ws.onclose = function () {
                // websocket is closed.
                alert("Connection is closed...");
            };
            ws.onerror = function (evt) {
                alert("ERROR: "+evt.data);
            };
        };

    </script>
</head>
<body style="font-size:xx-large" >
    <div>
    <a href="#" onclick="connect()">Click here to start</a></div>
</body>
</html> 
```

这是使用 Firefox 在服务器端捕获的数据日志：

```
websocket server received:
0001  47 45 54 20 2f 73 65 72 76 69 63 65 20 48 54 54 GET /service HTT
0002  50 2f 31 2e 31 0d 0a 48 6f 73 74 3a 20 6c 6f 63 P/1.1..Host: loc
0003  61 6c 68 6f 73 74 3a 38 30 38 30 0d 0a 55 73 65 alhost:8080..Use
0004  72 2d 41 67 65 6e 74 3a 20 4d 6f 7a 69 6c 6c 61 r-Agent: Mozilla
0005  2f 35 2e 30 20 28 57 69 6e 64 6f 77 73 20 4e 54 /5.0 (Windows NT
0006  20 36 2e 31 3b 20 57 4f 57 36 34 3b 20 72 76 3a  6.1; WOW64; rv:
0007  31 33 2e 30 29 20 47 65 63 6b 6f 2f 32 30 31 30 13.0) Gecko/2010
0008  30 31 30 31 20 46 69 72 65 66 6f 78 2f 31 33 2e 0101 Firefox/13.
0009  30 2e 31 0d 0a 41 63 63 65 70 74 3a 20 74 65 78 0.1..Accept: tex
0010  74 2f 68 74 6d 6c 2c 61 70 70 6c 69 63 61 74 69 t/html,applicati
0011  6f 6e 2f 78 68 74 6d 6c 2b 78 6d 6c 2c 61 70 70 on/xhtml+xml,app
0012  6c 69 63 61 74 69 6f 6e 2f 78 6d 6c 3b 71 3d 30 lication/xml;q=0
0013  2e 39 2c 2a 2f 2a 3b 71 3d 30 2e 38 0d 0a 41 63 .9,*/*;q=0.8..Ac
0014  63 65 70 74 2d 4c 61 6e 67 75 61 67 65 3a 20 65 cept-Language: e
0015  6e 2d 75 73 2c 65 6e 3b 71 3d 30 2e 35 0d 0a 41 n-us,en;q=0.5..A
0016  63 63 65 70 74 2d 45 6e 63 6f 64 69 6e 67 3a 20 ccept-Encoding:
0017  67 7a 69 70 2c 20 64 65 66 6c 61 74 65 0d 0a 43 gzip, deflate..C
0018  6f 6e 6e 65 63 74 69 6f 6e 3a 20 6b 65 65 70 2d onnection: keep-
0019  61 6c 69 76 65 2c 20 55 70 67 72 61 64 65 0d 0a alive, Upgrade..
0020  53 65 63 2d 57 65 62 53 6f 63 6b 65 74 2d 56 65 Sec-WebSocket-Ve
0021  72 73 69 6f 6e 3a 20 31 33 0d 0a 4f 72 69 67 69 rsion: 13..Origi
0022  6e 3a 20 6e 75 6c 6c 0d 0a 53 65 63 2d 57 65 62 n: null..Sec-Web
0023  53 6f 63 6b 65 74 2d 4b 65 79 3a 20 61 41 48 6e Socket-Key: aAHn
0024  63 31 77 66 6e 68 39 39 53 6d 59 67 4d 50 6b 4d c1wfnh99SmYgMPkM
0025  57 77 3d 3d 0d 0a 50 72 61 67 6d 61 3a 20 6e 6f Ww==..Pragma: no
0026  2d 63 61 63 68 65 0d 0a 43 61 63 68 65 2d 43 6f -cache..Cache-Co
0027  6e 74 72 6f 6c 3a 20 6e 6f 2d 63 61 63 68 65 0d ntrol: no-cache.
0028  0a 55 70 67 72 61 64 65 3a 20 77 65 62 73 6f 63 .Upgrade: websoc
0029  6b 65 74 0d 0a 0d 0a                            ket....

websocket server sent:
0001  48 54 54 50 2f 31 2e 31 20 31 30 31 20 53 77 69 HTTP/1.1 101 Swi
0002  74 63 68 69 6e 67 20 50 72 6f 74 6f 63 6f 6c 73 tching Protocols
0003  0d 0a 55 70 67 72 61 64 65 3a 20 77 65 62 73 6f ..Upgrade: webso
0004  63 6b 65 74 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e cket..Connection
0005  3a 20 55 70 67 72 61 64 65 0d 0a 53 65 63 2d 57 : Upgrade..Sec-W
0006  65 62 53 6f 63 6b 65 74 2d 41 63 63 65 70 74 3a ebSocket-Accept:
0007  20 74 66 48 33 51 6f 70 47 2f 61 50 78 49 4c 65  tfH3QopG/aPxILe
0008  55 75 49 39 48 38 34 46 49 35 63 77 3d 0d 0a 53 UuI9H84FI5cw=..S
0009  65 63 2d 57 65 62 53 6f 63 6b 65 74 2d 50 72 6f ec-WebSocket-Pro
0010  74 6f 63 6f 6c 3a 20 63 68 61 74 0d 0a 0d 0a    tocol: chat....

Sent OKAY.

websocket server received:
0001  81 8b 75 cb 87 1a 3d ae eb 76 1a eb d0 75 07 a7 ..u...=..v...u..
0002  e3                                              .

websocket server sent:
... 
```

使用 Chrome 记录数据：

```
websocket server received:
0001  47 45 54 20 2f 73 65 72 76 69 63 65 20 48 54 54 GET /service HTT
0002  50 2f 31 2e 31 0d 0a 55 70 67 72 61 64 65 3a 20 P/1.1..Upgrade:
0003  77 65 62 73 6f 63 6b 65 74 0d 0a 43 6f 6e 6e 65 websocket..Conne
0004  63 74 69 6f 6e 3a 20 55 70 67 72 61 64 65 0d 0a ction: Upgrade..
0005  48 6f 73 74 3a 20 6c 6f 63 61 6c 68 6f 73 74 3a Host: localhost:
0006  38 30 38 30 0d 0a 4f 72 69 67 69 6e 3a 20 6e 75 8080..Origin: nu
0007  6c 6c 0d 0a 53 65 63 2d 57 65 62 53 6f 63 6b 65 ll..Sec-WebSocke
0008  74 2d 4b 65 79 3a 20 6a 79 38 30 61 2b 50 72 73 t-Key: jy80a+Prs
0009  35 48 71 62 36 62 58 50 2f 43 58 51 51 3d 3d 0d 5Hqb6bXP/CXQQ==.
0010  0a 53 65 63 2d 57 65 62 53 6f 63 6b 65 74 2d 56 .Sec-WebSocket-V
0011  65 72 73 69 6f 6e 3a 20 31 33 0d 0a 53 65 63 2d ersion: 13..Sec-
0012  57 65 62 53 6f 63 6b 65 74 2d 45 78 74 65 6e 73 WebSocket-Extens
0013  69 6f 6e 73 3a 20 78 2d 77 65 62 6b 69 74 2d 64 ions: x-webkit-d
0014  65 66 6c 61 74 65 2d 66 72 61 6d 65 0d 0a 0d 0a eflate-frame....

websocket server sent:
0001  48 54 54 50 2f 31 2e 31 20 31 30 31 20 53 77 69 HTTP/1.1 101 Swi
0002  74 63 68 69 6e 67 20 50 72 6f 74 6f 63 6f 6c 73 tching Protocols
0003  0d 0a 55 70 67 72 61 64 65 3a 20 77 65 62 73 6f ..Upgrade: webso
0004  63 6b 65 74 0d 0a 43 6f 6e 6e 65 63 74 69 6f 6e cket..Connection
0005  3a 20 55 70 67 72 61 64 65 0d 0a 53 65 63 2d 57 : Upgrade..Sec-W
0006  65 62 53 6f 63 6b 65 74 2d 41 63 63 65 70 74 3a ebSocket-Accept:
0007  20 4d 39 2f 58 41 4e 67 35 52 32 58 4f 4d 50 49  M9/XANg5R2XOMPI
0008  4d 67 2f 54 6b 50 38 6e 5a 38 67 6f 3d 0d 0a 53 Mg/TkP8nZ8go=..S
0009  65 63 2d 57 65 62 53 6f 63 6b 65 74 2d 50 72 6f ec-WebSocket-Pro
0010  74 6f 63 6f 6c 3a 20 63 68 61 74 0d 0a 0d 0a    tocol: chat....

Sent OKAY. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-21T10:32:43.527

伙计们。

这是我对这个问题的经验。昨天，我的 php 简单聊天套接字脚本在 Firefox 和 chrome 中运行良好。今天突然它在chrome中不起作用。不知道为什么？但是在打印请求头值后，我发现请求头的长度超过了 1024 字节。（我通过在没有登录的域下的 server.php 中获取 1024 字节进行测试）。也许在我登录域之后，缓存长度被添加到了 http 请求头中。

在执行握手之前，我将 socket_read 函数的长度值增加到 5120 字节。获得完整的请求标头就足够了。我的问题解决了，因为 server.php 握手功能可以从请求标头验证 sec-websocket-key。

希望其他人照顾 websocket 请求头的长度。

问候， 尹

# jquery - 如何防止在控制器执行期间在chrome中重复提交表单

> ID：14165103
> 
> 赞同：0
> 
> 时间：2013-01-04T21:15:54.510
> 
> 标签：jquery, html, asp.net-mvc, forms, jquery-ui

表单包含发送 POST 请求的显示 PDF 按钮。`Content-disposition: inline`此发布请求显示使用或`Content-disposition: attachment`http 标头的 pdf 文件。

在 Chrome 中，双击此按钮会导致控制器出现异常，可能是因为请求同时执行了两次。

如何防止这种情况，以便双击提交按钮只执行一次请求？

环境：ASP .NET MVC2 或 Mono、jquery、jquery ui。

```
<form id="_form" method='post' target='_blank' action=''>
  .. form fields and other submit buttons
  <a href='#' id='_savepdf'>Show PDF</a>
</form>
<script type="text/javascript">
$(function () {
    $('#_savepdf').button();
    $('#_savepdf').click(function () { 
      $('#_form')[0].action= '/GetPDF'; 
      $('#_form')[0].submit(); 
     });
  });
</script> 
```

**更新**

用户可能想要关闭 pdf 文件并再次单击或双击此按钮。仅应禁用来自相同用户的并发控制器执行。如果控制器已完成，按钮可以再次单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:17:31.817

使用`e.preventDefault()`：

```
$(function () {
    $('#_savepdf').button();
    $('#_savepdf').click(function (e) {  // <---- Don't forget e
      e.preventDefault();    // <------ HERE
      $('#_form')[0].action= '/GetPDF'; 
      $('#_form')[0].submit(); 
     });
}); 
```

*编辑：*第一次没有仔细阅读这个问题，我错过了关于双击的部分。为了防止双击执行任何操作，可以尝试向链接添加数据属性：

```
<a href='#' id='_savepdf' data-clicked='false'>Show PDF</a> 
```

然后你可以在你的方法中检查并设置它：

```
$(function () {
    $('#_savepdf').button();
    $('#_savepdf').click(function () {
        var clickSent = $(this).data('clicked');

        if (clickSent == 'false') {
            $('#_form')[0].action= '/GetPDF'; 
            $('#_form')[0].submit(); 
        }
        $(this).data('clicked', 'true');
     });
}); 
```

这应该允许在您单击链接后设置属性，并且第二次单击应该跳过提交逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:25:22.980

您可以在单击后禁用该按钮，这样用户就不能多次单击。

```
$('#_savepdf').button().click(function () { 
   $(this).button({disabled: true});
   $('#_form')[0].action= '/GetPDF'; 
   $('#_form')[0].submit(); 
}); 
```

# flash - 仅在 Flash 中通过鼠标滚轮滚动。防止默认浏览器通过鼠标滚轮滚动

> ID：14165104
> 
> 赞同：4
> 
> 时间：2013-01-04T21:15:55.753
> 
> 标签：flash, firefox, mousewheel, preventdefault, stoppropagation

在我的 Firefox 自动更新到 FF17、MAC、OSX 10.8.2 后，我发现了这个问题。
有什么建议和技巧吗？

**问题：**
我使用 javascript preventDefault(); 和停止传播（）；通过鼠标滚轮取消默认滚动事件，它工作正常。但是当鼠标悬停在 flash 对象上并通过鼠标滚轮滚动时，这是行不通的。

事实上，我有一个可以通过鼠标滚轮控制的闪光灯面板。flash 对象嵌入在 html 文档的中间，您需要在浏览器中向下滚动才能查看 flash 内容。当我专注于 Flash 内容并通过鼠标滚轮滚动时，浏览器也在滚动并使 Flash 内容看不见。

**重现问题：**
1.在html的最底部放置一个简单的空白flash对象。确保您需要向下滚动才能在浏览器中查看 flash 对象。

1.  为了便于解释，您可以使用此 javascript 来停止页面上的所有鼠标滚轮活动：（如果需要，请按“空格键”到达 html 最底部的 flash 对象）

    window.addEventListener('DOMMouseScroll', wheel, false); window.addEventListener('mousewheel', wheel, false);
    window.addEventListener('MozMousePixelScroll', wheel, false); window.addEventListener('wheel', wheel, false);
    函数取消事件（e）{ e = e ？e：窗口.事件；if (e.stopPropagation)e.stopPropagation(); if (e.preventDefault)e.preventDefault(); e.cancelBubble =真；e.取消=真；e.returnValue = 假；返回假；}

2.  将鼠标悬停在 flash 对象上并使用滚轮，您会发现浏览器也在滚动。

**预期结果：**
鼠标滚轮只控制 flash 对象，而不是通过上述脚本控制浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T16:53:40.683

我遇到了一个网站，该网站在 Flash 对象中包含整个订单流程，但该对象的大小固定，不适合我的笔记本电脑屏幕。他们禁用了 Flash 对象对象（即整个页面）内外的滚动。绝对令人恼火的用户体验，我必须将鼠标指针移到最右边并使用浏览器滚动条而不是鼠标滚轮。该站点“ [https://internetorder.dominos.com.au/estore/](https://internetorder.dominos.com.au/estore/) ”（主页之后的任何页面）是否对您表现如此，如果是这样，它可能会为您提供一种将其强加给您的用户的方式。并不是说我以任何方式支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T08:09:42.093

我创建了一个小库来为你处理一切。它在默认的 Flash 播放器插件、Pepper Flash 和 MAC-OS 上运行完美（据我测试）。而且您不需要将任何 .js 文件添加到您的 HTML 文件夹中

[GIhub 仓库](https://github.com/KumoKairo/BlastedMouseWheelBlock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:21:59.723

您需要使用 javascript 来覆盖默认的鼠标滚轮行为。第一个链接在不同的浏览器中有很多示例，但是我在基于第二个示例的现代 IE 中实现了更好的运气。

[http://www.stoimen.com/blog/2009/07/01/javascript-disable-mouse-wheel/](http://www.stoimen.com/blog/2009/07/01/javascript-disable-mouse-wheel/)

[http://solidlystated.com/scripting/javascript-disable-mouse-wheel/](http://solidlystated.com/scripting/javascript-disable-mouse-wheel/)

但我不确定你为什么需要这个。如果你让你的 flash 应用程序与屏幕大小相同并缩放内部内容，则无法滚动页面。只需将闪光灯的宽度和高度设置为 100%

# c++ - 包含 std::function 的映射 和 std::function

> ID：14165105
> 
> 赞同：0
> 
> 时间：2013-01-04T21:15:58.553
> 
> 标签：c++, map, c++11, stdmap, std-function

我想要一个将字符串键映射到 a`std::function<T()>`或`std::function<T(int)>`（但对于给定键不能同时映射到两者）的映射。我收到一个编译错误，似乎没有`std::function<T(...)>`. 我希望能够使用 lambdas 作为值。

首先，以这种方式存储函数是否*安全？*其次，如果是这样，语法是什么？（从地图中检索到该函数是一元还是零元时，将知道它。）如果以上都不是，那么合理的替代方案是什么？指针扼杀了 lambda 的想法，对吧……

C++11 没问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:18:41.233

一种替代方法是将 nullary 函数包装在一个包装器 lambda 中，该包装器 lambda 接受一个参数，对它不做任何事情，并简单地调用被包装的函数。那么地图中的所有内容都是一元函数。

当然，如果你在检索时就知道函数是什么类型（我猜你必须知道，否则就没用了！），那么为什么不只使用两个映射呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:03:22.897

空`std::function`的没那么重。您可以只映射到一个包含每个结构的结构。你知道哪个是有效的，所以只能访问那个。

如果您有模板代码需要统一操作而不作为参数传入：

```
#include <string>
#include <functional>
#include <map>
#include <tuple>
#include <iostream>
#include <math.h>

template<typename T>
using my_maps = std::tuple< std::map<std::string, std::function<T()>>, std::map<std::string, std::function<T(int)>>>;

int main() {
  my_maps<double> maps;
  std::get<0>(maps)["pi"] = [](){ return 3.14; };
  std::get<1>(maps)["e^"] = [](int x){ return pow( 2.7, x ); };
  std::cout << std::get<1>(maps)["e^"](2) << "\n";
  std::cout << std::get<0>(maps)["pi"]() << "\n";
} 
```

这有两个映射，不同的是访问 a`get<0>`或 a `get<1>`。这样做的好处是，如果您选择在模板中访问两者中的哪一个，它可以静态选择 0 或 1 并使用通用代码。如果你不需要这个，只要有两个`std::map`s。

A`boost::variant`也有效（映射到`variant`0ary 或 1ary 函数的 a）。您还可以在带有枚举（复制）的 a 中使用 C++11 `union`（注意它没有默认构造函数或复制构造函数，除非您提供一个） - 基本上是一个 ghetto 。`struct``union``boost::variant`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T21:18:42.487

也许试试`boost::variant`？

```
std::map<std::string, boost::variant<std::function<T()>, std::function<T(int)> > > 
```

无论如何，这似乎是一个[XY 问题](https://meta.stackexchange.com/a/66378/181277)。你*到底*想做什么？

# video - 如何在 Azure 上的 MVC 应用程序中托管和嵌入视频？

> ID：14165110
> 
> 赞同：3
> 
> 时间：2013-01-04T21:16:27.090
> 
> 标签：video, azure, asp.net-mvc-4

我创建了一个基本应用程序并上传到 Azure。我想嵌入视频，以便用户可以从列表中进行选择并查看每个视频；例如，选择一部电影并观看它的预告片。

我在 MVC 解决方案中创建了两个文件夹：“/Posters”包含 .jpg 文件作为每个视频的背景，“/Videos”包含 .mp4 文件作为每个视频的源。

.cshtml 片段在这里：

```
 <video controls="controls" poster="@Model.PosterPath" width="640" height="360">
    <source src="@Model.VideoPath" type="video/mp4" />

        <object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="640" height="360">
            <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
            <param name="allowFullScreen" value="true" />
            <param name="wmode" value="transparent" />
            <param name="flashVars" value="config={'playlist':['@Model.PosterUrl',{'url':'@Model.VideoUrl','autoPlay':false}]}" />
            <img alt="@Model.AltText" src="@Model.PosterPath" width="640" height="360" title="No video playback capabilities" />
        </object>
</video> 
```

发布后，视频元素在那里，并且海报正确显示，但是当我单击播放按钮时，出现“找不到流”错误。

我使用 VideoPath 和 PosterPath 值的相对路径，如下所示：

```
../../Videos/myvideo.mp4 
```

VideoUrl 和 PosterUrl 值需要是绝对路径，并替换了 ':' 和 '/' 值，所以 'http://mywebsite.azurewebsites.net/Videos/myvideo.mp4' 显示如下：

```
http%3A%2F%2Fmywebsite.azurewebsites.net%2FVideos%2Fmyvideo.mp4 
```

显然路径（相对和绝对）有可能不正确；但由于海报显示正确，我想知道是否还有其他原因。

我有什么方法可以测试视频是否已正确发布？抱歉，如果这是一个非常基本的问题，这是我的第一个 Azure 应用程序 :-)

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T02:04:38.097

最好将视频放在[Azure Blob Storage](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)中。您将遇到的问题之一是每次有人流式传输您的视频时，它都会计入您的 Azure 网站的传出流量，[每天限制为 165MB](http://www.windowsazure.com/en-us/pricing/details/)。

如果您将视频存储在 Azure Blob 存储中，它会更快并且可以更好地扩展，因为您可以利用[Azure CDN](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_windowsazurecdn.aspx)，而不会导致所有流量都流向您的站点。请注意，您仍然需要支付[Azure Blob 存储费用](http://www.windowsazure.com/en-us/pricing/details/#storage)，但这可能是更便宜的途径。

这也意味着您不必在项目中保留大量媒体文件，我无法想象这对于源代码控制或部署非常有用。

有关于如何[使用 Silverlight 进行流畅的流式传输](http://msdn.microsoft.com/en-us/spazuretrainingcourse_spblobstorageazure.aspx)以及如何让[HTML5 视频正常工作](http://blogs.interknowlogy.com/2011/11/02/stream-html5-video-from-azure-blob-storage/)的教程。一个重要的注意事项，确保在存储文件时设置内容类型，否则它们只会下载而不是流式传输。

使用[HTML5 VideoJS](http://videojs.com/)的示例（也应该与上面的 Flash 播放器一起使用）：

1.  在 Azure 门户中创建 Blob 存储帐户
2.  上传您的视频。通过代码或使用[Azure 存储资源管理器](http://azurestorageexplorer.codeplex.com/)。确保设置文件“video/mp4”的内容类型
3.  添加 VideoJS css 和脚本文件，并创建一个`<video>`指向 Blob 存储文件的元素

代码：

```
<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
<script src="http://vjs.zencdn.net/c/video.js"></script>
<video class="video-js vjs-default-skin" controls
       preload="auto" width="640" height="480"
       data-setup="{}">
    <source src="http://storageaccount.blob.core.windows.net/yourvideo.mp4" type='video/mp4'>
</video> 
```

使用 Blob 存储的其他优势之一是使用[共享访问签名](http://msdn.microsoft.com/en-us/library/azure/ee395415.aspx)。这些使您可以将 blob 保密，然后生成仅在指定时间段内有效的签名 URL。这样，您的应用程序的用户可以观看视频，如果他们复制 URL 以尝试重新分发，它将过期且无用。这不会阻止他们下载和分发，但也不是 DRM 的一种形式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T01:35:16.013

让您的模型返回路径，例如“~/Videos/myvideo.mp4”，然后在视图中使用`@Url.Content(Model.VideoUrl)`.

至于视频是否已部署，首先检查您的解决方案并检查每个视频的编译属性是否设置为“内容”。这将确保它们与包一起部署。要进行验证，您应该能够浏览到[http://mywebsite.azurewebsites.net/Videos/myvideo.mp4](http://mywebsite.azurewebsites.net/Videos/myvideo.mp4)。此外，如果这是一个云服务，您可以在实例中启用远程访问和 RDP 以验证文件是否已部署。它们将位于 \sitesroot\0\videos 下的 E: 或 F: 上。

# android - 为什么我的数据库使应用程序强制关闭但在我清除数据后工作正常？

> ID：14165113
> 
> 赞同：1
> 
> 时间：2013-01-04T21:16:53.127
> 
> 标签：android, sql, database, sqlite

如果我清除我的应用程序的数据然后运行它，它工作正常。如果我重新打开或重新运行我的应用程序，它将强制关闭并抛出一个`java.lang.NullPointerException`? 错误在这部分代码中

```
private static class DbHelper extends SQLiteOpenHelper{
    public DbHelper(Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DB_TBL + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                KEY_LEVEL + " INTEGER NOT NULL, " + 
                KEY_HEALTH + " INTEGER NOT NULL, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_CRIT + " INTEGER NOT NULL, " +
                KEY_CRIT_RANGE + " INTEGER NOT NULL, " +
                KEY_CRIT_INC + " INTEGER NOT NULL, " +
                KEY_HIT_RANGE + " INTEGER NOT NULL, " +
                KEY_HIT_INC + " INTEGER NOT NULL, " +
                KEY_CHAR_IMG + " INTEGER NOT NULL, " +
                KEY_TOTAL_XP + " INTEGER NOT NULL, " +
                KEY_XP + " INTEGER NOT NULL, " +
                KEY_XP_NEEDED + " INTEGER NOT NULL, " +
                KEY_COINS + " INTEGER NOT NULL, " + 
                KEY_SMALL_POTS + " INTEGER NOT NULL, " +
                KEY_LARGE_POTS + " INTEGER NOT NULL)"
            );

        values = new ContentValues();
        values.put(KEY_NAME, "User1");
        values.put( KEY_LEVEL, 1);
        values.put(KEY_HEALTH, 10);
        values.put(KEY_CRIT, 5);
        values.put(KEY_CRIT_RANGE, 2);
        values.put(KEY_CRIT_INC, 2);
        values.put(KEY_HIT_RANGE, 2);
        values.put(KEY_HIT_INC, 0);
        values.put(KEY_TOTAL_XP, 0);
        values.put(KEY_XP, 0);
        values.put(KEY_XP_NEEDED, 5);
        values.put(KEY_COINS, 5);
        values.put(KEY_SMALL_POTS, 0);
        values.put(KEY_LARGE_POTS, 0);
        values.put(KEY_CHAR_IMG, 1);
        db.insert(DB_TBL,  null, values);

    } 
```

对此的`java.lang.NullPointerException`要点

```
 public int getLevel() {
    open();
    int level = values.getAsInteger(KEY_LEVEL);
    close();
    return level;
} 
```

这是我的堆栈跟踪

```
01-04 14:45:45.694: W/dalvikvm(20858): threadid=9: thread exiting with uncaught exception (group=0x4001e578)
01-04 14:45:45.694: E/AndroidRuntime(20858): FATAL EXCEPTION: UpdateThread
01-04 14:45:45.694: E/AndroidRuntime(20858): java.lang.NullPointerException
01-04 14:45:45.694: E/AndroidRuntime(20858):    at com.tanukiproductions.battleforchristmas.SQLiteTable.getLevel(SQLiteTable.java:110)
01-04 14:45:45.694: E/AndroidRuntime(20858):    at com.tanukiproductions.battleforchristmas.Profile.<init>(Profile.java:57)
01-04 14:45:45.694: E/AndroidRuntime(20858):    at com.tanukiproductions.battleforchristmas.MainMenuScene.onMenuItemClicked(MainMenuScene.java:37) 
```

这是`open()`和`close()`

```
public static void open() throws SQLException{
    ourDatabase = ourHelper.getWritableDatabase();
}

public static void close() throws SQLException{
    ourHelper.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:21:40.267

因为`onCreate()`在至少运行一次应用程序后创建新的 DbHelper 对象时不调用，`values`所以为 null。

如果要从表中提取此数据，请使用[`SQLiteDatabase#query()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String,%20java.lang.String%29).

```
public int getLevel() {
    int level = -1;
    open();

    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_LEVEL}, null, null, null, null, null);
    if(cursor.moveToFirst())
        level = cursor.getInt(0); // get the first column from your Select statement, i.e. KEY_LEVEL

    cursor.close();
    close();
    return level;
} 
```

但这仅返回找到的第一个“级别”，使用`_id`参数选择特定行。

# mysql - Entity Framework 和 Mysql 插入失败

> ID：14165115
> 
> 赞同：0
> 
> 时间：2013-01-04T21:17:03.947
> 
> 标签：mysql, asp.net-mvc, entity-framework

我正在尝试向 mySql db 插入行，但出现此错误。

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT
 `groups_users`.`groupID`, 
 `groups_u' at line 1 
```

该代码是

```
 groups_users ug = new groups_users();
        ug.groupID = 1;
        ug.userID = 1;
        ug.isDeleted = false;
        ug.created = DateTime.Now;
        ctx.groups_users.Add(ug);

        ctx.SaveChanges(); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:18:41.133

解决它。edmx 文件有问题。所有字段都设置为实体键。

# html - 让两个 CSS 元素并排填充它们的容器，并带有边距

> ID：14165125
> 
> 赞同：19
> 
> 时间：2013-01-04T21:17:51.857
> 
> 标签：html, css

我希望两个元素占据父元素宽度的确切百分比，但我还需要它们的边距将它们分开。我有以下标记：

```
<div class='wrap'>
  <div class='element'>HELLO</div><div class='element'>WORLD</div>
</div>​ 
```

```
.wrap {
  background:red;
  white-space:nowrap;
  width:300px;
}
.element {
  background:#009; color:#cef; text-align:center;
  display:inline-block;
  width:50%;
  margin:4px;
} 
```

正如您在[http://jsfiddle.net/NTE2Q/](http://jsfiddle.net/NTE2Q/)中看到的那样，结果是孩子溢出了包装器：

![这](../Images/d70b1bcebe2fb4bf62fa9c34b4bb9f97.png)

我怎样才能让它们适应空间？可悲的是，[`box-sizing:margin-box`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)这种情况下没有。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-04T21:17:51.857

## 技术 #1 - 现代 CSS3`calc()`

使用[CSS3 的`calc()`length](https://developer.mozilla.org/en-US/docs/CSS/calc)，您可以通过将宽度设置`.element`为：

```
.element {
  width: 49%;                     /* poor approximation for old browsers    */
  width: calc(50% - 8px);         /* standards-based answer for IE9+, FF16+ */
  width: -moz-calc(50% - 8px);    /* support for FF4 - FF15                 */
  width: -webkit-calc(50% - 8px); /* support for Chrome19+ and Safari6+     */
} 
```

### 演示：http: [//jsfiddle.net/NTE2Q/1/](http://jsfiddle.net/NTE2Q/1/)

![Hello 和 World 周围有 4px 的边距](../Images/1d74a9eb2acc7acfd5e7d694295c742e.png)

^(*有关哪些浏览器和版本支持此功能的详细信息，请参阅[http://caniuse.com/calc](http://caniuse.com/calc)。*)

* * *

## 技术 #2 - 老式包装

可以通过堆积多个元素来进行计算。对于这种情况，我们将每个“元素”包装在一个 50% 宽但具有 4px 填充的包装器中：

```
<div class='wrap'>
  <div class='ele1'>
    <div class='element'>HELLO</div>
  </div><div class="ele1">
    <div class='element'>WORLD</div>
  </div>
</div>​ 
```

```
.ele1 {
    display:inline-block;
    width:50%;
    padding:4px;
    box-sizing:border-box;          /* Make sure that 50% includes the padding */
    -moz-box-sizing:border-box;     /* For Firefox                             */
    -webkit-box-sizing:border-box;  /* For old mobile Safari                   */
}
.element {
    background:#009; color:#cef; text-align:center;
    display:block;
} 
```

### 演示：http: [//jsfiddle.net/NTE2Q/2/](http://jsfiddle.net/NTE2Q/2/)

​​​ ![Hello 和 World 周围有 4px 的边距](../Images/1d74a9eb2acc7acfd5e7d694295c742e.png)

* * *

## 技巧 #3 - 使用 (CSS) 表格

通过将包装器视为“表格”并将每个元素视为同一行中的单元格，可以得到相同的结果。有了这个，元素之间的空白并不重要：

```
<div class='wrap'>
  <div class='element'>HELLO</div>
  <div class='element'>WORLD</div>
</div>​ 
```

```
.wrap {
    background:red;
    width:300px;
    display:table;
    border-spacing:4px
}
.element {
    background:#009; color:#cef; text-align:center;
    width:50%;
    display:table-cell;
}
​ 
```

### 演示：http: [//jsfiddle.net/NTE2Q/4/](http://jsfiddle.net/NTE2Q/4/)

![边缘始终为 4px 的蓝色单元格](../Images/5772801c82e16d99cd1064e1219bd1d3.png)

请注意，最后一种技术会折叠两个元素之间的 4px 间距，而前两种技术会导致 8px 出现在两个项目之间，4px 出现在边缘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:42:37.793

你所描述的基本上是一个边界。那么为什么不将 CSS 边框属性与 background-clip 一起使用呢？只是不要忘记适当的供应商前缀。

[http://jsfiddle.net/NTE2Q/8/](http://jsfiddle.net/NTE2Q/8/)

```
.wrap {
    background-color: red;
    white-space:nowrap;
    width:300px;
}
.element {
    background:#009; color:#cef; text-align:center;
    display:inline-block;
    width:50%;
    border:4px solid rgba(0,0,0,0);
    box-sizing: border-box;
    background-clip: padding-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T21:39:27.957

对我来说，上述技术都没有足够一致的跨浏览器工作。我发现一种稍微不同的技术`display:table-cell`允许我将 2 个或更多元素彼此相邻放置。[这是它的一个例子](http://jsfiddle.net/NTE2Q/219/)。

CSS：

```
 display:table-cell;
    background:#009; color:#cef; text-align:center;
    width:22%; /*Set percentage based on # of elements*/
    border:4px solid rgb(255,0,0);/*no longer need background to be red, just make border red*/ 
```

您甚至不再需要包装器，因为 div 现在被视为`<td>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T15:23:04.693

尽管我强烈建议尽可能使用 Phorgz 的技术，但我也想提出一种只使用一个包装器并实现效果`calc()` 的老式方法。`position: relative`

# .two-blocks-by-side() LESS Mixin：

```
.two-blocks-by-side(@padding) {
  padding: @padding (@padding + @padding / 2);
  font-size: 0;

  & > div {
    position: relative;
    display: inline-block;
    font-size: initial;
    width: 50%;

    &:first-child { left: -1 * @padding / 2 };
    &:last-child { right: -1 * @padding / 2 };
  }
} 
```

[JS Bin 例子](http://jsbin.com/tezitiwa/2/edit)

# android - 如何将图像从资源保存到 Android 上的公共存储？

> ID：14165128
> 
> 赞同：0
> 
> 时间：2013-01-04T21:18:02.317
> 
> 标签：android, drawable

我想将可绘制目录中的图像保存到手机的下载文件夹中。

我正在尝试的代码是：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.tradoficial);
    File sd = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
    String fileName = "test.jpg";
    File dest = new File(sd, fileName);
    try {
        FileOutputStream out;
        out = new FileOutputStream(dest);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但是我的手机没有任何反应。有什么不对的吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:32:04.517

在`AndroidManifest.xml`文件中，`add <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`在`<manifest>`标签下

# maven - Maven 3.0.4 NoSuchMethod: ... java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf(..)

> ID：14165129
> 
> 赞同：4
> 
> 时间：2013-01-04T21:18:06.367
> 
> 标签：maven, guava

我已经安装`Maven 3.0.4`了`Homebrew`，每当我运行`mvn`命令时，我都会得到以下信息：

```
Exception in thread "main" java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf(Ljava/util/Collection;)Lcom/google/common/collect/ImmutableSet; 
```

从谷歌搜索错误似乎与某种*谷歌番石榴工具/库*有关——我对此一无所知。*我试图替换`/bin`目录中的一些罐子，`maven`但没有影响*

有什么帮助吗？我不知道问题从哪里开始，但现在我无法使用`mvn`.

这似乎是一个相关的问题，但我的项目没有直接引用`guava*.jar`文件：

[获取 gdata 服务时出现 NoSuchMethod 错误](https://stackoverflow.com/questions/9222665/nosuchmethod-error-getting-a-gdata-service)

这是完整的 mvn -X （我在当前目录中使用 pom.xml 运行）

```
 Jordans-iMac:spring-mvc-setup jordanbaucke$ mvn -X
Apache Maven 3.0.4 (r1232337; 2012-01-17 01:44:56-0700)
Maven home: /usr/local/Cellar/maven/3.0.4/libexec
Java version: 1.7.0_09, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "mac os x", version: "10.8.2", arch: "x86_64", family: "mac"
---------------------------------------------------
constituent[0]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/aether-api-1.13.1.jar
constituent[1]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/aether-connector-wagon-1.13.1.jar
constituent[2]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/aether-impl-1.13.1.jar
constituent[3]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/aether-spi-1.13.1.jar
constituent[4]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/aether-util-1.13.1.jar
constituent[5]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/commons-cli-1.2.jar
constituent[6]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-aether-provider-3.0.4.jar
constituent[7]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-artifact-3.0.4.jar
constituent[8]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-compat-3.0.4.jar
constituent[9]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-core-3.0.4.jar
constituent[10]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-embedder-3.0.4.jar
constituent[11]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-model-3.0.4.jar
constituent[12]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-model-builder-3.0.4.jar
constituent[13]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-plugin-api-3.0.4.jar
constituent[14]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-repository-metadata-3.0.4.jar
constituent[15]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-settings-3.0.4.jar
constituent[16]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/maven-settings-builder-3.0.4.jar
constituent[17]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/plexus-cipher-1.7.jar
constituent[18]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/plexus-component-annotations-1.5.5.jar
constituent[19]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/plexus-interpolation-1.14.jar
constituent[20]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/plexus-sec-dispatcher-1.3.jar
constituent[21]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/plexus-utils-2.0.6.jar
constituent[22]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/sisu-guava-0.9.9.jar
constituent[23]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/sisu-guice-3.1.0-no_aop.jar
constituent[24]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/sisu-inject-bean-2.3.0.jar
constituent[25]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/sisu-inject-plexus-2.3.0.jar
constituent[26]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/wagon-file-2.2.jar
constituent[27]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/wagon-http-2.2-shaded.jar
constituent[28]: file:/usr/local/Cellar/maven/3.0.4/libexec/lib/wagon-provider-api-2.2.jar
---------------------------------------------------
Exception in thread "main" java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf(Ljava/util/Collection;)Lcom/google/common/collect/ImmutableSet;
    at com.google.inject.internal.InstanceBindingImpl.<init>(InstanceBindingImpl.java:51)
    at com.google.inject.internal.BindingBuilder.toInstance(BindingBuilder.java:95)
    at com.google.inject.internal.InjectorShell$RootModule.configure(InjectorShell.java:329)
    at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:229)
    at com.google.inject.spi.Elements.getElements(Elements.java:103)
    at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:136)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)
    at com.google.inject.Guice.createInjector(Guice.java:94)
    at com.google.inject.Guice.createInjector(Guice.java:71)
    at com.google.inject.Guice.createInjector(Guice.java:61)
    at org.codehaus.plexus.DefaultPlexusContainer.addPlexusInjector(DefaultPlexusContainer.java:470)
    at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:196)
    at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:160)
    at org.apache.maven.cli.MavenCli.container(MavenCli.java:375)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:191)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

**更新**

降级到 Java 1.6，同时卸载 Macports。同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:30:57.337

问题是错误的 MAVEN_HOME 变量集，因为它指向错误的文件夹

```
Maven home: /usr/local/Cellar/maven/3.0.4/libexec 
```

此外，您使用的安装看起来不像 maven.apache.org 下载页面中的默认安装。

您应该从 maven.apache.org 下载[apache-maven-3.0.4-bin.tar.gz](http://archive.apache.org/dist/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz)解压缩它并将 MAVEN_HOME 指向提取的存档的根目录，例如：

```
/usr/local/apache-maven-3.0.4 
```

并将 bin 文件夹 /usr/local/apache-maven-3.0.4/bin 放入 PATH 中。如果你打电话

```
mvn --version 
```

应该打印出或多或少类似于以下内容的内容：

```
mac:~ km$ mvn --version
Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100)
Maven home: /usr/share/maven
Java version: 1.6.0_26, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.5.8", arch: "x86_64", family: "mac"
mac:~ km$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:30:12.240

看起来您安装的 Maven 版本依赖于不正确的 Guava 版本。Maven 3 显然依赖于 Guice 和 Guava，因此该错误并非完全是虚假的。这可能是您使用的 Homebrew 包的问题，​​它具有不正确的库依赖项（它似乎使用的是 Guava 的 0.9.9。您应该向包维护者提出这个问题和/或安装 tarball / zip 版本而不是使用自制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-03T18:26:53.717

可能是您的某些 jar 将依赖于 google/guava jar，如果它们不在构建路径中，或者如果它们中有多个，则可能会引发不一致，从而导致错误。一个快速的解决方案是将最新版本的番石榴添加到您的 pom

```
 <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>24.0-jre</version>
    </dependency> 
```

现在检查依赖层次结构，如果除了 guava 之外的任何 Jar 引用任何其他旧 jar 的 guava/google-collections。如果是这样，那么排除它，像这样

```
<exclusions>
            <exclusion>
                <groupId>com.google.collections</groupId>
                <artifactId>google-collections</artifactId>
            </exclusion>
 </exclusions> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T23:57:13.183

在 OS X 上遇到了类似的问题，使用 maven 3.2.2 和 Java 1.8。'mvn clean test' 失败，没有找到类定义错误。将 maven 升级到 3.3.9 并且能够成功运行 mvn 命令。

# jquery - 用jquery过滤一个div？

> ID：14165131
> 
> 赞同：0
> 
> 时间：2013-01-04T21:18:11.077
> 
> 标签：jquery, html, filter

我正在尝试过滤掉一个 div 并获取该 div 的内容：

```
newData = $(data).filter($("#content")).html(); 
```

我不断收到 [object Object] 或 null。厌倦了尝试，所以是的。

我试图完成什么：

```
$.get('/load.php?url='+url, function(data,textStatus, xhr)
{
newdata = $(data).filter("#this").html();
$("#content").html(newdata);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:21:26.720

根据[文档](http://api.jquery.com/filter/)，`.filter()`接受一个字符串，而不是一个选择器，所以使用：

```
newData = $(data).filter("#content").html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:23:42.740

你在尝试做类似的事情吗

```
<div id="foo">
    A quick brown fox
    <div id="bar">
        jumps over a lazy dog!
    </div>
</div> 
```

和脚本

```
console.log($("#foo").clone().children().remove().end().text()); 
```

参考：http: [//viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:51:34.430

仅当它是集合的顶级元素（兄弟）时才使用过滤器（除非您使用函数（）过滤有特殊要求）。如果不是，您需要使用 .find() 来查找元素吨

```
newdata = $(data).find("#this").html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T21:51:40.870

这是您可以尝试的东西，但这将追加而不是替换，因此如果内容 div 已经为空，那么您可以使用它...

```
$(data).filter($("#this")).appendTo($('#content')); 
```

或者你必须使用 replaceWith() 方法..

# css - 父母身高的 100%。所有父母身高都是动态的

> ID：14165134
> 
> 赞同：1
> 
> 时间：2013-01-04T21:18:15.250
> 
> 标签：css, html, height, stretch

我已经阅读了大量的问题和文章，但我似乎无法弄清楚这一点。

这是我的布局结构的粗略示例：

```
body  
- div 1 (header)  
- div 2 (main content wrapper)  
- - div 2a  
- - - div 2a1  
- - - div 2a2  
- - - - div 2a2a (this div needs to fit 100% height of it's parent - div 2a2)  
- - - div 2a3  
- - div 2b  
- div 3 (footer) 
```

我相信我的主要问题源于 2a 的所有子元素都向左浮动。

我找到的所有答案都在谈论在父容器中添加 100% 的高度，包括 html 和 body 标签。但我不能只是通过并添加 height: 100%; 给所有升迁的父母，因为它最终破坏了我的布局。具体来说，当我将高度 100% 添加到我的主要内容包装器 div 2 时。

这是我制作的一个[jsfiddle](http://jsfiddle.net/norsewulf/Duy9M/)，它很好地代表了我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:25:46.417

百分比高度是从父元素计算的，像素高度不是。**这意味着只有**当所有高度都需要以百分比表示时，您才需要在每个级别上设置高度。
您可以使用像素值进行设置`min-height`，`2a2`因此它不会小于该值，但它能够扩展到该值之外。然后你开始`height: 100%`了`2a2a`。这将起作用，因为父元素（2a2）具有以 px 为单位的绝对值。

**编辑：**
要使 3 个 div 填充容器的其余部分而不管内容如何，​​您必须使用**padding-bottom、margin-bottom**技巧。这是[代码笔](http://codepen.io/joe/pen/mcIvw)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:25:08.483

只需设置`2a2`'s`position: relative`和`2a2a`'s `position: absolute`。然后，您可以添加`top: 0; bottom: 0;`并将其`2a2a`拉伸到其父级的完整高度。

一个 jsFiddle 总是有帮助的：http: [//jsfiddle.net/REh4b/](http://jsfiddle.net/REh4b/)

# python - params中参数的python语法

> ID：14165145
> 
> 赞同：1
> 
> 时间：2013-01-04T21:19:04.683
> 
> 标签：python, syntax

在 Python 语法方面需要一些帮助

伪代码

> 如果 param 在 params 中不是 None，则 param replace('xx', 'x')

我做到了这一点：

```
param.replace('|', '/') for param in ("bar|one","bar|two") 
```

我的问题是如何在这行代码中添加一个无检查？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T21:22:31.573

也许：

```
[ param.replace("|", "/") if param is not None else None for param in iterable ] 
```

或者如果我们稍微改变一下逻辑，可能会更清晰一点：

```
[ None if param is None else param.replace("|", "/") for param in iterable ] 
```

我更喜欢第二个版本，因为如果打破`None else None`第一个版本中存在的废话......

这与@Tim Pietzcker 的（初始）答案略有不同。他的（初始）答案将从`None`可迭代的输入中过滤掉值，而这个答案将通过它们。

* * *

这里我们使用python[条件表达式](http://docs.python.org/2/reference/expressions.html#conditional-expressions)（在其他语言中有时也称为“三元运算符”）。语法是：

```
value_if_true if conditional_expression else value_if_false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T21:21:23.663

```
[param.replace('|', '/') for param in params if param is not None] 
```

这将默默地`None`从您的输入列表中删除所有参数，所以

```
("bar|one", None, "bar|two") 
```

会成为

```
["bar/one","bar/two"] 
```

如果你不想这样，请使用

```
[param.replace('|', '/') if param is not None else None for param in params] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:27:38.263

这取决于...

您想保留 None 元素吗？如果是这样的话：

```
[(each.replace('|', '/') if each is not None else None) for each in listOfWords] 
```

如果你想过滤掉无，那么你可以这样做：

```
[each.replace('|', '/') for each in listOfWords if each is not None] 
```

# c# - 何时子类化以及何时在对象模型中使用属性

> ID：14165147
> 
> 赞同：1
> 
> 时间：2013-01-04T21:19:31.633
> 
> 标签：c#, java, oop, object-model

我正在为我正在为评估工具开发的对象模型寻找一些指导。目前有两种评价方式

*   同行
*   团队

这两个评估之间的唯一区别是表单在 UI 中呈现给用户的方式。同行评估将显示您团队中的同行，您应该根据某些标准进行评估，而团队评估将显示所有涉及的团队根据某些标准进行评估。除此之外，这两个评价完全相同。

在构建对象模型时，我应该创建一个抽象的评估对象，然后将同行评估和团队评估子类化吗？或者我应该创建一个评估对象并具有两个属性来表示两种不同类型的评估？

将来可能会添加更多类型的评估。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:29:29.090

通常，如果类型只是一条信息，则将其设为字段。如果它用于更改方法的行为，例如

```
public void foo() {
    if (type == PEER) {
        doSomething();
    }
    else {
        doSomethingElse();
    }
} 
```

那么这表明您应该子类化，并使用多态性根据类型获得适当的行为。另一种解决方案是使用委托而不是继承，并将行为与类型相关联：

```
public enum EvaluationType {
    PEER {
        @Override
        public void foo() {
            ...
        }
    },
    TEAM {
        @Override
        public void foo() {
            ...
        }
    };

    public abstract void foo();
}

public class Evaluation {
    private EvaluationType type;

    public void foo() {
        return this.type.foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:29:48.483

考虑一下，在我看来，将这些信息存储在评估对象本身是错误的方法。考虑一个现实世界的例子——南瓜子。现在，我既可以种下种子，也可以烤着吃。事实上，对于一个给定的种子，我可以选择一种方式，或者另一种方式，但不能同时采用两种方式：一些种子被留出来吃，一些被用来种植，但分裂与种子本身没有多大关系。

因此，我建议在其他地方对区别进行编码......也许你有一个评估模型，它维护单独的集合（团队与同行）并在适当的时候将它们转发到 UI。为什么评估应该关心其他人如何使用它？你需要的是一个实体，它的工作就是关心，让那个人画出他想要的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:33:55.763

取出一个接口的通用属性和方法说 ICommon，然后让团队和对等他们自己的接口实现 ICommon...

```
interface ICommon{
}

interface ITeam:ICommon{
}

interface IPeer:ICommon{
} 
```

然后实现每个接口（IPeer 和 ITeam），您的 EvaluationManager（如果有的话）会知道何时实例化每个对象

# http - Facebook C# SDK 在沙盒模式下登录 Http 与 Https

> ID：14165156
> 
> 赞同：0
> 
> 时间：2013-01-04T21:20:22.353
> 
> 标签：http, https, asp.net-mvc-4, facebook-c#-sdk

我已经使用 c# SDK 创建了一个应用程序。

画布页面`http://mywebsite/`工作正常，我完成了客户想要的工作，但是当我尝试通过**https://apps.facebook.com/ApplicationName**创建一个 iframe 来访问应用程序时`http://mywebsite/`，登录卡住了。

这是我点击连接时出现的内容： ![在此处输入图像描述](../Images/39558eb586011263dfee665ccf433cb5.png)

那是权限窗口，权限出现了，我点了ok，什么也没发生。

代码：

```
<div id="fb-root"></div>
<script type="text/javascript">
    window.fbAsyncInit = function () {
       // alert("aqui estoy");
        FB.init({
            appId: '397613493644598', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                //alert("conectado");

                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                form.setAttribute("method", 'post');
                form.setAttribute("action", '/Home/Login');

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                  alert("Not Authorized");
                // the user is logged in to Facebook, 
                // but has not authenticated your app
              } else {
                  alert("Not logged In");
                // the user isn't logged in to Facebook.
            }
        });
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script>
<fb:login-button perms="user_birthday,email"> Connect</fb:login-button> 
```

我可能知道问题出在哪里，但我需要确认。

**问题是否在于 facebook 应用程序地址是 https 而我的应用程序 canva url 是 http ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:24:17.133

找到答案了，如果你是在测试阶段，并且这种情况发生在你身上，你可以做下面的动作。

转到此链接[https://www.facebook.com/settings?tab=security](https://www.facebook.com/settings?tab=security)

并禁用安全浏览（这只是在您发布应用程序时）。那么您的应用程序应该可以正常工作。

一旦您准备好购买证书并发布您的应用程序，请再次启用此功能。

所以我的问题的答案是： **问题是 facebook 应用程序地址是 https 而我的应用程序 canva url 是 http 吗？**

是**_**

# qemu - 使用“-curses”运行时如何切换到 qemu 监控控制台

> ID：14165158
> 
> 赞同：36
> 
> 时间：2013-01-04T21:20:36.003
> 
> 标签：qemu

将“-curses”选项传递给 qemu 时，qemu 默认显示仿真窗口。那么，如何从仿真窗口切换到监视器控制台？如果使用图形界面，可以通过“ctrl+alt+(1 or 2)”实现仿真窗口和监视器控制台的切换。我只是不确定如何在非图形情况下执行此操作。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-25T07:51:43.490

只需使用 Esc 而不是 Ctrl-Alt。因此，要切换到监视器控制台，请使用 Esc+2。要切换回终端输出，请使用 Esc+1。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-30T07:54:33.797

从QEMU 文档[中字符后端多路复用器](https://www.qemu.org/docs/master/system/mux-chardev.html)中的部分键：

> 在仿真过程中，如果您使用字符后端多路复用器（如果您使用 -nographic，这是默认设置），则可以通过转义序列使用多个命令。这些键序列都以转义字符开头，默认为 Ctrl-a，但可以使用 -echr 更改。下面的列表假定您使用的是默认值。
> 
> …</p>
> 
> `Ctrl`-`a` `c`
> 
> 在连接到多路复用器的前端之间旋转（通常在监视器和控制台之间切换）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-02T15:29:55.263

似乎不可能。但是，您可以通过 Telnet 访问监控控制台。

启动 QEMU：

```
qemu-system-i386 -curses -monitor telnet:127.0.0.1:1234,server,nowait 
```

然后，要访问监视器控制台，请在另一个终端中键入：

```
telnet 127.0.0.1 1234 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-05-23T20:46:52.943

`alt`+`2`

只需放下“ctrl”，所有按键序列都会按预期工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-09T10:21:56.617

以上都不适合我。我有 Ubuntu 16.04，我认为这并不重要。

`Ctrl + Alt + 2`为我工作。

# c# - 当显示的数据填充视图并出现垂直滚动条时，DataGridView 导致“程序无响应”

> ID：14165159
> 
> 赞同：1
> 
> 时间：2013-01-04T21:20:38.317
> 
> 标签：c#, .net, winforms, multithreading, datagridview

我正在使用 WinForms 在 C# 中的 Visual Studio 2010 .NET 4.0 中工作。

该表单有一个`DataGridView`数据绑定到`DataSet`.

`DataSet`正在从`Thread`处理从 读取的数据的中填充`ConcurrentQueue`。

该代码还使用信号量来序列化对 的访问，`DataSet`因为它可以从“工作”线程和 UI 主线程（更新时`DataGridView`）访问。

UI/Form 有一个`System.Windows.Forms.Timer`每 1/4 秒触发一次以调用一个函数，该函数`DataGridView`导致`DataSet`.

代码正确运行，直到`DataGridView`数据滚动并且滚动条变得可见为止。此时整个表单变得无响应 - 标题标题为“程序无响应”。

有趣的是，在调试器下运行时不会发生这种情况。仅在部署程序时。并且从未提出过任何例外。

我已经尝试同时使用 Invoke 和 BeginInvoke 而行为没有改变。

问题：

1-我下面的代码可能有什么问题？
2-由于在调试器下运行时无法观察到这种行为，我该如何找出导致问题的原因？

下面提供了代码墙。我知道这是很多代码，但我尽可能多地删减。

```
// deleted using statements for brevity

namespace namcom
{
    public partial class wndXMLtrans : Form
    {
        private DataSet dsRecords = new DataSet();
        private Thread threadConsumeXML = null;
        private static Semaphore ResourceLock;

        public wndXMLtrans(String ip)
        {
            InitializeComponent();
            ResourceLock = new Semaphore(1, 1);
            curSize = this.Size;
            m_ip = ip;
        }

        private Boolean AddRowToDataSet(String[] columns, String xml)
        {
            Boolean retCode = true;
            String value = String.Empty;
            Int64 id = -1;
            DataRow row;

            ResourceLock.WaitOne();
            row = dsRecords.Tables[0].NewRow();

            // prepare row code omitted - brevity

            // add new data row to DataSet
            dsRecords.Tables[0].Rows.Add(row);
            ResourceLock.Release();
            // SQL inserts into DB removed - brevity
            return (retCode);
        }

        private Boolean HandleSingleXMLMessage(String[] columns, String xml, out String exceptionMessage)
        {
            Boolean boolRet = true;
            exceptionMessage = String.Empty;

            // store data in dataset and database
            if ( closeRequested == false  )
            {
                AddRowToDataSet(columns, xml);
            }
            return (boolRet);
        }

        private Boolean StoreG2SMessages(String message)
        {
            // code removed - brevity
            // removed code just parses out string and in a loop calls HandleSingleXMLMessage
            // until all XML in message have been processed
            HandleSingleXMLMessage(columns,xml, out exceptionMessage)  // call in loop
            return (ret);
        }

        // pull XML out of mainwnd.msgQueue and update database
        private void G2SParseThread()
        {
            String Data;
            String exceptionMsg = String.Empty;

            while ( /* thread is to be active - code removed for brevity */)
            {
                Data = String.Empty;
                if (mainwnd.msgQueue.TryDequeue(out Data) == true)
                {
                    this.StoreG2SMessages(Data);
                }
                Thread.Sleep(20);
            }
            // thread ended cleanup code removed - brevity
        }

        private void StartThreads()
        {
            // start XML packet processing thread
            threadConsumeXML = new Thread(G2SParseThread);
            threadConsumeXML.SetApartmentState(ApartmentState.STA);
            threadConsumeXML.Start();

            threadMonitor = new Thread(() => threadHandleStatusMsg(ref mainwnd.statusQueue));
            threadMonitor.Start();
        }

        private void wndXMLtrans_Shown(object sender, EventArgs e)
        {
            // remove SQL code - brevity
            // fill dsRecords ( DataSet )
            try
            {
                var adapter = new SQLiteDataAdapter(selectSQL, dbConnection);
                adapter.Fill(dsRecords);
                dataGrid.DataSource = dsRecords.Tables[0].DefaultView;
                adapter.Dispose();
            }
            catch { } // catch code removed - brevity
            StartThreads();
        }

        private void gridUpdateTimer_Tick(object sender, EventArgs e)
        {
            ResourceLock.WaitOne();
            try
            {
                if (dataGrid != null && numRows < dsRecords.Tables[0].Rows.Count)
                {
                    if (dataGrid.RowCount > 0)
                    {
                        dataGrid.FirstDisplayedScrollingRowIndex = dataGrid.RowCount - 1;
                    }
                    dataGrid.Refresh();
                    numRows = dsRecords.Tables[0].Rows.Count;
                }
            }
            catch { }
            ResourceLock.Release();
        }
    }
} 
```

编辑：汉斯提供的答案是您无法`DataSet`从工作线程更新绑定。所以我能够通过添加以下内容来解决问题：

这些由使用 Invoke 的委托函数调用。Unbind 在`DataSet`更新前调用，Bind after`DataSet`被更新。这可行，但会导致`DataGridView`出现多次闪烁或重绘。有什么办法可以补救吗？

```
public void UnbindDataGridView(DataGridView grid)
{
    grid.DataSource = null;
}

public void BindDataGridView(DataGridView grid)
{
    grid.DataSource = dsRecords.Tables[0].DefaultView;
} 
```

# php - 删除 html 之间的换行符 带有 php（或 python）的标签

> ID：14165164
> 
> 赞同：-2
> 
> 时间：2013-01-04T21:21:02.623
> 
> 标签：php, python, regex, html-parsing

我有大量的 html 文本数据集，并且我经常发现标签`<br>`内的换行符是不必要的，有时甚至是多个换行符。`<li>`

例如：

```
<li>Some string here<br></li><br><li>Another string here<br><br></li><br> 
```

我想删除这些`<br>`出现在标签之间`<li>`并`</li>`保留其他所有内容，包括标签`<br>`之外的内容。`<li>`上面的文本将变为：

```
<li>Some string here</li><br><li>Another string here</li><br> 
```

使用 php 中的 preg_replace() （或 python 中的 re.sub() ）执行此操作的正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:38:38.877

使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)您可以轻松实现这一点（就像 jQuery 一样）

```
include('simple_html_dom.php');
$html = str_get_html('<li>Some string here<br></li><br><li>Another string here<br><br></li><br>');
foreach($html->find('li br') as $br){
    $br->outertext='';
}
echo $html; 
```

输出将是

```
<li>Some string here</li><br>
<li>Another string here</li><br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:28:29.083

替换`(<br>)+</li>`with`</li>`至少会处理 li 内容末尾的换行符，这对您来说可能已经足够了。否则，由于`<li>`s 有时包含其他`<li>`s，您面前可能有一项非常困难的任务，无法用 regexp 轻松解决（而且可能根本无法单独使用 regexp 解决），请参阅[此问题](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)的接受答案。

# c# - 如何有条件地启动一个动作？

> ID：14165165
> 
> 赞同：0
> 
> 时间：2013-01-04T21:21:03.917
> 
> 标签：c#, mysql, if-statement

我正在编写游戏。我有一个 mySQL 表，其中包含几支足球队的数据。一项数据是团队的声誉。教练的薪水取决于球队的声誉。

在游戏中有一个包含所有团队名称的组合框。所以你选择的球队将决定教练的薪水。我想做这样的伪代码：

```
If ( "the field  comboboxtext reputation" == "worldwide")
{
     coach's salary = 256000
} 
```

那么我怎样才能做到这一点呢？如果有办法在不使用的情况下做到这一点`if`，我也想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:26:00.360

这不会真正帮助您，因为您基本上需要一个涵盖编程基础知识的好的[C# 教程](http://msdn.microsoft.com/en-us/library/aa288436%28v=vs.71%29.aspx)，也许是一两本好书，但是您需要的代码应该如下所示：

```
long coachSalary;
if (cmbReputation.SelectedText  == "worldwide")
{
  coachSalary = 256000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:46:53.657

我认为其他答案并不能解决手头的问题，除非我遗漏了什么。

球队的声誉和教练工资之间的关系应该存储在一个单独的 SQL 表中，如下所示：

```
CREATE TABLE ReputationSalary (Reputation NVARCHAR(MAX), Salary INT);
INSERT INTO ReputationSalary VALUES ('District', 10000);
INSERT INTO ReputationSalary VALUES ('State', 50000);
INSERT INTO ReputationSalary VALUES ('Nation', 100000);
INSERT INTO ReputationSalary VALUES ('Worldwide', 256000); 
```

然后，当从组合框中选择一个团队时，使用所选的团队名称或团队 ID，您可以使用团队名称/ID 来查找教练的薪水以获取团队声誉，然后使用`ReputationSalary`表格获取教练薪水。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:27:11.563

类似（粗略的代码）：-

```
if(combobox.SelectedText == "worldwide")
{
 coach's salary = 256000;
} 
```

如果您还需要添加 else 条件（不使用 if-else），

```
coach's salary= (combobox.SelectedText=="worldwide")? 256000 : some other value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T22:41:52.767

如果你想要一个更紧凑的版本来删除 if 和大括号，你可以像这样使用三元运算符：

```
int coachSalary = cmbReputation.SelectedText == "worldwide" ? 256000 : 0; 
```

这意味着如果语句的第一部分，条件 (cmbReputation.SelectedText == "worldwide") 为真，coachSalary 将为 256000，否则将设置为 0。

您可以在此处查看有关三元运算符的更多信息：http: [//msdn.microsoft.com/en-us/library/ty67wk28 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ty67wk28(v=vs.110).aspx)

# python - 使用带有生成器函数的 Flask Cache

> ID：14165167
> 
> 赞同：1
> 
> 时间：2013-01-04T21:21:13.523
> 
> 标签：python, flask

我正在尝试使用 Flask-Cache 来缓存生成器函数。Flask-Cache 需要酸洗，因为生成器不能酸洗，所以这是一个问题。使用带有 Flask-Cache 的生成器是否有任何变通方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T04:48:28.720

如果您想缓存*结果*，只需调用`list`生成器并存储它。如果结果太大而无法安全地存储在内存中（即使是暂时的），则将结果包装在一个类实例中，该实例可以[在 unpickled 时自行恢复](http://docs.python.org/2/library/pickle.html#object.__getstate__)：

```
# Warning: This is terribly tightly bound together
# There are better ways to do this - this is just by way of example

def some_generator(identifier):
    """This could be anything
        * A database wrapper
        * A permutation generator
        * Something that streams (and transforms) data from disk
        * The possibilities are endless"""
    if identifier == "result_set_1":
        results = [(x, y) for x in range(10) for y in range(x)]
    elif identifier == "result_set_2":
        results = [(x, 0) for x in range(20)]
    else:
        results = [(1, 2), (3, 4)]

    for row in results:
        yield row

class GeneratorWrapper(object):
    """
    Use::

        @cache
        some_function(identifier):
            return GeneratorWrapper(identifier)
    """

    def __init__(self, identifier=None):
        self.identifier = identifier
        if identifier is not None:
            self.data = some_generator(identifier)

    def __getstate__(self):
        """When pickled return the key to rebuilding the generator"""
        return self.identifier

    def __setstate__(self, state):
        """When unpickled, restore the generator using the pickled key"""
        self.identifier = state
        if state is not None:
            self.data = some_generator(state)

    def __iter__(self):
        return self.data 
```

# c# - 在 for 循环中增加双精度值时，如何确保它保持相对圆？

> ID：14165168
> 
> 赞同：1
> 
> 时间：2013-01-04T21:21:20.760
> 
> 标签：c#, for-loop, double

我有这个 for 循环：

```
for (double x = -1 * (display.Width / zoom); x <= (display.Width / zoom); x += 0.1)
{
    //..
} 
```

`x`初始化为 -20 并与 20 进行比较。理想情况下，我希望`x`递增为 -20、-19.9、-19.8 等。实际上，这不是发生的情况；在某些迭代中，小数点后确实只有一位，但在其他迭代中，它并不精确，例如 -19.8999999。这导致了我的程序中一些非常烦人（而且很难找到）的错误。

我怎样才能让它`x`保持“相对圆润”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:22:15.070

不要使用`double`或者`float`如果您需要这种准确性 - 请`decimal`改用。

发生这种情况是因为某些分数无法用二进制准确表示 - 我建议阅读[每个计算机科学家应该知道的关于浮点算术的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:22:38.203

这与 a`double`的存储方式有关。换一个试试`decimal`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T21:23:20.637

使用整数循环计数器，初始化为 -200 并与 200 进行比较，并`x`在每次迭代中计算您的实数。

UPD：使用 Decimal 可能更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T21:26:12.613

如果我理解你的话......为什么你只是围绕它？

```
Math.Round(x,1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T21:25:21.963

浮点数（Double/Float）不准确，而是使用 -200 和 200 作为 int。这将使您不必担心缺乏浮点精度。

有关这种不精确性的更多信息，我建议使用此文档。 [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T21:25:59.677

如果您真的希望它尽可能精确地放大，以便您可以使用`int`或`long`......例如：

```
long _Z = (long) ((display.Width * 10) / zoom);

for (long _x = -1 * _Z; _x <= _Z; _x += 1)
{
    double x = ((double)_x) / 10.0;
    // ...

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-01T11:08:35.780

如果你必须使用 double 你可以这样使用：

```
double x = 0.0;
while (x <= 3.0)
{
   //Do your stuff
   x = Math.Round(x + 0.1, 1);
} 
```

# css - 带 % 的边距顶部不起作用

> ID：14165172
> 
> 赞同：0
> 
> 时间：2013-01-04T21:21:31.830
> 
> 标签：css

我有一列有一些行。

代码：

```
<div class="col-fluid">
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
    <div class="height1">1</div>
</div> 
```

所以我`margin-top`为每个`height1`班级分配一个：

```
.col-fluid > [class*="height"]:not(:first-child) {
    margin-top: 0.699301%;
} 
```

现在，有一个问题`margin-top`，在某些高度尺寸（我不完全了解它们）似乎`margin-top`不起作用。

请参阅此屏幕截图中的左第一列：

![边距顶部不起作用](../Images/8d0b72d9e5f4d5e343a70dc45dd0a2c0.png)

但是是另一种尺寸，它可以工作：

![margin-top 作品](../Images/6d1c0259336c39441fd2f52caf50b9fd.png)

有什么问题？`margin-top`我的尺码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:31:49.043

我认为，最好这样做：

```
<div class="col-fluid">
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
    <div class="container"><div class="height1">1</div></div>
</div>

.col-fluid div.container
{
  padding-top:10px;
} 
```

# c# - “访问被拒绝”LOGON32_LOGON_SERVICE

> ID：14165173
> 
> 赞同：2
> 
> 时间：2013-01-04T21:21:31.717
> 
> 标签：c#

我正在尝试使用模拟网络服务`advapi32`

```
LogonUser("NETWORK SERVICE", "NT AUTHORITY", null, LOGON32_LOGON_SERVICE, LOGON32_PROVIDER_DEFAULT, ref token) 
```

`Access is denied`但是在 Windows 8 机器上不断出错。有任何想法吗？（我用谷歌搜索了很多，但找不到答案）。

```
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <assemblyIdentity version="1.0.0.0" name="MyApplication.app" />
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">        
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
      <applicationRequestMinimum>
        <defaultAssemblyRequest permissionSetReference="Custom" />
        <PermissionSet class="System.Security.PermissionSet" version="1" ID="Custom" SameSite="site" Unrestricted="true" />
      </applicationRequestMinimum>
    </security>
  </trustInfo>
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application />      
  </compatibility>  
</asmv1:assembly> 
```

**编辑：**

因此，经过几次尝试，模拟似乎有效，但我永远无法验证为主机的网络服务。一个应用程序池怎么能在一个网络服务下运行呢？

使用

```
LOGON32_LOGON_SERVICE 
```

结果是：

```
Unhandled Exception: System.ComponentModel.Win32Exception: Access is denied
   at Tools.Network.Impersonator.Impersonate(String userName, String domainName,
 String password, LogonType logonType, LogonProvider logonProvider)
   at Tools.Network.Impersonator..ctor(String userName, String domainName, Strin
g password, LogonType logonType, LogonProvider logonProvider)
   at Impersonation.Program.Main(String[] args) 
```

使用

```
LOGON32_LOGON_NEW_CREDENTIALS 
```

结果是：

```
System.IO.IOException: Logon failure: unknown user name or bad password.

   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Bo
olean overwrite)
   at System.IO.File.Copy(String sourceFileName, String destFileName, Boolean ov
erwrite)
   at Impersonation.Program.Main(String[] args) 
```

困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:26:11.567

最后！我找到了答案：

[我如何“运行”“网络服务”？](https://stackoverflow.com/questions/6911310/how-do-i-runas-network-service)

和

[http://geek.hubkey.com/2008/02/impersonating-built-in-service-account.html](http://geek.hubkey.com/2008/02/impersonating-built-in-service-account.html)

在 Windows 8 上..“Microsoft 已在 Windows 8 / Windows Server 2012 中更改了此默认行为。要允许交互式服务，您需要找到注册表项 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Windows 并将 NoInteractiveServices 从 1 更改为 0 。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:55:57.203

这是一个非常好的链接，其中包含代码和我认为您可能正在寻找的所有内容。让我知道这个链接是否有用

[.NET (C#) Impersonation with Network Credentials 适用于 LOGON32_LOGON_NEW_CREDENTIALS 作为您的登录类型，这要求您选择 LOGON32_PROVIDER_WINNT50 作为登录提供程序类型。](http://platinumdogs.me/2008/10/30/net-c-impersonation-with-network-credentials/#comment-770)

# codeigniter - 如何从 CodeIgniter 的 URL 中删除 index.php？

> ID：14165176
> 
> 赞同：-3
> 
> 时间：2013-01-04T21:21:42.400
> 
> 标签：codeigniter, url, localhost

我是[CodeIgniter](http://en.wikipedia.org/wiki/Codeigniter#CodeIgniter)的新手。我在 Windows 8 上有一个[XAMPP](http://en.wikipedia.org/wiki/XAMPP)服务器。一切都很好，但问题在于我的 URL，它看起来不友好。它看起来像`localhost/ci/index.php/site/home`（`ci`我的 CodeIgniter 的根文件夹在哪里）。我想让 URL 更干净，比如 `localhost/ci/home`，我该怎么做？

我的 CodeIgniter 版本是 2.1.2。

我已经做了一些研究，但在大多数情况下，它说要更改`.htaccess`CodeIgniter 的文件。但是我的`.htaccess`文件中没有任何内容；它是空的，除了“拒绝所有人”这一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:30:28.897

你可以这样做，在`config/config.php`：

```
$config['base_url'] = 'http://'.$_SERVER['HTTP_HOST']; //you can also leave blank this CI tend to find this by himself
$config['index_page'] = ''; 
```

并尝试以下`.htaccess`. 我在很多网站上都使用它，它让我满意。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果它还不起作用，请使用 a`phpinfo();`并检查 mod_rewrite 是否为`enabled`. 如果未启用，您可以按照 Stack Overflow 问题*[How do you enable mod_rewrite?中的说明进行操作。](https://stackoverflow.com/questions/3131236)*启用它。

如果它还没有工作并且 mod_rewrite 还`enabled`没有，你可以尝试将它们切换到`config/config.php`：

```
$config['uri_protocol'] = 'AUTO'; //If not working, try one of these:
     'PATH_INFO'        Uses the PATH_INFO
    | 'QUERY_STRING'    Uses the QUERY_STRING
    | 'REQUEST_URI'     Uses the REQUEST_URI
    | 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:29:55.127

您需要将“全部拒绝”替换为：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

[http://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:30:54.787

查看官方文档，*[CodeIgniter URLs](http://ellislab.com/codeigniter/user-guide/general/urls.html)*：

> 您可以使用带有一些简单规则的 .htaccess 文件轻松删除此文件。以下是此类文件的示例，使用“否定”方法重定向除指定项目之外的所有内容：

```
RewriteEngine on<br>
RewriteCond $1 !^(index\.php|images|robots\.txt)<br>
RewriteRule ^(.*)$ /index.php/$1 [L]<br> 
```

此外，如果您使用 Apache，请将 .htaccess 文件放在您的根 Web 目录中。有关更多信息，请查看*[Codeigniter .htaccess](http://snipplr.com/view/5966/codeigniter-htaccess/)*。

# c# - 实体框架代码优先数据库表不会在现有数据库上生成

> ID：14165179
> 
> 赞同：1
> 
> 时间：2013-01-04T21:21:59.047
> 
> 标签：c#, entity-framework, entity-framework-4.1

嗨，我第一次使用实体框架代码，但无法生成表格。我在 MVC3 应用程序的 App_Data 中创建了一个空数据库。这是我创建的模型：

```
 public class Brand {
    public int BrandId { get;set; }
    public string BrandName { get;set; }
}

public class Model
{
    public int ModelId { get;set; }
    public Brand BrandId { get;set; }
    public Category CategoryId { get;set; }
    public string ModelName { get;set; }
}

public class Category
{
    public int CategoryId { get;set; }
    public string CategoryName { get;set; }
} 
```

这是 dbContext：

```
public class CarsEntities : DbContext{
    public DbSet<Brand> Brands { get;set; }
    public DbSet<Model> Models { get;set; }
    public DbSet<Category> Categories {get;set;} 
} 
```

这是 web.config 中的 connectionString：

```
<connectionStrings>
      <add name="CarsEntities" connectionString="Data Source='D:\Projects IDE\Visual Studio\MyWork\Websites\SellCars\SellCars\App_Data\Cars.sdf'" providerName="System.Data.SqlClient" />      
 </connectionStrings> 
```

现在我已经在 HomeController 中初始化了 CarsEntities，但似乎没有生成任何表。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:30:40.537

我认为问题出在你的

```
webcofig 
```

如果您想将 db 用作 mdf 文件数据库文件之类的文件，具体在`dtasource`

```
 `<add name="CarsEntities"  connectionString="data source=.\SQLEXPRESS; Integrated
 Security=SSPI;AttachDBFilename=|yourDirectoryDirectory|\thenameofyourdb.mdf;User
 Instance=true"  providerName="System.Data.SqlClient" /`> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:35:37.907

首先 - 由于您使用的是 SQL Server Compact，因此您需要更改提供程序名称以使用 Compact 而不是 SQL Server：

```
<add name="CarsEntities" connectionString="Data Source='D:\Projects IDE\Visual Studio\MyWork\Websites\SellCars\SellCars\App_Data\Cars.sdf'" providerName="System.Data.SqlServerCe.4.0" /> 
```

接下来，您需要在 Application_Start 代码中的某处使用数据库初始化程序，它告诉实体框架是否创建数据库表以及重新创建它们的频率。看这里：

[http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)

[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

# jquery - 单选按钮不通过 AJAX 传递值

> ID：14165184
> 
> 赞同：1
> 
> 时间：2013-01-04T21:22:15.787
> 
> 标签：jquery, html, ajax, forms, radio-button

有谁知道为什么所选复选框的值没有被回显？

Javascript代码：

```
<script src="jquery.min.js" type="text/javascript"></script>
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.form.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
<!--
// wait for the DOM to be loaded 
$(document).ready(function()
{
    // bind 'vgsForm' and provide a simple callback function 
    $('#vgsForm').ajaxForm(function()
    {
        $('#Suggestion').load('process_answers.php');
    }); 
}); 
```

HTML 表单

```
<div id="Questions">
<form id="vgsForm" action="process_answers.php" method="get" >
<div id="Q1">
<label><input type="radio" name="q1option" value="Less than 16" />Less than 16</label><br />
<label><input type="radio" name="q1option" value="16 or more" />16 or more</label>
</div> 
```

process_answers.php

```
echo('$_GET: '.print_r($_GET, true));

//Get Question 1
if (isset($_GET['q1option'])) 
{
    $q1option = $_GET['q1option'];
} 
else 
{
    $q1option = NULL;
}

echo("Selected: ".$q1option); 
```

这是回应：

> $_GET: 数组 ( ) 选择：

任何帮助表示赞赏

丹尼尔

PS 这是我得到 JavaScript 代码的地方[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

我是否需要任何额外的 JavaScript 代码才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T02:30:36.063

看来您在 HTML 和内联 JS 代码中都有问题。为您的表单尝试以下代码：

```
<div id="Questions">
<form id="vgsForm" action="process_answers.php" method="POST" >
   <label><input type="radio" name="q1option" value="Less than 16" />Less than 16</label><br />
   <label><input type="radio" name="q1option" value="16 or more" />16 or more</label>
   <input type="submit" value="Submit" />
</form>
</div> 
```

HTML 可能看起来像您从链接中获得的那个。除了 jquery，您还必须包含来自[http://malsup.github.com/jquery.form.js](http://malsup.github.com/jquery.form.js)的脚本，它实现了表单 ajax 升级。

```
<html> 
<head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'vgsForm' in order to upgrade form to use ajax 
            $('#vgsForm').ajaxForm(function() { 
                alert("Form was sent successfully."); 
            }); 
        }); 
    </script> 
</head> 
```

至于`process_answers.php`，请确保您正在从 POST 全局数组中读取，因为我们已将其设置为表单中的方法：

```
echo('$_POST: '.print_r($_POST, true));    
//Get Question 1
if (isset($_POST['q1option'])) 
{
    $q1option = $_POST['q1option'];
} 
else 
{
    $q1option = NULL;
}

echo("Selected: ".$q1option); 
```

希望有帮助。

# android - 三星氧化锆保护崩溃

> ID：14165191
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:22:36.690
> 
> 标签：android, samsung-mobile

我必须在三星应用程序上发布付费应用程序，因此我尝试按照三星官方开发者网站上[的指南为 Android 实施氧化锆许可证管理保护。](http://developer.samsung.com/android/technical-docs/How-to-protect-your-app-from-illegal-copy-using-Samsung-Application-License-Management-Zirconia)

我已将 Zirconia.jar 库添加到构建路径，以及项目的 libs 文件`armeabi`夹中包含该文件的文件夹。`libnativeinterface.so`

当我尝试运行这个简单的测试项目时

```
class MyLicenseCheckListener implements LicenseCheckListener {

    public void licenseCheckedAsValid() {
        Log.d("ZirconiaTest", "License is valid");

        ownerHandler.post(new Runnable() {
            public void run() {
                ownerTextView.setText("Licenza verificata correttamente");
            }
        });
    }

    public void licenseCheckedAsInvalid() {
        Log.d("ZirconiaTest", "License is invalid");

        ownerHandler.post(new Runnable() {
            public void run() {
                ownerTextView.setText("Licenza non valida");
            }
        });
    }

    Handler ownerHandler;
    TextView ownerTextView;
}

public class ZirconiaTest extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Handler handler = new Handler();
        TextView  tv = new TextView(this);
        tv.setText( "This is a simple test application for Zirconia!\nPlease hold on while verifying the license..." );
        setContentView(tv);

        Zirconia zirconia = new Zirconia(this);

        zirconia.doVariablesTest();

        MyLicenseCheckListener listener = new MyLicenseCheckListener();
        listener.ownerHandler = handler;
        listener.ownerTextView = tv;
        //zirconia.setBogusIMEI("");
        zirconia.setLicenseCheckListener(listener);
        zirconia.checkLicense(false, false);

        zirconia.doVariablesTest();        
    }
} 
```

我收到此错误并且应用程序崩溃

```
01-04 22:09:23.519: E/dalvikvm(28775): Could not find class 'com.samsung.zirconia.Zirconia', referenced from method com.samsung.zirconia.test.ZirconiaTest.onCreate
01-04 22:09:23.519: W/dalvikvm(28775): VFY: unable to resolve new-instance 9 (Lcom/samsung/zirconia/Zirconia;) in Lcom/samsung/zirconia/test/ZirconiaTest; 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:55:00.773

哦，我也有这个错误。这是解决方案：

1.  在 Eclipse 中，将“Zirconia.jar”文件拖放到项目中的“libs”文件夹中。不要从 bulid path 中删除它！我为你附上了照片。我希望我有所帮助

![我的形象](../Images/2c38d5371d67c65999ebb561a95986c7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T11:09:52.477

这是一个我忘记的老问题。这个问题是由损坏的 Eclipse 缓存引起的，删除`.metadata`文件夹并重新编译项目问题就消失了。

# android - 单击通知时返回 json 对象

> ID：14165196
> 
> 赞同：0
> 
> 时间：2013-01-04T21:22:59.793
> 
> 标签：android, cordova, google-cloud-messaging

我正在构建一个支持使用 phonegap/cordova 和这个[插件](https://github.com/marknutter/GCM-Cordova)推送通知的 android 应用程序。该插件有一个 onMessage() 方法，只要收到推送通知就会触发该方法，该方法将一个 json 对象返回给我的 javascript 插件。但是，我希望此方法仅在单击状态栏上的通知时返回 json。

这是我的 onMessage() 方法：

```
protected void onMessage(Context context, Intent intent) {
    String message = "", title = "", type = "";
    int msgctn = 0, schoolid = 0, studentid = 0, contentid = 0;

    // Extract the payload from the message
    Bundle extras = intent.getExtras();
    if (extras != null) {
      try
      {
          message = extras.getString("message");
          title = extras.getString("title");
          type = extras.getString("type");
          msgctn = Integer.parseInt(extras.getString("msgctn"));
          schoolid = Integer.parseInt(extras.getString("schoolid"));
          studentid = Integer.parseInt(extras.getString("studentid"));
          contentid = Integer.parseInt(extras.getString("contentid"));

        JSONObject json;
        json = new JSONObject().put("event", "message");

        json.put("message", message);
        json.put("type", type);
        json.put("contentid", contentid);
        json.put("schoolid", schoolid);
        json.put("studentid", studentid);

        GCMPlugin.sendJavascript( json );
        // Send the MESSAGE to the Javascript application
      }
      catch( JSONException e)
      {
        Log.e(ME + ":onMessage", "JSON exception");
      }

      Intent notificationIntent = new Intent(context, App4.class);
      notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
      PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

      NotificationCompat.Builder builder = new NotificationCompat.Builder(context)
          .setContentText(message)
          .setContentTitle(title)
          .setSmallIcon(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? R.drawable.icon : android.R.drawable.ic_dialog_info)
          .setAutoCancel(true)
          .setContentIntent(contentIntent)
          .setWhen(System.currentTimeMillis())
          //.setDefaults(Notification.DEFAULT_ALL)
          .setLights(-16711681, 2000, 1000)
          .setNumber(msgctn)
          .setSound(Uri.parse("android.resource://"+ getPackageName() + "/" + R.raw.notifsound));

      Notification notification = builder.build();
      NotificationManager notificationManager = getNotificationManager(context);
      notificationManager.notify(1, notification);

    } 
```

我必须创建一个通知对象才能在状态栏上显示它。单击通知时，它会调用 Intent App4，这会显示我的应用程序的 index.html，但我想执行一些 javascript 函数或使用有效负载将一些 json 对象返回到我的应用程序。也许我可以调用其他函数来执行此操作，而不是意图，但我是 android 世界的新手，不知道该怎么做。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:18:55.797

您可以做的是将 JSON 数据作为附加内容放入您正在创建的 notificationIntent Intent 中。您可以通过调用您的 notificationIntent 的[putExtras()](http://developer.android.com/reference/android/content/Intent.html#putExtras%28android.content.Intent%29)方法来执行此操作，或者手动执行此操作。无论您采用哪种方式，您都需要将您想要的数据作为附加信息输入到 notificationIntent 中。

然后，当您的 App4 活动开始时，您需要在[onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)或[onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)中捕获 Intent并检查 Intent 或 Bundle 是否具有您想要的附加功能。如果是，那么您创建 JSON 对象并将其传递给您的 JavaScript 应用程序，就像您在粘贴的 onMessage() 方法中所做的那样。

您还必须在 onMessage() 方法中删除将 JSON 对象发送到您的 javascript 应用程序的代码。

我希望这会有所帮助，它应该可以工作，但我不在我的电脑旁，无法实际测试代码。

# html - 嵌套 div 和 dojo 数据网格

> ID：14165200
> 
> 赞同：1
> 
> 时间：2013-01-04T21:23:25.223
> 
> 标签：html, dojox.grid.datagrid

我在整理一些 div 和数据网格时遇到了麻烦。我的滚动条太多了。
![滚动条太多](../Images/6437d1e5d3b208bb1fc8d9a2cbab2450.png)

我认为某些 div/内容窗格可以合并是错误的吗？

```
<div dojoType="dijit.layout.ContentPane" id="rightPane" region="right">
  <div dojoType="dijit.layout.AccordionContainer">
    <div dojoType="dijit.layout.ContentPane" id="DownLinePane" title ="DownLine 
          Reps" selected="true" style="overflow:hidden;">
      <div id="DownLine" style="overflow:hidden; height:100%; width:100%; display:none;">
        <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="DLgrid" id="DLgrid" 
          sortInfo="3" data-dojo-props="rowsPerPage:'15', rowSelector:'20px'">
          <thead>
            <tr>
              <th field="rep_no" width="60px" height="80px">
              Rep Number
              </th>
              <th field="name" width="110px">
              Name
              </th>
              <th field="gen" width="37px">
              Gen#
              </th>
           </tr>
          </thead>
        </table>
      </div>
      <!-- end of downline div -->
    </div>
    <!-- end of downlinePane div -->
  </div>
  <!-- end of accordion -->
</div> 
```

# javascript - jQuery 地址 - 内容加载

> ID：14165201
> 
> 赞同：0
> 
> 时间：2013-01-04T21:23:31.840
> 
> 标签：javascript, jquery, html

我无法让 jQuery 地址插件正常工作。我有一个带有 div 的索引页，例如：

```
<div id="test"></div> 
```

我希望它的内容使用 jQuery 地址动态加载。我也有一个菜单，如：

```
<a href="portfolio.php" rel="address:/portfolio">portfolio</a>
<a href="curriculum.php" rel="address:/curriculum">curriculum</a></li> 
```

我的 JS 是：

```
$('a').click(function(){
    $("#test").load($(this).attr('href'));
}); 
```

和：

```
$.address.change(function(event){
    $("#test").load(event.value);
}); 
```

我不能做更多的事情。有人可以帮助我并向我解释吗？医生太少了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:30:32.390

我没有使用 jquery 地址，但这里有一个人试图做你想做的事的例子

[http://www.asual.com/jquery/address/samples/state/](http://www.asual.com/jquery/address/samples/state/)

# perforce - 将 Perforce 文件夹移动到另一台服务器

> ID：14165209
> 
> 赞同：0
> 
> 时间：2013-01-04T21:23:52.587
> 
> 标签：perforce

如何将文件夹移动到完全不同的服务器上完全不同的 Perforce 仓库但保留历史记录和更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T03:35:16.240

可以从不同的服务器拆分和合并部分 Perforce 软件仓库，但您需要 Perforce 技术支持的帮助，因此请联系他们！

一个更简单的解决方案是保留两个单独的服务器，并使用远程仓库定义，以便您可以从连接到服务器 B 的客户端工作区访问服务器 A 中的文件。这样，您的用户大多看到的东西就好像只有一个服务器，实际上有多个服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T21:55:49.010

你真的不需要 perforce 技术支持的帮助。如果您有管理员，您可能需要他们来设置目标库和/或提供访问权限，但基本任务是使用普通用户可用的功能来执行的。这是我要做的（简而言之）：如果您打开一个 P4V 会话并选择提交的更改列表选项卡，您可以过滤此集合以仅显示与您要移动的部分相关的更改。这是您将在要填充的新仓库（甚至服务器）上复制的更改集。这个想法是您在一侧解开存档文件，并在目的地以相同的方式将它们卷起来。所以这个过程很简单（1）同步到第一个更改列表，（2）将该集合集成到新位置，（3）检查该集合，(4) 按顺序重复所有后续更改列表，直到完成。显然，这可以编写脚本。我目前正在使用 python 编写脚本，但是任何带有 Perforce 函数库的体面的脚本语言都可以使用。一些复杂性：变更列表将按顺序与原始列表相同，但原始时间不会被保留 - 它们将是“当前的”。当然，如果有标签，如果您希望保留它们，则需要将其映射到新位置。但不会保留原始时间 - 它们将是“当前的”。当然，如果有标签，如果您希望保留它们，则需要将其映射到新位置。但不会保留原始时间 - 它们将是“当前的”。当然，如果有标签，如果您希望保留它们，则需要将其映射到新位置。

# mp3 - GEOB 标签的 ID3 v2.3 帧大小字段的正确编码

> ID：14165211
> 
> 赞同：2
> 
> 时间：2013-01-04T21:24:14.317
> 
> 标签：mp3, id3v2

对于 ID3 v2.3.0 的帧大小字节应该如何编码/解码，我有些困惑。根据（非正式）ID3 v2.3.0 规范，每帧的大小应编码为 4 个字节，其中每个字节的最高有效位未使用。要计算大小，它将采用以下公式：

```
byte MASK = (byte)0x7F;

int size = 0;

for (int = 0; i < 4; i++) {
   size = size * 128 + (b[i] & MASK);
} 
```

但是当我使用解析器解析一些 MP3 文件时，相当多的文件具有 GEOB（通用封装对象标签）帧，其大小字节被编码为 Big Endian 32 位整数。

在我通过使用适当的算法重新编码来修复这些字节后，Windows 7 和 Winamp 等商业软件无法正确显示后续标签（在某些情况下，TIT2 就在 GEOB 之后，因此虽然没有显示歌曲的标题它在文件中）。

我还发现 MCDI（音乐 cd 标识符）和 TALB（'Album/Movie/Show title'）标签有类似的问题。

我通读了 v2.3 规范，并在 Google 上进行了搜索，但无法找到有关使用 32 位整数作为这些帧的大小元数据的任何信息。然而，不同商业软件中的常见行为似乎建议此类字段应使用 32 位整数作为大小，而不是使用 0x7F 屏蔽的 4 个字节。

所以我只是想知道这里是否有人在 ID3 v2.3 上工作过并且可以为我澄清这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:43:56.137

我相信我已经找到了答案。ID3 v2.3，尽管它得到更普遍的支持（相对于 v2.4），但它并没有写得很好的（和非正式的）规范。它的标头大小使用 4 个 0x7F 字节，但帧大小实际上是 32 位整数，只是它们从未被清楚地拼写出来。

我在处理 GEOB 时通常遇到问题的原因是因为直到帧大小大于 0x7F 才会出现问题，而 GEOB 通常是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-21T00:21:40.687

是的。`%`但是，鉴于立即解释的(binary) 和`$`(hexadecimal)的约定，我认为这些文档足够明确：

*   **标题**大小：
    *   `4 * %0xxxxxxx`根据[v2.2.0 (§3.1.) 标头](https://id3.org/id3v2-00)
    *   `4 * %0xxxxxxx`根据[v2.3.0 标头](https://id3.org/id3v2.3.0#ID3v2_header)
    *   `4 * %0xxxxxxx`根据[v2.4.0 (§3.1.) 标头](https://id3.org/id3v2.4.0-structure)
*   **框架**尺寸：
    *   `$xx xx xx`根据[v2.2.0（即 §4.1.）框架](https://id3.org/id3v2-00)
    *   `$xx xx xx xx`根据[v2.3.0 框架](https://id3.org/id3v2.3.0#ID3v2_frame_overview)
    *   `4 * %0xxxxxxx`根据[v2.4.0 (§4.) 框架](https://id3.org/id3v2.4.0-structure)

概括：

*   对于 ID3v2 中的所有 3 个版本，**标头**大小以相同的方式存储：使用 4 个字节，但每个只有 7 位有效。
*   仅对于 ID3v2.2**帧**，大小由 3 个（完整）字节组成。
*   仅对于 ID3v2.3**帧**，大小由 4 个（完整）字节组成。
*   仅对于 ID3v2.4**帧**，最终的大小与标头的大小一样存储：4 字节，但只有 28 位有效。

[ID3v2.4.0 更改§3](https://id3.org/id3v2.4.0-changes)还列出了从 v2.3.0 开始的**帧**大小更改。整个问题来自与 9（或 12）位设置同步的 MPEG 音频（和 AAC）流 - 任何解码器都可能将 ID3 元数据误解为音频数据。

# html - 具有“只读”和“禁用”等属性的敲除 attr 绑定

> ID：14165213
> 
> 赞同：26
> 
> 时间：2013-01-04T21:24:20.480
> 
> 标签：html, data-binding, knockout.js, readonly, disabled-input

**将Knockout 的“attr”数据绑定**与**“readonly”**和**“disabled”**等独立属性一起使用的建议“最佳实践”方式是什么？

这些属性的*特殊之处*在于它们通常通过将属性值设置为属性名称来启用（尽管如果您只是在 HTML 中包含没有任何值的属性名称，许多浏览器也可以正常工作）：

```
<input type="text" readonly="readonly" disabled="disabled" value="foo" /> 
```

但是，如果您**不想**应用这些属性，通常的做法是从 HTML 中完全省略它们（而不是像 readonly="false" 那样做）：

```
<input type="text" value="foo" /> 
```

Knockout 的“attr”数据绑定不支持这种情况。一旦我提供了一个属性名称，我还需要提供一个值：

```
<input type="text" data-bind="attr: { 'disabled': getDisabledState() }" /> 
```

是否有跨浏览器的方式关闭“禁用”或“只读”？或者，如果我不想禁用该项目或将其设为只读，是否有一个**自定义绑定**的技巧可以用来不呈现**任何内容？**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-04T21:33:33.327

Knockout 的“attr”数据绑定确实支持这种情况，只是返回`null`或`undefined`从您的`getDisabledState()`函数返回，然后它不会发出属性。

演示[小提琴](http://jsfiddle.net/eeTjS/2/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-21T15:13:33.627

您还可以像这样为只读创建绑定：

```
ko.bindingHandlers['readonly'] = {
'update': function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (!value && element.readOnly)
        element.readOnly = false;
    else if (value && !element.readOnly)
        element.readOnly = true;
}
}; 
```

来源：[https ://github.com/knockout/knockout/issues/1100](https://github.com/knockout/knockout/issues/1100)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-31T15:08:22.050

Knockout 有一个[启用](http://knockoutjs.com/documentation/enable-binding.html)绑定和一个[禁用](http://knockoutjs.com/documentation/disable-binding.html)绑定。

我不确定在提出问题时这些是否可用，但任何提及此问题的人都应该知道。

# eclipse - Eclipse 的资源更改插件

> ID：14165214
> 
> 赞同：0
> 
> 时间：2013-01-04T21:24:21.180
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

**我创建了一个 RCP 应用程序，它通过扩展CommonNavigator**在自己的视图中检测资源更改。

```
public abstract class NavigatorView extends CommonNavigator  implements
    IResourceChangeListener {
public void createPartControl(Composite parent) {
 super.createPartControl(parent);
 hookResourceChangeCommand(); // my resource tracking function.
 }
} 
```

但是现在我需要为此创建一个插件，它可以检测 Eclipse 本身中项目资源管理器中的资源更改。我现在无法创建视图，我需要检测已经存在的视图。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:01:07.830

请完全删除您创建的视图。如果要跟踪资源更改，则不应在 UI 中执行任何操作，因为资源是工作区概念的一部分，并且工作区通常是无头的（即没有 UI）。

而是使用下面的代码（取自[资源更改侦听器教程](http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html)）：

```
IWorkspace workspace = ResourcesPlugin.getWorkspace();
   IResourceChangeListener listener = new IResourceChangeListener() {
      public void resourceChanged(IResourceChangeEvent event) {
         System.out.println("Something changed!");
      }
   };
   workspace.addResourceChangeListener(listener);

   //... some time later one ...
   workspace.removeResourceChangeListener(listener); 
```

# c - FreeRTOS 信号量

> ID：14165218
> 
> 赞同：1
> 
> 时间：2013-01-04T21:24:37.140
> 
> 标签：c, semaphore, freertos

以下是关于 xSemaphoreTake() 函数的 FreeRTOS api-reference [http://www.freertos.org/a00122.html](http://www.freertos.org/a00122.html)的摘录：

```
// See if we can obtain the semaphore. If the semaphore is not available
// wait 10 ticks to see if it becomes free.
if( xSemaphoreTake( xSemaphore, ( portTickType ) 10 ) == pdTRUE )
{
// We were able to obtain the semaphore and can now access the
// shared resource. 
```

我的问题是：我是否已经在这里有了信号量，或者我是否必须 `xSemaphoreTake( xSemaphore, (portTickType) 10 )`像这样显式调用：

```
// We have finished accessing the shared resource. Release the
// semaphore.
xSemaphoreGive( xSemaphore );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:30:57.960

作为您链接到的示例，在 if (...) 正文中采用信号量。如果您从该示例中复制粘贴，则由您来确保您的程序中同时具有 xSemaphoreTake 和 xSemaphoreGive。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:50:29.517

当您调用 xSemaphoreTake() 时，您不知道您是否拥有 xSemaphore 信号量。如果它是空闲的，您的代码将继续执行，如果它会在 10 个滴答声内空闲，您的代码将继续执行，而 OS 调度程序不会让您失望（这是您的调用中指定的超时），如果 xSemaphore 在指定的超时后不可用，您的任务将进入阻塞状态，并执行下一个具有更高优先级的就绪任务。

您对同一信号量的显式调用 xSemaphoreGive 在这里将是一个严重的错误，如果您不拥有它，那么释放它是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T05:42:28.857

> 我的问题是：我是否已经在这里有了信号量，或者我必须调用 xSemaphoreTake( xSemaphore, (portTickType) 10 )，例如：

是的，如果您输入 if 语句的主体，您就有信号量。如果在阻塞时间（在您的情况下为 10 个滴答声）之后信号量不可用（或在持续时间内给出），则 xSemaphoreTake( xSemaphore, ( portTickType ) 10 ) 返回 pdFALSE。

# java - 如何告诉代理服务器不要缓存响应？

> ID：14165219
> 
> 赞同：1
> 
> 时间：2013-01-04T21:24:39.247
> 
> 标签：java, caching, proxy, http-headers, httprequest

我发现这是为了完成这项工作：

> Cache-Control: private 下一个更高的指令是“cache-control: private”。它指示路径中的代理不要缓存页面。但它允许浏览器缓存页面。代理是多个用户使用的共享资源，该指令告诉他们不要缓存响应。正如我们已经注意到的，浏览器仍然可以缓存页面。

但是如何将其添加到请求标头中？这些缓存问题与响应标头有关。那么我应该怎么做才能将此参数添加到请求标头？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:49:39.520

如果您使用的是*Servlets*，那么您可以添加/设置所需的**响应**（不是请求）HTTP 标头。

简单的例子。

```
import javax.servlet.ServletException;
import java.io.IOException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class SomeServlet extends HttpServlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        // some code here

        response.setHeader("Cache-Control", "private");

        // some code here
    }
} 
```

或者您可以使用`response.addHeader("Cache-Control", "private")`.

只是在使用的时候`setHeader()`，如果已经设置了header，那么新的值会覆盖之前的值。

在此处查看 Java EE API：
[void addHeader(String name, String value)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#addHeader%28java.lang.String,%20java.lang.String%29)
[void setHeader(String name, String value)](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#setHeader%28java.lang.String,%20java.lang.String%29)

# javascript - 尝试在使用 jquery 创建动态值后将焦点放在 textarea 的末尾

> ID：14165221
> 
> 赞同：0
> 
> 时间：2013-01-04T21:24:40.510
> 
> 标签：javascript, jquery

这是我的javascript：

```
$(document).ready(function(){
    $(".reply").click(function(){
        var replyId = $(this).attr("id");
        $("textarea[name='comment']").val("<reply:"+replyId+">");
        $("textarea[name='comment']").ready(function(){
            moveCursorToEnd($(this));
        });
    });
});

function moveCursorToEnd(el) {
    if (typeof el.selectionStart == "number") {
        el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
        el.focus();
        var range = el.createTextRange();
        range.collapse(false);
        range.select();
    }
} 
```

我对使用 javascript 的函数有些陌生，但这似乎不起作用它会将值放入但不专注于 textarea。我确定我在做一些非常愚蠢的事情，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:29:11.167

您正在将一个 jquery 对象传递给一个需要 DOM 元素的函数。您还想摆脱`ready`：

```
$(".reply").click(function(){
    var replyId = $(this).attr("id");
    var $textArea = $("textarea[name='comment']");

    $textArea.val("<reply:"+replyId+">");

    moveCursorToEnd($textArea[0]);
}); 
```

[http://jsfiddle.net/wC5Qm/1/](http://jsfiddle.net/wC5Qm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:31:49.727

textarea 的 ready 事件不会触发，因为一旦附加了事件，textarea 就已经加载了。此外，您还必须将原始元素，而不是 jQuery 对象传递给函数。尝试更改这些行

```
$("textarea[name='comment']").ready(function(){
    moveCursorToEnd($(this));
}); 
```

对此

```
moveCursorToEnd($("textarea[name='comment']")[0]); 
```

# php - 当使用 !(self::$_instance instanceof self) 为什么这不起作用

> ID：14165223
> 
> 赞同：2
> 
> 时间：2013-01-04T21:24:51.633
> 
> 标签：php, object, constructor, self, instanceof

我最近编写了一些代码来处理实例化对象、将对象和一些数据分配给对象属性，然后执行对方法的调用以执行某些操作。

但是在循环中运行代码时，它无法工作，我不明白为什么，我的示例代码是：-

控制器功能：-

```
$arrayOfObjects = SomeClass::getItems();
foreach ($arrayOfObjects as $object) {
    SomeOtherObject::getInstance($object, time())->run();
} 
```

SomeOtherObject::getInstance() :-

```
public static function getInstance($object, $timestamp) {
    if (!(self::$_instance instanceof self)) {
        self::$_instance = new self($object, $timestamp);
    }
    return self::$_instance;
}

private function __contruct($object, $timestamp) {
    $this->_theObjectPassed = $object;
    $this->_theTimestampPassed = $timestamp;
} 
```

让我感到困惑的是 SomeOtherObject 上的 run 方法并没有达到我的预期。当我在循环中添加调试时，即在 $object 上输出 getName() 方法时，我为循环中的每个项目得到了相同的方法。

当我将构建对象的方式更改为以下（而不是 getInstance()）时，它起作用了：-

```
$someOtherObject = new SomeOtherObject($object, time());
$someOtherObject->run(); 
```

我猜它与 getInstance 方法的工作方式以及它如何检查有关，但想知道是否有人可以解释它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:47:33.643

看起来你误解了静态变量。**每个类**将创建/初始化一个静态变量，而不是每个对象一次。

`getInstance()`当 $_instance 尚未初始化时，您的 if 语句将仅在第一次被调用时为真。然后将对 SomeOtherObject 的新实例的引用分配给它。

在所有后续调用中，if 将返回 false，并且现有的 $_instance 将被返回，而不是创建一个新的。

从 getInstance() 方法中删除 if 语句：

```
public static function getInstance($object, $timestamp) {
    return new self($object, $timestamp);
} 
```

# mysql - SQL Select 语句限制和描述顺序

> ID：14165231
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:25:27.017
> 
> 标签：mysql, sql, insert, limit

只需要有人告诉我这个语句是否有正确的语法；我无法让它正常工作。

```
SELECT plantname, orderfreq, totalincome 
FROM plantreview 
WHERE score >='5' 
AND recommended='1' 
ORDER BY score DESC, LIMIT +0, 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:30:20.317

假设 MySQL，在or`,`之后不应该有. 如果您的列是整数，则也不需要将其括在引号中。`ORDER BY``+``LIMIT`

```
SELECT plantname, orderfreq, totalincome 
FROM plantreview 
WHERE score >='5' 
AND recommended='1' 
ORDER BY score DESC
LIMIT 0, 5 
```

## [看到它在行动](http://sqlfiddle.com/#!2/02da2/1)

# python - 如何将图像路径转换为可以使用 ImageChops 的图像对象？

> ID：14165235
> 
> 赞同：0
> 
> 时间：2013-01-04T21:25:45.330
> 
> 标签：python, image-processing, python-imaging-library

我正在尝试使用 ImageChops 将目录中的所有 .tiff 文件一起添加，但我不断收到错误“IOError：无法识别图像文件”。我认为这只是尝试使用文件路径而不是图像对象的问题，但其他地方的类似代码没有这个问题。

```
def imadd():  #subcommand
    img1=Image.new('RGB',(2048, 2048))
    img1.save("summation.tif")
    for file in os.listdir(directoryname):
        if fnmatch.fnmatch(file, '*.tif'):
           im2 = Image.open("summation.tif", mode='r')
           im3 = Image.open(os.path.join(directoryname, file))
           finalimg = ImageChops.add(im2, im3, 1, 0)
           finalimg.save("summation.tif") 
```

通过跟踪和错误，所有部分都可以工作，除了：

im3 = Image.open（os.path.join（目录名，文件））。

我也尝试使用 glob.glob()，但仍然返回相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:05:01.230

While you can open and show 16 bit tiffs with PIL, ImageChops doesn't work. matplotlib and scipy have many more tools available.

Also im3 = Image.open(os.path.join(directoryname, file)) needs to be Image.open(unicode(os.path.join(directoryname, file)))

# android - Android 4.1 网络浏览器、Vimeo 视频和 Froogaloop API，问题？

> ID：14165237
> 
> 赞同：2
> 
> 时间：2013-01-04T21:25:58.377
> 
> 标签：android, vimeo

所以我在运行 Android 4.1 的 Android 设备（三星 Galaxy S3）上遇到了 Vimeo 播放器的问题。
在网络浏览器中，一旦视频开始播放，Android OS 网络浏览器似乎会将 iFrame 变成原生 HTML5 播放器。这似乎使 Froogaloop API 无用。
一个例子可以在这里看到：[http](http://www.dmns.org/science/museum-scientists/chip-colwell-chanthaphonh/mobile) ://www.dmns.org/science/museum-scientists/chip-colwell-chanthaphonh/mobile 。
单击“视频”选项卡，然后单击下一个和上一个箭头。箭头应该停止视频。那些应该“卸载”或停止/暂停视频，但他们没有。它适用于台式机和较旧的 Android 设备，但新的 Android 4.1 操作系统在选择箭头时播放器不会停止。注意：我没有下载 Android 版 Flash，也不想下载。

如果您有解决方案或任何建议尝试，那将有很大帮助。提前致谢。

# regex - Jmeter正则表达式可变行数

> ID：14165239
> 
> 赞同：2
> 
> 时间：2013-01-04T21:25:58.553
> 
> 标签：regex, xpath, jmeter

我的问题是，如何编写 Jmeter 正则表达式，以便解析文本中有多少行无关紧要？例如，正则表达式：

```
<FMSFlightPlan>\n(.*)\n(.*)\n(.*)\n(.*)\n(.*)\n(.*)\n(.*)</FMSFlightPlan> 
```

将匹配下面显示的 7 行字符串并返回两个标签之间的所有内容

```
<FMSFlightPlan>
8725
AN NTEST/GL 
- FPN/FN/RP:DA:GCRR:AA:LEMD:F:KORAL,N29439W012347.UG5\. 
SONSO,N30007W012061.UN871.VJF,N36144W005585.UN10\. 
HIJ,N38305W005060.Z230.SOTUK,N39116W004448 
</FMSFlightPlan> 
```

但是，相同的正则表达式将为以下 6 行字符串返回 NA：

```
<FMSFlightPlan>
C90D
AN N9696T/GL 
- FPN/FN/RP:DA:KDEN:AA:KSFO:F:DBL,N39264W106537.J80\. 
ILC,N38150W114237..RUMPS,N38072W117163..OAL,N38002W117462 
</FMSFlightPlan> 
```

我知道模板也必须设置为正确的行数，我不认为这是问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:05:05.390

事实证明，我需要建立 dotall 模式，它基本上告诉正则表达式提取器解析新行，就好像它们是空白一样。dotall 模式是通过将标签 (?s) 添加到正则表达式的开头来建立的，如下所示：

```
(?s)<FMSFlightPlan>(.*?)</FMSFlightPlan> 
```

但是...我仍然无法打印匹配的文本。由于某种原因，我正在使用的 Beanshell 断言无法将正则表达式引用名称识别为变量，并给我错误消息：

> 断言错误：true 断言失败：false 断言失败消息：org.apache.jorphan.util.JMeterException：调用 bsh 方法时出错：eval 源文件：内联评估：``import java.io.*; //将数据结果写入文件 outfile = "/Users/Dani . . . '' Token Parsing Error: Lexical error at line 12, column 380\. Encountered: "\n" (10), after : "\" 3811\t是\tAAR\tSTN\t835\t\t$B738\tfp,nradps,art,CCAAN,EXCD,wp00,p00\t37919\ta0\ti\t10\t0\t3\t0\t \t14\t 25 /M\t0000ADF\t140785\t133806\t006979\t01:15:00\t0484\t360\t0379\t360\t0112\t 000932\tP00 \t007115\t2013-02-13T21:23:00Z\t2013-02-1: 35:00+00:00\t000837\t00:10:00\t000000\t00:00:00\t000837\t00:10:00\t000000\t000000\t000000\t00:00:00\t000000\t00:00： 00\t"

我目前正在尝试使用用户定义的变量来确保 Beanshell 断言能够识别正则表达式。

感谢大家的回复！

# javascript - 三.js 更新相机矩阵世界

> ID：14165242
> 
> 赞同：0
> 
> 时间：2013-01-04T21:26:00.810
> 
> 标签：javascript, opengl-es, three.js, webgl, perspectivecamera

我试图让相机将一个立方体投影到一个立方体的图像中。我计算相机的内部和外部参数。我通过手动更改投影矩阵来更新相机内部矩阵。代码是：

```
camera.projectionMatrix.elements[i]= value; 
```

但是对于某些原因，当我想更新其外部参数时，通过更新 camera.matrixWorld 或 camera.matrixWorldInverse 没有任何反应。我使用这个代码：

```
 camera.matrixWorldInverse.elements[i]= value;
 camera.matrixWorld.elements[i]= value; 
```

如果我更新两者仍然没有任何反应。我究竟做错了什么？如何更新相机的外部参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:44:26.973

您的价值观可能会被覆盖。尝试这个：

```
camera.matrixAutoUpdate = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:22:02.263

`scene.updateMatrixWorld()`更改世界矩阵后尝试。

# asp.net - 我正在使用 sql select 命令选择日期在两个值之间的表中的所有记录

> ID：14165246
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:26:23.363
> 
> 标签：asp.net, vb.net, sqlcommand

这是我所拥有的，但目前它不起作用..

帮助？

```
sqlGVQuarterly.SelectCommand = "SELECT [CleaningID], [WorkType], [QuarterSection],
[BasinID], [RecordDate], [TotalFootage], [H2O], [GritRemoved], [StartingStreet],
[LocationPurpose], [Operators], [JobHours], [LaborHours], [ChaseTruckHours],
[VacTruckHours], [JetTruckHours] FROM [SanSewerCleaning] 
WHERE [RecordDate] BETWEEN '1/1/ + ddlSelectYear.SelectedValue' AND '3/31/+ ddlSelectYear.SelectedValue'" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:31:24.857

您正在错误地构建字符串：

```
sqlGVQuarterly.SelectCommand = "SELECT [CleaningID], [WorkType], [QuarterSection],
[BasinID], [RecordDate], [TotalFootage], [H2O], [GritRemoved], [StartingStreet],
[LocationPurpose], [Operators], [JobHours], [LaborHours], [ChaseTruckHours],
[VacTruckHours], [JetTruckHours] FROM [SanSewerCleaning] 
WHERE [RecordDate] BETWEEN '1/1/"  + ddlSelectYear.SelectedValue +
"' AND '3/31/" + ddlSelectYear.SelectedValue + "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:34:30.410

此外，如果您的时间/日期值默认为午夜，您将获得：

开始：1/1/YYYY 00:00:00 结束：3/31/YYYY 00:00:00

任何时间戳为 3 月 31 日午夜之后的记录都不会包含在您选择的记录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:31:26.260

您正在发送字符串文字“ddlSelectYear.SelectedValue”。确保在“1/1/”之后和“AND”之前有双引号。

您的代码应如下所示：

```
sqlGVQuarterly.SelectCommand = "SELECT [CleaningID], [WorkType], [QuarterSection],
[BasinID], [RecordDate], [TotalFootage], [H2O], [GritRemoved], [StartingStreet],
[LocationPurpose], [Operators], [JobHours], [LaborHours], [ChaseTruckHours],
[VacTruckHours], [JetTruckHours] FROM [SanSewerCleaning] 
WHERE [RecordDate] BETWEEN '1/1/" + ddlSelectYear.SelectedValue+"' AND '3/31/"+ ddlSelectYear.SelectedValue+"'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T21:31:53.187

您使查询字符串错误。我想你想要这样的东西：

```
sqlGVQuarterly.SelectCommand = "SELECT [CleaningID], [WorkType], [QuarterSection],
[BasinID], [RecordDate], [TotalFootage], [H2O], [GritRemoved], [StartingStreet],
[LocationPurpose], [Operators], [JobHours], [LaborHours], [ChaseTruckHours],
[VacTruckHours], [JetTruckHours] FROM [SanSewerCleaning] 
WHERE [RecordDate] BETWEEN '1/1/" + ddlSelectYear.SelectedValue + "' 
AND '3/31/" + ddlSelectYear.SelectedValue+"'"; 
```

因为值 ddlSelectYear.SelectedValue 在 SQL 引擎中不存在，它会抛出一个语法错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T21:34:18.280

我也会使用 yyyy-M-dd 模式，而不是这样：

```
WHERE [RecordDate] BETWEEN '" + ddlSelectYear.SelectedValue + "-01-01' AND '" + ddlSelectYear.SelectedValue + "-03-31'" 
```

# silverlight-5.0 - 主数据服务 Silverlight 错误

> ID：14165249
> 
> 赞同：3
> 
> 时间：2013-01-04T21:26:38.253
> 
> 标签：silverlight-5.0, master-data-services

我已经在我们的开发服务器上安装了 MDS，我可以浏览（并执行各种功能，例如添加用户或创建、添加实体）。但是我无法进入“资源管理器”。在这里，我得到两个 Silverlight 错误。
[HttpWebRequest_WebException_RemoteServer]
参数：未找到
调试资源字符串不可用
等....

服务器是 Win 2008 R2 标准
IIS 是 6.1 (Build 7601 SP1)
我们正在运行 SQL Server 2012
客户端正在运行 SL5 并且 SL5 SDK
IIS 设置为运行 SSL 和 Win Auth（根据跟踪日志，这是工作，它得到了校长）。其他一切都被禁用
IIS 可以连接到数据库（通过管理部分中的数据库管理器）
这发生在所有主要浏览器（IE、chrome、FF）上。

我已经打开了 MDS 的跟踪日志（设置为详细）并且我没有看到任何错误/警告
我也运行了 SQL 分析器并且没有看到任何让我相信并且错误发生在 sql 端的东西。事件查看器中也没有与 MDS/Silverlight 相关的任何内容。我不确定是否/如何远程调试到 MDS 网站（它是预安装和预编译的）

来自 web.config 的几个片段

```
<bindings>
  <wsHttpBinding>
    <binding name="mdsWsHttpBinding" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647" />
      <!--Non-SSL implementations.-->
      <security mode="Transport">
        <message clientCredentialType="UserName" />
        <transport clientCredentialType="Windows">
            <extendedProtectionPolicy policyEnforcement="WhenSupported" />
        </transport>
      </security>
    </binding>
  </wsHttpBinding>
  <basicHttpBinding>
    <binding name="mdsBasicHttpBinding" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647" />
      <!-- Non-SSL implementations.-->
      <security mode="TransportCredentialOnly">
        <message clientCredentialType="UserName" />
        <transport clientCredentialType="Windows">
            <extendedProtectionPolicy policyEnforcement="WhenSupported" />
        </transport>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>

.. <snip> ...
<system.diagnostics>
<sources>
  <!-- Adjust the switch value to control the types of messages that should be logged. 
       Use the a switchValue of Verbose to generate a full log. Please be aware that 
       the trace file can get quite large very quickly -->
  <source name="MDS" switchType="System.Diagnostics.SourceSwitch" switchValue="All">
    <listeners>
                <add name="LogFileListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="C:\Program Files\Microsoft SQL Server\110\Master Data Services\WebApplication\trace.log" traceOutputOptions="DateTime" />
        <add name="EtwListener" type="System.Diagnostics.Eventing.EventProviderTraceListener, System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" initializeData="{F2A341B8-CA5F-49ad-B00C-A82D3FCF948B}" /> 
        <remove name="Default" /> 

    </listeners>
  </source>
</sources>
<trace autoflush="true" /> 
```

如果有人认为跟踪日志会有所帮助（或其他任何东西），我可以将它们发布（但它们很大）。

我的问题是：我怎样才能调试，或者以某种方式获得更好的错误消息，为我指明正确的方向？

编辑：添加我在跟踪日志中发现：
MDS错误：0：服务启动成功，程序集版本：11.0.0.0，文件版本：11.0.3000.0（（SQL11_PCU_Main）.121019-1325）DateTime=2013-01-07T15 ：09：14.1660484Z
MDS错误：0：ApiContractVersion：5102 DateTime = 2013-01-07T15：09：14.2753968Z

编辑2：
我已经能够挖掘出另一个错误（在许多配置更改之后）。
在 Microsoft.MasterDataServices.Core.BusinessLogic.Member.GetEntityMembers（EntityMembers 成员，RequestContext 上下文，OperationResult 结果）SQL 错误调试信息：编号：229，消息：对象“MemberGetCriteria”，数据库“MDS”的执行权限被拒绝，架构'mdm'。，服务器：SERVERNAME，Proc：，行：0

：由于某种原因，“MemberGetCriteria”有一些权限错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-09T19:24:31.343

关于在 IIS 中运行应用程序池的服务帐户的权限的两件事：

1) 根据 IIS 要求，它必须具有“批量登录”权限，才能运行应用程序池；

2) 如果您在 MDS 网站上需要客户端证书，则 MDS 未设置为使用从 IIS Web 应用程序到 MDS\Service\service.svc\bhh 调用的证书，因此您需要将客户端证书设为可选该服务被调用。

web.config：我看到您设置尝试为两个 WCF 端点设置“传输”/HTTPS 安全性，但留下标签而不是标签。您必须确保您没有混合和匹配 SSL 和非 SSL 部分，并且您只注释掉了 Windows / NTLM（或 Kerberos，如果在后端设置）安全模式部分，并取消注释“SSL 实现”部分。

# jquery - 避免选择嵌套的 td。如何？

> ID：14165252
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:06.227
> 
> 标签：jquery, jquery-selectors, css-selectors

我有这个代码：

```
$("#widgetstable tr td:nth-child("+column+")").hide(); 
```

但它会选择恰好嵌套在所选 td 内的任何 td。（还有一对。）

我试过`$("#widgetstable > tr > td:nth-child("+column+")").hide();`了，但它没有选择任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:29:54.093

当您的浏览器解析您的 HTML 时，A`tbody`会[静默插入](https://stackoverflow.com/a/938143/16959)`>`，选择器表示父级的直接子级。对于以下 HTML，此选择器将起作用：

```
<style>
   td {
     background-color: blue;
   }
</style>
<table id='widgetstable'>
  <tr>
    <td>Me</td>
  </tr>
  <tr>
    <td>
      <table>
        <tr><td>Not Me</td></tr>
      </table>
    </td>
  </tr>
</table>
<script>
  $("#widgetstable > tbody > tr > td").css('background-color', 'red');
</script> 
```

[这是一个演示](http://jsfiddle.net/uGhgS/)

# vim - Vim 在文本前面插入

> ID：14165253
> 
> 赞同：1
> 
> 时间：2013-01-04T21:27:08.663
> 
> 标签：vim, editor, text-editor

假设我有这样的一行：

```
pick 22086f5 do something.... 
```

我可以将光标放在选择和删除单词中的“p”上，但是该行看起来像：

```
22086f5 do something.... 
```

我可以在 2 上进行替换并用“s”替换它，但这并不是我真正想要的。我想要的是一种无需进入插入模式即可插入 1 个字符的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:35:36.080

将光标放在`p`and do上可能是最简单的`ces<esc>`。如果您在缓冲区中有字母`s`，例如在 buffer 中`a`，您可以这样做：`de"aP`。如果你总是替换这个词`pick`，你也可以这样做`dtkrs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T01:03:56.950

您可以使用`vehdrs`删除所有没有最后一个字母的字母，然后用 替换最后一个字母`s`。或者，如果不需要空间，那么`ders`会很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:43:17.773

我通常也会使用`ces<Esc>`，但有时肌肉记忆更喜欢两种不同的动作。对于这些情况，类似以下的映射可能会有所帮助：

```
:nnoremap <Space> i$<Esc>r 
```

# cakephp - CakePHP 错误处理配置错误或可能是 apache？

> ID：14165256
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:12.370
> 
> 标签：cakephp

我在看到来自 CakePHP 的一些错误时遇到问题。我正在编写一个组件，将其添加到控制器的 $components 后，我收到 500 错误。除了它根本没有帮助。渲染的都是垃圾。它看起来像是压缩的或图像。我只看到带有问号的黑色菱形，混合着各种字符。

感谢您的帮助。我瞎了眼，因为我看不到哪里出了问题，也不知道如何解决这个问题。

# backbone.js - 在 Backbone 中将数据绑定到 DOM

> ID：14165257
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:12.823
> 
> 标签：backbone.js

这是我的 Backbone.js：

```
(function() {
    window.App = {
        Models: {},
        Collections: {},
        Views: {},
        Router: {}
    };

    window.template = function(id) {
        return _.template( $('#' + id).html() );
    };

    var vent = _.extend({}, Backbone.Events);

    App.Router = Backbone.Router.extend({
        routes: {
            '' : 'index',
            '*other' : 'other'
        },
        index: function() {

        },
        other: function() {

        }
    });

    App.Models.Main = Backbone.Model.extend({
        defaults : {
            FName: ''
        }
    });

    App.Collections.Mains = Backbone.Collection.extend({
        model: App.Models.Main,
        initialize: function() {
            this.fetch({
                success: function(data) {
                    console.log(data.models);
                }
            });
        },
        url: '../leads/main_contact'
    });

    App.Views.Mains = Backbone.View.extend({
        tagName: 'ul',
        initialize: function() {
            this.collection.on('reset', this.render, this);
            console.log(this.collection);
        },
        render: function() {
            return this.collection.each(this.addOne, this);
        },
        addOne: function(main) {
            var mainC = new App.Views.Main({ model: main});
            this.$el.append(mainC.render().el);
            return this;
        }
    });

    App.Views.Main = Backbone.View.extend({
        tagName: 'li',
        template: template('mainContactTemplate'),
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }

    });

    mains = new App.Collections.Mains();
    main = new App.Views.Main({ collection: mains});

    new App.Router;
    Backbone.history.start();
})(); 
```

我想要做的是将返回的数据`ul`绑定到一个名为`$('#web-leads')`. 给定这段代码，我该怎么做？顺便说一句，我已经在[此处](https://stackoverflow.com/questions/14162995/how-to-hook-async-backbone-event-to-display-of-html)发布了有关此内容的信息，并尝试将第一个答案和第二个答案结合起来。但我仍然没有将 HTML 和数据绑定到 DOM。数据在我的集合中正确地从服务器返回，所以我知道这不是问题。不用担心路由器的东西。那是为了以后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:56:56.433

通常，在 Backbone 中，您不会将数据放在 DOM 元素上：您将其放在包装该 DOM 元素的视图中。

话虽这么说，如果你真的想在元素上存储数据，jQuery 有一个功能：

```
$('#web-leads').data('someKey', 'yourData'); 
```

然后，您可以使用以下方法检索该数据：

```
$('#web-leads').data('someKey'); 
```

*** 编辑 ***

在与 OP 的评论讨论中，很明显，真正的目标只是将视图元素附加到页面上的元素。如果要附加到的元素是`#web-leads`，那么这可以通过以下方式完成：

```
$('#web-leads').append(theView.render().el); 
```

# android - Android ADB 在 Windows 7 上连接 Fuhu Nabi 2

> ID：14165258
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:17.587
> 
> 标签：android, windows-7, usb, adb

有关如何在 Windows 7 上将非 root Fuhu Nabi 2 连接到 Android ADB 的任何详细信息？生根不是一种选择。平板电脑上启用了 USB 调试。

我安装了 Android Composite USB Interface(android_winusb.inf) 和下面的 mods

```
 [Google.NTx86] and 
    [Google.NTamd64]
    ;Fuhu Nabi 2
    %SingleAdbInterface% = USB_Install, USB\VID_0955&PID_7000
    %CompositeAdbInterface% = USB_Install, USB\VID_0955&PID_7100&MI_01 
```

我知道机器 ADB 可以正常工作，因为我可以成功连接到 ASUS TF300T。带有 Nabi 2 的 ADB 可以在 MacOS 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:32:42.570

我也需要这个问题的答案。尽管能够很好地连接 Nexus 7，但我也无法找到为 ADB 连接 Nabi 2 的方法。Fuhu Nabi 网站上也没有驱动程序（诚然非常小而且很差）。

# algorithm - 将威尔逊的评级应用于多个项目

> ID：14165259
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:21.757
> 
> 标签：algorithm

我需要将[Wilson 的评分算法](http://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Wilson_score_interval)应用于多个项目以给出整体用户“分数”最好的方法是将所有喜欢 + 总数相加，并将这些直接传递到我的 ratingAverage 函数中吗？还是我应该将它们相加，除以项目数，然后将其输入 ratingAverage 函数？

我的 ratingAverage 函数只是通过采用 2 个参数来实现 Wilson 的评分算法；喜欢，总计（喜欢 + 不喜欢）

# c++ - 做while并切换错误

> ID：14165263
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:48.770
> 
> 标签：c++, switch-statement, do-while

错误是当我运行程序并键入`n`结束时选择它不会结束并不断重复第一个`cout`和默认值：

```
#include <iostream>
using namespace std;

int main()
{
    int x;
    float y,result=0,paid,change;
    do {
        cout<<"enter another choose or press (n/N) to end choosing ";
        cin>>x;
        switch (x)
        {
        case 1:
            {
                int a=5;    
                cout<<"enter the wighte you want in (Kg) : ";
                cin>>y;
                result=a*y;
                break;}
        default:
            cout<<"wrong choooose "<<endl;
        }

    }
    while (x='n');
    cout<<"your total= "<<result<<endl;
    cout<<"mony value paid = ";
    cin>>paid;
    change =paid-result;
    cout<<"the change = "<<change<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:31:09.293

抱歉，我完全错过了您在这里使用 C++ I/O。

您声明`x`为`int`，但输入字符文字`'n'`。转换将因 C++ I/O 流而失败，因此`x`永远不会设置。不要混淆你的数据类型；如果您想阅读 a`char`然后阅读 a `char`，对于`int`.

尝试这样的事情：

```
int x = 0;
do {
    if(!(cin >> x)) {
        cout << "enter a valid number" << endl;
        // clear fail flag
        cin.clear();      
        // consume newline
        cin.ignore(std::numeric_limits<streamsize>::max(), '\n'); 
    } else {
        // your logic here
    }
} while( x != -1 ); 
```

* * *

```
while (x='n'); 
```

这不是比较，而是分配，`'n'`转换为整数时的字符将始终评估为`true`，因此您的循环永远不会结束。

您的下一个问题是您想在输入*为* `'n'`时退出循环，而不是相反，所以它应该是......

```
while(x != 'n'); 
```

还要意识到，如果用户输入`110`，循环将退出。 `x`是`int`，字符文字的整数`'n'`值为`110`。它也将失败`'N'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:29:29.850

问题在于它`x`是一个*integer*，然后您将其与字符文字进行比较。

这在使用旧的 C 风格标准 I/O 时效果很好，它使用`int`而不是`char`，但在类型不同的 C++ 中不起作用。这意味着输入就行了

```
cin>>x; 
```

如果您没有输入有效的整数，将会失败。

更改`x`to的类型，`char`它应该可以工作。

还有赋值的问题，而不是里面的条件`while`。

# xml - 如何在 Flex 中获取 XML 分支的深度（级别数）

> ID：14165264
> 
> 赞同：0
> 
> 时间：2013-01-04T21:27:50.483
> 
> 标签：xml, apache-flex, depth, levels

例如，如果我有这样的 XML：

```
<country>
  <state name="a">
    <city>
      <neigbor name="n" />
    </city>
  </state>
  <state name="b">
  </state>
</country> 
```

分支 country 的最大深度为 3。因为您可以通过最深的节点：country(0) --> state(1) --> city(2) --> neigbor(3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:06:09.700

我不知道任何内置方法来获得 xml 的最大深度，但您的算法可以改进：

```
public function getXmlDepth(x:XML):int{
    var res:int = 0;                
    for each(var node:XML in x.children()){
        res=Math.max(res,getXmlDepth(node)+1);
    }
    return res;         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:22:15.500

朋友们！！！我使用递归算法编写了下一个代码来达到这个目标

```
 public function getMaxDeep() : int {
            var deep : int = getMaxDeepRecursive(dataProvider,0);
            return deep;
        }

        public function getMaxDeepRecursive(element:XML, deep : int) : int {
            if(element.children().length()==0) return deep;
            var maxDeep : int = 0;
            for each(var item : XML in element.children()) {
                var element : XML = item;
                var otherDeep : int = getMaxDeepRecursive(element,deep+1);
                if(otherDeep>maxDeep) maxDeep = otherDeep;
            }
            if(deep>maxDeep) maxDeep = deep;
            return maxDeep;             
        } 
```

但我想知道是否有另一种方法；）

# php - PHP字符串中的三元运算符

> ID：14165265
> 
> 赞同：14
> 
> 时间：2013-01-04T21:27:54.230
> 
> 标签：php, ternary-operator, ternary

我想在字符串中评估一个简单的三元运算符，但似乎找不到正确的语法。

我的代码如下所示：

```
foreach ($this->team_bumpbox as $index=>$member) 
    echo ".... class='{((1) ? abc : def)}'>...."; 
```

但我似乎无法让它正常工作。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-04T21:31:00.403

本质上，您不能在字符串*内部执行此操作。*您需要点连接。像这样的东西：

```
echo ".... class='" . (1 ? "abc" : "def") . "'>...."; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-03-21T12:45:05.100

好吧，您实际上*可以*这样做：

```
$if = function($test, $true, $false)
{
  return $test ? $true : $false;
};

echo "class='{$if(true, 'abc', 'def')}'"; 
```

我会让你决定是纯粹的优雅还是纯粹的疯狂。但是请注意，与真正的条件运算符不同，函数的两个参数总是被计算。

# eclipse - Maven eclipse tomcat部署比动态web项目部署慢

> ID：14165267
> 
> 赞同：1
> 
> 时间：2013-01-04T21:28:08.883
> 
> 标签：eclipse, web-services, tomcat, maven

Maven 是对 Eclipse 的一个很好的补充，但为什么与未使用 Maven 管理的类似项目相比，调试一个 Mavenized Web 服务项目需要将近 10 倍的时间？

例如，我有两个 Apache CXF 项目。一个是 Maven 项目，另一个只是一个普通的 Dynamic Web 项目。使用目标通过 Debug As -> Maven Build 调试前者： `clean package tomcat:run-war`甚至`clean tomcat:run-war` 从我启动调试操作到 Web 服务准备好调用仅需要大约 160 秒。但是，通过 Debug As -> Debug On Server 调试后者仅需 12 秒。这正在扼杀我通过使用 Maven 管理我的依赖项获得的任何生产力。

我看到 Maven 每次都在做什么，但看起来确实可以做一些优化来加快这个过程，特别是如果这个项目之前已经构建过。

对于一个试图将 Maven 推销给我的上级的人来说，这是一个严重的障碍。有什么建议或想法吗？

TIA。

# bash - 如何正确格式化文本文件以供所有人阅读

> ID：14165268
> 
> 赞同：1
> 
> 时间：2013-01-04T21:28:15.257
> 
> 标签：bash

在生成一些 MySQL 脚本后，我得到了一些输出表，我用 awk+printf 排列这些表，以使所有内容都完美对齐和美观。但是，当发送给其他任何人时，如果文件在 Windows、Blackberry 或 Android 中打开，它看起来很糟糕且未对齐。

有没有我可以确定每个人都能正确阅读的格式（除了 pdf 或图像）？现在的格式是：

```
$ file sample.txt 
sample.txt: UTF-8 Unicode text 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:56:16.670

听起来您正在使用终端会话典型的固定宽度字体（如 courier），并依靠它很好地排列您的数据。对于那些情况，它工作正常。此外，如果用户默认他们的邮件阅读器使用固定宽度的字体。

问题是您将消息发送给使用 GUI 工具（如 Outlook、Web 邮件客户端或许多其他工具）的人，该工具使用按比例间隔的字符，因此“1”占用的空间比“0”少（例如），然后你会得到一些丑陋的东西。

如果这是针对企业项目并且支持的邮件阅读器的范围有限，您应该能够将报告“包装”并指定固定宽度的字体。即使在企业组织中，这仍然不是完美的，如果您的用户群更广泛，那么确保每个人都获得格式完美的报告变得更加困难。也许您需要添加一些限定条件，例如“使用 xxx 邮件阅读器时呈现的最佳格式”。

您可以在此处发布到[https://webmasters.stackexchange.com/](https://webmasters.stackexchange.com/)并寻求有关简单 HTML 格式的建议，该格式很有可能正确呈现。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:56:56.240

最简单、最通用的格式化文本选项是 HTML。坚持使用 HTML 2.0 或 3.2（用于表格）将为客户提供最少的出错机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:59:54.373

这取决于您同事的技术知识，但我建议使用 CSV，因为这是大多数办公室中相对常见的格式。否则，是的，html 表格是一个很好的方法。

不确定数据的结构是什么，但您可以将其转换为逗号分隔的格式，或者使用 Perl/Python 脚本为您执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T22:06:29.137

如果您使用制表符 (ASCII 9)，您的表格即使是成比例的字体也应该排成一行。它并不完美，但大多数程序都能正确显示。要在 printf 中创建制表符，请将其指定为`\t`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T11:16:07.823

谢谢大家的意见。我的解决方案是：

1.  我尝试使用 txt2htm 来检查我的原始代码（我的意思是我的数据表）是如何被转换的。
2.  我安排了一些代码以使其成为最简单的方法。
3.  由于我的 txt 文件已经“很好”，我只需在我必须与他人共享的每个 txt 文件的开头和结尾插入以下代码。

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
    <pre>

    HERE GOES MY FIXED WIDTH TABLE

    </pre>
    </body>
    </html> 
    ```

这里的关键标签是`<pre>`，字面意思是：

> “`<pre>`标签定义了预格式化的文本。`<pre>`元素中的文本以固定宽度的字体（通常是 Courier）显示，并且保留了空格和换行符。”

# java - 从 Java 中的标记列表中提取数据

> ID：14165272
> 
> 赞同：0
> 
> 时间：2013-01-04T21:28:34.900
> 
> 标签：java, list, parsing, csv, token

我有一个字符串数组，我将它转换为一个列表，我通过下面代码片段中的 while 循环遍历该列表以解析 .CSV 文件。正在解析的 .CSV 文件的每行有 15 个元素，我想单独访问每个元素，以便可以将该数据传递给另一个函数。如何从令牌列表中逐一提取这些项目？

```
 try {
    CSVReader reader = new CSVReader(new FileReader(filePath), ',');

    // Reads the complete file into list of tokens.                  
    List<String[]> rowsAsTokens = null;

    try {
        rowsAsTokens = reader.readAll();
        } 
        catch (IOException e1) 
        {
        // TODO Auto-generated catch block
        e1.printStackTrace();
      }

    Iterator<String[]> rowsAsTokensIt = rowsAsTokens.iterator();

    while (rowsAsTokensIt.hasNext()) {
        for (String token : rowsAsTokensIt.next()) {
            System.out.print(token + " ");
        }
    System.out.println();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:33:50.943

要单独访问项目，请使用`[]`运算符。

```
while (rowsAsTokensIt.hasNext()) {
    String[] tokens = rowsAsTokensIt.next();
    yourMethod(tokens[0], tokens[1], ..., tokens[15]);
} 
```

甚至更短

```
for (String[] tokens: rowsAsTokens) {
    yourMethod(tokens[0], tokens[1], ..., tokens[15]);
} 
```

唉，Java 没有 splat 运算符，因此您必须拼出所有 15 个标记。在带有 splat 运算符的语言中，您只需编写`yourMethod(*tokens)`它，它就会为您发挥它的魔力。

# c++ - 帧减法 : OPEN CV:

> ID：14165273
> 
> 赞同：1
> 
> 时间：2013-01-04T21:28:36.783
> 
> 标签：c++, image-processing, opencv

在捕获两帧的差异时，我遇到了一个错误：

```
for(;;)
{   
    colourImage = cvQueryFrame(input);
    diff=cvCloneImage(colourImage);
    colourImage=cvQueryFrame(input);
    cvAbsDiff(colourImage,diff,subtract);
    cvCvtColor(subtract,greyImage,CV_RGB2GRAY);
    cvShowImage("bg subtracted ",greyImage);
    cvThreshold(greyImage, greyImage, 70, 255, CV_THRESH_BINARY);
    cvDilate(greyImage, greyImage, 0, 18);
    cvErode(greyImage, greyImage, 0, 10);
    cvShowImage("final",greyImage);
    cvWaitKey(33);
    :
    followed to contour extraction.
} 
```

显示“最终”窗口后，程序终止而不进入轮廓部分。显示以下错误：

```
 OpenCV Error: Assertion failed (src1.size == dst.size && src1.type() == dst.type()) in cvAbsDiff, file /home/ukri/src/OpenCV-2.4.2/modules/core/src/arithm.cpp, line 2786,terminate called after throwing an instance of 'cv::Exception' , what():  /home/ukri/src/OpenCV-2.4.2/modules/core/src/arithm.cpp:2786: error: (-215) src1.size == dst.size && src1.type() == dst.type() in function cvAbsDiff.AbortedOpenCV Error: Assertion failed (src1.size == dst.size && src1.type() == dst.type()) in cvAbsDiff, file /home/ukri/src/OpenCV-2.4.2/modules/core/src/arithm.cpp, line 2786terminate called after throwing an instance of 'cv::Exception'  what():  /home/ukri/src/OpenCV-2.4.2/modules/core/src/arithm.cpp:2786: error: (-215) src1.size == dst.size && src1.type() == dst.type() in function cvAbsDiff.Aborted 
```

我制作了 colourImage 、 diff 和减去相同的图像类型。错误仍然不断重复。

# xml - 功能类似于 Excel 中的 importxml？

> ID：14165276
> 
> 赞同：5
> 
> 时间：2013-01-04T21:28:48.527
> 
> 标签：xml, excel, xml-parsing, excel-2010, vba

我喜欢使用 Google Docs 函数 =importxml() 但想知道 Excel 2010 中是否有类似的功能？我似乎找不到让程序自动从链接的 XML 文件中提取数据的方法。

例如，我希望能够设置一个标题为“项目名称”的列，然后让下一列将上一列中用户输入的项目名称附加到此 url

```
http://util.eveuniversity.org/xml/itemLookup.php?name= 
```

然后解析生成的 XML 文件以返回类型 ID。这是在谷歌文档中使用

```
=importxml(concatenate("http://util.eveuniversity.org/xml/itemLookup.php?name=",A3);"//itemLookup/typeID") 
```

A3 是具有项目名称的列，在本例中为 Tritanium，并从生成的 XML 文件中导入数据

```
http://util.eveuniversity.org/xml/itemLookup.php?name=Tritanium 
```

它返回值 34。

我有一个大约 20 个项目名称的列表，每次打开文件时，谷歌文档都会自动更新项目 ID。Excel 2010 有没有办法复制这个功能？

谢谢！

将要

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-24T19:33:53.323

问题是从2013年开始的，已经过去了一段时间......

在 Excel 2013 中，有一个功能[WEBSERVICE](https://support.office.com/en-au/article/WEBSERVICE-function-0546a35a-ecc6-4739-aed7-c0b7ce1562c4)来加载 XML 文档，这正是您想要的。

还有 FILTERXML 可以使用 XPath 搜索加载的 XML 文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T00:20:27.053

您将需要编写自己的 UDF。

一种方法是使用`MSXML2`库，如下所示：

```
Function GetData(sName As String, sItem As String, Optional sURL = "") As Variant
    Dim oHttp As New MSXML2.XMLHTTP60
    Dim xmlResp As MSXML2.DOMDocument60
    Dim result As Variant
    On Error GoTo EH

    If sURL = "" Then
        sURL = "http://util.eveuniversity.org/xml/itemLookup.php?name="
    End If

    'open the request and send it'
    oHttp.Open "GET", sURL & sName, False
    oHttp.Send

    'get the response as xml'
    Set xmlResp = oHttp.responseXML
    ' get Item'
    GetData = xmlResp.getElementsByTagName(sItem).Item(0).Text

    ' Examine output of these in the Immediate window'
    Debug.Print sName
    Debug.Print xmlResp.XML

CleanUp:
    On Error Resume Next
    Set xmlResp = Nothing
    Set oHttp = Nothing
Exit Function
EH:
    GetData = CVErr(xlErrValue)
    GoTo CleanUp
End Function 
```

像这样调用它（其中`A5`包含 required `typeName`）

```
=GetData(A5, "typeID") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T08:47:37.003

```
Function ImportXML(url As String, query As String)

    Dim document    As MSXML2.DOMDocument60
    Dim http        As New MSXML2.XMLHTTP60

    http.Open "GET", url, False
    http.send

    Set document = http.responseXML

    ImportXML = document.SelectSingleNode(query).nodeTypedValue

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T01:33:41.653

数据菜单上的“来自网络”功能将在线数据直接拉入电子表格。XML 数据导入也可在 From Other Sources 子菜单下使用，该子菜单也列在数据菜单中。

创建的连接通过数据菜单上的连接对话框进行管理。

在创建“来自 Web”连接时使用记录宏的示例代码：

```
Sub Macro1()
' Macro1 Macro
With ActiveSheet.QueryTables.Add(Connection:= _
        "URL;http://en.wikipedia.org/wiki/Microsoft_Excel" _
        , Destination:=Range("$A$1"))
        .Name = _
        "?affID=110195&tt=270912_7a_3912_6&babsrc=HP_ss&mntrId=3e2fc48700000000000088532eb428ec"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingNone
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

# android - 生成旋转位图而不调整大小

> ID：14165277
> 
> 赞同：3
> 
> 时间：2013-01-04T21:28:49.173
> 
> 标签：android, matrix, bitmap, rotation

我正在尝试从单个图像的 20 个副本构建一个环，这是整个环的 1/20 切片。我生成的位图是将原始图像旋转到正确的度数。原始图像是一个 130x130 的正方形

![原片](../Images/d3798bef54bde06bd65fe80fc598d067.png)

生成旋转切片的代码如下所示：

```
Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.battery_green);
    FileOutputStream fos;
    for(int i = 0; i < 20; i++) {
        String idName = "batt_s_"+i;
        Matrix m = new Matrix();
        m.setRotate((i * 18)-8, bmp.getWidth()/2, bmp.getHeight()/2);

        Bitmap newBmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), m, true);
        try {
            fos = context.openFileOutput(idName+"_"+color+".png", Context.MODE_WORLD_READABLE);
            newBmp.compress(CompressFormat.PNG, 100, fos);
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        m.reset();
        BattConfigureSmall.saveInitPref(context, true);
    } 
```

这些生成的位图最终插入的 ImageView 在其 XML 中都有 scaleType="center"。但是，生成的输出如下所示：

![在此处输入图像描述](../Images/7cc55cbac5b8d0532a601f6ef59ae1d7.png)

不完全是完美的戒指。如果旋转正确，切片本身会形成完美的环，因为在 API 级别 11 及更高级别中，我在这些 ImageView 上使用 android:rotate XML 属性，但我还需要支持 API 级别 7-10，所以可以有人给我一些建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:02:31.513

在这种情况下不要使用矩阵`createBitmap`，我认为它会在图像大小方面做一些奇怪的事情。相反，创建一个新的`Bitmap`，`Canvas`然后用矩阵绘制到它：

```
Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.battery_green);
FileOutputStream fos;
Paint paint = new Paint();
paint.setAntiAlias(true);
Matrix m = new Matrix();

for(int i = 0; i < 20; i++) {
    String idName = "batt_s_"+i;
    m.setRotate((i * 18)-8, bmp.getWidth()/2, bmp.getHeight()/2);

    Bitmap newBmp = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(newBmp);
    canvas.drawBitmap(bmp, m, paint);

    try {
        fos = context.openFileOutput(idName+"_"+color+".png", Context.MODE_WORLD_READABLE);
        newBmp.compress(CompressFormat.PNG, 100, fos);
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    m.reset();
    BattConfigureSmall.saveInitPref(context, true);
} 
```

# codeigniter - Codeigniter，空白页，没有错误

> ID：14165283
> 
> 赞同：2
> 
> 时间：2013-01-04T21:29:11.700
> 
> 标签：codeigniter, controller

```
public function newreg()
    {
        $username = $this->input->post('username');
        $password = $this->input->post('password');

        $this->load->model('register_model');

        $data['list']=$this->register_model->add($username, $password);

        $this->load->view('register_display', $data);
    } 
```

这是名为 register.php 的控制器的一部分，一旦调用此函数，我在屏幕上看到的只是空白。

此功能是来自工作控制器的工作功能的精确副本。仅更改文件名（模型、视图）

我无法弄清楚问题出在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:51:57.143

您可以通过 enalbing 轻松检查整个环境中发生的情况`CI logs`，

去`config/config.php`编辑这个：

```
/*
|--------------------------------------------------------------------------
| Error Logging Threshold
|--------------------------------------------------------------------------
|
| If you have enabled error logging, you can set an error threshold to
| determine what gets logged. Threshold options are:
| You can enable error logging by setting a threshold over zero. The
| threshold determines what gets logged. Threshold options are:
|
|   0 = Disables logging, Error logging TURNED OFF
|   1 = Error Messages (including PHP errors)
|   2 = Debug Messages
|   3 = Informational Messages
|   4 = All Messages
|
| For a live site you'll usually only enable Errors (1) to be logged otherwise
| your log files will fill up very fast.
|
*/

  $config['log_threshold'] = 0; //put this to 4 
```

`/logs`然后，如果您的 /application 文件夹中还没有文件夹，请创建该文件夹并将其添加`775 chmod`到该文件夹​​（仅限日志文件夹）。

**更新：** *您还必须`chown apache:apache logs`为了让 apache 能够在该文件夹中写入。*

通过浏览器运行您的应用程序并在您`/logs`的文件夹中检查该`log.php`文件，它将包含`all the application errors`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T21:33:26.450

要查看错误而不是白页，您需要更改 php.ini 文件中的两个选项：

*   `error_reporting`至`E_ALL`
*   `display_error`至`On`

有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/2149321/why-does-code-igniter-give-me-a-white-page#answer-2149468)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:32:05.433

如果更改了文件名，还需要更改类名：

一个名为的文件`my_class.php`需要有： `class My_class extends CI_Controller {`

所以，如果你拿了一个工作控制器，复制它，然后重命名文件。然后你还需要重命名这个类。

# reporting - OpenERP 报告 - OpenOffice Writer 属性有什么用？

> ID：14165284
> 
> 赞同：1
> 
> 时间：2013-01-04T21:29:16.903
> 
> 标签：reporting, openerp, rml

我一直在搜索网络、该站点以及 OpenERP 报告的开发人员部分，但我找不到任何关于 Openwriter 属性/用户定义的用途的解释。

在编写第一份报告时花了一些时间，我得出了一些结论，但无法全部解决：共有三列：名称、类型和值。在我使用 Openwriter 打开的所有预定义 OpenERP 报告中，架构似乎总是相同的。四行，“信息 1”到“信息 4”，所有类型均为“文本”，然后是服务器位置、用户登录 ID、数字和表名。

我了解连接服务器时将使用服务器位置和用户登录 ID。我知道创建循环对象时将使用表名。

*   **问题 1：**但是通常对应于 Info 3 的数字是什么？我认为这可能是 ir_act_window 表中的 res_model id，但我发现了一个不匹配的报告（交叉分析）。知道这个数字是什么以及它是如何定义的吗？

**编辑答案 1：**它与绑定操作相关联。在为现有模型创建新报告时，该模型上的现有绑定操作值应加一（嗯，这是我尚未尝试过的理论）。

*   **问题2：**为什么Info 3 是数字时是“文本”类型？我猜这是 python 的解释，它就是这样，这是配置属性以使用 OpenERP 操作的唯一方法。有人可以确认吗？

*   **问题 3：**为什么当我添加 Info 5 和 Info 6，指向另一个表，希望在另一个表上创建一个循环时，它会被完全忽略？

*   **问题4：**为什么绑定到服务器时什么都不问，也不在任何地方添加报表？

**编辑答案 4：**请参阅答案 1，因为当将“信息 3”中的绑定操作索引更改为 OpenERP 中现有的绑定操作索引时，它会弹出绑定窗口。感谢您阅读到这里！我相信这些问题的答案将帮助很多人至少了解 Openwriter 和 OpenERP 之间的基本联系。

编辑：感谢 Amit 的格式，这种方式更具可读性，我将把它应用到我的下一条消息中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:40:25.270

不确定 Openwriter 是什么 - 我建议您尝试不同的报告引擎。最简单的 imo 是 webkit html 报告，您可以使用普通的 html 和“mako”模板代码来遍历对象。

# .htaccess - 使用 htaccess 删除尾随问号

> ID：14165287
> 
> 赞同：3
> 
> 时间：2013-01-04T21:29:26.600
> 
> 标签：.htaccess

有人可以帮我理解这段代码吗？

```
# Remove trailing ?
RewriteCond %{THE_REQUEST} ? HTTP [NC] 
RewriteRule .? /%{REQUEST_URI}? [R=301,L] 
```

基本上我有一个网站 www.example.com 正在生成指向 www.example.com/index.cfm 的链接？我需要它重定向到 www.example.com 以进行 SEO 复制。我设法删除了 index.cfm 但是？仍然留在那里（www.example.com/？）。如果它是最后一个字符，则尾部斜杠也会被删除。我在网上找到了这条规则，但我在 apache 中收到了“RewriteCond: bad flag delimiters”警报，但它什么也没做。

我也有一些页面，如 www.example.com/index.cfm?term=test 用于搜索，所以我只想去掉尾随的问号，而不是当我有附加查询时。

错误在 RewriteCond 中。我需要帮助了解这种情况以及为什么它不起作用，而不仅仅是答案。

以防万一这是整个htaccess：

```
RewriteEngine On
Rewritebase /

# remove trailing index.cfm
RewriteRule ^index.cfm(\?)?$ / [R=301,L]

# SEF URLs
SetEnv SEF_REQUEST false
RewriteRule ^[a-z\d\-]+/[a-z]\d+/? /index.cfm/$0 [NC,PT,QSA,E=SEF_REQUEST:true]
RequestHeader add SEF-Request %{SEF_REQUEST}e
RewriteCond %{HTTP:SEF_REQUES} ^true$ [NC]
RewriteRule . - [L]

# Remove trailing ?
RewriteCond %{THE_REQUEST} ? HTTP [NC] 
RewriteRule .? ^%{REQUEST_URI}? [R=301,L] 
```

注意：我在发布之前确实搜索了在线/stackoverflow，但没有找到解决我的问题的方法。

编辑：我还注意到我的 RewriteRule ^index.cfm(\?)?$ / [R=301,L] 正在删除 index.cfm，即使它不是 url 中的最后一件事，当我尝试搜索时会导致 404一些东西（www.example.com/index.cfm?term=test）如果有人可以纠正我并解释，那就太好了。谢谢。

EDIT2：不应重定向 www.example.com/index.cfm?term=test&a=dh&j=dhjsi。www.example.com/a/b/d/f/h/w/d 不应被重定向。www.example.com/index.cfm？并且 www.example.com/index.cfm 应该被重定向到 www.example.com。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T23:05:42.120

```
RewriteCond %{THE_REQUEST} ? HTTP [NC] 
RewriteRule .? ^%{REQUEST_URI}? [R=301,L] 
```

不起作用，因为`?`它是正则表达式的保留字符，您需要将其与空格一起转义。尝试：

```
RewriteCond %{THE_REQUEST} \?\ HTTP [NC] 
RewriteRule ^/?(index\.cfm)? /? [R=301,L] 
```

此外，您希望这条规则在您的`# remove trailing index.cfm`规则之下，而不是在最底层。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T11:40:45.057

# 1）案例1：去掉问号

```
http://example.com/page/subpage/?YOURSTRING=blabla 
```

重定向到

```
http://example.com/page/subpage/ 
```

然后在 .htaccess 的开头，插入：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{QUERY_STRING} YOURSTRING=(.*)
RewriteRule ^(.*)$ /$1? [R=301,L]
</IfModule>

# if wordpres isnot installed in root folder, then edit the fourth line to this
# RewriteRule ^(.*)$ /YOUR-WORDPRESS-DIRECTORY/$1? [R=301,L] 
```

# 2）案例2：从问号重定向到另一个链接

```
http://example.com/index.php?YOURSTRING=blabla&id=44 
```

重定向到

```
http://example.com/page/subpage/ 
```

采用：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{QUERY_STRING} YOURSTRING=blabla&id=44
RewriteRule ^(.*)$ http://example.com/page/subpage/? [R=301,L]
</IfModule> 
```

# sql - 我需要帮助将 SQL 查询重写为 LINQ 格式

> ID：14165291
> 
> 赞同：0
> 
> 时间：2013-01-04T21:29:38.827
> 
> 标签：sql, linq, entity-framework, linq-to-sql

我对 LINQ 还不熟悉，可以在语法上使用一些帮助。

谢谢！

下面的查询需要用 C# 的 LINQ 编写。

```
SELECT Galleries.GalleryTitle, Media.*
FROM Galleries 
INNER JOIN Media ON Galleries.GalleryID = Media.GalleryID
WHERE (Galleries.GalleryID = 150)
ORDER BY MediaDate DESC, MediaID DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:37:33.543

像这样的东西：

```
var query = db.Galleries
            .Join(db.Media, g => g.GalleryID, m => m.GalleryID, (g, m) => new {g, m})
            .Where(r.g.GalleryID == 150)
            .Select(res => new {res.g.GalleryTitle, Media = res.m}
            .OrderByDescending(o => o.Media.MediaDate)
            .ThenByDescending(o => o.Media.MediaID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:41:28.733

或者使用查询语法：

```
var query = from g in db.Galleries
            join m in db.Media on g.GalleryID equals m.GalleryID
            where g.GalleryID == 150
            orderby m.MediaDate descending, m.MediaID descending
            select new { g.GalleryTitle, Media = m }; 
```

# php - 如何显示存储在数据库中的路径中的图像？

> ID：14165293
> 
> 赞同：4
> 
> 时间：2013-01-04T21:29:46.210
> 
> 标签：php

我通过下面的代码将图像路径插入到数据库中，但我无法在 html 页面中显示它...图像的路径是`"images/"`如何显示实际图像？我很努力，但我要做的最多的是显示文件名而不是图像。

```
<?php
$mysqli = new mysqli("localhost", "root", "", "simple_login");

// TODO - Check that connection was successful.

$photo= "images/" . $_FILES["file"]["name"];

$stmt = $mysqli->prepare("INSERT INTO photo (photo) VALUES (?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("s", $photo);

$stmt->execute();

$stmt->close();

$mysqli->close(

?> 
```

这是我试图显示的图像...这仅显示带有路径的文件名.....

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("simple_login", $con);

$result = mysql_query("SELECT * FROM photo");

while($row = mysql_fetch_array($result))
{
echo $row['photo'];
echo "<br />";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:40:31.930

```
echo "<img src='".$row['photo']."' />"; 
```

# objective-c - 代码在部署后不起作用

> ID：14165300
> 
> 赞同：0
> 
> 时间：2013-01-04T21:30:05.707
> 
> 标签：objective-c, cocoa, busy-waiting

我的应用程序的线程中有以下代码：

```
while (true) {
    if (ready) {
        progressIndicatorController.value++;
        return;
    }
} 
```

就绪变量从委托方法更改。当我通过单击 Xcode 工具栏中的“运行”按钮打开应用程序时，此代码运行良好。但是，如果我打开此应用程序的 .app（我通过单击产品 > 存档然后按照步骤创建），则此代码将不再起作用。

`progressIndicatorController.value`永远不会增加，并且这个 if 语句永远不会计算为`true`. 什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:39:24.897

这可能是由编译器的优化引起的。

当您使用 Archive 构建时，XCode 在编译器中启用了优化，可以丢弃这种代码。我认为将 ready 变量设置为 volatile 可以解决您的问题，尽管如果我是您，我会尝试重写它，以免触发此问题。

您可以通过在方案下拉列表中选择编辑方案来启用优化进行测试。然后在 Run MyApp.app 中将 Build Configuration 设置为 Release。完成后不要忘记将其设置回 Debug，因为当优化开启时调试器会有些混乱（即你看不到大多数变量的值，一些断点可能会表现不规律，等等...... )

# sql - 查询：获取每个成员的最后一条记录

> ID：14165305
> 
> 赞同：1
> 
> 时间：2013-01-04T21:30:31.570
> 
> 标签：sql, ruby, sequel

给定一个表格（“表格”）如下（对于 CSV 样式感到抱歉，因为我不知道如何使用 Stack Overflow 编辑器使它看起来像一个表格）：

```
ID，成员，数据，开始，结束
1,001,abc,12/1/2012,12/31/2999
2,001,def,1/1/2009,11/30/2012
3,002,ghi,1/1/2009,12/31/2999
4,003,jkl,1/1/2012,10/31/2012
5,003,mno,8/1/2011,12/31/2011
```

如果使用 Ruby Sequel，我应该如何编写查询，以便获得以下数据集作为回报。

```
ID，成员，数据，开始，结束
1,001,abc,12/1/2012,12/31/2999
3,002,ghi,1/1/2009,12/31/2999
4,003,jkl,1/1/2012,10/31/2012
```

我从原始表中获取每个（不同）成员的最新（最大结束日期值）记录。

如果我将表转换为数组，我可以得到答案，但如果可能的话，我正在寻找 SQL 或 Ruby Sequel 查询中的解决方案。谢谢你。

额外的功劳：这篇文章的标题很蹩脚……但我想不出一个好的标题。如果你有，请提供一个更好的标题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:01:17.197

你的结果的标准是什么？

如果是键 1,3 和 4，您可以使用`DB[:mytable].filter( :id => [1,3,4])`（下面的完整示例）

有关使用 sequel 进行过滤的更多信息，请参阅[sequel 文档](http://sequel.rubyforge.org/documentation.html)，尤其是[Dataset Filtering](http://sequel.rubyforge.org/rdoc/files/doc/dataset_filtering_rdoc.html)。

```
require 'csv'
require 'sequel'

#Create Test data     
DB = Sequel.sqlite()
DB.create_table(:mytable){
  field :id
  field :member
  field :data
  field :start #should be date, not implemented in example
  field :end   #should be date, not implemented in example
}
CSV.parse(<<xx
id,member,data,start,end
 1,001,abc,12/1/2012,12/31/2999
 2,001,def,1/1/2009,11/30/2012
 3,002,ghi,1/1/2009,12/31/2999
 4,003,jkl,1/1/2012,10/31/2012
 5,003,mno,8/1/2011,12/31/2011
xx
 ).each{|x|
  DB[:mytable].insert(*x)
}
#Create Test data - end -

puts DB[:mytable].filter( :id => [1,3,4]).all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:06:49.033

在我看来，你是从错误的角度来解决问题的。ORM（以及 Sequel）在数据库之上代表了一个不错的 DSL 层，但在其之下，全是 SQL。因此，我会尝试以某种方式制定问题和答案，以获取 SQL 查询，该查询将返回您需要的内容，然后看看它如何翻译成 Sequel 的语言。

您需要按成员分组并获取每个成员的最新记录，对吗？

我会采用以下想法（大致）：

```
SELECT t1.*
FROM table t1
LEFT JOIN table t2 ON t1.member = t2.member AND t2.end > t1.end
WHERE t2.id IS NULL 
```

现在您应该了解如何在 Sequel 中执行左连接，并且您还需要给表起别名。不应该那么难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:40:26.097

这个的续集版本有点吓人。我能想到的最好的方法是使用子选择，因为您需要在两列上连接表和子选择，所以使用“连接块”，如[Querying in Sequel](http://sequel.rubyforge.org/rdoc/files/doc/querying_rdoc.html)中所述。这是上面 Knut 程序的修改版本：

```
require 'csv'
require 'sequel'

# Create Test data     
DB = Sequel.sqlite()
DB.create_table(:mytable){
  field :id
  String :member
  String :data
  String :start # Treat as string to keep it simple
  String :end   # Ditto
}
CSV.parse(<<xx
  1,"001","abc","2012-12-01","2999-12-31"
  2,"001","def","2009-01-01","2012-11-30"
  3,"002","ghi","2009-01-01","2999-12-31"
  4,"003","jkl","2012-01-01","2012-10-31"
  5,"003","mno","2011-08-01","2011-12-31"
xx
).each{|x|
  DB[:mytable].insert(*x)
}

# That was all setup, here's the query
ds = DB[:mytable]
result = ds.join(ds.select_group(:member).select_append{max(:end).as(:end)}, :member=>:member) do |j, lj, js|
  Sequel.expr(Sequel.qualify(j, :end) => Sequel.qualify(lj, :end))
end
puts result.all 
```

这给了你：

```
{:id=>1, :member=>"001", :data=>"abc", :start=>"2012-12-01", :end=>"2999-12-31"}
{:id=>3, :member=>"002", :data=>"ghi", :start=>"2009-01-01", :end=>"2999-12-31"}
{:id=>4, :member=>"003", :data=>"jkl", :start=>"2012-01-01", :end=>"2012-10-31"} 
```

在这种情况下，用直接的 SQL 替换最后四行可能更容易。就像是：

```
puts DB[
  "SELECT a.* from mytable as a 
  join (SELECT member, max(end) AS end FROM mytable GROUP BY member) as b 
  on a.member = b.member and a.end=b.end"].all 
```

这会给你同样的结果。

# javascript - 如何在下拉菜单中获取选定的文本而不是值

> ID：14165315
> 
> 赞同：3
> 
> 时间：2013-01-04T21:31:10.963
> 
> 标签：javascript, jquery

我正在尝试为我的下拉菜单获取用户选择的文本。

我有

```
 var selectMenu=document.createElement('select');
            selectMenu.className='menu';

        for(var i=0; i<array.length; i++){

           var option=document.createElement('option');
               option.className='option';
               option.innerHTML=array[i].name;
               option.value=array[i].id;

            selectMenu.appendChild(option);
         }

         $(selectMenu).change(function(){

           //i want to get the selected text here

           //I know I could get value by using $(this).val()
           //but not sure how to get the selected text here.

         }) 
```

我用谷歌搜索了这个问题，我发现的都是

```
$('#menu option:selected).text(). 
```

反正有什么我需要的吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:36:57.660

如果你有类似的东西

```
<select>
    <option value='1'> SO</option>
    <option value='2'>GOOGLE</option>
</select> 
```

你可以试试

```
$("select").change(function(e){
    console.log($(":selected",this).text());
}); 
```

[http://jsfiddle.net/Ykzp7/](http://jsfiddle.net/Ykzp7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:34:52.010

尝试`$('.menu option:selected).text()`而不是`$('#menu`...

# apache - 将 apache 重写规则 (.htaccess) 转换为 nginx

> ID：14165318
> 
> 赞同：0
> 
> 时间：2013-01-04T21:31:21.673
> 
> 标签：apache, mod-rewrite, nginx

**背景：**

我想在运行 nginx 的 Ubuntu 服务器上设置[Bugify 。](https://bugify.com/)我按照说明安装了依赖项，安装成功。一旦我输入我的许可证密钥并单击“安装 Bugify”，它就会重定向到[http://dev.mysite.com/login?new](http://dev.mysite.com/login?new)，我看到的唯一内容是`404 Not Found`.

我知道 nginx 不受官方支持，但根据[支持论坛](http://support.bugify.com/kb/installing-and-updating/can-i-use-nginx)，应该可以运行它。

**问题：**

在 webapp 的公共目录中有一个`.htaccess`包含重写规则的文件，我猜导致 404 错误的问题是 nginx 无法使用该`.htaccess`文件，所以我必须将重写规则转换为 nginx 语法。

我不太熟悉 apache 的重写规则，所以我需要一些帮助来解决这个问题。

.htaccess 文件的内容是：

```
# Rewriting
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我正在使用[这个工具](http://www.anilcetin.com/convert-apache-htaccess-to-nginx/)来转换规则，但它在使用`-`标志时遇到了一些问题。

```
#ignored: "-" thing used or unknown variable in regex/rew 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:39:16.527

Bugify 使用 Zend 框架，因此 ZF 的重写规则也适用于 Bugify。我已经从[http://wiki.nginx.org/Zend_Framework复制了下面建议的 nginx 配置](http://wiki.nginx.org/Zend_Framework)

```
server {
  listen 80;
  server_name www.example.com;
  root /var/www/www.example.com/myapplication;
  index  index.html index.htm index.php;

  location / {
    # This is cool because no php is touched for static content
    try_files $uri $uri/ /index.php;
  }

  location ~ \.php$ {
    fastcgi_pass      unix:/usr/local/zend/tmp/php-fastcgi.socket;
    fastcgi_index    index.php;
    fastcgi_param   SCRIPT_FILENAME /var/www/www.example.com/myapplication$fastcgi_script_name;
    include               fastcgi_params;
  }
} 
```

# c# - 如何从字符串中删除多余的点空格以使用 C# Regex 构建小数？

> ID：14165323
> 
> 赞同：0
> 
> 时间：2013-01-04T21:31:27.400
> 
> 标签：c#, regex, string, decimal-point

**输入**：有数字的字符串，还有一个字符串、点和空格。请注意，它`e`定义了数字之间的分隔符。

```
e.27.3.90.. .e 3.50 2.30..e2.0.1.2\. .50.. 
```

**输出**：我想删除所有空格和那些额外的点，除了那些构成跟随并添加一个`,`之前的点`e`，

```
,e273.90,e3502.30,e2012.50 
```

*   最好的收获是[如何去除多余的小数点？](https://stackoverflow.com/questions/8139642/how-to-remove-extra-decimal-points). 但它基于`Javascript` `parseFloat()`.

*   我还看到了这篇文章：[转换为有效的十进制数据类型](https://stackoverflow.com/questions/7711358/convert-to-valid-decimal-data-type)。但这是在`SQL`使用多个`replace()`.

PS：关于`regex`各种类型的帖子太多了。我试图建立一个，但到目前为止似乎没有成功。

1.  请提出任何有效的一击`regex`或想法。
2.  想听听这个`regex`与多个的性能增益/损失`replace()`

这是我一直在*喘气*的代码;)..：

```
 List<string> myList;     
      string s = "";     
      string s2 = "";          
      string str = "e.27.3.90..bl% .e 3.50 2.30\. #rp.e2.0.1.2..50..y*x";
      s = Regex.Replace(str, @"\b[a-df-z',\s]+", "");                               
      myList = new List<string>(Regex.Split(s, @"[e]")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:12:34.227

最后`str`是你的结果

```
 string str = "e.27.3.90..bl% .e 3.50 2.30\. #rp.e2.0.1.2..50..y*x";
     str = Regex.Replace(str, "[^e^0-9]", "");
     str = Regex.Replace(str, "([0-9]{2}?)(e|$)", ".$1,$2");

     //str = "," + str.Substring(0, str.Length - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:01:59.997

1.  从字符串中删除所有点。
2.  在每个“e”处将字符串拆分为单独的项目。
3.  对于每个项目，在最后 2 位数字前添加一个点。
4.  将项目重新组合成一个字符串，在项目之间放置一个逗号。

使用标准字符串方法可以轻松执行这些步骤，但如果需要，您可以使用正则表达式。

# java - java中有堆吗？

> ID：14165325
> 
> 赞同：102
> 
> 时间：2013-01-04T21:31:33.280
> 
> 标签：java, heap

我正在将 C++ 库移植到 Java，我需要一个堆数据结构。有标准实现还是我需要自己做？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2019-09-07T12:52:36.613

对于 Java 8，更新现有[答案](https://stackoverflow.com/a/54665261/319876)：

您可以将 Java 优先级队列用作堆。

**最小堆：** -> 保持最小元素始终在顶部，因此您可以在 O(1) 中访问它。

```
PriorityQueue<Integer> minHeap = new PriorityQueue<Integer>(); 
```

**Max Heap:** --> 保持最大元素始终在顶部，与上面的顺序相同。

```
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder()); 
```

这与其他答案的建议相同`(Integer o1, Integer o2) -> Integer.compare(o2, o1)`或相同。`- Integer.compare(o1, o2)`

您可以使用：
`add`--> 将元素添加到队列中。O(log n)
`remove`--> 获取并删除最小值/最大值。O(log n)
`peek`--> 获取，但不删除最小值/最大值。O(1)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-02-13T08:07:09.990

最小堆：

```
PriorityQueue<Integer> minHeap = new PriorityQueue<Integer>(); 
```

最大堆：

```
PriorityQueue<Integer> maxHeap = new PriorityQueue<Integer>(new Comparator<Integer>() {
    @Override
    public int compare(Integer o1, Integer o2) {
        return - Integer.compare(o1, o2);
    }
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-04-12T10:27:38.247

在 Java中[PriorityQueue](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/PriorityQueue.html)可以用作堆。

**最小堆**

```
PriorityQueue<Integer> minHeap = new PriorityQueue<>(); 
```

**最大堆**

```
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder()); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-05-12T23:42:50.023

PriorityQueue 使用堆。根据[https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html](https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html)上的 oracle 文档，它似乎很可能是二进制堆的实现。我不认为斐波那契或配对堆的正式实现，尽管我很想看到两者中的任何一个可用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-30T10:43:51.237

不，没有，但您可以将优先级队列用作堆。Oracle 正式告知它使用优先级队列作为堆，您也可以参考[此链接](https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html)以获得进一步说明。

```
PriorityQueue<Integer> MinHeap = new PriorityQueue<>();

PriorityQueue<Integer> MaxHeap = new PriorityQueue<>(Comparator.reverseOrder()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T15:27:19.567

自 1.5 起可用的Java 文档`PriorityQueue`是要使用的类。

此代码用于创建一个具有默认初始容量 (11) 的 PriorityQueue，它根据元素的*[自然顺序](https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)*`Min Heap` *对其元素进行*排序，其中最小值位于顶部。

```
//MIN HEAP
PriorityQueue<Integer> minHeap = new PriorityQueue<>();
//equivalent to 
PriorityQueue<Integer> minHeap = new PriorityQueue<>(11); 
```

如果要实现特殊排序，则需要使用此构造函数覆盖比较器

```
PriorityQueue​(int initialCapacity, Comparator<? super E> comparator); 
```

从 1.8 开始我们也有这个版本

```
PriorityQueue​(Comparator<? super E> comparator); 
```

这可以帮助您`Max Heap`以更优雅的方式创建，例如

```
//MAX HEAP
PriorityQueue<Integer> maxHeap = 
new PriorityQueue<>((n1,n2) -> Integer.compare(n2,n1));
//equivalent to 
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder()); 
```

对于特殊情况，请查看此示例，该示例显示自定义对象的自然排序，在我们根据客户到虚构餐厅的距离为客户排序的场景中

```
import java.util.List;
import java.util.PriorityQueue;

public class DeliveryHandler {

    private static final Address restaurant = new Address(5.0, 5.0);

    private static class Address implements Comparable<Address> {
        public double x, y;

        public Address(double x, double y) {
            this.x = x;
            this.y = y;
        }

        public double distanceToShop() {
            return Math.pow(restaurant.x - x, 2) + Math.pow(restaurant.y - y, 2);
        }

        @Override
        public int compareTo(Address other) {
            return Double.compare(this.distanceToShop(), other.distanceToShop());
        }

        @Override
        public String toString() {
            return "Address {x=%s, y=%s}".formatted(x, y);
        }
    }

    public static void main(String[] args) {
        List<Address> customers = List.of(
                new Address(13, 14),
                new Address(3, 1),
                new Address(9, 20),
                new Address(12, 4),
                new Address(4, 4));

        PriorityQueue<Address> queueServingClosest = new PriorityQueue<>();
        queueServingClosest.addAll(customers);
        while (!queueServingClosest.isEmpty()) {
            System.out.println(queueServingClosest.remove());
        }

        /* Prints
        Address {x=4.0, y=4.0}
        Address {x=3.0, y=1.0}
        Address {x=12.0, y=4.0}
        Address {x=13.0, y=14.0}
        Address {x=9.0, y=20.0}
         */

        PriorityQueue<Address> queueServingFurthest = new PriorityQueue<>(
                (a1, a2) -> Double.compare(a2.distanceToShop(), a1.distanceToShop())
        );
        queueServingFurthest.addAll(customers);
        while (!queueServingFurthest.isEmpty()) {
            System.out.println(queueServingFurthest.remove());
        }

        /* Prints
        Address {x=9.0, y=20.0}
        Address {x=13.0, y=14.0}
        Address {x=12.0, y=4.0}
        Address {x=3.0, y=1.0}
        Address {x=4.0, y=4.0}
         */
    }
} 
```

参考文献

1- [https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html](https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

2- [https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/PriorityQueue.html](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/PriorityQueue.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-26T09:12:08.113

您还可以考虑[TreeSet](https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)，它保证基本操作（添加、删除、包含）的 log(n) 时间。

# php - 数组php的显示元素

> ID：14165326
> 
> 赞同：0
> 
> 时间：2013-01-04T21:31:37.357
> 
> 标签：php, html, printing, echo

我有这个 PHP/HTML 代码：

```
<table>                                                                                        
  <tr>
    <td>Region:</td>
    <td>
      <select style="width:200px" name="region"> 
      <?php for( $i=0;$i<sizeof($regions);$i++) { ?>
      <option value=<?php echo($regions[$i]) ;?>><?php echo( $regions[$i]) ;?></option> 
      <?php }?>
      </select>  
    </td>
</tr> 
```

问题是显示的值是`( Array )`. 我试图替换`echo`为`printf`，`sprintf`但我得到了相同的结果。但是，如果我将其替换为`print_r`我现在拥有此信息`(Array ([0] => Alaska[region] => Alaska)`。

我需要知道我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:36:57.927

如果你得到`Array`你的输出，那么你实际上是在做类似的事情：

```
$x = array();
echo $x; 
```

例如，您不是在输出数组的元素，而是在尝试输出整个数组。

这意味着`$regions[$i]`它本身就是一个数组，你需要一个子索引，例如`$regions[$i][1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:43:17.157

尝试这个

```
foreach($regions as $region)
      <option value=<?php echo($region['region']) ;?>><?php echo( $region['region']) ;?></option> 
    <?php }?> 
```

# javascript - kmz 文件未显示在谷歌地球插件中 - 必须缩放才能显示

> ID：14165327
> 
> 赞同：2
> 
> 时间：2013-01-04T21:31:43.127
> 
> 标签：javascript, kml, google-earth-plugin, kmz

我必须使用 google earth 插件在我的网站中显示大型 kml 文件。模型似乎总是正确下载但未显示：有时我必须右键单击插件 5 或 6 次才能看到正在显示的模型。之后，如果我重新加载页面，它会正确显示。

我正在使用以下代码：

```
<script type="text/javascript" >
google.load("earth", "1");
var ge;
function init() {
    google.earth.createInstance('map3D', initCB, failureCB);
}

function initCB(instance) {
    ge = instance;
    ge.getWindow().setVisibility(true);
    ge.getNavigationControl().setVisibility(ge.VISIBILITY_SHOW);

    google.earth.fetchKml(ge, "<?php echo $kmz ?>", function(kmlObject) {
        if (kmlObject)
            {
                var la = ge.createLookAt('');
                la.set(<?php echo $lat ?>, <?php echo $long ?>, <?php echo $alt+500 ?>, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 45, 10);
                ge.getView().setAbstractView(la);

                ge.getFeatures().appendChild(kmlObject);

            }
    });

 }
     function failureCB(errorCode) {
        alert("failure");
}

google.setOnLoadCallback(init);  
</script> 
```

我也尝试使用 createNetworkLink 但问题仍然存在。我应该改变什么才能让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:12:21.933

It is simply the model taking time to load into the plug-in that is causing the problem. I have tested it in a number of browsers on a few OSs and the behaviour is the same in all cases.

The reason it works on subsequent page reloads is that the plug-in is caching the data so it isn't actually fetching the data a second time.

The zooming out, zooming in isn't doing anything to load the model any faster - it is simply passing the time until it loads.

On every test I have done the model always loads - but can take between 2 and 10 seconds to display...

There isn't a great deal you can do about this other than to try and optimise the .dae and image file within your KMZ archive to reduce the file size. This will make the model load and display faster than it currently does.

# c# - LINQ Select distinct on DataTable 不起作用

> ID：14165335
> 
> 赞同：3
> 
> 时间：2013-01-04T21:32:08.070
> 
> 标签：c#, vb.net, linq, datatable

我有以下数据表 - 假设被称为`MyTable`：

```
Col1:    Col2:    Col3:    Col4:
1        abc      def      <null>
2        abc      def      ghi
1        abc      def      <null>
3        abc      def      <null>
1        abc      def      <null> 
```

我正在尝试获取不同的行：

```
Col1:    Col2:    Col3:    Col4:
1        abc      def      <null>
2        abc      def      ghi
3        abc      def      <null> 
```

我尝试了以下 LINQ 语句：

```
MyTable = (From dr As DataRow In MyTable Select dr).Distinct.CopyToDataTable 
```

但它会将带有重复行的原始数据表返回给我。

我做错了什么，我怎样才能得到我想要的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:35:14.857

`Distinct`依赖于所有实现`IEquatable`和/或具有和的合理实现的`GetHashCode`对象`Equals`。`DataRow`班级……没有。它不检查`Equals`方法中每一列的值是否相等，它只是使用默认实现，也就是说它检查引用是否相等，这不是你想要的。

您可以提供自己的`IEqualityComparer`，因为您无法更改`DataRow`.

如果您将其实例提供给 to ，则以下内容应该有效`Distinct`：

```
public class DataRowComparer : IEqualityComparer<DataRow>
{
    public bool Equals(DataRow x, DataRow y)
    {
        for (int i = 0; i < x.Table.Columns.Count; i++)
        {
            if (!object.Equals(x[i], y[i]))
                return false;
        }
        return true;
    }

    public int GetHashCode(DataRow obj)
    {
        unchecked
        {
            int output = 23;
            for (int i = 0; i < obj.Table.Columns.Count; i++)
            {
                output += 19 * obj[i].GetHashCode();
            }
            return output;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:37:06.630

试试这样；

```
var distinctRows = (from DataRow dRow in MyTable.Rows
                    select new {col1=dRow["Col1"],col2=dRow["Col2"], col3=dRow["Col3"], col4=dRow["Col4"]}).Distinct();

foreach (var row in distinctRows) 
{
 //
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:36:19.300

问题是`DataRow`你`DataTable`的每一个都是不同的对象。每一个都是一个实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T22:01:57.520

尽管@Servy 的问题确实是正确的方法 - 非常感谢 Servy！我还找到了另一个至少看起来更干净的解决方案：

```
 MyTable = MyTable.DefaultView.ToTable(True) 
```

这允许您只要求不同的记录，但通过 LINQ 执行它的原始请求否定 - 想我会为将来查看此问题的其他人添加它。

# android - 如何保存和检索 android 小部件 ID

> ID：14165339
> 
> 赞同：1
> 
> 时间：2013-01-04T21:32:30.587
> 
> 标签：android

我已经设置了这样的小部件

ToggleWidget.java

```
 public class ToggleWidget extends AppWidgetProvider {

    static RemoteViews remoteViews;
    boolean status = false;
    static int appWidgetId;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        final int N = appWidgetIds.length;

        // Perform this loop procedure for each App Widget that belongs to this provider
        for (int i=0; i<N; i++) {
            appWidgetId = appWidgetIds[i];

            remoteViews = new RemoteViews(context.getPackageName(), R.layout.toggle_widget);
            Intent intent = new Intent(context.getApplicationContext(), WakeService.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent pendingIntent = PendingIntent.getService(
                    context.getApplicationContext(), 0, intent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.bulb_widget, pendingIntent);

            if (WakeService.isAwake) {
                remoteViews.setImageViewResource(R.id.bulb_widget, R.drawable.bulb_on);

            }
            else {
                remoteViews.setImageViewResource(R.id.bulb_widget, R.drawable.bulb_off);

            }

         // Tell the AppWidgetManager to perform an update on the current app widget
            appWidgetManager.updateAppWidget(appWidgetId, remoteViews);

        }
    }

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onDeleted(context, appWidgetIds);

    }

} 
```

如何保存我创建的每个小部件的 ID 并删除我使用 sharedPreferences 删除的那些？

同样来自一项服务，我想像这样更新小部件

```
private void updateWidget(){

    Intent intent = new Intent(this,ToggleWidget.class);
    intent.setAction("android.appwidget.action.APPWIDGET_UPDATE");
    int[] ids = {ToggleWidget.appWidgetId};
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,ids);
    sendBroadcast(intent);
} 
```

如何从服务中检索保存的 ID 以进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:39:27.347

在您的 Reciever 类中，只需覆盖**onCreate()**方法并在该方法下，

```
int[] ids = getIntent().getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS); 
```

然后你会得到 int 数组，请检查它，它会工作...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:17:44.530

看看 android 的[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)选项。这是您可以使用 SharedPreferences 的方法...

```
public class MyService extends Service{

            //Class used to store data
            private SharedPreferences preferences;
            private int[] ids;
            private int numIds;

            public void retreiveIds(){
                preferences = PreferenceManager.getDefaultSharedPreferences(this);
                numIds = preferences.getInt("num",0);
                ids = new int[numIds];
                for(int i=0;i<numIds;i++){
                    ids[i] = preferences.getInt("ID"+i,0);
                }
            }

            public void saveIds(){
                SharedPreferences.Editor ed = preferences.edit();
                numIds = ids.length;

                //iterate through array and save each id
                for(int i=0;i<numIds;i++){
                    ed.putInt("ID"+i,ids[i]);
                }

                ed.putInt("num",numIds);
                ed.commit();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-12T06:29:50.217

还有另一种方法可以做到这一点。kotlin 中的代码：

```
val thisWidget = ComponentName(context, this.javaClass)
val allWidgetIds: IntArray = appWidgetManager.getAppWidgetIds(thisWidget) 
```

现在您可以使用这些`allWidgetIds`来更新小部件。

# objective-c - 扩展 UIKit 类的类属性（无法访问 @implementation）

> ID：14165340
> 
> 赞同：-3
> 
> 时间：2013-01-04T21:32:41.773
> 
> 标签：objective-c, ios, uikit

> **可能重复：**
> [子类 UIButton 添加属性](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property)

我正在尝试找到一种扩展 UIButton 的方法，以便它可以具有类似的属性

```
@property(assign, nonatomic) id userInfos; 
```

没有子类化它......

这可能吗？

在`button.tag`我的情况下还不够......

好的，这里有更好的答案

[子类 UIButton 添加属性](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:38:55.360

这很容易使用 Objective-C 关联对象：

在您的标题中：

```
@interface UIButton (MyCustomProperty)
@property (readwrite, retain, nonatomic) id myCustomProperty;
@end 
```

在您的实现文件中：

```
#include <objc/runtime.h>

/* Associated objects need a unique memory location to use as a key. */
static char MyCustomPropertyKey = 0;

@implementation UIButton (MyCustomProperty)
/* Use @dynamic to tell the compiler you're handling the accessors yourself. */
@dynamic myCustomProperty;

- (id)myCustomProperty {
    return objc_getAssociatedObject(self, &MyCustomPropertyKey);
}

- (void)setMyCustomProperty: (id)anObject {
    objc_setAssociatedObject(self, &MyCustomPropertyKey, anObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
@end 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:38:46.967

您可以使用 Objective-C 运行时的关联对象函数将一个对象与另一个对象*关联：*

> void objc_setAssociatedObject(id object, void *key, id value, objc_AssociationPolicy 策略)
> 
> id objc_getAssociatedObject(id object, void *key)

此外，投票结束。副本：

[如何通过类别扩展向 NSMutableArray 添加属性？](https://stackoverflow.com/questions/4071500/how-to-add-properties-to-nsmutablearray-via-category-extension)

[为我的所有类添加自定义行为和状态](https://stackoverflow.com/questions/13236876/adding-custom-behavior-and-state-to-all-my-classes/13237017#13237017)

在许多其他人中。

编辑：

我也同意@Paul.s 对您的问题的评论。将数据附加到按钮听起来很混乱。在不知道您在做什么的情况下，我建议您标记按钮，然后让您的视图控制器处理根据按钮的标签获取您需要的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:41:27.750

您想要的是创建一个 UIButton[类别](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Category.html)。类别被设计为扩展现有类的功能的一种方式。一旦创建了一个设置，您只需要导入该类别，您就可以在它设计的类的任何实例上使用它的功能。

# ios - 在 tableview 标题中使 UIButton 可访问（可访问性）

> ID：14165341
> 
> 赞同：0
> 
> 时间：2013-01-04T21:32:46.230
> 
> 标签：ios, accessibility

我似乎找不到和我有同样问题的人。我所有的表格视图单元格都非常适合可访问性，但我的标题似乎没有。我的标题视图中有一个按钮，它对可访问性不起作用......有人可以帮我解决这个问题吗？

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    UIButton *button = [[[UIButton alloc] initWithFrame: CGRectMake(282, 10, 28, 28)] autorelease];
    button.isAccessibilityElement = TRUE;
    button.titleLabel.text = @"Informatie";

    [button addTarget:self action:@selector(infoButtonAction:) forControlEvents:UIControlEventTouchUpInside];
    [cell addSubview:button];
} 
```

我意识到我对这句话的解释很糟糕。我的意思是，该按钮可以正常工作，只是不适用于在手机上启用了辅助触摸功能的用户。电话没有“显示”帮助残疾用户的声音。而且我确实收到了日志错误“AX 错误：找不到我的模拟父母，很可能我已经过时了。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:48:26.243

您不应该通过直接修改标签的文本来设置按钮的标题。相反，使用`setTitle:forState:`，例如：

```
[button setTitle:@"Informatie" forState:UIControlStateNormal]; 
```

此外，通常使用类方法`buttonWithType:`而不是`alloc`/来创建按钮`initWithFrame:`。

# matplotlib - Matplotlib：着色轴/刻度标签

> ID：14165344
> 
> 赞同：19
> 
> 时间：2013-01-04T21:33:10.273
> 
> 标签：matplotlib, colors, label, text-coloring

一种颜色的 y 轴标签和红色的刻度标签如何？

因此，例如“y-label”和值 0 到 40，以红色着色。 ![样本图像](../Images/d64fd3cbfdc39bd452568ca743319917.png)

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)
ax.set_ylabel("y-label")

for i in xrange(5):
    ax.plot(x, i * x, label='$y = %ix$' % i)

ax.legend()

plt.show() 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-04T21:37:21.273

```
 label = plt.ylabel("y-label")
  label.set_color("red") 
```

同样，您可以获取和修改刻度标签：

```
[i.set_color("red") for i in plt.gca().get_xticklabels()] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-06-04T09:00:32.657

xlabel 在设置时可以着色，

```
ax.set_xlabel("x-label", color="red") 
```

要设置刻度标签的颜色，可以使用`tick_params`，它设置刻度标签的颜色以及刻度的颜色

```
ax.tick_params(axis='x', colors='red') 
```

[![在此处输入图像描述](../Images/398688b00431805773f93f56c6b544d5.png)](https://i.stack.imgur.com/p4ZSD.png)

或者，`plt.setp`可用于仅设置刻度标签的颜色，而不更改刻度的颜色。

```
plt.setp(ax.get_xticklabels(), color="red") 
```

[![在此处输入图像描述](../Images/9aa8bc02f0fca2d761aec9c6c9eff4f9.png)](https://i.stack.imgur.com/Rw8Jc.png)

*请注意，要更改 y 轴上的属性，可以将上面的 x 替换为 ay。*

# knockout.js - 是否可以遍历映射的可观察数组并订阅？

> ID：14165350
> 
> 赞同：1
> 
> 时间：2013-01-04T21:33:34.513
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用淘汰映射插件将对象集合从服务器映射到可观察数组。我希望能够订阅这些映射对象的一些属性上的一些更改事件。谁能指出我做错了什么？

```
 $.getJSON(apiUrl, function (data) {

            ko.mapping.fromJS(data, {}, self.ReportTemplates);

            for (var i = 0; i < self.ReportTemplates().length; i++) {

                var reportTemplate = self.ReportTemplates()[i];

                //try to subscriber here?
                reportTemplate.VideoId.subscribe = function (a) {
                    alert(a);
                };
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:36:07.057

你用`subscribe`错了。你应该调用它并传入你的处理程序，即

```
reportTemplate.VideoId.subscribe(function (a) {
    alert(a);
}); 
```

# gwt - 使用 # 链接到 URL 的 GWT 标签

> ID：14165351
> 
> 赞同：0
> 
> 时间：2013-01-04T21:33:35.153
> 
> 标签：gwt

我的 GWT 应用程序有一个标签列表。

当您单击 gwt 标签时，浏览器会对 URL 发出 GET 请求。

有时，URL 可以包含多个哈希标签。当用户想要搜索特定标签时会发生这种情况，例如：#bugFixed #newBug。

但是，单击标签时，只有第一个哈希标签被编码为`%23`.

结果，IE 将重定向到主页，因为它不喜欢未编码的哈希标记 (#)。Chrome 和 Firefox 可以处理未编码的 # 并正确呈现页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:58:30.480

我认为您应该[尝试对网址进行编码](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/http/client/URL.html#encodeComponent%28java.lang.String%29)

URL.encode("随便#"); 不会对#做任何事情

所以一定要使用

URL.encodeComponent("whatever#");

# android - 为什么 android SDK 没有就向后兼容性问题向我发出警告？

> ID：14165359
> 
> 赞同：2
> 
> 时间：2013-01-04T21:34:28.760
> 
> 标签：android, backwards-compatibility, eclipse-adt, android-sdk-tools

我将最低 API 版本设置为 8，但是当我使用 API 14 中添加的功能时，android SDK 无法警告我。这是为什么呢？

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:35:43.020

右键单击您的项目 -> Android 工具 -> 运行 Lint。
Lint 工具会警告您。它还会检查您的字符串文件等中的不完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:49:39.123

这是您的最低**支持**级别，而不是最低**要求**。希望支持最新的 API（例如 API 14）并优雅地将某些功能降级到 API 8 是合理的。您可以包含高于最低 API 级别的功能，[只需在以下位置检查版本代码运行时](https://stackoverflow.com/questions/3993924/android-api-level)，并根据需要走不同的代码路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:45:31.097

请检查您的项目目标，

**右键单击项目--> 属性--> android--> API 8--> 应用--> ok**

然后清理并刷新项目，您的问题将得到解决..:)

# ios - 如何使用 Interface Builder 设置链接到另一个窗口的 UITableView

> ID：14165363
> 
> 赞同：0
> 
> 时间：2013-01-04T21:34:41.443
> 
> 标签：ios, xcode, uitableview, interface-builder

我只能使用 Interface Builder 来设置一个链接到另一个视图的 UITableView 吗？这需要代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:53:25.583

你可以在没有编码的情况下做很多基于界面的东西，你可以很容易地制作某种食谱书，或者类似的东西，而不需要任何代码......只需使用故事板。

事实上，这是一个关于如何使用故事板制作食谱书的很棒的教程，无需代码。 [http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/](http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:43:34.790

你看过故事板吗？您可以在没有任何代码的情况下完成很多 UI 导航（包括您要求的）。您可能想查看[http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1上的教程](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

# mysql - 为每个循环和 MySql 变量关联数组集成

> ID：14165364
> 
> 赞同：0
> 
> 时间：2013-01-04T21:34:46.233
> 
> 标签：mysql, arrays, variables, for-loop

我有以下行，它是 for each 循环的一部分，该循环遍历从 SQL 查询返回的关联数组。我收到此错误：

> *可捕获的致命错误：stdClass 类的对象无法转换为字符串。*

当我将分配的变量用于`$field2`. 但是，如果我用`$field2`表中的实际字段名称替换它`county_slug`，它就可以工作。

如何在下面的语句中使用变量？

```
 echo "<a href='/dealers/3/$geography->$field2/'>$geography->county_short</a>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:48:29.067

正如迈克尔所说。

使用`{}`as括起来`{$geography->$field2}`

但是您的行中存在另一个错误。您缺少结束您的分号来结束您的陈述。 `;`

您的线路应如下所示：

`echo "<a href='/dealers/3/{$geography->$field2}/'>$geography->county_short</a>";`

# php - strpos 的相反函数用于抓取与字符串或数组中的特定模式不匹配的值

> ID：14165365
> 
> 赞同：0
> 
> 时间：2013-01-04T21:34:48.857
> 
> 标签：php, arrays, match, strpos

什么是我可以使用的功能，基本上与做相反

```
if(strpos($array['some_key'], $value)!==false) {
    that means there's a match and confinue
} 
```

我基本上想遍历两个数组并获取与 in 不匹配的`$value`数组`$array`。

```
 $array = 

      Array
            (
            [0] => GPPZ20
            [1] => GPPZ45
            [2] => GPPZ75
            [3] => GPPZH20
            [4] => GPPZH45
       )

     $codes = 

        Array
    (
     [0] => Array
      (
        [count] => 1
        [code] => GPPZH20SWYE4A2VZU
        [amount] => 20
    )

    )

      Array
     (
       [0] => Array
      (
        [count] => 1
        [code] => GPPZH2077434178J6
        [amount] => 20
    )

      )

    Array
(
   [0] => Array
    (
        [count] => 17
        [code] => PMMC4
        [amount] => 25
    )

)

Array
(
[0] => Array
    (
        [count] => 1
        [code] => GPPZH2052910M8V62
        [amount] => 20
    )

)

Array
(
[0] => Array
    (
        [count] => 1
        [code] => GPPZH45B3116LD1VW
        [amount] => 45
    )

 ) 
```

所以我想要做的是获取 $codes 数组中 $codes['code'] 值与 $array 值中的任何值都不匹配的所有值。

现在我有那些匹配并通过做抓住那些

```
 foreach($codes as $code) {
      foreach($array as $key=>$value) {
         if(strpos($code['code'], $value)!==false) {
              //it matches grab those values
         }
       }
  } 
```

我现在基本上需要这样的东西来抓住那些不匹配的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:55:32.733

您应该使用`array_filter`函数 - [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)例如：

```
function myFilter($val){ return strpos('foo', $val) === false; }
$array = array("foobar", "foo", "bar");
var_dump(array_filter($array, myFilter)); 
```

您也可以使用`preg_match`method 代替`strpos`.

# apache - Easyphp开发环境别名不起作用

> ID：14165373
> 
> 赞同：2
> 
> 时间：2013-01-04T21:35:24.227
> 
> 标签：apache, easyphp

我在我的 Windows PC 和笔记本电脑上使用 Easyphp 作为我的开发环境。出于某种奇怪的原因，我无法在笔记本电脑上使用别名。我收到一个错误：

```
Object not found! 
```

我认为这是 Apache 的问题，但我不确定。这可能是一件非常简单的事情，但我已经花了很多时间试图为自己解决这个问题。我尝试手动编写别名并尝试重新安装easyphp，但无法正常工作。默认虚拟主机会干扰别名吗？

这是 httpd.conf 文件底部的内容：

```
# == !!! DO NOT REMOVE !!! ===================================================
### Alias EasyPHP
# ============================================================================
#alias
Alias "/development" "C:/Users/Sam/dev"
<Directory "C:/Users/Sam/dev">
Options FollowSymLinks Indexes
AllowOverride All
Order deny,allow
Allow from 127.0.0.1
Deny from all
Require all granted
</Directory>
#alias
# ============================================================================
### Alias End
# ============================================================================

# == !!! DO NOT REMOVE !!! ===================================================
### VirtualHost EasyPHP
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
DocumentRoot "C:/Program Files (x86)/EasyPHP-12.1/www"
    ServerName localhost
</VirtualHost>
# ============================================================================
#virtualhost
#virtualhost
# ============================================================================
### VirtualHost End
# ============================================================================ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:40:44.653

@Sam：我不是大师，但我刚刚为自己解决了这个问题，并认为我会分享我的经验。我已经愉快地使用了 EasyPHP 12.1 几个星期，通过测试各种 WordPress 设置来添加和删除别名。突然，我添加的别名引发了“找不到对象”错误，无论我如何处理它们。我检查了我的 httpd.conf 文件，发现最近添加的别名不存在（？）。手动添加我需要的（并删除过时的）为我解决了这个问题。注意：我的 httpd.conf 文件以我的最后一个别名结尾，而不是“虚拟主机”条目：

...

```
Alias "/mangala" "C:/_localwebs/mangala"
<Directory "C:/_localwebs/mangala">
Options FollowSymLinks Indexes
AllowOverride All
Order deny,allow
Allow from 127.0.0.1
Deny from all
Require all granted
</Directory>
Alias "/zenphoto" "C:/_localwebs/zenphoto"
<Directory "C:/_localwebs/zenphoto">
Options FollowSymLinks Indexes
AllowOverride All
Order deny,allow
Allow from 127.0.0.1
Deny from all
Require all granted
</Directory>
#alias
# ========================
# ======================== 
```

希望您已经对其进行了排序，或者这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:35:35.583

您应该检查您是否将 Apache 和 mysql 作为服务启动，因为我遇到了这个问题，而 Apache 作为服务启动对我来说是什么问题。

# html - 用 d3 放置的 Svg-foreignObject 不渲染

> ID：14165375
> 
> 赞同：2
> 
> 时间：2013-01-04T21:35:26.107
> 
> 标签：html, svg, d3.js

[在这里查看我的 jsbin](http://jsbin.com/afoguj/2/edit)

我想要一些包装文字。根据[这篇文章的建议，](https://stackoverflow.com/questions/4991171/auto-line-wrapping-in-svg-text)我创建了一个 foreignObject 并附加了一个 'p' 元素。

我的文字根本不显示。

现在，当我在标记中执行完全相同的操作时，它会显示（我只是将生成的 svg 代码放入 svg 正文中）。

哎呀，如果我直接转到 devtools，右键单击 svg，选择“编辑为 html”并在右`</svg>`括号前插入新行，我的文本就会显示出来。

是什么赋予了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:50:50.780

代替

```
 .append('p')
    .attr('xmlns', 'http://www.w3.org/1999/xhtml') 
```

和

```
.append('xhtml:p') 
```

在 javascript 中创建节点时，命名空间是特殊的东西，不能被视为属性。d3 使用上述语法来解决这个问题。

# php - 使用 PHP 调整扭曲的图像大小

> ID：14165386
> 
> 赞同：2
> 
> 时间：2013-01-04T21:36:10.513
> 
> 标签：php, image-processing, image-resizing

我有一个上传表单，您可以在其中选择照片。上传后，如有必要，我会调整图像大小。

似乎我上传的任何照片都`HEIGHT > WIDTH`拉伸了图像。如果我上传一张`WIDTH > HEIGHT`可以正常工作的图片。我一直在绞尽脑汁想弄清楚这一点。我很确定我知道哪一行是问题所在，并且我已经在评论中指出了这一点。

谁能看出我的数学有什么问题？谢谢！

```
<?php
$maxWidth  = 900;
$maxHeight = 675;
$count     = 0;

foreach ($_FILES['photos']['name'] as $filename)
{
    $uniqueId   = uniqid();
    $target     = "../resources/images/projects/" . strtolower($uniqueId . "_" . $filename);
    $file       = $_FILES['photos']['tmp_name'][$count];    
    list($originalWidth, $originalHeight) = getimagesize($file);

    // if the image is larger than maxWidth or maxHeight
    if ($originalWidth > $maxWidth || $originalHeight > $maxHeight)
    {
        $ratio = $originalWidth / $originalHeight;

        // I think this is the problem line
        (($maxWidth / $maxHeight) > $ratio) ? $maxWidth = $maxWidth * $ratio : $maxHeight = $maxWidth / $ratio; 

        // resample and save
        $image_p    = imagecreatetruecolor($maxWidth, $maxHeight);
        $image      = imagecreatefromjpeg($file);
        imagecopyresampled($image_p, $image, 0, 0, 0, 0, $maxWidth, $maxHeight, $originalWidth, $originalHeight);
        $image      = imagejpeg($image_p, $target, 75);
    }
    else
    {
        // just save the image
        move_uploaded_file($file,$target);
    }
    $count += 1;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:44:38.780

缩放时，需要同时修改目标的宽度和高度。

尝试：

```
if ($originalWidth > $maxWidth || $originalHeight > $maxHeight)
{
    if ($originalWidth / $maxWidth > $originalHeight / $maxHeight) {
        // width is the limiting factor
        $width = $maxWidth;
        $height = floor($width * $originalHeight / $originalWidth);
    } else { // height is the limiting factor
        $height = $maxHeight;
        $width = floor($height * $originalWidth / $originalHeight);
    }
    $image_p    = imagecreatetruecolor($width, $height);
    $image      = imagecreatefromjpeg($file);
    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $originalWidth, $originalHeight);
    $image      = imagejpeg($image_p, $target, 75);
} 
```

# asp.net-mvc - 在 MVC 和 WCF 应用程序中共享 ASP.Net 应用程序缓存

> ID：14165387
> 
> 赞同：2
> 
> 时间：2013-01-04T21:36:13.827
> 
> 标签：asp.net-mvc, wcf, caching

我有 2 个项目，一个是 ASP.Net MVC 应用程序，另一个是 WCF 应用程序。

这两个应用程序共享一个共同的业务逻辑层，它利用 ASP.Net 应用程序缓存来存储一些数据以便快速检索。

我真的不希望两个应用程序都维护相同的数据集，但我想知道 ASP.Net 缓存到底在哪里？如果我要共享同一个应用程序池，两个进程都可以访问该缓存吗？

如果没有，有没有办法让 2 个应用程序共享缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T04:47:24.013

***新解决方案使用 Windows Server AppFabric 缓存***

```
https://github.com/geersch/AppFabric

http://dotnet.dzone.com/articles/caching-wcf-services-part-2

http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AAP314 
```

**.NET 1.0 和 1.1 中存在问题，但在 2.0 及更高版本中显然没有，**请参阅 [http://support.microsoft.com/kb/917411](http://support.microsoft.com/kb/917411)

# sql - SQL 仅选择自指定日期以来价格发生变化的产品和价格

> ID：14165389
> 
> 赞同：0
> 
> 时间：2013-01-04T21:36:22.177
> 
> 标签：sql, sql-server, sql-server-2012

表格如下所示：

tblProducts（大约 20 万条记录）

```
SKU,Title,CategoryID
100,Apple,0
101,Orange,0
102,Carrot,1 
```

tblCategories

```
CategoryID,CategoryName
0,Fruit
1,Vegetables 
```

tblPrices（大约 1000 万条记录）

```
SKU,BuyPrice,SellPrice,Timestamp
100,1,2,2013-1-1 23:04
100,3,6,2013-1-2 19:04
100,4,8,2013-1-3 21:04
100,4,8,2013-1-4 20:04
100,4,8,2013-1-5 22:04 
```

我需要获取所有产品的当前 BuyPrice（来自 tblPrices 的最新产品）并将其与 X 天前来自 NOW() 的最新 BuyPrice 进行比较。我只需要在 BuyPrice 中更改的产品。

这样我就可以回答这个问题，“过去 X 天内哪些产品的价格发生了变化？”。鉴于上面的一小部分数据，我会得到一个空表 1 天或 2 天，但是 3 天，我想检索：

```
SKU,Title,CategoryName,OldBuyPrice,OldSellPrice,NewBuyPrice,NewSellPrice, NBP/OBP
100,Apple,Fruit,       3,          6,           4,          8,            2.00 
```

4天：

```
SKU,Title,CategoryName,OldBuyPrice,OldSellPrice,NewBuyPrice,NewSellPrice, NBP/OBP
100,Apple,Fruit,       1,          2,           4,          8,            4.00 
```

我一直在网上寻找类似的解决方案，但没有找到。任何订购都可以。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:53:58.987

我尝试创建表 oldtpc ，它将在 X 天后获取日期最大的产品。还有另一个具有最近日期价格的newtpc。在“oldtpc”和“newtpc”之间的开启条件下，我正在检查这些日期是否不匹配

```
select tp.SKU, tp.Title, tc.CategoryName, oldtpc.BuyPrice, oldtpc.Sellprice, newtpc.buyprice, newtpc.Sellprice
from tblProducts tp
join  tblCategories tc 
on tp.CategoryId= tc.CateogryId
join (select SKU, BuyPrice, SellPrice, max(TimeStamp) as TimeStamp 
             from tblPrices new
             where DATEDIFF ( dd, timestamp, getdate()) < @xdays
             group by SKU, BuyPrice, SellPrice ) as newtpcnewtpc 
on tp.SKU = newtpc .sku 
join (select SKU, BuyPrice, SellPrice, max(TimeStamp) as TimeStamp 
             from tblPrices old 
             where DATEDIFF ( dd, timestamp, getdate()) >= @xdays 
             group by SKU, BuyPrice, SellPrice ) as oldtpc 
on oldtpc.SKU = tp.SKU and oldtpc.timestamp <> newtpc.timestamp 
```

PS：一些语法可能是错误的，但我认为一般的想法应该可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:10:11.657

试试这个：[SQL 小提琴](http://sqlfiddle.com/#!3/fa05e/2)

```
Select 
   tt.SKU,tt.BuyPrice,tt.SellPrice,tr.BuyPrice As NewBuyPrice,tr.SellPrice As NewSellPrice, tr.BuyPrice/tt.BuyPrice NNBP 
From
(
   select SKU, Max(Timestamps) timestamps
   from t
   Group by t.SKU
) t
Join t tr on t.SKU = tr.SKU AND t.timestamps = tr.Timestamps
Join t tt ON t.SKU = tt.SKU
AND DATEDIFF(D, tt.timestamps, t.timestamps) = 4
AND tt.BuyPrice <> tr.BuyPrice 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T00:49:02.577

当然，这是可行的。有一个不错的窗口功能版本，尽管可能还有更好的方法来做到这一点：

```
WITH Current_Price (sku, buyPrice, sellPrice) as 
                   (SELECT sku, buyPrice, sellPrice
                    FROM (SELECT sku, buyPrice, sellPrice,
                                 ROW_NUMBER() OVER(PARTITION BY sku
                                                   ORDER BY timestamp DESC) as rownum
                          FROM price) t
                    WHERE rownum = 1),

 Price_Back_Previous_Days (sku, buyPrice, sellPrice) as 
                          (SELECT sku, buyPrice, sellPrice
                           FROM (SELECT sku, buyPrice, sellPrice,
                                        ROW_NUMBER() OVER(PARTITION BY sku
                                                         ORDER BY timestamp DESC) as rownum
                                 FROM price
                                 WHERE timestamp < DATEADD(DAY, -3, CONVERT(DATE, GETDATE()))) t
                           WHERE rownum = 1)

SELECT p.sku, p.title, c.categoryName,
       prev.buyPrice as oldBuyPrice, prev.sellPrice as oldSellPrice,
       curr.buyPrice as newBuyPrice, curr.sellPrice as newSellPrice,
       CASE WHEN prev.buyPrice = 0 
            THEN curr.buyPrice
            ELSE 1.0 * curr.buyPrice / prev.buyPrice END as 'NBP/OBP' 
FROM Product p
JOIN Category c
     ON c.categoryId = p.categoryId
JOIN Current_Price curr
     ON curr.sku = p.sku
JOIN Price_Back_Previous_Days prev
     ON prev.sku = p.sku
     AND (prev.buyPrice <> curr.buyPrice
          OR prev.sellPrice <> curr.sellPrice) 
```

产生预期的

```
SKU  TITLE  CATEGORYNAME  OLDBUYPRICE  OLDSELLPRICE  NEWBUYPRICE  NEWSELLPRICE  NBP/OBP
100  Apple  Fruit         1            2             4            8             4 
```

（有一个有效的[SQL Fiddle Example](http://sqlfiddle.com/#!6/00ec5/18)，用一个特定的日期代替`GETDATE()`未来的原因。）

您会注意到我正在使用`-3`（而不是预期的那样），因为*无论何时（白天）运行查询*`-4`，我都在尝试检索“截至本日期”的相同值。显然，“当前价格”仍然可以改变（尽管在那里添加时间戳参数也可以解决这个问题）；但是，这应该确保您在给定的一天中看到的是一致的价格。

# java - 如何使用 m2eclipse 在私有 github 存储库中部署/解析 Maven 工件？

> ID：14165390
> 
> 赞同：2
> 
> 时间：2013-01-04T21:36:25.900
> 
> 标签：java, eclipse, maven, github, m2eclipse

我为我的团队构建了一个内部库，并希望他们能够使用 Maven 将其包含在他们的项目中。是否可以将其发布到我的私人 Github 存储库以便他们可以访问它？理想情况下，我想使用 m2eclipse 来做到这一点，而不需要 Maven 命令行界面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:43:38.750

我能提出的最好建议是使用[存储库管理器](http://maven.apache.org/repository-management.html)，这将使向其他人提供他们可以通过依赖项以通常的 maven 方式使用的工件变得简单。 *更新* 在 nexus 书中，它描述了如何设置 nexus、保护它并通过用户等进行限制以限制对 nexus 的访问。

[http://www.sonatype.com/books/nexus-book/reference/](http://www.sonatype.com/books/nexus-book/reference/)

# python - 一个好的python到exe编译器？

> ID：14165398
> 
> 赞同：46
> 
> 时间：2013-01-04T21:37:03.423
> 
> 标签：python

我是 python 新手，除了语言本身，我正在探索它的各个方面。在编译成 .exe 方面（这样它就可以在不安装 python 的情况下进行部署）我检查了 py2exe，新版本几年前就停止了。然后pyInstaller，似乎停在了python 2.7。

我可以获得所有 python 到 exe 编译器的列表吗？谢谢

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-04T21:42:42.017

*   [适用](http://www.pyinstaller.org/)于 Windows、Linux 和 Mac OS X (Python 3.5-3.10) 的 pyinstaller
*   [cx_Freeze](https://github.com/marcelotduarte/cx_Freeze)适用于 Windows、Linux 和 Mac OS X (Python 3.6-3.10)
*   适用于 Windows 和 Linux 的[bbfreeze (Python 2.4-2.7)](http://pypi.python.org/pypi/bbfreeze/)
*   [适用于 Windows 的py2exe](http://www.py2exe.org/)（Python 2.6、2.7）
*   适用于 Windows 的[py2exe (Python 3.3-3.10)](https://pypi.python.org/pypi/py2exe/)
*   [冻结](http://wiki.python.org/moin/Freeze)Linux 和 Mac OS X (Python 2.x)
*   [py2app](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html) for Mac OS X (Python 2.x)
*   适用于 Windows、Linux 和 MacOS（[2.6、2.7、3.3-3.9 ）的 Nuitka](https://nuitka.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T21:44:32.477

[https://github.com/marcelotduarte/cx_Freeze](https://github.com/marcelotduarte/cx_Freeze)

适用于 Python 3.x。

否则，您总是可以让您的脚本在 Python 2.x 上运行，并使用可以从该版本转换的程序。

还请看：

[Python 3.0.1 可执行文件创建者](https://stackoverflow.com/questions/702395/python-3-0-1-executable-creator)

[使用 Python 3.1 制作可移植（exe）？](https://stackoverflow.com/questions/1505783/making-a-portable-exe-with-python-3-1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T21:43:37.047

我很幸运使用[IronPython](http://ironpython.net/)和 pyc.py 工具。您基本上可以将您的 python 转换为 .net 字节码，然后转换为 exe。

# c++ - xlcalert 在 XLL SDK 示例中不起作用

> ID：14165400
> 
> 赞同：1
> 
> 时间：2013-01-04T21:37:06.270
> 
> 标签：c++, xll

我是 XLL 开发的新手。我下载了 2010 XLL SDK 并能够在 VisualC++ 2012 中构建示例。当我在 Excel2010 中加载 xll 时，我看到了带有“thank you ...”消息的弹出窗口，并且我看到了从示例中导出的所有函数Excel，所以似乎一切都已成功加载。

但是，xlcalert 在大多数功能中都不起作用。我只看到来自和`xlcalert`的弹出对话框。我什至修改了函数来做：`xlAutoAdd``xlAutoRemove``EvaluateExample()`

```
Excel12f(xlcAlert, 0, 2, TempStr12(L"Finished EvaluateExample"), TempInt12(2)); 
```

当我运行该函数时，我没有看到弹出窗口。我错过了什么？我似乎找不到太多对 xlcalert 的引用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T02:18:41.237

如果您是 XLL 开发的新手，请帮自己一个忙并使用[http://xll.codeplex.com](http://xll.codeplex.com)。

你的例子是`ExcelX(xlcAlert, OPERX(_T("Finished EvaluateExample")), OPERX(12))`

该代码适用于旧版或新版 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T12:36:27.060

对于所有寻找这个问题的答案的人 - 可以在这里找到它：

[https://social.msdn.microsoft.com/Forums/office/en-US/6951ef0a-a66a-489a-b0da-9516667bffa9/xlcalert-in-xll-example](https://social.msdn.microsoft.com/Forums/office/en-US/6951ef0a-a66a-489a-b0da-9516667bffa9/xlcalert-in-xll-example)

长话短说：

> 如果您将其用作单元格的函数，您还会在单元格中看到 1。但是，如果您通过 Application.Run "xlGetNameExample" 将其作为宏运行，您将看到该对话框。我认为您的问题与此类似。请尝试一下。看看能不能看到提示。

# php - 将随机变量注入 Laravel 中的每个视图

> ID：14165403
> 
> 赞同：3
> 
> 时间：2013-01-04T21:37:26.240
> 
> 标签：php, laravel

我刚刚开始使用 Laravel 并致力于将混乱的网站移植到框架中。

该站点的一个功能是在标题中动态添加图像。我正在使用一个常见的 Blade 模板，并且想知道是否有任何方法可以将随机变量（1 到 4 之间的整数）注入到使用该布局的每个视图中。

我想做的是能够在通用模板中添加类似的东西 -

`<img src="img/cutouts/cutout-<?= $randomInt;?>.jpg" alt=""/>`

发送`$randomInt`到每个视图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:12:31.113

也可以通过`View::share()`.

例如，您可以使用以下方法修改`__construct`方法`Base_Controller`：

```
View::share('randomInt', rand(1,4)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:04:57.010

你可以看看[View composers](http://laravel.com/docs/views#view-composers)

所以你会有类似的东西：

```
View::composer('your.view', function($view)
{
    $view->with('randomInt', rand(1,4));
} 
```

这将在您每次使用“your.view”（或其他）视图时传递 $randomInt 变量。

# php - 如果目录已满，file_put_contents 失败，则会创建大小为 0 的文件。如何避免这种情况？

> ID：14165404
> 
> 赞同：5
> 
> 时间：2013-01-04T21:37:31.820
> 
> 标签：php, temporary-files

当 tmp 目录已满时，file_put_contents 返回 FALSE，但创建的文件大小为 0。 file_put_contents 应该完成文件的创建或者根本没有任何效果。例如：

```
$data = 'somedata';
$temp_name = '/tmp/myfile';
if (file_put_contents($temp_name, $data) === FALSE) {
    // the message print that the file could not be created.
    print 'The file could not be created.';
} 
```

但是当我进入 tmp 目录时，我可以找到在大小为 0 的目录中创建的文件“myfile”。这使得它难以维护。不应创建该文件，我希望看到一条消息或警告 tmp 目录已满。我错过了什么吗？这是正常的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:43:53.777

您可能错过了，如果您执行错误消息，您也需要处理这种情况：

```
$data      = 'somedata';
$temp_name = '/tmp/myfile';

$success = file_put_contents($temp_name, $data);
if ($success === FALSE)
{
    $exists  = is_file($temp_name);
    if ($exists === FALSE) {
        print 'The file could not be created.';
    } else {
        print 'The file was created but '.
              'it could not be written to it without an error.';
    }
} 
```

这也将允许您处理它，例如在写入临时文件的事务失败时进行清理，将系统重置为以前的状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:52:53.900

问题是 file_put_contents 不一定会返回布尔值，因此您的条件可能不合适，您可以尝试：

```
if(!file_put_contents($temp_name, $data)){
    print 'The file could not be created.';
    if(file_exists ($temp_name))
        unlink($temp_name);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-12T12:03:39.923

嗨兄弟我找到了解决方案，

我知道它很旧，但它可能会帮助像我这样的其他人，

我很长一段时间都在搜索这个代码。

```
$data      = 'somedata';
$temp_name = '/tmp/myfile';

$success = file_put_contents($temp_name, $data);
  if (!$success){
     $exists  = is_file($temp_name);
     if (!$exists) {
        print 'The file could not be created.';
     } else {
       print 'The file was created but '.
       'it could not be written to it without an error.';
     }
  } 
```

# nlp - 如何从 FST 存档 (FAR) 创建 FST 联合？

> ID：14165408
> 
> 赞同：1
> 
> 时间：2013-01-04T21:37:37.890
> 
> 标签：nlp, finite-automata, automata, state-machine

我目前有一个（自然语言）语料库，这些是已经采取的步骤：

1.  将语料拼接成一个大文件后生成符号表：

    ```
    $ ngramsymbols <corpus.txt >corpus.syms 
    ```

2.  给定此符号表，将语料库转换为二进制 FST 存档 (FAR)：

    ```
    $ farcompilestrings -symbols=corpus.syms -keep_symbols=1 corpus.txt > corpus.far 
    ```

我想取 FAR 中所有 FST 的并集，并计算从起始状态到最终状态的最高权重路径。要从 shell 进行测试，这就是我所做的：

```
$ farextract corpus.far # generates fst files corpus-01, corpus-02, ...
$ fstarcsort --sort_type=olabel corpus.txt-01 1.fst
$ fstarcsort --sort_type=ilabel corpus.txt-02 2.fst
$ fstunion 1.fst 2.fst 12.fst 
```

但我一直遇到以下错误：

> 警告：CompatSymbols：第一个符号表存在但第二个缺失
> 
> 错误：联合：第一个参数的输入/输出符号表与第二个参数的输入/输出符号表不匹配

当然，如果我尝试运行二进制操作而不首先对 FST 进行排序，则此错误仍然存​​在。

我认为我没有正确排序 FST，或者......我完全误解了如何使用符号表。知道为什么联合（或任何其他二进制操作，就此而言）会这样失败吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:40:07.330

当您从远程存档中提取组件时，符号表将附加到存档中的第一个 fst。在组合 FST 时，嵌入到各个 FST 中的符号表需要相互匹配。例如，联合运算需要跨组件的输入符号彼此相同，并且跨组件的输出符号彼此相同。合成需要左侧机器的输出符号与右侧机器的输入符号相匹配。

您可以使用 fstsymbols 命令从 FST 中清除符号：

```
fstsymbols --clear_isymbols ---clear_osymbols with-syms.fst > no-syms.fst 
```

从 corpus.txt-01 中删除符号应该可以解决这个问题。或者，您可以在没有 --keep_symbol 标志的情况下编译 far 文件。

对于 union 命令，您不需要在组合之前对来自组件机器的弧进行排序，但是您通常需要在组合它们之前对它们进行排序。

如果您的文本语料库很大，您可能会发现使用 C++ 接口或其他一些绑定（例如[pyfst](https://github.com/vchahun/pyfst) ）直接从文本文件直接构建联合 FST 会更快。

# batch-file - Bat文件更改文件夹名称

> ID：14165409
> 
> 赞同：1
> 
> 时间：2013-01-04T21:37:42.790
> 
> 标签：batch-file

我有一个包含一堆子文件夹的文件夹。我将如何编写一个 bat 文件以将 8 个随机字符附加到文件夹名称的末尾。

我经历的第一步是将文件放入下面的子文件夹中，使用以下代码：

```
for %%i in (PathToWorkingFolder\*) do mkdir "PathToWorkingFolder\%%~ni" & move "%%i" "PathToWorkingFolder\%%~ni" 
```

文件夹名称是：

FD3_2012-10_Stmt

FD3_2012-10_税

FD3_2012-10_Warr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:52:50.153

这两个步骤可以在同一个 FOR 中实现：

```
@echo off
setlocal EnableDelayedExpansion
for %%i in (PathToWorkingFolder\*) do (
   rem Get folder name with 8 random digits at end
   digits=000000!random!!random!
   set "folder=%%~Ni!digits:~-8!"
   rem Create the subfolder and move the file
   mkdir "PathToWorkingFolder\!folder!"
   move "%%i" "PathToWorkingFolder\!folder!"
) 
```

# r - 星形条形图

> ID：14165411
> 
> 赞同：3
> 
> 时间：2013-01-04T21:37:55.393
> 
> 标签：r, plot, bar-chart

我正在尝试制作一个简单的条形图，首先，根据性别区分两组，男性或女性，然后在统计数据之后，对于每个样本/个体，都有一个 P 值，无论是否显着。我知道如何对男性和女性之间的条形进行颜色编码，但我希望 R 自动在每个 P 值小于 0.05 的样本/个体上方放置一个星号。

我目前只使用简单的`barplot(x)`功能。

我试图四处寻找答案，但还没有找到任何答案。

以下是我的示例数据集的链接：

[url=http://www.divshare.com/download/22797284-187]DivShare 文件 - test.csv[/url]

我想将时间放在 y 轴上，对条形进行颜色编码以区分男性和女性，然后对于任一组中显着性低于 1 的个人，在其相应条形上方放置一个星号。

感谢您提前提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T22:34:39.180

我稍微弄乱了你的数据以使其更友好：

```
## dput(read.csv("barcharttest.csv"))
x <- structure(list(ID = 1:7,
  sex = structure(c(1L, 1L, 1L, 2L, 2L, 1L, 2L), .Label = c("female", "male"),
   class = "factor"),
  val = c(309L, 192L, 384L, 27L, 28L, 245L, 183L),
  stat = structure(c(1L, 2L, 2L, 1L, 2L, 1L, 1L), .Label = c("NS", "sig"),
    class = "factor")),
               .Names = c("ID", "sex", "val", "stat"),
               class = "data.frame", row.names = c(NA, -7L)) 
```

看起来像这样：

```
 ID    sex val stat
1  1 female 309   NS
2  2 female 192  sig
3  3 female 384  sig
4  4   male  27   NS
5  5   male  28  sig
6  6 female 245   NS
7  7   male 183   NS 
```

现在的情节：

```
sexcols <- c("pink","blue")
## png("barplot.png")  ## for output graph
par(las=1,bty="l")  ## I prefer these settings; see ?par
b <- with(x,barplot(val,col=sexcols[sex])) ## b saves x coords of bars
legend("topright",levels(x$sex),fill=sexcols,bty="n")
## use xpd=NA to make sure that star on tallest bar doesn't get clipped;
##   pos=3 puts the text above the (x,y) location specified
text(b,x$val,ifelse(x$stat=="sig","*",""),pos=3,cex=2,xpd=NA)
axis(side=1,at=b,label=x$ID)
## dev.off() 
```

我还应该在相关轴上添加“时间”和“ID”标签。

![在此处输入图像描述](../Images/d005445b7e6782da34bbd630b5fa0027.png)

# objective-c - 如何比较coredata字符串和NSString

> ID：14165412
> 
> 赞同：0
> 
> 时间：2013-01-04T21:37:59.120
> 
> 标签：objective-c, ios, xcode, core-data

> **可能重复：**
> [了解 Objective-C 中的 NSString 比较](https://stackoverflow.com/questions/3703554/understanding-nsstring-comparison-in-objective-c)

头文件：

```
@property (nonatomic, strong) NSString *pid;
@property (nonatomic, strong) NSString *name; 
```

Coredata NSString 存储：

```
[newPref setValue: @"0" forKey:@"pid"];  //correctly show in DB & NSLog
[newPref setValue: @"Sales" forKey:@"name"]; 
```

稍后检索后，评估失败：

```
if(preference.pid == @"0") 
```

调试器说：

```
_pid = (NSSting *) 0x... @"o\xee\"
_name = (NSString *) )x0.. @<variable is not NSString> 
```

我的 NSString 存储不正确，还是我的评估错误？注意：Coredata 模型也是字符串类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:45:07.460

在您的代码中，您正在比较*objects*，但如果您想比较字符串，它应该是

```
if ([preference.pid isEqualToString:@"0"]) 
```

# php - 如何通过按下回车键在 PHP 中的数据库中插入换行符？

> ID：14165413
> 
> 赞同：0
> 
> 时间：2013-01-04T21:38:05.550
> 
> 标签：php, html, forms

> **可能重复：**
> [如何将用户输入的换行符从 TEXTAREA 保存到数据库？](https://stackoverflow.com/questions/498461/how-to-save-user-entered-line-breaks-from-a-textarea-to-a-database)

当我在 textarea 中按 ENTER KEY 时，它会转到换行符。但是，当我从操作页面收到此值时，它会转换为空白。我想从操作页面接收 ENTER KEY 字符作为换行符，而不是空格。示例代码：这是 HTML 代码

```
<form action="go.php" method="POST">
<textarea name="aa" cols="10" rows="10"></textarea>
<form> 
```

她是 go.php 代码：

```
<?php
$txt=$_POST['aa'];
echo $txt;
?> 
```

如果我输入“这是我（PRESS ENTER KEY）这是他（PRESS ENTER KEY）”。我希望输出像“这是我（换行）这是他（换行）”。但我从 go.php 得到“这是我这是他”。这里没有任何换行符，而是空格。请任何人帮助我。为什么会发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:40:44.623

相信你想要[`nl2br`](http://php.net/manual/en/function.nl2br.php)。这将在字符串中的所有换行符之前插入 HTML 换行符。如果您打算将其存储在数据库中，则需要类似的东西`mysql_real_escape_string()`来转义换行符。

```
<?php
echo nl2br("foo isn't\n bar");
?> 
```

HTML 看起来像：

```
foo isn't<br />
 bar 
```

您的代码将如下所示：

```
<?php
$txt=$_POST['aa'];
echo nl2br($txt);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:49:22.773

您需要使用**nl2br**函数来捕获和替换换行符。下面的工作代码；

```
<form action="go.php" method="POST">
<textarea name="aa" cols="10" rows="10"></textarea>
<input type="submit" value="s">
</form>
Here is the go.php code :

<?php
$txt=$_POST['aa'];
echo nl2br($txt);
?> 
```

# xml - 按元素链接xml数据

> ID：14165414
> 
> 赞同：0
> 
> 时间：2013-01-04T21:38:09.377
> 
> 标签：xml, xslt

我有以下 xml 文件

```
<musicLibrary>
<compilation id="C01" title="Best of something">
    <title no="1" name="firstOne">
        <fileID>F01</fileID>
    </title>
    <title no="2" name="secondOne">
        <fileID>F02</fileID>
    </title>
    <title no="3" name="thirdOne">
        <fileID>F03</fileID>
    </title>
    <title no="4" name="fourthOne">
        <fileID>F04</fileID>
        <fileID>F05</fileID>
    </title>
</compiltion>
<compilation id="C02" title="Best of another thing">
    ...
</compilation>

<files>
    <file id="F01">
        <filename>soundFile8.mp3</filename>
        <size>3.456</size>
        <length>3.23</length>
    </file>
    <file id="F02">
        <filename>soundFile2.mp3</filename>
        <size>3.456</size>
        <length>3.23</length>
    </file>
    <file id="F03">
        <filename>soundFile7.mp3</filename>
        <size>3.456</size>
        <length>3.23</length>
    </file>
    <file id="F04">
        <filename>soundFile5.mp3</filename>
        <size>3.456</size>
        <length>3.23</length>
    </file>
    <file id="F05">
        <filename>soundFile3.mp3</filename>
        <size>3.456</size>
        <length>3.23</length>
    </file>
</files>
</musicLibrary> 
```

是否可以通过仅提供集合 ID 从文件信息中检索，例如一个编译的播放时间总共多长时间？我真的坚持这一点。：/我真的很想念SQL中的连接之类的东西；）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:18:07.743

这可以通过使用 xpath 的 XSLT 样式表来完成（您可以将其视为 XSLT 的连接等效项）。在此样式表中，返回每个编译的长度总和：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0">

    <xsl:template match="musicLibrary">
        <xsl:apply-templates select="compilation"/>  
    </xsl:template>

    <xsl:template match="compilation">
        <xsl:variable name="ids" select="title/fileID"/>
        <compilation id="{@id}" title="{@title}">
            <xsl:attribute name="total-length"> 
                <xsl:value-of select="sum(//files/file[@id = $ids]/length)"/>
            </xsl:attribute>
        </compilation>
    </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<compilation id="C01" title="Best of something" total-length="16.15"/> 
```

# scala - Scala 中的路径依赖

> ID：14165424
> 
> 赞同：0
> 
> 时间：2013-01-04T21:38:51.257
> 
> 标签：scala, path-dependent-type

```
 trait B {
    type MyInnerType
    def foo: MyInnerType
  }      
  object B1 extends B {
    type MyInnerType = Double
    val foo = 3.0
  }

  trait A {
    type MyInnerType
    val b: B
    def foo(x: b.MyInnerType): MyInnerType
    def bar(y: MyInnerType): Unit
  }
  object A1 extends A {
    type MyInnerType = Int
    val b = B1
    def foo(x: b.MyInnerType) = 1
    def bar(y: MyInnerType) {}
  }
  object A2 extends A {
    type MyInnerType = String
    val b = B1
    def foo(x: b.MyInnerType) = "a"
    def bar(y: MyInnerType) {}
  }

  val as = Seq(A1, A2)
  as foreach { a => a.bar(a.foo(a.b.foo)) }   // wrong, a.foo(a.b.foo) infers to Any 
```

但是，如果`a.foo`不带参数，则一切正常并`a.foo`推断为`a.MyInnerType`. 如果我施放它也可以`.asInstanceOf[a.MyInnerType]`。有什么解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:25:31.240

我正在运行 scala 2.9.1，在 REPL 上我得到了这个`as`：

```
scala> val as = Seq(A1, A2)
as: Seq[ScalaObject with A{def foo(x: Double): Any; val b: B1.type; type MyInnerType >: java.lang.String with Int}] = List(A1$@6da13047, A2$@7168bd8b) 
```

但是，当我将其更改为时，`val as:Seq[A] = Seq(A1, A2)`我得到：

```
scala> val as:Seq[A] = Seq(A1, A2)
as: Seq[A] = List(A1$@6da13047, A2$@7168bd8b)

scala> as foreach { a => a.bar(a.foo(a.b.foo)) } 
```

有时（一直）scala 无法推断类型，因此您必须注释您想要的内容。我经常去 REPL 看看到底发生了什么。

# svg - html2canvas 可以在页面中呈现 svg 吗？

> ID：14165426
> 
> 赞同：10
> 
> 时间：2013-01-04T21:39:17.123
> 
> 标签：svg, html2canvas

我正在使用 html2canvas 创建包含 SVG 的 HTML 页面的“屏幕截图”。一切看起来都不错，除了元素。我知道应该可以在 Canvas 中渲染 SVG；PhantomJS、fabric.js 和 CanVG 做到了。

这是 html2canvas 不支持的东西吗？还是我做错了什么，这应该可行？

如果这还没有实现，那么扩展html2canvas（使用canvg）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T11:15:04.670

通过使用[canvg](https://github.com/canvg/canvg)将它们转换为画布来捕获 SVG 图像。包括该页面上指示的两个 javascript 文件。那么最简单的方法是：

```
<body onload="canvg()"> 
```

请参阅无[参数调用示例](https://github.com/canvg/canvg/blob/master/examples/convert.htm)。当所有的 SVG 图像都被转换后，html2canvas 就可以完美地工作了。

当然，所有的 SVG 图像都会被转换为画布，但我没有看到有什么不同。

# javascript - 用 DrawingManager 谷歌地图 v3 覆盖

> ID：14165427
> 
> 赞同：0
> 
> 时间：2013-01-04T21:39:18.793
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用谷歌地图 v3 及其绘图管理器功能，我想通过纬度和经度或直接获取这些形状的像素。

这是drawingManager Shapes的URL

[https://developers.google.com/maps/documentation/javascript/examples/user-editable-shapes](https://developers.google.com/maps/documentation/javascript/examples/user-editable-shapes)

我想获得与地图容器相关的像素

[http://gmaps-samples-v3.googlecode.com/svn/trunk/latlng-to-coord-control/latlng-to-coord-control.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/latlng-to-coord-control/latlng-to-coord-control.html)

像这里一样，但是使用覆盖类，我想将它用于 DrawingManager 形状，需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T06:46:20.757

要将 LatLng 转换为 Point，请使用[`fromLatLngToPoint()`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#Projection)当前投影的方法。

当前投影由返回`mapObject.getProjection()`

但是，形状并不总是由 LatLng/Points 定义。对于矩形，您必须平移边界定义的点，对于圆，必须平移中心（和/或边界），对于折线/多边形，必须平移路径。

# posix - umask 和退出函数

> ID：14165435
> 
> 赞同：2
> 
> 时间：2013-01-04T21:40:20.643
> 
> 标签：posix, d

我正在编写一个将 D 应用程序转换为守护程序的函数。我打算分享它（虽然我不知道在哪里。有什么地方，所以它可能会进入火卫一。无论如何）

一切都很好。我正在使用 core.sys.posix.unistd 进行分叉。但我找不到任何“umask”C 函数的声明。我在 Phobos 文件夹中搜索了该函数名的所有文件，但没有一个文件将其作为函数名。任何人都知道也许是等价的？

另一件事是退出功能。当我在阅读《The D Programming Language》一书时，它说要使用“assert(false)”，但我认为这必须有另一个更漂亮的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:37:22.523

```
core/sys/posix/sys/stat.d:mode_t umask(mode_t); 
```

# ruby-on-rails - 两个开发人员使用不同的操作系统但使用相同的 Rails 版本是否可以在 Rails 项目上工作

> ID：14165441
> 
> 赞同：0
> 
> 时间：2013-01-04T21:40:44.397
> 
> 标签：ruby-on-rails, version-control, bitbucket

我有这种困惑，也许这可能是基本问题。我正计划与一位住在不同地点的朋友一起从事 Rails 项目。

我们已将 Heroku 确定为我们的部署平台，并将 Bitbucket 确定为 SCM 相关活动。

我和我的朋友都是 Rails 新手，但我们一般都熟悉 Web 开发。

当他在 Mac 上时，我在 Windows 机器上工作。我们都有相同的 Rails 版本，包括 gem。但是，我不确定我们如何管理源代码和代码集成。我之所以这么说是因为，当我们尝试从我们的系统提交整个代码时，一些特定于平台的 rails 文件会上传到服务器上，从而使部署变得无用。

所以我的问题是，如果我在 Windows 上，而我的朋友在 Mac 上，那么推荐的方式是在单个 RAILS 项目上一起工作并将其部署在通用平台上以获得相同的所需功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:46:26.223

是的，通过使用您在设置存储库时选择的源代码控制管理 (SCM)。

例如，如果您使用 git，您将使用`git clone`（通过单击克隆通过 bitbucket 界面提供命令）复制您的存储库，进行更改，然后`git push`将您的更改返回到存储库。

当您接下来要编写代码时，执行`git pull`命令以获取最新的 repo 更改，然后工作并将`git push`您的更改返回到 repo。

有关示例，请参阅[Bitbuckets 精彩教程](https://confluence.atlassian.com/display/BITBUCKET/Bitbucket+101)。

附带说明一下，bitbucket 也支持 mercurial，虽然我没有使用过。

至于您的实际问题，每个人都需要确保从您的存储库中排除平台相关文件。如果您使用的是 git，请参阅[git book](http://git-scm.com/book/en/Customizing-Git-Git-Configuration)`.gitignore`中关于[git rm的部分](http://git-scm.com/docs/git-rm)

# python - Python脚本中NSPasteboard输出中的额外字符

> ID：14165442
> 
> 赞同：1
> 
> 时间：2013-01-04T21:40:51.963
> 
> 标签：python, nspasteboard

我的第一篇文章……</p>

我正在使用 python 脚本从 Mac OS X Lion 上的剪贴板上获取文本。

我使用以下功能设置剪贴板：

```
def setClip (text):
    pb = NSPasteboard.generalPasteboard()
    pb.clearContents()
    a = NSArray.arrayWithObject_(text)
    return pb.writeObjects_(a) 
```

where `text`= "一些文字"

我使用以下内容检索剪贴板：

```
def getClip():
    pb = NSPasteboard.generalPasteboard()
    pbstring = pb.stringForType_(NSString *)dataType
    return pbstring 
```

输出前面带有“u”，文本用引号括起来，如下所示：

```
In [224]: setClip('some text')
Out[224]: True

In [225]: getClip()
Out[225]: "u'some text'" 
```

如何检索应该输入到剪贴板的文本？

我对 NSPasteboard 一无所知。我在 stackoverflow 上找到了这些代码片段。

提前致谢。

附录：我的实际代码

```
 from AppKit import *
    def setClip (text):
        pb = NSPasteboard.generalPasteboard()
        pb.clearContents()
        a = NSArray.arrayWithObject_(text)
        return pb.writeObjects_(a)

    def getClip():
        pb = NSPasteboard.generalPasteboard()
        pbstring = pb.stringForType_(NSString *)dataType
        return pbstring 
```

这就是我在 ipython 中运行它时发生的情况：

输出前面带有“u”，文本用引号括起来，如下所示：

```
In [224]: setClip('some text')
Out[224]: True

In [225]: getClip()
Out[225]: "u'some text'" 
```

***尝试了答案中的建议**********

```
def getClip():
    pb = NSPasteboard.generalPasteboard()
    return pb.stringForType_("public.utf8-plain-text")

In [332]: getClip()
Out[332]: u"some text" 
```

不去。:-(

是的。我只需要这样做：

```
print getClip() 
```

我现在有

```
"some text" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:20:13.127

如果你对 NSPasteboard 一无所知，你应该浏览一下粘贴板[编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PasteboardGuide106/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008099)，并查看[NSPasteboard 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nspasteboard_Class/Reference/Reference.html)以了解详细信息。

您给我们的代码不可能是您正在运行的代码，因为：

```
pbstring = pb.stringForType_(NSString *)dataType 
```

这不是有效的 Python。它介于 ObjC 和 Python 之间。所以它只会提高一个`SyntaxError`. 即使我把它变成合理的东西：

```
pbstring = pb.stringForType_(dataType) 
```

或者，如果你想明确：

```
pbstring = pb.stringForType_(NSString.stringWithString_(dataType)) 
```

这只是 a `NameError`，因为您没有`dataType`在任何地方定义。

那么，你从哪里来`dataType`？好吧，参考`stringForType:`说明很清楚：

> 您必须在调用 stringForType: 之前发送类型或 availableTypeFromArray:。

那么，如果我们打电话`pb.types()`呢？我们得到一个字符串列表，如下所示：

```
Out[153]: 
(
    "NeXT smart paste pasteboard type",
    "com.apple.webarchive",
    "NeXT Rich Text Format v1.0 pasteboard type",
    "public.utf8-plain-text",
    NSStringPboardType,
    …
) 
```

一些内置类型不会以字符串文字的形式返回，例如`u"public.utf8-plain-text", but as string constants from one of the Cocoa libraries, like`NSStringPboardType `. If you've done`from AppKit import * `,`from Cocoa import * `, or similar, you can just refer to it as`NSStringPboardType`。

无论如何选择看起来合理的东西并使用它：

```
In [156]: pb.stringForType_(NSStringPboardType)
Out[156]: u'some text' 
```

一切都很好！

那么，为什么你得到`"u'some text'"`而不是 just `u'some text'`？我的猜测是，在您的真实代码中，要么`setClip`或正在某处`getClip`做额外的事情。`repr(s)`例如：

```
In [165]: s=u'some text'

In [166]: repr(s)
Out[166]: "u'some text'"

In [167]: s
Out[167]: u'some text' 
```

`Out[166]`您可能看起来很熟悉。很可能，您已经在代码中完成了等效操作。但是由于您还没有在您向我们展示的代码中完成它，我们无法猜测在哪里。

正确的编写方法`getClip()`是按照您的偏好顺序创建一个`list`类型，然后执行以下操作：

```
def getClip():
    pb = NSPasteboard.generalPasteboard()
    best_type = pb.availableTypeFromArray_(myFavoriteTypes)
    if best_type:
        return pb.stringForType_(best_type) 
```

这可能看起来很痛苦，而且没有必要。你不能直接`return pb.stringForType_(best_type[0])`跳过那些`availableTypeFromArray_`废话吗？在实践中，如果您想要的类型是 NSStringPboardType，那么到目前为止，您可以在所有 OS X 版本中使用它，并且可能使用宇宙中的每个程序，因为将文本放在剪贴板上而不是放在剪贴板上是没有意义的使其以该格式可用。但这仍然是错误的，并且是一个坏习惯。（此外，也许您实际上*更喜欢*获取 UTF-8 字节而不是 Unicode 字符串，这在 Python 2.x 中可能更容易处理，或者在 3.3 中更有效。）

当你做正确的事情时，如果你只是`getClip()`在控制台上输入，你会看到`u'some text'`而不是`'u"some text"'`. “但是等一下”，你说，“那里还有一个 'u' 和一对引号，即使不再有两对引号，所以它仍然坏掉了！” 不，这不对。看看这个：

```
In [182]: s=u'some text'

In [183]: s
Out[183]: u'some text'

In [184]: print s
some text 
```

或这个：

```
In [185]: s='some text'

In [186]: s
Out[186]: 'some text'

In [187]: print s
some text 
```

每当您在交互式控制台上键入字符串（或返回字符串的函数）时，它都会打印出带引号的字符串。但是引号实际上并不在字符串中——正如您在`print`显式使用语句时所看到的那样。

所以，如果你看到这个：

```
In [332]: getClip()
Out[332]: u"some text" 
```

这实际上是正确的。`s=u'some text'`这与上面的示例相同。您的字符串中没有引号或`u`字符；这就是交互式解释器显示您在命令行中键入的字符串的方式。要验证它，只需`print`结果：

```
In [332]: print getClip()
some text 
```

或将其存储在文件中：

```
In [188]: with open('test.txt', 'w') as f:
   .....:     f.write(getClip())
   .....: 
```

现在`test.txt`在你的文本编辑器中打开——没有引号，没有`u`.

# c# - 在 DropDownList 中使用外键

> ID：14165445
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:41:02.140
> 
> 标签：c#, asp.net-mvc

虽然我在其他编程语言方面有丰富的经验，但我是 .NET/MVC 的新手，所以我从彻底遵循Rick Anderson 的[THIS TUTORIAL](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)开始，并成功创建了项目运行所需的所有控制器和视图。

下一步是将表与外键相关联，我这样做如下：

```
public class Patient
{
    public int id { get; set; }
    public string name { get; set; }
    public string phoneNumber { get; set; }
    public string address { get; set; }
    public string postCode { get; set; }
    public string emailAddress { get; set; }
    public virtual Doctor doctor { get; set; }
} 
```

属性“医生”将“患者”表与“医生”表相关联。到目前为止一切都很好。

现在，我需要更改实体框架已经为我创建的 Create 视图，以便我可以在下拉列表中查看所有可用的医生并进行选择。

我已经阅读了几十个论坛主题并尝试了许多解决方案，但没有让它发挥作用。我可以显示下拉列表，我可以用所有可用的医生填充它，但由于某种原因它不会验证。

这就是我将有关医生的信息传递到 Create Patient 视图的方式：

```
 var doctorsQuery = from doc in db.Doctors
                           orderby doc.name, doc.id
                           select new { doc.id, doc.name };

        var doctorsList = new List<KeyValuePair<int, string>>();

        foreach (var item in doctorsQuery) {
            doctorsList.Add(new KeyValuePair<int, string>(item.id, item.name));
        }

        ViewBag.doctorsList = doctorsList; 
```

它不工作。

有人可以指出我正确的方向吗？这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:10:03.943

利用

公共虚拟 int DocID{ 获取；放; } 代替

公共虚拟医生医生{得到; 放; }

# javascript - 将类似哈希的字符串转换为哈希和安全风险

> ID：14165450
> 
> 赞同：3
> 
> 时间：2013-01-04T21:41:25.697
> 
> 标签：javascript, ruby-on-rails, ruby

我正在使用 JavaScript 将用户输入转换为看起来像哈希数组的字符串，并将其传递给 Rails 表单中的隐藏字段。即这样的东西被传递给我的控制器：

```
<input id="UserHash" name="UserHash" type="hidden" value="[{ :payer_id => 1, :amt => 90.00}, { :payer_id => 2, :amt => 80.00}, { :payer_id => 4, :amt => 20.00}]"> 
```

我`eval(params[:UserHash])`用来把它变成我可以使用的哈希。我是否通过使用完全损害了安全性`eval()`，如果是这样，有没有办法可以检查传递的字符串是否是一个哈希数组？任何关于我正在做的事情的意见将不胜感激。我使用 JS 传递哈希数组的原因是因为我的表单收集有关可变长度集合（一组可变付款人）的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:43:22.773

最好的办法是改用 JSON。

这正是 JSON 设计的场景。在 Javascript 中创建一个 JSON 字符串并在 Ruby 中使用

```
require 'json'

string = '[{"payer_id":1,"amt":90.0},{"payer_id":2,"amt":80.0},{"payer_id":4,"amt":20.0}]'
data = JSON.parse(string) 
```

它会将您的字符串转换为哈希数组。

**请注意，**如果您希望键是符号，请使用

```
data = JSON.parse(string,:symbolize_names=>true) 
```

# mysql - ANSI 92 日期差异在 MySQL 中不起作用

> ID：14165457
> 
> 赞同：1
> 
> 时间：2013-01-04T21:41:41.450
> 
> 标签：mysql, ansi, datediff

我正在尝试使用 ANSI SQL 标准计算两个日期之间的天数。但是我遗漏了一些东西，因为这个语句在 MySQL 中返回 NULL。

`SELECT EXTRACT(DAY FROM DATE('2009-01-25') - DATE('2009-01-01')) AS day_diff;`

我知道 MySQL DATEDIFF 函数，但我很好奇为什么这段代码不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:44:48.927

这是你的意思吗？

```
mysql> SELECT EXTRACT(DAY FROM DATE('2009-01-25')) - 
         EXTRACT(DAY FROM DATE('2009-01-01')) AS day_diff;
+----------+
| day_diff |
+----------+
|       24 |
+----------+
1 row in set (0.00 sec) 
```

更新：

如果您希望它适用于不同月份（甚至不同年份）的日期，那么您可以使用 MySQL`DATEDIFF()`函数。

例子：

```
mysql> select datediff('2009-04-25','2009-01-01');
+-------------------------------------+
| datediff('2009-04-25','2009-01-01') |
+-------------------------------------+
|                                 114 |
+-------------------------------------+
1 row in set (0.00 sec)

mysql> select datediff('2010-04-25','2009-01-01');
+-------------------------------------+
| datediff('2010-04-25','2009-01-01') |
+-------------------------------------+
|                                 479 |
+-------------------------------------+
1 row in set (0.00 sec) 
```

# sql - T-SQL 中的实际列名而不是 *

> ID：14165458
> 
> 赞同：1
> 
> 时间：2013-01-04T21:41:45.267
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下查询（示例）

```
SELECT *
FROM Table_1 1 INNER JOIN
Table_2 2 ON 1.C1 = 2.C1 INNER JOIN
Table_3 3 ON 2.C2 = 3.C2 INNER JOIN
Table_4 4 ON 3.C3 = 4.C3 
```

输出是 10+ 列。

当我将鼠标悬停在 * 上时（在“SELECT”之后），我会得到一个工具提示，其中包含这 4 个表中所有不同的列名。

有没有一种方法可以轻松地从 * 切换到这些列名，而不是在 SELECT 之后键入每个列名？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:46:16.410

我假设您在 Management Studio 中工作。如果是这样，请转到对象资源管理器并打开您的表。左键单击 Columns 文件夹并将其拖到您的查询窗口中。将列出该表的所有列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:46:16.630

从 SQL Server Management Studio 的对象资源管理器中，您可以展开一个表（因此您可以看到 Columns、Keys、Indexes 等文件夹细分）。将文件夹拖到`Columns`查询窗口将为您提供以逗号分隔的列名列表。

请注意：如果您的四个表中有重复的列名，您必须正确量化这些列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T21:49:15.583

我看到您的查询引用了 4 个表。

为避免必须在对象资源管理器中定位和展开 4 个不同的对象，您还可以在 management studio 中选择查询文本，右键单击并选择“在编辑器中设计查询”，然后将列名复制出展开的列表

复制列名而不是简单地按 OK 可以避免设计者弄乱您的格式以及可能的查询。

如果您经常需要，扩展通配符是[Redgate SQL Prompt功能的一部分。](http://www.red-gate.com/products/sql-development/sql-prompt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T11:16:13.683

如果使用 DataGrip 编写 SQL，可以按 Alt+Enter -> 展开列列表[![在此处输入图像描述](../Images/317011e0f1a2352a2965fbab49de50ec.png)](https://i.stack.imgur.com/4nG4U.gif)

# c# - 从 BundleResource 流式传输

> ID：14165461
> 
> 赞同：1
> 
> 时间：2013-01-04T21:41:54.237
> 
> 标签：c#, nsimage, nsbundle, monomac

我有一个 MonoMac 项目，我需要`Stream`引用我设置为`BundleResource`（图像）的项目。

我的项目中有一个图像，我已将其构建操作设置为`BundleResource`（我假设这是将项目的构建操作设置为的 Visual Studio 等价物`Resource`。现在，在我的代码中，我想打开一个指向此资源的流，所以我的应用程序可以使用它。在 WPF 中，这将通过以下方式完成：

```
Application.GetResourceStream(resourceUri); 
```

但是，我在 MonoMac 上找不到任何关于等价物的文档。如果我什至找到一种方法来获取文件的数据，那应该没问题，因为我只需将它包装在 a 中`MemoryStream`，然后在某个点下线希望它`NSImage.FromStream()`有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:33:29.793

您可以使用`NSBundle.MainBundle.PathForResource`方法来获取资源的路径。您可以使用该路径访问资源。

# python-2.7 - Python tk 滚动条行为（责怪 Windows？）

> ID：14165462
> 
> 赞同：0
> 
> 时间：2013-01-04T21:41:56.273
> 
> 标签：python-2.7, windows-xp, tkinter, scrollbar

我正在用 Python/Tkinter 编写一个 GUI，其中包括一个带有滚动条的列表框。我已经让滚动条按预期运行（即您可以单击它并在列表框内容中向上/向下滚动），但是滚动条本身的行为方式有些问题。下图应该有助于澄清。

![tk.Scrollbar Windows 渲染](../Images/9d0efceeda86896167b40b6456253ad4.png)

列表框大小为 8 行，仅包含 12 行，因此首先滑块应该大很多（滚动条长度的 2/3）。其次，每当我向下滚动时（无论我如何操作），滑块都会“粘”在栏的顶部。这使我无法使用向上快速滚动方法，您单击滑块上方但箭头下方 - 因此向上滚动仅限于使用箭头并一次走一行。向下快速滚动效果很好，尽管如前所述，滑块仍然“粘”在顶部。我可以单击并向下拖动滑块，但随后它会弹回顶部。单击箭头（向上或向下）正常工作。

我尝试在 ttk 中使用替代滚动条，但实际上并没有更好：

![ttk.Scrollbar Windows 渲染](../Images/85b68feeede6d22a1c6234c8645cd4a8.png)

在这种情况下，滑块会填满整个栏，您不能快速滚动任何方向，向上或向下。抓取和拖动工作（不知何故），列表框滚动，但你没有视觉提示你离顶部或底部有多近。箭头（再次）正常工作。

简而言之，它是可用的，但非常有问题和奇怪。这只是在 Windows 操作系统上使用 Python/Tkinter 的一个已知限制吗？（我的机器有带有 SP 3 的 Windows XP（32 位）。它是 Python 版本 2.7.3。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:10:15.023

听起来您没有正确配置滚动条。您必须进行双向连接。您需要配置列表框以了解滚动条（以便它更新拇指），并且您需要配置滚动条以了解列表框（以便它滚动列表框的内容）。

您描述的行为听起来像是您忘记了前者。也许如果您向我们展示您的鳕鱼，我们可以确认这一点。你在做类似下面的事情吗？

```
my_listbox.configure(yscrollcommand=my_scrollbar.set)
my_scrollbar.configure(command=my_listbox.yview) 
```

# java - 更新 java jframe

> ID：14165466
> 
> 赞同：0
> 
> 时间：2013-01-04T21:42:07.520
> 
> 标签：java, swing, concurrency, jtextarea, event-dispatch-thread

我正在尝试更新`jtextarea`存储在使用 netbeans GUI 工具创建的类中的文本。

在我的服务器类中，我有以下代码....

window 是对象实例的名称

```
Message message = (Message) in.readObject();
window.addText(message.getMessage()); 
```

肉棒可以工作，我可以使用这种方法将`getMessage`文本输出到控制台。

这是我在 GUI 类（窗口）中更新文本区域的代码：

```
public void addText(String txt)
{
    jTextArea1.append(txt);
    jTextArea2.append(txt);
    jTextArea1.updateUI();
    jTextArea1.revalidate();
    jTextArea1.validate();
    jTextArea2.updateUI();
    jTextArea2.revalidate();
    jTextArea2.validate();
} 
```

然而，这并没有更新......当我尝试从那里输出到控制台（没有问题）时，该方法正在挑衅地接收字符串。

我需要以某种方式刷新窗口吗？

* * *

完整的 GUI 类

```
 package hunterinstant;

public class Conversation extends javax.swing.JFrame implements Runnable {

    public Conversation() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jTextField1 = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();
        jButton1 = new javax.swing.JButton();

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTextArea2.setColumns(20);
        jTextArea2.setEditable(false);
        jTextArea2.setRows(5);
        jScrollPane2.setViewportView(jTextArea2);

        jButton1.setText("Send");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 294, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 243, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jTextField1)
                    .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, 29, Short.MAX_VALUE))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public void run() {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Conversation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Conversation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Conversation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Conversation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Conversation().setVisible(true);
            }
        });

    }

    public void addText(String txt)
    {
        jTextArea1.append(txt);
        jTextArea2.append(txt);
        jTextArea1.updateUI();
        jTextArea1.revalidate();
        jTextArea1.validate();
        jTextArea2.updateUI();
        jTextArea2.revalidate();
        jTextArea2.validate();
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration
} 
```

# c# - 在 C# 中为核心类编写自定义比较器

> ID：14165468
> 
> 赞同：0
> 
> 时间：2013-01-04T21:42:34.067
> 
> 标签：c#, graphics, xna, comparator, sortedset

我需要为 C# 中的核心类编写一个比较器。我有一个`SortedSet<Vector2>`并且为了遍历它我需要一个基本的比较器。不需要任何花哨的东西，因为我只需要以任何顺序访问集合中的每个元素。但是 Vector2 ( `Microsoft.Xna.Framework.Graphics`) 是一个没有默认比较器的编译 dll。

我`SortedSet`有一个属性[`Comparer`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)，但我不知道如何为 Comparer 分配一个 Vector2 比较器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:44:10.183

您需要创建自己的实现类，`IComparer<Vector2>`然后`SortedSet`用它构造您的类：

```
SortedSet<Vector2> sorted = new SortedSet<Vector2>(new MyCustomComparer()); 
```

您的比较器只需要实现单一方法[`Compare`](http://msdn.microsoft.com/en-us/library/xh5ks3b3.aspx)：

```
public class MyCustomComparer : IComparer<Vector2>
{
    public int Compare(Vector2 x, Vector2 y)
    {
        // Return appropriate value here, depending on the sort order you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:44:02.287

首先，您需要通过`IComparer<T>`实现`Vector2`.

然后您必须实例化您的自定义比较器并将其传递给 SortedSet 的构造函数：

[SortedSet(T) 构造函数](http://msdn.microsoft.com/en-us/library/dd395024.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:17:37.983

Skeet 给出了一个很好的解决方案。如果您使用 .NET 4.5 版，您还可以使用 lambda 表达式，如下所示：

```
new SortedSet<Vector2>(Comparer<Vector2>.Create(
    (v1, v2) => v1.X.CompareTo(v2.X)
    ) 
```

在上面的示例中，我只是假设`Vector2`值应该简单地通过`X`坐标进行比较（并且具有相同的向量`X`将被我的比较器视为同样“伟大”）。

另一个按长度比较的例子：

```
new SortedSet<Vector2>(Comparer<Vector2>.Create(
    (v1, v2) => (v1.X * v1.X + v1.Y * v1.Y).CompareTo(v2.X * v2.X + v2.Y * v2.Y)
    ) 
```

当然，如果确定是否`v1`小于、等于或大于的逻辑`v2`很复杂，最好有一个常用的方法，但对于简单的事情，lambdas 很棒，因为你不需要编写新的`class`或任何东西。

# java - 正则表达式 - 匹配数字和特殊情况

> ID：14165472
> 
> 赞同：1
> 
> 时间：2013-01-04T21:42:55.090
> 
> 标签：java, regex, math

我正在尝试制作一个会产生以下结果的正则表达式：

*   对于`7.0 + 5 - :asc + (8.256 - :b)^2 + :d/3`: **7.0** , **5** , **:asc** , **8.256** , **:b** , **2** , **:d** , **3**
*   对于`-+*-/^^ )ç@`：没有

它应该首先匹配可以浮动的数字，所以在我的正则表达式中我有 :`[0-9]+(\\.[0-9])?`但它也应该处理特殊情况，如**:a**或**:Abc**。

更准确地说，它应该（如果可能）匹配除数学运算符**/*+^-**和括号之外的任何内容。

所以这是我的最终正则表达式：`([0-9]+(\\.[0-9])?)|(:[a-zA-Z]+)`但它不起作用，因为我给出的两个示例都`matcher.groupCount()`返回**3**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:46:22.303

组是您在正则表达式中专门分组的内容。括号中的任何内容都是一个组。`(Hello) World`有1组，`Hello`。您需要做的是找到所有匹配项。

在您的代码`([0-9]+(\\.[0-9])?)|(:[a-zA-Z]+)`中，可以看到 3 组括号。这就是为什么你在每场比赛中总是会被分配 3 组。

您的代码可以正常工作，这是一个示例：

```
String text = "7.0 + 5 - :asc + (8.256 - :b)^2 + :d/3";

Pattern p = Pattern.compile("([0-9]+(\\.[0-9]+)?)|(:[a-zA-Z]+)");
Matcher m = p.matcher(text);

List<String> matches = new ArrayList<String>();
while (m.find()) matches.add(m.group());

for (String match : matches) System.out.println(match); 
```

ArrayList`matches`将包含您的正则表达式找到的所有匹配项。我所做的唯一更改是`+`在第二个之后添加一个`[0-9]`。这是输出：

```
7.0
5
:asc
8.256
:b
2
:d
3

```

[这里](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)`groups`有一些关于java的更多信息。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:48:08.527

```
([^\()+\-*\s])+ //put any mathematical operator inside square bracket 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:03:04.693

您的正则表达式是正确的，运行以下代码：

```
 String input = "7.0 + 5 - :asc + (8.256 - :b)^2 + :d/3"; // your input
    String regex = "(\\d+(\\.\\d+)?)|(:[a-z-A-Z]+)"; // exactly yours.
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(input);
    while (matcher.find()) {
        System.out.println(matcher.group());
    } 
```

你的问题是对方法的理解`matcher.groupCount()`。[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#groupCount%28%29)清楚地说

> 返回此匹配器模式中的捕获组数。

# c++ - 如何在 SDL 中定期调用函数？

> ID：14165486
> 
> 赞同：1
> 
> 时间：2013-01-04T21:43:51.447
> 
> 标签：c++, timer, sdl, intervals

我需要跟踪时间间隔并在每次间隔过去时调用一个函数。我已经查阅了 SDL 的文档`SDL_AddTimer`，但 gcc 抱怨我做错了。

那么，我怎样才能定期间隔，或者我该如何使用`AddTimer`？

`AddTimer`我不清楚 SDL 文档中的示例。gcc 告诉我，我的回调函数中缺少参数，并且我的计时器在范围内不存在（但我不知道要声明什么）。这是我糟糕的尝试：

```
SDL_AddTimer(3000,changeMusic,NULL);
Uint32 changeMusic(Uint32 interval, void *param){... 
```

我想也许如果经过的时间可以被 3 秒整除，那么函数就会运行，但这最终会以不稳定的频率激活。

```
if(interval.getTicks()%3000==0){
    changeMusic();
} 
```

或者，如果倒计时为零，请将其重置并调用一个函数，但我不知道如何制作一个倒计时的计时器。

```
//something like this
cdTimer=(3000 to 0)
if(cdTimer==0){
    cdTimer=(3000 to 0);
    changeMusic();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:07:35.553

我很确定，从您的代码段中，您没有在调用 SDL_AddTimer() 之前声明该函数，因此编译器认为它是错误的函数参数。

有两种解决方案：

1.  将回调函数从 SDL_AddTimer() 移动到计时器调用之前的某个位置。
2.  使用前向声明将函数向上移动。

您也可能尝试在类中使用成员函数，在这种情况下，它必须是静态成员函数。像这样的东西：

```
class Mylene
{
 public:
    ... // other stuff goes here ... 
    static Uint32 ChangeMusic(Uint32 x, void *p)
    {
         Mylene *self = reinterpret_cast<Mylene *>(p);
         self->doChangeMusic();
         return 0;
    }

    ... more stuff here, perhaps ... 
};

Mylene mylene(...);  // Note, must not go out of scope before the ChangeMusic is called. 
// ... stuff ... 
timer_id = SDL_AddTimer(3000, &Mylene::ChangeMusic, &mylene);   // Passing the mylene object... 

... Do other things here for some time ... 
```

# ajax - 在 Zend 中的文件夹中添加 ajax 调用

> ID：14165497
> 
> 赞同：1
> 
> 时间：2013-01-04T21:44:28.097
> 
> 标签：ajax, zend-framework

有没有办法在应用程序中创建一个 Ajax 文件夹，以便我可以在该 ajax 文件夹中添加每个控制器 ajax 作为单独的控制器？

例如，假设我有 IndexController、EmployeeController、MemberController。在 Ajax 文件夹中，我也希望有相同的三个名称。

然后如果我想调用一个 ajax 动作，我可以参考 /ajax/member/whatever。

用zend这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:02:36.440

您可以设置[路由](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)来创建这样的 url，但我不会按照您的建议复制控制器。一个控制器可以处理 html 和 ajax 请求。您可以在您的 url 中包含一个格式参数，如下所示：/member/21/format/ajax

然后成员 viewAction 可以检查格式变量。如果是 ajax，您可以禁用布局并返回 ajax 响应。

# php - mysql加入许多表，同时包括一个主表

> ID：14165507
> 
> 赞同：0
> 
> 时间：2013-01-04T21:45:15.777
> 
> 标签：php, mysql, optimization

我遇到了麻烦，因为主表没有我要搜索的外键。相反，辅助表具有我正在搜索的键。这意味着我必须将我的信息构建在一个数组中，一个表一个表，将每个表与主表连接起来以查找数据。

事务是主表。存款加入交易，然后我从交易表中获取存款信息。然后对付款、发票等进行同样的处理。这似乎是一种不太理想的设计方式，或者我可能遗漏了一些东西。

我希望有一种更好的方法可以一次性加入表格，而不是通过联合联接将它们全部加入。

所以目前我说

```
select * from transactions T left join deposits D on T.id = D.tID where D.account = '123' 
union 
select * from transactions T left join invoices I on T.id = I.tID where I.account = '123'
union.... 
```

ETC

有什么更好的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:48:21.793

我认为这应该做的工作

```
 select * from transactions T 
 left join deposits D on T.id = D.tID and D.account = '123' 
 left join invoices I on T.id = I.tID and I.account = '123'
 ..... 
```

# xml - 用 Haskell 和 HXT 同时处理两个 XML 文件

> ID：14165508
> 
> 赞同：3
> 
> 时间：2013-01-04T21:45:19.140
> 
> 标签：xml, haskell, hxt

我有两个 XML 文件需要解析为一条记录。第一个文档包含大部分记录的数据，但是有一个字段包含一个标识符，用于从第二个 XML 文件中获取数据，有点像

文件 1：

```
<nodes>
    <node>
        <key1>value1</key1>
        <!-- etc -->
        <keyN>valueN</keyN>
        <reference>1</reference
    </node>
</nodes> 
```

文件 2：

```
<refs>
    <ref id="1">refValue1</ref>
    <ref id="2">refValue2</ref>
</refs> 
```

我想做的是在解析第一个文档，从关键元素中检索值时，当我提取 的值时`<reference>`，我立即`<ref id="1">`从第二个文件中获取 的内容。

由于我对 Arrows 很陌生，这对我来说是一个相当大的挑战，要弄清楚如何去做。我能够很好地解析第一个 XML 文件，但我不知道如何传入第二个文档以按需使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:44:53.537

在 phg 的建议下，我尝试先将第二个 XML 文件解析为 Map，然后将其传递给第一个 XML 文件的解析器。一点点摆弄和调整，我得到了它的工作。

# java - ProcessBuilder：在不阻塞主线程的情况下转发已启动进程的标准输出和标准错误

> ID：14165517
> 
> 赞同：101
> 
> 时间：2013-01-04T21:46:08.763
> 
> 标签：java, processbuilder

我正在使用 ProcessBuilder 在 Java 中构建一个流程，如下所示：

```
ProcessBuilder pb = new ProcessBuilder()
        .command("somecommand", "arg1", "arg2")
        .redirectErrorStream(true);
Process p = pb.start();

InputStream stdOut = p.getInputStream(); 
```

现在我的问题如下：我想捕获该进程的标准输出和/或标准错误，并将其重定向到`System.out`异步。我希望进程及其输出重定向在后台运行。到目前为止，我发现这样做的唯一方法是手动生成一个新线程，该线程将连续读取`stdOut`，然后`write()`调用`System.out`.

```
new Thread(new Runnable(){
    public void run(){
        byte[] buffer = new byte[8192];
        int len = -1;
        while((len = stdOut.read(buffer)) > 0){
            System.out.write(buffer, 0, len);
        }
    }
}).start(); 
```

虽然这种方法有效，但感觉有点脏。最重要的是，它为我提供了另一个线程来正确管理和终止。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2013-01-05T02:54:23.117

使用`ProcessBuilder.inheritIO`，它将子进程标准 I/O 的源和目标设置为与当前 Java 进程的相同。

```
Process p = new ProcessBuilder().inheritIO().command("command1").start(); 
```

如果 Java 7 不是一个选项

```
public static void main(String[] args) throws Exception {
    Process p = Runtime.getRuntime().exec("cmd /c dir");
    inheritIO(p.getInputStream(), System.out);
    inheritIO(p.getErrorStream(), System.err);

}

private static void inheritIO(final InputStream src, final PrintStream dest) {
    new Thread(new Runnable() {
        public void run() {
            Scanner sc = new Scanner(src);
            while (sc.hasNextLine()) {
                dest.println(sc.nextLine());
            }
        }
    }).start();
} 
```

当子进程完成时，线程将自动死亡，因为`src`EOF 也会。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-01-04T21:50:57.223

对于**Java 7 及更高版本**，请参阅 Evgeniy Dorofeev 的[回答](https://stackoverflow.com/a/14168097/59087)。

对于**Java 6 及更早版本**，创建并使用`StreamGobbler`：

```
StreamGobbler errorGobbler = 
  new StreamGobbler(p.getErrorStream(), "ERROR");

// any output?
StreamGobbler outputGobbler = 
  new StreamGobbler(p.getInputStream(), "OUTPUT");

// start gobblers
outputGobbler.start();
errorGobbler.start(); 
```

...

```
private class StreamGobbler extends Thread {
    InputStream is;
    String type;

    private StreamGobbler(InputStream is, String type) {
        this.is = is;
        this.type = type;
    }

    @Override
    public void run() {
        try {
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ((line = br.readLine()) != null)
                System.out.println(type + "> " + line);
        }
        catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-10-28T08:59:06.927

使用 Java 8 lambda 的灵活解决方案，可让您提供`Consumer`将逐行处理输出（例如记录它）的方法。`run()`是一个没有抛出检查异常的单行程序。作为实现的替代方案，它可以像其他答案所建议的那样`Runnable`进行扩展。`Thread`

```
class StreamGobbler implements Runnable {
    private InputStream inputStream;
    private Consumer<String> consumeInputLine;

    public StreamGobbler(InputStream inputStream, Consumer<String> consumeInputLine) {
        this.inputStream = inputStream;
        this.consumeInputLine = consumeInputLine;
    }

    public void run() {
        new BufferedReader(new InputStreamReader(inputStream)).lines().forEach(consumeInputLine);
    }
} 
```

然后，您可以像这样使用它：

```
public void runProcessWithGobblers() throws IOException, InterruptedException {
    Process p = new ProcessBuilder("...").start();
    Logger logger = LoggerFactory.getLogger(getClass());

    StreamGobbler outputGobbler = new StreamGobbler(p.getInputStream(), System.out::println);
    StreamGobbler errorGobbler = new StreamGobbler(p.getErrorStream(), logger::error);

    new Thread(outputGobbler).start();
    new Thread(errorGobbler).start();
    p.waitFor();
} 
```

在这里，输出流被重定向到`System.out`，错误流由`logger`.

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-11-08T11:20:39.490

它很简单，如下所示：

```
 File logFile = new File(...);
    ProcessBuilder pb = new ProcessBuilder()
        .command("somecommand", "arg1", "arg2")
    processBuilder.redirectErrorStream(true);
    processBuilder.redirectOutput(logFile); 
```

通过 .redirectErrorStream(true) 告诉进程**合并错误和输出流**，然后通过 .redirectOutput(file) 将合并的输出重定向到文件。

**更新：**

我确实设法做到了如下：

```
public static void main(String[] args) {
    // Async part
    Runnable r = () -> {
        ProcessBuilder pb = new ProcessBuilder().command("...");
        // Merge System.err and System.out
        pb.redirectErrorStream(true);
        // Inherit System.out as redirect output stream
        pb.redirectOutput(ProcessBuilder.Redirect.INHERIT);
        try {
            pb.start();
        } catch (IOException e) {
            e.printStackTrace();
        }
    };
    new Thread(r, "asyncOut").start();
    // here goes your main part
} 
```

现在您可以在*System.out中看到 main 和 asyncOut 线程的输出*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-13T18:45:54.277

使用以下方法捕获输出和反应式处理的简单 java8 解决方案`CompletableFuture`：

```
static CompletableFuture<String> readOutStream(InputStream is) {
    return CompletableFuture.supplyAsync(() -> {
        try (
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
        ) {
              StringBuilder res = new StringBuilder();
              String inputLine;
              while ((inputLine = br.readLine()) != null) {
                  res.append(inputLine).append(System.lineSeparator());
              }
              return res.toString();
        } catch (Throwable e) {
            throw new RuntimeException("problem with executing program", e);
        }
    });
} 
```

以及用法：

```
Process p = Runtime.getRuntime().exec(cmd);
CompletableFuture<String> soutFut = readOutStream(p.getInputStream());
CompletableFuture<String> serrFut = readOutStream(p.getErrorStream());
CompletableFuture<String> resultFut = 
    soutFut.thenCombine(serrFut, (stdout, stderr) -> {
         // print to current stderr the stderr of process and return the stdout
         System.err.println(stderr);

         return stdout;
    });
// get stdout once ready, blocking
String result = resultFut.get(); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-20T09:08:50.243

有一个库提供了更好的 ProcessBuilder，zt-exec。该库可以完全满足您的要求以及更多功能。

这是使用 zt-exec 而不是 ProcessBuilder 时您的代码的样子：

添加依赖项：

```
<dependency>
  <groupId>org.zeroturnaround</groupId>
  <artifactId>zt-exec</artifactId>
  <version>1.11</version>
</dependency> 
```

编码 ：

```
new ProcessExecutor()
  .command("somecommand", "arg1", "arg2")
  .redirectOutput(System.out)
  .redirectError(System.err)
  .execute(); 
```

该库的文档在这里：[https ://github.com/zeroturnaround/zt-exec/](https://github.com/zeroturnaround/zt-exec/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-07T19:31:25.370

我也只能使用 Java 6。我使用了 @EvgeniyDorofeev 的线程扫描器实现。在我的代码中，一个进程完成后，我必须立即执行另外两个进程，每个进程都比较重定向的输出（基于差异的单元测试，以确保 stdout 和 stderr 与祝福的相同）。

即使我 waitFor() 进程完成，扫描程序线程也不会很快完成。为了使代码正常工作，我必须确保在进程完成后加入线程。

```
public static int runRedirect (String[] args, String stdout_redirect_to, String stderr_redirect_to) throws IOException, InterruptedException {
    ProcessBuilder b = new ProcessBuilder().command(args);
    Process p = b.start();
    Thread ot = null;
    PrintStream out = null;
    if (stdout_redirect_to != null) {
        out = new PrintStream(new BufferedOutputStream(new FileOutputStream(stdout_redirect_to)));
        ot = inheritIO(p.getInputStream(), out);
        ot.start();
    }
    Thread et = null;
    PrintStream err = null;
    if (stderr_redirect_to != null) {
        err = new PrintStream(new BufferedOutputStream(new FileOutputStream(stderr_redirect_to)));
        et = inheritIO(p.getErrorStream(), err);
        et.start();
    }
    p.waitFor();    // ensure the process finishes before proceeding
    if (ot != null)
        ot.join();  // ensure the thread finishes before proceeding
    if (et != null)
        et.join();  // ensure the thread finishes before proceeding
    int rc = p.exitValue();
    return rc;
}

private static Thread inheritIO (final InputStream src, final PrintStream dest) {
    return new Thread(new Runnable() {
        public void run() {
            Scanner sc = new Scanner(src);
            while (sc.hasNextLine())
                dest.println(sc.nextLine());
            dest.flush();
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-06T10:21:50.750

作为 msangel[答案](https://stackoverflow.com/a/57483714/2019601)的补充，我想添加以下代码块：

```
private static CompletableFuture<Boolean> redirectToLogger(final InputStream inputStream, final Consumer<String> logLineConsumer) {
        return CompletableFuture.supplyAsync(() -> {
            try (
                InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
                BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
            ) {
                String line = null;
                while((line = bufferedReader.readLine()) != null) {
                    logLineConsumer.accept(line);
                }
                return true;
            } catch (IOException e) {
                return false;
            }
        });
    } 
```

它允许将进程的输入流（stdout、stderr）重定向到其他消费者。这可能是 System.out::println 或其他任何使用字符串的东西。

用法：

```
...
Process process = processBuilder.start()
CompletableFuture<Boolean> stdOutRes = redirectToLogger(process.getInputStream(), System.out::println);
CompletableFuture<Boolean> stdErrRes = redirectToLogger(process.getErrorStream(), System.out::println);
System.out.println(stdOutRes.get());
System.out.println(stdErrRes.get());
System.out.println(process.waitFor()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-10T02:44:02.810

令我感到惊讶的是，重定向方法`ProcessBuilder`不接受`OutputStream`, only `File`。Java 强制您编写的强制样板代码的另一个证明。

也就是说，让我们看一下综合选项列表：

1.  如果您希望将流程输出简单地重定向到其父级的输出流，`inheritIO`则可以完成这项工作。
2.  如果您希望进程输出转到文件，请使用`redirect*(file)`.
3.  如果您希望进程输出转到记录器，则需要`InputStream`在单独的线程中使用该进程。查看使用 a`Runnable`或的答案`CompletableFuture`。您还可以调整下面的代码来执行此操作。
4.  如果您想将流程输出转到一个`PrintWriter`，它可能是也可能不是标准输出（对测试非常有用），您可以执行以下操作：

```
static int execute(List<String> args, PrintWriter out) {
    ProcessBuilder builder = new ProcessBuilder()
            .command(args)
            .redirectErrorStream(true);
    Process process = null;
    boolean complete = false;
    try {
        process = builder.start();
        redirectOut(process.getInputStream(), out)
                .orTimeout(TIMEOUT, TimeUnit.SECONDS);
        complete = process.waitFor(TIMEOUT, TimeUnit.SECONDS);
    } catch (IOException e) {
        throw new UncheckedIOException(e);
    } catch (InterruptedException e) {
        LOG.warn("Thread was interrupted", e);
    } finally {
        if (process != null && !complete) {
            LOG.warn("Process {} didn't finish within {} seconds", args.get(0), TIMEOUT);
            process = process.destroyForcibly();
        }
    }

    return process != null ? process.exitValue() : 1;
}

private static CompletableFuture<Void> redirectOut(InputStream in, PrintWriter out) {
    return CompletableFuture.runAsync(() -> {
        try (
                InputStreamReader inputStreamReader = new InputStreamReader(in);
                BufferedReader bufferedReader = new BufferedReader(inputStreamReader)
        ) {
            bufferedReader.lines()
                    .forEach(out::println);
        } catch (IOException e) {
            LOG.error("Failed to redirect process output", e);
        }
    });
} 
```

到目前为止，上述代码相对于其他答案的优势：

1.  `redirectErrorStream(true)`将错误流重定向到输出流，这样我们只需要处理一个即可。
2.  `CompletableFuture.runAsync`从`ForkJoinPool`. 请注意，此代码不会通过调用`get`或`join`在上阻塞，`CompletableFuture`而是在完成时设置超时（Java 9+）。没有必要，`CompletableFuture.supplyAsync`因为没有什么可以从 method 中返回`redirectOut`。
3.  `BufferedReader.lines`比使用`while`循环更简单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-29T07:05:32.377

```
Thread thread = new Thread(() -> {
      new BufferedReader(
          new InputStreamReader(inputStream, 
                                StandardCharsets.UTF_8))
              .lines().forEach(...);
    });
    thread.start(); 
```

您的自定义代码代替`...`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-10-26T18:46:30.340

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Main {

    public static void main(String[] args) throws Exception {
        ProcessBuilder pb = new ProcessBuilder("script.bat");
        pb.redirectErrorStream(true);
        Process p = pb.start();
        BufferedReader logReader = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String logLine = null;
        while ( (logLine = logReader.readLine()) != null) {
           System.out.println("Script output: " + logLine);
        }
    }
} 
```

通过使用这一行：`pb.redirectErrorStream(true);`我们可以结合 InputStream 和 ErrorStream

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-10-01T17:21:43.393

默认情况下，创建的子进程没有自己的终端或控制台。它的所有标准I/O（即stdin、stdout、stderr）操作都将被重定向到父进程，在那里可以通过使用getOutputStream()、getInputStream() 和getErrorStream() 方法获得的流来访问它们。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

[https://www.securecoding.cert.org/confluence/display/java/FIO07-J.+Do+not+let+external+processes+block+on+IO+buffers](https://www.securecoding.cert.org/confluence/display/java/FIO07-J.+Do+not+let+external+processes+block+on+IO+buffers)

# tidesdk - TideSDK 弹出“保存到对话框”onclick

> ID：14165524
> 
> 赞同：1
> 
> 时间：2013-01-04T21:46:32.277
> 
> 标签：tidesdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:54:55.387

您可以捕获点击，使用 Ti.UI.currentWindow.openFolderChooserDialog 允许用户选择下载文件的位置，然后使用 Ti.Filesystem api 将文件复制到目标。

# jquery - jquery 没有找到我的 json 值？

> ID：14165531
> 
> 赞同：-3
> 
> 时间：2013-01-04T21:48:02.580
> 
> 标签：jquery, json

我正在从我的服务器端代码返回一些 json。

`console.log(data)`给我：

```
{
   "VRM": "DG70XSC",
   "Make": "FORD",
   "Model": "FOCUS ZETEC CLIMATE 116",
   "Body": "5 DOOR HATCHBACK",
   "Doors": "5 DOORS",
   "Seats": 5,
   "BodyDescription": "hatchback"
} 
```

为什么在这种情况下 console.log(data.BodyDescription) 未定义？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:51:08.327

很可能是因为`data`是一个字符串。你需要解析它：

```
$.parseJSON(data).BodyDescription 
```

您也可以考虑`getJSON`代替您当前的 ajax 调用或`dataType`使用您的 ajax 调用正确设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:54:52.713

将 dataType 更改为 json 以便 jQuery 为您解析它。

```
$.ajax({
    dataType: "json",
    url: "...",
    ...
}); 
```

或者

```
$.get(url,function(data){...},"json"); 
```

或者

```
$.post(url,function(data){...},"json"); 
```

# c# - 删除前将数据保存到表中

> ID：14165532
> 
> 赞同：0
> 
> 时间：2013-01-04T21:48:03.093
> 
> 标签：c#, asp.net

我有一个具有删除按钮的详细视图；当用户单击删除按钮时，他们会看到删除确认对话框。在删除数据之前，我需要在详细视图中使用什么样的命令？当用户选择“是”时，我想先将详细视图中的数据保存到某种变量中，然后将其删除。我想获得某种高级指导或提示。谢谢 这是我的 ASPX 文件中确认对话框的代码。

```
<ItemTemplate>
    <asp:Button ID="Button1" runat="server" CausesValidation="False" 
                CommandName="Edit" Text="Edit" />
    &nbsp;<asp:Button ID="Button2" runat="server" CausesValidation="False" 
                      CommandName="Delete" Text="Delete" OnClientClick="return confirm('Are you sure you want to delete');" />
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:54:27.770

订阅`ItemDeleting`事件，甚至`ItemCommand`事件。

在这两种情况下，您仍然可以在数据被删除*之前访问数据。*

# silverlight-4.0 - 在 Silverlight 中创建自定义网格控件

> ID：14165535
> 
> 赞同：0
> 
> 时间：2013-01-04T21:48:15.563
> 
> 标签：silverlight-4.0, custom-controls

我需要在 Silverlight 中创建一个自定义网格，如控件，它显示数据，格式如下。

![在此处输入图像描述](../Images/153ed22112a6706b5f1b8e35568592ec.png)

每个单元格将包含表示交集的值。我怎样才能用银光做到这一点？

PS：数字不代表实际值。

# lucene - 显示 Lucene/Elasticsearch 索引的字段

> ID：14165537
> 
> 赞同：2
> 
> 时间：2013-01-04T21:48:24.690
> 
> 标签：lucene, elasticsearch

有没有办法让 Lucene/Elasticsearch 只显示给定索引中已索引的字段？我试图弄清楚某些字段是否由于配置选项而被正确索引，但我不知道如何做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:55:07.213

您可以通过以下调用检查特定索引和类型的映射：

```
http://localhost:9200/index/type/_mapping 
```

任何被索引的东西都应该在那里有一个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:04:17.090

另请参阅分析 API 以了解如何将文本分解为术语。

[http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)

# c# - 无法删除包含不可见文件的文件夹

> ID：14165543
> 
> 赞同：-2
> 
> 时间：2013-01-04T21:48:57.417
> 
> 标签：c#, fileinfo, directoryinfo

使用 Visual Studio 2010 C#。我正在尝试删除我的软件放置在`C:/Windows/MyFolderA`那里`MyFolderA`的文件夹的文件夹 - 不是微软的。

我已使用此代码删除文件夹的内容和文件夹本身：

```
foreach (FileInfo tempfi in listOfMSIInstallers)
{
    //Delete all Files
    DirectoryInfo localDirectoryInfo = new DirectoryInfo(targetDirectory);
    FileInfo[] listOfMSIInstallers = localDirectoryInfo.GetFiles("*",SearchOption.AllDirectories);
    File.SetAttributes(tempfi.FullName, File.GetAttributes(tempfi.FullName) & ~FileAttributes.ReadOnly); //Remove Read-Only
    File.Delete(tempfi.FullName); //Delete File

    string parentFolderPath = "C:/Windows/MyFolderA"; //Example string for StackOverflow

    //Remove ReadOnly attribute and delete folder
    var di = new DirectoryInfo(parentFolderPath);
    di.Attributes &= ~FileAttributes.ReadOnly;
    Directory.Delete(parentFolderPath);
} 
```

如果我尝试删除该文件夹，则会出现异常

> “System.IO.IOException：目录不为空”。

在我的 GUI 上显示不可见文件我看不到任何文件。使用命令提示符查看文件夹似乎有 2 个目录：1 个名为 . 第二个名为 .. （对命令提示符目录不太熟悉，所以我不知道它们是临时名称还是实际的目录名称），均为 0 个文件和 0 个字节。

通过查看`FileInfo[]`对象进行调试，它不会抓取从命令提示符中找到的不可见文件。

有什么想法可以删除文件/目录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:50:04.523

尝试

```
Directory.Delete(parentFolderPath, true); 
```

# linux - 如何切换文件中文本的大小写

> ID：14165547
> 
> 赞同：1
> 
> 时间：2013-01-04T21:49:14.733
> 
> 标签：linux, shell

我想知道将大写字符转换为小写字符并将小写字符转换为大写字符的命令。

它必须在 Unix 机器的 shell 中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:51:17.923

```
tr A-Za-z a-zA-Z 
```

（不幸的是，只有ascii）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:54:35.083

```
cat file1 | tr 'a-zA-Z' 'A-Za-z' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:52:57.153

您可以使用此处提供的答案将您的文件传输到 perl：

[Perl，使用tr函数同时将大写转换为小写，反之亦然？](https://stackoverflow.com/questions/5608052/perl-using-tr-function-to-convert-uppercase-to-lowercase-and-vice-versa-at-the)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T21:59:45.230

要获得小写字母：`sed -i 's/\(.*\)/\L\1/' somefilename`

获取大写：`sed -i 's/\(.*\)/\U\1/' somefilename`

# google-maps - 谷歌地图上的侧边栏对地图做出反应

> ID：14165548
> 
> 赞同：0
> 
> 时间：2013-01-04T21:49:18.123
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个谷歌地图（API v3），其中填充了指示数据库数据的标记。我想添加一个侧边栏来检查地图上当前可见的标记并将它们添加到侧边栏，每当移动地图时进行调整。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:01:47.030

我有一个[GitHub 项目](https://github.com/lightningwhelk/Geoxml3-Map)，它加载一个包含地标的 KML 文件，将它们放在边栏中，并在更改地图时使用 Google Maps API 使位置变暗/变亮。相关部分是这个片段：

```
google.maps.event.addListener(mapInstance, 'bounds_changed', function() {
    currentBounds = mapInstance.getBounds();
    for (i = 0; i < parser.docs[0].placemarks.length; i++) {
        var myLi = $("#p" + i);
        if (currentBounds.contains(parser.docs[0].placemarks[i].marker.getPosition())) {
            myLi.css("color","#000000");
        } else {
            myLi.css("color","#CCCCCC");
        }
    }
}); 
```

它的缩写版本是：

```
google.maps.event.addListener(mapInstance, 'bounds_changed', function() {
    currentBounds = mapInstance.getBounds();
    /*
     Loop over Google map placemarks and check the placemark by doing:
     if (currentBounds.contains(currentPlacemark.getPosition())) {
       // Change CSS to make sidebar entry visible
     } else {
       // Change CSS to make sidebar entry invisible
     }
     */
}); 
```

在我的示例中，mapInstance 是 google.maps.Map 的实例，currentPlacemark 是您的 google.maps.Marker 对象之一的实例。

# ruby-on-rails - 在 Rails 中，如何访问模型中的控制器数据

> ID：14165551
> 
> 赞同：0
> 
> 时间：2013-01-04T21:49:34.233
> 
> 标签：ruby-on-rails, model-view-controller, gabba

## 设想

我有一个应用程序，我希望将事件记录到第三方（通过将[Gabba](https://github.com/hybridgroup/gabba)混合到我的模型中的自定义模块）。事件在模型中生成，但生成事件的服务器端代码需要访问当前请求的 cookie。

## MVC 问题

这是模型需要控制器包含的数据的问题的特殊化。忠于 MVC，模型不应该访问控制器。我见过的答案是将所需的值作为参数传递给模型。虽然我在大多数情况下都同意这种方法，但我认为这不是最好的解决方案，因为通常情况下它是未知的，并且如果模型要生成事件，它也不是控制器的关注点。

### 所以举个具体的例子：

想象一个“用户”模型有一个名为“创建”的静态方法。UsersController 使用用户哈希调用 create 方法。create 方法希望向 Gabba 发布“用户创建”事件，但需要为当前请求解析 google 分析 cookie。 **将 cookie 发送给 User#create 似乎并不正确**。

### 我想到的是：

1.  将度量模块所需的 cookie 值放入模型可访问的某种全局数据存储中。（哪里是最好的地方？）
2.  将事件放在某种存储中，并让控制器在处理请求结束时运行事件代码。

# javascript - 在同一页面上输出表单结果

> ID：14165555
> 
> 赞同：4
> 
> 时间：2013-01-04T21:49:47.767
> 
> 标签：javascript

我试图在与表单相同的页面上显示表单结果，但是当我单击“获取总计”按钮时，我看到结果短暂出现然后消失。我的结果也关闭了，我正在尝试将我的变量添加在一起，但我正在加入。

```
<form id="percentageBiz" method="post">
<input type="text" id="sum1">
<input type="text" id="sum2">
<input type="submit" onclick="total()" value="Get Total">

<div id="display" style="height: 50px; width: 100%;"></div>

<script>
function total(){
    var a = document.forms["percentageBiz"]["sum1"].value;
    var b = document.forms["percentageBiz"]["sum2"].value;
    //alert(a+b)
    var display=document.getElementById("display")
    display.innerHTML=a+b;
}
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T21:53:46.020

它闪烁是因为您没有做任何事情来阻止表单提交，并且连接是因为您没有将值转换为数字。请注意，如果您正在处理非整数而不是[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt) ，则可以使用[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat) ，如下所示。

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/mw6FB/)**。

```
function total(){
    var a = document.forms["percentageBiz"]["sum1"].value;
    var b = document.forms["percentageBiz"]["sum2"].value;
    //alert(a+b)
    var display=document.getElementById("display")
    display.innerHTML=parseInt(a,10)+parseInt(b,10);
    return false;
}​ 
```

和

```
<form id="percentageBiz" method="post">
<input type="text" id="sum1">
<input type="text" id="sum2">
<input type="submit" onclick="return total()" value="Get Total">
</form>
<div id="display" style="height: 50px; width: 100%;"></div>​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-22T20:32:51.387

“结果短暂出现然后消失。”

1.  Try using input type="***button***" rather than input type="***submit***".
2.  OR Else ( while using input type="submit" ) avoid form submission, by *returning **false*** in *function total()* and put *onclick="**return total( )**"*.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:54:14.323

发生的事情是您的 javascript 代码正在运行，但随后提交正在执行。您需要做的就是将 type='submit' 切换为 type='button' ，您将两个数字连接在一起的原因是因为它不知道它是字符串还是数字，所以如果你把 display. innerHTML=parseInt(a + b); 而不是 display.innerHTML=a + b; 它应该可以解决您的其他问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T21:55:54.093

您正在尝试将两个字符串添加在一起。您应该首先将它们解析为整数： [http ://www.javascripter.net/faq/convert2.htm](http://www.javascripter.net/faq/convert2.htm)

```
 <form id="percentageBiz" method="post">
<input type="text" id="sum1">
<input type="text" id="sum2">
<input type="submit" onclick="total()" value="Get Total">

<div id="display" style="height: 50px; width: 100%;"></div>

<script>
function total(){
    var a = parseInt(document.forms["percentageBiz"]["sum1"].value);
    var b = parseInt(document.forms["percentageBiz"]["sum2"].value);
    //alert(a+b)
    var display=document.getElementById("display")
    display.innerHTML=a+b;
}
</script> 
```

您不应该将它们乘以 1 进行转换，因为这是将字符串解析为整数并将其乘以 1。所以这是一个额外的步骤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T21:52:41.777

你得到的是一个连接而不是一个总和，因为你总是得到字符串值。

例如，您可以将它们乘以 1，然后您的 var 将被视为一个数字。

# android - 无法在 Android 网络浏览器中播放流式音频

> ID：14165560
> 
> 赞同：1
> 
> 时间：2013-01-04T21:50:17.157
> 
> 标签：android, html, streaming, audio-streaming, html5-audio

好吧，我迷路了。我有 2 个不同的流，可以使用任何一个。但两者都不适用于 Android 上的网页 PHP 或 HTML。我尝试使用 HTML5 和其他一些 Javascript 库的 AUDIO 标记。搜索这个板对我没有多大帮助。只是死路一条。

Mp3 流是[http://8713.live.streamtheworld.com:80/WWWQFMMOB_SC](http://8713.live.streamtheworld.com:80/WWWQFMMOB_SC)

AAC 流是[http://5913.live.streamtheworld.com:80/WWWQFMAAC_SC](http://5913.live.streamtheworld.com:80/WWWQFMAAC_SC)

这些实际上位于 .pls 文件 (playerservices.streamtheworld.com/pls/WWWQFM.pls) (MP3 Stream) (playerservices.streamtheworld.com/pls/WWWQFMAAC.pls) (AAC) 中。我可以在 iPhone 上使用它们中的任何一个，但 Android ......没有运气。它不必与 iPhone 播放器使用相同的代码。

有任何想法吗？？到目前为止，我不是代码专家，但我在适应、改变和遵循逻辑方面并不差。谢谢！！

# vim - 使用 vim 中的块选择从行尾删除

> ID：14165566
> 
> 赞同：11
> 
> 时间：2013-01-04T21:50:55.587
> 
> 标签：vim

当我尝试使用 vim 中的块选择从行尾删除时，我遇到了异常行为。

所以假设我有这样的文字：

```
delete this char:x
and this:x
also this:x
and then this:x
lastly this:x 
```

如果我想附加`y`到每一行，我可以：

*   开始块选择`C-v`
*   选择所有行`4j`
*   走到行尾`$`
*   开始附加`A`
*   键入所需的文本`y`

为了得到：

```
delete this char:xy
and this:xy
also this:xy
and then this:xy
lastly this:xy 
```

但是如果我尝试`x`在最后一步中删除而不是追加，我希望得到：

```
delete this char:
and this:
also this:
and then this:
lastly this: 
```

虽然我最终得到：

```
delete this char:
and this:x:
also this:x:
and then this:x:
lastly this:x: 
```

据我了解，它将第一行中的最后一个字符附加到所有其他行（在这种情况下`:`），而不是删除丢失的字符（在这种情况下`x`）。

我可以用宏或替代品做到这一点，但我不太明白这种行为背后的基本原理。有没有办法通过块选择来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T02:27:46.487

你试过`:{range}normal`吗？这应该有效：

```
:'<,'>normal $x 
```

（`'<,'>`当您键入时，该位会为您填写`:`。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T22:21:52.487

`$` `C-v` `4j` `x`

1.  走到行尾`$`
2.  切换视觉块`C-v`
3.  往下走（在你的情况下是 4x）`4j`
4.  删除那些东西`x`

**编辑**：（对您对任意缩进的评论作出反应）

这可以通过简单的宏来完成。宏并不像你想象的那么难：

1.  开始录制宏，我们将其命名为“a”，所以`qa`
2.  走到行尾`$`
3.  删除一个字符`x`
4.  下一行`j`
5.  结束我们的宏`q`

现在应用我们的宏：`20@a`- 将执行与录制宏时相同的操作，20 倍。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-04T23:07:20.860

如果我的行数很少，我通常会这样做`A``backspace``esc`。然后反复做`j``.`，直到做完。不是最快的方法，但很容易记住。

对于大量行，我通常通过视觉选择行，`V`然后在范围上执行替换或正常命令。

```
:'<,'>s/.$//
:'<,'>norm $x 
```

注意：您不必键入`'<,'>`. 当您以可视方式选择某些文本时，它会在您启动命令时自动插入。

替换命令非常简单，匹配最后一个字符 ( `.$`)，然后将其替换为空。

普通命令就是你如何删除普通模式下的最后一个字符，`$``x`除非它将应用于范围内的每一行。

如需更多帮助，请参阅：

```
:h range
:h :s
:h :norm 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T00:26:43.397

正如您自己所说，要实现您的目标，还有其他方法，实际上是更好的方法。`:s`或`q(macro)`或`:g/.../norm $x`。`:s/.$//g`很简单。

Ctrl-V 不适合这个工作。至于它的名字：Visual **BLOCK**。您想删除最后一个 x，并且它们（只有 x）不在一个块中。

但是，如果您真的想坚持使用 ctrl-v，则必须做一些额外的工作，以将这些“x”放在一个块中。如果您安装了 Align 插件，您可以：

选择 ( `V`) 您想要完成的所有行，

```
<leader>t: 
```

那么你的文字看起来像：

```
delete this char : x
and this         : x
also this        : x
and then this    : x
lastly this      : x 
```

`Ctrl-V`要删除 x，您应该知道如何操作。

然后

```
:%s/ *:/:/g 
```

删除“：”之前的填充空格

但是，我认为这不是一个好方法。

# javascript - 如何将 RaphaelJs 画布显示/下载为图像（png/gif）？

> ID：14165571
> 
> 赞同：2
> 
> 时间：2013-01-04T21:51:21.840
> 
> 标签：javascript, png, raphael, image

如何让用户下载使用 RaphaelJs 生成的图像？我希望它以 HTML 格式显示在 HTML 上，`<img>`以便他们可以右键单击图像以将其保存到桌面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T19:18:09.360

这是将 RaphelJs 转换为图像所需的简单示例

需要的库是：

*   RaphaelJs - [http://raphaeljs.com/](http://raphaeljs.com/)
*   Raphel.Export - [https://github.com/ElbertF/Raphael.Export](https://github.com/ElbertF/Raphael.Export)
*   canvg - [http://code.google.com/p/canvg/](http://code.google.com/p/canvg/)

-

```
<script type="text/javascript" src="raphaeljs.js"></script>        
<script type="text/javascript" src="raphael.export.js"></script>        
<script type="text/javascript" src="canvg.js"></script>

   <script>

   window.onload = function(){

       //Start with a simple raphaelJs drawing
       var paper = new Raphael(document.getElementById('raphaelDiv'), 200, 200);
       var circle = paper.circle(50, 40, 10);
       circle.attr("fill", "#f00");
       circle.attr("stroke", "#fff");
       var circle2 = paper.circle(70, 60, 50);

       //Use raphael.export to fetch the SVG from the paper
       var svg = paper.toSVG();

       //Use canvg to draw the SVG onto the empty canvas
       canvg(document.getElementById('myCanvas'), svg);

       //I had to use setTimeout to wait for the canvas to fully load before setting the img.src,
       //will probably not be needed for a simple drawing like this but i ended up with a blank image
       setTimeout(function() {
           //fetch the dataURL from the canvas and set it as src on the image
           var dataURL = document.getElementById('myCanvas').toDataURL("image/png");
           document.getElementById('myImg').src = dataURL;
       }, 100);
   }

</script>

<!--The containers below are set to be invisible, we need them for the 
    conversion but we dont need to se them-->
<div id="raphaelDiv" style="display:none;"></div>
<canvas id="myCanvas" style="display:none;"></canvas>

<img id="myImg" src=""> 
```

Wola，你有你的形象！我希望这对某人有用！

# python - 将代码推送到 Jenkins 时随机测试失败

> ID：14165573
> 
> 赞同：2
> 
> 时间：2013-01-04T21:51:30.793
> 
> 标签：python, django, jenkins, django-testing, django-jenkins

我之前也问过这个，但对答案不满意。

我用什么：

*   在 Django/python 网站上工作。
*   在本地在 python 虚拟环境上完成开发。
*   使用 GIT 作为我的 SCM
*   为 GIT 的开发人员和生产分支部署了单独的虚拟服务器
*   使用 Jenkins CI 进行持续集成。为 Jenkins 部署单独的虚拟服务器

在职的：

*   我有网站的单元测试、冒烟测试和集成测试。Jenkins 已经设置好，每当代码从我的本地 git 分支推送到 git repo 上的开发人员和生产分支时，都会在 Jenkins 中触发构建。

问题：

*   当我执行“python manage.py test”时，我的测试在本地通过
*   当代码被推送到其他分支（开发人员和生产）时，Jenkins 中的随机测试（主要是单元测试）失败。
*   测试失败后，如果我通过按 Jenkins 中的“立即构建”按钮手动进行构建，测试通常会通过并且构建成功。
*   有时，当没有对代码进行任何更改并且代码仍被推送到这些分支时，Jenkins 中的测试会随机失败。

一些常见错误：

*   断言错误：302！= 200
*   TypeError：“NoneType”对象不可下标
*   IndexError：列表索引超出范围
*   AssertionError: datetime.datetime(2012, 12, 5, 0, 0, 27, 218397) != datetime.datetime(2012, 12, 5, 0, 0, 27, 239884)
*   AssertionError：响应重定向到“x”预期“y”

迄今为止的故障排除：

*   在我的机器和虚拟服务器上本地运行所有测试。他们运行良好。
*   在本地和虚拟服务器上运行单个失败的测试。他们运行良好。
*   试图重新创建失败的条件，但截至目前，测试正在通过。

我看到的唯一问题是，每当代码被推送到开发人员和生产分支时，随机测试失败就会出现。一些测试反复失败。

谁能告诉我我还能做些什么来解决这个问题。我试着用谷歌搜索这个问题，但徒劳无功。我知道 xunitpatterns 网站对不稳定的测试行为有一些很好的见解，但它没有帮助，因为我在那里尝试了大部分东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:41:51.597

这是一个非常难以回答的问题。

django 开发人员可能会陷入一些常见的陷阱，但我不知道。

除此之外，这只是正常的调试：

1.  找到重现故障的方法。如果您可以在自己的笔记本电脑上使测试失败，那就太好了。如果你不能，你必须在它失败的机器上调试它。

2.  获取更多信息。断言失败时可以打印自定义消息。打印相关变量的值。将调试打印输出添加到您的代码和测试中。看看事情在哪里不是他们应该的样子。谷歌如何使用 Python 调试器。

保持开放的心态。错误可能出现在任何地方：硬件、软件环境、您的代码或测试代码中。但是，除非你是上帝，Linus Torvalds 或 Brian Kernighan，否则首先假设错误是从你的键盘和座椅靠背之间的某个地方开始的。（而且上面的三个黑客也都犯了错误。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-25T09:59:08.587

对于这个问题 - AssertionError: datetime.datetime(2012, 12, 5, 0, 0, 27, 218397) != datetime.datetime(2012, 12, 5, 0, 0, 27, 239884)

我使用 freezegun 库使日期时间更可预测。我不确定为什么会出现这个问题，但冻结日期和时间在一定程度上有所帮助。

例子：

```
from freezegun import freeze_time
import datetime
import unittest

@freeze_time("2012-01-14")

def test():

assert datetime.datetime.now() == datetime.datetime(2012, 1, 14) 
```

# c# - 在类中使用 UserProfile 外键在 MVC 4 中创建新的配置文件

> ID：14165581
> 
> 赞同：2
> 
> 时间：2013-01-04T21:52:02.447
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

我正在尝试制作一个使用内置 MVC 用户配置文件作为身份验证方法的基本网站。我正在使用 MVC4.0 和实体框架。

我有一个使用 UserProfile 模型作为外键的主数据类。这个类是一个“游戏”类，用于将游戏与某个用户相关联。

我还向 UserProfile 类添加了另一个成员，作为该项目的必需品。

每次我尝试添加一个新游戏时，其中有一个用户的配置文件作为外键，服务器最终会完全创建一个新的用户配置文件，即使我专门制作了它以便它是同一个用户。

作为解决此问题的尝试的一部分，我将 Game 对象添加到用户配置文件 DbContext 中，但这根本没有帮助，而且每次我将新游戏插入数据库时​​，我仍然会创建新用户。

我的模型如下：

```
public class Game
{
    public int ID { get; set; }

    [ForeignKey("UserId")]
    public virtual UserProfile Profile { get; set; }

    public int UserId { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public int Balance { get; set; }
} 
```

我的新用户上下文是：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Game> GamesList { get; set; }
} 
```

我添加新游戏的方法是：

```
 Models.UsersContext uc = new UsersContext();
        UserProfile prof = uc.UserProfiles.Where(c=>c.UserName == HttpContext.User.Identity.Name).First();
        Game g = new Game();
        g.Profile = prof;
        g.Wager = int.Parse(BetQuantity);

        uc.GamesList.Add(g);
        uc.SaveChanges(); 
```

我真的不知道我做错了什么，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T11:33:40.373

像这样改变你的`UserProfile`班级：

```
[Table("UserProfile")]
public class UserProfile
{
    public UserProfile()
    {
        this.Games = new HashSet<Game>();            
    }

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public int Balance { get; set; }

    public virtual ICollection<Game> Games { get; set; }
} 
```

然后像这样插入你的游戏：

```
Models.UsersContext uc = new UsersContext();

Game g = new Game();
g.UserId = WebSecurity.CurrentUserId;
g.Wager = int.Parse(BetQuantity);

uc.GamesList.Add(g);
uc.SaveChanges(); 
```

请注意，您没有`Wager`在`Game`模型中声明任何属性。我不知道它是什么...

# android - Facebook SDK 2.0 能工作多久

> ID：14165586
> 
> 赞同：3
> 
> 时间：2013-01-04T21:52:10.813
> 
> 标签：android, facebook-android-sdk

我看到 Facebook 于 2012 年 12 月 13 日发布了 SDK 3.0

使用 Facebook SDK 2.0 编写的应用程序可以继续运行多久？我似乎在任何地方都找不到。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:03:43.737

[此页面显示](https://developers.facebook.com/blog/post/2012/12/13/facebook-sdk-3-0-for-android-and-native-login/)2013**年 6 月 13 日**：

> 最新版本的 SDK 向后兼容所有集成了 SDK 2.0 或更高版本的应用程序。开发人员应在 2013 年 6 月 13 日之前迁移到 SDK 3.0，届时我们将终止对 SDK 2.0 问题的支持。

这是一个[很好的教程](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/)，可帮助您升级应用程序。

# ember.js - Ember.js 1.0.0-pre2 使用哪个 Ember Data 版本？

> ID：14165587
> 
> 赞同：1
> 
> 时间：2013-01-04T21:52:17.813
> 
> 标签：ember.js, ember-data

我正在尝试将 Ember Data 与 Ember.js 版本 1.0.0-pre2 一起使用。网站上的 Ember 文档说只是从 GitHub 下载 Ember 数据。这不起作用，因为 Ember Data 正在尝试调用[`Ember.merge()`](https://github.com/emberjs/ember.js/commit/fb6482364432152d6093145eeee38e2ad68cb309#L0R202)1.0.0-pre2 版本中不存在的调用。

我应该使用 Ember 和 Ember Data 的哪个版本组合？我尝试使用 Ember 主分支的最新提交，但它破坏了我的应用程序的路由器，所以我认为它不稳定。

这是我的路由器的副本，它在最新版本中中断（我相信它是从 Ember 代码示例中粘贴的）：

```
 var App = Ember.Application.create({ });
App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        aRoute: Ember.Route.extend({
            route: '/',
            enter: function(router) {
              console.log("entering root.aRoute from", router.get('currentState.name'));
            },
            connectOutlets: function(router) {
              console.log("entered root.aRoute, fully transitioned to", router.get('currentState.path'));
            }
        })
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:24:58.347

如果您想将 Ember Data 与他们网站上发布的 Ember.js 版本（1.0.0-pre2）一起使用，您可以使用的最新版本是修订版 10。这对应的提交没有记录在任何地方，我不得不逐步完成提交并找到它。我已经编译并上传到这里以防其他人需要它：

[最新的 Ember 数据修订版 10 构建](https://gist.github.com/4457920)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:52:51.187

您只需要构建最新的 Ember-Data... 结果将在“dist”目录中找到。您还可以在该目录中找到特定版本的 Ember-Data 所依赖的 Ember.js 版本。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T04:49:15.620

克隆 repo 后，我可以通过 reset --hard 获得 REVISION 10：

```
git clone https://github.com/emberjs/data.git ember-data.git                                                             
cd ember-data.git
git reset --hard 796cc1920f53dbe858430cb142f7432f32251f06 
```

这让我又跑了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T22:25:02.987

`Git clone https://github.com/emberjs/data.git`并在您取消商店时设置正确的修订版。

```
APP.store = DS.Store.create({
    revision: 11
}) 
```

如果您正在使用已弃用的任何内容，您将收到指示。我认为您最好使用最新版本，因为事情进展迅速，因此错误得到修复。

# javascript - 切换可见性时字体大小发生变化

> ID：14165590
> 
> 赞同：0
> 
> 时间：2013-01-04T21:52:37.253
> 
> 标签：javascript, ios, css

这只发生在我的 iPhone 上。每次我隐藏/显示一个元素时，它都会给出不同的字体大小。只有当我在“显示全部”区域显示和隐藏多个元素时才会发生这种情况

```
<style>
.asdf_2{
font-size:12px;
}
</style>
<script>
function showhide(x){
    if(document.getElementById(x).style.display == '')
    {
        document.getElementById(x).style.display = 'none';
    }
    else 
    {
        document.getElementById(x).style.display = '';
    }
}
</script>
<div class="content">
    <div class="asdf_all" onClick="showhide('showme1');showhide('showme2');">Show All</div>
    <div class="asdf">
        <div class="asdf_1" onClick="showhide('showme1');">Show1</div>
        <div class="asdf_2" id="showme1" style="display:none">asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf
        </div>
    </div>
    <div class="asdf">
        <div class="asdf_1" onClick="showhide('showme2');">Show2</div>
        <div class="asdf_2" id="showme2" style="display:none">asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:06:09.950

> “这只发生在我的 iPhone 上。”

看到这个：

[如何避免iOS自动字体大小调整？](https://stackoverflow.com/questions/6210788/how-to-avoid-ios-automatic-font-size-adjustment)

```
body {
    -webkit-text-size-adjust: 100%;
} 
```

# android - Android 应用内购买 v3 仅在 2.3 上签名构建时失败

> ID：14165592
> 
> 赞同：0
> 
> 时间：2013-01-04T21:52:44.530
> 
> 标签：android, in-app-billing

我们使用新的 Google IAB v3 API，它非常可靠，但有一种情况失败了：它不适用于在 2.3.4（Droid X）上运行的签名版本。

症状是`IInAppBillingService.isBillingSupported()`返回 3，这意味着`BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE`。

我很难过，因为所有这些情况都有效：
- 2.3.4 带有调试版本：OK
- 4.2.1 带有调试或签名版本，有/没有 proguard：OK

即使它在 4.2 上与 proguard 一起使用，我想知道这是否是一个混淆问题，所以尝试了 keep class `com.android.vending.billing.IInAppBillingService`，然后完全关闭了 proguard。没变。

所以这似乎与签名版本有关，并且仅在 2.3 上。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T20:05:21.663

您是否将 apk 上传到 Google Play 开发者控制台？当您想第一次开始测试 IAB 时，以及每次修改版本代码时，您都需要这样做。

# android - Android 一个项目中多个包，什么是R，如何导入？

> ID：14165597
> 
> 赞同：0
> 
> 时间：2013-01-04T21:52:56.970
> 
> 标签：android, eclipse

我有一个针对视力不好的人的启动器和一个简单的音乐播放器，这是我的第二个应用程序，所以请记住，我是 android 和 eclipse 的完全菜鸟。

我试图合并我的启动器和音乐播放器。我以不同的意图将活动添加到清单中，将布局和可绘制对象复制到启动器项目中，并将播放器的包添加到我的 /src 文件夹中。

之后在 com.easyplayer.java 的第一行我得到了这个错误：

```
import com.easyplayer.R;   // the import com.easyplayer.R cannot be resolved 
```

这是我得到的唯一错误，所以我想我做的一切都很好。我想 R 必须参考玩家的布局，但我不确定如何修复它（清理/重建不起作用）。R类是什么？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:59:15.400

您看到的`R`类是由 Android 自动生成的。它是一个实用程序类，包含对项目中所有资源的引用。[这里](https://stackoverflow.com/questions/4953077/android-what-is-r-why-is-it-so-cryptic)有一些详细说明其内容的答案。

您提到您对项目进行了清理，但您还需要进行完整构建以重新生成此文件。

编辑：新代码的导入可能以某种方式使您的 xml 文件无效。检查那里是否有任何错误，这可能会阻止`R`文件在构建期间重新创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:02:00.497

如果您有多个包，例如**com.example.app.package1**和**com.example.app.package2**，则导入 R.java 文件，例如，

**导入 com.example.app.R;**

如果你已经有**import android.R;** 那么请删除它并保存文件并清理项目，问题将得到解决......:)

# jquery - 将 Div 从“固定”更改为“绝对”并将 Div 放在当前浏览器窗口位置的顶部（不是页面顶部）

> ID：14165604
> 
> 赞同：1
> 
> 时间：2013-01-04T21:53:54.647
> 
> 标签：jquery, css

我遇到的问题是从位置更改 Div：已修复；到浏览器当前滚动的绝对位置。默认情况下，交换css位置：绝对将Div锁定在页面顶部......而不是浏览器窗口的顶部......所以如果您滚动，当您单击时，div会跳转到html页面的顶部。

我希望我不会过度解释看似简单的问题。

这里的例子[——jsfiddle.net/zsa9a/15/](http://jsfiddle.net/zsa9a/15/)

我在 $('#FloatingDiv').css({position:'absolute/relative/static/inherit', top:'AllSortsOfDifferentStuff'}); 上尝试了很多变化。

这就是我开始的地方...

```
$('#BtnAbsolute').click(
    function () {
    $('#FloatingDiv').css({position:'absolute'});
}); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:14:23.233

我不确定这是否正是您想要的效果。见[小提琴](http://jsfiddle.net/bplumb/zsa9a/17/)。在我看来，您需要使用`scrollTop()`才能获得当前窗口的滚动位置。

```
$('#BtnAbsolute').click( function () {
    $('#FloatingDiv').css({
        position:'absolute',
        top: $(window).scrollTop() - 20+'px'
    });
});

$('#BtnFixed').click(function () {
    $('#FloatingDiv').css({
        position:'fixed',
        top: 0
    });  
}); 
```

# jquery - jQuery脚本中的跨域安全错误

> ID：14165607
> 
> 赞同：1
> 
> 时间：2013-01-04T21:54:01.033
> 
> 标签：jquery, cross-domain, grayscale

我有一个使用 WPML 插件的多语言 WordPress 站点，它允许拥有指向相同 WordPress 安装的单独域。(EN) erikbijma.com (荷兰) erikbijma.nl

我正在实现这个脚本来动态制作灰度图像 [http://webdesignerwall.com/tutorials/html5-grayscale-image-hover](http://webdesignerwall.com/tutorials/html5-grayscale-image-hover)

我以前尝试过使用 filter 属性的纯 CSS 方法，但它会减慢网站速度，而且它在 IE10 中不起作用 [http://demosthenes.info/blog/540/Animating-CSS3-Image-Filters](http://demosthenes.info/blog/540/Animating-CSS3-Image-Filters)

在每种情况下（.nl 和 .com），我都从各自的域（.nl 和 .com）提供图像和脚本，所以我不明白为什么会出现安全错误。

IE10 中的错误消息

错误似乎发生在这里：

```
SCRIPT5022: SecurityError 
homepage.js, line 37 character 2

var imgPixels = ctx.getImageData(0, 0, canvas.width, canvas.height); 
```

在火狐中

```
SecurityError: The operation is insecure.
[Break On This Error]   

var imgPixels = ctx.getImageData(0, 0, canvas.width, canvas.height); 
```

任何帮助表示赞赏

谢谢

如果你想赚 30 美元，我在这里发布了问题 [http://www.wpquestions.com/question/showChronoLoggedIn/id/7830](http://www.wpquestions.com/question/showChronoLoggedIn/id/7830)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:55:22.330

我最终决定选择使用 GD 图像库的服务器端解决方案，但原始问题中提到的错误在这里解决了 [http://wpquestions.com/question/showChronoLoggedIn/id/7830](http://wpquestions.com/question/showChronoLoggedIn/id/7830)

这是由于一些使用 www 的 URL 和一些使用非 www 的 URL，以及 javascript 中的错误

# qt - QT5 QSound 不播放所有波形文件

> ID：14165608
> 
> 赞同：3
> 
> 时间：2013-01-04T21:54:05.943
> 
> 标签：qt, qt5

我正在将基于 QT4.X 的应用程序迁移到 QT5。QT5 中删除了声子支持，因此我将播放波形文件的代码更改为使用 QSound。

改变非常简单。我只需要使用 QSound，它现在位于多媒体库中。这是代码：

```
QSound::play("small_wave_file.wav"); 
```

对于我的大多数波形文件，这工作得很好；但是，对于我的波形文件（采样率为 44100Hz）它不起作用。

官方 QT 错误可以在[这里](https://bugreports.qt-project.org/browse/QTBUG-28948)找到。

更新：此错误已在 qt 5.1 中修复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:54:05.943

事实证明，一些波形文件混淆了 QSound。仍然不确定究竟是什么导致了这个问题。当我在 Audacity 中加载我的波形文件，然后将其导出回不同的波形文件而不进行任何更改（相同的采样率......）。QSound 播放的文件很好。

在 MacOSX 中，当我在有问题的波形文件上单击“获取信息”时，波形文件中的一般波形信息记录不可用；所以也许 QSound 无法从中获取采样率信息；并且因为它不知道从波形文件中期望的采样率？

有趣的是，iTunes 可以很好地播放原始文件，并且它具有正确的采样率。Phonon 也可以正常播放原始文件。

无论如何，希望这对一些对 QSound::play() 方法有问题的人有所帮助。

更新：由于 QSound::play() 在 Mac 上的错误很大，我选择使用本机 NSSound 从 Mac 上的 QT 应用程序播放我的波形文件。这是代码：

```
void play_sound( const char* file)
{
    NSSound *sound = [[NSSound alloc] initWithContentsOfFile:[NSString stringWithUTF8String:file] byReference:NO];
    [sound play];
    [sound release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T08:32:59.477

另请注意，Qt 有几个不同的声音播放 API。对于具有较低延迟的小文件播放，我发现这要快得多： [http ://doc.qt.io/qt-5/qsoundeffect.html#details](http://doc.qt.io/qt-5/qsoundeffect.html#details)

另外： [http ://doc.qt.io/qt-5/qmediaplayer.html](http://doc.qt.io/qt-5/qmediaplayer.html)

# javascript - 获取选定的行列值extjs网格

> ID：14165617
> 
> 赞同：11
> 
> 时间：2013-01-04T21:54:57.487
> 
> 标签：javascript, extjs, grid

我有一个用户网格。要删除一个，请选择您的行并单击“删除”按钮。但是，这行不通。我的代码是：

```
var row = userGrid.getSelectionModel().getSelection();
console.log(row.get('dni')) 
```

火狐 说：

> 类型错误：row.get 不是函数

任何的想法 ？。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-05T02:26:37.540

总是检查是个好习惯`hasSelection()` -

```
if (userGrid.getSelectionModel().hasSelection()) {
   var row = userGrid.getSelectionModel().getSelection()[0];
   console.log(row.get('dni'))
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T22:46:54.867

也许是因为

> getSelection()：Ext.data.Model[]
> 
> 返回当前选定记录的***数组***。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.Model-method-getSelection](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.Model-method-getSelection)

# magento - 添加 getSku magento 类

> ID：14165619
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:55:15.247
> 
> 标签：magento

我有一个类来获取product_id 和名称，我也想获取sku。

下面是我的课，我的问题是，我怎样才能得到 sku？， $row->getSku() 不起作用。

```
class Magestore_Productcontact_Block_Adminhtml_Productcontact_Renderer_Productname extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract {
    public function render(Varien_Object $row)
    {

        return sprintf('<a href="%s">%s</a>',
            $this->getUrl('adminhtml/catalog_product/edit', array('_current'=>true, 'id'=>$row->getProductId())),
            $row->getProductName(),
            $row->getSku()
        );
    }
} 
```

这是在 phtml 文件上生成名称和 href。

```
<a href="<?php echo $this->getUrl('adminhtml/catalog_product/edit', array('_current'=>true, 'id' => $row->getProductId())); ?>"><?php echo $row->getProductName() . $row->getSku(); ?></a> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:22:56.147

尝试

```
return sprintf('<a href="%s">%s %s</a>',
     $this->getUrl('adminhtml/catalog_product/edit', array('_current'=>true, 'id'=>$row->getProductId())),
     $row->getProductName(),
     $row->getSku()
); 
```

# google-chrome - 将 JavaScript 文件添加到我浏览的所有网站

> ID：14165629
> 
> 赞同：0
> 
> 时间：2013-01-04T21:56:13.930
> 
> 标签：google-chrome, google-chrome-extension

我是 Chrome 扩展开发的新手，我需要制作一些带有扩展的示例。
我需要将 JavaScript 文件添加到启用扩展程序时浏览的所有站点，这是我要添加到所有页面的代码

```
<script type="text/javascript" src="web-retina-emulator.js"></script> 
```

该文件使页面看起来像网站在视网膜上显示时的样子。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T06:14:16.860

启用扩展后，您可以使用此基本结构将 JavaScript 文件添加到所有站点。

# 方法一

如果`web-retina-emulator.js`是一个单独的文件，它不使用注入它的页面的全局变量或函数，建议使用此方法

## 优势：

它可以访问 chrome API* 的某些部分

## 退后

它不能使用注入它的页面的javascript变量和函数。

## 示范

### 清单.json

```
{
"name":"Custom Script",
"description":"http://stackoverflow.com/questions/14165629/add-javascript-file-to-all-sites-i-browse",
"version":"1",
"manifest_version":2,
"content_scripts":[{
    "matches":["<all_urls>"],
    "js":["web-retina-emulator.js"],
}
]
} 
```

# 方法二

如果`web-retina-emulator.js`需要一些 javascript 方法或页面变量，请使用此方法

## 优势：

它可以访问页面的javascript变量和方法

## 退后

它不能使用 chrome API*。

## 示范

### 清单.json

```
{
"name":"Custom Script",
"description":"http://stackoverflow.com/questions/14165629/add-javascript-file-to-all-sites-i-browse",
"version":"1",
"manifest_version":2,
"content_scripts":[{
    "matches":["<all_urls>"],
    "js":["myscript.js"],
}
]
} 
```

### myscript.js

```
var script = document.createElement('script'); // Create a Script Tag
script.src = chrome.extension.getURL("web-retina-emulator.js"); //Fetch the content script
script.onload = function () {
    this.parentNode.removeChild(this); //Remove script after script executed
};
(document.head || document.documentElement).appendChild(script); //ADD script tag 
                                                       //to head or Html element 
```

# 方法三

当您的 JavaScript 或 CSS 代码不应该插入到与该模式匹配的每个页面中时，以编程方式将代码插入页面很有用——例如，如果您希望脚本仅在用户单击浏览器操作的图标时运行。

## 示范

### 背景.html

```
chrome.tabs.executeScript(null,
{file:"web-retina-emulator.js"}); 
```

### 清单.json

确保在清单文件中设置权限

```
"permissions": [
  "tabs", "http://*/*"
], 
```

# 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [执行脚本 API](https://developer.chrome.com/extensions/tabs.html#method-executeScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:02:12.647

查看[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en)。它是相当于greasemonkey的铬。

# jquery - Jquery if variable == xml中的字符串

> ID：14165631
> 
> 赞同：0
> 
> 时间：2013-01-04T21:56:15.747
> 
> 标签：jquery, xml, if-statement

一直试图让这个 if-else 语句起作用，但每次我刷新页面时`#thechange`总是设置为`'nochg'`.

有什么想法吗？

```
$j(document).ready(function () {
  $j.ajax({
    type: "GET",
    url: "../funds-data/funds.xml",
    dataType: "xml",
    success: parseXml
  });
});

function parseXml(xml) {
  $j(xml).find("Symbol2").each(function () {
    var Pos = $j(this).children("Positive").text();
    alert(Pos);
    $j("#thenav").append($j(this).children("Nav").text() + "<!--other html-->");
    $j("#thechange").append($j(this).children("Change").text() + "<!--other html-->");
    $j("#thedate").append($j(this).children("Date").text() + "<!--other html-->");
    if (Pos == "Y") {
      $j("#thechange").attr('class', 'positivechg');
    } else if (Pos == "N") {
      $j("#thechange").attr('class', 'negativechg');
    } else {
      $j("#thechange").attr('class', 'nochg');
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:57:40.390

`"Y".length`并且`"N".length`都是相同的 - `1`。我想你可能是想比较`Pos`或`"Y"`他们`"N"`自己。

# razor - ASP.NET MVC 4 - for 循环发布模型集合属性，但 foreach 没有

> ID：14165632
> 
> 赞同：40
> 
> 时间：2013-01-04T21:56:16.683
> 
> 标签：razor, asp.net-mvc-4, foreach

假设我有以下型号：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}

public class Town
{
    public string Name { get; set; }
    public IEnumerable<Person> People { get; set; }
} 
```

然后，在我的 Razor 视图中，我有这个：

```
@model Town
@using(Html.BeginForm())
{
    <table>
        @foreach(var person in Model.People)
        {
            <tr>
                <td>@Html.TextBoxFor(m => person.Name)</td>
                <td>@Html.TextBoxFor(m => person.Age)</td>
            </tr>
        }
    <table>
    <input type="submit" />
} 
```

然后，我对 POST 进行了操作，如下所示：

```
[HttpPost]
public ActionResult Index(Town theTown)
{
    //....
} 
```

当我发布时，`IEnumerable<Person>`不会遇到。如果我在 Fiddler 中查看它，该集合仅发布一次，并且不枚举该集合，所以我得到：

```
People.Name = "whatever"
People.Age = 99 
```

但是，如果我将 People 更改为 an`IList`并使用 for 循环而不是 foreach ......

```
@for(var i = 0;i < Model.People.Count;i++)
{
    <tr>
        <td>@Html.TextBoxFor(m => Model.People[i].Name)</td>
        <td>@Html.TextBoxFor(m => Model.People[i].Age)</td>
    </tr>
} 
```

有用。难道我做错了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-04T22:01:39.777

问题不在于您在视图中呈现集合的方式`IEnumerable`。`IList`

```
@for(var i = 0;i < Model.People.Count;i++)
{
    <tr>
        <td>@Html.TextBoxFor(m => Model.People[i].Name)</td>
        <td>@Html.TextBoxFor(m => Model.People[i].Age)</td>
    </tr>
} 
```

请注意，对于每个列表项，您都在附加一个连续索引，这使模型绑定器能够发挥其魔力

很好的[阅读](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T12:29:46.227

您错过的只是放置 var 而不是模型本身（人物），如下所示

```
<table>
@foreach(People person in Model.People)
{
<tr>
<td>@Html.TextBoxFor(m => person.Name)</td>
<td>@Html.TextBoxFor(m => person.Age)</td>
</tr>
}
<table>
<input type="submit" /> 
```

# matlab - 在matlab中通过引用方法

> ID：14165634
> 
> 赞同：3
> 
> 时间：2013-01-04T21:56:42.417
> 
> 标签：matlab, reference

我正在为我的论文在 Matlab 中开发一个机器人应用程序。我在 C#、PHP、js 等方面经验丰富。

如果我创建的对象可以通过引用以某种方式传递，我会很高兴。我听说有一些东西叫做“处理对象”，还有一些叫做“值对象”。我找不到任何关于如何创建“句柄对象”的特定文档，而且它们似乎通常是图形对象。

当可以通过引用传递时，我有一些易于实现的设计模式。我希望某些对象共享“模拟空间”，而不使每个空间成为全局变量。我想避免到处传递 ID，以保持对象同步。我想在机器人之间共享环境对象，而不用担心传递这个对象实际上会复制它。（随着时间的推移，这将导致错误）

我开始觉得我唯一的解决方案是拥有一个奇怪的全局“对象代理”，它拥有许多常见系统对象的最新副本。我希望避免这种事情！

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:04:20.747

句柄对象由以下语法创建

```
classdef myClass < handle
   properties
      % properties here
   end
   methods
      % methods here
   end
end 
```

开始查看文档的一个好地方是[类起始页](http://www.mathworks.com/help/matlab/handle-classes.html)。请注意，值和句柄类仅在 R2008a 中实现，并且自 R2009a 以来相当没有错误（尽管最近的版本已经大大提高了性能）。

如果您来自其他语言，[本节关于 Matlab 和其他语言 OOP 之间的差异](http://www.mathworks.com/help/matlab/matlab_oop/matlab-vs-other-oo-languages.html)可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:02:08.107

您的类应该从[句柄](http://www.mathworks.it/it/help/matlab/ref/handle.html)抽象类继承

```
 classdef MyHandleClass < handle
         % // class stuff 
```

具有这种语义的类可以以类似 java 的方式通过引用传递。

还要考虑指南的[这一部分](http://www.mathworks.it/it/help/matlab/matlab_oop/matlab-vs-other-oo-languages.html#bslvcv1)。

# php - PHPStorm 格式化狂怒

> ID：14165638
> 
> 赞同：0
> 
> 时间：2013-01-04T21:57:12.733
> 
> 标签：php, drupal, coding-style, code-formatting, phpstorm

完全放弃了基于 Eclipse 的 IDE 的噩梦，我决定尝试另一个。PHP Storm 看起来不错，速度很快，我现在正在试用。

我在上一个 IDE 中遇到的主要问题之一是 SVN……另一个是格式化。如果您一次执行 10 行以上的操作，格式化程序似乎就喜欢放弃他们的设置，而我正在想办法设置它。

我有一个看起来像这样的数组：

```
$items['system/person/%company/%person/renew_comp/%comp_type/%competency'] = array(
            'title' => t('Renew Competency'),
            'description' => 'Renew competency',
            'page callback' => 'drupal_get_form',
            'access arguments' => array('administer consultant competencies'),
            'page arguments' => array('consultancy_competency_renew_form', 2, 3, 5, 6),
    ); 
```

无论我在格式化页面时使用什么设置（我使用的是 drupal 标准），它都会把它搞砸。要么把它放在一条大线上，要么保持一切都像它一样漂亮和整洁，按照我想要的方式对缩进进行排序，但只是莫名其妙地将最后的子数组中的每个数字都触发到它自己的行上底部。

最令人气愤的是，当我突出显示一个数组和格式并且它看起来不错时，我会修改设置并认为我有问题：

```
$items['system/person/%company/%person/renew_comp/%comp_type/%competency'] = array(
    'title' => t('Renew Competency'),
    'description' => 'Renew competency',
    'page callback' => 'drupal_get_form',
    'access arguments' => array('administer consultant competencies'),
    'page arguments' => array('consultancy_competency_renew_form', 2, 3, 5, 6),
  ); 
```

...然后我将突出显示整个页面，THAT SAME ARRAY 会突然看起来像这样：

```
$items['system/person/%company/%person/renew_comp/%comp_type/%competency'] = array(
      'title' => t('Renew Competency'),
      'description' => 'Renew competency',
      'page callback' => 'drupal_get_form',
      'access arguments' => array('administer consultant competencies'),
      'page arguments' => array(
        'consultancy_competency_renew_form',
        2,
        3,
        5,
        6
      ),
    ); 
```

相同的阵列！自动格式化程序的意义何在，我不能相信不能完全修改我的代码？

现在我知道这是因为设置。但是有没有设置让我的阵列单独使用？只需对选项卡意图进行排序，不要将它们粘在一行上，不要为每个键值给我 15 行新行，只是玩得好。

所以，拜托，你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:22.433

我找到了！经过几个小时的大喊……这是因为右边距设置得太远了。边距也设置为不显示，所以我不知道。

为什么只有当整个页面被选中时才会这样做我不知道，但它现在可以工作所以我不在乎。已经给他们发了电子邮件并告诉他们这个，也许还有一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T14:42:09.987

我认为格式不同，因为它是在自身与整个页面的上下文中。

至于整个页面格式，这看起来应该是基于代码样式设置的。如果您转到设置->代码样式-> PHP，然后包装和大括号，您将在底部看到数组初始值设定项。这就是告诉 phpstorm 如何格式化你的数组。希望它可以帮助某人。

# android - Android在按下时激活按钮，而不是在释放时

> ID：14165643
> 
> 赞同：1
> 
> 时间：2013-01-04T21:57:40.240
> 
> 标签：android, button

通常在Android中，当您按下并释放按钮时，无论按钮应该做什么都会被激活。有没有办法改变这一点，以便在您只按下按钮时激活按钮应该做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:01:19.750

使用[`OnTouchListener`](http://developer.android.com/reference/android/view/View.OnTouchListener.html)并检查`ACTION_DOWN`.

# vb.net - vb.net 分割字符串的最后一部分

> ID：14165645
> 
> 赞同：6
> 
> 时间：2013-01-04T21:57:53.090
> 
> 标签：vb.net, string, split

net 2.0 并且需要拆分字符串的最后一个 / 标记。目前我有一个代码，`Dim test As String = "Software\Microsoft\Windows\Welcome"`需要一个代码，将 Software\Microsoft\Windows\Welcome 拆分为最后两个单独的部分，所以我将 Software\Microsoft\Windows 和 Welcome 作为新字符串。我只能找到将开始与其余部分分开的东西，例如

```
Dim whole As String = "Software/Microsoft/Windows/Run"
Dim firstpart As String = whole.Substring(0, whole.IndexOf("/"))
Dim lastpart As String = whole.Substring(whole.IndexOf("/") + 1)` 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T22:03:30.367

使用[String.LastIndexOf()](http://msdn.microsoft.com/en-us/library/system.string.lastindexof.aspx)

```
Dim whole As String = "Software/Microsoft/Windows/Run"
Dim firstpart As String = whole.Substring(0, whole.LastIndexOf("/"))
Dim lastpart As String = whole.Substring(whole.LastIndexOf("/") + 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:02:46.687

尝试使用 '\' 作为分隔符拆分并将其存储为字符串数组。然后抓住最后一个元素，它应该是“欢迎”。

# regex - 仅当模式存在时才匹配

> ID：14165648
> 
> 赞同：3
> 
> 时间：2013-01-04T21:58:02.640
> 
> 标签：regex, perl

我有以下代码：

```
#!/usr/bin/perl
use warnings;
use strict;

my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: Prelim 3  Optional: Some stuff here';
#my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: Prelim 3';

my $RegEx = qr/Name: (.+)  Time: (.+)  State: (.+)  Optional: (.+?)(  |$)/;

if ($SourceStr =~ m/$RegEx/) {
   print "1=[$1]\n";
   print "2=[$2]\n";
   print "3=[$3]\n";
   print "4=[$4]\n";
} 
```

当使用第一个 $SourceStr 运行时，它按预期工作。但是，对于被注释掉的第二个，有没有办法用空字符串填充 $4 ？

第一个字符串结果：

```
1=[Rob]
2=[11/2/2011 1:47:30 PM]
3=[3]
4=[Some stuff here] 
```

第二个字符串结果：不匹配

想：

```
1=[Rob]
2=[11/2/2011 1:47:30 PM]
3=[3]
4=[] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:19:04.800

您可以使用更具体的正则表达式：

```
#!/usr/bin/perl
use warnings;
use strict;

my @SourceStrA=('Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here',
                'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3');

my $RegEx = qr!Name:\s*(\w+)\s*Time:\s*([\d/]*\s*[\d:]*)\s*State:\s*(\d+)\s*(?:Optional:\s*(.*))?!;

for my $SourceStr (@SourceStrA) {
  print "$SourceStr\n";
  if ($SourceStr =~ m/$RegEx/) {
    print "1=[$1]\n";
    print "2=[$2]\n";
    print "3=[$3]\n";
    print "4=[$4]\n" if defined $4; 
  }
} 
```

输出：

```
Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here
1=[Rob]
2=[11/2/2011 13:47:30]
3=[3]
4=[Some stuff here]
Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3
1=[Rob]
2=[11/2/2011 13:47:30]
3=[3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:54:58.450

如此[处](http://perldoc.perl.org/perlretut.html#Named-backreferences)所述，通过命名捕获而不是编号来处理可选匹配可能更容易。

```
#!/usr/bin/env perl

use warnings;
use strict;

my @SourceStr = (
  'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here',
  'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3',
);

my $RegEx = qr/Name: (?<name>.+?)  Time: (?<time>.+?)  State: (?<state>.+?)(?:  Optional: (?<optional>.+?))?(  |$)/;

foreach (@SourceStr) {
  print "Input '$_'\n";
  if ( /$RegEx/ ) {
     print "Name = '$+{name}'\n";
     print "Time = '$+{time}'\n";
     print "State = '$+{state}'\n";
     print "Optional = '$+{optional}'\n" if $+{optional};
  }
  print "\n";
} 
```

事实上，它变得如此简单，以至于转储`%+`散列几乎更容易：

```
#!/usr/bin/env perl

use warnings;
use strict;

my @SourceStr = (
  'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here',
  'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3',
);

my $RegEx = qr/Name: (?<name>.+?)  Time: (?<time>.+?)  State: (?<state>.+?)(?:  Optional: (?<optional>.+?))?(  |$)/;

use Data::Dumper;
foreach (@SourceStr) {
  print "Input '$_'\n";
  print Dumper \%+ if /$RegEx/;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T23:07:46.743

这是一个产生您想要的结果的选项：

```
#!/usr/bin/perl
use warnings;
use strict;

my $SourceStr = 'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here';

#my $SourceStr = 'Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3';

my $RegEx = qr/Name: (.+)  Time: (.+)  State: (.+?)(?:\s+Optional: (.+))?$/;

if ( $SourceStr =~ $RegEx ) {
    print "1=[$1]\n";
    print "2=[$2]\n";
    print "3=[$3]\n";
    print '4=[' . ( $4 // '' ) . "]\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T22:34:03.703

也许你应该使用哈希或其他东西。

```
#!/usr/bin/perl
use warnings;
use strict;

#my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here';
my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3';

my %Values;

while ($SourceStr =~ m/(\w+): (.+?)(?:  |$)/g) {
    $Values{$1} = $2;
}

if ($Values{Name} && $Values{Time} && $Values{State}) {
    print "1=$Values{Name}\n";
    print "2=$Values{Time}\n";
    print "3=$Values{State}\n";

    if (defined $Values{Optional}) {
        print "4=$Values{Optional}\n";
    } else {
        print "4=\n";
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T22:48:00.080

这个请求看起来很奇怪，但这里有一个解决方案：

```
#!/usr/bin/perl
use warnings;
use strict;

my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3  Optional: Some stuff here';
#my $SourceStr='Foo - Name: Rob  Time: 11/2/2011 13:47:30  State: 3';

my $RegEx = qr/Name: (.+)  Time: (.+)  State: (.+?)(?:  Optional: )?(.*)(  |$)/;

if ($SourceStr =~ m/$RegEx/) {
   print "1=[$1]\n";
   print "2=[$2]\n";
   print "3=[$3]\n";
   print "4=[$4]\n";
} 
```

诀窍当然是在`(?: )`不改变 $4 位置的情况下使用语法来拥有一个额外的组。此外，使用`(?: Optional: (.*))?`是不正确的（尽管更合乎逻辑和健壮），因为它意味着 $4 将是未定义的（并且您需要它是一个空字符串），并且`use strict`编译指示正在打印一条令人不安的`Use of uninitialized value...`消息。

无论如何，这些要求看起来更像是练习而不是现实生活中的问题，不是吗？

# php - 我需要有关 postgresql 选择查询语句的帮助

> ID：14165650
> 
> 赞同：1
> 
> 时间：2013-01-04T21:58:14.840
> 
> 标签：php, sql, postgresql, select

我一直在使用带有 php 项目的 postgresql 数据库，我只是想构建一个查询。这就是场景。

假设我有几张桌子，FOO 和 BAR

表 FOO 如下所示：

```
| foo_id | foo_name | foo_data |
----------------------------------
| 1 | 约翰 | 儿子 |
| 2 | 简 | 女儿|
| 3 | 山姆 | 儿子 |
| 4 | 莎莉 | 女儿|
```

表 BAR 看起来像这样

```
| bar_id | bar_foo_id | bar_fooParent_id | bar_content |
----------------------------------
| 1 | 1 | 1 | 雅巴-达巴-斗 |
| 2 | 2 | 1 | 史酷比-史酷比|
| 1 | 3 | 888 | 没有牛，伙计|
| 2 | 4 | 999 | 哦！|
```

我无法更改表架构，一切都照原样。

但是 - 我可以通过 PHP 传递一个值，我们称之为 PARENT，它表示来自 bar_fooParent_id 的值（所以我可以传递 1,2,3...657,888,999 等）。

并且 - 表 FOO 中的 foo_id 映射到表 BAR 中的 bar_foo_id。

我想构建一个 SELECT 查询，它结合了 FOO 和 BAR 表中的数据。就像是：

```
SELECT BAR.bar_content, (and other BAR.columns) , FOO.foo_name, FOO.foo_data 
FROM FOO,BAR WHERE bar_fooParent_id=".$PARENT." AND " ...? 
```

在哪里 ？有点混乱。

我需要根据从表 BAR 中选择的行从表 FOO 中获取 foo_name 和 foo_data 的行。因此，如果将值 1 传递给 $PARENT，那么 bar_fooParent_id 将为 1，我将从表 BAR 中获取前两行，并使用它们各自的 bar_foo_ids（值为 1 和 2）从表的行中获取数据foo_id 为 1 和 2 的 FOO（在本例中为前两行）。

我已经尝试过类似于下面的语句（为简单起见，值是硬编码的）

```
SELECT * from BAR,FOO where BAR.bar_fooParent_id=1 AND (BAR.foo_id=1 OR BAR.foo_id=2) AND (FOO.foo_id=1 OR FOO.foo_id=3) 
```

或者

```
select * from BAR where BAR.barr_fooParent_id=1 IN (SELECT foo_id,foo_name from kid WHERE foo_id=1 OR foo_id=3 ) 
```

没有太大的成功。基本上数据应该理想地返回

```
foo_name | foo_data | bar_content | 其他 BAR 列 ... |
_________________________________________________________________
约翰 | 儿子 | 亚巴-达巴-多 | 等|
简 | 女儿| 史酷比做| 等|
```

（为格式化道歉，不确定第三个结果表发生了什么）

如果有人可以帮助为 postgreSQL 构建这个 SELECT 查询，我将不胜感激。

有任何想法吗？谢谢。

爱德华

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:16:56.567

听起来您只需要一个简单的连接：

```
SELECT f.foo_name, f.foo_data, b.bar_content
FROM foo f
INNER JOIN bar b ON b.bar_foo_id = f.foo_id
WHERE b.bar_fooParent_id = 1 
```

# php - 使用多于一种形式的未定义索引

> ID：14165652
> 
> 赞同：0
> 
> 时间：2013-01-04T21:58:30.347
> 
> 标签：php

这是我的问题：我在同一页面上有两个表单。第一种形式工作正常。但是每当我单击第二个表单上的提交按钮时，我都会收到两个通知。第一个表示“未定义索引：电子邮件”，指的是“$email = $_POST["email"];” 在我的编码中。第二个说“未定义索引：密码”，指的是“$password = $_POST["password"];” 在我的编码中。我不希望我的第二种形式受到我为第一种形式创建的所有“if 语句”的影响。我将很快为第二种形式创建更多的“if 语句”。例如，当我点击第二个表单上的提交按钮时，它正在回显“您需要输入电子邮件和密码”，这是我只想应用于第一个表单的错误。

所以我的问题是：我怎样才能让表格只受到一组特定的“if 语句”的影响？就像在 css 编码中一样，你应用 id，但是我会对表单或“if 语句”做什么，所以“if 语句”只影响特定的表单？

这是编码：

```
<form action="login.php" method="post">
        <ul id="login">
            //login information
            <li id="loginn">
                <input type="submit" value="Log in">
            </li>
        </ul>
</form>

 <form action="" method="post"> 
        <ul id="register">
                     //register info list items
                             <li>
                <input type="submit" value="Sign up">
            </li>
        </ul>
</form>

<?php

if (empty($_POST) === false) {
$email = $_POST["email"];
$password = $_POST["password"];

if (empty($email) === true || empty($password) === true) {
    $errors[] = "You need to enter an email and password.";
} else if (user_exists($email) === false) {
    $errors[] = "The email you entered is not in our records. Have you registered?";
} else if (user_active($email) === false) {
    $errors[] = "Go to your email, open the email we sent you,and activate your account.";
} else {$login = login($email, $password);
    if ($login === false) {
        $errors[] = "That email/password combination is incorrect.";
    } else {
        $_SESSION['users_id'] = $login;
        header('Location: homepage.php');
        exit();
    }
}

} 

if (empty($errors) === false) {

?>

<?php
echo output_errors($errors);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:01:35.890

您可以`<hidden>`使用表单名称添加表单字段：

```
 <input type="hidden" name="formname" value="form1"> 
```

然后，在 PHP 中，使用它来识别形式：

```
 if ($_POST['formname'] == "form1") {
      // ifs for first form
  } 
```

（请注意，此代码中没有任何错误检查！）

# java - 反序列化 xstream 时的空值

> ID：14165654
> 
> 赞同：2
> 
> 时间：2013-01-04T21:58:40.953
> 
> 标签：java, serialization, null, xstream

将 XML 文件转换为对象时，我在处理空值时遇到问题。

我有以下 XML 输入：

```
<?xml version="1.0" encoding="UTF-8" ?>

<Results>
<show>
<showid>10353</showid>
<name>Film Buff Of The Year</name>
<link>http://www.tvrage.com/shows/id-10353</link>
<country>UK</country>
<started>1982</started>
<ended>1986</ended>
<seasons>1</seasons>
<status>Canceled/Ended</status>
<classification>Game Show</classification>
<genres></genres>
</show>
<show>
<showid>2930</showid>
<name>Buffy the Vampire Slayer</name>
<link>http://www.tvrage.com/Buffy_The_Vampire_Slayer</link>
<country>US</country>
<started>1997</started>
<ended>2003</ended>
<seasons>7</seasons>
<status>Canceled/Ended</status>
<classification>Scripted</classification>
<genres><genre>Action</genre><genre>Adventure</genre><genre>Comedy</genre<genre>Drama</genre<genre>Mystery</genre><genre>Sci-Fi</genre></genres>
</show>
</Results> 
```

我想通过这种方式将其转换为一个名为 tvSeries 的对象：

```
XStream xstream = new XStream();
xstream.alias("Results", TVSeries.class);
xstream.alias("show", Show.class);
tvSeries = (TVSeries) xstream.fromXML(file); 
```

其中 TVSeries.java 类具有以下内容：

```
public class TVSeries {

private ArrayList<Show> showList;

public TVSeries(){
    showList = new ArrayList<>();
}

public int size(){
    return showList.size();
}

} 
```

和类 Show.java 如下内容：

```
public class Show {

private String showid, name, link, country, started, ended, seasons,status,classification;
ArrayList<String> genres;

public Show(){
    genres = new ArrayList<>();
}

public Show(String showid, String name, String country, String status, String link, String started, String ended, String classification, String seasons, ArrayList<String> genres){
    this.showid = showid;
    this.name = name;
    this.country = country;
    this.status = status;
    this.link = link;
    this.started = started;
    this.ended = ended;
    this.seasons = seasons;
    this.classification = classification;
    this.genres = genres;
}
} 
```

现在我遇到的问题是我的对象始终为空。我对 XStream 没有太多经验，所以一点帮助会非常有用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:40:44.383

经过一些跟踪和错误后，我发现通过添加这些（当然也修复了 xml）起作用了。

```
xstream.alias("Results", TVSeries.class);
xstream.alias("show", Show.class);
xstream.addImplicitCollection(TVSeries.class, "showList");
xstream.aliasType("genre", String.class); 
```

只是使用 XStream 时的一些额外提示，如果您发现自己处于这种情况，它通常有助于在 java 中构建测试结构并将其序列化为 XML，以查看 xml 的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:09:16.750

使用 JAXB 对 xml 数据进行编组和解组。并使用[http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)使用 xsd 模式创建您的 java 类：

创建 MyXML 类：`xjc -d src -pcom.foo.myapp MyXML.xsd`

将 xmlFile 解组为 MyXML 对象：

```
MyXML myXML = JaxbMarshalUnmarshalUtil.unmarshal( xsdFile, xmlFile, MyXML.class ); 
```

附注：如果您没有架构，那么您做错了！

# css - 卡住创建 CSS 子菜单，其中一个特定的下拉菜单是不同的宽度 - jfiddle incl

> ID：14165657
> 
> 赞同：0
> 
> 时间：2013-01-04T21:58:59.260
> 
> 标签：css, submenu

对不起，如果这真的很初级，但我有一个打字板博客，上面有一个水平导航菜单。一些子菜单项的名称很长（每个客户都不能更改） - 幸运的是它们都在一个“部分”中。由于宽度样式适用于所有子菜单，因此仅扩大子菜单对模板来说是有问题的——而且看起来也很时髦。

我希望有一种方法可以获取一个子菜单（在这种情况下是第二个名为“Training Modules”的子菜单）并单独对其应用一种样式 - 但我对什么会覆盖什么感到困惑。如果这不起作用，有没有办法只在可能需要 2 行空间的项目上增加高度？子菜单是自定义 HTML，通常无法通过打字板 UI 进行编辑。

我还在学习 css，真的可以使用一些帮助。谢谢！！

这是我的菜单[http://jsfiddle.net/RpXd8/](http://jsfiddle.net/RpXd8/)

```
<style type="text/css">
/* Derived from http://www.devinrolsen.com/pure-css-horizontal-menu/ */
#pagebody { position: inherit !important; width: 831px; } /* DO NOT EDIT */

#pagebody-inner { position: inherit !important; width: 100%; } /* DO NOT EDIT */

#alpha, #beta, #gamma, #delta {
display: none; /* DO NOT EDIT */
position: inherit !important; /* DO NOT EDIT */
float: left; /* DO NOT EDIT */
min-height: 1px; /* DO NOT EDIT */}

#centernav {width: 831px; /* if you want your nav centered, set this to the width of your container, if you don't want it centered, change this number to 100% */}

#dropnav
{height:40px; background:#d2d3d5;}
 /* Changes the height and bg color of the main menu */

#dropnav ul
{margin:0px; padding:0px;}

#dropnav ul li
{display:inline; float:left; list-style:none; margin-left:0px; position:relative;
height: 15px;
padding: 10px 20px 15px 19px;
font-size: 14px;
valign: middle;
text-align: left;
text-decoration: none;
border-right: 1px solid #FFFFFF;
z-index: 99999}
/* only edit the last 2 items - sets the characteristics of the main menu */

#dropnav li a
{color:#000000; text-decoration:none;} /* Changes the link color of items on the main menu */

#dropnav li a:hover
{color:#900; text-decoration:none;}/* Changes the hover color of items on the main menu */

#dropnav li ul
{margin:0px; padding:0px; display:none; position:absolute; left:0px; z-index: 99999; top:40px; background-color:#d2d3d5;} /* Only edit the last 2 items - set the top margin and background color of the submenus */

#dropnav li:hover ul
{display:block;
padding: 0px;
width: 220px;
}/*sets the width of the submenus */

#dropnav li li
{list-style:none;
 display:list-item;
 border-right: 0 solid #000000;     
 border-bottom: 1px dotted #FFFFFF;
 width: 220px;
 padding: 5px 0 5px 20px;} /* DO NOT EDIT */

#dropnav li li a
{color:#000; text-decoration:none;} /* Changes the link color of items in the submenu */

#dropnav li li a:hover
{color:#900; text-decoration:none;} /* Changes the hover color of items in the submenu*/

li#main  {padding-top: 6px;} /* Sets the padding of items in the main menu */
</style>

 <div id="centernav">
<div id="dropnav">
    <ul>
        <li id="main">
        <a href="#">Home</a>
            <ul id="subnav">
                  <li><a href="#">About this site</a></li>
            </ul>            
        </li>
        <li id="main">
        <a href="#">Training Modules</a>
            <ul id="subnav">
                  <li><a href="#">Overview</a></li>
                  <li><a href="#">Technical Data Sheets</a></li>
                  <li><a href="#">Reference Documents</a></li>
                  <li><a href="#">Videos</a></li>
                  <li><a href="#">Introduction to Modules</a></li>

                  <li><a href="#">1: Title</a></li>
                  <li><a href="#">2: Really really really really really really really long title</a></li>
                  <li><a href="#">3: </a></li>
                  <li><a href="#">4: </a></li>
                  <li><a href="#">5: </a></li>
                  <li><a href="#">6: </a></li>
                  <li><a href="#">7: </a></li>
                  <li><a href="#">8: Really really really long title</a></li>
                  <li><a href="#">9: </a></li>
                  <li><a href="#">10: </a></li>
                  <li><a href="#">11: Really really really really really long title</a></li>
                  <li><a href="#">12:</a></li>
                  <li><a href="#">13:</a></li>
                  <li><a href="#">14:</a></li>
                  <li><a href="#">15:</a></li>
                  <li><a href="#">16:</a></li>
                  <li><a href="#">17:</a></li>
                  <li><a href="#">18:</a></li>
                  <li><a href="#">19:</a></li>

</ul>

            </li>

            <li id="main">
        <a href="#">Scientific Publications</a>

            <ul id="subnav">
                  <li><a href="#">P</a></li>
                  <li><a href="#">P</a></li>
                  <li><a href="#">R</a></li>
                  <li><a href="#">C</a></li>
</ul>            
        </li>
        <li id="main">
        <a href="#">Marketing</a>
            <ul id="subnav">
                  <li><a href="#">Brand Blueprint</a></li>
                  <li><a href="#">Print-ready Files</a></li>
                  <li><a href="#">Logos Photos</a></li>
                  <li><a href="#">Videos</a></li>
                  <li><a href="#">Other Sales Tools</a></li>
                  <li><a href="#">Webstore</a></li>
                  <li><a href="#">Request for Files</a></li>
                  <li><a href="#">Translations</a></li>
            </ul>            
        </li>

        <li id="main">
        <a href="#">eNews</a>

        </li>

        <li id="main">
        <a href="#">Attend Training</a>

            <ul id="subnav">
                  <li><a href="#">Training Calendar</a></li>
                  <li><a href="#">RSVP for Training</a></li>
                  <li><a href="#">Typical Agenda</a></li>
                  <li><a href="#">Request Training</a></li>
            </ul>    </li>
<li id="main">
        <a href="#">Contact us</a>

        </li></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:15:34.883

此更改将影响整个菜单，但这是最简单的方法。如果您查看列表项的样式，

```
#dropnav ul li {
  display:inline; 
  float:left; 
  list-style:none;
  margin-left:0px;
  position:relative;
  height: 15px;
  padding: 10px 20px 15px 19px;
  font-size: 14px;
  valign: middle;
  text-align: left;
  text-decoration: none;
  border-right: 1px solid #FFFFFF;
  z-index: 99999;} 
```

您正在声明所有列表项的高度。这意味着延伸到两行的那些会换行，并且容器不会扩展。为了纠正这种情况，只需删除高度声明即可。它会改变一点，看起来像这样。

```
#dropnav ul li {
  display:inline; 
  float:left; 
  list-style:none;
  margin-left:0px;
  position:relative;
  padding: 10px 20px 15px 19px;
  font-size: 14px;
  valign: middle;
  text-align: left;
  text-decoration: none;
  border-right: 1px solid #FFFFFF;
  z-index: 99999;} 
```

这是在 JS Fiddle 中（用 CSS 分隔），所以你可以看到它的外观。 [http://jsfiddle.net/RpXd8/1/](http://jsfiddle.net/RpXd8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T07:19:50.063

您可能想尝试的另一件事是

```
display:block; 
```

显示块会将元素保留在菜单块中，这样您就不会遇到将它们包裹在该菜单项的彩色部分之外的问题。

# macos - Bash（在 mac 上） - 如何在某些条件下完成文件夹结构

> ID：14165658
> 
> 赞同：0
> 
> 时间：2013-01-04T21:59:11.173
> 
> 标签：macos, bash

我有一个文件夹结构 A

```
A
|-Directory X1
|--File 1
|--File 2
|--File 3
|-Directory X2
|--File 1
|--File 2 
```

我也有文件夹结构B

```
B
|-Directory X1
|--File 1
|--File 2
|--File 3
|-Directory X2
|--File 1
|--File 2
|--File 3        <--- This files doesn't exist in folder structure A
|-Directory X3   <--- This folder doesn't exist in folder structure A
|--File 1
|--File 2
|--File 3 
```

我的目标是一个命令行，它将结构 B 复制到结构 A，替换其所有文件，复制 A 中缺少的所有文件，创建 A 没有但 B 有的文件夹，并复制这些文件夹中的文件.

最终结果应该是文件夹 A，其中包含：

```
A
|-Directory X1
|--File 1
|--File 2
|--File 3
|-Directory X2
|--File 1
|--File 2
|--File 3
|-Directory X3
|--File 1
|--File 2
|--File 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:02:06.063

`rsync`会这样做。

```
rsync -avz B/* A 
```

`--delete*`如果您想要存在`A/`但未`B/`删除的文件，请查看参数。

# iphone - iOS UIScrollview 自动布局 - UILayoutFittingCompressedSize

> ID：14165666
> 
> 赞同：2
> 
> 时间：2013-01-04T21:59:44.103
> 
> 标签：iphone, ios, uiview, uiscrollview, autolayout

我在下面的链接中遵循 Apple 关于使用 UIScrollView 实现自动布局的指南。 [http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)

它说，“或者，您可以创建一个视图子树以进入滚动视图，设置您的约束，并调用 systemLayoutSizeFittingSize: 方法（使用 UILayoutFittingCompressedSize 选项）来查找您想要用于内容视图的大小和滚动视图的 contentSize 属性。”

我的问题是，当我打电话时

```
CGSize newSize = [self.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize]; 
```

newSize 的宽度大于 320。如何约束它以使 newSize 的宽度为 320，因此函数 systemLayoutSizeFittingSize 返回一个很大的高度以适合所有视图？我可以使用不同的参数来代替 UILayoutFittingCompressedSize 吗？

谢谢！

编辑：我有一个 contentView 的 UILabel 子视图，它的 numberOfLines 设置为 0。但是，我看到当我在这个 UILabel 上调用 sizeThatFits 时，它返回的宽度大于 320。因此，self.contentView 方法调用返回一个newSize 大到足以支持 UILabel。

因此，我认为问题出在我的 UILabel 上。如何确保 UILabel 在调用 sizeToFit 时返回小于 320 的宽度，因此仅缩放高度以适合文本正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:44:09.650

找到了解决方案。

UILabel 的名为 preferredMaxLayoutWidth 的属性对我有用。我将它应用到值为320的UILabel上，现在self.contentView方法没有返回大于320的宽度。

有趣的是，UILabel sizeThatFits 方法没有考虑到preferredMaxLayoutWidth，因为它返回的CGSize 仍然具有大于preferedMaxLayoutWidth 的宽度。

# vb.net - 在从 C# 转换的 vb.net 代码中获取“类型错误”

> ID：14165667
> 
> 赞同：0
> 
> 时间：2013-01-04T21:59:43.333
> 
> 标签：vb.net, visual-studio-2010

我在 VB.Net 2010 中有这段代码，我在 New() 上收到“类型错误”。

此代码是从 C# 转换而来的。

我究竟做错了什么？

```
Public Function CredentialGet(ByVal sKey As String, ByRef sCred As String)
    Dim sCredential As Element.Credential

    sCredential  = apiclient.SearchCredentials(sSoftwareKey, SessionID,
        New() {New Element.SearchTerm() With {.FilterKey = "APK", .Value = sKey}})
    sCred = sCredential.CredentialID
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:32:39.710

New() what? You are missing an object name there. You're now passing in an anonymous object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T21:25:23.107

删除匿名类型的括号。VB.Net 在这种情况下不使用它们，而是寻找`With`关键字。并且函数应该返回一个值。您不返回任何内容，因此请使用 Sub：

```
Public Sub CredentialGet(ByVal Key As String, ByRef Cred As String)
    Dim Credential As Element.Credential 
    Credential = apiclient.SearchCredentials(sSoftwareKey, SessionID, _
        New With {New Element.SearchTerm() With {.FilterKey = "APK", .Value = Key}})
    Cred = Credential.CredentialID
End Sub 
```

我也质疑这个设计。最好返回一个字符串：

```
Public Function CredentialGet(ByVal Key As String) As String
    Return apiclient.SearchCredentials(sSoftwareKey, SessionID, _
        New With {New Element.SearchTerm() With {.FilterKey = "APK", .Value = Key}}).CredentialID
End Function 
```

# c# - CodeDOM 未找到程序集

> ID：14165669
> 
> 赞同：1
> 
> 时间：2013-01-04T21:59:45.477
> 
> 标签：c#, compiler-construction, codedom

我刚刚问了一个关于使用 CodeDOM 编译的问题，我得到了一个很棒的答案，它解决了许多问题我现在遇到的一个问题是如何将以下使用添加到我的编译器中

```
System.Diagnostics
&&
Microsoft.Win32 
```

当我尝试

```
CompilerParameters Params = new CompilerParameters();
Params.ReferencedAssemblies.Add("System.Diagnostics.dll");
&&
Params.ReferencedAssemblies.Add("Microsoft.Win32.dll"); 
```

（请注意，我正在添加 system.dll 和其他表单和绘图，如果不使用这些 dll，我的代码也在编译）

我收到以下错误

```
metadata file System.Diagnostics.dll could not be found 
```

和 Win32 一样

如果我得到一个能让我开心的回答，提前非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:00:31.347

正如 Hans Passant 所指出的，`System.Diagnostics`它们`Microsoft.Win32`是*命名空间*，而不是*程序集*。这意味着没有`System.Diagnostics.dll`，因此您不能将其添加为参考。

在 .Net 中，一个程序集可以包含多个命名空间，一个命名空间可以包含在多个程序集中。如果你查看一个类的文档，它总是列出它的命名空间*和*它的程序集。例如，对于[class `Process`，](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)它是：

> **命名空间：** System.Diagnostics
> **程序集：** System（在 System.dll 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:39:58.177

I have had success with the following:

```
cp.ReferencedAssemblies.Add(typeof(TTarget).Assembly.ManifestModule.FullyQualifiedName); 
```

# c# - 如何开始使用列初始化“列表列表”

> ID：14165671
> 
> 赞同：3
> 
> 时间：2013-01-04T21:59:57.427
> 
> 标签：c#, arrays, list, initialization

我有一个列表列表，我想添加面向列的值。就像在下面的代码示例中一样：

```
Data = new List<List<double>>();
for (int i = 0; i < columnCount; i++)
        {
            for (int j = 0; j < rowCount; j++)
            {
                Data[j][i] = (probabilityList[j]) * K); // It won't work
            }
        } 
```

我知道它不会起作用，因为在当前情况下不存在 Data 的索引，我需要使用 add() 方法。

但是，我需要将值添加到以列开头的列表：

```
[1   , null] ----> [1, null]
[null, null]       [2, null] 
```

如何将值添加到以列开头的列表列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:19:04.393

您需要创建放置在外部列表列表中的实际列表：

```
for (int i = 0; i < rowCount; i++)
{
    Data.Add(new List<double>());
} 
```

创建所有内部列表后，您可以浏览它们并向它们添加值：

```
for (int i = 0; i < columnCount; i++)
{
    for (int j = 0; j < rowCount; j++)
    {
        Data[j].Add((probabilityList[j]) * K);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:01:25.890

您需要`new`向上列表列表的每个元素

```
Data = new List<List<double>>();
for (int i = 0; i < columnCount; i++)
{
  List<double> column = new List<double>();
  for (int j = 0; j < rowCount; j++)
  {
    //not really sure if this is the correct code here
    //that would depend on your logic
    column.Add((probabilityList[j]) * K); 
  }
  Data.Add(column);
} 
```

列表不是数组。它没有您只需将元素放入的插槽，它更像是一条链。

所以最初你有一个`List<List<double>>`空的，它没有`List<double>`实例。您必须（明确）创建这些列表并将其添加到`Data`列表中。

或者，如果您确实需要带有元素插槽的行和列，则可以使用二维矩阵，如下所示：

```
var matrixData = new double[rowCount, columnCount];
for (int i = 0; i < columnCount; i++)
{
  for (int j = 0; j < rowCount; j++)
  {
    matrixData[j, i] = ((probabilityList[j]) * K); 
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:17:55.590

由于您知道所需的列数和行数，您可能会考虑使用数组而不是列表。当一个数组被初始化时，数组的所有成员都被初始化为它们的默认值。这将使您的代码

```
double[,] Data = new double[columnCount,rowCount];
for (int i = 0; i < columnCount - 1; i++)
    {
        for (int j = 0; j < rowCount - 1; j++)
        {
            Data[j,i] = (probabilityList[j]) * K); 
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T22:03:02.630

**简而言之：**您必须**初始化**`List<T>`父集合内部的每个`List<T>` 集合。

您可能知道，集合的初始化是通过`new`.NET Framework 中的 throw 关键字完成的。否则，所有内部列表都将是`Null`并且您将无法访问它们。

我已将此概念应用于您的代码。

```
var mainData = new List<List<double>>();
for (int i = 0; i < columnCount; i++)
{
  var innerList = new List<double>();
  for (int j = 0; j < rowCount; j++)
  {
    innerList.Add((probabilityList[j]) * K); 
  }
  mainData.Add(innerList);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-18T13:47:31.407

用一行代码初始化列表列表 (List<List<T>>) 的一种流行方法是使用 LINQ，如下所示：

```
List<List<double>> Data = Enumerable.Range(0, columnCount).Select(i => new List<double>()).ToList(); 
```

这将生成一个空的已初始化双精度列表的列表。从这里每个内部列表都可以作为 Data[i] 访问，并且可以将元素作为 Data[i].Add(double) 添加到其中。

以下是 LINQ 方法初始化 List<List<double>>

1.  `Enumerable.Range(0, columnCount)`

返回具有 columnCount 成员数的 Int 的 IEnumerable 集合。

2.  `.Select(i => new List<double>())`

对于上一步返回的集合的每个元素，运行一个函数“new List()”并将输出（初始化的 double 的空 List）存储在 IEnumerable 集合中（所以我们得到 IEnumerable<List<double>> 的 columnCount 数量为成员）。

3.  `.ToList();`

将上述步骤 IEnumerable<List<double>> 中的集合转换为 List<List<double> - 所需的输出。

# javascript - 从弹出窗口重新加载特定帧

> ID：14165677
> 
> 赞同：3
> 
> 时间：2013-01-04T22:00:40.137
> 
> 标签：javascript, jquery, internet-explorer, popup, window

我有一个弹出窗口，从那里，我希望父窗口重新加载，但一个特定的框架不是整个页面。

因此，用户从框架中单击一个按钮，它会打开弹出窗口。现在从弹出窗口中，基于特定事件，我想从父窗口重新加载框架。

这在IE中可能吗？

我有一个页面 index.php，其中有 2 个 iframe。

从第二个 iframe 打开一个新的弹出窗口。

当用户单击按钮或关闭弹出窗口时，我想重新加载 iframe#2（打开窗口的那个）。

我怎样才能做到这一点？

我努力了：

```
 opener.location.reload();
 opener.top.document.getElementById('myIFrameId').location.reload()
 opener.myIFrameId.location.reload(); 
```

似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T05:56:42.257

我发现了一个很棒的**jQuery 插件**，它适用于所有现代浏览器，**包括 IE8**。

它允许您轻松调用带有参数的***辅助浏览器窗口***，然后允许您在两者之间传递数据，类似于`postMessage API`工作原理。

一旦您分析了传入的 jQuery 数据，这些数据消息又可以将新内容或备用网页加载到您父页面上的原始 iframe2 中。

**文章：** [**浏览器窗口间通信的jQuery插件**](http://www.sfpeter.com/files/windowmsg/parent.html)

**在线演示：** [**父页面**](http://www.sfpeter.com/files/windowmsg/parent.html)

**下载项目：** [**windowmsg.zip**](http://www.sfpeter.com/files/windowmsg/windowmsg.zip)

下载的文件将直接在您的桌面上运行，这与[jsFiddle](http://jsfiddle.net/wqUML/1/)不同，因为它不允许在那里。

* * *

当您不需要辅助浏览器窗口并且可以使用浮动 iframe 时，另一种解决方案效果很好，只需使用支持 iframe 的灯箱克隆，例如[**Shadowbox-js**](http://www.shadowbox-js.com/index.html)。

这种方法的好处是您可以完全控制 iframe 的关闭方式，这与上面的辅助浏览器窗口不同，它有自己的浏览器关闭按钮，可能不会触发您想要的事件。

灯箱克隆关闭事件期间的回调可以根据需要更改父页面 iframe 2 中的内容。此外，您可以选择将灯箱绑定在 iframe 2 中（*灯箱克隆安装在 iframe 页面中*），或者全屏（*灯箱克隆安装在父页面中*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:15:09.767

在您的情况下，`window.opener`是打开弹出窗口的 iframe 的 window 对象，所以`opener.location.reload()`应该可以工作：[Demo](http://jsfiddle.net/jefferyto/DWeYZ/)

演示来源：

*   主页：http: [//jsfiddle.net/jefferyto/DWeYZ/](http://jsfiddle.net/jefferyto/DWeYZ/)
*   iframe：http: [//jsfiddle.net/jefferyto/WWbg9/](http://jsfiddle.net/jefferyto/WWbg9/)
*   弹出窗口：http: [//jsfiddle.net/jefferyto/TKQUJ/](http://jsfiddle.net/jefferyto/TKQUJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:06:11.433

你有没有尝试过：

```
opener.frames["myIFrameId"].location.reload(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:40:56.187

它将显示错误“错误：访问属性'重新加载'的权限被拒绝”

这可能是“同源政策”的问题。

或者您在 iframe 上创建一个 div 包装器并再次重新生成 iframe

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T23:48:43.473

我在这里重建了这个功能：http: [//jsfiddle.net/JBWTn/3/](http://jsfiddle.net/JBWTn/3/)

单击弹出窗口中的按钮将更改原始窗口中框架的边框外观。这里的关键是使用原始窗口的框架导航

`window.opener.document.getElementById('[ID_OF_YOUR_FRAME]')`

（与 Frank van Puffelen 建议的非常相似）

要重新加载框架而不是仅仅更改其样式，请使用

`window.opener.document.getElementById('[ID_OF_YOUR_FRAME]').location.reload()`

...就像您已经尝试过的问题一样。

这个问题让我想起了 phpMyAdmin 中的功能（您可以在其中从弹出窗口运行 SQL 查询并将结果显示在主窗口中），所以我快速浏览了一下；）

# c# - 仅在大括号外的空格上拆分字符串

> ID：14165679
> 
> 赞同：0
> 
> 时间：2013-01-04T22:00:53.257
> 
> 标签：c#, regex

我是正则表达式的新手，我需要一些帮助。我阅读了一些与此问题类似的主题，但我不知道如何解决它。

我需要在不在一对花括号内的每个空格上拆分一个字符串。花括号外的连续空格应视为一个空格：

```
{ TEST test } test { test test} {test test  }   { 123 } test  test 
```

结果：

```
{ TEST test } 

test 

{ test test} 

{test test  }   

{ 123 } 

test  

test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:06:11.207

```
\{[^}]+\}|\S+ 
```

这匹配由花括号括起来的任何字符的运行，或非空格字符的运行。从字符串中获取它的所有匹配项应该可以为您提供所需的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:16:44.397

这正是你想要的...

```
string Source = "{ TEST test } test { test test} {test test } { 123 } test test";
List<string> Result = new List<string>();
StringBuilder Temp = new StringBuilder();
bool inBracket = false;
foreach (char c in Source)
{
    switch (c)
    {
        case (char)32:       //Space
            if (!inBracket)
            {
                Result.Add(Temp.ToString());
                Temp = new StringBuilder();
            }
            break;
        case (char)123:     //{
            inBracket = true;
            break;
        case (char)125:      //}
            inBracket = false;
            break;
    }
    Temp.Append(c);
}
if (Temp.Length > 0) Result.Add(Temp.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:50:51.700

我使用以下方法解决了我的问题：

```
StringCollection information = new StringCollection();  
foreach (Match match in Regex.Matches(string, @"\{[^}]+\}|\S+"))  
{  
   information.Add(match.Value);  
} 
```

谢谢你们的帮助！！！

# php - mysql/php 错误的逻辑与 sql 语句

> ID：14165682
> 
> 赞同：0
> 
> 时间：2013-01-04T22:01:09.963
> 
> 标签：php, mysql

我正在做一个项目，该项目具有用户批准或撤销申请的能力（如奖学金）。但我似乎无法找出为什么它没有做我想做的事情。请在下面检查我的代码：

```
$try = mysql_query("UPDATE new_applicants SET ApplicantStatusId='$status', DateManaged = NOW() WHERE ApplicantId='$id'") or die(mysql_error()); 

$try1 = mysql_fetch_assoc($try);

$status1 = $try1["ApplicantStatusId"];

if( $status1 == 2 ){
header('location: ../employeepage.php');
exit();
}

else{

$sql1 = "INSERT INTO scholar_profile (Firstname, Middlename, Lastname, Address, EmailAddress,  BirthDate, BirthPlace, Religion, Age, Gender, ContactNo, Skill, Talent, LevelId, GWA, CategoryId, StatusId, SchoolId, BarangayId) SELECT Firstname, Middlename, Lastname, Address, EmailAddress, BirthDate, BirthPlace, Religion, Age, Gender, ContactNo, Skill, Talent, LevelId, GWA, CategoryId, StatusId, SchoolId, BarangayId
FROM new_applicants
WHERE new_applicants.ApplicantId = '$id'" or die(mysql_error()); 

} 
```

当申请者状态变为 2 = 已撤销时，不应将数据复制到 Academic_profile。但是当我尝试这个时，它仍然会复制。这有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:02:59.107

您正在更新表格，因此`mysql_fetch_assoc`不会返回任何内容。即`$status1`会`null`。如果要选择该数据（ApplicantStatusID，...），则必须改用`SELECT`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:04:34.777

您可以只更改`where`SQL 语句的子句：

```
WHERE new_applicants.ApplicantId = '$id' and new_Applicants.ApplicantStatusId <> 2" 
```

那么你就不用担心php中的逻辑了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:14:52.903

您正在获取不正确`$try1 = mysql_fetch_assoc($try);`的陈述。`UPDATE`

fetch 仅带有`SELECT`语句

# c# - 为什么这些任务是按顺序执行的？

> ID：14165683
> 
> 赞同：5
> 
> 时间：2013-01-04T22:01:10.140
> 
> 标签：c#, parallel-processing, task

为什么下面的代码是顺序执行的？

```
List<Task> tasks = new List<Task>();

for (int i = 0; i <= max; i += block)
{
    if (i + block >= max)
        tasks.Add(Task.Factory.StartNew(() => Count(ref counter, block)));
    else
        block = max - i;
}

Task.WaitAll(tasks.ToArray()); 
```

我还使用`Parallel.Invoke`;测试了这个版本。它也无法并行执行。肯定有一些我不理解的东西，但是当我尝试谷歌搜索时，我主要得到关于如何强制顺序执行的说明。

作为对以下答案中给出的警告之一的回应，我提供了以下方法供参考：

```
static void Count(ref int counter, int num)
{
    int localCounter = 0;
    for (int i = 0; i < num; i++)
        if (Coin()) localCounter++;
    System.Threading.Interlocked.Add(ref counter, localCounter);
} 
```

再次编辑：谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:11:46.037

只需替换`tasks.Add(Task.Factory.StartNew(() => Count(ref counter, block)));`并`Console.WriteLine`调试您的代码。

**您永远不会创建多个任务。**

```
for (int i = 0; i <= max; i += block)
{
    if (i + block >= max)
        Console.WriteLine(i);
    else
        block = max - i;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:05:21.380

> 为什么下面的代码顺序执行？

它不会，除非您在`Count`同步访问单个资源的方法中有一些东西。如果它可以并行化，那么它将并行运行。

如果`Count`执行得非常快，那么您会发现任务完成的速度比新任务的安排速度要快，这就是为什么它们可能都按顺序执行的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:11:53.013

在我看来，您的循环/if 语句有问题：

```
for (int i = 0; i <= max; i += block)
{
    if (i + block >= max)
        tasks.Add(Task.Factory.StartNew(() => Count(ref counter, block)));
    else
        block = max - i;
} 
```

如果我没看错，你只会添加一个任务 if`i + block >= max`并且你只会循环 if `i + block <= max`（显示计数器增加和条件检查）。因此，您只会添加一次任务。

此外，当您不添加任务时，您正在更改块。我希望您想要更多类似以下的内容，但如果没有更多代码我无法确定：

```
for (int i = 0; i <= max; i += block)
{
    tasks.Add(Task.Factory.StartNew(() => Count(ref counter, block)));
    if (i + block >= max) { block = max - i; }
} 
```

# java - 为什么 execSQL 接受 Object[] 和原始 Query String[]

> ID：14165686
> 
> 赞同：2
> 
> 时间：2013-01-04T22:01:16.273
> 
> 标签：java, android, sqlite

我想有一个选项来调用'rawQuery'并传入一个整数列表，但看起来我不能：所有'rawQuery'方法都需要字符串数组......

为什么？我可以为每个传递的 int 对象调用“toString”，但我在这里看不到任何逻辑。为什么 Google 不提供接受对象列表的 rawQuery？

对此有任何限制或约束吗？

可能我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:11:21.793

可能是因为 rawQuery 不是首选的查询方法。而且由于 sqlite 列基本上没有类型，因此他们可能不想假设在您传递的任何内容上调用 toString。

> SQLite 支持列上的“类型关联”概念。列的类型亲和性是存储在该列中的数据的推荐类型。这里的重要思想是该类型是推荐的，而不是必需的。任何列仍然可以存储任何类型的数据。只是某些列，如果可以选择，会更喜欢使用一个存储类而不是另一个。列的首选存储类称为“亲和性”。

您是否有理由要使用`rawQuery`而不是`execSQL`？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T22:08:46.830

参数列表中不接受复杂对象，如参数*bindArgs*的文档中所述：

参数

***sql** 要执行的 SQL 语句。不支持以分号分隔的多个语句。*

***bindArgs** 在 bindArgs 中仅支持 byte[]、String、Long 和 Double。*

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String, java.lang.Object[])](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String,%20java.lang.Object%5B%5D%29)。

# jquery-animate - 为什么 animate( opacity:1 ) 使我的字体粗细发生变化？

> ID：14165691
> 
> 赞同：1
> 
> 时间：2013-01-04T22:01:27.097
> 
> 标签：jquery-animate

我有一个滑块，可以让内容从 opacity:0 开始淡入淡出；然后它运行这个函数。发生这种情况时，我的文本的字体粗细在前 499 毫秒内显示正常，然后在动画结束时变为粗体。关于它为什么这样做以及如何解决它的任何线索？

```
s2.animate({
    opacity:1
    },500) 
```

# ios - ios上的片段着色器中是否存在通过texture2D的内存泄漏？

> ID：14165699
> 
> 赞同：0
> 
> 时间：2013-01-04T22:01:53.117
> 
> 标签：ios, opengl-es, gpuimage

我正在使用 Brad Larson 的 GPUImage 库，我想我发现了一个有趣的问题。

以下着色器程序执行得很好：

```
NSString *const kDilationFragmentShaderString = SHADER_STRING
(
 precision highp float;
 uniform int height;
 uniform int width;
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;
 uniform int radius;

 void main (void)
 {
   vec2 uv = textureCoordinate;
   vec2 theSize = vec2(width, height);
   vec3 theMax = texture2D(inputImageTexture, uv).rgb;
   gl_FragColor = vec4(theMax, 1.0);
 }
); 
```

但是，此版本在大图像上崩溃（即，来自相机的 4x3 图像在最长边上调整为 2560）。在我看来，唯一显着不同的是一组 texture2D 调用：

```
NSString *const kDilationFragmentShaderString = SHADER_STRING
(
 precision highp float;
 uniform int height;
 uniform int width;
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;
 uniform int radius;

 void main (void)
 {
   vec2 uv = textureCoordinate;
   vec2 theSize = vec2(width, height);
   vec3 theMax = texture2D(inputImageTexture, uv).rgb;

   int i;
   int j;
   int radsqr = radius*radius;
   for (j = -radius; j <= radius; ++j)  {
     for (i = -radius; i <= radius; ++i)  {
       if (i * i + j * j > radsqr) continue;
       theMax = max(theMax, texture2D(inputImageTexture, uv + vec2(i,j)/theSize).rgb);
     }
   }

   gl_FragColor = vec4(theMax, 1.0);

 }
 ); 
```

我正在运行这个过滤器，然后是具有最小值的第二个过滤器（即，形态膨胀，然后是侵蚀，或形态闭合算子）。

我确实意识到实现这一点的更优化方法是尝试通过顶点着色器将所有纹理 2D 调用放到它们自己的位置；但是，如果半径为 10，则需要 314 个顶点，这超出了允许的位置数量。如果我在模拟器中运行这些并且所有其他条件都相同，那么第一个完成就好了，但是第二个代码会炸毁内存并且内存会急剧攀升以调用侵蚀过滤器。在 iPhone 4s 上运行，第一个代码片段完成得很好（当然，非常快），但第二个代码片段在膨胀后崩溃，并且不运行侵蚀调用。

最初，texture2D 看起来像是在泄漏；但是，这些函数是在一个线程中调用的。当线程退出时，模拟器中的所有内存都会被清除。因此，如果这些功能第一次正常工作，则可以多次运行而不会出现问题。

所以我的问题是：在那里进行的 texture2D 调用会导致这种行为吗？有没有办法在过滤器完成后刷新创建的任何缓冲区，而与结束调用之间的线程无关？

编辑：自从发布这个问题以来，我在一周内学到了一些东西：问题出在 for 循环本身。去掉 for 循环，内存问题就消失了。那是，

```
NSString *const kDilationFragmentShaderString = SHADER_STRING
(
 precision highp float;
 uniform int height;
 uniform int width;
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;
 uniform int radius;

 void main (void)
 {
   vec2 uv = textureCoordinate;
   vec2 theSize = vec2(width, height);
   vec3 theMax = texture2D(inputImageTexture, uv).rgb;

   int i;
   int j;
   int radsqr = radius*radius;
   for (j = -radius; j <= radius; ++j)  {
     for (i = -radius; i <= radius; ++i)  {
     }
   }

   gl_FragColor = vec4(theMax, 1.0);

 }
 ); 
```

将分配尽可能多的内存，就好像循环内部发生了一些事情一样。我正在通过模拟器上的检查器确定这种行为。当我在 1280x1280 图像上运行没有 for 循环的着色器时，我总共分配了 202 mb，当我使用 for 循环运行它时，我得到 230 mb 分配，无论 for 循环内发生什么。while 循环也会发生相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:17:29.393

如果你想刷新东西，你可以调用`glFlush()`它，它将刷新当前上下文的 OpenGL 命令队列。您可以做的另一件事是平铺您的图像并一次处理较小的部分。这就是 Photoshop、Final Cut Pro 等应用程序的工作方式，而且内存效率非常高。

# jquery-selectors - 如何选择具有特定类和任何其他类的元素？

> ID：14165710
> 
> 赞同：4
> 
> 时间：2013-01-04T22:02:16.060
> 
> 标签：jquery-selectors

我有这个：

```
<div class="class1 class2">1</div>
<div class="class1 class3">2</div>
<div class="class1 class4">3</div>
<div class="class1">4</div> 
```

我知道如果我想选择包含多个特定类的 div，我可以这样做：

```
$('.class1.class2'); 
```

如果我只想选择只包含一个特定类的 div，我可以这样做：

```
$('[.class1]'); 
```

但是如何选择包含一个特定类和任何其他类的 div？我需要选择所有包含 class1 的 div 以及任何其他类，而不是只包含 class1 的 div。这只是一个小样本；我们网站的样式表中有数百个类，所以硬编码任何东西都是不可行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:11:30.647

你可以这样做：

```
$('.class1').not("[class='class1']") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:10:45.810

我没有看到任何唯一选择器解决方案，但您可以执行以下操作：

```
$(".class1").each(function(index, element){
    var classes = $(element).attr('class').split(/\s+/);
    if(classes.length > 1){
        // element has other class than class1
    }
}); 
```

如果您的代码不包含任何不必要的白色字符，它将起作用。

# ruby-on-rails - 填写表格后的用户登录/注册

> ID：14165717
> 
> 赞同：0
> 
> 时间：2013-01-04T22:02:55.190
> 
> 标签：ruby-on-rails, devise

我想让访问用户与最终​​需要 user_id 的输入表单进行交互。当访问用户提交表单时，它会将他们带到确认页面。此时，用户应该能够登录或注册，而不会丢失他们已经输入的所有信息。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:17:11.923

我假设您将在页面上有两个表单提交按钮。“注册”和“登录”按钮。这些按钮中的每一个都将采用自己的形式。我会在每个表单中创建隐藏字段，其值是`params[:your_variable]`您要提交的上一页的值。

如果您希望他们编辑表单，只需将默认值也设置为这些参数。

# jquery - 使用 jQuery 清除 DOM 元素，然后重新创建和重新绑定各种函数

> ID：14165719
> 
> 赞同：0
> 
> 时间：2013-01-04T22:02:59.897
> 
> 标签：jquery, dom, dom-manipulation, jquery-forms-plugin, multifile-uploader

我有一个非常混乱的时间，浪费了今天的几个小时！

我之前发布了这个：[Binding jquery-multifile to a dynamic load form](https://stackoverflow.com/questions/14155793/binding-jquery-multifile-to-a-dynamically-loaded-form)

这解释了我的问题的第 1 部分。

我现在有同样的问题`jquery.forms`

所以，扩展我正在做的事情：

我正在将一个表单加载到一个 DIV 中`jquery.load`，DIV 被添加到正文并显示为一个模态窗口，全部使用 jQuery。将元素添加到 DOM 后，我调用

```
$('#imgSelect').MultiFile(); 
```

和 $('.reportIt').ajaxForm(options);

这两行将`$.MultiFile()`and `$.ajaxForm`(jquery.forms) 添加到相关元素，链接：

[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

这工作得很好，所有功能都符合预期......除了......

如果用户在模态窗口中按下关闭按钮，然后重新打开窗口而不执行新的页面加载，则会中断。

当用户关闭模态窗口时，会发生以下情况：

```
function closeModal(ele) {
    if ($(ele).hasClass('noClose')) {
        alert("Please wait... we're working on something.");
    } else {
        $(ele).fadeOut(function () { 
            $(this).remove();
        });
    };
}; 
```

所以它非常简单地淡出模态`div`元素，然后将其完全从 DOM 中删除。

据此：[http ://www.w3schools.com/jquery/html_remove.asp](http://www.w3schools.com/jquery/html_remove.asp)

该方法从 DOM 中**完全**`$().remove()`删除父容器中的所有元素，并且

 **> 此方法还删除所选元素的数据和事件。

因此，据我了解，这应该意味着就 jQuery 和相应的插件而言，每次创建我的模态窗口并将其写入 DOM 时，它都是一组全新的元素，因此，绑定`.MultiFile()`应该`.ajaxForm()` **可以**工作不管之前有没有展示过都一样

除了它第二次不起作用！（多文件输入表现为单个输入，并提交了一个内联表单，而不是按要求作为 AJAX 提交）

我得到的唯一错误是我上一篇文章中提到的。

进一步调查表明，`jquery.MultiFile`插件脚本中的这些行发生了此错误：

```
$.fn[method] = function () {
    $.fn.MultiFile.disableEmpty();
         value = $.fn.MultiFile.intercepted[method].apply(this, arguments);              
          setTimeout(function () { $.fn.MultiFile.reEnableEmpty() }, 1000);
          return value;
}; // interception 
```

对于熟悉这个插件的人来说，这大约是第 453 行。

查看插件的作用，我认为它与添加类的元素有关，`MultiFile-intercepted`但通过 Chrome 控制台观察 DOM 操作，我根本看不出这些函数在第一次和第二次运行时的行为有任何差异，所以可以不知道是什么问题。

任何人都可以就为什么这些功能在第二次尝试时不起作用提供任何建议吗？

*   我在使用中是否遗漏了什么`jquery.remove()`
*   我正在使用的一个/两个插件中是否有一个 `remove()`我忽略的功能（我已阅读文档）

编辑：由于它正在进行中，这里有一个工作示例：

[http://www.guitartrak.com/](http://www.guitartrak.com/)

如果您使用类别 > 电吉他，品牌 > Gibson 填写“注册项目”表格，然后在其他内容中输入任何您想要的内容，然后按“继续”，尝试在图像选择上添加多个文件，这应该首先工作时间。现在，不要按“保存并发布”，而是按大“X”，然后在不刷新页面的情况下再次尝试整个过程……当您再次尝试添加图像时，您会看到问题。**

# crystal-reports - 默认 Crystal 文本字段高度

> ID：14165720
> 
> 赞同：0
> 
> 时间：2013-01-04T22:03:00.730
> 
> 标签：crystal-reports, report

在 Crystal Reports 2011 中，当我创建一个新文本字段并将其添加到设计视图中时，高度为 0.13。我见过的其他 Crystal 实例总是在 0.16 的高度创建这些字段。如何设置我的 Crystal 实例以在此高度创建字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T06:52:07.143

您必须更改自己的高度或宽度，如果您想更改多个文本框，请选择它们然后右键单击它们将光标移动到“对齐”并选择您的选择，或者您可以为所有文本框选择相同的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:48:33.547

我不确定您是如何陷入这种情况的-我已经查看了所有内容，但找不到修改您正在使用的版本中文本对象的默认高度的方法（对于我来说，它是 0.16 英寸）安装）。

假设重新安装是不可能的（这将是激烈的，但可能是您最好的选择），另一种解决方法可能是在报告顶部创建一个空文本对象，手动将其设置为正确的高度，然后复制粘贴它在任何你想要一个新的而不是使用插入菜单的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:46:14.627

我不知道您是否可以更改文本对象的默认高度。我以前从未尝试过，但您也许可以使用 CSS 来完成此操作。

# python - 正则表达式解析名称列表输入文件中的键值对

> ID：14165733
> 
> 赞同：2
> 
> 时间：2013-01-04T22:03:53.407
> 
> 标签：python, regex, parsing, key-value

我有一个 Fortran“名称列表”格式的输入文件，我想用 python 正则表达式解析它。最简单的演示方法是用一个虚构的例子：

```
$VEHICLES
 CARS= 1,
 TRUCKS = 0,
 PLAINS= 0, TRAINS = 0,
 LIB='AUTO.DAT',
C This is a comment
C Data variable spans multiple lines
 DATA=1.2,2.34,3.12,
      4.56E-2,6.78,
$END
$PLOTTING
 PLOT=T,
 PLOT(2)=12,
$END 
```

所以键可以包含常规的变量名字符以及括号和数字。这些值可以是字符串、布尔值（T、F、.T.、.F.、TRUE、FALSE、.TRUE.、.FALSE. 都是可能的）、整数、浮点数或逗号分隔的数字列表. 键用等号连接到它们的值。键值对以逗号分隔，但可以共享一行。对于一长串数字，值可以跨越多行。注释是任何以 C 开头的行。'=' 和 ',' 前后的间距通常不一致。

我想出了一个有效的正则表达式来解析键和值并将它们放入有序字典（需要保留输入的顺序）。

到目前为止，这是我的代码。我已经包含了从阅读文件到保存到字典的所有内容以确保完整性。

```
import re
from collections import OrderedDict

f=open('file.dat','r')
file_str=f.read()

#Compile regex pattern for requested namelist
name='Vehicles'

p_namelist = re.compile(r"\$"+name.upper()+"(.*?)\$END",flags=re.DOTALL|re.MULTILINE)

#Execute regex on file string and get a list of captured tokens
m_namelist = p_namelist.findall(file_str)

#Check for a valid result
if m_namelist:
    #The text of the desired namelist is the first captured token
    namelist=m_namelist[0]

#Split into lines
lines=namelist.splitlines()

#List comprehension which returns the list of lines that do not start with "C"
#Effectively remove comment lines
lines = [item for item in lines if not item.startswith("C")]

#Re-combine now that comment lines are removed
namelist='\n'.join(lines)

#Create key-value parsing regex
p_item = re.compile(r"([^\s,\=]+?)\s*=\s*([^=]+)(?=[\s,][^\s,\=]+\s*\=|$)",flags=re.DOTALL|re.MULTILINE)

#Execute regex
items = p_item.findall(namelist)

#Initialize namelist ordered dictionary
n = OrderedDict()

#Remove undesired characters from value    
for item in items:
    n[item[0]] = item[1].strip(',\r\n ') 
```

我的问题是我是否正确地处理了这个问题。我意识到有一个 ConfigParser 库，我还没有尝试过。我的重点是正则表达式：

```
([^\s,\=]+?)\s*=\s*([^=]+)(?=[\s,][^\s,\=]+\s*\=|$) 
```

但我继续并包含其他代码以确保完整性并演示我正在使用它做什么。对于我的正则表达式，因为值可以包含逗号，并且键值对也用逗号分隔，所以没有简单的方法来隔离这些对。我选择使用前瞻来查找下一个键和“=”。这允许“=”和下一个键之间的所有内容都是值。最后，因为这对最后一对不起作用，所以我将“|$”投入到前瞻预测中，这意味着如果没有找到另一个“VALUE=”，则查找字符串的结尾。我认为将值与 [^=]+ 匹配，然后进行前瞻比尝试匹配所有可能的值类型要好。

在写这个问题时，我想出了一个替代正则表达式，它利用了数字是唯一可以在列表中的值这一事实：

```
 ([^\s,\=]+?)\s*=\s*((?:\s*\d[\d\.\E\+\-]*\s*,){2,}|[^=,]+) 
```

这个匹配两个或多个数字的列表，或者`(?:\s*\d[\d\.\E\+\-]*\s*,){2,}`下一个逗号之前的任何内容`[^=,]`。

这些有点混乱的正则表达式是解析这样一个文件的最佳方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:41:21.900

我建议开发更复杂的解析器。

我偶然发现了实现非常相似的解析器功能的谷歌代码托管项目：[Fortran Namelist parser for Python prog/scripts](http://code.google.com/p/fortran-namelist/)，但它是为不同的格式构建的。我玩了一下并更新了它以支持您示例中的格式结构：

请在 gist 上查看我的版本： [Updated Fortran Namelist parser for python https://gist.github.com/4506282](https://gist.github.com/4506282)

我希望这个解析器能帮助你完成你的项目。

这是解析 FORTRAN 代码示例后脚本生成的示例输出：

```
{'PLOTTING': 
    {'par': 
        [OrderedDict([('PLOT', ['T']), ('PLOT(2) =', ['12'])])],
    'raw': ['PLOT=T', 'PLOT(2)=12']},
 'VEHICLES': 
    {'par': 
        [OrderedDict([('TRUCKS', ['0']), ('PLAINS', ['0']), ('TRAINS', ['0']), ('LIB', ['AUTO.DAT']), ('DATA', ['1.2', '2.34', '3.12', '4.56E-2', '6.78'])])],
  'raw': 
                ['TRUCKS = 0',
                  'PLAINS= 0, TRAINS = 0',
                  "LIB='AUTO.DAT'",
                  'DATA=1.2,2.34,3.12',
                  '4.56E-2,6.78']}} 
```

# javascript - kineticjs在按钮点击时移动图像

> ID：14165734
> 
> 赞同：1
> 
> 时间：2013-01-04T22:03:55.033
> 
> 标签：javascript, html, canvas, move, kineticjs

我正在使用[此示例](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)创建画布等。我想做的是移动`yodaGroup`或`yodaImage`通过按钮单击的位置。有没有人这样做过或知道如何做到这一点？

这就是我所在的地方。

```
 var yodaGroup = new Kinetic.Group({
      x: 250,
      y: 30,
      draggable: true
    }); 
```

我想调整或添加到上面 yodaGroup 的 x 和 y 坐标，使用一个按钮点击触发下面的这个功能

// 需要弄清楚这个函数这只是一个例子，因为我不知道如何为上面的 yodaGroup 定义，因为它没有关联的 id 或类。

```
 function left() {
      yodaGroup.x += 5; // move image by 5px
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:43:21.803

有比设置位置更简单的方法。它的 .move() 函数。

.move(x,y) 在对象上移动给定的量 x 和 y。

所以这可能是：

```
function left() {
   yodaGroup.move(-5,0);
}
function right() {
   yodaGroup.move(5,0);
}
function up() {
   yodaGroup.move(0,-5); //negative is up in canvas
}
function down() {
   yodaGroup.move(0,5); //positive is down in canvas
} 
```

这也比调用 getPosition 两次并在之后设置位置快得多。此外，setPosition 需要比移动更多的资源和处理。

[http://kineticjs.com/docs/symbols/Kinetic.Node.php#move](http://kineticjs.com/docs/symbols/Kinetic.Node.php#move)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:23:47.677

我不确定“x”属性是否公开。根据 API，您应该使用 setPosition() 方法： http: [//kineticjs.com/docs/symbols/Kinetic.Node.php#setPosition](http://kineticjs.com/docs/symbols/Kinetic.Node.php#setPosition)

我会尝试类似的东西：

```
<button data-direction="right" value="&gt;">
<button data-direction="left" value="&lt;"> 
```

Javascript（使用 jQuery）：

```
var yodaGroup = new Kinetic.Group({
  x: 250,
  y: 30,
  draggable: true
});

var step = 5;

$('button [data-direction=right]').click(function() {
  yodaGroup.setPosition(yodaGroup.getPosition().x + step, yodaGroup.getPosition().y);
});

$('button [data-direction=left]').click(function() {
  yodaGroup.setPosition(yodaGroup.getPosition().x - step, yodaGroup.getPosition().y);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:09:46.793

最终使用了这个......并让它工作

html

```
<div class="positionImage">
<input type="button" value="left" id="left" >
<input type="button" value="right" id="right" >
<input type="button" value="up" id="up" >
<input type="button" value="down" id="down" >
</div> 
```

脚本

```
// zoom by scrollong
document.getElementById("container").addEventListener("mousewheel", function(e) {
   var zoomAmount = e.wheelDeltaY*0.0001;
   yodaGroup.setScale(yodaGroup.getScale().x+zoomAmount)
   layer.draw();
   e.preventDefault();
}, false)

// move down
document.getElementById("down").addEventListener("click", function(e) {
yodaGroup.move(0,5);
layer.draw();
e.preventDefault();
}, false)

// move right
document.getElementById("right").addEventListener("click", function(e) {
yodaGroup.move(5,0);
layer.draw();
e.preventDefault();
}, false)

// move up
document.getElementById("up").addEventListener("click", function(e) {
yodaGroup.move(0,-5);
layer.draw();
e.preventDefault();
}, false)

// move left
document.getElementById("left").addEventListener("click", function(e) {
yodaGroup.move(-5,0);
layer.draw();
e.preventDefault();
}, false) 
```

# html - 如果“网页缺少元语言信息”怎么办？

> ID：14165736
> 
> 赞同：1
> 
> 时间：2013-01-04T22:04:02.327
> 
> 标签：html, google-search-console

网站管理员工具实用程序抱怨我的页面**缺少元语言信息**。

如果我的页面包含多种语言（所有西欧语言）的混合文本，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:30:47.520

大多数“网站管理员工具”投诉最好忽略（或根本不阅读）。要获得有关特定消息的帮助，请确定工具、消息和您的 URL。

语言的混合本身就是一个问题，最好通过将不同的语言版本放入不同的页面来避免。如果您需要多种语言，请使用该`lang`属性来指定每个部分的语言。

`meta`关于语言的混合，你可以用标签做很少有用的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:12:48.117

您看过[多区域和多语言网站的](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192)文章吗？它提供了一些很好的建议。

# c++ - C++中素数的求和

> ID：14165747
> 
> 赞同：-1
> 
> 时间：2013-01-04T22:05:06.583
> 
> 标签：c++, primes

嗨，伙计们，我正在开发一个程序，以给出 200 万以下的所有质数的总和。这就是我所拥有的......而且我知道这种方法适用于查找素数，因为我以前使用过它......但是当我运行这个程序时，我不断得到一个无限循环并且没有输出......任何帮助都会很大赞赏！

```
#include <iostream>
using namespace std;

int main (int argc, char * const argv[]) {
    bool isPrime=true;
    int i = 2;
    int sum = 0;
    do{

        for ( int j = 2; j < i; j++)
        {
            if ( i % j == 0 )
            {
                isPrime=false;
                break;
            }
        }
        if (isPrime)
        {
            cout << "Prime: " << i << endl;
            sum += i; // add prime number to sum
        }
        i++;

    }while(i < 2000000);

    cout << "the sum of all the primes below two million is: " << sum << endl;
    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T22:06:34.927

我能找到的唯一合乎逻辑的错误是你永远不会重新设置`isPrime`到`true`循环内部，但这不应该导致无限循环，只是错误的结果。

我怀疑它会进入无限循环，我只是认为这需要很长时间，因为它不是最佳的。在 之前，您不需要检查每个数字`i`，`sqrt(i)`甚至不需要检查`i/2`。

更好的是，您可以生成一个素数筛（谷歌这个），然后将它们相加 - 这将大大提高效率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T22:07:37.753

我不认为你有一个无限循环。正如 Luchian Grigore 所说，您忘记设置`isPrime`为，但您的代码也将需要很长时间才能运行。`true`请注意，您可以停止试除一次`j*j > i`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:12:38.657

如果您还担心以最少的努力使事情变得更高效——要获得素数，您只需检查 (6n + 1) 和 (6n + 5) 形式的数字

所以在你的主循环中包括类似的东西：

```
int p6 = p % 6;
if (p6 == 1) {
    result = isPrime(p);
    p += 4;
} else if (p6 == 5) {
    result = isPrime(p):
    p += 2;
} 
```

会加快你的倍数。不要忘记角落案例 2 和 3。

# c# - 创建并行循环的正确方法

> ID：14165750
> 
> 赞同：0
> 
> 时间：2013-01-04T22:05:39.397
> 
> 标签：c#, nhibernate, parallel-processing, producer-consumer

我编写了一个代码来处理 Azure 服务器上的一些数据。我第一次编写代码时，它是线性的 For Each 循环并且需要永远完成，我使用 Parallel 改进了代码，如下所示：

```
Parallel.ForEach(users, currentUser =>
  {
     int number = myrollup.CountFilmsForUsers(currentUser.UserId,distort,tend).Result;
     lock(myrollup)
      {
        var record = new UserAnalytics();
        { 
          UserId = currentUser.UserId,
          UserFName = currentUser.FirstName,
          UserLName = currentUser.LastName,
         };
        session.SaveOrUpdate(record);
       }
    }); 
```

这个并行循环在 9 分钟内完成了这项工作，但是我想通过使用生产者/消费者模式来进一步改进这一点。关于如何在 C# 中使用 Nhibernate 执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:49:01.690

在多个执行线程之间共享一个 NHibernate 会话绝对不是一个好主意。尝试使用nhibernate [profiler](http://www.hibernatingrhinos.com/products/nhprof)来查找瓶颈或切换到`StatelessSession`

# javascript - 有没有人遇到过 Sitecore 从页面编辑器中删除 JavaScript 的情况？

> ID：14165751
> 
> 赞同：6
> 
> 时间：2013-01-04T22:05:40.667
> 
> 标签：javascript, content-management-system, sitecore, page-editor

假期期间，我一直在 Sitecore 中处理自定义页面，我注意到 Sitecore 从编辑器中删除 JavaScript 行的问题。

这是我当前场景的概述：

1.  我将Javascript添加到页面。
2.  我保存、签入和发布。
3.  变化就在那里，一切正常。
4.  我稍后会处理它，这些更改不再存在。

我是唯一编辑此页面的人，它正在发布当前/正确版本。我是否通过内容编辑器的“显示编辑器”或“编辑 HTML”功能添加脚本并不重要。它只删除了 JavaScript；我所有的其他更改都完好无损。

关于 Sitecore 的 JavaScript 实现，我有什么遗漏吗？我不知道还能做什么来诊断它，所以我希望这里有人能对此做出解释。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T16:35:12.117

在 Sitecore 中删除 RTE 中的脚本标签是保存项目时的标准行为。但是，在 Sitecore 6.4.1 rev 中。120113 和 Sitecore 6.5 Update-4 在 web.config 中添加了一个新属性：

```
<setting name="HtmlEditor.RemoveScripts" value="true"/> 
```

将此值设置为 false 应该可以解决您的问题。如果您使用的是旧版本的 Sitecore，请查看[这篇博文](http://firebreaksice.com/prevent-sitecore-content-editor-from-stripping-script-tags/)，其中显示了旧版本的解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:44:24.567

您是否在富文本编辑器中添加此 javascript？

我已经看到富文本编辑器在保存时去掉了 javascript。我们通常将 javascript 块添加为一个单独的子布局，从多行文本字段中提取并直接渲染出来，而不是通过富文本编辑器编辑 javascript。

# r - 标准差之间/之内

> ID：14165752
> 
> 赞同：6
> 
> 时间：2013-01-04T22:05:53.493
> 
> 标签：r, hierarchical-data, stata, multi-level

在处理分层/多级/面板数据集时，采用返回可用变量的组内和组间标准差的包可能非常有用。

这是`Stata`可以通过命令轻松完成以下数据的事情

```
xtsum, i(momid) 
```

我做了一个研究，但我找不到任何`R`可以做到这一点的包..

**编辑：**

只是为了解决想法，分层数据集的示例可能是这样的：

```
son_id       mom_id      hispanic     mom_smoke     son_birthweigth

  1            1            1            1              3950
  2            1            1            0              3890
  3            1            1            0              3990
  1            2            0            1              4200
  2            2            0            1              4120
  1            3            0            0              2975
  2            3            0            1              2980 
```

“多级”结构是由每个母亲（较高级别）有两个或多个儿子（较低级别）这一事实给出的。因此，每个母亲都定义了一组观察结果。

因此，每个数据集变量可以在母亲之间和母亲内部或仅在母亲之间变化。`birtweigth`母亲之间有所不同，但同一母亲内部也是如此。相反，`hispanic`是固定为同一个母亲。

例如， 的母内方差`son_birthweigth`为：

```
# mom1 means
    bwt_mean1 <- (3950+3890+3990)/3
    bwt_mean2 <- (4200+4120)/2
    bwt_mean3 <- (2975+2980)/2

# Within-mother variance for birthweigth
    ((3950-bwt_mean1)^2 + (3890-bwt_mean1)^2 + (3990-bwt_mean1)^2 + 
    (4200-bwt_mean2)^2 + (4120-bwt_mean2)^2 + 
    (2975-bwt_mean3)^2 + (2980-bwt_mean3)^2)/(7-1) 
```

而母亲之间的差异是：

```
# overall mean of birthweigth:
# mean <- sum(data$son_birthweigth)/length(data$son_birthweigth)
    mean <- (3950+3890+3990+4200+4120+2975+2980)/7

# within variance:
    ((bwt_mean1-mean)^2 + (bwt_mean2-mean)^2 + (bwt_mean3-mean)^2)/(3-1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T07:46:23.177

我不知道你的 stata 命令应该重现什么，但要回答关于层次结构的问题的第二部分，很容易用`list`. 例如，您定义这样的结构：

```
tree = list(
      "var1" = list(
         "panel" = list(type ='p',mean = 1,sd=0)
         ,"cluster" = list(type = 'c',value = c(5,8,10)))
      ,"var2" = list(
          "panel" = list(type ='p',mean = 2,sd=0.5)
         ,"cluster" = list(type="c",value =c(1,2)))
) 
```

创建这个`lapply`很容易使用列表

```
tree <- lapply(list('var1','var2'),function(x){ 
  ll <- list(panel= list(type ='p',mean = rnorm(1),sd=0), ## I use symbol here not name
             cluster= list(type = 'c',value = rnorm(3)))  ## R prefer symbols
})
names(tree) <-c('var1','var2') 
```

您可以查看他的结构`str`

```
str(tree)
List of 2
 $ var1:List of 2
  ..$ panel  :List of 3
  .. ..$ type: chr "p"
  .. ..$ mean: num 0.284
  .. ..$ sd  : num 0
  ..$ cluster:List of 2
  .. ..$ type : chr "c"
  .. ..$ value: num [1:3] 0.0722 -0.9413 0.6649
 $ var2:List of 2
  ..$ panel  :List of 3
  .. ..$ type: chr "p"
  .. ..$ mean: num -0.144
  .. ..$ sd  : num 0
  ..$ cluster:List of 2
  .. ..$ type : chr "c"
  .. ..$ value: num [1:3] -0.595 -1.795 -0.439 
```

## OP澄清后编辑

我认为那个包`reshape2`是你想要的。我将在这里演示这一点。

这里的想法是为了进行多层次分析，我们需要重塑数据。

首先将变量分为两组：标识符和测量变量。library(reshape2) dat.m <- melt(dat,id.vars=c('son_id','mom_id')) ##其他列测量

```
str(dat.m)
'data.frame':   21 obs. of  4 variables:
 $ son_id  : Factor w/ 3 levels "1","2","3": 1 2 3 1 2 1 2 1 2 3 ...
 $ mom_id  : Factor w/ 3 levels "1","2","3": 1 1 1 2 2 3 3 1 1 1 ...
 $ variable: Factor w/ 3 levels "hispanic","mom_smoke",..: 1 1 1 1 1 1 1 2 2 2 ...
 $ value   : num  1 1 1 0 0 0 0 1 0 0 .. 
```

一旦你有“moten”形式的数据，你可以“cast”以你想要的形状重新排列它：

```
# mom1 means for all variable
 acast(dat.m,variable~mom_id,mean)
                           1    2      3
hispanic           1.0000000    0    0.0
mom_smoke          0.3333333    1    0.5
son_birthweigth 3943.3333333 4160 2977.5
# Within-mother variance for birthweigth

acast(dat.m,variable~mom_id,function(x) sum((x-mean(x))^2))
                           1    2    3
hispanic           0.0000000    0  0.0
mom_smoke          0.6666667    0  0.5
son_birthweigth 5066.6666667 3200 12.5

## overall mean of each variable
acast(dat.m,variable~.,mean)
[,1]
hispanic           0.4285714
mom_smoke          0.5714286
son_birthweigth 3729.2857143 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T21:55:36.057

我知道这个问题已经有四年了，但最近我想在 R 中做同样的事情并想出了以下函数。这取决于`dplyr`和`tibble`。其中：df 是数据框，columns 是用于子集数据框的数字向量，并且 individual 是包含个人的列。

```
xtsumR<-function(df,columns,individuals){
  df<-dplyr::arrange_(df,individuals)
  panel<-tibble::tibble()
  for (i in columns){
    v<-df %>% dplyr::group_by_() %>%
      dplyr::summarize_(
        mean=mean(df[[i]]),
        sd=sd(df[[i]]),
        min=min(df[[i]]),
        max=max(df[[i]])
      )
    v<-tibble::add_column(v,variacao="overal",.before=-1)
    v2<-aggregate(df[[i]],list(df[[individuals]]),"mean")[[2]]
    sdB<-sd(v2)
    varW<-df[[i]]-rep(v2,each=12) #
    varW<-varW+mean(df[[i]])
    sdW<-sd(varW)
    minB<-min(v2)
    maxB<-max(v2)
    minW<-min(varW)
    maxW<-max(varW)
    v<-rbind(v,c("between",NA,sdB,minB,maxB),c("within",NA,sdW,minW,maxW))
    panel<-rbind(panel,v)
  }
  var<-rep(names(df)[columns])
  n1<-rep(NA,length(columns))
  n2<-rep(NA,length(columns))
  var<-c(rbind(var,n1,n1))
  panel$var<-var
  panel<-panel[c(6,1:5)]
  names(panel)<-c("variable","variation","mean","standard.deviation","min","max")
  panel[3:6]<-as.numeric(unlist(panel[3:6]))
  panel[3:6]<-round(unlist(panel[3:6]),2)
  return(panel)
} 
```

# php - 将数据流式传输到服务器？

> ID：14165761
> 
> 赞同：2
> 
> 时间：2013-01-04T22:06:29.413
> 
> 标签：php, c, session-variables

我们有一个心脏监视器，它连接到一个带有漫游网络 wifi 模块的 TI msp430 微控制器。我想将某种类型的数据流发送到网络服务器，以便有人可以在异地监控数据。我们在想每半秒我们可以向 php/mysql 服务器发送一个关于心率的数据点。我的问题是存储所有这些数据。如果我每秒获得一个数据点并为每个数据点创建一个新的表条目，那么我将开始在我的表中获得很多包含非常少数据的条目。恐怕当我们尝试查询数据库并显示数据时，这会显着减慢速度，导致我们的“实时”数据不会那么“实时”。

然后我在想，我可以让数据库将所有条目批处理并将其转换为一个查询。在我看来，这有点像 hack，我觉得我缺少更好的方法。

无论如何，我是否可以在微控制器之间打开某种类型的连接以将实时数据发送到服务器并不断将其写入文件或其他东西？像某种类型的数据流？

或者

当微控制器连接到服务器时，您可以保留会话变量吗？如果可以，那么我们可以将所有数据保存在会话变量中，直到它达到一定大小，然后使用一个条目将一大块数据写入数据库并重置会话变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:32:04.067

即使您在非常有限的服务器上运行，每秒一个数据点也绝不会降低数据库的性能。这就是数据库抽象的用途，处理大量数据。从长远来看，它实际上比写入文件要好，因为很容易通过 id 选择最后一个数据点以用于“实时”应用程序。

# objective-c - 自由形式容器 UIView

> ID：14165764
> 
> 赞同：1
> 
> 时间：2013-01-04T22:06:52.243
> 
> 标签：objective-c, uiview, uitouch

我试图了解这样的事情是否可行，如果可以，我该如何实现这一目标。我想创建一个`UIView`它是基于下图响应的其他视图的容器。我知道 a`UIView`是其他 UIViews 的容器。我想要做的是能够触摸 a`UIImageView`并且当我在主视图中拖动它时，如果它在一侧超出范围，则显示在完全相反的方向上，如图所示. 我希望我能正确解释这个问题。 [点击这里查看说明](http://i.stack.imgur.com/Bq7HK.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:26:28.487

你可以通过实现 container`UIView`的 touch 方法很容易地实现这一点：

`- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`

`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`

`- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`

在`touchesMoved`您可以检查您`UIImageView`的来源。如果它越过边界（`x`小于`y`0 或大于容器的尺寸），则只需将其框架重新定位为所需的偏移量。

# xml - 如何使用撒克逊内置目录功能

> ID：14165765
> 
> 赞同：4
> 
> 时间：2013-01-04T22:06:58.567
> 
> 标签：xml, validation, dtd, saxon, xmlcatalog

我下载了 SaxonHE9-4-0-6J 并想在 CLI 上处理 XHTML。但是，Saxon 尝试从 W3C 加载 DTD，并且每个简单命令都需要花费太多时间。

我有 xml 目录，我通过设置指向目录文件的 env 变量成功地使用了 xmllint，但我不知道如何让 Saxon 使用它。谷歌揭示了与撒克逊人一起使用目录的整个变化历史（因此混乱），没有一个让我高兴。

我下载了resolver.jar 并将其设置在我的CLASSPATH 中，但我不能让Saxon 使用它。经过各种组合后，我只使用目录变量来关注[http://www.saxonica.com/documentation/sourcedocs/xml-catalogs.xml](http://www.saxonica.com/documentation/sourcedocs/xml-catalogs.xml)，例如：

`-catalog:path-to-my-catalog`

（尝试了 URI 和常规路径），并且没有设置`-r`, `-x`,`-y`开关，但 Saxon 没有看到它。我收到此错误：

> 查询处理失败：未能加载 Apache 目录解析器库

resolver.jar 在我的类路径中设置，我可以从命令行使用它：

```
C:\temp>java org.apache.xml.resolver.apps.resolver
Usage: resolver [options] keyword

Where:

-c catalogfile  Loads a particular catalog file.
-n name         Sets the name.
-p publicId     Sets the public identifier.
-s systemId     Sets the system identifier.
-a              Makes the system URI absolute before resolution
-u uri          Sets the URI.
-d integer      Set the debug level.
keyword         Identifies the type of resolution to perform:
                doctype, document, entity, notation, public, system,
                or uri. 
```

OTOH，Saxon 存档本身已经包含 XHTML 和各种其他 DTD，因此必须有简单的方法来摆脱这种挫败感。

如何在命令行上使用 Saxon 并指示它使用本地 DTD？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T03:35:28.730

从您问题中的 saxonica 链接：

> 在命令行上使用 -catalog 选项时，这会覆盖 Saxon（从 9.4 开始）中使用的内部解析器，以将众所周知的 W3C 引用（例如 XHTML DTD）重定向到 Saxon 的这些资源的本地副本。因为这两个特性都依赖于设置 XML 解析器的 EntityResolver，所以不能同时使用它们。

在我看来，这听起来像是 Saxon 自动使用[知名 W3C DTD](http://www.saxonica.com/documentation/#!sourcedocs/w3c-dtds)的本地副本，但如果您指定`-catalog`，它不会使用内部解析器，您必须在目录中明确指定这些。

* * *

这是一个使用 Saxon 目录的工作示例......

**我的示例的文件/目录结构**

```
C:/so_test/lib
C:/so_test/lib/catalog.xml
C:/so_test/lib/resolver.jar
C:/so_test/lib/saxon9he.jar
C:/so_test/lib/test.dtd
C:/so_test/test.xml 
```

**XML DTD** ( `so_test/lib/test.dtd`)

```
<!ELEMENT test (foo)>
<!ELEMENT foo (#PCDATA)> 
```

**XML 实例**( `so_test/test.xml`)

*请注意，系统标识符指向一个不存在的位置，以确保目录正在被使用。*

```
<!DOCTYPE test PUBLIC "-//TEST//Dan Test//EN" "dir_that_doesnt_exist/test.dtd">
<test>
    <foo>Success!</foo>
</test> 
```

**XML 目录**( `so_test/lib/catalog.xml`)

```
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
    <group prefer="public" xml:base="file:///C:/so_test/lib">
        <public publicId="-//TEST//Dan Test//EN" uri="lib/test.dtd"/>
    </group>
</catalog> 
```

**命令行**

*请注意`-dtd`启用验证的选项。*

```
C:\so_test>java -cp lib/saxon9he.jar;lib/resolver.jar net.sf.saxon.Query -s:"test.xml" -qs:"<results>{data(/test/foo)}</results>" -catalog:"lib/catalog.xml" -dtd 
```

**结果**

```
<results>Success!</results> 
```

如果我使 XML 实例无效：

```
<!DOCTYPE test PUBLIC "-//TEST//Dan Test//EN" "dir_that_doesnt_exist/test.dtd">
<test>
    <x/>
    <foo>Success!</foo>
</test> 
```

并运行与上面相同的命令行，结果如下：

```
Recoverable error on line 4 column 6 of test.xml:
  SXXP0003: Error reported by XML parser: Element type "x" must be declared.
Recoverable error on line 6 column 8 of test.xml:
  SXXP0003: Error reported by XML parser: The content of element type "test" must match "(foo)".
Query processing failed: The XML parser reported two validation errors 
```

希望这个例子能帮助你弄清楚你的设置要改变什么。

此外，使用该`-t`选项可为您提供其他信息，例如加载了哪些目录以及是否解析了公共标识符：

```
Loading catalog: file:///C:/so_test/lib/catalog.xml
Saxon-HE 9.4.0.6J from Saxonica
Java version 1.6.0_35
Analyzing query from {<results>{data(/test/foo)}</results>}
Analysis time: 122.70132 milliseconds
Processing file:/C:/so_test/test.xml
Using parser org.apache.xml.resolver.tools.ResolvingXMLReader
Building tree for file:/C:/so_test/test.xml using class net.sf.saxon.tree.tiny.TinyBuilder
Resolved public: -//TEST//Dan Test//EN
        file:/C:/so_test/lib/test.dtd
Tree built in 0 milliseconds
Tree size: 5 nodes, 8 characters, 0 attributes
<?xml version="1.0" encoding="UTF-8"?><results>Success!</results>Execution time: 19.482079ms
Memory used: 20648808 
```

**附加信息**

[Saxon 分发 Xerces 的 Apache 版本](http://www.saxonica.com/documentation/#!conditions/redistributed)，因此请使用[Apache Xerces 分发](http://xerces.apache.org/mirrors.cgi)`resolver.jar`中的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:37:25.967

Daniel Haley 比我更好地回答了如何在 Saxon 中使用显式目录。

至于使用众所周知的 DTD 的内置副本，如果 Saxon 9.4 识别出所需资源的系统 ID 或公共 ID，它确实会默认自动执行此操作。如果要访问 W3C 站点，我们首先需要发现的是您正在使用的 DOCTYPE 的精确形式。

关于未能加载 Apache 目录解析器的错误消息实际上意味着 Saxon 无法加载类 org.apache.xml.resolver.CatalogManager。我想知道您是否正在使用不包含此类的解析器版本？我想不出任何其他解释。

# c# - 加密 WCF 消息密码

> ID：14165772
> 
> 赞同：3
> 
> 时间：2013-01-04T22:07:21.950
> 
> 标签：c#, wcf, web-services, security

负责开发基于 Java 的 Web 服务的第三方向我们提出要求消息头需要如下所示：

```
<soapenv:Header>
 <wsse:Security>
     <xenc:ReferenceList>
        <xenc:DataReference URI="#EncDataId-1"/>
     </xenc:ReferenceList>
     <wsse:UsernameToken>
        <wsse:Username>[snip]</wsse:Username>
        <xenc:EncryptedData Id="EncDataId-1" Type="http://www.w3.org/2001/04/xmlenc#Element">
           <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"/>
           <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
              <ds:KeyName>[snip]</ds:KeyName>
           </ds:KeyInfo>
           <xenc:CipherData>
              <xenc:CipherValue>[snip]</xenc:CipherValue>
           </xenc:CipherData>
        </xenc:EncryptedData>
     </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header> 
```

鉴于我对这种安全巫术魔法的非常肤浅的理解，我无法弄清楚如何配置我的客户端来生成这样的标头。现在我的代码如下所示：

```
client.ClientCredentials.UserName.UserName = "[snip]";
client.ClientCredentials.UserName.Password = "[snip]"; 
```

和标题：

```
<s:Header>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <o:UsernameToken u:Id="uuid-e906a1ca-aa63-474c-b4ac-cf9b90ab2435-1">
            <o:Username>[snip]</o:Username>
            <o:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">[snip]</o:Password>
        </o:UsernameToken>
    </o:Security>
</s:Header> 
```

和绑定：

```
<binding name="SMSSoap11">
    <security mode="TransportWithMessageCredential" />
</binding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:12:38.520

WCF 不会为您生成此输出。您将不得不为此编写[自己的令牌](http://msdn.microsoft.com/en-us/library/ms731872.aspx)，甚至更多。WCF 仅支持开箱即用的普通密码的用户名令牌，您的代码示例甚至看起来不像用户名令牌规范的任何部分。如果目标是在 WS-Security 中使用加密密码，那么安全标头似乎不完整。

您应该问 Java 开发人员在 WS-SecurityPolicy 方面的安全要求是什么？

# ruby-on-rails - 使用 assert_redirected_to 测试状态码

> ID：14165780
> 
> 赞同：1
> 
> 时间：2013-01-04T22:08:10.710
> 
> 标签：ruby-on-rails

在“编辑”控制器方法上，如果未找到作为参数传递的项目，我想将用户重定向到控制器索引操作，并带有 :not_found 状态代码。这是代码：

```
redirect_to dashboard_posts_url, :status => :not_found 
```

问题是我无法使用 assert_redirected_to rails 断言测试此行为，因为它期望状态代码为：重定向，如源代码所示：[http ://www.rubydoc.info/docs/rails/ActionDispatch /Assertions/ResponseAssertions:assert_redirected_to](http://www.rubydoc.info/docs/rails/ActionDispatch/Assertions/ResponseAssertions:assert_redirected_to) :(

你有什么解决方案，而不重写断言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:24:07.137

您可以先测试响应类型，

```
assert_response :not_found 
```

然后，将响应类型更改为 :redirect 所以`assert_redirected_to`不会失败，

```
response.status = :redirect 
```

最后，测试重定向路径

```
assert_redirected_to(...) 
```

# php - 遍历表单并仅在不存在时将数据添加到数组

> ID：14165782
> 
> 赞同：0
> 
> 时间：2013-01-04T22:08:22.580
> 
> 标签：php, arrays, loops

我有一个循环遍历数据的正则表达式，如下所示

```
23:10:54 User Name 1 has looted 598 x Dark Ochre
23:13:58 UserName 2 has looted 947 x Obsidian Ochre
22:55:29 User Name3 has looted 1509 x Onyx Ochre
22:55:29 User Name3 has looted 3 x Obsidian Ochre 
```

正则表达式（下）正确地将数据解析为值`$value['userName'];`

```
$re = '/^(?<timeMined>[0-9]{2}:[0-9]{2}:[0-9]{2}) # timeMined 
     \s+
     (?<userName>[\w\s]+)        # user name
     \s+(?:has\s+looted)\s+    # garbage text between name and amount
     (?<amount>\d+)              # amount
     \s+x\s+                     # multiplication symbol
     (?<item>.*?)\s*$            # item name (to end of line)
   /xmu';
preg_match_all($re, $sample, $matches, PREG_SET_ORDER); 
```

在下面的数据集中，有 3 个不同的用户名。我正在尝试遍历数据并将用户名添加到数组中（如果它尚不存在）。这是我目前拥有的。但是，我只得到 1 个结果，用户名 3。我对问题出在哪里感到困惑。

```
foreach ($matches as $value){
  $userName = $value['userName'];
  echo $userName."<BR>";
  $userNameArray = array();
  if (in_array($userName, $userNameArray)){
  }
  else {
    array_push($userNameArray, $userName);
  }
}
echo "<BR><BR><BR><BR><BR>";
foreach ($userNameArray as $value){
  echo $value."<BR>";
} 
```

此代码导致以下结果。顶部是准确的，但是底部缺少两个用户名

```
User Name 1
UserName 2
User Name3
User Name3

User Name3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:10:27.823

你在每次迭代的 for 循环中删除你的数组；）

```
foreach ($matches as $value){
  $userName = $value['userName'];
  echo $userName."<BR>";
  $userNameArray = array(); // resetting the array each time...
  if (in_array($userName, $userNameArray)){
  }
  else {
    array_push($userNameArray, $userName);
  }
} 
```

# jquery - 在 Embedly 中做一个函数

> ID：14165783
> 
> 赞同：0
> 
> 时间：2013-01-04T22:08:26.013
> 
> 标签：jquery, embedly

我正在使用一个名为 Embedly [LINK](http://embed.ly/docs/tutorials/jquery)的服务触发该服务的代码如下所示：

```
 $('div#result').embedly({
        key: ':3eccf441bf0f43acbb076da9817af27d'

    }); 
```

我也有这样的功能：

```
function remove() {     
var seen = {};
$('.embed').each(function() {
    var txt = $(this).html();
    if (seen[txt])
        $(this).remove();
    else
        seen[txt] = true;
});
} 
```

所以我想把这个函数放在嵌入中，我试过：

```
 $('div#result').embedly({
        key: ':3eccf441bf0f43acbb076da9817af27d',
       remove()

    }); 
```

但它不起作用。我也试过：

```
 $('div#result').embedly({
        key: ':3eccf441bf0f43acbb076da9817af27d',
       success: function() {
       remove()
         }

    }); 
```

没运气。如何在嵌入调用内部或之后立即执行我的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:47:11.023

查看一些[示例](https://github.com/embedly/embedly-jquery/tree/master/examples)，您似乎只需要将函数移出选项列表，如下所示：

```
$('div#result').embedly(
    // options
    {
        key: ':3eccf441bf0f43acbb076da9817af27d'
    },
    // "success" function
    function(oembed, dict) {
        remove();
    }
); 
```

# maven - Maven nexus v=LATEST 不工作

> ID：14165784
> 
> 赞同：6
> 
> 时间：2013-01-04T22:08:33.130
> 
> 标签：maven, repository, nexus

我有 maven nexus 本地存储库，在运行时我从 maven repo 下载/获取 jar/war 文件并将其复制到 tomcat。我正在使用以下 url 下载 jar/war 文件。

```
http://localhost/maven/nexus/service/local/artifact/maven/redirect?r=releases&g=com.rdc.app&a=rum&v=LATEST&p=war&c 
```

当我通过参数 v=1.2.4 时，我可以下载特定版本的 war，如果我想要最新版本，我发现 v=LATEST 将在 repo 中返回最新版本的 jar/war 文件。

问题是 maven repo 中的最新版本是 12.53.3，当我使用 v=LATEST 它正在下载 12.46.1 i 以再次更新 12.53.3 并再次尝试 v=LATEST 但结果与以前相同。

此外，如果最新的 jar 是 SNAPSHOT，则发布 jar/war v=LATEST 仅支持发布版本。

我尝试了以下文档，但似乎它不起作用。

```
repository.sonatype.org/nexus-core-documentation-plugin/core/docs/rest.artifact.maven.redirect.html 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:37:12.643

如果你问我，这是一个错误。我也遇到过。

基本上，与 1.2.2 相比，LATEST 版本并不意味着 1.2.3 中的“最新版本”，它意味着“最近部署的工件的版本”。所以——如果您有多个项目分支并且工件正在由您的持续集成服务器部署，那么您不能信任 LATEST。

更新：查看 Tari aka Manga 的回复，了解 Nexus 中的更新行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T14:47:52.340

这个问题和答案现在已经 6 岁了。请注意，sonatype 有一个新版本的 Nexus，其后端进行了修改。

这是计划任务文档的更新链接，其中之一是“重建 Maven 元数据文件”：

*   [管理计划任务](https://help.sonatype.com/repomanager2/configuration/managing-scheduled-tasks)

    * * *

# 原始答案

听起来像是元数据问题。Nexus 有一个[计划任务](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-tasks.html)，可用于重建存储库的元数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-28T08:25:32.037

有些人建议（例如：@carlspring）“最新”实际上并不指向可用的最高版本，考虑到发布和快照；他们建议是最近部署的，但我不同意。这就是 Sonatype Nexus™ 2.11.2-0 发生的情况：

假设开始：

```
<metadata modelVersion="1.1.0">
    <groupId>com.acme</groupId>
    <artifactId>versioningtest</artifactId>
    <versioning>
        <latest>1.0.3-SNAPSHOT</latest>
        <release>1.0.1</release>
        <versions>
            <version>1.0.0-SNAPSHOT</version>
            <version>1.0.0</version>
            <version>1.0.1-SNAPSHOT</version>
            <version>1.0.1</version>
            <version>1.0.2-SNAPSHOT</version>
            <version>1.0.3-SNAPSHOT</version>
        </versions>
        <lastUpdated>20150928081006</lastUpdated>
    </versioning>
</metadata> 
```

(A) 发布一个新的 1.0.2-SNAPSHOT 只会增加“lastupdated”时间戳，它不会改变“latest”。

现在发布 1.0.3：

```
<metadata>
    <groupId>com.acme</groupId>
    <artifactId>versioningtest</artifactId>
    <versioning>
        <latest>1.0.3</latest>
        <release>1.0.3</release>
        <versions>
            <version>1.0.0-SNAPSHOT</version>
            <version>1.0.0</version>
            <version>1.0.1-SNAPSHOT</version>
            <version>1.0.1</version>
            <version>1.0.2-SNAPSHOT</version>
            <version>1.0.3-SNAPSHOT</version>
            <version>1.0.3</version>
        </versions>
        <lastUpdated>20150928081408</lastUpdated>
    </versioning>
</metadata> 
```

(B) 从这里开始，发布一个新的 1.0.2-SNAPSHOT 只会增加“lastupdated”时间戳，它不会改变“latest”。此外，发布 1.0.2 只会增加“lastupdated”时间戳，它不会更改“latest”：

```
<metadata>
    <groupId>com.acme</groupId>
    <artifactId>versioningtest</artifactId>
    <versioning>
        <latest>1.0.3</latest>
        <release>1.0.3</release>
        <versions>
            <version>1.0.0-SNAPSHOT</version>
            <version>1.0.0</version>
            <version>1.0.1-SNAPSHOT</version>
            <version>1.0.1</version>
            <version>1.0.2-SNAPSHOT</version>
            <version>1.0.2</version>
            <version>1.0.3-SNAPSHOT</version>
            <version>1.0.3</version>
        </versions>
        <lastUpdated>20150928081620</lastUpdated>
    </versioning>
</metadata> 
```

所以总而言之：

*   在两个快照之间，即使较年轻的版本较新，如果版本较高，最旧的已发布将赢得最新位置。（一种）

*   在发布与快照之间，更高的版本赢得了最新的位置。(乙)

因此，考虑到版本和快照，Sonatype Nexus™ 2.11.2-0，“最新”指向可用的最高版本。

量子点

# c# - 我需要一个永远不会返回 null 的 `Assembly.GetEntryAssembly()` 的替代品

> ID：14165785
> 
> 赞同：27
> 
> 时间：2013-01-04T22:08:34.300
> 
> 标签：c#, .net, system.reflection, entry-point

我需要找到开始执行托管代码的程序集。

```
// using System.Reflection;
Assembly entryAssembly = Assembly.GetEntryAssembly(); 
```

这似乎是要走的路，但[MSDN 参考页面`Assembly.GetEntryAssembly`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx)声明此方法*“[c] 从非托管代码调用时返回 null”。*

在这种情况下，我想知道非托管代码调用了哪个程序集。

是否有一种可靠的方法来执行此操作，即始终返回非空`Assembly`引用的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T22:08:34.300

到目前为止我能想到的最好的是以下，它应该在单线程场景中工作：

```
// using System.Diagnostics;
// using System.Linq; 
Assembly entryAssembly = new StackTrace().GetFrames().Last().GetMethod().Module.Assembly; 
```

（上面的代码片段是为了易于理解而优化的，而不是为了执行速度或内存效率。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-17T11:35:43.590

我尝试了两种 stakx 方法。

[基于 MainModule 的方法](https://stackoverflow.com/a/14166515/249742)在某些特殊情况下不起作用（例如动态程序集）。

[基于 StackTrace 的方法](https://stackoverflow.com/a/14165787/249742)可能会返回层次结构中过高（或过低）的程序集，例如 mscorlib。

我做了一个小变体，在我的用例中效果很好：

```
// using System.Diagnostics;
// using System.Linq;
var methodFrames = new StackTrace().GetFrames().Select(t => t?.GetMethod()).ToArray();
MethodBase entryMethod = null;
int firstInvokeMethod = 0;
for (int i = 0; i < methodFrames.Length; i++)
{
    var method = methodFrames[i] as MethodInfo;
    if (method == null)
        continue;
    if (method.IsStatic &&
        method.Name == "Main" &&
        (
            method.ReturnType == typeof(void) || 
            method.ReturnType == typeof(int) ||
            method.ReturnType == typeof(Task) ||
            method.ReturnType == typeof(Task<int>)
        ))
    {
        entryMethod = method;
    }
    else if (firstInvokeMethod == 0 &&
        method.IsStatic &&
        method.Name == "InvokeMethod" &&
        method.DeclaringType == typeof(RuntimeMethodHandle))
    {
        firstInvokeMethod = i;
    }
}

if (entryMethod == null)
    entryMethod = firstInvokeMethod != 0 ? methodFrames[firstInvokeMethod - 1] : methodFrames.LastOrDefault();

Assembly entryAssembly = entryMethod?.Module?.Assembly; 
```

Basically, I walk the stack up until I find a [conventional method](https://docs.microsoft.com/fr-fr/dotnet/csharp/programming-guide/main-and-command-args/) named "Main" with `void` or `int` return type. If no such method is found, I look for a method invoked via reflection. For example, NUnit uses that invocation to load unit tests.

Of course, I do that only if `Assembly.GetEntryAssembly()` returns `null`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T23:08:17.020

工作解决方案的另一个（基本上未经测试的）起点可能是这样的：

```
// using System;
// using System.Diagnostics;
// using System.Linq;
ProcessModule mainModule = Process.GetCurrentProcess().MainModule;
Assembly entryAssembly = AppDomain.CurrentDomain.GetAssemblies()
                         .Single(assembly => assembly.Location == mainModule.FileName); 
```

一些不确定性仍然存在：

*   模块和程序集不是一回事。`ProcessModule`甚至可能在概念上与`Module`. 上面的代码在存在多模块（即多文件）程序集的情况下是否总是有效，尤其是当程序集的入口点不在清单模块中时？

*   `Process.MainModule`保证总是返回非空引用吗？

# html - 如何使用 Ajax 替换标签的内容？

> ID：14165790
> 
> 赞同：0
> 
> 时间：2013-01-04T22:09:05.100
> 
> 标签：html, ajax, jsp

我正在使用jsp和ajax。我正在尝试`<tr>`使用 ajax 替换标签的 innerHTML，这对我不起作用-

```
<tr id="replace">
</tr> 
```

我使用ajax调用的页面-

```
<td>
<% 
String id = request.getParameter("id");
out.println("<h3>"+id+"</h3>");
%>
</td> 
```

但以下工作，我不需要 -

```
<tr>
<td id="replace"></td>
</tr> 
```

页面称为-

```
<% 
String id = request.getParameter("id");
out.println("<h3>"+id+"</h3>");
%> 
```

所以简而言之，我需要做什么来替换整个`<tr>`标签的 innerHTML 而不仅仅是一个`<td>`标签？

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:11:47.620

你的控制是倒置的。您的服务器端代码应该返回结果，而您的客户端应该决定如何呈现它。即根据Ajax的结果获取你的id并写入你的内部HTML；不要试图让你的服务器这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:22:39.967

至少在 IE 中，我不知道为什么，innerHTML 对`<tr>`. 这些是让 jQuery 如此受欢迎的小烦恼：它规避了那些奇怪和不一致的行为，并提供了更合乎逻辑和功能性的 API。我会简单地使用 JQuery：

```
$('#replace').html(theNewHtml); 
```

见[http://jsfiddle.net/fxUwS/1/](http://jsfiddle.net/fxUwS/1/)

# mysql - 在过程之外声明 Mysql 变量类型

> ID：14165797
> 
> 赞同：1
> 
> 时间：2013-01-04T22:09:31.327
> 
> 标签：mysql, ssis

我正在使用 mysql 并使用 SQLYog 的查询浏览器编写一些查询。sql 使用了一些变量。下面是一个例子：

```
SELECT NOW() @cur_dt;
SELECT 'table' INTO @tbl;
SELECT DATABASE() INTO @db;
SELECT @@hostname INTO @host;

SELECT @host AS `host`, @db AS `database`, @tbl AS `table`, @cur_date AS `dt`; 
```

我正在准备这个 sql 以在 SSIS 2005（Sql Server 集成服务）中用作源。我遇到的问题是变量以 blob 的形式出现，而不是 varchars 或日期。

我可以转换每个有效的，但我上面的 sql 只是我真正需要的一小部分，它是一堆联合。因此，与此同时，我将围绕所有工会进行选择并在那时强制转换字段。我知道我可以把它放在一个存储过程中并完成它，但我想知道这个确切的场景。我的问题是是否有办法在声明时指定变量类型？

谢谢，GG

PS。如果您想惩罚开发人员，请让他们使用 SSIS 2005 和 mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:39:31.990

当你积累数据时，你如何在 mysql 查询中将所有数据选择到一个表中？这将为数据提供合理的数据类型。然后使用 SSIS 与表交互，而不是变量本身。

例子：

[http://sqlfiddle.com/#!2/1b059/1](http://sqlfiddle.com/#!2/1b059/1)

# maven - 必须手动创建 .m2/repository 文件夹

> ID：14165800
> 
> 赞同：24
> 
> 时间：2013-01-04T22:09:42.443
> 
> 标签：maven

`.m2`文件夹是Maven自动创建的，还是需要手动创建？

, 包含什么`.m2/repository`，从哪里来？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T22:21:06.183

首先，它会在你执行构建时由 Maven 创建，例如：

```
mvn clean install 
```

请注意，您可能会发现这只是在执行 mvn your self ;)

二、.m2的内容是：

`settings.xml`包含所有 Maven 执行的全局设置 的文件。

一个名为的文件夹`repository`，其中包含各种 Maven 工件的所有本地副本，或者是从远程存储库（例如 Maven Central）拉下的工件缓存，或者是由本地 Maven 构建构建的工件。工件在文件夹结构中组织，这些文件夹结构反映了工件的 groupId。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-04T22:14:53.527

它将自动创建。存储库文件夹（也称为**本地存储库）将从您的****用户** `settings.xml`、**全局** `settings.xml`和可能在您的 poms 中指定的存储库中下载其内容。

大多数工件将从`repo1.maven.org`.

# fortran - 如何使用 gfortran 中的 loadlibrary 和 getprocaddress？

> ID：14165801
> 
> 赞同：0
> 
> 时间：2013-01-04T22:09:49.437
> 
> 标签：fortran, gfortran

我正在尝试学习如何从 Windows 上的 fortran 可执行文件调用 fortran dll 中的函数。我在 Eclipse 中使用 gfortran 4.7 和 photran。

我的测试 dll 在 hello.f90 中有一个函数：

*你好.f90*

```
subroutine hello
    implicit none
    print *, "Hello World!"
end subroutine hello 
```

使用以下生成文件：

```
all:
    gfortran -Wall -c hello.f90
    gfortran -shared -o hello.dll hello.o 
```

Dependency Walker 确认函数“hello_”已导出。

现在我正在尝试构建一个动态调用它的程序。我根据在网上找到的示例构建了以下内容，但无法编译：

*main.f90*

```
program main
    implicit none
    integer :: p
    pointer (q, hello)
    p = loadlibrary("hello.dll")
    q = getprocaddress(p, "hello_")
    call hello
end program main 
```

*生成文件*

```
all:
    gfortran -Wall -pedantic -fcray-pointer main.f90 
```

错误消息是函数 LoadLibrary（和 getprocaddress）没有隐式类型。我怀疑这意味着这些函数没有定义，我需要以某种方式包含它们的标题。是对的吗？我在 c:\mingw\include\winbase.h 中找到了 loadlibrary 的声明

干杯，

马克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T06:55:50.693

LoadLibrary 和 GetProcAddress 是 Windows API 例程。与任何非内在函数一样，您需要声明这些函数的类型，并且鉴于这些 API 的性质，您还需要进一步提供完整的接口。

如果您正在为 32 位 Windows 编译，那么这些 API 使用 stdcall 调用约定。您需要使用 gfortran 源指令扩展来指定它。

（在 64 位 Windows 上，stdcall 被定义为与 C 调用约定相同 - 源指令无效。）

对于调用约定控制，如果我将您的 DLL 代码更改为：

```
SUBROUTINE hello() BIND(C, NAME='hello')
  IMPLICIT NONE
  PRINT *, 'Hello'
END SUBROUTINE hello 
```

然后下面的主程序将加载生成的 DLL 并执行该过程。

```
PROGRAM Main
  USE, INTRINSIC :: ISO_C_BINDING, ONLY:  &
      C_F_PROCPOINTER, C_FUNPTR, C_INTPTR_T,  &
      C_NULL_CHAR, C_CHAR, C_ASSOCIATED

  IMPLICIT NONE

  INTERFACE 
     FUNCTION LoadLibrary(lpFileName) BIND(C,NAME='LoadLibraryA')
        USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_INTPTR_T, C_CHAR
        IMPLICIT NONE 
        CHARACTER(KIND=C_CHAR) :: lpFileName(*) 
        !GCC$ ATTRIBUTES STDCALL :: LoadLibrary 
        INTEGER(C_INTPTR_T) :: LoadLibrary 
     END FUNCTION LoadLibrary 

     FUNCTION GetProcAddress(hModule, lpProcName)  &
         BIND(C, NAME='GetProcAddress')
       USE, INTRINSIC :: ISO_C_BINDING, ONLY:  &
           C_FUNPTR, C_INTPTR_T, C_CHAR
       IMPLICIT NONE
       !GCC$ ATTRIBUTES STDCALL :: GetProcAddress
       TYPE(C_FUNPTR) :: GetProcAddress
       INTEGER(C_INTPTR_T), VALUE :: hModule
       CHARACTER(KIND=C_CHAR) :: lpProcName(*)
     END FUNCTION GetProcAddress      
  END INTERFACE

  ABSTRACT INTERFACE
    SUBROUTINE hello_intf() BIND(C)
      IMPLICIT NONE
    END SUBROUTINE hello_intf
  END INTERFACE

  INTEGER(C_INTPTR_T) :: module_handle
  TYPE(C_FUNPTR) :: proc_address
  PROCEDURE(hello_intf), BIND(C), POINTER :: my_proc

  !****      

  module_handle = LoadLibrary(C_CHAR_'hello.dll' // C_NULL_CHAR)
  IF (module_handle == 0) STOP 'Unable to load DLL'

  proc_address = GetProcAddress( module_handle,  &
      C_CHAR_'hello' // C_NULL_CHAR )
  IF (.NOT. C_ASSOCIATED(proc_address))  &
      STOP 'Unable to obtain procedure address'

  CALL C_F_PROCPOINTER(proc_address, my_proc)

  CALL my_proc

END PROGRAM Main 
```

# xcode - 静态表和不推荐使用的代码

> ID：14165802
> 
> 赞同：0
> 
> 时间：2013-01-04T22:09:50.413
> 
> 标签：xcode, static, uitableview, deprecated

好的，所以我建立了几个静态表，总共有 39 行，所有这些表都有这个警告标志

> 文本已弃用：第一次弃用 3.0

我不能使用 textLabel b/c 它用于 UILabel，然后停止并且不会再继续

任何帮助都会很棒，谢谢

```
self.noRoomsCool.text = @"No, some rooms are either too hot or too cold when my system runs."; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:20:50.210

不明白.. .text 等于 .textLabel.text

请务必使用标签并设置 ITS 文本属性

# symfony - 如何显示两个多对多实体 Symfony2

> ID：14165808
> 
> 赞同：0
> 
> 时间：2013-01-04T22:10:27.467
> 
> 标签：symfony, left-join, entity-relationship

我在 SF2.0.15 和 Doctrine2 下，我有两个实体。

-远征-步骤

解释一下，一个探险可以有几个步骤，一个步骤可以属于几个探险。此外，一个探险属于他的创始人（名为“所有者”并存储在用户实体中）。因此，我选择在 Expedition 和 Steps 表之间进行 ManyToMany 连接。在您看来，这是一个好的选择还是一个错误的选择？

**我想创建一个方法来选择属于一个探险队的所有步骤**（我有探险队的 ID，它包含在 $id_exp 中）。所以，我在互联网上阅读了很多主题，但总是失败，我想知道为什么......

实体 Expedition.php

```
/**
 * @ORM\ManyToOne(targetEntity="Easymuth\UserBundle\Entity\User")
 * @ORM\JoinColumn(nullable=false)
 */
private $owner;
/**
 * @ORM\ManyToMany(targetEntity="Easymuth\ExpeditionBundle\Entity\Step", cascade={"persist"})
 */
private $steps;

/**
 * Add steps
 *
 * @param Easymuth\ExpeditionBundle\Entity\Step $steps
 */
public function addStep(\Easymuth\ExpeditionBundle\Entity\Step $step)
{
    $this->steps[] = $step;
}

public function __construct()
{
    $this->steps = new \Doctrine\Common\Collections\ArrayCollection();
}
/**
 * Get steps
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getSteps()
{
    return $this->steps;
} 
```

ExpeditionRepository.php：

```
namespace Easymuth\ExpeditionBundle\Entity;

use Doctrine\ORM\EntityRepository;

class ExpeditionRepository extends EntityRepository
{
public function getStepsFromExpedition($id_exp) {
  $qb = $this->createQueryBuilder('e')
             ->leftJoin('e.steps', 's')
             ->addSelect('s')
             ->where('e.id = :id')
             ->setParameter('id', $id_exp);

  return $qb->getQuery()->getResult();
}
} 
```

最后在我的控制器中，我有：

```
namespace Easymuth\ExpeditionBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Easymuth\ExpeditionBundle\Entity\Expedition;

class MainController extends Controller
{
public function stepsAction($id_exp) {

    $expedition = $this->getDoctrine()
                    ->getEntityManager()
                    ->getRepository('EasymuthExpeditionBundle:Expedition')
                    ->getStepsFromExpedition($id_exp);

    print_r($expedition->getSteps()); // it displays a very long contents........

    //return $this->render('EasymuthExpeditionBundle:Main:steps.html.twig'));
   }
} 
```

print_r（或 var_dump）上显示的错误是：

```
Fatal error: Call to a member function getSteps() on a non-object in /Applications/MAMP/htdocs/easymuth/src/Easymuth/ExpeditionBundle/Controller/MainController.php 
```

非常感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:14:18.370

这是一个不错的选择，你必须`ManyToMany`为这个设计使用关联，好点！但要小心，如果你想在你的关联中添加信息（例如订单，可能对远征中的步骤很有用），你必须创建一个新实体。[在这里](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)查看更多信息。

然后，问题出在您的控制器中。（您的存储库中不需要额外的功能）
如果您想从一次探险中获取所有步骤，只需在您的控制器中执行：

```
//find your expedition
$expedition = $this->getDoctrine()
                    ->getEntityManager()
                    ->getRepository('EasymuthExpeditionBundle:Expedition')
                    ->find($id_exp);

//then get the steps from this expedition
$steps = $expedition->getSteps(); 
```

你必须确保远征`$id_exp` **确实**存在，否则当你想使用你的`$expedition`变量时它会抛出一个错误（因为它被设置为`null`）你可以通过这种方式检查存在：

```
if(!$expedition) {
    //do some stuff like throwing exception
} 
```

# mysql - iOS 和 Mac OSX 与 MySQL 数据库通信

> ID：14165813
> 
> 赞同：0
> 
> 时间：2013-01-04T22:11:01.633
> 
> 标签：mysql, ios, database, macos

我有一个客户想要我正在开发的应用程序的控制面板。控制面板是一个 Mac OSX 应用程序，允许用户将文件（excel 文档等）提交到我的 MySQL 数据库。然后，我为它们创建的 iOS 应用程序会检查这些文件。

我不知道该怎么做。我已经设置了 MySQL 数据库，并且到处寻找解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:01:47.620

我不会尝试直接从您的手机连接到您的 MySQL 数据库。这是一个糟糕的设计，有几个原因。而是在与 MySQL 数据库相同的服务器上构建 API。用 java、php、c# 或其他任何东西都没有关系。您甚至可能会找到一些可以自动执行此操作的产品或开源项目。我列出了这样做的一些好处

1.  它使测试更容易。您可以针对不依赖或正在使用手机的 API 编写测试框架。
2.  它使开发更快。您无需模拟或使用手机来开发和测试您的表格设计和查询。
3.  它为您提供兼容性。当您需要更改数据库时（并且您确实这样做了），您可以创建新 API 供新版本的应用程序使用，而旧版本仍然存在，可以继续使用旧 API（您可能必须修改它才能仍然提供相同的功能）
4.  它为您提供灵活性。如果您的用户群增长并且您可能需要对读取或分片数据库进行复制，您将其构建到 API 而不是应用程序中，这只是一种更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:16:25.760

一种选择是使用 PHP 来处理所有数据库交互。

在服务器上托管脚本，让应用程序调用它们并让脚本返回某种可解析的响应（我会选择 JSON）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:30:09.830

我从来没有为 MySQL 找到合适的基于 Object-C 的连接器。在这一点上，我建议使用 C/C++ 连接器。有很多关于如何为 C 和 C++ 配置连接器的示例。困难的部分将是从 MySQL 代码传递的所有数据，而 Object-C 代码将必须是 C 类型。

编辑：[一个例子](https://stackoverflow.com/questions/22901/what-is-the-best-way-to-communicate-with-a-mysql-server)

# java - 使用 Outlook 电子邮件将新行附加到 Java StringBuilder

> ID：14165816
> 
> 赞同：1
> 
> 时间：2013-01-04T22:11:14.390
> 
> 标签：java

我正在使用将传递给我创建的电子邮件服务的 StringBuilder，以便将 StringBuilder 设置为正在发送的电子邮件的正文。这就是我现在所拥有的：

```
StringBuilder buffer = new StringBuilder();
buffer.append("Hello World! " );
buffer.append(something.getMessage());
buffer.append (" \n ");
buffer.append("Welcome to " );
buffer.append(something.getAnother());
buffer.append (" \n ");

emailObject.setBody(buffer.toString());
emailService.sendEmail(emailObject); 
```

我希望消息显示在多行中，但由于某种原因，即使使用 \n 消息仍然显示在一个连续的行中。有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:36:14.980

使用 HTML Builder，appendBR() 追加新行

```
HTMLBuilder html = new HTMLBuilder();
html.append(makeHTMLDescription());   
html.appendBR(); 
```

# java - 使用 int、do-while 和 if 创建菜单系统

> ID：14165821
> 
> 赞同：1
> 
> 时间：2013-01-04T22:11:33.720
> 
> 标签：java

我尝试制作一个菜单系统，让用户在四个选项之间进行选择。为了区分选择，我检查了输入的 int。它有效，但不知何故我觉得它不是很优雅。特别是当我将 selectedMenu 的初始值设置为 1902475424 以检查用户何时输入了不匹配的值时。我假设用户不会不小心输入 1902475424。

有没有一种更简单的方法来制作菜单系统，或者会这样做吗？这个主要有缺陷吗？

是的，我是 Java 的初学者 :-)

```
import java.util.Scanner;
import java.util.InputMismatchException;

public class Menu {

    public void printMenu() {
        System.out.println(
                "1\. Start new game\n" + 
                "2\. Load game\n" + 
                "3\. Settings\n" + 
                "4\. Exit\n"
        );
    }

    public void selectMenu() throws InputMismatchException {
        int selectedMenu = 1902475424;
        Scanner aScanner = new Scanner(System.in);
        do {
            selectedMenu = 1902475424;
            try {
                System.out.println("Try block begin.");
                selectedMenu = aScanner.nextInt();
            } catch (InputMismatchException e) {
                System.out.println("Catch blok begin.");
                System.out
                        .println("Invalid input, please input a number between 1-4.");
                aScanner.nextLine();
            }
            if ((selectedMenu < 1 || selectedMenu > 4)
                    && (selectedMenu != 1902475424)) {
                System.out.println("Input out of range \"" + selectedMenu
                        + "\". Input a number between 1-4.");
            }
        } while (selectedMenu == 1902475424
                || (selectedMenu < 1 || selectedMenu > 4));

        if (selectedMenu >= 1 && selectedMenu <= 4) {
            System.out.println("A new game will now start.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:25:41.123

您的方法倾向于*过度杀伤*类别：]
您可以取消您的随机值，`1902475424`如下所示：

```
public void selectMenu() throws InputMismatchException {
    int selectedMenu;
    Scanner aScanner = new Scanner(System.in);
    do {
        try {
            System.out.println("Try block begin.");
            selectedMenu = aScanner.nextInt();
            if(selectedMenu < 1 || selectedMenu > 4) {
                System.out.println("Input out of range \"" + selectedMenu + "\". Input..");
            }
        } catch(InputMismatchException e) {
            System.out.println("Catch blok begin.");
            System.out.println("Invalid input, please input a number between 1-4.");
            aScanner.nextLine();
            selectedMenu = 0;
        } 

    } while(selectedMenu < 1 || selectedMenu > 4);

    System.out.println("A new game will now start.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:27:56.947

考虑以下替代方案（伪代码）：

```
int getMenuOption() {
    print(message)
    read(input)

    if input is valid then return input
    else then return getMenuOption()
} 
```

这是递归的，所以如果用户坐在那里并输入错误的数字足够长，您可能会溢出堆栈。您可以轻松地对其进行扩充，为用户提供固定次数的尝试：

```
int getMenuOption(int triesRemaining) {
    if (triesRemaining == 0) throw new RetriesExceededException();

    print(message)
    read(input)

    if input is valid then return input
    else then return getMenuOption(triesRemaining - 1)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:28:24.587

这是对您提供的方法的修订`selectMenu()`，应该可以完成工作！我对其进行了测试，它似乎按预期工作。:)

```
public void selectMenu() {

    int selectedMenuItem = 0;
    Scanner aScanner = new Scanner(System.in);

    while(selectedMenuItem == 0){

        String userInputMenuItemString = aScanner.nextLine();

        try {
            int userInputMenuItem = Integer.parseInt(userInputMenuItemString);
            if(userInputMenuItem > 0 && userInputMenuItem <= 4){

                selectedMenuItem = userInputMenuItem;

            }else{

                System.out.println("No option #" + Integer.toString(userInputMenuItem) + " exists!\nTry again:");

            }
        } catch(NumberFormatException ex) {

            System.out.println("Please input a number!");

        }

    }

    switch(selectedMenuItem){
        case 1:
            System.out.println("You chose to start a new game!");
            break;
        case 2:
            System.out.println("You chose to load a game!");
            break;
        case 3:
            System.out.println("You chose to access settings!");
            break;
        case 4:
            System.out.println("You chose to exit. Bye!");
            System.exit(0);
            break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T22:30:44.083

尝试类似的东西（我还没有测试过）

```
 import java.util.Scanner;
    import java.util.InputMismatchException;

    public class Menu {

            public void printMenu() {
                    System.out.println("1\. Start new game\n" + "2\. Load game\n"
                                    + "3\. Settings\n" + "4\. Exit\n");
            }

            public void selectMenu() throws InputMismatchException {
                    int selectedMenu;
                    boolean validSelection = false;
                    Scanner aScanner = new Scanner(System.in);
                    while(!validSelection) {
                            selectedMenu = aScanner.nextInt();
                            validSelection = true;
                            switch (selectedMenu) {
                                    case 1:
                                            // doWhen1();
                                            break;
                                    case 2:
                                            // doWhen2();
                                            break;
                                    case 3:
                                            // doWhen3();
                                            break;
                                    case 4:
                                            // doWhen4();
                                            break;
                                    default:
                                            System.out.println("Input out of range \"" + selectedMenu
                                                    + "\". Input a number between 1-4.");
                                            validSelection = false;
                            }
                    }
            }
    } 
```

# wordpress - wordpress get_posts 按自定义日期排序的自定义字段

> ID：14165824
> 
> 赞同：0
> 
> 时间：2013-01-04T22:11:40.640
> 
> 标签：wordpress, date, custom-post-type

我有一个成员的自定义帖子类型，出生日期保存为 01.01.2013

```
$args = array(
    'numberposts'   => -1,
    'post_type'       => 'mitglied',
    'post_status'     => 'publish',
    'meta_key'      => 'geburtsdatum',
    'meta_value'    => date("d.m.Y"),
    'meta_compare' => '>',
    'orderby' => 'meta_value',
    'order' => 'ASC'
);
$geburtstage = get_posts ( $args ); 
```

我想要一个按月和日排序的成员生日列表

*   1月4日，10人
*   3 月 8 日，第 2 人
*   ...
*   12 月 1 日，第 3 人

列表上方的代码按天排序

*   12 月 1 日，第 3 人
*   1月4日，10人
*   3 月 8 日，第 2 人

同样重要的是，排序不受出生年份的影响

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:52:09.657

您在自定义字段中以错误的格式存储了日期。您应该使用 UNIX 标记或 Ymd 之类的格式，它允许按时间顺序排序。您现在唯一的解决方案是检索结果而不对其进行排序（忘记`'order' => 'ASC'`）但也不限制它们（因为您的日期限制不起作用，即使它看起来确实如此），创建一个包含所有这些的数组，转换日期时间作为 UNIX 时间戳（使用`strtotime`）并按日期排序......但我真正的建议是使用时间戳或格式正确的日期（Ymd）重构您的站点。您可以创建一个遍历每个帖子的循环，并将自定义字段的值替换为 UNIX 中的等效值，使用以下命令：

```
$oldvalue = get_post_meta($post_id, 'geburtsdatum', true);  
update_post_meta($post_id, 'geburtsdatum', strtotime($old_value)); 
```

请在此之前备份您的数据库，或者至少对矿石或两个帖子进行测试，但这应该可以解决问题。然后您将能够稍后使用：

```
date("d.m.Y", $yourunixstamp) 
```

获取格式化日期。

然后，您之前的代码也将变为：

```
$args = array(
'numberposts'   => -1,
'post_type'       => 'mitglied',
'post_status'     => 'publish',
'meta_key'      => 'geburtsdatum',
'meta_value'    => time(),
'meta_compare' => '>',
'orderby' => 'meta_value',
'order' => 'ASC'
);
$geburtstage = get_posts ( $args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:09:38.397

我认为我的任务不能仅通过 get_posts 解决，所以我分 3 步完成了。

首先，我使用 get_posts 获取所有成员

```
$args = array(
    'numberposts'   => -1,
    'post_type'       => 'mitglied',
);
$geburtstage = get_posts ( $args ); 
```

然后用数据填充一个数组。为了排序，我用生日的日期和月份制作了时间戳，但实际年份。尽管使用此解决方案没有必要，但我将日期格式更改为 yyyy-mm-dd。@barakadam 在回答我的问题时解释了如何做到这一点。我使用 wordpress 插件 Advanced Custom Fields，所以我使用 get_field() 获取自定义字段

```
$mitglieder = array( array() );
$i = 0;
foreach($geburtstage as $post){
    setup_postdata( $post );

    $datum = explode( "-",get_field('geburtsdatum') );

    $mitglieder[$i]['orderby'] = mktime(0, 0, 0, (int)$datum[1], (int)$datum[2], date('Y'));
    $mitglieder[$i]['name'] = get_field( 'name' );
    $i++;
} 
```

最后一步是使用 array_multisort 来获得预期的顺序

```
foreach ($mitglieder as $key => $row) {
    $dates[$key] = $row['orderby'];
}
array_multisort($dates, SORT_ASC, $mitglieder); 
```

感谢@barakadam 和@Christopher 的参与。

# excel - Excel 2010 VBA函数在计算后粘贴为值

> ID：14165828
> 
> 赞同：0
> 
> 时间：2013-01-04T22:11:47.830
> 
> 标签：excel, excel-2010, vba

我在 Excel 2010 中使用这个网络抓取 VBA 代码来从网页中提取标题。我希望它在代码运行后将标题粘贴为值。

这是我的代码：

```
Function GetTitleFromURL(sURL As String)
Dim wb As Object
Dim doc As Object

Set wb = CreateObject("InternetExplorer.Application")

wb.Navigate sURL

While wb.Busy
    DoEvents
Wend

GetTitleFromURL = wb.Document.Title

wb.Quit

Set wb = Nothing

'trying to paste as value after get title
'Application.CutCopyMode = False
'    Selection.Copy
'    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
'        :=False, Transpose:=False

End Function 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:14:43.260

也许这样的事情可能是合适的？

```
Sub GetTitleFromURL()

  Dim source_wb As Object
  Dim target_wb As Object
  Dim target_sheet As Object
  Dim title As String
  Dim sURL As String

 Set target_wb = ActiveWorkbook
  Set target_sheet = target_wb.ActiveSheet

  sURL = target_sheet.Range("A1").Value
    Set source_wb = CreateObject("InternetExplorer.Application")
      source_wb.Navigate sURL
        While source_wb.Busy
          DoEvents
       Wend
     title = source_wb.Document.title
  source_wb.Quit

 target_sheet.Range("B1").Value = title

 Set source_wb = Nothing
   Set target_sheet = Nothing
 Set target_wb = Nothing

End Sub 
```

# java - LinkedHashMap containsKey 或 containsValue

> ID：14165830
> 
> 赞同：2
> 
> 时间：2013-01-04T22:12:04.803
> 
> 标签：java, linkedhashmap

为什么会发生这种情况，我该如何避免？我假设它只检查引用，但这不是很方便。

```
import java.util.LinkedHashMap;

public class CheckingLinkedHashMap {

    public static void main(String[] args) {
        LinkedHashMap<String[], String[]> linkedh = new LinkedHashMap<>();
        String[] a = "A".split(",");
        String[] ab = "A,B".split(",");
        linkedh.put(a, ab);
        String[] aa = "A".split(",");
        String[] aabb = "A,B".split(",");
        System.out.println("Contains key: " + linkedh.containsKey(aa));
        System.out.println("Contains value: " + linkedh.containsValue(aabb));

        System.out.println("Contains key: " + linkedh.containsKey(a));
        System.out.println("Contains value: " + linkedh.containsValue(ab));
    }
} 
```

--

```
Contains key: false
Contains value: false
Contains key: true
Contains value: true 
```

* * *

## 更新

```
import java.util.Arrays;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

public class CheckingLinkedHashMap {

    public static void main(String[] args) {

        LinkedHashMap< List<String>, List<String>> linkedh = new LinkedHashMap<>();

        String[] a = "A".split(",");
        String[] ab = "A,B".split(",");
        List<String> al = Arrays.asList(a);
        List<String> abl = Arrays.asList(ab);
        linkedh.put(al, abl);

        String[] aa = "A".split(",");
        String[] aabb = "A,B".split(",");
        List<String> aal = Arrays.asList(aa);
        List<String> aabbl = Arrays.asList(aabb);
        linkedh.put(aal, aabbl);

        String[] aaa = "A,B".split(",");
        String[] aaabbb = "A,B".split(",");
        List<String> aaal = Arrays.asList(aaa);
        List<String> aaabbbl = Arrays.asList(aaabbb);
        linkedh.put(aaal, aaabbbl);

        String[] aaaa = "B,A".split(",");
        String[] aaaabbbb = "A,B".split(",");
        List<String> aaaal = Arrays.asList(aaaa);
        List<String> aaaabbbbl = Arrays.asList(aaaabbbb);
        linkedh.put(aaaal, aaaabbbbl);

        Iterator it = linkedh.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry pairs = (Map.Entry) it.next();
            System.out.println("Key : " + pairs.getKey() + " Value : " + pairs.getValue());
        }

        System.out.println("Contains key: " + linkedh.containsKey(aal));
        System.out.println("Contains value: " + linkedh.containsValue(aabbl));

        System.out.println("Contains key: " + linkedh.containsKey(al));
        System.out.println("Contains value: " + linkedh.containsValue(abl));
    }
} 
```

--

```
Key : [A] Value : [A, B]
Key : [A, B] Value : [A, B]
Key : [B, A] Value : [A, B]
Contains key: true
Contains value: true
Contains key: true
Contains value: true 
```

这似乎可行。我想我必须做一些额外的检查以避免密钥重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:19:34.373

问题是您使用的是默认情况下通过引用比较相等的数组。要解决您的问题，您应该将它们封装到一个类中并覆盖适当的方法：

```
class StringBundle {
  String[] strings;

  @Override
  public boolean equals(Object o) {
    // various checks
    return Array.deepEquals(this.strings, o.strings);
  }

  @Override
  public int hashCode() {
    return Arrays.hashCode(strings);
  }
} 
```

您需要一种方法来提供您自己的版本，`hashCode()`否则您将无法在散列容器中成功使用此类。注意进行`Arrays.hashCode`不适合嵌套数组的浅哈希码计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:17:44.703

`containsKey`和`containsValue`功能可能在和`equals()`/或方面起作用`hashCode()`。因为`String[]`，正如您正确指出的那样，这些可能是在参考方面。除非您可以将比较器与`containsKey()`and一起传递，否则您`containsValue()`的选择变成创建自己的类来执行该`String[]`操作，除了它可以计算`equals()`并且`hashCode()`以具有相同值的对象相等的方式。

# php - 如何提高 PHP CodeSniffer 的执行时间？

> ID：14165840
> 
> 赞同：1
> 
> 时间：2013-01-04T22:12:49.877
> 
> 标签：php, scalability, codesniffer

尽管能够优化单个“嗅探”实现很重要，但我的问题并不是关于这个。

我真正想做的是在几秒钟内对我的整个代码库（包含几百万行 PHP 代码）运行我最喜欢的十几个嗅探。

我最喜欢的每个嗅探都需要不到 2 秒的时间来针对我的代码库中的每个文件运行，所以原则上没有理由（假设我暂时没有使用任何“多文件嗅探”）我做不到这是通过将问题分解为几十万个“工作”，将它们分布在（大量）“工人”海洋中并行运行，并汇总结果。

我希望有人已经使用用于构建大规模可扩展应用程序的几种流行框架之一完成了此（或类似的事情），并有一些实用的建议可以分享。

**编辑：**

速度实际上对我很重要，因为我想在“构建”软件版本时使用 CodeSniffer 对源代码进行一些静态分析，并且我希望整个构建过程在几分钟而不是几小时（甚至几天）内运行。我很欣赏这不是 CodeSniffer 最初设计的使用方式（例如，作为一个 IDE 插件，它可以在您提交代码更改之前向您显示潜在的问题），但我发现“嗅探”的灵活性使 CodeSniffer 成为开发静态分析应用程序的理想工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:16:07.097

我也对 CodeSniffer 的吞吐量感到沮丧。我能找到的最好的办法是删除我不关心检查的嗅探。我还怀疑某些嗅探比其他嗅探更昂贵，具体取决于每个嗅探必须执行的解析量。

# mysql - MySQL 选择不带引号的 Outfile

> ID：14165841
> 
> 赞同：2
> 
> 时间：2013-01-04T22:12:53.587
> 
> 标签：mysql, into-outfile, infobright

有没有可能，如果有的话，我`SELECT ... INTO OUTFILE`可以让它不包含任何字符。

到目前为止，这不起作用：

```
 SELECT hour_stamp,
         day_stamp,
         month_stamp,
         hour,
         day,
         month,
         year,
         quarter,
         day_of_week,
         week_of_year,
         SUBSTR(hour_text,1,24),
         SUBSTR(day_text,1,24)
    FROM date_dim
  INTO OUTFILE '/media/ssd0/temp/dates.tsv' 
  FIELDS TERMINATED BY '\t'
  ENCLOSED BY ''; 
```

我不确定引擎在这种情况下是否重要，但请注意我在 Linux 机器上使用 InfoBright 可能很重要。

输出如下：

```
1293840000000   1293840000000   1293840000000   0   1   1   2011    1   5   52  "2011-01-01T00:00:00"   "2011-01-01T00:00:00"
1293843600000   1293840000000   1293840000000   1   1   1   2011    1   5   52  "2011-01-01T01:00:00"   "2011-01-01T00:00:00"
1293847200000   1293840000000   1293840000000   2   1   1   2011    1   5   52  "2011-01-01T02:00:00"   "2011-01-01T00:00:00"
1293850800000   1293840000000   1293840000000   3   1   1   2011    1   5   52  "2011-01-01T03:00:00"   "2011-01-01T00:00:00" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:23:12.700

添加`OPTIONALLY ENCLOSED BY ''`可能会产生预期的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:24:05.870

试一试：

```
 SELECT hour_stamp,
         day_stamp,
         month_stamp,
         hour,
         day,
         month,
         year,
         quarter,
         day_of_week,
         week_of_year,
         SUBSTR(hour_text,1,24),
         SUBSTR(day_text,1,24)
    FROM date_dim
  INTO OUTFILE '/media/ssd0/temp/dates.tsv'; 
```

这是一个示例

```
mysql> desc veto.prova;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| provaemail | varchar(255) | NO   |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+
2 rows in set (0.05 sec)

mysql> select * from veto.prova;
+----+--------------------------+
| id | provaemail               |
+----+--------------------------+
|  1 | redwards@logicworks.net  |
|  2 | rolandoedwards@yahoo.com |
+----+--------------------------+
2 rows in set (0.00 sec)

mysql> select id,provaemail from prova into outfile 'C:/lwdba/prova.txt';
Query OK, 2 rows affected (0.01 sec)

mysql> 
```

它在磁盘上是什么样的？？？

```
C:\>cd lwdba

C:\LWDBA>type prova.txt
1       redwards@logicworks.net
2       rolandoedwards@yahoo.com

C:\LWDBA> 
```

我尝试了一些奇怪的东西。我终止了`\0`

```
mysql> select id,provaemail,substr(provaemail,1,5) from prova into outfile 'C:/lwdba/prova9.txt' fields terminated by '\0';
Query OK, 2 rows affected, 1 warning (0.00 sec)

mysql> show warnings;
+---------+------+------------------------------------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                                                |
+---------+------+------------------------------------------------------------------------------------------------------------------------+
| Warning | 1475 | First character of the FIELDS TERMINATED string is ambiguous; please use non-optional and non-empty FIELDS ENCLOSED BY |
+---------+------+------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select id,provaemail,substr(provaemail,1,5) from prova into outfile 'C:/lwdba/prova8.txt' fields enclosed by '\0';
Query OK, 2 rows affected (0.00 sec)

mysql> 
```

文件如下所示：

```
C:\LWDBA>type prova9.txt
1 redwards@logicworks.net redwa
2 rolandoedwards@yahoo.com rolan

C:\LWDBA>type prova8.txt
 1       redwards@logicworks.net         redwa
 2       rolandoedwards@yahoo.com        rolan

C:\LWDBA> 
```

我使用`\0`它是因为它是一个空字符。

您看到的双引号异常可能是由于 InfoBright 存储引擎以及它如何呈现函数调用的字符输出。

这是一个奇怪的建议，但我不知道它是否会起作用......

如果您进行子查询，则数据始终存储在 MySQL 临时表中。更改查询：

```
mysql> select * from (select id,provaemail,substr(provaemail,1,5) as stuff from prova) A
-> A into outfile 'C:/lwdba/prova444.txt' fields terminated by '\0' enclosed by '\0';
Query OK, 2 rows affected (0.00 sec)

mysql> 
```

在你的情况下，那将是

```
SELECT * FROM (
  SELECT hour_stamp,
         day_stamp,
         month_stamp,
         hour,
         day,
         month,
         year,
         quarter,
         day_of_week,
         week_of_year,
         SUBSTR(hour_text,1,24) ht,
         SUBSTR(day_text,1,24) dt
    FROM date_dim) A
  INTO OUTFILE '/media/ssd0/temp/dates.tsv'; 
```

看看这是否有不同的作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T18:05:16.527

你试过“空”吗？

```
SELECT hour_stamp,
     day_stamp,
     month_stamp,
     hour,
     day,
     month,
     year,
     quarter,
     day_of_week,
     week_of_year,
     SUBSTR(hour_text,1,24),
     SUBSTR(day_text,1,24)
FROM date_dim
INTO OUTFILE '/media/ssd0/temp/dates.tsv' 
FIELDS TERMINATED BY '\t'
ENCLOSED BY 'NULL'; 
```

# android - 异步在android中不起作用

> ID：14165847
> 
> 赞同：-1
> 
> 时间：2013-01-04T22:13:31.947
> 
> 标签：android, listview

我正在关注本教程以在 android 中延迟加载列表视图。 [http://www.coderzheaven.com/2012/09/23/simplest-lazy-loading-listview-android-data-populated-mysql-database-php/](http://www.coderzheaven.com/2012/09/23/simplest-lazy-loading-listview-android-data-populated-mysql-database-php/)

但问题是列表加载缓慢，但图像以提供的顺序方式下载。即，较小的图像不会像那样首先下载。他们在本教程中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:44:46.560

据我所知，本教程没有任何问题。它使用以下代码在 getView() 上启动一个 Asyntask：

```
new DownloadImageTask().execute(pb_and_image); 
```

这就是使它异步的关键。

结果，不是在执行 getView 方法（在 UI 线程中）时执行代码来获取图像，而是在[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)的后台线程中执行昂贵的执行，并且其结果是异步传递的。无法保证顺序，因为每行的 getView 调用顺序不受您的控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:21:08.187

如果您的应用程序针对（并在）API 级别 12 或更高级别上运行，您所描述的可能是预期行为。如果你在 API 级别 9 上运行你的代码——如果你的应用程序支持它——你会看到同样的行为发生吗？如果不是，那很可能是问题所在。

从 API 级别 12 开始，`AsyncTask`默认会按顺序执行多个并发，以减少出现意外错误和竞态条件的机会。但是，如果您使用`executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR)`而不是开始任务`execute()`，它们将并行运行，并且不会等待前面的任务完成。

如果您想进一步阅读，这里是[Dianne Hackborn 的一篇很好的文章，](https://groups.google.com/d/msg/android-developers/8M0RTFfO7-M/xVPtz0Ax8ikJ)解释了其背后的基本原理。

# magento - 如何优化保存多个模型？

> ID：14165850
> 
> 赞同：3
> 
> 时间：2013-01-04T22:13:41.293
> 
> 标签：magento

我需要手动将大量订单项保存到数据库中。我目前正在做这样的事情：

```
for($x=0; $x<250000; $x++)
{
    $orderItem = Mage::getModel('sales/order_item');
    $data = array('a'=>1, 'b'=>2, 'c'=>3);  
    $orderItem->setData($data)->save();
} 
```

尝试从 shell 脚本运行此代码需要很**长时间**。我可以使用哪些策略来加速此代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:54:45.283

我不确定，但看看@`Mage::getModel('core/resource_transaction')`

见[https://stackoverflow.com/a/4879133/1191288](https://stackoverflow.com/a/4879133/1191288)

您可以尝试批量保存 X 数量

```
 $batch = 500;
 $orderItem = Mage::getModel('sales/order_item');
 $transactionSave = Mage::getModel('core/resource_transaction');

 for($x=0; $x<250000; $x++){
     $orderItem->setData( array('a'=>1, 'b'=>2, 'c'=>3));
     $transactionSave->addObject($orderItem);
     $orderItem->reset()
     if ($x % $batch == 0){
        $transactionSave->save();
        $transactionSave = null;
        $transactionSave = Mage::getModel('core/resource_transaction');
     }
 }

 if($x % $batch > 0)
   $transactionSave->save(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:18:54.067

我认为在这种情况下，显着加快速度的最佳选择是创建自定义数据库查询。

编辑：相关选项：尝试重写模型和资源模型以实现一个方法 bulkSave() ，它类似于 save() 但只创建相应的查询对象并返回它，因此它实际上并不使用数据库。然后收集所有查询并在每千项左右的大事务中运行它们。

# shell - 搜索字符串

> ID：14165851
> 
> 赞同：1
> 
> 时间：2013-01-04T22:13:53.233
> 
> 标签：shell, scripting

我想要一个 shell 脚本来搜索两个文件并返回一个字符串列表：

文件 A 仅包含一个唯一的字母数字字符串列表，每行一个，如下所示：

```
accc_34343
GH_HF_223232
cwww_34343
jej_222 
```

文件 B 包含其中一些字符串的列表（有时不止一次），以及第二列信息，如下所示：

```
accc_34343 dog
accc_34343 cat
jej_222 cat
jej_222 horse 
```

我想创建第三个文件，其中包含文件 A 中不在文件 B 中的字符串列表。

我试过用 grep -v 使用一些循环，但这不起作用。因此，在上面的示例中，新文件的内容如下：

```
GH_HF_223232
cwww_34343 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:15:32.203

以下是您可以执行的操作：

```
grep -v -f <(awk '{print $1}' file_b) file_a > file_c 
```

**解释：**

*   `grep -v`：使用`-v`选项`grep`来反转匹配
*   `-f`：使用`-f`选项来`grep`指定模式来自文件
*   `<(awk '{print $1}' file_b)`：这是在不使用临时文件的情况下`<(awk '{print $1}' file_b)`简单地提取第一列值；语法是`file_b`进程[替换](http://tldp.org/LDP/abs/html/process-sub.html)。`<( ... )`
*   `file_a`: 告诉`grep`要搜索的文件是`file_a`
*   `> file_c`：要写入的输出`file_c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T00:40:08.240

[`comm`](http://man.cx/comm)用于查找文件之间的交叉点和差异：

```
comm -23 <(sort fileA) <(cut -d' ' -f1 fileB | sort -u) 
```

结果：

```
GH_HF_223232
cwww_34343 
```

我假设你的外壳是 bash/zsh/ksh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:27:48.587

```
awk 'FNR==NR{a[$0];next}!($1 in a)' fileA fileB 
```

[在这里](http://theunixshell.blogspot.in/2012/12/file-comparisons-using-awk-match-columns.html)检查

# ajax - 如何正确清除 Ember.Enumerable 的内容？

> ID：14165853
> 
> 赞同：2
> 
> 时间：2013-01-04T22:14:14.323
> 
> 标签：ajax, arrays, enums, ember.js

我最近在看 Emberjs，发现这篇有用的文章是由它的主要贡献者之一写的：[关于 Ember.js 使用的建议和说明](http://trek.github.com/)

它引导我完成了一个示例，该示例从服务器获取用户数据列表并将它们呈现在屏幕上。我将简要解释它是如何工作的：

1.  该应用程序通过 ajax 调用联系服务器以获取用户数据列表。
2.  在 ajax 调用结束时，立即返回一个空的可枚举，稍后将其用作控制器的属性。
3.  一旦 ajax 调用完成，它会用数据填充枚举，这些数据依次更新控制器的属性，最后触发自动重新渲染。

只要不重新访问该列表，它就可以正常工作。当用户重新访问列表时，假设他/她导航到另一个状态然后返回，逻辑将再次触发，从服务器获取数据并填充列表。不过，这一次的名单可不是空的！因此，我们有一个重复数据列表。我想通过在ajax调用成功时清除列表的内容来解决这个问题。下面是ajax调用的代码：

```
allAwesomebergs: [],
fetch: function(){
    $.ajax({
        url: 'https://api.github.com/repos/emberjs/ember.js/contributors',
        dataType: 'jsonp',
        context: this,
        success: function(response) {
            response.data.forEach(function(awesomeberg){
                this.allAwesomebergs.addObject(App.Awesomeberg.create(awesomeberg))
            }, this);
        }
    });
    return this.allAwesomebergs;
}, 
```

上面的代码没有清除列表的内容。我尝试在成功函数的开头添加一行“allAwesomebergs = []”，但我得到的只是一个空白屏幕。我认为我可能没有正确执行此操作，但我查看了 Ember 中的文档，并没有看到任何关于清除 Enumerable 内容的内容。

因此问题是：解决这个重复加载问题的最简单方法是什么？事先清除内容似乎是最明显的，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:23:54.837

您可以`clear()`在开始添加新对象之前调用。请参阅[本文档](http://emberjs.com/api/classes/Ember.MutableArray.html#method_clear)。

新代码将是：

```
allAwesomebergs: [],
fetch: function(){
    $.ajax({
        url: 'https://api.github.com/repos/emberjs/ember.js/contributors',
        dataType: 'jsonp',
        context: this,
        success: function(response) {
            this.allAwesomebergs.clear();
            response.data.forEach(function(awesomeberg){
                this.allAwesomebergs.addObject(App.Awesomeberg.create(awesomeberg))
            }, this);
        }
    });
    return this.allAwesomebergs;
}, 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-04T22:50:02.283

我认为您的方法还可以，但应该是：

```
this.allAwesomebergs = [] 
```

这一切都是关于它面前的这个。这里不需要这么清楚。

# actionscript-3 - ItemRenderer 对象更改属性

> ID：14165854
> 
> 赞同：0
> 
> 时间：2013-01-04T22:14:17.003
> 
> 标签：actionscript-3, apache-flex, flex-spark

为模糊的标题道歉。我想不出更好的方式来用这么几句话来表达它。

基本上，我正在创建一个自定义 ItemRenderer (IR)。IR 在左侧有一个标签，在右侧有一个图标。右侧的图标是动态的（可以是添加或删除图标或什么都没有）。这很好用，让我可以控制它。

现在，问题是当我在移动应用程序中滚动列表时，图标会发生变化。

它应该看起来如何： ![在此处输入图像描述](../Images/476a8df8cf6922d7a4caf1d8aca78ebd.png)

通过拖动 Test3 使用手指（或模拟器中的鼠标）滚动后的外观： ![在此处输入图像描述](../Images/68be09a12691d312462657d220bd6a16.png)

如您所见，图标会发生变化，但标签不会发生变化。我的 Spark List 组件上的`dragEnabled`、`dropEnabled`和`dragMoveEnabled`全部设置为 false 。图标选择运行的唯一时间是 on `creationComplete`，因此它不可能在某个时候选择不同的图标。我还可以验证数据本身是否是发生此更改后的数据。

这是创建项目的 MXML：

```
<s:HGroup width="100%" verticalAlign="middle" left="{this.sideSpacing}" right="{this.sideSpacing}" top="{this.sideSpacing}" bottom="{this.sideSpacing}">
    <s:Label id="text" width="100%"/>

    <s:Image id="actionIcon" buttonMode="true" click="actionIconClick( event );">
        <s:filters>
            <s:DropShadowFilter alpha=".45" angle="90" distance="3" blurX="3" blurY="3" quality="3"/>
        </s:filters>
    </s:Image>
</s:HGroup>

<s:Rect width="100%" height="1" bottom="0" alpha=".1">
    <s:fill>
        <s:SolidColor color="#000000"/>
    </s:fill>
</s:Rect> 
```

以及用于选择应显示哪个图标的可能过于详尽的 AS3：

```
private function creationComplete( e:Event ):void {
    if ( this.data.actionIcon != null ) {
        this.actionIconType = this.data.actionIcon;
        if ( this.data.actionIcon == ACTION_ICON_ADD ) {
            this.actionIcon.source = this.addBitmapSource;
        }
        else if ( this.data.actionIcon == ACTION_ICON_REMOVE ) {
            this.actionIcon.source = this.removeBitmapSource;
        }
        else {
            this.actionIcon.source = null;
            this.actionIcon.visible = false;
            this.actionIcon.includeInLayout = false;
        }
    }
    else {
        this.actionIcon.source = null;
        this.actionIcon.visible = false;
        this.actionIcon.includeInLayout = false;
    }
} 
```

什么可能导致此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:21:06.383

基本上，当触发 dataChange 事件时，您需要更新渲染器的标签和图标。CreationComplete 只触发一次。列表并没有真正滚动，只是 itemRenderers 中的数据发生了变化；使它看起来像是在滚动。我称之为渲染器回收。

这是我为执行您想要的移动应用程序创建的组件。它显示一个标签和一个图标（又名装饰者）。滚动时，标签和图标都会更新。您可以使用非常相似的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<s:IconItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    dataChange="onDataChange(event)" alpha=".7" width="100%" cacheAsBitmap="true">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import com.dotcomit.magondaMaze.managers.BoardDataManager;
            import com.dotcomit.magondaMaze.managers.StatManager;

            import mx.events.FlexEvent;

            [Embed(source="assets/images/chooseLevel/completed78x78.png")]
            private var completedImage:Class;                               

            public var statManager :StatManager = StatManager.instance;     

            protected function onDataChange(event:FlexEvent):void
            {
                var itemAsXML :XML = data as XML;
                var results :String = itemAsXML.@id + '. ' + itemAsXML.@title;
                label = results;
                if( statManager.isBoardComplete(itemAsXML.@id)){
                    this.decorator = completedImage;
                } else {
                    this.decorator = null;
                }
            }
        ]]>
    </fx:Script>
</s:IconItemRenderer> 
```

我还要补充一点，IconItemRenderer 组件（我上面的代码扩展了它）旨在完全满足您的需求。所以，可以这么说，您可能不必重新编写轮子。

# c# - 在接口定义中表达返回语义

> ID：14165857
> 
> 赞同：1
> 
> 时间：2013-01-04T22:14:26.350
> 
> 标签：c#

我有一个界面

```
interface IFooWidget
{
     IWidget Get(string widgetName);
} 
```

我的问题是 - 我如何告诉实现者错误情况的返回语义？我的意思是如果他们找不到请求的小部件，他们应该抛出或返回一个空值。这似乎是接口定义的重要部分，但我无法表达。

似乎记录它是唯一的方法 - 如果我能以某种方式将它放在编译器语言而不是人类语言中会更好。

只是想知道是否有人有任何解决方案或想法......

共识答案：

接口定义语法而不是语义。我让自己被我的方法定义的英语所吸引。想象一下，如果它是

```
IWidget Fnargle(string wobbler); 
```

这当然是编译器的样子。最初的问题中暗示了调用语义，因为我选择了一个据称有用的方法名称和参数。但实际上我需要记录该方法语义的所有方面——这是不可避免的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:25:33.930

没有内置方法可以指定方法可能引发哪些异常 - C# 没有类似于 Java 的已检查异常。如果要确保调用者能够处理任何错误，可以为异常处理程序添加参数：

```
interface IFooWidget
{
     IWidget Get(string widgetName, Action<ExceptionType> handler);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:16:03.900

没有办法在 C# 中正式记录或强制执行这一点。

实际上，接口并不能表达很多东西。它们不表达传入或传出数据的前置条件和后置条件。它们*确实*表达了数据格式（参数的类型和数量），但这只是任何给定方法合同的一小部分。

这里有一些工具试图提供帮助。我想到了代码合同。他们只是创造了一种不同的方式来表达这些条件。他们不会静态地强制执行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:22:45.503

好吧，我不认为你可以用 C# 来表达这一点（就像在大多数其他现代语言中一样）。

恕我直言，我认为接口正是为了不表达任何实现细节；如果您希望您的方法（由接口指定的方法）仅在特定条件为真时返回某些内容，我倾向于说这是一个实现细节。

接口中定义的方法是所有可能实现中最不常见的部分，即方法签名不是关于方法应该（或必须）如何实现的任何声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T22:30:18.303

我不相信有一个选项可以在界面中指定它。一种选择是添加您建议的评论。类似下面的注释将在 IntelliSense 中为实施者显示。

```
/// <exception cref="Exception"></exception> 
```

[如果您使用的是 .Net 4.5，则可以使用 System.Diagnostics.Contracts 命名空间来指定后置条件，以使用Contract.Ensures](http://msdn.microsoft.com/en-us/library/dd412871.aspx)确保结果不为空。不幸的是，向接口添加合同有点痛苦。[ContractClassAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contractclassattribute.aspx)上的 Microsoft 文档提供了有关如何执行此操作的详细信息。

# javascript - jQuery 验证器方法在移动设备上的工作方式不同

> ID：14165859
> 
> 赞同：1
> 
> 时间：2013-01-04T22:14:28.083
> 
> 标签：javascript, regex, jquery-validate

**阅读底部的 EDIT 2**
原帖：

我有这个 jQuery 验证器方法来检查有效的 YYYY-MM-DD 日期：

```
$.validator.addMethod("myDate", function(value, element){

    var validformat = /^\d\d\d\d\-(0[1-9]|1[012])\-(0[1-9]|[12][0-9]|3[01])$/;
    return validformat.test(value);

}, "Please enter a valid YYYY-MM-DD date"); 
```

它在我的计算机上运行良好 - 在预期时返回 false，在预期时返回 true。但是，在我的 Android 手机上，它总是返回 false - 即使日期有效，输入总是说“请输入有效的 YYYY-MM-DD 日期”。

是否有任何正则表达式方法，例如`.test()`在 Android（可能还有其他手机）上的工作方式不同，或者这是一个 jQuery Validator 错误？

编辑：我尝试更改`validformat.test(value)`为`value.match(validformat)`相同的结果 - 在计算机上工作，而不是在手机上工作。

**编辑2：**好的，即使在方法中注释掉所有其他内容并输入`return true;`仍然会在我的手机上产生错误。绝对是一个 jQuery 验证器问题。虽然需要解决方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:56:06.123

我刚刚检查了一部 Android 2.3 手机。它完美地工作。

因此，我只将其归咎于 Android 2.2。所以这是我的小修复：

```
$("#myform").validate({
...
    <?php
    //only print out the rule into the JS if it's not Android 2.2
    if(!strpos($_SERVER['HTTP_USER_AGENT'], "Android 2.2"))
        print "myDate: true, \n";
    ?> 
```

烦人的黑客:)

# android - 为什么只打印 Listview 的两个 textview？

> ID：14165860
> 
> 赞同：0
> 
> 时间：2013-01-04T22:14:31.873
> 
> 标签：android, android-asynctask, custom-adapter

我的自定义适配器有一个奇怪的问题......它只打印前两个元素（我的列表视图的前 2 个文本视图）。相同的代码适用于没有 Listview 的简单文本视图。我不明白我做错了什么

自定义适配器

```
public class CustomAdapter extends ArrayAdapter<Avviso> {
    Context context; 

    public CustomAdapter(Context context, int textViewResourceId, List<Avviso> objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return getViewOptimize(position, convertView, parent);
    }

    public View getViewOptimize(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder = null;
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.rowcustom, null);
        viewHolder = new ViewHolder();
        viewHolder.testoavviso = (TextView)convertView.findViewById(R.id.textViewtitolo);
        convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }
        Avviso avviso = getItem(position);
        viewHolder.testoavviso.setText(avviso.getTestoavviso());
        return convertView;
    }

    private class ViewHolder {
        public TextView testoavviso;
    }
} 
```

avvisi.java

```
public class Avvisi extends Activity {
    // blog url
    static final String BLOG_URL = "http://www.miosito.com"
    ListView listView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // set layout view
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_avvisi);

        try {
            getlink task = new getlink();
            task.execute("Process started!");

            //la stringa verra passata al metodo doInBackground del nostro AsyncTask
            //per controllare lo stato del task, possiamo chiamare task.getStatus()

        } catch (Exception ex) {
            ((TextView)findViewById(R.id.avviso1)).setText("Error");
        }
    }

    private class getlink extends AsyncTask<String, String, List<Avviso>> {
        // I tre tipi da dichiarare sono relativamente (in questo caso usiamo solo stringhe)
        // il parametro in entrata di doInBackground  (quando chiamiamo execute passiamo una stringa)
        // il paramentro in entrata di onProgressUpdate (dati che vogliamo mostrare all' utente -opzionale,potremmo usare variabili globali-)
        // il parametro in entrata di onPostExecure (una volta finito il task, potremmo voler mostrare un risultato all'utente)
        // nel caso non volessimo usare parametri di alcun genere tipizziamo con Void,Void,Void (passeremo poi dei null come parametri)
        ListView listView = (ListView)findViewById(R.id.listavvisi);
        List<Avviso> avvisi = new LinkedList<Avviso>();

        @Override
        protected List<Avviso> doInBackground(String... arg) {

            // stringa passata a onProgressUpdate
            String result = "";
            Document doc = null;

            try {
                doc = Jsoup.connect(BLOG_URL).get();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Elements links = doc.select("td.AVVISI-FORMAT-DEFAULT > a[href]");
            int j=0;
            int numavvisi = links.size();
            for (Element link : links) {
                if((j %2!=0) && (j<60)) {
                    String testonews = link.text();
                    String urlavviso= link.attr("abs:href");
                    int lunghezzanews = testonews.length();

                    if(lunghezzanews<80) {
                        avvisi.add(new Avviso(testonews));
                    } else {
                        avvisi.add(new Avviso(testonews.substring(0,80)));
                    }
                } else {
                    j++;
                }
            }                    
            return avvisi;
        }

        @Override
        protected void onProgressUpdate(final String... values){

        } 

        protected void onPostExecute(List<Avviso> avvisi) {
            CustomAdapter adapter = new CustomAdapter(Avvisi.this, R.layout.rowcustom, avvisi);
            listView.setAdapter(adapter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:22:08.640

滚动条有问题。我删除了它，现在代码可以正常工作

# objective-c - 故事板/笔尖与否

> ID：14165864
> 
> 赞同：0
> 
> 时间：2013-01-04T22:14:54.137
> 
> 标签：objective-c, ios, xcode

最近我一直在想也许我应该在 XCode 中尝试 Storyboard。

我一直在 XCode 中以编程方式完成我的视图，因为我过去不太喜欢 Interface Builder。我想确切地知道我的应用程序中发生了什么，所以我从未真正使用过任何界面构建器。

所以我想听听同时使用优点和缺点的人的经验。

我喜欢以编程方式管理我所有的 UIViewControllers。但是当我设置 UIViews 时，我不得不多次运行我的模拟器来检查我是否将我的视图放置在正确的像素上。

所以我喜欢 Interface Builders，因为我可以看到我的视图将被放置在哪里。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:25:25.150

在我拥有的应用程序中，我实际上使用了两者的组合。

如果您习惯于以编程方式完成所有操作，那么您可能会发现从单独的 xib 开始会更容易。

这样做意味着 VC 的任何流程仍然像您已经在做的那样以编程方式完成。

使用 Storyboard 的主要优势是您可以使用 IB 以及每个 VC 的 UI 创建应用程序的流程。哦，您也可以在与之相关的表中创建自定义 UITableViewCells。

一旦你习惯了用 XIB 做所有事情，你应该会发现很容易转向 Storyboard 的东西。

话虽如此，并没有... 代码 < XIBs < Storyboard 的链。

他们应该被起诉以相互补充。

我已经使用 Storyboards 制作了一些应用程序，它们工作得非常出色。就在圣诞节前，我启动了另一个应用程序，该应用程序的要求使我走上了明确使用 XIB 的道路，根本没有故事板。

我还制作了大多数应用程序使用故事板的应用程序，但是某些常见的地方都使用相同的 VC 或都使用相同的 UIView 子类，对于那些我创建了自己单独的 XIB 文件的地方。

这真的取决于你在做什么，但无论哪种方式，如果你可以在代码中做到这一点，那么大多数时候它实际上更容易并且在 IB 中同样强大。

（不包括视图图纸等......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:18:15.813

新的 StoryBoard 界面非常漂亮和直观。但是，它仍然可以为您提供细粒度的控制，而无需您以编程方式完成所有操作。我认为它肯定更有效率，从我的角度来看，它可能需要大约一个小时来适应它绝对值得花时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:21:04.693

对于看到重复界面调整的应用程序，Interface Builder 为我节省了很多时间——尤其是对于那些有挑剔客户的项目。如果您已经知道如何手动编写听起来像您所做的相同的事情，那么学习曲线并不是那么陡峭。我会说去吧，你不会后悔的。我没有。

# vb.net - 在VB中按第二列对列表进行排序

> ID：14165873
> 
> 赞同：2
> 
> 时间：2013-01-04T22:15:51.690
> 
> 标签：vb.net, list, sorting, visual-studio-2012

我正在使用一个循环来构建文件名列表及其创建日期：

```
Dim datelist As New List(Of KeyValuePair(Of String, Date))
Dim values As New KeyValuePair(Of String, Date)(filename, initialdate)
    If Not datelist.Contains(values) Then
         datelist.Add(values)
    End If 
```

填充列表后，我需要在执行其他一些功能之前按日期对其进行排序。我一直在研究 orderby 或 sort 方法，但我不知道如何正确实现它们。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T22:23:00.647

这使用以下命令对原始列表进行排序而不创建新列表（如 Linq 方法） [`List.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)：

```
datelist.Sort(Function(kv1, kv2) kv1.Value.CompareTo(kv2.Value)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:20:20.043

```
Dim sorted = (From item In datelist Order By item.Value Select item).ToList 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:37:22.693

只使用一些简单的 LINQ 有什么问题？

```
 Dim orderedList As List(Of KeyValuePair(Of String, Date)) = datelist.OrderBy(Function(o) o.Value).ToList 
```

# java - 调度应用程序的 db4o 查询优化

> ID：14165877
> 
> 赞同：0
> 
> 时间：2013-01-04T22:16:07.367
> 
> 标签：java, db4o

我刚刚开始在调度应用程序中使用 db4o，我正在寻找一种有效的方法来检索在特定日期之间未预订的房间。

所以，我有一个 Room 对象的集合，每个对象都有一个 Booking 对象的集合（可以是空的）。预订具有开始日期和结束日期。我想说'获取所有在 DateA 和 DateB 之间没有预订的房间'。

我确定我可以使用本机查询来做到这一点，但由于涉及到日期范围（我的理解是日期范围没有针对 NQ 进行优化）并且我需要非常频繁地执行此查询（每秒多次可能超过 10,000房间——其中大部分没有预订）我正在寻找更有效的选择。

有没有办法用 SODA 来表达这个？还是安排我的数据模型以解决此问题的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:22:36.850

是的，您可以使用 SODA Query 来做到这一点

```
Date fromDate = null ; // assign reservation start dat
Date toDate = null ; // assign reservation upto
Query query = db.query();
query.constrain(Booking.class);
query.descend ("fromDate").constrain ( fromDate ).greater().equal ().
      and (query.descend ("toDate").constrain (toDate).smaller().equal());
ObjectSet<Booking> objectSet = query.execute(); 
```

查询**fromDate 和 toDate 之间没有预订的所有房间**

```
 Query query = db.query();
query.constrain(Room.class);
query.descend ("bookingStartDate").constrain ( fromDate ).greater().equal ().and
(query.descend ("bookingEndDate").constrain (toDate).smaller().equal()).not();
ObjectSet<Room> objectSet = query.execute(); 
```

**另请参阅：** [构建 SODA 查询](http://community.versant.com/documentation/reference/db4o-7.13-flare/java/Content/object_lifecycle/querying/soda_query/building_soda_queries.htm)

# makefile - 无需任何修改即可重建

> ID：14165879
> 
> 赞同：0
> 
> 时间：2013-01-04T22:16:14.263
> 
> 标签：makefile

我已经开始为一个库编写几个简单的测试。我目前正在尝试编写一个名为的 make 目标，该目标`btests`应该将它们全部编译。

`tests/`测试以库中的简单`.cpp`文件的形式驻留在目录中`#include`。

makefile 的任务很简单：将每个文件编译`tests/name.cpp`成`tests/name`与库链接的可执行文件。

它工作正常，除了一件事：每次我运行时`make btests`，测试都会重新编译。但是，只有在它们已更改或库本身已更改时，它们才应重新编译。

这是相关代码：

```
CC=g++
CFLAGS=-Wall

SRCPATH=source
OBJPATH=object
TESTPATH=tests

OBJ=$(OBJPATH)/nameb.o $(OBJPATH)/hebbann.o
INF=$(SRCPATH)/nameb.hpp $(SRCPATH)/hebbann.hpp
TESTS=$(TESTPATH)/test_api $(TESTPATH)/test_speed

all : libname.a

libname.a : $(OBJ)
    ar rvs libname.a $(OBJ)

$(OBJ) : $(OBJPATH)/%.o : $(SRCPATH)/%.cpp $(SRCPATH)/%.hpp
    $(CC) $(CFLAGS) -c $< -o $@

btests : $(TESTS)

$(TESTS) : % : %.cpp all
    $(CC) $(CFLAGS) $< -L. -lname -o $@

install : all
    mkdir -p /usr/include/name
    cp $(INF) /usr/include/name
    cp libname.a /usr/lib

pack : all
    mkdir -p name/
    cp $(INF) name/
    tar -cvf libname.tar name/ libname.a doc/ source/

clean :
    rm -f $(OBJPATH)/* libname.a libname.tar $(TESTS) 
```

仅当某些内容发生更改时，我如何才能强制重新编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:02:28.690

您的测试取决于`all`. 由于没有名为“all”的文件，Make 得出结论，必须重建它，依赖它的测试也必须重建。

修复很简单。规则`all`除了 require 什么都不做`libname.a`，所以只需去掉中间人：

```
$(TESTS) : % : %.cpp libname.a
    $(CC) $(CFLAGS) $< -L. -lname -o $@ 
```

# matlab - 用于创建满足约束的随机数的 Matlab 函数

> ID：14165882
> 
> 赞同：0
> 
> 时间：2013-01-04T22:16:42.923
> 
> 标签：matlab, random

作为输入，我有两个数字 x 和 y。`x>y`. 我想创建`y`它们的总和等于的完全非零随机数`x`。我知道`randi([min max])`函数。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:24:53.367

如果我做对了，你想要这样的东西：

```
data = rand(1,y);
data = data * x / sum(data); 
```

`data`将包含精确`y`的正均匀分布数，其总和等于`x`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:19:50.210

在 Matlab FEX 中查看[具有固定总和的文件随机向量生成器。](http://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum)我相信这会回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:58:39.653

Leonid 的方法肯定会生成一组具有正确总和的随机数，但它不会在允许的空间上统一选择。如果这很重要，那么可行的方法如下：

（x = 1）：

1.  在 [0,1] 上均匀生成 Y-1 个随机数。
2.  将 Y-1 数字从小到大排序。调用这些 {y1,...,y_{N-1}}
3.  将集合 {y_1-0 ,y_2-y1,...,1-y_{N-1}} == {n_1,... n_Y} 作为 Y 随机数。

这些 n_i 显然总和为 1。通过考虑给定实现 n_i 的概率，很容易证明一致性。

# c# - 加载项事件永远不会执行

> ID：14165885
> 
> 赞同：12
> 
> 时间：2013-01-04T22:16:48.930
> 
> 标签：c#, events, visual-studio-2012, add-in, envdte

我使用“Visual Studio 插件”向导创建了一个新的插件项目，现在，我正在尝试添加一些事件处理程序：

```
public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
{
    _applicationObject = (DTE2)application;
    _addInInstance = (AddIn)addInInst;

    _applicationObject.Events.BuildEvents.OnBuildBegin += BuildEvents_OnBuildBegin;
    _applicationObject.Events.BuildEvents.OnBuildDone += BuildEvents_OnBuildDone;
    _applicationObject.Events.SelectionEvents.OnChange += SelectionEvents_OnChange;
    _applicationObject.Events.DocumentEvents.DocumentOpened += DocumentEvents_DocumentOpened;
    _applicationObject.Events.DocumentEvents.DocumentSaved += DocumentEvents_DocumentSaved;
} 
```

但无论我做什么，我的处理程序都不会被执行！

我瞎了吗？我是否必须做任何其他事情来注册这些处理程序，或者为什么它不起作用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T18:11:28.290

看来你是垃圾收集器的受害者。见：[http ://www.mztools.com/articles/2005/mz2005012.aspx](http://www.mztools.com/articles/2005/mz2005012.aspx)

```
 private readonly BuildEvents _buildEvents;
 private readonly SelectionEvents _selectionEvents;
 private readonly DocumentEvents _documentEvents;
 private readonly Events _events;

 public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
 {
     _applicationObject = (DTE2)application;
     _addInInstance = (AddIn)addInInst;
     _events = _applicationObject.Events;

     _buildEvents = _events.BuildEvents;
     _buildEvents.OnBuildBegin += BuildEvents_OnBuildBegin;
     _buildEvents.OnBuildDone += BuildEvents_OnBuildDone;

     _selectionEvents = _events.SelectionEvents;
     _selectionEvents.OnChange += SelectionEvents_OnChange;

     _documentEvents = _events.DocumentEvents;
     _documentEvents.DocumentOpened += DocumentEvents_DocumentOpened;
     _documentEvents.DocumentSaved += DocumentEvents_DocumentSaved;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:15:05.407

如果您在调试器中查看 applicationObject，您会看到它是一个 COM 对象，但 xxxEvents 类不是（如果您无法让代码在 OnConnection 上中断，那么您的插件在调试时可能没有被加载，检查工具菜单）

COM 中的事件由单独的 COM 接口（在本例中为多个）在服务器 (VS) 调用以触发它们的另一个方向上处理。

尽管 COM 对象具有与 CLR 程序集类似的类型化程序集概念，但它们在内部是非托管代码，因此*不能保留托管对象的根*。

因此，尽管您可以通过与本机 CLR 事件完全相同的方式将委托与 COM 事件挂钩，但您的事件却与 RCW（运行时可调用包装器）挂钩。有一个从服务器到 RCW com 接口的 COM 引用，但是没有 CLR 根，RCW 最终会被释放，这会卸载 com 接口，之后您将不会接收任何事件。

我不确定，但我认为这通常在您使用与其事件接口直接关联的单个 COM 对象时起作用，因此这可能是由于 DTE COM 接口的结构方式所致……

无论如何，正如其他人所说，您只需要从应用程序对象中对 BuildEvents、SelectionEvents 和 DocumentEvents 类进行任何类型的托管引用来修复它。VS 的多个实例加载单独的加载项实例，因此您只需添加静态对象引用列表并将它们设置在 OnConnect 中。

[订阅 DTE 事件似乎不起作用 - 没有调用事件](https://stackoverflow.com/questions/3874015/subscription-to-dte-events-doesnt-seem-to-work-events-dont-get-called)

[http://msdn.microsoft.com/en-us/library/k639e386.aspx](http://msdn.microsoft.com/en-us/library/k639e386.aspx)

# javascript - Javascript 高度总和不匹配

> ID：14165887
> 
> 赞同：0
> 
> 时间：2013-01-04T22:16:55.480
> 
> 标签：javascript, jquery

我有一个绝对定位的 div，最初是不可见的，它显示在被单击的元素的位置，呈现其预览（预览的顶部位置与单击的元素的顶部对齐）。当被单击的元素位置较低时，预览会呈现在原始页面边框下方，并且需要滚动。我想向上移动预览以使其底部边缘位于上一页的底部限制。问题是我使用的代码没有返回页面高度的预期值（它大于预览高度和单击元素顶部位置的总和）。

这是代码：文件1：

```
jQuery('elementClicked').live('click',function(){
...
jQuery("previewDiv").setTopAtClickedElement(jQuery(this));
... 
```

}

文件 2：

```
jQuery.fn.setTopAtClickedElement = function (element) {
//original positioning    
this.css('top', element.offset().top + 'px');

// the troublesome part where the eventual correction should be done
if (element.offset().top + this.height() > jQuery(document).height())
{
    this.css('top', jQuery(document).height() - this.height() + 'px');
} 
```

}

当我按照建议使用 Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) 测量文档高度时，也会发生类似[情况关联](https://stackoverflow.com/questions/1145850/get-height-of-entire-document-with-javascript)

你对我应该如何实现这个麻烦的代码部分有什么建议吗？

如果我说的不够清楚，请指出，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:36:43.853

而不是`.height()`尝试使用 jQuery 的[outer.height() - api docs](http://api.jquery.com/outerHeight/)，它将考虑您在页面上拥有的任何填充（以及可选的marign）。

jsfiddle 或 codepen 将帮助我们解决您的问题。

# vbscript - objUser.AccountDisabled = False 未启用帐户

> ID：14165891
> 
> 赞同：1
> 
> 时间：2013-01-04T22:17:07.163
> 
> 标签：vbscript, active-directory

关于这个问题，还有一个问题，希望我能完成这个脚本

在此脚本中的“objUser.AccountDisabled = False”行，它应该启用 Active Directory 中的帐户，但它总是创建禁用的帐户。我尝试在命令后添加“objUser.SetInfo”并得到错误 (30, 2) (null)：指定的目录服务属性或值不存在。”

有没有人有任何其他想法我可以尝试启用要创建的帐户？

提前感谢您的回复。

```
Dim strCode,strID,StrFName,strLName,strFirm,strPwd,strIPGM,strServer,strLMS,strSql,strLMSV,strDisplay

trCode = "za"
strID = "zademo1"
strFName = "Demo"
strLName = "Tester"
strFirm = "Demo"
strPwd = "za1234"
strServer = "rkasp01"
strDisplay = strFName & strLName
strIPGM = "lms" & strCode

Set objOU = GetObject("LDAP://cn=users,dc=asp,dc=rippe,dc=com")

Set objUser = objOU.Create("User", "cn=" & strID)
objUser.Put "sAMAccountName", strID

objUser.Put "givenName", strFName
objUser.Put "sn", strLName
objUser.Put "displayName", strLName
objUser.Put "homedirectory", "\\rkpdc\" & strFirm & "\" & strID
objUser.Put "scriptpath", strFirm & ".bat"
objUser.SetInfo

objUser.SetPassword strPwd
objUser.Put "PasswordExpired", CLng(1)
objUser.AccountDisabled = False  <---------------
'objUser.SetInfo

Set objOU = GetObject("LDAP://cn=users,dc=asp,dc=rippe,dc=com")
Set objGroup = objOU.Create("Group", "cn=" & strFirm)
objGroup.Put "sAMAccountName", strFirm

objGroup.Add objUser.ADSPath 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T12:49:28.500

通过确保在尝试设置启用/禁用状态*之前*`objUser.SetInfo`已运行以保存对帐户的任何更改，我能够启用该帐户。

 *IE

```
objuser.setpassword "swSDD"
OBJUSER.SETINFO
objuser.AccountDisabled=False 
```

与

```
objuser.setpassword "swSDD"
objuser.AccountDisabled=False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T01:47:08.370

尝试`userAccountControl`直接修改帐户的属性。该`userAccountControl`属性是一个位掩码，每个位或标志控制诸如帐户启用/禁用状态、密码要求、密码过期状态[以及许多其他内容，记录在这里](http://support.microsoft.com/kb/305144)。

要启用帐户，您需要`XOR`屏蔽现有值中的启用/禁用标志（十六进制 0x002），如果帐户被禁用，则有效地启用该帐户。为了防止它在启用后禁用该帐户，我们可以检查该帐户是否已启用。

修改脚本示例：

```
Dim strCode,strID,StrFName,strLName,strFirm,strPwd,strIPGM,strServer,strLMS,strSql,strLMSV,strDisplay,intUAC

trCode = "za"
strID = "zademo1"
strFName = "Demo"
strLName = "Tester"
strFirm = "Demo"
strPwd = "za1234"
strServer = "rkasp01"
strDisplay = strFName & strLName
strIPGM = "lms" & strCode

Set objOU = GetObject("LDAP://cn=users,dc=asp,dc=rippe,dc=com")

Set objUser = objOU.Create("User", "cn=" & strID)
objUser.Put "sAMAccountName", strID

objUser.Put "givenName", strFName
objUser.Put "sn", strLName
objUser.Put "displayName", strLName
objUser.Put "homedirectory", "\\rkpdc\" & strFirm & "\" & strID
objUser.Put "scriptpath", strFirm & ".bat"

'removed duplicate SetInfo

objUser.SetPassword strPwd
objUser.Put "PasswordExpired", CLng(1)

'get existing value of userAccountControl
intUAC = objUser.Get("userAccountControl")
'AND the current value and the enable/disable flag (0x0002)
If intUAC AND 2 Then
    objUser.Put "userAccountControl", intUAC XOR 2
End If

'set the updated properties
objUser.SetInfo

Set objOU = GetObject("LDAP://cn=users,dc=asp,dc=rippe,dc=com")
Set objGroup = objOU.Create("Group", "cn=" & strFirm)
objGroup.Put "sAMAccountName", strFirm

objGroup.Add objUser.ADSPath 
```*

# testing - 如何在分裂和生菜测试中使用循环？

> ID：14165893
> 
> 赞同：0
> 
> 时间：2013-01-04T22:17:30.570
> 
> 标签：testing, lettuce, splinter

我想问是否可以将 for-loop 或 while-loop 与 splinter 和 lettuce BBD 测试一起使用。

我的一个场景是：我想循环一个表并更改每个条目状态，直到所有条目状态都被更改。我可以更改一个条目状态并返回表。我怎样才能在一个循环中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T13:08:47.780

需要更多细节。分裂代码是 Python 代码 - 所以 Python 的所有循环结构都是可用的。

如果您能够以列表的形式读取表格，则只需使用 for 循环遍历列表，然后进行所需的更改。

希望这可以帮助。

# php - 如何在codeigniter中从另一个控制器加载控制器？

> ID：14165895
> 
> 赞同：38
> 
> 时间：2013-01-04T22:17:31.910
> 
> 标签：php, codeigniter, hmvc

我想从另一个控制器中的函数加载控制器，因为我集成到我的项目中的库我不想将它加载到控制器，因为我想保持它的清洁和相关。

我尝试使用模块，但我仍然必须将控制器放在 url 中，比如

[http://example.com/maincontroller/function](http://example.com/maincontroller/function)
[http://example.com/othercontroller/function](http://example.com/othercontroller/function)

我有默认控制器，所以我可以加载[http://example.com/function](http://example.com/function)那么我如何从 main 的函数访问控制器，这样我就不必将控制器放在 url 中。

如果我可以从主控制器功能加载控制器功能，我仍然愿意使用 HMVC。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-03-13T15:08:47.397

是的，你可以（对于第 2 版）

在控制器中像这样加载

```
 $this->load->library('../controllers/whathever'); 
```

并调用以下方法：

```
$this->whathever->functioname(); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-04T22:32:26.340

您不能从 CI 中的控制器加载控制器 - 除非您使用 HMVC 或其他东西。

你应该考虑一下你的架构。如果您需要从另一个控制器调用控制器方法，那么您可能应该将该代码抽象到帮助程序或库中，并从两个控制器中调用它。

**更新**

再次阅读您的问题后，我意识到您的最终目标不一定是 HMVC，而是 URI 操作。如果我错了，请纠正我，但似乎您正在尝试以第一部分为方法名称来完成 URL，而完全省略了控制器名称。

如果是这种情况，您可以通过[对路线进行创意](http://ellislab.com/codeigniter/user-guide/general/routing.html)来获得更清洁的解决方案。

对于一个非常基本的示例，假设您有两个控制器，`controller1`并且`controller2`. `Controller1`有一个方法`method_1`- 并且`controller2`有一个方法`method_2`。

您可以像这样设置路线：

```
$route['method_1'] = "controller1/method_1";
$route['method_2'] = "controller2/method_2"; 
```

然后，您可以使用类似的 URL 调用方法 1，`http://site.com/method_1`使用`http://site.com/method_2`.

尽管这是一个硬编码的、非常基本的示例 - 但如果您需要做的只是从 URL 中删除控制器，它可以让您到达您需要的位置。

* * *

您也可以[重新映射您的控制器](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)。

来自文档：“如果您的控制器包含一个名为 _remap() 的函数，无论您的 URI 包含什么，它都会被调用。”：

```
public function _remap($method)
{
    if ($method == 'some_method')
    {
        $this->$method();
    }
    else
    {
        $this->default_method();
    }
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-05T05:30:27.143

您不能直接从另一个控制器调用控制器方法

我的解决方案是使用继承并从库控制器扩展您的控制器

```
class Controller1 extends CI_Controller {

    public function index() {
        // some codes here
    }

    public function methodA(){
        // code here
    }
} 
```

在您的控制器中，我们称之为它将`Mycontoller`扩展`Controller1`

```
include_once (dirname(__FILE__) . "/controller1.php");

class Mycontroller extends Controller1 {

    public function __construct() {
        parent::__construct();
    }

    public function methodB(){
        // codes....
    }
} 
```

你可以从 mycontroller 调用 methodA

[http://example.com/mycontroller/methodA](http://example.com/mycontroller/methodA)

[http://example.com/mycontroller/methodB](http://example.com/mycontroller/methodB)

这个解决方案对我有用

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-24T15:37:27.703

我有一个类似的问题。我想要两个控制器：

homepage.php - 面向公众的主页

home.php - 用户登录后的主屏幕

我希望他们都从“mydomain.com”中读取

我可以通过在我的路由配置中将“hompepage”设置为默认控制器并向 homepage.php 添加一个重映射函数来实现这一点

```
function _remap()
{
  if(user_is_logged_in())
  {
    require_once(APPPATH.'controllers/home.php'); 
    $oHome =  new Home();
    $oHome->index();
  }
  else
  {
    $this->index();
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-03T06:07:43.377

我在尝试各种方法时遇到会话文件未找到错误，最终实现了这样。将函数设为静态（我想在另一个控制器中调用），并调用如下

```
require_once('Welcome.php');
Welcome::hello(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-04T08:59:07.697

虽然上述方法可能有效，但这是一个非常好的方法。

使用 MY 控制器扩展核心控制器，然后将此 MY 控制器扩展为所有其他控制器。例如，您可以：

```
class MY_Controller extends CI_Controller {
    public function is_logged()
    {
        //Your code here
    }
public function logout()
    {
        //Your code here
    }
} 
```

然后您的其他控制器可以将其扩展如下：

```
class Another_Controller extends MY_Controller {
    public function show_home()
    {
         if (!$this->is_logged()) {
           return false;
         }
    }
public function logout()
    {
        $this->logout();
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-10T05:18:08.567

您可以通过多种方式将一个控制器访问到另一个控制器。

```
class Test1 extends CI_controller
{
    function testfunction(){
        return 1;
    }
} 
```

然后创建另一个类，并在其中包含第一个类，并用您的类扩展它。

```
include 'Test1.php';

class Test extends Test1
{
    function myfunction(){
        $this->test();
        echo 1;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-17T17:19:08.057

我来到这里是因为我需要`{{ render() }}`在 Twig 中创建一个函数来模拟 Symfony2 的行为。从视图中渲染控制器对于显示独立的小部件或 ajax 可重新加载的东西来说真的很酷。

即使你不是 Twig 用户，你仍然可以使用这个助手并在视图中使用它来渲染控制器，使用`<?php echo twig_render('welcome/index', $param1, $param2, $_); ?>`. 这将回显您的控制器输出的所有内容。

这里是：

`helpers/twig_helper.php`

```
<?php

if (!function_exists('twig_render'))
{

    function twig_render()
    {
        $args = func_get_args();
        $route = array_shift($args);
        $controller = APPPATH . 'controllers/' . substr($route, 0, strrpos($route, '/'));

        $explode = explode('/', $route);
        if (count($explode) < 2)
        {
            show_error("twig_render: A twig route is made from format: path/to/controller/action.");
        }

        if (!is_file($controller . '.php'))
        {
            show_error("twig_render: Controller not found: {$controller}");
        }
        if (!is_readable($controller . '.php'))
        {
            show_error("twig_render: Controller not readable: {$controller}");
        }
        require_once($controller . '.php');

        $class = ucfirst(reset(array_slice($explode, count($explode) - 2, 1)));
        if (!class_exists($class))
        {
            show_error("twig_render: Controller file exists, but class not found inside: {$class}");
        }

        $object = new $class();
        if (!($object instanceof CI_Controller))
        {
            show_error("twig_render: Class {$class} is not an instance of CI_Controller");
        }

        $method = $explode[count($explode) - 1];
        if (!method_exists($object, $method))
        {
            show_error("twig_render: Controller method not found: {$method}");
        }

        if (!is_callable(array($object, $method)))
        {
            show_error("twig_render: Controller method not visible: {$method}");
        }

        call_user_func_array(array($object, $method), $args);

        $ci = &get_instance();
        return $ci->output->get_output();
    }

} 
```

特定于 Twig 用户（将此代码调整到您的 Twig 实现）：

`libraries/Twig.php`

```
$this->_twig_env->addFunction('render', new Twig_Function_Function('twig_render')); 
```

`Usage`

```
{{ render('welcome/index', param1, param2, ...) }} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-30T02:51:27.160

使用我在下面创建的代码创建一个助手并将其命名为 controller_helper.php。

将您的助手自动加载`autoload.php`到`config`.

从您的方法调用`controller('name')`加载控制器。

请注意，这`name`是控制器的文件名。

此方法将附加`'_controller'`到您的控制器`'name'`。要在控制器中调用方法，只需`$this->name_controller->method();`在如上所述加载控制器后运行。

```
<?php

if(!function_exists('controller'))
{
    function controller($name)
    {
        $filename = realpath(__dir__ . '/../controllers/'.$name.'.php');

        if(file_exists($filename))
        {
            require_once $filename;

            $class = ucfirst($name);

            if(class_exists($class))
            {
                $ci =& get_instance();

                if(!isset($ci->{$name.'_controller'}))
                {
                    $ci->{$name.'_controller'} = new $class();
                }
            }
        }
    }
}
?> 
```

# excel - matlab，如何将文本和数值数据导出到excel csv文件？

> ID：14165903
> 
> 赞同：4
> 
> 时间：2013-01-04T22:17:59.933
> 
> 标签：excel, matlab, text, csv, export

当我使用下面的代码时。我正确导出了数字数据，但是当每列的第一行应该有标题（标题）时，第一行是空白的。有什么解决办法吗？

```
clc 
clear

filename = 'file.csv'; 
fileID = fopen(filename,'wt');
%**************************************************************************
%Sample data (note sample data are transposed row, i.e. columns) 

sample1 = [1,2,3,4]';
sample2 = [332.3, 275.8, 233.3, 275]';
sample3 = [360, 416.7, 500, 360]';
sample4= [-0.9, -0.9, -0.9, -0.9]';
sample5 = [ 300000, 0, 0, 0]';

A ={'text1','text2', 'text3', 'text4', 'text5'}; %'

%***************************************************************************
%write string to csv

[rows, columns] = size(A);
for index = 1:rows    
    fprintf(fileID, '%s,', A{index,1:end-1});
    fprintf(fileID, '%s\n', A{index,end});
end 

fclose(fileID);

%***************************************************************************
%write numerical data to csv

d = [sample1, sample2, sample3, sample4, sample5];

csvwrite(filename, d, 1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:49:27.727

您在写入数字数据时正在擦除字符串，只运行您的脚本到数字数据 - 它工作正常。只需切换操作顺序——先写数字，再写字符串，就可以了。

编辑：上面的解决方案不起作用，因为写入字符串会覆盖以前写入的数字数据，更简单和更直观的解决方案是替换

```
csvwrite(filename, d, 1); 
```

经过

```
dlmwrite(filename, d,'-append', 'delimiter', ','); 
```

在原始示例中

# ruby-on-rails - 链接 Active Record 方法错误

> ID：14165908
> 
> 赞同：0
> 
> 时间：2013-01-04T22:18:34.143
> 
> 标签：ruby-on-rails, activerecord

我在搜索表单中使用了以下代码。我希望能够将作用域方法与 by_title 链接起来，但我看不到如何。我想将 by_title 作为一种方法，而不仅仅是这样做：

```
# Arel helpers
  class << self
    def by_city(city)
      where(['city_id = ?', city])
    end
    def by_title(title)
      where('title LIKE ?', "%#{title}%")
    end
  end

  def self.search(search_params)
    experiences = scoped
    experiences.self.by_title(search_params[:title]) if search_params[:title]
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:42:57.550

你为什么不这样玩范围：

```
scope :by_title, lambda { |title| where('title LIKE ?', "%#{title}%") }
scope :by_city,  lambda { |city|  where('city_id = ?', city) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:35:18.100

通过删除`self`它应该可以工作，我认为：

```
experiences = scoped
experiences.by_title(search_params[:title]) if search_params[:title] 
```

该`scoped`方法返回一个匿名范围，可以与其他范围/类方法链接。

# android - 安卓标签滑动

> ID：14165909
> 
> 赞同：0
> 
> 时间：2013-01-04T22:18:34.920
> 
> 标签：android, tabs, swipe

这可能是一个非常幼稚的问题，但在过去的几天里，这一直让我发疯。我目前有一个有 3 个标签的应用程序。我想更新它，以便您可以左右滑动来查看每个选项卡（而不是触摸每个选项卡）。我找到了很多这样做的方法，但我仍然很困惑。我被告知要实现一个带有选项卡和片段的操作栏，并且我找到了使用页面查看器的其他来源。无论哪种方式，这一直是我的眼中钉，无法找到我需要的东西。有没有关于使用标签进行基本的左右滑动的好的文档？如果这个问题对其他人重复，我感到非常抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:20:09.460

我真的认为 ViewPager （如此处所述：[http](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html) ://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html ）最适合您。

是的，它涉及片段。

# ajax - 实时股票研究 - 使用 Ajax 和 PHP 或 Socket.io 和 Node.js 或者可能是 Flash 或 Ruby on Rails

> ID：14165913
> 
> 赞同：1
> 
> 时间：2013-01-04T22:18:54.017
> 
> 标签：ajax, node.js, socket.io, ticker, news-ticker

我正在做一个项目，我将尝试比较创建实时代码的不同方法（新闻代码或运动代码）。我还想做基准测试，比如有多少连接用户或数据来得有多快。

我用谷歌搜索，发现通常代码是在 PHP 中构建的，作为服务器，客户端每 30 秒有一个 ajax 调用，这将返回新的数据。另一种方法是使用 websockets (socket.io) 和 node.js！有了这两个，我已经工作并进行了实验！

但是还有其他构建代码的方法吗？

显然，您可以用 php 替换任何服务器端语言，但服务器向客户端发送数据的其他方式是什么？

也许与 Flash ？还是 Ruby on Rails？

如果有人能指出常用的自动收报机方式以及现代方式或快速方式，那将会有所帮助。然后我将选择其中两个并进行比较！

如果有人知道有关此主题的好文章或链接，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:42:13.830

我认为这真的取决于您的要求（更新率等）。我的意思是，如果您每天只更新几次新闻，那么如果您保持一个 Websocket 是免费开放的，您将会有一些开销。如果您每 30 秒或类似的时间请求数据，所有服务器技术都会做同样的事情，这是一个典型的 ajax 调用。您是否考虑过使用已经构建的东西，例如[Jquery News Ticket](http://www.jquerynewsticker.com/)

# c# - 如果我检查数据库的内容，应用程序会抛出错误

> ID：14165914
> 
> 赞同：1
> 
> 时间：2013-01-04T22:18:54.473
> 
> 标签：c#, entity-framework, entity-framework-4.1

我似乎遇到了实体框架代码优先的问题。我设法让它在我的项目文件夹中创建数据库，`App_data`如果我不尝试在服务器资源管理器中检查生成的数据库的内容，一切都会运行良好。

如果我这样做并尝试打开应用程序，我会收到此错误：

> *无法打开登录请求的数据库“SellCars”。登录失败。
> 用户“Aly-PC\Aly”登录失败。*

虽然这种行为可能是正常的（不太确定），但即使我在服务器资源管理器中分离数据库并关闭连接并运行此应用程序，它仍然无法正常工作，而是会引发此错误：

> *一个或多个文件与数据库的主文件不匹配。如果您尝试附加数据库，请使用正确的文件重试该操作。如果这是现有数据库，则文件可能已损坏，应从备份中恢复。
> 无法打开登录请求的数据库“SellCars”。登录失败。
> 用户“Aly-PC\Aly”登录失败。
> 日志文件“D:\Projects IDE\Visual Studio\MyWork\Websites\SellCars\SellCars\App_Data\SellCars.ldf”与主文件不匹配。它可能来自不同的数据库，或者之前可能已重建日志*

这是我的连接字符串：

```
 <add name="CarsEntities" 
      connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename='D:\Projects IDE\Visual Studio\MyWork\Websites\SellCars\SellCars\App_Data\SellCars.mdf';Initial Catalog=SellCars;Integrated Security=True;User Instance=True" 
      providerName="System.Data.SqlClient" /> 
```

我不尝试更改数据库内部的任何内容，甚至不添加任何数据，但我仍然收到这些错误。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:24:45.077

添加`Aly-PC\Aly`可以访问 SQL 服务器的活动目录用户。然后将刚刚创建的 SQL Server 登录名添加到数据库中。

# .htaccess - Apache2 重写规则不起作用

> ID：14165915
> 
> 赞同：2
> 
> 时间：2013-01-04T22:18:57.403
> 
> 标签：.htaccess, mod-rewrite, apache2

我正在尝试使用 .htaccess 中的代码（在线找到的代码）从我的网址中删除 .html 扩展名。

```
Options +FollowSymLinks

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

它不工作。我发现一个帖子说用它来测试是否启用了 mod-rewrite：`/usr/local/apache/bin/httpd -D DUMP_MODULES | grep rewrite`

它返回：

```
Syntax OK
 rewrite_module (static) 
```

错误日志中没有任何内容。如果重要的话，这是在带有 WHM 和 cPanel 的服务器上。我的其他 .htaccess 指令正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:29:54.890

您的代码与您要完成的工作完全相反。正确的代码是：

```
Options +FollowSymLinks

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:14:29.670

如果您请求现有的 html 文件，这些条件将阻止规则执行任何操作：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

因为他们说，如果请求的文件不存在并且不是目录...并且当您请求 html 文件时，它将无法通过`-f`测试。所以规则什么都不做。

您想匹配实际请求之类的内容：

```
RewriteCond %{THE_REQUEST} \ /([^.]+)\.html($|\ |\?)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ /%1 [L,R=301] 
```

这会将现有 HTML 文件的请求重定向到相同的路径，但减去扩展名。然后你可以在内部重写它：

```
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ /$1.html [L] 
```

# jquery - jQuery - innerText 以中断的选择器开头

> ID：14165917
> 
> 赞同：5
> 
> 时间：2013-01-04T22:19:01.257
> 
> 标签：jquery, html

刚从jQuery 1.3.2 升级到1.8.2，发现在1.3.2 中工作的几个函数不再工作了。其中大部分我已经修复，但坚持这个：

我需要根据表格单元格中的前几个字符进行搜索（“开始于”搜索），但此代码在最新版本的 jQuery 中不再适用：

```
var matchingElements = $("#tblSelect1>tbody>tr>td:first-child[innerText^='" + text + "']"); 
```

我怀疑这与过去像属性一样工作的一些东西现在改为属性这一事实有关 - innerText 是一个属性（我认为），因此它可能与属性以选择器表示法开头不兼容：`[attr^='value']`

我不想使用`:contains`，因为我只想要其 innerText 以搜索开头的元素`text`

想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:22:35.660

你可以使用`filter`方法。`innerText`是一个非标准*属性*，不适用于 Firefox，为了支持所有主要浏览器，您应该检查这两个属性，或者使用`text`跨浏览器的 jQuery 方法。

```
var $matchingElements = $("#tblSelect1 > tbody > tr > td").filter(function(){
      var c = this.textContent || this.innerText;
      return c.indexOf(text) === 0
}); 
```

# python - 使用 Python 生成 Amazon S3 CORS 签名

> ID：14165921
> 
> 赞同：2
> 
> 时间：2013-01-04T22:19:20.760
> 
> 标签：python, cordova, amazon-s3, hashlib

我花了很长时间让 S3 通过 PhoneGap (Cordova) FileTransfer.upload() 生成的 CORS POST 请求接受上传。任何关于我可能遗漏的建议将不胜感激。目前，我使用下面的代码收到 403 AccessDenied 响应。我已经多次与 S3 的文档进行比较，但无法找出问题所在。

这是生成签名的 Python 代码：

```
# Create policy document for S3.
policy_obj = {"expiration": "2014-01-01T00:00:00Z",
  "conditions": [ 
    {"bucket": "<my.bucket.name>"}, 
    ["starts-with", "$key", "story_"],
    {"acl": "public-read"},
    ["eq", "$Content-Type", "audio/mp4"],
    ["content-length-range", str(0), str(2097152)]
  ]
}

policy = base64.b64encode(json.dumps(policy_obj))

# Create signature for S3
signature = base64.b64encode(
    hmac.new(
        key=app.config['AWS_SECRET_KEY'], 
        msg=policy, 
        digestmod=hashlib.sha1
    ).digest()
) 
```

此过程生成的签名与[S3 签名测试](http://aws.amazon.com/code/199)器生成的签名匹配（将 base64 策略转换为十六进制，然后使用密钥通过签名测试器运行）。

生成的策略和签名将传递给客户端，并且使用此 PhoneGap FileTransfer 调用构建对 S3 的请求：

```
// Upload file to Amazon S3
// r is the response object generated by Python
var options = new FileUploadOptions();
options.chunkedMode = false;
options.mimeType="audio/mp4";
options.fileKey='file';
options.fileName='story_' + uniqueKey + '.m4a';
options.params={
    "key": "${filename}",
    "acl": "public-read",
    "AWSAccessKeyId": r.aws_access_key,
    "Policy": r.policy,
    "Signature": r.signature,
};

var ft = new FileTransfer();
ft.upload(path, "http://<my.bucket.name>.s3.amazonaws.com/", uploadSuccess, uploadFail, options); 
```

这是 CORS 配置（是的，我计划在上传正常后将其锁定）：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

这是存储桶策略：

```
{
    "Version": "2008-10-17",
    "Id": "Policy1356975063803",
    "Statement": [
        {
            "Sid": "Stmt1357234455973",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::<my.bucket.name>/*"
        },
        {
            "Sid": "Stmt1356975061658",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::293855469575:root"
            },
            "Action": "s3:*",
            "Resource": "arn:aws:s3:::<my.bucket.name>"
        }
    ]
} 
```

**更新：**

这是 Python 将对象转换为 JSON 后策略本身的样子：

```
{
  "conditions": [
    {
      "bucket": "<my.bucket.name>"
    }, 
    [
      "starts-with", 
      "$key", 
      "story_"
    ], 
    {
      "acl": "public-read"
    }, 
    [
      "eq", 
      "$Content-Type", 
      "audio/mp4"
    ], 
    [
      "content-length-range", 
      "0", 
      "6291456"
    ]
  ], 
  "expiration": "2014-01-01T00:00:00Z"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:44:29.293

您是否尝试在策略中删除换行符？

这是策略的 Ruby 代码，由[s3_file_upload](https://github.com/waynehoover/s3_direct_upload)提供：

```
Base64.encode64(policy_data.to_json).gsub("\n", "") 
```

如果您设法让您的上传工作，请告诉我，因为我正在尝试做同样的事情。

# jquery - jquery masonry 在 ie9 中不起作用：初学者

> ID：14165922
> 
> 赞同：0
> 
> 时间：2013-01-04T22:19:23.720
> 
> 标签：jquery, internet-explorer-9, responsive-design, jquery-masonry

我才刚刚开始，所以我不确定为什么这不起作用，但我正在尝试使用 jquery masonry。这似乎适用于 FF 但不适用于 IE9？

标记

```
<div id="content-wrapper">
    <div>Here Goes..</div>
    <div id="list">
        <div class="tile" style="height: 14em;"></div>
        <div class="tile" style="height: 26em;"></div>
        <div class="tile" style="height: 8em;"></div>
        <div class="tile" style="height: 14em;"></div>
        <div class="tile" style="height: 8em;"></div>
        <div class="tile" style="height: 18em;"></div>
        <div class="tile" style="height: 16em;"></div>
        <div class="tile" style="height: 12em;"></div>
    </div>
</div> 
```

CSS：

```
body
        {
            background-color: #545e5d;
            padding: 3.75em 1.875em;
        }
        strong
        {
            font-weight: 700;
        }
        h1
        {
            font-size: 1.625em;
            font-style: italic;
            letter-spacing: -0.1em;
            text-align: center;
            margin-bottom: 1.875em; 
        }
            h1,
            h1 a
            {
                color: #fff;
                color: rgba( 255, 255, 255, .5 );
            }
                h1 a:hover
                {
                    color: #fff;
                }

        #wrapper
        {
            max-width: 60em;
            margin: 0 auto;
        }
            #list
            {
                width: 103.125%; 
                overflow: hidden;
                margin-left: -1.562%;
                margin-bottom: -1.875em; 
            }
                .tile
                {
                    width: 30.303%; 
                    background-color: #fff;
                    background-color: rgba( 255, 255, 255, .5 );
                    float: left;
                    margin: 0 1.515% 1.875em; 
                    background-color:#353535;
                }

        @media only screen and ( max-width: 40em ) 
        {
            .tile
            {
                width: 46.876%; 
                margin-bottom: 0.938em; 
            }
        }

        @media only screen and ( max-width: 20em ) 
        {
            #list
            {
                width: 100%;
                margin-left: 0;
            }
                .tile
                {
                    width: 100%;
                    margin-left: 0;
                    margin-right: 0;
                }
        } 
```

js：

```
$( window ).load( function()
    {
    var columns    = 3,
        setColumns = function() { columns = $( window ).width() > 640 ? 3 : $( window ).width() > 320 ? 2 : 1; };

    setColumns();
    $( window ).resize( setColumns );

    $( '#list' ).masonry(
    {
        itemSelector: '.item',
        columnWidth:  function( containerWidth ) { return containerWidth / columns; }
    });
}); 
```

正如我所说，我只是在学习这一点，并想知道我错过了什么。[我在这里](http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout)找到了这个概念。

赞赏。

编辑：对不起错字。这似乎在 IE9 中不起作用，但我已经读过它应该可以，并且提供的演示站点可以让它在 IE9 中工作。如果我查看他的源代码，就会有一个额外的 ie.js 正在进行，我想知道是否还有一些我不知道的额外内容可以让砌体在 IE9 中工作。我会想，因为它是一个 jquery 插件，它已经不应该了吗？只是试图理解这一点。

应该澄清一下，道歉：不工作我的意思是div应该居中，两边的宽度均匀，然后响应。当我在 IE 中打开时，无论屏幕大小如何，所有 div 都在左侧水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:11:30.370

这很糟糕（尴尬），但我只是打错了文档类型....无效。正如我所说，我是初学者。

# python - 在python中具有多重继承的MRO

> ID：14165923
> 
> 赞同：2
> 
> 时间：2013-01-04T22:19:31.847
> 
> 标签：python, multiple-inheritance, method-resolution-order

在[Python 网页](http://docs.python.org/2/tutorial/classes.html#multiple-inheritance)上的文档中，python 中经典类的方法解析顺序被描述为深度优先从左到右搜索。我试图用这段代码对此进行测试：

```
class A(object):
def __init__(self):
    print "Initialized A"

class B(A):
    def test():
        print "Initialized B"

class C(A):
    def __init__(self):
        print "Initialized C"

class D(B, C):
    def __init__(self):
        super(D, self).__init__()
        print "Initialized D" 
```

当我创建对象 D 的实例时：

```
D() 
```

我得到结果：

```
Initialized C
Initialized D 
```

虽然我期望打印“Initialized A”、“Initialized D”，因为 MRO 是深度优先的，但首先在 B 中搜索初始化，当未找到时（就是这种情况），它应该在层次结构中更深入并寻找B（即A）的基类中的函数。有人可以解释一下为什么我得到 C 的 init 函数而不是 A 的那个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:20:23.250

MRO`D`为：

```
print(D.mro())
[<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <type 'object'>] 
```

所以

```
super(D, self).__init__() 
```

在after`__init__`的第一个类中寻找一个方法。由于没有，因此它会在 中查找方法。它发现，因此`self.__class__.mro()``D``B``__init__``__init__``C``C.__init__`

```
super(D, self).__init__() 
```

来电`C.__init__(self)`。

请注意，`super`不是试图访问`getattr(B, __init__)`. 相反，它正在寻找`'__init__'`in `B.__dict__`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T22:21:21.463

您的类继承自`object`经典类，因此不是经典类。这是一门新式的课。（任何继承自新式类的类也是新式类。）

请注意，`super`无论如何都不能与经典类一起使用。您引用的“深度优先从左到右”规则只是当您尝试访问未在实例上直接定义的属性时搜索顺序基类的属性查找规则。经典类不提供这样的 MRO —— 如果不显式引用特定的超类，就无法访​​问属性的“超类值”。

# javascript - jquery is(" :focus" ) 在 safari 中不起作用。此 IF($(this).parents('form').find('.back').is( ":focus" ) ) 的任何解决方案

> ID：14165928
> 
> 赞同：2
> 
> 时间：2013-01-04T22:19:45.623
> 
> 标签：javascript, jquery, jsp, safari, focus

我正在使用 jQuery，我的 common.js 文件中有这段代码。

当用户在页面上的任意位置按下 enter 时，此代码会触发`submit`or按钮。`next`

我为`Cancel`和`Submit`按钮使用了两个不同的 CSS 类，它们是`.btn`类，所有`Next`按钮都使用`.back`该类。

此代码适用于 Internet Explorer、FireFox 和 Chrome。只有 Safari 让我很难受。当用户关注`Cancel`并按下`Enter`它时，它会提交表单而不是取消它。

有人对此有解决方案吗？我尝试了很多东西，但没有任何效果。

如果您有特定于 Safari 的解决方案或适用于所有浏览器的解决方案，请告诉我，因为现在我无法更改我的 JSP 代码。

先感谢您。

```
// Common.js

$("form *").live('keypress', function (e) {
    if ($(this).parents('form').find('button[type=submit].btn, input
type=submit].btn').length <= 0) {
        return true;
    }
    if ($(this).parents('form').find('textarea').is(":focus")) {
        alert(' Function Call ');
        return true;
    } * * *
    if ($(this).parents('form').find('.back').is(":focus")) {
        return true;
    } * * *
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
        $(this).parents('form').find('button[type=submit].btn, input
[type=submit].btn').click();
        return false;
    }
});

// test.jsp
<div class="back-link">  
    <div class="back-btn-wrap">              
        <html:cancel styleClass="back" onclick="bCancel=true">cancel</html:cancel>
    </div>
    <div class="btn-wrap">        
        <html:submit styleClass="btn" property="submitNext"> Submit / Next</html:submit>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:32:19.303

如果你只是想弄清楚哪个元素有焦点，你可以使用...

```
$(document.activeElement) 
```

如果您不确定版本是否为 1.6 或更低，您可以在`:focus`缺少选择器时添加选择器...

```
(function ( $ ) {
    var filters = $.expr[":"];
    if ( !filters.focus ) { 
        filters.focus = function( elem ) {
           return elem === document.activeElement && ( elem.type || elem.href );
        };
    }
})( jQuery ); 
```

# eclipse - 通过 Ant 运行 JUnit，并尝试在 Jenkins 中配置 Cobertura 代码覆盖率。

> ID：14165934
> 
> 赞同：1
> 
> 时间：2013-01-04T22:20:07.263
> 
> 标签：eclipse, ant, junit, jenkins, cobertura

所以我在 Eclipse 中有一个 java 项目。我通过ant构建war文件。我可以从 Eclipse、命令行或 Jenkins 调用它。我正在设置环境是一种尝试并保持所有这三种构建方式工作的方式，并且尽可能少地改变环境来实现它。

所以我目前正在通过我的 ant build.xml 进行编译、创建战争、生成 javadoc 和运行 junit

尝试将 Cobertura 代码覆盖率添加到组合中。

我已经为 Cobertura 安装了 Jenkins，现在我正在尝试让 junit 运行以与 Cobertura 一起工作，以正确检测类并生成覆盖文件。

cobertura 文档说首先定义任务如下。

```
<property name="cobertura.dir" value="C:/javastuff/cobertura" />

<path id="cobertura.classpath">
    <fileset dir="${cobertura.dir}">
        <include name="cobertura.jar" />
        <include name="lib/**/*.jar" />
    </fileset>
</path>

<taskdef classpathref="cobertura.classpath" resource="tasks.properties" /> 
```

显然不喜欢那个 C:\ ...我需要一个有效的 cobertura.dir ...但如何配置它并不是很明显。Jenkins 将插件的所有类放在这里

.jenkins/插件/cobertura

而这下面的文件结构如下。

drwxrwxr-x 2 vpbuild vpbuild 4096 1 月 4 日 10:42 图像 drwxrwxr-x 3 vpbuild vpbuild 4096 12 月 15 日 12:36 META-INF -rw-rw-r-- 1 vpbuild vpbuild 0 Jan 4 10:41 .timestamp drwxrwxr-x 4 vpbuild vpbuild 4096 12 月 15 日 12:36 WEB-INF

因此，如果这是我的 cobertura.dir，则此处没有定义 lib 子目录。WEB-INF 中有，但那里没有 cobertura 罐子……所以看起来都不对。

我还单独下载了 cobertura jar，并将其放在 ANT_HOME/lib 中，希望有助于使 cobertura 任务对 ANT 更可见，但不确定这将如何影响我需要执行的 build.xml。

任何人都有任何配置 cobertura 的经验，以便它可以通过 ant 以这种方式在 jenkins 内外运行？build.xml 需要是什么样子才能实现它？

-吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:26:43.800

Jenkins Cobertura 插件仅处理和显示您的代码覆盖率结果；它不包括 Cobertura 工具本身。

您应该下载[最新的 Cobertura 二进制文件](http://cobertura.sourceforge.net/download.html)并将它们解压到您的 C:\javastuff\cobertura 目录中。然后，您将拥有 cobertura.jar 和一个 lib 子目录，其中包含进入 cobertura.classpath 的其他必需依赖项。

# graph - Pregel BSP：用户输入的分区和分配之间的区别

> ID：14165938
> 
> 赞同：0
> 
> 时间：2013-01-04T22:20:14.690
> 
> 标签：graph, parallel-processing

pregel 论文提到：

> a) Pregel 库将一个图划分为多个分区，每个分区由一组顶点和所有这些顶点的出边组成... **master 确定该图将具有多少个分区，并将一个或多个分区分配给每个工作机器**.

和

> b) **master 将用户输入的一部分分配给每个 worker**。输入被视为一组记录，每个记录包含任意数量的顶点和边。**输入的划分与图本身的划分正交，通常基于文件边界**。

我在这里有两个问题：

1）在b）中，master如何将“用户输入的一部分分配给每个worker”与“为每个worker机器分配一个或多个分区”不同。它们有不同的功能吗？我认为我们必须弄清楚我们的分区，然后将一个或多个分区提供给工作机器，仅此而已。我错过了什么？

2）如果输入的划分完全基于文件边界，这是否意味着分区的顶点可以驻留在不同的机器上？（因为分区的两个顶点可能驻留在不同的文件上，因此由不同的工作机器处理）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T15:58:42.013

**问题一：**

master 将用户输入分配给每个 worker 与将一个或多个分区分配给每个 worker 机器相同。

用户输入将是一个图表。该图将被分成几个分区。这些分区将在工作人员之间拆分。工作人员是要处理分区的地方。它们可能包含一个或多个分区。分区包含顶点。实体中的分区选择活动顶点并运行它们的超步计算。

**问题2：**

不。分区内的所有顶点都在同一个工作人员内。如果一个顶点将被转移到另一台机器（因此另一个工人），它将改变到另一个分区。

# c# - 如何在停靠在顶部的面板中并排显示两个标签控件？

> ID：14165943
> 
> 赞同：1
> 
> 时间：2013-01-04T22:20:31.847
> 
> 标签：c#, winforms

我有一个`Panel`名为`dockTop`. 我添加了两个标签来表示`Panel`。我希望标签从左到右流动。这类似于人们对`div`css 设置为的期望结果`float: left`......只是这是 winforms。

我有

```
 //I want DockStyle.Left, but that causes both controls to be of height, width = 0,0
   dockTop.Controls.Add(new Label() { Text = "one", Dock = DockStyle.Top });
   dockTop.Controls.Add(new Label() { Text = "two", Dock = DockStyle.Top }); 
```

Dock Top 工作正常，但这不是我想要的。如何在设置为 Dock Top 的面板中从左到右显示彼此相邻的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:06:37.623

您必须通过设置位置自己放置它们。如果需要，适当地设置锚属性。或者，您可以使用 TableLayoutPanel 而不是 Panel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:28:31.310

您必须设置`Dock`为`DockStyle.Top`和`DockStyle.Left`

```
 dockTop.Controls.Add(new Label {Text = "one", Dock = DockStyle.Top | DockStyle.Left });
   dockTop.Controls.Add(new Label { Text = "two", Dock = DockStyle.Top | DockStyle.Left }); 
```

![在此处输入图像描述](../Images/e4f23b5688b7151db33ebb5bcbb6ee6b.png)

或者你可以`AutoSize`使用`DockStyle.Left`

```
 dockTop.Controls.Add(new Label {Text = "one", Dock = DockStyle.Left, AutoSize=true });
   dockTop.Controls.Add(new Label { Text = "two", Dock =  DockStyle.Left, AutoSize = true}); 
```

![在此处输入图像描述](../Images/2cf3871da3fdf7a5494de911556f55e5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T23:50:20.250

我使用`Resize`事件来完成这个任务。我希望它会帮助你。

```
static class Program
{
    static Label label1;
    static Label label2;
    static Form form1;
    static Rectangle rectForm;
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        form1 = new Form();
        rectForm = form1.ClientRectangle;
        Panel dockTopPanel = new Panel {Height = 100, Dock = DockStyle.Top, BackColor = Color.White };
        label1 = new Label { Text = "Label1", Dock = DockStyle.Left, BackColor = Color.Red, Width = rectForm.Width / 2 };
        label2 = new Label { Text = "Label2", Dock = DockStyle.Right, BackColor = Color.Blue, Width = rectForm.Width / 2 };
         label2.BringToFront();
        Control[] labels= {label1, label2};
        dockTopPanel.Controls.AddRange(labels);
        form1.Controls.Add(dockTopPanel);
        form1.Resize += new EventHandler(form1_Resize);
        Application.Run(form1);
    }

    static void form1_Resize(object sender, EventArgs e)
    {
        rectForm = form1.ClientRectangle;
        label1.Width = (rectForm.Width / 2) + 1;
        label2.Width = (rectForm.Width / 2) + 1;
    }
} 
```

# android - 为什么我会收到 CursorIndexOutOfBoundsException？

> ID：14165947
> 
> 赞同：0
> 
> 时间：2013-01-04T22:20:54.633
> 
> 标签：android, sql, database, sqlite

我认为我`Cursor`不太了解我几乎可以肯定我的代码可能是错误的，所以我将链接我的整个代码

```
package com.tanukiproductions.battleforchristmas;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class SQLiteTable {

public static final String KEY_ROWID = "_id";
public static final String KEY_LEVEL = "level";
public static final String KEY_HEALTH = "health";
public static final String KEY_NAME = "name";
public static final String KEY_CRIT = "crit";
public static final String KEY_CRIT_RANGE = "crit_range";
public static final String KEY_CRIT_INC = "crit_increment";
public static final String KEY_HIT_RANGE = "hit_range";
public static final String KEY_HIT_INC = "hit_increment";
public static final String KEY_CHAR_IMG = "character_image";
public static final String KEY_TOTAL_XP = "total_xp";
public static final String KEY_XP = "xp";
public static final String KEY_XP_NEEDED = "xp_needed";
public static final String KEY_COINS = "coins";
public static final String KEY_SMALL_POTS = "small_pots";
public static final String KEY_LARGE_POTS = "large_pots";

private static DbHelper ourHelper;
private final Context ourContext;
private static SQLiteDatabase ourDatabase;

private static final String DB_NAME = "battle_for_christams";
private static final String DB_TBL = "stats";
private static final int DATABASE_VERSION = 1;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DB_TBL + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                KEY_LEVEL + " INTEGER NOT NULL, " + 
                KEY_HEALTH + " INTEGER NOT NULL, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_CRIT + " INTEGER NOT NULL, " +
                KEY_CRIT_RANGE + " INTEGER NOT NULL, " +
                KEY_CRIT_INC + " INTEGER NOT NULL, " +
                KEY_HIT_RANGE + " INTEGER NOT NULL, " +
                KEY_HIT_INC + " INTEGER NOT NULL, " +
                KEY_CHAR_IMG + " INTEGER NOT NULL, " +
                KEY_TOTAL_XP + " INTEGER NOT NULL, " +
                KEY_XP + " INTEGER NOT NULL, " +
                KEY_XP_NEEDED + " INTEGER NOT NULL, " +
                KEY_COINS + " INTEGER NOT NULL, " + 
                KEY_SMALL_POTS + " INTEGER NOT NULL, " +
                KEY_LARGE_POTS + " INTEGER NOT NULL)"
            );

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, "User1");
        values.put( KEY_LEVEL, 1);
        values.put(KEY_HEALTH, 10);
        values.put(KEY_CRIT, 5);
        values.put(KEY_CRIT_RANGE, 2);
        values.put(KEY_CRIT_INC, 2);
        values.put(KEY_HIT_RANGE, 2);
        values.put(KEY_HIT_INC, 0);
        values.put(KEY_TOTAL_XP, 0);
        values.put(KEY_XP, 0);
        values.put(KEY_XP_NEEDED, 5);
        values.put(KEY_COINS, 5);
        values.put(KEY_SMALL_POTS, 0);
        values.put(KEY_LARGE_POTS, 0);
        values.put(KEY_CHAR_IMG, 1);
        db.insert(DB_TBL,  null, values);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXIST " + DB_TBL);
        onCreate(db);
    }

}

public SQLiteTable(Context c){
    ourContext = c;
    ourHelper = new DbHelper(ourContext);
}

public static void open() throws SQLException{
    ourDatabase = ourHelper.getWritableDatabase();
}

public static void close() throws SQLException{
    ourHelper.close();
}

public int getLevel() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_LEVEL}, null, null, null, null, null);
    int level = cursor.getInt(0);
    cursor.close();
    close();
    return level;
}

public int getHealth() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_HEALTH}, null, null, null, null, null);
    int health = cursor.getInt(0);
    cursor.close();
    close();
    return health;
}

public int getCrit() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_CRIT}, null, null, null, null, null);
    int crit = cursor.getInt(0);
    cursor.close();
    close();
    return crit;
}

public int getCritRange() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_CRIT_RANGE}, null, null, null, null, null);
    int critRange = cursor.getInt(0);
    cursor.close();
    close();
    return critRange;
}

public int getCritInc() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_CRIT_INC}, null, null, null, null, null);
    int critInc = cursor.getInt(0);
    cursor.close();
    close();
    return critInc;
}

public int getHitInc() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_HIT_INC}, null, null, null, null, null);
    int hitInc = cursor.getInt(0);
    cursor.close();
    close();
    return hitInc;
}

public int getHitRange() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_HIT_RANGE}, null, null, null, null, null);
    int hitRange = cursor.getInt(0);
    cursor.close();
    close();
    return hitRange;
}

public int getXp() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_XP}, null, null, null, null, null);
    int xp = cursor.getInt(0);
    cursor.close();
    close();
    return xp;
}

public void setXp(int xp){
    open();
    ContentValues values = new ContentValues();
    int xpNeeded = getXpNeeded();
    int XP = getXp() + xp;
    int totalXp = getTotalXp() + xp;
    if ( XP >= xpNeeded ){
        XP = XP - xpNeeded;
        levelUp();
    }
    values.put(KEY_XP, XP);
    values.put(KEY_TOTAL_XP, totalXp);
    ourDatabase.update(DB_TBL, values, null, null);
    close();

}

public int getXpNeeded() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_XP_NEEDED}, null, null, null, null, null);
    int xpNeeded = cursor.getInt(0);
    cursor.close();
    close();
    return xpNeeded;
}

public int getTotalXp() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_TOTAL_XP}, null, null, null, null, null);
    int totalXp = cursor.getInt(0);
    cursor.close();
    close();
    return totalXp;
}

public int getCoins() {
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_COINS}, null, null, null, null, null);
    int coins = cursor.getInt(0);
    cursor.close();
    close();
    return coins;
}

public String getName() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_NAME}, null, null, null, null, null);
    String name = cursor.getString(0);
    cursor.close();
    close();
    return name;
}

public void levelUp() {
    // TODO Auto-generated method stub
    ContentValues values = new ContentValues();
    int level = getLevel() + 1;
    int health = getHealth() + 5;
    double crit = getCrit() + 0.1;
    int xpNeeded = getXpNeeded() + 5;
    int critInc = getCritInc() + 1;
    int hitInc;
    int hitRange;
    int critRange;
    values.put(KEY_LEVEL, level);
    values.put(KEY_HEALTH, health);
    values.put(KEY_CRIT, crit);
    values.put(KEY_XP_NEEDED, xpNeeded);
    values.put(KEY_CRIT_INC, critInc);
    if(level % 2 == 0){
        hitInc = getHitInc() + 1;
        values.put(KEY_HIT_INC, hitInc);
    }
    if(level % 4 == 0){
        hitRange = getHitRange() + 1;
        critRange = getCritRange() + 1;
        values.put(KEY_HIT_RANGE, hitRange);
        values.put(KEY_CRIT_RANGE, critRange);
    }
    ourDatabase.update(DB_TBL, values, null, null );
}

private int getLargePots() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_LARGE_POTS}, null, null, null, null, null);
    int largePots = cursor.getInt(0);
    cursor.close();
    close();
    return largePots;
}

private int getSmallPots() {
    // TODO Auto-generated method stub
    open();
    Cursor cursor = ourDatabase.query(DB_TBL, new String[] {KEY_SMALL_POTS}, null, null, null, null, null);
    int smallPots = cursor.getInt(0);
    cursor.close();
    close();
    return smallPots;
}

public void updateSmallPots() {
    // TODO Auto-generated method stub
    ContentValues values = new ContentValues();
    open();
    int smallPots = getSmallPots() + 1;
    int coins = getCoins() - 1; 
    values.put(KEY_SMALL_POTS, smallPots);
    values.put(KEY_COINS, coins);
    ourDatabase.update(DB_TBL, values, null, null);
    close();
}

public void updateLargePots(){
    ContentValues values = new ContentValues();
    open();
    int largePots = getLargePots() + 1;
    int coins = getCoins() - 2;
    values.put(KEY_LARGE_POTS, largePots);
    values.put(KEY_COINS, coins);
    ourDatabase.update(DB_TBL, values, null, null);
    close();
}
} 
```

这是我的日志猫

```
01-04 16:12:25.596: E/AndroidRuntime(29517): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
01-04 16:12:25.596: E/AndroidRuntime(29517):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
01-04 16:12:25.596: E/AndroidRuntime(29517):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:24:29.093

```
android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

您忘记打电话了`cursor.moveToFirst()`，但您还应该验证 Cursor 是否为空：

```
// Returns false if the Cursor cannot move to this position, i.e. empty
if(cursor.moveToFirst()) { 
    // Read data from the first row 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:30:02.093

其他个人最喜欢的 while 或 do-while 循环遍历游标是 for 循环。

```
for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
}
cursor.close(); 
```

# javascript - 如何使用 iMacros 设置 24 小时运行？

> ID：14165953
> 
> 赞同：0
> 
> 时间：2013-01-04T22:21:07.590
> 
> 标签：javascript, c++, imacros

**如何使用 iMacros 设置每周 7 天、每天 24 小时（不间断）操作？**

我找到了该代码，但我无法将其调整为我的宏。我不知道使用visual basic，但我今天设置了vbs 2008。如何在我的 imacros 代码上使用该代码？任何人都可以在vbs上一步一步地告诉它。谢谢

```
 'Sample code B
Set iim1= CreateObject ("imacros")
For m = 1 to 5000
   iret = iim1.iimInit()
   For n = 1 to 1000
      iret = iim1.iimPlay ("macro1")
   Next
   iret = iim1.iimExit()
Next 
```

来源：[http ://wiki.imacros.net/Web_Testing#Q:_How_can_I_set_up_a_24_hours_a_day.2C_7_days_a_week_.28non-stop.29_operation_with_iMacros.3F](http://wiki.imacros.net/Web_Testing#Q:_How_can_I_set_up_a_24_hours_a_day.2C_7_days_a_week_.28non-stop.29_operation_with_iMacros.3F)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:44:48.963

```
//this starts firefox
start /d"C:\Program Files\Mozilla Firefox" firefox.exe /AUTO 

//this kills firefox process
pskill firefox.exe

//this command is one version of wait 10 seconds. You can change number 10 into some other for script to wait more then 10 seconds
ping -n 10 127.0.0.1 
```

在此链接上，您有如何从书签运行 iMacros 文件的示例。所以你有几个例子，你可以使用它们。

[http://wiki.imacros.net/iMacros_for_Firefox#Command_Line_Support](http://wiki.imacros.net/iMacros_for_Firefox#Command_Line_Support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T03:15:17.533

我不知道 VB 解决方案，但 JS 解决方案正在跟进。

1.  将`SET !ERRORIGNORE YES`命令放在宏中，并且`SET !TIMEOUT_MACRO 120`（您可以更改时间）在宏中。然后，当您在 JS 中调用宏时，您会这样做。

    iimPlay（宏，110）

确保时间比宏超时少几秒钟。这样宏将在每次之后重新启动，并且脚本可以工作很多时间。

# objective-c - iOS中没有消息的通知，如何？有那个名字吗？警报，警报，提醒？

> ID：14165954
> 
> 赞同：-4
> 
> 时间：2013-01-04T22:21:11.317
> 
> 标签：objective-c, ios, notifications, alert, repeatingalarm

我见过一些 iphone 应用程序只在后台播放声音，而不在 iOS 中显示任何通知消息或正文。他们是怎么做到的？我试过只搜索声音通知，但没有运气。有没有它的名字，我碰巧搜索了错误的功能？它叫什么，这种东西的代码是什么？

我正在尝试播放每 15 分钟和/或每小时发生一次的多个自定义声音通知。非常感谢您为我显示代码的帮助，以便我可以将其复制到 Xcode。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:25:17.600

我认为您正在寻找 UILocalNotification。不要设置 alertBody 属性，它不会显示警报，而是使用 soundName 属性来指定声音。似乎您需要定期通知，因此请查看 repeatInterval 和 repeatCalendar 属性。

# html - Perl - 使用 HTML::Element 更改链接的颜色

> ID：14165957
> 
> 赞同：1
> 
> 时间：2013-01-04T22:21:26.833
> 
> 标签：html, perl

我正在尝试在另一个脚本（不受我控制）生成的页面上将链接中的链接文本的颜色更改为黄色。更具体地说，我正在此页面上的两个表格中搜索特定文本。找到文本（超链接）后，我想将它们的颜色更改为黄色。

我正在使用 HTML::Element 并且可以轻松找到文本。问题是，没有指定链接颜色，所以链接使用默认值蓝色。我正在尝试将字体颜色的 HTML 元素添加到标签中，但运气不佳。

如果我尝试使用类似的东西（其中“$a”是我要编辑的链接的 HTML::Element 对象）：

```
$a->attr("font color", "yellow"); 
```

它添加了属性，但不会更改链接内容的文本颜色。

如果我尝试类似：

```
my $content = $a->content;
$content->attr("font color", "yellow"); 
```

那只会添加文本

```
<font color=yellow> 
```

到内容，而无需再次更改实际的内容文本颜色。

尝试将其拼接起来也不起作用。

我终于想到了这个：

```
 my $yellowFont = HTML::Element->new('font', 'color' => 'yellow');
foreach my $item_ref ($a->content_refs_list) {
next if ref $$item_ref;
 $yellowFont->push_content($$item_ref);
}
print $yellowFont->as_HTML, "\n"; 
```

从它创造的意义上说，它的效果很好：

```
<font color="yellow">201301022150-Job5</font> 
```

但是这种变化并没有反映在 html 文档中！

我不知道如何将字体颜色属性插入到原始 html 文档中。

下面是我的整个脚本。这是一团糟，因为我一直在尝试各种不同的方法，但都没有成功。

```
#!/usr/local/bin/perl
use warnings;
use strict;
use HTML::TableExtract qw(tree);
use Data::Dumper qw(Dumper);

my @jobList = ();
if ($ARGV[0]) {@jobList = $ARGV[0];} else {die ("Need list of jobs as argument\n")};

my $ddHTMLFile = "./tmp_aptg";
my $te1 = HTML::TableExtract->new( depth => 1, count => 0);
my $te2 = HTML::TableExtract->new( depth => 1, count => 1);

$te1->parse_file($ddHTMLFile);
$te2->parse_file($ddHTMLFile);

my $table1 = $te1->first_table_found;
my $table2 = $te2->first_table_found;

my $table1_tree = $table1->tree;
my $table2_tree = $table2->tree;

foreach my $a ($table1_tree->find_by_tag_name("a")) {
  my $href = $a->attr("href");
  if ($href =~ m/$jobList[0]/) {
    my $yellowFont = HTML::Element->new('font', 'color' => 'yellow');
    foreach my $item_ref ($a->content_refs_list) {
      next if ref $$item_ref;
        $yellowFont->push_content($$item_ref);
      }
    #print $yellowFont->as_HTML, "\n";
    $a->replacewith
    $a->dump;

    #my $table1_html = $table1_tree->as_HTML;
    #my $document1_tree = $te1->tree;
    #my $document1_html = $document1_tree->as_HTML;
    #my $document_html = $document1_html; 
    #print "$document_html";
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T23:37:57.047

每次有人使用该`<font>`标签时，我们都必须向那些被承诺*语义标记的愤怒的*[webdevs](https://en.wikipedia.org/wiki/Hecatomb)牺牲一大堆[可爱的小猫](https://www.google.com/search?q=cute+kitten&tbo=d&source=lnms&tbm=isch&sa=X)。字体本身没有语义。相反，这些事情可以通过[CSS](https://en.wikipedia.org/wiki/Cascading_Style_Sheets)轻松完成，毫无疑问它擅长改变元素的颜色。

 *要将一个元素的颜色设置为黄色，我们必须在`style`属性中添加以下代码：

```
color: yellow !important; 
```

就像是

```
$a->attr(style => "color: yellow !important;"); 
```

可能会成功，尽管这会覆盖任何以前的内容。我们可以尝试将我们的颜色附加到之前的内容中，但我们不能保证已经存在的 CSS 是有效的。

如果目标浏览器理解 CSS3 (*sigh*)，我们可以使用一些不错的选择器来为我们完成这项工作，比如

```
<style>
  table a[href~="$foo"] { color: yellow !important }
</style> 
```

where`$foo`保存一个健全的字符串以进行字面匹配（无正则表达式）。

这是一个数据 URL，您可以将其复制并粘贴到您的地址栏中，以查看此（希望）是否有效：

```
data:text/html,<style>table a[href~="foo"] { color: yellow !important }</style><table><tr><td><a href="bar">bar</a></td><td><a href="foo">foo</a></tr></table> 
```

另一种解决方案是创建一个`<span>`带有 CSS 的新元素，并且是链接的唯一子元素。的前孩子`<a>`将成为 的孩子`<span>`。

```
# not tested, but looks reasonable
my $span = HTML::Element->new("span", style => "...");
my @childs = $a->detach_content;
$span->push_content(@childs);
$a->push_content($span); 
```

这与之前的解决方案略有不同，但除非在页面布局中使用了一些高级 CSS 技巧，否则这种差异应该无关紧要。

如果你真的*需要*，你可以调整这个解决方案来使用字体标签。
“请不要！我们可以`<span>`吗？” ← 小猫。

要了解您可以对 HTML 元素对象执行哪些操作，请参阅[`HTML::Element`文档](https://metacpan.org/module/HTML%3a%3aElement)。*

# php - 在 php 中转换日期，toString 函数不起作用

> ID：14165969
> 
> 赞同：1
> 
> 时间：2013-01-04T22:22:43.797
> 
> 标签：php, zend-framework, date, tostring

我正在尝试使用 toString('dd MMMM YYY') 函数将日期转换为字符串。但在这里，这是行不通的。

这是我的代码：

```
 $date_start = new Zend_Date(strtotime($this->startdate));
    echo($date_start); 
```

结果是：2012 年 12 月 31 日 00:00:00

```
 $date_input = $date_start->toString('dd MMMM YYY');
    echo($date_input); 
```

结果是：2013 年 12 月 31 日

我需要做什么才能获得 2012 年 12 月 31 日？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:28:39.053

这是此处描述的已知问题：http: [//framework.zend.com/issues/browse/ZF-5297](http://framework.zend.com/issues/browse/ZF-5297)

> 请注意，默认的 ISO 格式与 PHP 的格式不同，如果您以前没有使用过这可能会很烦人。特别是 Year 和 Minute 的格式说明符通常不会以预期的方式使用。
> 
> 对于 year 有两个可用的说明符，它们经常被弄错。**ISO 年份**的**Y 说明符和实际年份**的y 说明符。差异很小但很重要。Y 计算 ISO 年份，通常用于日历格式。例如，请参见 2007 年 12 月 31 日。实际年份是 2007 年，但**它是 2008 年第 1 周第一周的第一天。因此，如果您使用“dd.MM.yyyy”，您将得到'31.December.2007' 但如果你使用 'dd.MM.YYYY' 你会得到 '31.December.2008'**。如您所见，这不是错误，而是取决于使用的说明符的预期行为。

使用“ `yyy`”代替“ `YYY`”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:25:43.387

使用 yyy 而不是 YYY。

YYY 是 ISO-8601 日期，不同于日历日期。

[http://framework.zend.com/manual/1.12/en/zend.date.constants.html](http://framework.zend.com/manual/1.12/en/zend.date.constants.html)

# text - AWK/SEDManipulate 文本文件，使用馈送文件创建 CSV 文件

> ID：14165975
> 
> 赞同：1
> 
> 时间：2013-01-04T22:22:59.060
> 
> 标签：text, vbscript, sed, awk, wmic

我需要操作一个文本文件，我使用 wmic 脚本创建了它。

原始文件：

```
Node,Manufacturer,Model
NAKAMA,Dell Computer Corporation,PowerEdge 6650             
Node,Name,Version
NAKAMA,Microsoft Windows Server 2003 R2 Enterprise Edition|C:\WINDOWS|\Device\Harddisk0\Partition1,5.2.3790

Node,AddressWidth
NAKAMA,32
NAKAMA,32
NAKAMA,32
NAKAMA,32

Node,SerialNumber
NAKAMA,BZJS571

Node,Name,Version
NAKAMA,Microsoft Office Excel Viewer,12.0.6219.1000
NAKAMA,Microsoft Software Update for Web Folders  (English) 14,14.0.4763.1000
NAKAMA,Microsoft Office Visio MUI (English) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Shared Setup Metadata MUI (English) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Visio 2010,14.0.4763.1000
NAKAMA,Microsoft Office Proofing (English) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Shared MUI (English) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Proof (English) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Proof (Spanish) 2010,14.0.4763.1000
NAKAMA,Microsoft Office Proof (French) 2010,14.0.4763.1000
NAKAMA,MSXML 6 Service Pack 2 (KB954459),6.20.1099.0
NAKAMA,Microsoft SQL Server 2005 Express Edition (DTC),9.2.3042.00
NAKAMA,Microsoft .NET Framework 3.0 Service Pack 2,3.2.30729
NAKAMA,Microsoft Group Policy Management Console with SP1,1.0.2.0
NAKAMA,Microsoft Windows SDK for Windows 7 (7.1),7.1.30514
NAKAMA,Microsoft SQL Server Native Client,9.00.3042.00
NAKAMA,Broadcom Management Programs,10.38.04
NAKAMA,Microsoft .NET Framework 3.5 SP1,3.5.30729
NAKAMA,Symantec Endpoint Protection,11.0.7101.1056
NAKAMA,Windows Resource Kit Tools - ClusterRecovery.exe,1.0.0.1
NAKAMA,Java(TM) 6 Update 11,6.0.110
NAKAMA,Windows Resource Kit Tools,5.2.3790
NAKAMA,ILMT-TAD4D Agent,7.2.2.1
NAKAMA,Microsoft Active Directory Topology Diagrammer,2.2.4146
NAKAMA,IBM Tivoli Storage Manager Client,05.04.0100
NAKAMA,TivReDist,1.00.0000
NAKAMA,Adobe Reader X (10.1.0),10.1.0
NAKAMA,ActivePerl 5.10.0 Build 1004,5.10.1004
NAKAMA,Active Directory Migration Tool,2.0.0.0
NAKAMA,Microsoft Easy Assist v2,8.1.6416.0
NAKAMA,Microsoft SQL Server 2005 Express Edition (SQLEXPRESS),9.2.3042.00
NAKAMA,Dell OpenManage Server Administrator,5.5.0
NAKAMA,Windows Resource Kit Tools - GPInventory.exe,1.0.1361.27800
NAKAMA,Microsoft SQL Server VSS Writer,9.00.3042.00
NAKAMA,VMware Remote Console Plug-in,2.5.0.199067
NAKAMA,Microsoft SQL Server 2005 Tools Express Edition,9.2.3042.00
NAKAMA,Microsoft Visual C++ 2005 Redistributable,8.0.56336
NAKAMA,Microsoft Visual J# 2.0 Redistributable Package - SE,2.0.50728
NAKAMA,VMware vSphere Client 5.1,5.1.0.1557
NAKAMA,Windows Server 2003 Service Pack 2 Administration Tools Pack,5.2.3790.3959
NAKAMA,Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.4148,9.0.30729.4148
NAKAMA,Microsoft Visual C++ 2010  x86 Redistributable - 10.0.30319,10.0.30319
NAKAMA,Microsoft .NET Framework 2.0 Service Pack 2,2.2.30729
NAKAMA,Windows Support Tools,5.2.3790.3959
NAKAMA,Quest ActiveRoles Management Shell for Active Directory,1.5.1.2421
NAKAMA,MSXML 4.0 SP2 (KB954430),4.20.9870.0
NAKAMA,Debugging Tools for Windows (x86),6.12.2.633
NAKAMA,Microsoft SQL Server Setup Support Files (English),9.00.3042.00
NAKAMA,CBMR 5.0.1 Release 4,5.0.1 
```

期望的输出：

```
Node,Manufacturer,Model,Name,Version,AddressWidth,SerialNumber,Name,Version
NAKAMA,Dell Computer Corporation,PowerEdge 6650,Microsoft Windows Server 2003 R2 Enterprise Edition|C:\WINDOWS|\Device\Harddisk0\Partition1,5.2.3790,32,BZJS571,CBMR 5.0.1 Release 4,5.0.1 
```

原始文件是分开的，我只需要它的一部分。每次我查询信息时，我都会获得关于我正在查询的内容的描述以及它下面的结果。

但是现在我需要以这种方式组织数据：

第一：节点，制造商，型号：我需要所有这些

第二：Node,Manufacturer,Model：我只需要Manufacturer,Model（我会从剩下的行中排除Node）

第三：Node,AddressWidth：我只需要AddressWidth（一次就够了）

第四：Node,SerialNumber ：我只需要 SerialNumber

第五：节点，名称，版本：我只需要名称，版本，但只需要包含 CBMR 的行

我不确定这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:15:16.117

这是使用`awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS=OFS=","
}

$1 == x=("Node") {
    c++

    f=sub(/[^,]*,/,"")
    one = (one ? one : x) OFS $0
    next
}

c==5 && $2 !~ /CBMR/ {
    next
}

f==1 {
    y=$1

    gsub(/^[^,]*,|[ \t]*$/,"")
    two = (two ? two : y) OFS $0
    f=0
}

END {
    print one ORS two
} 
```

结果：

```
Node,Manufacturer,Model,Name,Version,AddressWidth,SerialNumber,Name,Version
NAKAMA,Dell Computer Corporation,PowerEdge 6650,Microsoft Windows Server 2003 R2 Enterprise Edition|C:\WINDOWS|\Device\Harddisk0\Partition1,5.2.3790,32,BZJS571,CBMR 5.0.1 Release 4,5.0.1 
```

或者，这是单线：

```
awk 'BEGIN { FS=OFS="," } $1 == x=("Node") { c++; f=sub(/[^,]*,/,""); one = (one ? one : x) OFS $0; next } c==5 && $2 !~ /CBMR/ { next } f==1 { y=$1; gsub(/^[^,]*,|[ \t]*$/,""); two = (two ? two : y) OFS $0; f=0 } END { print one ORS two }' file 
```

# javascript - 使用 JS/jQuery 检查 onload 和 onerror？

> ID：14165979
> 
> 赞同：1
> 
> 时间：2013-01-04T22:23:23.967
> 
> 标签：javascript, jquery, javascript-events

使用 HTML，我可以手动将其放入正文

```
<img style="display:none;"
onload="Success('test')"
onerror="Fail('test')"
src="http://example.com/test.png"
/> 
```

反正有没有使用 jQuery 或 Javascript 来做这个检查？

编辑：我想避免使用 HTML 并手动插入图像。我正在尝试仅使用 jQuery/JS 来完成检查。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:27:19.530

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:27:15.577

对于`error`，jquery 将以这种方式工作：

```
$('img').on('error', function(e) {

}); 
```

同样适用于`load`：

```
$('img').on('load', function(e) {

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T08:01:56.397

你可以用这样的纯来做到这`JavaScript`一点：

```
<script language="JavaScript">

    var img = new Image();   // Create new image element

    img.onload = function(){
      // your code
    };

    img.onerror = function() {
      // your code
    };

    img.src = 'yourImage.png'; // Set source path

</script> 
```

[您可以在这里](http://jsfiddle.net/ZuaP8/)尝试这种方法。

# android - Android RSS阅读器（忍者错误）

> ID：14165982
> 
> 赞同：2
> 
> 时间：2013-01-04T22:23:41.180
> 
> 标签：android, rss, runtime-error, rss-reader

我按照一个简单的教程 (http://www.cse.nd.edu/courses/cse40814/www/RSS_Android.pdf) 将 RSS 提要从给定的 URL 读取到 listView 中。我已经添加了 INTERNET 权限，并且代码在 Eclipse 中没有错误，但是在设备或模拟器上启动时它不会显示任何 RSS 提要。我不能再简化代码了，我使用的提要是来自 www.nba.com 的稳定提要：[http](http://www.nba.com/rss/nba_rss.xml) ://www.nba.com/rss/nba_rss.xml尽管我已经在几个 RSS 提要上对其进行了测试并且仍然没有显示提要。

有什么想法吗？

**主.java**

```
package com.android.simplerssreader;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import com.android.simplerssreader.data.RssItem;
import com.android.simplerssreader.util.RssReader;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {

        RssReader rssReader = new RssReader(
                "http://www.nba.com/rss/nba_rss.xml");
        ListView Items = (ListView) findViewById(R.id.listView1);

        ArrayAdapter<RssItem> adapter = new ArrayAdapter<RssItem>(this,
                android.R.layout.simple_list_item_1, rssReader.getItems());

        Items.setAdapter(adapter);
        Items.setOnItemClickListener(new ListListener(rssReader.getItems(),
                this));

    } catch (Exception e) {
        Log.e("SimpleRssReader", e.getMessage());
    }

}
 } 
```

**监听器.java**

```
package com.android.simplerssreader;

import java.util.List;

import com.android.simplerssreader.data.RssItem;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;

public class ListListener implements OnItemClickListener {

List<RssItem> listItems;
Activity activity;

public ListListener(List<RssItem> listItems, Activity activity) {
    this.listItems = listItems;
    this.activity = activity;
}

public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(listItems.get(pos).getLink()));
    activity.startActivity(i);

}

} 
```

**RssItem.java**

```
package com.android.simplerssreader.data;

public class RssItem {
private String title;
private String link;
public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}
public String getLink() {
    return link;
}
public void setLink(String link) {
    this.link = link;
}

} 
```

**RssParseHandler.java**

```
package com.android.simplerssreader.util;

import java.util.ArrayList;
import java.util.List;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import com.android.simplerssreader.data.RssItem;

public class RssParseHandler extends DefaultHandler {

private List<RssItem> rssItems;

private RssItem currentItem;
private boolean parsingTitle;
private boolean parsingLink;

public RssParseHandler() {
    rssItems = new ArrayList<RssItem>();
}

public List<RssItem> getItems() {
    return rssItems;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if ("content-item".equals(qName)) {
        currentItem = new RssItem();
    } else if ("title".equals(qName)) {
        parsingTitle = true;
    } else if ("url".equals(qName)) {
        parsingLink = true;
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if ("content-item".equals(qName)) {
        rssItems.add(currentItem);
        currentItem = null;
    } else if ("title".equals(qName)) {
        parsingTitle = false;
    } else if ("url".equals(qName)) {
        parsingLink = false;
    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    if (parsingTitle) {
        if (currentItem != null)
            currentItem.setTitle(new String(ch, start, length));
    } else if (parsingLink) {
        if (currentItem != null) {
            currentItem.setLink(new String(ch, start, length));
            parsingLink = false;
        }
    }
}

} 
```

**RssReader.java**

```
package com.android.simplerssreader.util;

import java.util.List;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import com.android.simplerssreader.data.RssItem;

public class RssReader {

private String rssUrl;

public RssReader(String rssUrl) {

    this.rssUrl = rssUrl;
}

public List<RssItem> getItems() throws Exception {
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();

    RssParseHandler handler = new RssParseHandler();
    saxParser.parse(rssUrl, handler);
    return handler.getItems();
}
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:cacheColorHint="#FFA500"
    android:scrollingCache="false"
    android:textColor="#ADD8E6" >
</ListView>

</LinearLayout> 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.simplerssreader"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.android.simplerssreader.Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

**日志猫**

01-04 16:22:16.171：E/SimpleRssReader(8685)：无法打开[http://www.nba.com/rss/nba_rss.xml](http://www.nba.com/rss/nba_rss.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:36:14.233

代替

```
Log.e("SimpleRssReader", e.getMessage()); 
```

和

```
Log.e("SimpleRssReader", e.getMessage(), e); 
```

您会丢失堆栈跟踪信息。

顺便说一句，您的错误是当您在 UI 线程内（在 HoneyComb 之后）时，您无法在 Android 中访问网络：[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

# ruby-on-rails - heroku 迁移，无法连接到服务器：连接被拒绝

> ID：14165986
> 
> 赞同：1
> 
> 时间：2013-01-04T22:23:55.013
> 
> 标签：ruby-on-rails, ruby, heroku

我已经运行了以下命令：

```
git remote add mdd2 git@heroku.com:dmstaffing.git
git push mdd2 master 
```

但是当我现在尝试运行时

```
heroku run rake db:migrate --app mdd2 
```

我明白了

```
rake aborted!
could not connect to server: Connection refused
        Is the server running on host "ec2-184-73-250-226.compute-1.amazonaws.com" and accepting
        TCP/IP connections on port 5632?

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我还看到：

```
g$ heroku open --app mdd2
Opening mdd2... done
durrantm.../mdd$ libprotobuf ERROR third_party/protobuf/src/google/protobuf/message_lite.cc:123] Can't parse message of type "in_memory_url_index.InMemoryURLIndexCacheItem" because it is missing required fields: (cannot determine missing fields for lite message)
^C
durrantm.../mdd$ 
```

无法连接到服务器：连接被拒绝服务器是否在主机“ec2-184-73-250-226.compute-1.amazonaws.com”上运行并接受端口 5632 上的 TCP/IP 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:26:15.913

你有数据库插件吗？ [https://addons.heroku.com/](https://addons.heroku.com/)

# c++ - 为什么 QFontMetrics::maxWidth 返回这么大的值？

> ID：14165988
> 
> 赞同：1
> 
> 时间：2013-01-04T22:23:56.113
> 
> 标签：c++, qt, fonts

Windows 7 SP1
MSVS 2010
Qt 4.8.4

我想确定 QLineEdit 小部件的最大大小，知道它必须容纳的最大字符数。

因此，我想使用：

```
int QFontMetrics::maxWidth () const
Returns the width of the widest character in the font. 
```

但是这个：

```
#include <QApplication>
#include <QFont>
#include <QFontMetrics>
#include <iostream>

using std::cout; using std::endl;

int main(int argc, char *argv[])
{
    QApplication app(argc,argv);

    QFontMetrics metrics(QApplication::font()); 
    cout << "Default -     Max width: " << metrics.maxWidth() << " Width of X: " << metrics.width('X') << endl;
    const QFont f("Monospace", 8);
    QFontMetrics metrics2(f); 
    cout << "Monospace 8 - Max width: " << metrics2.maxWidth() << " Width of X: " << metrics2.width('X') << endl;
    const QFont f2("Cambria", 16);
    QFontMetrics metrics3(f2); 
    cout << "Cambria 16 -  Max width: " << metrics3.maxWidth() << " Width of X: " << metrics3.width('X') << endl;
    return 0;
} 
```

输出这个：

```
Default -     Max width: 23 Width of X: 6
Monospace 8 - Max width: 23 Width of X: 6
Cambria 16 -  Max width: 91 Width of X: 12 
```

问题：为什么最大宽度比'X'的宽度大这么多？字体中是否有一些我不知道的超大字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:37:25.563

这不是 Qt 问题，因为底层 Windows API (`GetTextMetrics`和`GetTextExtentPoint`) 提供相同的值。

不要忘记，一种字体可能包含许多不寻常字符的字形：连字、各种长破折号、符号、dingbats 以及您未曾预料到的字母表中的字符。

我对“等宽”字体会发生这种情况感到有点惊讶，但显然，这些只是字体设计用于的字符子集的固定间距。例如，Courier New 有几十个字符，其宽度是普通字符的两倍以上，例如 U+0713 SYRIAC LETTER GAMAL: 。

如果大部分时间都是正确的就足够了，我会取平均字符宽度，将其四舍五入，然后将其相乘。如果用户需要输入几个异常宽的字符，您可能需要稍微滚动一下，但这并不是世界末日。

如果您知道它总是会是英语，那么您不妨测量一个大写字母 W 并使用它。

# haskell - 如何在 Data.Set 中插入 O(log(n))？

> ID：14165989
> 
> 赞同：8
> 
> 时间：2013-01-04T22:23:56.527
> 
> 标签：haskell, complexity-theory, referential-transparency

在查看 的文档时`Data.Set`，我看到[将元素插入树中被提到为 O(log(n))](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html#v%3ainsert)。但是，我直觉上希望它是 O(n*log(n))（或者可能是 O(n)？），因为引用透明性需要在 O(n) 中创建前一棵树的完整副本。

我知道例如`(:)`可以使 O(1) 而不是 O(n)，因为这里不必复制完整列表；编译器可以将新列表优化为第一个元素加上指向旧列表的指针（请注意，这是编译器 - 不是语言级别的 - 优化）。但是，将值插入 a`Data.Set`涉及重新平衡，这对我来说看起来很复杂，以至于我怀疑是否存在类似于列表优化的东西。我尝试阅读[Set docs 引用的论文](http://www.swiss.ai.mit.edu/~adams/BB/)，但无法用它回答我的问题。

那么：在（纯）函数式语言中，如何将元素插入二叉树是 O(log(n))？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T22:30:44.490

无需制作 a 的完整副本`Set`即可将元素插入其中。在内部，元素存储在树中，这意味着您只需要沿插入路径创建新节点。未触及的节点可以在`Set`. 正如[Deitrich Epp](https://stackoverflow.com/questions/14165989/how-is-insert-ologn-in-data-set/14166061#comment19626794_14166061)所指出的，在平衡树`O(log(n))`中是插入路径的长度。（很抱歉忽略了这个重要的事实。）

假设您的`Tree`类型如下所示：

```
data Tree a = Node a (Tree a) (Tree a)
            | Leaf 
```

...并说你有一个`Tree`看起来像这样的

```
let t = Node 10 tl (Node 15 Leaf tr') 
```

...在哪里`tl`和`tr'`是一些命名的子树。现在说你想插入`12`这棵树。好吧，看起来像这样：

```
let t' = Node 10 tl (Node 15 (Node 12 Leaf Leaf) tr') 
```

子树`tl`and在and`tr'`之间共享，您只需要构造 3 个 new即可，即使 的大小可能远大于 3。`t``t'``Nodes``t`

* * *

**编辑：再平衡**

关于再平衡，请这样想，并注意我在这里并不严谨。假设你有一棵空树。已经平衡了！现在说你插入一个元素。已经平衡了！现在假设您插入*另一个*元素。嗯，有一个奇数，所以你不能在那里做很多事情。

这是棘手的部分。假设您插入*另一个*元素。这可以有两种方式：向左或向右；平衡或不平衡。在不平衡的情况下，您可以清楚地执行树的旋转来平衡它。在它平衡的情况下，已经平衡了！

这里需要注意的重要一点是，您一直在*重新*平衡。这不像你有一棵树，决定插入一个元素，但在你这样做之前，你重新平衡，然后在你完成插入后留下一团糟。

现在说你继续插入元素。树*会*变得不平衡，但不会太多。当这种情况发生时，首先你要立即纠正它，其次，纠正发生在插入的路径上，它`O(log(n))`位于平衡树中。您链接到的论文中的旋转最多接触树中的三个节点以执行旋转。所以你在`O(3 * log(n))`重新平衡时正在工作。那还是`O(log(n))`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-05T01:03:33.493

为了更加强调 dave4420 在评论中所说的话，`(:)`在恒定时间内运行不涉及编译器优化。您可以实现自己的列表数据类型，并在一个简单的非优化 Haskell 解释器中运行它，它仍然是 O(1)。

一个列表被*定义为*一个初始元素加上一个列表（或者在基本情况下它是空的）。这是一个等同于原生列表的定义：

```
data List a = Nil | Cons a (List a) 
```

所以如果你有一个元素和一个列表，并且你想用它们构建一个新的列表`Cons`，那只是直接从构造函数需要的参数创建一个新的数据结构。甚至不需要*检查*尾列表（更不用说复制它），而不是在执行类似`Person "Fred"`.

当您声称这是编译器优化而不是语言级别时，您完全错了。此行为直接来自列表数据类型的语言级别定义。

类似地，对于定义为一个项目加两棵树（或一棵空树）的树，当您将一个项目插入非空树时，它必须进入左子树或右子树。您需要构建包含该元素的该树的新版本，这意味着您需要构建一个包含新子树的新父节点。但是*另一个*子树根本不需要遍历；它可以按原样放入新的父树中。在平衡树中，这是可以共享的整棵树的*一半。*

递归地应用这个推理应该告诉你实际上根本不需要复制数据元素；在向下插入元素的最终位置的路径上只需要新的父节点。每个新节点存储 3 样东西：一个项目（直接与原始树中的项目引用共享）、一个未更改的子树（直接与原始树共享）和一个新创建的子树（与原始树共享几乎所有的结构树）。在平衡树中会有 O(log(n)) 个。

# html - 创建 HTML 标记的更好的 XSL 样式方法是什么？

> ID：14165994
> 
> 赞同：3
> 
> 时间：2013-01-04T22:24:22.423
> 
> 标签：html, xslt, xslt-1.0

我有一个相当简单的 xsl 样式表，用于将定义我们的 html 的 xml 文档转换为 html 格式（请不要问为什么，这只是我们必须这样做的方式......）

```
<xsl:template match="/">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="HtmlElement">
  <xsl:element name="{ElementType}">
    <xsl:apply-templates select="Attributes"/>
    <xsl:value-of select="Text"/>
    <xsl:apply-templates select="HtmlElement"/>
  </xsl:element>
</xsl:template>

<xsl:template match="Attributes">
  <xsl:apply-templates select="Attribute"/>
</xsl:template>

<xsl:template match="Attribute">
  <xsl:attribute name="{Name}">
    <xsl:value-of select="Value"/>
  </xsl:attribute>
</xsl:template> 
```

当我遇到需要转换的一小段 HTML 时，问题就出现了：

```
<p>
      Send instant ecards this season <br/> and all year with our ecards!
</p> 
```

中间`<br/>`的打破了转换的逻辑，只给了我段落块的前半部分：`Send instant ecards this season <br></br>`. 尝试转换的 XML 如下所示：

```
<HtmlElement>
    <ElementType>p</ElementType>
    <Text>Send instant ecards this season </Text>
    <HtmlElement>
      <ElementType>br</ElementType>
    </HtmlElement>
    <Text> and all year with our ecards!</Text>
</HtmlElement> 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:44:51.647

您可以简单地为 Text 元素添加新规则，然后匹配 HTMLElements 和 Texts：

```
<xsl:template match="HtmlElement">
  <xsl:element name="{ElementName}">
    <xsl:apply-templates select="Attributes"/>
    <xsl:apply-templates select="HtmlElement|Text"/>
  </xsl:element>
</xsl:template>

<xsl:template match="Text">
    <xsl:value-of select="." />
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:33:40.053

您可以使样式表更通用一点，以便通过 调整模板来***处理***`HtmlElement`其他`Attributes`元素的。*`Attributes``HtmlElement``xsl:apply-templates`*

 *内置模板将匹配`Text`元素并将其复制`text()`到输出。

此外，您当前已声明的根节点模板（即`match="/"`）可以被删除。它只是重新定义了内置模板规则已经处理的内容，并且不做任何改变行为的事情，只是弄乱了你的样式表。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 
    <xsl:output indent="yes"/>

<!--    <xsl:template match="/">
        <xsl:apply-templates/>
    </xsl:template>-->

    <xsl:template match="HtmlElement">
        <xsl:element name="{ElementType}">
            <xsl:apply-templates select="Attributes"/>
            <!--apply templates to all elements except for ElementType and Attributes-->
            <xsl:apply-templates select="*[not(self::Attributes|self::ElementType)]"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="Attributes">
        <xsl:apply-templates select="Attribute"/>
    </xsl:template>

    <xsl:template match="Attribute">
        <xsl:attribute name="{Name}">
            <xsl:value-of select="Value"/>
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```*

# c - 在 Arduino 上从 12 进制转换为 10 进制，反之亦然

> ID：14165995
> 
> 赞同：2
> 
> 时间：2013-01-04T22:24:25.350
> 
> 标签：c, arduino

从以 12 为底转换到以 10 为底的最有效方法是什么，反之亦然？

我尝试了多种转换方法，例如转换为字符串，将每个字符分配为值，乘以`base^exponent`获取该基数中的值，然后得到总数。

我想知道，有没有更好的方法呢？

首先，我将数字存储为以十为底的字符串，并希望将其转换为以十二为底的另一个字符串。我还希望能够将该基数为 12 的数字（在字符串中）转换为基数为 10 的数字（在字符串中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:00:10.833

如果您只使用 base 2 作为中间体，这很容易。您可以将任何基数的字符串转换为基数 2，如下所示：

```
int x = strtol("12345", NULL, 10); // convert from base 10 string to integer
int y = strtol("12345", NULL, 12); // convert from base 12 string to integer 
```

然后转换*为*基数 10 是微不足道的：

```
sprintf(buf, "%d", y); // convert from integer to base 10 string 
```

打印出以 12 为底的数字有点困难 - 没有内置函数可以做到这一点，因此您需要编写自己的（使用一些帮助程序保持清洁）：

```
void reverse(char *s)                // reverse a string in place
{
    char *e = s + strlen(s) - 1;     // find the end of the string
    char tmp;
    while (s < e)                    // loop to swap characters and move pointers
    {                                // towards the middle of the string
        tmp = *e;
        *e-- = *s;
        *s++ = tmp;    
    }
}

char digit(int x)        // turn an integer into a single digit
{
    if (x < 10)
        return '0' + x;       // 0-9
    else
        return 'a' + x - 10;  // a, b, c, d, e, f, g....
}

void tobase(char *s, int x, int base) // convert an integer into a string in
{                                     // the given base
    int r;
    char *p = s;
    while (x)
    {
        r = x % base;    // extract current digit
        x = x / base;    // divide to get lined up for next digit
        *p++ = digit(r); // convert current digit to character
    }
    *p = '\0';           // null terminate the string
    reverse(s);          // and reverse it, since we generated the digits 
}                        // backwards 
```

你会像这样使用它：

```
tobase(buf, x, 12); // convert from integer to base 12 string 
```

您可能想要添加比我那里更好的错误处理 - 我正在拍摄一个简短的实现，以便在这里干净地安装它。