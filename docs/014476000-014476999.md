# StackOverflow 问答 14476000-14476999

# jquery - API调用我的ajax成功函数永远不会被调用

> ID：14476001
> 
> 赞同：0
> 
> 时间：2013-01-23T09:12:48.900
> 
> 标签：jquery, asp.net-web-api

我正在尝试使用 &.ajax 进行 api 调用，当我在我的项目文件夹之外使用 jsonp 属性时，成功函数永远不会被调用，但是如果我使用 json 直接从我的项目文件夹进行调用，那么成功函数会被调用。

请问，有谁知道为什么在使用 jsonp 时成功函数永远不会被调用。我的代码如下。

```
var mysuccess= function (resp) {
                              alert("success");
                          };
                var mystatus=         {
                         200: function (rsp) {
                            alert(JSON.stringify(rsp));
                        }
                       };
                 var myerror=function (resp) {
                              alert("error");
                          };
              function GetQuestion() {
                var url1="http://localhost:50107/api/security/Question"
                  $.ajax({ url:url1,
                      type: 'GET',
                      dataType: 'jsonp',
                      cache: false,
                      jsonp: '$callback',
                      contentType: 'application/json; charset=utf-8',
                      statusCode:mystatus, 
                      success:mysuccess,
                      error: myerror,
                  });
              }; 
```

# linux - 是否可以运行一个使用 rsh/ssh 遍历主机的脚本

> ID：14476003
> 
> 赞同：0
> 
> 时间：2013-01-23T09:12:54.053
> 
> 标签：linux, bash, csh

我试图运行以下 csh 脚本，该脚本 ssh 到我们网络上的所有计算机，目的是 yum 安装作为参数传递的软件。但是，一旦我将 rsh 连接到另一台主机，该脚本将无法继续。有没有办法解决这个问题？

```
if ($1 == "")then
    echo -n "Please enter a package to install\n"
    set package=$<
else set package = $#argv
endif

set numlines = `cat $NM_HOME/sh_local/nc_network2.txt | grep -v "^#" | fgrep "%" |  wc -l`
while ($numlines>0)
    set line = `cat $NM_HOME/sh_local/nc_network2.txt | grep -v "^#" | fgrep "%" | tail -$numlines | head -1`
    set host2 = `echo $line | cut -f 1 -d %`
    set where = `echo $line | cut -f 2 -d %`
    if ($host2 == $this_machine) then 
    echo "This is $host2....skipping rsh to this machine"
    echo ""
    goto yum
    endif
    echo ""
    echo "logging into $host2 $where"
    echo ""
    sleep 1
    rsh $host2
    yum:
    echo ""
    echo "Preparing to install $package on $host2"
    sudo yum -y install $package
    if ($host2 == $this_machine) then 
    goto decrement
    else
    logout
    goto decrement
    endif

    decrement:
    @ numlines--

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:21:01.270

`ssh`/ `rsh`-ing 到另一台主机不会神奇地继续在该主机上执行脚本。在脚本中执行与在你的 shell`ssh hostname`中执行的效果完全相同`ssh hostname`——它连接到那台机器，在那里运行一个交互式 shell，然后让你留在那个 shell 中。`ssh`只有在您自己关闭/`rsh`连接后，您的脚本才会继续执行。

为了在该主机上执行某些操作，您需要提供要在该主机上运行的显式命令，如下所示：

`rsh $host2 sudo yum -y install $package`

请注意，这只是一个用于说明目的的简单示例；修复脚本的整个逻辑可能还不够，但应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:43:35.533

**是**的。我的答案仅通过阅读您的“问题”而不是您在发布的代码中提供的内容来提供。

我已经这样做了很多年，如下所示。

*   创建一个主机列表，每行包含一个主机。
*   预先启用基于 SSH 密钥的身份验证。这可以手动完成，但我过去曾使用`perl`and完成此操作`expect`。

*   运行`for`如下循环以在所有服务器上执行操作：

    我在`cat hosts_list`；做 ssh $i dmidecode | grep -m 1 '序列号：'; 完毕

上面的 oneliner 会给我所有服务器的序列号在`host_list`. 这是一个提取序列号的示例。但是，您可以按照完全相同的逻辑编写一个完整的 bash 脚本。

对于更高级的要求，请考虑使用`perl`和`ssh`可用的模块`CPAN`

# erlang - 在 foreach 循环中使用 if 语句

> ID：14476004
> 
> 赞同：1
> 
> 时间：2013-01-23T09:12:55.737
> 
> 标签：erlang

在同一个代码块中使用 2 个“end”似乎总是有问题，例如：

```
 Worker = fun (File) ->
 {ok, Device} = file:read_file([File]),
 Li = string:tokens(erlang:binary_to_list(Device), "\n"),
 Check = string:join(Li, "\r\n"),
 FindStr = string:str(Check, "yellow"),
 if
  FindStr > 1 -> io:fwrite("found");
  true -> io:fwrite("not found")
 end,
end, 
```

消息是“之前的语法错误：'end'”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:26:08.027

您需要删除结束之间的逗号。

```
Worker = fun (File) ->
 {ok, Device} = file:read_file([File]),
 Li = string:tokens(erlang:binary_to_list(Device), "\n"),
 Check = string:join(Li, "\r\n"),
 FindStr = string:str(Check, "yellow"),
 if
  FindStr > 1 -> io:fwrite("found");
  true -> io:fwrite("not found")
 end
end, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:23:00.157

规则很简单——所有“陈述”都必须以逗号开头，除非它们恰好是最后一个。

您的`if`表达式是`fun`传递给的块 ()中的最后一个`foreach`。这意味着它不需要尾随`,`.

所以

```
 end
end, 
```

是你需要的。一个更简单的例子：

```
L = [1, 2, 3, 4],
lists:foreach(
  fun(X) -> 
     Y = 1, 
     if 
       X > 1 -> io:format("then greater than 1!~n");
       true  -> io:format("else...~n")
     end 
   end, 
   L
 ) 
```

# java - 存储结果

> ID：14476007
> 
> 赞同：1
> 
> 时间：2013-01-23T09:12:57.687
> 
> 标签：java, data-structures, store

我正在使用 Java 做一些作业，这是我应该做的。给定一个整数`X`，你应该读取`X`行，每行包含一个字符串和 2 个整数值`x`和`y`.

```
**Input**
2 <-- Read 2 lines
PLUS 10 30 <-- PLUS refers to adding 30 to 10
MINUS -6 20 <-- MINUS refers to minus 20 from -6
**Output**
40 
-26 
```

如何存储值 40 和 -26？我目前正在使用一个数组。代码如下。

```
for(int i = 0; i < limit; i++)
{
    String limitInput = sc.next();
    x = sc.nextInt();
    y = sc.nextInt();
    if(limitInput.equals("PLUS"))
    {
        System.out.println(x+y);
        limitArray[i] = x + y;
    }
    else if(limitInput.equals("MINUS"))
    {
        limitArray[i] = x - y;
    }
    else
    {
        limitArray[i] = x * y;
    }
} 
```

有没有更简单的方法，比如不使用数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:18:01.960

对于您的情况，不要认为有比数组更简单的数据结构。如果要将结果与操作/行号一起存储；会建议你使用 HashMap。**但是你；map 绝对不比数组简单。**

```
 Map<Integer,Integer> map = new HashMap<Integer,Integer>();
 int line = 1; //read line number
 int result= 40;  //read final result
 map.put(line, result); 
```

这样，您可以通过迭代 map 获得每行的结果。

但是如果你还想存储你已经执行的操作；然后会建议像这样使用multimap

```
 Map<Integer, ArrayList<String>> map = new HashMap<Integer, ArrayList<String>>();
 ArrayList<String> a = new ArrayList<String>(); 
 a.add("PLUS"); //add operation
 a.add(result); //add result

 map.put(line, a); 
```

从列表中读取值时；只需确保将值（在位置 1）解析为 int，并将其存储为字符串。

# ruby - 带有模块 mixin 的 Ruby 类

> ID：14476008
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:12:57.827
> 
> 标签：ruby, oop

我正在尝试为 mixin 扩展一个类中的模块方法。

这是我的代码：

```
module Mod_1
    def bar
        puts "xxx"
    end
end

class Class_A
    include Mod_1
    def bar
        super
        puts "yyy"
     end
end

test = Class_A.new
test.bar 
```

我能想到的最好的做法是：

```
module Mod_1
    def Mod_1.foo
        puts "aaa"
    end
end

class Class_A
    include Mod_1
    def foo
        Mod_1.foo
        puts "bbb"
     end
end

test = Class_A.new
test.foo 
```

有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:14:05.830

见下文：

```
module Bar
    def foo
        puts "first"
    end
end

class Class_A
    include Bar
    alias old_foo foo
    def foo
        old_foo
        puts "second"
    end
end

Class_A.new.bar 
```

返回：

```
"first"
"second" 
```

这使用了别名。我建议专门为 Ruby 查找它们，以了解您正在尝试做的事情。

阅读： [http ://ruby.about.com/od/rubyfeatures/a/aliasing.html](http://ruby.about.com/od/rubyfeatures/a/aliasing.html)

# magento - 谷歌标签管理器和 Magento 商店

> ID：14476010
> 
> 赞同：1
> 
> 时间：2013-01-23T09:13:00.263
> 
> 标签：magento, google-analytics, statistics, tracking, google-tag-manager

我尝试将 Google Tag Manager 与 Magento 连接起来。在谷歌网站上，我找到了几个`Data Layer Variable Names`.

```
<script>
  dataLayer = [{
    'pageCategory': 'signup',
    'visitorType': 'high-value'
  }];
</script> 
```

是否有任何网站或地方可以找到 magento 数据层的名称，例如

*   ID
*   姓名
*   库存单位
*   类别
*   价格
*   数量

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:25:34.873

GTM 可以为电子商务交易使用预定义的宏名称，如下所示：

```
<script> 
dataLayer = [{ 
  'transactionId': '1234', 
  'transactionDate': '13112012', 
  'transactionType': 'Type 1', 
  'transactionAffiliation': 'ACME Clothing', 
  'transactionTotal': 25.60, 
  'transactionShipping': 5.00, 
  'transactionTax': 1.00, 
  'transactionPaymentType': 'Paypal', 
  'transactionCurrency': 'EUR', 
  'transactionShippingMethod': 'Store pickup', 
  'transactionPromoCode': '', 
  'transactionProducts': [{ 
    'id': '12', 
    'name': 'Red leather boots', 
    'sku': '45622LTHRBOOTS', 
    'category': 'Shoes > Boots', 
    'price': 450.00, 
    'quantity': 2 
    }, 
    { 
    'id': '14', 
    'name': 'Black leather jacket', 
    'sku': '456VESRTE', 
    'category': 'Clothing > Jackets', 
    'price': 750.00, 
    'quantity': 1 
    }] 
}]; 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:40:24.050

据我了解，在 Google 跟踪代码管理器中，您在一个容器中工作，针对您的一个或所有网站。每个容器都有自己的数据层（可以随意命名）。在这个数据层中，您推送变量和事件，所有这些都是完全用户定义的。这意味着没有真正的“magento 数据层”，只有数据层，其中包含您定义的变量。

如果您的 magento 标签需要一个 sku 值，您应该自己在数据层中定义它，例如：

```
<script>
  dataLayer = [{
    'idSku': '102456',
    'category': 't-shirt'
  }];
</script> 
```

此数据层应在您的 google 标签管理器脚本上方定义，否则这些变量或事件对标签管理器不可用。

如果您确实想稍后添加变量，例如在特定的点击事件之后，您可以使用以下脚本将其异步添加到数据层：

```
dataLayer.push({'variable_name': 'variable_value'}); 
```

如果您实际上不知道需要定义哪些变量，您可能应该阅读 magento 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:19:53.840

根据我对 Google Tagmanager 的理解，您必须将 GTM 中的变量名称定义为宏。如果您没有访问 google Tagmanager 的权限，请询问网站管理员或营销人员或曾经处理过它的人来创建您想要的宏。然后您可以在 Magento 代码中使用相同的名称。

让我知道这是否回答了您的问题。

# c# - 如何从 DevExpress gridView 中删除（不隐藏）列？

> ID：14476014
> 
> 赞同：1
> 
> 时间：2013-01-23T09:13:05.520
> 
> 标签：c#, gridview

我将数据加载到`GridView`using 中`DataSet`。起初数据绑定，它运作良好。但是当我运行返回不同列的查询时，`GridView`显示新列加上旧列。我试过这个`gridView1.Columns.Clear()`方法，但它并没有解决问题。

以下是一些代码：

```
// loading data into dataset
dataSet dsGrid = new dataSet();
string dtMember = "kpi";

// note: "thequery" is query generated based on user's selection
using (MySqlDataAdapter da = new MySqlDataAdapter(thequery, myCn))
{
da.Fill(dsGrid, dtMember);
}

// set the gridControl's datasource
gc_report.DataSource = null;

// clear the columns
gridView1.Columns.Clear();

// bind the data
gc_report.DataSource = dsGrid;
gc_report.DataMember = dtMember; 
```

当我运行我的应用程序时，它运行良好，但是如果查询返回不同的列，尽管我已经放置了集合的`Clear()`方法，但旧的列仍然出现。`gridView1.Columns`

如何设置`gridView1`，所以网格总是显示当前查询？

# android - 使用单击侧边栏导航菜单项调用活动

> ID：14476019
> 
> 赞同：1
> 
> 时间：2013-01-23T09:13:24.563
> 
> 标签：android, android-intent, android-emulator, android-side-navigation

如何在 Android 中使用侧边导航时调用 Activity。

我正在使用这个示例：Android 的导航菜单（基于 Google+ 应用程序）

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

在这里，我想要，每当用户单击**Home**时需要调用*CategoryActivity*并且何时单击**Home2**然后需要调用*OptionsActivity*等等.....

**RibbonsampleActivity.Java：**

```
public class RibbonsampleActivity extends Activity implements iRibbonMenuCallback {
/** Called when the activity is first created. */

private RibbonMenuView rbmView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        rbmView = (RibbonMenuView) findViewById(R.id.ribbonMenuView1);
        rbmView.setMenuClickCallback(this);
        rbmView.setMenuItems(R.menu.ribbon_menu);     
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        if (id == android.R.id.home) {
            rbmView.toggleMenu();
            return true;
        } else {
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public void RibbonMenuItemClick(int itemId) {
        // Handle item selection

    }
         } 
```

**功能区菜单.xml：**

```
 <menu
 xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/ribbon_menu_home" android:title="Home" android:icon="@drawable/ic_launcher"></item>
<item android:id="@+id/ribbon_menu_home2" android:title="Home2" android:icon="@drawable/ic_launcher"></item>
<item android:id="@+id/ribbon_menu_home3" android:title="Home3" android:icon="@drawable/ic_launcher"></item> 
```

我想通过使用特定的侧栏导航项来调用活动：

*首页 > 类别活动*

*Home2 > 选项活动*

*Home3 > 箭头活动*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:32:28.167

你有一个空指针`getActionBar().setDisplayHomeAsUpEnabled(true);`

`getActionBar()`返回空值。这可能有几个原因，很可能这可能是您的项目设置的问题。如果您设置了“全屏”或“无标题栏”主题，请检查您的 AndroidManifest.xml 并删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T06:39:57.787

我面临着同样的问题。这个问题的解决方案是你需要使用 Fragment 而不是 Activity。最佳示例：[http ://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/](http://www.androidhive.info/2013/11/android-sliding-menu-using-navigation-drawer/)

# php - 如何在 yii 中为验证规则创建自定义函数？

> ID：14476021
> 
> 赞同：1
> 
> 时间：2013-01-23T09:13:31.377
> 
> 标签：php, yii, validation

我创建了一个包含一些实体（比如姓名、地址等）的表单。我已经在模型类中定义了验证规则。客户端验证按要求完美运行。现在我需要创建自定义验证规则。为此，参考[http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/#hh0](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/#hh0)，我在我的模型中创建了一个名为 valid_number() 的方法，并定义了一个简单的空值检查（我知道有用于验证空值、电子邮件、密码等的内置规则。这里我演示了一种简单的验证方法，实际上我正计划进行一些自定义验证）。请参考下面的代码。请让我知道我做错了什么。

//模型

```
class Employee extends CActiveRecord{
  public $number;
  public function rules(){
     return array(
                  array('number','valid_number'),
                  );
  }

 public function valid_number($attribute,$params){
    if($this->$attribute == '' ){
         CModel::addError($attribute, 'Number is null');
    }
   } 
```

//看法

```
</fieldset>
   <?php echo $form->textFieldRow($model, 'number'); ?>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:26:11.610

`CModel::addError`应该是`$this->addError`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T05:56:55.477

```
<?php 
$this->addError($attribute, 'Your error message');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-06T15:18:25.573

你为什么要调用静态函数`CModel::addError`？

您可以只调用`addError`该对象并且它可以工作：

```
public function valid_number($attribute, $params) {
    if ($this->$attribute == '' ) {
        $this->addError($attribute, 'Number is null');
    }
} 
```

# ios - 无法浏览文本字段

> ID：14476023
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:13:42.037
> 
> 标签：ios, navigation, uitextfield

我想浏览 UITextfields，但我有一个问题，因为 nextresponder 总是为零，我不明白为什么。因此导航不起作用。

我使用这种方法：

```
 - (BOOL)textFieldShouldReturn:(UITextField*)textField {

UITableViewCell * curentCell = (UITableViewCell *)[[textField superview] superview];
NSIndexPath * indexPath = [tableView indexPathForCell:curentCell];

NSInteger nextTag;
if (indexPath.row == 3)
    nextTag = textField.tag + 3;
else if (indexPath.row == 6)
    nextTag = textField.tag + 1;
else if (indexPath.row == 7)
    nextTag = textField.tag + 1;
else if (indexPath.row == 8)
    nextTag = textField.tag + 2;

UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];

if (nextResponder) {
    [nextResponder becomeFirstResponder];
} else {
    [textField resignFirstResponder];
}

[self deleteBarButton];

tableView.contentInset = UIEdgeInsetsMake(0, 0, 0, 0);

return NO;
} 
```

这是我初始化单元格的方式：

```
- (void) initCells
{
NSArray *topLevelObjectsProdus = [[NSBundle mainBundle] loadNibNamed:@"CellProdusAsigurareHeader" owner:self options:nil];
cellHeader = [topLevelObjectsProdus objectAtIndex:0];
UIImageView * img = (UIImageView *)[cellHeader viewWithTag:1];
img.image = [UIImage imageNamed:@"calculator-casco.png"];

NSArray *topLevelObjectsMarca = [[NSBundle mainBundle] loadNibNamed:@"CellAutovehicul" owner:self options:nil];
cellMasina = [topLevelObjectsMarca objectAtIndex:0];
UILabel * lblCell = (UILabel *)[cellMasina viewWithTag:2];
UIImageView * imgBgAuto = (UIImageView *)[cellMasina viewWithTag:5];
imgBgAuto.image =[UIImage imageNamed:@"alege-masina-portocaliu.png"];

lblCell.textColor = [YTOUtils colorFromHexString:ColorTitlu];
lblCell.text = @"Alege masina";

NSArray *topLevelObjectsProprietar = [[NSBundle mainBundle] loadNibNamed:@"CellPersoana" owner:self options:nil];
cellProprietar = [topLevelObjectsProprietar objectAtIndex:0];
UIImageView * imgBgProprietar = (UIImageView *)[cellProprietar viewWithTag:5];
imgBgProprietar.image =[UIImage imageNamed:@"alege-masina-portocaliu.png"];
UILabel * lblCellP = (UILabel *)[cellProprietar viewWithTag:2];
lblCellP.textColor = [YTOUtils colorFromHexString:ColorTitlu];
lblCellP.text = @"Alege proprietar";

NSArray *topLevelObjectsnrKm = [[NSBundle mainBundle] loadNibNamed:@"CellView_Numeric" owner:self options:nil];
cellNrKm = [topLevelObjectsnrKm objectAtIndex:0];
txtNumarKm = (UITextField *)[cellNrKm viewWithTag:2];
[(UILabel *)[cellNrKm viewWithTag:1] setText:@"Numar kilometri autovehicul"];
[(UITextField *)[cellNrKm viewWithTag:2] setKeyboardType:UIKeyboardTypeNumberPad];
[YTOUtils setCellFormularStyle:cellNrKm];

NSArray *topLevelObjectsCuloare = [[NSBundle mainBundle] loadNibNamed:@"CellView_String" owner:self options:nil];
cellCuloare = [topLevelObjectsCuloare objectAtIndex:0];
txtCuloare = (UITextField *)[cellCuloare viewWithTag:2];
[(UILabel *)[cellCuloare viewWithTag:1] setText:@"Culoare autovehicul"];
[YTOUtils setCellFormularStyle:cellCuloare];

NSArray *topLevelObjectscalc = [[NSBundle mainBundle] loadNibNamed:@"CellCalculeaza" owner:self options:nil];
cellCalculeaza = [topLevelObjectscalc objectAtIndex:0];
UIImageView * imgBgCalculeaza = (UIImageView *)[cellCalculeaza viewWithTag:1];
imgBgCalculeaza.image =[UIImage imageNamed:@"calculeaza-casco.png"];
UILabel * lblCellC = (UILabel *)[cellCalculeaza viewWithTag:2];
lblCellC.textColor = [YTOUtils colorFromHexString:ColorTitlu];
lblCellC.text = @"Cere oferta";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:26:37.460

我认为你应该通过：[响应者](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html#//apple_ref/doc/uid/10000060i-CH3-SW24)

我注意到另一件事：[如何浏览文本字段？](https://stackoverflow.com/questions/1347779/how-to-navigate-through-textfields-next-done-buttons)那 ...

**`All "tabbable" UITextFields are on the same parent view.`**

所以也检查一下。

希望对您有所帮助。

# android - java.io.eofexception

> ID：14476024
> 
> 赞同：0
> 
> 时间：2013-01-23T09:13:44.013
> 
> 标签：android

这个错误是什么意思？

以下是我的 logcat 输出：

```
01-23 17:09:29.120: W/System.err(24339): java.io.EOFException
01-23 17:09:29.120: W/System.err(24339):    at libcore.io.Streams.readAsciiLine(Streams.java:203)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:784)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
01-23 17:09:29.130: W/System.err(24339):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
01-23 17:09:29.130: W/System.err(24339):    at com.sfcca.coverflow.Store$downloadMagazine.doInBackground(Store.java:881)
01-23 17:09:29.130: W/System.err(24339):    at com.sfcca.coverflow.Store$downloadMagazine.doInBackground(Store.java:1)
01-23 17:09:29.130: W/System.err(24339):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-23 17:09:29.130: W/System.err(24339):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-23 17:09:29.130: W/System.err(24339):    at java.lang.Thread.run(Thread.java:856) 
```

根据 logcat，这是代码的一部分，其中存在错误：我正在尝试从服务器检索图像 url，然后下载它们

```
try {
                    HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
                    conn.setDoInput(true);
                    conn.connect();
                    InputStream in = conn.getInputStream();
                    Log.i("im connected", "Download");
                    bmImg = BitmapFactory.decodeStream(in);

                    File filename;
                    try {
                         // GET EXTERNAL STORAGE, SAVE FILE THERE
                        File storagePath = new File(Environment.getExternalStorageDirectory(),"/Futsing/issue"+issueNumber+"/");
                        storagePath.mkdirs();

                        filename = new File(storagePath + "/page"+number+".jpg");
                        FileOutputStream out = new FileOutputStream(filename);
                        bmImg.compress(Bitmap.CompressFormat.JPEG, 90, out);

                        out.flush();
                        out.close();
                        in.close();
                        MediaStore.Images.Media.insertImage(getContentResolver(),filename.getAbsolutePath(), filename.getName(),
                                filename.getName());          

                         // displayImage();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }   
                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T05:13:02.690

试试这个[Android HttpsUrlConnection eofexception](https://stackoverflow.com/questions/15411213/android-httpsurlconnection-eofexception)

看起来你需要添加

```
if (Build.VERSION.SDK != null && Build.VERSION.SDK_INT > 13) { urlConnect.setRequestProperty("Connection", "close"); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:28:41.127

EOFException 表示文件结束 (EOF) 异常。EOF 用于指示文件的结束。通常，如果您想读取文件直到最后，您会在未达到 EOF 条件的情况下执行一段时间操作。

它有点类似于字符串末尾的“/0”。EOF 用于标记文件的结尾

您可能会在达到 EOF 后尝试读取文件，这将导致引发异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T11:12:24.670

我的问题是我用于上传文件的网络连接。切换网络连接（到我的 LAN wifi 网络）后一切正常。我在本地服务器上对其进行测试，并尝试使用 LAN 网络以外的外部网络连接上传文件。希望这可以帮助。

# ssh - 通过 SSH 远程执行命令的 Cmd 语法

> ID：14476026
> 
> 赞同：1
> 
> 时间：2013-01-23T09:13:50.413
> 
> 标签：ssh

我想启动驻留在另一个网络中的另一台 linux 机器上的应用程序服务器，因此需要 SSH。我该怎么做？像这样的东西？：

```
ssh user@host password /home/user/server/bin/run.sh 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T07:26:32.073

您可以使用命令生成一个 ssh 公钥/私钥对`ssh-keygen`，然后将您的公钥附加到目标主机的 .ssh/authorized_keys 文件中，然后您可以省略上面的“密码”部分。

```
ssh-keygen -t rsa
scp .ssh/id_rsa.pub user@host:.ssh/authorized_keys
ssh user@host
chmod og-rw .ssh/authorized_keys 
chmod a-x .ssh/authorized_keys
chmod 700 .ssh 
```

# xml - 从 Visual Basic 验证 xml

> ID：14476030
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:13:56.377
> 
> 标签：xml, vb.net, sql-server-2008, xsd, xsd-validation

我将 .NET 与 Visual Basic 一起使用。我有一个对 SQL 服务器执行 SQL 查询的代码，结果以 XML 格式存储在 XML 文件中。现在我在与 XML 结果相同的目录中手动创建了一个 XSD 文件，并想知道如何使用 VB 中的 XSD 验证 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:23:38.347

像这样的东西：

```
Dim tr as XmlTextReader = new XmlTextReader(xmlFilePath)
Dim vr as XmlValidatingReader = new XmlValidatingReader(tr)
Dim xsc as XmlSchemaCollection = new XmlSchemaCollection
xsc.Add(xsdTargetNamespace, xsdFilePath)
vr.Schemas.Add(xsc) 
```

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/hwhexew4%28v=vs.71%29.aspx)。

# c# - 在 Windows Phone 中异步运行委托

> ID：14476036
> 
> 赞同：0
> 
> 时间：2013-01-23T09:14:11.007
> 
> 标签：c#, windows-phone-7, asynchronous, delegates

在桌面框架中，我可以运行`asynchronously`委托`BeginInvoke()`：

```
Action<string> myAction;
myString = "i am string";
myAction.BeginInvoke(myString, res => {
                                myAction.EndInvoke(res);
                            }, null); 
```

但是在`Windows Phone`我做不到，因为不能运行委托`asynchronously`。

因此，当我尝试使用 运行委托时`Task`，出现错误：

> 任务 ts = Task.Factory.StartNew(myAction);

错误：转换`"System.Action <string>"`为`"System.Action"`不可能。当然，我应该提交我的字符串。

有任何想法吗。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:05:04.720

只需使用 lambda 将参数传递给您的函数：

```
Task ts = Task.Factory.StartNew(() => myAction(myString)); 
```

# sencha-touch - 商店配置生效前如何执行代码？

> ID：14476043
> 
> 赞同：0
> 
> 时间：2013-01-23T09:14:37.060
> 
> 标签：sencha-touch, sencha-touch-2

在我们的应用程序中，我们依靠 sessionStorage 进行持久化。但是，在移动 Safari 上，在私密模式下浏览时 sessionStorage 不可用。

但是，对于那些在私人模式下使用 Safari 的客户，可以切换到内存中的方法。我们的应用程序在某种程度上仍然可以使用（刷新浏览器时您会丢失数据，但由于它是一个单页应用程序，因此您永远不必刷新）。

在开发模式下修复很容易。但是，在运行生产构建之后，我遇到了一个巨大的问题。

所以，代码值一千字。这是我们目前使用的：

**索引.html**

```
//...
<script type="text/javascript">
    var isSessionStorageAvailable = true;
    var storage =  window.sessionStorage;
    if (typeof window.sessionStorage == 'undefined' || window.sessionStorage === null) {
        isSessionStorageAvailable = false;
    } else try {
        storage.setItem('__ccTest', '__ccTest');
    } catch (err) {
        isSessionStorageAvailable = false;
    }

</script>

<script id="microloader" type="text/javascript" src="../sencha/microloader/development.js"></script>
//... 
```

**myStore.js**

```
Ext.define('App.store.Quote', {
extend: 'Ext.data.Store',
requires: ['App.model.QuoteItem','Ext.data.proxy.SessionStorage'],

config :{
    model: 'App.model.QuoteItem',
    autoLoad: true,
    autoSync: true,
    identifer: 'uuid',
    proxy:{
        type: isSessionStorageAvailable ? 'sessionstorage' : 'memory',
        id:'ccCart'
    }
},
//... 
```

因此，在加载 sencha get 之前，我们首先检查 sessionStorage 并设置一个全局变量。因此，在存储文件加载时会选择正确的配置。

但是，我真的不喜欢这种解决方案，因为我不得不更改 index.html 文件。在开发模式下，您可以在 app.js 文件中的任何位置编写此检查，因为所有其他文件都是在之后加载的。但在生产中并非如此。所以我想知道你如何在不改变 index.html 文件的情况下正确地做到这一点？

**更新**

我也尝试像这样使用应用程序：

```
applyProxy: function(proxy, oldProxy){

    proxy.type = 'sessionstorage';
    var storage =  window.sessionStorage;
    if (typeof window.sessionStorage == 'undefined' || window.sessionStorage === null) {
        proxy.type = 'memory';
    } else try {
        storage.setItem('__ccTest', '__ccTest');
    } catch (err) {
        proxy.type = 'memory';
    }

    this.callParent([proxy, oldProxy]);
} 
```

然而，一些代码第一次在这个 store 上调用 sync() 时，它会在 sencha 框架内引发错误：

它在这一行的 store 类的同步方法中（它来自缩小的源，抱歉）：

```
d.getProxy().batch({operations: b,listeners: d.getBatchListeners()}) 
```

它会引发错误，因为 getProxy() 返回未定义。所以似乎应用程序没有工作:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:25:52.157

使用应用程序...

```
Ext.define('App.store.Quote', {
    extend   : 'Ext.data.Store',
    requires : ['App.model.QuoteItem', 'Ext.data.proxy.SessionStorage'],

    config : {
        model     : 'App.model.QuoteItem',
        autoLoad  : true,
        autoSync  : true,
        identifer : 'uuid',
        proxy     : {
            id : 'ccCart'
        }
    },

    applyProxy : function (config, oldProxy) {
        config.type = isSessionStorageAvailable ? 'sessionstorage' : 'memory';

        return this.callParent([config, oldProxy]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:43:46.440

只需像这样创建您的商店：

```
Ext.define('App.store.Quote', {
extend: 'Ext.data.Store',
requires: ['App.model.QuoteItem','Ext.data.proxy.SessionStorage'],

config :{
    model: 'App.model.QuoteItem',
    autoLoad: true,
    autoSync: true,
    identifer: 'uuid'
} 
```

然后，每当您检查 sessionStorage 是否可用时，只需执行

```
myStore.setProxy({
  type: isSessionStorageAvailable ? 'sessionstorage' : 'memory',
  id:'ccCart'
}); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:05:51.590

您确定 else..try 括号不会引起问题（JSHint 抱怨）吗？

```
var isSessionStorageAvailable = true;
var storage =  window.sessionStorage;
if (typeof window.sessionStorage == 'undefined' || window.sessionStorage === null) {
    isSessionStorageAvailable = false;
} else {
  try {
    storage.setItem('__ccTest', '__ccTest');
  } catch (err) {
    isSessionStorageAvailable = false;
  }
} 
```

# web-services - 如何在 joomla api/plugin 中访问 getdbo？

> ID：14476044
> 
> 赞同：0
> 
> 时间：2013-01-23T09:14:40.843
> 
> 标签：web-services, api, plugins, joomla

我正在 joomla 中创建 Web 服务/api 以供我的移动应用程序访问。

当我尝试使用...创建数据库对象时

```
$db = &JFactory::getDbo(); 
```

我收到错误为..

```
Fatal error: Call to undefined method ClassName::getDBO() in <Path> on line 108 
```

我的疑问是，

我们可以在 plugin/api 中访问 joomla 库函数或数据库函数吗？

如果是怎么办？

如果没有为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:43:31.630

是的，您可以从外部访问库和数据库功能，但您需要先导入相关部分。

```
//init Joomla Framework
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define( 'JPATH_BASE', realpath(dirname(__FILE__).DS.'..'.DS.'..'.DS.'..'));

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe = JFactory::getApplication('site'); 
```

应该做得很好。然后打电话

```
//DBQuery
$database =& JFactory::getDBO(); 
```

然后从那里去！

# opengl - XNA中的OpenGL可以吗？

> ID：14476048
> 
> 赞同：1
> 
> 时间：2013-01-23T09:14:52.967
> 
> 标签：opengl, xna

我在徘徊有没有一种方法可以使用 OpenGL 在 XNA 中工作，这不包括 Xamarin 产品，如果是的话，是否有任何关于如何设置 XNA 库或它使用的任何东西的教程。在我购买 MonoDroid 之前，我需要这样的组合来开始我的项目，因此具有效果的项目可以轻松移植到 Android。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:41:44.783

Microsoft XNA 是基于 DirectX 构建的框架；你不能只在 OpenGL 上运行它。对您的问题的详细回答：您应该查看 MonoGame (http://monogame.codeplex.com/)：它是 XNA 的开源替代品，可在许多平台上运行。

它不是 XNA（您需要将您的项目重新定位到 MonoGame、IIRC），但它几乎是一个替代品（在几分钟到几小时内移植游戏的成功案例很多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:45:16.170

XNA 只是 DirectX。如果你想在 .NET 上使用 OpenGL，有多个库： [OpentTK](http://www.opentk.com/)（最流行的）或[SharpGL](http://sharpgl.codeplex.com/)

# c - 需要左值作为一元“&”操作数

> ID：14476052
> 
> 赞同：0
> 
> 时间：2013-01-23T09:15:10.433
> 
> 标签：c, linux, visual-c++, compilation

调用函数时出现问题，如下所示：

函数调用：

```
Sbac_DecodeBin(pstSlice->pstBAC,&(UINT8)ui32Abs_Mvd_G_0[0],
pstSlice->pstCtxModel->aucABS_MVD_GREATER_0_1_FLAG,0,
pstSlice->pstValMps->aucABS_MVD_GREATER_0_1_FLAG,BSHandle); 
```

函数声明：

```
VOID Sbac_DecodeBin(Init_BAC *pstBAC,UINT8* piBinValue,UINT8* pucSateIdx,
UINT8 CtxInc,UINT8* pucValMPS,HEVCD_BS_HANDLE BSHandle) 
```

上面的代码在 Visual c++ 2008 中没有给出任何编译错误但是在 linux 中使用 makefile 创建目标文件时`gcc -c`我得到了错误：

```
lvalue required as unary '&' operand 
```

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:29:37.117

将调用中的第二个参数从 更改 `&(UINT8)ui32Abs_Mvd_G_0[0]`为`(UINT8 *)ui32Abs_Mvd_G_0`。

错误消息的原因是您不能获取不是左值的地址。来自 uint32 -> uint8 的强制转换不符合条件。从 uint32* 到 uint8* 的转换可以。

顺便说一句：你正在寻找一个潜在的字节顺序错误。在 little endian 上，您正在传递 uint32 的 LSB 的地址，在 big endian 上，您正在传递 MSB 的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:19:42.133

`UINT8`是非标准的。我猜它是特定于 MSVC++ 编译器的。尝试使用`uint8_t`defined in`stdint.h`代替。用于`(uint8_t*)ui32Abs_Mvd_G_0[0]`匹配类型。

**编辑**根据下面评论中的讨论，这应该有效`(UINT8*)ui32Abs_Mvd_G_0[0]`

# asp.net-mvc - 面向初学者的 Asp.net MVC 4 EF Code First 会员资格提供商

> ID：14476053
> 
> 赞同：3
> 
> 时间：2013-01-23T09:15:21.170
> 
> 标签：asp.net-mvc, ef-code-first, asp.net-membership

虽然我问了一些关于如何在 ASP.NET MVC 4 中使用会员提供程序的问题，但几乎没有得到任何回应。我需要时间（作为新手）开始使用 ASP.NET MVC 4 中的成员资格提供程序。我一直在阅读文章，尝试一些东西，但这只会增加混乱而不是帮助。

初学者对以下查询的答案是什么：

1.  在决定我应该为哪个项目使用哪个成员之前，我想尝试所有的成员提供者（包括简单的成员提供者）。我可以在 ASP.NET MVC 4 中使用哪些成员资格提供程序以及如何配置其中的每一个。任何文档或链接？
2.  虽然 Internet 模板带有预配置的帐户控制器，用于设置会员功能，但我如何将会员功能添加到基本模板。为了使用会员提供者配置会员资格，我应该遵循哪些步骤（我假设不同的会员提供者会有不同的步骤/配置/设置）。
3.  运行使用 Internet 项目模板创建的 ASP.NET MVC 4 项目（不对其进行任何更改）在数据库中创建 5 个表，即 UserProfile、webpages_Membership、webpages_OAthMembership、webpages_Roles、webpages_UsersInRoles）。在`AccountModel.cs`我只看到一个定义，UserProfile。其他表在哪里定义。我是否总是需要在数据库中拥有所有这些表才能使用成员资格。我可以自定义它们、重命名它们或选择不使用其中的一些吗？
4.  我在 web.config 中没有看到 Internet 项目模板的任何成员资格配置，但正在使用成员资格。在一些文章教程中，我看到人们通过添加`<membership></membership>`到 web.config 来配置它。什么时候需要将配置设置添加到 web.config，什么时候不需要？

我认为会员提供者旨在让开发人员的生活变得轻松，但对我来说，这让它变得更加困难。我知道我真的需要研究它，这就是我在过去 7、8 天里一直在尝试的东西，但无法弄清楚。任何帮助、链接（希望不是我多次浏览的链接）都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:24:50.137

我同意你的看法，关于哪些会员类型做的很糟糕的指导。

1.  您可以将任何提供程序与 ASP MVC 一起使用。Visual Studio 中的默认模板即 Internet MVC 应用程序是唯一使用 SimpleMembership 的模板。

2.  好问题，我根本没有找到任何明确的、体面的文档。据我所知，大多数会员的设置都非常相似。

3.  至少 SimpleMembership 将创建所需的数据库表，如果它们不存在则需要这些表。我认为您唯一可以真正自定义的是您的用户表。

4.  我认为就像 sql 表一样，web.config 中的成员资格标签是隐含的。如果您接受默认值，它们就会神奇地起作用。

我找到的最佳链接是 [http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-特性/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

在那篇文章中，还有另外两个也很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T00:37:44.007

对于问题 3，我尝试了一些方法，结果是：

**是**的：您可以将新列添加到 UserProfile （以及所有其他表，我猜）

**否**：即使您已修改 AccountModels 中的代码以匹配新表名，您也无法重命名该表。在这种情况下，当您启动应用程序时，将再次创建一组具有旧名称的表。并且 MVC4（MembserShip、WebSecurity、Users、Roles....）提供的所有代码都将使用旧表。

而且，我从未找到有关如何重命名这些表的任何信息。

# c# - 使用多个条件的 SQL 搜索查询

> ID：14476055
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:15:27.143
> 
> 标签：c#, sql, where, sqlparameter

我的问题是，我制作了一个子表单进行搜索，但是我的 sql 查询和参数有问题，我的代码是

```
SqlConnection sc = new SqlConnection(
    "Data Source=MOHAMMED-PC;Initial Catalog=salessystem;Integrated Security=True");

SqlCommand command = new SqlCommand(
    "Select * from customers WHERE (docno = @doc) OR (NAME LIKE @name ) OR (salepoint = @salepoint)", sc);
DataTable dt = new DataTable();
command.Parameters.AddWithValue("@doc", doctxt.Text);
command.Parameters.Addwithvalue("@name", nametxt.Text);
command.Parameters.AddWithValue("@salepoint", salepointtxt.Text);
SqlDataAdapter sda = new SqlDataAdapter(command, sc);
sda.Fill(dt);
dataGridView1.DataSource = dt; 
```

我在 sql 适配器命令和 where 子句命令中有错误，有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:21:08.067

三件事：

1.  您在此行有错字

    ```
    command.Parameters.Addwithvalue("@name", nametxt.Text); 
    ```

    方法是`AddWithValue`（注意大小写差异）

2.  的[构造函数`SqlDataAdapter`](http://msdn.microsoft.com/en-us/library/awzk4kc1.aspx)接受命令但没有连接，因为命令已经包含连接，所以这是正确的：

    ```
    SqlDataAdapter sda = new SqlDataAdapter(command); 
    ```

    最后可能是最重要的：

3.  如果你使用`LIKE`你需要使用通配符`%`：

    ```
    command.Parameters.AddWithValue("@name", string.Format("%{0}%",nametxt.Text); 
    ```

# mysql - Mysql，如何摆脱重复记录，加入？

> ID：14476056
> 
> 赞同：1
> 
> 时间：2013-01-23T09:15:31.177
> 
> 标签：mysql, sql, duplicates

让我们想象两个表：

```
username
 id, name
 1   username1
 2   username1
 3   username2

emails
 id, user, name
 1   1     assdf@sdf.hu
 2   2     afgdf@sdf.hu
 3   3     gfg@sdf.hu 
```

问题是有重复的条目。我不能简单地丢弃它们，因为记录与它们相连，所以它们会丢失。（例如 afgdf@sdf.hu 电子邮件地址）。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:21:28.990

`update emails set user=1 where user=2`然后你可以简单地在 **用户**名表中删除包含**id 2的行**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:39:47.780

更新您的用户名表。对于每个重复的名称（triplet、quat...），更新 emails 表并将用户替换为原始用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:16:56.983

[SQLFiddle 演示](http://sqlfiddle.com/#!2/86925/1)

首先，您应该更新表`emails`以替换`user`为正确的值以消除要删除的值。

```
update emails set user=(select min(id) 
                        from username 
                       where name=
                      (select name from username where id=emails.user)); 
```

现在从`username`表中删除重复记录。`id`我们只为每个MINIMAL 保留记录`name`：

```
DELETE t1.*
FROM username t1
LEFT JOIN (select min(id) mid from username group by name) t2 ON t1.ID = t2.mid
WHERE t2.mid is null; 
```**

# linux - RPM 中的中止/退出/返回宏

> ID：14476072
> 
> 赞同：1
> 
> 时间：2013-01-23T09:16:07.037
> 
> 标签：linux, redhat, rpm, abort

我正在写一个 RPM。在本`%prep`节中，我测试了 FS 的存在及其大小。如果不正确，我希望 RPM 退出。我找到了`%{error:"Oops dat failed!}`宏，但它实际上只是在 stderr 上打印并且无论如何都不会中止。

你有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:06:30.717

您希望它在`%pre`部分中，而不是`%prep`部分中。然后只需退出那个非零的迷你脚本，RPM 就不会安装。

该`%prep`部分仅在构建 RPM 本身时使用，而不是在安装它时使用。

# javascript - Node.js 阻止响应

> ID：14476077
> 
> 赞同：0
> 
> 时间：2013-01-23T09:16:14.710
> 
> 标签：javascript, ajax, node.js, express, blocking

当我的一个“长”响应以某种方式阻止另一个 AJAX 请求时，我遇到了不愉快的情况。我同时调用 3 个不同的资源：

```
var list = ['/api/filters','/api/criteria/brands','/api/criteria/genders']  
list.forEach(function(item){$.post(item)}) 
```

在服务器端，我可以在日志文件中看到以下时间：

```
GET /api/filters 304 51ms
GET /api/criteria/genders 200 1ms
GET /api/criteria/brands 200 0ms 
```

这对我来说看起来很酷，但在浏览器中图片完全不同。

[带有谷歌浏览器网络标签的图片](http://postimage.org/image/hmatb7tlz/full/)

所以看起来浏览器首先等待答案（长请求），然后才收到最后两个结果。

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:05:06.960

节点服务器运行是单线程的，任何使用 CPU 周期的代码都会阻塞整个进程。

因此，如果`GET /api/filters`进行大量 CPU 密集型计算，它将阻塞任何其他请求，直到完成。添加一些关于它实际作用的更多信息可以帮助组合一个更好的答案。

如果您在那里有 IO 操作，请尝试使它们异步。这将允许节点在第一个执行 IO 时为其他 URL 提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:20:02.237

每个浏览器一次只处理特定数量的并发请求。如果您同时触发 10 个 ajax 请求，浏览器会将它们放在一个堆栈上并一个接一个地处理。

[您可以在这个问题](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)的 browsern 中找到有关并发请求的更多信息（因为其中还包括图像、javascript 等）。

# css - CSS on:hover 改变子属性

> ID：14476081
> 
> 赞同：0
> 
> 时间：2013-01-23T09:16:27.860
> 
> 标签：css, html, hover, parent-child

所以我想知道这是否可能。

我正在建立一个导航。

```
<nav id="navigation">
  <div class="nav_buttons"><a href="/">home</a></div>
  <div class="nav_buttons"><a href="/system/">system</a></div>
  <div class="nav_buttons"><a href="/studies/">studies</a></div>
  <div class="nav_buttons"><a href="/approach/">approach</a></div>
  <div class="nav_buttons"><a href="/about/">about</a></div>
  <div class="nav_buttons"><a href="/contact/">contact</a></div>
</nav> 
```

但我想要的是，当我将鼠标悬停在其中一个上时，div 的边框和 < a > 标签文本的颜色同时改变

我试过这个

```
 #navigation {
     text-align: center;
     height: 150px;
     padding-top: 100px;

    }
  .nav_buttons {    
    display: inline; 
    height: 40px;
    width: 100px;
    border-bottom: 1px solid black;
    margin-left: 20px;
    }
  #navigation a{
    margin-right: 50px;
    font-size: 20px;
    text-decoration: none;
    color: black;
    }

  div.nav_buttons:hover {
    border-bottom: 1px solid #ff3300;

  }
  div.nav_buttons:hover a{
    color:#ff3300;
  } 
```

但这只会改变预兆。我愿意使用 javascript，但我看到您可以更改子元素购买悬停在父元素上。

```
div#parent_element:hover div.chil_element {color: red;} 
```

任何简单地在 CSS 中做的建议都是史诗般的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:19:07.387

这取决于（以前的）规则特异性问题，因为您使用选择器分配了样式`#navigation a`。所以试试这个

```
#navigation > div:hover a {
    color:#ff3300;
} 
```

或简单地尝试`!important`

```
div.nav_buttons:hover a {
    color:#ff3300 !important;
} 
```

* * *

附带说明：您还可以避免对标记中的每个 div 使用重复的类名，而是使用`#navigation > div`来引用这些元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:24:14.270

你的代码很好。但我认为一些现有的样式正在覆盖您当前的样式。所以我建议使用如下的相对样式技术来达到预期的效果：

```
 #navigation div.nav_buttons:hover {
    border-bottom: 1px solid #ff3300;

  }

  #navigation div.nav_buttons:hover a{
    color:#ff3300;
  } 
```

查看[**演示**](http://jsfiddle.net/akhurshid/Bqeav/)

# asp.net - MVC 控制器不控制视图

> ID：14476084
> 
> 赞同：0
> 
> 时间：2013-01-23T09:16:40.543
> 
> 标签：asp.net, asp.net-mvc-3, razor

我有一个像这样在我的视图中调用的按钮

```
<form>
    <div class="field">
        <label for="product-name">Product Name</label><br />
        @Html.TextBoxFor(x=> x.Name, new {id="product-name",required="required"}) <br />
        <span class="helper">Give your product a name.</span>
        @ViewBag.mm
    </div>
    <div class="field">
        <label for="product-variety">Product Variety</label><br />
        <input id="product-variety" type="text" /><br />
        <span class="helper">Optionally, give your product a variety.</span>
    </div>
    <div class="field">
        <label for="product-description">Description</label><br />
        <input id="product-description" type="text" /><br />
        <span class="helper">Add an optional description to help identify your product.</span>
    </div>
    <div class="field">
        <label for="product-comments">Comments</label><br />
        <textarea id="product-comments"></textarea><br />
        <span class="helper">Add any further information or comments relating to this product.</span>
    </div>
    <input id="product-save-return" type="submit" value="Add Product and Return to Products" class="green-button" /> <input id="product-save-associate" type="button" value="Add Product and Associate with Sites" class="green-button" /> <input id="file-cancel" type="button" value="Cancel" class="green-button" /> 
```

在控制器中我有这样的功能

```
[HttpPost]
public ActionResult Add(Product product)
{
    SupplierContext db = new SupplierContext();
    Response.Write("Inside");
    ViewBag.mm = "xyz";
    if (ModelState.IsValid)
    {
        product.Key = Guid.NewGuid();
        product.Type = ProductType.Chemical;
        product.Status = EntityStatus.Default;
        db.Products.Add(product);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(product);
} 
```

但是当我单击按钮时，控制器中的功能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:23:18.413

您的按钮在表单/操作中吗？在 Razor 中，只需在以下语法中添加表单元素：

```
@using (Html.BeginForm())
{
    <div class="field">
        <label for="product-name">Product Name</label><br />
        @Html.TextBoxFor(x=> x.Name, new {id="product-name",required="required"}) <br />
        <span class="helper">Give your product a name.</span>
        @ViewBag.mm
    </div>
    <div class="field">
        <label for="product-variety">Product Variety</label><br />
        <input id="product-variety" type="text" /><br />
        <span class="helper">Optionally, give your product a variety.</span>
    </div>
    <div class="field">
        <label for="product-description">Description</label><br />
        <input id="product-description" type="text" /><br />
        <span class="helper">Add an optional description to help identify your product.</span>
    </div>
    <div class="field">
        <label for="product-comments">Comments</label><br />
        <textarea id="product-comments"></textarea><br />
        <span class="helper">Add any further information or comments relating to this product.</span>
    </div>
    <input id="product-save-associate" type="button" value="Add Product and Associate with Sites" class="green-button" />  <input id="file-cancel" type="button" value="Cancel" class="green-button" />
   <input id="product-save-return" type="submit" value="Add Product and Return to Products" class="green-button" />
} 
```

这可能是它没有在控制器中获取功能的原因。您也可以使用 AJAX 帖子在 javscript 中执行此操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:26:24.860

您还可以使用 ActionLink：

```
@Html.ActionLink("Add Product and Return to Products", "Add", "YourController") 
```

虽然这将是一个链接而不是一个按钮。

# odbc - Myob Odbc 插入

> ID：14476088
> 
> 赞同：0
> 
> 时间：2013-01-23T09:17:03.923
> 
> 标签：odbc, myob

执行 INSERT 后，是否有任何功能/查询使用 MYOB ODBC 从 MYOB Sale 中查询 ID？

例如我们可以在 SQL Server 中执行 SCOPE_IDENTITY() 来获取执行 INSERT 操作后的 ID 值。但是有没有使用 MYOB ODBC 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:16:30.700

不幸的是没有。在幕后，ODBC 驱动程序实际上只是自动化了手动 MYOB 导入过程。您可以做的最好的事情是再次查询数据库以获取最后一张发票（但这在多用户环境中会出现问题）或其他一些标准来识别您刚刚插入的发票。

随着 MYOB AccountRight Live API 的发布，这应该会在接下来的几个月中改变，但在那之前，ODBC 是你所坚持的。

米克

# javascript - Raphael.js 通过多个对象的交集创建透明度

> ID：14476092
> 
> 赞同：2
> 
> 时间：2013-01-23T09:17:22.173
> 
> 标签：javascript, canvas, svg, raphael, intersection

我正在创造一种“惊人的”效果来展示产品（客户“绝对需要它”！）。

我已经意识到效果[http://jsfiddle.net/EMpQd/9/](http://jsfiddle.net/EMpQd/9/)（看比解释更容易）。

我的问题是：在背景中设置一个矩形，然后在其上设置一个圆圈，我不仅需要在圆圈中，而且在矩形中，在圆圈覆盖的部分（也称为交叉点）中获得透明度。

**我怎样才能做到这一点？拉斐尔有可能吗？**

效果代码（不透明）：

```
var w = 800;
var h = 600;

var paper = Raphael(0, 0, w, h);

// I want to show this image through the effect (it's just an example)
paper.image("http://static.pourfemme.it/pfmoda/fotogallery/625X0/63617/borsa-alviero-martini-rodeo-drive.jpg", 0, 0, w, h);

// colored background
paper.rect(0, 0, w, h).attr("fill", "#999").attr("stroke-width", 0).attr("opacity", 1);

// the circle in which I'll show the product
var circle = paper.circle(400, 300, 1);

circle.attr({fill: "#FFF", stroke: "#FFF", "stroke-width": 0});

//expand the circle
circle.animate({r: w*2}, 10000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:39:42.440

您可以通过绘制外部对象然后将内部对象逆时针绘制到原始对象来制作带有路径的“甜甜圈”对象（感谢[这个 SO answer](https://stackoverflow.com/questions/3349651/how-to-achieve-donut-holes-with-paths-in-raphael)）。因此，您想通过绘制矩形然后在其中绘制圆形来创建遮罩对象。不幸的是，这意味着您必须以路径符号绘制所有内容，而不是使用方便的 rect 和 circle 对象。

```
var w = 800;
var h = 600;

var paper = Raphael(0, 0, w, h);

// i want to show this image through the effect
paper.image("http://static.pourfemme.it/pfmoda/fotogallery/625X0/63617/borsa-alviero-martini-rodeo-drive.jpg", 0, 0, w, h);

//path coordinates for bounding rectangle
var outerpath = "M0,0L" + w + ",0L" + w + "," + h + "L0," + h + "L0,0z";

//path coordinates for inner circle
var r = 1;
//see https://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path for explanation of the extra 0.1 pixel
var innerpath = "M" + (w/2) + "," + (h/2 - r) + "A" + r + "," + r + "  0 1,0 " + (w/2 + 0.1) + "," + (h/2 - r) + "z";

var path1 = outerpath + innerpath;
var mask = paper.path(path1).attr({stroke: 0, fill:  "#999"}); 
```

然后你向上半径，计算新路径，并为它设置动画：

```
r = 600;

var innerpath = "M" + (w/2) + "," + (h/2 - r) + "A" + r + "," + r + "  0 1,0 " + (w/2 + 0.001) + "," + (h/2 - r) + "z";

var path2 = outerpath + innerpath;

var anim = Raphael.animation({path: path2}, 2000);
mask.animate(anim.delay(1000)); 
```

[更新的小提琴](http://jsfiddle.net/EMpQd/13/)

# sql-server - 如何使用内部连接查询主数据库链接到 2 个彼此相同的子数据库

> ID：14476094
> 
> 赞同：0
> 
> 时间：2013-01-23T09:17:43.367
> 
> 标签：sql-server

我有一个包含主文件信息的库存表和 2 个移动历史表（当年和去年）。

我想使用查询来提取从（例如）去年六月到今年三月的代码，日期序列中的运动。

我对 SQL 比较陌生，并尝试使用以下 INNER JOIN 结构来执行此操作：

```
SELECT Code, Descrip, Category, MLast.Date, MLast.DocNo, MCurr.Date, MCurr.DocNo
    FROM Stock AS S 
INNER JOIN MoveTrnArc MLast ON MLast.Stockcode = S.Code
    AND MLast.Date >='2011/06/01' AND MLast.Date <='2012/03/31'
INNER JOIN MoveTrn MCurr ON MCurr.Stockcode = S.Code 
    AND MCurr.Date >='2011/06/01' AND MCurr.Date <='2012/03/31'
ORDER BY S.Code 
```

这将创建一个具有以下列结构的查询表：

```
Code | Descrip | Category | Date | DocNo | Date | DocNo | 
```

... LAST Year 表中的数据出现在第一个 Date/DocNo 列中，CURRENT Year 数据出现在第二个 Date/DocNo 列中。

我必须对查询做些什么才能让每个运动都在自己的行中，或者是否有更好、更有效的查询来实现这一点？

另外，我需要代码中列出的运动，然后是日期序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:21:47.633

使用`union all`而不是`joins`

```
select s.Code , s.Descrip , s.Category , t.Date , t.DocNo  
from 
(
select Stockcode, Date, DocNo from MoveTrnArc 
union all
select Stockcode, Date, DocNo from MoveTrn 
) t join Stock s on s.Code = t.Stockcode
where t.Date >='2011/06/01' AND t.Date <='2012/03/31' 
```

除了比较日期时要小心，如果 Date 列是类型 datetime 并且包含时间，您必须更改`t.Date <='2012/03/31'`为`t.Date <'2012/04/01'`包含从 3 月 31 日开始的所有行，因为 '2012/03/31' 被转换为 '2012/03/31 00:00 :00.000'

# mysql - 如果一个查询未获取数据，则 Mysql 查询不适用于连接

> ID：14476096
> 
> 赞同：0
> 
> 时间：2013-01-23T09:17:51.367
> 
> 标签：mysql, sql

我必须从下表中找到总库存和可用库存。表结构：

```
[Inventoryid] [inventory Type ] [issue status]
1              Mobile            Issued
2              Tablet            Not Issued
3              Mobile            Issued
4              Tablet            Not Issued 
```

所需的出口是

```
[Inventory Type] [Total Inventory]  [Available Inventory]
Mobile            2                  0
Tablet            2                  2 
```

请给我同样的查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:20:30.010

```
SELECT  inventoryType,
        COUNT(*) totalInventory,
        SUM(issuestatus = 'not issued') available
FROM    tableName
GROUP   BY inventoryType 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7f5bb/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:22:05.563

```
select inventory_type , count(*), sum(case when issue_Status = 'not issued' then 1
else 0 end) as status
From yourtable
group by inventory_type
; 
```

# bash - Bash Expect 脚本，发送命令

> ID：14476103
> 
> 赞同：1
> 
> 时间：2013-01-23T09:18:28.310
> 
> 标签：bash, expect

我有以下脚本工作。我希望将`send -- "/system identity print\r"`执行命令的结果保存到文件中，但它可能写得不好。目前，我只能将路径写入文件 tmp.

```
#!/bin/bash
HOSTNAME="xx.xx.xx.xx"
PORT="22422"
USER="admin"
PASS="pass"
TMP=$(mktemp)
PATH="/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin"

# Create Expect script
cat > $TMP << EOF
#exp_internal 1 # Uncomment for debug
set timeout -1
spawn ssh -p$PORT $USER@$HOSTNAME
match_max 100000
expect -exact "password:"
send -- "$PASS\r"
expect " > "
$nazwa send -- "/system identity print\r"
expect " > "
send -- "quit\r"
expect eof
EOF

# Run Expect script
#cat $TMP # Uncomment for debug
expect -f $TMP
echo $TMP >> log.log
# remove expect script
rm $TMP 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T14:26:41.523

由于您实际上是在开发您的脚本，请取消注释`exp_internal 1`以获取 Expect 来帮助您。

# javascript - 更改我的日期时间正则表达式以使输入秒数可选

> ID：14476104
> 
> 赞同：2
> 
> 时间：2013-01-23T09:18:29.790
> 
> 标签：javascript, regex

我正在尝试编写一个正则表达式，用于 javascript 函数，以测试日期时间。

我只想允许以下格式的日期：

```
YYYY-MM-DD HH:mm:ss
YYYY-MM-DDTHH:mm:ss
YYYY-MM-DD HH:mm
YYYY-MM-DDTHH:mm 
```

这是我迄今为止设法做到的：

```
/^(19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31)[ \/T\/t]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/ 
```

它做我想要的，除了需要小时、分钟和秒而不是小时和分钟，秒是可选的。

谢谢你的帮助！

我写了一个带有一些测试数据的小 jsFiddle，让你的生活更轻松。只需更新模式变量并运行它，表格就会匹配。

[http://jsfiddle.net/smMJC/](http://jsfiddle.net/smMJC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:22:03.237

**更新：**我更新了这个答案，将 (...) 更改为 (?:...)，这样您的捕获就不会被搞砸了。

试试这个：

```
/^(19[0-9]{2}|2[0-9]{3})-(0[1-9]|1[012])-([123]0|[012][1-9]|31)[ \/T\/t]([01][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$/ 
```

更新小提琴：http: [//jsfiddle.net/smMJC/5/](http://jsfiddle.net/smMJC/5/)

我所做的是改变

```
:([0-5][0-9]) 
```

到：

```
(?::([0-5][0-9]))? 
```

这意味着使该部分成为可选的。（双冒号是有意的，因为它在`(?: ... )?`外面是一个非捕获组，而在里面是一个文字“：”。

此外，您可能需要更改：

```
[ \/T\/t] 
```

到：

```
[ Tt] 
```

除非您真的想匹配以下字符串：

```
2013-01-01/15:30:30 
```

用斜线代替 T - 比较这两个演示：

*   [http://jsfiddle.net/smMJC/3/](http://jsfiddle.net/smMJC/3/)
*   [http://jsfiddle.net/smMJC/4/](http://jsfiddle.net/smMJC/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:59:52.510

改变

*   `[0-9]`到`\d`
*   简化时间指示器`[ t]`并添加不区分大小写的修饰符`/.../i`
*   秒`:([0-5]\d)`到可选`(?::([0-5]\d))?`

正则表达式：

```
/^(19|2\d)\d\d-(0[1-9]|1[012])-([123]0|[012][1-9]|31)[ t]([01]\d|2[0-3]):([0-5]\d)(?::([0-5]\d))?$/i 
```

[JSFiddle](http://jsfiddle.net/smMJC/9/)

如果您不需要捕获日期时间字符串的各个部分

*   `()`尽可能去掉括号
*   在需要的地方`()`用非捕获替换括号`(?:...)`

正则表达式：

```
/^(?:19|2\d)\d\d-(?:0[1-9]|1[012])-(?:[123]0|[012][1-9]|31)[ t](?:[01]\d|2[0-3]):[0-5]\d(?::[0-5]\d)?$/i 
```

[JSFiddle](http://jsfiddle.net/smMJC/8/)

# c# - 在 DoWork 中使用 Control.Invoke 和 ShowDialog 时的 BackgroundWorker 死锁

> ID：14476106
> 
> 赞同：0
> 
> 时间：2013-01-23T09:18:36.860
> 
> 标签：c#, winforms, backgroundworker, deadlock, invoke

我正在运行一个很长的任务，`BackgroundWorker`通过`ReportProgress`. 但是，在这个过程的中间，我需要进行 COM 调用以获取一些数据，并且我认为我需要在 UI 线程上进行。我尝试通过 Control.Invoke 执行此操作。但是，我遇到了僵局。不能`Control.Invoke`在`BackgroundWorker`(with `ShowDialog`) 中使用吗？

我试图简化代码：

```
 var log = new LogWindowForm();
        worker.DoWork += (sender, args) =>
        {
                creator.LogProgress = (s, i) => worker.ReportProgress(i,s);
                creator.GetMoreDataFunc = (s) => InvokeGetMoreDataOnGuiThread(log, s);
                ...
                var data = GetMoreDataFunc("id:"+id)
        };
        worker.RunWorkerAsync();
        log.ShowDialog();

    private Dictionary<string, string> InvokeGetMoreDataOnGuiThread(Control invokeControl, string id)
    {
        var data = new Dictionary<string, string>();
        Action action = () => data = GetMoreDataFromComObject(mainComObject, id);
        invokeControl.Invoke(action); // deadlock!
        return data;
    } 
```

## 编辑：

没有例外，用户界面不断更新，但它停止了进步。Break All 显示 Control.Invoke 调用中的工作线程和 ShowDialog 调用中某处的 GUI 线程。

GUI 线程似乎在消息循环中：

System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) + 0x65 bytes

我想这就是 UI 不断更新的原因。BackgroundWorker 内部是否有一些锁定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:28:48.220

一个猜测，因为我不知道 COM 对象做什么或需要什么：

COM 对象需要 UI htread 的原因可能是因为（在大多数情况下）UI 线程被标记为 STA 线程。

如果 COM 对象需要单线程 Appartment，您可以使用标记为 STA 线程的非 UI 线程。这样你就不再需要 UI 线程了。

请参阅：[您能解释一下 STA 和 MTA 吗？](https://stackoverflow.com/questions/127188/could-you-explain-sta-and-mta)

和：[.NET 中 STA 的解释](http://www.sellsbrothers.com/writing/askthewonk/WhatdoestheSTAThreadattri.htm)

以及[如何制作 .NET 线程 STA 或 MTA](http://msdn.microsoft.com/en-us/library/system.threading.apartmentstate.aspx)或[使用属性](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)

# java - 使用 jdbcTemplate 处理大型 ResultSet

> ID：14476107
> 
> 赞同：1
> 
> 时间：2013-01-23T09:18:41.660
> 
> 标签：java, spring, jdbc

我现在遇到的问题是调用的存储过程`jdbcTemplate`返回的记录量很大，百万条记录，这使得我们的java查询方法很慢。

我的 java 查询方法对结果进行分页，所以速度很慢。如何在不更改数据库存储过程的情况下改进这一点。也就是说，只查询特定的行，这样 java 方法就没有处理百万条记录来进行分页的负担。

```
public PageModel<Map<String, String>> query(String sql, final int offset, final int limit) throws ReportException {
    try {
        return jdbcTemplate.query(sql, new ResultSetExtractor<PageModel<Map<String, String>>>() {
            @Override
            public PageModel<Map<String, String>> extractData(ResultSet rs)
                    throws SQLException, DataAccessException {
                long startTime = System.nanoTime();
                PageModel<Map<String, String>> pageModel  = new PageModel<Map<String,String>>();
                List<Map<String, String>> list = new ArrayList<Map<String,String>>();
                int rows = 0;
                // skip rows
                for (int i=0; i<offset&&rs.next(); i++) {
                    rows++;
                }
                // get rows
                for (int i=0; i<limit&&rs.next(); i++) {
                    Map<String, String> map = new HashMap<String, String>();
                    ResultSetMetaData metadata = rs.getMetaData();
                    int count = metadata.getColumnCount();
                    for (int j=1; j<=count; j++) {
                        map.put(metadata.getColumnName(j), rs.getString(j));
                    }
                    list.add(map);
                    rows++;
                }
                // iterate remaining rows to get total rows
                while (rs.next())
                    rows++;
                pageModel.setOffset(offset);
                pageModel.setLimit(limit);
                pageModel.setData(list);
                pageModel.setTotal(rows);
                long endTime = System.nanoTime();
                long duration = endTime - startTime;
                System.out.println("Query took: " + duration);
                return pageModel;
            }
        });
    } catch (DataAccessException e) {
        throw new ReportException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:27:07.590

> 如何在不更改数据库存储过程的情况下改进这一点。

您的情况没有任何解决方案，只能更改 SP

# backbone.js - Backbone.js onModelEvent

> ID：14476108
> 
> 赞同：1
> 
> 时间：2013-01-23T09:18:49.557
> 
> 标签：backbone.js

当你查看 Backbone.js 的源代码时，版本 0.9.2，有

“_onModelEvent”：

此方法负责将事件从模型转发到集合（冒泡）。

因此，当您更改作为集合的一部分的模型中的某些内容（使用“set”）时，会有一个更改事件，并且因为（在 add 方法中）_onModelEvent 方法已绑定到模型（“all”），这方法被调用。

我还看到，有一个销毁方法，它会触发一个“销毁”事件。

但是为什么作者（在_onModelEvent的第一行）检查事件名称是“添加”还是“删除”。通常模型上没有“添加”事件？

我不明白这个。

有人可以向我解释吗？

提前致谢

```
_onModelEvent: function(event, model, collection, options) {
  if ((event == 'add' || event == 'remove') && collection != this) return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:30:07.570

使用 Backbone，您可以创建[嵌套模型结构和集合](http://documentcloud.github.com/backbone/#FAQ-nested)。因此，您可以创建一个集合，其中模型是一个集合。这就是检查到位的方式：

所以从带[注释的来源](http://backbonejs.org/docs/backbone.html)：

> _onModelEvent：
> 
> 每次集合中的模型触发事件时调用的内部方法。当模型更改 ID 时，集合需要更新其索引。所有其他事件只是通过代理。源自其他集合的“添加”和“删除”事件将被忽略。

因此，如果您有一个集合作为模型。如果项目被添加到子集合/从子集合中删除，它不会委托`add`or`remove`事件，因为在这种情况下，只有子集合而不是父集合被更改。

# log4j - 如何放心地登录到文本文件中的可打印内容

> ID：14476112
> 
> 赞同：8
> 
> 时间：2013-01-23T09:18:58.257
> 
> 标签：log4j, rest-assured

我正在研究一种方法，试图将默认的放心日志（进入控制台）更改为使用 log4j 的文件。

这是一个 JUnit 项目，其方法最终调用了一个 REST 外观，它具有类似这样的方法。

```
 private ResponseSpecification responseSpecification(RequestSpecification requestSpecification, Matcher matcher, int statusCode) {
        ResponseSpecification responseSpecification = requestSpecification.expect().statusCode(StatusCode).body(".", is(matcher));
        if (log) {
            responseSpecification = responseSpecification.log().all();
        }
        return responseSpecification;
    } 
```

按照[官方文档](https://github.com/jayway/rest-assured/blob/master/examples/rest-assured-itest-java/src/test/java/com/jayway/restassured/itest/java/LoggingITest.java "官方文件")，我改变了这样的方法：

```
private ResponseSpecification responseSpecification(RequestSpecification requestSpecification, Matcher matcher, int statusCode) {
    final StringWriter writer = new StringWriter();
    final PrintStream captor = new PrintStream(new WriterOutputStream(writer), true);
    ResponseSpecification responseSpecification = requestSpecification.filter(logResponseTo(captor)).expect().statusCode(statusCode).body(".", is(matcher));
    System.out.println("writer = " + writer.toString() + " <-");
    return responseSpecification;
} 
```

但`writer.toString()`总是打印一个空字符串（旧的实现工作正常）。也许我做错了什么，但是什么？:(

我需要以这种或其他方式获得可以由 log4j 管理的可打印的东西。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:26:57.577

我刚刚解决了将其写入`RestSuite.setUp()`方法的问题

```
RestAssured.config = config().logConfig(new LogConfig(defaultPrintStream)); 
```

并保持旧代码不变。

```
private ResponseSpecification responseSpecification(RequestSpecification requestSpecification, Matcher matcher, int statusCode) {
    ResponseSpecification responseSpecification = requestSpecification.expect().statusCode(StatusCode).body(".", is(matcher));
    if (log) {
        responseSpecification = responseSpecification.log().all();
    }
    return responseSpecification;
} 
```

我希望它可以在将来对某人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-28T10:24:57.750

也可能有用：这里有一个类将 restAssured log() 调用重定向到提供的记录器：

```
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;
import org.slf4j.Logger;

/**
 * A wrapper class which takes a logger as constructor argument and offers a PrintStream whose flush
 * method writes the written content to the supplied logger (debug level).
 * <p>
 * Usage:<br> 
 * initializing in @BeforeClass of the unit test:
 * <pre>
 *          ToLoggerPrintStream loggerPrintStream = new ToLoggerPrintStream( myLog );
 *          RestAssured.config = RestAssured.config().logConfig(
 *                                 new LogConfig( loggerPrintStream.getPrintStream(), true ) );
 * </pre>
 * will redirect all log outputs of a ValidatableResponse to the supplied logger:
 * <pre>
 *             resp.then().log().all( true );
 * </pre>
 *
 * @version 1.0 (28.10.2015)
 * @author  Heri Bender
 */
public class ToLoggerPrintStream
{
    /** Logger for this class */
    private Logger myLog;
    private PrintStream myPrintStream;

/**
 * @return printStream
 */
public PrintStream getPrintStream()
{
    if ( myPrintStream == null )
    {
        OutputStream output = new OutputStream()
        {
            private StringBuilder myStringBuilder = new StringBuilder();

            @Override
            public void write(int b) throws IOException 
            {
                this.myStringBuilder.append((char) b );
            }

            /**
             * @see java.io.OutputStream#flush()
             */
            @Override
            public void flush()
            {
                myLog.debug( this.myStringBuilder.toString() );
                myStringBuilder = new StringBuilder();
            }
        };

        myPrintStream = new PrintStream( output, true );  // true: autoflush must be set!
    }

    return myPrintStream;
}

/**
 * Constructor
 *
 * @param aLogger
 */
public ToLoggerPrintStream( Logger aLogger )
{
    super();
    myLog = aLogger;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-10T06:27:16.427

```
PrintStream fileOutPutStream = new PrintStream(new File("somefile.txt"));
RestAssured.config = config().logConfig(new LogConfig().defaultStream(fileOutPutStream)); 
```

使用 printStream 指向文件并给出要打印日志的文件名。将上面的代码放在您的设置方法中进行测试，然后只需在您的 RequestSpecification 实例上调用日志，如下所示

```
requestSpecification.log().all(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T19:51:59.163

对 Heri 的答案的一种可能的修改 - 可以使用 ByteArrayOutputStream 而不是 StringBuilder - 如果一个人处理多语言数据，例如

```
// [...]
PrintStream getPrintStream() {
    if (printStream == null) {
        OutputStream output = new OutputStream() {
            ByteArrayOutputStream baos = new ByteArrayOutputStream()

            @Override
            public void write(int b) throws IOException {
                baos.write(b)
            }

            @Override
            public void flush() {
                logger.debug(this.baos.toString())
                baos = new ByteArrayOutputStream()
            }
        }
        printStream = new PrintStream(output, true)  // true: autoflush must be set!
    }
    return printStream
}
// [...] 
```

# lua - Lighttpd、Lua、WSAPI 缓慢的 Ajax 调用

> ID：14476114
> 
> 赞同：2
> 
> 时间：2013-01-23T09:18:59.697
> 
> 标签：lua, fastcgi, lighttpd, wsapi

我将 Lua FASTCGI 与 Lighttpd 一起使用。Lua 脚本是我们的 C API 的薄包装器，它被暴露给 web。问题是 Ajax 调用在服务器端一个接一个地执行（而不是并行运行），它需要很长时间。某些 Ajax 调用最多需要 10 秒，并且在执行这些调用时浏览器无法更新任何数据。

我尝试增加 Lighttpd 中的服务器线程数，但 Lighttpd 不建议这样做。我不知道如何让多个 Ajax 调用在服务器端并行执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:35:19.413

lighttpd 可以并行处理许多请求，但您的 lua fastcgi 可能不能。所以不要增加 lighttpd 工作者的数量——而是增加 lua 工作者的数量，或者让你的 lua 后端同时处理多个请求（可能使用协程）。

# php - PHP 和 iOS 加密 RNCryptor

> ID：14476115
> 
> 赞同：2
> 
> 时间：2013-01-23T09:19:01.383
> 
> 标签：php, ios

我一直在尝试从 php 加密数据并将其发送到 iOS（我使用 RNCryptor 库）。

我已经阅读了[github Data-Format](https://github.com/rnapier/RNCryptor/wiki/Data-Format) 并在 php 上开发了这个算法。

```
function encrypt($data, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $keySalt  = '12345678';
    $hmacSalt = '12345678';

    $_key = pbkdf2('SHA1', $key, $keySalt , 10000, 32, true);
    $_hmacKey = pbkdf2('SHA1', $key, $hmacSalt, 10000, 32, true);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $_key, $data, MCRYPT_MODE_CBC, $iv);

    $data = base64_encode(chr(2).chr(0).$keySalt.$hmacSalt.$iv.$ciphertext.hash_hmac('SHA256',$ciphertext,$_hmacKey, true));

    return $data;
} 
```

但是，当数据被发送到 php.ini 时。我在 iOS 调试工具中收到了这样的错误：

```
Error Domain=net.robnapier.RNCryptManager Code=-4300 "The operation coulnd't be completed. (net.robnapier.RNCryptManager error - 4300.)"; 
```

我看过很多网站。我也一步步关注了github网站，但仍然找不到正确的答案。

# c - 将十进制转换为字符/字符串

> ID：14476119
> 
> 赞同：1
> 
> 时间：2013-01-23T09:19:20.647
> 
> 标签：c, string, char, decimal

假设我有这个号码

```
int x = 65535; 
```

这是以下的十进制表示：

> ÿÿ

我知道如何从单个字符中做到这一点

```
#include <stdio.h>

int main() {
    int f = 65535;
    printf("%c", f);
} 
```

但这只会给我“ÿ”

我想在不使用任何外部库的情况下执行此操作，最好使用 C 类型字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:21:54.653

```
#include <stdio.h>

int main() {
    unsigned f = 65535; // initial value

    // this will do the printf and ff >>= 8 until f <= 0 ( =0 actually)
    do {
      printf("%c", f & 0xff); // print once char. The &0xff keeps only the bits for one byte (8 bits)
      f >>= 8; // shifts f right side for 8 bits
    } while (f > 0);
} 
```

考虑值 65535，或十六进制的 0xffff，这意味着它的正值需要 2 个字节，即 0xff 和 0xff

*   print of`f & 0xff`只保留 8 个 LSb，(0xffff & 0xff = 0xff)
*   `f >> = 8`将值向右移动 8 位，0xffff 变为 0x00ff（'ff' 右侧消失了
*   `f > 0``f == 0xff`从现在开始是真的

下一个循环是相同的，但`f >>= 8`将 0x00ff 向右移动 => 0x0000，并且 f 为空。因此`f > 0`条件错误，循环结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:22:20.627

您正在寻找的是位掩码：`(x >> 8) & 0xFF`对于高位字节和低位字节`(x & 0xFF)`。（实际上，如果`int`有 32 位，它是`(x >> 24) & 0xFF`用于高位字节。但考虑到值，以及您所说的期望，您可能需要第二个字节，而不是高位字节。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:23:05.620

你所拥有的是一个 16 位（两个字节）的无符号数。A`char`是 8 位（一个字节）。这意味着您必须提取数字中的两个字节才能将它们作为单独的字符。

这是通过按位运算符完成的。您可以使用按位`&`和按位移位`>>`来完成此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T09:23:19.783

就像是

```
char buffer[9];
long value = 65535;
char *cur = buffer;
while (value > 0)
{
    *cur++ = value % 0x100;
    value /= 0x100;
}
*cur = 0; 
```

# asp.net - 如何为 JqgridFilterToolbar 列添加 DropdownMenu

> ID：14476123
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:19:28.320
> 
> 标签：asp.net, drop-down-menu, jqgrid

嗨伙计们！！！我制作了 jqgrid，在其中添加了一个 FilterToolbar。现在根据我的需要，我需要下拉菜单来获取 FilterToolbar 列中的唯一值。我正在使用 asp.net ...

这是我的代码...

```
 $(function () {
        $("#UsersGrid").jqGrid({
            url: 'jqGridHandler.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['UserID', 'UserName', 'FirstName', 'MiddleName', 'LastName', 'EmailID'],
            colModel: [
                    { name: 'UserID', index: 'UserID', width: 100, sortable: true },
                    { name: 'UserName', width: 100, sortable: true },
                    { name: 'FirstName', width: 100, sortable: true },
                    { name: 'MiddleName', width: 100, sortable: true },
                    { name: 'LastName', width: 100, sortable: true },
                    { name: 'EmailID', width: 150, sortable: true }
                ],
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#UsersGridPager',
            sortname: 'UserID',
            viewrecords: true,
            sortorder: 'asc',
            autowidth:true

            //caption: 'JSON Example'
        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false });

       $("#UsersGrid").jqGrid('filterToolbar', { stringResult: true, searchOnEnter:true, defaultSearch: 'cn' });
       $("#UsersGrid").jqGrid('navButtonAdd', '#UsersGrid-pager', { caption: "Filter", title: "Toggle Searching Toolbar", buttonicon: 'ui-icon-pin-s', onClickButton: function () { $("#UsersGrid")[0].toggleToolbar(); }
}); 
```

请大家帮我找到解决方案.. 提前谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:32:23.833

最简单的方法是使用[stype: "select"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:search_config#colmodel_options)。如果您想用列中的唯一值填充下拉列表，您可以在服务器端或客户端执行此操作。如果您以 HTML 片段的形式在服务器端提供所有可能的唯一值，则`<select>`可以指定（或）`dataUrl`选项。如果您在客户端提供数据，则可以指定(or )的属性。在[答案中](https://stackoverflow.com/a/5329014/315935)，您将找到可能实现的示例。`searchoptions``editoptions``value``searchoptions``editoptions`

# c#-4.0 - Watin 搜索文本

> ID：14476124
> 
> 赞同：0
> 
> 时间：2013-01-23T09:19:36.890
> 
> 标签：c#-4.0, watin

我的页面中有一个 span 元素：

```
<span class="selected-facets">
<ul>
<li>
<a href="?"> </a>
foo
</li>
</ul>
</span> 
```

我如何编写一个测试来确保

*   跨度中的元素，包含文本“foo”。

    提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:01:52.093

也许这可以帮助：

```
 browser.Span(Find.ByClass("selected-facets")).InnerHtml.Contains("Foo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:25:26.087

你应该看看这里： [Parsing-HTML-Tags-in-C](http://www.codeproject.com/Articles/57176/Parsing-HTML-Tags-in-C)

这似乎相对简单：

```
protected void Prossess(string html)
{
    HtmlTag tag;
    HtmlParser parse = new HtmlParser(html);
    while (parse.ParseNext("span", out tag))
    {
      string value;
      if (tag.Attributes.TryGetValue("class", out value))
      {
        // now should be able to compair the value
      }
    }
} 
```

或者也许这对你会更好： [htmltidy](http://curl.haxx.se/libcurl/c/htmltidy.html)

# ios6 - GPS没有在iphone中获取用户位置

> ID：14476130
> 
> 赞同：0
> 
> 时间：2013-01-23T09:19:53.407
> 
> 标签：ios6, xcode4.5, cllocationmanager, mkmapview

我开发了 GPS 应用程序。它是一个后台运行的应用程序。我使用 Xcode 4.5 和 ios 6。我正在获取数据，但有时它会在 ios 设备上运行应用程序时向我显示“无法获取您的位置”的警报。我检查了设备上的另一个位置应用程序，但它从来没有像这样显示我..

# vb.net - 如何通过 IP 访问本地主机上的站点（用于调试）

> ID：14476131
> 
> 赞同：0
> 
> 时间：2013-01-23T09:19:58.573
> 
> 标签：vb.net, ip

我可以访问`http://localhost:1284/UploadResult.ashx?flag=0`并且它有效。我正在用 ASP 编程，我需要能够访问该站点。

稍后我想测试我的 android 应用程序以访问我的本地服务器。所以我打算从另一台电脑访问我的网站，实际上是一部智能手机。

我应该用什么替换本地主机？

如果我想通过IP访问它，以便我的网络朋友可以访问它呢？

我想我应该使用IP

所以我做了：

ping 计算机名

结果是

```
Pinging computerName [fe80::7dc7:e3ae:363c:180f%15] with 32 bytes of data:
Reply from fe80::7dc7:e3ae:363c:180f%15: time<1ms
Reply from fe80::7dc7:e3ae:363c:180f%15: time<1ms
Reply from fe80::7dc7:e3ae:363c:180f%15: time<1ms
Reply from fe80::7dc7:e3ae:363c:180f%15: time<1ms 
```

那么我应该如何访问它呢？

```
http://[fe80::7dc7:e3ae:363c:180f%15]:1284/UploadResult.ashx?flag=0 
```

不起作用。

如果我尝试从我自己的计算机（而不是联网计算机）访问该站点并尝试

```
http://computername:1284/UploadResult.ashx?flag=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:46:04.557

`ping -4 your_host_name`在命令提示符下尝试

# python - 如何在 Python 中存储作为输出生成的数字列表？

> ID：14476134
> 
> 赞同：1
> 
> 时间：2013-01-23T09:20:12.613
> 
> 标签：python

假设我想将几个数字相加，例如： 1\. 找出 1-100 之间的偶数。2\. 找出 2-200 之间的奇数。3\. 添加它们。

所以为此，我可以分别检查偶数和奇数，但要添加它们，它们必须存储在某个地方。现在我该怎么做？

即存储第一步的输出，存储第二步的输出，然后将它们相加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:33:00.530

求 1-100 之间的偶数：

```
>>> l = [i for i in range(1,101) if i % 2 == 0]
>>> print l
[2, 4, 6, ..., 100] 
```

求 2-200 之间的奇数：

```
>>> l2 = [i for i in range(2,200) if i % 2 != 0]
>>> print l2
[3, 5, 7, ..., 199] 
```

求总和：

```
>>> total = sum(l) + sum(l2)
>>> print total
12540 
```

我所做的是 List Comprehensions，这是一个为您想要的任何因素创建值的循环。这是有关它的文档的链接：http: [//docs.python.org/2/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:41:53.677

偶数列表：

```
a = [i for i in range(2,101,2)] 
```

奇数列表：

```
b = [i for i in range(3,200,2)] 
```

和：

```
c = sum(a) + sum(b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:23:53.557

这就是列表之类的容器的用途：

```
numbers = []  # Setup an empty list

for number in range(10):  # Loop over your numbers
    numbers.append(number)  # Append the number to your list

print sum(numbers)  # 45 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:25:40.443

第一步和第二步的结果可以存储在 2 个不同的列表中。

```
list1 = [2, 4, 6 .. ]
list2 = [1, 3, 5 .. ] 
```

列表记录在 python 文档中，位于[http://docs.python.org/2/tutorial/datastructures.html#more-on-lists](http://docs.python.org/2/tutorial/datastructures.html#more-on-lists)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:52:37.440

你真的不需要清单。

```
>>> sum(x for x in range(1,100) if x % 2)
2500
>>> sum(x for x in range(2,200) if not x % 2)
9900 
```

# python - 除非在 bash PYTHONPATH 中说明，否则 Python 在 sys.path 中找不到库

> ID：14476138
> 
> 赞同：1
> 
> 时间：2013-01-23T09:20:42.723
> 
> 标签：python

此 Python 脚本显示其路径包含`/home/web/public_html/module/disc/static/python/lib/python2.4/site-packages`：

```
$ python serverTest.py 
This is my sys.path:
['/home/web/public_html/module/disc/static/python/lib/python2.4/site-packages', 
 '/home/web/public_html/module/disc/static/python',
 '/usr/lib64/python24.zip',     
 '/usr/lib64/python2.4',
 '/usr/lib64/python2.4/plat-linux2',
 '/usr/lib64/python2.4/lib-tk', 
 '/usr/lib64/python2.4/lib-dynload',
 '/usr/lib64/python2.4/site-packages', 
 '/usr/lib64/python2.4/site-packages/Numeric',
 '/usr/lib64/python2.4/site-packages/gtk-2.0',
 '/usr/lib/python2.4/site-packages']

Traceback (most recent call last):
  File "serverTest.py", line 27, in ?
    import simplejson as json
ImportError: No module named simplejson

$ export PYTHONPATH=$PYTHONPATH:/home/web/public_html/module/disc/static/python/lib/python2.4/site-packages

$ python serverTest.py 
Hello, world! 
```

可以看出，虽然目录在`sys.path`脚本里面，但是找不到`simplejson`安装在那里的。`PYTHONPATH`但是，当我在 Bash 中添加相同的路径时，`simplejson`就会找到。如何修复它以便在`simplejson`不设置 Bash 变量的情况下可用？

**编辑：**

```
>>> sys.path
['/home/webtov/public_html/module/discoapi/static/python',
'',
'/home/webtov/public_html/module/discoapi/static/python/lib/python2.4/site-packages', 
'/home/webtov/local/',
'/home/webtov/local/lib/python2.4/site-packages/',
'/usr/lib64/python24.zip',
'/usr/lib64/python2.4/',
'/usr/lib64/python2.4/plat-linux2',
'/usr/lib64/python2.4/lib-tk',
'/usr/lib64/python2.4/lib-dynload']

>>> json.__path__
['/home/webtov/public_html/module/discoapi/static/python/lib/python2.4/site-packages', 
'/home/webtov/public_html/module/discoapi/static/python',
'',
'/home/webtov/public_html/module/discoapi/static/python/lib/python2.4/site-packages',  
'/home/webtov/local/',
'/home/webtov/local/lib/python2.4/site-packages/',
'/usr/lib64/python24.zip',
'/usr/lib64/python2.4/',
'/usr/lib64/python2.4/plat-linux2',
'/usr/lib64/python2.4/lib-tk',
'/usr/lib64/python2.4/lib-dynload'] 
```

# internet-explorer-9 - Web 驱动程序与 IE9 的行为不一致

> ID：14476148
> 
> 赞同：0
> 
> 时间：2013-01-23T09:21:39.537
> 
> 标签：internet-explorer-9, webdriver

Web 驱动程序与 IE9 的行为不一致

当我尝试按顺序运行 7-10 次测试时，5 次中有 3 次测试失败，表明未找到某些元素。但是我已经在必要的地方进行了显式等待，有趣的是它在 2 次中起作用。我正在使用 IESERVER - 64 位运行测试。

以下是我的配置的详细信息：

1.  Java 版本 - jdk-7u7-windows-x64
2.  Eclipse 版本 -64 位 Eclipse - Kepler
3.  测试版本 - 6.8.0
4.  Selenium 网络驱动程序 - 2.28.0
5.  IE 驱动程序.exe（64 位）
6.  IE9和WIN7

但是，这些测试对于带有 IE driver.exe（32 位）的 win XP 和 IE8 运行良好。脚本的行为是一致的。

任何人都可以提出任何建议吗？

注意 - 我设置了以下内容 • 对于 IE9 – 所有安全设置都启用了保护模式。

# networking - 任何开源网络监控系统？

> ID：14476152
> 
> 赞同：1
> 
> 时间：2013-01-23T09:21:50.863
> 
> 标签：networking, asynchronous, monitoring

我需要一个具有这些功能的网络监控系统。

1.  开源（必须）
2.  由 c/c++ 编写。（必须）
3.  异步 io 模式（如 io，必须）
4.  支持ping、http、snmp、mysql、redis...协议

系统必须以 epoll 模式运行，以便尽可能多地运行测试，完全没有阻塞。有没有可用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:22:07.290

我不知道您是否在 sourceforge 上查看过开源软件，他们有许多用 C 和 C++ 编写的评级网络监控系统。潘多拉很好，但环顾四周，也许你会在那里找到你要找的东西。>>>[链接](http://sourceforge.net/directory/language%3acpp/language%3ac/os%3awindows/freshness%3arecently-updated/?q=network%20monitor)<<<

# python - GUI编程以在Linux中显示磁盘中的记录

> ID：14476159
> 
> 赞同：1
> 
> 时间：2013-01-23T09:22:08.463
> 
> 标签：python, linux, qt, user-interface, gtk

**我需要实现**
的目标 我在磁盘（特定文件）上有大量（大约 100 万条）记录（每条记录 500 字节），格式如下

```
===========================================================
|X|a,b,c|O|m,n,g|X|t,a,c|X|e,p,q|O|u,q,p|X|r,t,s|O|l,m,a|
=========================================================== 
```

第一个字段由标志（'X'）组成，表示有效填充数据，标志（'O'）由结构化数据组成。例如，第一个集合包含一个有效数据，其中 a,b,c 作为其数据（假设结构）。

我需要在屏幕（linux）上显示它们，更像是`top`命令输出（就简单而言 - 意味着键盘输入驱动、动态 GUI - 如刷新、向下翻页选项等），如 -

```
Display Record From No XXX                    

Records Number                                Field 1                         Field 2                           Field 3
1                                                a                                b                                c
2                                                NA                               NA                               NA
3                                                t                                a                                c
4                                                o                                p                                q
5                                                NA                               NA                               NA
6                                                r                                t                                s
7                                                NA                               NA                               NA

F5 [Referesh]                Page-Down [Next Page]                Page-Up [Prev Page]                Ctrl+C [Exit] 
```

值 XXX 将由用户输入并显示一页记录。

**问题**

一种。由于显示类似于 top/atop 命令的显示，您能否告诉我这些命令显示输出的基础？

湾。任何更适合此类操作的特定语言（如 GTK、QT 等）？除了 top/atop 命令中使用的语言之外，基本上任何更好的语言。（可能这个问题是主观的）但想收集最佳意见？

C。现在，如果我想对结构进行模板化（通过在配置文件中提供）以便可以读取和显示不同类型的结构，那么这可能是哪种语言最好？注意：我的意思是，文件 1 仅包含结构 A 数据。文件 2 包含结构 B 数据。所以在读取文件2时，我想加载结构B的结构配置并运行该工具进行显示。

PS：
上述文件实际上是使用普通 C 应用程序写入文件的（暗示结构及其字段将是 C 基本数据类型属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:14:02.993

一种。有很多实现`top`。他们中的一些人使用`curses\ncurses`图书馆。

湾。如果没有理由让你的程序从控制台运行（文本模式），那么当然，图形模式，上面提到的 GUI 工具包运行，似乎更适合你的需要。这些工具包不是编程语言，而是用特定语言编写的库（尽管有时带有自己的扩展）。

在这种情况下，我不鼓励 Qt，因为它的`Model/View`实现很糟糕（这尤其是您需要的）。对于 GTK，有[Gnome-DB](http://www.gnome-db.org/)项目。如果我是你，我会看看[大博](http://www.dabodev.com/)。

C。我不确定你所说的配置文件是什么意思，如果你是指一些插件系统或解释器，但我认为使用 Python、Ruby、PHP 等可解释语言会更直接。但是，因为你的文件是巨大的，我不确定它们是否会在没有一些调整的情况下持续存在。处理此类文件本身就是一个挑战。

还有一个选项可以将文件导出到数据库并使用一些数据库操作软件。

如果你有统计数据，那么你可以看看[R](http://en.wikipedia.org/wiki/R_%28programming_language%29)和 GUI 前端，比如 RKWard。

# vb.net - 如果在表单加载上选中复选框，则需要更改 Datagridview 行颜色

> ID：14476161
> 
> 赞同：0
> 
> 时间：2013-01-23T09:22:12.920
> 
> 标签：vb.net, winforms, datagridview

我在表单加载过程中遇到数据集 gridview 问题。我有数据集作为 datagridview 源，当我尝试根据 if 语句更改数据网格行颜色时，如果选中复选框，则没有任何反应。如果我在某些按钮单击过程中使用相同的代码，则一切正常。

谁能帮我解决这个问题。

```
 da.Fill(ds, "customer")
    cnn.Close()
    DataGridView1.DataSource = ds.Tables("customer")

    For i = 0 To DataGridView1.Rows.Count - 1

        If DataGridView1.Rows(i).Cells(3).Value = True Then

            DataGridView1.Rows(i).DefaultCellStyle.BackColor = Color.MediumAquamarine
        Else
            DataGridView1.Rows(i).DefaultCellStyle.BackColor = Color.MistyRose
        End If

    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:54:23.057

您不能在 Form_Load 中有此代码。这仅在表单第一次启动时发生。请尝试将代码放在 DataGridView1.Paint 事件处理程序中。这应该够了吧。

# c# - 如何在 int 列表中找到满足某些条件的项目的索引？

> ID：14476162
> 
> 赞同：17
> 
> 时间：2013-01-23T09:22:14.323
> 
> 标签：c#, list, indexing

我有一个包含项目 { 10, 11, 23, 34, 56, 43 } 的 int 列表，我想找出所有大于 23 的项目的索引。这些值可以是任何顺序，所以我不想对它们进行排序。

```
List<int> mylist = new List<int> { 10, 11, 23, 34, 56, 43 }; 
```

我对满足条件的所有项目的索引感兴趣，而不仅仅是满足条件的第一个项目。所以这行代码对我不起作用。

```
int index = mylist.FindIndex( x => x > 23 ); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T09:25:16.803

```
var indexes = mylist.Select((v, i) => new { v, i })
                    .Where(x => x.v > 23)
                    .Select(x => x.i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:26:51.227

Linq 不直接提供这样的东西，但你可以自己编写。像这样的东西：

```
public static IEnumerable<int> FindIndices<T>(this IEnumerable<T> items, Func<T, bool> predicate) 
{
    int i = 0;

    foreach (var item in items) 
    {
        if (predicate(item)) 
        {
            yield return i;
        }

        i++;
    }
} 
```

然后是这样的：

```
foreach (int index in mylist.FindIndices( x => x > 23 ))
    ... 
```

（这具有比上面列出的其他方法更有效的优点。但这仅对 LARGE 序列很重要！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:27:18.473

这个扩展方法完成了这项工作，又好又干净：

```
public static class ListExtensions
{
    /// <summary>
    /// Finds the indices of all objects matching the given predicate.
    /// </summary>
    /// <typeparam name="T">The type of objects in the list.</typeparam>
    /// <param name="list">The list.</param>
    /// <param name="predicate">The predicate.</param>
    /// <returns>Indices of all objects matching the given predicate.</returns>
    public static IEnumerable<int> FindIndices<T>(this IList<T> list, Func<T, bool> predicate)
    {
        return list.Where(predicate).Select(list.IndexOf);
    }
} 
```

查看[工作演示](http://ideone.com/NWL217)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:33:15.893

[rgripper](https://stackoverflow.com/users/1176284/rgripper) [回答](https://stackoverflow.com/a/14476218/1182982)的一个小变化，

```
List<int> mylist = new List<int> { 10, 11, 23, 34, 56, 43 };
List<int> newList = mylist.Select((v, i) => new { v, i })
                        .Where(x => x.v > 23)
                        .Select(x => x.i).ToList<int>(); 
```

[演示](http://ideone.com/MsDjnZ)

# javascript - 明确：两者都不能在 IE 中工作？

> ID：14476167
> 
> 赞同：0
> 
> 时间：2013-01-23T09:22:21.750
> 
> 标签：javascript, html, css

我在下面有一个代码片段，其中内部的内容`#FirstDiv`在运行时附加，并且不断增加。

在 Firefox 和 Chrome 中，当内容在页面上占用额外的垂直空间时，`#SecondDiv`内容会向下移动。`#FirstDiv`但是，在 IE9 中不会发生这种情况，因为它的内容`#FirstDiv`和`#SecondDiv`重叠。

```
 <div id="FirstDiv">html content</div>
 <div id="SecondDiv" style="clear:both;"></div> 
```

**更新 ：-**

[我已经在http://jsfiddle.net/msach/Tycwp/1/](http://jsfiddle.net/msach/Tycwp/1/)更新了 div1 和 div2 的 css 。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:29:43.390

你的第二个 div 没有关闭

```
 <div id="FirstDiv">html content</div>
 <div id="SecondDiv" style="clear:both;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:18:09.673

我能够通过将高度作为自动给上 div 来解决问题

# exec - exec 并且只有变量应该通过引用传递

> ID：14476168
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:22:24.887
> 
> 标签：exec, php

我正在使用[1 和 1 的 PHP 导出脚本](http://faq.1and1.com/web_space__access/mysql/13.html)：

```
<?php
//ENTER THE RELEVANT INFO BELOW
$mysqlDatabaseName ='db123456789';
$mysqlUserName ='dbo123456789';
$mysqlPassword ='myPassword';
$mysqlHostName ='db1234.perfora.net';
$mysqlExportPath ='chooseFilenameForBackup.sql';

//DONT EDIT BELOW THIS LINE
//Export the database and output the status to the page
$command='mysqldump --opt -h' .$mysqlHostName .' -u' .$mysqlUserName .' -p' .$mysqlPassword .' ' .$mysqlDatabaseName .' > ~/' .$mysqlExportPath;
exec($command,$output=array(),$worked);
switch($worked){
    case 0:
        echo 'Database <b>' .$mysqlDatabaseName .'</b> successfully exported to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 1:
        echo 'There was a warning during the export of <b>' .$mysqlDatabaseName .'</b> to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 2:
        echo 'There was an error during export. Please check your values:<br/><br/><table><tr><td>MySQL Database Name:</td><td><b>' .$mysqlDatabaseName .'</b></td></tr><tr><td>MySQL User Name:</td><td><b>' .$mysqlUserName .'</b></td></tr><tr><td>MySQL Password:</td><td><b>NOTSHOWN</b></td></tr><tr><td>MySQL Host Name:</td><td><b>' .$mysqlHostName .'</b></td></tr></table>';
        break;
}
?> 
```

如果我正在执行它，我会得到`Strict Standards: Only variables should be passed by reference in`它指向这条线

```
exec($command,$output=array(),$worked); 
```

我应该如何改编剧本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:23:43.700

您应该`$output`在调用之前定义`exec`：

```
$output = array();
exec($command, $output, $worked); 
```

发生错误是因为 PHP 不喜欢将现场创建的值作为参考传递（即使在这种情况下，对于更高级的编译器来说，这不应该成为问题是完全显而易见的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:29:33.560

不要在函数调用内部分配，只需像这样调用它：

```
exec($command, $output, $worked); 
```

顺便说一下，$output 变量不必先初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:40:20.427

正如我在上面的评论中强调的那样，这只是你犯的一个小错误，很容易纠正。

一般来说，您只能通过引用传递变量，但您为这种[*按引用传递*函数参数](http://php.net/language.references.pass)传递了一个表达式。

传递变量而不是给出表达式将解决您的问题，并且警告将消失。

例如使用

```
$output             # variable 
```

代替

```
 $output = array()  # expression 
```

对于第二个参数。

* * *

***有趣的事实：***这种通过引用参数返回的变量类型是返回类型，而不是输入类型。这意味着，您不需要`$output` 在传递变量之前创建一个数组。你只需要传递变量，你就会得到一个数组。

# android - 按下返回键时触发了活动

> ID：14476170
> 
> 赞同：0
> 
> 时间：2013-01-23T09:22:29.957
> 
> 标签：android, android-activity, listactivity

当我按下返回键直到某个时间时，没有对活动执行任何操作。在我的活动中没有返回代码来处理返回键。当用户单击列表项时，我正在启动一项活动。喜欢

```
Intent intent = new Intent(cxt, MyActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

实际情况是，当用户立即点击三次时，我的活动会启动多次。我怎样才能避免多次启动活动。我不能使用单实例/单例，因为`OnCreate`每次启动活动时都应该调用我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:42:03.207

决定您是否在活动本身之外开始一项活动，并考虑检查那里的条件。您可以根据条件将参数传递给您的新意图。

这是关于该主题的一个问题：[如何通过向 Intent 传递一些参数来启动 Intent？](https://stackoverflow.com/questions/2405120/how-to-start-an-intent-by-passing-some-parameters-to-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:27:20.270

我假设您在这种情况下 Android 调用以销毁您的 Activity 的 Activity 生命周期回调之一中进行了广泛的处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T09:36:56.443

您仍然可以使用 singleInstance 并覆盖 onNewIntent 方法，该方法将在每次重新启动活动时调用，或者在处理程序 post 方法中分离昂贵的操作。

# asp.net - 如何从后面的代码动态更改 Ajax 组合框列表项的宽度？

> ID：14476171
> 
> 赞同：0
> 
> 时间：2013-01-23T09:22:31.397
> 
> 标签：asp.net, ajax

我有一个 Ajax 组合框，其宽度是从 css 类设置的，我想更改列表项的宽度（单击右侧组合框上的按钮后出现的区域）。从后面的代码。我已经从 CSS 中设置了列表项的宽度，例如

```
 .ComboboxWidth ul
          {
              width:176px !important;
          } 
```

这行得通。但是我必须从后面的代码中做同样的事情，有人可以指导吗？

# php - PHP mcrypt 安装和设置 laravel 环境问题

> ID：14476181
> 
> 赞同：2
> 
> 时间：2013-01-23T09:23:06.147
> 
> 标签：php, laravel, mcrypt

我正在使用 Mac OS X Lion 10.7.5，我想清除一件事我不想再使用 XAMPP、MAMP。

所以我在这个[链接](http://coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion)之后启用了 apache、php 并安装了 mysql 。这工作得很好。然后我下载了 laravel 并按照这个[链接](http://laravel.com/docs/install)安装了它。`Sites`我在根据第一个链接教程创建的文件夹中复制了 laravel 文件夹。现在，当我单击`public`文件夹内的`laravel`文件夹时，它给了我以下错误

```
Unhandled Exception

Message:

Call to undefined function Laravel\mcrypt_create_iv()
Location:

/Users/zafarsaleem/Sites/learning-laravel/laravel/crypter.php on line 36 
```

然后检查 phpinfo() 中是否安装了 mcrypts。他们不在那里。要安装`mcrypt`我按照这个[链接](http://www.glenscott.co.uk/blog/2011/08/29/install-mcrypt-php-extension-on-mac-os-x-lion/)。它一直有效，直到我跟随`PHP Extension`标题。当我下载`PHP 5.3.8 is now the default since Mac OS X 10.7.3`解压缩并发出`phpize`命令时，它给了我这个错误

```
Cannot find config.m4\. 
Make sure that you run '/usr/bin/phpize' in the top level source directory of the module 
```

这是什么`top level source directory of the module means`？如何正确安装 mcrypt 以使 laravel 正常工作？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:39:23.430

您需要在 Xcode 中安装 Xcode 和`command line tools`额外的包，然后才能安装`mcrypt`

有关更多详细信息，请阅读此[http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/](http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/)

# codeigniter - Codeigniter My_Controller 错误，默认对象来自空值

> ID：14476182
> 
> 赞同：2
> 
> 时间：2013-01-23T09:23:09.113
> 
> 标签：codeigniter

我的问题是我使用 php 版本 5.4 会在 MY_Controllar 中出现这个错误，请看下面的截图

![在此处输入图像描述](../Images/c49394190ad972afa14638cd1e53a84a.png)

但是php版本5.3以下没有问题

这是我的代码

```
 <?php

class MY_Controller extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $data->the_leave_data = $this->leave_data(); <--- line 8 is here
        $this->the_leave_data = $data->the_leave_data;
        $this->load->vars($data);
    }

    function leave_data()
    {
        $data = array();
        $this->load->model('leave_data_model');
        $staff_id = $this->session->userdata('staff_id');
        if($query = $this->leave_data_model->get_by('staff_id',$staff_id))
        {
            $data['leave_data_records'] = $query;           
        }
        var_dump($data);
        return $data;
    }

}

?> 
```

这是 $data 的 var_dump 返回值

```
leave_data_records' => 
object(stdClass)[21]
  public 'leave_data_id' => string '1' (length=1)
  public 'staff_id' => string '1' (length=1)
  public 'annual_leave' => string '1.0' (length=3)
  public 'sick_leave' => string '0.0' (length=3)
  public 'annual_leave_balance' => string '0.0' (length=3)
  public 'sick_leave_balance' => string '0.0' (length=3)
  public 'year' => string '2012' (length=4) 
```

任何想法如何解决它？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-21T04:54:55.270

你在使用 PHP 5.4 吗？PHP 5.4 有严格的标准。您需要将 $data 声明为 stdClass 的对象：

```
$data = new stdClass();    
$data->the_leave_data = $this->leave_data(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:49:09.387

表示`$this->leave_data();`为空。

我看不到在哪里加载控制器内的数据。如果你在其他地方定义它，它是从内部加载的`CI_Controller`......你应该这样做`parent::$this->leave_data();`

# php - 使用局域网上不同 PC 的一个本地 MySQL 数据库

> ID：14476187
> 
> 赞同：0
> 
> 时间：2013-01-23T09:23:19.467
> 
> 标签：php, mysql, xampp

我有一个 PHP-MySQL 应用程序，我想使用来自不同 PC 的一个数据库。我在有人问的这个问题中得到了答案：[从另一台计算机访问 XAMPP MySql 数据库](https://stackoverflow.com/questions/3507205/accesing-xampp-mysql-database-from-another-computer?rq=1)。

现在的问题是他们提到`my.cnf`了要编辑的文件，但我的 xampp 文件夹中没有这样的文件。我们可以为这些设置编辑任何其他文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:00:42.303

我得到了答案，我还测试了如何从 LAN 上的不同 PC 访问一个 PC MySQL 数据库:)

您只需要将`IP`那台 PC 的`MySQL server`. 例如

```
192.168.1.3/xampp/ OR 192.168.1.3/my_php_project/index.php 
```

上面的链接`192.168.1.3`是安装`IP`PC的`MySQL server`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:19:13.390

这可以帮助您：

[http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

之后，您的 mysql 用户必须允许这种连接（服务器必须设置为 '%'）。检查 SQL 命令：

```
GRANT ALL ON foo.* TO bar@’%’ IDENTIFIED BY ‘PASSWORD’; 
```

# javascript - 我的 JavaScript 路由出现 404 错误

> ID：14476195
> 
> 赞同：1
> 
> 时间：2013-01-23T09:23:46.810
> 
> 标签：javascript, playframework-2.0

我正在使用播放！v2 和我在我的页面上添加了一个尝试从服务器检索数据的 JavaScript 方法。客户端发送 2 个信息，一个`deal`和一个布尔值 ( `withDebug`)。

我的`routes`文件：

```
GET     /:deal/tailLog              controllers.MyController.tailLog(deal: String, withDebug: Boolean) 
```

我也试过了，但没有成功：

```
GET     /:deal/tailLog?withDebug=:withDebug   controllers.MyController.tailLog(deal: String, withDebug: Boolean) 
```

`MyController`类包含以下方法：

```
public static Result tailLog(String deal, Boolean withDebug) {
    ...
}

public static Result javascriptRoutes() {
    response().setContentType("text/javascript");
    return ok(Routes.javascriptRouter("jsRoutes",
            ...,
            controllers.routes.javascript.MyController.tailLog()
    ));
} 
```

最后，JavaScript 调用是：

```
function tailLog() {
    var withDebug = $("#logs-debug").is(':checked');
    jsRoutes.controllers.MyController.tailLog('mydeal', withDebug).ajax({
        ...
    });
} 
```

调用此方法时，我的应用程序正在调用 URL `http://localhost:9000/mydeal/tailLog?withDebug=false`，这是我想要的 URL 模式，但失败并显示 404 错误消息。

请注意，在我添加`withDebug`参数之前，一切正常。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:37:16.030

在[Play 2.0.4](https://groups.google.com/forum/?fromgroups=#!searchin/play-framework/boolean/play-framework/htaOk8U5bvs/qFlTVuGh88sJ)中，您必须使用**0/1**来绑定布尔参数（而不是 false/true）

您的 javascript 中的一些更新应该可以解决此错误：

```
var withDebug = $("#logs-debug").is(':checked') ? 1 : 0; 
```

# facebook - 打开图形操作突然无法正常工作

> ID：14476196
> 
> 赞同：0
> 
> 时间：2013-01-23T09:23:47.503
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-opengraph

我有一个动作在今天早上之前可以正常工作，但现在它的行为不应该是这样。

Facebook 没有捕捉到我在“index.jsp?”之后发送的变量。因此，尽管发布了操作，但它显示拼图 id 和时间显示为 null。

![在此处输入图像描述](../Images/8aa1b2fceebdf8300f076c4244100e17.png)

以下是我尝试过的代码都给了我同样的问题。

```
 FB.api('/me/mpuzzleapp:solve?mpuzzle='+encodeURIComponent('{mycompleteurl}/index.jsp?mid='+mid+'&timing='+timing+'&access_token='+accessToken),'post', 
      function(response) {                                                                                  
        if (!response || response.error) {
              //alert(response.error.message);
          }else{ 
              alert("Action posted successfully.")
          }
      });

 FB.api(
        '/me/mpuzzleapp:solve',
        'post',
        {
          mpuzzle: '{mycompleteurl}/index.jsp?mid='+mid+'&timing='+timing+'&access_token='+accessToken
        },
        function(response) {
          if (!response || response.error) {
              alert(response.error.message);
          }else{ 
              alert("Action posted successfully.")
          }
        }
      ); 
```

以前这可以正常工作，现在它无法用我的 url 捕获参数。贴在我墙上的链接是这个。

[https://apps.facebook.com/mpuzzleapp/index.jsp?fb_action_ids=10151927328076515&fb_action_types=mpuzzleapp%3Asolve&fb_source=timeline_og&action_object_map=%7B%2210151927328076515%22%3A401787199906324%7D&action_type_map=%7B%2210151927328076515%22%3A%22mpuzzleapp%3Asolve% 22%7D&action_ref_map=%5B%5D](https://apps.facebook.com/mpuzzleapp/index.jsp?fb_action_ids=10151927328076515&fb_action_types=mpuzzleapp%3Asolve&fb_source=timeline_og&action_object_map=%7B%2210151927328076515%22%3A401787199906324%7D&action_type_map=%7B%2210151927328076515%22%3A%22mpuzzleapp%3Asolve%22%7D&action_ref_map=%5B%5D)

它缺少中间和时间参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:24:21.940

我不得不改变我的 og:url 标签，它工作得很好：

老的 ：

```
 <meta property="fb:app_id" content="278272228942900" /> 
  <meta property="og:type"   content="mpuzzleapp:mpuzzle" /> 
  <meta property="og:url"    content="https://apps.facebook.com/mpuzzleapp/index.jsp" /> 
  <meta property="og:title"  content="MPuzzle 3" /> 
  <meta property="mpuzzleapp:to" content="friends" /> 
  <meta property="mpuzzleapp:timing" content="00:00:45" /> 
  <meta property="og:image"  content="https://www.vishweshshetty.com/Facebook/puzzlemsg/65/images/icon.jpg" /> 
```

新的 ：

```
 <meta property="fb:app_id" content="278272228942900" /> 
  <meta property="og:type"   content="mpuzzleapp:mpuzzle" /> 
  <meta property="og:url"    content="https://apps.facebook.com/mpuzzleapp/index.jsp?mid=3&timing=00:00:45"&tolist=friends&pathpic=https://www.vishweshshetty.com/Facebook/puzzlemsg/65/images/icon.jpg" /> 
  <meta property="og:title"  content="MPuzzle 3" /> 
  <meta property="mpuzzleapp:to" content="friends" /> 
  <meta property="mpuzzleapp:timing" content="00:00:45" /> 
  <meta property="og:image"  content="https://www.vishweshshetty.com/Facebook/puzzlemsg/65/images/icon.jpg" /> 
```

# javascript - 绕过and时如何获取第一个文本节点？

> ID：14476197
> 
> 赞同：0
> 
> 时间：2013-01-23T09:23:51.137
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:37:15.247

一种粗暴的方法，但您可以取出您希望在第一个节点中出现的所有标签并读取直到下一个标签的开始，如下所示：

```
text = text.replace("<b>"," ");
text = text.replace("</b>"," ");
text = text.replace("<i>"," ");
text = text.replace("</i>"," ");
text = text.replace("<span>"," ");
text = text.replace("</span>"," ");

text = text.substr(0, text.indexOf("<")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:39:32.593

我没有完全遵循这个问题，但是如果您尝试从 DOM 元素中提取文本，这可能会有所帮助：

```
 var getText = function (el) {
    var ret;
    var txt = [],
      i = 0;

    if (!el) {
      ret = "";
    } else if (el.nodeType === 3) {
      // No problem if it's a text node
      ret = el.nodeValue;
    } else {
      // If there is more to it, then let's gather it all.
      while (el.childNodes[i]) {
        txt[txt.length] = getText(el.childNodes[i]);
        i++;
      }
      // return the array as a string
      ret = txt.join("");
    }
    return ret;
  }; 
```

# matlab - 如何获取文件名的路径部分？

> ID：14476200
> 
> 赞同：5
> 
> 时间：2013-01-23T09:23:56.540
> 
> 标签：matlab, path, filenames

我想在 MATLAB[`dirname`](http://en.wikipedia.org/wiki/Dirname)和[`basename`](http://en.wikipedia.org/wiki/Basename)Linux 中获取文件名的路径部分。我试图转向寻找类似的功能[`strrchr`](http://en.cppreference.com/w/cpp/string/byte/strrchr)，但我失败了。我知道`strtok`，`strfind`并且`textscan`可以使用，但我想用不超过两个语句来完成这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T09:27:07.260

对于这个特殊问题，我建议您使用以下[`fileparts`](http://www.mathworks.com/help/matlab/ref/fileparts.html)功能：

```
[path, filename, extension] = fileparts(str) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:27:55.150

尼克的回答绝对符合您的要求，但这里有一个替代答案[`regexprep`](http://www.mathworks.com/help/matlab/ref/regexprep.html)：

```
regexprep(str, '(.+)(?:\\|/)(.*)', '$1') 
```

如果您想捕获文件名（包括扩展名），请使用`$2`令牌而不是`$1`. 这是正则表达式的一个很好的练习，在 MATLAB 中解析文本时证明它*非常*有用。

# linux - 文件的 write() 何时返回 EWOULDBLOCK？

> ID：14476201
> 
> 赞同：3
> 
> 时间：2013-01-23T09:23:57.043
> 
> 标签：linux, asynchronous, io, linux-kernel, filesystems

我想经常将数据附加到本地文件系统上的文件中。我想在不阻塞太久的情况下做到这一点，并且不创建任何工作线程。在 Linux 内核 2.6.18 上。

似乎 Linux 上 glibc 的 POSIX AIO 实现创建了一个用户空间线程池并阻止了这些线程。这很酷，但我可以轻松地剥离我自己的专用文件阻塞线程。

*   [http://www.kernel.org/doc/man-pages/online/pages/man7/aio.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/aio.7.html)

据我了解，Linux 内核 AIO 实现目前在追加时阻塞。追加是我唯一想做的事情。

*   [http://code.google.com/p/kernel/wiki/AIOUserGuide](http://code.google.com/p/kernel/wiki/AIOUserGuide)
*   [https://groups.google.com/forum/#!msg/linux.kernel/rFOD6mR2n30/13VDXRTmBCgJ](https://groups.google.com/forum/#!msg/linux.kernel/rFOD6mR2n30/13VDXRTmBCgJ)

我正在考虑使用 O_NONBLOCK 打开文件，然后在 if it 处进行一种惰性写入`EWOULDBLOCK`，然后稍后再尝试写入。像这样的东西：

1.  `open(pathname, O_CREAT | O_APPEND | O_NONBLOCK);`
2.  调用`write()`，检查错误`EAGAIN | EWOULDBLOCK`
3.  如果`EAGAIN | EWOULDBLOCK`，则只需保存要写入的数据并稍后再试`write()`。

这是一个好主意吗？这有什么实际优势吗？如果我是唯一一个对该文件具有打开文件描述符的人，并且我尝试 a `write()`and it `EWOULDBLOCK`，那么以后的可能性会降低`EWOULDBLOCK`吗？会`EWOULDBLOCK`吗？如果我`write()`和它没有`EWOULDBLOCK`，这是否意味着`write()`会迅速返回？

换句话说，在 Linux 2.6.18 上，在什么情况下（如果有的话）`write()`本地文件会失败？`EWOULDBLOCK`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:30:44.400

我不确定本地文件系统，但我很确定你可以在尝试写入已安装文件系统（例如 nfs）上的文件时获得 EWOULDBLOCK。这里的问题是，通常你不知道它是否真的是“本地”硬盘，除非你每次创建/打开文件时都特别检查它。如何检查这当然取决于系统。

即使系统创建了一些额外的线程来进行实际的写入，这个线程也会有一个缓冲区（不会是无限的），所以如果你写得足够快，你可以获得 EWOULDBLOCK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:08:10.283

> 在......什么情况下......将 write() 到本地文件失败并出现 EWOULDBLOCK

也许没有文件的情况。write(2)的[Linux 手册页](http://linux.die.net/man/2/write)指出 EWOULDBLOCK 只会为引用**套接字**的文件描述符返回。

> EAGAIN 或 EWOULDBLOCK
> 文件描述符 fd 引用一个套接字并且已被标记为非阻塞 (O_NONBLOCK)，写入将阻塞。POSIX.1-2001 允许在这种情况下返回任一错误，并且不要求这些常量具有相同的值，因此可移植应用程序应检查这两种可能性。

显然，这种行为与套接字会使用记录锁这一事实有关，而简单的文件则不会。

# python - pyparsing 以最一般的形式解析 python 函数调用

> ID：14476208
> 
> 赞同：4
> 
> 时间：2013-01-23T09:24:17.300
> 
> 标签：python, pyparsing

我想使用优秀的 pyparsing 包以最一般的形式解析 python 函数调用。我读了一篇在[这里](https://stackoverflow.com/questions/10168935/parsing-nested-function-calls-using-pyparsing)有点用但还不够笼统的帖子。

我想解析以下表达式：

```
f(arg1,arg2,arg3,...,kw1=var1,kw2=var2,kw3=var3,...) 
```

在哪里

1.  arg1,arg2,arg3 ... 是任何类型的有效 Python 对象（整数、实数、列表、字典、函数、变量名 ...）
2.  kw1, kw2, kw3 ... 是有效的 Python 关键字名称
3.  var1,var2,var3 是有效的 Python 对象

我想知道是否可以为这样的通用模板定义语法。我可能问得太多了......你有什么想法吗？

非常感谢您的帮助

埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T09:50:24.380

这就是全部？让我们从一个简单的非正式 BNF 开始：

```
func_call ::= identifier '(' func_arg [',' func_arg]... ')'
func_arg ::= named_arg | arg_expr
named_arg ::= identifier '=' arg_expr
arg_expr ::= identifier | real | integer | dict_literal | list_literal | tuple_literal | func_call
identifier ::= (alpha|'_') (alpha|num|'_')*
alpha ::= some letter 'a'..'z' 'A'..'Z'
num ::= some digit '0'..'9' 
```

转换为 pyparsing，自下而上工作：

```
identifier = Word(alphas+'_', alphanums+'_')

# definitions of real, integer, dict_literal, list_literal, tuple_literal go here
# see further text below

# define a placeholder for func_call - we don't have it yet, but we need it now
func_call = Forward()

string = pp.quotedString | pp.unicodeString

arg_expr = identifier | real | integer | string | dict_literal | list_literal | tuple_literal | func_call

named_arg = identifier + '=' + arg_expr

# to define func_arg, must first see if it is a named_arg
# why do you think this is?
func_arg = named_arg | arg_expr

# now define func_call using '<<' instead of '=', to "inject" the definition 
# into the previously declared Forward
#
# Group each arg to keep its set of tokens separate, otherwise you just get one
# continuous list of parsed strings, which is almost as worthless the original
# string
func_call << identifier + '(' + delimitedList(Group(func_arg)) + ')' 
```

这些`arg_expr`元素可能需要一段时间才能完成，但幸运的是，您可以将它们从 pyparsing wiki 的示例页面中删除：http: [//pyparsing.wikispaces.com/file/view/parsePythonValue.py](http://pyparsing.wikispaces.com/file/view/parsePythonValue.py)

```
from parsePythonValue import (integer, real, dictStr as dict_literal, 
                              listStr as list_literal, tupleStr as tuple_literal) 
```

您仍然可能会使用`*list_of_args`or`**dict_of_named_args`表示法传递参数。扩展`arg_expr`以支持这些：

```
deref_list = '*' + (identifier | list_literal | tuple_literal)
deref_dict = '**' + (identifier | dict_literal)

arg_expr = identifier | real | integer | dict_literal | list_literal | tuple_literal | func_call | deref_list | deref_dict 
```

现在为自己编写一些测试用例 - 从简单开始，逐步复杂化：

```
sin(30)
sin(a)
hypot(a,b)
len([1,2,3])
max(*list_of_vals) 
```

需要添加的其他参数类型`arg_expr`（留作 OP 的进一步练习）：

*   索引参数：`dictval['a']` `divmod(10,3)[0]` `range(10)[::2]`

*   对象属性引用：`a.b.c`

*   算术表达式 : `sin(30)`,`sin(a+2*b)`

*   比较表达式：`sin(a+2*b) > 0.5` `10 < a < 20`

*   布尔表达式：`a or b and not (d or c and b)`

*   拉姆达表达式：`lambda x : sin(x+math.pi/2)`

*   列表理解

*   生成器表达式

# css - 响应式精灵背景图像，如何

> ID：14476210
> 
> 赞同：6
> 
> 时间：2013-01-23T09:24:35.553
> 
> 标签：css, html

嗨，我在一个容器中有两列内容，第一列有文本，第二列是带有背景精灵图像的跨度。问题是当我获得较小的屏幕分辨率时，我希望背景精灵图像具有百分比宽度，以便能够与具有百分比宽度的 H5 一起缩放它，有没有办法做到这一点？

```
h5{
    float:left;
    display:block;
    width:800px;
}

.sprite{
    background-image: url("assets/img/website_sprite_a.png");
    background-position: -60px -60px;
    float:left;
    display:block;
    width:64px;
}

<div class="container">
 <h5>Title
 </h5>
 <span class="sprite">
 </span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:01:20.593

在你的情况下，我会选择一个`background-image`，但如果你有很多图像，或者你真的想要这样做，你可以使用**background-size**属性。

来自[MDN](https://developer.mozilla.org/en-US/docs/CSS/background-size)：

> background-size CSS 属性指定背景图像的大小。图像的大小可以完全限制或仅部分限制，以保持其固有比例。

```
.sprite{
    background-image: url("assets/img/website_sprite_a.png");
    background-position: -30% -30%; //use % instead pixels
    float:left;
    display:block;
    width:64px;
    background-size: 100%; //play with this
} 
```

您还应该阅读以下内容：

*   [缩放背景图像](https://developer.mozilla.org/en-US/docs/CSS/Scaling_background_images)

[我在 JSFIddle 上](http://jsfiddle.net/UFAVH/)玩了一点。调整浏览器大小以查看效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T15:44:10.917

迟了将近一年，但我试图找出相同的答案，但无法想出或找到直接的答案。在与多条建议混在一起后，我想通了。还没有机会在 IE8 上对此进行测试，并且不再为 IE6/7 烦恼，所以请记住这一点。

我发现的技巧是结合使用背景位置（使用精灵图像的百分比，如前所述），填充顶部（同样，使用百分比，这是精灵图像总宽度的百分比），和背景尺寸：封面。

在[jsfiddle 玩弄](http://jsfiddle.net/2487a/)它。

```
#wrapper {
    position: relative;
    width: 100%;
}
.div {
    position: absolute;
    top: 0;
    left: 0;
    background-image: url('http://upload.wikimedia.org/wikipedia/en/2/2e/Sprite_logo.jpg');
    background-repeat: no-repeat;
    background-position: 0% 0%;
    background-size: cover;
    padding: 50% 0 0 0;
    width: 40%;
}

<div id="wrapper">
    <div class="div"></div>
</div> 
```

# objective-c - NSManagedObject 没有值

> ID：14476212
> 
> 赞同：0
> 
> 时间：2013-01-23T09:24:39.097
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

我将 a 传递`NSManagedObject`给 UIView。因此，我展示了`UITableView`从 CoreData 带来的会议，如果您点击其中一个会议，您将能够在另一个视图中看到该会议的更多信息，这些信息包含在`NSManagedObject`. 我想将它传递`NSManagedObject`给将显示其信息的视图。因此，我创建了该视图的 init 方法，如下所示：

```
-(id)initWithMeeting:(NSManagedObject *)aMeeting{

    _theMeeting = aMeeting;

    return self;
} 
```

然后我使用`_theMeeting`对象中的信息将它显示在我刚刚在`ViewDidLoad`. 问题是，每当我尝试访问它崩溃的 NSManagedObject 的任何值时，它`init`在`ViewDidLoad`. 我相信它与 . 有关系`Managed Oriented Context`，但`Managed Oriented Context`永不消失，是 . 的一个属性`AppDelegate`。所以我不知道如何传递该对象并保留它。

我还宣布了会议：

```
 @property(nonatomic, copy)NSManagedObject *theMeeting; 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:32:14.510

您是否使用访问器来分配会议？我认为您只是绕过它，因此 aMeeting 不会被保留或复制，因此会崩溃。

# html - 在html中的框架上显示一个div

> ID：14476213
> 
> 赞同：0
> 
> 时间：2013-01-23T09:24:46.803
> 
> 标签：html

根据我的要求，我需要在框架或框架集上显示一个 div。是否可以在 html 页面中的框架上显示 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:51:59.483

您可以查看此页面以获取有关仅使用 css 管理框架技术的信息。

[http://www.webpelican.com/web-tutorials/css-frames-tutorial/](http://www.webpelican.com/web-tutorials/css-frames-tutorial/)

# java - java.math.BigDecimal 的运行时构造函数数量和编译时间不匹配

> ID：14476221
> 
> 赞同：2
> 
> 时间：2013-01-23T09:25:29.470
> 
> 标签：java, exception, groovy, runtime-compilation

我使用以下实现定义了一个名为 BigDecimalWithAttrDisplay 的新类：

```
class BigDecimalWithAttrDisplay extends BigDecimal{
    String display;
    BigDecimalWithAttrDisplay(String val){super(val)}
    public String toString(){
        "BigDecimalWithAttrDisplay{val=${super.toString()}, display='$display'}";
    }
} 
```

当尝试运行使用此类的代码时，我得到：

```
java.lang.IncompatibleClassChangeError: the number of constructors during runtime and compile time for java.math.BigDecimal do not match. Expected 17 but got 18
at groovy.lang.MetaClassImpl.selectConstructorAndTransformArguments(MetaClassImpl.java:1381)
at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.selectConstructorAndTransformArguments(ScriptBytecodeAdapter.java:234)
at com.e4x.auto.services.checkout.testapi.model.response.BigDecimalWithAttrDisplay.<init>(BigDecimalWithAttrDisplay.groovy:31)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:77)
at org.codehaus.groovy.reflection.CachedConstructor.doConstructorInvoke(CachedConstructor.java:71)
at org.codehaus.groovy.runtime.callsite.ConstructorSite.callConstructor(ConstructorSite.java:42)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:194) 
```

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:29:45.820

尝试清理您创建的类（重新构建您的项目）。您可能有以前编译的工件。

另一种可能性是您使用 Java 7 和使用低于 7 的版本编译的 Groovy 代码。那么您也可能会遇到问题。（例如：[Geb - IncompatibleClassChangeError](https://stackoverflow.com/a/7827742/44522)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:10:54.083

无法在 2.0.5 中重现您的错误，但如果问题是缺少构造函数，Groovy 有一个名为[@InheritConstructors](http://groovy.codehaus.org/gapi/groovy/transform/InheritConstructors.html)的注释可能会有所帮助。

也看看[@Delegate](http://groovy.codehaus.org/gapi/groovy/lang/Delegate.html)。它可能比继承更酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:40:50.523

通过在构造函数中添加 super(val) 添加对 BigDecimal 构造函数的调用。

# twitter - 我可以在不在小部件设置页面中说明的情况下动态更改 twitter 小部件搜索查询吗？

> ID：14476224
> 
> 赞同：1
> 
> 时间：2013-01-23T09:25:38.053
> 
> 标签：twitter

我想使用[小部件 API](https://dev.twitter.com/docs/embedded-timelines)在我的网络应用程序中嵌入一个 twitter 小部件。

我想知道是否可以更改嵌入代码中的查询字符串，而无需在小部件设置页面上实际更改它。这样，我可以根据用户当前所在页面的主题对多个搜索查询使用相同的小部件，而无需为每个小部件创建新的小部件。

有人尝试过这样的事情吗？

这是否违反了 Twitter 的服务条款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-14T18:01:36.823

根据推特，你不能:(

[https://twittercommunity.com/t/change-search-query-from-program/20435](https://twittercommunity.com/t/change-search-query-from-program/20435)

# php - 在php中读取包含阿拉伯语和英语的csv

> ID：14476229
> 
> 赞同：0
> 
> 时间：2013-01-23T09:25:53.310
> 
> 标签：php, database, csv, fgetcsv

欢迎

我试图在 php 中读取 csv 文件我的文件包含阿拉伯语数据

必须使用什么字符集来显示正确的结果？？

```
echo iconv("???????",'UTF-8',$data[$c]."\0"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:29:59.437

阿拉伯语通常编码为[`ISO8859-6`](http://en.wikipedia.org/wiki/ISO/IEC_8859-6)，因此请尝试：

```
echo iconv("ISO-8859-6",'UTF-8',$data[$c]."\0"); 
```

查看[编码检查](https://stackoverflow.com/questions/3520338/online-encoding-checker-tool)和[确定和更改文件字符编码](http://mindspill.net/computing/linux-notes/determine-and-change-file-character-encoding/)以获取有关如何查找哪种编码的信息。

同样，您必须确保在任何地方都使用 UTF-8，并且 PHP 已配置为处理 UTF-8。

在 html 中，添加元标记：

```
<meta charset="utf-8" /> 
```

并将其保存为 UTF-8 格式。这里是[如何在记事本++ 中做到这一点](https://superuser.com/questions/21135/how-can-i-edit-unicode-text-in-notepad)。

在`php.ini`:中[启用 UTF-8](http://www.php.net/manual/en/ini.core.php#ini.default-charset)

```
default_charset = "utf-8" 
```

[有关在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)的完整手动检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:31:22.520

如果它还不是 UTF-8，那么它很可能是 iso 8859-6。

但你不能确定。为了确保您必须**知道**源编码，因为无法检测到它是可靠的。

# haskell - 在本地使用 UndecidableInstances pragma 是否会对编译终止产生全局影响？

> ID：14476230
> 
> 赞同：29
> 
> 时间：2013-01-23T09:25:59.180
> 
> 标签：haskell, compilation, ghc, language-extension

[`UndecidableInstances`](http://www.haskell.org/ghc/docs/7.2.2/html/users_guide/type-class-extensions.html#undecidable-instances)假设一个 Haskell 库设计者出于某种原因决定使用它。该库编译良好。现在假设某个程序使用该库（例如定义其类型类的一些实例），但不使用扩展。编译失败（不会终止）会发生吗？

如果这种情况可能发生，我很乐意看到一个例子。例如，由于[*mtl*](http://hackage.haskell.org/package/mtl)使用`UndecidableInstances`很多，是否可以编写一个依赖于*mtl*（或任何其他使用扩展的标准库）的程序，不使用`UndecidableInstances`自己，但由于不确定性而无法编译？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T10:17:19.703

好问题！

一般来说，这当然是可能的。考虑这个模块：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, UndecidableInstances #-}

module M where

class C a b | a -> b where
  f :: a -> b

instance C a b => C [a] [b]
  where f = map f 
```

它自己编译就好了。但是，如果您导入此模块并定义

```
g x = x + f [x] 
```

你会得到

```
Context reduction stack overflow; size = 201
Use -fcontext-stack=N to increase stack size to N
  C [b] b
In the second argument of `(+)', namely `f [x]'
In the expression: x + f [x]
In an equation for `g': g x = x + f [x] 
```

* * *

关于 mtl 实例，我看不出这样的事情是怎么可能的，但我也没有证据证明它不是。

# git - 无论如何要撤消 git push -f 吗？

> ID：14476236
> 
> 赞同：19
> 
> 时间：2013-01-23T09:26:30.563
> 
> 标签：git

如果我使用`push -f`在远程存储库上重叠最后一次提交，即 A，而其他人在我推送之前拉了 A。

无论如何要撤消此操作，以免给他人造成麻烦？

`push -f`原创者“**假装**”什么都没碰过有用吗？

或者

git 如何决定本地 repo 是否与远程跟踪不同？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-23T09:42:45.500

有几种方法可以在推送之前找出原始 HEAD（ORIG_HEAD 可能不是其中之一）：

## 终端回滚

如果你有幸让终端仍然打开，那么在推送时会有一些输出，如下所示：

```
...
To user@host:repo.git
 + abcdef0...1234567 HEAD -> branchname (forced update) 
```

在这里，`abcdef0`是以前的 HEAD （你的`A`），`1234567`是你强迫它变成的。

## `git reflog`

的输出`git reflog`告诉你你所做的事情的时间历史。您基本上想回到有问题的行（您在更改之前检查了您的分支）并从第一列中获取提交 ID。

这里最有用的命令是`git reflog show remotes/origin/branchname`. 这应该显示您的强制更新 ( `1234567`) 和之前的提交 ID ( `abcdef0`) 作为前两行。

## 以前的参考

几个提交参考在这里可能有用：

*   `@{1}`（或者`branchname@{1}`，如果您不在该分支上）是该引用的先前值。仅当您没有对本地分支进行任何其他提交时才有效。（但是`@{2}`，`@{3}`等会让你走得更远。）
*   同样，`remotes/origin/branchname@{1}`将是遥控器上 ref 的先验值。只有在其他人没有推送到遥控器时才有效。（关于上面的相同点`@{n}`。）

## 检查您的 ID 是否正确

如果您想确认从上述方法之一获取的 ID 是否正确，只需检查一下即可：

```
git checkout abcdef0 
```

看看周围。如果`git log`看起来很熟悉（我还建议使用[tig](http://jonas.nitro.dk/tig/)浏览您的存储库，您甚至可以运行`tig abcdef0`查看给定提交的日志），那么您可以确信您正在重置到正确的位置。

## 重置到之前的状态

一旦你有了之前的提交 ID，你可以重置为那个并再次强制推送：

```
git checkout branchname # if you're not on it already
git reset --hard abcdef0
git push -f 
```

要不就：

```
git push -f origin abcdef0:branchname 
```

这会将分支的状态恢复到强制推送之前的状态。（快速说明：第一个片段将更新您的本地分支以及远程；第二个片段仅更新远程。）

## 有什么影响？

如果人们在你强制推送后拉了分支，如果你强制推送回原来的分支，那么他们在后续更新时会遇到问题。如果他们没有对该分支进行任何提交，他们可以删除他们的本地分支并重新签出（在`git fetch`确保他们有最新的引用之后），或者以下将做同样的事情：

```
git fetch
git checkout branchname # if you're not on it already
git reset --hard origin/branchname 
```

如果他们进行了本地提交，那么他们将需要将这些更改重新定位到正确的历史记录（并可能解决任何冲突）：

```
git fetch
git checkout branchname # if you're not on it already
git rebase --onto origin/branchname 1234567 
```

`1234567`上面的意思是“在（不正确的头部）之后（正确的头部）重放所有提交`origin/branchname`”。

# sql - 连接表或从多个表中选择

> ID：14476245
> 
> 赞同：7
> 
> 时间：2013-01-23T09:26:51.657
> 
> 标签：sql, database, oracle, join, oracle10g

*加入一个表*或*从多个表中选择*哪个更好？

例如，让我们假设以下类似的场景：

使用***连接***：

```
SELECT COALESCE(SUM(SALARY),0) FROM X
JOIN Y ON X.X_ID=Y.Y_X_ID 
```

**或者**

通过***从多个表中选择***

```
SELECT COALESCE(SUM(SALARY),0) FROM X, Y
WHERE X.X_ID=Y.Y_X_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:32:58.893

主要是连接用于从多个表中检索数据，所以在 sql 中有 3 种类型的连接可用

1.  equi join-inner join 外连接-left right full
2.  非等值连接
3.  自加入
4.  交叉连接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:15:27.153

两者都是连接。第一个是显式连接，第二个是隐式连接，是一种 SQL 反模式。

第二个不好，因为很容易意外交叉连接。这也很糟糕，因为当您想要交叉连接时，不清楚您是否想要交叉连接，或者您是否有意外连接。

在第二种样式中，如果您需要转换为外连接，则需要更改查询中的所有连接，否则可能会得到不正确的结果。所以第二种风格更难维持。

显式连接是在上个世纪建立的，为什么有人仍然使用容易出错且难以维护的隐式连接是我无法理解的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:37:33.167

您应该使用**JOIN**语法有很多原因，可以在[此处](https://stackoverflow.com/a/1018825/1599054)找到。

此外，这种语法的优点是为查询优化器提供了一些提示（在计算权重期间，直接由本语法中提到的事实计算的权重比其他语法更有利）。

# c# - 在 c# 中使用 LINQ 第二次检索数据时出现异常

> ID：14476254
> 
> 赞同：0
> 
> 时间：2013-01-23T09:27:15.540
> 
> 标签：c#, winforms, linq

先生，我已经用 linq 填充了我的数据集

```
 public void FillDataSet(DataSet ds1,int Id)
   {
       try
       {
           var y = from ins in cstmrDC.customers_rd(Id) select ins;
           var z = from ins in cstmrDC.customersCntcts_rd(Id) select ins;

           DataTable dtCst = new DataTable("dtCstmr");
           dtCst.Columns.Add("cst_Id");
           dtCst.Columns.Add("cst_Name");
           dtCst.Columns.Add("cst_SName");
           dtCst.Columns.Add("cst_AdLn1");

           DataTable dtDtls = new DataTable("dtDtails");
           dtDtls.Columns.Add("cst_SrlNo");
           dtDtls.Columns.Add("cst_CntName");
           dtDtls.Columns.Add("cst_cntDsgn");

           foreach (var dtbl in y)
           {
               DataRow dr;
               dr = dtCst.NewRow();
               dr[0] = dtbl.cust_Id;
               dr[1] = dtbl.cust_Name;
               dr[2] = dtbl.cust_Sname;
               dr[3] = dtbl.cust_Adrsln1;
               dtCst.Rows.Add(dr);

           }
           foreach (var dtbl in z)
           {
               DataRow drDtls;
               drDtls = dtDtls.NewRow();
               drDtls[0] = dtbl.cust_Slno;
               drDtls[1] = dtbl.cust_Cntctnm;
               drDtls[2] = dtbl.cust_Cntctdesig;          
               dtDtls.Rows.Add(drDtls);
           }

           ds1.Tables.Add(dtCst);
           ds1.Tables.Add(dtDtls);

       }
       catch (Exception ex)
       {
           MessageBox.Show(ex.Message);
       }
   } 
```

并且 Id 是从另一个类传递的

```
 intId = int.Parse(txtSearch.Text);
            cstCls.FillDataSet(ds1w, intId); 
```

从该数据集我填写我的文本框控制器并将 theDataSource 提供给 dataGridView 作为 `dgvCustInfo.DataSource = ds1w.Tables["dtDtails"];`

这样，如果我第一次使用整数 id 1055 进行搜索，则意味着确切的结果来自数据库。同时，如果我将另一个整数 ID 设为 1066，则意味着 Iam 将异常为`DataTable named 'dtCstmr' already belongs to this DataSet`.. Soo 我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:31:20.117

您可以检查表是否已包含在`DataSet`with 中[`Contains`](http://msdn.microsoft.com/en-us/library/ye3t49b6.aspx)：

```
if(!ds1.Tables.Contains(dtCst.TableName))
    ds1.Tables.Add(dtCst);
if(!ds1.Tables.Contains(dtDtls.TableName))
    ds1.Tables.Add(dtDtls); 
```

但是，正如 Raphael 所提到的，这不会刷新 DataSet 中的表。所以一个简单的方法是删除旧表并添加新表：

```
if(ds1.Tables.Contains(dtCst.TableName))
    ds1.Tables.Remove(dtCst.TableName);
if(ds1.Tables.Contains(dtDtls.TableName))
    ds1.Tables.Remove(dtDtls.TableName);
ds1.Tables.Add(dtCst);
ds1.Tables.Add(dtDtls); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:46:55.190

以相同的方法创建和填充是一个非常糟糕的主意。

你的代码真的很混乱。

创建另一个方法：

```
public void CreateTables(DataSet ds1) {
  var dtCst = new DataTable("dtCstmr");
  dtCst.Columns.Add("cst_Id");
  dtCst.Columns.Add("cst_Name");
  dtCst.Columns.Add("cst_SName");
  dtCst.Columns.Add("cst_AdLn1");

  var dtDtls = new DataTable("dtDtails");
  dtDtls.Columns.Add("cst_SrlNo");
  dtDtls.Columns.Add("cst_CntName");
  dtDtls.Columns.Add("cst_cntDsgn");

  ds1.Tables.Add(dtCst);
  ds1.Tables.Add(dtDtls);
}

public void FillDataSet(DataSet ds1,int Id)
   {
       try
       {
           var y = from ins in cstmrDC.customers_rd(Id) select ins;
           var z = from ins in cstmrDC.customersCntcts_rd(Id) select ins;

           var dtCst = ds1.Tables["dtCstmr"];
           var dtDtls = ds1.Tables["dtDtails"];
           dtCst.Clear();
           dtDtls.Clear();

           foreach (var dtbl in y)
           {
               DataRow dr;
               dr = dtCst.NewRow();
               dr[0] = dtbl.cust_Id;
               dr[1] = dtbl.cust_Name;
               dr[2] = dtbl.cust_Sname;
               dr[3] = dtbl.cust_Adrsln1;
               dtCst.Rows.Add(dr);

           }
           foreach (var dtbl in z)
           {
               DataRow drDtls;
               drDtls = dtDtls.NewRow();
               drDtls[0] = dtbl.cust_Slno;
               drDtls[1] = dtbl.cust_Cntctnm;
               drDtls[2] = dtbl.cust_Cntctdesig;          
               dtDtls.Rows.Add(drDtls);
           }
       }
       catch (Exception ex)
       {
           MessageBox.Show(ex.Message);
       }
   } 
```

方法`CreateTables`应该只被调用一次，并且`FillDataSet`可以根据需要多次调用。

# sql - SQL Table 排序去规范化的表

> ID：14476255
> 
> 赞同：2
> 
> 时间：2013-01-23T09:27:16.493
> 
> 标签：sql, sorting

我有 2 张桌子：

“产品”包含基本产品数据

```
product_id | product_name | product_picture
1          | test         | pic.jpg
2          | samp         | sam.gif 
```

product_details 包含产品的详细信息（每个 product_id 1 个或多个）

```
product_id | unit   | value
1          | size   | 100mm
1          | weight | 100g
2          | size   | 80mm
2          | color  | red 
```

现在我想按大小排序。（有点像规范化表）结果：

```
2 | sample | sam.gif | size | 80mm  | color  | red
1 | test   | pic.jpg | size | 100mm | weight | 100g 
```

编程语言是PHP。通常我会这样做（伪代码）：

```
while (SELECT * FROM a) {
   while(SELECT * FROM b WHERE id = a.id) {
      myarray[a.id][b.unit] = b.value;
   }
} 
```

但我不知道如何对结果进行排序。（我猜用 PHP 排序的性能不如 SQL？）

编辑：新想法：首先进行查询以正确顺序选择product_ids：

```
while(SELECT products_id FROM products INNER JOIN products_details USING(products_id) WHERE unit = 'size' ORDER BY value) {
   while( SELECT value, unit FROM products_details WHERE products_id = id) {
      myarray[a.id][b.unit] = b.value;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:17:00.670

如果你想让它标准化，你应该在不同的列中有不同类型的属性。基本上，您需要*取消透视*您的属性。一种方法是使用条件聚合，如下所示：

```
SELECT
  p.product_id,
  p.product_name,
  p.product_picture,
  MAX(CASE d.unit WHEN 'size'   THEN d.value END) AS size,
  MAX(CASE d.unit WHEN 'weight' THEN d.value END) AS weight,
  MAX(CASE d.unit WHEN 'color'  THEN d.value END) AS color
FROM products p
LEFT JOIN product_details d
ON p.product_id = d.product_id
GROUP BY
  p.product_id,
  p.product_name,
  p.product_picture
; 
```

这将为您提供如下数据集：

```
product_id  product_name  product_picture  size   weight  color
----------  ------------  ---------------  -----  ------  -----
1           test          pic.jpg          100mm  100g    NULL
2           samp          sam.gif          80mm   NULL    red 
```

为每个属性分配单独的列后，您可以按您喜欢的方式对行进行排序。例如：

```
SELECT
  p.product_id,
  p.product_name,
  p.product_picture,
  MAX(CASE d.unit WHEN 'size'   THEN d.value END) AS size,
  MAX(CASE d.unit WHEN 'weight' THEN d.value END) AS weight,
  MAX(CASE d.unit WHEN 'color'  THEN d.value END) AS color
FROM products p
LEFT JOIN product_details d
ON p.product_id = d.product_id
GROUP BY
  p.product_id,
  p.product_name,
  p.product_picture
**ORDER BY
  weight,
  color,
  size**
; 
```

# javascript - 重新添加对话框时出现 JQuery Mobile 异常

> ID：14476257
> 
> 赞同：0
> 
> 时间：2013-01-23T09:27:18.043
> 
> 标签：javascript, jquery, jquery-mobile

嗨（我可能没有正确执行此操作） - 在尝试使用“changePage()”将页面加载为对话框时，我正在尝试导航到我的 JQuery Mobile (JQM) 应用程序中的页面时遇到问题。我环顾四周并尝试了一些没有运气的替代方案:(

例如，我有一个登录页面，作为应用程序初始化的对话框成功打开：

```
$.mobile.changePage(page, {transition: 'pop', role: 'dialog' }); 
```

登录屏幕有一个登录按钮，当时钟转发到正常（非对话框）页面时，再次成功并再次使用 changePage：

```
$.mobile.changePage( page ); 
```

当我再次尝试在对话框中加载登录页面时（例如注销时），就会出现问题。我有一个注销按钮，单击该按钮会导航回登录页面：

```
$.mobile.changePage(page, {transition: 'pop', role: 'dialog' }); 
```

但是这次我在 JQM 库中得到以下异常：“未捕获的类型错误：无法调用未定义的方法 'indexOf'”

下面是一些重现问题的示例代码：

```
<script type="text/javascript">

$(function()  {
    createPage("login");
});

function createPage( pageStr ) {  
    var page = $("<div id='pageWrapper' class='pageWrapper' data-role='page' ></div>");
    var header = createHeader( pageStr );
    var content = createContent( pageStr );

    page.append(header, content);

    $("body").append( page );

    if(pageStr == "login") {     
        $.mobile.changePage(page, {transition: 'pop', role: 'dialog' }); 
    }
    else {
        $.mobile.changePage( page );
    }
}

function createHeader( pageStr ) {
    var headerContainer = $("<div id='header' class='header' data-role='header' data-position='fixed'></div>");

    if(pageStr != "login") {
        var logOutButton = $("<a onclick='logout()' class='ui-btn-right' data-rel='dialog'>Logout</a>");
        headerContainer.append(logOutButton);
    }

    var headerTitle = $("<h1>Page: " + pageStr + "</h1>");
    headerContainer.append(headerTitle);
    return headerContainer;
}

function createContent( pageStr ) {
    var contentDiv = $("<div id='content' class='content' data-role='content'></div>");
    var contentBuilder = $("<div></div>");

    if(pageStr == "login") {
        contentBuilder.append(createloginForm());
    }
    else {
        contentBuilder.append(createWrapper());
    }
    contentDiv.append(contentBuilder);
    return contentDiv;
}

function createloginForm() {
    var form = $("<form id='loginForm' method='post'></form>");
    var loginButton = $("<p><input type='button' value='Login' onclick='login()'></input></p>");
    form.append(loginButton);
    return form;
}

function createWrapper() {
    var tmpText = $("<h2>some content ...</h2>");
    return tmpText;
}

function login() {
    createPage("main")
}

function logout() {
    createPage("login"); // pages[0] = login page
}

</script> 
```

谢谢，乔恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:04:47.960

感谢您的评论 - 我没有在示例中提到/包含，我每次都在清理页面，因此没有添加重复的元素或 ID（每次只添加/呈现一页）。

我想我已经通过在挂起页面之前手动初始化页面来解决这个问题 - 不确定它是否是一个“更舒适”的修复，但似乎有效：

在调用changePage()方法之前，我需要先初始化新页面：E.mobile.initializePage();

再次感谢乔恩。

# regex - 此格式的 DateTime 正则表达式 01/23/2013 10:25

> ID：14476259
> 
> 赞同：1
> 
> 时间：2013-01-23T09:27:28.910
> 
> 标签：regex, asp.net-mvc-3, data-annotations

我需要调整下面列出的正则表达式，以确保数据根据这种格式进行验证：

2013 年 1 月 23 日 10:25

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy HH:mm}")]

[RegularExpression("^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)[0-9][0-9]$", ErrorMessage = "Invalid date")] 
```

当前的正则表达式似乎没有考虑 HH 和 MM

你能给我一个打击吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:34:12.240

对于`HH:mm`，您可以使用此正则表达式：-

```
(0[0-9]|1[0-9]|2[0-3]):(0[0-9]|[1-5][0-9]) 
```

因此，将其添加到您的正则表达式中，它将变为： -

```
"^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)[0-9][0-9] (?:(0[0-9]|1[0-9]|2[0-3]):(0[0-9]|[1-5][0-9]))$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:25:05.367

你试过这个可能对这种情况有用吗[试试这个](http://regexlib.com/DisplayPatterns.aspx?cattabindex=4&categoryId=5&AspxAutoDetectCookieSupport=1)

或者您应该创建自己的验证器（继承 BaseValidator）并使用 DateTime.TryParseExact 检查该值是否可以转换为 DateTime。

# android - 图像未裁剪

> ID：14476261
> 
> 赞同：7
> 
> 时间：2013-01-23T09:27:36.460
> 
> 标签：android, image, bitmap, crop

我正在将`background`图像设置为`LinearLayout`：

**1.back_xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
  <layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
       <item android:drawable="@drawable/back" >
        </item>
    <item>
        <shape>
            <solid/>
            <stroke android:width="1dip" android:color="#225786" />
            <corners android:radius="10dip"/>
            <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
        </shape>
    </item> 
```

**2.tile.xml**

```
 <bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/pie_chart_background"
        android:tileMode="repeat">
    </bitmap> 
```

现在我将**back.xml**`background`设置为它`LinearLayout`工作正常。

我需要一个`image`圆角和一个**边框。但我只有****圆角**边框而不是图像我的代码中有什么问题我错过了什么吗？

 **这就是我的图像的外观：

![在此处输入图像描述](../Images/39269a8ddfe367643560df0979b80189.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T06:06:25.637

在您的问题上花费了数小时的时间后，我终于实现了，希望现在它会给您带来与您想要的相同的结果，请通过下面的代码让我知道它是否有效？

*将适当的参数传递给下面的函数以获得带有您想要的颜色边框的圆角。*

```
public static Bitmap getRoundedCornerImage(Bitmap bitmap, int cornerDips, int borderDips, Context context) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
                Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int borderSizePx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, (float) borderDips,
                context.getResources().getDisplayMetrics());
        final int cornerSizePx = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, (float) cornerDips,
                context.getResources().getDisplayMetrics());
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);

        paint.setAntiAlias(true);
        paint.setColor(0xFFFFFFFF);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawARGB(0, 0, 0, 0);
        canvas.drawRoundRect(rectF, cornerSizePx, cornerSizePx, paint);

        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        paint.setColor((Color.RED)); // you can change color of your border here, to other color
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth((float) borderSizePx);
        canvas.drawRoundRect(rectF, cornerSizePx, cornerSizePx, paint);

        return output;
    } 
```

*主要的.xml*

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"

      />

</RelativeLayout> 
```

*创建时*

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView rl=(ImageView)findViewById(R.id.image);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.testing); // your desire drawable image.
    rl.setImageBitmap(getRoundedCornerImage(bitmap, 10, 10, this));

    } 
```

*原始图像*

![在此处输入图像描述](../Images/862a95832a799d0e2be0959cf012be5a.png)

*输出*

![在此处输入图像描述](../Images/b4b40b073a6c74f18efa417ce6a77321.png)

下面的链接帮助我实现我的目标：

[Android中圆角位图的边框](https://stackoverflow.com/questions/11012556/border-over-a-bitmap-with-rounded-corners-in-android/12543803#12543803)

[创建带圆角的 ImageView](https://stackoverflow.com/questions/4464347/creating-imageview-with-round-corners)

[如何使 ImageView 具有圆角](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners)

[如何设置paint.setColor(int color)](https://stackoverflow.com/questions/12899428/how-to-set-paint-setcolorint-color)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:38:35.323

试试你的 back.xml 类似这样的东西，而不是给出一个矩形背景图像。

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
   <item android:drawable="#ff00ff >
    </item>
 <item>
    <shape android:shape="rectangle" >
        <solid/>
        <stroke android:width="1dip" android:color="#225786" />
        <corners android:radius="10dip"/>
        <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
    </shape>
  </item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:42:57.917

Raj 发布的另一种替代方法是在角落使用具有透明度的背景图像。

由于您的背景很简单，因此最好的解决方案是使用 9-patch，这是大多数背景图像的 Android 原生解决方案：http: [//developer.android.com/guide/topics/graphics/2d- graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)，它的风格类似于一些网站背景的绘制方式。

Android 也有它自己的 9-patch 创建器与 sdk 捆绑在一起：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)，所以很容易编辑自己的 png 文件，然后将 9-patch 应用到布局。9-patches 的优势在于它们还可以为您处理 UI 大小的调整，这意味着您在不同屏幕上使用应用程序时不会遇到太多问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T09:45:52.250

解决方案 1

1.  为边框创建一个 9-patch 图像。图像的中间应该是透明的。

2.  使用 RelativeLayout 作为父级，并将您的图像 LinearLayout 放在底部。将边框 9-patch 设置为另一个线性布局的背景，并将其放在图像 LinearLayout 的顶部。然后它将覆盖角落，您将获得预期的结果。

解决方案 2

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap) {
Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
    bitmap.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(output);

final int color = 0xff424242;
final Paint paint = new Paint();
final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
final RectF rectF = new RectF(rect);
final float roundPx = 12;

paint.setAntiAlias(true);
canvas.drawARGB(0, 0, 0, 0);
paint.setColor(color);
canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
canvas.drawBitmap(bitmap, rect, rect, paint);

return output;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T09:59:32.113

将您的形状与圆角图像结合使用。

您可以使用 AndroidQuery 加载带有圆角的图像。请参阅[http://code.google.com/p/android-query/wiki/ImageLoading#Rounded_Corner](http://code.google.com/p/android-query/wiki/ImageLoading#Rounded_Corner)

```
String url ="http://www.vikispot.com/z/images/vikispot/android-w.png";
ImageOptions options = new ImageOptions(); 
options.round = 15;
aq.id(R.id.image).image(url, options); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T12:05:32.087

我认为你应该这样做。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
<item>
    <shape>
        <solid android:color="@color/back" />
        <stroke android:width="1dip" android:color="#225786" />
        <corners android:radius="10dip"/>
        <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
    </shape>
</item> 
```

如果背景不是颜色而是位图，您应该遵循这个漂亮的指南 [http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners /](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)**

# asp.net - 几秒钟后，Asp.net 会话自动到期

> ID：14476264
> 
> 赞同：4
> 
> 时间：2013-01-23T09:27:47.293
> 
> 标签：asp.net, session, session-state, session-timeout

当用户登录时，我将 user_id 存储在 Session 变量中，并且在第二页上，我正在检查页面加载，如果 user_id 存在则很好，否则重定向到登录页面，但是当我登录并在几秒钟后刷新页面时重定向到下一页那里的会话为空，我被重定向到登录页面它在整个应用程序中发生我尝试了所有解决方案，但都是徒劳的

另一件事是应用程序在开发服务器和局域网中的本地 IIS 上运行良好，但在实时服务器上，这个问题正在发生。

请提出解决方案，我还在 web.config 的 Proc 中定义会话超时（以分钟为单位）和模式。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-03T04:34:28.260

如果您在应用程序池中使用 InProc 会话状态模式和多个工作进程，则 Session 可能会在几秒钟后自动过期，因为如果同一会话的不同请求由不同的工作进程提供服务，则可能会发生数据丢失。

在我的例子中，我使用**InProc 会话状态模式，Maximum Worker Process 设置为 4，**因此**session is expiring**。

设置**最大工作进程 = 1 解决了它**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:37:25.743

您可以添加`<httpRuntime delayNotificationTimeout=""/>`您的 web.config。[看更多](http://msdn.microsoft.com/en-us/library/vstudio/e1f13641%28v=vs.100%29.aspx)

或者

尝试这个

```
<authentication mode="Forms">
  <forms loginUrl="/loginurl" timeout="2880" />
</authentication> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:09:09.377

在 web.config 中试试这个

```
<configuration>
 <system.web>
   <sessionState mode="InProc" timeout="90"></sessionState>
 </system.web>
</configuration> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T18:41:19.177

您是否有机会使用服务器集群？网络负载平衡可能每次都将客户端重新路由到不同的服务器。如果是这样，要么必须重新配置 NLB 以将客户端保持在单个服务器上，要么设置会话共享。

还要检查应用程序池是否有一些过于频繁地自行回收的淫秽规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T17:26:57.507

我刚刚遇到的一个会话问题在这里可能会有所帮助，那就是某些公司的用户会很快结束他们的会话，但其他用户没有问题。经过大量测试，我发现从办公室连接到网站的用户有问题，但从家里连接的同一用户没有问题。

他们的公司设置为对所有出站 Web 请求使用单个 IP（或一组 IP）。好吧，这家公司有多个 IP 用于外部访问，并且每个请求都会更改（或可能更改）IP。这将重置我网站上的会话并将其注销。

我仍在为此实施修复或检查，所以我不能给你一个万无一失的修复，但这是值得研究的。这将解释发生在你身上的事情。

# python - 在 python 中的 type() 生成的对象中添加方法

> ID：14476269
> 
> 赞同：2
> 
> 时间：2013-01-23T09:27:59.893
> 
> 标签：python, python-2.7

我正在使用 type 生成对象，以使用以前编写的一些代码

```
# Assume that myAppObjDict is already initialized.
myAppObj=type("myAppClass", (object,),myAppObjDict) 
```

现在我想在其中添加一个方法说 myValue() 以便我应该能够调用

```
value=myAppObj.myValue() 
```

应该采取什么方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:32:34.260

`myAppObjDict`您应该在创建类之前添加方法：

```
def myValue(self, whatever):
    pass
myAppObjDict['myValue'] = myValue

# Assume that myAppObjDict is already initialized.
myAppObj=type("myAppClass", (object,),myAppObjDict) 
```

或者定义一个包含方法的基类并将其包含在基类元组中。

```
class MyBase(object):
    def myValue(self): return 42

# Assume that myAppObjDict is already initialized.
myAppObj=type("myAppClass", (MyBase,),myAppObjDict) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:46:53.490

您应该能够在创建后将任何功能分配给类：

```
def method(self):
    print self.__class__.__name__

def my_class (object):
    pass

my_class.method = method

o = my_class()
o.method() 
```

您可以随时执行此分配，并且所有对象都将添加新方法，事件已经创建。

毕竟，Python 是一种动态语言 :)

# facebook - Facebook 位置 ID 的意义

> ID：14476271
> 
> 赞同：1
> 
> 时间：2013-01-23T09:28:02.767
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

发出请求朋友姓名、ID 和位置的 API 调用，

```
FB.api('/me/friends', {fields: 'name,id,location'}, function(response) {
//...
}); 
```

返回位置的两个参数（id 和名称）。“name”参数指定了朋友的位置，但“id”参数的意义是什么？

如果该参数非常重要，那么它对 Facebook 应用程序开发人员有何用处？

我一直在安静地寻找这个问题的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T10:59:57.610

这是打开图中的对象 ID。您可以从 grah 查询有关此位置的信息。例如这是我的家乡： http: [//graph.facebook.com/106013482772674](http://graph.facebook.com/106013482772674)

图上的每个对象都由一个 id 表示。位置，作为对象本身也有它。

# architecture - 机器语言指令是否包括输入数字，或者它们是否需要用户或其他设备的输入？

> ID：14476272
> 
> 赞同：0
> 
> 时间：2013-01-23T09:28:04.713
> 
> 标签：architecture, intel, machine-language

我一直在阅读例如 32 位微处理器架构。我有一个简单的问题：如果浮点数的最大位数是 32 位，那么该数字如何进入微处理器进行处理？它可以作为机器语言指令的一部分吗？因为如果答案是肯定的，它是否必须构成整个机器语言指令（换句话说，控制位或操作码或其他任何东西都没有空间，因为所有 32 位都将用于数字本身）。是不是它实际上是如何完成的，即是否有一个机器语言命令说“注意CPU：你将阅读的下一个机器语言命令实际上不是一个命令；它实际上是一个数字”。

或者，是否所有输入计算机的“数据”都必须单独输入，而不是作为机器语言指令的一部分？

特别是，我想知道英特尔微处理器如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:35:02.207

我的程序集有点生疏，但我记得有用于指令的特定寄存器和用于数据的特定寄存器。因此，您实际上会将下一个数据项移动到相关寄存器中，然后将所需的指令推入 AX(?) 寄存器。

但是，我警告 - 我上次写汇编是在 2004 年......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:18:39.097

CPU 上的所有数据都通过中央总线或其他通道传输。数据要么存储在内存中，要么存储在缓存中，尽管缓存中没有太多空间。假设您使用 inc eax；命令，inc 本身就是从 RAM 中获取的信息。问题是，有像上面这样的内部 cpu 命令，其中 EAX 会增加。然后是需要外部数据的命令。对于这些命令，指令的一部分是地址本身。在后来的 Intel cpus 中，可以在指令本身中添加一个操作数，因为它更小。指令中的地址要么是指向你需要的数据的指针，要么是指向你需要的数据的指针。

最重要的是，CPU 寻找指令。如果它启动的第一件事不是指令，cpu 仍然会将它视为一个数字，这会搞砸一切。

例如：假设我们有一个 8 位 CPU，内存中首先加载到 cpu 中的应该是一条指令，所以假设它得到 01001010，那么操作码是 01，（add 或 we），然后是指令将我们在地址 001010 添加到累加器

该死的我很讨厌解释这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:27:01.703

通常，机器语言指令可以由多个单词组成。所以一个字是指令的下一个字或多个字是相关的立即数数据（要放入寄存器的值，或要操作的内存地址）。这就是[CISC 处理器](http://en.wikipedia.org/wiki/Complex_instruction_set_computing)上的工作方式，例如 Intel x86 相关架构。

但是你在做某事。在[RISC](http://en.wikipedia.org/wiki/Reduced_instruction_set_computing)体系结构中，每条指令都是一个字是很常见的。在这种情况下，要加载 32 位值，需要两个指令。换句话说，有一个单字指令来加载具有较少位的值，然后在需要时再有另一个单字指令来加载其余位。很多时候不需要第二条指令，“小”值可能仍然有 24 位，这对于程序代码中的大多数数值来说已经足够了。

# iphone - 持续响铃的 Iphone 警报通知

> ID：14476273
> 
> 赞同：1
> 
> 时间：2013-01-23T09:28:04.887
> 
> 标签：iphone, xcode

您好我正在尝试使用 localNotification 创建警报应用程序，但警报仅播放 30 秒。我进行了很多搜索，但没有任何解决方案可以连续播放声音。但在内置的 iphone 警报中，声音会持续播放。如果有人知道，请向我解释如何以及如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:32:38.720

这是不可能的 - 只能通过 AppStore 中不允许的私有 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:38:56.933

唯一的方法是使用本地通知或推送通知。两者都允许播放声音 30 秒

# twitter-bootstrap - Twitter Bootstrap 使用而不是更改颜色表标题行的颜色

> ID：14476275
> 
> 赞同：6
> 
> 时间：2013-01-23T09:28:07.637
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2

在我的 rails 3.2 应用程序中，我必须显示一个表格。所以我使用了 twitter bootstrap 的类**“table table-bordered”**来格式化它。[然后为了改变它的行颜色，我还使用了这里](http://twitter.github.com/bootstrap/base-css.html#tables)描述的类“信息”和“成功” 。

我页面中的表格代码如下：-

```
<table class="table table-bordered">
  <tr class="info">
    <th>Your Links</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @links.each do |link| %>
  <tr class="success">
    <td><%= link_to linkbunch_url(link.link), linkbunch_url(link.link) %></td>
    <td><%= link_to 'Show', linkbunch_url(link.link) %></td>
    <td><%= link_to 'Edit', edit_url(link.link) %></td>
    <td><%= link_to 'Destroy', destroy_url(link.link), method: :delete, data: { confirm: 'Are you sure ?' } %></td>
  </tr>
<% end %>
</table> 
```

猜猜它改变了所有行的颜色，除了第一行是表的头行。但是当将**“”**更改为“ **”**时，它工作正常。但是因为它只是一个简单的行而不是表头行，所以它的字体不是粗体。

那么如何在不使用的情况下更改标题行的颜色**代替**??****

 ****谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:29:13.047

`.info`引导程序中没有用于添加或添加`.success`到表头的css 。你必须自己制定规则。

```
.table tbody tr.info th {
    background-color: #d9edf7;
} 
```

[jsfiddle](http://jsfiddle.net/hajpoj/fsW8K/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-12T11:06:57.493

```
<table class="table table-bordered">
  <thead>
    <tr class="info">
      <th>Your Links</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
<% @links.each do |link| %>
  <tr class="success">
    <td><%= link_to linkbunch_url(link.link), linkbunch_url(link.link) %></td>
    <td><%= link_to 'Show', linkbunch_url(link.link) %></td>
    <td><%= link_to 'Edit', edit_url(link.link) %></td>
    <td><%= link_to 'Destroy', destroy_url(link.link), method: :delete, data: { confirm: 'Are you sure ?' } %></td>
  </tr>
<% end %>
  </tbody>
</table> 
```****

# iphone - AR - 修复位置的注释

> ID：14476278
> 
> 赞同：0
> 
> 时间：2013-01-23T09:28:22.093
> 
> 标签：iphone

我做了一个增强现实应用程序，我在 z 轴上有一个箭头指向一家商店的位置（经度和纬度）现在我想在“天空”中做一个注释，它直接指向商店坐标. 我在github上找到了一些项目，比如iPhone-AR-Toolkit，但是我不明白这个。有没有一种简单的方法可以在位置上方添加这样的注释？

**编辑：** 经过大量搜索后，我在 de web 中找到了一个 pdf 文档，其中包含一些我想要的代码，但问题是，我不理解它并且它没有做正确的事情。 **编码：**

```
// Artificial Horizon - compensate for rotation along x-axis
// need to know the field of view of the camera to find horizon position inside of camera view
// about 53 degrees vertical and 37.5 degrees horizontal

// for directional Horizon - artificial horizon pegged to a specific cardinal direction (North)

// in (void)viewDidAppear
// Load the image to show in the overlay
UIImage *overlayGraphic = [UIImage imageNamed:@"Punkt.png"];
overlayGraphicView = [[UIImageView alloc] initWithImage:overlayGraphic];
overlayGraphicView.frame = CGRectMake(30, 100, 50, 50);
[self addSubview:overlayGraphicView];

[[UIAccelerometer sharedAccelerometer] setDelegate:self];

locationManager = [[CoreLocationMangager alloc] init];
[locationManager setDelegate:self];
[locationManager startUpdatingHeading];

- (void) updateUI {
    CGPoint overlayCenter = [overlayGraphicView center];
    overlayCenter.y = 240.0 - 537.8 * sin(vertAngle);
    overlayCenter.x = 160.0 - 497.8 * sin((magCompassHeadingInDeg) * (M_PI / 180.0));
    [overlayGraphicView setCenter:overlayCenter];
    overlayGraphicView.transform = CGAffineTransformMakeRotation(angle);
}

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    vertAngle = -atan2(acceleration.y, acceleration.z) - M_PI/2.0;
    vertAngleInDeg = vertAngle * 180.0f/M_PI;

    angle = -atan2(acceleration.y, acceleration.x) - M_PI/2.0;
    angleInDeg = angle * 180.0f / M_PI;

    [self updateUI];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {
    magCompassHeadingInDeg = [newHeading magneticHeading];
    [self updateUI];
} 
```

有一个图像视图被添加到相机叠加层，这个图像应该指向北方 - 但我的问题是它也指向南方。我该如何解决？任何人都可以解释一下overlayCenter.y 和.x 中的值吗？我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:51:16.600

您需要指定一个**高度**来指定从海平面到 z 轴的高度。

Mixare SDK 将允许您指定和加载**带有纬度、经度和高度的 POI。**

你可以从[这里参考](https://github.com/mixare/mixare-iphone)

我已经使用了这个 sdk，它工作得很好，并且允许你指定海拔高度。

希望这可以帮助：）

# c# - 命名空间内受保护的内部类编译没有错误

> ID：14476279
> 
> 赞同：5
> 
> 时间：2013-01-23T09:28:27.507
> 
> 标签：c#, .net, mono, internal, protected

```
protected internal class foo
{
    //this compiles without any errors
} 
```

还

```
internal class bar
{
    public int quix;
    protected internal int zyx;
    //this compiles without any errors
} 
```

这些编译器错误还是我对标准的误解？

解释：

1.  类不能具有受保护的内部访问修饰符，根据 MSDN（直接在命名空间中声明的类和结构（换句话说，未嵌套在其他类或结构中）的类和结构）只能是公共的或内部的，可以是公共的或内部的。如果未指定访问修饰符，则 Internal 是默认值）。
2.  并非所有类型或成员都可以在所有上下文中使用所有访问修饰符，并且在某些情况下，类型成员的可访问性受到其包含类型 (MSDN) 的可访问性的限制。公众应该失败。受保护的内部对我来说是模棱两可的——内部修饰符不是必需的。

**编辑：**我使用 Mono 的事实是不必要的，因为问题是关于标准说什么而不是 MONO 做什么或不做什么。也许我正在编写自己的编译器。这就是为什么我引用 MSDN 来准确说明什么是允许的，什么是不允许的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T09:30:21.967

正如我在上面的评论中提到的，`protected internal`表示`protected` **or** `internal` **NOT** `protected` **和** `internal`. 这里没有错误:)

更多信息/解释在被[黑客攻击](http://haacked.com/archive/2007/10/29/what-does-protected-internal-mean.aspx)

针对您的问题：

1.  命名空间中的类（而不是另一个类中）**只能声明为`public`or`internal`**。**但是**，另一个类中的一个类**可以声明为`protected internal`,`private`等。**

2.  是的，`protected internal`可以在访问修饰符比其成员更严格的类中使用，请参见下面完全有效的用法示例（**请注意，该类在类内部`Program`）**：

    ```
    public class Program
    {
        static void Main(string[] args)
        {
        }

        private class Foo
        {
            private int priv { get; set; }
            protected internal int protint { get; set; }
            public int pub { get; set; }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:33:40.090

从[`Access Modifiers (C# Programming Guide)`](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

```
protected internal 
```

> 类型或成员可以被声明它的程序集中的任何代码访问，也可以**从**另一个程序集中的派生类中访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T09:33:48.297

引用[MSDN 条目](http://msdn.microsoft.com/en-us/library/ms173121%28v=vs.110%29.aspx)：

> **受保护的内部**
> 
> 类型或成员可以被声明它的程序集中的任何代码访问，也可以从另一个程序集中的派生类中访问。来自另一个程序集的访问必须在从声明受保护内部元素的类派生的类声明中进行，并且必须通过派生类类型的实例进行。

所以这个声明非常有意义，它只是在类外使用时的工作方式与预期不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T09:34:52.287

此外，我真的怀疑*如果该类被声明为某个命名空间的成员，*那么“受保护的内部类”是否会编译：

C#编译器说：

> 命名空间中定义的元素不能显式声明为私有、受保护或受保护的内部

受保护的类将始终是嵌套类！

## 更新

*由于您在某些版本的 Mono 编译器中尝试您的代码示例，并且您在问题的示例代码中说`//this compiles without any errors`，我不明白您为什么没有为 Mono 标记问题。*

*标准是 Microsoft C# 编译器行为。如果你问一个关于“为什么会编译”的问题并且**你没有提到你没有使用官方的**，那么你只是假设任何编译器都会编译你的代码。*

你想知道哪个是标准吗？它 -*再次*- ：**受保护的类将始终是嵌套类！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:34:59.783

关键字`protected`属于继承，关键字`internal`属于范围。

# image - 如何在 ActionScript3 中平滑从服务器加载的图像

> ID：14476281
> 
> 赞同：0
> 
> 时间：2013-01-23T09:28:36.240
> 
> 标签：image, actionscript-3, smoothing

我正在尝试平滑从另一个网站加载的缩放图像。图像没有动画。如果我使用本地图像效果很好。但它似乎不适用于从远程服务器加载的图像。

这是片段：

```
 ...

    //_loader.load(new URLRequest(http://img.example.com/remote.jpg));
    _loader.load(new URLRequest("../assets/local.jpg"));
    _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);

    ...

protected function completeHandler(event:Event):void
{
    var image:Bitmap = Bitmap(event.target.content);
    image.smoothing = true;
    image.pixelSnapping = "never";
} 
```

经测试，当我加载 local.jpg 时，它运行良好。但是当我从服务器加载 remote.jpg 时，平滑参数不起作用。

有谁知道为什么？我到处搜索，但没有人有同样的问题。我没有使用 Flash Professional，它是在 Flash Builder 中构建的纯 ActionScript 项目。并且图像没有动画。这么有线...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:16:27.740

因为您是从远程服务器拉取图像，所以需要在保存图像的 Web 服务器上设置跨域策略 xml 文件。

没有这个，您将无法在亚像素级别更改位图。

示例： [http ://www.senocular.com/pub/adobe/crossdomain/policyfiles.html](http://www.senocular.com/pub/adobe/crossdomain/policyfiles.html)

更多详细信息 [http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.edu.html](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.edu.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:51:58.647

一天天的搜索，终于找到了答案：

```
 _loader.load( new URLRequest("http:…." , new LoaderContext(true)); 
```

最重要的是 load() 方法的第二个参数，它是一个 LoaderContext。参考： [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#load()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#load())

虽然我在服务器中设置了跨域文件，但没有“new LoaderContext(true)”，它不会读取跨域文件。这就是为什么它一开始不起作用的原因。

如果你有同样的问题，希望对你有帮助！

# android - Android EditText setText 不起作用

> ID：14476282
> 
> 赞同：-6
> 
> 时间：2013-01-23T09:28:38.353
> 
> 标签：android, android-edittext

我正在尝试使用 java 设置 edittext 的 setText 但它不起作用并强制关闭我的应用程序，但我不知道为什么

Java 代码

```
EditText UserProfileFirstName;
UserProfileFirstName = (EditText) findViewById(R.id.userFirstName);
UserProfileFirstName.setText("John"); 
```

xml

```
<EditText 
   android:id="@+id/userFirstName"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:inputType="text"
   android:textSize="22sp"
   android:layout_marginTop="40dp"
   android:layout_marginBottom="15dp"
   android:hint="First Name"
   android:ems="10"
  /> 
```

LogCat 错误

```
 01-23 09:32:15.564: E/AndroidRuntime(4101): FATAL EXCEPTION: main
        01-23 09:32:15.564: E/AndroidRuntime(4101): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.unext.unextlibrary/com.unext.unextlibrary.ProfileActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.unext.unextlibrary/com.unext.unextlibrary.UserProfile}: java.lang.NullPointerException
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.os.Handler.dispatchMessage(Handler.java:99)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.os.Looper.loop(Looper.java:137)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.main(ActivityThread.java:5039)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at java.lang.reflect.Method.invokeNative(Native Method)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at java.lang.reflect.Method.invoke(Method.java:511)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at dalvik.system.NativeStart.main(Native Method)
        01-23 09:32:15.564: E/AndroidRuntime(4101): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.unext.unextlibrary/com.unext.unextlibrary.UserProfile}: java.lang.NullPointerException
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:2023)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:749)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.widget.TabHost.setCurrentTab(TabHost.java:413)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.widget.TabHost.addTab(TabHost.java:240)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at com.unext.unextlibrary.ProfileActivity.onCreate(ProfileActivity.java:105)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.Activity.performCreate(Activity.java:5104)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     ... 11 more
        01-23 09:32:15.564: E/AndroidRuntime(4101): Caused by: java.lang.NullPointerException
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at com.unext.unextlibrary.UserProfile.onCreate(UserProfile.java:57)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.Activity.performCreate(Activity.java:5104)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
        01-23 09:32:15.564: E/AndroidRuntime(4101):     ... 21 more 
```

我在谷歌上搜索，也看到了 SO 答案，但似乎没有什么对我有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T09:34:21.730

添加 `setContentView(R.layout.LAYOUTNAME);`oncreate，在您尝试通过以下方式获取视图之前

`UserProfileFirstName = (EditText) findViewById(R.id.userFirstName);`

// 这`LAYOUTNAME`是您定义的布局名称`edittext`

# mysql - Grails 更改现有数据库上的 ID 类型

> ID：14476286
> 
> 赞同：0
> 
> 时间：2013-01-23T09:28:53.373
> 
> 标签：mysql, grails, grails-orm

我在 grails 中有一个使用 mysql 数据库的现有应用程序，其中包含大量数据。以前的程序员使用 int 作为 id，只要我的 id 用完，我就需要更改为 long。我知道域类中的更改不会更新现有表的列。我是否手动更改mysql中的类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:18:01.300

有一个叫做数据库迁移的东西......有一个插件。

[http://grails.org/plugin/database-migration](http://grails.org/plugin/database-migration)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T10:38:47.773

是的，更改域类后手动更改列。

另外，我认为首先将 dbUpdate 设置为“create-drop”并尝试（在另一个数据库实例上）让 Grails 生成新模式并查看它是否符合您的预期是一个好主意。

因此，更改域，生成测试模式并检查它是否正确，然后手动更改原始数据库。

# javascript - WebWorkers 可以用于超级计算机吗？

> ID：14476287
> 
> 赞同：2
> 
> 时间：2013-01-23T09:28:58.850
> 
> 标签：javascript, web-worker, supercomputers

这真的是一个普遍的问题，不确定这是否是它的地方（它可能会被删除，因为它很笼统）所以请不要发问（我只是好奇）。

我一直在阅读 WebWorkers API 并有一个想法。

WebWorkers 可以被限制为每台机器/用户只使用少量的处理能力。这可以定制为不影响用户体验，并且可能只会轻微影响浏览器性能（如果有的话）。

我的问题是，它们理论上可以用来将网站/应用程序变成高度分布式的超级计算机吗？

如果可以做到，这是否更像是一个道德问题，如果用户不知道是错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T15:13:15.377

是的，WebWorkers 可以用于超级计算，也就是分布式计算。

事实上，这正是 CrowdProcess 所做的：[http ://crowdprocess.com/](http://crowdprocess.com/)

免责声明：我在 CrowdProcess 工作。

网站可以加入该平台并为其提供来自访问它们的浏览器的处理能力，而不会以任何方式破坏网站访问者的体验。

开发人员可以将该平台用于他们的分布式计算工作。检查文档以了解这是如何发生的：[http ://crowdprocess.com/doc-index](http://crowdprocess.com/doc-index)

网站访问者可以选择加入、选择退出或简单地同意为平台提供浏览器处理能力的网站条款和条件。

我们要求网站所有者以他们认为适合其受众的任何方式告诉用户正在发生的事情。CrowdProcess 知道，任何人都不应违背他们的同意和意愿为该平台供电。这就是我们开发具有更高目的项目的原因：森林火灾行为预测、基因序列比对和医学计算机视觉等等。

Our vision is that one day soon we will have enough commercial applications running on the platform that allow us to pay websites for the processing power they provide.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:50:42.643

这是可能的，不道德的并且可能是非法的。

这当然是可以做到的。事实上，你甚至不需要使用网络工作者来做到这一点。如果用户不知道这样做可能是不道德的，但它实际上可能不会降低用户体验，甚至不会引起注意。它甚至可能是非法的，您应该获得一些法律建议。

例如，如果您有一个应用程序，用户知道他们在玩游戏或类似的东西时会帮助折叠蛋白质，那么它可能是一个很棒的应用程序。另一方面，如果您想使用毫无戒心的访问者的处理能力和电力来挖掘比特币，那么您就是在自找麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:32:56.160

我找到了两家公司...

Seti 在家里[http://setiathome.berkeley.edu/](http://setiathome.berkeley.edu/)

*   让用户有机会提供一些处理能力来帮助他们分析来自望远镜的数据。

在家折叠[http://folding.stanford.edu/English/About](http://folding.stanford.edu/English/About)

*   用户可以为研究实验室提供处理能力，用于各种科学研究和学习目的（包括蛋白质串）。

只要您在条款和条件中提供详细信息，这似乎是合法的（通过 WebSockets 或 ajax），但不建议使用更好的方法来进行繁重的处理（参见上面的 2 个示例）。

# asp.net - System.Web.Optimization 包在虚拟目录中运行时为空

> ID：14476288
> 
> 赞同：3
> 
> 时间：2013-01-23T09:28:59.970
> 
> 标签：asp.net, iis, iis-7.5, asp.net-optimization

使用 IIS 中的虚拟目录将应用程序部署到服务器时遇到问题。

我已经将相同的文件配置为直接在虚拟的默认网站下运行，也可以在端口 81 上运行的新网站根目录下运行。两种配置都使用它们自己相同的应用程序池。虽然端口 81 上的站点工作正常，但在虚拟目录中运行的站点不会加载捆绑包。

在页面中，我看到 URL 中缺少版本的链接，例如：

`<link href="/MyVirtualDir/Content/css/site?v=" rel="stylesheet">`

URL 从服务器返回 200 状态，但内容完全为空。

我已经看过这样的问题，[这些](https://stackoverflow.com/questions/12100524/how-do-i-get-system-web-optimization-bundles-to-work-with-custom-folders-in-an-i)问题引用[了这个错误票](http://aspnetoptimization.codeplex.com/workitem/12)，但我的理解是，这是包含在捆绑包中的文件是“虚拟”或不在物理文件夹根目录下的时候。在我的情况下这是不正确的。

为你能给我的任何帮助干杯。我不敢相信这种配置不被支持，所以我一定在某处做错了！

**更新：我认为在此处的网络优化 codeplex 站点**[http://aspnetoptimization.codeplex.com/workitem/55](http://aspnetoptimization.codeplex.com/workitem/55) 上提出了一张描述我的问题的票，但这并不是说这让我更进一步:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:20:27.923

在与一个新项目进行比较后，我发现了问题：

我正在使用 T4MVC（尽量聪明，不要在我的代码中使用“魔术字符串”）。所以我使用了一个链接，比如

```
bundles.Add(new ScriptBundle("~/Scripts/all")
            .Include("~"+Links.Scripts.Library.jqueryPlugin.jquery_ui_js), ...)); 
```

当它在虚拟目录下运行时，它将使用路径中的虚拟目录名称解析，因此找不到文件。

我希望这可以帮助遇到同样问题的其他人。此外，看起来 T4MVC 正在寻求在未来版本中改进捆绑包中魔术字符串的使用。[请参阅此处进行讨论](http://t4mvc.codeplex.com/discussions/399205)

# jquery - 访问两个 ajax 函数中的变量

> ID：14476290
> 
> 赞同：0
> 
> 时间：2013-01-23T09:29:09.053
> 
> 标签：jquery, ajax, scope, html

我能以更简单的方式实现这个吗？？？在这里，我在 html 表中填充了我的请求...我的表就像

```
<table>
<tr>
<td>
request number
</td>
<td align="center">
approve
</td>
<td align="center">
reject
</td>
<td align="center">
query
</td>
</tr>
</table> 
```

如您所见，我只有在 mt html 代码中只有一行...但是在 ajax 调用之后，我的表中填充了几行请求..

现在完成此操作后，我必须获取表格行数并将其显示在我的

## 待处理的请求（）

LIKE : 待处理请求(9)...其中 9 是待处理请求的数量。

# sql-server - 使用批量插入将文本文件导入 SQL Server

> ID：14476297
> 
> 赞同：4
> 
> 时间：2013-01-23T09:29:36.210
> 
> 标签：sql-server, bulk-import

这是我的 sql

```
BULK INSERT dbo.Account FROM 'G:\Import\Account3.txt'
WITH
(
    FIELDTERMINATOR = '" | "'
)
GO 
```

当我运行 sql 时出现此错误

> 消息 4866，级别 16，状态 1，第 1 行
> 批量加载失败。

数据文件中第 1 行第 1 列的列太长。请验证是否正确指定了字段终止符和行终止符。

> 消息 7399，级别 16，状态 1，第 1 行
> 链接服务器“（null）”的 OLE DB 提供程序“BULK”报告了错误。提供商没有提供有关该错误的任何信息。
> 
> 消息 7330，级别 16，状态 2，第 1
> 行无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”获取行。

请帮我。我已经尝试了很多方法，但仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-17T11:49:44.583

从您的示例 SQL 中，您似乎缺少一个 ROWTERMINATOR 语句，指定如何区分行。

您的查询将变成类似

```
BULK INSERT dbo.Account FROM 'G:\Import\Account3.txt'
WITH
(
FIELDTERMINATOR = '" | "',
ROWTERMINATOR = '\r\n'
)
GO 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T10:00:19.243

尝试这个

```
BULK
INSERT dbo.Account 
FROM 'G:\Import\Account3.txt'
WITH
(
FIELDTERMINATOR = '|',
ROWTERMINATOR = '\n'
)
GO 
```

# ajax - Extjs 4 日历如何实现

> ID：14476301
> 
> 赞同：3
> 
> 时间：2013-01-23T09:29:42.123
> 
> 标签：ajax, database, extjs4.1

我想使用 Extjs 4 (4.1.3) 实现一个日历，它允许我使用 ajax 技术从数据库中保存日期。我希望单击单元格会出现一个编辑器，允许我修改数据库中该日期的特征等等。

Ps：我看过那个网站[http://docs.sencha.com/ext-js/4-1/#!/example/calendar/index.html](http://docs.sencha.com/ext-js/4-1/#!/example/calendar/index.html)，但我真的不知道如何工作并下载代码。但是它很难实现，我需要吗？

坦克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:45:57.323

该示例使用[可扩展日历](http://ext.ensible.com/)。使用起来相当容易，它们在下载中包含示例和文档。他们甚至有一个“远程”示例，显示了您的场景的一个简单示例。

话虽如此，如果您在商业应用程序中使用它（就像 ExtJS），它不是免费的。个人开发者许可证为 199 美元（含支持费用为 329 美元）。

# google-contacts-api - Google 通讯录的存储配额是多少？

> ID：14476305
> 
> 赞同：0
> 
> 时间：2013-01-23T09:29:46.040
> 
> 标签：google-contacts-api, google-profiles-api

今天我在创建新联系人时遇到了以下错误-“超出存储配额”。我使用谷歌通讯录 API v3.0。我没有在联系文档中找到有关“存储配额”或 API 限制的任何注释 - [https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)

Google 通讯录没有任何使用存储配额的 api 方法。我检查了该用户的 gmail 配额，发现有很多免费存储空间。

“存储配额超出”错误是什么意思？我们如何检查用户的可用存储空间？通过 API 创建联系人是否有任何限制？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:37:28.577

您是否认为您可能会达到您的实际联系配额？以下是解释 Google Apps 联系人限制的文章：http: [//support.google.com/a/bin/answer.py](http://support.google.com/a/bin/answer.py?hl=en&answer=1146409) ?hl=en&answer=1146409 。你能看看它是否适合你吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T10:42:43.567

我在“我的联系人”下只有大约 2,000 个联系人，但在“其他联系人”下发现了数千个重复的联系人。尝试在“其他联系人”下查看，看看你是否也有重复。

# algorithm - 索引集列表的高效数据结构

> ID：14476306
> 
> 赞同：4
> 
> 时间：2013-01-23T09:29:48.913
> 
> 标签：algorithm, data-structures

我试图通过例子来解释：

想象一个编号元素的列表 E = [elem0, elem1, elem2, ...]。

一个索引集现在可以是 {42, 66, 128} 引用 E 中的元素。这个集合中的顺序并不重要，所以 {42, 66, 128} == {66, 128, 42}，但每个元素都是在任何给定的索引集中最多一次（所以它是一个实际的集合）。

我现在想要的是一个节省空间的数据结构，它给了我另一个有序列表 M，其中包含引用 E 中元素的索引集。 M 中的每个索引集只会出现一次（因此 M 在这方面是一个集合）但 M 必须本身是可索引的（所以 M 在这个意义上是一个 List ，因此精确的索引并不重要）。如有必要，可以强制索引集包含相同数量的元素。

例如，M 可能看起来像：

```
0: {42, 66, 128}
1: {42, 66, 9999}
2: {1, 66, 9999} 
```

我现在可以执行以下操作：

```
for(i in M[2]) { element = E[i]; /* do something with E[1],E[66],and E[9999] */ } 
```

您可能会看到这是怎么回事：您现在可能有另一个映射 M2，它是指向 M 的有序集合列表，最终指向 E 中的元素。

正如您在此示例中所见，索引集可能相对相似（M[0] 和 M[1] 共享前两个条目，M[1] 和 M[2] 共享后两个）这让我认为必须比使用集合数组的天真方式更有效。但是，我可能无法提出保证良好“共享”的索引条目的良好全局排序。

我可以想到任何东西，从将 M 表示为一棵树（其中 M 的索引来自深度优先搜索排序或其他东西）到联合查找结构的哈希映射（虽然不知道它是如何工作的：）

非常欢迎指向任何此类教科书数据结构的指针（数据库世界中有什么吗？）但如果您提出“自制”解决方案或仅提出随机想法，我也很感激。

空间效率对我来说很重要，因为 E 可能包含数千甚至几百万个元素，（一些）索引集可能很大，至少一些索引集之间的相似性应该很大，并且可能存在多层映射。

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:30:56.287

可以使用位数组。它们是元素数组，`a[i]`如果`1`在`i`集合中，`0`如果`i`不在集合中。`size(E)`因此，即使每个集合包含少数成员或不包含成员，每个集合也会准确占据位。空间效率不高，但如果你用一些压缩算法压缩这个数组，它的大小会小得多（可能达到最终熵限制）。因此，您可以尝试动态马尔可夫编码器或 RLE 或 Huffman 组，然后选择最适合您的一种。然后，迭代过程可以包括动态解压缩，然后是线性扫描`1`比特。对于长时间`0`运行，您可以修改减压算法以检测这种情况（RLE 是最简单的情况）。

如果您发现集合的差异很小，您可以存储集合，`A`而`A xor B`不是为公共部分节省空间。在这种情况下，要进行迭代，您必须先解压缩两者，然后再解压缩它们。`A``B``B``A``A xor B``xor`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:04:14.607

您可以合并 M 中的所有数字并删除重复项并将其命名为 UniqueM。

所有 M[X] 集合都转换为位掩码。例如 int 值可以存储 32 个数字（为了支持无限计数，您应该存储整数数组，如果数组大小总共为 10，我们可以存储 320 个不同的元素）。long 类型可以存储 64 位。

```
E: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15}

M[0]: {6, 8, 1}
M[1]: {2, 8, 1}
M[2]: {6, 8, 5} 
```

将转换为：

```
UniqueM: {6, 8, 1, 2, 5}
M[0]: 11100 {this is 7}
M[1]: 01110 {this is 14}
M[2]: 11001 {this is 19} 
```

**注意：** 您也可以结合 my 和 ring0 方法，而不是重新排列 E 制作新的 UniqueM 并在其中使用间隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:25:09.760

击败指数将非常困难。您可以通过使用正确的数据类型来节省一些空间（例如，在 gnu C 中，如果 E 中的元素少于 64k ，则为*短*，如果 < 4G 则为*int ...）。*

*除了，*

既然您说 E 中的顺序并不重要，您可以对 E 进行排序，使其最大化连续元素以尽可能多地匹配 Ms。

例如，

```
E: { 1,2,3,4,5,6,7,8 }

0: {1,3,5,7}
1: {1,3,5,8}
2: {3,5,7,8} 
```

通过重新排列 E

```
E: { 1,3,5,7,8,2,4,6 } 
```

并使用 E 索引，而不是值，您可以根据 E 的子集定义 Ms，给出索引

```
0: {0-3}     // E[0]: 1, E[1]: 3, E[2]: 5, E[3]: 7 etc...
1: {0-2,4}
2: {1-3,4} 
```

这边走

*   您使用索引而不是原始数字（索引通常更小，没有负数..）
*   Ms 由子集组成，`0-3`表示 0、1、2、3，

困难的部分是使算法重新排列 E 以便最大化子集大小 - 最小化 Ms 大小。

*E 重排算法建议*

*   排序所有女士
*   处理所有女士：

构建地图的算法，它为元素“x”提供其邻居列表“y”，以及*点*，“y”在“x”之后的次数

```
Map map (x,y) -> z
for m in Ms
  for e,f in m // e and f are consecutive elements
    if ( ! map(e,f)) map(e,f) = 1
    else map(e,f)++
  rof
rof 
```

重新排列 E

```
ER = {}                 // E rearranged
Map mas = sort_map(map) // mas(x) -> list(y) where 'y' are sorted desc based on 'z' 
e = get_min_elem(mas)   // init with lowest element (regardless its 'z' scores)

while (mas has elements) 
  ER += e        // add element e to ER
  f = mas(e)[0]  // get most likely neighbor of e (in f), ie first in the list
  if (empty(mas(e))
    e = get_min_elem(mas) // Get next lowest remaining value
  else
    delete mas(e)[0]  // set next e neighbour in line
    e = f
  fi
elihw 
```

算法（地图）应该是`O(n*m)`空间，在 E 中有 n 个元素，在所有 Ms 中有 m 个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:22:27.927

另一个有用的解决方案：

```
E: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15}

M[0]: {1, 2, 3, 4, 5, 10, 14, 15}
M[1]: {1, 2, 3, 4, 5, 11, 14, 15}
M[2]: {1, 2, 3, 4, 5, 12, 13} 
```

缓存**常用项目**：

```
Cache[1] = {1, 2, 3, 4, 5}
Cache[2] = {14, 15}
Cache[3] = {-2, 7, 8, 9} //Not used just example.

M[0]: {-1, 10, -2}
M[1]: {-1, 11, -2}
M[2]: {-1, 12, 13} 
```

将指向缓存列表的链接标记为负数。

# mysql - 我应该如何在我的项目（使用休眠）中定义序列，以使项目同时与 Oracle 和 Mysql 一起使用。

> ID：14476310
> 
> 赞同：0
> 
> 时间：2013-01-23T09:29:58.243
> 
> 标签：mysql, oracle, hibernate, sequence

我们有一个使用 Hibernate 作为 OR Mapper 的 java 项目。我们需要该项目与 Oracle 和 Mysql 一起使用。因为有些客户不想安装 Oracle。我们在实体上添加了@sequenceGenerator 注释以具有序列。但是该项目无法使用这些注释连接到 Mysql DBMS。有什么方法可以让我们在 mysql 和 Oracle 模式下都拥有序列，而无需任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:55:54.987

据我所知，这是不可能的，因为

MySQL 支持**AUTO_INCREMENT**和 Oracle 支持**SEQUENCE**

还有许多其他因素需要考虑，例如数据类型和索引

由于 Oracle 是**ORDBMS**，而 mysql 是**DBMS**，因此缺少 MySQL 中存在的许多功能

# 解决方案

我认为我们可以为每个人使用单独的数据库来做到这一点

[ 由于我们有许多免费工具可以将数据从 Oracle 转换为 MySQL，我们可以使用它们。甚至其中一些不是免费的，但我们可以隐藏结构使用它们链接1链接[2](http://www.oracle.com/technetwork/products/migration/mysql-093223.html) []](http://dbconvert.com/convert-oracle-to-mysql-pro.php)

数据库迁移需要全面了解源数据库和目标数据库的数据类型、索引、列和表选项等

或者

你可以使用同样支持**SEQUENCES**的 PostgreSQl，它也是一个 GPL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:50:57.527

最便携的方法是使用[TableGenerator](http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html)。它是可移植的，因为没有使用数据库提供者特定的构造。最后生成的值存储到数据库表中，并通过 SQL 查询检索和增加值。

[Hibernate文档](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/mapping.html#mapping-declaration-id)中也介绍了用法。

# c - 将 printf 与两个 UART 一起使用

> ID：14476314
> 
> 赞同：6
> 
> 时间：2013-01-23T09:30:03.807
> 
> 标签：c, embedded, serial-port, printf

我已经实现`fputc`并`fgetc`在 retarget.c 中通过 UART0 在 Cortex-M3 上成功使用 printf。

但是，我想要第二个 uart 通道来获取更多调试信息。如何使用 printf 像 UART0 一样完美地集成它？

例如，将 fprintf 用于自定义目标并检查`fputc`将字符发送到哪个目标。例如，用于正常输出`fprintf(UART0,"..");`和调试输出`fprintf(UART1,"..");`

但是我看不到是否为 stdout 调用了 fopen，所以我正在努力了解如何手动实现它。（如果我只是打电话`fprintf(RANDOM_VALUE,..)`，我不知道这会如何表现。

我想一旦我将它定向到不同的“文件”，那么只需检查 fputc 中指向的内容，但这是我正在努力解决的 FILE 指针的初始设置。

也许有某种方法可以区分 stdout 和 stderr，尽管从两个单独的通道获取输入时我仍然遇到同样的问题。

微库中还有 fprintf 吗？如果没有，是否有更好的方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T17:00:18.103

fputc() 接受一个流指针参数，有两个标准输出流 stdin、stdout 和 stderr。在重定向的较低级别，它们分别与文件描述符 0、1 和 2 相关联，您可以使用此信息将 stderr 与设备驱动程序级别的备用 UART 相关联。

然后，您可以使用 stderr 输出调试数据：

```
fprintf (stderr, "Error reading file" ) ; 
```

例如。

最小重定向（特定于 Keil ARM-MDK/RealView）可能如下所示：

```
struct __FILE 
{
    int handle;  
};

enum 
{
    STDIN_HANDLE,
    STDOUT_HANDLE,
    STDERR_HANDLE
} ;

FILE __stdin = {STDIN_HANDLE} ;
FILE __stdout = {STDOUT_HANDLE} ;
FILE __stderr = {STDERR_HANDLE} ;

int fputc(int ch, FILE *f) 
{
    int ret = EOF ;

    switch( f->handle )
    {
        case STDOUT_HANDLE :
            // Write character to UART0
            ...
            ret = ch ;
            break ;

        case STDERR_HANDLE :
            // Write character to UART1
            ...
            ret = ch ;
            break ;

        default :
            break ;

    return ret ;
} 
```

显然，如果需要，这也是您可以挂接文件系统的地方，在这种情况下，您的 __FILE 结构无疑会有额外的成员。

如果您不想为此使用 stderr，则必须重新定位 fopen() 以将设备名称（例如“dbg:”）转换为所需端口的文件描述符，然后使用 stdio 输出到关联的流。

> 微库中还有 fprintf 吗？如果没有，是否有更好的方法来实现这一点？

文档会告诉你，但是是的。Microlib stdio 支持由`#pragma import(__use_full_stdio)`指令控制，文档不清楚如果不使用它会排除什么。尝试不使用它，如果缺少任何东西，请使用它。这就是说我会想象 printf() 是作为标准输出流的 fprintf() 实现的，所以如果你有 printf()，你就有 fprintf()。

# ruby - 如何为方法提供参数？

> ID：14476319
> 
> 赞同：-3
> 
> 时间：2013-01-23T09:30:29.003
> 
> 标签：ruby, parameters

我写了这段代码：

```
def sumeven (i)
  result = 0
  while i < 100
    if i % 2 == 0
      result += i
    end
    i += 1
  end
  result
end 
```

我如何给出`i`方程？当我在终端（mac）中运行方程式时，我没有得到任何输出，因为我无法弄清楚如何用 替换`i`数字。在文本编辑器中用数字替换“i”仍然没有输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:32:36.367

尝试：

```
def sumeven(i)
  # method implementation...
end

# call the method, passing it an argument
sumeven(4) 
```

如果这真的回答了你的问题，我可以建议你退后一步，在你走得太远之前读一本关于红宝石的书吗？您在问为什么在您知道如何使用油门踏板之前汽车不走。

# c++ - 从 Excel 到 utf-8 mysql 的字符串

> ID：14476320
> 
> 赞同：0
> 
> 时间：2013-01-23T09:30:31.013
> 
> 标签：c++, excel, utf-8

我正在编写一些从 XLS 文件中获取行并将它们插入数据库的软件。

在 OpenOffice 中，单元格如下所示：

```
Brunner Straße, Parzelle 
```

我正在使用 CodeProject 中的 ExcelFormat 库。

```
int type = cell->Type();
cout << "Cell contains " << type << endl;
const char* cellCharPtr = cell->GetString();
if (cellCharPtr != 0) {
  value.assign(cellCharPtr);
  cout << "normal string -> " << value << endl;
} 
```

使用库获取的字符串作为 char* 返回（因此 cell->Type() 返回 STRING，而不是 WSTRING），现在看起来像这样（在控制台上）：

```
normal string -> Brunner Stra�e, Parzelle
hex string -> 42 72 75 6e 6e 65 72 20 53 74 72 61 ffffffdf 65 2c 20 50 61 72 7a 65 6c 6c 65 
```

我使用 mysql cpp 连接器将其插入数据库，如下所示：

```
prep_stmt = con -> prepareStatement ("INSERT INTO "
                  + tablename 
                  + "(crdate, jobid, imprownum, impid, impname, imppostcode, impcity, impstreet, imprest, imperror, imperrorstate)"
                  + " VALUES(?,?,?,?,?,?,?,?,?,?,?)");

<...snip...>

prep_stmt->setString(8,vals["street"]);

<...snip...>

prep_stmt->execute(); 
```

将其插入具有 utf8_general_ci 排序规则的数据库后，它看起来像这样：

```
Brunner Stra 
```

这很烦人。

当从 xls 文件中检索字符串时，如何确保文件所在的任何语言环境都转换为 utf-8？

这将作为 Web 服务的后端运行，客户可以在其中上传自己的 excel 文件，因此恐怕“更改 Libre Office 中文件的编码”无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:53:46.593

您的输入似乎以 latin1 编码，因此您需要将 mysql“连接字符集”设置为`latin1`.

我不熟悉您用来连接 MySQL 的 API。在其他 API 中，您将添加`charset=latin1`到连接 URL 或调用 API 函数来设置连接编码。

或者，您可以在将输入提供给 MySQL 之前对其进行重新编码。

# javascript - 使用按钮单击禁用锚标记

> ID：14476321
> 
> 赞同：2
> 
> 时间：2013-01-23T09:30:39.750
> 
> 标签：javascript, jquery, asp.net

我需要使用按钮单击事件禁用锚标记。我根据我的要求处理了服务器端和客户端事件。我修改了客户端点击事件中的“href”属性，如下所示。

[ASPX]

```
 <asp:Button ID="Button1" runat="server" Text="Disable" OnClick="disable"  CausesValidation="false" OnClientClick="disable();"  /> 
```

[脚本]

```
 function disable() {
        $('a.ClassName').attr("href", "#")
    } 
```

它被正确设置。但是在服务器端处理之后，锚标记再次设置为旧的 href 属性。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:37:21.783

当您回发到服务器时，会呈现一个新页面。

您通过 javascript 所做的任何更改都将丢失。

您应该在服务器端检测条件（较早按下按钮）并对 url 服务器端进行必要的更改。

您可以将此状态更改存储在隐藏输入中并在服务器端获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:41:46.673

您必须在页面加载后立即禁用链接，

```
preventDefault(); 
```

所以尝试做这样的事情，

```
function disable_link(event) {

    event.preventDefault();
    return false;
} 
```

而是将其绑定到您想要的特定元素

# javascript - jQuery文件上传完成功能

> ID：14476322
> 
> 赞同：4
> 
> 时间：2013-01-23T09:30:41.687
> 
> 标签：javascript, jquery, file-upload

我已经修改了 jQuery File Upload 的[Wiki](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)上提供的示例代码我的脚本适用于`add`回调，但不适用于`done`回调。服务器正在正确获取帖子并返回 JSON 响应。

我注意到在源代码中一些回调被注释掉了。我不确定是否应该取消注释它们。或使用回调`fileuploaddone`但删除评论不起作用。

不确定我是否正确执行此操作。我希望服务器返回一个 JSON 对象来描述我刚刚上传的图像，以便表单的下一步可以将图像与骨干网模型链接。

```
<form id="uploadform">
    <input id="fileupload" type="file" name="imagefile" data-url="imagefiles" multiple>
    <button type="#" class="btn btn-primary uploadfile" style="display: none">Upload</button>
    <div id="progress">
        <div class="bar" style="width: 0%;"></div>
    </div>      
</form>
<script>
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {              
        data.context = $('.uploadfile').css('display','none')
            utils.addValidationSuccess('Added file: ' + data.jqXHR.name);
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .bar').css(
                'width',
                progress + '%'
            );
        },
        add: function (e, data) {
            console.log('added');
            data.context = $('.uploadfile')
                .css('display','block')
                .click(function () {
                    utils.showAlert('Uploading','...', 'alert-warning');
                    data.submit();
                });
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:05:44.953

使事情起作用的是在提交时使用 jquery.ajax 的显然本机回调，调整后的代码如下所示。

```
<div class="row-fluid">
    <form id="uploadform">
        <input id="fileupload" type="file" name="imagefile" data-url="imagefiles" multiple>
        <button type="#" class="btn btn-primary uploadfile" style="display: none">Upload</button>
        <div id="progress">
            <div class="bar" style="width: 0%;"></div>
        </div>      
    </form>
    <script>
    $(function () {
        $('#fileupload').fileupload({
            dataType: 'json',
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css(
                    'width',
                    progress + '%'
                );
            },
            add: function (e, data) {
                console.log('added');
                data.context = $('.uploadfile')
                    .css('display','block')
                    .click(function () {
                        utils.showAlert('Uploading','...', 'alert-warning');
                        var jqXHR = data.submit()
                            .success(function (result, textStatus, jqXHR) {
                                console.log('Done');

                                console.log('e:' + e);
                                console.log('results:' + result );
                                console.log('results.id:' + result.id );
                                console.log('textStatus:' + textStatus );               
                                console.log('jqXHR:' + jqXHR );

                                data.context = $('.uploadfile').css('display','none')
                                utils.showAlert('Success','the file uploaded successfully','alert-success');
                                // utils.addValidationSuccess('Added file: ' + data.jqXHR.name);
                            })
                            .error(function (jqXHR, textStatus, errorThrown){
                                 utils.showAlert('Error','...', 'alert-error');
                            });
                    });
            }
        });
    });
    </script>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T14:48:54.893

我对这段代码有同样的问题。

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
              alert("done");
        }     
    });
}); 
```

只是不设置数据类型，现在执行完成的回调......下面的代码只是工作......

```
$(function () {
    $('#fileupload').fileupload({
            done: function (e, data) {
                  alert("done");
        }     
    });
}); 
```

服务器返回一些 json。

# linux-kernel - 如何使用 kprobe 计算 linux 内核中的 malloc

> ID：14476325
> 
> 赞同：1
> 
> 时间：2013-01-23T09:30:45.450
> 
> 标签：linux-kernel, malloc, system-calls, fedora, kprobe

我想`malloc`在fedora 中用Kprobe 计算系统调用。我知道这`malloc`不是系统调用，而是在用户空间中实现的，但如果可能的话，我想用 kprobe 来计算 malloc。

我必须给 Kprobe 的系统调用的名称是什么？例如对于 do_work：

```
kp.addr = (kprobe_opcode_t *) kallsyms_lookup_name("do_fork"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-08T13:02:31.797

这对于 kprobes 是不可能的，因为正如您所说，`malloc`它不是系统调用。

但是，您可以使用 USDT 来跟踪用户空间进程。[密件抄送工具](https://github.com/iovisor/bcc)包含一个带有[`uobjnew`](https://github.com/iovisor/bcc/blob/master/tools/lib/uobjnew.py). 它跟踪给定进程中的对象分配：

```
$ ./uobjnew -h
usage: uobjnew.py [-h] [-l {java,ruby,c}] [-C TOP_COUNT] [-S TOP_SIZE] [-v]
                  pid [interval]

Summarize object allocations in high-level languages.

positional arguments:
  pid                   process id to attach to
  interval              print every specified number of seconds

optional arguments:
  -h, --help            show this help message and exit
  -l {java,ruby,c}, --language {java,ruby,c}
                        language to trace
  -C TOP_COUNT, --top-count TOP_COUNT
                        number of most frequently allocated types to print
  -S TOP_SIZE, --top-size TOP_SIZE
                        number of largest types by allocated bytes to print
  -v, --verbose         verbose mode: print the BPF program (for debugging
                        purposes)

examples:
    ./uobjnew -l java 145         # summarize Java allocations in process 145
    ./uobjnew -l c 2020 1         # grab malloc() sizes and print every second
    ./uobjnew -l ruby 6712 -C 10  # top 10 Ruby types by number of allocations
    ./uobjnew -l ruby 6712 -S 10 # top 10 Ruby types by total size 
```

# windows-phone-8 - 用于在 CameraCaptureSequence 中保存图像数据的 MemoryStream 为 0，即使 CameraCaptureSequence 中存在图像数据

> ID：14476328
> 
> 赞同：1
> 
> 时间：2013-01-23T09:30:58.400
> 
> 标签：windows-phone-8

我正在使用 PhotoCaptureDevice 类，我可以捕获相机帧，但是当我将 CameraCaptureSequence 的 CameraCaptureFrame.CaptureSequence 中的图像数据复制到 MemoryStream 中然后将其保存在相机胶卷中时出现错误。这是我正在尝试做的代码片段。

```
PhotoCaptureDevice cam;    
cam = await PhotoCaptureDevice.OpenAsync(<front/rear depending on user input>,<resolution depends on user input>);

CameraCaptureSequence seq;
seq = cam.CreateCaptureSequence(1);

cam.SetProperty(KnownCameraGeneralProperties.PlayShutterSoundOnCapture, true);

MemoryStream captureStream1 = new MemoryStream();
seq.Frames[0].CaptureStream = captureStream1.AsOutputStream();//This stream is for saving the image data to camera roll

await cam.PrepareCaptureSequenceAsync(seq);
await seq.StartCaptureAsync();

bool a = seq.Frames[0].CaptureStream.Equals(0);//This value is false during debugging
if(capturestream1.Length>0)//This condition evaluates to false
{
MediaLibrary library = new MediaLibrary();
Picture picture1 = library.SavePictureToCameraRoll("image1", captureStream1);
}
else
{
//Logic to handle condition
} 
```

正如我在评论中添加的那样，该变量的`bool a`计算结果为 false，我通过调试代码进行了检查。但由于某种原因，该`capturestream1.Length`属性为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:56:09.383

下面是有关如何使用单个图像捕获序列并将该图像保存到 MediaLibrary 的代码片段。显然，对于这个 API，这是一个微不足道的例子，因为序列非常适合捕获多个图像并将它们与后处理组合在一起。

```
private async void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    using (MemoryStream stream = new MemoryStream())
    using (var camera = await PhotoCaptureDevice.OpenAsync(CameraSensorLocation.Back,
            PhotoCaptureDevice.GetAvailableCaptureResolutions(CameraSensorLocation.Back).First()))
    {
        var sequence = camera.CreateCaptureSequence(1);
        sequence.Frames[0].CaptureStream = stream.AsOutputStream();
        camera.PrepareCaptureSequenceAsync(sequence);
        await sequence.StartCaptureAsync();

        stream.Seek(0, SeekOrigin.Begin);

        using (var library = new MediaLibrary())
        {
            library.SavePictureToCameraRoll("currentImage.jpg", stream);
        }
    }
} 
```

当您运行此代码片段时，您可以看到存储在设备上的图像：

![带有新图像的图片中心](../Images/be3b37fb09866ba0ff62055bbc1eb591.png)

您可以在诺基亚 Camera Explorer 应用程序中找到完整的工作示例，该应用程序演示了 WP8 相机 API 的端到端用例：[http ://projects.developer.nokia.com/cameraexplorer](http://projects.developer.nokia.com/cameraexplorer)

# c# - 使用WCF的两个winform应用程序之间的通信？

> ID：14476332
> 
> 赞同：4
> 
> 时间：2013-01-23T09:31:07.773
> 
> 标签：c#, .net, winforms, wcf

我有两个不同的 winform 应用程序，App1 和 app2。App1调用app2的exe（使用DOS命令窗口）并发送消息启动app2。app2 开始执行，一旦完成任务，它就会向 app1 发回执行成功的消息。如何使用 WCF 实现此功能。早些时候，同样的代码是用 foxpro 编写的，这个 finc 是使用内存管理实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:51:01.303

我认为您想要的是点对点通信，其中 2 个应用程序（可能在或可能不在同一台机器上运行）异步发送彼此消息。这就是 MSN Messenger 等聊天程序的工作方式。

[在 MSDN 上有一个关于使用 WCF 进行点对点通信](http://msdn.microsoft.com/en-us/library/bb690929.aspx)的“简单”教程。

请注意，这并不像听起来那么容易。您可能更喜欢[只使用 Windows 的`SendMessage`](http://boycook.wordpress.com/2008/07/29/c-win32-messaging-with-sendmessage-and-wm_copydata/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:52:20.920

基本上：

一方面实例化一个“服务器”

```
UIIServiceHost = new ServiceHost(typeof(UIInterop));
UIIServiceHost.Open(); 
```

其中 UIInterop 是一个实现 IUIInterop 的类，它是一个服务契约

```
using System.ServiceModel;

[ServiceContract]
public interface IUIInterop {
    [OperationContract]
    void SetControlValue (UIControl c);
}

[DataContract]
public class UIControl {        
    [DataMember]
    public String Name { get; set; }

    [DataMember]
    public String Value { get; set; }
} 
```

[生成](http://msdn.microsoft.com/en-us/library/ms733133.aspx)代理类 => UIInteropClient

另一方面，使用代理类实现客户端

```
using ( UIInteropClient proxy = new UIInteropClient("nameDependingOfAppConfig") ) {
    proxy.SetControlValue(new UIControl {});
} 
```

===== 编辑 =====

类和接口的名称只反映我缺乏想象力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:36:51.120

这只是概念上如何实现这一点：

您需要实现 WCF 服务。有很多方法可以完成这项任务。其中之一应该是这样的。

App1 调用 service 方法并告诉 app2 需要执行。App1 可以等待响应。

App2 时不时 ping 服务，看是否需要执行。App2 完成了它的工作并调用服务方法来告诉它已经完成了。

App1 将在完成后得到响应。

其他选项不是实现请求/响应，而是从 App1 ping 服务以查看 App2 是否完成了它的工作。

如何实现 WCF 服务参见，例如：[http ://wcftutorial.net/WCF-Getting-Started.aspx](http://wcftutorial.net/WCF-Getting-Started.aspx)

# android - 关于 Android 中的套接字

> ID：14476333
> 
> 赞同：0
> 
> 时间：2013-01-23T09:31:09.373
> 
> 标签：android, sockets

```
package androidclient.test;

import java.io.IOException;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class AndroidClient_Activity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        //System.out.println("Has requested");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_android_client_);
        //System.out.println("Has requested");
        try {
            java.net.Socket sc = new Socket(InetAddress.getByName("192.168.1.100"),2024);
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Has requested");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_android_client_, menu);
        return true;
    }

} 
```

应用程序已运行到服务器。它在监视器中有输出。但是在我启动客户端后，它无法连接服务器。我还在 oncreate() 方法中添加了一些输入语句。它没有响应，也没有输出异常。

谁能给我一个指南？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:53:44.667

您必须使用 socket.getInputStream() 和 socket.getOutputStream 通过套接字进行通信。

请参阅[http://zeroh.tripod.com/ressources/sockets.html上的客户端示例](http://zerioh.tripod.com/ressources/sockets.html)

# android - 应用程序未在设备启动时启动

> ID：14476335
> 
> 赞同：1
> 
> 时间：2013-01-23T09:31:14.850
> 
> 标签：android, boot

我使用 BroadcastReceiver 在启动时启动我的应用程序，但它没有启动

这是我的代码

**清单代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.copy"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="9" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher" 
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <receiver android:name="com.copy.MyBroadcastreceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.copy.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

**广播类代码：**

```
public class MyBroadcastreceiver extends BroadcastReceiver 
{

@Override
public void onReceive(Context context, Intent intent) 
{
    Intent startServiceIntent = new Intent(context, MainActivity.class);
    startServiceIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startService(startServiceIntent);
}

} 
```

**MainActivity 类：**

```
public class MainActivity extends Activity 
{
ListView lView;
private ArrayList results = new ArrayList();

@SuppressWarnings("unchecked")
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    lView = (ListView) findViewById(R.id.list1);
    PackageManager pm = this.getPackageManager(); 

    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> list = pm.queryIntentActivities(intent,PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list)
    {
        results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());       
        Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
    }
    lView.setAdapter(new ArrayAdapter(this,android.R.layout.simple_list_item_1, results));
    lView.setOnItemClickListener(new OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
        {               
            String x = (String) arg0.getItemAtPosition(arg2);
            Toast.makeText(getApplicationContext(), "This is "+lView.getItemAtPosition(arg2), Toast.LENGTH_SHORT).show();

        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:40:44.317

您正在使用`startService()`并且`MainActivity`不是`Service`. 你需要`startActivity()`改用。

```
public class MyBroadcastreceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Intent startActivityIntent = new Intent(context, MainActivity.class);
        startActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(startActivityIntent);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:45:53.613

是的，调用**startActivity**：

```
@Override
public void onReceive(Context context, Intent intent) {

     Intent startActivityIntent = new Intent(context, MainActivity.class);
        startActivityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(startActivityIntent);
    } 
```

有关更多信息，请参阅此链接 [http://blog.burnayev.com/2009/08/android-development-how-to-launch.html](http://blog.burnayev.com/2009/08/android-development-how-to-launch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:41:16.967

尝试启动一个活动而不是服务：-

```
Intent i = new Intent(context, MainActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

# iphone - 如何在后台调用json webservice？

> ID：14476339
> 
> 赞同：1
> 
> 时间：2013-01-23T09:31:26.537
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中有一个设置页面，我需要在其中编辑每个实体。为此，当用户选择每个实体时，我们将转到单独的页面并在那里进行编辑并返回。我需要通过在后台调用服务来更新编辑的值，但我需要在编辑值后立即返回主视图。所以我使用的是GCD方式。

```
dispatch_async(backgroundQueue_, ^{
            [self update];
            dispatch_sync(dispatch_get_main_queue(), ^{

            });
        }); 
```

但有时我会遇到类似的崩溃`ASHTTPheaders` `didreciveresponseheaders`，并且`ASHTTprequest reportFailure`。谁能指出我实现这一目标的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:35:36.657

如果您希望它在应用程序进入后台后立即发生，您可以使用[-[UIApplication beginBackgroundTaskWithExpirationHandler:]](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。只要任务不会花费太长时间，那应该可以工作。

# javascript - Flot plothover 在 ie9 和 ie10 中不起作用

> ID：14476344
> 
> 赞同：1
> 
> 时间：2013-01-23T09:32:04.350
> 
> 标签：javascript, jquery, internet-explorer, flot

我有一张图表

```
$.plot($("#placeholder2"), 
[ {label:'pulse', data: d11, color: '#3b5998'}], 
{grid:{hoverable: true}}
);

$("#placeholder2").bind("plothover", function (evt, position, item) {
     alert(item);
}); 
```

在 IE9 和 10 item always = null 在其他浏览器和 ie7-8 (with excanvas) item 返回值

# android - 相机设置参数失败：致命异常

> ID：14476345
> 
> 赞同：4
> 
> 时间：2013-01-23T09:32:06.677
> 
> 标签：android, android-camera

我正在尝试使用 Camera API 捕获图像。

**在我使用Parameters.FOCUS_MODE_EDOF**设置相机对焦模式参数之前，一切正常。
在设置焦点模式之前，我检查**PackageManager.FEATURE_CAMERA_AUTOFOCUS**是否可用。

下面是我的代码：我的测试环境在`LG Optimus Net Android 2.3.4 with autoFocus feature`

```
 if (mContext.getPackageManager().hasSystemFeature(
            PackageManager.FEATURE_CAMERA_AUTOFOCUS))
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            params.setFocusMode(Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
        } else {
            // Below parameter not working
            params.setFocusMode(Parameters.FOCUS_MODE_EDOF);
            // If i set FOCUS_MODE_AUTO then it will work fine but image
            // quality is little bit downgraded compare to default camera
            // application
            // params.setFocusMode(Parameters.FOCUS_MODE_AUTO);
        } 
```

任何提示都会有所帮助

# sql - 我可以在 Oracle 的 SELECT 语句中为游标中的列加上别名吗？

> ID：14476346
> 
> 赞同：0
> 
> 时间：2013-01-23T09:32:07.457
> 
> 标签：sql, oracle, select, cursor, alias

我正在编写一个客户端应用程序，它通过`select`语句从 Oracle 数据库调用存储过程。存储过程返回一个游标。我需要为此游标返回的列定义别名，并且需要在我的`select`语句中完成。

我无法对 Oracle 数据库进行任何更改。我不能写任何PLSQL。我对这个数据库唯一能做的就是查询它。

请指教。

* * *

**背景：**此存储过程是在应用程序框架内调用的众多过程之一。目前，所有调用都以 XML 格式返回其结果，使用以下语法进行转换：

```
select XMLType.createXML(package_name.storedProcName('1', '2', '3')).getClobVal() as sresult  from dual; 
```

但是，此游标包含两个具有相同名称（特别是“NAME”）的列。在 TOAD 中运行此查询时，该列会自动附加一个“_1”，但是 XMLType 会导致不合逻辑的 XML，如下所示：

```
<?xml version="1.0"?>
<ROWSET>
    <ROW>
        <ID>1</ID>
        <NAME>BRUCE WAYNE</NAME>
        <NAME>BATMAN</NAME>
    </ROW>
</ROWSET> 
```

这就是为什么我必须在将列转换为 XMLType 之前为其设置别名。我希望查询输出不包含重复的列名，以便 XML 可以改为这样（没有重复的标签）：

```
<?xml version="1.0"?>
<ROWSET>
    <ROW>
        <ID>1</ID>
        <NAME>BRUCE WAYNE</NAME>
        <OTHER_NAME>BATMAN</OTHER_NAME>
    </ROW>
</ROWSET> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:34:01.107

我会为此寻找一个样式表。

例如：

```
SQL> select XMLType.createXML(foo()).transform(xmltype('<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  2  <xsl:template match="/ROWSET/ROW/NAME[2]">
  3     <NAME_1>
  4             <xsl:apply-templates select="@*|node()"/>
  5     </NAME_1>
  6  </xsl:template>
  7  <xsl:template match="@*|node()">
  8     <xsl:copy>
  9             <xsl:apply-templates select="@*|node()"/>
 10     </xsl:copy>
 11  </xsl:template>
 12  </xsl:stylesheet>')) as sresult  from dual
 13  /

SRESULT
--------------------------------------------------------------------------------
<ROWSET>
  <ROW>
    <ID>1</ID>
    <NAME>BRUCE WAYNE</NAME>
    <NAME_1>BATMAN</NAME_1>
  </ROW>
  <ROW>
    <ID>2</ID>
    <NAME>CLARK KENT</NAME>
    <NAME_1>SUPERMAN</NAME_1>
  </ROW>
</ROWSET> 
```

即，我们`/ROWSET/ROW/NAME[2]`用 NAME_1 替换 ROW 元素中出现的第二个 NAME ( )。其他所有内容都按原样复制。

# java - 使用 java 将 MySql 表复制到 Sqlite

> ID：14476352
> 
> 赞同：0
> 
> 时间：2013-01-23T09:32:22.457
> 
> 标签：java, mysql, sqlite

我需要将 MySql db 中包含的几个表通过 Java 代码传输到 Sqlite 数据库。

为此，在我的应用程序中，我执行以下操作：

1.  创建一个 Sqlite 数据库
2.  select * from each table(of mysql db) ，从结果集中获取每个字段对应的数据，并将每个字段的数据插入到对应的sqlite表中。

这是正确的方法吗？有没有更好的方法来做到这一点？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:40:09.557

如果这是只发生一次的事情，您可以考虑使用 sqlite .import 命令（[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)）并使用 mysqldump 将数据转储到可由 .import 读取的 csv 文件中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:39:54.367

**使用插入脚本**从 MySQL 导出模式，编辑它（删除 MySQL 特定的语法），然后在 SQLite 中执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:39:18.113

看看这个python方法。这可以帮助你吗

[https://gist.github.com/2972461](https://gist.github.com/2972461)

# mysql - Mysql按组计数发生

> ID：14476353
> 
> 赞同：6
> 
> 时间：2013-01-23T09:32:23.367
> 
> 标签：mysql, sql, select

嗨，我在 mysql DB 上有下表。

```
╔═══════════╦═════════╦════════╦════════════════╗
║ REVIEW_ID ║ USER_ID ║ STATUS ║   DATE_ADDED   ║
╠═══════════╬═════════╬════════╬════════════════╣
║       218 ║       2 ║ cool   ║ 20130121134811 ║
║       218 ║       2 ║ cool   ║ 20130121134812 ║
║       218 ║       2 ║ lame   ║ 20130121134813 ║
║       218 ║       2 ║ funny  ║ 20130121134814 ║
║       218 ║       2 ║ funny  ║ 20130121134815 ║
║       218 ║       2 ║ funny  ║ 20130121134816 ║
║       218 ║       2 ║ lame   ║ 20130121134817 ║
╚═══════════╩═════════╩════════╩════════════════╝ 
```

当我根据`user_id`需要获取每种类型的总状态结果进行查询时，如何获得结果：

```
╔════════╦════════════╗
║ STATUS ║ TOTALCOUNT ║
╠════════╬════════════╣
║ cool   ║          2 ║
║ funny  ║          3 ║
║ lame   ║          2 ║
╚════════╩════════════╝ 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T09:32:59.410

使用`COUNT()`which 是一个聚合函数，并根据它们对它们进行分组`status`

```
SELECT  status, COUNT(*) totalCount
FROM    tableName
GROUP   BY status 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f487/2)

其他）

*   [MySQL GROUP BY 和一些聚合函数列表](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:33:30.387

```
SELECT status, count(*)
FROM your_table
GROUP BY status 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:35:51.343

```
SELECT status, count(*)
FROM yourtable
GROUP BY status
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:44:29.910

```
SELECT  STATUS, COUNT(*) AS TOTALCOUNT
FROM    tableName
GROUP   BY STATUS
HAVING   USER_ID = user_id you need 
```

# iphone - 在服务器上上传图像后，设备上的图像大小不同

> ID：14476365
> 
> 赞同：0
> 
> 时间：2013-01-23T09:32:42.983
> 
> 标签：iphone, objective-c, xcode, uiimage, alassetslibrary

在上传图片之前我正在做以下操作。如果我在上传之前和上传之后检查图像的大小，它会加倍（即，如果我上传了 2 MB 的图像，我可以在服务器上看到 4 MB 的图像）。

```
 NSTimeInterval timeInterval = [assetDate timeIntervalSince1970];
    ALAssetRepresentation *rep = [temp defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    StrPath = [StrPath stringByAppendingFormat:@"%d.%@",(int)timeInterval,strImageType];

    UIImage *image =[UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
    NSData *dataObj = nil;
    dataObj = UIImageJPEGRepresentation(image, 1.0);
    NSString* StrFileData = [Base64 encode:dataObj];
    NSString* strFileHash = [dataObj md5Test]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:33:03.247

我有几个建议。如果你注意到这些..它应该对你有帮助

1.  您可以直接从 ALAsset **defaultRepresentation获取 ALAsset 图像 NSData**

    **getBytes:fromOffset:length:error:**方法。

2.  使用 ALAsset 缩略图而不是检索全分辨率图像

    **CGImageRef iref = [myasset aspectRatioThumbnail];**

3.  ALAsset Libraay 块将在单独的线程中执行。服务器在主线程中上传也是如此

    ```
     dispatch_async(dispatch_get_global_queue(0, 0), ^{

       // do the server upload

      }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:04:08.790

**对图像的特定****高度**和**宽度**使用以下方法

 **```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，它不会被调整大小:)**

# php - 如果查询不存在，则显示模板图像？

> ID：14476366
> 
> 赞同：1
> 
> 时间：2013-01-23T09:32:48.827
> 
> 标签：php, mysql

我有一个查询，它会提取用户收藏夹列表并在页面上显示图像。我想要做的是，如果没有要显示的收藏夹来显示文件目录中的模板图像。

我正在尝试这样做，但会出现此错误：

```
Warning: file_exists() expects parameter 1 to be string, resource given in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_favourites/favourites.php on line 28

Warning: mysql_fetch_array() expects parameter 1 to be resource, string given in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_favourites/favourites.php on line 33 
```

我下面的代码有人可以帮助我并向我展示如何做我想做的事情吗？

谢谢。

```
<?php
$favorites_set_more = get_user_favorites_more();

if (!file_exists($favorites_set_more)) {
    $favorites_set_more = "data/photos/0/_default.jpg";
}

        while ($favorites2 = mysql_fetch_array($favorites_set_more)) {

echo "<a href=\"profile.php?id={$favorites2['favorite_id']}\"><img width=\"90px\" height=\"90px\" class=\"favorites_pic2\" src=\"data/photos/{$favorites2['favorite_id']}/_default.jpg\" /></a>";
?>

<? } ?> 
```

这是 favourites_set_more 函数：

```
function get_user_favorites_more() {
            global $connection;
            global $_SESSION;
            $query = "SELECT f.favorite_id, p.display_name
                        FROM ptb_favorites f, ptb_profiles p
                        WHERE f.user_id =".$_SESSION['user_id']."
                        AND p.user_id = f.user_id
                        LIMIT 4,12";
                        $favorites_set_more = mysql_query($query, $connection);
            confirm_query($favorites_set_more);
            return $favorites_set_more;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:35:07.297

如果您阅读错误消息，它会说`file_exists()`期待 a`string`但您提供的是`resource`. 所以你应该看看`get_user_favorites_more()`返回的是什么。显然它不是一个`string`.

如果未设置收藏夹，请确保您的`get_user_favorites_more()`函数返回一个不存在的图像链接，以便该`file_exists`函数将返回 false 并显示您的默认图像。

当您查看`get_user_favorites_more()`函数时，您将返回`mysql_query($query, $connection)`. 这是一个`resource`而不是一个`string`。所以你不能做一个`file_exists($favorites_set_more)`. 您可以将其更改为：

```
<?php
   //Get the favorites for the user
   $favorites_set_more = get_user_favorites_more();

   if (mysql_num_rows($favorites_set_more) == 0) {
      echo "<img width=\"90px\" height=\"90px\" class=\"favorites_pic2\" src=\"data/photos/0/_default.jpg\" />";
   }
   else {
      while ($favoriteImg = mysql_fetch_assoc($favorites_set_more)) {
         echo "<a href=\"profile.php?id=" . $favoriteImg['favorite_id'] . "\">";
         echo "<img width=\"90px\" height=\"90px\" class=\"favorites_pic2\" src=\"data/photos/" . $favoriteImg['favorite_id'] . "/_default.jpg\" />";
         echo "</a>";
      }
   }
?> 
```

# javascript - Grunt 助手提示不起作用

> ID：14476368
> 
> 赞同：3
> 
> 时间：2013-01-23T09:32:53.587
> 
> 标签：javascript, command-prompt, gruntjs

我正在为 grunt 编写一个新插件，它使用一些问题来解决一些翻译问题。我使用 编写插件`grunt.registerMultiTask();`并且我使用 `grunt translate`. 但是在代码的某些部分，我有解决翻译迁移问题的提示。

代码是：

```
grunt.helper('prompt', {}, [
  // Prompt for these values.
  grunt.helper('prompt_for', 'name')
], function(err, props) {
  // All done!
  done();
}); 
```

我想知道为什么它无视命令行中的提示。它只是输出问题而不等待答案。

![在此处输入图像描述](../Images/931dea94758ba100d3b63588bf824fd6.png)

# regex - 从 vimeo 提要频道和正则表达式中提取 url

> ID：14476369
> 
> 赞同：0
> 
> 时间：2013-01-23T09:32:54.933
> 
> 标签：regex, url, feed, vimeo, channel

我需要从 vimeo 频道的提要中提取不带单词 /channel/name 的视频 url

示例提要：vimeo.com/channels/nudiecutie/videos/rss

示例视频网址：http: [//vimeo.com/channels/nudiecutie/57383513](http://vimeo.com/channels/nudiecutie/57383513)

我需要从 rss 的结果更改链接到[http://vimeo.com/57383513的功能](http://vimeo.com/57383513)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:20:38.483

```
if(  preg_match( '#.+?(\d+)$#', ' http://vimeo.com/channels/nudiecutie/57383513', $matches ))
{
    $url = 'http://vimeo.com/' . $matches[1]; //$url contain your desired pattern
} 
```

这是你想要的吗？它抓取视频 ID 并连接到`http:vimeo.com/`

# oracle11g - Cakephp2.x如何连接Oracle 11g？

> ID：14476370
> 
> 赞同：0
> 
> 时间：2013-01-23T09:32:56.253
> 
> 标签：oracle11g, cakephp-2.0

我无法将 oracle 与 cakephp2 连接，搜索了几个小时后，我发现并一步一步地跟踪[链接](http://www.hassanbakar.com/2012/01/09/using-oracle-in-cakephp-2-0/) 仍然不成功，我的 oracle 11g

错误：

> ORA-12514: TNS:listener 当前不知道连接描述符中请求的服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:37:04.127

我找到了有很多错误的解决方案，这里是我修复的：（注意仍然遵循这个[链接](http://www.hassanbakar.com/2012/01/09/using-oracle-in-cakephp-2-0/comment-page-1/#comment-40324)）

1.  php 版本 5.4.+ 出错，p 5.3.0（wamp 服务器）
2.  具有覆盖功能的 oracle php 文件[文件出错（方法不兼容）](http://snipt.org/uIgg5)
3.  错误连接数据库配置
4.  错误 SELECT * FROM your table name [不要使用 select * 那会起作用]

怎么修：

1.  如果还是 php 5.3.0 启用模块 oci8
2.  使用这个我已经修改过的[oracle文件数据库](http://snipt.org/zKib2)
3.  在 Cakephp Config database.php 中使用

> ```
> public $dboracle = array(
>         'datasource' => 'Database/Oracle',
>         'driver' => 'oracle',
>         'connect' => 'oci_connect',
>         'persistent' => true,
>         'host' => "your host database ip",
>         'login' => 'db user name',
>         'password' => 'db password',
>         'database' => '(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=you db ip )(PORT=1521))
>                     (CONNECT_DATA=(SID= you sid)))',
>         'prefix' => '',
>         'schema' => 'schema_name'
> ); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T02:03:23.927

首先，ORA 错误是 ORA-12514: TNS listener cannot resolve service name 错误的排列，如下所示。这种形式的 ORA-12541 错误通常发生在数据库或侦听器进程处于启动过程中，或者当数据库（在您的情况下为 mysid）尚未向侦听器注册时。

根> oerr ora 12514

ORA-12514: TNS:listener 当前不知道连接描述符中请求的服务

原因：

*   侦听器接收到建立与数据库或其他服务的连接的请求。
*   侦听器接收到的连接描述符为尚未向侦听器动态注册或尚未为侦听器静态配置的服务（通常是数据库服务）指定服务名称。
*   这可能是一个临时条件，例如在侦听器
    启动之后，但在数据库实例向
    侦听器注册之前。

行动：

*   稍等片刻，然后尝试再次连接。
*   通过执行以下命令检查侦听器当前知道哪些服务： lsnrctl services
*   检查使用的网络服务名称的连接描述符中的 SERVICE_NAME 参数是否指定了侦听器已知的服务。

如果使用了简单连接命名连接标识符，请检查指定的服务名称是否为侦听器已知的服务。

检查 listener.log 文件中的事件。

# c# - Windows Phone 8 推送通知 (MPNS) 服务器代码

> ID：14476373
> 
> 赞同：0
> 
> 时间：2013-01-23T09:33:01.237
> 
> 标签：c#, .net, push-notification, windows-phone-8, mpns

Windows Phone 7 具有 MpnsRecipe NuGet 包，您可以使用该包将推送通知消息发送到服务器端的 Microsoft 推送通知服务 (MPNS)。但是，此软件包尚未针对 Windows Phone 8 进行更新。

[http://nuget.org/packages/MpnsRecipe](http://nuget.org/packages/MpnsRecipe)

Windows Phone 8 的等价物是什么？我想使用新的宽磁贴，但我在网上找不到任何代码让我开始。我所能找到的只是 MSDN 上新消息的 XML 格式，如果有现成的包可用，我宁愿不必自己编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:38:45.550

大多数 WP7 项目应该只适用于 WP8。您是否尝试使用 NuGet 包但有些东西不起作用？您是否[忘记取消阻止 Web 下载的 DLL](https://stackoverflow.com/questions/13698094/referencing-zxing-net-library/13698737#13698737)，或者您是否忘记更新您的[NuGet 包管理器](https://stackoverflow.com/questions/13342630/adding-nuget-ndef-library-to-windows-phone-8-project/13353550#13353550)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:04:57.617

查看 PushSharp：[https](https://github.com/Redth/PushSharp) ://github.com/Redth/PushSharp它似乎已针对 Windows Phone 8 中的新通知负载格式进行了更新。

# html - 如何在 HTML 中对齐 ProcessingJS 草图

> ID：14476383
> 
> 赞同：1
> 
> 时间：2013-01-23T09:33:29.467
> 
> 标签：html, canvas, alignment, processing, processing.js

我是 Processing.js 和 HTML 的初学者，我想将我的草图与页面的两侧对齐。如何将放置在左侧、右侧或中心的`ex.pde`草图对齐？`canvas`

这是HTML代码：

```
<!DOCTYPE html>
<html>
  <head>
  <link rel="stylesheet" href="stylesheet.css" type="text/css" charset="utf-8" />
    <title>EXAMPLE</title>
    <script>src="processing-1.4.1.js"></script>
  </head>
  <body>
    <h1 align="center">Sine Wave to Infinity</h1>
    <canvas  data-processing-sources="ex.pde"></canvas>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:40:16.503

如果我们使用正确的 HTML5，我们需要稍微修改一下这段代码。

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="stylesheet.css" type="text/css">
    <title>example</title>
    <script src="processing-1.4.1.js"></script>
  </head>
  <body>
    <h1>Sine Wave to Infinity</h1>
    <canvas data-processing-sources="ex.pde"></canvas>
  </body>
</html> 
```

（添加了一个元标记，链接没有关闭，脚本标记中有一个流氓括号，并且您在 h1 中有一个过时的样式属性）。

现在 h1 和画布在左侧齐平。将它们居中对齐意味着您要将 h1 和画布的父级的“文本对齐”属性设置为“居中”，所以在这种情况下

```
body { text-align: center; } 
```

右对齐，同样的技巧，但是 text-align: right ，而不是。但是，出于放置目的，最好将 h1 和 canvas 元素包装在一个 div 中，在该 div 内对齐它们（将 text-align 分配给该 div 而不是 body），然后您可以将该 div 放置在您想要的任何位置，同时保持h1 和画布对齐。

# ruby-on-rails - Rails 3.2 调试器向上键和向下键在 Ubuntu 12 中不起作用

> ID：14476392
> 
> 赞同：0
> 
> 时间：2013-01-23T09:33:50.200
> 
> 标签：ruby-on-rails, ruby, ubuntu-12.04, ruby-debug

我刚刚在 ubuntu 12 中安装了 rails，并且安装了它的所有依赖项和 gem，所有项目都在流畅地运行。这次我真正想念的只有一件事是 ruby​​ 调试器不是 100% 在其中工作。

我不知道我在哪里做错了。

我的 ubuntu 11.10 中安装了相同的 gem。并在调试向上箭头键和向下箭头键时正常工作以获取以前的评论。

通常，rails 开发人员使用向上/向下键来获取先前的命令/编辑/重新运行。但我不知道为什么这次它不起作用。

但是这次 Rails 3.2 调试器 up key 和 down key 这次在 Ubuntu 12 中不起作用。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:42:18.430

我建议您检查系统的 readline 工具，如下所示：

```
apt-cache policy ncurses-dev 
```

如果它没有安装：`apt-get install ncurses-dev`。

之后，您应该在 Ruby 中包含更改：

```
cd $HOME/.rvm/src/ruby-1.9.2-p0/ext/readline
ruby extconf.rb -- --with-readline-dir="$HOME/.rvm/usr"
make install 
```

这是关于主题的[有用讨论](https://stackoverflow.com/questions/4498919/problems-with-the-rails-console-rvm-and-readline)。

# php - 一旦检测到更改，在博客页面上重新加载内容的最快、最有效的方法是什么？

> ID：14476396
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:34:08.457
> 
> 标签：php, javascript, html, node.js, comet

我想创建一个博客，我希望它对用户非常友好，并且我希望以最有效的方式显示最近的博客文章。

例如，一个人可能希望每 5 秒左右以编程方式重新加载一个 div，或者他们可能每 10 毫秒向一个页面发送一个请求，该页面检查博客内容的变化（即，如果其他人已发布），并且然后在检测到更改后重新加载包含博客内容的 div。

还有什么其他方法？Twitter 或类似服务使用哪一种？有没有我失踪的？

**更新：**似乎 AJAX 真的无法工作，我需要类似的东西`node.js`或类似的东西，如果可以，请在这个方向上提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:50:00.907

您可以为此使用[APE(​​Ajax Push Engine)](http://www.ape-project.org/)、[socket.io](http://socket.io/)或[node.js](http://nodejs.org/)。您也可以[在 php 中使用彗星](http://www.zeitoun.net/articles/comet_and_php/start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:37:44.407

重复的 AJAX 请求是最糟糕的做法。您必须阅读有关`node.js`从服务器发出推送请求的信息。

Twitter/Facebook 使用服务器端推送请求来更新用户的屏幕。

您还可以查看为实时页面更新提供 API 的[**Pusher 。**](http://pusher.com/)请参阅[示例](http://www.webspeaks.in/2012/04/twitter-like-real-time-wall-update.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:52:27.440

我认为 AJAX 将是您最好的解决方案，它会在加载更新的帖子时为用户提供良好的外观和感觉，这是我认为您想要实现的动态。

然后，您可以自定义您的返回数据，例如，您可以通过比较 id 是否大于当前帖子（这将取决于您为博客的数据库设置）来检查任何较新的帖子，然后只返回那些较新的帖子，然后使用 jquery 或 javascript 将它们附加到您的帖子显示 div，或者您可以重新加载通常通过某种形式的分页完成的最后 5 或 6 个帖子。

然后，您可以设置轮询函数以每 10 或 15 秒触发一次 AJAX 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:33:44.983

您可能想看看[(HTML5 server-sent events)](http://www.w3schools.com/html/html5_serversentevents.asp)。不幸的是，不支持 IE ......

# configuration - 如何在 Windows 上安装 TestSwarm？

> ID：14476399
> 
> 赞同：1
> 
> 时间：2013-01-23T09:34:19.017
> 
> 标签：configuration, wamp, filepath, overriding, testswarm

我正在按照Windows 上[的 TestSwarm 安装说明进行操作](https://github.com/jquery/testswarm)。我已经安装了[WampServer](http://www.wampserver.com/en/)。

TestSwarm 安装的第二步是覆盖一个`localSettings.php`文件，但是我在 WampServer 安装中找不到这样的文件。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T20:12:17.570

该`localSettings.php`文件是 TestSwarm 的一部分，而不是 WAMP。请执行下列操作：

*   找到`testswarm`文件夹
*   找到`config`子文件夹
*   查找`sample-localSettings.php`文件
*   复制它
*   粘贴它
*   重命名新文件`localSettings.php`

# php - 在 OS X 10.8.2 中使用 MAMP 时 PHP 的 mail() 函数不起作用

> ID：14476404
> 
> 赞同：4
> 
> 时间：2013-01-23T09:34:55.297
> 
> 标签：php, macos, email, mamp

我已经搜索了所有解决方案，但都没有解决，因为我的问题与其他问题不同。

我根据[http://theandystratton.com/2009/fix-phps-mail-function-after-latest-os-x-leopard-update](http://theandystratton.com/2009/fix-phps-mail-function-after-latest-os-x-leopard-update)`tail -f /var/log/mail.log`一步一步地遵循了解决方案，但是当我在终端中运行命令时，我得到一个错误：

```
sumomomatoMacBook-Pro.local postfix/sendmail[51722]: fatal: chdir /Library/Server/Mail/Data/spool: No such file or directory 
```

如果你因为我的英语不好而不明白我在说什么，你可以纠正我并询问我更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:13:22.833

你必须启动 postfix，这解决了我的问题 [http://benjaminrojas.net/configuring-postfix-to-send-mail-from-mac-os-x-mountain-lion/](http://benjaminrojas.net/configuring-postfix-to-send-mail-from-mac-os-x-mountain-lion/)

# ubuntu - Debian 打包 - 处理修改/创建的文件，debian/rules

> ID：14476405
> 
> 赞同：1
> 
> 时间：2013-01-23T09:34:56.257
> 
> 标签：ubuntu, debian, packaging

我有几个关于在构建我想在 Ubuntu 下打包的库期间生成的文件的处理问题。我正在使用 dh_make 基础设施，所以我得到了一个“debian”文件夹，其中包含各种脚本等。

（1）我想在构建发生之前修改一个库 Makefile 以便它在其中引用 $(CURDIR) （以确保将东西安装到正确的文件夹中）。通常我会把它传递给配置脚本或类似的，但这个文件是硬编码的，所以我试图通过 debian/rules 脚本来改变它。（这甚至是正确的做法吗？）我遇到了问题，因为它希望签入更改，即使它只是一个临时文件。我可以将文件标记为临时文件吗？

(2) 构建本身需要很长时间，只有完成后我才能知道我的更改是否有效。我可以告诉包装基础设施暂停检查并从最后一点继续吗？它目前会清理所有东西，或者如果我停止清理东西，它会抱怨周围有大量额外文件。（我知道检查很有用，但我不想等待一个小时才发现我犯了拼写错误。）我可以告诉它暂时忽略任何额外的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:46:06.307

debian 规则就像一个普通的 Makefile 一样工作，所以你所要做的就是改变其中的相关构建规则

1）找出它在哪里构建库，并在此之前插入一行运行一些命令（可能是 sed？）来修改另一个 Makefile。如果您只需要将一些参数传递到另一个 make 文件中，make 将像 shell 一样接受变量

2）找出构建后期运行的内容以及正在使用的目标，然后运行该目标。make -vf debian/rules 可能有助于找出正在发生的事情

玩得开心...

# java - 如何制作文本三角形文本框

> ID：14476407
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:34:57.173
> 
> 标签：java, palindrome

```
// The "PalinDrome" class.
import java.awt.*;
import hsa.Console;

public class PalinDrome
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();

        c.println("Please enter a word");
           String word = c.readLine ();
        int i;
        int num = word.length ();
        String str = "";
        for (i = num - 1 ; i >= 0 ; i--)
            str = str + word.charAt (i);
        if (str.equals (word))
            c.println (word + " is a palindrome");
        else
            c.println (word + " is not a palindrome");

        str.equalsIgnoreCase(word);

        // Place your program here.  'c' is the output console
    } // main method
} // PalinDrome class 
```

作为考试项目的一部分，我创建了一个回文程序。我想让字母以三角形的形状出现。你对我该怎么做有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:56:36.133

用户根据字符串的长度构建`string.format`一个三角形。使用另一个循环遍历字符串并在每组字符之前/之后附加适当的间距`&nbsp;` `\t``\n``for`

# java - 如何避免运行静态初始化程序？

> ID：14476412
> 
> 赞同：3
> 
> 时间：2013-01-23T09:35:07.497
> 
> 标签：java, static-methods

我有一个遗留（不可修改的:-() 代码，它有一个静态初始化块。我想创建一个子类 - 但不运行静态块。

有没有办法做到这一点？例如：*class.ForName*方法有第二个参数，它是初始化类的责任 - 但遗憾的是，它对我不起作用（可能意味着其他东西..）：[http ://docs.oracle.com/javase/ 6/docs/api/java/lang/Class.html#forName(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String) , boolean, java.lang.ClassLoader)

更新：上面提到的*class.forName*不会触发初始化 - 但要求*newInstance*会:-(

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:38:06.597

> 我有一个遗留（不可修改的:-() 代码，它有一个静态初始化块。我想创建一个子类 - 但不运行静态块。

你可以创建一个子类——但你永远不能初始化那个子类，这意味着它可能没用。

从[JLS 的第 12.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)（类初始化）：

> 接下来，如果 C 是一个类而不是一个接口，并且它的超类 SC 还没有被初始化，那么递归地执行 SC 的整个过程。

基本上我认为你需要重新考虑设计。理想情况下，您可以应对静态初始化程序的运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:12:03.473

您始终可以使用[ASM](http://asm.ow2.org/)修补旧类。通过忽略 clinit 块从旧字节码生成新类应该很容易。

```
import org.objectweb.asm.*;
import org.objectweb.asm.commons.EmptyVisitor;
import java.io.*;

public class ClinitKiller {
    public static void main (String[] args) {
        final InputStream input = ClinitKiller.class.getResourceAsStream(Test.class.getName() + ".class");
        try {
            final byte[] bytes = instrument(input);
            FileOutputStream out = new FileOutputStream("/tmp/Test.class");
            out.write(bytes);
            out.close();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static byte[] instrument(InputStream is) throws IOException {
        ClassReader reader = new ClassReader(is);
        ClassWriter writer = new ClassWriter(0);
        ClinitKillerClassAdapter classAdapter = new ClinitKillerClassAdapter(writer);
        reader.accept(classAdapter, 0);
        return writer.toByteArray();
    }
}

class ClinitKillerClassAdapter extends ClassAdapter {
    public ClinitKillerClassAdapter(final ClassVisitor cv) {
        super(cv);
    }

    public MethodVisitor visitMethod(final int access, final String name, final String desc, final String signature, final String[] exceptions) {
        if (name.equals("<clinit>")) {
            return new EmptyVisitor();
        }
        return cv.visitMethod(access, name, desc, signature, exceptions);
    }
} 
```

这是以下课程的之前和之后：

```
public class Test {
    private static final String value;
    static {
        System.out.println("Test static");
        value = "test value";
    }
    public static void main(String[] args) {
        System.out.println(value);
    }
} 
```

前：

```
javap -c Test
Compiled from "Test.java"
public class Test extends java.lang.Object{
    public Test();
    Code:
    0:  aload_0
    1:  invokespecial   #1; //Method java/lang/Object."<init>":()V
    4:  return

    public static void main(java.lang.String[]);
    Code:
    0:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
    3:  getstatic   #3; //Field value:Ljava/lang/String;
    6:  invokevirtual   #4; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
    9:  return

    static {};
    Code:
    0:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
    3:  ldc #5; //String Test static
    5:  invokevirtual   #4; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
    8:  ldc #6; //String test value
    10: putstatic   #3; //Field value:Ljava/lang/String;
    13: return

} 
```

输出：
测试静态
测试值

后：

```
javap -c Test
Compiled from "Test.java"
public class Test extends java.lang.Object{
    public Test();
    Code:
    0:  aload_0
    1:  invokespecial   #11; //Method java/lang/Object."<init>":()V
    4:  return

    public static void main(java.lang.String[]);
    Code:
    0:  getstatic   #21; //Field java/lang/System.out:Ljava/io/PrintStream;
    3:  getstatic   #23; //Field value:Ljava/lang/String;
    6:  invokevirtual   #29; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
    9:  return

} 
```

输出：
空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:23:32.320

您可以执行以下操作：

*   反编译类（例如使用 JAD）
*   删除静态初始化代码
*   编译新类
*   将新类复制到旧代码的jar中（去掉旧的）
*   制作你的子类

我知道它不漂亮，但你几乎没有其他选择。静态初始化器将在类加载后立即运行，并且不可能跳过它。

# c++ - 在 C 字符串中查找错误

> ID：14476413
> 
> 赞同：2
> 
> 时间：2013-01-23T09:35:07.467
> 
> 标签：c++, string

我今天有个面试，被要求写一个两个字符串连接的函数。但是在我完成之后，我听说，通常代码是可以的，但是我在那里犯了一个小错误。在家里检查过，但一切正常。有什么问题？

```
char * strconcat (char *S1, char *S2){
    char *S3 = new char [strlen(S1) + strlen(S2) +1];
    strcpy(S3, S1);
    strcat(S3, S2);
    return S3;   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:37:19.510

嗯......我猜这都是关于要求和质量期望的。

一些东西：

*   输入指针应该是`const`.
*   你不处理`new[]`失败（虽然它会抛出一个异常，这可能很好）。
*   为了提高性能，最好不要执行`strcpy()`/`strcat()`序列，因为您花费的时间比必要的走弦时间要多。
*   从风格上讲，它有点“关闭”。它读起来很像 C 代码，但使用了 C++ 结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:37:53.523

除了编写 C 代码（减去`new`）之外，您的代码不能在任何预期的地方工作，例如：

```
char* hellowWorld = strconcat("Hello ", "world!"); 
```

如果您不能直接说明为什么这不起作用，请尝试编译 - 错误会给您提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:42:06.070

```
char * strconcat (char *S1, char *S2){
    if(S1 == NULL || S2 == NULL)
         return NULL;
    int S1_len = strlen(S1);
    int S2_len = strlen(S2);
    char *S3 = new char [S1_len + S2_len +1];
    memset(S3, 0, S1_len + S2_len +1);
    strcpy(S3, S1);
    strcat(S3, S2);  // or memcpy(S3+S1_len, S2, S2_len);
    return S3;   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:14:46.097

看起来你在编码中混合了 C、C++ 风格。此外，您尝试使用 new 的方式也不是标准方式。您可以使其成为纯 C 方式或 C++ 方式。

看起来，他们将风格视为错误，虽然它是有效的。但你无法预测面试官的想法。

# java - JBoss 垃圾邮件 XA 恢复警告

> ID：14476414
> 
> 赞同：4
> 
> 时间：2013-01-23T09:35:10.023
> 
> 标签：java, sql-server, jpa, jboss7.x, xa

我正在运行一个 JPA/Spring 应用程序，该应用程序连接到 Microsoft SQL Server 上启用了多个 XA 的数据源。一切正常，全局事务正确启动并根据需要回滚......

但是，JBoss 时不时地变得疯狂，每隔几秒钟就会开始发送以下警告：

```
10:25:22,524 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_RMERR: javax.transaction.xa.XAException: The function RECOVER: failed. The status is: -3\. Error: "*** SQLJDBC_XA DTC_ERROR Context: xa_recover, state=1, StatusCode:-3 (0xFFFFFFFD) ***"
    at com.microsoft.sqlserver.jdbc.SQLServerXAResource.DTC_XA_Interface(SQLServerXAResource.java:550)
    at com.microsoft.sqlserver.jdbc.SQLServerXAResource.recover(SQLServerXAResource.java:728)
    at org.jboss.jca.adapters.jdbc.xa.XAManagedConnection.recover(XAManagedConnection.java:358)
    at org.jboss.jca.core.tx.jbossts.XAResourceWrapperImpl.recover(XAResourceWrapperImpl.java:162)
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.xaRecovery(XARecoveryModule.java:503) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.resourceInitiatedRecoveryForRecoveryHelpers(XARecoveryModule.java:471) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.bottomUpRecovery(XARecoveryModule.java:385) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.periodicWorkSecondPass(XARecoveryModule.java:166) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.doWorkInternal(PeriodicRecovery.java:789) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.run(PeriodicRecovery.java:371) [jbossjts-4.16.2.Final.jar:] 
```

到目前为止，我还无法破译我在这里应该做什么，我有点担心将这种状态的应用程序投入生产。

任何人都可以阐明为什么会发生这种情况，如何解决和避免它？

编辑：

在 Windows 日志中，我找不到任何看起来像 DTC 错误的内容：

> MSDTC 使用以下设置开始：
> 
> 安全配置（OFF = 0 和 ON = 1）：允许远程管理员 = 0，网络客户端 = 0，事务管理器通信：允许入站事务 = 0，允许出站事务 = 0，事务 Internet 协议 (TIP) = 0，启用 XA事务 = 1，启用 SNA LU 6.2 事务 = 1，MSDTC 通信安全 = 需要相互验证，帐户 = NT AUTHORITY\NetworkService，检测到防火墙排除 = 0
> 
> 已安装事务桥 = 0 过滤重复事件 = 1
> 
> * * *
> 
> 正在尝试初始化 Microsoft 分布式事务协调器 (MS DTC)。这只是一条信息性消息。无需用户操作。
> 
> * * *
> 
> 涉及 Microsoft 分布式事务协调器 (MS DTC) 的任何不确定分布式事务的恢复已完成。这只是一条信息性消息。无需用户操作。
> 
> * * *
> 
> 数据库 MyDatabase（数据库 ID 20）在 1 秒内完成恢复（分析 589 毫秒，重做 0 毫秒，撤消 398 毫秒。）这只是一条信息性消息。无需用户操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T18:03:23.290

有同样的问题。

我是怎么解决的？使用分布式事务（在我的例子中插入一些数据）。

我的猜测，我之所以说是猜测，是因为 sqljdbc4.jar 源代码尚未发布，无法判断问题的真正原因。好吧，我的猜测是每次您的 jboss 服务器启动时，您的分布式事务框架都会检查**要恢复的事务**。这些都保存在第一次为空的表中，因此这会引发警告（com.microsoft.sqlserver.jdbc.SQLServerXAResource.DTC_XA_Interface(SQLServerXAResource.java:550) ），因为**xp_sqljdbc_xa_recover**存储过程再次找不到任何东西（我'我再次猜测）。

所以基本上，使用分布式事务将一些东西插入数据库并再次运行 jboss/tomcat 服务器以消除警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T04:08:53.170

我有同样的问题，只要它指向同一个 DBMS，无论我运行哪个实例，错误都会一直显示。当我运行存储过程“xp_sqljdbc_xa_recover”时，问题自行解决。正如Painy James所指出的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:17:57.293

您要么没有在 DTC 中启用 XA，要么忘记授予 SqlJDBCXAUser 角色。

# python - 在 NumPy 中重塑数组

> ID：14476415
> 
> 赞同：44
> 
> 时间：2013-01-23T09:35:20.937
> 
> 标签：python, arrays, numpy, reshape

考虑以下形式的数组（只是一个示例）：

```
[[ 0  1]
 [ 2  3]
 [ 4  5]
 [ 6  7]
 [ 8  9]
 [10 11]
 [12 13]
 [14 15]
 [16 17]] 
```

它的形状是[9,2]。现在我想转换数组，使每一列变成一个形状[3,3]，像这样：

```
[[ 0  6 12]
 [ 2  8 14]
 [ 4 10 16]]
[[ 1  7 13]
 [ 3  9 15]
 [ 5 11 17]] 
```

最明显（当然也是“非pythonic”）的解决方案是初始化一个具有适当维度的零数组并运行两个for循环，其中将填充数据。我对符合语言的解决方案感兴趣...

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-23T09:37:31.433

```
a = np.arange(18).reshape(9,2)
b = a.reshape(3,3,2).swapaxes(0,2)

# a: 
array([[ 0,  1],
       [ 2,  3],
       [ 4,  5],
       [ 6,  7],
       [ 8,  9],
       [10, 11],
       [12, 13],
       [14, 15],
       [16, 17]])

# b:
array([[[ 0,  6, 12],
        [ 2,  8, 14],
        [ 4, 10, 16]],

       [[ 1,  7, 13],
        [ 3,  9, 15],
        [ 5, 11, 17]]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-25T11:35:53.503

numpy 有一个很好的工具来完成这个任务（“numpy.reshape”）[链接到 reshape 文档](https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html#numpy.reshape)

```
a = [[ 0  1]
 [ 2  3]
 [ 4  5]
 [ 6  7]
 [ 8  9]
 [10 11]
 [12 13]
 [14 15]
 [16 17]]

`numpy.reshape(a,(3,3))` 
```

你也可以使用“-1”技巧

```
`a = a.reshape(-1,3)` 
```

“-1”是一个通配符，当第二维为 3 时，它将让 numpy 算法决定输入的数字

所以是的..这也可以： `a = a.reshape(3,-1)`

而这个： `a = a.reshape(-1,2)` 什么都不做

这： `a = a.reshape(-1,9)` 会将形状更改为（2,9）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-01T00:13:46.860

有两种可能的结果重新排列（以[@eumiro 为例](https://stackoverflow.com/a/14476457/498892)）。`Einops`包提供了一个强大的符号来明确地描述这些操作

```
>> a = np.arange(18).reshape(9,2)

# this version corresponds to eumiro's answer
>> einops.rearrange(a, '(x y) z -> z y x', x=3)

array([[[ 0,  6, 12],
        [ 2,  8, 14],
        [ 4, 10, 16]],

       [[ 1,  7, 13],
        [ 3,  9, 15],
        [ 5, 11, 17]]])

# this has the same shape, but order of elements is different (note that each paer was trasnposed)
>> einops.rearrange(a, '(x y) z -> z x y', x=3)

array([[[ 0,  2,  4],
        [ 6,  8, 10],
        [12, 14, 16]],

       [[ 1,  3,  5],
        [ 7,  9, 11],
        [13, 15, 17]]]) 
```

# php - 数组返回“数组”而不是数组的实际值

> ID：14476416
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:35:29.773
> 
> 标签：php, arrays, echo

我有一个值数组，我试图使用以下代码输出到字符串：

```
$arrayINS = explode(", ", $arraystring);
foreach ($arrayINS as &$array1INS) {
    $array1INS = "(" . $arrayINS . ", 'Some Text Here')";
}
$arrayvaluesINS = implode(', ', $arrayINS); 
```

现在，让我们说`$arraystring = 25145, 25064, 24812`. 我希望`echo $arrayvaluesINS`是

> (25145, '这里有一些文字'), (25064, '这里有一些文字'), (24812, '这里有一些文字')

但相反，我得到的是：

> (Array, 'Some text here'), (Array, 'Some text here'), (Array, 'Some text here')

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:36:58.473

`$arrayINS`是数组。

```
$array1INS = "(" . $arrayINS . ", 'Some Text Here')"; 
```

应该

```
$array1INS = "(" . $array1INS . ", 'Some Text Here')"; 
```

下次使用有意义的变量名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T09:41:28.037

您在 for 中使用 $array1INS 作为迭代变量，但是在下一行中，您在赋值（它是一个数组）中使用 $arrayINS 并覆盖您在 $array1INS 中放入的内容。试试这个：

```
foreach ($arrayINS as &$item) {
   $array1INS = "(" . $item . ", 'Some Text Here')";
} 
```

# ruby-on-rails - Rails 简单路由

> ID：14476421
> 
> 赞同：0
> 
> 时间：2013-01-23T09:35:47.447
> 
> 标签：ruby-on-rails, routing, link-to

我不明白为什么这个简单的路由现在不起作用。

下面的链接不起作用：它给出了`routing error No route matches [DELETE] "/questions"`

```
<%= link_to 'delete', @question, :method => :delete, :action => :destroy %> 
```

`rake routes`节目

```
DELETE /questions/:id(.:format)                        questions#destroy 
```

正确。

有谁可以找到这个错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:43:36.560

尝试

```
<%= link_to 'delete', question_path(@question), :method => :delete, :confirm => "Are you sure?" %> 
```

# r - 如何在R中绘制度数分布

> ID：14476426
> 
> 赞同：3
> 
> 时间：2013-01-23T09:36:04.453
> 
> 标签：r, plot, distribution, power-law

我想知道绘制度数分布的脚本输出是否正确。

所以脚本是（其中具有我所有顶点度数的向量存储在x中）：

x 是

```
x
 [1] 7 9 8 5 6 2 8 9 7 5 2 4 6 9 2 6 10 8 
```

x 是某个网络顶点的度数 - 就像顶点 1 的度数为 7，顶点 2 的度数为 9，依此类推 x <- v2 summary(x)

```
library(igraph)
split.screen(c(1,2))
screen(1)
plot (tabulate(x), log = "xy", ylab = "Frequency (log scale)", xlab = "Degree (log scale)", main = "Log-log plot of degree distribution")
screen(2)
y <- (length(x) - rank(x, ties.method = "first"))/length(x)
plot(x, y, log = "xy", ylab = "Fraction with min. degree k (log scale)", xlab = "Degree (k) (log scale)", main = "Cumulative log-log plot of degree distribution")
close.screen(all = TRUE)
power.law.fit(x, xmin = 50) 
```

我的问题是对数图似乎不正确 - 例如，我的度数为 8 次，所以对数图上的这一点不应该变成 0.845 (log 7)/0.903 (log( 8) 如 (x/y)？

此外，有人能告诉我如何将线（对数刻度上的幂律）拟合到屏幕 2 中的图吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T10:50:23.003

我不熟悉这个`igraph`包，所以你不能帮助那个特定的包。但是，这里有一些用于在对数图上绘制分布的代码。首先是一些数据：

```
set.seed(1)
x = ceiling(rlnorm(1000, 4)) 
```

然后我们需要重新排列得到逆CDF：

```
occur = as.vector(table(x))
occur = occur/sum(occur)
p = occur/sum(occur)
y = rev(cumsum(rev(p)))
x = as.numeric(names(table(x)))
plot(x, y, log="xy", type="l") 
```

给

![在此处输入图像描述](../Images/50fd8718974e494423554c0a7e555664.png)

关于您的拟合问题，我认为出现差异是因为`igraph`使用 MLE 而您正在进行简单的线性回归（不推荐）。

* * *

作为一个小插曲，我已经开始研究一个用于拟合和绘制幂律的[包。](https://github.com/csgillespie/poweRlaw)所以，使用这个包你得到：

```
library(poweRlaw)

##Create a displ object
m = displ$new(x)
##Estimate the cut-off
estimate_xmin(m)
m$setXmin(105); m$setPars(2.644)

##Plot the data and the PL line
plot(m)
lines(m, col=2) 
```

![在此处输入图像描述](../Images/668d67c6988bdaa968281cd7d377d36d.png)

# html - 从 N 开始的颜色表列（td:nth-of-type）

> ID：14476428
> 
> 赞同：3
> 
> 时间：2013-01-23T09:36:06.923
> 
> 标签：html, css, css-selectors, css-tables

我想从某个列开始添加某种背景颜色。如果可能的话，我宁愿不用为每一列使用一个 css 类，而不必这样做。

我将有一个包含数百行和大约 25 列的巨大表，我更愿意避免不必要的代码。

目前，我正在使用`td:nth-of-type`属性来做到这一点：

```
.demo tr.selectedRow td:nth-of-type(9),
.demo tr.selectedRow td:nth-of-type(10),
.demo tr.selectedRow td:nth-of-type(11),
.demo tr.selectedRow td:nth-of-type(12),
.demo tr.selectedRow td:nth-of-type(13),
.demo tr.selectedRow td:nth-of-type(14),
.demo tr.selectedRow td:nth-of-type(15),
.demo tr.selectedRow td:nth-of-type(16) {
  background-color: #fff16b;
}
```

```
<table border="1" class="demo">
  <tr>
    <td>not selected</td>
  </tr>
  <tr class="selectedRow">
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
</table>
```

我想知道是否有任何方法可以进一步减少这种情况。

[文档](http://www.w3schools.com/cssref/sel_nth-of-type.asp)没有说更多......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T09:42:11.697

[http://css-tricks.com/examples/nth-child-tester/](http://css-tricks.com/examples/nth-child-tester/)这个测试器真的很有帮助。看起来您想选择 9 之后的所有内容，因此请使用下面的代码

选择除前 8 个 TD 之外的所有 TD

```
.demo tr.selectedRow td:nth-child(n+9) {
  color: red;
}
```

```
<table border="1" class="demo">
  <tr>
    <td>not selected</td>
  </tr>
  <tr class="selectedRow">
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>not selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
    <td>selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
  <tr>
    <td>not selected</td>
  </tr>
</table>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:42:10.913

如果八个之后的每一列，为什么你不为前八个设置一个类，而对其他的则没有。如果所有其余部分当然应该相同，这将起作用。

*这甚至适用于 IE。*

### 使用 colgroup 的示例

```
.colSpecial {
  background-color: #fee;
}

.colDefault {
  background-color: #fff;
  border: 1px solid black;
}

tr:hover {
  background-color: #efe;
}
```

```
<table>
  <colgroup>
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colDefault" />
    <col class="colSpecial" />
    <col class="colSpecial" />
    <col class="colSpecial" />
    <col class="colSpecial" />
    <col class="colSpecial" />
    <col class="colSpecial" />
    <col class="colSpecial" />
  </colgroup>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
</table>
```

# .net - 如何使用 npgsql 在 Postgres 函数中将对象作为参数传递

> ID：14476433
> 
> 赞同：0
> 
> 时间：2013-01-23T09:36:25.847
> 
> 标签：.net, postgresql, c#-4.0, stored-procedures, npgsql

在我的 .net 实现中，我想将 .net 对象作为 postgresql 存储函数的参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:51:00.327

不幸的是，Npgsql 还不支持用户定义类型。我们有计划实施它，但现在没有任何编码。对于那个很抱歉。

# java - 即使出现异常，flyway 能否继续执行脚本？

> ID：14476435
> 
> 赞同：0
> 
> 时间：2013-01-23T09:36:27.907
> 
> 标签：java, flyway

我有 10 个要使用 Flyway 执行的 sql 脚本。如果这些是第 7 个脚本中的任何错误，我不想让 Flyway 记录警告并继续执行第 8 个、第 9 个和第 10 个脚本。

请让我知道这是否可以使用 Flyway。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:18:32.430

目前不支持此功能。该设计基于快速失败的方法。这不太可能改变。

# logging - 面向方面的编程和/或企业库 5.0 用于记录/异常实现？

> ID：14476436
> 
> 赞同：4
> 
> 时间：2013-01-23T09:36:37.703
> 
> 标签：logging, exception-handling, aop, enterprise-library-5

我可以同时实现 AOP（使用 Postsharp）和 EntLib (v5.0) 来解决横切关注点，例如日志记录和异常处理/策略。

**我看不出一个人是否排斥另一个人，或者他们可能在哪里相互补充。有人可以分享一些经验和/或想法吗？**

**谢谢！**

我对例外的看法：

> AOP 可以轻松地包装您的代码并捕获异常。然后可以将处理委托给 EntLib，后者使用策略提供强大的处理（包装、替换、吞咽）配置。

处理策略（包裹、替换和吞咽）也可以在方面实现。什么会推动这个决定？还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:31:18.970

没用过Enterprise Lib，就log4net和postsharp这几个方面说吧。

> Log4net 具有出色的日志记录功能，您可以使用 AOP（使用 postsharp）以声明性方式驱动此日志记录。从这个意义上说，它们是很好的赞美。

这是一个[例子](http://kevinschumm.net/2012/01/26/magical-logging-layer-with-postsharp-and-log4net/)。我希望基于 Enterprise Library 的日志记录或异常处理也是如此。

我不建议你同时使用两种 AOP 类型的东西，所以企业库中的策略注入对我来说看起来像 AOP，所以我不会使用它和 postsharp。

# php - Wordpress，将文章发布日期和时间存储在变量中

> ID：14476445
> 
> 赞同：0
> 
> 时间：2013-01-23T09:36:59.880
> 
> 标签：php, javascript, wordpress, variables, cookies

首先，让我解释一下，我想做什么。我为每个用户都有一个独特的表格，他们可以在其中查看他们的帖子、编辑、在前端删除它们。但是当他们创建一篇文章时，它的状态是“待定”，因为只有我作为管理员才能给它“已发布”状态。我想要做的是向用户显示他们的帖子创建或最后一次修改的日期，然后是发布的日期。

如何显示我知道的发布日期。因为`get_the_date('Y-m-d');`它可以正常工作，因为它显示了任何用户修改帖子的日期。但是我需要将日期存储在某个地方，然后用户最后修改它。

我设法做的是这样的：

```
<?php $id = get_the_ID(); ?>
<?php $the_last_time="the_time_". $id; ?>
<?php $the_last_date="the_date_". $id; ?>

<?php if ( in_array( $post->post_status, array('draft', 'future', 'pending') ) ) { ?>
    <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'wpuf' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a>
    <p><?php echo get_the_time('G:i'); ?></p>
    <p><?php echo get_the_date('Y-m-d'); ?></p>
    <?php $$the_last_time=get_the_time('G:i'); ?>
    <?php $$the_last_date=get_the_date('Y-m-d'); ?>
    <?php setcookie("$the_last_time", $$the_last_time, time()+2592000); ?>
    <?php setcookie("$the_last_date", $$the_last_date, time()+2592000); ?>
<?php } else { ?>
    <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'wpuf' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a>
    <p><?php echo htmlspecialchars($_COOKIE["$the_last_time"]) ?></p>
    <p><?php echo htmlspecialchars($_COOKIE["$the_last_date"]) ?></p>
<?php } ?>

<?php wpuf_show_post_status( $post->post_status ) ?>
        <p><?php echo get_the_time('G:i'); ?></p>
        <p><?php echo get_the_date('Y-m-d'); ?></p> 
```

如您所见，我正在使用 cookie 来存储这些变量。但问题是，它仅在一台用户计算机中存储可变信息，而我需要的是从任何计算机登录的每个用户都可以看到这些日期。

提前感谢任何可以帮助我的线索。;)

- - - - - 编辑 - - - - -

我试图创建一个 .php 文件并在那里存储这些变量。然后，当我需要 thenm 时，我可以包含该文件，但我做错了，因为它不起作用。

```
//Creating variables    
<?php $id = get_the_ID(); ?>
        <?php $the_last_time="the_time_". $id; ?>
        <?php $the_last_date="the_date_". $id; ?>
        <?php $the_last_time_file="the_time_file_". $id; ?>
        <?php $the_last_date_file="the_date_file_". $id; ?>

//Every time after user modification
<?php $$the_last_time=get_the_time('G:i'); ?>
<?php $$the_last_date=get_the_date('Y-m-d'); ?>
<?php $$the_last_date_file=var_export($$the_last_date, true);?>
<?php $$the_last_date_file="<?php\n\n\$$the_last_date_file = $$the_last_date;\n\n?>";?>
<?php file_put_contents('/cookies/time-date-variables.php', $$the_last_date_file);?>

//And when I publish that post it should show echo variable
    <?php include '/cookies/time-date-variables.php'; ?>
    <?php echo $$the_last_date_file; ?> 
```

我做错了什么？有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:54:09.637

Wordpress 已经提供了一种获取最后修改日期的方法。您可以在循环中使用它。

`<?php the_modified_date( $d, $before, $after, $echo ); ?>`

如果您不使用循环，您可以直接查询数据库以获取最新版本的帖子。Wordpress 使用 post_parent 字段中原始帖子的 id 将帖子的每个编辑存储为数据库中的单独行。因此，您拥有数据库中每个编辑的完整历史记录。这也应该为您提供用户 ID，因此您可以选择特定用户的编辑。

我在这里吐痰，但它可能看起来像这样

```
$postID = 1; // the id of the post
$userID = 1; // The users id for whom you want to show the last edit

$sql = "SELECT post_date FROM wp_posts WHERE post_parent = $postID AND post_author = $userID ORDER BY post_date DESC LIMIT 1";

$userModifiedDate = $wpdb->query($sql); 
```

将有一种更有效/更有效的方式来做到这一点，但它应该可以工作。

# java - 创建用户定义的数据类型会产生问题

> ID：14476446
> 
> 赞同：0
> 
> 时间：2013-01-23T09:37:02.413
> 
> 标签：java, nullpointerexception, initialization, custom-data-type

我创建了一个包含两个字段的数据类型，时间和测量。我创建了这些数据类型的数组。然后，当我尝试将值分配给 array[0] 的一个字段时，我得到一个空指针异常。谁能告诉我出了什么问题？

```
Public class MeasurementPoint{

private int time;
private double  measurement;

public MeasurementPoint(){
this.time =0;
this.measurement =0;}}

public void setMeausurement(double value){
this.measurement = value;}
public double getMeasurement (){
return this.measurement;}

public void setTime(int value){
this.time = value;}
public int getMeasurement (){
return this.time;}
} 
```

我用来创建数组的代码如下

```
MeasurementPoint [] controlValues = new MeasurementPoint [points];
System.out.println(controlValues.length(); // this gives me 16 so I know the array is created

controlValues[0].setMeasurement(aCtivity);// this is where I get the exception. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:41:26.157

您初始化了数组，但从未初始化过**Array Elements**，因此`NullPointerException`当您尝试访问数组的第零个索引时会得到结果，因为 yourarray[0] 返回 null 并且您尝试在 null 上调用 setMe...() ..你必须实际初始化你的数组元素。

```
MeasurementPoint [] controlValues = new MeasurementPoint [points];
controlValues[0] = new Measurementpoint(val1,val2); 
```

# csv - 使用 CSV 文件读取测试数据

> ID：14476448
> 
> 赞同：13
> 
> 时间：2013-01-23T09:37:06.230
> 
> 标签：csv, jmeter, load-testing, jmeter-plugins

我需要使用 100 位用户测试网站的各种链接（无需登录），并使用 JMeter 将其循环若干次。我想将这些链接放在“CSV 文件”中，以便从文件中读取所有要测试的链接。

我如何完成这项任务？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T10:24:48.327

使用您的测试参数列表准备一种 csv 文件，并使用它来参数化您的测试采样器，至少使用以下内容：

1.  [CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)

    查看以下链接了解详细信息：

    [如何让 Jmeter 将 CSV 数据用于 GET 参数？](https://stackoverflow.com/a/13342623/993246)
    [使用 jmeter 测试多个网站](https://stackoverflow.com/a/13323433/993246)
    [在 jmeter httprequest 路径中使用 csv 参数](https://stackoverflow.com/a/8800525/993246)
    [使用 CSV 数据集配置时强制线程使用相同的输入行](https://stackoverflow.com/a/12393071/993246)

2.  Jmeter功能：

    *   [__CSV 读取](http://jmeter.apache.org/usermanual/functions.html#__CSVRead)，
    *   [__StringFromFile](http://jmeter-plugins.org/wiki/VariablesFromCSV/)。
3.  [来自jmeter-plugins 的](http://jmeter-plugins.org/)[CSV](http://jmeter-plugins.org/wiki/VariablesFromCSV/)采样器的变量。

* * *

**1.**在 csv 文件中准备您的测试 URL，例如，采用以下格式：

```
 url1
    url2
    ...
    urlN 
```

确保测试 URL 不包含`http://`前缀（根据[HTTP 请求参数](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_parms)-> 服务器）。

**2.**为您的脚本使用架构，如下所示：

```
 CSV Data Set Config:
    Filename: [path to your csv-file with test-urls]
    Variable Names: testURL
    Recycle on EOF?: True
    Stop thread on EOF?: False
    Sharing mode: Current thread

    Thread Group:
    Number of Threads: N
    Loop Count: M
            HTTP Request // your http call
            Server Name or IP: ${testURL} // use variable with extracted URL 
```

这将启动 N 个用户，每个用户将从 test-urls 列表中读取 M 个条目。如果 M > test-urls 列表中的条目数，则用户将在 EOF 上回收列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-27T16:51:01.120

在其中一条评论中提到，您不能在每个循环中多次读取 CSV。您可以拥有多个线程，每个线程读取一次 CSV 文件，但随后该文件已关闭，并且不会在下一个循环中读取。此外，如果您将 CSV 设置为回收，则 CSV 文件会被无限期地反复读取。所以问题变成了如何循环一个 CSV 文件一定次数而不是无限期地循环？

我在另一篇文章（[https://stackoverflow.com/a/64086009/4832515](https://stackoverflow.com/a/64086009/4832515)）中发布了我的答案，但我会复制并粘贴它，以防该链接将来无法正常工作。

* * *

我找不到一个简单的解决方案。我最终使用了 beanshell 脚本，它允许您使用与 java 非常相似的代码来做一些自定义的事情。我制作了一个示例 JMeter 项目来演示如何做到这一点（是的，它非常复杂，考虑到我想要做的就是重复 CSV 读取）：

* * *

1.  文件：

我的文件结构：

```
JMeterExample
|
⊢--JMeterTests.jmx             // the JMeter file
⊢--example.csv                 // the CSV file 
```

我的 CSV 内容：

```
guest-id-1,"123 fake street",
guest-id-2,"456 fake street",
guest-id-3,"789 fake street", 
```

* * *

所以在这个线程组中，我将只有 1 个用户，我会循环 2 次。我打算每 CSV 行发送 1 个请求。所以应该总共发送 6 个请求。

2.  线程组

[![在此处输入图像描述](../Images/c44f7f0402622933c506a4498cf497ae.png)](https://i.stack.imgur.com/9Zq9e.png)

* * *

3.  用户定义的变量

这是一种可选的，但文件路径可能会发生变化，而且我不喜欢仅仅为了改变配置而改变我的脚本。所以我将 CSV 文件名存储在“用户定义的变量”节点中。

如果您将 CSV 文件存储在与 JMeter 测试相同的目录中，则只需指定文件名即可。

如果您将 CSV 保存在包含 JMeter 文件的目录以外的文件夹中，则需要提供绝对路径，然后稍微修改下面的 beanshell 脚本：您需要注释掉相对加载文件的行, 并在从绝对路径加载的行中添加注释。

[![在此处输入图像描述](../Images/3c5a9ca1799a25957c5f6ddd09e7878b.png)](https://i.stack.imgur.com/J6vr7.png)

* * *

4.  BeanShell Sampler 解析和存储 CSV 行

添加一个 Beanshell 采样器，它基本上采用路径，并将每一行解析并存储为变量。第一行将存储为一个名为 的变量`csv_line_0`，第二行将是`csv_line_1`等等。我知道这不是一个干净的解决方案，但是......我找不到任何干净简单的方法来完成这个干净简单的任务。我在下面复制并粘贴了我的代码。

[![在此处输入图像描述](../Images/6a48ddf6a59bad875ab4e1f4b1928b3e.png)](https://i.stack.imgur.com/QLJJt.png)

```
import org.apache.jmeter.services.FileServer;
import java.text.*;
import java.io.*;
import java.util.*;

String temp = null;

ArrayList lines = new ArrayList();

BufferedReader bufRdr;

ArrayList strList = new ArrayList();     

// get the file
try {
    // you can use this line below if your csvFilePath is an absolute path
    // File file = new File(${csvFilePath});

    // you can use this line below if your csvFilepath is a relative path, relative to where you saved this JMeter file
    File file = new File(org.apache.jmeter.services.FileServer.getFileServer().getBaseDir() + "/" + ${csvFilePath});

    if (!file.exists()) {
        throw new Exception ("ERROR: file " + filename + " not found");
    }

    bufRdr = new BufferedReader(new InputStreamReader(new FileInputStream(file), "UTF8"));
} catch(Exception e){
    log.error("failed to load file");
    log.error(e.getMessage());
    return;
}

// For each CSV line, save it to a variable
int counter = 0;
while(true){
    try{
        temp = bufRdr.readLine();
        if(temp == null || temp.equals("<EOF>")){
            break;
         }
         lines.add(temp);
         vars.put("csv_line_" + String.valueOf(counter), temp);
        counter++;

    } catch(Exception e){
        log.error("failed to get next line");
        log.error(e.getMessage());
        break;
    }
}

// store the number of CSV lines there are for the loop counter
vars.put("linesCount", String.valueOf(lines.size())); 
```

* * *

5.  回路控制器

添加一个循环控制器，为每条 CSV 行循环一次。`${linesCount}`是 CSV 行数的计数，由上述 beanShell 脚本计算得出。

[![在此处输入图像描述](../Images/cd60a0cd5345c6640f44c1558ca94617.png)](https://i.stack.imgur.com/O6zMf.png)

* * *

6.  从当前 CSV 行中提取数据的 Beanshell 脚本

此脚本将在每个 CSV 行运行一次。它会去抓取当前行，并解析出上面的任何数据。您必须修改此脚本以获取所需的数据。在我的示例中，我只有 2 列，其中第 1 列是“guestId”，第 2 列是“地址”。

`__jm__loopController__idx`是 JMeter 为你定义的变量，是循环控制器的索引。变量名是`__jm__{loop controller name}__idx`。

[![在此处输入图像描述](../Images/460b0b0b59615babd3a0665193dd1003.png)](https://i.stack.imgur.com/RI928.png)

```
String index = vars.get("__jm__loopController__idx");
String line = vars.get("csv_line_" + index);
String [] tokens = line.split(",");
vars.put("guestId", tokens[0]);
vars.put("address", tokens[1]); 
```

* * *

7.  Http请求采样器

这是使用提取的数据的 HTTP 请求。

[![在此处输入图像描述](../Images/d35598facf9be143ebc4a9831063901e.png)](https://i.stack.imgur.com/INh9s.png)

* * *

8.  结果

运行时，根据需要，我最终将 6 个 http 请求发送到我定义的端点。

[![在此处输入图像描述](../Images/35278bd7f1b90aaab78f5c90e4d0c453.png)](https://i.stack.imgur.com/tZAm5.png)

# java - 如何将图片上传到 Dropbox？

> ID：14476459
> 
> 赞同：1
> 
> 时间：2013-01-23T09:37:38.137
> 
> 标签：java, android, xml, apache, dropbox

我正在尝试将选定的图像从画廊上传到保管箱。由于无法恢复运行时异常，我从几天开始就被卡住了

我的 onActivityResult() 是

```
 if(requestCode == PIC_UPLOAD) {

    System.out.println("Reahced 1");

    Uri selectedImage = data.getData();
    String[] filePathColumn ={MediaStore.Images.Media.DATA};

    Cursor cursor = getContentResolver().query(selectedImage,
                     filePathColumn, null, null, null); cursor.moveToFirst();

    System.out.println("Reahced 2");

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]); 
   String filePath = cursor.getString(columnIndex); 
   cursor.close();

    Uri imageUri=data.getData();
   List<NameValuePair> params = new ArrayList<NameValuePair>(1); 
   params.add(new  BasicNameValuePair("image", imageUri.getPath()));
    System.out.println("Reahced 3");

    /* String outPath = imageUri.toString(); File outFile = new
       File(outPath); FileInputStream fis = new FileInputStream(outFile);
       mDBApi.putFileOverwriteRequest("/Pic1", fis, outFile.length(),null);
    */

   Uri photoUri = data.getData(); 
   String[] proj = {MediaStore.Images.Media.DATA };
   Cursor actualimagecursor = managedQuery(photoUri, proj,null, null, null);
   int actual_image_column_index =
   actualimagecursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
   actualimagecursor.moveToFirst();
   String img_path =actualimagecursor.getString(actual_image_column_index);

   System.out.println("Image location: " + img_path);

   System.out.println("Reached 1"); 

   uploadDropbox(img_path);
} 
```

**uploadDropbox 正文是：**

```
 private void uploadDropbox(String URL) {
    // TODO Auto-generated method stub
        AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
        AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
        mDBApi = new DropboxAPI<AndroidAuthSession>(session);

        System.out.println(URL);

        System.out.println("Reahced 4");

        mDBApi.getSession().startAuthentication(MyCamActivity.this);

        System.out.println("Reahced 5");

//      AccessTokenPair access = getStoredKeys();
//      mDBApi.getSession().setAccessTokenPair(access);

        FileInputStream inputStream = null;
        try {
            File file = new File(URL.toString());
            inputStream = new FileInputStream(file);
            com.dropbox.client2.DropboxAPI.Entry newEntry = mDBApi.putFile("/testing.txt", inputStream, file.length(), null, null);
            Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e("DbExampleLog", "User has unlinked.");
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {}
            }
        }
    } 
```

**onResume 方法体：**

```
protected void onResume() {
    super.onResume();

    if (mDBApi.getSession().authenticationSuccessful()) {
      try {
        // MANDATORY call to complete auth.
        // Sets the access token on the session
        mDBApi.getSession().finishAuthentication();

        AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair();

        // Provide your own storeKeys to persist the access token pair
        // A typical way to store tokens is using SharedPreferences
        storeKeys(tokens.key, tokens.secret);
        } catch (IllegalStateException e) {
          Log.i("DbAuthLog", "Error authenticating", e);
        }
    }

} 
```

private AccessTokenPair getStoredKeys() { // TODO 自动生成的方法存根

```
return  mDBApi.getSession().getAccessTokenPair(); 
```

}

private void storeKeys(String key, String secret) { // TODO 自动生成的方法存根

```
 // Save the access key for later
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.putString(ACCESS_KEY_NAME, key);
    edit.putString(ACCESS_SECRET_NAME, secret);
    edit.commit();
} 
```

**AndroidManifest.xml**

```
 <activity
  android:name="com.dropbox.client2.android.AuthActivity"
  android:launchMode="singleTask"
  android:configChanges="orientation|keyboard">
  <intent-filter>
    <!-- Change this to be db- followed by your app key -->
    <data android:scheme="db-MyKey" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE"/>
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity>

    <activity
        android:name=".MyCamActivity"
        android:label="@string/app_name" 
        android:screenOrientation="nosensor" android:configChanges="keyboardHidden|orientation"
        android:uiOptions="splitActionBarWhenNarrow"
        android:clearTaskOnLaunch="true"
        > 
```

***错误*******：**

 **```
01-23 14:58:00.855: D/dalvikvm(4238): GC_FOR_ALLOC freed 104K, 2% free 12729K/12935K, paused 16ms
01-23 14:58:00.894: I/System.out(4238): Its not null
01-23 14:58:00.901: D/AndroidRuntime(4238): Shutting down VM
01-23 14:58:00.901: W/dalvikvm(4238): threadid=1: thread exiting with uncaught exception (group=0x40a511f8)
01-23 14:58:00.901: E/AndroidRuntime(4238): FATAL EXCEPTION: main
01-23 14:58:00.901: E/AndroidRuntime(4238): java.lang.RuntimeException: Unable to resume activity {cam.pack/cam.pack.MyCamActivity}: java.lang.NullPointerException
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2444)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.os.Looper.loop(Looper.java:137)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at dalvik.system.NativeStart.main(Native Method)
01-23 14:58:00.901: E/AndroidRuntime(4238): Caused by: java.lang.NullPointerException
01-23 14:58:00.901: E/AndroidRuntime(4238):     at cam.pack.MyCamActivity.onResume(MyCamActivity.java:571)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.Activity.performResume(Activity.java:4539)
01-23 14:58:00.901: E/AndroidRuntime(4238):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
01-23 14:58:00.901: E/AndroidRuntime(4238):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:52:33.397

我犯了一个错误，我已将保管箱会话放在我自己定义的函数`uploadDropbox()`中，这是一个错误导致 NullPointerException，因为如果我打印`mDBApi`它`NULL`。它没有被初始化。我们必须把这些行放进去`onCreate()`，现在它的工作，图像正在上传到 CameraUploads 文件夹中`Dropbox`。

感谢您的评论。**

# c# - 如何将 ctrl + c 赋予 c# 中的进程？

> ID：14476461
> 
> 赞同：1
> 
> 时间：2013-01-23T09:37:41.697
> 
> 标签：c#, .net, multithreading, command-line, vmware

我正在尝试创建一个后台工作人员来创建一个进程，该进程会执行一些 ovf 命令。在这两者之间，我尝试通过发送 ctrl+c 来中止操作。这个网站上有类似的问题，但没有一个解决了这个问题。

```
private void DeployOVF()
{
    p = new Process();
    ProcessStartInfo pi = new ProcessStartInfo("ovftool.exe", "--machineOutput "+ FileName + " vi://uname:pwd@Ip Address");
    pi.UseShellExecute = false;
    pi.RedirectStandardOutput = true;
    pi.RedirectStandardInput = true;
    pi.RedirectStandardError = true;
    pi.CreateNoWindow = true;
    p.StartInfo = pi;
    p.Start();
    StreamReader myStreamReader = p.StandardOutput;
    string myString;
    bool progressStarted = false;
    while ((myString = myStreamReader.ReadLine()) != null)
    {
        //Logic to display the progress
    }
    p.WaitForExit();
    p.Close();
} 
```

这是我发送我的 ctrl+c 以中止进度的地方，

```
private void button1_Click(object sender, EventArgs e)
{
    p.StandardInput.Write("\x3");
    p.StandardInput.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:42:32.910

如果进程正在响应（即它的前台线程正在响应信号），那么您应该使用：

```
p.CloseMainWindow(); 
```

如果没有，您应该能够（不干净地）中止该过程`Kill`：

```
p.Kill();

//Then wait for the process to end
p.WaitForExit();
p.Close(); 
```

# android - 本机代码绑定到 java 中的服务

> ID：14476465
> 
> 赞同：1
> 
> 时间：2013-01-23T09:37:46.173
> 
> 标签：android, android-binder

我有一个用本机 c 编写的程序。现在，我希望这个本地 c 程序与使用 bind 用 java 编写的服务通信。任何人都可以告诉我如何？实际上，我已经尝试过使用本地套接字来实现它。但是它太慢了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T05:31:18.273

思路如下图所示：

```
 Process P1                                                     Process P2 
```

用户空间程序（在 java 中）

```
 JNI layer

  native code (in c/c++)     <---------------------->     native code (in c/c++)
                                       Binder 
```

# android - 我的应用程序如何在不调用 oncreate 的情况下返回到以前的活动

> ID：14476470
> 
> 赞同：2
> 
> 时间：2013-01-23T09:37:56.697
> 
> 标签：android

我的主要活动具有图像网格和显示一张图像的详细信息活动。当您单击主要活动的图像时，应用程序会使用所选图像启动详细活动。我想从细节活动返回到主要活动而不调用主要活动的创建，因为它会消耗大量时间。我怎样才能做到这一点 ？

我用

```
 Intent in = new Intent(Search_costumer.this,Customer_details.class);
    startActivity(in); 
```

从主要活动导航到详细活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:59:10.907

使用 Bundle`savedInstanceState`是因为它会保持您的活动状态，就像`Bluetooth`它`ON`在关闭手机后仍处于 On.Somewhere 一样保持其`status(On/OFF)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:42:26.263

当您切换到详细信息活动时，不要完成您的主要活动，当您从那里返回时，onResume 将被调用而不是 onCreate

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T09:46:57.270

当你启动 DetailsActivty 时，**不要**从 MainActivity 调用 finish()。这不会破坏您的 MainActivity，当您从 DetailsActivity 中单击返回按钮时，将为 MainActivity 调用 onResume()。您可以通过此[链接](https://stackoverflow.com/questions/11715848/go-back-to-previous-screen-without-creating-new-instance)获得帮助。

希望对您有所帮助，如果有任何困惑，请随时询问

# android - 通过 EditableText 字段生成快速 JSON

> ID：14476471
> 
> 赞同：1
> 
> 时间：2013-01-23T09:38:00.360
> 
> 标签：android, forms, attributes

我想创建类似于 HTML 表单输入的东西。每个输入都有一个名称和值属性，它们很好地结合在一起。

但是到目前为止，我刚刚发现`android:tag`可以用作输入的名称属性。

```
<EditText android:id="@+id/passwordEdit"
     android:tag="name"
     android:inputType="textPassword"/> 
```

我想要创建的只是通过 EditText 构建一个 JSON 对象，如下所示：

`jsonObject.put(editableField.getXXX, editableField.getText())`

请注意，这里的重点只是使用布局文件来构建 JSON 对象。

对于这种用法或存储虚拟值的其他适当属性是否有任何约定？

谢谢

# iis - 删除 IIS 7+ 上的“日期”http 响应标头

> ID：14476472
> 
> 赞同：5
> 
> 时间：2013-01-23T09:38:02.740
> 
> 标签：iis, http-headers, asp.net-web-api

我正在开发一个 ASP.NET Web API 应用程序，它使用自定义日期时间 http 标头响应客户端。虽然我已经阅读了几篇描述如何从 ASP.NET/IIS 中删除响应标头的文章，但这一篇似乎总是有弹性，我无法摆脱它。最后，它似乎被放置在程序员/管理员无法控制的某个地方的响应管道中。

我知道在响应中不包含“日期”标头可能是一种不好的做法，但是正如我所提到的，自定义日期时间标头（以刻度而不是字符串表示形式）使默认标头变得多余；此外，这是一个私有 API，所以我确切地知道谁以及如何使用它。

因此，是否可以以任何方式在 IIS (v7+) 中为特定站点（或直接从 Web API 应用程序）删除此标头？

**编辑**：
我尝试了（没有成功）以下技术：

*   创建自定义处理程序以从 Web API 项目中删除标头
*   注册自定义 IHttpModule
*   `<httpProtocol><customHeaders>`在部分中显式删除 web.config 中的标头
*   在 IIS 管理器中删除 HTTP 响应标头
*   `protected void Application_PreSendRequestHeaders(object sender, EventArgs e)`方法中的标头删除代码`Global.asax.cs`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T22:16:36.310

根据 HTTP [Spec](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18)，**Date 标头是强制性**的，除了我认为不适用于您的情况的这些条件：

```
Origin servers MUST include a Date header field in all responses, except in these cases:

  1\. If the response status code is 100 (Continue) or 101 (Switching
     Protocols), the response MAY include a Date header field, at
     the server's option.
  2\. If the response status code conveys a server error, e.g. 500
     (Internal Server Error) or 503 (Service Unavailable), and it is
     inconvenient or impossible to generate a valid Date.
  3\. If the server does not have a clock that can provide a
     reasonable approximation of the current time, its responses
     MUST NOT include a Date header field. In this case, the rules
     in section 14.18.1 MUST be followed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:02:47.143

这在实际的 WebApi/Mvc 管道中是不可能的，因此动作过滤器和委托处理程序等选项不可用。

相反，您可能需要实现一个自定义`IHttpModule`并在 IIS 中注册它。[这里](http://blogs.technet.com/b/stefan_gossner/archive/2008/03/12/iis-7-how-to-send-a-custom-server-http-header.aspx)有一篇文章你应该阅读和遵循。该方法非常简单且易于适应。

只需`set`将该示例中的替换为：

```
HttpContext.Current.Response.Headers.Remove("Date"); 
```

# javascript - 在 HTML5 网络应用程序中“模拟”文件下载

> ID：14476474
> 
> 赞同：10
> 
> 时间：2013-01-23T09:38:06.337
> 
> 标签：javascript, html

假设我有一个在客户端完全执行的 web 应用程序。其目的是充当文件转换实用程序，例如将用户本地存储的 Word 文档转换为 PDF。

因此，在获得用户许可的情况下，应用程序可以读取指定的本地文件，并在内存中将其处理为 PDF 格式。

如何让用户“下载”结果？由于数据无论如何都保存在浏览器的内存中，我不希望将其上传到某个服务器。

[编辑]

*   没有基于闪存的解决方案
*   预计文件大小最大为 15mb

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T10:02:44.070

我的情况的解决方案是使用 HTML5 FileSaver API。

也许这个问题应该被关闭，因为它实际上是

[使用 HTML5/Javascript 生成和保存文件](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)

感谢 aefxx

# java - 如何每 5 秒更新一次 textview 变量

> ID：14476476
> 
> 赞同：3
> 
> 时间：2013-01-23T09:38:08.317
> 
> 标签：java, android, for-loop, textview, updates

> **可能重复：**
> [每 N 秒更新一次 TextView？](https://stackoverflow.com/questions/4776514/updating-textview-every-n-seconds)

在这里，我想在每次迭代计算后更新 textview 中的 Hr 值，但每次延迟 2 秒。我不知道该怎么做。我现在在 textview 中得到的是迭代的最后一个值。我希望所有值都以恒定延迟显示。任何人都请帮忙。

```
 for(int y=1;y<p.length;y++)
    {
       if(p[y]!=0)
        {
        r=p[y]-p[y-1];
          double x= r/500;
          Hr=(int) (60/x);
          Thread.sleep(2000);
         settext(string.valueof(Hr));
      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:53:18.010

```
public class MainActivity extends Activity{
protected static final long TIME_DELAY = 5000;
//the default update interval for your text, this is in your hand , just run this sample
TextView mTextView;
Handler handler=new Handler();  
int count =0;
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mTextView=(TextView)findViewById(R.id.textview);
    handler.post(updateTextRunnable);
}

Runnable updateTextRunnable=new Runnable(){  
  public void run() {  
      count++;
      mTextView.setText("getting called " +count);
      handler.postDelayed(this, TIME_DELAY);  
     }  
 };  
} 
```

我希望这次你能进入代码并运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:43:16.283

你应该使用计时器类....

```
Timer timer = new Timer();
        timer.schedule(new TimerTask() {

        public void run() {

        }, 900 * 1000, 900 * 1000); 
```

上面的代码是每 15 分钟一次。更改此值并在您的情况下使用.....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T09:44:02.783

使用`Handler`or`TimerTask(with runOnUiThread())`代替 for 循环在每 5 秒后更新文本：

```
Handler handler=new Handler();  

handler.post(runnable);  
Runnable runnable=new Runnable(){  
  @Override  
    public void run() {  
      settext(string.valueof(Hr));  //<<< update textveiw here
      handler.postDelayed(runnable, 5000);  
     }  
 }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T09:46:11.970

[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)正是您所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:20:38.843

让我们只希望它对您有足够的帮助

```
import java.awt.Toolkit;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
public class demo 
{
  Toolkit toolkit;
  Timer timer;
  public demo()
  {
    toolkit = Toolkit.getDefaultToolkit();
    timer = new Timer();
    timer.schedule(new scheduleDailyTask(), 0, //initial delay
        2 * 1000); //subsequent rate
  }
  class scheduleDailyTask extends TimerTask 
  {
    public void run() 
    {
      System.out.println("this thread runs for every two second");
      System.out.println("you can call this thread to start in your activity");
      System.out.println("I have used a main method to show demo");
      System.out.println("but you should set the text field values here to be updated simultaneouly");
    }
  }
  public static void main(String args[]) {
    new demo();
  }
} 
```

# php - 使用 mail() 在 PHP4 中的电子邮件中发送附件和文本/html

> ID：14476479
> 
> 赞同：7
> 
> 时间：2013-01-23T09:38:32.187
> 
> 标签：php, php4

为了让生活变得困难，我正在为之工作的客户正在使用一个在 PHP4.0 上运行的非常大但又旧的系统，他们不希望添加任何额外的库。

我正在尝试通过 PHP 发送一封带有附件和随附文本/html 内容的电子邮件，但我无法在一封电子邮件中同时发送这两个内容。

**这将发送附件：**

```
$headers = "Content-Type: text/csv;\r\n name=\"result.csv\"\r\n Content-Transfer-Encoding: base64\r\n Content-Disposition: attachment\r\n boundary=\"PHP-mixed-".$random_hash."\"";
$output = $attachment;

mail($emailTo, $emailSubject, $output, $headers); 
```

**这会发送文本/html：**

```
$headers = "Content-Type: text/html; charset='iso-8859-1'\r\n";
$output = $emailBody; // $emailBody contains the HTML code. 
```

**这会发送一个包含 text/html 的附件以及附件内容：**

```
$headers = "Content-Type: text/html; charset='iso-8859-1'\r\n".$emailBody."\r\n";
$headers = "Content-Type: text/csv;\r\n name=\"result.csv\"\r\n Content-Transfer-Encoding: base64\r\n Content-Disposition: attachment\r\n boundary=\"PHP-mixed-".$random_hash."\"";
$output = $attachment; 
```

我需要知道的是如何在电子邮件正文中发送带有 text/html 的电子邮件并添加附件。我确定我在这里遗漏了一些非常简单的东西！

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T11:00:52.433

好的，我终于破解了！以供参考：

```
$emailBody .= "<html><body>Blah</body></html>";
$emailSubject = "Subject";
$emailCSV = "\"Col1\", \"Col2\"\r\n"; // etc.
$attachment = $emailCSV;

$boundary = md5(time());

$header = "From: Name <address@address.com>\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed;boundary=\"" . $boundary . "\"\r\n";

$output = "--".$boundary."\r\n";
$output .= "Content-Type: text/csv; name=\"result.csv\";\r\n";
$output .= "Content-Disposition: attachment;\r\n\r\n";
$output .= $attachment."\r\n\r\n";
$output .= "--".$boundary."\r\n";
$output .= "Content-type: text/html; charset=\"utf-8\"\r\n";
$output .= "Content-Transfer-Encoding: 8bit\r\n\r\n";
$output .= $emailBody."\r\n\r\n";
$output .= "--".$boundary."--\r\n\r\n";

mail($emailTo, $emailSubject, $output, $header); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:12:22.507

尝试使用 PHP`mail()`函数发送附件是一种挫败感。简而言之，这不值得付出努力。即使在当前的 PHP 版本中，我也永远*不会建议尝试它。*我总是会使用像 phpMailer 这样的库。

我知道您说过不允许使用第三方库，但在这种情况下，您不使用第三方库会很疯狂。我们谈论的是一天工作和一年之间的区别；这么大的事。PHP`mail()`函数非常难以使用，并且尝试使用它编写代码以从头开始发送附件会给您留下脆弱、充满错误的代码，这些代码需要永远在所有情况下可靠地工作。这就是存在像 phpMailer 这样的库的原因。

所以我建议不管他们想让你做什么，你都应该下载[phpMailer](http://phpmailer.worxware.com/) ——PHP4版本仍然可用——看看它是否适合你。（下载页面甚至还有*真正*的旧版本，所以您应该能够及时找到适用于 PHP 4.0 的版本。完全不需要任何时间来获得一个简单的演示和与它一起运行。证明它有效；这很可能会软化他们对第三方库的立场。

（如果它没有软化他们的立场，那么这个项目在理智的时间内完成的希望并不大。在这种情况下，你能做的最好的就是在项目价格的报价中添加一些额外的零并咬紧牙关）

# java - 如何从 HTML 表格中的选定行中获取单元格值？

> ID：14476487
> 
> 赞同：0
> 
> 时间：2013-01-23T09:39:04.380
> 
> 标签：java, html, jsp, jstl

有一张像...

```
<table border="1" style="width: 100%" id="mytab1">
<tr id="A1">
    <td>100</td>
    <td>John</td>
    <td>Doe</td>
    <td>Someplace</td>
    <td>
        <input type="submit" value="Submit" />
    </td>
</tr>
<tr id="A2">
    <td>101</td>
    <td>Jane</td>
    <td>Doe</td>
    <td>Someplace</td>
    <td>
        <input type="submit" value="Submit" />
    </td>
</tr> 
```

我正在尝试获取连续第一个单元格的值，其中我按下了“提交”按钮。我是这方面的新手。这是一个示例，但我实际上是在 jsp 页面中处理动态创建的 html 表，类似于[如何从动态创建的 HTML 表中获取特定行的单元格数据？](https://stackoverflow.com/questions/3793948/how-to-get-cell-data-of-specific-row-from-the-dynamically-created-html-table)问题。我就是无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:21:53.983

在每一行中使用隐藏字段并检查提交的值..如下：

```
<table border="1" style="width: 100%" id="mytab1">
<tr id="A1">
    <td>100</td>
    <td>John</td>
    <td>Doe</td>
    <td>Someplace</td>
    <td>
        <input type="hidden" name="rowId" value="A1" />
        <input type="submit" value="Submit" />
    </td>
</tr>
<tr id="A2">
<td>101</td>
<td>Jane</td>
<td>Doe</td>
<td>Someplace</td>
<td>
    <input type="hidden" name="rowId" value="A2" />
    <input type="submit" value="Submit" />
</td> 
```

对所有隐藏字段使用相同的名称，以便在控制器中获取提交的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:59:18.030

这种类型的工作 javascript 做得很好。

1.  将提交更改为带有处理程序的按钮；
2.  将处理程序放入头部

结果代码：

```
<html>
<head>
<script>
function submitter(btn) {
    var param = btn.parentElement.parentElement.id;
    var myForm = document.forms["myForm"];
    myForm.elements["param"].value = param;
    myForm.submit();
}
</script>
</head>
<body>
<form action="#someurl" id="myForm">
<input type="hidden" name="param" />
<table border="1" style="width: 100%" id="mytab1">
<tr id="A1">
    <td>100</td>
    <td>John</td>
    <td>Doe</td>
    <td>Someplace</td>
    <td>
        <input type="button" value="Submit" onclick="submitter(this)" />
    </td>
</tr>
<tr id="A2">
    <td>101</td>
    <td>Jane</td>
    <td>Doe</td>
    <td>Someplace</td>
    <td>
        <input type="button" value="Submit" onclick="submitter(this)" />
    </td>
</tr>
</table>
</form>
</body>
</html> 
```

# java - 如何按数字对包含另一张地图的地图进行排序

> ID：14476489
> 
> 赞同：1
> 
> 时间：2013-01-23T09:39:07.643
> 
> 标签：java, sorting, collections, hashmap

我有一个 HashMap 类型：

```
HashMap<String, HashMap<String, Integer>> 
```

这个 HashMap 的值如下

```
{name, {dateasString, numberOfTasks}} 
```

我想按`numberOfTasks`. 我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:55:28.703

创建`Comparator`根据对象总和比较元素的自定义，并在使用数据填充列表/数组之后使用`Arrays.sort()`or ：`Collections.sort()`

```
//populate example data:
final Map<String,Map<String,Integer>> map = new HashMap<String, Map<String,Integer>>();
map.put("x", new HashMap<String, Integer>());
map.get("x").put("t1",1);
map.get("x").put("t2",1);
map.get("x").put("t3",1);
map.put("y", new HashMap<String, Integer>());
map.get("y").put("t1",2);
map.get("y").put("t2",2);
map.get("y").put("t3",2);
map.put("z", new HashMap<String, Integer>());
map.get("z").put("t1",3);
map.get("z").put("t2",3);
map.get("z").put("t3",3);

//populate the data in a list:  
List<String> list = new ArrayList<String>(map.keySet());

//sort the data with a custom comparator:
Collections.sort(list, new Comparator<String>() {
    private int getSum(String s) { 
        int sum = 0;
        for (Integer x : map.get(s).values()) {
            if (x != null) sum += x;
        }
        return sum;
    }
    public int compare(String o1, String o2) {
        return new Integer(getSum(o1)).compareTo(new Integer(getSum(o2)));
    }
});

System.out.println(list); 
```

请注意，为了提高性能，您可以使用缓存机制来避免在每次比较每个元素时重新计算每个元素的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:56:57.100

第二个`HashMap`必须是一个`HashMap`吗？你能把第二个`HashMap`转换成专门为此而设计的类吗？也许是这样的：

```
private class TaskList
{
    String dateAsString;
    int numTasks;
    public TaskList(String dateAsString, int numTasks)
    {
        this.dateAsString = dateAsString;
        this.numTasks = numTasks;
    }
    public getDateAsString()
    {
        return dateAsString;
    }
    public getNumTasks()
    {
        return numTasks;
    }
} 
```

然后您可以直接说出`HashMap<String, TaskList>`和访问任务的数量并相应地对它们进行排序。即使那样，我认为`HashMap`这也不适合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:57:51.513

您无法对 a 进行排序`HashMap`，但您可以获得键的排序数组（或列表）。你想如何定义你的排序取决于你 - 只需修改比较器（或`numberOfTasks`它调用的函数：）

所以像这样的东西？

```
public static void main() {
    final
    HashMap<String, HashMap<String, Integer>> map = new HashMap<String, HashMap<String, Integer>>();

    String[] keys = (String[]) map.keySet().toArray();

    Arrays.sort(keys, new Comparator<String>() {
        @Override
        public int compare(String k1, String k2) {
            int v1 = numberOfTasks(map.get(k1));
            int v2 = numberOfTasks(map.get(k2));
            return Integer.valueOf(v1).compareTo(Integer.valueOf(v2));
        }
    });

    // 'keys' is now sorted the way you want.

}

public static int numberOfTasks(HashMap<String, Integer> map) {
    int max = 0;
    for (Integer i : map.values()) {
        if (i > max) max = i;
    }
    return max;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:42:55.433

我怀疑在 Java API 中有没有办法做到这一点。您要么必须通过在单独的模型中提取数据并对其进行排序来手动执行此操作，要么重新设计模型，以便更轻松地在该字段上进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:49:57.707

您必须将哈希图转换为数组。如果可以对哈希图进行排序，那么一开始就完全违背了使用哈希图的目的。

```
hashMap.keySet().toArray(); // returns an array of keys
hashMap.values().toArray(); // returns an array of values

Arrays.sort(array); // sorts an array 
```

希望有帮助。

# html - IE7不放句子行，切句

> ID：14476491
> 
> 赞同：0
> 
> 时间：2013-01-23T09:39:12.917
> 
> 标签：html, css, internet-explorer-7, overflow

标签包装器 div 中有很多不同长度的标签 div。IE8、9、FF、Chrome、Safari和opera没有任何问题，但在IE7上就坏了。我该如何解决这个问题？

HTML：

```
<div class="tag-wrapper">
    <div class="tag"><a href="#">text text text</a></div>
    <div class="tag"><a href="#">text text</a></div>
    <div class="tag"><a href="#">text text</a></div>
    <div class="tag"><a href="#">text text text</a></div>
    <div class="tag"><a href="#">text text text text</a></div>
</div> 
```

CSS：

```
.tag-wrapper{
    float: left;
    height: 200px;
    padding: 12px 12px 12px 20px;
    width: 500px;
    overflow:hidden;
    border:1px solid #000;
 }

.tag-wrapper .tag{
    background:url(img/corner02.png) no-repeat 0 0; 
    vertical-align:middle;
    padding: 0 0 0 10px;
    display:inline-block;
    height:24px;
    margin: 0 10px 9px 0;
    float:left;    
}

.tag-wrapper .tag a:link{
    width:auto;
    overflow:visible;
    height:24px;
    line-height:24px;
    padding:0 5px 0 5px;
    background:#F00;
    float:left;
    color:#FFF;
    text-decoration:none;
    font-weight:bold;   
 }

.tag-wrapper .tag a:hover{
    color:#000;   
 } 
```

IE8、IE9、Chrome、Firefox、Safari、Opera的截图

![在此处输入图像描述](../Images/770bc346a6ad4be6feb07adf913a845e.png)

IE7 截图

![在此处输入图像描述](../Images/6290e356f887261a48a5ee1b3acacac6.png)

[http://jsfiddle.net/B7Tjw/2/](http://jsfiddle.net/B7Tjw/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:24:32.963

试试这个代码：它工作正常。

```
.tag-wrapper .tag a:link{
    width:auto;
    overflow:visible;
    height:24px;
    line-height:24px;
    padding:0 5px 0 5px;
    background:#F00;
    float:left;
    color:#FFF;
    text-decoration:none;
    font-weight:bold; 
    white-space:pre;
} 
```

# ruby-on-rails-3 - 蜻蜓 - 不显示上传的图像

> ID：14476498
> 
> 赞同：0
> 
> 时间：2013-01-23T09:39:39.437
> 
> 标签：ruby-on-rails-3, apache, tomcat, dragonfly-gem

我正在使用带有 jruby 和 apache tomcat 的蜻蜓来上传图像。我正在尝试使用 profile_picture.thumb('30x30#').url 显示我正在动态上传的图像

当我使用 ruby​​ on rails 运行应用程序时，图像会正确显示。但是当我使用 apache tomcat 运行它时，图像不会显示。

我认为当我们在 中部署战争文件时`jruby`，约定 profile_picture.thumb('30x30#').url 在这里不起作用。我也尝试`'/media(/:dragonfly)', :to => Dragonfly[:images]`在我的路线中使用匹配，但没有用。

我没有收到错误，但在网页中显示了一些代码

> "BAhbB1sHOgZmSSIpMjAxMy8wMS8wOS8xMl8xNl80NF83MDNfUGVuZ3VpbnMuanBnBjoGRVRbCDoGcDoKdGh1bWJJIgszMHgzMCMGOwZU"

在页面源代码中，我得到了路径，

> /媒体/BAhbB1sHOgZmSSIpMjAxMy8wMS8wOS8xMl8xNl80NF83MDNfUGVuZ3VpbnMuanBnBjoGRVRbCDoGcDoKdGh1bWJJIgszMHgzMCMGOwZU

请帮助我了解在`jruby`使用 apache tomcat 时显示使用蜻蜓上传的图像的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:37:35.797

我遇到了类似的问题。就我而言，我尝试在地址栏中输入 url，它给了我一个堆栈跟踪，说转换命令失败，状态为 127。通过在机器上安装 ImageMagick 解决了这个问题。我忘记在生产中安装 ImageMagick。

# c# - 在 DataGridview C# 中看不到单元格的十进制值

> ID：14476502
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:39:42.577
> 
> 标签：c#, datagridview

我无法在我的网格视图上显示“价格”单元格的值，这是我的代码：

```
DataColumn idCol2 = new DataColumn();
        idCol2.DataType = System.Type.GetType("System.Int32");
        idCol2.ColumnName = "Id";
        table.Columns.Add(idCol2);

        DataColumn SKUCol2 = new DataColumn();
        SKUCol2.DataType = System.Type.GetType("System.String");
        SKUCol2.ColumnName = "SKU";
        table.Columns.Add(SKUCol2);

        DataColumn ProdNameCol2 = new DataColumn();
        ProdNameCol2.DataType = System.Type.GetType("System.String");
        ProdNameCol2.ColumnName = "Product Name";
        table.Columns.Add(ProdNameCol2);

        DataColumn DescCol2 = new DataColumn();
        DescCol2.DataType = System.Type.GetType("System.String");
        DescCol2.ColumnName = "Product Description";
        table.Columns.Add(DescCol2);

        DataColumn PriceCol2 = new DataColumn();
        PriceCol2.DataType = System.Type.GetType("System.Decimal");
        PriceCol2.ColumnName = "Price";
        table.Columns.Add(PriceCol2);

        DataColumn[] keys2 = new DataColumn[5];
        keys2[0] = idCol2;
        table.PrimaryKey = keys2;

        LivePOS livepos = new LivePOS(clientId, clientSecret);
        _products = livepos.GetProducts(apiKey, token);

        foreach (var p in _products)
        {
            table.Rows.Add(p.Id, p.Sku, p.Name, p.Description , p.SellingPrice);
        }

        table.DefaultView.Sort = "Id ASC";
        dataGridView1.DataSource = table;
        this.dataGridView1.DefaultCellStyle.Format = "N4";

        foreach (DataGridViewRow row in dataGridView1.Rows)
        {

            row.Cells[0].ReadOnly = false; //id

            row.Cells[1].ReadOnly = true; //sku
            row.Cells[2].ReadOnly = true; //name
            row.Cells[3].ReadOnly = true; //description
        } 
```

请帮助我:)这段代码有问题吗？我在 Form_Load 事件中创建了名为“table”的数据表的新实例。除此“价格”列外，所有单元格值均正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:43:30.943

您的价格列的数据类型应该比小数双倍。看看这个链接 [小数与双倍](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/921a8ffc-9829-4145-bdc9-a96c1ec174a5/)

希望有帮助

# c# - 我们什么时候应该使用公共的，什么时候应该使用私有的？

> ID：14476505
> 
> 赞同：1
> 
> 时间：2013-01-23T09:39:57.673
> 
> 标签：c#, .net, coding-style

当我们在我们的团队解决方案中实现目前未被其他类使用的方法时，访问修饰符应该是公共的还是私有的？我相信“一个公共成员说这个成员代表了这个对象提供的关键的、记录在案的功能。”。我们只将“实现细节”方法设为私有，所有将来可能有用的方法都应该公开，即使现在其他类中没有我们方法的消费者。但是我的对手说这样的方法应该是私有的。你怎么想？

补充：让我们更具体一点。例如有一个类SqlHelper。其中有用于操作 SQL Server 的有用功能。特别是使用到 SQL 服务器的连接。但不仅在那个班级。

例如，我需要实现将处理 SqlExeptions 的公共静态 HandleSqlExeption 方法（现在仅适用于 SqlHelper 类）。但是我希望在所有在异常处理中使用 SQL 连接进行操作的类中都将使用此方法（而不是简单的，例如：catch (Exception) { MsgBox {"SqlError"}; 现在某处发生了。所以我认为公共访问修饰符会告诉其他同事他们可以使用此方法。私有将隐藏该方法。如果有人要求使用这种方法，我将需要更改代码并重新构建程序集。为什么？只有底片。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T09:40:54.147

通常，您应该使用尽可能少的许可访问修饰符进行编码。

*   如果该方法未在类外使用，则将其设为`private`.
*   如果该方法需要通过继承类型来使用，请使其`protected`.
*   如果该方法将仅在程序集中使用，则将其设为`internal`.
*   仅当该方法要在程序集之外使用时才应使用`public`。

这有助于[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)，并允许您随意更改实现。

我听说这被描述为保护你的私人。

* * *

在 API 设计方面，您应该拥有一个完整的 API，将所有逻辑功能公开为`public`- 这就是为什么您应该在 .NET 中使用接口进行 API 设计，因为所有接口成员都必须是 .NET 接口`public`。在实现类时，对不属于接口的任何成员使用上述经验法则——除非它们构成接口的逻辑部分，就其使用者而言。

* * *

因此，如果您今天正在使用一种方法，那么您应该有一个具有*相同*`Read`可访问性的补充`Write`方法。这是一个很好的设计（对称和预期），但是如果公共方法使用它们，你应该*如何*读取或写入私有方法。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:50:47.450

如果一个类有一些东西要暴露给外界，那么就让它公开，否则就是私有的。它取决于类的功能和目的，而不是当前或未来的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:42:10.587

根据名称描述的方法的性质使用公共和私有。

`public`当该方法可以暴露给其他对象时

`private`当其他对象不应该访问该方法时。

如果您的对象需要更安全，请使用`private`访问说明符。您还应该了解`protected`访问说明符，它的不同之处在于，这些方法只能由继承它们的对象访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:05:03.230

这是一个判断电话。一般来说，如果它在逻辑上是类为获取它提供的功能而呈现的接口的一部分，那么即使它没有当前用户，它也应该是公共的。这将减少每次您想要将其用于您已经在使用它的基本相同的事情时都需要修改该类的机会。

然而，这是有代价的。您公开的每个功能都是您承诺提供的功能。如果将来您决定将其从公共界面中删除，您可能会破坏调用者。

例如，考虑一个地图类。假设您目前没有任何调用者需要知道地图中的项目数，并且您当前的实现有一个`size`您可以轻松返回的变量。您可以添加一个`getSize`返回地图大小的函数。它在逻辑上是地图类公开的功能的一部分。因此，即使当前调用者不需要知道大小，人们也可以争辩说它应该是公开的。

但是，完全有可能未来的实现可能希望摆脱该`size`变量。也许增加和减少大小的开销很大，并且实现更改为不需要知道大小。如果您公开`getSize`了函数并调用了它，那么即使您不需要它，您也必须继续跟踪它的大小，或者使该函数非常昂贵，不得不实际计算大小。

假设很多代码需要知道表是否为空，并且`isEmpty`为此目的提供了一个函数。经验表明，如果你也提供一个`getCount`功能，人们会`getCount() == 0`代替`isEmpty`. 这在今天可能没有任何区别，但它可能会限制您未来的实现选择以保持`getCount`与`isEmpty`.

如果可能的话，我强烈建议您将其公开，如果您可以轻松想象该类的未损坏用户将受益于访问该功能并且它构成该类提供的功能的逻辑部分。否则，无论如何，您以后都可以轻松添加它。所以不要过分强调它。这在很大程度上是一个风格问题，混合着试图预测未来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:43:59.003

面向对象开发的基本原则；一个类的实例应该只公开它的客户需要访问的内容。查看[链接](http://en.wikipedia.org/wiki/Object-oriented_programming)并搜索“封装”。**

# r - 如何读取R中三列中包含变量和数据的文件

> ID：14476509
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:40:07.803
> 
> 标签：r

您好，我需要知道如何以许多变量在第一列的格式读取 csv 文件，它们的日期在第二列，它们的数据在第三列

```
VARIABLES      DATE       DATA
V1           1/03/2012    1000  
V1           1/04/2012    1500
..
V1           1/12/2012    2600
V2           1/03/2012    900
V2           1/04/2012    1200
...
V2           1/12/2012    1000
V3           1/03/2012    200
.... 
```

如何提取与其数据和日期相对应的每个变量 Vi（例如在数组中？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:01:27.003

示例数据不是`csv`格式。您可以使用`read.table`读取文件：

```
dat <- read.table(text="VARIABLES      DATE       DATA
V1           1/03/2012    1000  
V1           1/04/2012    1500

V1           1/12/2012    2600
V2           1/03/2012    900
V2           1/04/2012    1200

V2           1/12/2012    1000
V3           1/03/2012    200", header = TRUE) 
```

这将创建一个数据框。`VARIABLES`您可以使用 split 函数创建一个较小数据帧的列表（每个值对应一个）：

```
split(dat, dat$VARIABLES) 
```

结果：

```
$V1
  VARIABLES      DATE DATA
1        V1 1/03/2012 1000
2        V1 1/04/2012 1500
3        V1 1/12/2012 2600

$V2
  VARIABLES      DATE DATA
4        V2 1/03/2012  900
5        V2 1/04/2012 1200
6        V2 1/12/2012 1000

$V3
  VARIABLES      DATE DATA
7        V3 1/03/2012  200 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:10:23.620

另一种基于 Sven 的回答的方法是使用`reshape`包来重塑数据：

```
> library(reshape)
> dat.m <- melt(dat, id.vars=c('VARIABLES', 'DATE'))
> head(dat.m)
  VARIABLES      DATE variable value
1        V1 1/03/2012     DATA  1000
2        V1 1/04/2012     DATA  1500
3        V1 1/12/2012     DATA  2600
4        V2 1/03/2012     DATA   900
5        V2 1/04/2012     DATA  1200
6        V2 1/12/2012     DATA  1000
> dat.c <- as.data.frame(cast(dat.m, VARIABLES~DATE+.))
> head(dat.c)
  VARIABLES 1/03/2012 1/04/2012 1/12/2012
1        V1      1000      1500      2600
2        V2       900      1200      1000
3        V3       200        NA        NA 
```

基本思想是这样的：`melt`区分`id.vars`（标识符列）和`measure.vars`（您实际测量的内容）并将具有给定 ID 和测量列的任何数据框重新格式化为默认格式（带有`variable`和`value`列）。之后，`cast`允许您指定您希望数据的外观。在找到基本规则之前，我很难找出正确的语法`cast`：在公式参数中，左侧的`~`任何内容都按行对齐，右侧的任何内容都按列对齐。

另请参阅此要点：[https ://gist.github.com/4603945](https://gist.github.com/4603945)

# javascript - 异常...“索引或大小为负数或大于允许的数量”代码：“1”nsresult：“0x80530001（IndexSizeError）

> ID：14476511
> 
> 赞同：0
> 
> 时间：2013-01-23T09:40:14.420
> 
> 标签：javascript, asp.net-mvc-4

当我尝试使用 javascript 删除表中的行时，出现此错误

```
Exception... "Index or size is negative or greater than the allowed amount"  code: "1" nsresult: "0x80530001 (IndexSizeError) 
```

这些行将被正确删除但突然我得到这个索引错误不知道为什么请指导我。

代码：

```
function deleteRow(tableID,loop) {

  try {

       var table = document.getElementById(tableID);
       var rowCount = table.rows.length;
       var rownumber = loop;
       alert(rownumber);                 
         table.deleteRow(rownumber);                      
     }    

catch (e) {
    alert(e);
 }
} 
```

# css - 为不同的操作系统分配不同的字体

> ID：14476513
> 
> 赞同：0
> 
> 时间：2013-01-23T09:40:25.173
> 
> 标签：css, windows, macos, fonts, font-face

我目前有一个问题，谷歌搜索和 Stackoverflowsearch 都没有帮助。我目前在 Mac 和 PC 上显示不同的字体时遇到了一些问题。现在我的问题是：我能否为 Windows 用户指定与 Mac 用户不同的字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:52:17.060

你可以使用 javascript：

```
if(navigator.userAgent.indexOf('Mac') > 0)
$('body').addClass('mac-os'); 
```

如果用户在 mac

你可以在类中添加自定义字体

# .net - 本地主机ajax错误间歇

> ID：14476514
> 
> 赞同：1
> 
> 时间：2013-01-23T09:40:31.293
> 
> 标签：.net, ajax, webforms

在我的本地主机上，我有两个页面

*   表单.aspx
*   getandreturn.aspx

通常发生的是使用 ajax 我将数据 `form.aspx`从`getandreturn.aspx`. 当帖子发生时，调试器会在断点处的 page_load 处停止，以便我知道它正在工作。

大多数情况下都会发生这种情况，但有时这是非常随机的，我得到一个 500 错误并且它根本不会达到断点。

我正在使用 jquery 、 .net 4 、 web 表单，并且发布的数据是 identicle

谢谢

# android - 将短数组转换为音频文件？

> ID：14476518
> 
> 赞同：1
> 
> 时间：2013-01-23T09:40:40.883
> 
> 标签：android

我们如何将短数组转换为音频文件.....

```
short[] buffer = {
8130,15752,22389,27625,31134,32695,32210,29711,25354,19410,12253,4329,-3865,-11818,-19032,-25055,-29511,-32121,-327,-31276,-27874,-22728,-16160,-8582,-466}; 
```

请建议我获取文件的代码

```
player=new MediaPlayer();
player.setDataSource(file); 
```

上述代码文件中的意思是从短数组（即缓冲区...）转换而来的文件

# php - 使用 PHP 通过邮件发送 PDF 文件

> ID：14476521
> 
> 赞同：0
> 
> 时间：2013-01-23T09:40:47.203
> 
> 标签：php, pdf, pdf-generation, pdflib

我有如下PHP代码：

```
<?php
if (!empty($_POST)) {

// Used for later to determine result
$success = $error = false;

// Object syntax looks better and is easier to use than arrays to me
$post = new stdClass;

// Usually there would be much more validation and filtering, but this
// will work for now.
foreach ($_POST as $key => $val)
    $post->$key = trim(strip_tags($_POST[$key]));

// Check for blank fields
if (empty($post->subject) OR empty($post->email) OR empty($post->about))
    $error = true;

else {

    // Get this directory, to include other files from
    $dir = dirname(__FILE__);

    // Get the contents of the pdf into a variable for later
    //require($dir.'/pdf.php');
    ob_start();
    //$html = file_get_contents('../pdfFile.html');
    require_once('../pdfFile.html');
    $pdf_html = ob_get_contents();
    ob_end_clean();     

     // Load the dompdf files  
    require_once($dir.'/dompdf/dompdf_config.inc.php');  

    $dompdf = new DOMPDF(); // Create new instance of dompdf  
    $dompdf->load_html($pdf_html); // Load the html  
    $dompdf->render(); // Parse the html, convert to PDF  
    $pdf_content = $dompdf->output(); // Put contents of pdf into variable for later  

    // Get the contents of the HTML email into a variable for later
    ob_start();
    require_once($dir.'/html.php');
    $html_message = ob_get_contents();
    ob_end_clean();

    // Load the SwiftMailer files
    require_once($dir.'/swift/swift_required.php');

    $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance of SwiftMailer

    $message = Swift_Message::newInstance()
                   ->setSubject(array($post->subject)) // Message subject
                   ->setTo(array($post->email => $post->subject)) // Array of people to send to
                   ->setFrom(array('maly.nu_cute@ymail.com' => 'Maly')) // From:
                   ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                   ->attach(Swift_Attachment::newInstance($pdf_content,'sejour.pdf', 'application/pdf')); // Attach the generated PDF from earlier

    // Send the email, and show user message
    if ($mailer->send($message))
        $success = true;
    else
        $error = true;

} 
```

} ?>

事实上，我收到了错误消息：`Fatal error: Uncaught exception 'PDFlibException' with message 'Handle parameter or option of type 'image' has bad value 0' in /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/pdflib_adapter.cls.php:662 Stack trace: #0 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/pdflib_adapter.cls.php(662): PDFlib->fit_image(0, 231, 752, 'boxsize={150 30...') #1 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/php_evaluator.cls.php(66) : eval()'d code(23): PDFLib_Adapter->image('images/logo.png', 'png', 231, 10, 150, 30) #2 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/php_evaluator.cls.php(66): eval() #3 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/php_evaluator.cls.php(70): PHP_Evaluator->evaluate('?if ( isset($pd...') #4 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/renderer.cls.php(180): PHP_Evaluator->render(Object(Null_Frame_Decorator)) #5 /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/renderer.cls.php(120): Renderer->_render_frame(' in /homez.537/archigra/www/arcancianev/pdf_email/dompdf/include/pdflib_adapter.cls.php on line 662`

我使用此代码生成 pdf 并将其发送到邮件以供用户附加，但它收到了上述错误消息。我不知道它是从哪里来的？请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:58:40.100

或试试这个

```
<?php
// download fpdf class (http://fpdf.org)
require("/fpd/fpdf.php");
// fpdf object
$pdf = new FPDF();
// generate a simple PDF (for more info, see http://fpdf.org/en/tutorial/)
$pdf->AddPage();
$pdf->SetFont("Arial","B",14);
$pdf->Cell(40,10, "this is a pdf example");
// email stuff (change data below)
$to = "target@domain.com";
$from = "me@domain.com";
$subject = "send email with pdf attachment";
$message = "<p>Please see the attachment.</p>";
// a random hash will be necessary to send mixed content
$separator = md5(time());
// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;
// attachment name
$filename = "example.pdf";
// encode data (puts attachment in proper format)
$pdfdoc = $pdf->Output("", "S");
$attachment = chunk_split(base64_encode($pdfdoc));
// main header (multipart mandatory)
$headers = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;
// message
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;
// attachment
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment.$eol.$eol;
$headers .= "--".$separator."--";
// send message
mail($to, $subject, "", $headers);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:49:16.387

使用此代码将正常工作

```
<?php 
    $content="<html>html content here</html>"  ;    
    $html2pdf = Yii::app()->ePdf->HTML2PDF();
    $html2pdf->WriteHTML($content);
    $to = "dheerajchouhan85@gmail.com";
    $from = "no-reply@email.com";
    $subject = "Thank you for your Contribution";
    $message = "<p>Your Message</p>";

    $separator = md5(time());
    $eol = PHP_EOL;
    $filename = "example.pdf";
    $pdfdoc = $html2pdf->Output('', 'S');
    $attachment = chunk_split(base64_encode($pdfdoc));
    $headers = "From: " . $from . $eol;
    $headers .= "MIME-Version: 1.0" . $eol;
    $headers .= "Content-Type: multipart/mixed; boundary=\"" . $separator . "\"" . $eol . $eol;

    $body .= "Content-Transfer-Encoding: 7bit" . $eol;
    $body .= "This is a MIME encoded message." . $eol; 
    $body .= "--" . $separator . $eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"" . $eol;
    $body .= "Content-Transfer-Encoding: 8bit" . $eol . $eol;
    $body .= $message . $eol;
    $body .= "--" . $separator . $eol;
    $body .= "Content-Type: application/octet-stream; name=\"" . $filename . "\"" . $eol;
    $body .= "Content-Transfer-Encoding: base64" . $eol;
    $body .= "Content-Disposition: attachment" . $eol . $eol;
    $body .= $attachment . $eol;
    $body .= "--" . $separator . "--";
    mail($to, $subject, $body, $headers);
?> 
```

# r - 自定义 R 配置文件

> ID：14476525
> 
> 赞同：1
> 
> 时间：2013-01-23T09:41:05.190
> 
> 标签：r

> **可能重复：**
> [专家 R 用户，您的 .Rprofile 中有什么？](https://stackoverflow.com/questions/1189759/expert-r-users-whats-in-your-rprofile)

可能是一个安静的愚蠢问题，但我无法更改 Rprofile 中的选项：

```
.First <- function(){
 options(width=140)
 library(ggplot2)
 library(fPortfolio)
 library(reshape2)
 library(plyr)
 library(plm)
 library(XLConnect)
 library(scales)
 library(lattice)
 library(sos)
 library(car)
 library(fmsb)
 library(reshape)
 library(gridExtra)
 library(rpanel)
 library(psych)
 library(fUnitRoots)
 library(googleVis)
 library(rattle)
 library(gplots)
 library(RODBC)
 library(fGarch)
 library(RcppArmadillo)
 library(fmsb)
 library(forecast)
 library(playwith)
###names 
 n <- function(df) matrix(names(df)) 
##head tail 
 ht <- function(d) rbind(head(d,10),tail(d,10)) 

 ###Missing values 
 propmiss <- function(dataframe) {
    m <- sapply(dataframe, function(x) {
        data.frame(
            nmiss=sum(is.na(x)), 
            n=length(x), 
            propmiss=sum(is.na(x))/length(x)
        )
    })
    d <- data.frame(t(m))
    d <- sapply(d, unlist)
    d <- as.data.frame(d)
    d$variable <- row.names(d)
    row.names(d) <- NULL
    d <- cbind(d[ncol(d)],d[-ncol(d)])
    return(d[order(d$propmiss), ])
}

}

 cat("\nNu kör vi!", date(), "\n") 

.Last <- function(){ 
 cat("\nDags att ta det lite lugnt! ", date(), "\n")
} 
```

在我上面的 Rprofile 中，我想更改`options(width=140)`但它不起作用。此外，我无法获得该功能`ht`并由`propmiss`Rprofile 加载。有什么建议么？

此致

# linux - 实现 bash shell getops 代码

> ID：14476527
> 
> 赞同：0
> 
> 时间：2013-01-23T09:41:15.440
> 
> 标签：linux, bash, shell, debian

我得到了创建两段单独代码的帮助：

首先 - 检查是否有争论

```
TYPE=""

while getopts "t:" opt; do
    case $opt in
        t)  TYPE="$OPTARG"
            ;;
    esac
done

if [ -z "$TYPE" ]; then
  echo "No -t. Bye."
  exit 1 # error
else
  echo "Valid -t!"
  exit 0 # error
fi 
```

第二 - 检查 T 标志是否有效（img、image 或 doc）

```
t)
    case $OPTARG in
        img|image|doc)
            TYPE="$OPTARG"
        ;;
        *)
            echo >&2 "Unsupported type..."
            exit 1
        ;;
    esac
;; 
```

在我的一生中，我无法将两者结合起来并让它们发挥作用。我怎样才能让这些脚本发挥得很好，所以我不仅检查参数是否存在，而且检查它是否有效并相应地打印一条消息。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:20:36.947

```
#!/bin/bash
TYPE=""

while getopts "t:" opt; do
    case $opt in
        t)
            case $OPTARG in
                img|image|doc)
                    TYPE="$OPTARG"
                ;;
                *)
                    echo >&2 "Unsupported type..."
                    exit 1
                ;;
            esac
        ;;
    esac
done

if [ -z "$TYPE" ]; then
    echo "No -t. Bye."
    exit 1 # error
else
    echo "Valid -t!"
    exit 0 # error
fi 
```

# rvm - Capistrano：无法加载此类文件 -- rvm/capistrano (LoadError)

> ID：14476529
> 
> 赞同：2
> 
> 时间：2013-01-23T09:41:22.570
> 
> 标签：rvm, capistrano

这真的让我很烦恼，因为互联网上有一点（不是很多）关于运行时出现以下错误`cap deploy:cold`

`cannot load such file -- rvm/capistrano (LoadError)`

解决方案*似乎*是`gem install rvm-capistrano`。其他人都说安装那个 gem 修复了错误，但对我来说它什么也没做。

违规行是：

```
# Add RVM's lib directory to the load path.
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))

# Load RVM's capistrano plugin.    
require "rvm/capistrano"

set :rvm_ruby_string,  ENV['GEM_HOME'].gsub(/.*\//,"")
set :rvm_type, :user
### 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:56:57.260

您也应该删除以下行。

```
$:.unshift(File.expand_path('./lib', ENV['rvm_path'])) 
```

那，安装 rvm-capistrano gem 为我解决了类似的问题。

# node.js - 客户端自动断开连接

> ID：14476530
> 
> 赞同：0
> 
> 时间：2013-01-23T09:41:22.183
> 
> 标签：node.js, socket.io

我正在尝试为我的应用程序实现一个聊天模块并遇到 2 个问题。

第一个是我在套接字中的客户端不断自动断开连接。这就是我正在做的事情。

我的客户在一个动态创建的房间中建立连接，房间的名称是我生成的随机 ID。现在，当客户发送消息时，我打印一个日志以查看房间里有多少人并记录“ 2”在服务器端是正确的。但是当我继续从客户端向服务器发送消息时，它开始显示“1”客户端已连接，一段时间后它显示0个客户端已连接在房间内。人们正在自动断开连接 为什么会发生这种情况？

```
socket.on('SendChat',function(msgobj){      //pass the message to all people in the room.
console.log("Msg from" + msgobj.MsgSenderName + " in RoomID = "+ msgobj.RoomID);
console.log("People in room " +io.sockets.clients(msgobj.RoomID).length);
    socket.broadcast.to(String(msgobj.RoomID)).emit('RecieveChat',msgobj);  
}); 
```

当有人从任何客户端发送消息并且将包含 RoomID 时，在服务器端引发此事件。`msgobj`因此您可以看到我正在记录房间中的人数。

第二个问题是我正在尝试广播从客户端收到的消息。但是没有引发另一个客户端的事件。在上面的代码中，您可以看到我用来向所有其他客户端广播 msg 的最后一行，但是这些客户的事件没有被解雇我不知道为什么。这是我的客户

```
this.Socket.on('RecieveChat',function(obj){
    self.Controller.RecieveChat(obj);
}); 
```

这是我的日志

![在此处输入图像描述](../Images/88fcf7edfbdc45fa260e685e273a79ba.png) 你可以看到`RoomID`是一样的，但是房间里的人要离开了，这个快照只显示`1 people in room`之前房间里有两个人，然后减少到 1，最终减少到 0。

**编辑：**

当我更改`socket.broadcast.to(String(msgobj.RoomID)).emit('RecieveChat',msgobj);`为它时，`socket.broadcast.emit('RecieveChat',msgobj);`它开始工作，但如果我`room`使用该`to`方法在 a 内部发出，则它不起作用。

`Transport end (close timeout)`这似乎是导致问题的原因。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:09:22.923

终于在[这里](https://stackoverflow.com/questions/9564633/node-js-sockets-io-disconnecting-every-25-seconds-heartbeat-related)找到了解决方案，问题出在我使用的 socket.io 版本上。

# process - Runtime.getRuntime().exec JAVA 方法不适用于 tshark -o

> ID：14476531
> 
> 赞同：0
> 
> 时间：2013-01-23T09:41:25.237
> 
> 标签：process, runtime, tshark

我正在尝试使用来自 JAVA 的 tshark 捕获数据包。[请在下面找到]

如果我尝试从终端（Ubuntu）的命令它的工作。但是从JAVA它的抛出错误tshark：

> 无效的 -o 标志 "column.format:""source","

我尝试了以下替代方法[错误消息相同]

```
String[] cmdArray = {"tshark -i any -o column.format:\"source, %s, srcport, %uS\" -f \"port 80 or port 443\""}; 
```

和这个：

```
String[] cmdArray = {"tshark -i any -o column.format:'source, %s, srcport, %uS' -f 'port 80 or port 443'"};

//CommandExc.java

import java.io.*;

import java.util.*;

public class CommandExc
{
public static void main (String args[])
 {

    //This worked Succcessfully
    //String[] cmdArray = {"tshark -D","sudo tshark -D"};

String[] cmdArray = {"tshark -i any -o column.format:\"\"source\", \"%s\",\"srcport\", \"%uS\"\" -f \"port 80 or port 443\""};

    for (String cmd: cmdArray) 
    {
         System.out.println("Executing command : "+cmd);
        try
        {
            Process proc = Runtime.getRuntime().exec(cmd); 
            BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));
            String str = in.readLine();
            while(str != null)
            {
                System.out.println(str);
                //  res += str + "\n";
                str = in.readLine();
            }
            in.close();          

            BufferedReader in2 = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
            String str1 = in2.readLine();
            while(str1 != null)
            {
                System.out.println("Inside getErrorStream "+str1);
                //  res += str + "\n";
                str1 = in2.readLine();
            }
            in2.close();

            proc.waitFor();
            System.out.println("Exit value is : "+proc.exitValue());
            proc.destroy();
        }
        catch(IOException | InterruptedException e)
        {
            System.out.println("Exception on CommandExc class :" + e.toString());
                            e.printStackTrace();
        }
    } //end of for
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:31:00.463

有效。参考[http://ask.wireshark.org/questions/17881/issue-with-tshark-o](http://ask.wireshark.org/questions/17881/issue-with-tshark-o)

Java 应用程序报告无效 -o 标志的问题是因为 Runtime.exec 方法的版本负责将提供的字符串拆分为单独的命令行参数。默认情况下，此方法使用空格、制表符、换行符、回车符和换页符。如您所见，由于 [column.format:\"\"source\",] [\"%s\",] 之间有一个空格字符，因此此版本的 exec 方法将它们视为 2 个不同的参数.

解决方案是使用另一个版本的 Runtime.exec 方法，它将系统命令和参数作为数组参数传入。因此，您可以手动拆分命令行参数并将它们定义为数组参数中的单独字符串，如下所示：

进程 proc = Runtime.getRuntime().exec(new String[] { "tshark", "-i", "any", "-o", "column.format:\"source\", \"%s\ ", \"srcport\", \"%uS\"", "-f", "端口 80 或端口 443"});

# php - Wordpress 错误 - 第一个参数应该是一个有效的回调

> ID：14476537
> 
> 赞同：0
> 
> 时间：2013-01-23T09:41:35.563
> 
> 标签：php, wordpress

完整的错误是 `call_user_func(myannouncer_addcheckbx) [function.call-user-func]:`第一个参数应该是`/xxxx/xxxxx/xxxxxx/blog/wp-admin/includes/template.php`第 927 行中的有效回调

这是我的代码

```
add_action( 'add_meta_boxes', 'myannouncercheckboxes' );
function myannouncercheckboxes() {

    add_meta_box('annoncerid', 'WP Annoncer Post', 'myannouncer_addcheckbx', 'post');

} 
```

// 显示元框

```
function myannouncer_addcheckbx($post) {
    echo 'Set This Post To Be Accessed By Wp Annoncer Customers <input type="checkbox" name="yesaddposttoannoncer" value="yes" /> <br />';
} 
```

请告诉我为什么会发生这种情况......我什至试图删除 $post `function myannouncer_addcheckbx($post)`仍然得到错误。

我错过了什么？

# url-rewriting - IIS 7.5 URL 重写编码

> ID：14476542
> 
> 赞同：7
> 
> 时间：2013-01-23T09:41:51.320
> 
> 标签：url-rewriting, iis-7.5, azure-web-app-service

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T22:05:42.907

You should use the internal `{UrlEncode:{}}` function to properly encode the characters that are invalid in the URL (e.g. UTF-8 characters). So replace the URL part with: `url="?q={UrlEncode:{R:1}}"`.

# php - 使用 PHP 插入 MySQL 数据库时的空白数据

> ID：14476545
> 
> 赞同：0
> 
> 时间：2013-01-23T09:41:54.833
> 
> 标签：php, mysql

我制作了一个表格来在我的项目中插入和修改类别。当我点击“提交”时，我将记录提交到数据库中，但它显示为空！如果我去数据库字段并自己编写文本，它会在 MySQL 中看起来很好，并且“????” 在浏览器中！

这是我写的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<body>

 <?php
$con = mysql_connect("localhost","user","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("mydb", $con);

$sql="INSERT INTO categories (name, parent_id,description)
VALUES
('$_POST[name]','$_POST[parent_id]','$_POST[description]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con)
?>

<form action="ins.php" method="post">
category: <input type="text" name="name" /><br><br>
parent: <input type="text" name="parent_id" /><br><br>
description: <input type="text" name="description" /><br><br>

<input type="submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:47:23.323

您必须在 SQL 请求中引用（使用“）在您的索引名称周围，因为 $_POST 是一个数组：

```
$sql="INSERT INTO categories (name, parent_id,description)
VALUES
('".$_POST["name"]."','".$_POST["parent_id"]."','".$_POST["description"]."')"; 
```

但一般来说，请不要直接相信用户向您的脚本发布的内容以避免 SQL 注入。您可以使用更好更安全的 mysqli::query ：

[mysqli](http://php.net/manual/fr/mysqli.query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T19:23:34.410

首先清理您的用户输入。

如果您之后想要使用数组中的值而不使用其他所有人提到的所有连接，请在数组访问器周围使用 {}。

```
$sql="INSERT INTO categories (name, parent_id, description)
VALUES
('{$_POST['name']}','{$_POST['parent_id']}','{$_POST['description']}')"; 
```

清理例如 $_POST 做这样的事情是一个好的开始。这是我的一些旧代码。正如其他人所写，改用 mysqli

```
function clean_array($t_array)
{
    foreach($t_array as $key=>$value)
        $array[$key] = mysql_real_escape_string( trim($value) );

    return $t_array;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:02:00.233

这里有很多问题。

*   `$_POST[name]`应该`$_POST['name']`
*   即使未提交表单，您的查询也会运行。
*   您正在使用已弃用的`mysql_*`功能。使用**PDO**或**mysqli**
*   您的代码容易受到**sql 注入的影响**

有了这一切，这就是你需要做的。

只是为了验证表单已提交，使用

```
if( !empty($_POST['name']) && 
!empty($_POST['parent_id']) && 
!empty($_POST['description']) ) 
```

（`isset`如果允许空值，则使用。）

然后运行查询。

* * *

在 PDO 中，代码将如下所示 ->

```
<?php
// configuration
$dbtype     = "mysql";
$dbhost             = "localhost";
$dbname     = "mydb";
$dbuser     = "user";
$dbpass     = "pass";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// query
$sql = "INSERT INTO categories (name, parent_id,description)
        VALUES
       (?,?,?)";
$q = $conn->prepare($sql);
$q->execute(array($_POST[name],$_POST[parent_id],$_POST[description]));

?> 
```

这只是一个开始。您可以使用`try`和`catch`阻塞来捕获异常。

在运行查询之前，检查表单是否由`!empty()`或`isset()`如上所述提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:59:19.950

尝试在您的语句中使用双引号，如下所示：

$sql="INSERT INTO categories (name, parent_id,description) VALUES ("'.$_POST['name'].'","'.$_POST['parent_id'].'","'.$_POST[ '描述']。'”）”;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:46:58.720

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<body>

 <?php
 if ($_POST['action']=="doformpost") {
    //only do DB insert if form is actually posted

    $con = mysql_connect("localhost","user","pass");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("mydb", $con);

    $sql="INSERT INTO categories (name, parent_id,description)
    VALUES
    ('".$_POST['name']."','".$_POST['parent_id']."','".$_POST['description']."')";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";

    mysql_close($con)
}
?>

<form action="ins.php" method="post">
<input type="hidden" name="action" id="action" value="doformpost" />
category: <input type="text" name="name" /><br><br>
parent: <input type="text" name="parent_id" /><br><br>
description: <input type="text" name="description" /><br><br>

<input type="submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T09:48:38.340

```
$sql="INSERT INTO categories (name, parent_id,description)
VALUES
("'.$_POST['name'].'","'.$_POST['parent_id'].'","'.$_POST['description'].'")"; 
```

在数据库中插入值时请提供引号

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-23T09:50:47.013

**不要忘记安全！**

```
$sql="INSERT INTO categories (name, parent_id,description)
VALUES
('".mysql_real_escape_string($_POST['name'])."','".intval($_POST['parent_id'])."','".mysql_real_escape_string($_POST['description'])."')"; 
```

而且我认为编码有问题。

在插入数据之前启动查询：

```
$sql = 'set names `utf-8`'; (for example) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-23T11:19:01.950

使用下面的插入查询插入数据，我相信它一定会对你有所帮助。

```
$sql="INSERT INTO categories (name,parent_id,description)
VALUES
('".$_POST['name']."','".$_POST['parent_id']."','".$_POST['description']."')"; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-23T09:48:31.663

将此语句用于您的代码

```
if( isset($_POST['name']) && isset($_POST['parent_id']) && isset($_POST['description']) )

//your insert query 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-12-15T17:04:58.620

> 尝试这个

```
<?php
if(isset($_POST['submit'])) {
    $con = mysql_connect("localhost","user","pass");
    if (!$con){
      die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("mydb", $con);

    $sql="INSERT INTO categories (name, parent_id,description) VALUES
    ('".$_POST['name']."','".$_POST['parent_id']."','".$_POST['description']."')";

    if (!mysql_query($sql,$con)) {
      die('Error: ' . mysql_error());
    } else {
        echo "1 record added";
    }
    mysql_close($con);
}
?>
<html>
<body>
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
category: <input type="text" name="name" /><br><br>
parent: <input type="text" name="parent_id" /><br><br>
description: <input type="text" name="description" /><br><br>
<input type="submit"name="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-08-12T12:59:26.293

我也面临同样的问题。

像这样继续您的插入查询，这对我有帮助。

```
$email_id = $_POST['email_id'];
$device_id = $_POST['device_id'];
***For My Sqli***
if(!empty($email_id ))
    {
        $result_insert = mysqli_query($db_conn,"INSERT INTO tableName (user_email, user_device_id,last_updated_by) VALUES('".$email_id."', '".$device_id."', '".$email_id."') ");

        if(mysqli_affected_rows($db_conn)>0)
        {
            $response["success"] = 1;
            $response["message"] = "Successfully Inserted";
        }
        else
        {
            $response["success"] = 0;
            $response["message"] = "Problem in Inserting";
        }
    }
    else
    {

        $response["success"] = 4;
        $response["message"] = "Email id cannot be Blank";
    }
}
///////////////////////////////////////////////////////////////////////////////
 **For My Sql**
if(!empty($email_id ))
    {
        $result_insert = mysql_query("INSERT INTO tableName (user_email, user_device_id,last_updated_by) VALUES('".$email_id."', '".$device_id."', '".$email_id."') ");

        if(mysql_affected_rows()>0)
        {
            $response["success"] = 1;
            $response["message"] = "Successfully Inserted";
        }
        else
        {
            $response["success"] = 0;
            $response["message"] = "Problem in Inserting";
        }
    }
    else
    {

        $response["success"] = 4;
        $response["message"] = "Email id cannot be Blank";
    }
} 
```

注意：这里我只检查了电子邮件。

# java - 使用哪种数据结构来保持列表唯一且插入顺序完整

> ID：14476548
> 
> 赞同：5
> 
> 时间：2013-01-23T09:42:06.657
> 
> 标签：java, data-structures, collections

我需要将对象添加到列表（具有`List`语义），同时保持列表中的所有对象唯一。我认为`LinkedHashSet`可以，但“重新插入”子句打破了这一点：

```
LinkedHashSet<String>list = new LinkedHashSet<String>();
list.add("a");
list.add("b");
list.add("c");
list.add("a");
list.add("a");
System.out.println (list); 
```

上面的输出是：`[a, b, c]`，不是`[b, c, a]`我想要的。

Java中是否有任何此类数据结构可以处理这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T09:53:52.300

尝试

```
 Set<String> set = Collections.newSetFromMap(new LinkedHashMap<String, Boolean>(16, 0.75f, true));
    set.add("a");
    set.add("b");
    set.add("c");
    set.add("a");
    set.add("a");
    System.out.println(set); 
```

输出

```
[b, c, a] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:46:20.570

我不认为有一个开箱即用的数据结构可以做你想要的，因为它看起来有点奇怪。我建议您围绕 LinkedHashSet 创建一个包装器，当您尝试重新插入它并再次插入它时，它会弹出该元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:14:51.027

实际上，JDK 库提供了一个开箱即用的数据结构。如果您查看此`LinkedHashMap`构造函数：

```
/**
 * Constructs an empty <tt>LinkedHashMap</tt> instance with the
 * specified initial capacity, load factor and ordering mode.
 *
 * @param  initialCapacity the initial capacity
 * @param  loadFactor      the load factor
 * @param  accessOrder     the ordering mode - <tt>true</tt> for
 *         access-order, <tt>false</tt> for insertion-order
 * @throws IllegalArgumentException if the initial capacity is negative
 *         or the load factor is nonpositive
 */
public LinkedHashMap(int initialCapacity,
                     float loadFactor,
                     boolean accessOrder) {
    super(initialCapacity, loadFactor);
    this.accessOrder = accessOrder;
} 
```

有一个额外的参数`accessOrder`。基于此，新添加的对象将被移动到列表的末尾 ( `accessOrder - true`) 或保留在旧位置 ( `accessOrder - false`)。

为了创建`Set`具有这些特性的 a，您需要使用以下工厂方法`java.util.Collections`：`newSetFromMap(LinkedHashMap(initialCapacity, loadFactor, accessOrder))`

请记住，该`accessOrder`属性负责与给定元素的**所有**交互 - 如果您调用它`get`，`HashMap`它也会重新排序（无论如何这不应该影响您，因为`Set`接口不会`get`在 Wrapped 上公开方法`HashMap`，只是说） .

# c# - 面板动画

> ID：14476549
> 
> 赞同：1
> 
> 时间：2013-01-23T09:42:10.430
> 
> 标签：c#, windows-phone-7, animation, windows-phone-8

我正在尝试在我的 windows phone 项目上执行滑入/滑出动画。我试图创建的效果是用户按下按钮，按钮列表（面板）从侧面滑入，当前页面滑出屏幕。

看看[这里的一个很好的例子](http://sport.be.msn.com/app/images/screens/screenshot_i2.jpg)（面板完全滑入，所以活动页面的一小部分仍然可见）

现在我认为动画并不难（但欢迎任何有关如何创建动画的提示），但我想知道如何添加微妙的阴影效果？如果您查看图像，您会注意到它就像面板位于活动屏幕下方，因为阴影......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-12T09:35:19.450

我可能有一个想法。

- 创建一个计时器，对于您执行的每个滴答声：

`int x = pnl.Location.X; int y = pnl.Location.Y; pnl.Location = new Point(x + 1, y);`

-然后您应该创建一个`if`以在面板位于正确位置时停止计时器，例如：

`if (x == 20) { tmrMove.Stop(); }`

# vb.net - 如何在 datagridview 单元格中添加图像和文本

> ID：14476558
> 
> 赞同：3
> 
> 时间：2013-01-23T09:42:51.900
> 
> 标签：vb.net, image, datagridview

实际上我想根据我的要求自定义 Datagridview 单元格。我必须将文本和图像添加到特定列的 Datagridview 行。见下图

![在此处输入图像描述](../Images/393dede2e0a9caf4f481dc13d2132db4.png)

谁能帮我举个例子？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:45:51.313

尝试这个

```
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    DataGridView1.ColumnCount = 3
    DataGridView1.Columns(0).Name = "Product ID"
    DataGridView1.Columns(1).Name = "Product Name"
    DataGridView1.Columns(2).Name = "Product_Price"

    Dim row As String() = New String() {"1", "Product 1", "1000"}
    DataGridView1.Rows.Add(row)
    row = New String() {"2", "Product 2", "2000"}
    DataGridView1.Rows.Add(row)
    row = New String() {"3", "Product 3", "3000"}
    DataGridView1.Rows.Add(row)
    row = New String() {"4", "Product 4", "4000"}
    DataGridView1.Rows.Add(row)

    Dim img As New DataGridViewImageColumn()
    Dim inImg As Image = Image.FromFile("Image Path")
    img.Image = inImg
    DataGridView1.Columns.Add(img)
    img.HeaderText = "Image"
    img.Name = "img"

    End Sub
  End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-24T08:57:15.583

```
 Dim dt As New DataTable

        Dim imageColumn As New DataColumn
        imageColumn.ColumnName = "ActualImage"
        imageColumn.DataType = GetType(System.Drawing.Image)
        dt.Columns.Add(imageColumn)

        For Each row As DataRow In dt.Rows
            row("ActualImage") = System.Drawing.Image.FromFile(row("Image_Path"))
        Next

        dt.AcceptChanges()

        Dim dgvImageColumn As New DataGridViewImageColumn
        dgvImageColumn.DataPropertyName = "ActualImage"
        dgvImageColumn.Name = "ActualImage"
        dgvImageColumn.ImageLayout = DataGridViewImageCellLayout.Zoom
        DataGridView1.Columns.Add(dgvImageColumn)

        DataGridView1.DataSource = dt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T03:27:53.160

您可以动态地将 DataGridView 单元格转换`DataGridViewTextBoxCell()`为该列并将文本值显示到该列。下面是代码示例，可以为您提供一些基本概念。

```
Private Sub button1_Click(sender As Object, e As EventArgs)
    dataGridView1.Rows(3).Cells("ImageCol") = New DataGridViewTextBoxCell()
    dataGridView1.Rows(3).Cells("ImageCol").Value = "Hello.."
End Sub 
```

# c# - Windows Phone 8 Web Post 在回调完成后返回布尔值？

> ID：14476566
> 
> 赞同：1
> 
> 时间：2013-01-23T09:43:24.330
> 
> 标签：c#, webclient, windows-phone

我正在尝试在 windows phone 8 中制作一个应用程序，并通过将其编码为简单的类来轻松扩展或更改。我想使用执行 HTTP POST 以将用户登录到服务的 webclient 进行简单的 web 调用。这是我到目前为止的流程：

*   用户输入用户名和 api 详细信息，或者从以前保存的详细信息中调用它们。
*   WebClient 对 Web 服务进行 POST 并接收包含用户信息等的 XML 响应。
*   设置后执行回调`WebClient.UploadStringCompleted += new UploadStringCompletedEventHandler(name)`
*   用户信息被处理并用它完成。

由于各种原因，主要是希望将代码写入类并最终将代码作为免费 SDK 发布给其他开发人员，我希望流程看起来像这样：

*   用户输入详细信息或从保存的详细信息中调用。
*   类中的函数调用类似于`if(class.Authenticate(user,apikey)){logged in stuff};`返回`boolean`值甚至更好的整数值，因此我可以轻松处理来自 Web 服务的错​​误。

我尝试过的任何事情都无法完成这项工作，我无法弄清楚如何使其与 async 和 await 一起工作，因为 webclients 似乎只是在他们自己的线程上执行并且不会为我保留一个直到回调是完全的。

我在某处找到了一个自定义 webclient 类，但它只执行 GET 请求，这不足以满足我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:13:53.170

你不想这样做。

为此，您需要阻塞执行线程，直到服务器响应：
- 这可能需要很长时间。
- 如果在 UI 线程上，这将阻止用户与 UI 交互。
- 如果没有连接或连接速度很慢怎么办

这就是`WebClient`没有同步调用方式的原因。

有一些方法可以使执行看起来同步，但你会从学习使用框架并理解它为什么希望你以特定方式工作以及为什么这适用于偶尔连接的设备中获得更多。

您还可以通过发出 Awaitable 请求使此代码看起来是同步的。[在http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)上查看更多信息

# javascript - 通过 Javascript 计算 window.localStorage.getItem

> ID：14476574
> 
> 赞同：2
> 
> 时间：2013-01-23T09:43:38.073
> 
> 标签：javascript, html, local-storage

我尝试在 localStorage 中输入一个数字，但 ++ 没有其他方式吗？

```
window.localStorage.setItem('run','++') 
```

这是完整的代码

```
<script type="text/javascript">
    if(window.localStorage.getItem('run')==null){

        window.localStorage.setItem('run','1')
    }
    else if(window.localStorage.getItem('run')==1){

        window.localStorage.setItem('run','++')
        window.location = "index_aerosoft.html";
    }
    else if(window.localStorage.getItem('run')==25){

        alert("hey 25times");
        window.localStorage.setItem('run','null')
    };
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:46:23.560

`localStorage`只包含字符串。

如果要在其中保留一个计数器，则必须对其进行解析：

```
var c = parseInt(localStorage['run']||'0', 10); // read, with 0 as default value
c++; // increment
localStorage['run'] = c; // store the incremented value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:51:47.560

本地存储只存储字符串。而且它不能将参数解析为表达式来动态增加一个值，您必须手动执行此操作。

因此，您首先需要获取该值并将其解析为整数：

```
i = parseInt(window.localStorage.getItem('run')); 
```

然后您可以存储增量值：

```
window.localStorage.setItem('run',(i + 1)); 
```

注意：根据您的情况

```
else if(window.localStorage.getItem('run')==1){ 
```

您检查 a`1`是否已存储，我想您缩进检查该值是否*小于 25*？如果不是，则增加该值是没有意义的，因为以下语句将始终存储 2...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:15:57.383

> if(window.localStorage.getItem('run')==null){
> 
> ```
>  window.localStorage.setItem('run','1');
>         alert("First start");
>     }else if(window.localStorage.getItem('run')==10){
> 
>         window.localStorage.setItem('run','1');
>     }else{
> 
>         var run = window.localStorage.getItem('run');
>         var irun;
>         irun = (parseInt(run) + 1);
>         window.localStorage.setItem('run',irun.toString());
>         window.location = "index_xyz.html";
>         alert(window.localStorage.getItem('run'));
>     }
> 
> </script> 
> ```

# magento - SEO：类别和产品路径 (URL) - Magento

> ID：14476579
> 
> 赞同：4
> 
> 时间：2013-01-23T09:43:59.397
> 
> 标签：magento, url, seo

我在 magento 中有一两个类别，但这些类别并不总是出现在 URL 中。

**例子：**

当我导航到产品页面时，路径如下所示：

```
.../cat/subcat/product.html 
```

但是，当我直接从首页（最新、精选）单击产品时，URL 结构如下所示：

```
.../product.html 
```

我的第一个想法是停用，该类别显示在 URL 中（后端 seo 选项卡）。

好吧，我正在尝试去`seo`商店，对这个解决方案不太满意。我希望始终有一个清晰的结构化 URL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:30:21.357

如果您的网站结构复杂，就像您提到的那样，您将有单个产品的多个 URL。这种情况可能会损害您网站对客户的个人资料，但对搜索引擎来说不会有任何问题。最新版本的 Magento 为产品和类别提供规范的 URL 支持。您可以访问下面的配置

系统 -> 配置 -> 目录 -> 搜索引擎优化 -> 对产品使用 Canonical Like Meta Tag

如果您打算彻底消除这种情况，您可以通过 403 状态码创建 URL 写入您想要的 URL，这也会告诉搜索引擎内容已永久迁移到目标 URL，用户只能访问该 URL你想呈现给他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:28:41.097

您遇到的问题是一个产品可以属于多个类别，那么在这种情况下应该使用哪个类别？根据您输出最新、特色等的方式。您可以改用静态块并简单地手动放入产品，然后您可以链接到您想要的类别中的产品。这是一个手动过程，但无需自定义工作即可完成您想做的事情。干杯亚当

# wpf - 绑定 ComboBox 和 ObservableCollection 在 wpf 中

> ID：14476584
> 
> 赞同：0
> 
> 时间：2013-01-23T09:44:24.717
> 
> 标签：wpf, xaml, observablecollection, caliburn.micro

在我的 OpenViewModel 我收集数据：

```
private ObservableCollection<KeyValue> availableData;

public ObservableCollection<KeyValue> AvailableDatas
{
    get { return availableData; }
    set
    {
        if (value != availableData)
        {
            availableData= value;
            NotifyOfPropertyChange("AvailableDatas");
        }
    }
} 
```

收集数据的方法：

```
public ObservableCollection<KeyValue> CollectData()
{
    ConnectorClient client = null;
    try
    {
        client = webservice.GetClient();
        AvailableDatas = client.GetDatas();

        client.Close();
    }
    catch (Exception ex)
    {
        webservice.HandleException(ex, client);
    }
    return AvailableDatas;
} 
```

如何在 wpf 中调用方法 CollectData 并填充我的组合框？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:50:29.387

您可能只是在第一次`AvailableDatas`访问该属性时调用该方法（例如，从 XAML 中的绑定）：

```
private ObservableCollection<KeyValue> availableData;

public ObservableCollection<KeyValue> AvailableDatas
{
    get
    {
        if (availableData == null)
        {
            availableData = CollectData();
        }

        return availableData;
    }

    set
    {
        if (value != availableData)
        {
            availableData = value;
            NotifyOfPropertyChange("AvailableDatas");
        }
    }
} 
```

然后，您应该以一种不设置属性的方式更改 CollectData 方法：

```
public ObservableCollection<KeyValue> CollectData()
{
    ConnectorClient client = null;
    ObservableCollection<KeyValue> data = null;

    try
    {
        client = webservice.GetClient();
        data = client.GetDatas();
        client.Close();
    }
    catch (Exception ex)
    {
        webservice.HandleException(ex, client);
    }

    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:16:36.910

`OnActivated()`假设您正在使用实现并在其中加载数据，您可以覆盖该事件，或者如果您想自己滚动（或在属性访问器中，如某人已经说过的）`IScreen`，则只需在构造函数或自定义方法中执行它。`Initialise`

如果您想为用户提供一些视觉上下文并更好地与 CM 操作结合，您也可以使用协程

这里有一个`Loader`类的一个很好的简单实现，它有助于为用户提供视觉上下文：

[https://caliburnmicro.codeplex.com/wikipage?title=IResult%20and%20Coroutines&referringTitle=Documentation](https://caliburnmicro.codeplex.com/wikipage?title=IResult%20and%20Coroutines&referringTitle=Documentation)

这会在视觉树中搜索`BusyIndicator`控件并在内容加载时激活它，例如...

```
public class SomeViewModel : Screen
{
    protected override void OnActivate()
    {
        RefreshData();
    }

    public void RefreshData()
    {
        Coroutine.BeginExecute(LoadData(), new ActionExecutionContext() { Target = this });
    }

    public IEnumerable<IResult> LoadData()
    {
        yield return Loader.Show("Loading Data...");
        yield return new LoadSomeDataRoutine(client.GetDatas);
        yield return Loader.Hide();
    }
} 
```

之所以有`RefreshData`方法，是因为这也可以让你绑定 CM 动作，让协程可以抓取更多的上下文信息。

显然，您不必担心这在 Silverlight 中带来的 async->sync 好处，因为您使用的是 WPF（但它仍然适用于异步 Web 服务调用），但是它仍然有很多好处，它还可以帮助您编写可重用的例程它成为您的应用程序框架的一部分（例如，封装在`IResult`实现中的某种级别的错误处理/日志记录等）

您还提到了填充组合框...在 CM 中您需要做的就是在控件上放置一个组合框，并将其属性设置`Name`为 VM 上的属性名称：

```
public class SomeViewModel : Screen
{
    public ObservableCollection<MyObject> MyProperty { //blah blah...  }
}

<UserControl .... blah>
    <ComboBox x:Name="MyProperty" />
</UserControl> 
```

这将用项目填充组合框。您仍然需要为`SelectedItem`/设置绑定`SelectedValue`

我假设您已经知道这一点 - 如果不是 CM 有一些不错的文档：

[https://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation](https://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation)

# c++ - 从文件中提取特定数据

> ID：14476586
> 
> 赞同：0
> 
> 时间：2013-01-23T09:44:33.620
> 
> 标签：c++, parsing, include, getline

我有一个文件（作为文本），我应该从中提取所有包含的文件名。实现应该在`C++` 我想做的是逐行读取文件行（`getline`）检查行是否从开始`#include`- 我该怎么做？（可能有前导空格）然后提取文件名 - 字符串在“”之间 - 我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:49:54.503

首先，一个包含可以放置在两者之间`<>`或之间，`""`因此您必须检查两者。

下一个 - 做你尝试的最好方法是使用正则表达式。如果您正在使用`c++11`它们，它们将成为标准的一部分，您应该很高兴。如果不是这种情况，例如可以尝试[boost::regex](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/index.html)。

如果使用正则表达式不是一个选项，您将不得不实现自己的解析，但这很容易出错，并且很可能您会错过一些奇怪的边缘情况。如果必须的话，我会通过逐行遍历文件来实现这样的解析。比我检查该行是否包含`#include`子字符串并验证它之前是否只有空格。如果该行**确实**具有提到的子字符串，我将遍历该行的其余部分以解析`<>`or之间的部分`""`。

# javascript - jQuery 范围滑块在 IE8 中给出“无效参数”

> ID：14476587
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:44:55.590
> 
> 标签：javascript, jquery, internet-explorer, slider

出于某种原因，IE8 决定在运行以下代码时为此[页面提供“无效参数”](http://www.posterlion.com/#/search/?searchKeyword=scarface&priceFrom=0)

```
$( "#slider-range" ).slider({
    range: true,
    min: 0,
    step:5,
    max: 50,
    values: [ $('#fro').val(), $('#to').val() ],
    slide: function( event, ui ) {
        $( "#fro" ).val(ui.values[0]);
        $( "#to" ).val(ui.values[1]);
        $( "#asdf" ).html( window.currencySymbol + ui.values[0] + " - " + window.currencySymbol + ui.values[1]);    
    },
    stop:function( event, ui ) {
        $.address.parameter('priceFrom', ui.values[0]);
        $.address.parameter('priceTo', ui.values[1]);
    }
}); 
```

我找不到任何有关原因的信息。它出什么问题了？在所有其他浏览器中，像往常一样没有问题。只有 IE8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:17:17.573

将浏览器模式和文档模式更改为 IE9/IE9 标准并检查是否仍然无法正常工作（在 IE 中按 F12）如果工作仅对 IE9+ 可用，否则可能是 IE 检查控制台日志中的错误或某事，并执行 brealpoints 以查看到底是怎么回事

# php - 使用 Yii Criteria 时如何订购从 SPHINX 接收的数据？

> ID：14476588
> 
> 赞同：1
> 
> 时间：2013-01-23T09:45:00.207
> 
> 标签：php, sql, yii, sphinx, criteria

当`SPHINX`返回一个 id 列表时，我看不到如何使用标准对我的最终结果进行排序。

我有一个包含 id 的数组：

```
$a = array(1,2,3,4,5); 
```

这个 id 数组是由`SPHINX`搜索引擎作为结果给出的。

我想使用这个数组并通过 id 提取所需的数据作为 PK，但我必须像这样对结果进行排序：

有视频和照片的用户在所有只有照片的用户之前，有照片的用户在列表中，然后那些有照片的用户应该按照他们最近登录的时间排序，最近的登录在列表的顶部。在所有有照片的用户之后，其余的用户应该在那里，最近登录的用户最先登录。

我试过这个，没有订单字段，因为我不知道如何编写代码；

```
$criteria = new CDbCriteria();
$criteria->addInCondition('id', $a);
$criteria->order = "FIELD(id, " . join(',', $a) . ")";

$dataProvider = new CActiveDataProvider('user', array(
                    'criteria' => $criteria,
                    'pagination' => array(
                    'pageSize' => $this->pageSize,
                    ),
                )); 
```

有人尝试过这样的事情吗？或其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:35:38.340

假设您为视频和照片设置了关系，您可以尝试以下操作：

```
$criteria = new CDbCriteria;
$criteria->order = '
    IF(videos.id IS NOT NULL AND photos.id IS NOT NULL, 1, 0) DESC,
    IF(photos.id IS NOT NULL, t.lastvisit, 0) DESC,
    IF(videos.id IS NULL AND photos.id IS NULL, t.lastvisit, 0) DESC';
$criteria->group = 't.id';

$users = User::model()->with(array('photos', 'videos')))->findAllByPk($c, $criteria); 

$dataProvider = new CArrayDataProvider($users, array(
    'pagination' => array(
        'pageSize' => $this->pageSize,
    ),
)); 
```

确保将 lastvisit 更改为用于存储他们上次登录时间的字段。

我也在使用 Yii + Sphinx 并拥有带有照片和视频关系的用户模型，因此我能够对此进行测试并且它对我有用，但有可能我很幸运并且我的数据自行排序。不过，我认为这会给你一个好的开始。

[编辑] 另外，为了优化这一点，我建议在照片和视频模型中专门为 Sphinx 创建一个[范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)，它只从照片和视频表中选择 id。然后使用它你会做：

```
User::model()->with(array('photos:sphinx', 'videos:sphinx')))->findAllByPk($c, $criteria); 
```

# android - 捕获图像时Uri路径为空？

> ID：14476590
> 
> 赞同：1
> 
> 时间：2013-01-23T09:45:04.733
> 
> 标签：android, image, camera

Uri 路径是`null`? 如何获取图像 URI 路径？我的代码是：

```
ContentValues values = new ContentValues();
values.put(MediaStore.Images.Media.TITLE, "Image File name");
mCapturedImageURI = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
Intent intentPicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intentPicture.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);
startActivityForResult(intentPicture,CAMERA_PIC_REQUEST); 
```

OnActivityResult 方法

```
if (requestCode == CAMERA_PIC_REQUEST && resultCode == RESULT_OK) {
 String videoPath = getRealPathFromURI(mCapturedImageURI); 
```

}

但仍然是图像路径`null`（空指针异常）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:40:29.957

您需要先初始化 mCapturedImageURI，然后才能使用它。检查返回到 onActivityResult 的意图：

```
@Override  
public void onActivityResult(int reqCode, int resultCode, Intent data)
{  
  // data will contain your URI
} 
```

# javascript - 页面刷新后导航上的活动状态

> ID：14476591
> 
> 赞同：0
> 
> 时间：2013-01-23T09:45:13.530
> 
> 标签：javascript, jquery, html, nav

这是我目前使用的代码，用于在您单击其中一个导航并重定向页面后向项目添加活动状态。

我想知道是否有另一种方法可以做到这一点，因为它只能在我的本地机器上工作，而不是在服务器上。

```
 $(document).ready(function () {         
        current_page = document.location.href            
        if (current_page.match(/home/)) {
            $("ul#ulMenuNav li:eq(0) a").addClass('navActive');
        } else if (current_page.match(/about/)) {
            $("ul#ulMenuNav li:eq(1) a").addClass('navActive');
        } else if (current_page.match(/location/)) {
            $("ul#ulMenuNav li:eq(2) a").addClass('navActive');
        } else if (current_page.match(/staff/)) {
            $("ul#ulMenuNav li:eq(3) a").addClass('navActive');
        } else if (current_page.match(/contact/)) {
            $("ul#ulMenuNav li:eq(4) a").addClass('navActive');
        } else { 
            $("ul#ulMenuNav li a").removeClass('navActive');
        };

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:09:16.633

你可以试试这个：http: [//jsfiddle.net/jaiprakashsah/thrDq/](http://jsfiddle.net/jaiprakashsah/thrDq/)

```
var url = document.location.href;
var str = url.substr(0, url.lastIndexOf('/'));
var nUrl = str.substr(str.lastIndexOf('/')+1);

$('ul#ulMenuNav li a:contains('+nUrl+')').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:58:22.100

怎么样：

```
$(document).ready(function () {         
  var current_page = document.location.href;

  $('ul#ulMenuNav li a').removeClass('navActive');
  $('ul#ulMenuNav li a[href*="'+current_page+'"]').addClass('navActive');

}); 
```

# sql - 在sql中选择中间行

> ID：14476598
> 
> 赞同：1
> 
> 时间：2013-01-23T09:45:29.333
> 
> 标签：sql, linq-to-sql, datagrid

我的 SQLServer 数据库中有一个表，其中包含近 10 万条记录，还有一个 Web 应用程序，我想在其中显示这些行的分页 gridView 表示。显然我应该过滤这些行并将它们的一小部分返回给客户端（因为 Ajax 在 Web 上的性能）。

这是我的主要问题。选择中间行的最佳方法是什么？例如，如何选择从 #50000 到 #50010 的行？有没有一种方法`select top 10`可以`select bottom 10`从表格行的中间选择行。

我在 .NET MVC Web 应用程序中使用 linq2sql，也可以编写 SQL 存储过程。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T09:53:23.463

不确定这个，但无论如何

```
SELECT *
FROM (SELECT ROW_NUMBER() OVER(ORDER BY colm) RowNumr, colm FROM table) t
WHERE RowNumr BETWEEN 50000 AND 50010 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T09:54:50.957

在`Linq2Sql`这并不难。您可以使用：

```
dataContext.GetTable()
    .Skip(50000)
    .Take(10)
    .ToList(); 
```

[Scott Guthrie 有一篇](http://weblogs.asp.net/scottgu/archive/2007/06/29/linq-to-sql-part-3-querying-our-database.aspx)关于这个问题的帖子，其中有更多解释。并且`Linq2Sql`实际上会使用`ROW_NUMBER()`.

一些小提示，你的表达顺序很重要：

*   `.Where()`
*   `.Select()`
*   `.OrderBy()`
*   `.Skip()`
*   `.Take()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:50:20.197

[http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

查看此链接，您可以使用 rownumber 根据排序顺序获取所需的行。只需添加一个 where 子句，其中行号在您的分页限制之间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T06:10:58.627

试试这个：

```
select * 
from(select table_name.*,rownum as rn from table_name order by column desc) table_name
where rn between 5000 and 5010; 
```

# iphone - 哪些 iPhone 应用程序可以在 iPad 2 上以缩放模式运行？

> ID：14476602
> 
> 赞同：0
> 
> 时间：2013-01-23T09:45:48.823
> 
> 标签：iphone, ios, compatibility, retina-display, ipad-2

我没有 iPad 2，所以无法测试。假设我开发了一个只使用视网膜图像的应用程序，因为我让它只兼容 iPhone 4 以上。它们会在 iPad 2 上以缩放模式运行吗？从技术上讲，iPad 2 非视网膜显示屏的分辨率要大于 iPhone 4 视网膜显示屏。但我不确定它会如何显示。有人测试过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:58:13.387

它看起来与在 iPad 上运行的非视网膜 iPhone 应用程序相同，即看起来像屏幕中间的 iPhone。“视网膜”像素被下采样到较低的分辨率，如果你点击“2x”按钮，下采样像素的大小只会加倍以适应屏幕，尽管理论上它们可以与 iPad 的 1-1 映射像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:54:28.707

该应用程序将在信箱中运行，缩放大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T09:50:52.350

我目前正在开发一个 HTML5 应用程序，并且我使用 CSS 媒体查询来定位不同的设备，这是我的代码示例：-

```
 <!-- iPhone -->
    <link rel="apple-touch-icon" media="screen 
    and (resolution: 163dpi)" href="~/content/images/iOS-57.png" />

    <!-- iPad (portrait) --><!-- iPad (landscape) -->
    <link rel="apple-touch-icon" sizes="72x72" href="~/content/images/iOS-72.png" />

    <!-- iPad (Retina, portrait) --><!-- iPad (Retina, landscape) -->
    <link rel="apple-touch-icon" sizes="144x144" href="~/content/images/iOS-144.png" />

    <!-- iPhone (Retina) -->
    <link rel="apple-touch-icon" sizes="114x114" href="~/content/images/iOS-114.png" />

    <!-- iPhone -->
    <link href="~/content/images/apple-touch-startup-image-320x460.png"
          media="(device-width: 320px) and (device-height: 480px)
             and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <!-- iPhone (Retina) -->
    <link href="~/content/images/apple-touch-startup-image-640x920.png"
          media="(device-width: 320px) and (device-height: 480px)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <!-- iPhone 5 -->
    <link href="~/content/images/apple-touch-startup-image-640x1096.png"
          media="(device-width: 320px) and (device-height: 568px)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <!-- iPad (portrait) -->
    <link href="~/content/images/apple-touch-startup-image-768x1004.png"
          media="(device-width: 768px) and (device-height: 1024px)
             and (orientation: portrait)
             and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <!-- iPad (landscape) -->
    <link href="~/content/images/apple-touch-startup-image-748x1024.png"
          media="(device-width: 768px) and (device-height: 1024px)
             and (orientation: landscape)
             and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">
    <!-- iPad (Retina, portrait) -->
    <link href="~/content/images/apple-touch-startup-image-1536x2008.png"
          media="(device-width: 768px) and (device-height: 1024px)
             and (orientation: portrait)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">
    <!-- iPad (Retina, landscape) -->
    <link href="~/content/images/apple-touch-startup-image-1496x2048.png"
          media="(device-width: 768px) and (device-height: 1024px)
             and (orientation: landscape)
             and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T09:53:53.620

如果您希望您的应用程序看起来像 ipad 应用程序，您需要在目标配置中添加通用属性。如果目标只是 Iphone，它将始终显示在小窗口中。

# php - PHP isset() 带有多个参数

> ID：14476609
> 
> 赞同：37
> 
> 时间：2013-01-23T09:46:03.197
> 
> 标签：php, mysql, ajax

我正在尝试使用 AJAX 自动完成功能，但在让两种语言协同工作时遇到了一些问题。

当我只用 1 个 $_POST 替换所有 issets 时，下面的代码段将起作用，但是通过添加另一个 $_POST 我在第 5 行得到一个错误。

```
<?php 

require_once '../Configuration.php';
if (isset($_POST['search_term'] . $_POST['postcode']) == true && empty ($_POST['search_term'] . $_POST['postcode']) == false) {
$search_term = mysql_real_escape_string($_POST['search_term'] . $_POST['postcode']);
$query = mysql_query("SELECT `customer_name`,`postcode` FROM `Customers` WHERE `customer_name` LIKE '$search_term%' ");
while(($row = mysql_fetch_assoc($query)) !== false) {
    //loop
    echo '<li>',$row['customer_name'] . $row['postcode'] '</li>';
}
}

?> 
```

任何关于为什么抛出此错误的建议将不胜感激。谢谢。

我知道我应该使用 mysqli，我只是想先了解逻辑:)

JS：

Primary.js：

```
$(document).ready(function() {
$('.autosuggest').keyup(function() {

    var search_term = $(this).attr('value');
    var postcode = $_GET['postcode'];
    //alert(search_term); takes what is typed in the input and alerts it
    $.post('ajax/search.php', {search_term:search_term, postcode:postcode},     function (data) {
        $('.result').html(data);
        $('.result li').click(function() {
            var result_value = $(this).text();
            $('.autosuggest').attr('value', result_value);
            $('.result').html('');

        });
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-23T09:49:49.097

参数`isset()`必须是变量引用而不是表达式（在您的情况下是连接）；但是您可以像这样将多个条件组合在一起：

```
if (isset($_POST['search_term'], $_POST['postcode'])) {
} 
```

`true`仅当*所有*参数`isset()`都设置且不包含时才会返回`null`。

注意`isset($var)`和`isset($var) == true`具有相同的效果，因此后者有些多余。

**更新**

表达式的第二部分使用`empty()`如下：

```
empty ($_POST['search_term'] . $_POST['postcode']) == false 
```

由于与上述相同的原因，这是错误的。其实这里不需要`empty()`，因为到那时你已经检查了变量是否被设置，所以你可以像这样简化完整的表达式：

```
isset($_POST['search_term'], $_POST['postcode']) && 
    $_POST['search_term'] && 
    $_POST['postcode'] 
```

或使用等效表达式：

```
!empty($_POST['search_term']) && !empty($_POST['postcode']) 
```

**最后的想法**

您应该考虑使用`filter`函数来管理输入：

```
$data = filter_input_array(INPUT_POST, array(
    'search_term' => array(
        'filter' => FILTER_UNSAFE_RAW,
        'flags' => FILTER_NULL_ON_FAILURE,
    ),
    'postcode' => array(
        'filter' => FILTER_UNSAFE_RAW,
        'flags' => FILTER_NULL_ON_FAILURE,
    ),
));

if ($data === null || in_array(null, $data, true)) {
    // some fields are missing or their values didn't pass the filter
    die("You did something naughty");
}

// $data['search_term'] and $data['postcode'] contains the fields you want 
```

顺便说一句，您可以自定义过滤器以检查提交值的各个部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T09:48:44.113

的参数`isset()`应以逗号 ( ) 分隔，`,`而不是点号 ( `.`)。您当前的代码将变量连接成一个参数，而不是将它们作为单独的参数传递。

所以原始代码将变量评估为统一`string`值：

```
isset($_POST['search_term'] . $_POST['postcode']) // Incorrect 
```

虽然正确的形式将它们分别作为变量进行评估：

```
isset($_POST['search_term'], $_POST['postcode']) // Correct 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-23T09:50:13.217

您只需：

```
if (!empty($_POST['search_term']) && !empty($_POST['postcode'])) 
```

`isset && !empty`是多余的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-31T13:32:17.737

将php的`OR (||)`逻辑运算符用于`isset()`具有多个运算符的php，例如

```
if (isset($_POST['room']) || ($_POST['cottage']) || ($_POST['villa'])) {

} 
```

# java - Tomcat返回错误的文件版本

> ID：14476611
> 
> 赞同：0
> 
> 时间：2013-01-23T09:46:04.767
> 
> 标签：java, tomcat, serialization, deserialization

我在tomcat上有两个项目。两者都是网络应用程序。一个充当服务器，另一个充当客户端。客户端应用程序依赖于服务器应用程序来获取数据。它向服务器发出数据请求，服务器以序列化 java 对象的形式响应数据。为了对客户端进行消毒，提供了一个存根（从服务器流式传输的相同类）。

最近，该项目在一台测试服务器上进行了更新。更新安排后工作正常，但有一个问题。将应用程序在浏览器上保持 10 到 15 分钟后，一个特定页面开始崩溃。在调查中，我发现对于该页面，客户端正在向服务器请求一些数据，但服务器正在响应与客户端存在的相同类的旧版本作为存根。在此 10 分钟超时之前不会发生此错误。服务器返回与客户端相同的类版本。在空闲超时后，我无法弄清楚tomcat从哪里获得该类的旧版本。错误宝座是：

```
 `java.io.InvalidClassException: com.ABC.XYZ; local class incompatible:stream classdesc serialVersionUID = 6683390643574875053, local class serialVersionUID = 100` 
```

为了缩小错误范围，我明确定义了 100L 类的 serialVersionUID。

```
 `serialVersionUID = 100L` 
```

在超时之前，来自服务器和客户端的类 XYZ 打印相同的 serialVersionUID = 100。但是在它崩溃后的某个时间，它显示 serialVersionUID 为 6683390643574875053，这是编译器为旧版本生成的 serialVersionUID。

有问题的 TH 服务器是 cantos6.3 上的 tomcat6.0 服务器。在过去的几年里，这种安排在生产以及各种其他测试环境中都成功地工作，所以代码很好。

如果需要，将提供更多详细信息。知道是什么原因造成的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T13:48:46.397

这是由于生产中损坏的 Tomcat。清理并安装相同版本的tomcat 解决了我们的问题。希望这可以为有类似问题的人节省时间。

# java - 为什么浮点数和的精度会被改变？这是如何工作的？

> ID：14476616
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:46:19.793
> 
> 标签：java, floating-point

> **可能重复：**
> [浮点运算在 Java 中不产生精确结果 Java 中的](https://stackoverflow.com/questions/1661273/floating-point-arithmetic-not-producing-exact-results-in-java)
> [浮点数](https://stackoverflow.com/questions/2936219/float-numbers-in-java)

请参阅下面的代码。

```
public class TestSum {

public static void main(String[] args) {
    float a = 4.8f;//try with 4.7f
    float b = 4.5f;//try with 4.6f
    double sum = a + b;
    System.out.println(sum);
 }
}

(4.8f+4.5f) sum=9.300000190734863 
```

但是，当我尝试`(4.7f+4.6f)`它`sum = 9.299999237060547` 再次给出时，

```
(1.8f+1.5f) sum=3.299999952316284.
(1.7f+1.6f) sum=3.3000001907348633. 
```

但，

```
(2.8f+2.5f) sum=5.300000190734863.
(2.7f+2.6f) sum=5.300000190734863. 
```

我想了解，这是如何工作的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:50:43.633

您的问题在所有编程语言中都很常见，这是由于浮点数的有限精度造成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:05:39.727

> 我想了解这是如何工作的。

查看信息。[&浮点标签 Wiki](https://stackoverflow.com/tags/floating-point/info)上的链接（如下所列）。

*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://download.oracle.com/docs/cd/E19957-01/806-3568/ncg_goldberg.html)
*   [浮点指南.de](http://floating-point-gui.de/)

> 那么最好的解决方案是什么......？

[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)，或更常见的是，使用[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:11:45.430

感谢大家在这里帮助我。

但是我问了这个问题，以了解为什么这不会发生在 Python、Ruby 或 JavaScript 中，而是在 Java 中。

我认为一种可能的精度解决方案是使用 double

```
 public class TestSum {
   public static void main(String[] args){
   double a = 4.8d;
   double b = 4.5d;
   double sum = a + b;
   System.out.println(sum);
   }
   } 
```

# vim - 从特定行抽出第一个单词

> ID：14476621
> 
> 赞同：3
> 
> 时间：2013-01-23T09:46:47.737
> 
> 标签：vim

我想这`:23y`会拉动整个第 23 行。但我想做的只是拉出第 23 行的第一个单词。我试过`:23yw`了，但这不起作用。是否有捷径可寻？

这可以在不先进入该行然后拉动然后键入```以返回到我正在编辑的行的情况下完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:55:26.957

`23ggyw`会做的。我不认为有更快的方法。

解释：`23gg`将光标移动到第 23 行，`yw`拉出一个单词。请注意，这仅在您`startofline`设置了选项（这是默认设置）时才有效。否则，您需要显式移至第一个非空白字符：`23gg^yw`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:01:04.297

我认为没有移动光标的方法可以做到这一点。

无论如何，这是另一种方法：

```
:23norm! yw 
```

分解：

*   `:`因为我们使用的是 Ex 命令，

*   `23`是我们想要做某事的线，它的范围是1，

*   `norm[al]`在给定范围内执行*正常*模式命令，

*   `yw`猛拉第一个词。

添加`<C-o>`回到你来自的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:15:38.257

The`:y`是`:yank`Ex 命令的缩写，所以`:yw`不起作用；这是一个*普通模式*命令。正如其他答案已经显示的那样，您可以从命令行通过`:normal yw`.

恐怕没有办法以实际的方式避免跳跃（但是，如前所述，`<C-O>`让你跳回原来的位置）。你可以使用 Vimscript：

```
:let @" = matchstr(getline(23), '^\w\+') 
```

但这很难打字，而且只适用于一个函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:59:53.463

`23Gyw`在正常模式下输入应该可以完成这项工作。

```
G           Goto line [count], default last line, on the first
            non-blank character |linewise|.  If 'startofline' not
            set, keep the same column.
            G is a one of |jump-motions|. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T21:07:03.693

以下操作无需按要求移动光标即可，但输入起来很麻烦。

```
:23y|norm PJ0eld$ 
```

或者你可以试着用

```
:23t.|norm eld$ 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-23T09:49:34.773

23jyw 应该可以做到，它会带你到第 23 行并拉出第一个单词

# c - C中的Strcpy实现

> ID：14476627
> 
> 赞同：5
> 
> 时间：2013-01-23T09:47:01.503
> 
> 标签：c, strcpy

所以，我`strcpy`在 C 中看到了这个实现：

```
void strcpy1(char dest[], const char source[])
{
    int i = 0;
    while (1)
    {
        dest[i] = source[i];

        if (dest[i] == '\0')
        {
            break;
        }

        i++;
    } 
} 
```

对我来说，它甚至将`\0`源代码复制到目的地。

我也看过这个版本：

```
// Move the assignment into the test
void strcpy2(char dest[], const char source[]) 
{
    int i = 0;
    while ((dest[i] = source[i]) != '\0')
    {
        i++;
    } 
} 
```

对我来说，在尝试分配`\0`from `source`to时它会中断`dest`。

什么是正确的选择，复制`\0`与否？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-25T11:03:17.497

代码应如下所示：

```
char * strcpy(char *strDest, const char *strSrc)
{
    assert(strDest!=NULL && strSrc!=NULL);
    char *temp = strDest;
    while(*strDest++ = *strSrc++); // or while((*strDest++=*strSrc++) != '\0');
    return temp;
} 
```

您**不能**删除第二行`char *temp = strDest;`并直接返回`strDest`。这将导致返回的内容出错。例如，它不会返回正确的值（应该是 22）将检查返回的长度`char *`。

```
char src_str[] = "C programming language";
char dst_str[100];
printf("dst_str: %d\n", strlen(strcpy(dst_str, src_str))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T09:49:58.373

两者都复制终止符，因此两者都是正确的。

请注意，`strcpy2()`首先进行分配（复制），*然后*进行比较。所以它会在意识到它之前复制终结器并停止。

另外，请注意名称以开头的函数`str`是保留的，因此它们实际上都不是有效的“用户级”代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T09:49:22.147

你错了。两者都复制`\0`（NUL 终止符）字符。您必须始终复制 NUL 终止符，否则您的字符串将被破坏：您永远不知道它何时/何​​地结束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-05T06:48:51.543

两者都复制终止符，因此两者都是正确的。

strcpy2() 首先进行复制，然后进行比较。因此它将复制终止符并停止。

名称以 str 开头的函数是保留的，因此请使用任何其他变量或命名类型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:59:11.387

两者都`strcpy1()`做`strcpy2()`同样的事情。两者都将 NUL 字符复制到目标数组的末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-11T02:35:36.003

```
char * strcpy(char *strDest, const char *strSrc)
{
    assert(strDest!=NULL && strSrc!=NULL);
    assert(strSrc + strlen(strSrc) < d || strSrc > strDest);  // see note

    char *temp = strDest;
    while(*strDest++ = *strSrc++)
        ;
    return temp;
} 
```

// 如果不检查第 4 行，新字符串会覆盖旧字符串，包括空分隔符，导致复制无法停止。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-08T09:04:16.213

这是完整的实现。您不必考虑第一个字符串末尾的 \0，它将按照逻辑从第二个字符串自动复制

```
//str copy function self made
char *strcpynew(char *d, char *s){
   char *saved = d;
   while ((*d++ = *s++) != '\0');

   return saved; //returning starting address of s1
}

//default function that is run by C everytime
int main(){

    //FOR STRCPY 
    char s1[] = "rahul"; //initializing strings
    char s2[] = "arora"; //initializing strings
    strcpynew(s1, s2);
    printf("strcpy: %s\n", s1); //updated string after strcpy
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-24T20:34:39.207

您可以使用此代码，越简单越好！在 while() 中，我们逐个复制 char 并将指针移动到下一个。当最后一个字符 \0 将通过并复制，而接收 0 并停止。

```
 void StrCopy( char* _dst, const char* _src )
    {
       while((*_dst++ = *_src++));
    } 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-01-23T09:49:32.267

两者都复制*'\0'*。如果您想完全模拟原始 strcpy，这就是您必须做的事情

# authentication - ZF2 认证

> ID：14476629
> 
> 赞同：6
> 
> 时间：2013-01-23T09:47:05.657
> 
> 标签：authentication, zend-framework2

我正在使用 ZF2 开发应用程序。我已经使用用户名和密码完成了用户身份验证。但是，我想在身份验证中检查一个附加列（例如：状态）。

我已经完成了以下代码。

```
public function authenticate()
{       
    $this->authAdapter = new AuthAdapter($this->dbAdapter,
            'usertable',
            'username',
            'password'
    );  

    $this->authAdapter->setIdentity($this->username)
                ->setCredential($this->password)
                ->setCredentialTreatment('MD5(?)');
    $result = $this->authAdapter->authenticate();
    return $result;
} 
```

如何检查身份验证中的“状态”列？注意：状态值应为 1。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T11:25:15.200

当我使用 zf2 和教义构建身份验证时，我创建了授权插件并自定义[了此适配器](https://gist.github.com/4604528)以传递额外的列进行身份验证。你可能需要继续类似的方向。

```
$adapter = new AuthAdapter($db,
                           'users',
                           'username',
                           'password',
                           'MD5(?)'
                           );

// get select object (by reference)
$select = $adapter->getDbSelect();
$select->where('active = "TRUE"');

// authenticate, this ensures that users.active = TRUE
$adapter->authenticate(); 
```

[参考](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.authentication.adapter.dbtable.html)

更改后，您的代码应如下所示。

```
public function authenticate()
{       
    $this->authAdapter = new AuthAdapter($this->dbAdapter,
            'usertable',
            'username',
            'password'
    );  

    $select = $this->authAdapter->getDbSelect();
    $select->where('status= "1"');
    $this->authAdapter->setIdentity($this->username)
                ->setCredential($this->password)
                ->setCredentialTreatment('MD5(?)');
    $result = $this->authAdapter->authenticate();
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T16:12:07.967

由于该方法，ZF2 提供了另一种方法来处理使用其他列而不是预见的身份和凭证列的附加检查`getResultRowObject`。您的示例中的所有列 `usertable`都可用作 . 返回的对象的属性`getResultRowObject()`。所以你可以用这个扩展你的代码：

```
if ($result->isValid()) {
    $identityRowObject = $this->authAdapter->getResultRowObject();
    $status = $identityRowObject->status;
    // do whatever complex checking you need with $status...
} 
```

问候， 马克

# codeigniter - 我们可以在 Magento 中安装 Codeigniter 吗？

> ID：14476634
> 
> 赞同：0
> 
> 时间：2013-01-23T09:47:47.120
> 
> 标签：codeigniter, magento

我尝试了很多在 Magento 中安装 codeigniter 的方法，现在我怀疑它是否可能。在危急情况下。是否可以在 Magento 中安装 codeigniter ？我们可以通过magento访问codeigniter文件吗？任何支持的链接或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:06:56.187

由于这两个框架都在 PHP 本身中，所以答案是肯定的。**您可以通过创建一个包含CI**文件的文件夹来安装 codeigniter 。有用。您可以共享会话变量以控制两个系统之间的会话。

但问题是您为什么要这样做？如果您尝试访问您的 magento 应用程序的 codeigniter 库，那么答案是否定的。

但是，如果这些 magento 和 codeigniter 独立工作，那就没问题了。

# google-maps - 使用移动设备（Android 和 iPhone）精确定位海事位置

> ID：14476635
> 
> 赞同：0
> 
> 时间：2013-01-23T09:47:49.667
> 
> 标签：google-maps, mobile, gps, mobile-application

我正在寻找构建一个需要定位用户海上位置并将其呈现在地图上的移动应用程序。

我的问题是我可以期待什么样的精度，如果有人做过类似的事情，我会遇到什么意想不到的陷阱。

此外，是否有任何解决方案可以解决可能缺乏互联网连接和地图加载的问题？

理想情况下，我正在考虑将设备地理定位与谷歌地图一起使用，但我遇到过这些，我不确定它是否能给我更高的精度： http: [//www.navionics.com/en/web-api](http://www.navionics.com/en/web-api)

谢谢

# vb6 - 未找到此组件的许可信息。您没有适当的权限在设计器环境中使用此功能

> ID：14476639
> 
> 赞同：2
> 
> 时间：2013-01-23T09:48:07.300
> 
> 标签：vb6, ocx

我有一个用 VB 6.0 开发的旧版应用程序。他们使用 IGSplash40.OCX、PVCalendar9.OCX 等使用了一些第 3 方控件。代码在一台服务器上运行良好。他们安装了 Infragistics NetAdvantage 2004 Vol.1 工具以在 VB 应用程序中使用这些控件。现在我必须将应用程序移动到另一台计算机上。当我打开应用程序特别是表单时..它说无法加载 xxxform.refer 日志以获取详细信息，并且在运行时它还说'此组件的许可证信息未找到。您没有适当的权限在设计器环境中使用此功能'。

另外，我从另一台服务器收集了这些 ocx 文件并尝试运行我的应用程序。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:54:18.313

控件的开发人员包通常不仅包括所涉及的 OCX 和 DLL，而且不仅包括文档，还包括一个安装程序，该安装程序将库、文档和任何必要的设计时许可证放在适当的位置并进行注册。

如果您发现自己复制这些文件并手动注册它们，除非您有一些免费软件库，否则您可能会失败。

即使是免费软件库也应该附带一组适当的文档、一个 DEP 文件和开发机器安装包，以将所有内容都放在适当的位置。合并模块也是一件好事。可悲的是，如果提供*自述文件*，大多数免费软件作者都很慷慨。

OCX 的生态系统不仅仅是 OCX 文件本身。

唯一的解决方法是用您确实拥有许可证的控件替换这些控件，购买替代品，或尝试联系原始供应商以提供替换安装包或获取新许可证和新包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-10T20:01:12.960

在 Windows 7 中，您会在文件夹 Windows\SysWOW64 中找到常用的 .ocx 文件。在该文件夹中，有许多 .srg 文件似乎是相应的许可证。我的问题是richtx32.ocx，我必须打开相应的RICHTEXT.SRG文件，并在注册表中创建相应的密钥并手动引入许可证字符串。

# java - 将列表从 servlet 传递给 jsp null

> ID：14476640
> 
> 赞同：1
> 
> 时间：2013-01-23T09:48:13.070
> 
> 标签：java, jsp, nullpointerexception

我正在尝试根据用户在 JSP 页面中选择的日期从数据库中检索值。用户将选择两个日期并查询数据库。

在我的 Servlet 中，我正在这样做。for 语句告诉我列表中的值是正确的。

```
VehiclesList list = dataManager.getVehiclesWhere(dateFrom, dateTo);

request.setAttribute("vehiclesList", list);

VehiclesList vList = (VehiclesList) request.getAttribute("vehiclesList");

for (int pos = 0; pos < vList.size(); pos++) {
        Vehicles vehicles = vList.getVehicleAt(pos);
        System.out.println(vehicles.getC02Emissions());
        System.out.println(vehicles.getManufacture());
        System.out.println(vehicles.getRegNumber());
        System.out.println(vehicles.getHireRate());
}

RequestDispatcher dispatcher = request.getRequestDispatcher("/vehicles.jsp");
dispatcher.forward(request, response); 
```

这是我的 JSP 页面中的代码。我正在执行上述相同的过程，即请求属性、创建新列表并显示数据，但我创建的新列表显示为空，并且我收到空指针异常。

```
VehiclesList vList = new VehiclesList();
vList = (VehiclesList) request.getAttribute("vehiclesList");

for (int pos = 0; pos < vList.size(); pos++) {
     Vehicles vehicle = vList.getVehicleAt(pos);
     System.out.println(vehicle.getC02Emissions());
} 
```

为什么 JSP 端的列表为空，而在 servlet 端它包含正确的值？

编辑 - - -

这是我的堆栈跟踪。

```
 WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.jsp.vehicles_jsp._jspService(vehicles_jsp.java from :257)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

编辑 2------------

小服务程序代码

```
package Oracle;

import RentalRecords.Vehicles;
import RentalRecords.VehiclesList;
import java.io.IOException;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class VehiclesServlet extends HttpServlet {

    private boolean dbOK = false;//boolean to check if data input is not null
    private Vehicles vehicle;//used to get user data from bean
    private DatabaseConnector dataManager;//used to interact with the database

    /**
     *
     * Initialises the servlet by creating a new DatabaseConnector object which
     * will be used to interface with the database
     */
    public void init() {
        dataManager = new DatabaseConnector();
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String dateFrom = request.getParameter("from");//get email submitted from form
        String dateTo = request.getParameter("to");//get password submitted from form
        System.out.println(dateFrom + dateTo);

        if (dateFrom != null || dateTo != null) {
            dbOK = true;
        } else {
            dbOK = false;
        }//end if

        HttpSession session = request.getSession(true);//set the session

        if (dbOK) {
            try {
                System.out.println(dbOK);
                VehiclesList list = dataManager.getVehiclesWhere(dateFrom, dateTo);

                request.getSession().setAttribute("vehiclesList", list);

                VehiclesList vList = (VehiclesList) request.getAttribute("vehiclesList");

                for (int pos = 0; pos < vList.size(); pos++) {
                         Vehicles vehicles = vList.getVehicleAt(pos);
                         System.out.println(vehicles.getC02Emissions());
                         System.out.println(vehicles.getManufacture());
                         System.out.println(vehicles.getRegNumber());
                         System.out.println(vehicles.getHireRate());
                }

                RequestDispatcher dispatcher = request.getRequestDispatcher("/vehicles.jsp");
                dispatcher.include(request, response);
                //request.getRequestDispatcher("vehicles.jsp").forward(request, response);
            } catch (Exception e) {
                e.printStackTrace();
            }//end try
        } else {
            //User is not valid, redirect back to index.jsp and inform user
            session.setAttribute("signupError", "Signup Not Successful");
            session.setAttribute("signupSuccess", null);//set this null if it is a resubmit
            System.out.println(session.getAttribute("signupError"));
            RequestDispatcher dispatcher = request.getRequestDispatcher("/vehicles.jsp");
            dispatcher.forward(request, response);
        }

    }
} 
```

JSP 代码

```
<%@page import="RentalRecords.Vehicles"%>
<%@page import="RentalRecords.VehiclesList"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script>
            $(document).ready(function() {
                var from = $( "#from" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    minDate: 0,
                    dateFormat: 'd-M-y',
                    onClose: function( selectedDate ) {
                        $( "#to" ).datepicker( "option", "minDate", selectedDate );
                    }

                });
                var to = $( "#to" ).datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    minDate: 0,
                    dateFormat: 'd-M-y',
                    onClose: function( selectedDate ) {
                        $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                    }
                });
            });
        </script>
    </head>
    <body>
        <form id="getdates" method="get" action="getdates">
            <label for="from">From</label>
            <input type="text" id="from" name="from" />
            <label for="to">to</label>
            <input type="text" id="to" name="to" />
            <input id="submitdates" name="submitdates" type="submit" value="Search" />
        </form>
        <div class="header_01">Vehicles</div>

        <%

            VehiclesList vList = new VehiclesList();
            vList = (VehiclesList) request.getSession().getAttribute("vehiclesList");

            for (int pos = 0; pos < vList.size(); pos++) {
                Vehicles vehicle = vList.getVehicleAt(pos);
                System.out.println(vehicle.getC02Emissions());

        %>

        <table>
            <tr>
                <td class="label"><label id="ltable" for="table"></label>
                    <table>
                        <tr>
                            <td class="label"><label id="lbodytype" for="transmission">Body Type</label></td>
                            <td class="field"><input id="bodytype" name="transmission" type="text" value="<%= vehicle.getBodyType()%>" maxlength="50" readonly/></td>
                            <td class="status"></td>
                        </tr>
                        <tr>
                            <td class="label"><label id="ltransmission" for="transmission">Transmission</label></td>
                            <td class="field"><input id="transmission" name="transmission" type="text" value="<%= vehicle.getTransmission()%>" maxlength="50" readonly/></td>
                            <td class="status"></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <% }%>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:57:00.827

在您的 jsp 页面中检查 null

```
if(request.getAttribute("vehiclesList") !=null)
{
 VehiclesList vList = new VehiclesList();
 vList = (VehiclesList) request.getAttribute("vehiclesList");

  for (int pos = 0; pos < vList.size(); pos++) {
     Vehicles vehicle = vList.getVehicleAt(pos);
     System.out.println(vehicle.getC02Emissions());
  }
} 
```

# android - 在我的 Android 应用程序中实现没有 ActionBarSherlock 的 Holoeverywhere 主题

> ID：14476642
> 
> 赞同：2
> 
> 时间：2013-01-23T09:48:24.340
> 
> 标签：android, android-holo-everywhere

我正在尝试在我的应用程序中实现 holoeverywhere 主题。

当我实现 holoeverywhere 主题时，默认情况下我会得到一个操作栏。我认为这是因为 Actionbarsherlock 库。我不知道这个库，并且已经实现了我自己的各种操作栏。那么，如何禁用现在出现的操作栏。

如果您需要我的代码的任何相关部分，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:02:58.647

删除 ABS 依赖于 HoloEverywhere... 这很难，我不支持。
第一的。从 HE 中删除完整的 library/src/com/actionbarsherlock。
第二。更改 library/resources/*.json 以扩展标准 android 主题，而不是 sherlock。`mvn resbuilder:styler`
由Third重建样式。从 PreferenceScreen 代码中删除 fake-actionbar。
第四。编辑 library/src/org/holoeverywhere/app/Activity 并删除所有与 ABS 相关的内容并删除 Sherlock 插件。
第五。取消注释 library/res/values/attrs.xml 中的特殊块。直接从顶部。
第六。向Cthulhu祈祷并制作一些技巧耳朵。

曾经有一个分支nosherlock。不受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:07:18.580

在我的项目中包含的 HoloEverywhere 库中，在 res>values>styles.xml 文件中，有一个名为 Holo.Theme.Light.NoActionBar 的主题。我用它代替了我之前使用的 Holo.Theme.Light。这解决了这个问题。谢谢。

# asp.net - 浏览器HTML5回合制多人游戏用ASP.NET（MVC 4）合理吗？

> ID：14476643
> 
> 赞同：1
> 
> 时间：2013-01-23T09:48:25.830
> 
> 标签：asp.net, html, browser, multiplayer

正如标题所说，我想用 HTML5 开发一个浏览器多人游戏。游戏将类似于“冒险”，回合制策略游戏。我决定使用 HTML5 和新的画布进行开发。

但问题出在服务器端。当我谷歌时，我只得到答案，人们为此使用“System.io”、“node.js”等。

所以我的问题是：

ASP.NET——尤其是 MVC 4——对我的目的来说是一个糟糕的选择吗？我想用 asp.net 做到这一点，但当然不是在有更简单/更合适的选项时。

有人说asp.net不适合那个，太复杂等等。

但我问你那里的专业人士：D

您会考虑使用 asp.net mvc 4 开发类似的游戏，还是更好地坚持使用 system.io 和 node.js 以及其他框架的其他解决方案？（php？）

我希望你能帮助我，这让我压力了好几个星期:(

提前致谢！

来自慕尼黑的问候

撕裂者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:33:56.887

Asp.net，尤其是 MVC 非常适合开发基于 html5 的游戏。

回合制游戏，与基于网络的聊天没有太大区别。您通过服务器在成员之间发送消息的位置。

但是，要设计可扩展的解决方案，您必须使用正确的方法。

您有多种选项可以在用户之间进行通信。

像[SignalR](http://signalr.net/)这样的库会有所帮助。如果您确实想自己做，最有效的方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。在 MVC 中，它等同于[AsyncController](http://msdn.microsoft.com/en-us/library/system.web.mvc.asynccontroller.aspx)。

像 node.js 这样的框架被设计为异步的，因此非常适合。开箱即用的 PHP 对于此类应用程序来说不是一个好的选择，因为它不支持异步请求。

综上所述，asp.net 是一个不错的选择，但你需要知道如何使用它。如果您更喜欢其他框架，例如 node.js，那么您应该选择那个。熟悉可以减少很多开发时间。

# apache - 如何构建 apache HCatalog 0.5.0？

> ID：14476644
> 
> 赞同：1
> 
> 时间：2013-01-23T09:48:27.343
> 
> 标签：apache, build, hadoop, hive, hcatalog

已经快 3 个小时了，我无法构建它。请任何人提供步骤。所有文件都建议使用 hcatalog-src-0.5.0-incuvating.tar.gz 但这在互联网上的任何地方都不可用（据我搜索）。然后我下载了分支 0.5.0 但根据文档 [http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.2.0/ds_HCatalog/install.pdf](http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.2.0/ds_HCatalog/install.pdf)

对于 0.5.0 版，您必须使用命令构建 l=

```
ant_home/bin/ant -Dhcatalog.version=0.5.0 -Dforrest.home=forrest_home tar 
```

现在的问题是 build.xml 没有名为“tar”的目标。所以我只是浏览了 build.xml 并尝试了使用目标作为“包”的相同命令

```
ant_home/bin/ant -Dhcatalog.version=0.5.0 -Dforrest.home=forrest_home package 
```

但随后它向我显示错误。

```
BUILD FAILED
C:\Users\admnilesh\Desktop\hcatalog-branch-0.5\build.xml:71: The following error
 occurred while executing this line:
C:\Users\nilesh\Desktop\hcatalog-branch-0.5\build-support\ant\deploy.xml:67:
Unable to resolve artifact: Unable to get dependency information: Unable to read
 the metadata file for artifact 'com.sun.jersey:jersey-core:jar': Cannot find pa
rent: net.java:jvnet-parent for project: com.sun.jersey:jersey-project:pom:1.9.1
 for project com.sun.jersey:jersey-project:pom:1.9.1
  com.sun.jersey:jersey-core:jar:1.9.1

from the specified remote repositories:
  apache.snapshots (http://repository.apache.org/snapshots),
  central (http://repo1.maven.org/maven2),
  glassfish-repository (http://maven.glassfish.org/content/groups/glassfish),
  datanucleus (http://www.datanucleus.org/downloads/maven2)

Path to dependency:
        1) org.apache.hcatalog:webhcat:jar:0.5.0-SNAPSHOT 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:30:22.370

在过去的几天里，我们遇到了同样的麻烦并在 hcatalog-user 邮件列表中进行了讨论。您可以查看[https://issues.apache.org/jira/browse/HCATALOG-601](https://issues.apache.org/jira/browse/HCATALOG-601)以了解针对此问题所做的工作。

快速总结：Jersey 1.9 依赖于 glassfish maven repo，它不再存在。将您的 jersey dep 版本从 1.9 升级到 1.14，您应该能够构建。

编辑：还有一件事——我们仍在通过发布过程来发布 0.5.0 孵化候选者，最新的候选者目前正在[http://people.apache.org/~travis/](http://people.apache.org/~travis/)上发布。我们应该会在几天内看到公开发布。同时，我建议查看我们的 hcatalog-user 邮件列表：http: [//incubator.apache.org/hcatalog/mailing_lists.html](http://incubator.apache.org/hcatalog/mailing_lists.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T06:09:42.703

我在给目标“tar”时遇到了同样的错误。在将目标指定为“包”时，构建继续进行但失败并出现以下错误：

```
satish@dev1$ /usr/bin/ant -Dhcatalog.version=0.5.0 -Dforrest.home=/home/satish/work/forrest/apache-forrest-0.9 package

[artifact:dependencies] Unable to resolve artifact: Missing:
[artifact:dependencies] ----------
[artifact:dependencies] 1) org.apache.hcatalog:hcatalog-core:jar:0.5.0
[artifact:dependencies] 

[artifact:dependencies] 
[artifact:dependencies]   Path to dependency: 
[artifact:dependencies]     1) org.apache.hcatalog:hcatalog-pig-adapter:jar:0.5.0-    incubating
[artifact:dependencies]     2) org.apache.hcatalog:hcatalog-core:jar:0.5.0
[artifact:dependencies] ---------- 
```

通过在构建命令行中将 project.version 指定为“0.5.0-incubating”而不是“0.5.0”来解决此问题。错误的原因是 build 将 hcatalog-core 工件安装为 hcatalog-core-0.5.0-incubating.jar。但是，由于 project.version 错误，依赖项目改为搜索 hcatalog-core-0.5.0.jar。

构建成功：

```
satish@dev1$ /usr/bin/ant -Dhcatalog.version=0.5.0-incubating -Dforrest.home=/home/satish/work/forrest/apache-forrest-0.9 package 
```

# asp.net-mvc - 当结果从 WCF 服务传输到 MVC 应用程序时，一些导航属性会丢失

> ID：14476647
> 
> 赞同：0
> 
> 时间：2013-01-23T09:48:34.923
> 
> 标签：asp.net-mvc, wcf, entity-framework

这个问题对我来说正成为一场噩梦，尤其是经过几天的研究之后，没有什么好说的。问题是，一些导航属性丢失了。请检查[此](https://stackoverflow.com/questions/14380495/navigation-properties-are-showing-null-randomly)代码详细信息我正在使用具有存储库模式的实体框架，并且还尝试将 Objectset 的“SetMergeOption”设置为“NoMerge”，但这也没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:43:17.520

我在更新 POCO 生成器以使用 EF 5.0 版后让它们工作

# objective-c - xcode 中文档的键盘快捷键

> ID：14476651
> 
> 赞同：1
> 
> 时间：2013-01-23T09:48:41.573
> 
> 标签：objective-c, xcode

在 Eclipse 中，如果我在方法上方设置插入符号并编写：

`/**`并单击回车，有一个带有我可以轻松更改的参数的方法的自动文档。

在 xocde 中是否有等效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:16:47.817

没有捷径可走。

[但是，您可以使用AppleScript](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html)创建自己的快捷方式。

放置文档并通过选择它们并按`cmd`+对其进行评论`/`

您可以在此处找到更多信息：[如何将自定义键盘快捷键添加到针对脚本的 xcode](https://stackoverflow.com/questions/8400756/xcode-4-custom-behavior-does-not-execute-my-sh-script)。

以及更好的文档工具[HeadDoc](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/HeaderDoc/intro/intro.html)和[AutoGSDoc](http://www.gnustep.org/resources/documentation/Developer/Tools/Reference/autogsdoc.html)。

# php - 为重复行创建空白行

> ID：14476653
> 
> 赞同：1
> 
> 时间：2013-01-23T09:48:49.900
> 
> 标签：php, mysql

> **可能重复：**
> [在一个表中显示不同的列和非不同的列](https://stackoverflow.com/questions/14472423/displaying-distinct-columns-and-non-distinct-column-in-one-table)

我有 3 张桌子。一个是`userinfo`（您可以在其中找到`Name`），然后`logs`是登录详细信息和`evaluation`用户对活动的评估。它们由场相连`attendee_id`。

当我加入他们时，它给了我这个输出：

![实际输出](../Images/511323de107a18d0a0fa5035c2c45291.png)

我想要的是有这样的输出：

![期望的结果](../Images/119cd2c534fb65e0e09b15b5891f4622.png)

当我使用 GROUP BY Name 时，它​​只返回一行，而不返回其他数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:04:41.793

可以这样做。在此示例中，我对`$rows`数组进行了硬编码，但您可以将其替换为数据库中的行数组。

```
<?php

$rows = array(
    array(
        'name' => 'Juan',
        'login' => '09:00:01',
        'evaluation' => 'Yes'
    ),
    array(
        'name' => 'Juan',
        'login' => '09:00:02',
        'evaluation' => 'Yes'
    ),
    array(
        'name' => 'Juan',
        'login' => '09:00:03',
        'evaluation' => 'Yes'
    ),
    array(
        'name' => 'Jose',
        'login' => '09:00:04',
        'evaluation' => 'No'
    ),
    array(
        'name' => 'Jose',
        'login' => '09:00:05',
        'evaluation' => 'No'
    )
);

?>

<table>
<tr>
    <th>Name</th>
    <th>Login</th>
    <th>Evaluation</th>
</tr>
<?php
    $prevName = '';
    foreach($rows as $row):
        if($prevName == $row['name']) {
            $name = '';
        } else {
            $name = $prevName = $row['name'];
        }
?>
<tr>
    <td><?php echo htmlspecialchars($name); ?></td>
    <td><?php echo htmlspecialchars($row['login']); ?></td>
    <td><?php echo htmlspecialchars($row['evaluation']); ?></td>
</tr>

<?php endforeach; ?>
</table> 
```

结果是：

![在此处输入图像描述](../Images/8012fee3491c7e4bef1dce245c8b2098.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:08:27.903

我尝试这样做几次并放弃了。最后，我通过检查当前行中“name”的值是否与前一个不同来格式化 PHP 中的输出：

```
<?php
//Assume the query has been done
//...
$lastName='';
echo '<table>';
while ($row=mysql_fetch_assoc($query_result))
{
    if ($row['name']!=$lastName)
    {
        $lastName=$row['name'];
    } else
    {
        $row['name']='';
    }
    echo '<td>'.implode('</td><td>',$row).'</td>;
    echo '<tr>';
}
echo '</table>'; 
```

它并不漂亮，但它会给你你想要的结果。你可以通过

# c++ - 代码在 g++ 中运行完美，但在 Xcode 中不完美 - 找不到文件

> ID：14476655
> 
> 赞同：5
> 
> 时间：2013-01-23T09:48:53.673
> 
> 标签：c++, xcode, g++

我创建了一个包含内容的文本文件。它与 cpp 文件位于同一文件夹中。我已经多次确认该文件存在。当我运行 g++ 时，编译并运行它会找到该文件。当我在 Xcode 中运行它时，它不起作用。如果找不到文件。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  ifstream myfile ("example.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      cout << line << endl;
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T11:07:40.750

您的文件无法打开，因为 XCode 在默认*构建*位置从 IDE 启动，这实际上是磁盘上某处的临时目录。如果您想在启动时将工作目录更改为其他目录（例如可以找到文件的位置）：

1.  选择产品/编辑方案...菜单选项。
2.  在左侧列表中选择**运行模式。**
3.  在右窗格的底部 **选项选项**卡应该是“工作目录”选项。选中复选框并将自定义工作目录设置为您*知道*的某个位置（您的“/Users/yourname”主目录是我使用的一个不错的位置）。
4.  确保从 IDE 执行程序所需的任何“当前目录”数据文件都在此目录中。

如果您没有看到它，这也是您可以配置同一对话框的命令行参数（在另一个选项卡上）的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:48:26.583

尝试在 XCode 中将文件添加到项目中，或者改用绝对路径。

# iphone - 在弹出窗口中显示视图

> ID：14476662
> 
> 赞同：0
> 
> 时间：2013-01-23T09:49:17.400
> 
> 标签：iphone, ios, xcode, popup, autoresize

我`detailView.xib`在`UIPopover`中显示`UIMapView`。

我`DetailView.xib`的是：![在此处输入图像描述](../Images/c2d06f96be413f0eee32651c7ef1a0b9.png)

但是当我尝试在弹出窗口中查看时，它显示如下：![在此处输入图像描述](../Images/49eeb29808986af2fddecd4eaaf7136e.png)

我的代码如下：

```
 detailsView *popUp=[[detailsView alloc] initWithNibName:@"detailsView_ipad" bundle:nil];

        popView = [[UIPopoverController alloc]initWithContentViewController:popUp];
        popView.delegate =self;

        [popView setPopoverContentSize:CGSizeMake(600, 400)];

[popView presentPopoverFromRect:control.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

**我怎样才能显示实际的xib `UIPopover`？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:03:28.530

我认为您的问题是弹出框的内容大小。将内容大小设置为与详细视图相同。

```
[popView setPopoverContentSize:popUp.bounds.size]; 
```

如果您希望您的视图适合您提供的任何内容大小，那么您需要使用自动调整大小或自动布局（iOS 6+）。

# javafx-2 - 在javafx中处理来自键盘的快捷键事件

> ID：14476665
> 
> 赞同：0
> 
> 时间：2013-01-23T09:49:23.637
> 
> 标签：javafx-2, javafx

我的代码是：

```
if(mBooleanLoginDone==true)
{
    mMenuItemProdType.setAccelerator(new KeyCodeCombination(KeyCode.T, KeyCombination.CONTROL_DOWN, KeyCodeCombination.SHORTCUT_DOWN));
}
else
{
   System.out.println("Not Loggged In");
} 
```

在上面的代码中，mBooleanLoginDone 是一个布尔变量，指示用户登录或未登录的位置。我希望快捷键`Ctrl`+`T`仅在用户成功登录时才起作用，但现在我没有登录并且快捷键也在起作用。我怎么能解决它任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:21.143

尝试

```
if(mBooleanLoginDone==true)
{
    mMenuItemProdType.setAccelerator(new KeyCodeCombination(KeyCode.T, KeyCombination.CONTROL_DOWN, KeyCodeCombination.SHORTCUT_DOWN));
}
else
{
   mMenuItemProdType.setAccelerator(null);
   System.out.println("Not Loggged In");
} 
```

# email - 将电子邮件回复作为评论路由到适当的讨论

> ID：14476675
> 
> 赞同：0
> 
> 时间：2013-01-23T09:49:54.127
> 
> 标签：email

故事很简单：一个用户创建一个新讨论，系统向其他用户发送电子邮件通知。当这些用户回复通知时，他们的回复应作为评论正确路由到特定讨论。

当系统发出电子邮件通知时，它会在主题中包含路由代码。例如，通知的主题可能如下所示：'讨论“让我们谈谈”已经开始`{123}`'。由于所有电子邮件客户端都使用`Re: ORIGINAL SUBJECT`我们`{123}`作为主题的一部分返回，解析它并知道将评论放在哪里。

我们已经有这个工作了（实际上已经有好几年了），但是当前的实现看起来有点脏（尤其是当代码变得更长时），所以我们想探索有没有替代方案。**有没有更优雅的方法来解决这个问题，它可以在大多数电子邮件客户端上可靠地工作？**我们可能缺少的电子邮件标题？相似的东西？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:57:00.073

由于您没有提及，我不确定您是否对此进行了调查：

[电子邮件标题](http://www.faqs.org/rfcs/rfc2822.html)中有一个名为的字段，该字段`In-Reply-To`应包含邮件正在回复的电子邮件的消息 ID 和一个名称`References`，该名称应指定该邮件所属的线程：

> “In-Reply-To：”字段可用于标识新消息
> 作为回复的消息（或多个消息），而
> “References：”字段可用于标识
> 对话的“线程”。

根据 rfc，该`In-Reply-To`字段应包含“父”消息`Message-Id`，而该`References`字段将引用父消息的`References`字段。

此字段的问题在于，不能保证其中有一些有用的东西，因为它们不需要正确填写以进行邮件传递，因此某些邮件客户端可能无法正确填写它们，甚至可能根本不填写。

我发现[这篇](http://www.jwz.org/doc/threading.html)文章是关于使用 In-Reply-To 字段构建线程算法并声称对这些字段中的垃圾和恶意输入具有鲁棒性。

# iphone - 如何在不公开的情况下访问类中的其他类成员（ivars）？

> ID：14476678
> 
> 赞同：1
> 
> 时间：2013-01-23T09:49:58.247
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsobject

我写了以下目标c类..

```
@interface thumb_user_info : NSObject
{
@public // Otherwise I was not able to access in other class.
    NSString *user_name;
    int       user_id;
}
@end 
```

当我在其他类中创建实例并尝试为 user_id 设置值时，它显示错误“它受保护”，如何访问这些 ivars 而无需像上面那样将其公开。我知道它在目标 C 中的基础知识，我不想犹豫让自己清楚。

注意：我也尝试过合成它......仍然是同样的错误......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:54:12.183

您要问的是 OOP 的基础之一，即面向对象编程。

您通过将其设为私有来封装、绑定、隐藏您的私有财产。

如果您希望它们可见，则将其公开。

如果您希望它们被隐藏但可继承，则可以对其进行保护。

因此，无法从外部自我课程访问您的私人 ivars/方法。

如果要访问私有 ivars 值，则创建一个公共方法并间接获取/返回该值。

**synthesize 为 ivars (private/protected/public) 创建方法，如果它在 .h 中，它将变为 public。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:01:46.053

它是实例变量，而不是属性，所以你不能为它们设置值`yourclass.user_name = userName`，我认为你最好添加一些方法来设置值，例如：

```
- (void)setupUserName:(NSString *)userName
{
    user_name = userName
} 
```

# php - PHP SQL Foreach 语句

> ID：14476682
> 
> 赞同：1
> 
> 时间：2013-01-23T09:50:01.733
> 
> 标签：php, mysql, foreach

我知道 PHP 有一段时间了，但不知道 foreach() 命令是如何工作的。我知道它类似于 while()。我已经查看了它的工作原理，但不太确定如何将 mySQL 语句连接到它。

例如，假设您有一个 SQL 语句，如下所示：

`"SELECT username,password,email,dob FROM users"`

您将如何将其实现到 foreach() 语句中以回显每个用户的用户名、密码、电子邮件和出生日期？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:56:29.527

该`foreach`方法循环遍历数组（或对象）的所有行，从第一行到最后一行。这与`while`循环的不同之处在于，a`while`一直循环直到满足特定条件。这可以在 2 次迭代或 1000 次迭代之后进行，具体取决于您设置的条件。

在`foreach`循环中，您知道将有与数组中的键一样多的迭代（除非您`break`在其中使用语句，否则会立即中止它）。

SQL 结果也可以作为数组或对象返回，可以循环。例如：

```
$query = "SELECT username,password,email,dob FROM users";
$resultSet = mysqli_fetch_all($query, MYSQLI_BOTH);
foreach ($resultSet as $id => $row) {
    echo $row['username'] // Show username
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:54:36.443

您可以查看 php 手册：
[http ://de2.php.net/manual/en/mysqli-result.fetch-row.php](http://de2.php.net/manual/en/mysqli-result.fetch-row.php)

第一个例子应该是一个很好的起点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:08:04.143

foreach 是一种遍历数组的机制。如果你用来运行你的 sql 查询的东西是返回一个数据数组（它几乎肯定是）你可以使用一个 foreach 循环来运行所有的结果。

```
$my_array = array('cats' => 'meow', 'dogs' => 'bark');
foreach($my_array as $value) { echo "{$vlaue} <br />"; }
echo "<br />";
foreach($my_array as $key => $value) { echo "{$key} make a {$value} sound<br />"; } 
```

*输出：*
*喵喵*
*叫*
*猫发出喵叫声*
*狗发出吠叫声*

对于您的 sql 查询

```
$mysqli = new mysqli("example.com", "user", "password", "database");

$users = mysqli_fetch_array( $mysqli->query("SELECT username,password,email,dob FROM users") , MYSQLI_BOTH);

foreach($users as $user) {
   echo "User: {$user['username']} <br /> 
         Password: {$user['password]} <br /> 
         email: {$user['email']} <br />
         DOB: {$user['dob']} <br /><br />";
} 
```

永远不要使用 mysqli，我只是为了简单起见在这里使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:54:10.563

Foreach 循环遍历一个数组。您需要将该查询的结果放入一个数组中，这将需要使用 while 循环对其进行循环并将行保存到一个数组中或使用 *mysqli_fetch_all* 之类的东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T09:58:07.153

使用 MySQL 结果的标准方法是`while`循环。看这里的例子2：

```
function readDataForwards($dbh) {
  $sql = 'SELECT hand, won, bet FROM mynumbers ORDER BY BET';
  try {
    $stmt = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL));
    $stmt->execute();
    while ($row = $stmt->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) {
      $data = $row[0] . "\t" . $row[1] . "\t" . $row[2] . "\n";
      print $data;
    }
    $stmt = null;
  }
  catch (PDOException $e) {
    print $e->getMessage();
  }
} 
```

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

您可以使用 foreach 循环遍历结果，首先获取所有数据：

```
$sth = $dbh->prepare("SELECT name, colour FROM fruit");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");
$result = $sth->fetchAll();
foreach($result as $key => $value)
{
    var_dump($value);
} 
```

[http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T09:58:49.107

这里的问题是您将需要一些东西来迭代以使用 foreach - 看起来您已经习惯于获取单个数组/对象。如果您使用数据库抽象层，而不是原始的 mysql_* 命令，那么这些工具中的大多数都会为您返回一个数组或对象数组。

您可以在此处看到您所要求的确切示例，但请注意这是使用 CodeIgniter 的数据库层获取数据：[http ://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

# opencv - 在opencv中识别颜色序列

> ID：14476683
> 
> 赞同：1
> 
> 时间：2013-01-23T09:50:11.383
> 
> 标签：opencv, colors, detection

我有一组具有四种可能颜色 R、G、B 和 Y 的图像。在相机前，我有四个图像序列，具有任何可能的颜色组合。例如。R、R、G、B 或 R、G、B、Y 等。为了找到正确的序列，哪种算法或方法最好？

我添加了一个示例图像。![在此处输入图像描述](../Images/dff08090a227e425943c696bce2090a0.png)

代码应返回正确的 RGBG 序列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:41:02.777

正如我之前提到的，将图像转换为 HSV 平面。HSV 平面最好选择特定的颜色。（代码在 Python 中）

```
import numpy as np
import cv2

img  = cv2.imread('sofqn.png')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
hsv = cv2.cvtColor(gray,cv2.COLOR_BGR2HSV) 
```

然后对图像进行二值化。您可以使用 threshold() 函数。但我不知道你的亮度会如何。所以我用 Canny() 进行边缘检测。并在其中找到轮廓。

```
edges = cv2.Canny(img,50,150)
contours,hierarchy = cv2.findContours(edges,cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_SIMPLE) 
```

然后对于每个轮廓（您现在可以将轮廓视为图像中的对象），找到它的区域。如果它很小，那就是噪音，避免它。否则，我们为它找到一个边界矩形，它给出了它的左上角(x,y)、宽度(w)、高度(h)。由此，我们找到了正方形的中心点。检查其在 HSV 图像中的颜色，并检查它是否为 R、G、B、Y。我们将它们，即质心 (cx,cy) 和颜色放在一个列表（或数组）中。最后我们按照 x 坐标对它们进行排序，使第一行对应第一个正方形，依此类推。

```
res = []
for cnt in contours:
    if cv2.contourArea(cnt) > 100:
        x,y,w,h = cv2.boundingRect(cnt)
        cx,cy = x+w/2, y+h/2
        color = hsv[cy,cx,0]

        if (color < 10 or color > 170):
            res.append([cx,cy,'R'])
        elif(50 < color < 70):
            res.append([cx,cy,'G'])
        elif(20 < color <40):
            res.append([cx,cy,'Y'])
        elif(110 < color < 130):
            res.append([cx,cy,'B'])

res = sorted(res,key = lambda res : res[0])
colors = [x[2] for x in res]
print colors 
```

这给了我结果：`['R', 'G', 'B', 'G']`

# javascript - Firefox 中的 document.execCommand 奇怪的结果

> ID：14476686
> 
> 赞同：2
> 
> 时间：2013-01-23T09:50:17.730
> 
> 标签：javascript, firefox, wysiwyg, contenteditable

所见即所得的文本格式功能

```
/*
 * myEditor - iframe element
 */
function doFormat(what) {

    var cWin = $('#myEditor', window.parent.document)[0].contentWindow; 

    cWin.$('body').attr({ 'contentEditable': true, 'designMode': 'On'} );

    var what = 'justifyright';

    cWin.document.execCommand(what, false, arguments[2]);

    cWin.$('body').attr({'contentEditable': 'false'} );
    return;
} 
```

HTML：

```
<span id="obj_123" contenteditable="true"> 
    text<br /> 
    moretext<br /> 
    alot of text <br /> 
</span> 
```

如果单击或突出显示的部分（仅在选定的零件）中，则称为函数doformat（具有任何合理函数）

结果是：

```
<span id="obj_123" contenteditable="true"> 
    text<br /> 
</span>

<div align="right">
    <span id="obj_123" contenteditable="true">
        moretext<br /> 
    </span>
</div>

<span id="obj_123" contenteditable="true">
    alot of text <br /> 
</span> 
```

预期成绩：

```
<span id="obj_123" contenteditable="true"> 
    text<br /> 

    <div align="right">
        moretext<br /> 
    </div>
    alot of text <br /> 
</span> 
```

好像它复制父节点，然后在每次格式化发生时复制它。

其他 execCommand 调用（如粗体/斜体/下划线等）按预期工作。

我将不胜感激有关此主题的任何帮助。非常感谢你。

编辑：添加了一个小提琴测试用例 [http://jsfiddle.net/n7SgJ/](http://jsfiddle.net/n7SgJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:06:57.650

事实证明，仅当富文本包装器是 SPAN 标记时才会发生这种情况。如果使用 DIV 标签，一切正常。

对此有合理的解释吗？

# android - 在Android中通过服务播放视频？

> ID：14476689
> 
> 赞同：2
> 
> 时间：2013-01-23T09:50:22.717
> 
> 标签：android, android-service, android-mediaplayer

我想通过 Mediaplayer 播放 VIDEO，但 Mediaplayer 包含在 Android 的服务中。可能吗？对我有什么想法吗？谢谢！

# javascript - 懒加载谷歌地图api

> ID：14476690
> 
> 赞同：0
> 
> 时间：2013-01-23T09:50:24.800
> 
> 标签：javascript, lazy-loading

我想在我的主页显示后延迟加载所有第 3 方 JS/CSS，因为当用户从主页导航到某个特定模块时会使用外部插件等。

到目前为止，我已经成功地将普通 .js 和 .css 外部库比[http://wonko.com/post/lazyload-200-released](http://wonko.com/post/lazyload-200-released)

但是，对于像这样的路径[http://maps.google.com/maps/api/js?sensor=true](http://maps.google.com/maps/api/js?sensor=true)

代码：

```
 LazyLoad.js('http://maps.google.com/maps/api/js?sensor=true', function () {
   alert('Your JS has been loaded');
   }); 
```

我认为解决方案是如何延迟加载网页网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:56:37.133

我相信你想要这样的东西：

```
$.getScript('http://maps.google.com/maps/api/js?sensor=true'); 
```

使用 jQuery。[API](http://api.jquery.com/jQuery.getScript/)将提供回调的详细信息。否则谷歌可能有一些机制要求它从加载中出现。只是一个猜测。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T11:44:11.707

Found a solution: Check the URL:'http://maps.google.com/maps/api/js?sensor=true' You would find main.js is being imported by it . A simple getScript for sensor=true will not give whole google object so next import also required.

```
 var t=setTimeout(function(){
    jQuery.getScript('http://maps.google.com/maps/api/js?sensor=true');
    jQuery.getScript('http://maps.gstatic.com/intl/en_us/mapfiles/api-3/10/20/main.js');
  },1000); 
```

# java - 在网络上定位 IP

> ID：14476695
> 
> 赞同：1
> 
> 时间：2013-01-23T09:50:42.487
> 
> 标签：java, android

我已经在网上搜索了这个，但没有成功。这是我的问题：我正在开发一个应用程序，它从与以太网屏蔽连接的 arduino 读取数据。我可以通过内部网络（家庭网络）或通过 Internet 连接到它。

问题是我需要知道本地网络上是否存在 arduino，如果没有，则在外部 IP 地址上查找它。我曾尝试使用 ping 功能，但它不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:56:24.853

我想你知道 arduino 的 IP 地址吗？你有没有试过把你的 pc\laptop 放在与设备相同的子网中，例如，如果 arduino 的 IP 地址为 10.254.103.20，你可以更改你的笔记本电脑\pc 的 IP到 10.254.103.21 再ping一下？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:58:01.297

一方面，如果您的路由器支持 NAT 环回（大多数都支持，但您可能必须启用它），您始终可以连接到外部 IP 地址，无论您是在 LAN 还是 WAN 上。

干杯，

# cluster-analysis - 使用向量名称转储聚类结果

> ID：14476706
> 
> 赞同：2
> 
> 时间：2013-01-23T09:51:06.073
> 
> 标签：cluster-analysis, mahout

[我已经按照这个问题](https://stackoverflow.com/questions/8785392/how-to-perform-k-means-clustering-in-mahout-with-vector-data-stored-as-csv)中的描述创建了我的向量，并在数据上运行`mahout kmeans`。

由于我使用的是 Mahout 0.7，因此该`clusterdump`命令无法按照 Mahout in Action 中的描述工作，但我让它像这样工作：

```
export HADOOP_CLASSPATH=/path/to/mahout-distribution-0.7/core/target/mahout-core-0.7-job.jar:/path/to/mahout-distribution-0.7/integration/target/mahout-integration-0.7.jar
hadoop jar core/target/mahout-core-0.7-job.jar org.apache.mahout.utils.clustering.ClusterDumper -i /clustering/out/clusters-20-final -o textout -of TEXT 
```

我得到这样的台词：

```
VL-1383471{n=192 c=[0.180, -0.087, 0.281, 0.512, 0.678, 1.833, 2.613, 0.313, 0.226, 1.023, 0.229, -0.104, -0.461, -0.553, -0.318, 0.315, 0.658, 0.245, 0.635, 0.220, 0.660, 0.193, 0.277, -0.182, 0.497, 0.346, 0.658, 0.660, 0.191, 0.660, 0.636, 0.018, 0.519, 0.335, 0.535, 0.008, -0.028, 0.461, 0.229, 0.287, 0.619, 0.509, 0.566, 0.389, -0.075, -0.180, -0.461, 0.381, -0.108, 0.126, -0.728] r=[0.983, 0.890, 0.384, 0.823, 0.702, 0.000, 0.000, 1.132, 0.605, 0.979, 0.897, 0.862, 0.438, 0.546, 0.390, 0.171, 0.257, 0.234, 0.251, 0.106, 0.257, 0.093, 0.929, 0.077, 0.204, 0.218, 0.257, 0.257, 0.258, 0.257, 0.249, 0.112, 0.217, 0.157, 0.284, 0.197, 0.228, 0.229, 0.323, 0.401, 0.248, 0.217, 0.269, 1.002, 0.819, 0.706, 0.412, 0.964, 0.787, 0.872, 0.172]} 
```

这对我来说还没有用，因为我需要每个集群中我的向量的名称。我看到为文本文档创建了一个字典文件。如何为我的数据创建字典？

另外，使用`-of CSV`给了我一个空文件，我做错了吗？

我进行的另一个尝试是直接访问该`cluster-20-final/part-m-00000`文件，就像在[Mahout in Action 的清单 7.2 中](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/clustering/ch07/SimpleKMeansClustering.java#L89)所做的那样。原来它不包含`WeightedVectorWritable`but `ClusterWritable`，我可以从中获取`Cluster`实例但没有任何实际包含`Vector`的 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T03:00:21.637

有点晚了，但这可能会在某个时候对某个地方的人有所帮助。

跑步时

```
KMeansDriver.run(input, clustersIn, outputPath, measure, convergenceDelta, maxIterations, true, 0.0, false); 
```

其中一个输出是一个名为 clusteredPoints 的目录。那里有一个零件文件，其中包含所有群集的矢量。这意味着这样的事情

```
 IntWritable key = new IntWritable();
    WeightedVectorWritable value = new WeightedVectorWritable();

    Path clusteredPoints = new Path(output + "/" + Cluster.CLUSTERED_POINTS_DIR + "/part-m-00000");

    FileSystem fs = FileSystem.get(clusteredPoints.toUri(), new Configuration());

    try (SequenceFile.Reader reader = new SequenceFile.Reader(fs, clusteredPoints, fs.getConf())) {

        while (reader.next(key, value)) {
            // Do something useful here
            ((NamedVector) value.getVector()).getName();
        }

    } catch (Throwable t) {
        throw t;
    } 
```

似乎可以解决问题。使用类似的东西，当我使用 k-means 聚类和 Mahout 运行测试时，我能够很好地了解聚类在哪里。

当我这样做时，我使用的是 Mahout 0.8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T23:50:02.880

（一个非常晚的答案，但因为我只是花了一天时间弄清楚这一点，所以我会分享它）

您缺少的是向量维度名称到其索引的字典。clusterdump 将使用该字典为您提供向量中不同维度的名称。

运行 clusterdump 时，可以指定两个附加标志：

*   d：字典文件
*   dt：字典文件的类型（文本|序列文件）

这是一个示例调用：

```
mahout clusterdump -i clusteringExperiment/exp1/initialCentroids/clusters-0-final -d clusteringExperiment/dictionary/vectorDimensions -dt sequencefile 
```

您的输出将类似于：

```
VL-0{n=185 c=[A:0.006, G:0.550, M:0.011, O:0.026, S:0.000, T:0.072, U:0.096, V:0.010] r=[A:0.029, G:0.176, M:0.043, O:0.054, S:0.001, T:0.098, U:0.113, V:0.035]} 
```

请注意，字典是一个简单的键值文件，其中键是类别名称（字符串），值是数字索引。

# cryptography - 如何在 java 或 c++ 中实现分组密码操作模式？

> ID：14476712
> 
> 赞同：-1
> 
> 时间：2013-01-23T09:51:22.317
> 
> 标签：cryptography

我想在 c++ 或 java 中实现电子密码本 (ECB) 密码块链接 (CBC) 密码反馈 (CFB) 输出反馈 (OFB) 计数器 (CTR) 模式。但我不知道如何以及从哪里开始。任何人都可以建议我执行的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:06:25.433

这实际上非常简单，假设您有一个名为的函数，该函数`block_cipher_encrypt(plaintext, key)`接受一个明文块和一个密钥作为输入，并返回一个密文块。

现在，假设你有一个明文块数组（比如`pt[i]`第 i 个明文块）和一个密文块数组`ct`。要做欧洲央行，它将是：

```
 for i from 0 to len(pt)-1:  
  ct[i] = block_cipher_encrypt(pt[i], key) 
```

对于 CBC 模式，您还需要一个 IV，但它仍然非常简单：

```
 ct[0] = block_cipher_encrypt(XOR(pt[0], IV), key)
for i from 1 to len(pt):
  ct[i] = block_cipher_encrypt(XOR(pt[i], ct[i-1]), key) 
```

对于其他模式，只需查看 Wikipedia 关于[操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)的文章即可。它们为加密和解密提供了很好的框图。这就是我为上面的伪代码所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:00:28.583

java [Crypto API](http://docs.oracle.com/javase/1.4.2/docs/guide/security/CryptoSpec.html)是一个很好的起点。它简要介绍了构成 API 的类，以及它们的使用方式以及您必须扩展哪些类来实现自定义加密技术。您尝试做的大部分事情已经作为标准加密 API 的一部分提供，因此一旦您掌握了它，您只需根据您的目的对其进行自定义。

此外，还有官方的 java[指南](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html)，用于使用自定义加密技术扩展此 API，这也可能有用。

# php - 如何在此 PHP 代码中包含 title 属性

> ID：14476713
> 
> 赞同：0
> 
> 时间：2013-01-23T09:51:28.930
> 
> 标签：php, wordpress

```
<div class="alignleft">
<?php previous_post('&laquo; &laquo; %', 'Previous Post ', 'no'); ?>
</div>
<div class="alignright">
<?php next_post('% &raquo; &raquo; ', 'Next Post ', 'no'); ?>
</div> 
```

嗨，我已经粘贴了 wordpress 旧版和新版帖子代码，当用户将鼠标悬停在这些链接上时，我想显示帖子标题。如何包括...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:56:18.360

检查[这个](https://stackoverflow.com/a/11383074/22470)和[这个](https://stackoverflow.com/a/11379623/22470)答案。

两次他们都使用 Wordpress 功能来接收标题并手动构建链接。

根据[这个问题和答案](https://wordpress.stackexchange.com/questions/57831/get-the-prev-next-page-links-only-not-title-a-etc)，有一个名为[`get_previous_posts_page_link()`](http://codex.wordpress.org/Function_Reference/get_previous_posts_link).

# c# - 如何在asp.net中获取客户端的mac地址？

> ID：14476714
> 
> 赞同：2
> 
> 时间：2013-01-23T09:51:30.470
> 
> 标签：c#, asp.net

我想在 asp.net 中获取我的网站访问者的 mac 地址，我该怎么做？

此代码获取主机mac地址

```
 ManagementClass objMC = new  ManagementClass("Win32_NetworkAdapterConfiguration");
        ManagementObjectCollection objMOC = objMC.GetInstances();

        foreach (ManagementObject objMO in objMOC)
        {
            if (!(bool)objMO["ipEnabled"])
                continue;

            string a = ((string)objMO["MACAddress"]);
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T09:53:42.750

您无法获取访问者的 MAC，因为 MAC 地址无法像 IP 地址那样在不同主机之间的跃点中存活。您最多可以获得最接近服务器的交换机的 MAC，即使在这种情况下，我也不确定从 ASP.NET 技术上是否可行。

# axapta - 如何将视图传递给 queryRun？

> ID：14476718
> 
> 赞同：0
> 
> 时间：2013-01-23T09:51:36.043
> 
> 标签：axapta, dynamics-ax-2009, x++, rdp, dynamics-ax-2012

我喜欢将视图传递给“QueryRun”。如果我输入这一行，我在 Visual Studio 中有错误：

```
ProjPostTransView = queryRun.get(tablenum(ProjPostTransView)); 
```

但如果我把这条线我没有任何错误：

```
custTable = qeuryRun.get(tablenum(CustTable)); 
```

最后一行不会产生错误，因为我觉得“table”到“queryrun”。现在我需要过去一个“视图”而不是表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:19:05.593

如果您试图从中获取`ProjPostTransView`视图`ProjTransQuery`，那将无法正常工作。`ProjPostTransView`不是该查询的数据源。它是一个从属对象。这意味着视图引用了查询。不是反过来。（参考： http: [//msdn.microsoft.com/en-us/library/bb278121](http://msdn.microsoft.com/en-us/library/bb278121(v=ax.50).aspx) (v=ax.50).aspx ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:04:42.893

好吧，您想要的表或视图`get`必须是在“静态”查询中定义的表或视图之一：`queryRun.query()`.

```
queryRun = new QueryRun(queryStr(CustTableQuery)); 
```

在这里，期望 queryRun`get`除了`CustTable`.

要查看 SQL（包括`FROM`表），请使用：

```
info(queryRun.query().dataSourceNo(1).toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:57:22.417

这个很好用，但不是我需要的

![这个很好用，但不是我需要的](../Images/fb9bf56c19ce147427b4eafe4ab5e112.png)

如果我使用表格而不是查看，我将以这个代码为例：

![如果我使用表格而不是查看，我将以这个代码为例](../Images/e492eb63870d451019772ed8012ec66d.png)

# android - 以编程方式显示所有可用的布局

> ID：14476719
> 
> 赞同：0
> 
> 时间：2013-01-23T09:51:36.660
> 
> 标签：android, android-layout, layout

我正在尝试以编程方式显示所有布局实际上我可以在纯 Java 中做到这一点，但不能在 android 中

这是我的第一堂课：

```
public DiskFileExplorer(String path, Boolean subFolder) {
    super();
    this.initialpath = path;
    this.recursivePath = subFolder;
}

public String[] list() {
    return this.listDirectory(this.initialpath);
}

@SuppressWarnings("null")
private String [] listDirectory(String dir) {
    String[] values = null;
    File file = new File(dir);
    File[] files = file.listFiles();
    if (files != null) {
        for (int i = 0; i < files.length; i++) {
            if (files[i].isDirectory() == true) {
                //Log.v("Dossier" , files[i].getAbsolutePath());
                this.dircount++;
            } 
            else {
                //Log.v("Fichier" ,files[i].getName());
                values[i] = files[i].getName();
                this.filecount++;
            }
            if (files[i].isDirectory() == true && this.recursivePath == true) {
                this.listDirectory(files[i].getAbsolutePath());
            }
        }
    }
    return values;
} 
```

第二个：

```
public class MainActivity extends Activity {
    public String []DiskFileExplorer(String path, Boolean subFolder){
        return null;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ListView listView = (ListView) findViewById(R.id.mylist);
        String pathToExplore = "./res/layout";
        DiskFileExplorer d_expl = new DiskFileExplorer(pathToExplore,true);
        String[] values = d_expl.list();
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, values);
        listView.setAdapter(adapter); 
    }
} 
```

和我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

并且最终是可以在android中做我想做的事情的纯java类：

```
import java.io.File;

/**
 * Lister le contenu d'un répertoire
 * @author fobec 2010
 */
public class DiskFileExplorer {

    private String initialpath = " ";
    private Boolean recursivePath = false;
    public int filecount = 0;
    public int dircount = 0;

   /**
    * Constructeur
    * @param path chemin du répertoire
    * @param subFolder analyse des sous dossiers
    */
    public DiskFileExplorer(String path, Boolean subFolder) {
        super();
        this.initialpath = path;
        this.recursivePath = subFolder;
    }

    public void list() {
        this.listDirectory(this.initialpath);
    }

    private  void listDirectory(String dir) {
        File file = new File(dir);
        File[] files = file.listFiles();

        if (files != null) {
            for (int i = 0; i < files.length; i++) {
                if (files[i].isDirectory() == true) {
                    System.out.println("Dossier" + files[i].getAbsolutePath());
                    this.dircount++;
                } else {
                    System.out.println("" + files[i].getName());

                    this.filecount++;
                }
                if (files[i].isDirectory() == true && this.recursivePath == true) {
                    this.listDirectory(files[i].getAbsolutePath());
                }
            }
        }
    }

    /**
     * Exemple : lister les fichiers dans tous les sous-dossiers
     * @param args
     */
    public static void main(String[] args) {
        String pathToExplore = "C:/Users/R_nkusi/workspace/Copy of AppList_bis/res/layout";
        DiskFileExplorer diskFileExplorer = new DiskFileExplorer(pathToExplore, true);
        Long start = System.currentTimeMillis();

        diskFileExplorer.list();

        System.out.println("----------");
        System.out.println("Analyse de " + pathToExplore + " en " + (System.currentTimeMillis() - start) + " mses");
        System.out.println(diskFileExplorer.dircount + " dossiers");
        System.out.println(diskFileExplorer.filecount + " fichiers");
    }
} 
```

当然，您必须更改“pathToExplore”并提供一个存在于您自己计算机中的路径。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:27:05.300

你可以读出你自己的 XML 布局文件，但你在文件系统中找不到它，因为它都是经过编译的，因此不是人类可读的。

获取所有布局资源 ID 及其实际名称：

```
void getIds() {
    Field[] ID_Fields = R.layout.class.getFields();
    int[] resArray = new int[ID_Fields.length];
    for(int i = 0; i < ID_Fields.length; i++)
        try {
            resArray[i] = ID_Fields[i].getInt(null);
            System.out.println(resArray[i] + " : " + getResources().getResourceEntryName(resArray[i]));
            getEventsFromAnXML(getResources().getXml(resArray[i])); //I'll show this later
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
} 
```

但是，您需要自己解析 XML。这是一个小例子：

```
private String getEventsFromAnXML(XmlResourceParser xpp) throws XmlPullParserException, IOException {
    StringBuffer stringBuffer = new StringBuffer();
    xpp.next();
    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT) {
        if(eventType == XmlPullParser.START_DOCUMENT) {
            stringBuffer.append("--- Start XML ---");
        }
        else if(eventType == XmlPullParser.START_TAG) {
            stringBuffer.append("\nSTART_TAG: "+xpp.getName());
        }
        else if(eventType == XmlPullParser.END_TAG) {
            stringBuffer.append("\nEND_TAG: "+xpp.getName());
        }
        else if(eventType == XmlPullParser.TEXT) {
            stringBuffer.append("\nTEXT: "+xpp.getText());
        }
        eventType = xpp.next();
    }
    stringBuffer.append("\n--- End XML ---");
    System.out.println(stringBuffer.toString());
    return stringBuffer.toString();
} 
```

我希望这些代码可以帮助你到达你想要的地方。

```
new AlertDialog.Builder(this)
.setTitle("Seen?")
.setMessage("Some message.")
.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) { 
        // ok
    }
 })
.setNegativeButton("No", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) { 
        // no
    }
 })
 .show(); 
```

# svn - Subversion 存储库位置显示在所有托管域上

> ID：14476722
> 
> 赞同：1
> 
> 时间：2013-01-23T09:51:52.627
> 
> 标签：svn, apache2, mod-dav-svn

我最近遇到了 403 错误问题，[此处的答案已解决](https://stackoverflow.com/questions/488778/how-do-i-list-all-repositories-with-the-svnparentpath-directive-on-apachesvn)

但是我有 2 个域指向我的家庭服务器，问题是它们都显示存储库

所以`www.domain1.com/repos`并`www.domain2.com/repos`显示存储库，但我只想`www.domain2.com/repos`显示它。

如何做到这一点？我尝试将位置添加`dav_svn.conf`到我的`000-default`文件中，但这不起作用，我还想强制使用 https。有什么建议么？

**/etc/apache2/mods-enabled/dav_svn.conf**

```
<Location /repos>
DAV svn
SVNParentPath /var/svn
SVNListParentPAth on
AuthType Basic
AuthName "Subversion Repository"
AuthUserFile /etc/apache2/dav_svn.passwd
Require valid-user
</Location> 
```

**/etc/apache2/sites-enabled/000-default**

```
<VirtualHost *:80>
        ServerAdmin me@domain.com
        ServerName domain1.com

        DocumentRoot /var/www/domain1.com
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/domain1.com/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/domain1.error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/domain1.access.log combined
</VirtualHost>
<VirtualHost *:80>
        ServerAdmin webmaster@domain2.com
        ServerName domain2.com
        DocumentRoot /var/www/domain2.com
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/domain2.com/>
                Options FollowSymLinks Indexes Multiviews
                AllowOverride none
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost>

<VirtualHost *:443>
     ServerAdmin webmaster@domain1.com
     ServerName domain1.com
     DocumentRoot /var/www/domain1.com
     SSLEngine On
     SSLCertificateFile    /etc/apache2/ssl/domain1.com.crt
     SSLCertificateKeyFile /etc/apache2/ssl/domain1.com.key
     SSLProtocol all
    SSLCertificateKeyFile /etc/apache2/ssl/domain1.com.key
     SSLProtocol all
     SSLCipherSuite HIGH:MEDIUM
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin webmaster@domain2.com
    ServerName domain2.com

    <Location repos/>
        DAV svn
        SVNParentPath /var/svn/
        AuthType Basic
        AuthName "Repository of Ancient Knowledge"
        AuthUserFile /etc/apache2/dav_svn.passwd
        Require valid-user
    </Location>

    DocumentRoot /var/www/domain2.com
    SSLEngine On
    SSLCertificateFile    /etc/apache2/ssl/domain2.com.crt
    SSLCertificateKeyFile /etc/apache2/ssl/domain2.com.key
    SSLProtocol all
    SSLCipherSuite HIGH:MEDIUM

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:07:26.400

如果您只想在一个虚拟主机中拥有 SVN，则必须仅在该虚拟主机**的**`<Location>`容器内添加容器。

 **现在**mods-enabled/dav_svn.conf**被添加到“主”站点并共享所有 virthosts**

# sql - 按计数排序查询

> ID：14476723
> 
> 赞同：1
> 
> 时间：2013-01-23T09:51:59.227
> 
> 标签：sql, ruby-on-rails, rails-activerecord

我有以下代码检索以下查询的计数：

```
<% @count = Model.find(:all, :conditions =>
              {:action => actions, :controller => tempController}).count %> 
```

我只是想知道如何让这个查询按检索到的计数从高到低排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:29:41.380

从视图调用模型只是违反 MVC。这是错误的方式

```
<% @count = Model.where({:action => actions, 
                         :controller => tempController}).order("column_name").count %> 
```

# perl - 如何禁用模块 Image::EXIF 中的警告

> ID：14476725
> 
> 赞同：0
> 
> 时间：2013-01-23T09:52:01.410
> 
> 标签：perl, exif

再会！当您运行此脚本时：

```
#!/usr/bin/perl
use strict;
use warnings;

use Image::EXIF;
my $exif = new Image::EXIF($ARGV[0] || 'image3.jpg'); 
```

显示警告（所有图片都没有警告。）：

(null): 未知的 TIFF 字段类型；丢弃（未知）

是否可以抑制此警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:05:52.443

查看该模块的源代码，它有一个 XS 原生部分，调用的 c 函数如下所示（在文件“exifutil.c”中）：

```
void exifwarn2(const char *msg1, const char *msg2)
{
    fprintf(stderr, "%s: %s (%s)\n", progname, msg1, msg2);
} 
```

如您所见，它打印到 STDERR，因此您可以在调用 Image::EXIF 构造函数之前正确处理 STDERR。[这个 SO question](https://stackoverflow.com/questions/1348639/how-can-i-reinitialize-perls-stdin-stdout-stderr)可能会对您有所帮助。

# android - PhoneGap NFC 插件

> ID：14476737
> 
> 赞同：0
> 
> 时间：2013-01-23T09:52:30.017
> 
> 标签：android, cordova, nfc, phonegap-plugins

我已经设法在 Android 2.3 手机上运行 phonegap nfc 插件，但是，当我运行应用程序并扫描标签时，我得到标签类型：未定义，最大尺寸：未定义....似乎无法读取标签详细信息，包括标签的唯一 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:50:08.183

我认为这与[phonegap-nfc/issues/53](https://github.com/chariotsolutions/phonegap-nfc/issues/53)相同。

插件开发人员在电子邮件中表示，他将尝试修复它。

# dart - 使用新库删除事件侦听器

> ID：14476738
> 
> 赞同：8
> 
> 时间：2013-01-23T09:52:49.977
> 
> 标签：dart

如何删除我之前使用新 dart 库注册的事件的侦听器？

我用它来监听新库的事件：

```
element.onMouseMove.listen 
```

这个的等效版本是什么？

```
element.on.mouseMove.remove 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T10:05:07.513

`element.onMouseMove.listen(...)`返回一个[StreamSubscription](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html)。只需调用其[cancel()](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html#cancel)方法即可停止接收事件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-23T10:14:51.783

除了 Alexandre 的回答之外，代码中的具体示例如下所示：

```
import 'dart:html';

void main() {
  var listener = (e) => print("Moved");

  var element = query("#text");
  var streamsub = element.onMouseMove.listen(listener); // <--- add the listener

  var reverseText= (Event event) {
    var text = query("#text").text;
    var buffer = new StringBuffer();
    for (int i = text.length - 1; i >= 0; i--) {
      buffer.add(text[i]);
    }
    query("#text").text = buffer.toString();

    streamsub.cancel(); // <----   stop listening
  };

  element
    ..text = "Click me!"
    ..onClick.listen(reverseText);    
} 
```

当您将鼠标移到“点击我！”时，这会打印“已移动”。文本（来自标准飞镖示例）。单击时，它会停止。

# php - 为什么 Zend 的 FlashMessenger getMessages 方法不起作用？

> ID：14476740
> 
> 赞同：0
> 
> 时间：2013-01-23T09:52:53.323
> 
> 标签：php, zend-framework

我正在使用 Zend 1.12 和 php 5.4.3 并且 flashMessenger->getMessages() 突然停止在控制器操作中工作。

在AController中，创建了某种类型的账户，创建它需要9个步骤，所以我有9个动作create1-9Action

在每一步中，我使用 flashmessenger 将表单数据传递到下一步。这是一个动作的典型结构：

```
public function create5Action()
{
  $form = new My_Form();
  $messages = $this->_helper->flashMessenger->getMessages();
  $data = $messages[0];
  if ($this->_request->isPost())
  {
    if ($form->isValid($this->_request->getPost()))
    {
       /* form treatment */

      $this->_helper->flashMessenger->addMessage($data);
      $this->_redirect($this->_helper->url("create6", "A", null)); // redirect to next step
    }
  }

  $this->_helper->flashMessenger->addMessage($data);
  $this->view->form = $form;
} 
```

在此操作（create5）中，从 create4Action 到达时数据是完整的，之前将其作为消息添加时是完整的`$this->view->form = $form;`，但是当我将新元素添加到表单并提交时，它`$messages = $this->_helper->flashMessenger->getMessages();`是空的，我不知道为什么，因为它正在为所有其他操作工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:19:57.767

您可能错过了`else`在`isPost()`循环中添加。

```
public function create5Action()
{
  $form = new My_Form();
  $messages = $this->_helper->flashMessenger->getMessages();
  $data = $messages[0];
  if ($this->_request->isPost())
  {
    if ($form->isValid($this->_request->getPost()))
    {
       /* form treatment */

      $this->_helper->flashMessenger->addMessage($data);
      $this->_redirect($this->_helper->url("create6", "A", null)); // redirect to next step
    }
  } else {

      $this->_helper->flashMessenger->addMessage($data);
      $this->view->form = $form;
    }
} 
```

然而，这不是 flash messenger 的预期用途。我认为您的问题的一部分是每次发出请求时，都会`postDispatch()`在调度循环的部分期间清除 flash messenger 命名空间。

您最好使用自己的[Zend_Session_Namespace](http://framework.zend.com/manual/1.12/en/zend.session.basic_usage.html)实例，而不是依赖 flash messenger 正在使用的实例。

```
public function create5Action()
    {
      $session = new Zend_Session_Namespace('data');//set elsewhere and forwarded and can be persistent
      $form = new My_Form();     
      $data = $session->data;
      if ($this->_request->isPost())
      {
        if ($form->isValid($this->_request->getPost()))
        {
           /* form treatment */

          $session->newData = $newData;//forward data if needed, old data will persist as you require
          $this->_redirect($this->_helper->url("create6", "A", null)); // redirect to next step
        }
      } else {
          $this->view->form = $form;
        }
    } 
```

# java - jQuery.print-preview 在 IE9 中不起作用

> ID：14476742
> 
> 赞同：0
> 
> 时间：2013-01-23T09:52:59.303
> 
> 标签：java, jquery, jquery-plugins, internet-explorer-9

[我有一个名为jQuery.print-preview](https://github.com/etimbo/jquery-print-preview-plugin)的插件有这个问题。它在 FF、Safari 等中运行良好。出于某种原因（我认为）它与谷歌在 IE9 中的自定义搜索插件冲突。如果我添加一个元标记来告诉 IE 使用 IE7，它可以正常工作。但这并不真正令人满意，因为页面在 IE7 下呈现有点不同。

我已将所有文件放在我的测试文件夹中： http: [//tinyurl.com/blnlaym](http://tinyurl.com/blnlaym)

希望你能帮助我。

亲切的问候，

于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:40:58.043

唉，我刚刚发现整个问题是由于加载几个脚本的顺序造成的。我是不小心弄乱了顺序的。我以前这样做是为了解决这个问题，但显然我忽略了一些东西。

好的，考虑解决这个问题。

于尔根

# azure - Windows Azure 多站点/多域

> ID：14476743
> 
> 赞同：1
> 
> 时间：2013-01-23T09:52:59.537
> 
> 标签：azure

我在做一项研究，Azure VM 是否有可能拥有多站点 - 多域？它会增加我的订阅费用吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:06:21.530

您预配 Azure VM，并且只需为该 VM 付费。

您可以在该 VM 上自由设置多个网站（多个域），这不会增加您的 VM 成本。

请记住，当前 Azure VM 处于*预览阶段*，一旦*预览*结束，价格可能会发生变化。

我还建议您关注[常见问题](http://www.windowsazure.com/en-us/pricing/licensing-faq/)页面，它可以帮助您解决其他问题。

# c# - 在silverlight中获取xml中的所有节点名称

> ID：14476744
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:53:00.483
> 
> 标签：c#, xml, silverlight

我创建了一个这样的 xml

```
<names>
<name>
nixon
</name>
</names> 
```

我想使用 xdocument 通过 foreach 循环或 silverlight 中的任何其他循环迭代每个节点名称。

我怎样才能得到这个节点名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:59:11.503

您可以使用 XElement 的 DescendantsAndSelf() 方法获取所有节点及其名称。

```
foreach (XElement child in doc.Root.DescendantsAndSelf())
{
    Console.WriteLine(child.Name.LocalName);
} 
```

**DescendantsAndSelf()**按文档顺序返回包含该元素的元素集合，以及该元素的所有后代元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:59:20.937

使用**LinqToXml**：

```
var xDoc = XDocument.Parse(mySmlString);
var names = xDoc.Root.Elements("name").Select(x=> x.Value.Trim()).ToArray();
foreach (var name in names)
{
    System.Console.WriteLine(name);
} 
```

# c++ - 替代读取文件所需的 std::getline

> ID：14476747
> 
> 赞同：1
> 
> 时间：2013-01-23T09:53:09.080
> 
> 标签：c++, file-io, c++11, getline

考虑以下从文本文件中读取一行并将其标记化的方法：

```
std::pair<int, int> METISParser::getHeader() {

    // handle header line
    int n;  // number of nodes
    int m;  // number of edges

    std::string line = "";
    assert (this->graphFile);
    if (std::getline(this->graphFile, line)) {
        std::vector<node> tokens = parseLine(line);
        n = tokens[0];
        m = tokens[1];
        return std::make_pair(n, m);
    } else {
        ERROR("getline not successful");
    }

} 
```

崩溃发生在`std::getline`（`pointer being freed was not allocated`- 不会在这里详细介绍）。*如果我在其他系统上编译我的代码并且很可能不是我自己的代码中的错误，则不会发生崩溃。*目前我无法解决这个问题，而且我没有时间，所以我会在你的帮助下尝试绕过它：

你能建议一个不使用的替代实现`std::getline`吗？

编辑：我在带有 gcc-4.7.2 的 Mac OS X 10.8 上。我使用 gcc-4.7 在 SuSE Linux 12.2 上进行了尝试，没有发生崩溃。

编辑：一个猜测是`parseLine`破坏了字符串。这是完整性的代码：

```
static std::vector<node> parseLine(std::string line) {

    std::stringstream stream(line);
    std::string token;
    char delim = ' ';
    std::vector<node> adjacencies;

    // split string and push adjacent nodes
    while (std::getline(stream, token, delim)) {
        node v = atoi(token.c_str());
        adjacencies.push_back(v);
    }

    return adjacencies;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:21:59.243

你总是可以编写自己的更慢更简单的`getline`，只是为了让它工作：

```
istream &diy_getline(istream &is, std::string &s, char delim = '\n')
{
    s.clear();
    int ch;
    while((ch = is.get()) != EOF && ch != delim)
        s.push_back(ch);
    return is;
] 
```

# wpf - 无法使动画工作 WPF

> ID：14476749
> 
> 赞同：1
> 
> 时间：2013-01-23T09:53:23.310
> 
> 标签：wpf, wpf-controls

我不能使这个动画工作：

```
 <Ellipse Opacity="0.7" Width="150" Height="50" StrokeThickness="5">
        <Ellipse.Triggers>
                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                <DoubleAnimation From="0" To="100" Duration="0:0:2" Storyboard.TargetProperty="LayoutTransform.Y" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
        </Ellipse.Triggers>
    </Ellipse> 
```

基本上它是`Ellipse`从 Y 的起点转换到 Y 的终点。但基本上，它不动，并引发错误......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:02:36.263

动画`LayoutTransform`不会移动对象。您正在寻找的是[RenderTransform](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)属性的动画：

您必须将[TranslateTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.translatetransform.aspx)放入`Ellipse.RenderTransform`并更改`Storyboard.TargetProperty`：

```
<Ellipse Opacity="0.7" Width="150" Height="50" StrokeThickness="5" Stroke="Black">
    <Ellipse.RenderTransform>
        <TranslateTransform />
    </Ellipse.RenderTransform>
    <Ellipse.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                        <DoubleAnimation From="0" To="100" Duration="0:0:2"
                            Storyboard.TargetProperty="RenderTransform.Y" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Ellipse.Triggers>
</Ellipse> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:13:36.607

为了简单起见，您可以将省略号放在画布中：

```
 <Canvas>
            <Ellipse Width="30" Height="30" Fill="Purple" Canvas.Top="0" >
                <Ellipse.Triggers>
                    <EventTrigger RoutedEvent="FrameworkElement.Loaded" >
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:5"  AutoReverse="True" Storyboard.TargetProperty="(Canvas.Top)" To="100" RepeatBehavior="Forever" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Ellipse.Triggers>
            </Ellipse>
        </Canvas> 
```

# iphone - 无法将值从一个视图控制器传递到情节提要上的另一个视图控制器

> ID：14476751
> 
> 赞同：0
> 
> 时间：2013-01-23T09:53:24.463
> 
> 标签：iphone, ios, objective-c

我有一个问题，我`WSLogin`从我的`Loginviewcontroller`. 它成功返回了我的用户*sessionId*。然后我将此*sessionId*存储到字符串中并将此值发送到`Searchviewcontroller`但未成功将值提交到`Searchviewcontroller`.

当我成功登录时，我`Searchviewcontroller`通过标签栏控制器移动到。`NSLog`我在成功登录后`searchviewcontroller`单击时生成检查会话的值，然后返回给我，请告诉我如何解决这个问题？`searchtabbar``NSLog session id = null`

这是代码

```
// LoginViewController.m file 
-(IBAction)Login:(id)sender
{
    wsobject = [[WSLogin alloc] init];
    sessId = wsobject.sessionId;
    NSLog(@"sessionidd = %@",sessId);
// it successfully return session id 
}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    SearchViewController *afc = (SearchViewController *) segue.destinationViewController;
    afc.sessionId = sessId;
// i have create sessionId property in SearchViewController 
}
// SearhViewController.m file 
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"sessionId = %@",sessionId);
//printing sessionId value but getting Null here when click on Searhtabbar
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T05:47:02.263

我假设您已经为它进行了 segues，并且在身份检查器中给它起了一个名字，比如“goToNextView”。现在将以下代码放在您要跳转到下一个视图控制器的位置

```
-(IBAction)methodName:(id)sender
{
    [self performSegueWithIdentifier:@"goToNextView" sender:self];
} 
```

然后在您的代码中修改为这样的 segue 委托方法做准备

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
            if ([segue.identifier isEqualToString:@"goToNextView"]) {
         DestinatonViewController *controller = segue.destinationViewController
        // set the properties value you want for destination View Controller
                controller.propertyName = yourValue; 
```

希望这会有所帮助..

# java - 反射中的超类构造函数问题

> ID：14476752
> 
> 赞同：1
> 
> 时间：2013-01-23T09:53:25.853
> 
> 标签：java

我有 2 类 A 类和 B 类，其中`Class A extends Class B`

现在在 Class A 的构造函数中，我有

```
Class A(Integer integerParam){

     B superclass = new B(integerParam);

} 
```

B类的构造函数为

```
Class B(Integer integerParam) {

    System.out.println(integerParam);
} 
```

除此之外，我在 B 类中有一些方法如下

```
public void ClassBMethod(){
     System.out.println(integerParam);
} 
```

我想使用反射来调用超类方法ClassBMethod，我创建了一个超类的实例来这样做

```
Class superClazz = Class.forName(classInstance.getClass().getSuperclass().getName());
Constructor superClassconstructor = superClazz.getConstructor(new Class[]{Integer.class});
Object superclassInstance = superClassconstructor.newInstance(integerParam); 
```

问题在于，Super 类的实例被创建了两次，一次通过 A 类构造函数，第二次通过反射。

如何在不创建实例的情况下调用避免这种情况并调用 Super 类方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:56:24.367

每当调用一个类的构造函数时，都会调用其超类的构造函数，然后调用层次结构中上一层类的构造函数`Object`。没有办法避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:05:52.490

我不是 100% 确定，但我认为你可能想要这样做......

```
A classInstance= new A(42);
Class superClazz = Class.forName(classInstance.getClass().getSuperclass().getName()); // or just superClazz = classInstance.getClass().getSuperClass();
Method classBMethod = superClazz.getMethod("classBMethod");
classBMethod.invoke(classInstance); // Invoke classBMethod on existing instance, without using any constructor reflectively 
```

换句话说，如果我理解正确，您不希望构造函数被调用两次吗？您想`classBMethod()`在已经存在的实例上调用？

* * *

* * *

此外，A 的构造函数看起来很奇怪。从构造函数的签名来看，A 构造函数最有意义的是：

```
public A(Integer integerParam){
    super(integerParam);
} 
```

对此的解释：

让我们将 A 类和 B 类与更具体的对象进行比较：

```
class A <--> class Apple
class B <--> class Fruit
Integer integerParameter <--> double weight 
```

如果您正在执行构造函数：

```
public Apple(double weight){
    super(weight);
} 
```

您本质上是说，当您创建一个苹果 ( `new Apple(someWeight);`) 时，该苹果是一种重量 == someWeight 的水果。

如果你正在做：

```
public Apple(double weight){
    Fruit b = new Fruit(weight);
} 
```

这意味着：当你打电话时，`new Apple(someWeight)`你创造了一个不同的水果`b`（不是苹果本身），你给了一些重量。所以基本上你所拥有的是一个重量不详的苹果和另一个重量不详的水果。由于其他水果是在构造函数中声明的，所以一旦构造函数完成，其他水果就会消失。唯一剩下的是一个未指定重量的苹果（或默认构造函数指定的默认重量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:11:43.267

您可以在 A 类中写：`super.ClassBMethod()`。

如果您需要使用反射（这是一项家庭作业吗？），请遵循 Alderath 的答案。我只会在那里简化一行：

```
Class superClazz =classInstance.getClass().getSuperclass() 
```

要不就

```
Class superClazz = B.class; 
```

# stored-procedures - Visual Basic 6：执行存储过程时出现错误 91 和 13

> ID：14476753
> 
> 赞同：0
> 
> 时间：2013-01-23T09:53:27.197
> 
> 标签：stored-procedures, vb6, connection

我是 Visual Basic 6 的新手，我正在尝试执行存储过程并将结果放入文本字​​段变量中。

下面的代码显示此错误：错误 91“对象变量或未设置块变量”运行时错误

```
Dim auxInfo As rdoResultset
Dim Cone As ADODB.Connection
    SQL = "EXEC  [mybase].[dbo].[myStoredProcedure] '" & var1 & "', '" & var2 & "','" & var3 & "'"
    Set auxInfo = Cone.Execute(SQL)
    myTextField.Text = Trim(auxInfo("fistColumn"))
    auxInfo.Close 
```

如果我更改以下内容：

```
Set auxInfo = Cone.Execute(SQL) 
```

进入

```
 Set auxInfo = UAN.OpenResultset(SQL, rdOpenDynamic, rdConcurValues, 0)
'with UAN I call the funcion that connects to my database. The connection works, I've tested it. 
```

我收到一个新错误：错误 13 类型不匹配

请告诉我我做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:21:39.240

正如错误所说，你实际上并没有设置`Cone`任何东西。你错过了`Set Cone = New ADODB.Connection`.

# delphi - 通过 ADOConnectionstring 从 delphi-7 应用程序建立 ODBC 连接

> ID：14476755
> 
> 赞同：0
> 
> 时间：2013-01-23T09:53:28.393
> 
> 标签：delphi, delphi-7, delphi-6

**背景 ：**

用 Delphi-7 或 -6 编写的应用程序（通过 .exe 文件进行搜索）。称为Sigmanest。

我已经搬到了新服务器，剩下的是在 SQL 服务器下运行的 SigmaNest 数据库。经过数小时的故障排除将该数据库迁移到新服务器。问题已经涵盖了这个 SQL Server 应用程序的所有方面。默认情况下服务未启动，向导无法正常工作，缺少全文内容，可笑的许多地方都需要右键单击等等。丢失的东西还在继续。

目前，我在新硬件上有一个带有数据库 SNDBase (sigmanest) 的工作 SQL 服务器，但无法从客户端连接。

不，这不可能是正确的，我想并搜索了替代方案。在 MySQL 工作台中单击 4-5 次，然后我在测试 linux 盒子上运行它...很好..

但现在问题来了。

SigmaNest 使用`ini`文件进行配置。

所以在一个`ini`文件中我发现

```
; 1 = Paradox, 2 = MSSQLServer or MSDE
ADOConnectionString=Provider=SQLOLEDB.1;Data Source=ODIN\SIGMANEST;User ID=sigmanest;Password="";Persist Security Info=True;Initial Catalog=SNDBase; 
```

Okej .. 在客户端上安装了 Mysql odbc 驱动程序并建立了连接。到目前为止所有工作..

转到谷歌，找到了 mysql 的 ADOConnectionsstring ......

```
ADOConnectionString=DRIVER={MySQL ODBC 5.2a Driver};SERVER=192.168.100.19;PORT=3306;DATABASE=SNDBase;UID=sigmanest;PASSWORD=;OPTION=4; 
```

但应用程序不会启动。只需返回 sigmanest 的 db 连接配置工具即可。

已将此发布到 SigmaTek，但我给出的唯一回复是通过 SQLOLEDB 为 MS sql 服务器提供 ADOConnection 字符串的邮件。

搜索了驱动器并没有找到 anny dbex*.dll 文件，这意味着它们不使用 dbExpress 组件（我的猜测）。

那么是否有一些丢失的 dll 文件没有随应用程序提供。或者这种东西是在程序内部硬编码的吗？

有人知道如何进行吗？

或者我应该放弃 mysql 的梦想，去浪费空间的 sql server 后端。

尼尔斯

PS。SigmaNest.exe 的时间戳为 2006-05-19 DS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:05:56.480

对不起，但我不知道去哪里解决这个问题。可以这么说，stackoverflow 似乎已经把世界上所有有才华的人都聚集在了一个屋檐下。

Ken White：是的，你是对的，我不能在这个应用程序上使用 MySQL（经过数小时的谷歌搜索和测试）。

无论如何，我设法建立了这样的连接（也许某些东西对其他人有用，其中一些与 Delphi 相关）

*   首先你必须下载 mysql 连接器 [http://dev.mysql.com/downloads/connector/odbc/](http://dev.mysql.com/downloads/connector/odbc/)

*   从“用户 DSN”选项卡下的控制面板-> 管理工具-> 数据源 (ODBC) 建立 ODBC 连接

*   您使用记事本创建一个新的文本文件。

*   使用扩展名 .udl 重命名文件

*   双击它并填写对话框...

*   在记事本中打开文件，您就有了 adoconnection 字符串。

但是你的问题还没有结束.. SQL 与 MySQL 的差异将使您的应用程序停止.. 例如，MySQL 中的布尔值被声明为 tinyint (0=false 1=true)

这里提到了一种解决方法 [http://www.i-logic.com/utilities/MySQL.htm](http://www.i-logic.com/utilities/MySQL.htm)

所以我的斗争没有得到任何回报，但上面的一些可能会引起其他人的兴趣。

每尼尔斯..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T01:42:43.897

可以在运行时配置 ODBC，下面是配置 ODBC 以使用 BDE 连接到 SQL Server 的示例。

```
unit uBDEConnectionSqlServer;

interface

uses
    DBTables, Windows, Classes, SysUtils;

type TBDEConnectionSqlServer = class(TComponent)
  private
    { Private declarations }
    function CreateOBDCConnection(dataBase : string; server: string):Boolean;

  public
    { Public declarations }
    Function CreateBDEConnection(dataBase: TDatabase; dataBaseName : string; server:string; userName:string; password:string): Boolean;

  end;

  const
      ODBC_ADD_DSN = 1; // Add data source
      ODBC_CONFIG_DSN = 2; // Configure (edit) data source
      ODBC_REMOVE_DSN = 3; // Remove data source
      ODBC_ADD_SYS_DSN = 4; // add a system DSN
      ODBC_CONFIG_SYS_DSN = 5; // Configure a system DSN
      ODBC_REMOVE_SYS_DSN = 6; // remove a system DSN
      ODBC_REMOVE_DEFAULT_DSN = 7; // remove the default DSN

  function SQLConfigDataSource(
        hwndParent: HWND;
        fRequest: WORD;
        lpszDriver: LPCSTR;
        lpszAttributes: LPCSTR): BOOL; stdcall; external 'ODBCCP32.DLL';

implementation

Function TBDEConnectionSqlServer.CreateBDEConnection(dataBase: TDatabase; dataBaseName : string; server:string; userName:string; password:string): Boolean;
var
  retorno: TDatabase;
Begin
  result := false;

  if (CreateOBDCConnection(dataBaseName, server) = true) then
  begin
    dataBase.AliasName := 'testedelphi';
    dataBase.LoginPrompt := False;
    dataBase.DatabaseName := 'testedelphi';
    dataBase.Params.Values['DATABASE NAME']       := dataBaseName;
    dataBase.Params.Values['USER NAME']           := userName;
    dataBase.Params.Values['ODBC DSN']            := dataBaseName;
    dataBase.Params.Values['OPEN MODE']           := 'READ/WRITE';
    dataBase.Params.Values['BATCH COUNT']         := '200';
    dataBase.Params.Values['LANGDRIVER']          := '';
    dataBase.Params.Values['MAX ROWS']            := '-1';
    dataBase.Params.Values['SCHEMA CACHE DIR']    := '';
    dataBase.Params.Values['SCHEMA CACHE SIZE']   := '8';
    dataBase.Params.Values['SCHEMA CACHE TIME']   := '-1';
    dataBase.Params.Values['SQLPASSTHRU MODE']    := 'SHARED AUTOCOMMIT';
    dataBase.Params.Values['SQLQRYMODE']          := '';
    dataBase.Params.Values['ENABLE SCHEMA CACHE'] := 'FALSE';
    dataBase.Params.Values['ENABLE BCD']          := 'FALSE';
    dataBase.Params.Values['ROWSET SIZE']         := '20';
    dataBase.Params.Values['BLOBS TO CACHE']      := '64';
    dataBase.Params.Values['BLOB SIZE']           := '32';
    dataBase.Params.Values['PASSWORD']            := password;
    result := true;
  end;

end;

function TBDEConnectionSqlServer.CreateOBDCConnection(dataBase : string; server: string):Boolean;
var
  resultado: BOOL;
begin
  Result := False;
  resultado := SQLConfigDataSource(
  0,
  ODBC_ADD_DSN,
  'SQL Server',
  PChar(
    'DSN='+dataBase+#0 +
    'SERVER='+server+#0 +
    'ADDRESS='+server+#0 +
    'NETWORK=dbmssocn'#0 +
    'DATABASE='+dataBase+#0 +
    'DESCRIPTION='+server+dataBase+#0 +
    #0
  )
  );

  if(StrToInt(BoolToStr(resultado)) <> 0) then
    Result := True;
end;

end. 
```

# ruby-on-rails - 为什么 WEBrick 服务器在生产模式下比在开发模式下更快？+ 导轨

> ID：14476756
> 
> 赞同：2
> 
> 时间：2013-01-23T09:53:38.630
> 
> 标签：ruby-on-rails, webrick

`ruby on rails`几个月以来，我一直在开发应用程序。我使用默认`WEBrick`服务器来运行应用程序。而且我发现当我在`development`and`production`模式下启动 WEBrick 服务器时，服务器的运行速度`production mode`比`development mode`.

这背后有什么具体原因吗？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:57:33.210

在开发模式下，类不会被缓存，因此 Rails 每次刷新时都会重新加载所有类。此外，资产编译不会在开发中完成（默认情况下），因此 Rails 每次刷新时都会重新加载所有资产（CSS、Javascript 等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:58:48.040

在生产模式下，服务器将代码加载到缓存中，这使事情变得更快。但是，在开发模式下并非如此（因为您不想每次进行更改时都重新启动 webrick）。每个请求都会再次加载相应的代码，这需要一些时间。

最耗费时间的是资产管道。在生产中，您可能会在一两个请求中获得资产的编译版本（javascripts 和 css）。在开发中，您将它们拆分，以进行调试（当然，基于您的环境设置）。而且由于浏览器不会同时处理所有请求，因此某些资产会在其他资产完成加载后加载。您可以使用例如 firebug 的网络控制台来观察这种行为。这意味着：您拥有的资产越多，页面在开发模式下加载的时间就越长。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:17:48.323

区别在于 2 个环境。在 Rails 中，有几种环境。每个人都有自己的数据库配置和 Rails 选项。

您可以使用 Rails.env 变量对特定环境进行一些不同的更改。

默认情况下，开发环境没有所有缓存并激活自动重新加载。生产环境带有所有缓存。

但是，如果您愿意，您可以制作类似开发的生产环境或类似生产的开发环境。

您也可以添加一些新的特定环境。

创建新环境：

假设您要创建 hudson 环境。

```
Create a new environment file in config/environments/hudson.rb. 
```

您可以先克隆一个现有的，例如 config/environments/test.rb。在 config/database.yml 中为您的环境添加一个新的配置块。就这样。

现在你可以启动服务器了

ruby 脚本/服务器 -e hudson

运行控制台

红宝石脚本/服务器哈德森

等等。

# maven - 使用特定配置文件时禁用 Maven 插件

> ID：14476757
> 
> 赞同：54
> 
> 时间：2013-01-23T09:53:39.463
> 
> 标签：maven

如果使用特定配置文件运行，我正在寻找一种禁用插件执行的方法。

[如果选择了配置文件](https://stackoverflow.com/questions/4684837/using-maven-profiles-to-control-build-execution)，这与运行插件相反。

我的用例：我的 Maven 构建有很多插件，但是在我的开发机器上运行时，我想跳过其中的一些。我不想在本地评论这些插件，而是希望能够使用“dev”配置文件运行构建。插件将继续在我的持续构建中运行。

想法？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2016-09-18T14:23:42.333

**当特定配置文件处于活动状态时，有一种巧妙的方法可以禁用插件执行。**

首先，您需要为插件执行添加一个标识符，例如：

```
<build>
    <plugins>
        <!-- (...) -->
        <plugin>
            <groupId>nl.geodienstencentrum.maven</groupId>
            <artifactId>sass-maven-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <id>styles-compilation</id> <!-- plugin execution identifier -->
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>update-stylesheets</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

然后您需要定义一个不会执行此插件的配置文件：

```
<profiles>
    <profile>
        <id>no-sass</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>nl.geodienstencentrum.maven</groupId>
                    <artifactId>sass-maven-plugin</artifactId>
                    <version>2.1</version>
                    <executions>
                        <execution>
                            <id>styles-compilation</id> <!-- here there must be the same identifier as defined in <build><plugins> section -->
                            <phase>none</phase> <!-- this disables plugin -->
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

现在，如果您运行标准 Maven 构建：

```
mvn clean package 
```

sass-maven-plugin**将被**执行，但在运行时：

```
mvn clean package -P no-sass 
```

sass-maven-plugin**不会被**执行。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-24T15:18:59.277

*   定义你的 pom，这样它就只有你在开发模式下需要的插件
*   定义开发配置文件
*   定义一个包含您想要/需要的所有插件的生产配置文件
*   将生产配置文件定义为默认值

示例pom：

```
<profiles>
  <profile>
    <id>production</id>

    <activation>
      <activeByDefault>true</activeByDefault>
    </activation>

    <build>
      <plugins>
        <!-- 
        <plugin>
          ...
        </plugin>
        -->
      </plugins>
    </build>
    </profile>

    <profile>
      <id>dev</id>
      <!-- Some other logic here, if necessary.
           Otherwise, there's no need for another profile. -->
    </profile>
</profiles> 
```

要在**开发模式下**运行，您可以调用以下命令：

```
mvn -Pdev compile 
```

要在**生产模式下**运行，只需使用正常步骤：

```
mvn compile 
```

如果您不想/不需要在您的开发配置文件中定义任何特殊内容，您可以省略其声明并像这样调用您的**开发模式**（`!`禁用配置文件）：

```
mvn -P!production compile 
```

请注意：您可能需要转义感叹号，因为它是 bash 中的特殊字符：

```
mvn -P\!production compile 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-21T12:49:28.500

基于 Krzysiek 的回答，您不需要定义显式执行，只需查看 maven 为您提供的输出并禁用默认执行即可。

例如，给定 Maven 的以下输出：

```
[INFO] --- maven-resources-plugin:2.7:copy-resources (prepare-dockerfile) @ tilbud ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
...
[INFO]
[INFO] --- maven-resources-plugin:2.7:resources (default-resources) @ tilbud ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
....
[INFO]
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ tilbud ---
...
[INFO]
[INFO] --- maven-resources-plugin:2.7:testResources (default-testResources) @ tilbud ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
...
[INFO]
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ tilbud ---
.... 
```

生成的默认执行名称列在插件和目标之后的括号中。以下配置文件禁用了上面的插件：

```
<profiles>
    <profile>
        <id>packageOnly</id>
        <build>
            <pluginManagement>
                <plugins>
                    <plugin>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-compile</id>
                                <phase>none</phase>
                            </execution>
                            <execution>
                                <id>default-testCompile</id>
                                <phase>none</phase>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-test</id>
                                <phase>none</phase>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-resources-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-resources</id>
                                <phase>none</phase>
                            </execution>
                            <execution>
                                <id>default-testResources</id>
                                <phase>none</phase>
                            </execution>
                            <execution>
                                <id>prepare-dockerfile</id>
                                <phase>none</phase>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </profile>
</profiles> 
```

# css - css对齐对象

> ID：14476758
> 
> 赞同：0
> 
> 时间：2013-01-23T09:53:41.687
> 
> 标签：css

我的问题是如何在没有点的情况下对齐对象以使其看起来像这样：

> 1234 …………………………………………………………………………………… ..................................................... ..................................................... ..................................1234.................................. ..................................................... ..................................................... ..................................................... ..................................................... ..................................................... ..................................................... .....................1234

我知道这可以用不同的类然后不同的边距顶部来完成。但是我有很多对象。有没有办法在没有javascript的情况下直接在css中完成？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:58:03.050

您只需使用该`margin-left`属性

使用 margin 属性，您可以对齐元素并根据需要从左侧、右侧、顶部或底部推动它们。

例如 ：

```
<span style="margin-left:0px;">1234</span><br/>
<span style="margin-left:30px;">1234</span><br/>
<span style="margin-left:60px;">1234</span> 
```

[例子](http://codepen.io/anon/pen/aoxkF)

如果您希望实现您的示例并且没有`<br/>`那么我会建议以下内容。

```
<span style="display:block; margin-left:0px; margin-bottom:15px;">1234</span>
<span style="display:block; margin-left:30px; margin-bottom:15px;">1234</span>
<span style="display:block; margin-left:60px; margin-bottom:15px;">1234</span> 
```

[例子](http://codepen.io/anon/pen/HIkrc)

使用 ，`display:block;`您可以从中创建一个 div 样式的属性并允许您使用`margin-bottom`. 随着`margin-bottom`你向下推下一个元素，这会在它们之间产生一条额外的线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:55:39.947

给予`float:left;`或`margin-left : 0px;`财产所有的对象。

# javascript - jQuery 幻灯片在一些 div 上跳来跳去

> ID：14476767
> 
> 赞同：3
> 
> 时间：2013-01-23T09:53:53.043
> 
> 标签：javascript, jquery, html, css, slide

我正在建立一个小网站，所以这是我的问题：

我有一个包含标题内容的第一个标题 div。它有相对位置，里面的东西是绝对位置，但我认为我们并不真正关心这个。

就在下面，我的主容器 div 没有定义定位，其中有一些`<h1>`和`<p>`。每一个`h1`，在点击时，都会使用 jQuery 幻灯片打开下面的一些内容。

这是[代码](http://jsfiddle.net/Fy2eK/)。滑动部分是

```
$("#container_" + tabName).slideToggle 
```

关键是在示例中我称之为“buggy”的地方，以及在我的开发版本中的所有其他地方，jQuery 幻灯片在动画的开始和结束时都是跳跃的。

我做了一些搜索，发现我必须设置一个定义的宽度，但它没有改变任何东西.. 已经尝试了很多东西，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:19:24.007

看到这个小提琴：http: [//jsfiddle.net/8s9VB/](http://jsfiddle.net/8s9VB/)

```
.container_projects .mainSmallText{
  padding-top: 25px;
}
.container_projects .mainSmallSubText{
  font-weight: bold;
}

#container_professionalXP{
   line-height: 3px;
   padding-bottom: 20px;
}
#container_professionalXP .mainSmallText{
   padding-top: 30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:09:43.480

好吧，这基本上是段落内边距的问题。我已经编辑了其中的一部分，并在 div 中添加了填充，而不是在段落内添加了边距。这是我编辑的一部分：

```
#container_professionalXP{
    line-height: 3px;
    margin-bottom: 20px;
    padding-top:30px;
}
#container_professionalXP .mainSmallText{
    margin: 0px;
    padding:0px;
} 
```

# mobile - 在移动设备上禁用 prettyPhoto

> ID：14476769
> 
> 赞同：1
> 
> 时间：2013-01-23T09:53:58.517
> 
> 标签：mobile, modernizr, prettyphoto

我可能太菜鸟了，不能在这里问，但是通过在这里搜索并找到其他问答，我在其他问题上得到了很多帮助，所以我会尝试自己的。

我正在寻找的简短版本是一种在小型移动屏幕（手机，而不是平板电脑）上禁用 prettyPhoto 的方法 - 或者甚至更好地仅在手机上禁用标题（“标题”文本）。

最初，在手机上查看时，我无法打开 prettyPhoto。我用这个解决方案解决了这个问题：（我不允许发布链接，因为这是我的第一篇文章 - 但位地址是 10tsboq）

但是现在标题（代码中的“标题”文本）形成了一个长的垂直字符串，如下所示：http: [//grab.by/j9f0](http://grab.by/j9f0)

我确实发现这个解决方案发布在使用 Modernizr 的手机上完全禁用 prettyPhoto，[http:](http://forums.no-margin-for-errors.com/discussion/5282/pretty-photo-on-a-mobile-device-iphone#Item_7) //forums.no-margin-for-errors.com/discussion/5282/pretty-photo-on-a-mobile-device-iphone#Item_7但要么我不明白将代码放在哪里，要么我做错了。任何人都知道该代码应该去哪里？（只是添加在 prettyPhoto js 或 css 的底部？或者替换代码中现有的东西？或者完全是其他地方？

或者 - 解决问题的任何其他完全不同的建议？

（顺便说一句，我正在为该网站开发 Squarespace v6 平台，以防万一）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:55:57.557

对于任何寻找答案的人，我在原始帖子上找到了一位评论者，他们非常乐意回复陌生人的电子邮件以提供解释 - 所以，回答我在modernizr脚本上提出的问题 - 它进入最有可能在您的页脚中的 prettyPhoto 代码：

（像这样）：

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
INSERT MODERNIZR MQ CODE HERE
  });
</script> 
```

希望对某人有所帮助！

# cryptography - 数字证书的类型和类别

> ID：14476770
> 
> 赞同：2
> 
> 时间：2013-01-23T09:54:00.227
> 
> 标签：cryptography, openssl, digital-signature, digital-certificate

我正在使用 OpenSSL 来实现数字签名。

作为要求的一部分，我需要确定证书的类别。据我所知，证书的类别和类型是特定于供应商的。

但是，我想知道是否有任何方法可以从 X509 证书中识别和检索此类信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:28:11.943

类型和类是各种 CA 主要出于营销目的而发明的东西。它们在标准中没有定义。因此，您无法从证书中提取此类信息。

一般来说，数字证书确实是不同的——它们可以是 X.509 证书、IPSec 证书（这似乎是 X.509 证书的一个子集，有额外的要求）、属性证书（可能我忘记了什么）。它们具有不同的结构，但在现实生活中您只会处理 X.509 证书（属性证书变得更加普遍，但速度非常缓慢，IPSec 证书几乎从未在野外看到过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T19:24:18.097

**班级分类**

第 1 类 - 将个人绑定到有效的电子邮件地址。证书颁发机构将进行电子邮件质询以验证电子邮件地址。

第 2 类 - 将个人绑定到有效的电子邮件地址以及在申请过程中提供的有关个人的其他信息（全名、公司名称等） 证书颁发机构将使用第三方数据库来验证个人身份信息

第 3 类 - 使用第三方数据库将个人与电子邮件地址和个人身份信息的所有权绑定在一起，以在当地审查代理人面前通过面对面的方式进行身份验证和身份验证。

**您可以查看 GlobalSign 个人签名证书 - 数字证书：** [https ://www.globalsign.com/personalsign/comparison.html](https://www.globalsign.com/personalsign/comparison.html)

您可以通过查看其证书详细信息来识别 X.509 证书的类型或类别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:00:47.913

证书的两个重要标准是：

*   目的是什么（邮件加密、签名小程序……）
*   签发机构在签署数据之前检查了什么

后一种通常称为“类”。似乎有一些约定，较高的数值假定更多的检查，因此第 1 类通常验证证书持有人可以访问证书中的邮件地址，而第 3 类证书可能要求持有人提供他/她的身份证在给定的柜台，因此可以依赖地址数据和身份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:46:47.170

正如其他人所指出的，数字签名的类别是特定于供应商的和/或取决于执行的检查级别及其意图。它绝对不是 X.509 证书结构的一部分。

它也可能取决于政府的指导方针。

在印度政府信息技术部关于[“电子政务中数字签名使用指南”的文档中，第 11 页解释了 3 种类型的数字签名类别。](http://egovstandards.gov.in/guidelines/Guidelines%20for%20Digital-signature/Guidelines_for_Usage_of_Digital_Signatures_in_e-Governance_-_v1.0_revised_sent_by_DIT.pdf/view)

分类是基于2个因素进行的：

1) 保证水平

2) 适用性

而且，它似乎也适用于大多数国际惯例。

# mysql - Mysql order by (column1 * column2)

> ID：14476772
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:54:09.720
> 
> 标签：mysql

我还没有尝试过，但我想我会先问专家。是否可以进行查询，其中 order by 子句的一部分是 2 列的乘积？

我的意思是：

```
SELECT * FROM table WHERE column1 = "some condition" ORDER BY date_added DESC, (column2 * column3) ASC, another_order DESC" 
```

我需要根据将 2 列相乘的结果来排序我的结果。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:02:12.900

### 试过这个，它工作......

```
CREATE TABLE `multiorder`
    (`id` int, `num1` int, `num2` int)
;

INSERT INTO `multiorder`
    (`id`, `num1`, `num2`)
VALUES
    (1, 5, 9),
    (2, 9, 3),
    (3, 4, 6),
    (4, 9, 1),
    (5, 4, 2),
    (6, 5, 6)
; 
```

对于 SQL

```
SELECT *, (`num1` * `num2`) FROM `multiorder`
    ORDER BY `num1` ASC, (`num1` * `num2`) ASC 
```

输出

```
+----+------+------+-------------------+
| ID | NUM1 | NUM2 | (`NUM1` * `NUM2`) |
+----+------+------+-------------------+
|  5 |    4 |    2 |                 8 |
|  3 |    4 |    6 |                24 |
|  6 |    5 |    6 |                30 |
|  1 |    5 |    9 |                45 |
|  4 |    9 |    1 |                 9 |
|  2 |    9 |    3 |                27 |
+----+------+------+-------------------+ 
```

### 小提琴：[http ://www.sqlfiddle.com/#!2/b19a4/3](http://www.sqlfiddle.com/#!2/b19a4/3)

# mongodb - MongoDB磁盘空间

> ID：14476781
> 
> 赞同：1
> 
> 时间：2013-01-23T09:54:41.400
> 
> 标签：mongodb

我们是一个集合，其中每个文档的平均大小为 16 KB，文档数为 30,000，这意味着总空间应该是

```
(30,000 * 16) / 1024 * 2024 = 1.71 GB 
```

但是我们发现集合统计中的集合大小是`28.6 GB`，太可怕了。谁能告诉这怎么可能，当我们在这个文档中只有 736 个文档时，我检查了一个骗子，当时它只消耗了 18.5 MB。在这个集合中，我们只存储数字数据，而不是任何文本或大字符串。

Mongo db 是否有额外的收集空间或任何东西？

这是统计信息。

```
> db.MyCollection.stats()
{
        "ns" : "DB.MyCollection",
        "count" : 31228,
        "size" : 30593236376,
        "avgObjSize" : 979673.254002818,
        "storageSize" : 31878659904,
        "numExtents" : 33,
        "nindexes" : 1,
        "lastExtentSize" : 2146426864,
        "paddingFactor" : 1,
        "systemFlags" : 1,
        "userFlags" : 0,
        "totalIndexSize" : 923888,
        "indexSizes" : {
                "_id_" : 923888
        },
        "ok" : 1
} 
```

**编辑**

这是我之前捕获的统计数据（当记录数为 736 时）

```
> db.MyCollection.stats()
{
        "ns" : "DB.MyCollection",
        "count" : 736,
        "size" : 18985944,
        "avgObjSize" : 25796.119565217392,
        "storageSize" : 23035904,
        "numExtents" : 4,
        "nindexes" : 1,
        "lastExtentSize" : 11681792,
        "paddingFactor" : 1,
        "systemFlags" : 1,
        "userFlags" : 0,
        "totalIndexSize" : 32704,
        "indexSizes" : {
                "_id_" : 32704
        },
        "ok" : 1
} 
```

而且我使用的插入只是不更新​​而是非常频繁地查询。

一些信息可能有助于确定情况：

*   集合的模式是深度树结构（7级）
*   为 mongodb 使用 Windows 服务器（但在 MongoLab（亚马逊托管）实例上也遇到了同样的问题）
*   将集合移动到另一个数据库（在另一台服务器上），也只使用插入语句，但 BulkInsertion 并且在那里也消耗了相同的大小。

示例数据：我已重命名字段名称

```
{
   "_id":ObjectId("50ff7614c9145359648cc017"),
   "gtrtt":2,
   "XYZ":2,
   "Namecount":2,
   "ABC":0,
   "123":0,
   "IDD":793,
   "date":   ISODate("2012-04-22T00:00:00   Z"),
   "network":[
      {
         "gtrtt":2,
         "XYZ":2,
         "Namecount":2,
         "ABC":0,
         "123":0,
         "type":"facebook",
         "safasfasf":[
            {
               "gtrtt":2,
               "XYZ":2,
               "Namecount":2,
               "ABC":0,
               "123":0,
               "type":0,
               "sassasas":[
                  {
                     "gtrtt":2,
                     "XYZ":2,
                     "Namecount":2,
                     "ABC":0,
                     "123":0,
                     "type":2,
                     "asfasffasfsafas":[
                        {
                           "gtrtt":2,
                           "XYZ":2,
                           "Namecount":2,
                           "ABC":0,
                           "123":0,
                           "type":5,
                           "435435345":[
                              {
                                 "gtrtt":2,
                                 "XYZ":2,
                                 "Namecount":2,
                                 "ABC":0,
                                 "123":0,
                                 "type":"Egypt",
                                 "34534534435345":[
                                    {
                                       "gtrtt":1,
                                       "XYZ":1,
                                       "Namecount":1,
                                       "ABC":0,
                                       "123":0,
                                       "type":"Cairo"
                                    },
                                    {
                                       "gtrtt":1,
                                       "XYZ":1,
                                       "Namecount":1,
                                       "ABC":0,
                                       "123":0,
                                       "type":null
                                    }
                                 ]
                              }
                           ]
                        }
                     ]
                  }
               ]
            }
         ]
      }
   ],
   "OS":[
      {
         "gtrtt":1,
         "XYZ":1,
         "Namecount":1,
         "ABC":0,
         "123":0,
         "type":"Windows7"
      },
      {
         "gtrtt":1,
         "XYZ":1,
         "Namecount":1,
         "ABC":0,
         "123":0,
         "type":"WindowsXP"
      }
   ],
   "Browser":[
      {
         "gtrtt":1,
         "XYZ":1,
         "Namecount":1,
         "ABC":0,
         "123":0,
         "type":"IE"
      },
      {
         "gtrtt":1,
         "XYZ":1,
         "Namecount":1,
         "ABC":0,
         "123":0,
         "type":"Firefox"
      }
   ],
   "Device":[
      {
         "gtrtt":2,
         "XYZ":2,
         "Namecount":2,
         "ABC":0,
         "123":0,
         "type":"PC"
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:19:28.803

但是，我将在这里做出一些假设，形成有根据的猜测，我会说它们是正确的。

您在那里显示的所有测量值都以字节为单位。

您的平均对象大小（文档）实际上是 0.9 meg 而不是 16KB。

因此，您实际上正在使用：大约 28.4922 GB（该集合中有 31228 个对象）。无论如何，这就是 MongoDB 所说的。

您实际上正在使用 29.6893 GB 的存储空间。

这实际上是有道理的，因为预先分配了未来的范围（我认为在这种情况下，它会在这里预先分配一个新的 2GB 文件）和可能的碎片，但是你的碎片不是很高，可能是几个 MB，所以我不会说这是你的问题，但你可以在该集合上运行一个紧凑型，如果它导致问题则删除它。

我还要说`1`，考虑到碎片的数量，您的填充因子可能大约或略高一点，所以这不是太大的问题，它会分配比这里的对象大小更大的空间。

索引是一个单独的命名空间，因此它们不应该过多地影响您的集合命名空间范围（如果有的话）。

我认为您的主要问题是您误读并误解了数据集的输出和真实大小。

### 编辑

如果您经常更新（不插入）此集合，这可以解释 avgObjSize 和您的假设，在这种情况下，紧凑型应该使集合恢复到可驯服的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:14:12.403

您需要考虑到索引也会增加集合大小。此外，mongodb 有一些应用于文档的填充因子。这允许文档可以增加大小，而无需总是移动文档，即使它只是多一个字节。填充因子非常不稳定并且变化很大。因此，使用 paddingfactor 您的收藏也会增加。见[统计（）](http://docs.mongodb.org/manual/reference/collection-statistics/)

从您的输出：

索引似乎没有问题，只是你的 _id 索引。填充因子似乎也没有问题，但这并没有说明什么，因为这只是应用于新写入的实际填充因子。但看起来有问题的是 mongodb 报告您的 avgObjSize 大约为 956kB，而不是您怀疑的 16kB。因此，您要么查看错误的集合，要么保存的内容与您预期的有所不同（不确定您的 16kB 来自何处）。

您可以做的是运行 compact 以[压缩](http://docs.mongodb.org/manual/reference/command/compact/)集合，然后检查由于填充因子分配了哪些空间。

# wpf - 将边框的高度绑定到其宽度

> ID：14476785
> 
> 赞同：1
> 
> 时间：2013-01-23T09:54:50.530
> 
> 标签：wpf, windows-phone-7

我的 Windows Phone 应用程序的布局有一个奇怪的问题。我有一个网格，有 4 列。在每个里面，我放了一个边框，我希望这些边框是完美的正方形（即使我的容器高度发生变化......）。

以下是相关代码：

```
<Grid Grid.Row="1">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
</Grid.ColumnDefinitions>
<Border Grid.Column="0" Background="Red"  Height="{Binding Path=ActualWidth, RelativeSource={RelativeSource self}}"><TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" /></Border>
<Border Grid.Column="1" Background="Red" Height="{Binding Path=ActualWidth, RelativeSource={RelativeSource self}}"><TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" /></Border>
<Border Grid.Column="2" Background="Red" Height="{Binding Path=ActualWidth, RelativeSource={RelativeSource self}}"><TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" /></Border>
<Border Grid.Column="3" Background="Red" Height="{Binding Path=ActualWidth, RelativeSource={RelativeSource self}}"><TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" /></Border>

</Grid> 
```

它在 Blend 中表现出色：

![在此处输入图像描述](../Images/552a9ba7fb30a96561d4e647bd76d466.png)

但是当我在模拟器上运行它时，我的边界消失了（看起来高度变成了 0）。

我没有任何代码隐藏代码..

有人对我的问题有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:31:24.833

您尝试绑定到 ActualWidth/ActualHeight 属性。从一个较旧的问题（[此处](https://stackoverflow.com/questions/1602148/binding-to-actualwidth-does-not-work)）来看，这是 Silverlight 的一个已知问题，并且没有简单的解决方法。

尝试其他方法，例如绑定到 Width 并指定列宽：

```
 <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0" Background="Red"  Width="100" Height="{Binding Path=Width, RelativeSource={RelativeSource self}}">
            <TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Border>
        <Border Grid.Column="1" Background="Red"  Width="100" Height="{Binding Path=Width, RelativeSource={RelativeSource self}}">
            <TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Border>
        <Border Grid.Column="2" Background="Red"  Width="100" Height="{Binding Path=Width, RelativeSource={RelativeSource self}}">
            <TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Border>
        <Border Grid.Column="3" Background="Red"  Width="100" Height="{Binding Path=Width, RelativeSource={RelativeSource self}}">
            <TextBlock Text="TextBlock" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Border>

    </Grid> 
```

# .net - 尝试使用类型映射实体，就像它作为成员一样

> ID：14476786
> 
> 赞同：3
> 
> 时间：2013-01-23T09:55:08.080
> 
> 标签：.net, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我是 nHibernate 的新手，这是我的代码

```
public abstract class DEField : EntityWithSerializableId
{
    public virtual Boolean IsVisibilityDepended { get; set; }
    public virtual DEField VisibilityField { get; set; }
    public virtual String VisibilityExpression { get; set; }  
} 
```

我试图了解如何映射其成员（`DEField`）中具有相同类型的实体。该实体可以为*空*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:21:46.620

您应该在 XML 中使用 <many-to-one>，或者它在其他映射系统中是等效的，就像对任何其他类一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:56:33.633

这种情况下的映射（属性类型与实体相同）是简单/标准的引用映射。您可以在这里查看更多详细信息：[Fluent mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)

参考资料/多对一：

```
 ...
 References(x => x.VisibilityField); 
```

就是这样。在这种情况下，通常可以指示父子关系。因此，不仅您将自己*引用*`DEField`为，而且它还应该知道（从 的角度来看）谁在引用它。1)*父*参考和 2)*子集合*：*`VisibilityField``VisibilityField`*

 ***```
public abstract class DEField : EntityWithSerializableId
{
    public virtual Boolean IsVisibilityDepended { get; set; }
    public virtual String VisibilityExpression { get; set; }  

    public virtual DEField VisibilityField { get; set; } // Parent
    public virtual IList<DEField> ChildFields { get; set; } // Children
} 
```

然后一个更复杂的映射示例可能如下所示：

```
 public class DEFieldMap : ClassMap<DEField>
 {
  public DEFieldMap()
  {
     Table("DEFieldTable");
     LazyLoad();
     Id(x => x.Id)
      .Column("Id")
      .Not.Nullable()    
      .GeneratedBy.Identity();
     Map(x => x.IsVisibilityDepended );
     Map(x => x.VisibilityExpression);
     References(x => x.VisibilityField)
      .Class<DEField>()
      .Access.Property()
      .Cascade.None()
      .LazyLoad()
      .Column("ParentId");
     HasMany<DEField>(x => x.ChildFields) // Children     
      .Access.Property()
      .AsBag()
      .Cascade.None()
      .LazyLoad()
      .Inverse()
      .KeyColumn("ParentId");
  }
 } 
```***

# sql - 在 Oracle 数据库中设置数字的特定位

> ID：14476787
> 
> 赞同：3
> 
> 时间：2013-01-23T09:55:09.670
> 
> 标签：sql, oracle, oracle10g

如何使用 SQL 命令在 Oracle 中设置数字的特定位？只有`BITAND`运营商

```
BITAND (DEPENDENCY_MAP, 2) 
```

在 DEPENDENCY_MAP 中，每一位都定义了一种类型依赖性。使用此命令，我可以找到第二位是否已设置。但是如何修改此位？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:23:25.027

设置位：

```
UPDATE <table name>
   SET DEPENDENCY_MAP = DEPENDENCY_MAP + 2 -- Set the bit (the row must not have the bit set already)
 WHERE BITAND (DEPENDENCY_MAP, 2) = 0 -- This will match rows that don't have the bit set
   AND <add your own row filters> 
```

要清除该位：

```
UPDATE <table name>
   SET DEPENDENCY_MAP = DEPENDENCY_MAP - 2 -- Clear the bit (the row must have the bit set already)
 WHERE BITAND (DEPENDENCY_MAP, 2) > 0 -- This will match rows that do have the bit set
   AND <add your own row filters> 
```

**注意：** 上面的代码适用于正数。我没有费心去弄清楚如果 DEPENDENCY_MAP 是负数会发生什么，因为我假设你没有负数。

# mysql - 在 mysql 中显示创建表后的语法错误

> ID：14476788
> 
> 赞同：2
> 
> 时间：2013-01-23T09:55:11.667
> 
> 标签：mysql, phpmyadmin, create-table

我只想将现有的表结构复制到另一个数据库中。所有查询都在 phpmyadmin 中执行：

我首先执行：

```
SHOW CREATE TABLE keyword_session 
```

然后我在另一个数据库中执行它的输出：

```
CREATE TABLE `keyword_session` (  
`id` int(11) NOT NULL AUTO_INCREMENT, 
`session_id` int(11) NOT NULL,
`keyword_id` int(11) NOT NULL,  PRIMARY KEY (`id`))
ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

我得到了错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ' `id`int(11) NOT NULL AUTO_INCREMENT, Â `session_id`int(11) NOT NULL, Â 'keywor'附近使用正确的语法

语法错误在哪里？SHOW CREATE TABLE 不是您可以执行的结果吗？

* * *

**编辑：** 有关我尝试创建表的系统的一些信息：

```
Database server :
  Server: Localhost via UNIX socket
  Software: MySQL
  Software version: 5.1.63-0ubuntu0.11.10.1 - (Ubuntu)
  Protocol version: 10
  User: ...
  Server charset: UTF-8 Unicode (utf8)
Web server:
  ...
phpMyAdmin:
  Version information: 3.5.1, latest stable version: 3.5.5
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:01:19.717

根据错误，您的语句中似乎有未知符号**`Â`**。

可能，您的换行提要被误解了。我这么说是因为它只在行尾很明显：

```
id int(11) NOT NULL AUTO_INCREMENT, Â session_id int(11) NOT NULL, Â `keywor 
```

注意符号在声明之前是如何出现`session_id`的`keyword_id`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:14:21.967

命令

```
show create table table_name; 
```

从具有默认字符集排序**规则 utf8_general_ci**的数据库**information_schema中检索信息**

 **因此数据将专门与该字符一起存储

当您手动输入相同内容时，您将不会收到错误

如错误中所示，您的语句有未知符号 Â 属于默认字符集

有关字符集和排序规则的更多信息可以在[这里](http://collation-charts.org/mysql60/mysql604.utf8_general_ci.european.html)找到，这是最好的参考，以了解它们以避免或解决未来的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:43:11.853

将其复制并粘贴到记事本或文本编辑器中，然后尝试重新粘贴。你可能有一些垃圾字符在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:09:35.290

当心带有在线编辑功能的新版本 phpmyadmin。有时从这些文本框中复制可能会给您带来奇怪的字符。

![在此处输入图像描述](../Images/e8a5b0d3119fb7850152f8ac68082ad0.png)**

# sql - 将 SQL 2005 表的列多个值拆分为新临时表的新列

> ID：14476790
> 
> 赞同：0
> 
> 时间：2013-01-23T09:55:16.410
> 
> 标签：sql, sql-server, sql-server-2005

我面临这样一种情况，其中包含超过 150000 条记录的客户表有一个电话号码列，其中包含多个由空格、逗号、破折号、点等分隔的值（电话）。原始列值是 varchar 类型 max 30\. 我需要一种方法来检查这些值并将它们拆分为新表的相等列，然后通过从其中删除任何特殊字符来规范化它们。所有新列的值都不应超过 10 位。

在下面找到当前表的选择查询结果，它清楚地描述了当前的混乱情况。第 No_ ( `ΠΕxxxxxx`) 列是`Customer Unique Identifier`. 专栏`Phone No_`是凌乱的

```
 - List item

-**No_**        **Phone No_**
-ΠΕ000586   2310836590
-ΠΕ000589   2310.443602/6977.226818
-ΠΕ000591   2310740215
-ΠΕ000593   2310228976
-ΠΕ000598   2310444604
-ΠΕ000606   2310265616/6939686560
-ΠΕ000611   2310.227932(AΔΕΡΦΗ ΚΟΚΚΑΛΑ)
-ΠΕ000621   2310826921/6979552442
-ΠΕ000626   2310846216
-ΠΕ000629   2310931574
-ΠΕ000630   6977629688, 2310320441
-ΠΕ000631   2310.260886/6973.999840
-ΠΕ000633   2310.288408/342456/6944.503637
-ΠΕ000636   2310440143/6978008313
-ΠΕ000637   2310425655/6945365400
-ΠΕ000646   944111072
-ΠΕ000652   2310.201923,6942.693372
-ΠΕ000667   2310.482194/6977394456
-ΠΕ000675   6949199051 
```

**由/,- 或空格**分隔的每个数字必须分隔到新列中

必须删除任何文本。

任何小于`10`数字的数列，如果数列有数字，则`6`必须添加**2310**`9`前缀，如果数列有数字且序列的**第一个数字**以**9**开​​头，则`6`必须添加数字作为**前缀**。例如

```
the number 342456 must become 2310342456 and the number 944111072 must become 694411072 
```

必须删除 10 位数字序列之间的任何点 (.) 才能拥有一个唯一的数字 例如

```
the number 231.282414 must be 231282414 or 6942.693372 must be 6942693372 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:56:39.917

例如

```
if object_id('splitNums') is not null
    drop function splitNums
go

create function splitNums(@nums varchar(30))
returns @tr table (n1 varchar(10), n2 varchar(10), n3 varchar(10), n4 varchar(10), n5 varchar(10)) as
begin
    declare @v varchar(10)
    declare @i int
    insert into @tr values (null, null, null, null, null)
    declare @ci int = 1
    while (@ci <= 5 ) begin
        if ( LEN(@nums) > 0 ) begin
            set @i = charindex('/', @nums)
            if ( @i <= 0 )
                set @i = charindex(' ', @nums)
            if ( @i <= 0 )
                set @i = charindex('-', @nums)
            if ( @i <= 0) begin
                set @v = @nums 
                set @nums = ''
            end else begin
                set @v = SUBSTRING(@nums, 1, @i - 1)
                set @nums = SUBSTRING(@nums, @i + 1, len(@nums) - @i)
            end
        end else set @v = ''
        if ( @v = '' ) break
        set @v = replace(@v, '.', '') -- more code needed here to remove text
        if ( len(@v) = 6 ) set @v = '2310' + @v
        else if (len(@v) = 9 and CHARINDEX('9', @v) = 1) set @v = '6' + @v
        -- impossible to do dynamic sql in function so...
        if (@ci = 1)
            update @tr set n1 = @v
        else if (@ci = 2)
            update @tr set n2 = @v
        else if (@ci = 3)
            update @tr set n3 = @v
        else if (@ci = 4)
            update @tr set n4 = @v
        else if (@ci = 5)
            update @tr set n5 = @v
        set @ci = @ci + 1
    end
    return
end
go

declare @t table (
    id nvarchar(10),
    number nvarchar(30)
)

insert into @t (id, number) values
   (N'ΠΕ000586', '2310836590'),
   (N'ΠΕ000589', '2310.443602/6977.226818'),
   (N'ΠΕ000633', '2310.288408/342456/6944.503637')

select * from @t cross apply dbo.splitNums(number)
go 
```

# android - android静音相机快门声音？

> ID：14476791
> 
> 赞同：12
> 
> 时间：2013-01-23T09:55:19.063
> 
> 标签：android, android-camera

我正在使用这个

`camera.takePicture(null, rawCallback, jpegCallback);`

但是对于某些设备，它会在相机捕获图像时发出声音。

请任何人帮忙，我怎样才能使相机快门声音静音？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T12:52:07.513

您可以从 4.2 开始以编程方式将其关闭：

```
Camera.CameraInfo info = new Camera.CameraInfo();
Camera.getCameraInfo(id, info);
if (info.canDisableShutterSound) {
    mCamera.enableShutterSound(false);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-29T11:07:22.110

要静音，请在捕获图像之前输入此代码

```
 AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
 mgr.setStreamMute(AudioManager.STREAM_SYSTEM, true);
 camera.takePicture(null, rawCallback, jpegCallback); 
```

1秒后，它将通过输入以下代码取消静音：

```
 final Handler handler = new Handler();
 Timer t = new Timer();
 t.schedule(new TimerTask() {
    public void run() {
        handler.post(new Runnable() {
            public void run() {
            AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
            mgr.setStreamMute(AudioManager.STREAM_SYSTEM, false);
                    }
                });
            }
    }, 1000); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T10:08:10.933

在单击按钮之前使用下面两行

```
 AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    mgr.setStreamMute(AudioManager.STREAM_SYSTEM, true); 
```

在图像被捕获后，这两个孤独的人：

```
AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
mgr.setStreamMute(AudioManager.STREAM_SYSTEM, false); 
```

我只知道这个解决方案，我个人在我的应用程序中使用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:20:29.417

正如 harism 所提到的，这在某些设备上是不可能的，因为某些市场（例如日本）有法律要求，即拍照总是会产生可听见的快门声。

用于这些类型声音的流类型是`STREAM_SYSTEM_ENFORCED`，并且有一个只读系统属性确定您是否可以使此类流静音。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-25T14:18:40.773

好吧，所有这些解决方案都很好，但我更喜欢在之前将音量设置为 0（不仅是系统，因为某些设备使用其他流然后是系统和/或并非所有流都包括系统）：

像这样的东西可以完美地工作：

```
Camera mCamera = null;

function takePicture() {
   storeSoundSettings();
   setMuteAll(true);
   // init camera and such.
   Camera.CameraInfo info = new Camera.CameraInfo();
   Camera.getCameraInfo(IdOfCameraBackOrFront, info);
       if (info.canDisableShutterSound) {
           camera.enableShutterSound(false);
       }
   setMuteAll(false);
   recoverSoundSettings();
} 
```

并存储、恢复和设置静音，如下所示：

```
int[] streams = new int[]{
                AudioManager.STREAM_ALARM,
                AudioManager.STREAM_DTMF,
                AudioManager.STREAM_MUSIC,
                AudioManager.STREAM_NOTIFICATION,
                AudioManager.STREAM_RING,
                AudioManager.STREAM_SYSTEM,
                AudioManager.STREAM_VOICE_CALL};
JSONObject json;
AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

public void storeSoundSettings() {
        json = new JSONObject();
        json.put("mode", manager.getMode());
        json.put("ringermode", manager.getRingerMode());

        for (int stream : streams) {
            json.put("stream_" + stream, manager.getStreamVolume(stream));
         }
}

public void recoverSoundSettings() {
        json = new JSONObject(readString("last_audio_setting", null));
        manager.setMode(json.getInt("mode"));
        manager.setRingerMode(json.getInt("ringermode"));

        for (int stream : streams) {
            manager.setStreamVolume(stream, json.getInt("stream_" + stream), AudioManager.FLAG_ALLOW_RINGER_MODES);
}

public void setMuteAll(boolean mute) {

    for (int stream : streams) {
        manager.setStreamMute(stream, mute);
        if (mute) {
            manager.setStreamVolume(stream, 100, AudioManager.FLAG_ALLOW_RINGER_MODES);
        } else {
            manager.setStreamVolume(stream, 0, AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
        }
    }
} 
```

不要忘记捕获异常。我删除了它们以更好地突出显示。

# sql-server - 身份插入少量记录而不截断到现有表

> ID：14476792
> 
> 赞同：0
> 
> 时间：2013-01-23T09:55:19.580
> 
> 标签：sql-server, constraints, primary-key, unique-constraint, identity-insert

我想从 B 服务器的 A 服务器中的表中插入数据。

前任：

```
select count(*) from A.table
-- 100 rows affected

delete from A.table where customer_code = '100'
-- 10 rows affected

select count(*) from B.table
-- 200 rows affected

select count(*) from B.table where customer_code='100'
-- 20 rows affected

both the tables have identity(1,1) and primary_key

insert into A.table(customer_key,customer_code,custome_name)
select customer_key,customer_code,custome_name  
    from B.table where customer_code='100' 
```

> --违反主键约束。无法在对象“A.table”中插入重复键。

我已经试过了

```
SET IDENTITY_INSERT <> ON
DBCC CHECKIDENT(<>, RESEED,0) 
```

我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:15:23.030

主键违规告诉您，您尝试从中插入的`customer_key`in的至少一个值已用于不同的 Customer 记录 in （并假设您已经为此运行了 delete 语句）。`A.table``B.Table``A``customer_code`

这意味着考虑尝试使代理标识列`customer_key`在两个表 A 和 B 之间保持同步已经为时已晚（正如您所说，如果适用，您无法`A`从头开始截断和复制`B`）。但是，似乎`customer_code`也不提供客户的唯一标识（幂等性）（因为删除删除了 10 行）。

总而言之 - 如果您不需要建立除 by`customer_code`和可能的任何链接之外的任何链接 via `customer_name`，您可以将数据复制到`A`其中将被分配新的 identity`customer_key`的：

（即离开`IDENTITY_INSERT`）

```
insert into A.table(customer_code,custome_name)
select customer_code,customer_name  
    from B.table where customer_code='100' 
```

否则，如果您确实需要唯一标识表之间的行，则需要为 2 个表之间的链接添加新存储。一种快速而肮脏的方法是将 B 的代理直接添加到 A，如下所示：

```
ALTER TABLE A.table ADD customer_key_TableB INT NULL  -- Or whatever the type of `customer_key`
GO 
```

然后像这样插入并链接数据（同样，`IDENTITY INSERT`对于表 A 仍然关闭）：

```
insert into A.table(customer_code, customer_name, customer_key_TableB)
select customer_code, customer_name, customer_key
    from B.table where customer_code='100' 
```

# windows - 文件夹锁定的工作原理

> ID：14476798
> 
> 赞同：1
> 
> 时间：2013-01-23T09:55:29.517
> 
> 标签：windows, registry, logic, explorer, autoit

由于 windows 不为单个文件夹提供密码保护，因此有许多第三方软件，如“文件夹锁定”，可以完成这项工作。我想知道这类应用程序背后的逻辑，并找到了一个类似这样的代码：['lock-a-folder'](http://code.google.com/p/lock-a-folder/source/browse/lock-a-folder.au3)。这是我不熟悉的 AutoIt 脚本。但是，我只想知道这里使用的逻辑。

这些是我感兴趣的脚本的主要功能：

```
Func Lock($slected)
  Local $Temp,$TempFile
  If @error or $slected = "" Then Return("Empty selection/Cancel Pressed")
  If Not FileExists($slected) Then
    MsgBox(0, $AppName, $slected & " " & Lang('doesntexist'), 0, $WIN1)
    Return('doesntexist')
  EndIf
  Local $l0ckd = RegRead("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders")
  _DebugOut('RegRead("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders") = ' & $l0ckd)

  If Not StringInStr($l0ckd, $slected & ".{90F8C996-7C70-4331-9D70-FB357D559FD5}|") = 0 Then
    MsgBox(0, $AppName, $slected & " " & Lang('alreadyinlist'), 0, $WIN1)
    Return('alreadyinlist')
  EndIf
  If $CmdLine[0] = 0 Then
    GUICtrlSetData($List1, "")
    GUICtrlSetData($List1, Lang('plzwait') & "....")
    GUISetState(@SW_DISABLE)
  EndIf
  _DebugOut($slected)
  If $CmdLine[0] = 0 Then GUISetState(@SW_ENABLE)
  If DirMove($slected, $slected & ".{90F8C996-7C70-4331-9D70-FB357D559FD5}") = 0 Then
  FileSetAttrib($slected, "-RSH")
  MsgBox(0, $AppName, $slected & " " & Lang('unable2lock'), 0, $WIN1)
  If $CmdLine[0] = 0 Then Readfolders()
    Return('unable2lock')
  EndIf
  $slected = $slected & ".{90F8C996-7C70-4331-9D70-FB357D559FD5}"
  FileSetAttrib($slected, "+RSH")
  $l0ckd &= $slected & "|"
  _DebugOut("$l0ckd &= $slected| = " & $l0ckd)
  $debug = RegWrite("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders", "REG_SZ", $l0ckd)
  _DebugOut('RegWrite("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders", "REG_SZ", $l0ckd) = ' & $debug)
  If $CmdLine[0] = 0 Then Readfolders()
  Return("Done")
EndFunc ;==>Lock

Func UnLock($slected)
  _DebugOut($slected)
  If $slected = "" Or @error Then
    MsgBox(0, $AppName, Lang('selectfirst'), 0, $WIN1)
    Return("Empty selection/Cancel Pressed")
  EndIf
  If $CmdLine[0] = 0 Then
    GUICtrlSetData($List1, "")
    GUICtrlSetData($List1, Lang('plzwait') & "....")
    GUISetState(@SW_DISABLE)
  EndIf
  Local $Temp = StringReplace($slected, ".{90F8C996-7C70-4331-9D70-FB357D559FD5}", "", 0, 2)
  _DebugOut("$Temp = " & $Temp)
  FileSetAttrib($slected, "-RSH")
  Local $Temp1
  $Temp1 = DirMove($slected, $Temp)
  If $CmdLine[0] = 0 Then GUISetState(@SW_ENABLE)
  If $Temp1 = 0 Then
    $Temp1 = DirMove($slected, $Temp & ".recovered")
  EndIf
  If $Temp1 = 0 Then

  MsgBox(0, $AppName, $slected & " " & Lang('unable2unlock'), 0, $WIN1)
  If $CmdLine[0] = 0 Then Readfolders()
    Return('unable2unlock')
  EndIf
  Local $l0ckd = RegRead("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders")
  _DebugOut('RegRead("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders") = ' & $l0ckd)
  $Temp = StringReplace($l0ckd, $slected & "|", "")
  _DebugOut('StringReplace($l0ckd, $slected & "|", "")' & " = " & $Temp)
  $debug = RegWrite("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders", "REG_SZ", $Temp)
  _DebugOut('RegWrite("HKEY_CURRENT_USER\SOFTWARE\" & $AppName, "lockedfolders", "REG_SZ", $l0ckd) = ' & $debug)
  If $CmdLine[0] = 0 Then Readfolders()
  Return("Done")
EndFunc ;==>UnLock 
```

谁能告诉我逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:19:32.377

该脚本创建注册表项，如：

```
HKCR\CLSID\{90F8C996-7C70-4331-9D70-FB357D559FD5}
HKCR\CLSID\{90F8C996-7C70-4331-9D70-FB357D559FD5}\shell\open
HKCR\CLSID\{90F8C996-7C70-4331-9D70-FB357D559FD5}\shell\explore
HKCR\CLSID\{90F8C996-7C70-4331-9D70-FB357D559FD5}\shell\opennewwindow
HKCR\CLSID\{90F8C996-7C70-4331-9D70-FB357D559FD5}\shell\opennewprocess 
```

和

```
HKCU\SOFTWARE\$AppName\lockedfolders 
```

锁定文件夹时，它会被重命名，`FolderName.{90F8C996-7C70-4331-9D70-FB357D559FD5}`并且此名称会附加到 的值以`HKCU\SOFTWARE\$AppName\lockedfolders`供将来参考。

解锁时只需将文件夹更改回其原始名称，从注册表值中删除该条目。

所以它似乎根本不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T19:00:08.503

在命令行中尝试这样的事情：

```
C:> attrib +a +H +S folder_name 
```

删除属性替换`+`为`-`

# java - Android 中的搜索按钮功能

> ID：14476802
> 
> 赞同：1
> 
> 时间：2013-01-23T09:55:50.067
> 
> 标签：java, android, json, listview

我的 Android 应用程序基于 Job 门户，我已经解析了网站上的信息并进入了 listview，现在 listview 包含所有类别的工作，在第一个活动中有一个文本框和搜索按钮，“Title”的关键字是什么在文本框中给出的只有那些类别的工作应该显示在列表视图中。为此，我是否必须将“文本框”中的元素与网站数据或列表视图中已解析的信息进行比较？为了比较“文本框”中的字符串并将其存储在单独的数组中，我应该将代码放在哪里，有人可以帮忙吗？

```
public class Home extends ListActivity
{// url to make request
private static String url = "http://www.example.com/jobs/?json=get_recent_posts";

// JSON Node names
private static final String TAG_POSTS = "posts";
private static final String TAG_ID = "id";
private static final String TAG_TITLE = "title";
private static final String TAG_DATE = "date";
private static final String TAG_CONTENT = "content";
private static final String TAG_AUTHOR = "author";
private static final String TAG_NAME = "name";

// contacts JSONArray
JSONArray posts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        posts = json.getJSONArray(TAG_POSTS);

        // looping through All Contacts
        for(int i = 0; i < posts.length(); i++){
            JSONObject c = posts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String title = c.getString(TAG_TITLE);
            String date = c.getString(TAG_DATE);
            String content = c.getString(TAG_CONTENT);

            content = content.replace("<br />", "");
            content = content.replace("<p>", "");
            content = content.replace("</p>", "");

            // Phone number is agin  JSON Object
            JSONObject author = c.getJSONObject(TAG_AUTHOR);
            String name = author.getString(TAG_NAME);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_TITLE, title);
            map.put( TAG_DATE, date);
            map.put( TAG_NAME, name);
            map.put( TAG_CONTENT, content);
            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.activity_home,
            new String[] { TAG_TITLE, TAG_DATE, TAG_NAME, TAG_CONTENT }, new int[] {
                    R.id.name, R.id.email,R.id.mobile,R.id.content});

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.mobile)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), Singlemenuitem.class);
            in.putExtra(TAG_TITLE, title);
            in.putExtra(TAG_DATE, date);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_CONTENT, content);
            startActivity(in);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:13:50.713

有很多方法可以实现这一点，一种非常直接的方法是将 json 调用的结果存储在某种列表结构中。现在，介绍另一个显示结果列表子集的数据结构，您可以使用 ArrayAdapter，提供 clear()、add()、insert() 和 remove() 方法来操作底层数据结构。

然后，搜索将包括

1.  迭代你的结果数据结构
2.  不断更新您的 visibleResults 数据结构
3.  使用 notifyDataSetChanged 通知视图数组适配器已更改

或者，如果您喜欢，您可以将 json 查询的结果缓存在 sqlite 数据库中，并改用 CursorAdapter。根据查询的复杂性和相关数据量，这可能有点过头了。

# sql - 如果没有找到值，如何在 MySQL 中使用 SUM 函数返回“0”

> ID：14476806
> 
> 赞同：0
> 
> 时间：2013-01-23T09:55:58.240
> 
> 标签：sql, sqlcommand

我希望我的 sum 函数返回 '0'，如果值不存在，任何人都可以确定以下 SQL 命令是否有问题。我已经改变了合并的顺序，但这并没有什么不同

```
SqlCommand scGetPostings = new SqlCommand(@"
SELECT 
  D1.dr, 
  D1.cr, 
  D1.asset_no, 
  (open_bal + dr - cr) AS closing_balance 
FROM (SELECT 
        COALESCE(SUM(dr_amount), 0) AS dr, 
        COALESCE(SUM(cr_amount), 0) AS cr, 
        asset_no 
      FROM posting, sysasset 
      WHERE posting.asset_no = @AssetNumber 
        AND period >= asset_open_per 
      GROUP BY asset_no) AS D1, asset 
WHERE D1.asset_no = asset.asset_no", DataAccess.AssetConnection); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:25:13.503

`if condition`在您的声明中使用：

```
SqlCommand scGetPostings = new SqlCommand(@"
SELECT 
  D1.dr, 
  D1.cr, 
  D1.asset_no, 
  (open_bal + dr - cr) AS closing_balance 
FROM (SELECT 
        SUM(if(dr_amount is null , 0 , dr_amount )) AS dr, 
        SUM(if(cr_amount is null , 0 , cr_amount )) AS cr, 
        asset_no 
      FROM posting, sysasset 
      WHERE posting.asset_no = @AssetNumber 
        AND period >= asset_open_per 
      GROUP BY asset_no) AS D1, asset 
WHERE D1.asset_no = asset.asset_no", DataAccess.AssetConnection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:14:57.697

尝试这个：

```
SELECT 
  asset.asset_no, 
  COALESCE(dr, 0) AS dr, 
  COALESCE(cr, 0) AS cr, 
  (open_bal + COALESCE(dr, 0) - COALESCE(cr, 0)) AS closing_balance 
FROM 
    asset LEFT JOIN
     (SELECT 
        SUM(dr_amount) AS dr, 
        SUM(cr_amount) AS cr, 
        asset_no 
      FROM posting, sysasset 
      WHERE posting.asset_no = @AssetNumber 
        AND period >= asset_open_per 
      GROUP BY asset_no) AS D1 
ON D1.asset_no = asset.asset_no 
```

# java - FieldError 对象中的参数代码是什么？

> ID：14476807
> 
> 赞同：0
> 
> 时间：2013-01-23T09:55:58.920
> 
> 标签：java, spring, spring-mvc

我的代码中有以下几行。我正在以 JSP 形式验证验证码。我不明白`FieldError`对象中传递的所有参数的含义。

```
if (!reCaptchaResponse.isValid()) {
    FieldError fieldError = new FieldError("CaptchaObj", "captcha",
            uresponse, false, new String[] { "badCptcha.CaptchaObj.captcha" },
            null, "Please, Try Again ");
    result.addError(fieldError);
} 
```

HERE 结果变量的类型为`BindingResult`。

我想要对象构造函数中每个参数的确切含义，`FieldError`尤其是构造函数中的**code 参数**类型`String`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:59:15.457

我建议阅读 API 文档以了解[此处](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/)发现的字段错误。

它为此构造函数提到了以下参数：

```
Parameters:
    objectName - the name of the affected object
    field - the affected field of the object
    rejectedValue - the rejected field value
    bindingFailure - whether this error represents a binding failure (like a type mismatch); else, it is a validation failure
    codes - the codes to be used to resolve this message
    arguments - the array of arguments to be used to resolve this message
    defaultMessage - the default message to be used to resolve this message 
```

最重要的参数之一是代码参数，它包含将在您的消息源中搜索的代码。如果找到与此代码匹配的消息，将显示。消息源可以接受参数，因此消息源可以包含如下条目：

```
typeMismatch.startDate={0} is an invalid date. Use format DD/MM/YYYY. 
```

在这种情况下，代码将是`typeMismatch.startDate`，与此代码对应的消息将显示第一个参数，后跟消息。这`{0}`条消息表明它应该显示第一个参数。这些参数由构造函数中的第 6 个参数提供，在您的示例中为 null。

# knockout.js - 如何使用 ko.observable 数组

> ID：14476808
> 
> 赞同：0
> 
> 时间：2013-01-23T09:55:59.373
> 
> 标签：knockout.js

我在使用 ko.obserbaleArrays 时遇到问题...

这是我的可观察数组

```
self.favoriten = ko.observableArray([
                {
                    projectName: "Favorit1", isFavourite: false
                },
                {
                    projectName: "Favorit2", isFavourite: true
                },
                {
                    projectName: "Favorit3", isFavourite: false
                }
                ]); 
```

现在我想设置“isFavourtite”- 属性，其函数如下所示：

```
 self.makeFavourite = function (projectName, data, event) {
      //Some Code

        }; 
```

我现在真的不知道如何使用 knockout.js 设置此属性

谢谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:00:50.813

您可以执行以下操作：

```
 self.makeFavourite = function (projectName, data, event) {
      var favorite = ko.utils.arrayFirst(self.favoriten(), function(item){
          return item.projectName == projectName;
      })

      if (favorite){
          favorite.isFavourite = data;
      }
  }; 
```

但是，如果您想在 UI 中更新值，则必须使 projectName 和 isFavourite 可观察。这是一个例子：http: [//jsfiddle.net/vyshniakov/UdsDf/](http://jsfiddle.net/vyshniakov/UdsDf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:03:46.660

在 makeFavorite 函数中使用 ko.utils api

```
var item = ko.utils.arrayFirst(this.favoriten(), function(item) {
            return ko.utils.stringStartsWith(item.projectName, projectName);
        });
if (item)
    item.isFavorite = true; 
```

# javascript - 在 TinyMCE 中启用 flickr 和 picasa

> ID：14476810
> 
> 赞同：1
> 
> 时间：2013-01-23T09:56:05.790
> 
> 标签：javascript, wordpress, tinymce, flickr, picasa

我的客户需要在我的 TinyMCE 编辑器中支持 flickr 和 picasa。有人对允许他执行“标准”嵌入功能的插件有任何建议吗？我知道 wordpress 支持这一点，我想以类似的方式在我自己的非 wordpress TinyMCE 编辑器中启用它。

另外，我在服务器上使用 HTMLPurifier 来清理任何输入。我已启用安全 iframe 嵌入，因此可以支持它，但其他类型的嵌入可能需要在 HTMLPurifier 上做一些额外的工作。

嵌入 Picasa 和 Flickr 的标准方法是什么，有人知道支持它的任何好的 TinyMCE 插件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:12:46.127

我找到了 tinymce picasa 插件。它位于[这里](http://code.google.com/p/picasa-plugin-tinymce/downloads/list)。您需要将该文件夹复制到 tinymces 插件目录。您的 tinymce 配置需要修改，以便添加该插件和按钮。

关于 flickr ，您可能对此感兴趣[。](http://www.tinymce.com/forum/viewtopic.php?id=11892)

# php - 使用 Javascript 和 php 将数据从 NCBI 数据库传输到另一个站点

> ID：14476811
> 
> 赞同：1
> 
> 时间：2013-01-23T09:56:08.890
> 
> 标签：php, javascript, data-binding, bioinformatics

NCBI 是一个生物信息学和生物序列数据库。它的用户界面是英文的。我正在计划一个网站，该网站显示来自该网站的非英文描述数据。我需要连接 NCBI 爆炸数据库并在那里进行搜索，然后将结果传输到我网站中的爆炸箱。如何使用 JavaScript 和 php 做到这一点？有没有更好的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:23:18.527

> “。我需要连接NCBI爆炸数据库”

您可以使用 NCBI 实用程序以 XML 格式从 NCBI 获取数据：[http ://www.ncbi.nlm.nih.gov/books/NBK25500/](http://www.ncbi.nlm.nih.gov/books/NBK25500/)

你也可以问biostars：[http ://biostars.org](http://biostars.org)

# blackberry - 如何更改黑莓应用程序中的荧光笔（蓝色）？

> ID：14476816
> 
> 赞同：1
> 
> 时间：2013-01-23T09:56:27.457
> 
> 标签：blackberry, java-me, highlighting, onfocus

黑莓中的默认高亮颜色是蓝色。我目前正在做一个主色为红色的应用程序。有没有办法将荧光笔颜色更改为红色？我用谷歌搜索并找到了 ListField 的解决方案，对于其他字段，如按钮、textFields、bitmapFields 等……怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:42:42.850

在黑莓论坛上找到了这个实现，试过了，效果很好。但是您需要为每个想要使用不同荧光笔的字段覆盖此方法。

```
protected void drawFocus( Graphics g, boolean on ) {    
    XYRect focusRect = new XYRect();                
    getFocusRect( focusRect );                
    int yOffset = 0;                

    if ( isSelecting() )     
    {        
        yOffset = focusRect.height >> 1;        
        focusRect.height = yOffset;        
        focusRect.y += yOffset;    
    }                
    g.pushRegion( focusRect.x, focusRect.y, 
                  focusRect.width, focusRect.height, 
                  -focusRect.x, -focusRect.y );   
    g.setBackgroundColor(/*your color here*/);    
    g.setColor( 0xFFFFFF );    
    g.clear();                
    this.paint( g );                
    g.popContext();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:16:43.810

您可以覆盖[`Field.drawFocus`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Field.html#drawFocus%28net.rim.device.api.ui.Graphics,%20boolean%29)您的自定义字段：

```
protected void drawFocus(Graphics g, boolean on) {
    // Custom focus painting
} 
```

# c# - 如何准确获取“年”中两个 DateTime 对象之间的差异 [已关闭，使用 NodaTime]

> ID：14476817
> 
> 赞同：-3
> 
> 时间：2013-01-23T09:56:29.437
> 
> 标签：c#

如何准确获得`DateTime`“年”中两个对象之间的差异（以年为单位）？

`DateTime.Subtract()`给出差异，`TimeSpan`最大面额为天。

所以，如果我想准确地得到今天和 1988 年的某一天（比如 1988 年 3 月 29 日）之间的差异，是否有一种“更简单”的方法可以得到这个人的准确年龄？

我试过的是：

```
DateTime March291988 = DateTime.Parse("29/03/1988");
TimeSpan ts = DateTime.Now.Subtract(March291988);
int years = (ts.Days/365); 
```

更重要的是，问题是：如何将 TimeSpan 转换为 DateTime。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T09:58:43.757

我有偏见，但我会使用[Noda Time](http://noda-time.googlecode.com)：

```
var date1 = new LocalDate(1988, 3, 29);
var date2 = new LocalDate(2013, 1, 23); // See note below
var years = Period.Between(date1, date2, PeriodUnits.Years).Years; 
```

基本上 BCL 并没有提供一种非常简单的方式来处理这样的事情——你真的*不*想要`TimeSpan`，因为它没有锚定到特定的起点/终点。您可以从另一个值中减去一个`Year`值，然后在它做错事时进行调整，但这有点棘手。

现在在您的原始代码中，您使用了`DateTime.Now`. 在 Noda Time 中，我们将时钟视为依赖项，`SystemClock.Instance`作为正常的生产实现。An`IClock`不知道时区——它只知道当前时刻——所以你必须说出你感兴趣的时区。例如：

```
var today = clock.Now.InZone(zone).LocalDateTime.Date; 
```

我知道这似乎冗长，但它隔离了所有不同的转换以使其更加明确。（我可能会引入一个`Date`属性`ZoneDateTime`来稍微减少它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:06:43.500

Here's how you can get the age in years:

```
static int AgeInYears(DateTime birthday, DateTime today)
{
    return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;
} 
```

This accounts for leap years, and will increment the age exactly on their birthday.

# emacs - emacs 打开目录文件信息

> ID：14476822
> 
> 赞同：0
> 
> 时间：2013-01-23T09:56:37.017
> 
> 标签：emacs

这可能很愚蠢，但对很多 Emacs 初学者来说是健康的，比如我自己。打开目录时，会显示文件列表以及许多信息：所有者、日期、权限。对于可能关心文件名和相对位置的开发人员来说，这些是不必要的。那么我们怎样才能改变 Emacs 中的选项来做这样的事情呢？

也适用于大型项目导航。任何一般性建议如何以流畅的方式导航不同的文件？（我可以看到输入带有“i”的文件夹以保持在同一个缓冲区中）对于更顺畅的步行有什么一般建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:28:39.220

This removes the owner and group indicator:

```
(require 'ls-lisp)
(setq ls-lisp-use-insert-directory-program nil
      ls-lisp-verbosity nil) 
```

I use this because `dired-listing-switches` doesn't quite do the trick in Cygwin.

You cannot, that I'm aware of, get rid of more than that in `dired` out-of-the-box.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:13:08.257

这里要自定义的内容和我的首选值 - 即缓冲区底部的最后编辑文件：

dired-listing-switches 是在 `dired.el' 中定义的变量。它的值为“-lart”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T07:26:38.630

如果你使用 emacs 24.4，你可以输入`(`dired 来调用函数`dired-hide-details-mode`。否则，您可以尝试[dired-details](http://www.emacswiki.org/emacs/DiredDetails)。

# export - 导出大型 Lotus 数据库

> ID：14476830
> 
> 赞同：1
> 
> 时间：2013-01-23T09:57:22.617
> 
> 标签：导出, notes-sql, export, lotus-domino, lotus

从包含超过 100k 个具有很多字段的文档的 Lotus 数据库中[导出](/questions/tagged/lotus "显示标记为“莲花”的问题")数据的最佳方法是什么？不需要应用程序逻辑，只需要存储在应用程序中的数据。数据库不包含每个文档的表单设计元素。LEI 不是我们的选择。

1.  目前我们使用java代理导出数据到MS EXCEL，但是运行时间太长。
2.  [notes-sql](/questions/tagged/notes-sql "显示标记为“notes-sql”的问题")可能会更快，
3.  ...或者是否有任何可以足够快的替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:43:22.907

获取所有内容的最快方法可能是导出到 DXL，然后读取该 DXL 以获得所需的数据。

这是一些示例代码，用于导出数据库中记录的第一个选择（LotusScript 代理）。写入名为 C:\temp\data.xml 的文件。

```
Option Public
Option Declare

Sub Initialize
    Dim nsn As New NotesSession
    Dim ndb As NotesDatabase
    Dim ndc As NotesDocumentCollection
    Dim ndo As NotesDocument
    Dim ndxle As NotesDXLExporter
    Dim nst As NotesStream
    On Error Resume Next

    Set ndb = nsn.CurrentDatabase
    Set ndc = ndb.UnprocessedDocuments
    Set ndo = ndc.GetFirstDocument

    Set nst = nsn.createStream
    If (Not(nst.Open( "c:\temp\DATA.xml" ))) Then
        Print "Open File DATA.xml Failed" 
    End If
    nst.truncate

    Set ndxle = nsn.CreateDXLExporter (ndo, nst)

    ndxle.Convertnotesbitmapstogif = true ' Not always needed.

    Call ndxle.Process()
    MsgBox ndxle.Log
    Call nst.Close()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:12:57.513

将数据以 XML 格式保存到文件中的一种有效且简单的方法是使用如下 URL 检索它：

```
/view?ReadViewEntries&Start=1&Count=1000 
```

您将有一个代码以 1000 块的形式获取所有 100K（此值可能会根据数据量进行调整，但如果它太大，服务器可能会挂起）。

该视图包含所有文档和所有项目作为列。

这种方法给服务器 HTTP 任务增加了很多负载，因此最好在安静的时间运行它。

如果您需要将数据导入 Excel，则必须查看当前代理，看看是否可以对其进行优化。

# ruby - 我们可以同时使用 selenium-webdriver 和 nokogiri 吗？

> ID：14476832
> 
> 赞同：6
> 
> 时间：2013-01-23T09:57:31.073
> 
> 标签：ruby, selenium-webdriver, nokogiri, ruby-1.9.3

我使用`Nokogiri`如下：

```
require 'nokogiri'
require 'open-uri'

# Get a Nokogiri::HTML::Document for the page we’re interested in...

doc = Nokogiri::HTML(open('http://www.google.com/search?q=sparklemotion')) 
```

但我的不好，由于公司防火墙可能是，我收到错误：

```
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: No such
host is known.  (SocketError) 
```

因此，我认为我将使用`selenium-webdriver`导航和`nokogiri`处理网页源`html`。

```
require "rubygems"
require "selenium-webdriver"

driver = Selenium::WebDriver.for :firefox
driver.get "http://www.google.com/search?q=sparklemotion" 
```

那么在这里我将如何将网页内容（html）提供给`nokogiri`？

请在这里给我建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T21:08:04.403

您可以使用以下[`page_source`](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Driver.html#page_source-instance_method)方法从 selenium-webdriver 获取页面的源代码：

```
driver.page_source 
```

所以你的脚本可能是：

```
require 'selenium-webdriver'
require 'nokogiri'

driver = Selenium::WebDriver.for :firefox
driver.get "http://www.google.com/"

doc = Nokogiri::HTML(driver.page_source)
# Do whatever with nokogiri 
```

也就是说，我不知道您为什么要使用 nokogiri 而不仅仅是 selenium-webdriver。

# visual-studio-2010 - Visual Studio 说“它正在被另一个进程使用” - ProcessExplorer 说“没有句柄”

> ID：14476836
> 
> 赞同：2
> 
> 时间：2013-01-23T09:57:58.597
> 
> 标签：visual-studio-2010, process-explorer

我知道这已经讨论了很多时间，但他们的回答对我没有帮助。

当我构建项目时，它会出现以下错误：

> 该进程无法访问文件“..\MyProjectFolder\obj\x86\Release\MyProject.exe”，因为它正被另一个进程使用。

到目前为止我已经尝试过：

1.  关闭 Visual Studio 2010，然后再次打开它。
2.  打开任务管理器（以管理员身份），没有进程运行，名为“MyProject.exe”
3.  运行 SysInternals\handles.exe（再次以管理员身份），没有应用程序拥有 MyProject.exe 的句柄。（奇怪的！）
4.  运行SysInternals\ProcessExplorer.exe，搜索进程名，没有句柄。（怎么来的！）
5.  杀死explorer.exe，然后重新运行。没运气。
6.  试图从命令行手动删除文件。相同的错误（被另一个进程使用）。
7.  注销再登录，还是一样的问题。
8.  重新启动机器，是的，它可以工作，但不是所需的答案:)。

我真的很想知道背后的原因。这是我第二次遇到这种情况，我不想再次重启机器。

顺便说一句，ProcessExplorer.exe 或handles.exe 怎么不显示句柄！我失去了信心。。

以下链接中讨论了非常相似的内容（甚至更多！），但它们都没有帮助我（或者我找不到合适的链接）：

1.  [运行 Visual Studio 调试。该进程无法访问该文件，因为它正被另一个进程使用](https://stackoverflow.com/questions/10196924/run-visual-studio-debug-the-process-cannot-access-the-file-because-it-is-being)
2.  [Visual Studio - 不能多次构建简单项目](https://stackoverflow.com/questions/7995493/visual-studio-cannot-build-a-simple-project-more-than-once)
3.  [VisualStudio2010 调试 - 进程无法访问文件...因为它正被另一个进程使用](https://stackoverflow.com/questions/2690119/visualstudio2010-debugging-the-process-cannot-access-the-file-because-it-i)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T14:16:00.497

如果您有一个作为解决方案一部分的 Windows 服务的 VS 项目，并且该服务正在您的本地计算机上运行，​​请尝试停止该服务。我们在我们的一个解决方案中就有这个，一旦我们停止它，VS 就立即构建了。问题已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T10:53:24.367

我遇到了这个问题，重命名文件（例如 MyProject.exe 到 MyProject1.exe）将解决问题。

您可以在预构建事件中自动重命名。

谢谢

# jquery - i18n 实现 - jquery

> ID：14476847
> 
> 赞同：1
> 
> 时间：2013-01-23T09:58:35.110
> 
> 标签：jquery, jquery-plugins, internationalization

我的网站包含大量动态 HTML

目前，元素的所有标签和工具提示都硬编码在 .js 文件中，如下所示：

```
<div class="someClassName" title="Tracked item details">Name of Label</div> 
```

我想要的是，而不是硬编码它，我想创建包含我们在 .properties 文件（服务器端）中创建的键的文件（或仅在客户端类似的东西）并使用这些键来获取该键的值js。

**目的：**如果我想为该特定键显示另一条消息，我只需要在一个地方更改键的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:12:51.527

您可以使用 js 对象/json 对象，例如

`var abc = {'key1':'value1','key2':'value2'};`

这样您只需要更新上面的对象并重新分配您需要的值即可。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:10:16.740

还没有找到问题的确切解决方案。但是一个可行的解决方案是我们可以在属性文件（服务器端）中为 js 定义键值对。在登录到应用程序时，我们可以在文档加载时执行 ajax 请求，该请求将返回该属性文件的 JSON 字符串。现在，将该对象保存在 js 变量中。并使用此变量在需要的地方访问属性。

```
<div class="someClassName" title="'+loadPropertyValue("tracking.name.title")+'">'+loadPropertyValue("label.name")+'</div>

function loadPropertyValue(key) {

for(var i = 0; i < propertiesObject.length; i++)
{
  var item = propertiesObject[i];
  if(item[key]) {
      return item[key];
  }
}
} 
```

# visual-studio - 如何将 MS Visual C++ 2010 解决方案或项目导入 Bloodshed Dev C++ 4.9.9.2

> ID：14476855
> 
> 赞同：1
> 
> 时间：2013-01-23T09:58:57.283
> 
> 标签：visual-studio, ide, projects-and-solutions, dev-c++

有关如何将 MSVS 2010 解决方案 (.sln) 或 VisualC++ 项目 (.vcxproj) 导入 Dev-C++ 4.9.9.2 的任何建议？

有一个从 VS 6.0 导入 .dsp 项目文件的选项，但我能找到的就是这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:14:46.183

“IDE”不以任何方式支持它，并且由于它的开发不久前停止，我想没有插件可以做到这一点。

您必须手动完成，这可能还需要修改源代码，因为 Dev-C++ 4.9 有非常旧的编译器。

我建议使用 Visual Studio Express 版本，即使在 2012 版本中也可以轻松打开/转换您的项目。

# javascript - 响应式jsCarousel V2.0

> ID：14476856
> 
> 赞同：1
> 
> 时间：2013-01-23T09:58:57.257
> 
> 标签：javascript, responsive-design

我已经实现了 jsCarousel v2.0 演示链接[http://www.egrappler.com/contents/jscarouselv2/demo/jscarousel-2.0.0.htm](http://www.egrappler.com/contents/jscarouselv2/demo/jscarousel-2.0.0.htm)

我的整个站点都是响应式的，但是当 jsCarousel v2.0 运行时，当我在纵向模式或横向模式下打开站点时它可以工作

但是当我从纵向模式切换到横向模式时，它没有检测到正确的模式

```
if ( jQuery(window).width() > 1200 ){
 var a=5;
}
else if ( jQuery(window).width() >= 949 ){
var a=5;}
else if ( jQuery(window).width() >= 768 ){
var a=3;}
else if ( jQuery(window).width() >= 600 ){
var a=2;}
else if ( jQuery(window).width() >= 480 ){
var a=2;}
else if ( jQuery(window).width() >= 320 ){
var a=1;}

$.fn.extend({
jsCarousel: function(options) {
var settings = $.extend({
scrollspeed: 500,
delay: 5000,
itemstodisplay: a,
autoscroll: false,
onthumbnailclick: null
}, options); 
```

请建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:05:37.730

您应该添加类似这样的代码，当窗口大小改变时触发。

```
$(window).bind('resize', function () { 

}); 
```

但是你的代码是插件代码？

# java - 网络虚拟化

> ID：14476857
> 
> 赞同：1
> 
> 时间：2013-01-23T09:59:06.160
> 
> 标签：java, networking, ilog

有谁知道java中网络虚拟化的实现，详细来说是底层网络和虚拟请求之间的嵌入问题（两者都可以表示为图表）。

谢谢。

# malware - 我的网站重定向到恶意网站

> ID：14476868
> 
> 赞同：5
> 
> 时间：2013-01-23T09:59:43.423
> 
> 标签：malware

再会

我刚刚将一个 Wordpress 主题上传到我的网站网络服务器上。现在我之前在我的家庭服务器上测试了这个主题，没有任何问题。

由于它一直在网络服务器上（在受信任的托管公司），当我浏览我的网站时，我会收到重定向到恶意网站的 url。（我从未向任何人提供任何帐户详细信息，帐户仅一周前）

这是我的网站：[http ://evolutionof4.co.za](http://evolutionof4.co.za)

它链接到的恶意网站包括：themeforest.net、carolini.net 等。

我已经扫描了网络服务器上的所有文件以查找恶意软件（使用 avast），我还使用 Sucuri Security 扫描了我的网站，但它没有发现任何东西。

我不认为这是我电脑上的恶意软件，因为我在局域网上的另一台电脑上遇到了同样的问题......

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:10:33.953

我遇到了同样的问题，我通过手动检查解决了它表示看起来加密的代码。我删除了它。然后在这里检查我的footer.php 还有一些2,3 行恶意代码。我删除了它，然后我再次检查，问题是同一个谷歌显示它为恶意网站，然后我在谷歌上搜索它，发现删除此类代码后，你应该在谷歌的网站管理员工具中提交你的网站以供审查一天我收到一封邮件。

您检查您的文件，在检查更改您的 ftp 和 wp-admin 的用户名和密码后，

最重要的是在站长工具上提交评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:07:56.773

检查您的主题文件夹中的**functions.php 。**它发生在我身上，重定向到 jqueryc.com ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:08:17.770

您访问该站点的管理员凭据有多强？如果它们相对较弱，攻击者可能会猜到您的凭据。主机服务器也可能存在 DNS 中毒——他们必须解决这个问题。如果您输入您的 URL，它会加载您的网站，然后是恶意网站，那么这不是可能的原因。

还要查看您的站点代码以查找可能由攻击者添加的 iFrame，这些 iFrame 将加载恶意站点/内容。这些不需要服务器上的恶意软件，只需要一两行 HTML 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:17:35.107

难道是，新主题包含垃圾？也许，有一些东西需要配置。但是，我绝不会尝试修复受感染的网站，只需恢复所有文件和数据库的备份即可。然后，您可以尝试通过再次上传该主题来重现所有这些，同时准备好备份。主题可以包含的不仅仅是一些样式定义。当然，如有疑问，建议更改凭据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T01:37:18.700

我使用[了 jsunpack](http://jsunpack.jeek.org/)并将其反混淆为以下内容：

```
 //document.write (s)  <script type="text/javascript" src="http://themenest.net/platform/script/track?d=undefined&r=undefined&c=905"></script> 
```

您可以自己查看[永久报告](http://jsunpack.jeek.org/?report=977a09413c0f4909ce7dec82a9af68ed3dc85924)。对于您的用户来说，这看起来像是一个跟踪错误和隐私问题。我个人会删除它，并且可能不再使用该站点上的任何主题。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-01-08T16:30:59.983

选择所有文件。并删除它...

然后再次上传你的文件..希望这也能正常工作..

# jquery - 使用 jquery 打开相同的对话框？

> ID：14476870
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:59:49.537
> 
> 标签：jquery, dialog

我有下一个按钮，通过单击此按钮，我必须在同一个对话框中打开下一个客户数据，但我没有关闭 jquery 中的旧对话框。我怎样才能？

```
$("#GetCustomerId").click(function GetCustomerData(custno,arrow,indexno){
    var loc = window.location;
    var pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);
    $("#dialog-Customer",parent.document).dialog({
         autoOpen: false,
         height:720,
         width: 1200,
         modal: true,
         open: function (event, ui) {
               $('#dialog-Customer').css('overflow', 'hidden');
               $(event.target).parent().css('position', 'absolute');
               $(event.target).parent().css('top', '0px');
               $(event.target).parent().css('left', '85px');
               }
    });
    $.ajax({  
        type: "POST",  
        url: pathName+"GetNextCustomerData.do",  
        data:{indexno:indexno,custno:custno,arrow:arrow},
        beforeSend:function(){
            $('#dialog-Customer',parent.document).html('<div class="loading"><img src="images/loading_big.gif" alt="Loading..." /></div>');
        },
        success: function(response){  
            $('#dialog-Customer',parent.document).html(response);  
        },  
        error: function(e){  
            alert('Error: ' + e);  
        }  
    });
    $("#dialog-Customer",parent.document).dialog("open");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:17:54.153

1）从 click(function..
2) 中删除弹出定义，将其单独放置
3) 成功打开对话框。

```
$("#dialog-Customer",parent.document).dialog({
     autoOpen: false,
     height:720,
     width: 1200,
     modal: true,
     open: function (event, ui) {
           $('#dialog-Customer').css('overflow', 'hidden');
           $(event.target).parent().css('position', 'absolute');
           $(event.target).parent().css('top', '0px');
           $(event.target).parent().css('left', '85px');
           }
});

$("#GetCustomerId").click(function GetCustomerData(custno,arrow,indexno){
var loc = window.location;
var pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);
$.ajax({  
    type: "POST",  
    url: pathName+"GetNextCustomerData.do",  
    data:{indexno:indexno,custno:custno,arrow:arrow},
    beforeSend:function(){
        $('#dialog-Customer',parent.document).html('<div class="loading"><img src="images/loading_big.gif" alt="Loading..." /></div>');
    },
    success: function(response){  
    $("#dialog-Customer",parent.document).dialog("open");
        $('#dialog-Customer',parent.document).html(response);  
    },  
    error: function(e){  
        alert('Error: ' + e);  
    }  
}); 
```

});

# java - JSP Servlet 请求的资源 () 不可用

> ID：14476873
> 
> 赞同：0
> 
> 时间：2013-01-23T09:59:57.757
> 
> 标签：java, jsp, servlets, netbeans, http-status-code-404

当我尝试提交由 servlet 处理的表单时，浏览器指示请求的资源不可用，并出现 HTTP 404 错误。网址如下所示：

```
http://localhost:8080/Website/DateSearchServlet 
```

我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>DateSearchServlet</servlet-name>
    <servlet-class>DB.DateSearchServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DateSearchServlet</servlet-name>
    <url-pattern>/Search/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

要调用 servlet，我使用这种简单的形式：

```
<form name="dateSearch" action="DateSearchServlet" method="post">
    <label for="from">Date From</label>
    <input type="text" id="from" name="from" />
    <label for="to">Date To</label>
    <input type="text" id="to" name="to" />
    <input type="submit" id="submit" value="Submit">
</form> 
```

最后这是 servlet：

```
@WebServlet(name = "DateSearchServlet", urlPatterns = {"/Search"})
public class DateSearchServlet extends HttpServlet {

DatabaseConnector dataManager;
boolean dbOK = false;
HomeList homes = new HomeList();

@Override
public void init() {
    dataManager = new DatabaseConnector();
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String dateFrom = request.getParameter("from");
    String dateTo = request.getParameter("to");

    if (dateFrom == null || dateTo == null) {
        dbOK = false;
    } else {
        dbOK = true;
    }//end if

    request.setAttribute("homeList", null);

    if (dbOK) {
        homes = dataManager.getPropertiesSearch(dateFrom, dateTo);
        request.setAttribute("homeList", homes);
        request.getRequestDispatcher("bookings.jsp").forward(request, response);
    } else {
        System.out.println("DBNOTOK");
        //error...
    }
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:04:27.563

web.xml 中的 URL 模式没有为您调用的 servlet 正确配置。

因此，将表单中的操作更改为 URL **Search/DateSearchServlet**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:17:10.447

试试这个....

```
<form name="dateSearch" action="DateSearchServlet.action" method="post">
<label for="from">Date From</label>
<input type="text" id="from" name="from" />
<label for="to">Date To</label>
<input type="text" id="to" name="to" />
<input type="submit" id="submit" value="Submit"> 
```

# android - 我应该更改其中仅更新 admob 广告的 android 应用程序的版本吗？

> ID：14476874
> 
> 赞同：0
> 
> 时间：2013-01-23T09:59:58.720
> 
> 标签：android

我想知道我是否必须更改android应用程序的版本。应用程序中所做的唯一更改是admob广告的集成。请帮助您提出建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:26.643

在我看来，无论代码多么小，都应该始终更改版本号。例如，版本号的格式通常`1.0.0.0`是主版本号，然后是次要版本号，然后是错误号，然后是修订号。

每个数字都应相应更改，例如，如果更新是增加额外功能的重大更改，请将 1 更改为 2。对于您的 admob 集成示例，我可能会将修订号更新为 1.0.0.1。

# oracle - ORA-01017 从 9i 客户端连接到 11g 数据库时用户名/密码无效

> ID：14476875
> 
> 赞同：67
> 
> 时间：2013-01-23T09:59:58.733
> 
> 标签：oracle, oracle11g, oracle9i

我正在尝试从带有 9i (v9.2.0.1) 客户端的 PC 连接到 11g (v11.2.0.1.0) 上的架构。它似乎可以很好地连接到某些模式，但不是这个 - 它`ORA-01017 Invalid Username/Password`每次都会返回错误。

用户名和密码绝对正确 - 谁能想到这不起作用的原因？

9i 和 11g 之间是否存在根本性的不兼容？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-23T10:15:53.100

用户名和密码肯定不正确。Oracle 11g 凭据区分大小写。

尝试 ALTER SYSTEM SET SEC_CASE_SENSITIVE_LOGON = FALSE; 并更改密码。

[http://oracle-base.com/articles/11g/case-sensitive-passwords-11gr1.php](http://oracle-base.com/articles/11g/case-sensitive-passwords-11gr1.php)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-07-27T05:22:37.417

对于 oracle 版本 12.2.x，用户无法使用不区分大小写的密码登录，即使 SEC_CASE_SENSITIVE_LOGON = FALSE 如果用户的 PASSWORD_VERSIONS 不是 10g。

以下 sql 应显示用户的 PASSWORD_VERSIONS。

```
select USERNAME,ACCOUNT_STATUS,PASSWORD_VERSIONS from dba_users;
USERNAME          ACCOUNT_STATUS    PASSWORD_VERSIONS 
---------------   --------------    -----------------
dummyuser         OPEN              11G 12C 
```

使 PASSWORD_VERSIONS 与 10g 兼容

在数据库的 sqlnet.ora 中添加/修改行以使 SQLNET.ALLOWED_LOGON_VERSION_SERVER=8 重新启动数据库 更改/过期现有用户的密码 创建的新用户在上述步骤之后也将具有相同的设置 PASSWORD_VERSIONS 应该是这样的

```
select USERNAME,ACCOUNT_STATUS,PASSWORD_VERSIONS from dba_users;
USERNAME          ACCOUNT_STATUS    PASSWORD_VERSIONS 
---------------   --------------    -----------------
dummyuser         OPEN              10G 11G 12C 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-01-14T15:55:31.110

前段时间我有一个类似的问题。您必须小心使用引号和双引号。建议使用管理员凭据重置用户密码。

```
ALTER USER user_name IDENTIFIED BY new_password; 
```

但不要在两个参数中使用双引号。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-09-03T09:34:19.790

如果一切都失败了，请尝试将密码重置为相同的内容。我遇到了这个错误并且无法解决它，但只需将密码重置为相同的值即可解决问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-26T17:51:13.743

您可以使用 sqlplus 连接到 Oracle 数据库：

```
sqlplus "/as sysdba" 
```

然后创建新用户并分配权限。

```
grant all privileges to dac; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-09T10:00:36.437

我不是专家。如果在 Oracle 11g 中尝试从 SQL Developer 连接 HR 模式时遇到 ORA-01017 请尝试按如下方式解锁 HR

**更改由 hr DEFAULT 标识的用户 HR DEFAULT 表空间用户临时表空间临时帐户解锁；**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-11T12:48:51.217

我遇到了同样的错误，**但是当我连接时，脚本中的其他先前语句之前运行良好**！（因此连接已经打开，并且一些成功的语句在*自动提交*模式下运行良好）该错误可以重现几分钟。然后它就消失了。我不知道是否有人或某些内部机制在这段时间内做了一些维护工作或类似的工作——也许吧。

我的环境的更多事实：

*   11.2
*   连接为：`sys as sysdba`
*   所涉及的操作...读取`all_tables`，`all_views`并授予对它们的*选择*以供其他用户使用

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-18T17:33:28.867

我遇到了同样的问题，并在用户名和密码周围加上了双引号，它起作用了：使用“TEST”创建由“opps”标识的公共数据库链接“opps”；

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-22T17:59:12.900

Oracle 11 G 和 12 C 版本建议使用更复杂的密码，虽然在用户创建过程中没有问题。密码必须是字母数字并带有特殊字符。

验证用户的密码版本和状态：

```
select * from dba_users where username = <user_name>; 
```

在 11G 12C 的情况下修改如下：

```
alter user <user_name> identified by Pass2019$; 
```

现在测试连接！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-23T08:27:05.453

我最近在使用 Oracle 12c 时也遇到了类似的问题。在我更改了使用的 ojdbc jar 的版本后，它得到了解决。将 ojdbc14 替换为 ojdbc6 jar。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-04-06T22:12:25.877

我有一个类似的问题。我使用的 id/pw 是正确的，但我`ORA-01017 Invalid Username/Password`只连接了一个特定的连接。

事实证明，我在 Oracle SQL Developer 中的连接设置在“代理用户”选项卡中打开了“使用数据库代理身份验证”。我有一段时间没有注意到这一点。

[![在此处输入图像描述](../Images/fdffefa359a9bff942a4e3e25cc67037.png)](https://i.stack.imgur.com/4CKBP.png)

在我取消选中该选项后，它工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-29T08:57:03.047

关于 Oracle 的 OTN 的提示 = 当您尝试连接时不要在 TOAD 中输入您的密码，并让它**弹出** **一个输入密码的对话框**。**在那里输入密码，**它将起作用。不确定他们在 TOAD 中使用密码做了什么，但这是一种解决方法。它与 11g 中区分大小写的密码有关。我认为如果您将密码更改为全部大写，它将适用于 TOAD。 [https://community.oracle.com/thread/908022](https://community.oracle.com/thread/908022)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-29T12:05:30.903

通过代理用户通过 odp.net 连接时，我也收到了相同的 sql 错误消息。

我的错误是我的用户是用引号创建的（例如“rockerolf”），然后我还必须在连接字符串中将我的用户指定为 User Id=\"rockerolf\"..

最后我最终删除了带引号的用户并创建了一个没有..

*掌心*

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-06-24T14:26:28.813

我知道这篇文章是关于 11g 的，但是如果你决定使用那个，那么 12c 客户端中的一个关于它如何加密密码的错误可能是造成这个错误的罪魁祸首：

*   没有密码区分大小写的问题（即您尝试`ALTER SYSTEM SET SEC_CASE_SENSITIVE_LOGON = FALSE`并重置密码但仍然无效），
*   在连接字符串中为密码加上引号，但仍然无济于事，
*   您已经验证了所有的环境变量（`ORACLE_HOME`, `PATH`, `TNS_ADMIN`），并且`TNS_ADMIN`注册表字符串`HKLM\Software\Oracle\KEY_OraClient12Home`已经到位，
*   您已验证您的连接字符串和用户名/密码组合在网络管理器中有效，并且
*   您可以使用相同的凭据使用 SQL*Plus、Oracle SQL Developer 进行连接。

所有基本检查。

修复：尝试在注册表 (regedit) 中设置`HKLM\System\CurrentControlSet\Control\Lsa\FIPSAlgorithmPolicy\Enabled`为`0`禁用 FIPS。

[Oracle.ManagedDataAccess 和 ORA-01017：用户名/密码无效；登录被拒绝](https://stackoverflow.com/questions/26410951/oracle-manageddataaccess-and-ora-01017-invalid-username-password-logon-denied)

[ORA-01005 与 ODP.Net 连接时出错](https://stackoverflow.com/questions/31785650/ora-01005-error-connecting-with-odp-net)

[https://community.oracle.com/thread/2557592?start=0&tstart=0](https://community.oracle.com/thread/2557592?start=0&tstart=0)

[https://dba.stackexchange.com/questions/142085/ora-01017-invalid-username-passwordlogon-denied/142149#142149](https://dba.stackexchange.com/questions/142085/ora-01017-invalid-username-passwordlogon-denied/142149#142149)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-22T21:07:02.747

我最近在使用 Oracle 12c 时遇到了类似的问题。我使用小写密码创建了一个新用户，并且能够从数据库服务器正常登录，但所有客户端都失败并出现 ORA-01017。最终修复结果很简单（将密码重置为大写），但需要付出很多令人沮丧的努力才能到达那里。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-06T15:10:59.327

凭据可能是正确的，而其他一些错误。我将我的*可插拔数据库*连接字符串基于其*容器 DB*。而不是原来的`parent.example.com` *服务名称*，正确的似乎是`pluggable.example.com`.

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-29T00:42:09.693

在我的情况下，使用 oracle 数据库`tableplus build 373 on my m1 device` 在另一个文本编辑器中`copy and paste`输入用户名和密码，在 tableplus 中输入用户名和密码。当我键入时`in tableplus the text automatically changes to lowercase`。因为我对 sqldeveloper 没有任何问题，但是在尝试 tableplus 时它总是拒绝，现在我已经解决了。我不知道为什么它在应用程序或其他方面存在问题，但我已经通过诀窍解决了。

# extension-methods - 我们如何在typo3中进行扩展？

> ID：14476877
> 
> 赞同：0
> 
> 时间：2013-01-23T10:00:01.363
> 
> 标签：extension-methods, typo3, typo3-tca

我在typo3 中创建了一个扩展，并希望让它生效。有人可以解释要遵循的步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:47:31.387

1.  在typo3.org 中创建一个帐户。
2.  然后在typo3后端（您的网站）“扩展管理器>设置”选项卡-输入您的typo3.org帐户登录凭据并保存。
3.  “扩展管理器 > 可用扩展”选项卡 - 单击您的扩展，然后使用“TER 上传”选项。

祝你今天过得愉快 ：） ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:10:02.320

你的问题似乎有点笼统。为了在 Typo3 中创建自己的扩展程序，您首先需要在您的程序中安装一个名为“ `Extbase`”的扩展程序，`Typo3 Extension Manager`它可以帮助您加快开发速度。

然后，您可以正确地开始您的开发。完成后，只需安装它并将其用作 Typo3 站点的插件。

转到此链接了解更多信息：[http ://wiki.typo3.org/Extension_Development](http://wiki.typo3.org/Extension_Development)

# emacs - Emacs 中 Sublime Text 的制表符补全

> ID：14476880
> 
> 赞同：1
> 
> 时间：2013-01-23T10:00:13.533
> 
> 标签：emacs, sublimetext2

Emacs 中是否有一个广泛使用的插件，它允许我在 Sublime Text 中执行相同的选项卡完成和“去任何事情”？

`ThisFunctionHasAVeryLongName()`例如，可以通过键入`tfaln`[tab] 来完成。 `/here/is/another/long/path/file`可以通过键入`hereanlfile`[tab]来完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:40:05.967

Emacs Wiki 中有一个叫做“灵活扩展”的东西。我自己没有尝试过。另请参阅页面上的其他提示：http: [//emacswiki.org/emacs/HippieExpand#toc8](http://emacswiki.org/emacs/HippieExpand#toc8)

# eclipse - 在 Eclipse Juno 中隐藏/删除全局搜索栏

> ID：14476881
> 
> 赞同：4
> 
> 时间：2013-01-23T10:00:15.650
> 
> 标签：eclipse, customization, eclipse-juno

我最近将 Eclipse 升级到 Juno，并且（对我而言）真正不需要的添加之一是全局搜索栏 - 图像中带有“快速访问”提示的那个。

![在此处输入图像描述](../Images/c4198c1e3c6ff9f9d85154e8568883e0.png)

我必须在屏幕尺寸有限的笔记本电脑上工作（我在移动中做了很多工作，不能随身携带大显示器）。由于这个搜索栏，工具栏换到了第二行，我在编辑器中至少松开了几行文本。

当然，我可以删除一堆其他按钮，然后栏就会适合，但是为什么我不能删除我不想要的字段呢？

Eclipse 对它赞不绝口，仿佛它是解决我们所有搜索问题的灵丹妙药，但我个人不使用也不想要它。有没有人找到隐藏/删除该搜索栏的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:07:08.840

The [Eclipse fullscreen plugin](http://code.google.com/p/eclipse-fullscreen/) should take care of that. It removes the top and bottom bars entirely on a key combo. `Ctrl+Alt+Z` is the default.

I am using it to use more real estate on my laptop and wouldnt want to miss it.

I am not aware of a way to get rid only of the search bar while keeping the others in place.

# arrays - 无效的内存访问 fortran 检查器

> ID：14476884
> 
> 赞同：0
> 
> 时间：2013-01-23T10:00:26.507
> 
> 标签：arrays, memory, fortran, inspector

如果我使用数组运行我的 fortran 程序（查看代码），我会得到错误的计算值。如果我使用英特尔检查器 (-mi3)，它会告诉我每次在程序中使用一个大数组时都会出现内存问题“无效内存访问”，并且 /lib64/ld-linux-x86- 中也会出现错误64.so.2。首先，我认为我没有足够的内存空间，但是在我的 64 位机器上 16 GB 内存有足够的内存空间（：free -m ~14 GB）。如果我估计我的程序的内存大小，大约 4 GB 应该足够了。当我的程序运行时，使用的内存从 0% 增加到 ~20% 并停在那里直到程序“正常”终止。所以我认为我有足够的内存空间。对于小型数组（例如 nemax=3 000 000），我在 intel 检查器中获得了正确的计算值并且没有错误。我还用 flag check all 检查了数组。我用 ifort -mcmodel=medium -shared-intel -o test test.f90 编译程序。我不知道我还能做些什么来解决这些内存访问错误？有人有想法吗？？谢谢你的帮助！

```
 module lz_data

  integer,parameter :: maxsite=16   
  integer,parameter :: nmax =6000000 
  integer,parameter :: nemax=300000000

  real*8,save :: diag(nmax)        

  real*8,save  :: werte(nemax)              !Here are the only large arrays
  integer,save :: izeile(nemax)
  integer,save :: ispalt(nemax)

  integer,save :: nentry

  end module lz_data

  prgram test
  use lz_data

  implicit real*8 (a-h,o-z)
  real*8 umat(maxsite,maxsite)
  logical lav(nmax,maxsite) 
  logical lbv(nmax,maxsite) 

  ...

  do is=1,ns
    diag(is)=0.0d0    ! HERE the debugging tool says invalid memory access 
    do i=1,msite
      do j=1,msite
        if (lav(is,i).and.lbv(is,j)) diag(is)=diag(is)+umat(i,j) ! invalid memory access
      enddo
    enddo
  enddo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:02:51.567

看起来您遇到了一些静态数组大小限制。mcmodel=medium “应该”对此有所帮助，但显然没有。你可以用可分配数组替换你的大静态数组，看看是否有帮助。

哦，就像 High Performane Mark 所说，使用隐式无，确保初始化所有变量，并提供一个自包含的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:37:36.663

除了其他出色的建议之外，我建议编译时尽可能多地打开调试选项，包括运行时错误检查。编译器会针对可能导致错误的不良做法向您发出警告，并会发现其他错误。不良做法包括未声明或未初始化的变量。我建议不要使用隐式类型并声明每个变量。通过运行时下标检查，当下标超出数组边界时，编译器会告诉您……这是一个比无效内存访问更容易理解的错误。使用英特尔 ifort 尝试：`-O2 -stand f03 -assume realloc_lhs -check all -traceback -warn all -fstack-protector -assume protect_parens -implicitnone`

在编辑您的代码示例以便使用这些选项强制执行的规则进行干净编译后，运行会给出错误消息：

```
forrtl: severe (193): Run-Time Check Failure. The variable '_test_$NS' is being used without being defined 
```

即，ifort 在运行时发现一个未初始化的变量。这导致程序在数组末尾运行并访问无效内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:34:22.087

除了其他建议之外，您还应该确保您没有受到 shell 中默认堆栈大小限制的影响。静态数组通常是在栈上创建的，BASH 中默认的栈大小是 8Mb。如果您有比这更大的数组，您最终会遇到访问冲突。您可以通过设置覆盖此限制

```
ulimit -s unlimited 
```

在 BASH 中，因此您的堆栈大小仅受系统中可用内存的限制。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-25T10:39:59.703

谢谢你的帮助！我已经设置了 ulimit -s unlimited 或 10 GB。我知道使用隐式不太好，但是对于较小的系统，我的程序运行得非常好，那么为什么使用隐式会出错。我想使用可分配数组而不是大静态数组，但在我的情况下它没有意义，因为大数组 werte 的值的计算与数组的范围相关联。所以我必须浪费一点（！）内存来预测我的静态数组的足够维度。在我的情况下，预测维度并不复杂，我绝对（100%）确定计算出的数组适合静态数组。我什至用 -check all 标志检查了它。我可以使用 diag(nmax) 数组创建一个可分配数组，所以我会检查这个，

# actionscript-3 - 从自身卸载子 swf

> ID：14476886
> 
> 赞同：0
> 
> 时间：2013-01-23T10:00:29.997
> 
> 标签：actionscript-3, flash

我正在尝试在 flash cs5、as3 中构建游戏。游戏将有一个主板（mainBoard.swf），从那里我可以选择我想玩的东西（每次加载不同的 swf 文件）。我遇到的问题是我无法从自身关闭子 swf。我写的代码是：

*主板.fla*

```
var gameLoader:Loader = new Loader();
var loadGameRequest:URLRequest; 

function startGame(eventObject:MouseEvent):void{

    loadGameRequest = new URLRequest("puzzle.swf");     
    gameLoader.load(loadGameRequest);
    gameLoader.x = 0;
    gameLoader.y = 0;
    addChild(gameLoader);
    gameLoader.contentLoaderInfo.addEventListener('unloadGame', unloadSWFGame);     

}

function unloadSWFGame(event:Event):void{
    event.target.removeEventListener('unloadGame', unloadSWFGame);
    removeChild(gameLoader);
    gameLoader.unload();
} 
```

在*puzzle.fla 中*，我有一个“退出”按钮，其代码是：

```
exit_btn.addEventListener(MouseEvent.CLICK, closeSWF);

function closeSWF(event:MouseEvent):void {
    dispatchEvent(new Event('unloadGame', true)); 
} 
```

据我所读，这是我必须使用的方式，但它不起作用。*exit_btn* 什么都不做。有人可以帮忙吗？难道我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:34:14.927

更换

```
gameLoader.contentLoaderInfo.addEventListener('unloadGame', unloadSWFGame); 
```

和

```
gameLoader.addEventListener('unloadGame', unloadSWFGame); 
```

contentLoaderInfo 仅用于[加载](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#eventSummary)事件。对于鼠标事件，始终使用显示列表元素。

# ios - 捏识别器崩溃

> ID：14476888
> 
> 赞同：0
> 
> 时间：2013-01-23T10:00:35.847
> 
> 标签：ios, uigesturerecognizer, uipinchgesturerecognizer

我试图检测 a`UIPinchGestureRecognizer`方法中的触摸，因为我需要水平和垂直比例。在捏合时，应相应调整图像大小。例如，如果用户只水平移动手指，我只调整视图的宽度。

它工作正常，但是当我将手指放在屏幕上时，大多数情况下应用程序会因 SIGABRT 而崩溃并且没有消息。

我的代码是：

```
 if (recognizer.state == UIGestureRecognizerStateBegan) {
        previousHorizontalPinchDistance = ABS([recognizer locationOfTouch:1 inView:recognizer.view].x - [recognizer locationOfTouch:0 inView:recognizer.view].x);
        previousVerticalPinchDistance = ABS([recognizer locationOfTouch:1 inView:recognizer.view].y - [recognizer locationOfTouch:0 inView:recognizer.view].y);
    }
    CGFloat horizontalPinchDistance = ABS([recognizer locationOfTouch:1 inView:recognizer.view].x - [recognizer locationOfTouch:0 inView:recognizer.view].x);
    CGFloat verticalPinchDistance = ABS([recognizer locationOfTouch:1 inView:recognizer.view].y - [recognizer locationOfTouch:0 inView:recognizer.view].y); 
```

崩溃发生在我设置`horizontalPinchDistance`. 知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:34:12.370

与此同时，我已经找到了崩溃的原因。

当用户抬起手指时，仍然会调用 Pinch 识别器的方法（或者如果用户没有同时抬起两个手指）。问题是它`numberOfTouches`变成了 1 而不是 2。所以方法调用中的索引 1`[recognizer locationOfTouch:1 inView:recognizer.view]`将超出范围。所以我问题中的代码块应该只在`recognizer.numberOfTouches > 1`.

# visual-studio - Visual Studio 在连接到 android 时挂起

> ID：14476889
> 
> 赞同：1
> 
> 时间：2013-01-23T10:00:39.900
> 
> 标签：visual-studio, xamarin.android

**我正在为 Android 使用 Mono，我的Visual Studio 2012**经常挂起，占用整个 CPU，并且在我断开我的 Android 设备之前不会离开此状态。我做错什么了吗？这是一个已知问题吗？对同一个项目使用**MonoDevelop**可以获得很好的结果，并且目前是我正在调试的方式，但我真的很想改用**VS2012**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:35:23.490

我觉得你的经历很典型。

请通过新的或现有的错误记录您对 xamarin 的体验

[https://bugzilla.xamarin.com/buglist.cgi?quicksearch=Vs2012](https://bugzilla.xamarin.com/buglist.cgi?quicksearch=Vs2012)

我知道那里存在很多问题，其中许多问题已经在 NEW 状态存在了几个月，而且看起来 Xamarin 似乎不在乎……但我本周已经与一些 xamarin 团队成员进行了交谈，这是非常清楚他们确实关心并且他们现在正在关注这个领域 - 所以他们拥有的错误报告越多，他们就越了解他们的客户需要什么。

# android - JNI UnsatisfiedLinkError：方法

> ID：14476891
> 
> 赞同：0
> 
> 时间：2013-01-23T10:00:40.593
> 
> 标签：android, java-native-interface

文件名：bmp-parsing.cpp

```
JNIEXPORT jint JNICALL Java_com_example_happy_MainActivity_bmpParsing( JNIEnv* env,
    jintArray bmapColorArray)
{
    return 0;
} 
```

包 com.example.happy;

```
public native int bmpParsing(int[] Array);
static {
    System.loadLibrary("bmp-parsing");
}

int[] Array = new int[bmapColorArraySize];
Log.d("JNI Test", "Return: " + bmpParsing(Array)); 
```

当我调用本机函数时，它显示“java.lang.UnsatisfiedLinkError：bmpParsing”。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:11:42.900

将 jobject 添加到您的 JNI 方法，然后尝试它会正常工作

```
 JNIEXPORT jint JNICALL Java_com_example_happy_MainActivity_bmpParsing( JNIEnv* env ,jobject obj,
    jintArray bmapColorArray)
{
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:03:41.953

你组成了那个“C”函数签名。使用 javah 为您生成的那个。这就是它的用途。

# c# - MVC - 将单个页面中的所有图像显示为数据库中的图库？

> ID：14476897
> 
> 赞同：0
> 
> 时间：2013-01-23T10:01:02.903
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我以二进制格式在 sql server 数据库中存储了一些图像，然后将它们检索回来并能够显示为图像，但我的要求是我应该将所有图像显示为数据库中的图库，但我只能将第一张图像显示为图库。 .

我的问题出在我的控制器代码中，就像在 forloop 中一样，它为第一个循环本身返回文件并显示视图

控制器

```
public ActionResult DislpayAllImage()
{
    DataSet dsa = new DataSet();
    dsa = objImage.getAllImages();
    DataTable dt = new DataTable();
    dt = dsa.Tables[0];
    if (dt != null)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            Byte[] image = (Byte[])dt.Rows[i]["UsImage"];
            return File(image, "image/jpg");
        }
    }

    return View();
} 
```

看法

```
@foreach( var image in ViewData.Images )
{
    <img src="@Url.Action("DislpayAllImage", "Home",new { id = image.ImageID })" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:29:01.287

MVC 控制器只能返回一次！尝试一下：

```
ViewData.Images = new List<byte[]>();
for (int i = 0; i < dt.Rows.Count; i++)
{
   dt.Rows.Add((Byte[])dt.Rows[i]["UsImage"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:23:17.800

首先，你不能`return File(image, "image/jpg");`在你的 for 循环中做，因为它会返回你在解释中写的第一张图片。

因此，与其在 for 循环中返回，不如收集图像并返回列表？

```
List<File> fileList = new List<File>();
for (int i = 0; i < dt.Rows.Count; i++)
        {
            Byte[] image = (Byte[])dt.Rows[i]["UsImage"];
            fileList.Add(File(image, "image/jpg"));
        } 
```

然后将图像作为参数返回您的视图。

```
return View(fileList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:15:49.597

这只是一个概念，并不是整个代码都得到了正确的实现和测试。

```
[HttpGet]
public ActionResult Index()
{
   ViewData["count"]=..count the number of rows which have binary image data
} 
```

然后在您的视图中获取视图数据并循环

```
@for(int i=0;i<=ViewData["count"];i++)
{
   <img src="@Url.Action("DislpayAllImage", "Home",new { id = i})" />
} 
```

然后在你的控制器中

```
[HttpPost]
public ActionResult Index(int id)
{
        DataSet dsa = new DataSet();

        dsa = objImage.getUserImage(id);
        Byte[] imagedata = (Byte[])dsa.Tables[0].Columns["MyImage"];
        return File(imagedata, "image/jpg");

} 
```

希望能帮助到你

# javascript - 如何针对 JSP servlet 发出 AJAX 请求

> ID：14476898
> 
> 赞同：0
> 
> 时间：2013-01-23T10:01:03.490
> 
> 标签：javascript, jsp, jquery

我知道问题有点模棱两可，但我无法用更简单的语言来描述它。

**问题：**我想使用带有 jquery 的 ajax 从数据库中获取一大块数据。我知道如何从数据库中获取数据并将其作为响应发送，但问题是如何在“ajax with jquery”中形成请求并获得响应。

之后，我需要在一个函数（Javascript）中传递“我们从客户端数据库中获得的内容”，该函数可以根据响应执行某些操作。

我将使用 jsp 页面发送请求。来自 ajax 的请求将转到 servlet，并且再次响应将来到同一个 jsp 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:08:01.037

客户端[ajax jquery](http://api.jquery.com/jQuery.ajax/)调用

```
 $.ajax({
      url: path/to/your/function,
      data: '',//data tobe  send to the server (optional)
      type:'post', //either post or get
      dataType: 'json', //get response as json fron server
      success:function(data){  //this function is called when the ajax function is successfully executed
            alert(data) ;  OR  console.log(data);
       }
  }); 
```

服务器端功能..

```
make query to your data base... return your response as json...

 echo json_encode($result);   //example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:06:18.640

your question is very hard to understand, let see

if you want consume a service to get data like database or other with jquery you can see this - [Consume Service Jquery AJAX](https://rvieiraweb.wordpress.com/2013/01/21/consuming-webservice-net-json-using-jquery/)

depending on the response you can do a condition to check if data is correct or not, or get the value fields or others, i dont know if this is what you need

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:31:24.433

你可以这样做

```
$.ajax({
      url: url,
      data: '',
      dataType: 'json/xml', 
      success:function(res){  
          console.log(res);
       }
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:12:27.710

Javascript代码是...

```
function ajaxProcessor(){
var XMLHttpRequestObject = false;
if (window.XMLHttpRequest) {
XMLHttpRequestObject = new XMLHttpRequest();
} else if (window.ActiveXObject) {
try {//FOR IE
    XMLHttpRequestObject = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e) {//FOR ALL OTHER BROWSERS
    try {
        XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e) {
        XMLHttpRequestObject = false;
    }
}
}
if (XMLHttpRequestObject) {

    XMLHttpRequestObject.open("POST", "YOUR URL OR ACTION FOR STRUTS USERS", true);

    XMLHttpRequestObject.setRequestHeader('Content-Type',
            'application/x-www-form-urlencoded');

}
XMLHttpRequestObject.onreadystatechange = function() {
    if (XMLHttpRequestObject.readyState == 4
            && XMLHttpRequestObject.status == 200) {

            y = XMLHttpRequestObject.responseText;

            //DO SOMETHING WITH RESPONSE HERE
        }

};
    //POSTING THE DATA 
XMLHttpRequestObject.send("VAR_NAME1=" + VALUE+ "&VAR_NAME2=" + VALUE);
} 
```

# javascript - Jquery：TableSorter-具有特定格式的日期不起作用

> ID：14476899
> 
> 赞同：4
> 
> 时间：2013-01-23T10:01:10.110
> 
> 标签：javascript, jquery, jquery-plugins, tablesorter

我正在使用[Tablesorter](http://tablesorter.com/docs/)插件对表格进行排序。第四列是具有格式的日期字段：

--> **2013 年 1 月 30 日**

--> **2013 年 2 月 1 日**

当我尝试对格式进行排序时，它会给出错误的排序。

我的视图页面：（日期栏之一）

```
<td onclick="viewTrainingeDetails(${privateTrainingInstance?.id})"><g:formatDate format="dd MMM yyyy" date="${privateTrainingInstance?.startDate}" /></td> 
```

**jQuery**

```
 $(function() {
         $("#myTable").tablesorter(); 
   }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T02:35:39.293

尝试添加这个自定义解析器（[演示](http://jsfiddle.net/Mottie/eY8uH/361/)）：

```
$.tablesorter.addParser({
    id: "date",
    is: function (s) {
        return false;
    },
    format: function (s, table) {
        return new Date(s).getTime() || '';
    },
    type: "numeric"
}); 
```

然后像这样初始化插件：

```
$('table').tablesorter({
    headers: {
            5: { sorter: 'date' }
        }
}); 
```

* * *

更新：为获得最佳效果，请确保您返回有效日期：

```
$.tablesorter.addParser({
    id: "date",
    is: function (s) {
        return false;
    },
    format: function (s, table) {
        var date = new Date(s);
        return date instanceof Date && isFinite(date) ? date.getTime() : '';
    },
    type: "numeric"
}); 
```

# maven - 为什么我的使用 Sonatype 的 java.net 快照没有出现

> ID：14476900
> 
> 赞同：0
> 
> 时间：2013-01-23T10:01:14.557
> 
> 标签：maven, sonatype

我的 JAUDIOTAGGER 项目托管在 java.net 上，可以按如下方式部署我的快照的新版本

mvn deploy -Dgpg.passphrase=password

一切似乎都有效，这是我得到的输出：

```
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4.jar
892K uploaded (jaudiotagger-2.0.4.jar)
[INFO] Retrieving previous metadata from jvnet-nexus-staging
[INFO] Uploading repository metadata for: 'artifact net.jthink:jaudiotagger'
[INFO] Uploading project information for jaudiotagger 2.0.4
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4-sources.jar
875K uploaded (jaudiotagger-2.0.4-sources.jar)
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4-javadoc.jar
2317K uploaded (jaudiotagger-2.0.4-javadoc.jar)
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4.jar.asc
499b uploaded (jaudiotagger-2.0.4.jar.asc)
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4.pom.asc
499b uploaded (jaudiotagger-2.0.4.pom.asc)
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4-sources.jar.asc
499b uploaded (jaudiotagger-2.0.4-sources.jar.asc)
Uploading: https://maven.java.net/service/local/staging/deploy/maven2//net/jthink/jaudiotagger/2.0.4/jaudiotagger-2.0.4-javadoc.jar.asc
499b uploaded (jaudiotagger-2.0.4-javadoc.jar.asc) 
```

但是，当我去：

[https://maven.java.net/content/repositories/snapshots/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/](https://maven.java.net/content/repositories/snapshots/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/)

没有变化

如果我去

[https://maven.java.net/content/groups/public/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/](https://maven.java.net/content/groups/public/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/)

然后这两个文件都会更新

*   maven-metadata.xml.md5

*   maven-metadata.xml.sha

但没有别的

我不清楚它应该在哪一个中，但它不应该在其中至少一个中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:57:44.423

您不是在部署 SNAPSHOT，而是在部署版本，这意味着您的工件将被上传到暂存存储库中。这由上传 url 指示：

[https://maven.java.net/service/local/staging/deploy/maven2/ne](https://maven.java.net/service/local/staging/deploy/maven2/ne) ...

此外，我假设您必须确认暂存存储库中的工件，然后工件将同步到发布存储库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:24:48.037

得到它的工作。

我登录到[https://maven.java.net/index.html#welcome](https://maven.java.net/index.html#welcome)并删除了各种暂存存储库。然后我编辑了我的pom，所以那个版本说

```
 <version>2.0.4-SNAPSHOT</version> 
```

而不是

```
 <version>2.0.4</version> 
```

并重新运行

```
mvn deploy -Dgpg.passphrase=xxxx 
```

现在它可以在

[https://maven.java.net/content/repositories/snapshots/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/](https://maven.java.net/content/repositories/snapshots/net/jthink/jaudiotagger/2.0.4-SNAPSHOT/)

所以现在我要尝试做一个正确的发布，我假设我将版本设置回

```
<version>2.0.4</version> 
```

但我在文档中找不到任何告诉我应该这样做的内容。

# java - WebLogic 上的多个 java 版本

> ID：14476902
> 
> 赞同：0
> 
> 时间：2013-01-23T10:01:18.713
> 
> 标签：java, weblogic

是否可以在 WebLogic 10.3.6 和/或 12c 上运行多个 Java 版本？我们有使用不同版本 Java 的应用程序。例如，是否可以同时为不同的应用程序使用 JRE6 和 JRE7？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:38:52.837

上面的答案很好地说明了您不需要为 Java6 或 Java7 运行不同的 JVM。

如果有一些不适用的正当理由，WebLogic 控制台允许您为每个服务器指定不同的 JVM 设置。

去：

```
 Environment -> Servers -> [Server Name] -> Configuration -> Server Start 
```

并指定 Java Home、Classpath、Arguments 等。

我从来没有在同一台机器上用不同的版本测试过这个，所以请在投入到你的业务之前进行测试:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:30:47.293

我建议**使用最高要求的 Java 版本**（当前情况下为 JVM7）。有向后兼容性，我很难想象 Java6 应用程序不会在 Java7 上运行。

此外，它还降低了运营成本（更容易设置、维护、更新补丁等）——您不必担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:09:09.030

除非您同时运行不同的 Weblogic 实例，否则我看不出这怎么可能。一个 JVM 实例（运行一个 Weblogic 实例）运行一个且只有一个版本的 Java。

但是，我希望您会发现为 Java 6 实现的应用程序可以使用 Java 7 JRE 运行良好。

# .net - 区分基于非泛型值类型的泛型类型和 .NET < 4.5 中的其他泛型类型

> ID：14476904
> 
> 赞同：0
> 
> 时间：2013-01-23T10:01:20.823
> 
> 标签：.net, .net-4.0

对于使用反射创建控件的脚本，我需要区分

1.  标准值类型，如`Int32`
2.  基于上述类型的通用可空类型，例如`Int32?`
3.  其他通用类型，如`List<string>`

在 .NET 4.5 中，我可以使用

```
myType.IsConstructedGenericType 
```

结合

```
myType.IsValueType 
```

并得到

1.  假/真
2.  真/真
3.  真假

但是，*IsConstructedGenericType*在早期的 .NET 版本中不可用。如何在 .NET 4.0 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:04:50.327

你可以用`.IsGenericType && !.ContainsGenericParameters`那个代替。

问题是这不会检测任何泛型类型参数本身是否是开放泛型类型（例如 in `typeof(List<List<>>)`），因此您需要使用[`GetGenericArguments`](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx).

此示例代码应该可以工作，尽管我没有对其进行测试并且不做任何保证：

```
public static class TypeExtensions {
    public static bool IsConstructedGenericType(this Type t)
    {
        if (!t.IsGenericType || t.ContainsGenericParameters)
        {
             return false;
        }

        if (!t.GetGenericArguments().All(
             a => !a.IsGenericType || a.IsConstructedGenericType()))
        {
            return false;
        }

        return true;
    }
} 
```

的文档[`IsGenericType`](http://msdn.microsoft.com/en-us/library/system.type.isgenerictype.aspx)提供了有关此问题的非常有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:06:04.783

`IsGenericType` will do what you want for the examples you've given:

```
using System;
using System.Collections.Generic;
using System.Reflection;

public class Test
{
    static void Main()
    {
        ShowType(typeof(int));
        ShowType(typeof(int?));
        ShowType(typeof(List<string>));
    }

    static void ShowType(Type type)
    {
        Console.WriteLine("{0} / {1}", type.IsGenericType, type.IsValueType);
    }
} 
```

The difference is that using [`IsConstructedGenericType`](http://msdn.microsoft.com/en-us/library/system.type.isconstructedgenerictype.aspx) would return false for `typeof(List<>)` whereas [`IsGenericType`](http://msdn.microsoft.com/en-us/library/system.type.isgenerictype.aspx) will return true. You can use [`Type.ContainsGenericParameters`](http://msdn.microsoft.com/en-us/library/system.type.containsgenericparameters.aspx) to distinguish between them in .NET 2+... although even that's not *quite* enough, in pathological cases:

```
class Foo<T> : Dictionary<T, string> {} 
```

Consider `typeof(Foo<>).BaseType`:

*   `IsConstructedGenericType`: True (it contains one assigned type parameter)
*   `IsGenericType`: True
*   `ContainsGenericParameters`: True (it still contains one unassigned type parameter)

Hopefully this won't be an issue for you.

# mysql - sql 双内连接：使用 group_concat 给出空结果集

> ID：14476906
> 
> 赞同：2
> 
> 时间：2013-01-23T10:01:24.833
> 
> 标签：mysql, yii

我有一个`education`包含人员 ID 和教育级别 ID 的表，这两个都是外键。我想对结果进行分组，所以每个人的记录都是单数的，包含所有教育水平的列表，所以它返回**Jane Doe: master, master**

```
select 
  concat(person.name_first," ",person.name_last) as name,
  group_concat(person_studylevel.description)
from `person_education`
left join person_studylevel on level = person_studylevel.id
left join person on junior = person.id 
```

这一直有效，直到我添加了 group_concat()，然后它返回一个空的结果集

我尝试将结果用作子查询，但效果不佳

表结构：

```
person_education: id(int10), junior(int10), level(int10)
person_studylevel: id(int10), description(varchar100)
person: id(int10), name_first(varchar255), name_last(varchar255) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:00:28.917

请检查一下，如果您想按每个人分组，请将该表作为左侧的第一个：

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/7e0e5/3)

询问：

```
select 
  concat(p.name_first," ",p.name_last) as name,
  group_concat(ps.description)
from person p 
left join person_education pe
on p.id = pe.junior
left join person_studylevel ps
on pe.level = ps.id
group by p.id
;

| NAME | GROUP_CONCAT(PS.DESCRIPTION) |
---------------------------------------
|  j k |               degree,masters |
|  a g |               diploma,degree |
|  b h |                         cert |
|  c i |                       (null) |
|  d m |                       (null) | 
```

# c# - c#设置和部署项目

> ID：14476910
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:01:41.527
> 
> 标签：c#, windows-installer, setup-project

我添加了一个`app.config`文件，其中提到了主机地址和端口。当应用程序启动时，主机地址和端口正在从配置文件中读取并使用开源 telnet 库检查服务器的存在。

```
<configuration>
  <configSections>
    <section name="SitesInfo" type="test"/>
  </configSections>
  <appSettings>
    <add key="ServerPort" value="123" />
    <add key="host" value="1.2.3.4"/>
  </appSettings>

</configuration> 
```

现在我的要求是，我必须为此项目创建一个安装文件，并且在安装 .msi 文件时，应显示一个带有测试按钮的自定义窗口，其中必须从 app.config 读取主机和端口并检查是否存在的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:06:48.793

为您提供一个简单的解决方案是一项艰巨的工作。但是，这可能会帮助您走向正确的方向。

* * *

使用您需要的功能创建一个简单的本机 DLL。将此 DLL 嵌入到您的 MSI 二进制文件中。请注意，您不需要将此文件实际安装到目标系统。

在某些安装脚本中插入[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066%28v=vs.85%29.aspx)，这将调用 DLL 上的方法。我建议使用`InstallUISequence`脚本，因为您不希望在使用管理安装时触发此逻辑。在实际安装开始之前将其放置在某处。

您甚至可以创建带有标签、文本框等的自定义窗口，并将这些变量用作 DLL 的参数。这样一来，最终用户就会觉得它是“原生的”。

[CodePlex](http://www.codeproject.com/Articles/1747/MSI-Custom-Action-DLL)上的这篇文章是关于如何实现这一点的非常好的教程。

# java - 来自 Ajax 的 jzebra.appendHTML

> ID：14476915
> 
> 赞同：1
> 
> 时间：2013-01-23T10:01:56.693
> 
> 标签：java, jquery, model-view-controller, applet

我使用 Java 小程序 jzebra。当我从 ajax 获取 html 代码并尝试打印时，我得到了源 html，但没有格式化 html。我尝试替换不需要的符号

```
.replace(/(\r\n|\r|\n)/g, "\n"); 
```

但不帮我

这是我的代码

```
$(".bg-color-blueDark").click(function () {
        $.ajax({
            url: $(this).parent().attr("href"),
            success: function (result) {
                d.dialog();
                document.jzebra.findPrinter();
                var test = result.replace(/(\r\n|\r|\n)/g, "\n");
                //document.jzebra.appendHTML("<html><head><meta charset=\"windows-1251\" /><title>Receipt</title><style type=\"text/css\">body{font-family: verdana,arial,sans-serif;}td{border-bottom:solid 1px #000;}.style1{width: 87px;height: 91px;}</style></head><body><table style=\"width: 300px;\"><tr style=\"display:none\"><td style=\"width:70%\"></td><td style=\"width:30%\"></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><img class=\"style1\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAABbCAYAAAAGChkXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAACxElEQVR4Xu3dTU7DMBAF4AYBFULAiiUX4hacgLNwBC7BgbgBCyT6IwpetCoQWns8bzzjvKzjif35dZIgtQyb72OxWs+W68/Z1cX5jIeewPCxXG3mZ6d6FVlpJzCk5NIDI3CCKcuqSYC4wBwQl7hAAWBpJheIG+JpYbh/+kOweXkEsuiUdo07hvp72Z6R3baFHNgEnXueThbLqrjELQUrPb+MSH62S1z5cnyNJC5wP9zhSj/i0nFAW77+Tga3Nn2147WhXTznIlA8PP8277kIWC/Pv82Si0Id+2i3SnGT5FrCtkyxOa417DbJLa5rittigfttwvr6ZrjWC/vvscpyHia4lgvKeVa1mg8c12ohOajWLQKOW7rons6H4npNrdUTBBS3pxRK1gLD9Z5ai/TCcCU73dsYCG6U1KLTC8HtLYHS9RBXKpcxjrgZSNJTiCuVyxinjhvtZoa8qanjZmzoZE4hLnCriUtcoACwtGpyo97MUDc1VVxgCEKWJi5w24gbATd6v0X0XSY3QnKBcwxbWiW5vbQE7dagghs2WuCJV+P2llrN9Fbjgjc/dPkq3F5Tq5XeKtzQsTKYvBi399RqpFeMa7Dx4S8hwp1KamvTW4w7Ndga4GLc8J9VwwUU4U41tdL0ZuNOHVYCnIVL2J+9JNfjKG4qdHM5N+xUMS6VA3zwu785BWJQ4GZ56HvFR5OLm1b/lYkL3GPiEhcoACzN5BIXKAAszeQCcZv9xg1wTW5KM7nArSAuENdFW0C8Zrf6uav9vWJygcklLnGBAsDSLpKb+qPW34xTHQ/9Nu2ZC9w0kbf3hUqGtOpoTMYNrlbatOp0hZsW8/r8ULWm2vFVFx8Z7Ca5aW53t9di4ASbxns6XLxEjIGUvFh4agX7a3GLu53kIWSvqLu5898k4hqJq56LW2abysQFuhOXuEABYGkmF4j7BclYl5+Hc7DAAAAAAElFTkSuQmCC\" alt=\"\" /></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><p style=\"font-size:14px; padding:2px 2px 2px 2px;\">Система управления очередью решила одну из важнейших проблем современного мира, в котором нужно успеть сделать тысячи дел и не терять попусту свое время</p></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><p style=\"font-size:30px; font-weight:bold; padding:7px 2px 7px 2px;\">QLogic</p></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><p style=\"font-size:17px; font-weight:bold; font-style:italic; padding:5px 0px 5px 0px;\">Система управления очередью</p></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><p style=\"font-size:65px; font-weight:bold\">A-1234</p></td></tr><tr><td colspan=\"2\" style=\"text-align:center\" ><p style=\"font-size:22px; font-weight:bold;  font-style:italic; padding:2px 2px 2px 2px;\">VIP - клиент</p></td></tr><tr><td colspan=\"2\"><ul style=\"font-size:12px; padding:8px 5px 0px 25px\"><li style=\"padding:2px 2px 2px 0px\">Предоставляемая услуга номер 1 Предоставляемая  Предоставляемая </li><li style=\"padding:2px 2px 2px 0px\">Предоставляемая услуга номер 2</li><li style=\"padding:2px 2px 2px 0px\">Предоставляемая услуга номер 3</li><li style=\"padding:2px 2px 2px 0px\">Предоставляемая услуга номер 4</li></ul></td></tr><tr><td><p style=\"font-size:13px; padding:2px 2px 2px 2px;\">Время регистрации:</p></td><td><p style=\"font-size:13px; font-weight:bold; padding:2px 2px 2px 2px; text-align:center;\">14:45:06</p></td></tr><tr><td><p style=\"font-size:13px; padding:2px 2px 2px 2px;\">Оператор:</p></td><td><p style=\"font-size:13px; font-weight:bold; padding:2px 2px 2px 2px; text-align:center;\">1, 2, 3</p></td></tr><tr><td><p style=\"font-size:13px; padding:2px 2px 2px 2px;\">Этаж:</p></td><td><p style=\"font-size:13px; font-weight:bold; padding:2px 2px 2px 2px; text-align:center;\">2</p></td></tr><tr><td><p style=\"font-size:13px; padding:2px 2px 2px 2px;\">Людей в очереди:</p></td><td><p style=\"font-size:13px; font-weight:bold; padding:2px 2px 2px 2px; text-align:center;\">21</p></td></tr><tr><td><p style=\"font-size:13px; padding:2px 2px 2px 2px;\">Время ожидания:</p></td><td><p style=\"font-size:13px; font-weight:bold; padding:2px 2px 2px 2px; text-align:center;\">14 мин</p></td></tr></table></body></html>");
                document.jzebra.appendHTML(test);
                document.jzebra.printHTML();
                monitorPrinting();
            }
        });
        return false;

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:58:48.177

我发现问题。如果返回值以空格开头，我们就会遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T02:34:10.107

您可以尝试替换您的代码：

```
var data = data.split(yourText).join(yourReplaceText); 
```

对于ajax代码，您可以尝试这样：

// 直接打印到打印机

```
 var applet = document.jzebra;
    applet.findPrinter();
    applet.append(String.fromCharCode(15)); //condensed font

    Ext.Ajax.request({
        url: Rich.config.yourPathReport + yourUrlReport
        success: function (response) {

            var data = response.responseText;
            var title = "YOUR TEXT";

            var data = data.split(title).join(title2);

            applet.append(data);
            console.info(data);
            applet.print();

        },

        failure: function (response, options) {
            Ext.Msg.alert('Status', 'Failed Print, ' + response.getResponseHeader("Error Msg"));
        }
    }); 
```

# visual-studio-2010 - 通过编程方式在 Silverlight 中编辑服务引用客户端配置文件

> ID：14476918
> 
> 赞同：0
> 
> 时间：2013-01-23T10:02:04.630
> 
> 标签：visual-studio-2010, silverlight, configuration, xap

我正在silverlight中创建一个应用程序。该应用程序的XAP文件夹包含ServiceReferencesClientConfig文件。我已经将该应用程序部署在网络服务器上，每当我从其他机器访问该网站时`(http://192.168.1.15/SampleApplication/Login.aspx)`，我想将该IP地址（192.168.1.15）写入ServiceReferencesClientConfig 之后应该将 Xap 文件下载到客户端。但我不知道以编程方式编辑 ServiceReferencesClientConfig 文件。（我想在更改部署应用程序的网络服务器的 IP 地址时进行更改，它应该自动更改 ServiceReferencesClientConfig，因此无需手动更改 ServiceReferencesClientConfig 文件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:28:43.833

作为一个选项，您可以动态配置服务代理，更改默认构造函数以使用动态生成的端点和绑定，或使用工厂来执行相同操作：

```
public MyService()
        : base(ServiceEx.GetBasicHttpBinding(), ServiceEx.GetEndpointAddress<T>())
{
}

public static class ServiceEx
{
    private static string hostBase;
    public static string HostBase
    {
        get
        {
            if (hostBase == null)
            {
                hostBase = System.Windows.Application.Current.Host.Source.AbsoluteUri;
                hostBase = hostBase.Substring(0, hostBase.IndexOf("ClientBin"));
                hostBase += "Services/";
            }
            return hostBase;
        }
    }

    public static EndpointAddress GetEndpointAddress<TServiceContractType>()
    {
        var contractType = typeof(TServiceContractType);

        string serviceName = contractType.Name;

        // Remove the 'I' from interface names
        if (contractType.IsInterface && serviceName.FirstOrDefault() == 'I')
            serviceName = serviceName.Substring(1);

        serviceName += ".svc";

        return new EndpointAddress(HostBase + serviceName);
    }

    public static Binding GetBinaryEncodedHttpBinding()
    {
        // Binary encoded binding
        var binding = new CustomBinding(
           new BinaryMessageEncodingBindingElement(),
           new HttpTransportBindingElement()
           {
               MaxReceivedMessageSize = int.MaxValue,
               MaxBufferSize = int.MaxValue
           }
        );

        SetTimeouts(binding);

        return binding;
    }

    public static Binding GetBasicHttpBinding()
    {
        var binding = new BasicHttpBinding();
        binding.MaxBufferSize = int.MaxValue;
        binding.MaxReceivedMessageSize = int.MaxValue;

        SetTimeouts(binding);

        return binding;
    }
} 
```

# wordpress - 为了减少网站的加载时间 - 动态生成图像缩略图与在图像上传时生成

> ID：14476922
> 
> 赞同：0
> 
> 时间：2013-01-23T10:02:14.743
> 
> 标签：wordpress, thumbnails, cdn, amazon-cloudfront, timthumb

我一直在使用 timthumb 为我的 WordPress 网站动态生成图像缩略图。我的网站中有 1 个非常大，并且包含很多图像。我注意到 timthumb 需要花费相当多的时间来完成它的工作，而且我的网站现在非常慢。

为了减少我网站的加载时间，我是否应该在每次生成图像时生成图像缩略图并将其存储在我的服务器中（存储对我来说不是问题）？或者是否仍然可以在保持网站加载时间最短的同时即时生成缩略图？

顺便说一句，我正在实施 Amazon CloudFront 来为我的网站提供图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:10:41.760

大多数网站在投入生产时都有许多设置的图像尺寸。

如果您发现自己处于这种情况（即您有两个或三个主要图像大小），那么在它们第一次调整大小后将它们存储在服务器上是有意义的。

感谢您担心空间，但您几乎可以肯定是在缩小而不是放大 - 这意味着任何大小的图像缓存都将始终小于您的高分辨率母版。

至于为什么要使用存储路由，请考虑您要求 Web 服务器对每个请求执行的工作。每个调整大小的图像都是一个光栅，需要加载、调整大小，然后作为适当的内容类型流出。用一两张图片就可以了，但在画廊页面之类的东西上，你总是会遇到性能问题。

将其与预缓存缩略图中涉及的工作进行比较。第一次出去，你会遇到这个问题。每个后续请求都只是“查找文件并提供服务”的情况。

如果可以的话，请接受存储空间。如果每次结果都完全相同，为什么还要制作一张图片来订购一百万次？

# ruby-on-rails - Devise / Rolify / CanCan 2.0：防止用户更改用户角色

> ID：14476926
> 
> 赞同：4
> 
> 时间：2013-01-23T10:02:26.817
> 
> 标签：ruby-on-rails, devise, cancan, rolify

我使用 Devise 进行身份验证，使用 Rolify 进行角色管理，使用 CanCan 2.0 进行授权。

我试图允许 :admin 角色更改用户的角色，但不允许所有其他用户访问。

这是我尝试过但不起作用的方法：

```
#ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    if user.has_role? :admin
      can :access, :all
    elsif user.has_role? :moderator
      can [:index, :read, :update, :destroy], :users, :user_id => user.id
      cannot :access, :users, [:role_ids]
    end
end

#application_controller.rb
...
rescue_from CanCan::Unauthorized do |exception|
    redirect_to root_url, :alert => exception.message
  end 
```

我故意在我的用户表单中留下了关联：

```
#_form.html.erb
<%= simple_form_for @user do |f| %>
  <%= f.association :roles, as: :check_boxes %>
  <%#= f.association :roles, as: :check_boxes if can? :update, @user, :roles %>
  <%= f.button :submit %>
<% end %> 
```

控制器

```
#users_controller.rb
class UsersController < ApplicationController

  before_filter :authenticate_user!
  load_and_authorize_resource

  def index
    @users = User.accessible_by(current_ability)
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
  end

  def show
    @user = User.find(params[:id])
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])

    @user.update_without_password(params[:user])

    if successfully_updated
      redirect_to @user
    else
      render :action => "edit"
    end
  end
end 
```

和模型：

```
#user.rb
    class User < ActiveRecord::Base
      rolify

      attr_accessible :role_ids
    ... 
```

现在，如果具有 :moderator 角色的用户尝试更改其他用户（或他自己）的角色，则会发生以下情况：

1.  抛出 CanCan::Unauthorized 异常并将用户重定向到 root_url
2.  为用户更改角色

我很困惑。如果发生异常，为什么还要进行更改？我可能做错了什么:)

我已经尝试根据 users_controller.rb 中的用户角色操作查询参数如果我在 def 更新后立即放置日志语句，这是我的输出：

```
2013-04-24 12:42:21 [4161] DEBUG    (0.1ms)  BEGIN
2013-04-24 12:42:21 [4161] DEBUG    (0.3ms)  INSERT INTO "users_roles" ("user_id", "role_id") VALUES (5, 1)
2013-04-24 12:42:21 [4161] DEBUG    (0.4ms)  COMMIT
2013-04-24 12:42:21 [4161] DEBUG   User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "5"]]
2013-04-24 12:42:21 [4161] DEBUG {"username"=>"Blabla", "email"=>"bla@bla.com", "password"=>"", "password_confirmation"=>"", "approved"=>"1", "role_ids"=>["1", "2", ""]} 
```

我一定是忽略了什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:25:23.533

首先，您可能想清理自己的能力，因为目前情况似乎有些混乱。忽略其他所有内容，为清楚起见，指定用于修改密码的自定义操作可能是个好主意。例如：

```
# ability.rb

def initialize(user)
  ...

  cannot :manage_roles, :user
  if user.has_role? :admin
    can :manage_roles, :user
  else
end 
```

（您究竟想通过其余规则实现什么？目前，如果您似乎只让版主自己阅读、编辑和删除自己，这是您的意图吗？）

您可能希望隐藏或禁用表单的角色部分，以供实际上无法对其进行任何操作的任何人使用：

```
#_form.html.erb
<%= simple_form_for @user do |f| %>
  <%= f.association :roles, as: :check_boxes if can? :manage_roles, @user %>
  <%= f.button :submit %>
<% end %> 
```

（请注意，`can?`这只需要两个参数，即操作和对象/类。）

如果您想更加安全，您还可以在控制器中使用以下检查：

```
# users_controller.rb
def update
  @user = User.find(params[:id])

  user_params = params[:user]
  if cannot? :manage_roles, @user
    user_params.delete_if { |k, v| k.to_sym == :role_ids }
  end

  if @user.update_without_password(user_params)
    redirect_to @user
  else
    render :action => "edit"
  end
end 
```

（您需要仔细检查要从 params 哈希中删除的正确键是什么，我假设它`:role_ids`基于您的`attr_accessible`，但我不太了解 simple_form 。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:01:56.557

I am not sure if I understood what you want the moderators to do but here is a basic configuration I use. I adapted it to your scenario as far as I could. If moderators do not need individual rights simple remove the inner clause.

```
class Ability
  include CanCan::Ability

  def initialize(user)
    # Create guest user aka. anonymous (not logged-in) when user is nil.
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    elsif user.has_role? :moderator
      can :manage, User, user_id: user.id
      can :create, User
      can :read, :all
    else
       # Guest user aka. anonymous
      can :read, :all
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T09:35:43.577

我最终使用了 before_filter，如下所示：

```
before_filter :prevent_unauthorized_role_setting, :only => [ :create, :update ]

def prevent_unauthorized_role_setting
  if cannot? :manage_roles, current_user
    params[:user].delete_if { |k, v| k.to_sym == :role_ids }
  end
end 
```

同时遵循 Zaid 在ability.rb 中的建议：

```
cannot :manage_roles, :users
if user.has_role? :admin
  can :manage_roles, :users
end 
```

此外，我自己放弃了 Rolify 并管理角色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T22:38:15.137

`users/_form.html.erb`在你的文件中用这个包装角色：

用简单的形式：

```
<% if can? :manage, User %>
  <%= f.association :roles, as: :check_boxes %>
<% end %> 
```

没有简单的形式：

```
<% if can? :manage, User %>
    <div class="control-group">
      <%= f.label :roles, class: "control-label" %>
      <div class="controls">
        <% Role.all.each do |role| %>
            <%= check_box_tag "user[role_ids][]", role.id, @user.role_ids.include?(role.id) %>
            <%= role.name %><br />
        <% end %>
      </div>
    </div>
<% end %> 
```

# java - 在android中将GLSurfaceView设置为动态壁纸

> ID：14476928
> 
> 赞同：1
> 
> 时间：2013-01-23T10:02:30.823
> 
> 标签：java, android, android-layout, live-wallpaper, shiva3d

我是`Java/Android/Shiva3D/Unity3D`开发者。

但我从来没有创建过安卓动态壁纸..所以我需要一些帮助..

我想用 Shiva 3D 创建 3D 动态壁纸。从 Shiva3D 将项目导出为 android 项目后..我正在获取项目，

其中包含 3 个类。一是 **GLSurface View** .. 第二类是实现它的相对布局。现在我想在动态壁纸中使用它。我该怎么做？我正在尝试将**GLSurfaceView**添加到相对布局..但我无法将相对布局设置为动态壁纸..

那么有人可以帮我将**GLSurfaceView**设置为动态壁纸吗？

# visual-studio-2010 - TFS - 为不同的 Visual Studio 版本设置团队项目集合

> ID：14476934
> 
> 赞同：2
> 
> 时间：2013-01-23T10:02:53.670
> 
> 标签：visual-studio-2010, tfs, visual-studio-2012, source-control-explorer

将源代码控制的 Visual Studio 项目从 Visual SourseSafe 迁移到 TFS 2012 时，当您有在多个版本的 Visual Studio 中构建的项目时，是否有关于设置团队项目集合的建议？

我们有一些旧项目，我们维护它们是在 VS2005 和 VS2008 中构建的，新的工作在 VS2010 中完成，最近在 VS2012 中完成。

一个建议是为每个版本的 Visual Studio 设置多个团队项目集合。所以 VS2005、VS2008、VS2010 和 VS2012 项目的单独集合。如果我们想要移动或迁移项目，我可以看到导致问题。

另一种选择是在一个集合下具有良好的树结构，而不管 Visual Studio 版本如何。

我可以看到拥有多个集合的好处，但只有当它们中的项目明显分开时，但当某些项目松散相关时，我看不到按 VS 版本拆分集合的任何好处。

任何建议或指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:34:51.197

TFS 中最外层的边界是[Team Project Collection](http://msdn.microsoft.com/en-gb/library/vstudio/dd236915.aspx)。您不能在团队项目集合之间共享代码/分支。但是，您可以在一个集合中的团队项目之间共享代码。根据经验，我建议您为每个产品创建一个团队项目，它可以容纳每个产品的所有不同版本。

为每个版本的主干/根目录拥有单独的文件夹将是一个好的开始，并为您提供正确的隔离以实现每个版本的分支策略。

只是要指出 - 您不必将解决方案迁移到 Visual Studio 2012 即可使用 TFS 2012。VS [2010 有一个更新，使其能够与 TFS 2012](http://www.microsoft.com/en-us/download/details.aspx?id=29082)和[一个 VS 2008](http://www.microsoft.com/en-gb/download/details.aspx?id=29983)一起使用。 [提到了对 VS 2005 的支持](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/86d08abb-3ac4-4680-a004-af01e51b997b/)，并且[有一个解决方法](http://visualstudiogallery.msdn.microsoft.com/b5b5053e-af34-4fa3-9098-aaa3f3f007cd)。

# javascript - 用于图像的 Retina 显示屏

> ID：14476936
> 
> 赞同：0
> 
> 时间：2013-01-23T10:03:01.043
> 
> 标签：javascript, jquery, media-queries, retina-display

> **可能重复：**
> [使用纯 css 显示视网膜显示图像](https://stackoverflow.com/questions/10958308/showing-retina-display-image-with-pure-css)

我一直在阅读有关视网膜显示媒体查询的内容，以为拥有视网膜显示的人提供更高质量的图像。我的问题是我是否在我的资产中保存了两次相同的图像（一个医学质量和另一个高质量）例如，然后根据设备是否支持视网膜来提供一个或另一个

或者我是否有一张图像，然后使用媒体查询以最高质量在支持视网膜的设备上提供图像。

我的第二个问题是，如果用户拥有启用视网膜的设备，我将如何告诉浏览器以最高质量提供所有图像

如果这是一个基本问题，我们将不胜感激任何建议并道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:13:20.790

IMO，您必须根据设备分辨率提供不同的图像 - 主要原因是小型设备*可能*具有较低的带宽连接和较少的资源（考虑本地缓存）等 - 因此较低分辨率的图像（具有较小的尺寸）将是更好的选择。

无论您是创建静态资产还是使用某些工具/处理程序来动态创建它们是一个不同的问题。例如，[自适应图像](http://adaptive-images.com/)是基于 PHP 的解决方案，采用后一种方法。

**编辑**
关于您的第二个问题，如果您正在使用媒体查询，那么浏览器每次都会做出该决定 - IMO，除了说使用媒体查询来应用用于该设备的整个 css 文件之外，不会有任何解决方案。但我认为从性能角度来看不会有任何显着差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:20:15.550

您是否尝试过在网上搜索一些解决方案？你试过什么吗？

例如，您尝试过[Retina.js](http://retinajs.com/)吗？

所谓的“视网膜”显示器的问题在于设备浏览器对您的分辨率撒谎，并缩放您网站上的每个图像和每个其他维度。如果这些只是高分辨率的显示器，没有任何谎言，那么就不会有这样的问题，[标准的响应式设计技术](http://www.html5rocks.com/en/mobile/responsivedesign/)和[响应式 IMG 技巧](http://blog.cloudfour.com/responsive-imgs-part-2/)就可以正常工作。

不幸的是，事实并非如此，现在您的设计必须处理：

1.  宽度（屏幕的宽度是多少）
2.  设备宽度（什么是*真正*的屏幕宽度）
3.  设备宽度乘以“视网膜”缩放因子（*真正* 的屏幕宽度**）**

# php - PHP模板函数不返回数据

> ID：14476938
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:03:17.020
> 
> 标签：php, function

我制作了一个由**controllers/pages.php**和**views/pages.php**组成的基本 PHP 模板系统。**视图**使用**控制器**用应该来自**控制器**的数据填充 HTML ，但是一些数据没有从**控制器**传递到**视图**我用这样的注释标记了下面的代码“ **# ==> NOT WORKING** ”这样的任何东西评论不返回任何数据来**查看**任何可能为什么的建议？

```
<?php

# THIS IS CONTROLLERS/PAGES.PHP

class Page {
    private $title, $stylesheets=array(), $javascripts=array(), $body;

    # ==> NOT WORKING
    function Site() {
        $site = "http://dev.site.tld/";
        return $site;
    }

    function Page() {
        $this->addCSS('css/main.css');
        $this->addCSS('css/font-awesome.css');
        $this->addJavascript('js/jquery.js');
        $this->addJavascript('js/application-build102121.js');
    }

    function setTitle($title) {
        $this->title = $title;
    }

    # ==> NOT WORKING
    function setCopyright() {
         $copyright_year = date("Y");
         return $copyright_year;
    }

    # ==> NOT WORKING
    function setAppName() {
         $app_name = "Latte";
         return $app_name;
    }

    function addCSS($path) {
        $this->stylesheets[] = $path;
    }

    # ==> NOT WORKING
    function listCSS($path) {   
        $data = Site(); 
        foreach ($this->stylesheets as $stylesheet) {
             echo '<link href="' . $data . $stylesheet . '" rel="stylesheet" type="text/css" />' . "\n";
        }
        return $this;   
    }

    # ==> NOT WORKING
    function listJS($path) {
        $data = Site();
        foreach ($this->javascripts as $javascript) {
             echo '<script src="' . $data . $javascript . '" type="text/javascript" defer="defer"></script>' . "\n";
         }  
        return $this;
    }

    function addJavascript($path) {
        $this->javascripts[] = $path;
    }

    function startBody() {
        ob_start();
    }

    function endBody() {
        $this->body = ob_get_clean();
    }

    function render($path) {
        ob_start();
        include($path);
        return ob_get_clean();
    }
} 
```

Error_Reporting 返回

```
Notice: Undefined property: Page::$listCSS in /home/adminis1/public_html/dev/views/pages.php on line 15

Notice: Undefined property: Page::$listJS in /home/adminis1/public_html/dev/views/pages.php on line 17

Notice: Undefined property: Page::$setCopyright in /home/adminis1/public_html/dev/views/pages.php on line 25 
```

数据的方式叫做Index.php

```
<?php
require_once('controllers/pages.php');
$page = new Page;
$page->setTitle('Home');
$page->startBody();
?>

<img src="test-img.jpg" />

<?php
$page->endBody();
echo $page->render('views/pages.php'); 
```

VIEWS/PAGES.PHP

```
<?php error_reporting(E_ALL); ?>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title><?php echo $this-setAppName; ?> - <?php echo $this->title; ?></title>

    <!-- view port meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <?php echo $this->listCSS; ?>

    <?php echo $this->listJS; ?>

</head>
<body>

    <?php echo $this->body; ?>

    <footer>
        <p>Copyright &copy; <?php echo $this->setCopyright; ?> </p>
    </footer>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:25:01.867

您正在调用方法，就像它是属性一样。

改成等等`$this->setCopyright`。`$this->setCopyright()`

```
class Page {
    private $title;

    function setCopyright() {
        ...
    }
}

$page = new Page(); 
```

`$title`是一个属性，通过`$page->title`.
`setCopyright()`是一个函数，通过`$page->setCopyright()`（使用括号）访问它。

*顺便说一句，* `function __construct()` *在定义对象构造函数时使用，它比使用* `function Page()`*.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:06:11.443

You are returning `this` when you should be returning `$this`.

Switch on error reporting and you will see errors about trying to `return this`.

* * *

Secondly, if you want to *call* a *method*, *call* it:

```
$this->listCSS();
              ^^ 
```

I don't know what you expect that result to be, since `listCSS()` returns `$this` (the object you're calling the method of).

# c# - 通过名单 从 ActionResult 到局部视图

> ID：14476939
> 
> 赞同：1
> 
> 时间：2013-01-23T10:03:18.470
> 
> 标签：c#, asp.net-mvc

我有 a`ActionResults`并且我想将列表字符串传递给 a `partialview`，但我无法弄清楚如何去做。

希望比我更聪明的人:-)可以帮助我解决它。

```
namespace Web.UI.Controllers
public ActionResult Index()
{
    return View();
}

public async Task<ActionResult> Test()
{
    var currentConditions   = await Task.Run(()=> _IGWC.CurrentConditions("194.61.173.5").FirstOrDefault());
    var weatherAstronomy    = await Task.Run(()=> _IGWC.WeatherAstronomy("194.61.173.5").FirstOrDefault());
    var weatherConditions   = await Task.Run(()=> _IGWC.WeatherConditions("194.61.173.5").FirstOrDefault());
    var weatherLocation     = await Task.Run(()=> _IGWL.WeatherSearch("194.61.173.5").FirstOrDefault());

    string test      = currentConditions.feelsLikeC.ToString();
    string test1     = weatherAstronomy.sunRise.ToString();
    string test2     = weatherConditions.maxtempC.ToString();
    string test3     = weatherLocation.DisplayAreaName.ToString();

    List<string> weatherData = new List<string>();
    weatherData.Add(test);
    weatherData.Add(test1);
    weatherData.Add(test2);
    weatherData.Add(test3);

    return PartialView(weatherData);
} 
```

在包含部分视图的索引视图中，我拥有：

```
@{Html.Partial("Test","Home");} 
```

最后，在我的部分观点中，我尝试使用以下内容。

```
What goes here

@foreach (var item in Model)
{
@item.
} 
```

我如何从partialview获取值`weatherData`并传递给partialview，我发现它工作的唯一方法是使用tempdata，但我不想走那条路。

---------------------------代码更新---------- -

在索引视图中，我按要求放置了以下内容：

```
 @model System.Collections.Generic.List<string>

@{Html.Partial("Test", Model);} 
```

在部分视图中，我有以下内容：

```
@model System.Collections.Generic.IEnumerable<string>

<ul>
@foreach (var item in Model)
{
    <li>@item</li>
}
</ul> 
```

这现在会导致以下错误：

Message=对象引用未设置为对象的实例。由@foreach（模型中的变量项）引起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:06:46.890

Your not far away, you just need to tell the view what type of model to expect e.g.

```
@model System.Collections.Generic.List<string>

<ul>
@foreach (var item in Model)
{
    <li>@item</li>
}
</ul> 
```

**Update**

Looking at your code you seem to be getting confused between the difference of rendering a view and actually invoking a controller action. When you call `Html.RenderPartial` you are asking MVC to directly render that particular *view*, not invoke the action on the controller. `RenderPartial` expects the second parameter to be the model for that view (if it applicable) - your view is expecting a `List<string>` but your passing in "Home" which is a string which is why you are getting errors along the line of:

> The model item passed into the dictionary is of type 'System.String', but this dictionary requires a model item of type 'System.Collections.Generic.List`1[System.String]'

What you need to do is actually invoke the *action* and render the resultant view e.g.

```
@{ Html.RenderAction("Test", "Home"); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:15:43.237

在局部视图的顶部定义

```
@model System.Collections.Generic.List<string> 
```

在呈现部分视图的视图中添加

```
@{Html.Partial("Test", Model);} 
```

# asp.net - ASP.NET 开发服务器

> ID：14476942
> 
> 赞同：1
> 
> 时间：2013-01-23T10:03:22.887
> 
> 标签：asp.net, visual-studio-2010

我有一个包含多个项目的解决方案。一个是 asp.net 项目，设置为使用 asp.net 开发服务器。其他项目与 asp.net 无关：例如，有些是用非托管 c++ 编写的 windows 服务，有些是 c# 控制台应用程序。

我的问题是，如果我在调试器中启动任何非*asp.net 项目*，Visual Studio 仍然会启动 asp.net 开发服务器。当我使用多个 Visual Studio 实例调试程序交互时，这会导致问题。当我调试 Web 应用程序时，我*确实*希望 Web 服务器启动。

我注意到，当我调试非 asp.net 项目时，使用 asp.net 项目属性中指定的端口号和虚拟目录启动 asp.net 开发服务器。这些项目之间没有项目依赖关系。

有没有办法告诉 Visual Studio 只为实际指定应该使用它的项目启动开发服务器？

编辑 1：重现此行为：

1.  使用 vs2010，创建一个空的解决方案。
2.  添加一个接受所有默认值的 c++ 控制台应用程序。`fgetchar()`添加对生成的调用，`main()`以便它在运行时不会立即退出。
3.  在调试器中运行项目，注意到 asp.net 开发服务器*没有*启动。
4.  向解决方案添加一个 asp.net Web 应用程序项目，接受所有默认值。转到项目属性 web 选项卡并验证它是否已配置为使用 asp.net 开发服务器。
5.  将 c++ 控制台应用程序设置为启动项目，然后在调试器中启动 c++ 项目。请注意，asp.net 开发服务器现在启动，即使 Web 应用程序项目没有运行。

编辑 2：澄清我希望在调试 Web 项目时启动服务器，而不是在调试其他非 Web 项目时启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:25:47.680

我有一个适合我的解决方案。

似乎 web 项目有一个属性来控制在调试器启动时是否启动 asp.net 开发服务器，*即使 web 项目本身没有被调试*。

要更改此属性，请在解决方案资源管理器中选择 Web 项目，然后按 F4 访问属性网格。在网格中，标题 Development Server 下是一个名为 Always Start When Debugging 的布尔属性。默认值是true。

当我将此属性设置为 false 时，当我调试非 Web 应用程序项目时，asp.net 开发服务器不再启动。

属性是持久化的`<ProjName>.csproj.user`，不是`<ProjName>.csproj`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:32:46.843

在 Web 项目的属性中，在“Web”选项卡下，您可以将启动行为更改为“使用自定义 Web 服务器”。这将停止 VS 调用 IIS 或 ASP.NET 开发服务器实例。

# java - 在安卓应用中显示图片

> ID：14476946
> 
> 赞同：1
> 
> 时间：2013-01-23T10:03:31.060
> 
> 标签：java, android, eclipse, image

我编写了一个问答应用程序，其中包含一个问题和三个答案。

问题和答案保存在一个`Frage`对象中。例如：

```
Frage f6 = new Frage(7, "Welche Notrufnummer hat die Rettung in Österreich?", 
                     "166", "144", "110", "144", "bronze"); 
```

现在我想扩展我可以展示一张图片的整个事情，一个问题到这张图片和三个答案。实现它的最佳方法是什么？如何在我的应用程序中保存图片？

**编辑：**由于我正处于 Android 开发的初期，我不确定如何将图片和我的问题联系起来。最好的方法可能是用适当问题的 id 命名图片，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:06:33.487

You save your picture in your asset or drawable folder and show them via

Drawable:

```
ImageView iv = new ImageView(this); // (ImageView) findViewById(R.drawable.imageview);
iv.setImageResource( R.drawable.picture ); 
```

Assets:

```
try 
{
    // get input stream
    InputStream ims = getAssets().open("avatar.jpg");
    // load image as Drawable
    Drawable d = Drawable.createFromStream(ims, null);
    // set image to ImageView
    iv.setImageDrawable(d);
}
catch(IOException ex) 
{
    ex.printStackTrace();
} 
```

In your case maybe save the resource id in your "Frage" object and give it your imageviee.

```
Frage f6 = new Frage(7, "Welche Notrufnummer hat die Rettung in Österreich?", 
                     "166", "144", "110", "144", "bronze",R.drawable.austria_emergency_call); 
```

besten Gruß

# python - Python - Pygame 绘图角度

> ID：14476947
> 
> 赞同：0
> 
> 时间：2013-01-23T10:03:37.900
> 
> 标签：python, geometry, pygame

我需要画一个角度（在 Pygame 中），因为它是
1\. 角度的测量（θ）
2\. 底的端点（A 和 B）

![显示 A、B、C 和 θ 的图像](../Images/f65729fc5f53938ea0fd9f55864655dd.png)
**在这里我知道**
1\. θ 的测量（以弧度和度数为单位）
2\. A 和 B 的 (x,y)
3\. BC 的测量
**我的问题**
如何计算点的坐标 (x,y) 的位置C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:08:25.687

令 BC 为相应段的长度，theta 为以弧度为单位的角度。然后计算 BC 的斜率 alpha，然后计算 C 的坐标，如下所示：

```
alpha = atan2(A.y-B.y, A.x-B.x) - theta
C.x = B.x + BC * cos(alpha)
C.y = B.y + BC * sin(alpha) 
```

# android - android选项菜单不显示图标

> ID：14476952
> 
> 赞同：0
> 
> 时间：2013-01-23T10:03:47.360
> 
> 标签：android, android-optionsmenu

我有一个活动，我在其中展开折叠视图。我在小时候添加了列表视图，并且在单击标题时设置了列表视图的可见性。

Wgen 我隐藏列表视图我的选项菜单不显示一个图标。它显示了 tabhost 中添加的唯一图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:26:30.153

将其添加到您的 menu.xml：

```
android:showAsAction="ifRoom" 
```

或者如果您以编程方式添加元素：

```
@Override 
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater){
    menu.add("some menu").setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
} 
```

# macos - 未设置 NIB“使用自动布局”时，我可以使用 NSLayoutConstraint 吗？

> ID：14476953
> 
> 赞同：0
> 
> 时间：2013-01-23T10:03:51.947
> 
> 标签：macos, autolayout

我现有的 Mac 应用程序使用 Springs 和 Struts 并且运行良好，但我想在我的一个 NIB 内的单个视图中使用“自动布局”。我将以编程方式提供这些约束（因为使用 IB 配置约束是一场彻头彻尾的噩梦）。

我的问题是`NSLayoutConstraint`，当它包含在未选中“使用自动布局”的 NIB 中时，我可以在视图上设置对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:16:38.330

好的，所以这个问题的简短回答是“是”，`NSLayoutConstraint`即使 NIB 关闭了“使用自动布局”，您也可以使用 s。

这是我的观点的`awakeFromNib`方法：

```
- (void)awakeFromNib
{
    NSDictionary *viewsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                     _field1, @"field1",
                                     _field2, @"field2",
                                     _field3, @"field3",
                                     nil];

    // Turn off conversion of Springs and Struts into NSLayoutConstraints for all the controls
    for (NSControl *control in [viewsDictionary allValues])
    {
        [control setTranslatesAutoresizingMaskIntoConstraints:NO];
    }

    NSString *hformat = @"H:|-4-[field1(>=48)]-[field2]-[field3(==field1)]-4-|";
    NSArray *hconstraints = [NSLayoutConstraint constraintsWithVisualFormat:hformat
                                                                    options:0
                                                                    metrics:0
                                                                      views:viewsDictionary];

    [self addConstraints:hconstraints];

    // Vertical layout (must be done for each control separately)
    for (NSString *controlName in [viewsDictionary allKeys])
    {
        NSString *vformat = [NSString stringWithFormat:@"V:|-4-[%@]", controlName];
        NSArray *vconstraints = [NSLayoutConstraint constraintsWithVisualFormat:vformat
                                                                        options:0
                                                                        metrics:0
                                                                          views:viewsDictionary];

        [self addConstraints:vconstraints];
    }
}

    // Other init
} 
```

一些注意事项：

*   字段比上面显示的要多得多；我已经简化了在此处发布的代码。
*   有问题的视图位于拆分视图中，为了在调整超级视图大小时正确调整其大小，我**没有**调用`[self setTranslatesAutoresizingMaskIntoConstraints:NO];`
*   对于所有使用自动布局约束的子视图，您需要停止 Springs 和 Struts 的翻译。
*   *另一个*拆分视图窗格中有一个滚动视图，我必须调用`setTranslatesAutoresizingMaskIntoConstraints:NO`该滚动视图，否则会引发异常。

# mysql - 跨不同数据库创建视图并获取数据库中的列和某些字段

> ID：14476954
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:03:55.597
> 
> 标签：mysql

如果我有数据库test1和数据库test2，数据库test1下的表employee1和数据库test2下的表employee2，是否可以在MySQL中创建数据库test1下的employee2视图。如果是这样，你能告诉我语法吗？我还想在 test2 表中获取一些列和列是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:38:11.853

CREATE VIEW test1.emp2_view as select * from test2.employee2;

# r - 为什么我得到“position_dodge 需要恒定宽度”，即使宽度在 ggplot2 中是恒定的

> ID：14476961
> 
> 赞同：18
> 
> 时间：2013-01-23T10:04:19.110
> 
> 标签：r, plot, ggplot2

我收到一条警告消息，我不理解 ggplot2 中的简单条形图

```
> df <- data.frame(X = 127:131, Y = rnorm(5))
> df
    X          Y
1 127  0.9391077
2 128 -0.9392529
3 129 -1.1296221
4 130  1.1454907
5 131  1.8564596
> ggplot(df) + geom_bar(aes(X,Y), stat ="identity", position = "dodge")
Warning message:
position_dodge requires constant width: output may be incorrect 
```

它似乎只发生在 X 值的某些范围内。我已经用谷歌搜索了这方面的信息，但似乎都是在谈论宽度真正不同的情况，或者 stat 不是“身份”的情况。在这种情况下，X 值只是整数，所以应该很简单。

生成的图表看起来不错，所以我对忽略我不理解的警告感到不安。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-23T11:10:11.390

设置[`options(warn = 2, error = recover)`](http://www.inside-r.org/r-doc/utils/recover)并重新运行代码可以让我们找到问题所在。

在`collide`函数内部（调用堆栈中的第 16 号），有这段代码：

```
if (!zero_range(range(widths))) {
    warning(name, " requires constant width: output may be incorrect", 
        call. = FALSE)
} 
```

[浮点舍入误差](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)意味着`widths`取值略有不同。

```
format(widths, digits = 22)
# [1] "0.9000000000000056843419" "0.8999999999999914734872" "0.8999999999999772626325" 
```

检查数字是否相同的[公差太严格了：大约 2.2e-14。](http://www.inside-r.org/packages/cran/scales/docs/zero_range)

```
args(zero_range)
# function (x, tol = .Machine$double.eps * 100) 
# NULL
.Machine$double.eps * 100
# [1] 2.220446e-14 
```

所以警告是错误的；别担心。

# .net - Stylecop 或 XAML .Net 4.5 的等效工具

> ID：14476962
> 
> 赞同：3
> 
> 时间：2013-01-23T10:04:24.690
> 
> 标签：.net, xaml, .net-4.5, stylecop

我想为 XAML 使用 StyleCop 或任何其他等效工具。这样我就可以使我的代码可读。

我怎么能用任何工具做到这一点？

请帮忙。

# shell - 如何在输出中获得不同的行？

> ID：14476967
> 
> 赞同：0
> 
> 时间：2013-01-23T10:04:34.393
> 
> 标签：shell

在我的终端：

```
ps  aux|awk '{print $1}'
USER
root
root
root
root
statd
root
root
root
101
daemon
avahi
avahi
103
rtkit
debian
debian
debian 
```

我想得到的输出是
USER
root
statd
101
daemon
avahi
103
rtkit
debian

外壳怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:19:58.297

单程：

```
ps  aux | awk '!a[$1]++{print $1}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:09:31.747

而不是在`awk '{print $1}'`下面使用：

```
awk '{a[$1];next}END{for(i in a )print i}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:09:50.003

您可以通过 sort 管道命令输出，然后通过 uniq

```
ps  aux|awk '{print $1}' | sort | uniq 
```

如果您需要特定顺序的列表，它会变得有点复杂。

# jquery - X-Frame-Options 拒绝？

> ID：14476968
> 
> 赞同：1
> 
> 时间：2013-01-23T10:04:36.640
> 
> 标签：jquery, .net, x-frame-options

我通过 jQuery $.getJSON 加载了一个“页面”（由于某些原因，所有页面都编码为 JSON；然后我在函数成功时对其进行解码），其中包含一个指向另一个源的 iframe！所有代码均来自 .NET 4.0。

当我在 Firefox 上打开页面时，在控制台上我得到`Load denied by X-Frame-Options`. 在 chrome 上我没有任何问题。

我该如何解决这个问题？我哪里错了？

# php - 将文本区域数据插入数据库

> ID：14476971
> 
> 赞同：0
> 
> 时间：2013-01-23T10:04:45.750
> 
> 标签：php, codeigniter, textarea

我正在尝试插入一些写在文本字段中的文本，有两个字段一个是票，它工作正常另一方面报告没有正确插入到 sql。这是我的视图代码

```
<td><input type='text' id='ticket' name='ticket'/></td>
<td><textarea id='report' name='report'>enter text report</textarea></t 
```

这是我的控制器

```
function testUpload(){
    $data=array(
        'ticket'=>$this->input->post('ticket'),
        'report'=>$report=$this->input->post('repost')
    );
    $this->load->model('patient_model');
    $this->patient_model->insertReport($data);
} 
```

这是我的模型

```
function insertReport($data){
    $this->db->insert('report',$data);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:07:02.163

Try below code, change `repost` to `report`

```
function testUpload(){
        $data=array(
        'ticket'=>$this->input->post('ticket'),
        'report'=>$report=$this->input->post('report')
        );

    $this->load->model('patient_model');
    $this->patient_model->insertReport($data);
} 
```

**EDIT :-**

Seems like you have edited your question,

Initially it was `'report'=>$report=$this->input->post('tr')`

Now you have change`'report'=>$report=$this->input->post('repost')`

Both are wrong...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:07:33.020

You have `name='report'` but `$this->input->post('repost')`

You need to avoid making typos when referencing your field.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T21:44:38.263

尝试这个。

```
function testUpload(){
    $data=array(
        'ticket'=>$this->input->post('ticket'),
        'report'=>$this->input->post('report')
    );
    $this->load->model('patient_model');
    $this->patient_model->insertReport($data);
} 
```

并且您必须确定表格报告中必须存在字段报告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T18:34:19.610

请更改`repost`为`report`

因为您的文本区域名称是报告

因此，您的控制器应如下所示...

```
function testUpload(){
    $data=array(
        'ticket'=>$this->input->post('ticket'),
        'report'=>$report=$this->input->post('report')
    );
    $this->load->model('patient_model');
    $this->patient_model->insertReport($data);
} 
```

# iphone - 通过默认相机拍照

> ID：14476972
> 
> 赞同：2
> 
> 时间：2013-01-23T10:04:46.217
> 
> 标签：iphone, xcode, uiimagepickercontroller

我正在使用`UIImagePickerView`控制器从我的应用程序中的 iPhone 默认相机拍照。完成该过程需要很长时间。

```
-(IBAction)takePhoto:(id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
        imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self presentModalViewController:imgPicker animated:YES];
    }
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *pickedImage = [info objectForKey:UIImagePickerControllerOriginalImage];    
    [self dismissModalViewControllerAnimated:YES];

    NSData *imageData = UIImagePNGRepresentation(pickedImage);
    path = [SAVEDIMAGE_DIR stringByAppendingPathComponent:@"image.png"];
    [imageData writeToFile:path atomically:YES];
    [tableview reloadData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:10:35.787

试试这些行：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.delegate = self;

[self presentViewController:imagePicker animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:18:26.107

您可以像下面的方法从默认相机捕获图像：-

```
-(IBAction)cameraLibraryButtonClick:(id)sender{

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){

                imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
                imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage , nil];
                imagePicker.allowsEditing = NO;

                [self presentModalViewController:imagePicker animated:YES];

                newMedia = YES;
            }
            else
            {
                [self displaysorceError];
            }

}

-(void)displaysorceError{
    UIAlertView *alt = [[UIAlertView alloc] 
                        initWithTitle:@"Error" 
                        message:@"Camera Image Sorce Not Available" 
                        delegate:nil cancelButtonTitle:@"OK" 
                        otherButtonTitles:nil];
    [alt show];
    [alt release];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSLog(@"Media Info: %@", info);
    NSString *mediaType = [info valueForKey:UIImagePickerControllerMediaType];

    if([mediaType isEqualToString:(NSString*)kUTTypeImage]) {
        UIImage *photoTaken = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

        //Save Photo to library only if it wasnt already saved i.e. its just been taken
        if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {
            UIImageWriteToSavedPhotosAlbum(photoTaken, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
        }

    }

    [picker dismissModalViewControllerAnimated:YES];
    [picker release];
}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {
    UIAlertView *alert;
    //NSLog(@"Image:%@", image);
    if (error) {
        alert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                           message:[error localizedDescription]
                                          delegate:nil
                                 cancelButtonTitle:@"OK"
                                 otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

} 
```

# reflection - 计算漫反射（朗伯）反射

> ID：14476973
> 
> 赞同：1
> 
> 时间：2013-01-23T10:04:47.913
> 
> 标签：reflection, graphics, vector, normalization, physics

我需要帮助弄清楚如何计算（朗伯）漫反射 - 即当光线撞击表面然后以随机方向反弹时。因此，如果我有一个源自光源的光向量 L、一个 3D 点 X 和点 X 的法线向量 N，我如何计算随机反射的光线？

在我正在阅读的一本书中，他们说要使用这个等式：

Wd = (theta, phi) = cos-1(sqrt(rand1), 2*pi*rand2) 其中 Wd 是反射光线，rand1 和 rand2 是 [0,1] 范围内的随机数。

这对我不起作用。我使用了该方程，然后将球坐标转换为笛卡尔坐标，但这使得光线总是在相同的几个方向上反射，而不管法线的方向如何。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:57:32.577

选择`theta`be`arccos(sqrt(rand1))`不会在单位球体的表面上给你随机分布的点，因为它的分布`arccos(sqrt(rand1))`并不像应有的那样均匀。

给定两个随机变量`u`和`v`，从 均匀采样`(0, 1)`，在球坐标中，随机点将是：

```
theta = 2*pi * u   <--- note, no arccos here
phi = arccos(2*v - 1) 
```

由于它是来自表面的反射，因此您只需对球面的一半进行采样，因此`theta`宁愿`theta = pi * u`.

由于反射角是随机的，因此光源的位置并不重要，即结果不取决于光矢量 L。您只需选择球坐标，使采样的半球位于外部表面的一侧。

另外的选择：

1.  在整个单位球面上画一个随机点（即`theta = 2 * pi * u`）
2.  转换为笛卡尔点向量坐标
3.  取法线和点向量的点积。如果它是否定的，请从步骤 1 开始重复。

这将保证您只从面向表面外侧的半球采样。

您也可以完全跳过球坐标并直接计算笛卡尔坐标：

```
x = sqrt(1 - u^2) * cos(theta)
y = sqrt(1 - u^2) * sin(theta)
z = u 
```

这里`u`是从 均匀采样的`[-1, 1]`（例如`u = 2*v - 1`，在哪里`v`是均匀采样的`[0, 1]`）并且`theta`是从 均匀采样的`[0, 2*pi)`。

还有另一种完全不使用三角函数的方法（取自[此处](http://mathworld.wolfram.com/SpherePointPicking.html)）：

从 中取`x1`并`x2`均匀采样`[-1, 1]`。如果`x1^2 + x2^2 < 1`，那么（如果不是，重复采样）：

```
x = 2 * x1 * sqrt(1 - x1^2 - x2^2)
y = 2 * x2 * sqrt(1 - x1^2 - x2^2)
z = 1 - 2 * (x1^2 + x2^2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T18:57:41.673

我也在看朗伯反射，你提供的代码确实有效，它只是从表面的法线向量中引用的。要获得正确的向量，您应该：

1.  将曲面法线向量 N 在曲面平面中围绕（任意）轴旋转角度 phi
2.  将结果向量围绕表面法线向量旋转角度 theta

可以从这里生成关于任意轴旋转矢量的代码：http: [//inside.mines.edu/~gmurray/ArbitraryAxisRotation/](http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/)

# vb.net - VB.NET：代码不检查面板中是否存在控件

> ID：14476974
> 
> 赞同：2
> 
> 时间：2013-01-23T10:04:49.687
> 
> 标签：vb.net, controls

我的代码：

```
Rs.Open("Select * From Notifications",Con)
If Not Rs.EOF Then
   For i=0 to Rs.RecordCount -1
     Dim Label As New Label
     With Label
        .Name = String.Format("Label_{0}",Rs("Id").Value.ToString)
        .Text = Rs("Notification").Value.ToString
     End With
     If Not Panel.Controls.Contains(Label) Then
        Panel.Control.Add(Label)
     End If
     Rs.MoveNext()
   Next
End If 
```

但这总是将控制添加到面板，以下代码行未正确执行： `(If Not Panel.Controls.Contains(Label) Then)`

此代码适用于计时器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:12:55.393

```
Function CntrlExistsIn(ctrlName as String, parent as Control) as Boolean
    Dim bResult as Boolean = False

    For Each elem as Control In parent.Controls
        If elem.Name = ctrlName Then
            bResult = True
            Exit For
        End If
    Next

    Return bResult
End Function 
```

上面的功能是检查Panel中是否存在control(label)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:13:29.427

还有另一种方法可以减少您的代码，如下所示

```
 If panel1.Controls.Find(Label.Name, True).Length = 0 Then
    panel1.Control.Add(Label)
 End If 
```

Controls.Find(controlName,True/False)------ **[True/False](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.80%29.aspx)**用于检入指定控件的子控件

# ios - UIactivityindicator xcode ios

> ID：14476976
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:04:59.753
> 
> 标签：ios, xcode, processing

我正在尝试使用`UIActivityIndicator`引用此[链接（http://www.cocoacontrols.com/platforms/ios/controls/mbprogresshud）](http://www.cocoacontrols.com/platforms/ios/controls/mbprogresshud%29)，但这里有问题。我必须显示一个指示器几秒钟保持不变`ViewController`，然后它必须导航，但我的代码表现得就像我以前单击按钮时它只是导航和显示指示器。我们可以停止导航几秒钟直到指标过程完成吗？

```
- (void)myProgressTask {
    // This just increases the progress indicator in a loop
    float progress = 0.0f;
    while (progress < 1.0f) {
        progress += 0.01f;
        HUD.progress = progress;
        usleep(50000);
    }
}
-(IBAction)loginActionforIphone:(id)sender
{

    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    // Set the hud to display with a color
    HUD.color = [UIColor colorWithRed:0.23 green:0.50 blue:0.82 alpha:0.90];

    HUD.delegate = self;
    [HUD showWhileExecuting:@selector(myProgressTask) onTarget:self withObject:nil animated:YES];

    if([loginText_ipad.text length]<=0||[passwordText_ipad.text length]<=0)
    {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Please enter all the fields" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release]; 
    }
    else
    {
        if(([loginText_ipad.text isEqualToString:@"21770765"]&&[passwordText_ipad.text isEqualToString:@"21770765"])||([loginText_ipad.text isEqualToString:@"21770766"]&&[passwordText_ipad.text isEqualToString:@"21770766"]))
        {

            HPEBDashboardViewController_iphone *dashboardView = [[HPEBDashboardViewController_iphone alloc] initWithNibName:@"HPEBDashboardViewController_iphone" bundle:nil];
            if([loginText_ipad.text isEqualToString:@"21770765"])
            {
                dashboardView.buttonvalue=1;
            }
            else
            {
                dashboardView.buttonvalue=2;
            }
            [self.navigationController pushViewController:dashboardView animated:YES];
        }
        else
        {
            UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Invalid credentials" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }

    }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:29:16.427

```
- (void)myProgressTask {
    // This just increases the progress indicator in a loop
    float progress = 0.0f;
    while (progress < 1.0f) {
        progress += 0.01f;
        HUD.progress = progress;
        usleep(50000);
    }
}
-(IBAction)loginActionforIphone:(id)sender
{

    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    // Set the hud to display with a color
    HUD.color = [UIColor colorWithRed:0.23 green:0.50 blue:0.82 alpha:0.90];

    HUD.delegate = self;
    [HUD showAnimated:YES whileExecutingBlock:^{
    [self myProgressTask];
} completionBlock:^{
    if([loginText_ipad.text length]<=0||[passwordText_ipad.text length]<=0)
{
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Please enter all the fields" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
    [alert release]; 
}
else
{
    if(([loginText_ipad.text isEqualToString:@"21770765"]&&[passwordText_ipad.text isEqualToString:@"21770765"])||([loginText_ipad.text isEqualToString:@"21770766"]&&[passwordText_ipad.text isEqualToString:@"21770766"]))
    {

        HPEBDashboardViewController_iphone *dashboardView = [[HPEBDashboardViewController_iphone alloc] initWithNibName:@"HPEBDashboardViewController_iphone" bundle:nil];
        if([loginText_ipad.text isEqualToString:@"21770765"])
        {
            dashboardView.buttonvalue=1;
        }
        else
        {
            dashboardView.buttonvalue=2;
        }
        [self.navigationController pushViewController:dashboardView animated:YES];
    }
    else
    {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Invalid credentials" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:11:53.617

像这样改变你的方法：

```
-(IBAction)loginActionforIphone:(id)sender
{

    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    // Set the hud to display with a color
    HUD.color = [UIColor colorWithRed:0.23 green:0.50 blue:0.82 alpha:0.90];

    HUD.delegate = self;
    [HUD showWhileExecuting:@selector(myProgressTask) onTarget:self withObject:nil animated:YES];
}

- (void)myProgressTask {
    // This just increases the progress indicator in a loop
    float progress = 0.0f;
    while (progress < 1.0f) {
        progress += 0.01f;
        HUD.progress = progress;
        usleep(50000);
    }
   [self navigate];
} 
```

添加一个新方法，例如：

```
-(void)navigate
{
   if([loginText_ipad.text length]<=0||[passwordText_ipad.text length]<=0)
    {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Please enter all the fields" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release]; 
    }
    else
    {
        if(([loginText_ipad.text isEqualToString:@"21770765"]&&[passwordText_ipad.text isEqualToString:@"21770765"])||([loginText_ipad.text isEqualToString:@"21770766"]&&[passwordText_ipad.text isEqualToString:@"21770766"]))
        {

            HPEBDashboardViewController_iphone *dashboardView = [[HPEBDashboardViewController_iphone alloc] initWithNibName:@"HPEBDashboardViewController_iphone" bundle:nil];
            if([loginText_ipad.text isEqualToString:@"21770765"])
            {
                dashboardView.buttonvalue=1;
            }
            else
            {
                dashboardView.buttonvalue=2;
            }
            [self.navigationController pushViewController:dashboardView animated:YES];
        }
        else
        {
            UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Invalid credentials" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }

    }
} 
```

# android - 在 Android 中格式化电话号码

> ID：14476983
> 
> 赞同：2
> 
> 时间：2013-01-23T10:05:21.087
> 
> 标签：android, phone-number

我尝试使用以下代码在 android 中格式化电话号码：-

```
public static String formatPhoneNumber(String number){

        return PhoneNumberUtils.formatNumber(number);
    } 
```

我将“19253951646”传递给函数。它返回格式为 1-925-395-1646 的文本。我想要格式为 1(925)395-1646 的结果。任何帮助都会受到高度评价。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T05:13:41.633

写了我自己的函数来格式化数字。

```
public static String formatPhoneNumber(String number){  
        number  =   number.substring(0, number.length()-4) + "-" + number.substring(number.length()-4, number.length());
        number  =   number.substring(0,number.length()-8)+")"+number.substring(number.length()-8,number.length());
        number  =   number.substring(0, number.length()-12)+"("+number.substring(number.length()-12, number.length());
        return number;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-23T09:09:48.483

这是我的代码，运行没有错误：

```
 mobile.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

        }

        @Override
        public void afterTextChanged(Editable editable) {
            StringBuilder digits = new StringBuilder();
            StringBuilder phone = new StringBuilder();
            char[] chars = mobile.getText().toString().toCharArray();

            for (int x = 0; x < chars.length; x++) {
                if (Character.isDigit(chars[x])) {
                    digits.append(chars[x]);
                }
            }

            //Format for 6 digits and below
            if (digits.toString().length() >= 6) {
                String six = new String();
                six += digits.toString();
                phone.append(six);
                //Format for 7 digits 
                if (digits.toString().length() >= 7) {
                    phone.setLength(0);
                    String countryCode = new String();
                    countryCode += digits.toString().substring(0, 3) + "-";
                    countryCode += digits.toString().substring(3,7);

                    phone.append(countryCode);
                    //Format for 8 and 9 digits
                    if (digits.toString().length() >= 8) {
                        phone.setLength(0);
                        String eight = new String();
                        eight += digits.toString();
                        phone.append(eight);
                        //Format for 10 digits
                        if (digits.toString().length() >= 10) {
                            phone.setLength(0);

                            String regionCode = new String();

                            regionCode += "(" + digits.toString().substring(0, 3) + ") ";
                            regionCode += digits.toString().substring(3, 6) + "-";

                            phone.append(regionCode);
                            //Format for 11 digits
                            if (digits.toString().length() >= 11) {
                                String code = new String();
                                phone.setLength(0);
                                code += digits.toString().substring(0, 1);
                                code += "(" + digits.toString().substring(1, 4) + ")- ";
                                code += digits.toString().substring(4, 7) + "-";
                                code += digits.toString().substring(7, 11);
                                phone.append(code);
                                //Format for 12 digits
                                if (digits.toString().length() >= 12) {
                                    String newCode = new String();
                                    phone.setLength(0);
                                    newCode += "+" + digits.toString().substring(0, 2);
                                    newCode += "(" + digits.toString().substring(2, 5) + ")";
                                    newCode += digits.toString().substring(5, 8) + "-";
                                    newCode += digits.toString().substring(8, 12);

                                    phone.append(newCode);
                                    //Format for 12 digits and more
                                    if (digits.toString().length() >= 13) {
                                        String noMoreThanTwelve = new String();
                                        phone.setLength(0);
                                        noMoreThanTwelve += digits.toString();
                                        phone.append(noMoreThanTwelve);
                                    }
                                }
                            } else {
                                phone.append(digits.toString().substring(6));
                            }
                        }
                    }
                }
                mobile.removeTextChangedListener(this);
                mobile.setText(phone.toString());
                mobile.setSelection(mobile.getText().toString().length());
                mobile.addTextChangedListener(this);
            } else {
                return;
            }

        }
    }); 
```

这是我的代码的输出：

7位以下：123456 = 123456

7 位数字：1234567 = 123-4567

8 位 12345678 = 12345678

9 位 123456789 = 123456789

10 位数 1234567890 = (123) 456-7890

11 位 12345678901 = 1 (234) 567-8901

12 位 123456789012 = +12 (345) 678-9012

12位以上12345678901234 ....

很抱歉使用这些变量，但我希望你能理解我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T07:25:39.120

Android SDKs [PhoneNumberUtils](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)或多或少有足够的电话号码格式化工具，但有时可能不足以满足特殊需求。

试用替代库[libphonenumber](https://github.com/googlei18n/libphonenumber) ，该库被描述为“Google 的通用 Java、C++ 和 JavaScript 库，用于解析、格式化、存储和验证国际电话号码。Java 版本针对在智能手机上运行进行了优化，自 4.0 (Ice Cream) 起就被 Android 框架使用三明治）。”

图书馆有不同的电话号码格式选项。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-01-23T10:08:19.893

1-925-395-1646

号码有国际美国格式。如果你想要自定义格式，你可以手动解析数字并格式化他。

因此，您可以尝试在数字前插入 +1。

我的 iPhone 上的证明：

![在此处输入图像描述](../Images/6065ee5cb062e8a8b35066ea420d7976.png)

也可以试试：[如何使用 PhoneNumberUtils 格式化电话号码？](https://stackoverflow.com/questions/6106859/how-to-format-a-phone-number-using-phonenumberutils)

# java - Java：使用两个相关的泛型类型声明 Map ( 地图 >,类>>)

> ID：14476987
> 
> 赞同：6
> 
> 时间：2013-01-23T10:05:39.797
> 
> 标签：java, generics

是否可以声明一个从特定子类的键映射到特定子类的值但确保两个类共享相同类型参数的 Map？

对于背景：

ClassA 和 ClassB 都实现了公共资源的行为

```
public abstract  class ClassA<T> {
      public abstract T getResource() ;
}

public abstract class classB<T> {
       public  abstract void consoumeResource(T resource);
} 
```

我想从 ClassA 和 ClassB 的实现中进行映射，并确保只有“兼容”对可以放在一个条目中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:15:21.300

另一种方法是提供您自己的`Map`实现。如果您扩展现有实现并使用新类型，则不需要太多代码：

```
public class CompatibleHashMap<T> extends HashMap<ClassA<T>, ClassB<T>> {

} 
```

现在， a `CompatibleHashMap<String>`only 允许您将`ClassA<String>`其作为键和`ClassB<String>`值。

**编辑：**

正如您在评论中提到的那样，这样您就可以将自己与`Map`实现联系起来。您可以通过执行以下操作来克服此问题：

```
public class CompatibleMap<T> implements Map<ClassA<T>, ClassB<T>> {

    private Map<ClassA<T>, ClassB<T>> map;

    public CompatibleMap(Map<ClassA<T>, ClassB<T>> map) {
        this.map = map;
    }

    @Override
    public Set<List<T>> keySet() {
        return map.keySet();
    }
    // ... implement all other Map methods by calling the method on map.
} 
```

然后你可以像这样实例化它

```
CompatibleMap<String> map = new CompatibleMap<>(new HashMap<ClassA<String>, ClassB<String>>()); 
```

这样，您就不会被绑定到特定的实现，如果,和`Map`的泛型类型不同，编译器将抛出错误。`map``ClassA``ClassB`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T10:09:55.820

您不能在 Map 声明中执行此操作，但您可以使用访问/更新地图的方法执行此操作。

例如

```
private final Map<Class, Builder> builderMap = new LinkedHashMap<>();

public <T> void addBuilder(Class<T> tClass, Builder<T> tBuilder) {
     builderMap.put(tClass, tBuilder);
}

public <T> Builder<T> getBuilderFor(Class<T> tClass) {
    @SuppressWarnings("unchecked") 
    Builder<T> tBuilder = (Builder<T>) builderMap.get(tClass);
    return tBuilder;
} 
```

# c# - 刷新窗口窗体，即使不是活动窗口

> ID：14476988
> 
> 赞同：2
> 
> 时间：2013-01-23T10:05:42.363
> 
> 标签：c#, windows, winforms

我正在尝试一些非常基本的东西。

我的 windows 窗体上有 3 个标签，我想从数据库中的 3 个单独的查询中填充它们，但也为了向用户显示正在发生的事情，我想显示每个标签，因为数据可从相应的查询中获得.

为此，我可以使用：

```
Form.ActiveForm.Refresh(); 
```

但是，如果用户单击桌面上的任何其他窗口，该命令将失败，并出现“对象未设置”错误。

有什么方法可以刷新表单上的标签，即使表单窗口不是活动窗口？

```
// Breach within next hour
DataTable tbBreach = (get info from database)
tbBreach.DefaultView.Sort = "Assignee ASC";
dgBreach.DataSource = tbBreach;
lbBreach2.Text = tbBreach.Rows.Count.ToString();
Form.ActiveForm.Refresh();  //Would like to update this form field now, and show it on the form

// Breach within next 24 hour
DataTable tbBreach24 = (get info from database)
tbBreach24.DefaultView.Sort = "Assignee ASC";
dgBreach24.DataSource = tbBreach24;
lbBreach24.Text = tbBreach24.Rows.Count.ToString();
Form.ActiveForm.Refresh(); 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:28:03.153

标签将在详细说明结束时自动刷新。

您可能想强制刷新以在详细说明中间更新标签，您可以简单地使用，`this.Refresh()`因为我怀疑该方法位于表单类中。

但是，当您进行长时间的阐述并且需要保持 UI 更新和反应性（即不冻结）时，建议的方法是避免在 UI 线程上进行阐述，而是使用[`BackGroundWorker`](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD4QFjAB&url=http://msdn.microsoft.com/it-it/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx&ei=Hbv_UIaxAYvjtQbj7IDoBA&usg=AFQjCNFRVGcrEN3-rSleLQLwxJfbUgg1dA&sig2=YX71f8IHecj_cbf5woF5xQ&bvm=bv.41248874,d.Yms).

[这](http://pastebin.com/zcnhCCBb)是 BackGroundWorker 使用的一个工作示例。

# android - android windowSoftInputMode 不会调整布局大小

> ID：14476990
> 
> 赞同：1
> 
> 时间：2013-01-23T10:05:43.643
> 
> 标签：android, keyboard

我有一个活动组。Сhild Activity 有一组 EditText(s)。当出现虚拟键盘时，布局不会向上移动，用户看不到输入字段。设置`android:windowSoftInputMode="adjustResize"`并`manifest.xml`没有给出所需的结果。

```
 <activity android:name="com.boyko.organizer.activities.editors.AddCarActivity" android:windowSoftInputMode="adjustResize" >
    </activity>
    <activity android:name="MainActivityGroupWithFrame"   android:windowSoftInputMode="adjustResize">
    <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    </activity> 
```

**已编辑**

发现奇怪的行为。我有自定义的 Horizo​​ntalscrollview 作为父级和两个子级：activityGroup 和 listview。当删除滚动视图并将活动组设置为父级时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T13:47:16.490

为我做的唯一一件事就是用代码做它，把

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

进入我的活动`onCreate`方法。

所有 XML 尝试根本不起作用，尽管我听说过一些黑客通过设置多个状态值似乎可以在某些设备上工作，`android:windowSoftInputMode`这显然是一个黑客，因为谷歌[在这里](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)声明这可能会导致“*未定义的结果*”。

无论如何，上面的行在我迄今为止尝试过的每台设备上都运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:18:07.207

我可以建议您将布局放在**ScrollView**中，然后在清单中添加 `android:windowSoftInputMode="adjustResize"`。像这样的东西

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

          <TextView 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:gravity="center" 
            android:id="@+id/tv_message" 
            style="@style/Text.Large.Bold.Colored.Red" />

            // other widget
    </LinearLayout>
</ScrollView> 
```

# iis - AppCmd command fail : Cannot find requested collection element

> ID：14476995
> 
> 赞同：4
> 
> 时间：2013-01-23T10:05:56.280
> 
> 标签：iis, iis-7

it tried to set application physical path by using the command line :

```
APPCMD set app "Default Web Site/SiteName" /applicationPool:MyAppPool  /[path='/'].physicalPath:C:\MySite 
```

I got an error :

```
ERROR ( message:Cannot find requested collection element. ) 
```

The application pool and the site are already exist.

Please help.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-30T07:29:01.283

尝试使用参数运行此命令：

```
/commitPath:apphost 
```

# ruby-on-rails - 基于 Date.today 的日期范围

> ID：14476996
> 
> 赞同：0
> 
> 时间：2013-01-23T10:06:00.573
> 
> 标签：ruby-on-rails, date, date-range

我有一个应用程序，用于计算一些员工的薪水。

工资是从一个月的 21 号到下个月的 20 号计算的。因此，当员工使用该应用程序时，我需要根据今天的日期找到这两个日期（开始日期和结束日期）。

我怎样才能做到这一点？像 begin_of_month + 21 这样的东西不起作用，因为当它是一个月中的第三个时，它是 begin_of_last_month ..

有什么简单的方法可以找到最后一个 21 日和下一个 20 日吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:40:03.773

您可以创建一个看起来像这样的辅助方法：

```
def paycheck_dates(date, past_day, future_day)
    before, after = Date.civil(date.year, date.month, past_day), Date.civil(date.year, date.month, future_day)
    before <<= 1 if before > date
    after >>= 1 if after < date
    return before, after
end 
```

运算符`<<=`减去一个月，并`>>=`增加一个月。在您的情况下，您可以像这样调用此方法：

```
current_date = Date.today
past_date, future_date = paycheck_dates(current_date, 21, 20) 
```